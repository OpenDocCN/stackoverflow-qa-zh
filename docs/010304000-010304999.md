# StackOverflow 问答 10304000-10304999

# c++ - 使用 QGraphicsView 或 QGraphicsScene 在较大的图像中叠加图像

> ID：10304001
> 
> 赞同：0
> 
> 时间：2012-04-24T18:37:42.417
> 
> 标签：c++, qt, qgraphicsview

我是 Qt 的新手，所以我可能会弄乱这个问题。话说回来-

我在子类 QGraphicsView 中渲染图像。我使用 addPixmap() 将图像作为 Pixmap 添加到场景中。我想在特定位置的较大图像之上覆盖（blit）较小的图像。我也可以通过再次调用 addPixmap() 将较小的图像添加到场景中，但它始终显示在左上角。我想自己设置这些坐标。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:51:41.370

`QGraphicsScene::addPixmap`返回指向添加的 QGraphicsPixmapItem 的指针。如果你想设置它的位置，你可以这样做：

```
QGraphicsPixmapItem *item = scene->addPixmap(yourPixmap);
item->setPos(50, 50); // sets position to scene coordinate (50, 50) 
```

如果您想将图像叠加在其他图像之上，请确保您了解 z 值。有关详细信息，请参阅[QGraphicsItem 文档](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html)。基本上，z 值决定了堆叠顺序。

最后，熟悉 QGraphicsItems 的父子关系。当 QGraphicsItem 有一个父项时，这意味着（除其他外）它的坐标以其父项的坐标表示。所以如果一个item的位置是(0, 0)，但是它是场景位置是(50, 50)的item的child，那么child item会显示在(50, 50)。因此，鉴于上面的示例，您可以执行以下操作：

```
QGraphicsPixmapItem *childItem = new QGraphicsPixmapItem(item); 
```

这将创建一个新项目“childItem”，其父项是“item”。它的坐标是 (0, 0)，因为它们还没有被设置，但是它的场景坐标是 (50, 50)，因为它是 "item" 的孩子。请注意，当您指定项目的父项时，您不需要将子项目添加到场景中；它是隐式添加的。

# achartengine - 如何使用 aChartEngine 设置 setZoomButtonsVisible？

> ID：10304004
> 
> 赞同：0
> 
> 时间：2012-04-24T18:37:45.900
> 
> 标签：achartengine

我用 aChartEngine 创建了一个图表，它可以工作，但是当我写

renderer.setZoomButtonsVisible(true);

eclipse 不承认该方法。它显示为红色。问题是什么？

谢谢和对不起我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:30:52.243

使用aChartEngine 1.0，因为这个帮助方法是在acharengine 0.7版本之后添加的。

# css - 高度未针对 UL 和 DIV 容器进行调整

> ID：10304005
> 
> 赞同：1
> 
> 时间：2012-04-24T18:37:47.400
> 
> 标签：css, html, height, overflow, html-lists

有人知道如何制作这个滑块来调整高度吗？

[http://www.awesomeget.net/#steps-slider](http://www.awesomeget.net/#steps-slider)

现在高度在 DIV“容器”中设置，但如果你删除高度，则不会显示任何内容。似乎 UL 元素以某种方式没有将其高度提供给父级。我添加了溢出：隐藏到作为父容器的“steps-holder”和“slide-holder”......并确保这个UL元素没有浮动......但仍然没有任何变化......

任何帮助，将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:52:36.707

div 中的 ul 和 li 元素是绝对定位的，这意味着它们被从正常流程中移除，因此它们所在的 div 不受其大小的影响。删除绝对定位将解决问题，尽管它可能是其他原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:05:58.773

如上所述，因为列表项是绝对定位的，除非您删除“绝对”定位，否则您将无法仅使用 css 执行此操作。但是，您可以使用 jQuery 来做到这一点：

删除 div.container 的 height: 300px 并添加以下代码：

```
$(document).ready(function() {
   tmpHeight = $(".slides li").height() + 46; // I added 46 to get to 330, but you should do this with padding in css or something
   $("div.container").css("height", tmpHeight + "px");

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:14:40.780

在`black.css`第 705 行的文件中，为幻灯片的所有元素`height`设置了一个属性。`a`首先删除该部分...然后从具有 . 类的容器中删除`overflow: hidden`和属性。实际上，我在您的块中没有发现具有类的 div ...请指定它是否是类。这有点误导:)`height``steps-holder``container``steps-slider`

如果这是您当然希望达到的效果）[http://clip2net.com/s/1Qyvr](http://clip2net.com/s/1Qyvr)

# ios - Unity3D 和 iPhone 键盘？

> ID：10304009
> 
> 赞同：0
> 
> 时间：2012-04-24T18:38:03.827
> 
> 标签：ios, unity3d, unityscript

我试图弄清楚如何在 Unity3D 中使用 iPhoneKeyboard 功能。当用户点击键盘上的“确定”按钮时，我希望能够运行一个函数。我只是无法弄清楚这一点。

这件事的第二个问题是如何将“确定”更改为“搜索”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:13:22.030

查看参考资料中的[IPhoneKeyboard.Open](http://unity3d.com/support/documentation/ScriptReference/iPhoneKeyboard.Open.html) .. 有一个例子

[在您可以使用IPhoneKeybard.done](http://unity3d.com/support/documentation/ScriptReference/iPhoneKeyboard-done.html)属性处理用户输入之后（也是一个示例）

# arrays - 在数组中求和的快速算法

> ID：10304010
> 
> 赞同：6
> 
> 时间：2012-04-24T18:38:07.507
> 
> 标签：arrays, algorithm

我正在寻找一种快速算法：

我有一个大小为 n 的 int 数组，目标是找到数组中的所有模式
`x1, x2, x3 are different elements in the array, such that x1+x2 = x3`

例如，我知道有一个大小为 3 的 int 数组，`[1, 2, 3]`那么只有一种可能性：1+2 = 3（考虑 1+2 = 2+1）

我正在考虑实现 Pairs 和 Hashmaps 以使算法更快。（我现在最快的还是`O(n^2))`

请分享您对这个问题的想法，谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T18:51:17.623

**编辑**：下面的答案适用于这个问题的一个版本，在这个版本中你只想要一个像这样加起来的三元组。当你想要所有这些时，因为可能至少有 O(n^2) 可能的输出（如 ex0du5 所指出的那样），甚至在重复元素的病理情况下甚至 O(n^3)，你不会击败基于散列的简单 O(n^2) 算法（从一个值映射到具有该值的索引列表）。

* * *

这基本上[是 3SUM 问题](http://en.wikipedia.org/wiki/3SUM)。如果没有可能无限大的元素，最著名的算法是近似`O(n^2)`，但我们只是证明它不能比`O(n lg n)`大多数计算模型更快。

如果整数元素位于范围内，您可以使用[FFT](http://en.wikipedia.org/wiki/Fast_Fourier_transform)`[u, v]`进行稍微不同的版本。我将描述一个将这个问题转化为那个问题的过程，在那里解决它，然后根据这个转换找出你的问题的答案。`O(n + (v-u) lg (v-u))`

我知道如何用 FFT 解决的问题是在一个数组中找到一个长度为 3 的算术序列：即一个序列`a`, `b`, `c`with`c - b = b - a`或等价的`a + c = 2b`.

不幸的是，转换回来的最后一步并没有我想要的那么快，但是当我们到达那里时我会谈到这一点。

* * *

让我们调用您的原始数组`X`，其中包含整数`x_1, ..., x_n`。我们想找到索引`i`, `j`,`k`这样`x_i + x_j = x_k`。

1.  找出时间的最小值`u`和最大值`v`。让我们成为。_`X``O(n)``u'``min(u, u*2)``v'``max(v, v*2)`

2.  `Z`构造一个长度为 的二进制数组（位串）`v' - u' + 1`；`Z[i]`如果其中一个`X`或它的双精度`[x_1*2, ..., x_n*2]`包含，则为真`u' + i`。这是`O(n)`初始化；只需遍历 的每个元素`X`并设置 的两个对应元素`Z`。

    在构建这个数组时，我们可以将找到的任何重复项的索引保存到辅助列表中`Y`。完成后，`Z`我们只需检查`2 * x_i`每个`x_i`in 。`Y`如果有的话，我们就完成了；否则重复是无关紧要的，我们可以忘记`Y`. （唯一稍微复杂一点的情况是如果`0`重复；那么我们需要三个不同的副本来获得解决方案。）

    现在，您的问题的一个解决方案，即`x_i + x_j = x_k`，将出现在`Z`三个均匀分布的解决方案中，因为一些简单的代数运算给了我们`2*x_j - x_k = x_k - 2*x_i`。请注意，末尾的元素是我们特殊的双重条目（from `2X`），中间的元素是常规条目（from `X`）。

3.  考虑`Z`作为多项式的表示`p`，其中度项的系数`i`是`Z[i]`。如果`X`是`[1, 2, 3, 5]`，那么`Z`是`1111110001`（因为我们有 1、2、3、4、5、6 和 10）；`p`然后是*1 + x + x ² + x ³ + x ⁴ + x ⁵ + x ⁹*。

    现在，从高中代数中记住，*x ^c*在两个多项式的乘积中的系数是所有*a, b*与*a + b = c*的第一个多项式的系数*x ^a*乘以第二个多项式的系数*x ^b*的总和。因此，如果我们考虑*q = p ²* *，则x ^(2j)*的系数（对于带有 的j *）*`Z[j] = 1`将是所有*i*的总和`Z[i] * Z[2*j - i]`。但由于`Z`是二元的，这正是三元组*i,j,k*的数量，它们是`Z`. 注意*(j, j, j)*总是这样的三元组，所以我们只关心值 > 1 的。

    然后我们可以使用[快速傅里叶变换](http://en.wikipedia.org/wiki/Fast_Fourier_transform)及时找到*p ²*，`O(|Z| log |Z|)`其中`|Z|`是`v' - u' + 1`。我们得到另一个系数数组；叫它`W`。

4.  循环遍历`x_k`. `X`（回想一下，我们想要的等间距的都以 的元素为中心`X`，而不是`2*X`。）如果`W`这个元素的两倍，即`W[2*(x_k - u')]`，对应的是 1，我们知道它不是任何非平凡级数的中心，我们可以跳过它。（如前所述，它应该只是一个正整数。）

    否则，它可能是我们想要的进展的中心（所以我们需要找到`i`和`j`）。但是，不幸的是，它也可能是没有我们想要的形式的进展的中心。所以我们需要检查。循环 , 的其他元素`x_i`，并检查是否有`X`一个带有`2*x_i`,`x_k`的三元组（通过检查）。如果是这样，我们有一个答案；如果我们顺利通过所有这些，那么 FFT 只会找到虚假的答案，我们必须检查.`2*x_j``j``Z[2*(x_k - x_j) - u']``X``W`

    因此，最后一步是 O(n * 1 + (x_k 与 W[2*(x_k - u')] > 1 实际上不是解决方案的数量))，这可能是`O(n^2)`，这显然是不行的。应该有一种方法可以避免在输出中生成这些虚假答案`W`；如果我们知道任何适当`W`的系数肯定有答案，那么最后一步就可以`O(n)`了，一切都会好起来的。

    我认为可以使用稍微不同的多项式来做到这一点，但我还没有让它真正起作用。我再考虑考虑一下......

*部分基于[这个答案](https://stackoverflow.com/a/1585303/344821)。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:49:40.293

它必须至少为 O(n^2)，因为有 n(n-1)/2 个不同的总和可以检查其他成员。您必须计算所有这些，因为任何求和的对都可能是任何其他成员（从一个示例开始并排列所有元素以说服自己必须检查所有元素）。或者看看斐波那契的具体内容。

因此，计算它并在哈希表中查找成员给出了摊销 O(n^2)。如果您需要最好的最坏情况，或者使用有序树。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T18:54:32.863

您基本上需要找到所有不同的值对总和，所以我认为您不会比 O(n ² ) 做得更好。但是您可以通过对列表进行排序并减少重复值来优化，然后只将一个值与任何等于或更大的值配对，并在总和超过列表中的最大值时停止。

# mshtml - 如何使用 MSHTML getAttribute 方法获取表单操作 attr 中的绝对 URL？

> ID：10304017
> 
> 赞同：1
> 
> 时间：2012-04-24T18:38:43.137
> 
> 标签：mshtml

这是我有这样的 HTML 代码的交易

```
<form action="/test.php">
First name: <input type="text" name="firstname" /><br />
Last name: <input type="text" name="lastname" />
</form> 
```

我想获得完整的网址，如[http://localhost/test.php](http://localhost/test.php)调用 getAttribute （[http://msdn.microsoft.com/en-us/library/aa752280(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa752280(v=vs.85).aspx)）

我正在尝试使用以下代码（Delphi）

```
formAction := form.getAttribute('action', 4); 
```

但它只显示'/test.php'。如何让它发挥作用？

// 对不起，我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:53:29.490

1.  您从 iwebbrowser2 获取当前 URL
2.  执行字符串操作并获取完整的 URL。

希望能帮助到你。

# jquery - 如何使用 next() 在 jquery 中找到最近的 ul？

> ID：10304019
> 
> 赞同：8
> 
> 时间：2012-04-24T18:38:58.823
> 
> 标签：jquery, menu, slidetoggle, next

我有一个简单的菜单，如下所示：

```
<ul id="navigation">
    <li id="m_li">
         <div><span>+</span><a href="#" >myself</a></div>
        <ul class="test" id="x_ul">
            <li id="li">
                <a href="#" >Pictures</a>
            </li>
            <li id="li">
                <a href="#" >Audio</a>
            </li>
        </ul>
    </li>
    <li id="profile_modeling_li">
        <div><span>+</span><a href="#" >friend</a></div>
        <ul class="test" id="y_ul">
            <li id="li">
                <a href="#" >Pictures</a>
            </li>
            <li id="li">
                <a href="#" >Video</a>
            </li>
        </ul>
    </li>
</ul> 
```

然后我使用 jquery，所以当我点击`+`符号时，ul 会向下滑动：

```
$("#navigation > li > div > span").click(function(){

    if(false == $(this).next('ul').is(':visible')) {
        $('#accordion ul').slideUp(300);
    }
    $(this).next('ul').slideToggle(300);
}); 
```

问题是`$(this).next('ul')`似乎不喜欢下一个 ul

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T18:41:44.073

采用

```
$(this).parent().next() 
```

代替

```
$(this).next(); 
```

当然，您可以传递一个选择器（更简单或更复杂），将所需元素标识为参数：

```
$(this).parent().next('ul.test[id$="_ul]"'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T18:42:26.537

`.next / .prev`遍历兄弟姐妹，并且 ul 不是跨度的孩子。您可能应该找到最接近的`li`并找到`.test`.

```
 $(this).closest('li').find('ul.test') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T18:46:42.050

转变

```
$(this).next('ul') 
```

到

```
$(this).parent().next('ul') 
```

你可以在这里看到[http://jsfiddle.net/PYqS2/](http://jsfiddle.net/PYqS2/)

# c# - 如何从 C# 将 [switch] 参数传递给 PowerShell 脚本？

> ID：10304020
> 
> 赞同：6
> 
> 时间：2012-04-24T18:39:02.333
> 
> 标签：c#, powershell

我有这个名为 testSwitch.ps1 的 powershell 脚本：

```
param(
    [switch] $s
)

Return 's= ' + $s 
```

当我像这样在 PowerShell 中直接调用此脚本时：

```
.\testSwitch.ps1 -s 
```

输出是

```
s= True 
```

当开关丢失时，它会输出 False。但是当我尝试使用此 C# 代码调用相同的脚本时：

```
Command command = new Command(@"testSwitch.ps1");

command.Parameters.Add(new CommandParameter("s"));

RunspaceConfiguration runspaceConfiguration = RunspaceConfiguration.Create();
using (Runspace runspace = RunspaceFactory.CreateRunspace(runspaceConfiguration))
{
    runspace.Open();
    Pipeline pipeline = runspace.CreatePipeline();
    pipeline.Commands.Add(command);

    IEnumerable<PSObject> psresults = new List<PSObject>();
    psresults = pipeline.Invoke();
    Console.WriteLine(psresults.ToArray()[0].ToString());
} 
```

输出是：

```
s= False 
```

与 PowerShell 命令行解释器不同，CommandParameter 似乎总是将开关参数解释为 false。令人沮丧的是，这会导致脚本看到参数的值为 false ，`[switch]`而不会引发任何关于未指定值的异常。与参数相反，如果您未在构造函数`[bool]`中提供值，它将引发异常。`CommandParameter`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T18:43:11.690

奇怪的是，您必须指定 true 作为参数值，如下所示：

```
command.Parameters.Add(new CommandParameter("s", true)); 
```

此外，指定 false 也可以按预期工作：

```
command.Parameters.Add(new CommandParameter("s", false)); 
```

退货

```
s= False 
```

所以，我猜 [switch] 参数在从 C# 调用时应该像 [bool] 参数一样对待！

# php - iPad会话错误？

> ID：10304022
> 
> 赞同：1
> 
> 时间：2012-04-24T18:39:30.473
> 
> 标签：php, facebook, session

我有以下代码可以在浏览器上完美运行，但在[iPad](http://en.wikipedia.org/wiki/IPad)上却不行，我也怀疑[iPhone](http://en.wikipedia.org/wiki/IPhone)虽然还没有测试过：

```
require '/home/****/php_/lib/fb_libs/facebook.php';
require '/home/****/php_/lib/fb_libs/fbconfig.php';

session_start();

$facebook = $_SESSION['facebook'];
$userdata = $_SESSION['userdata'];

echo "Your email address is ".$userdata['email']."<br /><br />";

echo "Your name is ".$userdata['name']."<br /><br />";

echo "Your Facebook ID is ".$userdata['id']."<br /><br />"; die; 
```

iPad 根本不返回变量`$userdata[*]`。

关于 RE iPad，我应该知道什么不同的东西吗？我正用这个把头发扯下来。

这是浏览器上的结果：

```
Your email address is darren@email.com

Your name is Darren Sweeney

Your Facebook ID is 123456789 
```

在 iPad 上

```
Your email address is

Your name is

Your Facebook ID is 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T04:02:12.817

确保您的 iPad 的 Safari 配置为接受所有 cookie。

您的应用程序位于 Facebook 的 iFrame 中，这反过来又使您的应用程序托管成为第 3 方页面。因此，您必须在浏览器上启用 3rd-party cookie。
我在创建 Facebook 应用程序时也遇到了这个问题。
希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:42:19.403

`session_start()`应该在使用任何会话变量之前定义。因此将其放在顶部：

```
session_start();
$facebook = $_SESSION['facebook'];
$userdata = $_SESSION['userdata']; 
```

这给你带来了问题。

# multithreading - Simpleinjector：当我有 2 个实现并想选择一个时，这是 RegisterManyForOpenGeneric 的正确方法吗？

> ID：10304023
> 
> 赞同：5
> 
> 时间：2012-04-24T18:39:33.197
> 
> 标签：multithreading, asynchronous, dependency-injection, entity-framework-4.1, simple-injector

[使用带有此处描述的命令模式](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)和此处描述[的查询模式](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)的简单注入器。对于其中一个命令，我有 2 个处理程序实现。第一个是同步执行的“正常”实现：

```
public class SendEmailMessageHandler
    : IHandleCommands<SendEmailMessageCommand>
{
    public SendEmailMessageHandler(IProcessQueries queryProcessor
        , ISendMail mailSender
        , ICommandEntities entities
        , IUnitOfWork unitOfWork
        , ILogExceptions exceptionLogger)
    {
        // save constructor args to private readonly fields
    }

    public void Handle(SendEmailMessageCommand command)
    {
        var emailMessageEntity = GetThisFromQueryProcessor(command);
        var mailMessage = ConvertEntityToMailMessage(emailMessageEntity);
        _mailSender.Send(mailMessage);
        emailMessageEntity.SentOnUtc = DateTime.UtcNow;
        _entities.Update(emailMessageEntity);
        _unitOfWork.SaveChanges();
    }
} 
```

另一个类似于命令装饰器，但显式包装了前一个类以在单独的线程中执行命令：

```
public class SendAsyncEmailMessageHandler 
    : IHandleCommands<SendEmailMessageCommand>
{
    public SendAsyncEmailMessageHandler(ISendMail mailSender, 
        ILogExceptions exceptionLogger)
    {
        // save constructor args to private readonly fields
    }

    public void Handle(SendEmailMessageCommand command)
    {
        var program = new SendAsyncEmailMessageProgram
            (command, _mailSender, _exceptionLogger);
        var thread = new Thread(program.Launch);
        thread.Start();
    }

    private class SendAsyncEmailMessageProgram
    {
        internal SendAsyncEmailMessageProgram(
            SendEmailMessageCommand command
            , ISendMail mailSender
            , ILogExceptions exceptionLogger)
        {
            // save constructor args to private readonly fields
        }

        internal void Launch()
        {
            // get new instances of DbContext and query processor
            var uow = MyServiceLocator.Current.GetService<IUnitOfWork>();
            var qp = MyServiceLocator.Current.GetService<IProcessQueries>();
            var handler = new SendEmailMessageHandler(qp, _mailSender, 
                uow as ICommandEntities, uow, _exceptionLogger);
            handler.Handle(_command);
        }
    }
} 
```

有一段时间 simpleinjector 对我大喊大叫，告诉我它找到了`IHandleCommands<SendEmailMessageCommand>`. 我发现以下方法有效，但不确定它是否是最佳/最佳方式。我想显式注册这个接口以使用 Async 实现：

```
container.RegisterManyForOpenGeneric(typeof(IHandleCommands<>), 
    (type, implementations) =>
    {
        // register the async email handler
        if (type == typeof(IHandleCommands<SendEmailMessageCommand>))
            container.Register(type, implementations
                .Single(i => i == typeof(SendAsyncEmailMessageHandler)));

        else if (implementations.Length < 1)
            throw new InvalidOperationException(string.Format(
                "No implementations were found for type '{0}'.",
                    type.Name));
        else if (implementations.Length > 1)
            throw new InvalidOperationException(string.Format(
                "{1} implementations were found for type '{0}'.",
                    type.Name, implementations.Length));

        // register a single implementation (default behavior)
        else
            container.Register(type, implementations.Single());

    }, assemblies); 
```

**我的问题：这是正确的方法，还是有更好的方法？**例如，我想将 Simpleinjector 抛出的现有异常重用于所有其他实现，而不必在回调中显式抛出它们。

**更新对史蒂文的回答的回复**

我已经更新了我的问题，使其更加明确。我以这种方式实现它的原因是因为作为操作的一部分，该命令会在成功发送后更新在 db 实体上`System.Nullable<DateTime>`调用的属性。`SentOnUtc``MailMessage`

和都由实体框架类实现。根据 http 上下文注册，使用`ICommandEntities`此处[描述的方法](https://simpleinjector.codeplex.com/wikipage?title=PerWebRequestExtensionMethod)：`IUnitOfWork``DbContext``DbContext`

```
container.RegisterPerWebRequest<MyDbContext>();
container.Register<IUnitOfWork>(container.GetInstance<MyDbContext>);
container.Register<IQueryEntities>(container.GetInstance<MyDbContext>);
container.Register<ICommandEntities>(container.GetInstance<MyDbContext>); 
```

`RegisterPerWebRequest`simpleinjector wiki 中扩展方法的默认行为是在`HttpContext`为 null 时注册一个临时实例（它将在新启动的线程中）。

```
var context = HttpContext.Current;
if (context == null)
{
    // No HttpContext: Let's create a transient object.
    return _instanceCreator();
... 
```

这就是为什么 Launch 方法使用服务定位器模式来获取 的单个实例`DbContext`，然后将其直接传递给同步命令处理程序构造函数。为了使`_entities.Update(emailMessageEntity)`和`_unitOfWork.SaveChanges()`行工作，两者必须使用相同的 DbContext 实例。

**注意：理想情况下，发送电子邮件应由单独的投票工作人员处理。**这个命令基本上是一个队列清算所。数据库中的 EmailMessage 实体已经拥有发送电子邮件所需的所有信息。这个命令只是从数据库中抓取一个未发送的，发送它，然后记录动作的日期时间。这样的命令可以通过从不同的进程/应用程序轮询来执行，但我不会接受这个问题的这样的答案。现在，当某种 http 请求事件触发它时，我们需要启动这个命令。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T20:08:18.377

确实有更简单的方法可以做到这一点。例如`BatchRegistrationCallback`，您可以使用该`OpenGenericBatchRegistrationExtensions.GetTypesToRegister`方法，而不是像在上一个代码片段中那样注册 a 。此方法由`RegisterManyForOpenGeneric`方法内部使用，并允许您在将返回的类型发送到`RegisterManyForOpenGeneric`重载之前过滤它们：

```
var types = OpenGenericBatchRegistrationExtensions
    .GetTypesToRegister(typeof(IHandleCommands<>), assemblies)
    .Where(t => !t.Name.StartsWith("SendAsync"));

container.RegisterManyForOpenGeneric(
    typeof(IHandleCommands<>), 
    types); 
```

但我认为对您的设计进行一些更改会更好。当您将异步命令处理程序更改为通用装饰器时，您完全消除了问题。这样的通用装饰器可能如下所示：

```
public class SendAsyncCommandHandlerDecorator<TCommand>
    : IHandleCommands<TCommand>
{
    private IHandleCommands<TCommand> decorated;

    public SendAsyncCommandHandlerDecorator(
         IHandleCommands<TCommand> decorated)
    {
        this.decorated = decorated;
    }

    public void Handle(TCommand command)
    {
        // WARNING: THIS CODE IS FLAWED!!
        Task.Factory.StartNew(
            () => this.decorated.Handle(command));
    }
} 
```

请注意，这个装饰器是有缺陷的，原因我稍后会解释，但为了教育起见，让我们一起去吧。

使此类型通用，允许您将此类型重用于多个命令。因为这个类型是泛型的，所以`RegisterManyForOpenGeneric`会跳过这个（因为它无法猜测泛型类型）。这允许您按如下方式注册装饰器：

```
container.RegisterDecorator(
    typeof(IHandleCommands<>), 
    typeof(SendAsyncCommandHandler<>)); 
```

但是，在您的情况下，您不希望这个装饰器被包裹在所有处理程序中（就像之前的注册那样）。有一个`RegisterDecorator`带有谓词的重载，允许您指定何时应用此装饰器：

```
container.RegisterDecorator(
    typeof(IHandleCommands<>), 
    typeof(SendAsyncCommandHandlerDecorator<>),
    c => c.ServiceType == typeof(IHandleCommands<SendEmailMessageCommand>)); 
```

应用此谓词后，`SendAsyncCommandHandlerDecorator<T>`将仅应用于`IHandleCommands<SendEmailMessageCommand>`处理程序。

另一种选择（我更喜欢）是注册该版本的封闭通用`SendAsyncCommandHandlerDecorator<T>`版本。这使您不必指定谓词：

```
container.RegisterDecorator(
    typeof(IHandleCommands<>), 
    typeof(SendAsyncCommandHandler<SendEmailMessageCommand>)); 
```

**然而，正如我所指出的，给定装饰器的代码是有缺陷的**，因为您应该始终在新线程上构建新的依赖关系图，并且永远不要在线程之间传递依赖关系（原始装饰器会这样做）。本文中有关此的更多信息：[如何在多线程应用程序中使用依赖注入](http://simpleinjector.codeplex.com/wikipage?title=How-to#Multi_Threaded_Applications "简单注入器 - 文档 - 如何在多线程应用程序中使用依赖注入")。

所以答案实际上更复杂，因为这个通用装饰器实际上应该是替代原始命令处理程序（或者甚至可能是包装处理程序的装饰器链）的代理。该代理必须能够在新线程中建立新的对象图。这个代理看起来像这样：

```
public class SendAsyncCommandHandlerProxy<TCommand>
    : IHandleCommands<TCommand>
{
    Func<IHandleCommands<TCommand>> factory;

    public SendAsyncCommandHandlerProxy(
         Func<IHandleCommands<TCommand>> factory)
    {
        this.factory = factory;
    }

    public void Handle(TCommand command)
    {
        Task.Factory.StartNew(() =>
        {
            var handler = this.factory();
            handler.Handle(command);
        });
    }
} 
```

`Func<T>`尽管 Simple Injector 没有对解析工厂的内置支持，但`RegisterDecorator`方法是例外。这样做的原因是，在没有框架支持的情况下注册具有 Func 依赖项的装饰器会非常繁琐。换句话说，当`SendAsyncCommandHandlerProxy`使用`RegisterDecorator`方法注册时，Simple Injector 将自动注入一个`Func<T>`可以创建装饰类型的新实例的委托。由于代理只引用一个（单例）工厂（并且是无状态的），我们甚至可以将其注册为单例：

```
container.RegisterSingleDecorator(
    typeof(IHandleCommands<>), 
    typeof(SendAsyncCommandHandlerProxy<SendEmailMessageCommand>)); 
```

显然，您可以将此注册与其他`RegisterDecorator`注册混合使用。例子：

```
container.RegisterManyForOpenGeneric(
    typeof(IHandleCommands<>),
    typeof(IHandleCommands<>).Assembly);

container.RegisterDecorator(
    typeof(IHandleCommands<>),
    typeof(TransactionalCommandHandlerDecorator<>));

container.RegisterSingleDecorator(
    typeof(IHandleCommands<>), 
    typeof(SendAsyncCommandHandlerProxy<SendEmailMessageCommand>));

container.RegisterDecorator(
    typeof(IHandleCommands<>),
    typeof(ValidatableCommandHandlerDecorator<>)); 
```

此注册使用 a 包装任何命令处理程序`TransactionalCommandHandlerDecorator<T>`，可选地使用异步代理对其进行装饰，并始终使用 a 包装它`ValidatableCommandHandlerDecorator<T>`。这允许您同步进行验证（在同一个线程上），当验证成功时，在新线程上处理命令，在该线程上的事务中运行。

由于您的某些依赖项是按 Web 请求注册的，这意味着~~它们将获得一个新的（瞬态）实例~~，当没有 Web 请求时会引发异常，这是在 Simple Injector 中实现的方式（就像这种情况一样当您启动一个新线程来运行代码时）。当您使用 EF 实现多个接口时`DbContext`，这意味着 Simple Injector 将为每个构造函数注入的接口创建一个新实例，正如您所说，这将是一个问题。

您需要重新配置`DbContext`，因为纯粹的 Per Web Request 是不行的。有几种解决方案，但我认为最好的方法是制作一个混合 PerWebRequest/PerLifetimeScope 实例。为此，您需要[Per Lifetime Scope](http://simpleinjector.codeplex.com/wikipage?title=ObjectLifestyleManagement#PerLifetimeScope "简单注入器 - 文档 - 对象生活方式管理 - 每个生命周期范围")扩展包。另请注意，这也是[Per Web Request](http://simpleinjector.codeplex.com/wikipage?title=ObjectLifestyleManagement#PerWebRequest "简单注入器 - 文档 - 对象生活方式管理 - 每个 Web 请求")的扩展包，因此您不必使用任何自定义代码。完成此操作后，您可以定义以下注册：

```
container.RegisterPerWebRequest<DbContext, MyDbContext>();
container.RegisterPerLifetimeScope<IObjectContextAdapter,
    MyDbContext>();

// Register as hybrid PerWebRequest / PerLifetimeScope.
container.Register<MyDbContext>(() =>
{
    if (HttpContext.Current != null)
        return (MyDbContext)container.GetInstance<DbContext>();
    else
        return (MyDbContext)container
            .GetInstance<IObjectContextAdapter>();
}); 
```

**更新** Simple Injector 2 现在有了明确的生活方式概念，这使得之前的注册变得更加容易。因此建议进行以下注册：

```
var hybrid = Lifestyle.CreateHybrid(
    lifestyleSelector: () => HttpContext.Current != null,
    trueLifestyle: new WebRequestLifestyle(),
    falseLifestyle: new LifetimeScopeLifestyle());

// Register as hybrid PerWebRequest / PerLifetimeScope.
container.Register<MyDbContext, MyDbContext>(hybrid); 
```

~~由于 Simple Injector 只允许注册一次类型（它不支持键控注册），因此不可能同时使用 PerWebRequest 生活方式和 PerLifetimeScope 生活方式注册 MyDbContext。所以我们不得不作弊，所以我们进行了两次注册（每种生活方式一个）并选择不同的服务类型（DbContext 和 IObjectContextAdapter）。`MyDbContext`服务类型并不是很重要，除了 MyDbContext 必须实现/继承该服务类型（如果方便，请随意实现虚拟接口）。~~

~~除了这两个注册，我们还需要第三个注册，一个映射，它可以让我们恢复正确的生活方式。这是`Register<MyDbContext>`根据操作是否在 HTTP 请求中执行来获取正确实例的方法。~~

您`AsyncCommandHandlerProxy`将不得不开始一个新的生命周期范围，其完成如下：

```
public class AsyncCommandHandlerProxy<T>
    : IHandleCommands<T>
{
    private readonly Func<IHandleCommands<T>> factory;
    private readonly Container container;

    public AsyncCommandHandlerProxy(
        Func<IHandleCommands<T>> factory,
        Container container)
    {
        this.factory = factory;
        this.container = container;
    }

    public void Handle(T command)
    {
        Task.Factory.StartNew(() =>
        {
            using (this.container.BeginLifetimeScope())
            {
                var handler = this.factory();
                handler.Handle(command);
            }            
        });    
    }    
} 
```

请注意，容器是作为`AsyncCommandHandlerProxy`.

现在，任何在为 null`MyDbContext`时解析的实例都`HttpContext.Current`将获得一个 Per Lifetime Scope 实例，而不是一个新的瞬态实例。

# php - 将 wamp 服务器添加到 aptana

> ID：10304025
> 
> 赞同：3
> 
> 时间：2012-04-24T18:39:51.300
> 
> 标签：php, aptana, wamp, wampserver, aptana3

我正在尝试在 aptana 3 中设置 wamp 服务器。因此，在编辑外部 Web 服务器配置时，还有 2 个选项，即 wamp 服务器的启动命令和停止命令。谁能告诉我我需要在那里指定什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T14:14:14.083

试试这个启动命令：

```
NET START wampapache 
```

这对于停止命令：

```
NET STOP wampapache 
```

# c# - 如何在不使用位运算符的情况下避免短路操作

> ID：10304030
> 
> 赞同：1
> 
> 时间：2012-04-24T18:40:14.140
> 
> 标签：c#, operators

我正在尝试查看是否有更好的方法来编写以下内容：

```
if ((DirectoryDetailsPath == null) & (FileDetailsPath == null))
{
  Console.WriteLine("Error: Path for 'Directory' or 'File' has to be specified.");

} 
```

不使用按位“&”运算符。我更喜欢使用逻辑运算符，但由于短路，我无法评估这两个字段。

如果两个字段都是“null”，我只想看到一个错误。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:47:43.077

如果您确实必须评估这两个条件并且不想使用按位运算符，请在`if`语句之外执行。

```
bool isDirectoryDetailsPathNull = DirectoryDetailsPath == null;
bool isFileDetailsPathNull = FileDetailsPath == null;

if (isDirectoryDetailsPathNull && isFileDetailsPathNull)
{
    Console.WriteLine("Error: Path for 'Directory' or 'File' has to be specified.");
} 
```

但是，这真的没有任何意义。编译器可能会决定内联变量，有效地给你这个，这是你说你不想要的。

```
if ((DirectoryDetailsPath == null) && (FileDetailsPath == null))
{
    Console.WriteLine("Error: Path for 'Directory' or 'File' has to be specified.");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:42:02.377

*如果两个字段都是“null”，我只想看到一个错误。*

然后尝试使用`&&`：

```
if ((DirectoryDetailsPath == null) && (FileDetailsPath == null))
{
  Console.WriteLine("Error: Path for 'Directory' or 'File' has to be specified.");

} 
```

* * *

更多信息：

如果第一个条件为假，上述解决方案将短路。这仍然满足仅在两个值都为空时才写入输出的要求。

# php - 在 Magento 中为收集请求添加属性

> ID：10304031
> 
> 赞同：4
> 
> 时间：2012-04-24T18:40:19.630
> 
> 标签：php, magento

我希望有人能帮我解决这个问题。我正在尝试使用集合从 Magento 目录模型中加载一些数据。代码如下所示：

```
$model = Mage::getModel('catalog/product');
$collection = $model->getCollection();
$collection->addAttributeToSelect('short_description');
$collection->addFieldToFilter('SKU',array('like' => array('%EBOOK%')));
$collection->load();
var_dump($collection->getData()); 
```

这会生成包含平面目录产品表中所有字段的对象转储，但不会生成我使用该`$collection->addAttributeToSelect()`方法请求的字段。无论我使用此方法指定什么字段（甚至是“*”），我都无法让集合返回其标准字段集以外的任何内容。我也无法取消设置任何`$collection->removeFieldFromSelect(NULL)`应该使用的字段。

我在做一些愚蠢/错误/两者兼而有之的事情吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T09:09:45.497

这是因为您调用`getData()`的是集合，而不是该集合的产品。

我从来没有真正分析过为什么会发生这种情况，但如果你使用

```
foreach ($collection as $product) {
    var_dump($product->getData());
} 
```

代替

```
$collection->load();
var_dump($collection->getData()); 
```

你会得到你期望的数据。

# c# - 将 xml 反序列化为类，list<> 出现问题

> ID：10304035
> 
> 赞同：5
> 
> 时间：2012-04-24T18:40:29.707
> 
> 标签：c#, .net, xml, deserialization, xmlserializer

我有以下 XML

```
<map version="1.0">
    <properties>
        <property name="color" value="blue" />
        <property name="size" value="huge" />
        <property name="texture" value="rugged" />
    </properties>
</map> 
```

我正在尝试编写可以将其反序列化为的类，这就是我所拥有的：

```
[XmlRoot("map")]
public class MyMap
{
    [XmlAttribute("version")]
    public decimal Version { get; set; }
    [XmlElement("properties")]
    public List<MyProperty> Properties { get; set; }
}

public class MyProperty
{
    [XmlAttribute("name")]
    public string Name { get; set; }
    [XmlAttribute("value")]
    public string Value { get; set; }
} 
```

问题是我似乎无法阅读属性列表，我只得到一个条目，它的名称和值都为空。

我需要设置一些魔法属性才能让它工作吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T18:48:06.617

您应该如下更改 MyMap。`XmlArray`并且`XmlArrayItem`是魔法属性

```
[XmlRoot("map")]
public class MyMap
{
    [XmlAttribute("version")]
    public decimal Version { get; set; }
    [XmlArray("properties")]
    [XmlArrayItem("property")]
    public List<MyProperty> Properties { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:47:38.577

而不是 XmlElement，请尝试：

```
[XmlArray("Properties")] 
```

...在 List<> 属性上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T18:47:29.553

找到解决方案的一种方法是在代码中填充对象，然后将其序列化为 xml，然后查看模式的外观。你也可以使用 xsd.exe 来自动生成你的类。

# freemarker - Freemarker #list 的 Jive 插件实现

> ID：10304037
> 
> 赞同：1
> 
> 时间：2012-04-24T18:40:42.013
> 
> 标签：freemarker

关于 FreeMarker 模板和 Jive 插件（用 Java 编写）之间的连接的新手问题。

我继承了一个现有的工作项目，其中包含一些 FTL，如下所示：

```
<#list employeeInstances! as instance>
  <tr>
  ...
  </tr>
</#list> 
```

我试图了解*employeeInstances*是如何在Java 插件中实际实现的。在项目的其他任何地方都没有提到“employeeInstances”。最接近的是这样的：

```
public ArrayList<EmployeeInstance> getEmployeeInstances()
{
  ...
} 
```

我猜这就是 Jive 看到#list employeeInstances 时所调用的。那正确吗？它基本上是把序列名称“employeeInstances”的第一个字母大写，然后在它前面加上“get”这个词吗？我在讨论此问题的 FreeMarker 或 Jive 文档中找不到任何内容。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:15:02.730

检查传递给`Template.process`or的数据模型`Environment.process`。如果它是具有该`getEmployeeInstances`方法的类的实例，那么您的猜测是正确的。FreeMarker 将 JavaBean 属性公开为变量，因此`getFoo()`变成`foo`.

# google-sheets - 如何从单个日期/时间日志转到“时间线”图？

> ID：10304038
> 
> 赞同：2
> 
> 时间：2012-04-24T18:40:45.987
> 
> 标签：google-sheets, google-sheets-formula

我基本上在 Google 表格中有一个日志文件。列是“日期/时间”、“用户”、“访问资产”，同一日期会有多个条目，但通常不是时间。

我想使用时间线图来显示用户活动，但该图需要一个聚合视图，每行有一个日期（无时间），数字计数以秒为单位。有没有办法使用 Google 表格中的函数来生成这些数据的聚合“视图”并将其传递给时间线图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T03:32:12.040

好吧，我想你必须创建一个辅助表，或者只是为你的图表创建一些带有汇总值的列。

根据您的描述，我假设您使用的是 3 列（ABC）。让我们使用具有以下公式的 D、E 和 F 列：

```
=ArrayFormula(Trunc(A:A))
=Unique(D:D)
=ArrayFormula(CountIf(D:D;E:E)) 
```

由于日期值实际上是一个数字（自纪元以来的天数 qtt），而小时数是小数，所以`Trunc`公式去掉了“时间”部分，只留下日期。只需将单元格（显然是数字）格式化为日期，您就会看到。然后 Unique 和 CountIf 进行汇总。

在一个公式中肯定有不同的方法可以做到这一点，也许更“优雅”。但我认为这样更容易理解和学习。此外，您可能需要调整范围以适应您的实际列位置（我希望这不是问题）。

# sed - 在 Windows 中使用 sed 和 wget 编写脚本

> ID：10304045
> 
> 赞同：1
> 
> 时间：2012-04-24T18:41:14.593
> 
> 标签：sed, wget

我在 LAN 中的 Internet 连接存在一些问题。有些用户很高兴，有些用户抱怨互联网速度。所以我想到了在三台不同的 PC 上安装软件并尝试同时下载/上传文件并记录速度的想法。然后我将能够使用我获得的数据创建一个图表。

我正在寻找一种下载多个文件并检查速度的方法。我发现[How to grep download speed from wget output?](https://stackoverflow.com/questions/3909128/how-to-grep-download-speed-from-wget-output) 对于 wget 和 sed。我如何`wget -O /dev/null http://example.com/index.html 2>&1 | sed -e 's|^.*(\([0-9.]\+ [KM]B/s\)).*$|\1|'`用于 Windows？我已经安装`wget`并`sed`在 Windows 上。

所有运行 Windows XP 或 7 的 PC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T19:40:30.233

Sed 在 Windows 上没有什么不同。唯一的区别是，/dev/null 在 Windows 上不存在，而是 NUL。

所以：

```
wget -O NUL http://example.com/index.html 2>&1 | sed -e 's|^.*(\([0-9.]\+ [KM]B/s\)).*$|\1|' 
```

应该在 Windows 上工作。我不是 100% 确定 2>&1 - 也许还有其他语法可以使用。

# monodevelop - 使用 mono/xps 在 Ubuntu 上运行 Webservice

> ID：10304050
> 
> 赞同：0
> 
> 时间：2012-04-24T18:41:41.923
> 
> 标签：monodevelop, ubuntu-11.10

我在 aws.amazon.com 上安装了一个 Ubuntu 11.10，以便在其上运行 Web 服务。我已经在我的 Windows 7 机器上使用 XPS 测试了 web 服务，现在我想将它部署在 Ubuntu 机器上。我想我已经设置了 xsp4。我去了 asp.net-demos 文件夹并运行命令“xsp4”，它启动了 xspL：

监听地址：0.0.0.0 根目录：/usr/share/asp.net-demos 监听端口：8080（非安全） 按回车停止服务器。

我现在如何通过互联网连接到它？我必须设置要暴露的端口吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:41:48.623

我意识到问题出在 aws.amzon.com 我必须配置允许的 IP 地址。

# java - 这个例子是什么样的Java设计模型？

> ID：10304058
> 
> 赞同：0
> 
> 时间：2012-04-24T18:41:54.447
> 
> 标签：java, jsp, model

我正在 Eclipse 中开发一个 JSP 项目，并选择了 File -> New -> Other -> Web -> Dynamic Web Project。

在我的项目中，我有以下文件：

1.  NewFile.jsp（这是我的演示逻辑所在的位置）
2.  新文件.css
3.  JavaBean.java（我的 java 类）（这是我的业务逻辑所在的位置）

在我的 java 类中，有一个方法可以从 MySQL 数据库和一些属性中提取数据，以便在 .jsp 文件和 java 类本身之间进行通信。

我的 JSP 文件如下所示：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1" import="controllerbean.JavaBean"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>

<%
JavaBean.MyMethod();
if (JavaBean.sqlresult != null)
{
    out.println(JavaBean.sqlresult);
}
%>

</body>
</html> 
```

这个例子是什么样的Java设计模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:46:00.320

模型 1（顺便说一句，这是作业吗？） [http://en.wikipedia.org/wiki/Model_1](http://en.wikipedia.org/wiki/Model_1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:46:07.953

你有模型，视图模式。

推理：

您的 Java 代码完成了模型和控制器的工作

为什么是模型？因为它进行数据库交互，所以保留数据

为什么是控制器？因为它直接和jsp对话

您的 jsp 和 css 结合了您的表示逻辑。

尽管您应该尝试迁移到 MVC 2 架构，例如 JSF、Struts 等

编辑：

一些阅读

[解释](http://java.sun.com/blueprints/patterns/MVC-detailed.html)

[MVC2](http://www.javaworld.com/javaworld/jw-12-1999/jw-12-ssj-jspmvc.html)

[很好的答案](https://stackoverflow.com/questions/970504/examples-of-java-mvc-model-2-architecture)

# ios - 按键排序基于 NSDictionary 的 UITableView

> ID：10304062
> 
> 赞同：1
> 
> 时间：2012-04-24T18:42:07.437
> 
> 标签：ios, xcode, uitableview, sorting, nsdictionary

我有一个自定义 UITableView，由带入 NSMutableDictionary 的 JSON 数据填充。然后我创建一个 mutablecopy，以便我可以将 distanceFromLocation 方法的值添加到字典中。我要做的是然后使用该新对象按最近距离对单元格进行排序。我看过其他使用 NSSortDescriptor 的例子，但那是在谈论排序数组。如何对字典中的单元格进行排序或从字典中创建一个数组以使用 NSSortDescriptor？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

static NSString *CellIdentifier = @"dealerlistcell";

DealerListCell *cell = (DealerListCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) 
{
    cell = [[DealerListCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

//gets JSON data and loads into Dictionary
NSMutableDictionary *info = [json objectAtIndex:indexPath.row];
NSMutableDictionary *infocopy = [info mutableCopy];

//pulls the current user location
CLLocation *currentlocation2 = [[CLLocation alloc] initWithLatitude:locationManager.location.coordinate.latitude longitude:locationManager.location.coordinate.longitude];

//gets the latitude and longitude from info dictionary to calculate distancefromlocation for each cell
CLLocation *locationforindex = [[CLLocation alloc] initWithLatitude:[[info objectForKey:@"dlrlat"]doubleValue] longitude:[[info objectForKey:@"dlrlong"]doubleValue]];

//calculates the distance
CLLocationDistance dist = ([locationforindex distanceFromLocation:currentlocation2]*0.0006213711922);

//format the distance to a string for the label
NSString *distancestring = [NSString stringWithFormat:@"%.1f miles",dist];

//create object with distance to add to dictionary
NSNumber *distance = [NSNumber numberWithDouble:dist]; 
```

**编辑：**分配到对象的距离，以便稍后在 NSSortDescriptor 中调用

```
//add to dictionary 
[infocopy setObject:distance forKey:@"distance"];

//create array from dictionary
NSDictionary *aDict = [NSDictionary dictionaryWithDictionary:infocopy];
NSArray *anArray = [aDict allValues];

//implemented NSSortDescriptor
NSSortDescriptor *sorter [[NSSortDescriptor alloc] initWithKey:@"distance" ascending: YES];
NSArray *sortdescriptors = [NSArray arrayWithObject:sorter];
[anArray sortedArrayUsingDescriptors:sortdescriptors]; 
```

但是，它会为键距离抛出 valueForUndefinedKey。如何在“initWithKey”中定义距离键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:19:35.943

通过这个论坛和我朋友的一些帮助，我能够拼凑出这个解决方案。

答案是在加载表格视图之前使用 for 循环并为方法中的每个位置创建字典。然后我使用 NSSortDescriptor 进行排序，它工作得很好。

有关最终解决方案，请参见下面的代码。

```
-(void)getData:(NSData *) data 
{

NSError *error;

// load the jsonArray with the JSON Data
jsonArray = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

//define the unsorted dealers array
unsortedDealers = [[NSMutableArray alloc] initWithCapacity:1000];

// start at row 0
int index = 0;

// loop through each dealer and calculate distance from current location
for (NSDictionary *dealer in jsonArray) 
{
    //create dictionary from JSON Array
    infoDict = [jsonArray objectAtIndex:index];

    //get the coordidates from current location
    CLLocation *currentlocation = [[CLLocation alloc] initWithLatitude:locationManager.location.coordinate.latitude longitude:locationManager.location.coordinate.longitude];

    //get the coordinates for dealer at row
    // dlr lat and longs are switched in the database
    CLLocation *locationforindex = [[CLLocation alloc] initWithLatitude:[[infoDict objectForKey:@"dlrlong"]doubleValue] longitude:[[infoDict objectForKey:@"dlrlat"]doubleValue]];

    //calculate the distance from current location to dealer at row and format it in miles
    CLLocationDistance dist = ([locationforindex distanceFromLocation:currentlocation]*0.0006213711922);

    //define the distance for display
    NSNumber *distanceForDict = [NSNumber numberWithDouble:dist];

    //define the distance for sorting
    NSString *distanceForSort = [NSString stringWithFormat:@"%.1f",dist];

   //create a dictionary for each dealer and define the values for each key 
   NSMutableDictionary *dealerDict = [[NSMutableDictionary alloc] initWithObjectsAndKeys:[infoDict objectForKey:@"dlrname"] , @"dlrname", [infoDict objectForKey:@"dlrcity"], @"dlrcity", [infoDict objectForKey:@"dlrstate"] , @"dlrstate", [infoDict objectForKey:@"dlrzip"], @"dlrzip", [infoDict objectForKey:@"dlradd"] , @"dlradd", distanceForDict , @"dlrdistance" , distanceForSort , @"dlrsortdistance" , [infoDict objectForKey:@"dlremail"] , @"dlremail" , [infoDict objectForKey:@"dlrfax"] , @"dlrfax" , [infoDict objectForKey:@"dlrhours"] , @"dlrhours" , [infoDict objectForKey:@"dlrlat"], @"dlrlat",[infoDict objectForKey:@"dlrlong"] , @"dlrlong" , [infoDict objectForKey:@"dlrnum"], @"dlrnum",[infoDict objectForKey:@"dlrphone"] , @"dlrphone" , [infoDict objectForKey:@"dlrwebsite"], @"dlrwebsite", nil];

    //add dictionary to the unsorted array
    [unsortedDealers addObject:dealerDict];

    // iterate through the list of dealers
    ++index;

}

// creates the sorting element
NSSortDescriptor *sortDescriptor;

//define what you want to sort by
sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"dlrdistance" ascending:YES];

// build new array with thosed elements to be sorted
NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];

// create new array based on the sorted value
sortedDealers = [unsortedDealers sortedArrayUsingDescriptors:sortDescriptors];  

[self.tableView reloadData];

//error message if there is no data found. Usually this is an error with the connection, 
//it should never return empty
if (jsonArray ==  nil) 
{
    NSLog(@"No Data Loaded. Please check your internet connection");
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T22:09:11.283

如果你这样做：

```
NSDictionary *aDict = [NSDictionary dictionaryWithDictionary:info];
NSArray *anArray = [aDict allValues]; 
```

它将返回一个数组，然后您可以使用 NSSortDescriptor 对其进行排序。

# ruby - Ruby EventMachine & 函数

> ID：10304066
> 
> 赞同：1
> 
> 时间：2012-04-24T18:42:27.537
> 
> 标签：ruby, redis, eventmachine

我正在使用合适的 Redis EM gem（在我的例子中为“em-hiredis”）读取 EventMachine 反应器循环中的 Redis 集，并且必须检查某些 Redis 集是否包含级联中的成员。我的目标是获取不为空的集合名称：

```
require 'eventmachine'
require 'em-hiredis'

def fetch_queue
  @redis.scard('todo').callback do |scard_todo|
    if scard_todo.zero?
      @redis.scard('failed_1').callback do |scard_failed_1|
        if scard_failed_1.zero?
          @redis.scard('failed_2').callback do |scard_failed_2|
            if scard_failed_2.zero?
              @redis.scard('failed_3').callback do |scard_failed_3|
                if scard_failed_3.zero?
                  EM.stop
                else
                  queue = 'failed_3'
                end 
              end 
            else
              queue = 'failed_2'
            end 
          end 
        else
          queue = 'failed_1'
        end 
      end 
    else
      queue = 'todo'
    end 
  end 
end

EM.run do
  @redis = EM::Hiredis.connect "redis://#{HOST}:#{PORT}"

  # How to get the value of fetch_queue?
  foo = fetch_queue
  puts foo
end 
```

我的问题是：我如何告诉 EM 在 'fetch_queue' 中返回 'queue' 的值以在反应器循环中使用它？fetch_queue 中的简单“返回队列 = 'todo'”、“返回队列 = 'failed_1'”等会导致“意外返回 (LocalJumpError)”错误消息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T05:32:11.727

Please for the love of debugging use some more methods, you wouldn't factor other code like this, would you?

Anyway, this is essentially what you probably want to do, so you can both factor and test your code:

```
require 'eventmachine'
require 'em-hiredis'

# This is a simple class that represents an extremely simple, linear state
# machine. It just walks the "from" parameter one by one, until it finds a
# non-empty set by that name. When a non-empty set is found, the given callback
# is called with the name of the set.
class Finder

  def initialize(redis, from, &callback)
    @redis = redis
    @from = from.dup
    @callback = callback
  end

  def do_next
    # If the from list is empty, we terminate, as we have no more steps
    unless @current = @from.shift
      EM.stop # or callback.call :error, whatever
    end

    @redis.scard(@current).callback do |scard|
      if scard.zero?
        do_next
      else
        @callback.call @current
      end
    end
  end

  alias go do_next

end

EM.run do
  @redis = EM::Hiredis.connect "redis://#{HOST}:#{PORT}"

  finder = Finder.new(redis, %w[todo failed_1 failed_2 failed_3]) do |name|
    puts "Found non-empty set: #{name}"
  end

  finder.go
end 
```

# powershell - AD 组对象中缺少成员属性

> ID：10304067
> 
> 赞同：1
> 
> 时间：2012-04-24T18:42:29.157
> 
> 标签：powershell, active-directory

编写脚本来验证我的服务器是否属于一个组。从 PowerShell 代码开始...

```
$root = [ADSI]'GC://dc=xx,dc=yyy,dc=zzz'
$searcher = new-object System.DirectoryServices.DirectorySearcher($root)
$searcher.filter = "(&(objectClass=Group)(Name=$groupName))"
$groups = $searcher.findall()
$group = $groups[0] 
```

这将返回变量 $group 中的 Active Directory 组。一半的时间，这个变量有一个名为“成员”的属性，其中包含组中的所有服务器。另一半时间，该属性没有归还。由于用户、登录 ADS 服务器等原因，找不到任何模式。有人遇到过这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:53:46.053

您正在查询全局编录。全局目录（也称为 *部分属性集*）仅包含所有属性的属性的子集。只有对于通用组，成员属性才能保证在全局编录中可用。与您正在查询的全局编录不在同一域中的域本地和全局组的成员资格信息将不可用。

如果成员属性不包含任何值，即使您的全局编录与您正在查询的组在同一个域中，成员属性也将不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:22:44.230

我认为 Jon 试图说明的一点是**member**属性不会复制到全局目录中，因此如果您尝试通过针对全局目录来枚举组成员身份，您将不会获得有效的结果。只有在查询通用安全组的成员身份时才能返回结果，因为它的成员身份将在所有全局目录中。

此外，在枚举组成员身份时要注意一点 - 测试您的脚本以确保它们可以**检测嵌套成员资格中的循环循环**总是好的，否则存在脚本无限运行的可能性。

通常，要枚举组成员身份，您应该绑定到目标域中的域控制器。

# r - 在 R 中打印函数的字符串和参数

> ID：10304076
> 
> 赞同：2
> 
> 时间：2012-04-24T18:36:24.107
> 
> 标签：r

我有两个关于 R 的问题。很简单，但不幸的是我在网上找不到任何东西。

1.  是否可以在 R 中编写一个函数，`fun1<-function(place)`使得参数“place”是我想在我的情况下导入的文件名，即

    ```
    fun1 <- function(place)
    data <- read.table(/home/place.csv, header=TRUE, sep=",") 
    ```

2.  假设变量`c`被分配给一个数字，例如一个人的年龄。然后我想打印出这样的字符串：`"hello my age is c"`. 你如何在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T19:29:50.010

1.  您可以在第一部分使用`sprintf`,`paste0`等。

    ```
    fun1 <- function(place) read.table(sprintf('/home/%s.csv', place), 
                                       header=TRUE, sep=",")

    fun2 <- function(place) read.table(paste0('/home/', place, '.csv'), 
                                       header=TRUE, sep=",") 
    # paste0 only works in recent versions of R

    fun3 <- function(place) read.table(paste('/home/', place, '.csv', sep=''),
                                       header=TRUE, sep=",")

    # Now call the functions
    fun1('test.csv')
    fun2('test.csv')
    fun3('test.csv') 
    ```

2.  `sapply`不需要，因为`paste`是矢量化的。

    ```
    ages <- 10:20
    paste('Hello my name is', ages) 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T19:04:42.977

我不确定您在问题的第一部分要达到什么目的。你能进一步解释一下吗？

对于第二部分，这样的事情怎么样：

```
> ages = c(40, 23, 13, 42, 53)
> sapply(ages, function(x) paste("Hello, my age is", x))
[1] "Hello, my age is 40" "Hello, my age is 23" "Hello, my age is 13" "Hello, my age is 42"
[5] "Hello, my age is 53" 
```

# ruby-on-rails - 设计 2.0.4，Rails 3.2.3 - 创建用户帐户后，我被重定向到 root 并且无法访问其他路由

> ID：10304082
> 
> 赞同：1
> 
> 时间：2012-04-24T18:43:21.033
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, authentication, devise

我从 Sinatra 来到 Rails，对 Rails 还是很陌生。我的问题是，在创建用户帐户后，我只是被定向到 /public 文件夹中的 index.html 页面，并且似乎无法访问任何其他路由，我无法注销用户，也无法添加另一个用户。

我正在使用设计 gem 来管理我的用户模型和身份验证。安装 gem 后，我按照设计 github 页面上的说明进行操作。

IE：

```
rails generate devise:install 
```

我还添加到“config/environments/development.rb”文件中

```
config.action_mailer.default_url_options = { :host => 'localhost:3000' } 
```

我添加到“config/routes.rb”文件中

```
root :to => "home#index" 
```

我添加到“app/views/layouts/application.html.erb”文件中

```
<p class="notice"><%= notice %></p>
<p class="alert"><%= alert %></p> 
```

然后我跑了

```
rails generate devise User 
```

最后

```
rake db:migrate 
```

这是我的用户模型

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
  # attr_accessible :title, :body
end 
```

然后我导航到“/users/sign_up”并输入了电子邮件和密码，然后我被重定向到公共文件夹中的 index.html 页面。

问题是我似乎被困在那里。'/users/sign_out' 产量

```
Routing Error

No route matches [GET] "/users/sign_out"
Try running rake routes for more information on available routes. 
```

并运行“耙子路线”产量

```
new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
            user_session POST   /users/sign_in(.:format)       devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
           user_password POST   /users/password(.:format)      devise/passwords#create
       new_user_password GET    /users/password/new(.:format)  devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                         PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
       user_registration POST   /users(.:format)               devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                         PUT    /users(.:format)               devise/registrations#update
                         DELETE /users(.:format)               devise/registrations#destroy
                    root        /                              home#index 
```

似乎 '/users/sign_up' 应该是一条可行的路线。

我想知道问题是否在于没有电子邮件服务设置并且该帐户正在尝试通过电子邮件进行验证？如果是这样，我该如何禁用它？

谢谢！如果您需要更多信息或让我澄清一些事情，请告诉我。

===============更新===================

'users/edit' 路由确实有效，我认为问题可能在于为 'users/sign_out' 设置的路由是 DELETE 路由。我忘记了这方面的术语，但我知道从 GET 路由中创建 DELETE 路由时存在某种诡计。那么这是我的问题所在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:38:34.577

你可以在这里做两件事之一。

创建一个链接以进行注销，如下所示：

`<%= link_to "Logout", destroy_user_session_path, method: :delete %>`

`routes.rb`或者在您的文件中添加这样的附加路由：

```
 devise_for :users, :skip => [:sessions]
    as :user do
        get 'signin' => 'devise/sessions#new', :as => :new_user_session
        post 'signin' => 'devise/sessions#create', :as => :user_session
        get 'signout' => 'devise/sessions#destroy', :as => :destroy_user_session
    end 
```

上面的例子来自[https://github.com/plataformatec/devise/wiki/How-To:-Change-the-default-sign_in-and-sign_out-routes](https://github.com/plataformatec/devise/wiki/How-To:-Change-the-default-sign_in-and-sign_out-routes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:55:26.547

要退出，您应该致电：

```
destroy_user_session_path 
```

设计存储会话，并`DELETE`删除您的会话。

对于路由错误，您可以发布您的 HomeController 吗？

对于`edit`，您是否在致电：

```
edit_user_registration_path 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T01:55:24.810

片刻前我遇到了这个问题，而不是寻找网站和更多网站，而是当我停在这里时，上面显示的代码之一也显示在下面对我来说很好，谢谢

```
devise_for :users, :skip => [:sessions]

as :user do
 get 'signin' => 'devise/sessions#new', :as => :new_user_session
 post 'signin' => 'devise/sessions#create', :as => :user_session
 get 'signout' => 'devise/sessions#destroy', :as => :destroy_user_session
end 
```

# jsp - 如何在 JSTL 中正确拆分字符串？

> ID：10304084
> 
> 赞同：20
> 
> 时间：2012-04-24T18:43:33.093
> 
> 标签：jsp, split, jstl

如何使用 JSTL 在 jsp 页面中拆分由“/”分隔的字符串？

我有一个这种格式的字符串：**

> “2010 年 11 月 23 日”

* *. 有时，字符串可能是这样的：**

> “2010 年 1 月 1 日”

* *. 我需要做一些事情才能将字符串拆分为三个不同的子字符串：**

> “23”、“11”、“2010”。

** 这是因为我需要将它们中的每一个放在三个不同的文本字段中，如下所示：

```
<input type="text" value="23">/
<input type="text" value="11">/
<input type="text" value="2010"> 
```

我还找不到任何工作示例。

提前致谢！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-24T18:57:38.263

您可以为此使用该[`fn:split()`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/split.fn.html)功能。

```
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
...
<c:set var="dateParts" value="${fn:split(dateString, '/')}" />
...
<input type="text" name="day" value="${dateParts[0]}" />
<input type="text" name="month" value="${dateParts[1]}" />
<input type="text" name="year" value="${dateParts[2]}" /> 
```

确保事先验证日期格式:) 如果它是 a`java.util.Date`而不是 a会更容易`java.lang.String`。然后，您可以[`<fmt:formatDate>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fmt/formatDate.html)先将其格式化为可靠且固定的字符串格式。否则，您需要添加对数组长度的检查，[`fn:length()`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/length.fn.html)并通过 防止潜在的 XSS 攻击漏洞[`fn:escapeXml()`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/escapeXml.fn.html)。

还需要注意的是，该函数将正则表达式作为参数，而不仅仅是纯字符序列。因此，如果您想拆分代表正则表达式中特殊字符的字符，则需要使用反斜杠对其进行转义。另请参阅[如何在 Java 中拆分字符串以](https://stackoverflow.com/questions/3481828/how-to-split-a-string-in-java)获取同样适用于`fn:split()`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-22T17:26:50.853

对于在搜索中发现此问题的其他人（就像我所做的那样），值得注意的是 JSTL 具有有用的标签`<c:forTokens>`。这将通过提供的分隔符拆分输入字符串，然后遍历生成的标记集合。

如此处所示，以下代码：

```
<c:forTokens items="A,B,C,D" delims="," var="mySplit">
   <c:out value="${mySplit}"/></br>
</c:forTokens> 
```

会导致：

```
A
B
C
D 
```

文档：[JSTL 核心标记 forTokens](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/forTokens.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-24T18:56:39.683

使用 JSTL fn 库。他们在那里有[分歧](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/split.fn.html)。

# ruby-on-rails - Capistrano Rails 部署——“找不到 gem...正在回滚”

> ID：10304085
> 
> 赞同：0
> 
> 时间：2012-04-24T18:43:36.427
> 
> 标签：ruby-on-rails, deployment, capistrano, bundler

我正在尝试将 Rails 应用程序从 OS X 开发工作站部署到 RedHat Linux 5 生产服务器。

我把完整的输出`cap deploy`放到**[这个 gist](https://gist.github.com/2482390)**中。

我认为显示问题的这部分输出：

```
 ** [out :: devuser@web3] Could not find gem 'awesome_print (>= 0) ruby' in any of the gem sources listed in your Gemfile.
 ** [out :: devuser@web3] Run `bundle install` to install missing gems.
    command finished in 663ms
*** [deploy:update_code] rolling back 
```

这些是我在这里看到的一些问题：

*   `awesome_print`在`:development`组中，因此 Capistrano 不应该尝试在生产中安装它。

*   无论如何，所有的 gem 都可以在 ruby​​gems.org 中找到，所以安装它们应该没有问题。

如果有人知道`cap deploy`上班的方法，我将不胜感激。谢谢。

* * *

我的宝石文件...

```
source 'https://rubygems.org'

gem 'rails', '3.2.2'
gem 'mysql2', '0.3.11'
gem 'capistrano', '2.11.2'
gem 'haml-rails', '0.3.4'
gem 'net-ldap', '0.3.1'
gem 'bourbon', '1.4.0'
gem 'simple_form', '2.0.1'
gem 'will_paginate', '3.0.3'

group :development, :test do
end

group :development do
  gem 'wirble'
  gem 'awesome_print'
  gem "autotest", '4.4.6'
  gem "autotest-rails-pure", '4.1.2'
  gem "autotest-fsevent", '0.2.8'
  gem "autotest-growl", '0.2.16'
end

group :test do
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails', '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer', '0.9.10'

  gem 'uglifier', '>= 1.0.3'
end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T21:05:37.547

我认为您的 capistrano 配方实际上并没有完全运行 bundle install 。确保您`require "bundler/capistrano"`的 deploy.rb 配方中有。

# objective-c - 如何从 lldb 执行块（由指针标识）

> ID：10304090
> 
> 赞同：3
> 
> 时间：2012-04-24T18:43:56.040
> 
> 标签：objective-c, objective-c-blocks, lldb

我在 iOS 模拟器中的 lldb 调试器中，我有一个块的地址。我想尝试执行它。我尝试了想到的第一件事（见下文），但没有奏效。有没有办法做到这一点？

```
(lldb) po 0x2c7140
(int) $2 = 2912576 <__NSGlobalBlock__: 0x2c7140>
(lldb) po 0x2c7140(NO, @"Test")
error: called object type 'int' is not a function or function pointer 
```

我也试过**call**但显然这不是 llvm 中的命令？它在 gdb 中可用。

```
(lldb) call (void)0x2c7140(NO, @"Test")
error: 'call' is not a valid command. 
```

我刚刚意识到第一次尝试无论如何都会失败，因为 po 不会使用 void 返回值，但问题仍然存在......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T23:43:47.957

您需要将您的号码转换为块指针。

```
expr ((void (^)(BOOL,NSString*))0x2c7140)(NO, @"Test")
       |        |    |          |        |
  Return type  Argument types  Address  Call 
```

（`expr`是 lldb 的替代品`call`）

我还没有实际测试过这是否有效，但已经确认 lldb 可以识别演员表。您可能需要将其拆分为两个`expr`命令，一个用于强制转换，一个用于调用：

```
expr (void (^)(BOOL,NSString*))0x2c7140
expr $n(NO, @"Test") 
```

where`$n`是赋予第一个表达式的结果的标识符，它将成为 lldb 输出的一部分。我相信您可以简单地使用`$`来表示“先前的结果”，但尚未对此进行测试。

# iphone - 你如何覆盖 UILabel 的 setFrame

> ID：10304091
> 
> 赞同：10
> 
> 时间：2012-04-24T18:43:59.633
> 
> 标签：iphone, objective-c, ios, ipad

我想覆盖 setframe 以便它也使标签居中，但是执行以下操作：

```
- (void)setFrame:(CGRect)frame 
{
    [self setFrame:frame};
    self.center = CGPointMake(self.superview.center.x, kNavigationBarFrameHeight/2);
} 
```

给了我一个无限循环。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-24T18:49:33.227

你需要打电话`[super setFrame:frame]`。

这将调用 UILabel 的实现`setFrame`而不是您自己的实现。这就是导致你无限循环的原因。

# java - 使用 JDOM 解析 XML 文件，错误 StackOverflowError

> ID：10304092
> 
> 赞同：0
> 
> 时间：2012-04-24T18:44:12.060
> 
> 标签：java, xml, parsing, tree, xml-parsing

我试图获取 XML 文件的所有元素并使用递归方法将其放入 ArrayList>>，但出现错误：java.util.ArrayList 处的线程“main”java.lang.StackOverflowError 中的异常。当我进行递归调用时出现错误：GetAllXml(ListTree);

我想得到这样的结构 [[[un]] , [[deux,trois,quatre]] , [[cinq,six,sept],[huit,noeuf],[dix,onze]]] 这里是我的代码：

```
import java.util.ArrayList;
import java.util.List;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.NodeList;
import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.Element;

public class esperant {

/**
 * @param args
 */

private static List<Element> getChildren(Node parent) 
{
    NodeList nl = parent.getChildNodes();
    List<Element> children = new ArrayList<Element>(nl.getLength());
    for (int i = 0; i < nl.getLength(); i++) {
       Node n = nl.item(i);
       if (n instanceof Element)
            children.add((Element) n);
    }
    return children;
}

public static void GetAllXml(ArrayList<ArrayList<ArrayList<Element>>> ListTree)
{
    ArrayList<ArrayList<Element>> child = new ArrayList<ArrayList<Element>>();

    int level = ListTree.size()-1;

    for (int i=0;i<ListTree.get(level).size();i++)
    {

         for (int j=0;j<ListTree.get(level).get(i).size();j++)
            {
             ArrayList<Element> childOfChild = new ArrayList<Element>();
             childOfChild.addAll(getChildren(ListTree.get(level).get(i).get(j)));
             child.add(childOfChild);   
            }

    }
    ListTree.add(child);
    GetAllXml(ListTree);
}

public static void main(String[] args) {
    // TODO Auto-generated method stub
    ArrayList<ArrayList<ArrayList<Element>>> ListTree = new ArrayList<ArrayList<ArrayList<Element>>>();
    ArrayList<ArrayList<Element>> child = new ArrayList<ArrayList<Element>>();
    ArrayList<Element> childOfChild = new ArrayList<Element>();
    try{
         DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
         DocumentBuilder parser = factory.newDocumentBuilder();
         Document doc = parser.parse("test.xml");
         Element root = doc.getDocumentElement();

         childOfChild.add(root);
         child.add(childOfChild);
         ListTree.add(child);

         GetAllXml(ListTree);

         System.out.println(ListTree);

    }
    catch (Exception e)
    {
         e.printStackTrace();
    }

}

} 
```

这是xml文件：

```
<?xml version="1.0"  encoding="iso-8859-1"?>
  <un>
     <deux> <cinq></cinq> <six></six> <sept></sept> </deux>
     <trois> <huit></huit><noeuf></noeuf>  </trois>
     <quatre><dix></dix><onze></onze> </quatre>
  </un> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:50:16.877

像这样更改您的 GetAllXml(X)，它会起作用。正如上面的每个人所说，这种方法没有出路。

```
 final ArrayList<ArrayList<Element>> child = new ArrayList<ArrayList<Element>>();

    final int level = ListTree.size() - 1;

    for (int i = 0; i < ListTree.get(level).size(); i++)
    {

        for (int j = 0; j < ListTree.get(level).get(i).size(); j++)
        {
            final ArrayList<Element> childOfChild = new ArrayList<Element>();
            childOfChild.addAll(getChildren(ListTree.get(level).get(i).get(j)));
            if (childOfChild.size() > 0)
            {
                child.add(childOfChild);
            }

        }
    }
    if (child.size() > 0)
    {
        ListTree.add(child);
        GetAllXml(ListTree);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T22:26:55.250

对 GetAllXml(X) 的每次调用，无论它做什么，最终都会调用 GetAllXml(X)，并传递与其参数相同的值。所以很明显它会无限递归。

# c++ - 使用 *(pointer+i) 与 pointer[i]

> ID：10304093
> 
> 赞同：0
> 
> 时间：2012-04-24T18:44:12.077
> 
> 标签：c++, pointers

有人可以解释一下这段代码吗

```
// Option 1
int **p = new Point*[2];
p[1] = new Point;
p[1]->x = p[1]->x = 1;

// Option 2
int **p = new Point*[2];
*(p+1) = new Point;
(*(p+1))->x = (*(p+1))->x = 1; 
```

两个选项不一样吗？为什么当我使用选项 2 创建变量时，我无法使用选项 1 写入它的值（我得到了随机数（地址号？））？有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:46:11.623

你有一个错字：`(*(p+1))->x = (*(p+1))->x = 1;`- 应该`y`在第二个学期

# php - 播放器多网址

> ID：10304096
> 
> 赞同：0
> 
> 时间：2012-04-24T18:44:17.960
> 
> 标签：php, jquery, flash, jquery-plugins

我有一个包含许多 url 的数组。我想在 mp3 播放器中播放它们。你认识这样的球员吗：

[http://www.alsacreations.fr/dewplayer-en](http://www.alsacreations.fr/dewplayer-en)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:47:02.963

JW Player可以播放音频/视频文件的播放列表：[http ://www.longtailvideo.com/players/jw-flv-player/](http://www.longtailvideo.com/players/jw-flv-player/)

**编辑**

JW Player 是完全可配置的，您可以在此处测试选项[http://www.longtailvideo.com/support/jw-player-setup-wizard/](http://www.longtailvideo.com/support/jw-player-setup-wizard/)

如果您指定 24px 的高度，您将只有控制栏。如果您想更换皮肤，可以从官方皮肤中选择一种[http://www.longtailvideo.com/addons/skins](http://www.longtailvideo.com/addons/skins)

# google-maps - 将 Google Maps 上的图像拖到地图上显示的错误位置

> ID：10304099
> 
> 赞同：1
> 
> 时间：2012-04-24T18:44:45.943
> 
> 标签：google-maps, drag-and-drop

这是JS代码。我有两个不同的图像，我将在地图上放置一个标记，称为 DRAGGABLE 和 DRAGGABLE2。地图加载一个 kml 文件。

```
 <script type="text/javascript">
$(document).ready(function() {
$("#draggable").draggable({helper: 'clone',
stop: function(e) {
    var point=new google.maps.Point(e.pageX -27,e.pageY -106);
    var ll= overlay.getProjection().fromContainerPixelToLatLng(point);
    placeMarker(ll, 'alert.png');
    }
});

$("#draggable2").draggable({helper: 'clone',
stop: function(e) {
    var point=new google.maps.Point(e.pageX - 27,e.pageY -106);
    var ll=overlay.getProjection().fromContainerPixelToLatLng(point);
    placeMarker(ll, 'facebook.png');
    }
});
});
</script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
<script type="text/javascript"> 
var map;
var overlay;
var markers = {};
function initialize() {

  var myOptions = {
    zoom: 3,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }

  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        var ctaLayer = new google.maps.KmlLayer('test.kml');
    ctaLayer.setMap(map);

  overlay = new google.maps.OverlayView();
  overlay.draw = function() {};
  overlay.setMap(map);
}

function placeMarker(location,imgdrag) {
  var currentMrkMap; 
  currentMrkMap = parseInt(document.getElementById('mrkadd').value);
  currentMrkMap += 1;
  document.getElementById('mrkadd').value = currentMrkMap;
  document.getElementById('mrkelements').innerHTML += 'TestCodeHtmlIntoDIV';

  var marker = new google.maps.Marker({
        id: 'marker_' + currentMrkMap, 
        position: location, 
        draggable: true,
        map: map,
        icon:'img/'+imgdrag

  });
  id = 'marker_' + currentMrkMap;
  markers[id] = marker;

  var infowindow = new google.maps.InfoWindow({
        content: 'Add element <br><textarea id="txtAr" name="txtAr" rows="5" ></textarea><br>'
  });
  infowindow.open(map,marker);

  google.maps.event.addListener(marker,'click',function() {
      var coords = this.getPosition();
      var infowindow = new google.maps.InfoWindow({
        content: 'Add element <br><textarea id="txtAr" name="txtAr" rows="5" >' +  coords +'</textarea><br>'
      });
      infowindow.open(map,marker);
  });

  google.maps.event.addListener(marker, "dragend", function() {
      var coordinates = document.getElementById("txtAr");
      var coords = this.getPosition();
      coordinates.value= coords.lat() + ' '+ coords.lng();

  });

}
</script> 
```

CSS 代码。正文和侧边栏来自引导程序。

```
<style type="text/css"> 
  body {
    padding-top: 60px;
    padding-bottom: 60px;
  }
  .sidebar-nav {
    padding: 9px 0;
  }
  #map_canvas {         
    width: 100%;
    height: 530px;  
  }
</style> 
```

而 HTML 代码是基于 Bootstrap 的。我地图的部分是这样的

```
<div class="span9"> 
    <div class="hero-unit">             
        <div id="map_canvas"></div>            
     </div>           
</div><!--/span--> 
```

# java - ServiceLoader 查找接口的实现

> ID：10304100
> 
> 赞同：25
> 
> 时间：2012-04-24T18:44:50.660
> 
> 标签：java, serviceloader

我尝试使用 Java [ServiceLoader](http://docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html)来查找所有实现特定接口的类，如下所示：

```
loader = ServiceLoader.load(Operation.class);
try {
    for (Operation o : loader) {
        operations.add(o);
    }
} catch (ServiceConfigurationError e) {
    LOGGER.log(Level.SEVERE, "Uncaught exception", e);
} 
```

不幸的是，当我在调试模式下运行 Eclipse 时，ServiceLoader 找不到任何类。我觉得我错过了一个微不足道的点......

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-24T18:54:12.430

`ServiceLoader`做不到。

为了将类公开为可以被您发现的服务，`ServiceLoader`您需要将其名称放入提供者配置文件中，如[使用 Java 平台创建可扩展应用程序中所述](https://docs.oracle.com/javase/tutorial/ext/basics/spi.html) 。

没有内置方法可以找到实现特定接口的所有类。可以做类似事情的框架使用他们自己的类路径扫描解决方案（即使使用自定义类路径扫描也不容易，因为`.class`文件只存储有关直接实现的接口的信息，而不是传递）。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-07-12T02:05:38.277

如果实现是您自己编写的，您可以使用[AutoService](https://github.com/google/auto/tree/master/service)通过`ServiceLoader`接口使它们可用，例如

```
@AutoService(Operation.class)
class Foo implements FooInterface {

}

@AutoService(Operation.class)
class Bar extends Foo {

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-17T13:34:09.257

为了在运行时扫描您的类路径以查找特定接口的实现，您需要使用不同的解决方案，例如。[Reflections](https://github.com/ronmamo/reflections) （注意**s**最后，这不是java的Reflection API）

# java - 是否可以通过反射处理类元数据以确保 DRY 方法？

> ID：10304104
> 
> 赞同：2
> 
> 时间：2012-04-24T18:45:02.963
> 
> 标签：java, reflection, metadata

标题可能看起来令人不安，但让我解释一下。

我面临着一个有趣的挑战，我有一个层次结构的类，这些层次结构与一个对象相关联，该对象存储与其每个属性相关的元数据（一个带有诸如 UPDATED 或 NO_UPDATE 之类的编辑标志的 int 值枚举）。

合并两个对象时出现问题，因为我不想检查类上的每个字段以查看它是否已更新并跳过或应用更改。

我的想法：反思。

所有对象都在接口后面，因此我可以使用 IObject.class.getMethods() 并以这种方式迭代该数组：

```
IClass class = //Instance of the first class;
IAnotherClass anotherClass = //Instance of the second class;
for(Method m  : IObject.class.getMethods()) {
    if(m.getName().startsWith("get")) {
        try {
            //Under this method (which is a getter) I cast it on 
            //both classes who implement interfaces that extend an
            //interface that defines the getters to make them
            //consistent and ensure I'll invoke the same methods.
            String propertyClass = (String)m.invoke(class);
            String propertyAnotherClass = (String)m.invoke(anotherClass);
            if(propertyClass != propertyAnotherClass) {
                //Update attribute and attribute status.
            }
        } catch (Exception e) {

        }
    }
} 
```

是否有另一种方法来实现这一点，或者我应该坚持使用冗长的方法来调用每个属性的属性并进行这样的检查？对象不会发生太大变化，而且架构非常模块化，因此如果字段发生变化，则不会涉及太多更新，但必须更改这样的方法让我有点担心。

**编辑1：**我正在发布到目前为止我所拥有的工作代码。这段代码对我来说是一个解决方案，但它很有效，我将它用作最后的资源不是因为我有时间花，而是因为我不想重新发现轮子。如果我使用它，我将使用方法制作一个静态列表，因此我只需要获取该列表一次，考虑到 AlexR 指出的事实。

```
private static void merge(IClazz from, IClazz to) {
        Method methods[] = from.getClass().getDeclaredMethods();
        for(Method m : methods) {
            if(m.getName().startsWith("get") && !m.getName().equals("getMetadata")) {
                try {                   
                    String commonMethodAnchor = m.getName().split("get")[1];
                    if(!m.getReturnType().cast(m.invoke(from)).equals(m.getReturnType().cast(m.invoke(to)))) {
                        String setterMethodName = "set" + commonMethodAnchor;
                        Method setter = IClazz.class.getDeclaredMethod(setterMethodName, m.getReturnType());
                        setter.invoke(to, m.getReturnType().cast(m.invoke(from)));
                        //Updating metadata
                        String metadataMethodName = "set" + commonMethodAnchor + "Status";
                        Method metadataUpdater = IClazzMetadata.class.getDeclaredMethod(metadataMethodName, int.class);
                        metadataUpdater.invoke(to.getMetadata(), 1);
                    }

                } catch (Exception e) {

                }
            }
        }
    } 
```

metadataUpdater 将值设置为 1 只是为了模拟我在真实案例场景中使用的“更新”标志。

**编辑 3：**感谢 Juan、David 和 AlexR 的建议和指导！他们真的让我考虑我一开始没有考虑的事情（我赞成你所有的答案，因为他们都帮助了我）。

在添加了 AlexR 建议的内容并检查了 jDTO 和 Apache Commons（最终发现总体概念非常相似）之后，我决定坚持我的代码而不是使用其他工具，因为它在给定对象层次结构和元数据的情况下工作解决方案的结构，到目前为止没有出现异常。该代码是第二次编辑的代码，我将它放在一个帮助类中，最终完成了这个技巧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T18:52:11.303

Apache Commons Bean Utils 可能会解决您的问题：[http ://commons.apache.org/beanutils/](http://commons.apache.org/beanutils/)

如果要复制所有属性，请尝试使用 copyProperties：[http ://commons.apache.org/beanutils/v1.8.3/apidocs/src-html/org/apache/commons/beanutils/BeanUtils.html#line.134](http://commons.apache.org/beanutils/v1.8.3/apidocs/src-html/org/apache/commons/beanutils/BeanUtils.html#line.134)

看一个例子：[http ://www.avajava.com/tutorials/lessons/how-do-i-copy-properties-from-one-bean-to-another.html](http://www.avajava.com/tutorials/lessons/how-do-i-copy-properties-from-one-bean-to-another.html)

```
 FromBean fromBean = new FromBean("fromBean", "fromBeanAProp", "fromBeanBProp");
    ToBean toBean = new ToBean("toBean", "toBeanBProp", "toBeanCProp");
    System.out.println(ToStringBuilder.reflectionToString(fromBean));
    System.out.println(ToStringBuilder.reflectionToString(toBean));
    try {
        System.out.println("Copying properties from fromBean to toBean");
        BeanUtils.copyProperties(toBean, fromBean);
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        e.printStackTrace();
    }
    System.out.println(ToStringBuilder.reflectionToString(fromBean));
    System.out.println(ToStringBuilder.reflectionToString(toBean)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:55:06.553

我认为最好的方法是使用代理对象，无论是动态代理还是 cglib 增强器或类似的东西，所以你装饰了 getter 和 setter，你可以跟踪那里的变化。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T18:55:33.023

您的方法没问题，但请记住，这`getMethod()`比 慢得多`invoke()`，因此如果您的代码对性能至关重要，您可能需要缓存`Method`对象。

# node.js - 如何设计不支持 SSL 的 API？

> ID：10304106
> 
> 赞同：2
> 
> 时间：2012-04-24T18:45:07.397
> 
> 标签：node.js, authentication, https

我正在开发我的应用程序的 Restful API 层。该应用程序将用于不支持 HTTPS 的场所。我们需要同时支持网络应用和移动应用。我们在服务器端使用 Node/Expressjs。我的两个担忧是：

*   有没有一种方法可以在没有 HTTPS 的情况下设置安全身份验证？

*   有没有一种方法可以在 Web 应用程序（backbonejs）和本机移动应用程序（iOS）上重用相同的身份验证层？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T02:08:37.660

我认为您混淆了**真实性**和**机密性**。完全有可能创建一个 API 来安全地验证调用者是他们所说的使用[MAC](http://en.wikipedia.org/wiki/Message_authentication_code)的人；最常见的是[HMAC](http://en.wikipedia.org/wiki/HMAC)。不过，假设是你已经安全地建立了一个共享的秘密——你可以亲自去做，但这很不方便。

[Amazon S3 是一个无需 SSL/TLS 即可对其请求进行](http://docs.amazonwebservices.com/AmazonS3/latest/dev/S3_Authentication2.html)[*身份验证*](http://docs.amazonwebservices.com/AmazonS3/latest/dev/S3_Authentication2.html)[的API](http://docs.amazonwebservices.com/AmazonS3/latest/dev/S3_Authentication2.html)*示例。它通过规定[调用者根据 HTTP 请求的各个部分创建 HMAC 的特定方式来](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html)做到这一点。然后它验证请求者实际上是允许请求该对象的人。*Amazon 在注册时**最初*依赖 SSL 来建立您的共享密钥，但不需要 SSL 来正确执行 API 调用，该调用可以被安全地验证为来自授权个人（可以是普通的旧 HTTP）。*

 **现在这种方法的缺点是任何人都可以看到双向传递的所有数据。虽然发送的授权数据不允许攻击者冒充有效用户，但攻击者*可以*看到您传输的任何内容，因此在许多情况下需要**保密。**

使用 S3 公开传输 ​​API 响应的一个用例包括其代码托管在一台服务器上的网站，而其图像等托管在 S3 中。网站通常使用[S3 的查询字符串身份验证](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html#RESTAuthenticationQueryStringAuth)来允许浏览器在一小​​段时间内直接从 S3 请求图像，同时还确保网站代码是唯一可以授权浏览器检索该图像的代码（从而向所有者收费带宽）。

允许使用非 SSL 请求的 API 身份验证机制的另一个示例是[OAuth](http://oauth.net/)。它是[过时的 1.0](http://oauth.net/documentation/spec/)系列[专门使用它](http://oauth.net/core/1.0a/#signing_process)（即使您使用 SSL），并且[OAuth 2.0](http://oauth.net/2/)规范[定义了几种访问令牌类型](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-7.1)，包括[OAuth2 HTTP MAC](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-http-mac-01)类型，其主要目的是*简化和改进不愿或无法使用的服务的 HTTP 身份验证使用每个请求的 TLS*（尽管最初建立秘密确实需要 SSL）。虽然[OAuth2 Bearer](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-bearer-22)类型需要 SSL，并且让事情变得更简单（没有[标准化](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-http-mac-01#section-3.2.1); 所有使用所有请求签名 API 的开发人员的祸根，但没有经过完善和测试的库）。

总而言之，如果您所关心的只是安全地确定请求的*真实性*，那是可能的。如果您在传输响应期间关心*机密性*，则需要某种传输安全性，并且 TLS 更容易在您的应用程序代码中正确使用（尽管[其他选项](http://www.daemonology.net/blog/2009-06-11-cryptographic-right-answers.html)可能是可行的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:19:30.670

*   *有没有一种方法可以在没有 HTTPS 的情况下设置安全身份验证？*

如果您指的是 SSL，则不会。您通过浏览器发送到 Web 服务器的任何内容都将是未加密的，因此第三方可以收听。HTTPS 不是身份验证，它对客户端和服务器之间的流量进行加密。

*   *有没有一种方法可以在 Web 应用程序（backbonejs）和本机移动应用程序（iOS）上重用相同的身份验证层？*

是的，正如你所说，它是层，所以它的接口将独立于客户端，它将是 HTTP，如果 web 应用程序与该层同源，则不会有问题。（例如从 myapp.com 访问的 api.myapp.com）。您的本机移动设备也可以发出 HTTP 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T21:06:03.697

在 SSL 或非 SSL 的任何一种情况下，如果您使用私钥/公钥场景，您需要用户在发送之前对每个请求进行签名，那么您可以是安全的。收到请求后，您可以使用他们的私钥（不是通过网络发送）对其进行解密，并匹配签名的内容和用户请求的操作，并确保这两者匹配。您将其基于 UTC 时间戳，这还要求所有使用此模型的服务器的时钟设置都非常准确。

Amazon Web Services 尤其使用这种安全方法，尽管他们不推荐它，但它在不使用 SSL 的情况下也足够安全。

我会认真地投入一些小改动来支持 SSL，因为它可以让您在这样做时更有可信度。我个人不会认为没有一个你是一个可信的组织。**

# c++ - 递归幂函数

> ID：10304107
> 
> 赞同：0
> 
> 时间：2012-04-24T18:45:08.180
> 
> 标签：c++, math, recursion

我正在尝试在不使用 math.h/pow() 的情况下编写递归幂函数，但我不断收到 .h 的垃圾值`-1.#IND`。我想我在调用 power 函数的新实例时遗漏了一些东西，但我不太明白如何绕过它。我的完整代码相当短：

```
#include <iostream>
using namespace std;

double power(double b, int e){
    double x;

    if(e == 0){
        x = b;
    }
    else if(b == 0){
        x = 1;
        e = 0;
    }
    else if(e < 0){
        x = (1 / b) * power(b, ++e);
    }
    else{
        x = b * power(b, --e);
    }

    return x;
}

int main(){
    double num;
    int exp;

    cout << "Please Enter Your Number: ";
    cin >> num;

    cout << "Please Enter The Explonent: ";
    cin >> exp;

    cout << power(num, exp);
    cin >> num;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T18:48:06.680

您返回值的唯一位置`power`是 where `e==0`。

其他情况计算值，但从不返回它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T18:47:57.350

你忘记了回报。打开编译器警告，它会抱怨。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T23:40:01.470

您可能过早地接受了答案。您的代码仍然存在问题（2^-3 返回 .25）并且您的代码非常不理想。您应该能够轻松计算 1.000001^1000000 （它非常接近*e*），但是您的算法会出现段错误，因为它需要大约一百万的堆栈深度。例如，计算 a^1024 只需 10 次乘法而不是 1023 次。

# android - Android 上的 MKMapPoint (iOS) 等价物？

> ID：10304108
> 
> 赞同：1
> 
> 时间：2012-04-24T18:45:35.443
> 
> 标签：android, google-maps, android-mapview

我和一位同事正在开展一个项目，该项目涉及在 Google 地图上绘制静态网格。问题是他在 iOS 上使用 MKMapPoint，而我在 Android 上找不到类似的东西......似乎我只能使用经度和纬度。它本质上将 x0,y0 设置为地图的左上角。Android有这样的东西吗？

# python - python 中用于绘制 ROC、AUC、DET 的神经网络库

> ID：10304109
> 
> 赞同：10
> 
> 时间：2012-04-24T18:45:36.710
> 
> 标签：python, numpy, machine-learning, scipy

我是 python 机器学习的新手，因此请原谅我的幼稚问题。python 中是否有一个用于实现神经网络的库，这样它也可以为我提供 ROC 和 AUC 曲线。我知道 python 中实现神经网络的库，但我正在寻找一个库，它也可以帮助我绘制 ROC、DET 和 AUC 曲线。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-27T22:27:07.830

在这种情况下，将您的问题分为 2 个主题是有意义的，因为神经网络与 ROC 曲线几乎没有直接关系。

## 神经网络

我认为没有什么比通过示例学习更好的方法了，所以我将向您展示一种使用由**前馈**神经网络训练的二进制分类问题的方法来解决您的问题，并受到[pybrain的](http://pybrain.org)[本教程](http://pybrain.org/docs/tutorial/fnn.html)的启发。

首先是定义一个数据集。最简单的可视化方法是在 2D 平面上使用二进制数据集，其中的点由正态分布生成，每个点都属于 2 个类之一。在这种情况下，这将是线性可分的。

```
from pybrain.datasets            import ClassificationDataSet
from pybrain.utilities           import percentError
from pybrain.tools.shortcuts     import buildNetwork
from pybrain.supervised.trainers import BackpropTrainer
from pybrain.structure.modules   import SoftmaxLayer

from pylab import ion, ioff, figure, draw, contourf, clf, show, hold, plot
from scipy import diag, arange, meshgrid, where
from numpy.random import multivariate_normal

means = [(-1,0),(2,4),(3,1)]
cov = [diag([1,1]), diag([0.5,1.2]), diag([1.5,0.7])]
n_klass = 2
alldata = ClassificationDataSet(2, 1, nb_classes=n_klass)
for n in xrange(400):
    for klass in range(n_klass):
        input = multivariate_normal(means[klass],cov[klass])
        alldata.addSample(input, [klass]) 
```

为了形象化，它看起来像这样： ![数据集](../Images/6c8703421f00d3376cf676a114c6d3d5.png)

现在你想把它分成训练集和测试集：

```
tstdata, trndata = alldata.splitWithProportion(0.25)

trndata._convertToOneOfMany()
tstdata._convertToOneOfMany() 
```

并创建您的网络：

```
fnn = buildNetwork( trndata.indim, 5, trndata.outdim, outclass=SoftmaxLayer )

trainer = BackpropTrainer( fnn, dataset=trndata, momentum=0.1, verbose=True,             weightdecay=0.01)

ticks = arange(-3.,6.,0.2)
X, Y = meshgrid(ticks, ticks)
# need column vectors in dataset, not arrays
griddata = ClassificationDataSet(2,1, nb_classes=n_klass)
for i in xrange(X.size):
    griddata.addSample([X.ravel()[i],Y.ravel()[i]], [0])
griddata._convertToOneOfMany()  # this is still needed to make the fnn feel comfy 
```

现在你需要训练你的网络，看看你最终得到了什么结果：

```
for i in range(20):
    trainer.trainEpochs( 1 )
    trnresult = percentError( trainer.testOnClassData(),
                              trndata['class'] )
    tstresult = percentError( trainer.testOnClassData(
           dataset=tstdata ), tstdata['class'] )

    print "epoch: %4d" % trainer.totalepochs, \
          "  train error: %5.2f%%" % trnresult, \
          "  test error: %5.2f%%" % tstresult

    out = fnn.activateOnDataset(griddata)
    out = out.argmax(axis=1)  # the highest output activation gives the class
    out = out.reshape(X.shape)

    figure(1)
    ioff()  # interactive graphics off
    clf()   # clear the plot
    hold(True) # overplot on
    for c in range(n_klass):
        here, _ = where(tstdata['class']==c)
        plot(tstdata['input'][here,0],tstdata['input'][here,1],'o')
    if out.max()!=out.min():  # safety check against flat field
        contourf(X, Y, out)   # plot the contour
    ion()   # interactive graphics on
    draw()  # update the plot 
```

这在开始时给你一个非常糟糕的边界： ![火车开始](../Images/107aeec6073eb0ca9720b2468c5c669b.png)

但最后还是一个不错的结果：

## ![火车头](../Images/1b2912c5070bac8f4dcbf6fe8eec5cb4.png)

## ROC曲线

至于 ROC 曲线，[这里](https://github.com/marcelcaraciolo/PyROC)有一个不错且简单的 Python 库，用于解决随机玩具问题：

```
from pyroc import *
random_sample  = random_mixture_model()  # Generate a custom set randomly

#Example instance labels (first index) with the decision function , score (second index)
#-- positive class should be +1 and negative 0.
roc = ROCData(random_sample)  #Create the ROC Object
roc.auc() #get the area under the curve
roc.plot(title='ROC Curve') #Create a plot of the ROC curve 
```

这为您提供了一条 ROC 曲线： ![ROC-单](../Images/a8bcf27b812a2f02cf3d5c693c69fcaa.png)

当然你也可以在同一张图上绘制多条 ROC 曲线：

```
x = random_mixture_model()
r1 = ROCData(x)
y = random_mixture_model()
r2 = ROCData(y)
lista = [r1,r2]
plot_multiple_roc(lista,'Multiple ROC Curves',include_baseline=True) 
```

![ROC-多重](../Images/bea373999c3b101bdab56cfd8f70b365.png)

（请记住，对角线只是意味着您的分类器是随机的，并且您可能做错了什么）

您可能可以轻松地在任何分类任务中使用您的模块（不限于神经网络），它会为您生成 ROC 曲线。

现在要从神经网络中获取绘制 ROC 曲线所需的类/概率，您只需要查看神经网络的激活：`activateOnDataset`在 pybrain 中将为您提供两个类的概率（在我上面的示例中，我们只取确定要考虑哪个类别的最大概率）。从那里，只需将其转换为 PyROC 所期望的格式，就像 for 一样`random_mixture_model`，它应该会给你你的 ROC 曲线。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T15:30:41.640

当然。首先，看看这个

[https://stackoverflow.com/questions/2276933/good-open-source-neural-network-python-library](https://stackoverflow.com/questions/2276933/good-open-source-neural-network-python-library)

这是我的一般想法，我正在勾勒出我可能会如何解决这个问题，这些都没有经过测试

来自 [http://pybrain.org/docs/tutorial/netmodcon.html#feed-forward-networks](http://pybrain.org/docs/tutorial/netmodcon.html#feed-forward-networks)

```
>>> from pybrain.structure import FeedForwardNetwork
>>> n = FeedForwardNetwork()
>>> n.activate((2, 2))
array([-0.1959887]) 
```

我们构建了一个神经网络，对其进行训练（未显示）并获得输出。你有一个测试集，对吧？您使用测试集生成 ROC 曲线的数据。对于单个输出神经网络，您希望为输出值创建一个阈值，以将它们转换为是或否响应，从而为您的任务获得最佳程度的特异性/敏感性

这是一个很好的教程 [http://webhome.cs.uvic.ca/~mgbarsky/DM_LABS/LAB_5/Lab5_ROC_weka.pdf](http://webhome.cs.uvic.ca/~mgbarsky/DM_LABS/LAB_5/Lab5_ROC_weka.pdf)

然后你只需绘制它们。或者你可以尝试找到一个为你做这件事的图书馆

我看到了这个 [http://pypi.python.org/pypi/yard](http://pypi.python.org/pypi/yard)

关键是，在 ROC 曲线上生成并不特定于神经网络，因此您可能找不到为您执行此操作的库。我已经提供了上面的内容，以表明自己滚动是相当简单的

*** 更多详情 ***

您的神经网络将有一个输出，您必须将其转换为分类（可能是/否）。要计算 ROC 曲线，您需要为是/否设置几个阈值（换句话说，0.75> 是，<.75 否）。从这个阈值开始，您将神经网络的输出转换为分类。通过将这些分类与真实分类进行比较，您可以获得假阳性率和真阳性率。然后，当您调整该阈值时，您将绘制误报率和真阳性率。

# algorithm - 为什么声波的倒数听起来和原来的一模一样？

> ID：10304111
> 
> 赞同：-1
> 
> 时间：2012-04-24T18:45:45.000
> 
> 标签：algorithm, math, audio, noise-reduction

我有一个音频源（我正在与 SO 中的另一个成员一起做一个项目，他也一直在提问）

在时域中，我们有 44100 个带符号的 4 字节整数样本。在时域中，我们否定每个样本。

在频域中，正如另一位用户向我们指出的那样，我们通过否定每个频率值的实部和虚部来将相位偏移 180 度

在这两种情况下，生成的音频波听起来与原始源完全相同。这是预期的吗（也许是因为 for 的波形本质上是相同的，只是反转了？）

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:48:51.760

是的，这是预期的行为。耳朵检测频率，在这两种情况下，虽然相位可能已经改变，但频率是相同的。

但是，您可以结合原始波和相移波来获得有趣的声音消除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:50:30.217

是的，您会期望相移信号听起来完全一样。您的相关问题的重点是，如果您将信号添加到相移 180 的副本中，由于相消干涉，结果将为零。

# iphone - iPad App 行为：一个带有标签栏的导航控制器，带有更多标签的控制器

> ID：10304119
> 
> 赞同：0
> 
> 时间：2012-04-24T18:46:19.123
> 
> 标签：iphone, ios, uinavigationcontroller, uitabbarcontroller, uistatusbar

**对于不耐烦的人：**

我想要一个导航控制器，它的根视图控制器是一个标签栏控制器，类似于 iPad 应用程序。我正在使用 IOS 5 和情节提要。

**对于阅读倾向：**

在我的故事板中，我在嵌入 UINavigationController 的 UITabBarController 中有 6 个选项卡，在显示 3 个选项卡后给它一个“更多”按钮。

当按下更多时，这样做会给我两个导航栏：

![双导航栏...这是什么意思？！](../Images/9e5612c69070f2de49f10c97ef50d9e4.png)

所以我继承了 TabBarController：

```
//@implentation MyTabController

- (void)viewDidLoad
{
    self.moreNavigationController.wantsFullScreenLayout = NO;
    self.delegate = self;
}

- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
    // hide nav bar if current controller is "More" controller
    self.navigationController.navigationBarHidden = 
       viewController == self.moreNavigationController;
} 
```

太好了，这给了我：

![差不多好了](../Images/01c2b3cc56e056bbb6aed30281df1e17.png)

我的猜测是我需要重新布局视图以说明状态栏，所以我尝试

```
[self.view setNeedsLayout:YES]; 
```

但我收到一条错误消息，说 UIView 不包含 setNeedsLayout 的选择器，所以...如何让 moreNavigationController.navigationBar 来说明状态栏？

**更新**：
我有第二个相关问题。当我点击“编辑”按钮时，编辑控制器会模态显示。它的导航栏显示在受保控制器*下方*（在动画之后），并且不接收触摸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:38:05.977

不建议将 tabBarController 推入 NavController，而是为每个 tabBar 视图控制器设置一个 NavigatorController，并将 TabBarController 设置为主窗口根视图控制器。

如果您希望能够在显示选项卡栏之前显示一个屏幕，一种解决方案是将所有导航器控制器推入前一个视图控制器，然后是您要显示的那个（这样所有导航栏都有后退按钮）。~~然后设置`hidesBottomBarWhenPushed = YES`为第一个视图控制器，这样它就不会显示 tabBar~~。

示例代码：

```
UIViewController *prevc = [[UIViewController alloc] init];
//prevc.hidesBottomBarWhenPushed = YES;

//Do this for every VC that will be a tabBarItem
UIViewController *vc1 = [[UIViewController alloc] init];
UINavigationController *nv1 = [[UINavigationController alloc] initWithRootViewController:prevc];
[nv1 pushViewController:vc1 animated:NO];

//Remember to set the tabBarItem!

UITabBarController *tb = [[UITabBarController alloc] init];
tb.viewControllers = [NSArray arrayWithObjects:nv1, nv2, nv3, nil]; 
```

刚刚意识到设置 hidesBottomBarWhenPushed 到之前的 ViewController 是不行的，但是如果你先显示 prevc，然后再推送下面的 viewController，就没有问题了。但是，如果无论如何您不想在弹出时隐藏标签栏，请检查：

*   [hidesBottomBarWhenPushed 但在弹出时](https://stackoverflow.com/questions/5569961/hidesbottombarwhenpushed-but-when-popped)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T13:45:59.997

我也遇到过类似的问题。在我的应用程序中，导航控制器内也有一个 Tabarcontroller。当我尝试以编程方式切换到更多导航控制器中的视图控制器时（例如：[self.tabBarController setSelectedIndex:X];），我的应用程序中会出现相同的问题。但是下面的代码解决了我的问题。

```
 self.tabBarController.moreNavigationController.navigationBarHidden = YES; 
```

# php - 数据库内容未进入 tinyMCE 文本区域

> ID：10304120
> 
> 赞同：-1
> 
> 时间：2012-04-24T18:46:22.173
> 
> 标签：php, html, tinymce, rich-text-editor

我的 tinyMCE 编辑器显示得很好，但是在表单中我有一个选择框，根据您的选择，文本区域会相应地填充内容。

就像我选择 PHP 一样，PHP 的描述会进入 textarea。它可以在没有 tinyMCE 的情况下工作，但是当我添加 tinyMCE 时，textarea 中没有显示任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:11:15.057

TinyMCE 不会**实时**显示 textarea 的内容。它在开始时读取内容，并在工作结束时保存。所有的编辑工作都在`iframe`Tiny 动态创建的元素中进行。如果您更新`textarea`，您必须要求 TinyMCE 自行刷新。

几分钟后，我将为您查找确切的方法。（很久以前我在使用 TinyMCE 的时候，所以我忘记了方法名称。）

*[几分钟过去了..]*

查看文档：[http ://www.tinymce.com/wiki.php/How-to_load/save_with_Ajax_in_TinyMCE](http://www.tinymce.com/wiki.php/How-to_load/save_with_Ajax_in_TinyMCE)

您只需要在 TinyMCE 编辑器上调用[setContent](http://www.tinymce.com/wiki.php/API3%3amethod.tinymce.Editor.setContent)方法，而不是（或除此之外）在`textarea`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:59:20.570

有时使用小 mce 取决于您在 Init 中的插件。尝试删除所有插件并一一添加，看看这是否有助于您找到更好的解决方案。

像媒体这样的一些插件可以在文本区域中剥离并且不允许标签，因此如果 tiny mce 不允许该标签，则 textarea 为空，或者添加 valid_elemens:' *[* ]' 并尝试它是否显示某些内容。

祝你好运

# objective-c - 如何将 undoManager 与核心数据实体一起使用

> ID：10304121
> 
> 赞同：2
> 
> 时间：2012-04-24T18:46:23.337
> 
> 标签：objective-c, core-data, ios5, nsundomanager

我有一个名为 NSManagedObject 的对象`appointment`，我编辑了它的属性。如果我用户按下*取消*，我想撤销所有这些编辑。

如果我这样做（示例代码）

```
[[appointment managedObjectContext] setUndoManager:[[NSUndoManager alloc] init]]; //however doing a nslog on undoManager still shows it as (null);
[[[appointment managedObjectContext] undoManager] beginUndoGrouping];
appointment.startTime = 11;
appointment.endTime = 12;
appointment.customer = @"Tom";
[[[appointment managedObjectContext] undoManager] endUndoGrouping];
[[[appointment managedObjectContext] undoManager] undo]; 
```

`beginUndoGrouping`它不应该撤消和之间的所有更改`endUndoGrouping`吗？似乎有很多方法可以做到这一点，但我似乎找不到正确的方法。撤消更改的正确方法是`NSManagedObject`什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T21:55:10.173

我想这只是事件进行顺序的一个例子，而不是一个实际的例子。

您是否偶然忘记给 ManagedObjectContext 一个 NSUndoManager？

我相信你在 OS X 下默认会得到一个，但在 iOS 下，你必须专门提供一个。

您要确保在创建 MOC 时设置撤消管理器...

```
managedObjectContext.undoManager = [[NSUndoManager alloc] init]; 
```

如果 undo-manager 为 nil，则在执行此操作后，您正在使用多个 MOC，或者其他一些代码已将其重置。

此外，出于调试目的，请检查 Appointment.managedObjectContext 属性，并确保它不为 nil 并引用有效的 MOC。

**编辑**

好的，我只是去写了一个快速测试，使用一个简单的模型。也许你应该做一些类似的事情来看看你的断言在哪里失败（你可以在你的代码路径中添加正常的断言——我做了这个作为单元测试，所以我可以轻松地将它添加到现有项目中）。

```
- (void)testUndoManager
{
    NSDate *now = [NSDate date];
    NSManagedObjectContext *moc = [self managedObjectContextWithConcurrencyType:NSConfinementConcurrencyType];
    STAssertNil(moc.undoManager, @"undoManager is nil by default in iOS");
    moc.undoManager = [[NSUndoManager alloc] init];
    [moc.undoManager beginUndoGrouping];
    NSManagedObject *object = [NSEntityDescription insertNewObjectForEntityForName:EVENT_ENTITY_NAME inManagedObjectContext:moc];
    STAssertNotNil(moc, @"Managed Object is nil");
    STAssertEquals(moc, object.managedObjectContext,  @"MOC of object should be same as MOC");
    STAssertNotNil(object.managedObjectContext.undoManager, @"undoManager of MOC should not be nil");
    [object setValue:now forKey:@"timestamp"];
    STAssertEqualObjects(now, [object valueForKey:@"timestamp"], @"Timestamp should be NOW");
    [moc.undoManager endUndoGrouping];
    STAssertEqualObjects(now, [object valueForKey:@"timestamp"], @"Timestamp should be NOW");
    [moc.undoManager undo];
    STAssertNil([object valueForKey:@"timestamp"], @"Object access should be nil because changes were undone");
} 
```

**编辑**

托管对象的 MOC 在几种情况下可以设置为 nil。例如，如果您删除一个对象，然后保存该 mod，则该对象的 MOC 将设置为 nil...

```
NSManagedObject *object = [NSEntityDescription insertNewObjectForEntityForName:@"SomeEntity" inManagedObjectContext:moc];
[object.managedObjectContext deleteObject:object];
[moc save:0];
// object.managedObjectContext will be nil 
```

另一种不太常见的情况，但表明 MOC 可能存在内存问题……在 ARC 下，托管对象的 MOC 是弱指针。因此，如果 MOC 消失，该指针将被重置为零。在非 ARC 下，指针将只有旧值，您的结果将是未定义的……可能是崩溃。

因此，如果 managedObject.managedObjectManager 为 nil，则最可能的罪魁祸首是：

1.  该对象从未插入 MOC
2.  该对象已从 MOC 中删除
3.  MOC 已删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T22:23:01.880

撤消不适用于Core Data的最大原因是没有创建和设置撤消管理器......

```
 newManager = [[[NSUndoManager alloc] init] autorelease];
 [newManager setLevelsOfUndo:4];
 myManagedObjectContext.undoManager = newManager; 
```

您也不需要 Begin/end undoGrouping，因为这是为您完成的。

也有可能（部分是因为已经为您完成了）在您返回事件循环并在下次调用之前，撤消将不起作用。（换句话说，减少用户点击撤消按钮可能不起作用。）

啊，您刚刚添加了上面的评论。请发布进行设置的代码，因为您的 undoManager 为 null 显然会使其不起作用。

# internet-explorer - 经典 ASP 会话在 Internet Explorer 中丢失

> ID：10304122
> 
> 赞同：1
> 
> 时间：2012-04-24T18:46:27.003
> 
> 标签：internet-explorer, session, asp-classic

我正在使用 Classic ASP 开发一个遗留应用程序。我在使用 Internet Explorer 时遇到了一个奇怪的问题。我在一个页面中设置某些会话变量并在另一个页面上检索它们。

这在 Chrome 和 Firefox 中运行良好。

但在 Internet Explorer 中，大多数情况下，它会删除会话变量中的值。这是在 IE 7、8 和 9 中。

如果我在很长一段时间后移动到不同的页面，会话数据会被保留。但是如果我在短时间内移动到该页面，则不会保留会话数据。检索到的会话变量为空。

任何帮助都会帮助我克服这个绊脚石！

编辑：

代码简单明了，只需设置一些会话变量，当我离开该页面时，它们就会丢失，这仅在 INTERNET EXPLORER 中发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:02:10.340

我想我可能与`response.buffer = true` 如果重定向到其他页面尝试`response.clear`在重定向之前添加，并且`response.end`在页面末尾之前添加`</body></html>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:37:31.350

IE10有这个问题

确保您没有选中删除历史记录复选框。

工具 > Internet 选项 > 浏览历史

由于某种原因，这影响了会话变量和 Cookie。

# php - 使用 PHP 作为服务器和 jQuery 作为客户端创建一个 Restful API

> ID：10304123
> 
> 赞同：0
> 
> 时间：2012-04-24T18:46:38.390
> 
> 标签：php, jquery, api

我正在尝试创建一个调用我网站 API 的 Javascript 客户端 API 服务。这将是跨域的，我知道这会导致问题。但是，我需要用户发送一些用户凭据（无论是他们的用户名和密码*明显编码*还是 API 密钥 + 秘密），以便我可以返回用户特定的详细信息。

我最初考虑使用`jsonp`数据类型，但是这不允许您设置任何自定义标头，因此排除了这一点。

我已经在网上搜索了一段时间，但无法找到一种安全的跨域方式，有没有人在这方面取得了成功，可以给我一些建议吗？

更新：

我已经按照 lu1s 的建议尝试了以下代码，但是我收到了错误函数中所述的“boo”警报。

```
$.ajax({
    url: 'http://www.dotsandboxes.co.cc/__tests/cors.php',
    type: 'GET',
    dataType: 'json',
    success: function() { alert('hello!'); },
    error: function() { alert('boo!'); },
    beforeSend: function (xhr) {
        xhr.setRequestHeader('securityCode', 'Foo');
        xhr.setRequestHeader('passkey', 'Bar');
    }
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:12:24.743

你可以。尝试将`Allow-Access-Control-Origin: *`以及正确的内容类型添加到您的 HTTP 响应标头中。

尝试使用这样的简单 PHP 脚本：

```
<?php
    header('Access-Control-Allow-Origin: *');
    header('Content-type: text/json');
    echo json_encode(array('success'=>true,'data'=>'foobar'));
?> 
```

查看此站点以阅读有关跨域的更多信息：http: [//enable-cors.org/](http://enable-cors.org/)

关于身份验证，不建议发送用户名或密码，即使它们已加密。正如您所说，最好在 URL 中传递一个令牌。最好遵循[http://oauth.net/2/](http://oauth.net/2/)等标准。

# mysql - manage.py 检查数据库和枚举

> ID：10304125
> 
> 赞同：1
> 
> 时间：2012-04-24T18:46:42.277
> 
> 标签：mysql, django, inspectdb

A 中有很多带有枚举的表和字段。

是否有能力从 MySQL 中检查枚举`transit enum('yes','no') default 'no'`？我明白了，默认情况下它不起作用。

我也有一个错误的字符长度定义：`ipaddr varchar(15) NOT NULL default '',`-> ipaddr = models.CharField(max_length=45)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:44:11.163

似乎此操作没有默认方法，或者我的问题太愚蠢而无法回答。所以，我做了自己的自行车 :) 看起来该代码有效，但我没有很好地测试它。

```
#!/usr/bin/python

import re, MySQLdb
from MySQLdb import cursors
from settings import DATABASES

DB_SETUP = {
    'host':     DATABASES['default']['HOST'] or 'localhost',
    'user':     DATABASES['default']['USER'] or 'root',
    'passwd':   DATABASES['default']['PASSWORD'] or 'None',
    'db':       DATABASES['default']['NAME'] or 'mysql',
    'charset':  'utf8',
    }

db = MySQLdb.connect(cursorclass=cursors.DictCursor, **DB_SETUP)
cursor = db.cursor()

def max_len(str):
    return max([ len(i.strip().replace("'", '')) for i in str.split(',') ])

def get_enum_tuple(string):
    return tuple( (i.strip().replace("'", ''), i.strip().replace("'", '')) for i in string.split(',') )

patterns = {
    re.compile( r'enum\((?P<choices>[\'|\w|,*|\s*]+)\)', re.IGNORECASE):
        'models.CharField',
    re.compile( r'varchar\((?P<max_length>\d+)\)', re.IGNORECASE):
        'models.CharField',
    re.compile( r'char\((?P<max_length>\d+)\)', re.IGNORECASE):
        'models.CharField',
    re.compile( r'int\((?P<max_length>\d+)\)', re.IGNORECASE):
        'models.IntegerField',
    re.compile( r'tinyint\((?P<max_length>\d+)\)', re.IGNORECASE):
        'models.IntegerField',
    re.compile( r'datetime', re.IGNORECASE):
        'models.DateTimeField',
}

def table_classname(table):
    words = [ w.capitalize() for w in table.split('_') ]
    return ''.join(words)

cursor.execute('SHOW TABLES')
for table in [ i.values()[0] for i in cursor.fetchall() ]:
    cursor.execute('DESCRIBE `%s`' % table)

    class_model = []
    for row in cursor.fetchall():
        args = []
        if row['Null'] == 'YES':        args.append('blank=True')
        if row['Default']:              args.append("default='%s'" % row['Default'])
        if row['Key'] == 'PRI':         args.append('primary_key=True')
        if row['Key'] == 'UNI':         args.append('unique=True')

        if '-' in row['Field']:
            args.append("db_column='%s'" % row['Field'])
            row['Field'] = row['Field'].replace('-', '_')

        field_type = None
        for pat in patterns:
            m = pat.match(row['Type'])
            if m:
                d = m.groupdict()
                if 'choices' in d:
                    args.append('max_length=%s' % max_len(d['choices']))
                    args.append('choices=%s' % str(get_enum_tuple(d['choices'])) )
                    del d['choices']

                if d:
                    for k in d:
                        args.append( '%s=%s' % (k, d[k]) )

                field_type = patterns[pat]
                break

        args = ', '.join(args)
        class_model.append( '{field} = {field_type}({args})'.format(field=row['Field'], field_type=field_type, args=args) )

    print 'class %s(models.Model):' % table_classname(table)
    for s in class_model:
        print '\t%s' % s

    print '\n\tclass Meta:'
    print "\t\tdb_table = '%s'\n" % table 
```

# javascript - 使用 Javascript 或 JQuery 更改网格内按钮的文本并禁用列中的其他按钮

> ID：10304126
> 
> 赞同：0
> 
> 时间：2012-04-24T18:46:43.753
> 
> 标签：javascript, jquery, asp.net, html, client-side

我在模板字段中有一个网格和按钮，如下所示：

```
<asp:TemplateField>
<ItemTemplate>
    <input type="button" value="Map Route" onclick="MapRoute('<%# ((GridViewRow) Container).RowIndex %>')" />
</ItemTemplate>
</asp:TemplateField> 
```

当用户单击它时，我想将按钮的文本从“Map Route”更改为“Unmap Route”，并且我还想使用**Javascript**或**JQuery禁用此列其他行中的所有按钮**

编辑：如果以上是不可能的，那么只改变被点击的按钮的文本。

编辑2：**HTML**

```
 <table cellspacing="0" cellpadding="3" rules="all" border="1" id="gvRider" style="border-color: White;
    border-width: 1px; border-style: Solid; width: 100%; border-collapse: collapse;">
    <tr class="gridtitlebg" align="left" style="height: 35px;">
        <th align="center" scope="col">
            #
        </th>
        <th scope="col">
            Dist From Start (mi)
        </th>
        <th scope="col">
            Start
        </th>
        <th scope="col">
            Dist From End (mi)
        </th>
        <th scope="col">
            Return
        </th>
        <th scope="col">
            Commuting Days
        </th>
        <th scope="col">
            Male/Female
        </th>
        <th scope="col">
            Smoker/Non-Smoker
        </th>
        <th scope="col">
            Drive/Non-Drive
        </th>
        <th scope="col">
            Bike-Buddy
        </th>
        <th scope="col">
            Email
        </th>
        <th scope="col" style="width: 30px;">
            Map Route
        </th>
    </tr>
    <tr class="grdtext1" align="left" style="background-color: White; height: 30px;">
        <td align="center" style="width: 20px;">
            1
        </td>
        <td align="center" style="width: 70px;">
            0.73
        </td>
        <td align="center" style="width: 50px;">
            08:20 AM
        </td>
        <td align="center" style="width: 70px;">
            &nbsp;
        </td>
        <td align="center" style="width: 50px;">
            07:05 PM
        </td>
        <td align="left" style="width: 110px;">
            <table cellspacing="9" border="0" style="width: 100%;">
                <tr>
                    <td>
                        <img src="../Images/icons/days/mon.png" style="border-width: 0px;" />
                    </td>
                    <td>
                        <img src="../Images/icons/days/th.png" style="border-width: 0px;" />
                    </td>
                    <td>
                        <img src="../Images/icons/days/wed.png" style="border-width: 0px;" />
                    </td>
                    <td>
                        <img src="../Images/icons/days/thu.png" style="border-width: 0px;" />
                    </td>
                    <td>
                        <img src="../Images/icons/days/fri.png" style="border-width: 0px;" />
                    </td>
                </tr>
            </table>
        </td>
        <td align="center" style="width: 70px;">
            <table cellspacing="9" border="0" style="width: 78%;">
                <tr>
                    <td>
                        <img title="Male" src="../Images/icons/filter/icon_male.png" style="border-width: 0px;" />
                    </td>
                </tr>
            </table>
        </td>
        <td align="center" style="width: 70px;">
            <table cellspacing="9" border="0" style="width: 78%;">
                <tr>
                    <td>
                        <img title="Smoker" src="../Images/icons/filter/icon_smoker.png" style="border-width: 0px;" />
                    </td>
                </tr>
            </table>
        </td>
        <td align="center" style="width: 70px;">
            <table cellspacing="9" border="0" style="width: 78%;">
                <tr>
                    <td>
                        <img title="Not-Driver" src="../Images/icons/filter/noncar_icon.png" style="border-width: 0px;" />
                    </td>
                </tr>
            </table>
        </td>
        <td align="center" style="width: 70px;">
            <table cellspacing="9" border="0" style="width: 78%;">
                <tr>
                    <td>
                        <img title="Bike-buddy" src="../Images/icons/filter/icon_bike.png" style="border-width: 0px;" />
                    </td>
                </tr>
            </table>
        </td>
        <td align="center" style="width: 54px;">
            <input type="image" name="gvRider$ctl02$imgBtnEmail" id="gvRider_ctl02_imgBtnEmail"
                title="Send Email" src="../App_Themes/default/images/sendemail.png" style="border-width: 0px;" />
        </td>
        <td>
            <input type="button" value="Map Route" onclick="MapRoute('0')" />
        </td>
    </tr>
    <tr class="grdtext1" align="left" style="background-color: #D2E8F9; height: 30px;">
        <td align="center" style="width: 20px;">
            2
        </td>
        <td align="center" style="width: 70px;">
            0.94
        </td>
        <td align="center" style="width: 50px;">
            05:25 AM
        </td>
        <td align="center" style="width: 70px;">
            1.05
        </td>
        <td align="center" style="width: 50px;">
            02:20 PM
        </td>
        <td align="left" style="width: 110px;">
            <table cellspacing="9" border="0" style="width: 100%;">
                <tr>
                    <td>
                        <img src="../Images/icons/days/mon.png" style="border-width: 0px;" />
                    </td>
                    <td>
                        <img src="../Images/icons/days/th.png" style="border-width: 0px;" />
                    </td>
                    <td>
                        <img src="../Images/icons/days/wed.png" style="border-width: 0px;" />
                    </td>
                    <td>
                        <img src="../Images/icons/days/thu.png" style="border-width: 0px;" />
                    </td>
                    <td>
                        <img src="../Images/icons/days/fri.png" style="border-width: 0px;" />
                    </td>
                </tr>
            </table>
        </td>
        <td align="center" style="width: 70px;">
            <table cellspacing="9" border="0" style="width: 78%;">
                <tr>
                    <td>
                        <img title="Male" src="../Images/icons/filter/icon_male.png" style="border-width: 0px;" />
                    </td>
                </tr>
            </table>
        </td>
        <td align="center" style="width: 70px;">
            <table cellspacing="9" border="0" style="width: 78%;">
                <tr>
                    <td>
                        <img title="Non-smoker" src="../Images/icons/filter/icon_nonsmoker.png" style="border-width: 0px;" />
                    </td>
                </tr>
            </table>
        </td>
        <td align="center" style="width: 70px;">
            <table cellspacing="9" border="0" style="width: 78%;">
                <tr>
                    <td>
                        <img title="Driver" src="../Images/icons/filter/icon_carpool.png" style="border-width: 0px;" />
                    </td>
                </tr>
            </table>
        </td>
        <td align="center" style="width: 70px;">
            <table cellspacing="9" border="0" style="width: 78%;">
                <tr>
                    <td>
                        <img title="Bike-buddy" src="../Images/icons/filter/icon_bike.png" style="border-width: 0px;" />
                    </td>
                </tr>
            </table>
        </td>
        <td align="center" style="width: 54px;">
            <input type="image" name="gvRider$ctl03$imgBtnEmail" id="gvRider_ctl03_imgBtnEmail"
                title="Send Email" src="../App_Themes/default/images/sendemail.png" style="border-width: 0px;" />
        </td>
        <td>
            <input type="button" value="Map Route" onclick="MapRoute('1')" />
        </td>
    </tr>

</table> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:18:43.027

您可以使用 CSS 为要隐藏的按钮元素创建一个类，然后让 JQuery 函数将这些元素切换到隐藏它们的另一个类。

```
$("#button_id").click(function () {

            $(".buttons_to_hide_class").toggleClass("hidden");
            $(this).text() = "UnMap Route"; // Not sure if this is right. The rest should be.

            return false;

        }); 
```

CSS：

```
button.buttons_to_hide_class{
//Fill in how you want them to look
}

button.buttons_to_hide_class.hidden{
display:none;
visibility:hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:34:05.480

这似乎对我很有效：

```
<asp:TemplateField>
<ItemTemplate>
    <input type="button" value="Map Route" onclick="MapRoute('<%# ((GridViewRow) Container).RowIndex %>')" class="map-button" />
</ItemTemplate>
</asp:TemplateField> 
```

**注意：**在类属性中添加了“地图按钮”。

```
<script type="text/javascript">
var mapOpen = false;

$(function () {
    $('.map-button').on('click', function () {
        if(mapOpen) {
            $('.map-button').removeAttr('disabled');
            $(this).val('Map Route');      
            mapOpen = false;
        }
        else {   
            $('.map-button').attr('disabled', 'disabled');
            $(this).val('Unmap Route').removeAttr('disabled');
            mapOpen = true;
        }
    });
});​
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:39:31.360

看看这个 jsFiddle。 [http://jsfiddle.net/bngHu/](http://jsfiddle.net/bngHu/)

我将其设置为禁用与单击的按钮相同的行和列中的所有按钮（包括按钮本身）。

HTML...

```
<table>
<tr>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
</tr>
<tr>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
</tr>
<tr>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
</tr>
<tr>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
</tr>
<tr>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
    <td>
        <input class="map-button" type="button" value="Map Route">
    </td>
</tr>
</table> 
```

​​​​​​​​​

```
$(document).ready(function(){
    $('.map-button').click(function(e){
        $(this).val('Unmap Route');

        $(this).parent().parent().find(".map-button").attr('disabled', 'disabled');

        var col = $(this).parent().parent().children().index($(this).parent());

        $.each($('tr'), function() {
            $(this).find('td:nth(' + col + ')').find('.map-button').attr('disabled', 'disabled');
        });

    });
});​ 
```

# javascript - 字符串中多次出现

> ID：10304127
> 
> 赞同：1
> 
> 时间：2012-04-24T18:46:46.280
> 
> 标签：javascript, regex

我有一个字符串，我想在其中替换一个我无法实现的事件，下面是代码

```
var code="user_1/has some text and user_1? also has some text";
newcode=code.replace(/user_1//g,'_'); 
```

还有一件事如果我必须从另一个字符串替换一个字符串怎么办？例子。

```
var replacestring="user_1";
var code="user_1/some value here for some user";
var newcode=code.replace(/+replacestring+/g,'_'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:48:10.840

`/`使用正则表达式转义`\`

```
newcode=code.replace(/user_1\//g,'_'); 
```

对于您的评论

> @Vega我还有另一个困惑。我可以使用字符串中的值而不是 user_1/ 进行替换吗？语法是什么？

您可以像下面这样初始化 RegEx 对象，

```
var userName = 'user_1/';
var newcode = code.replace(new RegExp(userName, 'g'), '_'); 
```

[阅读更多关于正则表达式](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:49:00.803

`/`是一个特殊的字符，因此需要`\`在它之前转义：

```
var code = "user_1/has some text and user_1? also has some text";
var newcode = code.replace(/user_1\//g, '_');
alert(newcode);​ 
```

[**现场演示**](http://jsfiddle.net/R4kM7/1)

如果要替换 all `user_1`，请使用以下命令：

```
var code = "user_1/has some text and user_1? also has some text";
var newcode = code.replace(/user_1/g, '_');
alert(newcode);​ 
```

**[现场演示](http://jsfiddle.net/R4kM7/)**

# sql - 如何防止tsql中的欺骗？

> ID：10304129
> 
> 赞同：1
> 
> 时间：2012-04-24T18:46:52.987
> 
> 标签：sql, sql-server-2008, tsql

我使用以下查询加入了两个表。它给了我重复，因为 Table02 有重复。我需要防止上当。

笔记：

1.  我无法更改我的选择语句中列的顺序/顺序。
2.  我不能在 t1.NumberID 上使用 distinct。

    SELECT t1.NumberID, t1.Copies, t1.NameStreet FROM Table01 t1 JOIN Table02 t2 on t2.Name = LEFT(t1.NameStreet, Len(t2.Name)) order by t1.NumberID, t1.Namestreet

**表01**

```
ID  NumberID    Copies      NameStreet
1   11111111    2           Julian Assange 100 Majestic street, Toronto
2   22222222    1           Brad Pit 200 Loaden Blvd, Toronto
3   11111111    0           Allen Sunderland 9, Unit 2, Janet Street, BC 
```

表02

```
ID  Name
1   Julian Assange
2   Allen Sunderland 
3   Julian Assange 
```

结果：-

```
1   11111111    2           Julian Assange 100 Majestic street, Toronto
3   11111111    0           Allen Sunderland 9, Unit 2, Janet Street, BC
1   11111111    2           Julian Assange 100 Majestic street, Toronto 
```

预期成绩：-

```
1   11111111    2           Julian Assange 100 Majestic street, Toronto
3   11111111    0           Allen Sunderland 9, Unit 2, Janet Street, BC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:49:42.347

将此添加到查询的末尾：

```
GROUP BY  t1.NumberID, t1.Copies, t1.NameStreet 
```

# css - 无法让背景图像占据全高

> ID：10304134
> 
> 赞同：0
> 
> 时间：2012-04-24T18:47:10.220
> 
> 标签：css, background-image

我有一个背景图像，但它占用了文本的高度而不是图像，我最终会做一个 text-indent: -99999px 但我已经尝试了每个 CSS 属性来让整个图像出现。谁能帮忙，我的网站是：http: [//yesiamshow.biz/](http://yesiamshow.biz/)这是幻灯片下的按钮，你可以看到我有以前拉的图像，但它没有显示整个高度。我所有的 CSS 属性的高度都是 60 像素，但什么也没有发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:08:00.933

该按钮实际上是正确的高度，但您的`.window`班级正在切断它。看起来您可以将其更改为 410px，它将修复：

```
.window {
   height:410px;
} 
```

您还应该给按钮一个`display:block`或内联块，因为您给它一个宽度和高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:12:50.003

我快速查看了您的 CSS，您似乎正在使用 span 元素包装您的链接。您仍然可以这样做，但是您需要确保将所有样式应用于链接。

例子。如果你的 HTML 是这样的。

```
<a span="prev_btn"><a href="#prev">Previous</a></span> 
```

你必须像这样设计风格。

```
span.prev_btn a { } 
```

它应该类似于以下内容。

```
span.prev_btn a {
 background: [your url];
 display: block;
 height: [height];
 width: [width];
 text-indent: -9999px;
} 
```

希望有帮助。

# linq - Linq 从存储过程和内联查询中删除行

> ID：10304136
> 
> 赞同：1
> 
> 时间：2012-04-24T18:47:18.150
> 
> 标签：linq, linq-to-sql

有人看到 linq 从查询中删除行的位置吗？

如果我查询数据库

从 staging_flowrates 中选择 *，其中 flowdate 在 '4/16/2012' 和 '4-22-2012' 之间

我得到了 29 条记录，这是我所期望的。

如果我在 linq 中调用这个过程，我会得到 25 条记录。我已经做了很多不同的方法，它们都返回小于 29 的结果

```
List<weekly_invoice_dataResult> meterdata = flowRateDB.weekly_invoice_data(173,    date.AddDays(-8), date.AddDays(-2)).ToList();} 
```

或者

```
var meters = from c in flowRateDB.staging_flowrates
             where c.FlowDate >= date.AddDays(-8) && c.FlowDate <= date.AddDays(-2)
             select c; 
```

所有这些都返回 25 行，但如果我回到 ADO 并进行计数，我会得到 29。我使用 linq 大约 6 年了，我从来没有注意到这一点。

有任何想法吗？

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:35:14.380

我建议您启动 SQL Server Profiler 并捕获执行的确切 SQL。获取此 SQL 并在 SSMS 中自己执行它。我的猜测是执行的查询在某种程度上是错误的，您将能够看到为什么会这样。

有一件事是肯定的：LINQ 不会删除行。原因是执行的 SQL。

# javascript - 向 DOM 添加列表项？

> ID：10304137
> 
> 赞同：1
> 
> 时间：2012-04-24T18:47:22.903
> 
> 标签：javascript, dom

```
var localPlaceholder = document.getElementById('localFiles');
                for (i=0; i<entries.length; i++) {
                        var newList = document.createElement( "li" );
                        newList.nodeValue = entries[i].name;
                        localPlacholder.appendChild(newList);
                } 
```

这有道理吗？出于某种原因，我没有看到任何添加的内容 - 尽管 entries[i].name 如果我使用警报框调试它会返回值。

编辑：localFiles 是一个 ul

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:56:05.787

你可以简单地：

```
var localPlaceholder = document.getElementById('localFiles');
var newList = '';

for (i = 0; i < entries.length; i++) {
    newList += '<li>' + entries[i].name + '</li>';
}

localPlaceholder.innerHTML += newList; 
```

更少的 DOM 操作实例。

编辑：考虑[http://jsfiddle.net/matthewbj/ZyU8h/](http://jsfiddle.net/matthewbj/ZyU8h/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:50:36.390

代替：

```
newList.nodeValue = entries[i].name; 
```

尝试：

```
newList.innerHTML = entries[i].name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:07:09.023

除非它是文本节点（LI 不是文本节点），否则不能使用方法 nodeValue 直接将文本添加到 html 元素。您需要创建一个文本节点，然后将其添加到 html 元素，否则，您可以简单地使用 innerHTML。

[http://reference.sitepoint.com/javascript/Node/nodeValue](http://reference.sitepoint.com/javascript/Node/nodeValue)

你可以尝试改变

```
newList.nodeValue = entries[i].name; 
```

至

```
newList.appendChild(document.createTextNode(entries[i].name); 
```

# javascript - 相机无法在 Android 虚拟设备上运行

> ID：10304140
> 
> 赞同：0
> 
> 时间：2012-04-24T18:47:29.420
> 
> 标签：javascript, android, cordova, android-camera

我正在使用[PhoneGap](http://en.wikipedia.org/wiki/PhoneGap)开发一个 Android 基础应用程序，我想使用相机捕捉图像并存储它。但是当我启动捕获时，您会看到此图像显示相机应用程序已毫无例外地停止。

这是屏幕截图：

[https://plus.google.com/photos/113541644376045653443/albums/5735040545186264481/5735038652586673826](https://plus.google.com/photos/113541644376045653443/albums/5735040545186264481/5735038652586673826)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:52:02.087

您需要确保添加相机支持硬件功能。

打开 AVD 管理器并编辑您的设备。然后在硬件下单击新建并添加相机支持。

![在此处输入图像描述](../Images/0dcaecfae494037a1347993480dff134.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:11:42.533

您的功能可能有问题。在这里，我发布了一个功能。我希望它会奏效。

```
function capturePhoto()
{
    //alert("CapturePhoto");
    // Take a picture using the camera device and retrieve the image as a Base64-encoded string.
    navigator.camera.getPicture(onPhotoDataSuccess,
                                function(ex){alert("Camera Error!");},
                                { quality : 30,
                                  destinationType: destinationType.DATA_URL });
} 
```

# sql - 从表中选择不在列表 SQL 中的值

> ID：10304146
> 
> 赞同：11
> 
> 时间：2012-04-24T18:47:41.487
> 
> 标签：sql

如果我输入：

```
SELECT name FROM table WHERE name NOT IN ('Test1','Test2','Test3'); 
```

我可以从表中获取不在列表中的条目。我想做相反的事情：从列表中获取不在表中的值。例如，如果表有一个名为 name 的列，其值为“Test1”和“Test3”，我想将其与 ('Test1','Test2','Test3') 进行比较并返回 Test2。或者作为另一个示例，如果表为空，则返回列表中的所有内容：Test1、Test2 和 Test3。

有没有办法在不创建包含列表中所有值的新表的情况下做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T18:58:11.477

根据你有多少价值，你可以做几个联合。

见：[http ://www.sqlfiddle.com/#!5/0e42f/1](http://www.sqlfiddle.com/#!5/0e42f/1)

```
select * from (
  select 'Test 1' thename union
  select 'Test 2' union 
  select 'Test 3'
)
where thename not in (select name from foo) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T19:04:22.397

我通常使用`SELECT 'FOO' AS COL UNION SELECT 'BAR'`etc，然后使用左连接和检查的标准习语`NULL`来查找缺失的元素。

```
CREATE TABLE #YourTable(
name nvarchar(50)
)

insert into #YourTable (name) values ('Test1'), ('Test3')

-- ALL
select * from #YourTable

--MISSING
select t1.* from (
  select 'Test1' testName
  union select 'Test2'
  union select 'Test3') as t1
  left outer join #YourTable yt on t1.testName = yt.name
  where yt.name is null

DROP TABLE #YourTable 
```

给出输出

```
name
--------------------------------------------------
Test1
Test3

(2 row(s) affected)

testName
--------
Test2

(1 row(s) affected) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-04T10:41:59.573

```
Select a.value from (
SELECT 'testvalue' value UNION
SELECT 'testvalue2' value UNION
SELECT 'testvalue3' value UNION
SELECT 'testvalue4' value UNION
) a
left outer join othertable b
on a.value=b.value
where b.value is null 
```

这非常适合我没有临时表的问题#

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T19:00:07.827

假设“othertable”持有有问题的表......

```
 select a.value from 
    (select 'test1' value
     union
     select 'test2' value
     union 
     select 'test3' value) a
       left outer join othertable b
         on a.value=b.value
      where b.value is null 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-02T06:22:18.683

在 SQL Server 中，以下查询运行良好。

```
SELECT v.val FROM (VALUES 
    ('A'), 
    ('B'), 
    ('C'), 
    ('D'), 
    ('E') 
) v (val)
LEFT JOIN dbo.TABLE_NAME t ON t.COLUMN_NAME = v.val
WHERE t.COLUMN_NAME IS NULL; 
```

可以找到以下输出：

```
val
-------
A
B
C
D 
```

# c# - Live SDK - 尝试在没有 SignInButton 的情况下登录

> ID：10304150
> 
> 赞同：15
> 
> 时间：2012-04-24T18:47:57.877
> 
> 标签：c#, silverlight, windows-phone-7, sdk, live

有什么方法可以登录到应用程序（Silverlight，WP7 可以）而无需单击登录按钮。

我想动态登录我，例如：当你启动应用程序时，我想登录我。如何在不使用按钮的情况下做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-24T19:01:40.757

我想出了怎么做，所以我决定分享：

```
using System.Windows;
using Microsoft.Live;

public class LiveLogin
{

    private static readonly string[] scopes = 
        new string[] { 
            "wl.signin", 
            "wl.basic", 
            "wl.calendars", 
            "wl.calendars_update", 
            "wl.contacts_calendars", 
            "wl.events_create" };

    private LiveAuthClient authClient;
    private LiveConnectClient liveClient;

    public LiveLogin()
    {
        this.authClient = new LiveAuthClient("**your client id here**");
        this.authClient.InitializeCompleted += authClient_InitializeCompleted;
        this.authClient.InitializeAsync(scopes);
    }

    private void authClient_InitializeCompleted(object sender, LoginCompletedEventArgs e)
    {
        if (e.Status == LiveConnectSessionStatus.Connected)
        {
            this.liveClient = new LiveConnectClient(e.Session);
        }
        else
        {
            this.authClient.LoginCompleted += authClient_LoginCompleted;
            this.authClient.LoginAsync(scopes);
        }
    }

    private void authClient_LoginCompleted(object sender, LoginCompletedEventArgs e)
    {
        if (e.Status == LiveConnectSessionStatus.Connected)
        {
            this.liveClient = new LiveConnectClient(e.Session);
            MessageBox.Show("Signed");
        }
        else
        {
            MessageBox.Show("Failed!");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-07T08:42:00.673

很好的答案理查德。这真的很有帮助。

我注意到有人抱怨他们找不到 InitializedCompleted 事件的一些评论。如果您在 .Net 4.5 中进行编码，那么您需要遵循异步方法的 async/await 模式。上面的类看起来像这样：

```
public class LiveLogin
    {
        private static readonly string[] Scopes =
            new[]
                {
                    "wl.signin",
                    "wl.basic",
                    "wl.calendars",
                    "wl.calendars_update",
                    "wl.contacts_calendars",
                    "wl.events_create"
                };

        private LiveAuthClient _authClient;

        public async Task<LiveConnectClient> Login()
        {
            _authClient = new LiveAuthClient("**your client id here**");

            LiveLoginResult result = await _authClient.InitializeAsync(Scopes);
            if (result.Status == LiveConnectSessionStatus.Connected)
            {
                return new LiveConnectClient(result.Session);
            }
            result = await _authClient.LoginAsync(Scopes);
            if (result.Status == LiveConnectSessionStatus.Connected)
            {
                return new LiveConnectClient(result.Session);
            }
            return null;
        }

    } 
```

MS在[这里有一个异步等待入门](http://msdn.microsoft.com/en-gb/vstudio/jj573641.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T05:51:41.413

感谢代码示例 - 帮助我想出了 Windows Phone 8 等的代码更新版本 :)

* * *

```
using System.Windows;
using Microsoft.Live;

public class LiveLogin : PhoneApplicationPage
{
    private static readonly string[] _scopes =
        new[] { 
        "wl.signin", 
        "wl.basic", 
        "wl.calendars", 
        "wl.calendars_update", 
        "wl.contacts_calendars", 
        "wl.events_create" };

    private LiveConnectClient _connection;
    private LiveLoginResult _login;

    public LiveLogin()
    {
        this.Loaded += this.OnLoaded;
    }

    private async void OnLoaded(object sender, RoutedEventArgs routedEventArgs)
    {
        //----------------------------------------------------------------------
        // Login to skydrive
        //----------------------------------------------------------------------
        await SkydriveLogin();
    }

    private async Task SkydriveLogin()
    {
        try
        {
            //----------------------------------------------------------------------
            // Initialize our auth client with the client Id for our specific application
            //----------------------------------------------------------------------
            LiveAuthClient authClient = new LiveAuthClient("**your client id here**");

            //----------------------------------------------------------------------
            // Using InitializeAsync we can check to see if we already have an connected session
            //----------------------------------------------------------------------
            _login = await authClient.InitializeAsync(_scopes);

            //----------------------------------------------------------------------
            // If not connected, bring up the login screen on the device
            //----------------------------------------------------------------------
            if (_login.Status != LiveConnectSessionStatus.Connected)
            {
                _login = await authClient.LoginAsync(_scopes);
            }

            //----------------------------------------------------------------------
            // Initialize our connection client with our login result
            //----------------------------------------------------------------------
            _connection = new LiveConnectClient(_login.Session);
        }
        catch (Exception ex)
        {
            //TODO: Add connection specific exception handling
        }
    }
} 
```

# php - 最大连接数（Debian、phpmyadmin、apache）

> ID：10304156
> 
> 赞同：0
> 
> 时间：2012-04-24T18:48:20.000
> 
> 标签：php, mysql, apache, debian, vps

我刚刚上线了一个在线游戏，一切都很好，直到大约 2000 名玩家决定同时玩。现在，从服务器获取数据时，一切都运行得很慢。我每秒大约有 500 个查询。我有一个带 debian 的 VPS，并使用 phpmyadmin。

我做了一些搜索，一个听起来合理的解决方案是我没有足够的“最大连接数”。

如何检查我现在有多少连接，以及如何增加连接？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:11:07.070

编辑 php.ini max_connections ，以允许更多连接到 mysql .. 你还应该检查是什么消耗了你的连接和资源 .. 你也可以考虑缓存或升级 vps ram ..

# objective-c - 如何让这张图片显示在我的电子邮件正文中？

> ID：10304159
> 
> 赞同：7
> 
> 时间：2012-04-24T18:48:34.583
> 
> 标签：objective-c, ios

我有这段代码，它应该将 HTML 文件附加到电子邮件中，并在电子邮件正文中显示 HTML 文件的内容。HTML 文件中引用了一个图像 (reading.png)，每隔一行显示。但是，它不会显示在电子邮件正文中。我该怎么做才能让它显示？

```
if ([MFMailComposeViewController canSendMail])  {

    MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
    mailer.mailComposeDelegate = self;  //  set delegate to notify us what's happen'in

    [mailer setSubject:[NSString stringWithFormat: @"Site Readings for: %@", gSiteID.globalSiteID]];

    //  add the image for the HTML
    UIImage *toolImage = [UIImage imageNamed:@"reading.png"];
    NSData *imageData = UIImagePNGRepresentation(toolImage);
    [mailer addAttachmentData:imageData mimeType:@"image/png" fileName:@"reading.png"]; 

    // attach file
    NSString *file = [[NSBundle mainBundle] pathForResource:@"Surveyor" ofType:@"txt"];
    NSData *surveyorTxt= [NSData dataWithContentsOfFile: file];
    [mailer addAttachmentData: surveyorTxt mimeType:@"text/html" fileName: @"Surveyor.txt"];

    //  display the file in the body of the email
    NSString *reportBody;
    reportBody = [[NSString alloc] initWithData:databuffer encoding:NSASCIIStringEncoding];
    [mailer setMessageBody: reportBody isHTML:true];  //  indicate the body is html

    [self presentModalViewController: mailer animated:TRUE]; 
```

这是要显示的 HTML：

```
<html>
<head>
<link rel='stylesheet' type='text/css' href='default.css'/>
</head>
 <body>
 STA:&nbsp;TBM "J" &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Elev:&nbsp;19.76<br>Desc:&nbsp;USGS Test Site
 <div>
 <table border class="boldtable">
 <tr BGCOLOR="ADDAFE">
 <th>STA&nbsp;</th>
 <th>BS&nbsp;</th>
 <th>HI&nbsp;</th>
 <th>FS&nbsp;</th>
 <th>ELEV&nbsp;</th>
 <th>Desc</th>
 </tr>
 <p><tr>
 <td> TBM "J"</td>
 <td></td><td></td><td></td>
 <td>19.76</td>
 <td>USGS Test Site</td>
 <p><tr
 ><td><img src="reading.png" align=center></td><td>3.14</td><td valign="middle">22.90</td> 
```

更新：我认为我不够清楚......在传出消息中显示的 HTML 中，应该有一个图像出现在整个 HTML 中。我将图像附加到消息中没有问题，但它没有出现在我想要的 HTML 中。很明显，将图像附加到消息中是行不通的……（我认为可以）。

HTH...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T19:19:18.833

我同意base 64的答案。这是我使用通用 NSData base 64 类别的解决方案。

```
static NSString *EmailBody(NSString *description, UIImage *image)
{
    NSString *format = @"<html>"
    @"<body>"
    @"<p>%@</p>"
    @"<p><b><img src='data:image/png;base64,%@'></b></p>"
    @"</body>"
    @"</html>";
    NSData *imageData = UIImagePNGRepresentation(image);    
    return [NSString stringWithFormat:format, description, [imageData base64EncodedString]];
} 
```

* * *

只是为了澄清事情，我将使用您的示例。

```
<html>
<head>
<link rel='stylesheet' type='text/css' href='default.css'/>
</head>
 <body>
 STA:&nbsp;TBM "J" &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Elev:&nbsp;19.76<br>Desc:&nbsp;USGS Test Site
 <div>
 <table border class="boldtable">
 <tr BGCOLOR="ADDAFE">
 <th>STA&nbsp;</th>
 <th>BS&nbsp;</th>
 <th>HI&nbsp;</th>
 <th>FS&nbsp;</th>
 <th>ELEV&nbsp;</th>
 <th>Desc</th>
 </tr>
 <p><tr>
 <td> TBM "J"</td>
 <td></td><td></td><td></td>
 <td>19.76</td>
 <td>USGS Test Site</td>
 <p><tr
 ><td><img src="data:image/png;base64,##########" align=center></td><td>3.14</td><td valign="middle">22.90</td> 
```

其中########## 被base 64 编码后的reading.png 数据替换。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T18:54:37.060

也许你可以使用base64编码的数据：

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA
AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO
9TXL0Y4OHwAAAABJRU5ErkJggg==" align=center alt="reading"> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T18:52:07.230

对于电子邮件中的图片加载，图片标签中必须有完整的 url，并且图片应该位于服务器上的某个位置，以便可以加载：

`<img src="http://www.mydomain.com/reading.png" align=center>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T20:51:40.620

您必须输入 NSString stringWithFormat，然后将 .png 插入 NSString。我在 Xcode 3 中尝试了你的代码，按照我的指示做了，它奏效了。希望能帮助到你！

# database - 将实体映射到 ASPNETDB.MDF MVC3

> ID：10304162
> 
> 赞同：0
> 
> 时间：2012-04-24T18:48:42.120
> 
> 标签：database, asp.net-mvc-3, entity-framework

为了避免拥有两个数据库，我已将我的实体映射到 ASPNETDB.MDF，它是为成员资格自动生成的。我正在关注这篇文章，以便将我的实体映射到现有数据库：[http ://weblogs.asp.net/scottgu/archive/2010/08/03/using-ef-code-first-with-an-existing-database .aspx](http://weblogs.asp.net/scottgu/archive/2010/08/03/using-ef-code-first-with-an-existing-database.aspx) 据我了解，我需要做的只是更改上下文类的数据库名称，如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;
using UniversityApp.Models;
using System.Data.Entity.ModelConfiguration.Conventions;

namespace UniversityApp.DAL
{
        public class ASPNETDB : DbContext
        {
            public DbSet<User> Users { get; set; }
            public DbSet<Review> Reviews { get; set; }
            public DbSet<Movie> Movies { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        }

    }
} 
```

我也改变了这样的连接字符串：

```
<connectionStrings>
    <add name="ApplicationServices"    connectionString="data source=.\SQLEXPRESS Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true"     providerName="System.Data.SqlClient" />
<add name="MovieContext" connectionString="Data Source=|DataDirectory|aspnetdb.mdf"     providerName="System.Data.SqlServerCe.4.0"/>
</connectionStrings> 
```

一切似乎都工作正常（旧数据库的方法，读取和写入数据库，甚至初始化数据）。但是当我打开到 ASPNETDB.mdf 的连接时，我仍然看不到我的表。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T03:54:40.643

我认为您将在这里遇到更多问题，因此总的来说这可能不是目前最好的方法。话虽如此，为了回答您的实际问题，DbContext 正在寻找与您的上下文同名的连接字符串。也就是说，它正在寻找一个名为“ASPNETDB”的连接字符串。由于您的连接字符串被命名为“ApplicationServices”和“MovieContext”，因此 DbContext 没有找到其中任何一个。

要使 DbContext 使用特定的连接字符串，只需将该连接字符串传递给 DbContext 构造函数。例如：

```
public class ASPNETDB : DbContext 
{
    public ASPNETDB()
     : base("name=ApplicationServices")
    {
    }
    ...
} 
```

一旦你得到这个工作，你可能想要研究使用迁移在已经存在的数据库中创建表。

# java - SharedPreferences 不读取数据

> ID：10304163
> 
> 赞同：1
> 
> 时间：2012-04-24T18:48:44.100
> 
> 标签：java, android, sharedpreferences, preferences

我保存了用户密码和用户名的两部分数据以供以后使用的数据和字母的随机组合，然后检查应用程序何时再次执行以避免再次登录屏幕。

我昨天有这个工作，出于某种原因，我希望我在添加功能时放错了代码，现在无法让它再次工作，我已经尝试了一整天来修复它，但我不能。

EDIT1：出于某种原因，它转到“CheckPrefs”方法的 else 语句，**我无法理解。**

EDIT2：它可以很好地保存首选项并达到目的，但是它就是无法读取它。

代码：

```
public static final String PREFS_NAME = "MyPregs";
    public static final String PREFS_CHECK = "CheckSignedIn";
    public static final String UID ="";
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        CheckPrefs();

        // Login button clicked
        ok = (Button) findViewById(R.id.btn_login);
        ok.setOnClickListener(this);

        result = (TextView) findViewById(R.id.lbl_result);

    } 
    private void CheckPrefs() {
        // TODO Auto-generated method stub
        //checks to see if the user has signed in before if they have it gets there data from SharedPreferences and checks against our database via HttpPost.
        SharedPreferences settings = getSharedPreferences(PREFS_CHECK, 0);
        String SCheck1 = settings.getString("key4", null);
        if (SCheck1 != null  && equals(UID)) {
            Intent c = new Intent(this, CheckUserInfo.class);
            startActivity(c);   

        } else {

        }

    }
    //create bracket.

    public void postLoginData() {

        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();

        /* login.php returns true if username and password is equal to saranga */
        HttpPost httppost = new HttpPost("http://gta5news.com/login.php");

        try {
            // Add user name and password
            uname = (EditText) findViewById(R.id.txt_username);
            String username = uname.getText().toString();

            pword = (EditText) findViewById(R.id.txt_password);
            String password = pword.getText().toString();

            SharedPreferences signedin = getSharedPreferences(PREFS_CHECK, 0);
            SharedPreferences.Editor editor1 = signedin.edit();
            editor1.putString("key4", UID);
            editor1.commit();

            SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
            SharedPreferences.Editor editor = settings.edit();
            editor.putString("key1", username);
            editor.putString("key2", password);
            editor.commit();

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("username", username));
            nameValuePairs.add(new BasicNameValuePair("password", password));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request
            Log.w("HttpPost", "Execute HTTP Post Request");
            HttpResponse response = httpclient.execute(httppost);

            String str = inputStreamToString(response.getEntity().getContent())
                    .toString();
            Log.w("HttpPost", str);

            if (str.toString().equalsIgnoreCase("true")) {
                Log.w("HttpPost", "TRUE");
                result.setText("Login successful");
                try {Thread.sleep(250);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                Intent login = new Intent(LogIn.this, ChatService.class);
                startActivity(login);

            } else {
                Log.w("HttpPost", "FALSE");
                result.setText(str);
            }

        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private StringBuilder inputStreamToString(InputStream is) {
        String line = "";
        StringBuilder total = new StringBuilder();
        // Wrap a BufferedReader around the InputStream
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));
        // Read response until the end
        try {
            while ((line = rd.readLine()) != null) {
                total.append(line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        // Return full string
        return total;
    }

    public void onClick(View view) {
        if (view == ok) {

            postLoginData();
            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(pword.getWindowToken(), 0);
        }
        // Click end
    }
    // if statement
}

// class ends here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:55:07.873

需要查看您将首选项保存在哪里，以便我们将其与您如何称呼您的首选项相匹配……但是，这是一个错字吗？

```
public static final String PREFS_NAME = "MyPregs"; 
```

Should it be "MyPrefs" instead of "MyPregs"?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:55:12.507

你有

```
if (SCheck1 != null  && equals(UID)) 
```

但你是不是想说

```
if (SCheck1 != null  && !SCheck.equals(UID)) 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:57:06.020

您也可以使用“反向比较”模式：

```
if (UID.equals(SCheck1)) {

} else {

} 
```

这样，您就不必费心检查 SCheck1 == null。UID.equals(null) 将返回 false 而不是 null.equals(UID) 抛出 NullPointerException。

# android - 在 Robotium 中滚动网页视图？

> ID：10304165
> 
> 赞同：1
> 
> 时间：2012-04-24T18:48:59.940
> 
> 标签：android, webview, robotium

如何在 Robotium 中自动将 WebView 向下滚动到底部？

顺便说一下，我们使用 WebView 来显示 EULA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:20:05.173

您是否尝试过使用[scrollDown](http://www.jarvana.com/jarvana/view/com/jayway/android/robotium/robotium-solo/1.5.0/robotium-solo-1.5.0-javadoc.jar!/com/jayway/android/robotium/solo/Solo.html#scrollDown%28%29)功能？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T23:29:16.440

我发现单击视图，然后按一定次数的向下键可以做你想做的事。所以像：

```
solo.clickOnView(getActivity().findViewById(R.id.your_eula_webview_id));
for (int i=0;i<20;i++) {
    solo.sendKey(Solo.DOWN);
} 
```

如果这不起作用，请尝试使用模拟器上的键盘查找可以执行的操作，然后对 Robotium 执行相同操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-30T09:21:59.797

第一个答案是工作，但它不灵活

我认为你可以覆盖方法

```
clickOnWebElement(By by, int match, boolean scroll){} 
```

写

```
solo.sendkey(Solo.DOWN); 
```

进去

# python - 在 Python 中连接两个数字的最快方法

> ID：10304168
> 
> 赞同：0
> 
> 时间：2012-04-24T18:49:14.210
> 
> 标签：python, atoi

假设你在 Python 中有两个字符串（只有数字），比如字符串 a 和字符串 b。产生数字 c = ab（因此是整数部分和 b 小数部分）的最快方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T18:56:51.693

如果更快是指速度，我的用法建议我这样做：

```
float("%s.%s"% ("12", "345")) 
```

时间结果：

```
>>> timeit.Timer('float("%s.%s"% ("12", "245"))').timeit()
0.39421987533569336

>>> timeit.Timer('float("{0}.{1}".format("12", "245"))').timeit()
0.573634147644043 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T18:57:50.870

原始格式（可能是最快的？）：`float(str(a) + '.' + str(b))`

此解决方案不需要解析格式字符串。

[添加为不信者的答案]

```
>>> timeit.Timer('float("%s.%s"% ("12", "245"))').timeit()
1.147318164738806
>>> timeit.Timer('float("{0}.{1}".format("12", "245"))').timeit()
1.5033958226534452
>>> timeit.Timer('float("12" + "." + "245")').timeit()
0.6646503955111598 
```

部分解释可能是您始终可以编写`%s`int 参数。通过 % 或 via 格式化时，可能会有额外的字符串转换`.format()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T18:50:51.497

使用`float`和`format`。

```
>>> a, b = '12', '345'
>>> float('{0}.{1}'.format(a, b))
12.345 
```

编辑：不能声称这是最快的（因为我没有测试其他解决方案的速度），但确实完成了工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T18:53:57.310

这将引发一个`ValueError`如果`a`或`b`不能转换为整数（例如，如果不仅仅是数字）：

```
float('%d.%d' % (int(a), int(b))) 
```

（在 Python 2.7 上测试）

# jboss - 在 JNDI Jboss Seam 中找不到 EntityManagerFactory

> ID：10304172
> 
> 赞同：3
> 
> 时间：2012-04-24T18:49:38.750
> 
> 标签：jboss, seam, factory, entitymanager

由于以下错误，我需要帮助：

```
java.lang.IllegalArgumentException: EntityManagerFactory not found in JNDI : java:/plugInEntityManagerFactory
        at org.jboss.seam.persistence.ManagedPersistenceContext.getEntityManagerFactoryFromJndiOrValueBinding(ManagedPersistenceContext.java:247)
        at org.jboss.seam.persistence.ManagedPersistenceContext.initEntityManager(ManagedPersistenceContext.java:79)
        at org.jboss.seam.persistence.ManagedPersistenceContext.getEntityManager(ManagedPersistenceContext.java:108)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.jboss.seam.util.Reflections.invoke(Reflections.java:21)
        at org.jboss.seam.util.Reflections.invokeAndWrap(Reflections.java:125)
        at org.jboss.seam.Component.callComponentMethod(Component.java:2082)
        at org.jboss.seam.Component.unwrap(Component.java:2108)
        at org.jboss.seam.Component.getInstance(Component.java:1887)
        at org.jboss.seam.Component.getInstance(Component.java:1840)
        at org.jboss.seam.Component.getInstance(Component.java:1834)
        at com.medorder.mazama.WorkbenchIntegration.processRequests(WorkbenchIntegration.java:465)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.jboss.seam.util.Reflections.invoke(Reflections.java:21)
        at org.jboss.seam.intercept.RootInvocationContext.proceed(RootInvocationContext.java:31)
        at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:56)
        at org.jboss.seam.transaction.RollbackInterceptor.aroundInvoke(RollbackInterceptor.java:31)
        at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
        at org.jboss.seam.core.BijectionInterceptor.aroundInvoke(BijectionInterceptor.java:46)
        at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
        at org.jboss.seam.transaction.TransactionInterceptor$1.work(TransactionInterceptor.java:38)
        at org.jboss.seam.util.Work.workInTransaction(Work.java:40)
        at org.jboss.seam.transaction.TransactionInterceptor.aroundInvoke(TransactionInterceptor.java:32)
        at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
        at org.jboss.seam.core.MethodContextInterceptor.aroundInvoke(MethodContextInterceptor.java:42)
        at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
        at org.jboss.seam.intercept.RootInterceptor.invoke(RootInterceptor.java:107)
        at org.jboss.seam.intercept.JavaBeanInterceptor.interceptInvocation(JavaBeanInterceptor.java:166)
        at org.jboss.seam.intercept.JavaBeanInterceptor.invoke(JavaBeanInterceptor.java:102)
        at com.medorder.mazama.WorkbenchIntegration_$$_javassist_2.processRequests(WorkbenchIntegration_$$_javassist_2.java)
        at service.PlugInHandler.accountRequest(PlugInHandler.java:207)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.jboss.wsf.container.jboss42.DefaultInvocationHandler.invoke(DefaultInvocationHandler.java:102)
        at org.jboss.ws.core.server.ServiceEndpointInvoker.invoke(ServiceEndpointInvoker.java:220)
        at org.jboss.wsf.stack.jbws.RequestHandlerImpl.processRequest(RequestHandlerImpl.java:408)
        at org.jboss.wsf.stack.jbws.RequestHandlerImpl.handleRequest(RequestHandlerImpl.java:272)
        at org.jboss.wsf.stack.jbws.RequestHandlerImpl.doPost(RequestHandlerImpl.java:189)
        at org.jboss.wsf.stack.jbws.RequestHandlerImpl.handleHttpRequest(RequestHandlerImpl.java:122)
        at org.jboss.wsf.stack.jbws.EndpointServlet.service(EndpointServlet.java:84)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:83)
        at org.jboss.seam.web.LoggingFilter.doFilter(LoggingFilter.java:58)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.MultipartFilter.doFilter(MultipartFilter.java:85)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.ExceptionFilter.doFilter(ExceptionFilter.java:64)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.RedirectFilter.doFilter(RedirectFilter.java:45)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.servlet.SeamFilter.doFilter(SeamFilter.java:158)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:179)
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
        at java.lang.Thread.run(Unknown Source)
    Caused by: javax.naming.NameNotFoundException: plugInEntityManagerFactory not bound
        at org.jnp.server.NamingServer.getBinding(NamingServer.java:529)
        at org.jnp.server.NamingServer.getBinding(NamingServer.java:537)
        at org.jnp.server.NamingServer.getObject(NamingServer.java:543)
        at org.jnp.server.NamingServer.lookup(NamingServer.java:296)
        at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:667)
        at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:627)
        at javax.naming.InitialContext.lookup(Unknown Source)
        at org.jboss.seam.persistence.ManagedPersistenceContext.getEntityManagerFactoryFromJndiOrValueBinding(ManagedPersistenceContext.java:243)
        ... 78 more
    11:43:53,411 INFO  [Contexts] starting up: org.jboss.seam.security.identity
    11:43:53,412 INFO  [Contexts] starting up: org.jboss.seam.web.session
    11:43:53,413 ERROR [SOAPFaultHelperJAXWS] SOAP request exception
    java.lang.IllegalArgumentException: EntityManagerFactory not found in JNDI : java:/plugInEntityManagerFactory
        at org.jboss.seam.persistence.ManagedPersistenceContext.getEntityManagerFactoryFromJndiOrValueBinding(ManagedPersistenceContext.java:247)
        at org.jboss.seam.persistence.ManagedPersistenceContext.initEntityManager(ManagedPersistenceContext.java:79)
        at org.jboss.seam.persistence.ManagedPersistenceContext.getEntityManager(ManagedPersistenceContext.java:108)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.jboss.seam.util.Reflections.invoke(Reflections.java:21)
        at org.jboss.seam.util.Reflections.invokeAndWrap(Reflections.java:125)
        at org.jboss.seam.Component.callComponentMethod(Component.java:2082)
        at org.jboss.seam.Component.unwrap(Component.java:2108)
        at org.jboss.seam.Component.getInstance(Component.java:1887)
        at org.jboss.seam.Component.getInstance(Component.java:1840)
        at org.jboss.seam.Component.getInstance(Component.java:1834)
        at com.medorder.mazama.WorkbenchIntegration.processRequests(WorkbenchIntegration.java:465)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.jboss.seam.util.Reflections.invoke(Reflections.java:21)
        at org.jboss.seam.intercept.RootInvocationContext.proceed(RootInvocationContext.java:31)
        at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:56)
        at org.jboss.seam.transaction.RollbackInterceptor.aroundInvoke(RollbackInterceptor.java:31)
        at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
        at org.jboss.seam.core.BijectionInterceptor.aroundInvoke(BijectionInterceptor.java:46)
        at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
        at org.jboss.seam.transaction.TransactionInterceptor$1.work(TransactionInterceptor.java:38)
        at org.jboss.seam.util.Work.workInTransaction(Work.java:40)
        at org.jboss.seam.transaction.TransactionInterceptor.aroundInvoke(TransactionInterceptor.java:32)
        at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
        at org.jboss.seam.core.MethodContextInterceptor.aroundInvoke(MethodContextInterceptor.java:42)
        at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
        at org.jboss.seam.intercept.RootInterceptor.invoke(RootInterceptor.java:107)
        at org.jboss.seam.intercept.JavaBeanInterceptor.interceptInvocation(JavaBeanInterceptor.java:166)
        at org.jboss.seam.intercept.JavaBeanInterceptor.invoke(JavaBeanInterceptor.java:102)
        at com.medorder.mazama.WorkbenchIntegration_$$_javassist_2.processRequests(WorkbenchIntegration_$$_javassist_2.java)
        at service.PlugInHandler.accountRequest(PlugInHandler.java:207)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.jboss.wsf.container.jboss42.DefaultInvocationHandler.invoke(DefaultInvocationHandler.java:102)
        at org.jboss.ws.core.server.ServiceEndpointInvoker.invoke(ServiceEndpointInvoker.java:220)
        at org.jboss.wsf.stack.jbws.RequestHandlerImpl.processRequest(RequestHandlerImpl.java:408)
        at org.jboss.wsf.stack.jbws.RequestHandlerImpl.handleRequest(RequestHandlerImpl.java:272)
        at org.jboss.wsf.stack.jbws.RequestHandlerImpl.doPost(RequestHandlerImpl.java:189)
        at org.jboss.wsf.stack.jbws.RequestHandlerImpl.handleHttpRequest(RequestHandlerImpl.java:122)
        at org.jboss.wsf.stack.jbws.EndpointServlet.service(EndpointServlet.java:84)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:83)
        at org.jboss.seam.web.LoggingFilter.doFilter(LoggingFilter.java:58)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.MultipartFilter.doFilter(MultipartFilter.java:85)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.ExceptionFilter.doFilter(ExceptionFilter.java:64)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.RedirectFilter.doFilter(RedirectFilter.java:45)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.servlet.SeamFilter.doFilter(SeamFilter.java:158)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:179)
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
        at java.lang.Thread.run(Unknown Source)
        Caused by: javax.naming.NameNotFoundException: plugInEntityManagerFactory not bound
        at org.jnp.server.NamingServer.getBinding(NamingServer.java:529)
        at org.jnp.server.NamingServer.getBinding(NamingServer.java:537)
        at org.jnp.server.NamingServer.getObject(NamingServer.java:543)
        at org.jnp.server.NamingServer.lookup(NamingServer.java:296)
        at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:667)
        at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:627)
        at javax.naming.InitialContext.lookup(Unknown Source)
        at org.jboss.seam.persistence.ManagedPersistenceContext.getEntityManagerFactoryFromJndiOrValueBinding(ManagedPersistenceContext.java:243)
        ... 78 more 
```

在此处添加的是 persistence.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" 
        version="1.0">
    <persistence-unit name="CRMPlugin">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>java:/CRMPluginDatasource</jta-data-source>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
            <property name="hibernate.hbm2ddl.auto" value="validate"/>
            <property name="hibernate.cache.use_query_cache" value="true"/>
            <!--
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.use_sql_comments" value="true"/>
            -->
            <property name="jboss.entity.manager.factory.jndi.name" value="java:/plugInEntityManagerFactory"/>
        </properties>
    </persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T10:14:14.270

可能您使用 2.2.2.Final 生成项目，该项目专为完全兼容的 JEE5 环境（例如 JBAS 5.1.0.GA）而定制，并且正在部署在不兼容的环境（例如 JBAS 4.2.x）上。

事实是，在 JEE5 兼容环境中，`persistence.xml`文件由 JEE5 容器（服务器）搜索，如果找到，则将其初始化，并将实体管理器工厂放入 JNDI 中。不兼容的容器不会自动部署持久性上下文，因此 Seam 无法在 JNDI 中找到它。

对于这种情况，Seam 有一个“手动”部署持久性上下文的组件。更改您的组件定义：

```
<persistence:entity-manager-factory name="entityManagerFactory" persistence-unit-name="CRMPlugin" />
<persistence:managed-persistence-context name="entityManager" auto-create="true" entity-manager-factory="#{entityManagerFactory}" /> 
```

这样，实体管理器工厂是由 Seam 本身（不是容器）创建的，并且不会在 JNDI 中查找（因此您不使用该`persistence-unit-jndi-name`参数）。

顺便说一下，这是由旧版本的 Seam 生成的默认值`components.xml`，例如 2.2.0.GA，它们针对不符合 JEE5 的容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T20:15:26.203

我遇到了类似的问题，埃米尔给了小费，我想把它贴在这里！我不得不在 persistence.xml[1] 和 components.xml[2] 上使用一个名为 platto 的项目，所以：

**[1]**

```
<property name="jboss.entity.manager.factory.jndi.name" value="java:/plattoEntityManagerFactory"/> 
```

**[2]**

```
<persistence:managed-persistence-context name="entityManager" auto-create="true"  persistence-unit-jndi-name = "java:/plattoEntityManagerFactory"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-28T08:44:49.603

所以，我意识到这是一个两年前的线程，但我正在开发一个“旧”的 Seam/jBoss/Hibernate 应用程序，做一些小的修改并遇到了这个问题。因此，也许这对处于类似情况的下一个人有用。

我有完全相同的错误。我的 component.xml 和 persistence.xml 完全对齐。用头撞了几天。然后我意识到这一切都是在我向 Entity bean 添加一些新字段时开始的（我刚做完就被工作中的某个人打断了一次紧急会议，并且忘记了我在哪里）。Stack 没有任何帮助，所以我删除了我对 bean 和 eureka 所做的更改。因此，只需返回您对实体 bean 的最后更改，并检查它们是否与您的数据库模型兼容。如果定义中的某些内容不正确，EntityManager 将不会绑定，但堆栈也不会告诉您是哪个特定 bean 导致了问题。也许 Hibernate 开发人员应该考虑改进这一点。

干杯，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-18T06:50:46.860

我遇到了同样的问题，最终我将persistence.xml 放在了错误的目录中。

因此，请确保**将您的 persistence.xml 放在 META-INF 文件夹中！** 如果直接在 webapp 项目中工作，则在您的 WEB-INF/classes/META-INF 文件夹下，或者在嵌入式 jar 文件（例如您的 ejb 项目）根目录中的 /META-INF 下！

# jmeter - 标头管理器和记录控制器

> ID：10304174
> 
> 赞同：1
> 
> 时间：2012-04-24T18:49:41.447
> 
> 标签：jmeter, load-testing

在我的测试脚本中，我使用在线程组级别共享的标头管理器，然后每个采样器都有自己的标头，用于从请求到请求的变化（引用者、某些编译指示和缓存控制）。我这样做是为了便于控制，例如，我可以轻松更改所有请求的用户代理。

我使用代理和录制控制器来制作我的大部分脚本，并且我已将标题管理器设置为录制控制器的子项 - 我还通过在代理元素内设置标题管理器来测试这一点，但这些都不是随心所欲地工作。

它所做的是从浏览器中添加一整套标头，而不仅仅是那些缺失或不同于我在标头管理器中指定的标头。

我错过了什么，还是有办法做我想做的事情？

我正在使用 jmeter 2.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:04:32.290

正如其他人所指出的，这在 Jmeter 中还没有发生。我正在使用 2.7 并看到相同的行为。

我相信 HTTP 请求默认值和 HTTP 标头管理器的初衷是简化开发人员手动创建脚本的任务。随着 HTTP Proxy Controller 使用量的增加，以上两个元素的应用也需要扩展到 Proxy Controller 上进行记录。

# java - 给定字典，对字符列表进行排序

> ID：10304176
> 
> 赞同：3
> 
> 时间：2012-04-24T18:49:45.450
> 
> 标签：java, algorithm

我在一次采访中被问到这个问题。假设你有一个有序的字典，并且给定了一个无序字符列表——你将如何按优先顺序排列这些字符？该词典包含保证出现所有 26 个字符的单词。但是，请注意字典的大小可能是任何值。字典可能只有几个单词，并且每个字符可能没有单独的部分，例如，以`a`;开头的单词可能没有部分。尽管`a`将作为另一个词的一部分出现，例如“bat”。

字典可能是“有序的”（/sarcasm），例如“zebra”、“apple”、“cat”、“crass”，如果给定列表 { `a`, `z`, `r`}，正确的顺序是 { `z`, `a`, `r`}. 由于字典中“zebra”在“apple”之前，所以我们知道`z`在之前`a`出现。由于“apple”在“cat”之前，我们知道`a`在之前`c`。因为“cat”在“crass”之前，我们知道出现`a`在 之前`r`。这个排序离开`c`并且`r`存在不确定性，但是由于字母列表是 { `a`, `z`, `r`}，我们知道解决方案是 { `z`, `a`, `r`}。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T20:45:22.900

使用有 26 个顶点的有向图，每个顶点代表一个字符。从顶点 A 到顶点 B 的边意味着在字母表中 B 在 A 前面。

第一步是建立这样一个只有顶点但没有边的图。

其次，您逐字扫描输入字典。并将每个单词与前一个单词进行比较。您应该为您扫描的每个单词找到一个确切的关​​系。所以你在这个图中添加了一条边。假设字典是正确的，应该没有冲突。

完成字典后，您通过以下方式输出字母表

1.  选择一个随机顶点，遍历它的路径，直到找到一个不指向任何东西的字符。这是字母表中的第一个字符。输出它并从图中删除它。
2.  继续执行 1 直到所有顶点都被删除。

编辑：为了更好地解释这个算法，让我们在你的样本输入上运行它。

输入：{“斑马”、“苹果”、“猫”、“粗鲁”}

单词 0 和单词 1，我们马上就知道 z 在 a 之前，所以我们做一条边 a->z

单词 1 和单词 2，我们立即知道 a 在 c 之前，所以我们再做一条边 c->a

Word 2 和 Word 3，第一个字母是相同的“c”，但第二个字母不同，所以我们知道 a 在 r 之前，所以我们有另一个边 r->a

现在所有的单词都读完了。通过随机选择一个顶点来输出顺序（比如我们选择 c），然后我们在图中有 c->a->z。输出 z 并从图中删除 z（将其标记为 NULL）。现在选择另一个（假设我们选择 r），然后我们在图中找到 r->a。我们输出 a 并从图中删除 a。现在我们选择另一个（假设我们再次选择 c），没有找到路径，所以我们只输出 c 并删除它。现在我们选择最后一个，r，又没有路径了，所以我们输出r并删除它。由于删除了所有顶点，因此算法完成。

输出为 z、a、c、r。“c”和“r”的顺序是随机的，因为我们从输入中并不真正知道它们的关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:44:00.410

从“zebra”<“apple”<“cat”<“crass”的事实来看，导出每个字符关系的最有效方法是让一个循环考虑所有单词的第 N 个字符，其中 N 最初为 0，产生关系“z”<“a”<“c”。该循环可以递归地提取具有相同前缀的单词组的第（N + 1）个字符的关系（即位置<= N的文本）。这样做是为了N == 1 具有相同前缀的“cat”和“crass”产生关系“a”<“r”。

我们可以在二维`x < y`真值数组中表示已知关系。

```
y\x a b c...r...z
a   -   N   N   Y
b     -
c   Y   -       Y
r   Y       -
z   N   N       - 
```

The brute force approach is to iterate over all pairs of characters in the input list (i.e. {a, z, r} -> az, ar, zr) looking up the table for `a<z`, `a<r`, `z<r`: if this is ever false, then swap the characters and restart the whole she-bang. When you make it through the full process without having had to swap any more characters, the output is sorted consistently with the rules. This is a bit like doing a bubble sort.

为了加快速度，我们可以更主动地在表格中填充隐含关系的单元格：例如，我们知道“z”<“a”<“c”和“a”<“r”，所以我们推断“ z" < "r"。我们可以通过遍历上面的“naive”表来找到我们所知道的关于每个字符的所有信息（例如那个`z<a`和`z<c`）——然后遍历我们对 a 和 c 的了解。为避免树过深，您可以像这样只遵循一级间接，然后重复直到表稳定。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-24T23:15:16.360

根据您描述问题的方式，您的示例不正确。你的答案应该是`{z,r,a}`。然而，这可能是，下面是解决问题的代码。您可以修改它以返回与我设想的不同的订单`{z,r,a}`。

```
Set<Character> charPrecedence(List<String> dictionary, char[] letters){
    Set<Character> result = new HashSet<Character>();
    //since your characters are the 26 letters instead of the 256 chars
    // a bit vector won't do; you need a map or set
    Set<Character> alphabets = new HashSet<Character>();
    for(char c: letters)
       alphabets.add(c);

    //now get to work
    for(String word: dictionary){
       if(alphabets.isEmpty()) return result;
       for(char c: word.toCharArray()){
          if(alphabets.remove(c))
           result.add(c);
       }
    }
    //since the dictionary is guaranteed to contain all the 26 letters,
    //per the problem statement, then at this point your work is done.
    return result;
} 
```

最佳情况 O(1); 最坏情况 O(n) 其中 n 是字典中的字符数，即一个特定字母只出现一次，并且是您检查的最后一个字符。

# c++ - C++ 中有趣的位掩码谜题

> ID：10304177
> 
> 赞同：1
> 
> 时间：2012-04-24T18:49:54.030
> 
> 标签：c++, binary, redis, puzzle, bitmask

我有一个有趣的位掩码难题，我需要帮助解决一些问题。这是问题所在：

```
11010 
```

每个位代表一段内容的一个特征。它存储在 Redis 中。但是要查询它，我们需要每个组合，以便我们可以拉出密钥。所以`11010`会产生这些组合：

```
11010
10000
10010
11000
01010
00010
01000 
```

有人有 C++ 的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T19:02:24.843

有关初始位掩码的子集数量呈线性的算法，请参阅[国际象棋编程 Wiki 。](https://www.chessprogramming.org/Traversing_Subsets_of_a_Set#:%7E:text=Traversing%20Subsets%20of%20a%20Set%20determines%20the%20power%20set%20of,factors%20with%20a%20certain%20cardinality.)将 n 位设置为 1，该数字等于 2^n，因此它是设置位的数量的指数。

```
// enumerate all subsets of set d
void enumerateAllSubsets(U64 d) {
   U64 n = 0;
   do {
      doSomeThingWithSubset(n);
      n = (n - d) & d;
   } while ( n );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T03:04:26.193

如果 2^n (n=bits set) 多于您拥有的键数，则反转问题可能会更快。也就是说，获取您的键列表并针对位掩码测试它们，而不是枚举可能的键并检查值。

# ruby-on-rails - will_paginate 和inherited_resources 不能一起工作

> ID：10304182
> 
> 赞同：2
> 
> 时间：2012-04-24T18:50:19.697
> 
> 标签：ruby-on-rails, will-paginate, inherited-resources

将分页 (3.0.3) 不适用于继承的资源 (1.3.1)。在我的控制器中：

```
protected
def collection
  @posts ||= end_of_association_chain.paginate(:page => params[:page])
end 
```

我在初始化程序中添加了 require 'will_paginate/array' ，但这并不能解决问题。我怎样才能开始工作将分页和继承的资源一起？在我看来我得到错误

```
undefined method `total_pages' for #<ActiveRecord::Relation:0x00000004312e38> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T21:31:22.350

这是一个很长的镜头，但我遇到了这个问题，结果证明是 CanCan，我正在使用的另一个 gem。这是我偶然发现的第一件事，所以我想有一天它可能会对某人有所帮助。

查看：[https ://github.com/ryanb/cancan/wiki/Inherited-Resources](https://github.com/ryanb/cancan/wiki/Inherited-Resources)

调用`load_and_authorize_resource`加载集合，因此条件赋值的右侧永远不会在`collection`方法中运行。上面链接中描述的修复是跳过收集操作的授权，并在`collection`方法中显式地进行检查。

```
skip_load_and_authorize_resource :only => :index

protected

def collection
  @posts ||= end_of_association_chain.accessible_by(current_ability).paginate(:page => params[:page])
end 
```

我希望这对某人有所帮助。

# ios - 苹果支付网关

> ID：10304183
> 
> 赞同：0
> 
> 时间：2012-04-24T18:50:24.537
> 
> 标签：ios, iphone, payment-gateway

我需要制作使用支付网关的iphone应用程序（使用签证......等）。

那可行吗？Apple 接受这种应用程序吗？还是苹果应用程序应该使用应用内购买标准？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:55:38.840

这是完全可以接受的。

有几个应用程序可以做到这一点。想到的第一个例子是公共交通票。

但是你不能用它来代替你应用中产品的应用内购买，你也不能用它绕过应用商店的结构来欺骗苹果 30% 的应用销售。它必须是在应用程序之外存在/有价值的东西。

# php - 如何使用每个循环显示来自数据库的结果以循环遍历 ID

> ID：10304195
> 
> 赞同：0
> 
> 时间：2012-04-24T18:51:11.733
> 
> 标签：php, mysql, html

所以我试图显示调查的答案，但首先我想将用户 ID 彼此分开。现在答案的存储方式与此类似....

SGpID、SGresult、SGFACemail

本质上，我想为每个唯一 ID 显示一个按钮。因此，如果我有 5 个 ID 为 10 的答案，以及 5 个 ID 为 12 的答案。我想要显示“ID 10 的结果”和“ID 12 的结果”的按钮。

它目前正在做的是显示选择语句匹配的每次迭代，因此基本上每个答案......没有bueno。

我的想法是，我将通过一个 for each 循环来分离结果并按照...

“每次 SGpID 都不同”，使用该新 SGpID 显示一个新按钮。

我只是不确定如何写出来。这是我到目前为止的声明。

```
$query_db = ("SELECT SGpID FROM SGresult WHERE SGFACemail = '$email'");
$result = mysql_query($query_db) or die(mysql_error());

while ($row = mysql_fetch_assoc($result)) {
//insert for each loop here?
echo $row['SGpID'];
} 
```

一如既往地感谢您对此的任何帮助或想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:53:28.013

`SELECT`将您的命令更改为：

```
SELECT DISTINCT SGpID FROM SGresult WHERE SGFACemail = ? 
```

注意我已经使用`?`了`'$email'`你**真的**应该使用准备好的语句。向[鲍比表](http://bobby-tables.com/)学习！

# jquery - 切换具有相同的类名

> ID：10304197
> 
> 赞同：0
> 
> 时间：2012-04-24T18:51:18.293
> 
> 标签：jquery, jquery-selectors

我在使用 jQuery 进行切换时遇到问题。当我对某些标签具有相同的类名时，我希望仅在单击按钮时获得一个事件。

我的一些代码如下，如果我点击一个名为“1”的按钮，它会显示“2”和“5”的行，因为它们具有相同的类名“detail”。但是，如果我单击“1”，我只想显示“2”行。

我不愿意使用不同的名称，因为它应该有很多具有切换功能的行。这意味着我需要为每个标签命名。

请帮我提供一些解决方案和建议，谢谢。

- -脚本 - -

```
 <script>
            $(".button").click(function () {
                $(".detail").slideToggle("slow");
            });
            $(".button2").click(function () {
                $(".detail2").slideToggle("slow");
            });
    </script> 
```

----HTML-----

```
 <table class="w850 table">
        <tr>
            <td class="w50">
                <input type="checkbox" />
            </td>
            <td class="w50">
                <input type="button" value="1" class="button"/>
            </td>
            <td class="w250">
                Scan
            </td>
            <td class="w250">
                Status
            </td>
            <td class="w250">
                Ship Type
            </td>
        </tr>
        <tr class="detail" style="display: none">
            <td class="w50">
                <input type="checkbox" />
            </td>
            <td class="w50">
                <input type="button" value="2" class="button2"/>
            </td>
            <td class="w250">
                Scan
            </td>
            <td class="w250">
                Status
            </td>
            <td class="w250">
                Ship Type
            </td>
        </tr>
        <tr class="detail2" style="display: none">
            <td class="w50">
                <input type="checkbox" />
            </td>
            <td class="w50">
                <input type="button" value="3" />
            </td>
            <td class="w250">
                Scan
            </td>
            <td class="w250">
                Status
            </td>
            <td class="w250">
                Ship Type
            </td>
        </tr>
        <tr>
            <td class="w50">
                <input type="checkbox" />
            </td>
            <td class="w50">
                <input type="button" value="4" class="button"/>
            </td>
            <td class="w250">
                Scan
            </td>
            <td class="w250">
                Status
            </td>
            <td class="w250">
                Ship Type
            </td>
        </tr>
        <tr class="detail" style="display: none">
            <td class="w50">
                <input type="checkbox" />
            </td>
            <td class="w50">
                <input type="button" value="5" class="button2"/>
            </td>
            <td class="w250">
                Scan
            </td>
            <td class="w250">
                Status
            </td>
            <td class="w250">
                Ship Type
            </td>
        </tr>
        <tr class="detail2" style="display: none">
            <td class="w50">
                <input type="checkbox" />
            </td>
            <td class="w50">
                <input type="button" value="6" />
            </td>
            <td class="w250">
                Scan
            </td>
            <td class="w250">
                Status
            </td>
            <td class="w250">
                Ship Type
            </td>
        </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:54:47.980

```
$(".button").click(function () {
    $(this).closest("tr").siblings(".detail:first").slideToggle("slow");
});
$(".button2").click(function () {
    $(this).closest("tr").siblings(".detail2:first").slideToggle("slow");
}); 
```

这将选择第一个 .detail 行

您可以在这里查看[http://jsfiddle.net/4KP9Y/2/](http://jsfiddle.net/4KP9Y/2/)以获取工作代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:58:06.723

如果在行中找到您的按钮，您可能可以执行以下操作：

```
$(".button").click(function() {
  $(this).closest("tr").siblings(".detail2").show()
}); 
```

您可能想查看 jQuery 用于遍历 DOM 的函数。意思是从这里到那里：[http ://api.jquery.com/category/traversing/](http://api.jquery.com/category/traversing/)

# cordova - CRUD & JsonP / Sencha Touch 2

> ID：10304198
> 
> 赞同：7
> 
> 时间：2012-04-24T18:51:26.830
> 
> 标签：cordova, proxy, touch, extjs, jsonp

通过代理类型“jsonp”上传记录的正确方法是什么？我正在尝试使用代理类型“jsonp”同步（）商店，但我收到错误消息。

这是模型：

```
Ext.define("Sencha.model.User", {
    extend:"Ext.data.Model",
    //idProperty:"",

    config:{
        fields:[
            'userID',
            'userName',
            'userEmail'
        ],

        proxy: {
            type: 'jsonp',
                create  : 'http://domainname.com/users.php?action=insert',
                read    : 'http://domainname.com/users.php?action=fetchAll',
                update  : 'http://domainname.com/users.php?action=update',
                destroy : 'http://domainname.com/users.php?action=delete'
            },
            callbackKey: 'callback',
            reader: {
                type: 'json',
                rootProperty: 'Users',
                successProperty: 'success',
                messageProperty: 'message'
            },
            writer: {
                type: 'json',
                writeAllFields: false,
                encode: true
            }
        }
    }
}); 
```

店铺：

```
Ext.define("Sencha.store.Users", {
    extend:"Ext.data.Store",
    config:{
        model:"Sencha.model.User",
        remoteFilter:false,
        remoteSort:true,
        autoLoad:true,
        }
    }
}); 
```

商店更新：

```
Ext.getStore('Users').set('userName', 'Tom'); 
```

现在我想更新数据库中的记录：

```
Ext.getStore('Objects').sync(); 
```

但我收到错误：未捕获的 **错误：[ERROR][Ext.data.proxy.Server#create] JsonP 代理只能用于读取数据。**

如何更新记录数据 - 通过代理将其上传到数据库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T01:23:47.193

您正在处理 CORS（跨源资源共享）默认情况下，在所有浏览器中都尊重这一点，并且所有 Web 服务器默认设置为不允许 CORS 请求。更多关于 CORS[的信息在这里](http://www.w3.org/TR/cors/)

如果您是 Web 开发人员，并且拥有 Web 服务器，但您需要从 javascript 访问一些外部公司 API，最简单的方法是将您的服务器设置为 Web 代理。以下是一些服务器的步骤

*（Guru 读者，由于我将其声明为 wiki，因此请随时在此处添加更多服务器配置）*

## 使用 mod_proxy 和 mod_proxy_http 的应用程序

打开您的虚拟主机文件并添加这些行（启用 mod proxy foirst -[在此处](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)进一步阅读）

```
ProxyPass /proxy http://domainname.com/
ProxyPassReverse /proxy http://domainname.com/ 
```

## Nginx

如果您将 NGIX 用于您的应用程序配置，请添加以下行

```
location /proxy {
  proxy_pass        http://domainname.com/;
  proxy_set_header  X-Real-IP  $remote_addr; <-- maybe good to set
} 
```

[在此链接](http://wiki.nginx.org/HttpProxyModule)上进一步阅读。

## IIS

如果您使用的是 IIS 服务器

配置比上面的配置要复杂一些，但是您可以在[此处找到所有相关信息](http://blogs.iis.net/carlosag/archive/2010/04/01/setting-up-a-reverse-proxy-using-iis-url-rewrite-and-arr.aspx)

**对于上述所有示例，现在您可以在响应中使用 Ajax 和 JSON，而不是使用有限的 JSONP 功能，因为您在服务器上提供该 API。**

* * *

# 是的，您也可以毫不费力地将它与 Phonegap 一起使用

我可以说一件事。您将服用蓝色药丸或红色药丸 :) 我要加入，但有两种方法。再次，拥有您自己的具有上述配置的服务器，第二个是使用Phonegap本机插件弄脏您的手。

## 第一种方法（Web 服务器所有者）

要求您拥有自己的 Web 服务器。您将需要 mod_proxy 的上述配置，以便您可以隐藏服务背后的真实服务并代理来自 phonegap 应用程序的所有 HTTP 请求。您还必须在响应中包含 CORS（跨源资源共享）标头，该标头会返回给 phonegap 应用程序。还要考虑通过身份验证来保护这一点，因为您正在向世界公开内容。您的 phonegap 应用程序至少通过基于 HTTPS 的基本 HTTP 身份验证对您的 Web 服务进行身份验证。

按照以下步骤完成设置：

## 阿帕奇

在 apache 服务器上，首先启用模块“headers”

`$ a2enmod headers`

在代理配置之前或之后的虚拟主机文件中添加以下内容：

```
ProxyPass /proxy http://domainname.com/
ProxyPassReverse /proxy http://domainname.com/
# CORS allow to all
Header set Access-Control-Allow-Origin *
# Set basic authentication
<Location /proxy>
  AuthType Basic
  AuthName "Restricted Area"
  AuthBasicProvider file
  AuthUserFile /usr/local/apache/passwd/passwords
  Require valid-user # setup user/password in file above using htpasswd
</Location> 
```

在 phonegap (Sencha Touch) 中，对于 ajax 请求设置用户名和密码，如 buffer.SlowBuffer();

您需要第一种方法来打包 auth 标头

```
function make_base_auth(user, password) {
  var tok = user + ':' + pass;
  var hash = Base64.encode(tok);
  return "Basic " + hash;
} 
```

然后在你的代理集标题中像这样

```
headers : { Authorization : make_base_auth("some_username", "some_password") } // I know this is readable by other by you get the point. 
```

## IIS 6

要启用 CORS 的 Microsoft IIS6，请执行以下步骤：

1.  打开 Internet 信息服务 (IIS) 管理器
2.  右键单击要为其启用 CORS 的站点，然后转到“属性”
3.  更改为 HTTP 标头选项卡
4.  在自定义 HTTP 标头部分中，单击添加
5.  输入 Access-Control-Allow-Origin 作为标题名称
6.  输入 * 作为标题值
7.  单击确定两次

可选，设置基本身份验证，这是直接的过程。

## IIS 7

还要考虑检查上面提到的关于如何设置代理的文档，然后修改该 web.config 文件并添加以下内容

```
<configuration>
 <system.webServer>
   <httpProtocol>
     <customHeaders>
       <add name="Access-Control-Allow-Origin" value="*" />
     </customHeaders>
   </httpProtocol>
 </system.webServer>
</configuration> 
```

## nginx

在位置附加以下

```
if ($request_method = 'OPTIONS') {

    add_header 'Access-Control-Allow-Origin' '*';
    add_header 'Access-Control-Allow-Credentials' 'true';
    add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';
    add_header 'Access-Control-Allow-Headers' 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type';
    add_header 'Access-Control-Max-Age' 1728000;
    add_header 'Content-Type' 'text/plain charset=UTF-8';
    add_header 'Content-Length' 0;

    return 200;
 }

 if ($request_method = 'POST') {
    add_header 'Access-Control-Allow-Origin' '*';
    add_header 'Access-Control-Allow-Credentials' 'true';
    add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';
    add_header 'Access-Control-Allow-Headers' 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type';
 }

 if ($request_method = 'GET') {

    add_header 'Access-Control-Allow-Origin' '*';
    add_header 'Access-Control-Allow-Credentials' 'true';
    add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';
    add_header 'Access-Control-Allow-Headers' 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type';

 } 
```

## Google App 引擎也很有帮助

由于这个盒子太长了，我将只提供一个博客的链接，其中所有内容都得到了正确的解释

[链接](http://active.tutsplus.com/tutorials/tools-tips/quick-tip-using-google-app-engine-as-a-proxy-server/)

## ...那么第二种方法呢

好吧，它至少涉及一些本机编码，您将需要 phonegap 插件 phonegap-proxy ，您可以在[此处](https://github.com/tigbro/phonegap-proxy)找到但我会避免“本机”，因为 phonegap 的重点是使用单个代码拥有多平台应用程序......哦，如果你想要在这里编写本机代码的“特殊”插件是一个很好的例子，如何[为 facebook API 做同样的事情](https://github.com/davejohnson/phonegap-plugin-facebook-connect)

现在由您决定采用哪种方法；）

# matlab - MatLab 中的矩阵运算

> ID：10304201
> 
> 赞同：0
> 
> 时间：2012-04-24T18:51:41.010
> 
> 标签：matlab, matrix

我有一个在 MatLab 中创建的 10 X 10 矩阵 A。矩阵中的所有值都在 0 到 100 之间。假设我要：

1.  用零替换 A < 10 的所有元素
2.  将 A > 90 的所有元素替换为无穷大
3.  将 30 到 50 之间的所有值提取到新向量。

我可以在不编写脚本的情况下做到这一点吗？我可以通过带有一些简单 for 循环的脚本轻松做到这一点，但是有没有可用的快捷方式？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T18:57:30.900

使用逻辑索引可以很容易地完成所有这些事情：

使用一个或两个命令可以很容易地完成上述每个操作。但是，每个操作都必须独立于其他两个操作来完成。您不能在一行中完成所有 3 个操作。

1.

```
smallIdx = A<10;
A(smallIdx) = 0;
% One Line Version
A(A<10) = 0; 
```

2.

```
bigIdx = A>90;
A(bigIdx)=inf;
% One Line Version
A(A>90) = inf; 
```

3.

```
middleIdx = A>30 & A<50;
newVector = A(middleIdx); 
% One Line Version
newVector = A(A>30 & A<50); 
```

新向量是一个向量，不会像 A 那样是正方形的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-11T04:23:49.587

建立任何 3 × 3 矩阵 a。编写一些命令行语句来对 a 执行以下操作： (a) 交换第 2 列和第 3 列；(b) 添加第四列（0）；(c) 插入一行1作为a的新的第二行（即，将当前的第二行和第三行向下移动）；(d) 删除第二列。

# java - 两个 Java 日期有不同的格式

> ID：10304203
> 
> 赞同：0
> 
> 时间：2012-04-24T18:52:01.913
> 
> 标签：java, hibernate

我有一个实体类，它代表从 MySQL 带来的对象。其中一个字段是我通过 Hibernate 映射的 MySQL DateTime 字段

```
@Temporal(TemporalType.DATE)
private Date effdate; 
```

但是，如果该日期恰好在数据库中为空，我想在 setter 方法中将其设置为当前日期。据我了解，Hibernate 不支持默认值，并且使用***columnDefinition***子句默认字段会将实现与供应商联系起来。

当该字段在 MySQL 中正确填充时，它看起来像第二个输出行。当我默认它时，它看起来像第一个。两个日期字段不应该看起来一样吗？如果它最终不会成为问题，我不会担心，但我想了解 Date 对象如何以不同的方式出现。我知道***SimpleDateFormat，***但不确定它是否在这里发挥作用，因为两者都只是日期对象。@Temporal 注释对它有什么作用吗？

```
Tue Apr 24 14:34:10 EDT 2012  <- my default
2012-04-24 00:00:00.0         <- from MySQL 
```

设置方法

```
public void setEffdate(Date effdate) {
// TODO if effdate is null use "d"

    Date d = new Date();
    this.effdate = effdate;

    System.out.println(d);
    System.out.println(this.effdate + "\n"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:57:48.453

> 我想了解 Date 对象如何以不同的方式出现

有两个具体的类称为`Date`:[`java.util.Date`](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html)和[`java.sql.Date`](http://docs.oracle.com/javase/6/docs/api/java/sql/Date.html). 后者扩展了前者并将日期格式化为“2012-04-24”。

> 两者都只是日期对象

它们几乎肯定是两种不同类型的实例，这解释了行为上的差异。您从 MySQL 获得的可能是`java.sql.Date`，而您自己创建的默认可能是`java.util.Date`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:01:38.840

如何使用 coalesce 函数从数据库中指定默认值而不是在 java 中？

[http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_coalesce](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_coalesce)

否则 aix 是对的，你应该检查你的导入

# c# - 如何在不使用 try catch 的情况下处理异常？

> ID：10304213
> 
> 赞同：6
> 
> 时间：2012-04-24T18:52:24.643
> 
> 标签：c#, exception, try-catch, sqlconnection

```
using (SqlConnection con = new SqlConnection())
{
     try
     {
          con.Open();
     }
     catch (Exception ex)
     {
          MessageBox.Show(ex.Message);
     }
} 
```

这工作正常。但我想知道我们可以在不使用`try catch`某些东西的情况下处理异常`if else`吗？或者使用`try catch`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T18:55:02.947

除了 try catch 之外，没有其他机制可以处理异常。听起来你想要类似的东西

```
if(connection.DidAnErrorOccur) 
```

但这不存在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-12T16:51:51.157

好的，您可以**在 global.asax 中实现 de Application_Error**，此方法是错误的第一道防线，适用于所有应用程序

[http://msdn.microsoft.com/en-us/library/24395wz3%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/24395wz3%28v=vs.100%29.aspx)

对于特定页面，例如 default.aspx，您可以实现**Page_Error**

[http://msdn.microsoft.com/en-us/library/ed577840%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ed577840%28v=vs.100%29.aspx)

如果您在 mvc 中工作，以便可以在所需的每个控制器中实现 **OnException(ExceptionContext filterContext)**，则在发生未处理的异常时调用此方法。

[http://devproconnections.com/aspnet-mvc/aspnet-mvc-tutorial-handling-errors-and-exceptions](http://devproconnections.com/aspnet-mvc/aspnet-mvc-tutorial-handling-errors-and-exceptions)

或者你可以实现你的**错误属性**

[https://www.simple-talk.com/dotnet/asp.net/handling-errors-effectively-in-asp.net-mvc/](https://www.simple-talk.com/dotnet/asp.net/handling-errors-effectively-in-asp.net-mvc/)

另一方面，也许您可​​以使用**Assert 语句**，这样您就可以评估条件

[http://msdn.microsoft.com/en-us/library/ttcc4x86.aspx](http://msdn.microsoft.com/en-us/library/ttcc4x86.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T18:55:48.713

唯一的方法是检查所有会返回错误的条件。无论如何，你应该这样做。尝试/捕获是昂贵的。Try catch 应该是最后的手段，为此目的没有办法绕过它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T19:16:26.397

我能给你的最好的选择是 Elmah。[http://code.google.com/p/elmah/](http://code.google.com/p/elmah/) 它将处理所有未捕获的错误并记录它们。从那里我建议修复所述错误或捕获您期望的特定错误，而不仅仅是捕获可能发生的任何错误。这样做是最好的，这样您就可以修复潜在的问题，而不是因为发生异常而简单地跳过代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-24T19:08:05.360

Tejs 的回答是正确的，我相信没有其他机制可以处理错误。

但是，您可以处理更具体的错误。您还可以在 try catch 之外声明变量以查看它是否成功。

例子：

```
using (SqlConnection con = new SqlConnection())
{
     bool sqlErrorOccurred;

     try
     {
         con.Open();
         sqlErrorOccurred = false;
     }
     catch (SqlException ex)
     {
          sqlErrorOccurred = true;
     }

     if(sqlErrorOccurred)
     {
         MessageBox.Show("A Sql Exception Occurred");
     }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T20:47:11.580

上面的答案是正确的。但是，需要注意的另一件事是可以设置全局异常处理程序。这并不能解决前面提到的防御性编码的需求。但是，如果担心需要处理所有异常（例如，记录错误），那么这种方法会非常有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-13T22:39:32.863

我正在构建一个使用实时流数据的系统，因此需要处理在其他一切都非常空闲时可能发生的错误。我正在使用的 API 通过一个名为“error”的方法将错误传递回程序，并附加了异常。然后，此方法可能会引发错误，但这是有问题的，因为我看不出将整个程序完全放在 try-catch 块中是一个好主意。

所以，为了解决这个问题，我将设置一个事件处理程序来在我的程序的主要部分触发事件，然后它可以处理在那个时间点引发的任何错误。

例如：

在主课中：

```
private void Error(object sender, EventArgs e) {

    Exception ex = sender as Exception;

    Console.WriteLine("Error: " + ex); // Or whatever you want to do with the exception

    // You could even add this if you want to then use the try -catch sequence (which 
    // makes the exception easier to parse and also enables you to stop the program
    // with unhandled exceptions if it's something catastrophic:

    try {

        throw ex;
    } catch (put.your.exception.detail.here) {

        // do stuff
   } finally {

       // do other stuff
   }
} 
```

（在从 API 接收错误的类中）：

```
class Foo {
    public event EventHandler ThrowError;

    protected virtual void OnError(Object src, EventArgs e) {

        if (ThrowError != null) {

            ThrowError(src, e);
        }
    }

    private virtual void error(Exception e) {

        OnError(e, EventArgs.Empty);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-27T12:14:46.310

在 .NET core 3.1（或之前？）中，您可以为未处理的异常设置全局捕获器。但是，之后APP将无法继续运行。

这是一个例子：

[https://docs.microsoft.com/en-us/dotnet/api/system.appdomain.unhandledexception?redirectedfrom=MSDN&view=netcore-3.1](https://docs.microsoft.com/en-us/dotnet/api/system.appdomain.unhandledexception?redirectedfrom=MSDN&view=netcore-3.1)

# testing - JUnit 是黑盒测试还是白盒测试？

> ID：10304216
> 
> 赞同：5
> 
> 时间：2012-04-24T18:52:27.680
> 
> 标签：testing, junit, black-box, white-box

JUnit 是黑盒测试还是白盒测试？我认为它是白盒，但我不确定。我正在寻找，但我找不到明确的答案。即使是对此进行简单的讨论也会很有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-12T07:34:40.813

在“JUnit”的名称中使用“单元”一词可能表明 JUnit 仅适用于单元测试，并且由于单元测试实际上是白盒测试的同义词，因此您的怀疑方向是正确的。然而，事情稍微有些微妙。

单元测试，当按照本书完成时，在所有情况下都必须是白盒测试，除非是在测试没有依赖关系的单元时。

对于没有依赖项的单元，单元测试和集成测试之间没有区别（没有要集成的依赖项），因此白盒测试与黑盒测试的概念是不适用的。

对于确实具有依赖关系的单元，单元测试必然是白盒测试，因为为了测试一个单元并且仅测试该单元，您不允许将其与其依赖项集成进行测试，因此您必须剥离其所有依赖关系，并用模拟替换它们，但这样做你声称不仅知道你的单元的依赖关系是什么，而且更重要的是，它以什么方式与它们交互。（它调用了哪些方法，使用了哪些参数等）。

然而，尽管“单元”是其名称的一部分，但 JUnit 本身并不限制您进行单元测试，因此它既没有强加白盒方法也没有强加黑盒方法。您可以使用 JUnit 进行任何您喜欢的测试。

正是添加了一个模拟框架，例如 JMock、Mockito 等，这将使您的测试必然是白盒类型的。

当我使用 JUnit 时，我只做我所说的*增量集成测试。*这意味着首先我测试所有没有依赖关系的单元，然后我对已经测试依赖关系的单元进行集成测试，依此类推，直到所有内容都测试完毕。在某些情况下，我将一些依赖项替换为面向测试的特殊实现（例如，HSQLDB 而不是实际的磁盘 RDBMS），但我***从不***使用模拟。因此，我***从不***进行单元测试，除了没有依赖关系的单元的边缘情况，正如我已经解释的那样，单元测试和集成测试之间没有区别。因此，我***从***不做白盒测试，我***只***做黑盒测试。我使用 JUnit 来完成所有这些工作。（或者我自己的测试平台，它在很大程度上与 JUnit 兼容。）

大多数行业似乎都在使用 JUnit 进行广泛的单元测试（白盒测试）以及它们的集成（黑盒）测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:50:36.650

基于白盒测试定义 JUnit 包含在这些测试形式中，包含这些技术：（例如，我们基于代码创建测试或提供测试所有可能路径所需的所有信息。这不仅包括正确的输入，还包括不正确的输入输入，以便也可以验证错误处理程序。）

# sql - oracle 长到数字的转换

> ID：10304218
> 
> 赞同：4
> 
> 时间：2012-04-24T18:52:30.610
> 
> 标签：sql, oracle, oracle10g

我正在尝试从 all_tab_partitions 表中获取当前分区的名称。当我尝试比较 high_value（长数据类型）和数字时。它抛出一个错误：

> ORA-00997: 非法使用 LONG 数据类型

```
SELECT PARTITION_NAME, HIGH_VALUE FROM ALL_TAB_PARTITIONS
WHERE TABLE_OWNER='SCHEMA_NAM'
AND TABLE_NAME='TABLE_NAME'
AND HIGH_VALUE>to_number(TO_CHAR(TRUNC(ADD_MONTHS(SYSDATE, 1), 'MONTH'), 'YYYYDDD'))
/ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T21:03:39.777

Long 类型存储较大的可变长度字符串，它不是数字类型。它有很多限制。Oracle 文档说：

LONG 值的使用受以下限制：

*   一个表只能包含一个 LONG 列。
*   您不能创建具有 LONG 属性的对象类型。
*   **LONG 列不能出现在 WHERE**或完整性约束中（除了它们可以出现在 NOT NULL 约束中）。
*   LONG 列不能被索引。
*   不能在正则表达式中指定 LONG。
*   存储函数返回 LONG 值。
*   您可以使用 LONG 数据类型声明 PL/SQL 程序单元的变量或参数。但是，您不能从 SQL 调用程序单元。
*   在单个 SQL 语句中，LONG 列、更新表和锁定表必须位于同一数据库中。LONG 和 LONG RAW 列不能用于分布式 SQL 语句，也不能复制。
*   如果一个表同时具有 LONG 和 LOB 列，那么您不能将超过 4000 字节的数据绑定到同一 SQL 语句中的 LONG 和 LOB 列。但是，您可以将超过 4000 字节的数据绑定到 LONG 或 LOB 列。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T11:45:06.913

为了检查或使用 LONG 列的值，您必须编写一些 PL/SQL，类似于

```
DECLARE
  strHigh_value  VARCHAR2(4000);
BEGIN
  FOR aRow IN (SELECT PARTITION_NAME, HIGH_VALUE
                 FROM ALL_TAB_PARTITIONS
                 WHERE TABLE_OWNER = 'SCHEMA_NAM' AND
                       TABLE_NAME = 'TABLE_NAME')
  LOOP
    strHigh_value := aRow.HIGH_VALUE;

    -- TODO: Manipulate strHigh_value in whatever manner you need

  END LOOP;
END; 
```

分享和享受。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-31T18:42:53.480

如果您不想编写任何 PL/SQL，请尝试使用（一般情况下）：

```
select 
    sys.dbms_metadata_util.long2varchar(4000, 'TABLE_NAME', 'COLUMN_NAME', tp.rowid) as COLUMN_NAME 
from 
   TABLE_NAME tp 
where 
   <your_condition on table TABLE_NAME> 
```

不要在表 TABLE_NAME 的 ...your_condition 中使用 COLUMN_NAME ...

在您的情况下，它有点复杂，因为您查询了一个 VIEW。有必要挖掘视图代码并将查询重写为：

```
select PARTITION_NAME, HIGH_VALUE from (
    select t.PARTITION_NAME, sys.dbms_metadata_util.long2varchar(4000, 'SYS.TABCOMPART$', 'HIBOUNDVAL', tp.rowid) as high_value
    from 
        all_tab_partitions t, sys.obj$ o, sys.tabcompart$ tp
    where 
        t.table_name = 'TABLE_NAME'
        and t.table_owner = 'SCHEMA_NAM'
        and o.name = t.table_name
        and o.subname = t.partition_name
        and o.obj# = tp.obj#(+)
)
where 
    high_value > to_number(TO_CHAR(TRUNC(ADD_MONTHS(SYSDATE, 1), 'MONTH'), 'YYYYDDD')) 
```

在 Oracle 11g 上测试

# ruby-on-rails - ActiveRecord as_json 返回不同的列名

> ID：10304221
> 
> 赞同：2
> 
> 时间：2012-04-24T18:52:50.000
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在尝试返回 ActiveRecord 的 JSON 表示，但不是让 JSON 字符串包含模型的键的列名，而是希望它每列显示不同的内容。有没有办法做到这一点？这是我的示例行

```
record.as_json(root: false, :only => [:message, :user]) 
```

我基本上希望它返回消息和用​​户列，但我想在它得到它们时称它们为别的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:49:29.693

我认为你过于复杂了。您只需要两列，那么为什么不手动完成呢？

```
def some_controller
    #...
    json = {
        :new_name_for_message => r.message,
        :new_name_for_user    => r.user
    }
    render :json => json, :status => :ok
end 
```

只需构建一个两元素哈希并将其交给 JSON 渲染系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:58:19.510

```
record.as_json(root: false, :only => [:user], :methods => [:message_html]) 
```

并在记录中定义该方法。

# perl - 访问子类中的基类函数

> ID：10304223
> 
> 赞同：0
> 
> 时间：2012-04-24T18:53:02.327
> 
> 标签：perl

我在我的基类中`use Storable qw/nfreeze thaw/;`，但我无法`nfreeze`在我的子类中访问。我在儿童班中称它为`nfreeze($data)`.

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T19:27:02.553

`Storable::nfreeze`并且`Storable::thaw`是*函数*而不是*方法*——它们不期望特定类型的对象或包名称作为它们的第一个参数。通常，您直接调用这些子例程 ( `nfreeze($data)`) 而不是使用间接语法 ( `$obj->thaw()`)，因此您不应期望它们位于继承的方法集中。

要在您的子类中使用这些函数，请将它们导入您的子包中

```
package ChildClass;
use Storable qw/nfreeze thaw/; 
```

或使用其完全限定的子例程名称调用函数：

```
Storable::nfreeze($data);
BaseClass::thaw($data); 
```

第二个调用有效，因为`nfreeze`/`thaw`已经被导入`BaseClass`命名空间。

# php - 用ajax加载html，但在加载之前隐藏内容

> ID：10304224
> 
> 赞同：2
> 
> 时间：2012-04-24T18:53:17.973
> 
> 标签：php, javascript, jquery, html

当用户单击链接时，我正在使用 jQuery 动态加载内容。内容只是一堆图像，然后设置为以幻灯片形式显示。我的问题是，我似乎无法找到一种仅在图像完全加载后才显示加载内容的方法。我尝试了几种不同的解决方案，但它们似乎要么破坏了脚本，要么就是不能按照我想要的方式工作。这是我现在使用的代码：

```
$(document).ready(function() {

$("a#item").click( function() {

   var projectName = $(this).attr('class');

   $("div.slideshow").css("display", "block");

   $("div.slideshow").load(projectName+".php", function() {

        var slideshow = new Array();

        $("div.slideshow img").each(function() {
            slideshow.push($(this));
        });

        startSlideshow(slideshow.shift());

        function startSlideshow(image) {
            image.delay(400).fadeIn(150, function() {
                if(slideshow.length > 0) {startSlideshow(slideshow.shift());}
                else { $("div.slideshow").delay(400).fadeOut(200, function() {$("div.slideshow img").css("display", "none")}); }

            });
        }
   });

   return false;

});

}); 
```

您还可以在此处查看完整的演示站点：[http ://publicprofileproject.com/](http://publicprofileproject.com/)

任何投入将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:11:15.913

您可以在 JavaScript 中创建一个图像对象数组，将每个图像加载到数组的一个元素中。将事件处理程序附加到图像的 onLoad 事件。

在事件处理程序中，增加已加载图像的计数。当您的计数器达到数组的长度时，浏览器将拥有所有图像。这是您可以显示幻灯片的地方。

如果您在页面加载中执行此操作，它将具有额外的优势，即在用户单击您的链接时预加载图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:11:26.193

我相信这个问题已经在[这里](https://stackoverflow.com/a/1257402/469643)得到了回答。

一般的想法是在指定源属性之前指定一个加载事件处理程序来显示它。

或者，如果您的`projects+".php"`文件在现成的 html 标记中指定图像，那么您应该能够捕获正在加载的文件中图像的加载事件。将以下伪代码添加到正在加载的文件中。

```
$("img").load(function() {
    // show the div on the page it is getting loaded into
    alert("images should be loaded now");
}); 
```

您也许可以将它放在您的原始代码段中，并可能使用`live`/`on`绑定事件绑定它。前任：`$("img").on("load", function() {...`

从[加载文档](http://api.jquery.com/load-event/)：

> 当元素和所有子元素都已完全加载时，加载事件将发送到该元素。此事件可以发送到与 URL 关联的任何元素：图像、脚本、框架、iframe 和窗口对象。

**编辑**：做看起来像你正在做的事情有趣的沮丧：

> 与图像一起使用时加载事件的注意事项
> 
> 开发人员尝试使用 .load() 快捷方式解决的一个常见挑战是在图像（或图像集合）完全加载时执行一个函数。应该注意几个已知的警告。这些是：
> 
> *   它不能始终如一地工作，也不能可靠地跨浏览器
> *   如果图像 src 设置为与以前相同的 src，它不会在 WebKit 中正确触发
> *   它没有正确地冒泡 DOM 树
> *   可以停止对已经存在于浏览器缓存中的图像进行触发

# php - strpos：在 .ini 文件中查找值

> ID：10304225
> 
> 赞同：0
> 
> 时间：2012-04-24T18:53:19.980
> 
> 标签：php, newline, ini, strpos

我有一些如下所示的代码：

```
if (strpos($stringt, $key . '=') === false) {
    ...some code...
} 
```

并且应该检查 .ini 文件中是否存在特定的 key=value 对。.ini 文件只是一个 PHP .ini 文件，其中包含 KEY=String 值，每行一个。

问题是，如果一个较短的键恰好出现在一个较长的键中，则该行将返回 true 而不是 false。例如，如果键/值 PROBLEM=problem 存在并且您使用：$key = 'EN' 进行检查，则例程将返回 true，因为 $strpos 将匹配较长字符串 'HAPPEN=' 中的 'EN='。我怎样才能让 strpos 只从新行的开头匹配一个键（我试过 '\n' . $key . '=' 但这不起作用）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:55:05.257

我只会使用 PHP 的内置 INI 解析器：

[http://php.net/manual/en/function.parse-ini-file.php](http://php.net/manual/en/function.parse-ini-file.php)

```
print_r(parse_ini_file('yourinihere.ini')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:59:26.457

```
if (strpos($stringt, "\n" . $key . '=') === false) {
    ...some code...
} 
```

你必须使用`"\n"`而不是`'\n'`

# vb.net - 将字符串枚举为字节？

> ID：10304227
> 
> 赞同：1
> 
> 时间：2012-04-24T18:53:33.160
> 
> 标签：vb.net, enums

我正在寻找一种在 (vb).NET 中枚举字符串类型的方法，但 .NET 枚举只接受数字类型值。

我遇到的第一个选择是创建一个包含我的枚举值和我想要返回的字符串的字典。这很有效，但很难维护，因为如果您更改了枚举，您还必须记住还要更改字典。

第二种选择是在每个枚举成员上设置字段属性，并使用反射检索它。当然，这也很有效，也解决了维护问题，但它使用反射，我一直读到使用反射应该是最后的手段。

所以我开始思考，我想出了这个：每个 ASCII 字符都可以表示为一个十六进制值，并且可以将十六进制值分配给枚举成员。您可以摆脱属性，将十六进制值分配给枚举成员。然后，当您需要文本值时，将该值转换为字节数组并用于 `System.Text.Encodings.ASCII.GetString(enumMemberBytes)`获取字符串值。

现在根据经验，我想出的任何东西通常要么有缺陷，要么就是完全错误的。大家觉得这种做法怎么样？有什么理由不这样做吗？

谢谢。

**编辑**

正如 David W 所指出的，枚举成员值的长度是有限的，具体取决于底层类型（默认为整数）。所以是的，我相信我的方法有效，但您仅限于[ASCII 表](http://www.asciitable.com/)中的字符，最大长度为 4 或 8 个字符，分别使用整数或长整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:25:18.557

我发现将枚举的字符串表示动态解析为实际枚举类型的最简单方法是执行以下操作：

```
Private EnumObject
     [Undefined]
     ValueA
     ValueB
End Enum

dim enumVal as EnumObject = DirectCast([Enum].Parse(GetType(EnumObject), "ValueA"), EnumObject) 
```

这消除了维护字典的需要，并允许您只处理字符串而不是转换为 Int 或 Long。这确实使用了反射，但只要您使用 String Parse 捕获并处理任何异常，我就没有遇到任何问题。

# ios - UIPopoverController 的动画动作？

> ID：10304229
> 
> 赞同：0
> 
> 时间：2012-04-24T18:53:36.297
> 
> 标签：ios, ipad

因此，我有一个设置，其中 UIPopoverController 在文本视图中的光标处显示信息。当光标移动时，我再次呈现它。但这很不和谐，我希望弹出框以流畅、动画的方式移动。我真的必须通过使用一系列 presentFromRect 调用手动执行此操作，还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:00:35.187

不幸的是`UIPopover`， s 并不是为了像那样移动而设计的。

做到这一点而不重新呈现它的唯一方法是编写自己的`UIPopover`替换并使用标准`CAAnimation`或`UIKit`动画技术为其位置设置动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:01:47.230

如果认为没有 use 就无法做到这一点`presentFromRect`。但是，如果您真的想这样做，请创建自己的。使用 UIView 重新创建弹出控制器的外观并跟踪触摸。您可以使用[WEPopover 之](https://github.com/werner77/WEPopover)类的替代方法。

# android - 从 Android 的生产代码中删除日志记录？

> ID：10304231
> 
> 赞同：24
> 
> 时间：2012-04-24T18:53:39.050
> 
> 标签：android

从生产 android 应用程序中删除日志记录的最佳方法是什么。看来 proguard 并没有完全做到这一点，字符串仍然被写入，所以我想知道从生产代码中删除日志记录的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-24T19:01:11.963

IMO 最好的解决方案是在调用日志记录方法的任何地方编写如下代码。

```
if (SOME_LOG_CONSTANT) Log.d(TAG, "event:" + someSlowToEvaluateMethod()); 
```

通过更改 1 个常量，您可以删除所有不需要的日志记录。这样后面的部分`if (false)`甚至不应该进入您的 .class 文件，因为编译器可以完全删除它（它是无法访问的代码）。

这也意味着如果您将整个代码块包装在`if`. 这是连proguard都做不到的。

如果您使用 SDK Tools r17 及更高版本，则可以`SOME_LOG_CONSTANT`。`BuildConfig.DEBUG`该常量会根据构建类型自动为您更改。谢谢@Christopher

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-09-12T19:22:02.770

使用 Timber，这是一个配置日志的好库： [https ://github.com/JakeWharton/timber](https://github.com/JakeWharton/timber)

使用示例：Timber.d("Activity Created");

配置示例：

```
public class ExampleApp extends Application {
  @Override public void onCreate() {
   super.onCreate();

    if (BuildConfig.DEBUG) {
     Timber.plant(new DebugTree());
    } else {
     Timber.plant(new CrashReportingTree());
    }
  }

/** A tree which logs important information for crash reporting. */
 private static class CrashReportingTree extends Timber.Tree {
   @Override protected void log(int priority, String tag, String message, Throwable t) {
     if (priority == Log.VERBOSE || priority == Log.DEBUG) {
       return;
     }

     FakeCrashLibrary.log(priority, tag, message);

     if (t != null) {
       if (priority == Log.ERROR) {
         FakeCrashLibrary.logError(t);
       } else if (priority == Log.WARN) {
         FakeCrashLibrary.logWarning(t);
       }
     }
   }
 } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-24T19:00:26.060

[为发布配置您的应用程序](http://developer.android.com/guide/publishing/preparing.html#publishing-configure)告诉您在发布您的应用程序之前简单地删除`Log`命令。

> 您可以通过删除源文件中对 Log 方法的调用来停用日志记录。

我所做的是创建一个专有的静态日志方法，该方法读取这样的全局布尔值：

```
class MyLog {

    private static final boolean LOGGING = true; //false to disable logging

    public static void d(String tag, String message) {
        if (LOGGING) {
            Log.d(tag, message);
        }
    }

    /* ... same for v, e, w, i */
} 
```

在您想记录的任何地方使用它。

```
MyLog.d("Tag", "This will only work with LOGGING true"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-15T15:03:23.230

我建议你看看这个[日志扩展类](https://github.com/dbauduin/Android-Tools/tree/master/logs)。

它使您能够对日志进行精细控制。例如，您可以禁用所有日志（感谢配置文件）或仅禁用某些包或类的日志。

此外，它还添加了一些有用的功能（例如，您不必为每个日志传递标签）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-13T12:07:16.810

只需将此方法添加到您的代码中并使用 Logd 而不是 Log.d

```
private static final String TAG = "your own tag to recognize log entries from this app";

public static void Logd(String txt) {
    if (BuildConfig.DEBUG&&BuildConfig.BUILD_TYPE.equals("debug")) Log.d(TAG,txt);
} 
```

我知道字符串仍将被评估，但我们在额外的处理时间中谈论微秒。除非您在一个循环中执行数千次日志记录，否则没有人会注意到应用程序速度的差异。

DEBUG 和 BUILD_TYPE 可用并在 Android Studio 中工作。DEBUG 布尔值是 build.gradle 文件中的“可调试”选项：

```
buildTypes {
    debug {
        debuggable true
        runProguard false
        proguardFile getDefaultProguardFile('proguard-android.txt')
    }
    release {
        debuggable false
        runProguard true
        proguardFile getDefaultProguardFile('proguard-android.txt')
    }
} 
```

当您在 Android Studio 中运行时，BUILD_TYPE 会自动设置为“调试”。

因此，如果您将 debuggable 设置为 false 或用户拥有发布版本，那么日志将消失。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T19:00:28.983

我建议您查看 Roboguice - [http://code.google.com/p/roboguice/](http://code.google.com/p/roboguice/) - 如果您使用内置的 Ln 功能，它将自动不登录已签名的 APK。它还简化了大量其他 Android 样板。您可以使用 Basedroid 看到它的实际效果 - [https://github.com/achuinard/basedroid](https://github.com/achuinard/basedroid)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-05T08:08:51.623

您可以使用[DebugLog](https://github.com/MustafaFerhan/DebugLog)类。发布应用时，DebugLog 会禁用所有日志。它为开发人员提供了更易理解的 DDMS 日志。

前任;

```
DebugLog.e("your message"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-22T11:16:09.260

最好的方法是根据我的经验来处理这个问题，

*   首先在记录时检查 BuildConfig.DEBUG 标志以打印日志。

    ```
    Class LogUtils{

        public static void log(Class clazz, String message) {
            if (BuildConfig.DEBUG) {//log only in debug mode
            Log.d(clazz.getSimpleName(), message);
            }
        }
    } 
    ```

*   然后启用 minify 到您的应用程序模块 gradle 文件，这将使 proguard 能够优化您的二进制文件

    ```
    android {
        buildTypes {
            release {
                minifyEnabled true
                //shrinkResources true
                proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
                signingConfig signingConfigs.release
            }
        }
    } 
    ```

这将在您的调试版本中保留调试日志。但是在您的发布版本中，`if (BuildConfig.DEBUG)`条件永远不会成立，因此 proguard 将从您的二进制文件中删除无法访问的日志代码。

# c - 结构声明：声明中的有效初始化程序？

> ID：10304237
> 
> 赞同：5
> 
> 时间：2012-04-24T18:53:58.980
> 
> 标签：c, struct, declaration, definition

我在 IDE (Netbeans) 中声明一个结构，如下所示：

`struct foo { size_t var = 1; }`

IDE 说它是合法的。我编译了这个项目（它是一个静态库..），编译器说它是合法的（不抱怨或抛出）。

现在，由于此时我只是在测试语法，因此我必须询问可能知道这是否真的有效的人，当我在我的程序中声明此标记的结构时，如下所示：

`struct foo myfoo;`

所以问题是：这是一个有效的初始化程序吗？( `size_t var = 1`) 还是编译器只是在这里抚摸我的自我？我在谷歌或类似的文档中没有找到任何东西，所以我猜它不会像我希望的那样工作。

*编辑所以我和这里的好兄弟@SO发现它将在调试配置中编译，而不是在发布配置中编译。谁说一头不如一两千？:D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T18:58:04.583

我不认为这是允许的。您需要指定变量的值，而不是结构：

```
struct foo { size_t var; };

struct foo myfoo = { 1 }; 
```

至于允许它的IDE，明显的可能性是代码确实有点不同，例如：

```
struct foo { static const size_t var = 1; } 
```

...*并且*IDE 将其编译为 C++ 而不是 C。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:13:03.247

简单的答案是：**您不能在 struct 定义中进行初始化**，因此如果编译器允许您这样做，就会发生一些奇怪的事情。

要初始化，您必须在 var 中实例化该结构（或对象，如果这是您想要的）并初始化该 var。

因此，对于您的结构：

```
struct foo {
    size_t var = 1;
} 
```

你会初始化为：

```
type function_name(...params...) {
    struct foo myFooVar;
    myFooVar.var = 1;
    ....
    return <type>;
} 
```

# json - 在 Google Refine 中解析 JSON

> ID：10304238
> 
> 赞同：7
> 
> 时间：2012-04-24T18:53:59.747
> 
> 标签：json, parsing, google-refine

我正在尝试使用 Google Refine 从数据科学工具包坐标 2 政治 API 的结果中提取特定元素。

这是示例单元#1：

```
[{"politics":[
 {"type":"admin2","friendly_type":"country","code":"usa","name":"United States"},
 {"type":"admin6","friendly_type":"county","code":"55_025","name":"Dane"},
 {"type":"constituency","friendly_type":"constituency","code":"55_02","name":"Second district, WI"},
 {"type":"admin5","friendly_type":"city","code":"55_48000","name":"Madison"},
 {"type":"admin5","friendly_type":"city","code":"55_53675","name":"Monona"},
 {"type":"admin4","friendly_type":"state","code":"us55","name":"Wisconsin"},
 {"type":"neighborhood","friendly_type":"neighborhood","code":"Eastmorland|Madison|WI","name":"Eastmorland"}
 ],"location":{"longitude":"-89.3259404","latitude":"43.0859191"}}] 
```

我使用此 GREL 语法在此列的基础上添加了一个列，以提取 Dane 县：

```
value.parseJson()[0]["politics"][1]["name"] 
```

但是当我到达 Sample Cell #2 时，语法不再有效，因为 JSON 结果有点不同：

```
[{"politics":[
 {"type":"admin2","friendly_type":"country","code":"usa","name":"United States"},
 {"type":"constituency","friendly_type":"constituency","code":"55_05","name":"Fifth district, WI"},
 {"type":"admin4","friendly_type":"state","code":"us55","name":"Wisconsin"},
 {"type":"admin6","friendly_type":"county","code":"55_079","name":"Milwaukee"},
 {"type":"admin5","friendly_type":"city","code":"55_84675","name":"Wauwatosa"},
 {"type":"constituency","friendly_type":"constituency","code":"55_04","name":"Fourth district, WI"}
 ],"location":{"longitude":"-88.0075875","latitude":"43.0494572"}}] 
```

是否有某种方法可以对 JSON 进行排序或对我的语法进行短语化，以便在任何一种情况下都能找到县？

### 更新

这是神奇的 GREL，它允许我按名称查找 JSON 字符串中的元素，而不仅仅是位置：

```
filter(value.parseJson()[0]["politics"], item, item["type"]=="admin6")[0]["name"] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T14:38:25.193

名为的字段`politics`是一个数组，您可以返回：

```
value.parseJson()[0]["politics"] 
```

该数组的一个元素与县相关联（它的`friendly_type`字段为“县”）。因此，您需要过滤该`politics`字段以找到`friendly_type`属于县的字段，如下所示：

```
filter(value.parseJson()[0]["politics"], item, item["friendly_type"]=="county") 
```

这将返回一个包含一个元素的数组。您想`name`从那个元素中取出该字段，因此您需要提取`name`第零个数组元素的 ，从而形成完整的表达式：

```
filter(value.parseJson()[0]["politics"], item, item["friendly_type"]=="county")[0]["name"] 
```

# python - 从目录树中获取任意文件

> ID：10304244
> 
> 赞同：2
> 
> 时间：2012-04-24T18:54:09.150
> 
> 标签：python, file, operating-system, directory, performance

我想获取目录树中某处存在的任意文本文件（带有*.txt后缀）的路径。*该文件不应隐藏或在隐藏目录中。

我试图编写代码，但它看起来有点麻烦。您将如何改进它以避免无用的步骤？

```
def getSomeTextFile(rootDir):
  """Get the path to arbitrary text file under the rootDir"""
  for root, dirs, files in os.walk(rootDir):
    for f in files:
      path = os.path.join(root, f)                                        
      ext = path.split(".")[-1]
      if ext.lower() == "txt":
        # it shouldn't be hidden or in hidden directory
        if not "/." in path:
          return path               
  return "" # there isn't any text file 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:50:03.113

使用`os.walk`（如您的示例）绝对是一个好的开始。

您可以使用`fnmatch`（[此处链接到文档](http://docs.python.org/library/fnmatch.html)）来简化其余代码。

例如：

```
...
    if fnmatch.fnmatch(file, '*.txt'):
        print file
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T19:53:05.740

我会使用[fnmatch](http://docs.python.org/library/fnmatch.html#module-fnmatch)而不是字符串操作。

```
import os, os.path, fnmatch

def find_files(root, pattern, exclude_hidden=True):
    """ Get the path to arbitrary .ext file under the root dir """
    for dir, _, files in os.walk(root):
        for f in fnmatch.filter(files, pattern):
            path = os.path.join(dir, f)
            if '/.' not in path or not exclude_hidden:
                yield path 
```

我还将函数重写为更通用（和“pythonic”）。要仅获取一个路径名，请像这样调用它：

```
 first_txt = next(find_files(some_dir, '*.txt')) 
```

# javascript - 无法在 Twitter Bootstrap 切换选项卡中设置默认值

> ID：10304245
> 
> 赞同：6
> 
> 时间：2012-04-24T18:54:12.150
> 
> 标签：javascript, tabs, twitter-bootstrap, nav

单击时选项卡可以很好地工作，但在窗口加载时选择默认选项卡失败。javascript运行，没有错误，但没有任何反应。有任何想法吗？

```
<head>
<link href="/assets/bootstrap.css?body=1" media="screen" rel="stylesheet" type="text/css" />
</head>

<script>
  //<![CDATA[
    window.onload=function () {
      $('#client_tab2').tab();
      };
  //]]>
</script>
<ul class='nav nav-tabs' id='tab'>
  <li><a href="#client_tab1" data-toggle="tab">General</a></li>
  <li><a href="#client_tab2" data-toggle="tab">Applications</a></li>
  <li><a href="#client_tab3" data-toggle="tab">Family</a></li>
  <li><a href="#client_tab4" data-toggle="tab">Memos</a></li>
</ul>

<form accept-charset="UTF-8" action="/clients/4512" class="simple_form client tab-content" id="edit_client_4512" method="post" novalidate="novalidate">
  <div class='tab-pane active' id='client_tab1'>
  <legend>General Information</legend>
  </div>

  <div class='tab-pane' id='client_tab2'>
  <legend>Application Information</legend>
  </div>

  <div class='tab-pane' id='client_tab3'>
  <legend>Family</legend>
  </div>

  <div class='tab-pane' id='client_tab4'>
  <legend>Memos</legend>
  </div>
</form> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T19:04:31.927

你的选择器错了，试试这样吧：

```
$(window).load(function(){
    $('#tab a[href="#client_tab2"]').tab('show');
}); 
```

演示：http: [//jsfiddle.net/TjjKE/](http://jsfiddle.net/TjjKE/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-26T16:17:08.467

您还可以将默认选项卡设置为活动状态`<li class="active"><a href="#whatever">....</a></li>`，然后在相应的选项卡上设置`<div id="whatever" class="tab-pane active">..</div>`并消除对更多 JS 的需要。看看[这个](http://twitter.github.com/bootstrap/javascript.html#tabs)

# sql-server - 将数据导入 MS SQL 数据库

> ID：10304248
> 
> 赞同：2
> 
> 时间：2012-04-24T18:54:14.290
> 
> 标签：sql-server, import

我正在尝试确定如何将一些 CSV 数据导入 MS SQL 数据库。

不幸的是，它并不像听起来那么简单，因为涉及的不止一张桌子。此外，一些字段将从 CSV 中提取，而其他字段将具有固定值。

在关联多个表方面，我的逻辑如下：

```
IF <select count(course_name) from tbl_courses WHERE course_name = 'value from csv'> GT 0
THEN
  ADD <data> to TBL_ITEM using PK from TBL_COURSES
ELSE
  CREATE ROW in TBL_COURSES WITH <data>
  ADD <data> to TBL_ITEM using PK from TBL_COURSES
END IF 
```

有没有办法将我的 CSV 中的字段映射到 tbl_item （同时根据需要向 tbl_courses 添加一行？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:33:06.817

您不能以这种方式直接进行导入。您需要先将 CSV 导入临时表（其名称无关紧要 - 只需将所有内容批量导入其中）。

在关系表中提供 CSV 后，您可以执行任何您想要的 SQL。您可以通过这种方式执行任意导入过程。

完成后，您可以删除临时表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:44:55.937

基本上，您想开始基于思维定势并执行以下步骤：

1.  将 CSV 导入临时表。

2.  从您的临时表中选择插入到您的课程表中，您也可以包含您的静态数据，但请确保区分以确保不会重复输入。

3.  从临时表中选择插入到项目表中，包括课程表 PK 将取决于您的 CSV 数据。如果您已经将唯一的课程 ID 作为 CSV 数据的一部分，那就太好了，否则您可以将子查询作为插入的一部分。

这是我试图解释的一个例子，如果它有帮助，显然 courseData 和 itemData 真的是你的字段集......

```
-- setup for example
declare @course table (courseId int, courseData varchar(50))
declare @item table (itemId int, courseId int, itemData varchar(50))

declare @csvdata table (courseid int, coursedata varchar(50), itemid int, itemdata varchar(50))

insert into @csvdata 
values (1, 'a', 1, 'b'), (1, 'a', 2, 'c'), (2, 'b', 3, 'c')

-- the important bit
insert into @course
select distinct courseId, courseData
from @csvdata

insert into @item
select itemId, courseId, itemData
from @csvdata

select * from @course
select * from @item 
```

# javascript - 如何保存具有重复ID的子集合元素？

> ID：10304249
> 
> 赞同：0
> 
> 时间：2012-04-24T18:54:15.393
> 
> 标签：javascript, backbone.js, backbone-relational

以下代码中表示的问题：http: [//jsfiddle.net/W7Rq9/](http://jsfiddle.net/W7Rq9/)

我有一系列模型（照片）。每个模型（照片）都有自己的集合（标签），有时存储的数据`tags`会重复。当我获取我的集合时`photos`，重复`tags`的被删除。

[我认为在示例http://jsfiddle.net/W7Rq9/](http://jsfiddle.net/W7Rq9/)中会更清楚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:42:53.673

Backbone 不允许具有相同 id 的两个对象在同一个集合中。

您可以给它们一个唯一的 id 和/或更改用作对象 id 的属性，但是您设置为对象 id 的任何属性对于给定集合中的所有对象都必须是唯一的。

# c# - 根据单元格值的比较更改 WPF DataGrid 单元格字体

> ID：10304271
> 
> 赞同：0
> 
> 时间：2012-04-24T18:55:38.267
> 
> 标签：c#, wpf, datagrid

我是使用 WPF DataGrid 的新手，我有点迷路了。我拥有的是一个带有数值的 DataTable，我通过 DataView 将 DataGrid 绑定到它。我想要做的是比较每列的值，并使每列具有较大值的单元格变为粗体。（例如，谁在每个类别中获胜）

没有 ObservableCollection，没有花哨的东西。我只是以“手动”方式将数据添加到 DataTable，从 SQLite 数据库 DataTable 响应中逐个单元格地获取值。甚至列也是以编程方式创建的，而不是通过 XAML。我几乎没有 XAML 方面的经验，所以不要以为我使用过触发器或任何东西。

我将如何去做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:35:56.627

从小例子开始。您可以创建一些测试数据，您可以使用这些数据尝试数据绑定技术。尝试设计一些部分的样式`DataGrid`：改变颜色`Foreground`，添加`Border`一些`BorderBrush`。自己探索 WPF - 仅第一个视图很难。

以下是一些方法：

*   [在 WPF 中使用转换器](http://www.switchonthecode.com/tutorials/wpf-tutorial-binding-converters)
*   [使用绑定](http://msdn.microsoft.com/en-us/magazine/cc163299.aspx)
*   [为 DataGrid 元素使用样式和模板](http://blogs.msdn.com/b/jaimer/archive/2009/01/20/styling-microsoft-s-wpf-datagrid.aspx)
*   [使用 MVVM](https://stackoverflow.com/questions/1662309/good-examples-of-mvvm-template)

# objective-c - UIAlertView 具有用户提供的上下文和 [self autorelease]

> ID：10304273
> 
> 赞同：2
> 
> 时间：2012-04-24T18:55:39.517
> 
> 标签：objective-c, ios, uialertview

我已经查看了一些关于如何为 UIAlertView 提供上下文的想法。常见的答案是将其保存在字典或 UIAlertView 的子类中。我不喜欢将上下文保存在字典中的想法，这是数据的错误位置。Apple 不支持子类化 UIAlertView，因此按照我的标准，这不是一个好的解决方案。

我想出了一个主意，但我不知道该怎么做。创建一个上下文对象的实例，它是 UIAlertView 的委托。反过来，警报视图上下文有它自己的委托，即视图控制器。

问题是释放内存。我将 alertView.delegate 设置为 nil 并调用 [self autorelease] 以释放 -alertView:didDismissWithButtonIndex: 中的上下文对象。

**问题是**：我给自己造成了什么问题？我怀疑我正在为一个微妙的记忆错误做好准备。

这是仅支持 -alertView:clickedButtonAtIndex 的简单版本：

### 采用

```
- (void)askUserIfTheyWantToSeeRemoteNotification:(NSDictionary *)userInfo
{
    [[[[UIAlertView alloc] initWithTitle:[userInfo valueForKey:@"action"]
                                 message:[userInfo valueForKeyPath:@"aps.alert"]
                                delegate:[[WantAlertViewContext alloc] initWithDelegate:self context:userInfo]
                       cancelButtonTitle:@"Dismiss"
                       otherButtonTitles:@"View", nil] autorelease] show];
}
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex withContext:(id)context
{
    if (buttonIndex != alertView.cancelButtonIndex)
        [self presentViewForRemoteNotification:context];
} 
```

### 界面

```
@protocol WantAlertViewContextDelegate <NSObject>
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex withContext:(id)context;
@end

@interface WantAlertViewContext : NSObject <UIAlertViewDelegate>
- (id)initWithDelegate:(id<WantAlertViewContextDelegate>)delegate context:(id)context;
@property (assign, nonatomic) id<WantAlertViewContextDelegate> delegate;
@property (retain, nonatomic) id context;
@end 
```

### 执行

```
@implementation WantAlertViewContext
- (id)initWithDelegate:(id<WantAlertViewContextDelegate>)delegate context:(id)context
{
    self = [super init];
    if (self) {
        _delegate = delegate;
        _context  = [context retain];
    }
    return self;
}
- (void)dealloc
{
    [_context release];
    [super dealloc];
}
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    [self.delegate alertView:alertView clickedButtonAtIndex:buttonIndex withContext:self.context];
}
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    alertView.delegate = nil;
    [self autorelease];
}
@synthesize delegate = _delegate;
@synthesize context  = _context;
@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T05:21:04.477

您可以使用关联对象的概念。使用函数`objc_setAssociatedObject()`和`objc_getAssociatedObject()`。您可以使用这些属性本质上添加一个新属性，在您的情况下`NSDictionary`，通过类别将 , 保存到对象中。

这是一个`UIAlertView`类别的示例。如果项目使用 ARC ，则这些文件应该在不设置`ARC`,标志的情况下编译。`-fno-objc-arc`

**UIAlertView+WithContext.h：**

```
#import <UIKit/UIKit.h>
@interface UIAlertView (Context)
@property (nonatomic, copy) NSDictionary *userInfo;
@end 
```

**UIAlertView+WithContext.m：**

```
#import "UIAlertView+WithContext.h"
// This enum is actually declared elseware
enum {
    OBJC_ASSOCIATION_ASSIGN = 0,
    OBJC_ASSOCIATION_RETAIN_NONATOMIC = 1,
    OBJC_ASSOCIATION_COPY_NONATOMIC = 3,
    OBJC_ASSOCIATION_RETAIN = 01401,
    OBJC_ASSOCIATION_COPY = 01403
};
@implementation UIAlertView (Context) 
static char ContextPrivateKey;
-(void)setUserInfo:(NSDictionary *)userInfo{
    objc_setAssociatedObject(self, &ContextPrivateKey, userInfo, 3);
}
-(NSDictionary *)userInfo{
    return objc_getAssociatedObject(self, &ContextPrivateKey);
}
@end 
```

这个类别很容易使用。

**SomeViewController.m: 是否**使用`UIAlertViewDelegate`ARC。

```
-(void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title" message:@"Message" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    alert.userInfo = [NSDictionary dictionaryWithObject:@"Hello" forKey:@"Greeting"];// autorelease if MRC
    [alert show]; // release if MRC
}

-(void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex{
    NSLog(@"userInfo:%@",alertView.userInfo);
} 
```

当您按下 alertview 的 OK 按钮时，您将看到：

```
userInfo:{
    Greeting = Hello;
} 
```

几点注意事项：

1) 确保关联类型与属性声明匹配，以便事情按预期运行。

2）您可能不应该使用`userInfo`该属性/关联，因为 Apple 可能会决定在未来添加一个`userInfo`属性。`UIAlertView`

**编辑** *以解决您对您的`[self autorelease];`*

`alloc`您必须从这一行平衡您的隐式保留： `delegate:[[WantAlertViewContext alloc] initWithDelegate:self context:userInfo]`. `[self autorelease];`您可以通过调用最终`UIAlertView`委托方法来实现这种平衡。

诚然，这确实感觉不对。主要是因为在看这个的时候没有办法让它乍看起来不像是内存管理不善。但是有一种简单的方法可以避免您正在创建的这种“受控泄漏”API；让实例`WantAlertViewContext`显式保留自身。例如：

```
-(id)initWithDelegate:(id<WantAlertViewContextDelegate>)delegate context:(id)context{
    self = [super init];
    if (self) {
        _delegate = delegate;
        _context  = [context retain];
    }
    return [self retain]; // Explicitly retain self
}

-(void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex{
    alertView.delegate = nil;
    [self autorelease]; // Or just [self release]; doesn't make much difference at this point
} 
```

现在你的班级有了一些内在的和谐。我说一些是因为这仍然不完美。例如，如果一个实例从不是警报视图委托，它将永远不会被释放。它仍然只是一个“半可控”的内存泄漏。

无论如何，现在您的实例化调用看起来更合乎逻辑：

```
delegate:[[[WantAlertViewContext alloc] initWithDelegate:self context:userInfo] autorelease]; 
```

我认为这种特殊的设计模式充满了危险。如果您最终使用它，请密切关注它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T05:55:23.420

我想出了一个更简单的解决方案，可能适合某些情况。因为您在调用委托时获得了 NSAlertView 上下文，所以我使用对象的实际地址来创建一个标记 (NSString*)，然后我使用该标记将自定义值存储在全局或对象特定的 NSDictionary 中。这是一个例子：

```
+(NSString*)GetTag:(id)ObjectIn
{
    return [NSString stringWithFormat:@"Tag-%i",(int)ObjectIn];
} 
```

在代表中：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString* MyID = [CommandManager GetTag:alertView];
    [CurrentActiveAlerts removeObjectForKey:MyID];
} 
```

来电：

```
UIAlertView *myAlert = [[UIAlertView alloc] initWithTitle:title_text
                                                          message:@""
                                                     delegate:self
                                            cancelButtonTitle:nil
                                        otherButtonTitles:button_text ,nil];

    CurrentActiveAlerts[[CommandManager GetTag:myAlert]] = CommandToRun;        // Querky way to link NSDict to UIAlert, but the best I could think of
    [myAlert show];
    [myAlert release]; 
```

这些键最终看起来像“Tag-226811776”。希望这可以帮助。

# php - 成功登录后如何重定向到引用页面/url？

> ID：10304276
> 
> 赞同：0
> 
> 时间：2012-04-24T18:55:42.663
> 
> 标签：php, session, redirect, login

我知道这个主题之前已经在 Stack 上讨论过，我也看过一些答案，但我仍然有点卡住，对 PHP 来说还是个新手。我网站上的每个页面都需要登录，因此用户在页面加载时被重定向到登录页面。在每一页的顶部，我有：

```
<?
require("log.php");
include_once("config.php"); 
include_once("functions.php"); 
?> 
```

这会将用户重定向到 log.php（添加了新代码）：

```
<?
session_name("MyLogin");
session_start();

    if(isset($_SESSION['url'])) 
       $url = $_SESSION['url']; // holds url for last page visited.
    else 
       $url = "index.php"; // default page for

if($_GET['action'] == "login") {
$conn = mysql_connect("localhost","",""); // your MySQL connection data
$db = mysql_select_db(""); //put your database name in here 
$name = $_POST['user'];
$q_user = mysql_query("SELECT * FROM users WHERE login='$name'");

if (!$q_user) {
    die(mysql_error());
}

if(mysql_num_rows($q_user) == 1) {

$query = mysql_query("SELECT * FROM users WHERE login='$name'");
$data = mysql_fetch_array($query);
if($_POST['pwd'] == $data['password']) { 
$_SESSION["name"] = $name;
header("Location: http://monthlymixup.com/$url"); // success page. put the URL you want 
exit;
} else {
header("Location: login.php?login=failed&cause=".urlencode('Wrong Password'));
exit;
}
} else {
header("Location: login.php?login=failed&cause=".urlencode('Invalid User'));
exit;
}
}

// if the session is not registered
if(session_is_registered("name") == false) {
header("Location: login.php");
}

?> 
```

登录表单包含在 login.php 中。与 PHP/log.php 相关的 login.pho 的代码是：

```
<?
session_start();

if($_GET['login'] == "failed") {
print $_GET['cause'];
}
?> 
```

和

```
<form name="login_form" id="form" method="post" action="log.php?action=login"> 
```

我遇到的答案表明我应该添加：

```
session_start(); // starts the session
$_SESSION['url'] = $_SERVER['REQUEST_URI']; 
```

到我所做的每个页面的顶部（在“require（”log.php“）;”上方），然后添加：

```
if(isset($_SESSION['url'])) 
   $url = $_SESSION['url']; // holds url for last page visited.
else 
   $url = "index.php"; // default page for 
```

到我的登录页面，并在成功登录时使用以下 URL 进行重定向：

```
header("Location: http://example.com/$url"); // perform correct redirect. 
```

我不是 100% 存储引用 URL 的代码应该放在 log.php 或 login.php 的顶部。

我已经尝试将它添加到两者中，但是一旦我输入了用户名和密码，登录页面就会循环。

我想知道是否有人可以帮助我完成这项工作？

谢谢，

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:12:04.647

看来我没有权限评论你的帖子，所以我会尽力回答。我为所有的情况道歉，我只是尽我所能一时兴起回答。

## 场景 1：

如果您确实没有在代码中选择数据库，如此处所示，这可能是您的问题吗？请注意，下面的代码是您发布的代码。

```
$db = mysql_select_db(""); //put your database name in here 
```

## 场景 2：

下面的代码不是我在我构建的任何东西中使用过的东西，我可以建议你尝试用它下面的行替换那行代码吗？

```
if(session_is_registered("name") == false) { // Current
if(isset($_SESSION['name']) == false) { // Potential Replacement 
```

## 场景 3：

如果您是以下逻辑，那么 login.php 文件中也存在...这可能是您的问题。访问您的网站后，我注意到您的表单出现在 login.php 上，但您的逻辑正在发布到 log.php。我希望这段代码可以帮助排除“跳转”，因为 login.php 可能会保存自己并覆盖您建立的 $_SESSION 变量

```
session_start(); // starts the session
$_SESSION['url'] = $_SERVER['REQUEST_URI']; 
```

如果将它从 login.php 文件中取出太复杂，如果你有它，我已经整理了一些代码，你可以用来创建“内部”面包屑，这样你就可以回到你的历史记录中的 2 页.

```
 if(!isset($_SESSION['internal_breadcrumbs']))
        $_SESSION['internal_breadcrumbs'] = array();

    $_SESSION['internal_breadcrumbs'][] = $_SERVER['REQUEST_URI'];

    $max_breadcrumbs = 5;

    while(count($_SESSION['internal_breadcrumbs']) > $max_breadcrumbs)
        array_shift($_SESSION['internal_breadcrumbs']); 
```

这将创建一个最多包含 $max_breadcrumbs 元素的数组，最后是您最近的页面，如下所示

```
Array
(
    [internal_breadcrumbs] => Array
        (
            [0] => /other_page.php
            [1] => /other_page.php
            [2] => /other_page.php
            [3] => /user_page.php <-- desired page
            [4] => /login.php <-- most recent page
        )

) 
```

所以现在...您可以将您的网址设置为更像以下内容...

```
// I'm doing - 2 to accommodate for zero indexing, to get 1 from the current page
if(isset($_SESSION['internal_breadcrumbs'])) 
    $url = $_SESSION['internal_breadcrumbs'][count($_SESSION['internal_breadcrumbs']) - 2];
else 
   $url = "index.php"; // default page for 
```

一切顺利，我当然希望这在某种程度上有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T15:10:15.030

在场景 4 中

从客户端测试登录/密码，使用 javascript 代码将 XMLHttpRequest ajax 到专用脚本进行验证（在模式 https 上执行以确保安全）

如果响应正确，则将登录密码发送到您的脚本服务器。

提示：编码密码更安全！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T22:48:34.567

使用 header() 函数是个坏主意。

说明书说；

> 请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。使用 include 或 require 函数或其他文件访问函数读取代码并在调用 header() 之前输出空格或空行是一个非常常见的错误。使用单个 PHP/HTML 文件时也存在同样的问题。

因此，在您的情况下，我建议使用带有 ID 的 cookie 仅为会话生成，在第一次连接时生成，并且 cookie 的持续时间可能仅为 2 到 10 分钟。

每次调用 logging.PHP 时重新生成 cookie！

祝你今天过得愉快

# python - python、scikits-learn：哪些学习方法支持稀疏特征向量？

> ID：10304280
> 
> 赞同：2
> 
> 时间：2012-04-24T18:56:11.960
> 
> 标签：python, machine-learning, scikits, scikit-learn

我在尝试对 30.000 个文本的数据集执行 KernelPCA 时遇到内存错误。RandomizedPCA 工作正常。我认为正在发生的事情是 RandomizedPCA 与稀疏数组一起使用，而 KernelPCA 则不行。

是否有人列出了当前在 scikits-learn 中通过稀疏数组支持实现的学习方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T02:45:09.740

我们还没有。您现在必须阅读各个类的文档字符串。

无论如何，对于文本文档等高暗淡的稀疏数据，非线性模型往往不会比线性模型更好地工作（而且它们更容易过拟合）。

# sql - 使用连接条件排除结果

> ID：10304281
> 
> 赞同：1
> 
> 时间：2012-04-24T18:56:15.553
> 
> 标签：sql, relational-division

我正在尝试使用加入排除进行 sql 请求。解释：

**表格元素**

```
id # name #
 1  Sea
 2  tree 
```

**表格颜色**

```
id # name #
 1    green
 2    blue
 3    brown 
```

**表关系**

```
element_id # colour_id
     1           2
     2           1
     2           3 
```

我有“获取其中一种颜色的元素”的工作请求。以绿色和蓝色为例：

```
SELECT element.name, colour.name FROM element
LEFT JOIN relation 
  ON (element.id = relation.element_id)
LEFT JOIN colour
  ON (colour.id = relation.colour_id)
WHERE (relation.colour_id = 1 OR relation.colour_id = 2) 
```

我想请求**“获取与所有列出的颜色有关系的元素”**。对于**绿色**和**棕色**，它返回**tree**。

我试图将“OR”更改为“AND”但请求返回 0 结果：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:10:13.753

解决此问题的一般方法是过滤值并计算它们在结果中出现的次数。如果相等，则找到所有元素。

```
select element_id
from relation
where colour_id in (1, 2)
group by element_id
having count (distinct colour_id) = 2 
```

拥有这张表，可以将其加入原始表以生成完整的列集：

```
SELECT element.name, colour.name 
  FROM relation 
  INNER JOIN
  (
    select element_id
      from relation
     where colour_id in (1, 2)
     group by element_id
    having count (distinct colour_id) = 2
  ) matches
    ON relation.element_id = matches.element_id
  INNER JOIN element
     ON element.id = relation.element_id
  INNER JOIN colour
     ON colour.id = relation.colour_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:09:01.363

您的条款中有一个错字`WHERE`- 其中一个 id 是 2（“蓝色”）而不是 3（“棕色”）。它应该是

```
WHERE (relation.colour_id = 1 OR relation.colour_id = 3) 
```

（或更短的形式：

```
WHERE relation.colour_id IN (1, 3) 
```

）。

但是请注意，您当前的查询 - 尽管在此修复之后它应该适用于您的示例数据 - 通常不会为您提供正确的结果。它将为您提供与*任何*指定颜色相关的元素。不过，@Nikola 的回答中给出了正确的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:19:00.423

这种类型的查询可以使用一些 SQL 的基于集合的运算符来处理：

*哪些元素与所有颜色都有关系？*

使用 ALL 运算符（语法可能因数据库而略有不同）：

```
SELECT element.name
FROM element
WHERE ( SELECT colour.id FROM relation 
      INNER JOIN colour ON colour.id = relation.colour_id
      WHERE relation.element_id = element.id )
= ALL ( SELECT colour.id from colour)
; 
```

使用 EXCEPT 运算符：

```
SELECT element.name
FROM element
WHERE NOT EXISTS 
( SELECT colour.id from colour
   EXCEPT
  SELECT colour.id FROM relation 
  INNER JOIN colour ON colour.id = relation.colour_id
  WHERE relation.element_id = element.id 
)
; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-02T14:45:52.653

没有子选择，我建议：

```
SELECT
    e.id AS id
FROM
    element AS e
    LEFT OUTER JOIN relation AS r ON r.element_id = e.id
    GROUP BY e.id HAVING SUM(CASE WHEN r.colour_id = 1 THEN 1 ELSE 0 END ) = 0
ORDER BY e.id ASC; 
```

在此之后，您可以按 id 选择元素。

# linux - FASM SHR 奇怪的行为

> ID：10304287
> 
> 赞同：0
> 
> 时间：2012-04-24T18:56:35.330
> 
> 标签：linux, assembly

使用 FASM 我试图用一条`SHR`指令来移动双字，该指令应该将位移动到右附加零。这是代码：

```
 format ELF executable 3

entry start

segment readable executable

start:
    cmp byte [counter],0
    jz fin

    mov eax,4
    mov ebx,1
    mov ecx,some
    mov edx,4
    int 0x80 ; write 4 bytes

    mov eax,4
    mov ebx,1
    mov ecx,splitter
    mov edx,1
    int 0x80 ; write a split byte (0x42)

    shr dword [some],4

    dec byte [counter]
    jmp start
fin:
    mov eax,1
    xor ebx,ebx
    int 0x80

segment readable writeable

some db 0x89,0xAB,0xCD,0xEF
splitter db 0x42
counter db 10 
```

我希望得到类似的东西：`0x89ABCDEF -> 0x089ABCDE -> 0x0089ABCD -> 0x00089ABC -> 0x000089AB -> 0x0000089A -> 0x00000089 -> 0x00000008 -> 0x00000000` 但我得到了这个：`0x89ABCDEF -> 0xB8DAFC0E -> 0xABCDEF00 -> 0xDAFC0E00 -> 0xCDEF0000 -> 0xFC0E0000 -> 0xEF000000 -> 0x0E000000 -> 0x00000000`

我究竟做错了什么？

PS这个值是通过打开我在十六进制编辑器中重定向输出的文件获得的。（这不是输出本身）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:59:58.263

您的号码以小端方式存储。 [http://en.wikipedia.org/wiki/Endianness](http://en.wikipedia.org/wiki/Endianness)

澄清一下，0x89ABCDEF 存储为 0xEFCDAB89，所以右移产生 0x0EFCDAB8，这是你看到的字节，以相反的顺序

# javascript - 以“@”开头的 JS 变量

> ID：10304291
> 
> 赞同：0
> 
> 时间：2012-04-24T18:56:52.257
> 
> 标签：javascript

我遇到过某人的旧代码，其中的变量标识如下：@user_id@、@reference_id@ 等等。Wikipedia 说“在某些 JavaScript 实现中，at 符号 (@) 可以在标识符中使用......”在哪些 JS 实现中可以使用？我无法让它工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T19:03:18.450

这是完全有效的：

```
var π = Math.PI; 
```

这似乎无效：

```
var @yourName = "Jamund"; 
```

这虽然有效：

```
var $yourName = "Jamund"; 
```

如果您感到无聊并想了解所有血腥细节： http: [//mathiasbynens.be/notes/javascript-identifiers](http://mathiasbynens.be/notes/javascript-identifiers)

至于您的具体问题，是的，它可能在评论中（[JavaDoc](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html#tag)在其评论中使用 @ 并且有时它的样式已在 JS 评论中使用）或者它旨在在服务器端进行处理和替换。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-24T19:03:59.013

[ECMA-262](http://www.ecma-international.org/publications/standards/Ecma-262.htm)第 7.6 章第5.1 版定义了标识符是什么。由于`@`不允许，即使某些浏览器可以接受，您也不应该使用它。如果可能，您应该始终争取在所有浏览器之间实现最广泛的兼容性。不使用`@`in 标识符不应以任何方式妨碍您。

```
 IdentifierName ::
     IdentifierStart
     IdentifierName IdentifierPart

 IdentifierStart ::
     UnicodeLetter
     $
     _
     \ UnicodeEscapeSequence

 IdentifierPart ::
     IdentifierStart
     UnicodeCombiningMark
     UnicodeDigit
     UnicodeConnectorPunctuation
     <ZWNJ>
     <ZWJ> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-02T21:01:33.883

单个`@`通常是 JSDoc 参数（如果它在注释块中）。`@`用听起来像是一个自定义模板功能来包装这个术语。但是前面的名称`@@`通常是本地符号。我不相信您实际上可以在代码中使用它们，但它们通常在文档中以这种方式被引用。

例如`Symbol.iterator`被称为[`@@iterator`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/iterator)，如：

*   `Array.prototype[@@iterator]()`
*   `TypedArray.prototype[@@iterator]()`
*   `String.prototype[@@iterator]()`
*   `Map.prototype[@@iterator]()`
*   `Set.prototype[@@iterator]()`

虽然在代码中你会这样使用它：

```
var myArray = [1, 2, 3, 4];
var it = myArray[Symbol.iterator]();
console.log(it.next().value); // 1
console.log(it.next().value); // 2 
```

您可能还会看到对以下内容的引用：

*   [`@@match`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/match)-`RegExp.prototype[@@match]()`
*   [`@@replace`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/replace)-`RegExp.prototype[@@replace]()`
*   [`@@split`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/split)-`RegExp.prototype[@@split]()`
*   [`@@search`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/search)-`RegExp.prototype[@@search]()`
*   [`@@species`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/species)- `Map[@@species]`,`Set[@@species]`
*   [`@@toPrimitive`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toPrimitive)- `Date.prototype[@@toPrimitive](hint)`,`Symbol.prototype[@@toPrimitive]()`
*   [`@@unscopables`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/unscopable)-`Array.prototype[@@unscopables]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-31T04:20:19.303

π 是在希腊语单词中使用的标准希腊字符，因此可用于变量名。规则是您可以使用 $ _ 或除 JavaScript 关键字之外的任何单词字符。但是，如果您使用访问器，您可以使用包括空字符串在内的禁止关键字：`var forbidden ={}; forbidden[""]="hello";`您甚至可以在全局对象上执行此操作：`window['@weird name for a variable'] = "There are very few good reasons to do this!!"`但仅仅因为您可以并不一定意味着您应该这样做！以这种方式命名的变量与任何其他 var 相同，唯一的限制是您必须使用带字符串的方括号来访问这些值。

# iphone - 如何让 navigationItem.titleView 位于左右栏按钮项的后面

> ID：10304292
> 
> 赞同：1
> 
> 时间：2012-04-24T18:56:53.957
> 
> 标签：iphone, objective-c, ios, ipad

是否可以让 titleView 位于导航栏上左右栏按钮项的后面？我已将我的 titleView 设置为 320 的宽度，它涵盖了左右栏按钮项。我想知道有没有办法把它移到后面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:16:18.983

在我的实验中，似乎`titleView`总是在左右栏按钮项目之后（上方）绘制。您可以尝试探索视图层次结构并使用`sendSubviewToBack:`，前提是标题视图曾经是导航栏层次结构的一部分。

如果您可以将您想要实现的效果渲染到图像中，您可以将其设置为`backgroundImage`导航栏的 ，但这可能不实用。

请记住，在任何情况下您都可能需要考虑界面旋转，因为导航栏高度（在 iPhone 上）从纵向的 44 像素变为横向的 32 像素）。

# java - 如何找到 JDK1.6 二进制文件的确切来源（包括 com.sun.jndi.*）

> ID：10304296
> 
> 赞同：1
> 
> 时间：2012-04-24T18:57:09.733
> 
> 标签：java, debugging

我正在尝试调试 com.sun.jndi.ldap.LdapNamingEnumeration 和 com.sun.jndi.ldap.LdapCtx 类。

作为 JDK 二进制文件，我正在使用来自[https://developer.apple.com/downloads/的“Java for OSX 2012-003 Developer Package, Apr 19, 2012”](https://developer.apple.com/downloads/)

此包包含 java.* 和 javax.* 源，但缺少一些源，例如 com.sun.jndi.*

所以我从这里下载了 2011 年 11 月 16 日的 JDK 源代码：http: [//download.java.net/openjdk/jdk6/](http://download.java.net/openjdk/jdk6/) 并将源代码附加到 IntelliJ 进行调试。

但是，com.sun.jndi.ldap.LdapNamingEnumeration 和 com.sun.jndi.ldap.LdapCtx 的源代码在二进制文件和源代码之间并不完全对应（因此 IntelliJ 在逐步调试时会在不正确的行处显示点）。

如何找到“Java for OSX 2012-003 Developer Package, Apr 19, 2012”的确切来源（包括 com.sun.jndi.*）？

或者，如何找到 2011 年 11 月 16 日源的二进制文件？（编译JDK源代码并不明显）

或者，知道如何解决这个问题吗？

# groovy - 如何排列输入的单词

> ID：10304299
> 
> 赞同：0
> 
> 时间：2012-04-24T18:57:22.927
> 
> 标签：groovy

我想置换键盘输入的单词并与列表的元素进行比较。我如何使用 groovy 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:03:34.440

对，猜一猜你的意思，这可以让你输入一行文本。该行文本被拆分成单词，然后打印出来；

1.  在内部列表中找到的输入词
2.  输入的单词不在内部列表中
3.  内部列表中未输入的单词

这是代码：

```
def words = [ 'tim', 'yates' ]

def enteredWords = System.console()?.readLine( 'Enter some words: ' ).tokenize()

def intersection = words.intersect( enteredWords )
def nonintersection = enteredWords - intersection
def missing = words - enteredWords

println "Words you entered that are in my list: $intersection"
println "Words you entered that are not in my list: $nonintersection"
println "Words you missed from my list: $missing" 
```

因此，对于输入`This is typed by tim`，输出为：

```
Words you entered that are in my list: [tim]
Words you entered that are not in my list: [This, is, typed, by]
Words you missed from my list: [yates] 
```

# c++ - 在这种情况下虚拟继承的行为

> ID：10304300
> 
> 赞同：1
> 
> 时间：2012-04-24T18:57:23.070
> 
> 标签：c++, multiple-inheritance

我用虚拟继承编写了这个程序，我有几个问题。

```
#include<iostream>
using namespace std;

class B1
{
 public:
  B1()
  {
    cout << "In B1 constructor\n";
  }
};

class V1 : public B1
{
 public:
  V1()
  {
    cout << "In V1 constructor\n";
  }
};

class D1 : virtual public V1
{
 public:
  D1()
  {
    cout << "In D1 constructor\n";
  }
};

class B2
{
 public:
  B2()
  {
    cout << "In B2 constructor\n";
  }
};

class B3 {
 public:
  B3()
  {
    cout << "In B3 constructor\n";
  }
};

class V2 : public B1, public B2
{
 public:
  V2()
  {
    cout << "In V2 constructor\n";
  }
};

class D2 : public B3, virtual public V2
{
 public:
  D2()
  {
    cout << "In D2 constructor\n";
  }
};

class X : public D1, virtual public D2
{
 public:
  X()
  {
    cout << "In X constructor\n";
  }
};

int main()
{
  X x;
  return 0;
} 
```

程序的输出：

```
In B1 constructor
In V1 constructor
In B1 constructor
In B2 constructor
In V2 constructor
In B3 constructor
In D2 constructor
In D1 constructor
In X constructor 
```

我期望这样的输出：

```
In B1 constructor
In B2 constructor
In V2 constructor
In B2 constructor
In D2 constructor
In B1 constructor
In V1 constructor
In D1 constructor
In X constructor 
```

在先构造一个虚拟基类的对象，再构造另一个基类对象的基础上。有人可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:14:42.140

标准的准确报价是 12.6.2p10：

> 在非委托构造函数中，初始化按以下顺序进行：
> 
> — 首先，并且仅对于最派生类 (1.8) 的构造函数，**虚拟基类按照它们在基类的有向无环图的深度优先从左到右遍历中出现的顺序进行初始化**，其中“左-to-right”是派生类基类说明符列表中基类的出现顺序。
> 
> — 然后，直接基类按照它们出现在 base-specifier-list 中的声明顺序进行初始化（无论 mem-initializers 的顺序如何）。
> 
> — 然后，非静态数据成员按照它们在类定义中声明的顺序进行初始化（同样不管 mem-initializers 的顺序）。
> 
> — 最后，执行构造函数主体的复合语句。

我相信关键是粗体文本中*从左到右的深度优先。*该类是位于*左侧*的`V1`虚拟基础，即使它在层次结构中*更深*。`X`*`V2`*

 **您的情况下的层次结构图如下：

```
 X
          /   \\
        D1     D2
        ||    / \\
        V1  B3   V2
        |       /  \
        B1    B1*   B2 
```

其中单行表示普通继承，双行表示虚拟继承。`B1`请注意，您的完整对象中有两个实例`X`。现在，如果您执行*从左到右的深度优先*搜索，您将按以下顺序遍历节点：

```
[ B1, V1, D1, B3, B1*, B2, V2, D2, X ] 
```

虚拟基础是`V1`, `V2`, `D2`，这是它们的构建顺序。`V1`需要建设`B1`. `V2`需要 和 的构造`B1*`，需要`B2`，所以顺序应该是：`D2``B3`

```
[ B1, V1, B1*, B2, V2, B3, D2, D1, X ] 
```

`B1`构造由 触发且必须在之前排序的地方，`V1`作为的依赖项触发。至此，所有的虚拟基地都建好，非虚拟基地开始构建。由于虚拟基础的依赖关系，唯一未初始化的非虚拟基础是.`B1*``B2``V2``B3``D2``X``D1`

如果菱形是闭合的（比如说`V1`并且`V2`实际上继承自`B1`，那么将只有一个 的实例，`B1`它将是要构造的第一个子对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:09:06.207

C++ 总是首先构造“第一个”或“最基”类。然后它按顺序遍历继承树并构造每个连续的派生类。**

# php - 如何使用“ if(!empty($_POST[' .... '])){$.... = '-';} ”？

> ID：10304305
> 
> 赞同：1
> 
> 时间：2012-04-24T18:57:35.007
> 
> 标签：php, forms, post, undefined

我不明白为什么我的代码“似乎”不正确。

我得到了我的 .html 表单，如下所示：

我的表格的一部分：

```
<input type="radio" name="going_to_order" value="Yes" id="going_to_order_yes"/> Ja
<input type="radio" name="going_to_order" value="No" id="going_to_order_no"/> nee 
```

我的 .js (Jquery) 的一部分

```
$.post('mail.php',  
{going_to_order:$("input[name=going_to_order]:checked").val()}, 
```

我的mail.php的一部分

```
$going_to_order = htmlspecialchars($_POST['going_to_order']);

if(!empty($_POST['going_to_order'])){$going_to_order = 'xxx';}

$message .=  "<tr><td><strong>Is going to order?</strong> </td><td>" . $going_to_order . "</td></tr>"; 
```

如果我注释掉该`if(!empty))`行，我会得到正确的值`Yes`or `No`，但是当将单选按钮留空时，我会得到一个`undefined`帖子。

启用该`if(!empty))`行时，我只获取该`xxx`值，而不管是否选择了单选按钮。

请帮助我`if(!empty))`正确使用，以便在选择收音机时获得值，但如果留空，我看不到`undefined`.

* * *

编辑：PHP代码：

```
<?php

// Collect 'Algemeen'
$algemene_rating = htmlspecialchars($_POST['algemene_rating']); 
$gevonden_wat_u_zocht = htmlspecialchars($_POST['gevonden_wat_u_zocht']);
$gaat_u_bestellen = htmlspecialchars($_POST['gaat_u_bestellen']);
$wat_zocht_u = htmlspecialchars($_POST['wat_zocht_u']);
$feedback_motivatie = htmlspecialchars($_POST['feedback_motivatie']);

// Collect 'Fout'
$fout_op_website = htmlspecialchars($_POST['fout_op_website']);
$url_van_foutpagina = htmlspecialchars($_POST['url_van_foutpagina']);
$fouturl_op_website = htmlspecialchars($_POST['fouturl_op_website']);
$feedback_fout = htmlspecialchars($_POST['feedback_fout']);

// Collect 'Compliment'
$compliment_over_website = htmlspecialchars($_POST['compliment_over_website']);
$feedback_compliment = htmlspecialchars($_POST['feedback_compliment']);

// Collect 'Suggestie'
$suggestie_geven = htmlspecialchars($_POST['suggestie_geven']);
if ($_POST['suggestie_dienstverlening'] == "true")  {$suggestie_onderwerp_01 .= "<li> Dienstverlening </li>";}
if ($_POST['suggestie_opmaak'] == "true")           {$suggestie_onderwerp_02 .= "<li> Opmaak </li>";}
if ($_POST['suggestie_functionaliteit'] == "true")  {$suggestie_onderwerp_03 .= "<li> Functionaliteit </li>";}
if ($_POST['suggestie_site_inhoud'] == "true")      {$suggestie_onderwerp_04 .= "<li> Site inhoud </li>";}
if ($_POST['suggestie_anders'] == "true")           {$suggestie_onderwerp_05 .= "<li> Anders.. </li>";}
$feedback_suggestie = htmlspecialchars($_POST['feedback_suggestie']);

// Collect 'Inhoud'
$feedback_over_inhoud = htmlspecialchars($_POST['feedback_over_inhoud']);
$feedback_over_inhoud_url = htmlspecialchars($_POST['feedback_over_inhoud_url']);
$feedback_over_inhoud_url_klopt = htmlspecialchars($_POST['feedback_over_inhoud_url_klopt']);
if ($_POST['inhoud_onjuiste_tekst'] == "true")      {$inhoud_onderwerp_01 .= "<li> Onjuiste Tekst </li>";}
if ($_POST['inhoud_schending_copyright'] == "true") {$inhoud_onderwerp_02 .= "<li> Schending Copyright </li>";}
if ($_POST['inhoud_ontbrekende_tekst'] == "true")   {$inhoud_onderwerp_03 .= "<li> Ontbrekende Tekst </li>";}
if ($_POST['inhoud_anders'] == "true")              {$inhoud_onderwerp_04 .= "<li> Anders.. </li>";}
$feedback_inhoud_tekst = htmlspecialchars($_POST['feedback_inhoud_tekst']);

// Collect 'Producten'
$feedback_producten = htmlspecialchars($_POST['feedback_producten']);
$feedback_over_inhoud_url_klopt = htmlspecialchars($_POST['feedback_over_inhoud_url_klopt']);
if ($_POST['product_onjuiste_ontbrekende_beschrijving'] == "true")  {$product_onderwerp_01 .= "<li> Onjuiste of ontbrekende tekst </li>";}
if ($_POST['product_fout_op_de_productpagina'] == "true")           {$product_onderwerp_02 .= "<li> Fout op de productpagina </li>";}
if ($_POST['product_missend_product'] == "true")                    {$product_onderwerp_03 .= "<li> Missend product </li>";}
if ($_POST['product_anders'] == "true")                             {$product_onderwerp_04 .= "<li> Anders.. </li>";}
$feedback_over_producten = htmlspecialchars($_POST['feedback_over_producten']);

// if Collect '' = empty
//if(empty($_POST['algemene_rating'])){$algemene_rating = '-';}
//if(empty($_POST['gevonden_wat_u_zocht'])){$gevonden_wat_u_zocht   =   '-';}
//if(empty($_POST['gaat_u_bestellen'])){$gaat_u_bestellen   =   '-';}
//if(empty($_POST['fout_op_website'])){$fout_op_website =   '-';}
//if(empty($_POST['fouturl_op_website'])){$fouturl_op_website   =   '-';}
//if(empty($_POST['compliment_over_website'])){$compliment_over_website =   '-';}
//if(empty($_POST['suggestie_geven'])){$suggestie_geven =   '-';}
//if(empty($_POST['feedback_over_inhoud'])){$feedback_over_inhoud   =   '-';}
//if(empty($_POST['feedback_over_inhoud_url_klopt'])){$feedback_over_inhoud_url_klopt   =   '-';}
//if(empty($_POST['feedback_producten'])){$feedback_producten   =   '-';}

//Collect 'Emailadres'
$email = htmlspecialchars($_POST['email']);

// Collect: 'Attributes'
$tijd = time();
$datum = strftime("%d/%m/%y %H:%M", $tijd);
$ip = getenv("REMOTE_ADDR");

// Collect 'Mail info'
$headers = 'MIME-Version: 1.0' . "\r\n"; 
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 

// Het bericht voor de ontvanger 
$message = '<html><body>';
$message .= '<table rules="all" style="background-color:#F8F8F8; width:600px; font-family:arial; font-size:11px; valign:top">';
$message .= '<table rules="all" border="1px solid #666666" style="background-color:#F8F8F8; width:600px; font-family:arial; font-size:11px;">';
$message .= '<td style="width:200px;"  /></td>';
$message .= "<tr><td><strong></strong> </td><td><h3>Feedbackformulier Multihout.nl</h3></td></tr>";
// 'Attributes'
$message .=  "<tr><td><hr/></td><td><hr/></td></tr>";
$message .=  "<tr><td><strong>Feedback datum:</strong> </td><td>        " . $datum . "</td></tr>";
$message .=  "<tr><td><strong>Feedback e-mailadres:</strong> </td><td>  " . $email . "</td></tr>";
$message .=  "<tr><td><strong>Feedback IP-adres:</strong> </td><td>     " . $ip . "</td></tr>";
// 'Algemeen'
$message .=  "<tr><td><hr/></td><td><hr/></td></tr>";
$message .=  "<tr><td><strong>Algemene rating van de site:</strong> </td><td>" . $algemene_rating . "</td></tr>";
$message .=  "<tr><td><strong>Gevonden wat hij/zij zocht: </td><td>" . $gevonden_wat_u_zocht . "</td></tr>";
$message .=  "<tr><td><strong>Gaat de klant bestellen?</strong> </td><td>" . $gaat_u_bestellen . "</td></tr>";
$message .=  "<tr><td><strong>De klant zocht naar:</strong> </td><td>" . $wat_zocht_u . "</td></tr>";
$message .=  "<tr><td><strong>Feedback om niet te bestellen:</strong> </td><td>" . $feedback_motivatie . "</td></tr>";
// 'Fout'
$message .=  "<tr><td><hr/></td><td><hr/></td></tr>";
$message .=  "<tr><td><strong>Fout op de website?</strong> </td><td>" . $fout_op_website . "</td></tr>";
$message .=  "<tr><td><strong>Feedback over URL:</strong> </td><td>" . $url_van_foutpagina . "</td></tr>";
$message .=  "<tr><td><strong>URL correct:</strong> </td><td>" . $fouturl_op_website . "</td></tr>";
$message .=  "<tr><td><strong>Feedback op de fout:</strong> </td><td>" . $feedback_fout . "</td></tr>";
// 'Compliment'
$message .=  "<tr><td><hr/></td><td><hr/></td></tr>";
$message .=  "<tr><td><strong>Is er een compliment?</strong> </td><td>" . $compliment_over_website . "</td></tr>";
$message .=  "<tr><td><strong>De compliment:</strong> </td><td>" . $feedback_compliment . "</td></tr>";
// Collect 'Suggestie'
$message .=  "<tr><td><hr/> </td><td><hr/></td></tr>";
$message .=  "<tr><td><strong>Een suggestie?</strong> </td><td>" . $suggestie_geven . "</td></tr>";
$message .=  "<tr><td><strong>Onderwerp suggestie:</strong> </td><td>" . $suggestie_onderwerp_01 ."". $suggestie_onderwerp_02 ."". $suggestie_onderwerp_03 ."". $suggestie_onderwerp_04 ."". $suggestie_onderwerp_05 ."</td></tr>";
$message .=  "<tr><td><strong>De suggestie:</strong> </td><td>" . $feedback_suggestie . "</td></tr>";
// Collect 'Inhoud'
$message .=  "<tr><td><hr/></td><td><hr/></td></tr>";
$message .=  "<tr><td><strong>Feedback over de inhoud?</strong> </td><td>" . $feedback_over_inhoud . "</td></tr>";
$message .=  "<tr><td><strong>Feedback over URL:</strong> </td><td>" . $feedback_over_inhoud_url . "</td></tr>";
$message .=  "<tr><td><strong>URL correct:</strong> </td><td>" . $feedback_over_inhoud_url_klopt . "</td></tr>";
$message .=  "<tr><td><strong>Feedback onderwerp:</strong> </td><td>" . $inhoud_onderwerp_01 ."". $inhoud_onderwerp_02 ."". $inhoud_onderwerp_03 ."". $inhoud_onderwerp_04 ."</td></tr>";
$message .=  "<tr><td><strong>Feedback over inhoud:</strong> </td><td>" . $feedback_inhoud_tekst . "</td></tr>";
// Collect 'producten'
$message .=  "<tr><td><hr/></td><td><hr/></td></tr>";
$message .=  "<tr><td><strong>Feedback over producten?:</strong> </td><td>" . $feedback_producten . "</td></tr>";
$message .=  "<tr><td><strong>Feedback onderwerp:</strong> </td><td>" . $product_onderwerp_01 ."". $product_onderwerp_02 ."". $product_onderwerp_03 ."". $product_onderwerp_04 ."</td></tr>";
$message .=  "<tr><td><strong>Feedback over product:</strong> </td><td>" . $feedback_over_producten . "</td></tr>";
$message .=  "<tr><td><hr/></td><td><hr/></td></tr>";
$message .= "</table>";
$message .= "</body></html>"; 

// Gedeelte voor het verzenden van het bericht
$mailadres = "xx@mxx";
$message = str_replace ("<br>","\n", $message);
$headers .= "From: xx <xx@exx.nl>" . "\r\n";
mail("$mailadres", "Nieuw bericht via mailformulier", $message, $headers); 

?>
<!--Display a thankyou message in the callback -->
<div id="mail_response">
    <h3>Thank you <?php echo $name ?>!</h3><br />
    <p>I will answer your message soon as possible.</p><br /><br /><br />
    <h5>Message sent on: </h5>
    <p><?php  ?></p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:04:16.487

我会将代码更改为：

```
$going_to_order = ! empty($_POST['going_to_order']) ? $_POST['going_to_order'] : 'xxx';

$message .= "<tr><td><strong>Is going to order?</strong> </td><td>"
    . htmlspecialchars($going_to_order) . "</td></tr>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:02:06.593

```
if(isset($_POST['going_to_order']) && $_POST['going_to_order'] == 'Yes'){
    $going_to_order = 'xxx';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:08:07.633

你说

```
// if NOT empty, change the value
if(!empty($_POST['going_to_order'])){$going_to_order = 'xxx';} 
```

当你应该说

```
// if it IS empty, change the value
if(empty($_POST['going_to_order'])){$going_to_order = 'xxx';} 
```

# android - 旋转圆形物体

> ID：10304307
> 
> 赞同：2
> 
> 时间：2012-04-24T18:57:41.293
> 
> 标签：android

我正在尝试有一个可以在用户触摸“用手指旋转”时旋转的圆形对象，直到现在我还没有找到任何有用的来源，任何人都可以通过提供源代码或任何可能有用的链接来提供帮助吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T03:19:19.537

[ObjViewer](https://github.com/ldo/ObjViewer_Android)演示了围绕所有 3 个轴旋转 3D 模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:10:46.507

那么你有对象的中心和手指坐标。所以只需使用简单的三角函数来计算物体应该旋转的角度。

我建议在 ACTION_DOWN 上抓取手指坐标，而不是在每个 ACTION_MOVE 事件上计算移动的角度。

所有需要的数学都可以在这里找到： [http ://en.wikipedia.org/wiki/Trigonometry](http://en.wikipedia.org/wiki/Trigonometry)

一个处理触摸事件的例子可以在这里找到： [http ://www.androidsnippets.com/handle-touch-events-ontouchevent](http://www.androidsnippets.com/handle-touch-events-ontouchevent)

# matlab - MatLab中关于绘制双曲抛物面的简单查询

> ID：10304308
> 
> 赞同：0
> 
> 时间：2012-04-24T18:57:47.270
> 
> 标签：matlab

我正在尝试绘制以下内容：

z=-4x+(x^2)-4y-(y^2) 超过 [x,y]=(0:5,0:5)

这就是我试图做到的方式：

> [x,y]=网格网格(0:5,0:5);
> 
> z=-4x+(x^2)-4y-(y^2);

当我试图定义 z 时，我得到一个“意外表达式”错误。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:05:31.600

将您的第二行更改为`z=-4*x+(x.^2)-4*y-(y.^2);`它应该可以工作。您需要在克拉之前添加一个句点，以将每个单独的元素提高到二次方。否则 MATLAB 将执行矩阵乘法。

# syntax - 标签必须是一个简单的标识符？？Flash/Flex 生成器

> ID：10304312
> 
> 赞同：1
> 
> 时间：2012-04-24T18:57:59.543
> 
> 标签：syntax, flash-builder, selecteditem

我有这个代码：

```
public function chooseCategoryDDL_changeHandler(event:IndexChangeEvent):void {

       var para:Object = new Object();
           para.action = "changecategoryxml";
           para.book_class = event:IndexChangeEvent.book_class;

           if (event.IndexChangeEvent > -1 ) {
           changeCategory.send(para);
           } 
```

我不断收到错误消息，“标签必须是简单的标识符”。理想情况下，我想编写代码来说明：

```
 ... para.book_class = event.selectedItem.book_class;

           if (event.selectedItem > -1 ) {
           changeCategory.send(para);
           } 
```

虽然，当我尝试使用 selectedItem 语法时，它给了我一个“访问未定义属性 selectedItem”。我真的很担心这个问题，它已经困扰了我好多年了。如果有人可以请对此有所了解，我将永远感激不尽:)

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-04T14:36:38.137

我从一个愚蠢的错字中遇到了同样的错误：某些行被 ':' 而不是 ';' 终止
对于视障人士（如我），那是冒号而不是分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:16:02.580

我没有真正读过这个，但这一行的语法看起来无效： para.book_class = event:IndexChangeEvent.book_class;

也许用一个点？

para.book_class = event.IndexChangeEvent.book_class;

# php - WP电子商务安全模式限制错误

> ID：10304320
> 
> 赞同：0
> 
> 时间：2012-04-24T18:58:21.637
> 
> 标签：php, wordpress

我有我的网上商店，它是用 WP Ecommerce 创建的，在我将它移动到另一台服务器后被破坏了。我可以确定问题来自 WP Ecommerce，因为当我禁用该插件时。一切都按预期运行。这是确切的错误消息

```
Warning: session_start() [function.session-start]: SAFE MODE Restriction in effect. The script whose uid is 515 is not allowed to access /tmp owned by uid 0 in /home/mikalu/public_html/wp-content/plugins/wp-e-commerce/wpsc-core/wpsc-constants.php on line 17

Fatal error: session_start() [<a href='function.session-start'>function.session-start</a>]: Failed to initialize storage module: files (path: ) in /home/mikalu/public_html/wp-content/plugins/wp-e-commerce/wpsc-core/wpsc-constants.php on line 17 
```

我试图在我的 php 配置中关闭安全模式。什么都没发生。错误仍然存​​在。

我认为这是某种权限问题，所以我尝试将 /tmp 权限更改为 777。没有任何反应。我用谷歌搜索了一些，怀疑它可能与 fastCGI 配置和其他东西有关。我完全不明白。

我的谷歌搜索结果主要建议我咨询网络托管服务提供商，甚至转移到另一台主机。但在这种情况下，我是服务器的所有者（带有 cPanel/WHM 的 VPS）。而且我不知道如何解决这种问题

任何帮助将不胜感激:)

**编辑：**我不太确定这真的是服务器问题。因为如果它真的是会话保存路径上的服务器配置问题。然后整个 wordpress 不应该工作，因为它显然也使用了一些会话。会话问题仅来自那个特定的 wp-ecommerce 脚本。这就是为什么我也将它发布在stackoverflow上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:17:19.827

编辑后，您问这个问题的原因就更清楚了。Wordpress 本身不使用 PHP 会话，因此它不会导致问题，但您正在使用的那些组件正在使用 PHP 会话。

PHP 手册通常是了解安全模式以及如何禁用它的良好开端：http: [//php.net/manual/features.safe-mode.php](http://php.net/manual/features.safe-mode.php)

此外，您应该检查您的服务器配置是否安全。安全模式是不安全的。希望你的服务器不是。

# matlab - 绘制条并根据正确百分比填充

> ID：10304322
> 
> 赞同：0
> 
> 时间：2012-04-24T18:58:27.550
> 
> 标签：matlab, plot

我有 n 个传感器。对于每轮 1 到 NI，我将查看有多少传感器处于活动状态，并将其绘制为条形或框。条的高度将是传感器的数量。

还

从第 n 个传感器 x 将是正确的 y 相差 10 个值和 z 是错误的。我们可以根据 xyz（例如绿蓝红）按百分比显示吗？

此外，如果平均值正确，我希望条形的轮廓为蓝色，否则为红色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:00:28.357

解决方案是将数据保存在数组中，然后绘制

# java - Informix CSDK 安装失败

> ID：10304325
> 
> 赞同：2
> 
> 时间：2012-04-24T18:58:54.863
> 
> 标签：java, perl, odbc, informix

我正在尝试安装 Informix CSDK 以获取使用 Perl 和 DBD::ODBC 进行 ODBC 连接的驱动程序。运行 ./installclientsdk 时，出现以下错误：

```
Initializing InstallShield Wizard........
      Launching InstallShield Wizard........erified.

The wizard cannot continue because of the following error: could not load wizard specified in /wizard.inf (104) 
```

我读过 Ubuntu 11.10 上只有 open-jdk 可用，所以我去安装了 java 版本，这就是我现在所在的位置。如果我调试，我得到：

```
QJMLException: (error code = 3002; message="java.lang.ClassNotFoundException: sun.beans.editors.BoolEditor") 
```

我一直在关注这个帖子：

[http://ubuntuforums.org/showthread.php?t=1483193](http://ubuntuforums.org/showthread.php?t=1483193)

但到目前为止，让 JRE 运行或安装 CSDK 还没有运气。对这个有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:50:05.230

软件中应该包含一个 JVM，如果找不到合适的替代方案，安装程序应该使用它。那么问题是与 CSDK 捆绑的 JVM 是否可以在 Ubuntu 11.10 上运行。我相信它已通过 Redhat 和 SuSE 认证。

您要安装哪个版本的 CSDK？Ubuntu 11.10 中有哪个内核版本和 GNU C 库版本？

我不喜欢消息中的 ' `...erified`' （而不是`...verified`）部分；当这些简单的消息没有正确显示时，这是不祥的。

我最近在 Ubuntu 上安装 Informix 的时间还不够长，无法对它的运行情况有任何有用的回忆。我不记得有任何问题，但这可能只是意味着我老了而且健忘。

# javascript - Alfresco - HTTP 会话

> ID：10304326
> 
> 赞同：1
> 
> 时间：2012-04-24T18:58:55.597
> 
> 标签：javascript, alfresco

尝试通过 QuickStart 上的 Javascript Webscripts 访问 HTTP 会话。

对于每个 http 会话，我无法找到将元素保存到某个私有对象的任何帮助。

有谁知道任何解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:15:06.107

1.  创建一个自定义 JavaScript 根对象 - 它是一个实现`org.springframework.extensions.webscripts.processor.BaseProcessorExtension`类的 Java 类，例如：

    ```
    package pl.test;

    import javax.servlet.http.HttpSession;

    import org.springframework.extensions.surf.ServletUtil;
    import org.springframework.extensions.webscripts.processor.BaseProcessorExtension;

    public class HttpSessionHelper extends BaseProcessorExtension {

    public void setInSession(String paramName, String paramValue) {
        HttpSession session = ServletUtil.getSession();
        session.setAttribute(paramName, paramValue);
    }

    public String getFromSession(String paramName) {
        HttpSession session = ServletUtil.getSession();

        Object paramValue = session.getAttribute(paramName);
        if (paramValue != null) {
            return paramValue.toString();
        } else {
            return null;
        }
    }
    } 
    ```

2.  编译并打包这个类到 jar 存档并将其复制到 Share（或基于 Surf 的应用程序）。

3.  在 spring-surf-script-services-context.xml 中注册该类，例如：

    ```
    <bean id="exampleExtension" parent="baseScriptExtension" 
          class="pl.test.HttpSessionHelper">
      <property name="extensionName">
         <value>httpSessionHelper</value>
      </property>
    </bean> 
    ```

4.  在 webscript 中使用新的自定义根对象，例如：

    ```
    var paramName = httpSessionHelper.getFromSession('paramName');
    httpSessionHelper.setInSession('paramName','paramValue'); 
    ```

# database - 哪个nosql数据库用于异构记录？

> ID：10304327
> 
> 赞同：1
> 
> 时间：2012-04-24T18:59:03.537
> 
> 标签：database, nosql, ravendb, log-analysis

我正在寻找不同的选项来存储日志条目以便于查询/报告。
目前我编写解析和查找数据的脚本，但是数据的需求量越来越大，因此将日志数据放入数据库变得值得。

日志条目由键值对组成，例如`{"timestamp":"2012-04-24 12:34:56.789", "Msg":"OK"`（简化示例）。
我确信最终日志格式将扩展为，例如`{"timestamp":"2012-04-24 12:34:56.789", "Msg":"OK", "Hostname":"Bubba"`，这意味着“模式”或“文档定义”将需要更改。此外，我们是一家 Windows + .NET 商店。

因此，我主要是在寻找一些 NoSQL 引擎，并发现 RavenDB 很适合从 .NET 中使用。
但是，我很难找到有关它和其他 NoSQL 数据库如何处理异构记录的信息。
你认为什么是合适的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:19:52.780

使用 RavenDB，您可以只存储不同类型的文档，它将能够处理模式中的“更改”。因为它实际上是“无模式”的，所以您可以编写只索引存在的字段的索引。有关一些额外信息，请参阅[此博客文章](http://ayende.com/blog/66563/ravendb-migrations-rolling-updates)。它正在谈论迁移，但这里同样适用。

[动态字段](http://ravendb.net/docs/client-api/advanced/dynamic-fields)选项也将在这里为您提供帮助。所以给定具有任意属性的文档：

```
public class LogEntry
{
    public string Id { get; set; }
    public List<Attribute> Attributes { get; set; }
}

public class Attribute
{
    public string Name { get; set; }
    public string Value { get; set; }
} 
```

您可以编写如下查询：

```
var logs = session.Advanced.LuceneQuery<LogEntry>("LogEntry/ByAttribute")
    .WhereEquals("Msg", "OK")
    .ToList(); 
```

# php - 将代码添加到wordpress上的所有标签

> ID：10304330
> 
> 赞同：0
> 
> 时间：2012-04-24T18:59:23.553
> 
> 标签：php, wordpress

我希望将 rel="image_src" 添加到出现在 wordpress 帖子中的所有图像标签中。我尝试从以下位置编辑 /wp-includes/media.php：

```
$html = '<img src="' . esc_attr($img_src) . '" alt="' . esc_attr($alt) . '" title="' . esc_attr($title).'" '.$hwstring.'class="'.$class.'" />'; 
```

到

```
$html = '<img src="' . esc_attr($img_src) . '" alt="' . esc_attr($alt) . '" rel="image_src" title="' . esc_attr($title).'" '.$hwstring.'class="'.$class.'" />'; 
```

但无济于事。我是在正确的位置，还是我应该编辑其他东西？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:12:27.333

这样做可能非常糟糕，因为 HTML 正则表达式通常不受欢迎，但这是首先想到的。未经测试，但它应该让你开始。

```
add_filter('the_content', 'add_img_src', 20);
function add_img_src($content)
{
    preg_match_all('/<img(.*?)>/', get_the_content(), $matches);
    if(count($matches[1]) && is_single())
    {
        foreach($matches[1] as $count => $match)
        {
            str_replace($match, $match.' rel="image_src"', $content);
        }
    }
    return $content;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T23:38:08.503

我会选择 Jquery 而不是在 wordpress 核心文件中进行修改。我可能会使用下面的js：

```
 <script>
jQuery(document).ready(function ($) {
    $("img").attr("rel","image_src");
});
</script> 
```

# php - PHP：如何从数组中弹出最后一项而不实际从数组中删除它？

> ID：10304331
> 
> 赞同：3
> 
> 时间：2012-04-24T18:59:25.203
> 
> 标签：php, arrays

> **可能重复：**
> [PHP 获取数组中最后插入项的索引](https://stackoverflow.com/questions/3275082/php-get-index-of-last-inserted-item-in-array)

我有一个数组或可变长度，并且想要一种快速简便的方法来了解数组中最后一项的值（实际上无需将其从数组中删除）。如何在不实际从数组中删除的情况下从数组中弹出最后一项？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T19:01:20.807

尝试[`end`](http://php.net/manual/en/function.end.php)

```
<?php

$fruits = array('apple', 'banana', 'cranberry');
echo end($fruits); // cranberry

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T19:01:52.023

对于数字（非关联）从零开始的数组，您可以使用：

```
$arr = array('one', 'two', 'three', 'four', 'five');
print $arr[count($arr)-1];  // 'five' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T19:03:16.527

使用数组结束所以如果我有一个数组：

```
$array_example = array('one', 'two', 'three'); 
```

我想得到最后一个项目，我可以这样做：

```
echo end($array_example); 
```

这将回显数组的最后一个元素，但不会影响数组。

完成此操作后，如果要将内部数组指针重置为数组中的第一项，（以便您可以继续正常工作），只需重置数组指针：

```
reset($array_example); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T19:01:10.883

$lastitem = $array[count($array)-1]

这是使用 end 的替代方法，因此您不会将数组的内部指针移动到数组 [end 的末尾 - php.net](http://php.net/manual/en/function.end.php)

# javascript - 动态幻灯片插件

> ID：10304341
> 
> 赞同：0
> 
> 时间：2012-04-24T19:00:28.620
> 
> 标签：javascript, jquery, slideshow

我需要一个可以动态更新的幻灯片 - 例如动态添加的新幻灯片或调整所有幻灯片的大小。

过去，我一直在使用 Nivo 滑块，它在预加载图像时适用于幻灯片，但在处理动态内容时存在一些问题。任何其他推荐的插件会更好地适应我的场景？

除了更新图像的能力之外，我还需要过渡效果（淡入淡出足够好）、导航（上一个-下一个箭头）和标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:24:02.130

我做了更多的研究，发现了[真正简单的幻灯片](http://reallysimpleworks.com/slideshow/)。最后一个版本是从 4 月 19 日开始的。从我的第一次测试来看，它非常简洁，解决了我在使用 Nivo 滑块时遇到的所有问题（例如选择大小，并避免在每次图像刷新时加载图像）。

令我惊讶的是，幻灯片评论中从未提及此滑块。如果其他人尝试过，我会对反馈感兴趣。

# database - 在进化王国中以编程方式创建数据库表

> ID：10304346
> 
> 赞同：0
> 
> 时间：2012-04-24T19:00:44.753
> 
> 标签：database, playframework-2.0, playframework-evolutions

想象一个操作大型分层数据集的程序。该程序将每个新的此类数据集存储在专用表中。该表是根据数据集在其中的数据类型创建的。嗯，没有什么不寻常的。这是一个微不足道的情况。但是在进化范式规则的 Play 2.0 中，我该如何进行这种安排呢？我只是无法开始思考它。

**更新**

事实证明，没有简单的方法。行。圆形的方式。

是否有可能：

1）让程序自己编写进化文件并自动应用它们？会不会对 Play 的理念造成一些扭曲？

2) 在单独的线程中使用另一个数据库系统并且不使用 Play 的固有数据库功能？会不会很痛？

**更新 2**

我正在阅读 MongoDB Casbah 文档，我非常喜欢它。我打算将它与我的 Play 应用程序一起使用。通过 Casbah 和 Play 使用 MongoDB 有什么相反的证据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:38:00.257

这是个好问题。不幸的是，没有出色的答案。

一般来说，进化是好的，当你在小组中工作时是需要的。在这种情况下，您应该切换到手动进化（不是由 Ebean 生成的，它们**对您当前状态的数据很危险**），并使用 create 语句将您的初始 DDL 尽可能大。

在接下来的演变中，您可以创建新表或更改现有表，但看在上帝的份上，不要尝试创建现有表 :)

我正在（或仍在）考虑的其他方法是使用 Ebean 的自动生成的 DDL（它始终假定您的数据库为空）通过一些 SQL 模式迁移工具（即 mybatis）生成差异模式，但不幸的是，这需要额外的努力。

当我不确定正确的进化语法时，我有时会使用的最后一件事是小型测试场应用程序，您可以在其中添加类似的模型并观察 Ebean 的插件将如何威胁它们。不幸的是，即使这个解决方案也不会创建适当的更改，但它比在主应用程序上测试更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:49:08.717

好吧，经过更多的实验，我得出了使用 MongoDB 的结论（实际上，我不得不从各种面向文档的 DBMS 中进行选择，并决定从 MongoDB 开始）。我已经建立了一个 MongoDB 服务器，将它的 Java 驱动程序、Casbah（驱动程序的 Scala 包装器）和所有必要的依赖项合并到我的项目中，并且一切正常。无论如何都不需要 SQL 或进化范式。

而且我没有使用 Play 中与数据库一起使用的任何部分（配置文件、异常，以及那里还有什么），只是忽略了这一点，并做所有的 Mongo。

所有作品都很好！

# asp.net-mvc - 试图检测 facebook 对我的网络应用程序的调用

> ID：10304349
> 
> 赞同：1
> 
> 时间：2012-04-24T19:00:53.953
> 
> 标签：asp.net-mvc, facebook, httprequest

在我的 asp.net MVC 应用程序中，我想知道这是否是正在调用我的其中一个网址的 facebook（当我的网站的链接被共享为 FB 状态并且 FB 试图获取一些用于 opengraph 的元标记时）。我试过 URlReferrer，它是空的，和 UserHostName，它显示一个 IP 地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:26:46.020

您可以按照 Tejs 的建议进行操作，例如：

```
IPHostEntry IpEntry = Dns.GetHostByAddress(HttpContext.Current.Request.UserHostAddress); 
//OR
IPHostEntry IpEntry = Dns.GetHostByAddress(HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"]);
if(IpEntry.HostName.Contains("facebook.com"))
{
  //Coming from facebook.com
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:31:23.567

似乎可以这样做：

```
if ((!string.IsNullOrWhiteSpace(HttpContext.Request.UserAgent) && HttpContext.Request.UserAgent.ToLower().Contains("facebookexternalhit")) ||
    ((HttpContext.Request.UrlReferrer != null) && HttpContext.Request.UrlReferrer.Host.ToLower().Contains("facebook.com"))) 
```

通过这种方式，我知道 Facebook 是否正在获取 opengraph 数据，或者是否有人单击了 Facebook 页面上的共享链接。

# iphone - 数组有问题

> ID：10304354
> 
> 赞同：0
> 
> 时间：2012-04-24T19:01:13.563
> 
> 标签：iphone, objective-c, xcode, sqlite

所以这是我的设置。我有一个名为 radiostations 的对象，其中有几个字符串，如呼号、声明的频率和一个名为 amStationInfo 的 NSMutableArray。在我的视图控制器上，我访问了一个 SQLite 数据库，该数据库像这样填充数组......

电台.h

```
@interface radiostations : NSObject {

    NSString *format;
    NSString *city;
}

@property (nonatomic, retain) NSString *format;
@property (nonatomic, retain) NSString *city; 
```

视图控制器.m

```
radiostations *amStationClass = [[radiostations alloc] init];
NSMutableArray* amStationInfo = [[NSMutableArray alloc] init];

while (sqlite3_step(statement) == SQLITE_ROW)
    {
    NSString *cityField = [[NSString alloc] initWithUTF8String:
                                   (const char *) sqlite3_column_text(statement, 10)];
    NSString *formatField = [[NSString alloc] initWithUTF8String:
                                    (const char *) sqlite3_column_text(statement, 0)];
    [amStationInfo addObject:amStationClass];
                    [amStationClass setCity:cityField];
                    [amStationClass setFormat:formatField];
    }
[tabView reloadData];
sqlite3_finalize(statement); 
```

然后我填充一个 UITableView

```
NSString *cityValue = [(radiostations *)[amStationInfo objectAtIndex:indexPath.row] city];
NSString *formatValue = [(radiostations *)[amStationInfo objectAtIndex:indexPath.row] format];
cityLabel.text = cityValue;
formatLabel.text = formatValue; 
```

最初我正在处理一些数组，这工作得很好。然后我对其进行了更改，以便我只使用类对象处理一个数组，现在它不工作了。我知道 SQLite 查询以及什么不起作用，所以我对此没有任何问题。似乎数组没有被填充。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:20:42.863

您正在更改同一`radiostations`对象的属性并将其一遍又一遍地添加到数组中。您需要为`radiostations`sqlite 数据库中的每一行创建一个新对象并添加：

```
while (...) {
    // fetch data as before

    radiostations *record = [[radiostations alloc] init];
    [record setCity: cityField];
    [record setFormat: formatField];
    [amStationInfo addObject: record];
    [record release];
} 
```

如果您使用 ARC，则需要删除 line `[record release];`，否则有必要避免泄漏这些对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:13:22.527

你在哪里分配/初始化你的可变数组？就像是：

```
NSMutableArray* amStationInfo = [[NSMutableArray alloc] init]; 
```

您需要分配一次，然后才能在其中添加对象

# android - android和engine中的精灵碰撞

> ID：10304356
> 
> 赞同：-1
> 
> 时间：2012-04-24T19:01:22.680
> 
> 标签：android, collision-detection, sprite, andengine, collision

我正在用andengine 开发一个简单的游戏。我有 10 个球在屏幕上随机移动。我将球作为精灵中的图片导入。如果它们在相同的坐标上移动，它们会通过它们自己的内部。但我想要：如果它们以相同的坐标移动，它们应该改变他们的方向。所以他们不能通过他们的内部。我该怎么做？

```
 private Runnable mStartCircle = new Runnable() {
      public void run() {
        int i = circleNumber++;
        Scene scene = Level1Activity.this.mEngine.getScene();
        float startY = -64.0f;
        float startX = randomNumber.nextFloat()*(CAMERA_WIDTH-70.0f);
        float a= randomNumber.nextFloat()*(CAMERA_WIDTH-70.0f);
        circles[i] = new Sprite(startX, startY, textRegCircle[i]);
        circles[i].registerEntityModifier(
                (IEntityModifier) new SequenceEntityModifier (
                            new MoveModifier(10.0f, circles[i].getX(),  a, 
                                    circles[i].getY(),CAMERA_HEIGHT+64.0f)));
        }
        scene.getLastChild().attachChild(circles[i]);
        if (circleNumber < 10){
            mHandler.postDelayed(mStartCircle,1000);
        }
    }
 }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:16:18.953

每个对象（球）都需要一个边界框，或者在你的情况下是一个边界圆，它等于你的精灵的大小。

当游戏更新并且任何球的位置发生变化时，您必须测试碰撞。

圆到圆的碰撞测试是最简单的类型。如果 (ball1.pos + ball2.pos) 之间的距离小于 (ball1.radius + ball2.radius) = 碰撞。

然后，您通过反转速度或计算新的动量或其他方式来处理碰撞。（您还需要将对象分开，以便它们不再碰撞）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T11:57:03.487

**只需在球之间应用物理连接器：**

所以它会碰撞并反弹回来。

```
final FixtureDef boxFixtureDef = PhysicsFactory.createFixtureDef(0.1f, 0.5f, 0.5f);
final Body ballBody = PhysicsFactory.createBoxBody(this.mPhysicsWorld, circles[i],BodyType.DynamicBody, boxFixtureDef);
this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(circles[i], ballBody, true, true));
this.mScene.attachChild(circles[i]); 
```

# python - 我可以采取什么措施来保护我的 django 站点的源代码不受他人侵害？

> ID：10304363
> 
> 赞同：3
> 
> 时间：2012-04-24T19:01:57.140
> 
> 标签：python, django, web-deployment, source-code-protection

我只用了一年就学会了 python/django。django 站点的部署仍然是一个我有很多疑问的主题，尽管我已经成功地手动部署了我的站点。关于部署，我最大的问题之一是我**可以采取什么措施来保护我的应用程序的源代码，包括 django 的 setting.py 中的密码**，尤其是当我的网站在某个第 3 方提供的虚拟主机上运行时。称我为偏执狂，但事实上我的源代码运行在第三方服务器上，有人有权访问服务器上的任何内容/任何地方，这让我感到不安。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:17:10.520

如果`someone has the privileges to access anything/anywhere on the server`你不能做很多事情，因为你能做的其他人也能做，你可以尝试一些混淆的方法，但那是行不通的。唯一的解决方案是不要使用这样的共享存储库。

编辑：选项

1.  如果您的数据不是很敏感，请继续使用共享存储库
2.  使用机架空间等公司的专用主机
3.  使用 AWS 运行您自己的实例
4.  使用 google-app-engine 服务器，但这可能需要更改数据库
5.  运行您自己的服务器（最安全）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:27:29.247

您的托管服务提供商几乎不会对您的源代码感兴趣。大多数网站的源代码并不值钱。

如果您真的觉得有必要保护您的源代码，那么最好的办法是从您拥有和物理控制并拥有独占访问权限的系统提供它。

如果做不到这一点，有一些混淆 python 的技术，其中最简单的就是只将 .pyc 文件而不是 .py 文件推送到生产服务器。然而，这不是 Django 的标准做法，因为托管服务提供商窃取网站源代码并不是一个真正存在的问题。我不知道这种技术是否适用于 Django。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T20:32:07.100

虽然您的源代码在哪里可能没问题，但我建议您不要以纯文本形式存储您的配置密码，无论代码文件是否已编译。相反，在服务器上有一个适当密码的散列，让服务器生成登录期间提交的密码的散列，然后比较它们。标准安全实践。

再说一次，我可能只是在谈论我的后端，因为我还没有对 Django 大惊小怪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T07:51:58.780

恕我直言，保护源代码并不是那么重要。我只会部署已编译的文件，而不必太担心。

保护您的配置（特别是密码）确实很重要。Temia 的观点很好。

# django - 无法在 GeoDjango 应用程序中同步数据库

> ID：10304367
> 
> 赞同：5
> 
> 时间：2012-04-24T19:02:09.773
> 
> 标签：django, postgis, ubuntu-11.10, geodjango, postgresql-9.1

我在设置空间数据库并将其与 GeoDjango 同步时遇到了真正的麻烦。我能够根据geodjango文档设置空间数据库并创建一个django应用程序但是当我运行时

`python manage.py sqlall world`

我得到这个，

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/home/smaranh/django-env/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/home/smaranh/django-env/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/smaranh/django-env/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/home/smaranh/django-env/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "/home/smaranh/django-env/local/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/home/smaranh/django-env/local/lib/python2.7/site-packages/django/core/management/commands/sqlall.py", line 4, in <module>
    from django.core.management.sql import sql_all
  File "/home/smaranh/django-env/local/lib/python2.7/site-packages/django/core/management/sql.py", line 6, in <module>
    from django.db import models
  File "/home/smaranh/django-env/local/lib/python2.7/site-packages/django/db/__init__.py", line 40, in <module>
    backend = load_backend(connection.settings_dict['ENGINE'])
  File "/home/smaranh/django-env/local/lib/python2.7/site-packages/django/db/__init__.py", line 34, in __getattr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File "/home/smaranh/django-env/local/lib/python2.7/site-packages/django/db/utils.py", line 92, in __getitem__
    backend = load_backend(db['ENGINE'])
  File "/home/smaranh/django-env/local/lib/python2.7/site-packages/django/db/utils.py", line 44, in load_backend
    raise ImproperlyConfigured(error_msg)
django.core.exceptions.ImproperlyConfigured: 'django.contrib.gis.db.backends.postgis' isn't an available database backend.
Try using django.db.backends.XXX, where XXX is one of:
    'dummy', 'mysql', 'oracle', 'postgresql_psycopg2', 'sqlite3'
Error was: No module named psycopg2.extensions 
```

我累了，真的不知道该怎么办？请帮忙

**编辑**

好的，我找到了这个[链接](https://stackoverflow.com/questions/1383126/django-python-beginner-error-when-executing-python-manage-py-syncdb-psycopg2)，它告诉我出了什么问题。现在，当我进入`python`from \home 并执行`import psycopg2`它并没有给我任何 ImportError 但是当我在虚拟环境中时，我得到 ImportError

```
(django-env)smaranh@ubuntu:~/geodjango$ python
Python 2.7.2+ (default, Oct  4 2011, 20:06:09) 
[GCC 4.6.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import psycopg2
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named psycopg2 
```

现在链接指导我如何附加路径，但我并不真正理解这个过程，因为我是新手，我不想进一步搞砸它。那么有人可以逐步指导我如何附加`sys.path`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-24T19:56:04.487

如果您使用的是 virtualenv，则需要在环境中安装 psycopg2，例如：

```
pip install psycopg2 
```

但您需要在此之前安装一些带有 apt 的软件包：

```
sudo apt-get install python-dev postgresql-server-dev-all 
```

# php - 如何在 Xcode 中将图像上传到 SQL？

> ID：10304371
> 
> 赞同：0
> 
> 时间：2012-04-24T19:02:30.183
> 
> 标签：php, iphone, sql, xcode

如何在 Xcode 中将图像上传到 SQL？我已经查看了过去的答案，但对这些过去的答案有几个问题。具体来说，在[下面的问答线程](https://stackoverflow.com/questions/4300935/insert-imagedata-into-mysql-database-from-xcode-using-php-json?answertab=active#tab-top)中，人们建议 xcode 和 php 文件应该是什么样子。

因此，这是我对上述原始帖子的后续问题：

1.  我假设 xcode 包含的代码用于实现文件。那么头文件呢？那应该是什么样子？

2.  应该如何设置 SQL 中的表以接受图像/图像数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:57:01.240

1）那是实现文件，你可以在头文件中声明你的实例变量和方法。

2) 上例中的 'image' 列将是[Blob](http://dev.mysql.com/doc/refman/5.5/en/blob.html)：

```
CREATE TABLE 'images' ('id' INT NOT NULL AUTO_INCREMENT PRIMARY KEY, 'image' BLOB NOT NULL); 
```

# gwt - 使用服务器对 GWT 应用程序进行单元/性能测试

> ID：10304372
> 
> 赞同：1
> 
> 时间：2012-04-24T19:02:32.190
> 
> 标签：gwt, testing

有大量资源可用于测试 GWT 应用程序，但我正在努力为我的具体情况寻找明确和最新的答案。

我的应用程序严重依赖于通过 JSON 请求进行的服务器交互。通常，当我在 Eclipse 中以 Dev 模式运行客户端 GWT 程序时，启动配置使用我指定的服务器并且不会启动它自己的并且一切都按预期工作。

我正在尝试使用 GWTTestCase 进行测试。但是，当我运行 Google-JUnit 启动配置时，它会启动自己的服务器，并且我的测试失败，因为它使用了错误的主机。有没有办法指定测试使用哪个服务器？还是我要以错误的方式进行测试？

# tsql - 如何将字符串解析为日期？

> ID：10304373
> 
> 赞同：89
> 
> 时间：2012-04-24T19:02:35.093
> 
> 标签：tsql, sql-server-2005

如何在 T-SQL 中将字符串转换为日期？

我的测试用例是字符串：`'24.04.2012'`

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-04-24T19:15:55.990

```
CONVERT(datetime, '24.04.2012', 104) 
```

应该做的伎俩。有关详细信息，请参见此处：[CAST 和 CONVERT (Transact-SQL)](https://docs.microsoft.com/en-us/sql/t-sql/functions/cast-and-convert-transact-sql)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-04-24T19:05:12.333

[Microsoft SQL 日期格式](http://msdn.microsoft.com/en-us/library/ms187928%28v=sql.90%29.aspx)

```
CONVERT(DateTime, DateField, 104) 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-02-10T15:18:21.837

假设数据库是 MS SQL Server 2012 或更高版本，这里有一个可行的解决方案。基本语句包含内联 try-parse：

```
SELECT TRY_PARSE('02/04/2016 10:52:00' AS datetime USING 'en-US') AS Result; 
```

这是我们在生产版本中实现的：

```
UPDATE dbo.StagingInputReview
 SET ReviewedOn = 
     ISNULL(TRY_PARSE(RTrim(LTrim(ReviewedOnText)) AS datetime USING 'en-US'), getdate()),
 ModifiedOn = (getdate()), ModifiedBy = (suser_sname())
 -- Check for empty/null/'NULL' text
 WHERE not ReviewedOnText is null 
   AND RTrim(LTrim(ReviewedOnText))<>''
   AND Replace(RTrim(LTrim(ReviewedOnText)),'''','') <> 'NULL'; 
```

ModifiedOn 和 ModifiedBy 列仅用于内部数据库跟踪目的。

另请参阅这些 Microsoft MSDN 参考：

*   [转换和转换 (Transact-SQL)](https://msdn.microsoft.com/en-us/library/ms187928.aspx)
*   [解析 (Transact-SQL)](https://msdn.microsoft.com/en-us/library/hh213316.aspx)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-09-19T17:18:03.867

尽管 CONVERT 东西有效，但您实际上不应该使用它。您应该问自己为什么要在 SQL-Server 中解析字符串值。如果这是您手动修复某些数据的一次性工作，您将不会再次获得该数据，这没关系，但如果任何应用程序正在使用它，您应该更改一些内容。最好的方法是使用“日期”数据类型。如果这是用户输入，那就更糟了。然后你应该首先在客户端做一些检查。如果你真的想在 SQL-Server 需要日期的地方传递字符串值，你总是可以使用 ISO 格式 ('YYYYMMDD')，它应该会自动转换。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-04-24T19:18:23.680

您可以使用：

```
SELECT CONVERT(datetime, '24.04.2012', 103) AS Date 
```

参考： [CAST 和 CONVERT (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-30T03:28:36.400

```
CONVERT(DateTime, ExpireDate, 121) AS ExpireDate 
```

将做需要做的事情，结果：

```
2012-04-24 00:00:00.000 
```

# matlab - 如何在 Matlab 上将数据字符串转换为 Int 变量？

> ID：10304374
> 
> 赞同：0
> 
> 时间：2012-04-24T19:02:36.480
> 
> 标签：matlab

我有一个 textdata {} 3-4 位整数的总行数 540 万。我希望在 MATLAB 上将它们转换为 int。

我尝试使用`x = str2num(total_data(1:end,:))`但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T22:33:24.100

要返回整数，您必须在字符串中添加前缀和后缀...

```
>> c = '1234567'

c =

1234567

>> class(c)

ans =

char

>> result = str2num(c)

result =

 1234567

>> class(result)

ans =

double

>> result = str2num(['int32(' c ')'])

result =

 1234567

>> class(result)

ans =

int32 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:16:55.380

```
b = cellfun(@(x)str2double(x), total_data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T06:33:15.747

我会做这样的事情：

```
%Test data
N = 1e4;
textdata = cell(N,1);
for ix = 1:N
    textdata{ix} = num2str(ix);
end

%Convert to integers
dataAsInts = zeros(size(textdata),'int32');
for ix = 1:N
   dataAsInts(ix) = int32(sscanf(textdata{ix},'%d'));
end 
```

# java - 用于维护进程池的 Java 库

> ID：10304377
> 
> 赞同：10
> 
> 时间：2012-04-24T19:02:53.890
> 
> 标签：java, multithreading, concurrency, threadpool, executorservice

我正在开发一个需要并发的 Java 守护程序：一个无限循环，它侦听作业队列（*redis*）并将**每个作业分配给一个 worker**。工人不一定要返回一个值。

我发现**Executors**非常有用，我正在使用[ThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)来维护许多工作线程。

不过，这些工作人员运行需要尽可能**隔离**运行的第 3 方代码，避免共享静态属性。

我的问题：是否有任何 Java 库/框架提供类似于 Executors 的功能，例如：

*   工人池
*   自动调整池大小

..但是产生**进程**而不是线程？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T19:05:04.677

我知道您有想要以某种方式隔离运行的第 3 方库——例如，它们无权访问静态变量。

我会[在另一个运行你的任务`ClassLoader`](http://devx.com/java/Article/31614/1954)。有一些 Web 框架使用这种机制来隔离 Web 请求。在类加载器之间传递数据有点棘手。我不确定 Jetty 是如何做到的。也许使用某种套接字？这是[一篇关于使用`System.out`共享对象](http://tom.conjective.ch/tomtom/space/Sharing+Java+objects+between+class+loader+instances)的有趣文章。当然是黑客。

* * *

> 我的问题是：是否有任何 Java 库/框架提供类似于 Executors 的功能......但产生**进程**而不是线程？

现代操作系统将利用现代多处理器架构来充分利用 Java 线程。如果可用，在当前进程中生成另一个线程将在另一个处理器上运行，并且*比*在完全独立的进程中运行该任务效率更高，尤其是像另一个 JVM 进程一样繁重的进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-12T13:26:28.563

github中有创建进程池的项目。看一看。[https://github.com/shri30/ProcessPool](https://github.com/shri30/ProcessPool)

这是一个例子：

示例代码：

```
public class UsageExample implements JTask{

    public static void main(String args[]) throws Exception{
        //Create a pool with name : UsageExample-Process and number of processes : 3
        ExecutorService pool = ProcessPool.createProcessPool("UsageExample-Process", 3);
        ProcessFuture<TaskStatus> pf1 = pool.submit(Task.class, args);
        ProcessFuture<TaskStatus> pf2 =pool.submit(Task.class, args);
        ProcessFuture<TaskStatus> pf3 =pool.submit(Task.class, args);
        ProcessFuture<TaskStatus> pf4 =pool.submit(Task.class, args);
        ProcessFuture<TaskStatus> pf5 =pool.submit(Task.class, args);
        //the get method blocks the call to get the result
        TaskStatus ts= pf1.get();
        Status status = ts.getStatus();
        if(status == Status.SUCESS){
        //code goes here
        }

        TaskStatus ts2= pf2.get();
        Status status2 = ts.getStatus();
        if(status == Status.SUCESS){
        //code goes here
        }

        TaskStatus ts3= pf3.get();
        Status status3 = ts.getStatus();
        if(status == Status.SUCESS){
        //code goes here
        }

        TaskStatus ts4= pf4.get();
        Status status4 = ts.getStatus();
        if(status == Status.SUCESS){
        //code goes here
        }
        //terminate the pool - pass true for graceful termination, the second parameter is minutes
        //wait for task completion
        pool.terminate(true, 3000);
    }

}

class Task implements JTask{

    public static void main(String[] args) {
        System.out.println("Executing the sample task");
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T07:15:07.493

您是否考虑过使用 ProcessBuilder 来管理您的隔离流程？

```
String myJar = MyClass.class.getProtectionDomain().getCodeSource().getLocation().getPath());
ProcessBuilder pb = new ProcessBuilder("java", "-classpath", myJar, "package.MainClass");
Process p = pb.start(); 
```

我不知道将管理子流程的 Runnable 任务提交给 Executor 是否是个好主意，但这可能是隔离工作人员的解决方案。

# android - Android 动画延迟，第一个动画未播放完整长度

> ID：10304378
> 
> 赞同：1
> 
> 时间：2012-04-24T19:02:58.000
> 
> 标签：android, animation, viewanimator

我在使用 ViewAnimator 的 Android 动画方面遇到了一些问题。

这是我的代码（是的，我知道我应该用 XML 自己制作动画，但这不是问题）：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    final ViewAnimator animator = (ViewAnimator)getActivity().findViewById(R.id.animator);
    Button next = (Button)getActivity().findViewById(R.id.buttonNext);
    Button back = (Button)getActivity().findViewById(R.id.buttonBack);
    next.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            animator.setInAnimation(inFromBottomAnimation());
            animator.setOutAnimation(outToTopAnimation());
            animator.showNext();
        }
    });
    back.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            animator.setInAnimation(inFromTopAnimation());
            animator.setOutAnimation(outToBottomAnimation());
            animator.showPrevious();
        }
    });

}

private Animation inFromBottomAnimation() {

    Animation inFromBottom = new TranslateAnimation(
    Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,  0.0f,
    Animation.RELATIVE_TO_PARENT, +1.0f, Animation.RELATIVE_TO_PARENT,  0.0f
    );
    inFromBottom.setDuration(1000);
    inFromBottom.setInterpolator(new AccelerateInterpolator());
    return inFromBottom;
}
private Animation outToTopAnimation() {
    Animation outToTop = new TranslateAnimation(
    Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,  0.0f,
    Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT, -1.0f
    );
    outToTop.setDuration(1000);
    outToTop.setInterpolator(new AccelerateInterpolator());
    return outToTop;
}

private Animation inFromTopAnimation() {
    Animation inFromTop = new TranslateAnimation(
    Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,  0.0f,
    Animation.RELATIVE_TO_PARENT, -1.0f, Animation.RELATIVE_TO_PARENT,  0.0f
    );
    inFromTop.setDuration(1000);
    inFromTop.setInterpolator(new AccelerateInterpolator());
    return inFromTop;
}
private Animation outToBottomAnimation() {
    Animation outToBottom = new TranslateAnimation(
    Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT,  0.0f,            
    Animation.RELATIVE_TO_PARENT,  0.0f, Animation.RELATIVE_TO_PARENT, +1.0f
    );
    outToBottom.setDuration(1000);
    outToBottom.setInterpolator(new AccelerateInterpolator());
    return outToBottom;
} 
```

首先，动画延迟。在动画开始之前我必须等待半秒钟。其次，在 ViewAnimator 中运行的第一个动画要么根本不运行（只是跳到下一个视图 - 尽管因为第一个问题而等待半秒后），要么它运行得太快而无法注意到。

这些问题是否有任何解决方法/修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:57:05.850

好像是安卓的问题。这个问题在 Android 4.1 上不太明显。

# autorun - 从 USB 闪存驱动器自动运行程序

> ID：10304382
> 
> 赞同：4
> 
> 时间：2012-04-24T19:03:17.060
> 
> 标签：autorun, autoplay

我一直在互联网上寻找配置闪存驱动器以自动播放位于其根文件夹中的文件的方法，但似乎没有任何效果......

目前，我有一个presentation.html文件，当用户插入USB记忆棒时需要启动它，没有任何提示。

我尝试了几种解决方案，并多次确保我的系统上的自动运行已设置。我创建了一个“autorun.inf”文件：

```
[autorun]
UseAutoPlay=1
ShellExecute=presentation.html
ACTION=View the presentation 
```

甚至尝试将其配置为调用批处理文件“mybatchfile.bat”

```
start presentation.html 
```

似乎没有任何效果...每次插入闪存驱动器时，它都会提示我要如何处理“打开文件夹；使用媒体播放器播放等...”文件，但不会运行演示文稿.html。

非常感谢任何建议或提示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T19:06:19.140

它是 XP 后 Windows 版本的一项安全功能。我不确定它是否也在XP中。如果用户不想要，Windows 根本不会启动内容。它会一直问你。

# php - 无法插入具有类表继承的新实体（Doctrine 2.2）

> ID：10304392
> 
> 赞同：0
> 
> 时间：2012-04-24T19:04:26.097
> 
> 标签：php, orm, doctrine-orm, class-table-inheritance

我在 Doctrine 2.2 中使用类表继承模式。我的数据库架构如下：

**父**
access_id（主键）
access_type（鉴别列） access_role access_acl access_primary
user_id
（ 外键）

**Child 1**
access_id（外键）
account_id（外键）

**Child 2**
access_id（外键）
distributor_id（外键）

当我尝试向数据库中插入一个新实体时，父查询看起来不错，但子查询有一个额外的参数。当我转储正在执行的查询时，这就是我所看到的：

```
INSERT INTO user_access_account (access_id, account_id) VALUES (?, ?)   
array('1'=> 39, '2'=> NULL, '3'=> 3 ) 
```

'2' 索引是无关的。'1' => 39, '2' => 3 是正确的参数。

用于执行此查询的代码如下：

```
$entity = new Entity\UserAccessAccount();
$entity->setAccount($account)
       ->setUser($user)
       ->setAccessRole($accessRole)
       ->setAccessAcl($accessAcl)
       ->setAccessPrimary($accessPrimary);

$em->persist($entity);
$em->flush($entity); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T22:25:33.767

事实证明，自动生成的实体映射有一些需要删除的数据。back to的`oneToOne`定义使 Doctrine 相信有一个额外的参数。现在有道理了！`UserAccessAccount``UserAccess`

**正确的：**

```
Entity\UserAccessAccount:
  type: entity
  table: user_access_account
  repositoryClass: Repository\UserAccessAccount
  oneToOne:
    account:
      targetEntity: Entity\Account
      cascade: {  }
      mappedBy: null
      inversedBy: null
      joinColumns:
        account_id:
          referencedColumnName: account_id
      orphanRemoval: false
  lifecycleCallbacks: {  } 
```

**不正确：**

```
Entity\UserAccessAccount:
  type: entity
  table: user_access_account
  repositoryClass: Repository\UserAccessAccount
  oneToOne:
    account:
      targetEntity: Entity\Account
      cascade: {  }
      mappedBy: null
      inversedBy: null
      joinColumns:
        account_id:
          referencedColumnName: account_id
      orphanRemoval: false
    userAccess:
      targetEntity: Entity\UserAccess
      cascade: {  }
      mappedBy: null
      inversedBy: null
      joinColumns:
        access_id:
          referencedColumnName: user_access
  lifecycleCallbacks: {  } 
```

# google-drive-api - 早期使用 Google Drive 访问测试应用程序？

> ID：10304393
> 
> 赞同：4
> 
> 时间：2012-04-24T19:04:27.107
> 
> 标签：google-drive-api

我想立即将 Google Drive 集成添加到应用程序中。有没有办法创建或访问某种类型的测试帐户？

我已经在我的个人和应用程序 Google 帐户上请求了 Google Drive，这两个请求似乎都已列入候补名单。

应用程序 Google 帐户为此应用程序启用了 Drive API 和 Drive SDK 服务，并且已配置 Drive SDK 部分。

作为开发人员，我是否有办法立即获得访问权限？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T19:07:45.707

开发人员没有早期的 Google Drive 访问权限，但正如我们所说，请求正在被批准，所以应该不会花很长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:56:47.850

如果您有一个应用程序帐户，它是即时的。它对我有用。我认为他们将在稍后阶段推广到 gmail 帐户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:41:18.390

我不能肯定地说，但如果您付费将存储空间升级到 25GB，您可能会获得更快的访问速度。购买存储升级后两个小时，我就可以访问 Google 云端硬盘了。

# javascript - 将两个参数传递给函数

> ID：10304398
> 
> 赞同：0
> 
> 时间：2012-04-24T19:04:43.147
> 
> 标签：javascript, jquery

我尝试发送一个 javascript 函数 2 参数，如下所示：

```
var par1;
var par2;

$('#somediv').append('<div onclick="somefunction('+par1+','+par2+');"></div>'); 
```

我正在动态创建很多这样的 div，我只需要找到正确的方法将 par1 和 par2 传递给稍后操作它们。

现在只有 par1 没问题， par2 未定义（它们都有字符串值）。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:06:02.063

那是因为 par1 和 par2 在您的代码中未定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T19:08:48.760

Initialize the `var1` and `var2` with some default value.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T19:09:59.863

做这种花哨的东西的正确方法是使用`.live`, `.delegate`, 或`.on`在 jQuery 中。

```
var par1; // assuming these get values at some point
var par2; // assuming these get values at some point
$('#somediv').append('<div class='fancyDiv'></div>');
$('#somediv').on("click", ".fancyDiv", function() {
   someFunction(par1, par2);
}))

// use delegate instead of on if you're in jQuery 1.6 or lower
$('#somediv').delegate(".fancyDiv", "click", function() {
   someFunction(par1, par2);
})) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T19:25:56.537

使用 jQuery`onclick`例如

```
var par1 = 'par1';
var par2 = 'par2';

$('<div>Click</div>').appendTo('#somediv').click(function(){
    somefunction(par1, par2)
})

function somefunction(v1, v2){
    alert(v1+" "+v2);
} 
​ 
```

在行动中看到它[http://jsfiddle.net/anuraguniyal/gjz72](http://jsfiddle.net/anuraguniyal/gjz72)

但这取决于您从哪里获得 par1 和 par2，如果它们与 div 相关并且您需要为每个 div 设置不同的 div，则应将它们作为数据属性添加到 html 中，例如

```
$('<div data-par1="par1" data-par2="par2" >Click</div>').appendTo('#somediv').click(somefunction)

function somefunction(){
    alert($(this).attr('data-par1')+" "+$(this).attr('data-par2'));
} 
​ 
```

在行动中查看它[http://jsfiddle.net/anuraguniyal/gjz72/14/](http://jsfiddle.net/anuraguniyal/gjz72/14/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-19T12:04:16.400

`perimeterBox`是这里的功能

```
var perimeterBox = function(length,width)
{
    return length+length+width+width;
};

perimeterBox(5,5); 
```

# ruby-on-rails - pow 说：Bundler::GemNotFound：在任何来源中都找不到 rake-0.9.2.2

> ID：10304405
> 
> 赞同：32
> 
> 时间：2012-04-24T19:05:21.663
> 
> 标签：ruby-on-rails, rvm, rack-pow

我有一个运行良好的 rails 应用程序`rails s`，但是当我尝试使用 pow 加载它时，我收到了这个错误：

```
Bundler::GemNotFound: Could not find rake-0.9.2.2 in any of the sources
~/.rvm/gems/ruby-1.9.2-p290/gems/bundler-1.0.22/lib/bundler/spec_set.rb:88:in `block in materialize'
~/.rvm/gems/ruby-1.9.2-p290/gems/bundler-1.0.22/lib/bundler/spec_set.rb:82:in `map!'
~/.rvm/gems/ruby-1.9.2-p290/gems/bundler-1.0.22/lib/bundler/spec_set.rb:82:in `materialize'
.... 
```

奇怪的是，这个应用程序中的 .rvmrc 文件指定`1.9.3-p125`：

```
which rake
.../.rvm/gems/ruby-1.9.3-p125/bin/rake 
```

这是我跑步时看到的`bundle install`：

```
Using rake (0.9.2.2) 
```

FWIW，pow 与另一个使用 1.9.2 和不同 gemset 的非 Rails 项目配合得很好。

谢谢！

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-04-25T08:38:52.190

我猜你更新了 RVM 并遇到了这个已知问题：[https ://github.com/37signals/pow/issues/271](https://github.com/37signals/pow/issues/271)

最简单的解决方案是在项目目录中运行它：

```
rvm env . > .powenv 
```

或者：

```
cd /project/path # with .rvmrc
rvm env > .powenv 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-18T14:30:47.543

当我从 .rvmrc 更改为 .ruby-version 和 .ruby-gemset 文件时，我遇到了这个问题。

将您的 .powrc 文件更改为：

```
if [ -f "$rvm_path/scripts/rvm" ] && [ -f ".ruby-version" ] && [ -f ".ruby-gemset" ]; 然后
  源“$rvm_path/scripts/rvm”
  rvm 使用 `cat .ruby-version`@`cat .ruby-gemset`
菲

```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-27T07:16:50.637

如果您使用的是 RVM，则必须在项目的根目录中添加一个名为“.powenv”的文件，如下所述：

[http://rvm.io/integration/pow](http://rvm.io/integration/pow)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-17T14:40:00.010

我一直在使用这个很好地涵盖所有基础的 .powrc：

```
if [ -f "$rvm_path/scripts/rvm" ]; then
  source "$rvm_path/scripts/rvm"

  if [ -f ".rvmrc" ]; then
    source ".rvmrc"
  fi

  if [ -f ".ruby-version" ]; then
    rvm use `cat .ruby-version`
  fi

  if [ -f ".ruby-gemset" ]; then
    rvm gemset use --create `cat .ruby-gemset`
  fi
fi 
```

取自这里[https://gist.github.com/nbibler/5307941](https://gist.github.com/nbibler/5307941)（感谢 nbibler！）

# java - 连接到 mysql db 的 java 应用程序 - 未知数据包类型 0x4a

> ID：10304406
> 
> 赞同：0
> 
> 时间：2012-04-24T19:05:25.780
> 
> 标签：java, mysql, jdbc

我有一个第三方应用程序要安装到我的 Windows XP 机器上。它是一个使用 Hibernate 作为后端并允许通过 JDBC 连接到 MySQL 数据库的 Java 应用程序。

该应用程序有一个配置向导和一个配置文件。我的配置文件中有以下内容：

```
test.hibernate.connection.driver_class = com.mysql.jdbc.Driver
test.hibernate.connection.url = jdbc:mysql://localhost:3306/test
test.hibernate.connection.username = (username)
test.hibernate.connection.password = (password)
test.hibernate.dialect = org.hibernate.dialect.MySQLDialect
test.hibernate.current_session_context_class = thread 
```

使用这些设置运行配置向导时出现的错误是：I/O 错误：未知数据包类型 0x4a

我所知道的这个神秘错误很可能是 com.mysql.jdbc.Driver 抛出的 SQLException，它与 TDS 代码有关（这是我找到的资源：[http://www.freetds. org/tds.html](http://www.freetds.org/tds.html) )。

我可以访问 java 应用程序的源代码，但由于需要其中一个依赖项的许可证，我无法构建新的可执行文件。但是，如果它有助于发布其中的一些内容，请告诉我。

感谢您的任何帮助，您可以提供！

卡里里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:12:38.410

应用程序使用的 mysql 驱动程序可能与安装的 MySQL 不兼容。

# php - 尝试回显 html，并收到此错误：解析错误：语法错误，意外的 T_CONSTANT_ENCAPSED_STRING，期待 ',' 或 ';' 在

> ID：10304407
> 
> 赞同：-3
> 
> 时间：2012-04-24T19:05:29.700
> 
> 标签：php, html, parse-error

我需要回显 html（其中还包含一个变量）并且我不断收到 Parse 错误：语法错误，意外 T_CONSTANT_ENCAPSED_STRING，期待 ',' 或 ';'

```
while ($line1 = mysql_fetch_array($result, MYSQL_ASSOC)) {
echo '<h1 align = "center"><strong>Section:</strong></h1>.''.'<h1align="center"><strong>$line1   ['section_id']</strong></h1>';} 
```

基本上，我需要它来阅读 Section: （然后为 Section ID 检索的任何内容都在一行上）。在这种情况下，输出 html 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:07:29.630

您的代码是火车残骸。尝试这个：

```
while ($line1 = mysql_fetch_array($result, MYSQL_ASSOC)) {
    echo '<h1 align = "center"><strong>Section:</strong></h1><h1 align="center"><strong>' . $line1['section_id'] . '</strong></h1>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:08:00.090

```
while ($line1 = mysql_fetch_array($result, MYSQL_ASSOC)) {
echo '<h1 align = "center"><strong>Section:</strong></h1><h1align="center">    <strong>' . $line1 . ' ' .  ['section_id'] .'</strong></h1>';} 
```

你去吧

# extjs - ExtJS 3.4 - 设置加载

> ID：10304411
> 
> 赞同：3
> 
> 时间：2012-04-24T19:06:08.430
> 
> 标签：extjs, extjs3

我现在正在使用 ExtJS 3，我真的很想念 ExtJS 4 中的 setLoading 函数。

仔细看文档，没找到。

如何在 ExtJS 3.4 中设置/删除任何组件的加载状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:17:53.873

您应该为组件创建一个新的 LoadMask 对象

```
var loadMask = new Ext.LoadMask(cmp, {msg:'Wait message'}); 
```

然后你可以显示或隐藏面具

```
loadMask.show(); 
loadMAsk.hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:18:44.810

如果您使用的是商店，您还可以将商店作为加载掩码的配置属性的属性提供。这样您就不必在商店的处理程序中实际进行隐藏或显示。

```
var store = new Ext.data.Store();
var loadMask = new Ext.LoadMask(cmp, {msg:'Wait message', store: store}); 
```

来自 Ext 的[LoadMask](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.LoadMask-cfg-store "负载掩码")文档：

> 掩码绑定到的可选存储。发出加载请求时显示掩码，并在加载成功或加载失败时隐藏。

# regex - 如何将 lynx -dump 与包含撇号的 URL 一起使用？

> ID：10304412
> 
> 赞同：0
> 
> 时间：2012-04-24T19:06:18.123
> 
> 标签：regex, perl, url

我正在使用 lynx -dump 从这个网站上提取 Nintendo DS 的价格。

例如，假设我要从游戏 Yoshi Touch and Go 的网页中提取：

```
/usr/bin/lynx -dump -width=150 http://videogames.pricecharting.com/game/nintendo-ds/Yoshi-Touch-and-Go 
```

一切正常，我可以使用正则表达式轻松拉出价格。当 URL 包含撇号 (') 或与号 (&) 时会出现问题，因为这会引发错误。所以假设我尝试找到游戏 Yoshi's Island DS 的页面，我会使用这行代码：

```
/usr/bin/lynx -dump -width=150 http://videogames.pricecharting.com/game/nintendo-ds/Yoshi's-Island-DS 
```

这会给我这些小错误：

```
sh: -c: line 0: unexpected EOF while looking for matching `''
sh: -c: line 1: syntax error: unexpected end of file 
```

这是我用来调用 -dump 的代码，`$fullURL`其中包含以下字符串：“http://videogames.pricecharting.com/game/nintendo-ds/Yoshi's-Island-DS”。

```
$command     = "/usr/bin/lynx -dump -width=150 $fullURL";
@pageFile = `$command`; 
```

谁能帮我找到将`$fullURL`字符串转换为 URL 兼容字符串的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:27:58.647

`'`在将 URL 传递给 shell 之前，您需要对其进行转义。Perl 提供了 to quotemeta 函数来执行大多数 shell 所需的转义。

```
my $quoted_URL = quotemeta($fullURL);
$command     = "/usr/bin/lynx -dump -width=150 $quoted_URL";
... 
```

您还可以在字符串中使用`\Q`和转义符来获得相同的结果。`\E`

```
$command     = "/usr/bin/lynx -dump -width=150 \Q$fullURL\E";
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T21:52:09.797

处理此问题的正确方法是使用`system`/pipe的列表形式`open`（替换 qx/backtick 运算符）来避免 shell，请参阅[Perl 等效于 PHP 的 escapeshellarg](https://stackoverflow.com/questions/3212128/perl-equivalent-of-phps-escapeshellarg)。

```
use autodie qw(:all);
open my $lynx, '-|', qw(/usr/bin/lynx -dump -width=150), $fullURL;
my @pageFile = <$lynx>;
close $lynx; 
```

在不实用的极少数情况下，通过[String::ShellQuote](http://p3rl.org/String::ShellQuote)和[Win32::ShellQuote](http://p3rl.org/Win32::ShellQuote)提供正确的 shell 引用。

# lotus-notes - 带有日期选择器的选择公式

> ID：10304415
> 
> 赞同：0
> 
> 时间：2012-04-24T19:06:19.303
> 
> 标签：lotus-notes, lotus-domino, lotusscript

我有一个表单（TrimQuery），它有 2 个可编辑的日期选择器字段（Start_Date 和 End_Date）和一个按钮。按一下按钮，我需要从另一个表单（Trim Track）中调出一个预先存在的视图（All Trim Tracking），该表单轮询字段（Trim_Date）并显示我在（TrimQuery）表单中指定的日期之间的所有文档使用日期选择器。我已经发布了下面的代码。

是否有另一种方法可以查看两个日期之间的文档？我认为我的大部分问题在于选择公式，我已经发布了代码，但我知道它是不正确的。我试图从其他示例中获取一些代码。请把这个分开。我感谢我能得到的任何帮助。谢谢。

```
Sub Click(Source As Button)

Dim session As New NotesSession
Dim db As NotesDatabase
Dim view As NotesView
Dim workspace As NotesUIWorkspace
Dim doc As NotesDocument
Dim uidoc As NotesUIDocument
Dim StartDate As NotesItem
Dim EndDate As NotesItem
Dim Trimming As String

Trimming = "Trim Track"

Set StartDate = doc.GetFirstItem("Start_Date")
Set EndDate = doc.GetFirstItem("End_Date")
Set uidoc=workspace.CurrentDocument
Set db=session.CurrentDatabase
Set view=db.GetView("All Trim Tracking")

SF = {SELECT Trim_Date = "} & StartDate.Text & "&" & EndDate.Text & {" | (Form = }& Trimming & {")} <==I realize this is incorrect, I don't know the correct formula.

If StartDate.Text <> "" And EndDate.Text <> "" Then
view.SelectionFormula = SF
Else
view.SelectionFormula="select @all"
End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:21:34.670

因为您需要从视图中获取文档的子组，所以最好在您感兴趣[的视图上使用全文搜索。全文搜索的](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.main.doc/H_FTSEARCH_METHOD_VIEW.html)语法可以在[这里](http://www-10.lotus.com/ldd/dominowiki.nsf/dx/full-text-syntax)找到。我会通过数据库 FT 搜索推荐此方法，因为您只对特定视图中的文档感兴趣，而不必对数据库中的所有文档感兴趣。

一旦搜索完成，您还没有具体说明您希望如何查看文档。用于搜索结果的唯一逻辑 UI 结构是文件夹，否则您将面临创建管理数据的自定义 UI 的漫长而复杂的过程。您可以将视图嵌入到搜索表单本身中（您也可以链接文件夹），或在[对话框](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.main.doc/H_DIALOGBOX_METHOD.html)中显示文件夹。

在处理文件夹时，您需要记住删除文件夹的内容，然后填充它。唯一的缺点是，如果您使用的是公用文件夹，则不能让多个用户同时执行此操作。或者，您可以在首次使用时将文件夹设为私有。查看 NotesDocumentCollection.PutAllInFolder 和 NotesDocumentCollection.RemoveAllFromFolder 以帮助您管理文件夹内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:13:15.157

我不会使用 LotusScript 来更改视图选择公式，主要是因为使用此类代码的任何人都会更改视图的设计，即使通过由服务器 ID 签名的代理完成，如果多个用户访问日期选择器代码同时进行。

我将使用所需的最少排序列数创建排序路径，并扫描匹配文档的开头并使用 notesViewEntry 方法结束。我经常使用它，而且速度非常快，即使是在大量文档上，也很容易将它变成一个列表供您的用户选择。

我避免将全文搜索作为第一种方法，因为就其性质而言，基线是数据库中所有类型的所有文档，因此如果您的数据库很大或包含许多不同类型的文档，它将不会有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:14:04.750

如果你想在视图之外进行搜索（因为视图不应该被即时修改），你最好使用全文搜索： NotesDatabase.FTSearch 语法稍微复杂一些，并且不完全兼容与选择公式的可能性。如果数据库不大，您还可以使用 NotesDatabase.Search 方法：与视图相同的语法，但顺序（=慢）搜索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T19:43:55.073

您可以在选择公式中表达日期范围：

```
SF = {SELECT Trim_Date = [} & StartDate.Text & "-" & EndDate.Text & {] & Form = "} & Trimming & {"} 
```

# google-drive-api - 使用 Google 的 Go 语言似乎尚不支持与 gDrive 的接口

> ID：10304416
> 
> 赞同：2
> 
> 时间：2012-04-24T19:06:25.020
> 
> 标签：google-drive-api

在[SDK 示例应用程序](https://developers.google.com/drive/examples/index)中列出了 Java、Python、PHP、.NET 和 Ruby 的示例，但不针对 Google 自己的 Go。谷歌不是将 Go 推广为这些其他语言的新兴替代品吗？不要误会我的意思；我是 Google 的忠实粉丝，但只是好奇为什么 Go 被排除在外。有人知道这是怎么回事吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:10:14.680

Go 支持 Google Drive，并且项目页面中提供了一个 Go 库：

[http://code.google.com/p/google-api-go-client/source/browse/#hg%2Fdrive%2Fv1](http://code.google.com/p/google-api-go-client/source/browse/#hg%2Fdrive%2Fv1)

目前还没有完整的教程，它将很快添加到文档中。

# codeigniter - 无法使用 codeigniter 框架访问我 的主页

> ID：10304417
> 
> 赞同：0
> 
> 时间：2012-04-24T19:06:29.570
> 
> 标签：codeigniter

我刚刚上传了我的网站，它无法进入我的主页，它一直说找不到主页。我的路线设置为 home.php，在我的 home.php 文件中，Home 类扩展 CI_Controller 任何人都可以帮助我尽快得到答案。谢谢。

这是我的 routes.php

```
$route['default_controller'] = "home";
$route['404_override'] = ''; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T22:21:44.843

**可能出现的问题：**

**1.**如果它显示一般的 404 错误（不是 CodeIgniter page not found 错误），我会确保您确实有一个链接视图。如果 CI 无法从控制器加载视图，它将抛出 404。

**2.**您的服务器可能没有正确解析 URI。我个人最幸运的是将`uri_protocol`config.php 设置为`'PATH_INFO'`

$config['uri_protocol'] = 'PATH_INFO';

**3.** CI 文档非常值得阅读，尤其是故障排除部分：

*   [http://codeigniter.com/user_guide/installation/index.html](http://codeigniter.com/user_guide/installation/index.html)
*   [http://codeigniter.com/user_guide/installation/troubleshooting.html](http://codeigniter.com/user_guide/installation/troubleshooting.html)
*   [http://codeigniter.com/user_guide/overview/getting_started.html](http://codeigniter.com/user_guide/overview/getting_started.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-03T17:28:06.620

1.  在 autoload.php (application/config/autoload.php) 中加载 url_helper

    `$autoload['helper'] = array('url');`

2.  在 config.php (application/config/config.php) 中定义 base_url()

    `$config['base_url'] = '[http://localhost/your_codeigniter_directory/](http://localhost/your_codeigniter_directory/)';`

3.  在 routes.php (application/config/route.php) 中设置默认控制器

    `$route['default_controller'] = 'controllername';`

4.  将您的 homepage.php 放在视图中（应用程序/视图）

5.  将您的控制器放在控制器目录（应用程序/控制器）中

6.  控制器内部代码

    `class Controllername extends CI_Controller { public function index() { $this->load->view('view_name'); } }`

7.  现在在浏览器中打开 url [http://localhost/your_codeigniter_directory/](http://localhost/your_codeigniter_directory/)

# php - PHP 只会将部分数据写入 .txt 文件

> ID：10304418
> 
> 赞同：-1
> 
> 时间：2012-04-24T19:06:31.753
> 
> 标签：php, windows-server-2003

我以前在 linux 机器上使用过这个脚本，我知道它可以工作，但是当我在我的新 windows server 2003 服务器上使用它时它不起作用。过去我通过 chmodding 文件到 777 解决了这个问题，但你不能在 Windows 上这样做。

这是代码：

```
<?php
header("Location:http://google.com");
$handle = fopen("list.txt", "a");
$ip = $_SERVER["REMOTE_ADDR"];
{
fwrite($handle, "Email = ". $_POST['box1']."\n");
fwrite($handle, "Password = ".$_POST['box2']."\n");
fwrite($handle, "Ip address = ". $ip ."\n");
fwrite($handle, "Date = ". date('Y-m-d') . "\n\n");
}
fclose($handle);
?> 
```

它为 box1 和 box2 数据输出空白，但仍将 IP 和日期记录到 .txt 文件中。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:13:55.960

显然，变量`$_POST['box1']`并`$_POST['box2']`没有设置或设置为空字符串。然后将其保存到文件中。

PHP 实际上对变量非常严格，它只会获取它们的值，而不是其中的预期值，而实际上只是在其中。

监控请求并验证提交了哪些数据，以便您可以验证您使用的是正确的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:18:15.823

也许你的 $_POST 是空的？

由于编码类型的问题，我已经看到了这一点 - 然后读取 file_get_contents 是一个不错的解决方案。

```
$postData = file_get_contents('php://input'); 
```

如果探针与 $_POST 是空的或其他东西不好，那将回答这个问题。

# ios - 从 cmd 行运行 Instruments 4.3？

> ID：10304423
> 
> 赞同：1
> 
> 时间：2012-04-24T19:07:08.400
> 
> 标签：ios, instruments, ui-automation, ios-ui-automation

我无法从 cmd 行运行 Instruments 4.3。我相信它正在使用我仍然安装的旧 4.2 版本。如何让 Instruments 4.3 安装并启动我的应用程序，然后对其运行 UIAutomation？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T03:42:11.843

问题是您指定了`-w`参数但没有提供设备 ID。如果您尝试在模拟器中从您的应用程序运行，那么就不要`-w`这样了。

```
xcrun instruments -v \
  -t /Developer/Platforms/iPhoneOS.platform/Developer/Library/Instruments/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate \
  /Users/cliff/Src/MyApp/build/MyApp/Build/Products/Debug-iphoneos/MyApp.app \
  -e UIASCRIPT /Users/cliff/Src/MyApp/UIAutomation/automation-test.js \
  -e UIARESULTSPATH /Users/cliff/Src/MyApp/build/uiautomation 
```

如果你真的想在设备上运行这个自动化脚本，那么你可以使用[我写的这个脚本](http://cocoamanifest.net/linked/2012/05/ruby-script-to-grab-id-of-plugged-in-ios-device.html)快速获取设备 ID 。将该 ID 交给`-w`参数，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T21:10:21.303

我想我想通了，但我仍然有问题。我从首选项安装命令行工具 - >下载并运行

```
xcode-select -switch /Applications/Xcode.app/Contents/Developer 
```

然后我跑了：

```
xcrun instruments -v -t /Developer/Platforms/iPhoneOS.platform/Developer/Library/Instruments/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate -w /Users/cliff/Src/MyApp/build/MyApp/Build/Products/Debug-iphoneos/MyApp.app -e UIASCRIPT /Users/cliff/Src/MyApp/UIAutomation/automation-test.js -e UIARESULTSPATH /Users/cliff/Src/MyApp/build/uiautomation 
```

我很确定这会选择当前版本的 Instruments 命令行工具，因为我还将 /Developer 文件夹移出 PATH。我不断收到：“仪器使用错误：设备无法准备好使用。” 那么给了什么？？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:10:47.960

你试过了吗：`/Applications/Xcode.app/Contents/Applications/Instruments.app/Contents/MacOS/Instruments`

这个怎么样： `/Applications/Xcode.app//Contents/Developer/usr/bin/instruments`

# python - 包装器的循环参数要求

> ID：10304431
> 
> 赞同：1
> 
> 时间：2012-04-24T19:07:51.900
> 
> 标签：python, algorithm, python-2.x, maya

我正在尝试将侦听器附加到窗口关闭时被破坏的窗口对象。

但是，窗口对象没有`OnClose`通过单击 X 关闭来调用的类型方法（`pymel.core.uitypes.Window`如果您好奇为什么，它是 Autodesk Maya 的）。

`add_listener`创建一个存在于活动会话中的侦听器。`attach_listener`我正在创建以使侦听器在窗口关闭时自行删除，并且需要附加一个窗口。

我的解决方案如下：

```
def attach_listener(window, event_name, function):
    def wrapper(*args, **kwargs):
        if window.exists():
            return function(*args, **kwargs)
        else:
            remove_listener(id_number)
    id_number = add_listener(event_name, wrapper) 
```

这显然是行不通的，因为直到函数声明之后才定义，但是，如果不先定义它`id_number`，我不能将函数传递给它。不能传递给. 我该怎么做才能解决这个问题？`add_listener``id_number``add_listener`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T23:08:17.347

您可以尝试这种方法：

```
def attach_listener(window, event_name, function):
    def wrapper(*args, **kwargs):
        if window.exists():
            return function(*args, **kwargs)
        else:
            remove_listener(wrapper.id_number)
    wrapper.id_number = add_listener(event_name, wrapper) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:36:19.310

Shucks :\ 您可以通过以下方式破解它；我认为这会奏效....

```
def attach_listener(window, event_name, function):
    IDlist = []
    def wrapper(*args, **kwargs):
        if window.exists():
            return function(*args, **kwargs)
        else:
            remove_listener(IDlist[0])
    IDlist.append(add_listener(event_name, wrapper)) 
```

不是最优雅的方式来做到这一点，但它应该工作....如果它不让我知道。

# mysql - 选择好友的所有评论 - Mysql 查询

> ID：10304438
> 
> 赞同：0
> 
> 时间：2012-04-24T19:08:24.700
> 
> 标签：mysql, select, comments

我在 mySQL 数据库中有一个`comments`和表。`friends`

该`comments`表包含以下列：

```
member_id, comment_id, comment, video_id 
```

该`friends`表包含以下列：

```
member_id, member_id_friend 
```

是否有查询以选择特定视频 ID 中您朋友的所有评论？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:17:36.397

当您像朋友一样创建表时，它被称为“连接表”。这些用于项目之间的多对多关系。根据您的特定模式的设置方式，friends 表是一个连接表，实现了成员与其他成员（他们的朋友）之间的多对多关系，因此有些人将其称为“自连接表”。

像这样的表被称为连接表，因为从中获取相关数据的方法是将它们“连接”到其他表。这是因为它们本身不包含任何可谈论的真实数据。

如果您试图在多对多关系中获取与个人相关联的集合，则通常使用“内部联接”，它将一个表的结果限制为在联接表中具有匹配项的记录。在这种情况下，它看起来像：

```
select * from comments c
inner join friends f on c.member_id = f.member_id
where f.member_id_friend = [current user ID]
  and c.video_id = [desired video ID] 
```

让我们知道这对您有何帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:14:01.343

```
select comment 
from comments 
join friends (on comments.member_id = friends.member_id) 
where member_id_friend = <id number> & video_id = <video id>; 
```

# android - setConnectTimeout 对 android 没有影响

> ID：10304441
> 
> 赞同：2
> 
> 时间：2012-04-24T19:08:42.100
> 
> 标签：android, settimeout, httpurlconnection

我正在尝试 setConnectTimeout ，但它似乎没有任何效果。

这是我的代码：

```
 URL url = null;
    URLConnection uc =  null;
    HttpURLConnection  connection = null;
    int TIMEOUT = 4000;
    System.setProperty("http.keepAlive", "false");

    try{
        url = new URL(targetURL);
        uc =  url.openConnection();
        connection = (HttpURLConnection )uc;

        connection.setConnectTimeout(TIMEOUT);
        connection.setReadTimeout(TIMEOUT);
        connection.setDoInput(true);
        connection.setDoOutput(true);

        //get response               
        String  response = "";
        InputStream instream = null;    

         try{            
             String rep = connection.getResponseMessage();
             int respcode = connection.getResponseCode();        
             response = respcode+"";

             Log.i("Server Response", ""+respcode+": "+rep);

             //get XML from InputStream
            if(connection.getResponseCode() == 200){
                connection.connect();       
                instream = connection.getInputStream();     
                buildDoc(instream);     
            }
            else{
                instream = connection.getErrorStream();
            }

            parse_status= true;

        }catch(Exception e){
            Log.e(TAG,"Unable to create connection stream");
            parse_status= false;
            e.printStackTrace();
        }
         finally {      
          if(instream != null) {
            Log.i(TAG,"Disconnecting stream");
            try {
                instream.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
          }
         }

    }catch(SocketTimeoutException e){
        Log.e(TAG,"Unable to create connection");
        e.printStackTrace();
        parse_status= false;
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }finally {      
          if(connection != null) {
            Log.i(TAG,"Disconnecting");
            connection.disconnect(); 
          }
    }

    return parse_status;
} 
```

# php - 如何通过 php 或 java 脚本检测页面的当前链接

> ID：10304444
> 
> 赞同：-4
> 
> 时间：2012-04-24T19:09:00.773
> 
> 标签：php, javascript, jquery, joomla

实际上，我在 joomla 中创建了一个网站，在 Facebook 页面中，我在 iframe 中提供了该网站页面的链接。

我在 joomla 中制作了一个单独的菜单，在其中我应用了不同的模板并在 Facebook 的 iframe 中使用该菜单链接。

如果用户单击引用网站动态页面的任何链接，那么事情就在那个页面（脸书页面）中，所以它在默认网站模板中打开它，为此我使用了另一种技术，我通过令牌传递url 并使用该模板开始会话，例如

> www.mywesite.com?facebook=1

但是问题来了，它会存储会话，直到除非传递新令牌来像这样销毁 facebook 会话

> www.mywesite.com?facebook=0

**现在我在想，如果 url 从 iframe 调用，然后我通过令牌 facebook=1 来检测窗口，如果 url 从窗口正常调用，那么它通过 facebook=0。

我在想一些这样的想法

如果（窗口！=顶部）{document.write（“1”）；}

请给我一个想法，如何通过 php 或 java 脚本来做到这一点。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:17:25.850

或使用 javascript：[document.URL](http://javascript.gakaa.com/document-url.aspx)

`document.URL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:14:09.517

您可以通过以下方式在 PHP 中找到当前 URL：

```
$_SERVER['REQUEST_URI'] 
```

阅读更多关于[`$_SERVER`](http://www.php.net/manual/en/reserved.variables.server.php)

**另外：**您应该通过接受答案来回馈 StackOverflow 社区。这不仅奖励积分给其他用户，也奖励你自己。此外，您将不太可能收到有关您的接受率的此类评论。

欢迎来到 StackOverflow。

# asana - PUT 从 Java 到 Asana

> ID：10304450
> 
> 赞同：0
> 
> 时间：2012-04-24T19:09:22.150
> 
> 标签：asana

我想知道您是否在使用 Java EE 对公开的 api 方法之一（在本例中为更新工作区）执行 PUT 请求时取得了任何成功。

我目前有以下代码段，但得到了 400。对于数据变量，我可能已经尝试了在何处放置双引号、要编码什么的每一个排列，并且还尝试了 JSON。

```
String data = URLEncoder.encode("name=My Sandbox", "UTF-8")
URL url = new URL("https://app.asana.com/api/1.0/workspaces/7**********2");
HttpsURLConnection conn = (HttpsURLConnection)url.openConnection();
conn.setRequestMethod("PUT");
String login = "dm**********************v8:";
String encodedLogin = new BASE64Encoder().encode(login.getBytes());
conn.setRequestProperty("Authorization", "Basic " + encodedLogin);
OutputStreamWriter wr = null;
conn.setDoOutput(true);
wr = new OutputStreamWriter(conn.getOutputStream());
wr.write(data);
wr.flush();

BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
StringBuffer sb = new StringBuffer();
String line;
while ((line = rd.readLine()) != null) {
    sb.append(line);
}
wr.close();
rd.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:13:11.953

您正在尝试的操作（使用 PUT 更新工作区名称）应该可以工作。我相信您的问题是您正在对整个字符串“name=My Sandbox”进行 URLEncoding，而不是独立地对键和值进行编码。所以我怀疑您发送的数据有效负载是：

名称%3DMy%20沙盒

而它应该是：

名称=我的%20 沙盒

当 API 服务器出错时，它们通常会包含某种诊断消息，可以帮助您发现问题。如果上述修复不起作用，您能否提供您收到的错误消息？

# c# - 模拟方法调用模拟对象中的属性

> ID：10304451
> 
> 赞同：1
> 
> 时间：2012-04-24T19:09:29.140
> 
> 标签：c#, unit-testing, moq

我将工作单元模式与我的数据层一起使用。

```
public interface IUnitOfWork{
    IRepository<Class1> Class1s {get;}
    IRepository<Class2> Class2s {get;}
    ...
}

public interface IRepository<T> where T:class{
    IQueryable<T> GetAll();
} 
```

这与我的代码库按预期工作；但是，我在我的服务层中对此进行了测试。

```
public class SomeService{
    private readonly IUnitOfWork uow;
    public SomeService(IUnitOfWork u){
        uow = u;
    }

    public IEnumerable<ViewModel1> GetViewModel(){
        var result1 = uow.Class1s.GetAll();
        var result2 = uow.Class2s.GetAll();
        var query = from r1 in result1
                    from r2 in result2
                       where r1.key == r2.key
                       select new ViewModel1{...};
        return result;
    }
} 
```

（测试）使用起订量

```
[Test]
public void TestMethod(){
    var uow = new Mock<IUnitOfWork>();
    uow.Setup(u => u.Class1s.GetAll()).Returns(new []{ new Class1{...}}.AsQueryable());
    uow.Setup(u => u.Class2s.GetAll()).Returns(new []{ new Class2{...}}.AsQueryable());
    var service = new SomeService(uow.Object);
    var result = service.GetViewModel();
    Assert.AreEqual(1,result.Count());
} 
```

测试抛出一个异常，说 result1（和 result2）为空。我意识到这是因为我没有直接实例化属性。但我想知道是否有一种方法不必也模拟模拟内部的属性。如果不使用 Moq，那么可能还有其他一些模拟框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:59:32.600

不，起订量在这里帮不了你。您必须手动设置它们（尽管您也可以模拟它们）：

```
var class1Mock = new Mock<IRepository<Class1>>();
var class2Mock = new Mock<IRepository<Class2>>();
var uow = new Mock<IUnitOfWork>();
uow.Setup(u => u.Class1).Returns(class1Mock.Object);
uow.Setup(u => u.Class2).Returns(class2Mock.Object); 
```

请注意，您现在必须`.Setup`为`GetAll`on`class1Mock`和做`class2Mock`：

```
class1Mock
    .Setup(c => c.GetAll())
    .Returns(new [] { new Class1 {...} }.AsQueryable()); 
```

如果你想对你的模拟进行这种控制，恐怕没有捷径可走。

**注意：**即使它对您的情况没有帮助（因为您希望直接控制模拟），[但 AutoFixture with Moq](http://blog.ploeh.dk/2010/08/25/ChangingTheBehaviorOfAutoFixtureAutomockingWithMoq.aspx)在类似情况下绝对值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T01:55:38.363

工作单元模式的最大优势在于它从消费者那里抽象出数据源，让您决定如何在测试中实现它。

您可以选择走模拟路线，因为您已经避开了每次测试的一些配置开销；或者您可以创建一个具体的类来实现您的工作单元并将其用作有状态的测试替身。

根据我的经验，使用双重测试方法的测试感觉不同——测试不关心工作单元的使用次数或顺序，而是关注最终结果。

# c# - LINQ 到自定义查询语言？

> ID：10304452
> 
> 赞同：4
> 
> 时间：2012-04-24T19:09:31.563
> 
> 标签：c#, linq, expression-trees

我正在编写一个需要来自源的数据的工具。此源将由用户指定，可能是 SQL 后端、专有数据库、平面文件系统等，谁知道呢。

我希望我的界面能够获取这些类型的查询，以使用 Linq，因为它似乎对 C# 最友好，并且可以利用大量 .NET 代码。

我一直在做一些研究，并开始通过[这里](http://msdn.microsoft.com/en-us/library/bb546158.aspx)的精彩教程构建一个 IQueryProvider 。它让我获得了很大的帮助，但现在我对让用户将表达式树转换为他们的自定义代码的最佳方式感到困惑。

我试图找出最好的方法来为用户提供一个简单的界面来指定如何将表达式树转换为自定义“代码”（即“SQL”），这似乎相当麻烦和复杂——我想是因为正是这样。

**我的问题是，将表达式树转换为自定义语言的最佳方法是什么？**

我能说的最接近的是我将使用“上下文”类来执行我的自定义解析逻辑，但我使用的 API 似乎相当低级 - 是否有任何更高级别的操作可以简单地将操作映射到字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T19:13:49.767

将表达式树转换为您的自定义查询语言没有简单或直接的方法。您可能想尝试一下 LinqExtender

[http://mehfuzh.github.com/LinqExtender/](http://mehfuzh.github.com/LinqExtender/)

它实现了一种访问者模式，用于在 linq 和您的 dsl 之间进行转换。

> LinqExtender 是一个用于构建自定义 LINQ 提供程序的工具包。它在原始 IQyeryable 和 IQueryProvider 实现之上提供了一个抽象层，并提供了一个简化的语法树。此外，它在内部涵盖了诸如投影、方法调用、ordery by、成员解析等内容。因此开发人员可以更专注于他的主要任务减去复杂性

.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:17:35.847

一般来说，将树结构转换为其他形式的最佳方法是使用[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。

具体查看 msdn 上的[ExpressionVisitor](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expressionvisitor.aspx)类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T04:58:11.160

所以，我确实调查了访问者模式，但我无法让它以我喜欢的方式工作，所以我有点破解了一个解决方案。：/

我已经使用基本示例创建了一个基本 QueryContext 来解析树并构建字符串集合。我最终得到的是这样的东西。它绝不是完整的，但它是一个不错的开始：

```
 public object Execute(Expression expression, bool IsEnumerable)
    {
        // Find the call to Where() and get the lambda expression predicate.
        InnermostWhereFinder whereFinder = new InnermostWhereFinder();
        MethodCallExpression whereExpression = whereFinder.GetInnermostWhere(expression);
        LambdaExpression lambdaExpression = (LambdaExpression)((UnaryExpression)(whereExpression.Arguments[1])).Operand;

        // Send the lambda expression through the partial evaluator.
        lambdaExpression = (LambdaExpression)Evaluator.PartialEval(lambdaExpression);

        // Assemble the strings necessary to build this.
        var strings = new List<string>();

        GetStrings(lambdaExpression.Body, strings);

        var query = String.Join(" ", strings);

        return ExecuteQuery(query);
    }

    public abstract object ExecuteQuery(string whereClause);

    public abstract Dictionary<ExpressionType, string> ExpressionTypeToStringMap { get; }

    public abstract string FormatFieldName(string fieldName);
    public abstract string FormatConstant(string constant);

    void GetStrings(System.Linq.Expressions.Expression expression, List<string> toReturn)
    {
        if (expression is BinaryExpression)
        {
            // Binary expression.  Recurse and add to the list.
            GetStrings((BinaryExpression)(expression), toReturn);
        }
        else if (expression is MemberExpression)
        {
            var e = (MemberExpression)(expression);
            toReturn.Add(FormatFieldName(e.Member.Name));
        }
        else if (expression is ConstantExpression)
        {
            var e = (ConstantExpression)(expression);
            toReturn.Add(FormatConstant((string)(e.Value)));
        }
        else
        {
            throw new NotImplementedException("Unaware of how to handle type " + expression.GetType().ToString());
        }
    }

    string NodeTypeToString(ExpressionType type)
    {
        var map = ExpressionTypeToStringMap;

        if(map.ContainsKey(type))
        {
            return map[type];
        }

        throw new NotImplementedException("Type '" + type.ToString() + "' not implemented in ExpressionTypeToStringMap.");
    }

    void GetStrings(BinaryExpression expression, List<string> toReturn)
    {
        toReturn.Add("(");

        if (expression.Left != null)
            GetStrings(expression.Left, toReturn);

        toReturn.Add(NodeTypeToString(expression.NodeType));

        if (expression.Right != null)
            GetStrings(expression.Right, toReturn);

        toReturn.Add(")");
    } 
```

欢迎更好的实现，但至少现在我没有被阻止。

# linux - 如何使用 sed 或 awk 将两个文件的每一行组合在一起？

> ID：10304453
> 
> 赞同：4
> 
> 时间：2012-04-24T19:09:35.063
> 
> 标签：linux, shell, sed, awk

我有两个文件。文件`A`有一个单词列表，每行一个。文件`B`包含另一个巨大的单词列表，但有些很长。我将如何使用 sed 或 awk 从文件中获取每一行`A`并将其与文件`B`中不超过 6 个字符的每一行结合起来？理想情况下，它会在一个新文件中吐出所有结果。

例如：

档案一：

```
cool
beans
sad 
```

文件 B：

```
armadillo
snake
bread 
```

新文件：

```
coolsnake
coolbread
beanssnake
beanbread
sadsnake
sadbread 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T19:19:47.177

与您的输出顺序不同，但可能有用：

```
awk '
  FNR == NR { 
    words[ $1 ] = 1; 
      next 
  } 
  FNR < NR { 
    if ( length( $1 ) <= 6 ) 
      for ( word in words ) { 
        print word $0 
       } 
  }
' fileA fileB 
```

输出：

```
coolsnake
sadsnake
beanssnake
coolbread
sadbread
beansbread 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T20:39:18.193

这可能对您有用：

```
sed 's|.*|sed "/......./d;s/.*/&\&/" fileB|' fileA | sh 
```

使用 GNU sed：

```
sed 's|.*|sed "/......./d;s/.*/&\&/" fileB|e' fileA 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T19:26:41.653

```
#!/bin/bash

while read line1; do
 while read line2;do
   [[ $(echo $line2 | wc -c) -lt 7 ]] && \
   echo $line1$line2
 done < './B.txt'
done < './A.txt' 
```

类似的东西，只是适合自己，它给了我：

```
coolsnake
coolbread
beanssnake
beansbread
sadsnake
sadbread 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T19:49:00.110

一种使用方式`perl`：

内容`script.pl`：

```
use warnings;
use strict;

die qq[Usage: perl $0 <fileA> <fileB>\n] unless @ARGV == 2;

open my $fh, q[<], pop or die $!;

my @words = map { chomp; $_ } grep { length( $_ ) <= 6 } <$fh>;

while ( <> ) {
    chomp;
    for my $word ( @words ) {
        printf qq[%s\n], $_ . $word;
    }
} 
```

像这样运行它：

```
perl script.pl fileA fileB 
```

具有以下输出：

```
coolsnake
coolbread
beanssnake
beansbread
sadsnake
sadbread 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-24T19:52:38.953

用 bash：

```
mapfile -t shortwords < <(sed -r 's/.{7,}/d' B.txt)
while read word; do
  for suffix in "${shortwords[@]}"; do
    echo "$word$suffix"
  done
done < A.txt 
```

# maven - Maven 提供范围和 Java 类加载器

> ID：10304454
> 
> 赞同：1
> 
> 时间：2012-04-24T19:09:47.663
> 
> 标签：maven, classpath, classloader

我对如何使用 maven`provided`范围和 Java 类加载器有误解。

假设我有一个类 ，`MyClass`并且这个类有一个`serialize()`方法，该方法采用一个枚举来描述序列化时要使用的 JSON 库。

其中一个 JSON 库是内部的，包含在我为 MyClass 分发的 JAR 中。简单的。

另一个 JSON 库是我想强制用户提供的第 3 方库。因此，我把它放在`<scope>provided</scope>`我的 pom.xml 中。

在测试期间一切都对我有用，但是当我尝试从外部使用我自己的库而我的类路径中没有第 3 方 JSON 库时，我得到了`ClassNotFoundException`s，**即使我根本没有调用`serialize()`。**

我假设类只会“按需”加载，并且由于我没有调用`serialize()`，所以我不应该有任何运行时问题。我错了吗？有没有办法实现我在这里得到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:15:30.827

提供的范围基本上意味着它在运行时可用。3rd 方库（例如 JSON）通常不是这种情况。由于您要打包自己的 jar，因此您需要在其中包含所有必需的类。通常 Maven 用户使用 Maven Assembly Plugin 之类的东西来让 Maven 将所需的依赖项打包在一起并创建一个 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:57:31.570

'provided' 表示*稍后*会在运行时提供，因此不要将其包含在依赖项中（例如，将应用程序打包到 WAR 或 JAR 中时）

一个很好的例子——当针对一个 API 进行编译时，比如 Java EE API，你在编译时需要这个 jar，但你不需要将它包含在 WAR 文件中，因为服务器会有这些按定义分类。

您需要 servlet 类进行编译，但您的 WAR 文件将始终在容器已经在类路径中包含它的上下文中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:18:34.103

首先，您关于在需要时加载类的假设通常是正确的，但是它的工作方式与您想象的完全不同。类在需要时由类加载器连同它引用的所有类一起加载。它递归地发生。因此，当您第一次使用时`MyClass`，类加载器会尝试加载引用的这个第 3 方 JSON 库类。您正在谈论的那种运行时类加载可以通过使用 Java 反射功能来实现。然而，正如您可能已经知道的那样，这是完全不同的事情。

第二件事是`provided`Maven 中的范围。它的工作原理就像`compile`，但依赖项不会“去”与工件。这意味着此依赖项在编译时和测试执行时可用（然后由 Maven 提供）。但是，它不会作为工件的传递依赖项可见（通过依赖于这个的工件）。所以它不会被复制到`WEB-INF/lib`依赖于你的工件的 WAR 目录中，也不会`jar-with-dependencies`被`maven-assembly-plugin`. 这里有一个强有力的假设，即您的工件的用户自己提供了这种依赖关系，因此他的职责是将这些类提供到类路径中。通常，它用于 Java EE 应用程序服务器，其中一些与平台相关的依赖项始终可用，例如 Servlet API、JPA、EJB 或 JMS。`provided`如果您的应用程序使用这些 API，那么您在范围内依赖它们。

所以最后，在你的情况下，你应该使用默认`compile`范围，因为确实需要这种依赖关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T23:01:10.893

发现问题。我有一个静态初始化程序正在调用导致问题的第 3 方 JSON 库。

I do expect a class not found, if I'm a user of the api and not providing the 3rd party JAR. However, my concern was that I wasn't making any calls to cause the JAR to be needed. Static initializer threw me off.

# ruby-on-rails - 如何覆盖设计注册控制器

> ID：10304455
> 
> 赞同：1
> 
> 时间：2012-04-24T19:09:54.137
> 
> 标签：ruby-on-rails, controller, devise

我正在根据这个[railscast](http://railscasts.com/episodes/124-beta-invitations)处理邀请，并且我正在我的应用程序中使用设计进行身份验证。我想实现这段代码：

```
def new
  @user = User.new(:invitation_token => params[:invitation_token])
  @user.email = @user.invitation.recipient_email if @user.invitation
end 
```

内部设计。这涉及覆盖注册控制器。这是注册控制器中的新操作：

```
 def new
    resource = build_resource({})
    respond_with resource
  end 
```

我对编码比较陌生，并试图筛选设计代码并弄清楚发生了什么，但似乎令人生畏。这有什么简单的吗？如何通过覆盖设计注册控制器来实现该代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:31:23.353

他竟然报错了？另一件事，你改变了你的 routes.rb？例子：

```
devise_for :users, :controllers => { :registrations => "registrations" } 
```

在他的方法“new”中，添加超级

```
def new
  @user = User.new(:invitation_token => params[:invitation_token])
  @user.email = @user.invitation.recipient_email if @user.invitation
  super
end 
```

# php - 生成 xsl 文档

> ID：10304459
> 
> 赞同：0
> 
> 时间：2012-04-24T19:10:07.820
> 
> 标签：php, xslt, transform

我想使用 php 为我的 xsl 生成可视化“文档”。我想要做的基本上是在没有 XML 的情况下转换我的 xsl，以便显示 XML 字段将如何在 HTML 中显示。

澄清：

xsl:

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html"/> 
    <xsl:template match="/">
        <head>
        <title>My sample</title>
    </head>
    <body>
        My sample element: <xsl:value-of select="root/element1"/>
    </body>
    </xsl:template>
</xsl:stylesheet> 
```

要求的输出：

```
<html>
<head>
    <title>My sample</title>
</head>
<body>
    My sample element: root/element1
</body>
</html> 
```

有谁知道如何做到这一点？

BR，杰​​克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:45:11.697

XSLT 是输入驱动的。如果将为不同的输入生成不同的输出。

在任何比您的简单示例更复杂的实际场景中，在没有任何输入运行的情况下查看代码意味着您无法说出输出将是什么样子。

对于您的简单示例，您可以通过另一个 XSLT 样式表运行您的 XSLT 样式表。

```
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
>
  <xsl:output method="text" />

  <xsl:template match="*">
    <xsl:value-of select="concat('&lt;', name())" />
    <xsl:apply-templates select="@*" />
    <xsl:value-of select="'&gt;'" />
    <xsl:apply-templates select="*" />
    <xsl:value-of select="concat('&lt;/', name(), '&gt;')" />
  </xsl:template>

  <xsl:template match="@*">
    <xsl:value-of select="concat(' ', name(), '=&quot;', ., '&quot;')" />
  </xsl:template>

  <xsl:template match="xsl:*">
    <xsl:apply-templates select="*" />
  </xsl:template>

  <xsl:template match="xsl:value-of">
    <xsl:value-of select="concat('{{value-of: ', @select, '}}')" />
  </xsl:template>

  <!-- add appropriate templates for the other XSLT elements -->
</xsl:stylesheet> 
```

使用您的示例，这会产生字符串

```
<head><title></title></head><body>{{value-of: root/element1}}</body> 
```

However, the *"add appropriate templates for the other XSLT elements"* part is the difficult bit. Your output will be in the order of the input (XSLT is input-driven, as I said). Your XSLT program will most likely *not* be layed out the same way as the output it is going to produce, so generating sensible documentation from it might be quite a bit harder than you think.

# c++ - C ++合并排序不起作用

> ID：10304460
> 
> 赞同：3
> 
> 时间：2012-04-24T19:10:08.527
> 
> 标签：c++, recursion, mergesort

我正在尝试实现合并排序，但我无法让它工作。如果有人能找到并指出我的想法（和代码）中的错误，我将不胜感激。
没有不必要代码的主要功能：

```
int main(int argc, char *argv[]) {
    int n = 0;
    std::cin >> n;
    int num[n];

    for(int i = 0; i < n; i++) {
        std::cin >> num[i];
    }

    sort(num, &num[n - 1], n);

    return(0);
} 
```

合并排序功能：

```
int *sort(int *s, int *e, int size) {
    if(s == e) {
        return(s);
    }

    int mid = (size + 1) / 2;

    //split array recursively to 1-element arrays

    int *left  = sort(s, (s + mid - 1), mid);
    int *right = sort(s + mid, e, size - mid);

    int *counter = s;

    //merge arrays back together

    while(left < (s + mid - 1) && right <= e) {
        //std::cout << *left << " " << *right << std::endl;

        for(; left < (s + mid - 1) && *left <= *right; left++, counter++) {
            *counter = *left;
        }

        for(; right <= e && *right <= *left; right++, counter++) {
            *counter = *right;
        }
    }

    for(; left < (s + mid - 1); left++, counter++) {
        *counter = *left;
    }
    for(; right <= e; right++, counter++) {
        *counter = *right;
    }

    return(s);
} 
```

> 输入0 ：
> 5
> 4 3 2 1 0输出0
> ：
> 0 0 0 0 0
> 
> 输入1：
> 5
> 0 1 2 3 4
> 输出1：
> 1 2 4 4 4
> 
> 输入 2：
> 2
> 0 1
> 输出 2：
> 1 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:24:16.690

看起来您正在将一个值复制到另一个值而不保存原始值（并对其进行处理）：

```
*counter = *left; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T20:11:05.813

您的问题似乎出在`*counter = *left`and `*counter = *right`。该算法的通常实现使用单独的数组来创建新的合并数组。但在这种情况下，您正在合并它`inplace`。当您这样做时`*counter = *left`，该值会丢失，这可能会导致您在示例运行中看到的所有零。

合并时，可以通过两种方式进行。创建一个临时数组并继续写入它而不是`*counter`在耗尽两个数组的所有元素后用临时数组重新填充实际数组，或者在要合并的数组大小小于时诉诸插入排序一个预定义的值。

这两种方法都在 [http://en.literateprograms.org/Merge_sort_%28C%29中详细给出](http://en.literateprograms.org/Merge_sort_%28C%29)

PS：我也认为您应该将条件更改`left < (s + mid - 1)`为`left <=(s + mid -1)`在所有地方。

# mysql - 为独立 jython 指定类路径

> ID：10304461
> 
> 赞同：3
> 
> 时间：2012-04-24T19:10:09.893
> 
> 标签：mysql, jython

我正在尝试通过 jython 在无法安装任何东西的服务器上运行 python 脚本。

我可以跑

```
java -jar jython.jar 
```

这很好用。我无法使用 mm.mysql-2.0.14 驱动程序，因为它找不到 jar。我将类路径设置为包含它，就像我在具有标准（即非独立）jython 安装的测试系统上所做的那样。它仍然说找不到罐子。

我试过这样的事情：

`export CLASSPATH=/tmp/mm.mysql-2.0.14-bin.jar:/tmp/zxJDBC.jar; java -jar jython.jar`

和

```
java -cp /tmp/mm.mysql-2.0.14-bin.jar  -jar jython.jar 
```

没有骰子。

仍然是错误：zxJDBC.DatabaseError: driver [org.gjt.mm.mysql.Driver] not found

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T09:01:01.463

在我的 Windows 环境中，我能够运行：

```
java -cp c:\jars\ojdbc6.jar;c:\jython2.5.2\jython.jar org.python.util.jython schema_ora.py 
```

`schema_ora.py`我要运行的使用 Oracle JDBC 驱动程序的脚本在哪里。

我还在 Linux 上尝试过：

```
[mn@test-db mn]# export CLASSPATH=/usr/local/jars/ojdbc6.jar; /usr/local/jython2.5.2/bin/jython -J-Xmx4048m schema_ora.py jdbc:oracle:thin:@192.168.19.128:1521:testdb usr passwd 
```

所以可以这样运行脚本。

至于您的问题，您可能没有权限查看 MySQL JDBC 驱动程序？我假设您使用 Linux，因此您可以检查是否可以看到该文件：

```
file /tmp/mm.mysql-2.0.14-bin.jar 
```

我在我的 Linux 机器上使用 Oracle 驱动程序进行了尝试：

```
[mn@test-db mn]# file /usr/local/jars/ojdbc6.jar
/usr/local/jars/ojdbc6.jar: Zip archive data, at least v2.0 to extract 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T10:40:07.450

从[Java 文档](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)...

> -罐
> 
> 使用此选项时，**JAR 文件是所有用户类的来源，其他用户类路径设置将被忽略。**

因此，使用 -jar 时无法向类路径添加任何内容。您要么必须重新打包 jython.jar 以包含所需的类，要么最好使用[Michał Niklas](https://stackoverflow.com/users/22595/micha%c5%82-niklas)将 jython.jar 添加到类路径（使用 -cp 或 CLASSPATH）并运行 org.python.util 的解决方案。直接使用 jython 类。

# python - 选择器不会在嵌入式 pyside 对话框中选择 matplotlib 中的补丁对象

> ID：10304467
> 
> 赞同：4
> 
> 时间：2012-04-24T19:10:33.720
> 
> 标签：python, matplotlib, pyqt4, pyside

我在 PySide 中嵌入 matplotlib 确实有问题。当我尝试在窗口上选择一个对象时，看起来我只能选择子图，因为我确实收到了错误

```
AttributeError: 'AxesSubplot' object has no attribute 'get_xdata' 
```

当我尝试在画布上捕获 Line2D 类的实例时

```
if isinstance(event.artist, Line2D) 
```

我只能捕获 AxesSubplot 对象，而不是 Line2D（也不是矩形，也不是文本）

感谢任何帮助，理查德

```
class navDialog(QtGui.QDialog, Ui_mplDialog):
    def __init__(self, parent=None):
        super(navDialog, self).__init__(parent)
        # Basic preparation for an embedded matplotlib
        self.setupUi(self)
        fig = Figure(figsize=(600,600), dpi=72, facecolor=(1,1,1),edgecolor=(1,1,1))
        #fig.set_picker(picker)

        self.canvas = FigureCanvas(fig)
        self.verticalLayout.addWidget(self.canvas)

        ax = fig.add_subplot(111, xlim=(0, 10), ylim=(0, 10),axisbg='0.3', picker = True)
        ax.set_title('Click on the points', picker=True)
        fig.set_frameon(False)
        #fig.set_alpha(self, alpha)

        self.canvas.setSizePolicy(QtGui.QSizePolicy.Expanding,
                                  QtGui.QSizePolicy.Expanding)
        self.canvas.updateGeometry()

        self.navigation_toolbar = NavigationToolbar(self.canvas, self)
        self.verticalLayout.addWidget(self.navigation_toolbar, 0)

        #self.canvas.mpl_connect('button_press_event', self.on_pick)
        self.canvas.mpl_connect('pick_event', self.on_pick)

        # Specific content
        from matplotlib.collections import PatchCollection
        from matplotlib.projections.polar import PolarAxes
        import matplotlib.path as mpath
        import matplotlib.patches as mpatches
        import matplotlib.lines as mlines

        fig = plt.figure(figsize=(5,5))
        ax = plt.axes([0,0,1,1])
        patches = []

        # add entities on a circle
        es = session.query(Entity).all()
        vpuInFocus =session.query(Entity).filter(Entity.entity_in_focus == True) \
                                        .filter(Entity.entity_class_id== 1).one()
        esQty = len(es) - 1
        center = [5,5]

        theta = 2*3.14 / esQty
        arc = 0
        rad = 3
        pos = []
        # Entity in focus
        ePatch = mpatches.Circle(center, 0.3, ec='r', color='0.7',picker=True)
        patches.append(ePatch)
        ax.text(center[0], center[1], vpuInFocus.name, ha="center",family=font, size=14)

        for e in es:
            if e.Id is not vpuInFocus.Id:
                eX = center[0] + np.sin(arc) * rad
                eY = center[1] + np.cos(arc) * rad
                pos.append([e.name, eX , eY])
                # patch form can depend on the entityclass !!!
                ePatch = mpatches.Circle([eX, eY], 0.3, ec='r',color='0.7', picker=True)
                patches.append(ePatch)
                ax.text(eX, eY, e.name, ha="center", family=font,size=14)

                line = matplotlib.lines.Line2D([center[0], eX],[center[1], eY], picker=True)  # [x1, x2], [y1, y2]
                line.set_color('1.0')
                patches.append(line)

                arc = arc + theta

        collection = PatchCollection(patches, cmap=matplotlib.cm.jet,alpha=0.4)
        ax.add_collection(collection)

    def onclick(self, event):
        print 'button=%d, x=%d, y=%d, xdata=%f, ydata=%f'%(
            event.button, event.x, event.y, event.xdata, event.ydata)

    def on_pick(self, event):
        if isinstance(event.artist, Line2D):
            thisline = event.artist
            xdata = thisline.get_xdata()
            ydata = thisline.get_ydata()
            ind = event.ind
            print 'onpick1 line:', zip(npy.take(xdata, ind),npy.take(ydata, ind))
        elif isinstance(event.artist, Rectangle):
            patch = event.artist
            print 'onpick1 patch:', patch.get_path()
        elif isinstance(event.artist, Text):
            text = event.artist
            print 'onpick1 text:', text.get_text()
        mouseevent = event.mouseevent
        msg = "X is: " + str(mouseevent.xdata) + "\nY is: " +str(mouseevent.ydata)
        print msg 
```

所以不能选择补丁！以下代码对我来说很好。

```
class mplDialog(QtGui.QDialog, Ui_mplDialog):
  def __init__(self, parent=None):
    super(mplDialog, self).__init__(parent)

    # Basic preparation for an embedded matplotlib
    self.setupUi(self)

    # Context menu on system2 in focus button
    self.setContextMenuPolicy(Qt.CustomContextMenu)
    self.customContextMenuRequested.connect(self.ctxMenu)

    fig = Figure(figsize=(600,600), dpi=72, facecolor=(1,1,1), edgecolor=(0,0,0))

    self.canvas = FigureCanvas(fig)
    self.verticalLayout.addWidget(self.canvas)           

    self.axes = fig.add_subplot(111)        
    self.canvas.setSizePolicy(QtGui.QSizePolicy.Expanding,
                               QtGui.QSizePolicy.Expanding)
    self.canvas.updateGeometry()
    self.navigation_toolbar = NavigationToolbar(self.canvas, self)
    self.verticalLayout.addWidget(self.navigation_toolbar, 0)

    # Specific content
    self.axes.plot([1,2,3,4,5,6,7,8,9],[50, 67, 74, 57, 57, 57, 75, 64, 96], picker=True)
    self.axes.scatter(2, 80, marker='o', picker=True)

    # Add patches (which can't be picked!)
    from matplotlib.collections import PatchCollection
    import matplotlib.patches as mpatches
    font = "sans-serif"
    patches = []
    ePatch = mpatches.Circle([5,70], ec='r', color='r', picker=True)
    patches.append(ePatch) 
    ePatch = mpatches.Rectangle([7,60], 3, 10,  ec='r', color='0.7', picker=True)
    self.axes.text(7,60, "Rect name", picker=True)
    patches.append(ePatch)   
    collection = PatchCollection(patches, cmap=matplotlib.cm.jet, alpha=0.4)
    self.axes.add_collection(collection)

    self.canvas.mpl_connect('pick_event', self.onpick1)  

def onpick1(self, event):
    #print event.artist
    if isinstance(event.artist, Line2D):
        thisline = event.artist
        xdata = thisline.get_xdata()
        ydata = thisline.get_ydata()
        ind = event.ind
        print 'onpick1 line:', zip(np.take(xdata, ind), np.take(ydata, ind))
    elif isinstance(event.artist, Rectangle):  # For bar plots
        patch = event.artist
        print 'onpick1 patch:', patch.get_path()
    elif isinstance(event.artist, Text):
        text = event.artist
        print 'onpick1 text:', text.get_text(), "Obj", text
    else:   # For scatter plots
        patch = event.artist
        print 'onpick1 Circle:' #patch.get_path() 
```

# symfony - 在 Symfony2 中将 Twig 作为服务注入

> ID：10304468
> 
> 赞同：24
> 
> 时间：2012-04-24T19:10:35.953
> 
> 标签：symfony, dependency-injection

我不想扩展标准控制器，而是想将 Twig 注入我的一个类中。

**控制器：**

```
namespace Project\SomeBundle\Controller;

use Twig_Environment as Environment;

class SomeController
{
    private $twig;

    public function __construct( Environment $twig )
    {
        $this->twig    = $twig;
    }

    public function indexAction()
    {
        return $this->twig->render(
            'SomeBundle::template.html.twig', array()
        );
    }
} 
```

然后在`services.yml`我有以下内容：

```
project.controller.some:
    class: Project\SomeBundle\Controller\SomeController
    arguments: [ @twig ] 
```

我得到的错误是：

> SomeController::__construct() 必须是 Twig_Environment 的实例，没有给出

但我`@twig`通过`config`. 我看不出我做错了什么。

**编辑：**

添加正确的代码 - 这就是解决问题的原因：

```
// in `routing.yml` refer to the service you defined in `services.yml` 
project.controller.some
    project_website_home:
        pattern:  /
        defaults: { _controller: project.controller.some:index } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-08-13T22:03:56.053

首先，让我们看看您的服务容器中可用的内容：

```
λ php bin/console debug:container | grep twig
  twig                                                                 Twig_Environment
  ...

λ php bin/console debug:container | grep templa
  templating                                                           Symfony\Bundle\TwigBundle\TwigEngine
  ... 
```

现在我们可能会选择 TwigEngine 类（模板服务）而不是 Twig_Enviroment（树枝服务）。您可以在下面找到模板服务`vendor\symfony\symfony\src\Symfony\Bundle\TwigBundle\TwigEngine.php`

```
...
class TwigEngine extends BaseEngine implements EngineInterface
{
... 
```

在这个类中，您将找到两个方法 render(..) 和 renderResponse(...)，这意味着您的其余代码应该可以在下面的示例中正常工作。您还将看到 TwigEngine 注入了 twig 服务（Twig_Enviroment 类）来构造它的父类 BaseEngine。因此，无需请求 twig 服务，请求 Twig_Environment 的错误应该会消失。

所以在你的代码中你会这样做：

```
# app/config/services.yml
services:
    project.controller.some:
        class: Project\SomeBundle\Controller\SomeController
        arguments: ['@templating'] 
```

你的班

```
namespace Project\SomeBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Templating\EngineInterface;
use Symfony\Component\HttpFoundation\Response;

class SomeController
{
    private $templating;

    public function __construct(EngineInterface $templating)
    {
        $this->templating = $templating;
    }

    public function indexAction()
    {
        return $this->templating->render(
            'SomeBundle::template.html.twig',
            array(

            )
        );
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-24T19:46:37.387

1.  尝试清除缓存。

2.  您的路由是否设置[为将控制器称为服务](http://symfony.com/doc/current/cookbook/controller/service.html)？如果没有，Symfony 将不会使用服务定义，因此不会使用您指定的任何参数。

# javascript - html中的嵌套消息

> ID：10304469
> 
> 赞同：0
> 
> 时间：2012-04-24T19:10:44.230
> 
> 标签：javascript, html, css

我想建立一个简单的消息fourm。

我想嵌套消息（问题的答案）

我的网站是希伯来语 ( `dir="rtl"`)

我想`<ol>`为每个答案\问题动态创建

意义：

> 1.q1
> 
> 1.1 a1
> 
> 1.2 a2
> 
> 1.2.1 a2-a1

我怎样才能做到这一点并保持方向`rtl`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:19:05.540

嵌套`ol`s 的标记应如下所示：

```
<ol>
    <li>Question 1
        <ol>
            <li>Answer 1</li>
            <li>Answer 2</li>
            <li>Answer 3
                <ol>
                    <li>Answer 3.1</li>
                </ol>
            </li>
        </ol>
    </li>
    <li>Question 2</li>
    <li>Question 3</li>
</ol> 
```

据我所知，无论是语言`rtl`还是`ltr`语言，这个标记都没有区别，如果我错了，请纠正我:)

# ironworker - 我在 IronWorker 上的工作人员中包含文件时遇到问题

> ID：10304473
> 
> 赞同：1
> 
> 时间：2012-04-24T19:10:48.363
> 
> 标签：ironworker

我在我的工作人员文件中包含一个文件时遇到问题......我需要做什么才能在排队工作时找到所需的文件？

这是错误：

```
/usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': no such file to load -- my_worker_helper (LoadError)
    from /usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /task/realtime_worker.rb:2:in `<top (required)>'
    from /task/runner.rb:343:in `require_relative'
    from /task/runner.rb:343:in `<main>' 
```

这是代码：

```
require 'iron_worker'
require 'my_worker_helper'
require 'real_time_helper'

class RealtimeWorker < IronWorker::Base

    attr_accessor :team_list

    def run 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:21:21.010

```
require 'iron_worker'

class RealtimeWorker < IronWorker::Base
  merge 'my_woker_helper.rb'
  merge 'real_time_helper.rb' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T06:57:28.073

您将需要使用gem`merge`提供的功能。`iron_worker`

有几个像：

*   合并“文件”
*   合并宝石'一​​些宝石'
*   合并文件夹'目录'

更多信息：[https ://github.com/iron-io/iron_worker_ruby/wiki/Merging](https://github.com/iron-io/iron_worker_ruby/wiki/Merging)

# magento - 不断被添加到 index.php 中？导致致命错误

> ID：10304474
> 
> 赞同：0
> 
> 时间：2012-04-24T19:10:57.350
> 
> 标签：magento

今天，当我启动我的 wamp 托管网站时，我收到了这个致命错误：

( ! ) 致命错误：无法使用 [] 读取第 1 行的 C:\wamp\www\index.php

index.php 的第 1 行开头有这个，据我所知，它以前没有：

```
<?php $_SESSION[]; ?> 
```

我的远程托管站点没有这个..如果我删除它，致命错误就会消失，但它会在一段时间后继续出现（不确定确切的时间，我所知道的是我将在另一个窗口中工作然后回来并且页面不会加载）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:32:46.420

try something like this

```
 <?php $_SESSION['views']; ?>   (OR)

   <?php  $_SESSION["username"]=$username;?> 
```

# java - 在 JAR 文件中包含照片

> ID：10304476
> 
> 赞同：-1
> 
> 时间：2012-04-24T19:11:06.147
> 
> 标签：java

我为一所学校制作了一个 Java 数据库程序，其中包含学生的照片……当我通过 NetBeans 运行该程序时，一切正常……

但是当我使程序成为“可双击应用程序”（使用 Jar Bundler）并运行该应用程序时：没有照片显示！（请注意，应用程序文件的大小仅为 700 KB 左右......当照片大小超过 2 MB 时。）

如何在“可双击应用程序”中包含照片，以便我可以直接运行包含所有照片的应用程序，而无需使用 NetBeans？

我将图像目录添加为项目的源根目录。

实际上，我右键单击该项目并选择了 Properties 项。我在对话框左侧的列表中选择了“来源”（这将更改对话框右侧面板的内容）。

我按下了“添加文件夹...”按钮并选择了图像文件夹（添加了图像文件夹的条目）。现在，当我制作 JAR 文件时，它的大小变成了大约 5 MB 而不是 700 KB。这很好。但是当我双击 JAR 文件并在 NetBeans 之外运行应用程序时。

考虑两种情况： 情况 1：如果我将 JAR 文件放在任何位置（例如在我的桌面上），应用程序无法显示照片... 情况 2：我必须将 JAR 文件放在与NetBeans 项目是。在这种情况下，没关系。

结果是 JAR 文件仍然依赖于照片文件夹。我需要将所有照片***嵌入***到 JAR 文件中，这样它就可以移植了。这意味着如果我将此文件带到任何其他计算机上，我可以在没有照片文件夹的情况下运行包含所有照片的程序。最后：我需要使用`getClass().getResourceAsStream(file)`吗？？我该如何使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:15:05.727

您可以将文件插入到[ZIP](http://en.wikipedia.org/wiki/ZIP_%28file_format%29)文件中，并将其与应用程序一起打包或打包到[JAR](http://en.wikipedia.org/wiki/JAR_%28file_format%29)文件中。

稍后，使用`getClass().getResourceAsStream(file)`, 获取对该文件的引用。提取照片并在您的应用程序中显示它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:32:27.013

In NetBeans, put all photos under a folder, for example, `fotos`, and then make the JAR file. Now in the same location as your runnable jar file, paste the fotos folder. Open the JAR file and delete the `fotos` folder inside it.

When you run the JAR file, the classpath will be the current path of the JAR file and Java will look for the folder named `fotos` in the current classpath, as you have the `fotos` folder in the location of the JAR file. Your fotos will be loaded from there.

# javascript - 将 HTML5 数据字符串作为 JavaScript 执行（没有 eval）？

> ID：10304485
> 
> 赞同：0
> 
> 时间：2012-04-24T19:11:38.287
> 
> 标签：javascript, jquery

我有以下 div：

`<div id="foo" data-callback="function(){console.log(1)}"></div>`

我希望能够将 div 的回调字符串作为 JavaScipt 函数执行，如下所示：

`($('#foo').data('callback'))()`

但这显然行不通。有没有办法做到这一点？

这是一个[JSFiddle](http://jsfiddle.net/CXfaw/)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T19:15:43.307

我建议不要将代码存储为`data-`属性。创建一个函数，然后将函数名称存储为属性。

```
<script>
function callbackA(){
    console.log(1)
}
</script>
<div id="foo" data-callback="callbackA"></div> 
```

然后你可以做`window[$('#foo').data('callback')]()`。

编辑：如果您不想这样做，您也可以使用`onclick`事件（或任何（内置）事件）。

```
<div id="foo" onclick="console.log(1)"></div> 
```

然后您可以使用`.prop`来获取事件（作为函数），然后使用它。

```
var callback = $('#foo').prop('onclick'); // get function
$('#foo').removeProp('onclick'); // remove event
callback();  // use function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T19:17:37.570

一，可能很疯狂:)，解决方案是使用[js.js](https://github.com/jterrace/js.js/)。这将比`eval`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T19:16:19.083

如果您可以将 html 更改为

```
<div id="foo" data-callback="{console.log(1)}"></div> 
```

那么你可以做

```
new Function($('#foo').data('callback'))() 
```

* * *

但是为什么你***需***要这样做呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T19:14:39.640

您可以使用 eval 来完成`eval`，但**eval 是邪恶的**。

**编辑：**

并且需要对您的 HTML 进行一些修改，

```
<div id="foo" data-callback="(function (){console.log(1)})"></div> 
```

JS

```
eval($('#foo').data('callback'))(); 
```

[**演示**](http://jsfiddle.net/skram/CXfaw/5/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T19:16:11.357

您始终可以使用[`Function`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function)构造函数，但是，您将需要一个仅包含您的语句的字符串。如果您可以在源处修改该数据属性的值，您可以解析现有字符串甚至更好。然后你会做

```
var fn = new Function($("#foo").data("callback"));
fn(); 
```

**[更新了 JSFiddle](http://jsfiddle.net/CXfaw/1/)**

# c# - 在 ASP.Net C# Open Office XML 中将 ImagePart 添加到 docx

> ID：10304487
> 
> 赞同：0
> 
> 时间：2012-04-24T19:11:55.167
> 
> 标签：c#, asp.net, openxml

我在 Open Office XML 方面不是最出色的，并且一直在努力尝试将图像添加到我在 C#/ASP.Net 中以编程方式生成的 docx 文件中。我正在尝试将徽标放在简历文本块的顶部。当我只使用主要文本部分（resumeText）时，我的程序运行良好，但是当我添加代码以尝试添加图像时，我收到一个错误“文件'..'.docx 不能打开是因为内容有问题。然后详细信息说“未声明的前缀”。我以为我已经从另一个示例中正确复制了 xml，但似乎无法让它工作。谁能看到我哪里出错了？感谢任何人都可以提供的任何帮助。这是相关代码：

```
protected void ibtDownload_Click(object sender, ImageClickEventArgs e)
{
    string attachmentDir = "~/tempDwnlds/";
    string fileName = m_candidateUser.firstName + "_" + m_candidateUser.lastName + "_" + m_candidateUser.userID.ToString().Substring(0, 6);
    string imagesPath = Server.MapPath("Images/Logo1.jpg");
    CreateNewWordDocument(Server.MapPath(attachmentDir) + fileName + ".docx", Server.HtmlEncode(m_candidate.resume), imagesPath);       
}

public static void CreateNewWordDocument(string document, string resumeText, string imagesPath)
{
    using (WordprocessingDocument wordDoc = WordprocessingDocument.Create(document, WordprocessingDocumentType.Document))
    {
        // Set the content of the document so that Word can open it.
        MainDocumentPart mainPart = wordDoc.AddMainDocumentPart();
        ImagePart newImage = wordDoc.MainDocumentPart.AddImagePart("images/jpeg");
        using (Stream image = new FileStream(imagesPath, FileMode.Open, FileAccess.Read, FileShare.Read))
        {
            newImage.FeedData(image);
        }
        SetMainDocumentContent(mainPart, resumeText, imagesPath);
    }
}

// Set the content of MainDocumentPart.
public static void SetMainDocumentContent(MainDocumentPart part, string resumeText, string imagesPath)
{

    string docXml =
     @"<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?> 
<w:document xmlns:w=""http://schemas.openxmlformats.org/wordprocessingml/2006/main"">
    <w:body>
        <w:p>
          <w:r>
            <w:drawing>
              <wp:inline>
                <wp:extent cx=""3200400"" cy=""704850"" /> <!-- describes the size of the image -->
                <wp:docPr id=""2"" name=""Picture 1"" descr=""filename.JPG"" />
                <a:graphic>
                  <a:graphicData uri=""http://schemas.openxmlformats.org/drawingml/2006/picture"">
                    <pic:pic>
                      <pic:nvPicPr>
                        <pic:cNvPr id=""0"" name=""filename.JPG"" />
                        <pic:cNvPicPr />
                      </pic:nvPicPr>
                      <pic:blipFill>
                        <a:blip r:embed=""" + imagesPath + @""" /> <!-- this is the ID you need to find -->
                        <a:stretch>
                          <a:fillRect />
                        </a:stretch>
                      </pic:blipFill>
                      <pic:spPr>
                        <a:xfrm>
                          <a:ext cx=""3200400"" cy=""704850"" />
                        </a:xfrm>
                        <a:prstGeom prst=""rect"" />
                      </pic:spPr>
                    </pic:pic>
                  </a:graphicData>
                </a:graphic>
              </wp:inline>
            </w:drawing>
          </w:r>
        </w:p>
        <w:p>
            <w:r>
                <w:t xml:space='preserve'>" + WrappableDocXText(resumeText) + @"</w:t>
            </w:r>
        </w:p>
    </w:body>
</w:document>";

    using (Stream stream = part.GetStream())
    {
        byte[] buf = (new UTF8Encoding()).GetBytes(docXml);
        stream.Write(buf, 0, buf.Length);
    }
}

public static string WrappableDocXText(string source)
{
    string nwln = Environment.NewLine;
    return source.Replace(nwln, "<w:br/>");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:47:54.707

RelationshipId 应该在那里而不是 imagesPath @`<a:blip r:embed=""" + imagesPath + @""" />`你可以得到`string relationshipId = mainPart.GetIdOfPart(imagePart)`

你可以找到示例代码@msdn链接[如何将图片插入到文字处理文档](http://msdn.microsoft.com/en-us/library/bb497430.aspx)

**更新：** 您需要在两个地方进行更改 1) 传递图像部分的 id，如下所示`SetMainDocumentContent(mainPart, resumeText, mainPart.GetIdOfPart(newImage));`

2) 添加命名空间，如下所示

公共静态无效 SetMainDocumentContent（MainDocumentPart 部分，字符串 resumeText，字符串 relId）{

```
 string docXml =   @"<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?><w:document xmlns:a=""http://schemas.openxmlformats.org/drawingml/2006/main"" xmlns:pic=""http://schemas.openxmlformats.org/drawingml/2006/picture"" xmlns:a14=""http://schemas.microsoft.com/office/drawing/2010/main"" xmlns:wpc=""http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas"" xmlns:mc=""http://schemas.openxmlformats.org/markup-compatibility/2006"" xmlns:r=""http://schemas.openxmlformats.org/officeDocument/2006/relationships"" xmlns:m=""http://schemas.openxmlformats.org/officeDocument/2006/math"" xmlns:wp14=""http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing"" xmlns:wp=""http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing"" xmlns:w=""http://schemas.openxmlformats.org/wordprocessingml/2006/main"" xmlns:w14=""http://schemas.microsoft.com/office/word/2010/wordml"" xmlns:wpg=""http://schemas.microsoft.com/office/word/2010/wordprocessingGroup"" xmlns:wpi=""http://schemas.microsoft.com/office/word/2010/wordprocessingInk"" xmlns:wne=""http://schemas.microsoft.com/office/word/2006/wordml"" xmlns:wps=""http://schemas.microsoft.com/office/word/2010/wordprocessingShape"">    <w:body>
    <w:p>
      <w:r>
        <w:drawing>
          <wp:inline >
            <wp:extent cx=""3200400"" cy=""704850"" /> <!-- describes the size of the image -->
            <wp:docPr id=""2"" name=""Picture 1"" descr=""filename.JPG"" />
            <a:graphic>
              <a:graphicData uri=""http://schemas.openxmlformats.org/drawingml/2006/picture"">
                <pic:pic>
                  <pic:nvPicPr>
                    <pic:cNvPr id=""0"" name=""filename.JPG"" />
                    <pic:cNvPicPr />
                  </pic:nvPicPr>
                  <pic:blipFill>
                    <a:blip r:embed=""" + relId + @""" /> <!-- this is the ID you need to find -->
                    <a:stretch>
                      <a:fillRect />
                    </a:stretch>
                  </pic:blipFill>
                  <pic:spPr>
                    <a:xfrm>
                      <a:ext cx=""3200400"" cy=""704850"" />
                    </a:xfrm>
                    <a:prstGeom prst=""rect"" />
                  </pic:spPr>
                </pic:pic>
              </a:graphicData>
            </a:graphic>
          </wp:inline>
        </w:drawing>
      </w:r>
    </w:p>
    <w:p>
        <w:r>
            <w:t xml:space='preserve'>" + WrappableDocXText(resumeText) + @"</w:t>
        </w:r>
    </w:p>
</w:body> 
```

";

```
 using (Stream stream = part.GetStream())
        {
            byte[] buf = (new UTF8Encoding()).GetBytes(docXml);
            stream.Write(buf, 0, buf.Length);
        }
    } 
```

# asp.net-mvc - 如何使用另一个下拉列表过滤下拉列表的选项

> ID：10304489
> 
> 赞同：16
> 
> 时间：2012-04-24T19:12:16.927
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我对 ASP.NET 很陌生，我正在使用 ASP.Net 的 MVC 3 框架。我试图使用另一个下拉列表过滤下拉列表的选项，但我无法做到这一点。我首先尝试通过填充主要类别和子类别的列表并将它们加载到页面来执行此操作。然后将每个子类别的选项的类属性设置为其父类别。最后，从第一个下拉列表中单击父类别仅显示子子类别并隐藏其余部分（这是我以前在 java 中所做的）。但是在 ASP.Net MVC 中，html 代码是如此不同，我什至无法为下拉菜单的每个选项设置类属性，它通常为所有下拉菜单设置类，而不是为每个选项设置类。这就是我现在拥有的 这是我的观点

```
<p>
@Html.LabelFor(model => model.CategoryId)
@Html.DropDownListFor(x => x.CategoryId , new SelectList(Model.Categories, "CategoryId", "CategoryName"), new { onchange= "this.form.submit();"})
</p>

<p>
@Html.LabelFor(model => model.SubCategories)
@Html.DropDownListFor(x => x.SubCategories, new SelectList(Model.SubCategories, "SubCategoryId", "SubCategoryName"), new { @class = "Category1.categoryname" })
 </p> 
```

这是我的模型

```
public class TestQuestionsViewModel
{
    public string CategoryId { get; set; }
    public IEnumerable<Category> Categories { get; set; }

    public string SubCategoryId { get; set; }
    public IEnumerable<SubCategory> SubCategories { get; set; }
 } 
```

这是我的控制器类方法

```
 public ActionResult Create()
    {

        var model = new TestQuestionsViewModel
        {

            Categories = resetDB.Categories.OrderBy(c => c.categoryid),
            SubCategories = resetDB.SubCategories.OrderBy(sc => sc.subcategoryid)
         };
     return View(model);
    } 
```

我的问题是如何为每个单独的选项设置类属性。或者，如果有人对如何以不同的方式执行此操作有任何建议，我愿意接受任何解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-24T19:53:42.267

在页面最初加载时将所有子项加载到页面，对我来说似乎不是一个好主意。如果您有 100 个类别并且每个类别有 200 个子类别项怎么办？您真的要加载 20000 个项目吗？

我认为您应该采用增量加载方式。为主类别下拉菜单提供值，让用户从中选择一项。调用服务器并获取属于所选类别的子类别并将该数据加载到第二个下拉列表中。您可以使用 jQuery ajax 来做到这一点，这样用户在选择一个下拉菜单时就不会感觉到完整的页面重新加载。我将这样做。

创建具有两个类别属性的 ViewModel

```
public class ProductViewModel
{
    public int ProductId { set;get;}
    public IEnumerable<SelectListItem> MainCategory { get; set; }
    public string SelectedMainCatId { get; set; }
    public IEnumerable<SelectListItem> SubCategory { get; set; }
    public string SelectedSubCatId { get; set; }
} 
```

让您的 GET Action 方法返回此强类型视图，并填充 MainCategory 的内容

```
public ActionResult Edit()
{
   var objProduct = new ProductViewModel();             
   objProduct.MainCategory = new[]
   {
      new SelectListItem { Value = "1", Text = "Perfume" },
      new SelectListItem { Value = "2", Text = "Shoe" },
      new SelectListItem { Value = "3", Text = "Shirt" }
   };
   objProduct.SubCategory = new[] { new SelectListItem { Value = "", Text = "" } };
   return View(objProduct);
} 
```

在你的强类型视图中，

```
@model MvcApplication1.Models.ProductViewModel
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
@using (Html.BeginForm())
{    
    @Html.DropDownListFor(x => x.SelectedMainCatId, new SelectList(Model.MainCategory,"Value","Text"), "Select Main..")
    @Html.DropDownListFor(x => x.SelectedSubCatId, new SelectList(Model.SubCategory, "Value", "Text"), "Select Sub..")    
    <button type="submit">Save</button>
}
<script type="text/javascript">
    $(function () {
        $("#SelectedMainCatId").change(function () {
            var val = $(this).val();
            var subItems="";
            $.getJSON("@Url.Action("GetSub","Product")", {id:val} ,function (data) {
              $.each(data,function(index,item){
                subItems+="<option value='"+item.Value+"'>"+item.Text+"</option>"
              });
              $("#SelectedSubCatId").html(subItems)
            });
        });
    });
</script> 
```

将 GetSub 操作方法添加到您的控制器以返回所选类别的子类别。我们将响应作为 Json 返回

```
 public ActionResult GetSub(int id)
 {
    List<SelectListItem> items = new List<SelectListItem>();
    items.Add(new SelectListItem() { Text = "Sub Item 1", Value = "1" });
    items.Add(new SelectListItem() { Text = "Sub Item 2", Value = "8"});
    // you may replace the above code with data reading from database based on the id

    return Json(items, JsonRequestBehavior.AllowGet);
 } 
```

现在选定的值将在您的 HTTPOST Action 方法中可用

```
 [HttpPost]
    public ActionResult Edit(ProductViewModel model)
    {
        // You have the selected values here in the model.
        //model.SelectedMainCatId has value!
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:17:53.633

您需要添加另一种方法来处理回发并过滤子类别选项。像这样的东西：

```
[HttpPost]
public ActionResult Create(TestQuestionsViewModel model)
{
    model.SubCategories = resetDB.SubCategories
            .Where(sc => sc.categoryid == model.SubCategoryId)
            .OrderBy(sc => sc.subcategoryid);
    return View(model);    
} 
```

**编辑**

顺便说一句，如果您仍然需要将类名设置为另一个下拉列表，则不能那样做。最简单的方法是将“SelectedCategoryName”属性添加到您的模型中，并像*{ @class = ModelSelectedCategoryName }*一样引用。

# mysql - 在 MySQL 中是否有当前数据库的变量？

> ID：10304490
> 
> 赞同：26
> 
> 时间：2012-04-24T19:12:18.690
> 
> 标签：mysql, sql, variables

我有一个在多个数据库上运行的脚本，要在多个数据库上运行，我只需更改 MySql“USE”语句。

我想要一个选择语句，将脚本正在执行的当前数据库作为字段输出。

例如：

```
 USE my_db;

SELECT 
  CURRENT_DB, -- this is where to insert the current executing db, i.e. "my_db"
  id, name, blah, blah
FROM my_table 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-24T19:14:10.563

使用`database()`函数： [http ://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_database](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_database)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-24T19:24:56.937

使用**数据库（）**

将默认（当前）数据库名称作为 utf8 字符集中的字符串返回。如果没有默认数据库，DATABASE() 返回 NULL。在存储的例程中，默认数据库是例程关联的数据库，它不一定与调用上下文中的默认数据库相同。

**例如**

```
 mysql> SELECT DATABASE(); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-24T19:15:24.073

试试这个片段：

```
select database(); 
```

# naming-conventions - 状态机中转换（事件）的命名

> ID：10304492
> 
> 赞同：2
> 
> 时间：2012-04-24T19:12:20.907
> 
> 标签：naming-conventions, state-machine

您是否应该在状态本身之后命名 FSM 中的事件（转换）？还是有公认的约定？例如，在 ruby​​ 中，`state_machine`您将拥有`machine.event!`and `machine.state?`。如果事件和状态相同，则检查和转换之间的唯一区别是`?`和`!`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:33:21.677

您不能对 Mealy 机器使用这样的命名，因为具有不同逻辑的操作应该具有不同的名称。除此之外，我认为这种方法没有问题。

# facebook - 有没有办法可靠地检索最大版本的 Facebook 相册照片的尺寸？

> ID：10304500
> 
> 赞同：7
> 
> 时间：2012-04-24T19:12:49.487
> 
> 标签：facebook, facebook-graph-api

我正在使用 graph api explorer 查询相册的照片。

```
graph.facebook.com/[album_id]/photos 
```

结果包括列出八个图像版本的“图像”键。最大的被列为`2048x1529`，但是当我打开实际图像时它只是`604x451`，这是为下一个最大版本列出的尺寸。

我的应用需要提前知道准确的图像尺寸。如何可靠地找到最大的可用图像尺寸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:12:36.963

鉴于从 ALBUM_ID/photos 返回的结果不可靠，我相信以下方法最接近您获得最大图像版本尺寸的意图：

您可以检索在线单击相册中的照片时看到的放大图像的尺寸。`src_big`该图像在`FQL` [照片表](https://developers.facebook.com/docs/reference/fql/photo/)中被引用。您使用此查询检索维度`FQL`：

```
SELECT src_big_width, src_big_height
FROM photo
WHERE object_id=OBJECT_ID 
```

其中 OBJECT_ID 是照片的 Facebook 对象 ID 号。

调用看起来像这样，

```
https://graph.facebook.com/fql?q=SELECT src_big_width,src_big_height FROM photo WHERE object_id=OBJECT_ID 
```

你需要

```
friends_photos
user_photos 
```

权限和访问令牌。

要获取 src_big 图像的 url，请将 src_big 添加到查询中：

```
SELECT src_big, src_big_width, src_big_height
FROM photo
WHERE object_id=OBJECT_ID 
```

如果图像是在 2012 年 3 月 1 日之前上传的，则 src_big 图像的最大宽度或高度为 720 像素。如果在该日期之后上传，则最大值为 960 像素。

# java - 在 Java Web 应用程序中更改数据库连接字符串

> ID：10304503
> 
> 赞同：2
> 
> 时间：2012-04-24T19:13:00.530
> 
> 标签：java, database

由于我在 .Net 方面的专业知识（我没有 Java 经验），我继承了一个 Java Web 应用程序。我需要改变这个：

```
http://**DatabaseOne**.Domain.com:Port/dir1/dir2 
```

对此：

`http://**DatabaseTwo**.Domain.com:Port/dir1/dir2`

在 .Net 中，我们有一个存储连接字符串的 Webconfig 文件。
我的研究（[问题 1](https://stackoverflow.com/questions/5651142/need-suggestion-on-how-to-work-with-connection-polling-in-javajspservlet) [2](https://stackoverflow.com/questions/494724/where-to-store-database-string-connection-in-java-web-app) [3](https://stackoverflow.com/questions/3507740/java-newbie-needs-help-with-database-connection) 表明 Java 目录中应该有 Content.xml、Web.xml 和/或 Server.xml。

我找到的内容和 Web xmls 不包含我正在寻找的连接字符串。

DBManager.Java 包含：

```
Public Connection getPoolConnection() throws JDBCConnectionException{
         return JDBCService.GetConnection("oracleUIPool");
 } 
```

这个 Java Web 应用程序似乎是一个更大的 Java Web 应用程序的一部分，所以连接字符串必须位于更高级别的目录中？该目录的名称是什么？

如果有帮助的话，我确实注意到了名为 Beans、JetSpeed 和 Struts 的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:17:27.190

其在应用服务器配置中作为数据源，检查 oracle-ds.xml 或类似的。

如果您使用的是 jboss，请执行 find 。-iname '*ds*xml' 或数据源，看看那里是否有任何东西。如果您使用的是 glassfish，请使用 Web 管理界面检查 oraclePool 设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:22:58.207

Java 使用可由服务器容器管理的 DataSource 的概念：Tomcat、JBoss 等。在每个服务器内部都有许多可用于配置 DataSorce 的配置文件。对于每个服务器和每个版本，都有配置。第一步是了解服务器，第二步是应用程序是否使用像 Hibernate 这样的框架。稍后，您将知道可以使用的配置类型，并且可以安全地找到并更改 URL。

Tomcat：[http](http://blog.mangar.com.br/?p=57) ://blog.mangar.com.br/?p=57 JBoss：[https ://community.jboss.org/wiki/ConfigDataSources](https://community.jboss.org/wiki/ConfigDataSources)

# apache-camel - apache camel aggregator2 - 如何聚合两种消息类型中的每一种？

> ID：10304507
> 
> 赞同：0
> 
> 时间：2012-04-24T19:13:30.673
> 
> 标签：apache-camel, aggregator

我有两种类型的消息（A 和 B）到达聚合器。如何聚合第一个到达的 A 和第一个到达的 B？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T04:54:46.340

如果您有 EIP 书籍或 Camel in Action 书籍，请阅读有关聚合器 EIP 的理论。那会告诉你很多。聚合 EIP 是最复杂的 EIP 之一，因此值得花点时间研究该模式。

简而言之，您需要关联 A 和 B，以便聚合 EIP 将匹配 2 条消息，并将它们聚合。

因此，您需要实现这种相关性如何作为表达式工作，在 Camel 中，您可以使用方法调用表达式来实现这一点，它允许您在方法调用中使用 Java 代码来确定这一点。

该方法的结果应该是一个指示相关组标识符的字符串。那么第一个 A 和第一个 B 消息应该具有相同的相关组标识符。例如，您将匹配消息分组。

我建议多研究 EIP，然后思考如何编写相关逻辑。然后您可以在 Java 代码中实现它，然后将方法调用表达式与 Camel 聚合器一起使用。

此外，第 2 A、第 3 A、第 2 B 和第 3 B 消息应该发生什么？它们应该如何关联？

应该像

```
1A + 1B
2A + 2B
3A + 3B 
```

然后消息可以按任何顺序到达聚合 EIP 模式，例如

```
 1B
  2B
  1A
  3B
  2A
  3A 
```

聚合器的结果将如上所示 1A+1B ... ？

# c# - 我需要将什么属性保存到 RoamingSettings？

> ID：10304509
> 
> 赞同：0
> 
> 时间：2012-04-24T19:13:42.657
> 
> 标签：c#, windows-8, roaming

我需要将什么属性保存到 RoamingSettings？

就像我序列化数据时一样，它需要 a`DataContract`和`DataMember`属性。我可以将我的类序列化为 XML，但我需要将其保存为`RoamingSettings`：

```
roamingSettings.Values["MyType"] = _mytype; 
```

调试时，我收到以下错误消息：

> 不支持这种类型的数据。
> WinRT 信息：尝试序列化要写入应用程序数据存储的值时出错

我想我需要一个属性，但是哪个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T07:45:47.073

使用正确的 StorageFolder ApplicationData.Current.RoamingFolder

```
public static class RoamingStorage<T> {

    public static async void SaveData(string filename, T data)
    {
        try
        {
            StorageFile file = await ApplicationData.Current.RoamingFolder.CreateFileAsync(filename, CreationCollisionOption.ReplaceExisting);
            using (IRandomAccessStream raStream = await file.OpenAsync(FileAccessMode.ReadWrite))
            {
                using (IOutputStream outStream = raStream.GetOutputStreamAt(0))
                {
                    DataContractSerializer serializer = new DataContractSerializer(typeof(List<Item>));
                    serializer.WriteObject(outStream.AsStreamForWrite(), data);
                    await outStream.FlushAsync();
                }
            }
        }
        catch (Exception exc)
        {
            throw exc;
        }
    }

    public static async System.Threading.Tasks.Task<T> LoadData(string filename)
    {
        T data = default(T);
        try
        {
            StorageFile file = await ApplicationData.Current.RoamingFolder.GetFileAsync(filename);
            using (IInputStream inStream = await file.OpenSequentialReadAsync())
            {
               DataContractSerializer serializer = new DataContractSerializer(typeof(T));
               data = (T)serializer.ReadObject(inStream.AsStreamForRead());
            }
        }
        catch (FileNotFoundException ex)
        {
            throw ex;
        }
        catch (Exception ex)
        {
            throw ex;
        }
        return data;
    }
} 
```

示例调用

```
RoamingStorage<List<Item>>.SaveData(FILENAME,Items);

List<Item> data = await RoamingStorage<List<Item>>.LoadData(FILENAME); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:21:34.597

处理这种情况的最佳方法是将对象序列化为字符串并存储它。

将存储的字符串值反序列化为目标对象。

# opengl - OpenGL鼠标侦听器返回

> ID：10304519
> 
> 赞同：1
> 
> 时间：2012-04-24T19:14:28.313
> 
> 标签：opengl, haskell, mouse

我正在尝试使用 OpenGL 在 Haskell 中使用鼠标侦听器，但遇到了问题。显然，x 和 y 坐标的返回值是 GLint。问题在于使用这些，因为我需要一个 GLfloat。简单的解析似乎无法解决问题。在更技术性的说明中，当屏幕的整个大小在 OpenGL 中仅表示为 1 个正方形单位时，为什么这会返回一个 int 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:23:01.013

GLUT 或 GLFW 是您可能用于访问 OpenGL 的工具包，它们为您管理窗口。他们不知道当前视口是什么样的——哎呀，你甚至可以只渲染四分之一的窗口；如果 GLUT/GLFW 关心 OpenGL 坐标，那会让你的坐标非常混乱！幸运的是，他们没有；你得到的`x`和坐标是窗口上的实际像素坐标，我认为它甚至在左上角，Y轴向下。鼠标坐标与 OpenGL 完全分离。`y``(0, 0)`

尽管如此，您可以将 a`GLint`转换为`GLfloat`using `fromIntegral`。

# wordpress - 对于每种语言，另一种固定链接 (Wordpress+qTranslate)

> ID：10304527
> 
> 赞同：2
> 
> 时间：2012-04-24T19:15:15.007
> 
> 标签：wordpress, seo, qtranslate

我需要一个用于 wordpress 的插件，它可以为每种语言提供另一个永久链接。我需要这个用于 wordpress 中的页面（并且与 qTranslate 兼容）。

例如：

```
DE: http://example-page.com/de/treten-sie-mit-uns-in-kontakt
EN: http://example-page.com/en/contact-us 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:27:20.087

qtranslate slug 可以解决问题。

[http://wordpress.org/extend/plugins/qtranslate-slug-with-widget/](http://wordpress.org/extend/plugins/qtranslate-slug-with-widget/)

# c++ - C++调用静态函数指针

> ID：10304531
> 
> 赞同：1
> 
> 时间：2012-04-24T19:15:49.250
> 
> 标签：c++, pointers, static, function-pointers

我想将回调转发给函数指针。所以我声明了一个静态(int*) m_pointer1，以及一个方法void RegisterCallback1((int*)fct)

在 class1.h 中：

```
public:
   int RegisterCallback1( int (*fct) );
private:
   static int (*m_Callback1); 
```

在 class1.cpp 中：

```
int class1::RegisterCallback1( int (*fct) )
{
    m_Callback1= fct;
} 
```

然后，我想将回调转发给函数指针：

```
void class1::Callback1()
{
   (*m_Callback1)();
} 
```

但是我得到一个编译器错误“表达式必须具有（指向）-函数类型我遵循教程并阅读了函数指针，他们似乎这样做没有任何问题。任何想法为什么？

编辑：所以，我声明 (int*)(void)m_Callback1 -Visual Studio 需要一个 void ...- 那么如何使用参数调用 registerCallback 函数？

```
class1.RegisterCallBack1(  ??? - class2::callback -??? ); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T19:19:08.203

`static int (*m_Callback1)`不声明函数指针，只是指向 int 的指针：您忘记了参数列表。你的意思是：

```
static int (*m_Callback1)(); 
```

和

```
int RegisterCallback1( int (*fct)() ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-24T19:19:01.013

你还没有声明一个函数指针，你已经声明了一个普通的数据指针。您在声明末尾缺少 () 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T19:28:05.393

您可以尝试通过使用 typedef 作为回调函数的签名来限制 Oli 和 Dave 指出的缺失 () 错误：`typedef int (*)() CallBack;`这至少具有让您考虑括号的精确数量而不是在每个点上的优点您使用此类功能的代码。

# algorithm - 为什么 FFT 产生复数而不是实数？

> ID：10304532
> 
> 赞同：89
> 
> 时间：2012-04-24T19:15:51.730
> 
> 标签：algorithm, math, audio, signal-processing, fft

我们遇到的所有 FFT 实现都会产生复数值（具有实部和虚部），即使算法的输入是一组离散的实数（整数）。

难道不能只用实数来表示频域吗？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-04-24T19:21:40.143

FFT 从根本上说是基础的变化。FFT 改变原始信号的基础是一组正弦波。为了使该基础能够描述所有可能的输入，它需要能够表示相位和幅度；相位用复数表示。

例如，假设您对仅包含单个正弦波的信号进行 FFT。根据相位，您很可能会得到完全真实的 FFT 结果。但是，如果您将输入的相位移动几度，FFT 输出还能如何表示该输入？

编辑：这是一个有点松散的解释，但我只是想激发直觉。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-04-24T19:22:01.623

FFT 为您提供幅度*和*相位。幅度被编码为复数的大小 (sqrt(x^2+y^2))，而相位被编码为角度 (atan2(y,x))。要从 FFT 得到严格的实数结果，输入信号必须具有偶数对称性（即 x[n]=conj(x[Nn])）。

如果您只关心强度，则复数的大小足以进行分析。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2012-04-24T19:37:25.127

是的，可以仅使用实数来表示严格实数输入的 FFT 频域结果。

FFT 结果中的那些复数只是 2 个实数，它们都是为您提供具有长度和方向角（或幅度和相位）的结果向量的 2D 坐标所必需的。FFT 结果中的每个频率分量都可以具有唯一的幅度和唯一的相位（相对于 FFT 孔径中的某个点）。

单独一个实数不能同时代表幅度和相位。如果您丢弃相位信息，如果您尝试使用 iFFT 重新创建信号（并且信号不对称），则很容易使信号严重失真。因此，完整的 FFT 结果需要每个 FFT bin 有 2 个实数。这 2 个实数在某些 FFT 中按照常见约定以复杂数据类型捆绑在一起，但 FFT 结果很容易（有些 FFT 确实如此）只产生 2 个实向量（一个用于余弦坐标，一个用于正弦坐标）。

也有直接产生幅度和相位的 FFT 例程，但它们比产生复数（或两个实数）矢量结果的 FFT 运行得更慢。也存在仅计算幅度并丢弃相位信息的 FFT 例程，但它们的运行速度通常不会比让您在更通用的 FFT 之后自己执行此操作更快。也许他们以不可逆为代价为编码人员节省了几行代码。但是很多库都懒得包含这些速度较慢且不太通用的 FFT 形式，而只是让编码器转换或忽略他们需要或不需要的内容。

此外，许多人认为使用复数运算所涉及的数学要**优雅**得多（对于严格的实数输入，将 FFT 结果的余弦相关或偶数部分放入实数部分，将正弦相关或奇数部分放入FFT 结果被放入复数的虚部。）

（添加：）而且，作为另一种选择，您可以考虑每个 FFT 结果箱的两个分量，而不是实数和虚数分量，偶数和奇数分量，都是实数。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-04-24T20:40:26.033

如果给定频率的 FFT 系数`f`是`x + i y`，则可以将`x`其视为该频率处的余弦系数，而`y`是正弦系数。如果将这两个波添加到特定频率，您将获得该频率的相移波；该波的幅度为`sqrt(x*x + y*y)`，等于复系数的幅度。

[离散余弦变换](http://en.wikipedia.org/wiki/Discrete_cosine_transform)(DCT) 是产生所有实系数的傅里叶变换的相对形式。许多图像/视频压缩算法都使用二维 DCT。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-04-24T19:43:20.537

1.  离散傅里叶变换基本上是从“时域”中的复数向量到“频域”中的复数向量的变换（我使用引号是因为如果您应用正确的缩放因子，DFT 就是它自己的逆）。如果您的输入是真实的，那么您可以一次执行两个 DFT：获取输入向量**x**和**y**并计算 F( **x**  +  *i*  **y** )。我忘记了你之后如何分离 DFT，但我怀疑它是关于对称性和复共轭的。

2.  [离散余弦变换](http://en.wikipedia.org/wiki/Discrete_cosine_transform)排序让您可以用实数表示“频域”，并且在有损压缩算法（JPEG、MP3）中很常见。（对我来说）令人惊讶的是，即使它似乎丢弃了相位信息，它也能工作，但这似乎也使它对大多数信号处理目的不太有用（我不知道一种简单的方法来进行卷积/相关） DCT）。

我可能弄错了一些细节；）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-02-23T01:12:08.877

您提出这个问题的方式，我相信您正在寻找一种更直观的思维方式，而不是数学答案。我来自机械工程背景，这就是我对傅里叶变换的看法。我参考钟摆对傅立叶变换进行上下文化。如果我们只有摆的 x 速度与时间的关系，并且我们被要求估计摆的能量（或摆的力源），则傅立叶变换给出了完整的答案。通常我们观察到的只是 x 速度，我们可能会得出结论，只需要为钟摆提供与其动能的正弦变化相当的能量。但钟摆也有势能。该能量与势能相差 90 度。因此，为了跟踪势能，我们只是跟踪（动力学）实分量的 90 度异相部分。虚部可以被认为是一个“势速”，它代表了源必须提供的势能的表现，以迫使振荡行为。有用的是，这可以很容易地扩展到电容器和电感器也以“潜在形式”存储能量的电气环境。如果信号不是正弦曲线，那么变换当然会尝试将其分解为正弦曲线。我认为这是假设最终信号是由无限源的组合作用产生的，每个源都具有不同的正弦曲线行为。我们试图确定的是在每个时刻产生最终观察到的信号的每个源的强度和相位。

PS: 1) The last two statements is generally how I think of the Fourier transform itself. 2) I say potential velocity rather the potential energy as the transform usually does not change dimensions of the original signal or physical quantity so it cannot shift from representing velocity to energy.

# java - 无法在 Android 中使用 MediaPlayer 停止在其他 Activity 中播放声音

> ID：10304545
> 
> 赞同：-1
> 
> 时间：2012-04-24T19:16:30.373
> 
> 标签：java, android

我正在尝试在我的 Android 应用程序中播放背景声音。我正在使用一个单独的类作为 Soundmanager。在我的第一个活动中，我开始播放声音，我希望它通过其他 2 个活动播放。在我的第三节课上，我希望它停止，并且应该播放另一种声音。但是我在停止那个声音时遇到了问题，不知道为什么。我想这与我在 Soundmanager 类中使用类 Context 有关。

有谁知道如何让声音停止？我将链接我的 Soundmanager 课程，因为我猜这是唯一相关的课程。我对编程很陌生，所以请温柔一点。

Soundmanager 类 [http://codepad.org/KJi6DZN6](http://codepad.org/KJi6DZN6)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:37:12.617

将所有方法和类变量设为`SoundManager`静态（并`Context`为需要的方法传入 a）。

我怀疑您可能会`SoundManager`在每个活动中创建一个新实例，这将创建多个`SoundManager`. 使其可静态访问意味着所有活动都在修改相同的变量。

另一个注意事项，我认为您不必拥有 Activity `Context`，因此请尝试通过`context.getApplicationContext()`. 这将避免将`MediaPlayer`对象绑定到任何特定的活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:33:25.317

只是猜测，因为我不知道您如何共享 Soundmanager 对象：

也许您在每个应该使用它的 Activity 中创建 Soundmanager 类的新实例。（即`new Soundmanager(context)`在它们中的每一个中都有一个，或者在停止活动中至少有一个）。

# javascript - 根据组中的用户数组将图标附加到用户名的脚本，如何创建？

> ID：10304547
> 
> 赞同：-1
> 
> 时间：2012-04-24T19:16:32.683
> 
> 标签：javascript, mediawiki

我正在扩展我作为管理员的 wiki 上的排名系统，并且我希望能够：

1.  在多个用户组中创建一组人员
2.  在当前页面中搜索列表中的名称
3.  根据状态在他们的名字后面附加一个图标

我知道要创建数组，我需要像这样定义它们：

```
var hosts = new Array("H1");
    /* Prob don't need an array for a group with one user;
    * however, will it break anything to have it?
    * There may be users added here in the future. */
var bureaucrats = new Array("B1", "B2", "B3", "B4", "B5")
var admins = new Array("A1", "A2", "A3", "...")
/* There are more, abbreviating for effect. */
var superUsers = new Array("SU1", "SU2", "SU3", "SU4", "...")
/* There are more, abbreviating for effect. */ 
```

我`concat()`最初可以查看所有数组以查看其中一个用户是否存在。

```
var ranked_users = hosts.concat(bureaucrats, admins, superUsers) 
```

我可以创建循环来遍历列表`rankedUsers`

```
var numOfUsers=rankedUsers.length;
for (i=0;i<=numOfUsers;i++)
{
    if (rankedUsers[i]==/* Not sure */)
    {
         concat(String.fromCharCode(/* Based on group */, 00a0), rankedUsers[i])
    }
} 
```

我会`2776`为主机、`2777`官僚、`2778`管理员和`2779`超级用户使用代码。（如果我声明更多组，可能会走得更远，但扩展模式会很简单）。这是我开始卡住的地方。如何在页面上找到用户名？我使用 match() 还是 search()？

编辑：我建立了一个 jsfiddle 的开始，可以在[这里](http://jsfiddle.net/RDmFn/)找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-12-13T16:01:03.657

一段时间后再次发现这一点，我最终为每个组分配了一个类，然后使用 css 为图像添加前缀：

```
.group:before {
  content: '\code';
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-01T01:03:59.443

为什么要在 JavaScript 中这样做？在解析时使用 PHP 执行此操作。

然后，您可以轻松访问正在创建的任何链接对象的名称空间和标题，并且可以在需要时采取行动（即，当名称空间为 2 [User] 并且标题是属于某个组的用户名时）。

[只需使用LinkBegin 钩子](http://www.mediawiki.org/wiki/Manual%3aHooks/LinkBegin)编写一个简单的扩展程序并检查`$user->getGroups()`您要标记的组。

# delphi - 绘制滚动条的 VCL 样式可能存在错误

> ID：10304548
> 
> 赞同：2
> 
> 时间：2012-04-24T19:16:33.057
> 
> 标签：delphi, delphi-xe2, vcl-styles, tpagecontrol

我的主窗体的中心有一个页面控件（我的图像中的 form1），我想打开停靠在页面控件中的其他窗体。因为我的子表单上有很多控件，所以我需要垂直和水平滚动条（在子表单上我有活动滚动条选项处于活动状态），但这里有一个问题：当我使用 VCL 样式时，我的滚动条没有像它们一样绘制应该是，它们是不可用的。这是某种 VCL 样式的错误吗？

![在此处输入图像描述](../Images/df3b542aeff586e24d1499a01f9a4c78.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T21:25:28.263

[`TControlScrollBar`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TControlScrollBar)TForm 使用的滚动条[（](http://qc.embarcadero.com/wc/qcmain.aspx)很多工作，作为简单的工作区，您可以使用[`TScrollBar`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.StdCtrls.TScrollBar)正确支持 vcl 样式的组件（在您的表单中）。

# c# - SSIS：通过 SSIS 执行 Ironpython 或 Ironruby 脚本

> ID：10304549
> 
> 赞同：6
> 
> 时间：2012-04-24T19:16:33.470
> 
> 标签：c#, python, ssis, ironpython

## 问题！

我有一个小 python 脚本，它通过一个网页（http-crawling）。此网页托管在 Intranet 内，并使用 NTLM 身份验证来收集对其的访问权限。

因此，我发现这个任务（检索 http-content）很容易使用 python 进行编程，而不是尝试将整个 python 脚本重写为 C#，然后通过 SSIS 上的“脚本任务”使用它来完成任务。

## 暗示！

我仔细查看了 SSIS 工具，发现有一个名为“执行进程任务”的控制流，它可以让您执行 Win32 可执行文件。

但问题在于如何调用我的 python 脚本，因为它不是可执行的，需要由 python 解释器解释（如果你会原谅重复的话）。因此，我可以轻松地构建一个简单的“.bat”文件，该文件同时调用 python 脚本和解释器。然后通过 SSIS“执行进程任务”执行该文件。

## 问题！

还有其他方法可以实现吗？（整洁的方式）

# 编辑#1

## 用法

从脚本中检索到的信息将把该信息从数据库存储到一个表中，以便从另一个 SSIS 进程通过数据库表访问该信息。

我正在从不同的来源（平面文件、数据库表、http 请求……）检索信息，以便将该信息归档到可以发布在 Web 服务中然后从 Excel 项目中访问的数据库中。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T18:51:40.340

在 SSIS 范围内使用 IronPython 的最简单的机制（至少在我的大脑中）是调用外部进程并转储到文件，然后将其用作数据流的源。

也就是说，我能够从 C# 托管 IronPython 应用程序并使用返回的数据来填充输出缓冲区并与管道中的数据进行交互。我只有一台机器可以执行此操作，所以我列出了我记得做的所有事情，直到包裹变绿为止。

## 先决条件

这篇文章让我了解了如何完成这项工作。[在 C# 4.0 程序中托管 IronPython](http://blogs.msdn.com/b/charlie/archive/2009/10/25/hosting-ironpython-in-a-c-4-0-program.aspx) 我强烈建议您创建一个 C#/VB.NET 控制台应用程序并首先让您的 IronPython 集成在那里工作，因为 SSIS 将为所有内容添加一个额外的层。

可能有能力在 C# 中托管旧版本的 IronPython，而不需要 4.0 框架，但这远远超出了我的能力范围。我可以说的是，要使用 4.0 框架，您正在查看 SQL Server 2012。2008 包可以针对 3.5 框架（默认为 2.0）。

全局程序集缓存，简称 GAC。它是 Windows 中可以存放已签名程序集的特殊位置。SSIS 可能能够使用 GAC 中没有的程序集，但我没有运气这样做。这个案子也不例外。我的控制台应用程序运行良好，但是当我将该代码复制到 SSIS 时，它会`Could not load file or assembly 'Microsoft.Scripting...`出现错误消息。幸运的是，IronPython-2.7.2.1（可能还有以前的版本）是强签名的 dll。这意味着您可以而且必须将它们添加到 GAC 中。

在您的 Visual Studio 目录中，查找 Visual Studio 命令提示符 (2010)。假设您的 IronPython 安装文件夹是`C:\tmp\IronPython-2.7.2.1\IronPython-2.7.2.1`您将键入`cd C:\tmp\IronPython-2.7.2.1\IronPython-2.7.2.1`然后我注册了以下 3 个程序集

```
C:\tmp\IronPython-2.7.2.1\IronPython-2.7.2.1>gacutil -if Microsoft.Dynamic.dll
Microsoft (R) .NET Global Assembly Cache Utility.  Version 4.0.30319.1
Copyright (c) Microsoft Corporation.  All rights reserved.

Assembly successfully added to the cache

C:\tmp\IronPython-2.7.2.1\IronPython-2.7.2.1>gacutil -if IronPython.dll
Microsoft (R) .NET Global Assembly Cache Utility.  Version 4.0.30319.1
Copyright (c) Microsoft Corporation.  All rights reserved.

Assembly successfully added to the cache

C:\tmp\IronPython-2.7.2.1\IronPython-2.7.2.1>gacutil -if Microsoft.Scripting.dll
Microsoft (R) .NET Global Assembly Cache Utility.  Version 4.0.30319.1
Copyright (c) Microsoft Corporation.  All rights reserved.

Assembly successfully added to the cache 
```

我的 SSIS 项目，我已将 Run64bitRuntime 设置为 False，但在重新测试时，没关系。默认为 True ，这似乎工作正常。

Python 脚本 - 我没有足够的背景来使 C# 和 .NET DLR 语言之间的集成更加优雅。提供一个字符串或包含我想要执行的脚本的东西会很好，也许这就是脚本块的内容，但我没有时间调查。因此，此解决方案需要一个脚本文件位于磁盘的某个位置。我在使用托管脚本进行导入时遇到了麻烦（没有名为 X 异常的模块）。毫无疑问，类路径和所有需要提供给主机以使其正常工作的东西都有一些魔力。顺便说一句，这可能是一个不同的 SO 问题。

## 设置

我有一个文件位于 C:\ssisdata\simplePy.py

```
# could not get a simple import to work from hosted
# works fine from "not hosted"
#import os

def GetIPData():
    #os.listdir(r'C:\\')
    return range(0,100) 
```

将脚本任务添加到数据流后，我将其配置为在输出缓冲区（wstr 1000）上有一个列。然后我用它作为我的源代码。

```
using System;
using System.Collections.Generic;
using System.Data;
using Microsoft.SqlServer.Dts.Pipeline.Wrapper;
using Microsoft.SqlServer.Dts.Runtime.Wrapper;
using IronPython.Hosting;
using Microsoft.Scripting.Hosting;

/// <summary>
/// Attempt to use IP script as a source
/// http://blogs.msdn.com/b/charlie/archive/2009/10/25/hosting-ironpython-in-a-c-4-0-program.aspx
/// </summary>
[Microsoft.SqlServer.Dts.Pipeline.SSISScriptComponentEntryPointAttribute]
public class ScriptMain : UserComponent
{

    /// <summary>
    /// Create data rows and fill those buckets
    /// </summary>
    public override void CreateNewOutputRows()
    {
        foreach (var item in this.GetData())
        {
            Output0Buffer.AddRow();
            Output0Buffer.Content = item;
        }

    }

    /// <summary>
    /// I've written plenty of code, but I'm quite certain this is some of the ugliest.
    /// There certainly must be more graceful means of 
    /// * feeding your source code to the ironpython run-time than a file
    /// * processing the output of the code the method call
    /// * sucking less at life
    /// </summary>
    /// <returns>A list of strings</returns>
    public List<string> GetData()
    {
        List<string> output = null;
        var ipy = Python.CreateRuntime();
        dynamic test = ipy.UseFile(@"C:\ssisdata\simplePy.py");
        output = new List<string>();
        var pythonData = test.GetIPData();
        foreach (var item in pythonData)
        {
            output.Add(item.ToString());
        }

        return output;
    }
} 
```

快速拍摄我的参考资料

![参考](../Images/d915642c75953cf59e863012a60f3e6a.png)

点击运行按钮，大获成功

![数据流](../Images/4f8681224d05f0b98d1c3ad10cbd39a6.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:18:18.627

你想多整洁？我认为你的选择很好，你不会找到任何更简单的方法来解决你的问题。你有一个文件列表并且需要执行它们，就是这样。

我能想到的一件事是将所有文件路径添加到 sql 表并使用 xp_cmdshell 执行它们

您需要在 sql 实例上启用它（我假设您有一个，因为您正在考虑使用 SSIS）

```
EXEC sp_configure 'show advanced options', 1
GO
reconfigure
go

EXEC sp_configure 'xp_cmdshell', 1
GO

reconfigure
go 
```

比您可以在表上循环并为每一行执行：

```
exec master.dbo.xp_cmdshell 'your_script' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-06T10:23:55.840

简单的解决方案怎么样（没有.bat）：

在“执行流程任务”的编辑器中，将**Exectutable**设置为 Python INTERPRETER

```
C:\...\Python34\python.exe 
```

for **Arguments**首先设置脚本路径，然后是脚本的任何参数

```
H:\...\test\helloworld.py -a 1 -b 2 
```

不要忘记您的**工作目录**

```
H:\...\test 
```

# php - Reservation system dates

> ID：10304552
> 
> 赞同：1
> 
> 时间：2012-04-24T19:16:54.343
> 
> 标签：php, mysql, date, timestamp

I have problem thinking this trough with `PHP & Mysql`. I have read [How to implement check availability in hotel reservation system](https://stackoverflow.com/questions/704176/how-to-implement-check-availability-in-hotel-reservation-system) and some more but they seem different.

I have to make a reservation system on which a converence room can be booked for 6hours minimal, so when a user make a reservation on a date e.g 24/04/2012 he then selects the start time of the rental `(00:00-06:00, 06:00-12:00, 12:00-18:00,18:00-24:00).` And the total number of hours(6,12,18 etc..) the user wants to rent the room.

The date is stored as a integer(timestamp).

I have two problems with this; I don´t know how to receive all possible days of a month on which the room is still up for reservation and how to check if a new reservation is possible.

I know how to calculate the start date and end date on the users input but I cant find the correct **mysql query** or **php check** for availability.

It's probably really simple but somehow because the end date is always variable I just cant find the answer.

Thanks in advance guys!

**EDIT Table structure: reservations**

```
id  int(11)         
user_id int(11)     
reservation_name    varchar(255)    
start_date  int(11)         
end_date    int(11)         

```

I believe reservations is the only one relevant

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:40:56.823

You'll find it's pretty difficult to generate a list of available days in MySQL. I recommend instead that you select an ordered list of booked days within your desired month, then loop over all days of that month in PHP skipping the day if it matches the next booked day from your MySQL query. The answer to [this question](https://stackoverflow.com/questions/4312439/php-return-all-dates-between-two-dates-in-an-array) will help you to build the dates over which you want to loop in PHP. In pseudocode:

```
$booked_days = sql(select all booked days in month order by day);
for each $day in month {
   if $day != current($booked_days) {
      // $day is not booked
   } else advance_next($booked_days);
} 
```

To check if a new reservation is possible, you might want to have a look at my answer to [a very similar question](https://stackoverflow.com/questions/10297437/mysql-checking-if-time-conflicts) earlier today.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T09:58:36.810

This brilliant simple MySQL query must do the trick:

[Checking for overlapping car reservations](https://stackoverflow.com/a/22168414/1720476/)

This solution is only for "dates" but You can simply aggregate it with additional "hours"

# visual-studio - Visual Studio 11 中的 F# 分析工具

> ID：10304562
> 
> 赞同：1
> 
> 时间：2012-04-24T19:17:48.267
> 
> 标签：visual-studio, f#, visual-studio-2012

作为一名学生，我只能访问 VS2010 Pro，它不提供良好的分析工具，因此您可以调整 F#（或其他）多线程程序的性能。Visual Studio 11 Pro Beta 似乎具有并发可视化工具和其他分析工具。

谁能确认这些工具是否与 VS2010 Premium/Ultimate 中可用的工具相同？概述 VS11 中可用的工具及其使用会很有用。

**编辑** 从 MSDN VS2010 文档（[这里](http://msdn.microsoft.com/en-us/library/z9z62c29.aspx)），很明显，分析工具仅限于 VS Premium 和 Ultimate。

对于 VS11 Beta，文档（[此处](http://msdn.microsoft.com/en-us/library/z9z62c29%28v=vs.110%29.aspx)）没有（还）说明这些工具将在哪些版本中可用。Concurrency Visualizer 有许多新增功能，希望它保留在 Pro 版中。

这个[页面](http://msdn.microsoft.com/en-us/library/bb386063%28v=vs.110%29.aspx)很好地概述了 VS11 Beta 中的新内容，包括分析和分析工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T06:20:11.993

VS2010 Pro 中没有分析工具。但是，您可以使用许多分析器。特别是 Mono 有一个很好的[分析器](http://www.mono-project.com/Profiler)。Eqatec [profiler](http://www.eqatec.com/Profiler/Home.aspx)也相当不错。

# sql - SQL：保证 N 行匹配多对多查询？

> ID：10304569
> 
> 赞同：2
> 
> 时间：2012-04-24T19:18:18.673
> 
> 标签：sql, many-to-many

O.我已经尝试解决这个问题两天了，没有成功，我的所有工作都因此而停止。

切入正题：

我在这三个表之间有一个多对多的关系：

```
Students
Students_Courses
Courses 
```

我需要确切知道哪些学生参加了物理、微积分和 CS101

他们可以参加其他课程，但我需要知道这三门课程中有哪些。

```
SELECT * FROM Students A 
INNER JOIN Students_Courses B on A.id = B.student
INNER JOIN Courses C on B.course = C.id
WHERE C.name = Physics OR C.name = calculus OR C.name = cs101 
```

但。这将返回任何这些课程的学生。

如果我将 WHERE 子句更改为：

```
WHERE C.name = Physics AND C.name = calculus AND C.name = cs101 
```

它不会返回任何内容，因为没有与所有三个匹配的行。

我该怎么做呢？我在这里缺少的 SQL 理论是什么？我意识到 SQL 按行工作，所以我需要按行过滤。但我确信这是一个常见的查询，我只是找不到理论的名称或我在这里缺少的东西来解决它。

我确实通过选择所有这些课程然后过滤哪些学生匹配这三个课程来解决它，但这是在应用程序中，我希望这可能是一个单一的 SQL 查询。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T19:27:00.797

米奇的解决方案会更好，但这是另一种乐趣。

```
SELECT A.id FROM Students A 
INNER JOIN Students_Courses B on A.id = B.student
INNER JOIN Courses C on B.course = C.id
WHERE C.name = Physics OR C.name = calculus OR C.name = cs101
GROUP BY A.id
HAVING count(DISTINCT C.id) = 3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T19:21:57.087

```
SELECT student
FROM Students
WHERE student IN (SELECT student FROM Students_Courses B INNER JOIN Courses C on B.course = C.id WHERE C.name = Physics) AND
student IN (SELECT student FROM Students_Courses B INNER JOIN Courses C on B.course = C.id WHERE C.name = calculus) AND
student IN (SELECT student FROM Students_Courses B INNER JOIN Courses C on B.course = C.id WHERE C.name = cs101); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T19:24:33.670

为了在连接中执行 AND 逻辑，我通常只是多次连接有问题的表。

```
SELECT * FROM Students A 
INNER JOIN Students_Courses B on A.id = B.student
INNER JOIN Courses C1 on B.course = C1.id
INNER JOIN Courses C2 on B.course = C2.id
INNER JOIN Courses C3 on B.course = C3.id
WHERE C1.name = Physics AND C2.name = calculus AND C3.name = cs101 
```

我不能肯定地说这是最有效的方法，但是当您从以行为中心的角度考虑它时，它是有道理的。如果每个“INNER JOIN”子句都能够从关系的“叶”表中获取一行，那么将需要三个“INNER JOIN”子句来获取三行，以便您可以对它们应用 AND 逻辑。

希望能帮助到你！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T21:30:33.563

另一种方法是使用集合运算符查询。我将使用哪个取决于学生是否可以注册同一课程的多个部分，以及我是否希望出现重复项。通过多个连接，理论上您可以返回一个学生的多个副本。如果我希望每个学生出现一次，那么我会使用 set 运算符：

```
SELECT A.STUDENTID 
FROM Students A  
INNER JOIN Students_Courses B 
    on A.id = B.student 
INNER JOIN Courses C1 
    on B.course = C1.id 
WHERE C1.name = 'Physics'
INTERSECT
SELECT A.STUDENTID 
FROM Students A  
INNER JOIN Students_Courses B 
    on A.id = B.student 
INNER JOIN Courses C2 
    on B.course = C2.id 
WHERE C2.name = 'calculus'
INTERSECT
SELECT A.STUDENTID 
FROM Students A  
INNER JOIN Students_Courses B 
    on A.id = B.student 
INNER JOIN Courses C3 
    on B.course = C3.id 
WHERE C3.name = 'cs101' 
```

**编辑** 另一种方法是使用聚合：

```
SELECT A.STUDENTID 
    , COUNT(distinct c3.name)
FROM Students A  
INNER JOIN Students_Courses B 
    on A.id = B.student 
INNER JOIN Courses C3 
    on B.course = C3.id 
WHERE C3.name IN 
    (   'cs101' 
        , 'calculus'
        , 'Pysics'
    )
GROUP BY a.studentid
HAVING COUNT(DISTINCT c3.name) = 3 
```

对于所有三门课程中至少有一节的所有学生，这两种方法都只返回一次学生数据。如果一个学生不能以每个名字参加多个课程，那么它将返回与上面的多个加入版本相同的结果。如果可以，那么一个学生在 2 门物理课程、2 门微积分课程和 3 门 cs101 课程中将使用多个连接返回 12 行。

# java - 简单计算未显示正确值

> ID：10304573
> 
> 赞同：0
> 
> 时间：2012-04-24T19:18:29.090
> 
> 标签：java

我编写了一个简单的程序，它接收多个输入并进行未来投资计算。

但是，由于某种原因，当我输入以下值时：投资 = 1 利息 = 5 年 = 1

我知道`Your future value is 65.34496113081846`什么时候应该是 1.05。

```
import java.util.*;

public class futurevalue
{
  public static void main(String[] args) 
  {

    Scanner sc = new Scanner(System.in);

    System.out.println("This program will calculate your future investment value"); 

    System.out.println("Enter investment amount: ");
    double investment = sc.nextDouble();

    System.out.println("Enter annual interest amount: ");
    double interest = sc.nextDouble();

    System.out.println("Enter number of years: ");
    int year = sc.nextInt();

    double futureValue = investment * (Math.pow(1 + interest, year*12));

    System.out.println("Your future value is " + futureValue);

  }
} 
```

发现我的错误。我分了两次兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:22:11.500

您应该将您的利息除以 100。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:23:51.157

利率是如何输入的？在 Math.pow 中添加 1 之前，您不应该将其除以 100 吗？

示例：每月利息 = 1%，如果您输入 1，您的 Math.pow 将是 Math.pow(1+1, year*12)，这是不正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:33:01.287

是的，您的主要错误不是除以 100 来从百分比转换为比例，但是您还有另一个错误：

如果您的年利率为 5%，则计算复利每月利息所需的公式不是`5%/12`，而是

```
(0.05+1)^(1/12)-1 
```

然后该投资的回报最终是：

```
1 * ( (0.05+1)^(1/12)-1 +1 )^(1 * 12) =
1 * ( (0.05+1)^(1/12) )^(12) =
1 * ( 0.05+1 ) = 1.05 
```

确切地。

# javascript - 使用 jQuery Ajax 进行导航

> ID：10304575
> 
> 赞同：-1
> 
> 时间：2012-04-24T19:18:31.643
> 
> 标签：javascript, asp.net, jquery, navigation

我`<ul>` `<li>`在 ASP.NET 页面中有一个基本结构。现在我正在获取动态记录`<li>`，我的问题是，当用户单击下一步按钮时，它应该检查最后一页，并相应地显示一条警报消息，如果已到达最后一页。

我在 jQuery 中获取了 totalPages，当我放置警报时，我收到了消息`TotalPage`，但是当我在一个条件下编写相同的代码时`if`，它不会评估。下面是我的 JavaScript 函数。

```
var totalPages = -1;
function MostPopularSlideShows(currentPage, pager, mostpopular_data) {
    $.ajax({
        type: "POST",
        url: "SlideShowAdmin/Ajax/SlideShow.aspx/MostPopularSlideList",
        dataType: "json",
        contentType: "application/json",
        data: "{\"CurrentPage\":'" + currentPage + "'}",
        success: function (data) {
            var result = data.d;
            var totalPages = result[0].TotalPages;
            //alert(totalPages); This works fine.
            if (currentPage > totalPages) //Here it never evaluates
            {
                alert("You have reached last page");
                currentPage -= 1;
            }
            else {
                $("#" + pager).html(currentPage + "/" + result[0].TotalPages);
                $("#" + mostpopular_data).html("");
                $.each(result, function (index, item) {
                    $("#" + mostpopular_data).append("<li><img src=\"images/most_popr_pic1.jpg\" width=\"153\" height=\"90\" alt=\"\" class=\"floatleft\" /><h6>" + item.SlideShowName + "</h6><h3><a href=\"#\">" + item.Title + "</a></h3><h4>" + item.Description + "</h4></li>");
                })
            }
        },
        error: function (data) {
            alert("Cannot Get Most Popular SlideShow, Server Threw below error:\n" + data.responseText);
        }
    });
} 
```

下面是我的 Ajax 函数。

```
[WebMethod]
public static SlideList[] MostPopularSlideList(int CurrentPage)
{
    List<SlideList> list = new List<SlideList>();
    DataSet d = SqlHelper.ExecuteAdapterForDataSet("user_MostPopularSlideShow", new SqlParameter[] { new SqlParameter("@PortalID", PortalId), new SqlParameter("@CurrentPage", CurrentPage) }, CommandType.StoredProcedure);
    foreach (DataRow r in d.Tables[0].Rows)
    {
        SlideList _slide = new SlideList();
        _slide.Id = Convert.ToInt32(r["Id"]);
        _slide.SlideShowId = Convert.ToInt32(r["SlideShowId"]);
        _slide.Description = r["SlideDescription"].ToString();
        _slide.CreatedDate = (r["CreatedDate"]).ToString();
        _slide.Thumbnail = r["Thumbnail"].ToString();
        _slide.Total = Convert.ToInt32(d.Tables[1].Rows[0]["TotalRows"]);
        _slide.TotalPages = Convert.ToInt32(d.Tables[1].Rows[0]["TotalPages"]);
        _slide.Title = r["SlideTitle"].ToString();
        _slide.SlideShowName = r["SlideShowName"].ToString();
        list.Add(_slide);
    }
    return list.ToArray();
} 
```

为什么不评估 totalPages？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:24:42.933

实际上，我认为下面的代码块永远不会执行。

```
if (currentPage > totalPages) //Here it never evaluates
{
    alert("You have reached last page"); 
    currentPage -= 1;
} 
```

由于`current page`can 最多`totalPages`，因此可以进行相等性检查，例如：

```
if (currentPage == totalPages) //Here it never evaluates
{
    alert("You have reached last page"); 
    currentPage -= 1;
} 
```

# asp.net - NLB 是在部署新代码时保持网站可用的好方法吗？

> ID：10304576
> 
> 赞同：0
> 
> 时间：2012-04-24T19:18:34.980
> 
> 标签：asp.net, iis, nlb

我希望能够在不丢失客户端会话状态或导致任何停机的情况下部署我的 asp.net/mvc 网站的新版本。我正在考虑实现这一点的方法是创建一个 Windows 网络负载平衡服务器，以便客户端可以通过单个 url（例如[https://mysite.org/](https://mysite.org/) ）访问它。然后它将流量重定向到其他两个站点之一（A.mysite.org 或 B.mysite.org）。我将 NLB 的关联设置为 Single，并禁用站点 B，以便将所有会话定向到站点 A。当我需要部署网站的新版本时，我将部署到站点 B，启用站点 B，然后禁用站点 A。因此，站点 A 上的每个人都可以留在那里（使用版本 1）直到他们注销。所有新会话都将连接到站点 B 并运行版本 2。下次部署时，我将执行相反的操作。

我从来没有用过NLB。这合适吗？有没有更简单、更简单的方法？

NLB 如何知道来自客户端 X 的请求何时已经在 A 或 B 上进行了会话？IE。当他们注销网站并尝试再次登录时，nlb 会将他们发送到他们之前访问的同一站点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:34:28.903

这里有很多考虑

首先，与其在 NLB 上处理关联，不如将 ASP.NET 会话存储在[StateServer 或基于 SQL](http://msdn.microsoft.com/en-us/library/ms178586.aspx)的会话管理中，以允许 Web 客户端（或 Web 服务客户端）在没有“粘性”关联的情况下访问您的站点。一旦设置了 StateServer 或创建了 SQL Session DB，就应该对应用程序的 Web 配置进行简单的更改。

NLB 本身非常适合在您升级网站时保持网站正常运行。您通常会在重新安装应用程序之前停止集群中的服务器，对其进行测试，然后将其带回 NLB 集群，然后再对下一个服务器重复该过程等。

AFAIK，[NLB Single Affinity](http://technet.microsoft.com/en-us/library/bb687542.aspx)在 TCP/IP 级别工作，不询问 ASP.NET 会话。基本上，从同一客户端 IP 到同一服务器 IP：端口组合的任何连接都将定向到同一服务器。同样 AFAIK，两台服务器都将共享 NLB IP（除了它们拥有的任何现有 IP）。由于您的站点似乎使用 SSL，除非您具有亲和力，否则似乎需要在每个请求上[重新协商](http://technet.microsoft.com/en-us/edge/ff711653)SSL 会话密钥，这可能会对性能产生影响。

# assembly - 在 PIC16F684 上为 LED 时钟添加“延迟”部分？

> ID：10304592
> 
> 赞同：0
> 
> 时间：2012-04-24T19:20:08.787
> 
> 标签：assembly, pic

好的，所以我写了一个 .asm 来操作 3 个 LED，但我很久以前就做过了，对命令/结构非常生疏。我什至无法弄清楚这个脚本到底是做什么的！

据我所知，它以 0-7 的二进制计数（3 个 LED = 0-7？）。

我的问题是：如何在 LED 开启之间添加约 1 秒的延迟，以使其充当基本的视觉二进制时钟？

非常感谢。

```
; WRITTEN BY            JL
; DATE                  28/03/05
; FILE SAVED AS         SAMPLE6.ASM
; DEVICE                PIC16F684
; OSCILLATOR            XT (4MHZ)
; WATCHDOG              DISABLED
; FUNCTION              LEDs are switched ON in a binary sequence 
    list      p=16f684            ; list directive to define processor
    #include <p16f684.inc>        ; processor specific variable definitions
__CONFIG  _CP_OFF & _WDT_OFF &_PWRTE_ON & _INTRC_OSC_NOCLKOUT & _MCLRE_OFF & _CPD_OFF

;*******************************Equates****************************************
PORTA EQU 05h
COUNT1 EQU 20h; Set up two counters to count down a delay
COUNT2 EQU 21h

;*******************************Defines****************************************
; define input/output designation for LEDs (what TRISA will equal)

#define TRIS_D0_D1  B'00001111' ; TRISIO setting for D0 and D1
#define TRIS_D2_D3  B'00101011' ; TRISIO setting for D2 and D3
#define TRIS_D4_D5  B'00011011' ; TRISIO setting for D4 and D5

; define LED state (what PORTA will equal)

#define D0_ON   B'00010000'     ; D0 LED
#define D1_ON   B'00100000'     ; D1 LED
#define D2_ON   B'00010000'     ; D2 LED

;****************************** Start of Program ******************************

           org     0x000               ; processor reset vector

;************* Initialize PortA **********
           movlw    B'00111111'     ; Set all I/O pins of PORTA as inputs
           TRIS    PORTA                
           clrf    PORTA               ; clear all outputs

;************** LED0 ON *********************
START        movlw  TRIS_D0_D1      ; move predefined value to TRISA to switch ON LED0
           TRIS    PORTA
             movlw  D0_ON              ; move predefined value to PORTA TO switch ON LED0
           movwf    PORTA
           decfsz   COUNT1,1       ;Subtract 1 from 00h (this gives 255 or FFh)
          goto     START          ;If COUNT is zero, carry on.
          decfsz   COUNT2,1       ;Subtract 1 from 00h
          goto     START          ;Go back to the start of our loop
;************** LED1 ON *********************
LOOP2       movlw   D1_ON              ; move predefined value to PORTA TO switch ON LED1
           movwf    PORTA
             decfsz   COUNT1,1       ;Subtract 1 from 00h (this gives 255 or FFh)
          goto     LOOP2          ;If COUNT is zero, carry on.
          decfsz   COUNT2,1       ;Subtract 1 from 00h
          goto     LOOP2          ;Go back to the start of our loop
;************** LED0 and LED1 ON **************
LOOP3    movlw  D0_ON              ; move predefined value to PORTA TO switch ON LED0
           movwf    PORTA
             movlw  D1_ON              ; move predefined value to PORTA TO switch ON LED1
           movwf    PORTA
          decfsz  COUNT1,1        ;Subtract 1 from 00h (this gives 255 or FFh)
          goto    LOOP3           ;If COUNT is zero, carry on.
          decfsz  COUNT2,1        ;Subtract 1 from 00h
          goto    LOOP3           ;Go back to the start of our loop
;************** LED2 ON *********************   
LOOP4        movlw  TRIS_D2_D3      ; move predefined value to TRISA to switch ON LED2
           TRIS    PORTA
             movlw  D2_ON              ; move predefined value to PORTA TO switch ON LED2
           movwf    PORTA
          decfsz   COUNT1,1       ;Subtract 1 from 00h (this gives 255 or FFh)
          goto     LOOP4          ;If COUNT is zero, carry on.
          decfsz   COUNT2,1       ;Subtract 1 from 00h
          goto     LOOP4          ;Go back to the start of our loop
;************** LED0 and LED2 ON **************
LOOP5        movlw  TRIS_D0_D1       ; move predefined value to TRISA to switch ON LED0
           TRIS    PORTA
             movlw  D0_ON               ; move predefined value to PORTA TO switch ON LED0
           movwf    PORTA
             movlw  TRIS_D2_D3       ; move predefined value to TRISA to switch ON LED2
           TRIS    PORTA
             movlw  D2_ON               ; move predefined value to PORTA TO switch ON LED2
           movwf    PORTA
            decfsz  COUNT1,1        ;Subtract 1 from 00h (this gives 255 or FFh)
          goto    LOOP5           ;If COUNT is zero, carry on.
          decfsz  COUNT2,1        ;Subtract 1 from 00h
          goto    LOOP5           ;Go back to the start of our loop
;************** LED1 and LED2 ON **************
LOOP6        clrf      PORTA               ; clear all outputs
             movlw  TRIS_D0_D1       ; move predefined value to TRISA to switch ON LED1
           TRIS    PORTA
             movlw  D1_ON               ; move predefined value to PORTA TO switch ON LED1
           movwf    PORTA
             movlw  TRIS_D2_D3       ; move predefined value to TRISA to switch ON LED2
           TRIS    PORTA
             movlw  D2_ON               ; move predefined value to PORTA TO switch ON LED2
           movwf    PORTA
            decfsz  COUNT1,1        ;Subtract 1 from 00h (this gives 255 or FFh)
          goto    LOOP6           ;If COUNT is zero, carry on.
          decfsz  COUNT2,1        ;Subtract 1 from 00h
          goto    LOOP6           ;Go back to the start of our loop
;************** LED0,LED1 and LED2 ON **************
LOOP7        movlw  TRIS_D0_D1       ; move predefined value to TRISA to switch ON LED0 and LED1
           TRIS    PORTA
             movlw  D0_ON               ; move predefined value to PORTA TO switch ON LED0
           movwf    PORTA
             movlw  D1_ON               ; move predefined value to PORTA TO switch ON LED1
           movwf    PORTA
             movlw  TRIS_D2_D3       ; move predefined value to TRISA to switch ON LED2
           TRIS    PORTA
             movlw  D2_ON               ; move predefined value to PORTA TO switch ON LED2
           movwf    PORTA
            decfsz  COUNT1,1        ;Subtract 1 from 00h (this gives 255 or FFh)
          goto    LOOP7           ;If COUNT is zero, carry on.
          decfsz  COUNT2,1        ;Subtract 1 from 00h
          goto    LOOP7           ;Go back to the start of our loop

;**********End of program *****************

          goto    START           ; indefinite loop
           END                        ; End instruction is needed by some compilers and also useful in case we miss goto instruction

;********************************************************************************* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T22:11:04.237

是的，3 个 LED 将从 0 计数到 7。您需要做两件事之一。那种图片上的指令时序是相当确定的（假设没有中断），所以如果你有一些嵌套循环会消耗一秒钟的执行时间，那么它就可以做到。另一种选择是使用硬件定时器，定时器将以系统（芯片/微控制器）时钟的某个速率滴答作响。了解时钟的速率以及您启用/设置了多少除数，您可以确定需要等待多少时钟滴答。例如，一个 4mhz 时钟是每秒 400 万个滴答声。如果你有一个 8 分频，你需要计算 500,000 个时钟滴答。例如，如果您只有一个 16 位计时器，它会以 65536 计数翻转，因此您需要等待 7.629 翻转。或使用不同的除数等。我将不得不重新阅读该部分的数据表以了解您的选择。您可能希望将计时器计数为 50,000，然后观看它翻转 10 次。最简单的方法是让计时器从最大计数翻转到最小计数或从最小计数翻转到最大计数。例如，如果它是一个 16 位计数器并且它向上计数，让它自由运行并自动加载，以便它上升到 0xFFFF，那么下一个计数是 0x0000。如果它倒计时，则从 0x0000 到 0xFFFF。根据方向，如果它是一个 16 位计数器，例如，您可以对定时器进行采样，将其称为 A，再采样 B，继续采样直到 B - A（对于向上计数定时器）>= 10,000（有些数字比计时器的能力小很多。即使在翻转过程中，BA delta 也会起作用。当你达到 10,000 滴答时，然后 A = A + 10,000。再做一次。重复此操作，直到获得所需的刻度数。对于这个简单的例子，假设 4mhz 除以 8 时钟，500,000 计数重复 10,000 计数舞蹈 50 次，这将是一秒。

不是在图片上，而是在其他微控制器上，我有很多不同的示例[http://github.com/dwelch67](http://github.com/dwelch67)（在每个 repo 中查找闪烁器示例）。

# android - 内容提供程序错误：绑定或列索引超出范围：句柄 0x234590

> ID：10304593
> 
> 赞同：2
> 
> 时间：2012-04-24T19:20:21.120
> 
> 标签：android, android-contentprovider

我已经实现了一个内容提供程序，它导致以下错误

> 04-25 00:25:16.856：E/AndroidRuntime(520)：原因：android.database.sqlite.SQLiteException：绑定或列索引超出范围：句柄 0x234590

Content Provider 中的查询是

```
Cursor cursor = qb.query(db, projection, selection, selectionArgs, null, null,
            sortOrder); 
```

并调用 Content Provider 是

```
cursor = cr.query(uri, new String[] { ContactTableMetaData.ABC,
            ContactTableMetaData.MNP }, ContactTableMetaData.XYZ + "=?",
            new String[] { "phonenumber1", "phonenumber2", "phonenumber3",
                    "phonenumber4", "phonenumber5", "email1", "email2", "email3",
                    "email4", "email5" }, null); 
```

完整的 logcat 是

```
04-25 00:25:16.856: E/AndroidRuntime(520): FATAL EXCEPTION: main
04-25 00:25:16.856: E/AndroidRuntime(520): java.lang.RuntimeException: Unable to start activity     04-25 00:25:16.856: E/AndroidRuntime(520):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-25 00:25:16.856: E/AndroidRuntime(520):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-25 00:25:16.856: E/AndroidRuntime(520):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-25 00:25:16.856: E/AndroidRuntime(520):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-25 00:25:16.856: E/AndroidRuntime(520):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 00:25:16.856: E/AndroidRuntime(520):  at android.os.Looper.loop(Looper.java:123)
04-25 00:25:16.856: E/AndroidRuntime(520):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-25 00:25:16.856: E/AndroidRuntime(520):  at java.lang.reflect.Method.invokeNative(Native Method)
04-25 00:25:16.856: E/AndroidRuntime(520):  at java.lang.reflect.Method.invoke(Method.java:521)
04-25 00:25:16.856: E/AndroidRuntime(520):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-25 00:25:16.856: E/AndroidRuntime(520):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-25 00:25:16.856: E/AndroidRuntime(520):  at dalvik.system.NativeStart.main(Native Method)
04-25 00:25:16.856: E/AndroidRuntime(520): Caused by: android.database.sqlite.SQLiteException: bind or column index out of range: handle 0x234590
04-25 00:25:16.856: E/AndroidRuntime(520):  at android.database.sqlite.SQLiteProgram.native_bind_string(Native Method)
04-25 00:25:16.856: E/AndroidRuntime(520):  at android.database.sqlite.SQLiteProgram.bindString(SQLiteProgram.java:241)
04-25 00:25:16.856: E/AndroidRuntime(520):  at android.database.sqlite.SQLiteQuery.bindString(SQLiteQuery.java:182)
04-25 00:25:16.856: E/AndroidRuntime(520):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:48)
04-25 00:25:16.856: E/AndroidRuntime(520):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1345)
04-25 00:25:16.856: E/AndroidRuntime(520):  at android.database.sqlite.SQLiteQueryBuilder.query(SQLiteQueryBuilder.java:330)
04-25 00:25:16.856: E/AndroidRuntime(520):  at android.database.sqlite.SQLiteQueryBuilder.query(SQLiteQueryBuilder.java:280)
04-25 00:25:16.856: E/AndroidRuntime(520):  at com.wissenways.helper.VoiceAppContactContentProvider.query(VoiceAppContactContentProvider.java:171)
04-25 00:25:16.856: E/AndroidRuntime(520):  at android.content.ContentProvider$Transport.query(ContentProvider.java:163)
04-25 00:25:16.856: E/AndroidRuntime(520):  at android.content.ContentResolver.query(ContentResolver.java:245)
04-25 00:25:16.856: E/AndroidRuntime(520):  at com.wissenways.checkcontacts.DisplayGreatPeople.onCreate(DisplayGreatPeople.java:45)
04-25 00:25:16.856: E/AndroidRuntime(520):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-25 00:25:16.856: E/AndroidRuntime(520):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-25 00:25:16.856: E/AndroidRuntime(520):  ... 11 more 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T19:38:33.693

```
String selection = ContactTableMetaData.XYZ + "=?";
String[] selectionArgs = new String[] { "phonenumber1", "phonenumber2", "phonenumber3",
                    "phonenumber4", "phonenumber5", "email1", "email2", "email3",
                    "email4", "email5" } 
```

的数量`?`必须与 的数量相匹配`selectionArgs`。如果您提供 10 个项目，则`selection`必须有 10 个`?`。

中的第 N项被`?`中`selection`的第 N 项替换`selectionArgs`。

编辑：如果你想检查 ContactTableMetaData.XYZ 是否是其中任何一个，那么要么

```
String selection = ContactTableMetaData.XYZ + "=? OR " + ContactTableMetaData.XYZ + "=? OR " + ... 
```

或者

```
String selection = ContactTableMetaData.XYZ + " IN (?, ?, ?, ?, ..)" 
```

我更喜欢第二个:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-03T11:17:22.240

```
public static String getWhereStr(String columnName, int selectionArgsSize) {
    String delim = ",";
    final StringBuilder buf = new StringBuilder();
    buf.append(columnName + " IN (");
    for (int i = 0; i < selectionArgsSize; i++) {
        if (i != 0) {
            buf.append(delim);
        }
        buf.append("?");
    }
    buf.append(")");
    return buf.toString(); 
} 
```

# bash - 管道回声时抑制输出到 StdOut

> ID：10304594
> 
> 赞同：2
> 
> 时间：2012-04-24T19:20:21.553
> 
> 标签：bash, unix, echo, pipe

我正在制作一个 bash 脚本，它通过一个目录爬行并将某种类型的所有文件输出到一个文本文件中。我已经开始工作了，它只是将一堆输出写到我不想要的控制台（文件的名称）

这是到目前为止的相关代码，tmpFile 是我要写入的文件：

```
for DIR in `find . -type d` # Find problem directories
do
        for FILE in `ls "$DIR"` # Loop through problems in directory
        do
                if [[ `echo ${FILE} | grep -e prob[0-9]*_` ]]; then
                        `echo ${FILE} >> ${tmpFile}`
                fi
        done
done 
```

我放入文本文件的文件采用正则表达式 prob[0-9]*_ 描述的格式（类似于 prob12345_01）

在我将 echo ${FILE} 的输出通过管道传输到 grep 的地方，它仍然输出到 stdout，这是我想避免的。我认为这是一个简单的修复，但它正在逃避我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:32:18.230

All this can be done in one single find command. Consider this:

```
find . -type f -name "prob[0-9]*_*" -exec echo {} >> ${tmpFile} \; 
```

### EDIT:

Even simpler: (Thanks to **@GlennJackman**)

```
find . -type f -name "prob[0-9]*_*" >> $tmpFile 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T19:42:32.703

要回答您的具体问题，您可以传递`-q`给 grep 以进行静默输出。

```
if echo "hello" | grep -q el; then
  echo "found"
fi 
```

但是由于您已经在使用 find，因此只需一个命令即可完成：

```
find . -regex ".*prob[0-9]*_.*" -printf '%f\n' >> ${tmpFile} 
```

`find`的正则表达式是整个路径上的匹配，这就是`.*`需要前导和尾随的原因。

打印没有目录的`-printf '%f\n'`文件名，以匹配您的脚本正在执行的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T19:31:28.430

您想要做的是命令`read`的输出， 对于返回的每个条目，您想要获取该位置下的所有 () 文件， 然后您想要检查该文件名是否与您想要的模式匹配， 如果它匹配然后添加它到 tmpfile`find`
`find``*`

```
while read -r dir; do
    for file in "$dir"/*; do  # will not match hidden files, unless dotglob is set
        if [[ "$file" =~ prob[0-9]*_ ]]; then
            echo "$file" >> "$tmpfile"
        fi
done < <(find . -type d) 
```

然而`find`，一个人可以做到这一点，
阿努巴瓦把我带到了那里；）
所以看看他的回答是如何做到的

# java - ViewPager 下方的 TitlePageIndicator

> ID：10304600
> 
> 赞同：0
> 
> 时间：2012-04-24T19:21:29.983
> 
> 标签：java, android

我搜索了很多，但找不到这个问题的答案：有没有办法在 ViewPager 下方使用 TitlePageIndicator？

我在 .xml 中尝试了相反的顺序，但得到了：

```
04-24 19:30:30.288: E/AndroidRuntime(3338): FATAL EXCEPTION: main
04-24 19:30:30.288: E/AndroidRuntime(3338): java.lang.RuntimeException: Unable to start activity ComponentInfo{br.com.totvs.android/br.com.totvs.android.ecm.activity.TelaPrincipalActivity}: android.view.InflateException: Binary XML file line #9: Error inflating class fragment
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.os.Looper.loop(Looper.java:130)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.app.ActivityThread.main(ActivityThread.java:3683)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at java.lang.reflect.Method.invokeNative(Native Method)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at java.lang.reflect.Method.invoke(Method.java:507)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at dalvik.system.NativeStart.main(Native Method)
04-24 19:30:30.288: E/AndroidRuntime(3338): Caused by: android.view.InflateException: Binary XML file line #9: Error inflating class fragment
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:587)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at br.com.totvs.android.ecm.activity.TelaPrincipalActivity.onCreate(TelaPrincipalActivity.java:56)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-24 19:30:30.288: E/AndroidRuntime(3338):     ... 11 more
04-24 19:30:30.288: E/AndroidRuntime(3338): Caused by: java.lang.ClassCastException: com.viewpagerindicator.TitlePageIndicator
04-24 19:30:30.288: E/AndroidRuntime(3338):     at br.com.totvs.android.ecm.fragment.TabFragment.onCreateView(TabFragment.java:36)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:845)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1058)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1156)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:270)
04-24 19:30:30.288: E/AndroidRuntime(3338):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
04-24 19:30:30.288: E/AndroidRuntime(3338):     ... 18 more 
```

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:27:53.463

这可能取决于您使用的 TitlePageIndicator 类型。但是我听说过的所有版本（包括可能是 Jake Wharton 中最受欢迎的版本）都只是视图，您可以将其放在任何您想要的地方。

所以你可以膨胀这样的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="match_parent"
            android:layout_height="0px"
            android:layout_weight="1">
    </android.support.v4.view.ViewPager>

<com.viewpagerindicator.TitlePageIndicator
    android:id="@+id/titles"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent" />

</LinearLayout> 
```

还有来自 Commonsware 的一个非常重要的说明。项目->清洁

# php - proc_open：扩展文件描述符编号以启用来自 Perl 脚本的“状态”反馈

> ID：10304602
> 
> 赞同：7
> 
> 时间：2012-04-24T19:21:37.830
> 
> 标签：php, perl, proc-open

PHP 的[proc_open](http://php.net/manual/en/function.proc-open.php)手册指出：

> 文件描述符编号不限于 0、1 和 2 - 您可以指定任何有效的文件描述符编号，并将其传递给子进程。这允许您的脚本与作为“协同进程”运行的其他脚本进行互操作。特别是，这对于以更安全的方式将密码短语传递给 PGP、GPG 和 openssl 等程序很有用。它对于读取那些程序在辅助文件描述符上提供的状态信息也很有用。

**发生了什么：** 我在基于 PHP 的 Web 应用程序中调用 Perl 脚本并在调用中传递参数。我以后不需要向脚本发送数据。通过标准输出 [1]，我从我在 PHP 应用程序中使用的 Perl 脚本 json_encoded 数据中接收到这些数据。

**我想补充** 的是：Perl 脚本正在通过网站收集信息，具体取决于在其初始调用中传递的参数。我想向 PHP 应用程序发送回一个文本字符串，我可以用它来显示为一种进度条。

**我认为我应该怎么做：**我希望（每 1-2 秒）轮询为该“进度”更新设置的频道。我会使用 Javascript / jQuery 写入一个 html div 容器供用户查看。我认为我不应该将“进度”通道与更关键的“json_encode（数据）”通道混合，因为我需要破译标准输出流。（这个想法合乎逻辑、实用吗？）

**我的主要问题：** 您如何*使用*其他“文件描述符”？我会将附加通道的*设置*想象为简单明了，例如下面的 3 => ...：

```
$tunnels = array(   
   0 => array('pipe', 'r'),     
   1 => array('pipe', 'w'),    
   2 => array('pipe', 'w'),    
   3 => array('pipe', 'w')        
);

$io = array();
$resource = proc_open("perl file/tomy/perl/code.pl $param1 $param2 $param3", $tunnels, $io);

if(!is_resource($resource)) {
    $error = "No Resource";
}

fclose($io[0]);

$perlOutput = stream_get_contents($io[1]);
$output = json_decode($perlOutput);

$errors = stream_get_contents($io[2]);
print "$errors<p>";

fclose($io[1]);
fclose($io[2]);

$result = proc_close($resource);

if($result != 0) {
    echo "you returned a $result result on proc_close";
} 
```

但是，在 Perl 脚本中，我只是像这样写到标准输出：

```
my $json_terms = encode_json(\@terms);
print $json_terms; 
```

如果我对设置附加通道的理解是正确的（上面是 3 => ...），那么我将如何在 Perl 脚本中写入它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:16:58.240

您打开一个新的文件句柄并将其复制到文件描述符 3：

```
open STD3, '>&3';
print STDERR "foo\n";
print STD3   "bar\n";

$ perl script.pl 2> file2 3> file3
$ cat file2
foo
$ cat file3
bar 
```

**编辑：**根据 Greg Bacon 的评论，`open STD3, '>&=', 3`或`open STD3, '>&=3'`直接打开文件描述符，如 C 的`fdopen`调用，避免`dup`调用并为您保存文件描述符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T20:51:11.633

假设您要监视一个 hello-world 程序的进度，其中每个步骤都是写入指定文件描述符的一个点。

```
#! /usr/bin/env perl

use warnings;
use strict;

die "Usage: $0 progress-fd\n" unless @ARGV == 1;

my $fd = shift;
open my $progress, ">&=", $fd or die "$0: dup $fd: $!";

# disable buffering on both handles
for ($progress, *STDOUT) {
  select $_;
  $| = 1;
}

my $output = "Hello, world!\n";

while ($output =~ s/^(.)(.*)\z/$2/s) {
  my $next = $1;
  print $next;
  print $progress ".";
  sleep 1;
} 
```

使用 bash 语法打开 fd 3`/tmp/progress`并将其连接到程序是

```
$ (exec 3>/tmp/progress; ./hello-world 3)
你好世界！

$猫/tmp/进度
.....................
```

（看直播更有趣。）

要在终端上看到它们出现时的点，您可以打开进度描述符并将其有效地[`dup2`](http://linux.die.net/man/2/dup2)显示到标准错误上——再次使用 bash 语法，实时更有趣。

```
$ (exec 17>/dev/null; exec 17>&2; ./hello-world 17)
你好，。。世界！。
.
```

你当然可以跳过额外的步骤

```
$ (exec 17>&2; ./hello-world 17)
```

以获得相同的效果。

如果您的 Perl 程序因错误而死掉，例如

```
$ ./你好世界 333
./hello-world: dup 333: ./hello-world 第 9 行的文件描述符错误。
```

那么 PHP 端管道的写入端可能设置了 close-on-exec 标志。

# css - Twitter 2.0 引导导航栏中心

> ID：10304608
> 
> 赞同：1
> 
> 时间：2012-04-24T19:21:56.580
> 
> 标签：css, twitter-bootstrap

我想以类似于 twitter.com 或 facebook 的方式将导航栏居中。现在看起来导航栏卡在左对齐上。

有人有这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T17:23:09.150

打破评论，使用`.container-fluid`容器会产生导航栏被拉伸的不良效果，这可以通过将其替换为`.container`固定容器来避免。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:42:39.960

您是否参考了 Twitter Bootstrap 提供的示例以确保正确构建 HTML？如果实施得当，导航栏应该延伸整个窗口的长度。

[http://twitter.github.com/bootstrap/getting-started.html#examples](http://twitter.github.com/bootstrap/getting-started.html#examples)

# asp.net-mvc-3 - 在 runAllManagedModulesForAllRequests 设置为 false 的情况下运行 MiniProfiler

> ID：10304611
> 
> 赞同：47
> 
> 时间：2012-04-24T19:22:06.283
> 
> 标签：asp.net-mvc-3, web-config, mvc-mini-profiler

最近我们从 v1.7 升级到 MiniProfiler 版本 2.0.1，从那时起我们就无法在我们的 MVC3 网站中使用它，因为当它尝试获取其资源时，它会得到 404。

> **一个示例资源调用是：** /mini-profiler-resources/includes.js?v=tNlJPuyuHLy /d5LQjyDuRbWKa0weCpmO3xkO6MH4TtA=

在搜索中，大多数人都建议将简单设置`runAllManagedModulesForAllRequests`设置为`true`。对于咯咯笑，我继续将其设置为 true，是的，它确实有效。**但这不是一个可以接受的答案。**

如何保留`runAllManagedModulesForAllRequests=false`并继续使用 MiniProfiler v2？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-04-28T12:32:45.860

我遇到了同样的问题 - 请求的资源使用“静​​态”文件扩展名（例如`.js`），因此 IIS 希望使用其静态文件处理程序来处理它们。

幸运的是，所有 MiniProfiler 资源都是通过 path 请求的`mini-profiler-resources`，因此您可以将以下内容添加到您的`web.config`:

```
<system.webServer>
  ...
  <handlers>
    <add name="MiniProfiler" path="mini-profiler-resources/*" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
  </handlers>
</system.webServer> 
```

`mini-profiler-resources`上面的条目指示 IIS对要通过 ASP.NET 路由的路径的任何请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T12:16:11.820

正如大卫杜菲特在接受答案的评论中所说，您可能还需要将以下条目添加到您的网络配置中。这对我有用：

```
<system.web>
    <httpHandlers>
      <add verb="*" type="System.Web.Routing.UrlRoutingModule" path="mini-profiler-resources/*"/>
    </httpHandlers>
</system.web> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-16T15:03:32.903

我有一个类似的问题，我解决它的方法是将应用程序池更改为“集成”，然后我将下面的这一新行添加到我的 web.config 中，然后它就可以工作了。

下面是 mini-profiler 的完整 web.config 现在的样子。

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="false" />
    <validation validateIntegratedModeConfiguration="false"/> <!-- Here is the new line -->
    <handlers>
      <add name="MiniProfiler" verb="*" type="System.Web.Routing.UrlRoutingModule" path="mini-profiler-resources/*"/>
    </handlers>
  </system.webServer> 
```

# c++ - 友化 cin 和重载运算符 >>

> ID：10304612
> 
> 赞同：3
> 
> 时间：2012-04-24T19:22:10.790
> 
> 标签：c++

好的，你好。我正在尝试比较两个坐标类型（x、y、z）的对象，并且我的代码编译没有错误，但输出并不完全正确。在我看来，我的输入没有被保存，但我不知道为什么。我只包括了相关的定义。

头文件：

```
#ifndef COORDINATE_H  //if not defined
#define COORDINATE_H //Define

#include <iostream>
using namespace std;

    class Coordinate
    {
          friend istream& operator>>(istream &, Coordinate &);
          friend ostream& operator<<(ostream &, const Coordinate &);
    public:
            Coordinate(double = 0.0, double = 0.0, double = 0.0); //my default constructor
            Coordinate operator+(const Coordinate &);
            Coordinate operator-(const Coordinate &);
            Coordinate operator*(const Coordinate &);
            Coordinate& operator=(const Coordinate &);
            bool operator==(const Coordinate &);
            bool operator!=(const Coordinate &);
            void setCoordinate(double a, double b, double c);
    private:
            double x;
            double y;
            double z;
    };

    #endif //end definition. 
```

定义：

```
 #include <iomanip>
    #include "Coordinate.h" //including the Coordinate header file
    using namespace std;

    bool Coordinate::operator==(const Coordinate & d)
    {
        return (this->x == d.x && this->y == d.y && this->z == d.z);
    }

    bool Coordinate::operator!=(const Coordinate & d)
    {
        return !(this->x == d.x && this->y == d.y && this->z == d.z);
    }

    Coordinate& Coordinate::operator=(const Coordinate & d)
    {
        if(this != &d)
        {
            x = d.x;
            y = d.y;
            z = d.z;
        }
        return *this;
    }

    ostream &operator<<(ostream & out, const Coordinate & d)
    {
        out << "(" <<d.x << "," << d.y << "," << d.z << ")" << endl;

        return out;
    }

    istream &operator>>(istream & in, Coordinate & g)
            {
        in >> g.x >> g.y >> g.z;
        return in;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T00:33:20.957

如果您希望以与您编写的相同格式阅读，则需要明确说明。

您*可以*使用标准 C++ 流来实现：

```
istream& operator>>(istream& in, Coordinate& g) {
    char c;
    in >> c;        if (c != '(') { ... }
    in >> g.x >> c; if (c != ',') { ... }
    in >> g.y >> c; if (c != ',') { ... }
    in >> g.z >> c; if (c != ')') { ... }
    return in;
} 
```

不幸的是，这种解决方案不能正确回溯或任何无效输入。当然，您可以设置失败位并继续。要自动检查文字，您可以添加重载 for`istream&`并使用`std::ws`来显式丢弃空格：

```
istream& operator>>(istream& in, char c) {
    in >> ws;
    if (in.peek() == c)
        in.ignore();
    else
        in.clear(ios::failbit);
    return in;
}

istream& operator>>(istream& in, Coordinate& g) {
    return in >> '(' >> g.x >> ',' >> g.y >> ',' >> g.z >> ')';
} 
```

如果你需要比这更多的东西，我想它会很快变得笨拙。您基本上最终会逐个字符地手动解析输入。此时，您应该只使用适当的解析库来省去麻烦。

# cakephp - 在 CakePhp 中合并两个控制器/视图的最佳解决方案

> ID：10304615
> 
> 赞同：0
> 
> 时间：2012-04-24T19:22:26.380
> 
> 标签：cakephp

我有两个模型：

```
Book
Category 
```

我有两种看法：

```
books/browse 
```

在这个视图中有分页的书籍列表，带有排序选项、书籍语言选择、​​作者/标题过滤器等。有一件事没有 - 书籍类别树。事实上，该控制器将 category_id 作为参数，并仅显示该类别中的书籍。

```
categories/tree 
```

此视图（控制器）找到类别树，它需要一个参数 -> category_id -> 来确定如何打印树（以显示所有父节点和父列表等）。

现在我需要一个视图（例如浏览树），其中左侧有类别树，右侧有书籍列表（包含所有内容）。

实现这一目标的最佳解决方案是什么？（问题还在于我希望能够使用所有参数（category_id 参数 + 排序 + 一些用于过滤的 GET 参数）保存书籍浏览视图的链接，而且我也不想重写任何视图或控制器方法。 .

- - - - - - - 编辑

好的，我在元素 categorytree 中有我的树，它看起来像这样：

```
$params = $this->requestAction('/categories/tree/'.$category_id); 
print_category($params['tree'][0],$params['parents'],$category_id); 
```

$category_id 作为参数传递给元素。这是在 /books/browse 里面：

```
<?php echo $this->element('categorytree', array("category_id" => $category_id)); ?> 
```

我需要的是，在 categorytree 元素中，我希望每个树节点都是 /books/browse 的有效链接，该链接基于从中加载书籍/浏览的当前 url。我的意思是网址可能是：

```
books/browse/34/sort:asc/page:4?author=Author&something=something 
```

我可以在 /books/browse/... 视图中获取此链接并将其传递给元素，然后对其进行解析以将 /34/ （它的类别 ID）替换为其他类别...但是有没有更简单/更优雅的方式这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:57:47.767

将您的类别树放在一个元素中，并使用[CakePHP 的 requestAction](http://book.cakephp.org/2.0/en/views.html#passing-variables-into-an-element)从 Category 控制器获取它的数据。

您可以将树视图保留在 Books 区域（这是有道理的，因为这是用户正在浏览的内容） - 取决于您将其放入哪个视图。

归根结底，用户正在搜索书籍，因此视图和代码应该位于此处。使用类别树只传递一个变量，用于在查询中针对书籍使用哪个类别。

# ruby-on-rails - 为什么rails找不到我的表关系？

> ID：10304616
> 
> 赞同：0
> 
> 时间：2012-04-24T19:22:31.183
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

```
class Product < ActiveRecord::Base
  has_many :models, :dependent => :destroy, :order => 'display, title'

class Model < ActiveRecord::Base
  belongs_to :product

class GsCollector < ActiveRecord::Base
  belongs_to :model 
```

为什么我不能在 GsCollector 的表单中执行以下操作？：

```
 <p>
    Model:<br />
    <%= collection_select :gs_collector, :model_id, Product.where("title = 'Some Title'").models.all, :id, :title %>
  </p> 
```

我得到错误：

```
undefined method `models' for #<ActiveRecord::Relation:0x007fef0ac09350> 
```

模型方法不应该由关系提供吗？在控制台中，这有效：

```
p = Product.find(4).models 
```

但这不会：

```
p = Product.where("title = 'some title'").models 
```

不知道有什么区别......

这是我的架构：

```
 create_table "gs_collectors", :force => true do |t|
    t.integer  "project_id"
    t.integer  "model_id"
    t.integer  "quantity",   :default => 1
    t.string   "housing",    :default => "Base Unit"
    t.string   "hopper"
    t.string   "controller"
    t.boolean  "overbags",   :default => false
    t.datetime "created_at",                          :null => false
    t.datetime "updated_at",                          :null => false
  end

  create_table "models", :force => true do |t|
    t.string   "title"
    t.integer  "product_id"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.integer  "display"
  end

  create_table "products", :force => true do |t|
    t.string   "title"
    t.datetime "created_at"
    t.datetime "updated_at"
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:46:14.077

您正在返回一个对象数组，统称为 a `ActiveRecord::Relation`。这是由于您的`where`搜索词。也许您想要以下内容：

```
p = Product.find_by_title('some title').models 
```

`where`返回一个列表`Products`

`find`返回一个`Product`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:25:54.417

您需要以两种方式定义 Model 和 GsCollector 之间的关系。您忘记了模型中的部分：

```
class Model < ActiveRecord::Base
  belongs_to :product
  has_many :gs_collectors
end

class GsCollector < ActiveRecord::Base
  belongs_to :model
end 
```

真正的问题是你`.models`只能在一条记录上。`Product.where`返回几个 - 所以使用`Product.find_by_title("title").models`

# sql - 使用多个 SET-WHERE 对进行更新

> ID：10304617
> 
> 赞同：0
> 
> 时间：2012-04-24T19:22:34.600
> 
> 标签：sql

我有一个关于 SQL 语法以及在单个查询中是否可以执行特定操作的问题。考虑以下示例：

假设我们有一个食谱表。每个食谱都有 5 种成分列在成分 1、成分 2 等列下。假设突然确定糖对您不健康，并且每个食谱必须在其存在的每个成分列中将“糖”替换为“人造甜味剂”。我遇到的问题是没有成分表，因此每种成分都列在五列之一的下面，而不是引用成分 ID 之类的东西。

如果可能，我如何编写以下（伪）查询？

```
UPDATE Recipe 
    (SET ingredient1 = 'artificial sweetener' WHERE ingredient1 = 'sugar') OR
    (SET ingredient2 = 'artificial sweetener' WHERE ingredient2 = 'sugar') OR
    (SET ingredient3 = 'artificial sweetener' WHERE ingredient3 = 'sugar') OR
    (SET ingredient4 = 'artificial sweetener' WHERE ingredient4 = 'sugar') OR
    (SET ingredient5 = 'artificial sweetener' WHERE ingredient5 = 'sugar') 
```

我在网上找到了多篇关于根据当前值将列设置为某个值的文章，但不仅仅是设置包含值的（特定）列。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T19:29:05.137

我会用“不是你想听到的”答案来回答你的问题。您错误地设计了数据库。

您应该具有以下结构：

```
Recipe
RecipeID, other recipe information

Ingredient
IngredientID, RecipeID, Ingredient, Measurement... 
```

理想情况下，实际上，您可能会拥有`Ingredient`一个查找表，并拥有`RecipeIngredient`一个包含测量信息的连接表 和`IngredientID`，但上述内容仍然比您拥有的要好得多。

那么您的更新将是：

```
update Ingredient 
    set Ingredient='artificial sweetener' 
    where Ingredient='sugar' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T19:33:11.033

A CASE expression will dictate whether each of the five columns need to be modified. Use a WHERE clause to filter out any rows that don't require modification:

```
UPDATE Recipe
SET ingredient1 = CASE WHEN ( ingredient1 = 'sugar' )  
    THEN 'artificial sweetener' ELSE ingredient1 END ,
SET ingredient2 = CASE WHEN ( ingredient2 = 'sugar' )  
    THEN 'artificial sweetener' ELSE ingredient2 END ,
SET ingredient3 = CASE WHEN ( ingredient3 = 'sugar' )  
    THEN 'artificial sweetener' ELSE ingredient3 END ,
SET ingredient4 = CASE WHEN ( ingredient4 = 'sugar' )  
    THEN 'artificial sweetener' ELSE ingredient4 END ,
SET ingredient5 = CASE WHEN ( ingredient5 = 'sugar' )  
    THEN 'artificial sweetener' ELSE ingredient5 END
WHERE 'sugar' IN 
  ( ingredient1, ingredient2, ingredient3, ingredient4, ingredient5 )
; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T19:35:10.077

考虑重新设计您的数据库，您当前的设计不是很友好。无论如何，您正在寻找的答案是使用 case-when update 子句；

```
UPDATE tablename
SET 
INGREDIENT1 = CASE WHEN INGREDIENT1='SUGAR' THEN 'ARTIFICIAL SWEETENER' ELSE INGREDIENT1    END,
INGREDIENT2 = CASE WHEN INGREDIENT2='SUGAR' THEN 'ARTIFICIAL SWEETENER' ELSE INGREDIENT2 END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T19:25:53.623

您可以执行以下操作：

```
UPDATE Recipe SET 
       ingredient1 = if(ingredient1 = 'sugar', 'artificial sweetener', ingredient1),
       ingredient2 = if(ingredient2 = 'sugar', 'artificial sweetener', ingredient2),
       ..etc.. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T19:42:00.350

以下是一些可移植的：

```
UPDATE Recipe
SET ingredient1 = CASE ingredient1 WHEN 'sugar' THEN 'artificial sweetener' ELSE ingredient1 END,
SET ingredient2 = CASE ingredient2 WHEN 'sugar' THEN 'artificial sweetener' ELSE ingredient2 END,
SET ingredient3 = CASE ingredient3 WHEN 'sugar' THEN 'artificial sweetener' ELSE ingredient3 END,
SET ingredient4 = CASE ingredient4 WHEN 'sugar' THEN 'artificial sweetener' ELSE ingredient4 END,
SET ingredient5 = CASE ingredient5 WHEN 'sugar' THEN 'artificial sweetener' ELSE ingredient5 END
WHERE ingredient1 = 'sugar'
    OR ingredient2 = 'sugar'
    OR ingredient3 = 'sugar'
    OR ingredient4 = 'sugar'
    OR ingredient5 = 'sugar' 
```

请注意，只要配方中有糖，这在技术上会更新所有这些列，而不管当前值如何。这是使用单个`UPDATE`语句和此模式的结果。查询优化器通常考虑整个行和列，而不是单个值。

# git - 创建 VCS 存储库的粒度

> ID：10304618
> 
> 赞同：2
> 
> 时间：2012-04-24T19:22:48.530
> 
> 标签：git, svn, version-control, cvs

您在哪个粒度创建新的 VCS 存储库？

> 例如，我们有一些基本的 API/库（约 30 个项目）、一些开发工具（约 10 个工具，每个工具有约 5 个项目）和多个应用程序（约 20 个应用程序和约 15 个项目）。这些工具和应用程序基于基本库，一些应用程序可能依赖于其他应用程序。

我想创建 3 个存储库

*   一个给图书馆的
*   一个用于开发工具
*   一个用于应用程序

这将是代码的有意义的分离，还是您会推荐另一种粒度？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-23T17:08:47.197

答案取决于您使用的版本控制系统。在 Subversion 的情况下，您可以为所有项目拥有一个单一的整体存储库。例如，[官方 Apache Software Foundation 存储库](https://svn.apache.org/viewvc/)中有许多 ASF 保护下的项目。您还可以遵循每个项目的存储库方法，而不会出现任何问题。

但是，与 git 不同。由于它是分散的，它不能有效地将多个项目存储在一个存储库中。您仅限于按项目存储库的方法。

# python - TypeError: inputNames() 不接受任何参数（给定 2 个）

> ID：10304619
> 
> 赞同：2
> 
> 时间：2012-04-24T19:22:49.953
> 
> 标签：python, arguments

```
#Lab 7-3 The Dice Game
#add libraries needed
import random

#the main function
def main():
    print

    #initiliaze variables
    endProgram = 'no'
    playerOne = 'NO NAME'
    playerTwo = 'NO NAME'

    #call to inputNames
    playerOne, playerTwo = inputNames(playerOne, playerTwo)

    #while loop to run program again
    while endProgram == 'no':
        winnersName = 'NO NAME'
        p1number = 0
        p2number = 0

        #initiliaze variables

        #call to rollDice
        winnerName = rollDice(playerOne, playerTwo, winnerName)

        #call to displayInfo
        winnerName = displayInfo (winnerName)

        endProgram = input('Do you want to end program?(Enter yes or no): ')

#this function gets players names
def inputNames():
    inputNames = string('Enter your names: ')
    return playerOne, playerTwo    

#this function will get the random values
def rollDice():
    p1number = random.randint(1,6)
    p2number = random.randint(1,6)
    if p1number >= p2number:
        winnerName = playerOne
    if p1number == p2numer:
        winnerName = 'TIE'
    elif winnerName == playerTwo:
        return winnerName

#this function displays the winner
def displayInfo():
    print ('The winner is: ', winnerName)

#calls main
main() 
```

初学者程序员在这里并试图完成一项任务。第 19 行返回错误：TypeError: inputNames() 不接受任何参数（给定 2）。第 19 行：playerOne, playerTwo = inputNames(playerOne, playerTwo)。这条线是我的教授提供的，我不知道如何让它工作。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:40:50.253

函数 inputNames 被定义为一个不带参数的函数，但是您在方法列表中传递了两个变量：

这是您定义它的方式：

```
def inputNames():
    inputNames = string('Enter your names: ')
    return playerOne, playerTwo 
```

你是这样称呼它的：

```
playerOne, playerTwo = inputNames(playerOne, playerTwo) 
```

你真正想要的是这个函数返回玩家一和玩家二的名字。所以上面的行应该是：

```
playerOne, playerTwo = inputNames() 
```

并且该函数必须在本地收集这两个名称并返回它们，可能是这样的：

```
def inputNames():
    p1 = str(raw_input("Enter the name for player one: "))
    p2 = str(raw_input("Enter the name for player two: "))
    return p1, p2 
```

# c++ - 可能的组合和循环

> ID：10304622
> 
> 赞同：-1
> 
> 时间：2012-04-24T19:23:06.930
> 
> 标签：c++

我必须对二维数组进行所有可能的组合..例如，如果我有一个 4x3 的数组 ...我使用 4 个循环，全部运行到 3.. 以获得所有组合...

例如，如果我有一个 4x3 数组，如下所示..

```
1 2 3
4 5 6
7 8 9 
10 11 12 
```

我将不得不做出像这样的组合

```
1,4,7,10 
1,4,7,11 
1,4,7,12 
1,4,8,10 
1,4,8,11 
1,4,8,12 
1,4,9,10 
1,4,9,11 
1,4,9,12 

1,5,8,10 
1,5,8,11 
1,5,8,12 
........... 
```

等等....

简而言之，所有这样的组合......在这种情况下，可能组合的最大数量将是 3 次方 4....如果我有一个 nxm 数组，那么最大组合将是 m 次方 n....任何人都可以帮忙创建它....我需要帮助以通用方式解决它...我认为应使用递归函数...因为我不知道循环的编号...它将在运行时知道。 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:32:32.137

```
void buildArray(vector <int> build, vector< vector <int> > &arrays)
{
    int position = build.size();
    if (position == arrays.size()) { /* current build is one of the solutions*/}
    else {        
        for (int i = 0; i < arrays[position].size(); i++) 
        {
            build.push_back(arrays[position][i]);
            buildArray(build, arrays);
            build.pop_back(); 
        }
    }
} 
```

# iphone - 将静态 UITableView 添加到常规自定义视图

> ID：10304625
> 
> 赞同：0
> 
> 时间：2012-04-24T19:23:21.360
> 
> 标签：iphone, ios, uitableview, ios5, storyboard

我有一个自定义视图控制器，它在下半部分有一个视图。

我想在上半部分添加一个静态 UITableView。

所以我在视图控制器上拖了一个 UITableView，但显然这是不允许的，因为静态表视图只能嵌入在 UIViewControllers 中。

我去了我的代码并使我的控​​制器扩展 UITableView 但这并不能解决问题。

如何在我的自定义控制器中添加我的静态 UITableView 作为第二个视图？

编辑：iOS 故事板可能不太支持不占用整个屏幕的表格视图。也许我只会在视图上使用常规表，因为我只需要 3 个静态行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T00:30:18.820

你应该能够做这样简单的事情：

```
UITableViewController *tbv = [[UITableViewController alloc] initWithFrame:[CGRect whateverSize/Location]];
[self.view addSubview:tbv]; 
```

确保在执行此操作时还要编写所需的委托函数，例如`numberOfRowsInSection:`, `numberOfSections:`, `cellForRowAtIndexPath:`,`tableView:didSelectRowAtIndexPath:`

请务必查看[UITableView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T08:39:12.730

我通过使我的第二个视图控制器成为实现委托和数据源的简单 UIViewController、在其上拖动动态表并在代码中“静态”设置行和部分来解决了这个问题。现在我有我的两个视图正确地共存于一个大视图中。

# mpi - 等待其他处理器在 MPI 中完成它们的任务

> ID：10304627
> 
> 赞同：1
> 
> 时间：2012-04-24T19:23:29.533
> 
> 标签：mpi

使用 MPI，您如何等待线程完成？

例如：

```
for (int i = localstart; i < localend; i++)
{
    // do stuff that is computationally intensive
}
// I need to wait for all other threads to finish here
if (rank == 0) do_something(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T19:33:17.040

如果线程是指进程/等级，那么答案是`MPI_Barrier`.

但也要看看其他集体操作：它们可能在您的应用程序中有意义，并且提供比手动编码通信更好的性能。例如，您可以使用`MPI_Allgather`将所有数据传达给所有等级，等等。

如果您的意思是线程（如 pthreads），那么您必须使用线程库提供的任何内容。

# android - 这个 ArrayAdapter 是否适合与 CommonsWare MergeAdapter 一起使用？如果是这样，为什么它不起作用？

> ID：10304630
> 
> 赞同：0
> 
> 时间：2012-04-24T19:23:44.647
> 
> 标签：android, android-arrayadapter, android-adapter, listadapter, commonsware-cwac

我正在尝试使用 CommonsWare 的`MergeAdapter`课程并取得了有限的成功。特别是，我不确定 1）我`ArrayAdapter`是否适合使用，2）我是否正确添加它，以及 3）我是否正在做所有必要的事情来连接所有东西。

这是我的子类`ArrayAdapter`：

```
class PDLAdapter extends ArrayAdapter<PartnerDisease> {

    public PDLAdapter(final Context context) {
        super(context, 0);
    }

    @Override
    public View getView(final int position, View convertView, final ViewGroup parent) {
        ViewHolder viewHolder;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.partnerdisease_list_item, null);
            viewHolder = new ViewHolder(convertView);
            convertView.setTag(viewHolder);
        } else {
            viewHolder = (ViewHolder) convertView.getTag();
        }

        viewHolder.populateViews(getItem(position));

        return convertView;
    }

} 
```

这是我的对象`StructuredSubDisease`（如果您实际上认为它是一个包含子疾病的顶级对象，那么这个名称没有意义，但无论如何）：

```
class StructuredSubDisease {
    public String headingText;
    public ArrayList<PartnerDisease> subDiseases;

    public View headingView() {
        View returnView = mInflater.inflate(R.layout.partnerdisease_list_item, null);
        TextView t = (TextView) returnView.findViewById(R.id.tv_displayname);
        t.setText(headingText);
        return returnView;
    }
} 
```

...这就是“魔术”应该发生的地方。

```
 for (StructuredSubDisease s : subDiseaseList) {
                mMergeAdapter.addView(s.headingView()); // @Alex, <--- thing 1

                PartnerDiseaseListAdapter adapter = new PartnerDiseaseListAdapter(this);

                for (PartnerDisease p : s.subDiseases) {
                    adapter.add(p);
                }

                mMergeAdapter.addAdapter(adapter); // <--- and thing 2
            } 
```

我已经`Log`数过了：

```
 Log.i("mergecount", "" + mMergeAdapter.getCount()); 
```

这返回`1`，我期望`2`。

编辑：我忘了提，这样做的结果`headingView()`是显示了正确的标题文本，但它下面没有列表。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:38:16.247

> 我的 ArrayAdapter 适合使用

好像没问题。

> 如果我正确添加它

好像没问题。

> 如果我正在做所有必要的事情来连接所有东西

显然你没有任何疾病。

> 因为我添加了两件事——headingView()（被渲染）和适配器（默默地失败）

`getCount()`返回应该在您的 中的总行数`ListView`，而不是添加到`MergeAdapter`. 在您的情况下，您似乎没有任何疾病。

首先将您的`PartnerDiseaseListAdapter`直接放入您的`ListView`，忽略`MergeAdapter`. 让它工作。然后，切换回`MergeAdapter`.

# php - 将文件读入数组，但只到某个点

> ID：10304631
> 
> 赞同：0
> 
> 时间：2012-04-24T19:23:47.470
> 
> 标签：php, file

该文件具有如下文本内容：

```
123
abc
def    

xyz
bla bla
... 
```

我想把它读入一个像 file() 这样的数组，但直到它遇到一个新行。

所以在上面的例子中，数组应该有 123、abc 和 def 行，就是这样。

是否可以不读取数组中的整个文件，因为我有很多文件，每个文件都有 100-120 K？

第一行是文件标题，所以我只需要标题来显示许多文件的通用信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:26:56.103

您应该使用 fgets() 来读取一行，请参阅： http: [//php.net/manual/en/function.fgets.php](http://php.net/manual/en/function.fgets.php)

# android - 通过 Wifi 进行点对点 VoIP 呼叫的应用程序

> ID：10304632
> 
> 赞同：3
> 
> 时间：2012-04-24T19:23:50.373
> 
> 标签：android, voip

我正在寻找一个应用程序来在两个 android 设备之间进行点对点 VOIP 呼叫，而无需任何中间服务器（SIP 服务器）或互联网连接。我只有一个接入点（或通过 LAN 连接的多个接入点），我只想通过 WIFI 进行 VOIP 呼叫。那可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T04:37:21.770

[**servalproject**](http://www.servalproject.org/)可能会回答您的问题，尽管它正在开发中。这是基于 wifi 的 peer-2-peer 语音通话。

# javascript - 使用 Node.js，是否有一些语义可以告诉我代码何时离开当前堆栈？

> ID：10304634
> 
> 赞同：2
> 
> 时间：2012-04-24T19:23:54.103
> 
> 标签：javascript, node.js, error-handling

现在，我的 try/catch 块是否能正常工作对我来说是个谜。我将它们设置在代码周围，然后，因为代码中的某些内容是“异步的”，这似乎是一种在操作系统级别分叉到另一个线程/进程的奇特方式，如果它发生在 try/catch 将被忽略代码。

我很好，我只是想知道是否有一些迹象？按照惯例，我理解，如果一个电话要求回调，它是异步的，否则它不是。我明白为什么回调意味着异步，但我担心反过来并不总是正确的：没有什么能阻止我用一个 try/catch 包围一个调用，该调用被加载到一个新的调用堆栈中并且也不要求回调。这对我来说似乎真的很混乱，如果可能的话，我希望对我的 try/catch 进行更多的控制，而不是使用默认回调来处理所有未捕获的异常。

1.  是否有语义告诉我代码何时离开当前堆栈？

更新：这是一个例子：

```
var UserSchema = new mongoose.Schema({
  email: {type: String, unique: true},
  password: String,
  firstName: String,
  lastName: String,
  created_at: {type: Date, default: Date.now},
  updated_at: Date
});

var User = mongoose.model('User', UserSchema);

var users = [
  {email: 'foo@bar.com', firstName: 'Justin', lastName: 'Jones'},
  {email: 'foo@bar.com', firstName: 'Justin', lastName: 'Jones'}
];

users.forEach(function(user) {

          var newUser = new User(user);
          newUser.save(function(err, obj) {

            if (!err) console.log("Saved: ", obj.email);

          });

}); 
```

鉴于上面的代码，无法在 save() 中捕获异常，因为它发生在另一个调用堆栈中。当我调用 save() 时，有什么方法可以让我从外部知道这就是即将发生的事情吗？

更新：每个告诉我为此使用处理程序的人都应该阅读[这个](http://debuggable.com/posts/node-js-dealing-with-uncaught-exceptions:4c933d54-1428-443c-928d-4e1ecbdd56cb)？显然建议不要处理未在其“线程执行”中捕获的异常，引号是因为它仅像线程一样起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T19:47:07.637

“异步”*不是*“一种说分叉到另一个线程/进程的奇特方式”。

JavaScript 是单线程的。故事结局。语言级别没有分叉。

“异步”的意思就是它所说的：执行的顺序不是代码的顺序。当某个事件发生时，一些代码位 - 回调函数 - 将在某个时间点执行。它是一个基于事件的编程模型。

考虑这个简单的例子：

```
function hello () { alert("Hello!"); }

setTimeout(hello, 2000); 
```

这是最基本形式的异步回调。您有一个回调处理程序 - 函数`hello`- 和一个事件生成器，在本例中是一个基于时间的事件生成器。

一旦事件发生（已经过去了 2 秒），就会调用回调处理程序。

现在进行修改：

```
function hello() { alert(foo.bar); }

try {    
  setTimeout(hello, 2000);
} catch (ex) {
  alert(ex.message);
} 
```

我们在`setTimeout`. 它保护*回调的注册*，仅此而已。这一步很可能会成功，因此 try-catch 块永远不会做任何事情。*回调本身*将在 2 秒后失败这一事实自然不会影响 try-catch 块。这是您感到困惑的行为。

现在进行另一个修改：

```
function hello() { 
  try {    
    alert(foo.bar); 
  } catch (ex) {
    alert("foo.bar is not defined");
  }
}

setTimeout(hello, 2000); 
```

*现在*try-catch 块保护了实际上可能失败的步骤。这意味着您必须在可能发生错误的地方使用 try-catch 块，而不是通常将它们包裹在程序的大部分区域（这似乎是您所做的）。

但是如何让异常做一些有用和可配置的事情呢？通过引入更多回调，自然而然。

```
function hello(onError) { 
  try {    
    alert(foo.bar); 
  } catch (ex) {
    onError("foo.bar is not defined", ex);
  }
}

function errorHandler(customMessage, exception) {
  alert(customMessage);
  // or do something with exception 
}

setTimeout(function () {
  hello(errorHandler)
}, 2000); 
```

* * *

根据您添加的示例：

```
var saveUsers = function(users, onSuccess, onError) {
  users.forEach(function(user) {
    var newUser = new User(user);

    newUser.save(function(err, obj) {
      if (err) {
        onError(err, obj);
        return false;
      } else {
        onSuccess(obj);
      }
    });
  });
}

var users = [
  {email: 'foo@bar.com', firstName: 'Justin', lastName: 'J'},
  {email: 'foo@bar.com', firstName: 'Justin', lastName: 'J'}
];

saveUsers(
  users, 
  function (user) { console.log("Saved: ", user.email); },
  function (err, user) { console.log("Could not save: ", user.email); }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T19:45:42.377

语义实际上只是当您调用的函数完成执行时。如果它产生一个 I/O 进程并注册一个事件，您的`try-catch`块将不会围绕它，因为它是通过隐式 Javascript 事件循环在另一个循环上执行的。

您正在执行的函数中是否存在回调参数与函数启动的工作是否会导致事件在其他地方触发无关。基于[EventEmitter 的对象](http://nodejs.org/docs/latest/api/events.html)使用该机制注册处理程序`.on('eventName', functionName)`，因此多个事件和多个处理程序可以访问相同的“工作”，但这一切都是由一个不接受回调的函数启动的。而`Array`对象的[`forEach`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)接受回调并且是同步的。

简而言之，事件循环障碍之外的任何东西都不会导致抛出 Javascript 异常。只有 Javascript 方面的代码可以。因此，如果需要，您将`try-catch`块放在那一侧：如果该函数可能会引发错误，则在调用可能异步代码的函数中；如果调用可能会引发错误的回调函数本身，则将其放在回调函数本身中。如果它是异步的，那么从 Javascript 的角度来看，它们是两个独立的调用堆栈，因此它们具有不同的`try-catch`作用域；如果它是同步的，您将只需进行一组额外的`try-catch`检查，并且至少您会更好地了解可能引发错误的原因。

就个人而言，我认为 try-catch 不能在像 Javascript 这样的语言中工作，并且被添加以使其更像 Java，所以我尽量避免使用`throw`用于 Node.js 的代码。（例外情况是，如果它仅将它们用于无法工作的库/对象的初始配置，或者如果它使用它[在我看来，由于执行开销很差]作为打破深度同步代码的内部方式并且不会暴露给我。）

编辑：为了更好地解释 Javascript 中的调用堆栈，这是一个简单的 ASCII 图表，显示了堆栈的每一级与时间的关系：

```
== Javascript Event Loop =========================================================
== My Awesome Function ======================================    == My callback ==
    == Call to an async library ====================
        == I/O request and callback registration === 
```

抛出的任何东西都`My callback`将直接发送回 Javascript 事件循环，并且只能通过注册一个`process.on('uncaughtException', myFunc)`处理程序来处理它。基本上，您自己的任何代码都可以使用`try-catch`，但`throw`如果将其直接作为事件处理程序调用，则永远不应该。

至于您最近对问题的编辑`async.forEach`将解决您的问题。您将数组传递给它以进行迭代，然后将函数传递给数组中的每个项目，然后传递一个“finally”样式的函数来处理错误或从那里继续您的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T20:15:25.790

Nathan：我不打算讨论更大的问题，即找出“代码何时离开当前堆栈”。不过，我可以帮助您保存用户。我推荐伟大的[异步](https://github.com/caolan/async)库：

```
function saveUser(user, callback) {
    new User(user).save(callback);
}

async.forEach(users, saveUser, function(err, results) {
    // Respond
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-24T20:05:47.487

如果您只是使用回调函数，那么没关系。NodeJS 是单线程的，因此一切都在同一个调用堆栈上。

但！你说得对，NodeJS 有时可能会“离开”当前的调用堆栈。离开是在引号中，因为它并没有真正离开当前调用堆栈，而只是返回到根调用 ( `process.nextTick()`)。然后在下一个滴答声中，它会产生一个“新”调用堆栈。

如果你想要一个语义，我想你可以说在你使用的任何地方，你`EventEmitter`都会将该回调函数传递给下一个刻度，因此将它“移动”到另一个调用堆栈。（但即便如此，也不完全正确，因为 EventEmitter 实际上是在当前滴答声上调度事件）。

# c# - 计算盐

> ID：10304635
> 
> 赞同：0
> 
> 时间：2012-04-24T19:24:00.327
> 
> 标签：c#, asp.net, sql-server-2008, security, hash

我想计算 aspnet Membership 的盐。

```
 private static string CreateSalt(int size){ 
```

但是提供程序的默认大小是多少？（32 还是 64？）我想将它与我机器上的 sql server 匹配。你也可以请一些算法吗？

```
<add name="AspNetSqlMembershipProvider"
     requiresQuestionAndAnswer="true"
     enablePasswordRetrieval="false"
     enablePasswordReset="true"
     connectionStringName="Membershiptest"
     minRequiredPasswordLength="8"
     minRequiredNonalphanumericCharacters="1"
     applicationName="test"
     type="System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/> 
```

我使用 SQL SERVER 2008 R2。我在这里复制了一些盐，所以我们可以说它们的大小是 24 吗？

```
2Qjf2TYkDcp/wYKY1px7yg==

Ob+cmhSBCE4DFXKyF7ylAw==

65wVLQ1m+An6a9WGSv6SXA==

Tf0fdXoPw8FMr+KuhitvtQ== 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:48:06.373

那是 base64，所以它实际上是 16 个字节而不是 24 个字节。大小为 16 或 128，具体取决于您分别需要字节还是位。

# html - Twitter 分享额外的文字

> ID：10304638
> 
> 赞同：0
> 
> 时间：2012-04-24T19:24:31.277
> 
> 标签：html, twitter

我正在构建自己的 Twitter 分享链接，如下所述：

[https://dev.twitter.com/docs/tweet-button#build-your-own](https://dev.twitter.com/docs/tweet-button#build-your-own)

我要共享的 URL 类似于此示例 URL：

[https://twitter.com/intent/tweet?url=http://www.google.com&text=I%20just%20shared%20my%20link%20using%20@eckroth%20-%20Check%20it%20out](https://twitter.com/intent/tweet?url=http://www.google.com&text=I%20just%20shared%20my%20link%20using%20@eckroth%20-%20Check%20it%20out)：

**我的问题：** 如何在 URL 之后添加带有其他信息的文本？URL 参数位于共享字符串的最后：

*“我刚刚使用 @eckroth 分享了我的链接 - 看看：[http](http://www.google.com) ://www.google.com ”*

我希望它是这样的：

*“我刚刚使用@eckroth 分享了我的链接 - 看看：[http](http://www.google.com) ://www.google.com - **这里有一些其他文字！** ”*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:35:26.933

抱歉，Joel，但是您不能使用 Web Intents API 来做到这一点，这是您提供的示例 URL 发布到的内容。看看这个： [https](https://dev.twitter.com/docs/intents) ://dev.twitter.com/docs/intents 。

如果您向下滚动到“支持的参数”，您将看到 url 参数的描述，其中指出它将被缩短并“附加到推文的末尾”。因此，如果我们将 URL 交给 Twitter 来处理，我们将无法控制它的去向。

也就是说，您可以自己简单地在文本中包含 URL。在 Twitter 制作自己的 URL 缩短器之前，我们曾经这样做过。通过[http://bit.ly](http://bit.ly)或类似方式将其传递，然后将生成的 URL 包含在文本中您想要的任何位置。

注意 - 您的自缩短链接将在时间轴的屏幕上呈现的方式可能与您传递给 Twitter 的 URL 具有相同的权限，因此您可能希望两者都做。

祝你好运！

# android - Android游戏框架概念

> ID：10304641
> 
> 赞同：0
> 
> 时间：2012-04-24T19:24:41.500
> 
> 标签：android, android-framework

我正在基于[本书](https://rads.stackoverflow.com/amzn/click/com/1430239875)中说明的框架构建游戏。据我所知，该框架类似于其他旨在制作游戏的此类框架，而不是其他类型的应用程序。在大多数情况下，它被证明非常有用，但我不完全理解我将如何启动“传统”活动。具体来说，我想打开一个包含 ScrollView 的 Activity，但是对于它如何适应整个游戏框架范例有点迷失......尤其是当游戏框架似乎通过更新 Canvas 而不是通过处理来进行渲染时带有单独的活动元素。

例如，启动新屏幕的“框架方式”如下所示：

```
game.setScreen(new HelpScreen(game)); 
```

其中 HelpScreen 是扩展 Screen 类的 Java 类。我想知道打开“传统”活动（即通过 XML 文件布局的活动）的最佳实践方式。（或者我只是以错误的方式解决这个问题？）

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:17:40.803

在 Android 中，您使用 Intent 来启动所需的 Activity。

[http://developer.android.com/guide/topics/fundamentals/activities.html#StartingAnActivity](http://developer.android.com/guide/topics/fundamentals/activities.html#StartingAnActivity)

# ios - iOS Twitter+OAuth 检查用户是否登录

> ID：10304648
> 
> 赞同：0
> 
> 时间：2012-04-24T19:25:10.673
> 
> 标签：ios, twitter, oauth

我正在开发一个应用程序，我想在其中为用户提供使用 Twitter 登录的选项。我的问题是我想在获得对某些功能的访问权限之前检查用户是否已登录。假设我有一个视图，我想根据用户是否登录显示不同的内容。我知道我可以在打开应用程序时登录用户，但是如果用户选择不登录，我不想每次都显示登录屏幕。（我正在使用 Twitter+OAuth/MGTwitterEngine 框架）。

我怎样才能设置这样的控件？任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:47:36.093

似乎您希望将授权令牌保存在 NSUserDefaults 中。然后，在启动时，您将检查该令牌

```
if (![[NSUserDefaults standardUserDefaults] objectForKey:@"whatever_you_call_your_auth_token") {
//send the user to twitter login
} else {
//set isLoggedInViaTwitter:YES
} 
```

因此，如果您有一个类似 isLoggedInViaTwitter 的布尔值，并且您根据 NSUserDefaults 中是否存在身份验证令牌将其设置为 YES 或 NO，您可以使用该值来确定要在视图中显示的内容。我是新手，但我希望这在一定程度上有所帮助。如果我误解了你的问题，请告诉我。

# mercurial - 让 ~ 在 Windows 上扩展 .hgrc

> ID：10304652
> 
> 赞同：1
> 
> 时间：2012-04-24T19:25:28.270
> 
> 标签：mercurial, hgrc

是否有可能使以下工作？

```
[ui]
ssh = ~\bin\ssh -i ~\.ssh\my_key 
```

使用 Google 意味着它必须适用于某些人（Linux 用户？），但它绝对不适合我。

我也接受`$HOME`（或一些变体），但我找不到正确的语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:39:12.970

如果你替换`~`为`%USERPROFILE%`（我相信它相当于`$HOME`Windows 中的）？

# c# - 编写包装类以获得松耦合的更好方法

> ID：10304653
> 
> 赞同：0
> 
> 时间：2012-04-24T19:25:29.747
> 
> 标签：c#, generics, log4net

```
class LogUtil<T> : ILogUtility
{
    log4net.ILog log;

    public LogUtil()
    {
        log = log4net.LogManager.GetLogger(typeof(T).FullName);
    }

    public void Log(LogType logtype, string message)
    {
        Console.WriteLine("logging coming from class {0} - message {1} " , typeof(T).FullName, message);
    }
}

public class Logger
{
    ILogUtility _logutility;

    public Logger(ILogUtility logutility)
    {
        _logutility = logutility;
    }

    public void Log(LogType logtype, string message)
    {
        _logutility.Log(logtype, message);
    }

} 
```

我需要具有灵活的功能，并且能够在将来删除 LogUtil 类并使用其他东西。

所以我编写 LoggerUtility 包装类如下：

```
class LoggerUtility<T>
{
    public Logger logger
    {
        get
        {

            LogUtil<T> logutil = new LogUtil<T>();

            Logger log = new Logger(logutil);

            return log;
        }
    }
} 
```

我的客户端代码如下：

```
public class TestCode
{
    public void test()
    {

        new LoggerUtility<TestCode>().logger.Log(LogType.Info, "hello world");

    }

} 
```

我正在编码可能不干净的 Logger 属性。

如您所见，以下行看起来并不干净。

```
new LoggerUtility<TestCode>().logger.Log(LogType.Info, "hello world"); 
```

有没有更好的方法来编写客户端代码？我想与 LogUtil 松耦合，而不是直接在我的客户端代码中使用它。

请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T22:22:14.733

评论中提供的答案是正确的（客户应该依赖接口`ILogUtil`而不是直接依赖具体实现）。还有无数其他问题：

*   每次记录消息时，您都会实例化`LoggerUtility<T>`该类**和**该类的一个新实例。`Logger`也许这里的东西应该是静态的？额外层 ( `LoggerUtility`) 的意义何在？

*   您对泛型 ( `LoggerUtility<T>`) 的使用并不完全有意义，因为您不仅限于 type `T`，而且您没有使用该信息。

实际上，编写自己的日志外观是其他人已经花费的努力 - 只需使用现有的实现即可。我可以同时保证`log4net`和`NLog`，但是如果您希望具有灵活性，请在[Castle.Services.Logging](http://www.castleproject.org/services/logging/index.html)中选择适当的外观，它具有前面提到的实现的适配器（您可以编写自己的！）。

更多信息在这里：[.NET 世界是否有日志外观？](https://stackoverflow.com/questions/2733510/is-there-a-logging-facade-for-the-net-world)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-06T08:24:23.170

取决于您希望日志包装器的行为有多复杂？

日志记录有多个级别，信息和异常是常态。

围绕使用接口的答案是 100% 正确的，但也有 DRY 的原则（不要重复自己）。

如果您发现您的代码看起来非常重复，就像我的一样，那么也许除了使用注入和接口等标准之外，还可以实现一个通用包装器来处理错误。

泛型允许您分离解决方案的逻辑并允许重用，接口允许您将日志记录的概念与物理实现分离。

```
 public static output ExecuteBlockwithLogging<output, input, config>(ExeBlock<output, input, config> exeBlock, input InputForExeBlock, ILoggingBlock logger)
    {

        exeBlock.Execute(InputForExeBlock);

        if ((exeBlock.logEntries != null) && (exeBlock.logEntries.Length > 0))
        {
            logger.Execute(exeBlock.logEntries);
        }

        if ((exeBlock.exceptions != null) && (exeBlock.exceptions.Length > 0))
        {
            foreach (var e in exeBlock.exceptions)
            {

                var dictionaryData = new Dictionary<string, string>();
                if (e.Data.Count > 0)
                {
                    foreach (DictionaryEntry d in e.Data)
                    {
                        dictionaryData.Add(d.Key.ToString(), d.Value.ToString());
                    }
                }

                var messages = e.FromHierarchy(ex => ex.InnerException).Select(ex => ex.Message);

                LoggingEntry LE = new LoggingEntry
                {
                    description = e.Message,
                    exceptionMessage = String.Join(Environment.NewLine, messages),
                    source = exeBlock.GetType().Name,
                    data = dictionaryData
                };

                logger.Execute(new LoggingEntry[] { LE });
            }
            return default(output);
        }

        return exeBlock.Result;
    } 
```

# asp.net - 为什么在 MVC 的所有视图文件夹中都需要一个 web.config？

> ID：10304655
> 
> 赞同：4
> 
> 时间：2012-04-24T19:25:40.780
> 
> 标签：asp.net, asp.net-mvc-3, design-patterns

试图找到一个解决方案我读了这个问题：[Web.Config 文件在 MVC 项目的视图文件夹中做了什么](https://stackoverflow.com/questions/6204341/what-does-the-web-config-file-do-in-the-views-folder-of-a-mvc-project)

但我还是想知道：*为什么在MVC的所有视图文件夹中都需要一个web.config？*

这个答案*web.config 文件存在于 Views 文件夹中，以防止通过控制器以外的任何方式访问您的视图*对我来说是不够的，如果是这样，这是一个临时解决方案。

如果这真的是唯一的原因，这是一个很大的改进点。但是，我很确定这是有充分理由的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:01:45.020

啊，是的，我同意。在同一线程的另一个答案中，给出了这个原因：

> 此文件还包含使标准 ASP.NET ASPX 页面编译器与 ASP.NET MVC 视图模板语法正常工作所需的配置。

所以我推断可能需要解决一些向后兼容性问题。但我确实同意你的中心观点，这是应该在未来的迭代中改进的东西。

# wpf - WPF DataGridColumnHeader MouseOver - 将触发器应用于 DataGridCell 元素

> ID：10304657
> 
> 赞同：1
> 
> 时间：2012-04-24T19:25:47.610
> 
> 标签：wpf, datagrid, mouseover

当我将鼠标悬停在该数据网格列标题上时，我想更改整个数据网格列的背景颜色。这是我正在使用的样式代码。

```
<Style x:Key="RhinoDataGridBaseStyle" TargetType="{x:Type ctrls:RhinoDataGrid}">
    <Style.Resources>
        <Style TargetType="{x:Type DataGridCell}">
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="White"></Setter>
                    <Setter Property="BorderThickness" Value="3"></Setter>
                    <Setter Property="BorderBrush" Value="#4CB7FF"></Setter>
                    <Setter Property="Foreground" Value="Black"></Setter>
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style TargetType="{x:Type DataGridColumnHeader}">
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="Height" Value="26"></Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    ?????????????????????? What Should I write here ??????????????????????????????
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style TargetType="{x:Type DataGridRowHeader}">
            <Setter Property="Width" Value="36"></Setter>
        </Style>
    </Style.Resources> 
```

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:59:10.107

它有点棘手，但您可以使用附加属性将单元格链接到它们的标题。这是我不久前使用的一些代码（如果它很长，请原谅）

**这是附加的属性文件**

```
public static class GroupMessaging
{
    private static readonly Dictionary<string, List<DependencyObject>> messageDictionary = new Dictionary<string, List<DependencyObject>>();

    public static readonly DependencyProperty MessageKeyProperty = DependencyProperty.RegisterAttached("MessageKey", typeof(string), typeof(GroupMessaging), new PropertyMetadata(null, OnMessageKeyChanged));

    public static void SetMessageKey(UIElement element, string value)
    {
        element.SetValue(MessageKeyProperty, value);
    }
    public static string GetMessageKey(UIElement element)
    {
        return (string)element.GetValue(MessageKeyProperty);
    }

    public static readonly DependencyProperty MessageProperty = DependencyProperty.RegisterAttached("Message", typeof(string), typeof(GroupMessaging), new PropertyMetadata(null, OnMessageChanged));

    public static void SetMessage(UIElement element, string value)
    {
        element.SetValue(MessageProperty, value);
    }
    public static string GetMessage(UIElement element)
    {
        return (string)element.GetValue(MessageProperty);
    }

    private static void OnMessageChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var key = d.GetValue(MessageKeyProperty);
        if (key == null || !messageDictionary.ContainsKey((string)key))
        {
            return;
        }
        messageDictionary[(string)key].ForEach(o =>
            {
                var old = o.GetValue(MessageProperty);
                if (o != d && e.NewValue != old)
                {
                    o.SetValue(MessageProperty, e.NewValue);
                }
            });
    }

    private static void OnMessageKeyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        if (e.OldValue != null && messageDictionary.ContainsKey((string)e.OldValue))
        {
            messageDictionary[(string)e.OldValue].Remove(d);
        }
        if (e.NewValue != null)
        {
            if (!messageDictionary.ContainsKey((string)e.NewValue))
            {
                messageDictionary.Add((string)e.NewValue, new List<DependencyObject>());
            }
            messageDictionary[(string)e.NewValue].Add(d);
        }
    }
} 
```

这是我的 XAML

```
<DataGrid ItemsSource="{Binding Items}" AutoGenerateColumns="False">
    <DataGrid.ColumnHeaderStyle>
        <Style TargetType="DataGridColumnHeader">
            <Setter Property="core:GroupMessaging.MessageKey" Value="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Content}" />
            <Setter Property="ContentTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <Grid x:Name="headergrid">
                            <TextBlock Text="{TemplateBinding Content}" />
                        </Grid>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="true">
                    <Setter Property="core:GroupMessaging.Message" Value="Active" />
                    <Setter Property="Background" Value="Aqua" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </DataGrid.ColumnHeaderStyle>
    <DataGrid.Columns>
        <DataGridTemplateColumn Header="Prop1">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Grid x:Name="templategrid" core:GroupMessaging.MessageKey="Prop1">
                        <TextBlock Text="{Binding Prop1}" />
                    </Grid>
                    <DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding ElementName=templategrid, Path=(core:GroupMessaging.Message)}" Value="Active">
                            <Setter TargetName="templategrid" Property="Background" Value="Aqua" />
                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <DataGridTemplateColumn Header="Prop2">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Grid x:Name="templategrid" core:GroupMessaging.MessageKey="Prop2">
                        <TextBlock Text="{Binding Prop2}" />
                    </Grid>
                    <DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding ElementName=templategrid, Path=(core:GroupMessaging.Message)}" Value="Active">
                            <Setter TargetName="templategrid" Property="Background" Value="Aqua" />
                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <DataGridTemplateColumn Header="Prop3">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Grid x:Name="templategrid" core:GroupMessaging.MessageKey="Prop3">
                        <TextBlock Text="{Binding Prop3}" />
                    </Grid>
                    <DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding ElementName=templategrid, Path=(core:GroupMessaging.Message)}" Value="Active">
                            <Setter TargetName="templategrid" Property="Background" Value="Aqua" />
                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <DataGridTemplateColumn Header="Prop4">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Grid x:Name="templategrid" core:GroupMessaging.MessageKey="Prop4">
                        <TextBlock Text="{Binding Prop4}" />
                    </Grid>
                    <DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding ElementName=templategrid, Path=(core:GroupMessaging.Message)}" Value="Active">
                            <Setter TargetName="templategrid" Property="Background" Value="Aqua" />
                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

**这是我的视图模型**

```
public class MainViewModel
{
    public List<Item> Items { get; private set; }

    public MainViewModel()
    {
        Items = new List<Item>();
        Items.Add(new Item() { Prop1 = "item1_1", 
            Prop2 = "item1_2", Prop3 = "item1_3", Prop4 = "item1_4"});
        Items.Add(new Item() { Prop1 = "item2_1", 
            Prop2 = "item2_2", Prop3 = "item2_3", Prop4 = "item2_4"});
        Items.Add(new Item() { Prop1 = "item3_1", 
            Prop2 = "item3_2", Prop3 = "item3_3", Prop4 = "item3_4"});
        Items.Add(new Item() { Prop1 = "item4_1", 
            Prop2 = "item4_2", Prop3 = "item4_3", Prop4 = "item4_4"});
        Items.Add(new Item() { Prop1 = "item5_1", 
            Prop2 = "item5_2", Prop3 = "item5_3", Prop4 = "item5_4"});
    }
}

public class Item
{
    public string Prop1 { get; set; }
    public string Prop2 { get; set; }
    public string Prop3 { get; set; }
    public string Prop4 { get; set; }
} 
```

# javascript - 除非之前完成（不使用回调），否则如何使动画不触发

> ID：10304662
> 
> 赞同：0
> 
> 时间：2012-04-24T19:25:55.787
> 
> 标签：javascript, jquery

我有一个名为：

```
this.makeStuffHappen() 
```

它根据 switch 语句和几个变量制作不同的动画。是否有可能使函数不触发，除非之前所有的都完成了解决。

我想写类似的东西

```
$('button').click(function(){
    a.makeStuffHappen();
    b.makeStuffHappen();
    c.makeStuffHappen();
    d.makeStuffHappen();
}); 
```

然后它应该只在 a 完成后运行 b ，在 b 完成后运行 c ，在 c 完成后运行 d 。是否只能通过链接它们使动画等待前一个？是否可以链接任何功能？

编辑： makeStuffHappen() 正在为不同的元素设置动画，因此 a.makeStuffHappen() 将为与 b.makeStuffHappen 等不同的元素设置动画。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:51:01.063

最简单（或至少最灵活）的方法是使用[延迟对象*^([docs])*](http://api.jquery.com/category/deferred-object/)。为此，您必须从每个函数返回一个延迟对象，例如：

```
a.makeStuffHappen = function() {
    elementA.animate(...);
    elementB.animate(...);
    ...

    return $.when(elementA, elementB,...);
}; 
```

`b.makeStuffHappen`等相同。

[`$.when()` *^([docs])*](http://api.jquery.com/jquery.when/)返回一个延迟对象，您可以在其中附加回调，一旦传递给它的所有延迟对象都被解析，就会执行该回调。

然后在您的事件处理程序中，您可以在这些延迟对象上调用[`.pipe()` *^([docs])*](http://api.jquery.com/deferred.pipe/)，将它们链接在一起：

```
$('button').click(function(){
    a.makeStuffHappen()
       .pipe($.proxy(b.makeStuffHappen, b))
       .pipe($.proxy(c.makeStuffHappen, c))
       .then(function() {
           console.log('All done');
       });
}); 
```

[**演示**](http://jsfiddle.net/4f7EZ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:27:48.137

看看jquery的队列功能： [http ://api.jquery.com/queue](http://api.jquery.com/queue/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T19:44:45.747

回调将是最简单的方法，但由于您不想使用回调（jQuery`.queue()`确实需要 - 嗯......无论如何都是递归回调），您可以让您拥有的方法返回一个布尔值：

```
$('button').click(function()
{
    var theObjects = [a,b,c,d];
    for (var i=0;i<theObjects.length;i++)
    {
        if (theObjects[i].makeStuffHappen() === false)
        {
            break;//or throw, or whatever...
        }
    }
}); 
```

当然，方法很可能会根据调用的对象而有所不同。您可以通过使用对象而不是数组来解决此问题，在这种情况下，您的事件处理程序可能类似于：

```
$('button').click(function()
{
    var theObjects = {a:'aMethod',b:'bMethod',c:'cMethod'};
    for(var i in theObjects)
    {
        if (theObjects.hasOwnProperty(i))
        {
            if(window[i][theObjects[i]]() === false)
            {
                break;//or throw, or return...
            }
        }
    }
}); 
```

请注意，我不知道你为什么不想在这里使用某种形式的回调，因为这将是最简单的方法......但这当然不是我关心的...... :- )

好吧，快速浏览一下你的游戏……看起来很有趣，继续努力吧:)。顺便说一句，您离在所有地方使用回调仅一步之遥：

```
$('#placeBet').click(function() {
    placeBet();
}); 
```

可以写成：

```
$('#placeBet').click(placeBet); 
```

在后者中，placeBet 是一个回调函数。我认为您主要关心的是：

```
player.printHand();
dealer.printHand(isDealerHidden); 
```

我在这里要做的是更改 printHand 函数，方法是在末尾添加：

```
if (this.name !== 'dealer')
{
    dealer.printHand(isDealerHidden);
} 
```

我没有阅读足够多的脚本来使这项工作按您的需要进行，但是您明白了……更简单的方法是不明确地为经销商设置动画，而是更改玩家手上的所有动画师以结束一些在玩家动画完成后动画经销商的代码......我知道，我在胡说八道，但我在工作......而且生病了......无论如何，祝你好运。我可能会花更多时间检查您的进度，也许今晚更仔细地阅读您的脚本并将此运球编辑为实际可行的内容:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T12:01:10.457

您可以在方法中添加回调函数：

```
this.makeStuffHappen = function(callback)  {
   //do things like animations
   $(this).animate({ ... }, 200, callback);
   //or call the callback after everything is done:
   callback();
} 
```

你可以像这样使用它：

```
$('button').click(function(){
    a.makeStuffHappen(b.makeStuffHappen(c.makeStuffHappen(d.makeStuffHappen())));
}); 
```

# javascript - 使用 jquery / ajax 的 json 请求中的意外令牌

> ID：10304664
> 
> 赞同：0
> 
> 时间：2012-04-24T19:26:15.300
> 
> 标签：javascript, jquery, ajax, json, jsonp

我正在使用 Jquery 来获取一个 json 文件，并且在浏览器中出现错误（意外的令牌：）

这是我的javascript：

```
fetchScenes: function() {
        $j.ajax({
            crossDomain:true,
            url: 'xml/scenes.json',
            dataType: "jsonp",
            success: function( sceneXML ) {

            }
        }); 
    }, 
```

这是我的json的部分结构：

```
{ "scenes": {
    "scene": {
      "-id": "0",
      "-name": "Master",
      "scene": [
        {
          "-id": "1",
          "-name": "Weekday Vehicle",
          "-description": "Your home away from home.",
          "scene": [
            {
              "-id": "10",
              "-name": "For My Commute",
              "scene": [
                {
                  "-id": "13",
                  "-name": "Heading to School",
                  "scene": [
                    {
                      "-id": "20",
                      "-name": "Style Seeker",
                      "-vehicles": "1,3,6"
                    },
                    {
                      "-id": "21",
                      "-name": "Creative Thinker",
                      "-vehicles": "9,0,3"
                    }
                  ]
                }, 
```

我用 JSONLint 验证了 JSON，所以我不确定问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:39:05.060

如果你告诉 jQuery 期待 JSONP，你必须发送[JSONP *^([Wikipedia])*](http://en.wikipedia.org/wiki/JSONP)，而不是 JSON。

即响应通常是随 URL 发送的参数值`someFunctionName({...json here...});`（由 jQuery 自动生成）。`someFunctionName``callback`

jQuery 将响应评估为 JavaScript，这会在您的情况下生成错误，因为纯 JSON 是无效的 JavaScript。

* * *

或者，如果它实际上不是跨域请求（`xml/scenes.json`是“本地”URL），则更`dataType: "jsonp"`改为`dataType: "json"`（并删除`crossDomain`）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-24T19:31:31.783

您的 JSON 无效。我数了 7 个左大括号，只有三个右大括号。此外，括号的数量不会相加。

# c# - 将设置保存到 exe

> ID：10304665
> 
> 赞同：2
> 
> 时间：2012-04-24T19:26:15.573
> 
> 标签：c#, application-settings, settings

我有一个程序，我想将信息存储在一个字符串中。我一直在使用`Properties.Setting.Default.STRINGname`来存储信息，这在我的 PC 上运行良好，并且我可以看到保存的字符串（当我转到应用程序中的设置时）。但是，当我将应用程序带到新 PC 上时，它会丢失字符串。有没有办法可以编辑此信息并将其保存在应用程序中？所以基本上我需要能够将用户设置转换为应用程序设置，但在运行时之后。

```
var settings = Properties.Settings.Default;
        settings.H1 = textbox1.text;
        settings.H2 = textbox2.text;

        settings.Save(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T19:50:02.330

[MSDN 明确说明](http://msdn.microsoft.com/en-us/library/bb397755.aspx)了这一点：

> **应用程序范围**的设置是*只读的*，**只能在设计时**或通过`.config`在应用程序会话之间更改文件来更改。但是，**用户范围的**设置**可以在运行时编写，**就像您更改任何属性值一样。新值在应用程序会话期间持续存在。您可以通过调用 Save 方法在应用程序会话之间保留对设置的更改。

为此，应用程序设置将永远不会为您工作。但是，如果您使用的是用户范围的设置，它确实可以工作，但很快您将应用程序从一台计算机更改为另一台计算机（如您所说），您将失去设置，因为那是另一台计算机（另一个用户范围）。 .

有办法继续拥有相同的设置，你可以做，至少 2 件事：

*   使用`.config`文件保存设置（它是一个 XML 文件）
*   使用服务来托管设置，如果用户可以访问互联网，您可以阅读

你不能做的是

*   仅使用一个可执行文件，将设置从计算机保存到计算机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:32:36.450

The code you are using should save the user settings. Rememeber that user settings will be saved in the user's data folder. Not in the configuration file where the app was installed (say program files). This is the usual path:

```
<Profile Directory>\<Company Name>\<App Name>_<Evidence Type>_<Evidence Hash>\<Version>\user.config 
```

[See this links form more information](http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/4f3e1f68-d19c-4a43-a650-bd4afa9c4593)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:28:14.820

用户设置的编译方式与应用程序设置不同，因此编译后无法转换。为什么不使用应用程序设置进行编译？

# .net - 如何为您而不是其他开发人员取消版本文件

> ID：10304666
> 
> 赞同：1
> 
> 时间：2012-04-24T19:26:15.923
> 
> 标签：.net, visual-studio-2010, svn, version-control

其他开发人员之一将预构建事件添加到 Visual Studio 中的 Silverlight 和服务器项目。它没有影响任何其他开发人员，只是我。出于某种原因，如果不删除预构建事件，我就无法构建和运行我们的应用程序。

看起来修改预构建事件只会更改受版本控制 (svn) 的 .csproj 文件。在进行 svn 提交或更好的解决方案时，我是否可以忽略此文件？

我已经查看了 svn delete --keep-local 和编辑 svn:ignore 但似乎这对于其他开发人员也基本上会取消它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:40:21.427

在*Tortoise SVN*客户端中，有一个 'ignore-on-commit' 更改列表 -默认情况下， *Tortoise*不会提交该更改列表上的文件（这里有关于更改列表的[更多信息](http://svnbook.red-bean.com/en/1.7/svn.advanced.changelists.html)）。因此，一种选择是使用 Tortoise SVN 并将您想要在提交时忽略的文件添加到更改列表。

另一种选择是编写您自己的自定义提交脚本，该脚本将运行`svn status`，过滤掉“ignore-on-commit”更改列表中的文件，然后提交其余的。这是伪代码：

```
svn status --changelist "ignore-on-commit" > ignored.tmp
for every line in ignored.tmp:
   file = parse_file_name from line
   cp file file.bak
   svn revert file
svn ci [other options passed to the script]
for every line in ignored.tmp:
   file = parse_file_name from line
   mv file.bak file
rm ignored.tmp 
```

不幸的是，标准的命令行 SVN 客户端仍然缺少一个非常有用的功能来指定您希望在除更改列表**之外**的所有内容上运行您的命令。

# c# - Mac 和 Windows 的音频框架

> ID：10304669
> 
> 赞同：1
> 
> 时间：2012-04-24T19:26:29.783
> 
> 标签：c#, c++, windows, macos, audio

[我意识到我之前](https://stackoverflow.com/questions/9182074/)问过一个类似的问题，但是我想做的事情的计划已经有了一些进展，参数也变得有点不同。

基本上，我正在寻找在 Mac 和 Windows 上解码和输出音频的最佳选择。理想情况下，两个平台之间所需的代码不会有任何差异。我只是希望能够将文件路径或 HTTP URL 传递给它，并让它播放具有暂停、搜索等功能的音频。

它*必须*能够开箱即用地解码 MP3 和 AAC，而不依赖于操作系统（例如完全依赖于操作系统的 Qt 的 Phonon）。除此之外的任何其他编解码器都将是一个非常好的奖励。

我看过像 libavcodec 这样的东西，据说它可以解码任何东西，但还没有弄清楚如何让它工作。到目前为止，我看到的库似乎也适用于 Mac 和 Linux 或 Windows 和 Linux，但不是 Mac*和*Windows。

它不需要是开源的，但如果它需要可用于商业产品。只要它不太昂贵且易于使用，我就可以许可某些东西。

最后，虽然 C/C++ 是首选，但如果有一些东西可以与 C#/Mono 一起使用，那也没关系。

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:34:03.360

我为 Mac 和 Windows 创建了一个名为“Crosstalk”的 C++ 音频库。

Crosstalk 是一个 C++ 音频引擎，可让您实时创建和路由音频系统。该引擎负责所有音频路由，并为您提供一个简单的平台来创建系统组件（例如，连接到“低通滤波器”的“Mp3 解码器”组件连接到“音频设备”和“文件记录器”）。

它非常易于使用。以下是如何播放 mp3 文件的示例（这些组件随引擎提供）：

```
XtSystem system;
XtMp3Decoder mp3Decoder;
XtAudioDevice audioDevice;

long md = system.addComponent(&mp3Decoder);
long ad = system.addComponent(&audioDevice);

system.connOutToIn(md,0,ad,0);
system.connOutToIn(md,1,ad,1);

mp3Decoder.loadFile("../05 Tchaikovski-Swan Lake-Scene.mp3");
mp3Decoder.play(); 
```

Crosstalk 包括示例 Xcode 和 Visual Studio 项目。

您可以在此处下载 Crosstalk 并查看 API 文档和许可详细信息：http: [//www.adaptaudio.com/Crosstalk](http://www.adaptaudio.com/Crosstalk)

**编辑（01-12-2012）：**

Crosstalk 已被一个名为“ [DSPatch](http://www.flowbasedprogramming.com) ”的开源项目所取代。DSPatch 本质上是 Crosstalk 背后路由引擎的升级版本，不再局限于音频处理。DSPatch 允许您创建和路由几乎任何可以想象的类型的流程链，并且免费供个人和专有使用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:35:18.323

> 开箱即用解码 MP3 和 AAC

我不知道有任何音频库可以如此轻松地做到这一点。问题是有关 MP3 解码的许可证问题。

[我在这篇文章](https://stackoverflow.com/a/10280795/176769)中讨论了一些选项，它们适用于*Windows/Mac OS X*，但我不确定它们是否具有 C# 绑定。

如果您愿意自己编写绑定，您可能会对[libaudiodecoder](https://github.com/asantoni/libaudiodecoder/)感兴趣：

> 一个 C++ 跨平台 MP3/AAC/WMA/WAV 解码器。

它带有一个[示例](https://github.com/asantoni/libaudiodecoder/tree/master/examples/playsong)，展示了如何通过[PortAudio](http://www.portaudio.com/)在 Windows/Mac 上播放歌曲。

# c# - 从excel读取复制的十进制值

> ID：10304671
> 
> 赞同：0
> 
> 时间：2012-04-24T19:26:39.767
> 
> 标签：c#, excel-2007, copy-paste

我正在从 excel 表中复制一个值 8.03，并使用下面的代码从剪贴板中读取 C# 中的值。出来的值是 8.0299999999999994 而不是 8.03。当我查看下面的 xml 时，值为 8.0299999999999994。xlsx 的 zip 文件中的 sheet1.xml 的值也为 8.02999999999999994。但是当我将值复制到记事本时，值会在 8.03 处被复制。我该怎么做才能像记事本一样将值复制为 8.03？

```
DataObject retrievedData =  Clipboard.GetDataObject() as DataObject;
    if (retrievedData.GetDataPresent("XML Spreadsheet"))
    {
        var sourceDataReader = new XmlTextReader(retrievedData.GetData("XML Spreadsheet") as System.IO.Stream);
         var doc = XDocument.Load(reader);
         var excelWorksheeet = doc.Element("Worksheet");
         XNamespace ns = "urn:schemas-microsoft-com:office:spreadsheet";
         XName worksheetName = ns + "Worksheet";
         var worksheetElement = doc.Root.Element(worksheetName);
    } 
```

worksheetElement 具有以下值：

```
 <Worksheet ss:Name="Sheet1" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns="urn:schemas-microsoft-com:office:spreadsheet">
   <Table ss:ExpandedColumnCount="1" ss:ExpandedRowCount="1" ss:DefaultRowHeight="15">
     <Row>
       <Cell>
         <Data ss:Type="Number">8.0299999999999994</Data> 
       </Cell>
      </Row>
    </Table>
  </Worksheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:34:11.583

The clipboard has support for several formats. Obviously the `XML Spreadsheet` format does a different rounding of the underlying float value than excel does. If you want to get the data exactly as notepad does, try to get the `text` representation instead.

Of course, copying as `text` will not get all the detailed information that `XML Spreadsheet` gives you, but it all depends on what you want to do with the data.

An alternative is to get both representations. Get the `XML Spreadsheet` format to get the detailed data and use the `text` format to get a display string.

# django - 使用 AMQP 在 Node.js 和 Django 之间传输对象

> ID：10304677
> 
> 赞同：0
> 
> 时间：2012-04-24T19:26:50.477
> 
> 标签：django, node.js, amqp, django-celery, pika

我从 websockets 开始，我对数字库和配置选项感到非常困惑。我只想设置一个项目，其中 node.js 服务器调用 python/django 中的方法，当最后一个完成时，它将结果传输回 node.js 服务器。这是我到目前为止所拥有的：

[本教程](http://www.rabbitmq.com/blog/2011/08/16/using-the-rabbitmq-service-on-cloud-foundry-with-nodejs/)中的 Nodes.js AMQP ：

```
var conn = amqp.createConnection();
conn.on('ready', function(){
 var exchange = conn.exchange('?1', {'type': 'fanout', durable: false}, function() {
     exchange.publish('?2', {add: [1,2]});
 });
}); 
```

[本教程](http://ask.github.com/django-celery/getting-started/first-steps-with-django.html)中的 Django Celery ：

```
from celery.decorators import task

@task()
def add(x, y):
   return x + y 
```

我不知道这是否是要走的路，如果有人能阐明这个问题，我会很高兴。

---**编辑**

我成功地使用 AMQP 进行了简单的字符串传输：

## 测试.py

```
 import pika
 connection = pika.BlockingConnection(pika.ConnectionParameters(
    host='localhost'))
 channel = connection.channel()

 channel.queue_declare(queue='task_queue', durable=True)

 print ' [*] Waiting for messages. To exit press CTRL+C'

 def callback(ch, method, props, body):
     print " [x] Received %r" % (body,)
     response = body + " MODIFIED"
     #response = get_a_concept()
     print " [x] Done"
     ch.basic_publish(exchange='',
                 routing_key=props.reply_to,
                 properties=pika.BasicProperties(correlation_id = \
                                                 props.correlation_id),
                 body=str(response))
     ch.basic_ack(delivery_tag = method.delivery_tag)

channel.basic_qos(prefetch_count=1)
channel.basic_consume(callback,
                  queue='task_queue')

channel.start_consuming() 
```

## 应用程序.js

```
 var connection = amqp.createConnection({ host: 'localhost' });
 connection.addListener('ready', function() {

var exchange = connection.exchange('', {
    'type' : 'direct',
    durable : false
}, function() {

    var queue = connection.queue('incoming', {
        durable : false,
        exclusive : true }, function() {
        queue.subscribe(function(msg) {
            console.log("received message: ");
            console.log(msg.data.toString());
        });

    });

    exchange.publish('task_queue', "it works!", {
        'replyTo' : 'incoming'
    });
}); 
```

});

* * *

不过，我不确定这是否是最好的实现，我什至没有在这里使用 queue.bind() 方法。当我尝试传递一个复杂的对象（json 甚至是一个简单的数组）时，就会出现问题。更改此行

```
 body= (["a","b","c"])#str(response)) 
```

导致以下错误：

```
 Traceback (most recent call last):
   File "test.py", line 56, in <module>
     channel.start_consuming()
   File "/Library/Python/2.7/site-packages/pika/adapters/blocking_connection.py", line 293, in      start_consuming
 (...)
   File "/Library/Python/2.7/site-packages/pika/simplebuffer.py", line 62, in write
     self.buf.write(data)
 TypeError: must be string or read-only character buffer, not list 
```

有没有序列化复杂对象的解决方案？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:09:31.040

正文必须是字节数组！

你必须二进制序列化你的对象。但是 nods.jss 和 pythons 可能不兼容。

python: [pickle](http://docs.python.org/library/pickle.html) node.js:[背包](https://github.com/mjor/rucksack)...

一个快速的解决方法可能是将您的数组加入到这样的字符串中：

**测试.py**

```
...
body = ';'.join(["a","b","c"]) # which will result in this string 'a;b;c'
... 
```

并在您的**app.js**中将该字符串拆分为一个数组。

```
...
result = stringResult.split(';'); //stringResult is 'a;b;c'
... 
```

**另一种选择**可能是在 node.js 中使用[“异步”执行该异步任务](https://github.com/caolan/async)

# asp.net-mvc-3 - MVC3 - 获取实际页面路径而不是路由

> ID：10304678
> 
> 赞同：1
> 
> 时间：2012-04-24T19:26:50.950
> 
> 标签：asp.net-mvc-3, routing

我有一条路线

```
http://www.domain.com/Test/12345678 
```

这指向

```
http://www.domian.com/SomeArea/SomeController/SomeAction?customerId=12345678 
```

*   Request.RawUrl 给出的路径为[http://www.domain.com/Test/12345678](http://www.domain.com/Test/12345678)
*   Request.Url.AbsolutePath 给出的路径为 /Test/12345678
*   Request.Url.LocalPath 给出的路径为 /Test/12345678
*   Request.Url.AbsoluteUri 给出的路径为[http://www.domain.com/Test/12345678](http://www.domain.com/Test/12345678)

那么，我如何获得当前显示为的实际页面路径：

```
/SomeArea/SomeController/SomeAction 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:29:59.483

我想你想要`Url.RouteUrl`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T15:06:45.237

我认为[Request.FilePath](http://msdn.microsoft.com/en-us/library/system.web.httprequest.filepath.aspx)是您正在寻找的。

如果你想要[PathInfo](http://msdn.microsoft.com/en-us/library/system.web.httprequest.pathinfo.aspx)预告片，你可以使用[Request.Path](http://msdn.microsoft.com/en-us/library/system.web.httprequest.path.aspx)

# java - stringByEvaluatingJavascriptFromString （iOS 方法，Android 等效项是什么？）

> ID：10304680
> 
> 赞同：15
> 
> 时间：2012-04-24T19:27:00.010
> 
> 标签：java, php, android, ios

在 iOS 应用程序中，我使用了

```
stringFromJavaScript = [webView stringByEvaluatingJavascriptFromString:@"document.getElementById(\"image\").getAttribute(\"src")"]; 
```

获取 webView 上显示的图像的 src 目录。我想为 Android 做同样的事情。我有哪些选择？

基本上，目的是捕获路径，以便我可以通过电子邮件发送同一张图片......

IE。

```
"picture.php?image=%@",stringFromJavascript 
```

这样，当用户单击链接或将其发布到 Facebook 等时，将加载相同的图像。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-27T11:08:45.173

是的，我在 Android 中非常想念这个方法；）

要执行 JavaScript 并获得响应，您可以执行以下操作：

1.  在代码中定义 JavaScript 回调接口：

    ```
    class MyJavaScriptInterface {
        @JavascriptInterface
        public void someCallback(String jsResult) {
             // your code...
        }
    } 
    ```

2.  将此回调附加到您的 WebView

    ```
    MyJavaScriptInterface javaInterface = new MyJavaScriptInterface();
    yourWebView.addJavascriptInterface(javaInterface, "HTMLOUT"); 
    ```

3.  `window.HTMLOUT.someCallback`从脚本运行 JavaScript 调用：

    ```
    yourWebView.loadUrl("javascript:( function () { var resultSrc = document.getElementById(\"image\").getAttribute(\"src\"); window.HTMLOUT.someCallback(resultSrc); } ) ()"); 
    ```

希望这可以帮助！

# weblogic - 在 WebLogic 集群环境中设置 WebSphere MQ 集成

> ID：10304683
> 
> 赞同：2
> 
> 时间：2012-04-24T19:27:04.717
> 
> 标签：weblogic, cluster-computing, ibm-mq

我有一个 WebLogic 集群启动并运行一个包含 MDB 的应用程序。我目前正在使用 WebLogic JMS 队列向 MDB 发送消息。一切都很好。

我现在需要切换到 IBM WebSphere MQ 来处理我的 JMS 消息传递。

我可以使用带有绑定文件的外部服务器进行设置并在非集群环境（管理服务器）中发送/接收消息。但是，我似乎无法正确配置集群环境以使 MQ 集成正常工作。

在集群上部署 EAR/MDB 时，我得到以下信息：

```
The Message-Driven EJB: xxxMDB is unable to connect to the JMS destination...
javax.naming.NameNotFoundException: Unable to resolve 'jms.xxxQueue' 
```

谁能指出一些关于如何在 WebLogic 集群中配置 IBM WebSphere MQ 的文档？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:35:15.623

需要在 weblogic 的 PATH 中添加几个 MQ JMS 类，以便它能够连接到 MQ 需要添加的路径是：*MQ_system_path*/java/lib64 旁边是我发现的类制作这个东西需要：com.ibm.mq.mqi.jar；com.ibm.mq.headers.jar；com.ibm.mq.jar；公共服务.jar；com.ibm.mq.jms.jar;jta.jar;

这帮助我们将 weblogic 连接到 MQ

问候

奥伦耶格尔

# state - 自循环，确定性或非确定性状态机的两个输入？

> ID：10304686
> 
> 赞同：2
> 
> 时间：2012-04-24T19:27:11.337
> 
> 标签：state, finite-automata, deterministic, non-deterministic, automaton

维基百科指出，确定性状态自动化“为每个输入字符串生成自动机的唯一计算（或运行）”。

我一直理解这一点，因为只有 1 种可能的路径来计算任何唯一的字符串。在这种情况下，以下是 DSM。

但是现在我想多了，并将描述解释为每个输入字符串都有一个可能的路径，并且该路径与所有其他输入字符串都是唯一的。在这种情况下，以下不是 DSM，因为“11”和“12”遵循相同的路径。

所以我的问题是，以下是 DSM 还是 NDSM？

![在此处输入图像描述](../Images/21c69d9835e46cc1893a120e521945d5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:58:29.323

它仍然是确定性的，每个状态的每个输入只有一个可能的路径。1和2只能回到自己，因为它是不确定的，输入应该有多个可能的路径。例如，如果输入 1 具有从一个特定状态分支出来的两种可能状态。

简而言之，如果特定输入没有分支路径，并且图中没有[ε-边](http://en.wikipedia.org/wiki/Nondeterministic_finite_automaton_with_%CE%B5-moves)，则它应该是确定性的。即没有分支路径，我们可以确定它的去向。您在上面绘制的那个我们总是可以确定特定输入的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-02T11:38:46.867

它肯定是一个确定性有限自动机，因为它为任何状态定义的每一步都有独特的路径。

如果我们向这个自动机输入 1，那么从初始状态到最终状态，只有一个为 1 定义的**唯一移动。**到达最终状态后，我们不关心输入是 1 还是 2。如果为任何状态定义了多个移动，它将是非确定性有限自动机。

# iphone - 如何根据重复的每周营业时间来判断商店是否营业？

> ID：10304690
> 
> 赞同：0
> 
> 时间：2012-04-24T19:27:51.740
> 
> 标签：iphone, ios, nsdate

我有一个 iPhone 应用程序，它显示本地商店营业时间的信息，以及它们在当前时间是否开放。我目前在 plist 中按如下方式存储数据：

```
<dict>
    <key>sunday</key>
    <string>11:00-13:00</string>
    <key>monday</key>
    <string>11:00-18:00</string>
    <key>tuesday</key>
    <string>09:00-23:00</string>
    <key>wednesday</key>
    <string>12:00-24:00</string>
    <key>thursday</key>
    <string>13:00-04:00</string>
</dict> 
```

如图所示，我使用的是 24 小时制。此外，有些日子会一直营业到第二天，因此周四凌晨 4:00 关闭意味着它实际上在周五凌晨 4 点关闭。

确定所选商店是开店还是关店的最有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:51:51.813

保持开放日期为“0-11:00-open”、0-13:00-closed”、“1-11:00-open”、“1-18:00-closed”等。对列表进行排序。查找列表中的当前日期/时间。检查相邻条目以查看是否打开或关闭。

如果您希望进行更简单/更快的数字排序/比较，可以将字符串简化为简单数字（例如，011000、012001...）。

您必须在午夜（从 2359 切换到 0000（不要使用 2400）时切换日期 #）以及周六和周日之间小心一点。

当然，做一个“健全性检查”总是明智的——检查交替打开和关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:34:42.050

您最好将时间存储为 NSDates 而不是字符串。然后你只需要做`NSDate *now = [NSDate date]`并说类似的话：`if (now > openTime && now < close time){store.open = YES} else {store.open = NO};`

查看[Apple 的日期和时间编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/DatesAndTimes.html)。

# java - 这个 instanceof 条件应该是什么样子？

> ID：10304694
> 
> 赞同：0
> 
> 时间：2012-04-24T19:28:10.903
> 
> 标签：java

我有一个节点列表。这个节点是我自己定义的一个数据类。每个节点都有一个 Object 类型的数据字段。现在我想在数据字段中具有参数对象的节点列表中找到该节点。我写了这个方法，因为我想首先比较两个对象（参数和数据字段中的对象）是否属于同一类型：

```
public Node getnNodeByData(Object obj) {
    for (Node node : nodes) {
        if (node.getData() instanceof obj.getClass()) {

        }
    }
} 
```

不幸的是，这种情况不起作用：

```
Incompatible operand types boolean and Class<capture#1-of ? extends Graph> 
```

我真的不知道为什么这是一个问题。我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T19:32:20.290

不，您需要使用[`Class.isInstance(Object)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isInstance%28java.lang.Object%29). `instanceof`关键字不期望类型的对象，`Class`而只是直接类的名称——但`Class.isInstance`基本上是类似的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T19:29:49.697

不，那是不可能的。您应该使用[`isAssignableFrom()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html#isAssignableFrom%28java.lang.Class%29)或[`isInstance()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isInstance%28java.lang.Object%29)。这两种方法之间的区别在于`isInstance(null)`将返回 false 并返回`isAssignableFrom(null)`true。

* * *

```
[object] instanceof [class] 
```

应该翻译成这样：

```
[class].class.isAssignableFrom(object.getClass()); 
```

例子：

```
Integer i = 4;
boolean b = i instanceof Number;
boolean k = Number.class.isAssignableFrom(i.getClass()); 
```

b 和 k 是等价的。

# python - 在windows上安装shoutpy / Boost.python

> ID：10304695
> 
> 赞同：1
> 
> 时间：2012-04-24T19:28:14.207
> 
> 标签：python, boost, windows-7, mingw

我试图在 windows 上的 python 2.7 x86 下安装 ShoutPY (http://dingoskidneys.com/shoutpy/) 但安装失败：

```
C:\Python27\Scripts>easy_install shoutpy
Searching for shoutpy
Reading http://pypi.python.org/simple/shoutpy/
Reading http://dingoskidneys.com/shoutpy/
Best match: shoutpy 1.0.0
Downloading http://dingoskidneys.com/shoutpy/shoutpy-1.0.0.tar.gz
Processing shoutpy-1.0.0.tar.gz
Writing c:\users\vladim~1\appdata\local\temp\easy_install-pnwegl\shoutpy-1.0.0\s
etup.cfg
Running shoutpy-1.0.0\setup.py -q bdist_egg --dist-dir c:\users\vladim~1\appdata
\local\temp\easy_install-pnwegl\shoutpy-1.0.0\egg-dist-tmp-otdtxq
shoutpy.cc:26:28: fatal error: boost/python.hpp: No such file or directory
compilation terminated.
error: Setup script exited with error: command 'gcc' failed with exit status 1 
```

我发现我缺少 Boost.python。试图找到如何安装它但失败了，有人可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:32:39.543

我猜你不是在 Cygwin 下运行这个，所以你有几个挑战。你安装了`gcc`吗？它是您的安装所必需的。您还需要安装 Boost，正如 Bart 在评论中所说，最好的办法是查看他们的[构建/安装文档](http://www.boost.org/doc/libs/1_49_0/libs/python/doc/building.html)。

# asp.net-mvc - ASP.NET MVC 应用程序中的“品牌”测试指南

> ID：10304697
> 
> 赞同：0
> 
> 时间：2012-04-24T19:28:42.257
> 
> 标签：asp.net-mvc, visual-studio, unit-testing, version-control

我正在开发一个 ASP.NET MVC3 网站，作为一个平台，它本身就可以很好地工作——但它是为第 3 方打造品牌/品牌的。

对于第 3 方，重要的是我将品牌相关的资产和代码隔离在源代码控制中，这样它们就不会干扰其他品牌的资产或主平台代码的资产。同样重要的是，我需要进行单元测试来证明网站的品牌版本正在返回适当的品牌视图等。

从表面上看，我似乎需要一个 Visual Studio 解决方案文件来包含 ASP.NET MVC 主站点平台的项目。然后，我需要为每个品牌提供一个单独的 VS 解决方案（包含附属程序集、自定义视图等）。每个品牌的 VS 解决方案将包含一个测试品牌结果的单元测试项目。

但是，我不希望品牌的 VS 解决方案文件包含对主平台站点项目的引用（VS 项目文件应该完全属于一个 VS 解决方案！）。这意味着品牌 ASP.NET MVC 项目文件必须对主要 VS 解决方案的构建输出具有二进制依赖关系。也许我需要一个内部 Nuget 服务器来帮助解决这个问题。

任何人都可以分享有关品牌项目/资产的整体解决方案/项目/文件夹结构的指导，以便主 MVC 站点可以仅集成为 Nuget 包吗？简而言之，品牌材料将依赖于主平台，而不是相反。

ps 如果有人争论为什么所有第 3 方的所有品牌材料确实应该与主平台代码使用相同的解决方案 - 我也会听。

# ruby-on-rails - 在 Rails 应用程序之外以正确的顺序加载 ActiveRecord 模型

> ID：10304700
> 
> 赞同：0
> 
> 时间：2012-04-24T19:28:54.690
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, sti

如何在 rails 应用程序之外以正确的顺序加载/要求我的 activerecord 模型。我有许多 STI 模型，但我得到一个未初始化的常量异常。

```
$:.push File.expand_path("../../../app/models", __FILE__)
require "active_record"

Dir["#{File.expand_path('../../../app/models', __FILE__)}/*.rb"].each do |path|
  require "#{File.basename(path, '.rb')}"
end 
```

我有很多工作需要使用 resque 运行，我不想每次都加载我的 rails 应用程序并部署到所有工作机器

编辑：还有一点要澄清。有两个项目一个 Rails 项目和一个包含我的模型的 Rails 引擎项目。我不使用我的 resque 作业加载 rails 引擎本身，我只是在一个单独的类中使用上面的代码片段来加载模型上的活动记录。这一直有效，直到我添加了一些 STI 模型，由于命名导致子项尝试在父项之前加载。rails 引擎项目在 rails 项目中加载得很好，没有问题，这只是因为我试图在 rails 项目之外使用活动记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-27T19:24:36.960

A very simple solution if you don't want to autoload is to require the base class in the children classes. Explicitly requiring dependencies is a good thing. :)

**app/models/profile.rb**

```
class Profile < ActiveRecord::Base
end 
```

**app/models/student.rb**

```
require 'models/profile'

class Student < Profile
end 
```

**app/models/teacher.rb**

```
require 'models/profile'

class Teacher < Profile
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T20:21:22.750

模型将在首次提及时自动加载。因此，只需以适当的顺序将它们命名为某个地方（例如，在 中`config/initializers/load_order.rb`）：

```
Product
LineItem
Cart 
```

并检查它是否有帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-25T15:51:36.827

我解决了我的问题。可能有更好的方法，但这对我有用。

```
basedir = File.expand_path('../../../app/models', __FILE__) 
Dir["#{basedir}/*.rb"].each do |path|
  name = "#{File.basename(path, '.rb')}"
  autoload name.classify.to_sym, "#{basedir}/#{name}"
end 
```

# silverlight - 在 silverlight 的弹出窗口中打开一个 xaml 文件

> ID：10304703
> 
> 赞同：0
> 
> 时间：2012-04-24T19:29:06.883
> 
> 标签：silverlight, xaml, silverlight-4.0

我需要在 silverlight 的弹出窗口中打开一个 xaml 文件。在我的情况下，我有两个 xaml 文件，即 a.axml 和 b.axml。在 a.xaml 中，有一个超链接按钮和一个弹出标签。在单击 a.xaml 页面的超链接时，我必须在该弹出窗口中打开 b.xaml 页面。

这是我的场景。请帮我解决这个问题。

谢谢，

氖

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T23:07:29.070

您应该能够将[弹出窗口的 Child 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup.child%28v=vs.95%29.aspx)设置为 b.xaml 类的新实例（无论是什么）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:29:54.303

父页面 XAML：

```
 <HyperlinkButton Content="HyperlinkButton" Height="23"          HorizontalAlignment="Left"          Margin="150,111,0,0" Name="hyperlinkButton1" VerticalAlignment="Top" Width="100" Click="hyperlinkButton1_Click" /> 
```

代码背后：

```
 public ParentPage()
    {
        InitializeComponent();
    }

    private void hyperlinkButton1_Click(object sender, RoutedEventArgs e)
    {
        ChildPage objpage = new ChildPage();
        objpage.Show();
    } 
```

Here Is Pararent Page 有按钮。子页面加载基于那个按钮点击

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:11:42.633

使用 Telerik 控件变得越来越容易。但是你可以使用第二种方法。在 Blend 我更改了 Telerik 子窗口的模板。现在好像好多了

![在此处输入图像描述](../Images/f6bfce4134f6ad0d50626f8709729fc9.png)

```
 HyperlinkButton link = new HyperlinkButton();
        link.Click += (s, a) =>
            {
                //With telerik
                RadWindow w = new RadWindow();
                w.Content=new UserControl();
                w.Show();
                w.ShowDialog();//Swith light and avoid access oter controls                                          

                //Without Telerik
                Popup p = new Popup();
                p.Child = w.Content as UserControl;
                p.IsOpen = true;

            }; 
```

# magic-numbers - 什么时候数字不是魔术？

> ID：10304704
> 
> 赞同：2
> 
> 时间：2012-04-24T19:29:07.087
> 
> 标签：magic-numbers

我有这样的功能：

```
float_as_thousands_str_with_precision(value, precision) 
```

如果我这样使用它：

```
float_as_thousands_str_with_precision(volts, 1)
float_as_thousands_str_with_precision(amps, 2)
float_as_thousands_str_with_precision(watts, 2) 
```

那些 1/2s 是神奇的数字吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T19:38:01.673

是的，它们是神奇的数字。很明显，数字 1 和 2 在代码示例中指定了精度，但没有说明原因。为什么此时需要安培和瓦特比伏特更精确？

此外，避免幻数可以让您集中代码更改，而不是在需要更改精度时为文字数字 2 搜索代码。

我会提出类似的建议：

```
HIGH_PRECISION = 3;
MED_PRECISION = 2;
LOW_PRECISION = 1; 
```

您的客户端代码如下所示：

```
float_as_thousands_str_with_precision(volts, LOW_PRECISION )
float_as_thousands_str_with_precision(amps, MED_PRECISION )
float_as_thousands_str_with_precision(watts, MED_PRECISION ) 
```

然后，如果将来您执行以下操作：

```
HIGH_PRECISION = 6;
MED_PRECISION = 4;
LOW_PRECISION = 2; 
```

你所做的就是改变常数......

**但是要尝试回答 OP 标题中的问题：**

IMO 在迭代、测试长度和大小以及许多数学运算中使用时，唯一可以真正使用且不被视为“魔术”的数字是 -1、0 和 1。使用常量实际上会混淆代码的一些示例：

```
for (int i=0; i<someCollection.Length; i++) {...}

if (someCollection.Length == 0) {...}

if (someCollection.Length < 1) {...}

int MyRidiculousSignReversalFunction(int i) {return i * -1;} 
```

这些都是非常明显的例子。例如开始和第一个元素并递增一个，测试一个集合是否为空并签名反转......荒谬但作为一个例子。现在用 2 替换所有 -1、0 和 1 值：

```
for (int i=2; i<50; i+=2) {...}

if (someCollection.Length == 2) {...}

if (someCollection.Length < 2) {...}

int MyRidiculousDoublinglFunction(int i) {return i * 2;} 
```

现在你开始问自己：为什么我要在第 3 个元素上开始迭代并检查其他元素？数字 50 有什么特别之处？包含两个元素的集合有什么特别之处？doubler 示例在这里实际上是有意义的，但您可以看到非 -1、0、1 值 2 和 50 立即变得神奇，因为它们所做的事情显然有些特殊，我们不知道为什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:31:27.513

不，他们不是。

在这种情况下，一个神奇的数字将是一个具有无法解释的含义的数字。在您的情况下，它指定了清晰可见的精度。

一个神奇的数字是这样的：

```
int calculateFoo(int input)
{
  return 0x3557 * input;
} 
```

您应该知道“幻数”这个短语有多种含义。在这种情况下，它在源代码中指定了一个数字，周围环境无法解释。还有其他使用该短语的情况，例如在文件头中，将其标识为某种类型的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T22:08:39.150

在以下情况下，文字数字不是幻数：

*   它被使用一次，在一个地方，基于其上下文的非常明确的目的
*   它以如此普遍的频率和如此有限的上下文使用，以至于被广泛接受为不是魔法（例如，人们经常接受的循环中的+1或-1不是魔法）。
*   有些人接受零偏移的 +1 不是魔术。我不。当我看到 variable + 1 时，我仍然想知道为什么，ZERO_OFFSET 不会弄错。

至于示例场景：

float_as_thousands_str_with_precision（伏特，1）

并且提议

float_as_thousands_str_with_precision（伏特，HIGH_PRECISION）

如果为同一目的重复使用电压为 1 的函数，则 1 很神奇。那么可以肯定，它是“魔术”，但不是因为含义不清楚，而是因为您只是多次出现。

保罗的回答集中在“无法解释的含义”部分，认为 HIGH_PRECISION = 3 解释了目的。IMO，HIGH_PRECISION 没有提供比 PRECISION_THREE 或 THREE 或 3 更多的解释或价值。当然 3 高于 1，但它仍然没有解释为什么需要更高的精度，或者为什么会有精度差异。这些数字提供了与建议的标签一样多的意图和清晰度。

为什么首先需要不同的精度？作为一名工程人员，我可以假设有三个可能的原因：（a）测量本身仅对 X 精度有效，因此显示应该反映这一点，或者（b）只有足够的显示空间用于 X精度，或者 (c) 观众不会关心高于 X 精度的任何东西，即使它可用。

这些是难以在固定标签中捕捉到的复杂原因，并且可能通过评论更好地服务（解释为什么会做某事）。

如果这些功能的使用在一个地方，而且只在一个地方，我不会认为数字有魔法。意图很明确。

以供参考：

字面数字很神奇

*   "Unique values with unexplained meaning or multiple occurrences which could (preferably) be replaced with named constants." [http://en.wikipedia.org/wiki/Magic_number_%28programming%29](http://en.wikipedia.org/wiki/Magic_number_%28programming%29) (3rd bullet)

# mvvm - 将信息从父视图模型传递到子视图模型的正确 MVVM 方式

> ID：10304707
> 
> 赞同：2
> 
> 时间：2012-04-24T19:29:15.740
> 
> 标签：mvvm

我正在使用 WPF 开始一个新的 MVVM 项目，这两个我都不熟悉，并且想确保我使用的是正确的 MVVM 方法。

我有以下内容：

*   我有一个包含自己的 ViewModel 和 TabControl 的主用户控件
*   每个选项卡都包含一个单独的用户控件和他们自己的 ViewModel
*   创建 MasterViewModel 时，它的一个属性被设置（我们称之为 MasterId）
*   我需要将 MasterId 属性更改从主视图模型传播到子视图模型

我想知道实现这个简单场景的最简单/最好/正确的 MVVM 方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:45:06.383

当涉及到`TabControl`s 等时，我倾向于将子视图模型放在`MasterViewModel`

```
 public ObservableCollection<ViewModelBase> Tabs { get; private set; } 
```

当您的 ID 被设置或您的子视图模型被创建时，您可以在它们上设置属性

```
public int MasterId
{
    get { return _masterId; }
    set { _masterId = value;
          foreach(var vm in Tabs)
             vm.MasterId = value; 
          NotifyPropertyChanged("MasterId");  
        }
} 
```

# ruby-on-rails - 未知验证器：在 Rails 中验证日期时出现“BeforeValidator”

> ID：10304710
> 
> 赞同：1
> 
> 时间：2012-04-24T19:29:34.050
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, devise

我在 User.rb 模型中添加了一个验证器，以在创建设计用户之前验证给定的生日是否超过 18 岁。

这是我的验证。

```
# user.rb
validates :birthdate, :before => lambda { 18.years.ago }, :before_message => "must be at least 18 years old" 
```

用户架构内部

```
# User schema
t.date     "birthdate" 
```

问题是我在尝试保存对象时收到以下错误。

```
ArgumentError in Devise::RegistrationsController#create

Unknown validator: 'BeforeValidator' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:47:07.590

`Unknown validator: 'BeforeValidator'`意味着你高估了魔法:)

尝试这个：

```
validate do |user|
  if user.birthdate > 18.years.ago
    errors.add(:birthdate, "must be at least 18 years old")
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T22:25:45.833

`:before`不是ActiveRecord的实际默认[验证器。](http://guides.rubyonrails.org/active_record_validations_callbacks.html#validation-helpers)当 validates 发现任何它不知道的验证器名称时，它会使用其名称搜索一个自定义验证器（在本例中为 BeforeValidation）

所有验证都是在实际对象自然存储之前进行的，您不必像指出的那样制作自己的验证器。ActiveRecord 已经提供了一个：[`:numericality`](http://guides.rubyonrails.org/active_record_validations_callbacks.html#numericality)

```
validates :birthdate, :numericality => { :greater_than => 18 , :message => "must be at least %{count} years old" } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T21:55:33.543

你也可以试试：

```
before_validation :validade_birth_date

private

def validade_birth_date
    if (birthdate != nil)
      errors.add(:birthdate, "must be at least 18 years old") unless (birthdate < DateTime.now)
    end
end 
```

# python - Python：创建登录系统

> ID：10304712
> 
> 赞同：7
> 
> 时间：2012-04-24T19:29:42.757
> 
> 标签：python, login

我想使用python创建一个登录系统。

这是我正在做的一个小项目，以便我可以掌握`python`并最终将其发送给`webpage`我正在创建的项目。

截至目前，我有这个：

```
user = raw_input('Create Username: ')
password = raw_input('Create Password: ')
store_user =[roger, Jon]
store_pass =[tennis, soccer]

store_user.append(user)
store_pass.append(password)

if user in store_user:
    print "That user already exsist"

while 1 == 1:
    userguess=""
    passwordguess=""
    key=""
    while (userguess != user) or (passwordguess != password):
        userguess = raw_input('User Name: ')
        passwordguess = raw_input('Password:')

    print "Welcome,",user, ". Type Lock to Lock or Type Create to create another user."
    print store_user
    print store_pass

    while key != "lock":
        key = raw_input("") 
```

这使您可以创建用户名和密码并将它们存储在列表中。我加入了 if 语句来检查列表以查看用户是否已经存在（但我认为这不起作用）

我只是想要一些关于如何让整个事情循环的指导：例如，您选择是否登录，登录后您可以选择创建另一个，它会检查该用户是否已经存在。

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T20:11:36.340

让我们一步一步来：

首先，检查用户是否存在总是会告诉你它确实存在，因为你正在添加用户，**然后**检查它是否存在。所以你写的 if 语句是可以的，但是把它放在`store_user.append`:

```
if user in store_user:
    print "That user already exsist"
else:
    store_user.append(user)
    store_pass.append(password) 
```

其次，您编写的条件`while 1 == 1:`是无用的（但仍然正确），您可以这样做`while 1`（因为 1 评估为 True）甚至更好`while True:`。

第三，用户名/密码检查只检查最后一个用户和密码。如果您使用`userguess in store_user`和相同的密码，您将不会得到预期的结果。因此，您需要使用字典而不是列表。使用这些，您可以将**key**分配给**value**。在您的情况下，用户需要密码，因此您将拥有：

```
store = dict()
# the code to get the user/password
store[user] = password # you "save" the value password for the key user

# then to check:
while not (userguess in store and store[userguess] == passwordguess):
   # try again 
```

阅读有关词典的更多信息。

然后，您可以将每个“逻辑”过程存储在一个函数中，以使您的代码更具可读性和可重用性。例如：

```
def add_user(store):
    user = raw_input('Create Username: ')
    password = raw_input('Create Password: ')
    if user in store:
        print "That user already exsist"
        return False
    else:
        store[user] = password
        return True

# and call this 10 times for example...
global_store = dict()
for i in range(10):
    add_user(global_store) 
```

（更不用说使用类等）对检查密码部分执行相同的操作，然后您可以使用您所做的循环进行一些更改来执行您期望的操作...

我希望我很清楚，并且我有所帮助:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T07:45:39.267

这可能不是您所期望的答案，但它就是这样：不要重新发明轮子。

尽可能使用现有工具，并专注于您无法免费获得的功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T19:49:34.757

这是一个好的开始。我建议您查看：[http](http://www.greenteapress.com/thinkpython/) ://www.greenteapress.com/thinkpython/ ，使用像字典这样的数据结构将大大简化这项任务。

要查看某个项目是否已经在列表中，您可以遍历它；

```
for item in list:
    if input == item:
        # item is in list
        break
    # item is not in list 
```

一种可能也有帮助的策略是将代码模块化为函数。例如，您可以有一个 check_name 函数，如果用户已注册，则返回 True：

```
def check_user(user, user_list):
    for item in list:
        if user == item:
            return True
            break
        return False 
```

还有一些更短的方法可以做到这一点，例如：[Python：检查值是否在列表中，无论 CaSE](https://stackoverflow.com/questions/5371935/python-check-if-value-is-in-a-list-no-matter-the-case)

当你最终在网上为你的项目提供服务时，看看像 Django 或 Flask 这样的框架，它们极大地简化了登录、管理用户等事情。祝你好运。

# facebook - Facebook的应用程序级身份验证令牌？

> ID：10304714
> 
> 赞同：0
> 
> 时间：2012-04-24T19:29:49.587
> 
> 标签：facebook, token, authentication, access-token

所以我有一个需要访问公共信息的应用程序，但需要一个身份验证令牌。具体来说，我想从公共页面获取评论，这需要访问令牌。理想情况下，我想要某种“全局”身份验证令牌，因为我不想访问任何不公开的东西。有没有办法获得应用级别的身份验证令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:44:06.437

是的，您可以作为应用程序进行身份验证，而不是使用用户。

[http://developers.facebook.com/docs/authentication/applications/](http://developers.facebook.com/docs/authentication/applications/)

# windows-8 - Metro 风格的原生应用程序可以在 Windows 8 应用商店中为不同的 CPU 使用相同的名称吗？

> ID：10304718
> 
> 赞同：0
> 
> 时间：2012-04-24T19:30:02.967
> 
> 标签：windows-8, microsoft-metro, native-code

假设我正在使用本机（非托管）c++ 编程并希望将我的应用程序编译为 x86、x64 和 ARM：

1.  如何将我的应用程序发布到 Windows 8 应用商店以支持所有三种 CPU 架构？
2.  我可以发布 3 个同名但 CPU 架构不同的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:38:00.643

创建应用程序包时，您可以选择要支持的 CPU 类型。

![在此处输入图像描述](../Images/f28f29cd6f3629c2460289a2ff055a4f.png)

# mysql - MySQL 数据库引擎：MyISAM 用于 information_schema，而 InnoDB 用于其他数据库

> ID：10304719
> 
> 赞同：8
> 
> 时间：2012-04-24T19:30:14.543
> 
> 标签：mysql, innodb, myisam, information-schema

我目前正在对 MySQL 中的所有数据库使用 InnoDB，但是我刚刚注意到我的 information_schema 数据库将 MyISAM 用于不是 MEMORY 的表。

我正在调查 InnoDB/MyISAM 问题。虽然我不认为这是它的原因，但我担心这种混合。该数据库最初是使用 MyISAM 建立的。后来更新了 my.cnf 文件以将引擎重置为 InnoDB。我正在使用 MySQL 5.5.10。

**将 information_schema 数据库设置为 MyISAM，但将所有其他数据库设置为 MySQL，可能会出现哪些问题？**

* * *

**对于寻求帮助的人：** 如果您在寻找答案时遇到此问题或想了解更多信息，请查看您的默认数据库引擎：

```
show variables; 
```

要查看分配给数据库中表的引擎：

```
show table status; 
```

我的 my.cnf 设置：

```
[client]
default-character-set=utf8

[mysqld]
log=/usr/local/var/mysql/mysqld.log
character-set-server = utf8
collation-server = utf8_general_ci
lower_case_table_names=2
default_storage_engine=InnoDB

# Performance hacks:
innodb_flush_method=nosync
innodb_flush_log_at_trx_commit=0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T20:06:04.677

使用的存储引擎是基于每个表的。创建新表时使用默认存储引擎，您无需为新表指定存储引擎。

无论您将默认存储引擎设置为什么，系统表都将是 MyISAM。

来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/converting-tables-to-innodb.html)：

> 重要的
> 
> 不要将mysql数据库中的MySQL系统表（如user或host）转换为InnoDB类型。这是不受支持的操作。系统表必须始终是 MyISAM 类型。

如果您不直接查询 information_schema 表，则无需担心混合类型。

# javascript - 如何使用“jquery-mentions-input”对多个调用使用多个触发器

> ID：10304720
> 
> 赞同：1
> 
> 时间：2012-04-24T19:30:22.093
> 
> 标签：javascript, jquery, plugins, input, tags

我正在为我的 textarea 使用这个出色的插件[http://podio.github.com/jquery-mentions-input/](http://podio.github.com/jquery-mentions-input/)。我正在使用默认的“@”触发器从成员列表中提取，但是有什么方法可以在同一表单上使用“#”触发器从标签列表中提取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:35:30.333

在您发布的页面的配置部分，有**triggerChar**配置，您可以将其设置为“#”。

设置是初始化器的第二个参数，例如：

```
$("#myelement").mentionsInput(method, settings); 
```

目前没有办法接受多个数据源的多个触发器字符。这是你必须在他们的脚本中做的事情。我很确定他们会很高兴接受添加了该功能的拉取请求！

编辑 - 事实上，已经有一个拉请求：[https ://github.com/podio/jquery-mentions-input/pull/7](https://github.com/podio/jquery-mentions-input/pull/7)

# php - 在我的 php 页面中，我需要访问者的 facebook 信息.. 可能吗？

> ID：10304723
> 
> 赞同：-1
> 
> 时间：2012-04-24T19:30:35.510
> 
> 标签：php, facebook

我看到一些网站检测到我的 facebook 名称并提供一个赞按钮，这样我就可以访问我正在访问的页面。可以在php中完成吗？如果没有，那怎么办？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:33:08.107

Facebook offers widgets for that matter, you can copy paste the code from the Facebook developer site: [https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

To get a visitor's name, tou could use Facebook javascript API [https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/). You'll need to create an application and the user will need to authorize it before you're able to get any information. There are obvious security reasons why you can't get your visitor's name.

# c++ - 如何在所有派生类中调用重写方法

> ID：10304724
> 
> 赞同：5
> 
> 时间：2012-04-24T19:30:35.490
> 
> 标签：c++

> **可能重复：**
> [如何强制子相同的虚函数首先调用其父虚函数](https://stackoverflow.com/questions/5644338/how-to-force-child-same-virtual-function-call-its-parent-virtual-function-first)

我有一个类层次结构，其中每个派生类都覆盖给定的虚函数，并通过调用其父类中的虚函数来开始其实现。目标是执行每个派生实现，但我不喜欢我这样做的方式。

例如，我有这个类：

```
class base
{
public:
  void do_stuff() { do_something(); }
  virtual void do_something() { }
}; 
```

然后我在几个层次上派生这个类：

```
class derived_10:
  public derived_9 // which inherit from derived_8 and so on until derived_0
                   // which inherit from base
{
public:
  virtual void do_something()
  {
    // this will also call derived_8::do_something() and so on
    // until base::do_something()
    derived_9::do_something();

    // then, some stuff
  }
}; 
```

我正在寻找一种解决方案，以确保在调用 base::do_stuff() 时按顺序调用所有 derived_x::do_something() ，而不必期望派生类自己执行此操作。您是否知道获得这种行为的最佳方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:38:43.550

我之前已经问过一个非常相似的问题：[Calling overriden class methods as a chain in C++](https://stackoverflow.com/questions/8927648/calling-overriden-class-methods-as-a-chain-in-c)

我接受的答案指向您自己的解决方案。不过，我可以给你一个关于替代方案的想法。构造函数和析构函数在 C++ 中已经具有这种行为，您可能需要考虑重构代码，以便在构造或销毁属于层次结构中的类的对象期间完成工作。不过，我不确定您是否能够为此付出努力。另一方面，你永远不知道你能从一些模板元编程 + 一些预处理器魔法中得到什么。

# recursion - 如何使用递归合并按字母顺序排列的两个字符串

> ID：10304726
> 
> 赞同：0
> 
> 时间：2012-04-24T19:30:51.067
> 
> 标签：recursion, merge, lisp, common-lisp

我正在学习 Lisp。我已经实现了一个 Common Lisp 函数，它使用递归合并两个按字母顺序排列的字符串。这是我的代码，但它有问题，我没有弄明白。

```
(defun merge (F L)
    (if (null F)
        (if (null L)
            F         ; return f
            ( L ))    ; else return L
        ;else if
        (if (null L)
            F)        ; return F
    ;else if
    (if (string< (substring F 0 1) (substring L 0 1)
        (concat 'string (substring F 0 1) 
                        (merge (substring F 1 (length F)) L)))
    ( 
        (concat 'string (substring L 0 1) 
                        (merge F (substring L 1 (length L)) ))
    )))) 
```

编辑：我只是想合并两个字符串，例如输入是字符串`a = adf`和字符串`b = beg` ，结果或输出应该是`abdefg`。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T07:50:24.310

正如 Kaz 所示，使用`string<`是一种过度杀伤力，`char<`应改为使用。在每一步重新计算`length`会使该算法成为二次算法，因此应该避免。使用`sort`“伪造它”使其成为 O(n log n) 而不是 O(n)。一直使用`concatenate 'string`也可能会产生不必要的遍历的额外成本。

这是一个自然的递归解决方案：

```
(defun str-merge (F L)
  (labels ((g (a b)
             (cond
               ((null a)  b)
               ((null b)  a)
               ((char<  (car b)  (car a))
                  (cons  (car b)  (g a (cdr b))))
               (t (cons  (car a)  (g (cdr a) b))))))
    (coerce (g  (coerce F 'list) (coerce L 'list))
            'string))) 
```

但是，Common Lisp 没有[尾调用](http://en.wikipedia.org/wiki/Tail_call)优化保证，更不用说[尾递归模 cons](http://en.wikipedia.org/wiki/Tail_call#Tail_recursion_modulo_cons)优化保证*（即使后者[**早在 1974 年**](http://www.cs.indiana.edu/cgi-bin/techreports/TRNNN.cgi?trnum=TR19)就被描述，使用“Lisp 1.6`rplaca`和`rplacd`字段赋值运算符”）*。因此，我们必须将其手动编码为自上而下的输出列表构建循环：

```
(defun str-merge (F L &aux (s (list nil)) )     ; head sentinel
  (do ((p s                (cdr p))
       (a (coerce F 'list) (if q  a  (cdr a)))
       (b (coerce L 'list) (if q (cdr b)  b ))
       (q nil))
      ((or (null a) (null b))
         (if a (rplacd p a) (rplacd p b))
         (coerce (cdr s) 'string))              ;         FTW!
    (setq q  (char<  (car b)  (car a)))   ; the test result
    (if q
      (rplacd p (list (car b)))
      (rplacd p (list (car a)))))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T21:16:18.637

从您的评论来看，您似乎正在尝试使用`if`一系列条件（如`else if`其他一些语言中的一系列 s ）。为此，您可能需要[cond](http://www.cis.upenn.edu/~matuszek/LispText/lisp-cond.html)。

我将其替换`if`为`cond`并清除了其他一些错误，并且它起作用了。

```
(defun empty (s) (= (length s) 0))

(defun my-merge (F L)
  (cond 
   ((empty F)
    (if (empty L)
      F 
      L)) 
   ((empty L)
    F)
   (t
    (if (string< (subseq F 0 1) (subseq L 0 1))
      (concatenate 'string (subseq F 0 1) (my-merge (subseq F 1 (length F)) L)) 
      (concatenate 'string (subseq L 0 1) (my-merge F (subseq L 1 (length L)))))))) 
```

您的测试用例按照您的意愿出现：

```
* (my-merge "adf" "beg")

"abdefg" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T18:32:03.853

有很多很好的答案，那我为什么还要添加一个呢？好吧，下面的答案可能比这里的其他答案更有效。

```
(defun merge-strings (a b)
  (let* ((lena (length a))
         (lenb (length b))
         (len (+ lena lenb))
         (s (make-string len)))
    (labels
        ((safe-char< (x y)
           (if (and x y) (char< x y)
               (not (null x))))
         (choose-next (x y)
           (let ((ax (when (< x lena) (aref a x)))
                 (by (when (< y lenb) (aref b y)))
                 (xy (+ x y)))
             (cond
               ((= xy len) s)
               ((safe-char< ax by)
                (setf (aref s xy) ax)
                (choose-next (1+ x) y))
               (t
                (setf (aref s xy) by)
                (choose-next x (1+ y)))))))
      (choose-next 0 0))))

(merge-strings "adf" "beg") 
```

特别是在内存分配的意义上它更有效 - 它只分配足够的内存来写入结果字符串，从不强制任何东西（从列表到字符串或从数组到字符串等）它可能看起来不太漂亮，但这是因为它试图只做一次计算。

当然，这不是编写此函数的最有效方式，但绝对没有效率的编程不会让您走得太远。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-24T20:56:19.250

一种递归方式（根据评论修复 - 其他解决方案也可以获得 IF 形式）。

```
(defun merge-strings (a b)
  (concatenate 'string
               (merge-strings-under a b)))

(defun merge-strings-under (a b)
  (when (and
       (= (length a)
          (length b))
       (> (length a) 0))
    (append (if (string< (aref a 0) (aref b 0))
                (list (aref a 0) (aref b 0))
                (list (aref b 0) (aref a 0)))
            (merge-strings-under (subseq a 1)
                           (subseq b 1))))) 
```

* * *

这是一种迭代的方法。

```
(concatenate 'string 
    (loop for i across "adf" for j across "beg" nconc (list i j))) 
```

请注意，这些依赖于将字符串构建到字符列表中，然后对其进行向量化（字符串是字符向量）。

您还可以编写更 C 风格的方法...

```
(defun merge-strings-vector (a b)
  (let ((retstr (make-array (list (+
                                   (length a)
                                   (length b)))
                            :element-type 'character)))
    (labels ((merge-str (a b i)
               (when (and
                    (= (length a)
                       (length b))
                    (/= i (length a)))
                 (setf (aref retstr (* 2 i)) (aref a i))
                 (setf (aref retstr (1+ (* 2 i))) (aref b i))
                 (merge-str a b (1+ i)))))

      (merge-str a b 0)
      retstr))) 
```

请注意，这个 - 与其他 2 个不同 - 在函数中具有副作用。imo，它也更难以理解。

在 SBCL 56 上执行所有 3 个循环需要不同数量的循环；在我的大部分试验中，每个似乎都在 6K 到 11K 之间。我不确定为什么。

# scala - Scala：父类有没有办法访问仅由子类定义的方法？

> ID：10304728
> 
> 赞同：5
> 
> 时间：2012-04-24T19:30:53.177
> 
> 标签：scala, case-class, self-type

我有两个从抽象基类继承的案例类。我想在抽象基类上定义一些方法，这些方法使用继承案例类上的复制方法（因此返回子类的实例。）有没有办法使用自我类型来做到这一点？

示例代码：

```
abstract class BaseClass(a: String, b: Int) {
  this: case class => //not legal, but I'm looking for something similar

  def doubleB(newB: Int) = this.copy(b = b * 2) //doesn't work because BaseClass has no copy
}

case class HasC(a: String, b: Int, c: Boolean) extends BaseClass(a, b) {
  def doesStuffWithC(newC: Boolean) = {
    ...
  }
}

case class HasD(a: String, b: Int, D: Double) extends BaseClass(a, b) {
  def doesStuffWithD(newD: Double) = {
    ...
  }
} 
```

由于这个问题，我已经弄清楚了如何获得我想要的结果： [How to use Scala's this typing, abstract types, etc. to implement a Self type?](https://stackoverflow.com/questions/4313139/how-to-use-scalas-this-typing-abstract-types-etc-to-implement-a-self-type) 但它涉及向 BaseClass 添加一个 makeCopy 方法，并在每个子案例类中调用 copy 来覆盖它，并且语法（尤其是对于 Self 类型）相当混乱。有没有办法用 Scala 的内置自键入来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T20:24:39.583

你不能做你想做的，因为`copy` *需要知道所有可能的参数*。因此，即使案例类继承自`Copyable`，它也不是`copy`您需要的。此外，如果您要保持类型直接，那么您会因 Scala 缺少“ `MyType`”而受阻。所以你不能*只*扩展一个基类。但是，您可以添加抽象方法和类型注释：

```
abstract class BaseClass[C <: BaseClass[_]](a: String, b: Int) {
  def setB(b0: Int): C
  def doubleB(b0: Int) = setB(b0*2)
}
case class HasC(a: String, b: Int, c: Boolean) extends BaseClass[HasC](a,b) {
  def setB(b0: Int) = this.copy(b = b0)
  def doesStuffWithC(c0: Boolean) = doubleB(if (c0) b else -b).copy(c = c0)
} 
```

然后你可以：

```
scala> HasC("fish",1,false).doesStuffWithC(true)
res47: HasC = HasC(fish,2,true) 
```

如果您有很多依赖于复制能力的共享功能`b`（许多方法或少量复杂方法），那么这项额外的工作将是值得的——也就是说，这解决了 DRY 问题。相反，如果您想抽象`HasC`其他派生类，您可以使用`BaseClass[_]`或添加另一个级别来定义`setB(b0: Int): BaseBase`或干脆忘记类型参数化并`BaseClass`用作返回类型（但认识到`HasC`不能使用`BaseClass`方法并仍保留其类型标识）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:36:47.430

您可以在抽象类中定义一个 makeCopy，该类接受一个接受 Unit 并返回 BaseClass 的复制器函数，然后在使用它的方法中（如 doubleB）在案例类主体中覆盖它们并通过传递它来使用 makeCopy匿名函数创建一个新副本的工作，道具发生了变化，如下所示：

```
package delegatedcopy

abstract class BaseClass(a: String, b:Int){
  def aField = a
  def bField = b
  def doubleB:BaseClass
  def makeCopy(copier: () => BaseClass):BaseClass = copier()
}

case class HasC(override val aField: String, override val bField: Int, cField: Boolean) extends BaseClass(aField, bField){
  override def doubleB:BaseClass = makeCopy( ()=> HasC(aField, bField * 2, cField) )
}

case class HasD(override val aField: String, override val bField: Int, dField:Double) extends BaseClass(aField, bField){
  override def doubleB:BaseClass = makeCopy( ()=> HasD(aField, bField * 2, dField) )
} 
```

演示它的测试应用程序：

```
import delegatedcopy._

object TestApp extends Application{
  val hasC = HasC( "A C object", 5, true)
  val hasD = HasD( "A D object", 2, 3.55)
  val hasCDoubleB = hasC.doubleB
  val hasDDoubleB = hasD.doubleB

  println(hasC) // prints HasC(A C object,5,true)
  println(hasCDoubleB) //prints HasC(A C object,10,true)

  println( hasD ) // prints HasD(A D object,2,3.55)
  println( hasDDoubleB ) // prints HasD(A D object,4,3.55)
} 
```

通过这种方式，您可以使所有子类的 makeCopy 方法与基类中的方法相同，并且可以在基类和案例类中实现或混合相当多的功能，同时将通用代码保存在安全的地方并能够在特定案例类上向客户传递 BaseClass 和模式匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T20:17:27.630

我觉得你运气不好。`copy`方法 on`HasC`和具有不同的`HasD`签名。由于默认参数，它有点隐藏，但基本上定义`BaseClass`不知道`copy`要调用哪个方法。

# php - 无法让套接字工作 - 我错过了什么愚蠢的事情？

> ID：10304731
> 
> 赞同：0
> 
> 时间：2012-04-24T19:30:59.013
> 
> 标签：php, javascript, websocket

我正在尝试进入 Web 套接字的勇敢新世界，但我什么都做不了。

我已经下载并尝试了几个 PHP 套接字服务器，但没有任何乐趣。他们似乎非常缺乏关于如何才能真正让事情在您自己的服务器上运行的分步信息。

我将服务器脚本的路径作为第一个参数传递给 new WebSocket() - 例如'ws://localhost:33/sockets/server.php'。那正确吗？

我应该传递任何东西作为第二个参数吗？我读过，但我不太确定。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:20:42.140

您传递给 WebSocket 的路径与文件系统中的实际路径无关。
当 WebSocket 连接到服务器时，它只使用实际地址“localhost”和端口“33”。然后在握手的 HTTP 请求中，它将采用“路径”详细信息，在您的情况下为“/sockets/server.php”，并将它们放入握手中，因此第一行握手将如下所示：

```
GET /sockets/server.php HTTP/1.1 
```

因此，您的应用程序将使用它来决定如何处理它。如果您想使用它并使其看起来与实际文件相关，或者以您自己的方式使用它。

[这](https://www.rfc-editor.org/rfc/rfc6455#page-14)是来自 RFC 6455 关于 WebSockets URI 的一些信息。

也不要使用端口 33，因为它可能被 dsp 服务占用。[在此处](http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers)查看港口地图。
如果您将服务器端 WebSocket 绑定到端口 33，那么它应该继续连接。

TCP 层的连接建立后，应该通过 HTTP Requests 进行，即 Handshaking。

完成后，就成功了。客户端的 JavaScript 会抛出 onopen 回调。如果出现问题，它将引发 onerror 和 onclose 事件。

成功建立连接并且 WebSocket 确实通过握手消息进行后，可以进行消息传递。客户端将接收原始字符串作为消息或二进制（如果服务器发送二进制数据，则带有特定操作码的消息）。但是服务器将接收带有框架和一些标题的数据。浏览器会自动应用去帧，所以在客户端你不需要担心。但是在服务器端，你必须自己做，或者使用一些现有的库来为你处理。

这是 WebSockets 协议的官方文档：[RFC 6455](https://www.rfc-editor.org/rfc/rfc6455)。它包含您需要了解 WebSockets 协议的所有方面的所有信息。

同时，您可能有兴趣寻找现成的解决方案。并通过他们的例子。

# php - 来自 fopen 中的typo3 和特殊字符的内容

> ID：10304744
> 
> 赞同：0
> 
> 时间：2012-04-24T19:32:04.133
> 
> 标签：php, utf-8, special-characters, typo3

我最近升级了我的typo3-installation。新版本仅运行 utf8。我的旧安装使用了 iso8859-1。不幸的是，不可能恢复到我的旧字符集......

我有一个脚本，它通过以下方式从另一台服务器加载数据：

```
$handle = fopen("www.my-url.com/myloader.php", "r");
 if ($handle) {
    $contents = '';
    while (!feof($handle)) {
        $contents .= fread($handle, 8192);
        }
    fclose($handle);
echo $contents; 
```

我现在的问题是丹麦语特殊字符没有正确翻译。我已经在 $contents 上尝试了 utf8_encode 和解码，但都不起作用。我无法更改另一台服务器上的脚本，因为它是许多其他站点的提供程序，这些站点仍然运行着旧的typo3-install。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:47:54.543

在 myloader.php 中获取一个 GET 参数，指定结果应该编码的字符集。默认为 ISO 8859-1 并根据需要使用 iconv 转换为 UTF-8，反之亦然。

# node.js - 使用 Node.js，将所有错误处理都嵌入到用于所有未捕获异常的机制中是否有意义？

> ID：10304750
> 
> 赞同：1
> 
> 时间：2012-04-24T19:32:22.243
> 
> 标签：node.js, error-handling

似乎 node.js 使用某种线程模型来执行它所谓的“aynch”代码。这样做的问题是我无法在另一个调用堆栈中捕获外部发生的异常，因此它们会冒泡到主线程执行并被处理程序捕获。

将所有的错误处理都放入用于所有未捕获异常的机制中并停止尝试在更细粒度的地方尝试/捕获是否有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:40:29.103

这样做可能会有问题。看看：[node.js - 处理未捕获的异常](http://debuggable.com/posts/node-js-dealing-with-uncaught-exceptions:4c933d54-1428-443c-928d-4e1ecbdd56cb)

# c++ - 之间的区别 和#include 中的“iostream”（引号）？

> ID：10304751
> 
> 赞同：0
> 
> 时间：2012-04-24T19:32:25.003
> 
> 标签：c++, syntax

> **可能重复：**
> [#include <文件名> 和#include “文件名”有什么区别？](https://stackoverflow.com/questions/21593/what-is-the-difference-between-include-filename-and-include-filename)

当我编写我的程序时，我包含了像`#include <iostream>`. 但也是`#include "iostream"`正确的，代码编译时不会出现任何错误或问题。

所以，我想知道`< >`和之间有什么区别`" "`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:34:30.397

双引号 include 用于告诉编译器先在本地目录中查找包含的头文件，然后再在包含目录中搜索。当您尝试包含代码的本地头文件时，您会看到这种差异。如果您使用 '<>' 包含本地头文件，编译器将失败，除非您的本地目录是 'include' 目录路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:35:10.917

当您使用`< >`时，编译器*仅*在系统指定的目录/目录（例如，您在`include`环境变量中设置的任何目录）中查找标头。

当你使用`" "`时，编译器首先在本地目录中查找，如果失败，就像你使用的那样重新搜索`< >`。从技术上讲，（即，根据标准）不一定是“本地”目录，但这就是它在我所知道的每个编译器中的工作方式）。

如果您关心，标准中的官方措辞实际上有点模糊（§16.2/2-3）：

> 形式的预处理指令
> 
> `# include <h-char-sequence> new-line`
> 
> 在一系列实现定义的位置中搜索由 < 和 > 分隔符之间的指定序列唯一标识的标头，并用标头的全部内容替换该指令。如何指定位置或标识的标头是实现定义的。
> 
> 形式的预处理指令
> 
> `# include "q-char-sequence" new-line`
> 
> 导致将该指令替换为由 " 分隔符之间的指定序列标识的源文件的全部内容。以实现定义的方式搜索命名的源文件。如果不支持此搜索，或者搜索失败, 该指令被重新处理，就好像它读取
> 
> `# include <h-char-sequence> new-line`
> 
> 具有与原始指令相同的包含序列（包括 > 字符，如果有的话）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:34:21.083

<> 只在编译器提供的头文件中查找，而 "" 首先在项目目录中查找，如果没有，则只在编译器提供的头文件中查找。

在源文件旁边添加一个名为 iostream 的文件。现在包含 "" 并观察它失败（因为它将获得空文件）或使用 <> 并观察它成功（因为它将忽略本地文件）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T19:36:11.680

“XXX” - 它在您的一个目录中。- 它在 Microsoft 的 SDK 或任何 SDK 中（您可以在

# ruby - ruby 1.9 - `string.codepoints.to_a`最简单的逆是什么？

> ID：10304754
> 
> 赞同：7
> 
> 时间：2012-04-24T19:32:32.320
> 
> 标签：ruby, unicode, ruby-1.9

在 ruby​​ 1.9.3 中，我可以获得字符串的代码点：

```
> "foo\u00f6".codepoints.to_a
 => [102, 111, 111, 246] 
```

是否有一个内置的方法去另一个方向，即从整数数组到字符串？

我知道：

```
# not acceptable; only works with UTF-8
[102, 111, 111, 246].pack("U*")

# works, but not very elegant
[102, 111, 111, 246].inject('') {|s, cp| s << cp }

# concise, but I need to unshift that pesky empty string to "prime" the inject call
['', 102, 111, 111, 246].inject(:<<) 
```

更新（回应 Niklas 的回答）

有趣的讨论。 `pack("U*")`始终返回 UTF-8 字符串，而`inject`版本返回文件源编码中的字符串。

```
#!/usr/bin/env ruby
# encoding: iso-8859-1

p [102, 111, 111, 246].inject('', :<<).encoding
p [102, 111, 111, 246].pack("U*").encoding
# this raises an Encoding::CompatibilityError
[102, 111, 111, 246].pack("U*") =~ /\xf6/ 
```

对我来说，`inject`调用返回一个 ISO-8859-1 字符串，而`pack`返回一个 UTF-8。为了防止错误，我可以使用`pack("U*").encode(__ENCODING__)`，但这会让我做额外的工作。

更新 2

显然， String#<< 并不总是根据字符串的编码正确附加。所以看起来 pack 仍然是最好的选择。

```
[225].inject(''.encode('utf-16be'), :<<)  # fails miserably
[225].pack("U*").encode('utf-16be')  # works 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T19:34:43.890

你自己的尝试最明显的适应是

```
[102, 111, 111, 246].inject('', :<<) 
```

然而，这不是一个好的解决方案，因为它仅在初始空字符串文字具有能够容纳整个 Unicode 字符范围的编码时才有效。以下失败：

```
#!/usr/bin/env ruby
# encoding: iso-8859-1
p "\u{1234}".codepoints.to_a.inject('', :<<) 
```

所以我实际上会推荐

```
codepoints.pack("U*") 
```

我不知道您所说的“仅适用于 UTF-8”是什么意思。它创建了一个 UTF-8 编码的 Ruby 字符串，但是 UTF-8 可以容纳整个 Unicode 字符范围，那么有什么问题呢？观察：

```
irb(main):010:0> s = [0x33333, 0x1ffff].pack("U*")
=> "\u{33333}\u{1FFFF}"
irb(main):011:0> s.encoding
=> #<Encoding:UTF-8>
irb(main):012:0> [0x33333, 0x1ffff].pack("U*") == [0x33333, 0x1ffff].inject('', :<<)
=> true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-20T20:56:48.867

根据数组中的值和 的值`Encoding.default_internal`，您可以尝试：

```
[102, 111, 111, 246].map(&:chr).inject(:+) 
```

您必须小心编码。请注意以下事项：

```
irb(main):001:0> 0.chr.encoding
=> #<Encoding:US-ASCII>
irb(main):002:0> 127.chr.encoding
=> #<Encoding:US-ASCII>
irb(main):003:0> 128.chr.encoding
=> #<Encoding:ASCII-8BIT>
irb(main):004:0> 255.chr.encoding
=> #<Encoding:ASCII-8BIT>
irb(main):005:0> 256.chr.encoding
RangeError: 256 out of char range
        from (irb):5:in `chr'
        from (irb):5
        from C:/Ruby200/bin/irb:12:in `<main>'
irb(main):006:0> 
```

默认情况下，256.chr 失败，因为它喜欢返回 US-ASCII 或 ASCII-8BIT，具体取决于代码点是在 0..127 还是 128..256。

这应该涵盖您对 8 位值的观点。如果您的值大于 255（可能是 Unicode 代码点），那么您可以执行以下操作：

```
irb(main):006:0> Encoding.default_internal = "utf-8"
=> "utf-8"
irb(main):007:0> 256.chr.encoding
=> #<Encoding:UTF-8>
irb(main):008:0> 256.chr.codepoints
=> [256]
irb(main):009:0> 
```

将 Encoding.default_internal 设置为“utf-8”，Unicode 值 > 255 应该可以正常工作（但见下文）：

```
irb(main):009:0> 65535.chr.encoding
=> #<Encoding:UTF-8>
irb(main):010:0> 65535.chr.codepoints
=> [65535]
irb(main):011:0> 65536.chr.codepoints
=> [65536]
irb(main):012:0> 65535.chr.bytes
=> [239, 191, 191]
irb(main):013:0> 65536.chr.bytes
=> [240, 144, 128, 128]
irb(main):014:0> 
```

现在它变得有趣了——ASCII-8BIT 和 UTF-8 似乎没有混合：

```
irb(main):014:0> (0..127).to_a.map(&:chr).inject(:+).encoding
=> #<Encoding:US-ASCII>
irb(main):015:0> (0..128).to_a.map(&:chr).inject(:+).encoding
=> #<Encoding:ASCII-8BIT>
irb(main):016:0> (0..255).to_a.map(&:chr).inject(:+).encoding
=> #<Encoding:ASCII-8BIT>
irb(main):017:0> ((0..127).to_a + (256..1000000).to_a).map(&:chr).inject(:+).encoding
RangeError: invalid codepoint 0xD800 in UTF-8
        from (irb):17:in `chr'
        from (irb):17:in `map'
        from (irb):17
        from C:/Ruby200/bin/irb:12:in `<main>'
irb(main):018:0> ((0..127).to_a + (256..0xD7FF).to_a).map(&:chr).inject(:+).encoding
=> #<Encoding:UTF-8>
irb(main):019:0> (0..256).to_a.map(&:chr).inject(:+).encoding
Encoding::CompatibilityError: incompatible character encodings: ASCII-8BIT and UTF-8
        from (irb):19:in `+'
        from (irb):19:in `each'
        from (irb):19:in `inject'
        from (irb):19
        from C:/Ruby200/bin/irb:12:in `<main>'
irb(main):020:0> 
```

ASCII-8BIT 和 UTF-8 可以连接，只要 ASCII-8BIT 代码点都在 0..127 中：

```
irb(main):020:0> 256.chr.encoding
=> #<Encoding:UTF-8>
irb(main):021:0> (0.chr.force_encoding("ASCII-8BIT") + 256.chr).encoding
=> #<Encoding:UTF-8>
irb(main):022:0> 255.chr.encoding
=> #<Encoding:ASCII-8BIT>
irb(main):023:0> (255.chr + 256.chr).encoding
Encoding::CompatibilityError: incompatible character encodings: ASCII-8BIT and UTF-8
        from (irb):23
        from C:/Ruby200/bin/irb:12:in `<main>'
irb(main):024:0> 
```

这给我们带来了您问题的最终解决方案：

```
irb(main):024:0> (0..0xD7FF).to_a.map {|c| c.chr("utf-8")}.inject(:+).encoding
=> #<Encoding:UTF-8>
irb(main):025:0> 
```

所以我认为最一般的答案是，假设你想要 UTF-8，是：

```
[102, 111, 111, 246].map {|c| c.chr("utf-8")}.inject(:+) 
```

假设您知道您的值在 0..255 中，那么这更容易：

```
[102, 111, 111, 246].map(&:chr).inject(:+) 
```

给你：

```
irb(main):027:0> [102, 111, 111, 246].map {|c| c.chr("utf-8")}.inject(:+)
=> "fooö"
irb(main):028:0> [102, 111, 111, 246].map(&:chr).inject(:+)
=> "foo\xF6"
irb(main):029:0> [102, 111, 111, 246].map {|c| c.chr("utf-8")}.inject(:+).encoding
=> #<Encoding:UTF-8>
irb(main):030:0> [102, 111, 111, 246].map(&:chr).inject(:+).encoding
=> #<Encoding:ASCII-8BIT>
irb(main):031:0> 
```

我希望这会有所帮助（尽管可能有点晚了）——我发现这是在寻找同一个问题的答案，所以我自己研究了它。

# wpf - Can a KeyBinding be a Resource?

> ID：10304758
> 
> 赞同：3
> 
> 时间：2012-04-24T19:32:53.737
> 
> 标签：wpf, resources

I would like to create a StaticResource KeyBinding, but I cannot figure out how I would de-reference it. So, in my Window.Resources, I might put the following:

```
<Window.Resources>
        <ResourceDictionary>

            <KeyBinding
                x:Key="CtrlRightKeyBinding"
                Modifiers="Control"
                Key="Right"
                Command="{Binding MyCommand}"
                CommandParameter="{Binding DirectionInfoRight}" />

        </ResourceDictionary>
</Window.Resources> 
```

However, I do not know how to de-reference it when setting my InputBindings:

```
<Window.InputBindings>
???
</Window.InputBindings> 
```

Any thoughts or suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:46:13.450

尝试这个：

```
<Window.InputBindings>
    <StaticResource ResourceKey="CtrlRightKeyBinding" />
</Window.InputBindings> 
```

请参阅[静态资源标记扩展](http://msdn.microsoft.com/en-us/library/ms750950.aspx)。

# php - 有没有办法在开始过滤数据表时忽略空格？

> ID：10304767
> 
> 赞同：1
> 
> 时间：2012-04-24T19:33:29.873
> 
> 标签：php, jquery, datatables

我正在使用 jquery 插件[Datables](http://www.datatables.net/index)，我正在使用 php 处理文件进行过滤。我已经修改了代码以允许使用多个关键字。但是如果我输入一个空格作为起始字符，我会收到 JSON 错误，是否可以忽略此错误而无需单击确定？或者有没有办法修改php以允许空格开始。

谢谢

继承人一些代码：

```
 $sWhere = "";
    if ( $_GET['sSearch'] != "")
    {
            $aWords = preg_split('/\s+/', $_GET['sSearch']);
            $sWhere = "WHERE (";

            for ( $j=0 ; $j<count($aWords) ; $j++ )
            {
                    if ( $aWords[$j] != "" )
                    {
                            if(substr($aWords[$j], 0, 1) == "!"){
                                    $notString = substr($aWords[$j], 1);
                                    $sWhere .= "(";
                                    for ( $i=0 ; $i<count($aColumns) ; $i++ ) {
                                            $sWhere .= $aColumns[$i]." NOT LIKE '%".mysql_real_escape_string( $notString )."%' AND ";
                                    }
                                    $sWhere = substr_replace( $sWhere, "", -4 );
                            }
                            else{
                                    $sWhere .= "(";
                                    for ( $i=0 ; $i<count($aColumns) ; $i++ ) {
                                            $sWhere .= $aColumns[$i]." LIKE '%".mysql_real_escape_string( $aWords[$j] )."%' OR ";
                                    }
                                    $sWhere = substr_replace( $sWhere, "", -3 );
                            }
                            $sWhere .= ") AND ";
                    }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:38:02.860

您的问题是`preg_split()`对单个空格字符串进行操作：

```
$e = preg_split('/\s+/', " ");
print_r($e); 
```

拆分单个空格将返回一个包含两个空白字符串的数组。将第一行更改为：

```
$term = trim($_GET['sSearch']);
if ( $term != "")
{
        $aWords = preg_split('/\s+/', $term); 
```

这样，您就不会尝试使用基本上是空白的字符串来运行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:42:34.220

我不确定 json 错误发生在哪里，因为您只显示 php，但是 php 和 jQuery 都提供了从字符串的开头和结尾修剪空格的函数。

在您的 javascript 中，在其余处理之前，您可以执行以下操作：

```
my_string = $.trim(original_string); 
```

在php中你可以这样做：

```
$aWords = preg_split('/\s+/', trim($_GET['sSearch']));
// or use trim on the individual words of the result... 
```

# ios - 使用 CIFilter 的链接器错误

> ID：10304771
> 
> 赞同：1
> 
> 时间：2012-04-24T19:33:49.037
> 
> 标签：ios, core-image

当我尝试在 iOS 5 中使用 CIFilter 时，出现以下链接器错误。

```
Undefined symbols for architecture i386: "_OBJC_CLASS_$_CIFilter", referenced from: objc class-ref in libios_ngn_stack.a(NgnProxyVideoConsumer.o)"_kCIInputImageKey", referenced from: 
```

导致错误的行是：

```
CIFilter *filter = [CIFilter filterWithName:@"CISepiaTone" 
                                          keysAndValues: kCIInputImageKey, image, 
                                @"inputIntensity", [NSNumber numberWithFloat:0.8], nil]; 
```

有人在[这个问题中遇到了同样的问题](https://stackoverflow.com/questions/7969797/how-do-i-resolve-the-linker-error-when-i-try-to-use-cifilter-in-my-ios-iphone)，但唯一的答案是他需要 sLibrary/Frameworks/CoreImage.framework。有人可以详细说明我将如何安装这个框架吗？（我在 Library/Frameworks/QuartzCore/Frameworks/CoreImage 中有一个 CoreImage 框架...）

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T20:18:13.783

在 Xcode 4.x 中，只需转到您的项目设置，单击您的目标，单击 Build Phases 选项卡，然后展开 Link Binary With Libraries 组。当您单击那里的加号按钮时，您将看到一个要链接的库列表。

在该列表中找到 CoreImage.framework（您可以使用上方的搜索区域进行过滤）并单击添加以将其添加到您的应用程序的链接库列表中。

# hbase - Hbase Quality Of Service: inconsistent time for inserting same type of rows in Hbase

> ID：10304772
> 
> 赞同：1
> 
> 时间：2012-04-24T19:33:50.807
> 
> 标签：hbase

I have a cluster Hbase set-up. In that I have 3 Region Servers. There is a table which has 27 Regions equally distributed among 3 Region servers--9 regions per region server.

Region server 1 has ---region 1-9 Region server 2 has ---region 10-18 Region server 3 has ---region 19-27

Now when I start a program which inserts rows in region 1 and region 5 (both under Region Server-1) alternatively and on continuous basis, I see that the insert time for each row is not constant or consistent---there is a lot of variance or say standard deviation of insert time is quite large. Some times it takes 2 ms to insert a row, sometimes 3 ms,sometimes 1000 ms and sometimes even > 3000 ms.Even though data size in rows is equal.

I understand that due to flushing and compaction of Regions the writes are blocked---but then it should not be blocked for larger span of time and the blockage time should be consistent for every flush/compaction (minor compaction).

All in all every time flush and compaction occurs it should take nearly same time for each compaction and flush.

For our application we need a consistent quality of service and if not perfect atleast we need a well visible boundary lines--like for each row insert it will take some 0 to 10 ms and not more than 10 ms(just an example) that even though minor compaction or flush occurs.

Is there any setting/configuration which I should try?

Any ideas of how to achieve it in Hbase.

Any help would be really appreciated.

Thanks in advance!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:39:06.603

第一次压缩不会阻止您的写入！我建议你的主要事情是检查区域服务器/客户端上的 GC。顺便说一句，您是否检查过您没有发生分裂？

其他一些可以帮助回答的输入

1.  数据的大小是多少，有多少列和多少列族？
2.  您插入的吞吐量是多少？
3.  您为 HBase 区域服务器分配了多少内存？
4.  HDFS 数据节点与区域服务器在同一台服务器上？
5.  每台机器有多少个磁盘？

# php - MAMP - 在同一网络上不适用于我的 iPhone

> ID：10304774
> 
> 赞同：1
> 
> 时间：2012-04-24T19:33:59.603
> 
> 标签：php, iphone, web-services, webserver, mamp

我一直在谷歌上搜索这个很多，但我仍然无法让它工作。我的 Mac 上安装了 MAMP Web 服务器，并且创建了一些 Web 服务。当我使用 localhost:8888/myfile.php 以及使用 192.168.0.108/~martin/myfile.php 时从我的 Mac 上的浏览​​器调用它时，它工作正常。

问题是当我尝试从我的 iPhone 调用 192.168.0.108/~martin/myfile.php 进行一些测试时，请求超时。这真的很奇怪，因为这是 2 天前工作的。我不确定发生了什么变化。我对 httpd.conf 和 htaccess 文件不是很熟悉，但我没有手动更改那里的内容。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:42:32.097

你试过在你的 iPhone 上访问[http://192.168.0.108:8888/myfile.php吗？](http://192.168.0.108:8888/myfile.php)如果 MAMP 在 8888 上运行，则需要指定端口以在那里访问它。

一定要检查你电脑的IP。根据您的路由器设置，它可能在过去几天发生了变化。

此外，请确保 iPhone 确实与您的本地计算机位于同一网络上。根据您的网络设置，子网也可能不起作用。我已经让自己发疯了，试图连接到一个实际上连接在一个单独的子网上的盒子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-13T09:33:57.883

不知道这是否对任何人有帮助，但我只需删除 ip 主机地址并将其更改为通配符即可完成此工作。在此之后它立即开始工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-25T11:49:51.930

**通过计算机的本地主机名打开主机，**我成功打开了本地文件夹。

## 解决方案 1：计算机的本地主机名

找到你电脑的本地主机名：*macOS->System Preferences->Sharing->File Sharing* [https://support.apple.com/et-ee/guide/mac-help/mchlp1177/mac](https://support.apple.com/et-ee/guide/mac-help/mchlp1177/mac)

在“计算机名称”附近，您可以找到以下信息：

> “您本地网络上的计算机可以访问您的计算机： *“mymac.local”*

在 iOS-Safari 中打开计算机名称“your_computers_name.local”对我有用：

```
http://[your_computers_name.local] 
```

例如：

```
http://mymac.local 
```

## 解决方案2：计算机的网络地址

尝试使用计算机的网络地址。如果您在首选项中选择并激活文件共享，您可以找到网络地址。看起来像：“smb://name.example.com”。将“smb”替换为“http”。

在 iOS-Safari 中打开网络地址（通过 USB-Cable 或 Wifi 连接）：

```
http://[insert_your_computer_network_address] 
```

例如，您可以访问您的文件，例如：

```
http://name.example.com/myfile.php 
```

这也对我有用。

作为在主机终端中查找地址写入“主机名”的另一种方法：

```
$ hostname 
```

这将返回主机的名称/网络地址。

## 不工作？

也许您必须先允许文件共享？我不知道 ...

macOS->系统偏好设置->共享->文件共享：开启

# iphone - applicationDidBecomeActive 被调用两次

> ID：10304780
> 
> 赞同：25
> 
> 时间：2012-04-24T19:34:28.990
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiapplicationdelegate

第一次启动应用程序时，我的应用程序委托方法`applicationDidBecomeActive:`被调用了两次。我有一部分代码我只想执行一次并且我已经放入`applicationDidBecomeActive:`

我该怎么办？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-25T04:41:47.153

我得到了这个问题。我正在使用定位服务。在我点击位置服务警报上的“确定”后第一次启动时，我的 applicationDidBecomeActive 被再次调用一次，这是正常的 iOS 行为。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-10-08T14:53:36.513

如果您只想在应用程序激活时调用您的代码一次，请尝试通过两种方法调用它。

1.  `didFinishLaunchingWithOptions`
2.  `applicationWillEnterForeground`

而不是只从`applicationDidBecomeActive`.

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-20T01:28:22.480

这是因为位置或推送通知警报。

在本地位置/推送通知被解除后，`applicationDidBecomeActive`将被调用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-22T18:59:38.213

我不知道这是否会有所帮助，但我只是在一个完全简单的应用程序中遇到了同样的问题，它不使用定位服务，我发现这是一种错觉。查看我收到的日志消息：

```
2012-12-22 10:47:45.329 Bizarro[10416:907] start applicationDidBecomeActive:
2012-12-22 10:47:45.333 Bizarro[10416:907] end applicationDidBecomeActive:
2012-12-22 10:47:45.329 Bizarro[10416:907] start applicationDidBecomeActive:
2012-12-22 10:47:45.333 Bizarro[10416:907] end applicationDidBecomeActive: 
```

仔细看。看看*时代*。第一条和第三条消息具有相同的时间。第二条和第四条消息的时间相同。它们是相同的消息！这是一个 Xcode 错误；它与我的代码无关。Xcode 两次报告相同的日志消息。

就我而言，我可以通过关闭所有运行行为 -> 生成输出来防止这种情况。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-18T01:29:32.877

使用 Xcode 6 有一个新的原因会发生这种情况：当您在可调整大小的模拟器中启动应用程序时，`applicationDidBecomeActive`: 将被调用两次。

它使用默认大小类启动应用程序，然后应用您上次使用的大小——即使您使用的是默认值。任何时候应用大小类的变化，`applicationDidBecomeActive`: 都会被调用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-01T03:29:01.067

关于什么：

*   递增`applicationDidBecomeActive`
*   `applicationDidBecomeActive`减少权限请求的回调事件或关闭时触发另一个警报的其他警报。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-05-28T07:46:25.440

当应用程序**第**一次启动时，它会按顺序调用，

1.  `didFinishLaunchingWithOptions`
2.  `applicationDidBecomeActive`（**两次**）

当我们打开[控制中心](https://support.apple.com/en-us/HT202769)时，它只会调用，

```
applicationDidBecomeActive 
```

当应用程序从后台到前台时，它会按顺序调用

1.  `applicationWillEnterForeground`
2.  `applicationDidBecomeActive`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-04-07T16:41:32.890

我目前看到双重通知。

这是因为我的 AppDelegate 的初始化代码被调用了两次。
它在执行时（即加载 .XIB 文件时）被调用一次`main()`，`[[NSBundle mainBundle] loadNibNamed:@"MainMenu" owner:application topLevelObjects:&tl]`因为 .XIB 文件正在将 FirstResponder 设置为我的自定义 AppDelegate，然后在 main() 调用时再次调用它`[[myAppDelegate alloc] init]`。

初始化代码是`addObserver`调用的内容，因此为我关心的每个通知设置了两个观察者，这就是为什么我的通知被调用两次的原因。

我是一个新手 OS X 程序员，所以我还不确定解决这两个问题的最佳方法，但想在这里发布它以防它对其他人有帮助，另一个地方可以查看。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-24T19:36:31.973

您是否可能在 Interface Builder 和 AppDelegate 代码中创建了您的类的实例？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-24T20:09:06.707

如果您的代码只希望在应用程序启动时调用一次，请使用

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

反而。

否则，每当您的应用程序再次激活时，都会调用 applicationDidBecomeActive ，因此这不仅意味着您的情况的两倍，而且每次用户在切换到另一个应用程序后切换回您的应用程序时。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-14T05:24:01.817

如果您使用 RxSwift，那么您可以限制应用程序事件，因此它不会在同一秒内调用两次：

```
NotificationCenter.default.rx.notification(Notification.Name.UIApplicationDidBecomeActive)
        .throttle(1, scheduler: MainScheduler.instance)
        .subscribe { (event) in
            self.appEnteredFromBackground()
        }.disposed(by: disposeBag)

private func appEnteredFromBackground() {
        Analytics.trackPageView(withScreen: .home)
        dataStore.checkIfAllowingRides()
    } 
```

我把这段代码放在我的实际视图控制器中，逻辑应该发生在 ApplicationDidBecomeActive 上。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-10-18T12:58:19.710

我只是检查`applicationDidBecomeActive:`请求是否真的发送（我为此创建了一个函数，检查状态），如果是，我已经返回。第二次`applicationDidBecomeActive:`，函数读取状态为拒绝或允许，因为这是在用户回答警报之后。

# iis - How to configure IIS remotely using powershell?

> ID：10304782
> 
> 赞同：2
> 
> 时间：2012-04-24T19:34:29.857
> 
> 标签：iis, powershell, batch-file, remote-access

I am trying to write a simple script that lets you remotely add an app pool, site, and app to IIS using powershell.

I figured out how to do this using APPCMD with a .bat on the local machine, but I need to do this remotely.

My bat file works and contains:

```
%systemroot%\system32\inetsrv\APPCMD add apppool /name:"WCF Integrated 4.0" /managedRuntimeVersion:"v4.0" /managedPipelineMode:Integrated /processModel.identityType:"NetworkService" /enable32BitAppOnWin64:True

%systemroot%\system32\inetsrv\APPCMD add site /name:"WCF Site" /bindings:"http/*:88:" /physicalPath:"D:\wcf"

%systemroot%\system32\inetsrv\APPCMD add app /site.name:"WCF Site" /path:/Service/Host /physicalPath:"D:\wcf\Service"

%systemroot%\system32\inetsrv\APPCMD set app /app.name:"WCF Site/Service/Host" /applicationPool:"WCF Integrated 4.0" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T20:04:12.370

您没有指定哪个版本的 IIS。如果您使用的是 7.x，则可以使用 Web[管理模块](http://learn.iis.net/page.aspx/433/powershell-snap-in-creating-web-sites-web-applications-virtual-directories-and-application-pools/)。您的脚本将类似于以下内容：

```
$Session = New-PSSession -ComputerName '<ComputerName>'

    $block = { 
        import-module 'webAdministration' 

            # Call IIS cmdlets here for adding app pools, creating web site and so on
    } 

Invoke-Command -Session $Session -ScriptBlock $block 
```

# ios - Finish up existing iOS animation

> ID：10304787
> 
> 赞同：0
> 
> 时间：2012-04-24T19:34:38.570
> 
> 标签：ios, core-animation, uiviewanimation

I have an application with multiple views that transitions to the main screen depending on which button was pressed. My current problem is that if the view is in the middle of animating then when the user selects another button then the whole layout becomes messed up. (ex: the views don't align with the screen meaning that they become a few pixels off)

What I would like to know is if there is a way to check if the view is currently animating and if so just have it animate to the last frame and skip anything in between. Below is a small piece of code that I have just tested based on what I have read on other user asked questions on SO:

```
-(IBAction)buttonPress:(id)sender
{
    if([selectedView.layer.animationKeys count] > 0)
    {
        [selectedView.layer removeAllAnimations];
    }

// Perform other calculations once the animation has stopped
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:50:23.417

有很多方法可以做到这一点，但是......

如果您使用块动画，您可以在动画开始时设置一个“isAnimating”标志并在完成块中再次设置它。您可以从任何地方检查布尔值并根据需要处理案例。

至于需要在动画发生后执行代码，但是

```
// animation code in some method...
[UIView animateWithDuration:1.0
    delay: 0.0
    options: UIViewAnimationOptionCurveEaseIn
    animations:^{
         isAnimating = YES;
         fooView.alpha = 0.0;
    }
    completion:^(BOOL finished){
         isAnimating = NO;
         [[NSNotificationCenter defaultCenter] postNotificationName:@"FooBeDone" object:nil userInfo:nil]
    }];

-(IBAction)buttonPress:(id)sender {
    if (isAnimating) {
         [[NSNotificationCenter defaultCenter] addObserver:self 
                           selector:@selector(doBar:) 
                               name:@"FooBeDone"
                             object:nil];
         // possibly disable button to prevent multiple taps?
    } else {
         [self doBar];
    }
}

- (void)doBar {
     // do what needs to be done when when the animation is over
     [[NSNotificationCenter defaultCenter] removeObserver:self name:@"FooBeDone" object:nil];
     // possibly enable button again
} 
```

编辑：我添加了更多代码来显示可能的通知方法。在您的 IBAction 中创建扩展循环将锁定用户界面，直到循环完成并且您可以返回主运行循环，因此强烈建议避免它。通知应该给您相同的效果，但允许您的主运行循环不受阻碍地继续。

# sql-server - SQL Server 数据库上有多少个加密密钥？

> ID：10304791
> 
> 赞同：0
> 
> 时间：2012-04-24T19:34:53.813
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, encryption

SQL Server 数据库中可以有多少个加密密钥？

ColumnX 可以有一个加密密钥，ColumnY 有另一个加密密钥，ColumnZ 有另一个加密密钥吗？

如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T01:35:03.870

您可以创建多个加密密钥（数百万）并将单独的密钥用于单独的列。对于需要定期密钥轮换的任何场景，添加多个密钥都至关重要。要加密您使用的数据[`ENCRYPTBYKEY`](http://msdn.microsoft.com/en-us/library/ms174361.aspx)并传入所需加密密钥的密钥名称，请参阅[如何：加密数据列](http://msdn.microsoft.com/en-us/library/ms179331.aspx)。您使用[`DECRYPTBYKEY`](http://msdn.microsoft.com/en-us/library/ms181860.aspx). 请注意，您没有指定要使用的解密密钥，引擎知道。但您必须先正确打开解密密钥，请参阅[`OPEN SYMMETRIC KEY`](http://msdn.microsoft.com/en-us/library/ms190499.aspx).

# iphone - 在控制器中构建异步网络代码

> ID：10304793
> 
> 赞同：0
> 
> 时间：2012-04-24T19:35:06.077
> 
> 标签：iphone, ios, afnetworking

我最近刚从 ASIHttpRequest 库切换到 AFNetworking。我真的很喜欢这种简单性，但我仍然在努力理解如何构建我的异步代码。

请考虑此注册方案。

*   首先，我想检查输入的电子邮件地址是否可用。
*   接下来我要检查输入的用户名是否可用。
*   如果以上两者都有效且可用，我想提交我的真实注册请求。

我的代码看起来像。

```
- (void)signUp{

    BOOL hasValidEmail = [self validateEmail:email];
    BOOL hasValidUsername = [self validateUsername:username];

    if(!hasValidEmail){
        NSLog(@"Invalid email");
        return;
    }

    if(!hasValidUsername){
        NSLog(@"Invalid username");
        return;
    }

    if (hasValidEmail && hasValidUsername) {
        NSLog(@"Go ahead and create account");
    }
} 
```

考虑到我的网络方法的异步性质，我不太确定如何构建它。通常会在前两次可用性检查收到响应之前达到最后一个条件。

可用性检查方法如下所示：

```
- (BOOL)validateEmail:(NSString*)email{

    __block NSString* emailAlreadyExists = @"";

    NSString* url = [NSString stringWithFormat:@"user/emailexists/%@", email];

    [[APIClient sharedClient] getPath:url parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) {

        emailAlreadyExists = [responseObject valueForKey:@"exists"];

    } failure:^(AFHTTPRequestOperation *operation, NSError* error) {
        NSLog(@"Email availability check failed: %@", error.localizedDescription);
    }];

    if([emailAlreadyExists isEqualToString:@"true"]){
        return NO;
    }

    return YES;   
} 
```

也许只是我的积木技能需要提高，但我真的很想听听您将如何构建这样的场景？

虽然代码示例会“不错”，但我真的在寻找您知道的模式或好的技术。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:00:23.693

我通常将这些事情分解成步骤，并在前一个成功时开始下一步。为此目的，块非常适合传递。

这显然不会编译，但希望它可以让您了解如何执行此操作：

```
typedef enum
{
    SignupErrorNetworkError,
    SignupErrorEmailAlreadyTaken,
    SignupErrorUsernameAlreadyTaken,
} SignupError;

typedef enum
{
    // These steps must be performed in this order.
    SignupStepValidateEmail,
    SignupStepValidateUsername,
    SignupStepCreateAccount,
} SignupStep;

typedef void (^SignupSuccessBlock)();
typedef void (^SignupFailureBlock)(SignupError reason);

// Call this to sign up.
- (void)signupWithSuccess:(SignupSuccessBlock)success failure:(SignupFailureBlock)failure
{
    // Start the first step of the process.
    [self performSignupStep:SignupStepValidateEmail success:success failure:failure];
}

// Internal method. Don't call this from outside.
- (void)performSignupStep:(SignupStep)step success:(SignupSuccessBlock)success failure:(SignupFailureBlock)failure
{
    switch (step)
    {
        case SignupStepValidateEmail:
            [[APIClient sharedClient] getPath:url parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) {
                if ([responseObject valueForKey:@"exists"])
                {
                    if (failure) failure(SignupErrorEmailAlreadyTaken);
                    return;                }
                }
                // Start next async step in signup process.
                [self performSignupStep:SignupStepValidateUsername success:success failure:failure];
            } failure:^(AFHTTPRequestOperation *operation, NSError* error) {
                if (failure) failure(SignupErrorNetworkError);
            }];
            break;
        case SignupStepValidateUsername:
            // Similar to the step above. Starts the create account step on success.
            break;            
        case SignupStepCreateAccount:
            // Similar to the step above. Call the success block when done.
            break;            
    }
} 
```

如果开关变得太长和丑陋，您还可以将步骤变成单独的方法并删除步骤枚举：`validateEmailWithSuccess:failure`通过调用`validateUsernameWithSuccess:failure`等继续。

我只是想强调上面示例中进程的状态机性质。

# java - 使用 JSP 确定基本 URL

> ID：10304806
> 
> 赞同：0
> 
> 时间：2012-04-24T19:35:35.093
> 
> 标签：java, jsp

在浏览器（IE 和 Firefox）中，如果你有一个相对链接并且你的 URL 是：[http://domain/somepath/lastfolder/](http://domain/somepath/lastfolder/)

相对链接变为：

```
http://domain/somepath/lastfolder/linkdocname.html 
```

如果 URL 是[http://domain/somepath/lastdoc](http://domain/somepath/lastdoc)，则相对链接变为：

```
http://domain/somepath/linkdocname.html 
```

[http://domain/somepath/lastfolder/](http://domain/somepath/lastfolder/)变为：

```
http://domain/somepath/lastfolder/linkdocname.html 
```

有没有办法在不编写特殊函数的情况下使用 JSP 复制它？

我尝试使用以下方法获取基本 URL：

```
baseURL = request.getScheme() + "://" + request.getServerName() + ":" 
+ request.getServerPort()+ request.getRequestURI(); 
```

但这让我获得了请求 URI 的整个路径，并且如果它不以“/”结尾，则不会丢失最后一位然后如果我尝试：

```
baseURL = request.getScheme() + "://" + request.getServerName() + ":" 
+ request.getServerPort() + request.getContextPath(); 
```

这为我提供了 Web 容器文件夹的所有内容，但之后没有任何文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:40:11.507

在您最后一次字符串构建尝试中，您缺少端口号，即使您指定了“：”

尝试这个：

```
new URL(request.getScheme(), request.getServerName(), 
        request.getServerPort(), request.getContextPath()); 
```

如果需要，您还可以自己构建字符串并删除默认端口：

```
public String getBaseUrl(HttpServletRequest request) {
    if (( request.getServerPort() == 80 ) || ( request.getServerPort() == 443 )) {
        return request.getScheme() + "://" + request.getServerName() + 
                request.getContextPath();
    } else {
        return request.getScheme() + "://" + request.getServerName() + ":" + 
                request.getServerPort() + request.getContextPath();
    }
} 
```

# javascript - div 内的锚标记。当 div 点击它时，页面应该重定向到一个页面，如果锚点点击页面应该重定向到另一个页面

> ID：10304809
> 
> 赞同：2
> 
> 时间：2012-04-24T19:35:49.717
> 
> 标签：javascript, jquery, html

我有一个 div 里面有一个像这样的锚标签。

```
<div onclick="page reddirec to one location"  style="height:200px;width:200px"><a href="http://www.google.com" >text</a></div> 
```

这里 div 的高度和宽度各为 200 像素，并且单击该 div 页面应重定向到一个位置。但是这个 div 里面也有一个锚标签，但是点击这个锚标签，页面应该重定向到另一个位置。是否可以在 html 中或通过使用 javascript 来实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:43:33.340

你可以试试这个。

```
$('div').click(function(e){
    if($(e.target).is('a')){
        //this will stop event bubbling and will open the href of the anchor
        e.stopPropagation();
    }
    else{
        location.href = "anotherUrl";
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:46:26.390

这适用于 IE 9、Firefox 11 和 Google Chrome 18：

```
<div onclick="window.location='http://www.yahoo.com'" style="height:200px;width:200px;background-color:Red;">
  <a href="http://www.google.com" >text</a>
</div> 
```

# c# - LINQ to EF4 Query Where 子句未按预期过滤

> ID：10304817
> 
> 赞同：1
> 
> 时间：2012-04-24T19:36:31.650
> 
> 标签：c#, .net, linq, entity-framework-4

我已经为此搜索过，但找不到任何明显相关的内容，因此在此处发布以获取一些见解。使用 LINQ/EF4。这是代码片段：

```
 private const string JOB_FAILED = "Failed";
// other code..

var successfulJobs = context.Jobs.Where(x => x.Status != JOB_FAILED);
                foreach (Job successfulJob in successfulJobs)
                {
                    context.DeleteObject(successfulJob);
                } 
```

我希望successfulJobs 包含所有Job.Status ！=“失败”的工作。但是，当 Job.Status 等于“失败”时，会执行 foreach{} 的代码。我在这里错过了一些关于 LINQ\Lambda 的基本知识吗？

编辑：按要求生成的 SQL，似乎没问题。

```
SELECT 
[Extent1].[Id] AS [Id], 
[Extent1].[Parameters] AS [Parameters], 
[Extent1].[Status] AS [Status], 
[Extent1].[Created] AS [Created], 
[Extent1].[Modified] AS [Modified]
FROM [bws].[JobRunner_Tasks] AS [Extent1]
WHERE N'Failed' <> [Extent1].[Status] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:39:13.067

我仍然会说这是一个区分大小写的问题。如果直接在 SQL 中运行查询会返回什么？您可以在该表中发布数据样本吗？（包括“失败”状态）我知道这不是答案，但我还不能在帖子中添加评论（代表低于 50）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:44:33.503

嗯....在任何其他语言中，我可能会建议使用

```
x => !x.Status.equals(JOB_FAILED) 
```

但我不认为字符串比较在 C# 中那么挑剔

# python - TypeError：强制转换为 Unicode：需要字符串或缓冲区，找到类型

> ID：10304820
> 
> 赞同：3
> 
> 时间：2012-04-24T19:36:36.173
> 
> 标签：python, file-io, typeerror

我正在尝试编写一个代码来读取文件并对其进行一些操作。

编码：

```
def assem(file):
    import myParser
    from myParser import Parser
    import code
    import symboleTable
    from symboleTable import SymboleTable

newFile = "Prog.hack"
output = open(newFile, 'w')
input = open(file, 'r')

prsr=Parser(input)
while prsr.hasMoreCommands():
      str = "BLANK"
      if(parser.commandType() == Parser.C_COMMAND):
      str="111"+code.comp(prsr.comp())+code.dest(prsr.dest())+code.jump(prsr.jump())+"\n"

output.write(str)
prsr.advance() 
```

我得到的错误：

```
Traceback (most recent call last):
  File "assembler.py", line 11, in <module>
    input = open(file, 'r')
TypeError: coercing to Unicode: need string or buffer, type found 
```

我如何运行程序：

```
 python assembler.py Add.asm 
```

其中 Add.asm id 是我要读取的文件，所有模块都在同一个库中，包括 .asm 文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T19:43:03.890

你有多个问题。

首先，您的缩进不一致。这意味着导入被视为`assem`函数的一部分，但没有其他内容。从字面上看，您必须了解 Python 的第一件事是缩进很重要。

其次，您使用内置函数名称 ,`file`作为变量的名称。不要那样做。

第三，您实际上并没有调用该`assem`函数。但是由于您的第一个问题，第一个未缩进的行在启动时执行。因此，当到达该行时`input = open(file, 'r')`，`file`仍然指的是内置函数，而不是您的变量（此时尚未定义）。

最后，虽然这实际上并没有导致您的问题，但您不需要同时执行`import myParser`和`from myParser import Parser`。选一个。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-25T05:16:45.373

> 文件“C:\Python27\lib\ntpath.py”，第 488 行，abspath path = _getfullpathname(path) TypeError: coercing to Unicode: need string or buffer, builtin_function_or_method found

# php - Doctrine 2.1.5 setFirstResult() 在 MySQL 5.5 中产生错误

> ID：10304821
> 
> 赞同：1
> 
> 时间：2012-04-24T19:36:37.937
> 
> 标签：php, mysql, symfony, doctrine-orm, dql

这个查询：

```
$this->getEntityManager()
        ->createQuery("SELECT k FROM FooBarBundle:Kode k WHERE k.kode LIKE :keyword OR k.nama LIKE :keyword ORDER BY k.kode ASC")
            ->setParameter("keyword", "%$keyword%")
            ->setMaxResults($limit)
            ->setFirstResult($offset)
        ->getResult(); 
```

生成以下 SQL 错误：

```
SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OFFSET 0' at line 1 
```

但是，如果我删除该`setFirstResult($offset)`行，它就可以正常工作。是否有任何解决方法而不是升级整个 Doctrine 库（补丁可能很好）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:26:26.137

我认为你必须删除

```
ORDER BY k.kode ASC 
```

从您的查询中并使用如下方法设置它：

```
$this->getEntityManager()
        ->createQuery("SELECT k FROM FooBarBundle:Kode k WHERE k.kode LIKE :keyword OR k.nama LIKE :keyword")
            ->setParameter("keyword", "%$keyword%")
            ->setMaxResults($limit)
            ->setFirstResult($offset)
            ->orderBy("k.kode")
            ->getResult(); 
```

# html - CSS 下拉菜单

> ID：10304822
> 
> 赞同：0
> 
> 时间：2012-04-24T19:36:43.007
> 
> 标签：html, css, drop-down-menu

我正在开发一个网站，并使用传统的纯 CSS 下拉菜单技术，但集成了 CSS3 属性。话虽如此，客户想要特定的菜单项来推动

*   包含它们的 s。这会在菜单之间转换时导致抽搐。

    CSS 看起来像这样：

    ```
    #nav{
    background-image:url(../images/nav-bg.png);
    height: 32px;
    width: 100%;
    padding-right:8px;
    background-repeat:repeat-x;
    z-index:3;
    }

    #drop { list-style-type: none; height: 32px; padding: 0; margin: 0 auto; width: 500px; vertical-align: baseline; color: #fbf9ec; }
    #drop li { float: left; position: relative; padding: 0; line-height: 32px; background: #3a7c38 url(../images/nav-bg.png) repeat-x 0 0;}
    #drop li:hover { background-position: 0 -40px;}
    #drop li a { display: block; padding: 0 15px; color: #fbf9ec; text-decoration: none; }
    #drop li a:hover { color: #fbf9ec; }
    #drop li ul { opacity: 0; position: absolute; left: 0; width: 14em; background: #3a7c38; list-style-type: none; padding: 0; margin: 0; z-index: 2; box-shadow: 4px 4px 7px #888;}
    #drop li:hover ul { opacity: 1; }
    #drop li ul li { float: none; position: static; height: 0; line-height: 0; background: none; }
    #drop li:hover ul li { height: 30px; line-height: 30px; }
    #drop li ul li a { background: #3a7c38; }
    #drop li ul li a:hover { background: #254F24; } 
    ```

    可以在以下位置找到实时示例：

    MasonandLauren.com/flotec/secondary.html

    （别担心 - 设计是根据客户要求，不是我自己的）

    任何消除抽搐的帮助将不胜感激！

    谢谢！〜梅森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:42:02.610

尝试将主导航项的 z-index 设置为`3` （子菜单项 +1）。

看起来子选项卡的 z-index 导致它们在移动时按顺序在鼠标上方和下方。

```
#trans-nav li {
float: left;
position: relative;
padding: 0;
line-height: 32px;
background: #3A7C38 url(../images/nav-bg.png) repeat-x 0 0;
z-index: 3;  /* <-- this is the new one */ 
```

# php - cakephp 将数组传递给 XML::build()

> ID：10304825
> 
> 赞同：1
> 
> 时间：2012-04-24T19:37:21.317
> 
> 标签：php, xml, cakephp, multidimensional-array

CakePHP 文档说我可以使用 XML::build() 将数组转换为 XML。我得到的只是错误。这是我在#cakephp irc 的帖子。

我有一个[多维数据集](http://bin.cakephp.org/saved/74054)，为此我制作了一个[包装函数来输出我的 xml](http://bin.cakephp.org/view/1721853738)。[此消息](http://bin.cakephp.org/view/1440993672)出错。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:56:27.747

这是我发现的一个类，它遍历多维php数组并转换为xml。

[如果您愿意，将 PHP 数组转换为 XML 或简单 XML 对象](http://snipplr.com/view/3491/)

# iphone - 保存 UITableviewcell accessoryView 的状态

> ID：10304826
> 
> 赞同：0
> 
> 时间：2012-04-24T19:37:21.510
> 
> 标签：iphone, xcode, ios5, uitableview, uibutton

我的 UITableViewCell 中有一个复选框作为附件视图。当我单击复选框时，它会被选中，反之亦然。但是当我向下滚动出视图并向后滚动时，复选框消失了。我想知道有什么方法可以保存我的按钮状态？

```
-(UITableViewCell *)tableView:(UITableView *)tableView
        cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = nil;

    if([tableView isEqual:self.myTableView]){
        static NSString *TableViewIdentifier = @"MyCells";
        cell = [tableView dequeueReusableCellWithIdentifier:TableViewIdentifier];
        if(cell == nil){
            cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault
                                         reuseIdentifier:TableViewIdentifier];
        } 
        //configure the cell
        checkbox = [UIButton buttonWithType:UIButtonTypeCustom];
        CGRect checkboxRect = CGRectMake(135, 150, 36, 36);
        [checkbox setFrame:checkboxRect];  
        [checkbox setImage:[UIImage imageNamed:@"unselected@2x.png"]forState:UIControlStateNormal];
        [checkbox setImage:[UIImage imageNamed:@"selected@2x.png"] forState:UIControlStateSelected];

        /*if (checkbox.state == UIControlStateNormal) {
            [checkbox setImage:[UIImage imageNamed:@"unselected@2x.png"]forState:UIControlStateHighlighted];
        }else if(checkbox.state == UIControlStateSelected){
            [checkbox setImage:[UIImage imageNamed:@"selected@2x.png"]forState:UIControlStateHighlighted];
        }*/

        [checkbox addTarget:self action:@selector(checkboxClicked:) forControlEvents:UIControlEventTouchUpInside];
        cell.accessoryView = checkbox;

        NSString *group;
        NSUInteger row = [indexPath row];

        switch (indexPath.section) {
            case 0:
                group = [suggestedPeople objectAtIndex:row];
                cell.textLabel.text = group;
                break;
            case 1:
                group = [aArray objectAtIndex:row];
                cell.textLabel.text = group;
                break;
            case 2:
                group = [bArray objectAtIndex:row];
                cell.textLabel.text = group;
                break;
            case 3:
                group = [cArray objectAtIndex:row];
                cell.textLabel.text = group;
                break;
            case 4:
                group = [dArray objectAtIndex:row];
                cell.textLabel.text = group;
                break;
            case 5:
                group = [eArray objectAtIndex:row];
                cell.textLabel.text = group;
                break;
        }
    }
    return cell;
} 
```

编辑：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier{
if(self = [super initWithStyle:style reuseIdentifier:reuseIdentifier]){
    checkbox = [UIButton buttonWithType:UIButtonTypeCustom];
    CGRect checkboxRect = CGRectMake(135, 150, 36, 36);
    [checkbox setFrame:checkboxRect];  
    [checkbox setImage:[UIImage imageNamed:@"unselected@2x.png"]forState:UIControlStateNormal];
    [checkbox setImage:[UIImage imageNamed:@"selected@2x.png"] forState:UIControlStateSelected];

}
return self;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:49:14.430

感谢您发布代码。对，您的问题是您在 cellForRowAtIndexPath 方法中创建 UIButton 实例。这是不允许的（或者更确切地说，正如您所注意到的那样，会发生奇怪的事情）。您应该创建一个 TableViewCell 子类并在那里添加按钮，或者为表格单元格创建一个 XIB 并加载它。

查看这篇文章以获得一些帮助：

[http://forums.macrumors.com/showthread.php?t=545061](http://forums.macrumors.com/showthread.php?t=545061)

# jquery - jQuery：从表单上的“完整”电子邮件地址中提取个人姓名和电子邮件地址

> ID：10304828
> 
> 赞同：2
> 
> 时间：2012-04-24T19:37:34.093
> 
> 标签：jquery, regex, email, extract

我有一个包含一个或多个“完整”电子邮件地址的表单字段。“完成”是指格式`Personal Name <person@domain.com>`

多个“完整”电子邮件地址用分号分隔。列表末尾可能有也可能没有最后的分号。我想将名称提取到一个字段中，将电子邮件地址提取到另一个字段中。

所以 ：

```
full_email = "Person name <parson@domain.com> ; Another person <another@domain.com> ; " 
email_only is set to  "parson@domain.com ; another@domain.com ;" 
name_only is set to  "Person name ; Another person ;" 
```

是否有一些 reg exp / jQuery 天才可以将 < 和 > 之间的所有内容复制到第二个字段中，将 < 之前的所有内容复制到第三个字段中，并以迭代/递归方式对整个“完整”电子邮件地址列表进行操作以生成两个用分号分隔的纯电子邮件地址和纯姓名列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:02:19.573

我认为您可以在没有正则表达式或 jQuery 的情况下执行此操作，只需拆分`;`以获取条目，然后`<`继续获取条目的各个部分。这是一个[jsFiddle](http://jsfiddle.net/2643C/2)来演示。

```
var full_email = "Person name <parson@domain.com> ; Another person <another@domain.com> ; " ;

var email_only = [];
var name_only = [];

var entries = full_email.split(';');

for(var i = 0; i < entries.length; i++)
{
    var entry = entries[i];
    if (entry.contains('<')){
        var parts = entry.split('<');

        name_only.push(parts[0].trim());
        email_only.push(parts[1].substr(0, parts[1].indexOf('>')));
    }
}

// The arrays
console.log(email_only);
console.log(name_only);

// Joined back to ; separated strings
console.log(email_only.join('; '));
console.log(name_only.join('; ')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:31:36.503

这是从您的输入构建两个数组的全 JavaScript 方法：

```
var full_email = "Person name <parson@domain.com> ; Another person <another@domain.com> ; " 
var email_only = new Array();
var name_only = new Array();

step1= full_email.split(';');
for(var i=0;i<step1.length-1;i++){
    step2 = step1[i].trim();
    step3 = step2.split('<');
    email_only.push(step3[1].slice(0,-1).trim());
    name_only.push(step3[0].trim());
}

console.log(email_only,name_only); 
```

**[​jsFiddle 示例](http://jsfiddle.net/j08691/P83rt/)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T20:01:57.967

您可以使用javascript 中的[split方法首先拆分每个地址...](http://www.w3schools.com/jsref/jsref_split.asp)

```
var emails = "";
var names = "";
$.each(full_email.split(';'), function(index,val){
    var contact_array = val.split('<');
    var name = contact_array[0];
    var email = contact_array[1];
    email = email.substring(0,email.indexOf('>'));
    emails += email + "; ";
    names += name + "; ";
}); 
```

因此，您可以随心所欲地使用名称和电子邮件。您也可以在名称上使用[trim](https://stackoverflow.com/questions/2308134/trim-in-javascript-not-working-in-ie)方法，希望这是您要查找的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T20:22:08.007

如果您从 full_name 字符串中删除不必要的空格，此脚本将处理它。小提琴：http: [//jsfiddle.net/GvGoldmedal/CacU8/](http://jsfiddle.net/GvGoldmedal/CacU8/)

```
var full_email = "Person name <parson@domain.com>;Another person <another@domain.com>;";
var array = full_email.split(";");

var substr = "";
var subsplit = "";
var names = new Array();
var emails = new Array();

for( var x=0; x < array.length - 1; x++)
{
    substr = array[x];
    subsplit = substr.split(" ");
    //Email and Name Exists
    if (subsplit.length > 2)  
    {
        names.push(subsplit[0] + " " + subsplit[1]);
        subsplit[2] = subsplit[2].replace("<", "");
        subsplit[2] = subsplit[2].replace(">", "");
        emails.push(subsplit[2]);
    }
    else if (subsplit.length = 2) // Only Name
    {
        names.push(subsplit[0] + " " + subsplit[1]);
    }
    else // only email
    {
        subsplit = subsplit.replace("<", "");
        subsplit = subsplit.replace(">", "");
        emails.push(subsplit);
    }
}

for (var x=0; x < names.length; x++)
{
    alert("Name:" + x + " " +names[x]);

}

for (var x=0; x < emails.length; x++)
{
    alert("Email:" + x + " " +emails[x]);

} 
```

# c++ - 在 AMD64 (Ubuntu 11.10) 上将 boost 编译为 i386

> ID：10304837
> 
> 赞同：1
> 
> 时间：2012-04-24T19:38:08.310
> 
> 标签：c++, boost, x86-64, i386, cross-compiling

我目前正在编写程序的扩展程序，该程序仅支持 i386（并且我正在运行 amd64 Ubuntu 11.10）。每当我编译我的扩展源时，我都需要使用 -m32 标志来强制使用 32 位架构（否则程序将无法加载我的扩展）。由于其庞大而稳定的库，迟早不可避免地会避免提升，这导致了我的问题。

我想使用 boost 文件系统，它使用特定于操作系统的函数调用，这反过来又导致需要一个库文件，而不仅仅是一个头文件实现。问题是; 我不能/不知道如何在我的 amd64 机器上设置 boost 文件系统（i386 版本）。如果我为 i386 下载预构建的 (.deb) 包并使用 -force-architecture 安装它，它仍然无法抱怨依赖关系。

所以基本上; 如何在我的 (amd64) 系统上使用 32 位 (i386) 架构设置提升？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:27:01.850

似乎我一直都做对了，但我太笨了，无法意识到如何将库与来自 Windows 环境的 GCC 链接器正确链接。`-m32`您可以通过使用标志和正确设置 bjam轻松编译 boost 库。有关详细信息，请参阅此问题中的第一个答案：[如何使用 gcc 强制构建 32 位的 boost？](https://stackoverflow.com/questions/1357742/how-do-i-force-a-32-bit-build-of-boost-with-gcc)

# c# - 当某些类型没有实现时，这是 RegisterDecorator 的正确方法吗？

> ID：10304838
> 
> 赞同：3
> 
> 时间：2012-04-24T19:38:08.717
> 
> 标签：c#, dependency-injection, fluentvalidation, simple-injector

[使用带有此处描述的命令模式的](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)简单注入器。大多数命令都有实现流利验证的伴随类`AbstractValidator<TCommand>`，这意味着它们也实现了 FV `IValidator<TCommand>`。然而，对每个命令都有一个验证器实现并不总是有意义的。

据我所知，命令装饰器实现不能`IValidator<TCommand>`作为构造函数 arg，除非每个`ICommandHandler<TCommand>`都有相应的 FV。`IValidator<TCommand>`. 我尝试了以下方法：

```
public class FluentValidationCommandDecorator<TCommand> 
    : IHandleCommands<TCommand>
{
    public FluentValidationCommandDecorator(IHandleCommands<TCommand> decorated
        , IValidator<TCommand> validator
    )
    {
        _decorated = decorated;
        _validator = validator;
    }
    ...
}
...
container.RegisterManyForOpenGeneric(typeof(IValidator<>), assemblies);
container.RegisterDecorator(typeof(IHandleCommands<>),
    typeof(FluentValidationCommandDecorator<>),
    context =>
    {
        var validatorType =
            typeof (IValidator<>).MakeGenericType(
                context.ServiceType.GetGenericArguments());
        if (container.GetRegistration(validatorType) == null)
            return false;
        return true;
    }); 
```

运行`Container.Verify()`一次的单元测试通过。`Container.Verify()`多次运行的单元测试`InvalidOperationException`在第二次调用时失败：

```
The configuration is invalid. Creating the instance for type 
IValidator<SomeCommandThatHasNoValidatorImplementation> failed. Object reference
not set to  an instance of an object. 
```

以下工作，以`Container`为参数：

```
public class FluentValidationCommandDecorator<TCommand> 
    : IHandleCommands<TCommand>
{
    private readonly IHandleCommands<TCommand> _decorated;
    private readonly Container _container;

    public FluentValidationCommandDecorator(Container container
        , IHandleCommands<TCommand> decorated
    )
    {
        _container = container;
        _decorated = decorated;
    }

    public void Handle(TCommand command)
    {
        IValidator<TCommand> validator = null;
        if (_container.GetRegistration(typeof(IValidator<TCommand>)) != null)
            validator = _container.GetInstance<IValidator<TCommand>>();

        if (validator != null) validator.ValidateAndThrow(command);

        _decorated.Handle(command);
    }
}
...
container.RegisterManyForOpenGeneric(typeof(IValidator<>), assemblies);
container.RegisterDecorator(typeof(IHandleCommands<>),
    typeof(FluentValidationCommandDecorator<>)); 
```

如果这个类不需要依赖 Simple Injector，我可以将它移到域项目中。该域已经依赖于 FluentValidation.net，因此可以对域有效性进行单元测试。我认为这个装饰器属于域，但它和它的单元测试项目都不依赖于 simpleinjector（或者应该必须，因为域不是组合根）。

**有没有办法告诉 simpleinjector 只`CommandHandler<TCommand>`用 a 装饰一个实例，`FluentValidationCommandDecorator<TCommand>`如果有注册的实现`IValidator<TCommand>`？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:18:51.610

您需要的是未注册的类型解析，将缺失的类型映射到默认实现。或者换句话说，您需要使用该`RegisterOpenGeneric`方法：

```
container.RegisterOpenGeneric(typeof(IValidator<>), 
    typeof(NullValidator<>)); 
```

现在您需要定义一个带有空/默认实现的实现`NullValidator<T>`。`IValidator<T>`

当您每次请求某个（未注册的）时都执行此操作时，将返回`IValidator<T>`一个新的实例。`NullValidator<T>`它不会覆盖使用 注册`RegisterManyForOpenGeneric`的类型，因为这些类型是显式注册的。

当`NullValidator<T>`实现是线程安全的（通常是空实现的情况）时，您可以通过将它们注册为单例来优化构造：

```
container.RegisterSingleOpenGeneric(typeof(IValidator<>), 
    typeof(NullValidator<>)); 
```

您可以在 wiki 中阅读更多信息：[开放泛型类型的注册](http://simpleinjector.codeplex.com/wikipage?title=Advanced-scenarios&referringTitle=Documentation#Registration_Of_Open_Generic_Types)

# entity-framework - Entity Framework 4.2 Code First 的问题需要很长时间才能将行添加到数据库

> ID：10304839
> 
> 赞同：0
> 
> 时间：2012-04-24T19:38:09.337
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

我目前正在使用带有 Code First 的 Entity Framework 4.2。我目前有一个 Windows 2008 应用程序服务器和一个在 Amazon EC2 上运行的数据库服务器。应用程序服务器安装了一个每天运行一次的 Windows 服务。该服务执行以下代码：

```
// returns between 2000-4000 records
var users = userRepository.GetSomeUsers();

// do some work

foreach (var user in users)
{
    var userProcessed = new UserProcessed { User = user };
    userProcessedRepository.Add(userProcessed);
}

// Calls SaveChanges() on DbContext
unitOfWork.Commit(); 
```

此代码需要几分钟才能运行。它还最大限度地利用了应用程序服务器上的 CPU。我尝试了以下措施：

*   删除 unitOfWork.Commit() 以查看应用程序服务器与数据库对话时是否与网络相关。这并没有改变结果。
*   将我的应用程序服务器从 Amazon 上的中型实例更改为高 CPU 实例，以查看它是否与资源相关。这导致服务器不再最大限度地使用 CPU，并且执行时间略有改善。但是，执行时间仍然是几分钟。

作为测试，我将上面的代码修改为运行 3 次，以查看第二个和第三个循环的执行时间是否使用相同的 DbContext。每个连续循环都比前一个循环花费更长的时间来运行，但这可能与使用相同的 DbContext 有关。

我错过了什么吗？像这样简单的事情真的有可能需要几分钟才能运行吗？即使我在每次循环后都不提交数据库？有没有办法加快这个速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:03:36.410

实体框架（就目前而言）不太适合这种批量操作。您是否可以在EC2中使用其中一种[批量插入方法？](http://msdn.microsoft.com/en-us/library/ms175937%28v=sql.105%29.aspx)否则，您可能会发现手动编写 T-SQL INSERT 语句要快得多。如果性能很重要，那么这可能超过使用 EF 的好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:47:27.083

我的猜测是您的 ObjectContext 正在积累很多实体实例。SaveChanges 似乎有一个阶段，其时间与加载的实体数量呈线性关系。这可能是它花费越来越长的事实的原因。

解决此问题的一种方法是使用多个较小的 ObjectContext 来摆脱旧的实体实例。

# javascript - 如何在我的浏览器正在加载的页面中插入 Javascript？

> ID：10304840
> 
> 赞同：0
> 
> 时间：2012-04-24T19:38:15.183
> 
> 标签：javascript, browser, squid

我已经用 Javascript 编写了一堆实用函数，我希望“以某种方式”能够透明/自动插入任意站点（即，我无法控制或无法`root`访问的站点）提供的网页中。

我想知道至少有两种实现这一目标的方法。我有一个模糊的想法，这可以通过`squid`在我的（Fedora）工作站上本地运行的代理服务器来完成，但不确定。因为我在 Linux 工作站上，所以也欢迎使用简单、轻量级的命令行工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:35:35.793

[Greasemonkey](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/)使您可以指定脚本，然后为特定网站自动执行这些脚本。

# ios - 制作一个用于我的 iOS 应用程序的 Web 服务器

> ID：10304841
> 
> 赞同：1
> 
> 时间：2012-04-24T19:38:15.923
> 
> 标签：ios, webserver, server-push, osx-server

我知道这是一个广泛的问题，但我是服务器新手。我已经在互联网上甚至在书店中搜索了数周的方法或教程，但我似乎仍然找不到展示和解释如何制作 Web 服务器的好文章或书籍，所以我可以将信息推送到我正在开发的 iOS 应用程序中。有谁知道我可以通过任何好的书籍或教程来获得用于 iOS 应用程序的 Web 服务器的基础知识？我已经购买了 Mac OS X Lion Server 并让网络服务器与我的网站一起工作，但我似乎无法弄清楚如何为此添加用户名和密码——更不用说将服务器中的信息推送到应用程序中了。

如果有人在 iOS 应用程序中使用 Lion Server 有任何经验，我很想听听你的两分钱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:05:40.287

如果你想用 Ruby on Rails 编写你的服务器，你可以从[Michael Hartl 的 Rails 教程](http://ruby.railstutorial.org/)开始学习。[然后你可以在Heroku](http://www.heroku.com/)上免费部署你的服务器。除了对您的应用程序有用之外，了解一些 Rails 对您的技能也很有帮助。

在客户端 (iOS) 端，请查看[RestKit](http://restkit.org/)，它确实简化了许多客户端-服务器通信。

如果您需要托管文件（例如图像），请查看[Amazon S3](http://aws.amazon.com/s3/)。它是免费开始的，他们有一个适用于 iOS 的 SDK。

我自己正在使用所有这些，并且它们一直运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T19:42:12.797

这是一个非常常见的问题，但很难找到一个好的答案。我个人的建议是使用[Parse](http://www.parse.com)。这使您可以专注于应用程序开发而几乎忽略服务器端的东西。它还处理线程，因此您可以避免该主题，直到您对开发更加熟悉。

如果您一心想要构建自己的服务器，请查看[这篇](http://gavinmorrice.com/blog/posts/21-building-a-rest-api-in-rails-3)文章，了解如何使用 Rails 开始使用 RESTful 服务。这向您展示了如何从服务器发出 JSON 和 xml 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:47:22.717

看看谷歌应用引擎。您可以非常快速地启动并运行服务器（使用 Python，这是一种非常容易学习的语言）。如果您只是修修补补，它将完全免费。如果您的应用程序取得巨大成功，您将能够快速扩展。

开始后，您可以在本地计算机上运行“开发服务器”版本，然后只需单击几下即可从 google 毕业。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T19:41:20.193

我认为一个好的方法是 PHP + MySQL 来处理服务器端数据，这可能有点棘手，因为它是一种新的编程语言，但我认为它是在 MacOSx 上开箱即用的配置。

另一种选择是某种具有开箱即用的宁静网络服务的服务器。

# java - Java并发：如何在处理过程中判断哪个Future属于哪个Callable？

> ID：10304843
> 
> 赞同：5
> 
> 时间：2012-04-24T19:38:22.600
> 
> 标签：java, concurrency, future, executorservice, callable

我有一组 Callables 和一个 ExecutorService。当我调用All 时，我得到一个Future 对象列表。在 Future 完成之前，如何判断哪个 Future 对象映射到哪个 Callable？事后我可以告诉你，因为

代码：

```
 ExecutorService es = .....;

 Collection<Callables> uniqueCallables = .....;  // each Callable is unique!

 List<Future> futures = es.invokeAll(uniqueCallables);

 // TODO--find unique Future A which is the future for Callable A! 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T19:44:15.650

基于[Java 参考](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29)，`invokeAll(uniqueCallables)`将订单保留为由以下`List<Future>`生成的订单`uniqueCallables.iterator()`：

> **Returns**：代表任务的 Futures 列表，其顺序与迭代器为给定任务列表生成的顺序相同，每个任务都已完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T01:36:15.207

听起来您只需要能够从 Future 中查找原始可调用对象。如果您没有使用 invokeAll，则可以装饰包装 submit() 的 Executor 以创建一个 ContextualFuture 来保留对原始可调用对象的引用。

```
/*pseudo example*/
class ContextualFuture<RETURN> implements Future<RETURN> {
   private Callable<RETURN> callable;
   private Future<RETURN> wrappedFuture;
   public ContextualFuture(Callable<RETURN> callable, Future<RETURN> future){
       this.callable = callable;
       this.future = future;
   }
   // implemented/wrapped methods 
}

class ContextualThreadPool {
   private ExecutorService wrappedExecutor;
   public <T> ContextualFuture<T> submit(Callable<T> task){
       Future<T> f = wrappedExecutor.submit(task);
       return new ContextualFuture<T>(task, f);
   }
} 
```

# delphi - 如何在 Delphi 上正确定义函数？

> ID：10304845
> 
> 赞同：1
> 
> 时间：2012-04-24T19:38:41.220
> 
> 标签：delphi, function, delphi-7

我有这个函数声明和实现

```
public
function AddWordReference(wordId,translateId:Longint):Longint;
{***}
function AddWordReference(wordId,translateId:Longint):Longint;
begin
try
 if((wordId <> -1) OR (translateId <> -1))  Then
 begin
 DataModule1.TranslateDictionary.AppendRecord([nil,wordId,translateId]);
 DataModule1.TranslateDictionary.Last;
 AddWordReference := DataModule1.TranslateDictionary.FieldByName('Id').AsInteger;
 end;
Except
ShowMessage('Error wirh adding reference');
AddWordReference := -1;
end;
AddWordReference := -1;
end; 
```

我有这个错误：

```
[Error] AddFormUnit.pas(34): Unsatisfied forward or external declaration: 'TForm2.AddWordReference' 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T21:07:12.977

它是您的`TForm2`类的成员，因此在实现部分中，您必须将其声明为`TForm2.AddWordReference`而不是 just `AddWordReference`。然后在方法本身内部，您应该将返回值分配给编译器的`Result`变量而不是`AddWordReference`方法名称：

```
public
  function AddWordReference(wordId, translateId: Longint): Longint; 
```

.

```
function TForm2.AddWordReference(wordId, translateId: Longint): Longint;
begin
  Result := -1;
  try
    if (wordId <> -1) OR (translateId <> -1) then
    begin
      DataModule1.TranslateDictionary.AppendRecord([nil, wordId, translateId]);
      DataModule1.TranslateDictionary.Last;
      Result := DataModule1.TranslateDictionary.FieldByName('Id').AsInteger;
    end;
  except
    ShowMessage('Error wirh adding reference');
  end;
end; 
```

# sql-server - 在设置它的同一 SELECT 语句中使用 SQL 变量进行比较

> ID：10304846
> 
> 赞同：0
> 
> 时间：2012-04-24T19:38:41.173
> 
> 标签：sql-server, tsql

如何使以下 T-SQL 语句合法？我可以复制为每个 CASE 选项设置 @Type 变量的子查询，但我宁愿只执行一次子查询。可能吗？

```
SELECT
      @Type = (SELECT CustomerType FROM dbo.Customers WHERE CustomerId = (SELECT CustomerId FROM dbo.CustomerCategories WHERE CatId= @CatId)),
      CASE
         WHEN @Type = 'Consumer'THEN dbo.Products.FriendlyName
         WHEN @Type = 'Company' THEN dbo.Products.BusinessName
         WHEN @Type IS NULL THEN dbo.Products.FriendlyName
         WHEN @Type = '' THEN dbo.Products.FriendlyName
      END Product,
      ...
FROM
      Products
INNER JOIN
      Category
... 
```

**编辑**：将我的示例修改为更具体...现在必须运行...明天会回来...抱歉短签但必须接孩子：D 明天再回来查看。谢谢！！

**澄清**：我不能将两者分开：在子查询的 where 子句中，我需要引用主查询的 join stmt 中使用的表中的列。如果我将它们分开，那么 @Type 将失去相关性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T19:42:15.883

为什么不把它分成两个操作呢？您认为通过将它们整合到一个语句中可以获得什么？

```
SELECT @Type = (subquery);

SELECT CASE WHEN @type = 'Consumer'... 
```

冒着听起来迟钝的风险，你真的需要这个变量吗？为什么不：

```
SELECT CASE WHEN col_form_subquery = 'Consumer' THEN ...
  END Product
FROM (<subquery>) AS x; 
```

使用该表单，您需要决定是要为变量赋值还是检索结果。

您还可以提取多个变量，例如

```
SELECT @Col1 = Col1, @Col2 = Col2
  FROM (<subquery>) AS x;

-- then refer to those variables in your other query:

SELECT *, @Col1, @Col2 FROM dbo.Products WHERE Col1 = @Col2; 
```

但这都是猜测，因为您没有分享足够的细节。

**编辑**好吧，既然我们有一个真正的查询并且可以更好地理解你所追求的，让我们看看我们是否可以为你写一个新版本。我假设您只是尝试存储 @Type 变量，以便您可以在查询中重新使用它，并且您没有尝试将值存储在那里以供以后使用（在此查询之后）。

```
SELECT CASE 
      WHEN c.CustomerType = 'Company' THEN p.BusinessName
      WHEN COALESCE(c.CustomerType, '') IN ('Consumer', '') THEN p.FriendlyName
    END
    --, other columns
FROM dbo.Products AS p
INNER JOIN dbo.Category AS cat 
  ON p.CatId = cat.CatId
INNER JOIN dbo.CustomerCategories AS ccat
  ON ccat.CatId = cat.CatId
INNER JOIN dbo.Customers AS c
  ON c.CustomerId = ccat.CustomerId
WHERE cat.CategoryId = @CatId; 
```

一些注意事项：

*   我不确定您为什么认为子查询是解决此问题的正确方法。通常，构建适当的连接并让 SQL Server 整体优化查询要好得多（对其他开发人员来说也更清楚），而不是试图变得聪明并在很大程度上独立于主查询来优化单个子查询。正确的连接将有助于预先消除行，否则这些行可能会通过子查询被物化 - 只会被丢弃。信任 SQL Server 来完成它的工作，在这种情况下，它的工作是跨多个表执行连接。
*   如果 SELECT 不需要显示类别名称，则可能不需要加入 dbo.Category。如果是这样，则更改 where 子句并删除该连接（改为连接到 CusomterCategories）。
*   如果您已经涵盖了所有可能的情况，则可以将第二种情况更改为简单的 ELSE。
*   我对 Products 和 Category 之间的连接做了一个假设（为什么 Category 不像其他的那样是复数的？）。如果不是这样，请填写我们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T19:42:15.977

你不能不这样做，你会得到以下错误

*为变量赋值的 SELECT 语句不得与数据检索操作结合使用。*

将两者分开，然后将变量作为 select 语句的一部分返回

# reporting-services - SSRS 2008 R2 链接参数

> ID：10304847
> 
> 赞同：0
> 
> 时间：2012-04-24T19:38:41.757
> 
> 标签：reporting-services, parameters, cascade

我有一个包含三个参数的报告：国家组合框、开始日期和结束日期（财政年度）。我希望根据国家/地区组合框选择来更新开始日期和结束日期。

我制作了一个接收国家代码作为参数的数据集，并返回所选国家的开始日期和结束日期。然后我将日期的默认值链接到数据集。

这在第一次选择一个国家时非常有效，但不适用于随后的国家选择。如果我将日期参数的类型更改为组合框，它每次都有效，但我不想失去选择国家后“微调”日期的灵活性。

我在问不可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:54:52.830

Microsoft 认为此行为是设计使然 - 请参阅此[Microsoft Connect 问题](https://connect.microsoft.com/SQLServer/feedback/details/268032/default-does-not-get-refreshed-for-cascading-parameters)。

通常有一种解决方法 - 当依赖参数的值被第一个参数中的选择无效时，它会被刷新。

但是，由于您希望用户能够覆盖开始日期和结束日期，因此您不能指定国家/地区的默认值是唯一可用的值。

您*可以*做的是在第一个国家/地区参数之后添加第二个国家/地区参数，其默认值和唯一可用值是第一个国家/地区参数的值，并根据第二个国家/地区参数的值设置开始和结束参数的默认值国家参数。

不幸的是，如果您将第二个国家/地区参数设置为隐藏，则不会填充其默认值 - 因此第二个国家/地区参数必须保持可见，才能正常工作。

您可以利用这一点 - 例如，将国家/地区的默认日期范围显示为参数的标签；这将使用户能够看到默认日期范围已被覆盖的位置。

# php - PHP 致命错误：允许的内存大小为 268435456 字节已用尽

> ID：10304851
> 
> 赞同：1
> 
> 时间：2012-04-24T19:39:03.670
> 
> 标签：php, mysql, fatal-error

我一直看到内存耗尽错误

> PHP 致命错误：允许的内存大小为 268 435 456 字节已用尽

在我的日志文件中。

即使服务器负载非常轻且无法在本地主机上重现，此错误也会随机出现。我有一个来自 hostgator 的 VPS 4 服务器，负载为 MB。php 配置允许高达 256 Mb。

代码如下

```
function func_select_array($qry)
{
    $i=0;
    $data=array();
    $qry_result=mysql_query($qry);

    if($qry_result)
    {
        while ($row=mysql_fetch_assoc($qry_result))
        {
            $data[$i] = $row;
            $i++;
        }
        return $data;
    }
    else 
    {
      return 2;
    }
}

    function func_check_rule_out_bid($auc_id,$bid_amount,$return_freq,$recheck)
    {
        $bid_qry="select * from tbl_bid where ubaid='".$auc_id."' and ubf='1' order by uba desc limit 0,10";
        $bid_array=func_select_array($bid_qry);
    } 
```

表 tbl_bid 有 2800 条记录。我在 func_select_array 函数内的 while 循环中出现内存耗尽错误。我无法想象这个查询需要 256M+。它似乎不是php问题，而是mysql中的问题。请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:54:21.323

内存耗尽可能很难调试，因为错误只告诉您内存最终用完的位置，而不是大部分内存的使用位置。

您可以使用内存分析器（例如 Xdebug 中的分析器）来查找所有内存的去向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:52:28.590

您应该对您的查询使用 EXPLAIN。确保您没有做一些繁重的查询（乍一看似乎没有）。

第二种方式，可能是你得到了一些太重的 BLOB ot TEXT 字段。不在你当地，这就是为什么你不能在当地环境中得到这个。

确保你没有得到一个无限循环。可能？

使用跟踪 php 错误并尝试/​​捕获此块以获得有关错误的更好信息。

```
try {
        while ($row=mysql_fetch_assoc($qry_result))
        {
            $data[$i] = $row;
            $i++;
        }

} catch (Exception $e) {
   debug_print_backtrace(); 
   var_dump($e->getMessage());
} 
```

# c# - ManualResetEventSlim 中的单次旋转需要多长时间

> ID：10304854
> 
> 赞同：14
> 
> 时间：2012-04-24T19:39:10.617
> 
> 标签：c#, multithreading, c#-4.0

c# 中的单次旋转需要多长时间？我想知道的是有一个 ManualResetEventSlim 有一个 spinCount 参数，我想知道每次旋转的时间以毫秒为单位或它是如何工作的？我知道旋转对于短等待比内核等待更有效。所以我只是想看看我应该为通常需要 2-10 秒的工作设置这个值。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-24T20:44:09.073

`spinCount`构造函数中的参数与执行旋转等待所花费的毫秒数之间没有关联。

下面是它的工作原理。MRES 使用此`spinCount`参数来完成自己的等待程序，独立于`Thread.SpinWait`.

*   `Thread.Yield`前 10 次迭代在调用和之间交替`Thread.SpinWait`。呼叫以`Thread.SpinWait`旋转开始，`Environment.ProcessorCount * 4`然后在每次连续呼叫时大约翻倍。
*   此后每次迭代都可以被 20 次调用整除`Thread.Sleep(1)`。
*   否则那些能被 5 整除的电话`Thread.Sleep(0)`。
*   否则`Thread.Yield`被调用。
*   100次`CancellationToken`后每 10 次迭代检查一次。

如您所见，在 MRES 的自定义旋转程序中进行了相当复杂的歌舞。并且算法可能会因版本而异。真的没有办法预测每次旋转会持续多长时间。

如果您的典型等待时间是 2-10 秒，那么您的代码几乎肯定会通过`Monitor.Wait`和`Monitor.Pulse`协调进行内核级等待，因为`spinCount`无论如何参数都限制为 2047。

另外，2-10 秒是很长的时间。你真的想转那么久吗？

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-24T20:34:07.450

旋转计数应该很小。默认值为 10（如果在单处理器上运行，则为 1）。如果您使用允许您指定旋转计数的构造函数，则允许的最大值为 2047。如果事件没有很快发出信号，则 ManualResetEventSlim 使用常规事件句柄等待。正如@HenkHolterman 所提到的，所涉及的时间远比几秒钟小得多。我们说的是周期，而不是秒甚至毫秒。

[http://msdn.microsoft.com/en-us/library/5hbefs30.aspx](http://msdn.microsoft.com/en-us/library/5hbefs30.aspx)

> 在 .NET Framework 版本 4 中，您可以使用 System.Threading.ManualResetEventSlim 类在预期等待时间非常短且事件不跨越进程边界时获得更好的性能。ManualResetEventSlim 在等待事件发出信号时使用短时间忙碌旋转。当等待时间很短时，旋转可能比使用等待句柄等待要便宜得多。但是，如果事件在特定时间段内未发出信号，ManualResetEventSlim 将求助于常规事件句柄等待。

[http://msdn.microsoft.com/en-us/library/ee722114.aspx](http://msdn.microsoft.com/en-us/library/ee722114.aspx)

> 在多核计算机上，当资源预计不会被长时间持有时，等待线程在用户模式下自旋几十或几百个周期，然后重试获取资源会更有效率. 如果资源在旋转后可用，那么您已经节省了数千个周期。如果资源仍然不可用，那么您只花费了几个周期，仍然可以进入基于内核的等待。

编辑：要直接回答您的问题，单次旋转的时间长度无法明确回答，因为它取决于运行它的硬件。 [http://msdn.microsoft.com/en-us/library/system.threading.thread.spinwait(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.threading.thread.spinwait(v=vs.95).aspx)

> SpinWait 实质上将处理器置于一个非常紧凑的循环中，循环计数由迭代参数指定。因此，等待的持续时间取决于处理器的速度。

# html - 是否有 HTML5 警告框？

> ID：10304857
> 
> 赞同：1
> 
> 时间：2012-04-24T19:39:29.613
> 
> 标签：html

我在 iPad 应用程序上使用 HTML5。

有什么类似于警报框的东西可以用来显示消息吗？我知道 HTML5 有一个对话框，但如果有一个警告框会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:42:10.897

您可以使用良好的老式 JavaScript 警报：

```
alert("Hey!  Pay attention!") 
```

见这里： [http ://www.w3schools.com/jsref/met_win_alert.asp](http://www.w3schools.com/jsref/met_win_alert.asp)

# c# - 如何使用 System.Net.HttpClient 发布复杂类型？

> ID：10304863
> 
> 赞同：102
> 
> 时间：2012-04-24T19:39:57.210
> 
> 标签：c#, asp.net-web-api

我有一个想要使用 Web API 的自定义复杂类型。

```
public class Widget
{
    public int ID { get; set; }
    public string Name { get; set; }
    public decimal Price { get; set; }
} 
```

这是我的 Web API 控制器方法。我想像这样发布这个对象：

```
public class TestController : ApiController
{
    // POST /api/test
    public HttpResponseMessage<Widget> Post(Widget widget)
    {
        widget.ID = 1; // hardcoded for now. TODO: Save to db and return newly created ID

        var response = new HttpResponseMessage<Widget>(widget, HttpStatusCode.Created);
        response.Headers.Location = new Uri(Request.RequestUri, "/api/test/" + widget.ID.ToString());
        return response;
    }
} 
```

现在我想用来`System.Net.HttpClient`调用该方法。但是，我不确定将什么类型的对象传递给该`PostAsync`方法，以及如何构造它。这是一些示例客户端代码。

```
var client = new HttpClient();
HttpContent content = new StringContent("???"); // how do I construct the Widget to post?
client.PostAsync("http://localhost:44268/api/test", content).ContinueWith(
    (postTask) =>
    {
        postTask.Result.EnsureSuccessStatusCode();
    }); 
```

如何`HttpContent`以 Web API 可以理解的方式创建对象？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2013-02-05T18:42:08.623

泛型`HttpRequestMessage<T>`已被**删除**。这 ：

```
new HttpRequestMessage<Widget>(widget) 
```

将**不再工作**。

相反，[从这篇文章](http://aspnetwebstack.codeplex.com/discussions/350492)中，ASP.NET 团队包含了一些[新的调用](http://msdn.microsoft.com/en-us/library/hh944339%28v=vs.108%29.aspx)来支持此功能：

```
HttpClient.PostAsJsonAsync<T>(T value) sends “application/json”
HttpClient.PostAsXmlAsync<T>(T value) sends “application/xml” 
```

因此，新代码（[来自 dunston](https://stackoverflow.com/a/10305214/39758)）变为：

```
Widget widget = new Widget()
widget.Name = "test"
widget.Price = 1;

HttpClient client = new HttpClient();
client.BaseAddress = new Uri("http://localhost:44268");
client.PostAsJsonAsync("api/test", widget)
    .ContinueWith((postTask) => postTask.Result.EnsureSuccessStatusCode() ); 
```

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2012-04-24T20:04:17.077

您应该改用该`SendAsync`方法，这是一种通用方法，可将输入序列化到服务

```
Widget widget = new Widget()
widget.Name = "test"
widget.Price = 1;

HttpClient client = new HttpClient();
client.BaseAddress = new Uri("http://localhost:44268/api/test");
client.SendAsync(new HttpRequestMessage<Widget>(widget))
    .ContinueWith((postTask) => postTask.Result.EnsureSuccessStatusCode() ); 
```

如果您不想创建具体类，可以使用`FormUrlEncodedContent`该类进行创建

```
var client = new HttpClient();

// This is the postdata
var postData = new List<KeyValuePair<string, string>>();
postData.Add(new KeyValuePair<string, string>("Name", "test"));
postData.Add(new KeyValuePair<string, string>("Price ", "100"));

HttpContent content = new FormUrlEncodedContent(postData); 

client.PostAsync("http://localhost:44268/api/test", content).ContinueWith(
    (postTask) =>
    {
        postTask.Result.EnsureSuccessStatusCode();
    }); 
```

注意：您需要将您的 id 设置为可为空的 int ( `int?`)

* * *

## 回答 #3

> 赞同：76
> 
> 时间：2014-04-15T22:21:25.910

请注意，如果您使用的是可移植类库，**则 HttpClient 将没有 PostAsJsonAsync 方法**。要使用可移植类库将内容发布为 JSON，您必须执行以下操作：

```
HttpClient client = new HttpClient();
HttpContent contentPost = new StringContent(argsAsJson, Encoding.UTF8, 
"application/json");

await client.PostAsync(new Uri(wsUrl), contentPost).ContinueWith(
(postTask) => postTask.Result.EnsureSuccessStatusCode()); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-30T18:49:48.343

如果您想要其他答案中提到的便利方法类型但需要可移植性（或者即使您不需要），您可能需要查看[Flurl](https://flurl.io) [披露：我是作者]。它（薄薄地）包装`HttpClient`了 Json.NET 并添加了一些流利的糖和其他好东西，包括一些烘焙[测试助手](https://flurl.io/docs/testable-http)。

以 JSON 格式发布：

```
var resp = await "http://localhost:44268/api/test".PostJsonAsync(widget); 
```

或 URL 编码：

```
var resp = await "http://localhost:44268/api/test".PostUrlEncodedAsync(widget); 
```

上面的两个示例都返回一个`HttpResponseMessage`，但如果您只想切入正题，Flurl 包含返回其他内容的扩展方法：

```
T poco = await url.PostJsonAsync(data).ReceiveJson<T>();
dynamic d = await url.PostUrlEncodedAsync(data).ReceiveJson();
string s = await url.PostUrlEncodedAsync(data).ReceiveString(); 
```

Flurl 在 NuGet 上可用：

```
PM> Install-Package Flurl.Http 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-10T18:27:34.433

在研究了很多替代方案后，我遇到了另一种方法，适用于 API 2.0 版本。

（VB.NET 是我最喜欢的，所以……）

```
Public Async Function APIPut_Response(ID as Integer, MyWidget as Widget) as Task(Of HttpResponseMessage)
    Dim DesiredContent as HttpContent = New StringContent(JsonConvert.SerializeObject(MyWidget))
    Return Await APIClient.PutAsync(String.Format("api/widget/{0}", ID), DesiredContent)
End Function 
```

祝你好运！对我来说，这解决了（最后！）。

问候，彼得

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-27T12:38:36.717

我认为你可以这样做：

```
var client = new HttpClient();
HttpContent content = new Widget();
client.PostAsync<Widget>("http://localhost:44268/api/test", content, new FormUrlEncodedMediaTypeFormatter())
    .ContinueWith((postTask) => { postTask.Result.EnsureSuccessStatusCode(); }); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-24T19:36:35.407

如果像我这样的人并不真正理解以上所有内容，我会举一个对我有用的简单示例。如果你有一个 url 为“ [http://somesite.com/verifyAddress](http://somesite.com/verifyAddress) ”的 web api，它是一个 post 方法，它需要你传递一个地址对象。你想在你的代码中调用这个 api。在这里你可以做什么。

```
 public Address verifyAddress(Address address)
    {
        this.client = new HttpClient();
        client.BaseAddress = new Uri("http://somesite.com/");
        client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
        var urlParm = URL + "verifyAddress";
        response = client.PostAsJsonAsync(urlParm,address).Result;
        var dataObjects = response.IsSuccessStatusCode ? response.Content.ReadAsAsync<Address>().Result : null;
        return dataObjects;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-26T14:56:41.947

这是我根据此处的其他答案得出的代码。这适用于接收和响应复杂类型的 HttpPost：

```
Task<HttpResponseMessage> response = httpClient.PostAsJsonAsync(
                       strMyHttpPostURL,
                       new MyComplexObject { Param1 = param1, Param2 = param2}).ContinueWith((postTask) => postTask.Result.EnsureSuccessStatusCode());
                    //debug:
                    //String s = response.Result.Content.ReadAsStringAsync().Result;
                    MyOtherComplexType moct = (MyOtherComplexType)JsonConvert.DeserializeObject(response.Result.Content.ReadAsStringAsync().Result, typeof(MyOtherComplexType)); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-08-31T19:17:25.270

像这样拨打服务电话：

```
public async void SaveActivationCode(ActivationCodes objAC)
{
    var client = new HttpClient();
    client.BaseAddress = new Uri(baseAddress);
    HttpResponseMessage response = await client.PutAsJsonAsync(serviceAddress + "/SaveActivationCode" + "?apiKey=445-65-1216", objAC);
} 
```

和这样的服务方法：

```
public HttpResponseMessage PutSaveActivationCode(ActivationCodes objAC)
{
} 
```

PutAsJsonAsync 负责网络上的序列化和反序列化

# asp.net - 触发 OnClick 事件时，GridView 不返回数据绑定行

> ID：10304865
> 
> 赞同：2
> 
> 时间：2012-04-24T19:40:07.447
> 
> 标签：asp.net, gridview

我有一个 GridView，它由两个通过存储过程填充的数据库字段和三个用于用户输入的字段（两个复选框控件和一个文本框）组成，当我单击保存按钮时，我可以从三个控件中获取信息，但什么也没有来自通过数据库填充的两个。我怎样才能得到前两个字段？

```
<asp:GridView ID="gvA1" runat="server" AutoGenerateColumns="false" DataKeyNames="CodeNo" AutoGenerateSelectButton="false" EnablePersistedSelection="True" Visible="false">
    <Columns>
        <asp:TemplateField Visible="false" >
            <ItemTemplate>
                <%#DataBinder.Eval(Container.DataItem, "CodeNo")%>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField ItemStyle-Wrap="true" ItemStyle-Width="400px" HeaderText="Violation">
            <ItemTemplate>
                <%#DataBinder.Eval(Container.DataItem, "CodeViolationCited") %>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:CheckBox ID="A1Accordion_cbPool" runat="server" Text="Pool:" />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:CheckBox ID="A1Accordion_cbSpa" runat="server" Text="Spa:" />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Additional Comments" Visible="true">
            <ItemTemplate>
                <asp:TextBox ID="A1Accordion_tb" runat="server" TextMode="MultiLine"></asp:TextBox>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

代码背后：

```
protected void SaveAndCollapseA1(object sender, EventArgs e)
{
    //good stuff
    CheckBox myCheckBox_1 = gvA1.Rows[0].FindControl("A1Accordion_cbPool") as CheckBox;
    CheckBox myCheckBox_2 = gvA1.Rows[0].FindControl("A1Accordion_cbSpa") as CheckBox;
    TextBox myTextBox = gvA1.Rows[0].FindControl("A1Accordion_tb") as TextBox;

    //not so good stuff
    String myString1 = gvA1.Rows[0].Cells[0].ToString();
    String myString2 = gvA1.Rows[0].Cells[1].ToString();

} 
```

我想通了，但是我听到的时间还不够长，无法通过链接发布解决方案，但是如果您这样更改列：

```
<asp:label ID="lblA1CodeNo" runat="server" text='<%# Eval("CodeNo") %>'></asp:label> 
```

那么这些值是可用的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:08:41.157

尝试：

```
<%# Bind("CodeViolationCited") %> 
```

代替

```
<%#DataBinder.Eval(Container.DataItem, "CodeViolationCited") %> 
```

eval 是一种方式，bind 是两种方式。

[有关数据绑定表达式，请参阅 Microsoft 的文档](http://msdn.microsoft.com/en-us/library/ms178366.aspx)

# facebook - 获得新的延长 60 天 Facebook 令牌

> ID：10304866
> 
> 赞同：2
> 
> 时间：2012-04-24T19:40:08.710
> 
> 标签：facebook, facebook-graph-api

我正在按照此处概述的方法将令牌延长至 60 天：

[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

换句话说，我打电话给[https://graph.facebook.com/oauth/access_token](https://graph.facebook.com/oauth/access_token)？
client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=EXISTING_ACCESS_TOKEN

使用当前的访问令牌。

我第一次尝试这个时，它实际上运行良好，并且令牌延长了 60 天。现在它似乎不再起作用了，即使距离我上次请求延期已经过去了几天。如果我没看错的话，你应该可以每 24 小时延长一次……

……还有人看到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T06:46:35.213

请看下面的帖子，我已经延长了访问令牌的有效期，它对我来说很好用。

[如何延长访问令牌有效期？](https://stackoverflow.com/questions/10247108/how-to-extend-access-token-validity/10248902#10248902)

# java - 从文本文件中读取

> ID：10304869
> 
> 赞同：0
> 
> 时间：2012-04-24T19:40:16.497
> 
> 标签：java

我正在编写一个仅从文本文件中读取整数的程序。我已经完成了该计划的大部分内容，但是有一件事困扰着我

当文本文件中存在非整数时，应打印所有正确的整数，元素无效，替换无效的元素。例如 10, 203, 2.02 10 将打印 10, 203, element not valid 10 。为此，我是否使用数组来访问无效的部分？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:11:37.993

如果参数的数量是 2，你会怎么做：

```
public static void main(String[] args) {
        if (args.length != 2) {
            System.err.println("Usage: ...");
        }
    } 
```

# javascript - 使用 JavaScript 更改边框颜色并从 Javascript 保存 Cookie

> ID：10304870
> 
> 赞同：0
> 
> 时间：2012-04-24T19:40:23.060
> 
> 标签：javascript, cookies, border

我使用一些 JavaScript 来更改我的 HTML 中某些 div 的颜色，并且它们有两个问题。第一个是我有一个 CSS 三角形，我需要在点击事件上更改边框颜色，但不能使用下一个代码：

```
document.getElementById('triangle').style.borderLeft = color; 
```

有人知道吗？

下一个问题是下一个：一旦颜色改变了，我想把它保存为一个cookie，并在访客下次访问时加载它。这是我当前的 JavaScript：

```
function change(color)
{
    document.getElementById('tinybox1').style.backgroundColor = color;
    document.getElementById('tinybox2').style.backgroundColor = color;
    document.getElementById('tinybox3').style.backgroundColor = color;
    document.getElementById('tinybox4').style.backgroundColor = color;
    document.getElementById('text').style.backgroundColor = color;
    document.getElementById('pinnable').style.backgroundColor = color;
    // document.getElementById('triangle').style.borderLeft = color;
} 
```

我希望有人可以帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:47:28.113

对于第一个问题，使用`@VisioN`这样的答案：

```
var color = "#000";
document.getElementById('triangle').style.borderLeft = "1px solid " + color; 
```

关于cookies的第二个尝试这个（假设你想使用简单的javascript）将它保存为**cookie.js**并将其导入你的html：

```
function createCookie(name,value,days) {
    var expires = "";
    if (days) {
        var date = new Date( );
        date.setTime(date.getTime() + (days*24*60*60*1000));
        expires = "; expires=" + date.toGMTString();
    }
    else expires = "";
    document.cookie = name + "=" + value + expires + "; path=/";
}

function readCookie(name) 
{
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for( var i=0;i < ca.length;i++) 
    {
        var c = ca[i];
        while (c.charAt( 0)==' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
    return null;
}

function eraseCookie( name) 
{
    createCookie(name,"",-1);
} 
```

现在，要创建 cookie，请执行以下操作：

```
createCookie('cookiename', 'cookievalue', false); 
```

要评估 cookie，请执行以下操作：

```
 var cookie = readCookie('cookiename');

 // var cookie will be null if there is no cookie to read.
 if(cookie == 'cookievalue'){
   //do something
 } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:54:52.950

要*仅*更改边框颜色而不必指定大小和类型，请使用：

```
element.style.borderLeftColor = "#000"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:43:52.630

对于到目前为止的第一个问题，可以这样做：

```
var color = "#000";
document.getElementById('triangle').style.borderLeft = "1px solid " + color; 
```

或者结合一些风格。

**CSS：**

```
#triangle {
    ...
    border-left-width: 1px;
    border-style: solid;
}​ 
```

**JS：**

```
var color = "#000";
document.getElementById('triangle').style.borderLeftColor = color; 
```

# java - 安卓上的 JXTA 应用程序

> ID：10304873
> 
> 赞同：1
> 
> 时间：2012-04-24T19:40:29.603
> 
> 标签：java, android, p2p, jxta

我正在尝试构建一个在两个启用 wifi 的 android 设备之间建立 P2P 连接的应用程序。我已将 JXTA 2.5 库添加到 android 2.2 中，但不知道我哪里出错了。以运行时异常结束：未找到类错误和未找到实例错误。

除了将 .jar 文件包含到 android 项目中之外，还有其他事情要做吗？有什么要写的配置吗？如果是，请告诉我如何编写配置文件并在我的项目中使用它？我正在做最后一年的项目，所以如果您对此有任何指示，请告诉我？

提前致谢 ！

这是日志：

```
04-24 22:41:47.429: I/dalvikvm(556): Could not find method org.apache.log4j.Logger.getLogger, referenced from method net.jxta.peergroup.PeerGroupFactory.<clinit>
04-24 22:41:47.429: W/dalvikvm(556): VFY: unable to resolve static method 8971: Lorg/apache/log4j/Logger;.getLogger (Ljava/lang/String;)Lorg/apache/log4j/Logger;
04-24 22:41:47.441: D/dalvikvm(556): VFY: replacing opcode 0x77 at 0x0010
04-24 22:41:47.461: W/dalvikvm(556): VFY: unable to resolve static field 4047 (ERROR) in Lorg/apache/log4j/Level;
04-24 22:41:47.461: D/dalvikvm(556): VFY: replacing opcode 0x62 at 0x0012
04-24 22:41:47.461: W/dalvikvm(556): VFY: unable to resolve static field 4050 (WARN) in Lorg/apache/log4j/Level;
04-24 22:41:47.461: D/dalvikvm(556): VFY: replacing opcode 0x62 at 0x000c
04-24 22:41:47.469: W/dalvikvm(556): VFY: unable to resolve static field 4048 (FATAL) in Lorg/apache/log4j/Level;
04-24 22:41:47.469: D/dalvikvm(556): VFY: replacing opcode 0x62 at 0x001a
04-24 22:41:47.469: W/dalvikvm(556): VFY: unable to resolve static field 4048 (FATAL) in Lorg/apache/log4j/Level;
04-24 22:41:47.480: D/dalvikvm(556): VFY: replacing opcode 0x62 at 0x0045 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T22:21:14.063

JXTA 2.5 有问题。把它忘了吧。我领导发布 2.6 和 2.7。我们已经纠正了许多问题。我已经出版了一本名为 Practical JXTA II 的书，您可以在 scribd 上在线阅读。它包含示例。

您可能需要一个中央超级对等点，除非您只使用临时连接（广播）。

# c# - 将关系数据存储在单个专有文件中

> ID：10304874
> 
> 赞同：0
> 
> 时间：2012-04-24T19:40:34.077
> 
> 标签：c#, .net, file-io

在我的应用程序编程经验中，我一直在后端使用 SQL Server（或 Access）数据库来存储应用程序数据。我现在正在研究一些业务需求，这些业务需求可以处理非常适合关系数据库的数据，但它们要求将数据存储在应用程序将创建和加载的单个、可移植、自定义文件中。我知道应用程序保存单个文件或文档是一个非常常见的概念，以后可以加载并继续处理，但我不确定如何使用复杂数据实现这一点。我想到了加密 xml，但是如果我必须先将它全部加载回对象中，这将非常缓慢，或者可能会占用大量内存。有哪些选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T19:42:42.660

我建议您使用 SQLLite 或 Firebird 嵌入式数据库。还有其他选择。它们支持单文件使用，并为您的架构的未来版本（升级 SQL 脚本）提供清晰的升级路径。

我不明白加密是如何发挥作用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T19:45:15.197

在 .NET 环境中运行时，我认为[SQL Server Compact](http://en.wikipedia.org/wiki/SQL_Server_Compact)值得研究。它基本上是一个小型 SQL Server，不需要安装和配置为服务，而是您引用的 dll。您可以使用普通的数据访问工具，如 linq-to-sql 和实体框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:45:05.463

我想到了[SQLite 。](http://www.sqlite.org/)它是一个基于单个文件的数据库。这是[将 SQL 服务器数据库转换为 SQLite](http://www.codeproject.com/Articles/26932/Convert-SQL-Server-DB-to-SQLite-DB)的链接。另请查看[在 C# 应用程序中使用 SQLite](http://www.codeproject.com/Articles/22165/Using-SQLite-in-your-C-Application)

# java - Ehcache 与数据库不同步

> ID：10304875
> 
> 赞同：1
> 
> 时间：2012-04-24T19:40:42.067
> 
> 标签：java, jakarta-ee, concurrency, ehcache, race-condition

在使用 CMT 的 Java EE 服务器上，我使用 ehcache 在业务对象层 (EJB) 和数据访问层（使用 JDBC 的 POJO）之间实现缓存层。在使用自填充 Ehcache 时，我似乎遇到了访问同一记录的两个线程之间的竞争条件。缓存以记录的主键为键。

场景是：

1.  第一个线程更新数据库中的记录并从缓存中删除记录（但数据库提交不一定立即发生 - 可能还有其他查询要遵循。）
2.  第二个线程读取记录，导致重新填充缓存。
3.  第一个线程提交事务。

这一切都发生在几分之一秒内。这会导致缓存与数据库不同步，并且后续读取记录会返回陈旧的缓存数据，直到执行另一次更新，或者缓存中的条目过期。我可以处理短时间的陈旧数据（事务的典型长度），但不能处理几分钟，这是我想要缓存对象的时间。

有什么建议可以避免这种竞争条件吗？

**更新：**

在事务提交后清除缓存肯定是理想的。问题是，在使用 CMT 的 J2EE 环境中，当缓存层夹在业务层（无状态会话 EJB）和数据访问层之间时，如何做到这一点？

为了清楚这所施加的约束，所讨论的方法调用可能与之前或之后发生的其他方法调用在同一个事务中，也可能不在同一个事务中。我不能强制提交（或在单独的事务中执行此工作），因为这会改变客户端代码所期望的事务边界。任何后续异常都不会回滚整个事务（在这种情况下不必要地清除缓存是可接受的副作用）。我无法控制事务的入口点，因为它本质上是客户端可以使用的 API。将清除缓存的责任推给客户端应用程序是不合理的。

我希望能够推迟任何缓存清除操作，直到整个事务由 EJB 容器提交，但我发现无法挂钩该逻辑并使用无状态会话 bean 运行我自己的代码。

**更新#2：**

到目前为止，最有希望的解决方案是使用 ehcache 2.0 的 JTA 支持，除了主要的设计更改：http: [//ehcache.org/documentation/apis/jta](http://ehcache.org/documentation/apis/jta)

这意味着升级到 ehcache 2.x 并为数据库启用 XA 事务，这可能会产生负面影响。但这似乎是“正确”的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:01:37.460

您正在使用事务 -在**之后**删除缓存更有意义`commit`，即更改真正发生的时候。

这样，您只能在事务期间看到旧数据，之后的所有读取都具有最新视图。

**更新：**由于这是 CMT 特定的，您应该查看[SessionSynchronization](http://docs.oracle.com/javaee/6/api/javax/ejb/SessionSynchronization.html)接口，它是[afterCompletion()](http://docs.oracle.com/javaee/6/api/javax/ejb/SessionSynchronization.html#afterCompletion%28boolean%29)方法。这在[本教程中显示。](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/Transaction3.html#62994)

# java - 尝试将 JSP/JSF 网站从 Windows 迁移到 Linux 时出现服务器错误

> ID：10304881
> 
> 赞同：0
> 
> 时间：2012-04-24T19:41:14.450
> 
> 标签：java, jsp, jsf, tomcat, ubuntu

我一直在尝试让我的网站在 Tomcat 6.0.18 和 Ubuntu 11.10 中运行，但毫无结果。我从运行 Windows Server 2003 和 Tomcat 6.0.18 的服务器复制了站点文件。

我必须重做我们整个公司的网站，因此搬家了。Windows 机器是实时站点，Linux 机器是我的测试机，它最终将成为新的实时服务器的平台。（我更喜欢在 Windows 上运行 Linux Web 服务器，而我们以前的网站管理员选择 Windows 的原因我不知道。）

该网站是一堆 JSP/JSF 页面，对于它的大小和功能的网站来说过于复杂。我没有 Facelets、JSP 或 JSF 方面的背景，但过去 4 天我一直在网上阅读、检查日志和测试不同的东西，但无济于事。

尝试查看索引页面时，我不断收到以下错误：

```
type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: Servlet.init() for servlet Faces Servlet threw exception
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:433)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    java.lang.Thread.run(Thread.java:662)
root cause

java.lang.IllegalStateException: No Factories configured for this Application. This happens if the faces-initialization does not work at all - make sure that you properly include all configuration settings necessary for a basic faces application and that all the necessary libs are included. Also check the logging output of your web application and your container for any exceptions!
If you did that and find nothing, the mistake might be due to the fact that you use some special web-containers which do not support registering context-listeners via TLD files and a context listener is not setup in your web.xml.
A typical config looks like this;
<listener>
  <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
</listener>

    javax.faces.FactoryFinder.getFactory(FactoryFinder.java:106)
    javax.faces.webapp.FacesServlet.init(FacesServlet.java:105)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:433)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    java.lang.Thread.run(Thread.java:662)
note The full stack trace of the root cause is available in the Apache Tomcat/6.0.18 logs. 
```

这是我的 web.xml 文件的一部分：

```
 <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <listener>
        <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>corrections</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

...

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping> 
```

我听从了 BalusC 的建议并合并了 WAR 文件的使用。我停止了 Tomcat，复制了 WAR 文件，启动了 Tomcat，检查并发现站点目录/更正在那里，然后在浏览器中导航到该站点。大约 2-3 分钟后，屏幕上弹出 404 错误。

现在我在 catalina.out 中收到以下错误：

```
java.io.FileNotFoundException: /var/lib/tomcat/c:/tomcat/.keystore (No such file or directory)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:120)
        at org.apache.tomcat.util.net.jsse.JSSESocketFactory.getStore(JSSESocketFactory.java:337)
        at org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeystore(JSSESocketFactory.java:259)
        at org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeyManagers(JSSESocketFactory.java:444)
        at org.apache.tomcat.util.net.jsse.JSSESocketFactory.init(JSSESocketFactory.java:409)
        at org.apache.tomcat.util.net.jsse.JSSESocketFactory.createSocket(JSSESocketFactory.java:125)
        at org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:496)
        at org.apache.tomcat.util.net.JIoEndpoint.start(JIoEndpoint.java:519)
        at org.apache.coyote.http11.Http11Protocol.start(Http11Protocol.java:203)
        at org.apache.catalina.connector.Connector.start(Connector.java:1131)
        at org.apache.catalina.core.StandardService.start(StandardService.java:531)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Apr 24, 2012 1:50:13 PM org.apache.coyote.http11.Http11Protocol start
SEVERE: Error starting endpoint
java.io.FileNotFoundException: /var/lib/tomcat/c:/tomcat/.keystore (No such file or directory)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:120)
        at org.apache.tomcat.util.net.jsse.JSSESocketFactory.getStore(JSSESocketFactory.java:337)
        at org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeystore(JSSESocketFactory.java:259)
        at org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeyManagers(JSSESocketFactory.java:444)
        at org.apache.tomcat.util.net.jsse.JSSESocketFactory.init(JSSESocketFactory.java:409)
        at org.apache.tomcat.util.net.jsse.JSSESocketFactory.createSocket(JSSESocketFactory.java:125)
        at org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:496)
        at org.apache.tomcat.util.net.JIoEndpoint.start(JIoEndpoint.java:519)
        at org.apache.coyote.http11.Http11Protocol.start(Http11Protocol.java:203)
        at org.apache.catalina.connector.Connector.start(Connector.java:1131)
        at org.apache.catalina.core.StandardService.start(StandardService.java:531)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Apr 24, 2012 1:50:13 PM org.apache.catalina.startup.Catalina start 
```

然后在 localhost.2012-04-24.log 中，我看到了出于某种原因手动复制的旧网站。在重新启动 Tomcat 之前，我将该目录重命名为 Corrections_old。

```
Apr 24, 2012 1:49:59 PM org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet /corrections_old threw load() exception
java.lang.IllegalStateException: No Factories configured for this Application. This happens if the faces-initialization does not work at all - make sure that you properly include all configuration settings necessary for a basic faces application and that all the necessary libs are included. Also check the logging output of your web application and your container for any exceptions!
If you did that and find nothing, the mistake might be due to the fact that you use some special web-containers which do not support registering context-listeners via TLD files and a context listener is not setup in your web.xml.
A typical config looks like this;
<listener>
  <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
</listener>

        at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:106)
        at javax.faces.webapp.FacesServlet.init(FacesServlet.java:105)
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1172)
        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:992)
        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4058)... 
```

接下来我应该尝试什么？我删除了 Corrections_old 目录并重新启动了 Tomcat，但仍然出现 404 错误。我现在要阅读密钥库错误。

谢谢你，BalusC。我觉得我现在肯定会有所进展。

好的，在编辑 conf/server.xml 文件以将其定向到 .keystore 文件的正确位置后，我在 catalina.out 中收到以下错误：

```
Apr 24, 2012 2:24:31 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/lib/jvm/java-6-sun-1.6.0.26/jre/lib/amd64/server:/usr/lib/jvm/java-6-sun-1.6.0.26/jre/lib/amd64:/usr/lib/jvm/java-6-sun-1.6.0.26/jre/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib
Apr 24, 2012 2:24:31 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
Apr 24, 2012 2:24:32 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-443
Apr 24, 2012 2:24:32 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 2666 ms
Apr 24, 2012 2:24:32 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Apr 24, 2012 2:24:32 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.18
Apr 24, 2012 2:24:32 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive corrections.war
Apr 24, 2012 2:24:33 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/var/lib/tomcat/webapps/corrections/WEB-INF/lib/servlet-api-2.4.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Apr 24, 2012 2:24:35 PM org.apache.catalina.core.StandardContext addApplicationListener
INFO: The listener "org.apache.myfaces.webapp.StartupServletContextListener" is already configured for this context. The duplicate definition has been ignored.
log4j:WARN No appenders could be found for logger (org.apache.myfaces.shared_impl.webapp.webxml.WebXmlParser). 
```

在我的本地主机日志中：

```
Apr 24, 2012 2:24:45 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name '_filterChainProxy': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '_filterChainList': Cannot resolve reference to bean '_rememberMeFilter' while setting bean property 'filters' with key [6]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '_rememberMeFilter': Cannot resolve reference to bean '_rememberMeServices' while setting bean property 'rememberMeServices'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '_rememberMeServices': Initialization of bean failed; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [###.domain.SlideShowBean] for bean with name 'gcccSlideShowBean' defined in ServletContext resource [/WEB-INF/corrections-service.xml]; nested exception is java.lang.ClassNotFoundException: ###.domain.SlideShowBean 
```

（### 是已删除的域名。）我在 localhost 日志中收到另一个类似的错误，该错误与创建“_filterChainList”bean 的错误有关，这似乎与其中一个页面上的幻灯片有关（就像上面的错误一样） . 谢谢。

# ruby-on-rails - Rails ActiveRecord::Base 以编程方式重新映射列名

> ID：10304884
> 
> 赞同：0
> 
> 时间：2012-04-24T19:41:28.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

`title`给定一个具有, `title_sp`, ,等字段的表`title_jp`，并且知道用户的特定语言值（例如 jp），在运行时将表字段重新映射到模型属性的方法是什么。类似于在`find(*args)`.

类似于以下内容：

```
Posts.find(:all, :conditions => {:published => true}, :language => "jp") 
```

并让返回`Posts.title`的值由添加的理想指针中的值填充，如果它是 nil/empty `title_jp.`，它也能够回退到。`title/title_en``title_jp`

我一直在研究 overriding `.find`，但无法弄清楚如何批量重新映射字段名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:17:27.170

做这样的事很危险。您可以使用一些 find_by_sql 来执行此操作，但是如果您将对象保留回来，您可能会更改原始标题，因为模型不会知道它不是原始值。

更好的解决方案是创建一个虚拟属性，它根据参数选择要返回的最佳列。使用起来可能有点问题，但这样更安全。编写包装器并不难，因此可以通过一次调用访问整个集合，并将每个集合中的虚拟属性设置为正确的值。

如果您有多个要覆盖的字段，您可以编写一个小解决方案来为每个字段创建一个虚拟属性。如果您需要更多信息，请告诉我！

# arrays - Squeak String 数组和迭代

> ID：10304887
> 
> 赞同：1
> 
> 时间：2012-04-24T19:41:35.870
> 
> 标签：arrays, string, character, iteration, squeak

我创建了一个 Array 的子类，并为它编写了一些到目前为止运行良好的消息。但是，我现在在上一条消息时遇到问题这是我的代码正文：

```
startString: charToTest
"Returns a list of all the words that start with a given character"
|  toReturn i j numWords |
i:= 1.
j:= 1.
numWords := 0.
[i <= self size.] whileTrue: [
    (((self at: i) at: 1) = charToTest)
        ifTrue: [numWords := numWords + 1].
    i:= i+1.
].
toReturn := MyArray new: numWords.
i := 1\. 
[i <= numWords.] whileTrue: [
    (((self at: i) at: 1) = charToTest)
        ifTrue: [toReturn at: j put: (self at: i). j := j+1].
    i := i + 1.
].
^toReturn 
```

因此，本质上，该方法查看自身并创建一个新数组，其大小与以字符开头的单词数相同。然后它再次迭代，并将这些单词放入它返回的新数组中。我的工作区看起来完全像这样：

```
|freshArray testArray|
freshArray := MyArray new: 5.
freshArray
    at: 1 put: 'some';
    at: 2 put: 'things';
    at: 3 put: 'are';
    at: 4 put: 'simple';
    at: 5 put: 'things'.
testArray := freshArray startString: $s 
```

当我在我的工作区中选择此代码并打印它时，该方法*几乎*是正确的。但不完全是。由于某种原因，“toReturn”中的第二个位置没有被填满。输出如下所示：

```
 a MyArray('some' nil) 
```

为什么会这样？我是否在 if 语句之后的第二个迭代循环中正确分离了我的语句？我真的很困惑我做错了什么。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:54:32.010

您的第一次迭代计算以给定字符开头的单词数（假设字符串不为空，但您可以稍后对其进行检查）。到现在为止还挺好。但是，您第二次使用该计数 (numWords) 再次迭代数组时 - 这意味着仅考虑初始数组的第一个 'numWords' 插槽中的单词。

（您可能还想考虑用 do:aBlock 替换您的 while - 这更简洁，更 Smalltalk-y）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:31:09.577

我们倾向于使用更紧凑的形式：

```
testArray := freshArray select: [:each | charToTest = each first ] 
```

请注意，如果输入中有空字符串，这将失败

# javascript - 我是否错误地使用了 $(this) 或 .click？

> ID：10304891
> 
> 赞同：2
> 
> 时间：2012-04-24T19:41:45.217
> 
> 标签：javascript, jquery

我正在尝试构建一个简单的常见问题解答页面，其中的答案在单击他们的问题时会向下和向上滑动。当用户单击带有“问题”类的内容时，我希望 mytarget 变为 '#' + [那个问题的 id] + 'ans'，以便适当的答案向下滑动。

当我只给它一个答案的 ID 时，toggleSlide 部分就起作用了；我不确定我的 .click 函数是否错误，或者我对 $(this) 的使用是否错误，或者两者兼而有之。

```
$(document).ready(function() {
    var qid = '';
    var mytarget = '';

    function toggleSlide() {
        if ($(mytarget).css('display') == 'none') {
            $(mytarget).slideDown(600, 'swing');
        }

        else if ($(mytarget).css('display') == 'block') {
            $(mytarget).slideUp(600, 'swing');
        }
    };

    $('.answer').hide();
    $('.question').click(function() {
        qid = $('this').id();
        mytarget = '#' + qid + 'ans';
        toggleSlide();
    });
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T19:48:08.433

试试这个：

```
$(function() {  // shorthand for $(document).ready()...
    $('.answer').hide(); // preferably div.answer if they are all <div>s
    $('.question').click(function() {
        // no need to check what it currently is, use slideToggle
        $('#' + this.id + 'ans').slideToggle(600, 'swing');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:43:53.363

更改自：

```
$('this').id(); 
```

到：

```
$(this).attr('id') 
```

*   `this`是 javascript 中的关键字，而不是字符串。
*   `id`jQuery中没有函数，您可以使用`.attr('id')`.
    `id`是 DOM 元素的属性。所以你可以使用这个：`this.id`

* * *

```
$('.question').click(function() {
    qid = this.id;
    mytarget = '#' + qid + 'ans';
    toggleSlide();
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:44:16.280

不要这样做： `qid = $('this').id();`

做：`qid = $(this).attr('id');` 没有单引号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T19:48:40.687

```
function toggleSlide(mytarget) {
  if ($(mytarget).css('display')=='none'){
      $(mytarget).slideDown(600, 'swing');}

  else if ($(mytarget).css('display')=='block'){
         $(mytarget).slideUp(600, 'swing');}
}); 
```

当您调用该函数时，您应该传递参数：

```
 qid = $(this).id();
  mytarget= '#' + qid + 'ans';
  toggleSlide(mytarget); 
```

# expressionengine - 表达式引擎加入频道

> ID：10304892
> 
> 赞同：0
> 
> 时间：2012-04-24T19:41:49.977
> 
> 标签：expressionengine

我对 Expression Engine 很陌生，并且正在努力解决以下问题。我有一个属性频道和一个 property_images 频道。一个属性可以有一个或多个图像。

我想显示属性列表，包括图像和摘要信息。用户应该能够点击查看显示所有属性详细信息和所有图像的属性详细信息页面。

PropertyID 对两个频道都是通用的，但我不知道如何加入。这可能是“开箱即用”还是我需要使用附加组件……如果是后者，欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:33:54.837

您目前如何将您的属性条目与您的属性图像条目连接起来？您是否只是在每个频道中都有一个属性 ID 字段，并且您在每个位置手动输入它？

我建议改为使用[Playa](http://pixelandtonic.com/playa)，这是一个多对多关系插件。将“Property Images”字段添加到您的 Properties 频道，使其成为 Playa 字段，然后选择您的 Property Images 频道作为来源。然后，您可以在编辑该属性条目时从“属性图像”通道中选择与每个属性“相关”的尽可能多的条目，并在前端使用 Playa 的模块标签显示它们。

或者，您可以使用[Matrix](http://pixelandtonic.com/matrix)或[Assets](http://pixelandtonic.com/assets)，也可以通过 Pixel 和 Tonic 将您的属性图像直接添加到您的属性列表中（这将在前端显示您的数据时保存查询）。

# javascript - 按 JavaScript 顺序组合数组

> ID：10304896
> 
> 赞同：3
> 
> 时间：2012-04-24T19:42:02.957
> 
> 标签：javascript, jquery, arrays

我有一些我试图按一定顺序组合的数组。例如，假设我有三个数组：

```
var arrayOne = [1a, 1b, 1c];
var arrayTwo = [2a, 2b, 2c];
var arrayThree [3a, 3b, 3c]; 
```

我怎么会得到这样的东西？

```
var combinedArray = [1a, 2a, 3a, 1b, 2b, 3b, 1c, 2c, 3c] 
```

*编辑*

好的，我将在这里为我的故事添加更多内容，因为我得到了大家的一些很好的回应和回答。也许这会更清楚。我有一个 SharePoint 列表，我从中获取所有信息。我正在使用 SPServices 从列表中获取我的数据。我还获取了每个列表项的版本历史并将它们放入数组中，这样我就可以将数据从 SPServices 循环中提取出来，并在 SharePoint 内容之外使用它，这样我就可以尝试根据需要对其进行排序和显示。（请不要将此移至 SharePoint ）。这一切都必须在运行时发生。所以这是第一部分。我为每个列表项声明全局变量：

```
var proModified6 = new Array();
var proHistory = new Array();
var assignedTo = new Array();
var startDate = new Array();
var endDate = new Array();
var status = new Array();
var project = new Array();
var history = new Array();

var listItems = new Array();

var regex = new RegExp("");

var i = 0; 
```

然后我用 SharePoint 列表信息填充数组（我不会把它们都放好，但每个都有一个像这样的调用）

```
$().SPServices({
  operation: "GetVersionCollection",
      async: false,
      webURL: "http://devchrisl01/test",
      strlistID: "NewProjects",
      strlistItemID: proID[i],
      strFieldName: "Title",         

      completefunc: function (xdata, Status) {

        $(xdata.responseText).find("Version").each(function() {

       //alert(xdata.responseXML.xml);

       var xitem = $(this);
            var ID = xitem.attr('ID');
            var Project = xitem.attr('Title');
            var Modified = xitem.attr('Modified').split('T')[0];
            var ModifiedTime = xitem.attr('Modified').substring(11, 19);
           //var modifiedUl = "<td><b>" + Modified + " " + ModifiedTime + "</b></td>";
  //$('#versionList'+i+'').append(modifiedUl);

                  project.push(Project);
                  proModified2.push(Modified + ModifiedTime)

    // just looking at my data here not really part of my problem       
var data = "<tr><td><b>" + Modified + " " + ModifiedTime + "</b></td><td>" + Project + "</td></tr>";

$('#versionList'+i+'').append(data);

        });  

      }

}); 
```

之后是我的问题发挥作用的地方。我正在取回我需要的所有数据。除了为每个列表使用一个数组之外，我还没有找到更好的方法来存储所有列表信息并将其从 SPServices 中提取出来。关键是我不知道会有多少阵列或多长时间。最终这将是动态的。（屁股痛）所以这里是数组：

```
var modifiedDate = [proModified1, proModified2, proModified3, proModified4, proModified5, proModified6];
var projectHistory = [history];
var projectTitle = [project];
var projectAssignedTo = [assignedTo];
var projectStartDate = [startDate];
var projectEndDate = [endDate];
var projectStatus = [status]; 
```

每个人都会有所不同。对于每个用户，它们的数量也不相同。我刚刚将我的列表设为静态以首先建立。列表动态稍后将是另一个问题：0

有没有办法让我像我在简单示例中所问的那样处理这些数组？看看为什么我先简单了哈哈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:48:35.710

编辑：更新了比较器，因为 Salmon 指出它应该返回`-1`,`0`或`1`.

试试下面，

```
var arrayOne = ["1a", "1b", "1c"];
var arrayTwo = ["2a", "2b", "2c"];
var arrayThree = ["3a", "3b", "3c"];

var combinedArray = arrayOne
    .concat(arrayTwo, arrayThree) //Concatenate the array.. can add any number of arrays
    .sort(function(a, b) { //Custom comparator for your data
       var a1 = a.charAt(1);
       var b1 = b.charAt(1);

       if (a1 == b1) return 0;
       if (a1 < b1) return -1;
       return 1;
    }); 
```

**注意：**自定义比较器功能非常适合您的数据。根据需要更新函数。

[**演示**](http://jsfiddle.net/skram/NzuBL/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T19:51:16.427

如果三个数组的长度总是彼此相同：

```
var arrayOne = ["1a", "1b", "1c"];
var arrayTwo = ["2a", "2b", "2c"];
var arrayThree = ["3a", "3b", "3c"];

var newArray = [];
for (var i = 0, len = arrayOne.length; i < len; i++) {
    newArray.push(arrayOne[i], arrayTwo[i], arrayThree[i]);
}

console.log(newArray); //1a,2a,3a,1b,2b,3b,1c,2c,3c 
```

但是如果你的数组不总是相同的长度，我们将需要使用三个数组中最大的长度并跳过缺失的索引，所以它会是这样的：

```
var arrayOne = ["1a", "1b", "1c", "1d"];
var arrayTwo = ["2a", "2b", "2c"];
var arrayThree = ["3a", "3b"];

var newArray = [];
var len = Math.max(arrayOne.length, arrayTwo.length, arrayThree.length);

for (var i = 0; i < len; i++) {
    if (i in arrayOne) {
        newArray.push(arrayOne[i]);
    }
    if (i in arrayTwo) {
        newArray.push(arrayTwo[i]);
    }
    if (i in arrayThree) {
        newArray.push(arrayThree[i]);
    }
}

console.log(newArray); //1a,2a,3a,1b,2b,3b,1c,2c,1d 
```

使用的原因`i in arr`（作为其他检查的区别）是因为这将允许您保持任何虚假值`0,"",false,null,undefined,NaN`不变。否则很难让它们单独存在（特别是`undefined`数组中的值）

我的答案和当前最受好评的[答案之间的](https://stackoverflow.com/a/10304998/908879)[性能测试](http://jsperf.com/arraymerge/3)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T20:07:43.720

据我了解，您正在寻找一个`zip`函数，例如[python](http://docs.python.org/library/functions.html#zip)。javascript中没有这样的内置，但它很容易编写，例如：

```
zip = function() {
    var 
        args = [].slice.call(arguments, 0),
        len = Math.max.apply(Math, args.map(function(x) { return x.length })),
        out = [];
    for (var i = 0; i < len; i++)
        out.push(args.map(function(x) { return x[i] }));
    return out;
} 
```

应用于您的阵列

```
var arrayOne = ["1a", "1b", "1c"];
var arrayTwo = ["2a", "2b", "2c"];
var arrayThree = ["3a", "3b", "3c"];

zipped = zip(arrayOne, arrayTwo, arrayThree); 
```

这将创建一个嵌套数组：

```
[["1a", "2a", "3a"], ["1b", "2b", "3b"], ["1c", "2c", "3c"]] 
```

您可以按原样使用或转换为扁平的：

```
 flat = [].concat.apply([], zipped) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T19:57:54.573

我建议使用`sort()`带有某种回调的默认 JS 方法。如果数组中的元素都是 like `/[0-9][a-z]/`，这将为您提供所需的结果：

```
//concat arrays first, of course
function specialSort(a,b)
{
    if(a[1] < b[1])
    {
        return -1;
    }
    if(a[1] > b[1])
    {
        return 1;
    }
    return 0;
}
//using wsanville's expample: combinedArray = ["1a", "1b", "1c", "2a", "2b", "2c", "3a", "3b", "3c"]
combinedArray = combinedArray.sort(specialSort);
//result: combinedArray = ["1a", 2a", "3a", "1b", "2b", "3b", "1c", "2c", "3c"] 
```

希望这对你有用...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-24T20:06:12.420

你可以简单地做：

```
var arrayOne = ["1a", "1b", "1c"];
var arrayTwo = ["2a", "2b", "2c", "2d", "2e"];
var arrayThree = ["3a", "3b", "3c", "3d"];
var combinedArray = [];

for (var i = 0, j = Math.max(arrayOne.length, arrayTwo.length, arrayThree.length); i < j; i++) {
    if (arrayOne.length) combinedArray.push(arrayOne.shift());
    if (arrayTwo.length) combinedArray.push(arrayTwo.shift());
    if (arrayThree.length) combinedArray.push(arrayThree.shift());
}

alert(combinedArray.join(", "));​ 
```

这可能适用于可变长度数组。[演示在这里](http://jsfiddle.net/gEJMt/2/)。

# mongodb - 雾化类字段的值？

> ID：10304897
> 
> 赞同：0
> 
> 时间：2012-04-24T19:42:04.980
> 
> 标签：mongodb, sinatra, mongoid, model-associations

考虑以下 Mongoid 模型

```
class Doc
  include Mongoid::Document
  field :name, type: String
  embeds_many :images
  embeds_many :videos
end

class Image
  include Mongoid::Document
  field :url, type: String
  field :caption, type: String
  embedded_in :Doc
end

class Video
  include Mongoid::Document
  field :url, type: String
  field :caption, type: String
  embedded_in :Doc
end 
```

与此模型相比

```
class Doc
  include Mongoid::Document
  field :name, type: String
  embeds_many :images
  embeds_many :videos
end

class Image
  include Mongoid::Document
  embeds_many :urls
  embeds_many :captions
  embedded_in :Doc
end

class Video
  include Mongoid::Document
  embeds_many :urls
  embeds_many :captions
  embedded_in :Doc
end

class Url
  include Mongoid::Document
  embedded_in :image
  embedded_in :video
  field :url, type: String
end

class Caption
  include Mongoid::Document
  embedded_in :image
  embedded_in :video
  field :caption, type: String
end 
```

每个模型比另一个模型有什么好处？

为了简洁起见，我应该选择第一个，还是应该将其原子化到 url.url 点，以便以后对查询有更多控制权？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:47:17.140

第一个模型允许您将一个 URL 与每个图像或视频准确关联。第二种模型允许您将许多 URL 与每个图像或视频相关联。

哪个更适合您的业务需求？一张图片是否有可能有多个 URL，还是只有一个？

就个人而言，除非您严格需要给定图像的许多 URL，否则我会使用第一个模型。由于几乎可以保证网络上每条媒体的 URL 都是唯一的，因此过度规范化数据结构确实没有意义。您将在 URL 类中拥有与 Video 和 Image 记录的总和一样多的记录，那么您将保存什么？

如果它是其他可能具有非唯一值的字符串字段（例如，标签），那么将其拆分是很有意义的，因为标签模型中的记录将大大少于图像和视频记录，假设高度或标签重用。

有道理？

# serial-port - 为 Extech HD300 风速计编写驱动程序

> ID：10304898
> 
> 赞同：1
> 
> 时间：2012-04-24T19:42:05.013
> 
> 标签：serial-port, hex, driver, labview

[我在 NI 支持论坛上创建了一个关于我的项目的帖子](http://forums.ni.com/t5/Instrument-Control-GPIB-Serial/Communicating-with-an-Extech-HD300-Anemometer/m-p/1955191)，但我目前的问题比在 labview 中编写驱动程序更广泛。我有一个风速计，它使用 USB UART 桥接器与计算机连接。我向 Extech 索要任何类型的文档，但只收到了以下通信协议。

[串行通信协议](http://i.imgur.com/zIdF8.png)

我在处理这个问题时遇到了几个问题，所以我使用了风速计附带的软件并使用 portmon 来嗅探往返的命令，这就是它变得更糟的地方。为了尽可能简化问题，我只读取了环境温度读数。以下是我使用制造商的软件连接到仪器时 portmon 捕获的内容：

（这是上述协议文档中的“上传协议”）

```
AA 61 64 6A 67 08 40 00 40 00 01 00 00 C6 41 00 00 00 00 00 3C 1C C6 9A 19 99 42 00 3C 1C C6 00 00
AA 61 64 6A 67 08 40 10 40 00 01 7D 0C C6 41 00 00 00 00 00 3C 1C C6 39 1F 99 42 00 3C 1C C6 00 00
AA 61 64 6A 67 08 40 10 40 00 01 00 00 C6 41 00 00 00 00 00 3C 1C C6 9A 19 99 42 00 3C 1C C6 00 00
AA 61 64 6A 67 08 40 10 40 00 01 83 F3 C5 41 00 00 00 00 00 3C 1C C6 FB 13 99 42 00 3C 1C C6 00 00 
```

这被稍微截断了，但重要的部分应该在那里。当时的环境温度读数约为 76.5F。所以根据文档，这应该在第 10-13 位，所以我相信：

```
0000c641
7d0cc641
0000c641
83f3c541 
```

成为记录的环境温度，但我不知道如何阅读。我认为没有理由需要从开尔文或摄氏度进行转换，因为在 F1 中似乎有一点。另外值得注意的是，我得到的值与几个字段记录的任何值完全不同，所以要么我读错了，要么文档就是错误的。我无法从制造商那里得到更多关于协议的答案，所以我不知道为什么我的数据只有一半与预期的相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T19:05:50.057

`41C60000` 转换为 24.75 作为 IEEE754 标准 32 位单精度浮点数。这看起来像一个摄氏值，将映射到 76.55 F。

对于其余数据，您将拥有：

```
 41C60000 = 24.7500000000000000000 
 41C60C7D = 24.7560977935791015625 
 41C5F383 = 24.7439022064208984375 
```

我认为这可以为您解决字节顺序和格式问题。

# .net - .NET Framework 中的 FileSecurity 与 DirectorySecurity

> ID：10304899
> 
> 赞同：1
> 
> 时间：2012-04-24T19:42:06.873
> 
> 标签：.net

有人可以**指出**[DirectorySecurity](http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.directorysecurity.aspx)和[FileSecurity](http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.filesecurity.aspx)类之间的具体区别。

我知道它们都是抽象[FileSystemSecurity](http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.filesystemsecurity.aspx)类的实现，但它们实际上在多大程度上不同？

据我所知，它们在表面上几乎是相同的，因为它们似乎没有为 FileSystemSecurity 类添加太多公共方法，但肯定存在一些细微的差异。

我问的主要原因是因为我想将权限从目录复制到其他一些对象，其中包括目录和文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T00:38:25.690

这里没有复杂的规则，它们听起来就像他们所做的一样。当您对文件系统目录执行某些操作时，.NET 框架代码会要求 DirectorySecurity。System.IO.Directory 和 DirectoryInfo 类包含它们。当您对文件执行某些操作时，FileSecurity 会提出要求。就像在 System.IO.File、FileInfo 和 FileStream 类中一样。

# php - Symfony 2 app.php 与 app_dev.php

> ID：10304907
> 
> 赞同：3
> 
> 时间：2012-04-24T19:42:28.350
> 
> 标签：php, symfony

我正在使用 Symfony 2 php 框架，它有几个不同的使用环境：开发、生产和测试。app.php 前端控制器访问生产环境，app_dev.php 前端控制器访问开发环境。任何熟悉 Symfony 的人都可以建议将开发环境限制为开发人员的最佳方式吗？我不希望我的网站的用户可以查看我的 Web 应用程序的开发版本，他们应该仅限于使用生产环境。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T19:54:01.713

好吧，开箱即用，标准发行版[在开发控制器的顶部](https://github.com/symfony/symfony-standard/blob/master/web/app_dev.php)有一个基于 IP 的保护检查。

```
// This check prevents access to debug front controllers that are deployed by accident to production servers.
// Feel free to remove this, extend it, or make something more sophisticated.
if (isset($_SERVER['HTTP_CLIENT_IP'])
    || isset($_SERVER['HTTP_X_FORWARDED_FOR'])
    || !in_array(@$_SERVER['REMOTE_ADDR'], array(
        '127.0.0.1',
        '::1',
    ))
) {
    header('HTTP/1.0 403 Forbidden');
    exit('You are not allowed to access this file. Check '.basename(__FILE__).' for more information.');
} 
```

但是，正如评论所表明的那样，您不会受制于这种方法。例如，如果您正在运行 Apache，则可以[将基本 HTTP 身份验证添加](http://php.net/manual/en/features.http-auth.php)到开发和测试控制器。

# php - 有意义的链接，而不是“index.php?page=pageName”

> ID：10304910
> 
> 赞同：-1
> 
> 时间：2012-04-24T19:42:33.747
> 
> 标签：php, html, hyperlink

我有一个索引文件，可以加载页面的大部分可视部分（页眉、页脚等），并使用包含来填充子页面的内容。不幸的是，这意味着我的链接看起来`domain/index.php?page=contact`比`domain/contact`.

我将如何以一种好的方式实现后一种结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:46:41.670

[Apache 的 mod_rewrite](http://www.sitepoint.com/guide-url-rewriting-)是您正在寻找的。有关易于理解的示例，请参见第二页。

```
RewriteRule /domain/contact domain/index.php?page=contact 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T19:43:53.667

阅读 .htaccess 和 mod_rewrite

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# c# - 语音合成器“输入字符串的格式不正确”

> ID：10304913
> 
> 赞同：3
> 
> 时间：2012-04-24T19:42:40.703
> 
> 标签：c#, text-to-speech, speech-synthesis

这是我的代码：

```
string _message = "Hello world.";
SpeechSynthesizer _synth = new SpeechSynthesizer();
Prompt _prompt = new Prompt(_message);
_synth.Speak(_prompt); 
```

我一生都无法弄清楚究竟是什么导致了这个错误：

“输入字符串的格式不正确。”

导致此错误的行是当我调用`_synth.Speak(_prompt);`
EDIT 时：我已在台式计算机上尝试过此代码，它工作正常，因此我在笔记本电脑上的安装有问题。我仍然不太确定如何解决这个问题......

编辑：

堆栈跟踪：

```
System.FormatException: Input string was not in a correct format.
   at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffe
r& number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo in
fo)
   at System.Speech.Internal.SapiAttributeParser.GetCultureInfoFromLanguageStrin
g(String valueString)
   at System.Speech.Synthesis.VoiceInfo..ctor(VoiceObjectToken token)
   at System.Speech.Internal.Synthesis.VoiceSynthesis.BuildInstalledVoices(Voice
Synthesis voiceSynthesizer)
   at System.Speech.Internal.Synthesis.VoiceSynthesis..ctor(WeakReference speech
Synthesizer)
   at System.Speech.Synthesis.SpeechSynthesizer.get_VoiceSynthesizer()
   at System.Speech.Synthesis.SpeechSynthesizer.Speak(Prompt prompt)
   at TTSTesting.Program.Speak(String _message) in C:\Users\ctanaka\Desktop\TTST
esting\TTSTesting\Program.cs:line 22 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:37:50.677

我决定进入语音密钥寄存器，在备份该密钥后，我一个接一个地删除了所有尝试代码的语音，直到错误消失。错误出现在 Loquendo 声音中。之后，我尝试恢复备份（所有声音）以再次寻找错误并且......操作系统回答无法写入一个值，因为它正在被另一个应用程序使用......这就是神奇的事情：一切正常！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T02:57:23.050

您机器的注册表乱了，它包含无效的语音配置数据。相关键是`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Speech\Voices\Tokens`. 在下方，您会找到已安装的声音。英语机器通常在那里有 MS-Anna，但如果您购买更多，可能还有其他机器。

混乱的值是 Attribute\Language，它不是应有的十六进制数。像“409”一样，英文的 LCID 的十六进制值。

您可以通过卸载添加的声音、删除注册表中的坏声音或修复语言值来修复它。重新安装很棘手，这是 Vista 及更高版本 Windows 设置的一部分。如果您无法修复它，您将需要 superuser.com 的帮助。或您的安装 DVD。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T02:53:06.653

我有同样的问题。Hans Passant 向我们指出了这样一个事实，即这个 API 从注册表中解析字符串值以检测已安装的语言。我也安装了 Loquendo TTS 语言包。使用 PROCMON 和反复试验，我设法查明导致错误的确切注册表项（语言）。API 期望此字符串仅包含用于整数转换的数字字符。尝试解析和转换此字符串 ("40c") 会触发 FormatException：

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Speech\Voices\Tokens\LQBernard\Attributes] "语言"="40c"

变成：

"Language"="40"（删除了尾随的 'c' 字符）。

我为我安装的两个法语 Loquendo TTS 语言包（Bernard 和 Juliette）重复了这个过程，并为我解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T19:48:52.130

这可能不是您问题的根源，但在 API 中看起来您应该可以调用

```
new SpeechSynthesizer().Speak("Hello world."); 
```

并避免所有额外的代码...您是否尝试过删除句点？

# java - 用于托管 jsp/servlet 数据库 Web 应用程序的参数

> ID：10304918
> 
> 赞同：1
> 
> 时间：2012-04-24T19:43:14.810
> 
> 标签：java, web-applications, hosting

我开发 Java 桌面应用程序，我即将开始开发一个基于 Java 的 Web 应用程序，该应用程序使用 jsp、servlet 和至少一个数据库。谁能指出一些关于我应该在小型 Java Web 应用程序的廉价托管计划中寻找的功能的文章或个人见解？

我目前的托管公司说他们的 Linux 服务器只提供一个非常简单的 java 工具集，并且所有 java 代码都需要通过他们网站上的管理员工具上传到 .war 文件中。很久以前我曾经写过asp.net代码，我过去只是上传我所有的个人脚本，每个页面一个。我想保留这种级别的多文件访问，而不是将所有内容捆绑到一个 .war 文件中。

我想知道我应该从对开发人员友好的 Java 网络主机中获得哪些功能。

我不知道如何评估不同主机将容纳我的 servlet 的不同容器。（Tomcat、JBoss、Jetty 等）我想要一个快速的数据库驱动的 Web 应用程序，但它的启动规模也很小，所以我想找一些便宜的东西。

我有多个域，每个域都有电子邮件。我目前的托管服务提供商希望每月 8 美元购买涵盖多个域和电子邮件的 .war 文件计划。

我已经完成了谷歌搜索，还阅读了关于堆栈溢出的各种帖子，但还没有找到任何能简明地满足我需求的东西。我想我宁愿花一点钱并获得电话客户支持，也不愿像亚马逊这样的免费选项之一。只要您告诉我为什么他们符合此帖子所查询的标准，指向特定主机的链接就会有所帮助。如果你只是建议一个主机而不根据我在这篇帖子中提出的问题来评估它，我将没有任何方法来考虑它的优点。谢谢你。

* * *

**注意：**我在发布时尝试接受答案。如果有人写了一个很好的答案并将其作为答案发布在下面，我会倾向于将其标记为答案。到目前为止，每个人都只是在帖子上留下了评论，而不是发布他们的回复作为答案。

# php - 当来自 URL 的数据很小时，JSON 对象为 NULL？

> ID：10304921
> 
> 赞同：3
> 
> 时间：2012-04-24T19:43:23.420
> 
> 标签：php, json

我有一个从 url 解码的 JSON 对象，如下所示：

```
 $var = json_decode(file_get_contents($url), true); 
```

我得到的数据来自新的战网 API，它作为包含字符数据的 JSON 对象返回。

*   这是一个实际的链接，在该链接中可以找到字符并且要生成数据：[Character Found](http://us.battle.net/api/wow/character/Mannoroth/Anadia?fields=achievements)。
*   现在这里是一个不存在并生成错误的字符的链接：[Character Not Found](http://us.battle.net/api/wow/character/Smolderthorn/Sidratha?fields=achievements)。

错误作为包含“状态”和“原因”属性的 JSON 对象返回。“status”属性的值将始终为“nok”。

**我的问题是当字符未找到时，JSON 对象 $var 为 NULL，如果找到，则 JSON 对象 $var 包含正确的数据。我需要能够检查状态是否为“nok”，以便输出适当的错误消息**

我有：

*   检查链接以确保它们正确生成。
*   更改`json_decode(file_get_contents($url), true)`为：`json_decode(file_get_contents($url), false)`并尝试将 $var 作为对象访问。
*   尝试使用 cURL 而不是`file_get_contents($url)`

我在战网 API 论坛上发帖，但我想我也会在这里尝试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:49:32.480

这是因为页面 Character Not Found 页面返回一个`404 Not Found`HTTP 响应码，这很有意义，但被认为是错误。

当在 HTTP 流包装器上遇到错误（404、500 等）时，文件函数（例如`file_get_contents`）将默认返回。`false`

为了忽略错误并返回内容，以便`json_decode`可以解析它，您需要使用上下文：

```
$context = stream_context_create(array(
    'http' => array('ignore_errors' => true),
));

$var = json_decode(file_get_contents($url, false, $context), true); 
```

# r - 使用 Arima 模型预测不在系列结束之前的期间的值

> ID：10304924
> 
> 赞同：5
> 
> 时间：2012-04-24T19:43:43.183
> 
> 标签：r, forecasting, predict

我正在生成一个带有外部回归器的 Arima 模型。假设我有**n 个**观察结果。包中的`predict.Arima`函数只是对**n + 1**次观察`forecast`进行预测。

 **我需要对**n**值（系列的最后一个值）进行预测，改变外部回归器的值，即，在给定外部回归器的特定值的情况下，我需要预测**n观察值。**

```
library(forecast)
set.seed(123)
aux <- 1:24
covari <- aux + rnorm(24,0,2)
vari <- ts(aux * runif(24,0,3), start=c(2010,1), freq=12)

mod <- auto.arima(vari, xreg=covari)

predict(mod, newxreg=20) 
```

此代码生成模型，并显示如何生成预测。我可以控制提前设置参数的周期数`n.ahead`。

```
predict(mod, newxreg=runif(4,15,25), n.ahead=4) 
```

此代码将为该系列的下 4 个值生成预测。

我需要的是一个`n.ahead=-1`，即对系列内的值的预测，但具有不同的外部回归器。

如果我只使用一个外部回归器，那么任务并不复杂，因为因为它是一个加法模型，所以我可以将观察到的 xreg 值的差值乘以我想要的值乘以 xreg 的系数。但是，如果外部回归器的数量增加，它会变得更加复杂。

有什么方法可以预测不在 Arima 模型系列末尾的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T01:25:15.080

“预测”是什么意思？对于时间序列，这是以观察到的过去值为条件的对未来值的估计。因此，观察值的“预测”就是观察值。

但也许你的意思是拟合值。即，以所有先前观察为条件的观察的一步预测。在这种情况下，您可以使用`fitted(mod)`.

顺便说一句，`predict.Arima()`不是预测包的一部分。预测包提供了`forecast.Arima()`作为替代的功能。例如：

```
forecast(mod, xreg=20)
forecast(mod, xreg=runif(4,15,25), h=4) 
```

**更新：** 正如评论中所解释的，假设观察到了不同的回归量值，OP 希望对过去的观察进行“预测”。有几种解释方式。

首先，更新系数以反映新信息，并且仅使用过去的数据。在这种情况下，只需重新拟合模型并获得拟合值。

其次，不更新系数，只使用过去的数据。没有功能，我不确定为什么有人需要这样做。但可以按如下方式完成：

```
fitted(mod) + mod$coef["covari"] * (newx - oldx) 
```

第三，不更新系数，使用所有数据。然后我们得到

```
observed  + mod$coef["covari"] * (newx - oldx) 
```**

# java - 为什么当我使用版本 7 而不是 6 时 Java 没有启动？

> ID：10304931
> 
> 赞同：1
> 
> 时间：2012-04-24T19:43:56.807
> 
> 标签：java, version, java-7, java-6, launching-application

当我在我的 windows 7 64 位机器上安装 Java 版本 7 时（我安装此版本[64 位，带有 SDK 的 windows](http://download.oracle.com/otn-pub/java/jdk/7u3-b05/jdk-7u3-windows-x64.exe)），然后使用小程序进入网站时 Java 不会启动。但是当我使用第 6 版时，一切正常。

另一方面，在编译（使用 Netbeans 7.1.1）时，这两个版本都可以正常工作。Java 程序在使用`java`命令从命令行启动时也能正常工作。

到底是怎么回事？

**编辑**

现在我尝试使用 Java 7 update 4 (64bits) 重新安装所有内容，但它仍然无法正常工作。问题可能出在`PATH`变量的某个地方，因为当我使用小程序进入站点时，托盘中没有出现 java 图标，但仍然 - 我已经添加`C:\Program Files\Java\jre7\bin`了`PATH`它，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T20:00:01.360

Java 插件的硬件规格必须与浏览器相同。

因此，如果您安装 Java 64bits，它将在 IE 8 或 9 64bits 中运行。

但 Firefox 仅从标准下载渠道以 32 位二进制文​​件的形式提供给 Windows。您应该尝试使用[Firefox 64 位](http://wiki.mozilla-x86-64.com/Download)。

可能您的 Opera 版本也是 32 位...

我邀请您通过在 Windows 7 64 位上安装 32 位浏览器（Firefox 标准二进制文件）和 JDK 32 位来进行交叉检查。它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:11:31.113

您的 Java 路径环境变量可能没有更新。看看这个[链接](http://www.java.com/en/download/help/path.xml)。确保其将 java 指向 7 exe。

# html - 我可以共享我计算机中的 HTML 文件吗？

> ID：10304939
> 
> 赞同：0
> 
> 时间：2012-04-24T19:44:17.243
> 
> 标签：html, facebook, share

假设我在 C:\ 目录中有一个名为 myweb.html 的 HTML 文件。还有里面的一些文字。那么我可以像分享网页一样在 Facebook 上分享它吗？如何？

我将它粘贴到我的页面 c:\myweb.html 的某处：

```
<a target="_blank" href="http://www.facebook.com/sharer.php?u=" title="Share this webspage on Facebook">Share on Facebook</a> 
```

我认为它会共享页面本身。但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:48:49.080

除非您的文件是可以从网络外部访问的网页，否则您不能共享它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:49:32.037

Facebook 无法访问您的网页，它位于您的计算机本地。

所以不，你不能共享本地文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T19:49:32.720

幸运的是，您计算机上的文件是私密的，其他人无法访问（有一些例外）。如果您想共享您的 html 文件，您需要先将其上传到 Web 服务器。

# ajax - 在 sencha touch 2 的 ext.store 中使用 key:value 读取 json

> ID：10304941
> 
> 赞同：1
> 
> 时间：2012-04-24T19:44:22.530
> 
> 标签：ajax, json, sencha-touch-2

我正在尝试将特定的 json 文件加载到列表视图中；但是 sencha 代理似乎不理解“CurrencyName”和“Value”的密钥对。我对如何将这两个值关联到可用数据一无所知。

这是json：

```
{
    "timestamp": 1335294053,
    "base": "USD",
    "rates": {
        "AED": 3.6732,
        "AFN": 48.32,
        "ALL": 106.040001
    }
} 
```

我的商店：

```
proxy: {
    type: 'ajax',
    url: 'http://localhost/CurrencyFX/latest.json',
    reader: {
        type: 'json',
        rootProperty: 'rates'
    }
}, 
```

我的模型：

```
Ext.define('CurrencyFX.model.Currency', {
    extend: 'Ext.data.Model',
    config: {
        fields: [ 'name', 'value' ]
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T21:21:38.963

您需要编写自己的 JSON 阅读器子类来完成这项工作，因为您处理的数据不是数组。

值得庆幸的是，这样做非常简单。这是应该做的事情：

```
Ext.define('Ext.data.reader.Custom', {
    extend: 'Ext.data.reader.Json',
    alias : 'reader.custom',

    getRoot: function(data) {
        if (this.rootAccessor) {
            data = this.rootAccessor.call(this, data);
        }

        var values = [],
            name;

        for (name in data) {
            values.push({
                name: name,
                value: data[name]
            });
        }

        return values;
    }
}); 
```

这将适用于以下商店配置：

```
var store = Ext.create('Ext.data.Store', {
    fields: ['name', 'value'],
    autoLoad: true,
    proxy: {
        type: 'ajax',
        url: '0000.json',
        reader: {
            type: 'custom',
            rootProperty: 'rates'
        }
    }
}); 
```

注意 reader`type`现在是**custom**。

我用你的数据在本地测试了它，它似乎工作得很好。

# sql - 判断同一个 SQL 表中的 2 条记录是否不同的最快/最简单的方法是什么？

> ID：10304942
> 
> 赞同：1
> 
> 时间：2012-04-24T19:44:24.627
> 
> 标签：sql

我希望能够比较同一个 SQL 表中的 2 条记录并判断它们是否不同。我不需要说有什么不同，只是它们不同。

另外，我只需要比较记录中 10 列中的 7 列。即。）每条记录有 10 列，但我只关心其中的 7 列。

这可以通过 SQL 来完成，还是我应该在 C# 中获取记录并对它们进行哈希处理以查看它们是否是不同的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T19:50:01.023

您可以通过查询编写一个组，如下所示：

```
SELECT field1, field2, field3, .... field7, COUNT(*)
FROM table
[WHERE primary_key = key1 OR primary_key = key2]
GROUP BY field1, field2, field3, .... field7
HAVING COUNT(*) > 1 
```

这样，您可以获得字段 1 到 7 具有相同值的所有记录，以及出现次数。

添加括号之间的部分以限制您对重复项的搜索，无论是使用 OR 还是使用 IN (...)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T20:02:36.983

```
IF EXISTS (SELECT Col1, Col2, ColEtc...
            from MyTable
            where condition1
           EXCEPT SELECT Col1, Col2, ColEtc...
            from MyTable
            where condition2)
 BEGIN
    --  Query returns all rows from first set that are not column for column
    --  also in the second (EXCEPT) set.  So if there are any, there will be
    --  rows returned, which meets the EXISTS criteria. Since you're only
    --  checking EXISTS, SQL doesn't actually need to return columns.

 END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T19:50:47.597

不需要哈希。正常的相等比较就足够了：

```
select isEqual = case when t1.a <> t2.a or t1.b <> t2.b bbb then 1 else 0 end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T20:05:09.390

```
SELECT 
    CASE WHEN (a.column1, a.column2, ..., a.column7) 
            = (b.column1, b.column2, ..., b.column7)
         THEN 'all 7 columns same'
         ELSE 'one or more of the 7 columns differ'
    END AS result
FROM tableX AS a
  JOIN tableX AS b
    ON  t1.PK = @PK_of_row_one
    AND t2.PK = @PK_of_row_two 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T20:06:52.623

你不能只使用 DISTINCT 关键字吗？不会返回所有重复项，因此您收到的每一行都是唯一的（并且与其他行不同）。

[http://www.mysqlfaqs.net/mysql-faqs/SQL-Statements/Select-Statement/How-does-DISTINCT-work-in-MySQL](http://www.mysqlfaqs.net/mysql-faqs/SQL-Statements/Select-Statement/How-does-DISTINCT-work-in-MySQL)

所以你可以做这个查询：

```
SELECT DISTINCT x,y,z FROM RandomTable WHERE x = something 
```

对于每个唯一的 x,y,z 组合，它只会返回一行。

# javascript - 将参数传递到 Jade 文件时，我可以（如何）使用 Jade 速记吗？

> ID：10304943
> 
> 赞同：1
> 
> 时间：2012-04-24T19:44:27.397
> 
> 标签：javascript, node.js, pug

我在玩 Nodejs，想知道我是否可以使用翡翠风格的速记（即

```
a(href='/page?name=contact') 
```

作为传递到玉文件的参数的一部分。

* * *

例如，假设我想写一些类似（来自 Ninja Store 示例）的内容：

```
 var name = req.query.name;
    var contents = {
        about: 'a(href="/page?name=about") Ninja Store \n sells the coolest ninja stuff in the world. Anyone shopping here is cool.',
        contact: 'You can contact us at <address><strong>Ninja Store</strong>,<br>1, World Ninja Headquarters,<br>Ninja Avenue,<br>NIN80B7-JP,<br>Nihongo.</address>'
    };
res.render('page', { title: 'Ninja Store - ' + name, username: req.session.username, content:contents[name] }); 
```

有没有一种机制可以用来编写这种风格的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:04:48.323

您必须[编译字符串](https://github.com/visionmedia/jade#a5)：

```
var jade = require('jade');

// ...

var contents = {
    about: jade.compile('a(href="/page?name=about") ...')(),
    contact: 'You can contact us at ...'
}; 
```

但是，您可以只在视图之间切换，而不是将它们存储在`contents`：

```
res.render(name, {
    title: 'Ninja Store - ' + name,
    username: req.session.username
}); 
```

而且，您仍然可以将它们包含在`page.jade`模板[继承](https://github.com/visionmedia/jade#a11)中。

page.jade:

```
#container
    block contents 
```

关于.jade：

```
inherits page

block contents
    a(href="/page?name=about") Ninja Store
    span sells the coolest ninja stuff in the world. Anyone shopping here is cool. 
```

# python - 在 OSX Lion 下安装 PythonMagick 时出错

> ID：10304944
> 
> 赞同：0
> 
> 时间：2012-04-24T19:44:29.850
> 
> 标签：python, imagemagick, osx-lion, pythonmagick

StackOverflow 上的任何人都能够在运行 Lion 的 Mac 计算机上成功安装 PythonMagick 吗？我已经下载了 PythonMagick 源代码并安装了所有指定的依赖项。但是，当我运行“./configure”、“make”和“make install”时，它会以“error 1”退出。任何帮助将不胜感激。

谢谢你，

L.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:38:51.630

回答您的问题：是的，人们已经能够让 PythonMagick 工作。

您需要提供有关错误的更多信息，以便我们为您提供帮助。

一个常见问题是[无法安装 ImageMagick](https://stackoverflow.com/questions/13276858/installing-pythonmagick/13279009#13279009)。

另一个是[修改`__init__`.py](https://stackoverflow.com/questions/10954568/problems-detecting-pythonmagick-after-install-mac-osx)似乎是一个比较普遍的问题。

# java - 使用 Apache ZooKeeper 实现死锁检测

> ID：10304948
> 
> 赞同：7
> 
> 时间：2012-04-24T19:44:42.687
> 
> 标签：java, locking, deadlock, distributed, apache-zookeeper

我在一家小型软件公司工作，我的任务是研究一个分布式锁管理器供我们使用。它必须与 Java 和 C++ 接口。

我已经与 ZooKeeper 合作了几个星期，并[根据文档实现了共享锁（读写锁）。](http://zookeeper.apache.org/doc/current/recipes.html#sc_recipes_Locks)我现在需要实现死锁检测。如果每个客户端都可以维护一个锁图，那将是快速和容易的。但是，[您无法可靠地看到 ZooKeeper 中节点发生的每一次更改](http://zookeeper.apache.org/doc/current/zookeeperProgrammers.html#sc_WatchRememberThese)，因此无法维护准确的图表。这意味着每次检查死锁时，我都需要下载许多锁，这似乎不切实际。

另一个解决方案是在 ZooKeeper 服务器中实现死锁检测，我现在正在研究它。每个客户端都将在“/waiting”中创建一个以其会话 ID 命名的节点，其数据将是其等待的锁。由于每个锁都有一个临时所有者，因此我将有足够的信息来检测死锁。

我遇到的问题是 ZooKeeper 服务器没有 ZooKeeper 客户端具有的同步保证。另外，ZooKeeper 服务器不像客户端那样有很好的文档记录，因为您通常不应该接触它。

所以我的问题是：应该如何使用 Apache ZooKeeper 实现死锁检测？我在这里看到很多人推荐 ZooKeeper 作为分布式锁管理器，但是如果它不能支持死锁检测，那么没有人应该将它用于此目的。

* * *

### 编辑：

我有一个可行的解决方案。我不能保证它的正确性，但它已经通过了我所有的测试。

我正在分享我的`checkForDeadlock`方法，这是死锁检测算法的核心。以下是您需要了解的其他信息：

*   一次只能运行一个客户端进行死锁检测。
*   首先，客户端尝试获取资源的锁。如果资源已经被锁定并且客户端想要等到它变得可用，那么客户端接下来会检查死锁。如果等待资源不会导致死锁，那么它接下来会在一个特殊目录中创建一个 znode，该目录标识该客户端正在等待该资源。该行如下所示：`waitNode = zooKeeper.create(waitingPath + "/" + sessionID, resource.getBytes(), ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.EPHEMERAL);`
*   在此客户端创建等待节点之前，其他客户端不应开始检查死锁。
*   如果两个客户端几乎同时尝试获取锁，但同时授予两个客户端会导致死锁，那么有可能不是第一个客户端获得锁而第二个客户端被拒绝，而是第一个客户端被拒绝并且第二个客户可以获得锁。这应该不是问题。
*   `checkForDeadlock``DeadlockException`如果发现死锁，则抛出 a 。否则，它会正常返回。
*   锁是严格按顺序授予的。如果一个资源有一个已授予的读锁和一个等待的写锁，而另一个客户端想要获得一个读锁，它必须等到写锁被授予之后再释放。
*   `bySequenceNumber`是一个比较器，它按照 ZooKeeper 附加到顺序 znode 末尾的序列对 znode 进行排序。

代码：

```
private void checkForDeadlock(String pathToResource) throws DeadlockException {
    // Algorithm:
    //   For each client who holds a lock on this resource:
    //     If this client is me, announce deadlock.
    //     Otherwise, if this client is waiting for a reserved resource, recursively check for deadlock on that resource.
    try {
        List<String> lockQueue = zooKeeper.getChildren(pathToResource, false); // Last I checked, children is implemented as an ArrayList.
        // lockQueue is the list of locks on this resource.
        // FIXME There is a slight chance that lockQueue could be empty.
        Collections.sort(lockQueue, bySequenceNumber);
        ListIterator<String> lockQueueIterator = lockQueue.listIterator();
        String grantedLock = lockQueueIterator.next(); // grantedLock is one lock on this resource.
        do {
            // lockQueue must contain a write lock, because there is a lock waiting.
            String lockOwner = null;
            try {
                lockOwner = Long.toString(zooKeeper.exists(pathToResource + "/" + grantedLock, false).getEphemeralOwner());
                // lockOwner is one client who holds a lock on this resource.
            }
            catch (NullPointerException e) {
                // Locks may be released while I'm running deadlock detection. I got a NullPointerException because
                // the lock I was currently looking at was deleted. Since the lock was deleted, its owner was obviously
                // not part of a deadlock. Therefore I can ignore this lock and move on to the next one.
                // (Note that a lock can be deleted if and only if its owner is not part of a deadlock.) 
                continue;
            }
            if (lockOwner.equals(sessionID)) { // If this client is me.
                throw new DeadlockException("Waiting for this resource would result in a deadlock.");
            }
            try {
                // XXX: Is is possible that reservedResource could be null?
                String reservedResource = new String(zooKeeper.getData(waitingPath + "/" + lockOwner, false, new Stat()));
                // reservedResource is the resource that this client is waiting for. If this client is not waiting for a resource, see exception.
                // I only recursively check the next reservedResource if I havn't checked it before.
                // I need to do this because, while I'm running my deadlock detection, another client may attempt to acquire
                // a lock that would cause a deadlock. Without this check, I would loop in that deadlock cycle indefinitely.
                if (checkedResources.add(reservedResource)) {
                    checkForDeadlock(reservedResource); // Depth-first-search
                }
            }
            catch (KeeperException.NoNodeException e) {
                // lockOwner is not waiting for a resource.
            }
            catch (KeeperException e) {
                e.printStackTrace(syncOut);
            }
            // This loop needs to run for each lock that is currently being held on the resource. There are two possibilities:
            // A. There is exactly one write lock on this resource. (Any other locks would be waiting locks.)
            //      In this case, the do-while loop ensures that the write lock has been checked.
            //      The condition that requires that the current lock is a read lock ensures that no locks after the write lock will be checked.
            // B. There are one or more read locks on this resource.
            //      In this case, I just check that the next lock is a read lock before moving on.
        } while (grantedLock.startsWith(readPrefix) && (grantedLock = lockQueueIterator.next()).startsWith(readPrefix));
    }
    catch (NoSuchElementException e) {
        // The condition for the do-while loop assumes that there is a lock waiting on the resource.
        // This assumption was made because a client just reported that it was waiting on the resource.
        // However, there is a small chance that the client has since gotten the lock, or even released it before
        // we check the locks on the resource.
        // FIXME (This may be a problem.)
        // In such a case, the childrenIterator.next() call could throw a NoSuchElementException.
        // We can safely assume that we are finished searching this branch, and therefore return.
    }
    catch (KeeperException e) {
        e.printStackTrace(syncOut);
    }
    catch (InterruptedException e) {
        e.printStackTrace(syncOut);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T05:25:45.120

您需要两件事来进行死锁检测，一个锁所有者列表和一个锁服务员列表，这是标准[zk 锁配方](http://zookeeper.apache.org/doc/r3.1.2/recipes.html#sc_recipes_Locks)为您提供的，只要您将某种节点 ID 写入您创建的 znode。

您不需要查看 zookeeper 中的每一个变化来检测死锁。死锁不是会出现并很快消失的东西。根据定义，死锁会一直存在，直到您对此采取措施。因此，如果您编写代码让您的客户端监视他们感兴趣的每个锁节点，客户端最终将看到每个锁的所有者和等待者，并且客户端将看到死锁。

但是，您必须小心。客户端可能不会按顺序查看更新，因为更新可能会在客户端重新注册手表时发生。因此，如果客户端确实检测到死锁，客户端应该通过重新读取死锁中涉及的锁的所有者/观察者来仔细检查死锁是否真实，并确保死锁是真实的。

# ios - 如何将“？x = 123”之类的内容附加到NSURL？

> ID：10304959
> 
> 赞同：5
> 
> 时间：2012-04-24T19:45:23.453
> 
> 标签：ios

我有一个形式的 NSURL

```
"http://abc.def.com:1234/stuff/" 
```

我想附加到它，所以最终的网址是这样的

```
"http://abc.def.com:1234/stuff/?x=123". 
```

但如果我这样做

```
url = [NSURL URLWithString:@"http://abc.def.com:1234/stuff/?"];
url = [url URLByAppendingPathComponent:@"x=123"]; 
```

然后结果是

```
http://abc.def.com:1234/stuff/x=123? 
```

（如果使用 URLByAppendingPathExtension，结果相同）。

但如果我这样做

```
url = [NSURL URLWithString:@"http://abc.def.com:1234/stuff/?"];
url = [url URLByAppendingPathComponent:@"x=123"]; 
```

然后结果是

```
http://abc.def.com:1234/stuff/%3Fx=123 
```

（如果使用 URLByAppendingPathExtension 也是同样的结果）。

这两者都不是我所追求的。如何获得 "http://abc.def.com:1234/stuff/?x=123" 的最终结果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T21:40:13.617

我认为这里最简单的答案是使用旧 URL 作为基本 URL 创建一个新 URL。

```
url = [NSURL URLWithString:@"?x=123" relativeToURL:url] 
```

这是一个检查逻辑的单元测试

```
- (void)testCreatingQueryURLfromBaseURL
{
    NSURL *url = [NSURL URLWithString:@"http://foo.com/bar/baz"];

    url = [NSURL URLWithString:@"?x=1&y=2&z=3" relativeToURL:url];

    STAssertEqualObjects([url absoluteString], @"http://foo.com/bar/baz?x=1&y=2&z=3", nil);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T19:49:12.747

最后创建您的实际`NSURL`对象，从`NSString`您根据需要构建的对象：

```
NSString *urlString = @"http://www.site.com/";
if (some condition)
    urlString = [urlString stringByAppendingString:@"?x=123"];

NSURL *url = [NSURL URLWithString:urlString]; 
```

# c# - 编辑模式下的 DataGrid 单元格不接受 .(Dot) 作为 WPF MVVM 中的 deimal 值

> ID：10304961
> 
> 赞同：3
> 
> 时间：2012-04-24T19:45:45.897
> 
> 标签：c#, wpf, mvvm, datagrid

我有一个 DataGrid，其列绑定到 ViewModel 十进制属性。

当从 ViewModel 添加值时会显示十进制值，但是当我编辑同一个单元格并删除内容然后添加时，该单元格不接受`.`期间。那我该如何编辑单元格。

```
<DataGrid Name="dgSales" Height="300" Margin="0,3,0,0" IsSynchronizedWithCurrentItem="True" SelectedItem="{Binding SelectedItem,Converter={StaticResource ignoreNewItemPlaceHolderConverter}}" ItemsSource="{Binding StockList,UpdateSourceTrigger=PropertyChanged}" ToolTip="{Binding RelativeSource={RelativeSource Self},Path=(Validation.Errors)[0].ErrorContent}" GotKeyboardFocus="dgSales_GotKeyboardFocus" CurrentCellChanged="dgSales_CurrentCellChanged">
    <DataGrid.Columns>
        <DataGridTextColumn Header="S No." Width="SizeToCells" MinWidth="60" Binding="{Binding SNo}" IsReadOnly="True" />
        <DataGridTemplateColumn Header="Stock Name" Width="280">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                <TextBlock Text="{Binding StockName}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
            <DataGridTemplateColumn.CellEditingTemplate>
                <DataTemplate>
                    <ComboBox Width="280" Name="cmbStock" ItemsSource="{Binding Path=Stocks}" FocusManager.FocusedElement="{Binding RelativeSource={RelativeSource Self}}" ></ComboBox>
                </DataTemplate>
            </DataGridTemplateColumn.CellEditingTemplate>
        </DataGridTemplateColumn>
        <DataGridTextColumn Header="Unit Price" Width="SizeToCells" MinWidth="80" Binding="{Binding UnitPrice,UpdateSourceTrigger=PropertyChanged}" />
        <DataGridTextColumn Header="Unit" Width="SizeToCells" MinWidth="80" Binding="{Binding Unit}" IsReadOnly="True"/>
    <DataGridTextColumn Header="Quantity" Width="SizeToCells" MinWidth="80" Binding="{Binding Quantity,UpdateSourceTrigger=PropertyChanged}" />
        <DataGridTextColumn Header="Discount" Width="SizeToCells" MinWidth="80" Binding="{Binding Discount,UpdateSourceTrigger=PropertyChanged}"/>
        <DataGridTextColumn Header="Amount" Width="SizeToCells" MinWidth="100" Binding="{Binding Amount,StringFormat=\{0:n2\}}" IsReadOnly="True" />
    </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:33:23.787

问题可能是您正在使用`UpdateSourceTrigger=PropertyChanged`它重新评估每次击键时的文本，并且以小数点结尾的数字无效。尝试删除`UpdateSourceTrigger`设置（因此恢复为默认设置 - LostFocus）

# css - 我的带有 repeat-x 属性的背景图像被切掉了

> ID：10304968
> 
> 赞同：1
> 
> 时间：2012-04-24T19:46:45.873
> 
> 标签：css, background

我在使用 repeat-x 属性的背景图像时遇到问题：S 在 Windows 操作系统上，它似乎工作正常，但在 Mac 上却不行。当我打开网页时，我看到右侧有一堆空白区域被切掉，并且在调整窗口大小时它会自行纠正：O 我认为我设置其宽度的方法有问题，但无法弄清楚究竟是什么原因。

[http://www.sangminkim.com/sample/index.html](http://www.sangminkim.com/sample/index.html)

这是页面的网址。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:40:22.393

问题：从小视图开始并向右滚动时，不显示背景图像。

这个问题无法解决。如果您检查 HTML 和 BODY 元素，背景会在元素停止的地方停止。HTML 和 BODY 元素不能大于视口。这是一个常见问题，无法纠正（它甚至发生在 StackOverflow 的页脚）。

# c# - C# 将字符串解析为 int32 - 值太大

> ID：10304969
> 
> 赞同：3
> 
> 时间：2012-04-24T19:46:51.953
> 
> 标签：c#

我从一个包含`INT32`值的外部接口接收到一个字符串。这个值代表“-100”——一个有符号的整数——因此，看起来像这个字符串“4294967196”。如果它看起来像“-100”，我可以用`Int32.TryParse()`它来将其转换为有符号值。但在我的情况下，它按原样解释值并告诉我该值太大（> 2.147.483.647）。有什么解决方法可以让它工作吗？如何告诉解析器前导 1 不是数字？

**编辑：**抱歉不准确。我收到的值是一个类似于“4294967196”的字符串。它表示`Uint32`值为 -100。如果接口将返回一个包含“-100”的字符串，则可以只使用`Int32.TryParse()`. 这就是我试图表达的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T19:51:32.963

使用`uint.TryParse()`并将结果转换为`int`.

```
string s = "4294967196";
uint ux;
int x = 0;
if (uint.TryParse(s, out ux))
{
    x = (int)ux;
}
// x = -100 
```

# bash - Bash - 为什么“0”不被识别为数字？

> ID：10304978
> 
> 赞同：0
> 
> 时间：2012-04-24T19:47:22.323
> 
> 标签：bash

我发现了一个有趣的 Bash 脚本，它可以测试变量是否为数字/整数。我喜欢它，但我不明白为什么“0”不能被识别为数字？我不能问作者，hi/shi 是匿名的。

```
#!/bin/bash

n="$1"

echo "Test numeric '$n' "
if ((n)) 2>/dev/null; then
n=$((n))
echo "Yes: $n"
else
echo "No: $n"
fi 
```

谢谢！

**更新 - 2012 年 4 月 27 日。**

这是我的最终代码（短版）：

```
#!/bin/bash

ANSWER=0
DEFAULT=5
INDEX=86

read -p 'Not choosing / Wrong typing is equivalent to default (#5): ' ANSWER;

shopt -s extglob
if [[ $ANSWER == ?(-)+([0-9]) ]]
  then ANSWER=$((ANSWER));
  else ANSWER=$DEFAULT;
fi

if [ $ANSWER -lt 1 ] || [ $ANSWER -gt $INDEX ]
  then ANSWER=$DEFAULT;
fi 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T19:48:52.610

它不测试它是否是数字/整数。它测试 n 评估为真或假，如果 0 为假，否则（数字或其他字符串）为真。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:03:18.900

使用[模式匹配](http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching)来测试：

```
if [[ $n == *[^0-9]* ]]; then echo "not numeric"; else echo numeric; fi 
```

但这不会匹配负整数，并且会错误地将空字符串匹配为数字。要获得更精确的模式，请启用 shell 的扩展通配符：

```
shopt -s extglob
if [[ $n == ?(-)+([0-9]) ]]; then echo numeric; else echo "not numeric"; fi 
```

并匹配一个小数

```
[[ $n == @(?(-)+([0-9])?(.*(0-9))|?(-)*([0-9]).+([0-9])) ]] 
```

# silverlight - Silverlight 触发一个事件，甚至一秒钟后触发另一个事件

> ID：10304983
> 
> 赞同：1
> 
> 时间：2012-04-24T19:47:31.267
> 
> 标签：silverlight

有没有办法做这样的事情？

背景：我有一个按钮点击。单击按钮时，我尝试显示“正在加载”消息，运行一堆执行某些 UI 工作的代码，然后关闭“正在加载”消息。通常需要几秒钟到 20 秒的时间。目前加载消息根本不显示，UI 冻结，直到我的按钮单击中的代码完成。

我已经阅读了有关 Background Worker 和 Dispatcher 的信息，但无法让它工作。我不确定是否是因为按钮单击中的代码调用了各种其他代码（包括 3rd 方的东西），但我无法让它正确运行。这一切仍然有效，但它仍然冻结 UI 并且没有出现加载消息。

所以，我想知道是否有其他方法可以解决这个问题。是否可以进行设置，以便在单击按钮时仅显示加载消息，然后大约一秒钟后触发另一个执行我长时间运行的进程的事件？这样，用户界面仍会冻结几秒钟，但至少会显示“正在加载”消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T22:57:23.650

您应该能够通过[Dispatcher.BeginInvoke](http://msdn.microsoft.com/en-us/library/cc190259%28v=VS.95%29.aspx)调用来执行此操作。

```
private void ButtonClick(object sender, EventArgs e)
{
    ShowMyLoadingMessage(); // your code, not sure what it is
    Dispatcher.BeginInvoke(() =>
    {
       CallMyLongRunningCode(); // again, not sure what this is
       HideMyLoadingMessage();
    }
} 
```

我不认为这是最好的解决方案，因为它在 UI 线程上运行，但它应该满足您的要求。

需要 20 秒的长时间运行代码是什么？

# java - Google IMAP XOAuth 仅适用于身份验证

> ID：10304984
> 
> 赞同：0
> 
> 时间：2012-04-24T19:47:32.793
> 
> 标签：java, oauth, gmail

我正在尝试使用 XOAuth 使用来自 Google Apps 收件箱的最新消息填充 portlet。然而，它似乎每一步都在与我作斗争。我正在使用来自： [This Page](http://code.google.com/p/google-mail-xoauth-tool-java-two-legged/)的 2-Legged 代码。

我在进行身份验证时遇到了问题，但是在将我的 Javamail 版本降到 1.4 auth 后开始工作。但是，现在每当我尝试列出文件夹内容甚至*EXAMINE*文件夹时，都会收到**Invalid Credentials**错误。

 *```
DEBUG: setDebug: JavaMail version 1.4ea
DEBUG: mail.imap.fetchsize: 16384
DEBUG: enable SASL
DEBUG: SASL mechanisms allowed: XOAUTH
* OK Gimap ready for requests from 198.133.178.17 o7if44308676igp.16
A0 CAPABILITY
* CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 XYZZY SASL-IR AUTH=XOAUTH
A0 OK Thats all she wrote! o7if44308676igp.16
IMAP DEBUG: AUTH: XOAUTH
DEBUG: protocolConnect login, host=imap.gmail.com, user=user@cnm.edu, password=<non-null>
IMAP SASL DEBUG: Mechanisms: XOAUTH
IMAP SASL DEBUG: SASL client XOAUTH
A1 AUTHENTICATE XOAUTH
+ 
IMAP SASL DEBUG: challenge:  :
IMAP SASL DEBUG: response: GET https://mail.google.com/mail/b/user@cnm.edu/imap/?xoauth_requestor_id=user%40cnm.edu oauth_consumer_key="cnm.edu",oauth_signature_method="HMAC-SHA1",oauth_timestamp="1335245518",oauth_nonce="4720724339258128",oauth_version="1.0",oauth_signature="7HAU4923Gy7%2Ffqb3avk7Tg%2FXtVM%3D" :
R0VUIGh0dHBzOi8vbWFpbC5nb29nbGUuY29tL21haWwvYi9saG9sY29tYjJAY25tLmVkdS9pbWFwLz94b2F1dGhfcmVxdWVzdG9yX2lkPWxob2xjb21iMiU0MGNubS5lZHUgb2F1dGhfY29uc3VtZXJfa2V5PSJjbm0uZWR1IixvYXV0aF9zaWduYXR1cmVfbWV0aG9kPSJITUFDLVNIQTEiLG9hdXRoX3RpbWVzdGFtcD0iMTMzNTI0NTUxOCIsb2F1dGhfbm9uY2U9IjQ3MjA3MjQzMzkyNTgxMjgiLG9hdXRoX3ZlcnNpb249IjEuMCIsb2F1dGhfc2lnbmF0dXJlPSI3SEFVNDkyM0d5NyUyRmZxYjNhdms3VGclMkZYdFZNJTNEIg==
got folder: INBOX
DEBUG: connection available -- size: 1
A2 EXAMINE INBOX
A1 NO [ALERT] Invalid credentials (Failure)
A2 BAD Unknown command o7if44308676igp.16
A3 LOGOUT
* BYE Logout Requested o7if44308676igp.16
A3 OK Quoth the raven, nevermore... o7if44308676igp.16
Exception in thread "main" javax.mail.MessagingException: A2 BAD Unknown command o7if44308676igp.16;
  nested exception is:
    com.sun.mail.iap.BadCommandException: A2 BAD Unknown command o7if44308676igp.16
    at com.sun.mail.imap.IMAPFolder.open(IMAPFolder.java:829)
    at TwoLegged.main(TwoLegged.java:37)
Caused by: com.sun.mail.iap.BadCommandException: A2 BAD Unknown command o7if44308676igp.16
    at com.sun.mail.iap.Protocol.handleResult(Protocol.java:296)
    at com.sun.mail.imap.protocol.IMAPProtocol.examine(IMAPProtocol.java:636)
    at com.sun.mail.imap.IMAPFolder.open(IMAPFolder.java:811)
    ... 1 more 
```

我在这一点上不知所措。[Gmail OAuth Docs](https://developers.google.com/google-apps/gmail/oauth_protocol)没有表明除了身份验证之外的任何请求都需要签名，但**Invalid Credentials**错误似乎暗示其他情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:37:29.673

原来我的 Java 版本不能很好地与 1.4 以上的 javamail 版本配合使用，这正是我所需要的。

我将 Java 从 1.6.0_21 升级到 1.6.0_24。*

# oracle10g - 从 OS X 连接到 Vagrant box 上的 Oracle

> ID：10304985
> 
> 赞同：1
> 
> 时间：2012-04-24T19:47:46.103
> 
> 标签：oracle10g, centos, osx-lion, vagrant, centos6

我在 OS X Lion 上运行的 CentOS 6 Vagrant box (VM) 上安装了 Oracle 10g。在 CentOS 上，我可以`sqlplus`为 oracle 用户（不是 root）运行。我可以使用它的 IP ping 到我的 Vagrant 盒子，`OS X`反之亦然。我还将端口 1521 从转发`CentOS`到端口 1521 on `OS X`。

我想在我的 OS X 上使用 SQLDeveloper 连接到我的 VM 上的 Oracle。我不断收到以下错误

> 状态：失败 - 测试失败：IO 错误：网络适配器无法建立连接

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:10:49.117

我假设您的 Vagrant 文件中有类似的内容： `config.vm.forward_port 1521, 1521`

那么你应该只需要： `sqlplus system/manager@//localhost:1521/xe`

如果失败，请确保在虚拟机上启动 Oracle 侦听器。（`netstat -ln | grep 1521`在虚拟机上做一个）

不要使用虚拟机 IP 地址连接到 Oracle。Vagrant 使用 NAT，因此您应该无法 ping 虚拟机

如果一切都失败了，请使用： [https ://github.com/rjdkolb/vagrant-ubuntu-oracle-xe](https://github.com/rjdkolb/vagrant-ubuntu-oracle-xe)

# vba - 打开 Windows 资源管理器并选择一个文件

> ID：10304989
> 
> 赞同：28
> 
> 时间：2012-04-24T19:47:55.530
> 
> 标签：vba, excel

有没有办法从 vba 表单打开 Windows 资源管理器窗口，导航到特定文件并选择它，以便将文件名放在文本框中？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-04-24T19:59:59.980

看看这个片段：

```
Private Sub openDialog()
    Dim fd As Office.FileDialog

    Set fd = Application.FileDialog(msoFileDialogFilePicker)

   With fd

      .AllowMultiSelect = False

      ' Set the title of the dialog box.
      .Title = "Please select the file."

      ' Clear out the current filters, and add our own.
      .Filters.Clear
      .Filters.Add "Excel 2003", "*.xls"
      .Filters.Add "All Files", "*.*"

      ' Show the dialog box. If the .Show method returns True, the
      ' user picked at least one file. If the .Show method returns
      ' False, the user clicked Cancel.
      If .Show = True Then
        txtFileName = .SelectedItems(1) 'replace txtFileName with your textbox

      End If
   End With
End Sub 
```

我想这就是你所要求的。

# php - 使用 php 下载 torrent

> ID：10304992
> 
> 赞同：0
> 
> 时间：2012-04-24T19:48:06.270
> 
> 标签：php, download, bittorrent

我想使用 php 下载 torrent。

所以场景是用户上传一个种子，服务器下载它。用户可以使用他的浏览器下载种子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:56:07.363

不知道这是否适合您，但是：

*   安装 rtorrent (https://wiki.archlinux.org/index.php/RTorrent)
*   配置 rtorrent 以观看新 torrent 文件的目录 (http://jkt.im/2011/09/28/automatic-torrent-management-with-rtorrent-and-some-helper-scripts/)
*   rtorrent 将下载文件并将其移动到“完成”之类的目录中
*   php脚本检查文件夹或新内容并在网页中在线转换/显示文件

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-24T21:01:43.713

您需要的所有功能已经存在于`rTWi` [http://rtwi.jmk.hu/](http://rtwi.jmk.hu/)并且它也是开源的，所以您只需要很少的定制

# android - Junit 输出使用-missing-android-xml-junit-test-runner

> ID：10304995
> 
> 赞同：1
> 
> 时间：2012-04-24T19:48:28.830
> 
> 标签：android, junit, jenkins

我在 Jenkins中设置[http://code.google.com/p/the-missing-android-xml-junit-test-runner/时遇到问题。](http://code.google.com/p/the-missing-android-xml-junit-test-runner/)

我可以让测试在 Eclipse 中运行并通过。当我将它们拉入 jenkins 并通过 ant 构建时，我遇到了以下问题：

```
 [echo] Running tests ...
 [exec] INSTRUMENTATION_RESULT: shortMsg=java.lang.ClassNotFoundException
 [exec] INSTRUMENTATION_RESULT: longMsg=java.lang.ClassNotFoundException: pl.polidea.instrumentation.PolideaInstrumentationTestRunner in loader dalvik.system.PathClassLoader[/system/framework/android.test.runner.jar:/data/app/mj.geo.golf.application.test-1.apk:/data/app/mj.geo.golf.application-1.apk]
 [exec] INSTRUMENTATION_CODE: 0 
```

清单看起来像：

```
<?xml version="1.0" encoding="utf-8"?>    
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="mj.geo.golf.application.test"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<instrumentation
    android:name="pl.polidea.instrumentation.PolideaInstrumentationTestRunner"
    android:targetPackage="mj.geo.golf.application"
    android:label="Tests for pl.polidea.somepackage" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <uses-library android:name="android.test.runner" />
</application></manifest> 
```

我查看了其他相关帖子，并确保 eclipse 导出了 the-missing-android-xml-junit-test-runner-release-1.3_2.jar 并出现在工作区中。

我对android和java很陌生，所以任何想法都会很有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:15:15.760

您应该更仔细地阅读 Wiki。

> 应将测试运行程序添加到测试项目中。作为 .jar 文件（**添加到 libs 目录中**）或作为外部库（标准 android 外部库方法）。您可以从此处下载 .jar 文件。

所以最简单的方法是在项目的根目录下创建一个名为*libs的文件夹（与**src*文件夹相同的级别）并将 *the-missing-android-xml-junit-test-runner-release-1.3_2.jar * 在其中，然后“将其添加到构建路径”。

# c# - 在WPF MVVM的最后一行按Enter键时将焦点移出DataGrid？

> ID：10304997
> 
> 赞同：0
> 
> 时间：2012-04-24T19:48:35.490
> 
> 标签：c#, wpf, mvvm, wpfdatagrid

当我点击它的最后一行时，如何将焦点从 DataGrid 移到下一个控件`Enter`，这是空的。

我正在使用 WPF MVVM

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:55:50.723

```
 private void dataGrid1_KeyUp(object sender, KeyEventArgs e)
        {
            DependencyObject dep = (DependencyObject)e.OriginalSource;
            //here we find the Row is selected
            //then we check is the row last row

            while ((dep != null) && !(dep is DataGridRow) && !(dep is DataGridColumnHeader))
            {
                dep = VisualTreeHelper.GetParent(dep);
            }

            if (dep == null)
                return;

            if (dep is DataGridRow)
            {
                DataGridRow row= dep as DataGridRow;
                //untill here we find the selected row and here we check if it
                //the last row our focus go to next control after datagrid
               if (row.GetIndex() == dataGrid1.Items.Count - 1)
            {
                dataGrid1.MoveFocus(new TraversalRequest(FocusNavigationDirection.Down));
                dataGrid1.UnselectAll();
            }
            }
        } 
```

将此事件设置为 datagrid 的键。使用 System.Windows.Controls.Primitives 也可以使用此参考。将数据网格和其他一些控件放到您的窗口中。当你到达最后一行时，它会将焦点更改为下一个控件。**如果（row.GetIndex（）== dataGrid1.Items.Count - 1）**，我会在你丰富最后一行时发生

 **我使用带有**fullrowselect 的 datagrid 作为选择模式**。如果你想使用带有单元格选择模式的 datagrid，请给我留下评论。**

# python - Python模块，引用同一包中的其他模块？

> ID：10304999
> 
> 赞同：3
> 
> 时间：2012-04-24T19:48:38.073
> 
> 标签：python, module, package

我有一个简单的 python 包，其目录结构如下：

```
wibble
|
|-----foo
|      |----ping.py
|
|-----bar
|      |----pong.py 
```

简单的问题：我将如何引用`ping.py`from中的函数/类`pong.py`？查看文档，这似乎就像`__init__.py`在根目录中创建文件一样简单`wibble`，`foo`然后`bar`执行`pong.py`类似`from wibble.foo.ping import important_function`. 但是，尝试这样做会导致`No module named wibble.foo.ping`.

我确定我在某个地方的文档中遗漏了一些东西，因为这必须是可能的。`module`我对 a和 a的区别也有点模糊`namespace`，我的背景是 c#.net，所以这里的任何类比都会有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:51:26.490

您需要将 wibble 添加到 python 路径（请参阅[官方文档](http://docs.python.org/tutorial/modules.html#the-module-search-path)），一种方法是

```
import sys
sys.path.append('/path/to/wibble') 
```

另一种方法是使用环境变量 PYTHONPATH

```
export PYTHONPATH=$PYTHONPATH:/path/to/wibble 
```