# StackOverflow 问答 12369000-12369999

# java - 如何更好地理解 java 上的 png 表示？

> ID：12369004
> 
> 赞同：0
> 
> 时间：2012-09-11T11:46:56.037
> 
> 标签：java, image, png

我想深入了解如何在 java 中的内存中表示 png 文件的低级别，以便我可以迭代其像素，更改它们，使用现有的创建修改后的 png 文件等。

我从哪里开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:53:57.777

您可以先将其读入[`BufferedImage`](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html)with [`ImageIO.read(file)`](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#read%28java.io.File%29)。
这些[`getRGB(...)`](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html#getRGB%28int,%20int%29)方法可以帮助您获取有关单个像素的信息，相应的`setRGB(...)`方法可以帮助您更改它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T12:39:12.233

在 Java 中，内存中图像的表示与文件的格式基本上无关：无论是 PNG、JPEG、GIF 还是其他格式，这些都是将图像编码为（与语言无关的）字节流的标准。但是，当您在内存中处理图像的像素时，您已经对其进行了解码，因此您“忘记了”它来自哪种格式（PNG、JPEG...）。

在 Java 中处理图像的最常见方法是使用 [BufferedImage](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html)类，该类包含在*java.awt.image 中。** 包裹。但这不是必要条件。例如，我研究过一个不使用 BufferedImage 的低级 PNG 编码器/编码器 ( [PNGJ](http://code.google.com/p/pngj/wiki/Overview) )，而是将每个图像行作为一个`int[]`数组提供给您。

# java - 运行多个 Equinox OSGi 框架

> ID：12369005
> 
> 赞同：1
> 
> 时间：2012-09-11T11:47:01.513
> 
> 标签：java, osgi, equinox

我试图在一个普通的 Java 应用程序中运行多个 Equinox 实例。

目前，我正在我的应用程序中使用以下方法启动一个 Equinox 实例：

```
EclipseStarter.startup(new String[]{"-console", "-dev", "bin"}, null); 
```

但是，对于需要大量启动、停止和更新包的新用例，这种方法已不够用。

相反，我希望能够同时拥有两个具有不同安装包的框架，并在必要时在它们之间进行交换。在某些情况下，我仍然需要停止并重新启动一些捆绑包，但这种方法可以解决大部分问题。

知道如何设置这种方法吗？？？

非常感谢您的帮助！

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:50:33.313

您不应该使用 EclipseStarter。使用 OSGi[启动 API](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/launch/package-summary.html)创建框架的多个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:08:50.230

您可以通过为每个实例使用不同的 ClassLoader 来创建多个静态实例。创建多个[URLClassLoader](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/URLClassLoader.html)，并将路径设置为包含 EclipseStarter 类的 JarFile。使用 ClassLoader 的 loadClass() 方法获取对 EclipseStarter 类对象的引用。

# google-app-engine - 使用 ndb.KeyProperty 如何引用同一个模型？

> ID：12369014
> 
> 赞同：9
> 
> 时间：2012-09-11T11:47:22.540
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

我有一个简单的场景，其中有一个具有名称、电子邮件和关注者属性的用户类。

```
class User(ndb.Model):
    name = ndb.StringProperty(required = True)
    search_name = ndb.StringProperty(required = True)
    pw_hash = ndb.StringProperty(required = True)
    email = ndb.StringProperty()

    follows = ndb.KeyProperty(Follow, repeated=True)
    followers = ndb.KeyProperty(User, repeated=True) 
```

执行此操作时出现错误。

```
File "C:\ujjal\my project\cravel\code2\Users.py", line 46, in User
  followers = ndb.KeyProperty(User, repeated=True)
NameError: name 'User' is not defined
INFO     2012-09-11 11:45:23,953 dev_appserver.py:2967] "GET / HTTP/1.1" 500 - 
```

任何关于如何对“追随者”属性建模的建议都将受到高度赞赏。提前致谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-11T14:00:25.220

在键属性上使用种类`e.g. some_prop = ndb.KeyProperty(User)`只会强制键的种类必须是用户种类。因此，如果需要，您仍然可以使用没有种类的 KeyProperty。

但是，如果您想强制所有跟随者键必须是用户类型（在用户模型内），那么用引号将类型括起来：

```
followers = ndb.KeyProperty(kind='User', repeated=True) 
```

在[ndb 备忘单中解释得更好一些](https://docs.google.com/document/d/1AefylbadN456_Z7BZOpZEXDq8cR8LYu7QgI7bt5V0Iw/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T12:34:12.720

如果您只想让“追随者”成为 KeyProperty，那么只需输入：

```
followers = ndb.KeyProperty(repeated=True) 
```

或者，我认为您追求的是指定密钥的类型。

```
follows = ndb.KeyProperty(kind=User,repeated=True) 
```

我想你可能只是失踪了`kind=User`。

[https://developers.google.com/appengine/docs/python/ndb/properties#types](https://developers.google.com/appengine/docs/python/ndb/properties#types)

# java - java多线程

> ID：12369019
> 
> 赞同：-3
> 
> 时间：2012-09-11T11:47:40.410
> 
> 标签：java, multithreading, timer

我正在使用 java 命令执行批处理文件并读取放入数据库的文本文件中的批处理数据。例如，我必须使用相同的批处理文件在 15 分钟间隔内运行 430 个节点。所以我将 430 个节点划分为 12 个线程，所以每个线程包含 40 个指向同一个批处理文件的节点。但是并行运行的线程不能等待批处理文件命令完成。我不能等待每个线程，因为所有任务都应该在 15 分钟内完成。有什么建议么？

下面是运行多线程的一段代码。

```
 for (int i = 0; i < noOfMainThreads; i++) {
        // running 12 thread for 40 node 
        threadArr[i] = new Thread(runnableArr[i]);
        runnableArr[i] = new CodeBatchfile(nodeArr,nodeidArr);
    }

    for (int i = 0; i < noOfMainThreads; i++) {
        threadArr[i].start;
    } 

 class CodeBatchfile{  

    void run(){
        for (int i=1;i<nodename.length;i++) {
            // exciting batch file using 12 threads.
            cmd = filepath + " " + nodenamelocal;
            try {
                process = Runtime.getRuntime().exec(cmd, null, bdir);
                process.waitFor();
            }
            catch(Exception ex) {
                System.out.println("Exception Running batch file" + ex.getLocalizedMessage());
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:00:39.970

请改用[ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)。构建一个管道，其中每个步骤的工作方式如下：

创建一个作业对象，其中包含执行任务的所有信息并包含结果字段。创建所有作业对象并将它们放入队列以供服务运行。

所以第一步是创建 430 个作业来运行批处理程序。每个作业都会启动批处理程序并等待它终止。批处理终止后，您读取输出并将其放入作业实例中。

创建一个并行运行 N 个作业的执行器。您将需要调整 N；如果是 CPU 密集型任务，则 N == 内核数。如果它是 IO 密集型工作，请尝试更高的值（通常是 CPU 内核的 2-4 倍运行良好）。

将所有作业放入执行者的队列中。等待完成的作业，从它们创建新作业并将它们放入执行器的输入队列中。

保留一个工作计数器（开始，完成），以便您知道何时停止。

[教程](http://java.dzone.com/articles/java-concurrency-%E2%80%93-part-7)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:45:39.123

我认为你应该使用 CyclicBarrier，屏障允许你在特定点等待，直到所有线程都到达屏障，所以在执行批处理后你应该调用循环屏障的等待。可以在这里找到一个很好的代码示例：在此处 [输入链接描述](http://programmingexamples.wikidot.com/cyclicbarrier)

# javascript - 如何使用jquery在div标签中的某处找到一个位置

> ID：12369023
> 
> 赞同：-2
> 
> 时间：2012-09-11T11:47:58.093
> 
> 标签：javascript, jquery

另请查看附件图片以进行说明。我有一个 div 容器，我想使用 jquery 或 javascript 或两者在该 div 容器中的某个位置找到一个位置。所附图像显示了一切。请帮忙。

**更新**

我想找到这个位置的原因是我想将容器动画到那个点并最终消失。其次，我也想在另一侧找到位置，以便我可以从该位置为容器设置动画。

**第二次更新**

换句话说，我们如何找到两条线**的交点**？

![在此处输入图像描述](../Images/d217515c827fa907c56e11e09ceea08f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:20:02.207

鉴于您需要在 div 中找到两条线之间的交点，您的标记可能如下所示：

```
<div id="container" style="position:absolute; width: 100%; height: 200px;">
  <div style="width: 2px; height: 100%; left: 20%; position:absolute; background-color: red; top: 0;"></div>
  <div style="height: 2px; width: 100%; left: 0; position:absolute; background-color: blue; top: 25%;"></div>
</div>​ 
```

使用 jQuery，您可以像这样找到交叉点的坐标：

```
var x = $('#container div:first').position().left;
var y = $('#container div:last').position().top;
console.log(x,y); 
```

x 和 y 是相对于容器元素的像素坐标。

[http://jsfiddle.net/sAsmj/](http://jsfiddle.net/sAsmj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:55:27.403

你可以用这个找到指针位置，试试看

```
$(document).ready(function(){

    $("div#container").on("mousemove", function(e){
    var self = $(this);
    var dx = e.pageX;
    var dy = e.pageY;

    var x = dx - self.offset().left ;
    var y = dy - self.offset().top ;

    console.log(x);
    console.log(y);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:50:10.387

我没有看到图像，但是如果您正在寻找位置，理想情况下是插入符号位置，您可以使用 jquery 插件[http://plugins.jquery.com/project/jCaret](http://plugins.jquery.com/project/jCaret)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T11:51:43.040

如果你想要鼠标的 X，Y，你可以阅读这个问题：

[使用 jQuery 获取鼠标单击图像的 X/Y 坐标](https://stackoverflow.com/questions/2159044/getting-the-x-y-coordinates-of-a-mouse-click-on-an-image-with-jquery)

这是基于的问题的摘录，`img`但您可以为您的容器更改它：

```
$(document).ready(function() {
  $('img').click(function(e) {
    var offset = $(this).offset();
    alert(e.clientX - offset.left);
    alert(e.clientY - offset.top);
  });
}); 
```

# objective-c - 显示基于登录的视图控制器

> ID：12369025
> 
> 赞同：0
> 
> 时间：2012-09-11T11:48:05.490
> 
> 标签：objective-c, ios5

我正在学习IOS开发，我有一个简单的结构问题。我`UITabBarController`在应用程序委托中有一个标签栏导航。我有一个帐户选项卡，我想知道如何根据用户是否登录来显示内容。我有用户单例数据模型，一旦加载帐户选项卡，我就可以在视图控制器之间切换，但是我的问题是如何在加载之前确定视图。我只是使用`viewDidLoad`，检查模型然后重定向吗？

# c# - 如何使用 C# 访问 Outlook 用户的日历？

> ID：12369029
> 
> 赞同：1
> 
> 时间：2012-09-11T11:48:20.490
> 
> 标签：c#, outlook

给定用户的电子邮件地址，我想访问 Outlook 用户日历中的约会。

这大概涉及以某种方式使用该`Microsoft.Office.Interop.Outlook.NameSpace`对象来访问用户的日历。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T12:09:31.673

以下是用于打开特定用户日历的特定代码片段，取自**JMK**在对此问题的评论中发布的问题：

```
string userName = "Foo bar";

Outlook.Application oApp;
oApp = new Outlook.Application();
Outlook.NameSpace oNS = oApp.GetNamespace("mapi");
oNS.Logon(Missing.Value, Missing.Value, true, true);

Outlook.Recipient oRecip = (Outlook.Recipient)oNS.CreateRecipient(userName);
Outlook.MAPIFolder usersCalendarFolder = (Outlook.MAPIFolder) oNS.GetSharedDefaultFolder(oRecip, Outlook.OlDefaultFolders.olFolderCalendar); 
```

# c# - 在 NHibernate 中使用 Save/Delete/SaveOrUpdate 受影响的行

> ID：12369031
> 
> 赞同：0
> 
> 时间：2012-09-11T11:48:23.383
> 
> 标签：c#, nhibernate, orm, ado.net

我有一个使用 Nhibernate 的应用程序，并且我正在实现一个存储库模式。我想知道是否有任何方法可以获取受影响的行数并将其返回给存储库用户，就像我们`ICommand.ExecuteNonQuery`在 Ado.Net Providers 中进行的那样。我的代码如下所示：

```
 public int Save(T entity) 
   {
       session.Save(entity);
       return ???
   }

   public int Delete(T entity) 
   {
       session.Delete(entity);
       return ???
   } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:37:39.420

在您的代码中，如果行数不是 1，NHibernate 将引发异常（在上面的 2 种情况下 - 无论如何，当您刷新会话时），所以您可以从 Delete 和 Save 方法返回 1 - 当然这会返回行数毫无意义。为什么要返回行数？如果要检查 NHibernate 是否正在做它应该做的事情（即更新 1 行或删除 1 行），我建议相信该工具来完成它的工作......

# css - 列表/选择需要与现有输入/文本区域相同的 CSS

> ID：12369034
> 
> 赞同：0
> 
> 时间：2012-09-11T11:48:32.400
> 
> 标签：css

我的表单有这些 css，但下拉列表/选择缺少 css。我需要与以下相同的格式：

**CSS：**

```
form input[type="password"], form input[type="text"] {
display: block;
width: 94%;
margin: 5px 0;
padding: 8px;
color: #777;
font-family: Arial;
font-size: 13px;

-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px;

border: 1px solid #ADADAD;
outline: none;
}

form textarea {
display: block;
width: 94%;
margin: 5px 0;
padding: 8px;
color: #777;
font-family: Arial;
font-size: 13px;
overflow: auto;
resize: none;

-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px;

border: 1px solid #ADADAD;
outline: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:54:18.530

您应该根据输入的类型使用 CSS 类名称。例如，文本输入应该有一个 CSS 类名“TextBox”，检查输入应该有一个 CSS 类名“CheckBox”，您可以单独设置所有 css 属性。您还可以在单​​个元素上设置多个 CSS 类名称，例如`"Control TextBox Disabled"`,`"Control CheckBox"`或`"Control Label Red-Text"`.

您也可以使用 JQuery 选择器并找到任何类型的输入并做任何您想做的事情。

我希望这有帮助：

```
.Control
{
    display: block;
    width: 94%;
    color: #777;
    font-family: Arial;
    font-size: 13px;
}

.TextBox-Base
{
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    border: 1px solid #ADADAD;
    outline: none;
    margin: 5px 0;
    padding: 8px;
}

.TextBox, 
.PasswordBox
{
}

.RichTextBox
{
    overflow: auto;
    resize: none;
}

.DropDownList
{
} 
```

HTML 示例代码：

```
<input type="text" class="Control TextBox-Base PasswordBox" />
<input type="password" class="Control TextBox-Base PasswordBox" />

<textarea class="Control TextBox-Base RichTextBox"></textarea>

<select class="Control DropDownList" ></select> 
```

使用 JQuery 选择元素：

```
$(".TextBox-Base") //returns all the elements that has "TextBox-Base" class name included.

$(".TextBox") //returns all the elements that has "TextBox" class name included.

$(".PasswordBox") //returns all the elements that has "PasswordBox" class name included.

$(".RichTextBox") //returns all the elements that has "RichTextBox" class name included.

$(".DropDownList") //returns all the elements that has "DropDownList" class name included. 
```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:51:40.833

您可以使用**选择选择**器

```
form select {

} 
```

# tfs - 我们如何才能在 TFS 2010 中为我们项目中的一个文件启用多个签出？

> ID：12369038
> 
> 赞同：2
> 
> 时间：2012-09-11T11:48:55.427
> 
> 标签：tfs, version-control, vcs-checkout

我们在项目中使用 TFS 2010 作为源代码控制。我在我们的项目上禁用了多重签出，现在我只需要为 App.config 文件启用多重签出。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:22:51.090

不幸的是，不可能在每个文件的基础上设置多个签出属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:38:52.703

这应该会有所帮助： [选择性多次结帐](http://msdn.microsoft.com/en-us/library/ms252452.aspx)

我还没有尝试过。

# php - 在电子邮件 PHP 中复制 HTML 表单

> ID：12369047
> 
> 赞同：0
> 
> 时间：2012-09-11T11:49:37.237
> 
> 标签：php, html

我正在尝试将我的 HTML 表单复制到电子邮件正文中。下面是表单已经在 php 文件中的代码，但我希望如果用户提交 html 表单文件，那么所有未隐藏的表单数据都被复制到电子邮件正文中（作为禁用元素）。此外，如果有任何文件附件字段，则应将其附加到电子邮件中。

```
<?php
// multiple recipients
$to  = 'demo@localhost.com' . ', '; // note the comma
$to .= 'demo@localhost.com';

// subject
$subject = 'Birthday Reminders for August';

// message
$message = '
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<title>Untitled Document</title>
</head>

<body style="padding:3px; margin:0px;" bgcolor="#FFFFFF">
<table cellpadding="0" cellspacing="0" border="0" width="440">

    <tr><td style="height:10px"></td></tr>
    <tr>
      <td colspan="2" style="text-align:justify; line-height:15px;" class="body">

      <form name="frm" method="POST" action="careersuccess.php" enctype="multipart/form-data">
      <table cellpadding="0" cellspacing="0" border="0" width="100%">
          <tr>
            <td width="23%" class="body"> Name</td>
            <td width="3%" class="body">:</td>
            <td width="74%"><input type="text" name="strname" class="textfield"></td>
        </tr>
        <tr><td style="height:3px"></td></tr>
        <tr>
            <td width="23%" class="body"> Address</td>
            <td width="3%" class="body">:</td>
            <td width="74%"><textarea cols="16" name="straddress"></textarea></td>
        </tr>
        <tr><td style="height:3px"></td></tr>
        <tr>
            <td width="23%" class="body"> City</td>
            <td width="3%" class="body">:</td>
            <td width="74%"><input type="text" name="strcity" class="textfield"></td>
        </tr>
        <tr><td style="height:3px"></td></tr>
        <tr>
            <td width="23%" class="body"> State</td>
            <td width="3%" class="body">:</td>
            <td width="74%"><input type="text" name="strstate" class="textfield"></td>
        </tr>
        <tr><td style="height:3px"></td></tr>
        <tr>
            <td width="23%" class="body"> Contact No</td>
            <td width="3%" class="body">:</td>
            <td width="74%"><input type="text" name="strno" class="textfield"></td>
        </tr>
        <tr><td style="height:3px"></td></tr>
        <tr>
            <td width="23%" class="body"> Email</td>
            <td width="3%" class="body">:</td>
            <td width="74%"><input type="text" name="stremail" class="textfield"></td>
        </tr>
        <tr><td style="height:3px"></td></tr>
        <tr>
            <td width="23%" class="body"> Comments</td>
            <td width="3%" class="body">:</td>
            <td width="74%"><textarea cols="16" name="strcomments"></textarea></td>
        </tr>
        <tr><td style="height:3px"></td></tr>
        <tr>
            <td width="23%" class="body"> Resume</td>
            <td width="3%" class="body">:</td>
            <td width="74%"><input type="file" name="strresume"></td>
        </tr>
        <tr><td style="height:10px"></td></tr>
        <tr>

        </tr>

      </table>   
     </form>

</td>
    </tr>
    <tr>
      <td colspan="2" align="center"> </td>
  </tr>
    </table>
</body>
</html>
';

// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n";

// Mail it
mail($to, $subject, $message, $headers);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:53:26.697

我假设表单是从网站提交的，并且您没有尝试在电子邮件中创建可提交的表单。复制表单中提交的数据，$_POST[""]; 肯定是获取数据的最佳方式。显然，一旦电子邮件到达收件人的收件箱，数据就无法操作，但正如我所说，我假设您没有尝试创建可以从电子邮件提交的表单。

您在网站上的表格很好：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<title>Untitled Document</title>
</head>

<body style="padding:3px; margin:0px;" bgcolor="#FFFFFF">
<table cellpadding="0" cellspacing="0" border="0" width="440">

<tr><td style="height:10px"></td></tr>
<tr>
  <td colspan="2" style="text-align:justify; line-height:15px;" class="body">

  <form name="frm" method="POST" action="careersuccess.php" enctype="multipart/form-data">
  <table cellpadding="0" cellspacing="0" border="0" width="100%">
      <tr>
        <td width="23%" class="body"> Name</td>
        <td width="3%" class="body">:</td>
        <td width="74%"><input type="text" name="strname" class="textfield"></td>
    </tr>
    <tr><td style="height:3px"></td></tr>
    <tr>
        <td width="23%" class="body"> Address</td>
        <td width="3%" class="body">:</td>
        <td width="74%"><textarea cols="16" name="straddress"></textarea></td>
    </tr>
    <tr><td style="height:3px"></td></tr>
    <tr>
        <td width="23%" class="body"> City</td>
        <td width="3%" class="body">:</td>
        <td width="74%"><input type="text" name="strcity" class="textfield"></td>
    </tr>
    <tr><td style="height:3px"></td></tr>
    <tr>
        <td width="23%" class="body"> State</td>
        <td width="3%" class="body">:</td>
        <td width="74%"><input type="text" name="strstate" class="textfield"></td>
    </tr>
    <tr><td style="height:3px"></td></tr>
    <tr>
        <td width="23%" class="body"> Contact No</td>
        <td width="3%" class="body">:</td>
        <td width="74%"><input type="text" name="strno" class="textfield"></td>
    </tr>
    <tr><td style="height:3px"></td></tr>
    <tr>
        <td width="23%" class="body"> Email</td>
        <td width="3%" class="body">:</td>
        <td width="74%"><input type="text" name="stremail" class="textfield"></td>
    </tr>
    <tr><td style="height:3px"></td></tr>
    <tr>
        <td width="23%" class="body"> Comments</td>
        <td width="3%" class="body">:</td>
        <td width="74%"><textarea cols="16" name="strcomments"></textarea></td>
    </tr>
    <tr><td style="height:3px"></td></tr>
    <tr>
        <td width="23%" class="body"> Resume</td>
        <td width="3%" class="body">:</td>
        <td width="74%"><input type="file" name="strresume"></td>
    </tr>
    <tr><td style="height:10px"></td></tr>
    <tr>

    </tr>

  </table>   
 </form>

</td>
</tr>
<tr>
  <td colspan="2" align="center"> </td>
</tr>
</table>
</body>
</html> 
```

然后，您的文件 careersuccess.php 需要包含以下内容：

```
<?php
// multiple recipients
$to  = 'demo@localhost.com' . ', '; // note the comma
$to .= 'demo@localhost.com';

// subject
$subject = 'Birthday Reminders for August';

$strName = $_POST["strname"]; //assigns strname from form to PHP variable
$strAddress = $_POST["straddress"];
$strCity = $_POST["strcity"];
$strState = $_POST["strstate"];
$strNumber = $_POST["strnumber"];
$strEmail = $_POST["stremail"];
$strComments = $_POST["strcomments"];
$strResume = $_POST["strresume"];
$lineBreak = "<br />\n\"; //adds carriage return to break up your message

$message = "Name: ".$strName.$lineBreak."Address: ".$strAddress.$lineBreak."City: ".$strCity.$lineBreak."State: ".$strState.$lineBreak...for the rest of your variables;

// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n";

// Mail it
mail($to, $subject, $message, $headers);
?> 
```

这将导致表单的提交值被复制到 mail() 函数的 $message 变量中的电子邮件中。

# javascript - onclick png背景颜色变化

> ID：12369054
> 
> 赞同：1
> 
> 时间：2012-09-11T11:50:10.107
> 
> 标签：javascript, jquery, html, css

我需要设计网页的一部分，如下图所示。在左侧，有颜色选项。如果用户从左侧选择任何颜色并单击图像部分，图像的部分应该被选择的颜色填充。我花了更多时间在谷歌搜索上。大多数网站只使用闪存。但是我对flash不太了解。是否可以使用 jquery 插件来实现？

![在此处输入图像描述](../Images/9b25103c9569a602286fb923b1a214ea.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:53:17.757

您可能想要查看该[`<canvas>`](https://developer.mozilla.org/en-US/docs/Canvas_tutorial)元素。至于单击时填充图像的特定位，您可能需要[Floodfill 算法](http://en.wikipedia.org/wiki/Flood_fill)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T11:59:06.807

您可以使用 Javascript 解决此问题，但因此您需要为每种颜色提供一个自己的图像。

```
<script language="JavaScript" type="text/javascript">

function changePic(picColor)
{
  if(picName == "btnRed")
  {
    document.getElementById(mainPic).src = "mainPicRed.jpg"
  } 
  else if(picName == "btnYellow")
  {
    document.getElementById(mainPic).src = "mainPicYellow.jpg"
  } 
}

</script> 
```

每个颜色按钮的 HTML：

```
<img src="red.jpg" name="btnRed" id="btnRed" onClick="changePic(this.name)">
<img src="mainPic.jpg" name="mainPic" id="mainPic"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T11:55:40.147

如果您对使用的 png 文件有严格的控制，这真的可以很简单地完成。

例如，您可以使 png 完全不透明，但要着色的区域除外。

然后您可以加载图像并在单击颜色时设置您正在使用的元素的背景颜色。

像这样的东西：

```
$(".ColorOption").click(function(e){
   e.preventDefault();
   var color = $(this).data("color");
   $("#MainImageBackground").css("background-color", color);
}); 
```

假设您使用 data 属性设置颜色选项，如下所示：

```
<a data-color="#F00"></a> 
```

与您的图像类似：

```
<div id="MainImageBackground">
   <img src="whatever"/>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T11:58:12.610

接受任何 png 并填充中间：

您可以在此处找到有关 javascript 中的 Floodfill 算法的信息：

[http://jsfiddle.net/loktar/ZLw9m/](http://jsfiddle.net/loktar/ZLw9m/)

但是，您的实现必须更高级，因为您需要将图像转换为 javascript 可以理解的格式（例如 0 和 1），然后在其上运行算法

正如@musefan 指出的那样，如果您可以控制PNG，这会容易得多

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T11:55:47.960

想法1：使用canvas元素并查看填充方法，这可能会比flash更复杂。

想法2：

1.  创建透明PNG，其中彩色区域是唯一透明的部分。

2.  创建 2 个 DIVS，1 个在 z-index 10，其他在 20，大小相同，位置相同

3.  将图像放在 z-index 20 的顶部 div 中。然后更改 z-index 10 处的 div 1 中的背景颜色。

# c++ - 如何检测 atof 或 _wtof 是否失败？

> ID：12369060
> 
> 赞同：12
> 
> 时间：2012-09-11T11:51:03.397
> 
> 标签：c++

如何检测 atof 或 _wtof 是否无法将字符串转换为双精度？但不是通过尝试检查结果是否与 0.0 不同，因为我的输入可以是 0.0。谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-11T11:53:12.043

不要使用`atof`. 相反，使用`strtod`, from `<cstdlib>`，并检查`errno`from `<cerrno>`：

```
// assume: "char * mystr" is a null-terminated string

char * e;
errno = 0;
double x = std::strtod(mystring, &e);

if (*e != '\0' ||  // error, we didn't consume the entire string
    errno != 0 )   // error, overflow or underflow
{
    // fail
} 
```

指针`e`指向最后一个使用的字符。您还可以检查`e == mystr`是否*有任何*字符被消耗。

也`std::wcstod`可以使用`wchar_t`-strings，来自`<cwstring>`.

在 C++11 中，您也有`std::to_string`/ `std::to_wstring`， from `<string>`，但我相信如果转换失败会引发异常，这在处理外部数据时可能不是理想的故障模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:53:30.967

使用`atof`，你不能。但由于这是 C++，我建议你使用 a`std::stringstream`并`operator !`在应用`operator >>`到 a后检查它`double`。

# android - 如何从我的 android 应用程序调用日期时间设置屏幕？

> ID：12369062
> 
> 赞同：8
> 
> 时间：2012-09-11T11:51:16.953
> 
> 标签：android, settings, android-2.3-gingerbread

我正在使用**Android 2.3 为手机和桌子开发一个应用程序。**

在我的应用程序中，我希望用户能够修改设备的日期、时间值。我知道通过 android 应用程序是不可能的。

我计划从我的应用程序访问日期/时间设置屏幕。从该屏幕用户可以更改设置。

请给出您的想法，如何从 android 应用程序访问或转到日期时间设置屏幕。

欢迎大家提出你的想法。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-11T11:56:03.410

尝试使用此代码。它打开日期和时间设置屏幕。

```
startActivityForResult(new Intent(android.provider.Settings.ACTION_DATE_SETTINGS), 0); 
```

# regex - 使用正则表达式替换多个字符

> ID：12369064
> 
> 赞同：2
> 
> 时间：2012-09-11T11:51:23.890
> 
> 标签：regex, perl

我正在尝试对 acpi 命令的输出执行正则表达式替换。我的 perl 一个衬里是：

```
acpi | perl -F/,/ -alne 'print $F[1] if ($F[1]=~s!\s|%!!)' 
```

上面一行的输出是，`87%`而我需要的输出只是`87`它不会`%`在字符串中替换。

现在`acpi`命令的输出是

```
Battery 0: Discharging, 87%, 05:54:56 remaining 
```

的输出`print $F[1]`是

```
ronnie@ronnie:~$  acpi | perl -F/,/ -alne 'print $F[1]'
 87%   #space followed by 87%#
ronnie@ronnie:~$ 
```

现在奇怪的是，如果我尝试相同的 perl one-liner：

```
echo " 86%" | perl -nle 'print if s!\s|%!!g' 
```

它工作正常并输出`86`。

那么，为什么它不能与 acpi 命令一起使用。

PS：我知道这可以通过使用 sed/awk 来实现，但我很感兴趣为什么我的解决方案不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T11:57:41.990

您的单线无法按预期工作，因为

```
s!\s|%!! 
```

替换空格*或*百分号，而不是两者*。*

如果您希望它同时替换两者，请添加全局`/g`修饰符：

```
s!\s|%!!g 
```

就像你在另一个例子中巧合的那样。

您也可以考虑使用字符类而不是交流发电机：

```
s![\s%]!!g 
```

如果您的输出遵循您显示的格式，则最好使用简单的正则表达式：

```
echo Battery 0: Discharging, 87%, 05:54:56 remaining|perl -nlwe 'print /(\d+)%/'
87 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T11:57:15.390

这个按预期工作：

```
echo " 86%" | perl -F/,/ -alne 'print $F[1] if ($F[1]=~s!\s*(\d+)%!$1!)' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T11:57:56.213

你缺少`g`修饰符

```
acpi | perl -F/,/ -alne 'print $F[1] if ($F[1]=~s!\s|%!!g)'
                                                    ____^ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T11:58:14.453

你`s!...!...!`首先匹配空间，然后什么都不做。尝试添加`g`修饰符，如`... s!\s|%!!g`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-11T12:01:22.063

我试过了，效果很好。

```
echo "Battery 0: Discharging, 87%, 05:54:56 remaining" | perl -F, -alne '$F[1]=~s/\s|%//g;print $F[1]'
87 
```

问题在于`g`修饰符。

`g`实际上说要替换该行中的所有匹配项，但默认行为是仅替换第一个匹配项。因此，由于开头有空格，因此`$F[1]`只替换空格，而忽略该行中的其余字符。

# jquery - jQuery 移动和函数调用？

> ID：12369066
> 
> 赞同：0
> 
> 时间：2012-09-11T11:51:26.367
> 
> 标签：jquery, jquery-mobile

我有奇怪的问题，我无法弄清楚。我用 jQuery 和 Phonegap 制作了移动应用程序。在我的应用程序中，我正在调用一些网络服务来获取数据，当我这样做时需要几秒钟，所以我想向用户显示一个加载栏。我已经用 .gif 图片编写了自己的加载演示文稿，我在服务请求之前使用 javascript 添加到屏幕上。我的问题是，直到网络服务功能几乎一半或完全通过时，这个 .gif 才会添加到屏幕上。就像我会异步调用它一样，但据了解它都在一个线程上。那么我怎么能做到这一点呢？

（伪代码）

```
showLoading();
callWebService();
stopLoading(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:54:10.823

我遇到过与此类似的问题，已通过将后面的操作添加到间隔为 0 的 setTimeout 中来解决：

```
showLoading();
setTimeout(function(){
    callWebService();
    stopLoading();
}, 0); 
```

有关此技术的更多详细信息可以在[这个问题](https://stackoverflow.com/questions/779379/why-does-settimeoutfn-0-sometimes-help)中找到，但基本上超时允许浏览器在继续执行 JavaScript 代码之前完成任何 UI 更新（例如渲染加载图像）。

# spring - Spring, petclinic, 你要保存这个文件，还是在网上找一个程序打开它？

> ID：12369073
> 
> 赞同：0
> 
> 时间：2012-09-11T11:51:40.147
> 
> 标签：spring, spring-mvc

我下载了spring mvc petclinic，当我运行它时，点击了链接：

显示所有维蒂拉尼亚人

我有一个弹出对话框说：你想保存这个文件，还是在网上找一个程序打开它？

在控制器中，链接定义如下：

```
@RequestMapping("/vets")
public ModelMap vetsHandler() {
    Vets vets = new Vets();
    vets.getVetList().addAll(this.clinic.getVets());
    return new ModelMap(vets);
} 
```

我的问题是：为什么它不显示 vitiranians 而只是在对话框中提示我？任何想法或帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T16:51:34.853

可以在某些浏览器中自定义用于打开某种类型内容的应用程序（我只知道 Mozilla 和 Opera）：

Mozilla 火狐用户

1.  打开火狐浏览器
2.  单击工具，然后单击选项
3.  在选项窗口中单击应用程序
4.  选择您要调整的内容类型。例如，如果您想更改 .PDF 文件在 Firefox 中的打开方式，请选择 Adob​​e Acrobat Document。
5.  在“操作”部分中，将操作更改为您希望打开文件的方式。如果您想下载 .PDF 文件而不是打开它们，请选择保存文件。

歌剧用户

1.  开放歌剧
2.  单击工具，然后单击首选项
3.  在高级选项卡中单击下载
4.  找到并突出显示您要调整的文件扩展名。例如，pdf（或应用程序/pdf）。提示：您可以对这些列进行排序。
5.  突出显示后，单击编辑按钮。
6.  在文件类型窗口中，指定您希望如何处理文件。

# java - 如何将 Java 字符串传递给 JSP - 标题搜索结果

> ID：12369082
> 
> 赞同：0
> 
> 时间：2012-09-11T11:51:57.360
> 
> 标签：java, jsp

我有一个使用 Java 搜索本地 eXist DB 的 JSP 页面。我希望将 Java 字符串的值传递给`<div>`JSP 中的标记。

我想这样做，以便我的结果容器的标题反映用户搜索的内容。

例如“您的搜索`containerTitle`返回了 9 个匹配项”</p>

我的代码

```
<div class='concept-container result-container'>
<ul class="menu menu-style">
 <li>
    <a href="javascript:;">Concept Bar</a>
    <ul>
        <div id="title">Concept Title</div>
<%

    String containerTitle = userSearchQuery; 
```

我希望将概念栏或概念标题更改为 containerTitle。（存储用户搜索过的字符串。

任何帮助都非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:02:33.200

[在HTTPServletRequest](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)上使用 setAttribute 方法。然后，您可以`request.getAttribute`在嵌入在您的 JSP 页面上的 Java 代码中说，或者使用来读取在 JSP 表达式语言中`request.foo`调用的属性。`foo`

如果您只想打印 的值`containerTitle`，`out.print(containerTitle)`可以，但是带有嵌入式 Java 打印代码的 JSP 相当难看...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:07:18.850

首先，您应该避免使用 Java 内联代码 ( `<% ... &>`)。有时这是必要的，但这样的代码往往可读性较差，违反关注点分离且不安全。

为了解决您的问题，您的 servlet 应将所需的值放入请求中：

```
 request.setAttribute("containerTitle", "Your search for Foo Bar has returned 9 matches”); 
```

在您的 JSP 中，我建议使用 JSTL 来输出值：

```
 <%@ taglib uri="http://java.sun.com/jstl/core" prefix="c"%>
    <div>
            <c:out value="${containerTitle}"/>
    </div> 
```

您不仅限于将字符串传递给`setAttribute`. 您可以创建一个包含信息的简单对象并使用“点语言”来访问对象的属性：

```
 <div>
            <c:out value="${searchResult.title}"/>
    </div> 
```

我建议阅读有关 JSP 编程的好教程，以深入了解该主题。

# java - 将 jQuery 从 1.7 升级到 1.8.1 后，HtmlUnit 无法正确重定向

> ID：12369083
> 
> 赞同：0
> 
> 时间：2012-09-11T11:52:04.550
> 
> 标签：java, ajax, testing, selenium, htmlunit

我正在使用 HtmlUnit 2.10 单击一个链接，该链接触发一个重定向到另一个 URL 的 JavaScript。JavaScript 使用 window.location 进行重定向。结果和我直接用网址打开页面是不一样的。重定向页面结果看起来好像页面仍在加载，但实际上并非如此。

在查看发送的请求时，它看起来好像 HtmlUnit 请求页面，甚至从我试图重定向到的页面发送 ajax 请求，但没有显示它。我已经尝试将“page.asXml()” IO 写入 .html 文件以获取页面的预览，它几乎不包含任何内容，就好像它仍在加载新内容一样。但是，我也尝试等待最多 100 秒以加载页面

```
synchronized (page) {
   page.wait(int x);
} 
```

它对结果没有任何影响。

我无法为此错误提供可重现的脚本，因为该页面目前仅在本地运行。

有什么想法可能是错的吗？

**编辑：我可以补充一点，这个问题似乎是从 jQuery 1.7.0 升级到 jQuery 1.8.1 时出现的。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:02:03.683

确保您已将 WebClient 设置为将其`redirectEnabled`字段设置为`true`. 为此，只需在执行请求之前添加此行...

```
webClient.setRedirectEnabled(true); 
```

这将确保 HtmlUnit 客户端遵循重定向。

[这是该方法的文档](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/WebClient.html#setRedirectEnabled%28boolean%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:53:34.673

我仍然不清楚如何完全解决您的问题，但我有一个假设如何更深入地调查您的问题（即您是否已正确重定向）：在您的页面上本地化 1 -2 个元素希望使用 cssSelector 或 xpath 重定向。然后在重定向调用 fluentWait() 之后

```
 public WebElement fluentWait(final By locator){
            Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                    .withTimeout(30, TimeUnit.SECONDS)
                    .pollingEvery(5, TimeUnit.SECONDS)
                    .ignoring(NoSuchElementException.class);

            WebElement foo = wait.until(
    new Function<WebDriver, WebElement>() {
                public WebElement apply(WebDriver driver) {
                            return driver.findElement(locator);
                    }
                    }
    );
                               return  foo;              }     ; 
```

[您可以在此处](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html)阅读有关流利等待的信息

如果它在您被重定向到的页面上返回 web 元素。否则失败。希望这对您有所帮助。

# javascript - 将 jQuery 事件处理程序添加到具有通配符 ID 的元素

> ID：12369084
> 
> 赞同：0
> 
> 时间：2012-09-11T11:52:18.020
> 
> 标签：javascript, jquery

我目前在 document.ready 块中有以下内容：

```
 $("[id^=summaryDetailLink_]").each(function(index) {
        var splitID = this.id.split("_");
        this.click(alert('clicked: '+splitID[1])); //toggleDetail(splitID[1])
    }); 
```

最终，我想检测何时单击 ID 为“summaryDetail_”的 TD，并使用从 TD.ID 属性获取的 ID 触发 toggleDetail 函数。

以上似乎生成了正确的 ID（弹出警报），但在页面加载时触发，而不是在我单击元素时触发。

那么问题1 - 为什么它在页面加载时触发而不是创建一个处理程序来点击每个元素并等待该点击？

问题 2，在阅读此问题时，似乎在表上创建单个事件处理程序而不是 TD 然后确定单击了哪个 TD 元素会更明智。我将如何转换代码来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:55:01.067

我认为您误解了点击处理程序的工作原理：

```
$(function() {
    $("[id^=summaryDetailLink_]").click(function() {
        var splitID = $(this).id.split("_");
        alert('clicked: '+splitID[1])
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:59:28.600

回答第一个问题：

```
$(function() {
    $("[id^=summaryDetailLink_]").click(function() {
        var splitID = $(this).id.split("_");
        alert('clicked: '+splitID[1])
    });
} 
```

回答第二个问题，你可以这样做：

```
$('table#yourtable').on('click', '[id^=summaryDetailLink_]', function(e) {
    var splitID = $(this).id.split("_");
    alert('clicked: '+splitID[1])
}); 
```

# shared-libraries - 静态链接中的共享库，动态链接中的静态库

> ID：12369086
> 
> 赞同：1
> 
> 时间：2012-09-11T11:52:23.427
> 
> 标签：shared-libraries, static-libraries, static-linking, dynamic-linking

我正在编写一个包 MyPak，其中包含一个库 MyLib 和一个可执行的 MyExe。两者都依赖于第三方库 Foobar。根据系统的不同，Foobar 可以作为共享库或静态库使用。我也可以自由选择是否共享 MyLib 或静态。

如果我选择将 MyLib 编译为共享库，那么如果 Foobar 也可作为共享库使用，那将是有意义的。MyExe 的链接线将类似于以下内容

```
gcc -g myexe.c /path/to/mylib.so /path/to/foobar.so 
```

在这里链接静态 foobar 有什么含义，即

```
gcc -g myexe.c /path/to/mylib.so /path/to/foobar.a 
```

? 这是否被认为是不好的做法？它对性能有负面影响吗？

同样，如果 MyLib 是静态的，这样做会不会很痛

```
gcc -g myexe.c /path/to/mylib.a /path/to/foobar.so 
```

? 后果是否取决于系统？

# tsql - T-SQL WHERE NOT IN 不捕获 NULL 值

> ID：12369088
> 
> 赞同：2
> 
> 时间：2012-09-11T11:52:27.453
> 
> 标签：tsql, null, where

这是我的代码：

```
DECLARE @TABLE TABLE
(
    RecordID BIGINT,
    RecordValue NVARCHAR(10)
)

INSERT INTO @TABLE(RecordID,RecordValue)
VALUES  (1,'100')
       ,(2,NULL)
       ,(3,'200')
       ,(4,NULL)
       ,(5,'200')

SELECT RecordID,RecordValue
FROM @TABLE
WHERE RecordValue NOT IN ('200') 
```

输出：

1 100

期望输出：

1 100

2 空

4 空

我怎样才能得到'NULL'值呢？

实际上，我的 sql 语句是由很多程序和函数生成的，我在使用 ISNULL 函数之类的操作方面受到限制。最后的语句格式如下：

```
WHERE RecordValue NOT IN ('CSV...') 
WHERE RecordValue IN ('CSV...') 
or combinatnation from both 
RecordValue NOT IN ('CSV...') AND RecordValue IN ('CSV...') 
```

有没有办法以这种方式获取 NULL 值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:54:00.740

试试这个：

```
SELECT RecordID,RecordValue 
FROM @TABLE 
WHERE RecordValue NOT IN ('200') OR RecordValue IS NULL 
```

当价值`NULL`与它进行比较时，`NULL`你必须将其考虑在内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:53:51.670

像这样：

```
SELECT RecordID,RecordValue
FROM @TABLE
WHERE ISNULL(RecordValue,'') NOT IN ('200') 
```

# amazon-ec2 - EC2 Windows 实例初始化两次

> ID：12369090
> 
> 赞同：3
> 
> 时间：2012-09-11T11:52:40.140
> 
> 标签：amazon-ec2, amazon-web-services, launch, reboot

我正在使用 AWS 运行 Windows 2008 R2 SP1 数据中心版的微型实例，使用从`ami-cbc87da2`.

我遇到了一种奇怪的行为，似乎是在启动后立即重新启动这些实例。具体来说，我看到的是实例的状态（如 AWS 管理控制台中所示）从 开始`... initializing`，然后更改为，`2/2 checks passed`然后返回`... initializing`并最终更改为`2/2 checks passed`.

当实例第一次达到状态时，我能够建立到实例的 RDP 连接`2/2 checks passed`，但是一旦实例返回到`... initializing`. 只有在第二`2/2 checks passed`阶段才能建立永久连接。

最初我怀疑这个问题是由我的自定义 AMI 引起的，所以我使用原始的 Windows 2008 AMI 重复了实验。它仍然存在。

我还怀疑这个问题是由我的 C# 代码通过 AWS API 启动实例引起的，所以我尝试从 AWS 管理控制台手动启动实例。同样，症状仍然存在。

纯粹使用 AWS 工具启动的原始 Windows AMI 的实例会像这样失败似乎令人难以置信，所以我认为我在做一些愚蠢的事情，但我无法想象它是什么。

谢谢，提前提出您的建议。

蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:05:37.707

万一其他人遇到这个问题，这就是我发现的：

正如 AWS 支持团队向我解释的那样，这是 Windows 实例的预期行为，它们在启动后立即执行 Sysprep，因此必须重新启动才能使 Sysprep 设置生效。

我担心我的自定义启动脚本（作为用户数据传递到实例中）在初始启动期间正在执行，而在重新启动期间被忽略。事实上，AWS 支持团队确认用户数据在初始启动期间被忽略，仅在重新启动期间处理。更多细节[在这里](https://forums.aws.amazon.com/thread.jspa?messageID=380785&#380785)。

顺便说一句，感谢 AWS 支持团队。甚至他们的免费公共论坛支持服务也很有帮助、响应迅速且消息灵通。当您可以免费获得如此强大的支持时，为什么会有人为支持付费？:)

# javascript - 2 highcharts冲突

> ID：12369093
> 
> 赞同：0
> 
> 时间：2012-09-11T11:52:55.540
> 
> 标签：javascript, highcharts

我有一个使用 highcharts的[网站。](http://www.s-maof.com/Forum/blog.php?styleid=5)一处是底部索引栏。当您将鼠标悬停在它上面时，它会生成一个高图。

问题出在已经绘制高图表的页面上，而我异步绘制了另一个图表（当鼠标悬停在索引线上时），未绘制图表。例子：[这里](http://www.s-maof.com/Forum/positions_map.php?style=5)

我[已经阅读](https://github.com/highslide-software/highcharts.com/issues/275)了我必须禁用 yaxis 的地方，并且我做到了，它解决了我正在过期的 js 错误，但没有解决症状。

抱歉，我无法创建 jsfiddle，代码很长。

排除此错误的步骤。[1\. 在此处](http://www.s-maof.com/Forum/positions_map.php?style=5)打开站点 2\. 注意图表。3\. 将鼠标悬停在底线（红色和绿色）上以生成图表。4\. 注意图表消失。5.还要注意，这个问题不会出现在没有像[这样](http://www.s-maof.com/Forum/blog.php?styleid=5)的另一个高图的页面中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:04:10.100

页面正在使用的 iframe 中有另一个具有相同 id`graph`的 div，因此它试图渲染到该页面并且似乎失败了，您能否更新脚本以将[renderTo](http://api.highcharts.com/highstock#chart.renderTo)设置为精确指向您的`graph`div，`$("#graphContainer#graph")[0]`然后尝试？
[jsFiddle 通过 jQuery 进行对象引用](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/chart/renderto-jquery/)

# encoding - Google Maps API - 几何编码 - 类型错误：a.lat 不是函数

> ID：12369094
> 
> 赞同：10
> 
> 时间：2012-09-11T11:52:57.880
> 
> 标签：encoding, google-maps-api-3, typeerror, geopoints

我在一个数组中有一个 GeoPoints 列表，如下所示：

```
var coordinates = [[50.7, 6.7], [49.5, 7.0], ...] 
```

当我尝试按照[此处](https://developers.google.com/maps/documentation/javascript/reference#encoding)`encodePath`的说明使用缩小代码时，出现以下错误：

> TypeError：a.lat 不是函数

我的代码如下所示：

```
google.maps.geometry.encoding.encodePath(coordinates) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-11T11:52:57.880

最后我找到了解决方案！问题是它`encodePath`需要一个`google.maps.LatLng`对象，而不仅仅是`GeoPoints`.

这是一个函数，它将像上面描述的数组转换为编码字符串：

```
function encodeLatLngPolygon(array) {

var polyOptions = {
strokeColor: '#000000',
strokeOpacity: 1.0,
strokeWeight: 3
  }
  poly = new google.maps.Polyline(polyOptions);

var path = poly.getPath();

for(var i=0;i<array.length;i++) {
    var xyz = new google.maps.LatLng(parseFloat(array[i][0]).toFixed(2), parseFloat(array[i][1]).toFixed(2));
    path.push(xyz);            

}

var code = google.maps.geometry.encoding.encodePath(path)

return code;
} 
```

`toFixed`减少小数点后的数字以节省字节。您可以删除或调整此参数。

# eclipse - 使用 Eclipse Xtend 获取“java.lang.NoClassDefFoundError: org/eclipse/xtext/xbase/lib/Pair”

> ID：12369097
> 
> 赞同：0
> 
> 时间：2012-09-11T11:53:03.083
> 
> 标签：eclipse, google-app-engine, manifest, xtext, xtend

我不知道为什么我不断收到这样的错误，但我一直在努力解决这些问题。

基本上，我在执行项目时无法使用 Xtend 库。Eclipse 构建得很好，但是在运行时，如果我执行一个引用 Xtext 方法之一的类，我会得到一个 NoClassDefinedError。

例如，这编译得很好： var redirects = newHashMap( "/index.html" -> "/" );

但它没有执行，因为它引用了 Xtext 的 Pair。

我觉得它与构建自动化有关。也许是清单之类的，但我对 Eclipse/Java（和 Xtend）还很陌生，所以我很难看出问题出在哪里。

我将 java 项目作为 Google App Engine Web 应用程序项目启动，然后添加了 Xtend 功能。

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:04:49.803

您需要确保服务器有权访问您添加到 GAE 应用程序的任何第 3 方 JAR。我建议您将 JAR 文件添加到`war\WEB-INF\lib`目录中，然后尝试运行您的应用程序。

# c# - 数据绑定和事件句柄 - 传递参数

> ID：12369102
> 
> 赞同：0
> 
> 时间：2012-09-11T11:53:15.803
> 
> 标签：c#, wpf, data-binding

我有一个 Windows WPF 应用程序，它将“Person”类型的对象的 Observablecollection 绑定到列表框。Person 通过模板显示，该模板为每个人生成一个“扩展器”（即“查看有关 Mr.X 的更多详细信息”）。在扩展时，我想在后台做一些事情（所以我添加了一个事件处理程序'Expander_Expanded'，但我还需要程序记住哪些扩展器被扩展，即我想将这个人的'名字'传递到事件。虽然我发现了一些类似的问题，但我不太明白答案......

此外，也许了解语言架构的人可以解释为什么该语言不允许以下最合乎逻辑的解决方案：向 person 类添加属性

```
public ExpanderName {get{return "Expander_"+this.Name;}} 
```

然后将扩展器的名称绑定到此，

```
<Expander Name="{Binding ExpanderName}" Expanded="Expander_PersonDetails"> 
```

然后可以通过从“sender.name”中恢复来访问在事件处理程序中扩展的人的姓名。编译器说不能绑定 UIcontrol 元素的“名称”。为什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:32:31.147

Name 不是可绑定的属性，它需要在编译时知道，以便编译器可以生成要在代码隐藏中访问的正确对象。

你可以使用的是通用的 Tag 属性——你可以绑定任何你想要的东西，然后你可以在代码中访问它。尝试这个：

```
<Expander Tag="{Binding ExpanderName}" Expanded="Expander_PersonDetails">

void Expander_PersonDetail(object sender, RoutedEventArgs args)
{
  var expander = (Expander)sender;
  string expanderName = (string)expander.Tag;
} 
```

更好的解决方案是将 Expander.IsExpanded 属性绑定（双向）到 Person 类中的一个字段 - 这样您将始终将正确的状态存储在正确的对象中，并且处理将更加简单。

# ios - 从 url 显示图像，哪个更快，uimageview vs uiwebview

> ID：12369111
> 
> 赞同：1
> 
> 时间：2012-09-11T11:53:58.277
> 
> 标签：ios, uiwebview, uiimageview

在我的应用程序中，我将有一个表，其中一个将由存储在我的服务器中的图像组成。因此，对于每个图像，它的 url 都是可用的。

例如，如果这些图像超过 25 个，并且每个图像的大小约为 10KB，那么哪个更快？

```
If I place in my cell a webview and view the url 
```

或者

```
If I place in my cell a uiimageview and fetch image from url and set is source? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:06:50.863

嗨试试这个[http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Listings/Classes_LazyTableAppDelegate_m.html](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Listings/Classes_LazyTableAppDelegate_m.html)

这将解决您的问题，它由苹果提供，这是您应该如何做的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:22:03.600

早些时候我遇到了同样的问题，然后我找到了开源的 EgoImageLoading 类，你可以在这里[https://github.com/enormego/EGOImageLoading](https://github.com/enormego/EGOImageLoading)获得这些类。

语法与 UIImageView 相同。

```
 EGOImageView *imageView = [[EGOImageView alloc]initWithFrame:CGRectMake(15, 9, 100, 95)];
        imageView.contentMode = UIViewContentModeScaleAspectFit;
        imageView.imageUrl = yourUrl;
        imageView.placeholderImage = [UIImage imageNamed:@"LoadingImg.gif"];
        [view addSubview:imageView]; 
```

这个类提供给我们，显示占位符图像直到加载实际图像，一旦加载，它将将该图像存储在缓存中，下一次它将从缓存中读取。

我认为它对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:10:18.460

你说你正在使用 UITableView。正确的 ？然后你可以将图像的延迟加载应用到 UITableViewCells。这意味着它会加载首先可见的单元格的图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-07T10:23:17.983

*   **UIImageView-**将图像作为 URL 加载时需要时间。
*   **UIWebView** - 当加载图像作为 URL 时，它在更新配置文件时看起来很快。

> 我们可以修复更新图像后加载具有相同 URL 名称的图像视图时的图像缓存问题。

EX：在上传 imageview URL 为**someURL\path\user_7.png**之前上传 相同 URL 的图像 API 响应之后。那时我们将使用它。

# c# - blueimp jQuery 文件上传发送参数 ASP.Net

> ID：12369115
> 
> 赞同：0
> 
> 时间：2012-09-11T11:54:01.443
> 
> 标签：c#, jquery, .net, file-upload, blueimp

我正在为我的 .Net 项目使用“https://github.com/ieb/jQueryFileUpload.Net”.Net .ashx 版本的 jQuery File Uploader 处理程序。它来自 iframe。

我想为每个文件上传事件发送两个参数：“recordId”和“FieldName”。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:16:36.320

这是我的解决方案；

首先，当 iframe 打开时，它会搜索列出现有文件。

```
loadFiles = function (id, field) {
            // Show uploaded files
            $.getJSON($('#fileupload form').prop('action'), { Id: id, Field: field }, function (files) {
                var fu = $('#fileupload').data('fileupload');
                fu._adjustMaxNumberOfFiles(-files.length);

                fu._renderDownload(files)
                .appendTo($('#fileupload .files'))
                .fadeIn(function () {
                    // Fix for IE7 and lower:
                    $(this).show();
                });
            });
        } 
```

正如您在上面看到的，我在我的解决方案中为每条记录添加了 ID 和字段名称，因此它将检查记录自己的文件夹。在代码隐藏中，我添加了这个来创建会话参数：

```
protected void Page_Load(object sender, EventArgs e)
    {
        Session.Add("fuFilePath", "\\");
    } 
```

最后，在处理程序中有一个控制机制，可以获取记录字段的所有其他调用的路径信息。

```
 public string FILEPATH = "";

    public string StorageRoot(HttpContext context)
    {
        if (context.Session["fuFilePath"] != null)
            FILEPATH = context.Session["fuFilePath"].ToString();
        else
            FILEPATH = ConfigurationManager.AppSettings["StorageRoot"];

        Directory.CreateDirectory(FILEPATH);
        return FILEPATH; 
    }

    public bool IsReusable { get { return false; } }

    public void ProcessRequest (HttpContext context) {
        context.Response.AddHeader("Pragma", "no-cache");
        context.Response.AddHeader("Cache-Control", "private, no-cache");

        if (context.Request.Params["Id"] != null && context.Request.Params["Field"] != null) {
            context.Session["fuFilePath"] = ConfigurationManager.AppSettings["StorageRoot"] + context.Request.Params["Id"] + "\\" + context.Request.Params["Field"] + "\\"; ;
        }

        HandleMethod(context);
    } 
```

对于所有其他调用，它首先查看会话参数并获取记录的文件路径。如果用户为另一个字段或另一个记录打开 fileupload 的 iframe，首先它将列出现有文件，因此会话参数将被正确的替换，直到发生新的列出活动。

这对我来说是最简单的方法。

# objective-c - 如果 cell==nil 是否可以安全删除 uitableview？

> ID：12369118
> 
> 赞同：1
> 
> 时间：2012-09-11T11:54:15.930
> 
> 标签：objective-c, ios, uitableview

我正在编写一个图像编辑工具。我有一个`UITableview`显示文档文件夹的内容。这一切都按预期工作。我遇到的问题是在添加新文件或从文件夹中删除文件时。

在调用重新加载数据之前创建或删除我调用的文件时`refreshFiles`，使用检查`if(cell == nil)` 会根据我的文件数组的增加/减少长度创建/删除一个单元格。

最后一个`UITableViewCell`然后将数组最后一个位置的文件名作为该字段的名称。但是，新文件名可以位于数组中的任何位置。为了确保显示正确的内容，我删除了`if(cell==nil)`检查，然后每次调用它时都会重绘所有单元格。

```
-(void)refreshFiles {

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *pathList = [paths objectAtIndex:0];
NSArray *fileListing = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:pathList error:nil];
NSPredicate *filter = [NSPredicate predicateWithFormat:@"self ENDSWITH '.png'"];
self.fileList = [fileListing filteredArrayUsingPredicate:filter];
[self.fileview reloadData]

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";

UITableViewCel *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

  // if (cell == nil) { 
    cell = [[[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault    reuseIdentifier:CellIdentifier]autorelease];

objectAtIndex:indexPath.row],self.fileList.count,indexPath.row);
    cell.textLabel.text = [self.fileList objectAtIndex:indexPath.row];

  //   }

return cell;
} 
```

然而，这是一种有效的工作方式吗？会导致我的性能问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:01:22.560

所以现在你总是在创建一个新`UITableViewCell`的而不是重用可能排队的 UITableViewCell。

检查`cell == nil`是为了查看是否已经有一个单元格可以重复使用。如果不是这样`nil`，您将不得不重新创建它。

所以就像我现在说的，你没有使用 Apple 为`UITableView`. 它是为了表演而存在的，所以如果我是你，我仍然会有那张支票。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:58:17.793

原始代码中有一个简单的错误：仅在分配新单元格时才设置单元格文本，而不是在重用单元格时设置单元格文本。正确的顺序是：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) { 
    cell = [[[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}
cell.textLabel.text = [self.fileList objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:32:39.760

那是绝对安全的，您可以省略`dequeueReusableCellWithIdentifier`调用并在不重用标识符的情况下创建单元格。

当然，这意味着您不会重用单元格，但我发现如果单元格不大量使用内存但占用大量 UI 表示逻辑，这是一种有用的方法。在这种情况下，我可以负责单元缓存并手动执行，这会与重用标识符逻辑冲突。

对于这种情况，我的方法是创建抽象的 Section 类，至少存储标题 id、名称、节标题视图和 Row 对象数组，至少存储单元格视图和相关的单元格信息。

作为奖励，您有超级简单的部分管理，例如，您可以实现平滑的部分动画，如折叠和展开。

然而，对于最简单的表，我总是遵循重用标识符方法，因为它实现起来要快得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T12:39:10.530

正如彼得的回答所暗示的那样，我认为您可能会对`cell==nil`逻辑的目的感到困惑。你想把它留在那里。如果您已经从您的 中删除了项目`self.fileList`，假设您`tableView:numberOfRowsInSection:`刚刚返回`[self.fileList count]`，那么这就是您需要做的所有事情，并且一旦您这样做了`reloadData`。iOS 将负责删除任何旧的、现已删除的行。但是通过取出`cell==nil`，你不会让 iOS 重用旧的单元格，因此你会浪费内存。除非您有充分的理由摆脱这种`cell==nil`逻辑，否则您不应该这样做。

但是，您的代码片段有一个奇怪的语句片段：

```
 objectAtIndex:indexPath.row],self.fileList.count,indexPath.row); 
```

我不知道那行应该是什么，所以你可能想澄清你的代码示例。

最重要的是，您的解决方案效率低下，并且可能掩盖了您的代码的其他一些问题。例如，为了简化您的帖子，我想知道您是否删除了`cellAtRowForIndexPath`. 值得注意的是，您是否`UILabel`在现实中创建任何控件或类似的东西`cellAtRowForIndexPath`？也许您可以与我们分享完整的方法。当我在 a 之后看到不良结果时`reloadData`，通常是因为用户在其 中创建了一些控件`cellAtRowForIndexPath`，但在重用出列单元格时未能考虑到这一事实。典型的解决方案是，如果您将子视图添加到 a `UITableViewCell`，则为它们分配`tag`属性，并且如果您正在重用出列单元格，则使用`viewWithTag`. 见使用`tag`[在Table View Programming Guide](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW18)中讨论自定义单元格的属性。

也许这不是问题，但无论如何，当您注释掉`cell == nil`条件逻辑时您的代码行为不同这一事实意味着您的方法细节存在问题`cellForRowAtIndexPath`。也许您可以与我们分享完整的方法，因为简化的示例没有任何明显错误（除了那段零碎的代码行）。

# ruby-on-rails - 按多列分组结果

> ID：12369119
> 
> 赞同：0
> 
> 时间：2012-09-11T11:54:16.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试在我的 Rails 应用程序中实现类似 facebook 的消息传递系统。

我的**消息**模型如下所示：

```
sender_id:references
receiver_id:references
body:text
is_read:bolean 
```

现在我需要显示当前登录用户和其他用户之间的所有消息，所以我使用这个代码：

```
Message.where("sender_id = '#{current_user.id}' OR receiver_id = '#{current_user.id}'") 
```

但是，此查询将威胁`send`消息和`received`消息分开。我需要以某种方式按`receiver_id`和`sender_id`列对它们进行分组以显示用户列表，当前登录的用户曾与这些用户交换过消息（就像在 facebook 上一样），但我不太确定应该如何正确完成。

任何帮助，将不胜感激。如果您认为应该以不同的方式完成，请随时告诉我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:47:38.620

好的，第一件事。如果可以避免（几乎总是可以） ，切勿`#{}`在调用中直接插入（使用）。`.where()`在这种特殊情况下，它可能不会造成任何巨大的伤害，但如果你养成这样做的习惯，你最终会让自己面临 SQL 注入攻击。使用 Rails 提供的一种插值和清理技术。这是一个：

```
messages = Message.where("sender_id = :user_id OR receiver_id = :user_id", :user_id => current_user.id) 
```

现在，至于问题本身。假设您没有尝试对这些结果或任何类似的内容进行分页，那么无论如何您都会将所有 Message 对象加载到内存中，因此通过将它们分组到 Ruby 而不是 SQL 中不会丢失任何内容：

```
 grouped_messages = messages.group_by do |m|
    if m.sender_id == current_user.id
      m.receiver_id
    else
      m.sender_id
    end
 end 
```

本质上，这会根据不是当前用户的发送者或接收者的 id 对消息进行分组。`grouped_messages`将是一个 Hash，其键是其他用户的 id，值是 Message 对象的数组。

# jquery - jQuery多个按钮单击具有相同类的事件仅适用于第一个按钮

> ID：12369122
> 
> 赞同：1
> 
> 时间：2012-09-11T11:54:18.587
> 
> 标签：jquery, forms, dynamic

我有多个以“item-submit”作为类名的按钮。我想在单击按钮时动态附加内容，如下面的代码所示。问题是，单击事件仅在第一个按钮上被调用。单击另一个按钮不会添加任何内容，更糟糕的是，会重新加载整个页面。正如您在代码中看到的，变量表被附加到动态创建的订单表中。这也是我想要附加内容的项目提交按钮所在的位置。

```
jQuery(".item-submit").each(function(){
        jQuery(this).click(function(){
            alert("aw");
            var id = jQuery(this).attr("id");
            var size = jQuery("#items"+id).val();
            alert("ID: "+ id);
            var table = "<table><tbody><tr><td colspan='2'><label style='color: #800000;font-weight:bold'>Detailed Description & Price of Item<br /></label></td></tr>";
            for(i=0; i<size; i++) {
                table = table + "<tr><td><input placeholder='Enter item names...' name='items"+i+"' class='items' type='text' /></td><td><input placeholder='Enter cost of items...' name='cost"+i+"' class='cost' type='text' /></td></tr>";
            }
            table = table + "<tr><td><label style='color: #800000; font-weight: bold;'>Total Cost</label></td><td><input placeholder='Total Cost' name='totalcost' class='totalcost' type='text' /></td></tr></tbody></table>";
            jQuery("#order-table"+id).append(table);
            jQuery("#items"+id).attr("readonly","readonly");
            jQuery("#"+id).attr("disabled","disabled");
            return false;
        });
    }); 
```

我也试过 jQuery("").click() 仍然没有。

如果有人可以帮助我，我将不胜感激。如果有不清楚的地方，请随时发表评论。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T01:28:23.657

我已经弄清楚了。问题是按钮是动态创建的。我真的不知道发生了什么，但我认为这是因为没有为附加的新内容加载脚本。我所做的是在附加的每个内容中添加点击功能。似乎工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:58:09.383

```
 jQuery(".item-submit").click(function(){
        alert("aw");
        var id = jQuery(this).attr("id");
        var size = jQuery("#items"+id).val();
        alert("ID: "+ id);
        var table = "<table><tbody><tr><td colspan='2'><label style='color: #800000;font-weight:bold'>Detailed Description & Price of Item<br /></label></td></tr>";
        for(i=0; i<size; i++) {
            table = table + "<tr><td><input placeholder='Enter item names...' name='items"+i+"' class='items' type='text' /></td><td><input placeholder='Enter cost of items...' name='cost"+i+"' class='cost' type='text' /></td></tr>";
        }
        table = table + "<tr><td><label style='color: #800000; font-weight: bold;'>Total Cost</label></td><td><input placeholder='Total Cost' name='totalcost' class='totalcost' type='text' /></td></tr></tbody></table>";
        jQuery("#order-table"+id).append(table);
        jQuery("#items"+id).attr("readonly","readonly");
        jQuery("#"+id).attr("disabled","disabled");
        return false;
    }); 
```

在这种情况下，您不需要每个循环，只需为整个班级提供点击事件，“this”将是您点击的那个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:58:30.770

您不需要遍历 jQuery 选择器，这也是导致错误的原因。您的代码可能应该更像这样：

```
 jQuery(".item-submit").click(function(){
        alert("aw");
        var id = jQuery(this).attr("id");
        var size = jQuery("#items"+id).val();
        alert("ID: "+ id);
        var table = "<table><tbody><tr><td colspan='2'><label style='color: #800000;font-weight:bold'>Detailed Description & Price of Item<br /></label></td></tr>";
        for(i=0; i<size; i++) {
            table = table + "<tr><td><input placeholder='Enter item names...' name='items"+i+"' class='items' type='text' /></td><td><input placeholder='Enter cost of items...' name='cost"+i+"' class='cost' type='text' /></td></tr>";
        }
        table = table + "<tr><td><label style='color: #800000; font-weight: bold;'>Total Cost</label></td><td><input placeholder='Total Cost' name='totalcost' class='totalcost' type='text' /></td></tr></tbody></table>";
        jQuery("#order-table"+id).append(table);
        jQuery("#items"+id).attr("readonly","readonly");
        jQuery("#"+id).attr("disabled","disabled");
        return false;
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T11:58:42.517

```
$(".item-submit").click(function() {

}); 
```

是使用正确的语法 - 你不需要自己迭代..

您是否在 javascript 控制台中看到任何错误？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T12:26:43.677

您可以使用**jQuery('.item-submit').click** ...

我的猜测是有一个错误，这就是页面重新加载的原因，因为错误后的所有脚本都被忽略，包括**return false**语句，并且因为页面重新加载您看不到 Firebug （*控制台*）中的错误。

为了查看发生了什么，请在第一行使用**preventDefault**。

```
jQuery(".item-submit").click(function(event){
    event.preventDefault();
    // ... your code here
}); 
```

即使您的代码中有错误，页面也不会重新加载，您可以捕获并修复它。祝你好运。

# c# - 如何在 C# 中执行包？

> ID：12369125
> 
> 赞同：0
> 
> 时间：2012-09-11T11:54:19.043
> 
> 标签：c#, oracle, c#-4.0

我使用 oracle 作为我的后端，并且我有一个包含 5 个程序的包，我如何在 c# 中执行该包，任何有示例的主体都请解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:01:27.803

您可以使用用户前缀并打包您的存储过程

```
 var command = new OracleCommand(connection);
  command.CommandText = "NameOfUser.NameOfPackage.NameOfStoredProcedure"; 
```

# objective-c - 如何获取有关 iPad 蜂窝连接的详细数据

> ID：12369126
> 
> 赞同：0
> 
> 时间：2012-09-11T11:54:23.393
> 
> 标签：objective-c, ipad, cellular-network

在 ipad 上，有没有办法获取有关蜂窝连接的详细数据？

例如

*   我是否在 HSPA+ 中连接？
*   我使用的是哪个 3G 频率？

你知道所有这些只有书呆子才会想知道的事情。

到目前为止，我只能处理私有 API`SoftwareUpdateServices.framework`

```
NSLog(@"TYPE: %d", [[[NetworkMonitor alloc] init] currentNetworkType]); 
```

将返回

```
0: NO DATA
1: WIFI
2: GPRS/EDGE
3: 3G 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:37:31.033

我认为这个链接会有所帮助：

[可达性](https://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

Reachability 示例应用程序演示了如何使用 SystemConfiguration 框架来监视 iPhone 或 iPod touch 的网络状态。特别是，它演示了如何知道何时可以路由 IP，以及何时通过无线广域网 (WWAN) 接口（如 EDGE 或 3G）路由流量。

# python - Python：解析txt文件的目录，将包含字符串的行保存到新目录，ValueError：对已关闭文件的I/O操作

> ID：12369127
> 
> 赞同：-3
> 
> 时间：2012-09-11T11:54:23.753
> 
> 标签：python

```
import os
import sys

a = os.listdir("C:\\Python27\\forms2")

i = 0

big_file = open("c:\\Python27\\forms2\\%s" %a[i], 'r')
small_file3 = open("c:\\Python27\\forms3\\%s" %a[i], 'w')
linez = big_file.read()
for line in linez:
   if 'TextControl' in linez:
      small_file3.write(line)

   if 'http://' in linez:
      small_file3.write(line)
   i = i + 1
   big_file.close()
   small_file3.close() 
```

输出是

```
Traceback (most recent call last):
  File "C:\Python27\testreadwrite", line 13, in <module>
    small_file3.write(line)
ValueError: I/O operation on closed file 
```

“testreadwrite”是脚本的名称。为什么它在应该注入“a”列表变量的地方注入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:56:46.043

`for`您将在循环结束时关闭文件

```
for line in linez:
   ...
   big_file.close()
   small_file3.close() 
```

你应该在循环*后*关闭文件`for`

```
for line in linez:
   ...
big_file.close()
small_file3.close() 
```

* * *

您可以使用[上下文管理器](http://www.python.org/dev/peps/pep-0343/)来避免将来出现此类问题：

```
with open("c:\\Python27\\forms2\\%s" %a[i], 'r') as big_file, \
     open("c:\\Python27\\forms3\\%s" %a[i], 'w') as small_file3:
    linez = big_file.read()
    for line in linez:
       ... 
```

所以你不必给`close`自己打电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:01:34.843

错误信息：

```
 I/O operation on closed file 
```

告诉您问题，您正试图对关闭的文件执行 IO 操作，在这种情况下写入已关闭的文件。

问题是您正在循环内关闭输出文件 ( *)*`"small_file3"`，您可能希望在循环之后关闭它，如前所述。

 *`"big_file"`您可以在 -loop 之前关闭您的输入 ( ) 文件，`for`因为您已完成读取，并在`for`-loop 之后关闭您的输出文件。

还可以考虑使用[`os.path.join()`](http://docs.python.org/library/os.path.html?highlight=os.path.join#os.path.join)来构建打开文件的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:56:56.153

您在循环内的文件描述符上调用 close() ，这是零意义的。您可能希望在循环之外/之后关闭文件描述符。*

# postscript - PostScript 中的复制命令

> ID：12369128
> 
> 赞同：0
> 
> 时间：2012-09-11T11:54:25.050
> 
> 标签：postscript

我正在以下链接阅读 RobertSedwick 的算法

[http://books.google.co.in/books?id=pQRLfMngZ7sC&pg=PA213&lpg=PA213&dq=towers+of+hanoi+relation+with+trailing+zeros&source=bl&ots=gfM2UdBkNq&sig=avk5lNz7XeNODghvOlvHKSGMc8g&hl=en#v=onepage&q=towers% 20of%20hanoi%20relation%20with%20trailing%20zeros&f=false](http://books.google.co.in/books?id=pQRLfMngZ7sC&pg=PA213&lpg=PA213&dq=towers+of+hanoi+relation+with+trailing+zeros&source=bl&ots=gfM2UdBkNq&sig=avk5lNz7XeNODghvOlvHKSGMc8g&hl=en#v=onepage&q=towers%20of%20hanoi%20relation%20with%20trailing%20zeros&f=false)

页码：218 图 5.13

PostScript 中的以下语句是什么意思。

```
 2 copy ge {dup 0 rlineto}
 {
    ...
 } ifelse 
```

还有以下是什么意思

```
 2 copy KochR 
```

我第一次在这里研究 PostScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:54:36.437

*（这个答案基于 luser droog 的答案，我对给​​出的代码有不同的理解。）*

要更直接地回答您的问题，很难解释代码的作用，因为它不完整。

两个片段的开头都是`2 copy`将顶部两个东西的副本推送到堆栈上。这些是什么东西？？？？*（在此复制之后，`2`不再在堆栈上。）*

嗯，他们可能是数字。在第一个示例中，它们几乎肯定是一个坐标对：x 和 y：

*   **如果**y~~大于~~或**等于** ~~2~~ **x** ，则从当前位置到**(y,0)**画一条线~~到 (current-x + y-from-stack,~~ 0) 。为什么要这样做？？？？

***   **否则**执行省略号表示的代码`{ ... }`** 

 **在第二个示例中，`KochR`很可能是绘制科赫曲线的递归过程，其中一个参数几乎可以肯定是递归级别，另一个可能是单个线段的长度（除非它非常复杂并提供全局-缩放控制）。

这就是从代码中可以猜到的所有内容，如图所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T05:21:14.637

*请[在此处](https://stackoverflow.com/a/12387611/733077)查看 Kurt Pfeifle 的答案，以获取此草率答案的更正版本。希望我在[后续问题中有所救赎](https://stackoverflow.com/questions/12381887/recurssion-in-postscript)*

* * *

要更直接地回答您的问题，很难解释代码的作用，因为它不完整。

两个片段的开头都是`2 copy`将顶部两个东西的副本推送到堆栈上。这些是什么东西？？？？

嗯，他们可能是数字。在第一个示例中，它们几乎肯定是一个坐标对：x 和 y。如果 y 大于 2，则画一条线到 (current-x + y-from-stack, 0)。为什么要这样做？？？？

在第二个示例中，`KochR`很可能是绘制科赫曲线的递归过程，其中一个参数几乎可以肯定是递归级别，另一个可能是单个线段的长度（除非它非常复杂并提供全局-缩放控制）。

这就是从代码中可以猜到的所有内容，如图所示。HTH。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T12:28:56.063

您应该首先参考以下四本书/资源：

1.  “[**蓝皮书”**](http://www-cdf.fnal.gov/offline/PostScript/BLUEBOOK.PDF)（PDF 0.9 MByte）。
    *PostScript 语言教程和食谱，Adobe 系统，Addison-Wesley 1985；国际标准书号 0201101793。*

    这是对 PostScript 语言的最佳介绍。PostScript 运算符以一种简单而有节奏的方式引入。示例程序易于阅读，并且可以打印出精美的图片。这本书只描述了 1 级 PostScript 的一小部分。仅靠它本身是不够的专业工作。

2.  “[**绿皮书”**](http://www-cdf.fnal.gov/offline/PostScript/GREENBK.PDF)（PDF 0.9 MByte）。
    *PostScript 语言程序设计，Adobe Systems，Addison-Wesley，1988；国际标准书号 0201143968。*

    这本书展示了如何在现实世界中使用 PostScript。尽管本书基于 1 级 PostScript，但良好的编程实践并没有像语言本身那样发生太大变化。

3.  “[**红皮书”**](http://partners.adobe.com/public/developer/en/ps/PLRM.pdf)（PDF 7.6 MByte）。
    *PostScript 语言参考手册，Adobe Systems Addison-Wesley，1999；ISBN 0201379228) 912 页。*

    这是 PostScript 语言的官方描述。书中的一切都很重要；一切只解释一次。喜欢在床上阅读的人也可以使用纸质版的红皮书。无需在 Adob​​e 的合作伙伴计划中注册的旧版本（日期为 1999 年）可[在此处](http://www.adobe.com/products/postscript/pdfs/PLRM.pdf)获得。

4.  [**PostScript 中的思考**](http://wwwcdf.pd.infn.it/localdoc/tips.pdf)(PDF 0.8 MByte)。
    *格伦·C·里德，艾迪生-卫斯理，1990；国际标准书号 0201523728。*

    这本书很好地介绍了 PostScript。这本书是免费提供的。为什么不试试呢？

* * *

（以上信息主要取自[PostScript FAQ](http://en.wikibooks.org/wiki/PostScript_FAQ)。我拥有并使用过以上所有书籍，并且完全同意给定的评估。）**

# jquery - jQuery多个覆盖的div

> ID：12369129
> 
> 赞同：0
> 
> 时间：2012-09-11T11:54:36.763
> 
> 标签：jquery, html, overlay

我有以下 jQuery 代码：

```
$(document).ready(function() {
    $('#showContent').click(function(e) {
        e.preventDefault();
        $("body").append("<div id='lyricsOverlay'></div>");
        $("#lyricsOverlay").height($(document).height()); 
        $('#lyrics').show();
        $('#lyricsOverlay').click(function() { 
            $('#lyrics').hide();
            $('#lyricsOverlay').remove();
        });
    });
}) 
```

其中显示了一个覆盖的 div，页面的其余部分模糊了。

完美搭配：

```
<a href="#" id="showContent">Lyrics...</a> 
```

我的**问题**：

在页面内部，我有许多链接，我希望它们的行为与第一个链接一样。那么，我怎样才能实现类似的东西：

```
<a href="#" id="showContent0">Lyrics...</a>
<a href="#" id="showContent1">Lyrics...</a>
... 
```

并让他们中的两个或更多工作？

就像是：

```
**i = GET i from the link?** 
$('#showContent.**i**').click(function(e) { 
```

这部分工作，允许打开，但防止覆盖再次关闭......

```
$((this)).click(function(e) { 
```

显然上面的sintax是不正确的，我不知道该怎么做......

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:59:20.097

你这样做：

```
$('[id^=showContent]') 
```

这将选择 id 以 showContent 开头的所有元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:58:03.220

下载这个库我已经开发了类似的东西并使它易于使用，只需调用`jloading()`和`jHide()`方法 [https://github.com/gemy21ce/ajax-submit.git](https://github.com/gemy21ce/ajax-submit.git)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:07:07.373

you can also use Qtip2 which is very highly customizable. you can find it here [http://craigsworks.com/projects/qtip2/demos/#tips](http://craigsworks.com/projects/qtip2/demos/#tips) it is same as there are too many overlays on the same windows and also you can make them as per your requirement. Qtip2's documentation is here [http://craigsworks.com/projects/qtip2/docs/](http://craigsworks.com/projects/qtip2/docs/)

hope this will help.

# swig - swig 和 python3：多余的下划线

> ID：12369131
> 
> 赞同：4
> 
> 时间：2012-09-11T11:54:52.923
> 
> 标签：swig, python-3.2

使用 swig 2.0.8 和 python 3.2，运行

```
swig -python -modern -py3 -o mymodule_wrap.c mymodule.i 
```

生成一个包装文件

```
#  define SWIG_init    PyInit__mymodule 
```

在那里（注意 PyInit 和 mymodule 之间的两个下划线）。

导入失败

```
python3 -c "import mymodule"
Traceback (most recent call last):
   File "<string>", line 1, in <module>
ImportError: dynamic module does not define init function (PyInit_mymodule) 
```

（注意单下划线）。

`mymodule_wrap.c`在工作模块中手动删除下划线并重新编译结果。

在这个问题中：[SWIG 和 Python3 导入错误](https://stackoverflow.com/questions/6845869/swig-and-python3-import-error)，python 解释器抱怨找不到`PyInit__module`.

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T23:39:29.213

确保扩展模块名为`_mymodule.pyd`not `mymodule.pyd`。

### 解释：

给定一个包含声明的 SWIG`.i`文件：

```
%module mymodule 
```

SWIG 将生成两个文件：

*   我的模块.py
*   mymodule_wrap.c

`mymodule.py``import mymodule`通过和加载导入 Python `_mymodule.pyd`。

`mymodule_wrap.c`包含一个入口点函数`PyInit__mymodule`。此源文件必须链接到最终的`_mymodule.pyd`.

Python 的`import <module>`语句寻找：

1.  `<module>.pyd`与入口点`PyInit_<module>`。
2.  `<module>.py`.

对于 SWIG 生成的扩展，`import mymodule`将加载`mymodule.py`，它会`_mymodule.pyd`正确加载并查找`PyInit__mymodule`.

如果使用了错误的扩展名，`import mymodule`将加载`mymodule.pyd`并错误地查找`PyInit_mymodule`.

# java - 提交有效表单后在 Liferay 中重定向？

> ID：12369133
> 
> 赞同：0
> 
> 时间：2012-09-11T11:55:00.173
> 
> 标签：java, spring, liferay

如何在 Spring 控制器中使用 liferay 执行此操作？

```
 if (bindingresult.hasErrors()) {
        return "myJspName";
    }
    return "redirect:/somePage"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:32:56.117

Assuming your code is in portlet action phase, you can redirect using the actionresponse object, for example:

```
actionResponse.sendRedirect("/somepage") 
```

# android - 禁用 Android 图像自动旋转

> ID：12369138
> 
> 赞同：1
> 
> 时间：2012-09-11T11:55:12.660
> 
> 标签：android, image

当我从图库中选择图像并在 ImageView 中显示图像时，一些图像会自动旋转 90 度。

如何禁用此功能？

**代码：**

```
@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.main);

    m_galleryIntent = new Intent();
    m_galleryIntent.setType("image/*");
    m_galleryIntent.setAction(Intent.ACTION_GET_CONTENT);

    m_ProfileImageView = (ImageView) findViewById(R.id.imageView1);

    m_ProfileImageView.setOnClickListener(new OnClickListener() 
    {
        @Override
        public void onClick(View v) 
        {
            startActivityForResult(Intent.createChooser(m_galleryIntent, "Select Picture"),1);                          
        }

    });
}

public Bitmap readBitmap(Uri selectedImage) 
{ 
    Bitmap bm = null; 
    BitmapFactory.Options options = new BitmapFactory.Options(); 
    options.inSampleSize = 5; 
    AssetFileDescriptor fileDescriptor =null; 
    try 
    { 
        fileDescriptor = this.getContentResolver().openAssetFileDescriptor(selectedImage,"r"); 
    } 
    catch (FileNotFoundException e) 
    { 
        e.printStackTrace(); 
    } 
    finally
    { 
        try 
        { 
            bm = BitmapFactory.decodeFileDescriptor(fileDescriptor.getFileDescriptor(), null, options); 
            fileDescriptor.close(); 
        } 
        catch (IOException e) 
        { 
            e.printStackTrace(); 
        } 
    } 
    return bm; 
} 

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    if (resultCode == RESULT_OK) 
    {
        if (requestCode == 1) 
        {

            try 
            {
                Uri imageURI = data.getData();
                bitmapFromFile = readBitmap(imageURI);          
                m_ProfileImageView.setImageBitmap(bitmapFromFile);

            } 
            catch (Exception e) 
            {                           
                e.printStackTrace();
            } 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T12:15:48.470

您应该自己旋转这些图像。从内容提供者读取图像方向值，特别是 Images.Media.ORIENTATION 字段并相应地旋转它。

这些图像被旋转存储。旋转角度保存在媒体数据库中。

```
public int getOrientation(Uri selectedImage) {
    int orientation = 0;
    final String[] projection = new String[]{MediaStore.Images.Media.ORIENTATION};      
    final Cursor cursor = context.getContentResolver().query(selectedImage, projection, null, null, null);
    if(cursor != null) {
        final int orientationColumnIndex = cursor.getColumnIndex(MediaStore.Images.Media.ORIENTATION);
        if(cursor.moveToFirst()) {
            orientation = cursor.isNull(orientationColumnIndex) ? 0 : cursor.getInt(orientationColumnIndex);
        }
        cursor.close();
    }
    return orientation;
} 
```

`ImageView.setImageMatrix()`您可以使用例如旋转图像。

# android - Android：如何跟踪软键盘是否打开？

> ID：12369140
> 
> 赞同：6
> 
> 时间：2012-09-11T11:55:15.920
> 
> 标签：android, android-edittext, android-softkeyboard

在我的应用程序中，设备软键盘覆盖了 EditTextView，因此用户看不到他正在输入的内容。

所以我想隐藏其他视图（比如我的按钮），以使 EditTextViews 可见。

而是做类似的事情

```
EditText.onFocus(){
//hide button
} 
```

对于每个 EditText，我想做类似的事情

```
if(soft-keyboard.isOpenned())
//hide button
} 
```

如何跟踪软键盘是打开还是关闭？

**编辑：**

其实我的布局是这样的：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:background="@android:color/transparent"
        android:focusable="true"
        android:focusableInTouchMode="true" >
    </LinearLayout>

    <ImageView
        android:id="@+id/Logo"
        android:layout_width="45dp"
        android:layout_height="45dp"
        android:src="@drawable/wic_logo_small" />

    <Button
        android:id="@+id/goButton_iWant"
        android:layout_width="35dp"
        android:layout_height="45dp"
        android:layout_alignParentRight="true"
        android:background="@color/black"
        android:gravity="center_vertical|center_horizontal"
        android:text="@string/go" />

    <AutoCompleteTextView
        android:id="@+id/searchAutoCompleteTextView_iWant"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@id/goButton_iWant"
        android:layout_toRightOf="@id/Logo"
        android:hint="@string/search"
        android:textColor="@color/white" />

    <TextView
        android:id="@+id/iWantLabel"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/iWantPageLogo"
        android:background="@color/grey"
        android:gravity="center_vertical|center_horizontal"
        android:text="@string/iWant"
        android:textColor="@color/white" />

    <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/ScrollViewiWant"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/iWantLabel"
        android:scrollbars="vertical" >

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/iNeedToBuy"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/iWantLabel"
                android:gravity="center_vertical|center_horizontal"
                android:padding="5dp"
                android:text="@string/iNeedToBuy"
                android:textColor="@color/white"
                android:textSize="20dp" />

            <AutoCompleteTextView
                android:id="@+id/iNeedToBuyEditText"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/iNeedToBuy"
                android:hint="@string/product"
                android:imeOptions="actionNext"
                android:singleLine="true"
                android:textColor="@color/white"
                android:textSize="15dp" />

            <TextView
                android:id="@+id/error1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/iNeedToBuyEditText"
                android:height="0dp"
                android:text=""
                android:textColor="@color/error_color"
                android:textSize="12dp" />

            <TextView
                android:id="@+id/priceWillingToPay"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/error1"
                android:gravity="center_vertical|center_horizontal"
                android:text="@string/priceWillingToPay"
                android:textColor="@color/white"
                android:textSize="20dp" />

            <EditText
                android:id="@+id/priceWillingToPayEditText"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/priceWillingToPay"
                android:hint="@string/price"
                android:inputType="number"
                android:singleLine="true"
                android:textColor="@color/white"
                android:textSize="15dp" />

            <TextView
                android:id="@+id/error2"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/priceWillingToPayEditText"
                android:height="0dp"
                android:text=""
                android:textColor="@color/error_color"
                android:textSize="12dp" />

            <TextView
                android:id="@+id/needToBuyItBy"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/error2"
                android:gravity="center_vertical|center_horizontal"
                android:text="@string/needToBuyItBy"
                android:textColor="@color/white"
                android:textSize="20dp" />

            <EditText
                android:id="@+id/date_iWant"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/needToBuyItBy"
                android:clickable="true"
                android:cursorVisible="false"
                android:focusable="false"
                android:hint="@string/date"
                android:inputType="none"
                android:singleLine="true"
                android:textColor="@color/white"
                android:textSize="15dp" />

            <TextView
                android:id="@+id/error3"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/date_iWant"
                android:height="0dp"
                android:text=""
                android:textColor="@color/error_color"
                android:textSize="12dp" />

            <DatePicker
                android:id="@+id/datePicker_iWant"
                android:layout_width="0dp"
                android:layout_height="0dp"
                android:layout_below="@id/error3"
                android:hint="@string/date"
                android:padding="5dp"
                android:textColor="@color/black"
                android:textSize="15dp" />

            <TextView
                android:id="@+id/iAmIn"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/date_iWant"
                android:gravity="center_vertical|center_horizontal"
                android:text="@string/iAmIn"
                android:textColor="@color/white"
                android:textSize="20dp" />

            <Spinner
                android:id="@+id/city_spinner_iWant"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/iAmIn"
                android:prompt="@string/citySpinner"
                android:textColor="@color/white"
                android:textSize="20dp" />

            <Button
                android:id="@+id/submitButton_iWant"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/city_spinner_iWant"
                android:gravity="center_vertical|center_horizontal"
                android:text="@string/submit"
                android:textColor="@color/white"
                android:textSize="20dp" />

            <TextView
                android:id="@+id/emptySpace"
                android:layout_width="wrap_content"
                android:layout_height="50dp"
                android:layout_below="@id/submitButton_iWant"
                android:gravity="left" />
        </RelativeLayout>
    </ScrollView>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/buttons_iWant"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

        <Button
            android:id="@+id/feedButton_iWant"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:layout_margin="0dp"
            android:layout_weight="1"
            android:background="@color/white"
            android:text="@string/feed"
            android:textColor="@color/black" />

        <Button
            android:id="@+id/iWantButton_iWant"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:layout_margin="0dp"
            android:layout_weight="1"
            android:background="@color/white"
            android:text="@string/iwant"
            android:textColor="@color/black" />

        <Button
            android:id="@+id/shareButton_iWant"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:layout_margin="0dp"
            android:layout_weight="1"
            android:background="@color/white"
            android:text="@string/share"
            android:textColor="@color/black" />

        <Button
            android:id="@+id/profileButton_iWant"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:layout_margin="0dp"
            android:layout_weight="1"
            android:background="@color/white"
            android:text="@string/profile"
            android:textColor="@color/black" />
    </LinearLayout>

</RelativeLayout> 
```

当我`EditTextViews`在`ScrollView`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T12:04:56.317

没有直接的方法可以找到它，但我想出了一个肮脏的解决方案，它工作正常。背后的想法是比较您的活动和键盘的两个视图的高度。

```
boolean watcherState;
private void isShowing() {
    final RelativeLayout relative = (RelativeLayout) findViewById(R.id.parent);
    relative.getViewTreeObserver().addOnGlobalLayoutListener(
            new OnGlobalLayoutListener() {
                @Override
                public void onGlobalLayout() {
                    Rect r = new Rect();
                    // r will be populated with the coordinates of your view
                    // that area still visible.
                    relative.getWindowVisibleDisplayFrame(r);

                    int heightDiff = relative.getRootView().getHeight()
                            - (r.bottom - r.top);
                    Log.d("Height", heightDiff + "//");
                    if (heightDiff > 100) { // if more than 100 pixels, its
                                            // probably a keyboard...
                        watcherState = true;
                    } else
                        watcherState = false;
                }
            });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:03:39.643

您可能应该`android:windowSoftInputMode`在清单文件中使用属性来描述当软键盘出现时屏幕布局应如何排列（[http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)）

*   `android:windowSoftInputMode="adjustResize"`：

> Activity 的主窗口总是调整大小，以便为屏幕上的软键盘腾出空间。

*   `android:windowSoftInputMode="adjustPan"`

> Activity 的主窗口没有调整大小来为软键盘腾出空间。相反，窗口的内容会自动平移，因此当前焦点永远不会被键盘遮挡，用户始终可以看到他们正在输入的内容。这通常不如调整大小可取，因为用户可能需要关闭软键盘才能到达窗口的模糊部分并与之交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:11:10.393

要处理 softkepad 检测，请在文件`android:ConfigChanges`中为您的活动设置属性：`AndroidManifest.xml`

```
<activity android:name="com.myapp.MyActivity"
          android:label="@string/app_name"
          android:configChanges="keyboard|keyboardHidden|orientation"
          >
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

在这里，`keyboard|keyboardHidden`in 的标志`android:configChanges`告诉系统 Activity 希望调用`onConfigurationChanged()`您的 Activity 的方法，这允许您处理 softkebaord 更改。

这是一个`onConfigurationChanged()`替换当前正在运行的 Activity 的主要内容视图的示例：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    // Set a new layout - framework will automatically choose portrait or landscape as needed
    setContentView( R.layout.my_activity_layout );

    // Reconnect all listeners for controls in the layout
    a.findViewById( R.id.exit_button ).setOnClickListener( mListener );
} 
```

奇怪的是，您的`onConfigurationChanged()`方法将需要执行与 Activity 方法几乎完全相同的工作`onCreate()`，因此通过将布局设置分解为您从两者调用的单独帮助方法来干燥代码可能是个好主意`onCreate()`和`onConfigurationChanged()`.

# blackberry - 如何在所有应用程序中收听按键？

> ID：12369142
> 
> 赞同：1
> 
> 时间：2012-09-11T11:55:21.180
> 
> 标签：blackberry, key

我们可以在黑莓中创建一个应用程序来监听所有黑莓应用程序的按键吗？我已经在我的一个类中实现了 KeyListener。但它仅适用于我的应用程序中的按键。它不适用于其他应用程序中的按键。将不胜感激任何帮助。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:33:06.850

不，这是不可能的。因为关键事件正在被这些应用程序使用，并且在使用时无效。

您的应用程序不会收到任何已被其他人使用的事件。

# replication - HornetQ 复制失败，超时

> ID：12369144
> 
> 赞同：0
> 
> 时间：2012-09-11T11:55:24.283
> 
> 标签：replication, hornetq

我正在尝试在两个不同的主机上运行新的 HornetQ 2.3.0.alpha*复制。*当我在我的本地机器上尝试它时，它或多或少地工作（用不同的端口分隔 hornetq）。我将在稍后更详细地解释它。

我在最新的 64 位 Xubuntu（本地测试）和 CentO（分布式）、Oracle JDK 6u33（但也尝试了其他版本）上使用普通的香草[HornetQ 2.3.0.alpha 。](http://downloads.jboss.org/hornetq/hornetq-2.3.0.Alpha-bin.tar.gz)

现在在本地测试时，我使用不同的端口进行备份（5446）。我开始直播，然后是备份服务器。备份与实时同步。我杀死/停止直播。相反，备份将继续工作，并请求备份工作（现在在 5445 上运行）。现在我想重新开始直播，但它不起作用，因为备份使用的是 5445。因此我的下一个测试是在不同的机器上启动直播/备份。

在分离的主机上，实时服务器按预期启动。当我开始备份时，当他复制一些数据目录时它会挂起。在那之后，他得到了暂停。它们之间没有防火墙或其他任何东西，我已经检查了两次并与我的本地管理员一起检查。从备份主机到实时主机的 Telnet 工作正常。

这是我在备份中遇到的例外情况，我在下面附加了我的配置：

```
***********************************************************************************
java  -XX:+UseParallelGC -XX:+AggressiveOpts -XX:+UseFastAccessorMethods -Xms512M -Xmx1024M -Dhornetq.config.dir=../config/stand-alone/non-clustered -Djava.util.logging.manager=org.jboss.logmanager.LogManager -Dlogging.configuration=../config/stand-alone/non-clustered/logging.properties -Djava.library.path=. -classpath ../lib/netty.jar:../lib/jnpserver.jar:../lib/jnp-client.jar:../lib/jboss-mc.jar:../lib/jboss-jms-api.jar:../lib/hornetq-twitter-integration.jar:../lib/hornetq-spring-integration.jar:../lib/hornetq-service-sar.jar:../lib/hornetq-rest.jar:../lib/hornetq-journal.jar:../lib/hornetq-jms.jar:../lib/hornetq-jms-client.jar:../lib/hornetq-jboss-as-integration.jar:../lib/hornetq-core.jar:../lib/hornetq-core-client.jar:../lib/hornetq-commons.jar:../lib/hornetq-bootstrap.jar:../config/stand-alone/non-clustered:../schemas/ org.hornetq.integration.bootstrap.HornetQBootstrapServer hornetq-beans.xml
***********************************************************************************
Unable to read the logging configuration from '../config/stand-alone/non-clustered/logging.properties' (java.net.MalformedURLException: no protocol: ../config/stand-alone/non-clustered/logging.properties)
11:50:37,611 INFO  [org.hornetq.integration.bootstrap] HQ101001: Starting HornetQ Server
11:50:38,932 INFO  [org.hornetq.core.server] HQ111001: backup server is starting with configuration HornetQ Configuration (clustered=true,backup=true,sharedStore=false,journalDirectory=../data/journal,bindingsDirectory=../data/bindings,largeMessagesDirectory=../data/large-messages,pagingDirectory=../data/paging)
11:50:38,950 WARN  [org.hornetq.core.server] HQ112216: Moving data directory ../data/bindings to ../data/bindings22
11:50:38,952 WARN  [org.hornetq.core.server] HQ112216: Moving data directory ../data/journal to ../data/journal22
11:50:38,953 WARN  [org.hornetq.core.server] HQ112216: Moving data directory ../data/paging to ../data/paging22
11:50:38,953 WARN  [org.hornetq.core.server] HQ112216: Moving data directory ../data/large-messages to ../data/large-messages22
11:51:39,106 ERROR [org.hornetq.core.server] HQ114002: Failure in initialisation: java.lang.RuntimeException: Could not estabilish the connection
    at org.hornetq.core.server.impl.HornetQServerImpl$SharedNothingBackupActivation.run(HornetQServerImpl.java:2152) [hornetq-core.jar:]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_33]

java.lang.RuntimeException: Could not estabilish the connection
    at org.hornetq.core.server.impl.HornetQServerImpl$SharedNothingBackupActivation.run(HornetQServerImpl.java:2152)
    at java.lang.Thread.run(Thread.java:662) 
```

# 配置文件

我使用默认配置文件作为基础（config/stand-alone/non-clustered）

## 实时配置文件

### hornetq-configuration.xml

```
<configuration xmlns="urn:hornetq"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="urn:hornetq /schema/hornetq-configuration.xsd">

   <paging-directory>${data.dir:../data}/paging</paging-directory>
   <bindings-directory>${data.dir:../data}/bindings</bindings-directory>
   <journal-directory>${data.dir:../data}/journal</journal-directory>
   <journal-min-files>10</journal-min-files>
   <large-messages-directory>${data.dir:../data}/large-messages</large-messages-directory>

   <connectors>
      <connector name="netty">
         <factory-class>org.hornetq.core.remoting.impl.netty.NettyConnectorFactory</factory-class>
         <param key="host"  value="${hornetq.remoting.netty.host:localhost}"/>
         <param key="port"  value="${hornetq.remoting.netty.port:5445}"/>
      </connector>
      <connector name="remote-connector">
         <factory-class>org.hornetq.core.remoting.impl.netty.NettyConnectorFactory</factory-class>
         <param key="host"  value="192.168.40.155"/>
         <param key="port" value="5445"/>
      </connector>
   </connectors>

   <acceptors>
      <acceptor name="netty">
         <factory-class>org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory</factory-class>
         <param key="host"  value="0.0.0.0"/>
         <param key="port"  value="${hornetq.remoting.netty.port:5445}"/>
      </acceptor>
   </acceptors>

   <security-settings>
      <security-setting match="#">
         <permission type="createNonDurableQueue" roles="guest"/>
         <permission type="deleteNonDurableQueue" roles="guest"/>
         <permission type="consume" roles="guest"/>
         <permission type="send" roles="guest"/>
      </security-setting>
   </security-settings>

   <address-settings>
      <!--default for catch all-->
      <address-setting match="#">
         <dead-letter-address>jms.queue.DLQ</dead-letter-address>
         <expiry-address>jms.queue.ExpiryQueue</expiry-address>
         <redelivery-delay>0</redelivery-delay>
         <max-size-bytes>10485760</max-size-bytes>
         <message-counter-history-day-limit>10</message-counter-history-day-limit>
         <address-full-policy>BLOCK</address-full-policy>
      </address-setting>
   </address-settings>

   <shared-store>false</shared-store>
   <clustered>true</clustered>
   <failover-on-shutdown>false</failover-on-shutdown>
   <cluster-user>cluster-user</cluster-user>
   <cluster-password>cluster123</cluster-password>

   <cluster-connections>
      <cluster-connection name="test-cluster">
         <address>jms</address>
         <connector-ref>netty</connector-ref>
         <retry-interval>2000</retry-interval>
         <use-duplicate-detection>true</use-duplicate-detection>
         <forward-when-no-consumers>true</forward-when-no-consumers>
         <max-hops>1</max-hops>
         <static-connectors allow-direct-connections-only="true">
            <connector-ref>remote-connector</connector-ref>
         </static-connectors>
      </cluster-connection>
   </cluster-connections>

   <backup>false</backup>

</configuration> 
```

### hornetq-jms.xml

```
<configuration xmlns="urn:hornetq"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="urn:hornetq /schema/hornetq-jms.xsd">

   <connection-factory name="NettyConnectionFactory">
      <xa>false</xa>
      <ha>true</ha>
      <reconnect-attempts>-1</reconnect-attempts>
      <retry-interval>1000</retry-interval>

      <connectors>
         <connector-ref connector-name="netty"/>
      </connectors>
      <entries>
         <entry name="/ConnectionFactory"/>
      </entries>
   </connection-factory>

   <queue name="DLQ">
      <entry name="/queue/DLQ"/>
   </queue>

   <queue name="ExpiryQueue">
      <entry name="/queue/ExpiryQueue"/>
   </queue>

   <queue name="testing">
      <entry name="/queue/testing" />
      <durable>true</durable>
   </queue>

</configuration> 
```

## 备份配置文件

### hornetq-configuration.xml

```
<configuration xmlns="urn:hornetq"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="urn:hornetq /schema/hornetq-configuration.xsd">

   <paging-directory>${data.dir:../data}/paging</paging-directory>
   <bindings-directory>${data.dir:../data}/bindings</bindings-directory>
   <journal-directory>${data.dir:../data}/journal</journal-directory>
   <journal-min-files>10</journal-min-files>
   <large-messages-directory>${data.dir:../data}/large-messages</large-messages-directory>

   <connectors>
      <connector name="netty">
         <factory-class>org.hornetq.core.remoting.impl.netty.NettyConnectorFactory</factory-class>
         <param key="host"  value="${hornetq.remoting.netty.host:localhost}"/>
         <param key="port"  value="${hornetq.remoting.netty.port:5445}"/>
      </connector>
      <connector name="remote-connector">
         <factory-class>org.hornetq.core.remoting.impl.netty.NettyConnectorFactory</factory-class>
         <param key="host"  value="192.168.40.180"/>
         <param key="port" value="5445"/>
      </connector>
   </connectors>

   <acceptors>
      <acceptor name="netty">
         <factory-class>org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory</factory-class>
         <param key="host"  value="0.0.0.0"/>
         <param key="port"  value="5445"/>
      </acceptor>
   </acceptors>

   <security-settings>
      <security-setting match="#">
         <permission type="createNonDurableQueue" roles="guest"/>
         <permission type="deleteNonDurableQueue" roles="guest"/>
         <permission type="consume" roles="guest"/>
         <permission type="send" roles="guest"/>
      </security-setting>
   </security-settings>

   <address-settings>
      <!--default for catch all-->
      <address-setting match="#">
         <dead-letter-address>jms.queue.DLQ</dead-letter-address>
         <expiry-address>jms.queue.ExpiryQueue</expiry-address>
         <redelivery-delay>0</redelivery-delay>
         <max-size-bytes>10485760</max-size-bytes>
         <message-counter-history-day-limit>10</message-counter-history-day-limit>
         <address-full-policy>BLOCK</address-full-policy>
      </address-setting>
   </address-settings>

   <shared-store>false</shared-store>
   <clustered>true</clustered>
   <failover-on-shutdown>false</failover-on-shutdown>
   <cluster-user>cluster-user</cluster-user>
   <cluster-password>cluster123</cluster-password>
   <live-connector-ref connector-name="remote-connector"/>

   <cluster-connections>
      <cluster-connection name="test-cluster">
         <address>jms</address>
         <connector-ref>netty</connector-ref>
         <retry-interval>2000</retry-interval>
         <use-duplicate-detection>true</use-duplicate-detection>
         <forward-when-no-consumers>true</forward-when-no-consumers>
         <max-hops>1</max-hops>
         <static-connectors allow-direct-connections-only="true">
            <connector-ref>remote-connector</connector-ref>
         </static-connectors>
      </cluster-connection>
   </cluster-connections>

   <backup>true</backup>

</configuration> 
```

### hornetq-jms.xml

```
<configuration xmlns="urn:hornetq"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="urn:hornetq /schema/hornetq-jms.xsd">

   <connection-factory name="NettyConnectionFactory">
      <xa>false</xa>
      <ha>true</ha>
      <reconnect-attempts>-1</reconnect-attempts>
      <retry-interval>1000</retry-interval>

      <connectors>
         <connector-ref connector-name="netty"/>
      </connectors>
      <entries>
         <entry name="/ConnectionFactory"/>
      </entries>
   </connection-factory>

   <queue name="DLQ">
      <entry name="/queue/DLQ"/>
   </queue>

   <queue name="ExpiryQueue">
      <entry name="/queue/ExpiryQueue"/>
   </queue>

   <queue name="testing">
      <entry name="/queue/testing" />
      <durable>true</durable>
   </queue>

</configuration> 
```

当我在本地创建沙箱时，它使用相同的配置，除了为了备份，hornetq-beans.xml 被更改为将端口从 1099/1098 移动到 1199/1198。

我已经为此工作了几天，并且已经尝试了各种组合，所以如果我错过了什么，请原谅。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T01:46:26.950

HornetQ 2.3 正在积极开发中。我建议您在用户论坛而不是所有开发人员工作的 SOF 上提出这个问题。

无论如何，我们即将发布一个测试版，我们改变了节点之间的连接方式。我们甚至删除了一个参数并改变了一些东西。所以我肯定会推荐你在 HOrnetQ 用户论坛上与我们交谈。也许在 github 上的 hornetq/master 上试一试。

# php - 将 PHP 脚本连接到远程 Oracle 数据库 Proplem

> ID：12369146
> 
> 赞同：1
> 
> 时间：2012-09-11T11:55:26.250
> 
> 标签：php, oracle, windows-xp-sp3, oci8

我正在尝试将 php 脚本连接到远程 oracle DB，但是在阅读了[这篇文章](http://www.bernzilla.com/item.php?id=784)之后，我收到了以下错误消息：

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：oci_connect()：ORA-12154：TNS：无法解析指定的连接标识符
> 
> 文件名：控制器/cancel.php
> 
> 行号：13

有谁知道问题可能是什么？

# maven - Maven Hibernate 和 Envers - 依赖项

> ID：12369151
> 
> 赞同：2
> 
> 时间：2012-09-11T11:55:35.470
> 
> 标签：maven, dependencies, hibernate-envers

我在使用 Envers 时遇到了依赖问题。

在 Envers 世界的某个地方，存在对 class 的依赖`org.hibernate.integrator.spi.Integrator`。这可以在`hibernate-core.4.1.7.Final`

但是，如果我使用，`hibernate-core.4.1.7.Final`那么我会遇到一个依赖问题 ( `NoClassDefFoundError`) `org.hibernate.event.PreCollectionUpdateEventListener`，可以在`hibernate-core.3.6.10.Final`.

所以我有点吃不消，因为 Maven 不会将这两个版本都放在类路径中。

任何有解决方案/想法/解决方案的聪明人。

谢谢亚当

**更新：** 感谢@adamw 的回复，但这不起作用。让我更深入地了解我所做的事情：

`build.xml:`

```
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-core</artifactId>
  <version>4.1.7.Final</version>
</dependency>

<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-envers</artifactId>
  <version>4.1.7.Final</version>
</dependency> 
```

然后在我的实体代码中输入：

```
@Audited
@Entity
public class Company
... 
```

现在，当我运行集成测试时，不会创建 _AUD 表。

因此，我将其添加到`persistance.xml`文件中（按照[此处](http://docs.jboss.org/envers/docs/index.html#quickstart)的说明）：

```
<properties>
  <property name="hibernate.ejb.event.post-insert" value="org.hibernate.ejb.event.EJB3PostInsertEventListener,org.hibernate.envers.event.AuditEventListener" />
  <property name="hibernate.ejb.event.post-update" value="org.hibernate.ejb.event.EJB3PostUpdateEventListener,org.hibernate.envers.event.Audit.EventListener" />
  <property name="hibernate.ejb.event.post-delete" value="org.hibernate.ejb.event.EJB3PostDeleteEventListener,org.hibernate.envers.event.AuditEventListener" />
  <property name="hibernate.ejb.event.pre-collection-update" value="org.hibernate.envers.event.AuditEventListener" />
  <property name="hibernate.ejb.event.pre-collection-remove" value="org.hibernate.envers.event.AuditEventListener" />
  <property name="hibernate.ejb.event.post-collection-recreate" value="org.hibernate.envers.event.AuditEventListener" />
</properties> 
```

然后我得到一个 Spring 错误，导致：

```
javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build EntityManagerFactory 
```

那么我该如何解决这个问题？其他人在使用 Spring、Envers 和 Maven 时有这个问题吗？

哦，顺便说一句。代码段中指定的侦听`properties.xml`器在任何一个 jar 文件依赖项中都不存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T06:44:39.543

好吧，您需要将 Hibernate 4.1.7 与 Envers 4.1.7 一起使用，或者将 Hibernat 3.6.10 与 Envers 3.6.10 一起使用 :)

**更新：**

现在您使用了错误的文档:)。自 4.x 以来，您不需要侦听器。见这里： http: [//docs.jboss.org/hibernate/orm/4.1/quickstart/en-US/html/ch05.html](http://docs.jboss.org/hibernate/orm/4.1/quickstart/en-US/html/ch05.html) http://docs.jboss.org/hibernate/orm/4.1/devguide/en-美国/html/ch15.html

# excel - 如果文本框为空，如何防止代码执行？

> ID：12369152
> 
> 赞同：3
> 
> 时间：2012-09-11T11:55:36.407
> 
> 标签：excel, vba

如果用户将文本框留空，我想阻止代码执行

```
If tx01.Value = "" Then Exit Sub
If tx01.Value = vbNullString Then Exit Sub  //  also tried 
```

但是用户可以简单地写一个空格（或任意数量的空格）并且 - 预防不起作用。
我需要此框中的字符（数字和非数字），但不仅是空格。
请问我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:58:02.173

尝试`Trim()`在文本框值检查中添加一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T12:00:33.827

就像是

```
if trim(tx01.Value) = "" then Exit sub 
```

Trim 删除前导和尾随空白字符。

# algorithm - 具有移至尾功能的无锁队列算法

> ID：12369159
> 
> 赞同：3
> 
> 时间：2012-09-11T11:56:23.713
> 
> 标签：algorithm, queue, atomic, lock-free, lru

对于 LRU 缓存，我需要一种用于无锁队列的算法，类似于[简单、快速和实用的非阻塞和阻塞并发队列算法一文中描述的算法](http://www.research.ibm.com/people/m/michael/podc-1996.pdf)

但是为了维护一个 LRU 队列，我还需要删除队列中的节点（尾部节点除外）。

我的想法是仅使用 CAS 操作将节点标记为已删除，然后使用单个清理线程，该线程稍后将从队列中删除已删除的节点。

我发现创建无锁算法比我最初预期的要复杂。所以，我的问题是：
**有没有这样的算法可用？**

这是我目前使用的结构：

*一般的*

*   一个节点具有以下结构： struct { e *entry, next pointer, prev pointer, state uint32}
*   为了避免为每个新节点分配多个内存，分配了一个节点数组。
*   指向节点的指针由数组索引值和更新计数器组成，复用到单个 uint64
*   节点状态由一个高位组成，告诉该节点是否被删除。其余位用作更新计数器

*入队*

*   辅助队列保存未使用节点的列表，“新”节点通过从辅助队列中的出队获取，然后设置为默认值
*   node.prev 在新节点入队之前设置为当前尾部

*出队*

*   head.next.prev 在 head dequeue 之前被 CAS 化为 NIL 值。如果 head.next.prev 设置为 CLEANUP（由清理线程处理），则不允许出队，线程将让出 CPU 并重新开始。
*   在具有未删除状态的节点成功出列时，该状态将被 CAS 删除，并且该节点将返回到辅助队列。在失败（或状态已设置为已删除）时，出队的 node.prev 将从 NIL 更改为 CLEANUP，向清理线程发出该节点已出队的信号。然后出队将重新开始，直到未删除的节点成功出队并通过 CAS 删除。

*删除*

*   为了标记队列中的删除，状态被 CAS'ed 删除并在成功时传递给清理队列。失败时什么也不做，但函数返回。

*清理线程*

*   如果 node.prev 是 CLEANUP，则 Dequeue 已将其从队列中删除。节点被传回辅助队列。
*   如果 node.prev 为 NIL，则该节点即将成为头，是头，或即将出队。如果 node == head，清理线程尝试执行出队（状态更改为已删除）。失败时，清理过程将从头开始。
*   如果 node 被设置为另一个节点，node.prev 被 CAS'ed 为 CLEANUP。如果 head.next == 节点，这可以防止任何出队。成功后，使用双链表进行队列内删除。失败时，清理过程将从头开始。

Node.prev 用于告诉：

*   队列中哪个节点在前
*   节点即将成为头/是头
*   节点正在被清理线程处理
*   节点出队

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:39:41.267

队列中元素的逻辑删除实际上是有问题的，这就是为什么你不会找到这方面的论文的原因。此外，它是添加到非常通用的数据结构中的非常特定的功能，这是您找不到论文的另一个原因；你只会找到一般数据结构的论文。

有问题的问题是双重的；首先，队列通常不是为支持游标而设计的。其次，了解访问您希望在逻辑上删除的元素是否仍然安全——例如，它是否已经出队和解除分配？

您引用的队列使用指针计数器对来解决 ABA，这意味着使用空闲列表。在这种情况下，您始终可以确定该元素尚未被释放。

对于游标，您需要在出队处输入，然后沿队列向下移动到入队指针。但是，如果您正在查看的元素在您移动到下一个元素之前出列，会发生什么？然后，您将跟踪已从队列中删除并位于空闲列表中的元素的下一个指针。事实上，一般来说，在光标从一个元素移动到下一个元素之间的队列中可能会发生*任何事情 - 包括完全移除队列和使用不同元素重新创建队列。*

因此，您需要一个对游标有明确支持的链表。

你没有提到你使用的语言？

# javascript - 微笑时间线小部件添加自定义字段

> ID：12369160
> 
> 赞同：0
> 
> 时间：2012-09-11T11:56:24.877
> 
> 标签：javascript

我想向事件数据源添加几个自定义字段，例如：

```
{"events":
   [
      {"isDuration": "true",
       "description": "my description
       "color": "#ffcc00",
       "image": "/images/my-img.jpg",
       "link": "http://www.google.co.uk",
       "icon": "/images/red-ico.png",
       "end": null,
       "title": "my title",
       "start": "2012,09,30",
       "textColor": "#777",
       "customField_1": "abc"
       "customField_2" : "def"}
   ]
} 
```

然后在 showBubble 事件中检索**customField_1**和**customField_2**，如下所示：

```
Timeline.OriginalEventPainter.prototype._showBubble = function(x, y, evt) {

      var cust1 = evt.getCustom1();
      var cust2 = evt.getCustom2();
} 
```

是否可以添加这些 get 方法，我将如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:39:46.307

这是答案：[https ://groups.google.com/forum/#!topic/simile-widgets/om3EtWzGacQ](https://groups.google.com/forum/#!topic/simile-widgets/om3EtWzGacQ)

# wcf - WCF 服务的 CreateServiceHost 中的 baseAddresses

> ID：12369165
> 
> 赞同：1
> 
> 时间：2012-09-11T11:56:27.840
> 
> 标签：wcf

当我们使用类的方法`Uri[] baseAddresses`创建服务主机时，会调用参数。`CreateServiceHost``ServiceHostFactory`

什么时候调用这个方法？baseaddresses 数组中的值是多少？从哪里设置？

我们可以从头开始设置吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:13:37.653

如果您在 IIS 或其他容器上托管您的服务，它将自动传入（从您的配置文件等）。

如果您以编程方式托管您的服务，它将由您传入。我目前在使用方法本身时[遇到问题](https://stackoverflow.com/questions/12849319/wcf-hides-the-createservicehost-method-override-that-i-really-want)`CreateServiceHost`，但是如果您使用标准`ServiceHost`类，它的外观如下（数组`Uri`就是您要查找的内容）：

```
using System;
using System.ServiceModel;
using System.ServiceModel.Description;
using MyApp.DatabaseService.Contracts; // IDatabase interface
using MyApp.DatabaseService.Impl; //DatabaseService

 public class Program
    {

        static void Main(string[] args)
        {
            using (ServiceHost host = new ServiceHost(
                typeof(DatabaseService),
                new Uri[]{          // <-- baseAddresses
                    new Uri("http://localhost:8111/DatabaseService"),
                    new Uri("net.pipe://localhost/DatabaseService")
                }))
            {
                host.AddServiceEndpoint(typeof(IDatabase),
                    new BasicHttpBinding(),
                    "");

                host.AddServiceEndpoint(typeof(IDatabase),
                    new NetNamedPipeBinding(),
                    "");

                // Add ability to browse through browser
                ServiceMetadataBehavior meta = new ServiceMetadataBehavior();
                meta.HttpGetEnabled = true;
                host.Description.Behaviors.Add(meta);

                host.Open();

                Console.WriteLine("IDatabase: DatabaseService");
                Console.WriteLine("Service Running. Press Enter to exit...");
                Console.ReadLine();

                host.Close();
            }
        }
    } 
```

# macos - 如何在 Mac 上安装 sshd？

> ID：12369172
> 
> 赞同：4
> 
> 时间：2012-09-11T11:56:48.383
> 
> 标签：macos, homebrew, sshd

我正在尝试在我的 Mac 上使用 Hadoop，但它需要 Java 和`ssh`，所以我需要安装它们。我已经在`ssh`Homebrew 的帮助下完成了该部分，但是下载后`sshd`，我不知道如何安装它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-11T12:02:54.997

OS X 自带**sshd**，你只需要在**System Preferences**中启用它，在**Sharing**下点击**Remote Login**：

![在此处输入图像描述](../Images/3e3198d44e30ee17fbdc96f08cd4a8f9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T12:03:46.727

系统偏好设置->共享->勾选“远程登录”

# c# - 使用 NHibernate 将对象的存在映射到布尔属性

> ID：12369176
> 
> 赞同：0
> 
> 时间：2012-09-11T11:57:02.363
> 
> 标签：c#, .net, nhibernate, nhibernate-mapping

**背景**：我正在连接到具有两个实体的***旧***数据库：

```
Order (Id, Date, ...)    

ForwardOrder(OrderId) 
```

...如您所见， ForwardOrder 可能只是 Order 的一个属性

**要求**：尝试将 ForwardOrder 反映为 .NET 中 Order 类的布尔属性。使用 NHibernate 连接到数据库。

**问题**：我尝试实现 IUserType 但没有运气 - 列不存在错误。

映射是`Map(x=>x.IsForwardOrder).CustomType<ForwardOrderType>();`

添加公式确实可以正确加载，但从未使用过 IUserType 设置器。

**问题**：可以做到吗？一个对象在单独的表中的存在可以成为我的实体上的标志吗？我知道我可以只映射一个相关的对象，但我宁愿避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:06:54.363

这样做的方法是`ForwardOrder`在代码级别将其设置为受保护的属性，并将其视为惰性组件。然后，您实际上可以完全忽略`IsForwardOrder`您的 NHibernate 映射，而只需执行以下操作：

```
 public bool IsForwardOrder { get { return ReferenceEquals(this.ForwardOrder,null); } } 
```

您**也可以**使用多态性，但对于布尔值来说似乎有点过分了。这种方法将需要创建一个具有 ForwardOrder 属性的子类，并定义一个[table-per-subclass 连接](http://www.nhforge.org/doc/nh/en/#inheritance-tablepersubclass)到该`ForwardOrder`表。您仍然需要定义一个布尔属性，例如

```
 public virtual bool IsForwardOrder { get { return false; } } 
```

在基类上

```
 public override bool IsForwardOrder { get { return true; } } 
```

在加入的子类上。

或者，通过这种方法，您可以使用扩展方法，例如

```
 public static bool IsForwardOrder(this Order order) { return order is ForwardOrder; } 
```

（假设基类是`Order`，子类是`ForwardOrder`）

# solr - Solr：如何在嵌套查询中将多值请求参数作为“本地参数”传递？

> ID：12369179
> 
> 赞同：0
> 
> 时间：2012-09-11T11:57:11.163
> 
> 标签：solr, dismax, nested-query

我正在构建格式的嵌套 Solr DisMax 查询：`_query_:"{!edismax qf=...}...`。现在我需要添加几个提升查询（bq 参数），但简单地编写`_query_:"{!edismax qf=... bq=foo bq=bar}`似乎不起作用，因为只处理了一个 bq 键，其余的被忽略。是否可以将多值参数作为[LocalParams](http://wiki.apache.org/solr/LocalParams)传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:09:47.097

多值局部参数目前并未实现。这是一个 CR - [https://issues.apache.org/jira/browse/SOLR-2798](https://issues.apache.org/jira/browse/SOLR-2798)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:01:39.223

尝试使用新的请求处理程序，而不是使用 localparams 并使查询复杂化。
多个 bq 参数可以很容易地指定，应该可以正常工作并且应该更容易理解。

```
<requestHandler name="edismax" class="solr.SearchHandler" >
    <lst name="defaults">
        <str name="defType">edismax</str>
        <str name="qf">
            title
        </str>
        <str name="bq">
            foo bar
        </str>
        <str name="fl">
            *,score
        </str>
        <int name="ps">100</int>
        <str name="q.alt">*:*</str>
    </lst>   
</requestHandler> 
```

# android - eclipse找不到zXingJune2010.apk

> ID：12369184
> 
> 赞同：0
> 
> 时间：2012-09-11T11:57:23.423
> 
> 标签：android, xml, android-layout, zxing

我下载了一个 zxing 库和 zxing 项目，并将它们导入我的工作区。当我尝试运行该项目时，eclipse产生了如下错误：

```
[2012-09-11 13:17:04 - zXingJune2010] Could not find zXingJune2010.apk! 
```

将项目导入我的工作区后，我更改了构建路径以导入所需的库，并且没有错误，然后我尝试运行该应用程序，然后 Eclipse 生成了前门错误

如何解决此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:11:53.327

首先尝试清理项目

将 zxing 库标记为库（Properties>Android>Is Library）并确保将其添加到 zxing 项目中

然后右键单击该项目并单击Android工具>修复项目属性

这应该可以解决您的问题。

# c# - DataContract 继承未知类型

> ID：12369188
> 
> 赞同：0
> 
> 时间：2012-09-11T11:57:44.123
> 
> 标签：c#, wcf, datacontract

嗨，我的数据合同具有继承性，但在使用服务时无法访问最后一个成员：

```
namespace Services.SearchService
{

    [DataContract]
    [KnownType(typeof(LabellingSearch))]
    public class SearchResult
    {
        [DataMember]
        public int ID { get; set; }

        [DataMember]
        public string Title { get; set; }

        [DataMember]
        public DateTime Modified { get; set; }
    }

    /// <summary>
    /// Specialist Search Result for Labelling Content Data
    /// </summary>
    [DataContract]
    [KnownType(typeof(Labelling))]
    public class LabellingSearch : SearchResult
    {
        [DataMember]
        public string Region { get; set; }

        [DataMember]
        public string Country { get; set; }

        [DataMember]
        public string LabelSummary { get; set; }
    }

    /// <summary>
    /// Full Labelling Content Data
    /// </summary>
    [DataContract]
    public class Labelling : LabellingSearch
    {
        public string Content { get; set; }
   }
} 
```

因此，在消费类中，我可以访问“标签”类型，但无法访问其“内容”属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:02:30.173

您没有将该类成员作为**[DataMember]**

```
[DataContract]
    public class Labelling : LabellingSearch
    {
        [DataMember]
        public string Content { get; set; }
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:00:45.417

您无法访问`Content`属性，因为它不是`DataMember`所以它没有被序列化。添加`[DataMember]`属性

```
[DataMember]
public string Content { get; set; } 
```

来自 MSDN 关于**DataMemberAttribute 类**：

> 当应用于类型的成员时，指定该成员是数据协定的一部分并且可由 DataContractSerializer 序列化。

# android - .android 文件夹中没有 debug.keystore

> ID：12369203
> 
> 赞同：1
> 
> 时间：2012-09-11T11:58:37.600
> 
> 标签：android, eclipse, windows-7, sdk, sample

我正在拼命地尝试编写一个简单的应用程序，但我在每一步都遇到了问题，所以我想我会尝试使用 SDK 提供的示例应用程序之一 - 可能会出现什么问题 - 对吧？

按照说明复制示例并对其进行编辑时，无论我尝试哪个项目，我都会收到“无法加载项目 xxx 的属性文件”。按照这个论坛上的建议，我去寻找我的 debug.keystore 所以我可以删除/重新创建它，但发现它丢失了

帮助！！

哦，是的-Windoze 7，Eclipse 4.2.0，Android SDK 20.0.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:29:47.137

debug.keystore 文件由 eclipse 中的 ADT 插件创建。确保您已安装与您的 eclipse 版本兼容的 ADT 插件。

当你使用 eclipse juno 时。这是您必须使用的 url 安装插件

[http://download.eclipse.org/releases/juno/](http://download.eclipse.org/releases/juno/)

关于安装插件的步骤 goto

[http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

**注意：上面的链接仍然显示 eclipse 的旧 url。您需要将上面给出的 url 用于 eclipse 4.2 juno。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:10:36.480

有同样的错误 win 7 64bit eclipse 3.7 indigo 和 4.2.1 juno 删除了调试密钥库。clean and buile 是否完美构建没有错误。不需要重启 Eclipse

# java - 为什么这个奇怪的顺序发生在 java 的 PriorityQueue 中？

> ID：12369204
> 
> 赞同：2
> 
> 时间：2012-09-11T11:58:41.627
> 
> 标签：java, algorithm, data-structures, collections

我阅读了文档以及我能找到的关于 PriorityQueue 的所有内容，但仍然不明白为什么输出如此奇怪我的意思是我无法获得添加订单的意义，谁能解释一下？

```
PriorityQueue<String> pq = new PriorityQueue<String>();
pq.offer("2"); 
System.out.println("add 2 : " + pq); 
pq.offer("4");
System.out.println("add 4 : " + pq);
System.out.println(pq.peek() + " ");
pq.offer("1");
System.out.println("offer 1 : " + pq);
pq.offer("3");
System.out.println("add 3 : " + pq);
pq.remove("1");
System.out.println("remove 1 : " + pq); 
```

输出：

```
add 2 : [2]
add 4 : [2, 4]            <- why 4 goes there
offer 1 : [1, 4, 2]       <- why 1 goes first
add 3 : [1, 3, 2, 4]      <- why reorder
remove 1 : [2, 3, 4]      <- again 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:01:46.210

`PriorityQueue`只保证第一个元素是最小的。

[二叉堆](http://en.wikipedia.org/wiki/Binary_heap)只保证每个 子堆（子树）中的根是最小的元素。
堆实际上是一个完整的树（或它的数组表示）。每当您插入违反条件的元素（小于根）时，旧的根就会被筛选掉。这是在堆上递归完成的。

如果您在每个时间点只需要 min 元素，这种部分排序允许快速且相对缓存效率较高（使用数组表示）的数据结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T12:01:15.107

PriorityQueue 是一种树状结构，可确保第一个元素是最小的。其他元素的顺序并不重要，很可能是由于 PQ 如何平衡树。

正如@larsmans 指出的那样，这被称为*最小堆顺序*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T12:03:21.627

Java 文档：

```
An unbounded priority queue based on a priority heap. 
The elements of the priority queue are ordered according to their natural ordering, or by a Comparator provided at queue construction time, depending on which constructor is used. 
A priority queue does not permit null elements. 
A priority queue relying on natural ordering also does not permit insertion of 
non-comparable objects (doing so may result in ClassCastException). 
```

还说：

```
The head of this queue is the least element with respect to the specified ordering. If multiple elements are tied for least value, the head is one of those elements -- ties are broken arbitrarily. The queue retrieval operations poll, remove, peek, and element access the element at the head of the queue. 
```

你输出的是`toString()`方法。输出是由于该方法如何迭代树。与 的顺序相同`Iterator`。

# c++ - 在虚函数中使用子类类型参数

> ID：12369206
> 
> 赞同：15
> 
> 时间：2012-09-11T11:58:47.477
> 
> 标签：c++, inheritance, polymorphism

我有这段代码（从我现实生活中的麻烦中设计出来的）

它无法编译，抱怨 ExtendsB 没有实现`B::Run(A* a)`。但是，理解扩展名没有问题`A* Run();`

```
class A { };

class ExtendsA : public A { };

class B
{
public:
    virtual ~B(){}  
    virtual void Run(A* a) = 0;
    virtual A* Run() = 0;
};

class ExtendsB : public B
{
public:
    virtual ~ExtendsB(){}

    // Not OK! It does not see it as an implementation of 
    // virtual void Run(A* a) = 0;
    virtual void Run(ExtendsA* ea) {}; 
    virtual ExtendsA* Run() { return new ExtendsA(); }; // OK
}; 
```

**为什么 C++ 允许将返回类型更改为子类，而不是参数类型？**

这是一个很好的理由还是只是语言规范中的一个遗漏点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-11T12:02:22.450

> **为什么 C++ 允许将返回类型更改为子类，而不是参数类型？**

C++ 标准允许您在覆盖虚函数时使用***[协变返回类型](http://www.lwithers.me.uk/articles/covariant.html)***，但不允许您修改函数参数。是的，它背后有一个很好的理由。

> **理由：**

重写本质上意味着将在运行时调用基类方法或派生类方法，具体取决于指针指向的实际对象。
这意味着：
即：*“可以调用基类方法的每个实例都可以通过调用派生类方法来替换，而无需对调用代码进行任何更改。”*

如果没有上述规则，它将留下一个窗口，通过添加新功能（新的派生类）来破坏现有代码。

如果派生类中的函数原型与基类虚函数 wrt 参数不同，则该函数不会覆盖基类函数，因为上述规则被破坏。

但是，协变返回类型并没有违反此规则，因为向上转换是隐式发生的，并且基类指针始终可以指向派生类对象而无需任何转换，因此标准对返回类型强制执行协变返回类型的这一条件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-11T12:01:19.363

错误很明显：你需要`void Run(A*)`在你的类`ExtendedB`中，但你没有。你所拥有的只是`void Run(ExtendedA*)`，但这不一样：基类承诺接受*任何* `A`-pointer，但你的`ExtendedB::Run`更挑剔，只接受一个狭窄的子集。

（您混淆了协变和逆变，但这与 C++ 无关，因为 C++ 不允许逆变覆盖。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-11T12:02:26.243

它只是两种不同的类型，这使其成为具有两个不同签名的两个不同功能。

通常，如果您使用的是理解 C++11 的编译器，则应在旨在覆盖另一个函数的函数上使用 override 关键字。在您的情况下，由于抽象基类，错误变得明显，但在其他情况下，这样的错误可能会导致大量调试......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T12:03:11.907

特殊化返回类型使子类更加严格——它将充当`A`. 但是，将`Run`方法限制为仅接受原始参数的子类使得`B`不充当`A`.

继承对is-a 关系建模。您的代码违反了 Liskov 替换原则。

# mysql - 如何从 mysql 表中选择唯一的、最近插入的值？

> ID：12369207
> 
> 赞同：1
> 
> 时间：2012-09-11T11:58:54.283
> 
> 标签：mysql, database

我的表（*产品*）如下所示：

```
id name value
1  oil  100
2  oil  140
3  glue 120
4  glue 110 
```

我需要选择最后插入*的油*和最后插入的*胶水*，所以结果应该是：

```
2 oil 140
4 glue 110 
```

我试过什么：

```
SELECT * FROM `products` GROUP BY `name` ORDER BY `value` DESC LIMIT 2 
```

但这个查询显示

```
1  oil  100
3  glue 120 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:02:35.337

您需要获取每种类型的最后插入行（最高 id），然后检索这些 id 的数据。这假设您的 id 编号随着每次新插入而增加，因此更高的 id 值假定稍后插入。

```
 SELECT d.id, d.name, d.value
   FROM products d
   JOIN (
     SELECT MAX(id) id, name
       FROM products
      GROUP BY name
   ) m ON (d.id = m.id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:01:08.010

试试这个：-

```
SELECT * FROM `products` GROUP BY `name` ORDER BY id DESC LIMIT 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T12:02:26.333

这个查询应该可以解决问题：

```
SELECT a.*
FROM products a
     INNER JOIN (SELECT MAX(id) AS id
                 FROM products
                 GROUP BY name
                ) b
                ON a.id = b.id; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T12:04:04.010

您将要在表上进行自联接：

```
SELECT p1.id, p1.name, p1.value
FROM products p1
inner join 
(
   select name, max(id) mxid
   from products
   group by id
) p2
   on p1.name = p2.name
   and p1.id = p2.mxid 
```

内部子查询获取`max()`记录的 id，然后将其加入表中以返回所需的记录。

# c# - 如何在 linq to sql 截断后立即提交更改

> ID：12369210
> 
> 赞同：2
> 
> 时间：2012-09-11T11:59:09.660
> 
> 标签：c#, linq, linq-to-sql, truncate

我有一个 Linq to SQL 数据库表，我正在使用 ExecuteCommand 执行截断。在此截断之后，我需要立即将初始记录添加到表中，但代码因“重复 ID”问题而失败，表明截断不是立即的。

有没有办法强制截断立即发生，或者等到所有更改都提交后再插入？

（附加：程序失败后，如果我重新运行它 - 表已被截断并且核心按预期工作以插入新行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:48:03.513

截断*是*立即的，但 LINQ to SQL 不知道你做了什么。它无法解释原始 SQL。因此它无法知道它已加载到内存中的所有实体现在都已在数据库中消失了。

数据库和 DataContext 的内存状态现在不同步。

ID 在 L2S 身份管理器中是重复的，因为只有一个具有给定键的实体可以共存于同一个 DataContext 中（这绝对是有道理的）。如果您仔细阅读该错误，您会发现它不是 SqlException。

最简单的解决方案是在执行截断后使用新的 DataContext。更复杂的解决方案将涉及刷新加载实体的状态。我不确定它是如何工作的，所以你需要自己研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:43:10.697

1.  使用事务并锁定您正在使用的表。
2.  在存储过程中处理此问题并从代码中调用 SP。

# php - 如何从谷歌驱动器确定 csv 文件中的列数

> ID：12369211
> 
> 赞同：0
> 
> 时间：2012-09-11T11:59:09.647
> 
> 标签：php, csv, google-drive-api

我有一个脚本，它显示从谷歌驱动器到表格的 2 个列的 csv 文件

```
 <?php
            // Connection class for parsing CSV file
            require_once "FGetCSV.php";
            $shs = new File_FGetCSV;

            // Open the CSV file to Google Drive
            $cfg_File = 'link to csv file in gd';
            $f = fopen($cfg_File, "r") or die("Can not open \"$cfg_File\" - ".$php_errormsg);

            // Output CSV file as a table
            $out[]="<table class=\"tb\">";

            $i = 0;
            while ($data = $shs->fgetcsv($f, 65536, ",")) {
                $i++;
                if ($i == 1) {
                    $out[] = "<thead><tr>";
                    $out[] = "<td class=\"header-tb\">$data[0]</td><td class=\"header-tb\">$data[1]</td>";
                    $out[] = "</tr></thead><tbody>";
                }
            else {
            $out[] = "<tr>";
            $out[] = "<td>$data[0]</td><td>$data[1]</td>";
            $out[] = "</tr>";
            }
            }
            $out[] = '</tbody></table>';
            fclose($f);
            echo implode('',$out);
 ?> 
```

> **如何改进脚本以便确定 csv 文件中的列数？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:18:47.583

所以要动态检测列大小

```
$i = 0;
$columns = 0;
while ($data = $shs->fgetcsv($f, 65536, ",")) {
  $i++;
  if ($i == 1) {
    $columns = count($data);
    $out[] = "<thead><tr>";
    // iterate over columns
    for($c=0;$c<$columns;$c++) {
      $out[] = "<td class=\"header-tb\">".$data[$c]."</td>";
    }
    $out[] = "</tr></thead><tbody>";
  }
  else {
    $out[] = "<tr>";
    // iterate over columns
    for($c=0;$c<$columns;$c++) {
      $out[] = "<td>".$data[$c]."</td>";
    }
    $out[] = "</tr>";
  }
} 
```

# facebook - Facebook 的共享 API 不适用于新的“时间线”布局

> ID：12369215
> 
> 赞同：0
> 
> 时间：2012-09-11T11:59:25.713
> 
> 标签：facebook, facebook-sharer

今天我意识到我的分享按钮不适用于新的 Facebook 布局 -**时间轴**。当我使用**Wall**时，一切正常。但是现在我使用**时间线**并且无法共享任何内容，所以我认为所有使用**时间线**而不是**墙**的用户根本无法与我的按钮共享。弹出窗口出现，但字段为空，提交表单时显示“无法将帖子共享（或保存）到此墙”（我翻译它是因为我的 Facebook 不是英文）。对于我正在使用的按钮`sharer.php`：

```
https://www.facebook.com/sharer.php?app_id=<app_id>&sdk=joey&u=<url>&display=popup 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:08:48.277

该`sharer.php`端点已正式弃用一年多。看起来 Facebook 现在可能正在禁用它。

您应该切换到[Send 按钮](https://developers.facebook.com/docs/reference/plugins/send/)或[Feed Dialog](https://developers.facebook.com/docs/reference/dialogs/feed/)方法。

# html - 如何使用 sencha/phoneGap 访问辅助（前置）摄像头？

> ID：12369218
> 
> 赞同：0
> 
> 时间：2012-09-11T11:59:31.503
> 
> 标签：html, cordova, extjs

我是移动世界的新手，所以这可能是一个微不足道的问题。我正在尝试（但无法）访问前置摄像头为我计划使用 sencha touch/phonegap 之类的 html5/js 移动框架构建的应用程序拍照。对此的任何帮助或替代方法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:43:00.780

您可以在流行的 html5/js 移动应用构建框架 appcelerator 中访问**前置摄像头。**但是要创建自定义相机应用程序，您需要使用本地化。

```
if (Ti.Media.camera == Ti.Media.CAMERA_FRONT)
        {
            cameraType.title = "front";
            Ti.Media.switchCamera(Ti.Media.CAMERA_REAR);
        }
        else
        {
            cameraType.title = "rear";
            Ti.Media.switchCamera(Ti.Media.CAMERA_FRONT);
        } 
```

有关更多详细信息，请参阅[appcelerator 论坛](http://developer.appcelerator.com/question/142088/remember-settings-each-time-camera-is-opened)上的问题。

# javascript - 如何从 json 数组中获取特定值？

> ID：12369220
> 
> 赞同：0
> 
> 时间：2012-09-11T11:59:34.840
> 
> 标签：javascript, json, getjson

我有像 newarr 这样的 json 数组名称。如何从 json 数组中获取所有 id 以及如何在 arr 值中添加？

```
 var arr=new Array();
 var newarr=new Array([
        {
            "id": 16820,
            "value": "abcd",
            "info": "Centre"
        },
        {
            "id": 18920,
            "value": "abcd-16820",
            "info": "Centre"
        },
        {
            "id": 1744,
            "value": "abcd-16820",
            "info": "Centre"
        },
        {
            "id": 16822,
            "value": "AaronsburgPA-16820",
            "info": "Centre"
        }
    ]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:02:30.610

这应该这样做：

```
for (var o in newarr){
    arr.push(newarr[o].id);
} 
```

此外，您不需要同时使用方括号，并且`new Array`在构建数组对象时，另一个可以：

```
var myarray = new Array(1,2,3); 
```

或者

```
var myarray = [1,2,3]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:18:35.837

我用 jQuery 试过这个，这是它的[小提琴](http://jsfiddle.net/GuGw2/)。

```
$.each(newarr[0], function(k, v) {
    arr.push(v.id);
});
console.log(arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:01:52.203

这很简单：

```
for(prop in newArr) {
    arr.push(newArr[prop].id);
} 
```

请允许我建议，与其直接向 Stack Overflow 寻求帮助，不如下次谷歌一下。:) 另外，这不是 JSON 数组：它是 Javascript 数组。最好用`[]`符号 ( `var arr = []`) 初始化一个数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T12:09:47.150

两个给出的答案都不起作用，因为您正在创建一个嵌套数组 ( `newarr=new Array([...])`)。

算法是：遍历包含对象的 Array，并将`push`每个 object.id 的值设为`arr`。

在你的情况下：

```
for (var i=0;i<newarr[0].length;i+=1){
  if (newarr[0][i].id) {
    arr.push(newarr[0][i].id);
} 
```

此外：这不是“JSON 数组”。[没有 JSON 对象/数组之类的东西](http://benalman.com/news/2010/03/theres-no-such-thing-as-a-json/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T12:10:18.053

您可以`map`在数组上使用该方法：

```
arr = newarr.map(function(obj) { return obj.id }) 
```

以及文档链接：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)

如果您没有在每个对象中都有一个 id，您可能希望为`filter`空：

```
arr = newarr.map(function(obj) {  
  return obj.id  
}).filter(function(id){  
  return id !== undefined  
}) 
```

文档：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

如果你真的有一个嵌套数组，请先这样做：

```
newarr = newarr[0] 
```

这是[jsfiddle的链接](http://jsfiddle.net/m3SjV/)

# java - portlet 是一种过时的技术吗？

> ID：12369224
> 
> 赞同：4
> 
> 时间：2012-09-11T11:59:43.390
> 
> 标签：java, web-applications, servlets, portlet

这并不是一个有争议的问题。
我听说过 Portlet，但尝试在 Google 上查找教程等我找不到任何真正好的或更新的教程。
大多数似乎都已经过时了，我不能说它是一个好的。
是我的搜索不好还是 Portlet 是一种过时的技术？

# objective-c - 在 Objective C 中比较两个字符串而不考虑大小写、标点符号和空白字符

> ID：12369226
> 
> 赞同：1
> 
> 时间：2012-09-11T11:59:45.233
> 
> 标签：objective-c

我正在使用比较器块对字符串数组进行排序。两个字符串的比较逻辑应该忽略大小写、撇号、逗号和句号等标点符号以及空格字符。

**更新：**

[从 NSString 中去除非字母数字字符](https://stackoverflow.com/questions/1656410/strip-non-alphanumeric-characters-from-an-nsstring)

刚刚看到这个 SO 帖子，用它在删除非字母数字字符后对字符串进行不区分大小写的比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:10:27.227

您必须创建一个临时字符串，其中删除您不喜欢参与比较的字符。

如果你有很多字符串，你可能想要缓存这些临时字符串（比如在字典中，以真实字符串作为键，临时字符串作为数据），或者实现你自己的比较函数，这样你就不必重复创建和丢弃那些临时字符串。

# jquery - 一个循环后减慢Jquery图像滑块

> ID：12369231
> 
> 赞同：-1
> 
> 时间：2012-09-11T12:00:17.057
> 
> 标签：jquery, slider

我想在三个图像的 1 个周期后减慢 www.debruiloft-dj.nl 上的图像滑块。

因此，在一个周期后，它会减慢，例如与前一个周期相比减慢 50%。

有没有解决这个问题的方法，提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:17:21.200

在您的图像循环代码之后使用延迟：-1000（您希望以毫秒为单位的任何时间）

# maven - Jenkins 中的增量构建

> ID：12369233
> 
> 赞同：6
> 
> 时间：2012-09-11T12:00:19.333
> 
> 标签：maven, jenkins, maven-3, parameterized, incremental-build

我使用的是 Jenkins 1.462，maven 版本是 3.0.4。在 Jenkins，我启用了复选框“增量构建 - 仅构建更改的模块”

我想弄清楚2个问题：

1.  **增量构建是否足够？** 在这里[，如何在 Subversion 的多模块 Maven 构建中触发单个模块的 Jenkins 构建？](https://stackoverflow.com/questions/10318037/how-do-i-trigger-a-jenkins-build-of-a-single-module-in-a-multi-module-maven-buil)例如，声明它不能 100% 工作 这里[http://www.slideshare.net/andrewbayer/7-habits-of-highly-effective-jenkins-users](http://www.slideshare.net/andrewbayer/7-habits-of-highly-effective-jenkins-users)在第 19 页声明增量构建是对完整构建，而不是替换。

2.  ***增量构建 - 仅构建更改的模块*实际上是否按预期工作？** 我这是什么意思？如果我有模块 A、B、X、C、D。X 使用 A 和 B，C 使用 X，D 使用 C，我在 X 模块中进行更改。比我想重新编译模块 X (itslef)、C (直接使用 X) 和 D (在传递闭包中；D 使用 C，使用 C)。

注意：这是我为启用增量构建所做的唯一更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T10:37:23.873

正如 Maven 文档所述，增量构建至少在 3.0.4 之前不是很可靠：

> 当前 (3.0.4) Apache Maven 不能很好地支持增量构建。

[https://cwiki.apache.org/confluence/display/MAVEN/Incremental+Builds](https://cwiki.apache.org/confluence/display/MAVEN/Incremental+Builds)（第一行）

相反，我强烈建议使用以下两种方法中的任何一种来加快构建速度：

*   使用并行构建。根据我在大型项目中的经验，这非常有效，并且可以以最小（如果有的话）风险大大减少构建时间。只需执行类似`mvn -T 1.5C clean install` [https://cwiki.apache.org/confluence/display/MAVEN/Parallel+builds+in+Maven+3](https://cwiki.apache.org/confluence/display/MAVEN/Parallel+builds+in+Maven+3)

*   如果您的模块是独立的，您可以将它们移动到不同的项目并使用 maven 依赖项将它们粘合在一起。

# java - 如何解释和使用泛型向量？

> ID：12369234
> 
> 赞同：2
> 
> 时间：2012-09-11T12:00:19.130
> 
> 标签：java, generics, vector

任何机构都可以解释这个通用向量`Vector<? super Object> list = ...`以及在哪里使用它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T12:05:31.310

它与

```
Vector<Object> list 
```

通常“?super Type”表示可以添加Type类型的超类型

Object 是 Java 中的最高级别，因此没有超类型，所以 ? 不需要超级

如果它是

```
Vector<? extends Object> list 
```

那么这意味着您可以添加任何作为 Object 子类的对象。这是 Java 中的每个对象，因此它与

```
Vector<Object> list 
```

还要考虑 List 而不是 Vector，如果您希望它是线程安全的，则将其包装在 Collections.synchronizedList(...)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T12:10:09.583

在这里，您正在定义未知对象的**下限**`?`。所以`Vector<? super Object`只能包含`Object`和 的任何超类`Object`。但是由于`Object`没有超类，所以没有意义。它的行为与`Vector<Object>`.

请参阅[此示例](http://docs.oracle.com/javase/tutorial/java/generics/lowerBounded.html)。

与之对应的是**上限** `Vector<? extends Object>`，您可以在其中添加任何扩展的对象`Object`。

在大多数情况下，您应该能够避免使用`Object`泛型类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T12:05:28.127

`<? super Object>`这是荒谬的，因为没有超类型的 Object，但它是允许的，它只包含 Object 类型。[http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeArguments.html](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeArguments.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T12:05:16.847

这样的列表只能包含类型的元素，`Object`因为 Object 没有任何超类型，类似于使用不可变类（如 String）的扩展，其中此类集合只能包含字符串。

# mysql - 在sql中按一定数量对行进行分组

> ID：12369239
> 
> 赞同：0
> 
> 时间：2012-09-11T12:00:38.990
> 
> 标签：mysql, sql, count, group-by

我正在尝试按 sql 中的某个数字对结果进行分组。即，如果我有 60 行并且我想按 10 行分组，我将有 6 组，每组 10 行，反映表中结果的当前顺序（在每组中，我将有该组中的行）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:12:53.373

**MS SQL** ( [sqlfiddle](http://sqlfiddle.com/#!3/d45c8/1/0) ):

```
WITH cte(groupNumber, Id) AS
(
  SELECT
    (ROW_NUMBER( ) OVER ( ORDER BY Id )) / 10 AS groupNumber,
    Id
  FROM
    MyTable
)
SELECT
  MAX( Id ),
  groupNumber
FROM
  cte
GROUP BY
  groupNumber; 
```

**MySQL** ( [sqlfiddle](http://sqlfiddle.com/#!2/d45c8/33/0) ):

```
SELECT
  MAX( Id ),
  groupNumber
FROM
  (
    SELECT
      Id,
      CAST( FLOOR( (@a := @a + 1 ) / 10 ) AS UNSIGNED ) AS groupNumber
    FROM
      MyTable
    ORDER BY
      Id
  ) AS tmp,
  (SELECT @a := 0) r
GROUP BY
  groupNumber; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:09:04.333

我会这样做：

1.  一个查询来查找结果的计数。
2.  选择查询将 (rownumber % count) 作为一个值，以便具有相同余数的所有行都在一个组中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T12:17:12.783

看看 [这个](http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html)。当首先与 mysql 问题堆栈时，您可以使用此站点。

# c - 有没有比使用多个 return 语句更好的在 c 中返回值的方法？

> ID：12369246
> 
> 赞同：1
> 
> 时间：2012-09-11T12:01:02.047
> 
> 标签：c

在`getFieldSignExtended(int,int,int)`中，我在`if-else`语句中有`if-else`语句。我将`int`结果作为此函数的全局变量。根据程序控制流向的位置，我希望此函数返回`result2`.

起初我在这个函数的底部有一个 return 语句，它不起作用，我发现范围 in`C`不像 in `Java`。因此，我`return 1;`位于函数的底部，并且块`return result2`中有 8 条语句`if-else`。

有没有更好的方法来组织这个功能？我不想嵌套`if-else`块，我想要尽可能少的`return`语句。

这是家庭作业，但它已经评分，我只是更正一些出现的错误。

`getFieldSignExtended(int,int,int)`从值从 hi 到 lo （包括 hi 和 lo 可以是 == 等）获取一个位域并对其进行符号扩展（基于测试符号位）。所有这些代码都处理 2 的补码。

如果您发现任何其他大的 C 约定错误，我将很乐意纠正它们。

提前致谢。

```
int getFieldSignExtended (int value, int hi, int lo) {
    unsigned int result = 0;
    int result2 = 0;
    unsigned int mask1 = 0xffffffff;
    int numberOfOnes = 0;

    if((hi == 31) && (lo == 0)) {
            result2 = value;
            return result2;
    }

    if((lo == 31) && (hi == 0)) {
            result2 = value;
            return result2;
    }
    else if(hi < lo) {
        // Compute size of mask (number of ones).
        numberOfOnes = lo-hi+1;
        mask1 = mask1 << (32-numberOfOnes);
        mask1 = mask1 >> (32-numberOfOnes);
        mask1 = mask1 << hi;
        result = value & mask1;
        result = result >> hi;
        if(result & (0x1 << (numberOfOnes-1))){
            // if negative
            int maskMinus = (0x1 << numberOfOnes);
            maskMinus = maskMinus -1;
            maskMinus = ~maskMinus;     
            result2 = maskMinus | result;
        }
    } else if(lo < hi) {
        // The number of ones are at the 'far right' side of a 32 bit number.
        numberOfOnes = hi-lo+1;
        mask1 = mask1 >> (32-numberOfOnes);
        mask1 = mask1 << lo;
        result = value & mask1;
        result = result >> lo;
        if(result & (0x1 << (numberOfOnes-1))){
            //if negative
            int maskMinus = (0x1 << numberOfOnes);
            maskMinus = maskMinus -1;
            maskMinus = ~maskMinus;     
            result2 = maskMinus | result;
            return result2;
        }
    }else{
        // hi == lo
        unsigned int mask2 = 0x1;

        // Move mask2 left.
        mask2 = mask2 << hi;
        result = mask2 & value;
        result = result >> hi;
        if(result == 0x1){
            result2 = 0xffffffff;
            return result2;
        }
        else{
            result2 = 0x0;
            return result2;
        }   
    }   

    return 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:08:00.863

`result`和`result2`不是“函数的全局变量”，它们是局部变量。问题不在于“C 中的范围与 Java 中的不同”，而是函数中的某些分支无法分配`result2`。具体来说，分支中没有分配

```
printf(" result2 %08x \n",result2); 
```

如果您在 Java 中声明了一个没有值的变量，编译器会在赋值之前查找使用该变量的代码路径，如果有就会提醒您；在 C 语言中，您必须自己注意这些情况。

如果您放在`return result2`底部，并确保所有代码路径都分配`result2`了正确的值，那么您的代码将与单个`return`语句一起工作，就像您的`setField`那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:06:15.987

您不需要多个`return`语句，而不是您的函数目前有效。只需初始化`result2`并在函数结束时执行`1`。`return result2;`

或者不是分配给`result2`然后直接返回，为什么不只是做例如`return value;`或`return maskMinus | result;`等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T12:09:19.347

一般的答案是留出一个变量来存储您的返回值（例如，`ret_val`）并将您的返回值分配给您当前正在`return`输入值的位置。您可能还必须调整您的控制流，因为现在您没有在这些位置退出具有值的函数。

然后，在函数的“底部”，您可以返回*一次*，其值为`ret_val`. IE，

```
 return ret_val; 
```

对于上述更改，一次就足够了。

查看您的算法并重新安排您的代码，也许将一些工作委托给函数可能是另一种有助于简化/澄清代码的方法，从而消除了多次（或过多的，您的判断调用）返回的需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T12:19:04.513

只看`getFieldSignExtended`函数，我看到的问题很简单。您现在只有两个可以返回的地方...让我们稍微简化一下以向您展示我的意思：

```
if (A)
  do something
if (B)
  do the same thing
else if (C)
  do something else
else if (D)
  do something else
else
  do something else 
```

因此，您真正需要做的就是将 A 和 B 结合起来，通过这样做，您的函数中只有一个流程，它不能沿着“if”和“else if”下降，只有其中一个。所以如果你这样做：

```
if(((hi == 31) && (lo == 0)) || ((lo == 31) && (hi == 0))){
    result2 = value;
}else if(hi < lo){  
...
// the rest as is 
```

然后在您`return result2;`删除该行的每个地方，最后而不是`return 1;`仅仅`return result2;`

现在您只有一个用于此函数的 return 语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T12:09:48.553

您可以使用 goto 语句，并且可以在单点返回 result2 值。[如果在这里](http://msdn.microsoft.com/en-us/library/2c002fdz%28v=vs.80%29.aspx)很好地解释

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T12:10:37.370

抱歉阅读过多，我已经很久没有在 c 中做任何事情了，但是你可以创建交换 lo 和 hi 的小函数，并将 hi 设置为更大的值，并将 lo 设置为更低，那么你就不需要这么多块了基本上做同样的事情

# php - 跟踪每月付款数据库结构

> ID：12369273
> 
> 赞同：2
> 
> 时间：2012-09-11T12:02:23.857
> 
> 标签：php, mysql, database, payment

所以我需要跟踪用户的每月付款。

我有一张包含所有信息的用户表。

我猜我需要一张自 2010 年以来所有月份的桌子。

不知道，这是怎么做到的？随着时间的推移，它还需要增加新的月份......

我真的不需要代码方面的帮助，只需要数据库结构。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T12:05:38.070

您需要另一张表用于 PAYMENT

就像是

```
PAYMENT
-------------
payment_id
amount
payment_date
user_id 
```

# symfony - DoctrineMigrationsBundle 和 DoctrineFixturesBundle 升级期间的身份验证失败

> ID：12369291
> 
> 赞同：0
> 
> 时间：2012-09-11T12:03:15.990
> 
> 标签：symfony, doctrine-orm

也许这是一个非常简单的问题，但我就是想不通。

我刚刚升级到 symfony2.0.17，但是在升级过程中（通过 php bin/vendors 安装 symfony 网站提供的 deps 和 deps.lock 文件），DoctrineMigrationsBundle 和 DoctrineFixturesBundle 要求输入用户名和密码，我尝试了我的 Mac 用户名和密码，还有 mySQL 用户名和密码，但都失败了。

有人可以帮我吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:13:26.427

这也发生在我身上......我的解决方案是删除供应商文件夹的内容并`php bin/vendors install`再次运行。

# sqlalchemy - Flask SQLAlchemy 显示查询以进行调试

> ID：12369295
> 
> 赞同：58
> 
> 时间：2012-09-11T12:03:33.293
> 
> 标签：sqlalchemy, flask

我正在使用烧瓶和 SQL Alchemy 开发应用程序。我需要显示执行的查询以生成页面以及每个查询用于调试的时间

最好的方法是什么？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2014-08-01T20:25:09.243

如果你正在使用 Flask-SQLAlchemy 扩展并且不想打扰`create_engine`，你可以设置配置键`SQLALCHEMY_ECHO=True`。

[http://flask-sqlalchemy.pocoo.org/2.1/config/](http://flask-sqlalchemy.pocoo.org/2.1/config/)

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2014-09-28T21:04:01.303

```
app.config['SQLALCHEMY_ECHO'] = True 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-09-11T12:26:04.603

我自己没有使用过它，但似乎 Flask Debug-toolbar 可能对此有所帮助。

[https://github.com/mgood/flask-debugtoolbar](https://github.com/mgood/flask-debugtoolbar)

它是 django-debug-toolbar 的一个端口，可用于分析查询。Flask Debug-toolbar 的文档没有提到它，但是有一个 SQLAlchemyDebugPanel 的代码。
所以我认为看看这个项目可能很值得，看看它是否能满足你的需要。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-02-27T06:34:58.583

延迟回复但在 sqlalchemy create_engine 中设置“echo=True”将记录执行的查询和时间。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-06-21T17:31:15.430

我不确定从中生成网页，但调试/记录数据库查询的一种好方法是使用 SQLAlchemy 的 get_debug_queries()。

```
## in app/main/views.py . (my app's main endpoint file)
from flask import current_app
from flask_sqlalchemy import get_debug_queries

@main.after_app_request
def after_request(response):
    for query in get_debug_queries():
        if query.duration >= current_app.config['FLASKY_SLOW_DB_QUERY_TIME']:
            current_app.logger.warning(
                'Slow query: %s\nParameters: %s\nDuration: %fs\nContext: %s\n'
                % (query.statement, query.parameters, query.duration,
                   query.context))
    return response 
```

这里发生了很多事情，让我们分解一下：

*   @after_app_request 装饰器确保在请求关闭之前调用此函数。
*   该函数接受烧瓶的响应对象，并遍历 get_debug_queries() 的返回，它返回一个列表。
*   它检查每一个的持续时间，并将其与预定义的配置变量进行比较（我将我的设置为 0.5，以秒为单位）。
*   最后，它将查询及其属性记录到标准烧瓶记录器对象（记录的位置取决于您的应用程序配置）。

不要忘记在 config.py 配置类中设置配置变量：

`SQLALCHEMY_RECORD_QUERIES = True`

`FLASKY_SLOW_DB_QUERY_TIME = 0.5`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-01-07T22:11:43.623

另一个答案仅适用于`flask_sqlalchemy`，不适用于`flask`and `sqlalchemy`。

如果您想使用 native `SQLAlchemy`，您可以快速修复：http: [//yuji.wordpress.com/2014/01/07/use-native-sqlalchemy-in-flask-debugtoolbar/](http://yuji.wordpress.com/2014/01/07/use-native-sqlalchemy-in-flask-debugtoolbar/)

```
from flask.ext.sqlalchemy import _EngineDebuggingSignalEvents
_EngineDebuggingSignalEvents(engine, app.import_name).register()
# use at your own risk! a development environment shouldn't really care though! 
```

如果不手动将它们连接到您的项目中，解释/选择端点将无法工作，但至少您的查询调试器（count 和 sql）可以工作。我试图了解我的炼金术正在形成什么样的查询，我明白了。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-03-18T17:03:52.653

如果您使用自己的 python 日志记录配置，您可能只想[在 config 中将“sqlalchemy.engine”记录器的级别设置为“INFO”](http://docs.sqlalchemy.org/en/latest/core/engines.html#configuring-logging)。

有很多方法可以配置您的 python 日志记录，但这里有一个[使用示例`logging.config.dictConfig()`](https://docs.python.org/2/library/logging.config.html#dictionary-schema-details)

```
import logging.config

logging.config.dictConfig({
   ...
   'loggers': {
       'sqlalchemy.engine': {
           'level': 'INFO',
           'handlers': ...
       }
   }
}) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-21T11:13:25.043

除了 Cawb07 为我解决的答案之外，请确保 `DEBUG_TB_INTERCEPT_REDIRECTS`在重定向之前查询时已设置为 True。

# c# - 如何反转 JSON JTOKEN c#

> ID：12369300
> 
> 赞同：2
> 
> 时间：2012-09-11T12:04:02.547
> 
> 标签：c#, json, reverse

如何反转 JToken 值？我有一个 JToken 作为输入，需要有 JToken 作为输出。

A 可以做“ `jtoken.Reverse()`”，但是这个方法返回`IEnumerable<JToken>`

JToken 示例：

```
{
  "response": [
    {
      "body": "steel",
      "can_fly": 1,
      "hover": 1
    }, 
```

....很多很多项目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:09:14.940

这个返回值意味着它`Reverse()`不会创建一个新数组（或任何类型的集合`jtoken`），而是一个迭代器，它将以相反的顺序产生元素。

如果您只需要遍历令牌，请执行以下操作：

```
IEnumerable<JToken> reversed = jtoken.Reverse();
foreach(var token in reversed)` {
    // do stuff; token is a JToken here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T12:17:17.627

你能用：

```
JToken reversed = new JArray(jToken.Reverse()); 
```

# macos - 如何在mac应用程序的NSImage中创建水印

> ID：12369302
> 
> 赞同：3
> 
> 时间：2012-09-11T12:04:03.873
> 
> 标签：macos, cocoa

我正在工作， `NSImage`我想创建水印，`NSImage`我该如何做到这一点.. 任何人都可以提出建议来制作它..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:25:50.313

像这样的东西：

```
float width = 10.0;
float height = 10.0;

NSImage *finalImage = [[NSImage alloc] initWithSize:NSMakeSize(width, height)];

//  obtain images - your sources may vary
NSImage *overlay = [[NSImage alloc] initWithData:[NSData dataWithContentsOfFile:@"/path/to/overlay_image.jpg"]];
NSImage *mainImage = [[NSImage alloc] initWithData:[NSData dataWithContentsOfFile:@"/path/to/main_image.jpg"]];

[finalImage lockFocus];

// draw the base image
[mainImage drawInRect:NSMakeRect(0, 0, width, height) 
                      fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];

// draw the overlay image at some offset point
[overlay drawInRect:NSMakeRect(10, 10, [overlay size].width, [overlay size].height) 
             fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];

[finalImage unlockFocus];

NSData *finalData = [finalImage TIFFRepresentation];

[[[NSBitmapImageRep imageRepWithData:finalData] representationUsingType:NSJPEGFileType properties:nil] writeToFile:[NSString stringWithFormat:@"/path/to/folder/new_image.jpg"] atomically:YES]; 
```

# facebook - 我如何检查用户是否在 facebook (Fb Sdk) 中注销

> ID：12369307
> 
> 赞同：-1
> 
> 时间：2012-09-11T12:04:16.757
> 
> 标签：facebook, facebook-javascript-sdk, ruby-on-rails-3.2

我目前正在开发一个 facebook 应用程序。现在我用 facebook sdk 实现了登录功能。

```
jQuery ->
  $('body').prepend('<div id="fb-root"></div>')

  $.ajax
    url: "#{window.location.protocol}//connect.facebook.net/en_US/all.js"
    dataType: 'script'
    cache: true

window.fbAsyncInit = ->
  FB.init(appId: '<%= ENV["FACEBOOK_APP_ID"] %>', cookie: true)

  $('#sign_in').click (e) ->
    e.preventDefault()
    FB.login (response) ->
      window.location = '/auth/facebook/callback' if response.authResponse

  $('#sign_out').click (e) ->
    FB.getLoginStatus (response) ->
      FB.logout() if response.authResponse
    true 
```

但是我如何检查用户是否从 facebook 注销。因为当我使用无效的访问令牌将打开的图形操作推送到 facebook 时出现异常。

我是 javascript 的新手，也是咖啡脚本的新手，但我对它有点了解。谢谢你的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:28:27.753

您可以使用 Javascript SDK 订阅事件：[https ://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

您要查找的事件称为`auth.logout`.

# c# - 在应用程序启动时在 C# 中以编程方式设置 XAML 数据绑定

> ID：12369309
> 
> 赞同：0
> 
> 时间：2012-09-11T12:04:27.270
> 
> 标签：c#, xaml, listview, data-binding

目前我有一个简单的 Twitter 客户端，上面有一个刷新按钮，该按钮链接到一个通过列表绑定刷新时间线的命令。目前我正在通过以下方式实现这一目标：

XAML：

```
<Grid x:Name="TimelineGrid">
        <Button Content="Refresh Timeline" Name="RefreshTimeline" Command="{Binding RefreshCommand}" />
        <ListView Name="SearchListBox" ItemsSource="{Binding Tweets}" >
            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" Height="132">
                        <Image Source="{Binding ImageUrl}" 
                           Height="73" Width="73" 
                           VerticalAlignment="Top" Margin="5,10,8,0"/>
                        <StackPanel Width="auto">
                            <TextBlock Text="{Binding Name}" 
                                   Foreground="#222" FontSize="28" />
                            <TextBlock Text="{Binding Text}" 
                                    Foreground="#555" TextWrapping="Wrap" FontSize="24" />
                        </StackPanel>
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
</Grid> 
```

ViewModel.cs：

```
class ViewModel : INotifyPropertyChanged
{
    public List<Tweet> Tweets { get; set; }

    readonly Page page;

    public ViewModel(Page page)
    {
        this.page = page;
        RefreshCommand = new TwitterCommand<object>(OnRefresh);
    }

    public TwitterCommand<object> RefreshCommand { get; set; }

    void OnRefresh(object obj)
    {
        PinAuthorizer auth =
        new PinAuthorizer
        {
            Credentials = new LocalDataCredentials()
        };

        if (auth == null || !auth.IsAuthorized)
        {
            page.Frame.Navigate(typeof(oAuth));
            return;
        }

        var twitterCtx = new TwitterContext(auth);

        var timelineResponse =
            (from tweet in twitterCtx.Status
             where tweet.Type == StatusType.Home && tweet.Count == 200
             select tweet)
            .ToList();

        Tweets =
            (from tweet in timelineResponse
             select new Tweet
             {
                 Name = tweet.User.Name,
                 Text = tweet.Text,
                 ImageUrl = tweet.User.ProfileImageUrl
             })
            .ToList();

        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs("Tweets"));
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public List<User> Users { get; set; }

} 
```

现在我想在加载 MainPage.xaml.cs 时填充此时间线。

目前我有这个 MainPage.xaml.cs：

```
public sealed partial class MainPage : Page
{
    public MainPage()
    {
        this.InitializeComponent();
        DataContext = new ViewModel(this);
        InitializeTimeline();
    }

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
    }

    void InitializeTimeline()
    {
        // Get oAuth tokens (They already exist for this example).
        PinAuthorizer auth =
        new PinAuthorizer
        {
            Credentials = new LocalDataCredentials()
        };

        var twitterCtx = new TwitterContext(auth);

        //create list timelineResponse populated of last 200 statuses from users home timeline.

        var timelineResponse =
            (from tweet in twitterCtx.Status
             where tweet.Type == StatusType.Home && tweet.Count == 200
             select tweet)
            .ToList();

        //new list of Tweet (contains strings for Name, Text and ImageUrl)
        List<Tweet> Tweets = new List<Tweet>();

        //Populate list with the data collected from timeline response
        Tweets =
            (from tweet in timelineResponse
             select new Tweet
             {
                 Name = tweet.User.Name,
                 Text = tweet.Text,
                 ImageUrl = tweet.User.ProfileImageUrl
             })
            .ToList();
    }
} 
```

现在我在想解决这个问题的最好方法是遍历这个 List 并将值分配给 MainPage.xaml 中它们各自的列表值，但目前我正在努力解决这个问题。

非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:35:35.777

如果我理解正确，您只需要在加载主页时显示推文 - 而不仅仅是在单击刷新按钮时。

为此，只需从 MainViewModel 手动调用 ViewModel RefreshCommand，如下所示：

```
((ViewModel)DataContext).RefreshCommand.Execute(null); 
```

这代替了`InitializeTimeline`通话。

然后刷新命令将加载推文并更新列表 - 无论如何都绑定到 ListView。

然后，您可以摆脱 InitializeTimeline。

# android - 尝试在 android 中以编程方式添加 gmail 帐户，但出现错误“调用者 uid 10040 与验证者的 uid 不同”

> ID：12369316
> 
> 赞同：0
> 
> 时间：2012-09-11T12:04:55.497
> 
> 标签：android, gmail, accountmanager, google-account

android中有一个emial应用程序，允许添加电子邮件帐户。如何以编程方式在该应用程序中添加 gmail 帐户？

我使用此链接[自动添加帐户](https://stackoverflow.com/questions/7664987/add-account-automatically)，但得到 SecurityException“调用者 uid 10040 与验证者的 uid 不同”。

我用那个代码

```
 Account account = new Account("my id@gmail.com", "com.example.addaccount.account"); 
```

其中“com.example.addaccount.account”是我的应用程序的包名，我在名为 xml 的文件夹中添加了authenticator.xml 文件，包名相同：android:accountType="com.example.addaccount.account"。

但我收到错误“调用者 uid 10043 与验证者的 uid 不同”。谁能告诉我，我错过了什么？我刚刚添加了 xml 文件并编写了该代码来添加帐户，我是否需要以某种方式引用该 xml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:11:15.073

此方法返回 android market gmail 帐户

```
public String getAccount(){
    String email=null;
    Account[] accounts = AccountManager.get(this).getAccountsByType("com.google");
    for (Account account : accounts) {
         email=accounts[0].toString(); 
    }
    return email;
} 
```

也在 manifest.xml 中添加这个

```
 <uses-permission android:name="android.permission.GET_ACCOUNTS"/> 
```

# android - 在一个选项卡中进行多个活动

> ID：12369322
> 
> 赞同：0
> 
> 时间：2012-09-11T12:05:12.813
> 
> 标签：android, tabs

我真的想从选项卡视图中的一个活动移动到同一选项卡中的另一个活动。

```
public void onClick (View view) {
    // This creates an intent to call the 'Called' activity             
    i1 = new Intent(this.getBaseContext(),Called.class);

    // calls the method to replace View.    
    replaceContentView("Called", i1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:33:48.940

尝试这个...

```
TabSpec spec=...//our tabSpec
Intent intent = new Intent(this.getBaseContext(), Called.class);
spec.setContent(videosIntent); 
```

# iphone - 检测选定的地图注释 Xcode

> ID：12369328
> 
> 赞同：0
> 
> 时间：2012-09-11T12:05:39.397
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一张地图，并在其中放置了多个注释。当我选择一个注释并点击披露按钮时，会出现一个包含表格视图的新视图（DetailViewController）。我想要的是，当 DetailViewController 打开时，直接选择所选注释的描述。

![这是地图和注释，当我标签出现时，显示按钮图像 2 出现，我希望所选注释的描述被选中](../Images/ee4107bcf563c3f3f038b6e0c997c1eb.png)

![在此处输入图像描述](../Images/8b147c14d61f3c7ed4dcca40493577cb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:40:43.780

您可以使用下面的代码来检测在 MKMapView 中何时选择了 MKAnnotation

```
@interface ClassVC ()
{
    int notationTag;
} 

- (void)viewDidLoad
{
    notationTag = 0; //initialisation of variable
}

- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation 
{
    // If it's the user location, just return nil.
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    // Handle any custom annotations.
    if ([annotation isKindOfClass:[MKPointAnnotation class]])
    {
        // Try to dequeue an existing pin view first.
        MKAnnotationView *pinView = (MKAnnotationView*)[mapView dequeueReusableAnnotationViewWithIdentifier:@"CustomPinAnnotationView"];
        if (!pinView)
        {
            // If an existing pin view was not available, create one.
            pinView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"CustomPinAnnotationView"];
            pinView.canShowCallout = YES;
            pinView.image = [UIImage imageNamed:@"mallicon.png"];
            pinView.calloutOffset = CGPointMake(0, 32);
            //pinView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
            pinView.tag = notationTag;
        } else {
            pinView.annotation = annotation;
        }
        notationTag++;
        return pinView;
    }
    return nil;
} 
```

然后在 calloutAccessoryControlTapped.,

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control 
{
    ContactDetails *contact=[[ContactDetails alloc] initWithNibName:@"ContactDetails" bundle:nil];
    contact.name1Str = [NSString stringWithFormat:@"%d",view.tag];
} 
```

在下一个视图中添加这行代码

```
NSIndexPath *index =[NSIndexPath indexPathWithIndex:[name1Str intValue]];
[tableView selectRowAtIndexPath:index animated:NO scrollPosition:UITableViewScrollPositionMiddle]; 
```

**在我的情况下，我使用下面的代码重新加载你也可以尝试**

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{
    self.mapView.centerCoordinate = view.annotation.coordinate;
    NSLog(@"======Tag====%ld", (long)view.tag);
    NSIndexPath* rowToReload = [NSIndexPath indexPathForRow:[view tag] inSection:0];
    [self.collectionView scrollToItemAtIndexPath:rowToReload atScrollPosition:UICollectionViewScrollPositionCenteredHorizontally animated:NO];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:20:59.003

使用此委托方法：

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view{
      AnnotationView *annotation = (AnnotationView *)mapView.annotation;
      NSInteger *yourIndex = annotation.myindex;
} 
```

并推动你的导航控制器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:09:31.890

使用委托方法`didSelectAnnotationView:`并将 detalViewController 推入导航控制器

这会有所帮助。

# php - 仅对字符和数字进行 PHP 字符串控制

> ID：12369330
> 
> 赞同：0
> 
> 时间：2012-09-11T12:05:40.873
> 
> 标签：php, string, replace

> **可能重复：**
> [仅从字符串返回字母数字字符的函数？](https://stackoverflow.com/questions/5199133/function-to-return-only-alpha-numeric-characters-from-string)

从...开始`$string = "hey hello 9times-%&";`

我想替换所有不是数字[0-9] 或 [az,AZ] 类型的字符。

有没有一种很好的方法来展示这种过程控制？

已编辑

我忘了我需要留下空白栏空白，我的意思是：

"hey &/k" 必须返回为 "hey k" 而不是 "heyk"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:07:36.960

```
<?php

$string = "hey hello 9times-%&";
$string = preg_replace('/[^0-9A-Z\s]+/i', '', $string);

echo $string;

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:08:53.007

怎么样`preg_replace`：

```
$clean = preg_replace('/[^0-9a-z\s]/i','',$input); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T12:21:25.920

```
preg_replace('/[^ \w]+/i', '', $string); 
```

这也将起作用。请参阅[键盘示例](http://codepad.org/zuzjvo7n)。

# c# - 替换新属性的值

> ID：12369331
> 
> 赞同：0
> 
> 时间：2012-09-11T12:05:51.407
> 
> 标签：c#, xml, xml-parsing

我的输入是一个字符串，如：`<Identification LastName="Bornery" Name="John" Age="23"/>`我想将其转换为 Xml，然后将其更改为：`<Identification LastName="Bornery" Name="John" Age="40"/>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:24:56.617

这应该可以，但还有很多其他方式。最适合您的将需要更多信息。

```
var xd = XDocument.Parse(@"<Identification LastName=""Bornery"" Name=""John"" Age=""23""/>");
xd.Element("Identification").Attribute("Age").Value = "40";
string result = xd.ToString(); 
```

# c# - 将组合框从 form1 复制到 form2 的最佳方法

> ID：12369332
> 
> 赞同：0
> 
> 时间：2012-09-11T12:05:51.790
> 
> 标签：c#, .net, winforms

首先，我将修饰符属性设置为 form1 上组合框 1 的“内部”。

我使用了以下代码：

```
form1 f1 = new form1();
object[] obj = new object[f1.comboBox1.Items.Count];
f1.comboBox.Items.CopyTo(obj, 0);
comboBox2.Items.AddRange(obj);` 
```

这是最好的方法吗？

PS：我做不到：[在 Windows 窗体中访问另一个窗体上的控件的最佳方法？](https://stackoverflow.com/questions/8566/best-way-to-access-a-control-on-another-form-in-winforms/8573#8573)去工作。

PPS：公开控制不是我喜欢的，也不是我喜欢的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:24:04.670

如果您想要两个包含相同项目的下拉列表，最好将这些项目存储在公共位置并从那里建立两个组合框。

例如

```
public class Context{
  ...
  ...
  public List<Foo> FooItems {
    get{...}
  }
}

public class Form1 {
  ...
  combobox.AddRange(this.context.FooItems);
  ...
}

public class Form2 {
  ...
  combobox.AddRange(this.context.FooItems);
  ...
} 
```

通过这种方式，您可以防止不同表单之间的耦合，并且仍然只有一个位置可以导出列表中的值。

# c# - 在母版页的标签上显示机器名称

> ID：12369333
> 
> 赞同：0
> 
> 时间：2012-09-11T12:05:59.140
> 
> 标签：c#, asp.net

我在母版页上有一个标签，我想在其上显示机器名称。我正在使用它，但它不起作用：

```
<asp:Label ID="Label1" style="font-size: large; color: #009999" runat="server" Text= 'MACHINE NAME IS <%# Environment.MachineName %>' ></asp:Label> 
```

如何纠正它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:11:56.760

`<%#`是一个[数据绑定表达式](http://msdn.microsoft.com/en-us/library/ms178366.aspx)，仅在支持数据绑定的情况下才有效。您的整个页面没有数据源，因此数据绑定失败。

您可以尝试只发出普通的旧 HTML：

```
<span><%= Environment.MachineName %></span> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:13:32.420

看起来您正在使用**数据绑定**标签而不仅仅是标准 HTML 输出标签，请将您的`Text`值更改为：

```
...Text='MACHINE NAME IS <%= Environment.MachineName %>'... 
```

# string - 如何在路径字符串中导入带有字符串插值的 .less 文件？

> ID：12369334
> 
> 赞同：7
> 
> 时间：2012-09-11T12:05:59.593
> 
> 标签：string, import, less, string-interpolation, dotless

如何在路径字符串中导入带有字符串插值的 .less 文件。

```
@folder: "LessFiles"; 
```

我试过这个

```
@import "@{folder}/file.less";

Error:
File Not Found. 
HTTP GET Url is "%7Bfolder%7D/file.less" 
```

和这个：

```
@import formatString("{0}/file.less",@folder);

Error:
Server throws System.NullReferenceException 
```

和这个：

```
@path: "@{folder}/file.less";

@import @path;

Error:
directive block with unrecognised format on line 16 in file 'test.less':
 [15]: 
 [16]: @import @path;
       --------^
 [17]: 
```

任何提示如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-18T14:45:34.547

从 Less 1.4.0 开始，可以使用变量插值`@imports`

**例子**

```
@bacon: "../bacon";

@import @{bacon}/smokey.less; 
```

可以在此处找到更多信息 -[更少的语言功能导入语句](http://lesscss.org/features/#variables-feature-import-statements)

# jquery - 将 SVG 元素作为 Raphael 对象获取

> ID：12369335
> 
> 赞同：2
> 
> 时间：2012-09-11T12:06:03.327
> 
> 标签：jquery, svg, raphael

我在我的项目中使用 Raphael 库创建 SVG。我将 id 设置为 SVG。问题是; 我没有找到通过 Id 将 SVG 对象作为拉斐尔论文的方法。当我像这样使用 jQuery 获取 SVG 时`$(filterId) or $(filterId)[0]`，它返回`SVGSVGElement`Object，所以我不能使用 Raphael 的函数。

```
Raphael("filterDiv", 1100, 1000);
$("svg:last").attr("id","filterId"); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:06:24.407

SVG 元素和 Raphael 对象不是一回事。在创建 Raphael 对象时存储它是个好主意，例如`paper=Raphael("filterDiv", 1100, 1000);`.

# .net - 长时间运行 WF 4 模式

> ID：12369338
> 
> 赞同：0
> 
> 时间：2012-09-11T12:06:20.933
> 
> 标签：.net, .net-4.0, workflow-foundation-4, long-running-processes

我正在努力实现以下目标：

1.  启动一个可能会运行很长时间的工作流，其中包括自定义活动；
2.  这些自定义活动将遵循创建书签并等待其恢复的模式；
3.  返回启动的工作流 id 并将其存储在某处；
4.  在稍后的某个时间点，从其存储的 id 加载工作流；
5.  检查工作流程是否完成，如果没有，检查是否有任何被阻止的书签；
6.  恢复这些书签，从而导致相关活动完成，最终导致整个工作流程完成。

**一个简单的用例是：**审查文档并批准或拒绝它的工作流程。将为此创建一个工作流，通知个人，并且，只要他们愿意，他们可以通过批准或拒绝审查来提供反馈。

我以 Andrew Zhu 的代码为例，可在[http://xhinker.com/post/WF4.aspx](http://xhinker.com/post/WF4.aspx)获得。

我遇到的问题是：

1.  当使用像我描述的那样的自定义活动时，在启动工作流时，`WaitForRunnableInstance`会无限期地等待，所以我从来没有收到通知我的工作流已经开始并被持久化到数据库中；
2.  确实存储了工作流，并且将列`BlockingBookmarks`设置为我的自定义活动的 id，`ExecutionStatus`设置为空闲，`IsInitialized`设置为 1，`IsSuspended`设置为 0，`IsCompleted`设置为 0 并`IsReadyToRun`设置为 0。

我已经开始在 Microsoft 论坛上进行讨论，可以在[http://social.msdn.microsoft.com/Forums/en-US/wfprerelease/thread/6262874d-3493-4be1-bd05-b990307e1875/](http://social.msdn.microsoft.com/Forums/en-US/wfprerelease/thread/6262874d-3493-4be1-bd05-b990307e1875/)上看到并得到一些反馈，但还是有些不对劲。

对此有什么想法吗？对于带有自定义活动的长时间运行的工作流有什么有用的模式吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:53:57.653

这通常是长时间运行的工作流的最小示例，它在控制台上等待用户输入。（此代码从未执行，仅作为示例）

```
/// Activity that waits on bookmark for
/// someone to send it some text
///
public sealed class ReadLine: NativeActivity<string>
{
    [RequiredArgument]
    public InArgument<string> BookmarkName { get; set; }

    protected override bool CanInduceIdle 
    {
        get
        {
            return true;
        }
    }

    protected override void Execute(NativeActivityContext context)
    {
        context.CreateBookmark(
            BookmarkName.Get(context), 
            new BookmarkCallback(OnReadComplete));
    }

    void OnReadComplete(NativeActivityContext context, Bookmark bookmark, object state)
    {
        context.SetValue(base.Result, state as string);
    }
}

/// Program that uses ReadLine activity's bookmark to persist
/// workflow and waits for user input to resume it
///
public class Program
{
    static InstanceStore InstanceStore;
    static Activity Activity = GetExampleActivity();
    static AutoResetEvent unloadEvent = new AutoResetEvent(false);
    static Guid WfId;
    static WorkflowApplication WfApp;

    const string READ_LINE_BOOKMARK = "ReadLineBookMark";

    static void Main()
    {
        CreateInstanceStore();
        CreateWorkflowApp();

        // Start workflow application and wait for input
        StartAndUnload();

        //Get user input and send it to ReadLine bookmark reviving workflow
        GetInputAndComplete();
    }

    static void StartAndUnload()
    {
        WfApp.Run();
        WfId = app.Id;
        // !! Workflow will go idle on bookmark, no need to call Unload()
        unloadEvent.WaitOne();
    }

    static void GetInputAndComplete() 
    {
        var input = Console.ReadLine();

        // We've the text input, let's resume this thing
        WfApp.Load(WfId);
        WfApp.ResumeBookmark(READ_LINE_BOOKMARK, input);

        unloadEvent.WaitOne();
    }

    static void CreateInstanceStore()
    {
        InstanceStore = new SqlWorkflowInstanceStore("connection string");

        var handle = InstanceStore.CreateInstanceHandle();            
        var view = InstanceStore.Execute(
            handle, 
            new CreateWorkflowOwnerCommand(), 
            TimeSpan.FromSeconds(5));            

        handle.Free();

        InstanceStore.DefaultInstanceOwner = view.InstanceOwner;
    }

    static void CreateWorkflowApp()
    {
        WfApp = new WorkflowApplication(Activity)
        {
            InstanceStore = InstanceStore,
        };

        WfApp.PersistableIdle = (e) => { return PersistableIdleAction.Unload; }
        WfApp.Unloaded = (e) => 
        { 
            Console.WriteLine("WF App Unloaded\n");
            unloadEvent.Set(); 
        };
        WfApp.Completed = (e) =>
        {
            Console.WriteLine("\nWF App Ended: {0}.", e.CompletionState);
        };
    }

    static Activity GetExampleActivity()
    {
        var response = new Variable<string>();

        return return new Sequence()
        {
            Variables = { response },
            Activities = 
            { 
                new WriteLine()
                { 
                    Text = new InArgument<string>("Type some word:") 
                },
                new ReadLine() 
                { 
                    BookmarkName = READ_LINE_BOOKMARK, 
                    Result = new OutArgument<string>(response)
                },
                new WriteLine()
                {
                    Text = new InArgument<string>((context) => "You've typed: " + response.Get(context))
                }
            }
        };
    } 
```

话虽如此，请考虑使用 IIS 和 AppFabric，您不会后悔的。AppFabric 只需单击六次，就可以处理在 WF 中实现的两个必须痛苦的事情：持久性和监控。如果您选择此路径，您将永远不需要编写下面的代码。

将您的工作流部署为 WCF 应用程序，您只需将其称为任何其他 WCF 合同。您有*OperationContracts*，它们是接收活动（如果花费太长时间则等待并坚持的活动）和相应的发送活动（将值返回给客户端的活动）。你甚至有它们之间的相关性的概念。AppFabric 负责恢复工作流，只需将先前初始化的关联句柄传递给它。

AppFabric 为您提供了一个配置 UI 来配置持久性存储、监控和其他选项，例如在空闲和/或持续多长时间之前。

您可以可视化 Active/Idle/Suspended 工作流、监控数据等。

# css - CSS 悬停弹出窗口

> ID：12369341
> 
> 赞同：0
> 
> 时间：2012-09-11T12:06:27.690
> 
> 标签：css

[我已经创建了这里](http://jsfiddle.net/umeshpatil86/FuaRJ/1/)给出的 CSS onHover 弹出窗口。但问题是，用户应该能够单击示例中的注册[链接](http://jsfiddle.net/umeshpatil86/FuaRJ/1/)。在这里，当我从链接中移动鼠标感知时，弹出窗口消失了。谁能告诉它如何实现？

HTML：

```
<div class="how  f-left">
<h7><a href="how-it-works">How does this work?</a></h7>
<div class="how-works bubble-outer">
<div class="navigation-up-arrow"></div>
<div class="body">
<h4>How It Works</h4>
<ol class="bubble-inner">
<li>Tell Us What's Wrong </li>
    <li class="">  <a href="#">Register</a> to Get Quotes from Local Shopshere  </li>
<li class=" bold-txt ">Call Shop / Get Vehicle Serviced </li>
<li>Get Cash Back </li>
</ol>
</div>
</div>
</div> 
```

下面的 CSS 用于 onHover PopUp：

```
.how h7:hover + .how-works {
    display: block;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T12:11:54.730

您可以让它在悬停父级 ( `.how`) 时显示，而不仅仅是其前一个兄弟级。当您悬停其任何后代（链接、`.how-works`、 的任何子级`.how-works`）时，会悬停父级。

为此，请更改：

```
.how h7:hover + .how-works {
    display: block;
} 
```

到：

```
.how:hover .how-works {
    display: block;
} 
```

## [*演示*](http://jsfiddle.net/thebabydino/FuaRJ/3/)

* * *

此外，如果你想让它适用于触摸屏（没有`hover`），你可以调整一下你的 HTML。改变

```
<h7><a href="how-it-works">How does this work?</a></h7> 
```

到

```
<a class="how-it-works" href="#" tabindex="1"><h7>How does this work?</h7></a> 
```

并将其添加到 CSS 中：

```
.how-it-works:focus + .how-works {
    display: block;
} 
```

[**演示**](http://jsfiddle.net/thebabydino/FuaRJ/8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T12:13:45.483

将此添加到您的 CSS 中：

```
.how-works:hover {
    display: block;
} 
```

您的演示的修改版本：[小链接](http://jsfiddle.net/glee/bbQCL/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:19:43.753

这是一个工作示例[链接](http://jsfiddle.net/FuaRJ/6/)。

放

```
.how:hover .how-works {
    display: block;
} 
```

代替

```
.how h7:hover + .how-works {
    display: block;
} 
```

并将`position: relative; top: 0px;`css属性添加到`.how .how-works.bubble-outer{ ... }`

# ruby-on-rails - 使用 Ruby on Rails 重新生成静态缓存的最佳方式是什么？

> ID：12369344
> 
> 赞同：0
> 
> 时间：2012-09-11T12:06:40.670
> 
> 标签：ruby-on-rails, caching

我有一个相当慢的控制器动作，它在这里和那里做一些报告。我只需要每隔几天刷新一次数据，所以静态缓存结果是很容易的。

问题是，该操作需要几分钟才能完成，我不确定使旧数据过期并用新数据替换它们的最佳方法是什么。

现在，仅通用过期/请求的问题是几分钟（操作运行的时间）这些数据不可用。

是否有任何合理的方法可以仅使用 Rails 中的静态缓存机制来克服这一差距？还是我应该以不同的方式重建整个事物？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T11:23:11.020

Rails 有一种内置方法，可以在旧缓存过期时使用更长的时间，同时重新生成新的缓存值。它是与`:race_condition_ttl`结合使用的设置`:expires_in`，如[Rails Guides on Caching](http://guides.rubyonrails.org/caching_with_rails.html#activesupport-cache-store)中所述。

使用 Rails 片段缓存，语法应该是：

```
<% cache 'my_awesome_cache_key', :expires_in => 12.hours.to_i, :race_condition_ttl => 12.hours.to_i %>
  # This block will be cached
<% end %> 
```

结果：

*   1）第一个请求：缓存为空，因此将执行块并将结果写入缓存
*   2）接下来 24 小时内的所有请求：将直接从缓存中提供服务（这是新鲜的）
*   3a) 24 小时后**但在宽限期内**的第一个请求将从当时稍微陈旧的缓存中提供服务；缓存将在后台重新生成：块在完成后立即执行并写入缓存
*   3b) 24小时后**但超出宽限期的**第一次请求将按1)处理，即不直接服务但会执行block，写入缓存并服务请求。

`race_condition_ttl`引入是为了防止多个进程同时重新生成缓存，这将导致所有进程一次从数据库中读取数据等。但我认为它应该适合您的情况。

如何选择时间`:expires_in`和`:race_condition_ttl`是你的选择，我建议这样计算：`expires_in + race_condition = expires_in_that_you_would_usually_set`. 这样，缓存会更频繁地重新生成，但也更新鲜，特别是如果动作/视图不经常呈现。

# sql - 从 SQL 服务器读取 DBF 文件会妨碍实际文件吗？

> ID：12369349
> 
> 赞同：0
> 
> 时间：2012-09-11T12:06:55.817
> 
> 标签：sql, performance, dbf

所以我读到这样的数据：

1.  在读取本地 dbf 文件的本地服务器上创建一个视图。
2.  然后我通过“主”服务器上的链接服务器从该视图中选择数据，然后我可以将其插入到主服务器上的一些真实表中

这会破坏或妨碍原始本地 .dbf 文件的性能吗？这些文件为另一个应用程序（不是我的）实时使用和更新。

（如果是这种情况，我只记得一个可能的解决方案：我可以复制 dbf 文件，然后从副本中选择数据，但这意味着额外的 .bat 或 .exe。）

# javascript - html + javascript：如何在某些条件下禁用下拉列表中的空选项

> ID：12369350
> 
> 赞同：1
> 
> 时间：2012-09-11T12:06:57.947
> 
> 标签：javascript, jquery, html

我有十几个 dropdownlinst 的 html 页面

其中之一是

```
@Html.DropDownListFor(model => model.PrimaryNetworkInt, new SelectList(ViewBag.AvailableNetworks, "ID", "Name"), "Offline") 
```

第二个存储一些其他值，当我将其更改为“AAA”时，我必须首先禁用选择 NULL 选项（即“离线”）的能力（如果选择了其他值，则将其返回）

选择逻辑工作正常：

```
$('#SecondDDList').change(function () { SecondDDListChanged(); });

var SecondDDListChanged() = function(){
    //...
    if ($('#SecondDDList').val()==-1){ //-1 i.e == "AAA" in my example
        //Here i need logic to disable NULL selection
    } else {
        //Here i need enable NULL option
    }
} 
```

有什么更好的方法呢？可能是这样的：

```
$("#PrimaryNetworkInt option[value=null]").attr("disabled", "disabled"); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:23:10.770

```
jQuery(function () {
    jQuery('#SecondDDList').find("option").each(function () {
        if (jQuery(this).val() == -1 || jQuery(this).val() == "null" ) {
            jQuery(this).attr("disabled", true);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:48:28.957

您可以使用**.show()**和.hide( **)**方法确保用户可以（或不能）选择值

```
$("#PrimaryNetworkInt").change(function() {
    if ($(this).val()==-1){ //-1 i.e == "AAA" in my example
        $("#PrimaryNetworkInt option[value='null']").hide();
    } else {
        $("#PrimaryNetworkInt option[value='null']").show();
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T16:10:40.263

要禁用特定选项，只需设置其`disabled`属性。

```
var SecondDDListChanged() = function(){
    //...
    if ($('#SecondDDList').val()==-1){ //-1 i.e == "AAA" in my example
        $("#optionId").attr("disabled", "disabled");
    } else {
        $("#optionId").removeAttr("disabled", "disabled");
    }
} 
```

# jquery - 使用 jquery 在网格中加载数据

> ID：12369353
> 
> 赞同：0
> 
> 时间：2012-09-11T12:07:07.533
> 
> 标签：jquery, forms, grid

我正在使用 jqwidgets。那里有一个不错的网格小部件，我想使用它。要使用网格，我使用演示代码：

```
 $(document).ready(function () {
        var theme = getTheme();
        var url = "../sampledata/data.php";
        // prepare the data
        var source =
        {
            datatype: "json",
            datafields: [
                { name: 'firstname' },
                { name: 'lastname' },
                { name: 'productname'},
                { name: 'quantity', type: 'int' },
                { name: 'price', type: 'float' },
                { name: 'total', type: 'float' }
            ],
            id: 'id',
            url: url,
            root: 'data'
        };
        var dataAdapter = new $.jqx.dataAdapter(source);
        $("#jqxgrid").jqxGrid(
        {
            width: 670,
            source: dataAdapter,
            theme: theme,
            columnsresize: true,
            columns: [
              { text: 'First Name', dataField: 'firstname', width: 100 },
              { text: 'Last Name', dataField: 'lastname', width: 100 },
              { text: 'Product', dataField: 'productname', width: 180 },
              { text: 'Quantity', dataField: 'quantity', width: 80, cellsalign: 'right' },
              { text: 'Unit Price', dataField: 'price', width: 90, cellsalign: 'right', cellsformat: 'c2' },
              { text: 'Total', dataField: 'total', cellsalign: 'right', minwidth: 100, cellsformat: 'c2' }
            ]
        });
    }); 
```

这很完美。但是现在我想在按下表单中的按钮时加载网格。

```
<form action="" method="post">
<select name="city">
<option value="amsterdam">amsterdam</option>
<option value="rotterdam">rotterdam</option>
<option value="denhaag">den haag</option>
<option value="eindhoven">eindhoven</option>
</select>
<input name="Submit" type="submit" value="Find family" /></form> 
```

因此，当我选择 amsterdam 时，它应该将 data.php?city=amsterdam 加载到网格中。

我可以使用 iframe 来做到这一点，但是有没有办法在我只重新加载网格的一个页面中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:13:55.870

JS：

```
$(document).ready(function () {
  $("#submit").click(function(){
    var theme = getTheme();
    var url = "../sampledata/data.php?city="+$("city").val();
    // prepare the data
    .............
  })      

}); 
```

HTML：

```
<select name="city" id="city">
  .....
</select>
<input name="Submit" type="submit" value="Find family" id="submit" /></form> 
```

# gwt - 如何提高 smartgwt listgrid 的性能

> ID：12369363
> 
> 赞同：2
> 
> 时间：2012-09-11T12:07:49.927
> 
> 标签：gwt, smartgwt, listgrid

我必须显示大约 30,000 条记录。我正在使用`datasource.setdata()`来设置记录。我的 listgrid 从附加的数据源中获取记录。但我面临一个性能问题。显示记录需要太多时间，如果我更新记录，那么我的浏览器（IE 和 firefox）都会挂起。
这个问题的可能解决方案是什么？

这些记录仅在客户端。我必须对记录进行一些操作，然后我必须保存。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:11:46.560

没有像 DataSource.setData() 这样的东西..

最好的方法是实现分页，这样您就不会将所有 30,000 条记录都加载到浏览器中。这也将提高服务器性能，因为当大多数用户只查看少量记录时，服务器不必提供如此大的数据集。要了解如何执行所有这些操作，请查看 SmartGWT 快速入门指南并关注数据绑定和数据集成章节。

如果由于某种原因您必须加载 30,000 条记录，您最好鼓励您的用户不要使用 IE。然后，使用仅限客户端的数据源。

至于某种“更新时挂起”，您需要更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:50:03.110

中没有`Paging`组件`Smartgwt`，你必须自己实现它。我遇到了和你一样的问题。

解决方案是模拟`Paging`：客户不检索**30,000 条记录**，而是要求前**100 条记录**。当用户滚动到底部时`listGrid`（有滚动事件），客户端向服务器询问接下来的**100 条记录**等。

# spring - 从 Struts 2.x 更改为 Spring 3x MVC

> ID：12369369
> 
> 赞同：2
> 
> 时间：2012-09-11T12:08:02.420
> 
> 标签：spring, spring-mvc

嗨，我是 Spring MVC 注释的新手。我现在正在分配将 Stuts 2.x 控制器部分移动到基于 Spring 注释的任务，我在会话时遇到了麻烦。我使用了 struts2，我使用了 session 感知，它存储了 map vales。在春天，我该如何实现任何人都可以帮助我。...如果有人在一周内回复...对我更有帮助。这是我的 struts 2.x 动作类。

```
import java.util.HashMap; 
import java.util.Map; 
import org.springframework.beans.factory.annotation.Autowired; 
import com.cmt.admin.business.AdminService; 
import com.cmt.admin.dao.User; 
import com.cmt.common.constants.CommonConstants; 

public class LoginAction extends CMTAction { 
    private String userName; 
    private String profileName; 
    private String password; 
    private Map<String, String> securityData; 
    String pageName = CommonConstants.INDEX; 
    private String menuName; 

    @Autowired private AdminService cmtAdminService; 

    @Override 
    @SuppressWarnings("unchecked") 
    public String execute() throws Exception { 
        if((userName==null || (CommonConstants.EMPTY_STRING).equals(userName)) && (password==null || (CommonConstants.EMPTY_STRING).equals(password))) { 
            return CommonConstants.INVALID; 
        } 

        Map<String, Map<String, String>> securityData = new HashMap<String, Map<String, String>>(); 
        String returnStatus = CommonConstants.SUCCESS; 
        Map<String,Object> resultData = null; 
        Boolean validUser = false; 
        this.getSession().put(CommonConstants.MENU_NAME, CommonConstants.HOME); 
        resultData = cmtAdminService.loginProcess(userName, password,profileName); 
        validUser = (Boolean) resultData.get(CommonConstants.IS_VALID_USER); 
        if (validUser) { 
            User logggedUser = (User) resultData.get(CommonConstants.LOGGED_INUSER); 
            this.getSession().put(CommonConstants.LOGGED_INUSER, logggedUser); 
            securityData = (HashMap<String, Map<String, String>>) resultData.get( CommonConstants.SECURITY_DATA); 
            this.getSession().put(CommonConstants.SECURITY_DATA, securityData); 
            returnStatus = getPageSecurityData(pageName); return returnStatus; 
        } else { 
            showErrorMessage(CommonConstants.INVALID_USERNAME_PASSWRD_ERROR); 
            return CommonConstants.INVALID; 
        } 
    } 

    public String index() { 
        return CommonConstants.INDEX; 
    } 

    public String home() throws Exception { 
        if (this.getSession()==null || this.getSession().get(CommonConstants.LOGGED_INUSER) == null || "".equals(this.getSession().get(CommonConstants.LOGGED_INUSER))) { 
            return CommonConstants.INVALID; 
        } 
        String returnStatus = CommonConstants.SUCCESS; 
        returnStatus = getPageSecurityData(pageName); 
        return returnStatus; 
    } 

    private String getPageSecurityData(String pageName) throws Exception { 
        String returnStatus = CommonConstants.SUCCESS; 
        Map<String, Map<String, String>> securtyData = new HashMap<String, Map<String, String>>(); 
        Map<String, Object> resultData = new HashMap<String, Object>(); 
        Map<String, String> currentPageSecurty = new HashMap<String, String>(); 
        securtyData = (HashMap<String, Map<String, String>>) this.getSession().get( CommonConstants.SECURITY_DATA); 
        resultData = cmtAdminService.getPageSecurityData(securtyData,pageName); 
        currentPageSecurty = (HashMap<String, String>) resultData .get(CommonConstants.CURRENT_PAG_SECRTY_INFO); 
        returnStatus = (String) resultData.get(CommonConstants.PAGE_ACTION); 
        setSecurityData(currentPageSecurty); 
        setMenuName((String) this.getSession().get(CommonConstants.MENU_NAME)); 
        return returnStatus; 
    } 

    public String getMenuName() { 
        return menuName; 
    } 
    public void setMenuName(String menuName) { 
        this.menuName = menuName; 
    } 
    public Map<String, String> getSecurityData() { 
        return securityData; 
    } 
    public void setSecurityData(Map<String, String> securityData) { 
        this.securityData = securityData; 
    } 
    public void setUsername(String value) { 
        this.userName = value; 
    } 
    public String getUsername() { 
        return userName; 
    } 
    public void setPassword(String password) { 
        this.password = password;             
    } 
    public String getPassword() { 
        return password; 
    }
    public String getProfileName() { 
        return profileName; 
    } 
    public void setProfileName(String profileName) { 
        this.profileName = profileName; 
    } 
} 
```

这是我的 CMTAction 课程

```
 package com.cmt.admin.web.action;

import java.util.Map;

import org.apache.struts2.interceptor.SessionAware;

import com.cmt.admin.dao.User;
import com.cmt.common.constants.CommonConstants;
import com.opensymphony.xwork2.ActionSupport;

public class CMTAction extends ActionSupport implements SessionAware
{

    // This Map will contain vales in Session
    private Map<String, Object> sessionMap;

    protected User getLoggedInUser()
    {

        User user = (User) this.getSession().get(CommonConstants.LOGGED_INUSER);
        return user;
    }

    protected void showActionMessage(String message)
    {
        addActionMessage(message);
    }

    protected void showErrorMessage(String message)
    {
        addActionError(message);
    }

    @Override
    public void setSession(Map<String, Object> session)
    {
        this.sessionMap = session;
    }

    public Map<String, Object> getSession()
    {
        return sessionMap;
    }

} 
```

这是我的 struts.xml 文件

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>

    <constant name="struts.enable.DynamicMethodInvocation" value="false" />
    <constant name="struts.devMode" value="false" />
    <constant name="struts.objectFactory" value="spring" />
    <constant name="struts.ui.theme" value="css_xhtml" />
    <constant name="struts.custom.i18n.resources" value="resources.message,resources.label" />
    <package name="default" namespace="/" extends="struts-default,json-default">

        <interceptors>
            <interceptor name="sessionTimedOut"
                class="com.cmt.common.interceptors.SessionTimeOutInterceptor" />
            <interceptor name="sessionCheck" class="com.cmt.common.interceptors.SessionCheckInterceptor"/>
            <interceptor-stack name="CMTStack">
                <interceptor-ref name="defaultStack" />
                <interceptor-ref name="sessionTimedOut" />
                <interceptor-ref name="sessionCheck" />
            </interceptor-stack>
        </interceptors>
        <default-interceptor-ref name="CMTStack"/>
        <default-action-ref name="index" />
        <global-results>
            <result name="index">/jsp/admin/pgLogin.jsp</result>
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result name="sessionTimedOut">/jsp/admin/pgSessionTimedOut.jsp</result>
            <result name="invalid">/jsp/admin/pgLogin.jsp</result>
            <result name="uploadCodeComments">/jsp/iConfigure/pgUploadCode.jsp</result>

        </global-results>

        <global-exception-mappings>
            <exception-mapping exception="java.lang.Exception"
                result="error" />
        </global-exception-mappings>

        <action name="index" method="index" class="LoginAction">
            <result name="index">/jsp/admin/pgLogin.jsp</result>
            <result name="error">/jsp/admin/pgError.jsp</result>
        </action>
        <action name="Login" method="execute" class="LoginAction">
            <result name="success">/jsp/admin/pgIndex.jsp</result>
            <result name="error">/jsp/admin/pgError.jsp</result>
        </action>
        <action name="Logout" method="logout" class="LogoutAction">
            <result name="success">/jsp/admin/pgLogin.jsp</result>
            <result name="error">/jsp/admin/pgError.jsp</result>
        </action>       
        <action name="home" method="home" class="LoginAction">
            <result name="success">/jsp/admin/pgIndex.jsp</result>
            <result name="error">/jsp/admin/pgError.jsp</result>
        </action>
        <action name="search" method="execute" class="SearchAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result name="success">/jsp/iCRL/pgiCRL.jsp</result>
        </action>
        <action name="icrl" method="search" class="SearchAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result name="success">/jsp/iCRL/pgiCRL.jsp</result>
        </action>
        <action name="searchCodes" method="searchCodes" class="SearchAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result name="success" type="json"></result>
        </action>
        <action name="searchicrl" method="submitPage" class="SearchAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result name="success" type="json"></result>
        </action>

        <action name="iconfdtl" method="retrieveIConfigureDetails" class="IConfigureAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result name="success">/jsp/iConfigure/pgiConfigureReviewStep2.jsp
            </result>
        </action>
        <action name="retrieveCodeList" method="retrieveCodeList" class="IConfigureAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result name="success" type="json">
            </result>
        </action>

        <action name="filterassc" method="filterAssociationCodes" class="IConfigureAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result name="success" type="json">
            </result>
        </action>

        <action name="codeSearch" method="retrieveIConfigureDetails" class="IConfigureAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result name="invalid">/jsp/admin/pgSessionTimedOut.jsp</result>
            <result name="success">/jsp/iConfigure/pgiConfigureReviewStep2.jsp
            </result>
        </action>

        <action name="iconfaddcategory" method="retrieveIConfigureViewDetails"
            class="IConfigureAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result name="success">/jsp/iConfigure/pgiConfigureCategory.jsp</result>
        </action>

        <action name="iconfviewdtl" method="retrieveIConfigureViewDetails"
            class="IConfigureAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result type="json" name="success"></result>
        </action>
        <action name="reloadconfdtl" method="retrieveIConfigureViewDetails"
            class="IConfigureAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result type="json" name="success"></result>
        </action>

        <action name="populateaddnew" method="showAddNewForm" class="IConfigureAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result type="json" name="success"></result>
        </action>
        <action name="editaddnew" method="populateEditAssociationData" class="IConfigureAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result type="json" name="success"></result>
        </action>
        <action name="saverow" method="saveRowData" class="IConfigureAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result name="success">/jsp/iConfigure/pgiConfigureReviewStep2.jsp</result>
        </action>
        <action name="editassoc" method="saveEditedAddNewData" class="IConfigureAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result type="json" name="success"></result>
        </action>

    <action name="populateOrgUnit" method="populateOrgUnit" class="IConfigureAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result type="json" name="success"></result>
        </action>
     <action name="populateUserAccount" method="populateUserAccount" class="IConfigureAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result name="invalid">/jsp/admin/pgSessionTimedOut.jsp</result>
            <result type="json" name="success"></result>
    </action>

        <action name="addassoc" method="saveNewCodeAssociation" class="IConfigureAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result type="json" name="success"></result>
        </action>
        <action name="saveNewCategory" method="saveNewCategory" class="IConfigureAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result type="json" name="success"></result>
        </action>

        <action name="codeView" method="getCodeViewDetails" class="CodeViewAction">
            <result name="success">/jsp/iCRL/pgiCRLDetailView.jsp</result>
            <result name="error">/jsp/admin/pgError.jsp</result>
        </action>
                <action name="iPolicyStepThreeSubmit" class="IPolicyAction" method="iPolicyList" >               
            <result name="success">/jsp/iPolicy/pgiPolicyDetailsStep4.jsp</result>
            <result name="error">/jsp/admin/pgError.jsp</result>
        </action>
        <action name="iPolicyStepFourSubmit" class="IPolicyAction" method="iPolicyList" >                
            <result name="success">/jsp/iPolicy/pgiPolicy.jsp</result>
            <result name="error">/jsp/admin/pgError.jsp</result>
        </action>

        <action name="findCategoryName" method="findCategoryName" class="IConfigureAction">
            <result name="error">/jsp/admin/pgError.jsp</result>
            <result type="json" name="success"></result>
        </action>

    </package>

</struts> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:55:44.570

我在我的控制器上使用[SessionAttributes](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/bind/annotation/SessionAttributes.html)注释让 spring 在会话中保留一些我将放在我的模型中的属性。当它们被放入模型或注入控制器方法时，Spring 透明地从会话中放置和检索这些属性。正如 javadoc 所指出的，当属性要在会话中临时设置时，这是一个好方法，它建议另一种方法直接访问会话以获取应该永久存储的属性。[此方法在此处](https://stackoverflow.com/questions/8680529/spring-mvc-http-session-management-equivalent)进行了足够详细的描述。

您可能应该这样做。

或者，例如，对于您的安全数据，您可以在 java.util.HashMap 类型的应用程序上下文中创建一个会话范围的 bean，然后将其注入到您的控制器中。我不知道这是否是一个好习惯，但优点是您可以在需要时将此 bean 注入服务中。

# list - 来自 ant 属性的列表项索引

> ID：12369371
> 
> 赞同：0
> 
> 时间：2012-09-11T12:08:14.503
> 
> 标签：list, ant, ant-contrib

我有一个 ant 参数，其值列表如下。

```
releases=release1,release2 
```

我使用下面的 for 循环来处理这些值。

```
<for list="${releases}" param="release">
  <sequential>
    <echo>Processing @{release}</echo>
  </sequential>
<for> 
```

我想做类似的事情，我只想在 @{release}=release2 时回显下面的语句

```
<echo>Processing last release</echo> 
```

我不太确定如何获取列表项的索引，或者是否有可能。

在此先感谢， 巴拉吉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:37:55.660

就这样？而且，您已经在使用 Ant-Contrib 任务了。看一下[PropertyRegEx](http://ant-contrib.sourceforge.net/tasks/tasks/propertyregex.html)任务。这就是 Ant-Contrib 任务，它将完全按照您的意愿行事：

```
<propertyregex property="last.release"
     input="${releases}"
     regexp=".*,(.*)"
     select="\1"/> 
```

这将设置`${last.release}`为字符串中的最后一个版本。

小心为空或与您的正则表达式不匹配的字符串！您可以使用 Ant-Contrib`if`任务进行测试：

```
<propertyregex property="last.release"
     input="${releases}"
     regexp=".*,(.*)"
     select="\1"/>
<if>
    <isset property="last.release"/>
    <then>
        <echo>The last release is ${last.release}</echo>
    </then>
    <else>
        <fail>Oops! Something didn't work...</fail>
    </else>
</if> 
```

# try-catch - 在写“尝试”时，为什么我们总是要写“捕获”？

> ID：12369372
> 
> 赞同：0
> 
> 时间：2012-09-11T12:08:15.027
> 
> 标签：try-catch

最近我与一位开发人员进行了一次有趣的对话，他告诉我每次编写“尝试”时都必须提供“捕获”。他无法解释为什么会有这条规则。他告诉我，这是一个好的编程原则。为什么有这个规则？

*供你参考，我不同意他的看法。我认为有时你可以编写一个只有“finally”块的“try”块。但我确实认为如果你写了一个“catch”，你必须在你的 catch 中做一些事情。永远不要只是重新抛出错误。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T12:10:10.767

您是对的：`catch`如果您不知道如何处理异常并且只想确保`finally`执行您的子句，则不需要编写子句。

添加一个`catch`子句只是为了重新抛出异常是不好的做法。

顺便说一句，为了说明这实际上与两个不同的（当然不是外来的）问题有关，请注意，某些语言使用不同的构造来捕获异常并确保执行某些代码（通常是资源释放）`catch`。`finally`去使用`defer`例如。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-11T12:10:56.187

在大多数应用程序中`try/finally`，构造的数量远远多于`try/catch`构造。

因为拥有要清理的资源比接收您知道如何处理的异常要常见得多。

但是在 C# 中`try/finally`几乎总是可以替换为 `using`但这绝对不是“良好编程的原则”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T12:13:18.917

```
try
{
    ...
}
finally
{
    ...
} 
```

使您有机会在 finally 块中执行代码，否则如果在 try 块中引发异常，这些代码将被错过。如果发生异常时有特定的事情要做，则只需要添加一个 catch 块。

# iphone - 如何计算 iPhone 中的通话语音分钟数

> ID：12369373
> 
> 赞同：3
> 
> 时间：2012-09-11T12:08:22.250
> 
> 标签：iphone, ios

我正在构建一个生成设备使用报告的应用程序。我想计算用户使用 iPhone 来电和去电的语音分钟数。任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:18:49.640

您无法访问此类信息。它不被 iOS SDK 公开。

# scala - 演员应该如何通知发件人错误？

> ID：12369375
> 
> 赞同：3
> 
> 时间：2012-09-11T12:08:27.007
> 
> 标签：scala, exception, error-handling, actor, akka

我是演员模型的新手，我想知道应该如何处理运行时错误。

假设actor捕获了异常，那么它应该怎么做呢？

我绝对希望将任何错误通知发件人，因此，至少发件人可以记录错误。

所有响应消息都应该包含`status`字段还是应该为我的应用程序中的每个响应消息都存在`XXXErrorMessage`类？

演员模型中错误处理的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:13:09.213

你应该在谷歌上搜索“erlang supervisor design”，因为 Actor 模型主要是用 erlang 铺设的。然后，您可以将所描述的知识应用到 Akka 演员（正在成为 Scala 2.10 中的标准演员库）。另请阅读上述关于[监督](http://doc.akka.io/docs/akka/2.0.3/general/supervision.html)和[容错](http://doc.akka.io/docs/akka/2.0.3/scala/fault-tolerance.html)的评论 akka 文档。

或者，您可以选择不使用 Actors，而是使用[`Future`](http://doc.akka.io/docs/akka/2.0.3/scala/futures.html)更容易组合的 s。然后您将拥有`Future[Either[E, A]]`类型，您可以使用[scalaz](https://github.com/scalaz/scalaz/tree/scalaz-seven) + [akkaz](https://github.com/robinp/akkaz)`EitherT[Future, E, A]`将其视为组合的monad 类型，并将其用于例如理解。

如果我预计会有很多失败，我会选择 Actors，需要重新启动和重试，必须封装可变状态等。如果你不需要这些，你可以回退到`Future`s 并有一个更好的睡眠。

# r - 带有 ggplot2 的多面 qqplots

> ID：12369377
> 
> 赞同：2
> 
> 时间：2012-09-11T12:08:31.757
> 
> 标签：r, statistics, ggplot2

假设我有以下数据：

```
datapoints1 = data.frame(categ=c(rep(1, n), rep(2, n)), vals1=c(rt(n, 1, 2), rnorm(n, 3, 4)))
datapoints2 = data.frame(categ=c(rep(1, n), rep(2, n)), vals2=c(rt(n, 5, 6), rnorm(n, 7, 8))) 
```

使用`ggplot2`，我如何使用该`facet`功能在单个命令中创建两个 QQ 图，即一个具有两个*t*样本，另一个具有两个高斯样本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T12:37:03.013

首先，合并两个数据框：

```
dat <- cbind(datapoints1, vals2 = datapoints2[ , 2]) 
```

然后，对数据进行排序：

```
dat_sort <- do.call("rbind", lapply(unique(dat$categ), FUN = function(x) {data.frame(categ = x, vals1 = sort(dat$vals1[dat$categ == x]), vals2 = sort(dat$vals2[dat$categ == x]))})) 
```

如果两个样本向量的长度相同，这很简单：

```
ggplot() + 
 geom_point(data = dat_sort, aes(x = vals1, y = vals2)) +
 facet_wrap( ~ categ, scales = "free") 
```

一个例子`n = 1000`：

![2个QQ图](../Images/64a32f7b0a6ecaf296a8d8ed0852b467.png)

# android - 如何将视频文件上传到 android 中的 wowza 媒体服务器？

> ID：12369378
> 
> 赞同：3
> 
> 时间：2012-09-11T12:08:35.597
> 
> 标签：android, live-streaming, android-video-player

嗨，我对 wowza 媒体服务器很陌生。任何人都可以告诉我如何使用 wowza 在 android 中上传视频文件或直播吗？提前致谢。

# java - 为什么 Android 的 WebView 不加载某些 URL？

> ID：12369379
> 
> 赞同：6
> 
> 时间：2012-09-11T12:08:42.507
> 
> 标签：java, android, android-webview

我`WebView`的没有显示一些 URL，尤其是当它`www.`缺少前导部分时。`http://google.com`不加载但`http://www.google.com`加载得很好。我在 logcat 中没有收到任何异常或消息，因此似乎很难找出幕后发生的事情。这是实际显示我的`WebView`.

```
WebView wbvBrowser = new WebView(this.objContext);
wbvBrowser.getSettings().setBuiltInZoomControls(true);
wbvBrowser.getSettings().setJavaScriptEnabled(true);
wbvBrowser.loadUrl("http://google.com"); 
```

有谁知道是什么导致了这个问题？我很困惑。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-21T13:49:41.243

启用 DOM 存储 API

```
wbvBrowser.setDomStorageEnabled(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-19T17:19:20.600

确保应用程序有权访问 Internet。将以下内容添加到 AndroidManifest.xml：

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:20:37.443

尝试这个...

```
wbvBrowser.setWebViewClient(new Callback());
private class Callback extends WebViewClient{  //HERE IS THE MAIN CHANGE. 

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        return (false);
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-21T01:38:38.697

这对我有用：在 http 中添加一个“s”。让它https

```
wbvBrowser.loadUrl("https://google.com"); 
```

# node.js - 找不到 bower 命令

> ID：12369390
> 
> 赞同：164
> 
> 时间：2012-09-11T12:09:11.193
> 
> 标签：node.js, npm, bower

我试图在我的 Mac 上安装 twitter bower，我用

```
npm install bower -g 
```

然后我试`bower --help`了一下，结果是`bower command not found`。这是为什么？

* * *

## 回答 #1

> 赞同：373
> 
> 时间：2013-12-17T07:17:01.540

就像在这个问题（[npm 全局路径前缀](https://stackoverflow.com/questions/14803978/npm-global-path-prefix)）中一样，您只需正确设置`npm prefix`。

**UNIX：**

```
$ npm config set prefix /usr/local
$ npm install -g bower

$ which bower
>> /usr/local/bin/bower 
```

**Windows 和 NVM：**

```
$ npm config set prefix /c/Users/xxxxxxx/AppData/Roaming/nvm/v8.9.2
$ npm install -g bower 
```

然后`bower`应该位于您的`$PATH`.

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-12-05T00:20:29.737

我几乎可以肯定您实际上并没有正确安装它。由于您尝试全局安装它，因此您需要使用 sudo 运行它：

```
sudo npm install -g bower 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-07-02T19:05:44.133

或者，您可以使用`npx`npm > 5.6 附带的。

`npx bower install`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-18T21:30:36.340

事实证明这不是凉亭问题，尽管凉亭出现在我身上。

这似乎是一个节点-哪个问题。如果文件在路径中，但设置了 setuid/setgid 位，则不会找到它。

这是一个设置了 s 位的文件：（unix 'which' 会毫无问题地找到它）。

> ls -al /usr/local/bin -rwxrwsr-- 110 root nmt 5535636 2012 年 7 月 17 日 git

这是一个节点尝试：

```
> which.sync('git')
Error: not found: git 
```

我更改了权限（chomd 755 git）。现在 node-which 可以找到它。

```
> which.sync('git')
'/usr/local/bin/git' 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-27T23:53:57.137

我正在使用节点版本管理器。我收到此错误消息是因为我已切换到不同版本的节点。当我切换回安装 bower 的节点版本时，此错误消失了。就我而言，命令是`nvm use stable`

# styles - Windows Phone ProgressBar 样式背后的代码

> ID：12369396
> 
> 赞同：0
> 
> 时间：2012-09-11T12:09:23.357
> 
> 标签：styles, progress-bar, windows-phone

我需要帮助来在运行时更改我的 progressBar 样式（Windows Phone）。

有什么例子吗？这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:12:09.820

XAML 上的样式：

```
 <phone:PhoneApplicationPage.Resources>
    <ControlTemplate x:Key="PhoneProgressBarSliderThumb" TargetType="Thumb">
        <Rectangle Fill="{TemplateBinding Foreground}" Height="24" IsHitTestVisible="False" Width="24"/>
    </ControlTemplate>
    <Style x:Key="PhoneProgressBarSliderStyle" TargetType="Slider">
        <Setter Property="Maximum" Value="3000"/>
        <Setter Property="Minimum" Value="0"/>
        <Setter Property="Value" Value="0"/>
        <Setter Property="Opacity" Value="0"/>
        <Setter Property="IsTabStop" Value="False"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Slider">
                    <Grid IsHitTestVisible="False">
                        <Grid x:Name="HorizontalTemplate">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <RepeatButton x:Name="HorizontalTrackLargeChangeDecreaseRepeatButton" Grid.Column="0" Height="0" Template="{x:Null}"/>
                            <Thumb x:Name="HorizontalThumb" Grid.Column="1" Foreground="{TemplateBinding Foreground}" Height="24" IsTabStop="False" Template="{StaticResource PhoneProgressBarSliderThumb}"/>
                            <RepeatButton x:Name="HorizontalTrackLargeChangeIncreaseRepeatButton" Grid.Column="2" Height="0" Template="{x:Null}"/>
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="ProgressBarStyle1" TargetType="ProgressBar">
        <Setter Property="Height" Value="30"/>
        <!--<Setter Property="Foreground" Value="{StaticResource PhoneAccentBrush}"/>
        <Setter Property="Background" Value="{StaticResource PhoneAccentBrush}"/>-->
        <Setter Property="Foreground" Value="YellowGreen"/>
        <Setter Property="Background" Value="Blue"/>
        <Setter Property="Maximum" Value="100"/>
        <Setter Property="IsHitTestVisible" Value="False"/>
        <Setter Property="Padding" Value="{StaticResource PhoneHorizontalMargin}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ProgressBar">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Determinate"/>
                                <VisualState x:Name="Indeterminate">
                                    <Storyboard Duration="00:00:04.4" RepeatBehavior="Forever">
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="IndeterminateRoot">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="DeterminateRoot">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Collapsed</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Value" Storyboard.TargetName="Slider1">
                                            <EasingDoubleKeyFrame KeyTime="00:00:00.5" Value="1000">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <ExponentialEase EasingMode="EaseOut" Exponent="1"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                            <LinearDoubleKeyFrame KeyTime="00:00:02.0" Value="2000"/>
                                            <EasingDoubleKeyFrame KeyTime="00:00:02.5" Value="3000">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <ExponentialEase EasingMode="EaseIn" Exponent="1"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00.2" Storyboard.TargetProperty="Value" Storyboard.TargetName="Slider2">
                                            <EasingDoubleKeyFrame KeyTime="00:00:00.5" Value="1000">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <ExponentialEase EasingMode="EaseOut" Exponent="1"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                            <LinearDoubleKeyFrame KeyTime="00:00:02.0" Value="2000"/>
                                            <EasingDoubleKeyFrame KeyTime="00:00:02.5" Value="3000">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <ExponentialEase EasingMode="EaseIn" Exponent="1"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00.4" Storyboard.TargetProperty="Value" Storyboard.TargetName="Slider3">
                                            <EasingDoubleKeyFrame KeyTime="00:00:00.5" Value="1000">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <ExponentialEase EasingMode="EaseOut" Exponent="1"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                            <LinearDoubleKeyFrame KeyTime="00:00:02.0" Value="2000"/>
                                            <EasingDoubleKeyFrame KeyTime="00:00:02.5" Value="3000">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <ExponentialEase EasingMode="EaseIn" Exponent="1"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00.6" Storyboard.TargetProperty="Value" Storyboard.TargetName="Slider4">
                                            <EasingDoubleKeyFrame KeyTime="00:00:00.5" Value="1000">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <ExponentialEase EasingMode="EaseOut" Exponent="1"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                            <LinearDoubleKeyFrame KeyTime="00:00:02.0" Value="2000"/>
                                            <EasingDoubleKeyFrame KeyTime="00:00:02.5" Value="3000">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <ExponentialEase EasingMode="EaseIn" Exponent="1"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00.8" Storyboard.TargetProperty="Value" Storyboard.TargetName="Slider5">
                                            <EasingDoubleKeyFrame KeyTime="00:00:00.5" Value="1000">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <ExponentialEase EasingMode="EaseOut" Exponent="1"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                            <LinearDoubleKeyFrame KeyTime="00:00:02.0" Value="2000"/>
                                            <EasingDoubleKeyFrame KeyTime="00:00:02.5" Value="3000">
                                                <EasingDoubleKeyFrame.EasingFunction>
                                                    <ExponentialEase EasingMode="EaseIn" Exponent="1"/>
                                                </EasingDoubleKeyFrame.EasingFunction>
                                            </EasingDoubleKeyFrame>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Slider1">
                                            <DiscreteDoubleKeyFrame KeyTime="0" Value="1"/>
                                            <DiscreteDoubleKeyFrame KeyTime="00:00:02.5" Value="0"/>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00.2" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Slider2">
                                            <DiscreteDoubleKeyFrame KeyTime="0" Value="1"/>
                                            <DiscreteDoubleKeyFrame KeyTime="00:00:02.5" Value="0"/>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00.4" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Slider3">
                                            <DiscreteDoubleKeyFrame KeyTime="0" Value="1"/>
                                            <DiscreteDoubleKeyFrame KeyTime="00:00:02.5" Value="0"/>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00.6" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Slider4">
                                            <DiscreteDoubleKeyFrame KeyTime="0" Value="1"/>
                                            <DiscreteDoubleKeyFrame KeyTime="00:00:02.5" Value="0"/>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00.8" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Slider5">
                                            <DiscreteDoubleKeyFrame KeyTime="0" Value="1"/>
                                            <DiscreteDoubleKeyFrame KeyTime="00:00:02.5" Value="0"/>
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Grid x:Name="DeterminateRoot" Margin="{TemplateBinding Padding}" Visibility="Visible">
                            <Rectangle x:Name="ProgressBarTrack" Fill="{TemplateBinding Background}" Height="24" Opacity="0.1"/>
                            <Rectangle x:Name="ProgressBarIndicator" Fill="{TemplateBinding Foreground}" HorizontalAlignment="Left" Height="24"/>
                        </Grid>
                        <Border x:Name="IndeterminateRoot" Margin="{TemplateBinding Padding}" Visibility="Collapsed">
                            <Grid>
                                <Slider x:Name="Slider1" Foreground="{TemplateBinding Foreground}" Style="{StaticResource PhoneProgressBarSliderStyle}"/>
                                <Slider x:Name="Slider2" Foreground="{TemplateBinding Foreground}" Style="{StaticResource PhoneProgressBarSliderStyle}"/>
                                <Slider x:Name="Slider3" Foreground="{TemplateBinding Foreground}" Style="{StaticResource PhoneProgressBarSliderStyle}"/>
                                <Slider x:Name="Slider4" Foreground="{TemplateBinding Foreground}" Style="{StaticResource PhoneProgressBarSliderStyle}"/>
                                <Slider x:Name="Slider5" Foreground="{TemplateBinding Foreground}" Style="{StaticResource PhoneProgressBarSliderStyle}"/>
                            </Grid>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>       
</phone:PhoneApplicationPage.Resources> 
```

我的.cs：

```
 progBar.Style = (Style)this.Resources["ProgressBarStyle1"]; 
```

> > > > > 网上找到的款式<<<<<

# ruby - 如何在 HTTP 代理后面使用 Ruby 的 xmpp 库

> ID：12369398
> 
> 赞同：1
> 
> 时间：2012-09-11T12:09:28.773
> 
> 标签：ruby, proxy, xmpp, google-talk

我想使用 xmpp4r gem 从我的 Rails 应用程序向 gtalk 发送通知。但是我在 HTTP 代理后面，因此不能使用常规的 jabber。此外，xmpp4r 支持 HTTPBind，但 gtalk 似乎不支持。那么有没有办法将 HTTPBind 与 gtalk 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:40:29.810

使用代理[http://rubygems.org/gems/proxifier](http://rubygems.org/gems/proxifier)。

如果您的代理已经在环境中配置（例如，通过设置环境变量 http_proxy），您可以简单地将以下两行添加到您的代码中。

```
require "proxifier"
require "proxifier/env" 
```

这增强了使用的 TCPSocket 以支持通过代理进行连接。

[xmpp4r](/questions/tagged/xmpp4r "显示标记为“xmpp4r”的问题")[代理](/questions/tagged/proxifier "显示标记为“代理”的问题")

# python - Django中的同时多任务处理

> ID：12369409
> 
> 赞同：1
> 
> 时间：2012-09-11T12:09:56.913
> 
> 标签：python, django

我的网络项目中有一个耗时的功能。在函数进行计算时，应呈现一个网页，通知用户计算完成后将通过电子邮件发送结果。

如果我将渲染放在函数调用之后，则网页将在 time_sumption_function() 完成之前渲染，这将使响应变得毫无意义。

```
views.py:

def web_function(request):
    ...
    time_consuming_function()
    return HttpResponse() 
```

python线程是唯一的方法吗？

* * *

**更新**

最终使用 cellery，因为它似乎比 ztaskd 有更好的文档记录

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T12:14:43.123

要走的路是使用[ztaskd](https://github.com/dmgctrl/django-ztask)来执行`time_consuming_function()`.

```
from django_ztask.decorators import task

@task()
def time_consuming_function()
    ... 
```

视图.py：

```
def web_function(request):
    ...
    time_consuming_function.async()
    return HttpResponse() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T12:14:59.487

我建议你看一个任务调度框架，比如 Celery （或者只是普通的[Rabbit MQ](http://www.rabbitmq.com/tutorials/tutorial-one-python.html)）

# powershell - 通过 powershell 启用 ssl 连接 filezilla

> ID：12369413
> 
> 赞同：-1
> 
> 时间：2012-09-11T12:10:11.943
> 
> 标签：powershell, ftp, filezilla, ftps

有什么方法可以使用 powershell 脚本在正在运行的 filezilla ftp 服务器上启用 ssl/tls？[我在 iis (这里](https://serverfault.com/questions/281316/powershell-set-iis-7-5-ftp-site-to-allow-ssl-connections))中找到了有关如何执行此操作的信息，但对于 filezilla 却没有。
任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:02:24.227

如果是我，我会更改调用的配置文件`FileZilla Server.xml`以获得您需要的设置。您可能必须首先在测试服务器上进行更改才能确切知道要更改的内容。然后，我将编写一个脚本，将所有这些服务器上的配置文件作为 XML 打开，并使用 XML 特定的方法（如 .SetAttribute()）来更改配置。您可以在此处找到有关如何解析 XML 的更多信息：http: [//tfl09.blogspot.com/2010/07/powershell-and-xml-element-attributes.html](http://tfl09.blogspot.com/2010/07/powershell-and-xml-element-attributes.html)或网络上的其他几篇精彩文章。

这个配置文件可能只有在服务重启时才会读取，所以你可以使用Get-Service远程重启服务。

如果您在这些过程中有更具体的问题，请务必返回并搜索堆栈溢出，如果找不到答案，请发布更多问题。

# opengl - OpenGL隐式圆函数——不完全圆

> ID：12369415
> 
> 赞同：0
> 
> 时间：2012-09-11T12:10:17.010
> 
> 标签：opengl

我在画一个圆圈时遇到了一点问题。该函数绘制了一个几乎完整的圆圈，我只是错过了一点点循环。我假设这个问题与自动重绘某些东西有关？

这是功能

```
for(x = radius; x >= -radius; x -= 0.05)     // draw the plot
{   
    double temp = (radius * radius) - (x * x);
    y = sqrt(temp);
    glVertex2f(x, y);
}
for(x = -radius; x <= radius; x += 0.05)     // draw the plot
{   
    double temp = (radius * radius) - (x * x);
    y = sqrt(temp);
    glVertex2f(x, -y);
} 
```

其他任何代码会有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:59:14.493

我认为您遇到的只是一个浮点精度问题。您假设您的 x 值在每个循环结束时准确`-radius`（或`radius`分别）到达，这可能不是由于所有加法累积的舍入误差。

这没有问题，`-radius`因为它无论如何都与第二个循环的开始合并，但最后它不会在`radius`. 尝试使整个事物 a`GL_LINE_LOOP`而不是 a`GL_LINE_STRIP`将第一个和最后一个顶点合并成一条线。

# linux - linux系统上如何实现NULL指针？

> ID：12369419
> 
> 赞同：2
> 
> 时间：2012-09-11T12:10:27.693
> 
> 标签：linux, pointers

它是否映射到内存中的零页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:19:21.623

它是Linux的事实是无关紧要的。在 C 中，NULL 常量定义为 '0' - 零。当一个进程试图在受保护模式上下文中取消引用其值为零的指针时，它会导致处理器引发一个中断，然后由操作系统处理（然后通常传递给应用程序的框架，这就是为什么 .NET给你友好的 NullReferenceExceptions 但 C 给你更多神秘的错误）。

# asp.net - HTML5 视频播放/小等按钮刷新？

> ID：12369427
> 
> 赞同：1
> 
> 时间：2012-09-11T12:11:08.737
> 
> 标签：asp.net, html, video

我正在尝试创建一个 ASP.NET 页面并在其上使用一些 HTML5。其中大部分来自 w3schools 的示例。

*编辑* 我使用 chrome 作为我的主要测试浏览器。mp4 和 ogg 在 Firefox 中都不起作用，整个视频标签在 ie8 中不起作用。因为我用的是xp，ie9是不可能的。如果需要，我可以安装歌剧或野生动物园……如果有帮助，请告诉我。

**编码：**

```
<div> 
<video id="movieid" width="420">
<source src="movie.mp4" type="video/mp4" />
<source src="oggbestand.ogg" type="video/ogg" />
<p>Als uw browser te oud is, word deze melding weergegeven. Excuses voor het ongemak!</p>
</video>
<button onclick="playPause()">Play/Pause</button> 
<button onclick="makeSmall()">Small</button>
<button onclick="makeNormal()">Normal</button>
<button onclick="makeBig()">Big</button>
<br /> 
</div>  

<script>
function playPause() {
var myVideo = document.getElementById("movieid");
if (myVideo.paused)
myVideo.play();
else
myVideo.pause();
}
function makeBig() {
var myVideo = document.getElementById("movieid");
myVideo.width = 560;
}
function makeSmall() {
var myVideo = document.getElementById("movieid");
myVideo.width = 320;
}
function makeNormal() {
var myVideo = document.getElementById("movieid");
myVideo.width = 420;
} 
</script> 
```

**问题：** 上面的四个按钮似乎工作。但是，不知何故，页面刷新或其他什么，将视频恢复到原始大小。谁能帮我解决这个问题，甚至解决它？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T09:12:28.427

每当您单击一个按钮时，您都会触发一个回发，所以这里发生的是您正在运行一些 JavaScript 代码来编辑您的 HTML，然后触发一个完整的回发，这将为您提供一个全新的 HTML 页面。

简单修复：添加“return false;”

```
<button onclick="playPause(); return false;">Play/Pause</button> 
<button onclick="makeBig(); return false;">Big</button>
<button onclick="makeSmall(); return false;">Small</button>
<button onclick="makeNormal(); return false;">Normal</button> 
```

# unit-testing - 单元测试 MonoTouch 项目的最佳方式？

> ID：12369434
> 
> 赞同：6
> 
> 时间：2012-09-11T12:11:33.530
> 
> 标签：unit-testing, xamarin.ios, nunit, monodevelop, touch.unit

实际上有没有一种使用 NUnit 和 MonoDevelop 测试运行器对 MonoTouch 项目进行单元测试的好方法？

我知道有官方的 MonoTouch 单元测试项目类型，但在模拟器中运行测试不是我想要的方式。现在我想用 MonoDevelop 测试运行器运行测试，以后一切都应该使用 Jenkins (CI)。

我知道关于 UI 特定代码的限制，所以我想测试的所有内容都与 MonoTouch 本身无关，这完全是关于放置在单独项目中的业务逻辑。

通过向 MonoTouch 库类型项目添加测试，我得到 System.IO.FileNotFoundException 的描述如下：http: [//ben.phegan.name/index.php/2011/02/28/monotouch-and-unit-testing/](http://ben.phegan.name/index.php/2011/02/28/monotouch-and-unit-testing/)

通过使用单独的 NUnit 测试项目，我无法引用我的被测系统，因为它的项目类型是 MonoTouch 库项目类型，当然，它具有不兼容的目标框架 (vMonoTouch)。

所以，Touch.Unit 没有任何真正的替代品，不是吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T13:27:11.977

> 有没有一种使用 NUnit 对 MonoTouch 项目进行单元测试的好方法

[触控单元](https://github.com/spouliot/Touch.Unit)

> 和 MonoDevelop 测试运行器？

并不真地。MonoTouch 项目取决于`monotouch.dll`哪些需要在 iOS（不是 OSX）下执行。因此，运行程序需要在模拟器或设备上执行。

现在您的问题中有一些误解：

> 后来一切都应该与詹金斯（CI）一起工作。

Touch.Unit 已经与使用 iOS 模拟器和/或设备的持续构建/集成服务器（只要它们运行 OSX）一起使用。详情可[在此处](http://spouliot.wordpress.com/2012/04/02/touch-unit-automation-revisited/)获得。

> 我知道关于 UI 特定代码的限制，

Touch.Unit与 UI 测试**无关。**事实上，它在 UI 测试方面非常**糟糕**（但这不是重点）。

Touch.Unit 是一个在 iOS 上执行的测试运行器。这允许您在自己的测试中使用 MonoTouch / iOS API（它可以是 UIKit，但也可以是 StoreKit、GameKit、*Kit、任何 Foundation 类……这是一个相当大的世界）。

> 所以，Touch.Unit 没有任何真正的替代品，不是吗？

是的。如果您的*业务逻辑*被很好地隔离并且不依赖于`monotouch.dll`那么您应该能够将其构建为：

*   非 MonoTouch 项目（不同项目，相同来源），即与*常规*框架链接；或者
*   从单元测试程序集中链接到源代码（链接到*常规*框架）；

然后，那个*经典*的 nunit 测试程序集将是一个*常规*的框架项目，并且能够从*默认*的NUnit运行器**或**MonoDevelop 单元测试运行器中运行。

# asp.net-mvc - RestSharp Serializer Setter 没有效果

> ID：12369436
> 
> 赞同：1
> 
> 时间：2012-09-11T12:11:42.240
> 
> 标签：asp.net-mvc, json, json.net, restsharp

我正在努力让 RestSharp 与 EF4 的 MVC API 对话，我非常接近让它工作。为了克服库存序列化程序的接口限制，我使用了 Json.NET 序列化程序。对于反序列化，它开箱即用，但我不能让 RestSharp 使用我的自定义序列化程序。该方法`Serialize`没有被调用。一切都编译得很好，但不起作用。这是代码：

```
var client = CreateClient();
// client.Authenticator = new HttpBasicAuthenticator(username, password);
var request = new RestRequest("api/{type}s", Method.GET);
request.AddUrlSegment("type", typeof(T).Name);
request.RequestFormat = DataFormat.Json;
request.AddParameter("criteria", criteria);
IRestResponse<List<T>> response = client.Execute<List<T>>(request);
HandleResponse(response);
return response.Data; 
```

有任何想法吗？

*编辑*

我试图遵循一个例子并将发布方法更改为接受`JObject`并且它有效！但是尝试调用`jitem.ToObject<Item>()`导致以下异常：

```
Error converting value "System.Collections.Generic.List`1[DataAbstractionLayer.Poco.ItemCheckpoint]" to type 'System.Collections.Generic.ICollection`1[DataAbstractionLayer.Poco.ItemCheckpoint]'. 
```

但更有趣的是内部异常：

```
Could not cast or convert from System.String to System.Collections.Generic.ICollection`1[DataAbstractionLayer.Poco.ItemCheckpoint]. 
```

难道是 Json.NET 自动将集合项转换为字符串？

# c# - 带有查询的 URL 路由

> ID：12369439
> 
> 赞同：0
> 
> 时间：2012-09-11T12:11:54.670
> 
> 标签：c#, asp.net, url-routing

参考[This question](https://stackoverflow.com/questions/7069515/url-routing-in-aspx)和[ScottGu's Documentation](http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series.aspx)，我已经成功地为我的网站的会员资料页面路由了一个 URL。

我的页面重定向`~/page/MemberName`到`~/page/Default.aspx`，用户`MemberName`请求信息。
到目前为止，这一直很好。

我现在需要一种方法来允许用户编辑他们的数据，并希望它像`~/page/MemberName/Private`. 标签将`Private`告诉页面用户可以编辑他们的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:26:35.120

虽然我会考虑做[@huMpty duMpty](https://stackoverflow.com/users/925222/humpty-dumpty)建议的事情并为此使用角色。

您只需要设置路由以在 URL 中包含额外信息。

```
routes.MapPageRoute("SalesRoute",
    "page/{MemberName}/{ExtraData}",
    "~/Default.aspx"); 
```

然后像访问 MemberName 一样访问它：

```
Page.RouteData.Values["ExtraData"]; 
```

如果您想确保*只*传入“私有”，您可以通过其中一个重载向路由添加约束。

```
routes.MapPageRoute("SalesRoute",
    "page/{MemberName}/{ExtraData}",
    "~/Default.aspx",
    false,
    new RouteValueDictionary(),
    new RouteValueDictionary{
       { "ExtraData", "[P|p]rivate" }
    }); 
```

值得注意的是，您可能希望对此进行很好的测试，因为您最终可能会得到一个过于严格的路由规则。

# php - php中x pow y的所有组合

> ID：12369443
> 
> 赞同：6
> 
> 时间：2012-09-11T12:12:05.813
> 
> 标签：php, math, combinations

我有一个包含三个元素的数组`$base =`**`(#m, #f,#p)`**

我有第二个数组，其中包含任意数量的元素，例如`$var = (s1, s2)`

现在我需要仅根据基本数组创建所有可能的组合。我找到的公式是`x pow y`.

在这个例子中，我的基本数组有 3 个元素并且有`$var`2 **，**所以 ***9***。我需要这九种组合。IE`pow(3, 2)`

 *```
#m#m #m#f #m#p
#f#m #f#f #f#p
#p#m #p#f #p#p 
```

第二个数组中的元素数量实际上是生成的组合的长度。在这个例子中，第二个数组的长度是 2，所以所有生成的字符串的长度都是 2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:01:49.997

您可以使用这样的递归函数：

```
// input definition
$baseArray = array("#m", "#f", "#p");
$varArray = array("s1", "s2", "s3");

// call the recursive function using input
$result = recursiveCombinations($baseArray, sizeof($varArray));

// loop over the resulting combinations
foreach($result as $r){
    echo "<br />combination " . implode(",", $r);
}

// this function recursively generates combinations of #$level elements
// using the elements of the $base array
function recursiveCombinations($base, $level){
    $combinations = array();
    $recursiveResults = array();

    // if level is > 1, get the combinations of a level less recursively
    // for level 1 the combinations are just the values of the $base array
    if($level > 1){
        $recursiveResults = recursiveCombinations($base, --$level);
    }else{
        return $base;   
    }
    // generate the combinations
    foreach($base as $baseValue){
        foreach($recursiveResults as $recursiveResult){
            $combination = array($baseValue);
            $combination = array_merge($combination, (array)$recursiveResult);  
            array_push($combinations, $combination);
        }
    }
    return $combinations;
} 
```

[工作键盘演示](http://codepad.org/WIE4jhrJ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:57:47.030

```
<?php
    $strs = Array("some", "thing", "here");
    $poss = Array(1, 2);
    $new = Array();
    for($i = 0; $i < pow(count($strs), count($poss)); $i++) {
        for($j = 0; $j < count($strs); $j++) {
            $new[$i] = $strs[($i%count($strs))] . " " . $strs[$j];
        }
    }
    print_r($new);
?> 
```

工作[键盘](http://codepad.org/zoflKhoc)链接（对于给定的示例）。

# 链接

*   [战俘(4, 3)](http://codepad.org/vfj9hXIu)
*   [战俘(4, 2)](http://codepad.org/1FywBmFV)
*   [战俘(3, 5)](http://codepad.org/kwCVrOgx)*

# database - 本地主机上传 Wordpress 数据库

> ID：12369444
> 
> 赞同：-1
> 
> 时间：2012-09-11T12:12:07.967
> 
> 标签：database, wordpress

我在线将我的portfolio.local 上传到我的服务器。我导出数据库并将其导入服务器，我遇到的问题是所有链接仍然指向portfolio.local，如果我进入在线登录，在我登录后管理员让我进入portfolio.local而不是wp-admin在服务器上。我已经修改了服务器上的 wp-config.php 文件...

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:29:12.553

您忘记更新数据库中的链接结构....
您需要编辑导出的链接，删除当前链接，然后导入已编辑的链接。

**示例（数据库中的某个地址）：**

```
http://localhost/mysite/?p=1 
```

.
**应该：**

```
http://www.your-new-site.com/?p=1 
```

.
**如果您使用的是永久链接：**
我会删除 .htaccess 文件并在使用您的新网站管理面板时重新创建一个新文件。

.
希望这可以帮助。
等待你的重播
萨吉夫。

# django - Tastypie：如何为 m2m 字段设置默认值？

> ID：12369445
> 
> 赞同：1
> 
> 时间：2012-09-11T12:12:08.773
> 
> 标签：django, tastypie

我想做的是为 m2m 字段设置默认值，并在 post_save 信号中进行。这是最小的代码：

```
# models.py
class Question(models.Model):
    options = models.ManyToManyField(Option)
    body = models.CharField(max_length=140)

def default_options(sender, instance, created, **kwargs):
    if created and not instance.options.all():
        options = Option.objects.filter(id__in=[1, 2])
        instance.options.add(*options) 
        instance.save()

post_save.connect(default_options, sender=Question) 
```

当调用“普通”保存时它工作正常：

```
>>> q=Question(body='test')
>>> q.save()
>>> q.options.all()
[<Option[1]>, <Option[2]>] 
```

但是，如果模型迷上了美味派，则永远不会设置选项。

```
# api.py 
class QuestionResource(ModelResource):
    options = fields.OneToManyField('qa.api.OptionResource', 'options', full=True, blank=True)
    class Meta:
        queryset = Question.objects.all()

# try to create a question:
curl --dump-header - -H "Content-Type: application/json" -X POST --data '{"body":"test"}' http://localhost:8000/api/0.1/question/ 
```

服务器将响应 201 但未设置问题的选项。

我的问题是：

*   我是否有权使用保存后信号为 m2m 字段设置默认值？
*   如果是这样，那么美味派的秘诀是什么？
*   如果不是，那么正确的方法是什么？
*   我注意到 sweetpie ManyToMany 字段有一个默认选项。在这种情况下如何使用它或者我在哪里可以找到关于它的完整文档..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:08:10.520

有两种可能的方法来处理`m2m`django-tastypie 方面的关系。

一个来覆盖该`obj_create`功能。[这里](http://blog.gingerlime.com/2012/keep-your-hands-off-my-tastypie/)有更多帮助。

```
class QuestionResource(ModelResource):
   options = fields.OneToManyField('qa.api.OptionResource', 'options', full=True, blank=True)
   class Meta:
      queryset = Question.objects.all()

   def obj_create(self, bundle, request, **kwargs):
       print "hey we're in object create"
       # do something with bundle.data,
       return super(QuestionResource, self).obj_create(bundle, request, **kwargs) 
```

第二种方法是通过 curl 请求来完成。

```
curl --dump-header - -H "Content-Type: application/json" -X POST --data '{"body":"test", "options": ["/api/v1/option/1/"]}' http://localhost:8000/api/0.1/question/ 
```

# selenium-ide - 将 Selenium 脚本导入 WebDriver

> ID：12369450
> 
> 赞同：1
> 
> 时间：2012-09-11T12:12:14.717
> 
> 标签：selenium-ide, selenium-webdriver

是否可以将 Firefox 的 Selenium-IDE 插件中生成的脚本导入/使用到 Selenium WebDriver 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T21:16:15.873

在 Selenium IDE 中，打开您希望导出到 Webdriver 的测试用例 从 Selenium IDE 文件菜单中，选择“Export Test Case As...”并选择与您的 webdriver 配置匹配的变体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:50:25.513

是的，IDE 的文件菜单中有一个“导出测试用例”（如果导出单个测试用例）选项。这将具有可以导出到的语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T23:54:38.513

我认为他想要的是有一种方法可以从第三方应用程序“驱动”和控制 IDE 脚本。据我所知，没有办法做到这一点。实际上，这样做会很有用，因为 IDE 脚本无法设置数据或根据条件很好地执行。另一方面，通用编程语言在执行这些任务方面要好得多，但不太适合实际执行浏览器操作。此外，每次发生更改时都导出脚本可能非常耗费人力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T05:06:34.800

似乎没有自动方法将 Selenium 的数据导入 WebDriver。我要自己写一个转换器。

无论如何谢谢大家:)

# ios - 在 iOS 中确定当前充电剩余多少电池寿命/电量

> ID：12369451
> 
> 赞同：0
> 
> 时间：2012-09-11T12:12:21.140
> 
> 标签：ios, battery

如何通过代码确定 iOS 产品的剩余电量。即 50%

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:14:57.153

您可以使用 - 获取当前电池电量

`[[UIDevice currentDevice] batteryLevel];`

从文档 -

> 电池电量范围从 0.0（完全放电）到 1.0（100% 充电）。在访问此属性之前，请确保已启用电池监控。

# asp.net - 如何使用 RadUpload telerik IIS 7 在 asp 中设置文件大小限制？

> ID：12369457
> 
> 赞同：0
> 
> 时间：2012-09-11T12:12:53.777
> 
> 标签：asp.net, file, file-upload, telerik, radupload

我在 Telerik 库中遇到了有关此 Radupload 控件的问题。我只能将小于 5 Mb 的文件上传到我的服务器……为什么？然而，我已经按照教程配置了 web.config 文件并具有文件访问权限。

这是我的代码配置

**辐射上传：**

```
<telerik:RadUpload ID="radUpload_FileShare" runat="server" style="margin-left:140px;margin-top:20px;" 
InitialFileInputsCount="1"
MaxFileSize="318000000"
MaxFileInputsCount="14"
OnClientFileSelected="DeleteInvalidInputs_File"
controlobjectsvisibility="Default" 
></telerik:RadUpload> 
```

**网络配置：**

```
<system.web>
      <httpRuntime
     executionTimeout="1000000" maxRequestLength="500000" />
</system.web> 
```

我已经在我的文件夹中添加了“NETWORKSERVICE”的访问权限

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:20:25.733

不确定您是否仍在此处寻找答案，因为这是一个较旧的问题，但 IIS 7 有一个不同的位置来设置最大文件上传大小。有关更多信息，请参阅此链接：

[http://weblogs.asp.net/jeffwids/archive/2009/09/24/from-iis6-maxrequestlength-to-iis7-maxallowedcontentlengthfile-specifying-maximum-file-upload-size.aspx](http://weblogs.asp.net/jeffwids/archive/2009/09/24/from-iis6-maxrequestlength-to-iis7-maxallowedcontentlengthfile-specifying-maximum-file-upload-size.aspx)

```
<system.webServer>
  <security>
    <requestFiltering>
      <requestLimits maxAllowedContentLength="500000" />
    </requestFiltering>
  </security>
</system.webServer> 
```

# php - 需要帮助理解 preg_match 正则表达式

> ID：12369460
> 
> 赞同：0
> 
> 时间：2012-09-11T12:13:03.963
> 
> 标签：php, regex

preg_match 中的正则表达式为`/server\-([^\-\.\d]+)(\d+)/`. 有人可以帮我理解这意味着什么吗？我看到字符串以`server-`但我不明白`([^\-\.\d]+)(\d+)'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:19:55.470

`[ ]`-> 匹配 ONE 字符位置的方括号内的任何内容一次且仅一次，例如，[12] 表示将目标匹配为 1，如果不匹配则将目标匹配为 2，而 [0123456789] 表示匹配任何字符在 0 到 9 的范围内。

`-` -> 方括号内的 -（破折号）是“范围分隔符”，允许我们定义范围，在上面的 [0123456789] 示例中，我们可以将其重写为 [0-9]。

您可以在列表中定义多个范围，例如，[0-9A-C] 表示检查 0 到 9 和 A 到 C（但不是 a 到 c）。

注意：要测试括号内的 - （作为文字），它必须位于第一个或最后一个，也就是说，[-0-9] 将测试 - 和 0 到 9。

`^`-> 方括号内的 ^（抑扬符或插入符号）否定表达式（稍后我们将看到方括号外的抑扬符/插入符号的替代用法），例如，[^Ff] 表示除大写或小写 F 和 [ ^az] 表示除小写 a 到 z 之外的所有内容。

您可以在我获得此信息的来源中查看有关它的更多解释：[http ://www.zytrax.com/tech/web/regex.htm](http://www.zytrax.com/tech/web/regex.htm)

如果你想测试，你可以试试这个： http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:17:52.307

这是解释：

```
# server\-([^\-\.\d]+)(\d+)
# 
# Match the characters “server” literally «server»
# Match the character “-” literally «\-»
# Match the regular expression below and capture its match into backreference number 1 «([^\-\.\d]+)»
#    Match a single character NOT present in the list below «[^\-\.\d]+»
#       Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
#       A - character «\-»
#       A . character «\.»
#       A single digit 0..9 «\d»
# Match the regular expression below and capture its match into backreference number 2 «(\d+)»
#    Match a single digit 0..9 «\d+»
#       Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+» 
```

如果您打算使用正则表达式并愿意花费一些资金，则可以使用[RegexBuddy等程序。](http://www.regexbuddy.com/)

您也可以使用[这个免费的基于网络的解释工具](http://rick.measham.id.au/paste/explain.pl)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T12:18:30.007

`^`表示*括号内不是以下字符之一*

`\-` `\.`是`-`和`.`字符

`\d`是一个数字

`[^\-\.\d]+`表示括号内的多个字符，因此一个*或多个*不是 a或数字的任何字符。`-``.`

`(\d+)`一个或多个数字

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T12:24:15.417

下面是perl模块给出的解释`YAPE::Regex::Explain`

```
The regular expression:

(?-imsx:server\-([^\-\.\d]+)(\d+))

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  server                   'server'
----------------------------------------------------------------------
  \-                       '-'
----------------------------------------------------------------------
  (                        group and capture to \1:
----------------------------------------------------------------------
    [^\-\.\d]+               any character except: '\-', '\.', digits
                             (0-9) (1 or more times (matching the
                             most amount possible))
----------------------------------------------------------------------
  )                        end of \1
----------------------------------------------------------------------
  (                        group and capture to \2:
----------------------------------------------------------------------
    \d+                      digits (0-9) (1 or more times (matching
                             the most amount possible))
----------------------------------------------------------------------
  )                        end of \2
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

# java - 为什么我收到 selenium 错误“firefox-bin 已按预期退出”并且无法连接到端口 7055 上的主机 127.0.0.1

> ID：12369461
> 
> 赞同：0
> 
> 时间：2012-09-11T12:13:05.260
> 
> 标签：java, eclipse, firefox, selenium

我正在尝试在带有 eclipse 的 macbook pro 上运行 selenium 2.25.0。我使用文档示例代码创建了一个简单的类。这一行的代码错误：

```
WebDriver driver = new FirefoxDriver(); 
```

留言：

45000 毫秒后无法连接到端口 7055 上的主机 127.0.0.1。Firefox 控制台输出：dyld：未知所需的加载命令 0x80000022 dyld：未知所需的加载命令 0x80000022

我曾尝试将 Firefox 从 15 降级到 14、10 和 9，但这些都不起作用。

非常感谢任何人可以提供的任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:28:49.160

第一个明显的可能解决方案：尝试其他驱动程序：IE、chrome 驱动程序。第二，

```
 @Before
    public void openFirefox() throws IOException {

        driver = new FirefoxDriver();       
        driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);

        driver.get(propertyKeysLoader("http://localhost:8090/rms-web/login/login.jsf"));
        doAdminLogin();
    } 
```

通常在创建 Firefox 驱动程序实例后，您会进行 getUrl 操作。确保您想访问的网址可以从您的浏览器访问。否则可能是服务器问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:42:06.647

问题原来是 firefox-bin 也不会在命令行上启动。这似乎与在 OSX 10.5 上运行有关。

修复如下：

```
cd /Applications/Firefox.app/Contents/MacOS
mv firefox-bin firefox-bin.original
ditto --arch i386 firefox-bin.original firefox-bin 
```

这是取自这个有用的答案的网页：[http ://www.bangheadonwall.net/?p=296](http://www.bangheadonwall.net/?p=296)

# memory-leaks - GTK# + Cairo + Pango 中的内存泄漏

> ID：12369464
> 
> 赞同：0
> 
> 时间：2012-09-11T12:13:17.537
> 
> 标签：memory-leaks, mono, gtk#, cairo, pango

我在 Ubuntu 12.04 上使用 Mono + GTK# + Cairo + Pango，我在使用`Pango.Layout`对象时发现了一些内存泄漏。

我正在绘制一些帧速率约为 30 fps 的动画，而我的内存只会增加。我删除了很多代码，剩下的就是：

```
void OnDraw(DrawingArea area)
{
    Cairo.Context context = Gdk.CairoHelper.Create(area.GdkWindow);

    using (var lay = Pango.CairoHelper.CreateLayout(context))
    {
        // Nothing.  
    }

    ((IDisposable) context.Target).Dispose();
    ((IDisposable) context).Dispose();
} 
```

没有`Pango.CairoHelper.CreateLayout`调用，内存保持稳定，但每秒增加约 10k，这显然是不可接受的。

有什么我做错了吗？Mono + GTK# + Cairo + Pango 准备好投入生产了吗？

```
Mono version : 2.10.8.1-1ubuntu2.2
GTK# version : 2.12.10-2ubuntu4
Pango version : 1.30.0-0ubuntu3.1
uname : Linux ######-VirtualBox 3.2.0-29-generic-pae #46-Ubuntu SMP Fri Jul 27 17:25:43 UTC 2012 i686 i686 i386 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:45:12.520

AFAIK，Gtk# 绑定中有一些尚未发布的修复。

例如[这个内存泄漏修复](https://github.com/mono/gtk-sharp/commit/d6ad5db84c659d54770874e2f7d7eeca466ddf4b)。

所以如果我是你，我会先尝试[gtk-sharp 上游版本的 2.12 分支](https://github.com/mono/gtk-sharp/tree/gtk-sharp-2-12-branch)。如果这不起作用，也许您可​​以自己发现内存泄漏并提出修复？谢谢。

# ios - 如何在 xcode 中调试（设置断点）cordova-ios 的本机源代码

> ID：12369470
> 
> 赞同：1
> 
> 时间：2012-09-11T12:13:38.210
> 
> 标签：ios, xcode, debugging, breakpoints

为了更好地了解cordova（ios），我认为我应该逐步阅读和调试本机源代码。

但是，我是 ios 新手。并且不熟悉 XCode 4.3。

我已经安装了 cordova-1.6.1，并且还构建了 cordova 项目。那么如何将源代码与所有 .m 文件链接，我想在 .m 文件中设置一个断点。

例如，我想在 CDVPlugin.m 中设置一个断点来调试插件的实例化过程。

谢谢你给我指导。

# ruby-on-rails - 根据屏幕大小分页#rows

> ID：12369476
> 
> 赞同：1
> 
> 时间：2012-09-11T12:13:59.690
> 
> 标签：ruby-on-rails, pagination

我有一个 Rails 3 内部应用程序，用于：19 英寸触摸屏、10 英寸 iPad、7 英寸平板电脑

我正在使用 will_paginate / kaminari 来显示数据列表。

但是如何根据屏幕大小配置每页显示多少项目？

例如，19" 显示器 20 行，10" 显示器 11 行，7" 显示器 8 行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:02:52.353

您可能会考虑在通过 Ajax 传递相关`navigator`和/或`screen`信息并使用该信息来决定 Rails 中的后端对您的应用程序的第一个请求。

要获取浏览器/操作系统信息，请查看 Javascript 的`navigator`对象，要获取有关屏幕尺寸的信息，请查看 Javascript 的`screen`对象。

您的 Ajax 控制器操作可以将导航器/屏幕信息的 JSON 版本存储到`session`，并且可以使用`before_filter`in来设置在整个应用程序的分页器中使用。`ApplicationController``@per_page`

```
before_filter do
  @per_page = 11 if !session[:navigator][:userAgent].match(/iPad/).nil?
  @per_page = 8  if !session[:navigator][:userAgent].match(/Android/).nil? && session[:screen][:width] < 1000
  # ...
end 
```

然后你会传递`@per_page`给 kaminari 的寻呼机。

# php - 使用 mysql 进行 ajax 长轮询

> ID：12369477
> 
> 赞同：0
> 
> 时间：2012-09-11T12:14:00.663
> 
> 标签：php, jquery, mysql, ajax

我使用了与此处所述类似的脚本：[来自 mysql 的长轮询信息](https://stackoverflow.com/questions/11453423/long-polling-info-from-mysql-not-working) 在我的网站上不起作用，它的工作但是，当我刷新页面或单击不同的链接时，我收到错误警报 + 网站开始严重滞后，可以一个告诉我这是什么原因造成的？

我的代码：

```
$oldIDq = mysql_query("SELECT * FROM messages ORDER BY id DESC LIMIT 1");
while($oldrow = mysql_fetch_array($oldIDq)){
$oldID = $oldrow['id'];    
}

$func = '
var oldID = '.$oldID.';

function wait() {
$.ajax({
    type: "GET",
    url: "../scripts/msg_scripts/msg.php?oldid=" + oldID,
    async: true,
    cache: false,

    success: function (data){
     var json = eval(\'(\' + data + \')\');  

     if (json[\'msg_content\'] != "") {
      alert("new meassage added");   
     } 

     oldID = json[\'oldID\'];
     setTimeout(\'wait()\',1000);
    },

    error: function(XMLHttpRequest, textStatus, errorThrown){
      alert("error: " + textStatus + "(" + errorThrown + ")");  
      setTimeout(\'wait()\',15000);
    }

});
}

$(document).ready(function(){

    wait();
});
'; 
```

服务器：

```
<?php 
    session_start();
    $connect = mysql_connect ("localhost", "root", "")

or die ("couldnt connect");
mysql_select_db ("***") or die ("not found"); //if db was   not found die
mysql_query("SET NAMES 'utf8'");

$oldID = $_GET['oldid']; 
$result = mysql_query("SELECT id FROM messages ORDER BY id DESC LIMIT 1");
while($row = mysql_fetch_array($result))
{
    $last_msg_id = $row['id']; 
}
while($last_msg_id <= $oldID)
{
    usleep(1000);
    clearstatcache();
    $result = mysql_query("SELECT id FROM messages ORDER BY id DESC LIMIT 1");
    while($row = mysql_fetch_array($result))
    {
        $last_msg_id = $row['id'];
    }
}
$response = array();
$response['msg'] = 'new';
$response['oldID'] = $last_msg_id;
echo json_encode($response);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:20:56.503

当您单击另一个链接或在没有它的情况下刷新页面时，$_GET['oldid'] 中的 prolem 变量 $oldID 将为空并且 sql 将失败。并且每次发生错误时，js 函数都会不断调用自身而没有任何改变，并且 ajax 将继续调用 keep failed ，这将导致无限循环，这将挂起您的网站，我想如果您在 firebug 上检查它，您会看到这种情况发生。

现在不要如果那是你的意思希望它有帮助

# database - AES：存储加密数据的明确部分以用于搜索目的

> ID：12369479
> 
> 赞同：2
> 
> 时间：2012-09-11T12:14:12.407
> 
> 标签：database, encryption, aes

我使用 AES 加密敏感文本令牌并将它们存储在数据库中。我想对这些令牌进行部分搜索，而不仅仅是搜索完全匹配。解密所有令牌会太慢，所以我的想法是将令牌的开头作为明文存储在数据库的另一列中。

令牌由 90 个字符组成，并且对于每个用户都是唯一的。例如，我会存储前 20 个字符。

如果有人获得了数据库的副本，这会是一个安全问题吗？我的意思是重建完整的令牌是否更容易？

我的 AES 加密设置是：

*   带有 32 字节加密密钥的 AES-128。
*   加密模式是CBC。
*   IV 对于每个令牌都是唯一的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:21:37.057

为每个值（如果它们很长，则为每个值的第一部分）创建一个哈希，例如 PBKDF2 的前 20 个字节，迭代次数为 10,000 次，并将其存储为单独的字段/列。要检查一个值，请执行相同的操作并根据新字段检查它。新字段中的值是不可逆的，并且比较操作很便宜（直接二进制比较）。

# visual-studio-2010 - Launch Condition for checking Visio 2010 installation does not work on Win 7 64 bit with Visio 2010 64 bit version

> ID：12369480
> 
> 赞同：1
> 
> 时间：2012-09-11T12:14:13.547
> 
> 标签：visual-studio-2010, add-in, visio, office-addins

We have a visio 2010 add in deployed using msi created with setup and deployment project in visual studio. The setup project is having a launch condition to check the registry and prompt user if Visio 2010 is not installed. RegKey - SOFTWARE\Microsoft\Office\14.0\Visio, Root - vsdrrHKLM, Value - CurrentlyRegisteredVersion

This works fine to prompt user when visio 2010 version is not detected on win XP, Win 7 (both 32 and 64 bit OS) with Visio 2010 32 bit. When it is run on win 7 64 bit with visio 2010 64 bit version setup prompts user even if visio is installed.

Appreciate any pointers to resolve this

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:05:46.183

我在 HKLM 或 HKCU 下的机器上的注册表中没有看到`SOFTWARE\Microsoft\Office\14.0\Visio`。

而是检查`HKCR\Visio.Application\CurVer`. 无论 Visio 和操作系统的位数如何，该值似乎都在注册表中。

# sharepoint-2010 - Microsoft Dynamics Nav (Navision) integration with Sharepoint 2010 using BCS

> ID：12369482
> 
> 赞同：3
> 
> 时间：2012-09-11T12:14:37.963
> 
> 标签：sharepoint-2010, external, dynamics-nav, contenttype, dynamics-nav-2009

I'm trying to integrate Microsoft Dynamics Nav 2009 R2 (Navision) with Sharepoint 2010 using external content types. I'm very new to both Dynamics Nav and to the Buisness Connectivity Service in Sharepoint 2010 and I can't get it to work.

I know that you can publish pages in Dynamics Nav as web services and I've published one of the demo pages as a web service and have successfully connected to it using Visual Studio (added it as a web reference). I've called the add and delete methods programmatically and it worked fine.

I opened sharepoint designer and tried to add an external content type. I set the "Data Source Type" to "WCF Service" and used the url to the web service (http://devel:7047/DynamicsNAV/WS/Page/Customer) in both "Service Metadata Url" and "Service EndPoint Url". When I try to connect to the web service I get an error saying "Cannot find any matching endpoint configuration".

Like I said earlier, I'm very new to both Microsoft Dynamics Nav and External Content Types in SharePoint. Information about Dynamics Nav and Sharepoint integration is hard to find and I'm feeling a bit lost. Will really appreciate if anyone can shed some light on how to integrate Dynamics Nav with SharePoint using BCS.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T01:31:20.860

请原谅我，因为虽然我对 NAV Web 服务有所了解，但我对 Sharepoint 和 BCS 几乎一无所知。

然而，话虽如此，我确实有一些建议可能会有所帮助：首先，NAV Web 服务构建在 WCF 之上并使用 BasicHttpBinding。如果您对如何将 WCF BasicHttpBinding 服务连接到 BCS 进行一些研究，您可能会在那里获得一些牵引力。任何标准 BasicHttpBinding 服务与特定于 NAV 的 Web 服务之间没有根本区别。

您还提到您能够使用 Web 引用成功连接到 Visual Studio 中的 NAV Web 服务。但是，Web 引用代理是使用较旧的“wsdl.exe”实用程序构建的，因此只能与经典的 SOAP Web 服务一起使用。虽然 BasicHttpBinding 服务与 SOAP Web 服务完全向后兼容，但仍然存在缺少任何 WCF 服务独有的配置设置的问题。您确实可能需要考虑在 Visual Studio 中使用服务引用，并弄清楚如何让它与您发布的 NAV Web 服务一起正常工作。有了它，您可以使用生成的配置设置来了解共享点设计器中缺少的内容。我的猜测是缺少的“端点配置”错误告诉你，总而言之，在您可以使用 WCF 代理连接到 NAV Web 服务之前，SharePoint 设计器中需要一些 WCF 特定的设置。例如，它可能在安全领域，因为 WCF 为您提供了比经典 SOAP 更精细的控制级别。同样，我认为关键是要记住 sharepoint 需要正确配置的 WCF 端点，而旧的 Web 引用则不需要。这可能就是为什么你可以让它在视觉工作室而不是在共享点设计器中工作的原因。我认为关键是要记住 sharepoint 需要正确配置的 WCF 端点，而旧的 Web 引用则不需要。这可能就是为什么你可以让它在视觉工作室而不是在共享点设计器中工作的原因。我认为关键是要记住 sharepoint 需要正确配置的 WCF 端点，而旧的 Web 引用则不需要。这可能就是为什么你可以让它在视觉工作室而不是在共享点设计器中工作的原因。

只是给你一个想法（不是“最佳实践”的课程），当我在我的 NAV 项目中创建服务引用代理时，我经常尝试使用基于代码的配置而不是过于冗长的基于文件的配置（尤其是因为我们无论如何都无法控制 NAV 服务层端点绑定）。我使用与此类似的代码来创建客户端连接（当然这只是伪代码，不会编译，例如，您需要指向一个实际的服务引用客户端代理类，但这应该会给您一个想法哪些 WCF 绑定配置参数是必需的）：

```
 using System.Security.Principal;
    using System.ServiceModel;

    private void TestNavConnection(string url)
    {
        using (var ws = new NavServiceReference(GetBindingTransportCredentialOnly(), new EndpointAddress(url)))
        {
            ws.ClientCredentials.Windows.AllowNtlm = true;
            ws.ClientCredentials.Windows.AllowedImpersonationLevel = TokenImpersonationLevel.Delegation;
            var record = ws.Read("XYZ");
        }
    }

    private static BasicHttpBinding GetBindingTransportCredentialOnly()
    {
        var binding = new BasicHttpBinding();
        binding.Security.Mode = BasicHttpSecurityMode.TransportCredentialOnly;
        binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Windows;
        binding.MaxReceivedMessageSize = 1048576;
        return binding;
    } 
```

希望这可以帮助。祝你好运！

# python - 搜索 k 个最近点

> ID：12369484
> 
> 赞同：5
> 
> 时间：2012-09-11T12:14:41.927
> 
> 标签：python, knn

我有很多看起来像这样的功能：

```
id1 28273 20866 29961 27190 31790 19714 8643 14482 5384 ....  upto 1000
id2 12343 45634 29961 27130 33790 14714 7633 15483 4484 ....  
id3 ..... ..... ..... ..... ..... ..... .... ..... .... .... .   .   .
...
id200000 .... .... ... ..  .  .  .  . 
```

我想计算每个 id 欧几里得距离并对它们进行排序以找到最近的 5 个点。因为我的数据集非常大。最好的方法是什么。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-11T13:31:11.360

scikit-learn 有[最近邻搜索](http://scikit-learn.org/stable/modules/neighbors.html#unsupervised-nearest-neighbors)。例子：

1.  将数据加载到 NumPy 数组中。

    ```
    >>> import numpy as np
    >>> X = np.array([[28273, 20866, 29961, 27190, 31790, 19714, 8643, 14482, 5384, ...],
                      [12343, 45634, 29961, 27130, 33790, 14714, 7633, 15483, 4484, ...], 
                      ...
                      ]) 
    ```

    （仅显示两点。）

2.  适合一个`NearestNeighbors`对象。

    ```
    >>> from sklearn.neighbors import NearestNeighbors
    >>> knn = NearestNeighbors(n_neighbors=5)
    >>> knn.fit(X)
    NearestNeighbors(algorithm='auto', leaf_size=30, n_neighbors=5, p=2,
             radius=1.0, warn_on_equidistant=True) 
    ```

    `p=2`表示欧几里得（L2）距离。`p=1`将意味着曼哈顿（L1）距离。

3.  执行查询。要获得 的邻居`X[0]`，您的第一个数据点：

    ```
    >>> knn.kneighbors(X[0], return_distance=False)
    array([[0, 1]]) 
    ```

    所以，最近的邻居`X[0]`是`X[0]`它自己和`X[1]`（当然）。

确保你设置`n_neighbors=6`，因为你的集合中的每个点都将是它自己最近的邻居。

**免责声明**：我参与了 scikit-learn 的开发，所以这不是公正的建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T12:24:41.420

从你的问题来看，你的问题的具体细节并不完全清楚。到目前为止，我了解到，您需要计算大量数据点之间的欧几里得距离。Python 中最快的解决方案可能会使用该`scipy.spatial.distance`模块。请看一下

[http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.pdist.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.pdist.html)

和

[http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.cdist.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.cdist.html)

您必须熟悉 numpy 数据类型，为这些函数之一开发输入数据，并进一步评估结果数据。您可能最终会尝试获取数组的一些最大/最小 N 值，此时[如何在 numpy 数组中获取 N 个最大值的索引？](https://stackoverflow.com/questions/6910641/how-to-get-the-n-maximum-values-in-a-numpy-array)有帮助。

# c# - 如何从静态方法调用非静态方法

> ID：12369490
> 
> 赞同：-1
> 
> 时间：2012-09-11T12:15:02.127
> 
> 标签：c#, asp.net, static

我需要从`static[webmethod]`. 它没有被调用，我使用断点对其进行了测试。我试图通过为类创建一个实例来调用它。这就是我正在尝试的。

```
[WebMethod]
public static string get_runtime_values(string get_ajax_answer_title,string get_ajax_answer_des)
{
     if (get_ajax_answer_title.Equals("") && (get_ajax_answer_title.Equals("")))
     {
        return "null";
     }
     else
     {
        int got_question_id = getting_question_id;
        DataHandler.breg obj = new DataHandler.breg();
        obj.add_anwers(got_question_id, get_ajax_answer_title, get_ajax_answer_des);
        return "inserted";
     }

     querystring object_new = new querystring();
     object_new.show();
  } 
```

querystring 是此处类的名称。控件将根据输入进入 if 和 else 语句，但之后它直接跳出。此外，当我将鼠标悬停在 querystring 上时，它说

```
Unreachable code detected. 
```

我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:16:38.790

那是因为如果前面的陈述，你`return`来自两半。`if`

它没有办法达到那条线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:16:51.253

这是因为您在 IF 和 ELSE 部分都有一个 return 语句。

所以不管条件的结果如何；你永远不会低于那个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T12:18:23.497

你的方法在 if 语句之后结束，不管它是真（`return "null"`）还是假（`return "inserted"`）。因此，您在 if 语句（创建查询字符串的位置）之后的代码永远无法执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T12:17:11.687

您的问题是您在 if 和 else 子句中都退出了您的方法。您的代码本质上是：

```
MyMethod() 
{
    if (someCondition)
        return
    else
        return

    // Any code at this point cannot be executed, because 
    // you have definitely returned from your method.

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T12:17:39.067

```
querystring object_new = new querystring();
object_new.show(); 
```

part 永远不会到达，因为在您的条件下的两个块语句中，您都写了一个返回。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T12:17:50.347

是的，那是因为在 if 和 else 块的末尾都有 return 语句。

将其更改为

```
[WebMethod] 
public static string get_runtime_values(string get_ajax_answer_title,string get_ajax_answer_des) 
{ 
string ret = "null";
 if (!get_ajax_answer_title.Equals("") || (!get_ajax_answer_title.Equals(""))) 
 { 
    int got_question_id = getting_question_id; 
    DataHandler.breg obj = new DataHandler.breg(); 
    obj.add_anwers(got_question_id, get_ajax_answer_title, get_ajax_answer_des); 
    ret = "inserted"; 
 } 

 querystring object_new = new querystring(); 
 object_new.show(); 

return ret; 
```

}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-11T12:17:52.937

`Unreachable code detected.`是因为您的 if 语句的两条路径都提前返回。

```
 if (get_ajax_answer_title.Equals("") && (get_ajax_answer_title.Equals("")))
    {
        return "null"
    }
    else
    {
        return "inserted";
   }
   // Can't get here. 
```

您已经正确回答了您的原始问题，即实例化非静态方法的实例以便能够在其上调用方法。

```
querystring object_new = new querystring();
object_new.show(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-11T12:19:03.700

```
 [WebMethod]
public static string get_runtime_values(string get_ajax_answer_title,string get_ajax_answer_des)
    {  string result;
       if (get_ajax_answer_title.Equals("") && (get_ajax_answer_title.Equals("")))
        {
            result="null";
        }
        else
        {
            int got_question_id = getting_question_id;
            DataHandler.breg obj = new DataHandler.breg();
            obj.add_anwers(got_question_id, get_ajax_answer_title, get_ajax_answer_des);
            result="inserted";
       }
        querystring object_new = new querystring();
        object_new.show();
return result;
       } 
```

# java - 将新的广告网络适配器添加到 AdMob 中介，旧客户会怎样？

> ID：12369493
> 
> 赞同：1
> 
> 时间：2012-09-11T12:15:06.770
> 
> 标签：java, android, admob

我想通过[AdMob 中介将](http://www.admob.com)[AppBrain 的 AppLift](http://www.appbrain.com/info/sdk)广告网络添加到我现有的[android 应用程序](https://play.google.com/store/apps/details?id=com.miumeet.android.client)中。

我是否需要为此新版本创建新的中介 ID，还是可以继续使用相同的中介 ID？

如果我将流量分配给[AppLift](http://www.appbrain.com/info/sdk)，旧应用程序版本（没有[AppLift](http://www.appbrain.com/info/sdk) ）会发生什么情况？

我找到了[AdWhirl 的一个很好的解释](https://stackoverflow.com/questions/8882949/can-i-add-a-new-adwhirl-ad-network-for-an-existing-app)，[AdMob 中介](https://stackoverflow.com/questions/8882949/can-i-add-a-new-adwhirl-ad-network-for-an-existing-app)有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:21:04.787

Admob 中介层会为您处理这个问题。

我假设您已找到有关将[AppLift 集成到 Admob 中介](http://www.appbrain.com/info/sdk-admob-mediation-applift)的说明。当您使用 classname 添加新的自定义事件时`com.appbrain.mediation.AdmobAdapter`，Admob 会将其提供给您的应用程序。对于旧版本的应用程序，Admob 会优雅地检测到此类不存在，并选择您在 Admob 控制台上指定的下一个选项。

# jakarta-ee - 接受 Java 中的自签名证书

> ID：12369495
> 
> 赞同：2
> 
> 时间：2012-09-11T12:15:17.820
> 
> 标签：jakarta-ee, ssl, ssl-certificate, jboss7.x

我正在尝试将自签名证书与 JBoss 一起使用并尝试信任代码。但我得到 javax.net.ssl.SSLPeerUnverifiedException:。这是我尝试过的事情，

## 创建了一个密钥库

![创建了一个密钥库](../Images/6cefa964fd727cf85ca562a17c50f34c.png)

## 创建了信任库

![在此处输入图像描述](../Images/646c761a6e42a654d4627c36ac62db08.png)

## 在 JBoss AS 7.1.1 中配置 SSL

```
<subsystem xmlns="urn:jboss:domain:web:1.1" default-virtual-server="default-host" native="false">
  <connector name="https" protocol="HTTP/1.1" scheme="https" socket-binding="https" secure="true">
    <ssl password="password" certificate-key-file="C:\work\certs\ks" protocol="TLSv1" verify-client="false" certificate-file="C:\work\certs\ks"/>
  </connector>
  <virtual-server name="default-host" enable-welcome-root="true">
    <alias name="localhost"/>
    <alias name="example.com"/>
  </virtual-server>
</subsystem> 
```

启动了 JBoss。现在我可以通过单击“继续”按钮以 chrome 访问该站点。 ![在此处输入图像描述](../Images/e101f14ee765ab1fde52f5bd545daacc.png)

但是当我尝试从代码访问时，我遇到了异常。

```
javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated
    at com.sun.net.ssl.internal.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:352)
    at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:128)
    at org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:397)
    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)
    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)
    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)
    at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:573)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:425)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)
    at com.test.utility.TestHttps.main(TestHttps.java:61) 
```

这是我的代码，

```
public class TestHttps {

  private static TrustManager[] getTrustManagers() throws IOException, GeneralSecurityException {

    String trustStorePassword = "password";

    String alg = TrustManagerFactory.getDefaultAlgorithm();
    TrustManagerFactory tmFact = TrustManagerFactory.getInstance(alg);

    FileInputStream fis = new FileInputStream("C:\\work\\certs\\trust");
    KeyStore ks = KeyStore.getInstance("JKS");
    ks.load(fis, trustStorePassword.toCharArray());
    fis.close();

    tmFact.init(ks);

    TrustManager[] tms = tmFact.getTrustManagers();
    return tms;
  }

  public static void main(String[] args) throws Exception {

    SSLContext context = SSLContext.getInstance("TLS");
    context.init(null, getTrustManagers(), null);

    SSLSocketFactory ssf = new SSLSocketFactory(context);

    HttpClient base = new DefaultHttpClient();
    ClientConnectionManager ccm = base.getConnectionManager();
    SchemeRegistry registry = ccm.getSchemeRegistry();
    registry.register(new Scheme("https", 8443, ssf));

    try {

      DefaultHttpClient httpClient = new DefaultHttpClient(ccm, base.getParams());
      HttpGet getRequest = new HttpGet("https://localhost:8443/cafe/");

      HttpResponse response = httpClient.execute(getRequest);

      if (response.getStatusLine().getStatusCode() != 200) {
        throw new RuntimeException("Failed : HTTP error code : "
            + response.getStatusLine().getStatusCode());
      }

      BufferedReader br = new BufferedReader(new InputStreamReader(
          (response.getEntity().getContent())));
      String output;
      while ((output = br.readLine()) != null) {
        System.out.println(output);
      }
      httpClient.getConnectionManager().shutdown();
    } catch (ClientProtocolException e) {
      e.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    }
  }
} 
```

请让我知道我做错了什么。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:45:56.747

我通过设置系统属性发现了问题

```
System.setProperty("javax.net.debug", "SSL,handshake,trustmanager"); 
```

似乎问题出在 Jboss SSL 配置上，

```
<connector name="https" protocol="HTTP/1.1" scheme="https" socket-binding="https" secure="true">
  <ssl password="password" certificate-key-file="C:\work\certs\ks" protocol="TLSv1" verify-client="false" certificate-file="C:\work\certs\ks"/>
</connector> 
```

删除了协议 =“TLSv1”。并将证书作为

1.  从浏览器访问该网站
2.  导出证书
3.  导入到 JRE 密钥库为

keytool -import -alias localhost -file C:\ssl\test.cer -keystore %JAVA_HOME%\jre\lib\security\cacerts"

之后，下面的代码就像一个魅力。

```
String path = "https://localhost:8443/cafe/";

URL url = new URL(path);
URLConnection conn = url.openConnection();

BufferedReader br = new BufferedReader(new InputStreamReader(conn.getInputStream()));
String output;
while ((output = br.readLine()) != null) {
  System.out.println(output);
}
br.close(); 
```

# php - php > SimpleXMLElement > '&' 符号

> ID：12369499
> 
> 赞同：1
> 
> 时间：2012-09-11T12:15:40.847
> 
> 标签：php, xml, simplexml

我在使用`&`php 创建的 in xml 字符串时遇到问题`SimpleXMLElement`。例如以下：

```
<?php
$xml = new SimpleXMLElement("<?xml version='1.0' encoding='UTF-8'?><links></links>");
$xml->addChild("url","https://www.somewhere.com?a=1&b=2");
echo $xml->asXML();
?> 
```

运行时给我：

```
<?xml version="1.0" encoding="UTF-8"?>
<links><url>https://www.somewhere.com?a=1</url></links> 
```

我已经尝试过：

```
...
$xml->addChild("url","https://www.somewhere.com?a=1&amp;b=2");
... 
```

并得到：

```
...
<links><url>https://www.somewhere.com?a=1&amp;b=2</url></links> 
```

如何得到：

```
...
<links><url>https://www.somewhere.com?a=1&b=2</url></links> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T12:17:28.803

你不能。那是非法的 XML：*必须*`&`对字符进行转义（[XML 规范](http://www.w3.org/TR/1998/REC-xml-19980210#syntax)）。

# c++ - c++模板代码顺序解析/CRTP

> ID：12369500
> 
> 赞同：5
> 
> 时间：2012-09-11T12:15:43.640
> 
> 标签：c++, templates, crtp

有人可以提示编译器如何处理表达式，例如

```
class DerivedA: public ParentTemplateClass<DerivedA>{
} 
```

对于我来说，它看起来像：

这个男孩的父亲是这个男孩的“儿子”

我的意思是，在不知道父类的确切“描述”的情况下，如何完成 DerivedA 类的“解析”对我来说并不明显。似乎'它不能。所以必须在孩子之前处理父类，但在这种情况下，父母依赖于孩子......我被困在那里。

是的，网上有一些文章描述了这种东西的用法，例如一篇关于 Curiously Recurring Template Pattern ( [http://en.wikibooks.org/wiki/More_C++_Idioms/Curiously_Recurring_Template_Pattern](http://en.wikibooks.org/wiki/More_C++_Idioms/Curiously_Recurring_Template_Pattern) ) 的文章，但这不是某种标准或靠近 必须有明确的行为描述，例如操作排序，不是吗？

回答：谢谢大家。是的，前向 decl 类比对我来说似乎是合法的，可以停止损害我的大脑。由于其隐藏的子语言性质，模板对我来说仍然是最先进的，我不能只是 g++ -E :)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T12:26:18.987

在您的代码说 之后`class DerivedA`，该符号`DerviedA`被声明。此时它可以用作模板参数。C++ 编译器对代码进行多次传递，因此在解析时编译器将“相信”您的意图是正确的，并且它最终会获得该类的定义（当它即将实例化模板时，即您实际上使用该类型）。如果没有，它会在那个时候抱怨。如果您在声明中使用了前向声明的类，但在使用它之前没有提供定义，则会发生类似的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T12:33:17.957

在模板实例化的那一点，`DerivedA`是*不完整*的；它已被*声明*，但未完全*定义*。不完整类型可以以多种方式使用——例如，您可以声明指向它们的指针或引用，将函数声明为返回或参数类型，以及其他一些事情。您不能创建对象、从它们继承、访问它们的成员，或者通常做任何需要更多信息而不仅仅是类名的事情。

只要类模板只做这些事情，就没有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T12:31:27.193

我认为要理解它是如何工作的，你需要更多地了解一般的 C++ 模板，而不仅仅是好奇重复的模板模式。其他人可能比我能更好地回答这个问题，但我知道 C++ 不能完全解析模板类定义。每次在代码中使用它时都会实例化模板。如果每个类都在一个单独的包含文件中，可以这样想：

```
#include "ParentTemplateClass.h" // C++ initially validates the template class definition's syntax.
#include "DerivedA.h" // First use of ParentTemplateClass -
                      //   at this point it becomes fully instantiated. 
```

当 C++ 解析器看到模板定义时，它会首先验证模板的语法。然后，当模板用作 DerivedA 的基础时，继续解析并完全实例化模板。当然，这是 C++ 编译器将执行的解析的简化视图，我确信细节因编译器而异。另见[http://womble.decadent.org.uk/c++/template-faq.html#disambiguation](http://womble.decadent.org.uk/c++/template-faq.html#disambiguation)。

# grails-2.0 - 在grails中以一对多关联检索活跃的孩子

> ID：12369503
> 
> 赞同：1
> 
> 时间：2012-09-11T12:15:47.537
> 
> 标签：grails-2.0

我有以下课程

```
class Audit {
    Status status = Status.ACTIVE
}

class Book{
    String name;
    Audit audit
    static embedded = ['audit']
    static belongsTo = [author:Author]
}

class Author{
    String name;
    Audit audit
    List books
    static embedded = ['audit']
    static hasMany = [books:Book]
} 
```

我想为作者检索活动书籍。你能建议我这个查询吗？我正在尝试在 Author 中添加方法，如下所示

```
List<Book> getActiveBooks(){
} 
```

或者如果有任何其他方式来检索我的书......仅作为活动书籍。请帮帮我

以下是带有列的表格

> 书
> 
> 名称、审计状态、作者 ID
> 
> 作者
> 
> 名称，审计状态

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:45:25.807

查看[CriteriaBuilder](http://grails.org/doc/latest/guide/GORM.html#criteria)。

您可以使用它来搜索作者的状态（请参阅“查询关联”部分）。

将此与投影一起使用（请参阅“使用投影查询”）以获取书籍列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T02:08:26.900

一种方法是在 Author 中添加一个 namedQueries 块，然后您可以调用

```
def activeBooks = Author.getActiveBooks().list() 
```

这是名为Queries 的Author 类

```
class Author {
    static namedQueries = {
        getActiveBooks {
            books {
               audit{
                eq 'status', Status.ACTIVE
               }
           }
        }
    }
} 
```

我假设 Status 也是一个域对象。如果是这样，GORM 将匹配状态对象的 id。
请仔细检查语法。

# objective-c - 创建一个 UIViewController

> ID：12369507
> 
> 赞同：0
> 
> 时间：2012-09-11T12:16:16.177
> 
> 标签：objective-c, uiview, uinavigationcontroller

我有一个名为 Map 的文件：

```
@interface Map : UIViewController<MKMapViewDelegate> {
    IBOutlet MKMapView *map;
} 
```

在 interfaceBuider Map 中，当单击选项卡时启动：

![在此处输入图像描述](../Images/70298668e24f94d41715d8f850549918.png)

点击时 Map 打开一个 UITableViewController，这个 UITableView 打开另一个 UITableViewController。

所以我现在想要的是在最后一个 UITableViewController 中，当按下后退按钮时，返回到地图。我从不更改标签，我总是在“普莱诺”

所以，在 Navigation.m 我有：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization

}
return self;
} 
```

在我的第二个UITableView.m 中：

```
Navigation *aMap = [[Navigation alloc]initWithNibName:@"Map" bundle:nil];
[self.navigationController popToViewController:aMap animated:YES]; 
```

还有什么错误：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Tried to pop to a view controller that doesn't exist.' 
```

我怎样才能做到这一点？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:34:19.220

**编辑**：

对于后根

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

对于背部

```
[self.navigationController popViewControllerAnimated:YES]; 
```

# python - Python如何接收表单POST值，而不使用任何框架

> ID：12369512
> 
> 赞同：-2
> 
> 时间：2012-09-11T12:16:33.623
> 
> 标签：python

PHP 可以使用 $_post 接收。我不知道 Python 是如何接收的

```
__author__ = 'Administrator'
import cgi
form = cgi.FieldStorage()
if form.has_key('name'):
    code = form['name'].value
    print code
lxj-PC - - [11/Sep/2012 20:09:55] "POST /cgi-bin/form.py HTTP/1.1" 200 -
lxj-PC - - [11/Sep/2012 20:09:55] command: C:\Python27\python.exe -u D:\python\a
pp\cgi-bin\form.py ""
lxj-PC - - [11/Sep/2012 20:09:55] CGI script exited OK
lxj-PC - - [11/Sep/2012 20:09:55] code 404, message File not found
lxj-PC - - [11/Sep/2012 20:09:55] "GET /favicon.ico HTTP/1.1" 404 - 
```

为什么不能打印出来的值呢？页面输出间隙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:23:22.823

`FieldStorage()`从模块中使用`cgi`，但请记住，整个 PHP 语言本质上*是*一个 Web 框架，如果你有这样的态度“我可以在 PHP 中轻松地做到这一点，而无需使用任何框架，所以我应该使用没有框架的 Python。” WSGI 微框架将使您的生活更轻松。

# android - 如何使用布局或 TextView 设置搜索栏拇指？

> ID：12369519
> 
> 赞同：3
> 
> 时间：2012-09-11T12:17:03.877
> 
> 标签：android, xamarin.android, seekbar

我希望我的搜索栏看起来像这样......![在此处输入图像描述](../Images/d7390ecb45c00f482ce840bfa2d56e19.png)

TextView 应该随着搜索栏的拇指移动......我试过了

seek_needle.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text=""
    />    
    <ImageView 
        android:layout_width="25dp"
        android:layout_height="fill_parent"
        android:src="@drawable/seek_needle"
        />

</LinearLayout> 
```

并在 mail.xml

```
 <SeekBar
                android:id="@+id/seekBar1"
                android:layout_width="349dp"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:max="202"
                android:layout_weight="80"
                android:thumb="@Layout/seek_needle"                  
                  >         </SeekBar> 
```

因为这个应用程序崩溃
了，请帮帮我......

这是logcat输出...

```
 09-11 17:50:23.582: I/dalvikvm(4142): threadid=3: reacting to signal 3
09-11 17:50:23.762: I/dalvikvm(4142): Wrote stack traces to '/data/anr/traces.txt'
09-11 17:50:24.062: I/dalvikvm(4142): threadid=3: reacting to signal 3
09-11 17:50:24.212: I/dalvikvm(4142): Wrote stack traces to '/data/anr/traces.txt'
09-11 17:50:24.582: I/dalvikvm(4142): threadid=3: reacting to signal 3
09-11 17:50:24.632: I/dalvikvm(4142): Wrote stack traces to '/data/anr/traces.txt'
09-11 17:50:24.664: D/dalvikvm(4142): GC_CONCURRENT freed 73K, 2% free 9435K/9607K, paused 7ms+8ms
09-11 17:50:24.862: D/AndroidRuntime(4142): Shutting down VM
09-11 17:50:24.872: W/dalvikvm(4142): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
09-11 17:50:24.952: E/AndroidRuntime(4142): FATAL EXCEPTION: main
09-11 17:50:24.952: E/AndroidRuntime(4142): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.audioscreen/com.example.audioscreen.MainActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.audioscreen/com.example.audioscreen.Fm1Activity}: android.view.InflateException: Binary XML file line #63: Error inflating class android.widget.SeekBar
    09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.os.Looper.loop(Looper.java:137)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at java.lang.reflect.Method.invokeNative(Native Method)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at java.lang.reflect.Method.invoke(Method.java:511)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at dalvik.system.NativeStart.main(Native Method)
09-11 17:50:24.952: E/AndroidRuntime(4142): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.audioscreen/com.example.audioscreen.Fm1Activity}: android.view.InflateException: Binary XML file line #63: Error inflating class android.widget.SeekBar
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1797)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:682)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.widget.TabHost.setCurrentTab(TabHost.java:346)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.widget.TabHost.addTab(TabHost.java:236)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at com.example.audioscreen.MainActivity.onCreate(MainActivity.java:82)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.app.Activity.performCreate(Activity.java:4465)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-11 17:50:24.952: E/AndroidRuntime(4142):     ... 11 more
09-11 17:50:24.952: E/AndroidRuntime(4142): Caused by: android.view.InflateException: Binary XML file line #63: Error inflating class android.widget.SeekBar
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.view.LayoutInflater.createView(LayoutInflater.java:606)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.app.Activity.setContentView(Activity.java:1835)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at com.example.audioscreen.Fm1Activity.onCreate(Fm1Activity.java:24)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.app.Activity.performCreate(Activity.java:4465)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-11 17:50:24.952: E/AndroidRuntime(4142):     ... 21 more
09-11 17:50:24.952: E/AndroidRuntime(4142): Caused by: java.lang.reflect.InvocationTargetException
09-11 17:50:24.952: E/AndroidRuntime(4142):     at java.lang.reflect.Constructor.constructNative(Native Method)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.view.LayoutInflater.createView(LayoutInflater.java:586)
09-11 17:50:24.952: E/AndroidRuntime(4142):     ... 36 more
09-11 17:50:24.952: E/AndroidRuntime(4142): Caused by: android.content.res.Resources$NotFoundException: File res/layout/seek_needle.xml from drawable resource ID #0x7f030008
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.content.res.Resources.loadDrawable(Resources.java:1923)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
09-11 17:50:24.952: E/AndroidRuntime(4142):     at android.widget.AbsSeekBar.<init>(AbsSeekBar.java:70
09-11 17:50:25.032: D/dalvikvm(4142): GC_CONCURRENT freed 797K, 9% free 9183K/10055K, paused 7ms+7ms
09-11 17:50:25.203: I/dalvikvm(4142): threadid=3: reacting to signal 3
09-11 17:50:25.232: I/dalvikvm(4142): Wrote stack traces to '/data/anr/traces.txt'
09-11 17:50:25.642: I/dalvikvm(4142): threadid=3: reacting to signal 3
09-11 17:50:25.662: I/dalvikvm(4142): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-17T13:26:30.480

此方法从您的资源中获取一个可绘制对象，在其上绘制一些文本并返回新的可绘制对象。您需要做的就是给它您的气泡的资源 ID，以及您想要在顶部的文本。然后，您可以将返回的可绘制对象传递到您想要的任何地方。

```
public BitmapDrawable writeOnDrawable(int drawableId, String text){

    Bitmap bm = BitmapFactory.decodeResource(getResources(), drawableId).copy(Bitmap.Config.ARGB_8888, true);

    Paint paint = new Paint(); 
    paint.setStyle(Style.FILL);  
    paint.setColor(Color.BLACK); 
    paint.setTextSize(20); 

    Canvas canvas = new Canvas(bm);
    canvas.drawText(text, 0, bm.getHeight()/2, paint);

    return new BitmapDrawable(bm);
} 
```

复制自..将 [图像和文本组合到drawable](https://stackoverflow.com/questions/6691818/combine-image-and-text-to-drawable)

编辑：

函数调用看起来像这样，`mFreqbar.setThumb(writeOnDrawable(R.drawable.fm_radio_tune_position, mytext));` 我保存了我的`fm_radio_tune_position.png`文件，`res/drawable/`' `mytext`'是我想写在那个可绘制对象之上的字符串

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-10T13:27:13.880

为使用 MonoDroid / Xamarin.Android 的人翻译的答案功能如下：

```
public BitmapDrawable WriteOnDrawable(int drawableId, String text)
    {
        Bitmap bm = BitmapFactory.DecodeResource(Resources, drawableId).Copy(Bitmap.Config.Argb8888, true);

        Paint paint = new Paint();
        paint.SetStyle(Paint.Style.Fill);
        paint.Color = Color.Black;
        paint.TextSize = 20;

        Canvas canvas = new Canvas(bm);
        canvas.DrawText(text, 0, bm.Height / 2, paint);

        return new BitmapDrawable(bm);
    } 
```

# symfony - 如何在不使用命令的情况下从 swiftmailer 发送假脱机

> ID：12369520
> 
> 赞同：8
> 
> 时间：2012-09-11T12:17:03.467
> 
> 标签：symfony, swiftmailer, spool

如何在不使用命令的情况下从 swiftmailer 发送假脱机？

`php app/console swiftmailer:spool:send --env=prod`

我需要以某种方式将其放入 php 文件中，以便服务器管理员可以将其添加到 Schedule.xml 中。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-05T14:08:37.203

这也可以通过[How can I run symfony 2 run command from controller](https://stackoverflow.com/questions/10497567/how-can-i-run-symfony-2-run-command-from-controller)来实现，这样您就不会重复代码。为我工作。

服务.yml：

```
services:
    swiftmailer.command.spool_send:
        class: Symfony\Bundle\SwiftmailerBundle\Command\SendEmailCommand
        calls:
            - [ setContainer, ["@service_container"] ] 
```

控制器代码（简化）：

```
$this->get('swiftmailer.command.spool_send')->run(new ArgvInput(array()), new ConsoleOutput()); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-11T12:29:51.343

只需执行与命令相同的操作即可。从命令 Execute() 函数：

```
 $mailer     = $this->getContainer()->get('mailer');
    $transport  = $mailer->getTransport();

    if ($transport instanceof \Swift_Transport_SpoolTransport) {
        $spool = $transport->getSpool();
        if ($spool instanceof \Swift_ConfigurableSpool) {
            $spool->setMessageLimit($input->getOption('message-limit'));
            $spool->setTimeLimit($input->getOption('time-limit'));
        }
        if ($spool instanceof \Swift_FileSpool) {
            if (null !== $input->getOption('recover-timeout')) {
                $spool->recover($input->getOption('recover-timeout'));
            } else {
                $spool->recover();
            }
        }
        $sent = $spool->flushQueue($this->getContainer()->get('swiftmailer.transport.real'));

        $output->writeln(sprintf('sent %s emails', $sent));
    } 
```

您需要删除 $output->... 行（也许您可以对 $sent 变量做一些有用的事情）。此外，此代码查找两种线轴，如果您的线轴不是其中一种，您可能不需要所有代码。

# java - 如何通过右键单击 Swing 中的面板来绘制形状？

> ID：12369522
> 
> 赞同：1
> 
> 时间：2012-09-11T12:17:11.120
> 
> 标签：java, swing, user-interface, jpanel, jcomponent

我正在尝试创建一个摇摆程序。在我的程序中，我想实现这样的效果：右键单击面板并选择菜单“绘制矩形”，程序应该在面板上绘制一个非常简单的矩形。这是我的代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.BevelBorder;

public class MainWindow extends JFrame {

    JFrame frame = null;
    AboutDialog aboutDialog = null;
    JLabel statusLabel = null;    //label on statusPanel

    public MainWindow() {
        frame = new JFrame("Project");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        //MENUS
        JMenuBar menuBar = new JMenuBar();                //menubar
        JMenu menuDosya = new JMenu("Dosya");           //menus on menubar
        JMenu menuYardim = new JMenu("Yardım");               //menus in menus
        menuBar.add(menuDosya);
        menuBar.add(menuYardim);
        JMenuItem menuItemCikis = new JMenuItem("Çıkış", KeyEvent.VK_Q);        //dosya menus
        menuItemCikis.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent event) {
                System.exit(0);
            }
        });
        menuDosya.add(menuItemCikis);
        JMenuItem menuItemYardim = new JMenuItem("Hakkında", KeyEvent.VK_H);      //hakkinda menus
        menuItemYardim.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent event) {
                JDialog f = new AboutDialog(new JFrame());
                f.show();
            }
        });
        menuYardim.add(menuItemYardim);
        frame.setJMenuBar(menuBar);
        //TOOLBAR
        JToolBar toolbar = new JToolBar();
        JButton exitButton = new JButton("Kapat");
        toolbar.add(exitButton);
        //STATUSBAR
        JPanel statusPanel = new JPanel();
        statusPanel.setBorder(new BevelBorder(BevelBorder.LOWERED));
        frame.add(statusPanel, BorderLayout.SOUTH);
        statusPanel.setPreferredSize(new Dimension(frame.getWidth(), 20));
        statusPanel.setLayout(new BoxLayout(statusPanel, BoxLayout.X_AXIS));
        statusLabel = new JLabel("Ready.");
        statusLabel.setHorizontalAlignment(SwingConstants.LEFT);
        statusPanel.add(statusLabel);
        //MAIN CONTENT OF THE PROGRAM
        final JPanel mainContentPanel = new JPanel();
        //RIGHT CLICK MENU
        final JPopupMenu menuSag = new JPopupMenu("RightClickMenu");
        JMenuItem menuRightClickRectangle = new JMenuItem("draw rectangle");
        menuRightClickRectangle.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent event) {
                //CircleShape cs=new CircleShape();
                mainContentPanel.add(new CircleShape()); //trying to draw.

                mainContentPanel.repaint();
                //mainContentPanel.repaint();     boyle olacak.
            }
        });
        JMenuItem menuRightClickCircle = new JMenuItem("Daire çiz");
        menuSag.add(menuRightClickRectangle);
        menuSag.add(menuRightClickCircle);
        mainContentPanel.addMouseListener(new MouseAdapter() {

            public void mouseReleased(MouseEvent e) {
                if (e.getButton() == MouseEvent.BUTTON3) {
                    menuSag.show(e.getComponent(), e.getX(), e.getY());
                    statusLabel.setText("X=" + e.getX() + "  " + "Y=" + e.getY());

                }
            }
        });
        JButton west = new JButton("West");
        JButton center = new JButton("Center");
        JPanel content = new JPanel();   //framein icindeki genel panel. en genel panel bu.
        content.setLayout(new BorderLayout());
        content.add(toolbar, BorderLayout.NORTH);
        content.add(statusPanel, BorderLayout.SOUTH);
        content.add(west, BorderLayout.WEST);
        content.add(mainContentPanel, BorderLayout.CENTER);
        frame.setContentPane(content);
        frame.setPreferredSize(new Dimension(400, 300));
        frame.setLocationRelativeTo(null);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

问题是面板上没有绘制任何内容。我想程序中有一个事件丢失，但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:22:52.600

You can't do that by calling `add` method.To draw a shape you will have to override paintComponent method:

Example of drawing rectangle:

```
public void paintComponent(Graphics g){
    g.setColor(Color.RED);
    g.fillRect(50,50,50,50);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T13:09:33.673

嗯，为你做了一个简短的例子：

![弹出菜单](../Images/0409019b91248d7cacba9e6ad4a638b4.png)

![正方形绘制](../Images/e2aa0b33ebdd99847d85a951fd0a8572.png)

**测试.java：**

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.util.ArrayList;
import java.util.List;
import javax.swing.*;

public class Test {

    private final JFrame frame = new JFrame();
    private final MyPanel panel = new MyPanel();

    private void createAndShowUI() {
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(false);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().createAndShowUI();
            }
        });
    }
} 
```

**MyPanel.java：**

```
class MyPanel extends JPanel {

    private final JPopupMenu popupMenu = new JPopupMenu();
    private final JMenuItem drawRectJMenu = new JMenuItem("Draw Rectangle here");
    private int x = 0, y = 0;
    private List<Rectangle> recs = new ArrayList<>();

    public MyPanel() {
        initComponents();
    }

    private void initComponents() {
        setBounds(0, 0, 600, 600);
        setPreferredSize(new Dimension(600, 600));
        popupMenu.add(drawRectJMenu);
        add(popupMenu);
        addMouseListener(new MouseListener() {

            @Override
            public void mouseClicked(MouseEvent e) {
                checkForTriggerEvent(e);
            }

            @Override
            public void mouseEntered(MouseEvent e) {
            }

            @Override
            public void mouseExited(MouseEvent e) {
            }

            @Override
            public void mousePressed(MouseEvent e) {
            }

            @Override
            public void mouseReleased(MouseEvent e) {
            }

            private void checkForTriggerEvent(MouseEvent e) {
                if (e.getButton() == MouseEvent.BUTTON3) {
                    x = e.getX();
                    y = e.getY();
                    popupMenu.show(e.getComponent(), x,y);
                }
            }
        });
        drawRectJMenu.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                addRec(new Rectangle(x, y, 100, 100));
                repaint();
            }
        });
    }

    public void addRec(Rectangle rec) {
        recs.add(rec);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        Graphics2D g2d = (Graphics2D) g;

        for (Rectangle rec : recs) {
            g2d.drawRect(rec.x, rec.y, rec.width, rec.height);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T12:30:18.447

请按以下方式修改代码。像这样添加一个新类：

```
 class MainPanel extends JPanel {

    private List<Rectangle> rectangles = new ArrayList<Rectangle>();

    private void addRectangle(Rectangle rectangle) {
      rectangles.add(rectangle);
    }

    public void paintComponent(Graphics g) {
      super.paintComponent(g);
      Graphics2D g2 = (Graphics2D) g;
      for (Rectangle rectangle : rectangles) {
        g2.drawRect(rectangle.x, rectangle.y, rectangle.width, rectangle.height);
      }
    }

  } 
```

然后，而不是

```
final JPanel mainContentPanel = new JPanel(); 
```

你应该做：

```
final MainPanel mainContentPanel = new MainPanel(); 
```

菜单项的动作监听器变成这样：

```
menuRightClickRectangle.addActionListener(new ActionListener() {
  public void actionPerformed(ActionEvent event) {
    // TODO: add your own logic here, currently a hardcoded rectangle
    mainContentPanel.addRectangle(new Rectangle(10, 10, 100, 50));
    mainContentPanel.repaint();
  }
}); 
```

# jquery - jQuery Appends 没有出现在 IE9 中

> ID：12369532
> 
> 赞同：0
> 
> 时间：2012-09-11T12:17:48.693
> 
> 标签：jquery, internet-explorer-9, html5-video, jquery-backstretch

我正在修改一个名为 backstretch 的背景图像拉伸脚本（在[此处](http://srobbin.com/jquery-plugins/backstretch/)找到）以将 HTML5 视频拉伸为浏览器中的全屏背景。

我在 Chrome、Safari 和 FireFox 中使用以下代码，但是，在 IE9 中（惊喜，惊喜）它没有将这些附加附加到不同来源的视频元素。

```
$('video').append("<source src='"+src+".webm' type='video/webm' />");
$('video').append("<source src='"+src+".ogv' type='video/ogg' />");
$('video').append("<source src='"+src+".mp4' type='video/mp4' />"); 
```

这是整个脚本的全部内容。非常感谢任何想法或帮助！提前致谢！

```
/*
 * jQuery Backstretch
 * Version 1.2.8
 * http://srobbin.com/jquery-plugins/jquery-backstretch/
 *
 * Add a dynamically-resized background image to the page
 *
 * Copyright (c) 2012 Scott Robbin (srobbin.com)
 * Licensed under the MIT license
 * https://raw.github.com/srobbin/jquery-backstretch/master/LICENSE.txt
 *
*/

;(function($) {

$.backstretchvideo = function(src, options, callback) {
    var defaultSettings = {
        centeredX: true         // Should we center the image on the X axis?
      , centeredY: true         // Should we center the image on the Y axis?
      , speed: 0                // fadeIn speed for background after image loads (e.g. "fast" or 500)
    }
  , $container = $("#backstretch")
  , settings = $container.data("settings") || defaultSettings // If this has been called once before, use the old settings as the default
  , existingSettings = $container.data('settings')
  , rootElement, supportsFixedPosition, useWindowInnerHeight
  , imgRatio, bgImg, bgWidth, bgHeight, bgOffset, bgCSS;

    // Extend the settings with those the user has provided
    if(options && typeof options == "object") $.extend(settings, options);

    // Just in case the user passed in a function without options
    if(options && typeof options == "function") callback = options;

    $(document).ready(function() {
        /*
         *  Taken from jQuery Mobile 1.1.0
         *  http://jquerymobile.com/
         *
         *  In a nutshell, we need to figure out if fixed positioning is supported.
         *  Unfortunately, this is very difficult to do on iOS, and usually involves
         *  injecting content, scrolling the page, etc.. It's ugly.
         *  jQuery Mobile uses this workaround. It's not ideal, but works.
         *
         *  Modified to detect IE6
         */
        var w = window
          , ua = navigator.userAgent
          , platform = navigator.platform
            // Rendering engine is Webkit, and capture major version
          , wkmatch = ua.match( /AppleWebKit\/([0-9]+)/ )
          , wkversion = !!wkmatch && wkmatch[ 1 ]
          , ffmatch = ua.match( /Fennec\/([0-9]+)/ )
          , ffversion = !!ffmatch && ffmatch[ 1 ]
          , operammobilematch = ua.match( /Opera Mobi\/([0-9]+)/ )
          , omversion = !!operammobilematch && operammobilematch[ 1 ]
          , iematch = ua.match( /MSIE ([0-9]+)/ )
          , ieversion = !!iematch && iematch[ 1 ];

        supportsFixedPosition = !(
          // iOS 4.3 and older : Platform is iPhone/Pad/Touch and Webkit version is less than 534 (ios5)
          (( platform.indexOf( "iPhone" ) > -1 || platform.indexOf( "iPad" ) > -1  || platform.indexOf( "iPod" ) > -1 ) && wkversion && wkversion < 534 )
          ||
          // Opera Mini
          ( w.operamini && ({}).toString.call( w.operamini ) === "[object OperaMini]" )
          ||
          ( operammobilematch && omversion < 7458 )
          ||
          //Android lte 2.1: Platform is Android and Webkit version is less than 533 (Android 2.2)
          ( ua.indexOf( "Android" ) > -1 && wkversion && wkversion < 533 )
          ||
          // Firefox Mobile before 6.0 -
          ( ffversion && ffversion < 6 )
          ||
          // WebOS less than 3
          ( "palmGetResource" in window && wkversion && wkversion < 534 )
          ||
          // MeeGo
          ( ua.indexOf( "MeeGo" ) > -1 && ua.indexOf( "NokiaBrowser/8.5.0" ) > -1 )
          ||
          // IE6
          ( ieversion && ieversion <= 6)
        );

        // Set the root element
        rootElement = supportsFixedPosition ? $(window) : $(document);

        // Should we use the window's innerHeight?
        useWindowInnerHeight = supportsFixedPosition && window.innerHeight;

        // Initialize the plugin
        _init();
    });

    // For chaining
    return this;

    function _init() {
        // Prepend image, wrapped in a DIV, with some positioning and zIndex voodoo
        if(src) {
            var img;

            // If this is the first time that backstretch is being called
            if($container.length == 0) {
                $container = $("<div />").attr("id", "backstretch")
                                         .css({left: 0, top: 0, position: supportsFixedPosition ? "fixed" : "absolute", overflow: "hidden", zIndex: -999999, margin: 0, padding: 0, height: "100%", width: "100%"});
            } else {
                // Prepare to delete any old images
                $container.find("video").addClass("deleteable");
            }

            /* img = $("<img />").css({position: "absolute", display: "none", margin: 0, padding: 0, border: "none", zIndex: -999999, maxWidth: "none"})
                              .bind("load", function(e) { */

            //Video Background
            src = src.substring(0, src.length - 4)                
            img = $('<video poster="'+src+'_poster.jpg" autoplay="autoplay" loop="loop" class="backstrech_video_background" />')
            // Moved CSS to Stylesheet
            //.css({position: "relative", display: "none", margin: 0, padding: 0, border: "none", zIndex: -999999, maxWidth: "none"})
                              .bind("play", function(e) {

                                  var $self = $(this),
                                      imgWidth, imgHeight;

                                  $self.css({width: "inherit", height: "auto"});
                                  imgWidth = this.width || $(e.target).width();
                                  imgHeight = this.height || $(e.target).height();
                                  imgRatio = imgWidth / imgHeight;

                                  _adjustBG();
                                  $self.fadeIn(settings.speed, function(){
                                      // Remove the old images, if necessary.
                                      $container.find('.deleteable').remove();
                                      // Callback
                                      if(typeof callback == "function") callback();
                                  });
                              })
                              .appendTo($container);

            // Append the container to the body, if it's not already there
            if($("body #backstretch").length == 0) {
                /*
                 * Scroll the page one pixel to get the right window height on iOS
                 * Pretty harmless for everyone else
                */
                if ($(window).scrollTop() === 0 ) window.scrollTo(0, 0);
                $("body").append($container);
            }

            // Attach the settings
            $container.data("settings", settings);

            //video.attr("src", src);  // Hack for IE img onload event

            $('video').append("<source src='"+src+".webm' type='video/webm' />");
            $('video').append("<source src='"+src+".ogv' type='video/ogg' />");
            $('video').append("<source src='"+src+".mp4' type='video/mp4' />");

            // Adjust the background size when the window is resized or orientation has changed (iOS)
            $(window).unbind("resize.backstretch").bind("resize.backstretch", function() {
              // Need to do this in order to get the right window height
              if("onorientationchange" in window) {
                if (window.pageYOffset === 0) window.scrollTo(0, 1);
              }
             _adjustBG()
            });
        }
    }

    function _adjustBG() {
        try {
            bgCSS = {left: 0, top: 0}
          , rootWidth = bgWidth = rootElement.width()
          , rootHeight = useWindowInnerHeight ? window.innerHeight : rootElement.height()
          , bgHeight = bgWidth / imgRatio;

            // Make adjustments based on image ratio
            // Note: Offset code provided by Peter Baker (http://ptrbkr.com/). Thanks, Peter!
            if(bgHeight >= rootHeight) {
                bgOffset = (bgHeight - rootHeight) /2;
                if(settings.centeredY) bgCSS.top = "-" + bgOffset + "px";
            } else {
                bgHeight = rootHeight;
                bgWidth = bgHeight * imgRatio;
                bgOffset = (bgWidth - rootWidth) / 2;
                if(settings.centeredX) bgCSS.left = "-" + bgOffset + "px";
            }

            $container.css({width: rootWidth, height: rootHeight})
                      .find("video").css({width: bgWidth, height: bgHeight}).css(bgCSS);
        } catch(err) {
            // IE7 seems to trigger _adjustBG before the image is loaded.
            // This try/catch block is a hack to let it fail gracefully.
        }
    }
};

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:05:56.440

我刚刚遇到了同样的问题。我花了一个小时试图找到问题的根源，我发现由于某种奇怪的原因，IE 不会包含源元素。我尝试了其他所有方法......即使我将元素名称更改为“source”，它仍然有效。

可能解决此问题的唯一方法是将带有源标签的整个视频元素作为一个字符串附加。就我而言（我已经在 php 中生成了视频 el.），我必须使用

```
var video_html = $( '#sve_video' ).clone().wrap('<div>').parent().html(); 
```

我只想更改源标签，如果它们不存在，只需插入我的新标签，如下所示：

```
// get first occurence of '<source'
    var first_src_pos = video_html.indexOf('<source');
    // trim string either before first source, or before closing video tag
    var video_start_tag_end = ( first_src_pos > 0 )
        ? first_src_pos
        : video_html.length - 8;
    var video_start_tag = video_html.substring( 0, video_start_tag_end ); 
```

# c# - 如何在 C# 中使用 Pascal 大小写和 Camel 大小写作为缩写词？

> ID：12369539
> 
> 赞同：9
> 
> 时间：2012-09-11T12:18:05.940
> 
> 标签：c#, coding-style, naming-conventions, camelcasing, pascalcasing

一个简短的首字母缩写词就像只有 2 个字符的 ID 或 DB。

当帕斯卡大小写（用于属性或类名称）和骆驼大小写（输入参数，参数）时如何命名这些？

我知道每家公司都有自己的标准，但我正在寻找更普遍接受的标准。

例如当帕斯卡套管：

```
ProductID or ProductId?
IDOfProduct or IdOfProduct?
DBRate or DbRate?
RateOfDB or RateOfDb? 
```

当骆驼肠衣：

```
productID or productId?
idOfProduct?
dbRate?
rateOfDb or rateOfDB? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T12:25:30.360

根据 MSDN（或 Msdn :)

*   务必将双字符首字母缩写词的两个字符大写，但驼峰式标识符的第一个单词除外。

*   除了驼峰式标识符的第一个单词之外，只有三个或更多字符的首字母缩写词的第一个字符大写。

*   不要在驼峰式标识符的开头将任何首字母缩略词的任何字符大写，无论其长度如何。

更多信息[在这里](http://msdn.microsoft.com/en-us/library/ms229043.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T12:22:13.940

**没关系。**

这真的是个人喜好。当一个简短的首字母缩写词完成一个名称时，我将两者都大写：

```
testDB

or

TestDB 
```

当一个简短的首字母缩写词开始一个名字时，我只大写第一个，因为我认为它使它更具可读性：

```
dbTest

or

DbTest 
```

这都是关于**可读性**的。无论您选择做什么，始终如一地去做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:22:10.780

务必将双字符首字母缩写词的两个字符大写，但驼峰式标识符的第一个单词除外。

名为 DBRate 的属性是用作 Pascal 大小写标识符的第一个单词的短首字母缩写词 (DB) 的一个示例。名为 ioChannel 的参数是一个短首字母缩写词 (IO) 的示例，用作驼峰式标识符的第一个单词。

检查此链接。

[http://msdn.microsoft.com/en-us/library/ms229043(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms229043(v=vs.100).aspx)

# android - Roboguice - 从带有参数的构造函数实例化对象

> ID：12369540
> 
> 赞同：1
> 
> 时间：2012-09-11T12:18:06.780
> 
> 标签：android, android-layout, android-intent, roboguice

最近我下载`Roboguice`并试了一下。总的来说我喜欢它，我认为它可以缓解Android开发过程中的某些方面，但是我遇到了一个还没有找到解决方案的情况：我想注入一个类，但是那个类有一个，或者更多的构造函数有几个参数。

在这种情况下，我将如何指定选择哪个构造函数进行实例化，并将值传递给构造函数？

例如，我有一个`TestRobo`带有 2 个构造函数的类，我想从第二个构造函数实例化对象，将`firstName`,`lastName`作为参数传递：

```
public class TestRobo implements ITestRobo {

    public TestRobo(String fullName) {
        //....
    }

    public TestRobo(String firstName, String lastName) {
        //...
    }
} 
```

现在，如果我像这样注入它：

```
@Inject
private ITestRobo testRobo; 
```

它抛出一个异常，它找不到合适的构造函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:34:30.613

免责声明1：我也是新手。

免责声明2：尚未尝试过。

根据谷歌自己的Guice Documentation，指定使用哪个构造函数的方法是在其中添加@Inject 装饰器

```
 class Test{

    //This constructor is ignored
    Test(){}

    //This constructor is called during injection
    @Inject
    Test(Context pContext){}

    } 
```

在这种情况下，注入器调用第二个构造函数并尝试注入一个 Context 对象来调用它。如果找不到，则会抛出异常。

显然，您也可以将@Inject 装饰器放到其他方法中，这些方法将在注入期间调用构造函数后调用。

资料来源：[Google Guice 官方文档](http://code.google.com/p/google-guice/wiki/InjectionPoints)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:39:25.570

您需要将 ITestRobo 绑定到其 TestRobo 实现。您可以通过将 @ProvidedBy(TestRobo.class) 注释添加到 ITestRobo 来执行此操作，也可以在 configure() 方法中添加模块和 bind(ITestRobo.class).to(TestRobo.class)。

# javascript - 为什么 JSON.stringify 不序列化原型值？

> ID：12369543
> 
> 赞同：16
> 
> 时间：2012-09-11T12:18:20.737
> 
> 标签：javascript, json, node.js, prototype

最近，我一直在 Node.js 和浏览器中进行大量 JSON 解析和传递 Javascript，但遇到了这个难题。

我使用构造函数创建的任何对象都不能通过 JSON.stringify 完全序列化，除非我单独初始化了构造函数中的所有值！这意味着我的原型在设计这些类时变得毫无用处。

有人可以解释为什么以下内容没有按我预期的那样序列化吗？

```
var ClassA = function () { this.initialisedValue = "You can see me!" };
ClassA.prototype = { initialisedValue : "You can't see me!", uninitialisedValue : "You can't see me!" };
var a = new ClassA();
var a_string = JSON.stringify(a); 
```

发生什么了：

a_string == { "initialisedValue" : "你可以看到我！" }

我希望：

a_string == { "initialisedValue" : "你可以看到我！", "uninitialisedValue" : "你看不到我！" }

* * *

**更新（2019 年 1 月 10 日）：**

最后注意到@ncardeli 的答案，它确实允许我们执行以下操作来实现我的上述要求（在 2019 年！）：

代替 `var a_string = JSON.stringify(a);`

和 `var a_string = JSON.stringify(a, Object.keys(ClassA.prototype));`

完整代码：

```
var ClassA = function () { this.initialisedValue = "You can see me!" };
ClassA.prototype = { initialisedValue : "You can't see me!", uninitialisedValue : "You can't see me!" };
var a = new ClassA();
var a_string = JSON.stringify(a, Object.keys(ClassA.prototype));

console.log(a_string) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-11T12:24:33.057

仅仅是因为这是 JSON 的工作方式。来自[ES5 规范](http://es5.github.com/#JO)：

> 令 K 是一个内部字符串列表，由[[Enumerable]] 属性为 true 的 value 的所有**自身属性的名称组成。**

这是有道理的，因为如果包含继承的属性，JSON 规范中没有保留将 JSON 字符串解析回 JavaScript 对象所需的信息的机制。在您的示例中，这将如何解析：

> { "initialisedValue" : "你可以看到我！", "uninitialisedValue" : "你看不到我！" }

除了具有 2 个键值对的平面对象之外，没有任何信息可以将其解析为任何内容。

如果你仔细想想，JSON 并不打算直接映射到 JavaScript 对象。其他语言必须能够将 JSON 字符串解析为简单的名称-值对结构。如果 JSON 字符串包含序列化完整 JavaScript 范围链所需的所有信息，那么其他语言可能无法将其解析为有用的东西。[用json.org](http://www.json.org/)上的 Douglas Crockford 的话来说：

> 这些 [哈希表和数组] 是通用数据结构。几乎所有现代编程语言都以一种或另一种形式支持它们。与编程语言可互换的数据格式也基于这些结构是有道理的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-10-23T17:07:24.650

我想补充一点，即使`JSON.stringify`只会对对象自己的属性进行字符串化，如已接受的答案中所述，您可以通过将数组指定为（称为替换数组）`String`的第二个参数来更改字符串化过程的行为`JSON.stringify`.

如果您使用`String`要字符串化的属性白名单指定一个数组，则字符串化算法将改变其行为并考虑原型链中的属性。

来自[ES5 规范](http://es5.github.io/#JO)：

> 5.  如果 PropertyList 不是未定义的，那么
>     
>     
>     
>     一种。令 K 为 PropertyList。
>     
>     
> 6.  别的
>     
>     
>     
>     一种。令 K 是一个内部字符串列表，由所有 [[Enumerable]] 属性为 true 的 value 自身属性的名称组成。字符串的顺序应与 Object.keys 标准内置函数使用的顺序相同。

如果您事先知道要字符串化的对象的属性名称，则可以执行以下操作：

```
var a_string = JSON.stringify(a, ["initialisedValue", "uninitialisedValue"]);
//  a_string == { "initialisedValue" : "You can see me!", "uninitialisedValue" : "You can't see me!" } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-01T14:09:16.087

还有另一种可能性，仍然可以将原型中的属性进行字符串化。

从 JSON 规范（15.12.3 stringify [http://es5.github.io/#x15.12.3](http://es5.github.io/#x15.12.3)）开始：

```
[...]
2\. If Type(value) is Object, then
    a. Let toJSON be the result of calling the [[Get]] internal method of value with argument "toJSON".
    b. If IsCallable(toJSON) is true
        i. Let value be the result of calling the [[Call]] internal method of toJSON passing value as the this value and with an argument list consisting of key.
[...] 
```

所以 yu 可以编写自己的 JSON 字符串化函数。一般的实现可以是：

```
class Cat {
    constructor(age) {
        this.age = age;
    }

    get callSound() {
        // This does not work as this getter-property is not enumerable
        return "Meow";
    }

    toJSON() {
        const jsonObj = {}
        const self = this; // If you can use arrow functions just use 'this'-keyword.

        // Object.keys will list all 'enumerable' properties
        // First we look at all own properties of 'this'
        Object.keys(this).forEach(function(k) {
            jsonObj[k] = self[k];
        });
        // Then we look at all own properties of this's 'prototype'
        Object.keys(Object.getPrototypeOf(this)).forEach(function(k) {
            jsonObj[k] = self[k];
        });

        return JSON.stringify(jsonObj);
    }
}

Object.defineProperty(Cat.prototype, 'callSound2', {
    // The 'enumerable: true' is important!
    value: "MeowMeow", enumerable: true
});

let aCat = new Cat(4);

console.log(JSON.stringify(aCat));
// prints "{\"age\":4,\"callSound2\":\"MeowMeow\"}" 
```

只要正确的属性（那些你真正想要被 JSON 字符串化的）是可枚举的，而你不想被字符串化的那些不是。因此，当您将值分配给“this”时，您需要小心使哪些属性成为可枚举或隐式可枚举。

另一种可能性是一个一个地手动分配您实际想要进行字符串化的每个属性。这可能不太容易出错。

# python - Pandas - 从 sqlite 数据库中解析日期时间列

> ID：12369546
> 
> 赞同：0
> 
> 时间：2012-09-11T12:18:27.727
> 
> 标签：python, datetime, pandas

我目前正在使用一些动手数据探索 python 库 pandas，其中一列包含一个 datetime 对象。但是，当使用 DataFrame 方法解析表时，日期列中的日期时间对象会被解析为初始值，例如 1970-01-16 14:12:28。

例如，如果我有一个具有以下内容的 np.array：

```
np.array(result, dtype=my_dtype) =
array([ (datetime.datetime(2012, 9, 9, 0, 0), datetime.datetime(2012, 9, 8, 15, 10)),
dtype=[('Date', ('<M8[us]', {})), ('Forecasting', ('<M8[us]', {})), 
```

解析后，将返回以下内容：

```
test = pandas.DataFrame(np.array(result, dtype=my_dtype))
test['Date'] =
1970-01-16 14:12:28.800000 
```

和

```
test['Forecasting'] =
1970-01-16 14:11:57 
```

这是一个错误，还是我做错了什么？

仅供参考：熊猫。**版本**= 0.8.1，numpy。**版本**= 1.6.2 和 Python 2.7.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:22:39.670

I'm not familiar with `panda`, but I suspect something is wrong with the `dtype` you're choosing for your fields. It looks like you're using `[us]`, that is, microseconds from the epoch (1970-01-01), when you probably should be using `days` from the epoch.

Another possibility is to use basic `datetime` objects in your `ndarray`, by using `dtype=object`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T20:19:59.260

这是一个错误。在此报告：http: [//github.com/pydata/pandas/issues/2095](http://github.com/pydata/pandas/issues/2095)

# facebook - OpenId：使用 Facebook 和 Twitter 登录网页

> ID：12369551
> 
> 赞同：1
> 
> 时间：2012-09-11T12:18:44.147
> 
> 标签：facebook, gwt, openid, twitter-oauth, gwt-platform

我已经使用 GWT 实现了适用于 Google 和 Yahoo 的 OpenId 身份验证服务。两个平台的用户都可以用他们的账号登录我的网站，我们可以检索一些基本信息（电子邮件地址）。这是我的一段代码。

```
private static final Map<String, String> openIdProviders;
static {
  openIdProviders = new HashMap<String, String>();
  openIdProviders.put("Google", "https://www.google.com/accounts/o8/id");
  openIdProviders.put("Yahoo", "http://open.login.yahooapis.com/openid20/www.yahoo.com/xrds"); 
}   

userInfo.isSignedIn = false;
for (String providerName : openIdProviders.keySet()) {
  String providerUrl = openIdProviders.get(providerName);
  String loginUrl = userService.createLoginURL(action.getRequestURI(), null, providerUrl, new HashSet<String>());
  userInfo.signInURLs.put(providerName, loginUrl);
} 
```

我怎样才能对 Facebook 和 Twitter 做同样的事情？似乎他们不是 openId 提供者，对吧？Stackoverflow 似乎已经为登录实现了这个。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:11:27.207

我使用[Scribe Java](https://github.com/fernandezpablo85/scribe-java)`FB`实现并`Twitter`登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:29:30.457

Facebook[通过 OAuth 2.0 进行](https://developers.facebook.com/docs/authentication/)身份验证。[客户端](https://developers.facebook.com/docs/authentication/client-side/)和[服务器端](https://developers.facebook.com/docs/authentication/server-side/)身份验证都存在示例。推特是[类似](https://dev.twitter.com/docs/auth)的。

在客户端，[GWT JS Overlay Types](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsOverlay)将帮助您包装您需要进行的 JS 调用。

# objective-c - 单向 UIScrollView

> ID：12369554
> 
> 赞同：0
> 
> 时间：2012-09-11T12:18:53.910
> 
> 标签：objective-c, uiscrollview

我需要让我的 UISCrollView 只接受一个方向的滚动，而不仅仅是一个维度。ScrollView 包含水平方向播放列表中歌曲的专辑封面。它是分页的，因此每个封面都有自己的页面。当用户向左滑动或拖动封面时，下一个封面滑动到位并播放下一首歌曲。

应该不可能回到以前的歌曲或翻唱。我怎样才能防止这种行为？

我尝试了以下方法：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrolledView
{
    if(scrollView.contentOffset.x < (pageIndex * 320) - 320)
        [scrollView setContentOffset:CGPointMake((pageIndex * 320) - 320, 0)];
} 
```

但是如果我快速滑动到“上一个”方向，封面将滑动大约 150px 到“下一个”方向，奇怪。

我也试过用removeFromSuperview删除以前的封面，但这只会留下一个黑色空间，仍然可以拖动。

最后，我试图移动封面：

```
-(void) reloadCoverScrollView{
    for(int i = 1; i < [scrollView.subviews count]; i++){
        [scrollView exchangeSubviewAtIndex:i withSubviewAtIndex:i - 1];
    }
    [scrollView setNeedsDisplay];
} 
```

我怎样才能完成我想要的？ScrollView 应该表现得好像它总是在第一页。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:30:20.463

你有两个选择：

1.  您构建自己的自定义视图
2.  您通过将当前页面移动到偏移量 0 来更改滚动视图行为

我解释了这两种解决方案：

** 自定义视图（无滚动视图）*** 您需要的是一个滚动视图，其中删除了大部分有用的滚动视图功能：没有连续滚动（但分页）、没有缩放、有限的内容大小（所以你被限制在一个页）。在我看来，您应该创建一个视图控制器，在其中实例化两个视图：一个是当前视图，另一个是下一个视图；当前视图可见，下一个视图放置在窗口外。然后添加一个单指平移手势并通过跟踪其状态（它是一个连续手势），您可以将第二个视图滑动到第一个视图之上；当您认为滑动完成时，您将完成动画。在动画结束时，您将新页面设置为“第一页”，并使用下一个视图渲染隐藏的第二页，依此类推......

** 继续使用滚动视图 **

在这种情况下，充当 UIScrollView 委托的视图控制器必须以可见页面放置在内容偏移量零处的方式运行。因此，假设您从第 0 页开始，并且在滚动视图中有一个页面列表：第 1 页，第 2 页，...一旦您滑动到第 1 页并且动画完成，您会立即翻译第 1 页的所有视图左边一页（所以如果你的页面是 320px 宽，你会将所有子视图在左边平移 320px）并且你将删除第 0 页的子视图。然后你会将滚动视图内容偏移重置为原点（0， 0)。因此，最后您会将新页面 1 设置在位置 0，将页面 2 移动到位置 1，依此类推。不可能向左滚动，只能向右滚动。当您使用“removeFromSuperview”时

# php - 跨多个域的 PHP 会话

> ID：12369556
> 
> 赞同：0
> 
> 时间：2012-09-11T12:19:01.087
> 
> 标签：php, ajax, session

我的公司有一个网络服务（abc.com），有一个自己的用户数据库，它工作得很好。现在我的公司想要添加一些额外的服务，这些服务位于与另一个域 (xyz.com) 完全不同的服务器上，但仍然使用来自 abc.com 的相同登录数据，因为我们可以完全控制它并且会有类似的像 xyz.com 这样的服务器，因此只在 xyz.com 上导入用户数据库是没有问题的。

我的第一个想法是在从 xyz.com 提交登录表单时使用来自 abc.com 的 checkuser.php，但后来我了解到会话 cookie 内容已绑定到域。至少我是这么理解的。

之后，我想通过 AJAX 和 HTTPS 访问我的 checkuser.php，并将通过 POST 加密的会话数据提交到 xyz.com。这也失败了，因为出于安全原因，AJAX 似乎不能跨多个服务器工作。

现在我没有想法，不知道如何使用我们的用户数据库安全地验证外国服务器上的用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:25:19.090

我会使用单点登录 (SSO) 而不是共享会话。这样，您就不会使站点代码相互依赖。如果您稍后决定更改其中一个站点上的某些内容，则不必担心会破坏其他站点上的功能，并且如果您选择在新站点中链接，则可以重用相同的解决方案。

更好的是有人已经为您制作了它，而且您可以自己创建的东西甚至可能更安全。

[维基百科](https://en.wikipedia.org/wiki/Single_sign-on)对 SSO 有一些很好的一般知识。另外，请查看 OAuth 和 OpenID。将这些术语与 PH​​P 结合起来，搜索应该会让您走上正轨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:41:02.683

另一种选择是简单地将 xyz.com 上的登录功能直接连接到 abc.com 的数据库以检查登录名和密码。然后，您将 xyz.com 的数据库用于其他所有内容。此外，如果您真的想要，您可以将会话信息存储在 abc.com 上的数据库中，而不是临时文件，那么您也可以从 xyz.com 访问该数据。[这](http://www.tonymarston.net/php-mysql/session-handler.html)是一个如何执行此操作的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:45:13.147

我使用 php 的时间不长，我自己也没有遇到过这个问题，但是，我一直在努力阅读书籍，并找到了一个可以帮助你的答案。

如果您只是尝试访问服务器 xyz.com 上的脚本和数据库，则可以使用以下函数从位于单独服务器 (abc.com) 上的脚本中使用其 url 或 IP 地址从字面上获取脚本的内容：

```
/* This example allows my example script on server mvc.com
to access the script on oreilly.com */
file_get_contents("http://oreilly.com"); 
```

由于您正在远程访问代码，而我在这里在黑暗中拍摄，我认为**file_get_contents ( )**将允许您通过服务器 xyz.com 上的脚本中的 $_POST 或 $_GET 方法设置变量并发送服务器 abc.com 上脚本的值。然后，您可以将这些变量存储在位于单个服务器上的 $_SESSION 变量中，该服务器处理原始 $_SESSION 变量和大部分处理。

It could become a quite complex 'game of catch' between the servers if you need to go back and forth frequently, but I think it may be a way around your problem if you can't move the data onto a single server. If you plan the structure of your scripts well this would allow you to store those $_SESSION variables all in a single place.

# php - 在 Centos 5.8 上安装 PHP5.4

> ID：12369559
> 
> 赞同：3
> 
> 时间：2012-09-11T12:19:06.383
> 
> 标签：php, linux, centos

[尝试使用http://www.how2centos.com/installing-php-5-4-on-centos-5-8/](http://www.how2centos.com/installing-php-5-4-on-centos-5-8/)上的教程从 PHP 5.3 升级到 5.4 。我基本上说要做到以下几点：

```
yum install yum-priorities
rpm -Uvh http://download.fedoraproject.org/pub/epel/5/x86_64/epel-release-5-4.noarch.rpm
rpm -Uvh http://dl.iuscommunity.org/pub/ius/stable/Redhat/5/x86_64/ius-release-1.0-10.ius.el5.noarch.rpm
yum install php54 php54-common php54-devel 
```

执行第二行时，出现以下错误：

```
[root@localhost ~]# rpm -Uvh http://download.fedoraproject.org/pub/epel/5/x86_64/epel-release-5-4.noarch.rpm
Retrieving http://download.fedoraproject.org/pub/epel/5/x86_64/epel-release-5-4.noarch.rpm
error: skipping http://download.fedoraproject.org/pub/epel/5/x86_64/epel-release-5-4.noarch.rpm - transfer failed - Unknown or unexpected error
warning: u 0xc073650 ctrl 0xc074a20 nrefs != 0 (download.fedoraproject.org http) 
```

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:21:37.593

那是因为 download.fedoraproject.org 正在重定向到镜像。RHEL 5 中的 RPM 还没有遵循这一点。尝试用直接的主机名替换它（例如 dl.fedoraproject.org）。

# sql-server - 使用 ADODB 或 LINQ 连接到 SQL Server CE

> ID：12369563
> 
> 赞同：0
> 
> 时间：2012-09-11T12:19:32.713
> 
> 标签：sql-server, linq-to-sql, adodb

我正在尝试访问 Sql Server Compact 数据库。这是一个 clickonce 应用程序，所以如果可以在安装应用程序时创建数据库，我希望它。

我明白了，当应用程序启动时，数据库是使用 SqlCeEngine、SqlCeConnection 等创建的。

但是，以这种方式查询和插入很复杂，所以我希望让它与 ADODB 一起使用。

```
 Dim MyCn As New ADODB.Connection
    MyCn.Provider = "Microsoft.SQLSERVER.CE.OLEDB.3.5"
    MyCn.ConnectionString = My.Settings.LocalConnectionString
    MyCn.Open()

    Dim rSelect As New ADODB.Recordset

    With rSelect
        .Open("Select wID, DirPath, Children From Watches Where DirPath like '" & dialog.SelectedPath & "'", MyCn, ADODB.CursorTypeEnum.adOpenStatic, ADODB.LockTypeEnum.adLockReadOnly)
        If .EOF Then
            .AddNew()
            .Fields!DirPath.Value = dialog.SelectedPath
            .Fields!Children.Value = True
            .Update()
        End If
        .Close()
    End With 
```

但我收到一个错误：

```
In order to evaluate an indexed property, the property must be qualified and the arguments must be explicitly supplied by the user. 
```

或者，我不介意学习如何使用 LINQ to SQL，因为 3.5 支持它，但我还没有找到如何连接到程序第一次启动之前可能不存在的数据库，这意味着我不能使用数据库向导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:49:12.367

这只是一个意见，为什么不使用实体框架： [这](http://msdn.microsoft.com/en-us/library/bb738533.aspx)是一种制作连接手册的方法这只是一个意见，希望对您有所帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:02:51.723

您正在使用 SQL Server CE，本文是您的应用程序的
[演练 http://blogs.msdn.com/b/stevelasker/archive/2008/02/11/stored-procedures-and-sql-server -compact-the-great-debate.aspx](http://blogs.msdn.com/b/stevelasker/archive/2008/02/11/stored-procedures-and-sql-server-compact-the-great-debate.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:32:47.463

找到了一些使用 LINQ to SQL 的教程。
它不像 ADODB 在常规 SQL Server 中那样易于使用，因为您必须为每个表创建类，但这还不错。

# c# - IList 之间的区别 并列出

> ID：12369570
> 
> 赞同：7
> 
> 时间：2012-09-11T12:20:04.183
> 
> 标签：c#, linq, list

> **可能重复：**
> [C# - List<T> 或 IList<T>](https://stackoverflow.com/questions/400135/c-sharp-listt-or-ilistt)

我有一堂课

```
 public class Employee
 {
      public int Id { get; set; }
      public string Name { get; set; }
 } 
```

我需要定义一个列表，用以下方式定义它有什么区别

```
IList<Employee> EmpList ;

Or

List<Employee> EmpList ; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T12:25:22.623

`IList<>`是一个[接口](http://msdn.microsoft.com/en-us/library/87d83y5b%28v=vs.80%29.aspx)。`List<>`是一个具体的类。

其中任何一个都是有效的：

```
 IList<Employee> EmpList = new List<Employee>(); 
```

和

```
 List<Employee> EmpList = new List<Employee>(); 
```

或者

```
 var EmpList = new List<Employee>(); // EmpList is List<Employee> 
```

但是，您不能实例化接口，即以下操作将失败：

```
IList<Employee> EmpList = new IList<Employee>(); 
```

通常，使用依赖项（例如集合）的类和方法应指定限制最少的接口（即最通用的接口）。例如，如果您的方法只需要迭代一个集合，那么 an`IEnumerable<>`就足够了：

```
public void IterateEmployees(IEnumerable<Employee> employees)
{
   foreach(var employee in employees)
   {
     // ...
   }
} 
```

然而，如果消费者需要访问该`Count`属性（而不是必须通过 迭代集合`Count()`），那么 a`ICollection<T>`或更好，`IReadOnlyCollection<T>`将更合适，同样，`IList<T>`仅在需要通过随机访问集合时才需要`[]`或表达需要从集合中添加或删除新项目。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-11T12:24:54.647

`IList<T>`是一个由实现的接口`List<T>.`

您不能创建接口的具体实例，因此：

```
//this will not compile
IList<Employee> EmpList = new IList<Employee>();    

//this is what you're really looking for:
List<Employee> EmpList = new List<Employee>();

//but this will also compile:
IList<Employee> EmpList = new List<Employee>(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-11T12:25:42.967

这里有两个答案。要存储实际列表，请使用 an，`List<T>`因为您需要具体的数据结构。但是，如果您从属性返回它或需要它作为参数，请考虑使用`IList<T>`. 它更通用，允许为参数传递更多类型。同样，它允许返回更多类型，而不仅仅是`List<T>`内部实现发生变化的情况。实际上，您可能需要考虑使用`IEnumerable<T>`返回类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T12:24:35.940

我将让您列举差异，也许有一些漂亮的反思，但 a`List<T>`实现了几个接口，并且`IList<T>`只是其中一个：

```
[SerializableAttribute]
public class List<T> : IList<T>, ICollection<T>, 
    IList, ICollection, IReadOnlyList<T>, IReadOnlyCollection<T>, IEnumerable<T>, 
    IEnumerable 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-11T12:28:01.977

`List`对象允许您创建一个列表，向其中添加内容，删除它，更新它，索引到它等等。`List`只要您只需要一个在其中指定对象类型的通用列表，就可以使用它。

`IList`另一方面是一个接口。（有关接口的更多信息，请参阅 MSDN 接口）。基本上，如果你想创建自己的类型`List`，比如一个名为 SimpleList 的列表类，那么你可以使用接口为你的新类提供基本的方法和结构。`IList`用于当您想要创建自己的特殊子类时，实现`List`. [您可以在此处查看示例](http://www.codeproject.com/Questions/325178/Difference-between-ilist-and-list-in-asp-net)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-11T12:34:04.063

列表有很多种。它们中的每一个都继承自 IList（这就是它是接口的原因）。两个示例是列表（常规列表）和分页列表（这是一个支持分页的列表 - 它通常用于分页搜索结果）。Paged List 和 List 都是 IList 的类型，这意味着 IList 不一定是 List（它可以是 Paged List），反之亦然。

请参阅 PagedList 上的此链接。[https://github.com/TroyGoode/PagedList#readme](https://github.com/TroyGoode/PagedList#readme)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-11T12:25:32.960

区别在于 IList 是一个接口，而 List 是一个类。List 实现了 IList，但是 IList 不能被实例化。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-11T12:24:16.173

IList is an interface, List is a class that implements it, the List type explicitly implements the non generic IList interface

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-11T12:24:19.013

第一个版本是针对接口编程的，是首选（假设您只需要使用 IList 定义的方法）。第二个版本，它的声明基于一个特定的类，是不必要的死板。

# c# - 需要绑定两个DataSource的DataList

> ID：12369572
> 
> 赞同：0
> 
> 时间：2012-09-11T12:20:08.793
> 
> 标签：c#, asp.net

我在 DataList 中显示一些信息。我可以将 DataList 绑定到两个 DataSource 吗？？因为我面临需要从两个不同的表中填充两行的情况。以下是我正在尝试做的事情。

```
<asp:DataList runat="server" id="myDataList">
  <ItemTemplate>
    <b><%# DataBinder.Eval(Container.DataItem, "Column from DataSource1") %></b>
    <br />
    <%# DataBinder.Eval(Container.DataItem, "Column from DataSource2") %>
  </ItemTemplate>
</asp:DataList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:39:02.807

无法将 2 个数据源绑定到单个项目。

理想情况下，您必须通过使用 JOINS 从数据库中获取数据，如果这比在您的服务器端代码中创建一个数据表是不可能的，请从两个数据源中填充它，以便在自定义数据表中您有一行两个数据源中的每一行，然后将该数据表与您的数据列表绑定。

```
DataTable customTable = new DataTable();
        customTable.Columns.Add("Column1");
        customTable.Columns.Add("Column2");

        DataRow drNew = null;
        foreach(DataRow dR in 1stDataSource)
        {
            foreach(DataRow dR1 in 2ndDataSource)
            {
                if(dR["ID"] == dR1["ID"])
                {
                    drNew = customTable.NewRow();
                    drNew["Column1"] = dR["Column1"];
                    drNew["Column2"] = dR1["Column2"];
                    customTable.Rows.Add(drNew);
                    break;
                }
            }
        }

        myDataList.DataSource = customTable;
        myDataList.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:33:05.937

DataSource 无法确定如何组合这两个表（内连接、交叉连接等）。您必须自己组合这些。
我也不能给你代码来组合它们，因为我不知道你的两个表是如何相关的。

如果您必须进行内部连接，只需将第二个数据源中的列添加到第一个表中，然后遍历行以填充表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:38:41.730

最好的方法是创建一个数据表并从每个数据集中导入行以创建一个大数据表，然后绑定它。

但是，您将无法从数据绑定器更新，尽管在 nunespascal 提供的选项中，如果您无论如何都完成了连接/交叉，则无法从数据集进行简单更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:53:47.773

```
 ds.Tables[0].TableName = "Cats";
    ds.Tables[1].TableName = "Products";
    ds.Relations.Add("children", ds.Tables["Cats"].Columns["categoryno"],
                         ds.Tables["Products"].Columns["categoryno"]);
    YourDataList.DataSource = ds;
    YourDataList.DataBind(); 
```

# javascript - 同一个 HTML 页面中的两个不同版本的 JQuery

> ID：12369573
> 
> 赞同：6
> 
> 时间：2012-09-11T12:20:08.357
> 
> 标签：javascript, jquery, html

`</body>`我有一个 HTML 文档，其中我在thickbox 的标题中引用了 jQuery 版本 1.2.2，后来我在用于图片幻灯片的标签之前引用了 jQuery 1.7.1 。

问题是，除非删除 jQuery 1.7.1 的引用，否则厚框将无法工作，这会导致幻灯片停止工作。

我用谷歌搜索了有关`$`冲突的信息，但建议的解决方案都没有奏效。

我见过并尝试过的最常见的是：`var $j = jQuery.noConflict();`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:22:27.433

***If*** the plug-ins are well-behaved, then this should work:

```
<script src="jquery-1.2.2.js"></script>
<script src="thickbox.js"></script>
<script src="jquery-1.7.1.js"></script>
<script src="slideshow.js"></script> 
```

(Obviously those script names are made up.) [Here's an example](http://jsbin.com/ozehiz/1) ([source](http://jsbin.com/ozehiz/1/edit)) (I used jQuery 1.4.2 and jQuery 1.7.1 because Google doesn't host 1.2.2).

The above works with well-behaved plug-ins because a well-behaved plug-in doesn't rely on the global `$` at all, but rather uses the value of the `jQuery` global *as of when it was loaded* and grabs a reference to it in a closure, then uses that local reference throughout the plug-in's code, like this:

```
// Example plug-in setup
(function($) {
    // ...Plug-in code using `$` here -- note it's a *local* `$`,
    // not the global `$`, and not the global `jQuery`...
})(jQuery); 
```

or

```
(function() {
    var $ = jQuery;

    // ...Plug-in code using `$` here -- note it's a *local* `$`,
    // not the global `$`, and not the global `jQuery`...
})(); 
```

Both of those grab the global `jQuery` value *as of when the plug-in is loaded* and then use their local alias throughout.

If the plug-in wants to wait for the ready event, it can also do this:

```
jQuery(function($) {
    // ...Plug-in code using `$` here -- note it's a *local* `$`,
    // not the global `$`, and not the global `jQuery`...
}); 
```

...which uses the jQuery function passed into the ready handler.

Any of those three would work correctly (with thickbox seeing jQuery 1.2.2, and slideshow seeing jQuery 1.7.1) with the script load order listed above.

But the "if" in my opening sentence is a *big* "if". A lot of plug-ins are not written to be bullet-proof in this way.

* * *

The above notwithstanding, I would migrate away from any plug-in that *requires* jQuery 1.2.2 in order to work, and wherever possible (and it's *almost* always possible) avoid having to load two different versions of any library, including jQuery, in the same page.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T12:24:49.513

```
<script src="http://code.jquery.com/jquery-1.2.2.min.js"></script>
<script type="text/javascript">
  var jQ122 = jQuery.noConflict();
</script>
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script type="text/javascript">
  var jQ171 = jQuery.noConflict();

  (function($) { 
    $(function() {
      // here $ is jQuery 1.2.2
    });
  })(jQ122);

  (function($) { 
    $(function() {
      // here $ is jQuery 1.7.1
    });
  })(jQ171);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T22:12:27.670

尽管您可以使用`jQuery.noConflict();`同时声明不同版本的 jQuery。

当我这样做时，我经常在某些库的 IE8 上遇到一些问题。

因此，另一种解决方案是使用 iframe 在当前页面中加载页面。

在一个页面上有一个给定版本的 jQuery，在第二个页面上有另一个。

例如：

```
<iframe frameborder="0" width="700" height ="400" scrolling="no" seamless="seamless" src="your.html"></iframe> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T12:24:30.473

我不建议使用两个不同版本的 jQuery。还有其他一些可以与最新的 jQuery 完美配合的thickbox 替代品。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T12:28:05.377

您想要做的是一种非常糟糕的做法（您确实应该将所有代码迁移到同一版本）但理论上可以做到......

无论如何，您都需要对相应的插件进行更改...考虑以下代码：

```
<script src="jquery-1.4.js"></script>
var jQuery14 = jQuery;
<script src="jquery-1.7.js"></script>
var jQuery17 = jQuery; 
```

然后，您将在将 jQuery 交给插件的地方更改插件的代码，这看起来类似于：

```
(function( $ ){
     // all your plugins code would be here
})( jQuery );     // replace "jQuery" with one of your respective jQuery14/jQuery17 versions/variables 
```

被告知..这至少可以说非常非常混乱！编写干净的代码或稍后付款！:)

# ruby-on-rails - Rails 未更改生成的控制器，以前工作过，现在出现 NoMethod 错误

> ID：12369583
> 
> 赞同：0
> 
> 时间：2012-09-11T12:20:44.637
> 
> 标签：ruby-on-rails

这是我未更改的控制器：

```
 def create
    @user = User.new(params[:user])

    respond_to do |format|
      if @user.save
        format.html { redirect_to @user, notice: 'User was successfully created.' }
        format.json { render json: @user, status: :created, location: @user }
      else
        format.html { render action: "new" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end 
```

这是我的路线：

```
 root :to => "songs#index"
  match '/votes/:song_id/:user_id' => "votes#create"
  resources :votes

  resource :session

  resources :users

  resources :songs

  match '/login' => "sessions#new", :as => "login" 
  match '/logout' => "sessions#destroy", :as => "logout" 
```

和错误：

```
undefined method `user' for #<User:0x00000102b42a00>

Application Trace | Framework Trace | Full Trace
app/controllers/users_controller.rb:46:in `block in create'
app/controllers/users_controller.rb:45:in `create'
Request

Parameters:

{"utf8"=>"✓",
 "authenticity_token"=>"oOzmpsbEJtnHC4YGeAf4N6pVxfK+Zf4W9ec+0E/Eds0=",
 "user"=>{"email"=>"bhjjhb@hui.com",
 "password"=>"[FILTERED]"},
 "commit"=>"Create User"} 
```

模型：

```
class User < ActiveRecord::Base
  attr_accessible :email, :password
  validates_uniqueness_of :user
  validates_presence_of :password

  has_many :votes

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:22:28.090

[http://guides.rubyonrails.org/active_record_validations_callbacks.html#uniqueness](http://guides.rubyonrails.org/active_record_validations_callbacks.html#uniqueness)

> 这个助手验证***属性***的值是唯一的

您的问题在于您的验证；`validates_uniqueness_of`检查模型属性的唯一性，因此`validates_uniqueness_of :user`尝试检查用户的`user`属性是否唯一。在此过程中，它调用`@user.user`，从而生成`NoMethodError`.

编辑添加：正如@Amar 所说，解决此问题的方法是验证某些属性或属性集的唯一性，这些属性或属性集对于每个用户记录都是唯一的（例如`:email`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:29:05.213

而不是`validates_uniqueness_of :user`使用此`validates_uniqueness_of :email` 验证主要适用于属性

# php - 无需注册为应用即可登录 facebook？

> ID：12369584
> 
> 赞同：0
> 
> 时间：2012-09-11T12:20:44.800
> 
> 标签：php, facebook, facebook-graph-api, dashboard, facebook-login

我对 facebook 应用程序很陌生。我读了很多书；我已阅读有关 facebook connect、graph、FQL 但似乎我可以找到一种无需他/她验证我的应用程序即可登录用户的方法。是否可以在不注册为应用程序的情况下实现像 hoosuite 这样的 facebook 仪表板？

谢谢布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:29:11.437

不，我不认为你可以这样做，因为 Facebook 会验证你的 app-id 并通过验证你的 app id 和密钥来共享 user-id。所以我们需要在使用 SDK appid 和密钥时指定一些像这样的东西

```
 $facebook = new Facebook(array(
            'appId'  => '2312312313123',
            'secret' => 'asdaaff12434314asdr14112',
    )); 
```

没有这个，任何脸书用户属性都无法访问。

# wordpress - tinymce 按钮触发单击不起作用

> ID：12369587
> 
> 赞同：-1
> 
> 时间：2012-09-11T12:20:50.883
> 
> 标签：wordpress, tinymce

我正在使用wordpress，我在编辑器上添加了一些按钮我想触发点击它的触发点击但不打开灯箱

例如按钮代码看起来像

```
<td style="position: relative">
    <a title="Add New Alert" aria-labelledby="content_admin_alert_voice" onClick="return false;" onMouseDown="return false;" class="mceButton mceButtonEnabled mce_admin_alert" href="javascript:;" id="content_admin_alert" role="button" tabindex="-1">
    <img alt="Add New Alert" src="http://www.xyz.com/themes/abc/wp-content/themes/abc/admin/js/../img/icon-alert.png" class="mceIcon"><span id="content_admin_alert_voice" style="display: none;" class="mceVoiceLabel mceIconOnly">
    Add New Alert
    </span>
    </a>
</td> 
```

我正在单击#content_admin_alert，但没有像我们实际单击该按钮那样发生操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:04:13.123

我有一段时间没有玩 TinyMCE，但是 onClick 和 onMouseDown 事件返回 false，这基本上会取消任何点击操作。

# java - 当父级调整大小时，如何使我的 JScrollPane 增长和缩小？

> ID：12369590
> 
> 赞同：3
> 
> 时间：2012-09-11T12:20:57.193
> 
> 标签：java, swing, jscrollpane, layout-manager, gridbaglayout

我有一个框架，里面有一个 JPanel，里面有一个 JScroll，我想要的是，当框架调整大小时，JScrollPane 的宽度会增长到适合它。此功能似乎工作正常，但是，在调整到较小尺寸时，我的 JScrollPane 不会缩小。

```
package com.protocase.notes.views;

import com.protocase.notes.controller.NotesController;
import com.protocase.notes.model.Note;
import java.awt.CardLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.border.BevelBorder;

/**
 * @author dah01
 */
public class NotesPanel extends JPanel {
    // <editor-fold defaultstate="collapsed" desc="Attributes">
    private Note note;
    private NotesController controller;
    private CardLayout cardLayout;
    //</editor-fold>
    // <editor-fold defaultstate="collapsed" desc="Getters N' Setters">

    public NotesController getController() {
        return controller;
    }

    public void setController(NotesController controller) {
        this.controller = controller;
    }

    public Note getNote() {
        return note;
    }

    public void setNote(Note note) {
        this.note = note;
    }
    //</editor-fold>
    // <editor-fold defaultstate="collapsed" desc="Constructor">

    /**
     * Sets up a note panel that shows everything about the note.
     * @param note 
     */
    public NotesPanel(Note note, NotesController controller) {
        this.note = note;
        cardLayout = new CardLayout();
        this.setLayout(cardLayout);

        // -- Setup the layout manager.
        this.setBackground(new Color(199, 187, 192));
        this.setBorder(new BevelBorder(BevelBorder.RAISED));

        // -- ViewPanel
        this.add("ViewPanel", makeViewPanel());
        this.add("EditPanel", makeEditPanel());
    }
    //</editor-fold>
    // <editor-fold defaultstate="collapsed" desc="EditPanel">
    private JPanel makeEditPanel() {
        JPanel editPanel = new JPanel();
        editPanel.setLayout(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();

        c.fill = GridBagConstraints.HORIZONTAL;
        c.gridy = 0;
        c.weightx = 1;
        c.weighty = 0.3;
        editPanel.add(makeCreatorLabel(), c);

        c.gridy++;
        editPanel.add(makeEditTextScroll(), c);

        c.gridy++;
        editPanel.add(makeEditorLabel(), c);

        c.gridy++;
        c.anchor = GridBagConstraints.EAST;
        editPanel.add(makeSaveButton(), c);

        return editPanel;
    }

    private JScrollPane makeEditTextScroll() {
        JTextArea notesContentsArea = new JTextArea(note.getContents());
        notesContentsArea.setLineWrap(true);
        notesContentsArea.setWrapStyleWord(true);
        JScrollPane scrollPane = new JScrollPane(notesContentsArea);
        scrollPane.setAlignmentX(JScrollPane.LEFT_ALIGNMENT);
        return scrollPane;
    }

    private JButton makeSaveButton() {
        final CardLayout l = this.cardLayout;
        final JPanel p = this;

        final NotesController c = this.controller;
        final Note n = this.note;
        ActionListener al = new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                //controller.saveNote(n);
                l.next(p);
            }
        };

        JButton saveButton = new JButton("Save");
        saveButton.addActionListener(al);

        return saveButton;
    }

    //</editor-fold>
    // <editor-fold defaultstate="collapsed" desc="ViewPanel">
    private JPanel makeViewPanel() {
        JPanel viewPanel = new JPanel();
        viewPanel.setLayout(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();

        c.fill = GridBagConstraints.HORIZONTAL  ;
        c.gridy = 0;
        c.weightx = 1;
        c.weighty = 0.3;
        viewPanel.add(makeCreatorLabel(), c);

        c.gridy++;
        viewPanel.add(makeNoteTextArea(), c);

        c.gridy++;
        viewPanel.add(makeEditorLabel(), c);

        c.gridy++;
        c.anchor = GridBagConstraints.EAST;
        viewPanel.add(makeEditButton(), c);

        return viewPanel;
    }

    private JLabel makeCreatorLabel() {
        DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
        if (note != null) {
            String noteBy = "Note by " + note.getCreator();

            String noteCreated = formatter.format(note.getDateCreated());
            JLabel creatorLabel = new JLabel(noteBy + " @ " + noteCreated);
            creatorLabel.setAlignmentX(JLabel.LEFT_ALIGNMENT);
            return creatorLabel;
        } else {
            System.out.println("NOTE IS NULL");
            return null;
        }

    }

    private JScrollPane makeNoteTextArea() {
        // -- Setup the notes area.
        JTextArea notesContentsArea = new JTextArea(note.getContents());
        notesContentsArea.setEditable(false);
        notesContentsArea.setLineWrap(true);
        notesContentsArea.setWrapStyleWord(true);
        JScrollPane scrollPane = new JScrollPane(notesContentsArea);
        scrollPane.setAlignmentX(JScrollPane.LEFT_ALIGNMENT);
        return scrollPane;
    }

    private JLabel makeEditorLabel() {
        // -- Setup the edited by label.
        JLabel editorLabel = new JLabel(" -- Last edited by " + note.getLastEdited() + " at " + note.getDateModified());
        editorLabel.setAlignmentX(Component.LEFT_ALIGNMENT);
        return editorLabel;
    }

    private JButton makeEditButton() {
        final CardLayout l = this.cardLayout;
        final JPanel p = this;

        ActionListener ar = new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                l.next(p);
            }
        };

        JButton editButton = new JButton("Edit");
        editButton.addActionListener(ar);

        return editButton;
    }
    //</editor-fold>
    // <editor-fold defaultstate="collapsed" desc="Grow Width When Resized">

    @Override
    public Dimension getPreferredSize() {
        int fw  = this.getParent().getSize().width;
        int fh = super.getPreferredSize().height;
        return new Dimension(fw,fh);
    }
    //</editor-fold>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:59:42.103

解决方案是停止覆盖外部组件的 getPreferedSize ....

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-22T14:55:30.737

在您的 JTextArea 上尝试 setLineWrap(false)。

# java - 未找到 GCM 接收器包

> ID：12369594
> 
> 赞同：2
> 
> 时间：2012-09-11T12:21:02.677
> 
> 标签：java, android, android-c2dm, google-cloud-messaging

我正在研究 GCM（Google Cloud Messaging，不推荐使用的旧名称是 C2DM）。我使用不同的设备。操作运行良好，即使应用程序已关闭。但在 nexus 平板电脑上，应用程序关闭时会发生错误。如果应用程序正在进行中，我的 GCM 代码适用于我尝试的所有设备。现在：我寻找这些问题，我发现有其他人的错误清单。如果我的清单错误，为什么除了 nexus 平板电脑以外的其他设备可以正确执行我的代码？我可以认为我的清单是错误的吗？

这是我的清单：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
       package="android.borda.C2DM"
       android:versionCode="1"
      android:versionName="1.0" >

   <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
   <permission android:name="android.borda.C2DM.permission.C2D_MESSAGE" android:protectionLevel="signature" />

     <uses-permission android:name="android.borda.C2DM.permission.C2D_MESSAGE" /> 

      <!-- App receives GCM messages. -->
  <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
  <!-- GCM connects to Google Services. -->
  <uses-permission android:name="android.permission.INTERNET" /> 
  <!-- GCM requires a Google account. -->
 <uses-permission android:name="android.permission.GET_ACCOUNTS" />
      <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

  <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND">
       <intent-filter>
       <action android:name="com.google.android.c2dm.intent.RECEIVE" />
       <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
      <category android:name="android.borda.C2DM" />
     </intent-filter>
    </receiver>
     <service android:name=".GCMIntentService" />
     </application>

     </manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:34:59.087

> 关闭应用程序时发生错误

什么样的错误？

如果您在应用关闭时无法在您的应用（android 3.1+）中接收 gcm 消息 - 请查看该[问题](https://stackoverflow.com/questions/12302812/gcm-push-notifications-on-android-3-1-disable-broadcast-receiver)。

# css - 如何在 Google Fusion Tables 中格式化卡片，以便文本/图像出现在多列中

> ID：12369597
> 
> 赞同：0
> 
> 时间：2012-09-11T12:21:16.767
> 
> 标签：css, google-fusion-tables, multiple-columns

我一直在尝试使用普通的 CSS 脚本将文本/图像分成列，但谷歌自定义卡界面无法识别它们。我注意到所有命令在风格上都与 CSS 略有不同，尽管据我所知是从该语言派生的。我尝试在这个 google 变体上寻找一些通用参考资料来解决这个问题，但到目前为止还没有任何运气。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:56:17.263

卡片布局确实使用标准 CSS。我们会剔除任何可能存在安全风险的内容，但您不太可能遇到这种情况。您能否包含指向您的表格的链接以及您认为应该有效但无效的 CSS 示例？

如果您不想让您的表可访问，您可以发送邮件到 googletables-feedback@google.com，我们可以从那里接听对话。

# c# - Cannot apply Click event to the button with the custom button style

> ID：12369599
> 
> 赞同：0
> 
> 时间：2012-09-11T12:21:27.387
> 
> 标签：c#, wpf, xaml, .net-4.0

Following is the structure of my data:

```
public class TokenItems 
{ 
    public int ID { get; set; } 
    public int itemID { get; set; }
    public string name { get; set; } 
    public int qty { get; set; } 
    public int twQty { get; set; } 
    public bool readyStatus { get; set; } 
    public Nullable<DateTime> orderOn { get; set; } 
    public int styleType { get; set; } 
}

public class Token 
{ 
    public int tokenNo { get; set; } 
    public Nullable<DateTime> startedOn { get; set; } 
    public List<TokenItems> tokenItems { get; set; } 
    public bool readyStatus { get; set; } 
    public bool acceptStatus { get; set; } 
} 
```

The above structure fits well in the following DataTemplate. (It has multiple data template, DataTemplate within the DataTemplate)

TokenPanel has the data from Token class which is assigned from code behind like this:

```
TokenPanel.ItemsSource = List<Token> filledList; 
```

tokenItems is assigned within the XAML:

```
ItemsSource = {Binding List<TokenItems> tokenItem} 
```

The Template of tokenItems further contains the template of buttons which are created from the list items of the tokenItem.

I have applied custom style (redButton) to the button with Click event (listClick).

```
<ScrollViewer>
            <ItemsControl x:Name="TokenPanel">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="0.119*"/>
                                <RowDefinition Height="0.881*"/>
                            </Grid.RowDefinitions>
                            <TextBlock TextWrapping="Wrap" Text="{Binding tokenNo}" />
                            <StackPanel Grid.Row="1" Width="Auto" HorizontalAlignment="Stretch">
                                <ItemsControl Height="Auto" ItemsSource="{Binding tokenItems}" HorizontalAlignment="Stretch" Width="Auto">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Button Height="38" Width="Auto" Style="{StaticResource redButton}" HorizontalContentAlignment="Stretch" Click="listClick" >
            <TextBlock Text= "{Binding name}"/>
                                            </Button>

                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>

                                </ItemsControl>
                            </StackPanel>
                        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Height="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Width="Auto" x:Name="tokenListBox" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>
        </ScrollViewer> 
```

The program compiles well without any error. However when I update the TokenList it shows error with NullReference exception somewhere in XAML parsing.

I tried removing the Click event property from the XAML without any click event assigned. This executed program very well. But I can't click on the button which is the most thing I want. Further, I need custom style as well.

I am unable to figure out what the problem is... A quick fix will be highly appreciated.

EDIT:

This updates the tokenList;

```
 public void update() {
        List<TokenItems> tempList = new List<TokenItems>();
        tokenList.Clear(); // clears previous items in tokenList;
        while(database.Read()) {
                tempList.Add(new Token() { 
                           item= (int)database["item"]
                        });
        }

           var temp = new List<BumpBar.TokenItems>();
           temp.AddRange(tokenModify(tempItems)); // modifies the items within the list
           tempItems.Clear(); // clear to refill the tempItems
           tempItems.AddRange(temp);

           tokenList.Add(new Token() { 
                     tokenNo = tokensList[i].tokenNo, 
                     tokenItems = tempItems, 
                      startedOn = tokensList[i].startedOn 
                    });
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:31:28.503

发布与此评论相关的代码。我猜您不小心使该令牌列表无效。

> 该程序编译良好，没有任何错误。但是，当我更新 TokenList 时，它会在 XAML 解析中的某处显示 NullReference 异常错误。

# unix - 如果行包含“-”或“”，则输出到新文件

> ID：12369600
> 
> 赞同：1
> 
> 时间：2012-09-11T12:21:32.363
> 
> 标签：unix, text, file-io, sed, grep

有没有办法在 unix 命令中执行以下 python？也许用 sed 或 grep ？

```
for line in open(input_file)
    if "-" or " " in line:
        print>>line , output_file 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:23:45.500

以下是使用 sed 的方法：

```
sed -n '/[ -]/p' input_file > output_file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T12:26:02.213

下面对你有用吗？

```
grep -P '[ -]' input_file > output_file 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T12:26:15.743

这应该这样做：

```
grep -e '-' -e ' ' input_file > output_file 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T12:34:08.853

```
grep "\-\| " input_file > output_file 
```

# salesforce - Federated authentication and Delegated authentication in salesforce

> ID：12369604
> 
> 赞同：19
> 
> 时间：2012-09-11T12:21:49.283
> 
> 标签：salesforce, single-sign-on, federated-identity

Anybody know the difference between Federated authentication and Delegated authentication in salesforce? Can you explain the flow of request in these two methods?

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-11T12:50:22.153

主要区别是在联合身份验证中使用安全断言标记语言 (SAML)。

> **委托身份**验证 如果您的组织中有移动用户，或者如果您想要为合作伙伴入口网站或客户入口网站启用单点登录，请使用委派身份验证。您必须请求 salesforce.com 启用此功能。这个秘籍更详细地解释了委托身份验证。
> 
> **使用 SAML**的联合身份验证联合身份验证使用 SAML，这是一种安全集成的行业标准。通过 Salesforce.com 投资 SAML 可以与其他产品或服务一起使用。如果您使用 SAML，则不必将内部服务器暴露给 Internet：安全集成是使用浏览器完成的。此外，Salesforce.com 从不处理贵组织使用的任何密码。有关更多信息，请参阅 Salesforce.com 在线帮助中的“为单点登录配置 SAML 设置”。

**区别**

委托身份验证相对于联合身份验证有一些缺点。首先，**委托身份验证本质上**不如**联合身份验证安全**。即使加密，委托身份验证仍会通过 Internet 将用户名和密码（甚至可能是您的网络密码）发送到 Force.com。一些公司的政策禁止第三方处理其网络密码。其次，**委托认证**要求实施它的公司做更多的工作****。为组织配置的 Web 服务端点必须经过开发、托管、在 Internet 上公开并与公司的身份存储集成。

[委托](https://help.salesforce.com/HTViewHelpDoc?id=sso_delauthentication.htm&language=en_US)的更详细的流程和代码示例

![在此处输入图像描述](../Images/3ec6275347d15df7d55b0c8240b78140.png)

[SSO 宽度 SAML](http://wiki.developerforce.com/page/Single_Sign-On_with_SAML_on_Force.com)的更详细流程

![在此处输入图像描述](../Images/63ad87c75760b265d7424d4e5362e7b7.png)

# jquery - Finding closest to the clicked button

> ID：12369606
> 
> 赞同：1
> 
> 时间：2012-09-11T12:21:54.103
> 
> 标签：jquery

```
$(document).ready(function()
{
    $('button').on('click', function()
    {            
        $('.container').children().eq(1).append($('p.important').text());
    });
});

<div class="container">
    <p>1</p>
    <p>2</p>

    <button>Lawl, a button.</button>

    <p>3</p>
    <p class="important">Text to be copied</p>
</div> 
```

I want to find the closest upper p tag to my button. For example, if I move button under `<p>1</p>`, it should append values to it. If I move my button to bottom, it should add append values to `<p>3</p>`.

Is it possible with my current HTML?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:35:54.730

您可以使用`next`或`prev`方法。

> `.next( [selector] )`：获取匹配元素集中每个元素的紧随其后的兄弟。如果提供了选择器，则仅当它与该选择器匹配时，它才会检索下一个兄弟。

> `.prev( [selector] )`：获取匹配元素集中每个元素的前一个兄弟元素，可选地由选择器过滤。

```
$('.container button').on('click', function(e) {
      e.preventDefault(); 
      var txt = $('p.important').text();
      $(this).next('p').append(txt);    
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:26:49.947

尝试[最接近的方法](http://api.jquery.com/closest/)。它必须成功！

```
$("button").click(function(){
    $(this).closest('p');
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:29:31.163

您可以根据需要使用以下方法之一：

*   [Next() - 向下遍历 dom 树](http://api.jquery.com/next/)
*   [Closest() - 遍历 dom 树](http://api.jquery.com/closest/)

# ios - NSOperation deadlocks and blocks NSOperationQueue

> ID：12369607
> 
> 赞同：3
> 
> 时间：2012-09-11T12:22:04.070
> 
> 标签：ios, multithreading, amazon-s3, nsoperation, nsoperationqueue

I use a subclass of NSOperation to upload large files to AWS S3 using Amazon's iOS SDK (v1.3.2). This all works fine, but some beta testers experience deadlocks (iOS 5.1.1). The result is that the NSOperationQueue in which the operations are scheduled is blocked as only one operation is allowed to run at one time. The problem is that I cannot reproduce the issue whereas the beta testers experience this problem every single time.

The operation is quite complex due to how the AWS iOS SDK works. However, the problem is not related to the AWS iOS SDK as far as I know based on my testing. The operation's main method is pasted below. The idea of the operation's main method is based on [this Stack Overflow question](https://stackoverflow.com/questions/8230870/using-delegates-operations-and-queues).

```
- (void)main {
    // Operation Should Terminate
    _operationShouldTerminate = NO;

    // Notify Delegate
    dispatch_async(dispatch_get_main_queue(), ^{
        [self.delegate operation:self isPreparingUploadWithUuid:self.uuid];
    });

    // Increment Network Activity Count
    [self incrementNetworkActivityCount];

    // Verify S3 Credentials
    [self verifyS3Credentials];

    while (!_operationShouldTerminate) {
        if ([self isCancelled]) {
            _operationShouldTerminate = YES;

        } else {
            // Create Run Loop
            [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
        }
    }

    // Decrement Network Activity Count
    [self decrementNetworkActivityCount];

    NSLog(@"Operation Will Terminate");
} 
```

The method that finalizes the multipart upload sets the boolean `_operationShouldTerminate` to `YES` to terminate the operation. That method looks like this.

```
- (void)finalizeMultipartUpload {
    // Notify Delegate
    dispatch_async(dispatch_get_main_queue(), ^{
        [self.delegate operation:self didFinishUploadingUploadWithUuid:self.uuid];
    });

    // Operation Should Terminate
    _operationShouldTerminate = YES;

    NSLog(@"Finalize Multipart Upload");
} 
```

The final log statement is printed to the console, but the while loop in the main method does not seem to exit as the final log statement in the operation's main method is not printed to the console. As a result, the operation queue in which the operation is scheduled, is blocked and any scheduled operations are not executed as a result.

The operation's `isFinished` method simply returns `_operationShouldTerminate` as seen below.

```
- (BOOL)isFinished {
    return _operationShouldTerminate;
} 
```

It is odd that the while loop is not exited and it is even more odd that it does not happen on any of my own test devices (iPhone 3GS, iPad 1, and iPad 3). Any help or pointers are much appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:04:29.760

事实证明，该问题的解决方案既复杂又简单。我错误地认为操作的方法和委托回调是在同一个线程上执行的，即`main`调用操作方法的线程。这并非总是如此。

尽管这在我的测试和我的设备（iPhone 3GS）上都是正确的，这就是为什么我自己没有遇到这个问题的原因。然而，我的 beta 测试人员使用了具有多核处理器的设备 (iPhone 4/4S)，这导致某些代码在与调用操作方法的线程不同的线程上执行`main`。

这样做的结果是在错误线程上`_operationShouldTerminate`的方法中进行了修改。`finalizeMultipartUpload`这反过来意味着方法的`while`循环`main`没有正确退出，导致操作死锁。

简而言之，解决方案是在调用`_operationShouldTerminate`该方法的同一线程上进行更新。`main`这将正确退出`while`循环并退出操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:00:15.773

您的代码存在许多问题，我可以提供两种解决方案：

[1) 阅读 Apple's Concurrency Programming Guide](http://developer.apple.com/library/mac/documentation/General/Conceptual/ConcurrencyProgrammingGuide/ConcurrencyProgrammingGuide.pdf)中的 Concurrent NSOperations 。要使 runLoop 保持“活动”，您必须添加一个端口或安排一个计时器。主循环应该包含一个自动释放池，因为您可能没有得到一个（请参阅同一备忘录中的内存管理）。您需要实现 KVO 以让 operationQueue 知道您的操作何时完成。

2）或者，您可以采用[少量经过现场测试的强化代码](https://github.com/dhoerl/NSOperation-WebFetches-MadeEasy)并重用它。该 Xcode 项目包含您感兴趣的三个类：一个 ConcurrentOperation 文件，它可以很好地完成您在上面尝试完成的工作。Webfetcher.m 类展示了如何对并发操作进行子类化以从 Web 执行异步 URL 获取。OperationsRunner 是一个小的帮助文件，您可以添加到任何类型的类中来管理操作队列（运行、取消、查询等）。以上所有代码都少于 100 行，为您的代码工作提供了基础。OperationsRunner.h 文件也提供了“如何做”。

# windows-phone-7 - 在 Windows Phone 开发中使用 WCF 数据服务 (ODATA) 操作

> ID：12369610
> 
> 赞同：1
> 
> 时间：2012-09-11T12:22:08.170
> 
> 标签：windows-phone-7, wcf-data-services, odata, webget

我正在开发一个 Windows Phone 应用程序，它需要使用来自 OData 源的数据（使用 WCF 数据服务）。具体来说，我需要调用以下操作

```
http://localhost/ODATA/PIDataService.svc/RecordedValues?path='\\OPENXC\OpenXC\EventFrames[testFrame]|Sinusoid'&startTime='*-1d'&endTime='*' 
```

当我在浏览器（Chrome）中执行此操作时，它会给我正确的结果

```
<feed xml:base="http://[redacted]/OData/PIDataService.svc/" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns="http://www.w3.org/2005/Atom">
<title type="text">RecordedValues</title>
<id>http://[redacted]/ODATA/PIDataService.svc/RecordedValues</id>
<updated>2012-09-11T12:09:12Z</updated>
<link rel="self" title="RecordedValues" href="RecordedValues"/>
<entry>
<id>http://[redacted]/OData/PIDataService.svc/TimeseriesValues(SourceAttributePath='//OPENXC/OpenXC/EventFrames%5BtestFrame%5D%7CSinusoid',Timestamp=datetime'2012-09-10T13%3A31%3A09Z')</id>
<title type="text"/>
<updated>2012-09-11T12:09:12Z</updated>
<author>
<name/>
</author>
<link rel="edit" title="TimeSeriesValue" href="TimeseriesValues(SourceAttributePath='//OPENXC/OpenXC/EventFrames%5BtestFrame%5D%7CSinusoid',Timestamp=datetime'2012-09-10T13%3A31%3A09Z')"/>
<link rel="http://schemas.microsoft.com/ado/2007/08/dataservices/related/UOM" type="application/atom+xml;type=entry" title="UOM" href="TimeseriesValues(SourceAttributePath='//OPENXC/OpenXC/EventFrames%5BtestFrame%5D%7CSinusoid',Timestamp=datetime'2012-09-10T13%3A31%3A09Z')/UOM"/>
<link rel="http://schemas.microsoft.com/ado/2007/08/dataservices/related/SourceAttribute" type="application/atom+xml;type=entry" title="SourceAttribute" href="TimeseriesValues(SourceAttributePath='//OPENXC/OpenXC/EventFrames%5BtestFrame%5D%7CSinusoid',Timestamp=datetime'2012-09-10T13%3A31%3A09Z')/SourceAttribute"/>
<category term="vCampus.OData.Web.ObjectModel.TimeSeriesValue" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme"/>
<content type="application/xml">
<m:properties>
<d:Timestamp m:type="Edm.DateTime">2012-09-10T13:31:09Z</d:Timestamp>
<d:SourceAttributePath>\\OPENXC\OpenXC\EventFrames[testFrame]|Sinusoid</d:SourceAttributePath>
<d:Value>85.7081527709961</d:Value>
<d:UOMName m:null="true"/>
<d:AdditionalInfo/>
<d:Annotated m:type="Edm.Boolean">false</d:Annotated>
<d:IsGood m:type="Edm.Boolean">true</d:IsGood>
<d:Questionable m:type="Edm.Boolean">false</d:Questionable>
<d:Status>Good</d:Status>
<d:Substituted m:type="Edm.Boolean">false</d:Substituted>
</m:properties>
</content>
</entry>
<entry>
<id>http://[redacted]/OData/PIDataService.svc/TimeseriesValues(SourceAttributePath='//OPENXC/OpenXC/EventFrames%5BtestFrame%5D%7CSinusoid',Timestamp=datetime'2012-09-10T14%3A40%3A09Z')</id>
<title type="text"/>
<updated>2012-09-11T12:09:12Z</updated>
<author>
<name/>
</author>
<link rel="edit" title="TimeSeriesValue" href="TimeseriesValues(SourceAttributePath='//OPENXC/OpenXC/EventFrames%5BtestFrame%5D%7CSinusoid',Timestamp=datetime'2012-09-10T14%3A40%3A09Z')"/>
<link rel="http://schemas.microsoft.com/ado/2007/08/dataservices/related/UOM" type="application/atom+xml;type=entry" title="UOM" href="TimeseriesValues(SourceAttributePath='//OPENXC/OpenXC/EventFrames%5BtestFrame%5D%7CSinusoid',Timestamp=datetime'2012-09-10T14%3A40%3A09Z')/UOM"/>
<link rel="http://schemas.microsoft.com/ado/2007/08/dataservices/related/SourceAttribute" type="application/atom+xml;type=entry" title="SourceAttribute" href="TimeseriesValues(SourceAttributePath='//OPENXC/OpenXC/EventFrames%5BtestFrame%5D%7CSinusoid',Timestamp=datetime'2012-09-10T14%3A40%3A09Z')/SourceAttribute"/>
<category term="vCampus.OData.Web.ObjectModel.TimeSeriesValue" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme"/>
<content type="application/xml">
<m:properties>
<d:Timestamp m:type="Edm.DateTime">2012-09-10T14:40:09Z</d:Timestamp>
<d:SourceAttributePath>\\OPENXC\OpenXC\EventFrames[testFrame]|Sinusoid</d:SourceAttributePath>
<d:Value>99.2516555786133</d:Value>
<d:UOMName m:null="true"/>
<d:AdditionalInfo/>
<d:Annotated m:type="Edm.Boolean">false</d:Annotated>
<d:IsGood m:type="Edm.Boolean">true</d:IsGood>
<d:Questionable m:type="Edm.Boolean">false</d:Questionable>
<d:Status>Good</d:Status>
<d:Substituted m:type="Edm.Boolean">false</d:Substituted>
</m:properties>
</content>
</entry>
... 
```

(Windows Phone) 客户端代码：

```
 var path = attr.Path;
                   var context = new DatabaseData(new Uri(MainPage.serviceUrl));

                   var query = context.CreateQuery<TimeSeriesValue>("RecordedValues")
                       .AddQueryOption("path", string.Format("'{0}'", path))
                       .AddQueryOption("startTime", "'*-1d'")
                       .AddQueryOption("endTime", "'*'");
                   query.BeginExecute(TimeSeriesReady, query);

   private void TimeSeriesReady(IAsyncResult result)
    {
        var context = result.AsyncState as DataServiceQuery<TimeSeriesValue>;
        var values = context.EndExecute(result).ToList();
        values.ForEach(v => Debug.WriteLine(v.Value));
    } 
```

这给我一个'InvalidOperationException'

> 处理此请求时发生错误。

内部异常消息是“0x80000012”，堆栈跟踪是

```
 at MS.Internal.XcpImports.CheckHResult(UInt32 hr)
       at MS.Internal.XcpImports.WebRequest_Send(InternalWebRequest request)
       at MS.Internal.InternalWebRequest.Send()
       at System.Net.Browser.ClientHttpWebRequest.PrepareAndSendRequest(String method, Uri requestUri, Stream requestBodyStream, WebHeaderCollection headerCollection, CookieContainer cookieContainer)
       at System.Net.Browser.ClientHttpWebRequest.BeginGetResponseImplementation()
       at System.Net.Browser.ClientHttpWebRequest.InternalBeginGetResponse(AsyncCallback callback, Object state)
       at System.Net.Browser.ClientHttpWebRequest.BeginGetResponse(AsyncCallback callback, Object state)
       at System.Data.Services.Http.ClientHttpWebRequest.BeginGetResponse(AsyncCallback callback, Object state)
       at System.Data.Services.Client.BaseAsyncResult.InvokeAsync(Func`3 asyncAction, AsyncCallback callback, Object state)
       at System.Data.Services.Client.QueryResult.BeginExecute(DataServiceContext context)
       at System.Data.Services.Client.DataServiceRequest.BeginExecute(Object source, DataServiceContext context, AsyncCallback callback, Object state)
       at System.Data.Services.Client.DataServiceQuery`1.BeginExecute(AsyncCallback callback, Object state)
       at vCampus.OData.Phone.DetailsPage.eventFrames_LoadCompleted(Object sender, LoadCompletedEventArgs e)
       at System.Data.Services.Client.DataServiceCollection`1.<>c__DisplayClass11.<>c__DisplayClass13.<BeginLoadAsyncOperation>b__f()
       at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)
       at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)
       at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
       at System.Delegate.DynamicInvokeOne(Object[] args)
       at System.MulticastDelegate.DynamicInvokeImpl(Object[] args)
       at System.Delegate.DynamicInvoke(Object[] args)
       at System.Windows.Threading.DispatcherOperation.Invoke()
       at System.Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority)
       at System.Windows.Threading.Dispatcher.OnInvoke(Object context)
       at System.Windows.Hosting.CallbackCookie.Invoke(Object[] args)
       at System.Windows.Hosting.DelegateWrapper.InternalInvoke(Object[] args)
       at System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam& pResult) 
```

我已搜索此错误代码，但找不到任何答案。在线提供的代码示例建议了这种方法，但没有解释这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:18:30.967

正如 Vitek 所建议的，`Uri.EscapeUriString`需要用于转义`path`查询选项：

```
var path = attr.Path;
var context = new DatabaseData(new Uri(MainPage.serviceUrl));
var query = context.CreateQuery<TimeSeriesValue>("RecordedValues")
                .AddQueryOption("path", string.Format("'{0}'", Uri.EscapeUriString(path)))
                .AddQueryOption("startTime", "'*-1d'")
                .AddQueryOption("endTime", "'*'");
query.BeginExecute(TimeSeriesReady, query); 
```

One of our devs tested and verified on both our existing Windows Phone client bits as well as our upcoming Windows Phone client bits.

# regex - 新路由不适用于 IIS 7.5

> ID：12369613
> 
> 赞同：0
> 
> 时间：2012-09-11T12:22:19.080
> 
> 标签：regex, asp.net-mvc, routes, iis-7.5, asp.net-mvc-routing

我一直在本地开发 MVC 应用程序（IIS Express）并定期部署到 IIS 7.5 以进行测试。

我刚刚在我的 Global.asax.cs 文件中添加了一个名为 Route 的新名称：

```
 routes.MapRoute(
            "MyCustomRoute", // Route name
            "{documentID}/{year}", // URL with parameters
            new { controller = "Documents", action = "CurrentVersion", year = DateTime.Now.Year }, // Parameter defaults
            new { documentID = @".*\d+.*" } // Regex matches only where documentID contains numerical values.
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Documents", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

我已经使用“MyCustomRoute”设置了一个 Html.RouteLink，并且在我的本地机器上运行良好。但是，当我在 Web 服务器上运行它时， Html.RouteLink 正在生成一个空链接。另外，如果我直接在浏览器中输入 URL，它会给出 404。

好像 Route 还没有注册。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:43:37.937

我们不可能在不看代码的情况下调试您的路线，如果您使用正确的工具，您将很容易看到正在发生的事情以及正在匹配的内容。

**Phil Haack 构建了一个名为RouteDebugger**的优秀开源工具。您可以[通过 NuGet 获取它，并在](http://nuget.org/packages/routedebugger)[http://haacked.com/archive/2011/04/12/routedebugger-2.aspx](http://haacked.com/archive/2011/04/12/routedebugger-2.aspx)了解如何使用它。该项目的更强大版本可作为[**RouteMagic 获得**，位于 Codeplex](http://routemagic.codeplex.com/)和[git](https://github.com/Haacked/RouteMagic)中。[此博客文章](http://haacked.com/archive/2011/01/30/introducing-routemagic.aspx)中的详细信息

**更新**

根据您的正则表达式，由于贪婪，您的 documentID 没有被匹配。 `.*`将匹配所有内容，因此您将永远没有机会匹配`\d+`，因为前面的模式将蚕食所有匹配项。[您可以在http://www.regular-expressions.info/repeat.html](http://www.regular-expressions.info/repeat.html)阅读有关正则表达式贪婪和懒惰的信息。

**更新 2**

正则表达式可能是我在编程方面最糟糕的事情，而我认识到这个问题的唯一原因是因为我对它们太差了，以至于我遇到了大约一百万次同样的问题。话虽如此，我**认为** `@"(.*?)(\d+?)(.*?)"`会成功的。它也应该在没有任何括号的情况下工作（如`@".*?\d+?.*?"`），但我喜欢将它们保留在那里以提高可读性（主要是因为我不擅长它们）。

# php - $_SERVER['HTTP_REFERER'] missing

> ID：12369615
> 
> 赞同：46
> 
> 时间：2012-09-11T12:22:29.703
> 
> 标签：php

I want to use `$_SERVER['HTTP_REFERER']` in my site but i get the following:

```
Notice: Undefined index: HTTP_REFERER 
```

I have tried printing `$_SERVER`. This outputs the following:

```
Array
(
    [HTTP_HOST] => 192.168.1.10
    [HTTP_USER_AGENT] => Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:15.0) Gecko/20100101 Firefox/15.0
    [HTTP_ACCEPT] => text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
    [HTTP_ACCEPT_LANGUAGE] => en-us,en;q=0.5
    [HTTP_ACCEPT_ENCODING] => gzip, deflate
    [HTTP_CONNECTION] => keep-alive
    [PATH] => /sbin:/usr/sbin:/bin:/usr/bin
    [SERVER_SIGNATURE] => Apache/2.2.3 (CentOS) Server at 192.168.1.10 Port 80
    [SERVER_SOFTWARE] => Apache/2.2.3 (CentOS)
    [SERVER_NAME] => 192.168.1.10
    [SERVER_ADDR] => 192.168.1.10
    [SERVER_PORT] => 80
    [REMOTE_ADDR] => 192.168.1.77
    [DOCUMENT_ROOT] => /var/www/html
    [SERVER_ADMIN] => root@localhost
    [SCRIPT_FILENAME] => /var/www/html/sandeep/test/hash.php
    [REMOTE_PORT] => 53851
    [GATEWAY_INTERFACE] => CGI/1.1
    [SERVER_PROTOCOL] => HTTP/1.1
    [REQUEST_METHOD] => GET
    [QUERY_STRING] => 
    [REQUEST_URI] => /sandeep/test/hash.php
    [SCRIPT_NAME] => /sandeep/test/hash.php
    [PHP_SELF] => /sandeep/test/hash.php
    [REQUEST_TIME] => 1347365919
) 
```

Can anyone help me to find `HTTP_REFERER` or suggest an alternative to `HTTP_REFERER`?

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-11T12:26:04.853

从文档中：

> 将用户代理引向当前页面的页面地址（如果有）。这是由用户代理设置的。不是所有的用户代理都会设置这个，有些提供修改 HTTP_REFERER 作为一个特性的能力。简而言之，它不能真正被信任。

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-09-11T12:24:53.460

当网络浏览器从一个网站移动到另一个网站以及在网站的页面之间移动时，它可以选择传递它来自的 URL。这称为 HTTP_REFERER，因此如果您不从一个页面重定向到另一个页面，它可能会丢失

如果 HTTP_REFERER 已设置，则将显示它。如果不是，那么您将看不到任何东西。如果未设置并且您将错误报告设置为显示通知，您将看到如下错误：

```
 Notice: Undefined index: HTTP_REFERER in /path/to/filename.php 
```

为了防止在通知开启时出现此错误（我总是在通知开启的情况下进行开发），您可以执行以下操作：

```
 if(isset($_SERVER['HTTP_REFERER'])) {
      echo $_SERVER['HTTP_REFERER'];
   } 
```

**或者**

```
 echo isset($_SERVER['HTTP_REFERER']) ? $_SERVER['HTTP_REFERER'] : ''; 
```

使用 $_SERVER['HTTP_REFERER'] 超全局变量将 HTTP_REFERER 变量用于记录等目的可能很有用。但是，重要的是要知道它并不总是设置，因此如果您使用通知进行编程，那么您需要在您的代码中允许这一点

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-11T12:26:20.697

Referer 不是[强制标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)。它可能存在也可能不存在，或者可能被修改/虚构。依赖它，风险自负。无论如何，你应该包装你的电话，这样你就不会收到未定义的索引错误：

```
$server = isset($_SERVER['HTTP_REFERER']) ? $_SERVER['HTTP_REFERER'] : ""; 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-09-11T12:24:35.220

你可以而且永远不应该假设它`$_SERVER['HTTP_REFERER']`会出现。

如果控制上一页，则可以将 URL 作为参数传递`"site.com/page2.php?prevUrl=".urlencode("site.com/page1.php")`。

如果您不控制页面，那么您将无能为力。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-05-03T17:54:47.877

*解决方案*

正如其他人所说的那样，HTTP_REFERER 是由用户的本地机器设置的，特别是浏览器，这意味着它的安全性不可靠。但是，这仍然完全是*Google Analytics*监控您从何处获取访问者的方式，因此，检查、排除、包含等实际上很有用。

*如果您认为应该看到 HTTP_REFERER 而没有看到，请将其添加到您的 PHP 代码中，最好在顶部：*

```
ini_set('session.referer_check', 'TRUE'); 
```

当然，更合适的长期解决方案是实际更新您的 php.ini 或等效文件。不过，这是一种很好且快速的验证方式。

*测试*

在您的网站上运行`print($_SERVER['HTTP_REFERER']);`，转到 google.com，检查一些文本，将其编辑为`<a href="https://example.com">LINK!</a>`，应用更改，然后单击链接。如果它有效，那么一切都很好并且运行准确！

但也许 $_SERVER 是错误的，或者上面的测试说它坏了。用这个更新你的页面，然后再次测试......

```
<script type="text/javascript">
    console.log("REFER!" + document.referrer + "|" + location.referrer + "|");
</script> 
```

*用途*

**我使用 HTTP REFERER 来阻止 GoogleAnalytics 中的垃圾邮件站点。** 下面是一个图表，重点关注一个特定网站的推荐。一天从0​​到44，不是真实用户造成的。这是由于一个 botted 网站试图引起我的注意购买他们的服务。但它才刚刚开始，因为 php.ini 被更新为忽略引用者，这意味着这些垃圾邮件、垃圾垃圾站点没有得到相应的错误 403，“拒绝访问”。

![](../Images/3ab2101266534af23e58ead609f03b72.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-06T08:07:25.770

```
function redirectHome($theMsg, $url = null, $seconds = 3) {
    if ($url === null) {
        $url  = 'index.php';
        $link = 'Homepage';
    } else {
        if (isset($_SERVER['HTTP_REFERER']) && $_SERVER['HTTP_REFERER'] !== '') {
            $url = $_SERVER['HTTP_REFERER'];
            $link = 'Previous Page';
        } else {
            $url = 'index.php';
            $link = 'Homepage';
        }
    }
    echo $theMsg;
    echo "<div class='alert alert-info'>You Will Be Redirected to $link After $seconds Seconds.</div>";
    header("refresh:$seconds;url=$url");
    exit();
} 
```

# sql-server - Using transaction on a single update statement

> ID：12369619
> 
> 赞同：15
> 
> 时间：2012-09-11T12:22:56.777
> 
> 标签：sql-server, transactions

I am dubbing some SP at work and I have discover that whoever wrote the code used a transaction on a single update statement like this

```
begin transaction 
*single update statment:* update table whatever with whatever
commit transaction 
```

I understand that this is wrong because transaction is used when you want to update multiple updates. I want to understand from the theoretical point, what are the implications of using the code as above? Is there any difference in updating the whatever table with and without the transaction? Are there any extra locks or something?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T12:29:05.313

可能由于先前或将来可能涉及其他数据的代码而包含该交易。也许那个开发人员只是养成了在事务中包装代码的习惯，以保证“安全”？

但是，如果该语句实际上只涉及对单行的一次更新，那么在这种情况下存在该代码确实没有任何好处。事务不一定会“锁定”任何东西，尽管其中执行的操作当然可以。它只是确保其中包含的所有操作要么全部执行，要么全部执行。

请注意，事务不是关于多个表，而是关于多个*更新*。它确保多次更新完全或不发生。

*因此，如果您两次*更新同一张表，则无论有没有事务都会有所不同。但是您的示例仅显示了一条更新语句，大概只更新了一条记录。

事实上，事务将多个更新封装到同一个表中可能很常见。想象一下：

```
INSERT INTO Transactions (AccountNum, Amount) VALUES (1, 200)
INSERT INTO Transactions (AccountNum, Amount) values (2, -200) 
```

这应该包含在交易中，以确保正确转移资金。如果一个失败，另一个也必须失败。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-11T12:28:27.350

> 我知道这是错误的，因为当您要更新多个表时使用事务。

不必要。这仅涉及一个表 - 仅 2 行：

```
--- transaction  begin

BEGIN TRANSACTION ;

UPDATE tableX 
SET Balance = Balance + 100
WHERE id = 42 ;

UPDATE tableX 
SET Balance = Balance - 100
WHERE id = 73 ;

COMMIT TRANSACTION ;

--- transaction  end 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-11T12:29:08.783

希望你同事的代码看起来更像这样，否则 SQL 会发出语法错误。根据 Ypercube 的评论，在事务中放置一个语句没有真正的目的，但这可能是一个编码标准或类似的。

```
begin transaction  -- Increases @@TRANCOUNT to 1
update table whatever with whatever
commit transaction  -- DECREMENTS @@TRANCOUNT to 0 
```

通常，当直接针对 SQL 发出临时语句时，最好将语句包装在事务中，*以防万一*出现问题并且需要回滚，即

```
begin transaction -- Just in case my query goofs up
update table whatever with whatever
select ... from table ... -- check that the correct updates / deletes / inserts happened
-- commit transaction  -- Only commit if the above check succeeds. 
```

# jquery - Mysterious loop in jQuery function

> ID：12369620
> 
> 赞同：0
> 
> 时间：2012-09-11T12:23:02.740
> 
> 标签：jquery, loops

I have one problem with my function in jQuery. First I will explain what I am trying to do.

I have two elements inside a div, the p element and input element. The element p is visible, and the input element stay hidden. When the user clicks in the p element, the input element will appear (show and focus) and the p element will disappear (hide). When the input field appears, if the user types something and presses enter, a new li element will be added.

This is my current code:

```
function createFolder() {
    // Should be a clickable element
    $('#create p').click(function() {

        // Hide the p element
        $(this).hide();

        // Show and focus the createFolder (input field)
        $('#createFolder').show().focus();

        // If press a key inside input field
        $('#createFolder').keypress(function(event) {
            // If this key is "enter"
            if (event.keyCode == 13) {
                // Add a new li element inside menu
                $('#menu').append('<li class="expandable"><a href="#">' + $('#createFolder').val() + '</a></li>');
            }
        });

        // Focus out the input field
        $('#createFolder').focusout(function() {
            // Hide the input field element
            $(this).hide();
        });
    });
} 
```

[http://i.imgur.com/HZoDr.png](http://i.imgur.com/HZoDr.png)

But I have a problem, when I click in p element or focus out (3 clicks for example), when I type something and press enter, three li elements are added to my menu. It's like a loop, it counts my clicks and focus out and when I type something, it adds that number of elements. Someone can help me with this? And if is possible, teach me why this happens?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:27:02.293

尝试这个

```
var items = $('#menu').parent().children(".expandable").length;
if(items > 0){
//skip doing what you are doing.
}else{
$('#menu').append('<li class="expandable"><a href="#">' +  $('#createFolder').val() + '</a></li>');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:35:51.280

当您调用此代码时：

```
$('#createFolder').keypress(function(event) {
    // If this key is "enter"
    if (event.keyCode == 13) {
        // Add a new li element inside menu
        $('#menu').append('<li class="expandable"><a href="#">' + $('#createFolder').val() + '</a></li>');
    }
}); 
```

您正在`keypress`为该元素添加一个新的事件处理程序。重要的一点是**添加**，jQuery 不会覆盖现有的事件处理程序 - 每次调用那段代码时，都会向元素添加一个新的事件处理程序。

而且，由于该代码位于元素的`click`事件处理程序中`<p>`，因此每次单击该元素时，您都会获得该`keypress`事件的附加处理程序。如果单击 3 次，您将拥有三个事件处理程序，每个事件处理程序都会在您按下某个键时触发。

最简单的解决方案是简单地移动该代码以将事件处理程序绑定到元素的事件`keypress`处理程序之外。`click``<p>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:29:06.907

```
 $('#menu').html('<li class="expandable"><a href="#">' +  $('#createFolder').val() + '</a></li>'); 
```

# windows-phone-7 - Reset Zoom in webBrowserControl

> ID：12369622
> 
> 赞同：0
> 
> 时间：2012-09-11T12:23:06.320
> 
> 标签：windows-phone-7, webbrowser-control, windows-phone-7.1, zooming

I have a `webBrowser Control` in my application. I navigate to a web page and zoom it using pinch zooming. Now on clicking of a button, I change the current webPage of the webBrowser control. The new webPage appears automatically zoomed in. How can I reset this zoom everytime on a new navigation?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:23:16.403

这是一篇关于您的问题的帖子： [WP7 WebBrowser control zoom](https://stackoverflow.com/questions/4500062/wp7-webbrowser-control-zoom)

您必须操作页面的 html 并重置视口。

# c# - How I can see a Image in my ImageButton?

> ID：12369624
> 
> 赞同：0
> 
> 时间：2012-09-11T12:23:12.307
> 
> 标签：c#, asp.net, image, calendar, imagebutton

I write a ASP.NET Application for creating a signatur and other stuff. And I use the AjaxToolkit with the CalenderExtender. I want if I click on a ImageButton that open the extender and the TextBox get the Data. It works fine but I don't see the ButtonImage :( >.<

Where I can get a Image for my ImageButton and how it works? Here my ASPX Site Code

```
 ...
<tr>
                                <td>Abwesenheit von: </td><td>
                                <asp:TextBox ID="txtAbwesenheitVon" runat="server" Enabled="false"></asp:TextBox>
                                <asp:ImageButton ID="imgbtnAbwesenheitVon" runat="server" ToolTip="Abwesenheit von..." PostBackUrl="~/App_Theme/Calender.ico" />
                                <asp:CalendarExtender ID="AbwesenheitVon" runat="server" TargetControlID="txtAbwesenheitVon" 
                                                      Format="dd.MM.yyyy" PopupButtonID="imgbtnAbwesenheitVon"></asp:CalendarExtender>
                                </td>
                                </tr>
    ... 
```

My second Question is. Can I use a Label for the textBox, too?

But I see only this..._->

![enter image description here](../Images/34e732a706ffd13180ce7cad9d9e9fc2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:27:28.147

代替

```
PostBackUrl="~/App_Theme/Calender.ico" 
```

和

```
ImageUrl = "~/App_Theme/Calender.ico" 
```

[`Image.ImageUrl`财产](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.image.imageurl.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:30:55.203

使用**ImageUrl**属性而不是**PostBackUrl**

# django - How can get images from wikipedia api?

> ID：12369626
> 
> 赞同：-3
> 
> 时间：2012-09-11T12:23:17.493
> 
> 标签：django, wikipedia-api

i have the product keyword, i need images from wikipedia for that search keyword to display in my web application. is it possible? i'm doing this application in python/django framework.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:36:10.740

一些[简单的搜索在](https://www.mediawiki.org/wiki/API%3aTutorial#How_to_use_it)**教程**中有这个例子，用于获取搜索结果图像：

```
?action=query&titles=San_Francisco&prop=images&imlimit=20&format=jsonfm. 
```

您可以使用`urllib2`来获取结果等。

# javascript - 无法在页面上显示高图 - 仅会显示示例

> ID：12369631
> 
> 赞同：0
> 
> 时间：2012-09-11T12:23:38.250
> 
> 标签：javascript, jquery, highcharts

下面列出了 2 个代码块，第一个是我的页面，其中包含一个股票示例，它有效。第二组是我在 jfiddle 中创建的图表。它在 jfiddle 中正常工作，但是当放入页面时它不会在页面上显示任何内容。感谢您的帮助，我是 jquery 和 highcharts 的新手，但我似乎无法找到为什么下面的内容在 jfiddle 中而不是在我的页面上有效。谢谢你。

下面的块有效，例如 - 但页面设置对于不起作用的块是相同的（在底部）

```
 <!DOCTYPE HTML>
<html>
    <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Highcharts Example</title>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script type="text/javascript">
            $(function () {

                var chart = new Highcharts.Chart({

                    chart: {
                        renderTo: 'container',
                        type: 'gauge',
                        plotBackgroundColor: null,
                        plotBackgroundImage: null,
                        plotBorderWidth: 0,
                        plotShadow: false
                    },

                    title: {
                        text: 'Speedometer'
                    },

                    pane: {
                        startAngle: -150,
                        endAngle: 150,
                        background: [{
                            backgroundColor: {
                                linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                                stops: [
                        [0, '#FFF'],
                        [1, '#333']
                    ]
                            },
                            borderWidth: 0,
                            outerRadius: '109%'
                        }, {
                            backgroundColor: {
                                linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                                stops: [
                        [0, '#333'],
                        [1, '#FFF']
                    ]
                            },
                            borderWidth: 1,
                            outerRadius: '107%'
                        }, {
                        // default background
                    }, {
                        backgroundColor: '#DDD',
                        borderWidth: 0,
                        outerRadius: '105%',
                        innerRadius: '103%'
                    }]
                },

                // the value axis
                yAxis: {
                    min: 0,
                    max: 200,

                    minorTickInterval: 'auto',
                    minorTickWidth: 1,
                    minorTickLength: 10,
                    minorTickPosition: 'inside',
                    minorTickColor: '#666',

                    tickPixelInterval: 30,
                    tickWidth: 2,
                    tickPosition: 'inside',
                    tickLength: 10,
                    tickColor: '#666',
                    labels: {
                        step: 2,
                        rotation: 'auto'
                    },
                    title: {
                        text: 'km/h'
                    },
                    plotBands: [{
                        from: 0,
                        to: 120,
                        color: '#55BF3B' // green
                    }, {
                        from: 120,
                        to: 160,
                        color: '#DDDF0D' // yellow
                    }, {
                        from: 160,
                        to: 200,
                        color: '#DF5353' // red
                    }]
                },

                series: [{
                    name: 'Speed',
                    data: [80],
                    tooltip: {
                        valueSuffix: ' km/h'
                    }
                }]

            },
            // Add some life
    function (chart) {
        setInterval(function () {
            var point = chart.series[0].points[0],
                newVal,
                inc = Math.round((Math.random() - 0.5) * 20);

            newVal = point.y + inc;
            if (newVal < 0 || newVal > 200) {
                newVal = point.y - inc;
            }

            point.update(newVal);

        }, 3000);
    });
                    });

​
        </script>
    </head>
    <body>
<script src="./include/Highcharts-2.3.2/js/highcharts.js"></script>
<script src="./include/Highcharts-2.3.2/js/highcharts-more.js"></script>
<script src="./include/Highcharts-2.3.2/js/modules/exporting.js"></script>

<div id="container" style="width: 400px; height: 300px; margin: 0 auto"></div>

    </body>
</html> 
```

我的图表中未显示的代码

```
 <!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Highcharts Example</title>
            <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script type="text/javascript">
$(function () {
    var chart = new Highcharts.Chart({

        chart: {
            renderTo: 'container',
            type: 'gauge',
            plotBorderWidth: 1,
            plotBackgroundImage: null,
            height: 200

        },

        title: {
            text: ''
        },

        pane: [{
            startAngle: -90,
            endAngle: 90,
            background: null,
            center: ['50%', '50%'],
            size: 100
        }],                        

        yAxis: [{
            tickInterval: 45,
            min: 0,
            max: 180,
            minorTickPosition: 'outside',
            tickPosition: 'outside',
            labels: {
                rotation: 'auto',
                distance: 20
            },
            plotBands: [{
                from: 0,
                to: 45,
                color: '#00CC00',
                innerRadius: '100%',
                outerRadius: '105%'
            },{
                from: 46,
                to: 90,
                color: '#FFFF00',
                innerRadius: '100%',
                outerRadius: '105%'
            },{
                from: 91,
                to: 135,
                color: '#FF9933',
                innerRadius: '100%',
                outerRadius: '105%'
            },{
                from: 136,
                to: 180,
                color: '#990000',
                innerRadius: '100%',
                outerRadius: '105%'
            }],
            pane: 0,
            title: {
                text: '<span style="font-size:8px"> </span>',
                y: -40
            }
        }],

        plotOptions: {
            gauge: {
                dataLabels: {
                    enabled: false
                },
                dial: {
                    radius: '100%'
                }
            }
        },

        series: [{
            data: [90],
            yAxis: 0
        }]

    },

    // Let the music play
    function(chart) {
        setInterval(function() {
            chart.redraw();
        }, 500);

    });
});
        </script>
    </head>
    <body>
<script src="./include/Highcharts-2.3.2/js/highcharts.js"></script>
<script src="./include/Highcharts-2.3.2/js/highcharts-more.js"></script>
<script src="./include/Highcharts-2.3.2/js/modules/exporting.js"></script>

<div id="container" style="width: 400px; height: 300px; margin: 0 auto"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:11:11.143

发现问题，将文本从 Visual Studio 中复制出来并粘贴到记事本中，在脚本结束前显示一个随机问号，该问号在 Visual Studio 或 jfiddle 中以及从 Visual Studio 复制到此窗口时不存在。删除，重新复制文本并粘贴。至少它现在有效。

# visual-c++ - 错误 C2894：不能将模板声明为具有“C”链接

> ID：12369632
> 
> 赞同：6
> 
> 时间：2012-09-11T12:23:39.037
> 
> 标签：visual-c++, compiler-errors

我有

```
error C2894: templates cannot be declared to have 'C' linkage 
```

当我尝试编译我的 C++ 项目时。

所有错误都指向 vc++ 文件

```
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(32): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(120): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(133): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(256): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(279): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(375): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(474): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(486): error C2039: 'memcmp' : is not a member of '`global namespace''
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(486): error C3861: 'memcmp': identifier not found
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(491): error C2039: 'strlen' : is not a member of '`global namespace''
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(491): error C3861: 'strlen': identifier not found
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(511): error C2039: 'memchr' : is not a member of '`global namespace''
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(511): error C3861: 'memchr': identifier not found
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(522): error C2039: 'memset' : is not a member of '`global namespace''
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(522): error C3861: 'memset': identifier not found
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(568): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(571): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(574): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(577): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(580): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(583): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(586): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(589): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(592): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(596): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(600): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(604): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(608): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(611): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(614): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(617): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(622): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(625): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\iosfwd(628): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\limits(80): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\limits(133): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\limits(139): error C2894: templates cannot be declared to have 'C' linkage
1>c:\program files\microsoft visual studio 10.0\vc\include\limits(139): fatal error C1003: error count exceeds 100; stopping compilation 
```

这些错误是什么以及我如何解决它们。在我从未看到这些错误之前，这些错误突然出现。

**在我正在做的项目中，我从不*使用 extern C***

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-28T13:51:29.563

当您在`extern "C"` 命令中包含头文件时会发生此错误

```
extern "C"
{

    #include "Header.h"
} 
```

只包括`#include "cs.h"`外面`extern c`，你很高兴。

```
#include "Header.h"
extern "C"
{

    //code

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T09:32:57.523

如果不显示您的来源，很难为您提供任何帮助，但[MSDN 上有关错误 #2894](http://msdn.microsoft.com/en-us/library/95bhc9c2%28v=vs.80%29.aspx)和[其他一些门户网站](http://www.codeproject.com/Questions/101717/Error-C2894-templates-cannot-be-declared-to-have-C)的信息非常简单：

```
// C2894.cpp
extern "C" {
   template<class T> class stack {};   // C2894 fail

   template<class T> void f(const T &aT) {}   // C2894
} 
```

也许您的文件名为`.c`而不是`.cpp`，或者切换了一些编译标志。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-27T05:40:09.200

如果你写了这个……

```
extern "C"
{
    #include "Header.h"
} 
```

而不是写成

```
extern "C++"
{
    #include "Header.h"
} 
```

当您尝试在 C++ 中引用 C 函数时，它将通过错误来避免您只是将其引用到 C++，以便您可以在 .CXX 或 .Cpp 函数中引用它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-08T23:32:48.797

有时原因很简单：您的项目中的某些文件名与标准 C/C++ 库中的相同，该库默认包含在您的项目中。例如，**字符串.h**。这个事实将产生错误。只需重命名这些文件，您就可以成功构建您的项目。

# tomcat - Tomcat 不会停止或重新启动

> ID：12369639
> 
> 赞同：29
> 
> 时间：2012-09-11T12:23:52.070
> 
> 标签：tomcat, catalina

我试图停止Tomcat。它失败并显示此消息：

*   Tomcat没有及时停止。PID 文件未删除。

然后我再次尝试并得到了这个：

*   找到 PID 文件 (/opt/tomcat/work/catalina.pid) 但未找到匹配的进程。停止中止。

然后我尝试在调试模式下启动 tomcat 并得到了这个：

*   找到 PID 文件 (/opt/tomcat/work/catalina.pid)。Tomcat 还在运行吗？开始中止。

我他们删除了 /opt/tomcat/work/catalina.pid 并尝试重新启动并得到了这个：

*   $CATALINA_PID 已设置 (/opt/tomcat/work/catalina.pid) 但指定的文件不存在。Tomcat 正在运行吗？停止中止。

有人知道如何让tomcat重新启动吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-11-24T11:34:18.867

我在 Linux 服务器上启动了*第二个Tomcat 服务器时收到此错误消息。*

```
$CATALINA_PID was set but the specified file does not exist. Is Tomcat running? Stop aborted. 
```

在启动第二个 Tomcat 时，我按照要求设置了 CATALINA_PID，但我的错误是将它设置为一个目录（我假设 Tomcat 会在其中写入一个带有 pid 的默认文件名）。

解决方法只是更改我的 CATALINA_PID 以在其末尾添加一个文件名（我从上面的示例中选择了 catalina.pid）。接下来我进入目录，做了一个简单的：

```
touch catalina.pid 
```

创建一个正确名称的空文件。然后，当我执行 shutdown.sh 时，我收到消息说：

```
PID file is empty and has been ignored.
Tomcat stopped. 
```

我没有选择杀死 Tomcat，因为 JVM 正在使用中，所以我很高兴我找到了这个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T12:38:46.963

看来Tomcat实际上已经停止了。我开始了它，它开始很好。谢谢大家。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-09T11:01:19.863

最近我遇到过几次停止异常。虽然shutdown.sh提供了一些信息，但情况有：

*   该命令的结果`ps -ef| grep java`为 Null。
*   命令`ps -ef| grep java`的结果不为空。

我的意见只是杀死Catalina的进程并删除pid文件（在你的情况下是/opt/tomcat/work/catalina.pid。）

结果似乎没有那么严重地影响他人。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-09T17:21:18.577

确保 Tomcat 当前未在运行并且 PID 文件已删除。他们应该成功启动 Tomcat。

如果你重新开始，那么：

1.  在. `setenv.sh`_`<CATALINA_HOME>/bin`
2.  我在其中设置`CATALINA_PID=/tmp/tomcat.pid`（或您选择的其他目录），以便您可以更好地控制 Tomcat 进程。

然后启动Tomcat find `catalina.sh`in`<CATALINA_HOME>/bin`并执行：

```
./catalina.sh start 
```

并阻止它运行：

```
./catalina.sh stop 10 -force 
```

从`catalina.sh`脚本的文档：

```
./catalina.sh

Usage: catalina.sh ( commands ... )
commands:

start             Start Catalina in a separate window
stop              Stop Catalina, waiting up to 5 seconds for the process to end
stop n            Stop Catalina, waiting up to n seconds for the process to end
stop -force       Stop Catalina, wait up to 5 seconds and then use kill -KILL if still running
stop n -force     Stop Catalina, wait up to n seconds and then use kill -KILL if still running 
```

注意：如果要使用`-force`标志，则`CATALINA_PID`必须进行设置。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-22T13:37:48.910

有时如果重启后相同的 pid 正在运行，tomcat 将无法启动

我的 pid 文件位于 apache-tomcat/temp/tomcat.pid

作为解决方案，我只检查 PID 是否属于 Catalina

更改文件 apache-tomcat/bin/catalina.sh 关于第 386 行

从`ps -p $PID >/dev/null 2>&1`

到`ps -fp $PID |grep catalina >/dev/null 2>&1`

摘自 catalina.sh 文件

```
 if [ ! -z "$CATALINA_PID" ]; then
    if [ -f "$CATALINA_PID" ]; then
      if [ -s "$CATALINA_PID" ]; then
        echo "Existing PID file found during start."
        if [ -r "$CATALINA_PID" ]; then
          PID=`cat "$CATALINA_PID"`
          ps -fp $PID |grep catalina >/dev/null 2>&1  #this line
          if [ $? -eq 0 ] ; then
            echo "Tomcat appears to still be running with PID $PID. Start aborted."
            echo "If the following process is not a Tomcat process, remove the PID file and try again:"
            ps -f -p $PID
            exit 1
          else
            echo "Removing/clearing stale PID file."
            rm -f "$CATALINA_PID" >/dev/null 2>&1
            if [ $? != 0 ]; then
              if [ -w "$CATALINA_PID" ]; then
                cat /dev/null > "$CATALINA_PID"
              else
                echo "Unable to remove or clear stale PID file. Start aborted."
                exit 1
              fi
            fi
          fi
        else
          echo "Unable to read PID file. Start aborted." 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-20T07:41:51.197

你可以到 ${CATALINA_HOME}/logs/ 的位置打开 catalina.pid。在这里，我们将获得 pid。然后终止进程。杀死 -9 pid

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-04-22T07:33:14.437

你试过`$ sudo ./catalina.sh stop`吗？它在我的情况下有效。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-07-14T10:44:04.957

第一 -->`rm catalina.engine`

那么 -->`./startup.sh`

下次你重新启动 -->`./shutdown.sh -force`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-30T09:24:42.020

您的情况下缺少 catalina.pid 。

该文件位于 {your_jira_dir}/work/catalina.pid 下，它包含 jira 当前实例的 pid。

所以

```
ps aux | grep jira 
```

*   找到正确的条目
*   复制输出的 PID 并创建一个仅包含此 PID 的文件。- 确保它可以被运行 jira 的用户读写。
*   再次尝试关闭 jira。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-08-25T01:30:48.353

`sudo systemctl stop tomcat`

为我做的

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-08-25T19:30:45.257

如果您看到此类问题，您可以随时尝试终止该进程。您可以从 PS 或 pid 文件中获取进程 ID 并终止该进程。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-08-08T13:22:38.607

就我而言，tomcat.pid 位于 /opt/tomcat/temp/ 下。试图手动删除它。仍然没有工作。查看/opt/tomcat/bin/中的setnev.sh后，注意有一行代码定义了JAVA_HOME：

```
export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.212.b04-0.el7_6.x86_64/jre 
```

注释掉这一行，重启Tomcat。有用！因为我做了一个 yum 更新和一个新的从 1.8.0.212 到 1.8.0.222 的 Java 小版本更新。经验教训：应避免硬编码。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-02-12T19:05:24.250

我遇到了与下面提到的相同的问题。

[找到 PID 文件，但没有找到匹配的进程。停止中止。](https://i.stack.imgur.com/T93Hv.png)

解决方法是通过以下命令找到linux机器的空闲空间

df -h

上面的命令显示我的主目录被 100% 使用。然后使用以下命令确定要删除的文件

杜 -h。

删除后，可以在linux机器上进行IO操作，tomcat也可以启动了。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-01-21T08:38:28.480

按照这个:)

1.  **打开**：`/etc/systemd/system/tomcat.service`

你能看到**JAVA_HOME**吗？: 修改如下

```
Environment="JAVA_HOME=/usr/lib/jvm/java-1.11.0-openjdk-amd64" 
```

*在 1.11.0 - 插入您自己的 Jdk 版本*

2.  `systemctl daemon-reload`

3.  `sudo systemctl start tomcat`

* * *

现在，在 Eclipse -> 添加服务器 -> **.....**

被击中**`tomcat installation directory ??`**

1.  `Extract`您已经下载的 tomcat tar 文件。
2.  现在回到 Eclipse -> 添加服务器 ->**浏览**-> `Point to extracted file` *（在上面的步骤 1 中完成 :)*

> 如果您也被其他地方击中，请发表评论）

# java - 是否有任何理由不为 JPA 中的 @Id 字段生成 setter 和 getter？

> ID：12369641
> 
> 赞同：4
> 
> 时间：2012-09-11T12:23:59.907
> 
> 标签：java, jpa, getter-setter, identifier

假设 JPA 实体（例如）具有自动生成的长 id：

```
@Entity
@AutoProperty
public class SomeItem {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)   
    private long Id;

    ...

} 
```

是否有任何理由不为此 ID 生成 setter 和 getter？例如，人们可能不想生成 setter，因为 JPA 负责生成 ID。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-16T20:17:35.703

我看到其他评论误导了你，所以我觉得自己有义务详细说明这个问题，即使我不能给你一个科学和完整的答案。@vcetinick 写了当前接受的答案：

> *您**可能会**发现您**可能**能够摆脱 [..] 事物的持久性方面。*

这句话尤其是错误的。一切都取决于您将`@Id`注释放在哪里。[规范](http://download.oracle.com/otndocs/jcp/ejb-3_0-fr-eval-oth-JSpec/)说：

> *如果实体具有基于字段的访问权限，则持久性提供程序运行时直接访问实例变量。*

因此，您不需要以任何方式提供 setter 或 getter。因为您注释了您的**字段**而不是 getter 方法（注释 setter 方法将被忽略并且没有影响）。

但是，如果您编写了一个 getter 方法，并使用您的 @Id 注释而不是您的字段来注释此方法，那么我们将告诉我们的持久性提供者通过访问器 ( *getter* ) 和 mutator ( *setter* ) 方法访问我们的字段而不使用反射. 在这种情况下， getter 和 setter**都**应该存在。[Pro JPA 2: Mastering the Java™ Persistence API](https://rads.stackoverflow.com/amzn/click/com/1430219564)一书在第 71 页上写道（我的**粗体**标记！）：

> *当使用属性访问模式时，适用与 JavaBeans 相同的约定，并且必须有用于持久属性的 getter 和 setter 方法。属性的类型由getter方法的返回类型决定，必须与传入setter方法的单个参数的类型相同。**这两种方法都必须是公共的或受保护的可见性**。*

因此，我通常会注释我的 id 字段，并编写 setter 和 getter 方法，但 setter 方法我给予受保护的访问。我只是不希望任何其他代码片段对如此重要的字段具有轻松的写入权限。我不知道这是否会导致其他领域出现问题。我不是专家。但是我也找不到任何理由说明为什么*不*以这种方式设置 id 属性。另请参阅[Netbeans 论坛](http://netbeans.org/bugzilla/show_bug.cgi?id=151387)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-11T12:48:40.040

您可能会发现，无需从事物的持久性方面将 getter/setter 放在 JPA 实体上，您就可以摆脱困境。但是，如果您开始处理从其他来源序列化的实体，甚至在某些情况下从您的角度来看，您将需要一种方法来设置实体的 ID，以让 JPA 知道它正在处理现有实体，如果您不能设置id，那么持久层只会把它当作一个新的对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T12:37:01.707

`Id`是您的主键，没有它您将永远无法在数据库中插入记录。在您的情况下 `@GeneratedValue(strategy=GenerationType.AUTO)`，它确保`id`将为每个生成，`persist`但您还需要一种方法来访问它，因为它是`entity`您应该提供访问它的主要标识。

就像你问某人他的名字，他没有提供给你，你会觉得他只是粗鲁。

# java - org.apache.solr.common.SolrException：错误请求错误请求请求：http://localhost:8080/solr/update?wt=javabin&version=2

> ID：12369644
> 
> 赞同：2
> 
> 时间：2012-09-11T12:24:10.777
> 
> 标签：java, solr, hadoop

请帮助我，我正在尝试使用 NUTCH 抓取网站，但它给了我错误“ `java.io.IOException: Job failed!`”

我正在运行这个命令“ `bin/nutch solrindex http://<host name>:8080/solr/ crawl/crawldb -linkdb crawl/linkdb crawl/segments/*`”并且我正在使用 NUTCH 1.5.1 和 SOLR 3.6.1 以及 jdk java-7-openjdk-i386 和 ubuntu 12.04。

在 NUTCH/log 文件夹中存在的 hadoop.log 中显示以下内容：

```
2012-09-13 12:56:10,524 INFO  solr.SolrIndexer - SolrIndexer: starting at 2012-09-13 12:56:10

2012-09-13 12:56:10,604 INFO  indexer.IndexerMapReduce - IndexerMapReduce: crawldb: crawl/crawldb

2012-09-13 12:56:10,604 INFO  indexer.IndexerMapReduce - IndexerMapReduce: linkdb: crawl/linkdb

2012-09-13 12:56:10,604 INFO  indexer.IndexerMapReduce - IndexerMapReduces: adding segment: crawl/segments/20120910160403

2012-09-13 12:56:10,711 INFO  indexer.IndexerMapReduce - IndexerMapReduces: adding segment: crawl/segments/20120910160448

2012-09-13 12:56:10,715 INFO  indexer.IndexerMapReduce - IndexerMapReduces: adding segment: crawl/segments/20120910160631

2012-09-13 12:56:10,760 WARN  util.NativeCodeLoader - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable

2012-09-13 12:56:11,212 INFO  plugin.PluginRepository - Plugins: looking in: /home/zapbuild/Nutch/plugins

2012-09-13 12:56:11,310 INFO  plugin.PluginRepository - Plugin Auto-activation mode: [true]

2012-09-13 12:56:11,310 INFO  plugin.PluginRepository - Registered Plugins:

2012-09-13 12:56:11,310 INFO  plugin.PluginRepository -     the nutch core extension points (nutch-extensionpoints)

2012-09-13 12:56:11,310 INFO  plugin.PluginRepository -     Regex URL Normalizer (urlnormalizer-regex)

2012-09-13 12:56:11,310 INFO  plugin.PluginRepository -     CyberNeko HTML Parser (lib-nekohtml)

2012-09-13 12:56:11,310 INFO  plugin.PluginRepository -     OPIC Scoring Plug-in (scoring-opic)

2012-09-13 12:56:11,310 INFO  plugin.PluginRepository -     Basic URL Normalizer (urlnormalizer-basic)

2012-09-13 12:56:11,310 INFO  plugin.PluginRepository -     Tika Parser Plug-in (parse-tika)

2012-09-13 12:56:11,311 INFO  plugin.PluginRepository -     Basic Indexing Filter (index-basic)

2012-09-13 12:56:11,311 INFO  plugin.PluginRepository -     Html Parse Plug-in (parse-html)

2012-09-13 12:56:11,311 INFO  plugin.PluginRepository -     Anchor Indexing Filter (index-anchor)

2012-09-13 12:56:11,311 INFO  plugin.PluginRepository -     HTTP Framework (lib-http)

2012-09-13 12:56:11,311 INFO  plugin.PluginRepository -     Regex URL Filter (urlfilter-regex)

2012-09-13 12:56:11,311 INFO  plugin.PluginRepository -     Regex URL Filter Framework (lib-regex-filter)

2012-09-13 12:56:11,311 INFO  plugin.PluginRepository -     Pass-through URL Normalizer (urlnormalizer-pass)

2012-09-13 12:56:11,311 INFO  plugin.PluginRepository -     Http Protocol Plug-in (protocol-http)

2012-09-13 12:56:11,311 INFO  plugin.PluginRepository - Registered Extension-Points:

2012-09-13 12:56:11,311 INFO  plugin.PluginRepository -     Nutch URL Normalizer (org.apache.nutch.net.URLNormalizer)

2012-09-13 12:56:11,311 INFO  plugin.PluginRepository -     Nutch Protocol (org.apache.nutch.protocol.Protocol)

2012-09-13 12:56:11,311 INFO  plugin.PluginRepository -     Nutch Segment Merge Filter (org.apache.nutch.segment.SegmentMergeFilter)

2012-09-13 12:56:11,311 INFO  plugin.PluginRepository -     Nutch URL Filter (org.apache.nutch.net.URLFilter)

2012-09-13 12:56:11,311 INFO  plugin.PluginRepository -     Nutch Indexing Filter (org.apache.nutch.indexer.IndexingFilter)

2012-09-13 12:56:11,311 INFO  plugin.PluginRepository -     HTML Parse Filter (org.apache.nutch.parse.HtmlParseFilter)

2012-09-13 12:56:11,311 INFO  plugin.PluginRepository -     Nutch Content Parser (org.apache.nutch.parse.Parser)

2012-09-13 12:56:11,311 INFO  plugin.PluginRepository -     Nutch Scoring (org.apache.nutch.scoring.ScoringFilter)

2012-09-13 12:56:11,313 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter

2012-09-13 12:56:11,314 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off

2012-09-13 12:56:11,314 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter

2012-09-13 12:56:14,104 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter

2012-09-13 12:56:14,104 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off

2012-09-13 12:56:14,104 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter

2012-09-13 12:56:17,135 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter

2012-09-13 12:56:17,136 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off

2012-09-13 12:56:17,136 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter

2012-09-13 12:56:20,204 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter

2012-09-13 12:56:20,205 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off

2012-09-13 12:56:20,205 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter

2012-09-13 12:56:23,297 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter

2012-09-13 12:56:23,297 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off

2012-09-13 12:56:23,297 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter

2012-09-13 12:56:26,232 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter

2012-09-13 12:56:26,232 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off

2012-09-13 12:56:26,233 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter

2012-09-13 12:56:29,252 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter

2012-09-13 12:56:29,252 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off

2012-09-13 12:56:29,252 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter

2012-09-13 12:56:32,284 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter

2012-09-13 12:56:32,284 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off

2012-09-13 12:56:32,284 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter

2012-09-13 12:56:35,258 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter

2012-09-13 12:56:35,258 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off

2012-09-13 12:56:35,258 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter

2012-09-13 12:56:38,283 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter

2012-09-13 12:56:38,284 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off

2012-09-13 12:56:38,284 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter

2012-09-13 12:56:41,278 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter

2012-09-13 12:56:41,278 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off

2012-09-13 12:56:41,278 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter

2012-09-13 12:56:44,334 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter

2012-09-13 12:56:44,334 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off

2012-09-13 12:56:44,334 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter

2012-09-13 12:56:47,338 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter

2012-09-13 12:56:47,338 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off

2012-09-13 12:56:47,338 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter

2012-09-13 12:56:50,360 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter

2012-09-13 12:56:50,360 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off

2012-09-13 12:56:50,360 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter

2012-09-13 12:56:53,309 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.basic.BasicIndexingFilter

2012-09-13 12:56:53,310 INFO  anchor.AnchorIndexingFilter - Anchor deduplication is: off

2012-09-13 12:56:53,310 INFO  indexer.IndexingFilters - Adding org.apache.nutch.indexer.anchor.AnchorIndexingFilter

2012-09-13 12:56:53,357 INFO  solr.SolrMappingReader - source: content dest: content

2012-09-13 12:56:53,357 INFO  solr.SolrMappingReader - source: title dest: title

2012-09-13 12:56:53,357 INFO  solr.SolrMappingReader - source: host dest: host

2012-09-13 12:56:53,357 INFO  solr.SolrMappingReader - source: segment dest: segment

2012-09-13 12:56:53,357 INFO  solr.SolrMappingReader - source: boost dest: boost

2012-09-13 12:56:53,357 INFO  solr.SolrMappingReader - source: digest dest: digest

2012-09-13 12:56:53,357 INFO  solr.SolrMappingReader - source: tstamp dest: tstamp

2012-09-13 12:56:53,357 INFO  solr.SolrMappingReader - source: url dest: id

2012-09-13 12:56:53,357 INFO  solr.SolrMappingReader - source: url dest: url

2012-09-13 12:56:53,409 INFO  solr.SolrWriter - Indexing 18 documents

2012-09-13 12:56:53,604 WARN  mapred.LocalJobRunner - job_local_0001

org.apache.solr.common.SolrException: Missing solr core name in path

Missing solr core name in path

request: http://<host name>:8983/solr/update?wt=javabin&version=2
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:430)
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:244)
    at org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(AbstractUpdateRequest.java:105)
    at org.apache.nutch.indexer.solr.SolrWriter.close(SolrWriter.java:142)
    at org.apache.nutch.indexer.IndexerOutputFormat$1.close(IndexerOutputFormat.java:48)
    at org.apache.hadoop.mapred.ReduceTask$OldTrackingRecordWriter.close(ReduceTask.java:466)
    at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:530)
    at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:420)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:260)
2012-09-13 12:56:53,981 ERROR solr.SolrIndexer - java.io.IOException: Job failed! 
```

在 Solr 中我找不到任何日志文件。

请帮我解决我真的被这个问题困扰的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-05T16:30:30.870

您的日志说明了问题所在： `Missing solr core name in path`

您的请求应该有一个 Solr core 的名称，介于`/solr/`和`/update?wt=...`

像这样的东西： `http://<host name>:8983/solr/<core_name>/update?wt=javabin&version=2`

也许您应该将核心名称添加到您的 nutch 命令 URL 中

# linkedin - LinkedIn 中有性别字段吗？

> ID：12369645
> 
> 赞同：4
> 
> 时间：2012-09-11T12:24:14.007
> 
> 标签：linkedin

我的应用程序从 LinkedIn 获取用户信息，但我找不到从 LinkedIn 获取某人性别的方法。

可能吗？

LinkedIn 甚至有性别字段吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T12:25:31.623

没有。检查这个；[https://developer.linkedin.com/forum/javascript-api-gender-information-authenticated-user](https://developer.linkedin.com/forum/javascript-api-gender-information-authenticated-user)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-23T17:55:12.670

您可以通过单击我 > 设置和隐私 > 个人人口统计信息来添加自己的性别。

Linkedin 将此称为[Self-ID Information](http://www.linkedin.com/help/linkedin/answer/102697)。

# android - Android：无法从数据库中读取新行

> ID：12369657
> 
> 赞同：0
> 
> 时间：2012-09-11T12:24:49.037
> 
> 标签：android, database, newline

我有一个带有 var_char(2000) 字段的数据库。在这个字段中，有一些新行的文本，就像写的普通文本：

```
hello
i am davide
bye 
```

我把这个文本放在一个文本视图中，但我看到的文本就像一个独特的行（你好，我是大卫再见），没有换行符。在iphone中一切正常，我没有做任何特别的事情......但这里没有。我怎样才能？我试过替换 \n 或替换 \r\no 其他东西，但没有成功。还有 Html.fromHtml()

* * *

singleLine(false) 已弃用，它不起作用。文本也不起作用。它将换行符视为空格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:28:58.560

您是否尝试更改 sqlite 中的数据类型？，您的 varchar 只是文本？如果没有，请尝试这样做也许会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:30:42.753

尝试禁用文本视图的多行功能。

如果您从 XML 文件创建文本视图，请将此属性添加到文本视图：

```
<TextView
    [...]
    android:singleLine="false"
    [...] /> 
```

如果您以编程方式创建了文本视图，请尝试改用以下方法：

```
TextView myText = [...]
myText.setSingleLine ( false ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:30:50.000

尝试设置`android:singleLine="false"`为您的 textView。

编辑：如果这不起作用，请使用以下代码检查字符串是否有换行符

```
char[] chararray= mString.toCharArray();

for(char temp:chararry){
   int value = temp;
   System.out.println(value);
} 
```

换行符的十进制值是 10 或 13。而空格字符是 32。

Edit2：我认为 TextView 不会转到 13 的 \r 的下一行。所以这样做

```
 mString = mString.replaceAll("\r","\n"); 
```

# java - JSF 应用程序中的交互式终端仿真

> ID：12369663
> 
> 赞同：1
> 
> 时间：2012-09-11T12:25:04.673
> 
> 标签：java, ssh, applet, jnlp, terminal-emulator

我们正在开发由 JSF(Primefaces)/Spring/Hibernate 支持的（基本上是数据挖掘）Web 应用程序。对于下一步，我们必须创建某种终端仿真，以便 Web 应用程序可以通过 SSH 用户访问请求的主机。

这个问题的目的是**找出适合我们要求的技术**。目前我正在用 java applet 和 jnlp 做概念证明，但对它们的理解不够深入，无法提前看到它们的局限性/可能性。

**用例：（**从项目规范简化）：

假设我们在 java applet 中进行仿真。*想象一下带有 p:selectOne 菜单 ( hostMenu* )、p:dataTable ( *scriptTable* ) 和我们的小程序的简单网页。HostMenu 项目由包含服务器 URL、登录名和密码的对象支持。将数据复制到小程序并建立 SSH 连接的选择更改触发事件。

现在在 scriptTable 中，将有用户定义的简单、预定义的脚本。将脚本视为非常简单的东西（例如*ls -l*在 linux 机器上）。表上的双击事件将在小程序的 ssh 会话中执行脚本。

**其他一些要求和合同限制**

*   ssh 连接**必须**在客户端计算机上完成（而不是在服务器上）
*   仿真必须是完全交互式的（特别是在 linux 机器上，TAB 键自动完成）
*   在网页上，AJAX 请求不会重置小程序（它在请求之前保持与机器的连接）

任何回应都值得赞赏。除了applet/jnlp 之外的其他技术也是如此。例如，如果您知道从 JSF 与外部模拟器（Putty、linux 控制台）交互的可能性，我们可以使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:14:22.997

对于前端，请查看 Primefaces 终端组件：

[http://www.primefaces.org/showcase-labs/ui/terminalHome.jsf](http://www.primefaces.org/showcase-labs/ui/terminalHome.jsf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:42:04.960

好吧，我想我们终于想通了使用 JCraft 的[JCterm](http://www.jcraft.com/jcterm/)。它需要对代码进行一些更改，但它似乎运行良好（到目前为止；））

# parsing - Scala 的 ANTLR 语法？

> ID：12369674
> 
> 赞同：14
> 
> 时间：2012-09-11T12:25:44.677
> 
> 标签：parsing, scala, antlr

我正在尝试为演示项目构建静态分析工具。我们可以自由选择要分析的语言。我首先使用 ANTLR 编写了一个 Java 代码分析器。我现在想对 Scala 代码做同样的事情。但是，我找不到 Scala 的 ANTLR 语法。它存在吗？还有其他机器可读形式的 Scala 语法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-12T16:18:11.703

我不相信有这样的事情。

问题是对于*任何*语言，*特别是*对于像 Scala 这样的库语言，词法分析和句法分析是静态分析中最不有趣和最琐碎的部分。为了做任何*有趣*的事情，你需要执行大量的*语义*分析：去糖、类型推断、类型检查、种类检查、宏扩展、重载解析、隐式解析、名称绑定。简而言之：您需要或多或少地重新实现整个 Scala 编译器，以实际代码生成部分为模。请记住，Scala 的宏系统和 Scala 的类型系统都是图灵完备的（实际上，Scala 的宏系统*是*Scala！）：如果不实际*执行*宏扩展、类型推断和类型检查，可能会进行大量的编译时和类型级计算，这是*无法分析的。*

 *这是一项*艰巨*的任务，实际上只有两个项目成功完成：一个是 Scala 编译器本身，另一个是 IntelliJ IDEA Scala 插件。

更不用说编译器插件了，它们几乎可以任意改变 Scala 的语法和语义。

但看哪，有希望：Scala 编译器本身提供了一个称为*Presentation Compiler*的 API ，它是专门为 IDE、代码荧光笔和各种静态分析工具设计的。它使您可以在优化和代码生成阶段之前访问编译器在编译期间拥有的全部信息。ScalaDoc、Scala REPL、Scala Eclipse 插件、NetBeans Scala 插件、SimplyScala.Com、Emacs 的 ENSIME 插件、一些静态分析工具和许多其他工具都使用它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-12T13:03:50.700

[您可以在https://github.com/lrlucena/grammars-v4/tree/master/scala](https://github.com/lrlucena/grammars-v4/tree/master/scala)找到 ANTLR 的 Scala 语法。它基于 Scala 语言规范[http://www.scala-lang.org/files/archive/spec/2.11/13-syntax-summary.html](http://www.scala-lang.org/files/archive/spec/2.11/13-syntax-summary.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T16:10:12.223

[Scala 语言参考](http://www.scala-lang.org/docu/files/ScalaReference.pdf)的附录 A对您有用吗？它是 EBNF 格式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T13:07:02.760

Scalastyle 使用[scalariform](https://github.com/mdr/scalariform)对其进行解析。有了这个，你得到一个案例类的 AST。但是，您只能获得文件中的信息，例如，您不会获得推断类型。

如果您不需要所有额外信息，请查看 Scalariform。Scalastyle 代码相当容易理解，从[Checker.scala](https://github.com/scalastyle/scalastyle/blob/master/src/main/scala/org/scalastyle/Checker.scala)开始。*

# firefox - Firefox 扩展中的实用程序功能应该放在哪里

> ID：12369676
> 
> 赞同：0
> 
> 时间：2012-09-11T12:25:49.293
> 
> 标签：firefox, firefox-addon, xul

在编写 Firefox XUL 扩展时，我发现我想在整个扩展中共享一些功能（业务逻辑）。存放这个的最佳位置是什么？

我可以创建某种总是首先加载的库（javascript）文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:42:10.243

您很可能想要创建一个[JavaScript 代码模块](https://developer.mozilla.org/en-US/docs/JavaScript_code_modules)。您可以使用[Components.utils.import()](https://developer.mozilla.org/en/Components.utils.import)来加载它：

```
Components.utils.import("chrome://myaddon/content/utils.jsm"); 
```

并在`utils.jsm`您定义该语句应导入哪些符号，例如：

```
var EXPORTED_SYMBOLS = ["Utils"];

var Utils = {
}; 
```

该模块将在第一次使用时被加载并在此之后保留在内存中 - 无论您的扩展中有多少地方使用它，都只会有一个模块实例。请注意，我使用`chrome://`URL 加载模块，从 Firefox 4 开始支持。文档建议使用更简洁的 URL `resource://`，因为模块实际上与用户界面没有任何关系 - 尽管如此，使用`chrome://`URL 通常更简单。

# jquery - 由 iframe 和 ajax 引起的 IE 和 Chrome 中的 django 应用程序前端错误

> ID：12369687
> 
> 赞同：0
> 
> 时间：2012-09-11T12:26:20.563
> 
> 标签：jquery, python, html, django, internet-explorer

我有一个由 django 驱动的应用，</p>

第一页：

[http://dev.stackpop.org:8081/test/3/](http://dev.stackpop.org:8081/test/3/)

第二页：</p>

[http://stackpop.org/helpme.html](http://stackpop.org/helpme.html)

Page II 只包含 Page I 和 iframe

以上 2 页在 IE 和 chrome 中都运行良好。

我使用另一个域名指向应用程序并访问页面 2 将其引用为页面 3：</p>

[http://www.jiongceyan.com/helpme.html](http://www.jiongceyan.com/helpme.html)

实际上，第 2 页和第 3 页是同一个 html 文件。但是，第 2 页在 IE 和 chrome 中都可以正常工作，第 3 页只能在 chrome 中工作，而不能在 IE 中工作。

当我在 IE 和 chrome 中将 helpme.html 作为本地文件打开时，它仍然无法在 IE 中运行。

* * *

“不起作用”意味着如果您单击按钮，则 ajax 不起作用。

# android - 滚动条在 android 手机间隙中不可见？

> ID：12369688
> 
> 赞同：3
> 
> 时间：2012-09-11T12:26:21.173
> 
> 标签：android, cordova

我是电话 gap 的新手。我在列表视图中显示数据列表。从服务器收集的数据，我想在视图中添加滚动条。如何在电话间隙中添加滚动条和我的视图滚动很粘。如何使它顺利。

我已将 iscroll 添加到我的 html 文件中，并且我使用了以下代码，

```
<script language = "javascript" src = "../scripts/iscroll.js"></script> 
```

我的 html doby 代码是，

```
<body onLoad="initList()">

    <div id="wrapper">
     <div id="scroller">
     </div>
    </div>

</body> 
```

我的java脚本代码是，

```
function initList()
{

    var statsIds    = [];
    var array       = ["Active", "Paused"];
    $.ajax(
        {
          url       : campaignStatus,
          success   : function(data) 
          {
            var data        = JSON.parse(data);
            var count       = data.content.count;
            var res         = data.content.response;

            $.each(res, function(k, v)
            {
                statsArray.push(v.status);
                statsIds[v.status]  = v.id;
            });
          }
        });

    $.ajax(
        {
            url     : campaignlistURL,
            success : function(data) 
            {
                var data        = JSON.parse(data);
                var count       = data.content.count;
                response        = data.content.response;

                var page = '<div id="top-box"><div id="lable-box"><div class="lable-txt">Campaign List</div></div><div id="search-box"><div class="search"><div class="left"><img src="../images/search-img.png"></div><div class="middle"><input type="text" id="search" placeholder="search by Campaign Name.." onkeyup="campaignsSearch()"/></div></div></div></div>';

                page    += '<div id="empty-container"></div>';

                page    += '<div id="table-container">';                                    
                //----------------------------------
                $.each(response, function(k, v)
                {

                    page    += '<div class="table-box">';
                    page    += '<div class="top">';             
                    page    += '<div class="left"><label>Campaign Name:</label><input type="text" class="campaign" readonly="true" value='+v.name+' onClick="openCampaignDetails()" id='+v.id+'></div>';

                    var statusId    = v.status;
                    var count       = 0;
                    page    += '<div class="right"><label>Status</label>';
                    for(var i=0; i<statsArray.length; i++)
                    {
                        if(statusId == i)
                        {
                            if(statsArray[i] == "Active" || statsArray[i] == "Paused")
                            {
                                if(count == 0)
                                {
                                    page += '<select id="'+v.id+'" onchange="statusChange()">';
                                }

                                for(var j=0; j<array.length; j++)
                                {
                                    //console.log(statsIds[array[j]] + array[j]);

                                    if(array[j] == statsArray[i])
                                    {
                                        page += '<option id='+statsIds[array[j]]+' SELECTED>'+array[j]+'</option>';
                                    }

                                    else
                                    {
                                        page += '<option id='+statsIds[array[j]]+'>'+array[j]+'</option>';
                                    }

                                }
                                count++;
                            }
                            else
                            {
                                page += statsArray[i];
                            }

                        }
                    }

                    page    += '</select>';
                    page    += '</div>';
                    page    +='</div>'; //-- top -

                    //*******Table***********
                    var statistics  = v.stats;
                    if(statistics)
                    {
                        page    += '<div class="table-data"><div class="column"><div class="header">IMPS </div><div class="middle">'+statistics.sum.adjusted_views+'</div></div><div class="column"><div class="header">Clicks </div><div class="middle">'+statistics.sum.adjusted_clicks+'</div></div><div class="column"><div class="header"> Costs </div><div class="middle">'+statistics.sum.adjusted_cost+' </div></div><div class="column" style="border:0px;"><div class="header"> Leads</div><div class="middle">'+statistics.sum.adjusted_convs_0+'</div></div></div>';
                    }                   
                    page    += '</div>'; //-- table-box

                });
                page    += '</div>'; //-- table-container -

                page    += '<div id="footer"><div class="left-logo"><img src="../images/logo-2.png" width="111" height="39" onClick="reloadCampaigns()"></div><div class="right-log-out"><a href="#"><img src="../images/log-out.png" width="21" height="18" border="0" onClick="logout()"></a></div></div>';
                document.getElementById("wrapper").innerHTML = page;
                document.getElementById("table-container").style.overflow="scroll";

                var myScroll = new iScroll('wrapper',{fixedScrollbar : false,hideScrollbar:false});
                //document.addEventListener('DOMContentLoaded', loaded, false);

              //    document.addEventListener('DOMContentLoaded', function () { setTimeout(loaded, 200); }, false);
                //------------------
            }
        });
} 
```

我想我犯了一些错误请指导我这样做。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:47:34.807

尝试使用[nicescroller](http://areaaperta.com/nicescroll/)

它很好，流畅，易于实现，最重要的是，它支持触摸。很简单：

```
var nice = false;
$(document).ready(
  function() { 
    nice = $("#div").niceScroll();
   }
); 
```

只要确保您的数据具有固定高度，如果在从服务器读取数据时高度发生变化，您可以在每次高度变化时重新初始化 nicescroll。

```
$("#div").getNicescroll().remove().niceScroll(); 
```

# python - 如何让剧情不消失？

> ID：12369693
> 
> 赞同：12
> 
> 时间：2012-09-11T12:26:45.243
> 
> 标签：python, matplotlib

假设您需要将`figure`and存储`subplot`在变量中（以便以后修改属性）。你怎样才能让整个数字停留在几毫秒后不会很快消失？

```
import matplotlib.pyplot as plt

fig = plt.figure() 

ax = fig.add_subplot(2,2,1)
ax.plot(1)

fig.show() 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-15T23:15:52.790

更改`fig`为`plt`：

```
plt.show() 
```

# sql-server - 动态 SQL 查找替换功能

> ID：12369694
> 
> 赞同：0
> 
> 时间：2012-09-11T12:26:48.560
> 
> 标签：sql-server, function, dynamic, replace

@dmarkez 昨天问了一个问题，就在我点击`Post Your Answer`按钮之前，他删除了这个问题。我认为答案值得分享......他没有重新发布这个问题，所以我希望他不介意我重新发布它，以便我可以与其他尝试类似问题的人分享答案：

## 原始标题

用于操作字符串的 MS SQL 函数

## 原始问题

我需要一个 MS SQL 函数，它需要确定带有前缀的名称，然后将其与实际名称结合起来。

实现这一目标的最佳方法或功能是什么？

前缀名称：Te、De、Van、Dela、O、Mc、San、Los 等……</p>

示例输入/输出名称：

```
van dam te mora te-> vandam temora te

o mara dela cruz -> omara delacruz

mc arthur white o san miguel -> mcarthur white osanmiguel

moana te aro van dolf-> moana tearo vandolf 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:27:13.910

如果将所有搜索和替换值放在一个表中，则可以编写几行 SQL 循环遍历 S&R 值以修复名称。向表格中添加更多 S&R 对很容易`prefix`，因此您的 S&R 例程是动态的：

```
declare @prefix table (srch varchar(255), rplc varchar(255))
declare @names table (name varchar(255))

insert into @prefix
values ('te ', 'te'), ('de ', 'de'), ('van ', 'van'), ('dela ', 'dela'), ('san ', 'san'), ('o ', 'o'), ('mc ', 'mc'), ('los ', 'los')

insert into @names
values ('van dam te mora te'), ('o mara dela cruz'), ('mc arthur white o san miguel'), ('moana te aro van dolf')

while (1=1)
begin
  update n
  set    n.name = replace(n.name, p.srch, p.rplc)
  from   @names n,
         @prefix p
  where  (n.name like p.srch + '%') or (n.name like '% ' + p.srch + '%')

  if @@rowcount = 0
    break
end

select * from @names 
```

请注意前缀表中的`('san ', 'san')`前面`('o ', 'o')`。这是因为`san`之前必须更换`o`，否则`osanmiguel`会保留`osan miguel`。因此，S&R 的顺序很重要。您需要将聚集索引添加到正确排序 S&R 记录的前缀表中，以便 S&R 循环首先处理子前缀。

# matlab - 在 OpenCV 中访问多维 Mat 的子矩阵

> ID：12369697
> 
> 赞同：8
> 
> 时间：2012-09-11T12:26:58.707
> 
> 标签：matlab, opencv, matrix

根据这篇 [文章](https://stackoverflow.com/questions/8809517/multi-dimensional-data-in-a-matrix-in-opencv-with-c)和 OpenCV 文档，我可以初始化和访问多维 Mat 的每个元素。

实际上，我首先在 MATLAB 中编码，现在需要转换为 OpenCV。MATLAB 矩阵支持子矩阵访问，例如：a(:,:,3) 或 b(:,:,3:5)

这可以在 OpenCV 中完成吗？据我所知，这可以用 2D Mat 来完成。更多的2D怎么样？

Edit01：此外，对于多维 Mat，属性 cols 和 rows 不足以表征矩阵的 3 种大小。有尺寸大于3的情况。如何存储这些属性？

编辑02：

```
// create a 100x100x100 8-bit array
int sz[] = {100, 100, 100};
Mat bigCube(3, sz, CV_8U, Scalar::all(0)); 
```

我放弃了使用 OpenCV Mat 访问子矩阵的想法。也许，OpenCV 不支持它。但是从这个示例代码中，构造函数接收来自“sz”的第 3 个维度。这个第 3 维传递给 Mat 的哪个属性？可能在这种情况下，rows = 100，cols = 100，其他？？= 100 我迷失了 OPenCV 文档

Edit03：从 OpenCV 源跟踪 Mat 类我在 mat.hpp 的 Edit02 中找到了构造函数的定义：

```
inline Mat::Mat(int _dims, const int* _sz, int _type, const Scalar& _s)
    : flags(0), dims(0), rows(0), cols(0), data(0), refcount(0),
    datastart(0), dataend(0), datalimit(0), allocator(0), size(&rows)
{
    create(_dims, _sz, _type);
    *this = _s;
} 
```

下一个问题是这里的“创建”函数在哪里以及如何定义？=> 在 OpenCV 中跟踪这个 Mat 定义可能有助于我在 Mat 矩阵中修改/自定义我自己的特征

PS：如果我的帖子写的太乱了请见谅！！我是一个新手程序员，试图解决我的编程问题。如果我的方法不够好或不够正确，请随时纠正我。谢谢！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T13:18:10.463

您可以使用函数 rowRange、colRange 或什至轻松访问 2D cv::Mat 的子矩阵

```
cv::Mat subMat = originalMat(cv::Rect(x,y,width,height)); 
```

此外，您可以在矩阵构造函数中定义的矩阵中的通道数可以用作第三维（但我认为它仅限于 256 或 512）。

还有模板化的 cv::Mat_ 类，您可以根据自己的目的进行调整

[编辑]

我已经检查了 > 2 维矩阵的构造函数。当您运行它时，Mat 的 rows 和 cols 字段设置为 -1。实际矩阵大小作为 int 数组存储在 Mat::size 中。对于维数 >2 的矩阵，您不能使用 cv::Rect 或 rowRange/colRange 来使用子矩阵构造函数。

恐怕您必须做一些工作来提取 dim>2 的子矩阵，直接使用行数据。但是您可以使用存储在 Mat::step 中的信息来告诉您数组的布局。这在[官方文档](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat)中有解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-05T10:35:55.770

您可以通过以下方式创建子矩阵：

```
cv::Mat subMat(100,100,CV_8U, bigCube.ptr(0)); 
```

subMat 是一个二维矩阵，所以你可以做你想做的事。

# visual-studio-2010 - 如何托管 Clickonce 应用程序的更新？

> ID：12369699
> 
> 赞同：2
> 
> 时间：2012-09-11T12:27:02.537
> 
> 标签：visual-studio-2010, clickonce

当使用 Clickonce 部署时，Visual Studio 中的发布向导询问应用程序是否会在线查找更新（如果是，则提供 url）我究竟应该指向什么？我是否只是在服务器上托管 /publish 文件夹的内容，然后输入该文件夹的 url？然后在我发布更新时更新在线 /publish 文件夹，或者 url 是否应该指向其他内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:02:28.767

通常，托管 ClickOnce 部署的最佳方式是从网络服务器进行部署。

在发布向导的第一页上，它要求将其`Specify the location to publish the application`保留为`Publish\`

在它询问 3 个选项的第二页上，选择顶部标记的选项`From a Website`并输入您要从中部署的 Web 服务器的 url（这需要是完整的 uri inc 虚拟目录）。

然后完成向导。

您最终应该得到的是 Publish 目录中的一系列文件，其中一个将是`publish.htm`

然后，您可以将这些文件按原样上传到您的网络服务器，并提供指向 publish.htm 文件的链接，让您的用户启动安装程序。

如果您重新发布，只需保持设置不变，您应该向所有使用 publish.htm 链接进行安装的人推出新的更新。

# web-services - 如何将具有相同名称空间和本地名称请求的两个单独的 Web 服务路由到不同的端点？

> ID：12369701
> 
> 赞同：9
> 
> 时间：2012-09-11T12:27:04.650
> 
> 标签：web-services, spring, spring-ws, spml

我正在尝试在一个 spring 部署中创建 2 个单独的 Web 服务，两者都使用相同的 xsd 模式生成 wsdl，但将它们路由到两个单独的端点，以便我可以在不同的上下文中以不同的方式处理请求.

前任：

Webservice 1：访问的子集、较低的权限和安全约束

Webservice 2：更高的权限

```
<sws:dynamic-wsdl id="spml-readonly" 
    portTypeName="SpmlReadOnlyService" 
    locationUri="SpmlReadOnly">
    <sws:xsd location="/WEB-INF/xsd/spml/pstc_spmlv2_core.xsd"/>
</sws:dynamic-wsdl>

<sws:dynamic-wsdl id="spml-crud" 
    portTypeName="SpmlCrudService" 
    locationUri="SpmlCrud">
    <sws:xsd location="/WEB-INF/xsd/spml/pstc_spmlv2_core.xsd"/>
    <sws:xsd location="/WEB-INF/xsd/spml/pstc_spmlv2_search.xsd"/>
    <sws:xsd location="/WEB-INF/xsd/spml/pstc_spmlv2_batch.xsd"/>
</sws:dynamic-wsdl> 
```

现在，由于两个 wsdls 都基于相同的 xsd，因此请求的“命名空间”和“localPart”通过相同的网络连接，无论我访问的是哪个 Web 服务（/SpmlReadOnly 或 /SpmlCrud）。

因此，这排除了已弃用的 PayloadRootQNameEndpointMapping ，因为 localPart 和命名空间仍然是相同的，等等......而且我当前的配置只是将请求路由到相同的端点方法处理程序，我无法区分调用了哪个 Web 服务：

```
 @PayloadRoot(namespace = NAMESPACE_URI, localPart = "lookupRequest")
    @ResponsePayload
    public Source handleLookupRequest(SoapMessage message) throws Exception {
        ...
    } 
```

我能做的甚至可能吗？如果 xsd 是共享的，并且在模式的根目录具有相同的命名空间，并且请求相同的 localPart 方法，是否有办法区分它们并映射到两个不同的端点？任何有关这方面的信息都会很有用！我希望我不必设置两个单独的 .wars 并在服务器上使用自己的代码库分别部署它们！

谢谢，达米安

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T07:25:11.353

你需要一些结合`URI`和`PayloadRoot`映射的东西。不幸的是 Spring-Ws 没有这样的东西。但是因为它非常可扩展，所以很容易实现这一点。

**TL;博士**

有关工作示例，请参阅[GitHub 上的此分支](https://github.com/grgrzybek/spring-forum-help/tree/so-12369701)

**细节**

您需要创建组合 URI+QName 到`org.springframework.ws.server.endpoint.MethodEndpoint`实例的映射。此外，您应该最小化重复现有 Spring-Ws 功能的代码。

所以 1）您需要显式配置 Spring-Ws 注释而不使用`<sws:annotation-driven />`：

这是您的要求（使用我的模式）：

```
<ws:dynamic-wsdl id="spml-readonly" portTypeName="SpmlReadOnlyService" locationUri="SpmlReadOnly">
    <ws:xsd location="classpath:springws/model/schema.xsd" />
</ws:dynamic-wsdl>

<ws:dynamic-wsdl id="spml-crud" portTypeName="SpmlCrudService" locationUri="SpmlCrud">
    <ws:xsd location="classpath:springws/model/schema.xsd" />
    <ws:xsd location="classpath:springws/model/schema2.xsd" />
</ws:dynamic-wsdl> 
```

这就是您需要手动执行的所有操作，通常由`<sws:annotation-driven />`（一个适配器和一个 JAXB 编组器）配置：

```
<bean class="org.springframework.ws.server.endpoint.adapter.DefaultMethodEndpointAdapter">
    <property name="methodArgumentResolvers">
        <list>
            <ref local="marshallingPayloadMethodProcessor"/>
        </list>
    </property>
    <property name="methodReturnValueHandlers">
        <list>
            <ref local="marshallingPayloadMethodProcessor"/>
        </list>
    </property>
</bean>
<bean id="marshallingPayloadMethodProcessor" class="org.springframework.ws.server.endpoint.adapter.method.MarshallingPayloadMethodProcessor">
    <property name="marshaller" ref="marshaller" />
    <property name="unmarshaller" ref="marshaller" />
</bean>

<bean id="marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="contextPaths">
        <list>
            <value>springws.model</value>
        </list>
    </property>
</bean> 
```

这是自定义映射：

```
<bean class="springws.PathAndPayloadRootAnnotationEndpointMapping" /> 
```

2）你应该创建自己的映射

```
public class PathAndPayloadRootAnnotationEndpointMapping extends PayloadRootAnnotationMethodEndpointMapping
{
    @Override
    protected QName getLookupKeyForMessage(MessageContext messageContext) throws Exception
    {
        String urlPart = "";
        QName payloadRootPart = super.getLookupKeyForMessage(messageContext);

        TransportContext transportContext = TransportContextHolder.getTransportContext();
        if (transportContext != null) {
            WebServiceConnection connection = transportContext.getConnection();
            if (connection != null && connection instanceof HttpServletConnection) {
                String requestURI = ((HttpServletConnection)connection).getHttpServletRequest().getRequestURI();
                String contextPath = ((HttpServletConnection)connection).getHttpServletRequest().getContextPath();
                urlPart = requestURI.substring(contextPath.length());
            }
        }

        return new QName(payloadRootPart.getNamespaceURI(), urlPart + "/" + payloadRootPart.getLocalPart());
    }

    @Override
    protected List<QName> getLookupKeysForMethod(Method method)
    {
        List<QName> result = new ArrayList<QName>();
        RequestMapping rm = AnnotationUtils.findAnnotation(method.getDeclaringClass(), RequestMapping.class);
        String urlPart = rm == null || rm.value().length != 1 ? "" : rm.value()[0];
        List<QName> methodPart = super.getLookupKeysForMethod(method);
        for (QName qName : methodPart) {
            result.add(new QName(qName.getNamespaceURI(), urlPart + "/" + qName.getLocalPart()));
        }
        return result;
    }   
} 
```

延伸`org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping`。它所做的只是使用从端点 URI 中提取的信息来扩展消息的*键*（有效负载根元素的 QName）。我为此使用了 Spring 的`@org.springframework.web.bind.annotation.RequestMapping`注释，但认为这是一个 hack 的人可能会创建他/她自己的注释。

所以对于这样的端点：

```
@org.springframework.ws.server.endpoint.annotation.Endpoint
@RequestMapping("/ws/SpmlReadOnly")
public class Endpoint1
{
    @ResponsePayload
    @PayloadRoot(namespace = "urn:test", localPart = "method1Request")
    public Response2 method(@RequestPayload Request1 request) throws Exception
    {
        return new Response2("e1 m1");
    }
} 
```

关键不是：

```
namespace = urn:test
localName = method1Request 
```

但是这个：

```
namespace = urn:test
localName = /ws/SpmlReadOnly/method1Request 
```

该`protected QName getLookupKeyForMessage(MessageContext messageContext)`方法确保映射 URI 独立于应用程序部署的 WAR 上下文。

# c# - 在多个值上使用布尔运算符的快捷方式

> ID：12369702
> 
> 赞同：2
> 
> 时间：2012-09-11T12:27:09.127
> 
> 标签：c#

首先，对不起，如果标题不明确或描述性不强；我不知道具体要写什么。

我想知道是否有更好的方法来执行此操作：

```
bool result = variable1.innerValue.level2.innerValue == 1 || 
              variable1.innerValue.level2.innerValue == 2 || 
              variable1.innerValue.level2.innerValue == 3; 
```

我们不能这样写：

```
bool result = variable1.innerValue.level2.innerValue == (1 || 2 || 3); 
```

这将给出语法错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T12:29:07.863

您可以使用集合作为占位符和[`Enumerable.Contains`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.contains.aspx)：

```
if(new[]{1, 2, 3}.Contains(variable1.innerValue.level2.innerValue))
{

} 
```

或者，为了它的价值，这个扩展：

```
public static bool In<T>(this T source, params T[] list)
{
  if(null==source) throw new ArgumentNullException("source");
  return list.Contains(source);
} 
```

这使您可以编写：

```
if(variable1.innerValue.level2.innerValue.In(1, 2, 3))
{

} 
```

[你最喜欢的 C# 扩展方法是什么？(codeplex.com/extensionoverflow)](https://stackoverflow.com/questions/271398/what-are-your-favorite-extension-methods-for-c-codeplex-com-extensionoverflow)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:29:39.690

在这种情况下。你可以做到`Enumerable.Range(1, 3).Contains(variable1.innerValue.level2.innerValue)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T12:29:44.907

```
using System.Linq;
...
bool result = new[] {1, 2, 3}.Contains(variable1.innerValue.level2.innerValue); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T12:30:22.113

```
var listToCheck = new int[]{1,2,3};
var innerValue = variable1.innerValue.level2.innerValue;

bool result = listToCheck.Contains(innerValue); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T12:31:19.120

老实说，我首先想到的是旧的[Introduce Explaining Variable](http://www.refactoring.com/catalog/introduceExplainingVariable.html)重构，它不仅减少了重复，而且使您的代码更加不言自明：

```
var innerValue = variable1.innerValue.level2.innerValue;
bool result = innerValue == 1 || innerValue == 2 || innerValue == 3; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T12:29:32.910

怎么样

```
(new List<int>(){1,2,3}).Exists(i=>i == variable1.innerValue.level2.innerValue) 
```

# sql - 最大值和最小值的 T-sql 等级

> ID：12369703
> 
> 赞同：1
> 
> 时间：2012-09-11T12:27:12.247
> 
> 标签：sql, sql-server, tsql, rank, with-statement

我需要有关 t-sql 查询的帮助。

我有一个具有这种结构的表：

```
id  |  OverallRank  |  FirstRank  |  SecondRank  |  Nrank..
1   |       10      |    20       |     30       |    5
2   |       15      |    24       |     12       |    80
3   |       10      |    40       |     37       |    12 
```

我需要一个产生这种结果的查询：

当id：1

```
id  |  OverallRank  |  BestRankLabel  |  BestRankValue  |  WorstRankLabel  | WorkRankValue
1   |     10        |    SecondRank   |        30       |     Nrank        |       5 
```

当id：2

```
id  |  OverallRank  |  BestRankLabel  |  BestRankValue  |  WorstRankLabel  | WorkRankValue
1   |     15        |    FirstRank    |        24       |     SecondRank   |       12 
```

我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:09:01.503

这种查询是您应该规范化数据的*原因。*

```
declare @id int, @numranks int
select @id = 1, @numranks = 3 -- number of Rank columns

;with cte as    
(   
    select *
    from
    (
        select *,
            ROW_NUMBER() over (partition by id order by rank desc) rn
        from
        (
        select * from YourBadlyDesignedTable
            unpivot (Rank for RankNo in (FirstRank, SecondRank, ThirdRank))u -- etc
        ) v2
    ) v1
    where id=@id and rn in (1, @numranks)
) 
    select 
        tMin.id, 
        tMin.OverallRank,       
        tMin.RankNo as BestRankLabel,
        tMin.Rank as BestRankValue,
        tMax.RankNo as WorstRankLabel,
        tMax.Rank as WorstRankValue
    from (select * from cte where rn=1) tMin
        inner join (select * from cte where rn>1) tMax
            on tMin.id = tmax.id 
```

`id = @id`如果你想要所有行，你可以取出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:10:23.877

```
with cte(id, RankValue,RankName) as (
            SELECT id, RankValue,RankName
            FROM 
                        (SELECT id,  OverallRank,  FirstRank,  SecondRank, Nrank 
                        FROM ##input) p
            UNPIVOT
                        (RankValue FOR RankName IN 
                                    (OverallRank,  FirstRank,  SecondRank, Nrank)
            )AS unpvt)
select t1.id, max(case when RankName = 'OverallRank'  then RankValue else null end) as OverallRank,
        max(case when t1.RankValue = t2.MaxRankValue then RankName else null end) as BestRankName,
        MAX(t2.MaxRankValue) as BestRankValue,
        max(case when t1.RankValue = t3.MinRankValue then RankName else null end) as WorstRankName,
        MAX(t3.MinRankValue) as WorstRankValue
        from cte as t1
        left join (select id, MAX(RankValue) as MaxRankValue from cte group by id) as t2 on t1.id = t2.id
        left join (select id, min(RankValue) as MinRankValue from cte group by id) as t3 on t1.id = t3.id
    group by t1.id 
```

与您的测试数据一起工作。您只能通过添加右列的名称来编辑 RankName IN (OverallRank、FirstRank、SecondRank、Nrank)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:50:55.897

```
CASE 
   WHEN OverallRank > FirstRank and OverallRank > FirstSecondRand and  OverallRank > nRank THEN 'OverallRank' 
   WHEN FirstRank > OverallRank ... THEN 'FirstRank' 
END 
```

# java - Eclipse 中 NCrunch for Java 的等价物

> ID：12369704
> 
> 赞同：15
> 
> 时间：2012-09-11T12:27:12.560
> 
> 标签：java, eclipse, unit-testing, tdd, ncrunch

我正在寻找一种在 Eclipse 中为 Java 编写代码（例如 Visual Studio 的 NCrunch）时进行持续测试的工具。有没有类似的东西是免费的？

理想情况下，它会持续测试，但也会实时给我反馈哪些线路通过，哪些线路不通过。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T18:40:20.713

I don't know NCrunch. But [Infinitest](http://infinitest.github.com/) is a nice continuous test runner for Eclipse (probably with less features than NCrunch). It runs unit tests affected by changed code on every save action and displays the results in the status bar.

However, it only works for "plain" JUnit tests, not for plugin based JUnit tests (i.e. you cannot use it when developing Eclipse plugins yourself).

# java - Java 的 Thread.sleep 将以何种方式在这里有用？

> ID：12369706
> 
> 赞同：1
> 
> 时间：2012-09-11T12:27:25.173
> 
> 标签：java, multithreading, jakarta-ee

我正在开发一个现有的 Java EE 多线程应用程序。

我无法在我的应用程序中理解这件事。有一个名为 的线程 `UserThread`，在其`run`方法的`while(true)`条件下，它从一个位置读取数据并将数据推送到 Websocket。之后，线程休眠 1000 秒。

为什么这`Thread.sleep()`很有用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T12:28:38.767

听起来它只是用来限制读取和/或写入以避免一次发送太多请求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T12:29:48.823

它正在模拟一个计时器，每 x 秒执行一次任务，这是非常糟糕的做法。考虑切换到`java.util.Timer`or `ScheduledThreadPoolExecutor`：

```
ScheduledThreadPoolExecutor exec = new ScheduledThreadPoolExecutor(1);

exec.scheduleAtFixedRate(
      new Runnable() {
          public void run() {
               // code
          }
      }, 0, 1000, TimeUnit.Milliseconds); 
```

# php - PHP字符串单词到数组

> ID：12369709
> 
> 赞同：0
> 
> 时间：2012-09-11T12:27:33.567
> 
> 标签：php, string, filter, trim

我只需要从字符串中取出完整的单词，我的意思是完整的单词 = 超过 4 个字符的单词。字符串示例：

```
"hey hello man are you going to write some code" 
```

我需要返回：

```
"hello going write some code" 
```

我还需要修剪所有这些单词并将它们放入一个简单的数组中。

可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T12:29:37.327

您可以使用正则表达式来执行此操作。

```
preg_replace("/\b\S{1,3}\b/", "", $str); 
```

然后，您可以将它们放入带有`preg_split()`.

```
preg_split("/\s+/", $str); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-11T12:30:42.613

根据您的全部要求，如果您也需要未修改的字符串数组，您可以使用`explode`它，这样的事情会将您的单词放入数组中：

```
$str = "hey hello man are you going to write some code";
$str_arr = explode(' ', $str); 
```

然后您可以使用`array_filter`删除不需要的单词，如下所示：

```
function min4char($word) {
    return strlen($word) >= 4;
}
$final_str_array = array_filter($str_arr, 'min4char'); 
```

否则，如果您不需要未修改的数组，您可以使用正则表达式使用 获取所有超过一定长度的匹配`preg_match_all`项，或者替换掉使用的匹配项`preg_replace`。

最后一个选择是使用基本方法，`explode`按照第一个代码示例获取数组，然后遍历所有内容`unset`以从数组中删除条目。但是，您还需要重新索引（取决于您随后对“固定”数组的使用），这可能效率低下，具体取决于您的数组有多大。

编辑：不知道为什么有人声称它不起作用，请参阅下面的输出`var_dump($final_str_array)`：

```
array(5) { [1]=> string(5) "hello" [5]=> string(5) "going" [7]=> string(5) "write" [8]=> string(4) "some" [9]=> string(4) "code" } 
```

@OP，要将其转换回您的字符串，您只需调用`implode(' ', $final_str_array)`即可获取此输出：

```
hello going write some code 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-11T12:31:28.310

使用`str_word_count()` [http://php.net/manual/fr/function.str-word-count.php](http://php.net/manual/fr/function.str-word-count.php)

```
str_word_count($str, 1) 
```

将返回一个单词列表，然后使用超过`n`字母的单词计数`strlen()`

与or`str_word_count()`等​​其他解决方案相比，使用它的最大优势在于它将考虑标点符号并将其从最终的单词列表中丢弃。`preg_match``explode`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T12:31:09.617

首先，将它们放入一个数组中：

```
$myArr = explode(' ', $myString); 
```

然后，循环并仅将长度为 4 或更大的那些分配给新数组：

```
$finalArr = array();

foreach ($myArr as $val) {
  if (strlen($val) > 3) {
    $finalArr[] = $val;
  }
} 
```

显然，如果你的字符串中有逗号和其他特殊字符，它会变得更棘手，但对于基本设计，我认为这会让你朝着正确的方向前进。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T12:32:41.983

```
$strarray = explode(' ', $str);
$new_str = '';
foreach($strarray as $word){
   if(strlen($word) >= 4)
      $new_str .= ' '.$word;
}
echo $new_str; 
```

[代码输出](http://codepad.org/R12dohnz#output)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-11T12:46:12.663

不需要循环，没有嵌套函数调用，没有临时数组。只需 1 个函数调用和一个非常简单的正则表达式。

```
$string = "hey hello man are you going to write some code";
preg_match_all('/\S{4,}/', $string, $matches);

//Printing Values
print_r($matches[0]); 
```

[看到它工作](http://codepad.viper-7.com/egA3IP)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-11T12:37:29.877

```
<?php 
$word = "hey hello man are you going to write some code";
$words = explode(' ', $word);
$new_word;
foreach($words as $ws)
{
    if(strlen($ws) > 4)
    {
        $new_word[] = $ws;
    }
}
echo "<pre>"; print_r($new_word);
?> 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-09-11T12:28:24.720

您可以使用 explode() 和 array_filter() 与 trim() + strlen() 来实现这一点。如果您遇到困难，请尝试并发布您的代码。

# iphone - 多种注释颜色

> ID：12369712
> 
> 赞同：0
> 
> 时间：2012-09-11T12:27:55.423
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一张上面有多个注释的地图。我能够显示第一个和最后一个注释。我想给每个注释一个不同的颜色。

这是我如何插入注释的代码

```
if(i<1 || i >object.count-2)            
{    
        MyAnnotation* myAnnotation1=[[MyAnnotation alloc] init];                        
        myAnnotation1.coordinate=theCoordinate1;
        myAnnotation1.title=DEVNAME;
        myAnnotation1.subtitle=it.address;                        
        [mapView addAnnotation:myAnnotation1];                        
        [annotations addObject:myAnnotation1];                             
} 
```

if 条件是读取数组的索引以仅删除第一个和最后一个注释。

这是我如何在地图上放置大头针...

```
-(MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:
    (id <MKAnnotation>)annotation {
    MKPinAnnotationView *pinView = nil; 
    if(annotation != mapView.userLocation)  
    {

        static NSString* MyAnnotationIdentifier = @"MyAnnotationIdentifier";
        MKPinAnnotationView* customPinView = [[[MKPinAnnotationView alloc]
                                               initWithAnnotation:annotation reuseIdentifier:MyAnnotationIdentifier] autorelease];
        customPinView.pinColor = MKPinAnnotationColorRed;
        customPinView.animatesDrop = YES;
        customPinView.canShowCallout = YES;

       UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        customPinView.rightCalloutAccessoryView = rightButton;

        return customPinView;
    }
    else
    {
        pinView.annotation = annotation;
    }
    return pinView;
  } 
```

如何不同的注释颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:35:43.640

使用 MKAnnotationView 类并为每个引脚设置自定义图像：

```
MKAnnotationView *customPinView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:nil];
customPinView.image = [UIImage imageNamed:@"pin1.png"];
.
.
. 
```

而不是使用应用程序包中的图像，您可能需要以编程方式构建 UIImage 以便获得独特的颜色，这取决于您。

此外，您可以在注释上设置一个值，以帮助识别哪个注释获取哪个图像。您将继承 MKAnnotation 以添加这个称为 pinNumber 的整数属性。

myAnnotation.pinNumber = 2;

```
customPinView.image = [UIImage imageNamed:[NSString stringWithFormat:@"pin%d.png",annotation.pinNumber]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:36:41.330

当然，除了第一个和最后一个引脚之外，它不会工作，对于其余的引脚，`else`部分代码将执行。

所以`MKPinAnnotationView *pinView`会有`nil`。所以没有分配内存的注释，不能改变颜色！！！:-)

您必须根据您的要求将 for else 部分放在`alloc`某处`init`。`MKPinAnnotationView *pinView`

# c# - 如何在不改变c#中图像的原始高度、宽度的情况下压缩图像

> ID：12369723
> 
> 赞同：0
> 
> 时间：2012-09-11T12:28:24.630
> 
> 标签：c#, .net, image, system.drawing

我想让图像尺寸小于其原始尺寸。我正在使用以下代码来压缩尺寸图像，但它将图像尺寸从 1MB 增加到 1.5MB
用于压缩大尺寸图像而不改变图像原始高度、宽度的任何其他解决方案。

```
 public static byte[] CompressImage(Image img) {

            int originalwidth = img.Width, originalheight = img.Height;

            Bitmap bmpimage = new Bitmap(originalwidth, originalheight);

            Graphics gf = Graphics.FromImage(bmpimage);
            gf.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;
            gf.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.AssumeLinear;
            gf.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.NearestNeighbor;

            Rectangle rect = new Rectangle(0, 0, originalwidth, originalheight);
            gf.DrawImage(img, rect, 0, 0, originalwidth, originalheight, GraphicsUnit.Pixel);

            byte[] imagearray;

            using (MemoryStream ms = new MemoryStream())
            {
                bmpimage.Save(ms, ImageFormat.Jpeg);
                imagearray= ms.ToArray();
            }

            return imagearray;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:32:28.820

您可以在将文件另存为 JPEG 时设置质量级别，这主要也与文件大小直接相关 - 质量越低，输出文件越小。

另请参阅[How to: Set JPEG Compression Level](http://msdn.microsoft.com/en-us/library/bb882583%28v=vs.100%29.aspx)，例如，请参阅[此 SO answer](https://stackoverflow.com/questions/1484759/quality-of-a-saved-jpg-in-c-sharp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:56:14.590

正如@BrokenGlass 所说，您可以在**EncoderParameter**中指定压缩级别。如果您想尝试改变质量，这里有一个片段：

```
public static void SaveJpeg(string path, Image image, int quality)
{
    //ensure the quality is within the correct range
    if ((quality < 0) || (quality > 100))
    {
        //create the error message
        string error = string.Format("Jpeg image quality must be between 0 and 100, with 100 being the highest quality.  A value of {0} was specified.", quality);
        //throw a helpful exception
        throw new ArgumentOutOfRangeException(error);
    }

    //create an encoder parameter for the image quality
    EncoderParameter qualityParam = new EncoderParameter(System.Drawing.Imaging.Encoder.Quality, quality);
    //get the jpeg codec
    ImageCodecInfo jpegCodec = GetEncoderInfo("image/jpeg");

    //create a collection of all parameters that we will pass to the encoder
    EncoderParameters encoderParams = new EncoderParameters(1);
    //set the quality parameter for the codec
    encoderParams.Param[0] = qualityParam;
    //save the image using the codec and the parameters
    image.Save(path, jpegCodec, encoderParams);
} 
```

# http - 为什么 Safari 不接受 GZIP 压缩？

> ID：12369724
> 
> 赞同：6
> 
> 时间：2012-09-11T12:28:26.477
> 
> 标签：http, safari, gzip

我在这里有一个非常大的 JavaScript 文件，我想将它嵌入到我的网站中。HTTP 服务器足够智能，可以在将文件传送到浏览器之前对其进行 GZIP 压缩。

但是，我使用 Google Chrome 和 Safari 进行了测试。

在 Chrome 上，它运行良好。400K 压缩到 100k 左右：

![第一的](../Images/22cb935b7a7bbab095bd81adc7e6bd2b.png)

![第二](../Images/5aef66affe3a3e513e3bde2a6748e8dd.png)

**但是**在 Safari 上压缩不起作用：

![第三](../Images/a3bda59323bb052be7e4131e224be78e.png)

![第四](../Images/38869836f8874159e73e939222e01b87.png)

有趣的是，在 gz2b.png 中，您可以清楚地看到 content-encoding 设置为“gzip”。

* * *

**注意：**我已经阅读了 Safari 中的一个 GZIP 错误，其中文件不能以“.gz”结尾，否则 Safari 将不接受 GZIP。由于我的文件没有以 .gz 结尾，所以这个问题应该不是问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-21T19:39:37.090

在尝试优化 iOS7 Safari 移动 iPad 上网站的加载时间时，我也遇到了这个问题。

*   编码 = 未压缩的文件大小，来自服务器
*   解码 = 未压缩的文件大小，本地
*   已传输 = 未压缩文件大小 + 发送和接收的标头
*   Content-Length = 从服务器发送的压缩文件

Safari 在调试器中选择了一种非常奇怪的方式来表示这些数字。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-11T13:09:19.863

发送到 Safari 的 HTTP 标头说它是压缩的（它有 Content-Encoding: gzip 标头，它说 Content-Length 是 119406 字节） - 我相信那些比Web Inspector 中的粗体数字**430.61更重要。**我不知道它如何确定顶栏中的这两个数字。

如果您使用wireshark 嗅探HTTP 请求，您可以验证通过线路传输的字节数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-23T16:45:50.980

这是不久前的事，但我刚刚遇到了一个非常相似的问题，或者可能是这个问题的根源。当您使用 gzip 为 safari 压缩数据时，如下所示：

```
gzip jquery.min.js 
```

您最终会得到一个 jquery.min.js.gz，即使正确指定为 gzip 编码的文件流以及重命名为 jquery.jgz 时，它也会在 Safari 中失败，正如关于此问题的许多其他线程中提到的那样。这似乎是因为文件名是在 gzip 文件中编码的。

如果您像这样对 gzip 文件进行编码：

```
cat jquery.min.js | gzip > jquery.jgz 
```

然后，您将拥有一个小几个字节的文件，并且可以在 Safari 上完美运行。

# blackberry - 没有wifi连接黑莓模拟器

> ID：12369728
> 
> 赞同：1
> 
> 时间：2012-09-11T12:28:41.260
> 
> 标签：blackberry, blackberry-simulator, httpconnection

我想使用 HttpConnection 下载数据，请参见下面的示例

```
 class ConnectionThread extends Thread
      {
       public void run()
        {
    try{

    showToast("in the run method");
    HttpConnection conn = null;
    String URL = "http://xxxxxxx.com/api/api.php?func=showAllCountries;interface=wifi";
    conn = (HttpConnection)Connector.open(URL);

    }catch(Exception e){
        showToast(e+"");

    }
    } 
```

运行上述代码时，在模拟器上显示 Java.io.IOException No Wi-Fi connection found ，虽然在管理连接中我可以看到模拟器与 Wifi 连接，请问为什么会这样

请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:40:22.660

利用`deviceside= false;`

在模拟器中 wifi 是不可能的，模拟器将访问您的系统网络，一旦您在真实设备上，如果设备中启用了 wifi，它将工作。

[按照此链接了解如何建立连接。](http://supportforums.blackberry.com/t5/Java-Development/Different-ways-to-make-an-HTTP-or-socket-connection/ta-p/445879)

# python - CLI 程序，显示 matplotlib 绘图并继续执行程序

> ID：12369733
> 
> 赞同：1
> 
> 时间：2012-09-11T12:28:50.307
> 
> 标签：python, matplotlib, command-line-interface

> **可能重复：**
> [如何让情节不消失？](https://stackoverflow.com/questions/12369693/how-to-make-the-plot-not-disappear)

我正在编写一个用于分析一些数据的命令行界面 python 程序。它问用户一堆问题，并在脚本中的几个点显示 matplotlib pyplot plot neds，但我想显示它并继续使用脚本，如下所示：

```
import matplotlib.pyplot as plt
import numpy as np

plt.figure()
plt.plot(np.arange(10),np.arange(10)**2)

plt.show()
print 'continuing the program' 
```

我曾尝试`plt.draw()`与子图一起使用，但它似乎在脚本中不起作用。

编辑：除了绘图窗口没有响应之外，我使用`plt.ion()`了哪种作品，并且未显示放大工具等按钮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:36:07.833

`plt.show()`在用户关闭小部件/窗口之前不会返回。我在很多情况下这种行为很好。为什么脚本要在用户花时间查看精彩图表时继续执行？:-) 但是，如果您需要程序继续运行，请使用该`threading`模块。在让你的主线程终止之前调用`plt.show()`一个新线程和这个线程。`join()`

编辑：

看起来事情并没有那么简单。我创建了以下内容`test.py`：

```
import threading
from matplotlib import pyplot as p
import time

p.plot([_ for _ in xrange(5)])

t = threading.Thread(target=p.show)
t.start()

for i in xrange(5):
    print "lala %s" % i
    time.sleep(1)

print "Waiting for plot thread to finish..."
t.join()
print "Finished." 
```

测试它会导致此错误：

```
14:43:42 $ python test.py
lala 0
lala 1
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/lib/python2.6/threading.py", line 532, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.6/threading.py", line 484, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/usr/lib/pymodules/python2.6/matplotlib/backends/backend_tkagg.py", line 73, in show
    manager.show()
  File "/usr/lib/pymodules/python2.6/matplotlib/backends/backend_tkagg.py", line 385, in show
    if not self._shown: self.canvas._tkcanvas.bind("<Destroy>", destroy)
  File "/usr/lib/python2.6/lib-tk/Tkinter.py", line 988, in bind
    return self._bind(('bind', self._w), sequence, func, add)
  File "/usr/lib/python2.6/lib-tk/Tkinter.py", line 938, in _bind
    needcleanup)
  File "/usr/lib/python2.6/lib-tk/Tkinter.py", line 1101, in _register
    self.tk.createcommand(name, f)
RuntimeError: main thread is not in main loop 
```

我由此推断`p.show()`需要从主线程调用。也许您必须反过来做：在另一个线程中获取您的用户输入。

# xml - 获取当前节点的所有祖先

> ID：12369734
> 
> 赞同：5
> 
> 时间：2012-09-11T12:28:51.467
> 
> 标签：xml, xslt, xpath, xslt-1.0

我想获取当前节点的所有祖先：

![](../Images/aa1570836932925f8e6614a1db3229dd.png)

XML:

```
<root>
   <item title="a">
       <item title="b">               
           <item title="c"></item> <!--CURRENT-->
           <item title="d"></item>                 
        </item> 
       <item title="x">             
           <item title="y"></item> 
           <item title="z"></item>  
       </item>            
   </item> 
</root> 
```

结果：

```
<item title="a">...</item>
<item title="b">...</item> 
```

编辑：带有轴祖先的答案很好。我的问题在其他地方，在 XSLT

XSLT：

```
<xsl:variable name="curr" select="//item[@title = 'c']"></xsl:variable>
<xsl:variable name="test" select="$curr/ancestor::item"></xsl:variable>

<xsl:for-each select="$test/item">
<xsl:value-of select="@title"></xsl:value-of>
</xsl:for-each> 
```

回报：

```
bcdx 
```

* * *

**Edit2：**对于 dimitre 和所有有类似问题的人

我的问题的所有答案都很好。

只是 XSLT（向上）返回给我一个奇怪的结果，@Mads Hansen 纠正了我。

最终工作示例：

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<root>
   <item title="a">
       <item title="b">               
           <item title="c"></item> 
           <item title="d"></item>                 
        </item> 
       <item title="x">             
           <item title="y"></item> 
           <item title="z"></item>  
       </item>            
   </item> 
</root> 
```

XSLT：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <xsl:variable name="curr" select="//item[@title = 'c']"></xsl:variable>
        <xsl:variable name="test" select="$curr/ancestor::item"></xsl:variable>

        <xsl:for-each select="$test">
            <xsl:value-of select="@title"></xsl:value-of>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

回报：

```
ab 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T12:42:07.830

恭喜亚当得到了一个非常快速的第一个答案。

### 只是添加一点细节：

您列出的预期结果与您的话不符。根元素也是祖先节点，文档也是祖先节点。

```
ancestor::node() 
```

... 将按以下顺序返回一个序列：

1.  `item[@title='b']`
2.  `item[@title='a']`
3.  元素（`root`又名文档元素）
4.  [根节点](http://www.w3.org/TR/xpath/#root-node)_ `/`

要获得您列出的具体结果，您需要：

```
ancestor::item/. 
```

/的效果。就是将排序改回转发单据顺序。祖先:: 的原生顺序是反向文档顺序。

* * *

# 更新：评论提要中的观点说明。

此样式表（带有 OP 的输入）...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/>

<xsl:template match="/">
  <xsl:for-each select="//item[@title='c']">
    <xsl:value-of select="ancestor::item[1]/@title" />
    <xsl:value-of select="ancestor::item[2]/@title" />
  </xsl:for-each>  
</xsl:template>         
</xsl:stylesheet> 
```

... 将输出 'ba' 说明祖先:: 确实是一个反向轴。然而这个样式表......

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/>

<xsl:template match="/">
  <xsl:for-each select="//item[@title='c']">
    <xsl:value-of select="(ancestor::item/@title)[1]" />
    <xsl:value-of select="(ancestor::item/@title)[2]" />
  </xsl:for-each>  
</xsl:template>

</xsl:stylesheet> 
```

...具有相反的结果 'ab' 。这是有启发性的，因为它表明在 XSLT 1.0 中（在 XSLT 2.0 中不是这样），括号消除了相反的性质，它变成了文档有序节点集。

OP 询问了类似的转换。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/>

<xsl:template match="/">
  <xsl:for-each select="//item[@title='c']">
    <xsl:for-each select="ancestor::item">
      <xsl:value-of select="@title" />
    </xsl:for-each>
  </xsl:for-each>  
</xsl:template>

</xsl:stylesheet> 
```

这个返回“ab”（在 XSLT 2.0 中它将返回“ba”）。为什么？因为在 XSLT 1.0 中，xsl:for-each 指令忽略轴的反向性并按文档顺序处理（除非 xsl:sort 指令另有说明）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T12:42:56.503

> 我想获取当前节点的所有祖先

指定的节点显然不是“绿色”节点的*所有*祖先。

**要选择*所有*祖先，请使用**：

```
ancestor::node() 
```

这将选择初始 conext 节点（或当前节点）的所有祖先节点，包括顶部元素及其父节点——[根节点](http://www.w3.org/TR/xpath/#root-node) `/`——它是一个节点，但不是一个元素。

**要选择所有*元素*祖先，请使用**：

```
ancestor::* 
```

这类似于前面的表达式，但不选择[根节点](http://www.w3.org/TR/xpath/#root-node)( `/`)，因为它不是元素。

**要选择所有名为 的祖先`item`，请使用**：

```
ancestor::item 
```

**注意**：以上所有表达式都假定它`(//item[@title='c'])[1]`是初始上下文节点（当前节点）。如果此假设不正确，则`(//item[@title='c'])[1]/`必须将其添加到每个表达式的前面。

**注意2**：我强烈建议在学习 XPath 时使用**[XPath Visualizer 之类的](http://www.huttar.net/dimitre/XPV/TopXML-XPV.html)**工具。多年来，这个工具已经帮助成千上万的人以有趣的方式学习 XPath —— 通过使用 XPath 表达式并观察他们的评估结果。

**注意**：XPath Visualizer 是我在 2000 年创建的，从来都不是金融产品。我推荐它完全基于它对用户的价值，经过多年的证明

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T12:34:33.533

您可以使用 xpath`ancestor::item`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T23:11:46.490

您输出`bcdx`而不是输出的原因`ab`是因为您`<xsl:for-each>`正在迭代所选元素的所有`item`子`item`元素，而不仅仅是迭代`$test`变量中的所选元素。

**将您的 for-each 更改为仅迭代`$test`：**

```
<xsl:variable name="curr" select="//item[@title = 'c']"></xsl:variable>
<xsl:variable name="test" select="$curr/ancestor::item"></xsl:variable>

<xsl:for-each select="$test">
    <xsl:value-of select="@title"></xsl:value-of>
</xsl:for-each> 
```

# jquery - jquery 仅在完成先前的执行时才执行单击事件

> ID：12369745
> 
> 赞同：-1
> 
> 时间：2012-09-11T12:29:12.427
> 
> 标签：jquery

我希望单击事件仅在完成先前的执行时才执行。我的代码是

```
$(".next").click(function(){

$(this).parent().find('.overlay').css({'display':'block'});
addContent(options, speed, 1);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:30:39.057

最简单的方法是在启动任务时[取消绑定](http://api.jquery.com/unbind/)单击事件处理程序，并在任务完成时再次绑定它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:43:48.487

您需要有某种回调或延迟对象来知道您的 addContent 函数何时完成，然后执行以下操作：

```
$(".next").on('click', doStuff);

function doStuff() {
    $(".next").off('click', doStuff);
    $(this).parent().find('.overlay').css('display', 'block');
    addContent(options, speed, 1, function() {  //<-- callback
        $(".next").on('click', doStuff);
    });
}

function addContent(options, speed, num, callback) {
    options.animate({left: num}, speed, function() {
        callback();  //<-- call callback when function is completed
    });
} 
```

# python - Python webapp 的预定后台函数

> ID：12369746
> 
> 赞同：1
> 
> 时间：2012-09-11T12:29:13.427
> 
> 标签：python, web-applications, asynchronous, background, scheduling

我正在尝试为 python 应用程序制定一个想法。我将尝试布置基本组件。

*   它应该可以通过 Web 界面或移动应用程序访问，如果可能的话，甚至可以通过 linux 控制台访问。

*   应用程序本身主要对数据库执行 CRUD 操作并返回信息。

*   此外，最重要的是，它应该能够配置和启动/重新启动计划的后台任务。任务是执行某些 I/O 操作（将文件从一个文件夹移动到另一个文件夹）的函数。

我正在研究如何解决这个问题以及哪些框架/库最适合这项任务。对于 Web 界面，我认为任何微框架（例如cherrypy/flash/bottlepy）都可以用作 RESTful 或 SOAP api。或者使用扭曲的？

对于日程安排，我有点卡住了。我看了一下 celery 和 reddis 队列，但对于我想要的来说，它们似乎都太重了。我还看了APScheduler？我可以将 I/O 任务作为 apscheduler 作业启动还是应该看其他东西？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:39:55.007

Python 在标准库中不支持 cron。但是有第三方库。[crontab](http://pypi.python.org/pypi/crontab/)看起来不错。

例子：

```
import crontab
import time

e = crontab.CronTab('*/5 * * * *') # every five minutes
while True:
    delay = e.next()
    time.sleep(delay)
    print("It's time (again)!") 
```

我不会将 cron 事件的处理作为 Web 应用程序的一部分。构建一个单独的工具，随时循环并执行后台任务。

# php - PHP联系表格失败

> ID：12369750
> 
> 赞同：0
> 
> 时间：2012-09-11T12:29:31.227
> 
> 标签：php, html, forms

我写了一个 php 联系表格，但不知道为什么它不发送电子邮件。表单提交正常，但未发送实际电子邮件。

下面是我的 PHP 代码。

```
<?php  
 //If the form is submitted  
 if(isset($_POST['submit'])) {  

     //Check to make sure that the name field is not empty  
     if(trim($_POST['contactname']) == '') {  
         $hasError = true;  
     } else {  
        $name = trim($_POST['contactname']);  
     }  
     //Check to make sure that the subject field is not empty  
    if(trim($_POST['subject']) == '') {  
         $hasError = true;  
     } else {  
         $subject = trim($_POST['subject']);  
     }  

    //Check to make sure sure that a valid email address is submitted  
    if(trim($_POST['email']) == '')  {  
         $hasError = true;  
     } else if (!preg_match("/^[A-Z0-9._%-]+@[A-Z0-9._%-]+\.[A-Z]{2,4}$/i", trim($_POST['email']))) {  
         $hasError = true;
     } else {  
         $email = trim($_POST['email']);  
     }  

    //Check to make sure comments were entered  
     if(trim($_POST['message']) == '') {  
         $hasError = true;  
    } else {  
        if(function_exists('stripslashes')) {  
             $comments = stripslashes(trim($_POST['message']));  
       } else {  
            $comments = trim($_POST['message']);  
        }  
     }  

    //If there is no error, send the email  
     if(!isset($hasError)) {  
        $emailTo = 'xyz@xyz.com';  
        $body = "Name: $name \n\nEmail: $email \n\nSubject: $subject \n\nComments:\n $comments";  
        $headers = 'From: My Site <'.$emailTo.'>' . "\r\n" . 'Reply-To: ' . $email;  

        mail($emailTo, $subject, $body, $headers);  
       $emailSent = true;  
 }  
}  
?> 
```

下面的 HTML 代码是联系表单 HTML：

```
 <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" id="contactform">
                <fieldset class="contact-fieldset">
                    <h2>Send us a message</h2>
                    <ul>
                        <li>
                            <label for="contactname">Your Name:</label>
                            <div class="ctinput-bg"><input type="text" name="contactname" id="contactname" value="" class="contact-input required" /></div>
                        </li>
                        <li>
                            <label for="email">Email:</label>
                            <div class="ctinput-bg"><input type="text" id="email" name="email" class="contact-input required email" /></div>
                        </li>     
                        <li>
                            <label for="subject">Subject:</label>
                            <div class="ctinput-bg"><input type="text" name="subject" id="subject" class="contact-input required" /></div>
                        </li>
                        <li>
                            <label for="message">Your message:</label>
                            <div class="cttxtarea-bg"><textarea rows="6" cols="40" id="message" name="message" class="contact-textarea required"></textarea></div>
                        </li>
                        <li>
                            <div class="form-button contact-submit">
                                <span><input type="submit" value="&nbsp;&nbsp;send message&nbsp;&nbsp;" name="submit" /></span>
                            </div>
                        </li>                      
                    </ul>
                </fieldset>
            </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:14:43.557

除了其他人提供的解决方案之外，我强烈推荐使用 SwiftMailer 库。

我必须创建一个自动电子邮件功能，而手动设置标题等是一场噩梦。SwiftMailer 为我节省了大量时间，请参见[此处](http://swiftmailer.org/docs/messages.html)的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:30:48.190

听起来您的`mail`功能设置不正确。检查您的`php.ini`文件并确保您具有正确的 SMTP 服务器设置。

此外，与您的原始问题无关，但我不确定`<ul>`用于标记表单在语义上是否正确。一组字段并不是真正的未排序列表，我更喜欢使用语义正确`<table>`的，甚至是一系列`<div>`s。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:34:00.957

我看到两件事：

1- $hasError = false 在代码顶部的声明（确保它存在）

2 - 生成标题如下：

```
$headers = 'From: webmaster@example.com' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion(); 
```

希望这能解决问题，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T12:34:58.723

您可以尝试检查邮件是否实际发送：

```
if (mail($to, $subject, $body)) {
   echo("<p>Message successfully sent!</p>");
} else {
   echo("<p>Message delivery failed...</p>");
} 
```

并确保您还可以对标头进行 var_dump 以查看它们是否正确：

```
var_dump($headers); 
```

这些东西不会解决问题，但肯定会有助于调试它。

# android - 从 string.xml 获取数组

> ID：12369760
> 
> 赞同：1
> 
> 时间：2012-09-11T12:30:10.173
> 
> 标签：android

我有一个字符串，`string.xml`其结构是这样的。

字符串.xml

```
<string name="my" formatted="false">As*#*Bs*#*Cs</string> 
```

我正在像这样在我的主文件中获取这个字符串。

main.java

```
String h1 = getResource().getString(R.string.my); 
```

我的输出是这样的。

```
h1=As*#*Bs*#*Cs 
```

但我想在没有像这样的正则表达式的数组中输出。

```
h1[0]="As",h1[1]="Bs",h1[2]="Cs"; 
```

我应该改变什么以获得上述输出？任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:33:04.347

你有没有尝试过？

```
String[] stringArray = h1.split("\\*#\\*"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:42:22.510

我建议您以以下方式将字符串存储为字符串数组：

```
<resources>
    <string-array name="my">
        <item>As</item>
        <item>Bs</item>
        <item>Cs</item>
    </string-array>
</resources> 
```

您将能够通过以下方式检索您的数组：

```
String [] h1 = getResources().getStringArray ( R.array.my ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:31:39.710

在 h1 String 中存储您的 xml 字符串后。您需要对 h1 字符串应用**拆分。**

试试这个。

```
String h1= "As*#*Bs*#*Cs";
String[] test = h1.split("\\*#\\*"); 

for(String str : test)
{
      Log.i("==============", str);
} 
```

**输出 ：**

```
I/==============( 1321): As
I/==============( 1321): Bs
I/==============( 1321): Cs 
```

您可以使用`str[0] , str[1] and str[2]`获取相应的字符串。

# vba - 在 Outlook 搜索结果中显示文件夹路径

> ID：12369765
> 
> 赞同：2
> 
> 时间：2012-09-11T12:30:25.353
> 
> 标签：vba, outlook, outlook-addin, outlook-2010

有没有办法在 Outlook 的搜索结果中添加一列，显示文件夹路径而不仅仅是文件夹名称？如果是，您能否提供一些教程或文档？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T00:31:30.537

您可以获得此信息，一次收到一封电子邮件。

[http://vboffice.net/sample.html?lang=en&mnu=2&smp=65&cmd=showitem](http://vboffice.net/sample.html?lang=en&mnu=2&smp=65&cmd=showitem)

```
Public Sub GetItemsFolderPath()
  Dim obj As Object
  Dim F As Outlook.MAPIFolder
  Dim Msg$
  Set obj = Application.ActiveWindow
  If TypeOf obj Is Outlook.Inspector Then
    Set obj = obj.CurrentItem
  Else
    Set obj = obj.Selection(1)
  End If
  Set F = obj.Parent
  Msg = "The path is: " & F.FolderPath & vbCrLf
  Msg = Msg & "Switch to the folder?"
  If MsgBox(Msg, vbYesNo) = vbYes Then
    Set Application.ActiveExplorer.CurrentFolder = F
  End If
End Sub 
```

# bash - 使用 bash 将文件中的两行替换为一个新行

> ID：12369766
> 
> 赞同：3
> 
> 时间：2012-09-11T12:30:26.647
> 
> 标签：bash, replace

我正在尝试用一个新行替换文件中的两行：

```
foo1.txt
  aaa   aaa
  bbb   bbb
  ccc   ccc
  ddd   ddd
  bbb   bbb
  ddd   ddd 
```

替换后的文件应该是这样的

```
foo1.txt
  aaa   aaa
  eee   eee
  ddd   ddd
  bbb   bbb
  ddd   ddd 
```

有没有办法使用 sed 或其他命令在文件夹的所有文件中进行替换

我一直在尝试使用 sed 但没有任何成功：`sed 's/bbb\tbbb\nccc\tccc/eee\teee/g' foo*.txt`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T12:40:20.857

有很多方法可以解释您的问题。如果您尝试替换固定位置的行，例如第 2 行和第 3 行，请执行以下操作：

```
sed '2d; 3s/.*/newtext/' 
```

如果要替换匹配的行和以下行：

```
sed '/pattern/{ N; s/.*/newtext/; }' 
```

要替换第二行与模式匹配的两个连续行：

```
sed -n '$p; N; /pattern/d; P; D' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:02:18.343

```
nawk '{if($0~/bbb.*bbb/){getline;getline;print "newline"};print}' your_file 
```

测试如下：

```
> cat temp
aaa   aaa
bbb   bbb
ccc   ccc
ddd   ddd
> nawk '{if($0~/bbb.*bbb/){getline;getline;print "newline"};print}' temp
aaa   aaa
newline
ddd   ddd 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T13:03:18.520

即使这个问题应该已经[在这个线程中](https://stackoverflow.com/questions/1030787/multiline-search-replace-with-perl)得到回答，我也没有设法使“单行命令”解决方案起作用。

这个命令：

```
perl -pe 's/START.*STOP/replace_string/g' file_to_change 
```

似乎对我不起作用并且不执行多行替换。我不得不将它拆分为两个不同的 perl 脚本，如下所示：

```
perl -pe 's/bbb\tbbb\n.*/placeholderstring/g' foo1.txt | perl -pe 's/placeholderstring  ccc\tccc/eee\teee/g' 
```

试着看看什么最适合你。

编辑：

对于新的示例文本，唯一有效的解决方案是[William Pursell的解决方案](https://stackoverflow.com/users/140750/william-pursell)

```
sed '/bbb\tbbb/{ N; s/.*ccc\tccc/  eee\teee/; }' foo1.txt 
```

# php - PHPBB 3.0.10 和来自不同服务器的头像

> ID：12369768
> 
> 赞同：0
> 
> 时间：2012-09-11T12:30:29.320
> 
> 标签：php, forum, phpbb, phpbb3, avatars

我正在处理头像问题。因为我的论坛加入了另一个论坛。我想指定通用头像路径。

我想，当我指定完整路径时：[http://www.example.com/images/avatars/gallery](http://www.example.com/images/avatars/gallery)，

和[http://www.example.com/images/avatars/upload](http://www.example.com/images/avatars/upload)问题将得到解决。但是有一个对话框说，路径不正确，在这个服务器上找不到（我的 URL 没有那个）。任何人都可以给我任何线索吗？

最好的祝福！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:14:40.400

您尝试使用它的方式不正确。`Avatar Storage Path`要求**此**PHPBB3 实例的路径是本地的。这意味着它必须是本地路径。

需要用户在两个板上设置头像的替代方法是设置`Enable Remote Avatars`为是。然后，用户可以将 URL 设置为他们在两个板上的头像。它稍微麻烦一些，但仍然允许您在两个板上共享 1 个头像。

查看本文档中的第 3.2.1.4 节：[https ://www.phpbb.com/support/documentation/3.0/adminguide/acp_general.php](https://www.phpbb.com/support/documentation/3.0/adminguide/acp_general.php)

# windows - 为什么 Windows 团队复制“Program Files”文件夹以支持 x86 和 x64？

> ID：12369781
> 
> 赞同：0
> 
> 时间：2012-09-11T12:31:11.287
> 
> 标签：windows, x86

一个经常让我困惑的问题是，为什么 Windows 团队决定复制 Program Files 文件夹以支持 32 位和 64 位平台？从长远来看，这不会给每个人带来更多的工作和混乱吗？

让他们复制树的关键因素是什么，而其他一些系统保留一个“程序文件”目录（有点像 MAC 的通用二进制格式[http://en.wikipedia.org/wiki/Universal_binary](http://en.wikipedia.org/wiki/Universal_binary)）？

我敢肯定有一个很好的理由让他们创建这个“程序文件（x86）”文件夹，如果有人在房间里，请分享:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:55:56.227

c:\program files 文件夹包含很多 DLL，尤其是在 Common Files 子目录中。c:\program files (x86)\common files 文件夹包含这些 DLL 的 32 位版本。其中许多 DLL 已经存在了很长时间，将近 20 年，许多遗留程序都依赖于它们。

不虚拟化文件夹会大大增加 DLL Hell 的几率。这也是环境具有引用 Common Files 文件夹的三个变量的原因，CommonProgramFiles、CommonProgramFiles(x86) 和 CommonProgramW6432。

Appcompat 在微软是相当神圣的，尽管它正在消失。Windows 8 是一个相当彻底的背离，这个问题在 Windows Store 应用程序中不存在。

# java - Nimbus Look And Feel 调整菜单栏的颜色

> ID：12369783
> 
> 赞同：4
> 
> 时间：2012-09-11T12:31:21.177
> 
> 标签：java, swing, look-and-feel, nimbus, jmenubar

我正在尝试调整 Nimbus 外观和感觉的颜色，但它只是部分起作用。特别是我在调整菜单栏的颜色时遇到问题。

这是一个运行示例：

```
import java.awt.Color;
import java.awt.Dimension;

import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;
import javax.swing.UnsupportedLookAndFeelException;

public class JMenuColorTest extends JFrame {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    adjustLAF();
                } catch (Exception e) {
                    e.printStackTrace();
                }

                JMenuColorTest test = new JMenuColorTest();
                test.setDefaultCloseOperation(EXIT_ON_CLOSE);
                test.setPreferredSize(new Dimension(400, 300));
                test.pack();
                test.setLocationRelativeTo(null);

                JMenuBar menuBar = new JMenuBar();
                JMenu menu1 = new JMenu("Menu 1");
                menu1.add(new JMenuItem("Item 1.1"));
                menu1.add(new JMenuItem("Item 1.2"));
                menu1.add(new JMenuItem("Item 1.3"));
                menuBar.add(menu1);
                JMenu menu2 = new JMenu("Menu 2");
                menu2.add(new JMenuItem("Item 2.1"));
                menu2.add(new JMenuItem("Item 2.2"));
                menu2.add(new JMenuItem("Item 2.3"));
                menuBar.add(menu2);
                test.setJMenuBar(menuBar);

                test.setVisible(true);
            }

            private void adjustLAF() throws ClassNotFoundException,
                InstantiationException, IllegalAccessException,
                UnsupportedLookAndFeelException {
                for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                    if ("Nimbus".equals(info.getName())) {

                        // Working
                        UIManager.put("control", Color.GREEN);

                        // Not working
                        UIManager.getLookAndFeelDefaults().put(
                            "MenuItem[Enabled].textForeground", Color.RED);

                        // Set the look and feel
                        UIManager.setLookAndFeel(info.getClassName());

                        // Not working
                        UIManager.put("control", Color.GREEN);

                        // Working
                        UIManager.getLookAndFeelDefaults().put(
                            "MenuItem[Enabled].textForeground", Color.RED);

                        break;
                    }
                }

            }
        });
    }
} 
```

如您所见，我可以设置控件的背景并设置 JMenuItem 的前景色。但我无法更改 JMenuItem 的背景，也无法更改 MenuBar 的颜色。[我从http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html)尝试了很多键，但我无法更改菜单栏的颜色。

另一个问题是？为什么我必须在设置外观之前和设置外观之后调用一次颜色调整？为什么我必须调用一次'UIManager.put()'和一次'UIManager.getLookAndFeelDefaults().put()'？

在我看来，Nimbus 确实有问题，不适合专业使用。我尝试同时使用 JDK 1.6.35 和 JDK 1.7.7，但是对于这两个 JDK，我无法让系统按要求运行？

关于如何在 Nimbus LookAnd Feel 中调整菜单栏颜色的任何建议？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T12:53:32.967

因为`JMenuBar`必须使用[Painter](https://stackoverflow.com/a/11759356/714968)来检查[NimbusDefault#value](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html#menubar)

```
MenuBar[Enabled].backgroundPainter
MenuBar[Enabled].borderPainter 
```

休息的答案是`trashgod +1`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T12:51:38.983

*在*Mac `adjustLAF()`OS X 上使用.*`Runnable``com.apple.laf.AquaLookAndFeel`*

 *![在此处输入图像描述](../Images/c2e76a3ef686be1b69c653dbf21f5abc.png)

```
import java.awt.Color;
import java.awt.Dimension;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;
import javax.swing.UnsupportedLookAndFeelException;

public class JMenuColorTest extends JFrame {

    public static void main(String[] args) {
                try {
                    adjustLAF();
                } catch (Exception e) {
                    e.printStackTrace();
                }

        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {

                JMenuColorTest test = new JMenuColorTest();
                test.setDefaultCloseOperation(EXIT_ON_CLOSE);
                test.setPreferredSize(new Dimension(400, 300));
                test.pack();
                test.setLocationRelativeTo(null);

                JMenuBar menuBar = new JMenuBar();
                JMenu menu1 = new JMenu("Menu 1");
                menu1.add(new JMenuItem("Item 1.1"));
                menu1.add(new JMenuItem("Item 1.2"));
                menu1.add(new JMenuItem("Item 1.3"));
                menuBar.add(menu1);
                JMenu menu2 = new JMenu("Menu 2");
                menu2.add(new JMenuItem("Item 2.1"));
                menu2.add(new JMenuItem("Item 2.2"));
                menu2.add(new JMenuItem("Item 2.3"));
                menuBar.add(menu2);
                test.setJMenuBar(menuBar);

                test.setVisible(true);
            }

        });
    }
    private static void adjustLAF() throws ClassNotFoundException,
        InstantiationException, IllegalAccessException,
        UnsupportedLookAndFeelException {
        for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {

                // Working
                UIManager.put("control", Color.GREEN);

                // Not working
                UIManager.getLookAndFeelDefaults().put(
                    "MenuItem[Enabled].textForeground", Color.RED);

                // Set the look and feel
                UIManager.setLookAndFeel(info.getClassName());

                // Not working
                UIManager.put("control", Color.GREEN);

                // Working
                UIManager.getLookAndFeelDefaults().put(
                    "MenuItem[Enabled].textForeground", Color.RED);

                break;
            }
        }

    }
} 
```*

# iphone - 在 Objective-C 中正确覆盖 setter

> ID：12369787
> 
> 赞同：19
> 
> 时间：2012-09-11T12:31:36.600
> 
> 标签：iphone, objective-c, ios

我只是试图覆盖一个属性的标准合成设置器。到目前为止一切都很好，我只是将 ivar 设置为我的新值。但是后来我问自己'保留属性的保留计数会发生什么'......我没有找到可以向我解释这一点的好答案。所以我在这里问。如果我覆盖设置为的属性设置器，我必须注意什么，我该`retain`如何正确地做到这一点？我不使用ARC。

这是一个例子：

```
@property(nonatomic)NSInteger number;

- (void)setNumber:(NSInteger)number {
    _number = number;  // This should be fine, since it's no retained object I want to set
}

@property(nonatomic, retain)NSObject *something;

- (void)setSomething:(NSObject *)something {
    _something = something;  // This is not fine. As far as I know you should never do sth. like this... But how do I set it correctly?
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-11T12:46:34.593

```
-(void) setAnObject:(NSObject*) someObject {
    if (_anObject != someObject) {
       NSObject* savedObject = _anObject;
       _anObject = [someObject retain];
       [savedObject release];
    }
} 
```

如果您在保留新指针之前释放旧指针，您可能会遇到这样一种情况，即您正在从旧对象中的值设置值，而旧对象的释放会导致新对象POOF！就在它被保留之前。

或者，你可以做

```
....
[someObject retain];
[_anObject release];
_anObject = someObject;
... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T12:38:08.350

您是否只是为了使用不同的名称而覆盖设置器？如果是这种情况，您可以通过更改属性定义来做到这一点：

```
@property(nonatomic, setter = nameOfSetter: )NSInteger number; 
```

同样适用于吸气剂。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-11T12:39:26.897

在研究了 Hot Licks 接受的答案后编辑

x的属性声明和综合

```
@property (nonatomic, retain) ClassX x;
@synthesize x = _x; 
```

x 的重载设置器

```
- (void)setX:(ClassX *)x;
{
  if (x != _x)
  {
    [x retain];
    [_x release];
    _x = x;
    // custom code here
  }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-11T12:39:52.217

```
- (void) setSomething:(NSObject*) something
{
    if (something != _something)
    {
        [_something release];
        _something = [something retain];
    }
} 
```

您需要该`if`语句，因为否则，如果 something 和 _something*已经*相同，您将过度释放该对象，使其可能消失并出现问题。

# pointers - 在 CUDA 中的类之间传递指向设备内存的指针

> ID：12369790
> 
> 赞同：3
> 
> 时间：2012-09-11T12:31:42.940
> 
> 标签：pointers, cuda

我将不胜感激涉及 CUDA 设备内存指针的一些帮助。基本上我想将我的 CUDA 内核代码拆分为多个文件以提高可读性，并且因为它是一个大型程序。所以我想要做的是能够将相同的设备内存指针传递给多个 CUDA 内核，而不是同时传递。以下是我需要的粗略示例

```
//random.h
class random{
public:
    int* dev_pointer_numbers;
}; 
```

所以对象只需要存储指向设备内存的指针

```
//random_kernel.cu
__global__ void doSomething(int *values){
//do some processing}

extern "C" init_memory(int *devPtr,int *host_memory,int arraysize)
{
    cudaMalloc(&devPtr,arraysize*sizeof(int));
    cudaMemcpy(devPtr,host_memory,arraysize*sizeof(int),cudaMemcpyHostToDevice);
}

extern "C" runKernel(int *devPtr){
    doSomething<<<1,1>>>(devPtr);
} 
```

和主文件：

```
//main.cpp
//ignoring all the details etc
random rnd;
void CUDA(int *hostArray)
{
    init_memory(rnd.dev_pointer_numbers,hostArray,10);
    runKernel(rnd.dev_pointer_numbers);
} 
```

我知道当我使用对象指针运行内核代码时，它没有映射到设备内存中，所以这就是内核代码失败的原因。我想知道的是如何在我的主文件中存储指向设备内存中特定块的指针，以便它可以在其他 cuda 内核文件中重用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T12:39:45.587

你正在失去你的指针！

查看您的 init_memory 函数：

```
init_memory(int *devPtr,int *host_memory,int arraysize)
{
  cudaMalloc(&devPtr,arraysize*sizeof(int));
  cudaMemcpy(devPtr,host_memory,arraysize*sizeof(int),cudaMemcpyHostToDevice);
} 
```

所以你传入一个指针，此时你有一个名为 devPtr 的本地副本。然后使用指针的**本地副本**的地址调用 cudaMalloc() 。当函数返回时，本地副本（在堆栈上）被破坏，因此您丢失了指针。

而是试试这个：

```
init_memory(int **devPtr,int *host_memory,int arraysize)
{
  cudaMalloc(devPtr,arraysize*sizeof(int));
  cudaMemcpy(*devPtr,host_memory,arraysize*sizeof(int),cudaMemcpyHostToDevice);
}

...

init_memory(&rnd.dev_pointer_numbers,hostArray,10); 
```

作为旁注，请考虑删除`extern "C"`，因为您是从 C++ (main.cpp) 调用它，所以没有意义，它只会使您的代码混乱。

# delphi - 在 ADO 数据集过滤器中使用 LIKE 和 '%'

> ID：12369791
> 
> 赞同：3
> 
> 时间：2012-09-11T12:31:44.233
> 
> 标签：delphi, ado

尝试将过滤器应用于 Delphi XE2 中的 ADO 数据集时遇到问题...

```
Filter := ' [Name] like ''%john'' '; 
```

它引发了一个异常：

```
Project Test.exe raised exception class EOleException with message 
'Arguments are of the wrong type, are out of acceptable range, 
or are in conflict with one another'. Process stopped. 
```

但使用时：

```
Filter := ' [Name] like ''john%'' ' 
```

它工作正常！

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:04:23.657

运算符只能是以下之一： = < > <= >= <> LIKE 如果使用 LIKE 运算符，还可以使用 * 或 % 通配符作为字符串中的最后一个字符或作为第一个和最后一个字符在字符串中。

[http://www.devguru.com/technologies/ado/quickref/recordset_filter.html](http://www.devguru.com/technologies/ado/quickref/recordset_filter.html)

您可以在事件 OnFilterRecord 上捕获过滤器：

```
procedure TForm1.ADODataSet1FilterRecord(DataSet: TDataSet; var Accept: Boolean);
var
  iPos: Integer;
begin
  iPos:= pos('john',ADODataSet1name.AsString);
  if (iPos>0) and
     (iPos = length(ADODataSet1name.AsString)-3) then
  begin
    Accept:= True;
  end
  else
  begin
    Accept:= False;
  end;
end; 
```

或者

```
function TForm1.IsLastCriteria(AText: String): Boolean;
var
  iPos: Integer;
begin
  iPos:= pos(AText,ADODataSet1name.AsString);
  Result:= (iPos>0) and
           (iPos = length(ADODataSet1name.AsString)-length(AText)-1);
end;

procedure TForm1.ADODataSet1FilterRecord(DataSet: TDataSet; var Accept: Boolean);
begin
  Accept:= IsLastCriteria('john');
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-19T11:40:14.980

评论中提到了这个问题的最简单答案。如果你使用星号而不是百分号，一切都会很好用 Filter := ' [Name] like ''*john'' ';

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T11:03:04.567

作为。我仍然要求您阅读[http://www.catb.org/esr/faqs/smart-questions.html#beprecise](http://www.catb.org/esr/faqs/smart-questions.html#beprecise)并相应地描述您的环境。

*   什么是数据库服务器？
*   MDAC/ADO 组件是什么版本？
*   查询是什么？
*   SQL 中的名称列类型是什么？

您正在“提高”评论，这很好。但你不回答问题。这并不好。我们不是 ESPers，我们无法读懂你的想法。

我在上面的评论中给了你一些建议。你试过了吗？他们工作了吗？引用它们：

1.  也许您可以将 ADO/MDAC 更新到 2.8sp1 版本。参考的 MSDN 知识库文章被告知适用于 MDAC 最高 2.7 版本。也许 2.8sp1 不再有这个限制。
2.  也许您可以使用一些特定于数据服务器的技巧，例如将名称的最后 4 个字母复制到单独的列中。
3.  也许您可以将该条件移动到 SQL SELECT WHERE 子句中并重新打开查询。
4.  也许有像 TBDEDataSet.OnFilterRecord 这样的事件处理程序

有 4 种解决方法，您要么没有尝试，要么没有报告结果。不太好。

*   想法＃1是不言自明的
*   @SertacAkyuz 尽其所能详细说明了想法 #3，但缺少有关您的程序的信息。
*   @Ravaut123 详细介绍了想法 #4
*   想法#2概述如下

假设您的“ADO 数据库”由 Microsoft Access 支持，并根据[http://www.databasedev.co.uk/access-sql-string-functions.html](http://www.databasedev.co.uk/access-sql-string-functions.html) ... 或使用 MS SQL 并根据[http:// msdn.microsoft.com/en-us/library/ms177532.aspx](http://msdn.microsoft.com/en-us/library/ms177532.aspx) ...或者...

Query.SQL.Text := 'select **Right(Name, 4) as name_tail,** * from table where ...'

查看添加到查询的额外列！4 是“约翰”的长度。

对于这样的查询，以下过滤条件是等效的：

*   Filter := ' [Name] like ''%john'' ';
*   过滤器 := ' [name_tail] = ''约翰'' ';

但是，如果在某些行上 Name 列短于 4 个字母，我不知道 RIGHT 函数会做什么。也许它会截断结果，或者抛出错误并中止查询。后者可能 - 取决于真实数据 - 可能可以通过用空格填充到 4 长度来缓解，比如

```
LTrim(Right('    ' || Name, 4)) as name_tail 
```

那是供您测试的，因为只有您知道环境的详细信息。

# php - 从 PHP 连接到使用 MySQL 数据库的 Database Cube（使用 JDBC）

> ID：12369793
> 
> 赞同：7
> 
> 时间：2012-09-11T12:31:50.600
> 
> 标签：php, mysql, jdbc, olap, mondrian

我的数据库团队使用 MySQL 数据库建立了一个数据库 Cube。我需要从 PHP 连接到这个 Cube 并使用 MDX 查询获取数据。

我找不到如何做到这一点。有人可以尽快帮我解决这个问题吗？

参考文档：-[使用 MySQLEnterprise 和 Mondrian 创建交互式 OLAPApplications](http://www.scribd.com/doc/2569392/Creating-Interactive-OLAP-Applications-with-MySQL-Enterprise-and-Mondrian)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:36:32.860

您最好的选择是使用 Schema 工作台为您的多维数据集创建 XML

[参考](http://mondrian.pentaho.com/documentation/workbench.php)

[Schema Workbench 下载](http://sourceforge.net/projects/mondrian/files/schema%20workbench/)

[MySQL Jdbc 驱动程序](http://dev.mysql.com/downloads/connector/j/)

大多数时候人们在第一次使用工作台时会有点卡住，我强烈建议在使用它之前，将 mysql jdbc 驱动程序放在驱动程序文件夹中。这样，应用程序将能够在您第一次打开它时立即连接到您的数据库。

将 jdbc-driver-file.jar 放入驱动程序文件夹后：

1- 执行 Schema Workbench（基于 unix/linux 的系统上的 .sh）

2- 转到工具 -> 首选项并设置您的连接字符串：

*   驱动类名：com.mysql.jdbc.Driver

*   连接字符串：jdbc:mysql://serverlocation:port/database

*   用户名：mysql用户

*   密码：密码

3-转到文件->打开并打开您的多维数据集

4-转到文件->新建-> MDX查询

如果您想使用 jPivot 获得更漂亮的 MDX 查询视图，您可以使用 bi 服务器进行测试。

# c# - 使用 XmlTextReader 获取 XML 的子元素

> ID：12369795
> 
> 赞同：0
> 
> 时间：2012-09-11T12:32:00.163
> 
> 标签：c#, xml, xml-parsing

我有以下 XML：

```
<UpsHistory>
 <UpsSettings>
  <Filename>modbusevent.xml</Filename>
  <FileDate>04.02.1970</FileDate>
  <FileTime>00:05:39</FileTime>
  <Type>ENERTRONIC I 3-3 20kVA</Type>
  <Location></Location>
  <Phases>3</Phases>
  <UpsContact>
   <Company></Company>
   <Department></Department>
   <Contact></Contact>
   <City></City>
   <Street></Street>
   <Phone></Phone>
  </UpsContact>
 </UpsSettings>
 <UpsData id="1">
  <Date>09.08.2012</Date>
  <Time>12:05:53.52</Time>
  <EventCode>574</EventCode>
  <EventState>A</EventState>
  <EventText><![CDATA[IGBT - DRIVERBOARD FAILURE]]></EventText>
  <EventAction>/upsexe.cgi?cmd=2003&amp;p1=574&amp;reload=/mbevents.cgi&amp;wait=5</EventAction>
 </UpsData>
 <UpsData id="2">
  <Date>09.08.2012</Date>
  <Time>11:23:08.88</Time>
  <EventCode>606</EventCode>
  <EventState>E</EventState>
  <EventText><![CDATA[BYPASS VOLTAGE FAILURE]]></EventText>
  <EventAction>/upsexe.cgi?cmd=2003&amp;p1=606&amp;reload=/mbevents.cgi&amp;wait=5</EventAction>
 </UpsData>
 <UpsData id="3">
  <Date>09.08.2012</Date>
  <Time>11:23:07.06</Time>
  <EventCode>1000</EventCode>
  <EventState>E</EventState>
  <EventText><![CDATA[CUSTOMER RELAY 1 ON]]></EventText>
  <EventAction>/upsexe.cgi?cmd=2003&amp;p1=1000&amp;reload=/mbevents.cgi&amp;wait=5</EventAction>
 </UpsData>
 <UpsData id="4">
  <Date>09.08.2012</Date>
  <Time>11:23:06.97</Time>
  <EventCode>1003</EventCode>
  <EventState>E</EventState>
  <EventText><![CDATA[CUSTOMER RELAY 2 OFF]]></EventText>
  <EventAction>/upsexe.cgi?cmd=2003&amp;p1=1003&amp;reload=/mbevents.cgi&amp;wait=5</EventAction>
 </UpsData>

...

<UpsData id="602">
  <Date>08.09.2012</Date>
  <Time>11:06:13.84</Time>
  <EventCode>606</EventCode>
  <EventState>E</EventState>
  <EventText><![CDATA[BYPASS VOLTAGE FAILURE]]></EventText>
  <EventAction>/upsexe.cgi?cmd=2003&amp;p1=606&amp;reload=/mbevents.cgi&amp;wait=5</EventAction>
 </UpsData>
</UpsHistory> 
```

我想获取所有带有子元素值的 UpsData 元素，但我只有 UpsData 元素 id：

流 sw = CopyAndClose(response.GetResponseStream());

```
XmlTextReader rdr = new XmlTextReader(sw);
                            while (rdr.Read())
                            {
                                if (rdr.IsStartElement())
                                {
                                    if (rdr.NodeType == XmlNodeType.Element)
                                    {
                                        if (rdr.Name == "UpsData")
                                        {
                                            rdr.MoveToAttribute("id");
                                            if (rdr.Name == "Date")
                                            {
                                                ConsoleInfo(rdr.Value);
                                            }
                                        }
                                    }
                                }
                            } 
```

如何获取子元素值？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:49:24.743

如果您可以使用[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument)或[XmlPathNagivator](http://msdn.microsoft.com/en-us/library/system.xml.xpath.xpathnavigator)，请考虑使用 XPath。例如：

```
using System.Xml;

...

XmlDocument xmlDocument = new XmlDocument();
xmlDocument.LoadXml(xml);
foreach (XmlNode xmlNode in 
    xmlDocument.DocumentElement.SelectNodes("UpsData/@id[/*]"))
{
    // Do something, for example:
    Console.Out.WriteLine("Value: " + xmlNode.Value);
} 
```

XPath`"UpsData/@id[/*]"`表示查找名为“UpsData”的子节点和具有子节点的“id”属性并返回“id”属性。

# graphviz - 使 Graphviz 边缘标签垂直（或使树水平扩展）

> ID：12369799
> 
> 赞同：3
> 
> 时间：2012-09-11T12:32:15.033
> 
> 标签：graphviz, dot

我想实现 a) 垂直边缘标签或 b) 水平延伸的树，以便将此图适合单个 A4 页面。我该怎么做？

```
digraph g {
node[shape=point]
root -> 1 [label = "abcdefghijklmnopqrstuvwxyz$"]
root -> 2 [label = "bcdefghijklmnopqrstuvwxyz$"]
root -> 3 [label = "cdefghijklmnopqrstuvwxyz$"]
root -> 4 [label = "defghijklmnopqrstuvwxyz$"]
root -> 5 [label = "efghijklmnopqrstuvwxyz$"]
root -> 6 [label = "fghijklmnopqrstuvwxyz$"]
root -> 7 [label = "ghijklmnopqrstuvwxyz$"]
root -> 8 [label = "hijklmnopqrstuvwxyz$"]
root -> 9 [label = "ijklmnopqrstuvwxyz$"]
root -> 10 [label = "jklmnopqrstuvwxyz$"]
root -> 11 [label = "klmnopqrstuvwxyz$"]
root -> 12 [label = "lmnopqrstuvwxyz$"]
root -> 13 [label = "mnopqrstuvwxyz$"]
root -> 14 [label = "nopqrstuvwxyz$"]
root -> 15 [label = "opqrstuvwxyz$"]
root -> 16 [label = "pqrstuvwxyz$"]
root -> 17 [label = "qrstuvwxyz$"]
root -> 18 [label = "rstuvwxyz$"]
root -> 19 [label = "stuvwxyz$"]
root -> 20 [label = "tuvwxyz$"]
root -> 21 [label = "uvwxyz$"]
root -> 22 [label = "vwxyz$"]
root -> 23 [label = "wxyz$"]
root -> 24 [label = "xyz$"]
root -> 25 [label = "yz$"]
root -> 26 [label = "z$"]
root -> 27 [label = "$"] 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T23:24:51.013

rankdir=LR 可以让你把它放在一页上

```
digraph g {
graph[rankdir=LR]
node[shape=point]
root -> 1 [label = "abcdefghijklmnopqrstuvwxyz$"]
root -> 2 [label = "bcdefghijklmnopqrstuvwxyz$"]
...
} 
```

[http://www.graphviz.org/doc/info/attrs.html#d:rankdir](http://www.graphviz.org/doc/info/attrs.html#d:rankdir)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:45:07.263

我刚刚在网上发现的一种解决方法是用 '\n' 分隔每个字符（例如换行符）。不漂亮，但基本实现了垂直边缘标签：

例如：

```
root -> 1 [label = "f\ng\nh\ni\nj\nk\nl\nm\nn\no\np\nq\nr\ns\nt\nu\nv\nw\nx\ny\nz\n$"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:31:58.863

一种可能性是使用该[`unflatten`](http://www.graphviz.org/pdf/unflatten.1.pdf)实用程序。

例如：

```
unflatten -l 8 yourdotfile.gv | dot | neato -s -n2 -Tpng -o result.png 
```

结果图没有以前那么宽。

# c# - 使用 C# 从 sql 数据库中的下拉列表更新表中选择值

> ID：12369812
> 
> 赞同：0
> 
> 时间：2012-09-11T12:32:44.447
> 
> 标签：c#, asp.net, sql, visual-studio-2010, sql-server-2008

我将 Dropdownlist 放在我的 GridView1 中，下拉列表的值是 0 和 1。我想要的是：根据从 dropDownlist 中选择的值来更新我的 sql 数据库中的值列 [Status] ？？？

```
protected void SQL_Update(object sender, GridViewUpdateEventArgs e){

SqlConnection conn = new SqlConnection();
conn.ConnectionString = @"Data Source=.\SQLEXPRESS;Initial Catalog=Korisnik;Integrated Security=True";
SqlCommand cmd = new SqlCommand();
cmd.CommandText = "UPDATE RegistracijaKorisnik SET Status = " + ((DropDownList)GridView1.Rows[e.RowIndex].FindControl("DropDownList2")).SelectedValue; ;
cmd.Connection = conn;

conn.Open();
cmd.ExecuteNonQuery();

conn.Close();} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:49:02.907

如果我是你，根据你提供的信息，我认为解决方案是

```
<asp:TemplateField /> 
```

带有 DropDownList 的列

```
<EditTemplate> 
```

本专栏的。然后，您需要 GridView 中的某种 Button

```
CommandName="Edit" 
```

这将触发 GridView 的编辑事件，您可以使用该事件来识别正在编辑和设置的行的索引

```
GridView1.EditIndex = e.NewEditIndex 
```

现在在该行中，您将拥有值 0 和 1 的 DropDownList。您还需要在 EditTemplate 中有一个 Button，它将保存更改

```
CommandName="Update" 
```

然后在触发 RowUpdating 时处理网格的 RowUpdating 事件以从 DropdownList 中查找新值，使用此新数据更新数据库中的相关行，然后将 GridView 的 EditIndex 属性设置回“-1”以停止编辑该行。然后，您希望重新绑定 GridView 中的数据以显示更改。

一个小例子可能是这样的：

```
<asp:TemplateField HeaderText="Edit">
    <ItemTemplate>
        <asp:Button ID="EditImageButton" runat="server" Text="Edit" CommandName="Edit"' />
    </ItemTemplate>
    <EditItemTemplate>
        <asp:Button ID="UpdateButton" runat="server" ToolTip="Save" CommandName="Update"/>
    </EditItemTemplate>
</asp:TemplateField>
<asp:TemplateField>
    <ItemTemplate>
        <% #Eval("Status")%>
    </ItemTemplate>
    <EditTemplate>
        <asp:DropdownList ID="List" runat="server" />
    <EdiTemplate>
</asp:TemplateField>

protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{
        GridView1.EditIndex = e.NewEditIndex;
        GridView1.DataSource = Session["domainData"];
        GridView1.DataBind();
}

protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    int index = GridView1.EditIndex;
    int key = Convert.ToInt32(GridView.DataKeys[index].Value);
    GridViewRow row = GridView1.Rows[index];
    DropdownList = row.FindControl("List") as DropDownList;

    // Save changes to database

    // GridView1.EditIndex = -1;
    // Rebind grid data
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:00:00.867

假设您有 DropDownList 并且以任何方式绑定它：

```
<asp:GridView ID="Grid" runat="server" OnRowUpdating="SQL_Update">
  <asp:TemplateField> 
    <EditItemTemplate>
      <asp:Button ID="Btn" runat="server" CommandName="Update" Text="Update" />
    </EditItemTemplate>
  </asp:TemplateField> 
  <asp:TemplateField>
    <EditItemTemplate>
      <asp:DropDownList ID="ddl" runat="server" /> 
    </EditItemTemplate> 
  </asp:TemplateField> 
</asp:GridView> 
```

在您后面的代码中，您应该有一个更新事件，特别是使用`GridViewUpdateEventArgs e`

```
protected void SQL_Update(object sender, GridViewUpdateEventArgs e)
{
   /*
     You'll have to find the control in the GridView, using FindControl, and cast it to a DropDownList  
     Using ddl.SelectedValue isn't going to work
   */
   string sql = "Update table set Status = " + ((DropDownList)Grid.Rows[e.RowIndex].FindControl("ddl")).SelectedValue 
   //Other SQL logic here

   //Commit the database changes, using whichever SQL driver you have.
} 
```

# python - 从字符串列表中标记图形

> ID：12369813
> 
> 赞同：0
> 
> 时间：2012-09-11T12:32:45.430
> 
> 标签：python, matplotlib

我有以下内容：

```
Mode = ["dense", "Iso", "hole"]
label = 400. 
```

我想做的是在保存一个我想命名的图形时：

```
savefig('Charlie_Mode= %_label=%.1f.png'%(Mode, Label) 
```

所以很明显我可以做花车但不是模式的事情有什么帮助吗？最终结果应如下所示：

```
Charlie_Mode="dense"_label_400.0.png 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:38:09.877

你这里有问题：

```
'Charlie_Mode= %_label=%.1f.png'%(Mode, Label) 
```

你应该试试：

```
'Charlie_Mode= %s_label=%.1f.png' % (Mode, Label) 
```

您的第一个`%`缺少一个`s`（用于字符串）。

当然，如果您不选择列表中的特定元素，它仍然会失败`Mode`，例如`Mode[0]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:41:45.257

也尝试使用格式（来自皮埃尔的回答）

```
savefig('Charlie_Mode= %_label=%.1f.png'%(Mode, Label)) 
```

变成

```
savefig('Charlie_Mode={0}_label={1:.1f}.png'.format(Mode, Label)) 
```

因为我了解了格式，所以我像石头一样掉了%，因为它更干净。您可能有一些格式要求，`%s`但`%d`可能会更简单。

请注意，该`format`方法是在 Python 2.6 中引入的，不适用于旧版本。

# vb.net - VBScript 运行两次，一次是在页面加载时，一次是在提交时。只需要提交？

> ID：12369814
> 
> 赞同：0
> 
> 时间：2012-09-11T12:32:48.430
> 
> 标签：vb.net, asp-classic, vbscript

我觉得我在这里遗漏了一些东西。我在 vbscript 中添加了一些不同的东西，试图让它只在单击提交按钮而不是两次时运行（第二次加载页面，然后提交），但它要么坏了它，要么没有用。对这个初学者程序员的任何帮助将不胜感激。如果您需要html，请告诉我。编辑：仍在寻求帮助！:(

```
<% Sub sendEmail(mailFrom, mailTo, mailSubject, mailMessage, mailServer, mailUsername, mailPassword)
Set MyMail = CreateObject("cdo.message")
MyMail.From = mailFrom
MyMail.To = mailTo
MyMail.Subject = mailSubject
MyMail.HTMLBody = mailMessage
MyMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
MyMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = mailServer
MyMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusername") = mailUsername
MyMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendpassword") = mailPassword
MyMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1
MyMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
MyMail.Configuration.Fields.Update
MyMail.Send
Set MyMail = nothing
End Sub

Dim mailFrom, mailTo, mailSubject, mailMessage, mailServer, mailUsername, mailPassword

mailFrom = Request.form(example)
mailTo = "example"
mailSubject = "example"
mailMessage = "example"
mailServer = "example"
mailUsername = "example"
mailPassword = "example"

Call sendEmail(mailFrom, mailTo, mailSubject, mailMessage, mailServer, mailUsername, mailPassword)
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:40:10.643

如果`Request.form(example) = ""`然后页面不是表单提交的结果（或者表单是在没有此数据的情况下提交的），那么；

```
if Request.form(example) <> "" then
   'is a form submission
   .. email code
end if 
```

如果您想更准确地区分提交，请在表单中添加一个常量隐藏字段

```
<input type="hidden" name="sendemail" value="1" /> 
```

并寻找`Request.form("sendemail") = "1"`。

# python - Django 1.4 中的时区从 DB 以 UTC 格式返回

> ID：12369819
> 
> 赞同：2
> 
> 时间：2012-09-11T12:33:10.797
> 
> 标签：python, django, django-models, django-admin

这是我的 django 项目的 settings.py 中的两个相关设置。

```
USE_TZ = True
TIME_ZONE = 'Europe/Stockholm' 
```

我在模型中有这样定义的 DateTimeField。

```
triggeredTime = models.DateTimeField('Utlöses') 
```

这是由 Django 管理应用程序和表单管理的。所以表单允许我在数据库的这个字段中输入日期和时间。在这种情况下，数据库是 sqlite3。

（我不允许发布图片作为垃圾邮件预防，所以这里是链接） [http://i.imgur.com/ukadP.png](http://i.imgur.com/ukadP.png)

为了这个例子，我输入的时间是 14:10:05。

然后我启动 django shell。

```
$ python manage.py shell
Python 2.6.6 (r266:84292, Dec 26 2010, 22:31:48) 
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> from scheduler.models import Task, Schedule
>>> s = Schedule.objects.all()
>>> for row in s:
...  print row.triggeredTime
... 
2012-09-11 12:10:05 
```

这显然是UTC。即使我尝试将 pytz 添加到组合中并设置 tzinfo，我也会得到一个不在 DST 中的值。我不必将 DST 硬编码到我的代码中。

```
>>> import pytz
>>> from pytz import timezone
>>> stockholm = timezone('Europe/Stockholm')
>>> for row in s:
...  print row.triggeredTime.replace(tzinfo=stockholm)
... 
2012-09-11 12:10:05+01:00 
```

就此而言，我什至不必对时区进行硬编码，因为 django 声称已经涵盖了这一点。那么有人可以解释一下如何在 Django 中使用时区吗？

仅供参考，服务器物理上位于 CET 时区，因此欧洲/斯德哥尔摩是其当前系统范围的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T23:12:23.400

SQLite[不存储 TZ 信息](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#other-databases)，因此您必须在保存到 DB 时将日期转换为 UTC，将 USE_TZ 设置为 False 或更改为 Postgre

# sql - 组合两个表并添加数量

> ID：12369820
> 
> 赞同：2
> 
> 时间：2012-09-11T12:33:13.830
> 
> 标签：sql, sql-server, union

我有 2 张桌子

仓库_1

```
item  qty 
--------
3001   1
3003   3
3004   1
3006   2 
```

仓库_2

```
item   qty
----------
3001    2
3002    3
3006    3
3008    6 
```

我想将这两个表合并到第三个表中，并像这样添加相同项目的数量

仓库_3

```
item    qty
-----------
3001     3
3002     3
3003     3
3004     1
3006     5
3008     6 
```

如何使用 SQL Server 实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T12:37:02.947

您可以使用`UNION`. 首先，您必须合并所有数据（两个表的）并使用子查询，您可以使用函数进行分组`GROUP BY`和添加总计。`SUM`

```
SELECT Item, SUM(qty) as Qty FROM
(
   SELECT Item, qty FROM warehouse_1
   UNION
   SELECT Item, qty FROM warehouse_2
) as a
GROUP BY item; 
```

查看更多`UNION`：

*   [SQL Server：UNION (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms180026.aspx)
*   [MySQL：联合语法](http://dev.mysql.com/doc/refman/5.0/en/union.html)

查看更多 about`GROUP BY`子句：（您也可以在`SUM`此处找到 about。）

*   [SQL Server：分组依据（Transact-SQL）](http://msdn.microsoft.com/en-us/library/ms177673.aspx)
*   [MySQL：GROUP BY（聚合）函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:36:58.953

请试试：

```
select item,sum(qty) from(
    select item, Qty from warehouse_1 
    UNION
    select item, Qty from warehouse_2
)x
group by item 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:37:50.830

```
CREATE OR REPLACE VIEW warehouse_3 as 
    SELECT coalesce(w1.item,w2.item) as item, w1.qty+w2.qty as qty
    FROM warehouse_1 as w1
    OUTER JOIN warehouse_2 as w2
    ON w1.item = w2.item; 
```

假设该**项目**是唯一的。在某些数据库中，**coalesce**是**nvl 。**然后你可以打电话：

```
select * from warehouse_3; 
```

它会返回总和。

此外，如果您更改 W1 或 W2 中的某些数量，它将在 W3 中自动更正

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T12:38:10.143

你可以试试这个

```
SELECT item , SUM(qty)
FROM (
   SELECT item, qty
   FROM warehouse_1
   UNION
   SELECT item, qty
   FROM warehouse_2
) AS U GROUP BY item 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T12:57:48.613

试试这个：

```
create table tbl1(item int,qty int)
INSERT INTO tbl1
VALUES(3001,1),(3003,3),(3004,1),(3006,2)

create table tbl2(item int,qty int)
INSERT INTO tbl2
VALUES(3001,2),(3002,3),(3006,3),(3008,6)

select isnull(t1.item,t2.item) as item,isnull(t1.qty,0)+isnull(t2.qty,0) as qty from tbl1 t1 full outer join tbl2 t2 on t1.item =t2.item 
order by 1 
```

# javascript - 在新窗口上使用 d3.js

> ID：12369823
> 
> 赞同：1
> 
> 时间：2012-09-11T12:33:19.633
> 
> 标签：javascript, d3.js, html-table, console, window

打开新窗口时是否可以使用 d3.js？例如，我正在尝试：

```
new_window = window.open("userpage.html");
new_window.document.write("<html><body>");
new_window.document.write("<table id=\"usertable\">");
new_window.document.write("</table>");
new_window.document.write("</body></html>");    
table = d3.select("#usertable");
console.log(table);
var thead = table.append("thead");
var tbody = table.append("tbody");
var columns = ["dataset"];

thead.append("tr")
    .selectAll("th")
    .data(columns)
    .enter()
    .append("th")
    .text(function(column) { console.log(column); return column; }); 
```

它不起作用，第一个 console.log 的输出是

```
[
Array[1]
0: null
length: 1
parentNode: HTMLHtmlElement
__proto__: Array[0]
] 
```

我觉得`0: null`不好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T21:07:38.937

这里有几个问题：

*   我认为您打开新窗口不正确-通常，您要么打开带有内容的 URL，要么将`""`其用作 URL 并将内容写入空白窗口。打开一个类似的 URL`"usertable.html"`然后写`<html><body>`是没有意义的。最后，即使是空白窗口，您也无需编写`<html><body>`- 浏览器通常会默认提供这些节点。

*   `d3.select`默认情况下，使用将在当前文档中查找。为了访问新打开的窗口的主体，您需要传入`new_window.document`- 事实上，您需要传入`new_window.document.body`，因为没有 . 就无法附加任何`document`内容`HIERARCHY_REQUEST_ERROR`。

*   我也不认为`document.write`像你在这里做的那样混合 D3 是一个好主意。D3 选择 DOM 中的节点，而您现在拥有代码的方式，我不认为您`table`实际上是一个格式良好的节点，直到您尝试选择它之后。D3 非常擅长插入新的 DOM 节点——使用它来代替。

将所有这些放在一起会产生如下结果：

```
var newWindow = window.open('');

var newWindowRoot = d3.select(newWindow.document.body);

// now do some writing with D3
var data = [
    { foo: "Foo 1", bar: "Bar 1" },
    { foo: "Foo 2", bar: "Bar 2" }
];

var table = newWindowRoot.append('table');

var rows = table.selectAll('tr')
    .data(data);

rows.enter().append('tr');

var cells = rows.selectAll('td')
    .data(function(d) { return d3.entries(d); });

cells.enter().append('td');

cells.text(function(d) { return d.value; }); 
```

工作示例：http: [//jsfiddle.net/nrabinowitz/gQf7J/](http://jsfiddle.net/nrabinowitz/gQf7J/)

# javascript - Javascript 二进制搜索/插入性能

> ID：12369824
> 
> 赞同：0
> 
> 时间：2012-09-11T12:33:24.407
> 
> 标签：javascript, arrays, binary-search

```
function binarySearch(value)
{
    var startIndex = 0,
        stopIndex = words.length - 1,
        middle = Math.floor((stopIndex + startIndex) / 2);

    while (words[middle] != value && startIndex < stopIndex) {
        // adjust search area
        if (value < words[middle]) {
            stopIndex = middle - 1;
        } else if (value > words[middle]) {
            startIndex = middle + 1;
        }

        // recalculate middle
        middle = Math.floor((stopIndex + startIndex) / 2);
    }
} 
```

我正在以数组的格式制作大量单词：

例如`["a","ab","abc","b"]`

按字母顺序。我遇到的问题是修改我的二进制搜索算法以在正确的位置添加单词然后更新？

将单词添加到有序数组中的最佳性能方式是什么？为什么这是最好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-26T23:56:49.423

对于有效的二分搜索插入，您需要让二分搜索返回一些内容，以指示如果未找到该字符串在数组中的位置。

在其他语言中执行此操作的公认方法是返回字符串所属索引的按位补码。0 的按位补码是 -1，1 的按位补码是 -2，2 是 -3，以此类推。要在 JavaScript 中获取数字的按位补码，请使用`~`运算符。

示例代码：

```
/* 
    target: the object to search for in the array
    comparator: (optional) a method for comparing the target object type
    return value: index of a matching item in the array if one exists, otherwise the bitwise complement of the index where the item belongs
*/
Array.prototype.binarySearch = function (target, comparator) {
    var l = 0,
        h = this.length - 1,
        m, comparison;
    comparator = comparator || function (a, b) {
        return (a < b ? -1 : (a > b ? 1 : 0)); /* default comparison method if one was not provided */
    };
    while (l <= h) {
        m = (l + h) >>> 1; /* equivalent to Math.floor((l + h) / 2) but faster */
        comparison = comparator(this[m], target);
        if (comparison < 0) {
            l = m + 1;
        } else if (comparison > 0) {
            h = m - 1;
        } else {
            return m;
        }
    }
    return~l;
}; 
```

然后您可以使用 binarySearch 方法编写您自己的 binaryInsert 函数：

```
/*
    target: the object to insert into the array
    duplicate: (optional) whether to insert the object into the array even if a matching object already exists in the array (false by default)
    comparator: (optional) a method for comparing the target object type
    return value: the index where the object was inserted into the array, or the index of a matching object in the array if a match was found and the duplicate parameter was false 
*/
Array.prototype.binaryInsert = function (target, duplicate, comparator) {
    var i = this.binarySearch(target, comparator);
    if (i >= 0) { /* if the binarySearch return value was zero or positive, a matching object was found */
        if (!duplicate) {
            return i;
        }
    } else { /* if the return value was negative, the bitwise complement of the return value is the correct index for this object */
        i = ~i;
    }
    this.splice(i, 0, target);
    return i;
}; 
```

一旦将这些方法原型化到数组对象上，您就可以像这样直接使用它们：

```
var arr = [];
arr.binaryInsert("Zebra");
arr.binaryInsert("Aardvark");
arr.binaryInsert("Mongoose");
alert(arr);
/* [ "Aardvark", "Mongoose", "Zebra" ] */ 
```

随着项目数量的增加，这将比调用快得多`Array.sort()`

**数组属性键污染**

请注意，如上述代码中的 Array 对象的原型方法会导致方法显示为数组的可枚举属性，这可能会干扰您在`for(var i in arr)`循环中枚举所有属性的任何逻辑。以 的格式编写的循环`for(var i=0; i<arr.length; i++)`仍将按设计工作。

如果您不需要支持 Internet Explorer 8 或更低版本，您可以避免`Array.prototype`直接调用，而是使用`Object.defineProperty`以下示例。

```
Object.defineProperty(Array.prototype, "binarySearch", {
value: function (target, comparator) {
    var l = 0,
        h = this.length - 1,
        m, comparison;
    comparator = comparator || function (a, b) {
        return (a < b ? -1 : (a > b ? 1 : 0));
    };
    while (l <= h) {
        m = (l + h) >>> 1;
        comparison = comparator(this[m], target);
        if (comparison < 0) {
            l = m + 1;
        } else if (comparison > 0) {
            h = m - 1;
        } else {
            return m;
        }
    }
    return~l;
}
});

Object.defineProperty(Array.prototype, "binaryInsert", {
value: function (target, duplicate, comparator) {
    var i = this.binarySearch(target, comparator);
    if (i >= 0) {
        if (!duplicate) {
            return i;
        }
    } else {
        i = ~i;
    }
    this.splice(i, 0, target);
    return i;
}
}); 
```

这种方法将避免污染可枚举键，因此`for(var i in arr)`循环仍将按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:43:07.687

最好的方法是改用树，因为对于数组，这样的操作可能具有线性算法复杂性。

如果您想坚持使用数组，我建议您使用[拼接](http://www.w3schools.com/jsref/jsref_splice.asp)方法进行插入。

# android - Tab 内的 ViewPager 无法正确显示项目

> ID：12369825
> 
> 赞同：2
> 
> 时间：2012-09-11T12:33:25.920
> 
> 标签：android, android-fragments, android-viewpager, android-tabs, android-nested-fragment

我有一个设置标签主机的 FragmentActivity。每个选项卡都是一个简单的 Fragment，称为 TabFragment。TabFragment 有一个 ViewPager，在这种情况下它是[antonyt](https://stackoverflow.com/questions/7546224/viewpager-as-a-circular-queue-wrapping/9656874)的 InfiniteViewPager （在这里讨论：[ViewPager as a circular queue / wrapping](https://stackoverflow.com/questions/7546224/viewpager-as-a-circular-queue-wrapping/9656874)）。

（主要）问题如下：

1.  我启动应用程序。我单击第二个选项卡。当我应该看到与第一个选项卡中相同的内容时，只有一个空白屏幕。向右滚动几次后，我确实看到了我的 TextViews。

2.  在 ViewPagers 中滚动片段和更改选项卡最终会导致停止和 FC，而不会引发明确的异常。

这是我对 Fragments 的第一次尝试，我必须承认，我不理解观察到的行为。

任何提示将不胜感激。

整个项目都[在这里](http://www.sendspace.com/file/rtguqq)。

编码：

带有 TabHost 的 FragmentActivity：

```
 package com.example.viewpagerintab;

    import java.util.HashMap;

    import android.content.Context;
    import android.os.Bundle;
    import android.support.v4.app.Fragment;
    import android.support.v4.app.FragmentActivity;
    import android.support.v4.app.FragmentTransaction;
    import android.view.View;
    import android.widget.TabHost;
    import android.widget.TabHost.TabContentFactory;

    public class TabsFragmentActivity extends FragmentActivity implements
            TabHost.OnTabChangeListener {

        private TabHost mTabHost;
        private HashMap mapTabInfo = new HashMap();
        private TabInfo mLastTab = null;

        public TabsFragmentActivity() {

        }

        private class TabInfo {
            private String tag;
            private Class clss;
            private Bundle args;
            private Fragment fragment;

            TabInfo(String tag, Class classObject, Bundle args) {
                this.tag = tag;
                this.clss = classObject;
                this.args = args;
            }

        }

        class TabFactory implements TabContentFactory {

            private final Context mContext;

            /**
             * @param context
             */
            public TabFactory(Context context) {
                mContext = context;
            }

            /**
             * (non-Javadoc)
             * 
             * @see android.widget.TabHost.TabContentFactory#createTabContent(java.lang.String)
             */
            public View createTabContent(String tag) {
                View v = new View(mContext);
                v.setMinimumWidth(0);
                v.setMinimumHeight(0);
                return v;
            }

        }

        /**
         * (non-Javadoc)
         * 
         * @see android.support.v4.app.FragmentActivity#onCreate(android.os.Bundle)
         */
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.tabs);

            initialiseTabHost(savedInstanceState);

            if (savedInstanceState != null) {
                mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
            }
        }

        /**
         * (non-Javadoc)
         * 
         * @see android.support.v4.app.FragmentActivity#onSaveInstanceState(android.os.Bundle)
         */
        protected void onSaveInstanceState(Bundle outState) {
            outState.putString("tab", mTabHost.getCurrentTabTag());
            super.onSaveInstanceState(outState);
        }

        private void initialiseTabHost(Bundle args) {
            mTabHost = (TabHost) findViewById(android.R.id.tabhost);
            mTabHost.setup();
            TabInfo tabInfo = null;

            tabInfo = new TabInfo("Discover", TabFragmentD.class, args);
            TabsFragmentActivity.addTab(this, mTabHost,
                    mTabHost.newTabSpec("Discover").setIndicator("Discover"),
                    tabInfo);
            mapTabInfo.put(tabInfo.tag, tabInfo);

            tabInfo = new TabInfo("Friends", TabFragmentF.class, args);
            TabsFragmentActivity
                    .addTab(this, mTabHost, mTabHost.newTabSpec("Friends")
                            .setIndicator("Friends"), tabInfo);
            mapTabInfo.put(tabInfo.tag, tabInfo);

            onTabChanged("Discover");

            mTabHost.setOnTabChangedListener(this);
        }

        /**
         * @param activity
         * @param tabHost
         * @param tabSpec
         * @param clss
         * @param args
         */
        private static void addTab(TabsFragmentActivity activity, TabHost tabHost,
                TabHost.TabSpec tabSpec, TabInfo tabInfo) {

            // Attach a Tab view factory to the spec
            tabSpec.setContent(activity.new TabFactory(activity));
            String tag = tabSpec.getTag();

            // Check to see if we already have a fragment for this tab, probably
            // from a previously saved state. If so, deactivate it, because our
            // initial state is that a tab isn't shown.
            tabInfo.fragment = activity.getSupportFragmentManager()
                    .findFragmentByTag(tag);
            if (tabInfo.fragment != null && !tabInfo.fragment.isDetached()) {
                FragmentTransaction ft = activity.getSupportFragmentManager()
                        .beginTransaction();
                ft.detach(tabInfo.fragment);
                ft.commit();
                activity.getSupportFragmentManager().executePendingTransactions();
            }

            tabHost.addTab(tabSpec);
        }

        /**
         * (non-Javadoc)
         * 
         * @see android.widget.TabHost.OnTabChangeListener#onTabChanged(java.lang.String)
         */
        public void onTabChanged(String tag) {
            TabInfo newTab = mapTabInfo.get(tag);
            if (mLastTab != newTab) {
                FragmentTransaction ft = getSupportFragmentManager()
                        .beginTransaction();
                if (mLastTab != null) {
                    if (mLastTab.fragment != null) {
                        ft.detach(mLastTab.fragment);
                    }
                }
                if (newTab != null) {
                    if (newTab.fragment == null) {
                        newTab.fragment = Fragment.instantiate(this,
                                newTab.clss.getName(), newTab.args);
                        ft.add(R.id.realtabcontent, newTab.fragment, newTab.tag);
                    } else {
                        ft.attach(newTab.fragment);
                    }
                }

                mLastTab = newTab;
                ft.commit();
                getSupportFragmentManager().executePendingTransactions();
            }
        }

    } 
```

TabFragment 包含 InfiniteViewPager：

```
 package com.example.viewpagerintab;

    import java.util.List;
    import java.util.Vector;

    import android.os.AsyncTask;
    import android.os.Bundle;
    import android.support.v4.app.Fragment;
    import android.support.v4.app.FragmentPagerAdapter;
    import android.support.v4.view.ViewPager;
    import android.support.v4.view.ViewPager.OnPageChangeListener;
    import android.util.Log;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.LinearLayout;

    import com.antonyt.infiniteviewpager.InfinitePagerAdapter;
    import com.example.viewpagerintab.pager.SimpleAdapter;

    public class TabFragment extends Fragment {

        private static final String TAG = TabFragment.class.getSimpleName();

        protected View mView;

        ViewPager mViewPager;

        private InfinitePagerAdapter mPagerAdapter;

        PageListener pageListener;

        public TabFragment() {

        }

        /**
         * (non-Javadoc)
         * 
         * @see android.support.v4.app.Fragment#onCreateView(android.view.LayoutInflater,
         *      android.view.ViewGroup, android.os.Bundle)
         */
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

            Log.d(TAG, "onCreateView - called");

            if (container == null) {
                // We have different layouts, and in one of them this
                // fragment's containing frame doesn't exist. The fragment
                // may still be created from its saved state, but there is
                // no reason to try to create its view hierarchy because it
                // won't be displayed. Note this is not needed -- we could
                // just run the code below, where we would create and return
                // the view hierarchy; it would just never be used.
                return null;
            }

            pageListener = new PageListener();

            mView = (LinearLayout) inflater.inflate(R.layout.tab, container, false);

            List fragments = new Vector();
            fragments.add(DayFragment.newInstance("one"));
            fragments.add(DayFragment.newInstance("two"));
            fragments.add(DayFragment.newInstance("three"));
            fragments.add(DayFragment.newInstance("four"));

            mPagerAdapter = new InfinitePagerAdapter(
                    new com.example.viewpagerintab.PagerAdapter(
                            getFragmentManager(), fragments));

            mViewPager = (ViewPager) mView.findViewById(R.id.viewpager);

            mViewPager.setOnPageChangeListener(pageListener);

            new setAdapterTask().execute();

            Log.d(TAG, "onCreateView - finished");

            return mView;
        }

        private class setAdapterTask extends AsyncTask {
            protected Void doInBackground(Void... params) {
                return null;
            }

            @Override
            protected void onPostExecute(Void result) {
                mViewPager.setAdapter(mPagerAdapter);
            }
        }

        class PageListener implements OnPageChangeListener {
            private final String TAG = PageListener.class.getSimpleName();

            @Override
            public void onPageScrollStateChanged(int arg0) {
                Log.d(TAG, "onPageScrollStateChanged(..) to: " + arg0);

            }

            @Override
            public void onPageScrolled(int arg0, float arg1, int arg2) {
                // Log.d(TAG, "onPageScrolled(..) - called");

            }

            @Override
            public void onPageSelected(int arg0) {
                Log.d(TAG, "onPageSelected(..) selected: " + arg0);

            }
        }
    } 
```

TabFragmentD 和 TabFragmentF 几乎相同：

```
 public class TabFragmentD extends TabFragment {

        public TabFragmentD() {

        }

    } 
```

DayFragment 只包含一个 TextView：

```
 package com.example.viewpagerintab;

    import android.os.Bundle;
    import android.support.v4.app.Fragment;
    import android.util.Log;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.LinearLayout;
    import android.widget.TextView;

    public class DayFragment extends Fragment {

        private static final String TAG = DayFragment.class.getSimpleName();

        protected View mView;

        protected TextView tvDay;

        public DayFragment() {

        }

        /**
         * (non-Javadoc)
         * 
         * @see android.support.v4.app.Fragment#onCreateView(android.view.LayoutInflater,
         *      android.view.ViewGroup, android.os.Bundle)
         */
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

            if (container == null) {
                // We have different layouts, and in one of them this
                // fragment's containing frame doesn't exist. The fragment
                // may still be created from its saved state, but there is
                // no reason to try to create its view hierarchy because it
                // won't be displayed. Note this is not needed -- we could
                // just run the code below, where we would create and return
                // the view hierarchy; it would just never be used.
                return null;
            }

            mView = (LinearLayout) inflater.inflate(R.layout.day, container, false);

            tvDay = (TextView) mView.findViewById(R.id.tvText);

            String text = getArguments().getString("text");
            Log.d(TAG, "creating view with text: " + text);

            tvDay.setText(text);

            return mView;
        }

        public static DayFragment newInstance(String text) {
            Log.d(TAG, "newInstance with text: " + text);
            DayFragment f = new DayFragment();

            // Supply text input as an argument.
            Bundle args = new Bundle();
            args.putString("text", text);
            f.setArguments(args);

            return f;
        }

    } 
```

寻呼机适配器：

```
 package com.example.viewpagerintab;

    import java.util.List;

    import android.support.v4.app.Fragment;
    import android.support.v4.app.FragmentManager;
    import android.support.v4.app.FragmentPagerAdapter;

    public class PagerAdapter extends FragmentPagerAdapter {

        private List fragments;

        public PagerAdapter(FragmentManager fm, List fragments) {
            super(fm);
            this.fragments = fragments;
        }

        /*
         * (non-Javadoc)
         * 
         * @see android.support.v4.app.FragmentPagerAdapter#getItem(int)
         */
        @Override
        public Fragment getItem(int position) {
            return fragments.get(position);
        }

        /*
         * (non-Javadoc)
         * 
         * @see android.support.v4.view.PagerAdapter#getCount()
         */
        @Override
        public int getCount() {
            return this.fragments.size();
        }
    } 
```

InfiniteViewPager 和 InfinitePageAdapter 在[antonyt 的 github 上](https://github.com/antonyt/InfiniteViewPager)。

选项卡.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:orientation="horizontal" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0" />

        <FrameLayout
            android:id="@+android:id/realtabcontent"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />
    </LinearLayout>
</TabHost>
</LinearLayout> 
```

选项卡.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@android:color/black" >

<com.antonyt.infiniteviewpager.InfiniteViewPager
    android:id="@+android:id/viewpager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

</LinearLayout> 
```

日.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@android:color/black"
android:gravity="center" >

<TextView
    android:id="@+id/tvText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="@android:color/white" />

</LinearLayout> 
```

**更新**

正如 CommonsWare 所指出的，Android 在 Fragments 中的 Fragments 存在问题。

我将 tabs.xml 修改为：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                android:orientation="horizontal" />

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="0dp"
                android:layout_height="0dp"
                android:layout_weight="0" />

            <FrameLayout
                android:id="@+android:id/realtabcontent"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="0" />

            <com.antonyt.infiniteviewpager.InfiniteViewPager
                android:id="@+android:id/viewpager"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="1" />
        </LinearLayout>
    </TabHost>

</LinearLayout> 
```

并创建了空的 TabFragments (tab.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="0dp"
    android:layout_height="0dp" >

</LinearLayout> 
```

所以现在切换标签几乎与滑动无关。

唯一的缺点是，在更改选项卡后将 ViewPager 的当前位置设置为 0 的任何尝试都存在一个非常烦人的问题（应用程序毫无例外地崩溃了）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T12:48:17.513

[根据片段框架的作者，](https://stackoverflow.com/questions/6847460/fragments-within-fragments/6847770#6847770)不支持片段内部的片段。

据我所知，您有一个片段持有您的`ViewPager`，而后者又使用 a`PagerAdapter`正在返回的片段。这将无法可靠地工作。

要么将`ViewPager`片段移出片段（因此它直接由活动持有），要么切换到`PagerAdapter`不使用片段的实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-23T08:46:35.223

使用`getChildFragmentManager()`而不是`getFragmentManager()`.....所以你的代码变成了

```
mPagerAdapter = new InfinitePagerAdapter(
                new com.example.viewpagerintab.PagerAdapter(
                        getChildFragmentManager(), fragments)); 
```

干杯:)

# android - 将向量传递给在android中扩展ListActivity的类

> ID：12369826
> 
> 赞同：0
> 
> 时间：2012-09-11T12:33:31.097
> 
> 标签：android, android-intent

我编写了一个扩展 ListActivity 的类，用于使用在同一类中定义的数组在 android 手机中显示列表。我想调用传递向量或字符串数​​组的同一个类并显示它。

怎么通过和使用？？？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:42:52.133

如果数组只是字符串，您可以将它传递给 Intent Extra

**[Intent.putExtra](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20java.lang.String%5B%5D%29)**

# java - 使用可从 Applet 使用的 jar 扩展 Java

> ID：12369827
> 
> 赞同：0
> 
> 时间：2012-09-11T12:33:39.810
> 
> 标签：java, jar, applet, classpath, extend

我想用我自己制作的类来扩展 Java，以便可以从 Java 小程序中使用它们。我尝试将 JAR 文件放到 lib 和 lib/ext 文件夹中，但它们仍然不是全局可见的。

编辑：将文件放在 lib/ext 中可以工作（哎呀），但不是 lib。为什么？

为了让 Java 加载我的类，我还需要做些什么吗？

我希望使用企业包管理在客户端上注册此 JAR 我知道所有客户端都必须安装 JAR 存档，这不是问题。

# java - Joda-Time：获取每月的第一个/第二个/最后一个星期日

> ID：12369844
> 
> 赞同：7
> 
> 时间：2012-09-11T12:34:37.500
> 
> 标签：java, date, datetime, jodatime

在纯 Java 中，我有这段代码来获取本月的最后一个星期日。

```
Calendar getNthOfMonth(int n, int day_of_week, int month, int year) {
    Calendar compareDate = Date(1, month, year);
    compareDate.set(DAY_OF_WEEK, day_of_week);
    compareDate.set(DAY_OF_WEEK_IN_MONTH, n);
    return compareDate;
}
// Usage
Calendar lastSundayOfNovember = getNthOfMonth(-1, SUNDAY, NOVEMBER, 2012) 
```

什么是使用 达到相同结果的**干净优雅**的方法[`Joda-Time`](http://www.joda.org/joda-time/)？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-08-21T08:45:28.530

这是一篇相当老的帖子，但可能这个答案会对某人有所帮助。使用替换 Joda-Time 的 java.time 类。

```
private static LocalDate getNthOfMonth(int type, DayOfWeek dayOfWeek, int month, int year){
    return LocalDate.now().withMonth(month).withYear(year).with(TemporalAdjusters.dayOfWeekInMonth(type, dayOfWeek));
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T12:56:22.803

```
public class Time {
public static void main(String[] args) {
    System.out.println(getNthOfMonth(DateTimeConstants.SUNDAY, DateTimeConstants.SEP, 2012));
}

public static LocalDate getNthOfMonth(int day_of_week, int month, int year) {
    LocalDate date = new LocalDate(year, month, 1).dayOfMonth()  
             .withMaximumValue()
             .dayOfWeek()
             .setCopy(day_of_week);
    if(date.getMonthOfYear() != month) {
        return date.dayOfWeek().addToCopy(-7);
    }
    return date;
}
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-11T15:03:20.470

你可以尝试这样的事情：

```
public class Foo {

  public static LocalDate getNthSundayOfMonth(final int n, final int month, final int year) {
    final LocalDate firstSunday = new LocalDate(year, month, 1).withDayOfWeek(DateTimeConstants.SUNDAY);
    if (n > 1) {
      final LocalDate nThSunday = firstSunday.plusWeeks(n - 1);
      final LocalDate lastDayInMonth = firstSunday.dayOfMonth().withMaximumValue();
      if (nThSunday.isAfter(lastDayInMonth)) {
        throw new IllegalArgumentException("There is no " + n + "th Sunday in this month!");
      }
      return nThSunday;
    }
    return firstSunday;
  }

  public static void main(final String[] args) {
    System.out.println(getNthSundayOfMonth(1, DateTimeConstants.SEPTEMBER, 2012));
    System.out.println(getNthSundayOfMonth(2, DateTimeConstants.SEPTEMBER, 2012));
    System.out.println(getNthSundayOfMonth(3, DateTimeConstants.SEPTEMBER, 2012));
    System.out.println(getNthSundayOfMonth(4, DateTimeConstants.SEPTEMBER, 2012));
    System.out.println(getNthSundayOfMonth(5, DateTimeConstants.SEPTEMBER, 2012));
  }
} 
```

输出：

```
2012-09-02
2012-09-09
2012-09-16
2012-09-23
2012-09-30 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-17T06:44:23.783

与乔达

假设我们有一个约会：

```
DateTime date = new DateTime(2017, 6, 1, 0, 0, 0); 
```

`首先我们需要知道该月是否有 31、30、28 或 29 天：

```
int lastofMonth = date.dayOfMonth().getMaximumValue(); 
```

从这里我们创建一个新的日期：

```
DateTime endOfMonth = new DateTime(2017, 6, lastOfMonth, 0, 0, 0); 
```

我们找出最后一天是星期几：

```
int whatDayIsLast = endOfMonth.getDayOfWeek(); 
```

现在我们可以创建一个日期，它将是该月最后一个星期日的日期：

```
DateTime lastSunday = new DateTime(2017, 6, lastOfMonth - whatDayIsLast, 0, 0, 0); 
```

对于我的示例（2017 年 6 月），结果将是：

```
DateTimeFormatter dtf = DateTimeFormat.forPattern("yyyy-MM-dd");
System.out.println(dtf.print(lastSunday); 
```

2017-06-25

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-11T15:15:42.850

```
 static LocalDate getNthOfMonth(int n, int day_of_week, int month, int year)
   {
      if (n == -1)
      {
         return getNthOfMonth(0, day_of_week, month + 1, year);
      }
      final LocalDate compareDate = new LocalDate(year, month, 1);
      if (compareDate.getDayOfWeek() > day_of_week)
      {
         return compareDate.withDayOfWeek(day_of_week).plusDays(7 * n);   
      }
      else
      {
         return compareDate.withDayOfWeek(day_of_week).plusDays(7 * (n - 1));    
      }
   } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-08-06T22:13:55.067

// 以下方法将给出给定月份和年份的最后一个星期日

```
public Date getLastSunday(int month, int year) {
    Calendar cal = Calendar.getInstance();
    cal.set(year, month + 1, 1);
    int dayOftheWeek = cal.get(Calendar.DAY_OF_WEEK);
    int val = dayOftheWeek == Calendar.SUNDAY ? -7: -(dayOftheWeek-1);
    cal.add(Calendar.DAY_OF_MONTH, val);
    return cal.getTime();
} 
```

// `obj.getLastSunday(Calendar.OCTOBER, 2014);`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-12-27T17:46:41.037

## 使用 Java-8 `java.time`API的解决方案

***获取指定年份和月份最后一个星期日的本地日期：***

为了使用Java的[现代日期时间 API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html)[`TemporalAdjusters.lastInMonth(DayOfWeek.SUNDAY)`](https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalAdjusters.html#lastInMonth-java.time.DayOfWeek-)实现这一点，您可以将作为参数传递给任何`LocalDate`指定的年份和月份。

```
import java.time.DayOfWeek;
import java.time.LocalDate;
import java.time.YearMonth;
import java.time.temporal.TemporalAdjusters;

public class Main {
    public static void main(String[] args) {
        // Test
        System.out.println(getLastSundayOfMonth(2020, 12));
    }

    public static LocalDate getLastSundayOfMonth(int year, int month) {
        return YearMonth.of(year, month)
                .atEndOfMonth() //Returns a LocalDate at the end of the month
                .with(TemporalAdjusters.lastInMonth(DayOfWeek.SUNDAY));
    }
} 
```

**输出：**

```
2020-12-27 
```

我曾经[`YearMonth#atEndOfMonth`](https://docs.oracle.com/javase/8/docs/api/java/time/YearMonth.html#atEndOfMonth--)得到`LocalDate`. 代替这个，[`YearMonth#atDay`](https://docs.oracle.com/javase/8/docs/api/java/time/YearMonth.html#atDay-int-)也可以使用。

***获取指定年份和月份的第 n 周（例如第 2 周四）的本地日期：***

您可以[`TemporalAdjusters#dayOfWeekInMonth`](https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalAdjusters.html#lastInMonth-java.time.DayOfWeek-)作为参数传递给任何`LocalDate`指定的年份和月份。

```
import java.time.DayOfWeek;
import java.time.LocalDate;
import java.time.YearMonth;
import java.time.temporal.TemporalAdjusters;

public class Main {
    public static void main(String[] args) {
        // Test
        System.out.println(localDateOnNthDayOfWeekOfMonth(DayOfWeek.THURSDAY, 2, 2020, 12));
    }

    public static LocalDate localDateOnNthDayOfWeekOfMonth(DayOfWeek dayOfWeek, int ordinal, int year, int month) {
        return YearMonth.of(year, month)
                .atEndOfMonth() // Returns a LocalDate at the end of the month
                .with(TemporalAdjusters.dayOfWeekInMonth(ordinal, dayOfWeek));
    }
} 
```

**输出：**

```
2020-12-10 
```

**[从Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解 Java-8 日期时间 API 。

**Java 6 或 7 用户注意事项：**

出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，您可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目工作并且您的 Android API 级别仍然不兼容 Java-8，请通过脱糖和[How to use ThreeTenABP in Android Project检查](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)[可用的 Java 8+ API](https://developer.android.com/studio/write/java8-support-table)。

# c# - WPF RichTextBox/FlowDocument 对添加的特定文本执行某些操作

> ID：12369846
> 
> 赞同：0
> 
> 时间：2012-09-11T12:34:40.663
> 
> 标签：c#, wpf, richtextbox, flowdocument

我正在尝试扩展 RichTextBox 以添加一些功能，并且需要能够在输入某些字符时调用函数。例如，每次用户输入“;”时，我都想调用该函数。

我知道我可以`OnTextChanged(object sender, TextChangedEventArgs e)`为事件添加一个方法`TextChanged`，但这似乎并不能真正解决我的问题，因为我似乎无法找到一个好的方法来判断这些变化是什么。我可以检查整个文档是否有“；” 每次文本更改时，但这对我来说似乎有点低效。

有没有人有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:53:15.007

你应该看看[KeyDown 事件](http://msdn.microsoft.com/en-us/library/system.windows.uielement.keydown.aspx)

```
private void richTextBox_KeyDown(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Oem1)
    {
        DoSomething();
    }
} 
```

# python - 由于随后的 .clear() 无法遍历孩子的孩子？

> ID：12369852
> 
> 赞同：0
> 
> 时间：2012-09-11T12:35:01.263
> 
> 标签：python, xml-parsing, lxml, iterparse

我正在尝试使用本教程的[“事件驱动解析”](http://lxml.de/tutorial.html#event-driven-parsing)部分中描述的模式。`lxml`

在我的代码中，我正在调用一个可以使用该`iterchildren()`方法在元素上递归运行的函数。我将在这里使用两个嵌套循环进行说明。

这按预期工作：

```
xml = StringIO("<root><a><b>data</b><c><d/></c></a><a><z/></a></root>")
for ev, elem in etree.iterparse(xml):
    if elem.tag == 'a':
        for c in elem.iterchildren():
             for gc in c.iterchildren():
                  print gc 
```

输出是`<Element d at 0x2df49b0>`。

但如果我`.clear()`最后添加：

```
for ev, elem in etree.iterparse(xml):
    if elem.tag == 'a':
        for c in elem.iterchildren():
             for gc in c.iterchildren():
                  print gc
    elem.clear() 
```

-- 它不打印任何东西。为什么会这样，我该怎么做才能解决这个问题？

笔记：

*   我可以跳过`iterchildren`并执行`for c in elem`or `for c in list(elem)`，效果相同。
*   我需要使用迭代方法来保持低内存使用率。
*   在实际用例中，我正在使用属性进行元素查找：

    ```
    if elem.attrib.get('id') == elem_id:
        return _get_info(elem) 
    ```

我想解释一下如何`clear`在处理内部元素之前设法擦除它们，以及如何在需要处理祖先时将它们保存在内存中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:35:01.263

问题是`iterparse`默认情况下会产生`end`事件。对于子元素`end`，事件的生成早于其祖先：

```
>>> for ev, elem in etree.iterparse(xml):
       print elem

<Element b at 0x38fe320>
<Element d at 0x38fe0f0>
<Element c at 0x38fe2d0>
<Element a at 0x38fe190>
<Element z at 0x38fe230>
<Element a at 0x38fe3c0>
<Element root at 0x2df48c0> 
```

在这个简单的情况下，可以通过依赖`start`事件来解决问题：

```
for ev, elem in etree.iterparse(xml, events=('start',)):
    ... 
```

但是，链接的文档说，

> 请注意，在收到开始事件时，元素的文本、尾部和子项不一定存在。只有结束事件才能保证元素已被完全解析。

这可能意味着应该处理`start`和事件以允许仅在安全时调用。我正在考虑实现某种堆栈并在事件中推送东西，在事件中弹出和ing 。`end``clear()``start``clear``end`

我非常欢迎使用这个或其他想法显示实现的答案。

**注意**：最简单的方法就是将`clear`调用缩进`if`. 这将允许访问孙子，但所有不相关的元素将保持未`clear`编辑状态。

* * *

**编辑**

我目前正在以下列方式使用状态保持变量：

```
found = False
for event, elem in etree.iterparse(source, events=('start', 'end')):
    if event == 'start':
        if elem.attrib.get('id') == elem_id:
            found = True
    else:
        if elem.attrib.get('id') == elem_id:
            return _get_info(elem)
        if not found:
            elem.clear() 
```

# c# - 跨域设置文件夹权限

> ID：12369853
> 
> 赞同：2
> 
> 时间：2012-09-11T12:35:01.910
> 
> 标签：c#, .net, permissions, cross-domain

我有一个应用程序，它用于执行许多操作以隔离域上的用户，例如创建 Active Directory 结构、用户和组以及将用户分配到不同的组。

在 AD 中创建所有内容后，我想为我新创建的 AD 组之一分配对新创建文件夹的访问权限。

我想从不同域的本地机器上运行应用程序，而不是登录到域中的机器上然后从那里运行应用程序。

除了设置访问规则之外，我的应用程序中的所有内容似乎都可以在本地机器上正常工作；失败了：

“部分或全部身份参考无法翻译”。

从域内运行时，代码运行良好。我也尝试过使用模拟，但这没有区别

```
if (Directory.Exists(sDirectory))
    {
      using (Impersonation impUser = new Impersonation(sAdminUserName, _sDomain, sAdminPassword))
      {
        DirectoryInfo diClientDirectory = new DirectoryInfo(sDirectory);
        DirectorySecurity dsClientDirectory = diClientDirectory.GetAccessControl();
        FileSystemAccessRule fsAccessRules = new FileSystemAccessRule(sSecurityGroup, FileSystemRights.FullControl, (InheritanceFlags.ObjectInherit | InheritanceFlags.ContainerInherit), PropagationFlags.InheritOnly, AccessControlType.Allow);

        **dsClientDirectory.AddAccessRule(fsAccessRules);  //THIS LINE THROWS THE EXCEPTION**
        diClientDirectory.SetAccessControl(dsClientDirectory);
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:17:26.347

这通常意味着授予权限的组不存在或无法在目标计算机上解析。检查目标域中是否存在具有该名称的组或域之间是否存在合适的信任关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:29:24.367

就像阿克顿说的，检查你的广告之间的信任关系。

此外，检查您的运行环境。当我不得不通过 C# 接触 AD 时，我遇到了这样的问题：如果用户没有权限在另一个 AD 上进行这种修改，它将失败。

最后一点，组名和路径。您的组名是否包含域名 (sSecurityGroup) ？也许您的目录路径有路径问题（sDirectory）？

# javascript - Internet Explorer 8\. 事件

> ID：12369861
> 
> 赞同：0
> 
> 时间：2012-09-11T12:35:30.047
> 
> 标签：javascript, internet-explorer, events, cross-browser

所以我有了这个网站，它是使用煎茶编辑器（煎茶动画师）创建的。

他们并不真正支持 IE，所以我决定自定义编辑它，因为我们的大多数客户仍然使用 IE7+。

现在的主要问题是它在 Chrome、Safari、FF 和 IE8/9 中加载良好，但似乎没有一个事件起作用。

我首先尝试进行一些条件检查（我在此处找到）以查看它是什么浏览器并添加如下事件：

```
function bindEvent(el, eventName, eventHandler) {
   if (el.addEventListener){
       el.addEventListener(eventName, eventHandler, false); 
   } else if (el.attachEvent){
       el.attachEvent("on"+eventName, eventHandler);
   }
} 
```

不知何故，这段代码突然中断

```
if (el.addEventListener) { 
```

所以在那之后我想等等，jQuery 应该有这个内置的。所以我从谷歌添加了 jQuery 的 CDN。

在我的 JS 中，我添加了

```
$(document).ready(function () {
   // load my start function here
}); 
```

那行得通，所以至少页面加载了它的所有内容。

现在我想用

```
$(element).click(function () {
   alert('hello');
}); 
```

但这在 IE 或 Firefox 中根本不起作用（mouseup 也不起作用）（在这种情况下，IE 比 FF 更好）

我已经不知道了，整个 IE 的事情都打破了一切，而且一个只能在 Chrome 中运行的网站是不可能的......这真的很令人沮丧：P

该网站的链接可以在这里找到：[链接](http://content.redactiepartners.nl/FDMag/ "关联")

这是完整的JS代码：

```
if (typeof (AN) === 'undefined') {
   AN = {};
}
AN.Controller = {
   scenes: {},
   scenesArray: [],
   currentSceneID: -1,
   olElement: null,
   events: {},
   useOrmma: false,
   setConfig: function (configData) {
      this.events = configData.events;
      this.olElement = document.getElementById(configData.parentId);
      var liElements = this.olElement.children;
      if (configData.ormma) {
        this.useOrmma = true;
    }
    var scene;
    for (var i = 0; i < configData.scenes.length; i++) {
        scene = configData.scenes[i];
        scene.element = liElements[i];
        this.scenes[scene.id] = scene;
        this.scenesArray.push(scene);
    }
    this.setupListeners();
    this.startSceneByID(this.scenesArray[0].id);
},
runningAnimationCount: 0,
browser: 'webkit',
setupListeners: function () {
    var me = this;
    var eventName = "webkitAnimationEnd";
    if (document.body.style.MozAnimationName !== undefined) {
        eventName = "animationend";
        this.browser = "moz";
    }

    function addMousemoveListenerTo(scene) {
        /*bindEvent(scene.element, 'mousemove', function (event) {
            scene.mousemoveAction(me, event);
        }, false);*/

    }
    var scene;
    for (var i = 0; i < this.scenesArray.length; i++) {
        scene = this.scenesArray[i];
        if (scene.mousemoveAction) {
            addMousemoveListenerTo(scene);
        }
    }

    function addListenerTo(element, eventType, aFunction) {
        /*bindEvent(element, eventType, function (event) {
            aFunction(me, event);
        });*/
        $("#AN-sObj-17984").live("click", function(){
            AN.Controller.startSceneByID(2);
        });
    }

    var element, event;
    for (var i = 0; i < this.events.length; i++) {
        event = this.events[i];
        element = document.getElementById(event.id);
        addListenerTo(element, event.type, event.handler);
    }
},
onAnimationEnd: function () {
    this.runningAnimationCount--;
    if (this.runningAnimationCount === 0) {
        this.onSceneFinish();
    }
},
startSceneByID: function (sceneID) {
    var me = this;
    if (sceneID === this.currentSceneID) {
        this.scenes[sceneID].element.setAttribute('class', 'run restart');
        setTimeout(function () {
            me.runningAnimationCount = me.scenes[sceneID].animationCount;
            me.scenes[sceneID].element.setAttribute('class', 'run');
            if (me.scenes[sceneID].startAction) {
                me.scenes[sceneID].startAction(me);
            }
            if (me.scenes[sceneID].animationCount === 0) {
                me.onSceneFinish();
            }
        }, 0);
        return;
    } else if (this.currentSceneID !== -1) {
        this.scenes[this.currentSceneID].element.setAttribute('class', '');
    }
    this.runningAnimationCount = this.scenes[sceneID].animationCount;
    this.currentSceneID = sceneID;
    var nextScene = this.scenes[sceneID];
    if (this.browser === 'moz') {
        nextScene.element.setAttribute('class', 'run restart');
        var unused = nextScene.element.offsetHeight;
        nextScene.element.setAttribute('class', 'run');
    } else {
        console.log(nextScene.element);
        nextScene.element.setAttribute('class', 'run');
    }
    if (this.useOrmma) {
        this.ormmaNextScene(nextScene);
    }
    if (nextScene.startAction) {
        nextScene.startAction(this);
    }
    if (nextScene.animationCount === 0) {
        this.onSceneFinish();
    }
},
replayScene: function () {
    this.startSceneByID(this.currentSceneID);
},
onSceneFinish: function () {
    if (this.scenes[this.currentSceneID].endAction) {
        this.scenes[this.currentSceneID].endAction(this);
    }
},
goToNextScene: function () {
    var nextIndex = this.scenesArray.indexOf(this.scenes[this.currentSceneID]) + 1;
    var nextScene;
    if (nextScene = this.scenesArray[nextIndex]) {
        this.startSceneByID(nextScene.id);
    }
},
goToURL: function (aURL) {
    document.location.href = aURL;
},
ormmaNextScene: function (nextScene) {
    var currentState = ormma.getState();
    if (nextScene.dimensions.expanded) {
        var maxSize = ormma.getMaxSize();
        if (currentState !== 'expanded') {
            ormma.expand({
                x: 0,
                y: 0,
                width: maxSize.width,
                height: maxSize.height
            });
        }
        var transform = "";
        var elementHeight = nextScene.element.offsetHeight;
        var elementWidth = nextScene.element.offsetWidth;
        var y = (maxSize.height - elementHeight) / 2;
        var x = (maxSize.width - elementWidth) / 2;
        transform += " translate3d(" + Math.round(x) + "px," + Math.round(y) + "px,0)";
        if (nextScene.dimensions.fit) {
            var scaleFactor = Math.min(maxSize.width / elementWidth, maxSize.height / elementHeight);
            transform += " scale3d(" + scaleFactor + "," + scaleFactor + ",1)";
        }
        nextScene.element.style.webkitTransform = transform;
    } else {
        if (currentState === 'expanded') {
            ormma.close();
        }
        ormma.resize(nextScene.dimensions.width, nextScene.dimensions.height);
    }
}
};

function loadData() {
var configData = {
    parentId: 'AN-sObj-parentOl',
    ormma: false,
    scenes: [//lots of config data
    ]
  };
  AN.Controller.setConfig(configData);
};

$(document).ready(function() {
   loadData();
   $("area[rel^='prettyPhoto']").prettyPhoto({
      social_tools: '',
      show_title: false,
      theme: 'light_rounded'
   });
});` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:45:11.723

编码：

```
function bindEvent(el, eventName, eventHandler) {
   if (el.addEventListener){
       el.addEventListener(eventName, eventHandler, false); 
   } else if (el.attachEvent){
       el.attachEvent("on"+eventName, eventHandler);
   }
} 
```

很好。它失败的唯一方法`if (el.addEventListener)`是 if`el`不是 DOM 元素。

当我转到您引用的实际页面时，我看到报告了一些 javascript 错误。第一个发生是因为您在从此代码调用时传递`null`了：`el``addListenerTo()`

```
for (var i = 0; i < this.events.length; i++) {
    event = this.events[i];
    element = document.getElementById(event.id);
    addListenerTo(element, event.type, event.handler);
} 
```

那是因为`document.getElementById(event.id);`在页面中找不到对象。

# view - Drupal 7 jCarousel 视图以及如何将标题作为标题添加到幻灯片

> ID：12369869
> 
> 赞同：1
> 
> 时间：2012-09-11T12:35:49.780
> 
> 标签：view, drupal-7, field, jcarousel

我有一个 jCarousel 块，它使用格式化为从“搜索结果”显示“内容”的视图。我一直在尝试配置视图，以便在轮播幻灯片下方显示图像标题。

轮播视图的格式为“搜索结果”显示：“内容”。我启用了“强制使用字段”，并且“内容：标题”列在“字段”部分下。

我正在使用的“内容类型”图库图像基于图像类型并具有默认的“标题”字段（节点模块元素字段）。但是，“标题”字段没有管理显示选项 - 我做错了吗？

如果我应该发布任何其他详细信息，请告诉我。

如果有人能提供一些指示，我将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-13T19:58:25.793

将标题显示为标题的最佳方法是将“格式 > 显示设置”从“内容”更改为“字段”。

在您的视图设置选项卡下：

格式
格式：jCarousel | 设置
显示：**字段**| 设置

# android - 具有离线数据库的android字典应用程序

> ID：12369879
> 
> 赞同：6
> 
> 时间：2012-09-11T12:36:26.707
> 
> 标签：android, sqlite, database

我想开发一个只使用离线数据库的安卓英语词典应用程序。我的意思是说，它不必重定向到 WordWeb 之类的在线词典。有谁知道我应该怎么做才能存储我的话？我正在考虑使用 SQLite，因为它是移动的。但是如果这里有人已经做过或做过我想做的事情，你能给我一些专家建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T12:53:23.163

[http://developer.android.com/resources/samples/SearchableDictionary/src/com/example/android/searchabledict/DictionaryDatabase.html](http://developer.android.com/resources/samples/SearchableDictionary/src/com/example/android/searchabledict/DictionaryDatabase.html)

我使用了 developer.android.com 的这段代码。希望它也能帮助你。

编辑：此页面不再可用，但示例本身在 Github 上[。](https://github.com/android/platform_development/tree/master/samples/SearchableDictionary)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:46:50.173

我会使用 SQLite，这可能是在 Android 上最简单、最直接的方法。当然，此解决方案的复杂性取决于您的确切需求。如果您只需要一个非常简单的字典，那么您可以使用带有基本查询的简单数据库模式。

想到的另一件事是 Trie 数据结构，您可能想研究一下：[http](http://en.wikipedia.org/wiki/Trie#Dictionary_representation) ://en.wikipedia.org/wiki/Trie#Dictionary_representation 。但是使用它来解决这个问题可能不值得麻烦，我猜 SQLite 解决方案的性能足以满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-31T11:07:11.207

我已经对我的字典做了这个：

[https://play.google.com/store/apps/developer?id=e-Biene%20DEV&hl=en](https://play.google.com/store/apps/developer?id=e-Biene%20DEV&hl=en)

您可以转换为您的简单数据库 tblLanguage1[word, translation] tblLanguage2[word, translation]

到（SQLite 格式 [从模拟器中提取它]，然后将此转换后的 SQLite 数据库附加到您的应用程序离线）。

这将是快速和快速的搜索。

和使用：在模拟器中创建的数据库，其结构如下：表：

lang1_Content lang1_segments lang1_segdir

使用这个而不是简单的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T12:48:53.923

试试 Google API 示例，我知道他们有一个 Dictionary 应用程序。我很确定它也离线了。我必须使用离线缓存构建一些东西，我使用 JAVA 出色的 XML 解析器将东西加载到 SQLite 数据库中。当用户有互联网连接时，它会下载一个新的 XML 并使用它来更新数据库。但是，您可以在应用程序中存储任何类型的文件。

[http://developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html) 我正在谈论的示例称为可搜索字典。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T12:51:41.890

您的主要问题是指定将存储您的字典的要素。

Android 提供了很多方法来存储您的数据，例如：

*   [共享首选项](http://developer.android.com/guide/topics/data/data-storage.html#pref)*   保存在设备[内部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)或[外部存储中的文件](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)*   [SQLite 数据库](http://developer.android.com/guide/topics/data/data-storage.html#db)

您还可以创建一个静态数据库并将其存储在您的`assets`文件夹中，如[本文](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)所述。

您还可以检查 Searchable Dictionary ，`android-samples`这是实现应用搜索的一个很好的示例，并且还描述了一些存储数据的技术。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-17T04:16:17.723

最好的方法是 - 将您的数据保存在 json 文件中的文件中并将其保存在网络上，或者您也可以将其上传到 googledrive 或 Dropbox 并公开，然后当用户第一次打开应用程序时，下载json 文件并将 json 中的数据插入 sql lite db。这样您就可以将 sql lite 用于离线数据。

# c# - C# WebSocket Mac OS X

> ID：12369881
> 
> 赞同：0
> 
> 时间：2012-09-11T12:36:28.787
> 
> 标签：c#, macos, mono, websocket, mamp

我正在使用 momo mac 项目，在 OS X Mountain Lion 上开发和编译 C# websocket。
我使用了来自[Websocket 服务器的示例 websocket：永远不会调用 web socket 上的 onopen 函数](https://stackoverflow.com/questions/2211898/c-sharp-websocket-server)来了解它是如何工作的。我的问题是，我不知道如何托管 websocket。

我把它放在我的 MAMP localhost 文件夹的根目录中，并链接到它，就像在示例代码中一样，在这个路径**localhost:8181/websession**。

问题是套接字只是立即触发 onclose 事件。没有调用 onerror 函数，所以没有错误数据。

1.  如何在 OS X 上运行 C# 程序？
2.  我应该把 WebSocket 放在哪里？

# sparql - Querying RDF using SPARQL

> ID：12369895
> 
> 赞同：1
> 
> 时间：2012-09-11T12:37:17.860
> 
> 标签：sparql, dotnetrdf

Hi I am referencing the material on [http://www.dotnetrdf.org/content.asp?pageID=Querying%20with%20SPARQL](http://www.dotnetrdf.org/content.asp?pageID=Querying%20with%20SPARQL), and I need a way to read the content of an RDF file using SPARQL.

How can I set the path for an exsiting RDF file?

Many Thanks,

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T19:50:20.530

As @cygri notes you should look at the [Reading RDF](http://www.dotnetrdf.org/content.asp?pageID=Reading%20RDF) documentation.

Here is the first example from the [Querying with SPARQL](http://www.dotnetrdf.org/content.asp?pageID=Querying%20with%20SPARQL) page which shows loading a file to query:

```
using System;
using VDS.RDF;
using VDS.RDF.Parsing;
using VDS.RDF.Query;

public class InMemoryTripleStoreExample
{
    public static void Main(String[] args)
    {
        TripleStore store = new TripleStore();

        //Load data from a file
        store.LoadFromFile("example.rdf");

        //Execute a raw SPARQL Query
        //Should get a SparqlResultSet back from a SELECT query
        Object results = store.ExecuteQuery("SELECT * WHERE {?s ?p ?o}");
        if (results is SparqlResultSet)
        {
            //Print out the Results
            SparqlResultSet rset = (SparqlResultSet)results;
            foreach (SparqlResult result in rset)
            {
                Console.WriteLine(result.ToString());
            }
        }

        //Use the SparqlQueryParser to give us a SparqlQuery object
        //Should get a Graph back from a CONSTRUCT query
        SparqlQueryParser sparqlparser = new SparqlQueryParser();
        SparqlQuery query = sparqlparser.ParseFromString("CONSTRUCT { ?s ?p ?o } WHERE {?s ?p ?o}");
        results = store.ExecuteQuery(query);
        if (results is IGraph)
        {
            //Print out the Results
            IGraph g = (IGraph)results;
            foreach (Triple t in g.Triples)
            {
                Console.WriteLine(t.ToString());
            }
            Console.WriteLine("Query took " + query.QueryExecutionTime.ToString());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T18:13:26.963

Answer is probably here: [Reading RDF](http://www.dotnetrdf.org/content.asp?pageID=Reading%20RDF)

# java - Java重载覆盖查询

> ID：12369897
> 
> 赞同：1
> 
> 时间：2012-09-11T12:37:25.587
> 
> 标签：java

1）为什么以下既不能重载也不能相互覆盖：

```
void meth(List<Integer> a){}
 void meth(List<String> a){} 
```

如果上述参数导致相同类型的擦除，为什么不能覆盖它们。
如果它们不能被覆盖，这意味着参数在某种程度上是不同的，因此如果在同一个类中则应该重载，但不是这样。那么上面不是冲突吗？

2）为什么在覆盖中显示以下行为？

```
a)void test(int a){}  //parent class method  
public/protected void test(int a){}  //child class method  (Overridden)

 b)void test(int a){}  //parent class method  
private void test(int a){}  //child class method (not overridden)  

c)public test(int a){}  //parent class method  
 protected void test(int a){}  //child class method (not overridden) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:41:59.513

1- IN java - 泛型由擦除实现。这意味着两个版本的实际签名评估为

`void meth(List a){}`

显然，您不能在同一个类定义中拥有两个具有确切签名的方法。

2\. 如果您指定，您的示例都将导致编译时错误，除了第一个错误`public`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:42:46.097

1）。它们不能重载，因为使用空列表或空值列表将无法定义调用哪个方法。它们不能被覆盖，因为它们具有不同的签名并且受到限制。

2）。因为子方法的可见性低于父方法，并且按语言规范 - 他们不能。

# .net - 邮件合并，查询字符串返回不正确的记录集

> ID：12369899
> 
> 赞同：0
> 
> 时间：2012-09-11T12:37:39.253
> 
> 标签：.net, ms-word, mailmerge, word-automation

我在 Word 2007 中遇到了与单词自动化\邮件合并、QueryString 命令和 SQL 语句相关的问题。

如果我使用 select 和 "=" 运算符，一切都会按预期工作。

```
doc.MailMerge.DataSource.QueryString =
"SELECT * FROM \"TableName\" WHERE \"Id\" = 10"; 
```

如果我使用 select 和“LIKE”运算符，它不会：

```
doc.MailMerge.DataSource.QueryString =
"SELECT * FROM \"TableName\" WHERE \"EmailAddress\" LIKE '%com%'"; 
```

看起来 Word 不理解“LIKE”运算符并跳过它。它返回表中的所有记录。

有没有办法在查询字符串中使用“like”？

**更新：**实际上，MailMerge.Execute 与 LIKE 语句一起正常工作。问题有点不同。系统中有一个地方我们显示 RecordCount (doc.MailMerge.DataSource.RecordCount)，它返回不正确的值（它返回表中所有记录的计数）。因此，如果 LIKE 语句在 QueryString 中使用，Word 似乎无法确定记录数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:38:25.023

您可以做什么取决于数据源。

如果它是可识别的 Word 文档类型（.doc、.rtf、.docx 等）或 Word 通过文本文件转换器打开的内容，Word 使用非常简单的 SQL 内部方言，只允许您定义所需的字段，简单`WHERE`条件，和一个简单的`ORDER BY`. （即，大致可以在“排序/过滤”对话框中执行的操作）。你不明白`"LIKE"`

如果它是 Jet 数据源，例如 Access 或 Excel，您将获得 SQL 的 Jet 方言，以及 Jet 通配符（? 和 *）或 SQL 标准通配符（_ 和 %），具体取决于源和连接方式. 通常，您应该得到`LIKE`，并且您应该能够使用 _ 和 %，但不能用于通过 DDE 连接的某些数据库。

对于 SQL Server、Oracle 等其他一切，理论上您会得到适合该服务器的 SQL 方言。但是 Word 用于处理 OLE DB 查询的代码（Office 数据源对象，ODSO）可能会在发送查询字符串之前弄乱它。

从评论中合并的一些注释：

Word 的“排序/筛选”对话框中的“包含”选项会导致 SQL 中出现 LIKE 子句。对于 SQL Server，SQL 子句是这样的：

```
"LIKE N'%com%'" 
```

（注意“N”）。

一个简单的示例在这里正确过滤（Word 2010+SQL Server 2008 R2，使用默认的 OLE DB 连接和旧的 SQLOLEDB.1 提供程序。如果您通过 ODBC 连接并且列是 Unicode 列（NVARCHAR 等），则会出现问题.) 但是你不会在 Unicode 列中看到任何数据。如果列类型是长类型（例如备忘录）并且 % 需要匹配 128 个字符或类似的字符，则可能会出现问题 - 不记得规则是什么在这种情况下适用于 SQL Server。

SQL Server Profiler 可以成为调查意外查询结果的有用服务器端工具。在这种情况下，OP 发现查询按预期执行，但`RecordCount`( `doc.MailMerge.DataSource.RecordCount`) 返回表中所有记录的计数，而不是检索到的记录数。

是否`Recordcount`返回正确的值取决于 OLE DB 提供程序和/或其设置。由于这个原因，您可能会看到 VBA 示例代码努力测试“最后一条记录”而不是依赖计数。

就个人而言，如果有必要，我会考虑执行一个单独的查询来获取计数（*），但当然，当您进行检索时，实际记录计数可能会发生变化。（FWIW 我怀疑您是否可以在这种情况下使用 SQL 事务来提供帮助，但它可能值得一试）。

# iphone - 当我删除我的 iOS 应用程序推送通知状态仍然存在

> ID：12369900
> 
> 赞同：29
> 
> 时间：2012-09-11T12:37:39.143
> 
> 标签：iphone, ios, xcode, api, uninstallation

当我第一次使用 Xcode 安装我的 iOS 应用程序时，我的 iPhone 会询问我是否要启用推送通知。

我可以发送通知，并且徽章会显示我发送的号码。

当我从我的 iPhone 中删除应用程序并在 Xcode 中重建它并在我的 iPhone 上重新安装它（使用 Xcode）时：

*   设备不会询问我是否要启用推送。
*   徽章在那里并**记住**最后一个数字。

我在新设备（安装了 IPA）上尝试了相同的应用程序，它要求我提供权限。

我怎样才能完全让我的设备忘记应用程序？

谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-07-10T00:28:17.067

从 Apple 的文档中针对 iOS 7 及更高版本进行了更新：

> 在 iOS 7 及更高版本上，启用推送的应用第一次注册推送通知时，iOS 会询问用户是否希望接收该应用的通知。一旦用户对此警报做出响应，除非设备已恢复或应用程序已卸载至少一天，否则它不会再次显示。
> 
> 如果你想模拟你的应用程序的首次运行，你可以让应用程序卸载一天。您可以按照以下步骤实现后者，而无需实际等待一天：
> 
> 1.  从设备中删除您的应用程序。
> 2.  完全关闭设备并重新打开。
> 3.  前往“设置”>“通用”>“日期和时间”，将日期提前一天或更长时间。
> 4.  再次完全关闭设备，然后重新打开。

对于 iOS 5 和 iOS6：

> 通过从备份中恢复设备来重置推送通知权限警报 (r. 11450187)。以下是有效执行此操作的步骤：
> 
> 1.  使用 Xcode Organizer 在设备上安装您的应用程序。关键是第一次安装应用程序而不运行它。
> 2.  使用 iTunes 备份设备。
> 3.  运行应用程序。将显示推送通知权限警报。
> 4.  当您要重置推送通知权限警报时，请从您在第一步中创建的备份中恢复设备。

[https://developer.apple.com/library/content/technotes/tn2265/_index.html](https://developer.apple.com/library/content/technotes/tn2265/_index.html)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-11T13:01:37.550

有一个解决方法，包括将系统时间提前两天，重新启动设备，然后将系统时间改回当前时间。iOS 设计为每个应用程序每天只请求一次推送权限。

> 在 iOS 上重置推送通知权限警报 启用推送的应用程序首次注册推送通知时，iOS 会询问用户是否希望接收该应用程序的通知。一旦用户对此警报做出响应，除非设备已恢复或应用程序已卸载至少一天，否则它不会再次显示。
> 
> 如果你想模拟你的应用程序的首次运行，你可以让应用程序卸载一天。您可以通过将系统时钟提前一天或更长时间，完全关闭设备，然后重新打开设备来实现后者，而无需实际等待一天。

[http://developer.apple.com/library/ios/#technotes/tn2265/_index.html](http://developer.apple.com/library/ios/#technotes/tn2265/_index.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-04T23:13:27.613

我和你在同一条船上。我发现最有帮助的是稍微更改捆绑标识符。

示例：您的捆绑包标识符是 com.company.app。如果您需要测试启用推送通知，请将标识符更改为 com.company.app1。它将作为新应用安装并具有新的推送通知权限设置。

只需确保在完成测试后将其改回即可。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T12:51:16.413

首先，`iOS`记住`push settings,badge`值没有关系，你没有得到`push notification`。我确信还有其他问题。是的，`iOS`记住`push settings`并`badge`重视应用程序。当您第一次在设备上安装时，它会要求您确认推送。`badge`您可以通过调用重置值`setApplicationIconBadgeNumber:`

如果要重置`push settings`，则可以通过重置所有`setting`设备来完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-20T11:51:57.753

如果您有任何应用程序初始化代码（例如，当文档文件夹中没有可用的数据库时复制/初始化数据库。所以您知道它已重新安装）您可以将徽章计数重置为零。

同样，如果用户从包中手动删除 db 文件，或者您的应用程序没有此类初始化设置，这可能会失败。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-10T23:55:44.203

按照以下步骤通过以下步骤刺激您的应用程序的首次运行：

1）。从设备中删除您的应用程序。

2）。完全关闭设备并重新打开。

3）。前往“设置”>“通用”>“日期和时间”，将日期提前一天或更长时间。

4）。再次完全关闭设备，然后重新打开。

# .net - 有没有办法将 OpenCover 生成的代码覆盖率指标检索回 Jenkins？

> ID：12369901
> 
> 赞同：7
> 
> 时间：2012-09-11T12:37:46.243
> 
> 标签：.net, continuous-integration, jenkins, sonarqube, opencover

我正在开发一个`Jenkins`用作 CI 服务器的 .NET 项目。服务器正在按预期工作，但现在我正试图让它在**代码覆盖率低**的情况下发出警报。

我正在尝试的方法是`Sonar`用来执行`NUnit`and `OpenCover`，但是我需要将**代码覆盖率**指标从`Sonar`后面链接到`Jenkins`and 这就是问题所在。

AFAIK从`OpenCover`（**coverage-report.xml**）生成的报告原样，无法识别，`Jenkins`所以我想要做的是让他们通过将（**coverage-report.xml**）转换为（**emma ）的xsl文件进行交谈-report.xml** )`Jenkins`具有可以理解的插件。

虽然我不知道这是最好的方法。**更好的方法非常受欢迎；）**我面临着`block coverage`从 OpenCover 获取指标的问题（`Emma`需要这个指标）。

我已经设法将所需的所有其他指标`class, %`从转换为`method, %`，但我不确定是否可以从报告中获取。`line, %``OpenCover``Emma``block, %`

**谁能告诉我是否有可能，或者是否有更好的方法来实现我正在尝试做的事情（即，`Jenkins`当代码覆盖率低于一定百分比时发出构建警报）？**

提前致谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:14:55.943

看起来现在有一个工具可以将 OpenCover 报告转换为 Covertura XML [https://github.com/danielpalme/OpenCoverToCoberturaConverter/tree/master/OpenCoverToCoberturaConverter](https://github.com/danielpalme/OpenCoverToCoberturaConverter/tree/master/OpenCoverToCoberturaConverter)

讨论这个的线程。

[http://reportgenerator.codeplex.com/discussions/398788](http://reportgenerator.codeplex.com/discussions/398788)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T20:16:10.993

如果您从 sonar gallio 插件（来自[sonar C# 生态系统](http://docs.codehaus.org/display/SONAR/C%23+Ecosystem)）运行 OpenCover，则获取低代码覆盖率警报的简单解决方案可能是sonar buildbreaker [plugin](http://docs.codehaus.org/display/SONAR/Build+Breaker+Plugin)。当覆盖率低于警报阈值时，您将获得损坏的构建。此解决方案不允许在 jenkins 中获取图表或趋势，但同样，如果您使用声纳，您在声纳仪表板中拥有一切。希望能帮助到你

# ruby-on-rails - 在haml下划线模板中插入javascript时出现奇怪的错误

> ID：12369904
> 
> 赞同：2
> 
> 时间：2012-09-11T12:37:55.430
> 
> 标签：ruby-on-rails, backbone.js, haml, underscore.js

在haml下划线模板中插入javascript时出现奇怪的错误

这很完美：

```
.button{ :id => "<%= 'class_name' %>" } 
```

这给出了一个错误

```
.button{ :class => "<%= 'class_name' %>" } 
```

唯一的区别是我使用 class 而不是 id....

javascript错误：

```
Uncaught SyntaxError: Unexpected identifier 
```

更新：

<%= %> 来自下划线模板引擎。所以它不是erb或任何类型的东西。生成haml时我没有收到错误，但我用javascript得到了它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T17:13:25.693

Given`.button{ :id => "<%= 'class_name' %>" }`正在工作，我假设您已`:escape_attrs`设置为 false，并且可能`:attr_wrapper`设置为`"`，这将产生输出：

```
<div class="button" id="<%= 'class_name' %>"></div> 
```

给您带来麻烦的位`.button{ :class => "<%= 'class_name' %>" }`将产生：

```
<div class="%> 'class_name' <%= button"></div> 
```

当 Haml 将语法 ( ) 中的`class`元素与属性哈希 ( ) 的类条目的内容组合时，会导致问题。Haml 将后者视为一个空格分隔的列表，添加元素，然后对结果数组进行排序，产生您看到的输出。（像这样将列表视为空格分隔的列表对于“纯”HTML 来说是有意义的，但是当 javascript 框架以这种方式使用它时就会崩溃。排序的原因是为 Haml 的测试套件提供一致的类条目顺序。）`.``button``<%= 'class_name' %>``button`

一种解决方法是不要将`.`语法和`:class`属性哈希中的条目一起使用 - 只需使用`class`条目：

```
%div{ :class => "button <%= 'class_name' %>" } 
```

产生：

```
<div class="button <%= 'class_name' %>"></div> 
```

另一种解决方法（您已经发现）是从下划线模板中删除空格，因此 Haml 将其视为单个实体并且不会将其拆分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:44:53.137

这应该工作

```
.button{:class => "#{class_name}"} 
```

# android - 如何让editText插入一些外观

> ID：12369906
> 
> 赞同：1
> 
> 时间：2012-09-11T12:37:55.527
> 
> 标签：android, android-edittext

所以我不想有一个 editText 会自动做一些事情。

第一件事是它应该只允许插入数字。

第二个也是我认为更难的想法是，当用户插入例如 5 个数字时会添加一些符号。例如我写：

```
 12345 
```

然后程序应该添加一个标志

```
 12345- 
```

现在我可以输入更多了。

```
 12345-6789 
```

我正在用谷歌搜索 EditText 中的预定义文本，但我发现没有任何用处......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:50:56.897

对于 1) 添加 `android:inputType="number"`xml

**对于 2）您可以有两个不同的编辑文本，由-**和 xml分隔，`android:maxLength="5"`然后加入值

虽然我确信必须有一些更好的方法来做（2）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:18:52.583

所以我找到了菲利普评论的解决方案。你必须使用过滤器这样做。我的代码现在是这样的：

```
 InputFilter filter = new InputFilter() {

        @Override
        public CharSequence filter(CharSequence source, int start, int end,
                Spanned dest, int dstart, int dend) {

            if(end==0){
                if(is_minus){jis_minus=false;}
                else number--;
            }
            for (int i = start; i < end; i++) { 

                if (!Character.isDigit(source.charAt(i))) { 
                    return "";
                } 
                else{
                    number++;
                }
                if(number==5)
                    {
                    is_minus=true;
                    return (source.charAt(i)+"-");
                    }

        } 
        return null; 
        }
}; 
```

之后，您只需将过滤器附加到您想要的文本框...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:01:43.553

2）你不能检查`onKeyDown (int keyCode, KeyEvent event)`吗？

因此，当用户按下按钮时，您可以使用此函数来计算编辑文本的长度，如果长度等于 5，则插入所需的字符。

请注意，当您将其定义为仅数字时，我没有尝试在编辑文本中插入“-”符号。

# grails - 意外标记：映射

> ID：12369911
> 
> 赞同：2
> 
> 时间：2012-09-11T12:38:23.137
> 
> 标签：grails, syntax, groovy, data-modeling

我正在使用 1.3.7 版学习 Grails，但无缘无故地不断遇到以下语法错误：

```
unexpected token: mapping @ line x, column y. 
```

曾经，我通过运行“groovy clean”和“grails clean”来摆脱它，但这一次它甚至没有工作。据我所知，我的代码与我正在使用的书中的示例完全相同，但它一直在抱怨“映射”这个词。

这是我的一个失败的类的示例：

```
package com.grailsinaction

class Post {

    String content
    Date dateCreated

    static constraints = {
        content(blank: false)
    }

    static belongsTo = [ user: User ]

    static mapping {
        sort dateCreated: "desc"
    }

    static hasMany = [ tags: Tag ]
} 
```

我错过了什么？请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:48:32.277

您缺少等号...[映射行](http://grails.org/doc/latest/guide/GORM.html#ormdsl)应为：

```
static mapping = {
    sort dateCreated: "desc"
} 
```

# c# - 从 C# 中的相同 URL 下载的不同版本的 html 页面

> ID：12369913
> 
> 赞同：1
> 
> 时间：2012-09-11T12:38:36.367
> 
> 标签：c#, .net, html

我最近编写了从 ebay 上抓取信息的 ac# 程序。但是当我最近测试该程序时，我发现了一个奇怪的事情。我使用代码：

```
 WebClient client = new WebClient();
    Stream data = client.OpenRead(URL);
    StreamReader reader = new StreamReader(data);
    string s = reader.ReadToEnd();
    this.richTextBox1.Text = s;
    data.Close();
    reader.Close(); 
```

下载网页，从该代码下载的网页与从第三方下载软件（如 flashget）下载的网页版本不同，并且与另一个相比，它也缺少一些信息。有人可以解释一下吗？

**从C#下载的html**

DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 过渡//EN" "http://www.w3.org/TR/html4/loose.dtd ....

**从FlashGet下载的html**

文档类型 html .....

# iphone - 从整个视频中播放 3 秒部分

> ID：12369917
> 
> 赞同：0
> 
> 时间：2012-09-11T12:38:46.227
> 
> 标签：iphone, objective-c, video, ios4, cocos2d-iphone

我有一个 10 秒长的视频剪辑，我想从 3 秒播放到 6 秒。CCPlayer可以做到吗？甚至是 MPMoviewPlayer？

这是我的代码：

```
MPMoviePlayerController *_theMovie;  
[_theMovie setCurrentPlaybackTime:1.0];  
[_theMovie setEndPlaybackTime:2.0];  
[_theMovie play]; 
```

但视频播放时间为 0 到 2 秒 :(

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:50:07.993

这是文档中的两个二传手。

```
// The start time of movie playback. Defaults to NaN, indicating the natural start time of the movie.
@property(nonatomic) NSTimeInterval initialPlaybackTime;

// The end time of movie playback. Defaults to NaN, which indicates natural end time of the movie.
@property(nonatomic) NSTimeInterval endPlaybackTime;

MPMoviePlayerController *_theMovie;
[theMovie setInitialPlaybackTime:3.0]; //instead of [_theMovie setCurrentPlaybackTime:1.0];
[theMovie setEndPlaybackTime:6.0];
[_theMovie prepareToPlay];
[_theMovie play]; 
```

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:52:21.840

更改 MPMoviewPlayer 中的 currentPlaybackRate 时间，

```
moviplayer.currentPlaybackRate =moviePlayer.duration/3 or  6; 
```

# php - 使用脚本在 Amazon S3 存储桶内创建子目录

> ID：12369926
> 
> 赞同：8
> 
> 时间：2012-09-11T12:39:16.180
> 
> 标签：php, amazon-s3, amazon

我在以下链接中找到了用于在 amazon s3 中创建存储桶并在该存储桶中维护文件的脚本。

[http://net.tutsplus.com/tutorials/php/how-to-use-amazon-s3-php-to-dynamically-store-and-manage-files-with-ease/](http://net.tutsplus.com/tutorials/php/how-to-use-amazon-s3-php-to-dynamically-store-and-manage-files-with-ease/)

但我想在 amazon s3 存储桶中创建子目录，并且必须维护这些目录中的文件。谁能告诉我这是否可以使用 api。如果可能，请告诉我如何？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T19:07:21.830

是的，应该很容易。而不是给予

`$s3->putObjectFile($fileTempName, "jurgens-nettuts-tutorial", $fileName, S3::ACL_PUBLIC_READ)`

只要给

```
$folderName = 'xyz/abc/filename';  // path on s3 bucket. 
```

`$s3->putObjectFile($fileTempName,"jurgens-nettuts-tutorial" ,$folderName ,S3::ACL_PUBLIC_READ );`

在文件夹名称中定义目录

# javascript - r.js 中用于递归函数的错误？

> ID：12369932
> 
> 赞同：4
> 
> 时间：2012-09-11T12:39:26.940
> 
> 标签：javascript, jquery, rjs

我目前正在尝试使用 r.js 优化当前的 jQuery（开发版本 1.8.1）。这发生在使用 gem requirejs-rails 在 Rails 项目中进行资产编译期间。

我想我在优化器中遇到了一个错误。在 jquery 源代码的第 999 行附近，您会发现以下代码：

```
(function add(args) {
    jQuery.each(args, function (_, arg) {
        var type = jQuery.type(arg);
        if (type === "function" && (!options.unique || !self.has(arg))) {
            list.push(arg);
        } else if (arg && arg.length && type !== "string") {
            // Inspect recursively
            add(arg);
        }
    });
})(arguments); 
```

当优化的 jquery 到达包含`add(arg);`错误的行时，将抛出`add`未定义的错误。这是因为优化器将函数重命名`add`为`e`，而函数调用仍然`add(...)`像这样：

```
(function e(args) {
    jQuery.each(args, function (_, arg) {
        var type = jQuery.type(arg);
        if (type === "function" && (!options.unique || !self.has(arg))) {
            list.push(arg);
        } else if (arg && arg.length && type !== "string") {
            // Inspect recursively
            add(arg);
        }
    });
})(arguments); 
```

我能够通过将代码重写为：

```
var fnAdd = function (args) {
    jQuery.each(args, function (_, arg) {
        var type = jQuery.type(arg);
        if (type === "function" && (!options.unique || !self.has(arg))) {
            list.push(arg);
        } else if (arg && arg.length && type !== "string") {
            // Inspect recursively
            console.log("inspecting", fnAdd);
            fnAdd(arg);
        }
    });
};
fnAdd(arguments); 
```

这可以被认为是 r.js 中的错误吗？还是不允许使用javascript？我想知道为什么我是第一个遇到问题的人（至少谷歌没有透露任何解决方案）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:49:06.990

我的猜测是它对我来说看起来像是一个错误。虽然我不会亲自使用您正在使用的语法，但它是有效的 JavaScript，所以对我来说，看起来 r.js 并不是为处理这种类型的递归函数调用而设计的。

出于兴趣，如果您将 add() 调用放在自身之外会发生什么？r.js 是否将其正确重命名为 e()？

# android - 接近警报不会被测试提供者触发吗？

> ID：12369934
> 
> 赞同：0
> 
> 时间：2012-09-11T12:39:31.453
> 
> 标签：android, location

我有一个应用程序，我在其中使用 testprovider 生成用于测试的 gps 修复程序。正如预期的那样，它会生成 onlocationchanged 事件。但是，我有接近警报，这些不会被测试提供者触发。当我在模拟器中运行应用程序并通过 ddms 发送 gps 修复时，它们会触发。api 文档说“在内部，此方法同时使用 NETWORK_PROVIDER 和 GPS_PROVIDER”，从中您可能会得出结论，当您使用测试提供程序时不会触发接近警报。有人可以证实这一点吗？还是我错了，我的代码错了？

# java - Zk 复选框有问题吗？

> ID：12369937
> 
> 赞同：1
> 
> 时间：2012-09-11T12:39:44.930
> 
> 标签：java, checkbox, zk

我有一个宏组件，`DualListBox`其中还包含复选框，如下所示：

```
<hlayout
    style="padding-left: 40px;padding-top:20px;padding-bottom:20px;"
    hflex="1" vflex="1">
    <separator />

    <listbox id="candidateLb" vflex="true" width="250px"
        multiple="true"   model="${arg.candidateModel}">
        <listhead>
            <listheader label="Default Column List"></listheader>

        </listhead>
        <template name="model" var="each">
            <listitem>
                <listcell label="${each}" />

            </listitem>
        </template>
    </listbox>

    <vbox spacing="10px">
        <image style="cursor:pointer" id="chooseAllBtn"
            src="/images/rightrightarrow_g.png" />
        <image style="cursor:pointer" id="chooseBtn"
            src="/images/rightarrow_g.png" />
        <image style="cursor:pointer" id="removeBtn"
            src="/images/leftarrow_g.png" />
        <image style="cursor:pointer" id="removeAllBtn"
            src="/images/leftleftarrow_g.png" />
    </vbox>
    <listbox id="chosenLb" vflex="true" width="250px"
          model="${arg.chosenDataModel}" >
        <listhead>
            <listheader label="Selected Column List"></listheader>

        </listhead>
        <template name="model" var="each">
            <listitem>

                <listcell label="${each.value}" >
                <separator orient="vertical"  />

            <b >    <checkbox checked="${each.checked}" /></b>
                </listcell>
            </listitem>
        </template>
    </listbox>

    <vbox spacing="10px">
        <image style="cursor:pointer" id="topBtn"
            src="/images/upuparrow_g.png" />
        <image style="cursor:pointer" id="upBtn"
            src="/images/uparrow_g.png" />
        <image style="cursor:pointer" id="downBtn"
            src="/images/downarrow_g.png" />
        <image style="cursor:pointer" id="bottomBtn"
            src="/images/downdownarrow_g.png" />
    </vbox>

</hlayout> 
```

我的问题是，当有人检查 CheckBox 时，我想调用一个方法来更新一些值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:23:21.350

我通过使用此代码解决了上述问题..

```
<listbox id="chosenLb" vflex="1" width="100%"
                        height="135px" model="@load(vm.chosenDataModel)">
                        <listhead sizable="true">
                            <listheader>
                                <x:table width="100%">
                                    <x:tr>
                                        <x:td width="90%">
                                            <label
                                                value="Selected Column List" style="font-weight: bold">
                                            </label>
                                        </x:td>
                                        <x:td width="10%">
                                            <label
                                                value="Ascending" style="font-weight: bolder">
                                            </label>
                                        </x:td>
                                    </x:tr>
                                </x:table>
                            </listheader>

                        </listhead>

                        <template name="model" var="selected">
                            <listitem>
                                <listcell>
                                    <x:table width="100%">
                                        <x:tr>
                                            <x:td width="90%">
                                                <label
                                                    value="@bind(selected.listBoxHeaderName)"
                                                    style="width:200px">
                                                </label>
                                            </x:td>
                                            <x:td width="10%">

                                                <checkbox  
                                                    checked="@bind(selected.sortAscending)"
                                                    style="align:right;width:50px"
                                                     />
                                            </x:td>
                                        </x:tr>
                                    </x:table>
                                </listcell>
                            </listitem>
                        </template>
                    </listbox> 
```

这是我的**复选框**

```
 <checkbox   checked="@bind(selected.sortAscending)" style="align:right;width:50px"/> 
```

# java - 键盘快捷键中的菜单项名称

> ID：12369946
> 
> 赞同：1
> 
> 时间：2012-09-11T12:40:08.333
> 
> 标签：java, action, keyboard-shortcuts, menuitem, netbeans-platform

在我的 netbeans 平台应用程序中，我使用 Action 类中的注释向菜单项添加了键盘快捷键，如下所示；

```
@ActionReference(path = "Shortcuts", name = "D-N") 
```

它工作正常。我想将此快捷键提示附加到我的菜单项显示名称中。

例如：“New Ctrl+N”同样用于 Netbeans GUI。

有没有一种简单的方法可以将其附加到菜单名称中或者我需要手动将其附加到菜单中吗？

# ios - air for ios 应用程序没有提供？

> ID：12369949
> 
> 赞同：0
> 
> 时间：2012-09-11T12:40:10.157
> 
> 标签：ios, flash, air

是否有可能在不检查条款的情况下生成可以安装在任何 iPad/iPhone 上的 .ipa？
我想将我的应用程序放到学生 Intranet 中的服务器上，任何人都可以下载并安装它。我正在尝试 Ad hoc 部署，但已检查该规定。
同样用 ProvisionsAllDevices 替换配置文件中的 ProvisionedDevices 数组也无济于事
，我是 iOS 开发人员计划的成员并使用 Flash CS6、Air 3.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:22:36.593

在没有 Apple Store 的情况下分发应用程序的唯一方法是使用 ad-hoc 分发。这意味着（独立于空气或 obj.c）：

1.  您需要苹果开发者证书（299 欧元）
2.  在苹果开发者网站下创建临时证书
3.  包括您重新分配（最多 100 个）到 ad-hoc 证书的所有设备 uid

    *   只有证书中包含 uid 的设备才能安装应用程序（越狱设备除外）
4.  使用 p12 和 prov 构建 .ipa。苹果的证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:41:28.470

Apple 绝不会允许未签名的 IPA 在其设备上运行。所以你必须签字。您不能将应用程序仅提供给任何人，因为 Apple 需要对其进行审查。

# file - 如何在dll中添加这样的功能？

> ID：12369950
> 
> 赞同：1
> 
> 时间：2012-09-11T12:40:10.890
> 
> 标签：file, function, dll, syntax, stream

我通过[本教程](http://www.codeguru.com/cpp/cpp/cpp_mfc/tutorials/article.php/c9855/DLL-Tutorial-For-Beginners.htm)`dll`制作了一个及其使用。我用相同的代码制作完全相同的文件。好的。它工作得很好。现在我用#include向量添加我的函数，当然使用命名空间std和fsream：

```
DECLDIR void toFileWrite(vector<int> v, const char *fName)
{
    ofstream inf;

    inf.open(fName,inf.trunc);      
    if (inf!=NULL)
    {

        for (int i = 0; i < v.size(); i=i+2)
        {       
            inf << v.at(i)<<"\t"<<v.at(i+1)<<"\n";
        }   
    }       
    inf.close();        
} 
```

构建版本不会导致任何问题。然后，完全按照作者模型，我在我的应用程序中添加了我的函数的使用。

但是当我调用它时，我得到带有文本的错误窗口：“a.exe 中的未处理异常 at0x7855db75：访问冲突读取位置 0x2982d311”VS 打开我的 dll 的 cpp 文件并用绿色箭头指向行：`if (inf!=NULL)`

那么，作者没有提到什么，我应该怎么做才能使这样**一个简单的功能正常工作**？

# c++ - 包含自己的标头时标准库中的错误

> ID：12369951
> 
> 赞同：0
> 
> 时间：2012-09-11T12:40:12.123
> 
> 标签：c++, gcc, g++

我有一个字节缓冲区类，由我自己用 c++ 编写，我可以编译它并且它可以正常工作。现在我想在一个大项目中使用它，但是当我将它包含在另一个标题中时，如果我尝试构建它会引发错误。这是错误：

```
 CXX    out.o
In file included from /usr/include/c++/4.6/streambuf:808:0,
                 from /usr/include/c++/4.6/ios:44,
                 from /usr/include/c++/4.6/ostream:40,
                 from /usr/include/c++/4.6/iostream:40,
                 from /path/to/file/src/someheader1.h:29,
                 from /path/to/file/src/someheader2.h:31,
                 from /path/to/file/src/somesource.cpp:24:
/usr/include/c++/4.6/bits/streambuf.tcc: In member function ‘virtual std::streamsize std::basic_streambuf<_CharT, _Traits>::xsgetn(std::basic_streambuf<_CharT, _Traits>::char_type*, std::streamsize)’:
/usr/include/c++/4.6/bits/streambuf.tcc:56:38: error: expected unqualified-id before ‘(’ token
/usr/include/c++/4.6/bits/streambuf.tcc: In member function ‘virtual std::streamsize std::basic_streambuf<_CharT, _Traits>::xsputn(const char_type*, std::streamsize)’:
/usr/include/c++/4.6/bits/streambuf.tcc:90:38: error: expected unqualified-id before ‘(’ token
In file included from /usr/include/c++/4.6/istream:859:0,
                 from /usr/include/c++/4.6/iostream:41,
                 from /path/to/file/src/someheader1.h:29,
                 from /path/to/file/src/someheader2.h:31,
                 from /path/to/file/src/somesource.cpp:24:
/usr/include/c++/4.6/bits/istream.tcc: In member function ‘std::streamsize std::basic_istream<_CharT, _Traits>::readsome(std::basic_istream<_CharT, _Traits>::char_type*, std::streamsize)’:
/usr/include/c++/4.6/bits/istream.tcc:693:46: error: expected unqualified-id before ‘(’ token
make[4]: *** [out.o] Error 1 
```

项目中头文件的骨架：

```
#ifndef _GUARD_
#define _GUARD_

#include <string>
#include <vector>

...

#include "bytebuffer.h"

namespace A {
  namespace B {

    using namespace std;
    using namespace A::C;

    class Myclass {
    public: 

    ...

     virtual void save( ByteBuffer& bb ) {
     }

     ...    

    } ;
  }
}

#endif 
```

字节缓冲区非常简单，它包含一个数据向量，以及不同类型的 put 和 get 方法。如果我在标头中注释掉 save 方法，没有任何变化，所以我什至不必声明字节缓冲区，它会引发错误。什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T12:50:30.467

看看这个错误：

```
/usr/include/c++/4.6/bits/streambuf.tcc:56:38: error: expected unqualified-id before ‘(’ token 
```

我碰巧有这个（希望）非常相同的文件，第 56 行是：

```
const streamsize __len = std::min(__buf_len, __remaining);
                              ^
                              col 38 
```

为方便读者，我还标记了第 38 列。

哦！该错误涉及`(`令牌，但在此位置不是 a`(`而是 a `min`。所以我的猜测是您项目中的某些标题正在定义一个宏`min`：

```
#define min(a, b) ((a) < (b) ? (a) : (b)) 
```

或类似的。

解决方案是找到此标头，并完全删除宏（我最喜欢），或将其重命名（变为`MIN`？），或者在所有标准包含后移动该标头的包含（并不总是很容易）。

作为脚注，无处不在的 MS`<windows.h>`以拥有这样的宏而闻名……也许有人复制了一点？

# java - 处理 ArrayStoreException

> ID：12369957
> 
> 赞同：53
> 
> 时间：2012-09-11T12:40:24.787
> 
> 标签：java, arrays, casting, type-conversion

```
Object[] o = "a;b;c".split(";");
o[0] = 42; 
```

投掷

```
java.lang.ArrayStoreException: java.lang.Integer 
```

尽管

```
String[] s = "a;b;c".split(";");
Object[] o = new Object[s.length];
for (int i = 0; i < s.length; i++) {
    o[i] = s[i];
}
o[0] = 42; 
```

没有。

`String[]`有没有其他方法可以在不创建临时数组的情况下处理该异常？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-09-11T12:56:51.013

在 Java 中，数组也是一个*对象*。

您可以将子类型的对象*放入**超类型*的变量中。例如，您可以将`String`对象放入`Object`变量中。

不幸的是，Java 中的数组定义不知何故被破坏了。`String[]`被认为是亚型的`Object[]`，但那是*错误*的！有关“协变和逆变”的更详细解释，但其本质是：只有当子类型满足超类型的*所有义务*时，才应将类型视为另一种类型的子类型。这意味着，如果你得到一个子类型对象而不是超类型对象，你不应该期望与超类型契约相矛盾的行为。

问题是`String[]`只支持合同的*一部分*。`Object[]`例如，您可以从中*读取* `Object`值`Object[]`。您还可以*从* . 到现在为止还挺好。问题在于合同的另一部分。您可以将*任何*放入. 但是您不能将*任何*内容放入. 因此，不应将其视为 的子类型，但 Java 规范说它是。因此我们有这样的后果。`Object``String``String[]` *`Object``Object[]` *`Object``String[]``String[]``Object[]`**

 **（请注意，类似的情况*再次*出现在泛型类中，但这次它被正确*解决*了它应该如何与数组一起使用；但事实并非如此。而且由于向后兼容，现在更改它为时已晚。）`List<String>`*`List<Object>``List<?>`*

 *在您的第一个示例中，该`String.split`函数创建一个`String[]`对象。您可以将其放入`Object[]`变量中，但对象仍然是`String[]`. 这就是它拒绝一个`Integer`值的原因。您必须创建一个新`Objects[]`数组，并复制这些值。您可以使用该`System.arraycopy`函数复制数据，但不能避免创建新数组。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-11T12:44:01.670

不，没有办法避免复制`split`返回的数组。

返回的数组`split`实际上是 a `String[]`，Java 允许您将它分配给 type 的变量`Object[]`。然而，它仍然是真正的 a `String[]`，因此当您尝试在其中存储除 a 之外的其他内容`String`时，您会得到一个`ArrayStoreException`.

背景信息见[4.10.3。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.10.3)Java 语言规范[中的数组类型之间的子类型化。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.10.3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-07T23:11:52.247

这是许多个月前 Java 开发人员讨价还价的结果。虽然看起来很奇怪，但此功能对于许多方法都很重要，例如`Arrays.sort`（也恰好在 中调用`Collections.sort`）。基本上，如果 X[]（其中 X 是 Object 的某个子类）不被视为子类型，则任何将 Object[] 作为参数的方法都将停止按预期执行。例如，数组可能已被重新设计，以至于在某些情况下它们是只读的，但是问题变成了“何时？”。

一方面，将作为参数传递给方法的数组设为只读可能会阻碍编码人员进行原位修改的能力。另一方面，当数组作为参数传递时例外，仍然允许编码器进行非法修改，例如当调用者传递一个整数数组时存储一个字符串。

但是说“Integer[]（例如）不是 Object[] 的子类型”的结果是一个危机，其中必须为 Object[] 和 Integer[] 创建一个单独的方法。通过扩展这种逻辑，我们可以进一步说必须为 String[]、Comparable[] 等创建一个单独的方法。每种类型的数组都需要一个单独的方法，即使这些方法在其他方面*完全相同*。

这正是我们拥有多态性的那种情况。

不幸的是，在这里允许多态性确实允许尝试在数组中非法存储一个值，并且`ArrayStoreException`如果发生这样的实例，则会抛出 an 。然而，这是一个很小的代价，并且与`ArrayIndexOutOfBoundsException`.

`ArrayStoreException`在大多数情况下，可以通过两种方式轻松预防（尽管您无法控制其他人的行为）。

**1)不要在不知道** *实际*组件类型
的情况下尝试将对象存储在数组中。当您正在使用的数组被传递到方法中时，您不一定知道它来自哪里，因此您不能假设它是安全的，除非组件类型的类是最终的（即没有子类）。

 *如果数组是从方法返回的，就像上面的问题一样，请了解该方法。实际类型是否可能是返回类型的子类？如果是这样，您必须考虑到这一点。

**2)**
当你第一次初始化一个在本地使用的数组时，使用形式`X[] blah = new X[...];`or `X[] blah = {...};`or (as of Java 10) `var blah = new X[...];`。然后，任何在此数组中存储非 X 值的尝试都将导致编译器错误。你*不应该*说的是`Y[] blah = new X[...];`，其中 X 是 Y 的子类。

如果您有一个数组，就像上面的问题一样，想要存储错误类型的组件，那么就像其他人建议的那样，您必须创建一个正确类型的新数组并将信息复制到...

```
Object[] o = Arrays.copyOf(s, s.length, Object[].class); //someone demonstrate System.arrayCopy. I figure I show another way to skin cat. :p
o[0] = 42; 
```

或者您必须以某种方式将要存储的组件转换为正确的类型。

```
s[0] = String.valueOf(42); 
```

请注意， 42 != "42" 因此在决定采用哪条路径时，应考虑将如何影响其余代码。

我只想以关于泛型的说明结束（如之前的答案中所述）。泛型实际上同样能够让毫无戒心的编码人员感到惊讶。考虑以下代码片段（从[此处](https://docs.oracle.com/javase/tutorial/java/generics/capture.html)修改）。

```
import java.util.List;
import java.util.ArrayList;
public class UhOh {
    public static void main(String[] args) {
        List<Integer> list = new ArrayList<Integer>();
        WildcardFixed.foo(list);
        list.add(6);
        System.out.println(list); // ¯\_(ツ)_/¯ oh well.
        int i = list.get(0); //if we're going to discuss breaches of contract... :p
    }
}
class WildcardFixed /*not anymore ;) */ { 
    static void foo(List<?> i) {
        fooHelper(i);
    }
    private static <T> void fooHelper(List<T> l) {
        l.add((T)Double.valueOf(2.5));
    }
} 
```

泛型，女士们，先生们。:p

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:03:53.693

当然还有其他选择，比如你实现自己的 split 方法，它直接返回一个 Object 数组。我不确定临时字符串数组到底有什么困扰你？

顺便说一句，您可以使用 System.arrayCopy 用几行代码缩短代码，而不是实现自己的循环来复制数组元素：

```
System.arrayCopy(s, 0, o, 0, s.length); 
```****

# c# - 先前选择后从下拉菜单中删除列表

> ID：12369959
> 
> 赞同：0
> 
> 时间：2012-09-11T12:40:33.607
> 
> 标签：c#, asp.net, sql

在我的页面中，有 3 个下拉菜单。

下拉菜单 1：用于存储从 CarTab 检索到的汽车模型到数据库 (SQL)

下拉菜单 2：用于存储用户名

下拉菜单 3：用于存储盘号

所有下拉菜单的功能，都有相互关联。假设管理员在下拉列表 1 中选择 Honda Vios，下拉列表 2 将显示之前仅预订 Honda Vios 的用户名。然后在下拉3中，它将显示汽车的车牌号。例如，在 CarTab 中，有 6 辆本田 vios，当然这些车有不同的车牌号。正确的？因此，下拉 3 将向管理员显示所选汽车的车牌号。

管理员在下拉菜单 1 中选择 Honda Vios，下一个下拉菜单 2 将显示选择 Honda vios 的用户列表，管理员选择用户 A，车牌号为 SGH 12BC。然后管理员点击保存按钮并将其保存到数据库中的新表中。

```
<td>Car Model</td>
<td class="style21">
<asp:DropDownList ID="DropDownList1" runat="server" Height="42px" Width="146px" 
AutoPostBack="True">
<asp:ListItem>Please Choose</asp:ListItem>
<asp:ListItem>Honda Vios</asp:ListItem>
<asp:ListItem>Honda Civic</asp:ListItem>
<asp:ListItem>Honda City</asp:ListItem>
<asp:ListItem>Honda Jazz</asp:ListItem>
</asp:DropDownList>
</td>
</tr>
<tr>
<td class="style18">
User</td>
<td class="style19">
<asp:DropDownList ID="DropDownList2" runat="server" 
DataSourceID="SqlDataSource1" DataTextField="Username" 
DataValueField="Username" Height="36px" Width="137px" AutoPostBack="True">
</asp:DropDownList>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
ConnectionString="<%$ ConnectionStrings:Connection %>" 
SelectCommand="SELECT [Username] FROM [Rsvp] WHERE ([Model] = @Model)">
<SelectParameters>
<asp:ControlParameter ControlID="DropDownList2" Name="Model" 
PropertyName="SelectedValue" Type="String" />
</SelectParameters>
</asp:SqlDataSource>
</td>
</tr>
<tr>
<td class="style16">
Plate
</td>
<td class="style17">
<asp:DropDownList ID="DropDownList3" runat="server" 
DataSourceID="SqlDataSource2" DataTextField="Plate" DataValueField="Plate" 
Height="45px" Width="141px" AutoPostBack="True">
</asp:DropDownList>
<asp:SqlDataSource ID="SqlDataSource2" runat="server" 
ConnectionString="<%$ ConnectionStrings:Connection %>" 
SelectCommand="SELECT [Plate] FROM [CarTab] WHERE ([Model] = @Model)">
</asp:SqlDataSource 
```

**这里有一个问题：**
如何删除管理员选择的用户名和车牌号？这意味着，当管理员登录时，本田 vios 列表的用户名和车牌号将不会再次出现。我需要帮助。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:50:42.763

您可以在数据库上创建一个查找表来跟踪需要选择的项目。然后向该表添加一个联接。像这样的东西：

```
SELECT [Username] FROM [Rsvp] join SelectedItems
on [Rsvp].ID =  SelectedItems.ID
WHERE [Model] = @Model and SelectedItems.HasBeenSelected = False 
```

# android - 如何在服务类中添加进度对话框？

> ID：12369963
> 
> 赞同：2
> 
> 时间：2012-09-11T12:40:44.807
> 
> 标签：android, android-service

我想在服务类中添加进度对话框。我的应用程序正在播放广播直播，但应用程序加载频道，所以我想添加进度对话框。当启动广播进度对话框时关闭..有想法吗？提前致谢..

```
public class MusicService extends Service {

    private static final String TAG = "MyService";
    public static MediaPlayer mediaplayer;
    String musicfile;

    @Override
    public IBinder onBind(Intent intent) {
        Log.i(" ibinder ", "");
        return null;
    }

    @Override
    public void onCreate() {
        Toast.makeText(this, "My Service Created", 0).show();
        Log.i(TAG, "onCreate");

        mediaplayer = new MediaPlayer();
        mediaplayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
    }

    @Override
    public void onDestroy() {
        Toast.makeText(this, "My Service Stopped", 0).show();
        Log.w(TAG, "onDestroy");
        mediaplayer.stop();
    }

    @Override
    public void onStart(Intent intent, int startid) {
        Toast.makeText(this,
                "My Service Started :" + intent + " start id :" + startid, 0)
                .show();

        Log.d(TAG, "onStart");
        if (intent.getExtras().getString("paths") == null) {
            Log.i("Intent Null", "Null");
        } else {
            Log.i("Intent Not Null", "Not Null");
            musicfile = intent.getExtras().getString("paths");
            Log.i("musicfile", "" + musicfile);
            startPlayer();
            Log.i("startplayer() called","");
        }
    }

    public void startPlayer() {
        new Thread(startPlayer).start();
    }

    private Runnable startPlayer = new Runnable() {
        public void run() {
            try {
                mediaplayer.reset();
                mediaplayer.setDataSource(musicfile);
                mediaplayer.prepare();
                mediaplayer.start();
                Log.i("playchannel", musicfile);
                Log.e("Media Player Create", "player Create");
                Log.i("End startpayer called","");
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    };
} 
```

这是我的服务类，我想播放直播电台流，但直播电台流需要一些负载才能播放。所以我想在广播播放器加载一段时间时做一些处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T17:22:56.727

我想你想在媒体播放器启动时停止进度对话框，但媒体播放器在需要一些时间加载无线电频道后启动，所以只需使用 Main Activity 对象在服务类中关闭进度对话框。像这样

```
FMActivity.pDialogs.dismiss(); 
```

我认为这是您的问题解决方案。

# xaml - 如何在 Windows 8 中增加“GridView”项目之间的空格

> ID：12369964
> 
> 赞同：8
> 
> 时间：2012-09-11T12:40:53.560
> 
> 标签：xaml, winrt-xaml

如何增加`GridView`Windows 8 中 a 项之间的间距？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-25T21:20:52.467

```
<GridView.ItemContainerStyle>
   <Style TargetType="FrameworkElement">
      <Setter Property="Margin" Value="0 0 20 20"/>
   </Style>
</GridView.ItemContainerStyle> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T23:05:24.417

您可以为 ItemContainerStyle 提供边距。在 Blend 中，右键单击您的网格，选择编辑 Additional Template -> Edit Generated Item Container。给 OuterContainer 组件适当的边距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T18:58:54.240

我不确定我是否理解你的陈述...

> 如果我们使用边距作为间距，我们可以看到项目之间的空间，但是当我们选择任何项目时，选择背景将覆盖项目之间的空间。

...因为我只是将**Margin**（比如 Margin="10"）添加到*FIRST* **GridViewItem**并且所有后续项目都是均匀分布的。

代码片段-

```
 ... <GridView>
            <GridViewItem Margin="20" Width="100" Height="100">
                <Image Source="Assets/SmallLogo.png"/>
            </GridViewItem> ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T09:19:17.257

为 GridViewItem 使用边距。

例如，

```
<Style x:Key="GridViewItemStyle1" TargetType="GridViewItem">
    <Setter Property="FontFamily" Value="{StaticResource ContentControlThemeFontFamily}"/>
    <Setter Property="FontSize" Value="{StaticResource ControlContentThemeFontSize}"/>
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="TabNavigation" Value="Local"/>
    <Setter Property="IsHoldingEnabled" Value="True"/>
    <Setter Property="Margin" Value="0,-10,0,0"/> <!-- here -->
    <Setter Property="BorderThickness" Value="0,0,2,0" /> <!-- border-right, show infinity each items.-->
    <Setter Property="BorderBrush" Value="Green" />

    <Setter Property="Template">
    ...
</STyle> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-11T16:15:07.597

创建 ItemTemplate 并在其中为每个项目使用 Margin。这样你就可以把它们散开

# java - Play Framework 2：读取 Build.scala 中定义的应用程序版本

> ID：12369967
> 
> 赞同：20
> 
> 时间：2012-09-11T12:41:02.917
> 
> 标签：java, playframework, playframework-2.0, version

我使用 Play Framework 2.0 (2.0.3)。我有一个 Java 项目，想阅读`appVersion`Build.scala 中定义的应用程序版本 ( )。

我已经看到的是，可以从`Application`提供给 Global.java 的对象中读取某些配置详细信息，但没有找到名为 appVersion 或类似的键。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-11T20:09:30.330

您可以定义版本`application.conf`并`Build.scala`读取值。我使用版本号和应用程序名称执行此操作。以下适用于 Play 2.0，[Play 2.1 有更新的解决方案](https://stackoverflow.com/questions/14430088/play-framework-2-1-use-play-api-configuration-in-build-scala)。

在`project/Build.scala`中，加载配置并获取属性：

```
val conf = play.api.Configuration.load(new File("."))
val appName    = conf.getString("app.name").getOrElse("unnamed application")
val appVersion = conf.getString("app.version").getOrElse("0.0.0") 
```

在`conf/application.conf`定义属性：

```
app.version = 1.0
app.name = My Application 
```

最后在您的应用程序中，它可以通过

```
 Play.application().configuration().getString("app.version") 
```

* * *

配置语法有很多特性，所以你甚至可以更疯狂地使用你的版本或应用程序名称：

```
app {
  major    = 1
  minor    = 2
  revision = 3
  version = ${app.major}.${app.minor}.${app.revision}
  name = My Application ${app.major}.${app.minor}
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-12T04:13:37.803

为此，我使用了[SBT BuildInfo 插件：](https://github.com/sbt/sbt-buildinfo)

```
import sbtbuildinfo.Plugin._

val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA, settings = Defaults.defaultSettings ++ buildInfoSettings).settings(

  buildInfoKeys := Seq[Scoped](name, appVersion, scalaVersion, sbtVersion),
  buildInfoPackage := "org.foo.bar",

  ...

) 
```

这会生成一个`org.foo.bar.BuildInfo`对象，然后您可以从源代码中调用该对象：

```
org.foo.bar.BuildInfo.version 
```

您还可以在构建中定义自定义键并将它们添加到 buildInfoKeys，如果您的构建变得更复杂，这将非常有用。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-11T14:10:42.113

您可以使用以下命令获取当前版本的 Play：

```
play.core.PlayVersion.current(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-25T15:38:41.820

这是您如何获得在**build.sbt中定义的 Play 应用程序版本和应用程序名称**

```
name := "myApp"
version :="1.0.4" 
```

**请注意，这只适用于 PROD 模式。**在开发模式下，SBT 与应用程序共享一个 JVM 实例，并且这些调用返回不同的东西。

```
Application.class.getPackage().getImplementationTitle());     // returns "myApp"
Application.class.getPackage().getImplementationVersion());    // returns "1.0.4" 
```

在这种情况下，Application 类是在您的项目中定义的类。它可以是您项目中的任何类。

**更新**

我注意到此方法不适用于 Play >=2.4.x

要解决此问题，请将其添加到您的 build.sbt

```
packageOptions += Package.ManifestAttributes(
  "Implementation-Version" -> (version in ThisBuild).value,
  "Implementation-Title" -> name.value
) 
```

这两个属性将附加到构建中的 MANIFEST.FM 文件中，以便可以从代码中读取包标题和版本。

仅供参考：我使用 SBT 原生打包器

```
addSbtPlugin("com.typesafe.sbt" % "sbt-native-packager" % "1.0.3") 
```

# android - Android图库：位图图像抛出arrayIndexOutOfBoundException

> ID：12369969
> 
> 赞同：0
> 
> 时间：2012-09-11T12:41:08.253
> 
> 标签：android, bitmap, gallery

下面是我的代码：

```
String[] filePathColumn = { MediaStore.Images.Media.DATA };
Cursor cur = getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, new String[] {ImageColumns._ID}, null, null,null);
if ((cur != null) && cur.moveToFirst()) {
    //  Integer idsArray[] = new Integer[cur.getCount()];
    for (int i = 0; i < cur.getCount(); i++) {
        idsArray[i] = cur.getInt(cur.getColumnIndex(ImageColumns._ID));

        cur.moveToNext();
    }

}
Bitmap originalImage = BitmapFactory.decodeFile(cur.getString(cur.getColumnIndex(filePathColumn[0])));
int width = originalImage.getWidth();

int height = originalImage.getHeight();

cur.close(); 
```

我想获取每个图像的高度和宽度。我想使用`getHeight()`and`getWidth()`方法，但上面的代码给了我一个错误。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:49:32.453

检查这个

```
Cursor cur = getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, **new String[] {ImageColumns._ID}**, null, null,null); 
```

您只查询`ImageColumns._ID`字段。添加`MediaStore.Images.Media.DATA`就可以了。

像这样：

```
 String[] filePathColumn = { MediaStore.Images.Media.DATA };
    Cursor cur = context.getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, new String[] { ImageColumns._ID, MediaStore.Images.Media.DATA }, null, null, null);

    if ((cur != null) && cur.moveToFirst()) {
        //  Integer idsArray[] = new Integer[cur.getCount()];
        for (int i = 0; i < cur.getCount(); i++) {
            cur.getInt(cur.getColumnIndex(ImageColumns._ID));

            Bitmap originalImage = BitmapFactory.decodeFile(cur.getString(cur.getColumnIndex(filePathColumn[0])));
            int width = originalImage.getWidth();
            int height = originalImage.getHeight();

            cur.moveToNext();
        }

    }

    cur.close(); 
```

# jquery - 两个 div 标签切换功能在 Internet Explorer 中不起作用

> ID：12369971
> 
> 赞同：1
> 
> 时间：2012-09-11T12:41:12.577
> 
> 标签：jquery, html

这里是 javascript 函数，当锚标记单击和第二个锚标记在 Internet Explorer 中不起作用时调用它

```
<Script type="text/javascript"> 
     var $J = jQuery.noConflict();
  function ToggleComment() {
        if (!($J('#Comments1').is(":visible"))) {       
                  $J('#Disclaimer').toggle();
        }
}

function f_show_comments()  {       
        $J('#Disclaimer').hide();
        $J('#Comments1').show();
}

    </script>
    <html>
    <body>

        <div align="center" style="margin:10px 0;">
        <b><a href="" onclick="ToggleComment();return false;" style="FONT-SIZE: 13px; COLOR:#1F3E61; FONT-FAMILY: Georgia,Times New Roman, Times, serif;"> Click here to post your comments about this article.</a>
        <a href="" id="c" onclick="f_show_comments();return false;"  style="FONT-SIZE: 14px; color:#cc0000; FONT-FAMILY: Georgia,Times New Roman, Times, serif;" >Click here to accept the terms of this disclaimer.</a></b>
        </div>

        <div id="Disclaimer" style="display:none;">
            <P align=center><STRONG>SUMMARY DISCLAIMER AND TERMS OF USE</STRONG></P>

            <P>Minors should seek parental permission before submitting a post.</P>
            <P>All comments submitted may be reviewed and edited by the Communications department before going live on the website.</P>

            <P>For the complete Terms of Use, please <a target="_blank" href="http://www.newmiamiarch.org/Atimo_s/news/Terms of Service.pdf">click here</a>.</P>
        </div>

        <div id="Comments1" style="display:none;" align="center">
            <p align="left">Your comment will be submitted to the web stie.  
            While are contact references that will only be used by the staff  </p>

        </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:14:14.737

更改您的 JavaScript 函数体，以及一些 html 属性值。

```
<script type="text/javascript">
        var $J = jQuery.noConflict();

        function ToggleComment() {
            if (!($J('#Disclaimer').is(":visible"))) {
                $J('#Disclaimer').show();
                 $J('#Comments1').hide();
            }
        }

        function f_show_comments() {
            if (!($J('#Comments1').is(":visible"))) {
                $J('#Comments1').show();
                $J('#Disclaimer').hide();
            }
        }
    </script>
    <div align="center" style="margin:10px 0;"> <b><a href="javascript:void(0);" onclick="ToggleComment();" style="FONT-SIZE: 13px; COLOR:#1F3E61; FONT-FAMILY: Georgia,Times New Roman, Times, serif;"> Click here to post your comments about this article.</a>
    <a href="javascript:void(0);" id="c" onclick="f_show_comments();"  style="FONT-SIZE: 14px; color:#cc0000; FONT-FAMILY: Georgia,Times New Roman, Times, serif;" >Click here to accept the terms of this disclaimer.</a></b>

    </div>
    <div id="Disclaimer" style="display:none;">
        <P align=center>
            <STRONG>SUMMARY DISCLAIMER AND TERMS OF USE</STRONG></P>

        <P>Minors should seek parental permission before submitting a post.</P>
        <P>All comments submitted may be reviewed and edited by the Communications department before going live on the website.</P>

        <P>For the complete Terms of Use, please <a target="_blank" href="http://www.newmiamiarch.org/Atimo_s/news/Terms of Service.pdf">click here</a>.</P>
    </div>

    <div id="Comments1" style="display:none;" align="center">
        <p align="left">Your comment will be submitted to the web stie.  
        While are contact references that will only be used by the staff  </p>

    </div> 
```

# java - wlst 嵌入模式不起作用

> ID：12369972
> 
> 赞同：2
> 
> 时间：2012-09-11T12:41:13.570
> 
> 标签：java, weblogic, wlst, bea

我正在尝试为以下任务构建一个小型实用程序：1）连接到 weblogic 管理服务器。2) 添加托管服务器。3) 向节点管理器等注册域。

我在eclipse中开始开发，将weblogic\wlserver103\server\lib的所有jar添加到我的项目buildpath中。（我不知道wlst嵌入模式需要哪些jar）开发环境设置没有任何错误。当我尝试运行连接到管理服务器等简单任务时。抛出异常如下图

```
Connecting to t3://ksai.domain.simpledevelopers.com:7001 with userid javadev13 ...
The CompatabilityMBeanServer is not initialized properly. 
This might happen if the CompatabilityMBeanServer is 
disabled via the JMXMBean.

To view the root cause exception use dumpStack()

WLST detected that the RuntimeMBeanServer is not enabled. This 
might happen if the RuntimeMBeanServer is disabled via the JMXMBean. 
Please ensure that this MBeanServer is enabled. Online WLST cannot 
function without this MBeanServer.
Exception in thread "main" Traceback (innermost last):
File "<string>", line 1, in ?
File "<iostream>", line 22, in connect
File "<iostream>", line 618, in raiseWLSTException
WLSTException: Error occured while performing connect : "Cannot connect to WLST." 
Use dumpStack() to view the full stacktrace 
```

我可以使用相同的用户名和密码从 wlst 离线模式进行相同的连接，效果很好。作为一种解决方法，我还尝试将 userconfig 和 userKey 安全文件作为参数提供给连接命令。

注意：管理服务器已经启动并运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:50:45.903

几件事要尝试：

1 - 将 CompatibilityMBeanServerEnabled 设置为 true，从命令行 wlst 执行这些步骤（用您的设置替换用户名、密码、主机名、管理端口、域名）

```
connect('username','password','t3://hostname:adminport')
cd('JMX/DomainName')
ls() 
```

现在检查“CompatibilityMBeanServerEnabled”参数的值，如果为假，则执行以下操作

```
edit()
startEdit()
set('CompatibilityMBeanServerEnabled', 'true')
save()
activate()
shutdown() 
```

现在启动 AdminServer，并尝试调用您的 WLST Embedded 代码

2 - 如果上述修复不起作用，则在 WLST 嵌入式代码中添加“dumpStack()”以获取堆栈跟踪，这将有助于确定根本原因。

3-回答您关于 WLST 嵌入模式需要哪个 jar 的问题，它的 weblogic.jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-04T13:26:03.703

假设您的 WLS 域位于 /oracle/app/oracle/gc_inst/user_projects/domains/GCDomain，以下 WLST 命令在**WLS10.3.6**上为我工作，并允许我们启用 RuntimeMBeanServer：

1) 如果禁用，则启用 Platform MBean Server：1.1。从 WLS 管理控制台，转到 GCDomain > 配置 > 常规 > 高级 1.2。选择**Platform MBean Server Enabled**，保存更改并激活更改。1.3\. 重新启动管理服务器。

2) 为 GCDomain 启用环境变量

```
cd /oracle/app/oracle/gc_inst/user_projects/domains/GCDomain/bin
source setDomainEnv.sh 
```

3) 从 WLST java weblogic.WLST 启用 RuntimeMBeanServerEnabled

```
Initializing WebLogic Scripting Tool (WLST) ...
Welcome to WebLogic Server Administration Scripting Shell
Type help() for help on available commands
wls:/offline> readDomain('/oracle/app/oracle/gc_inst/user_projects/domains/GCDomain')
wls:/offline/GCDomain>cd('JMX/NO_NAME_0')
wls:/offline/GCDomain/JMX/NO_NAME_0>set('PlatformMBeanServerUsed','true')
wls:/offline/GCDomain/JMX/NO_NAME_0>set('PlatformMBeanServerEnabled','true')
wls:/offline/GCDomain/JMX/NO_NAME_0>set('RuntimeMBeanServerEnabled', 'true')
wls:/offline/GCDomain/JMX/NO_NAME_0>updateDomain()
wls:/offline/GCDomain/JMX/NO_NAME_0>closeDomain()
wls:/offline>exit() 
```

希望它也适合你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-15T15:35:21.480

停止节点管理器

杀死服务器的java进程

比发出一个

> 开始.sh -c

清除缓存的密码并启动所有服务器。

# objective-c - 为 iOS 5.1 编译 ffmpeg

> ID：12369975
> 
> 赞同：1
> 
> 时间：2012-09-11T12:41:33.387
> 
> 标签：objective-c, ios, xcode, compilation, ffmpeg

我从这里按照 jold 的步骤：

[为 iFrameExtractor 编译 ffmpeg 的问题](https://stackoverflow.com/questions/6994151/problem-compiling-ffmpeg-for-iframeextractor/12369821#12369821)

当我尝试 jold 的解决方案时，我收到 armv6 和 armv7 的以下错误。i386 完美运行。

> lipo：无法打开输入文件：armv6/libavcodec.a（没有这样的文件或目录）
> 
> lipo：无法打开输入文件：armv6/libavutil.a（没有这样的文件或目录
> 
> lipo：无法打开输入文件：armv6/libswscale.a（没有这样的文件或目录）

当脚本结束时，我在 /armv7 和 /armv6 中只有 libadevice.a 和 libavformat.a。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:46:32.090

简短的回答：原因是因为 IframeExtractor 构建脚本是错误的。ffmpeg 的 arm 版本实际上从未构建，因为脚本在构建过程中出错。您可以在 ./configure 期间看到错误发生

在这里查看我对同一问题的回答：

[ffmpeg 在 iOS5.1 中不会 ./configure](https://stackoverflow.com/questions/9982528/ffmpeg-wont-configure-in-ios5-1/10066116#10066116)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:08:20.113

如果您不介意使用比最新版本更旧的 ffmpeg，但是一个经过良好测试且在 armv7 设备上运行良好的版本，您可以试试这个。

[https://github.com/mooncatventures-group](https://github.com/mooncatventures-group)

当我们解决它时，我们将更新到版本 11，但我们发现 .8 的问题更少，视频更好。

# iphone - 谁能帮我验证 iOS 中的电子邮件，例如“0@0.bk”、“0@0.ak.bk.ck.dk.ek.fk.gk.hk.lk.mk.nk.ok” .pk”等，？

> ID：12369977
> 
> 赞同：-8
> 
> 时间：2012-09-11T12:41:37.377
> 
> 标签：iphone, email-validation

谁能帮我验证 iOS 中的电子邮件，例如“0@0.bk”、“0@0.ak.bk.ck.dk.ek.fk.gk.hk.lk.mk.nk.ok” .pk”等，？我们办公室的测试人员要求验证此类电子邮件。我将不胜感激任何形式的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T12:44:48.580

请不要尝试验证电子邮件。这很复杂。如果您想检查电子邮件是否有效，请向其发送电子邮件并让用户做出回应，例如单击链接。

不仅仅是检查“@”和“.”的存在。可能没有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:56:10.020

```
 NSString *emailRegEx =
        @"(?:[a-z0-9!#$%\\&'*+/=?\\^_`{|}~-]+(?:\\.[a-z0-9!#$%\\&'*+/=?\\^_`{|}"
        @"~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\"
        @"x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-"
        @"z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5"
        @"]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-"
        @"9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21"
        @"-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])";

        NSPredicate *predicate;
        predicate = [NSPredicate predicateWithFormat:@"SELF MATCHES %@",emailRegEx];

        NSString *yourString = @"abc.yahoo.co.in";
        if ([predicate evaluateWithObject:yourString]) {
          NSLog (@" valid email");
      }else
    {
        NSLog(@"Not a valid email");
    } 
```

# templates - 为什么在 D 中使用 static if？

> ID：12369978
> 
> 赞同：8
> 
> 时间：2012-09-11T12:41:39.347
> 
> 标签：templates, d

我一直在阅读 D 语言中的模板系统，并遇到了一个不寻常的结构，`static if`.

从我设法掌握的情况来看，它是在编译时进行评估的，但从我搜索的内容来看，[这里](http://en.wikipedia.org/wiki/D_programming_language)显示的示例并没有给我很大启发。

```
template Factorial(ulong n)
{
    static if(n < 2)
        const Factorial = 1;
    else
        const Factorial = n * Factorial!(n - 1);
} 
```

有什么作用`static if`，我应该什么时候使用它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T12:54:56.173

D`static if`是“条件编译”的基础，在必须对代码变体做出编译时决定的任何地方都起着重要作用。

由于 D 没有预处理器，因此

```
#ifdef xxx
compile_this_piece_of_code
#endif 
```

可以变成

```
static if(xxx)
{
     compile_this_pece_of_code
} 
```

同样，元编程也可以通过静态发生，如果：

```
template<int x>
struct traits
{ some definition calculated from x };

template<>
struct traits<0>
{ same definitions for the 0 particular case } 
```

可

```
template(int x)
{
    static if(x==0)
    { some definitions }
    else
    { some other same definitions }
    even more definition common in the two cases
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T13:03:15.567

维基百科的例子其实很简单：

```
template Factorial(ulong n)
{
    static if(n < 2)
        const Factorial = 1;
    else
        const Factorial = n * Factorial!(n - 1);
} 
```

它是一个同名模板（参见下面乔纳森的评论）。`n`是模板参数。所以，如果你改为写：

```
template Factorial(ulong n)
{
    if(n < 2) // NOTE: no static here
        const Factorial = 1;
    else
        const Factorial = n * Factorial!(n - 1);
} 
```

? - 不起作用。检查[http://dpaste.dzfl.pl/3fe074f2](http://dpaste.dzfl.pl/3fe074f2)。原因是静态 if 和“正常” if 具有不同的语义。*采用在编译时*`static if`评估的赋值表达式（[http://dlang.org/version.html，“Static](http://dlang.org/version.html) If”部分），而普通 if 采用在运行时评估的表达式。

 *`Static if`只是执行 Emilio 提到的“条件编译”的一种方法。D 也有`version`关键字。所以 Emilio 的第一个条件编译示例（在 D 中不起作用）变成了这样：

```
version (XXX) { 
    // XXX defined 
} else { 
    // XXX not defined 
} 
```

如果您想为此使用 static if，您可以编写如下内容：

```
enum int XXX = 10;
static if (XXX == 10) {
    pragma(msg, "ten");
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T15:03:48.733

Andrei Alexandrescu 有一个很好的演讲，如果在 C++ 上下文中，你可以在这里观看关于静态的演讲（如果这是你所要求的）。

链接：[http ://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Static-If-I-Had-a-Hammer](http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Static-If-I-Had-a-Hammer)

简短的回答——它使某些模板元编程的语法更加直观。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-01T09:30:30.243

Andrei Alexandrescu 最近`static if`通过一些很好的例子（[视频](https://www.youtube.com/watch?v=es6U7WAlKpQ)、[幻灯片](http://dconf.org/2017/talks/alexandrescu.pdf)）呼吁巧妙地使用“内省设计”。

他的演讲中的一个直接示例是实现一个通用容器，例如使用 Robin Hood 哈希的哈希表，其中与表中的每个条目一起保存一个额外的数据（探测计数）。我们可以通过`static if`根据对齐方式将探测计数放在键旁边来自动优化内存，优化索引类型的整数宽度等。

从谈话中转述：

```
struct RobinHashTable(K, V, size_t maxLength) {
  static if (maxLength < ushort.max-1) {
    alias CellIdx = ushort;
  } else {
    alias CellIdx = uint;
  }

  static if (K.sizeof % 8 < 7) {
    align(8) struct KV {
      align(1):
        K k;
        ubyte cellData;
      align(8):
        V v;
    }
  } else {
    align(8) struct KV {
      align(8):
        K k;
        V v;
      align(1):
        ubyte cellData;
    }
  }
} 
```*

# windows-phone-7 - Expression Blend 不加载项目

> ID：12369980
> 
> 赞同：0
> 
> 时间：2012-09-11T12:41:45.787
> 
> 标签：windows-phone-7, sdk, expression-blend

突然间，我的 Expression Blend 不再起作用了。我正在 *VS for WP*7 中开发一个应用程序，当我尝试在 Blend 中打开该项目时，界面被加载，Blend 的标题栏显示我的 .sln 文件在那里 - 但没有显示任何内容。

每个面板都是空的。

我尝试在 VS 中重建我的项目，但这没有帮助。我正在使用 Expr。混合 4。

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:12:36.150

好吧，我明白了。看起来有点可笑，但是

我必须进入 E.Blend 左侧的项目选项卡。从那里我选择了我的主要 xaml 页面，然后 Blend 加载了我的项目。

# python - 使用 os.system 执行 psftp 命令

> ID：12369982
> 
> 赞同：-1
> 
> 时间：2012-09-11T12:41:47.987
> 
> 标签：python, sftp

目前我正在研究python，我需要使用以下`psftp`命令从其他网络获取一些文件：

```
import os
psftpCmd='psftp sftp.example.com -l user -pw pass'
os.system(psftpCmd) 
```

但是当运行上面的代码时，我得到以下错误：

```
sh: psftp: command not found 
```

我可以知道命令有什么问题以及如何执行`psftp`如上所示的命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:50:33.143

假设已安装 psftp 并且您可以访问 shell：

找到可执行文件的完整路径。`which psftp`从命令行运行并替换字符串中的值。例如，如果`which psftp`返回“/usr/local/bin/psftp”，则尝试：

```
import os
psftpCmd='/usr/local/bin/psftp sftp.example.com -l user -pw pass'
os.system(psftpCmd) 
```

尽管实际上您应该使用库而不是通过`system()`调用来运行它。甚至`subprocess.popen`会更好。

# c# - 固定宽度平面文件和特殊字符

> ID：12369988
> 
> 赞同：0
> 
> 时间：2012-09-11T12:42:02.667
> 
> 标签：c#, serialization

在我的项目中；我需要查询我们的数据库，然后使用结果集生成一个固定宽度的平面文件。我正在使用基于[这个](https://stackoverflow.com/questions/6293884/custom-serialization-of-an-object-in-net)问题的解决方案。对于 99% 的记录来说，一切都很好，但我遇到了一种导致问题的情况：

如果出现“特殊字符”，例如 ® 或 ™；写入文本文件时，它最终会倾斜列的长度。当我检查结果时，如果出现 ® 符号，我会得到 ®，如果出现 ™，我会得到 â„¢。

我想将乱码字符保留在最终结果中（暂时），因为它会在验证/清理过程中稍后被拾取。（即在大小像“5½”的情况下；我不想简单地删除½，因为它看起来像“5”）

有没有办法获得这些特殊字符将被序列化的实际长度，以便我可以考虑到这一点？

**编辑** 这是进行文本编写的代码：

```
using (var fileStream = new StreamWriter(fileName, false))
            {
                foreach (
                    var fileRecord in recordTypes.Select(record => record.RetrieveForImport(startDate, endDate)).SelectMany(records => records))
                {
                    try
                    {
                        fileStream.WriteLine(fileRecord.Serialize());
                    }
                    catch (MySerializationException ex)
                    {
                        LogSerializationError(fileRecord, ex.Message);
                    }
                }
            } 
```

之后我使用 TextPad 来验证结果。

# vb.net - 如何让滚动条在 VB.Net 中达到最大值

> ID：12369994
> 
> 赞同：1
> 
> 时间：2012-09-11T12:42:15.660
> 
> 标签：vb.net, scrollbar

我正在使用垂直滚动条 (VScrollBar) 对象并设置最小值和最大值...

```
MyScrollBar.Minimum = 0
MyScrollBar.Maximum = 243 
```

但发现无论我单击向下箭头多少次，该值都不会超过 234。滚动条太短以至于实际的滑动条是不可见的，只有箭头可用。

如何设置滚动条以达到最大值？

我可以在最大值上加一点，但这似乎有点小题大做，如果滚动条改变长度可能会带来困难，这将在充足的时间内完成。我还查看了属性，找不到任何可能的罪魁祸首，或者至少没有一个值在 11 左右的罪魁祸首。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-02-05T16:49:25.123

尝试将最大值设置为：

```
Maximum = Max_you_want + LargeChange - 1 
```

这对我有用。

# magento - Magento：用于多商店设置的时事通讯电子邮件地址导入？

> ID：12369995
> 
> 赞同：0
> 
> 时间：2012-09-11T12:42:17.050
> 
> 标签：magento, magento-1.7

我有一个 Magento 企业安装，其中包含 9 个不同的网站。我想在 magento 中导入时事通讯订阅者，但适用于不同的网站。就像美国将有不同的订阅者，而加拿大将有不同的一次。

我找到了这个扩展： http: [//www.magentocommerce.com/magento-connect/newsletter-address-import.html](http://www.magentocommerce.com/magento-connect/newsletter-address-import.html)但这只是将所有电子邮件地址添加到主要默认网站，无法分配商店/网站。

我也找到了这篇文章： http: [//www.magentocommerce.com/boards/viewthread/7626/#t29973](http://www.magentocommerce.com/boards/viewthread/7626/#t29973)，我们可以在其中导入时事通讯订阅者，但这里也无法分配商店/网站 ID。

谁能帮我解决这个问题，或者请告诉我是否有人知道任何脚本或扩展可以根据不同的网站/商店在 magento 中导入时事通讯订阅者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:58:27.520

您可以扩展时事通讯模块，以便您可以选择要发送时事通讯的国家/地区。（在管理员中，添加一个包含所有国家/地区的新保管箱并重写控制器）。

# iphone - 自动增加内部版本号xcode？

> ID：12369998
> 
> 赞同：10
> 
> 时间：2012-09-11T12:42:35.833
> 
> 标签：iphone, xcode

我正在尝试在这里实现答案：

[增加内部版本号的更好方法？](https://stackoverflow.com/questions/9258344/xcode-better-way-of-incrementing-build-number)

但无法使其正常工作。它失败，错误 2 说“plist 中没有内部版本号”

但是如果我在我的 plist 中输入一个内部版本号，脚本会在下一个版本中清除它，然后同样的事情会再次发生。

有任何想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-11T13:01:14.390

这是我增加内部版本号的方法：

在 Target > Summary 选项卡中，设置初始构建 # ![在此处输入图像描述](../Images/ec87651be5b22e3f34da6c4d10955fa3.png)

然后使用此脚本增加内部版本号：

```
#!/bin/bash
buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" "$INFOPLIST_FILE")
buildNumber=$(($buildNumber + 1))
buildNumber=$(printf "%04d" $buildNumber)
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "$INFOPLIST_FILE" 
```

或者如果你想要十六进制的内部版本号：

```
#!/bin/bash
buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" "$INFOPLIST_FILE")
buildNumber=$((0x$buildNumber))
buildNumber=$(($buildNumber + 1))
buildNumber=$(printf "%04X" $buildNumber)
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "$INFOPLIST_FILE" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-03T10:44:15.533

我的解决方案如下：

```
#!/bin/bash
buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" "$INFOPLIST_FILE")
buildNumber=$(echo $buildNumber | sed 's/0*//')
buildNumber=$(($buildNumber + 1))
buildNumber=$(printf "%04d" $buildNumber)
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "$INFOPLIST_FILE" 
```

使用 sed 删除前导零，增加值并使用四位零填充数字将其打印回 plist 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T01:54:54.390

如果您使用 Jenkins，您可以使用 Jenkins 内部版本号

```
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $BUILD_NUMBER" "$INFOPLIST_FILE"; 
```