# StackOverflow 问答 10167000-10167999

# android - 如何使移动应用程序跨平台并最大限度地减少编写冗余代码？

> ID：10167007
> 
> 赞同：0
> 
> 时间：2012-04-15T23:14:22.997
> 
> 标签：android, ios, mobile, cordova

我正在制作一款具有一些复杂游戏逻辑的手机游戏。我想用 JavaScript 编写逻辑代码，以便可以在浏览器和 node.js 上的服务器中运行它。但是，我认为我还需要在移动客户端（iOS / Android）上运行的逻辑。有没有办法在 iOS / Android 上运行 JS，这样我就不必为一个游戏规则编写和维护三个独立的代码库了？

我看着PhoneGap。

有使用过PhoneGap 的人推荐这个吗，反之亦然？

我的目标是尽量减少在游戏规则稍作修改时维护​​两三个代码库的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T23:33:24.810

解决此问题的一种方法是使用移动 JS 框架（Sencha Touch、jQuery Mobile）使用 JavaScript 构建您的应用程序，然后使用 PhoneGap（如您所说）或类似产品（如 Titanium Mobile）包装它。这个过程大多是无痛的，并且可以很容易地自动化。

只要您的应用程序在图形上不复杂（例如游戏）或需要大量的客户端计算，我认为这是编写跨平台移动应用程序的最佳方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T23:41:08.200

如果您需要它快速运行，您可以在 Appcelerator Titanium 中编写您的应用程序，您可以在其中使用 Javascript 编写代码。然后将 Javascript 代码“编译”到本机应用程序中。

见[http://developer.appcelerator.com/](http://developer.appcelerator.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T00:28:46.067

您可以使用 Phonegap Build (build.phonegap.com) 为所有应用程序维护相同的代码库。它只需要您上传包含 html/javascript 文件的 zip 文件，并为所有平台生成捆绑包。虽然它仍然是最近的，但它已经非常稳定了

# c# - 在Windows Phone上将json反序列化为对象c#

> ID：10167009
> 
> 赞同：4
> 
> 时间：2012-04-15T23:14:41.717
> 
> 标签：c#, json, windows-phone-7, datacontractjsonserializer

我正在尝试将从 Web 服务器接收到的 json 数据服务反序列化为对象。到目前为止，我刚刚设置了一个 httpwebrequest，它从服务器获取 json 数据。

```
public void DoHttpWebRequest(string url)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
    request.Method = "GET";
    request.BeginGetResponse(new AsyncCallback(onGetResponse), request);
}

public void onGetResponse (IAsyncResult asyncResult)
{
    HttpWebRequest myRequest = (HttpWebRequest)asyncResult.AsyncState;
    HttpWebResponse myResponse = (HttpWebResponse)myRequest.EndGetResponse(asyncResult);

    using (StreamReader httpwebStreamReader = new StreamReader(myResponse.GetResponseStream()))
    {
        string results = httpwebStreamReader.ReadToEnd();
        Dispatcher.BeginInvoke(() => textBlock5.Text = results);
    }
    myResponse.Close();
} 
```

这将返回以下数据。

```
{"BodyStyle":"Sports","ChassisNumber":19316,"Colour":"Ivory","Condition":"Showroom","Model":"Silver Wraith","Owners":[{"DateBought":"\/Date(-207269643940+0100)\/","DateSold":"\/Date(-113297981580+0100)\/","ID":651,"Owner":{"Address":null,"Decorations":null,"Email":"jvcuejnj.ldmfkiftvh@wx-sts.net","Forename":"Ismael","ID":637,"Mobile":"008547-4461","Surname":"Anderson","Telephone":"366892-9004","Title":"Mr"}}],"RegistrationNumber":"RB4107  ","Year":1909} 
```

如何使用 DataContractJsonSerializer 将数据解析为具有以下类的对象？

```
public class CarOwnershipRecord { 
    public int? ID{ get; set; }
    public DateTime? DateBought{ get; set; } 
    public DateTime? DateSold{ get; set; } 
    public Person Owner{ get; set; } 
} 

public class Car { 
    public string BodyStyle{ get; set; } 
    public short? ChassisNumber{ get; set; } 
    public string Colour{ get; set; } 
    public string Condition{ get; set; } 
    public string Model{ get; set; }
    public List<CarOwnershipRecord> Owners{ get; set; } 
    public string RegistrationNumber{ get; set; } 
    public short Year{ get; set; } 
}

public class CarPhoto {
    public string RegistrationNumber{ get; set; }
    public byte[] Photo{ get; set; }
    // The Photo field contains the binary contents of an image file
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:51:40.547

这样的事情应该会给你正确的结果：

```
byte[] data = Encoding.UTF8.GetBytes(jsonString);
MemoryStream memStream = new MemoryStream(data);
DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(Car));
Car car = (Car) serializer.ReadObject(memStream); 
```

虽然如果你想跳过 MemoryStream 部分，你可以直接从响应流中反序列化

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T04:21:07.647

你可以试试这个：http: [//json.codeplex.com/](http://json.codeplex.com/)

# sql - SQL Server 中的存储过程错误

> ID：10167010
> 
> 赞同：-2
> 
> 时间：2012-04-15T23:15:00.180
> 
> 标签：sql, sql-server

我无法运行此查询，错误可能出在哪里，因为没关系。谢谢

```
CREATE PROCEDURE Test
   @PageSize int,
   @PageNumber int 
AS
   SELECT 
       PK_ID, Test, Descripcion 
   FROM 
      (SELECT
           PK_ID, Test, Descripcion, 
           ROW_NUMBER() OVER (ORDER BY Test, PK_ID) AS RowNumber 
      FROM 
        Mydatabase
     ) AS Test
WHERE 
    RowNumber BETWEEN @PageSize * @PageNumber AND @PageSize * (@PageNumber) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T23:48:17.063

根据您的页面编号方式（从 0 或从 1 开始），您可能应该将您的`WHERE`子句更改为以下之一：

1.  如果页码从 0 开始：

    ```
    WHERE RowNumber BETWEEN @PageSize * @PageNumber + 1
                        AND @PageSize * (@PageNumber + 1) 
    ```

2.  如果页码从 1 开始：

    ```
    WHERE RowNumber BETWEEN @PageSize * (@PageNumber - 1) + 1
                        AND @PageSize * @PageNumber 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T23:27:22.217

尝试将页面添加到页面范围的上限：

```
WHERE RowNumber BETWEEN @PageSize * @PageNumber 
AND @PageSize * (@PageNumber + 1) -- added 1 here 
```

# assembly - Hello World 引导加载程序在第一个字符后挂起

> ID：10167013
> 
> 赞同：2
> 
> 时间：2012-04-15T23:15:37.580
> 
> 标签：assembly, operating-system, x86, bootloader

我正在将此代码用于 Hello World 引导加载程序。它没有打印出“Hello world\n”，而是打印出一个“H”并挂起。我已经使用 loadb 成功打印出消息，但我不明白为什么这种方法不起作用，因为它看起来是等效的。

```
[ORG 0x7c00]
[BITS 16]

    xor ax, ax  ;make it zero
    mov ds, ax

    mov ecx, msg
bios_print:
    mov al, [ecx]
    add ecx,1
    cmp al, 0  ;zero=end of str
    je hang    ;get out
    cmp al,100
    jge hang
    mov ah, 0x0E
    int 0x10
    jmp bios_print

hang:
    jmp hang

msg   db 'Hello World', 13, 10, 0

   times 510-($-$$) db 0
   db 0x55
   db 0xAA 
```

编辑：我将 [BITS 64] 更改为 [BITS 16]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T00:51:19.947

您的程序完全按照您编写的方式运行。ASCII 中的小写字母`e`表示为`65h`，等于十进制的 101。因此，执行`cmp al, 100 / jge hang`if `e`(101) is in`al`会导致跳转到 label `hang`。一切安好。:)

解决您的问题的方法是简单地删除该行，因为我真的看不出它有任何用途 - 看看您如何让字符串由 a 终止`\0`，循环将在到达末尾时结束。

不过，还有四个额外的提示：

*   请记住，标志是在（几乎）每个算术和逻辑运算之后设置的。因此，实际上没有必要在 a`cmp`之后执行 a `add`，特别是如果跳转的唯一条件可以由其中一个标志表示。在这种情况下，`add ecx, 1 / cmp al, 0 / je hang`可以用很简单的`add ecx, 1 / jz hang`. 这为您节省了两个字节，在这些引导扇区条件下非常有价值。
*   在调用 BIOS 例程时，您**确实**希望保留您在应用程序中使用的寄存器。BIOS 来自不同的供应商，其中一些可能无法正常运行并破坏您在寄存器中的内容。该指令`pusha`就是这样做的。在调用任何不是您自己编写的代码时，保留所有运行时信息通常是一个经验法则（尽管这在更“文明”的环境中听起来可能很极端——但 BIOS 和通用实模式代码不是）。
*   当计算机启动时，它处于实模式。此模式下的默认操作数和地址大小为 16 位（地址通过分段人为扩展为 20 位）。当然，您可以使用寄存器的 32 位部分，但必须在指令之前生成操作数大小前缀才能做到这一点。这是另一个字节，你现在只有 510 个。:) 因此，`mov ecx, msg`这只是多余的——地址的偏移部分永远不会超过 16 位。也一样`add ecx, 1`。在这两种情况下都替换`ecx`为。`cx`
*   使用`hlt`说明。它使你的 CPU 的血压低得多，而且到处都强调它真的没有用。只需`hlt`在`hang`标签之后和跳转之前添加。

# java - 使用 maven 下载 Jetty 源代码和 Javadoc jar 并将它们链接到 Eclipse 中的二进制 jar

> ID：10167016
> 
> 赞同：2
> 
> 时间：2012-04-15T23:16:01.560
> 
> 标签：java, eclipse, maven, jetty

我正在开发一个使用 Eclipse IDE (3.6) 用 Ja​​va (1.6) 编写的 Web 应用程序项目，并决定使用 Jetty (8.0.4) 作为 Web 服务器和 servlet 容器。我正在使用 maven (2) 进行依赖和构建管理。开始时，我决定编写一个简单的测试应用程序，以确保我的工作是端到端的。这工作正常，我能够启动服务器并创建一些简单的 servlet。但是，maven 没有下载源和 Javadoc jar，因此当鼠标悬停在方法名称或类上时，找不到文档。它只报告以下内容：

> 打开声明 javax.servlet.http.HttpServletResponse 注意：该元素既没有附加源也没有附加 Javadoc，因此找不到 Javadoc。

我已经搜索了如何做到这一点，我能找到的只是Eclipse 网站上的[这个页面](http://wiki.eclipse.org/Jetty/Starting/Downloads#Source_Download)，该页面描述了如何配置 maven 来下载源模块。它表示源模块 jar 与二进制 jar 具有相同的名称，后缀为“-sources”。我为每个二进制模块添加了源模块依赖项到我的 Maven 配置中，如下所示：

```
<dependency>
    <groupId>org.eclipse.jetty</groupId>
    <artifactId>jetty-server</artifactId>
    <version>${jettyVersion}</version>
</dependency>

<dependency>
    <groupId>org.eclipse.jetty</groupId>
    <artifactId>jetty-server-sources</artifactId>
    <version>${jettyVersion}</version>
</dependency> 
```

但是，maven 找不到源模块依赖：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Jetty Servlet Example 0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
Downloading: http://repo1.maven.org/maven2/org/eclipse/jetty/jetty-server-sources/8.0.4.v20111024/jetty-server-sources-8.0.4.v20111024.pom
[WARNING] The POM for org.eclipse.jetty:jetty-server-sources:jar:8.0.4.v20111024 is missing, no dependency information available
Downloading: http://repo1.maven.org/maven2/org/eclipse/jetty/jetty-servlet-sources/8.0.4.v20111024/jetty-servlet-sources-8.0.4.v20111024.pom
[WARNING] The POM for org.eclipse.jetty:jetty-servlet-sources:jar:8.0.4.v20111024 is missing, no dependency information available
Downloading: http://repo1.maven.org/maven2/org/eclipse/jetty/jetty-util-sources/8.0.4.v20111024/jetty-util-sources-8.0.4.v20111024.pom
[WARNING] The POM for org.eclipse.jetty:jetty-util-sources:jar:8.0.4.v20111024 is missing, no dependency information available
Downloading: http://repo1.maven.org/maven2/org/eclipse/jetty/jetty-server-sources/8.0.4.v20111024/jetty-server-sources-8.0.4.v20111024.jar
Downloading: http://repo1.maven.org/maven2/org/eclipse/jetty/jetty-servlet-sources/8.0.4.v20111024/jetty-servlet-sources-8.0.4.v20111024.jar
Downloading: http://repo1.maven.org/maven2/org/eclipse/jetty/jetty-util-sources/8.0.4.v20111024/jetty-util-sources-8.0.4.v20111024.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.098s
[INFO] Finished at: Sun Apr 15 15:42:59 PDT 2012
[INFO] Final Memory: 5M/180M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project hello-world: Could not resolve dependencies for project org.example:hello-world:jar:0.1-SNAPSHOT: The following artifacts could not be resolved: org.eclipse.jetty:jetty-server-sources:jar:8.0.4.v20111024, org.eclipse.jetty:jetty-servlet-sources:jar:8.0.4.v20111024, org.eclipse.jetty:jetty-util-sources:jar:8.0.4.v20111024: Could not find artifact org.eclipse.jetty:jetty-server-sources:jar:8.0.4.v20111024 in central (http://repo1.maven.org/maven2) -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

有关如何配置 Maven 以下载 Jetty 源代码和 javadocs 的任何指示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T02:59:19.050

尝试使用以下 Maven 命令重新创建 Eclipse 项目：

```
mvn eclipse:eclipse -DdownloadSources=true -DdownloadJavadocs=true 
```

另一种选择是更新您的 pom.xml：

```
<plugin>
    <artifactId>org.eclipse.jetty</artifactId>
    <version>${jettyVersion}</version>
    <configuration>
        <downloadSources>true</downloadSources>
        <downloadJavadocs>true</downloadJavadocs>
    </configuration>
</plugin> 
```

这两种解决方案仅在源代码和 javadocs 提供给您从中下载的存储库时才有效。

就您的情况（和您的版本）而言，它应该可以工作，因为您可以在 Jetty 存储库中找到[sources.jar 。](http://repo2.maven.org/maven2/org/eclipse/jetty/jetty-server/8.0.4.v20111024/jetty-server-8.0.4.v20111024-sources.jar)

# c++ - 使用 boost::python 的自定义绑定

> ID：10167017
> 
> 赞同：1
> 
> 时间：2012-04-15T23:16:09.893
> 
> 标签：c++, boost-python

> **可能重复：**
> [从 C++ 调用 Python 函数](https://stackoverflow.com/questions/4331599/calling-python-functions-from-c)

我想使用 boost::python 库在我的应用程序中进行 Python 绑定。在阅读了文档后，我意识到使用将调用 C++ 函数的函数创建一个新对象非常简单。虽然，我想做一些不同的事情。

假设我有一个函数在玩家使用游戏中的项目时触发，我希望它调用一个 Python 文件，如下所示：

def onUse(player, item, position): //我的代码在这里

我将如何使用 boost::python 来实现它？我的意思是，我将如何创建一个带有预定义参数的“onUse”函数，以及如何让我的 C++ 函数在 Python 文件中调用“onUse”？

# android - If 语句的 else 中的 If 语句

> ID：10167018
> 
> 赞同：0
> 
> 时间：2012-04-15T23:16:14.790
> 
> 标签：android, if-statement

Java/android 仍然是新手，因此试图找出编写多级 if 语句的最佳方法。我正在尝试做的是一个需要检查玩家/NPC是否还活着的战斗系统。如果他们还活着，那么它将检查他们是否获得了重击。如果他们没有暴击，那么将查看他们是否击中或错过了。

```
combat = mydbhelper.getCombat();
startManagingCursor(combat);
if (playerCurHp == 0) {
    combat.moveToPosition(11);
    npcCombatStory = combat.getString(combat.getColumnIndex(dbhelper.KEY_COMBATDESC));
} else {
    if (playerCritFlag.equals("Critical")) {
        combat.moveToPosition(2);
        playerCombatStory = combat.getString(combat.getColumnIndex(dbhelper.KEY_COMBATDESC));
    } else {
        if (playerHitFlag.equals("Hit")) {
            combat.moveToPosition(1);
            playerCombatStory = combat.getString(combat.getColumnIndex(dbhelper.KEY_COMBATDESC));
        }
        if (playerHitFlag.equals("Miss")) {
            combat.moveToPosition(3);
            playerCombatStory = combat.getString(combat.getColumnIndex(dbhelper.KEY_COMBATDESC));
        }
    }
}           
if (npcCurHp == 0) {
    combat.moveToPosition(10);
    npcCombatStory = combat.getString(combat.getColumnIndex(dbhelper.KEY_COMBATDESC));
} else {
    if (npcCritFlag.equals("Critical")) {
        combat.moveToPosition(5);
        npcCombatStory = combat.getString(combat.getColumnIndex(dbhelper.KEY_COMBATDESC));
    } else {
        if (npcHitFlag.equals("Hit")) {
            combat.moveToPosition(4);
            npcCombatStory = combat.getString(combat.getColumnIndex(dbhelper.KEY_COMBATDESC));
        }
        if(npcHitFlag.equals("Miss")) {
            combat.moveToPosition(6);
            npcCombatStory = combat.getString(combat.getColumnIndex(dbhelper.KEY_COMBATDESC));
        }
    }
} 
```

是我正在使用的。当我将 if 语句全部分开时正在工作。但它会检查每一个并做我不需要的动作（如果他们击中，拉弦，如果暴击拉另一个，那么如果再次拉死）。当它找到匹配的“标志”时试图让它停止。当玩家击中我的掷骰时，它会将标志设置为“命中”，如下面的代码。

```
Random attackRandom = new Random();
int attackRoll = attackRandom.nextInt(100);
totalAtt = attackRoll + bonusAttack + weaponAtt + stanceAtt;
Random defensiveRandom = new Random();
int defenseRoll = defensiveRandom.nextInt(100);
npcDef = defenseRoll + npcDodge + npcBonusDodge;
if (totalAtt > npcDef) {
    playerHitFlag = "Hit";
    playerDamage();
} else {
    playerHitFlag = "Miss";
    npcAttack();
} 
```

最后，它使用这些 playerCombatStory 和 npcCombatStory 字符串并使用它们来设置文本，以向玩家展示在战斗回合中发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T23:23:23.483

我认为您正在寻找 else if 语句：

```
if (condition) {

}
else if (other_condition) {

}
else if (another_condition) {

}
else {
   // There can only be one else statement in a given if-else block
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T23:20:09.313

你的问题不清楚。但仍然可以提供有意义的建议。

就个人而言，我发现这段代码很难阅读。我认为随着您的逻辑变得更加复杂，将来很难维护。

我认为您需要将所做工作的逻辑与您的决定方式分开。将已完成的操作封装在 Command 对象中，并使用映射或状态机来查找要执行的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T05:36:33.463

我会将类型更改`npcCritFlag`为`int`或`enum`。然后使用`switch`语句`case`

这应该看起来更好，更容易理解

# ms-access - 如何通过 HTTP 连接到位于 Web 服务器上的 Access 2003 数据库？

> ID：10167021
> 
> 赞同：1
> 
> 时间：2012-04-15T23:16:49.000
> 
> 标签：ms-access, vb6

我有一个位于 (Http://SubDomain.DomanName.Com/Folder1/mydb.mdb) 的 MS-Access 2003 和 Visual Basic 6.0 ..... 如何建立连接..

我只是主机域上的注册用户，具有子域和对（Folder1）目录的完全访问权限....

如何连接到这个（路径）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T00:34:56.467

你不能。

Jet 是一种嵌入式数据库技术。数据库引擎在进程内运行，需要对所涉及的 MDB、LDB 和 MDW 文件进行完整的文件 I/O 访问。

有可能使用[远程数据服务](http://msdn.microsoft.com/en-us/library/windows/desktop/ms676188%28v=vs.85%29.aspx)，但这是一种“未连接”的访问模型，基本上是一种 Web 服务。第三方托管服务提供商不太可能提供此服务或让您拥有自己的能力。

相反，您可能必须设计和实现某种 Web 服务，或者改为在服务器上运行中间层。

# javascript - Javascript - element.madeUpAttribute 与 IE8 中的 element.getAttribute('madeUpAttribute') 相同-

> ID：10167023
> 
> 赞同：0
> 
> 时间：2012-04-15T23:16:53.010
> 
> 标签：javascript, html

如果我在一个元素上添加了一个虚构的属性，那么`element.madeUpAttribute`应该返回 false。（在现代浏览器中确实如此。）

然而在 IE8- 它返回属性值，就像：`element.getAttribute('madeUpAttribute')`.

仅当浏览器支持该属性时，有什么方法可以使其返回属性值？

多谢你们！

## [更新]

这是一个演示：http: [//jsfiddle.net/Daniel_Hug/rWz2n/](http://jsfiddle.net/Daniel_Hug/rWz2n/)

这是它在 IE8 中的样子：

[http://f.cl.ly/items/0d1t3l2E1n1a3j0l1W2j/IE8.png](http://cl.ly/FsUf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T23:22:42.223

检查是否支持某些功能`'madeUpAttribute' in element`在几种情况下对我来说是诀窍。

实际上，您可以尝试检查元素的原型。

旧版 IE 中没有 DOM 对象的原型，但有一个有趣的[古老特性](http://msdn.microsoft.com/en-us/library/bb263996%28VS.85%29.aspx#dude1001_topic3)

```
if (element.prototype) {
  return 'madeUpAttribute' in element.prototype
} else {
  document.expando = false;
  var hasProp = true;
  try {
    element.madeUpAttribute = element.madeUpAttribute;
  } catch(e) {
    hasProp = false;
  }
  document.expando = true;
  return hasProp;
} 
```

不过，这将适用于第一个任务。设置属性后，认为它确实存在。

# python - 在单元测试中使用带有 assertRaises 的 errno

> ID：10167027
> 
> 赞同：4
> 
> 时间：2012-04-15T23:17:51.720
> 
> 标签：python, unit-testing

我在单元测试中使用 assertRaises 来测试特定异常的引发。

```
assertRaises(IOError, testToRun, passedValues) 
```

虽然我需要捕获的一些异常具有特定的错误号 (errno)，但我不想收集基本异常，而是想捕获与该异常相关的特定错误号。像这样的东西，虽然它显然不起作用:)

```
assertRaises(IOError.errno(2), testToRun, passedValue) 
```

当我想捕获我一直在使用的特定编号的异常时，为了解决这个问题：-

```
try:
    testToRun(passedValues)
except IOError, e:
    if e.errno == 2:
        pass
    else:
        raise 
```

我确信它并不完美，但它可以工作，但想知道是否可以使用 assertRaises 来做同样的事情，这是一种更紧凑的方式。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T23:20:27.367

从 2.7 开始，可以[`assertRaises`](http://docs.python.org/library/unittest.html#unittest.TestCase.assertRaises)与上下文管理器一起使用：

```
with self.assertRaises(SomeException) as cm:
    do_something()

the_exception = cm.exception
self.assertEqual(the_exception.error_code, 3) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T06:31:12.170

您还可以使用当前代码创建一个新的 TestCase 函数：

```
def assertRaisesErrNo(self, exc, errno, f, *args, **kwargs):
    try:
        self.assertRaises(exc, f, *args, **kwargs)
    except IOError, e:
        if e.errno == errno:
            pass
        else:
            raise

unittest.TestCase.assertRaisesErrNo = assertRaisesErrNo 
```

然后像任何其他`assert`方法一样使用它：

```
class TestSomething(unittest.TestCase):
    def test_somthing(self):
        self.assertRaisesErrNo(IOError, 2, myfunction) 
```

[您还可以使用contextlib.contextmanager](http://docs.python.org/library/contextlib.html#contextlib.contextmanager)轻松地将其转换为上下文管理器

# ios - 保存 iOS 应用场景状态

> ID：10167032
> 
> 赞同：11
> 
> 时间：2012-04-15T23:18:16.400
> 
> 标签：ios, objective-c, iphone, cocoa-touch

这可能是不可能的，但我试图在场景转换之间保存我的应用程序的状态，但我不知道该怎么做。目前我喜欢这样的方式，当你运行一个应用程序并点击主页按钮时，你可以回到你离开的那个应用程序，但是如果你在场景之间转换（在故事板中），一旦你回到那个场景应用程序状态未保存。

我只有两个不同的场景需要保存（你从一个到另一个来回转换）。如何在不占用精确内存的情况下保存故事板场景状态？

**更详细：**这是我的整个故事板。您可以使用加号工具栏按钮在场景之间来回切换。在第二个场景中，用户可以点击表格视图单元格，一个真实的图像将填充图像视图（见图 1.2）

![图 1.1](../Images/a18b845ecd3ce7aca60f5910f880e875.png)图 1.1

在图 1.2 中，您可以看到当您点击多个表格视图单元之一时会发生什么（弹出一个图像视图。）

![图 1.2](../Images/4ae584c93f0bba8e34ac8e28abdd7450.png)图 1.2

**问题：**当您点击填充图像视图的表格视图单元格时（如图 1.2 所示），如果您停留在该场景甚至点击 iPhone 主页按钮（如果您点击 iPhone 主页按钮然后重新打开app 场景的状态已保存，充满简单图像的图像视图仍然像我们离开它一样显示），但是如果我（使用加号按钮）转换回第一个场景，然后在第一个场景上使用加号按钮回到第二个场景，我创建的图像视图（如图 1.2 所示）消失了，第二个场景在加载时没有保存我们填充的状态和图像视图。

**编辑：**我尝试对两个场景使用相同的视图控制器，但它没有解决问题。

**更新：**我刚刚找到以下代码（我认为存储视图状态）。我怎么能用这个，这就是我一直在寻找的吗？

```
MyViewController *myViewController=[MyViewController alloc] initWithNibName:@"myView" bundle:nil];
[[self navigationController] pushViewController:myViewController animated:YES];
[myViewController release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:28:36.597

图 1.1 有一个根本缺陷，我认为这是您问题的基础。

Segues（故事板上控制器之间的箭头）创建**新**版本的`UIViewControllers`. 你有循环序列。因此，当您通过 segue “返回”到原始屏幕时，实际上是通过创建新版本来带您前进。

这可能会给内存使用带来重大问题，但这也意味着您无法维护状态，因为每个新创建的项目都是空的。

由于您使用的是 a`UINavigationController`并且`pushViewController:animated:`您应该“弹出”您的控制器以摆脱它。

在您的“第二个”场景中，从 + 按钮中删除 segue 并创建`IBAction`一个`touchUpInside`事件。在`IBAction`代码中添加“pop”

```
- (IBAction)plusButtonTapped {
    [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T00:19:46.327

我建议将两件事结合起来：1\. 接受[DBD](https://stackoverflow.com/a/10305524/2945616)的建议并确保您不会不断创建新视图 2\. 创建一个共享类作为数据控制器（对于高尔夫球手，以便数据是独立的现场）

制作segues的正确方法是让一个从左侧的视图控制器引导到右侧的视图控制器。但是，要关闭右侧的那个，您可以使用

```
-(IBAction)buttonPushed:(id)sender 
      [self dismissModalViewControllerAnimated:YES];
} 
```

这将带您回到左侧的视图控制器，左侧的视图控制器处于其原始状态。现在的问题是如何保存右边的数据。

为此，您可以创建一个单例类。单例类只有一个实例，所以无论你去右边的视图控制器多少次，数据总是一样的。

单例类实现（名为 DataManager 的类） - 标题

```
@interface DataManager : NSObject {
}

+(id)initializeData;
-(id)init;
@end 
```

单例类实现（一个名为 DataManager 的类） - 主要

```
static DataManager *sharedDataManager = nil;

@implementation DataManager
+(id)initializeData {
    @synchronized(self) {
        if (sharedDataManager == nil)
            sharedDataManager = [[self alloc] init];
    }
    return sharedDataManager;
}

-(id)init { 
    if(self == [super init]) {
    } 
    return self;
}
@end 
```

然后，在您的视图控制器代码中，您可以像这样获取此实例

```
DataManager *sharedDataManager = [DataManager initializeDataManager]; 
```

这样，无论您切换多少次视图，您都将拥有相同的数据。此外，您可以通过将数据和视图控制器分开来更好地遵守 MVC 编程。（[http://en.wikipedia.org/wiki/Model-view-controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T23:33:30.630

我明白你的意思了。这应该发生在每个应用程序中，因为当导航堆栈中的最后一个视图控制器被转换离开时，它会被释放和释放。如果您需要保存诸如文本或对象位置之类的值，plist 可能是要走的路。有关如何使用 plist 的信息，请参阅[此相关问题。](https://stackoverflow.com/questions/5580810/how-to-use-a-plist-as-persistent-storage-for-iphone-app)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T01:16:58.863

苹果不会为你做这件事。您可能应该只使用 NSUserDefaults 保存每个视图的状态，并且每次应用程序启动时重新加载您保存的数据。

如果您将所有内容存储在 CoreData 中，您只需要保存活动视图和一些对象 ID，否则您需要保存您拥有的任何数据。

不要指望 iOS 会在两次启动之间保存您在内存中的任何内容。只需将其存储在 NSUserDefaults 中并每次加载即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T09:30:31.493

将场景的状态存储在 NSUserDefaults 或 plist 文件中，然后在加载场景时只需从那里加载设置即可。如果图像是从 Internet 加载的，您可能还希望将它们本地保存在您的 iphone 硬盘驱动器上，以便运行更顺畅。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T21:11:51.573

我认为您不应该循环使用segues，只需使用从viewcontroller 2 连接viewcontroller 1 的一个就足够了，这样您就可以确保没有制作额外的viewcontrollers（可能是内存问题？）

但是对于您的特定问题，我认为您应该使用核心数据来保存表的确切状态，查看，因为 ios 不会始终保存视图的确切状态。这将需要工作，但你会实现你想要的。您将需要保存确切的照片（使用将保存的代码或枚举）、表格视图中的位置、分数或保存该状态所需的任何数据。

最棒的是，coredata 非常高效，以至于在应用程序重新启动或进入前台时重新加载数据不需要时间，并且到目前为止，我使用 core data 加载了超过 5k 的记录并且工作得很好，而且速度并不慢全部。

当我回到家时，我会提供一个代码，您可能会用它来了解我的意思。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-25T00:36:30.470

这里的关键是：

1.  为您的应用程序所需的数据提供某种存储。这是您的应用程序的数据模型。

2.  让每个视图控制器访问模型，或者至少访问它需要完成工作的模型部分。然后，视图控制器可以使用模型中的数据在它创建时或视图即将出现时对其进行配置。

3.  让每个视图控制器在适当的时间更新模型，例如当视图即将消失时，甚至是每次用户进行更改时。

您可以通过多种方式在内存中组织数据，并且可以通过多种方式将其存储在磁盘上（即长期存储）。属性列表、核心数据、普通旧数据文件和密钥存档都是将数据写入文件的可能性。NSArray、NSDictionary、NSSet 等都是可以用来帮助您在内存中组织数据的类。不过，这些都与让您的视图控制器感觉持久没有任何关系。当然，你会使用它们，但你选择哪一个并不重要，就更新你的视图控制器而言。同样重要的是，您拥有某种模型，并且您的视图控制器可以访问它。

通常，应用程序委托设置模型，然后根据需要将其传递给视图控制器。

其他可能有帮助的事情是，当您的视图控制器从导航堆栈中弹出时，您不必让它们被删除*。*如果需要，您可以在应用程序委托中设置两个视图控制器，以便它们保持不变。然后，您可以使用已有的，而不是一直创建新的，这样做您会自动获得某种程度的持久性。

# java - Java 应用程序在播放声音后崩溃

> ID：10167041
> 
> 赞同：0
> 
> 时间：2012-04-15T23:19:24.973
> 
> 标签：java, swing, memory, audio

我正在尝试制作一个添加了一堆音效的游戏。在游戏过程中会播放很多不同的声音效果，我不确定如何在 java 中播放声音，所以我只是使用了下面链接中的代码示例：

[http://www.anyexample.com/programming/java/java_play_wav_sound_file.xml](http://www.anyexample.com/programming/java/java_play_wav_sound_file.xml)

但是，以下错误不断出现，并在几分钟后使应用程序崩溃。（有时几秒钟，有时几分钟）

```
Invalid memory access of location 0x54008 rip=0x11c7737fd 
```

我只是制作一个新的 AePlayWave 对象并在需要播放时启动它。像这样：

```
new AePlayWave("Effect.wav").start(); 
```

一切都很完美，除了程序因此而随机崩溃。我怎么能解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T23:26:53.933

这似乎是一个低级访问问题。也许您的音频驱动程序在 Java 尝试访问它的方式中存在错误？

# android - 新评级评论的 Google Play（市场）通知

> ID：10167047
> 
> 赞同：4
> 
> 时间：2012-04-15T23:20:42.970
> 
> 标签：android, app-store, google-play

快速提问，因为我似乎找不到任何东西。当您的应用获得新评论/评分时，有什么方法可以启用某种通知？我错过了一对夫妇，而且几乎每天都检查它很烦人，只是为了确定！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T00:22:12.627

您可以使用[Andlytics](https://play.google.com/store/apps/details?id=de.betaapps.andlytics&hl=en)执行此操作，但免费版本不允许通知（需要为此支付 2.99 美元）。虽然免费的确实有一种一键式的方式来查看你的统计数据和评级，而无需调用我觉得非常有用的网络浏览器/登录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T23:25:48.837

没有唯一的方法是继续检查 android play 市场。只需在您的手机或其他东西上添加书签即可。这就是我对开发人员免费计算器的[应用程序所做的。](https://play.google.com/store/apps/details?id=com.ewe.radixcalculator)

您可以使用以下网址通过网络浏览器访问市场上的任何应用程序页面：https://play.google.com/store/apps/details?id=[put_your_root_package_name_here]

# c# - 使用泛型的结构图配置

> ID：10167049
> 
> 赞同：2
> 
> 时间：2012-04-15T23:21:03.633
> 
> 标签：c#, dependency-injection, structuremap

我有 IRepository 接口，我想使用 NHibernateRepository。

如何使用结构图配置它？

```
protected void ConfigureDependencies()
{
    ObjectFactory.Initialize(
        x =>
            {
                x.For<ILogger>().Use<Logger>();
                x.For<IRepository<T>>().Use<NHibernateRepository<T>>();
            }
        );
} 
```

我在 T 上遇到错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:13:53.003

如果您希望能够将 的所有关闭类型映射`IRepository<>`到 的相应关闭类型`NHibernateRepository<>`，请使用：

```
x.For(typeof(IRepository<>)).Use(typeof(NHibernateRepository<>)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T23:24:08.023

此行期望替换通用参数`T`：

```
x.For<IRepository<T>>().Use<NHibernateRepository<T>>(); 
```

也就是说，哪种类型`T`将存储在存储库中？您已选择`NHibernateRepository`该类作为 的实现`IRepository`，但尚未显示将存储哪个内部类。

或者，查看使用非通用 IRepository，请参见此处：[通用存储库 - IRepository<T> 或 IRepository](https://stackoverflow.com/questions/1853414/generic-repository-irepositoryt-or-irepository)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T23:24:44.723

也许`<T>`用动态替换？

```
x.For<IRepository<dynamic>>().Use<NHibernateRepository<dynamic>>(); 
```

至于第二点，Singleton / Service Locator 模式是一个相当激烈的争论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T07:00:11.080

看看[这篇文章](http://lostechies.com/jimmybogard/2009/12/18/advanced-structuremap-connecting-implementations-to-open-generic-types/)。基本上，你想要做的是这样的：

```
public void ConfigureDependencies()
{
    ObjectFactory.Initialize(x => x.Scan(cfg =>
    {
        cfg.TheCallingAssembly();
        cfg.IncludeNamespaceContainingType<Logger>();
        cfg.ConnectImplementationsToTypesClosing(typeof(NHibernateRepository<>));
    }));
} 
```

关于 ApplicationContext 静态类：如果您真的有一个横切关注点，那么我认为它没有任何问题。

# c# - 向文本框添加一行导致巨大的 CPU 负载：如何优化？

> ID：10167050
> 
> 赞同：0
> 
> 时间：2012-04-15T23:21:17.273
> 
> 标签：c#, winforms, performance, textbox

对于一些日志输出，我有一个 Windows.Forms.Textbox，它通过

```
TB.AppendText("some new text"); 
```

该方法很想重绘包含> 2000行的文本字段，但*感觉*比使用`TB.text += 'some new text`.

我应该使用什么代替 Textbox 来获得低 CPU 负载和快速刷新的快速插入？我考虑过 Listbox，但不确定它是否适合（但是，DebugView 的“listbox”似乎能够处理数十亿行而无需繁重的负载）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:33:51.350

ListBox 或 ListView 会更适合您的提议。

如果大小成为问题，您可以使用 ListView 的 VirtualMode 仅根据用户的滚动加载所需的项目。

# php - PHP计算数组/字符串（标签）中每个值的长度

> ID：10167061
> 
> 赞同：1
> 
> 时间：2012-04-15T23:22:29.650
> 
> 标签：php, arrays, explode

写文章的用户可以选择写一些标签，标签是这样写的：

> 标签1，标签2，标签3

所以标签的存储方式如下：`$tags = "tag1, tag2, tag3";`

我想确保每个标签至少有 3 个字符，所以我需要验证标签。

我试过这个：

```
$tagsstring = explode(",", $tags);

$tagslength = array_map('strlen', $tagsstring);

if (min($tagslength) < 3) {
echo "Error... Each tag has to be at least 3 characters.";
} 
```

有时它似乎有效......但是你写道：

> 标签1，df

它不会给出错误。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T23:25:03.413

```
$tagsstring = explode(",", $tags);

$trimmedtags = array_map('trim', $tagsstring);
$tagslength = array_map('strlen', $trimmedtags);

if (min($tagslength) < 3) {
echo "Error... Each tag has to be at least 3 characters.";
} 
```

使用这个版本，它会在计算长度之前修剪你的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T23:24:42.157

问题是，通过在输入上使用裸逗号爆炸，例如`tag1, df`您使结果数组成为`['tag1', ' df']`- 第二个字符串的长度实际上为 3。

有两种方法可以解决这个问题：

1.  只需`array_map`在`trim`计算长度之前：

    ```
    $tagsstring = explode(",", $tags);
    $tagsstring = array_map('trim', $tagsstring);
    $tagsstring = array_map('strlen', $tagsstring); 
    ```

2.  使用正则表达式并[`preg_split`](http://www.php.net/manual/en/function.preg-split.php)进行拆分：

    ```
    $tagsstring = preg_split("/\s*,\s*/", $tags);
    $tagsstring = array_map('strlen', $tagsstring); 
    ```

**[看到它在行动](http://codepad.viper-7.com/hTALKL)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T23:40:41.037

如果我理解正确，你说你要确保`I want to make sure, every tag has a minimum of 3 characters`

如果您只担心`alphabetical`包机，那么这是另一种游戏，这意味着

`tab1`已验证

`tab200`已验证

`t299`无效

`ta444`无效

如果这是您想要的，那么您可以使用它

```
$tags = "tag1, tag2, ta11  ,tag3 , df ";
$tags = explode ( ",", $tags );

function checker($tag) {
    preg_match_all ( '/[a-zA-Z]/u', $tag, $matches );

    return count ( $matches [0] );
}
foreach ( $tags as $tag ) {
    if (checker ( $tag ) < 3) {
        echo "Error... Each tag ($tag) has to be at least 3 characters.\n";
    }
} 
```

输出

```
Error... Each tag ( ta11  ) has to be at least 3 characters.
Error... Each tag ( df ) has to be at least 3 characters. 
```

# java - 无法在 IA 32 位平台上加载 AMD 64 位 .dll

> ID：10167062
> 
> 赞同：16
> 
> 时间：2012-04-15T23:22:39.223
> 
> 标签：java

我下载了用于线性编程的 Gurobi 包。我导入相应的 gurobi.jar 包。然后运行示例程序。然后出现以下错误：

> 线程“main”中的异常 java.lang.UnsatisfiedLinkError: C:\gurobi460\win64\win64\bin\GurobiJni46.dll: **Can't load AMD 64-bit .dll on a IA 32-bit platform**

然后我下载了window 64 bit Jre，并使用“window-->preference-->Installed JRE”来安装这个新的JRE。

但是，它仍然出现了这个错误。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-15T23:50:22.023

如果安装 64 位 JRE 后仍然出现该错误，则表示运行 Gurobi 包的 JVM 仍在**使用**32 位 JRE。

检查您是否已全局更新 PATH 和 JAVA_HOME 并在您正在使用的命令 shell 中。（也许您只需要退出并重新启动它。）

通过运行“java -version”检查您的命令外壳是否运行正确版本的 Java，并检查它是否显示它是 64 位 JRE。

如果您通过包装脚本/批处理文件启动示例，请确保该脚本使用正确的 JRE。根据需要修改...

如果您通过 IDE 启动示例，请检查 IDE 是否使用正确的 JRE 启动。检查并修改 IDE 配置。详细信息将取决于您使用的 IDE。检查文档。（在这种情况下，仅设置诸如此类的外部环境变量`JAVA_HOME` *可能还不够*。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-07T11:26:29.420

尝试这个：

1.  下载并安装 32 位 JDK。
2.  转到 Eclipse 单击 Java 应用程序分支下的项目（运行方式 → 运行配置...）。
3.  转到 JRE 选项卡并选择备用 JRE。单击 Installed JRE 按钮，添加您的 32 位 JRE 并选择。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2013-09-26T19:59:01.627

卸载（删除）这个：jre、jdk、eclipse。下载此程序的 32 位 (x86) 版本：jre、jdk、eclipse。并安装它。

# sql - 访问 DoCmd.OpenForm 不工作

> ID：10167069
> 
> 赞同：1
> 
> 时间：2012-04-15T23:23:30.550
> 
> 标签：sql, ms-access

寻找第二双眼睛来找出我使用 Access 表单过滤器的问题。我创建了一个搜索表单，填写后将搜索条件附加到一个字符串变量 (strQuery)，该变量被放置在 [WhereCondition] 中以打开一个表单。但是，当脚本运行时，除了没有记录的过滤表单之外什么都没有出现。

这是打开表单的行：

```
DoCmd.OpenForm "ADD_NEW_NCMR", , , strQuery 
```

在运行该行之前，strQuery 等于：

```
1=1 AND [NCMR].[NCMR_NUM] = '12-129' 
```

表单名称和 table.column 组合都是正确的。事实上，使用 DCount 函数返回的结果为 1，这对于本次查询是正确的，对于其他查询也返回正确的数字。这让我认为 where 条件没有任何问题。

```
DCount("[NCMR_NUM]", "NCMR", strQuery) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T05:11:28.600

检查表单的数据输入属性。您可以在表单属性表的“数据”选项卡上找到它。

如果 Data Entry = Yes，表单将不显示现有记录。

听起来您想要 Data Entry = No，以便显示与您的 OpenForm WhereCondition 匹配的现有记录。

# ios - PhoneGap 1.5 (Cordova) + ChildBrowser 白名单问题

> ID：10167074
> 
> 赞同：2
> 
> 时间：2012-04-15T23:24:22.220
> 
> 标签：ios, cordova, childbrowser

我正在使用 PhoneGap 1.5 (Cordova) 和 ChildBrowser 插件（最新版本命名为 PG 1.5 / Cordova）创建应用程序。我使用 ChildBrowser 插件在应用程序中显示网页、PDF 等。

在早期版本的 PG 中，白名单没有那么严格，只要主 URL 被列入白名单，就会加载位于远程服务器/CDN 上的外部资源（css/js 等），这些资源是从 ChildBrowser 中显示的网页调用的。这似乎已经改变，我找不到解决方法。

有没有办法让所有 URL 都被列入白名单，只要它们是通过已经列入白名单的 URL 加载的，还是将每个可能的 URL 列入白名单的唯一方法？

**编辑：** 平台：目标 iOS 4.0 ~ 4.3 使用 XCode 4.1。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T22:13:50.953

我认为如果你想让它工作，你别无选择，只能将xcode 中的*所有url 列入白名单。*对外部 JS/CSS 资源的调用都被认为是来自浏览器的完全独立的调用（他们不知道这实际上是来自主页“父级”的子请求）。我可能是错的，但很确定是这样的。

# ruby-on-rails - Rails：RESTful 查找、初始化或创建

> ID：10167075
> 
> 赞同：3
> 
> 时间：2012-04-15T23:24:26.400
> 
> 标签：ruby-on-rails, ajax, rest

我有一个包含城市的应用程序。我正在寻找一些关于如何以 REST 方式构建控制器的建议，以便我可以通过 AJAX 请求查找、初始化和创建城市记录。例如：

*   给定一个文本字段`city_name`
*   用户输入城市名称，例如“Paris, France”
*   该应用程序检查此位置以查看数据库中是否已经存在这样的城市
*   如果有，则返回城市对象
*   如果没有，则返回一个新记录，初始化名称为“Paris”，国家为“France”，并提示用户确认是否要将这个城市添加到数据库中
*   如果用户说“是”，则保存记录。如果不是，则丢弃该记录并清除该表格。

现在，我的第一个方法是将 Create 操作更改为 use `find_or_create`，以便 AJAX 发布到`cities_path`将导致返回现有城市或创建它并返回它。

没问题...但是，最好设置控制器操作，该操作将接受字符串输入、查找或初始化并返回，然后仅在用户确认生成的记录正确时才创建。理想的情况是把这一切都放在一个动作中，这样 AJAX 请求就可以转到那个 url，服务器用 JSON 对象响应，而 javascript 可以从那里处理事情。我想保留所有用户交互逻辑客户端，并尽量减少实现这一目标所需的请求数量。

关于最干净、最 RESTful 的方式来完成此任务的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T23:33:47.673

一种选择是利用存在？方法：

```
if City.exists?(:name=>params[:city])
  @city = City.find_by_name(params[:city])
else
  @city = City.new(:name=>params[:city])
end 
```

根据评论更新：

```
#show = /city/:id, :id can be int or string

def show
  if params[:id].to_i > 0
    @city = City.find(params[:id])
  elsif City.exists?(:name=>params[:id])
    @city = City.find_by_name(params[:id])
  else
    return redirect_to(:action=>:new, :name=>params[:id])
  end
end

def new
  @city = City.new(params[:name])
end 
```

# java - Java 程序编译并运行，但不起作用

> ID：10167080
> 
> 赞同：-5
> 
> 时间：2012-04-15T23:25:10.993
> 
> 标签：java, swing, awt

当我运行这个程序时，我在文本框中输入信息，按下搜索按钮，但没有任何反应。程序就在那里，直到我按下 Cntrl C 来打破它。看起来它应该可以工作，但我不知道是什么挂起程序。

这是代码： 第一类：

```
import java.io.*;
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.util.*;

public class NameGameFrame extends JFrame
{
    public static String name;
    static JTextField textfield = new JTextField(20);
    static JTextArea  textarea = new JTextArea(30,30);
    public static String num;
    public static String [] fields;
    public static int [] yearRank;
    public static boolean match;
    public static int getInts, marker, year, max;

    public static void main( String[] args)
    {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle("Name Game");
        frame.setLocation(500,400);
        frame.setSize(800,800);

        JPanel panel = new JPanel(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();

        JLabel label = new JLabel("Enter the Name or Partial Name to search:");
        c.gridx = 0;
        c.gridy = 0;
        c.insets = new Insets(2,2,2,2);

        panel.add(label,c);

        c.gridx = 0;
        c.gridy = 1;
        panel.add(textarea,c);

        JButton button = new JButton("Search");
        c.gridx = 1;
        c.gridy = 1;
        panel.add(button,c);

        c.gridx = 1;
        c.gridy = 0;
        panel.add(textfield,c);

        frame.getContentPane().add(panel, BorderLayout.NORTH);
        frame.pack();
        frame.setVisible(true);

        button.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent ae)
            {
                name = textfield.getText();
                java.io.File file = new java.io.File("namesdata.txt");
                try
                {
                    Scanner input = new Scanner(file);
                    num = input.nextLine();
                    NameRecord nr = new NameRecord(name);
                    while (input.hasNext())
                    {

                        if(match = num.toLowerCase().contains(name.toLowerCase()))
                        {
                            nr.getRank();
                            nr.getBestYear(marker);
                        } 
                    }
                }
                catch(FileNotFoundException e)
                {
                    System.err.format("File does not exist\n");
                }
                textarea.setText(fields[0]);
            }
        });

    }
} 
```

这是第二类：

```
import java.io.*;
import java.util.*;

public class NameRecord
{

    public NameRecord( String name)
    {

    }

    public static int getBestYear(int marker)
    {
        switch (marker)
        {
            case 1:
                year = 1900;
                break;
            case 2:
                year = 1910;
                break;
            case 3:
                year = 1920;
                break;
            case 4:
                year = 1930;
                break;            
            case 5:
                year = 1940;
                break;
            case 6:
                year = 1950;
                break;
            case 7:
                year = 1960;
                break;
            case 8:
                year = 1970;
                break;    
            case 9:
                year = 1980;
                break;
            case 10:
                year = 1990;
                break;
            case 11:
                year = 2000;
                break;
        }
        return year;                    
    }

    public static int getRank()
    {
        fields = num.split(" ");
        max = 0;
        for (int i = 1; i<12; i++)
        {   
            getInts = Integer.parseInt(fields[i]);
            if(getInts>max)
            {
                max = getInts;
                marker = i;
            }
        }
        return max;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T23:29:31.747

我认为问题在于，在使用结果时，您在[Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上有一个循环，由于调用`hasNext()`而不是, 可能无法完成（请参阅 参考资料）。`hasNextLine()``nextLine()``button.addActionListener(new ActionListener()`

无论如何，你应该调用一个[SwingWorker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)或类似的来创建一个线程来做需要很长时间的处理，然后使用 EDT 来显示结果。它将使未来的问题更容易调试，并且是正确的做法。

# android - Android：检测是否可以绘制视图

> ID：10167081
> 
> 赞同：0
> 
> 时间：2012-04-15T23:25:31.037
> 
> 标签：android

我有一个视图，根据可用的屏幕空间，不需要可见。有没有一种简单的方法来检测它是否能正确地放在屏幕上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T23:56:13.483

这听起来像是一项根据屏幕尺寸具有不同布局的作业。如果您按屏幕大小设置布局文件夹，您可以为小屏幕或大屏幕指定不同的布局：

```
layout-small
  -> my_layout.xml
layout-large
  -> my_layout.xml
layout-600sw # tablet
  -> my_layout.xml 
```

等等

请参阅[此博客文章](http://developer.android.com/guide/practices/screens_support.html)以供参考

# java - 哈希破解器作业中的 For 循环帮助

> ID：10167084
> 
> 赞同：-1
> 
> 时间：2012-04-15T23:26:11.767
> 
> 标签：java, multithreading

在我正在做的作业中，我们正在制作哈希饼干。我正在实施它以便有我的饼干。java调用worker.java。Worker.java 实现了 Runnable。Worker 将获取 char 列表的开头和结尾、要破解的哈希以及生成哈希的密码的最大长度。我知道我想在 run() 中做一个循环，但我想不出我会怎么做，所以它会达到给定的最大密码长度。我已经发布了到目前为止的代码。我应该研究的任何方向或区域......我认为有一种方法可以通过某种方式来编写循环，但我不知道或找不到正确的语法。哦。。还有。在main中，我划分了x数量的线程可以选择，我知道现在写它只适用于给定的40个可能字符中的偶数。

```
package HashCracker;

import java.util.*;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

public class Cracker {
    // Array of chars used to produce strings
    public static final char[] CHARS = "abcdefghijklmnopqrstuvwxyz0123456789.,-!".toCharArray();    
    public static final int numOfChar=40;

    /*
     Given a byte[] array, produces a hex String,
     such as "234a6f". with 2 chars for each byte in the array.
     (provided code)
    */
    public static String hexToString(byte[] bytes) {
        StringBuffer buff = new StringBuffer();
        for (int i=0; i<bytes.length; i++) {
            int val = bytes[i];
            val = val & 0xff;  // remove higher bits, sign
            if (val<16) buff.append('0'); // leading 0
            buff.append(Integer.toString(val, 16));
        }
        return buff.toString();
    }

    /*
     Given a string of hex byte values such as "24a26f", creates
     a byte[] array of those values, one byte value -128..127
     for each 2 chars.
     (provided code)
    */
    public static byte[] hexToArray(String hex) {
        byte[] result = new byte[hex.length()/2];
        for (int i=0; i<hex.length(); i+=2) {
            result[i/2] = (byte) Integer.parseInt(hex.substring(i, i+2), 16);
        }
        return result;
    }

    public static void main(String args[]) throws NoSuchAlgorithmException
    {

        if(args.length==1)//Hash Maker
        {
            //create a byte array , meassage digestand put password into it 
            //and get out a hash value printed to the screen using provided methods. 
            byte[] myByteArray=args[0].getBytes();
            MessageDigest hasher=MessageDigest.getInstance("SHA-1");
            hasher.update(myByteArray);
            byte[] digestedByte=hasher.digest();
            String hashValue=Cracker.hexToString(digestedByte); 

            System.out.println(hashValue);
        }
        else//Hash Cracker
        {
            ArrayList<Thread> myRunnables=new ArrayList<Thread>();
            int numOfThreads = Integer.parseInt(args[2]);
            int charPerThread=Cracker.numOfChar/numOfThreads;
            int start=0;
            int end=charPerThread-1;

            for(int i=0; i<numOfThreads; i++)
            {
                //creates, stores and starts threads. 
                Runnable tempWorker=new Worker(start, end, args[1], Integer.parseInt(args[1]));
                Thread temp=new Thread(tempWorker);
                myRunnables.add(temp);
                temp.start();
                start=end+1;
                end=end+charPerThread;
            }

        }

    }

import java.util.*;

public class Worker implements Runnable{

    private int charStart;
    private int charEnd;
    private String Hash2Crack;
    private int maxLength;
    public Worker(int start, int end, String hashValue, int maxPWlength)
    {
        charStart=start;
        charEnd=end;
        Hash2Crack=hashValue;
        maxLength=maxPWlength;

    }

    public void run()
    {
        byte[] myHash2Crack_=Cracker.hexToArray(Hash2Crack);

        for(int i=charStart; i<charEnd+1; i++)
        {

            ////// this is where I am stuck.
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T23:30:23.307

`Cracker.numOfChar`是一个整数，所以你的索引符号没有意义。你的意思是使用`Cracker.CHARS[i]`？

# objective-c - 如何在启用 ARC 的情况下正确使用 CFURLCreateCopyAppendingPathComponent？

> ID：10167086
> 
> 赞同：1
> 
> 时间：2012-04-15T23:26:44.480
> 
> 标签：objective-c, ios, url, ftp, automatic-ref-counting

我正在构建一个带有 FTP 连接的应用程序，并尝试使用[SimpleFTPSample](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html)应用程序作为示例。我在我的应用程序中启用了 ARC，而在示例教程中没有禁用它。

由于使用 ARC，我遇到了以下代码的问题：

```
url = [NSMakeCollectable (CFURLCreateCopyAppendingPathComponent
(NULL, (CFURLRef) url, (CFStringRef) self.dirNameText.text, true)
) autorelease]; 
```

1）删除 NSMakeCollectable 和自动释放后：

```
url = (CFURLCreateCopyAppendingPathComponent
(NULL, (CFURLRef) url, (CFStringRef) self.dirNameText.text, true)); 
```

现在我有三个 ARC**转换错误**：“Objective-C 指针类型 NSURL 到 C 指针类型 'CFURLRef (...) 的情况需要一个桥接的情况”和一个语义问题：“分配给 'NSURL *__strong' 的不兼容指针类型'CFURLRef'”。

正如 Xcode 所建议的，我使用 __bridge 进行转换，但我仍然遇到以下代码的转换错误和语义错误之一：

```
url = (CFURLCreateCopyAppendingPathComponent
(NULL, (__bridge CFURLRef) url, 
(__bridge CFStringRef) self.dirNameText.text, true)); 
```

我一直在寻找解决方案，但找不到完全合适的解决方案。我使用 CFBridgingRelease 修改了我的代码，如本[教程](http://www.raywenderlich.com/5773/beginning-arc-in-ios-5-tutorial-part-2)中所示：

```
url = CFBridgingRelease(CFURLCreateCopyAppendingPathComponent
(NULL, (__bridge CFURLRef) url, 
(__bridge CFStringRef) self.dirNameText.text, true)); 
```

...但该应用程序仍因 EXC_BAD_ACCESS 线程而中断。

如果你知道我错过了什么，请告诉我！谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:25:09.987

您似乎根本不需要使用 Core Foundation。试试这个：

```
url = [url URLByAppendingPathComponent:self.dirNameText.text isDirectory:YES]; 
```

# c++ - C++ 模板类/类型在最大值和最小值之间进行选择

> ID：10167087
> 
> 赞同：0
> 
> 时间：2012-04-15T23:26:48.847
> 
> 标签：c++

我正在尝试编写一个模板类。

```
template <<typename T>>
myclass {
  // ...
} 
```

我希望`T`这样，如果我`myclass obj<T>`用适当的实例化`T`，该类应该能够在两个数字的最小值或最大值之间进行选择。即 myclass 实例化为 min 或 max 视情况而定。

我不介意使用 std::less/std::more/std::max/std::min 或任何内置仿函数对象。

但是，我不希望在构造函数中使用枚举，然后根据枚举值调用 min 或 max 例程。我希望代码更干净一些。有任何想法吗？是否有可能在 C++ 中做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T23:48:55.953

这没什么大不了的。考虑以下：

```
template<typename T> class MyClass {
public:
    int foo(int a, int b) const {
        return T()(a, b);
    }
}; 
```

现在，如果`T`是一个类型，它`operator()`返回它的两个参数中的最大值，那么您将返回最大值，对于您希望应用的任何其他二进制算法也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T23:38:39.423

**[编辑]**我相信我没有完全理解您的问题，@DeadMG 的答案实际上就是您正在寻找的。

下面的模板允许您实例化一个给定 T、MIN、MAX 的类，可以在 T 之间的 MIN 和 MAX 之间提供一些数字 X。

```
template<int T, int MIN, int MAX, int X = MIN + T/(MAX - MIN)>
class MyClass
{
  int foo() const
  {
    return X;
  }
}; 
```

# c++ - 多态调用的成本 - C++

> ID：10167094
> 
> 赞同：9
> 
> 时间：2012-04-15T23:27:28.737
> 
> 标签：c++, polymorphism

我正在用 C++ 编写一个游戏，它有大约 30 个不同的角色，每个角色都略有不同。我有一个主类用户，其中包含所有角色所需的所有数据。我的第一个实现只涉及枚举 30 个角色并进行适当处理，但现在我想知道将 User 作为基类并且每个角色都是从 User 继承的自己的类是否会更好。

我主要关心的是当有 30 多个类从单个基类继承时，多态方法调用的效率如何？我知道多态调用涉及虚拟表中的指针，但我不确定这是否意味着在整个表中线性搜索正确的方法，或者是否可以在恒定时间内完成。

如果有人可以评论具有许多继承类的多态方法调用的效率，我将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T23:31:12.387

成本可以忽略不计。不管你有多少类，或者有多少继承级别，多态调用的成本是一个简单的加法——指向加号的指针`vftable`加上特定函数的偏移量（不是标准强制的，但在大多数情况下，如果不是全部，这是正确的实现）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-15T23:32:48.807

与其使用继承，不如使用组合。只需给您的“用户”类一个执行该角色的对象即可。所以你最终可能会得到 30 个“角色”类。但是它们不会继承'User'，而是交给'User'使用（他们可以继承自己的基本抽象类来定义'Role'的接口）

或者如果它只是一个函数......你可能只是将它建模为一堆函数对象，然后将它们传递给用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T02:56:05.517

不幸的是，[Luchian Grigore](https://stackoverflow.com/users/673730/luchian-grigore)的答案是不正确的。

* * *

[在Diamond 继承](http://en.wikipedia.org/wiki/Diamond_problem)的情况下是正确的。如果你有一个继承自 B 和 C 的类 D，它本身继承自 A。如果你调用 D 的函数，将对 vtable 进行添加操作以查找 D 引用。

```
 (e.g)                   in Memory
                          -------        Classes hierarchy
                     ---> |  A  |                A
the offset here      |    -------               / \
is the pointer   ->  |    | ... |              B   C    <- Diamond Inheritance
addition he is       |    -------              \   /        (usually very bad)
talking about        ---> |  D  |                D
                          ------- 
```

* * *

**在您的情况下**，对于多态调用，编译器必须对 vtable 进行查找（读取）才能获得您正在调用的正确函数。当 vtable 指向的数据没有被缓存时，情况会变得更糟。在这种情况下，您会遇到[缓存未命中](http://web.cs.mun.ca/~paul/cs3725/material/web/notes/node4.html)，这是非常昂贵的。

此外，每个类有一个 vtable，并且该类的每个对象共享同一个 vtable。请参阅[在 C++ 中，什么是 vtable，它是如何工作的？](http://www.programmerinterview.com/index.php/c-cplusplus/how-vtables-work/)

* * *

您问题的真正答案取决于您将在这 30 个类中的每一个之间交换多少次，以及您使用它们的频率。会循环使用吗？

您描述的解决方案通常用于解决此潜在问题。但实际上，它可能与多态调用一样快，具体取决于它的使用方式。

所以一般来说你可以选择多态方法而不用担心成本，因为它可以忽略不计。首先编写干净且可维护的代码，然后再进行优化。:)

## **编辑 ：**

由于在这个线程上讨论了实际的编译器代码，我决定运行一个示例来找出真正发生的事情。

下面你可以看到我使用的代码示例。

```
#include <stdlib.h>
#include <stdio.h>

class I
{
public:
    virtual void f(void) = 0;
};

class A : public I
{
public:
    void f(void)
    {
        printf("A\n");
    }
};

int main(int argc, char* argv[])
{
    __asm
    {
        int 3
    }

    A* pA = new A();

    __asm
    {
        nop
        nop
    }

    pA->f();

    __asm
    {
        nop
        nop
    }

    A a;
    a.f();

    __asm
    {
        nop
        nop
    }

    return 0;
} 
```

* * *

然后，您可以看到示例的实际汇编代码（编译器如何解释它）。

```
int main(int argc, char* argv[])
{
    __asm
    {
        int 3
010E1010  int         3    
    }

    A* pA = new A();
010E1011  push        4    
010E1013  call        operator new (10E10A4h) 
010E1018  add         esp,4 
010E101B  test        eax,eax 
010E101D  je          main+17h (10E1027h) 
010E101F  mov         dword ptr [eax],offset A::`vftable' (10E2104h)
010E1025  jmp         main+19h (10E1029h) 
010E1027  xor         eax,eax 

    __asm
    {
        nop
010E1029  nop              
        nop
010E102A  nop              
    }

    pA->f();
010E102B  mov         edx,dword ptr [eax] 
010E102D  mov         ecx,eax 
010E102F  mov         eax,dword ptr [edx] 
010E1031  call        eax  

    __asm
    {
        nop
010E1033  nop              
        nop
010E1034  nop              
    }

    A a;
    a.f(); //Polymorphic call
010E1035  push        offset string "A\n" (10E20FCh) 
010E103A  call        dword ptr [__imp__printf (10E20ACh)]
010E1040  add         esp,4 

    __asm
    {
        nop
010E1043  nop              
        nop
010E1044  nop              
    }

    return 0;
010E1045  xor         eax,eax 
}

class A : public I
{
public:

    void f(void)
    {
        printf("A\n");
010E1000  push        offset string "A\n" (10E20FCh) 
010E1005  call        dword ptr [__imp__printf (10E20ACh)] 
010E100B  pop         ecx  
    } 
```

# paging - 查找最大页表大小

> ID：10167095
> 
> 赞同：1
> 
> 时间：2012-04-15T23:27:28.910
> 
> 标签：paging, virtual-address-space

我有这个家庭作业问题，我很难找到答案。想知道这里是否有人可以告诉我我的计算是否在正确的轨道上，或者我是否偏离了方向。我不是在找人给我答案。如果我的答案不正确，任何为我指明正确方向的帮助将不胜感激。这是问题所在：

进程的虚拟地址空间为 2 MB 大。假设一个页面的大小是 4KB。如果每个页表条目需要 2 个字节，则内存中页表的最大大小是多少？

我计算背后的逻辑是每个页面大小为 4096 字节（4KB），每个页表条目为 2 个字节。因此，每个页面实质上占用了 4098 字节的内存。如果我将 2MB 除以每页的内存总量，我最多可以在内存中拥有 511 页。（第 512 页是页表）。每个页面都需要一个页表条目，因此 511 页 * 2 字节 = 1022 字节是我解决此问题的最大页表大小。

我在任何方面都在正确的道路上吗？或者我应该以不同的方式计算这个？任何提示或建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T23:34:31.620

页表不被认为是虚拟空间的一部分，而是一种实现虚拟内存的手段，所以不要在计算页面时使用它。

# jquery - JQuery - 读取表单值数组并显示它？

> ID：10167098
> 
> 赞同：0
> 
> 时间：2012-04-15T23:28:09.080
> 
> 标签：jquery, arrays, hidden-field

我有一个表单，在表单中我通过 JQuery 动态附加隐藏值，这些隐藏值如下所示：

```
<input type="hidden" name="times[]" value="{'time': '5:00pm','date': 'april 15th'}" />
<input type="hidden" name="times[]" value="{'time': '6:00pm','date': 'april 16th'}" />
<input type="hidden" name="times[]" value="{'time': '7:00pm','date': 'april 17th'}" /> 
```

使用 JQuery 我如何遍历 times[] 数组并输出每个值，以便人们可以在提交表单之前看到他们在表单中添加的所有值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T23:32:46.083

```
$('input[name="times[]"]').each(function(){
    console.log($(this).val()); // Or anything you like.
}); 
```

或者，您可以使用数组将所有获取的值推送到其中。您将如何处理这些值完全取决于您。

```
var values = [];
$('input[name="times[]"]').each(function(){
    values.push($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T23:36:08.297

首先，您需要为每个隐藏字段设置唯一名称。我建议 times[0]、times[1] 等...

要遍历它们，还要给它们所有相同的类，并使用它们。

```
for (var i = 5; i > 0; i--) {
    $('<input type="hidden" name="times[' + i + ']" class="times" value="{your array values here}" />').appendto('.myform');
} 
```

然后在设置值之后：

```
var times = '';
$('.times').each(function() {
    times = times + $(this).val() + '<br />';
});
$('.values').html(times); 
```

其中 values 是用于显示值的容器。

# jquery - 如何向私有/自定义 URL 协议发出 jQuery GET/AJAX 请求？

> ID：10167100
> 
> 赞同：7
> 
> 时间：2012-04-15T23:28:59.893
> 
> 标签：jquery, ios, url, webkit, protocols

在 Mac 和 iOS 平台上，[可以通过自定义 URI 方案 / a 与本机运行时进行双向交换`NSURLProtocol`](http://developer.apple.com/library/mac/#samplecode/SpecialPictureProtocol/Introduction/Intro.html#//apple_ref/doc/uid/DTS10003816-Intro-DontLinkElementID_2)。例如..要从本机 Objective-C 方法请求一个，您可以使用Webkit / your`NSImage`注册您的自定义处理程序（一个简单的字符串，这里我使用“ ”） ，然后从 JS 中调用它...</p> `mycustomprotocol``WebView NSView`

```
var theURL = 'mycustomprotocol:///' + (textField.value);
img.innerHTML = '<img src="'+theURL+'" id="string"/>'; 
```

我希望能够使用 jQuery 来发出请求，因为在这一点上，它比 90 年代风格的 JS 更熟悉。但据我在网上找到的`$.get`，`$.ajax`只有`http(s)`.

会像

```
javascript:document.location = 'mycustomprotocol://' 
```

覆盖 jquery 的 URL 处理？当谈到 JavaScript 时，我是个笨蛋，我相信这很容易做到。我相信这就是整个 jQuery 移动框架的实现方式（通过私有 URI）。那么，为什么在 google 或这么说吧？我可以从我的姐妹朋友那里得到一些帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-23T20:29:18.407

基本的 ajax 和 get 方法使用浏览器的常规 http 请求。出于安全原因，ajax 类型调用永远不会与自定义协议一起使用。如果您尝试开发一个不在服务器上的网站并使用 .ajax，您会发现它什么也做不了。您必须从头开始并完全创建自定义请求处理程序，而不仅仅是更改 jQuery 中的某些内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-11T02:33:15.530

这有点晚了，但您可以使用[https://github.com/ded/reqwest](https://github.com/ded/reqwest)来执行此操作：

```
reqwest('mycustomprotocol://myaction', function(result) {
  // ...
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-12T21:07:13.410

这是我为一个`callto:`协议所做的，它适用于 Firefox 24 和 IE 10（我没有测试任何其他浏览器）：

首先 - 您的协议必须已经注册，否则您的计算机将无法识别它。其次，在您的标记中创建一个隐藏链接，使用您的协议作为 href。当我单击一个按钮 ( `#calltobutton`) 时，它会设置隐藏链接 ( `#clicker`) 的值，然后单击它，从而使浏览器执行该操作。

然后这样做：

```
$('#calltobutton').click(function () {
    initCallTo(1234567890);
});

function initCallTo(callto) {
    $('#clicker').attr('href', "callto:" + callto);
    $('#clicker')[0].click();
} 
```

现在，点击 callto 链接的方法有点奇怪。您可以在[此线程](https://stackoverflow.com/questions/1694595/can-i-call-jquery-click-to-follow-an-a-link-if-i-havent-bound-an-event-hand)中阅读更多相关信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-07T19:33:42.900

我可以让它工作的唯一方法是使用 JS 中的 DOM 进行浏览器窗口重定向。从 JQuery 调用，甚至本页提到的 reqwestJS 库对我来说都不适用于移动 safari 和侦听自定义 URI 方案的应用程序。

# java - 输出标签jsf表达式语言

> ID：10167104
> 
> 赞同：0
> 
> 时间：2012-04-15T23:30:15.330
> 
> 标签：java, jsf, el

我的问题是我有一个包含要迭代的变量。我试图使用嵌套，但它们不起作用。我正在研究的解决方案的另一种尝试是输出

```
<ul> <li>Value</li>...</ul> 
```

用于方法调用的内部循环。问题是它产生了这个：

```
&lt;ul&gt;&lt;li&gt;Value&lt;/li&gt;&lt;/ul&gt; 
```

我如何强制它输出我想要的？还有其他解决此问题的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T23:50:32.777

使用 escape="false" 属性。

# php - 使用“DefaultRequestDirector”和“DefualtHttpCLient”类时，Android、Eclipse“找不到源”

> ID：10167113
> 
> 赞同：0
> 
> 时间：2012-04-15T23:31:23.610
> 
> 标签：php, android, mysql, eclipse

我正在尝试创建一个使用 PHP、MySQL 和 SQLite 的登录/注册应用程序，以允许用户通过 Android 作为客户端进行注册。我的本地 Apache 服务器上有我的 PHP 文件。我遇到的一件事是在尝试查看服务器上的“index.php”文件时出现“拒绝访问”消息。我相信以下配置可以正确访问我的数据库：

```
<?php

/**
 * Database config variables
 */
define("DB_HOST", "localhost");
define("DB_USER", "droid");
define("DB_PASSWORD", "");
define("DB_DATABASE", "droidservice");
?> 
```

收到“拒绝访问”消息是否意味着我对 MySQL 数据库的配置不正确？

当我调试 Android 应用程序时，我继续收到错误消息：

*   “源附件不包含文件 DefaultRequestDirector.class 的源”
*   “源附件不包含文件 DefaultHttpClient.class 的源”

我正在使用“httpPost”方法访问服务器并从那里解析 JSON。上述错误可能是由于没有连接正确的 http 库，还是由于某些 Eclipse 配置问题？

我一直在使用以下教程中的方法： [http ://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:34:23.450

我正在谈论本教程： [http ://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)

您已正确完成数据库设置。在本教程`Access Denied`中，如果您没有将正确的参数传递给`index.php`文件，将显示“”。

如果您在登录时与用户名一起正确观察，则需要传递一个名为的参数的密码参数`tag = "login"`被传递。在 php (index.php) 中的 if 条件下检查此标记以检测请求类型。（登录或注册）

安卓：

```
params.add(new BasicNameValuePair("tag", login_tag)); 
```

php：

```
// check for tag type
    if ($tag == 'login') { 
```

如果您传递标签参数，您将不会收到拒绝访问消息，并且您的应用程序可以完美运行。

另外，注册时您需要通过

安卓：

```
params.add(new BasicNameValuePair("tag", register_tag)); 
```

# iphone - 查找应用程序可以在哪些版本的 iOS 上运行？

> ID：10167115
> 
> 赞同：1
> 
> 时间：2012-04-15T23:31:31.357
> 
> 标签：iphone, ios, xcode

我对 iOS 编程相当新手（嗯，非常新手......）。无论如何，在我开始深入了解我的应用程序的编码之前，有没有办法检查它将在哪些 iOS 版本上运行？我可能遗漏了一些明显的东西，但我的目标是让它在所有 4.0 设备上运行到最新的设备。我只是想确保我不使用库或仅在 iOS 5.0 上受支持的东西或其他东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T23:54:44.333

您可以在项目设置中将“Base SDK”设置为您想要定位的 iOS 版本。至于无意中使用了以前 iOS 版本中未定义的功能，请注意您的警告 - 它会告诉您是否使用了 iOS 4 中未定义的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T00:20:31.410

如果您在开始开发之前决定希望应用程序在哪些 iOS 版本上运行，这将更容易完成。每个框架都有不同的受支持的 iOS 版本，您在编程时必须牢记这一点，例如，如果您想制作一个使用新的集成 Twitter 框架（iOS 5+）的应用程序，您必须将您的部署目标设置为仅运行 5.0 及更高版本的 iOS 设备，或者您可以编码检测以检查设备正在运行的 iOS 版本，在这种情况下，大致...如果 iOS >=5.0 使用 twitter，如果 iOS < 5 不使用 twitter。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T09:28:28.403

右键单击 Projekt --> Get Info ：在那里您可以看到项目的 iOS 版本。（最新的ios版本）

格力兹

# gwt - 使用 GWT 输入密码文本的水印

> ID：10167116
> 
> 赞同：0
> 
> 时间：2012-04-15T23:31:43.810
> 
> 标签：gwt, uibinder

通过使用 jQuery 或动态更改“输入”类型，C# 已经解决了这个问题[。](https://stackoverflow.com/questions/6666195/watermark-text-for-password-field)jQuery 选项在 GWT 中可能有点矫枉过正，我认为改变输入类型是不可能的。使用 GWT 的最佳方法是什么？

是否真的有必要做两个输入（一个用于水印作为 TextInput，另一个用于密码作为 Password 并在它们之间切换？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:17:33.840

最简单的方法是设置元素的占位符：`passwd.getElement().setProperty("watermark")`. 否则，请使用您放置在输入顶部的标签/跨度，并在字段集中/模糊时显示/隐藏。

# git - 多个 0.5GB 二进制文件的 GIT Rebase Fatal

> ID：10167119
> 
> 赞同：12
> 
> 时间：2012-04-15T23:32:20.423
> 
> 标签：git, git-rebase

[这个问题本质上是[在 rebase 期间重新打开 git crash，但从](https://stackoverflow.com/q/7692944/1286639)未有答案]

我正在尝试从我的“secc”分支重新设置为：

```
$ git rebase main
First, rewinding head to replay your work on top of it...
fatal: Out of memory, malloc failed (tried to allocate 553656577 bytes)         # about 0.5 GB
$ git rebase --abort
No rebase in progress? 
```

失败与两个分支及其共同祖先都有三个 .dat 文件的事实有关，每个文件都是 0.5 GB。

在这种情况下我该如何做一个变基？

附加信息：

*   'git merge main' 工作得很好。
*   使用 '*.dat merge=keepTheirs' 增强 .gitattributes 并不能防止致命。
*   *.dat 文件确实不同。
*   我愿意删除 *.dat 文件以重新设置其他文件，然后重新添加 *.dat。但是怎么做？
*   我正在使用 git 1.7.9.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:16:56.737

在“git rebase”失败之前，你不会知道你的机器是否足够大，但到那时你的目录处于一个被修改的状态。在变基期间，另一个分支被检出（主），以便可以将“secc”更改应用于它。恢复并继续：

```
git checkout secc 
```

正如您所指出的，在变基失败后，您有两个选择：

1.  如果不需要变基，请使用“git merge main”
2.  获得更大的机器并重试“git rebase main”

您没有实际的选择来忽略 0.5GB 文件，执行 rebase，然后取回这些 giga 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T21:09:05.913

在评论中，您说过对包含更多内容（在本例中为 32GB）的计算机执行相同操作，内存已解决了该问题。基于此，我会得出结论，您在第一次尝试使用的机器上可用的内存太少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T22:55:44.510

尝试将这些放入`.git/info/attributes`：

```
# whatever gets them...
yourfile binary -delta merge=binary
*.yourext binary -delta merge=binary 
```

如果这些文件发生更改，这将导致合并冲突，您必须弄清楚如何处理它们。检查 gitattributes 和 rebase 文档以了解其他合并策略，我什至不打算在这里命名危险的策略。

我不确定这是试图让整个核心运行起来的实际合并，但它似乎值得一试。

# javascript - 从子数组项中按值对数组进行排序

> ID：10167120
> 
> 赞同：0
> 
> 时间：2012-04-15T23:32:28.253
> 
> 标签：javascript, jquery, sorting

我试图通过它们的“名称”项目对对象/数组中的项目进行排序，

我使用此页面作为参考[对对象数组进行排序](https://stackoverflow.com/questions/5876424/sort-array-of-objects)并构建以下代码：

```
var alphabet = {
    a: 1,
    b: 2,
    c: 3,
    d: 4,
    e: 5,
    f: 6,
    g: 7,
    h: 8,
    i: 9,
    j: 10,
    k: 11,
    l: 12,
    m: 13,
    n: 14,
    o: 15,
    p: 16,
    q: 17,
    r: 18,
    s: 19,
    t: 20,
    u: 21,
    v: 22,
    w: 23,
    x: 24,
    y: 25,
    z: 26
}

var test = {
    item: {
        name: "Name here",
        email: "example@example.com"
    },

    item2: {
        name: "Another name",
        email: "test@test.com"
    },

    item3: {
        name: "B name",
        email: "test@example.com"
    },

    item4: {
        name: "Z name",
        email: "example@text.com"
    }
};
test.sort(function (a, b) {return alphabet[a.name.charAt(0)] - alphabet[b.name.charAt(0)]});

console.log(test); 
```

不幸的是，没有返回任何错误，console.log 也没有返回任何内容。任何帮助是极大的赞赏！

**编辑：** 给出答案后，似乎变量“test”必须是一个数组，但是，该变量是在外部库中动态生成的，因此我制作了这段小代码。如果有人有同样的问题，请随意使用它。

```
var temp = [];
$.each(test, function(index, value){
    temp.push(this);
});

//temp is the resulting array 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T23:37:37.470

`test`是一个对象，而不是一个数组。也许你想要这个：

```
var test = [
    {
        name: "Name here",
        email: "example@example.com"
    },
    ⋮
]; 
```

如果您需要为每个对象保留`item`, `item1`, ... ，您可以将它们添加为每个对象的字段：

```
var test = [
    {
        id: "item",
        name: "Name here",
        email: "example@example.com"
    },
    ⋮
]; 
```

要按字母顺序排序，您需要一个不区分大小写的比较器（并忘记`alphabet`对象）：

```
compareAlpha = function(a, b) {
  a = a.name.toUpperCase(); b = b.name.toUpperCase();
  return a < b ? -1 : a > b ? 1 : 0;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T23:38:12.037

首先， test 应该是一个数组，而不是一个对象。其次，我认为您在选择字符后错过了对 .toLowerCase() 的调用。

```
test.sort(function (a, b) {
    return alphabet[a.name.charAt(0).toLowerCase()] - alphabet[b.name.charAt(0).toLowerCase()];
}); 
```

# jquery - 将标题属性复制到接下来的 3 个锚标记

> ID：10167123
> 
> 赞同：0
> 
> 时间：2012-04-15T23:32:46.793
> 
> 标签：jquery, copy, title

我真的想打破我一直在使用的小 jQuery 盒子，并尝试使用 jQuery 做一些不同的事情来缩短某些项目的时间，我想知道如果我只想复制标题，最好的解决方案是什么来自一个锚点的属性，并将该值设置为接下来的 3 个锚点标签。看起来很乏味，我知道......这是我到目前为止所尝试的。

```
$('#home-gallery li a').each(function(){
    var copiedTitle = $(this).first().attr('title');
        $('#home-gallery li a').each(function(){
            this.title = copiedTitle;
        });
}); 
```

这是HTML

```
 <li>
    <a href="images/tn/eowine/full.jpg" data-fancybox-group="eowine" title="Eowine vs. Nosgule"><img src="images/tn/eowine.jpg" alt="" /></a>
    <!-- more images -->
    <div style="display: none;">
      <a href="images/tn/eowine/first.jpg" data-fancybox-group="eowine" title="Eowine vs. Nosgule"><img src="images/tn/eowine/first.jpg" alt="" /></a>
      <a href="images/tn/eowine/second.jpg" data-fancybox-group="eowine" title="Eowine vs. Nosgule"><img src="images/tn/eowine/second.jpg" alt="" /></a>
      <a href="images/tn/eowine/third.jpg" data-fancybox-group="eowine" title="Eowine vs. Nosgule"><img src="images/tn/eowine/third.jpg" alt="" /></a>
    </div>
    </li> 
```

任何帮助都是极好的！

谢谢！

* * *

非常感谢你们帮助我，这意味着很多……我确实提高了我在这个主题上的知识，我最感谢社区的帮助！

我将继续尝试提供给我的各种技巧，并将研究发布的每种方法以进一步掌握知识。

再次感谢各位！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T23:38:25.250

你可以这样做：

```
$anchors = $('#home-gallery li a');
$anchors.slice(1, 4).attr('title', $anchors.first().attr('title')); 
```

这样做是选择匹配集合的第 2 到第 4 个元素（包括所有锚点）并设置它们的`title`属性以匹配集合中第一个元素的标题。

如果您有其他标准而不是严格的 2nd-3rd-4th 定位，那么也可以用类似的方式来表达这些标准。

**[看到它在行动](http://jsfiddle.net/MJuUY/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T23:43:08.387

你可能想要这样的东西：

```
var copiedTitle = $('#home-gallery li a:first').attr('title');

$('#home-gallery li a:not(:first)').each(function() {
    $(this).attr('title', copiedTitle);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T23:45:22.770

你只需要一个。

```
var copiedTitle = $('#home-gallery li').children('a').attr('title');
$('div a').each(function() {
    $(this).attr('title') = copiedTitle;
}); 
```

Children 仅选择直系后代，并且由于您的第一个锚点具有原始标题，并且它不是后续锚点的兄弟，因此它是唯一需要抓取和存储的锚点。

# javascript - 从以前加载的 jquery 脚本中引用动态加载的东西

> ID：10167133
> 
> 赞同：1
> 
> 时间：2012-04-15T23:34:10.333
> 
> 标签：javascript, jquery

假设我有这样的事情：

```
<head><script src="script1.js" ...></script></head>
<body><div id="div1"></div></body> 
```

我称之为index.html，div1的内容是动态加载的，比如

```
$("#div1").html ("div1.html"); 
```

其中 div1.html 类似于

```
<div id="div2"><canvas id="canv1" ... /></div> 
```

我想在script1.js中以某种方式引用canv1；只需对 $("#canv1") 进行操作，什么都不会发生，因为 script1.js在 div1.html**之前**加载；有没有办法（例如 $(document).on(...)）“在 [..] 加载后立即做某事”？我试过

```
$(document).on ("load", "#canv1", ...); 
```

但它不起作用。值得注意的是 $(document).on ("click", "#canv1", ...) 有效，但这不是我想要的（例如，我想在关心发生的事情之前在画布上画一些东西点击...）; 有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T23:44:04.953

大概您正在使用 AJAX 调用加载您的内容，然后在回调中进行附加。如果您将 $('#canv1')... 放在追加后，在回调中，它应该可以工作。

根据以下 OP 的评论进行编辑：

```
$.ajax (
    {url: "div1.html",
     cache: false}).
done (function (html){
    $("#div1").append (html);
    $("#canv1").click(...);
 }); 
```

# objective-c - 重新分配释放的对象

> ID：10167140
> 
> 赞同：0
> 
> 时间：2012-04-15T23:36:35.753
> 
> 标签：objective-c, xcode, memory-management, ios5

我想知道这是否可以做到：我正在使用一个使用大量内存的全景库，并且库中没有内存管理。它使用 HTML5 和 JavaScript 来加载全景图像。但是，当我调用这个库时，它会给我一个内存警告`Received memory warning.`。当这种情况发生时，`dealloc`被调用并释放我在视图中的许多东西。所以，一旦我完成了库，我想再次重新分配所有释放的对象。有没有我可以用来处理这个问题的解决方案？有时应用程序崩溃。

注意：库是 KRPano，非常棒，但内存问题尚未处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T23:39:51.757

如果这些对象被释放，那是因为您不拥有它们。
尝试调用`retain`您要控制的每个对象，它不应该被自动释放。

# matlab - MATLAB 排序和列号

> ID：10167141
> 
> 赞同：0
> 
> 时间：2012-04-15T23:37:34.503
> 
> 标签：matlab, logic

我需要知道按降序排序的行向量的原始列号。这对你来说可能是一个简单的问题，但我不太擅长编码。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T23:45:24.517

采用：

```
 [sorted, indexes] = sort(YOUR_VECTOR, 'descend'); 
```

这样，`sorted`将是已排序的向量，`indexes`并将包含此元素的原始位置，如[http://www.mathworks.com/help/techdoc/ref/sort.html中所示](http://www.mathworks.com/help/techdoc/ref/sort.html)

# database - Visual Studio 安装程序项目将我的数据库设置为在使用提升的权限安装时需要管理员权限才能写入

> ID：10167145
> 
> 赞同：0
> 
> 时间：2012-04-15T23:38:15.427
> 
> 标签：database, sqlite, permissions, installation

我正在 Visual Studio 2010 中为要与 Microsoft Excel 一起使用的 C# 插件生成安装项目。我的插件使用 SQLite 数据库，并且该数据库需要对使用插件的用户具有写入权限。

问题是我还需要写入 HKLM 中的注册表和 Program Files 目录。为此，安装程序必须以提升的权限运行，这不是问题，但是当我这样做时，数据库被设置为需要管理员权限才能写入，这是一个问题，尽管在 CommonAppData 文件夹中播放它没有需要管理员权限。

是否可以将数据库设置为在安装项目中不需要管理员权限？我可以使用：Visual Studio 安装项目、Installshield 2008 和 Installshield 2012。

我发现了一个与我在这里发布的几乎相同的问题：[Visual Studio 安装程序项目 - 设置文件权限](https://stackoverflow.com/questions/4719224/visual-studio-installer-project-setting-file-permission)

但是，msdn 链接已失效，另一个链接仅建议将文件放在不需要提升权限的位置。

（注意：为了测试，我只是删除了需要放入程序文件中的部分文件，并写入 HKCU，以便我可以暂时解决这个问题；但这并不适合用于部署，因为这将被添加到需要解决这些问题的更大项目中。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:58:38.143

CommonAppData 文件夹是每台机器的位置，因此它需要管理员权限。可以由多个用户帐户访问的任何文件夹都需要提升才能写入。

AppDataFolder 是一个不需要管理员权限的文件夹，但它的内容仅适用于当前用户帐户。

您可以尝试在 CommonAppData 中为您的自定义文件夹设置权限。也许这篇文章会有所帮助：[http ://setupanddeployment.com/installation-environment/set-permissions-installation-folder/](http://setupanddeployment.com/installation-environment/set-permissions-installation-folder/)

# c++ - 编译 Ruby C++ 扩展

> ID：10167149
> 
> 赞同：4
> 
> 时间：2012-04-15T23:39:23.643
> 
> 标签：c++, ruby, ruby-1.9.3, ruby-c-extension

我正在尝试为 Ruby 编译一个 c++ 扩展，编译没有返回错误，但似乎编译不正确。我究竟做错了什么？

我有主要的 cpp 脚本**foo.cpp**：

```
#include <iostream>
#include <ruby.h>
extern "C"

VALUE cFoo;
void Init_foo(){cFoo = rb_define_class("Foo", rb_cObject);} 
```

和**extconf.rb**：

```
require "mkmf"
$libs += " -lstdc++ "
create_makefile("foo") 
```

在这些文件的目录中，我做了

```
$ ruby extconf.rb
creating Makefile
$ make
compiling foo.cpp
linking shared-object foo.so
$ ls
Makefile extconf.rb foo.cpp foo.o foo.so 
```

然后，我有一个 Ruby 脚本**test.rb**：

```
#!/usr/bin/env ruby
require "path_to_this_directory/foo" 
```

我跑`test.rb`。它返回一个错误：

```
... in `require': .../foo.so: undefined symbol: cFoo - .../foo.so (LoadError) 
```

我究竟做错了什么？

**环境**

*   操作系统：Ubuntu Linux 11.10
*   红宝石：1.9.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:21:10.023

您声明`cFoo`存在：

```
extern "C"

VALUE cFoo; 
```

但你从来没有定义它。`extern "C" blahblah`只是说存在`blahblah`，它是外部可见的，并且它的名称不会被破坏（即“C”链接），但`extern`声明实际上并没有定义任何东西；`extern`说某物存在，但它并没有带来它的存在。

你的 C++ 应该看起来更像这样：

```
#include <iostream>
#include <ruby.h>

extern "C" VALUE cFoo;
extern "C" void Init_foo();

VALUE cFoo;
void Init_foo(){cFoo = rb_define_class("Foo", rb_cObject);} 
```

您需要两个`extern "C"`来告诉 C++ 编译器不要管名称，然后单独定义符号。你也可以这样说：

```
#include <iostream>
#include <ruby.h>

extern "C" VALUE cFoo;

VALUE cFoo;
extern "C" void Init_foo(){cFoo = rb_define_class("Foo", rb_cObject);} 
```

我不确定第二个版本是标准 C++ 还是 GCC 扩展。

我不是一个 C++ 人，所以我希望我没有把这些术语弄得太糟糕。

# javascript - Chrome 扩展程序 - 请求当前选项卡的可选权限

> ID：10167154
> 
> 赞同：2
> 
> 时间：2012-04-15T23:41:00.997
> 
> 标签：javascript, google-chrome, permissions, google-chrome-extension

我正在尝试要求当前来源的选项卡权限。例如：我在[http://stackoverflow.com](http://stackoverflow.com)上，单击徽章，然后单击弹出窗口中的按钮，我应该得到一个提示框以允许在此选项卡上进行操作。

我在做什么：

*   显现

    ```
    ...
    “权限”：[“选项卡”，“上下文菜单”]，
    “可选权限”：[ "<all_urls>"]，
    ...

    ```

*   弹出窗口

    ```
    $('#reqPermision').click(function()
    {
        bg.reqPerm(url);
    });
    ```

*   背景

    ```
    函数 reqPerm(url)
    {
        chrome.permissions.request({permissions: ['tabs'], origins: [url]}, function (granted)
        {
            日志（'权限：'，授予）
        });
    }
    ```

我得到了什么：

> **permissions.request**期间出错：扩展清单中必须列出可选权限。

如果我在“optional_permissions”数组中手动​​设置 url *（在这个例子中。[https://stackoverflow.com/](https://stackoverflow.com/)）*，一切都按我的需要工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:01:46.323

目前这是不可能的，您只能请求清单中明确列出的 URL 的权限。但是，[此功能请求](http://code.google.com/p/chromium/issues/detail?id=93903)应该使您尝试执行的操作（单击浏览器操作时自动授予权限）可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-03T08:05:28.423

你正在尝试做的应该工作。在弹出窗口中，代码应为：

```
$('#reqPermision').click(function() {
    chrome.permissions.request({origins: [url]}, function (granted) {
        log('permision:', granted)
    });
}); 
```

您无需从后台页面调用它。

* * *

但是，最好使用[webext-domain-permission-toggle](https://github.com/fregante/webext-domain-permission-toggle)之类的模块，因为它会为您处理整个 UI。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-09-16T05:31:33.030

首先，不允许的可选权限//代码中的错误其次，您需要在执行此操作的可选权限数组中指定选项卡权限

`"permissions": ["tabs", "contextMenus"], "optional_permissions": [ "<all_urls>" ],`

你这样做

`"permissions": [, "contextMenus"], "optional_permissions": [ 'tabs' ,<any other permission you want>],`

第三你应该在它请求许可之前检查它没有被授予然后你应该请求它参考[谷歌可选许可](https://developer.chrome.com/extensions/permissions)

# cakephp - 如何控制错误消息 div 在 CakePHP 表单中的显示位置？

> ID：10167155
> 
> 赞同：4
> 
> 时间：2012-04-15T23:41:03.493
> 
> 标签：cakephp, cakephp-2.0

所以我知道如果您根据模型的验证器对其进行验证，CakePHP 会自动将错误消息加载到视图中。我正在尝试设置日期保管箱验证，并且我想控制错误消息的显示位置。

在提交验证表单之前：

```
<div class="input text required">
<label for="UserEmail">Email</label>
<input name="data[User][email]" maxlength="50" type="text" id="UserEmail">
</div> 
```

验证后，此处显示错误：

```
<div class="input text required error">
<label for="UserEmail">Email</label>
<input name="data[User][email]" maxlength="50" type="text" value="" id="UserEmail" class="form-error">
<div class="error-message">An email is required</div>
</div> 
```

是否可以控制它显示在哪里？

```
<div class="input text required error">
<div class="error-message">An email is required</div>
<label for="UserEmail">Email</label>
<input name="data[User][email]" maxlength="50" type="text" value="" id="UserEmail" class="form-error">
</div> 
```

或者在这里：

```
<div class="error-message">An email is required</div>
<div class="input text required error">
<label for="UserEmail">Email</label>
<input name="data[User][email]" maxlength="50" type="text" value="" id="UserEmail" class="form-error">
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T01:43:11.817

在视图中：

1) 禁用自动错误显示：

```
echo $this->Form->create('Mymodel', array(
    'inputDefaults' => array(
        'error' => false
    )
)); 
```

2) 获取当前表单错误`$this->validationErrors`

[3) 通过$this->Form->error()](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#displaying-and-checking-errors)使用您自己的标记或 Cake 的默认标记将它们显示在您喜欢的任何位置

更新：我误解了你原来的问题。元素的顺序可以通过 create() 调用（应用于所有字段）或 input() 调用（用于单个字段）来指定：

```
echo $this->Form->create('Mymodel', array(
    'inputDefaults' => array(
        'format' => array('before', 'error', 'label', 'between', 'input', 'after')
    )
)); 
```

上面会将 div 放在`error`div 之前`label`。您可以按照您喜欢的任何顺序重新排列该数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:51:53.377

我能够为**password_confirm**字段得到这个，也许它有帮助

```
 echo $this->Form->input('username');
        echo $this->Form->input('password');

        echo $this->Form->input('password_confirm', array(
            'type' => 'password',
            'div'=>'control-group',
            'error' => array('attributes' => array('wrap' => 'div','class' => 'help-inline'))
        ));

        echo $this->Form->input('group_id', array(
            'options' => array('2' => 'Admin', '3' => 'Publisher')
        )); 
        echo $this->Form->input('publisher_id', array(
            'options' => $publishers
        ));

        echo $this->Form->input('active'); 
```

# android - ActionBar中的onNavigationItemSelected在启动时被调用如何避免它？

> ID：10167162
> 
> 赞同：10
> 
> 时间：2012-04-15T23:42:29.027
> 
> 标签：android, android-actionbar

我正在使用带有下拉菜单的 ActionBar，并`onNavigationItemSelected()`在创建 Activity 后立即调用，因此调用了第一项。我的下拉菜单的第一项是 Home，与按下应用程序图标的操作相同，`android.R.id.home`因此当应用程序启动时它会调用自身。为避免这种情况发生，我有以下代码：

```
if(this.getClass() != FrecView.class){  //if i am not currently on the Activity
    Intent frec = new Intent(this, FrecView.class);
    frec.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(frec);
} 
```

但是我的所有活动都有 ActionBar，所以每次启动每个活动时，它都会永远调用自己，所以我必须为每个活动添加该代码。怎么了？我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T11:30:36.173

正如马克所说，它的设计初衷不是菜单。

但是，这是一种忽略第一次调用的快速而肮脏的方法：

声明这个类字段：

```
//mNaviFirstHit should be initialized to true
private boolean mNaviFirstHit = true; 
```

在 onNavigationItemSelected 中：

```
@Override
public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    if (mNaviFirstHit) {
        mNaviFirstHit = false;
        return true;
    }
    // DO WHAT YOU WOULD NORMALLY DO
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T00:06:48.627

> 我正在使用带有下拉菜单的 ActionBar，并且在创建 Activity 后立即调用 onNavigationItemSelected()

这不是被设计成一个“菜单”，就像标签被设计成一个“菜单”一样。列表导航旨在允许用户指示*当前活动的*一些内容，通常通过替换片段。动作项（例如，工具栏按钮、动作溢出区域）用于在活动之间导航。

> 我的下拉菜单的第一项是 Home 与按下应用程序图标 android.R.id.home 的操作相同，因此当应用程序启动时它会调用自身。

所以，从你的“菜单”中删除它。用户可以按左侧的应用程序图标导航到主页。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-12T00:24:04.967

您可以使用以下命令在“菜单”中强制使用正确的默认选项：

```
bar.setListNavigationCallbacks(mNavigationAdapter, this);
bar.setSelectedNavigationItem(indexOfCurrentActivityInTheMenu); 
```

与直觉相反，这必须在设置回调之后完成（在我看来，这将使回调有机会在导航索引为 0 的情况下触发）。例如，我的应用程序有两个活动 ListView 和 PageView，我喜欢按字母顺序排列的导航菜单，但默认启动活动是 PageView。所以我在 PageView 的 onCreate() 中有以下内容：

```
bar.setListNavigationCallbacks(mNavigationAdapter, this);
bar.setSelectedNavigationItem(1); 
```

在 ListView 的 onCreate() 中：

```
bar.setListNavigationCallbacks(mNavigationAdapter, this);
bar.setSelectedNavigationItem(0); 
```

然后，无论我调用多少次 startActivity(otherView)，它总是会正确设置导航菜单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-12T06:17:24.990

首先感谢@CommonsWare 提醒我们它是选项卡的替代品，所以代码应该从这个角度来设计。虽然它不像看起来那么简单，但我们可以在那里工作。

这也可以使用标志来避免。但是，无论如何我建议我采取的方法来解决这个问题。

只要确保它被调用一次。除此之外，使其成为内部类而不是匿名类。这将防止每次执行这部分代码时调用它。下面的代码：

```
if(localOnNavigationListener != null)
    localOnNavigationListener = new LocalOnNavigationListener();

class LocalOnNavigationListener implements OnNavigationListener{

    @Override
    public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    // do something
    return true;
  }

} 
```

我在这里看到一个奇怪的事件，如果我将其设为内部类，它不会调用 onNavigationItemSelected()，如果我们将其设为匿名类，它将触发 onNavigationItemSelected 方法。如果有人可以对此有所了解，那将很有用。

# entity-framework - Entity Framework Code First 的代码生成同时创建基于 int 的 FK 和复杂对象，为什么？

> ID：10167164
> 
> 赞同：2
> 
> 时间：2012-04-15T23:42:43.383
> 
> 标签：entity-framework, ef-code-first

我试图更好地理解通过逆向工程师代码优先做出的一些选择背后的原因。

这是架构 - 显示我对用户和附属公司都有 FK。

```
CREATE TABLE [dbo].[Orders] (
    [ID]                  INT             IDENTITY (1, 1) NOT NULL,
    [idUser]              INT             NOT NULL,
    [orderDate]           SMALLDATETIME   NOT NULL,
    [total]               MONEY           NOT NULL,
    [idAffiliate]         INT             NOT NULL,
    CONSTRAINT [PK_cartHead] PRIMARY KEY CLUSTERED ([ID] ASC) WITH (FILLFACTOR = 90),
    CONSTRAINT [FK_Orders_Affiliates] FOREIGN KEY ([idAffiliate]) REFERENCES [dbo].[Affiliates] ([ID]),
    CONSTRAINT [FK_Orders_Users] FOREIGN KEY ([idUser]) REFERENCES [dbo].[Users] ([ID])
); 
```

这是RE的一代：

```
...
        public int ID { get; set; }
        public int idUser { get; set; }
        public System.DateTime orderDate { get; set; }
        public decimal total { get; set; }
        public int idAffiliate { get; set; }
        public virtual Affiliate Affiliate { get; set; }
        public virtual User User { get; set; }
        public virtual ICollection<OrdersRow> OrdersRows { get; set; } 
```

OrderMap.cs

```
 // Table & Column Mappings
    this.ToTable("Orders");
    this.Property(t => t.ID).HasColumnName("ID");
    this.Property(t => t.idUser).HasColumnName("idUser");
    this.Property(t => t.orderDate).HasColumnName("orderDate");
    this.Property(t => t.total).HasColumnName("total");
    this.Property(t => t.initiatedBy).HasColumnName("initiatedBy");
    this.Property(t => t.idAffiliate).HasColumnName("idAffiliate");

    // Relationships
    this.HasRequired(t => t.Affiliate)
        .WithMany(t => t.Orders)
        .HasForeignKey(d => d.idAffiliate);
    this.HasRequired(t => t.User)
        .WithMany(t => t.Orders)
        .HasForeignKey(d => d.idUser); 
```

我很好奇的是什么看起来像重复 - idAffiliate 在功能上与复杂对象 - Affiliate 相同。idUser -> 用户也是如此。

班级是否有理由同时想要两者？

[实体框架电动工具 Beta 2](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:21:59.977

拥有 fk id 属性的一个很好的理由是您可以轻松地更改它们，而无需在内存中加载任何额外的对象。

```
MyObj.Fkid = 6; 
```

代替

```
MyObj.FkObj = fkobject; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T23:56:12.727

在 Entity Framework 中有两种表示外键的方式，on 是实际 ID，另一种是称为 Navigation Properties 的概念。导航属性允许您加入外键引用的附加数据。

导航属性是为连接数据编码的好方法，因为它们允许对实体引用进行简单易读的代码。它也符合 C# 处理对象的方式。

出于性能原因，您可能很希望在模型中使用这两种方法。如果您使用导航属性来查看您的订单是否有关联公司（或者它是否有具有特定 ID 的关联公司），这将需要在关联公司表上进行连接。

只需查看 FK Id，您就可以在不使用 SQL 中的 Join 的情况下实现相同的目标。

# sencha-touch - XTemplate Sencha Touch 2 中的插入按钮

> ID：10167165
> 
> 赞同：1
> 
> 时间：2012-04-15T23:42:46.023
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在使用框架 Sencha Touch 2，现在我在创建 List 组件时遇到问题，因为我为此创建了一个 XTemplate，但我需要在列表的每个元素中插入一个按钮组件

```
 {
            xtype: 'list',
            id: 'list_product',
            emptyText: '<div class="list-empty-text">No hay coincidencias</div>',
            store: 'Product',
            itemTpl: Ext.create('Ext.XTemplate',
                '<h3>{name}</h3>' +
                '[{xtype:"button"}]'//Here i tried insert a button
            ),
            items: [
                {
                    xtype: 'toolbar',
                    docked: 'top',
                    items: [
                        {xtype: 'spacer'},
                        {
                            xtype: 'searchfield',
                            placeHolder: 'Buscar...'
                        },
                        {xtype: 'spacer'}
                    ]
                }
            ]
        } 
```

我阅读了文档，但没有看到示例或一些代码帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T02:16:20.513

你不能以那种方式使用`itemTpl`和`XTemplate`。模板以 HTML 形式编写，而您将 HTML 和 Javascript 混合在您的`XTemplate`

```
'<h3>{name}</h3>' + //This is HTML
'[{xtype:"button"}]' //This is Javascript 
```

为了做你想做的事，你需要使用`dataview`and `dataitem`。有关如何使用它们的示例，请参阅 Dataview[指南](http://docs.sencha.com/touch/2-0/#!/guide/dataview)和[文档](http://docs.sencha.com/touch/2-0/#!/api/Ext.dataview.DataView)

# cmake - 使用 CMake 构建托管和非托管 C++ 应用程序？

> ID：10167175
> 
> 赞同：1
> 
> 时间：2012-04-15T23:44:20.237
> 
> 标签：cmake, managed-c++

我有一个 C++ 项目，其中大部分是本机代码（核心库 + WINdows 服务）和一个用托管 C++ 编写的配置 GUI。我已经将该项目的大部分内容移植到了 CMake，但我坚持使用 CMake 构建托管 C++ 代码。

顶级目标如下所示：

```
# Native C++ static libraries.
add_library(sql STATIC ...)
add_library(w32 STATIC ...)
add_library(smdr STATIC ...)

# Native C++ programs depending on above libraries.
add_executable(logging-service ...)
target_link_libraries(logging-service sql w32 smdr)
# ... more native executables here...

# Managed C++ GUI application (doesn't link with any of the above).
add_executable(configuration-editor ...) 
```

我在 CMake 文档中找不到任何相关信息，而且我在搜索结果中看到的大多数解决方案（例如[邮件列表中的消息](http://www.cmake.org/pipermail/cmake/2011-June/044831.html)）都涉及调整`CMAKE_CXX_FLAGS*`变量。但是，这会与其他 C++ 项目产生冲突。

您将如何设置构建脚本以具有两组 C++ 编译器标志，一组用于本机库，一组用于托管应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T23:29:42.963

在阅读了 CMake 邮件列表中的各种帖子之后，这些变量似乎是`CMAKE_CXX_FLAGS*`每个变量的本地变量，`CMakeLists.txt`并且由使用`add_subdirectory()`.

显然，拥有多组编译器标志的推荐方法是创建兄弟子目录，每个子目录都设置自己的编译器标志。我刚刚添加了两个文件夹`native`，`managed`并且每个文件夹都在各自的`CMakeLists.txt`. 现在，一切都按预期构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T00:04:02.723

假设您有以下内容：

```
project(my_libraries)
...
add_library(standard SHARED ${src_files})
add_library(managed SHARED ${src_files}) 
```

那么你可以这样做：

```
set(incomp_flags <list of incompatible flags>)
get_property(comp_flags TARGET managed PROPERTY COMPILE_FLAGS)
foreach(flag ${incomp_flags})
  list(REMOVE_ITEM comp_flags ${flag})
endforeach()
set_property(TARGET managed PROPERTY COMPILE_FLAGS ${comp_flags} <flag for managed build>) 
```

这个想法是您需要获取构建托管库的标志，然后您需要删除不兼容的标志并添加您想要的标志。

# java - Java中最多可以处理N个元素的数组？

> ID：10167176
> 
> 赞同：0
> 
> 时间：2012-04-15T23:44:33.840
> 
> 标签：java, arrays

目前我有一个这样构造的数组：

```
Car[] garage = new Car[5];
garage[0] = new Car("Ford", "Focus", "S301 ABN");
garage[1] = new Car("Opel", "Astra", "WA55 AAP");
garage[2] = new Car("Ford", "Explorer", "L66 4ABE");
garage[3] = new Car("Dodge", "Viper", "FA55 SAM");
garage[4] = new Car("Ferrari", "F50", "SAS3 47S"); 
```

但是，我需要由来自 JComboBox 的用户定义值设置数组的大小。我已经让 JComboBox 设置了值，但它抛出了一个，`ArrayIndexOutOfBoundsException`因为存在不在数组索引范围内的元素。所以我的问题是，在用户选择数组的大小后，我应该如何将元素添加到数组中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T00:10:25.193

导入`java.util.ArrayList`，并使用[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)数据结构而不是普通数组。

要执行与您发布的代码相同的操作，您可以使用如下代码：

```
List<Car> garage = new ArrayList();
garage.add(new Car("Ford", "Focus", "S301 ABN"));
//etc 
```

要获取车库的第 n 个元素，请使用`garage.get(n)`.

# actionscript-3 - FlashVars & AS3

> ID：10167177
> 
> 赞同：0
> 
> 时间：2012-04-15T23:44:36.373
> 
> 标签：actionscript-3, flash, flashvars

所以我试图访问闪存变量，但我一直收到这个错误：

> 第 27 1180 行：调用可能未定义的方法 LoaderInfo。

我曾尝试将以下代码放入班级内外，但从我收集到的内容看来，它认为“LoaderInfo”是另一个并非如此的函数。

```
public function getFlashVars():Object {
    var paramList:Object = LoaderInfo( this.root.loaderInfo ).parameters;
    var myParam:String = paramList["myParam"];
    return myParam;
} 
```

我该如何解决这个问题？

伊莱

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T05:03:54.020

看起来您忘记了`flash.display.LoaderInfo`.

但是您也可以省略类型转换：

`this.root.loaderInfo.parameters;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:15:49.607

从您的函数名称和返回类型之类的角度来看，您似乎正在尝试实现这一点：

```
function getFlashVars():Object{

    return root.loaderInfo.parameters;
} 
```

除此之外，这对您来说已经是一个静态对象。你真的不需要一个函数来获取这些参数。

至少不是上面那个。您可以将它们获取为：

```
root.loaderInfo.parameters.myParam1
root.loaderInfo.parameters.myParam2
root.loaderInfo.parameters.myParam3
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:36:42.763

如果你想要一种优雅的方式来使用 flashvars，你可以使用Temple [library 中的](http://code.google.com/p/templelibrary/)[FlashVars 类](http://templelibrary.googlecode.com/svn/trunk/doc/temple/data/flashvars/FlashVars.html)。此类是 flashvars 的包装器，因此可以在没有 Stage 的地方访问它们。

您可以为每个 flashvar 单独设置默认值和类类型。结合 FlashVarNames 枚举类，您可以知道应用程序中使用了哪些 flashvar。

您应该在主文件中实例化/配置 FlashVars 一次。

```
package
{
    import temple.data.flashvars.FlashVars;

    import flash.text.TextField;

    public class FlashVarsExample extends DocumentClassExample 
    {
        private static const _LANGUAGE:String = 'language';
        private static const _VERSION:String = 'version';
        private static const _IS_DEMO:String = 'is_demo';

        public function FlashVarsExample()
        {
            FlashVars.initialize(this.loaderInfo.parameters);

            FlashVars.configureVar(_LANGUAGE, 'nl', String);
            FlashVars.configureVar(_VERSION, 1, int);
            FlashVars.configureVar(_IS_DEMO, true, Boolean);

            var txt:TextField = new TextField();
            txt.width = 550;
            txt.height = 400;
            this.addChild(txt);

            trace('FlashVars.getValue(_LANGUAGE) : ' + FlashVars.getValue(_LANGUAGE) + "\n");
            trace('FlashVars.getValue(_VERSION) : ' + FlashVars.getValue(_VERSION) + "\n");
            trace('FlashVars.getValue(_IS_DEMO) : ' + FlashVars.getValue(_IS_DEMO) + "\n");
            trace(FlashVars.dump());
        }
    }
} 
```

# javascript - 在 JS 中获取文件名和/或文件夹内容

> ID：10167181
> 
> 赞同：0
> 
> 时间：2012-04-15T23:45:54.500
> 
> 标签：javascript, plugins, directory

显然，JavaScript 本身无法访问文件系统。谢天谢地。

但是Flash、Java等插件可以，并且可以和JS进行通信。

所以，假设我想创建一个页面，用户在自己的计算机上选择一个目录，它会读取歌曲文件的文件夹并使用 HTML5 音频制作一个播放列表。

获取文件夹内容的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T01:14:43.620

Java 和 Flash 都不能在所有环境中使用。所以你将不得不使用特征检测。

我自己会首先寻找 JS 文件 api，然后是 ActiveX 以包含可怜的 MSIE 用户，然后搞砸其余的，因为我不喜欢 Java，也不知道 flash :)

# c# - 如何有效地计算灰度图像中像素的平均“方向”？

> ID：10167183
> 
> 赞同：7
> 
> 时间：2012-04-15T23:46:09.997
> 
> 标签：c#, image, image-processing

所以我想我可以像这样将图像转换为灰度：

```
public static Bitmap GrayScale(this Image img)
{
    var bmp = new Bitmap(img.Width, img.Height);
    using(var g = Graphics.FromImage(bmp))
    {
        var colorMatrix = new ColorMatrix(
            new[]
                {
                    new[] {.30f, .30f, .30f, 0, 0},
                    new[] {.59f, .59f, .59f, 0, 0},
                    new[] {.11f, .11f, .11f, 0, 0},
                    new[] {0, 0, 0, 1.0f, 0},
                    new[] {0, 0, 0, 0, 1.0f}
                });

        using(var attrs = new ImageAttributes())
        {
            attrs.SetColorMatrix(colorMatrix);
            g.DrawImage(img, new Rectangle(0, 0, img.Width, img.Height),
                0, 0, img.Width, img.Height, GraphicsUnit.Pixel, attrs);
        }
    }
    return bmp;
} 
```

现在，我想计算像素的平均“方向”。

我的意思是我想看一个 3x3 的区域，然后如果左侧比右侧暗，那么方向将向右，如果底部比顶部暗，那么方向为向上，如果左下角比右上角暗，则方向为右上角。（想想每个 3x3 区域上的小矢量箭头）。也许一个更好的例子是，如果您在 Photoshop 中绘制灰度渐变，并且您想计算他们绘制它的角度。

我做过类似 MatLab 的东西，但那是几年前的事了。我想我可以使用类似于的矩阵`ColorMatrix`来计算它，但我不太确定如何。看起来[这个功能](http://msdn.microsoft.com/en-us/library/k1cfyd2w.aspx)可能是我想要的；我可以将它转换为灰度（如上），然后用灰度矩阵做一些事情来计算这些方向吗？

IIRC，我想要的与[边缘检测](http://en.wikipedia.org/wiki/Edge_detection)非常相似。

在计算完这些方向向量之后，我将遍历它们并计算图像的平均方向。

最终目标是我想旋转图像，使其平均方向始终向上；这样，如果我有两个相同的图像，除了一个被旋转（90,180 或 270 度），它们最终会以相同的方式定向（我不担心一个人是否倒置）。

* * *

***snip***删除一些垃圾邮件。您可以查看您想要阅读我的其余尝试的修订。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T16:28:53.627

计算角度的平均值通常是一个坏主意：

```
...
        sum += Math.Atan2(yi, xi);
    }
}
double avg = sum / (img.Width * img.Height); 
```

一组角的均值没有明确的含义：例如，一个向上的角和一个向下的角的均值就是一个指向右的角。那是你要的吗？*假设“向上”是+PI，那么几乎*向上的两个角度之间的平均值将是一个向下的角度，如果一个角度是PI-[某个小值]，另一个是-PI+[某个小值]。这可能不是你想要的。此外，您完全忽略了边缘的强度——现实生活图像中的大多数像素根本不是边缘，因此梯度方向主要是噪声。

如果要计算“平均方向”之类的东西，则需要将*向量*而不是角度相加，然后在循环后计算 Atan2。问题是：向量和没有告诉你图像内的物体，因为指向相反方向的梯度相互抵消。它仅告诉您有关图像第一/最后一行和第一/最后一列之间亮度差异的信息。这可能不是你想要的。

我认为定位图像的最简单方法是创建角度直方图：为 360° 梯度方向创建一个包含（例如）360 个 bin 的数组。然后计算每个像素的梯度角度和大小。将每个梯度幅度添加到直角箱。这不会给你一个单一的角度，而是一个角度直方图，然后可以使用它使用简单的循环相关来将两个图像相互定向。

这是我汇总的概念验证 Mathematica 实现，以查看这是否可行：

```
angleHistogram[src_] :=
 (
  Lx = GaussianFilter[ImageData[src], 2, {0, 1}];
  Ly = GaussianFilter[ImageData[src], 2, {1, 0}];
  angleAndOrientation = 
   MapThread[{Round[ArcTan[#1, #2]*180/\[Pi]], 
      Sqrt[#1^2 + #2^2]} &, {Lx, Ly}, 2];
  angleAndOrientationFlat = Flatten[angleAndOrientation, 1];
  bins = BinLists[angleAndOrientationFlat , 1, 5];
  histogram = 
   Total /@ Flatten[bins[[All, All, All, 2]], {{1}, {2, 3}}];
  maxIndex = Position[histogram, Max[histogram]][[1, 1]];
  Labeled[
   Show[
    ListLinePlot[histogram, PlotRange -> All],
    Graphics[{Red, Point[{maxIndex, histogram[[maxIndex]]}]}]
    ], "Maximum at " <> ToString[maxIndex] <> "\[Degree]"]
  ) 
```

带有示例图像的结果：

![在此处输入图像描述](../Images/6c88da97e31b3b7be39b8c61bf3df83d.png)

角度直方图还显示了为什么平均角度不起作用：直方图本质上是一个单一的尖峰，其他角度大致均匀。该直方图的平均值将始终由统一的“背景噪声”支配。这就是为什么您使用当前算法为每个“真实实时”图像获得几乎相同的角度（大约 180°）。

树图像有一个单一的主导角度（地平线），所以在这种情况下，您可以使用直方图的模式（最常见的角度）。但这不适用于每张图片：

![在此处输入图像描述](../Images/ab54fd3132318ba2f92bca1a186f21e5.png)

这里有两个峰。循环相关仍应使两个图像相互定向，但仅使用该模式可能还不够。

另请注意，角度直方图中的峰值不是“向上”的：在上面的树形图中，角度直方图中的峰值可能是地平线。所以它是向上的。在 Lena 图像中，它是背景中的垂直白条 - 所以它指向右侧。简单地使用最常见的角度定位图像*不会*使每个图像的右侧都朝上。

![在此处输入图像描述](../Images/c76775df6007a647c496dec24425ddc9.png)

该图像具有更多峰值：使用该模式（或者，可能是任何单个角度）将不可靠地定位该图像。但是角度直方图作为一个整体仍然应该给你一个可靠的方向。

**注意：**我没有对图像进行预处理，我没有尝试不同比例的梯度算子，我没有对生成的直方图进行后处理。在现实世界的应用程序中，您将调整所有这些东西以获得用于大量测试图像的最佳算法。这只是一个快速测试，看看这个想法是否可行。

**添加：**要使用此直方图定位两个图像，您将

1.  标准化所有直方图，因此直方图下的区域对于每张图像都是相同的（即使有些更亮、更暗或更模糊）
2.  获取图像的直方图，并针对您感兴趣的每个旋转比较它们：

例如，在 C# 中：

```
for (int rotationAngle = 0; rotationAngle < 360; rotationAngle++)
{
   int difference = 0;
   for (int i = 0; i < 360; i++)
      difference += Math.Abs(histogram1[i] - histogram2[(i+rotationAngle) % 360]);
   if (difference < bestDifferenceSoFar)
   {
      bestDifferenceSoFar = difference;
      foundRotation = rotationAngle;
   }
} 
```

（如果您的直方图长度是 2 的幂，您可以使用 FFT 加快速度。但代码会复杂得多，对于 256 个 bin，可能没那么重要）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:31:55.110

好吧，我可以给你另一种方法。虽然不会很漂亮，但希望它对你有用。

您的计算可能没问题。只是梯度一旦平均值最终会出现与您期望的不同的平均值。因此，我怀疑通过查看图像，您会觉得其中一定有不同的平均角度。所以;

*   将图像转换为二进制。
*   使用霍夫变换查找线
*   取最长的线并计算其角度。这应该给你最突出的角度。
*   您可能需要一些前/后处理才能使线条正确。

作为另一种方法。试试[GIST](http://ilab.usc.edu/siagian/Research/Gist/Gist.html)这基本上是场景识别中使用最广泛的一种实现。我发现您的图像是真实的[场景](http://people.csail.mit.edu/torralba/code/spatialenvelope/)，因此我建议采用这种方法。此方法将为您提供一个向量，您可以将其与同一图像的不同方向向量进行比较。这是一种众所周知的技术，绝对应该适用于您的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T06:24:59.870

考虑使用图像的梯度来计算您想要的方向：[en.wikipedia.org/wiki/Image_gradient](http://en.wikipedia.org/wiki/Image_gradient)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T21:45:58.400

您需要将图像与两个高斯导数内核（一个在 X 中，一个在 Y 中）进行卷积。这实际上是上面答案中的 Lx 和 Ly。

在计算滑动窗口（原始图像的子图像）和一阶高斯导数函数之间的总和之前，先减去平均像素强度。

例如参见本教程： [http ://bmia.bmt.tue.nl/people/bromeny/MICCAI2008/Materials/05%20Gaussian%20derivatives%20MMA6.pdf](http://bmia.bmt.tue.nl/people/bromeny/MICCAI2008/Materials/05%20Gaussian%20derivatives%20MMA6.pdf)

选择最佳平滑因子 sigma >= 1。

要计算高斯核，将 2D 高斯函数（从正态分布已知）与 1d 变量 '(x-0)^2' 用 (x^2 + y^2) 替换一次进行微分。您可以在 2D 中绘制它，例如在 MS Excel 中。

祝你好运！

迈克尔

# objective-c - iOS的多项式求解器？

> ID：10167186
> 
> 赞同：0
> 
> 时间：2012-04-15T23:46:49.497
> 
> 标签：objective-c, ios, math

我正在编写一个应用程序，其中有三个数据点，需要导出连接它们的抛物线。基本上我需要这个结果来推断其他数据点。就像 Excel 中的趋势线一样。

是否有任何人都知道我可以用来实现这一目标的框架，还是我必须手动编写求解器？

干杯，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:42:05.643

我找不到任何预先存在的框架可以为我做到这一点，所以我使用 Cramer 规则编写了自己的多项式广义求解器，因为 iOS 不像 MacOSX 那样支持 NSMatrix。

感谢您的输入：）

# html - css 菜单上的几个链接步骤到新行

> ID：10167187
> 
> 赞同：0
> 
> 时间：2012-04-15T23:46:53.673
> 
> 标签：html, css, menu

我日复一日地创建 CSS 菜单，我以前从未遇到过这个问题，这真的让我感到困惑！:S

我已经尝试了我能想到的一切，但没有运气。在 Chrome 中它工作正常，但在 Firefox 中，最后一个链接进入一个新行，在 IE 中，最后两个链接进入一个新行。

如果我删除填充所有链接保持在同一行。

看看我在这里的意思... [http://dlclients.com/estates/](http://dlclients.com/estates/)但这里是导致问题的 CSS 和 HTML 的摘要。

```
nav{
    background: url(images/background_nav.png) repeat-x;
    height: 30px;
    position: absolute;
    left: 0;
    width: 100%;
    margin-top: 20px;
 }

 #nav-inner{width: 1000px; height: 30px;}

 #nav-inner ul{list-style: none; margin: 0; padding: 0; width: 1070px;}
 #nav-inner ul li{
     display: inline;
     overflow: auto;
 }
 #nav-inner ul li a{
     display: block;
     color: white;
     text-decoration: none;
     font-size: 12px;
     float: left;
     height: 30px;
     line-height: 30px;
     border-right: 1px solid #6D6E71;
     padding: 0 14px;
 }
 #nav-inner ul li a.last{border: none;}
 #nav-inner ul li a:hover{
     border-bottom: 4px solid white;
 } 
```

的HTML：

```
<nav>
                <div id="nav-inner">
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Buy</a></li>
                        <li><a href="#">Sell</a></li>
                        <li><a href="#">Rent</a></li>
                        <li><a href="#">Landlords</a></li>
                        <li><a href="#">Property Maintenance</a></li>
                        <li><a href="#">Commercial/Land</a></li>
                        <li><a href="#">Short Term Let/Olympics</a></li>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#" class="last">Contact Us</a></li>
                    </ul>
                </div> 
            </nav> 
```

希望您能帮助解决这个问题，因为我已经花了 2 个多小时试图解决这个问题？！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T23:50:43.983

ul 和 li 具有由浏览器定义的填充和边距的预设值，除非在 CSS 中明确设置。尝试在第一行 CSS 上方添加以下内容，并相应地设置其余类的样式：

```
ul, li {margin:0; padding:0;} 
```

# mysql - MySQL - 每个人的课程总数的总价格是多少？

> ID：10167194
> 
> 赞同：-1
> 
> 时间：2012-04-15T23:47:50.620
> 
> 标签：mysql

我在计算查询中的总和时遇到问题。我敢肯定，它需要一个演员表。

查询 - 我想知道每个父母的活动总数是多少。每个活动的价格是 5.50 美元，因此有 4 个活动的人总共需要 22 美元。

它需要 3 列，分别是父名称、总活动和总成本。

我无法计算出每个父母的总活动的总成本......

请帮忙

**代码**

```
SELECT CONCAT_WS(" ", P.parent_title, P.parent_fname, P.parent_sname) AS Parent,
COUNT(A.activity_name) AS Total_Activities
FROM Activity A, Child C, Parent P, ChildActivity
WHERE P.parent_id = C.parent_id
AND C.child_id = ChildActivity.child_id
AND A.activity_id = ChildActivity.activity_id
GROUP BY Parent
ORDER BY P.parent_sname, P.parent_fname 
```

**结果示例：（**实际列出11人）

```
 *Parent*        *Total Activities*
  MR James Dean         4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:22:44.700

由于这是作业，我不能马上给你答案。这样想：您可以将数学应用于列值:)

# vb.net - VB.NET HTTPWEBRESPONSE WebException 解决方法

> ID：10167195
> 
> 赞同：0
> 
> 时间：2012-04-15T23:47:56.630
> 
> 标签：vb.net, httpwebresponse

我正在尝试使用文件制作一个简单的登录系统

```
Dim response As System.Net.HttpWebResponse = request.GetResponse()
        If response.StatusCode = HttpStatusCode.NotFound Then
        MsgBox("Invalid Login")
Else

My Code Here 
```

但是当我调试它并测试它时，它仍然给我 404 错误。而不是弹出窗口。

还有其他方法吗？

编辑：

这是我的代码

```
 Try
        Dim response As HttpWebResponse = request.GetResponse()

        MessageBox.Show("Allgood")
    Catch ex As WebException
        If response.StatusCode = HttpStatusCode.NotFound Then
            MsgBox("Invalid Login")
        End If
               End Try
    Dim sr As System.IO.StreamReader = New System.IO.StreamReader(response.GetResponseStream())
    Dim passcheck As String = sr.ReadToEnd
    Dim pass As String = PasswordTextBox.Text
    If passcheck.Contains(pass) Then
        MessageBox.Show("Welcome " + UsernameTextBox.Text)
        Form1.Show()
        Me.Close()
    Else
        MessageBox.Show("Invalid Login")

    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:30:01.517

我相信它会抛出[WebException](http://msdn.microsoft.com/en-us/library/system.net.webexception.aspx)，因此您需要将 GetResponse 包装在 Try Catch 块中并捕获 Web 异常，然后显示您自己的对话框。

```
Dim response As System.Net.HttpWebResponse
Try
    response = request.GetResponse()

    'If it gets here, it did not throw an exception
    MessageBox.Show("It's all good.")
Catch ex as WebException
    If DirectCast(ex.Response, System.Net.HttpWebResponse).StatusCode  = HttpStatusCode.NotFound Then
        MsgBox("Invalid Login")
    End If
End Try 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T00:26:41.200

奇怪，确保您的应用程序是项目属性中的**Windows 窗体应用程序。**但是，作为解决方法，您可以使用下一个代码在 Visual Studio 输出窗口中打印它。

```
Debug.WriteLine("Invalid Login") 
```

要启用“输出窗口”，请转到菜单“查看”然后“输出”或只需按`Ctrl`+ `W`+ `O`。

# http - HTTP over TCP 在更改目录时创建新连接

> ID：10167196
> 
> 赞同：0
> 
> 时间：2012-04-15T23:47:59.457
> 
> 标签：http, tcp, ip, pipelining

我正在使用一个程序来监视浏览器的活动，当我访问一个站点时，它通过 TCP 连接发出 HTTP 请求，然后我从服务器的根目录获取 HTML 文件，然后它获取其中的图像对象HTML 文件，但它们位于不同的目录中，因此它创建了一个新连接......这是 HTTP/1.1 在流水线时所做的吗？还是出于其他原因这样做？我一直在阅读 RFC 2616，它没有提到它为什么会创建这些新连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T00:34:57.437

它*同时*执行此操作，因此它可以并行下载所有图像、javascript、CSS 文件等。因此，新的连接。

# c# - 将创建对象的决定留给 C# 中的构造函数

> ID：10167199
> 
> 赞同：0
> 
> 时间：2012-04-15T23:48:53.333
> 
> 标签：c#

有没有办法拒绝在构造方法中创建对象？

我的观点是设置一个与条件相关的额外参数。例如：

```
public Test(Rule rule){
    if(rule == Rule.Custom)
        //DO NOT CREATE
    else{
        this.rule = rule;
    }
}

//WORK IF rule IS Custom
//I want to pass this information to user
public Test(Rule rule, string extra){
    if(rule != Rule.Custom)
        //DO NOT CREATE
    else{
        this.rule = rule;
        this.extra = extra;
    }
} 
```

也许我可以制作工厂方法，但我对解决方法感到好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T23:55:59.123

听起来这种模式应该使用[ArgumentOutOfRangeException](http://msdn.microsoft.com/en-us/library/System.ArgumentOutOfRangeException.aspx)。

更改示例代码以显示此想法：

```
public Test(Rule rule)
{
    if (rule == Rule.Custom)
    {
        throw new ArgumentOutOfRangeException("rule", "A custom rule is not allowed");
    }

    this.rule = rule;
}

public Test(Rule rule, string extra)
{
    if (rule != Rule.Custom)
    {
        throw new ArgumentOutOfRangeException("rule", "Only a custom rule is allowed");
    }

    this.rule = rule;
    this.extra = extra;
} 
```

来自 C++ 背景，我发现自己在过去可能使用过断言的地方越来越多地使用参数异常。

希望这可以帮助，

ps 从构造函数抛出的异常是完全可以接受的......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T00:07:28.940

如果您的目的是*不*抛出异常而只是不创建对象，那么工厂方法是您唯一真正的选择。那有两个模型：

1.  如果不满足条件，则返回 null。
2.  使用`bool TryCreate(parameters ..., out Result)`签名，其中将布尔值返回给表示成功或失败的调用。

当然，这些的真正问题是调用者无法知道对象创建失败的原因，并且需要查阅一些带外信息（文档）以获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T23:54:19.613

你可以抛出异常。这将中止对象的创建并向调用者发出错误信号。

```
public Test(Rule rule){ 
  if(rule == Rule.Custom) 
    throw new WillNotCreateException();
  else{ 
    this.rule = rule; 
  } 
} 
```

`WillNotCreateException`您的自定义异常类型或常见异常类型之一在哪里（例如`System.ArgumentException`）

# javascript - URI 路径导航问题

> ID：10167202
> 
> 赞同：2
> 
> 时间：2012-04-15T23:49:02.173
> 
> 标签：javascript, jquery, html, hyperlink, file-uri

我的jQuery代码是

```
 $(document).ready(function() {
      if (navigator.appVersion.indexOf("Win") != -1) {
       // Computers runs windows
        $("a[href$='.pdf']").each(function() {
            this.href = this.href.replace("Volumes", "KP01DS0194TG");
        });
      }
      if (navigator.appVersion.indexOf("Mac") != -1) {
        // computer is a Mac
        $("a[href$='.pdf']").each(function() {
            this.href = this.href.replace("KP01DS0194TG", "Volumes");
        });
      }
   }); 
```

我在我的 html 方面的链接是`<a href="file://///KP01DS0194TG/Quotes/Scanning/brother/Jobsheets/job no 12538.pdf">12538</a>`

但是 Jquery 不起作用，因为`file://///`- 如果我把它拿出来它很好用，但是我需要它在那里，否则我无法连接到它 - 关于我可以做些什么来纠正这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T01:04:14.560

“文件” URL 需要 3 个斜杠：

1) file://#协议

2) /some/path/myfile.pdf #文件和路径，包括根目录前导的“/”

无论操作系统是 Windows（“\”反斜杠）还是 *nix，这都是正确的

还：

3）空间不好。考虑命名您的目录和文件，其中不包含空格。

否则，请考虑在您的路径上运行“urlencode”（这会将空格转换为“%20”）

您可能还对 URL 的原始 RFC 感兴趣：

[http://www.ietf.org/rfc/rfc1738.txt](http://www.ietf.org/rfc/rfc1738.txt)

# wpf - TextBox.IsLoaded 在可见后返回 False

> ID：10167204
> 
> 赞同：4
> 
> 时间：2012-04-15T23:49:17.077
> 
> 标签：wpf, datatemplate, internals

在`DataGrid`我使用`CellTemplate`and `CellEditingTemplate`。在这两个 DataTemplates [FrameworkElement.IsLoaded 属性](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.isloaded.aspx)`False`中，即使我可以看到`TextBlock`，使用`TextBox`和`Focus()`调用也返回了`True`。

这是一个错误吗？或者有人可以解释一下，这种行为的原因是什么？

* * *

*我创建了这个示例应用程序用于演示目的。*

**主窗口.xaml.cs**

```
namespace WpfApplication
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            this.DataContext = new List<string> { "Row1", "Row2" };
        }
    }

    public class FocusAttached
    {
        public static bool GetIsFocused(DependencyObject obj)
        {
            return (bool)obj.GetValue(IsFocusedProperty);
        }

        public static void SetIsFocused(DependencyObject obj, bool value)
        {
            obj.SetValue(IsFocusedProperty, value);
        }

        public static readonly DependencyProperty IsFocusedProperty =
             DependencyProperty.RegisterAttached("IsFocused", typeof(bool), typeof(MainWindow), new UIPropertyMetadata(false, IsFocusedChanged));

        static void IsFocusedChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
        {
            FrameworkElement element = obj as FrameworkElement;

            if ((bool)e.NewValue)
            {
                Console.Write(element);
                Console.Write("  IsLoaded=" + element.IsLoaded);
                Console.Write("  IsVisible=" + element.IsVisible);
                Console.Write("  Focusable=" + element.Focusable);
                // here I call Focus()
                Console.Write("  Focus() returns:" + element.Focus());
                Console.WriteLine("  IsLoaded=" + element.IsLoaded);
            }
        }
    }
} 
```

**主窗口.xaml**

```
<Window x:Class="WpfApplication.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:c="clr-namespace:WpfApplication"
        Title="Please click on row!" SizeToContent="WidthAndHeight">
    <DataGrid ItemsSource="{Binding}" AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding IsLoaded, RelativeSource={RelativeSource Self}, Mode=OneWay,
                                                  StringFormat='TextBlock in CellTemplate: IsLoaded={0}'}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>

                <DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>
                        <TextBox c:FocusAttached.IsFocused="True"
                                 Text="{Binding IsLoaded, RelativeSource={RelativeSource Self}, Mode=OneWay,
                                                StringFormat='Even after call Focus(): IsLoaded={0}'}" />                                     
                    </DataTemplate>
                </DataGridTemplateColumn.CellEditingTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>

        <DataGrid.CellStyle>
            <Style TargetType="DataGridCell">
                <Setter Property="Focusable" Value="False" />
                <Style.Triggers>
                    <Trigger Property="IsSelected" Value="True">
                        <Setter Property="IsEditing" Value="True" />
                    </Trigger>
                </Style.Triggers>
            </Style>            
        </DataGrid.CellStyle>
    </DataGrid>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:40:14.047

首先，您的绑定是无用的，因为 IsLoaded 不是依赖属性。没有通知，文本没有变化。

IsLoaded 是假的，因为它像测量和排列一样被延迟。该元素是可聚焦的、可见的和启用的，因此它可以被聚焦。但不能保证此时元素已经测量和渲染。这些操作在 Dispatcher 中排队。当它们被处理时， IsLoaded 将为真。试试这个：

```
static void IsFocusedChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
{
    FrameworkElement element = obj as FrameworkElement;

    if ((bool)e.NewValue)
    {
        Console.Write(element);
        Console.Write("  IsLoaded=" + element.IsLoaded);
        Console.Write("  IsVisible=" + element.IsVisible);
        Console.Write("  Focusable=" + element.Focusable);
        // here I call Focus() 
        Console.Write("  Focus() returns:" + element.Focus());
        element.Dispatcher.BeginInvoke((Action)(() =>
            {
                Console.WriteLine("  IsLoaded=" + element.IsLoaded);
            }),
            System.Windows.Threading.DispatcherPriority.Loaded);
    }
} 
```

# redis - Redis Pub-Sub 或 Socket.IO 的广播

> ID：10167206
> 
> 赞同：16
> 
> 时间：2012-04-15T23:49:59.277
> 
> 标签：redis, real-time, socket.io, publish-subscribe

我看到了这个片段：

### 在服务器上

```
io.sockets.on('connection', function(socket) {
  const subscribe = redis.createClient();
  const publish = redis.createClient();

  socket.on('publish', function(channel, data) {
    publish.publish(channel, data);
  });

  socket.on('psubscribe', function(channel) {
    subscribe.psubscribe(channel);
  });

  subscribe.on("pmessage", function(pattern, channel, message) {
    socket.emit('message', { channel: channel, data: message });
  });
}); 
```

### 在客户端

```
$(".action").click(function() {
  socket.emit('publish', 'game.#{gameid}.action.' + $(this).data('action'),
  JSON.stringify({ nick: "#{nick}", ts: Date.now() })
); 
```

我想知道为什么？Socket.IO 没有自己的广播机制吗？为什么选择 Redis 的 Pub-Sub 而不是 Socket.IO？我们不能这样做：

```
io.sockets.on('connection', function(socket) {
  socket.on('action', function(channel, data) {
    socket.broadcast.to(channel).emit(data)
  });
}); 
```

如果有理由使用 Redis，会有什么好处？坚持？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-21T19:21:53.030

我选择在我的实时活动流项目（[http://blog.cloudfoundry.com/2012/06/05/node-activity-streams-app-2/](http://blog.cloudfoundry.com/2012/06/05/node-activity-streams-app-2/)）中使用带有 Socket.io 的 Redis Pub Sub 的原因是因为我想拥有多个 Web 服务器（Cloud Foundry 上的实例或 Heroku 上的 dynos）。据我所知，Socket.io 将消息存储在（一个网络服务器的）内存中，那么它怎么可能广播到连接到另一个网络服务器的客户端呢？

查看[帖子](http://blog.cloudfoundry.com/2012/06/05/node-activity-streams-app-2/)，让我知道是否有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T06:49:07.533

在这里使用 Redis 至少有两个原因。第一个是它作为发布和订阅机制工作得非常好，包括能够根据模式匹配选择消息到 psubscribe。第二个原因是其他客户端能够通过redis机制轻松发布和订阅。这并不是说不可能，只是方便。这与 node.js 的异步性相结合，形成了强大的合作伙伴关系。

当然，这不是唯一的解决方案，但似乎效果很好。

# jquery - 使用 jQuery 计算文本中的特定单词

> ID：10167207
> 
> 赞同：3
> 
> 时间：2012-04-15T23:50:09.777
> 
> 标签：jquery

我如何在 jQuery 中做到这一点？

例如我有一个名为段落的变量

```
var paragraph = 'AAA BBB AAA CCC AAA AAA DDD EEE AAA'; 
```

我想计算段落中的所有“AAA”

我尝试使用`.val().match('AAA').length`它总是给我 1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T23:55:53.600

拆分文本，然后计算剩余的数组

```
text.split('AAA').length - 1 
```

# compiler-construction - 编程语言中的保留关键字

> ID：10167209
> 
> 赞同：2
> 
> 时间：2012-04-15T23:50:30.133
> 
> 标签：compiler-construction, programming-languages, keyword

我想知道是否所有编程语言都保留关键字？说`If`，`While`是保留的关键词。我们不应该将它用作普通变量或函数名称，如果我有`If = 3`是非法的。所以编译器会在 sanner 阶段产生错误。如果一种语言允许程序员使用保留关键字`If`作为变量名或函数名会怎样。编译器如何处理这个问题？这是否在扫描仪或解析器中得到处理？语义分析应该做什么？

**更新：** 我知道这不是一个好的做法，但大多数/所有编程语言不支持这个的真正原因是因为扫描仪或解析器无法准确地扫描语言或解析语言，或者它在幕后的真正含义是什么？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T01:23:50.303

你绝对可以做这样的事情，但显然它会破坏源代码的直观性。想象一下：

```
if if == 1 
```

就实际实现而言，词法分析器根本不需要更改。如果词法分析器匹配源中的“if”，它会返回一个带有`IF`类型的标记。假设我们有下面的赋值语句，其中`if`是一个变量名，它被赋值为 1。

```
if <- 1; 
```

要馈送到解析器的词法分析器的令牌流是：

```
IF, LARROW, INTLITERAL, SEMICOLON 
```

我可能有以下产品来描述赋值语句（\w 整数 rvals）：

```
assignStmt::= id:i LARROW intExpr:e SEMICOLON {: RESULT = new AssignmentStatement(i, e) :}
intExpr::= INTLITERAL:i {: RESULT = i.intVal; :}
id::= ID:i {: RESULT = i.strVal; :} 
```

`LARROW`, `ID`, `IF`, `INTLITERAL`, 和`SEMICOLON`是终结符，它们是词法分析器返回的标记，并且`assignStmt`, `id`, 和`intExpr`是非终结符。`ID`表示一个标识符（例如类/变量/方法名）。

在 if 语句的产生式失败后，我们最终将输入赋值语句的第一个产生式。我们扩展`id`非终端，其唯一的生产是`ID`，但我要匹配的令牌是`IF`，所以`assignStmt`生产完全失败。

为了让我的语言允许将变量命名为“if”，我所要做的就是：

```
assignStmt::= id:i LARROW intExpr:e SEMICOLON {: RESULT = new AssignmentStatement(i, e) :}
intExpr::= INTLITERAL:i {: RESULT = i.intVal; :}
id::= ID:i {: RESULT = i.strVal; :}
     |IF {: RESULT = "if"; :} 
```

请注意，它`|`定义了非终端的替代生产。现在我们有了`id`非终结符的第二个产生式，它匹配当前标记，并最终匹配一个赋值语句。

`AssignmentStatement`是一个 AST 节点，定义如下：

```
class AssignmentStatement {
     String varName;
     int intVal;
     AssignmentStatement(String s, int i){varName = s; intVal = i; }
} 
```

一旦解析器确定源在语法上是正确的，其他任何东西都不会受到影响。变量的名称不应影响编译的后期阶段，也就是说，如果您不创建允许这种情况发生的条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T23:57:13.037

即使可以，您到底为什么要这样做？

它所能做的就是编写不可维护的代码。

`if (a==b)`- 这是一个 if 表达式还是对`if`传递布尔 arg 的函数的调用？

我会说，如果有任何语言确实让你这样做，那可能是 3 个用户的一些奇怪的学术问题。

[穿上石棉内衣，为 3 名用户的无情燃烧做准备；-)]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T00:29:30.137

编程语言往往有保留字，因为人们喜欢将词法扫描器放在解析器前面。词法扫描器会将源代码转换为一系列标记，因此您最终可能会得到一个“>>”标记并说所有这些标记都是移位运算符，然后您不能将这些字符用于其他任何内容，除非作为其他字符的一部分标记（如带引号的字符串），这是或曾经是 C++ 的一个流行问题。像“if”这样的其他词也是一样的，它变成了某种“if”标记，每当解析器看到“if”标记时，它就会将其视为某个条件构造的第一部分。另一个例子是 JavaScript，你可以在其中编写

JSON.stringify({bar:2})

但你不能写

JSON.stringify({var:2})

因为“var”是一个“var”标记，但“bar”只是一个标识符，就像其他任何标识符一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T23:56:44.607

好吧，我想不出任何没有保留关键字的编译语言。它更方便，并且很少有充分的理由使用这些保留关键字（'if' 不是一个好的变量名）。

在 PHP 中，变量以美元符号开头，所以我想一种语言可以以这种方式实现它（使用非字母作为变量的前缀，这样你就可以使用 $if）。我想这可以发挥作用，尽管这样做也没多大用处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T08:36:29.787

允许任意关键字的一种方法是对所有非标识符句法变量使用非字母符号。[APL](http://en.wikipedia.org/wiki/APL_%28programming_language%29)采用这种方法，Smalltalk 可能也是如此（在[Smalltalk-80](http://en.wikipedia.org/wiki/Smalltalk#Syntax)中，有六个保留字，但它们都具有类似变量的语义；通常是关键字的东西，如条件，在语法上是常规消息）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-16T00:02:16.630

我认为不存在任何这样的语言。所有信息语言都基于语法，即一组规则，说明必须如何构造代码。这样，您就可以证明代码在结构上是有效的。如果您要允许根据需要切换名称，则必须有一种“即时”更改语法的方法，以确保代码的验证保持正确。

在更实际的层面上，为什么要费心去做这样的事情呢？保留关键字有什么问题？它们真的很有用，至少每个人都以同样的方式说同样的语言。你甚至不会想到用现实世界的语言来做这样的事情......想象一下，如果你开始转换单词的含义！没有人会再明白任何事情了！！

# node.js - 客户服务软件的聊天服务器架构

> ID：10167210
> 
> 赞同：2
> 
> 时间：2012-04-15T23:50:32.183
> 
> 标签：node.js, xmpp, rabbitmq, openfire, livechat

我需要在访问者可以与操作员聊天的站点中提供聊天联系人。聊天被引导到不同的业务组织队列中：销售、支持、产品信息等。你能建议我一个涵盖以下内容的架构：

*   服务器端聊天服务器，带有队列路由、DB、运营商在线状态等。
*   运营商网络应用
*   访客运营商
*   实时监控网站

我正在查看：

*   node.js + Socket.io + Redis pub/sub：我要实现所有的消息系统
*   XMPP 服务器，如 Openfire
*   兔MQ

你有什么建议？还有其他想法吗？

谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-16T14:48:59.547

您可能想查看Openfire的[Fastpath 服务和网络聊天。](http://www.igniterealtime.org/projects/openfire/plugins.jsp)它至少提供了一些这样的功能。

# javascript - Javascript的默认事件预防不起作用

> ID：10167214
> 
> 赞同：0
> 
> 时间：2012-04-15T23:50:54.497
> 
> 标签：javascript, dom-events, preventdefault

当用户的浏览器启用了 Javascript 时，我正在尝试将“我的个人资料”菜单链接重定向到自定义 URL。我已经编写了一个创建动态函数的自定义 url `getNewURL()`，并且连接工作正常。问题是，即使启用了 Javascript（在我的 Chrome 上），href 中的默认页面也会加载，尽管有所有默认的预防代码。我一直在这上面花了几个小时，但无法弄清楚问题出在哪里。任何帮助将不胜感激。

```
<head>
<script type="text/javascript">
<!--
function init() {
    document.getElementById('profile').onclick=getNewURL;
}

window.onload=function(){
init();
}

function getNewURL(e)
{
    if(!e) e = window.event;
    var a = 'http://www.google.com/'; 
    var b = 'advanced_search?hl=en';//this will actually be a dynamic wikispaces
             //variable - the username. 
    var url = a+b;

    window.location.href = url;

    //Over-riding default action
    //e.cancelBubble is supported by IE
    e.cancelBubble = true;
    e.returnValue = false;

    //e.stopPropagation works only in Firefox.
    if (e.stopPropagation) {
        e.stopPropagation();

    }
    e.preventDefault();
    return false;
}
//-->
</script>
</head>

<body>
<div id="menu">
<ul>
    <li><a href="http://www.google.com/" id="profile">My Profile</a></li>
</ul>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T23:55:33.373

好像您忘记在函数定义中添加参数

```
function getNewURL(e) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T23:56:14.737

什么是e？

```
function getNewURL()
{
    if(!e) var e = window.event;  <-- 
```

应该

```
function getNewURL(e)
{
    if(!e) e = window.event; 
```

# tcl - tcl 时钟功能操作

> ID：10167216
> 
> 赞同：0
> 
> 时间：2012-04-15T23:51:34.590
> 
> 标签：tcl

我在这里处理 tcl 时钟功能有点进退两难

这是我的代码：

```
set old_date 0

if{ "[clock format [clock scan $old_date] -format {%d %b}] != "[clock format [clock scan $event_date] -format {%d %b}]}
{
    if{$old_date !=0}
    {   
        set myTest($value) $old_date;
        #some other stuff
    }
}
set old_date $event_date 
```

它在大多数情况下（应该）有效。但我的问题是 `[clock format [clock scan $old_date] -format {%d %b}]`返回今天的日期 if `$old_date`= `0`。

我知道它可能返回正确的值，但如果值为零，我不希望它返回今天的日期。这有点搞乱我的比较逻辑。我可能可以检查 if 条件但是我可以用时钟功能做些什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T07:09:40.223

问题是你正在做（实际上）`[clock scan 0]`。如果所有其他方法都失败，该`clock scan`命令将回退到尝试解析您投入其中的任何内容。使用 a `0`，它最终决定它指`00:00:00`的是当前日期。我不知道这是否是对该字符串的正确解析，但可以说没有错：这是一个真正可怕的非规范化时间。

有意义的是在;中保留*时间戳。*`old_date`这就是`clock scan`返回的值。由于您正在寻找日期级别的粒度，因此让我们选择一天中的标准时间来表示当天（中午，格林威治标准时间）。现在，我们可以使用`-base`和`-gmt`选项来使我们的转换代码中的一切正常工作（为方便起见，放入一个小程序）：

```
proc dateStamp {date} {
    clock scan "12:00:00" -base [clock scan $date -gmt 1] -gmt 1
} 
```

鉴于此，我们现在可以重写您的其余代码：

```
set old_date 0

if {$old_date != [dateStamp $event_date] && $old_date != 0} {
    set myTest($value) [clock format $old_date -format "%d %b"]
    #some other stuff
}
set old_date [dateStamp $event_date] 
```

# java - 最后阻止在 Oracle 的 JAVA 存储过程中不起作用

> ID：10167218
> 
> 赞同：1
> 
> 时间：2012-04-15T23:52:06.067
> 
> 标签：java, scope, try-catch-finally

当我编译下面的代码时，它显示错误“找不到符号变量”但是如果我在 finally 块中注释代码，我能够成功编译。

请指教。

```
public static int writeFile (String p_file_path, String p_data) throws Exception 
{
  try {
    FileWriter outFile = new FileWriter(p_file_path,true);
    PrintWriter out = new PrintWriter(outFile);
    out.println(p_data);
  } catch (Exception  e) {
  } finally {
    out.close();
  }
  return SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-15T23:55:39.310

如果要在 finally 块中引用它，则需要在 try-block 之外定义“out”，例如

```
PrintWriter out = null;
try
{
    FileWriter outFile = new FileWriter(p_file_path,true);
    out = new PrintWriter(outFile);
    out.println(p_data);
}
finally
{
    if (out != null)
        out.close();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T23:56:22.050

您`out`在`try`块内声明。这意味着一旦您离开声明的`try`一部分，这超出了范围`try-finally`。您可以在语句之外声明它`try`并在块中进行空检查`finally`，或者使用 Java 7 的[`try-with-resources`](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)语句。

```
PrintWriter out;
try {
    out = ...
} finally {
    if(out != null) {
        out.close();
    }
} 
```

或者

```
try(PrintWriter out = ...) {
} 
```

# c# - UInt64 和“在检查模式下编译时操作溢出” - CS0220

> ID：10167219
> 
> 赞同：15
> 
> 时间：2012-04-15T23:52:44.350
> 
> 标签：c#, math, logic, uint64

这感觉像是一个愚蠢的问题，但我似乎看不到答案。我有一个 UInt64，它的最大值应该是

```
UInt64.MaxValue 18446744073709551615 
```

但是，当我尝试分配一个中等大小的数字时，我收到“在检查模式下编译时操作溢出”的溢出错误。如果我将它包装在一个“未经检查”的块中，那么它会编译并运行，就好像这个变量为零：

```
UInt64 value1 = 1073741824 * 8; // Compile error CS0220
UInt64 value2 = 8589934592;     // Actual value - no error 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-15T23:54:42.883

因为：

```
UInt64 value1 = 1073741824 * 8; 
```

将算术作为带符号的 32 位整数进行运算，*然后*将其转换为`ulong`. 尝试：

```
UInt64 value1 = 1073741824UL * 8; 
```

这`UL`意味着文字是无符号长的。有关文字后缀的更多信息，请参阅 C# 规范的第 2.4.4 节：

> 如果文字以 UL、Ul、uL、ul、LU、Lu、lU 或 lu 为后缀，则为 ulong

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T23:54:51.307

`1073741824`是一个`int`，不是一个`UInt64`。
因此，您的乘法会溢出 32 位有符号整数的限制。

将`ul`(unsigned long) 后缀添加到任一操作数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T23:59:19.710

你有一个错误，因为你操作`int`而不是`long` 1073741824 is still `int`(max for `int`is 2147483647)。
所以在第一种情况下，你会得到`int`类型溢出。
将第一个表达式更改为：

```
UInt64 value1 = 1073741824L * 8; 
```

问题就会消失。

# grails - Grails 2.x 中基于 HTML5 的动态脚手架 UI 支持哪些浏览器？

> ID：10167220
> 
> 赞同：0
> 
> 时间：2012-04-15T23:53:04.943
> 
> 标签：grails, cross-browser

Grails 2.x 中基于 HTML5 的动态脚手架 UI 支持哪些浏览器？

支持我的意思是：功能和看起来不错。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:06:18.713

如果您担心的话，它和旧脚手架一样有用。好吧，只有两个问题，具有讽刺意味的是，在使用支持 HTML5 的浏览器时会出现这些问题：

1.  HTML5 覆盖了 messages.properties （如此[处](http://jira.grails.org/browse/GRAILS-8613)所述）
2.  type="number" 的输入可能会导致一些问题（比如在[这个问题](https://stackoverflow.com/questions/8052962/groovy-grails-float-value-and-html5-number-input)中）

除此之外很好=）

哦，还有最后一件事，它还包括 CSS3，但这只是像 box-shadow 一样令人眼花缭乱，即使在使用非 CSS3 浏览器时，脚手架视图看起来也不错。

# ios - iOS 检测用户是否在 iPad 上

> ID：10167221
> 
> 赞同：281
> 
> 时间：2012-04-15T23:53:06.487
> 
> 标签：ios, objective-c, swift, ipad, device

我有一个可以在 iPhone 和 iPod Touch 上运行的应用程序，它可以在 Retina iPad 上运行，但需要进行一次调整。我需要检测当前设备是否是 iPad。我可以使用什么代码来检测用户是否在我的设备中使用 iPad，`UIViewController`然后相应地进行更改？

* * *

## 回答 #1

> 赞同：604
> 
> 时间：2012-04-15T23:57:04.767

有很多方法可以检查设备是否是 iPad。这是我最喜欢的检查设备是否真的是 iPad 的方法：

```
if ( UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad )
{
    return YES; /* Device is iPad */
} 
```

## 我使用它的方式

```
#define IDIOM    UI_USER_INTERFACE_IDIOM()
#define IPAD     UIUserInterfaceIdiomPad

if ( IDIOM == IPAD ) {
    /* do something specifically for iPad. */
} else {
    /* do something specifically for iPhone or iPod touch. */
} 
```

## 其他例子

```
if ( [(NSString*)[UIDevice currentDevice].model hasPrefix:@"iPad"] ) {
    return YES; /* Device is iPad */
}

#define IPAD     (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
if ( IPAD ) 
     return YES; 
```

对于 Swift 解决方案，请参阅此答案：[https ://stackoverflow.com/a/27517536/2057171](https://stackoverflow.com/a/27517536/2057171)

* * *

## 回答 #2

> 赞同：184
> 
> 时间：2014-12-17T02:41:56.950

在**Swift**中，您可以使用以下等式来确定通用应用程序上**的设备类型：**

```
UIDevice.current.userInterfaceIdiom == .phone
// or
UIDevice.current.userInterfaceIdiom == .pad 
```

**用法**将类似于：

```
if UIDevice.current.userInterfaceIdiom == .pad {
    // Available Idioms - .pad, .phone, .tv, .carPlay, .unspecified
    // Implement your logic here
} 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-11-22T13:16:34.557

这是 iOS 3.2 的 UIDevice 的一部分，例如：

```
[UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2013-01-28T13:39:42.773

你也可以使用这个

```
#define IPAD UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad
...
if (IPAD) {
   // iPad
} else {
   // iPhone / iPod Touch
} 
```

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2014-01-27T21:06:09.807

`UI_USER_INTERFACE_IDIOM()`仅当应用程序适用于 iPad 或 Universal 时才返回 iPad。如果它是在 iPad 上运行的 iPhone 应用程序，那么它不会。所以你应该检查模型。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2012-11-14T11:02:12.187

我发现某些解决方案在 Xcode 的模拟器中对我不起作用。相反，这有效：

### 对象

```
NSString *deviceModel = (NSString*)[UIDevice currentDevice].model;

if ([[deviceModel substringWithRange:NSMakeRange(0, 4)] isEqualToString:@"iPad"]) {
    DebugLog(@"iPad");
} else {
    DebugLog(@"iPhone or iPod Touch");
} 
```

### 迅速

```
if UIDevice.current.model.hasPrefix("iPad") {
    print("iPad")
} else {
    print("iPhone or iPod Touch")
} 
```

同样在 Xcode 的“其他示例”中，设备模型返回为“iPad 模拟器”，因此上述调整应该可以解决这个问题。

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2015-06-12T07:41:40.700

请注意：如果您的应用程序仅针对 iPhone 设备，则以 iphone 兼容模式运行的 iPad 将针对以下语句返回 false：

```
#define IPAD     UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad 
```

检测物理 iPad 设备的正确方法是：

```
#define IS_IPAD_DEVICE      ([(NSString *)[UIDevice currentDevice].model hasPrefix:@"iPad"]) 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2018-01-04T13:44:54.017

**很多答案都很好，但我在 swift 4 中这样使用**

1.  创建常量

    ```
    struct App {
        static let isRunningOnIpad = UIDevice.current.userInterfaceIdiom == .pad ? true : false
    } 
    ```

2.  像这样使用

    ```
    if App.isRunningOnIpad {
        return load(from: .main, identifier: identifier)
    } else {
        return load(from: .ipad, identifier: identifier)
    } 
    ```

**编辑：** **正如建议的 Cœur 只需在 UIDevice 上创建一个扩展**

```
extension UIDevice {
    static let isRunningOnIpad = UIDevice.current.userInterfaceIdiom == .pad ? true : false
} 
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2015-06-02T18:03:13.847

**在Swift**中有很多方法可以做到这一点：

我们检查下面的模型（我们这里只能做区分大小写的搜索）：

```
class func isUserUsingAnIpad() -> Bool {
    let deviceModel = UIDevice.currentDevice().model
    let result: Bool = NSString(string: deviceModel).containsString("iPad")
    return result
} 
```

我们检查下面的模型（我们可以在这里进行区分大小写/不区分大小写的搜索）：

```
 class func isUserUsingAnIpad() -> Bool {
        let deviceModel = UIDevice.currentDevice().model
        let deviceModelNumberOfCharacters: Int = count(deviceModel)
        if deviceModel.rangeOfString("iPad",
                                     options: NSStringCompareOptions.LiteralSearch,
                                     range: Range<String.Index>(start: deviceModel.startIndex,
                                                                end: advance(deviceModel.startIndex, deviceModelNumberOfCharacters)),
                                     locale: nil) != nil {
            return true
        } else {
            return false
        }
   } 
```

`UIDevice.currentDevice().userInterfaceIdiom`如果应用程序适用于 iPad 或 Universal，则以下仅返回 iPad。如果它是在 iPad 上运行的 iPhone 应用程序，那么它不会。所以你应该检查模型。：

```
 class func isUserUsingAnIpad() -> Bool {
        if UIDevice.currentDevice().userInterfaceIdiom == UIUserInterfaceIdiom.Pad {
            return true
        } else {
            return false
        }
   } 
```

如果该类不继承 an ，则下面的此代码段不会编译`UIViewController`，否则它可以正常工作。`UI_USER_INTERFACE_IDIOM()`如果应用程序适用于 iPad 或 Universal，则无论仅返回 iPad。如果它是在 iPad 上运行的 iPhone 应用程序，那么它不会。所以你应该检查模型。：

```
class func isUserUsingAnIpad() -> Bool {
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiom.Pad) {
        return true
    } else {
        return false
    }
} 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2016-10-09T03:22:08.040

*

> **在 Swift 3.0 中**

*

```
 if UIDevice.current.userInterfaceIdiom == .pad {
        //pad
    } else if UIDevice.current.userInterfaceIdiom == .phone {
        //phone
    } else if UIDevice.current.userInterfaceIdiom == .tv {
        //tv
    } else if UIDevice.current.userInterfaceIdiom == .carPlay {
        //CarDisplay
    } else {
        //unspecified
    } 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-10-12T11:09:01.460

在**Swift 4.2**和 Xcode 10中

```
if UIDevice().userInterfaceIdiom == .phone {
    //This is iPhone
} else if UIDevice().userInterfaceIdiom == .pad { 
    //This is iPad
} else if UIDevice().userInterfaceIdiom == .tv {
    //This is Apple TV
} 
```

如果要检测特定设备

```
let screenHeight = UIScreen.main.bounds.size.height
if UIDevice().userInterfaceIdiom == .phone {
    if (screenHeight >= 667) {
        print("iPhone 6 and later")
    } else if (screenHeight == 568) {
        print("SE, 5C, 5S")
    } else if(screenHeight<=480){
        print("4S")
    }
} else if UIDevice().userInterfaceIdiom == .pad { 
    //This is iPad
} 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2014-09-03T02:42:57.430

您可以检查 rangeOfString 以查看 iPad 是否存在这样的单词。

```
NSString *deviceModel = (NSString*)[UIDevice currentDevice].model;

if ([deviceModel rangeOfString:@"iPad"].location != NSNotFound)  {
NSLog(@"I am an iPad");
} else {
NSLog(@"I am not an iPad");
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-07-05T07:46:43.863

另一种 Swifty 方式：

```
//MARK: -  Device Check
let iPad = UIUserInterfaceIdiom.Pad
let iPhone = UIUserInterfaceIdiom.Phone
@available(iOS 9.0, *) /* AppleTV check is iOS9+ */
let TV = UIUserInterfaceIdiom.TV

extension UIDevice {
    static var type: UIUserInterfaceIdiom 
        { return UIDevice.currentDevice().userInterfaceIdiom }
} 
```

用法：

```
if UIDevice.type == iPhone {
    //it's an iPhone!
}

if UIDevice.type == iPad {
    //it's an iPad!
}

if UIDevice.type == TV {
    //it's an TV!
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-09-20T22:05:00.570

为什么这么复杂？我就是这样做的...

**斯威夫特 4：**

```
var iPad : Bool {
    return UIDevice.current.model.contains("iPad")
} 
```

这样你就可以说`if iPad {}`

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-12-06T10:37:49.380

我认为这些答案中的任何一个都不能满足我的需要，除非我从根本上误解了某些东西。

我有一个应用程序（最初是一个 iPad 应用程序），我想在 Catalyst 下在 iPad 和 Mac 上运行。我正在使用 plist 选项来扩展 Mac 界面以匹配 iPad，但如果这是合理的，我想迁移到 AppKit。在 Mac 上运行时，我相信所有上述方法都告诉我我在 iPad 上。Catalyst 的伪造非常彻底。

对于大多数问题，我确实理解代码应该在 Mac 上运行时假装它在 iPad 上。一个例外是滚动选择器在 Mac 上的 Catalyst 下不可用，但在 iPad 上可用。我想弄清楚是*在运行时*创建 UIPickerView 还是做一些不同的事情。运行时选择至关重要，因为从长远来看，我想使用一个二进制文件在 iPad 和 Mac 上运行，同时充分利用每个支持的 UI 标准。

这些 API 会给不经意的催化剂前读者带来潜在的误导性结果。例如，在 Mac 上的 Catalyst 下运行时`[UIDevice currentDevice].model`返回。`@"iPad"`用户界面习语 API 维持着同样的错觉。

我发现你真的需要更深入地研究。我从这些信息开始：

```
NSString *const deviceModel = [UIDevice currentDevice].model;
NSProcessInfo *const processInfo = [[NSProcessInfo alloc] init];
const bool isIosAppOnMac = processInfo.iOSAppOnMac;  // Note: this will be "no" under Catalyst
const bool isCatalystApp = processInfo.macCatalystApp; 
```

然后，您可以将这些查询与诸如`[deviceModel hasPrefix: @"iPad"]`整理出我所面临的各种微妙之处的表达式结合起来。就我而言，我明确希望避免制作 UIPickerView 如果指示`isCatalystApp`是`true`，独立于关于界面习语的“误导性”信息，或者由`isIosAppOnMac`and维持的错觉`deviceModel`。

现在我很好奇如果我将 Mac 应用程序移动到我的 iPad 边车上运行会发生什么......

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-02-06T13:36:23.107

对于最新版本的 iOS，只需添加`UITraitCollection`：

```
extension UITraitCollection {

    var isIpad: Bool {
        return horizontalSizeClass == .regular && verticalSizeClass == .regular
    }
} 
```

然后`UIViewController`检查：

```
if traitCollection.isIpad { ... } 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-04-27T10:03:47.463

```
if(UI_USER_INTERFACE_IDIOM () == UIUserInterfaceIdiom.pad)
 {
            print("This is iPad")
 }else if (UI_USER_INTERFACE_IDIOM () == UIUserInterfaceIdiom.phone)
 {
            print("This is iPhone");
  } 
```

# ruby-on-rails - 验证以确保唯一性但忽略空值？

> ID：10167223
> 
> 赞同：37
> 
> 时间：2012-04-15T23:53:22.147
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有以下模型字段验证：

```
validates_uniqueness_of :acronym, :scope => [:group_id], :case_sensitive => false 
```

问题是这个字段是可选的，并且一个空/nil 值作为已经采用的首字母缩略词返回。如果提供了值，我只想验证首字母缩写词是否唯一。有没有办法更新此验证以仅在存在实际值时进行。不是零/空？

谢谢

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-04-15T23:59:00.310

是的，您可以将两个可能的选项传递给可选字段的验证：`:allow_blank`或`:allow_nil`，这将分别跳过对`blank`和`nil`字段的验证。如果您将验证更改为以下内容，您应该获得所需的行为：

```
validates_uniqueness_of :acronym, :allow_blank => true, :scope => [:group_id], :case_sensitive => false 
```

# php - 使用 fb graph api，将图像从 android 应用上传到相册

> ID：10167224
> 
> 赞同：0
> 
> 时间：2012-04-15T23:53:28.170
> 
> 标签：php, android, facebook-graph-api

我在这篇[文章](https://developers.facebook.com/blog/post/498/)中看到，如果你想创建一个新专辑并在其中发布一张图片，那么 .php 代码是：

```
 <?php

       $app_id = "YOUR_APP_ID";
       $app_secret = "YOUR_APP_SECRET";
       $post_login_url = "YOUR_POST-LOGIN_URL";
       $album_name = 'YOUR_ALBUM_NAME';
       $album_description = 'YOUR_ALBUM_DESCRIPTION';

       $code = $_REQUEST["code"];

       //Obtain the access_token with publish_stream permission 
       if(empty($code))
         {
           $dialog_url= "http://www.facebook.com/dialog/oauth?"
           . "client_id=" . $app_id 
           . "&redirect_uri=" . urlencode($post_login_url)
           . "&scope=publish_stream";
           echo("<script>top.location.href='" . $dialog_url . 
           "'</script>");
       } 
       else {
         $token_url= "https://graph.facebook.com/oauth/"
         . "access_token?"
         . "client_id=" .  $app_id 
         . "&redirect_uri=" . urlencode( $post_login_url)
         . "&client_secret=" . $app_secret
         . "&code=" . $code;
         $response = file_get_contents($token_url);
         $params = null;
         parse_str($response, $params);
         $access_token = $params['access_token'];

         // Create a new album
         $graph_url = "https://graph.facebook.com/me/albums?"
         . "access_token=". $access_token;

         $postdata = http_build_query(
         array(
          'name' => $album_name,
          'message' => $album_description
            )
          );
         $opts = array('http' =>
         array(
          'method'=> 'POST',
          'header'=>
            'Content-type: application/x-www-form-urlencoded',
          'content' => $postdata
          )
         );
         $context  = stream_context_create($opts);
         $result = json_decode(file_get_contents($graph_url, false, 
           $context));

         // Get the new album ID
         $album_id = $result->id;

         //Show photo upload form and post to the Graph URL
         $graph_url = "https://graph.facebook.com/". $album_id
           . "/photos?access_token=" . $access_token;
         echo '<html><body>';
         echo '<form enctype="multipart/form-data" action="'
         .$graph_url. ' "method="POST">';
         echo 'Adding photo to album: ' . $album_name .'<br/><br/>';
         echo 'Please choose a photo: ';
         echo '<input name="source" type="file"><br/><br/>';
         echo 'Say something about this photo: ';
         echo '<input name="message" type="text"
            value=""><br/><br/>';
         echo '<input type="submit" value="Upload" /><br/>';
         echo '</form>';
         echo '</body></html>';
      }
 ?> 
```

我的问题是：我在哪里放置该代码？我怎么称呼它？我想要的是从我的 android 应用程序发布到相册。或者此代码只是为了将 fb 与我的网站集成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:09:58.287

此代码将帮助您使用图形 api 将图片上传到 facebook。

```
 AsyncFacebookRunner mAsyncFbRunner = new AsyncFacebookRunner(mFacebook);
            Bundle params = new Bundle();
            //convert to byte stream
            System.out.println(selectedImagePath);
            FileInputStream is = new FileInputStream(new File(selectedImagePath));
            ByteArrayOutputStream bs = new ByteArrayOutputStream();

            int data = 0;
            while((data = is.read()) != -1)
               bs.write(data);

            is.close();
            byte[] raw = bs.toByteArray();
            bs.close();

             params.putByteArray("picture", raw);
             params.putString("message", review );
             mAsyncFbRunner.request("me/photos", params, "POST", new WallPostListener()); 
```

# ruby-on-rails - 如何返回单词“by”+link_to？

> ID：10167225
> 
> 赞同：0
> 
> 时间：2012-04-15T23:53:48.850
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有一个辅助方法可以做到这一点

```
def show_username(username, id)
    if username == "Global_User"
      "anonymously"
    else
      link_to username, profile_path(id)
    end
end 
```

但是，我想在 link_to 用户名之前返回单词“by”。问题是当我把“by” + link_to 打断时，我不能在链接上使用 do 块，因为那是链接内的文本（我不希望 by 这个词成为链接的一部分）

我这样称呼它

`<%= show_username(resource.user.username, resource.user.id) %>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:01:07.880

```
def show_username(username, id)
    if username == "Global_User"
      "anonymously"
    else
      raw("by ") + link_to(username, profile_path(id))
    end
end 
```

# apache - 如何创建 .wsgi 文件？

> ID：10167226
> 
> 赞同：2
> 
> 时间：2012-04-15T23:53:54.793
> 
> 标签：apache, mod-wsgi, flask

我完全糊涂了。我试图让 Flask 与 mod_wsgi 一起工作。我有一个应该指向 myapp.wsgi 的脚本别名。我无法在 python 中创建 .wsgi 文件，因为他会是 .py。我无法制作文本文件 .wsgi，因为它是 .wsgi.txt 文件。

是否有我需要用来实际创建 .wsgi 文件的软件应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:37:59.110

您写道，“我不能在 python 中创建 .wsgi 文件，因为他会是 .py。”，但事实并非如此。两个文件扩展名都是文本文件，你可以用你想要的任何文本来填充它们。在这种情况下，如果您按照制作 .wsgi 文件[的说明](http://flask.pocoo.org/docs/deploying/mod_wsgi/)进行操作，应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:43:11.507

单击查看选项卡，然后在高级设置下显示文件扩展名，清除隐藏已知文件类型的扩展名复选框，然后单击确定。这将显示所有文件的扩展名，保存 .wsgi 文本文件后，您可以删除 .txt 扩展名。

那是你的问题吗？

来源： http: [//windows.microsoft.com/en-US/windows-vista/Show-or-hide-file-name-extensions](http://windows.microsoft.com/en-US/windows-vista/Show-or-hide-file-name-extensions)

# forms - 有没有人实现 jQuery Mobile 添加 (+/-) 按钮数字增量器？

> ID：10167232
> 
> 赞同：10
> 
> 时间：2012-04-15T23:54:43.367
> 
> 标签：forms, jquery-mobile, widget, spinner

这似乎是移动 ui 框架的“必备”表单输入，但 jQuery Mobile 似乎没有。

有没有人实现了一个漂亮的数字 Spinner 表单输入，可以很好地与其他 jquery 移动表单输入配合使用？

像这样的东西：

![在此处输入图像描述](../Images/5a68908a94ffb967bcced420279fb7a2.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-23T20:27:42.033

事后可能很好，但是：[http](http://dev.jtsage.com/jQM-Spinbox/) : //dev.jtsage.com/jQM-Spinbox/ - 几乎基于您上面显示的内容，尊重jQM主题，最小/最大值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T06:50:55.873

它不完全一样，但`input`with`type="number"`应该给你一个输入字段，右边有两个小按钮（向上和向下）。

你可以[在这里查看](http://jquerymobile.com/demos/1.0.1/docs/forms/textinputs)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T03:23:01.900

找到这个：[http ://css-tricks.com/number-increment-buttons/](http://css-tricks.com/number-increment-buttons/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T01:15:30.520

到目前为止，不仅仅是滑块输入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-10T10:48:43.940

```
<i onclick="qty('plus');" class="fa fa-plus c_pointer"></i>
<input type="text" id="prdqty" name="qty" value="1" placeholder="1">
<i onclick="qty('minus');" class="fa fa-minus c_pointer"></i>

function qty(val){
pqty = $('#prdqty').val();
if (val == "plus") {
      var newVal = parseFloat(pqty) + 1;
    } else {
    if (pqty > 1) {
      var newVal = parseFloat(pqty) - 1;
    } else {
      newVal = 1;
    }
}
$('#prdqty').val(newVal);
} 
```

# ruby-on-rails - Rails：如何为车辆及其所有类型建模

> ID：10167235
> 
> 赞同：1
> 
> 时间：2012-04-15T23:55:05.473
> 
> 标签：ruby-on-rails, types, model, has-one

我有一个车辆模型：

```
class Vehicle < ActiveRecord::Base
validates_presence_of :num_of_wheels
validates_presence_of :make
validates_presence_of :model
end 
```

在这个类中，我希望有可扩展数量的车辆类型，例如“乘用车”、“摩托车”、“卡车”，每种类型都有自己独特的强制属性。例如，PassengerCar 可能需要门的数量，而这不适用于 Motorcycle 类型。同时，motorcycles 和passenger_cars 在创建时都应该要求/继承Vehicle 的强制属性。

这里的关键是我无法真正预测可能发明或需要存储的不同类型车辆的数量。所以，我需要一种可扩展的方式来添加新的车辆类型。此外，就 UI 和视图而言，如果我的类型在下拉菜单中不可用，那么能够创建一个新的 Vehicle 类型会很好，并且让 db 填充 Vehicle 类型和将其反映到 UI 中。

用 Rails 建模这种关系的最佳方式是什么？我正在考虑使用 has_one :through 关系，但我不确定这是最好的方法。例如，车辆将分配给操作员。一个人一次只能操作一辆车……所以，我可以说：

```
class Vehicle < ActiveRecord::Base
has_one :motorcycle, :through => :vehicle_type
has_one :passenger_car, :through => :vehicle_type
has_many :vehicle_types
validates_presence_of :num_of_wheels
validates_presence_of :make
validates_presence_of :model
end

class VehicleType < ActiveRecord::Base
belongs_to :vehicle
belongs_to :passenger_car
belongs_to :motorcycle
end

class PassengerCar < ActiveRecord::Base
belongs_to :vehicle_type
validates_presence_of :doors
end

class Motorcycle < ActiveRecord::Base
belongs_to :vehicle_type
validates_presence_of :saddlebags
end 
```

但是，必须将所有可能的类型添加到 Vehicle 模型中似乎很笨拙，并且由于 Operator 一次只能驾驶一辆 Vehicle，因此将所有其他类型的车辆放在 Vehicle 模型的 :has_one 语句中似乎是多余的。

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T01:41:16.643

[一种选择是使用 Rails 的单表继承机制](http://code.alexreisner.com/articles/single-table-inheritance-in-rails.html)和附​​加表列（更快）或序列化哈希（如果您想添加新属性，则不需要新迁移）来设置此关系，以针对每个模型的细节. 这是想法：

`type`向正在创建表的迁移添加一列，`vehicles`以提示 Rails 您希望使用单表继承：

```
def change
  create_table :vehicles do |t|
    t.string :type

    # if using serialization
    t.text :parameters

    # if using custom fields
    t.integer :saddlebags
    t.integer :doors

    # ...
  end
end 
```

您将使用 Vehicle 作为基类，从这里开始，您的特定车辆将继承其基本属性：

```
class Vehicle < ActiveRecord::Base
  validates_presence_of :num_of_wheels, :make, :model

  # if using serialization
  serialize :parameters, Hash

  # ...
end

class PassengerCar < Vehicle
end

class Motorcycle < Vehicle
end

# etc.. 
```

现在，当 an`Operator`分配给车辆时，Rails 将自动恢复适当的类：

```
# models/Operator.rb
class Operator < ActiveRecord::Base
  has_one :vehicle
end

# in controller action
op = Operator.new
op.vehicle = Motorcycle.new
op.vehicle.save
op.save
# op will now be assigned to a +Motorcycle+ the next time it's loaded 
```

如果您在表中使用其他列，验证将按照您的描述进行。但是，如果您选择将它们序列化为`parameters`，则最好的选择可能是为每个模型的哈希生成[自定义验证器。](http://guides.rubyonrails.org/active_record_validations_callbacks.html#performing-custom-validations)`parameters`

# ruby - .irb_history 和 .irb-history 之间的区别

> ID：10167238
> 
> 赞同：4
> 
> 时间：2012-04-15T23:55:12.453
> 
> 标签：ruby, irb

Ruby中的`.irb-history`和文件有什么区别？`.irb_history`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:09:54.550

根据您的版本`"#{ENV['HOME']}/.irb-history"`或 `"#{ENV['HOME']}/.irb_history"`文件包含输入到 irb 的所有行的列表，您可以`cat ~/.irb-history`查看内容，并且`irbrc.rb`文件会将您的移动详细信息提供给此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T23:58:15.073

您将哪个行编辑库与 Ruby 链接？

我相信如果你用 GNU readline 构建 ruby​​，它使用 .irb-history，如果你链接 libedit（如果 Ruby 配置找不到 readline），它使用 .irb_history。

# ipad - 控制弹出框的位置

> ID：10167239
> 
> 赞同：0
> 
> 时间：2012-04-15T23:55:15.593
> 
> 标签：ipad, ios5, popover

我的 MainViewController 上有一个加载弹出框的 Add UIButton。即使“添加”按钮位于最右侧，我也希望弹出框在加载时居中。iPad 应用程序 (iOS 5.1) 的唯一视图将是横向。我删除了方向箭头。

我试过@property (nonatomic, readwrite) UIEdgeInsets popoverLayoutMargins; 但我无法弄清楚如何使用它进行编码。

我也遇到了 presentPopoverFromRect:CGRectMake(x,y,w,h)] 没有运气。

如有必要，我可以包含代码。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:34:24.777

下面的代码使弹出框在屏幕顶部的 x 轴上居中。如果您还想在 y 轴上居中，请使用 self.view.frame.height/2 作为 CGRectMake 中的第二个参数。

```
 [_myPopover presentPopoverFromRect:CGRectMake(self.view.frame.size.width/2 ,0,1,1)
                                     inView:self.view
                   permittedArrowDirections:UIPopoverArrowDirectionAny
                                   animated:YES]; 
```

# css - 如何将 RGB 转换为 HEX（用于渐变）

> ID：10167259
> 
> 赞同：0
> 
> 时间：2012-04-15T23:57:31.710
> 
> 标签：css

我正在使用这个：[css进度条](http://ivan.ly/)

它很棒，我们几乎定制了每个方面。问题是，我真的很讨厌渐变，但它们是 rgba 值。

有谁知道，如何将渐变更改为十六进制值，以便我们完成样式。

（我们拥有的css）是：

```
background-color: #74d04c;
/* Webkit background stripes and gradient */
background: -webkit-gradient(linear, 0 0, 44 44, color-stop(0, rgba(255, 255, 255, 0.17)), color-stop(0.25, rgba(255, 255, 255, 0.17)), color-stop(0.26, rgba(255, 255, 255, 0)), color-stop(0.5, rgba(255, 255, 255, 0)), color-stop(0.51, rgba(255, 255, 255, 0.17)), color-stop(0.75, rgba(255, 255, 255, 0.17)), color-stop(0.76, rgba(255, 255, 255, 0)), color-stop(1, rgba(255, 255, 255, 0))), -webkit-gradient(linear, left bottom, left top, color-stop(0, rgba(255, 255, 255, 0)), color-stop(1, rgba(255, 255, 255, 0.35))), #74d04c;

background: -moz-linear-gradient(rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0) 100%), #74d04c;
-moz-box-shadow: inset 0px 1px 0px 0px rgba(255, 255, 255, 0.4), inset 0px -1px 1px rgba(0, 0, 0, 0.2);
-webkit-box-shadow: inset 0px 1px 0px 0px rgba(255, 255, 255, 0.4), inset 0px -1px 1px rgba(0, 0, 0, 0.2);
-o-box-shadow: inset 0px 1px 0px 0px rgba(255, 255, 255, 0.4), inset 0px -1px 1px rgba(0, 0, 0, 0.2);
box-shadow: inset 0px 1px 0px 0px rgba(255, 255, 255, 0.4), inset 0px -1px 1px rgba(0, 0, 0, 0.2);
 /* Give it a higher contrast outline */
 border: 1px solid #4c8932; 
```

我只是没有得到 rgb（所以想看看我们如何转换为 #hex 值）

即使是链接也可以。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T00:11:16.990

你的例子利用了透明度。用于定义透明颜色的 css3 规范使用 rgba(r,g,b,a)

使用 HEX 的渐变中有另一种语法：

```
rgba(255, 255, 255, 0.25) => #FFFFFF 25% 
```

见： http: [//gradients.glrzad.com/](http://gradients.glrzad.com/)

此外，应该真正检查您“没有得到 rgb”的理由。也许您应该花一些时间来理解 RGB 是数字色彩中一个非常重要的概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T00:11:09.387

通常的十六进制表示只是将红色、绿色和蓝色值转换为十六进制（以 16 为基数），每个字节。你`255,255,255`会是`ffffff`和 0,0,0 会是`000000`。虽然这些没有显示，但符号使用两个数字，排列为 rrggbb，因此（例如）rgb = 1,2,3 将转换为 010203。

编辑：如果您对命令行工具感到满意（并且可以访问 C 或 C++ 编译器），您可能会发现这样一种更简单的转换方法：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv) {
    if (argc != 4) {
        fprintf(stderr, "Usage: cvt_hex r g b");
        return EXIT_FAILURE;
    }

    int r = atoi(argv[1]);
    int g = atoi(argv[2]);
    int b = atoi(argv[3]);

    printf("%2.2x%2.2x%2.2x", r, g, b);
    return 0;
} 
```

请注意：这不会在错误检查方面尝试太多，所以如果（例如）你给它一个大于 255 的值，它不会检测或警告你这个问题，只会产生一个结果不能正常工作。

# android - 使用 ViewBinder 在数据库中显示图标

> ID：10167260
> 
> 赞同：1
> 
> 时间：2012-04-15T23:57:37.100
> 
> 标签：android, sqlite, cursor, android-viewbinder

`SQlite`我已经成功地在 android 中创建了一个表。数据库中有一个性别（男/女）列。我想做的是检查性别类型并根据类型显示男性/女性图标。我使用`setViewBinder()`which 通过列索引（我不知道究竟是哪一列），但我相信我们可以使用它来检查性别列。有一个更好的方法吗？

```
 ListView lv=(ListView)findViewById(R.id.mylist);

         dbh = new DatabaseHelper(this);

           c = dbh.getReadableDatabase().rawQuery("SELECT _id, " + 
                   DatabaseHelper.NAME + 
           ", " + DatabaseHelper.LASTNAME + 
           ", " + DatabaseHelper.ans2 + ", " + DatabaseHelper.SEX + 
           " FROM " +
           DatabaseHelper.TABLE_NAME, null); // initializing 

  String[] dataFrom ={DatabaseHelper.NAME, DatabaseHelper.LASTNAME, DatabaseHelper.ans2, DatabaseHelper.SEX};
  int[] dataTo = {R.id.name, R.id.value1, R.id.value2, R.id.icon};

  SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
               R.layout.row, c, dataFrom, dataTo);
  adapter.setViewBinder(new ViewBinder(){

       public boolean setViewValue(View view, Cursor cursor,
               int columnIndex) {
           if (view.getId() == R.id.icon) {
               int sex = cursor.getInt(columnIndex);
               String s = String.valueOf(sex);
               if (s == "male") {
                   ((ImageView) view).setImageResource(R.drawable.male);
               } else if (s == "female"){
                   ((ImageView) view).setImageResource(R.drawable.female);
               }

               return true;    
           } else {
               return false;
           }

       }

   });
lv.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T00:14:01.277

方法 bindView 允许您轻松设置/检查您的数据，因为您收到：

*   您将光标定位到实际位置
*   您可以在其中放置数据的视图

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T11:32:34.043

```
 if (s == "male") 
```

将其更改为

```
if (s.equals("male")) 
```

# objective-c - IOS多镜像解决方案

> ID：10167261
> 
> 赞同：0
> 
> 时间：2012-04-15T23:57:39.410
> 
> 标签：objective-c, ios

首先，让我为标题道歉。这是一个可怕的，但这是我唯一能想到的......

所以，我的问题......我有多个图像，我想一个一个地向用户显示......就像一个介绍或入门指南。

我一直在尝试找出最好的方法来做到这一点.... 1) PageView 与每页上的图像 2) 将所有图像放入 PDF 并将 PDF 嵌入到滚动视图中

我不在乎他们是否必须垂直或水平滚动。

问题是，我也不知道该怎么做……而且，哪个更好？……还有，有没有替代的更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:00:46.823

就个人而言，我不会认为嵌入式 PDF 是您想要的优雅界面。PageView 可能很好。如果你想这样做，Apple 的[PageViews](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/PageViewControllers.html)文档是开始的地方。或者像一堆 ImageView 一样简单，除了第一个之外，所有这些都被隐藏，然后有一个“下一个”按钮或类似的东西，它可以动画隐藏当前图像并显示下一个图像，并带有一些漂亮的动画过渡. 请参阅[动画](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html)。

顺便说一句，我不知道您的介绍/入门指南的用途，但如果它用于用户界面设计，我认为一个不错的演示文稿是创建一个黑色视图，以 80-90% 的 alpha 覆盖整个视图，然后是显示使用该屏幕的“提示”的白色文本。或者查看 iOS iPhoto，看看他们如何处理提示，这甚至是一种更巧妙的方式。

最后，我建议如果您需要在线说明等，这可能表明您的 UI 过于复杂或不直观（如果我猜错了您为什么需要在线帮助，请提前道歉应用程序）。看看 Apple 自己的 iOS 应用程序，这些应用程序做了很多令人惊奇的事情，而且它们通常会避开在线帮助等。我不得不承认我编写了在线帮助屏幕，只是为了后来重新设计 UI，所以根本不需要它。该应用程序应该是“可发现的”且显而易见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T00:04:20.700

将每个图像放在 XIB 文件中自己的 UIView 中。您需要将所有这些 UIViews 放在 UIScrollview 中。

在你的 .M 文件里面有这个功能：

```
-(void)scrollToPage:(int)index
{
    CGRect rect = CGRectMake(index * self.view.frame.size.width, 0, self.view.frame.size.width, self.view.frame.size.height);

    [self.scrollView scrollRectToVisible:rect animated:YES];
} 
```

当他们单击下一个呼叫时，滚动到具有正确页码的页面。这会水平滚动。

您还需要在 ViewDidLoad 中设置内容大小：

```
self.scrollView.contentSize = CGSizeMake(self.view.frame.size.width * 4, self.view.frame.size.height); 
```

# php - Uploadify 返回 HTTP 500 错误并且根本没有命中后端

> ID：10167262
> 
> 赞同：2
> 
> 时间：2012-04-15T23:57:46.347
> 
> 标签：php, javascript, jquery, codeigniter, uploadify

这是回应`onError`：

```
{
    "type": "HTTP",
    "info": 500
} 
```

后端 PHP 脚本可以正常使用常规`multipart/form-data`格式。但是当我使用 Uploadify 时，它会在`onOpen`事件发生后立即返回上面的错误。我检查了 php 和 apache 日志，没有关于此错误的信息。我什至在 PHP 代码中尝试了`echo`一些东西，但它并没有出现在任何地方。我在端口 80 上使用 MAMP 在本地运行它。我正在使用 Code Igniter，并且有一个名为`process`和 function的控制器`upload_image()`，因此链接也没有断开。

这是我的上传 js 代码：

```
$('#browse-files').uploadify({
    'uploader'  : '/libraries/uploadify/uploadify.swf',
    'script'    : '/process/upload_image',
    'folder'    : '/uploads/',
    'cancelImg' : '/libraries/uploadify/cancel.png',
    'buttonImg' : '/images/upload.png',
    'auto'      : true,
    'height'    : 40,
    'width'     : 313,
    'auto'      : true,
    'simUploadLimit': '1',
    'multi'     : true,
    'method'    : 'post',
    'fileExt'   : '*.jpg;*.jpeg;*.JPEG;*.JPG;*.gif;*.png',
    'fileDesc'  : 'Web Image Files (.JPG, .GIF, .PNG)',
    'fileDataName' : 'file',
    'onOpen'    : function(event, id){
        console.log("Starting to upload an image"); //this shows up in console
    },
    'onProgress': function(event, id, fileObj, data){
        console.log("Progress: "+data.percentage);
    },
    'onComplete': function(event, id, fileObj, resp, data){
        console.log("Upload is done.");
        console.log(resp);
   },
   'onAllComplete': function(event, data){
        console.log("All uploads are done.");
   },
   'onError'    : function(event, id, fileObj, errorObj){
        console.log( JSON.stringify(errorObj) ); //and this prints the error above
   }
}); 
```

# c# - 无效的跨线程访问

> ID：10167265
> 
> 赞同：3
> 
> 时间：2012-04-15T23:58:07.000
> 
> 标签：c#, windows-phone-7

当我尝试在我的 cam_CaptureImageAvailable 方法中使用 BitMapImage 时，我得到一个无效的跨线程访问，我尝试使用 Dispatcher 但它给了我一个无法访问关闭的流错误，System.ObjectDisposedException 未处理。

```
// Informs when full resolution picture has been taken, saves to local media library and isolated storage.
    void cam_CaptureImageAvailable(object sender, Microsoft.Devices.ContentReadyEventArgs e)
    {

        string fileName = folderName+"\\MyImage" + savedCounter + ".jpg";

        try
        {   // Write message to the UI thread.
            Deployment.Current.Dispatcher.BeginInvoke(delegate()
            {
                txtDebug.Text = "Captured image available, saving picture ," + fileName;
            });

            // Save picture to the library camera roll.
            //library.SavePictureToCameraRoll(fileName, e.ImageStream);

            // Write message to the UI thread.
            Deployment.Current.Dispatcher.BeginInvoke(delegate()
            {
                //txtDebug.Text = "Picture has been saved.";

            });

            // Set the position of the stream back to start
            e.ImageStream.Seek(0, SeekOrigin.Begin);

            // Save picture as JPEG to isolated storage.
            using (IsolatedStorageFile isStore = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream targetStream = isStore.OpenFile(fileName, FileMode.Create, FileAccess.Write))
                {

                    // Initialize the buffer for 4KB disk pages.
                    byte[] readBuffer = new byte[4096];
                    int bytesRead = -1;

                    // Copy the image to isolated storage. 
                    while ((bytesRead = e.ImageStream.Read(readBuffer, 0, readBuffer.Length)) > 0)
                    {
                        targetStream.Write(readBuffer, 0, bytesRead);

                    }

                }

                var bitmapImage = new BitmapImage(); 
                bitmapImage.SetSource(e.ImageStream); 
                WriteableBitmap wb = new WriteableBitmap(bitmapImage);
                IsolatedStorageFile myStore = IsolatedStorageFile.GetUserStoreForApplication(); 
                using (IsolatedStorageFileStream myFileStream = myStore.CreateFile(fileName)) 
                { 
                    wb.SaveJpeg(myFileStream, 10, 10, 0, 70); 
                }

            }

        }
        finally
        {
            // Close image stream
            e.ImageStream.Close();
        }

    } 
```

这个也试过

```
Deployment.Current.Dispatcher.BeginInvoke(delegate()
                {
                    var bitmapImage = new BitmapImage();
                    bitmapImage.SetSource(e.ImageStream);
                    WriteableBitmap wb = new WriteableBitmap(bitmapImage);
                    IsolatedStorageFile myStore = IsolatedStorageFile.GetUserStoreForApplication();
                    using (IsolatedStorageFileStream myFileStream = myStore.CreateFile(fileName))
                    {
                        wb.SaveJpeg(myFileStream, 10, 10, 0, 70);//compressing image
                    }
                }); 
```

任何人都可以帮助我，我将非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T00:09:31.493

您必须在 UI 线程上创建`BitmapImage`和 ，`WriteableBitmap`因为它们是`DependencyObject`s。

您收到`ObjectDisposedException`错误的原因是，当调度程序处理您的请求时，图像的流已经关闭。

您是否尝试将该代码移动到您的 Dispatcher 调用中？

```
 e.ImageStream.Close(); 
```

调度程序的代码不会立即执行，而是稍后执行，但您已经关闭了流。

如果这不起作用，那么您可以通过将流读取到内存中来解决您的问题，`CaptureImageAvailable`然后将其`MemoryStream`作为源传递给您的`BitmapImage`.

# ios - 如何仅为 UIView 的左上角和右上角设置cornerRadius？

> ID：10167266
> 
> 赞同：499
> 
> 时间：2012-04-15T23:58:26.200
> 
> 标签：ios, cocoa-touch, uiview, cornerradius

有没有办法`cornerRadius`只设置 a 的左上角和右上角`UIView`？

我尝试了以下操作，但最终不再看到该视图。

```
UIView *view = [[UIView alloc] initWithFrame:frame];

CALayer *layer = [CALayer layer];
UIBezierPath *shadowPath = [UIBezierPath bezierPathWithRoundedRect:frame byRoundingCorners:(UIRectCornerTopLeft|UIRectCornerTopRight) cornerRadii:CGSizeMake(3.0, 3.0)];
layer.shadowPath = shadowPath.CGPath;
view.layer.mask = layer; 
```

* * *

## 回答 #1

> 赞同：547
> 
> 时间：2012-10-31T17:38:04.543

我不确定为什么您的解决方案不起作用，但以下代码对我有用。创建一个贝塞尔蒙版并将其应用于您的视图。`_backgroundView`在我下面的代码中，我用 3 个像素的半径将底角四舍五入。`self`是一种习惯`UITableViewCell`：

```
UIBezierPath *maskPath = [UIBezierPath
    bezierPathWithRoundedRect:self.backgroundImageView.bounds
    byRoundingCorners:(UIRectCornerBottomLeft | UIRectCornerBottomRight)
    cornerRadii:CGSizeMake(20, 20)
];

CAShapeLayer *maskLayer = [CAShapeLayer layer];

maskLayer.frame = self.bounds;
maskLayer.path = maskPath.CGPath;

self.backgroundImageView.layer.mask = maskLayer; 
```

带有一些改进的 Swift 版本：

```
let path = UIBezierPath(roundedRect:viewToRound.bounds, byRoundingCorners:[.TopRight, .BottomLeft], cornerRadii: CGSizeMake(20, 20))
let maskLayer = CAShapeLayer()

maskLayer.path = path.CGPath
viewToRound.layer.mask = maskLayer 
```

斯威夫特 3.0 版本：

```
let path = UIBezierPath(roundedRect:viewToRound.bounds,
                        byRoundingCorners:[.topRight, .bottomLeft],
                        cornerRadii: CGSize(width: 20, height:  20))

let maskLayer = CAShapeLayer()

maskLayer.path = path.cgPath
viewToRound.layer.mask = maskLayer 
```

Swift 扩展[在这里](https://stackoverflow.com/a/35621736/308315)

* * *

## 回答 #2

> 赞同：355
> 
> 时间：2016-12-17T10:50:48.380

请注意，如果您附加了布局约束，则必须在 UIView 子类中按如下方式刷新它：

```
override func layoutSubviews() {
    super.layoutSubviews()
    roundCorners(corners: [.topLeft, .topRight], radius: 3.0)
} 
```

如果你不这样做，它就不会出现。

* * *

要圆角，请使用扩展名：

```
extension UIView {
   func roundCorners(corners: UIRectCorner, radius: CGFloat) {
        let path = UIBezierPath(roundedRect: bounds, byRoundingCorners: corners, cornerRadii: CGSize(width: radius, height: radius))
        let mask = CAShapeLayer()
        mask.path = path.cgPath
        layer.mask = mask
    }
} 
```

* * *

* * *

**附加视图控制器案例**：无论您不能或不想子类化视图，您仍然可以对视图进行舍入。通过覆盖该函数从其视图控制器执行此`viewWillLayoutSubviews()`操作，如下所示：

```
class MyVC: UIViewController {
    /// The view to round the top-left and top-right hand corners
    let theView: UIView = {
        let v = UIView(frame: CGRect(x: 10, y: 10, width: 200, height: 200))
        v.backgroundColor = .red
        return v
    }()

    override func loadView() {
        super.loadView()
        view.addSubview(theView)
    }

    override func viewWillLayoutSubviews() {
        super.viewWillLayoutSubviews()

        // Call the roundCorners() func right there.
        theView.roundCorners(corners: [.topLeft, .topRight], radius: 30)
    }
} 
```

* * *

## 回答 #3

> 赞同：336
> 
> 时间：2017-06-16T12:14:59.737

最后……iOS11 中有[CACornerMask](https://developer.apple.com/documentation/quartzcore/cacornermask)！有了`CACornerMask`它可以很容易地完成：

```
let view = UIView()
view.clipsToBounds = true
view.layer.cornerRadius = 10
view.layer.maskedCorners = [.layerMaxXMinYCorner, .layerMinXMinYCorner] // Top right corner, Top left corner respectively 
```

* * *

## 回答 #4

> 赞同：280
> 
> 时间：2014-12-04T12:12:18.100

Here is a **Swift** version of @JohnnyRockex answer

```
extension UIView {

    func roundCorners(_ corners: UIRectCorner, radius: CGFloat) {
         let path = UIBezierPath(roundedRect: self.bounds, byRoundingCorners: corners, cornerRadii: CGSize(width: radius, height: radius))
         let mask = CAShapeLayer()
         mask.path = path.cgPath
         self.layer.mask = mask
    }

} 
```

* * *

```
view.roundCorners([.topLeft, .bottomRight], radius: 10) 
```

# Note

If you're using **Auto Layout**, you'll need to subclass your `UIView` and call `roundCorners` in the view's `layoutSubviews` for optimal effect.

```
class View: UIView {
    override func layoutSubviews() {
        super.layoutSubviews()

        self.roundCorners([.topLeft, .bottomLeft], radius: 10)
    }
} 
```

* * *

## 回答 #5

> 赞同：100
> 
> 时间：2012-04-16T00:13:20.477

此处的 Swift 代码示例：[https ://stackoverflow.com/a/35621736/308315](https://stackoverflow.com/a/35621736/308315)

* * *

不是直接的。你不得不：

1.  创建一个`CAShapeLayer`
2.  将其设置`path`为`CGPathRef`基于`view.bounds`但只有两个圆角（可能通过使用[`+[UIBezierPath bezierPathWithRoundedRect:byRoundingCorners:cornerRadii:]`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIBezierPath_class/Reference/Reference.html#//apple_ref/occ/clm/UIBezierPath/bezierPathWithRoundedRect:byRoundingCorners:cornerRadii:)）
3.  将您设置`view.layer.mask`为`CAShapeLayer`

* * *

## 回答 #6

> 赞同：66
> 
> 时间：2013-08-22T09:38:27.200

这是一个像这样实现的简短方法：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    UIButton *openInMaps = [UIButton new];
    [openInMaps setFrame:CGRectMake(15, 135, 114, 70)];
    openInMaps = (UIButton *)[self roundCornersOnView:openInMaps onTopLeft:NO topRight:NO bottomLeft:YES bottomRight:NO radius:5.0];
}

- (UIView *)roundCornersOnView:(UIView *)view onTopLeft:(BOOL)tl topRight:(BOOL)tr bottomLeft:(BOOL)bl bottomRight:(BOOL)br radius:(float)radius {

    if (tl || tr || bl || br) {
        UIRectCorner corner = 0;
        if (tl) {corner = corner | UIRectCornerTopLeft;}
        if (tr) {corner = corner | UIRectCornerTopRight;}
        if (bl) {corner = corner | UIRectCornerBottomLeft;}
        if (br) {corner = corner | UIRectCornerBottomRight;}

        UIView *roundedView = view;
        UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:roundedView.bounds byRoundingCorners:corner cornerRadii:CGSizeMake(radius, radius)];
        CAShapeLayer *maskLayer = [CAShapeLayer layer];
        maskLayer.frame = roundedView.bounds;
        maskLayer.path = maskPath.CGPath;
        roundedView.layer.mask = maskLayer;
        return roundedView;
    }
    return view;
} 
```

* * *

## 回答 #7

> 赞同：45
> 
> 时间：2018-05-29T08:43:19.543

在 Swift 4.1 和 Xcode 9.4.1

在**iOS 11**中，这一行就足够了：

```
detailsSubView.layer.maskedCorners = [.layerMinXMinYCorner, .layerMaxXMinYCorner]//Set your view here 
```

查看完整代码：

```
//In viewDidLoad
if #available(iOS 11.0, *) {
        detailsSubView.clipsToBounds = false
        detailsSubView.layer.cornerRadius = 10
        detailsSubView.layer.maskedCorners = [.layerMinXMinYCorner, .layerMaxXMinYCorner]
} else {
      //For lower versions
} 
```

但对于较低版本

```
let rectShape = CAShapeLayer()
    rectShape.bounds = detailsSubView.frame
    rectShape.position = detailsSubView.center
    rectShape.path = UIBezierPath(roundedRect: detailsSubView.bounds,    byRoundingCorners: [.topLeft , .topRight], cornerRadii: CGSize(width: 20, height: 20)).cgPath
    detailsSubView.layer.mask = rectShape 
```

**完整的代码是。**

```
if #available(iOS 11.0, *) {
    detailsSubView.clipsToBounds = false
    detailsSubView.layer.cornerRadius = 10
    detailsSubView.layer.maskedCorners = [.layerMinXMinYCorner, .layerMaxXMinYCorner]
} else {
    let rectShape = CAShapeLayer()
    rectShape.bounds = detailsSubView.frame
    rectShape.position = detailsSubView.center
    rectShape.path = UIBezierPath(roundedRect: detailsSubView.bounds,    byRoundingCorners: [.topLeft , .topRight], cornerRadii: CGSize(width: 20, height: 20)).cgPath
    detailsSubView.layer.mask = rectShape
} 
```

如果您在情节提要中使用 AutoResizing，请在**viewDidLayoutSubviews()**中编写此代码。

```
override func viewDidLayoutSubviews() {
    super.viewDidLayoutSubviews()

    if #available(iOS 11.0, *) {
        detailsSubView.clipsToBounds = false
        detailsSubView.layer.cornerRadius = 10
        detailsSubView.layer.maskedCorners = [.layerMinXMinYCorner, .layerMaxXMinYCorner]
    } else {
        let rectShape = CAShapeLayer()
        rectShape.bounds = detailsSubView.frame
        rectShape.position = detailsSubView.center
        rectShape.path = UIBezierPath(roundedRect: detailsSubView.bounds,    byRoundingCorners: [.topLeft , .topRight], cornerRadii: CGSize(width: 20, height: 20)).cgPath
        detailsSubView.layer.mask = rectShape
    }
} 
```

* * *

## 回答 #8

> 赞同：33
> 
> 时间：2019-11-26T22:36:43.197

这将是最简单的答案：

```
yourView.layer.cornerRadius = 8
yourView.layer.masksToBounds = true
yourView.layer.maskedCorners = [.layerMinXMinYCorner, .layerMaxXMinYCorner] 
```

* * *

## 回答 #9

> 赞同：29
> 
> 时间：2020-12-30T11:49:02.733

有一种超级简单的方法可以做到这一点。我在[这里](https://www.hackingwithswift.com/example-code/calayer/how-to-round-only-specific-corners-using-maskedcorners)找到它。

```
view.clipsToBounds = true
view.layer.cornerRadius = 24
view.layer.maskedCorners = [.layerMinXMinYCorner, .layerMaxXMinYCorner] 
```

它使用视图的 stock`cornerRadius`属性`CALayer`。您只需要定义角。 `layerMinXMinYCorner`是左上`layerMaxXMinYCorner`是右上。

* * *

## 回答 #10

> 赞同：27
> 
> 时间：2018-02-27T07:10:10.527

**iOS 11 , Swift 4**
你可以试试这个代码：

```
if #available(iOS 11.0, *) {
   element.clipsToBounds = true
   element.layer.cornerRadius = CORNER_RADIUS
   element.layer.maskedCorners = [.layerMaxXMaxYCorner]
} else {
   // Fallback on earlier versions
} 
```

您可以在表格视图单元格中使用它。

* * *

## 回答 #11

> 赞同：26
> 
> 时间：2018-09-06T11:08:57.703

**Swift 4 Swift 5**简单的方法在 1 行

用法：

```
//MARK:- Corner Radius of only two side of UIViews
self.roundCorners(view: yourview, corners: [.bottomLeft, .topRight], radius: 12.0) 
```

功能：

```
//MARK:- Corner Radius of only two side of UIViews
func roundCorners(view :UIView, corners: UIRectCorner, radius: CGFloat){
        let path = UIBezierPath(roundedRect: view.bounds, byRoundingCorners: corners, cornerRadii: CGSize(width: radius, height: radius))
        let mask = CAShapeLayer()
        mask.path = path.cgPath
        view.layer.mask = mask
} 
```

**在 Objective-C 中**

用法：

`[self.verticalSeparatorView roundCorners:UIRectCornerTopLeft | UIRectCornerTopRight radius:10.0];`

类别中使用的功能（仅一个角）：

```
-(void)roundCorners: (UIRectCorner) corners radius:(CGFloat)radius {
        UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:self.bounds byRoundingCorners:corners cornerRadii:CGSizeMake(radius, radius)];
        CAShapeLayer *mask = [[CAShapeLayer alloc] init];
        mask.path = path.CGPath;
        self.layer.mask = mask;
    } 
```

* * *

## 回答 #12

> 赞同：17
> 
> 时间：2015-04-14T09:02:52.843

艾玛：可能不适合你，因为调用`.TopRight`是在最终计算之前完成的。请注意，它派生自调用时的视图边界。例如，如果自动布局会使视图变窄，则右侧的圆角可能在视图之外。尝试调用它，其中视图的边界是最终的。`.BottomRight``view.roundCorners``view bounds``Bezier Path``viewDidLayoutSubviews`

* * *

## 回答 #13

> 赞同：17
> 
> 时间：2020-01-22T07:36:29.550

我在 swift 中舍入 UIView 和 UITextFiels 的特定角的解决方案是使用

> .layer.cornerRadius

和

> layer.maskedCorners

实际的 UIView 或 UITextFields。

**例子：**

```
fileprivate func inputTextFieldStyle() {
        inputTextField.layer.masksToBounds = true
        inputTextField.layer.borderWidth = 1
        inputTextField.layer.cornerRadius = 25
        inputTextField.layer.maskedCorners = [.layerMaxXMaxYCorner,.layerMaxXMinYCorner]
        inputTextField.layer.borderColor = UIColor.white.cgColor
    } 
```

并通过使用

> .layerMaxXMaxYCorner

和

> .layerMaxXMinYCorner

，我可以指定 UITextField 的右上角和右下角要四舍五入。

**你可以在这里看到结果：**

[![在此处输入图像描述](../Images/7ff2dcedac5a24c380718f0ec0121356.png)](https://i.stack.imgur.com/821lJ.png)

* * *

## 回答 #14

> 赞同：17
> 
> 时间：2015-09-18T09:35:48.323

试试这个代码，

```
UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:view.bounds byRoundingCorners:( UIRectCornerTopLeft | UIRectCornerTopRight) cornerRadii:CGSizeMake(5.0, 5.0)];

CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init];
maskLayer.frame = self.view.bounds;
maskLayer.path  = maskPath.CGPath;

view.layer.mask = maskLayer; 
```

* * *

## 回答 #15

> 赞同：11
> 
> 时间：2018-08-02T00:18:44.283

**斯威夫特 4**

```
extension UIView {

    func roundTop(radius:CGFloat = 5){
        self.clipsToBounds = true
        self.layer.cornerRadius = radius
        if #available(iOS 11.0, *) {
            self.layer.maskedCorners = [.layerMaxXMinYCorner, .layerMinXMinYCorner]
        } else {
            // Fallback on earlier versions
        }
    }

    func roundBottom(radius:CGFloat = 5){
        self.clipsToBounds = true
        self.layer.cornerRadius = radius
        if #available(iOS 11.0, *) {
            self.layer.maskedCorners = [.layerMaxXMaxYCorner, .layerMinXMaxYCorner]
        } else {
            // Fallback on earlier versions
        }
    }
} 
```

* * *

## 回答 #16

> 赞同：8
> 
> 时间：2020-06-04T06:59:01.310

简单的扩展

```
extension UIView {
    func roundCorners(corners: UIRectCorner, radius: CGFloat) {
        if #available(iOS 11, *) {
            self.clipsToBounds = true
            self.layer.cornerRadius = radius
            var masked = CACornerMask()
            if corners.contains(.topLeft) { masked.insert(.layerMinXMinYCorner) }
            if corners.contains(.topRight) { masked.insert(.layerMaxXMinYCorner) }
            if corners.contains(.bottomLeft) { masked.insert(.layerMinXMaxYCorner) }
            if corners.contains(.bottomRight) { masked.insert(.layerMaxXMaxYCorner) }
            self.layer.maskedCorners = masked
        }
        else {
            let path = UIBezierPath(roundedRect: bounds, byRoundingCorners: corners, cornerRadii: CGSize(width: radius, height: radius))
            let mask = CAShapeLayer()
            mask.path = path.cgPath
            layer.mask = mask
        }
    }
} 
```

用法：

```
view.roundCorners(corners: [.bottomLeft, .bottomRight], radius: 12) 
```

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2015-01-09T07:57:47.443

```
 // Create the path (with only the top-left corner rounded)
UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:view.bounds 
                           byRoundingCorners:(UIRectCornerBottomLeft | UIRectCornerBottomRight) 
                           cornerRadii:CGSizeMake(7.0, 7.0)];

// Create the shape layer and set its path
CAShapeLayer *maskLayer = [CAShapeLayer layer];
maskLayer.frame = cell.stripBlackImnageView.bounds;
maskLayer.path = maskPath.CGPath; 
// Set the newly created shapelayer as the mask for the image view's layer
view.layer.mask = maskLayer; 
```

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2012-04-16T02:26:41.690

以编程方式执行此操作的一种方法是创建一个具有圆角`UIView`的顶部。`UIView`或者您可以将顶部隐藏在某些东西下面。

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2021-07-12T06:14:07.727

使用此扩展程序，它将涵盖所有内容。

```
extension UIView {

   func roundTopCorners(radius: CGFloat = 10) {

       self.clipsToBounds = true
       self.layer.cornerRadius = radius
       if #available(iOS 11.0, *) {
           self.layer.maskedCorners = [.layerMinXMinYCorner, .layerMaxXMinYCorner]
       } else {
           self.roundCorners(corners: [.topLeft, .topRight], radius: radius)
       }
   }

   func roundBottomCorners(radius: CGFloat = 10) {

       self.clipsToBounds = true
       self.layer.cornerRadius = radius
       if #available(iOS 11.0, *) {
           self.layer.maskedCorners = [.layerMinXMaxYCorner, .layerMaxXMaxYCorner]
       } else {
           self.roundCorners(corners: [.bottomLeft, .bottomRight], radius: radius)
       }
   }

   private func roundCorners(corners: UIRectCorner, radius: CGFloat) {

        let path = UIBezierPath(roundedRect: bounds, byRoundingCorners: corners, cornerRadii: CGSize(width: radius, height: radius))
        let mask = CAShapeLayer()
        mask.path = path.cgPath
        layer.mask = mask
    }
} 
```

然后像这样使用它：-

```
override func viewDidAppear(_ animated: Bool) {
    super.viewDidAppear(animated)

    self.yourView.roundTopCorners()
} 
```

> 注意：- 我建议您不要将此代码放在**viewDidLayoutSubviews()**中，因为每当视图更新时，您都会在其中调用。所以使用**viewDidAppear()**，它会像魅力一样工作。

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2012-04-16T00:11:44.923

最简单的方法是制作带有圆角层的蒙版。

```
CALayer *maskLayer = [CALayer layer];
maskLayer.frame = CGRectMake(0,0,maskWidth ,maskHeight);
maskLayer.contents = (__bridge id)[[UIImage imageNamed:@"maskImageWithRoundedCorners.png"] CGImage];

aUIView.layer.mask = maskLayer; 
```

不要忘记：

```
#import <QuartzCore/QuartzCore.h> 
```

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2015-09-19T14:10:41.457

已经给出的所有答案都非常好且有效（尤其是尤努斯使用该`mask`属性的想法）。

但是我需要一些更复杂的东西，因为我的层经常会改变大小，这意味着我每次都需要调用该屏蔽逻辑，这有点烦人。

我使用 swift`extensions`和计算属性来构建一个真实`cornerRadii`属性，该属性负责在布局图层时自动更新蒙版。

这是使用[Peter Steinberg](https://twitter.com/steipete)出色的[Aspects](https://github.com/steipete/Aspects)库进行调配来实现的。

完整代码在这里：

```
extension CALayer {
  // This will hold the keys for the runtime property associations
  private struct AssociationKey {
    static var CornerRect:Int8 = 1    // for the UIRectCorner argument
    static var CornerRadius:Int8 = 2  // for the radius argument
  }

  // new computed property on CALayer
  // You send the corners you want to round (ex. [.TopLeft, .BottomLeft])
  // and the radius at which you want the corners to be round
  var cornerRadii:(corners: UIRectCorner, radius:CGFloat) {
    get {
      let number = objc_getAssociatedObject(self, &AssociationKey.CornerRect)  as? NSNumber ?? 0
      let radius = objc_getAssociatedObject(self, &AssociationKey.CornerRadius)  as? NSNumber ?? 0
      return (corners: UIRectCorner(rawValue: number.unsignedLongValue), radius: CGFloat(radius.floatValue))
    }
    set (v) {
      let radius = v.radius
      let closure:((Void)->Void) = {
        let path = UIBezierPath(roundedRect: self.bounds, byRoundingCorners: v.corners, cornerRadii: CGSize(width: radius, height: radius))
        let mask = CAShapeLayer()
        mask.path = path.CGPath
        self.mask = mask
      }
      let block: @convention(block) Void -> Void = closure
      let objectBlock = unsafeBitCast(block, AnyObject.self)
      objc_setAssociatedObject(self, &AssociationKey.CornerRect, NSNumber(unsignedLong: v.corners.rawValue), .OBJC_ASSOCIATION_RETAIN)
      objc_setAssociatedObject(self, &AssociationKey.CornerRadius, NSNumber(float: Float(v.radius)), .OBJC_ASSOCIATION_RETAIN)
      do { try aspect_hookSelector("layoutSublayers", withOptions: .PositionAfter, usingBlock: objectBlock) }
      catch _ { }
    }
  }
} 
```

我写了一篇简单的[博客文章](http://www.dispatchasync.com/blog/partial-corner-radii/)来解释这一点。

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2021-10-22T13:38:31.343

**这是Swift 5**的最佳方式：

```
import UIKit

extension UIView {

func roundCorners(radius: CGFloat = 10, corners: UIRectCorner = .allCorners) {
        self.clipsToBounds = true
        self.layer.cornerRadius = radius
        if #available(iOS 11.0, *) {
            var arr: CACornerMask = []

            let allCorners: [UIRectCorner] = [.topLeft, .topRight, .bottomLeft, .bottomRight, .allCorners]

            for corn in allCorners {
                if(corners.contains(corn)){
                    switch corn {
                    case .topLeft:
                        arr.insert(.layerMinXMinYCorner)
                    case .topRight:
                        arr.insert(.layerMaxXMinYCorner)
                    case .bottomLeft:
                        arr.insert(.layerMinXMaxYCorner)
                    case .bottomRight:
                        arr.insert(.layerMaxXMaxYCorner)
                    case .allCorners:
                        arr.insert(.layerMinXMinYCorner)
                        arr.insert(.layerMaxXMinYCorner)
                        arr.insert(.layerMinXMaxYCorner)
                        arr.insert(.layerMaxXMaxYCorner)
                    default: break
                    }
                }
            }
            self.layer.maskedCorners = arr
        } else {
            self.roundCornersBezierPath(corners: corners, radius: radius)
        }
    }

    private func roundCornersBezierPath(corners: UIRectCorner, radius: CGFloat) {
        let path = UIBezierPath(roundedRect: bounds, byRoundingCorners: corners, cornerRadii: CGSize(width: radius, height: radius))
        let mask = CAShapeLayer()
        mask.path = path.cgPath
        layer.mask = mask
    }

} 
```

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2019-10-30T13:19:22.920

如果您正在寻找**仅界面构建器的解决方案**，则有适用于**iOS 11 及更高版本**的解决方案。在这里查看我的答案：[https ://stackoverflow.com/a/58626264](https://stackoverflow.com/a/58626264)

* * *

## 回答 #24

> 赞同：3
> 
> 时间：2016-11-02T15:19:48.297

重用 Yunus Nedim Mehel 解决方案的可爱扩展

**斯威夫特 2.3**

```
extension UIView {
func roundCornersWithLayerMask(cornerRadii: CGFloat, corners: UIRectCorner) {
    let path = UIBezierPath(roundedRect: bounds,
                            byRoundingCorners: corners,
                            cornerRadii: CGSize(width: cornerRadii, height: cornerRadii))
    let maskLayer = CAShapeLayer()
    maskLayer.path = path.CGPath
    layer.mask = maskLayer
} } 
```

**用法**

```
let view = UIView()
view.roundCornersWithLayerMask(10,[.TopLeft,.TopRight]) 
```

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2016-01-27T11:11:10.113

**这是在 C# 中使用 Xamarin**为按钮的每个角设置角半径的方法：

```
var maskPath = UIBezierPath.FromRoundedRect(MyButton.Bounds, UIRectCorner.BottomLeft | UIRectCorner.BottomRight,
    new CGSize(10.0, 10.0));
var maskLayer = new CAShapeLayer
{
    Frame = MyButton.Bounds,
    Path = maskPath.CGPath
};
MyButton.Layer.Mask = maskLayer; 
```

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2021-10-05T11:48:03.920

使用这个扩展来设置圆角和圆角的圆形边框

像这样使用：

```
override func viewWillLayoutSubviews() {
            super.viewWillLayoutSubviews()

         myView.roundCornersWithBorder(corners: [.topLeft, .topRight], radius: 8.0)

        myView.roundCorners(corners: [.topLeft, .topRight], radius: 8.0)

        }

extension UIView {
   func roundCorners(corners: UIRectCorner, radius: CGFloat) {
        let path = UIBezierPath(roundedRect: bounds, byRoundingCorners: corners, cornerRadii: CGSize(width: radius, height: radius))
        let mask = CAShapeLayer()
        mask.path = path.cgPath
        layer.mask = mask
    }

    func roundCornersWithBorder(corners: UIRectCorner, radius: CGFloat) {
        let maskLayer = CAShapeLayer()
        maskLayer.frame = bounds
        maskLayer.path = UIBezierPath(roundedRect: bounds, byRoundingCorners: [.topLeft, .topRight], cornerRadii: CGSize(width: radius, height: radius)).cgPath

        layer.mask = maskLayer

        // Add border
        let borderLayer = CAShapeLayer()
        borderLayer.path = maskLayer.path // Reuse the Bezier path
        borderLayer.fillColor = UIColor.clear.cgColor
        borderLayer.strokeColor = UIColor(red:3/255, green:33/255, blue:70/255, alpha: 0.15).cgColor
        borderLayer.lineWidth = 2
        borderLayer.frame = bounds
        layer.addSublayer(borderLayer)
    }

} 
```

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2020-10-26T23:55:22.033

为了`SwiftUI`

我找到了这些解决方案，您可以从这里查看[https://stackoverflow.com/a/56763282/3716103](https://stackoverflow.com/a/56763282/3716103)

我强烈推荐第一个

**选项 1：使用 Path + GeometryReader**

（有关 GeometryReader 的更多信息：[https](https://swiftui-lab.com/geometryreader-to-the-rescue/) ://swiftui-lab.com/geometryreader-to-the-rescue/ ）

```
struct ContentView : View {
    var body: some View {

        Text("Hello World!")
            .foregroundColor(.white)
            .font(.largeTitle)
            .padding(20)
            .background(RoundedCorners(color: .blue, tl: 0, tr: 30, bl: 30, br: 0))
    }
} 
```

[![使用背景为文本视图提供角半径](../Images/60634495ce03e4683c252dd60eafc7a2.png)](https://i.stack.imgur.com/J1Sgp.png)

`RoundedCorners`

```
struct RoundedCorners: View {

    var color: Color = .white

    var tl: CGFloat = 0.0
    var tr: CGFloat = 0.0
    var bl: CGFloat = 0.0
    var br: CGFloat = 0.0

    var body: some View {
        GeometryReader { geometry in
            Path { path in

                let w = geometry.size.width
                let h = geometry.size.height

                // Make sure we do not exceed the size of the rectangle
                let tr = min(min(self.tr, h/2), w/2)
                let tl = min(min(self.tl, h/2), w/2)
                let bl = min(min(self.bl, h/2), w/2)
                let br = min(min(self.br, h/2), w/2)

                path.move(to: CGPoint(x: w / 2.0, y: 0))
                path.addLine(to: CGPoint(x: w - tr, y: 0))
                path.addArc(center: CGPoint(x: w - tr, y: tr), radius: tr, startAngle: Angle(degrees: -90), endAngle: Angle(degrees: 0), clockwise: false)
                path.addLine(to: CGPoint(x: w, y: h - be))
                path.addArc(center: CGPoint(x: w - br, y: h - br), radius: br, startAngle: Angle(degrees: 0), endAngle: Angle(degrees: 90), clockwise: false)
                path.addLine(to: CGPoint(x: bl, y: h))
                path.addArc(center: CGPoint(x: bl, y: h - bl), radius: bl, startAngle: Angle(degrees: 90), endAngle: Angle(degrees: 180), clockwise: false)
                path.addLine(to: CGPoint(x: 0, y: tl))
                path.addArc(center: CGPoint(x: tl, y: tl), radius: tl, startAngle: Angle(degrees: 180), endAngle: Angle(degrees: 270), clockwise: false)
            }
            .fill(self.color)
        }
    }
} 
```

`RoundedCorners_Previews`

```
struct RoundedCorners_Previews: PreviewProvider {
    static var previews: some View {
        RoundedCorners(color: .pink, tl: 40, tr: 40, bl: 40, br: 40)
    }
} 
```

[![我只将角半径赋予视图顶部](../Images/127b1e318639577b84438fb7558adb58.png)](https://i.stack.imgur.com/EHEUY.png)

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2019-05-08T12:46:33.350

更改代码后@apinho 在 swift 4.3 中工作正常

```
extension UIView {
func roundCornersWithLayerMask(cornerRadii: CGFloat, corners: UIRectCorner) {
    let path = UIBezierPath(roundedRect: bounds,
                            byRoundingCorners: corners,
                            cornerRadii: CGSize(width: cornerRadii, height: cornerRadii))
    let maskLayer = CAShapeLayer()
    maskLayer.path = path.cgPath
    layer.mask = maskLayer
  }
} 
```

使用此功能为您查看

```
YourViewName. roundCornersWithLayerMask(cornerRadii: 20,corners: [.topLeft,.topRight]) 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2019-04-09T12:56:15.973

[Stephane](https://stackoverflow.com/a/41197790/4452289)答案的另一个版本。

```
import UIKit

    class RoundCornerView: UIView {
    var corners : UIRectCorner = [.topLeft,.topRight,.bottomLeft,.bottomRight]
        var roundCornerRadius : CGFloat = 0.0
        override func layoutSubviews() {
            super.layoutSubviews()
            if corners.rawValue > 0 && roundCornerRadius > 0.0 {
                self.roundCorners(corners: corners, radius: roundCornerRadius)
            }
        }
        private func roundCorners(corners: UIRectCorner, radius: CGFloat) {
            let path = UIBezierPath(roundedRect: bounds, byRoundingCorners: corners, cornerRadii: CGSize(width: radius, height: radius))
            let mask = CAShapeLayer()
            mask.path = path.cgPath
            layer.mask = mask
        }

    } 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2019-08-30T15:34:15.427

在 Swift 4.2 中，通过`@IBDesignable`如下方式创建它：

```
@IBDesignable

class DesignableViewCustomCorner: UIView {

    @IBInspectable var cornerRadious: CGFloat = 0 {
        didSet {
            let path = UIBezierPath(roundedRect: self.bounds, byRoundingCorners: [.topLeft, .topRight], cornerRadii: CGSize(width: cornerRadious, height: cornerRadious))
            let mask = CAShapeLayer()
            mask.path = path.cgPath
            self.layer.mask = mask
        }
    }

} 
```

# ios - iOS 应用发布延迟

> ID：10167268
> 
> 赞同：2
> 
> 时间：2012-04-15T23:58:54.607
> 
> 标签：ios, app-store

我已经四处寻找了一段时间，但似乎无法找到答案。

我的问题是：向苹果提交 iOS 应用程序时，检查需要多长时间？是几天还是几周后才可以在应用商店中使用（假设它通过了测试）？

时间对于这个应用程序来说非常重要，因为我们希望它尽可能好，但是因为它是为一个需要 4 天的体育赛事而设计的，所以适当的时间对于避免在赛事结束后发布至关重要。

希望以前发布过一个或多个应用程序的人可以提供帮助。

提前致谢。托马斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T00:09:44.380

如其他答案所述，Apple 审核您的应用程序所需的时间各不相同。根据我的经验，它在几天到几周之间（变量太多无法计算），这当然是假设您的应用程序没有因任何原因被拒绝。

但是，有一种解决方法可以让您的应用程序的发布时间恰到好处。确保您提前将其提交给 Apple **WELL**，在 iTunes Connect 新应用创建过程中，有时会询问您是否希望应用在获得批准后自动发布，或者您是否想手动发布它自己。选择后者，您将可以随时批准您的应用程序，它会在几个小时内出现在 App Store 上。

如果您已经选择了自动发布并希望更改它，您可以随时在 iTunes Connect 中执行此操作，方法是导航到您的应用，选择“权利和定价”并调整您的应用可用日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T04:23:59.447

当您提交应用程序时，您还可以提供“可用日期”。因此，请提前提交，指定您的目标发布日期，并且在此之前它不会显示。有关详细信息，请参阅[iTunes Connect 开发人员指南](http://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide.pdf)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T00:02:51.497

我会在活动开始前一两个月提交。如果应用程序第一次被拒绝，这将使您有足够的时间解决任何问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T00:08:57.983

这在很大程度上取决于您要发布的内容。查看 App Store 指南：[https ://developer.apple.com/appstore/guidelines.html](https://developer.apple.com/appstore/guidelines.html)

如果您的应用程序完全有问题，则需要更长的时间。如果你去这里，你可以看到更新和发布的平均时间：

[https://developer.apple.com/news/index.php?id=03202012a](https://developer.apple.com/news/index.php?id=03202012a)

目前大约5天。我的大多数应用程序都花了一周时间。一个有问题的花了一个月的时间。我建议尽早提交，至少几周。然后设置一个较晚的发布日期，这样它就不会自动发布。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T00:01:46.070

检查各不相同 - 我听说应用程序需要一天到几周的时间（不是很有帮助，但事实如此）。

您将收到一封电子邮件，说明您的应用在通过测试后已准备就绪，但我需要几个小时（最多 4ish）才能将其显示在应用商店中。您可能可以通过较早搜索名称找到它，但它需要几个小时才能显示在“最近添加”中

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T00:17:27.267

如果一切都获得批准，我的经验是 5 到 6 天

# assembly - 在汇编程序中进行间接调用

> ID：10167269
> 
> 赞同：0
> 
> 时间：2012-04-15T23:58:55.413
> 
> 标签：assembly, compiler-construction, x86

我正在为一个类编写一个编译器，并且我坚持使用 GNU 的语法来进行间接调用。考虑这个简单的程序：

```
.text
.globl main
main:
  movl func, %eax
  call *%eax
  ret

func:
  movl $42, %eax
  ret 
```

编译`gcc -m32 -O0`并运行生成的程序会给我一个分段错误。谁能告诉我如何正确拨打电话？

谢谢。

文森特。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T00:24:46.260

`call`指令本身实际上是好的。:)

您的问题是您似乎忘记了 AT&T 语法的工作原理。您在这里所做的`movl func, %eax`是将标签地址中的双字复制`func`到`eax`寄存器中。本质上，`eax`以函数的前 4 个字节的实际代码结束。

AT&T 中的立即操作数以 . 为前缀`$`。作为编译时常量的`func`标签的值可以用作立即数，这就是您在这种情况下想要的。因此，替换`movl func, %eax`为`movl $func, %eax`，你会没事的。:)

在这里使用`lea`是多余的。当然，它会起作用，但由于`func`它是一个编译时常量，因此将它简单地放在代码中而不是在运行时找出它会更有效。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-16T00:22:00.677

我想我明白了；使用`lea`而不是`movl`解决问题；我想 lea 进行虚拟地址转换。

# javascript - 设置背景图片 css 时如何防止谷歌浏览器访问服务器？

> ID：10167273
> 
> 赞同：1
> 
> 时间：2012-04-15T23:59:54.253
> 
> 标签：javascript, jquery, css, background-image

当您在 Google Chrome 中设置背景图片（您可能还包括使用 img 标签 - 虽然我还没有测试过）并且服务器不要求缓存它时，Google Chrome 将访问服务器要求再次图像（即使它已经在页面中 - 我已将此作为错误提交，但它被设置为 wontfix）。有没有办法可以绕过这个（最好使用 jQuery）？

我已将图像加载到 javascript Image 对象中（因为计划是将其放置在画布上）所以我想我可以用它做一些事情（但[使用 javascript 状态将 Image 对象设置为 div 背景图像](https://stackoverflow.com/questions/9790347/set-an-image-object-as-a-div-background-image-using-javascript)）。

将服务器设置为要求浏览器缓存文件并不理想，因为它是动态生成的（我知道 ?_rand=123 技巧，但更喜欢纯客户端解决方案）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:04:55.013

为每个设置了 属性的图像创建一个 CSS 类`background-image`，然后将`className`元素的 设置为与要显示的图像对应的类。

在 JSBin 上查看此技术的实际应用：http: [//jsbin.com/oruros/1](http://jsbin.com/oruros/1)。在 Chrome 中打开网络面板并查看 -**没有多次请求图像**。

如果您想动态执行此操作，请使用此处概述的技术之一来创建 CSS 类：[如何使用 Javascript 创建 <style> 标记](https://stackoverflow.com/questions/524696/how-to-create-a-style-tag-with-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T00:09:36.887

将一个对象换成另一个。

如果您说预缓存图像不会为您解决此问题（如果没有看到您的实际页面和服务器，我们很难知道），那么您唯一的其他潜在解决方案是将实际图像作为其背景图像的对象进行预缓存然后将您当前的对象换成已经加载了背景的对象。如果您披露了您尝试更改背景图像的实际 HTML，我们可以更具体地建议如何做到这一点。

但是，这只是一种解决方法，因为解决此问题的更正确方法是使客户端能够在您需要缓存时使用来自服务器的正确标头进行缓存。然后，当您不想要缓存时，您可以随时通过在 URL 中附加一些内容来破坏缓存，但是如果您指示浏览器不要通过标头进行缓存，那么它会听您的，并且您无法解决那。

# java - Java排序和HashMap

> ID：10167278
> 
> 赞同：0
> 
> 时间：2012-04-16T00:01:54.410
> 
> 标签：java, sorting, data-structures, hashmap

我有一个`HashMap<String, Integer>`如何对这个数据结构进行排序并保留键值映射？我想按 VALUES 而不是键排序。

```
Collection<Integer> counts = tableFrequency.values(); 
```

但后来我失去了键映射。或者是否有更好的关联数据结构可以用来代替 HashMap？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T00:02:26.353

要`Map`按其值对 a 进行排序，您可以获取它[`entrySet`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#entrySet%28%29)并使用 custom对其进行排序[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)。

```
List<Entry<K,V>> sorted = new ArrayList<>(map.entrySet());
Collections.sort(sorted, new Comparator<Entry<K,V>>() {
    public int compare(Entry<K,V> o1, Entry<K,V> o2) {
        return o1.getValue().compareTo(o2.getValue());
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T00:04:52.947

TreeMap 按照您添加它们的顺序保持元素。这对你来说似乎是一个完美的答案。

但请注意，某些操作会比使用 HashMap 慢得多，例如搜索......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T00:04:57.737

该课程`TreeMap`是您想要的：

```
TreeMap treeMap = new TreeMap();

treeMap.put("One", new Integer(1));
treeMap.put("Two", new Integer(2));

Object obj = treeMap.get("Two");
System.out.println(obj); 
```

它使用 compare() 方法来对元素进行排序。

由于您的新问题是关于按值排序，因此这是[这篇文章的副本](https://stackoverflow.com/q/2864840/1332690)

# jquery-mobile - 根据数据身份获取 json 数据

> ID：10167280
> 
> 赞同：0
> 
> 时间：2012-04-16T00:02:05.440
> 
> 标签：jquery-mobile

我再次在 SO 上发帖，因为我在构建我的第一个 jquerymobile 项目期间获得了所有问题的答案。现在的问题是我需要从已加载的 json 中检索特定数据。我的 json 从新闻表中获取 2 行并在列表视图中显示新闻标题。我需要的是，当我单击列表以显示我单击的新闻的描述时。到目前为止，我能够获取我单击的列表的 news_id，但现在我需要访问 json 并根据该 id 获取所需的数据。我为获取 id 所做的代码是：

a href='#NewsDetails' data-identity='"+v.news_id+"'

并且在单击列表时，我有以下内容来获取 ID： $("a[href=#NewsDetails]").live("click", function(e) { navIdentity = $(this).data("identity "); 警报(navIdentity); } ); 到目前为止一切都很好，但我唯一需要的是使用 navIdentity 访问 json 并获取所需的行来显示它。像往常一样依靠你的专业回复......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:57:13.697

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

所以你有可用的 json 数据，并且你有你想要的元素的“id”......所以只需遍历 json，直到找到你要找的东西。如果你有一些示例 json 数据，我可以给你一个更好的例子，但它看起来像这样：

```
$.each(data.newsDetails, function(index, newsDetail) {
    if(newsDetail.id === navIdentity) {
        // do something with newsDetail
        return false; // break out of loop
    }
}) 
```

希望这可以帮助

# bash - 从 Bash 中的文件名中删除连字符

> ID：10167283
> 
> 赞同：0
> 
> 时间：2012-04-16T00:02:31.217
> 
> 标签：bash, shell, rename

我进行了彻底的研究，以找到/创建一个适用于我想要实现的脚本。

我正在尝试使用 Bash 更改多个文件名。在这种类型中，我试图只删除连字符：

YachtRescueVO-041512.mpg

至

游艇救援VO041512.mpg

但是，同一目录中有更多文件。我正在尝试删除连字符和日期：

6CO1-041512.mpg

至

6C01.mpg

我很确定我需要一个正则表达式来对其进行排序，因为还有其他文件命名约定，例如 6B1A、3TSE1、CO1、11TSE3、TS1 等。我意识到这将是一个冗长的脚本。如果您有空闲时间，我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:07:35.180

好吧，我没有时间做这样的脚本，但我认为你应该看看以下命令：

*   sed
*   改名
*   切
*   awk

是的，正则表达式是一种非常有效的方法，但是要真正有效地使用语法需要相当长的时间......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T00:13:13.943

请参阅[Bash 参数扩展](http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html)

假设文件名在`var`：

`new_var = ${var%-*}${var#*-}`

这对于您的第一个示例来说很好。第二个例子：

`new_var = ${var%-*}.${var#*.}`

我无法从您的问题中识别出您想要做什么替换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T00:52:40.897

我已经在你[在这里](https://stackoverflow.com/questions/10158704/remove-hyphens-from-filename-with-bash/10158742#10158742)提出的问题中发布了这个，但如果你认为这是一个单独的问题，这将重命名目录及其子目录中的每个文件：

```
for file in $(find dirWithDashedFiles -type f -iname '*-*'); do
  mv $file ${file//-/}
done 
```

我在另一篇文章中提到的所有警告都适用。

您可以修改字符串操作以满足您的需要。例如，删除所有连字符后，您可以运行此命令以删除`6C01`名称中包含的文件的日期：

```
for file in $(find dirWith6C01Files -type f -iname '6C01*'); do
  mv $file ${file%[0-9][0-9][0-9][0-9][0-9][0-9].mpg}.mpg
done 
```

[这个站点](http://tldp.org/LDP/abs/html/string-manipulation.html)有一些关于 bash 中的字符串操作的信息，这些信息可以帮助你开始使用你需要的正则表达式。

*注意：*我不记得/找不到任何东西来指定要匹配的确切字符数，例如`[0-9]{6}`egrep 中的 la。如果有人找到它，请告诉我。

# c++ - 从 dll/共享库返回指针会导致 seg-fault

> ID：10167293
> 
> 赞同：0
> 
> 时间：2012-04-16T00:05:53.247
> 
> 标签：c++, pointers, plugins, shared-libraries

我正在为一个程序编写一个小型插件系统。它的某些部分已经完成，加载文件并调用构造函数工作。

在其中一个函数中，我需要将一些（类）指针传递回处理程序，这就是我得到段错误的地方。

在程序中：

```
class RenderInterface {
    public:
        RenderInterface();
        virtual ~RenderInterface();

        void RegisterBufferInterface(BufferInterface* interface)
        {
             bInterface = interface; // <---- this is where segfault occurs
        }
        void RegisterCameraInterface(CameraInterface* interface){}
        void RegisterRenderInterface(RenderInterface* interface){}

        static RenderInterface* GetSingletonPtr()
        {
            return _singleton;
        }

    private:
        static RenderInterface* _singleton;

        BufferInterface* bInterface;
        CameraInterface* cInterface
        RenderInterface* rInterface;
}; 
```

**RenderInterface::_singleton 在其他地方设置为 0。**

在注册函数中（在 dll 中）：

```
class BInterface : public BufferInterface {
    public:
        ... various stuff ....
}

class GLPlugin : public Plugin {
    public:
        Plugin() : bInterface(0) {}
        ~Plugin(){}

        void Initialize() // <--- is called after dll has been loaded
        {
            bInterface = new BInterface();

            InterfaceManager::GetSingletonPtr()->RegisterBufferInterface(bInterface); // segfault
            // register other stuff
        }
    private:
        BufferInterface* bInterface;
}; 
```

我缺少什么让这个工作？还有另一种方法吗？

编辑：在简化代码时错过了 BufferInterface 之后的 *，感谢 Luchian

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T00:08:31.247

好吧，它崩溃了，因为你从来没有初始化你的单例：

```
static RenderInterface* GetSingletonPtr()
{
    return _singleton;
} 
```

我假设你在你的实现文件中初始化`_singleton`，`NULL`在这种情况下你需要：

```
static RenderInterface* GetSingletonPtr()
{
    if ( !_singleton )
        _singleton = new RenderInterface;
    return _singleton;
} 
```

其他一些提示：

*   在使用单例之前评估其他选项
*   实现析构函数通常意味着您还需要一个复制构造函数和一个赋值运算符（三规则）
*   如果您的班级确实是单例，那么构造函数不应该是`private`吗？
*   `bInterface = new BInterface();`是非法的，因为`bInterface`它是一个对象，而不是一个指针。

# c++ - 无法访问多图迭代器的方法？

> ID：10167297
> 
> 赞同：1
> 
> 时间：2012-04-16T00:07:06.487
> 
> 标签：c++, iterator, multimap

我不知道出了什么问题，但我无法访问我的迭代器所指的对象的方法。这就是我所拥有的：

```
multimap<long, Note>::iterator notesIT;
notesIT = trackIT->getNoteList().lower_bound(this->curMsr * 1000000);

while(notesIT->first / 1000000 == 1){
    cout << notesIT->first.getStartTime() << endl; // error on this line
    notesIT++;
} 
```

我收到此错误：

```
error: request for member 'getStartTime' in 'notesIT. std::_Rb_tree_iterator<_Tp>::operator-> [with _Tp = std::pair<const long int, Note>]()->std::pair<const long int, Note>::first', which is of non-class type 'const long int' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T00:10:52.140

也许：

```
notesIT->second.getStartTime() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T00:14:48.107

编译器告诉你

```
notesIT->first.getStartTime() 
```

无效，因为您试图`getStartTime()`调用`int`. 显然，你的意思是在 a 上调​​用它`Node`，所以选择迭代器指向的对的第二部分（产生`Node`迭代器的部分）：

```
cout << notesIT->second.getStartTime() << endl; 
```

# python - 在 Windows 中使用批处理文件静默安装 numpy.exe

> ID：10167302
> 
> 赞同：4
> 
> 时间：2012-04-16T00:08:37.347
> 
> 标签：python, windows, batch-file, numpy

我想创建一个批处理文件来帮助多个用户在 Windows 共享驱动器上安装 numpy。基本上，用户根本不需要输入选项或执行任何操作（就像他们双击 numpy 可执行安装程序一样）。

Python 安装**已经存在**。用户只需运行批处理文件并将 numpy 安装到默认`Python\Lib\site-packages`位置。

我试过使用以下命令：

```
numpy-1.6.1-win32-superpack-python2.7.exe /qn
numpy-1.6.1-win32-superpack-python2.7.exe /quiet
numpy-1.6.1-win32-superpack-python2.7.exe /passive 
```

在所有情况下，批处理文件都与可执行文件位于同一目录中，并且会弹出一个图形窗口，用户必须在其中一次又一次地单击“下一步”。有没有办法使用所有默认选项运行安装并且没有用户交互？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:31:46.380

看起来 numpy 安装过程实际上是由两个安装程序组成的。外层是 NSIS，内层是 python 的 distutils 安装程序。所有 NSIS 安装程序都有`/s`静默安装，但是这个 NSIS 安装程序调用 distutils 安装程序。

不幸的是， distutils 安装程序似乎没有任何静默标志。我只看到两个明显的选择：

*   自己编译 numpy 并让它发出一个 msi 安装程序（因此，应该能够静默安装）。使用`python setup.py bdist_msi`. 如果您愿意，可以使用[bdist_nsi](http://bdist-nsi.sourceforge.net/)生成 NSIS 包。
*   使用[AutoIt](http://www.autoitscript.com/site/autoit/)之类的工具来自动化 distutils 安装程序。只需等待 disutils 窗口出现并向其发送一系列键盘快捷键即可自动安装。

后者似乎是更实际的解决方案。您还可以尝试让 python 开发人员在 distutils 安装程序中获取静默标志...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-04T18:09:27.640

如果您有正确的 .exe 包，则无需从源代码安装它。

[我从http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy 获取](http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy)了最新的 numpy .exe

并从下载文件夹中工作，您只需在控制台中键入以下内容：

```
easy_install c:\users\YourName\downloads\numpy‑MKL‑1.9.1.win32‑py2.7.exe 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-11T07:32:42.340

我使用的无人值守安装方法如下：

```
%PYTHON_PATH%\Scripts\easy_install c:\temp\numpy-1.9.0.zip 
```

# ruby-on-rails - 对表条目进行排序，然后分组

> ID：10167306
> 
> 赞同：1
> 
> 时间：2012-04-16T00:09:00.670
> 
> 标签：ruby-on-rails, ruby, sorting

我想对表格（课程）进行排序并按主题（课程表格中的字段）对它们进行分组。然后按主题显示它们。

所以我会有一个标题：主题

然后它将显示该主题中每个项目的图像、标题和描述。然后它会移动到下一个主题，依此类推，最多 5 个项目

例如：

```
Math
[img]   [img]   [img]  ...
title   title   title  ...
desc    desc    desc   ...

Science
[img]   [img]   [img]  ...
title   title   title  ...
desc    desc    desc   ...

etc..... 
```

在控制器中，您将如何进行排序然后划分？

如果您有动态数量的主题，您如何在视图中显示它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T00:53:55.587

满足您的需求[`Enumerable#group_by`](http://ruby-doc.org/core-1.9.3/Enumerable.html)：

```
my_lessons.sort_by{ |lesson|
  # Or use ActiveRecord to sort your data
  lesson.title
}.group_by{ |lesson|
  lesson.subject
}.each do |subject,subj_lessons|
  puts "subject: #{subject}"
  subj_lessons.each do |lesson|
    puts lesson.title
  end
end 
```

无论您从 group_by 返回什么，都将是您的散列键，而值 ( `subj_lessons`) 是与该分组匹配的所有项目的数组。

修改它以适合您的实际数据和您的输出需求。

# java - 安卓检查EditText

> ID：10167309
> 
> 赞同：2
> 
> 时间：2012-04-16T00:09:39.867
> 
> 标签：java, android, android-edittext

我有一个 EditText，它总是包含一个整数……但有时也包含文本……如何检查我的字符串是否包含 EditText 中的文本字段？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T00:46:43.040

我将通过以下方式解决问题：

```
String mEditText = mDisplay.getText().toString();
if(mEditText.matches("[0-9]+")) {
    // mEditText only contains numbers
} else {
    // mEditText contains number + text, or text only. 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T00:48:15.287

我认为您可以检查您的文本是否仅包含数字和/或字母。如果您构建这样的实用程序方法：

```
public static boolean isNumeric(String s){
  if(TextUtils.isEmpty(s)){
    return false;
  }
  Pattern p = Pattern.compile("[-+]?[0-9]*");
  Matcher m = p.matcher(s);
  return m.matches();
} 
```

...然后您可以轻松地使用它来检查从 TextView 检索到的文本是否包含整数:)

```
 String text = textview.getText().toString();
  if(TextUtils.isEmpty()){
    // We have got an empty string
  } else if(isNumeric(text){
    // Do something
  }else{
    // It's not numeric do something else
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T00:33:53.253

退房`java.lang.Character.isDigit()`。您可以`String`通过遍历其字符并检查它们是否为数字来检查 a 是否为数字。

[参考](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#isDigit%28char%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T01:30:20.350

您还可以在 EditText 上注册[http://developer.android.com/reference/android/text/TextWatcher.html](http://developer.android.com/reference/android/text/TextWatcher.html)以在字段更改时执行这些操作。这使您可以做一些好事，例如在输入无效字符时拒绝它们，或者在文本无效时将文本变为红色。

# sql - 在 SQL Server 中对行进行分组

> ID：10167310
> 
> 赞同：0
> 
> 时间：2012-04-16T00:09:43.380
> 
> 标签：sql, sql-server-2008

我需要找到一种方法对组中最新时间戳 5 分钟内发生的行进行分组，并且 displayid 和 object id 相同.....

```
CREATE TABLE [dbo].[ExampleLog](
  [ID] [uniqueidentifier] NOT NULL,
  [EVENTNUMBER] [int] NULL,
  [DISPLAYSERIAL] [int] NULL,
  [DISPLAYID] [varchar](50) NULL,
  [OBJECTSERIAL] [int] NULL,
  [OBJECTRSSILEVEL] [int] NULL,
  [OBJECTID] [varchar](50) NULL,
  [TIMESTAMP] [datetime] NULL)

INSERT INTO [dbo].[ExampleLog]
VALUES 
  (NewID(), 206, 6897913, 'HV 644', 6885819, 66, 'WAP 8', '2012-01-01 12:12:00'),
  (NewID(), 206, 6897913, 'HV 644', 6885819, 66, 'WAP 8', '2012-01-01 12:13:00'),
  (NewID(), 206, 6897913, 'HV 644', 6877807, 54, 'MV 20', '2012-01-01 12:16:00'),
  (NewID(), 103, 6897913, 'HV 644', 6898052, 118, 'HV 62', '2012-01-01 12:20:00'),
  (NewID(), 206, 6897913, 'HV 644', 6886130, 122, 'HV 62', '2012-01-01 12:21:00'),
  (NewID(), 206, 6897913, 'HV 644', 6886130, 106, 'HV 62', '2012-01-01 12:25:00'),
  (NewID(), 204, 6897913, 'HV 644', 6886130, 106, 'HV 62', '2012-01-01 12:31:00'),
  (NewID(), 204, 6897913, 'HV 644', 6886130, 106, 'HV 62', '2012-01-01 12:33:00'),
  (NewID(), 104, 6897913, 'HV 644', 6886130, 106, 'HV 62', '2012-01-01 12:39:00') 
```

所以使用上面的数据集，我的结果理想地分组如下；

第 1 行和第 2 行被分组，因为 objectid 和 displayid 相同，并且第 2 行出现在第 1 行的 5 分钟内，数据集中没有其他行包含相同的 displayid 和 objectid 以及组最新 5 分钟内的时间戳时间戳（第 2 行）所以..

第 3 行自行分组，因为在该组最新时间戳（第 3 行）的 5 分钟内，数据集中没有 displayid 和 objectid 匹配的行。

第 4、5 和 6 行被分组，因为 displayid 的匹配、objectid 的匹配和行时间戳在最后一行的 5 分钟内，第 5 行的时间戳在第 4 行的 5 分钟内，第 6 行的时间戳在行的 5 分钟内5个。

第 7 行和第 8 行被分组，因为 objectid 和 displayid 相同，并且第 8 行的时间戳在该组最新时间戳（第 7 行）的 5 分钟内。

第 9 行自行分组，因为在该组最新时间戳的 5 分钟内，数据集中没有显示 ID 和 objectid 匹配的行

*我使用的是 SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T23:06:30.183

感谢您的查看和您的建议，这个解决方案对我来说效果很好......

```
WITH 
    cte_remove AS (
SELECT b.*
FROM dbo.examplelog a
INNER JOIN dbo.examplelog b ON
    a.ID != b.ID AND
    a.DISPLAYID = b.DISPLAYID AND 
    a.OBJECTID = b.OBJECTID AND 
    b.[timestamp] BETWEEN a.[timestamp] AND DATEADD(SECOND, 300, a.[timestamp])
),
   cte_results AS (
SELECT * FROM dbo.examplelog EXCEPT 
SELECT * FROM cte_remove 
)
SELECT * FROM cte_results ORDER BY [timestamp]
GO 
```

# php - Zend 框架脚本标签 在大约一年的 OO-PHP 经验之后，我只是向 ZF 介绍自己。我开始使用的这本书：

> ID：10167320
> 
> 赞同：1
> 
> 时间：
> 
> 标签：php, zend-framework

在大约一年的 OO-PHP 经验之后，我只是向 ZF 介绍自己。我开始使用的这本书：

```
<?= 
```

在地方而不是

```
<?php echo 
```

作者似乎很有信心这将输出数据，而不是实际代码，但是，它似乎对我不起作用，因为我不得不使用普通方法。

有没有人成功地使用前者而不是后者？关于配置等的任何建议......可能会导致这对我造成破坏？已安装 ZF 1.11.11

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T00:14:11.417

是的，`<?=`应该可以正常工作：

但是请注意，**在 PHP 5.4.0 之前**，`short_open_tag`必须`On`在 php.ini 中才能正常工作：

[http://www.php.net/manual/en/ini.core.php#ini.short-open-tag](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)

祝你好运！

# mongodb - MongoDB - $unwind - 如何在 $group 聚合中展开多个数组

> ID：10167322
> 
> 赞同：5
> 
> 时间：2012-04-16T00:11:34.963
> 
> 标签：mongodb, pymongo

(1) 我在集合中添加了以下内容：

```
{ "_id" : 1, "hitsPerOneSecond" : [ 2, 3, 5, 4, 1, 2, 3, 4, 1, 2 ], "startTime" :    ISODate("2012-04-07T10:41:33.380Z"), "returnCodeHits" : { "300" : 5, "200" : 12 }, "xxxServer" : "xxx:8100", "statsSummarizedToSeconds" : 10, "pathStats_xxx_api_get_version" : [ 0.2280779683225852, 0.030849283020361273, 0.9947690473370484 ], "pathStats_xxx_api_get_response" : [ 1.2163705612407407, 1.0602539963494662, 1.4853219936411421 ], "type" : "xxxType", "startTimeStr" : "07-04-2012:10AM" }

{ "_id" : 2, "hitsPerOneSecond" : [ 2, 3, 5, 4, 1, 2, 3, 4, 1, 2 ], "startTime" : ISODate("2012-04-07T10:41:43.380Z"), "returnCodeHits" : { "300" : 5, "200" : 12 }, "xxxServer" : "xxx:8100", "statsSummarizedToSeconds" : 10, "pathStats_xxx_api_get_version" : [ 0.2280779683225852, 0.030849283020361273, 0.9947690473370484 ], "pathStats_xxx_api_get_response" : [ 1.2163705612407407, 1.0602539963494662, 1.4853219936411421 ], "type" : "xxxType", "startTimeStr" : "07-04-2012:10AM" } 
```

(2) 进行以下聚合时：

```
db.newStats.aggregate({$unwind: "$hitsPerOneSecond"},{$group:{_id:"$startTimeStr", totalHits: {$sum: "$hitsPerOneSecond"}, totalHitsCount: {$sum: 1}, avgHit: {$avg: "$hitsPerOneSecond"}, minHit: {$min:"$hitsPerOneSecond"}, maxHit:{$max: "$hitsPerOneSecond"}}}); 
```

(3) 结果正确：

```
{
"result" : [
    {
        "_id" : "07-04-2012:10AM",
        "totalHits" : 54,
        "totalHitsCount" : 20,
        "avgHit" : 2.7,
        "minHit" : 1,
        "maxHit" : 5
    }
],
"ok" : 1 
```

}

(4) 但是，我需要在上面相同的聚合中对“pathStats_xxx_api_get_response”（来自集合）执行展开，以便在上面的相同结果中输出 totalResponses、totalResponsesCount、avgResponse、minResponse 和 maxResponse。因此，我的结果应该是这样的：

```
{
"result" : [
    {
        "_id" : "07-04-2012:10AM",
        "totalHits" : 54,
        "totalHitsCount" : 20,
        "avgHit" : 2.7,
        "minHit" : 1,
        "maxHit" : 5,
                    "totalResponses" : ??
                    "totalResponsesCount": ??
        "avgResponse" : 2.7,
        "minResponse" : 1,
        "maxResponse" : 5
    }
],
"ok" : 1 
```

}

不确定如何在与我几乎相同的聚合中添加更多 $unwind ！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-03T20:32:27.680

如何`$unwind`多于一个数组？你试过`$unwinding`多次吗？:)

```
db.newStats.aggregate([
    {$unwind: "$hitsPerOneSecond"},
    {$unwind: "$pathStats_xxx_api_get_response"},

    {$group:{
        _id:"$startTimeStr", 
        totalHits: {$sum: "$hitsPerOneSecond"}, 
        totalHitsCount: {$sum: 1}, 
        avgHit: {$avg: "$hitsPerOneSecond"}, 
        minHit: {$min:"$hitsPerOneSecond"}, 
        maxHit:{$max: "$hitsPerOneSecond"},

        totalResponses: {$sum: "$pathStats_xxx_api_get_response"},
        . . .
     }}
]); 
```

请记住，聚合框架将数组作为输入（注意我添加了`[`, `]`）。在数组中，您可以根据需要向管道添加任意数量的聚合函数（需要引用），任何步骤的输出都将成为下一个步骤的输入！

**笔记：**

不要忘记，如果您尝试`$unwind`使用不存在的键或空数组，您最终会没有文档！这就像乘以`0`我猜......所以对于多个（可能很多）`$unwind`，处理鬼的机会增加：如果任何涉及的数组为空，则整个文档都会丢失，并且您的任何`$group`聚合都一无所获.. .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T22:45:21.807

可能最简单的解决方案是使用两个单独的聚合操作来执行此操作，并将结果合并到您的应用程序中。

或者，您可以使用 Map Reduce 操作执行此操作：

以下 map 和 reduce 函数应提供您正在寻找的结果：

```
var map = function() {
  var totalHits = this.hitsPerOneSecond.map(function(a,b){return a+b;});
  var totalHitsCount = this.hitsPerOneSecond.length;
  var avgHit = totalHits / totalHitsCount;
  var minHit = Math.min.apply(Math, this.hitsPerOneSecond);
  var maxHit = Math.max.apply(Math, this.hitsPerOneSecond);
  var totalResponses = pathStats_xxx_api_get_response.map(function(a,b){return a+b;});
  var totalResponsesCount = this.pathStats_xxx_api_get_response.length;
  var avgResponse = totalResponses / totalResponsesCount;
  var minResponse = Math.min.apply(Math, this.pathStats_xxx_api_get_response);
  var maxResponse = Math.max.apply(Math, this.pathStats_xxx_api_get_response);
  emit(this.startTimeStr, {
    "totalHits": totalHits,
    "totalHitsCount": totalHitsCount,
    "avgHit": avgHit,
    "minHit": minHit,
    "maxHit": maxHit,
    "totalResponses": totalResponses,
    "totalResponsesCount": totalResponsesCount,
    "avgResponse": avgResponse,
    "maxResponse": maxResponse,
    "minResponse": minResponse
  })
}

var reduce = function(key, values) {
  var output = {
    "totalHits": 0,
    "totalHitsCount": 0,
    "avgHit": 0,
    "minHit": null,
    "maxHit": null,
    "totalResponses": 0,
    "totalResponsesCount": 0,
    "avgResponse": 0,
    "maxResponse": null,
    "minResponse": null
  };
  values.forEach(function(v) {
    output.totalHits += v.totalHits;
    output.totalHitsCount += v.totalHitsCount;
    output.avgHit = output.totalHits / output.totalHitsCount;
    if (output.minHit == null) {
      output.minHit = v.minHit;
    } else {
      if (v.minHit < output.minHit) {
        output.minHit = v.minHit
      }
    }
    if (output.maxHit == null) {
      output.maxHit = v.maxHit;
    } else {
      if (v.maxHit > output.maxHit) {
        output.maxHit = v.maxHit
      }
    }

    output.totalResponses += v.totalResponses;
    output.totalResponsesCount += v.totalResponsesCount;
    output.avgResponse = output.totalResponses / output.totalResponsesCount;
    if (output.minResponse == null) {
      output.minResponse = v.minResponse;
    } else {
      if (v.minResponse < output.minResponse) {
        output.minResponse = v.minResponse
      }
    }
    if (output.maxResponse == null) {
      output.maxResponse = v.maxResponse;
    } else {
      if (v.maxResponse > output.maxResponse) {
        output.maxResponse = v.maxResponse
      }
    }
  });
  return output;
}

> db.newStats.mapReduce(map, reduce, {out:{inline:1}})
{
    "results" : [
        {
            "_id" : "07-04-2012:10AM",
            "value" : {
                "totalHits" : 54,
                "totalHitsCount" : 20,
                "avgHit" : 2.7,
                "minHit" : 1,
                "maxHit" : 5,
                "totalResponses" : 7.523893102462698,
                "totalResponsesCount" : 6,
                "avgResponse" : 1.253982183743783,
                "maxResponse" : 1.4853219936411421,
                "minResponse" : 1.0602539963494662
            }
        }
    ],
    "timeMillis" : 0,
    "counts" : {
        "input" : 2,
        "emit" : 2,
        "reduce" : 1,
        "output" : 1
    },
    "ok" : 1,
}
> 
```

如果您不熟悉 Map Reduce，可以在此处找到文档： [http ://www.mongodb.org/display/DOCS/MapReduce](http://www.mongodb.org/display/DOCS/MapReduce)

此外，MongoDB Cookbook 中有一些很好的 Map Reduce 示例：http: [//cookbook.mongodb.org/](http://cookbook.mongodb.org/)

食谱文章“使用版本化文档查找最大值和最小值” [http://cookbook.mongodb.org/patterns/finding_max_and_min/](http://cookbook.mongodb.org/patterns/finding_max_and_min/)的“附加”部分包含一个很好的 Map Reduce 操作的逐步演练，解释了如何功能被执行。

希望这将帮助您实现您想要的结果。如果您能够通过单个聚合操作找到一种方法，请分享您的解决方案，以便社区可以从您的经验中受益。谢谢。

以下是关于 Map Reduce 的一些注释，以回应您的评论：

MapReduce 在服务器上执行 JavaScript。因此，您可能会发现其他操作的性能会受到影响。Map Reduce 适用于可能在服务器未达到峰值流量时执行的偶尔操作。您可能会发现使用 Map Reduce 来获取大型集合中的动态统计数据并不是最优的。

另一方面，聚合框架依赖本机代码，不执行服务器端 JavaScript，比 Map Reduce 更快。

如果可能，最好的选择是为每个可查询的文档添加字段。这为每次插入或更新增加了一点额外的开销，但如果可以避免 Map Reduce 操作，结果将更快地返回。不幸的是，这对于最大值和最小值以及平均值来说是困难的。

如果 Map Reduce 操作是唯一的选择，则可以采取一些措施来减轻其对服务器的影响。首先，可以使用 SlaveOk 在辅助节点上运行 Map Reduce。但是，由于无法将数据写入辅助节点，因此必须以内联方式返回输出，因此限制为 16MB。一些用户将从副本集中取出一个辅助节点，将其作为独立的 mongod 进程重新启动，对其运行 map-reduce 操作，将输出集合复制到需要去的任何地方，然后将辅助节点重新加入副本集。

最后要考虑的一件事是增量 Map Reduce： [http](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-IncrementalMapreduce) ://www.mongodb.org/display/DOCS/MapReduce#MapReduce-IncrementalMapreduce 您可以将查询传递给 map reduce 命令，该命令将仅匹配自最后一个 map reduce，并使用 reduce 输出选项运行 map reduce 操作。

希望以上内容能让您对计算统计数据的最佳方法有所思考。在文档中包含所需的信息是可取的，但如果这不可能，使用聚合框架将比 Map Reduce 更有效。

以下是关于聚合框架和 pymongo 的注释，以回应第二条评论：

聚合框架可以在 pymongo 中使用数据库对象的命令方法。
命令方法的文档可以在这里找到：http: [//api.mongodb.org/python/current/api/pymongo/database.html#pymongo.database.Database.command](http://api.mongodb.org/python/current/api/pymongo/database.html#pymongo.database.Database.command)

要执行聚合操作，请使用两个键将文档传递给 command 方法；“聚合”和“管道”。“aggregate”的值是要执行操作的集合的名称，“pipeline”的值是要执行的聚合操作的数组。管道在“聚合框架”文档中进行了解释： [http ://www.mongodb.org/display/DOCS/Aggregation+Framework#AggregationFramework-Pipelines](http://www.mongodb.org/display/DOCS/Aggregation+Framework#AggregationFramework-Pipelines)

以下是如何在 pymongo 中执行 $unwind 操作的示例：

```
In [1]: import pymongo

In [2]: conn = pymongo.Connection()

In [3]: db = conn.test

In [4]: result = db.command({"aggregate":"newStats", "pipeline":
                            [{"$unwind": "$hitsPerOneSecond"},
                             {"$group": {"_id":"$startTimeStr", 
                                          "totalHits": {"$sum": 
                                          "$hitsPerOneSecond"}, 
                              "totalHitsCount": {"$sum": 1}, 
                              "avgHit": {"$avg": "$hitsPerOneSecond"}, 
                              "minHit": {"$min":"$hitsPerOneSecond"}, 
                              "maxHit":{"$max": "$hitsPerOneSecond"}}}]})

In [5]: result
Out[5]: 
{u'ok': 1.0,
 u'result': [{u'_id': u'07-04-2012:10AM',
   u'avgHit': 2.7,
   u'maxHit': 5.0,
   u'minHit': 1.0,
   u'totalHits': 54.0,
   u'totalHitsCount': 20}]} 
```

# javascript - RegExp.exec() 在 Firefox 中重复调用时返回 null？

> ID：10167323
> 
> 赞同：4
> 
> 时间：2012-04-16T00:11:35.293
> 
> 标签：javascript, regex, firefox

我在 Firefox 10 和 11 中使用正则表达式函数 exec() 时遇到了问题。

该函数在被大量调用时似乎表现不稳定。在正确的结果中，它也返回`null`了很多。从 Safari 5.1.3、Chrome 18 和上述 Firefox 版本，我只能在 Firefox 中看到问题。

我创建了一个 JSFiddle 来演示这个问题：[http://jsfiddle.net/KSH3S/](http://jsfiddle.net/KSH3S/)，来源：

```
var i, x = "";

for (i = 0; i < 10000; i++) {
    var matches = /foo/g.exec('sdkfjfooasdknal');
    x += matches + "<br>";
}

$('body').html(x); 
```

在我的两个 Firefox 版本中，这会返回 40x `foo`、 1x `null`、 41x `foo`，然后每次调用都会在这两个版本之间进行交换。

你遇到过这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T19:51:37.830

就像 jfriend00 所说，这是 Firefox 中 JS 引擎中的一个错误。应该在 Firefox 12 中修复。请参阅 [https://bugzilla.mozilla.org/show_bug.cgi?id=728021](https://bugzilla.mozilla.org/show_bug.cgi?id=728021)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T00:28:27.143

该问题与循环内正则表达式的隐式声明有关。我的猜测是浏览器将它缓存在某个地方，或者以某种方式被它弄糊涂了。

如果您每次通过`for`循环显式创建一个新的正则表达式对象，那么 Firefox 就不再有这个问题：

```
var x = "";

for (var i=0; i<10000; i++) {
    var re = new RegExp("foo", "g");
    var matches = re.exec( 'sdkfjfooasdknal' );
    x += matches+"<br>";
}

$('body').html( x ); 
```

[http://jsfiddle.net/jfriend00/F49db/](http://jsfiddle.net/jfriend00/F49db/)

而且，您显式声明正则表达式的方式并不重要，因为此方法也适用：

```
var x = "";

for (var i=0; i<10000; i++) {
    var re = /foo/g;
    var matches = re.exec( 'sdkfjfooasdknal' );
    x += matches+"<br>";
}

$('body').html( x ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T00:29:20.793

这只是部分解释。如果你试试[这个小提琴](http://jsfiddle.net/KSH3S/2/)，它似乎工作正常。那么问题或错误可能在于文字的正则表达式解析？我不确定，但循环优化是否会以不同于变量的方式处理文字。

这是小提琴代码：

```
var x = "";

for (var i=0; i<10000; i++) {
    var a='sdkfjfooasdknal';
    var b=/foo/g;
    var matches = b.exec(a);
    x += matches+"<br>";
}

$('body').html( x );​ 
```

更新：这是我试图将其强制退出正常循环并且问题再次出现的内容。这是小提琴[http://jsfiddle.net/xXYdF/](http://jsfiddle.net/xXYdF/)。

```
var x = "";
i=200;
function reg(){
    var matches = /foo/g.exec('sdkfjfooasdknal');
    x += matches+"<br>";
}
    function run(){
  setTimeout(function(){
    if(i--){
      reg();
      run();
      $('body').html( x );
    }
  },10);
}

run(); 
```

# unit-testing - 对 Java 方法进行单元测试

> ID：10167325
> 
> 赞同：1
> 
> 时间：2012-04-16T00:11:52.897
> 
> 标签：unit-testing, testing

请原谅可能是一个相当微不足道的问题：

我正在对“setPercentage(int percent){...}”方法进行单元测试。这些要求没有说明任何关于“可接受范围”或允许值的内容......但我从相关应用程序中知道，百分比应该只在 0 到 100 之间。

我是否应该测试设置的值是否有意义（在单元测试的上下文中？）

即如果百分比设置> 100 或< 0，我应该编写失败的单元测试吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T00:17:14.220

如果该方法的文档没有明确说明不允许使用此类值，则绝对应该为超出适当范围的值编写单元测试。会有用户提供不正确的值 - 正确的是，文档并没有告诉不要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T00:17:25.920

如果设置 > 100 或 < 0，您不会编写失败的测试。您将测试 setPercentage 在通过 > 100 或 < 0 时是否正确响应，无论是设置错误属性还是抛出 IllegalArgumentException。单元测试的重点是确保基于已知输入的预期结果。如果设置 > 100 无效，则以下代码段可能是用于验证行为的单元测试示例：

```
try { 
    o.setPercentage(101);
    Assert.fail (
       "setPercentage(101) should of thrown an IllegalArgumentException");
} catch (IllegalArgumentException ex) {
} 
```

# python - 改变 PyGame 坐标系中原点的位置

> ID：10167329
> 
> 赞同：7
> 
> 时间：2012-04-16T00:12:16.597
> 
> 标签：python, coordinates, pygame

我在 PyGame 中对向量和物理进行一些操作，默认坐标系对我来说很不方便。通常该`(0, 0)`点位于左上角，但我宁愿原点位于左下角。我宁愿改变坐标系而不是转换我必须绘制的每一件事。

是否可以更改 PyGame 中的坐标系以使其像这样工作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-17T01:43:24.667

不幸的是，pygame 不提供任何此类功能。最简单的方法是使用一个函数来转换坐标，并在绘制任何对象之前使用它。

```
def to_pygame(coords, height):
    """Convert coordinates into pygame coordinates (lower-left => top left)."""
    return (coords[0], height - coords[1]) 
```

这将获取您的坐标并将它们转换为 pygame 的绘图坐标，给定`height`窗口的高度和`coords`对象的左上角。

要改为使用对象的左下角，您可以采用上述公式，并减去对象的高度：

```
def to_pygame(coords, height, obj_height):
    """Convert an object's coords into pygame coordinates (lower-left of object => top left in pygame coords)."""
    return (coords[0], height - coords[1] - obj_height) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-22T19:58:24.713

If the objects you're trying to render are vertically symmetrical (like rectangles), you can just flip the screen to get the coordinate system to be the bottom-left, like this:

```
display_surface = pygame.display.get_surface()
display_surface.blit(pygame.transform.flip(display_surface, False, True), dest=(0, 0)) 
```

You can do the same thing horizontally top/bottom-right. The important methods are documented here:

*   [pygame.display.get_surface()](https://www.pygame.org/docs/ref/display.html#pygame.display.get_surface)
*   [pygame.transform.flip(Surface, xbool, ybool)](https://www.pygame.org/docs/ref/transform.html#pygame.transform.flip)
*   [Surface.blit(Surface, dest)](https://www.pygame.org/docs/ref/surface.html#pygame.Surface.blit)

# firefox - Firefox 插件仅在安全模式下显示

> ID：10167331
> 
> 赞同：-1
> 
> 时间：2012-04-16T00:13:06.020
> 
> 标签：firefox, firefox-addon

只是我的插件不会在“正常”模式下显示，我必须在安全模式下启动才能查看我的插件并添加它们禁用它们等。

这是相当令人沮丧的。我也不想从 Firefox 重新开始。我有相当多的定制设置，而不仅仅是 addson 运行。

我在一个侧边栏中删除了所有内容，现在当我进入插件选项卡时，我确实看到了永久加载。

```
safe mode -> addons displayed
Normal -> just a perm loading sign 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-23T23:18:53.003

最后我只是删除了每个插件，直到我重置后我的插件再次显示。

重置firefox后我重新安装了插件。

# java - (Android) Java 从 SQLDatabase 获取值

> ID：10167335
> 
> 赞同：0
> 
> 时间：2012-04-16T00:13:40.463
> 
> 标签：java, android, sqlite

嗨，我正在开发一个应用程序，我刚刚开始玩 SQL 我已经建立了一个包含我所有信息的数据库，现在我需要能够获取这些值，但我无法弄清楚出来。

我想要的是一个java方法，我可以传递列名和行ID并让它返回值。

例如，如果我的桌子是这样的

```
--------------
| _id | data |
--------------
| 1   | cat  |
| 2   | dog  |
| 3   | fish |
-------------- 
```

我想调用方法说 getValue(2, data); 它会返回 dog 对此的任何帮助将不胜感激，因为我无法解决这个看似简单的问题

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:19:14.963

[开发人员文档](http://developer.android.com/)是一个极好的资源。它们有大量文档，并且包含易于遵循的教程。尝试从这里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T00:18:31.613

像这样的东西：

```
String result;
String[] cols = new String[] { "data" };
String[] args = new String[] { id };
Cursor cursor = mSqliteDb.query(MY_TABLE, cols, "_id = ?", args, null, null, null);
if (cursor.moveToNext())
    result = cursor.getString(0);
cursor.close(); 
```

`MY_TABLE`是您正在查询的表，`cols`是一个`String`包含您要检索的列的数组，并且`args`是一个`String`包含 ID 参数的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T00:22:39.167

您好，您可以按照以下步骤操作：

1.  检索数据库引用
2.  执行查询，获取游标
3.  将光标位置设置为第一个元素

...并编写以下代码：

```
String data = cursor.getString(cursor.getColumnIndex("data")); 
```

然后，您必须关闭光标调用：`cursor.close();`

通过这种方式，您可以轻松检索所有数据。

# javascript - 推送通过单独的 AJAX 查询获得的坐标后，无法在地图上添加折线？

> ID：10167336
> 
> 赞同：0
> 
> 时间：2012-04-16T00:13:48.693
> 
> 标签：javascript, google-maps, google-maps-api-3, xmlhttprequest, overlays

```
 function initialize() {

    var myOptions = {
    center: new google.maps.LatLng(45.652988, 25.611792),
    zoom: 12,
    mapTypeId: google.maps.MapTypeId.SATELLITE
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);

    var lines = new google.maps.Polyline({
                strokeColor: '#FF0000',
                strokeOpacity: 0.5,
                strokeWeight: 2,
                editable: true
                });

    nline = function setPolyline(points) {
    var path = lines.getPath();
    path.clear();
    path.push(points);
    lines.setMap(map);
    }

    google.maps.event.addListener(map, 'click', function() {
    var target = document.getElementById("info_panel");
    target.style.display = "none";
    });

    /*
    google.maps.event.addListener(line, 'click', function() {
    alert("you clicked polyline");
    });
    */
  } 
```

在从 SQL 数据库执行 XMLHttpRequest 之后，另一个函数调用 setPolyline 函数（它位于地图初始化函数内部，因为“map”和“lines”变量只是局部变量而不是全局变量）作为参数传递一个 latlng 数组。

setPolyline 函数获取该数组，清除折线（名为“lines”）的路径，将 latlng 数组推入路径，并且在到达 setmap 指令时根本无法执行任何操作......

是否有嵌套问题或什么？...请帮助我在过去 6 小时内一直试图解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T00:39:57.357

你在哪里打电话`lines.setPath(path)`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-11T18:45:57.383

尝试这个：

```
 function initialize() {

    var myOptions = {
    center: new google.maps.LatLng(45.652988, 25.611792),
    zoom: 12,
    mapTypeId: google.maps.MapTypeId.SATELLITE
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);

    var lines = new google.maps.Polyline({
                strokeColor: '#FF0000',
                path: linepth,
                strokeOpacity: 0.5,
                strokeWeight: 2,
                editable: true
                });

    nline = function setPolyline(points) {
    var linepth= [];
    var path = lines.getPath();
    path.clear();
//    path.push(points);
    linepth.push(points);
    lines.setMap(map);
    }

    google.maps.event.addListener(map, 'click', function() {
    var target = document.getElementById("info_panel");
    target.style.display = "none";
    });

    /*
    google.maps.event.addListener(line, 'click', function() {
    alert("you clicked polyline");
    });
    */
  } 
```

# delphi - DBImage 不以编程方式刷新

> ID：10167342
> 
> 赞同：2
> 
> 时间：2012-04-16T00:14:58.130
> 
> 标签：delphi, delphi-5

我难住了！D5ent。我有一个表格，上面有十几个设计时 SpeedButton。我有一个包含所有十二个按钮的标题、提示和字形的数据集。当我运行数据库时，我可以分配标题、提示、选择和存储字形的位图。

当我使用 DBNavigator 单步执行时，它会正确显示每个按钮的每个位图的单个 DBImage。但是在运行时，并非如此。

我有这段代码可以遍历数据集，当我在 ShowModal 表单中时，所有按钮都有正确的单独标题和提示，但它们都具有与第一个按钮相同的字形。

```
procedure LoadButtons;
  procedure SetButton(var aBtn : TSpeedButton);
  begin
    aBtn.Hint:=tblButtons.FieldByName('Hint').AsString;
    aBtn.Caption:=tblButtons.FieldByName('Caption').AsString;
    aBtn.Glyph.Assign(dbimgButton.Picture.Bitmap);
  end;
begin
  tblButtons.First;
  BtnCtr:=1;
  repeat
    case BtnCtr of
      1  : SetButton(btn1);
      2  : SetButton(btn2);
      3  : SetButton(btn3);
      // ... to twelve
    end;
    tblButtons.Next;
    Inc(BtnCtr);
  until tblButtons.EOF;
end; 
```

结尾;

我哪里错了？我搞砸了 Update、AutoDisplay、LoadPicture 等...

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T00:38:45.553

如果您正在使用，`DisableControls`则在循环通过数据集时不会更新 db-aware 控件。如果您从这样的控件中分配字形，那么这就是为什么所有按钮都具有第一条记录的字形的原因。

# php - php从目录中删除多个图像

> ID：10167345
> 
> 赞同：0
> 
> 时间：2012-04-16T00:15:33.093
> 
> 标签：php

出于某种原因，我的 php 脚本不会删除多个图像，它只是删除缩略图图像，然后将第二个图像留在目录中。

```
if($_POST['pic_id']){

    $pic_id = $_POST['pic_id'];
    $pic_id = mysql_escape_String($pic_id);

    # Select photo details from database
    $query = mysql_query("SELECT * FROM gallery WHERE id='$pic_id'");
    $queryCount = mysql_num_rows($query);

    if($queryCount>0){

    #Get the fields
    while($row = mysql_fetch_array($query)){         
    $image= $row["image"];
    $thumbnail = $row["thumbnail"];

    }

    # Unlink thumb source
    //Delete the thumbnail photo from directory
    $pic1 = ("$image");
    if (file_exists($pic1)) {
    unlink($pic1);
    }
    # Unlink resize source
    //Delete the big photo from directory
    $pic2 = ("$thumbnail");
    if (file_exists($pic2)) {
    unlink($pic2);
    }

    # Delete the row from the database
    $sqlTable2 = mysql_query("DELETE FROM gallery WHERE id='$pic_id'"); 

    } else {

        exit();
    }

 } 
```

几天来一直在努力让它工作，任何想法都表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T00:21:50.333

您需要将删除代码包装在您的 while 循环中......

```
while($row = mysql_fetch_array($query)){         
   $image= $row["image"];
   $thumbnail = $row["thumbnail"];

   # Unlink thumb source
   //Delete the thumbnail photo from directory
   $pic1 = ("$image");
   if (file_exists($pic1)) {
      unlink($pic1);
   }

   # Unlink resize source
   //Delete the big photo from directory
   $pic2 = ("$thumbnail");
   if (file_exists($pic2)) {
      unlink($pic2);
   }
} 
```

# sql - 行级触发器与语句级触发器

> ID：10167346
> 
> 赞同：56
> 
> 时间：2012-04-16T00:15:45.853
> 
> 标签：sql, database

我很难理解“行级触发器”和“语句级触发器”之间的区别。

据我了解，在创建语句级触发器的场景中，可以修改整个表。行级触发器只允许我修改受触发器指定事件影响的元组。

这个对吗？有人有这两者的例子吗？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-04-16T00:21:15.773

主要区别不是触发器可以修改什么，这取决于 DBMS。触发器（行或语句级别）可能会修改相同或其他表的一行或多行^*，并且可能具有级联效果（触发其他操作/触发器），但所有这些当然取决于 DBMS。

主要区别在于触发器被激活的次数。想象一下，你有一个 1M 行的表，你运行：

```
UPDATE t
SET columnX = columnX + 1 
```

语句级触发器将被激活**一次**（即使没有更新行）。行级触发器将被激活一百万次，**每更新一个行一次**。

* * *

另一个区别是顺序或激活。例如，在 Oracle 中，4 种不同类型的触发器将按以下顺序激活：

```
Before the triggering statement executes
Before each row that the triggering statement affects
After each row that the triggering statement affects
After the triggering statement executes 
```

在前面的例子中，我们会有类似的东西：

```
Before statement-level trigger executes

  Before row-level trigger executes
  One row is updated
  After row-level trigger executes

  Before row-level trigger executes
  Second row is updated
  After row-level trigger executes

  ...

  Before row-level trigger executes
  Millionth row is updated
  After row-level trigger executes

After statement-level trigger executes 
```

* * *

**附录**

^*关于触发器可以修改哪些行：不同的DBMS对此有不同的限制，这取决于DBMS中的具体实现或触发器。例如，Oracle 可能会在某些情况下显示“变异表”错误，例如，当行级触发器从整个表中选择 ( `SELECT MAX(col) FROM tablename`) 时，或者如果它修改其他行或整个表，而不仅仅是与 / 相关的行从触发。

当然，对于行级触发器（在 Oracle 或其他中）来说，修改其更改已触发它的行是完全有效的，这是一种非常常见的用途。**[dbfiddle.uk](https://dbfiddle.uk/?rdbms=oracle_18&fiddle=0cda5ab25afeafd7d80eac80f555d9c8)**中的示例。

其他 DBMS 可能对任何类型的触发器可以做什么甚至提供什么类型的触发器有不同的限制（`BEFORE`例如，有些没有触发器，有些根本没有语句级触发器等）。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-07T22:57:33.943

您可能希望在客户端执行修改一百万行的语句后执行一次触发器操作（语句级触发器）。或者，您可能希望为修改的每一行触发一次操作（行级触发器）。

**示例**：假设您有一个触发器可以确保所有高中生毕业。也就是说，当一个大四的成绩是 12，我们把它提高到 13，我们想把成绩设置为`NULL`。

对于语句级触发器，您会说，在 increase-grade 语句运行后，检查整个表一次以将所有等级为 13 的 nows 更新为`NULL`.

对于行级触发器，您会说，在更新每一行之后，将新行的等级更新`NULL`为 13。

语句级触发器如下所示：

```
create trigger stmt_level_trigger
after update on Highschooler
begin
    update Highschooler
    set grade = NULL
    where grade = 13;
end; 
```

行级触发器如下所示：

```
create trigger row_level_trigger
after update on Highschooler
for each row
when New.grade = 13
begin
    update Highschooler
    set grade = NULL
    where New.ID = Highschooler.ID;
end; 
```

请注意，SQLite 不支持语句级触发器，因此在 SQLite 中，`FOR EACH ROW`是可选的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-04-17T16:55:32.510

1) 行级触发器用于对一组行执行操作，如插入、更新或删除

示例：-您必须删除一组行，同时删除的行也必须插入新表以进行审计；

2）语句级触发器：- 它通常用于对您正在执行的事件施加限制。

例如：- 限制在晚上 10 点到早上 6 点之间删除数据；

希望这可以帮助：）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-27T06:00:43.610

语句级触发器的主要区别如下：

语句级触发器：根据名称，如果执行任何语句，它就会起作用。不取决于影响的行数或任何行。它只执行一次。Exp ：如果您想从部门 HR 更新每个员工的薪水，最后您想知道有多少行生效意味着有多少行增加了薪水，则使用语句级触发器。请注意，即使更新了零行，触发器也会执行，因为它是语句级触发器，如果​​已执行任何语句，则会调用它。不管它是否影响任何行。

行级触发器：每次影响行时执行。如果零行受影响。没有行级触发器将执行。假设如果您想从部门为 HR 的 emp 表中删除一个雇员，并且您希望一旦从 emp 表中删除员工，则 HR 部分的部门表中的计数应减少1.那么你应该选择行级触发器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T04:02:52.293

语句级触发器对于 dml 语句只有一次 行级触发器对于 dml 语句的每一行

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-16T10:42:36.210

如果您想在修改行数时执行该语句，那么可以通过语句级触发器来实现.. viseversa ...当您想要执行您的语句时，每次修改您的行数，那么您需要进入行级别触发..

例如：语句级触发器适用于修改表时..然后影响更多记录。并且行级触发器适用于每行更新或修改时..

# ms-access - 如何在访问中的查询中使用“iif”中的不等式

> ID：10167348
> 
> 赞同：0
> 
> 时间：2012-04-16T00:15:49.660
> 
> 标签：ms-access

我的一个表单上有一个组合框，它返回一个数字，我使用这个数字作为查询中字段的条件，但是如果组合框中没有选择任何选项，我想使用一组默认条件，但访问一直告诉我我的语法无效。有人能告诉我我该怎么做吗？

`IIf(IsNull([Forms]![frm_a]![cmbo_b]),<2 or >3,[Forms]![frm_a]![cmbo_b])`

当我`<2 or >3`在 if 语句中间使用时会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:48:50.607

你的问题是两部分。首先，这是一个伪 IIF 语句，可帮助您了解它们的工作原理：

```
IIF(IsNull(SomeFieldOrControl),ConditionIsTrueSoDoThis,ConditionIsFalseSoDoThis) 
```

解释这一点的另一种方法是使用此示例，如果 cmbo_b 为空，我们将显示一个零长度字符串：

如果 cbmo_b 为空，这将显示一个零长度字符串：

```
IIF(IsNull([Forms]![frm_a]![cmbo_b]),"",[Forms]![frm_a]![cmbo_b]) 
```

我认为您需要将 IsNull 函数切换为 Nz（null 到零）函数。

对于第二部分，在评估两部分条件时，您通常需要用括号括起来，就像这样。我真的认为这不会奏效，但如果您坚持尝试同时评估两种不同的可能性，这是我唯一能想到的尝试。如果条件评估为真，我已将其设置为显示 0。如果该语句为真，我真的不确定要显示什么，因为您一开始就没有正确使用 IIF 函数。

```
IIF(Nz([Forms]![frm_a]![cmbo_b],0)(<2 or >3),0,[Forms]![frm_a]![cmbo_b]) 
```

我想知道为什么您不只是检查条件是否= 3，因为这显然是您正在评估的一轮。如果发现条件为真，我仍然不确定要显示什么，因为您的代码没有提供任何线索：

```
IIF(Nz([Forms]![frm_a]![cmbo_b],0)=3,0,[Forms]![frm_a]![cmbo_b]) 
```

最后一句话，这可能是个人喜好问题，但我尽量避免在其他表单上引用控件，除非没有办法绕过它。像这样的代码往往非常脆弱，因为重命名表单或控件，或者只是将表单设置为子表单都会导致您的代码失败和/或错误。并不是说它完全不正确，只是我试图坚持使用易于阅读且尽可能可维护的代码。

我经常做的是在表单或子表单上创建公共函数，然后使用如下语句调用它们：

```
Call Forms("frm_a").MyPublicFunctionName() 
```

或者

```
Call Me.Parent.MyPublicFunctionName() 'Call function on main form from subform 
```

或者

```
Call Me.subform1.Form.MyPublicFunctionName() 'Call function on subform 
```

再一次，我认为这可能只是个人喜好问题。像这样的公共函数很难调试，因为如果在 MyPublicFunctionName 内部发生任何错误，您的代码将停止在上面的行，您将不知道是哪一行实际导致了问题。

# visual-studio-2008 - 在 Visual C++/Cli 中预定义类以避免“类未定义”引发错误 LNK2020

> ID：10167350
> 
> 赞同：0
> 
> 时间：2012-04-16T00:16:38.520
> 
> 标签：visual-studio-2008, visual-c++, c++-cli

好吧，因为我遇到了一些未定义的类问题，因为一个头文件正在添加另一个正在添加自己的头文件，它可能正在编译一些当时不存在的类，所以我做了这个并放在开头，编译正常，但是在编译的最后一秒它抛出了一个错误

```
 Error  230 error LNK2020: unresolved token (0600003C) Servicos::.ctor  Servicos.obj 
```

-

```
public ref class Servicos: public System::Windows::Forms::Form {
    public:
    Servicos(Usuario*,unordered_map<int, std::string>*);
} 
```

由于当时我并不关心其他函数，所以我只放置了构造函数，因为它所做的只是实例化类以使对话框显示。（虽然我也尝试过添加所有功能，但发生了同样的错误）

这是原文：

```
namespace MyProject {
public ref class Servicos: public System::Windows::Forms::Form
    {

    //... Some Variables declared

    public: 
        Servicos(Usuario* user, 
            unordered_map<int, std::string>* fab_contas_)
        {
            this->fab_contas_email = fab_contas_;
            this->usuario = user;
            InitializeComponent();
            //
            //TODO: Add the constructor code here
            //
        }

//... And Other Functions
};

} 
```

你们中的任何人都可以指出我做错了什么吗？非常感谢！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:26:41.813

这对我来说没有多大意义：链接器告诉你类的构造函数`Servicos`没有定义。编译进入链接阶段这一事实意味着（显式或隐式）声明了ctor。

公共参考类 Servicos：公共 System::Windows::Forms::Form { 公共：ServicosFacebook(Usuario*,unordered_map*); }

可能是这段代码导致了问题，尽管它有语法错误，所以这一定不是您实际使用的代码（否则您将无法进入链接阶段）——该函数`ServicosFacebook`不是 ctor 并且没有返回类型。

我假设你有这个：

```
public ref class Servicos: public System::Windows::Forms::Form { 
  public: 
  Servicos(Usuario*,unordered_map<int, std::string>*); 
} 
```

这会通知编译器有一个 type 的构造函数（带有两个参数）`Servicos`，但它是在其他地方定义的——这就是导致链接器错误*的问题，因为您实际上并没有提供定义。*

但是，您定义构造函数的类的定义位于`MyProject`命名空间中，因此是完全不同的类型。

将上面的类声明放入命名空间是不够的，`MyProject`因为这会违反单一定义规则：你只能有一个类的定义，但你会有两个（即使相同）。

要修复，您需要解决头文件中的循环依赖关系。由于您没有提供足够的信息，因此我无法为您提供太多帮助。如果您只需要类存在的概念，则可以在标头中使用前向声明来打破循环依赖：

```
class Servicos; 
```

这将允许您声明指向该类的指针（作为成员变量或函数参数）。您必须在 .cpp 文件中包含正确的 Servicos 标头（而不是在其标头中）

更新：

尝试：

```
// Servicos.h
// include headers that contain the definition of Windows Forms, Usuario,
// unordered_map, string, etc.
using namespace std;
namespace MyProject {  
  public ref class Servicos: public System::Windows::Forms::Form  
  {  

    //... Some Variables declared  

  public:   
    Servicos(Usuario* user,   
        unordered_map<int, std::string>* fab_contas_);

    //... And Other Functions  
  };  

}  

// Servicos.cpp
#include "Servicos.h"
using namespace MyProject;

Servicos::Servicos(Usuario* user,   
        unordered_map<int, std::string>* fab_contas_)  
{  
  this->fab_contas_email = fab_contas_;  
  this->usuario = user;  
  InitializeComponent();  
  //  
  //TODO: Add the constructor code here  
  //  
}  

//... And Other Functions  

// ServicosUser.h
#include "Servicos.h"

// ... declarations that use Servicos

// ServicosUser.cpp
#include "ServicosUser.h"

// ... definitions of things declared in ServicosUser.h 
```

# drupal-7 - 在 Drupal 7 的自定义页面上运行 jQuery

> ID：10167351
> 
> 赞同：0
> 
> 时间：2012-04-16T00:16:50.993
> 
> 标签：drupal-7

我已经查看了几个相关的帮助主题，但我仍然错过了一个重要的步骤。我创建了一个新页面...page--employee.tpl.php 此页面包含三个选项卡，当前加载三个单独的“页面”。页面--employee.tpl.php上的html如下：

```
<div id="a" class="empTab"><a href="/"><span>Employee Home</span></a></div>
<div id="b" class="empTab"><a href="/"><span>State Notices</span></a></div>
<div id="c" class="empTab"><a href="/"><span>Federal Notices</span></a></div> 
```

我正在尝试实现一个非常简单的 .click 函数，以便当用户单击选项卡 a 时...选项卡 a 获取 .activeTab 类。当他们单击 b...b 时，将获得 activeTab 类，与 c 相同。我的 jQuery 在本地工作，但我不知道将它放在我的自定义页面上的哪个位置--employee.tpl.php 当我将我的 jQuery 代码放在 html 模板文件中时，它会一直工作，直到我的自定义页面加载然后 html 执行如上所述，即使用户单击了 b 选项卡，a 选项卡也会获得 .activeTab 类。任何人都可以对这个话题有所了解吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:29:01.400

看看这个模块。 [http://drupal.org/project/quicktabs](http://drupal.org/project/quicktabs)

快速选项卡模块允许您创建选项卡式内容块，特别是视图、块、节点* 和其他快速选项卡*。您可以在您的网站上创建一个包含多个具有相应内容的选项卡的块。使用 jQuery，单击选项卡会立即显示相应的内容。使用 6.x-2.x 分支，这可以在 ajax 或非 ajax 模式下完成：

# javascript - 隐藏父元素时停止嵌入视频播放

> ID：10167356
> 
> 赞同：0
> 
> 时间：2012-04-16T00:17:33.340
> 
> 标签：javascript, html, internet-explorer-9

我已经设置了一个视频，点击一个按钮就可以显示在灯箱 div 中。

```
<object width="640" height="360" id="player">
  <param name="movie" value="http://youtu.be/Gwv5Pn--7ok?version=3&amp;hl=en_US&amp;rel=0&amp;start=0"></param>
  <param name="allowFullScreen" value="true"></param>
  <param name="allowscriptaccess" value="always"></param>
  <embed src="http://youtu.be/Gwv5Pn--7ok?version=3&amp;hl=en_US&amp;rel=0&amp;start=0" type="application/x-shockwave-flash" width="640" height="360" allowscriptaccess="always" allowfullscreen="true"></embed>
</object> 
```

这些是按下按钮的回调

```
var hideYoutube = function() {
  $('#fadeoutwindow').css('display', 'none');
  $('#lightbox').css('display', 'none');
  $('#horizonyt').css('z-index', '-1');
  $('#horizonyt').css('visibility', 'hidden');
};
var showYoutube = function() {
  $('#fadeoutwindow').css('display', 'block');
  $('#lightbox').css('display', 'block');
  $('#horizonyt').css('z-index', '1000');
  $('#horizonyt').css('visibility', 'visible');
  $('#fadeoutwindow').click(function() {hideYoutube(); });
};

$('#youtube').click(function() {
  showYoutube(); return false;
}); 
```

这似乎在除 IE 之外的所有浏览器上都可以正常工作。在 IE 上，当 div 被隐藏时，视频会在后台继续播放。有没有办法在隐藏时停止它并在第二次单击按钮时重新启动它？

（注意：其他元素——horizo​​nyt 和fadeoutwindow——仅用于对齐和淡出其他所有内容。）

谢谢。

# f# - F# 中的 t<'a> 和 'at 有什么区别吗？

> ID：10167359
> 
> 赞同：12
> 
> 时间：2012-04-16T00:17:48.293
> 
> 标签：f#

`t<'a>`F#和`'a t`F#之间的含义有什么区别吗？即使在声明之后它们可以互换使用吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T01:33:57.663

没有区别，是的，即使在声明之后它们也可以互换使用。

但请注意[F# 组件设计指南](http://fsharp.org/specs/component-design-guidelines/#consider-using-the-prefix-syntax-for-generics-foot-in-preference-to-postfix-syntax-t-foo-with-four-notable-exceptions-list-option-array-ref)建议（第 4.2 节）：

> 考虑使用泛型的前缀语法 ( `Foo<T>`) 而不是后缀语法 ( `T Foo`)，但有四个值得注意的例外 ( `list`, `option`, `array`, `ref`)。
> 
> F# 继承了命名泛型类型的后缀 ML 样式，例如“<code>int list”以及前缀 .NET 样式，例如“<code>list<int>”。除了四种特定类型之外，您应该更喜欢 .NET 样式。对于 F# 列表，使用后缀形式：“<code>int list”而不是“<code>list<int>”。对于选项，使用后缀形式：“<code>int option”而不是“<code>option<int>”。对于数组，使用语法名称“<code>int[]”而不是“<code>int array”或“<code>array<int>”。对于`refs`，请使用“<code>int ref”而不是“<code>ref<int>”或“<code>Ref<int>”。对于所有其他类型，使用前缀形式：“<code>HashSet<int>”、“<code>Dictionary<string,int>”、

此外，如果您使用 ML 风格的通用参数列表表示法，例如`('a,'b) t`vs. ，您将收到编译器警告`t<'a,'b>`。

在此过程中，请注意同一指南[第 3.1 节中的以下建议：](http://fsharp.org/specs/component-design-guidelines/#do-use-the-net-naming-and-capitalization-conventions-for-object-oriented-code-including-f-facing-libraries)

> 对公共 API 中的通用参数名称使用 PascalCase，包括面向 F# 的库。特别是，对任意通用参数使用 T、U、T1、T2 等名称，当特定名称有意义时，对于面向 F# 的库，使用 Key、Value、Arg 等名称（但不包括 TKey）。

（尽管我个人倾向于忽略面向 F# 的公共库的这一建议）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T00:22:36.070

完全没有区别，不确定这是否值得一个完整的答案！我更喜欢前者，尤其是在涉及多个类型参数时（后者可能吗？）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T00:47:21.137

我认为`'a t`语法更惯用（它在几乎所有 MSDN 示例中都使用，并且由编译器发出，将为签名文件生成该语法）

数组有一个类似的例子

```
int[] , int array 
```

具体参数的`'a t`语法也更好 -

```
int list, List<int> 
```

所以一些一致性主张`'a t`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T00:36:45.023

我会说区别在于可读性。对于一个参数，`'`语法并不过分令人困惑，但是当您获得它们的列表时，阅读尖括号版本会变得更加容易。

# java - 我遇到的最奇怪的 java 问题，NoClassDefFoundError 由于注释？

> ID：10167365
> 
> 赞同：1
> 
> 时间：2012-04-16T00:20:14.393
> 
> 标签：java, android, annotations, noclassdeffounderror

我想我遇到了一些困难......让我知道你的想法。

我一直在开发一个使用**Annotations的****Android**基础设施项目，我用它来定义一些东西。

 **看一下下面的注释，它应该可以编译，但是当我在设备上运行它时，我得到一个 NoClassDefFoundException。

```
@Target({FIELD})
@Retention(RetentionPolicy.RUNTIME)
public @interface ViewIdentifier {

    int viewId() default -1;

    int[] viewIds() default {};

    ViewUI_Action[] listeners() default {};

    boolean forDev() default false;

} 
```

这是实现**：**

```
@SuppressWarnings("unused")
@ViewIdentifier(
        listeners = ViewUI_Action.OnClickAsCollection,
        viewIds = {R.id.AccelerometerEngineeringScreen, R.id.RotationVectorEngineeringScreen, R.id.NetworkEngineeringScreen,
                R.id.MagneticEngineeringScreen, R.id.OrientationEngineeringScreen, R.id.GPS_EngineeringScreen, R.id.CallsEngineeringScreen,
                R.id.UpgradeAppButton, R.id.DEV_Action_Button, R.id.FYI_Button})
private View[] modelViews; 
```

如果我删除*ViewIdentifier*注释，代码编译并运行良好，应用程序启动，但如果我返回注释，NoClassDefFoundError 仍然存在。

这不是一个干净的构建问题，在发布之前我一直非常小心，另外，丢失的类文件在 bin/classes 中，当我删除注释时，无论干净构建如何，它都可以工作。我尝试刷新工作区以重建它、关闭打开项目、重新启动 Eclipse 和其他技巧。

最奇怪的是，如果我反转注释的参数，例如。

```
@SuppressWarnings("unused")
@ViewIdentifier(
        viewIds = {R.id.AccelerometerEngineeringScreen, R.id.RotationVectorEngineeringScreen, R.id.NetworkEngineeringScreen,
                R.id.MagneticEngineeringScreen, R.id.OrientationEngineeringScreen, R.id.GPS_EngineeringScreen, R.id.CallsEngineeringScreen,
                R.id.UpgradeAppButton, R.id.DEV_Action_Button, R.id.FYI_Button},
        listeners = ViewUI_Action.OnClickAsCollection)
private View[] modelViews; 
```

我收到一个 Eclipse 错误说：

![在此处输入图像描述](../Images/b2d01beeec10c1a5a531df00dba984d6.png)

并且 Eclipse 无法找到包含该字段的类。

所以你怎么看？编译类出错？

亚当。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:27:07.263

`listeners`即使对于大小为 1 的数组，该字段似乎也具有数组初始值设定项语法。

希望有帮助:-)**

# php - 从 RSS 获取数据并插入 MYSQL

> ID：10167370
> 
> 赞同：-1
> 
> 时间：2012-04-16T00:20:54.067
> 
> 标签：php, mysql, arrays, insert, rss

我有一个带有标题和描述的项目的 RSS 提要。我想将这些加载到表中

我有类似的东西，但它既没有回显任何东西，也没有插入任何东西。

```
 $con = mysql_connect("localhost","USERNAME","PASSWORD");
    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

$rss = simplexml_load_file('rss.xml');

foreach ($rss->item as $eachFilm) {
    $film_name = array($eachFilm->title);
    $film_release = array($eachFilm->description);
    echo $film_name;

    mysql_query("INSERT INTO Films (Film_Name, Film_Release)
VALUES ('$film_name', '$film_release')");

}

mysql_close($con); 
```

任何帮助将非常感激！

编辑 - 示例 RSS -

```
</image><item>
             <title>Remembrance</title>
             <link>http://www.filmdates.co.uk/films/3950-remembrance/</link>
             <description><![CDATA[Release Date: Wednesday 18th April 2012]]></description>
             <category>Movie</category>
             <pubDate>Tue, 27 March 2012 20:31:29 MST</pubDate>
           </item><item>
             <title>In Search of Haydn</title>
             <link>http://www.filmdates.co.uk/films/3672-in-search-of-haydn/</link>
             <description><![CDATA[Release Date: Thursday 19th April 2012]]></description>
             <category>Movie</category>
             <pubDate>Mon, 16 April 2012 19:33:41 MST</pubDate>
           </item><item> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:08:08.723

well i don't know about you rss file that hows the complete structure of your Rss file is,

here is an quick example of a wordpress rss file with `simplexml_load_file`

```
$conn = mysql_connect("localhost", "*****", "****");
if($conn)
    mysql_select_db("test", $conn);

$rss = simplexml_load_file('file.xml');
$getChild = $rss->children();

foreach( $rss->children() as $item ){

    // Count Total Items in the Files
    $total_items = $item->item->count();
    for( $i=0; $i < $total_items; $i++ ){
        $title = $item->item[$i]->title;

        $query = mysql_query("insert into tbl_name (name) value ('$title')");
        if( $query ){
            echo "Inserted Success! <br>";
        }
        else{
            echo "Error in Query!<br>";
        }
    }
} 
```

the above example will work with the wordpress xml file, that i have tested on my local and working perfectly. Hope this will help you.

# c++ - jsconcpp 链接器问题

> ID：10167373
> 
> 赞同：0
> 
> 时间：2012-04-16T00:21:24.280
> 
> 标签：c++, curl, jsoncpp

我正在尝试运行[此处](http://blog-of-darius.blogspot.com/2011/07/geocoding-with-c-and-google-geocoding.html)详述的程序。代码需要 cURL 和 JSON 库，我一直按照[这里的方向](http://jsoncpp.sourceforge.net/README.txt)

我在运行程序时遇到了问题——当我编译时，我得到了 cURL 和 JSON 的未解决的外部符号链接器错误，所以我似乎做错了什么。

在编程方面我是一个完全的新手，所以任何建议都将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T23:18:02.180

您应该将`jsoncpp`库头地址和编译器标志传递给您的编译器。例如对于 g++ 你应该这样做：

```
g++ -I/usr/include/jsoncpp/ -ljsoncpp yourCode.cpp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:11:00.967

正如您在我[的帖子](http://blog-of-darius.blogspot.com/2011/07/geocoding-with-c-and-google-geocoding.html)中看到的，我为编译器指定了包含和库目录的自定义路径，如下所示：

```
g++ -g -Wall -Ilibs/include -Llibs/lib -o prog prog.cpp CURLWrapper.cpp -lcurl -ljson_linux-gcc-4.5.2_libmt 
```

将 I[libs/include] -L[libs/lib] 路径替换为放置库（cURL 和 JSON）所在的目录。

# c++ - boost::filesystem 获取相对路径

> ID：10167382
> 
> 赞同：33
> 
> 时间：2012-04-16T00:22:35.637
> 
> 标签：c++, boost, filesystems, boost-filesystem

该库的哪些方法`boost::filesystem`可以帮助我获得相对于另一条路径的路径？

我有一条路径`/home/user1/Downloads/Books`和一条路径`/home/user1/`。现在我想得到一条路径`Downloads/Books`。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2016-06-09T00:53:07.680

在新版本`boost`（从 1.60 开始）中，您可以使用`boost::filesystem::relative`. [（请参阅此处的文档。）](http://www.boost.org/doc/libs/1_60_0/libs/filesystem/doc/reference.html#op-relative)

```
#include <boost/filesystem.hpp>
#include <iostream>
namespace fs = boost::filesystem;

int main()
{
    fs::path parentPath("/home/user1/");
    fs::path childPath("/home/user1/Downloads/Books");
    fs::path relativePath = fs::relative(childPath, parentPath);
    std::cout << relativePath << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-03-23T22:21:15.667

提供的答案中的代码每行都很长。假设您编写了`namespace fs = boost::filesystem;`这段代码，那么这段代码可以为您提供大部分内容，并且看起来更容易阅读：

```
 auto relativeTo( const fs::path& from, const fs::path& to )
    {
       // Start at the root path and while they are the same then do nothing then when they first
       // diverge take the entire from path, swap it with '..' segments, and then append the remainder of the to path.
       auto fromIter = from.begin();
       auto toIter = to.begin();

       // Loop through both while they are the same to find nearest common directory
       while( fromIter != from.end() && toIter != to.end() && *toIter == *fromIter )
       {
          ++toIter;
          ++fromIter;
       }

       // Replace from path segments with '..' (from => nearest common directory)
       auto finalPath = fs::path{};
       while( fromIter != from.end() )
       {
          finalPath /= "..";
          ++fromIter;
       }

       // Append the remainder of the to path (nearest common directory => to)
       while( toIter != to.end() )
       {
          finalPath /= *toIter;
          ++toIter;
       }

       return finalPath;
    } 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-04-16T00:55:04.257

取自通过 Nicol 链接到的票证找到的链接：

```
template < >
    path& path::append< typename path::iterator >( typename path::iterator begin, typename path::iterator end, const codecvt_type& cvt)
    { 
        for( ; begin != end ; ++begin )
            *this /= *begin;
        return *this;
    }
    // Return path when appended to a_From will resolve to same as a_To
    boost::filesystem::path make_relative( boost::filesystem::path a_From, boost::filesystem::path a_To )
    {
        a_From = boost::filesystem::absolute( a_From ); a_To = boost::filesystem::absolute( a_To );
        boost::filesystem::path ret;
        boost::filesystem::path::const_iterator itrFrom( a_From.begin() ), itrTo( a_To.begin() );
        // Find common base
        for( boost::filesystem::path::const_iterator toEnd( a_To.end() ), fromEnd( a_From.end() ) ; itrFrom != fromEnd && itrTo != toEnd && *itrFrom == *itrTo; ++itrFrom, ++itrTo );
        // Navigate backwards in directory to reach previously found base
        for( boost::filesystem::path::const_iterator fromEnd( a_From.end() ); itrFrom != fromEnd; ++itrFrom )
        {
            if( (*itrFrom) != "." )
                ret /= "..";
        }
        // Now navigate down the directory branch
        ret.append( itrTo, a_To.end() );
        return ret;
    } 
```

把它放在头文件中，它应该做你想做的事。

示例调用：

```
boost::filesystem::path a("foo/bar"), b("foo/test/korv.txt");
std::cout << make_relative( a, b ).string() << std::endl; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-16T00:41:21.953

~~遗憾的是，Boost.Filesystem 中不存在这样的功能。[它已被请求](https://svn.boost.org/trac/boost/ticket/5897)，但他们似乎并不关心。~~

~~你基本上必须手动完成。~~

Boost.Filesystem 1.60 添加[了`relative`](http://www.boost.org/doc/libs/1_64_0/libs/filesystem/doc/reference.html#op-relative)可以用来处理这个问题的[函数。](http://www.boost.org/doc/libs/1_64_0/libs/filesystem/doc/reference.html#op-relative)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-12-01T16:13:22.560

从 C++17 开始，该问题的解决方案是对存在的路径使用std [::filesystem::relative](https://en.cppreference.com/w/cpp/filesystem/relative) ，对可能不存在的路径使用[std::filesystem::path::lexically_relative 。](https://en.cppreference.com/w/cpp/filesystem/path/lexically_normal)

```
#include <iostream>
#include <filesystem>
namespace fs = std::filesystem;

fs::path path("/home/user1/Downloads/Books");
fs::path base("/home/user1/");
std::cout << fs::relative(path, base) << '\n';
std::cout << path.lexically_relative(base) << '\n'; 
```

这打印

```
"Downloads/Books"
"Downloads/Books" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-23T20:33:50.897

接受的答案的代码不起作用。它应该是

```
namespace boost { namespace filesystem {

template <> path& path::append<path::iterator>(path::iterator begin, path::iterator end, const codecvt_type& cvt)
{
    for( ; begin != end ; ++begin )
        *this /= *begin;
    return *this;
}

// Return path when appended to a_From will resolve to same as a_To
boost::filesystem::path make_relative( boost::filesystem::path a_From, boost::filesystem::path a_To )
{
    a_From = boost::filesystem::absolute( a_From ); a_To = boost::filesystem::absolute( a_To );
    boost::filesystem::path ret;
    boost::filesystem::path::const_iterator itrFrom( a_From.begin() ), itrTo( a_To.begin() );
    // Find common base
    for( boost::filesystem::path::const_iterator toEnd( a_To.end() ), fromEnd( a_From.end() ) ; itrFrom != fromEnd && itrTo != toEnd && *itrFrom == *itrTo; ++itrFrom, ++itrTo );
    // Navigate backwards in directory to reach previously found base
    for( boost::filesystem::path::const_iterator fromEnd( a_From.end() ); itrFrom != fromEnd; ++itrFrom )
    {
        if( (*itrFrom) != "." )
            ret /= "..";
    }
    // Now navigate down the directory branch
    ret.append( itrTo, a_To.end() );
    return ret;
}

} } // namespace boost::filesystem 
```

# javascript - Html5、JavaScript、画布动画？

> ID：10167384
> 
> 赞同：-3
> 
> 时间：2012-04-16T00:22:36.907
> 
> 标签：javascript, html, animation, canvas, timing

我有一个手表“秒针”图像需要每秒移动一次。如果我使用画布，我会每秒删除一次画布，因此加载手表照片和“秒针”照片会很难看。

我需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:48:39.240

您需要使用图层...仅绘制正在移动的部分。这个地址有一个很棒的教程：http: [//arc.id.au/CanvasLayers.html](http://arc.id.au/CanvasLayers.html)

引自本网站：

> 传统的动画技术是使用一堆透明图层覆盖背景图像，每个要设置动画的项目都绘制在单独的图层上。只有每帧发生变化的图层会被重绘，其他图层保持不变。图形引擎可以从底层中挑选出要重绘的暴露区域，而无需用户代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-27T17:28:24.090

一种（有点）简单的方法是使用两个画布。

<canvas id="foregroundCanvas"></canvas>
<canvas id="backgroundCanvas"></canvas>

这是关于 w3schools 的一个很棒的教程：http:
[//www.w3schools.com/canvas/canvas_clock_start.asp](http://www.w3schools.com/canvas/canvas_clock_start.asp)

以下是链接中的代码。

```
<!DOCTYPE html>
<html>
<body>

<canvas id="canvas" width="400" height="400"
style="background-color:#333">
</canvas>

<script>
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var radius = canvas.height / 2;
ctx.translate(radius, radius);
radius = radius * 0.90
setInterval(drawClock, 1000);

function drawClock() {
  drawFace(ctx, radius);
  drawNumbers(ctx, radius);
  drawTime(ctx, radius);
}

function drawFace(ctx, radius) {
  var grad;
  ctx.beginPath();
  ctx.arc(0, 0, radius, 0, 2*Math.PI);
  ctx.fillStyle = 'white';
  ctx.fill();
  grad = ctx.createRadialGradient(0,0,radius*0.95, 0,0,radius*1.05);
  grad.addColorStop(0, '#333');
  grad.addColorStop(0.5, 'white');
  grad.addColorStop(1, '#333');
  ctx.strokeStyle = grad;
  ctx.lineWidth = radius*0.1;
  ctx.stroke();
  ctx.beginPath();
  ctx.arc(0, 0, radius*0.1, 0, 2*Math.PI);
  ctx.fillStyle = '#333';
  ctx.fill();
}

function drawNumbers(ctx, radius) {
  var ang;
  var num;
  ctx.font = radius*0.15 + "px arial";
  ctx.textBaseline="middle";
  ctx.textAlign="center";
  for(num = 1; num < 13; num++){
    ang = num * Math.PI / 6;
    ctx.rotate(ang);
    ctx.translate(0, -radius*0.85);
    ctx.rotate(-ang);
    ctx.fillText(num.toString(), 0, 0);
    ctx.rotate(ang);
    ctx.translate(0, radius*0.85);
    ctx.rotate(-ang);
  }
}

function drawTime(ctx, radius){
    var now = new Date();
    var hour = now.getHours();
    var minute = now.getMinutes();
    var second = now.getSeconds();
    //hour
    hour=hour%12;
    hour=(hour*Math.PI/6)+
    (minute*Math.PI/(6*60))+
    (second*Math.PI/(360*60));
    drawHand(ctx, hour, radius*0.5, radius*0.07);
    //minute
    minute=(minute*Math.PI/30)+(second*Math.PI/(30*60));
    drawHand(ctx, minute, radius*0.8, radius*0.07);
    // second
    second=(second*Math.PI/30);
    drawHand(ctx, second, radius*0.9, radius*0.02);
}

function drawHand(ctx, pos, length, width) {
    ctx.beginPath();
    ctx.lineWidth = width;
    ctx.lineCap = "round";
    ctx.moveTo(0,0);
    ctx.rotate(pos);
    ctx.lineTo(0, -length);
    ctx.stroke();
    ctx.rotate(-pos);
}
</script>

</body>
</html> 
```

# sql - SQL - 查询以查找给定类别中的条目数

> ID：10167391
> 
> 赞同：0
> 
> 时间：2012-04-16T00:24:14.757
> 
> 标签：sql, count

我正在寻找创建一个查询，该查询将返回表中每个“类别”的列表以及该类别中的条目数。例如，如果我有一个包含以下数据的表：

```
ID    Category     Value
1     A            7
2     B            12
3     A            34
4     C            2
5     C            7
6     A            4 
```

查询应返回：

```
Category     Count
A            3
B            1
C            2 
```

我知道如果我让查询专门查找这 3 个类别，我会实现这一目标，但是，我想让它与一组未知的类别一起工作。换句话说，如果我在表中添加了一个类别为 D 或其他名称的条目，相同的代码将返回一个包含 1 个计数的新名称类别的列表。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:26:48.507

试试这个：

```
select category, count(*) from t
group by category 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T00:27:18.413

```
SELECT Category, COUNT(1) FROM Table GROUP BY Category 
```

# android - 如何获取微调器值以发布表单

> ID：10167394
> 
> 赞同：1
> 
> 时间：2012-04-16T00:24:50.267
> 
> 标签：android, string, post, spinner

我制作了这个代码，所以我可以将信息发送到我的网站。只是现在我想从我尝试过的微调器中加载类别：

String mCategory = category.getItemAtPosition(放什么？).toString();

我只是不知道怎么做，我希望有人知道。

```
net.thinkbin;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.HttpURLConnection;
import java.net.URL;

import android.app.Activity;
import android.app.Dialog;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

public class share extends Activity {

final Context context = this;
private Button post;
private EditText title, email, author, idea, submit;
Spinner category;

@Override
protected void onCreate(Bundle savedInstanceState) {

    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.share);

    Button view = (Button) findViewById(R.id.button1);
    view.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            startActivity(new Intent("net.thinkbin.TUTORIAL1"));
            overridePendingTransition(0, 0);
            finish();
        }
    });

    Button menu = (Button) findViewById(R.id.buttonhome);
    menu.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            // custom dialog
            final Dialog dialog = new Dialog(context);
            dialog.setContentView(R.layout.custom);

            // set the custom dialog components - text, image and button
            TextView text = (TextView) dialog.findViewById(R.id.text);
            text.setText("Loading...");
            ImageView image = (ImageView) dialog.findViewById(R.id.image);
            image.setImageResource(R.drawable.hourglass);

            dialog.show();
            Thread th = new Thread(new Runnable() {
                public void run() {

                    startActivity(new Intent("net.thinkbin.MENU"));
                    overridePendingTransition(0, 0);
                    dialog.dismiss();
                    finish();

                }
            });
            th.start();
        }
    });

    ArrayAdapter<CharSequence> adapter = ArrayAdapter
            .createFromResource(this, R.array.spinnerfood,
                    android.R.layout.simple_spinner_item);
     adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    Spinner s = (Spinner) findViewById(R.id.spinner1);
    s.setAdapter(adapter);

    post = (Button) findViewById(R.id.post);
    title = (EditText) findViewById(R.id.titlefield);
    email = (EditText) findViewById(R.id.emailfield);
    author = (EditText) findViewById(R.id.authorfield);
    category = (Spinner) findViewById(R.id.spinner1);

    idea = (EditText) findViewById(R.id.ideafield);
    submit = (EditText) findViewById(R.id.submitfield);
    post.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            String mTitle = title.getText().toString();
            String mEmail = email.getText().toString();
            String mAuthor = author.getText().toString();
            String mCategory = category.getItemAtPosition().toString();
            String mIdea = idea.getText().toString();
            String mSubmit = submit.getText().toString();

            tryPost(mTitle, mEmail, mAuthor, mCategory, mIdea, mSubmit);
        }

    });
}

protected void tryPost(String mTitle, String mEmail, String mAuthor,
        String mCategory, String mIdea, String mSubmit) {
    HttpURLConnection connection;
    OutputStreamWriter request = null;

    URL url = null;
    String response = null;
    String parameters = "title=" + mTitle + "&email=" + mEmail + "&author="
            + mAuthor + "&category=" + mCategory + "&idea=" + mIdea
            + "&submit=" + mSubmit;

    try {
        url = new URL("http://www.thinkbin.net/include/api/share.php");
        connection = (HttpURLConnection) url.openConnection();
        connection.setDoOutput(true);
        connection.setRequestProperty("Content-Type",
                "application/x-www-form-urlencoded");
        connection.setRequestMethod("POST");

        request = new OutputStreamWriter(connection.getOutputStream());
        request.write(parameters);
        request.flush();
        request.close();
        String line = "";
        InputStreamReader isr = new InputStreamReader(
                connection.getInputStream());
        BufferedReader reader = new BufferedReader(isr);
        StringBuilder sb = new StringBuilder();
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        // Response from server after login process will be stored in
        // response variable.
        response = sb.toString();
        // You can perform UI operations here
        Toast.makeText(this, "Succes! \n" + response, 0).show();
        isr.close();
        reader.close();
        startActivity(new Intent("net.thinkbin.MENU"));
        overridePendingTransition(0, 0);
        finish();

    } catch (IOException e) {
        // Error

    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:29:00.927

spinner有很多`getSelected*()` [方法](http://developer.android.com/reference/android/widget/AdapterView.html#getSelectedItem%28%29)。你可能想要`getSelectedItem()`.

# javascript - 如何将侦听器附加到多个单选按钮？

> ID：10167395
> 
> 赞同：2
> 
> 时间：2012-04-16T00:25:01.513
> 
> 标签：javascript, jquery

我有三个像这样的单选按钮：

```
<input type="radio" name="P_1" value="1">Yes</input>
<input type="radio" name="P_1" value="2">No</input>

<input type="radio" name="P_2" value="1">Yes</input>
<input type="radio" name="P_2" value="2">No</input>

<input type="radio" name="P_3" value="1">Yes</input>
<input type="radio" name="P_3" value="2">No</input> 
```

我正在尝试为每个单选按钮添加一个侦听器，以便在它们更改时通知我。我正在做这样的事情：

```
for (var i = 1; i <= 3; i++) {
            $("input[name='P_" + i + "']").live('change', function () {
                doProcessing("P_" + i, $("input[name='P_" + i + "']:checked").val());
            });
} 
```

但是，这似乎不起作用。它调用set`doProcessing`为`i`4 因为这是`i`for 循环结束时的值。在我的情况下添加事件处理程序的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T00:33:26.417

尝试

```
$('input:radio').on('change', function(){
    //access value of changed radio group with $(this).val()
}); 
```

或者，如果您使用的是 < jQuery 1.7

```
$('input:radio').live('change', function(){
    //do stuff with $(this).val()
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T00:30:04.443

与任何异步迭代值一样，您需要关闭循环中的值：

```
for (i = 0; i < 3; i++) {
    (function(i){
        ...your code here...
    }(i));
} 
```

到调用事件处理程序时，`i`变量的值将达到其最大值（在本例中`3`）。

将数据传递给每个处理程序的另一种方法是使用[方法](http://api.jquery.com/on/)`data`的参数：[`on`](http://api.jquery.com/on/)

```
for (i = 0; i < 3; i++) {
    $(...selector...).on('change', null, {i:i}, function (e) {
        //access the i value with: e.data.i
    });
} 
```

* * *

最好在处理程序中简单地检查正确的值，并使用一个类来附加事件：

```
$(document).on('change', '.someClass', function (e) {
    var i,
        $this;
    $this = $(this);
    i = $(this).attr('name').substr(2);
    i = parseInt(i, 10);
    ...your code here...
}); 
```

如果您无法更改标记，则可以使用`'[name^="P_"]'`.`'.someClass'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T00:29:08.540

您必须使用一个闭包来记住每一步的索引值。以下是许多可能的方法之一：

```
for (var i = 1; i <= 3; i++) {
   $("input[name='P_" + i + "']").live('change', createListener(i));
}

function createListener(index) {
    return function() {
        doProcessing("P_" + index, $("input[name='P_" + index + "']:checked").val());
    }
} 
```

# java - Java选择带参数的查询字符串

> ID：10167396
> 
> 赞同：-1
> 
> 时间：2012-04-16T00:25:30.517
> 
> 标签：java

这是查询

```
 String query = 
 "SELECT idPlayers 
 FROM pendu.players 
 WHERE first= 'Super'AND last='Man' AND pass=12345"; 
```

我想将 (first='Super') 更改为 first = tboxFirst.getText() 等

谢谢你帮助我

坦率

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T00:27:51.100

如果您使用的是字符串，则可以像这样创建带有值的字符串：

```
 String query = "SELECT idPlayers FROM pendu.players WHERE first= '" + tboxFirst.getText() + "'AND last='Man' AND pass=12345"; 
```

您还应该看一下，[`PreparedStatement`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)因为这是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T00:33:52.417

```
 PreparedStatement pstmt = con.prepareStatement(
  "SELECT idPlayers FROM pendu.players WHERE 
       first= ? AND last= ? AND pass=?");

   pstmt.setString(1, tboxFirst.getText());
   pstmt.setString(2, ....);
   .... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T00:31:42.153

String query = "SELECT idPlayers FROM pendu.players WHERE first=('"+tboxFirst.getText()+"') AND pass=12345";

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T01:06:34.677

你可以使用
`String query = "SELECT idPlayers FROM pendu.players WHERE first='"+tboxFirst.getText()+"'AND last='Man' AND pass=12345";`

或者

`String query = String.format(SELECT idPlayers FROM pendu.players WHERE first='%s'AND last='Man' AND pass=12345", tboxFirst.getText());`

如果你使用 JDBC，你可以使用 PreparedStatement
`PreparedStatement pstmt = con.prepareStatement("SELECT idPlayers FROM pendu.players WHERE first=? AND last=? AND pass=?");`
`pstmt.setString(1, "Super");`
`pstmt.setString(2, "Man");`
`pstmt.setString(3, "12345");`

# mysql - MySQL 中的 IF, THEN 语法与多个语句

> ID：10167402
> 
> 赞同：0
> 
> 时间：2012-04-16T00:27:05.397
> 
> 标签：mysql

我对 SQL 相当陌生，所以如果我的代码和/或解释不清楚，我深表歉意，但如果有不清楚的地方，请询问我。

基本上我有一个过程，它使用两个游标根据某些条件将段值分配给 flight_times 表。在这些情况下，我将要么 1) 分配一个 segmentID，然后从段游标中获取下一条记录，2) 分配一个空值，然后从 flight_times 游标中获取下一行，或者 3) 如果航班日期和航班号不匹配，从段游标中获取下一行。

我遇到的问题是我不能让 IF 语句接受多个语句而不说我有语法错误。例如，在我尝试分配空值后，我无法从时间游标中获取另一条记录。对于我在这里做错的事情，任何人都可以提供任何帮助，我将不胜感激。我已经查看了 MySQL 手册，它确实表明我可以有多个语句

```
CREATE PROCEDURE write_flight_times(OUT f_date DATE, OUT f_no VARCHAR(20), OUT s_segid INT, OUT s_iataid CHAR(3),
OUT ft_date DATE, OUT ft_no VARCHAR(20), OUT ft_iataid CHAR(3))

BEGIN

DECLARE var_no_more_rows BOOLEAN DEFAULT FALSE;
DECLARE var_no_more_rows1 BOOLEAN DEFAULT FALSE;

DECLARE cur_segments CURSOR FOR 
    SELECT flightdate, flightno, segmentid, iataid
    FROM flights f JOIN segments s ON f.flightid = s.flights_flightid
    ORDER BY flightdate, flightno, segmentid;

DECLARE cur_times CURSOR FOR 
    SELECT flights_flightdate, flights_flightno, a.iataid
    FROM temp_flight_times tft JOIN airports a ON a.icaoid = tft.airports_icaoid
    ORDER BY flights_flightdate, flights_flightno, depttime;

DECLARE CONTINUE HANDLER FOR NOT FOUND

SET var_no_more_rows := TRUE;
SET var_no_more_rows1 := TRUE;

OPEN cur_segments;

loop_segments:
LOOP
    FETCH cur_segments INTO f_date, f_no, s_segid, s_iataid;
    IF var_no_more_rows THEN
       CLOSE cur_segments;
       LEAVE loop_segments;
    END IF;

    OPEN cur_times;

    loop_times:
    LOOP
        FETCH cur_times INTO ft_date, ft_no, ft_iataid;
            IF var_no_more_rows1 THEN
               CLOSE cur_times;
               LEAVE loop_times;
            END IF;

            IF (f_date = ft_date AND f_no = ft_no) THEN
                IF s_iataid = ft_iataid THEN
                    s_segid;
                ELSE
                    NULL;
                    FETCH cur_times INTO ft_date, ft_no, ft_iataid;
                END IF
            ELSE
                FETCH cur_segments INTO f_date, f_no, s_segid, s_iataid;
            END IF) AS segmentid
     END LOOP loop_times;
  END LOOP loop_segments;  
  END$$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T00:51:09.947

问题是您不能在存储过程中拥有多个“未找到”处理程序，因此当内部循环获得“未找到”条件时，外部循环的“未找到行”变量也设置为 true，终止外循环。

解决方案是将逻辑拆分为两个存储过程 - 每个游标一个 - 并从外部存储过程调用内部存储过程。

# c - 为链表节点中的字符串动态分配内存

> ID：10167403
> 
> 赞同：1
> 
> 时间：2012-04-16T00:27:11.200
> 
> 标签：c, string, visual-studio-2010, linked-list, calloc

我正在使用 Visual Studio 2010，我知道它有一些特性。我希望不是这样。

这显然是一个更大程序的一部分，但我试图简化它，以便弄清楚我在做什么。

每次我运行它时，calloc 分配都会解析为 NULL，然后我退出程序。我在没有围绕 calloc 的 if 语句的情况下尝试了它，并得到了一个调试错误，所以我很确定这是 calloc 的问题。

任何帮助，将不胜感激。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

typedef struct NODE {
    char * x;
    struct NODE * link;
} NODE;

typedef struct {
    NODE * first;
} STRUCTURE;

NODE * insertNode (NODE * pList, NODE * pPre, char * string);

int main (void) {
   STRUCTURE  str[2];
   char * string = "blah";
    str[2].first = NULL;
    str[2].first = insertNode (str[2].first, str[2].first, string); 
    printf ("\n%s\n", str[2].first->x);
return 0;
}

NODE * insertNode (NODE * pList, NODE * pPre, char * string)
{
    //Local Declarations
    NODE * pNew;

    //Statements
    if ( !(pNew = (NODE*)malloc(sizeof(NODE)))) 
            printf ("\nMemory overflow in insert\n"),
                exit (100);
        if ( ( pNew->x = (char*)calloc((strlen(string) + 1), sizeof(char))) ==     NULL);
        {
            printf ("\nMemory overflow in string creation\n");
            exit (100);
        }
        strncpy(pNew->x, string, strlen(pNew->x)); 
    if (pPre == NULL) //first node in list
    {
        pNew->link = pList;
        pList = pNew;
    }
    else 
    {
        pNew->link = pPre->link;
        pPre->link = pNew;
    }

    return pList;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T00:29:22.300

> 我正在使用 Visual Studio 2010，我知道它有一些特性。我希望不是这样。

这是一个分号：

```
if ( ( pNew->x = (char*)calloc((strlen(string) + 1), sizeof(char))) ==     NULL);
                                                                                ^ 
```

无论`calloc`返回什么，都会输入以下块，您将调用`exit`.

* * *

旁注，你可以这样写：

```
if (!(pNew->x = calloc(strlen(string) + 1, 1)))
    /* ... */ 
```

# c# - 在 DAL 中将 ConStr 注入到 Linq to SQL 类

> ID：10167406
> 
> 赞同：1
> 
> 时间：2012-04-16T00:27:20.383
> 
> 标签：c#, asp.net, linq-to-sql

对不起，如果这是一个愚蠢的问题。我正在编写一个简单的 3 层 ASP Web 窗体应用程序，如何将我的连接字符串注入我的 DAL 到 LINQ to SQL 类

我相信这是从 DAL 中的 App.Config 中提取 con 信息

```
 public LNQDataContext() : 
            base(global::bcDAL.Properties.Settings.Default.TM10_ArchiveConnectionString, mappingSource)
    {
        OnCreated();
    } 
```

有没有办法可以将其修改为 LINQDataContext(string conStr) ？我真的希望管理员能够在 web.config 中设置它（没有硬编码在 dll 中）如果他必须移动东西。

或者欢迎任何其他有见地的替代方案，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:36:40.697

通过 DBML 文件为您生成的 DataContext 类是部分的，因此只需使用您自己的同名类扩展它并添加您需要的任何其他构造函数。但是，我不确定您为什么认为连接字符串是用您所拥有的内容进行硬编码的。从服务器资源管理器将表拖到 DBML 表面上已经将连接字符串添加到您的 web/app.config。这就是`global::bcDAL.Properties.Settings.Default.TM10_ArchiveConnectionString`您的示例中所指向的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:15:25.047

您还可以简单地将连接字符串从数据层的 app.config 复制到表示层的 web.config。该应用程序将在执行时在 web.config 中找到它。

# iphone - 如何停止直到一个动作完成以执行下一个动作？

> ID：10167409
> 
> 赞同：0
> 
> 时间：2012-04-16T00:28:15.390
> 
> 标签：iphone, objective-c, uiactivityindicatorview

在我的应用程序中，我有一个音乐播放器，它实际上是来自 iTunes 的歌曲并播放预览。但是由于 AVAudio 播放器需要将文件写入本地文件才能播放。所以有时在我点击我的播放按钮后需要 2-3 秒，所以我想在我的按钮上显示一个 UIActivityIndi​​cator 视图，以便用户知道它的加载。

我知道如何为其他视图加载执行此操作，但在这里它一个接一个地发生在一个方法中，所以不知道如何执行此操作。

这是我的代码：

```
wait = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
        UIView * temp = (UIView *)sender;
        [temp addSubview:wait];
        [wait startAnimating];
        NSError * error;
        int tag = [sender tag]-100;
        previousTag = sender;
        active = sender;
        UIButton * button = (UIButton *)sender;
        [UIView transitionWithView:button
                          duration:0.5
                           options:UIViewAnimationOptionTransitionFlipFromLeft 
                        animations:^{ 
                            [button setBackgroundImage:pauseButtonImage.image forState:UIControlStateNormal];
                        }
                        completion:NULL];
        NSIndexPath * indexPath = [NSIndexPath indexPathForRow:tag inSection:0];
        [songsResults selectRowAtIndexPath:indexPath animated:YES scrollPosition:UITableViewScrollPositionNone];

        NSString * floatPath = [NSString stringWithFormat:@"preview%d",tag];
        NSString *uniquePath = [TMP stringByAppendingPathComponent: floatPath];
            if([[NSFileManager defaultManager] fileExistsAtPath: uniquePath])
            {
                [wait stopAnimating];
                audioPlayer = [[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath:uniquePath] error:&error];
            }
            else {

            NSArray * temp = [dataToDisplay objectAtIndex:tag];
            NSString * urlString = [temp objectAtIndex:3];
            NSURL *url = [NSURL URLWithString:urlString];
            NSData *soundData = [NSData dataWithContentsOfURL:url];

            [soundData writeToFile:uniquePath atomically:YES];
                [wait stopAnimating];
            audioPlayer = [[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath:uniquePath] error:&error];
            }
        float duration = [audioPlayer duration];

        timer = [NSTimer scheduledTimerWithTimeInterval:duration target:self selector:@selector(stopPreview:) userInfo:nil repeats:NO];
            [audioPlayer play];
            isPlaying = YES;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T00:48:41.293

通过调用 让阻塞任务在后台运行`performSelectorInBackground`。为了在任务完成时收到通知，请传递一个块或使用委托。

文件存储.h

```
@protocol FileStorageDelegate <NSObject>
- (void)fileStorageDidWriteToFile;
@end

@interface FileStorage

@property (nonatomic, assign) id <FileStorageDelegate> delegate;

@end 
```

文件存储.m

```
@implementation FileStorage
@synthesize delegate = _delegate;

- (void)storeFile:(NSData *)data
{
   [self performSelectorInBackground:@selector(storeFileInBackground:) withObject:data];
}

- (void)storeFileInBackground:(NSData *)data
{
   // perfofm blocking task

   // Call delegate and pass some parameters if needed
   [self.delegate fileStorageDidWriteToFile];
}

@end 
```

# android - 更改 TabPageIndicator 页脚和文本颜色 (ViewPagerIndicator)

> ID：10167416
> 
> 赞同：7
> 
> 时间：2012-04-16T00:29:25.440
> 
> 标签：android

这让我发疯：我一生都无法弄清楚如何更改 TabPageIndicator 的页脚和文本颜色（来自 Jake Wharton 的 ViewPagerIndicator）。我查看了示例 ViewPagerIndicator 应用程序的源代码，但找不到“默认”和“样式”示例的代码不同之处。Default 具有默认的蓝色页脚和白色文本，而 Styled 示例具有红色页脚并使用灰色字体。

我知道这是可能的，但我不知道该怎么做！！非常感谢任何帮助。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T01:03:02.030

是的，它与主题的清单定义不同：

对于默认选项卡：

```
<activity
            android:name=".SampleTabsDefault"
            android:label="Tabs/Default"
            android:theme="@style/Theme.PageIndicatorDefaults"> 
```

和样式标签：

```
<activity
            android:name=".SampleTabsStyled"
            android:label="Tabs/Styled"
            android:theme="@style/StyledIndicators"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T12:00:57.243

我认为正确的答案是将以下样式添加到您的 style.xml 文件中（其中包含告诉 VPI 如何显示的元素）。像这样的东西：

```
<style name="Widget.MyTitlepageIndicator">
    <item name="footerColor">#ff99cc33</item>
    <item name="footerIndicatorStyle">underline</item>
    <item name="footerIndicatorHeight">3dp</item>
    <item name="footerLineHeight">1.5dp</item>
    <item name="footerPadding">6dp</item>
    <item name="selectedColor">#ffffffff</item>
</style> 
```

然后，在您定义 VPI 的 layout.xml 文件中，您只需告诉它您创建的样式，如下所示：

```
<com.viewpagerindicator.TitlePageIndicator
    android:id="@+id/history_vp_ind"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    style="@style/Widget.MyTitlepageIndicator" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-10T11:40:09.140

要以编程方式执行此操作，请修改 TabPageIndicator 并添加以下方法：

```
public void setTextColor(int color) {
    for (int i = 0; i < mTabLayout.getChildCount(); i++) {
        View child = mTabLayout.getChildAt(i);
        if (child instanceof TextView)
            ((TextView) child).setTextColor(color);
    }
} 
```

然后只需使用该方法更改指标中视图的文本颜色。例如

```
setTextColor(0xFFFFFFFF) 
```

会是白色的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-16T12:41:10.790

您可以通过2 种方式更改**TabPageIndicator**的默认背景

**1.**可以在XML中改变**背景**

```
<com.viewpagerindicator.TabPageIndicator
        android:id="@+id/container"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#0c445c" /> 
```

**2.**替换**viewpager库中****TabPageIndicator.java**类中的构造函数

 **```
public TabPageIndicator(Context context, AttributeSet attrs) {
        super(context, attrs);
        setHorizontalScrollBarEnabled(false);

        mTabLayout = new IcsLinearLayout(context, R.attr.vpiTabPageIndicatorStyle);
        mTabLayout.setBackgroundColor(Color.parseColor("#0c445c"));
        addView(mTabLayout, new ViewGroup.LayoutParams(WRAP_CONTENT, MATCH_PARENT));
    } 
```

希望这个帮助**

# matlab - 在 Matlab 中对 for 循环进行矢量化，为看似等效的代码获得不同的结果

> ID：10167421
> 
> 赞同：1
> 
> 时间：2012-04-16T00:30:36.197
> 
> 标签：matlab, vector, vectorization

我正在尝试对我正在处理的一段代码进行矢量化，但是我得到了一些奇怪的结果，这些结果在看似等效的 for 循环中不会发生。谁能明白为什么这两个版本会得到不同的结果？

此外，如果有人对我如何矢量化第一个 for 循环有任何指示，并为每个单元格生成一个二进制位置矩阵，那将是甜蜜的。

非常感谢您的帮助

[格式化代码](http://pastebin.com/RyJXfyBp)

纯代码：

```
function create_distances()
x=3; % Dimensions of grid
y=3;
num_cells=x*y; % Num of cells in grid

% In following code a matrix is generated for each cell, in which that cell
% is set to 1 and all others zero.
locations=zeros(x,y,num_cells); % Initialise blank array to store each location on grid
for current_index=1:num_cells;
    temp=locations(:,:,current_index);
    temp([current_index])=1;% Set a single cell to 1 to represent which cell is the active one for each of the cells
    locations(:,:,current_index)=temp; % Store back to that location matrix
end

%%For loop version which correctly creates the distances
distances_from_position1=zeros(x,y,num_cells);
for current_location1=1:num_cells
    distances_from_position1(:,:,current_location1)=bwdist(locations(:,:,current_location1));
end

% Vectorised version of same code which gives incorrect distance values
current_location2=1:num_cells;
distances_from_position2=zeros(x,y,num_cells);
distances_from_position2(:,:,current_location2)=bwdist(locations(:,:,current_location2));

%Gives correct results
correct_values=distances_from_position1

%incorrect_values=distances_from_position2;

if eq(distances_from_position1,distances_from_position2)==1
    disp('Same results')
else
    disp('Two methods give different results') %This message shown each time
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:30:53.047

我不认为代码是等效的：“顺序”版本在二维空间（切片内）中找到一个距离，所以如果`x = bwdist(locations(:,:,1)`最接近 (3,3) 的非零元素是 (1,1)，我们有x(3,3) = sqrt(4+4) = 2.8284，即。(1,1) 和 (3,3) 之间的距离。

另一方面，对于“矢量化版本”，距离在 3-D 空间中，如果`x = bwdist(locations(:,:,1:2)`最接近 (3,3,1) 的非零元素不是 (1,1,1) 而是 (1,2,1) )，所以 x(3,3,1) = sqrt(4+1+1) = 2.4495。

# java - 扩展 GCanvas 的类不会按照 addComponentListener 的指示进行

> ID：10167423
> 
> 赞同：0
> 
> 时间：2012-04-16T00:31:38.247
> 
> 标签：java

导入 java.awt.event.* 后，我使用以下代码将组件侦听器添加到扩展 GCanvas 的类中：

```
public NameSurferGraph() {
addComponentListener(this);
nameList = new ArrayList<NameSurferEntry>();
}

public void componentHidden(ComponentEvent e) { }
public void componentMoved(ComponentEvent e) { }
public void componentResized(ComponentEvent e) { update(); }
public void componentShown(ComponentEvent e) { }

public void update() {
removeAll();
drawBackground();
if (nameList.size()>0) {
for (int i=0; i<nameList.size(); i++) {;
drawLineForOneName(i);
}
}
} 
```

但是当我从另一个类调用它的方法时，什么也没有发生。

```
public NameSurferGraph graph = new NameSurferGraph();

public void graphName(String name) {
entry = database.findEntry(name);
graph.addEntry(entry);
graph.update();
} 
```

关于我可能做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T00:39:08.063

由于您没有提供足够的代码，我只能猜测：

您的调用从`removeAll();`中删除所有元素`nameList`，因此`if`阻止您进入循环（即使没有，循环体将执行 0 次，因为空集合的大小为 0）

# iphone - iPhone - Facebook 连接

> ID：10167427
> 
> 赞同：1
> 
> 时间：2012-04-16T00:32:44.920
> 
> 标签：iphone, objective-c, ios, facebook

我正在开发一款 iphone 游戏，我想让用户在 facebook 上发布他们的分数。我已经设法实现了它，但是每次我想发布提要时，都会有一个 facebook 窗口告诉我我已经登录到我的 Facebook 应用程序，并且用户需要点击接受才能显示将提要发布到的下一个窗口配置文件的墙。

我需要跳过 Facebook 登录吗？我的意思是facebook授权方法并直接跳入facebook feed方法？

这就是我所拥有的，但是会话总是无效的！fbDidLogin 永远不会被调用，并且在调试中它给了我这种错误：

```
void SendDelegateMessage(NSInvocation*): delegate (webView:decidePolicyForNavigationAction:request:frame:decisionListener:) failed to return after waiting 10 seconds. main run loop mode: kCFRunLoopDefaultMode 
```

如果我注销然后尝试提要，我必须登录 2 次，一次用于会话，一次用于提要。

这是代码：

```
#import "FacebookConnect.h"

static NSString* kAppId = @"414427041919461"; // Your Facebook app ID here

@implementation FacebookConnect

@synthesize facebook = _facebook;

#pragma mark -
#pragma mark Singleton Variables
static FacebookConnect *singletonDelegate = nil;

#pragma mark -
#pragma mark Singleton stuff
- (id)init {
    if (!kAppId) {
        NSLog(@"MISSING APP ID!!!");
        exit(1);
        return nil;
    }

    if ((self = [super init])) {

        _facebook = [[Facebook alloc] initWithAppId:kAppId andDelegate:self];
        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        if ([defaults objectForKey:@"FBAccessTokenKey"] 
            && [defaults objectForKey:@"FBExpirationDateKey"]) {
            _facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
            _facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
        }

    }

    return self;
}

+(FacebookConnect *) sharedFacebook
{
    @synchronized([FacebookConnect class])
    {
        if(!singletonDelegate) [[self alloc] init];
        return singletonDelegate;
    }
    return nil;
}
+(id)alloc
{
    @synchronized ([FacebookConnect class])
    {
        NSAssert(singletonDelegate == nil, @"Attempted to allocate a second instance of the Game Manager singleton");
        singletonDelegate = [super alloc];
        return singletonDelegate;
    }
    return nil;
}

#pragma mark -
#pragma mark Singleton methods
-(void) logout
{
    [_facebook logout];
}
-(void) feedWithScore:(int) _s andLevel:(int) _l
{
    if (![_facebook isSessionValid]) {
        NSLog(@"Session invalid - Authorize");
        /*NSArray *permissions = [[NSArray alloc] initWithObjects:@"user_likes", @"read_stream",nil];
         [_facebook authorize:permissions];
         [permissions release];*/
        [_facebook authorize:nil];
    }

    [_facebook dialog:@"feed" andDelegate:self];

}

#pragma mark -
#pragma mark Facebook implementations
// Pre iOS 4.2 support
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [_facebook handleOpenURL:url]; 
}

// For iOS 4.2+ support
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [_facebook handleOpenURL:url]; 
}
- (void)fbDidLogin {
    NSLog(@"Login OK");
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[_facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[_facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];

}
- (void) fbDidLogout {
    NSLog(@"Log out");
    // Remove saved authorization information if it exists
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"]) {
        [defaults removeObjectForKey:@"FBAccessTokenKey"];
        [defaults removeObjectForKey:@"FBExpirationDateKey"];
        [defaults synchronize];
    }
}

- (void)dialogDidComplete:(FBDialog *)dialog{ NSLog(@"Login OK"); }
- (void)dialogDidNotComplete:(FBDialog *)dialog{}
- (void)dialogCompleteWithUrl:(NSURL *)url{}
- (void)dialog:(FBDialog*)dialog didFailWithError:(NSError *)error{}
- (BOOL)dialog:(FBDialog*)dialog shouldOpenURLInExternalBrowser:(NSURL *)url{return NO;}

- (void)fbDidNotLogin:(BOOL)cancelled{}
- (void)fbDidExtendToken:(NSString*)accessToken
               expiresAt:(NSDate*)expiresAt{}
- (void)fbSessionInvalidated{}

#pragma mark -
#pragma mark Dealloc
-(void) dealloc{
    [super dealloc];
    [_facebook release];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T01:33:49.083

为了在 Facebook 提要上发帖，您必须拥有访问令牌。因此，您必须授权才能获得该令牌。如果您每次都收到授权对话框，那是因为访问令牌已过期。您可以在旧 SDK 中请求 offline_access，而新 SDK 会在用户每次使用您的应用时要求您扩展 access_token。不过，作为一种意见，您不应该将用户“发布”到 Facebook 提要。它应该问他们。但这只是我对良好用户体验的看法。

这是有关如何扩展访问令牌的文档。

[http://developers.facebook.com/docs/mobile/ios/build/#extend_token](http://developers.facebook.com/docs/mobile/ios/build/#extend_token)

您还应该在每次加载应用程序时进行检查：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"] 
        && [defaults objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"]; 
```

并检查它是否已经被授权：

```
f (![facebook isSessionValid]) {
    [facebook authorize:nil];
} 
```

在此处查看文档：[https ://developers.facebook.com/docs/mobile/ios/build/#implementsso](https://developers.facebook.com/docs/mobile/ios/build/#implementsso)

# python - Python 数组索引切换 - 发生了什么？

> ID：10167428
> 
> 赞同：3
> 
> 时间：2012-04-16T00:32:51.250
> 
> 标签：python, arrays, matrix

当我使用 Python 对 3 维矩阵进行建模时，我首先制作了一个由零组成的多数组。然后，我可以通过引用它的索引轻松地覆盖每个元素。问题是，当尝试使用 [:] 引用多个元素时，索引的顺序会发生变化。我要用矩阵数学术语说话，所以请耐心等待。

在下面的示例中，我想为每个时间级别的二维平面中对象的位置建模。所以对于每个时间级别，我都有一个 X（行）和 Y（列）坐标。在下面的示例中，我使用了 3 行 4 列的两个时间级别。

```
 >>> Simple = numpy.zeros([2,3,4],float)
    >>> print Simple
    [[[ 0\.  0\.  0\.  0.]
    [ 0\.  0\.  0\.  0.]
    [ 0\.  0\.  0\.  0.]]

    [[ 0\.  0\.  0\.  0.]
    [ 0\.  0\.  0\.  0.]
    [ 0\.  0\.  0\.  0.]]] 
```

看起来不错。我有两个 3x4 矩阵。现在我想将第 2 矩阵（第 2 时间级别）第 3 行第 4 列的值更改为等于 9。

```
 >>> Simple[1][2][3] = 9
    >>> print Simple
    [[[ 0\.  0\.  0\.  0.]
    [ 0\.  0\.  0\.  0.]
    [ 0\.  0\.  0\.  0.]]

    [[ 0\.  0\.  0\.  0.]
    [ 0\.  0\.  0\.  0.]
    [ 0\.  0\.  0\.  9.]]] 
```

到目前为止，一切都很好。由此，我可以看出索引的顺序是 Simple[TimeLevel,X,Y]。所以现在，对于每个时间级别，我希望第一行第二列（timelevel = both,x=0,y=1）中的元素是数字“4”。

```
 >>> Simple[:][0][1] = 4
   >>> print Simple
   [[[ 0\.  0\.  0\.  0.]
   [ 4\.  4\.  4\.  4.]
   [ 0\.  0\.  0\.  0.]]

   [[ 0\.  0\.  0\.  0.]
   [ 0\.  0\.  0\.  0.]
   [ 0\.  0\.  0\.  9.]]] 
```

如您所见，索引的顺序不再相同。它从 Simple[TimeLevel,row,column] 切换到 Simple[column,TimeLevel,row]。

我的问题是：为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T00:35:46.530

`[:]`所做的只是返回序列的副本。这不是你想要的。

```
>>> Simple[:,0,1] = 4
>>> Simple
array([[[ 0.,  4.,  0.,  0.],
        [ 0.,  0.,  0.,  0.],
        [ 0.,  0.,  0.,  0.]],

       [[ 0.,  4.,  0.,  0.],
        [ 0.,  0.,  0.,  0.],
        [ 0.,  0.,  0.,  0.]]]) 
```

# node.js - 在 Redis 回调中使用 node.js http 代理

> ID：10167431
> 
> 赞同：1
> 
> 时间：2012-04-16T00:33:08.123
> 
> 标签：node.js, redis, http-proxy

考虑到这个不完整的片段：

```
var util = require('util'),
    nconf = require('nconf'),

    http = require('http'),
    httpProxy = require('http-proxy'),

    express = require('express'),
    repoServer = express.createServer(),

    redis = require('redis'),
    redisClient = redis.createClient();

// (...)

var proxy = new httpProxy.RoutingProxy();
http.createServer(function (req, res) {
  console.log("URL", req.url);
  if (req.url) {
    var token = req.url.split("/")[1];

    // if I leave this code here it works fine
    // var target = { host: 'local-01', port: 8024 }
    // proxy.proxyRequest(req, res, target);

    // now I need to retrieve some routing information
    // from redis, so I query redis here
    redisClient.get(token, function (err, reply) {
      // if I leave this code here the request hangs
      var target = { host: 'local-01', port: 8024 }
      proxy.proxyRequest(req, res, target);
    });
  }
}).listen(routerInfo.port, routerInfo.address); 
```

为什么当我调用`proxyRequest`外部 de redis 客户端`get`回调时它可以工作，但是当我在回调中移动调用时它失败并且 HTTP 请求只是挂起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T00:45:36.347

请求是流，也许你想缓冲

见：[https ://github.com/nodejitsu/node-http-proxy/blob/master/examples/http/latent-proxy.js](https://github.com/nodejitsu/node-http-proxy/blob/master/examples/http/latent-proxy.js)

# c - 在给定指针的情况下从内核中访问内核内存

> ID：10167432
> 
> 赞同：4
> 
> 时间：2012-04-16T00:33:26.033
> 
> 标签：c, linux, memory, kernel, semaphore

我正在尝试了解内核，并且一段时间以来一直在尝试打印构成内核环境的一些基本数据结构，但未成功。我的问题是，给定一个内存地址，我希望能够打印该地址的内容。

例如，我有一个确定 IDT 位置的函数。它`(void *)`按 的顺序返回`0xffff81b8c0000fff`。但是，每当我尝试`printk`访问该地址的内容时，结果都是内核恐慌。我知道有一些保护措施可以防止从用户空间访问内核内存，但我试图从 start_kernel 中执行此操作，我认为它们是可读的。

代码是：

```
idt_ptr = sidt(); // returns (void *)
printk(KERN_INFO "680: IDT TABLE, FIRST ENTRY\n");
//entry is 64 bits
printk(KERN_INFO "680: %llx\n", *(unsigned long long *)idt_ptr); 
```

这是进行此尝试后发生的内核恐慌的结尾：

![在此处输入图像描述](../Images/fff925a7a24a655499571e5be951caa5.png)

看来我需要一个信号量来进行读取访问，但这不只是一个任意地址吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T02:38:20.237

> 例如，我有一个确定 IDT 位置的函数。它按 0xffff81b8c0000fff 的顺序返回 (void *)

没有指向其他任何东西的指针`char*`可能相等`0x...ff`——对于指向包含除`char`s 之外的任何数据结构的指针，该地址没有正确对齐。

结论：您的`sidt`函数已损坏并返回虚假地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T03:26:42.523

我建议让[kdb](http://www.ibm.com/developerworks/linux/library/l-kdbug/)在内核中四处探索。

尝试设置带有 kdb 补丁内核的[KVM](http://www.linux-kvm.org/page/Main_Page)或[qemu VM。](http://wiki.qemu.org/Main_Page)

# php - 如何在 wordpress 中拥有特定类别的档案

> ID：10167437
> 
> 赞同：0
> 
> 时间：2012-04-16T00:34:13.080
> 
> 标签：php, wordpress

我正在用 wordpress 做一个网站。我有几个菜单项/选项卡，每个选项卡都显示博客的一部分，但根据类别进行过滤，因此每个选项卡的 url 结构将是：

examplewebsite.com/?category=1
examplewebsite.com/?category=3

根据选择的选项卡。在每个页面上都有一个日历小部件，可让我单击日期以查看该特定日期的帖子。日历发送到一个 url 结构，如：

examplewebsite.com/?m=20120415
examplewebsite.com/?m=20120417

但是，这将显示基于日期的所有类别。我想设置它，如果我在这个页面上：examplewebsite.com/?category=1 并且我点击日历，它会将“&?m=20120415”添加到我当前的 URL 中，这样它将包含过滤器类别的

我对java有相当广泛的了解，但对php基本上一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T01:52:06.373

试试这个链接，wp query_post 显示帖子，它确实有一个基于类别获取帖子的参数

[http://codex.wordpress.org/Function_Reference/query_posts](http://codex.wordpress.org/Function_Reference/query_posts)

```
<?php

// The Query
query_posts('cat=1');
//get the post under the category 1

// The Loop
while ( have_posts() ) : the_post();
    echo '<li>';
    the_title();
    echo '</li>';
endwhile;

// Reset Query
wp_reset_query();

?> 
```

# xcode - Xcode“没有这样的文件或目录错误”是什么？

> ID：10167442
> 
> 赞同：65
> 
> 时间：2012-04-16T00:35:23.480
> 
> 标签：xcode

Xcode 不断提示告诉我项目中没有特定图像，并且在我尝试构建时出错。如果我从项目中删除了 Xcode 抱怨的 .png，为什么在我尝试构建时 Xcode 会出错？

[大黄编辑（评论太大了）]

我对这些细节也有同样的看法。复制命令看起来像这样

```
CpResource MyIcons/../13-bicycle.png /Users/Me/Library/Developer/Xcode/DerivedData/MyProject-cxsohyxdecdbptgrrtaixbhhixrj/Build/Products/Debug-iphonesimulator/MyProject.app/13-bicycle.png 
```

然后有一堆 setenv 并且命令被翻译成“内置副本”但这些都不重要，结果是当我编译时我得到这个错误：

错误：/Users/Me/Development/MyProject/MyIcons/../13-bicycle.png：没有这样的文件或目录

现在，我按照 Robert Harvey 的建议打开了 Copy Bundle Resources 选项卡，我的 .png 文件就在那里，没有任何内容出现在 read 中。它位于文件系统（Finder）和项目导航器中。因此，我使用 - 按钮将其从资源中删除，并使用 Copy Bundle Resources 选项卡中列表左下方的 + 按钮手动添加。这将它放在导航器中项目的根目录，所以我再次将它移到我的组中 - 但没有运气，同样的错误。所以我只是将它完全删除（从项目导航器中，允许它被移动到废纸篓）。那行得通，但是我在下一个图标上遇到了同样的错误（它一次只报告一个或两个）。

查看错误消息，似乎认为 MyIcons 是一个文件夹。不是，只是一群人。没有这样的文件夹，我可以在文件系统中看到。

当我通过拖放添加时，我选中了“将项目复制到...组文件夹（如果需要）”并选中了“为任何添加的文件夹创建组”按钮。但请注意，我只是将图标（整体）拖到现有组中；我没有拖过任何文件夹，也没有在哪里创建任何组或文件夹。但不知何故，编译器认为这些资源位于文件系统中不存在的文件夹中。

我右键单击复制资源列表中的图标，并尝试在 Finder 中显示和在项目导航器中显示：两者都有效 - 文件在那里并且它知道从哪里获取它 - 直到它构建。

除了删除图标之外，我什至还没有找到解决方法 - 清理不起作用。我认为我的小组被破坏了。

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-07-24T13:14:10.610

在这里查找[XCode Build – CopyPNGFile Error and No such File or Directory](http://www.marbleblue.co.uk/xcode-build-copypngfile-error-file-directory/)。我有同样的问题，这个解决方案对我有帮助。

> 如果您在构建 xcode 应用程序时收到这些烦人的错误中的任何一个，则说明您的项目包中的某些内容已损坏。
> 
> 1.  在 Xcode 中打开你的项目
> 2.  点击你的项目
> 3.  单击目标下的项目
> 4.  点击构建阶段选项卡
> 5.  打开靠近底部的“复制捆绑资源”
> 6.  寻找以红色列出的任何资源！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-02-07T11:57:31.157

我有同样的问题，但我的解决方案有点不同：

1.  在 Xcode 中打开项目
2.  打开项目导航器
3.  在下面的过滤器中，搜索错误的文件名
4.  我在一个名为“Recovered References”的组下找到了该文件，它被标记为红色
5.  删除红色文件，一切正常

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-03T18:50:10.017

好的，这是为我修复它的不令人满意的解决方法。

（首先，请注意，当我在项目导航器中右键单击我的狡猾组时）它看起来像任何其他组，*除了*在外部编辑器中打开是灰色的 - 很奇怪吧？）

1.  我关闭了 XCode 并重新启动它。

    => 现在我看到违规组下的所有图标都是红色的（在项目导航器中）

2.  删除整个组。

3.  创建一个新组（同名）并将图标从原始源拖放到组中

    => 错误无法复制（或某些类似的 - 我不记得了，但我之前已经看到并修复了这个 - 并且在 SO 的其他地方看到了它）

    这个错误是由于剩余的图标，所以现在修复这个，

4.  我删除了所有其他带有图标的组，并将它们的图标移至垃圾箱

5.  在项目位置打开查找器
6.  删除项目中的每个图标（按种类排序，删除所有.png）
7.  再次创建一个新组，并将_再次拖动所有图标。

8.  哇，现在点击 Builder

    => XCode 崩溃。

    迷人的。

9.  重启 Xcode

10.  手指交叉：建立

=> 它有效。简短的庆祝活动并重新开始工作。

（看看我说的不满意是什么意思）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-08T11:15:12.297

也许你移动了名为**-Prefix.pch的文件，你可以改变文件的字典，这样做：[关于“没有这样的文件或目录”的错误](http://www.cnblogs.com/ChenYilong/p/3588456.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-18T07:02:12.267

检查您的项目文件路径。如果任何文件夹中有空格，则会导致此错误。只需删除空格。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-07T13:40:21.567

使用 XCode 10，我在删除项目中不再需要的一些文件后出现此错误。就我而言，我去了 XCode，单击项目名称，然后在**Resources**下，丢失的文件以红色列出。我所做的只是删除它们。

如果您需要这些文件，您需要通过转到 File -> Add files to 来添加它们，然后选择这些文件。选择文件后，请确保选中了“**如果需要复制文件”**。

希望对某人有所帮助。

快乐编码

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-29T05:51:35.663

尝试设置目标 CLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS=NO

* * *

## 回答 #8

> 赞同：-7
> 
> 时间：2016-03-07T14:59:14.250

XCode Build – CopyPNGFile 错误并且没有这样的文件或目录

如果您在构建 xcode 应用程序时收到这些烦人的错误中的任何一个，则说明您的项目包中的某些内容已损坏。

1.  在 Xcode 中打开你的项目
2.  点击你的项目
3.  单击目标下的项目
4.  点击构建阶段选项卡
5.  打开靠近底部的“复制捆绑资源”
6.  寻找以红色列出的任何资源！

# python - wxPython，创建位图

> ID：10167443
> 
> 赞同：0
> 
> 时间：2012-04-16T00:35:40.753
> 
> 标签：python, graphics, wxpython

我正在学习 wxPython。我的问题是如何创建位图。我有每个像素的 R、G、B 值，但我不知道如何从中创建位图。我试过使用[wx.BitmapFromBuffer](http://wxpython.org/docs/api/wx-module.html#BitmapFromBuffer)，我不明白我应该如何创建这个缓冲区。我遍历了每个像素并以线性方式放入列表 R、G、B 组件，但它并没有画出我所期望的。你了解缓冲区应该如何构建吗？

我不想使用 wx.MemoryDC 在位图上绘制每个像素，因为它太慢了。

谢谢！

编辑：我使用 wxPython 演示中的方法 - RawBitmapAccess。

```
 buf = numpy.empty((w,h,3), numpy.uint8)
    n = 29000
    for i in xrange(w):
        for j in xrange(h):
            r = int(n*255*field[j,i])
            if r > 253: 
                r = 253
            buf[i, j, 0] = int(r)
            buf[i, j, 1] = int(r)
            buf[i, j, 2] = int(b)
            #dc.SetPen(wx.Pen(wx.Colour(r,r,b)))
            #dc.DrawPoint(i,j)
    bmp = wx.BitmapFromBuffer(w, h, buf)
    gc = wx.GraphicsContext.Create(dc)
    gc.DrawBitmap(bmp, 0, 0, w, h) 
```

如果我取消注释我的旧绘图方式（循环中有两条注释线），那么我得到了我想要的 - 一个模糊的球。如果我不取消注释我有奇怪的图片 - 它被垂直分成几个片段，每个片段都有自己的模糊球，而且看起来有垂直线缺失像素。我以与演示程序相同的方式使用缓冲区。为什么我得到奇怪的图片？

编辑2：我想通了。我应该在循环中交换 i 和 j 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T01:03:25.807

正如我在之前的答案中发布的那样，这是使用 numpy 完成的，并且在演示调用 RawBitmapAccess 中有一个示例。代码基本上看起来像，

```
def MakeBitmap2(self, red, green, blue, alpha=128):
    # Make an array of bytes that is DIM*DIM in size, with enough
    # slots for each pixel to have a RGB and A value
    #arr = makeByteArray( (DIM,DIM, 4) )
    arr = numpy.empty((DIM,DIM, 4), numpy.uint8)

    # just some indexes to keep track of which byte is which
    R, G, B, A = range(4)

    # initialize all pixel values to the values passed in
    arr[:,:,R] = red
    arr[:,:,G] = green
    arr[:,:,B] = blue
    arr[:,:,A] = alpha

    # Set the alpha for the border pixels to be fully opaque
    arr[0,     0:DIM, A] = wx.ALPHA_OPAQUE  # first row
    arr[DIM-1, 0:DIM, A] = wx.ALPHA_OPAQUE  # last row
    arr[0:DIM, 0,     A] = wx.ALPHA_OPAQUE  # first col
    arr[0:DIM, DIM-1, A] = wx.ALPHA_OPAQUE  # last col

    # finally, use the array to create a bitmap
    bmp = wx.BitmapFromBufferRGBA(DIM, DIM, arr)
    return bmp 
```

# ruby-on-rails - 在 Rails 中需要整个目录树的好方法是什么？

> ID：10167444
> 
> 赞同：7
> 
> 时间：2012-04-16T00:35:42.537
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 Rails 3.2.2 并希望以递归方式加载某个目录中的所有代码。例如：

```
[Rails root]/lib/my_lib/my_lib.rb
[Rails root]/lib/my_lib/subdir/support_file_00.rb
[Rails root]/lib/my_lib/subdir/support_file_01.rb
... 
```

基于谷歌搜索，我试过：

```
config.autoload_paths += ["#{Rails.root.to_s}/lib/my_lib/**"]
config.autoload_paths += ["#{Rails.root.to_s}/lib/my_lib/**/"]
config.autoload_paths += ["#{Rails.root.to_s}/lib/my_lib/**/*"]
config.autoload_paths += ["#{Rails.root.to_s}/lib/my_lib/{**}"]
config.autoload_paths += ["#{Rails.root.to_s}/lib/my_lib/{**}/"] 
```

这些都没有加载任何代码，我得到“未初始化的常量”错误。

这将文件直接加载到 中`/my_lib/`，但不加载子目录：

```
config.autoload_paths += ["#{Rails.root.to_s}/lib/my_lib"] 
```

* * *

更新

感谢您的评论。

我把这个放在我的`application.rb`：

```
Dir["#{Rails.root.to_s}/lib/**/*.rb"].each { |file| config.autoload_paths += [file] } 
```

应用程序启动，但在我的库中声明的类不可用：

```
> MyClass
NameError: uninitialized constant MyClass 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T03:08:49.960

`autoload_paths`和朋友只有在给定文件或给定目录中的文件根据rails命名约定命名时才起作用。

例如，如果`some_class.rb`给定一个文件`autoload_paths`，它会期望该文件声明一个类`SomeClass`，并设置一些魔术来进行任何引用以`SomeClass`即时加载该文件。

因此，如果您想让它只在需要时加载每个文件，那么您必须相应地命名您的文件，并且每个类有一个文件。

如果您乐于在 rails 启动时加载目录树中的所有文件，您可以这样做：

```
Dir.glob("/path/to/my/lib/**/*.rb").each { |f| require f } 
```

以上将读取`.rb`中的每个文件`/path/to/my/lib`及其下的所有目录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-03T16:48:00.410

这是添加整个 lib 目录的一种更简单的方法，它不需要`.each`并且比其他答案感觉更直接

```
config.autoload_paths += Dir["#{config.root}/lib/**/"] 
```

请参阅[@Michael Slade 的回答](https://stackoverflow.com/a/10168273/2832282)，了解自动加载的作用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T01:15:34.957

自动加载路径必须是显式路径——它们不能包含文件 glob（通配符）。

因此，您必须先进行扩展：

```
Dir["#{Rails.root.to_s}/lib/my_lib/**/*.rb"].each do |path|
  config.autoload_paths += [path]
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T12:01:56.333

你也可以试试。

应用程序.rb：

```
 config.autoload_paths += %W( #{config.root}/app/model/super_model )
  config.autoload_paths += %W( #{config.root}/lib ) 
```

# java - Java - 为多个线程创建日志记录上下文

> ID：10167446
> 
> 赞同：1
> 
> 时间：2012-04-16T00:35:55.890
> 
> 标签：java, multithreading, logging

我目前正在研究事件/活动记录系统，我正在使用方法拦截器将其作为一个方面来实现。目前，系统/框架假设每个方法都是一个活动，但我想扩展它，以便一个活动可以跨越多个方法调用。为了做到这一点，想到的第一种方法是为所有相关的方法调用提供一些上下文。但是，如果所有方法调用都在单个线程的上下文中（如 Log4J 的 MDC/NDC），我只知道一种方法。有没有办法为多个线程提供上下文（可能没有代码知道多线程）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T08:49:20.040

不要考虑“记录”。它涉及更基本的东西：如果您希望多个线程完成的操作在同一上下文中处理，您传播什么让每个线程知道它们在哪个上下文中？

如果你能回答这个问题，那么这个上下文就是你需要在 MDC/NDC 中记录的内容（可能不是整个上下文，而是那个上下文中的一些关键信息）。

如果您的应用程序没有携带此类信息，那么任何人都无法为您确定。

* * *

编辑：

我可能会给你一些关于如何执行设置的想法。是否适合使用 AOP 进一步增强它，那是你进一步的研究:)

```
// Assume I have a ContextManager which Context is stored in thread local:

abstract class ContextAwaredJob implements Runnable {
  public ContextAwaredJob() {
    this.context = ContextManager.getCurrentContext();
  }
  public void run() {
    ContextManager.setCurrentContext(this.context);
    doRun();
  }
  protected abstract void doRun();
} 
```

你的新“工作”将扩展这个父类，如果你正在由另一个线程运行它，上下文将自动设置。（当然，设计可以改进很多，但它可以让用户对正在发生的事情有基本的了解）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:16:01.920

类 ThreadLocal？这似乎实际上可能是 TLS 的有效且合理的用途 - 将 cotext 添加到已经存在的代码中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T04:23:26.700

我偶然发现了[InheritableThreadLocal](http://docs.oracle.com/javase/6/docs/api/java/lang/InheritableThreadLocal.html)，我认为它适用于我的代码。这是假设所有相关线程都是从某个父/根线程产生的（我认为这是一个安全的假设）。

# c# - 使用 ValueInjecter 展平对象，包括可为空的类型

> ID：10167447
> 
> 赞同：4
> 
> 时间：2012-04-16T00:35:56.260
> 
> 标签：c#, automapper, valueinjecter

我正在尝试使用 ValueInjector 来展平一个类，并让它也跨值从`Nullable<int>'s`to复制`int`。

例如，给定以下（人为的）类：

```
class CustomerObject
{
    public int CustomerID { get; set; }
    public string CustomerName { get; set; }
    public OrderObject OrderOne { get; set; }
}

class OrderObject
{
    public int OrderID { get; set; }
    public string OrderName { get; set; }
}

class CustomerDTO
{
    public int? CustomerID { get; set; }
    public string CustomerName { get; set; }
    public int? OrderOneOrderID { get; set; }
    public string OrderOneOrderName { get; set; }
} 
```

我想将 CustomerObject 的一个实例展平为一个 CustomerDTO，它忽略了 CustomerID 和 OrderID 是不同类型的事实（一个是可以为空的，一个不是）。

所以我想这样做：

```
CustomerObject co = new CustomerObject() { CustomerID = 1, CustomerName = "John Smith" };
co.OrderOne = new OrderObject() { OrderID = 2, OrderName = "test order" };

CustomerDTO customer = new CustomerDTO();
customer.InjectFrom<>(co); 
```

然后填充所有属性，特别是：

```
customer.CustomerID 
customer.OrderOneOrderID 
customer.OrderOneOrderName 
```

我意识到我可以`FlatLoopValueInjection`用来展平对象，并且我正在使用这个 NullableInjection 类：

```
public class NullableInjection : ConventionInjection
{
    protected override bool Match(ConventionInfo c)
    {
        return c.SourceProp.Name == c.TargetProp.Name &&
                (c.SourceProp.Type == c.TargetProp.Type
                || c.SourceProp.Type == Nullable.GetUnderlyingType(c.TargetProp.Type)
                || (Nullable.GetUnderlyingType(c.SourceProp.Type) == c.TargetProp.Type
                        && c.SourceProp.Value != null)
                );
    }

    protected override object SetValue(ConventionInfo c)
    {
        return c.SourceProp.Value;
    }
} 
```

基本上我想将两者结合起来。这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T07:33:28.773

你可以通过重写 TypesMatch 方法来做到这一点：

```
 public class MyFlatInj : FlatLoopValueInjection
    {
        protected override bool TypesMatch(Type sourceType, Type targetType)
        {
            var snt = Nullable.GetUnderlyingType(sourceType);
            var tnt = Nullable.GetUnderlyingType(targetType);

            return sourceType == targetType
                   || sourceType == tnt
                   || targetType == snt
                   || snt == tnt;
        }
    } 
```

或者通过从源代码中获取 FlatLoopValueInjection 并根据需要进行编辑（大约 10 行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-16T17:55:08.633

ValueInjecter V3 移除了 FlatLoopValueInjection。以下是 Omu 答案的更新。

```
public class FlatLoopInjectionNullable : Omu.ValueInjecter.Injections.FlatLoopInjection
{
    protected override bool Match(string propName, PropertyInfo unflatProp, PropertyInfo targetFlatProp)
    {
        var snt = Nullable.GetUnderlyingType(unflatProp.PropertyType);
        var tnt = Nullable.GetUnderlyingType(targetFlatProp.PropertyType);

        return propName == unflatProp.Name
            && unflatProp.GetGetMethod() != null
            && (unflatProp.PropertyType == targetFlatProp.PropertyType
                || unflatProp.PropertyType == tnt
                || targetFlatProp.PropertyType == snt
                || (snt != null && snt == tnt));
    }
} 
```

像这样称呼它：

```
target.InjectFrom<ValueInjecterNullable>(source); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-02-04T11:40:05.810

```
// !!! THIS IS FOR LoopInjection not FlatLoopValueInjection !!!
public class NullableInjection : LoopInjection
{
    public NullableInjection() : base() { }

    public NullableInjection(string[] ignoredProps) : base(ignoredProps) { }

    protected override bool MatchTypes(Type source, Type target)
    {
        // This is the most likely scenario test for it first.
        bool result = source == target;
        // if not a type match then lets do more expensive tests.
        if (!result)
        {
            var snt = Nullable.GetUnderlyingType(source);
            var tnt = Nullable.GetUnderlyingType(target);

            // Make sure that underlying types have not reverted to null       
            // this will cause false positives.
            result = ((source == target)
                   || ((tnt != null) && source == tnt)
                   || ((snt != null) && target == snt)
                   || ((tnt != null) && snt == tnt));
        }
        return result;
    }
} 
```

# c# - 构建散点图类

> ID：10167449
> 
> 赞同：0
> 
> 时间：2012-04-16T00:36:16.607
> 
> 标签：c#, winforms

这是我认为应该在 C# 中构建散点图的方式（在相当高的抽象级别上）。

1.  创建空白图像
2.  使用 TextRenderer 绘制轴标签和刻度（水平不会那么简单，但仍然可以管理）。
3.  画一些线作为轴上的刻度线和轴本身的线
4.  根据某些数据集中列出的点画一些圆圈（不是 100% 的方法，但不能太难）。
5.  在图片框中显示图像。
6.  创建一个将在 MouseHover 上调用的函数，该函数将在工具提示中显示有关该点的一些详细信息。

这甚至有意义吗？我是否在工作中使用了错误的控件？.NET 中是否有一些代码已经可以完成大部分工作（图表类似乎只适用于条形图）？有没有办法从 C# 访问 excel 的绘图功能？

对我来说，所有这一切似乎都是做作的，我希望能提供有关如何更好地设计散点图类的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T06:36:46.540

[Microsoft 图表控件](http://msdn.microsoft.com/en-us/library/dd456632.aspx)库可以做的不仅仅是条形图。它包含在 .NET 4 框架中，但也可作为.NET 3.5 SP1的单独[下载获得。](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=14422)示例可[在此处](http://archive.msdn.microsoft.com/mschart)获得，并演示了大多数主要功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T02:47:19.093

不，这确实有道理。我真的不知道“专业人士”是如何做到的，但是当你需要一个快速的散点图时，你会怎么做。需要记住的一些事项：

*   您希望 Draw() 方法位于顶部并获取数据点的转换坐标。这是因为您最终会想要缩放和平移。从 3D 图形编程中获取一页并仅使用显式转换矩阵（XNA 中有一些）可能会为您节省很多麻烦。
*   您可能希望有一个通用的“绘制点”函数，它调用专门的子例程来绘制单个点，因此您可以轻松地在不同类型的点（十字、圆形、圆点、正方形、菱形等）之间切换。还有颜色。
*   您打算如何处理大量数据点？根据我的经验，这很快就会使一个考虑不周的 Chart API 陷入停顿。

# java - LinkedList Java 遍历打印

> ID：10167450
> 
> 赞同：2
> 
> 时间：2012-04-16T00:36:26.770
> 
> 标签：java, list, linked-list

如果您能帮助回答这个问题，我将不胜感激：

我已经使用 Java 以非常标准的方式自己创建了一个自定义链表。以下是我的课程：

```
public class Node {

   private Object obj;
   private Node next;

   public Node(Object obj){
       this(obj,null);
   }

   public Node(Object obj,Node n){
       this.obj = obj;
       next = n;
   }

   public void setData(Object obj){
       this.obj = obj;
   }

   public void setNext(Node n){
       next = n;
   }

   public Object getData(){
       return obj;
   }

   public Node getNext(){
       return next;
   }

}

public class linkedList {
    private Node head;

    public linkedList(){
        head = null;
    }

    public void setHead(Node n){
        head = n;
    }

    public Node getHead(){
        return head;
    }

   public void add(Object obj){
       if(getHead() == null){
           Node tmp = new Node(obj);
           tmp.setNext(getHead());
           setHead(tmp);
       }else{
           add(getHead(),obj);
       }
   }

   private void add(Node cur,Object obj){
       if(cur.getNext() == null){
           Node tmp = new Node(obj);
           tmp.setNext(cur.getNext());
           cur.setNext(tmp);
       }else{
           add(cur.getNext(),obj);
       }
   }

} 
```

我试图打印我插入到列表中的值，如下所示

```
public static void main(String[] args) {
        // TODO code application logic here
        Node l = new Node("ant");
        Node rat = new Node("rat");
        Node bat = new Node("bat");
        Node hrs = new Node("hrs");

        linkedList lst = new linkedList();
        lst.add(l);
        lst.add(rat);
        lst.add(bat);
        lst.add(hrs);

        Node tmp = lst.getHead();
        while(tmp != null){

            System.out.println(tmp.getData());
            tmp = tmp.getNext();

        }

    } 
```

但我从 IDE 得到的输出是

```
linklist.Node@137bd6a1
linklist.Node@2747ee05
linklist.Node@635b9e68
linklist.Node@13fcf0ce 
```

为什么它打印出引用而不是字符串的实际值，例如 bat,ant,rat... ？

如果我想打印出实际值，我该怎么办？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T00:53:37.140

您的`linkedList`班级已经`Node`为您创建了 s！

```
linkedList list = new linkedList();
list.add("foo");
list.add("bar");
Node tmp = lst.getHead();
while(tmp != null){
    System.out.println(tmp.getData());
    tmp = tmp.getNext();
} 
```

将打印

```
foo
bar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T00:41:28.437

您需要覆盖以下`toString()`方法`Node`：

```
@Override
String toString() {
  String val = // however you want to represent your Node
  return val;
} 
```

并打印节点：

```
System.out.println(tmp); 
```

或者，如果您知道您只打算存储s ，则`Node.getData()`返回 a -在定义中将s更改为`String``String``Object``String``Node`

或者，您可以使用泛型来指定节点内的数据类型

更新：经过更多思考（由评论引起），我发现有些不对劲：

`tmp.getData()`应该返回一个字符串（基于 Node 的单个参数 ctor 并且您正在传递字符串），但输出是关于对`Node`对象的引用。是否有可能将的 obj 成员`linkedList.add`重新设置为 a ？`Node``Node`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T00:41:03.603

LinkedList 是 Objects 的，Objects toString 方法打印出引用。如果您想打印出字符串，您可以将 LinkedList 更改为 String/Generics 或将打印输出如下：

```
String output = (String)tmp.getData();
System.out.println(output); 
```

（如果需要，您可以在一行中执行此操作）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-07T15:44:08.657

Node 类中的 getData() 返回一个 Object 类型。您需要将其转换为字符串，以便 println() 正确打印它。

System.out.println((String)tmp.getData());

应该为您解决问题。

# xcode - 如何对基于视图的表进行排序？

> ID：10167452
> 
> 赞同：4
> 
> 时间：2012-04-16T00:36:44.097
> 
> 标签：xcode, macos, cocoa, sorting

我有一个基于单元格的表格，通过数组控制器绑定到一个核心数据实体，其中包含一个日期字段和一个显示日期的列，所有这些都是在 InterfaceBuilder 中创建的，没有任何编码。我可以单击列标题以获取按日期排序的数据，而无需任何编码甚至任何进一步的绑定。对于基于视图的表，如何获得这种行为？我必须求助于一些编码吗？

日期显示在绑定到 Table Cell View 的文本字段中，键为 objectValue.date。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T20:59:47.853

也许没有人在使用这些新奇的基于视图的表格，或者也许你们都一头雾水。三周后，我偶然发现了一个解决方案，不是完全无代码，它对我有用，所以我想我最好分享一下。

秘密是表的*排序描述符*绑定，您必须将其绑定到*NSSortDescriptors**数组*。事后看来很明显。道德：试着理解锡上的内容！我天真地认为这是我可以*定义*排序描述符或绑定到某个可排序对象的地方，Interface Builder 是设计时的东西。当然没有任何效果。继续这个例子，这里是做什么。

 **声明一个数组属性。我在我的应用程序委托中做到了这一点。

```
@property (assign) NSArray *dateSorters; 
```

并合成它。在 OS 10.7 中，您不需要匹配的 ivar。初始化它。我在`applicationDidFinishLaunching:`

```
dateSorters = [NSArray arrayWithObject:
    [[NSSortDescriptor alloc] initWithKey:@"date" ascending:NO]]; 
```

那是唯一的活动代码行。现在是绑定。*使用模型键路径dateSorters*将您的数组控制器的排序描述符绑定到您的应用程序委托。如果它没有出现在可能的列表中，请尝试构建。该表现在将显示为已排序。要使单击列标题起作用，您必须将*表的*排序描述符绑定到同一个数组，并且必须将列与日期字段相关联：选择日期列，将其值绑定到数组控制器，排列对象与模型Key Path *date*，并检查*Creates Sort Descriptor*. 这与您对基于单元格的表格所做的相同。单击日期列标题现在可以切换排序顺序。按预期单击其他列标题不会执行任何操作。

剩下的一个小问题 - 在第一次出现时，该表未排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-13T15:12:26.720

确保将表的排序描述符绑定到数组控制器的`sortDescriptors`属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T20:42:34.537

这有点晚了，但您不必编写任何代码行。相反，转到列的属性检查器，并将“排序键”字段设置为“日期”（不带引号）。选择器字段将自动设置为“比较”。

编辑：事实证明你甚至不必这样做。将表格列的值绑定到您希望对行进行排序的属性，就像对基于单元格的表格一样，就是这样。这样，您就不会将整个表格内容绑定到数组控制器的排列对象，这与 Apple 关于基于视图的表格的指南相矛盾。至少当我第一次创建和绑定基于单元格的表格时它对我有用，然后我将其转换为基于视图的表格（在属性检查器中，Xcode 4.5.2，OS X 10.7.5）。我尝试从基于视图的表开始，然后绑定列，但排序不起作用（这可能只是我做的一些错误）。**

# javascript - 我在 iframe 中收到未定义错误

> ID：10167460
> 
> 赞同：4
> 
> 时间：2012-04-16T00:38:06.053
> 
> 标签：javascript, jquery

我在下面有一个 iframe：

```
<iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'></iframe> 
```

我试图停止下面的命令，但我不断收到未定义的错误：

```
$('.upload_target').contentwindow is undefined 
```

我该如何解决这个未定义的错误？

下面是代码：

```
 $(".uploadbutton").click(function() {
          $(".upload_target").contentWindow.stop(); //for anything but IE
          $(".upload_target").contentWindow.document.execCommand("Stop"); // for IE
  return stopImageUpload(); 
```

});

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T00:49:54.817

你得到`undefined`是因为`contentWindow`它是原生 Javascript 并且你在一个 jQuery 集合上使用它，它没有`contentWindow`作为一个值。您必须首先获取原始 DOM 对象。改为这样做：

```
$('.upload_target').get(0).contentWindow 
```

# c# - c#中的CRC-ITU计算

> ID：10167461
> 
> 赞同：4
> 
> 时间：2012-04-16T00:38:13.820
> 
> 标签：c#, gps, crc16

我是 C# 的新手。我需要为从 GPS 设备接收到的数据包计算 CRC-ITU。文档中提供了 C 代码，但我不知道如何将其移植到 C#，任何人都可以帮助我吗？

这是 C 中的 CRC-ITU 算法：

```
static const U16 crctab16[] = 
{
    0x0000, 0x1189, 0x2312, 0x329b, 0x4624, 0x57ad, 0x6536, 0x74bf,
    0x8c48, 0x9dc1, 0xaf5a, 0xbed3, 0xca6c, 0xdbe5, 0xe97e, 0xf8f7,
    0x1081, 0x0108, 0x3393, 0x221a, 0x56a5, 0x472c, 0x75b7, 0x643e,
    0x9cc9, 0x8d40, 0xbfdb, 0xae52, 0xdaed, 0xcb64, 0xf9ff, 0xe876,
    0x2102, 0x308b, 0x0210, 0x1399, 0x6726, 0x76af, 0x4434, 0x55bd,
    0xad4a, 0xbcc3, 0x8e58, 0x9fd1, 0xeb6e, 0xfae7, 0xc87c, 0xd9f5,
    0x3183, 0x200a, 0x1291, 0x0318, 0x77a7, 0x662e, 0x54b5, 0x453c,
    0xbdcb, 0xac42, 0x9ed9, 0x8f50, 0xfbef, 0xea66, 0xd8fd, 0xc974,
    0x4204, 0x538d, 0x6116, 0x709f, 0x0420, 0x15a9, 0x2732, 0x36bb,
    0xce4c, 0xdfc5, 0xed5e, 0xfcd7, 0x8868, 0x99e1, 0xab7a, 0xbaf3,
    0x5285, 0x430c, 0x7197, 0x601e, 0x14a1, 0x0528, 0x37b3, 0x263a,
    0xdecd, 0xcf44, 0xfddf, 0xec56, 0x98e9, 0x8960, 0xbbfb, 0xaa72,
    0x6306, 0x728f, 0x4014, 0x519d, 0x2522, 0x34ab, 0x0630, 0x17b9,
    0xef4e, 0xfec7, 0xcc5c, 0xddd5, 0xa96a, 0xb8e3, 0x8a78, 0x9bf1,
    0x7387, 0x620e, 0x5095, 0x411c, 0x35a3, 0x242a, 0x16b1, 0x0738,
    0xffcf, 0xee46, 0xdcdd, 0xcd54, 0xb9eb, 0xa862, 0x9af9, 0x8b70,
    0x8408, 0x9581, 0xa71a, 0xb693, 0xc22c, 0xd3a5, 0xe13e, 0xf0b7,
    0x0840, 0x19c9, 0x2b52, 0x3adb, 0x4e64, 0x5fed, 0x6d76, 0x7cff,
    0x9489, 0x8500, 0xb79b, 0xa612, 0xd2ad, 0xc324, 0xf1bf, 0xe036,
    0x18c1, 0x0948, 0x3bd3, 0x2a5a, 0x5ee5, 0x4f6c, 0x7df7, 0x6c7e,
    0xa50a, 0xb483, 0x8618, 0x9791, 0xe32e, 0xf2a7, 0xc03c, 0xd1b5,
    0x2942, 0x38cb, 0x0a50, 0x1bd9, 0x6f66, 0x7eef, 0x4c74, 0x5dfd,
    0xb58b, 0xa402, 0x9699, 0x8710, 0xf3af, 0xe226, 0xd0bd, 0xc134,
    0x39c3, 0x284a, 0x1ad1, 0x0b58, 0x7fe7, 0x6e6e, 0x5cf5, 0x4d7c,
    0xc60c, 0xd785, 0xe51e, 0xf497, 0x8028, 0x91a1, 0xa33a, 0xb2b3,
    0x4a44, 0x5bcd, 0x6956, 0x78df, 0x0c60, 0x1de9, 0x2f72, 0x3efb,
    0xd68d, 0xc704, 0xf59f, 0xe416, 0x90a9, 0x8120, 0xb3bb, 0xa232,
    0x5ac5, 0x4b4c, 0x79d7, 0x685e, 0x1ce1, 0x0d68, 0x3ff3, 0x2e7a,
    0xe70e, 0xf687, 0xc41c, 0xd595, 0xa12a, 0xb0a3, 0x8238, 0x93b1,
    0x6b46, 0x7acf, 0x4854, 0x59dd, 0x2d62, 0x3ceb, 0x0e70, 0x1ff9,
    0xf78f, 0xe606, 0xd49d, 0xc514, 0xb1ab, 0xa022, 0x92b9, 0x8330,
    0x7bc7, 0x6a4e, 0x58d5, 0x495c, 0x3de3, 0x2c6a, 0x1ef1, 0x0f78,
};

    // calculate 16 bits CRC of the given length data.
U16 GetCrc16(const U8* pData, int nLength)
{
U16 fcs = 0xffff; // Initialize

while(nLength>0){
fcs = (fcs >> 8) ^ crctab16[(fcs ^ *pData) & 0xff];
nLength--;
pData++;
}
return ~fcs; // Negate
}

// Check whether the 16 bits CRC of the given length data is right.
 BOOL IsCrc16Good(const U8* pData, int nLength)
{
    U16 fcs = 0xffff;    // Initialize
    while(nLength>0){
        fcs = (fcs >> 8) ^ crctab16[(fcs ^ *pData) & 0xff];
        nLength--;
        pData++;
    }
    return (fcs == 0xf0b8);  // 0xf0b8 is CRC-ITU的"Magic Value"
} 
```

我还从[http://ppcode.blogbus.com/logs/1656947.html](http://ppcode.blogbus.com/logs/1656947.html)找到了 C# 代码，但我不知道如何使用它，这是代码

```
public class CrcITUTable
 {
  static ushort [] crctab16 =
   {
    0x0000, 0x1189, 0x2312, 0x329b, 0x4624, 0x57ad, 0x6536, 0x74bf,
    0x8c48, 0x9dc1, 0xaf5a, 0xbed3, 0xca6c, 0xdbe5, 0xe97e, 0xf8f7,
    0x1081, 0x0108, 0x3393, 0x221a, 0x56a5, 0x472c, 0x75b7, 0x643e,
    0x9cc9, 0x8d40, 0xbfdb, 0xae52, 0xdaed, 0xcb64, 0xf9ff, 0xe876,
    0x2102, 0x308b, 0x0210, 0x1399, 0x6726, 0x76af, 0x4434, 0x55bd,
    0xad4a, 0xbcc3, 0x8e58, 0x9fd1, 0xeb6e, 0xfae7, 0xc87c, 0xd9f5,
    0x3183, 0x200a, 0x1291, 0x0318, 0x77a7, 0x662e, 0x54b5, 0x453c,
    0xbdcb, 0xac42, 0x9ed9, 0x8f50, 0xfbef, 0xea66, 0xd8fd, 0xc974,
    0x4204, 0x538d, 0x6116, 0x709f, 0x0420, 0x15a9, 0x2732, 0x36bb,
    0xce4c, 0xdfc5, 0xed5e, 0xfcd7, 0x8868, 0x99e1, 0xab7a, 0xbaf3,
    0x5285, 0x430c, 0x7197, 0x601e, 0x14a1, 0x0528, 0x37b3, 0x263a,
    0xdecd, 0xcf44, 0xfddf, 0xec56, 0x98e9, 0x8960, 0xbbfb, 0xaa72,
    0x6306, 0x728f, 0x4014, 0x519d, 0x2522, 0x34ab, 0x0630, 0x17b9,
    0xef4e, 0xfec7, 0xcc5c, 0xddd5, 0xa96a, 0xb8e3, 0x8a78, 0x9bf1,
    0x7387, 0x620e, 0x5095, 0x411c, 0x35a3, 0x242a, 0x16b1, 0x0738,
    0xffcf, 0xee46, 0xdcdd, 0xcd54, 0xb9eb, 0xa862, 0x9af9, 0x8b70,
    0x8408, 0x9581, 0xa71a, 0xb693, 0xc22c, 0xd3a5, 0xe13e, 0xf0b7,
    0x0840, 0x19c9, 0x2b52, 0x3adb, 0x4e64, 0x5fed, 0x6d76, 0x7cff,
    0x9489, 0x8500, 0xb79b, 0xa612, 0xd2ad, 0xc324, 0xf1bf, 0xe036,
    0x18c1, 0x0948, 0x3bd3, 0x2a5a, 0x5ee5, 0x4f6c, 0x7df7, 0x6c7e,
    0xa50a, 0xb483, 0x8618, 0x9791, 0xe32e, 0xf2a7, 0xc03c, 0xd1b5,
    0x2942, 0x38cb, 0x0a50, 0x1bd9, 0x6f66, 0x7eef, 0x4c74, 0x5dfd,
    0xb58b, 0xa402, 0x9699, 0x8710, 0xf3af, 0xe226, 0xd0bd, 0xc134,
    0x39c3, 0x284a, 0x1ad1, 0x0b58, 0x7fe7, 0x6e6e, 0x5cf5, 0x4d7c,
    0xc60c, 0xd785, 0xe51e, 0xf497, 0x8028, 0x91a1, 0xa33a, 0xb2b3,
    0x4a44, 0x5bcd, 0x6956, 0x78df, 0x0c60, 0x1de9, 0x2f72, 0x3efb,
    0xd68d, 0xc704, 0xf59f, 0xe416, 0x90a9, 0x8120, 0xb3bb, 0xa232,
    0x5ac5, 0x4b4c, 0x79d7, 0x685e, 0x1ce1, 0x0d68, 0x3ff3, 0x2e7a,
    0xe70e, 0xf687, 0xc41c, 0xd595, 0xa12a, 0xb0a3, 0x8238, 0x93b1,
    0x6b46, 0x7acf, 0x4854, 0x59dd, 0x2d62, 0x3ceb, 0x0e70, 0x1ff9,
    0xf78f, 0xe606, 0xd49d, 0xc514, 0xb1ab, 0xa022, 0x92b9, 0x8330,
    0x7bc7, 0x6a4e, 0x58d5, 0x495c, 0x3de3, 0x2c6a, 0x1ef1, 0x0f78,
   };

  public CrcITUTable()
  {
   //
   // TODO: 在此处添加构造函数逻辑
   //
  }

  unsafe public ushort GetCrcITU_T(byte * pData,int nLength,out string crcCode)
  {
   ushort fcs=0xFFFF;
   ushort uRlt;
   string strTmp;
   while(nLength>0)
   {
    fcs= (ushort) ((ushort)(fcs>>8)^ crctab16[(fcs ^ *pData) &0xFF ]);
    nLength--;
    pData++;
   }

   uRlt=(ushort)~fcs;
   strTmp=uRlt.ToString("X4") ;
   crcCode=strTmp.Substring(2,2) + " " + strTmp.Substring(0,2);

   return uRlt;
  }

  unsafe public bool IsCrcITUGood_T(byte * pData,int nLength)
  {
   ushort fcs=0xFFFF;
   while(nLength>0)
   {
    fcs= (ushort) ((ushort)(fcs>>8)^ crctab16[(fcs ^ *pData) &0xFF ]);
    nLength--;
    pData++;
   }

   return (fcs==0xF0B8);
  }

 } 
```

这是文档中的一些示例：

完整数据包：0x78 0x78 0x0D 0x01 0x01 0x23 0x45 0x67 0x89 0x01 0x23 0x45 0x00 0x01 0x8C 0xDD 0x0D 0x0A

起始位：0x78 0x78 长度：0x0D 协议号：0x01 设备 ID：0x01 0x23 0x45 0x67 0x89 0x01 0x23 0x45 序列号：0x00 0x01 CRC 校验：0x8C 0xDD 停止位：0x0D 0x0A

从文档中引用：

设备或服务器可以通过识别码判断接收到的数据的准确性。有时，由于电子噪声或其他干扰，数据在传输过程中会发生一些变化。在这种情况下，识别代码可以确保核心或关联核心对此类错误数据不做任何事情，这将增强系统的安全性和效率。该识别码采用CRC-ITU识别方法。CRC-ITU值是协议中从“Package Length”到“Information Serial Number”（包括“Package Length”和“Information Serial Number”），如果接收方接收到CRC错误的计算信息，则忽略并丢弃该数据包裹。

所以有人知道如何从上面的例子中获得 crc 值吗？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T20:53:37.227

只需按照文档的说明进行操作

> CRC-ITU值是协议中的“Package Length”到“Information Serial Number”（包括“Package Length”和“Information Serial Number”）。

所以我们把数据从长度取到序列号

```
0x0D 0x01 0x01 0x23 0x45 0x67 0x89 0x01 0x23 0x45 0x00 0x01 
```

现在我们使用这组数字并将其传递给 CRC 函数。您链接的代码使用了不安全的指针，我不知道您是否需要它们，因为您没有发布任何使用它的地方。如果你有一个字节数组中的数据，你可以重写函数只传递字节数组而不是指针，那么代码将不再需要被标记为不安全。

这是我使用字节的清理版本

```
static void Main(string[] args)
{
    byte[] dataPacket = { 0x78, 0x78, 0x0D, 0x01, 0x01, 0x23, 0x45, 0x67, 0x89, 0x01, 0x23, 0x45, 0x00, 0x01, 0x8C, 0xDD, 0x0D, 0x0A };
    var crc16 = GetCrc16(dataPacket, 2, 12);

    if (crc16 == ReadBigEndianUInt16(dataPacket, 14)))
    {
        Debugger.Break();
        //use packet.
    }

    Debugger.Break();
}

public static UInt16 ReadBigEndianUInt16(byte[] data, int offset)
{
    if(BitConverter.IsLittleEndian == true)
    {
        var bytes = new byte[2] {data[offset+1], data[offset]}            
        return BitConverter.ToUInt16(bytes, 0);
    }
    else
    {
         return BitConverter.ToUInt16(data, offset);
    }
}

public static ushort GetCrc16(byte[] data, int offset, int length)
{
    ushort fcs = 0xFFFF;
    for (int i = offset; i < length + offset; i++)
    {
        fcs = (ushort)((ushort)(fcs >> 8) ^ crctab16[(fcs ^ data[i]) & 0xFF]);
    }

    return (ushort)(~fcs);
}

public static bool IsCrcITUGood(byte[] data, int offset, int length)
{
    ushort fcs = 0xFFFF;
    for (int i = offset; i < length + offset; i++)
    {
        fcs = (ushort)((ushort)(fcs >> 8) ^ crctab16[(fcs ^ data[i]) & 0xFF]);
    }

    return (fcs == 0xF0B8); //magic value
}

static ushort[] crctab16 = /*(snip)*/; 
```

看来数据包中的 CRC 以大端存储，而 C# 代码将产生小端。因此，在比较它们之前，您需要翻转 CRC 的两个字节。

* * *

作为旁注，我认为该`IsCrcITUGood`方法不是来自 gps 规范。我认为无论您从中提取此代码示例，都有一组特殊的字节来使 CRC 始终相等`0xF0B8`。在您的数据中，它为您提供了预期的 CRC 值。我找不到使 CRC 相等的方法`0xF0B8`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-25T07:11:10.390

发现很少有关于 CRC 16 计算的链接，但发现 javascript 中的[SO 答案](https://stackoverflow.com/a/20872042/2952062)之一很有帮助。

如果有人正在使用 python 寻找相同的 CRC 16 计算，请创建公共要点以及工作 python fiddle 示例：

[https://gist.github.com/mrudang-vora/6a0767be085a275c0df3](https://gist.github.com/mrudang-vora/6a0767be085a275c0df3)

希望它可以帮助某人。

# python - 使用 pyglet 同时移动多个精灵相同的距离

> ID：10167463
> 
> 赞同：0
> 
> 时间：2012-04-16T00:38:45.797
> 
> 标签：python, sprite, pyglet

我知道如何使用批次同时绘制它们，但我想知道是否有办法一次移动整个批次。我需要单独移动所有精灵吗？

到目前为止，我一直在这样做：

```
tile2 =pyglet.sprite.Sprite(tile1,0,0,batch = terrain)
tile3 =pyglet.sprite.Sprite(tile1,10,0,batch = terrain)
tile4 =pyglet.sprite.Sprite(tile1,20,0,batch = terrain)
tile5 =pyglet.sprite.Sprite(tile1,30,0,batch = terrain)
tile6 =pyglet.sprite.Sprite(tile1,40,0,batch = terrain)
tile7 =pyglet.sprite.Sprite(tile1,50,0,batch = terrain)

tile2.x += 10
tile3.x += 10
tile4.x += 10 
```

ETC...

但是在成品中会有比这更多的精灵（我希望有 50 多个），移动它们会很烦人。

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T00:47:37.593

您可能希望将对象存储在适当的数据结构中，例如[list](http://docs.python.org/library/functions.html#list)：

```
tiles = []
tiles.append(pyglet.sprite.Sprite(tile1,0,0,batch = terrain))
tiles.append(pyglet.sprite.Sprite(tile1,10,0,batch = terrain))
... 
```

列表包含一系列项目，可以单独访问（`tiles[0], tiles[1]`）或循环访问（`for tile in tiles:`）。该列表可以更改长度，并允许您更改您拥有的瓷砖数量，而无需对大量变量进行硬编码。

然而，这是一种非常冗长的方法，更好的方法是使用循环：

```
tiles = []
for x in range(0, 51, 10):
    tiles.append(pyglet.sprite.Sprite(tile1, x, 0, batch = terrain)) 
```

在这里，我们循环了一系列数字（从 0 到 51，步长为 10 - 注意使用 51，而不是 50 - python 停止在最后一个值上，而不是在它之后，因此`range(0, 50, 10)`将以 10 为步长产生 0 到 40。） ，创建一个图块并将其添加到我们的列表中。请注意，如果您使用的是 3.x 之前的 Python 版本，[`xrange()`](http://docs.python.org/library/functions.html#xrange)它将比[`range()`](http://docs.python.org/library/functions.html#range)返回[生成器](http://docs.python.org/tutorial/classes.html#generators)而不是列表更快。在 Python 3.x 中，这是范围的行为。

但是 Python 可以更加优雅，使用[列表推导](https://www.youtube.com/watch?v=t85uBptTDYY)式轻松创建列表：

```
tiles = [pyglet.sprite.Sprite(tile1, x, 0, batch = terrain) for x in range(0, 51, 10)] 
```

然后为了移动它们，我们循环遍历列表，同时移动每一个：

```
for tile in tiles:
    tile.x += 10 
```

一般来说，做`x1`, `x2`, `x3`, ... 是有问题的标志——使用适当的数据结构将帮助您减少打字，并使您的代码更灵活。考虑这一点的一个好方法是，如果您正在复制和粘贴某些内容，那么可能会将该代码重构为可重用的函数，或者使用循环在多个项目上执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:59:07.993

我没有足够的声誉来评论 Lattyware 的答案，这是完美的，但我想说：因为你似乎是 python/pyglet 的新手，你可以看看 cocos2d。它建立在 pyglet 之上（您所学到的一切仍然是正确的）并具有一些不错的功能，例如您正在寻找的功能。在 cocos2d 中，您将精灵添加到一个批次中，您可以移动该批次及其所有子项。如果这就是您要查找的内容，您还可以使用 scrollingLayers ...

# meteor - Meteor - 使用集合中的文档渲染模板

> ID：10167464
> 
> 赞同：2
> 
> 时间：2012-04-16T00:39:03.120
> 
> 标签：meteor

基本上，我只是尝试`result`使用 MongoDB find() 调用返回的文档属性来呈现模板。我有自动订阅。

我有一个 html 模板

```
<template name="results">
    status: {{result}}
</template> 
```

我正在尝试在 js 文件中呈现它：

```
if (Meteor.is_client) {
    Template.results.result = function() {
        return Results.find({'type': 'test'}).fetch()[0].result;
    }
} 
```

mongo 中有记录`{type: "test", result: "success"}`。代码不断抛出“未定义没有属性结果”的错误。但是，当我返回时`Results.find({'type': 'test'}).fetch()[0]`，它确实返回了一个对象，而不是未定义的（如果我将它记录到控制台，我可以看到它确实具有`result`我设置的属性）。

我唯一能想到的是它可能与流星的反应行为有关——也许 MongoDB 调用最初返回未定义，然后更新以包含正确的文档。那是对的吗？如果是这样，我怎样才能获得该`result`文档的属性值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T00:48:38.520

客户端启动后，您的模板会在服务器在结果中发送文档之前立即呈现。试试这个（`findOne`是 的简写`fetch()[0]`）：

```
Template.results.result = function() {
    var obj = Results.findOne({'type' : 'test'});
    return obj && obj.result;
} 
```

# class - 在 PHP 类中访问（某些类的）变量

> ID：10167467
> 
> 赞同：0
> 
> 时间：2012-04-16T00:39:30.810
> 
> 标签：class, variables, object, types, casting

我实现了一个这样的类：

```
class ClassRoom
{
  public $desired_connection;  // variable of type DesiredConnection

  //Constructor
  public function __contruct()
  {
    $this->desired_connection = new DesiredConnection(); //Initialize
  }

  public function save(){   
    //Save Desired Connection
    $this->desired_connection->saveDesiredConnection();  
  }
} 
```

在调用 $classroom->save() 时，运行时不会将 $this->desired_connection 识别为 DesiredConnection 对象并抛出此错误：

“在非对象上调用成员函数 save()。”

当我输出 gettype($classroom->desired_connection) 时，它输出 NULL。

关于我在这里可能做错的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:49:39.780

确保您的`__construct`函数命名正确：

```
public function __construct() {
  // ...
} 
```

PHP 只会识别与其正在寻找的名称相匹配的魔法函数！

# css - 有没有办法直接链接到这个 JS/CSS 页面上的特定内容？

> ID：10167468
> 
> 赞同：0
> 
> 时间：2012-04-16T00:39:34.983
> 
> 标签：css, jscript

我想链接到 JS/CSS 页面上的特定照片库。

如果您访问 witold.org ->“显示所有照片系列”->“印度路标”，则会加载照片库。

有没有办法直接链接到这个画廊，以避免从主页点击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T00:48:13.747

不。

您要求的是大规模的安全违规行为。您基本上是在尝试通过调用此函数来设置页面的当前状态：`changeContent('series',10,'inrroadsigns');`来自 url。

重复的问题：[将 javascript 插入 URL 的方法？](https://stackoverflow.com/q/705533/1026459)

# jquery - JQuery在悬停时隐藏/显示播放列表

> ID：10167470
> 
> 赞同：1
> 
> 时间：2012-04-16T00:39:37.987
> 
> 标签：jquery

我正在做一个有播放器和播放列表的项目。现在我想在播放器本身悬停时显示/隐藏播放列表。到目前为止，我可以在将鼠标悬停在链接上时隐藏/显示播放列表。我还延迟了播放列表的淡出，但问题是如果光标在播放列表本身上，我希望命令停止。然后，当您将鼠标移出时，它应该会消失。看看现在发生了什么[http://cpanel12.proisp.no/~annaryuh/player/annar.htm](http://cpanel12.proisp.no/~annaryuh/player/annar.htm)。

这是我现在拥有的脚本：

```
$(document).ready(function(){

    $(".jp-playlist").hide();
    $(".show_hide").show();

    $('.show_hide').hover(function(){
        jQuery('.jp-playlist').delay(200).fadeIn();
        }, function() {
        jQuery('.jp-playlist').delay(1000).fadeOut();  
    });

}); 
```

这是测试页面的链接： http: [//cpanel12.proisp.no/~annaryuh/player/annar.htm](http://cpanel12.proisp.no/~annaryuh/player/annar.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T00:48:16.080

做

```
$('#jp_player_1').hover({...}); 
```

不行？

此外，如果您使用的是 jQuery 1.7+，请使用

```
$('#jp_player_1').on({
    mouseenter: function(){...},
    mouseleave: function(){...}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T00:53:20.920

使用 setTimeout 函数。

```
var fadeOutFunction;
var fadeInFunction;

$(document).ready(function(){

    $(".jp-playlist").hide();
    $(".show_hide").show();

    $('.show_hide').hover(function(){
        clearTimeout(fadeOutFunction);
        fadeInFunction = setTimeout(function(){jQuery('.jp-playlist').fadeIn(); },200);
        }, function() {
        clearTimeout(fadeInFunction);
        fadeInFunction = setTimeout(function(){jQuery('.jp-playlist').fadeOut();}, 1000);  
    });

}); 
```

并且，如果您希望在光标位于播放列表本身时停止命令，只需为播放列表 onhover 事件添加 clearTimeout。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T01:02:31.547

我想我明白你想要什么，链接打开和关闭播放列表，将鼠标移出盒子会关闭它。

请试试：

[http://jsfiddle.net/YupEe/5/](http://jsfiddle.net/YupEe/5/)

# jquery-mobile - 如何使用 jquerymobile 初始化 WL

> ID：10167473
> 
> 赞同：0
> 
> 时间：2012-04-16T00:40:09.040
> 
> 标签：jquery-mobile, windows-live-id

我正在尝试将 JQuery Mobile 与 Windows Live Connect 结合起来。

如果我触发我的初始化代码`$().ready(function() { ... });`并用浏览器查看它，那么它就可以工作。

如果我尝试使用调试器，那么 Visual Studio 会陷入循环依赖，无休止地为我的页面和 Live Connect 登录页面加载脚本，直到最后它出错。

![在此处输入图像描述](../Images/a0b51d11197dddbaf81076500640259c.png)

如果我从那里触发初始化代码，`$('#divname').live('pagebeforecreate', function (event) { ... });` 那么调试器就可以了，但页面不起作用。

任何人都可以提供有关将 JQM 与 WLC 结合使用的指导吗？一个带有登录按钮的工作示例页面，通过向列表视图动态添加一些项目来响应登录，这会让我欣喜若狂——到目前为止，这就是我想要实现的全部目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T03:54:21.693

经过多次尝试设置后，我终于有了一个可行的项目，但我仍在努力找出造成差异的原因。毫无疑问，这是初始化序列的一些微妙之处。当我确切地知道什么时，我将使用详细信息和带注释的示例更新此答案。

# php - 将字符串日期“2012 年 4 月 19 日星期四”转换为日期时间以进行操作

> ID：10167475
> 
> 赞同：0
> 
> 时间：2012-04-16T00:41:18.783
> 
> 标签：php, mysql, variables, date, field

我的表中有一个字段，其中包含表单中的字符串

```
"Thursday 19th April 2012" 
```

我将如何在 MYSQL 或 PHP 中进行更改，以便我可以执行操作并找到两个日期之间的差异？.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:48:42.790

以下是您可以在 PHP 端执行的操作（适用于 5.3 或更高版本）：-

一种）`$newDate = DateTime::createFromFormat("l dS F Y",$dateFromDB);`

（[http://php.net/manual/en/datetime.createfromformat.php](http://php.net/manual/en/datetime.createfromformat.php)）

b)`$interval = $newDate->diff($datetime2);`

(http://www.php.net/manual/en/datetime.diff.php)

[您可以在http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)查看日期字符串格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T00:47:40.280

在 php 中，您可以使用**strtotime**函数：

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

然后两个值相减的绝对值会给你以秒为单位的差异。

# debugging - 如何调试导致 100% cpu 使用的 node.js？

> ID：10167477
> 
> 赞同：48
> 
> 时间：2012-04-16T00:41:26.643
> 
> 标签：debugging, node.js, express

我有一个使用 express 和 redis 的节点应用程序。在我们的开发服务器上，经过一段时间的使用 node 开始使用 100% cpu。应用程序仍然响应，但顶部报告节点使用 100%。在重新启动节点之前，cpu 不会下降。

我没有将其确定为导致它的任何特定路线或功能。

诊断此问题的最佳方法是什么？

我用 v8-profiler 查看了节点检查器，它给了我这里报告的相同错误 [https://github.com/dannycoates/v8-profiler/issues/10](https://github.com/dannycoates/v8-profiler/issues/10)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-02-05T16:25:59.877

您可以使用[node-tick](https://github.com/sidorares/node-tick)分析您的应用程序。

1.  安装`node-tick`方式`sudo npm -g install tick`
2.  使用启用的配置文件运行您的应用程序`node --prof ./app.js`
3.  在 CPU 100% 使用一段时间后停止您的应用程序
4.  您可以在您的应用目录中看到 v8.log，现在您可以使用 node-tick-processor 读取它
5.  运行`node-tick-processor`并解释结果
6.  将 v8.log 加载到 chrome://tracing 以分析为树。

[节点 js cpu 100%](https://stackoverflow.com/questions/13375735/node-js-cpu-100/13376256#13376256)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-17T06:36:36.990

我通过编写脚本记录每个请求然后重放它们来发现问题。

问题是因为我有一个没有被返回的回调。

```
myAsncFunc(function(err, data) {

    if (err) { callback(err) }

    //node kept going after the error was returned to the user.
    // make sure you, return callback(err)

}) 
```

这是我的 replay.js 代码，供任何感兴趣的人使用。

```
var request = require('request');
var async = require('async');
var redis = require('redis');

var host = 'http://myhost.com';
var jobs = true;

var client = redis.createClient();

async.whilst(
    function () { return jobs; },
    function (callback) {
        client.lpop('history', function(err, url) {
            console.log(url);
            if (!url) {
                jobs = false;
                callback();
            }
            request.get({url:host+url}, function() {
                callback();
            });
        })
    },
    function (err) {
        console.log('done')
    }
); 
```

而在你是快递应用程序。

```
app.get('/*', function(req, res, next) {
    var url = req.originalUrl;
    redis.rpush('history', url);   
    next();
}); 
```

这很酷，因为播放的每个历史项目都会再次添加到队列中，因此它会不断循环，并且每次您访问新页面时，都会将其添加到队列中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-09-22T15:48:57.773

持续以 100% CPU 运行是无限循环的典型特征。这是单线程 nodejs 中的一个真正问题，但不幸的是，它缺乏相关信息。尽管您声明您的服务器仍然响应并且无限循环不是您的情况，但您仍然可以找到有用的提示来调试实时 nodejs 应用程序。

最终我找到了唯一有用的[文章](https://medium.com/the-node-js-collection/live-debugging-node-js-apps-at-the-command-line-cd5b58f883e1)：如何在 nodejs 中跟踪死循环：

通过 SSH 连接到您的服务器。识别 nodejs 进程 ID。现在，让我们告诉进程监听调试请求。是的，我们正在使用一个名为 kill 的命令。不，我们不会终止进程。我们正在向它发送不同的信号。

```
kill -SIGUSR1 4702 
```

执行此操作后，该过程将打开调试器连接。实际上，它会在其控制台日志中打印一个特殊的 URL，您可以在 Chrome 中打开该 URL 来调试进程！但是，也许您不想为了建立连接而在防火墙和容器配置中钻一个洞。是的，我也没有。因此，让我们在命令行中进行调试：

```
node inspect -p 4702 
```

你会看到这个提示：

```
debug> 
```

然后输入：

```
pause 
```

你回来了：

```
break in file:///somewhere/something.js:555
>555         for (prop in inputObject) {
510             if (hasOwnProp(inputObject, prop)) {
511                 normalizedProp = normalizeUnits(prop); 
```

是的！我们有第一个提示。该应用程序正在执行文件 something.js 中的第 555 行。这可能足以立即看到错误。但通常我们需要比这更多的信息。您可以键入 backtrace 以获取完整的堆栈跟踪：

```
#0 someFunctionName file:///somewhere/somefile.js:444:22
#1 someFunctionName file:///somewhere/somefile.js:555:33
#2 someFunctionName file:///somewhere/somefile.js:666:44 
```

… 等等。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-02-13T12:23:20.380

如果您使用 webpack 的 UI 应用程序，请注意`watchOptions`或`watch`。对我来说，禁用民意调查可以解决问题

```
watchOptions: {
            poll: false
        } 
```

或者您可以设置一个时间，当轮询将被触发时`poll: 3000`（每 3 秒一次） [https://webpack.js.org/configuration/watch/#watchoptionsignored](https://webpack.js.org/configuration/watch/#watchoptionsignored)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-07-25T21:29:35.223

在我关闭主管模式之前，我也经历了 100% 的 CPU 使用率（当文件更改时导致节点重新启动）。

这可能无法回答这个问题，但如果像我这样的新手担心 CPU 使用率，可能就是这种情况。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-02-16T07:57:41.460

如果您`nodemon`用来监视文件，请考虑使用文件较少的文件夹的路径。例如，让`nodemon`使用 bower 或 npm 安装的监视库文件夹会导致 CPU 使用率很高，因为其中包含数千个文件。

这是我的示例`nodemon.json`文件：

```
{
    "watch": ["views","routes"],
    "ext": "html, js"
} 
```

奇迹般有效。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-16T13:21:00.660

也许你在某处有一些计算`nextTick`正在不断地浪费 CPU。

如果您无法运行配置文件，那么很难找出哪种方法正在破坏 cpu。另一件事是使用记录器中间件[http://senchalabs.github.com/connect/middleware-logger.html检查快速日志](http://senchalabs.github.com/connect/middleware-logger.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-06-23T11:13:17.857

另一种选择是我们可以使用[火焰图](http://www.brendangregg.com/flamegraphs.html)并查看函数调用导致 cpu 高。命令可以找到如下

```
$> git clone https://github.com/brendangregg/FlameGraph.git

$> perf record -F 99 -p 1812 /*process id*/ -g --call-graph dwarf

$> perf script > out.perf

$> FlameGraph/stackcollapse-perf.pl out.perf > out.folded
$> FlameGraph/flamegraph.pl out.folded > out.svg 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-28T15:16:48.033

这可能是因为您直接拥有大量文件。例如 node_modules 文件夹。您需要使用 -i 参数来忽略该文件夹。所以它应该是这样的： `supervisor -i ./node_modules app`。

# joomla - Joomla 1.5 自定义组件中的第二个选择

> ID：10167481
> 
> 赞同：0
> 
> 时间：2012-04-16T00:42:23.357
> 
> 标签：joomla, joomla1.5, joomla-extensions

我已经开发了自定义组件。最初 Joomla 1.5 具有将数据从表发送到模板的数据数组。

```
class MyComponentClass extends JModel{

    /**
     * MyComponentClass data array for tmp store
     *
     * @var array
     */
    private $_data;
    /**
     * MyComponentClass data array for tmp store
     *
     * @var array
     */
    private $_mine;

    /**
     * Gets the data
     * @return mixed The data to be displayed to the user
     */
    public function getData(){
        if (empty( $this->_data )){
            $id = JRequest::getInt('id',  0);
            $db =& JFactory::getDBO();
            $query = "SELECT * FROM `#__tourinfo` where `id` = {$id}";
            $db->setQuery( $query );
            $this->_data = $db->loadObject();
        }
        return $this->_data;
    }

    public function getMine(){
        if (empty( $this->_mine )){
            $recordSet =& $this->getTable('mytable');
            $db =& JFactory::getDBO();
            $query = 'SELECT * FROM `#__mytable` WHERE ' . (isset($recordSet->published)?'`published`':'1') . ' = 1 ORDER BY `id` ';
            $this->_mine = $this->_getList( $query, $this->getState('limitstart'), $this->getState('limit') );
        }   
        return $this->_mine;
    }   

} 
```

根据文档，我只看到将信息发送到模板的 $_data 数组。

此模型为单个记录视图发送数据。

在其他表中，我有一些与此记录关联的数据。

当我尝试将数据接收到模板中时，出现一个错误，即没有向 foreach 提供数据。

可能有人知道这种情况的解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:35:55.357

您在 yourcomponent/view/yourview/view.html.php 文件中分配模板所需的任何数据。

请参见：

[http://docs.joomla.org/Developing_a_Model-View-Controller_Component_-_Part_1](http://docs.joomla.org/Developing_a_Model-View-Controller_Component_-_Part_1)

下面是 view.html.php 文件中典型方法的示例：

```
function listItems()
{
    $model = &$this->getModel('yourmodel');
    $items = $model->getItems();
    if ($items) {
            $this->assignRef( 'items', $items );
    }

    parent::display($tpl);
} 
```

注意上面代码中的赋值：

$this->assignRef('items', $items);

然后你可以在你的模板中调用 $this->items 来循环你的 foreach。

希望这可以帮助。

# windows - 无法使符号链接正常工作（Windows 7）cmd

> ID：10167482
> 
> 赞同：12
> 
> 时间：2012-04-16T00:43:08.490
> 
> 标签：windows, syntax, cmd

我正在尝试创建一个符号硬链接，以便我可以将 chrome 的缓存移动到另一个硬盘驱动器，我一直在尝试让它工作，但是我尝试过的每个变体都从命令行返回我的语法不正确。从我看到的关于这个错误的搜索中，通常是用引号引起来的。

无论如何，这就是我所拥有的，所以任何事情都知道为什么它返回“命令的语法不正确”

谢谢

```
mklink /J “C:\Users\Vodkaholic\AppData\Local\Google\Chrome\User Data” “K:\Chrome\User Data” 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-16T00:45:14.150

使用直引号 ( `"`) 而不是智能引号。

# c++ - 为什么我不能进入 GDB 中的 C++ cout 标准库函数？

> ID：10167484
> 
> 赞同：4
> 
> 时间：2012-04-16T00:43:15.907
> 
> 标签：c++, gdb

我写了一个简单`test.cc`的如下：

```
#include <iostream>
using namespace std;

int main()
{
  cout << "Hello world" << endl;
  return 0;
} 
```

我编译了：

```
g++ -g test.cc -o test.o 
```

我跑并在该行`gdb`放置了一个断点：`"Hello world"`

```
$ gdb test.o
(gdb) b 7
(gdb) c 
```

然后`gdb`停在这`"Hello world"`条线上，但是当我跑的时候

```
(gdb) s 
```

它无法进入该`cout`功能。所以我的问题是，我怎样才能进入这个`cout`功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T00:45:54.067

如果它没有链接到带有调试信息的标准库版本，它就不知道如何进入库；它只能越过它（即运行直到控制权返回到带有调试信息的代码）。

请查阅您系统的文档以了解如何安装标准 C 和 C++ 库的调试版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T09:47:39.157

如果没有调试信息，仍然可以调试它，只是更痛苦。见[这里](http://felix.abecassis.me/2012/08/gdb-debugging-stripped-binaries/)。

如果[像我一样](https://stackoverflow.com/a/19134015/1888983)，你只是想中断对同一函数的其他调用而不深入挖掘，那么在从反汇编获得的函数地址上设置断点并不太难`disas`。

# iphone - 如何模拟 UIView 上的 UITableviewCell 部分？

> ID：10167485
> 
> 赞同：1
> 
> 时间：2012-04-16T00:43:31.637
> 
> 标签：iphone, uiview, uitableview, highlight

我想模拟 a 上选定`UITableViewCell`（蓝色）的行为`UIView`，有没有办法做到这一点，即当用户点击 时`UIView`，就像点击 tableview 单元格一样。该视图将使用相同的蓝色突出显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T04:35:47.020

首先，看看 UITableView 单元格的行为方式很有用：

*   当单元格被触摸时，背景颜色变为蓝色并在触摸过程中保持蓝色
*   如果触摸位置移动（即用户在按下手指时移动手指），则单元格背景返回白色
*   如果用户触摸单元格并抬起手指而不改变触摸位置，`UIControlEventTouchUpInisde`则触发控制事件

那么我们该如何模拟呢？我们可以从子类化开始`UIControl`（它本身就是 UIView 的子类）。我们需要继承 UIControl，因为我们的代码需要响应 UIControl 方法`sendActionsForControlEvents:`。这将允许我们调用`addTarget:action:forControlEvents`我们的自定义类。

TouchHighlightView.h：

```
@interface TouchHighlightView : UIControl

@end 
```

TouchHighlightView.m:

```
@implementation TouchHighlightView

- (void)highlight
{
    self.backgroundColor = [UIColor blueColor];
}

- (void)unhighlight
{
    self.backgroundColor = [UIColor whiteColor];
}

- (void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event
{
    [self highlight];
}

- (void)touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event
{
    [self unhighlight];
}

- (void)touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event
{
    // assume if background color is blue that the cell is still selected
    // and the control event should be fired
    if (self.backgroundColor == [UIColor blueColor]) {

        // send touch up inside event
        [self sendActionsForControlEvents:UIControlEventTouchUpInside];

        // optional: unlighlight the view after sending control event
        [self unhighlight];
    }
} 
```

示例用法：

```
TouchHighlightView *myView = [[TouchHighlightView alloc] initWithFrame:CGRectMake(20,20,200,100)];

// set up your view here, add subviews, etc

[myView addTarget:self action:@selector(doSomething) forControlEvents:UIControlEventTouchUpInside];  
[self.view addSubview:myView]; 
```

这只是一个艰难的开始。随意根据您的需要进行修改。根据其使用情况，可以进行一些改进以使其对用户更好。例如，当 UITableCell 处于选中（蓝色）状态时，请注意 textLabels 中的文本如何变为白色。

# objective-c - RestKit RKObjectMapping 嵌套 json

> ID：10167486
> 
> 赞同：7
> 
> 时间：2012-04-16T00:43:53.027
> 
> 标签：objective-c, ios, restkit

如何使用 RestKit RKObjectMapping 映射下面的嵌套 json？我只需要映射“数据”。我下面的当前代码返回（空） - 谢谢！

```
{

    "sucess": true,
    "error": {
        "code": "",
        "message": ""
    },
    "data": [
        {
            "id": 1,
            "name": "Salad",
            "description": "Salad Desc",
            "category_id": 1
        },
        {
            "id": 2,
            "name": "Soup",
            "description": "Soup Desc",
            "category_id": 1
        },
        {
            "id": 3,
            "name": "Wrap",
            "description": "Wrap Desc",
            "category_id": 1
        },
        {
            "id": 4,
            "name": "Appetizers",
            "description": "Appetizers Desc",
            "category_id": 1
        }
    ]

} 
```

班级

```
@interface Subcategory : NSObject    
    @property (nonatomic, retain) NSNumber *subcategoryID;
    @property (nonatomic, retain) NSNumber *categoryID;
    @property (nonatomic, retain) NSString *name;
    @property (nonatomic, retain) NSString *description;
    @property (nonatomic, retain) NSString *thumbnail;
    @property (nonatomic, retain) NSArray *data; 
```

视图控制器

```
RKObjectMapping* mapping = [RKObjectMapping mappingForClass:[Subcategory class]];

RKObjectMapping* dataMapping = [RKObjectMapping mappingForClass:[Subcategory class]];
[dataMapping mapKeyPath:@"id" toAttribute:@"subcategoryID"];
[dataMapping mapKeyPath:@"category_id" toAttribute:@"categoryID"];
[dataMapping mapAttributes:@"name", @"description", nil];

[mapping mapKeyPath:@"data" toRelationship:@"data" withMapping:dataMapping];

[[RKObjectManager sharedManager] loadObjectsAtResourcePath:[NSString stringWith 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T16:40:01.997

您缺少 rootKeyPath 并在提供程序中设置映射：

```
RKObjectMapping* mapping = [RKObjectMapping mappingForClass:[Subcategory class]];    
RKObjectMapping* dataMapping = [RKObjectMapping mappingForClass:[Subcategory class]];
[dataMapping mapKeyPath:@"id" toAttribute:@"subcategoryID"];
[dataMapping mapKeyPath:@"category_id" toAttribute:@"categoryID"];
[dataMapping mapAttributes:@"name", @"description", nil];
dataMapping.rootKeyPath = @"data"; //this is what you were missing    
//get your  mapping provider (i'm not sure if you already have on declared)
[mappingProvider setObjectMapping:dataMapping forResourcePathPattern:@"/somepath/toservice/"];
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/somepath/toservice/"]; 
```

这里有更多信息可以回答您关于获取其他元素的问题（例如“错误”）：

```
- (void)objectLoader:(RKObjectLoader *)objectLoader didFailWithError:(NSError *)error {
    NSError *parseError = nil;
    id response = [objectLoader.response parsedBody:&parseError];
    DLog(@"response %@", response);    
    if (!parseError) {
        NSString *errorMessage = [[response valueForKey:@"error"] valueForKey:@"message"];     
        //do something with it    
    }
} 
```

# c++ - 在 C++ 中调用 COM 时如何包装错误？

> ID：10167487
> 
> 赞同：3
> 
> 时间：2012-04-16T00:43:57.283
> 
> 标签：c++, windows, visual-c++, com, error-handling

要遵循典型的 COM 程序，无论何时发生任何错误，都必须执行以下操作：

1.  检查`HRESULT`with`FAILED`或类似，以查看是否发生错误。
2.  创建一个变量来保存`IErrorInfo`（通常`CComPtr<IErrorInfo>`）
3.  打电话`::GetErrorInfo(0, &var)`。
4.  [通过调用`IErrorInfo::GetDescription`.](https://stackoverflow.com/questions/4597932/how-can-i-is-there-a-way-to-convert-an-hresult-into-a-system-specific-error-me)
5.  将 转换`BSTR`为`std::wstring`.
6.  将 转换`std::wstring`为某种形式的`char const*`.
7.  抛出一个用户定义的异常类型，该类型派生出`std::exception`上述第 1、5 和 6 位。

这一切看起来像是很多样板文件，几乎必须绕过 COM 中的每个函数调用。

我知道 MSVC++ 编译器提供了一大堆东西来让 COM 更容易搞乱，例如 ATL，以及编译器特定的 COM 扩展`_com_error`等`_com_raise_error`，但我不知道如何使用这些，或者它们是否是有意的供用户代码使用。

是否有任何典型的策略用于以异常安全和竞争条件安全的方式管理这种复杂性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T08:28:27.253

“显而易见”的解决方案是`ComException`. 它几乎可以处理所有步骤 - 您只需要获取`HRESULT`ctor 并抛出结果对象（步骤 1 和 7）。

你甚至可以写

```
HRESULT check(HRESULT hr)
{
  if(FAILED(hr)) throw ComException(hr);
  return hr; // Success comes in different forms. 
} 
```

为您完成第 7 步。例如`check(pUnk->QueryInterface(MyID, &pMyIf));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:04:48.983

恐怕没有为您提供半标准的方式，即使您查看 msdn 上的示例应用程序和 api 使用情况，它们都表明您必须手动进行所有繁琐的 HResult 检查，检查 IPtr 是否有效等等。你必须编写自己的函数来包装所有这些，这样你就不会重复代码，这应该不是问题。

# c# - 如何使用 ViewData 更新列表框的值

> ID：10167491
> 
> 赞同：0
> 
> 时间：2012-04-16T00:44:29.663
> 
> 标签：c#, javascript, jquery, asp.net-mvc, listbox

我有一个用于生成列表的 ViewData，在选择一个项目后，项目信息将显示在文本框中以供查看和编辑。单击保存按钮后，它会保存但列表框未更新，由于我使用的是视图数据，如何更新此列表框？

```
 @Html.ListBox("ListBoxName", new SelectList((IEnumerable<Epic>)ViewData["selectedestimate"], "Id", "Name", "EstimatedTime"), new {@class = "ListBoxClass", @style = "height: 325px;"})

   <button id="EpicSaveId" type="submit" class="btn" onclick="SaveEpicInfo((document.getElementById('EpicNameID').value), (document.getElementById('EpicTimeId').value), (document.getElementById('EpicDescriptionID').value))"> 
```

单击保存按钮后：（Javascript）

```
 function SaveEpicInfo(name, time, description) {
    $.get('@Url.Action("SaveEditEpic", "Estimate")', { id: eid, epicname: name, epictime: time, epicdescription: description }, function (result) {
        alert(result);

    });

} 
```

控制器：

```
 [AcceptVerbs(HttpVerbs.Get)]
    public JsonResult SaveEditEpic(int id, string epicname, double epictime, string epicdescription)
    {
        var epic = epicRepository.Select().SingleOrDefault(x => x.Id.Equals(id));
        if (epic != null)
        {
            epic.Name = epicname;
            epic.EstimatedTime = epictime;
            epic.EpicDescription = epicdescription;
            //ViewData["selectedestimate"] = epicRepository.Select().Where(x => x.EstimateId.Equals(ActiveEstimateId)).ToList();
            return Json("Epic Saved", JsonRequestBehavior.AllowGet);
        }
        else
        {
            return Json("Error");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:51:18.410

您将不得不遍历这些选择数组并查找带有 selected = true 的选项，然后存储该值。

# excel - 如何在 VBA 中高效地创建子数组？

> ID：10167495
> 
> 赞同：4
> 
> 时间：2012-04-16T00:45:15.113
> 
> 标签：excel, vba

在我的 VBA 程序中，我有一个大数据数组，我需要不断地使用它的子数组。

我的方法是：

```
Redim subArr(rowBegin to rowEnd)
For r = rowBegin to rowEnd
    subArr(r) = bigArr(r)
Next r 
```

请问有没有更有效的方法来引用这种子数组？谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T02:20:48.670

使用数组非常快，所以这可能不会带来明显的好处——尽管我可以理解它如何从编码意义上吸引人，而不是循环填充一个较小的数组

鉴于您正在使用单个元素数组，您可以：

1.  在大数组中引入一个“标记”字符串
2.  `Join`将带有分隔符的大数组转换为单个字符串
3.  `Split`由“标记”字符串组成的大数组，然后用分隔符将缩小的字符串分成一个较小的数组

下面的代码将数字 1 到 100 转储到一个数组中，然后像上面一样拆分它以提取前 10 条记录

```
Sub test()
Dim bigArr
Dim subArr
Dim strSep As String
Dim strDelim As String
Dim strNew As String
Dim rowBegin As Long
Dim rowEnd As Long

strDelim = ","
strSep = "||"
'fill array with 1 to 100
bigArr = Application.Transpose(Application.Evaluate("row(1:100)"))

rowBegin = 1
rowEnd = 10

bigArr(rowEnd + 1) = strSep
'make a single string
strNew = Join(bigArr, strDelim)
'split the string at the marker 
vArr = Split(strNew, strSep)
ReDim subArr(rowBegin To rowEnd)
'split the smaller string with the desired records
subArr = Split(Left$(vArr(0), Len(vArr(0)) - 1), strDelim)

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T01:54:54.457

简短的回答：可能不是

不太简短的答案：既然您正在创建一个非 0/1 边界的子数组，为什么不直接传递对原始数组和边界的引用？

顺便说一句：VBA 阵列的一个很好的资源是 CPearson 的网站[http://www.cpearson.com/excel/vbaarrays.htm](http://www.cpearson.com/excel/vbaarrays.htm)

# java - Apache tomcat + eclipselink下的Servlet

> ID：10167498
> 
> 赞同：0
> 
> 时间：2012-04-16T00:45:50.633
> 
> 标签：java, servlets, eclipselink

我向apache部署了战争。所有添加 eclipselink.jar 到 \lib 文件夹，当我尝试调用 servlet 时：

java.lang.SecurityException：类“javax.persistence.spi.ProviderUtil”的签名者信息与同一包中其他类的签名者信息不匹配

发生

我读过这是一些 eclipselink 错误。但我还没有找到解决办法。我需要使用eclipselink。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:26:55.873

你看过 Stackoverflow 上的这个帖子吗？ [Java SecurityException：签名者信息不匹配](https://stackoverflow.com/questions/2877262/java-securityexception-signer-information-does-not-match)

您遇到的错误似乎是由于库 JAR 文件中存在冲突或缺少 JAR 证书。

# jquery - jquery change hidden form value not working

> ID：10167502
> 
> 赞同：0
> 
> 时间：2012-04-16T00:46:18.030
> 
> 标签：jquery, hidden-field

I'm trying to have some jquery change a hidden form value on my page when clicking a button and then do a submit.

```
<div>
    Save As:<br/>
    <input type="button" value="Draft" onclick="javascript:setStatus('Draft')"/>
    <input type="button" value="Complete" onclick="javascript:setStatus('Complete')"/>              
</div> 
```

and my jquery code:

```
function setStatus(input) {
    $("#Status").val = input;
    $("#TestSheetForm").submit();
} 
```

I can see the breakpoint is being hit and the code is running without error, if I use firebug and stop immediately after assigning the hidden input val and run $("#Status).val() the value is set to "" even though it should be either draft or complete.

I also verified that if I run

```
$("Status").val("Draft")
```

from the firebug console it successfully changes the value upon running $("#Status").val() again

Is there something I'm missing here, should I be setting it another way?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T00:49:12.400

Change

```
$("#Status").val = input; 
```

to

```
$("#Status").val(input); 
```

# c# - streamWriter 转义了一些行

> ID：10167504
> 
> 赞同：0
> 
> 时间：2012-04-16T00:47:14.597
> 
> 标签：c#, .net, stream

我正在尝试读取一个大文本文件（14MB），将每一行放入一个字符串列表，然后从中取出不同的字符串，然后将其写回另一个文本文件，我使用以下代码：

```
 static void removeDuplicates(string filename)
    {
        //Reading from the file
        Console.WriteLine("Reading from the file....");
        StreamReader sr = new StreamReader(filename);
        List<string> namesList = new List<string>();
        while (!sr.EndOfStream)
        {
            namesList.Add(sr.ReadLine());
        }

        //Getting the distinct list
        namesList=namesList.Distinct().ToList<string>();           

        Console.WriteLine("Writing to the new file");
        //writing back to the file
        StreamWriter sw = new StreamWriter(filename + "_NoDuplicates",false);
        for (int i = 0; i < namesList.Count; i++)
        {               
            sw.Write(namesList[i] + "\r\n");

        }
    } 
```

问题是streamWriter总是在一定数量的行之后停止写入，总是在同一个地方停止写入

我确保列表内容正确，并且循环遍历列表中的所有项目，这只是 streamWriter 问题。

该列表在 Distinct() 之前包含 1048577 个项目，在 Distinct() 之后包含 880829 个项目；

streamWriter 在字符串编号 880805 的中间停止写入，之后不再写入任何内容，它甚至在一个单词的中间停止！

为什么会这样，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T00:54:18.317

如果您没有收到错误，那么我的猜测是文件的最后一位仍在缓冲中。尝试`sw.Flush()`在方法的末尾添加一个调用。

而且，当然，您需要关闭流，无论如何它都应该刷新缓冲区。

**解释**

内部`StreamWriter`使用缓冲区。每次调用时`Write()`，数据实际上都会写入内存中的缓冲区。当缓冲区填满时，它会刷新到磁盘。

您看到的问题是因为您正在编写的文件的最后几行没有填满缓冲区，因此没有触发器将缓冲区刷新到磁盘。它总是出现在文件中的同一点，因为那是缓冲区大小的最后一个整数倍。通过关闭流，您可以将任何剩余的数据刷新到磁盘。

# java - Jersey RESTful 服务通信（IncompatibleClassChangeError）

> ID：10167514
> 
> 赞同：5
> 
> 时间：2012-04-16T00:48:21.027
> 
> 标签：java, rest, jersey, simplehttpserver

我在 JDK 1.6 http 服务器上创建了一个基于 jersey 1.12 的 restful 服务外观。当我在 Eclipse 中启动我的应用程序时，一切正常。我可以毫无问题地与外观通信，但是当我通过控制台使用启动脚本启动我的应用程序时，我在访问服务时遇到了 IncompatibleClassChangeError。

我能够缩小问题的范围。问题在于发送响应。因为我可以正常与服务通信（请求已处理）但我没有得到响应。你对此有任何线索吗？

启动脚本

```
#!/usr/bin/env bash
libpath=
for i in $(ls lib/*|grep ".jar"); do 
    libpath=$( echo "$i:$libpath"); 
done
java -cp "$(echo $libpath)build/jar/myjar.jar" org.....Startup 
```

将抛出的异常

```
WARNUNG: Class org....facade.ServiceFacadeImpl is ignored as an instance is registered in the set of singletons
Call getMutationList: NP_005378
Exception in thread "pool-1-thread-1" java.lang.IncompatibleClassChangeError: Class javax.ws.rs.core.Response$Status does not implement the requested interface javax.ws.rs.core.Response$StatusType 
```

我门面的一部分

```
@GET
@Path("/mutations/{id}/{from}/{size}")
@Produces({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })
public MutationPosContainer getMutationList(@PathParam("id") String id,
        @PathParam("from") Integer from, @PathParam("size") Integer size) {
    ...
    if (posContainer == null)
        throw new BadRequestException();
    else
        return posContainer;
} 
```

应用程序处理程序

```
public class SnapDbApplication extends Application {
  private ServiceFacade facade;

  public SnapDbApplication(ServiceFacade facade) {
      this.facade = facade;
  }

  @Override
  public Set<Class<?>> getClasses() {
      Set<Class<?>> s = new HashSet<Class<?>>();
      s.add(this.facade.getClass());
      return s;
  }

  @Override
  public Set<Object> getSingletons() {
      Set<Object> s = new HashSet<Object>();
      s.add(this.facade);
      return s;
  } 
} 
```

编辑：类路径

```
java -cp 
lib/xstream-1.4.2.jar:lib/xmlbeans-2.3.0.jar:lib/xml-resolver-1.2.jar:lib/xalan-2.7.0.jar:
lib/wstx-asl-3.2.9.jar:lib/wsdl4j-1.6.2.jar:lib/woden-impl-dom-1.0M9.jar:lib/woden-impl-commons-1.0M9.jar:
lib/woden-api-1.0M9.jar:lib/tribes-6.0.16.jar:lib/snpxsd.jar:
lib/regexp-1.2.jar:lib/org.springframework.web.struts-sources-3.1.1.RELEASE.jar:
lib/org.springframework.web.struts-3.1.1.RELEASE.jar:
lib/org.springframework.web.servlet-sources-3.1.1.RELEASE.jar:
lib/org.springframework.web.servlet-3.1.1.RELEASE.jar:
...
:lib/jersey-server-1.12.jar:lib/jersey-multipart-1.12.jar:lib/jersey-json-1.12.jar:
lib/jersey-core-1.12.jar:lib/jersey-client-1.12.jar:lib/jaxws-tools-2.1.3.jar:lib/jaxen-1.1.1.jar:lib/jaxb-xjc-2.1.7.jar:
lib/jaxb-impl-2.1.7.jar:lib/jaxb-api-2.1.jar:
lib/jalopy-1.5rc3.jar:lib/httpcore-4.0.jar:
lib/http-20070405.jar:lib/hamcrest-library-1:build/jar/myapp.jar
org.startup.Startup 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T13:58:20.723

您的类路径中可能有一个不兼容的 jsr311 版本（请参阅[1](http://jersey.576304.n2.nabble.com/unit-test-jersey-rest-call-with-jersey-test-framework-td5847765.html)）。删除它，它应该运行良好。

# python - 为什么 Python 中的变量比 C 中的寿命更长（范围更大）？

> ID：10167521
> 
> 赞同：4
> 
> 时间：2012-04-16T00:49:42.800
> 
> 标签：python, c, scope

Python代码：

```
for i in xrange(10):
    for j in xrange(5):
        pass

# The for-loop ends, but i,j still live on
print i,j  # 9, 4 
```

C代码：

```
for(int i=0; i<=10; i++)
    for(int =0; j<=5; j++)
        ;

// The for-loop ends, so i,j can't be accessed, right?
printf("%d, %d", i, j);  // won't compile 
```

那么，Python 中的变量即使在`for`循环结束后仍然存在？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T00:51:04.940

在 Python 中，只有函数、模块和类定义的主体描述了作用域。其他控制结构没有。

关于这方面的一些基本信息在 Python 教程的类页面的[Python 作用域和命名空间](http://docs.python.org/tutorial/classes.html#python-scopes-and-namespaces)部分。一个重要的部分：

> 尽管范围是静态确定的，但它们是动态使用的。在执行期间的任何时候，至少有三个嵌套作用域的命名空间可以直接访问：
> 
> *   首先搜索的最内层范围包含本地名称
> *   从最近的封闭范围开始搜索的任何封闭函数的范围包含非本地名称，但也包含非全局名称
> *   倒数第二个范围包含当前模块的全局名称
> *   最外层范围（最后搜索）是包含内置名称的命名空间

# ios - 按月订阅的应用程序

> ID：10167524
> 
> 赞同：2
> 
> 时间：2012-04-16T00:49:59.040
> 
> 标签：ios, app-store, subscriptions

我已经构建了一个应用程序，我想免费上架商店，但我希望用户支付，比如说每月 1.00 美元才能连续使用该应用程序，但 Apple 的订阅文档似乎只适用于杂志类型的应用程序订阅。有谁知道这个平台是否适用于非发布类型的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T02:12:34.303

官方文档中有大量关于如何使用[应用内购买](https://developer.apple.com/appstore/in-app-purchase/index.html)实现这一目标的信息，当然不仅限于报亭订阅模式。用户的月份到期后，除非他们再购买一个月，否则请阻止他们访问应用程序中的内容（这取决于您是指所有内容还是只是“高级内容”）。苹果可能会允许这样做，因为他们从持续的利润中分得一杯羹（他们允许《纽约时报》填字游戏应用程序这样做，我在其他地方读到过）。

但请记住，您的应用程序需要具有一些杀手级的娱乐价值或实用性才能使该商业模式成功！

# asp.net - 使用 listview 进行分页与使用 sql server 进行分页

> ID：10167526
> 
> 赞同：1
> 
> 时间：2012-04-16T00:50:11.327
> 
> 标签：asp.net, sql-server, memory, paging

有谁知道分页如何与列表视图等控件一起工作。

我目前使用自己的 sql 对结果进行分页。我编写了我的查询，因此它只返回确切数量的记录，以将分页页面填充到数据集，然后填充控件。

我想我要问的问题是，当使用诸如列表视图之类的控件时，它是将整个数据集返回到内存，然后从内存中翻阅记录，还是仅将所选页码指定的数据选择返回到内存.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:07:04.007

listview 将获取和显示多少条记录，完全取决于您的实现。如果您的查询返回所有记录，它将全部获取并显示需要的记录。如果您的查询返回，

1) 记录总数

2) 并且只有选定的记录

然后它将仅显示选定的记录。简而言之，listview 可以处理任何事情，并将代码效率留给您。

互联网上的快速搜索返回了以下文章，该文章正在使用 objectdatasource、row_number 和 pager 实现有效的分页：

[http://gugiaji.wordpress.com/2012/02/17/custom-paging-using-objectdatasource-listview-datapager-asp-net-controls-and-row_number-sql-server-function/](http://gugiaji.wordpress.com/2012/02/17/custom-paging-using-objectdatasource-listview-datapager-asp-net-controls-and-row_number-sql-server-function/)

# javascript - 漂亮的约会 js 不适用于 Firefox

> ID：10167527
> 
> 赞同：1
> 
> 时间：2012-04-16T00:50:37.693
> 
> 标签：javascript, firefox, google-chrome, date

我正在使用漂亮的日期 js，它将日期对象显示为“2 分钟前”、“5 天前”等社交方式。但是虽然它适用于 chrome，但它不适用于 Firefox，因为我是 javascript 新手，我不知道为什么. 从 J.Resig 页面获取代码并根据我的需要进行修改。

这是代码

```
// Takes an ISO time and returns a string representing how
// long ago the date represents.
function prettyDate(time){
    var date = new Date((time || "").replace(/-/g,"/").replace(/[TZ]/g," ")),
        diff = (((new Date()).getTime() - date.getTime()) / 1000),
        day_diff = Math.floor(diff / 86400);

    if ( isNaN(day_diff) || day_diff < 0 || day_diff >= 31 )
        return;

    return day_diff == 0 && (
            diff < 60 && "şimdi" ||
            diff < 120 && "1 dk önce" ||
            diff < 3600 && Math.floor( diff / 60 ) + " dk önce" ||
            diff < 7200 && "1 saat önce" ||
            diff < 86400 && Math.floor( diff / 3600 ) + " saat önce") ||
        day_diff == 1 && "Dün" ||
        day_diff < 7 && day_diff + " gün önce" ||
        day_diff < 31 && Math.ceil( day_diff / 7 ) + " hafta önce";
}

// Takes an ISO time and returns a string representing how
// long later the date represents.
function prettyReverseDate(time){
    var date = new Date((time || "").replace(/-/g,"/").replace(/[TZ]/g," ")),
        diff = (( date.getTime() - (new Date()).getTime() ) / 1000),
        day_diff = Math.floor(diff / 86400);

    //console.log("Day dif : " + day_diff);

    if ( isNaN(day_diff) || day_diff < 0 || day_diff >= 31 )
        return ;

    //put what ever string you wanted like "Expirs in # hour/minute/day"
    return day_diff == 0 && (
            diff < 60 && " şimdi" ||
            diff < 120 && " 1 dk" ||
            diff < 3600 && Math.floor( diff / 60 ) + " dakika" ||
            diff < 7200 && " 1 saat" ||
            diff < 86400 && Math.floor( diff / 3600 ) + " saat") ||
        day_diff == 1 && "1 gün" ||
        day_diff < 7 && day_diff + " gün" ||
        day_diff < 31 && Math.ceil( day_diff / 7 ) + " hafta";
}

// If jQuery is included in the page, adds a jQuery plugin to handle it as well
if ( typeof jQuery != "undefined" )
    jQuery.fn.prettyDate = function(){
        return this.each(function(){
            var date = prettyDate(this.title);
            if ( date )
                jQuery(this).text( date );
            else
                jQuery(this).text("n/a");
        });
    };

// If jQuery is included in the page, adds a jQuery plugin to handle it as well
if ( typeof jQuery != "undefined" )
    jQuery.fn.prettyReverseDate = function(){
        return this.each(function(){
            var date = prettyReverseDate(this.title);
            if ( date )
                jQuery(this).text( date );
            else
                //make parent element show expired
                jQuery(this).parent().text("süresi doldu");
        });
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:38:54.027

它是一个与时间格式相关的问题，prettyReverse 和漂亮的函数采用，并且它有以“。”开头的附加部分。删除该部分后，拆分功能问题消失了。

```
var date = new Date( ( ( time || "" ).replace( /-/g,"/" ).replace( /[TZ]/g," " ) ).split( '.' )[0] ), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:20:09.003

首先使用 Firefox 的**Firebug 插件**来执行代码或显示执行过程中出现的错误消息。

当我只是复制并粘贴您的“prettyReverseDate”函数时，会出现语法错误。

使用 Firebug 调试您的代码，直到您看不到任何错误消息。然后检查实际的代码逻辑。

Firebug 文档： http: [//getfirebug.com/wiki/index.php/Main_Page](http://getfirebug.com/wiki/index.php/Main_Page)

# java - 使用对象实例化作为枚举条目的值的好习惯吗？

> ID：10167528
> 
> 赞同：7
> 
> 时间：2012-04-16T00:50:56.783
> 
> 标签：java, object, enums, instantiation

首先，如果这是现有问题的重复，请道歉。不确定如何表达我的问题，所以这可能是我还没有找到明确答案的原因。本质上，我想知道以下是否被认为是好的做法，或者是否有更好的方法来做到这一点：

```
public enum ExampleEnum {
    ENTRY_1(new ExampleCodedValue("entry1", "comment1")),
    ENTRY_2(new ExampleCodedValue("entry2", "comment2")),
    ENTRY_3(new ExampleCodedValue("entry3", "comment3")),
    ENTRY_4(new ExampleCodedValue("entry4", "comment4"));

    private ExampleCodedValue codedValue;

    ExampleEnum(ExampleCodedValue codedValue) {
        this.codedValue = codedValue;
    }

    public ExampleCodedValue getCodedValue() {
        return codedValue;
    }
}

class ExampleCodedValue {

    private final String code;
    private final String comment;

    ExampleCodedValue(String code, String comment) {
        this.code = code;
        this.comment = comment;
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T01:02:58.353

这是一种完全合理的方法，但是，您不能这样做：

```
public enum ExampleEnum {
    ENTRY_1("entry1", "comment1");

    private final String entry;
    private final String comment;

    private ExampleEnum(String entry, String comment) {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T01:08:56.500

没关系，因为你`ExampleCodedValue`是不可变的。

但是，如果它只是一个值容器，请问自己是否有充分的理由不将字段直接放入`enum`. 一个很好的理由可能是您的值对象在概念上与枚举的其他字段是分开的。

枚举中包含的对象的另一个用例是使用多态性为每个对象赋予不同的功能。例如：

```
PAINT_BRUSH(new PaintTool()),
ERASER(new EraserTool()); 
```

`execute()`在`PaintTool`和中具有不同的实现`EraserTool`。

*在这一点上，您可能会问自己，我是否仍在使用`enum`来在某个地方做出选择，或者我是否可以`enum`完全省略并直接使用`Tool`实例......此外，传统上，枚举并不围绕功能展开。*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T01:01:37.007

首先，为什么不能简单地将代码和注释属性添加到枚举本身？这似乎完全没有意义。

# c++ - 使用 Visual C++ 环境和“Asm”关键字作为 Assembler IDE 的替代方案？

> ID：10167530
> 
> 赞同：4
> 
> 时间：2012-04-16T00:51:08.263
> 
> 标签：c++, assembly, masm

只需阅读一本 C++ 书籍，您就可以通过使用 asm 关键字将汇编程序直接放入 C++ 中。

这是否意味着，如果想使用 Visual Studio 编写汇编程序，我可以简单地创建一个 C++ 主方法，然后将汇编程序放入其中并将其作为 C++ 程序执行？编译器会简单地运行嵌入汇编程序的 C++，就好像它只是一个汇编程序一样？

我的问题源于缺乏适合汇编程序的 IDE。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T02:16:27.910

当你使用 C++ 编译器时，它会在你的程序中添加额外的代码，而不是`int main()`. 如果你曾经反编译过一个简单的 hello world 程序，你会注意到它在很久之前就开始执行了`int main()`，调用了一些函数，比如`_set_app_type`and`_getmainargs`然后最终调用了你的`int main()`. 对您来说最有趣的事情可能是调用 ，`_getmainargs`因为它为您的程序获取命令行参数。如果您要使用 NASM、FASM 甚至 GAS 等汇编程序编译您的程序集，它不会调用`_getmainargs`和其他程序，因此您作为程序员必须实现自己的方式来获取命令行参数，这对初学者来说可能很棘手.

只要您`__asm`使用`volatile`关键字指定您的，编译器就不应修改您的汇编代码，它会像“汇编程序”一样运行（该特定代码）。

如果您正在寻找用于组装的 IDE，我可以告诉您我已经走上了同样的道路。我使用 FASM，它是一个很棒的小 IDE，但是有 Eclipse 甚至 Visual Studio 的插件，虽然我不能说我对它们有很好的体验。

编辑：我想补充一点，如果您正在学习汇编，那么最好使用汇编程序来学习它。当 C++ 或更高的语言不能使用时，会使用汇编的常见用途，因此，如果您依赖 C++ 编译器和内联汇编语法，则在尝试编写原始汇编时可能会导致混淆。

# opencv - 如何在 OpenCV 中使用 Mat::type() 找出 Mat 对象的类型

> ID：10167534
> 
> 赞同：142
> 
> 时间：2012-04-16T00:51:21.427
> 
> 标签：opencv, opencv-mat

我对 OpenCV`type()`中的对象方法有点困惑。如果我有以下几行：`Mat`

```
mat = imread("C:\someimage.jpg");
type = mat.type(); 
```

和`type = 16`。我如何找出什么类型的垫矩阵是？
我试图在其手册或几本书中找到答案，但徒劳无功。

* * *

## 回答 #1

> 赞同：245
> 
> 时间：2013-07-23T20:40:39.207

这是一个方便的函数，您可以使用它来帮助在运行时识别您的 opencv 矩阵。我发现它至少对调试很有用。

```
string type2str(int type) {
  string r;

  uchar depth = type & CV_MAT_DEPTH_MASK;
  uchar chans = 1 + (type >> CV_CN_SHIFT);

  switch ( depth ) {
    case CV_8U:  r = "8U"; break;
    case CV_8S:  r = "8S"; break;
    case CV_16U: r = "16U"; break;
    case CV_16S: r = "16S"; break;
    case CV_32S: r = "32S"; break;
    case CV_32F: r = "32F"; break;
    case CV_64F: r = "64F"; break;
    default:     r = "User"; break;
  }

  r += "C";
  r += (chans+'0');

  return r;
} 
```

如果`M`是 var 类型`Mat`，您可以这样称呼它：

```
string ty =  type2str( M.type() );
printf("Matrix: %s %dx%d \n", ty.c_str(), M.cols, M.rows ); 
```

将输出如下数据：

```
Matrix: 8UC3 640x480 
Matrix: 64FC1 3x2 
```

值得注意的是，还有 Matrix 方法`Mat::depth()`和`Mat::channels()`. 这个函数只是一种方便的方法，可以从这两个值的组合中获得人类可读的解释，这两个值的位都存储在同一个值中。

* * *

## 回答 #2

> 赞同：225
> 
> 时间：2016-09-29T22:11:52.900

出于调试目的，如果您想在调试器中查找原始`Mat::type`数据：

|  | C1 | C2 | C3 | C4 | C(5) | C(6) | C(7) | C(8) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| CV_8U | 0 | 8 | 16 | 24 | 32 | 40 | 48 | 56 |
| CV_8S | 1 | 9 | 17 | 25 | 33 | 41 | 49 | 57 |
| CV_16U | 2 | 10 | 18 | 26 | 34 | 42 | 50 | 58 |
| CV_16S | 3 | 11 | 19 | 27 | 35 | 43 | 51 | 59 |
| CV_32S | 4 | 12 | 20 | 28 | 36 | 44 | 52 | 60 |
| CV_32F | 5 | 13 | 21 | 29 | 37 | 45 | 53 | 61 |
| CV_64F | 6 | 14 | 22 | 30 | 38 | 46 | 54 | 62 |

例如，如果 type = 30 则 OpenCV 数据类型为`CV_64FC4`. 如果 type = 50 则 OpenCV 数据类型为`CV_16UC(7)`.

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2012-04-16T03:50:43.490

在 OpenCV 头文件“ *types_c.h* ”中有一组定义生成这些，格式是`CV_bits{U|S|F}C<number_of_channels>`
所以例如`CV_8UC3`意味着 8 位无符号字符，3 个颜色通道 - 这些名称中的每一个都映射到带有该文件中宏的任意整数。

**编辑：**参见“ *types_c.h* ”例如：

```
#define CV_8UC3 CV_MAKETYPE(CV_8U,3)
#define CV_MAKETYPE(depth,cn) (CV_MAT_DEPTH(depth) + (((cn)-1) << CV_CN_SHIFT))

eg.
depth = CV_8U = 0
cn = 3
CV_CN_SHIFT = 3

CV_MAT_DEPTH(0) = 0
(((cn)-1) << CV_CN_SHIFT) = (3-1) << 3 = 2<<3 = 16 
```

因此`CV_8UC3 = 16` ，但您不应该使用这个数字，只需检查`type() == CV_8UC3`您是否需要知道内部 OpenCV 数组的类型。
请记住，OpenCV 会将 jpeg 转换为 BGR（如果您将 '0' 传递给 ，则将其转换为灰度`imread`）-因此它不会告诉您有关原始文件的任何信息。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-04-04T19:07:24.350

出于调试目的，我从@Octopus 的答案中为该函数添加了一些可用性。

```
void MatType( Mat inputMat )
{
    int inttype = inputMat.type();

    string r, a;
    uchar depth = inttype & CV_MAT_DEPTH_MASK;
    uchar chans = 1 + (inttype >> CV_CN_SHIFT);
    switch ( depth ) {
        case CV_8U:  r = "8U";   a = "Mat.at<uchar>(y,x)"; break;  
        case CV_8S:  r = "8S";   a = "Mat.at<schar>(y,x)"; break;  
        case CV_16U: r = "16U";  a = "Mat.at<ushort>(y,x)"; break; 
        case CV_16S: r = "16S";  a = "Mat.at<short>(y,x)"; break; 
        case CV_32S: r = "32S";  a = "Mat.at<int>(y,x)"; break; 
        case CV_32F: r = "32F";  a = "Mat.at<float>(y,x)"; break; 
        case CV_64F: r = "64F";  a = "Mat.at<double>(y,x)"; break; 
        default:     r = "User"; a = "Mat.at<UKNOWN>(y,x)"; break; 
    }   
    r += "C";
    r += (chans+'0');
    cout << "Mat is of type " << r << " and should be accessed with " << a << endl;

} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-08-15T19:21:09.867

其他一些人回答了这个问题，但我找到了一个非常适合我的解决方案。

```
System.out.println(CvType.typeToString(yourMat.type())); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-12-23T14:36:33.910

基于@Matt Edding 的评论（感谢 Mat(T) 双关语；））：

`cout << cv::typeToString(inputMat.type()) << endl;`

奇迹般有效。

# c++ - make_heap 使用函数对象

> ID：10167537
> 
> 赞同：0
> 
> 时间：2012-04-16T00:52:02.833
> 
> 标签：c++, stl, graph, heap

我必须为 make_heap 重载什么运算符？是 () 运算符吗？如果我已经在我的算法中为另一种情况定义了它。在我的情况下，任何人都可以提供使用 make_heap 的正确方法。请参阅下面的代码以更好地理解。

在我的顶点类中

```
bool operator() (vertex &v) const 
{ 
  return (v.key() == _key); 
} 
```

这在以下 std 方法 find_if 中构建图形时使用

```
vertex_iterator GraphComponents::graph::find_vertex_by_key(int key)
{
  return std::find_if(_vertices.begin(), _vertices.end(), GraphComponents::vertex(key));
} 
```

现在在我的算法中，我想在不同的上下文中使用顶点作为函数对象。

```
std::list<int> GraphComponents::graph::breadth_first_search (int key, int start_key)
{
  std::vector<GraphComponents::vertex *> heap;
  for (vertex_iterator copy_iter = _vertices.begin(); copy_iter != _vertices.end(); ++copy_iter) {
    heap.push_back(&(*copy_iter));
  }
  std::make_heap(heap.begin(), heap.end(), vertex(<should be distance>));
} 
```

这里我不想在比较中使用键，但我想使用距离成员，因此距离最短的顶点位于堆的顶部。没有实现我自己的堆，推荐的解决方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T01:13:28.617

实现一个函数，该函数接受您类型的两个参数，如果应该认为左侧参数相对小于右侧参数，则返回 true。（更少可能意味着更大）

然后将该函数作为第三个参数传递给`make_heap`. 或者您可以`operator<`使用上述语义来实现，如果您不传递任何函数，将使用该语义。

[http://en.wikipedia.org/wiki/Strict_weak_ordering](http://en.wikipedia.org/wiki/Strict_weak_ordering)

在您的情况下，您的元素是指针，因此您不能编写`operator<`，因为该函数已经为所有指针类型定义。因此，您将不得不编写一个单独的函数，如下所示：

```
bool CompareByDistance(const GraphComponents::vertex * lhs,
                       const GraphComponents::vertex * rhs)
{
    return lhs->distance() < rhs->distance();
} 
```

# c - 如何在 Unix 套接字编程中获取本地 IP 地址和端口？

> ID：10167540
> 
> 赞同：3
> 
> 时间：2012-04-16T00:52:56.403
> 
> 标签：c, sockets, unix, ip, port

我用它作为地址来创建一个新的服务器（`socket()`，，，`bind()`）`listen()`：

```
struct sockaddr_in newServer;
memset(&newServer, 0, sizeof(newServer));
newServer.sin_family = AF_INET;
newServer.sin_addr.s_addr = htonl(INADDR_ANY);
newServer.sin_port = htons(UNUSED_PORT); 
```

宏 UNUSED_PORT 定义为 0。

我希望让服务器在任何接口和未使用的端口上进行监听。

我试图用它`getsockname()`来获取我的本地 IP 地址和端口，但我得到了一些奇怪的输出。输出代码如下：

```
struct sockaddr_in localAddress;
socklen_t addressLength;
getsockname(newServerfd, (struct sockaddr*)&localAddress,   \
                &addressLength);
printf("local address: %s\n", inet_ntoa( localAddress.sin_addr));
printf("local port: %d\n", (int) ntohs(localAddress.sin_port)); 
```

比如我得到0.255.255.255:0、0.0.0.0:0、255.127.0.0:36237等，我的系统是Mac OS X 10.7.3。

- 更新 -

使用后`socklen_t addressLength = sizeof(localAddress);`（感谢@cnicutar 和@Jonathan Leffler），本地IP 总是得到0.0.0.0；可以吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T00:54:53.663

您需要`addressLength`在调用之前进行初始化`getsockname`：

```
socklen_t addressLength = sizeof(localAddress); 
```

# php - 如何使 html 成为 href 链接更改 php 值。或者会做类似的事情

> ID：10167548
> 
> 赞同：0
> 
> 时间：2012-04-16T00:54:43.907
> 
> 标签：php, html, hyperlink, href

我的网站上有一个点，我想用它来显示一个 php 信息文件，或者如果单击链接（不是按钮），则会显示不同的信息显示。

这个想法是使链接的值从 0 变为 1。

如果值为 0 则显示第 1 页 如果值为 1 则显示第 2 页

我将链接存储在 php 字符串中。然后根据单击的链接显示一个或另一个 php 文件。

```
$userlinks = '<a href="user_profile.php?id=' . $userid . '">Profile</a> &bull; <a>' .     $ip . '</a> &bull; <a href="logout.php">Log Out</a>'; 
```

而不是让配置文件链接转到 user_profile.php，我希望单击链接将值从 0 更改为 1。

这可能吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T01:28:51.330

您可以在链接中使用 GET 变量来实现此效果。建立链接时，请执行以下操作：

```
$userlinks = 'user_profile.php?id=' . $userid . '&page=1'; 
```

通过在 GET 变量中传递一个数字，可以在您的脚本中访问它，例如：

```
switch($_GET['page'])
{
   case "1":
      // Show page 1
      break;
   case "2":
      // Show page 2
      break;    
   default:
      // Show error
      echo("Page Does Not Exist!");
} 
```

# c - 简单的指针算术问题

> ID：10167551
> 
> 赞同：1
> 
> 时间：2012-04-16T00:55:09.763
> 
> 标签：c, pointers

问题一：

我正在阅读 K&R 的书，我对某些事情感到有些困惑。我对一些简单的指针算术有点困惑。如果我说

```
char (*a)[10]; 
```

我知道我刚刚声明了一个指向 10 个字符的数组的指针。首先，因为我没有 malloc，所以这仍然保留在堆栈中，对吗？所以堆栈中有这个指针指向大小为 10 的 char 数组的开头，对吗？

现在，如果我想访问数组中的第二个元素，我还会做 *(a+2*sizeof(char)) 吗？还是在这种情况下不起作用？

问题2：

如果我有

```
int* a = malloc(10*sizeof(int)); 
```

如果我想从整数数组中获取第二个**字节**，我会这样做：

```
*((char*)((char*)a+2)) 
```

这个对吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T01:02:40.650

**第一件事**

`In C/C++, array index starts from 0 instead of 1`. 因此，如果要访问第二个元素，请使用索引 1，而不是 2 ！

**答案 1**

```
char (*a)[10]; 
```

是的，这是一个指向大小为 10 的数组的指针。指针本身在堆栈上。但是对于这一行，它没有指向任何有效的数组，这意味着它是未初始化的。

要初始化您的指针，

```
char b[2][10] = {"123456789", "abcdefghi"};
// initialize pointer "a"
char (*a)[10] = b; 
```

要访问“第二个”元素，在本例中为“2”，请使用，

```
char (*a)[10] = b;
// access the element at 1st row, 2nd column
printf("%c\n", a[0][1]); 
```

**答案 2**

您想访问第二个字节。但是，元素索引从 0 而不是 1 开始，因此您应该使用“+1”而不是“+2”作为第 2 个字节！

```
*((char*)a+1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T01:11:01.817

### 问题一：

> 首先，因为我没有 malloc，所以这仍然保留在堆栈中，对吗？

指针在堆栈上声明，但它还没有指向任何东西。您需要执行以下操作：

```
char (*a)[10];
char array[10];
a = &array; 
```

否则`a`不指向任何东西，并且试图访问它会导致问题。

> 现在，如果我想访问数组中的第二个元素，我还会做`*`(a+2*sizeof(char))

您不需要说`sizeof(char)`，因为编译器会使用您正在使用的指针或数组的类型为您计算加法的大小。此外，如果您想要第二个元素，则需要添加 1 而不是 2（因为数组/指针索引从零开始）。

*   如果你想要你指向的数组中的第二个元素，你可以做`(*a)+1`或者`(*a)[1]`。

*   如果您的指针指向多个数组，并且您想要第二个数组，那么`*(a+1)`or`a[1]`就是您想要的。

* * *

### 问题2：

（下次最好打开多个问题：）

> 如果我想从整数数组中获取第二个字节，我会这样做`*((char*)((char*)a+2))`：

首先，当你说：

```
int* a = malloc(10*sizeof(int)); 
```

您有一个指向内存块的指针，该内存块有足够的空间容纳 10 个整数 - 这不是一个数组。如果这令人困惑，请参阅[指针和数组的 C-FAQ](http://c-faq.com/aryptr/index.html)。

现在，如果你想要 a 指向的内存块中的第二个字节，你可以说：

```
char second_byte = *((char*)a+1); 
```

因为强制转换的优先级高于加法，所以在执行加法时`a`被视为 a `char*`。但是，为了尽量减少阅读代码时产生误解的机会，我可能会写：

```
char second_byte = *(((char*)a)+1); 
```

或更好：

```
char second_byte = ((char*)a)[1]; 
```

反而。请注意，原始示例中的额外演员表是不必要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T01:02:08.920

当您声明指针时，它还没有指向任何东西。您需要声明一个大小为 10 的字符数组并将其地址分配给 `(*a)[10]`如果您希望它在堆栈上。至于访问第二个元素，您可以`*(a+1)`为下一个元素执行大多数编译器（因此对于 4 字节的 int，*(a+1) 是第二个元素，*(a+4) 是第 4 个元素（不是第 4 个字节）。

```
char (*a)[10];
char arrayTest[10];
a=&arrayTest; 
```

对于你的第二个问题，获得第二个字节将是`*a`然后简单地做一个右移：

```
char Test= ((*a)&0x7FFF)>>8; 
```

# php - 代码爬虫爬取异步 GA 代码

> ID：10167552
> 
> 赞同：-1
> 
> 时间：2012-04-16T00:55:34.727
> 
> 标签：php, google-code

你好我有一个 php 代码爬虫来检测一个网站，如果它有一个异步谷歌代码。这是检测异步谷歌代码的片段：

```
$async_ga_string = "ga.async";

if(!strpos($str, $async_ga_string))$async_ga = '';
            else $async_ga = 'yes'; 
```

它工作正常。但我真正需要的是能够在这个谷歌代码片段中获得异步 UA 代码：

```
 var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2595901-1']);
  _gaq.push(['_trackPageview']); 
```

我需要得到'UA-2595901-1'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T01:48:25.647

这是一个不完美的解决方案，但 Google Analytics（分析）帐户 ID 几乎是唯一的，足以使用简单的正则表达式找到它：

```
<?php
$gaRegExp = '/UA-\d+-\d+/';

$testText = "var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2595901-1']);
  _gaq.push(['_trackPageview']);"

preg_match( $gaRegExp , $testText , $matches )

// Returns, within the $matches variable, the following
// array (
//  0 => 'UA-2595901-1',
// ) 
```

# iphone - UITableview 部分标题不显示文本

> ID：10167554
> 
> 赞同：1
> 
> 时间：2012-04-16T00:55:52.937
> 
> 标签：iphone, ios, uitableview

我已将此代码添加到我的 UITableViewController 以返回灰色标题部分。

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
{
    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 30)];
   [headerView setBackgroundColor:[UIColor grayColor]];
    return headerView;
} 
```

但是现在这样做我看不到标题字符...我需要将其添加为子视图吗？还是有另一种做事方式？

我有这些方法将标题和标题文本添加到 UITablView 但是当我使用上述方法时，我再也看不到它们了。

```
// Section headers
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section 
{    
    return [sectionLetterArray objectAtIndex:section];
}

// Section header titles
- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView
{
    return sectionLetterArray;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T03:05:49.907

如果您创建自己的`tableView:viewForHeaderInSection`，则必须创建 UILabel 或其他任何内容，并自己填写文本，例如：

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
{
    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 30)];
    [headerView setBackgroundColor:[UIColor grayColor]];

    // Add the label
    UILabel *headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(kSectionTitleLeftMargin, 
                                                                     kSectionTitleTopMargin, 
                                                                     tableView.bounds.size.width - kSectionTitleLeftMargin - kSectionTitleRightMargin, 
                                                                     30.0 - kSectionTitleTopMargin - kSectionTitleBottomMargin)];

    // do whatever headerLabel configuration you want here

    headerLabel.text = [self tableView:tableView titleForHeaderInSection:section];
    [headerView addSubview:headerLabel];

    // Return the headerView
    return headerView;
} 
```

显然，将 headerLabel 更改为您想要的任何设置，但关键的关键信息是，如果您创建自己的视图，则必须自己创建标签并填写文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T00:57:53.430

当您实现该方法时，带有标签的默认视图将替换为您返回的内容，因此您的任务是为其添加带有您想要的任何文本的标签。

# javascript - 仅在一组图像中使用 javascript 更改 src

> ID：10167555
> 
> 赞同：0
> 
> 时间：2012-04-16T00:56:09.617
> 
> 标签：javascript, image, src

我对 JavaScript 真的很陌生。我是新点击图片，该图片也会改变 SRC 和其他图片。

这是代码：

```
<a href="#pduno"><img onclick="this.src='img/pduno.png';document.getElementsByClassName('imgdp').src='img/pddos.png'" class="imgdp" src="img/pduno.png" width="13" height="11" /></a> 
<a href="#pddos"><img onclick="this.src='img/pduno.png';document.getElementsByClassName('imgdp').src='img/pddos.png'" class="imgdp" src="img/pddos.png" width="13" height="11" /></a>
<a href="#pddos"><img onclick="this.src='img/pduno.png';document.getElementsByClassName('imgdp').src='img/pddos.png'" class="imgdp" src="img/pddos.png" width="13" height="11" /></a> 
```

pduno.png 是“活动”图像，pddos.png 是“非活动”图像。

让我们来看看我有 3 张图片 pduno - pddos - pddos

当我单击 2 个 pddos 之一时，它会变为 pduno，而原来是 pduno 的那个会变为 pddos。我的意思是，只有一个带有 pduno 的图像，而其余的是 pddos。

我正在使用它来创建一个滚动画廊。pduno 用于显示正在展示的画廊。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T01:11:53.780

我会为此使用[jQuery](http://jquery.com/)库（因为您需要使用一些不那么简单的函数）

您可以将其包含在编写此代码中（无需下载任何内容）：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" /> 
```

然后，我会这样做：

```
<a href="#pddos"><img class="pdimg" src="img/pduno.png" width="13" height="11" /></a>
<a href="#pddos"><img class="pdimg" src="img/pddos.png" width="13" height="11" /></a>
<a href="#pddos"><img class="pdimg" src="img/pddos.png" width="13" height="11" /></a> 
```

在 HTML 中，我删除了所有脚本，并将它们移至此处：

```
<script>
$('.pdimg').click(function(){ //This registers the function with the click event
    $('.pdimg').attr('src', 'img/pddos.png'); //This resets the image to pddos
    $(this).attr('src', 'img/pddos.png'); //This sets the image to uno, 
                             // "this" will be the img that you clicked on.
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T01:00:40.350

`document.getElementsByClassName`将从文档中选择一个节点列表，而不是单个元素。要更改每个选定元素的 src 属性，您必须遍历列表。

此外，要将所有图像重置为 pddos 然后激活其中一个，您不能将一个设置为 pduno 然后全部重置。

# java - 为什么 HashMap 的大小与文件中的行数不同？

> ID：10167556
> 
> 赞同：1
> 
> 时间：2012-04-16T00:56:11.333
> 
> 标签：java, file, hashmap

假设我有一个文件，其中包含例如以下类型的数据：

```
 info1 word1
 info2 word2
 info3 word3
 info2 word4 
```

ETC

现在，我想为每行中的单词创建一个映射函数。所以我最初读了这行，用空格分割它，然后得到这个词。

现在这个词将是价值。我知道所有的词都是不同的和独特的。但是，信息可能不是唯一的。

关于键，因为我最感兴趣的是与每个单词相关的信息，所以我只为它创建一个字符串，它基本上是所有的行。

我知道信息可能没有什么不同，但线条肯定是不同的，因为单词肯定不同。

该文件有 40000 行，但是 HashMap 的大小是 38490。

我不明白这里发生了什么。我的逻辑错了吗？

这是代码：

```
private static void loadInfo(HashMap<String, String> info, File File){
  try {
    BufferedReader br = new BufferedReader(new FileReader(file));
    String[] dataInLine = new String[2];
    String line = br.readLine();
    int counter = 0;
    while (line != null) {

      lineData = line.split("\\s+");
      info.put(lineData[1], line);
      line = br.readLine();
      counter++;
    }
    System.out.println(counter); //counter shows the correct amount of lines
    System.out.println(info.size()); //this shows less than the amount of lines
  } catch (IOException io) {
  }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T00:59:35.993

如果您有重复的密钥，就会发生这种情况；`put`将覆盖以前的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T01:01:03.043

您的单词列表很可能实际上并不是唯一的。您可以在致电之前进行检查`.put()`以确定单词是否已存在并报告重复项：

```
while (line != null) {

      lineData = line.split("\\s+");
      final String word = lineData[1];
      final String previous = info.get(word);
      if (previous != null) { 
         System.err.println("Duplicate at count "+line+" of word "+word);
         System.err.println(" original line: "+previous);
         System.err.println("      new line: "+line);
      }
      info.put(word, line);
      line = br.readLine();
      counter++;
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T01:07:48.693

您可能有重复的键，例如您的示例中的“info2”映射到“word2”和“word4”。

如果您需要映射到多个值的键，则需要一个“multimap”。您可以使用该类型创建自己的类型`HashMap<String, Set<String>>`（每个键映射到一组值）。或者使用预先存在的一个，例如来自[Apache Commons](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/MultiMap.html)的那个。

使用自己的，每次要添加映射都需要检查key是否存在；如果不将其映射到一个空集。然后添加映射，将值放入该键的集合中。

```
HashMap<String, Set<String>> info;
...
if (!info.contains(lineData[1])) {
    info.put(lineData[1], new HashSet<String>());
}
info.get(lineData[1]).put(line); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T01:03:36.250

您可能*确实*有一些重复的键。

检查是否要替换以前的值的一种简单方法是查看 的返回值`put`：

```
String last = info.put(lineData[1], line);
if( last != null )
    System.err.println("Warning: replaced value for key "+lineData[1]+", last value was: "+last); 
```

# batch-file - 变量批次内的变量

> ID：10167559
> 
> 赞同：0
> 
> 时间：2012-04-16T00:56:30.113
> 
> 标签：batch-file

我做了这个代码

```
@echo off & SETLOCAL EnableDelayedExpansion
title TXTanimation
set dir101=C:\USers\Jake\Desktop\file.bat
goto jakeinc
echo Lets make a text animation
pause
set /p dir101=where will the .bat be saved:
:jakeinc
echo @ECHO OFF > %dir101%
echo: >> %dir101%
:menu
echo 0=Edit important information
echo 1=Display .txt
echo 2=Play sound
echo 3=Close sound player
echo 4=Add nessicary wait between .txt
echo 5=Label point
echo 6=Edit variable
    echo 7=Goto point
echo 8=Create IF sentence
echo 9=End it
    echo Add - to the front to view it's guide!    
    Set /p choose=which one:

If '%choose%'=='0' (
SEt /p title=What is the title
:LOL101
set /p color=what color do you want type test to experiment with the colors
If '!color!'=='test' goto tester
goto model
:tester
SEt /p test=Please give hexadecimal number type exit to leave:
if '!test!'=='exit' goto LOL101
color !test!
goto tester
:model
echo title %title% >> %dir101%
echo color %color% >> %dir101%
goto menu
)

If '%choose%'=='-0' (
echo The title is on the top of the screen. The color of the text and backround is a hexadecimal number its 

01,02,03,04,05,06,07,08,09,0A,0B,0C,0D,0E,0F,10,12,13,14,15,16,17,18,19,1A,1B,1C,1D,1E,1F,20,21,23,24,25...FB,FC,FD,FE. There really are 

values with the same character but those are not valid colors in batch.
goto menu
)
If '%choose%'=='1' (
set /p dir=what is the dir of your .txt:
echo cls >> %dir101%
echo type %dir% >> %dir101%
goto menu
)
If '%choose%'=='-1' (
echo These pictures are what will be shown in the animation.
goto menu
)
If '%choose%'=='2' (
SEt /p dirx=What is the directory of the music file:
echo start !dirx! >> %dir101%
goto menu
)
If '%choose%'=='-2' (
    echo Windows will open these sound files but may not automatically play them. If they are automatically played they should be opened one 

nessicary wait before wanted time.
goto menu
    )
If '%choose%'=='3' (
echo taskkill /PID wmplayer.exe >> %dir101%
goto menu
)
If '%choose%'=='-3' (
echo This closes the sound window when you play a sound. It should be played after a couple nessicary waits or when the sound is finished.
goto menu
)
If '%choose%'=='4' (
SEt /p thyme=How much milliseconds 250 is usual:
echo ping 192.168.1.1 -n 1 -w !thyme! ^>NUL >>%dir101%
goto menu
)
If '%choose%'=='-4' (
echo These waits are extremely important and should be used almost after every .txt.
goto menu
)
    If '%choose%'=='5' (
SEt /p point=what do you want the point to be labeled as:
echo :!point! >> %dir101%
goto menu
)
If '%choose%'=='-5' (
echo You use this to label points where your animation can go back to.
goto menu
)
If '%choose%'=='6' (
:Y
SEt /p answ=Is this a math variable y/n
If !answ!==y goto yes
If !answ!==n goto no
goto Y
:yes
SEt /p name=variable name
set /p form=variable formula
echo Set /a !name!=!form! >> %dir101%
goto T
:no
SEt /p name=variable name
set /p form=variable value
echo Set !name!=!form! >> %dir101%
:T
goto menu
)
If '%choose%'=='-6' (
echo Variables can be used to count the number of times something has shown so you. If you put %variable name% it will use the value of that 

variable.
goto menu
)
If '%choose%'=='7' (
SEt /p point=What point do you want to go to:
echo goto !point! >> %dir101%
goto menu
)
If '%choose%'=='-7' (
echo This is used to go back to points. THis is where you make infinite loops.
goto menu
)
If '%choose%'=='8' (
set /p var=which variable do you want to use
set /p string=What value should be questioned
SET /p poin=What is the name of the point
echo If '%!var!%'=='!string!' goto !poin! >> %dir101%
goto menu
)
If '%choose%'=='-8' (
echo IF sentences are usually used to do a command after a variable is a certain number.
goto menu
)
If '%choose%'=='-9' (
echo This is to close the batch.
goto menu
)
If '%choose%'=='9' (
echo Thanks for making
pause
exit /b
) 
```

现在您可能看到需要是 %variablename% 的 %!var!% yeh 知道吗？我需要解释更多，以便在修复此错误后完成其余批次的发货！在那之前，我仍然需要删除它在开始时回答自己的问题的那部分！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:55:12.023

您需要学习如何将代码提炼成提出问题所需的最少代码，然后提出特定问题。

话虽如此，我想我理解你的问题。

我相信您正在动态构建批处理脚本，并且您希望您的代码看起来像

```
echo If '%someVar%'=='someString' goto someLabel 
```

要使输出中的百分比增加一倍，您需要做的就是将它们加倍

```
echo If '%%!var!%%'=='!string!' goto !poin! >> %dir101% 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-22T18:56:49.123

只要 %%variable%% 真的很简单

# ios - 如何在 IOS 中的歌曲之间淡入淡出？

> ID：10167561
> 
> 赞同：0
> 
> 时间：2012-04-16T00:56:43.127
> 
> 标签：ios, mpmusicplayercontroller

这个问题很直接。如何在 IOS 上的歌曲之间淡入淡出？我假设它正在使用 MPMusicPlayerController，但我无法找出适当的控件。我可以开始一首歌曲，停止它等等，但我不能淡入/淡出它（我知道音量属性，但试图均匀淡出它依赖于 NSTimer 每秒发射不止一次），少得多将一首歌曲淡出，而下一首歌曲淡入。

# c++ - 如何使用模板和/或规则开发一个类来解析二进制文件

> ID：10167562
> 
> 赞同：2
> 
> 时间：2012-04-16T00:56:49.630
> 
> 标签：c++, templates

我尝试做的是基于模板创建一个类，它将充当[python-bitstring](http://code.google.com/p/python-bitstring/)或 Python [Hachoir](https://bitbucket.org/haypo/hachoir/wiki/Home)。最终目标是描述一些规则或模式来解析给定的二进制文件（101 hex 编辑器具有类似的酷特性 -[二进制模板](http://www.sweetscape.com/010editor/templates.html)）。

这是我如何看待实现的一个简单示例：

```
typedef struct _BINARYFILEFORMAT
{
  short sMagic;
  int sField_1, sField_2;
  short sFrameLength;
  int OverallLength;
}
  BinaryFileFormat;

void main(int argc, char** argv)
{
  // Storage for parsed file
  BinaryFileFormat bff;

  // Describing new pattern to parse a binary file with statistical information
  Rule r = "<Magic>:2,
            <Field_1>:4,
            <Field_2>:4,
            <FrameLength>:2,
            <OverallLength>:4";

  // Parse the file and place all data into the structure
  BinaryParser bp(r, "<path_to_file>", bff);

  // Now we can work with BinaryFileFormat structure
  // ...
} 
```

所以，问题 #1 是：我如何在 C++ 中做这样的事情？有可能吗？简单的线索或提示就足以让我朝着正确的方向前进。

问题 #2 是：是否可以动态创建相应的结构（例如它是 BINARYFILEFORMAT）来存储所有二进制数据？

PS我知道，反序列化做类似的事情，但不是在我的情况下 - 在最终结果我想避免使用任何结构（当然，如果可能的话）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T01:11:19.833

这种事情通常作为预编译步骤完成。语法定义由某些工具读取。该工具输出具有保存模型的数据结构的 C++ 代码以及将其序列化和反序列化到文件所需的代码。

但是，您可以将 boost::spirit 和朋友视为在（正常）编译时在 C++ 中执行此操作的一种方式。

如果你想自己做，你可以做类似的事情......

```
Rule r = Rule("Magic", &BinaryFileFormat::sMagic, 2) +
         Rule("Field1", &BinaryFileFormat::sField_1, 4) +
         Rule("Field2", &BinaryFileFormat::sField_2, 4) +
         ...; 
```

...并使用类型推导来确定正确的原始编码/解码。

# c - SIMD 数组添加任意数组长度

> ID：10167564
> 
> 赞同：8
> 
> 时间：2012-04-16T00:57:07.050
> 
> 标签：c, arrays, sse, simd, sse2

我正在通过使用矢量内在函数重写我的个人图像处理库来学习使用 SIMD 功能。一个基本功能是一个简单的“数组`+=`”，即

```
void arrayAdd(unsigned char* A, unsigned char* B, size_t n) {
    for(size_t i=0; i < n; i++) { B[i] += A[i] };
} 
```

对于任意数组长度，显而易见的 SIMD 代码（假设按 16 对齐）类似于：

```
size_t i = 0;
__m128i xmm0, xmm1;
n16 = n - (n % 16);
for (; i < n16; i+=16) {
    xmm0 = _mm_load_si128( (__m128i*) (A + i) );
    xmm1 = _mm_load_si128( (__m128i*) (B + i) );
    xmm1 = _mm_add_epi8( xmm0, xmm1 );
    _mm_store_si128( (__m128i*) (B + i), xmm1 );
}
for (; i < n; i++) { B[i] += A[i]; } 
```

但是是否可以使用 SIMD 指令进行*所有添加？*我想试试这个：

```
__m128i mask = (0x100<<8*(n - n16))-1;
_mm_maskmoveu_si128( xmm1, mask, (__m128i*) (B + i) ); 
```

对于额外的元素，但这会导致未定义的行为吗？`mask`应该保证实际上没有访问超出数组边界（我认为）。另一种方法是先做额外的元素，然后数组需要对齐`n-n16`，这似乎不正确。

是否有另一种更优化的模式，比如矢量化循环？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T01:19:07.073

一种选择是将数组填充为 16 字节的倍数。然后您可以执行 128 位加载/添加/存储，只需忽略您关心的点之后的结果。

对于大型数组，尽管逐字节“epilog”的开销将非常小。展开循环可能会进一步提高性能，例如：

```
for (; i < n32; i+=32) {
    xmm0 = _mm_load_si128( (__m128i*) (A + i) );
    xmm1 = _mm_load_si128( (__m128i*) (B + i) );
    xmm2 = _mm_load_si128( (__m128i*) (A + i + 16) );
    xmm3 = _mm_load_si128( (__m128i*) (B + i + 16) );
    xmm1 = _mm_add_epi8( xmm0, xmm1 );
    xmm3 = _mm_add_epi8( xmm2, xmm3 );
    _mm_store_si128( (__m128i*) (B + i), xmm1 );
    _mm_store_si128( (__m128i*) (B + i + 16), xmm3 );
}
// Do another 128 bit load/add/store here if required 
```

但是如果不做一些分析就很难说。

您也可以在最后执行未对齐的加载/存储（假设您有超过 16 个字节），但这可能不会有太大的不同。例如，如果您有 20 个字节，则执行一次加载/存储以偏移 0 并执行另一个未对齐的加载/添加/存储 ( `_mm_storeu_si128`, `__mm_loadu_si128`) 以偏移 4。

您可以使用`_mm_maskmoveu_si128`，但您需要将掩码放入 xmm 寄存器，并且您的示例代码不起作用。您可能希望将掩码寄存器设置为所有 FF，然后使用移位来对齐它。归根结底，它可能会比未对齐的加载/添加/存储慢。

这将是这样的：

```
mask = _mm_cmpeq_epi8(mask, mask); // Set to all FF's
mask = _mm_srli_si128(mask, 16-(n%16)); // Align mask
_mm_maskmoveu_si128(xmm, mask, A + i); 
```

# php - 用于视频播放的 Javascript 侦听器 - 发送到数据库

> ID：10167569
> 
> 赞同：0
> 
> 时间：2012-04-16T00:58:08.440
> 
> 标签：php, javascript, mysql, video, listener

我正在使用一个网站，我将在该网站上嵌入几个 youtube 视频。我想做两件事。

1.  将 javascript 侦听器附加到视频，以便能够判断是否播放了视频
2.  使用PHP将相应的数据发送到数据库

我知道 PHP 将发送数据服务器端，但我已经从 javascript 加载了页面，查看器可能不会重新发送页面以将该数据输入数据库。我唯一的其他想法是 AJAX，但我没有任何经验。

我在想我应该做这样的事情，但我对 javascript 太陌生，不知道如何实现这一点。

```
var video = document.getElementById('player1');

video.addEventListener("timeupdate", function() {
   if (this.currentTime >= 0) {
        //take in data from the video that it has been played
    }
}, false); 
```

然后我仍然需要将数据发送到我的数据库。

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T01:07:33.643

我以前没有使用过 Youtube API，但我相信[YouTube Javascript Player API](https://developers.google.com/youtube/js_api_reference#Playback_status)是您所需要的。

*   `player.getPlayerState()`会告诉你播放器是否正在播放、暂停等。

*   `player.getCurrentTime()`将告诉您自播放器开始播放以来的秒数。

> 注意：要使用 JS api，您需要确保在播放器嵌入 url 中为播放器启用它： [http ://www.youtube.com/v/VIDEO_ID?version=3&enablejsapi=1](http://www.youtube.com/v/VIDEO_ID?version=3&enablejsapi=1)

收集到所需的数据后，使用 AJAX 将其发送到您的服务器。这部分将取决于您正在使用的 javascript 库，或者您是否只是自己编写 javascript。我喜欢使用[YUI](http://yuilibrary.com/)（由 Yahoo! 开发）。我会使用[IO](http://yuilibrary.com/yui/docs/io/)制作一个请求，并将数据作为编码的 JSON 或 POST 发送。

然后在服务器端，将接收到请求，然后您可以使用将 JSON 数据解码为数组，`json_decode()`或者只是从数组中获取数据`$_POST`，获取所需的值并将它们弹出到数据库中。

# asp.net-mvc - 文本标签列表中的实例计数

> ID：10167570
> 
> 赞同：1
> 
> 时间：2012-04-16T00:58:08.543
> 
> 标签：asp.net-mvc, count, ravendb

我正在使用 RavenDB 并允许用户将一个项目输入到数据库中，他们可以将文本标签与之关联。该项目的类是

```
public class TagItem
    {
        public string Id { get; set; }
        public string UserId { get; set; }
        public List<string> Tags { get; set;}
        public DateTime DateCreated { get; set; }
    }
} 
```

我想做的是从文档查询中选择项目中的每个单独标签的实例计数。例如

```
Bacon : 12
Fudge : 8
Marshmallow : 6 
```

我目前正在通过迭代项目并增加每个标签的计数来做到这一点，但这似乎不是一种非常优雅的获取结果的方式。我想知道是否有人对实现这一目标的更好方法提出建议？提前致谢。

-- 编辑#1 --

**马特**

我已尝试实施您对分面搜索的建议，但我似乎无法弄清楚如何使用用户 ID 的子集执行选择。我创建的索引如下

```
 public class Tag_Facets : AbstractIndexCreationTask<UserModel>
   {
    public Tag_Facets()
    {
        Map = locations => from user in users 
                           from tag in user.Tags
                           select new { Tag = tag.ToString().ToLower(), user.Id };
    }
   } 
```

我有一个 UserId 列表，我想在针对它运行方面之前使用它来缩小此选择范围，但我尝试过的方法都不想编译。你能告诉我 Where 子句会是什么样子吗？

我的 FacetSetup 如下

```
this.DocumentSession.Store(new FacetSetup { Id = "facets/TagFacets", Facets = new 
List<Facet> { new Facet { Name = "Tag" } } }); 
```

我正在尝试构建的查询是

```
var facetResults = this.DocumentSession.Query<LocationModel>("Tag/Facets")
                .Where(x => x.Id.Contains(new List<string> { "1", "2", "3" }))
                .ToFacets("facets/TagFacets"); 
```

这不会构建，因为 Contains 不接受 List

我希望你能指出我如何实现这一目标的正确方向。

另外，感谢您在 Faceted Search 方面所做的工作。这似乎是我正在寻找的执行大量我需要在 RavenDB 中运行的查询。干杯!

-- 编辑 #2 --

这是我用来实现我想要的结果的 SQL 表达式。

```
SELECT t.Tag, COUNT(*) FROM UserTags t WHERE t.UserID in ('1', '2', '3', '4', '5') GROUP BY t.Tag 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T02:02:25.720

如果您需要按标签名称分组的标签计数，RavenDB 网站已经有一个示例：

[http://ravendb.net/kb/2/creating-a-tag-cloud](http://ravendb.net/kb/2/creating-a-tag-cloud)

略微修改的索引：

```
public class Tags_Count : AbstractIndexCreationTask<Post, Tags_Count.ReduceResult>
{
    public class ReduceResult
    {
        public string Name { get; set; }
        public int Count { get; set; }
    }

    public Tags_Count()
    {
        Map = posts => from post in posts
                       from tag in post.Tags
                       select new { Name = tag.ToString().ToLower(), Count = 1 };

        Reduce = results => from tagCount in results
                            group tagCount by tagCount.Name
                            into g
                            select new {Name = g.Key, Count = g.Sum(x => x.Count) };    
    }
} 
```

当然，您需要一个条件将其限制为某个“部分”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:45:16.167

另一种方法是使用[分面搜索](http://ravendb.net/docs/client-api/faceted-search)并从中获取计数。它比 Map/Reduce 更灵活一点，因为它允许您在获得计数时指定查询。

给定这样的索引：

```
 from question in docs
    from tag in question.Tags
    select new 
    { 
        question.CreatedOn, 
        Tag = tag
    } 
```

然后，您可以像这样定义构面范围（使用默认行为，它将为您查找每个唯一术语）

```
 var facetSetupDoc = new FacetSetup 
        { 
            Id = "facets/TagFacets", 
            Facets = new List<Facet> { new Facet {Name = "Tag"} } 
        } 
```

最后你像这样查询它：

```
 var facetResults = s.Query<Question>("QuestionTags")
                .Where(x => x.CreatedOn >= new DateTime(2008, 5, 20))
                .ToFacets("facets/TagFacets"); 
```

看看这个[代码示例](https://gist.github.com/1214297)，它展示了如何实现您的确切场景。

# javascript - Javascript (jQuery) 事件失败。我怎样才能解决这个问题？

> ID：10167571
> 
> 赞同：1
> 
> 时间：2012-04-16T00:58:11.600
> 
> 标签：javascript, jquery, events, event-propagation

这个 (jQuery) 函数在`jQuery(document).ready`和上调用`jQuery(document).resize`。它在条件下运行良好，`ready`但在`resize`事件上有点麻烦。它们要么继承功能，要么在每次调整大小时似乎都会触发 slideToggle 的情况。

```
(function(jQuery){
    jQuery.fn.responsive = function() {
        // Vars
        var menuButton = jQuery('nav #menu-button');
        var menuItems = jQuery('nav ul');
        var menuLinks = jQuery('nav ul li a.scroll');
        var viewportW = jQuery(window).width(); 
        var viewportH = jQuery(window).height();  
        // Menu links
        menuLinks.click(function(e){
            if (viewportW > 800) {
                e.preventDefault();
                e.stopPropagation();
                var pos = jQuery(this.hash).offset().top;
                jQuery('html,body').animate({scrollTop: pos}, 1000);
            } else if (viewportW < 799) {
                e.stopPropagation();
                menuItems.slideUp('fast'); // Hide menu on click
            }
        });
        // Menu button
        menuButton.click(function(e){
            menuItems.slideToggle('fast');
            //e.stopPropagation();
            //e.preventDefault();
        });
    }
})(jQuery); 
```

我究竟做错了什么？我试图终止事件传播，但无济于事。

编辑：

这在以下运行：

```
// Doc ready
jQuery(document).ready(function() {
    // Run functions
    jQuery().responsive();
});

// On resize
jQuery(window).resize(function(){  
    jQuery().responsive();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:16:33.770

抱歉，我之前误解了你的问题。

如我所见，每次调整大小都不需要评估**$.responsive()**。

只是

```
$.fn.responsive = function(){
    //Vars
    var menuButton = $('nav #menu-button');
    var menuItems = $('nav ul');
    var menuLinks = $('nav ul li a.scroll');
    //Menu links
    menuLinks.click(function(event){
        //**move width&height inside
        var viewportW = $(window).width(); 
        var viewportH = $(window).height();
        if(viewportW > 800){
            event.preventDefault();
            event.stopPropagation();
            var pos = $(this.hash).offset().top;
            $('html,body').animate({scrollTop: pos}, 1000);
        }else if(viewportW < 799){
            event.stopPropagation();
            menuItems.slideUp('fast');// Hide menu on click
        }
    });
    //Menu button
    menuButton.click(function(event){
        menuItems.slideToggle('fast');
        //event.stopPropagation();
        //event.preventDefault();
    });
} 
```

然后

```
$(document).ready(function(){
    //just once
    $.fn.responsive();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T05:13:43.013

当您调用其中一个回调注册函数 like`$(someElement).click(...)`时，您实际上是在为该事件*添加一个处理程序。*如果您使用相同的方法调用该函数两次，则处理程序将被调用两次。做演示，试试这个 html 页面（与 jquery.js 在同一页面中）：

```
<html>
<head>
<script src="jquery.js"></script>
<script>
    function addhook() {
        $("div").click(function(e) {
            console.info("click!");
            $("body").append($("<div>click!</div>"));
            return false;
        });
    }

    $(function() {
        addhook();
        $(window).resize(addhook);
    });
</script>
</head>
<body>
<div><a href="#">Click me</a></div>
</body>
</html> 
```

在第一次加载页面时，它的行为符合预期，但在调整窗口大小后，单击“单击我”会获得不止一次“单击！”。

重新注册处理程序的唯一原因是各个元素是否已被销毁并重新创建。

如果发生这种情况，并且在必要时尝试可靠地重新注册处理程序并不方便，请考虑使用[委托事件](http://api.jquery.com/on/)或[.live()](http://api.jquery.com/live/)。

还要注意[.off() 函数](http://api.jquery.com/off/)，它可以删除一组元素上的所有处理程序。

最后，你可能应该改变

```
jQuery.fn.responsive = function() { 
```

到

```
jQuery.responsive = function() { 
```

添加到`jQuery.fn`添加可以从 jQuery 对象调用的函数，即允许，比如说，

```
$("div").responsive(); 
```

出于某种原因，这些函数也被添加到`jQuery`对象本身，所以它仍然有效，但后者使函数的目的更加清晰，并保持 jQuery 类的清洁。

# mysql - MySQL Query - 如何将多个客户的单数列中的行中的数值相乘并显示为价格？

> ID：10167573
> 
> 赞同：-1
> 
> 时间：2012-04-16T00:58:55.757
> 
> 标签：mysql

查询总价的最佳方法是什么？

我想将几个数值相乘并以 $ 为我的数据库中的几个客户显示结果？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T01:02:08.737

你的意思是像

```
SELECT u.user_id, sum(o.total_price) 
   FROM users u INNER JOIN order o ON u.user_id = o.user_id
   GROUP BY u.user_id 
```

# objective-c - Apple 用什么编程 Xcode？

> ID：10167574
> 
> 赞同：1
> 
> 时间：2012-04-16T00:59:24.543
> 
> 标签：objective-c, xcode

我一直在想：Apple 用什么来编写 Xcode？他们肯定没有使用 Xcode 本身对它进行编程吗？

Xcode 甚至是用 Objective-c 编程的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T01:02:19.690

当然，他们使用 Xcode 本身。没有理由不这样做。

Xcode 是一个 IDE——基本上是一个花哨的编辑器。正如您可以使用 emacs 或 vi 或 TextMate 编辑生成这些程序的代码一样，您也可以使用 Xcode 本身编辑 Xcode 的源代码。

如果您想知道 Xcode 的第一个版本是如何产生的，它很可能是使用 Xcode 的前身 Project Builder 创建的。Project Builder 的最早版本（起源于 NextStep，可以追溯到 1980 年代后期）可以用任何文本编辑器编写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T01:02:47.630

这是一个艰难的决定，但是 Xcode 完全有可能用于 Xcode 开发。毕竟Xcode也可以做OS X应用，也是用objective-c写的。

# asp.net-mvc-3 - 这种情况下如何做路由映射

> ID：10167576
> 
> 赞同：2
> 
> 时间：2012-04-16T00:59:30.030
> 
> 标签：asp.net-mvc-3

我有一个解决方案，它包含两个项目。它们都是 MVC 3 项目。

项目 A 是默认（启动）项目。

B项目是第二个。

它们都有控制器和视图。

**例子：**

项目 A 有类似 /Home/Index 的东西

项目 B 有类似 /Admin/Login 的东西

问题是如何写映射？当我输入 /Admin/Login 的 Url 时，我想查看该页面。目前我有 404 错误

感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:07:50.737

**1）**让正常的路由存在于你的 global.asax 中，你可以有一个名为“AdminController”的控制器来完成所有的管理任务。

**2）**创建一个名为“管理员”的区域，并在那里放置相关的控制器和视图。

您的默认项目（非管理员功能）可以保留在根级控制器/视图中。

我更喜欢做区域的第二种选择，因为它可以让我的项目随着它的增长而保持清洁。我想对文件进行逻辑分离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T01:12:39.267

我*感觉*您希望将项目 B 中的 /admin 包含到项目 A 中。看看这个：[如何在多个应用程序或网站中重用区域、控制器、视图、模型、路由](https://stackoverflow.com/questions/6656843/how-to-reuse-areas-controllers-views-models-routes-in-multiple-apps-or-websi)

# ruby-on-rails - 用户身份验证：确定正确用户的正确 ruby 语法？

> ID：10167577
> 
> 赞同：0
> 
> 时间：2012-04-16T00:59:34.827
> 
> 标签：ruby-on-rails

我想确保用户可以看到他们的个人资料，但看不到其他人的个人资料。我认为这会起作用，但事实并非如此。

```
 def show
    if current_user 
      if current_user.id != User.find(params[:id]) 
        @user = User.find(params[:id])
        @title = @user.name
      end if 
   else
      redirect_to root_path   
    end
  end 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:03:49.953

您想比较`id`s 而不是尝试将一个 id 与一个`User`类进行比较：

```
@user = User.find(params[:id])
if current_user.id == @user.id
  @title = @user.name
end 
```

但你最好的选择实际上可能是[试一试 CanCan](https://github.com/ryanb/cancan)之类的东西。它可以大大简化与权限相关的任务！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T01:04:55.960

你快到了。你应该把它改成这个。

```
def show
    if current_user != User.find(params[:id]) 
      @user = User.find(params[:id])
      @title = @user.name
    else
      redirect_to root_path   
    end
  end 
```

您所做的事情不起作用的原因是因为您基本上是在询问 user.id 是否等于用户对象。您应该询问 current_user 对象是否等于 User.find(id)，因为这将返回一个 User 对象。希望有帮助。

# actionscript-3 - adobe air ipad 首次加载屏幕 AS3

> ID：10167580
> 
> 赞同：3
> 
> 时间：2012-04-16T01:00:03.313
> 
> 标签：actionscript-3, air

快速提问：为什么 adobe air 在 iPad 中加载黑屏（应用程序首次启动时的初始加载屏幕）？有没有办法通过加载舞台上存在的位图或电影剪辑来解决它？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T01:15:17.167

**没有弹性**

是的，这在 iOS 上是可能的，无需使用 Flex。此过程涉及在您的项目根目录中放置一个默认图像。

更多信息可以在这里找到：

[http://help.adobe.com/en_US/air/build/WS901d38e593cd1bac1e63e3d129907d2886-8000.html#WS901d38e593cd1bac58d08f9112e26606ea8-8000](http://help.adobe.com/en_US/air/build/WS901d38e593cd1bac1e63e3d129907d2886-8000.html#WS901d38e593cd1bac58d08f9112e26606ea8-8000)

在 Android 上，我认为没有类似的功能。我相信这试图接近：

[http://swfhead.com/blog/?p=817](http://swfhead.com/blog/?p=817)

**使用弹性**

使用 Flex SDK 时，如果您的应用程序可以在内部设置启动画面：

```
<s:ViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
xmlns:s="library://ns.adobe.com/flex/spark"
splashScreenImage="@Embed('spash.png')"
splashScreenScaleMode="letterbox"> 
```

从 Flex 4.6 开始，您还可以设置一系列初始屏幕图像以在不同尺寸的屏幕上使用。

这是通过定义一个 SpashScreenImage.mxml 文件来完成的：

```
 <s:SplashScreenImage xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark">

<s:SplashScreenImageSource dpi="160--" aspectRatio="portrait" source="@Embed('portrait.png')"/>
<s:SplashScreenImageSource dpi="160--" aspectRatio="landscape" source="@Embed('landscape.png')"/>

</s:SplashScreenImage> 
```

回到您的应用程序中：

```
<s:ViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
xmlns:s="library://ns.adobe.com/flex/spark"
splashScreenImage="SpashScreenImage"> 
```

更多信息在这里：

[http://devgirl.org/2012/01/20/flex-mobile-development-dynamic-splash-screens/](http://devgirl.org/2012/01/20/flex-mobile-development-dynamic-splash-screens/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:35:13.470

这里似乎有一些误导。

在 iOS 上，您需要设置 splashScreenImage 并包含“Default.png”

当应用程序启动时，您将立即看到“Default.png”图像被放大。几乎在此之后，您将立即显示“SplashScreenImage”。

默认图像在应用程序开始加载之前显示...... SplashScreenImage 在应用程序加载时显示。

# c# - 在 GridView 中选择一行并将记录 id 传递给重定向页面

> ID：10167583
> 
> 赞同：0
> 
> 时间：2012-04-16T01:00:33.143
> 
> 标签：c#, asp.net, gridview

我一直在为这个问题苦苦挣扎一整天，但我似乎没有找到答案。

我有一个名为 PickRecord.aspx 的页面，其中动态生成了“开始面试”、“编辑”和“查看记录”列，它们会将我相应地重定向到 StartInterview.aspx 或 EditViewInterview.aspx。

PickRecord.aspx - GridView 填充有受访者姓名，并生成一个按钮，单击该按钮应将我重定向到 StartInterview.aspx 并在所选记录中为我提供其他字段/信息。

StartInterview.aspx - 包含有关所选记录的附加信息，这些信息需要使用数据库中的数据进行填充。我试过查询字符串，使用 selectedIndexChanged 并且没有运气。

如果有人能指导我完成这个，我会非常感激。提前致谢！

```
PickRecord.aspx

<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" Height="470px" Width="660px" HorizontalAlign="Center" SelectedIndexChanged="GridView1_SelectedIndexChanged">

    <Columns>   
        <asp:BoundField DataField="First_Name" HeaderText="First Name" ItemStyle-HorizontalAlign = "Center">    
        </asp:BoundField>   

        <asp:BoundField DataField="Last_Name" HeaderText=" Last Name" ItemStyle-HorizontalAlign = "Center" >    
        </asp:BoundField>   

        <asp:BoundField DataField="Salon_Number" HeaderText="Salon" ItemStyle-HorizontalAlign = "Center" >  
        </asp:BoundField>   

    </Columns>  
</asp:GridView> 
```

PickRecord.aspx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.IO;
using System.Data.SqlClient;
using System.Data;

namespace TSS.Trainer
{

    public partial class Trainer_PickRecord : System.Web.UI.Page
    {
    static string id;

    protected void Page_Load(object sender, EventArgs e)
    {
        dbConnection dbConn = new dbConnection();
        string s = Request.QueryString["mode"].ToString();

        if (!IsPostBack)
        {
            FillMonth(ddl_T_month);
            FillYear(ddl_T_year);
        }

        if (s == "a")
        {

            TemplateField tf1 = new TemplateField();
            tf1.ItemTemplate = new btntemplate1();
            tf1.HeaderText = "Start Interview";
            tf1.ItemStyle.HorizontalAlign = HorizontalAlign.Center;
            GridView1.Columns.Add(tf1);

            DataTable dtInterviewee = new DataTable();
            dtInterviewee = Salon_WebService.populateInterviewee();
            GridView1.DataSource = dtInterviewee;
            GridView1.DataBind();
        }

        else if (s == "b")
        {
            TemplateField tf2 = new TemplateField();
            TemplateField tf3 = new TemplateField();
            tf2.ItemTemplate = new btntemplate2();
            tf3.ItemTemplate = new btntemplate3();
            tf2.HeaderText = "Edit";
            tf3.HeaderText = "View";
            tf2.ItemStyle.HorizontalAlign = HorizontalAlign.Center;
            tf3.ItemStyle.HorizontalAlign = HorizontalAlign.Center;
            GridView1.Columns.Add(tf2);
            GridView1.Columns.Add(tf3);

            DataTable dtInterviewee = new DataTable();
            dtInterviewee = Salon_WebService.populateInterviewee();
            GridView1.DataSource = dtInterviewee;
            GridView1.DataBind();
        }

         void GridView1_SelectedIndexChanged(object sender, EventArgs e)
         {
            GridViewRow row = GridView1.SelectedRow;
            id = row.Cells[0].Text;
         }

    }

    class btntemplate1 : ITemplate
    {

        public void InstantiateIn(System.Web.UI.Control container)
        {

            HyperLink h1 = new HyperLink();
            h1.NavigateUrl = "Trainer_StartInterview.aspx?x= " +id;
            h1.ImageUrl = "../Images/T_StartIV_small.png";
            container.Controls.Add(h1);
        }
    }

    class btntemplate2 : ITemplate
    {
        public void InstantiateIn(System.Web.UI.Control container)
        {

            HyperLink h2 = new HyperLink();
            h2.NavigateUrl = "Trainer_Home.aspx";
            h2.ImageUrl = "../Images/Edit_small.png";

            container.Controls.Add(h2);

        }
    }

    class btntemplate3 : ITemplate
    {
        public void InstantiateIn(System.Web.UI.Control container)
        {
            HyperLink h3 = new HyperLink();
            h3.NavigateUrl = "Trainer_ViewRecord.aspx";
            h3.ImageUrl = "../Images/View_small.png";

            container.Controls.Add(h3);
        }
    }
} 
```

}

开始面试.aspx

```
<div id="T_StartInterview_formHeader" class="fh2">
        <center>
            <table>
                <tr>
                    <td style="text-align: right; color: white">
                        <asp:Label ID="lblCreate_Date" runat="server" Text="Create Date : "></asp:Label>
                    </td>
                    <td>
                        <asp:Label ID="LabelCD" runat="server" Text="December 05, 2011 "></asp:Label>
                    </td>
                    <td style="text-align: right; color: white">
                        <asp:Label ID="lblUpdate_Date" runat="server" Text="Update Date : "></asp:Label>
                    </td>
                    <td>
                        <asp:Label ID="lblUD" runat="server" Text="December 09, 2011 "></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: right; color: white">
                        <asp:Label ID="lblCreatedBy" runat="server" Text="Created By : "></asp:Label>
                    </td>
                    <td>
                        <asp:Label ID="lblCB" runat="server" Text='<%# Eval ("First_Name") %>' class="lblSizeR"></asp:Label>
                    </td>
                    <td style="text-align: right; color: white">
                        <asp:Label ID="lblUpBy" runat="server" Text="Updated By : "></asp:Label>
                    </td>
                    <td>
                        <asp:Label ID="lblUB" runat="server" Text="Sharon Miller " class="lblSizeR"></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: right; color: white">
                        <asp:Label ID="lblFName" runat="server" Text="First Name : "></asp:Label>
                    </td>
                    <td>
                        <asp:Label ID="lblFN" runat="server" Text="Michelle"></asp:Label>
                    </td>
                    <td style="text-align: right; color: white">
                        <asp:Label ID="lblLName" runat="server" Text="Last Name : "></asp:Label>
                    </td>
                    <td>
                        <asp:Label ID="lblLN" runat="server" Text="Rusk"></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: right; color: white">
                        <asp:Label ID="lblPhone" runat="server" Text="Phone : "></asp:Label>
                    </td>
                    <td>
                        <asp:Label ID="lblPh" runat="server" Text="269 123 1234"></asp:Label>
                    </td>
                    <td style="text-align: right; color: white">
                        <asp:Label ID="lblEmail" runat="server" Text="E-Mail : "></asp:Label>
                    </td>
                    <td>
                        <asp:Label ID="lblMail" runat="server" Text="xyz@visiblechanges.com" class="lblSizeR"></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: right; color: white">
                        <asp:Label ID="lblSalon" runat="server" Text="Salon: "></asp:Label>
                    </td>
                    <td>
                        <asp:Label ID="lblSal" runat="server" Text="Memorial City Mall" class="lblSizeR"></asp:Label>
                    </td>
                </tr>
            </table> 
```

Trainer_StartInterview.aspx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace TSS.Trainer
{
public partial class Trainer_StartInterview : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        string s = Request.QueryString["id"].ToString();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:54:39.960

您没有提到确切的问题，但是如果您甚至没有点击 StartInterview.aspx 页面，那么我建议您删除代码中的复杂实例化，并将其替换为具有按钮甚至按钮列的简单基于模板的列。您可以检查此链接的实现：[单击gridview按钮字段时重定向到特定页面](https://stackoverflow.com/questions/9686792/redirect-to-specific-page-when-a-gridview-buttonfield-is-clicked)

# php - 强制浏览器在更新后重新加载 css

> ID：10167599
> 
> 赞同：4
> 
> 时间：2012-04-16T01:03:10.760
> 
> 标签：php, css, cakephp, caching, browser-state

当我更新服务器上的 css 文件时，许多客户端浏览器会在相当长的一段时间内继续使用旧的缓存 css 文件加载页面。

在搜索了许多帖子并将不同的想法放在一起之后，我想出了似乎是最简单和最便宜的方法。

在链接任何 css 文件的地方，附加`href`文件最后修改日期的时间戳，如下所示：

```
<link rel="stylesheet" type="text/css" href="main.css?t=<?=filemtime('main.css')?>" /> 
```

我正在使用 CakePHP，所以我在布局文件中所做的是：

```
 <? $t = filemtime(CSS . 'main.css'); ?>
  <?=$html->css("schedule.css?t={$t}") ?> 
```

所以css文件的链接末尾有一个额外的标签，但只要文件没有被修改，它就保持不变。这意味着浏览器将能够像往常一样缓存它。然而，一旦文件被修改，链接就会改变，浏览器不会错过任何一个节拍。

仍然使用这种方法，人们会因为将某些东西用于不打算使用的东西而感到有点肮脏。正在发送的“消息”没有任何用处，因为消息的内容很重要，除了识别它的存在。

以下是我的问题：

1.  是否可以承认客户端存在从浏览器缓存中看到带有过期样式表（或 JavaScript）的修订 HTML 的风险？
2.  这是黑客还是合法的解决方案？
3.  有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T01:16:17.620

我认为你的方法没有任何问题。更常见的是，这称为缓存破坏或缓存失效。

但是，由于您使用的是 URL，例如：`http://site.com/assets/mystyle.css?29320202020`，因此 CDN 可能存在问题。CDN 将看到 GET 参数并认为它是一个动态请求，因此它会向您的服务器请求文件，这违背了在 CDN 中缓存副本的目的。

为什么我这样做是在我的文件名中包含缓存破坏参数：`http://site.com/assets/mystyle.2390202202.css`. 我正在使用优秀的[Assetic 库](https://github.com/kriswallsmith/assetic)来执行此操作，并且刚刚编写了一些简单的代码，以便我的模板知道它需要`mystyle.css`并且`mystyle.2390202202.css`由 Assetic 动态生成并插入到模板中。

这种方法应该让您在很好地处理 CDN 的同时获得缓存破坏功能。

* * *

其他可能的解决方案：

*   ETags：浏览器会向服务器发送一个带有 ETag 的请求（可以认为是文件的哈希），如果文件没有改变，服务器会以未修改的 header 响应进行响应。缺点：仍然需要发出 HTTP 请求。

*   设置过期标头：服务器会告诉浏览器文件将在某个日期过期，如果还不是那个日期，浏览器将不会向服务器请求副本并使用其本地缓存的副本。缺点：如果服务器上的文件在日期之前发生更改，浏览器的用户将需要手动进行硬刷新。

这就是为什么我更喜欢只使用缓存破坏参数的原因：我可以将文件的 expires 标头设置为 5 年后过期。并且浏览器不应该对该文件发出 http 请求，除非我更新文件并更改缓存破坏参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T22:10:06.517

CakePHP 有一个非常简单易用的解决方案。只需取消注释此行：

```
//Configure::write('Asset.timestamp', true); 
```

从`core.php`

根据该文件，这将

> 将带有最后修改时间的时间戳应用于静态资产（js、css、图像）。将附加一个包含文件修改时间的查询字符串参数。这对于使浏览器缓存失效很有用。

这非常简单，并且在大多数情况下都可以使用，但它并非万无一失。大多数代理不使用“？”缓存资源。在 URL 中，所以如果你想解决这些情况，你应该实现一个更复杂的解决方案，就像 phpdev 建议的那样。

# jquery - 如果标签是从 tagName 生成的，Emberjs 不会给 jQuery 一个句柄

> ID：10167600
> 
> 赞同：0
> 
> 时间：2012-04-16T01:03:13.107
> 
> 标签：jquery, ember.js

图片应该有点左，`$(this)`是空的。我怀疑是因为缺少模板，我通过`tagName`. 有没有办法在不使用模板的情况下解决这个问题？

[http://jsfiddle.net/T4NJh/5/](http://jsfiddle.net/T4NJh/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:38:21.197

这里的问题是您试图在创建元素之前更改位置。发生这种情况是因为 RunLoop 将属性更改批处理并在渲染之前触发它们。在这种情况下，我将添加一个`didInsertElement`也调用更新方法的函数。请参阅[http://jsfiddle.net/wagenet/T4NJh/6/](http://jsfiddle.net/wagenet/T4NJh/6/)。

# javascript - 如何在流星应用程序中向 mongodb 添加两列唯一 ID？

> ID：10167604
> 
> 赞同：27
> 
> 时间：2012-04-16T01:03:39.530
> 
> 标签：javascript, mongodb, meteor

我正在尝试在流星应用程序中的基础 mongodb 上创建一个两列唯一索引并且遇到了问题。我在流星文档中找不到任何东西。我已经从 chrome 控制台尝试过。我从 term 开始尝试过，甚至试图将 mongod 指向 .meteor 内的 /db/ 目录。我试过了

`Collection.ensureIndex({first_id: 1, another_id: 1}, {unique: true});`变化。

我希望能够防止流星应用程序 mongo 集合上的重复条目。

想知道有没有人知道这个？

我回答了我自己的问题，真是个菜鸟。

我想到了。

1.  启动流星服务器

2.  打开第二个终端并输入`meteor mongo`

然后创建您的索引...例如，我为 thumbsup 和 thumbsdown 类型系统的记录做了这些。

```
db.thumbsup.ensureIndex({item_id: 1, user_id: 1}, {unique: true})
db.thumbsdown.ensureIndex({item_id: 1, user_id: 1}, {unique: true}) 
```

现在，只需要找出一个引导安装设置，它会在推送到 prod 而不是手动创建这些设置。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-06T19:45:05.830

# Collection._ensureIndex（索引，选项）

在 Meteor 源代码中搜索，我发现了一个与*ensureIndex*绑定的名为`_ensureIndex`. 对于单键基本索引，您可以按照`packages/accounts-base/accounts_server.js`在 Meteor 上强制使用唯一用户名的示例：

```
Meteor.users._ensureIndex('username', {unique: 1, sparse: 1}); 
```

对于多键“复合”索引：

```
Collection._ensureIndex({first_id:1, another_id:1}, {unique: 1}); 
```

前面的代码，当放置**在服务器端**时，确保设置了索引。

# 警告

注意 _ensureIndex 实施警告：

> 稍后我们将实际设计一个索引 API。现在，我们只是通过 Mongo's，但让它同步。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-16T03:14:04.370

根据[文档](http://docs.meteor.com/#collections)“Minimongo 目前没有索引。这很快就会到来。” 查看 Collection 上可用的方法，没有`ensureIndex`.

您可以运行`meteor mongo`mongo shell 并在服务器端启用索引，但 Collection 对象仍然不知道它们。因此，该应用程序将允许您将多个实例添加到集合缓存中，而在服务器端，其他插入将静默失败（错误被写入输出）。当您进行硬页面刷新时，应用程序将与服务器重新同步

所以你现在最好的选择可能是做类似的事情：

```
var count = MyCollection.find({first_id: 'foo', another_id: 'bar'}).count()
if (count === 0)
    MyCollection.insert({first_id: 'foo', another_id: 'bar'}); 
```

这显然不理想，但工作正常。您还可以在服务器上的 mongodb 中启用索引，因此即使在竞争条件下，您实际上也不会得到重复记录。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-11T11:32:18.103

Smartpackage [aldeed:collection2](https://github.com/aldeed/meteor-collection2)支持唯一索引以及模式验证。验证将同时发生在服务器和客户端上（反应性地），因此您可以对客户端上的错误做出反应。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T18:13:04.050

实际上，为什么不用 Meteor.method 在服务器上使用 upsert 并且您也可以使用 ts 发送跟踪它：//仅服务器

```
Meteor.methods({
 add_only_once = function(id1,id2){
   SomeCollection.update(
     {first_id:id1,another_id:id2},{$set:{ts:Date.now()}},{upsert:True});
 }
}); 
```

// 客户

```
Meteor.call('add_only_once',doc1._id, doc2._id); 
```

// 在服务器上运行的实际代码

```
if(Meteor.is_server) {
    Meteor.methods({
        register_code: function (key,monitor) {
             Codes.update({key:key},{$set:{ts:Date.now()}},{upsert:true});
        }
     ... 
```

# java - Seam Mail 内联图像问题

> ID：10167610
> 
> 赞同：1
> 
> 时间：2012-04-16T01:05:03.760
> 
> 标签：java, email, exception, jboss, seam

[我正在尝试按照此处讨论](http://docs.jboss.com/seam/latest/reference/en-US/html/mail.html#d0e20833)的说明发送带有内嵌图像附件的 HTML 电子邮件。在我的电子邮件 XHTML 文件中，我有以下几行来附加图像，然后在消息中显示它：

```
<m:message xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:m="http://jboss.com/products/seam/mail">

    <m:from name="#{emailDetails.senderName}"
        address="#{emailDetails.senderAddress}" />
    <m:to name="#{emailDetails.recipientName}"
        address="#{emailDetails.recipientAddress}" />
    <m:subject>
        <h:outputText value="#{emailDetails.subject}" />
    </m:subject>

    <m:body>
        <p>THIS IS A TEST</p>
    <m:attachment contentType="image/png"
        fileName="dwx_logo.png" value="#{imageData}"
        status="logoImage" disposition="inline" /> 
    <img src="cid:#{logoImage.contentId}" alt="logo header"
        border="no" style="margin: 0px; padding: 0px; display: block;" />
    </m:body>
</m:message> 
```

但是，当我使用此代码呈现消息时：

```
@In
private Renderer renderer = null;

...

    String senderName = "test";
    String senderAddress = ...
    String recipientName = "test";
    String recipientAddress = ...
    String subject = test";
    String messageTemplate = "/WEB-INF/emailTemplates/test.xhtml";

    InputStream inStream = Thread.currentThread().getContextClassLoader()
            .getResourceAsStream("/logo_light.png");
    byte[] imageData = IOUtils.toByteArray(inStream);

    Map<String, Object> params = new HashMap<String, Object>();
    params.put("imageData", imageData);

    EmailDetails details = new EmailDetails(senderName, senderAddress,
            recipientName, recipientAddress, subject);
    details.setMessageTemplate(messageTemplate);
    details.setEventParameters(params);

    Contexts.getEventContext().set("emailDetails", details);
    if (params != null) {
        Iterator<Map.Entry<String, Object>> it = params.entrySet()
                .iterator();
        while (it.hasNext()) {
            Map.Entry<String, Object> entry = it.next();
            Contexts.getEventContext()
                    .set(entry.getKey(), entry.getValue());
        }
    }

    renderer.render(messageTemplate); 
```

我得到以下异常......

> 请求处理期间的异常：由 javax.el.E​​LException 引起，消息为：“java.lang.NullPointerException” org.jboss.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:339) org.jboss.el.util.ReflectionUtil。 invokeMethod(ReflectionUtil.java:280) org.jboss.el.parser.AstMethodSuffix.getValue(AstMethodSuffix.java:59) org.jboss.el.parser.AstMethodSuffix.invoke(AstMethodSuffix.java:65) org.jboss.el。 parser.AstValue.invoke(AstValue.java:96) org.jboss.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276) org.jboss.seam.core.Expressions$2.invoke(Expressions.java:221) org.jboss .seam.navigation.Pages.callAction(Pages.java:708) org.jboss.seam.navigation.Pages.preRender(Pages.java:331) org.jboss.seam.jsf.SeamPhaseListener.preRenderPage(SeamPhaseListener.java:560 ) org.jboss.seam.jsf.SeamPhaseListener。beforeRenderResponse(SeamPhaseListener.java:471) org.jboss.seam.jsf.SeamPhaseListener.beforeServletPhase(SeamPhaseListener.java:147) org.jboss.seam.jsf.SeamPhaseListener.beforePhase(SeamPhaseListener.java:117) com.sun.faces。生命周期.Phase.handleBeforePhase(Phase.java:214) com.sun.faces.lifecycle.Phase.doPhase(Phase.java:96) com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) javax. faces.webapp.FacesServlet.service(FacesServlet.java:266)java:139) javax.faces.webapp.FacesServlet.service(FacesServlet.java:266)java:139) javax.faces.webapp.FacesServlet.service(FacesServlet.java:266)
> 
> 由 java.lang.NullPointerException 引起，消息为：“” org.jboss.seam.mail.ui.UIBody.encodeChildren(UIBody.java:79) org.jboss.seam.ui.util.JSF.renderChild(JSF.java: 175) org.jboss.seam.ui.util.JSF.renderChildren(JSF.java:163) org.jboss.seam.mail.ui.UIMessage.encodeChildren(UIMessage.java:192) org.jboss.seam.ui。 util.JSF.renderChild(JSF.java:175) org.jboss.seam.ui.util.JSF.renderChildren(JSF.java:163) org.jboss.seam.ui.facelet.RendererRequest.renderFacelet(RendererRequest.java: 140) org.jboss.seam.ui.facelet.RendererRequest.run(RendererRequest.java:107) org.jboss.seam.ui.facelet.FaceletsRenderer.render(FaceletsRenderer.java:43) com.dezinewerks.market.web。 actions.test.TestAction.runTest(TestAction.java:986) sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) sun.reflect.NativeMethodAccessorImpl。invoke(NativeMethodAccessorImpl.java:39) sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) java.lang.reflect.Method.invoke(Method.java:597) org.jboss.seam.util.Reflections.invoke( Reflections.java:22)

我还尝试删除“disposition=inline”行，此时代码按预期工作。它只是不内联渲染图像，这违背了目的。知道为什么设置处置属性值会导致此异常吗？这是 Seam Mail 中的错误吗？或者我在我的代码中做错了什么？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T19:51:48.313

我自己解决了这个问题。事实证明，任何内联附件都需要在`<m:body />`标签之外定义。标准附件在邮件正文中工作得很好，但必须在正文之外声明内联附件。一旦我做出这个改变，一切都开始按预期工作。这在文档中并不清楚，但在 Seam 发行版中的邮件示例中显示。

# c++ - 在大矩阵中找到小矩阵的有趣算法

> ID：10167620
> 
> 赞同：0
> 
> 时间：2012-04-16T01:06:14.307
> 
> 标签：c++, algorithm

我有一个超级矩阵（1024x768），我正在尝试找到一个（36x49）。我正在使用相似性技术来确定它们是否相似。

主要问题之一是试图将超矩阵拆分为小矩阵的块，我有代码，我只是无法确定正确的数字，因此我将封装所有值/和/找到块之间的相似性超矩阵和小矩阵的块。

任何人都可以提供任何解决方案吗？谢谢 ：）

# intellisense - Javascript AMD 模块：如何跨模块获取 Visual Studio 智能感知

> ID：10167621
> 
> 赞同：8
> 
> 时间：2012-04-16T01:06:15.210
> 
> 标签：intellisense, requirejs, js-amd

在 javascript 上下文中查看异步模块定义 (AMD) 后，我想知道如何在 Visual Studio 2010 中为依赖模块获取智能感知。

例如给定模块A：

```
define(function() {
    return {
        square: function(value) {
            return value * value;
        }
    };
}); 
```

和相应的模块 B：

```
define(["A"], function(a) {
    return {
        value: a.square(10)
    }
}); 
```

然后我想对模块 B 中的模块 A（表示为参数 a）进行完整的智能感知。请注意，这两个模块都将在单独的文件中定义（在本例中为 A.js 和 B.js）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T18:33:40.910

这里的评论帮助我让它部分工作：[评论 GitHub Repo](https://github.com/jrburke/requirejs-intellisense/commit/c214216e5eece2114f42c513e46f604d33699184#commitcomment-1732386)

基本上，我必须确保：

```
/// <reference path="require.js" /> 
```

位于 _references.js 文件的顶部。它适用于“要求”和“定义”块，但似乎不适用于“定义”块内的匿名函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T14:47:33.607

看起来 RequireJS 的作者正在这里提供 Intellisense 支持： [https ://github.com/jrburke/requirejs-intellisense](https://github.com/jrburke/requirejs-intellisense)

不幸的是，我还没有让“魔法”发挥作用。

**更新**：我确实让它在某些情况下工作。特别是当所有 js 文件都在同一个文件夹中时，它的效果很好。

# c# - 将文件中的数据读入类对象数组

> ID：10167623
> 
> 赞同：0
> 
> 时间：2012-04-16T01:06:32.530
> 
> 标签：c#, arrays, file-io, split

我正在从需要放入对象数组（myEmployees）的文件中读取数据。我相信我的代码在本示例结束之前是正确的，但我不确定如何从文件中读取数据，将其拆分，然后将其正确放入我的类对象数组中。

```
//declare an array of employees
Employee[] myEmployees = new Employee[10];

//declare other variables
string inputLine;
string EmpName;
int EmpNum;
double EmpWage;
double EmpHours;
string EmpAdd;

//declare filepath
string environment = System.Environment.GetFolderPath
(System.Environment.SpecialFolder.Personal) + "\\";

//get input
Console.Write("\nEnter a file name in My Documents: ");
string input = Console.ReadLine();
string path = environment + input;
Console.WriteLine("Opening the file...");

//read file
StreamReader myFile = new StreamReader(path);
inputLine = (myFile.ReadLine()); 
```

所以我从一个结构如下的文件中读取数据：

```
Employee Number
Employee Name
Employee Address
Employee wage Employee Hours 
```

我需要从此文件中读取数据并将其解析到我创建的员工数组中。这是 Employee 类的类数据：

```
public void Employeeconst ()
{
    employeeNum = 0;
    name = "";
    address = "";
    wage = 0.0;
    hours = 0.0;
}
public void SetEmployeeNum(int a)
{
    employeeNum = a;
}
public void SetName(string a)
{
    name = a;
}
public void SetAddress(string a)
{
    address = a;
}
public void SetWage(double a)
{
    wage = a;
}
public void SetHours(double a)
{
    hours = a;
}
public int GetEmployeeNum()
{
    return employeeNum;
}
public string GetName()
{
    return name;
}
public string GetAddress()
{
    return address;
}
public double GetWage()
{
    return wage;
}
public double GetHours()
{
    return hours;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T02:44:27.213

首先，我建议使用属性重新设计您的 Employee 类，它更具可读性并且更好地遵循面向对象编程的原则：

```
public class Employee
{
    public int EmployeeNum { get; set; }
    public string Name { get; set; }
    public string Address { get; set; }
    public double Wage { get; set; }
    public double Hours { get; set; }

    public void Employee()
    {
        EmployeeNum = 0;
        Name = "";
        Address = "";
        Wage = 0.0;
        Hours = 0.0;
    }
} 
```

还可以考虑将 StreamReader 包装在 ' *using* ' 关键字中，以确保正确关闭文件。程序的其余部分很简单，只需逐行读取文件直到文件结束。将每一行解析为所需的类型并将值设置为 Employee 对象：

```
 using(StreamReader myFile = new StreamReader(path))
        {
            int index = 0;
            while(!myFile.EndOfStream)
            {
                Employee E = new Employee();
                E.EmployeeNum = Int32.Parse(myFile.ReadLine());
                E.Name = myFile.ReadLine();
                E.Address = myFile.ReadLine();
                E.Wage = Double.Parse(myFile.ReadLine());
                E.Hours = Double.Parse(myFile.ReadLine());
                myEmployees[index++] = E;
            }
        } 
```

我没有在我的示例代码中包含任何错误检查，所以这取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:03:32.587

我建议逐行阅读

请参阅 MSDN 上的示例

[http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)

对于您阅读的每一行，您都会有一个字符串 - 您可以使用 string.Split 将此字符串拆分为一个数组。

```
string mystring = "50305 FirstName LastName 1234 Anywhere Place 133.25 40";
string[] myarray = mystring.Split(' '); 
```

但是，我建议处理双空格等的字符串输入。

你可以做这样的事情来摆脱重复的空格。

```
string mynewstring = mystring.Replace("  ", " ");

while (mynewstring.Contains("  "))
{
  mynewstring = mystring.Replace("  ", " ");
} 
```

# iphone - 在 iPhone 生产代码中使用常量 x/y 坐标是否安全

> ID：10167625
> 
> 赞同：3
> 
> 时间：2012-04-16T01:06:39.997
> 
> 标签：iphone, objective-c, xcode, uiview

我在我的 iPhone 应用程序的几个地方的代码中使用了常量坐标，特别是当我以编程方式创建视图、设置 uiview 子类的属性时。

例子：

```
UIImage* img = [UIImage imageNamed:@"background.png"];
UIImageView *imgView = [[[UIImageView alloc] initWithImage: img] autorelease];
imgView.center = CGPointMake(160, 175); // --> Are these constant usages safe?
[self.view addSubview: imgView]; 
```

我已经在模拟器、3G 和 4S 设备上对其进行了测试，并且可以正常工作。我应该担心未来的设备分辨率或任何其他问题吗？如果是这样，我应该如何使这段代码更安全？这里有什么编码原则吗？

谢谢 Mbh

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T01:36:02.320

在大多数情况下，这没什么大不了的，但使用参考总是更好。

例如，如果你的图像视图在屏幕中间，你可以使用`screensize.width/2`代替`160`，理论上是一样的，但首先，你在做什么更清楚，其次，如果屏幕要改变，你' d 做好准备。另一个例子是使用`navigationBar.frame.size.height`代替`44`（无论如何都不太可能改变）。此外，如果您参考您自己放置的其他视图，并且您移动一个，所有这些都会随之移动；）。

简而言之，如果您有可以使用的参考，请使用它，否则，请不要担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T01:14:48.067

也许——您只需要知道您与之交互的 API 将如何更详细地解释这些值。空间翻转了吗？您调用的 API 是否以点为单位进行解释？像素？笛卡尔坐标？等等

# java - 无法使用窗口调整图形大小（Java）

> ID：10167634
> 
> 赞同：0
> 
> 时间：2012-04-16T01:08:34.190
> 
> 标签：java

我正在构建一个程序来绘制自 1900 年以来婴儿名字的流行度。我已经得到了图表部分，但我无法让图表随窗口调整大小。我使用以下代码向扩展 GCanvas 的类添加了一个组件侦听器：

```
import acm.graphics.*;
import java.awt.event.*;
import java.util.*;
import java.awt.*;

public class NameSurferGraph extends GCanvas
implements NameSurferConstants, ComponentListener {

private static final long serialVersionUID = 1L;

//Sets up the graph
public NameSurferGraph() {
    addComponentListener(this);
    nameList = new ArrayList<NameSurferEntry>();
}

//Adds an entry to the array of names being graphed
public void addEntry(NameSurferEntry entry) {
    nameList.add(entry);
}

//Clears and then redraws the graph
public void update() {
    removeAll();
    drawBackground();
    for (int i=0; i<nameList.size(); i++) {
            drawLineForOneName(i);
    }
}

//Draws the background lines and labels for the graph
private void drawBackground() {
    String decade = "";
    for (int i = 0; i<NDECADES; i++) {
        double x = (APPLICATION_WIDTH/NDECADES)*i;
        decade = new Integer(STARTING_DECADE+10*i).toString();
        GLine line = new GLine(x,0,x,APPLICATION_HEIGHT);
        GLine hLine = new GLine(0,GRAPH_MARGIN_SIZE,APPLICATION_WIDTH-APPLICATION_WIDTH/NDECADES,GRAPH_MARGIN_SIZE);
        GLine hLine2 = new GLine(0,APPLICATION_HEIGHT-GRAPH_MARGIN_SIZE,APPLICATION_WIDTH-APPLICATION_WIDTH/NDECADES,APPLICATION_HEIGHT-GRAPH_MARGIN_SIZE);
        GLabel label = new GLabel(decade);
        label.setLocation(x+4,APPLICATION_HEIGHT);
        add(line);
        add(hLine);
        add(hLine2);
        add(label);
        }
}

//More code draws the actual lines.

//ivars
private ArrayList<NameSurferEntry> nameList;
private GLine line;

//Implementation of the ComponentListener interface
public void componentHidden(ComponentEvent e) { }
public void componentMoved(ComponentEvent e) { }
public void componentResized(ComponentEvent e) { update(); }
public void componentShown(ComponentEvent e) { }
}
}
} 
```

但是当我从另一个类调用它的方法时，什么也没有发生。

```
import acm.program.*;
import java.awt.event.*;
import javax.swing.*;

public class NameSurfer extends Program implements NameSurferConstants {

private static final long serialVersionUID = 1L;

private NameSurferDataBase database;
private String name;
private NameSurferEntry entry = new NameSurferEntry(name);

//Initializes the program
public void init() {
    putInteractors();
    database = new NameSurferDataBase(NAMES_DATA_FILE);
}

//Adds the interactors
public void putInteractors() {
    JButton clear = new JButton("Clear");
    JButton clickGraph = new JButton("Graph");
    JLabel nameLabel = new JLabel("Name");
    add(graph);
    add(nameLabel,SOUTH);
    add(textfield,SOUTH);
    add(clickGraph,SOUTH);
    add(clear,SOUTH);
    addActionListeners();
    textfield.addActionListener(this);
    getMouseListeners();
}
//Other code gets user input    

//Graphs the name
public void graphName(String name) {
    entry = database.findEntry(name);
    graph.addEntry(entry);
    graph.update();
}

//ivars
private JTextField textfield = new JTextField(20);
public NameSurferGraph graph = new NameSurferGraph();

} 
```

关于我可能做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T01:24:05.703

是否在任何地方`APPLICATION_WIDTH`都`APPLICATION_HEIGHT`发生了变化？全大写的名称对我来说意味着固定值（没有看到实际定义）。由于您是根据这些值计算所有内容，因此如果这是阻止您正确处理调整大小的原因，我不会感到惊讶

# java - Java - MVC 模式——绘制和克服空指针异常

> ID：10167635
> 
> 赞同：2
> 
> 时间：2012-04-16T01:08:51.330
> 
> 标签：java, model-view-controller

尝试实现 MVC 模式，继续回到`NullPointerException`.

在设置应根据用户输入重新绘制数据的 GUI 区域时，我觉得我错过了一个技巧。例外指向这一点；

`display.replot(model.getData(), model.getSamples());`

`display`是一个包含paint方法的类的实例。`getData`并且`getSamples`在模型中进行了描述，并且基于设置器，这些设置器应该随着用户对 GUI 的输入而更新。

我认为问题可能与最初为空的数据集有关，所以我为模型提供了初始条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T01:20:15.580

A`NullPointerException`表示您正在对不存在的 ( `null`) 对象调用函数，或者如果函数调用的参数之一是 ，则函数调用可以故意抛出该异常`null`。您需要检查是哪种情况，并在其`if`周围放置防护装置或以其他方式确保对象有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T01:16:42.377

使用功能强大的 IDE（例如 IntelliJ）很容易弄清楚 NPE。使用调试器进行测试会让事情变得简单明了。

即使没有，NPE 也很容易弄清楚，因为堆栈跟踪会告诉您 .java 源文件和它发生的行号。您应该能够打开 .java 源文件，打开行号显示，然后直接找到错误的根源。

查看该行上的所有对象引用，看看哪一个是空的。那是您未能初始化的那个。

在您的情况下，我看不到 newPlot 的初始化位置。您只需声明名称和引用类型，但不要求它指向任何内容。默认值为空。

如果传入构造函数的 newData List 为空，您将遇到同样的问题。你不检查它。

# eclipse - 提交到 git 存储库时出现 Aptana 错误

> ID：10167637
> 
> 赞同：1
> 
> 时间：2012-04-16T01:08:57.893
> 
> 标签：eclipse, git, aptana, aptana3

我正在使用 Aptana 3.0.7，每当我尝试将更改提交到 git 存储库时，都会收到此错误：

> 未处理的事件循环异常 没有更多句柄 [MOZILLA_FIVE_HOME='/usr/lib/xulrunner-addons'] (java.lang.UnsatisfiedLinkError: 无法加载 SWT 库。原因：/home/amir/Desktop/Aptana Studio 3.0.5/configuration /org.eclipse.osgi/bundles/226/1/.cp/libswt-mozilla-gtk-3659.so：libxpcom.so：无法打开共享对象文件：Java 中没有此类文件或目录没有 swt-mozilla-gtk。 library.path /tmp/swtlib-32/libswt-mozilla-gtk-3659.so：libxpcom.so：无法打开共享对象文件：没有这样的文件或目录无法加载库：/tmp/swtlib-32/libswt- Mozilla-gtk.so )

紧随其后的是这条消息：

> 发生 SWT 错误，建议您退出 workbench 等。

我下载了 aptana 3.0.9 但发生了同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:36:57.070

这个[旧线程](http://blog.aplikacja.info/2009/10/libxpcom-so-cannot-open-shared-object-file-no-such-file-or-directory/)（2009）提到了将（符号链接）链接到丢失的库的可能性。
但我建议首先[检查 xulrunner 的版本](https://stackoverflow.com/questions/8697685/aptana-3-github-can-clone-but-cant-commit/8698445#8698445)。

> 解决方案是 Aptana Studio 无法使用 Arch Linux 存储库中的 Xulrunner 版本，因为它太新了。

换句话说，它不依赖于 Aptana 版本本身，而是依赖于一个外部组件 ( [XULrunner](https://developer.mozilla.org/en/XULRunner) ) 的版本。

# c# - 在多个项目中使用可继承的表单

> ID：10167638
> 
> 赞同：0
> 
> 时间：2012-04-16T01:09:15.230
> 
> 标签：c#, .net, winforms, visual-studio-2010

我创建了一个继承自 system.windows.forms.form 的 windows glass 窗体，然后将其放置在类库项目中。

我现在想在多个其他 Windows 窗体项目中使用此表单。我该怎么做呢？

我创建了对类库的引用，但我不知道如何实际获取表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T01:59:33.447

如果您已经有了参考，那么您需要做的就是使用它。将表单的命名空间添加到您的类文件中：

```
using NamespaceOfWindowsGlassForm; 
```

然后使用表格：

```
WindowsGlassForm form = new WindowsGlassForm(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T02:05:24.280

听起来您希望项目中的表单从您的 Glass Form 派生而来，据我所知。

确保您的 GlassForm 课程是公开的；例如。

```
public class GlassForm : System.Windows.Forms.Form
{
} 
```

现在您已经验证它是公共的，对于您希望从 GlassForm 继承的任何表单，将继承的类从 Form 更改为 GlassForm。例如。

```
public class MyForm : Form
{
} 
```

至

```
public class MyForm : YourClassLibraryNamespace.GlassForm
{
} 
```

您的表单现在将派生自 GlassForm，并且在 WinForm 设计器中也将如此。如果您只是想在项目中以调用的方式使用该表单，您可以按照 Bob Horn 所说的去做。

```
using YourClassLibraryNamespace;

public class MyForm : Form
{
    public void ShowGlassFormModal() {
        using (GlassForm form = new GlassForm()) {
            form.ShowDialog();
        }
    }

    public void ShowGlassForm() {
        new GlassForm().Show();
    }
} 
```

# java - Android - 自定义排序 Listview / SAX xml

> ID：10167640
> 
> 赞同：0
> 
> 时间：2012-04-16T01:10:02.650
> 
> 标签：java, android

我只需要一些想法来对结果进行排序。

场景如下： 包含两列的 XML 文件：State 和 Territory（客户涵盖的所有州） SAX 解析器将 State = NY 或 Territory 包含 NY 结果的结果返回到 ListView

我需要按州首先是 NY 并且领土包含 NY 第二的记录对结果进行排序。州和领地的排序都是先进先出的。

我真的不想通读 XML 两次，所以我只是在寻找有关如何有效执行它的建议。

现在，我最好的想法是在我的 Sax 处理程序中创建两个不同的列表对象，然后在我的解析器中创建 getListA、getListB。

只要确保我没有错过一些明显的替代解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:01:49.460

实际上，这很完美。

创建了一个单独的列表对象和吸气剂。将记录汇集到处理程序中的适当列表，在解析器中将一个列表添加到另一个列表 (addAll())。

像桃子一样工作！

# sql - SQL Plus 子查询

> ID：10167647
> 
> 赞同：1
> 
> 时间：2012-04-16T01:12:01.217
> 
> 标签：sql, database, subquery

使用 SQL Plus

需要以下方面的帮助： 任何给定日期的销售额摘要，按包裹类型分类（即，客户订阅的每个包裹在指定日期的总销售额，而不是支付的账单）。该报告应提供有关每种包裹类型、包裹价格、已售包裹数量以及该包裹的总销售额的详细信息。再一次记住，这将是一个日期驱动的报告。

```
SET ECHO ON

SPOOL C:\CIS336\InfoMiners\Week7\Final\InfoMiners_Week7_Task5_FinalSpool.txt

SET LINESIZE 120
SET PAGESIZE 45
SET FEEDBACK 1

-- CIS-336 Online
-- XXXXX XXXXX
-- InfoMiners Week 7 - Task 5 - Reports
-- april 15, 2012

-- DROP Table Statements

DROP TABLE package_guide CASCADE CONSTRAINTS PURGE;
DROP TABLE employee CASCADE CONSTRAINTS PURGE;
DROP TABLE customer CASCADE CONSTRAINTS PURGE;
DROP TABLE cust_survey CASCADE CONSTRAINTS PURGE;
DROP TABLE bill_info CASCADE CONSTRAINTS PURGE;
DROP TABLE package CASCADE CONSTRAINTS PURGE;
DROP TABLE channel CASCADE CONSTRAINTS PURGE;
DROP TABLE program CASCADE CONSTRAINTS PURGE;
DROP TABLE ratings CASCADE CONSTRAINTS PURGE;
DROP TABLE network_supplier CASCADE CONSTRAINTS PURGE;

-- CREATE Table Statements

CREATE TABLE network_supplier
(
supplier_id VARCHAR2(15) CONSTRAINT pk_supplier_id PRIMARY KEY,
supplier_name VARCHAR2(15) NOT NULL,
address VARCHAR2(25) NOT NULL,
city VARCHAR2(17) NOT NULL,
state CHAR(2) NOT NULL,
zip_code NUMBER(5) NOT NULL,
contact_name VARCHAR2(20) NOT NULL,
contact_phone VARCHAR2(14) NOT NULL
);

CREATE TABLE ratings
(
rating_code VARCHAR2(17) CONSTRAINT pk_rating_code PRIMARY KEY,
rating_description VARCHAR2(70)
);

CREATE TABLE program
(
program_id NUMBER(17) CONSTRAINT pk_program_id PRIMARY KEY,
name VARCHAR2(70) NOT NULL,
supplier_id VARCHAR2(15) REFERENCES network_supplier(supplier_id),
length NUMBER(5) NOT NULL,
description VARCHAR2(30),
type VARCHAR2 (15) NOT NULL,
rating_code VARCHAR2(17) REFERENCES ratings(rating_code)
);

CREATE TABLE channel
(
channel_id VARCHAR2(20) CONSTRAINT pk_channel_id PRIMARY KEY,
ch_number NUMBER(2) NOT NULL,
name VARCHAR2(20) NOT NULL,
type VARCHAR2(20) NOT NULL,
customer_count NUMBER(30) NOT NULL,
supplier_id VARCHAR2(15) REFERENCES network_supplier(supplier_id),
show_time TIMESTAMP NOT NULL
);

CREATE TABLE package
(
package_id VARCHAR2(2) CONSTRAINT pk_package_id PRIMARY KEY,
name VARCHAR2(25) NOT NULL,
cost NUMBER(5) NOT NULL
);

CREATE TABLE bill_info
(
acct_num NUMBER(10) CONSTRAINT pk_acct_num PRIMARY KEY,
balance NUMBER(5) NOT NULL,
due_date DATE NOT NULL,
acct_current NUMBER(1),
package_id VARCHAR2(2) REFERENCES package(package_id)
);

CREATE TABLE cust_survey
(
survey_id VARCHAR2(20) CONSTRAINT pk_survey_id PRIMARY KEY,
fav_channel VARCHAR2(20) NOT NULL,
months_paid NUMBER(3) NOT NULL
);

CREATE TABLE customer
(
customer_id NUMBER(10) CONSTRAINT pk_customer_id PRIMARY KEY,
active_date DATE NOT NULL,
cancel_date DATE,
cancel_reason NUMBER(1),
first_name VARCHAR2(10) NOT NULL,
last_name VARCHAR2(10) NOT NULL,
address VARCHAR2(25) NOT NULL,
city VARCHAR2(15) NOT NULL,
state CHAR(2) NOT NULL,
zip_code NUMBER(5) NOT NULL,
phone_num NUMBER(10) NOT NULL,
acct_num NUMBER(10) REFERENCES bill_info(acct_num) NOT NULL,
survey_id VARCHAR2(20) REFERENCES cust_survey(survey_id) NOT NULL,
package_id VARCHAR2(2) REFERENCES package(package_id) NOT NULL,
email VARCHAR(20) NOT NULL
);

CREATE TABLE employee
(
emp_num NUMBER(11) CONSTRAINT pk_emp_num PRIMARY KEY,
first_name VARCHAR2(10) NOT NULL,
last_name VARCHAR2(10) NOT NULL,
emp_phone NUMBER(10) NOT NULL
);

CREATE TABLE package_guide
(
package_id REFERENCES package(package_id) NOT NULL,
channel_id REFERENCES channel(channel_id) NOT NULL,
program_id REFERENCES program(program_id) NOT NULL
);

-- INSERT Statements

-- Data for network_supplier Table (4 Records)

INSERT INTO network_supplier (supplier_id, supplier_name, address, city, state, zip_code, contact_name, contact_phone)
VALUES (1, 'NBC', '10880 Wilshire Blvd #1200', 'Los Angeles', 'CA', 90057, 'XXXXX XXXXX', '(XXX) XXX-XXXX' );

INSERT INTO network_supplier (supplier_id, supplier_name, address, city, state, zip_code, contact_name, contact_phone)
VALUES (2, 'ABC', '111 Hollywood Blvd.', 'Los Angeles', 'CA', 90046, 'Jack Carverisi', '(XXX) XXX-XXXX' );

INSERT INTO network_supplier (supplier_id, supplier_name, address, city, state, zip_code, contact_name, contact_phone)
VALUES (3, 'FOX', '10960 Wilshire Blvd', 'Los Angeles', 'CA', 90057, 'Janis Carmikel', '(XXX) XXX-XXXX' );

INSERT INTO network_supplier (supplier_id, supplier_name, address, city, state, zip_code, contact_name, contact_phone)
VALUES (4, 'WARNER', '3701 W Oak St.', 'Burbank', 'CA', 91501, 'Simon Philips', '(XXX) XXX-XXXX' );

-- Data for ratings Table (7 Records)

INSERT INTO ratings (rating_code, rating_description)
VALUES ('TV-Y', 'All Children');

INSERT INTO ratings
VALUES ('TV-Y7', 'Directed to Older Children');

INSERT INTO ratings
VALUES ('TV-Y7-FV', 'Directed to Older Children - Fantasy Viol 
```

已经尝试过：select 语句的不同变体，但我不明白使用子查询来完全使 select 语句工作。

阅读更多：SQL Plus 作业问题 - JustAnswer [http://www.justanswer.com/computer-programming/6j1qs-sql-plus-homework-question.html#ixzz1sA4U5tTz](http://www.justanswer.com/computer-programming/6j1qs-sql-plus-homework-question.html#ixzz1sA4U5tTz)

# perl - 检查给定的字符串是否匹配文件中的前缀之一

> ID：10167648
> 
> 赞同：1
> 
> 时间：2012-04-16T01:12:22.967
> 
> 标签：perl, file-io, match, matching

要求：给定一个带有前缀列表的文件，每行一个，检查给定的包名称，如果它与其中一个前缀匹配，则返回 true。这是一个涉及很多包的项目的子程序。所以效率很重要。O(logn) 或 O(1) 搜索会很棒。

我是 Perl 的新手。我对这个问题进行了一些搜索，并试图遵循[这个线程中的答案](https://stackoverflow.com/a/5134544/1131594)。我所做的唯一更改是从文件中读取前缀。但它不会起作用。

这是我的代码：

```
use strict;
use List::Util qw/first/;

sub isSkippedPackage {
  my $packageName = shift;
  my $found = first { $packageName =~ /^$_/ } @prefix;
  return (defined($found))
}   

my $file = qw(packageReplicationBlacklist.cfg);
open my $blacklist, '<', $file;
my @prefix = <$blacklist>;
print "prefix has: ", @prefix;
close $blacklist;

my $skipPackages = 1;
my $test = 'PackageA';
if ( $skipPackages && !isSkippedPackage($test) ) {
    print "No prefix for PackageA.\n" 
}
$test = 'PackageB';
if ( $skipPackages && isSkippedPackage($test) ) {
    print "Got a prefix for PackageB.\n" 
} 
```

在 packageReplicationBlacklist.cfg 文件中：

```
PackageB
PackageC 
```

电流是：

```
prefix has: PackageB
PackageC
No prefix for PackageA. 
```

如果我使用“我的@prefix = qw/PackageB|PackageC/;”，它会起作用。所以，我的猜测是文件被读入一个数组而不是一组字符串。如何将其更改为一组字符串？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:25:39.607

我尝试运行您的程序，但出现以下错误：

```
Global symbol "@prefix" requires explicit package name at ./test.pl line 8.
Global symbol "$skipPackages" requires explicit package name at ./test.pl line 24.
Global symbol "$skipPackages" requires explicit package name at ./test.pl line 28. 
```

然而，这并不让我感到惊讶，因为我知道我会得到这些错误。我很惊讶你也没有得到它们。

您需要阅读 Perl 变量范围，可以在 Perldocs 的[Perlsub 教程](http://perldoc.perl.org/perlsub.html)中找到。[`perldoc`](http://perldoc.perl.org/perldoc.html)Perl 通过命令包含内置文档。您还可以在[Perldoc 网页](http://perldoc.perl.org)中查看相同的文档。请注意您选择了正确的 Perl 版本。

基本上，Perl 中有两种类型的变量：*全局*包变量和词法范围的局部变量。¹

包变量是使用`our $varable;`语法定义的。词法范围的*局部*变量使用`my $variable;`语法定义。

在您的情况下，您`my @packages`在`if statement`. 这是一个仅在 if 语句本身中可用的变量。试试这个：

```
#! /usr/bin/env perl
# use strict;    #We don't want to use strict!
# use warnings;  #Not that either!

if (1 == 1) { #Always true
   my $foo = "Foo is defined";
   print "1\. The value of foo is $foo\n";
}
print "2\. The value of foo is $foo\n"; 
```

如果我们运行这个程序，我们会得到：

```
1\. The value of foo is Foo is defined
2\. The value of foo is 
```

那是因为我们失去了`$foo`as 我们离开`if`语句的定义。

一个简单的想法是花括号表示块，如果一个变量被声明为`my`在块内，它在块外是未定义的。

现在，试试这个：

```
#! /usr/bin/env perl
# use strict;    #We don't want to use strict!
# use warnings;  #Not that either!

if (1 == 1) { #Always true
   our $foo = "Foo is defined";  #Package Scoped
   print "1\. The value of foo is $foo\n";
}
print "2\. The value of foo is $foo\n"; 
```

现在，我们运行这个程序，我们得到：

```
1\. The value of foo is Foo is defined
2\. The value of foo is Foo is defined 
```

那是因为当我们用 声明一个变量时`our`，它是在整个~~包~~ *文件*中定义的。²

事实上，如果您将花括号视为定义*块*，您可以认为在块中声明的*my*变量仅在该块中可见。你甚至可以这样做：

```
#! /usr/bin/env perl
# use strict;    #We don't want to use strict!
# use warnings;  #Not that either!

{ #Creating a block...
   my $foo = "Foo is defined";
   print "1\. The value of foo is $foo\n";
} #End of the block

print "2\. The value of foo is $foo\n"; 
```

同样，你得到：

```
1\. The value of foo is Foo is defined
2\. The value of foo is 
```

那是因为花括号表示一个块，一旦你离开这个块，变量就不再被定义了。

现在，尝试最后一个程序并启用`use strict;`and`use warnings;`语句。你应该得到这样的东西：

```
Global symbol "$foo" requires explicit package name at ./test2.pl line 10. 
```

那是因为`use strict;`并`use warnings;`警告您各种类型的错误。`use strict;`要求您使用`our`or声明一个变量`my`，并在变量超出范围时警告您。`use warnings;`编译指示会给你很多警告，最重要的是你在使用变量时没有先给它一个值。

让我们再次重做最后一个程序：

```
#! /usr/bin/env perl
use strict;
use warnings;

my $foo;
{
    $foo = "Foo is defined";
    print "1\. The value of foo is $foo\n";
}

print "2\. The value of foo is $foo\n"; 
```

这一次，我`my $foo;`在块之外声明，所以它在整个程序中的词法范围。运行这个，我们得到：

```
The value of foo is Foo is defined
The value of foo is Foo is defined 
```

对于冗长的解释，我很抱歉，但我希望您能更好地理解 Perl 中变量的作用域。如果您在程序的开头声明了`my @packages`和`my $skipPackages`，则您的程序将编译。除了它不做你想做的事。相反，您会遇到以前遇到的错误。

我使用更现代的语法稍微改写了您的程序：

*   我同时使用`use strict;`和`use warnings;`。这只是很好的程序实践。
*   我已经使用`use constant`来为文件名声明一个常量。语法有点奇怪，因为常量不像 Perl 变量那样有[符号。](http://en.wikipedia.org/wiki/Sigil_(computer_programming))但是，您的文件名是一个常量。你不希望这在你的程序中间发生变化。
*   我正在使用`say`自 Perl 5.10 以来可用的。就像`print`，但您不必`\n`在每行的末尾继续使用。
*   您需要了解`qq(..)`创建带有双引号的单词和`qw(..)`创建*列表*之间的区别。你说 `my $file = qw(packageReplicationBlacklist.cfg);`哪个语法不正确。它在这种情况下有效，因为 Perl 列表返回这个特定实例中所有字符串值的标量，所以你很幸运。你想做的是`my $file = qq(packageReplicationBlacklist.cfg);`. 事实上，您可能真的只是想要`q(packageReplacationBlacklist.cfg)`哪些是真正的单引号。这样，如果您的文件以`@`or开头，则不会导致问题`$`。查看 Perldoc 中的[Quote like Operators](http://perldoc.perl.org/perlop.html#Quote-Like-Operators)。
*   我已经取消了这个`List::Util`包，因为它只是比它的价值更该死的工作。我将向您展示一个稍后使用它的重写子例程。
*   而不是`if (defined($blacklist)) {`查看文件是否打开的语句，我只是获取我的语句的返回值，如果我无法打开文件`open`，则使用来杀死我的程序。如果您有 Perl 5.10.1 或更高版本，`die`您还可以使用[autodie自动为您杀死打开的错误文件。](http://perldoc.perl.org/autodie.html)
*   我将我在子程序中使用的所有参数传递给我的子程序。这样，我不依赖于全局变量值。我的子程序使用所有局部变量。
*   最后，我使用一个`foreach`循环来循环我想要测试的所有包。这样，我就不会重复代码。

现在你的程序：

```
#! /usr/bin/env perl

use strict;
use warnings;
use feature qw(say);

use constant {
    FILE_NAME => qq(packageReplicationBlackList.cfg),
};

my @prefix_list;
open my $black_list, "<", FILE_NAME
    or die qq(Couldn't open file ") . FILE_NAME . qq(" for reading: $!\n);

chomp ( @prefix_list = <$black_list> );
close $black_list;

foreach my $package_name  ( qw(PackageA PackageB) ) {
    if ( is_skipped_package( $package_name, @prefix_list ) ) {
        say qq(Package "$package_name" has a prefix);
    }
    else {
        say qq(No prefix found for "$package_name");
    }
}

sub is_skipped_package {
    my $package_name = shift;
    my @list         = @_;

    foreach my $package_to_test (@list) {
        if ( $package_name eq  $package_to_test ) {
            return $package_name;
        }
        else {
            return;
        }
    }
} 
```

这会产生：

```
No prefix found for "PackageA"
Package "PackageB" has a prefix 
```

这就是你想要的。

现在，如果您真的想使用 的第一个功能`List::Util`，您需要这样做：

```
sub is_skipped_package {
    my $package_name = shift;
    my @list         = @_;

    use List::Util qw(first);

    return first { $_ eq $package_name }   @list;
} 
```

我正在检查是否相等，而不是我认为您真正想要做的正则表达式。请注意，我只是返回`first`函数的值。如果`first`找到匹配的`$package_name`，它会返回包名，因此结果被定义，我的`if ( is_skipped_package( $package_name, @prefix_list ) ) {`陈述将是真的。如果`$package_name`未找到，该`first`函数将返回一个未定义的值，我的`if ( is_skipped_package( $package_name, @prefix_list ) ) {`语句将失败。

# 附录

> 还有一个问题：这个子程序是一个大型项目的一部分（这就是我没有使用 die 的原因，因为如果没有这样的文件，我们不希望它死掉）。

很公平。您可以将整个内容更改为`if`声明：`if (open my $file, "<", $file) {`. 这样，您正在检查是否`open`有效，而不是是否`$file`已定义。

> 如果我想将前缀存储到成员字段中（如在 Java 中），请说 $self->list。怎么做？是不是像 pkg = new packages(skipPackages => 1, list => @prefix_list); 在新方法中，我应该使用@{$self->list} 还是$self->@list？谢谢！

这开始变得有点复杂......

*   您需要了解[Perl 包](http://perldoc.perl.org/functions/package.html)以及 Perl 命名空间如何工作。
*   您需要了解[Perl OOP 编程](http://perldoc.perl.org/perlboot.html)及其工作原理。
*   您需要了解[参考资料](http://perldoc.perl.org/perlref.html)。注意在子程序中，我传入了整个数组？不礼貌，但我不想讨论如何传递对数组的引用，因为你说你是 Perl 的新手。
*   Perl 本身需要一个更安全的基础。

但是，您问了，所以这是一个粗略的示例。该程序将被称为 Local/Blacklist.pm。您可以通过说“使用 Local::BlackList”来使用它：

```
package Local::BlackList;

use strict;
use warnings;
use feature qw(say);

sub new {
    my $class = shift;
    my $self = {};
    bless $self, $class;
    return;
}

sub list {
    my $self =   shift;
    my $member = shift;

    if (not defined $self->{LIST}) {
        $self->{LIST} = [];
    }

    if (defined $member) {
       push @{$self->{LIST}}, $member;
    }

    return @{$self->{LIST}};
}

sub is_member {
   my $self = shift;
   my $item = shift;

   my @list = $self->list;
   foreach my $member (@list) {
      if ($member eq $item) {
          return $item;
      }
   }
   return;
} 
```

我已经定义了一个名为 Local::BlackLlist 的类，它将包含您的列表。这是一个相当简单的类。无法从列表中删除成员。该类包含两种方法：一种将字段添加到列表并返回列表。另一个查看成员是否是列表的成员。

要创建一个新的类对象，您可以这样做：

```
 my $blacklist = Local::BlackList->new; 
```

要将前缀添加到列表中，您可以这样做：

```
 $blacklist->list( $prefix ); 
```

要检索列表，您可以这样做：

```
 my @prefix_list = $blacklist->list; 
```

要检查某物是否是列表的成员，您可以这样做：

```
 if ( $blacklist->is_member( $member ) )  {
    say qq(Item "$member" is a member of the list);
 }
 else {
    say qq(Item "$member" is not a member of the list);
 } 
```

请注意，有三个子例程。这`new`是我的*构造函数*。*请注意，关键字new*没有什么特别之处。这是多年来发展起来的一种标准。我的`new`子程序所做的只是创建对匿名哈希的引用。我创建的*对象*只是对该哈希的引用。

请注意，在我的`list`子例程中，我检查散列的键*LIST*是否存在。如果它不存在，我创建一个哈希键“LIST”，它只是指向一个匿名数组。在我的列表子例程中，我*取消引用*这个对数组的引用，如下所示`@{$self->{LIST}}`。我可以将东西推送到以这种方式*取消引用*的数组上，并且我可以返回数组本身。如果我觉得数组可以变得非常非常大并且会占用内存，我本可以返回对数组的引用：

```
sub list {
    my $self =   shift;
    my $member = shift;

    if (not defined $self->{LIST}) {
        $self->{LIST} = [];
    }

    if (defined $member) {
       push @{$self->{LIST}}, $member;
    }

    return $self->{LIST};
} 
```

现在，我必须这样做：

```
my $list_ref = $blacklist->list;
my @list = @{$list_ref}; 
```

将返回的引用转换回数组。顺便说一句，我不喜欢这样，因为它允许人们直接操作数组：

```
 $list_ref = @blacklist->list;

   $value= pop @{$list_ref}; 
```

这实际上改变了我的班级对象！我想非常小心地将人们的参考资料交还给我的班级结构，因为人们可能会在没有意识到的情况下做某事。

这只是一个体验如何编写面向对象的 Perl。学习基础知识，然后再开始过多地涉及引用和更复杂的数据结构。

* * *

^(1.)我撒谎了，现在还有Perl 5.12 新的*状态*变量，以及可怕的*局部*变量，它并不是真正的局部变量，而是一个全局包变量，它是 Perl 过去开发的一部分二十年。

在 99% 的情况下，如果您使用 声明一个变量`local $variable`，您可能做错了。你知道亚当和杰米在每次流言终结者节目之前是怎么说的“不要在家里尝试这个。我们是专业人士？” 这就是`local`宣言。`local`除非您是顶级 Perl 开发人员并且喜欢生活在一个事情可能会在您面前爆炸的世界，否则不要使用。

^(2.)用语句声明一个包`package`。一旦使用，所有 Perl 包变量和函数都在该包中。包主要用于 Perl 模块中，以防止在定义子例程和非词法范围变量时发生名称冲突。有关详细信息，请参阅[包](http://perldoc.perl.org/functions/package.html)函数。

在您的情况下，一切都只是`main`包的一部分，这意味着它在整个文件中都可用，

# c - C中的中断信号

> ID：10167649
> 
> 赞同：0
> 
> 时间：2012-04-16T01:12:34.127
> 
> 标签：c, sockets

这是我用信号中断进程的代码。

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <signal.h>

int main(void){
    void sigint_handler(int sig); /* prototype */
    char s[200];

    if(signal(SIGINT, sigint_handler) == SIG_ERR){
        perror("signal");
        exit(1);
    }

    printf("Enter a string:\n");

    if(gets(s) == NULL)
        perror("gets");
    else
        printf("You entered: \"%s\"\n", s);

    return 0;
}

void sigint_handler(int sig){
    printf("Not this time!\n");
} 
```

问题是如何捕获信号，如 SIGINT、SIGKILL、SIGHUP 和 SIGTERM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T01:18:41.813

`int sig`您的函数收到的参数`sigint_handler`是被捕获的信号。定义值的常量在 `<signal.h>`. 所以，例如

```
void sigint_handler(int sig){
    if (sig == SIGINT)
        printf("That was a SIGINT!\n");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T03:16:17.053

也许有点过长，但这里有一些示例代码可以使用：

`SIGILL`在没有编译器抱怨的情况下找到一种方法时遇到了一些问题；但至少在 gcc 下工作 - 但又一次......

> gcc -Wall -Wextra -pedantic -ggdb -std=c89 -o eigabrt eigabrt.c

```
#include <stdio.h>
#include <stdlib.h>    /* exit() */
#include <signal.h>    /* signal() */
#include <unistd.h>    /* sleep() */

void explain_sig(int sig)
{
    switch (sig) {
    case SIGABRT:
        printf("SIGABRT (abnormal termination)");
        break;
    case SIGFPE:
        printf("SIGFPE (arithmetic error)");
        break;
    case SIGILL:
        printf("SIGILL (invalid execution)");
        break;
    case SIGINT:
        printf("SIGINT ((asynchronous) interactive attention)");
        break;
    case SIGSEGV:
        printf("SIGSEGV (illegal storage access)");
        break;
    case SIGTERM:
        printf("SIGTERM ((asynchronous) termination request)");
        break;
    }
}

void my_sigtrap(int sig)
{
    printf("\nReceived signal %d, ", sig);
    explain_sig(sig);
    putchar('\n');

    switch (sig) {
    case SIGABRT:
        break;
    case SIGFPE:
        printf("Problem with your math\n");
        break;
    case SIGILL:
        exit(sig);
        break;
    case SIGINT:
        printf("Try once more. I dare you.\n");
        /* exit(sig); */
        break;
    case SIGSEGV:
        /* Everything is udefined, do not free here */
        exit(sig);
        break;
    case SIGTERM:
        break;
    }

    printf("Restoring to default\n");
    signal(sig, SIG_DFL);
}

/*void set_trap(void (*new_fun)(int), void (*signal)(int))*/
void set_trap(int set_sig, void (*new_fun)(int))
{
    void (*orig_sig_fun)(int);

    orig_sig_fun = signal(set_sig, new_fun);

    printf("Setting my own fun for ");
    explain_sig(set_sig);
    printf("\n -- ");

    if (orig_sig_fun == SIG_IGN) {
        printf("Was previously ignored.\n");
        signal(set_sig, SIG_IGN);
    } else if (orig_sig_fun == SIG_DFL) {
        printf("Was handled by default.\n");
    } else if (orig_sig_fun == SIG_ERR) {
        perror("Failed to set signal.\nNo trap\n -- ");
    }
}

void my_exit(void)
{
    printf("my exit called\n");
}

static const unsigned char insn[4] = { 0xff, 0xff, 0xff, 0xff };

/* ref. switch satement below for how to trigger various signals 
 * I.e.: $ ./my_prog s , causes SIGSEGV */
int main(int argc, char *argv[])
{
    int i = 0;
    unsigned char action = 'x'; /* default action, ref switch below */
    int loops_b4_act = 1;       /* loops before signal is trigged */

    int j = 0;              /* Used to cause SIGFPE */
    void (*sigill)(void) = (char*)insn; /* Used to cause SIGILL */
    int *segv;              /* Used to cause SIGSEGV */

    if (argc > 1)
        action = argv[1][0];

    printf("Action to trigger: %c\n", action);

    atexit(my_exit);

    set_trap(SIGABRT, &my_sigtrap);
    set_trap(SIGFPE, &my_sigtrap);
    set_trap(SIGILL, &my_sigtrap);
    set_trap(SIGINT, &my_sigtrap);
    set_trap(SIGSEGV, &my_sigtrap);
    set_trap(SIGTERM, &my_sigtrap);

    setbuf(stdout, NULL); /* Turning off buffering */
    putchar('.');

    while (1) {
        if (i++ == loops_b4_act) {
            switch (action) {
            case 'a': abort(); break;   /* cause SIGABRT */
            case 'f': i /= j; break;    /* casue SIGFPE */
            case 'l': sigill(); break;  /* casue SIGILL */
            case 'i': raise(SIGINT); break; /* cause SIGINT, or,
                             * ie: Ctrl+C */
            case 's': *segv = i; break; /* casue SIGSEGV */
            case 't': raise(SIGTERM); break;/* cause SIGTERM, or,
                             * ie: kill -15 pid */
            case 'x': exit(0); break;   /* exit by exit() */
            }
        }

        sleep(1);
        putchar('.');
    }

    return 0;
} 
```

# c# - 限制列表视图中的列大于 X（NotifyPropertyChanged 不起作用）

> ID：10167651
> 
> 赞同：5
> 
> 时间：2012-04-16T01:13:09.473
> 
> 标签：c#, wpf, data-binding, observablecollection, inotifypropertychanged

**以下是我键入数字时程序的行为方式：**

![在此处输入图像描述](../Images/d859afcc151b9d83bb4fa59a6640a51a.png)

我有一个绑定到可观察集合的列表视图。这是我的代码：（你可以跳过这部分，类很简单）

**班级项目：**

```
/// <summary>
/// Represent each row in listview
/// </summary>
public class Item : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }

    void UpdateSum()
    {
        Sum = Col1;// + col2 + col3 etc
    }

    decimal _Col1;
    public decimal Col1 //                                         ||
    {                   //                                         ||
        get             //                                         ||
        {               //                                         ||              
            return _Col1; //                                       ||                              
        }                 //                                       ||              
        set               //                                       ||                
        {                 //                                    \  ||   /                        
            if (value > 100)  //                                 \ || /                                
            {                 //                                   \/                  
                Col1 = 100;  // !!!!!!!!!!!!!!!!!!!!!  HERE why does the listview does't update!!!!!!!!
                NotifyPropertyChanged("Col1");
            }else
            {
                _Col1 = value;
            }
            UpdateSum();
            NotifyPropertyChanged("Col1");
        }
    }

    decimal _Sum;
    public decimal Sum
    {
        get
        {
            return _Sum;
        }
        set
        {
            _Sum = value;

            NotifyPropertyChanged("Sum");
        }
    }
} 
```

**代码背后**

```
using System;
using System.Windows;
using System.ComponentModel;
using System.Collections.ObjectModel;

namespace WpfApplication3
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {

        public ObservableCollection<Item> Collection = new ObservableCollection<Item>();

        public MainWindow()
        {
            InitializeComponent();

            this.Loaded += new RoutedEventHandler(MainWindow_Loaded);
        }

        void MainWindow_Loaded(object sender, RoutedEventArgs e)
        {

            Collection.Add(new Item());
            listView2.DataContext = Collection;
            listView2.ItemsSource = Collection;
            listView2.IsSynchronizedWithCurrentItem = true;
        }
    }
} 
```

**xaml 中的列表视图：**

```
 <ListView Name="listView2" >
        <ListView.View>
            <GridView>
                <GridViewColumn Header="Column1" Width="200">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <TextBox Width="200" Text="{Binding Col1, UpdateSourceTrigger=PropertyChanged}"></TextBox>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
                <GridViewColumn Header="Sum" Width="200">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <TextBox Width="200" Text="{Binding Sum, UpdateSourceTrigger=PropertyChanged}"></TextBox>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>

            </GridView>
        </ListView.View>
    </ListView> 
```

* * *

## 无论如何，为什么当我更新`Col1=100`它不会在列表视图中更新！还要注意总和是如何变成 100 而不是 1000 的。

我不希望 column1 大于某个数字 x。在我的真实程序中，这个数字是动态变化的，我在 Item 类中计算它。

我怎样才能解决这个问题？

* * *

* * *

## 编辑

我发现了一些有趣的东西......如果我开始输入不同的数字，看看会发生什么：在这个例子中我只输入 5：

![在此处输入图像描述](../Images/85445e9a2d62d5011a16ec6de67fa446.png)

## 它在第 3 步有效！！！

一旦它等于 100，它就会停止工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:36:22.927

我成功了！！！我变了：

```
 Text="{Binding Col1, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" 
```

为了：

```
 Text="{Binding Col1, Mode=TwoWay}" 
```

## 但是我需要在文本框更改时更新属性，所以这可能是其他人的解决方案......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:53:10.160

基本上，您试图在 DataBinding 期间更改属性值。问题是 WPF 试图变得聪明，而不是监听 DataBinding 期间引发的属性更改。这是一个众所周知的问题，有许多解决方法：

*   [使用 WPF 双向数据绑定时更改 setter 属性中的值](https://stackoverflow.com/questions/857116/change-value-in-setter-property-when-using-wpf-two-way-databinding)
*   [WPF中的数据绑定问题：有解决方案](http://www.lhotka.net/weblog/DataBindingIssueInWPFWithSolution.aspx)

尽管 MS 在 WPF4.0 中做了一些修复，请参阅：[WPF 4.0 Data Binding Change (great feature)](http://karlshifflett.wordpress.com/2009/05/27/wpf-4-0-data-binding-change-great-feature/)

但是我做了一些快速测试，但由于`UpdateSourceTrigger=PropertyChanged`.

但是我可以想出一个“有效”的非常肮脏的解决方法：

```
public decimal Col1
{
    get { return _Col1; }
    set
    {
        //Change the property value based on condition
        _Col1 = value > 100 ? 100 : value;
        UpdateSum();
        //HACK: Simulate that the property change not fired from the setter
        Dispatcher.CurrentDispatcher
            .BeginInvoke(new Action(() => NotifyPropertyChanged("Col1")));
        //HACK: Cancel the bindig based on condition
        if (value > 100)
            throw new Exception();
    }
} 
```

看它动作：

![在此处输入图像描述](../Images/292500a1ebf82e5ab1427e82956ffc49.png)

注意：在输入第三个 5 后，光标会移动 TextBox 的开头，如果您输入下一个 5，它会保留在那里。

我不认为上面提到的代码应该是解决方案，我只是玩了一下。我认为您应该`UpdateSourceTrigger=LostFocus`从文本框事件中手动进行绑定`TextChanged`...但是恐怕您的问题没有干净的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:32:51.540

基本上，TextBox 中存在一个错误，如果您以这种方式更改绑定值，它只会更新 TextBox 的第一个字符。例如，如果您输入 1005，它会将前 3 个字符更新为 100（但忽略 5）。

解决这个问题很简单，我为您的 Item 类添加了另一个属性，并稍微更改了 TextBox 绑定：

```
public class Item : INotifyPropertyChanged
{
    private int maxValue = 100;
    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }

    void UpdateSum()
    {
        Sum = Col1;// + col2 + col3 etc
    }

    decimal _Col1;
    public decimal Col1 
    {                  
        get            
        {                         
            return _Col1;                             
        }                          
        set                       
        {                       
            if (value > maxValue)                                
            {                                
                Col1 = maxValue; 
                NotifyPropertyChanged("Col1");
            }
            else
            {
                _Col1 = value;
            }
            UpdateSum();
            NotifyPropertyChanged("Col1");
        }
    }

    public int MaxValueWidth
    {
        get
        {
            var tmp = (int)Math.Log10(maxValue) + 1;
            return tmp;
        }
    }

    decimal _Sum;
    public decimal Sum
    {
        get
        {
            return _Sum;
        }
        set
        {
            _Sum = value;
            NotifyPropertyChanged("Sum");
        }
    }
} 
```

请注意，我添加了一个属性，该属性根据最大值计算 TextBox 的最大字符数。

不，我所做的只是添加绑定

```
<DataTemplate>
    <TextBox Width="200" Text="{Binding Col1, UpdateSourceTrigger=PropertyChanged}" MaxLength="{Binding MaxValueWidth}"></TextBox>
</DataTemplate> 
```

# authentication - iPhone 浏览器上的 FB Like 按钮 - 如何检查用户是否已登录 FB 原生 iphone 应用程序

> ID：10167653
> 
> 赞同：2
> 
> 时间：2012-04-16T01:13:25.697
> 
> 标签：authentication, iframe, mobile, facebook-like

我正在我的移动网站上实现一个类似 FB 的按钮 iframe 元素。如果该网站的访问者通过移动浏览器登录到 FB，那么用户按下“赞”按钮就没有问题。但是，如果用户已经通过他们的原生 FB 应用程序登录到 FB，我的点赞按钮仍然会将他们重定向到浏览器登录页面。

有没有办法检查用户是否已经在他们的本地应用程序上登录，并避免他们通过浏览器再次登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T12:22:49.603

抱歉，我认为这是不可能的，因为这需要将用户会话 ID 从应用程序传递到另一个应用程序（FB 本机应用程序到 Safari）

# jquery - 选择器：For循环的第一个错误

> ID：10167658
> 
> 赞同：0
> 
> 时间：2012-04-16T01:13:55.550
> 
> 标签：jquery, jquery-selectors, for-loop

用户指定一个数值；然后一个 for 循环运行它很多次。我有一系列这些类型的设置，它们都可以工作，除了这个。我相信这是因为我使用了 :first 选择器。

```
 jQuery.fn.removeX = function() {
        for (var i = 0; i < xTimes; i++) {
            $("#Tell").append(' removed!');
            $("#List_" + C_user + " img:first").relocate();
        }
    } 
```

我尝试过变体，例如 :nth-child(0)，甚至 .slice()，但到目前为止没有任何效果。然而， .relocate 函数，它被设计为一次只处理一个元素。我不认为应该有所作为，但如果我把它换成 .appendTo 之类的东西，它就可以正常工作。

.relocate 脚本：

```
 jQuery.fn.relocate = function(){
        getSRC2 = $(this).find('img').attr('src');
        $(this).prependTo(".List_" + Owner).removeAttr('style');
        $(this).remove();
    } 
```

这没什么特别的，所以我不确定它是如何破坏另一个的。

任何提示/指针都会有所帮助。

*解决方案*

删除了 .find()，工作，谢谢！我试图重用脚本，但它最初设计的对象是包装的，因此是 .find()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T01:18:37.687

在这里，您正在选择一个`img`...

```
$("#List_" + C_user + " img:first").relocate(); 
```

然后在`.relocate()`，你正在做`.find()`一个`img`...

```
getSRC2 = $(this).find('img').attr('src'); 
```

`img`不能嵌套在`img`.

* * *

要么摆脱，`.find('img')`因为你已经拥有它，要么摆脱`img`选择器的一部分......

```
$("#List_" + C_user).relocate(); 
```

# php - 单品网店

> ID：10167662
> 
> 赞同：0
> 
> 时间：2012-04-16T01:14:34.990
> 
> 标签：php, open-source, e-commerce, webshop

也许看起来有点奇怪，但我只需要一种产品的电子商务/网上商店/购物车系统。

我期望系统提供的这些功能：

*   产品选项（颜色、尺寸、重量）
*   折扣
*   等级价格
*   页面（所见即所得编辑器），mod_rewrite seo url
*   用户登录和注册
*   用户订单概览（订单编号：状态）
*   运输选项
*   基础管理

据我所知：PayPal express checkout 太简单了，Magento 太过分了。

是否有任何开源的、基于 php/mysql 的“中间”解决方案可以很容易地定制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T01:24:13.283

OSCommerce 是一个很好的基于 PHP 的开源解决方案，设置起来相对简单。

[http://www.oscommerce.com/](http://www.oscommerce.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T01:38:04.410

还有 OpenCart 可能是另一种选择。

[http://www.opencart.com/](http://www.opencart.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T10:50:56.510

对于单页商店，上述任何购物车都只是矫枉过正。我建议使用“ecwid”。免费版本非常好，如果您需要扩展，您可以选择。

# c# - Youtube 上传 - 如何限制上传速度

> ID：10167666
> 
> 赞同：3
> 
> 时间：2012-04-16T01:14:51.137
> 
> 标签：c#, api, youtube

**我如何限制在 youtube 上上传视频的速度，因为当我开始上传时，我的互联网速度非常慢**

```
YouTubeRequestSettings settings = new YouTubeRequestSettings("example app", developerKey, Login, Passw);

YouTubeRequest request = new YouTubeRequest(settings);

Video newVideo = new Video();

newVideo.Title = Title;
newVideo.Keywords = Tags;
newVideo.Description = Description;
newVideo.YouTubeEntry.MediaSource = new MediaFileSource(@PathVideo, "video/quicktime");
newVideo.Tags.Add(new MediaCategory("Howto", YouTubeNameTable.CategorySchema));
newVideo.YouTubeEntry.Private = false;

request.Upload(newVideo); 
```

# php - 检查大型 CSV 文件（1m 行）是否具有与 MySQL 表相同的数据

> ID：10167673
> 
> 赞同：6
> 
> 时间：2012-04-16T01:15:38.067
> 
> 标签：php, mysql, csv

我正在尝试找到一种方法来有效地将 CSV 文件内容与 MySQL 数据库（超过 100 万行进行比较）进行比较，我在将所有行放入数组之前做了类似的事情，但这适用于小由于内存过载而导致的行数。

我的问题是，有没有推荐的方法来做到这一点？任何图书馆或可以提供帮助的东西？

我很感激你的回答。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T01:27:25.827

假设这是一个健全性检查，并且您的目标是 0 差异，那么如何将数据库转储为相同格式的 CSV 文件，然后使用命令行工具（[`diff`](http://unixhelp.ed.ac.uk/CGI/man-cgi?diff)或[`cmp`](http://unixhelp.ed.ac.uk/CGI/man-cgi?cmp)）检查它们是否匹配？

当然，您需要确保 CSV 转储的排序和格式与原始文件相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T01:36:11.307

除了@therefromhere 的出色答案之外，您还可以在 MySQL 和原始文件中计算哈希值，然后比较两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T01:57:05.190

我自己从未尝试过，但 MySQL 有一个 CSV 表类型。您可以让 MySQL 直接读取文件，就好像它只是另一个数据库表一样。您可能需要先创建一个与您拥有的 CSV 文件匹配的空表，这样 .frm 文件才会在数据目录中创建。然后，您可以将数据目录中的空 .csv 文件替换为您的 CSV 文件。由于您没有进行导入，因此您可能需要运行修复表。

[http://dev.mysql.com/doc/refman/5.1/en/csv-storage-engine.html](http://dev.mysql.com/doc/refman/5.1/en/csv-storage-engine.html)

# php - 添加到关联数组 - 但没有重复

> ID：10167676
> 
> 赞同：1
> 
> 时间：2012-04-16T01:16:21.683
> 
> 标签：php, arrays

我的目标是将一组新的产品记录附加到现有的关联数组中，但要确保每个产品只表示一次。我写了下面的函数。对于这么简单的事情，看起来代码太多了。是否有我需要了解的 PHP 数组函数？

```
function _append ( &$already, $addition ) {
    while( $result = mysql_fetch_array( $addition ) ) {
        $already_found = FALSE;
        foreach ( $already as $try ) {
            if ( $try["products_id"] == $result["products_id"] ) {
                $already_found = TRUE;
                break;
            }
        }
        if ( !$already_found ) { $already[] = $result; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T01:19:06.197

使用产品 ID 作为密钥，例如`$already[$result['products_id']] = $result;`，然后您可以使用`array_key_exists`它轻松地对照所有现有产品检查产品 ID。（或者，不要。无论哪种方式，每个 ID 只有一个产品；如果您不检查，最新的副本将覆盖之前的副本。）

无论哪种方式，你都摆脱了`foreach`完全。

```
function _append(&$already, $addition) {
    while ($result = mysql_fetch_array($addition)) {
        if (!array_key_exists($result['products_id'], $already)) {
            $already[$result['products_id']] = $result;
        }
    }
} 
```

问题是，您的数组不再被数字索引。无论您在哪里添加项目，都使用它们的键（products_id 的值）添加它们。但你可以`foreach ($items as $item)`像往常一样说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T01:19:39.117

如何将产品 ID 分配为数组键`$already`？

```
while( $result = mysql_fetch_array( $addition ) ) {
  $already[$result['products_id']] = $result;
} 
```

这当然会覆盖旧的产品记录，但它应该优雅地避免重复！

# css - 使用CSS的锚点小于图像的新型翻转？

> ID：10167678
> 
> 赞同：4
> 
> 时间：2012-04-16T01:16:56.237
> 
> 标签：css, image, internet-explorer, size, rollover

我一直在为我的网站制作链接翻转效果，以实现以下目标：

```
┌────────────────────────────┐
│  ┌──────────────────┐      │
│  │ <a>              │      │
│  └──────────────────┘      │
│                            │
│                 <img>      │
└────────────────────────────┘ 
```

`<img>`我希望当鼠标仅悬停在链接上时显示背景图像`<a>`。换句话说，当链接部分悬停时，我希望它后面的图像出现（或更改状态）而不会变成“可点击”。我想只用CSS来做。

我没有使用常见的 CSS 背景/精灵方法，因为 A）无论我如何标记它，如果它位于标签`<img>`内的任何位置`<a>`，整个图像一旦显示就变得“可点击”，并且 B）我想要使用更大、质量更好的图像，并将它们包含在 HTML 中，避免了使用 Javascript 或浏览器黑客来预加载它们。

我的解决方案是将`<a>`and放在`<img>`父`<li>`级中（因为这本质上是“菜单”或站点导航的一部分），然后在鼠标悬停`<img>`时使用相邻的同级选择器 (+) 进行更改。`<a>`最基本的，CSS 看起来像这样：

```
li {
   size and position declarations; /*The size is the same as the contained image.*/
}

li a {
   absolute size and position declarations for the link area;
   z-index: 2; /*I use the z index to make sure the link stays above the image.*/
}

li img {
   absolute size and position declarations for the image;
   z-index: 1;
   display: none;

li a:hover + img {
   display: block;
} 
```

基本的 HTML 如下所示：

```
<ul>
   <li><a href="page.htm"> </a><img src="image.jpg"></li>
   <li>...
</ul> 
```

如果你想看到它的实际效果，我在[www.joshuakirby.net/test](http://www.joshuakirby.net/test)上提供了一个测试版本（请注意——我是自学成才的，我承认我不是编码专家）。它在我尝试过的所有主要浏览器中都很好用，除了 IE。我还没有让它在任何 IE 版本中正常工作，即使在 IE9 中也是如此。翻转闪烁，就像在 IE6 中的精灵一样，并且在第一次甚至第二次尝试时链接并不总是可点击的。

有谁知道为什么 IE 让我为此感到悲伤？是否有一些修复可以让 IE 像其他浏览器一样渲染这个 CSS？或者，如果我想出的整个方法都是废话，那么任何人都可以想出一种更跨浏览器友好、更优雅的方式来使用 CSS 进行翻转工作吗？

我不是网页设计的新手，如果需要，我也可以处理 JS 和 PHP。用 CSS 来做这一切的想法吸引了我。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:29:43.563

像这样的东西会起作用吗？

[http://jsfiddle.net/lazerblade01/CAhuy/](http://jsfiddle.net/lazerblade01/CAhuy/)

显然，您可以将图像作为背景图像添加到 div 而不是颜色。

编辑：刚刚在 IE9 中测试（我可以访问的唯一版本的 IE 无需启动另一台计算机）。背景颜色似乎没有闪烁。让我知道它是否适用于图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T03:18:15.063

闪烁是因为 IE 在没有内容时似乎不尊重链接的 z-index 值。但是，如果您将链接的背景（例如**#craftsLink a**）设置为透明的 png 图像，它似乎可以解决问题并且该网站可以在 IE7+ 中运行。

# ruby-on-rails - 在 Ruby on Rails 中向用户模型添加属性的最佳方法

> ID：10167679
> 
> 赞同：6
> 
> 时间：2012-04-16T01:17:21.547
> 
> 标签：ruby-on-rails

我的用户模型看起来像：

```
 class CreateUsers < ActiveRecord::Migration
       def self.up
         create_table :users do |t|
         t.string :name
         t.string :email

         t.timestamps
       end
    end

      def self.down
        drop_table :users
        end
      end 
```

如果我想再添加一个：attribute，最好创建另一个迁移文件来添加新列（[请参阅另一个 Stackoverflow 线程](https://stackoverflow.com/questions/6373202/how-does-one-add-an-attribute-to-a-model)）或者我可以手动添加 t.string :name_of_new_attribute 然后 rake db:migrate？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-16T01:23:32.027

正确的方法是创建一个新的迁移。在主 rails 项目文件夹中，运行

`rails generate migration AddDetailsToUser address:string age:integer`ETC...

然后运行`rake db:migrate`

另一种方法是编辑原始迁移文件，重置/销毁数据库并重新运行所有迁移。

# php - 具有相同外壳的开关

> ID：10167680
> 
> 赞同：2
> 
> 时间：2012-04-16T01:17:27.903
> 
> 标签：php

我正在尝试创建一个页面，该页面基本上可以提取视频流并按观看者数量进行组织，因此观看次数最多的页面位于页面顶部。

我对 PHP 还很陌生，所以我这样做的方式效率极低且时间很长，但要知道的主要事情是我使用嵌套开关。

当每个视频都有不同数量的超过 0 的观众时，这非常有效。当 2 个视频的观众数量相同时，我的问题就出现了。发生这种情况时，所有流都保留其原始顺序。

这是导致问题的一段代码的精简版本。

```
$viewarray = array($viewers1, $viewers2, $viewers3, $viewers4);

rsort($viewarray, SORT_NUMERIC);

for ($z=0; $z<=3; $z++)
{
if ($viewarray[$z] == 0) {break;}
switch($viewarray[$z]) 
{   
    case $viewers1:
        switch($z)
        {
            case 0:
                //code which implements the re-ordering
            case 1:
            case 2:
            case 3:
        }
        break;
    case $viewers2:
        switch($z)
        {
            case 0:
            case 1:
            case 2:
            case 3:
        }
        break;
    case $viewers3:
        switch($z)
        {
            case 0:
            case 1:
            case 2:
            case 3:
        }
        break;
    case $viewers4: 
        switch($z)
        {
            case 0:
            case 1:
            case 2:
            case 3:
        }
        break;      
}
} 
```

`$viewarray`已排序，以便它以正确的顺序创建观众编号列表。然后，交换机将这些数字中的每一个与每个流的实际观看者数量进行比较，以找到它匹配的那个。

我认为如果 switch 参数匹配 2 个案例，它只会选择第一个，但遗憾的是没有。我也尝试用 if 语句替换它，但同样的事情发生了。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:24:14.033

哇哇哇。报废这整件事。你应该做的更像是，每个流都应该有一个数据库记录。每当有人查看流时，数据库记录中的列应作为查看计数器递增。然后，您在数据库表中为该列添加索引，当您从数据库中提取流以列出它们时，您只需按 SQL 查询中的视图列数进行排序。`ORDER BY viewCounter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T01:24:21.557

***编辑：仅当您无法以正确的顺序获取视频时才这样做！***

为什么不做一个这样的关联数组：`array($video2 => $viewers1, $video2 => $viewers2)`然后你可以按值排序。然后，您可以使用[arsort()](http://www.php.net/manual/en/function.arsort.php)并从数组中读取视频键来处理重新排序。

# java - Java Swing：在返回 Int 之前等待鼠标单击事件

> ID：10167685
> 
> 赞同：0
> 
> 时间：2012-04-16T01:18:25.883
> 
> 标签：java, swing, mouseevent, wait

我有一个纸牌游戏，它是建立在使用 ArrayLists 将纸牌存储在人们手中的基础上的。我有一个 main 方法，它通过游戏播放并使用主类中的 InvokeLater 调用的线程更新 GUI 类

目前我正在控制台上玩游戏，并输入和 int 到扫描仪中以从玩家手中选择卡片。我想要做的是运行一个线程，可能带有调用和等待，当玩家必须做出选择时运行。然后等待玩家在 GUI 中点击对应的卡片，并返回卡片所在位置的相应 int。然后这个选择由我的游戏处理。

我现在如何更新我的 GUI。

```
 public static void Play(ArrayList<Card> ...){
        UpdateHand(player1, deck, deckused);

        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                GUI.getInstance().UpdateHand();

            }
        }); 
```

将侦听器附加到卡片并将其名称设置为他们手中相应位置的 int。

```
 public void PlayerSelection()
    {
        selection = -1;
        Information = new JLabel("Please Select Your Card");
        ButtonDisplay.add(Information);
        ButtonDisplay.updateUI();
        for (int i = 0; i < (HumanHand.size()); i++)
           {
               Card card = HumanHand.get(i);

               BufferedImage cardImage = null;

                try {

                    cardImage = ImageIO.read(new File("card/" + card + ".jpg"));
                    } catch (IOException e) {
            // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    JLabel picLabel = new JLabel(new ImageIcon( cardImage ));
                    String name = "" + i;
                    picLabel.setName(name);
                    picLabel.addMouseListener((MouseListener) this);
                    HumanHandDisplay.add(picLabel);
           }
    } 
```

单击鼠标时存储 int 以供选择。

```
 public void mouseClicked(MouseEvent e) {
        String name = ((JLabel)e.getSource()).getName();
        System.out.println("Working " + name);
        selection = Integer.parseInt(name);         
    } 
```

我想将此 int 返回到我的主类 Play() 方法以用于其余的计算。我无法弄清楚如何做到这一点，特别是等待做出选择。我听说可以做到这一点，但我不确定如何在我的工作中实现这一点。如果有人可以提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T01:39:14.503

不，您不想在这里暂停线程或任何此类。相反，您将根据用户在程序中的位置更改程序的状态，并根据他的响应和程序的行为将根据该状态而有所不同。

例如，如果用户需要等待用户出牌，则给主类一个 currentPlayer 变量，并在轮到用户时将其分配给用户。然后对程序进行编码，使其不响应任何用户输入，除了适合轮到他的有效输入。

然后主 GameEngine 类将 currentPlayer 变量推进到下一个玩家并等待他们的响应。

**编辑 1**
您声明：

> 我不确定我是否真的明白。我已经实现了游戏以及它的所有规则和 AI 玩家进行对抗，我现在在控制台上这样做。我只需要将使用扫描仪进行选择的位置扩展到 GUI 以等待 Mouse Clicked 事件。

请理解，您正在进行大规模的转换，从基于控制台的线性程序转移到基于 GUI*事件*的程序，关键是新程序是基于事件的。如果您当前的代码是使用行为良好的符合 OOP 的类编写的，具有最少的静态变量和方法，以及具有良好定义状态的类，那么转换应该会顺利进行。另一方面，如果您当前的代码库只有几个类，大部分集中在线性控制台用户界面上，您可能需要从头开始重新编写代码。

您可能希望向我们展示您当前的一些代码并描述其设计。

接下来你说：

> 我将如何确保程序不响应除 int 以外的任何内容？

请通过让程序仅响应 int 来澄清您的意思。一个 int 在哪里？在 JTextField 中？别的地方？我认为这可能需要某种类型的输入验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:11:38.803

您想要的是自定义组件上的模态，而这在 Swing 中是不可能的（至少在没有大量努力实现您自己的模态的情况下是不可能的）。您的程序应该有状态并且是基于事件的，就像@Hovercraft 的回答一样。

# list - 在 Boo 中创建某种类型的列表

> ID：10167686
> 
> 赞同：1
> 
> 时间：2012-04-16T01:18:35.427
> 
> 标签：list, boo

我试过

```
public class Chest(Item):
    public contents as Item 
```

但这当然是单个项目，而不是列表。如何申报`contents`为物品清单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:39:07.560

您可以使用泛型，如下所示：

```
import System.Collections.Generic

class Chest(Item):
  contents as List[of Item] 
```

PS你不应该在类上公开字段。[而是创建一个属性](http://docs.codehaus.org/display/BOO/Part+08+-+Classes#Part08-Classes-FieldsandProperties)。

# git - 使用 git 开始跟踪目录和所有包含的文件

> ID：10167690
> 
> 赞同：1
> 
> 时间：2012-04-16T01:19:04.440
> 
> 标签：git, command-line

我的本地仓库中有一个名为“d3”的目录，我想用 git 添加目录和所有包含的文件。我已经在主目录中使用了这个命令，但是每次它添加一个子模块，这不是我想要的。

```
$ git add d3/ 
```

我还在 d3 子目录中尝试了这个命令来尝试添加所有文件，这是我在几个指南中找到的一个示例。

```
$ git add . 
```

我对 git 非常陌生，我不确定为什么这些命令不会将所有文件添加到项目中。我错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T03:33:02.380

运行`git add`将*暂存*这些文件以进行提交。这意味着下次您提交到您的存储库时，它们将被包含在内。

但是在添加所有准备添加的文件之后，没有存储任何内容，然后运行`git commit`​​. 那是拍摄快照并将其提交到历史记录的时间，也就是最终可以说新文件添加到您的项目中的时间。

正如@GoZoner 在评论中提到的那样，您可以`git status`在提交之前使用来验证文件是否已暂存。

要获得对 Git 的良好介绍，请尝试[Git Magic](http://xenon.stanford.edu/~blynn/gitmagic/index.html)。

# java - 从 ArrayList 中删除元素的哪种方法更有效？

> ID：10167696
> 
> 赞同：5
> 
> 时间：2012-04-16T01:19:34.977
> 
> 标签：java, arraylist

我有以下声明：

```
ArrayList<String> list = new ArrayList<String>();
list.add("1");
list.add("2");
list.add("2");
list.add("3");
list.add("4"); 
```

现在我的问题是：如果我想从列表中删除“2”，哪种方式更好？

第一种方式：

```
for(int i = 0; i < list.size(); i++) {
    if(list.get(i).equals("2")) {
        list.remove(i);
        i--;
    }
} 
```

第二种方式：

```
Iterator<String> iterator = list.iterator();
    while(iterator.hasNext())
        if(iterator.next().equals("2"))
            iterator.remove(); 
```

两者都得到妥善保护，哪个更有效？

有没有其他方法可以从 ArrayList 中删除元素而不会`IndexOutOfBounds`出错？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T01:44:30.960

实际上，可能更快的是

```
list.removeAll(Collections.singleton("2")); 
```

在幕后，对于 a `ArrayList`，它基本上确实像@Edmund 建议的那样创建了数组的新副本，但是在较低级别上，这可能会带来更高的性能。

尽管如此，正如其他人所提到的，`LinkedList`从大列表中删除多个元素通常具有更好的性能。

（即使您决定切换到 a`LinkedList`您仍然可以使用上面的代码，这将等同于使用迭代器方法，但会为创建的单例集合和发生的一些额外方法调用带来一点开销。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T01:25:52.273

无论哪种方式都需要为每个删除的元素向下移动元素。如果您的列表真的很大，那么创建一个新列表可能会更快：

```
ArrayList<String> newList = new ArrayList<String>();
Iterator<String> iterator = list.iterator();
while (iterator.hasNext()) {
    String val = iterator.next();
    if(!val.equals("2"))
        newList.add(val);
}

/* Or just return newList, depending on how list is used in subsequent code. */
list.clear();
list.addAll(newList); 
```

您可以考虑使用`LinkedList`而不是`ArrayList`. 但是基准测试（使用实际用例）是找出最有效的最佳方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T01:24:13.173

对于单个元素，您的 for 循环可以正常工作~~（好吧，当您删除时它会`i--`-`remove()`自动将元素移到左侧）~~（真的，它会正常工作）。你的迭代方法也是如此。

你只是迭代到 的末尾`ArrayList`，你不会离开它。就效率而言，这是一种洗礼——我建议您对大小为 100,000 的运行时进行采样，看看效果如何。（无论列表有多大，它仍然是 O(N) 操作的顺序。）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-16T01:41:02.013

我在一些数据结构书籍中读过，迭代器方法更好，

如果在循环下调用list.remove，evety时间将从0索引开始到索引ot项删除，然后删除元素并移动受影响的元素，这将是o（n2）过程。

但是在 iterator.remove 的情况下，元素在被迭代器访问时被删除，而不必在列表的开头返回，因此是 o(n) 过程。

# java - 从 Android Java 调用本机函数 - JNI 的替代方案

> ID：10167701
> 
> 赞同：1
> 
> 时间：2012-04-16T01:20:20.393
> 
> 标签：java, android, c++, java-native-interface, jniwrapper

这可能是一个非常菜鸟的问题，但我正在编写一个需要使用用 C++ 编写的 .so 库的 Android 应用程序。.so 由几个类组成，并且是通用 C++，而不是 JNI。

除了 JNI，有没有办法从 Android Java 应用程序调用 C++ 函数？我所看到的关于 JNI 的所有内容都表明您必须将本机代码重写为特定于 JNI 的代码，如果只给您一个 .so，那真的很不方便。

从 Android 4.0.3 中的 java 应用程序调用本机函数有哪些替代方法？编写一个调用 C++ 函数然后可以从 Java 调用的小型 JNI-C++ 程序有多简单？

Eclipse中有什么可以简化这个过程的吗？

我可能不应该对没有更优雅的解决方案感到惊讶。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T01:26:26.313

我认为没有比您建议的为库编写 JNI 包装器更优雅的解决方案了。无论如何，这可能不是一个好主意，因为您应该为要支持的每个架构编译所有本机代码的单独版本。仅仅附加到一个编译库就意味着你被它的架构束缚住了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T01:27:11.630

这不是特定于 Android 的，但您应该看看[Java Native Access](http://en.wikipedia.org/wiki/Java_Native_Access) (JNA)。它允许您使用 libffi（不使用 JNI）访问本机代码。

# c - 将证书添加到受信任的证书

> ID：10167703
> 
> 赞同：0
> 
> 时间：2012-04-16T01:20:43.503
> 
> 标签：c, openssl

我正在使用 openssl 开发应用程序，基本上我需要找到一种方法将远程证书添加到商店，如果用户选择的话。我对 openssl 很陌生，但我确信这是我将添加证书的逻辑：

```
if(SSL_get_verify_result(ssl) != X509_V_OK) {
    printf("Certificate did not validate.\nDo you wish to add this certificate to the trust certificate store?(yes/no)\n");
    char response[3];

    while(1) {
        scanf("%s", response);

        if(strcmp(response, "yes") == 0) {
             /* Add the certificate */
            break;
        }
        else if(strcmp(response, "no") == 0) {
            BIO_free_all(bio);
            SSL_CTX_free(ctx);
            return 0;
        }
        else {
            printf("yes or no, please.\n");
        }
    }
} 
```

我尝试了 openssl 文档，但发现它非常混乱，而且很难在其中找到任何细节。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:55:11.990

如果验证失败，则意味着您的证书验证路径，即您使用 SSL_CTX_load_verify_locations() 方法（或类似方法）加载的路径，无法验证来自对等方的证书（您可以使用 SSL_get_peer_certificate() 方法获取此证书）。

这意味着您尝试验证的证书未由链中的任何证书签名，除非您更改链，否则它永远不会被验证。

做你想做的事取决于你要验证的证书是否是自签名证书。如果它是自签名证书，您只需将其添加到您从中获取信任位置的位置（调用 SSL_CTX_load_verify_locations() 方法时指定的位置）。如果它不是自签名的，您将必须找到一种方法来获取该证书的整个链，这取决于您正在使用的环境。

问候。

# ios - UIView 的 iOS viewDidLoad

> ID：10167706
> 
> 赞同：67
> 
> 时间：2012-04-16T01:21:51.577
> 
> 标签：ios, uiview, uiviewcontroller

在 ViewController 中，`ViewDidLoad`需要知道 VC 何时加载。

对于 UIView，加载视图时我必须使用什么方法？

这个方法会被任何init调用吗？

编辑：没有 XIB，只是以编程方式。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-16T01:26:38.090

如果从`XIB`文件中加载它，则`awakeFromNib`加载完成后将调用该方法：

```
override public func awakeFromNib() {
    super.awakeFromNib();

    // ... loading logic here ...
} 
```

**更新;** 在没有 XIB 的情况下，您可能必须使用[文档的](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816)**Observing View-Related Changes**区域中的一种方法来推断它（例如，）。但是，如果可能，更好的方法是从视图控制器的方法向您的视图发送消息。`didMoveToSuperview``viewDidLoad`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-01-31T19:49:17.537

你可以使用 willMove(toSuperview newSuperview: UIView?)

```
import UIKit

final class myView: UIView {

  override func willMove(toSuperview newSuperview: UIView?) {
     super.willMove(toSuperview: newSuperview)
     //Do stuff here
   }

} 
```

[苹果文档](https://developer.apple.com/documentation/uikit/uiview/1622629-willmove)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-06-04T06:54:51.560

实际上，对于视图的初始化，您不必对视图控制器的方法 viewDidLoad() 做任何事情。所有你想做的，你都可以在视图的 init 方法中做。例如，在视图控制器的 viewDidLoad() 中，有一些初始化代码：

```
- (void)viewDidLoad{
    [super viewDidLoad];

    // init your parameters here
} 
```

类似地，在您的视图的 init 方法中：

```
- (id)initWithDelegate:(id)_delegate
{
    self = [[[[NSBundle mainBundle] loadNibNamed:@"YourView" owner:self options:nil] objectAtIndex:0] retain];
    if (self) {
        [super init];

        self.delegate = _delegate;

        // init your parameters here

        return self;

    }
    return nil;
} 
```

然后，您从视图控制器创建 YourView，如下所示：

```
YourView view = [[YourView alloc] initWithDelegate:self];
[self.view addSubview:view];
[view release]; 
```

此外，当您的视图加载时您想要做的事情，您可以放置​​在您的视图中的 layoutSubviews 方法中，如下所示：

```
-(void)layoutSubviews{
    [super layoutSubviews];

    // init your parameters here, like set up fonts, colors, etc...
} 
```

我想，这就是你需要的。

干杯!

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-03-10T17:54:43.247

**斯威夫特 2：**

```
import UIKit

class myView: UIView {

  override func layoutSubviews() {
    print("run when UIView appears on screen")
    // you can update your label's text or etc.
  }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-21T18:23:26.013

我有类似的问题，并找到了相对简单的解决方案。想法是在正确的时间将 viewDidLoad 发送到每个子视图，并在您感兴趣的类上重载该方法。

为此，请在您的类中添加这部分代码...

```
//  UIViewController
- (void)viewDidLoad
{

    [super viewDidLoad];

    [self.view viewDidLoad];
}

//  UIView+Loading.m
#import < UIKit/UIKit.h>

@implementation UIView (Loading)

- (void)viewDidLoad
{

    for (UIView* subview in self.subviews)

        [subview viewDidLoad];
}

@end

//  UIView+Loading.h
#import < UIKit/UIKit.h>

@interface UIView (Loading)

- (void)viewDidLoad;

@end

// UIView_CustomImplementation

- (void)viewDidLoad
{

    NSLog(@"Do whatever you want to do in custom UIView after method viewDidLoad on UIViewController was called");

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T01:36:20.173

据我所知，我认为除了init之外没有这样的方法。通常我在init方法中做准备。您可以创建自己的`viewDidLoad`方法并手动调用它。但大多数时候，UIView 是由它的视图控制器管理的，因此视图控制器应该知道视图何时加载，如果要配置视图，可以在视图控制器中进行。顺便说一句，该`viewDidLoad`方法并不总是被调用。

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2012-04-16T01:28:59.633

它不太像这样工作。

`- (void)viewDidLoad`加载视图控制器时不调用；它在视图控制器的视图被加载时被调用。

因此，您可以创建 UIViewController，唯一会调用的方法是用于初始化它的 init 方法。不会创建视图，不会调用 -(void)viewDidLoad 方法等。

然后当其他东西通过以下方式向视图控制器询问其视图时：

```
viewController.view; 
```

然后视图控制器调用：

```
- (void)loadView; // This is where you put your own loading view information, and set the viewController's self.view property here. 
```

其次是：

```
- (void)viewDidLoad; 
```

View Did Load 是一个单独的方法，因此您不必中断实际的 loadView 方法和复杂的视图加载选项。当开发人员不确定 Apple 在做什么以及他们的最佳实践是什么时，在使用 nib 等时子类化和覆盖 loadView 方法可能会导致问题，因此 Apple 将方法分离出来是明智的。

然后，当出现内存警告时，视图被释放，并设置为 nil：

```
- (void)viewWillUnload;
// view unloaded and set to nil.
- (void)viewDidUnload; 
```

# php - 单引号 JS encodeuri vs PHP rawurlencode

> ID：10167707
> 
> 赞同：1
> 
> 时间：2012-04-16T01:21:52.160
> 
> 标签：php, rawurl

我正在尝试使用 cURL 在 PHP 中模仿 AJAX 发出的 POST 请求。

我注意到一件事，为什么 PHP 转义单引号，`%27`而 JS 的 encodeuricomponent 保持原样？

PHP 中真的有一个与 JS 相同的函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-07T01:38:19.997

您不会找到不对单引号进行编码的 PHP 函数。原因是 PHP 更严格地遵守包含单引号的[RFC 3986 。](http://www.faqs.org/rfcs/rfc3986.html)

`RFC 3986`保留特殊字符，例如`!, ', (, ), and *`.

> URI 包括由“保留”集中的字符分隔的组件和子组件。这些字符被称为
> “保留”，因为它们可能（或可能不）被
> 通用语法、每个特定于方案的语法或
> URI 的解引用算法的特定于实现的语法定义为分隔符。
> 如果 URI 组件的数据与保留
> 字符作为分隔符的用途发生冲突，则必须在形成 URI 之前对冲突数据进行百分比编码。
> 
> 保留= gen-delims / sub-delims
> 
> gen-delims = ":" / "/" / "?" /“#”/“[”/“]”/“@”
> 
> 子分隔符=“！” /“$”/“&”/“'”/“（”/“）”/“*”/“+”/“”/“;” /“=”

如果你想匹配 php 并在 js 中编码单引号，你可以使用这样的函数。

```
function fixedEncodeURIComponent (str) {  
  return encodeURIComponent(str).replace(/[!'()*]/g, escape);  
} 
```

为什么不需要对其进行编码？它仍应与 CURL 一起使用。

# c# - 使用 Page.ClientScript 从调用中获取响应

> ID：10167709
> 
> 赞同：0
> 
> 时间：2012-04-16T01:22:06.237
> 
> 标签：c#, asp.net

根据我的应用程序中的某些值，我需要显示带有确定和取消的确认框，如果他们单击确定，它应该继续并导航到另一个页面，否则如果他们单击取消，它应该保持在同一页面中。

我遇到的问题是弹出窗口不显示，除非我添加返回语句如下

```
 if (true)
        {
         Page.ClientScript.RegisterStartupScript(this.GetType(), 
        "ConfirmBox", "confirm('The numbers selected are not in the directory,"
        + sb.ToString()+
        " you wish to continue?');", true);
                        return;
         }
    Response.Redirect("~/homepage.aspx"); 
```

如您所见，这不起作用，因为它永远不会因为返回而到达重定向，但是即使条件为真，如果没有返回，它也会跳过弹出窗口。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:58:29.137

> 我遇到的问题是弹出窗口不显示，除非我添加返回语句如下

将`JavaScript code`在[**页面生命周期**](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.80%29.aspx)完成执行所有事件后执行。所以，return 在这里没有任何意义。

* * *

**纠正措施**

将代码（条件和`Redirect`另一个页面）移动到 JavaScript 函数。在您的`RegisterStartupScript`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T03:01:36.903

我已经尝试过您的代码，并且操作与您相同。我的解决方案为您提供：

```
<script type="text/javascript">
function Redirect()
{
location.href = "~/homepage.aspx";
}
</script>
<script runat="server">
void yourFunc()
{
if (true)
        {
         Page.ClientScript.RegisterStartupScript(this.GetType(), 
        "ConfirmBox", "if(confirm('The numbers selected are not in the directory,"
        + sb.ToString()+
        " you wish to continue?') == true){Redirect();};", true);
         }
}
</script> 
```

希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T03:17:37.037

这可能是你的灵魂。这是一个基于来自确认框的用户输入来限制导航的示例。

[在这里检查](http://vetrivelmpitdevotee.blogspot.com/2011/10/how-to-restrict-accidential-navigation.html)

# python - 我正在尝试从列表中删除一个字符串，然后将其写回文件

> ID：10167712
> 
> 赞同：0
> 
> 时间：2012-04-16T01:22:50.163
> 
> 标签：python, python-3.x

分配是阶段 1 - 管理模式
当用户选择管理模式时，应该允许他们执行以下操作：

1.  将新产品添加到列表中（还必须添加该项目的数量及其成本）
2.  从列表中删除产品
3.  更改项目的数量

    ```
    def mang (grocerystock):

    mangchoice=int(input("What would you like to do? \n 1):Add a new product to the list? \n 2): Remove a product from the list?  \n 3: Change the quantity of an item  \n 4): Change the price of an item  \n  5): View items and their quantity and price"))

    if mangchoice == 1:
        infile=open("grocery_stock.txt", 'a')
        name=input("Please enter the new product's name would you like to add:")
        quant=int(input("Please enter the new product's quantity"))
        price=float(input("Please enter the new product's price"))
        grocerystock[0]=name
        grocerystock[1]=quant
        grocerystock[2]=price
        gS=str(grocerystock)
        gs=gS.strip("[',']")
        infile.write(gs + '\n')
    if mangchoice == 2:
        namedelete=input("what item would you like to remove")
        a=open("grocery_stock.txt", 'r')
        data_list= a.readlines()
        a.close()
        print (data_list)
        del data_list[namedelete]
        b= open ("grocery_stock.txt", 'w')
        b.writelines(data_list)
        b.close()
    def intro():
    choice=(int(input("Would you like to go to Managerial mode or Shop mode?(press 1 for Managerial and 2 for shop mode, to quit press 3)")))

    if choice == 1:
        print ('lets go')
        mang(grocerystock)
    elif choice == 0 :
        print ('loser')

    grocerystock= ["","",""]

    intro() 
    ```

这是我到目前为止写的所有代码有什么想法吗？如果 mangchoice == 2，我试图删除的代码如下：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T01:36:50.090

在 Python3 中，`input`返回一个字符串。看起来您需要将其转换为`int`：

```
namedelete = int(input("what item would you like to remove")) 
```

# c - 什么是“未定义的对‘pow’的引用”

> ID：10167714
> 
> 赞同：11
> 
> 时间：2012-04-16T01:23:05.843
> 
> 标签：c

我有一个[键盘](http://codepad.org/NuD9TMSE)。

在 for 函数内的第 15 行

```
 for(i=2; i<=90; i+=2){
    int j=0+i;
    printf("%i\n",i);
    power=pow(inp,j);
    factor=factorial(i);
    if(i%4==0)fAns += power/factor;
    else fAns -= power/factor;
  } 
```

`power=pow(inp,j);`我添加的行`j`而不是仅仅使用`i`，因为它给了我同样的错误。`undefined reference to 'pow'`.

如果我`j`用 2 替换，那么它工作得很好，但是当我使用`j=i`它时它就不起作用了。增加这条线有问题吗？

我希望它增加而不是给我一个错误。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-16T01:24:39.820

您需要与数学库链接。使用 gcc，这意味着`-lm`在链接期间传递。

`2`当您用作指数值时它不会抱怨的原因是编译器正在优化`pow`调用。

# ios - 如何从pid中获取当前进程和其他进程堆的起始地址？

> ID：10167721
> 
> 赞同：1
> 
> 时间：2012-04-16T01:24:13.313
> 
> 标签：ios, linux, macos, process, heap-memory

如果ASLR在IOS中发挥作用，随机化了heap的起始地址，那么如何从pid中获取当前进程和其他进程的heap的起始地址呢？

在随论文提供的 aslr.c 中：“iOS 内核开发”，似乎您试图获取当前进程的堆代码的起始地址自爆。

```
void* heap = malloc(0); 
```

我测试了代码，发现返回值都不一样。根据 ISO/IEC 9899:TC2（即 C99 标准），§7.20.3 规定：

*如果请求的空间大小为零，则行为是实现定义的：要么返回空指针，要么行为好像大小是某个非零值，但返回的指针不应用于访问对象.*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:33:08.273

> 如果ASLR在IOS中发挥作用，随机化堆的起始地址，

确实如此。

> 那么如何从pid中获取当前进程和其他进程堆的起始地址呢？

你不能（至少不容易——我想不出任何方法，除了附加 GDB 和检查 glibc-internal variable `__curbrk`）。

> 我测试代码，发现返回值不一样

为什么你期望它们是一样的？

在禁用 ASLR 的*单个*可执行文件中，`malloc(0)`内部`main`将返回相同的值。如果启用 ASLR，您将获得不同的值。如果您构建不同的可执行文件，您将获得不同的值。

# android - Android SQLiteCursor - getString 从空值列返回值

> ID：10167729
> 
> 赞同：3
> 
> 时间：2012-04-16T01:25:35.143
> 
> 标签：android, sqlite, cursor

[游标](http://developer.android.com/reference/android/database/Cursor.html#getString%28int%29)API 告诉当尝试访问空值列时，该行为由实现定义，如果我转到[SQLiteCursor](http://developer.android.com/reference/android/database/sqlite/SQLiteCursor.html)，则该行为没有记录。是`SQLiteCursor`返回一个`NULL`还是抛出一个`Exception`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T14:21:58.063

没关系，我通过使用[isNull](http://developer.android.com/reference/android/database/Cursor.html#isNull%28int%29)方法检查空值解决了问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-01-29T23:34:16.277

cursor.isEmpty() 为我工作。

# objective-c - 此应用程序的模型-视图-控制器（矩阵操作）

> ID：10167732
> 
> 赞同：1
> 
> 时间：2012-04-16T01:26:29.853
> 
> 标签：objective-c, ios, model-view-controller

我正在制作一个用于操作矩阵的应用程序，我想知道如何为它设置一个好的 MVC 系统。

基本上，我知道我需要3个主要的东西：

1.  MatrixRow（保存每行的条目并可以通过乘法操作行）
2.  矩阵（包含一堆矩阵行，并且可以添加新行，减去行，更改行）
3.  ProblemViewController（显示矩阵并允许用户与矩阵交互以解决它）

但我主要对何时使用 View 或 ViewController 感到困惑。视图对于 MatrixRow 和 Matrix 来说似乎更容易，因为它们最终只是添加到 ProblemViewController 的子视图，但是将逻辑放入视图中是否可以接受？

在模型方面，我是否制作了一个包含所有条目的数组的 Matrix 模型？还有一个 MatrixRow 模型，它包含所有乘以行的逻辑？或者逻辑不应该在模型中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:13:50.827

> 但我主要对何时使用 View 或 ViewController 感到困惑。视图对于 MatrixRow 和 Matrix 来说似乎更容易，因为它们最终只是添加到 ProblemViewController 的子视图，但是将逻辑放入视图中是否可以接受？

MVC 架构的重点是将数据和业务逻辑（模型）与表示（视图）分离。您可能拥有知道如何显示矩阵行或整个矩阵的视图类，但实际存储和操作数据的对象应该与这些对象分开。

您的矩阵模型可能如下所示：

```
@interface Matrix : NSObject
{
    int rowCount;
    int columnCount;
    double *entries;
}

- (id)initWithRows:(int)rows columns:(int)columns data:(double*)data

- (double)entryAtRow:(int)row column:(int)column;

- (void)setEntry:(double) forRow:(int)row column:(int)column;

- (Matrix*)matrixByMultiplying:(Matrix*)m;

- (Matrix*)inverse;

- (Matrix*)transpose;
@end 
```

因此 Matrix 类存储数据，并提供对矩阵有意义的操作。它*不*知道如何在屏幕上显示数据，不知道数据来自哪里，也不知道给定矩阵如何在您的应用程序中使用。

> 在模型方面，我是否制作了一个包含所有条目的数组的 Matrix 模型？还有一个 MatrixRow 模型，它包含所有乘以行的逻辑？或者逻辑不应该在模型中。

你如何设置你的程序部分是个人喜好的问题——有些人似乎喜欢非常简单的模型，除了存储数据什么都不做。就个人而言，我会将与矩阵相关的所有内容都放在模型中，而忽略与您计划如何在应用程序中呈现矩阵有关的所有内容。

想象一下，您刚刚完成了您的应用程序，您的下一个任务是将其转换为提供完全不同类型的用户界面，例如命令行界面或 Web 界面。如果你要这样做，你会期望重写你的矩阵乘法代码吗？矩阵逆的定义会改变吗？在这两个方面都“不”——这些东西属于模型。您的整个 Matrix 类应该可以在执行相同操作但提供不同 UI 的程序中重用。

# ruby - 用鞋子 ask() 做数学？

> ID：10167743
> 
> 赞同：0
> 
> 时间：2012-04-16T01:28:11.757
> 
> 标签：ruby, algorithm, shoes

大家好，我正在使用鞋子来解决 ign 代码 foo 的问题。问题是

> 您拥有一家车牌制造公司。编写一个程序，该程序需要一个种群并确定最简单的模式，该模式将产生足够多的独特印版。由于将生成与模式匹配的所有板，因此请找到产生最少多余板的模式。使用字母 (AZ) 和数字 (0-9) 的组合。

我试图抓住鞋子，但是为什么当我像这样包装实例变量时

```
@pop = ask("what is the Population?") 
```

当我像这样再次包装它时：

```
@plates = @pop / 2 
```

然后我又想创建一个简单的警报

```
alert(@plates) 
```

这不是为了回答这个更简单的问题。只是为了学习。如果您对项目的实际编码以及我如何解决问题有任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T00:54:51.603

一切都几乎是正确的。但是，“@pop”被分配了“字符串”，因此您需要将其转换为浮点数或您希望的任何数字类型，例如：

```
@plates=@pop.to_f/2 
```

# elasticsearch - 哪种结构更适合在 elasticsearch 中搜索库存？

> ID：10167748
> 
> 赞同：0
> 
> 时间：2012-04-16T01:29:03.707
> 
> 标签：elasticsearch

哪种结构更适合以下查询：

人有 5 个香蕉和 1 个苹果。

人有 5 个香蕉或 1 个苹果。

嵌套？

```
{
    id: 1,
    has: 
    [
        {
            'name': 'banana',
            'quantity': 5,
        },
        {
            'name': 'apple',
            'quantity': 1,
            'species': 'gala'
        }
    ]
} 
```

还是固定插槽？

```
{
    id: 1,
    slot1: {
            'name': 'banana',
            'quantity': 5,
            },
    slot2: {
            'name': 'apple',
            'quantity': 1,
            'species': 'gala'
            }
    slot3: null,
    slot4: null
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:09:33.907

嵌套方法更简单：您可以执行简单的嵌套查询 [1]，而不必执行 slot1 OR slot2 OR... 如果 Person 没有其他字段，则将每个“slot”索引为文档会更简单。

[1] [http://www.elasticsearch.org/guide/reference/query-dsl/nested-query.html](http://www.elasticsearch.org/guide/reference/query-dsl/nested-query.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T21:32:21.847

我会去：

```
{
  id: 1,
  banana: {
        'quantity': 5,
  },
  apple: {
        'quantity': 1,
        'species': 'gala'
  }
} 
```

那么查询很简单。通过[查询字符串查询](http://www.elasticsearch.org/guide/reference/query-dsl/query-string-query.html)，您的查询将如下所示：

```
banana.quantity:5 AND apple.quantity:1 
```

和

```
banana.quantity:5 OR apple.quantity:1 
```

# c - 使用网站 www.codepad.org 可以链接数学库吗？

> ID：10167749
> 
> 赞同：2
> 
> 时间：2012-04-16T01:29:33.030
> 
> 标签：c

我需要一个 C 的在线沙箱，这样我就可以在任何计算机上轻松编译和运行 C，但是我的程序需要我链接到数学库。

我可以`-lm`在键盘或其他在线沙箱上使用 C 编程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T01:58:54.993

目前不是 - 因为您无法更改编译器选项。在[about 页面](http://codepad.org/about)中，这些是当前用于 C 的编译器选项：

> -O -​​fmessage-length=0 -fno-merge-constants -fstrict-aliasing -fstack-protector-all

但是，您总是可以要求他们包括`-lm`：

> 密码板由 Steven Hazel 编写（并且仍在编写中！）。如果您有任何问题或功能要求，请通过 sah@codepad.org 与我联系。

此外，正如评论者指出的那样，[ideone.com](http://ideone.com/)上的编译器似乎与数学库链接。

# android - 什么是 android opengl 等价于 surfaceHolder.lockCanvas()

> ID：10167750
> 
> 赞同：0
> 
> 时间：2012-04-16T01:29:38.300
> 
> 标签：android, multithreading, opengl-es

我正在尝试为 3D android 游戏构建游戏框架。我试图使用本教程来做到这一点，

[http://www.javacodegeeks.com/2011/07/android-game-development-game-loop.html](http://www.javacodegeeks.com/2011/07/android-game-development-game-loop.html)

我能够让一个 2D 游戏框架工作。然后本教程继续使用 android 的 OpenGL 功能，但没有在游戏框架中使用它。

我的问题是，由于我使用单独的线程来调用我的更新和绘制方法，它们是否等同于我使用 android OpenGL GL10 类对画布所做的事情？

```
try
{
    canvas = this.surfaceHolder.lockCanvas();
    synchronized (surfaceHolder)
    {
         //Update and draw code here
    }
}
finally
{
    surfaceHolder.unlockCanvasAndPost(canvas);
} 
```

虽然这应该是我的程序中使用 opengl GL10 类的唯一对象，但我想确保我可以控制 GL10 相机，这是否是最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:22:23.837

我不确定我是否了解 Canvas API 和表面支架的东西。但是，在 Android 上使用 OpenGL，这[`GLSurfaceView`](http://developer.android.com/reference/android/opengl/GLSurfaceView.html)似乎是您想要的（[代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/opengl/GLSurfaceView.java#GLSurfaceView.EglHelper.swap%28%29)）。它派生自 SurfaceView 并`EGL`用于低级表面管理。它已经启动了第二个渲染线程，调用[`Renderer`](http://developer.android.com/reference/android/opengl/GLSurfaceView.Renderer.html)方法。您可能想查看[Replica Island 的线程模型](http://replicaisland.blogspot.de/2009/10/rendering-with-two-threads.html)；Chris 使用第三个线程来更新游戏世界。

# android - Android：基于一个对象的onClick操作多个（按钮）对象

> ID：10167751
> 
> 赞同：1
> 
> 时间：2012-04-16T01:29:40.400
> 
> 标签：android, object, button

我正在尝试编写一个简单的棒球记分应用程序，主要是作为学习练习。

在这一点上，我有一个功能齐全的应用程序。它有一个活动和一个布局。所有数字（球、罢工、出局、局数）都显示为按钮。我扩展了 android.widget.Button 类，使按钮的文本是一个整数，并在单击按钮时使用 onClick 将值增加 1。该对象还存储一个最大值；当增量达到该值时，计数器重置为 0。例如，“Balls”按钮的最大值为 4，计数为 0、1、2 和 3。当您下次点击它时，它会从 3 翻转回到0。（向那些对棒球一无所知或不关心的人道歉。）

就目前而言，所有这些都可以正常工作（我的扩展按钮类的源代码如下所示）。现在，我正在尝试更改它，以便当一个计数器返回 0 时，其他计数器也会这样做。我不知道如何做到这一点。我的第一直觉是添加到相同的“if”语句中，将值翻转回 0，如下所示：

```
final ScoreButton strikes = (ScoreButton) findViewById(R.id.strikes);
strikes.zero(); 
```

（其中“strikes”是活动中定义的 ScoreButton 对象）。这会返回一个空指针错误。

我的第二个想法是添加一个布尔属性，当增量方法返回 0（“重置”）时可以设置该属性。但我不明白在哪里阅读这个属性。我可以在 onResume 方法中检查一次，但尝试执行类似“while”循环的操作来重复读取变量只是锁定了应用程序，甚至没有显示主布局。

试图研究一种更好的方法来做到这一点让我阅读了关于 AsyncTask 的文章，这似乎有点矫枉过正，而且我不确定它是否会工作，因为任务（即检查特定按钮是否已被重置）没有结尾。

在这一点上，这似乎是一件如此简单的事情，以至于我一定错过了一些明显的事情。我很感激你有任何建议。

我的自定义按钮类的代码：

```
import android.widget.Button;
import android.content.Context;
import android.view.View;
import android.util.AttributeSet;

public class ScoreButton extends Button  {

protected int flipCount;
protected int currCount;
protected boolean reset;

public ScoreButton(Context context) {
       super(context);
    }

public ScoreButton(Context context, AttributeSet attr)  {
        super(context, attr);
        setOnClickListener(incr);
        setOnLongClickListener(dec);
}

public void init(int start, int max ) {
    flipCount = max;   /** number at which the counter goes back to 0 **/
    currCount = start; /** number to start at **/
    reset = false;
    setText(Integer.toString(currCount));
}

/** reset the button value to 0 **/
public void zero() {
    currCount = 0;
    setText(Integer.toString(currCount));
}

private OnClickListener incr = new OnClickListener()  {
    public void onClick(View v) {
    currCount++; /** increment number on button **/
    if (currCount == flipCount) { /** if at the maximum value, go back to 0 **/
        currCount = 0;
        reset = true;  
        final ScoreButton strikes = (ScoreButton) findViewById(R.id.strikes);
        strikes.zero(); 
        }
    setText(Integer.toString(currCount)); /** display the new button text **/

    } 
} ;

/** this method decreases the value by 1 on a long click **/
private OnLongClickListener dec = new OnLongClickListener() {
    public boolean onLongClick(View v) {
    currCount--;
    if (currCount == -1) {
        currCount=0;
    }
    setText(Integer.toString(currCount));
    return true;
}
} ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T02:04:22.670

您不尝试`AsynkTask`您描述的方法是正确的。这是不正确的。

这是我的建议：您可以将您在 Activity 中定义的所有`ScoreButton`sa 都赋予更复杂`onClickListener`的内容（从您的 Activity 范围，而不是`ScoreButton`类的范围）。这将是一个侦听器，其中包含有关所有`Button`s 作为成员变量的信息。您只会创建它的一个实例，但会将其传递给您的所有`ScoreButton`s [或`Button`s through `setOnClickListener()`。当需要包装其中一个分数时，您只需将侦听器中的所有其他计数器设置为 0。[注意：在这种方法中，您甚至不需要子类化，`Button`尽管您可以根据需要进行子类化]。

然而，既然你说你正在学习，你甚至可以尝试创建一个`ScoreButtonGroupView`你可以放置在你的视图层次结构中的东西。这将是一个很好的独立解决方案，它具有适当设置按钮值的内部逻辑（正如我认为你试图通过子类化来做的那样`Button`）。

# html - 将 index.html 附加到根目录

> ID：10167755
> 
> 赞同：1
> 
> 时间：2012-04-16T01:30:43.237
> 
> 标签：html, indexing, directory, append, root

我的新网站有问题。(www.example.com)

基本上，当我查看我的谷歌分析页面时，它认为 mysite/index.html 和 mysite/ 是两个不同的页面。这主要是出于搜索引擎优化的原因。

有没有办法附加两者或使根自动重定向到 mysite/index.html？我想你可能可以通过 301 重定向或修改 .htaccess 文件来做到这一点。

顺便说一句，我的主机是 iPage。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:20:14.840

您可以通过将以下代码添加到位于根目录中的 .htaccess 文件在 Apacher 服务器上完成此操作：

```
RewriteEngine On
RewriteBase /
RewriteRule ^$ http://www.example.com/index.html [R=301,L] 
```

这会将任何请求仅接收到“/”并将它们重写为“/index.html”。我个人觉得附加 index.html 比其他方法更难看，所以这里有一些 .htaccess 代码，用于从 URL 中*删除*index.html：

```
RewriteEngine on
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.html\ HTTP/
RewriteRule ^index\.html$ http://www.example.com/ [R=301,L] 
```

# java - java同步静态方法

> ID：10167759
> 
> 赞同：3
> 
> 时间：2012-04-16T01:31:06.280
> 
> 标签：java, static, synchronization

如果我有这样的方法

```
public synchronized static foo()
{

} 
```

这编译得很好。

所以这让我想到了两个问题

1.  什么是同步？类，还是别的什么？
2.  您可以在一个类上同步吗，是否也会锁定该类的所有对象。

例如你能这样做吗

```
synchronized(Foo) // where Foo is a class
{
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T01:33:49.713

同步静态方法 in`MyClass`本质上与`synchronized(MyClass.class)`块相同。您的第二个示例应重写为

```
synchronized(Foo.class) {
} 
```

是正确的。

如果您想对类同步采取防御措施，则应在类外不可见的私有静态对象上进行同步。这可以防止恶意代码通过在其类对象上执行来阻止您的静态方法`synchronized`，从而阻止合法方法。

就“锁定所有对象”而言，标记的非静态方法`synchronized`不会通过执行静态`synchronized`方法来锁定，因为常规`synchronized`方法锁定在对象的*实例*上，而不是在其类上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T01:36:01.940

是的，它正在`Class`对象上同步。`Class`您可以在任何对象上进行同步。您可以使用它的字面量 ( ) `Foo.class`，也可以使用.`getClass()``Foo`

有关同步的更多信息（该路径中的第二页包含有关使用哪些锁同步方法的信息）：[http ://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T01:36:39.190

1.  它正在`class`对象上同步，例如`MyClass.class`
2.  不，它不会锁定类的对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T01:41:41.357

静态方法使用类作为锁定对象。

Java 语言规范的相关部分是[8.4.3.6, 'synchronized Methods'](http://java.sun.com/docs/books/jls/third_edition/html/classes.html#260369)：

> 同步方法在执行之前获取监视器（第 17.1 节）。对于类（静态）方法，使用与方法类的 Class 对象关联的监视器。对于实例方法，使用与 this（调用该方法的对象）关联的监视器。

# package - dpkg-deb：不显示输出

> ID：10167760
> 
> 赞同：0
> 
> 时间：2012-04-16T01:31:11.613
> 
> 标签：package, dpkg

我想知道是否可以在不显示任何输出的情况下运行 dpkg-deb（例如：“x 已成功打包。”消息，以及有关控制文件的任何警告。

# php - ajax 调用不显示新数据

> ID：10167762
> 
> 赞同：0
> 
> 时间：2012-04-16T01:32:33.533
> 
> 标签：php, html, ajax

我有一个 ajax 调用，应该在每次循环后在文件夹中查找新图像，并在下一个循环中显示新图像，但它不能正常工作

这是我的html代码：

```
<html>
  <head>
    <meta http-equiv="refresh" content="1000"/>
    <title>Slideshow</title>
    <style type="text/css">
      #slideshow {
        position: relative;
      }
      #slideshow,
      #slideshow img {
        position: absolute;
        top: 0px;
        left: 0px;
        padding: 15px;
        border: 1px solid #ccc;
        background-color: #eee;
      }
      #slide {
        width: 370px;
        height: 220px;
        padding: 0;
        margin: 0 auto;
      }
      #myslides {
        width: 370px;
        height: 220px;
        padding: 0;
        margin: 0 auto;
      }

      #myslides img {
        padding: 10px;
        border:  1px solid rgb(100,100,100);
        background-color: rgb(230,230,230);
        width: 350px;
        height: 200px;
        top:  0;
        left: 0
      }

    </style>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>

    <script type="text/javascript">
      function loadSlides() {
        $.ajax({
          type: "GET",
          url: "loadajax.php"
        }).done(function(response) {
          var temp_images = eval("(" + response + ")");
          for(ti in temp_images)
          {
            //alert(temp_images[ti]);
            $('#slideshow').append('<img src="images/' + temp_images[ti] + '" alt="">');
          }
          startSlideshow();
        });
      }

      function startSlideshow()
      {
        $('#slideshow').cycle({
          fx: 'fade',
          speed: 700,
          timeout: 800
        });
      }

      $(document).ready(function(){
        loadSlides();
      });
    </script>
  </head>
  <body>
    <div id="slideshow" />
  </body>
</html> 
```

和我的php代码：

```
<?php

function returnimages($dirname="./images") {
  $pattern="([^\s]+(\.(?i)(jpg|png|gif|bmp))$)";
  $files = array();
  if($handle = opendir($dirname)) {
    while(false !== ($file = readdir($handle))){
      if(preg_match($pattern, $file)){ //if this file is a valid image
        $files[] = $file;
      }
    }
    closedir($handle);
  }
  //sort($files);
  natcasesort($files);

  return($files);
}

$images = returnimages();
echo json_encode($images);

?> 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:44:57.990

当您调用`jQuery.ajax()`并且不以与附加回调相同的方式在`.fail()`回调时附加到返回的[Deferred 对象](http://api.jquery.com/category/deferred-object/)`.done()`时，如果请求因任何原因失败，您将一无所获。

所以我们可以在这里确定的是您的请求失败了。或者一开始就没有运行。

要追踪此类问题，请使用[Firebug](http://getfirebug.com/)或 chrome 内置的开发人员工具。它们都有一个“网络”选项卡，向您显示浏览器发出的所有请求以及完整的详细信息。您可以使用这些来确定请求是否实际被启动，以及结果。

# java - 不确定选择哪种类型的列表？

> ID：10167764
> 
> 赞同：0
> 
> 时间：2012-04-16T01:32:50.763
> 
> 标签：java, data-structures

我对 Java（但正在学习）数据结构没有那么丰富的经验，并且不确定要选择哪种类型的列表。我的问题是我正在创建一个套接字服务，它接受数据并根据列表检查它，如果它不存在，那么它将数据传递给要处理并将数据 ID 号添加到列表中，这样相同的数据就不会再次处理（处理数据的服务不知道是否存在重复工作，因此这充当过滤器）。

我读到 arraylist 很快，但我刚刚意识到它需要我知道列表的大小，因为它一直在增长（它肯定会达到数十亿个项目）。我以为我会使用老式整数 [] 但我想我会问是否有更好的方法。

与我的流程相关的细节很少，我的数据本身很复杂，但是对于查找，我将数据转换为哈希码并进行检查，因此我的所有数据都是整数（正/负）并且客户端请求的服务是通过可运行文件完成，所以如果我可以做些什么来提高数据效率，我可以这样做（我在想，因为它的所有整数可能会经常对其进行排序以使循环更快？）。integer[] 足够好还是有更好的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T01:35:36.813

```
it will surely hit several billion items 
```

我对此表示高度怀疑。那将是千兆字节的数据。

如果您真的有数十亿个项目，我建议将它们保存在数据库而不是内存中。您当然可以在内存中缓存一个子集以使某些查询更快，但长期的解决方案是一个即使服务器出现故障也能保留值的数据库。

用于检查 ID 是否存在的数据库查询只需几毫秒。我认为这是一个比将它们存储在内存中更好的长期解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T01:35:41.640

如果 ID 是数字或字符串，您可以使用 a `HashSet<IDType>`，其中`IDType`是 ID 的类型（例如`int`）。这确保了最佳搜索时间，并且每个元素只存储一次。

ArrayList 也可以，但要在其中搜索，您必须遍历整个列表（可能在最坏的情况下），比较每个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T01:37:32.887

好吧，如果您要检查贵重物品，那么无论哪种方式，您都必须存储所有物品。我建议使用`HaspMap`. 此外，`hashmaps`如果一个可能不够，您可以使用多个。

您可以通过以下方式轻松检查

```
if(map.containsKey(blah))
    //Do something 
```

`hashmap`如果您认为可以根据某事区分项目，请使用多个。那可能会更快。另外，由于项目这么大，我建议使用 a`LinkedHashMap`和`HashMap`来做一些缓存。这将加快进程，因为`LinkedHashMap`它将经常出现的项目存储在其优先级 Q 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T01:37:43.107

如果您已经在对数据进行散列处理，为什么不使用散列集合之一，例如 HashSet 或 HashMap 而不是列表？

# jquery - 用css在地图上定位点

> ID：10167765
> 
> 赞同：0
> 
> 时间：2012-04-16T01:32:51.730
> 
> 标签：jquery, html

我正在寻找解决问题的方法，我正在制作带有位置的地图，位置用点表示，但是我一直在使用 position:relative; 所以它从容器顶部计算左上角，但现在我意识到它不是这样做的，它会向下移动，因为有几个“点”，我找不到解决这个问题的方法，有一个简单的方法吗？

预览：*删除*了看一下missisipy（海边）的点和右边的点，它们的意思是在相同的高度，但它们不是..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:06:43.687

我认为 position:absolute 可能会更好。相对将从原始位置计算。w3schools 的准确报价：

相对定位的元素是相对于其正常位置定位的。

最有可能在原始 DOM 结构中，一个“点”位于另一个之上，因此如果高度的位置相同，那么如您所见，一个将高于另一个。

但是对于绝对而言，另一个直接的 w3s 报价：

绝对位置元素相对于第一个具有非静态位置的父元素定位。如果没有找到这样的元素，则包含块是 html：

只要不存在位置不是静态的父元素，absolute 就应该工作而无需更改任何其他内容。如果有然后返工数字，你应该很好。

固定的也可以工作，但如果查看屏幕对于整个地图来说不够大，那会导致问题，我的在这里不是问题，但是......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T01:47:35.643

我不是 100% 确定我是否理解您遇到的问题，但我认为这是因为点是相对于锚标签定位的，每次添加锚标签时，它都会放置在前一个锚标签的下方. 我认为定位锚标签而不是锚标签内的 div 会起作用。所以而不是

```
<a href="http://www.tampaport.com/" target="_blank" class="dot_class">
  <div class="dot" style="top: 255px; left: 642px; opacity: 1; " data-title="Tampa Port Athority">
  </div>
</a> 
```

你可以试试

```
<a href="http://www.tampaport.com/" target="_blank" class="dot_class" style="top: 255px; left: 642px; opacity: 1; ">
  <div class="dot"  data-title="Tampa Port Athority">
  </div>
</a> 
```

并确保将锚显示为具有相对位置的块：

```
a.dot_class{
  display: block;
  position: relative;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T07:17:36.667

您必须使用我们`absolute positionning`，它允许您相对于父容器定位元素。

唯一的规则是你的父容器也必须*定位*，所以你可以添加`position: relative`它，它的位置不会受到影响，但它会成为一个*定位元素*。

您的 HTML：

```
<div class='map'>
    <span class='point p1'></span>
    <span class='point p2'></span>
    <span class='point p3'></span>
    <span class='point p4'></span>
</div>​ 
```

你的 CSS：

```
.map {
    position: relative;
    [...other styling...]
}

.point {
    position: absolute;
    left: [...X coordinate...];
    top: [...Y coordinate...];
    [...other styling...]
} 
```

在这里演示：http: [//jsfiddle.net/YYmde/](http://jsfiddle.net/YYmde/)

# android - 在 Eclipse 和最新的 Android SDK 上运行 android 演示项目的困难

> ID：10167766
> 
> 赞同：1
> 
> 时间：2012-04-16T01:33:19.227
> 
> 标签：android, sample, demo

我在从 sdk 运行 android 演示时遇到问题，它根本不起作用。它总是显示错误。因此，经过几次在线搜索后，我找到了这个链接 [How to run the Android Support4Demo in Eclipse](https://stackoverflow.com/questions/9593431/how-to-run-the-android-support4demo-in-eclipse) Based on the tutorial，我按照他的教程进行操作，并期望它会像其他人一样工作。有关信息，我的 eclipse 是带有最新 android sdk 的 eclipse indigo 3.7.2。

但我有这个错误，很多错误：

[单击此处查看列表错误的图像](http://postimage.org/image/43i32olzb/ "对不起，请点击链接查看错误列表，因为我是新手，所以我还不能发布图像")

有人知道如何让我能够运行 android 演示项目吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T01:46:00.870

看来你还没有建立一个正确的 android 项目。Eclipse无法加载android.jar，所以找不到android的classed

# php - 在 Symfony 的项目配置类中使用 require_once

> ID：10167772
> 
> 赞同：0
> 
> 时间：2012-04-16T01:34:42.410
> 
> 标签：php, symfony1, symfony-1.4, relative-path

在我的 ProjectConfiguration.class.php 文件中，我试图确保文件路径`sfCoreAutoload.class.php`是动态的，并且不需要我每次在线登录时都手动更改它，正如你们大多数人所知道的那样，这需要您输入下面的行：

```
require_once dirname(__FILE__).'/../lib/vendor/symfony/lib/autoload/sfCoreAutoload.class.php'; 
```

*（参考[http://symfony.com/blog/jobeet-day-23-the-deployment](http://symfony.com/blog/jobeet-day-23-the-deployment)）*

我的 Symfony 文件存储在：

```
Users/username/lib/vendor/symfony-1.4.14/lib/autoload/sfCoreAutoload.class.php` 
```

这基本上会转化为：

```
require_once dirname(__FILE__).'/../lib/vendor/symfony-1.4.14/lib/autoload/sfCoreAutoload.class.php'; 
```

但这不起作用，我的本地主机说找不到服务器。

以上对我来说无论如何都没有意义，因为项目配置文件存储在：

```
symfony/lib/config/sfProjectConfiguration.class.php 
```

和自动加载文件：

```
symfony/lib/autoload/sfCoreAutoload.class.php 
```

所以从技术上讲，这应该转化为：

```
require_once dirname(__FILE__).'/../autoload/sfCoreAutoload.class.php' 
```

这也不起作用，让我不得不提及 prod 和 dev 环境的完整路径，因此每次我推送它时都让我手动进行更改（显然使过程不那么无缝和愚蠢）。

有人知道这里有什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:51:30.803

例如，如果你想共享它，让你的 Symfony 文件夹独立于你的项目是一个很好的解决方案。

我建议您保留**默认路径**：

```
require_once dirname(__FILE__).'/../lib/vendor/symfony/lib/autoload/sfCoreAutoload.class.php'; 
```

然后，只需为您的 symfony 文件夹创建一个**符号链接。**

```
cd /path/to/your/project/lib/vendor
ln -s Users/username/lib/vendor/symfony-1.4.14/ symfony 
```

# php - 某些主机不喜欢 SET NAMES utf8 --“在其他无缓冲查询处于活动状态时无法执行查询。”

> ID：10167773
> 
> 赞同：0
> 
> 时间：2012-04-16T01:34:45.263
> 
> 标签：php, mysql, utf-8, pdo

我`$PDO->query('SET NAMES utf8;');`在我的连接库代码中引入了一些 Unicode 合规性。这适用于某些主机，在这些主机上，我可以使用`.execute()`.

但是，在某些托管计划中，我遇到了这个错误：

> 一般错误：2014 在其他无缓冲查询处于活动状态时无法执行查询。考虑使用 PDOStatement::fetchAll()。或者，如果您的代码只针对 mysql 运行，您可以通过设置 PDO::MYSQL_ATTR_USE_BUFFERED_QUERY 属性来启用查询缓冲。

所以，在 SET NAMES 之前，我介绍了`$PDO->setAttribute(PDO::MYSQL_ATTR_USE_BUFFERED_QUERY, TRUE);`，但我仍然收到错误消息。然后我将该值设置为 FALSE，但我仍然收到错误消息。

当然，如果我删除该`"SET NAMES utf8"`语句，问题就会消失。再说一次——这个问题只发生在一些网络主机上。

将 MySQL 切换到适用于大多数 Linux 托管计划的 Unicode 的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T01:52:19.130

将连接编码设置为 UTF-8 的首选方法是`PDO::MYSQL_ATTR_INIT_COMMAND`在 PDO 构造函数中使用 ，如[手册](http://php.net/manual/en/ref.pdo-mysql.connection.php)中所示：

```
$dsn      = 'mysql:host=localhost;dbname=testdb';
$username = 'username';
$password = 'password';
$options  = array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8'); 

$dbh = new PDO($dsn, $username, $password, $options); 
```

这应该始终有效。

# php - 从 PHPUnit 的几次执行中聚合代码覆盖率

> ID：10167775
> 
> 赞同：24
> 
> 时间：2012-04-16T01:34:55.567
> 
> 标签：php, unit-testing, phpunit, code-coverage

我使用 PHPUnit 已经有一段时间了，看起来我可能需要将我的测试分成组，这些组将作为单独的`phpunit`. 主要原因是我的大多数测试需要在单独的进程中运行，而由于[此处](https://github.com/sebastianbergmann/phpunit/issues/324)记录的问题，有些实际上不能在单独的进程中运行。我想做的是编写一个 bash 脚本，该脚本会触发多次执行`phpunit`，每个执行都配置为使用不同的设置运行不同的测试。

所以我的问题是：有没有办法聚合多次`phpunit`执行的代码覆盖率结果？我可以直接通过 PHPUnit 本身或使用其他工具来做到这一点吗？`phpunit`是否有可能从使用 PHPUnit 的测试套件概念的一次运行中得到我正在寻找的东西？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-14T12:28:42.907

使用`--coverage-php`PHPUnit 的 " " 选项使其将覆盖数据写入序列化`PHP_CodeCoverage`对象，然后使用 组合它们`PHP_CodeCoverage::merge`，如下所示：

```
<?php
/**
 * Deserializes PHP_CodeCoverage objects from the files passed on the command line,
 * combines them into a single coverage object and creates an HTML report of the
 * combined coverage.
 */

if ($argc <= 2) {
  die("Usage: php generate-coverage-report.php cov-file1 cov-file2 ...");
}

// Init the Composer autoloader
require realpath(dirname(__FILE__)) . '/../vendor/autoload.php';

foreach (array_slice($argv, 1) as $filename) {
  // See PHP_CodeCoverage_Report_PHP::process
  // @var PHP_CodeCoverage
  $cov = unserialize(file_get_contents($filename));
  if (isset($codeCoverage)) {
    $codeCoverage->filter()->addFilesToWhitelist($cov->filter()->getWhitelist());
    $codeCoverage->merge($cov);
  } else {
    $codeCoverage = $cov;
  }
}

print "\nGenerating code coverage report in HTML format ...";

// Based on PHPUnit_TextUI_TestRunner::doRun
$writer = new PHP_CodeCoverage_Report_HTML(
  'UTF-8',
  false, // 'reportHighlight'
  35, // 'reportLowUpperBound'
  70, // 'reportHighLowerBound'
  sprintf(
    ' and <a href="http://phpunit.de/">PHPUnit %s</a>',
    PHPUnit_Runner_Version::id()
      )
  );

$writer->process($codeCoverage, 'coverage');

print " done\n";
print "See coverage/index.html\n"; 
```

您也可以使用名为 的工具合并文件`phpcov`，如下所述：[https ://github.com/sebastianbergmann/phpunit/pull/685](https://github.com/sebastianbergmann/phpunit/pull/685)

# gdb - gdb“在启动过程中程序以代码 126 退出。”

> ID：10167779
> 
> 赞同：9
> 
> 时间：2012-04-16T01:36:00.230
> 
> 标签：gdb

我正在调试一个 c++ 程序：

```
gdb simplesearch.o 
```

然后 gdb 启动成功：

```
(gdb) Reading symbols from /home/zwx/workspace/xapian/examples/simplesearch.o...done. 
```

但是当我尝试运行时：

```
(gdb) run 
```

gdb 报告：

```
Starting program: /home/zwx/workspace/xapian/examples/simplesearch.o 
/bin/bash: /home/zwx/workspace/xapian/examples/simplesearch.o: cannot execute binary file
/bin/bash: /home/zwx/workspace/xapian/examples/simplesearch.o: Success
During startup program exited with code 126. 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T01:37:33.153

文件`.o`不是程序，它是需要与库链接以生成程序的目标文件。您可以使用`gdb`它来检查其中的代码，但它不可运行（“无法执行二进制文件”消息）。您将需要链接它以制作程序。可能像

```
g++ -o simplesearch simplesearch.o 
```

就足够了，但是如果没有更多信息，不清楚它是否需要更多的库，而不仅仅是系统 C 库和 C++ 运行时支持等。

# c - 让 pthread 在没有函数等待的情况下完成？

> ID：10167788
> 
> 赞同：0
> 
> 时间：2012-04-16T01:36:42.883
> 
> 标签：c, pthreads

规范说函数“不能阻塞等待线程或进程完成。换句话说，通常，function() 将在子进程和工作线程完成之前返回。” 我怎样才能做到这一点？说 pthread_join 使函数等待 pthread 结束，没有它，线程在完成所有工作之前被取消。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T01:46:22.513

对我来说，这听起来像是您必须将线程的引用存储在线程容器中，该容器要么是全局的，要么由函数返回并由调用者保存。然后，在进程的最后（但可能在函数返回后更长时间），调用`pthread_join`该容器中的所有线程以确保它们正确完成。

# c++ - 忽略以前版本的 boost C++

> ID：10167802
> 
> 赞同：0
> 
> 时间：2012-04-16T01:39:15.263
> 
> 标签：c++, boost, linker, boost-thread

我必须在包含旧版本 C++ boost 库的机器上进行演示。具体来说`boost::thread`，我需要在其中使用类的`lock`成员函数`mutex`。不幸的是，旧版本（1.33.1）不包含此方法。

我在目标机器上没有root权限，也无法卸载之前版本的boost。我的解决方案是在目标机器上预编译更新的库，然后链接到更新版本的库。

库编译部分非常顺利，一切顺利，但当我尝试编译时，它仍然表明它使用的是旧版本的 boost。我环顾四周（这里是 g++ noob），发现您可以手动指定一个位置，首先使用`-L`and`-I`标志来查找头文件和库。我尝试将这些与相对路径一起使用（因为我不知道将执行演示的目录，但我确实知道我的新 boost 库的相对路径），我想出了这个：

```
-bash-3.2$ g++ -I./include -L./lib main.cpp -lthread
/usr/bin/ld: cannot find -lthread
collect2: ld returned 1 exit status 
```

我一直在尝试各种东西，例如指定更深入的包含/库目录的路径，但没有运气，我觉得我在死胡同。有任何想法吗？仅供参考，我正在寻找使用 boost 1.49.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:46:10.450

尝试：

```
g++ -I./include -L./lib main.cpp -lboost_thread 
```

您需要指定的库的名称`-l`来自`.so`文件：省略开头`lib`和`.so`（例如`libboost_thread.so`-> `-lboost_thread`）

# python - 在python中定义一个类

> ID：10167808
> 
> 赞同：0
> 
> 时间：2012-04-16T01:40:51.173
> 
> 标签：python, class, self

```
class Rectangle(object):

def __init__(self, (top left corner), width, height):
    """
    __init__(self, (x, y), integer, integer)
    """

    self._x = x
    self._y = y
    self._width = width
    self._height = height

def get_bottom_right(self):
    x + self.width = d
    y + self.height = t

return '' + d,t 
```

所以我想为一个矩形创建一个类，我试图找到矩形的右下角。通过将高度和宽度添加到左上角可以找到矩形的右下角。例如。(2,3),4,7 将使底角为 (6,10)。但是，我不相信我的代码是正确的。这是我第一次使用类，所以一些关于如何解释它的提示和技巧将非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T01:50:20.310

我想你想要的是这个

```
class Rectangle(object):
  def __init__(self, top_corner, width, height):
    self._x = top_corner[0]
    self._y = top_corner[1]
    self._width = width
    self._height = height

  def get_bottom_right(self):
    d = self._x + self.width
    t = self._y + self.height
    return (d,t) 
```

你可以像这样使用它

```
# Makes a rectangle at (2, 4) with width
# 6 and height 10
rect = new Rectangle((2, 4), 6, 10) 

# Returns (8, 14)
bottom_right = rect.get_bottom_right 
```

另外，您可能可以通过`Point`上课来节省一些时间

```
class Point(object):
    def __init__(self, x, y):
        self.x = x
        self.y = y 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T01:47:15.860

```
class Rectangle(object):
  def __init__(self, pos, width, height):
    self._x = pos[0]
    self._y = pos[1]
    self._width = width
    self._height = height
  def get_bottom_right(self):
    d = self._x + self._width
    t = self._y + self._height
    return d,t 
```

代码在这里运行：http: [//codepad.org/VfqMfXrt](http://codepad.org/VfqMfXrt)

# node.js - 发生一些错误时，Nodejs express 服务器关闭

> ID：10167812
> 
> 赞同：1
> 
> 时间：2012-04-16T01:41:20.260
> 
> 标签：node.js, express

我使用 Express 作为我的 Node.js Web 框架，使用 MongoDB 作为持久层。当我使用 'node app.js' 命令运行服务器时，偶尔会出现一些错误，例如 mongoose 错误或 imagemagick 错误，hole node 进程将死亡并且无法从浏览器中使用。我使用了 Express 的错误处理程序，但这仍在发生。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:00:29.687

```
process.on('uncaughtException', function (err) {
  console.error(err);
  console.log("Node NOT Exiting...");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:52:27.977

```
clusters.on('death', function(worker) {
  app.listen(3000);
}); 
```

# c# - WCF - 调用 WCF 服务的 WCF 客户端出现“未为目标提供服务证书”错误

> ID：10167814
> 
> 赞同：5
> 
> 时间：2012-04-16T01:41:26.270
> 
> 标签：c#, .net, wcf

我正在尝试使用带有证书的消息安全性在 WCF 中创建测试服务/客户端。我正在使用 Visual Studio 开箱即用创建的基本服务，并从我设置为客户端的另一个项目中调用它。

我创建了两个证书，一个用于服务器，另一个用于客户端，并将它们导入到我的证书存储中。我还按照以下说明操作：http: [//msdn.microsoft.com/en-us/library/ms733098.aspx](http://msdn.microsoft.com/en-us/library/ms733098.aspx)

然而，没有运气。从客户端调用服务器时出现错误：

> 未为目标“http://localhost:1704/Service1.svc”提供服务证书。在 ClientCredentials 中指定服务证书。

我的服务配置如下：

```
<system.serviceModel>
    <services>
      <service name="WcfService2.Service1" behaviorConfiguration="ServiceCredentialsBehavior">
        <endpoint address="" binding="wsHttpBinding" contract="WcfService2.IService1" bindingConfiguration="MyHTTPBindingConfig">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
      </service>
    </services>
    <bindings>
      <wsHttpBinding>
        <binding name="MyHTTPBindingConfig">
          <security mode="Message">
            <message clientCredentialType="Certificate" negotiateServiceCredential="false" establishSecurityContext="false" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceCredentialsBehavior">
          <serviceCredentials>
            <serviceCertificate findValue="WCFTest" storeLocation="CurrentUser" storeName="My" x509FindType="FindBySubjectName" />
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

我的客户端配置是：

```
<system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="WSHttpBinding_IService1" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                allowCookies="false">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="Message">
                    <transport clientCredentialType="Windows" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="Certificate" negotiateServiceCredential="false"
                        algorithmSuite="Default" establishSecurityContext="false" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost:1704/Service1.svc" binding="wsHttpBinding"
            bindingConfiguration="WSHttpBinding_IService1" contract="ServiceReference1.IService1"
            name="WSHttpBinding_IService1" behaviorConfiguration="endpointCredentialBehaviours">
            <identity>
                <dns value="localhost" />
            </identity>
        </endpoint>
    </client>
  <behaviors>
    <endpointBehaviors>
      <behavior name="endpointCredentialBehaviours">
        <clientCredentials>
          <clientCertificate findValue="WCFClient" storeLocation="CurrentUser" storeName="My" x509FindType="FindBySubjectName"/>
        </clientCredentials>
      </behavior>
    </endpointBehaviors>
  </behaviors>
</system.serviceModel> 
```

我在客户端调用服务：

```
 ServiceReference1.Service1Client client = new ServiceReference1.Service1Client();
    string s = client.GetData(1);
    label1.Text = s;
    client.Close(); 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-19T14:39:35.330

这是工作**客户端**配置的示例：

```
<client>
 <endpoint address="http://example.com/Myservice.svc"
        binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IService"
        contract="Core.IService" name="WSHttpBinding_IService" behaviorConfiguration="myServiceBehaviour" >
   <identity>
    <dns value="SampleServiceCertificate"/>
   </identity>
 </endpoint>
</client>
    <behaviors>
      <endpointBehaviors>
        <behavior name="myServiceBehaviour">
          <clientCredentials>
            <serviceCertificate>
              <defaultCertificate storeLocation="LocalMachine" storeName="My" findValue="SampleServiceCertificate" x509FindType="FindBySubjectName"  />
            </serviceCertificate>
          </clientCredentials>
        </behavior>        
      </endpointBehaviors>      
    </behaviors> 
```

在您发布的配置中，clientCredentials 节点缺少 serviceCertificate 子节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T03:01:52.223

正如错误所暗示的，您的客户似乎没有提供证书。为了解决这个问题，我要做的第一步是确保您的客户端证书在您需要的位置，并且配置文件中的名称是正确的。你可以用**MMC**做到这一点。以下是有关如何执行此操作的说明：

**如何：使用 MMC 管理单元查看证书：http:** [//msdn.microsoft.com/en-us/library/ms788967.aspx](http://msdn.microsoft.com/en-us/library/ms788967.aspx)

我也会尝试通过代码手动添加客户端证书：

**如何：指定客户端凭据值：http:** [//msdn.microsoft.com/en-us/library/ms732391.aspx](http://msdn.microsoft.com/en-us/library/ms732391.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T19:03:01.167

您必须提供证书`client.Credentials`。有关更多详细信息，请遵循[**此资源**](http://msdn.microsoft.com/en-us/library/ms733098.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-26T03:10:17.420

我知道这是很老的线程。但我认为这可能会帮助面临这个问题的其他人。

根据问题，您需要向客户端安装服务级别证书，该证书基本上是服务建立信任所必需的。查看以下链接以供参考：

[https://msdn.microsoft.com/en-us/library/ms731058(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/ms731058(v=vs.110).aspx)

和

[https://msdn.microsoft.com/en-us/library/ms752233(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/ms752233(v=vs.110).aspx)

将证书添加到存储后，在服务配置文件中添加以下设置：

```
 <serviceCredentials>
      <serviceCertificate findValue="localhost" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName" />
    </serviceCredentials> 
```

完整的配置设置可在上面的链接中找到。希望这对您有所帮助。

# python - 需要帮助使用 python 登录网站

> ID：10167816
> 
> 赞同：1
> 
> 时间：2012-04-16T01:41:43.493
> 
> 标签：python, urllib2, urllib, twill, cookielib

我需要为一个大学项目爬取几个网站，而对于一个需要登录的网站，我已经走到了死胡同。我正在使用 Python 中的 urllib、urllib2、cookielib 模块登录。它不适用于[http://www.cafemom.com](http://www.cafemom.com)。我收到的 http 响应保存在 .txt 文件中，并对应于“登录失败”页面。

为此，我还尝试使用“twill”包，但这对我来说也不起作用。谁能建议我应该怎么做？

下面是我用于此目的的主要 login() 方法。

```
def urlopen(req):
    try:
            r = urllib2.urlopen(req)
    except IOError, e:
            if hasattr(e, 'code'):
                    print 'The server couldn\'t fulfill the request.'
                    print 'Error code: ', e.code
            elif hasattr(e, 'reason'):
                    print 'We failed to reach a server.'
                    print 'Reason: ', e.reason
            raise

    return r

class Cafemom:
    """Communication with Cafemom"""

    def __init__(self, cookieFile = 'cookie.jar', debug = 0):
            self.cookieFile = cookieFile
            self.debug = debug
            self.loggedIn = 0
            self.uid = ''
            self.email = ''
            self.passwd = ''
            self.cj = cookielib.LWPCookieJar()

            if os.path.isfile(cookieFile):
                    self.cj.load(cookieFile)

            opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(self.cj))
            urllib2.install_opener(opener)

    def __del__(self):
            self.cj.save(self.cookieFile)

    def login(self, email, password):
            """Logging in Cafemom"""

            self.email  = email
            self.passwd = password
            url='http://www.cafemom.com/lohin.php?'
            cnt='http://www.cafemom.com'
            headers = {'Content-Type': 'application/x-www-form-urlencoded'}
            body = {'identifier': email, 'password': password }
            if self.debug == 1:
                    print "Logging in..."

            req = urllib2.Request(url, urllib.urlencode(body), headers)
            print urllib.urlencode(body)
            #print req.group()
            handle = urlopen(req)

            h = handle.read()
            f = open("responseCafemom.txt","w")
            f.write(f)
            f.close() 
```

我也尝试使用此代码但不成功

```
import urllib, urllib2, cookielib

username = myusername
password = mypassword

cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
login_data = urllib.urlencode({'identifier' : username, 'password' : password})
opener.open('http://www.cafemom.com/login.php', login_data)
resp = opener.open('http://www.cafemom.com')
print resp.read() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:56:02.783

我不确定这是否正是您所需要的，但值得一试。python 的优秀[请求](http://docs.python-requests.org/)模块同时支持 cookie 和 HTTP 基本身份验证。

这些示例直接来自其文档。

这是基本的身份验证示例

```
payload = {'identifer': email, 'password': password}
r = requests.post("http://www.cafemom.com/login.php?", data=payload) 
```

这是传递先前保存的 cookie 的方法（您可以使用“r.cookies”从先前的请求中访问它们。Cookie 存储只是字典。

```
r = requests.get(url, cookies=cookies) 
```

以下是如何阅读您的请求的响应

```
f = open("responseCafemom.txt","w")
f.write(r.text) 
```

# iphone - TWTweetComposeViewController - 防止编辑

> ID：10167817
> 
> 赞同：0
> 
> 时间：2012-04-16T01:41:59.877
> 
> 标签：iphone, ios, twitter

在我的 iOS 游戏中，我希望用户能够发布他们的分数。但是，我不希望他们能够编辑推文表，因为这会导致作弊。如何防止用户编辑 twtweetcomposeviewcontroller？

# django - Django S3 [Errno 104] 对等方重置连接

> ID：10167818
> 
> 赞同：0
> 
> 时间：2012-04-16T01:42:00.633
> 
> 标签：django, amazon-s3, boto

我正在尝试将文件从我的 django 应用程序上传到 Amazon S3 服务。它适用于小文件（低于 300ko），但适用于其他文件（300ko +）我有一个“[Errno 104] Connection reset by peer”错误。我尝试使用 django 1.4 和 1.3、python2.7 和 2.6 但没有成功。这真的很奇怪。现在四天我正在寻找解决方案。提前谢谢。

**编辑** 找出问题所在。我使用 guincorn 作为我的 django 服务器，默认情况下在 30 秒后关闭请求。所以我不得不增加超时来让它工作并发出异步请求。网页：python manage.py run_gunicorn -b 0.0.0.0:$PORT -w 3 --timeout 900 -k gevent

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:57:13.193

我使用**s3cmd**将内容从我的 Django 应用程序发布到 amazon-s3

```
subprocess.call(["s3cmd", "put", "-P", "-r", "-c", s3conf_path, "--exclude=.xml", src,  fileserver_path + '/data/']) 
```

我可以发布超过 150 mb 的内容

# android - 来自位置/位置的 Android 地理点

> ID：10167819
> 
> 赞同：4
> 
> 时间：2012-04-16T01:42:00.997
> 
> 标签：android, google-maps, geolocation, geocoding

我已经看到了许多从 Geocoder 获取位置名称然后通过 getFromLocation() 获取地址的示例，但是如何通过名称获取位置的 geoPoint。用户输入城市名称，我将它们转换为地理点并显示在地图上。Android或谷歌API中有没有办法。

我不是指当前位置，而是通过给出其名称的任何位置。基本上我希望它允许用户获取偏远城市的天气更新。我可以通过获取当前位置来获取当前位置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T02:18:43.220

试试这个，你最好在单独的线程而不是 UI 线程中运行它。你可以通过这种方法得到`Address`和。`GeoPoint`

```
public static Address searchLocationByName(Context context, String locationName){
    Geocoder geoCoder = new Geocoder(context, Locale.getDefault());
    GeoPoint gp = null;
    Address ad = null;
    try {
        List<Address> addresses = geoCoder.getFromLocationName(locationName, 1);
        for(Address address : addresses){
            gp = new GeoPoint((int)(address.getLatitude() * 1E6), (int)(address.getLongitude() * 1E6));
            address.getAddressLine(1);
            ad = address;
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    return ad;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T02:13:20.797

使用以下网址通过反向地理编码从地址获取经纬度::

```
http://maps.googleapis.com/maps/api/geocode/json?address=hyderabad&sensor=false 
```

或者

```
http://maps.googleapis.com/maps/api/geocode/xml?address=hyderabad&sensor=true 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T12:32:13.907

从地址获取经纬度坐标是地理编码而不是反向地理编码。简单的获取地址使用地理编码转换它，一旦你得到坐标在地图上显示位置。

# windows - 是否可以将原始输入重定向到特定窗口？

> ID：10167820
> 
> 赞同：2
> 
> 时间：2012-04-16T01:42:12.307
> 
> 标签：windows, winapi, input, keyboard

我有一个 Windows 识别为键盘的 Windows Media Center 遥控器。当我使用 Windows Media Center 在一个屏幕上播放视频运行多显示器设置时，遥控器的输入与常规键盘一起被定向到活动窗口。所以当我在另一个屏幕上做某事时，Windows Media Center 不会响应遥控器。我想我会写一个简单的低级键盘钩子来捕获所有键事件，确定哪些按键来自遥控器，并将它们重定向到打开的媒体中心窗口。

我在[是否可以确定哪个键盘发送了按键？](https://stackoverflow.com/questions/10149796/is-it-possible-to-determine-which-keyboard-sent-a-keypress)我需要使用原始输入函数来确定哪个键盘发送了每个键事件。现在我有了这个，我打算添加一个低级键盘挂钩来检查来自原始输入的信息，但 Windows 显然不允许您同时运行低级挂钩和接收原始输入。

我碰巧适合他们排除的一种情况：我需要原始输入来确定键盘，我真的可以使用挂钩来阻止和重新发送需要重定向的关键事件。

那么，如果没有运行两个进程来获得这两种能力，有没有办法阻止/将输入从原始输入重定向到特定的打开窗口？

编辑：我尝试过单独的线程。不去。

# linux - 为什么 Universal Binaries/FatElf 不是 Linux 内核的一部分？

> ID：10167821
> 
> 赞同：6
> 
> 时间：2012-04-16T01:42:13.227
> 
> 标签：linux, universal-binary

Apple 的通用二进制文件概念允许轻松传送包含 32 位和 64 位版本的二进制文件的单个文件。

虽然这在使用 FatElf 的 Linux 中是可能的，但 FatElf 和通用二进制文件的概念并没有在内核中默认烘焙？

这背后的原因是什么？为什么内核开发人员认为在 linux 上拥有通用二进制文件是个坏主意？

***更新***
我不是在寻找讨论。假设通用二进制文件不是主要 linux 内核的一部分。我只是在问它背后的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T02:16:13.883

> 假设通用二进制文件不是主要 linux 内核的一部分。我只是在问它背后的原因。

胖二进制文件是 32 位或 64 位系统所需的两倍。

既然提供两个单独的二进制文件和提供一个单独的二进制文件一样容易，我为什么要在我的系统上携带额外的脂肪，或者为什么要强迫最终用户下载两倍于他们需要的脂肪？

我*认为*MacOS 选择使用胖二进制文件的原因是他们不希望最终用户了解他们是在 PPC Mac 还是 Intel Mac 上运行。

Linux 用户在理解他们是在 32 位还是 64 位系统上运行时似乎没有问题。

# mysql - 在 servlet 中创建指向数据库记录的超链接

> ID：10167824
> 
> 赞同：0
> 
> 时间：2012-04-16T01:42:57.287
> 
> 标签：mysql, html, servlets

我有一个名为 article 的数据库表，其中包含三个字段（Id、Title、Text）。我正在使用 servlet。我有一个查询要从表中选择 ID 和标题。我想做的是将标题列表显示为超链接，并将每个标题链接到数据库表中的文本这是我的代码

```
String SQL_QUERY ="Select article.title , article.articleId from article where        article.title like '% "+searchWord+"%'";
          Query query = session.createSQLQuery(SQL_QUERY);
          List result = query.list();     
         for(Iterator it=result.iterator();it.hasNext();){  
              Object[] row = (Object[]) it.next();
             String title = ((String) row[0]);
             int id = ((Integer) row[1]);
             out.println("<a Link to the text> title </a>")
          } 
```

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:09:18.227

您需要一个超链接，然后用它调用 Servlet。

例如

```
out.println("<a href=\""+request.getContextPath()+"/articleServlet?id="+id+"\">"+title+"</a>"); 
```

这将调用`doGet()`关联的方法`Servlet`。然后休息是已知的故事。

# python - 使用 Fabric 构建的 EC2 需要启动 Twisted 服务器至少 3 倍

> ID：10167827
> 
> 赞同：2
> 
> 时间：2012-04-16T01:43:30.500
> 
> 标签：python, twisted, fabric

我正在使用结构构建一个 EC2 服务器，并希望为 pyapns 启动一个 Twisted 服务器。我尝试了几种不同的启动脚本的方法——只需调用`sudo(...)`, 来创建`init.d`脚本。

该命令的结果如下：

```
/usr/local/bin/twistd -r epoll -u www-data -g www-data -l /var/log/apnslistener.log --pidfile=/var/run/apnslistener.pid web --class=pyapns.server.APNSServer --port=7077 -l /var/log/pyapns.log 
```

在使用fabric时，无论是直接通过上面的行调用`sudo(...)`还是使用`sudo`启动`init.d`脚本，进程都不会真正启动成功。如果我登录该框并直接启动它，该过程将保持启动状态。

我已经让它通过织物工作，但我必须启动 init.d 脚本*3 次*才能粘住。记录`--spew`显示也不例外。如果我不运行它 3 次，即使是 .pid 文件也永远不会被创建。

我不知道从哪里开始弄清楚为什么会发生这种情况，并且 3x hack 100% 始终如一地工作。有任何想法吗？谢谢！

**编辑**

的输出`/var/log/apnslistener.log`如下。请注意服务器是如何仅在第三次成功启动的。

```
2012-04-16 01:52:08+0000 [-] Log opened.
2012-04-16 01:52:08+0000 [-] twistd 12.0.0 (/usr/bin/python 2.7.2) starting up.
2012-04-16 01:52:08+0000 [-] reactor class: twisted.internet.epollreactor.EPollReactor.
2012-04-16 01:52:09+0000 [-] Log opened.
2012-04-16 01:52:09+0000 [-] twistd 12.0.0 (/usr/bin/python 2.7.2) starting up.
2012-04-16 01:52:09+0000 [-] reactor class: twisted.internet.epollreactor.EPollReactor.
2012-04-16 01:52:10+0000 [-] Log opened.
2012-04-16 01:52:10+0000 [-] twistd 12.0.0 (/usr/bin/python 2.7.2) starting up.
2012-04-16 01:52:10+0000 [-] reactor class: twisted.internet.epollreactor.EPollReactor.
2012-04-16 01:52:10+0000 [-] Site starting on 7077
2012-04-16 01:52:10+0000 [-] Starting factory <twisted.web.server.Site instance at 0x1c6dc20>
2012-04-16 01:52:10+0000 [-] set uid/gid 33/33
2012-04-16 01:52:12+0000 [HTTPChannel,0,127.0.0.1] APNSService __init__ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T19:55:44.723

[这是](http://docs.fabfile.org/en/1.4.1/faq.html#init-scripts-don-t-work)文档中针对您的用例的部分。它与 sudo 无关，而与默认调用的 pty 设置有关。常见问题解答中的更多信息。

# emacs - 无法向 SLIME 发送有趣的字符

> ID：10167829
> 
> 赞同：7
> 
> 时间：2012-04-16T01:43:45.790
> 
> 标签：emacs, unicode, clojure, slime, swank-clojure

尽管我在任何地方都设置了 UTF-8（在我的`lein`项目中，`slime-lisp`组自定义，Emacs 缓冲区本身......），但在尝试运行以下代码时，我不断收到此错误`(def beta "β")`：

```
Coding system iso-latin-1-unix not suitable [...] 
```

例如，仅在 Emacs 中发生，而不是在`lein repl`从命令行运行时发生。

可能是什么原因造成的？我正在使用 Ubuntu，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T07:28:54.820

你应该在你的以下代码`.emacs`：

```
(setq slime-net-coding-system 'utf-8-unix) 
```

并在`project.clj`您运行`lein swank`（或`swank.encoding`将 Java 系统属性设置为`utf-8`）时执行以下操作：

```
:encoding "utf-8" 
```

# javascript - 上传文件后如何显示文件名

> ID：10167830
> 
> 赞同：1
> 
> 时间：2012-04-16T01:43:53.867
> 
> 标签：javascript, jquery, html

我有一个包含文件输入、上传按钮和取消按钮的表单：

**更新：**

```
 <form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='stopImageUpload(this);' class='imageuploadform' >
    <p class='imagef1_upload_form' align='center'><label>Image File: <input name='fileImage' type='file' class='fileImage' /></label>
    <input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>
    </p>
    <p class='imagef1_cancel' align='center'>
    <label><input type='button' name='imageCancel' class='imageCancel' value='Cancel' /></label>
    </p> 
<p><span class='list></span></p>
    <iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'></iframe>
    </form> 
```

现在我想要的是，如果图像已完成上传，在此表单的底部，我想要已上传文件的名称。这可能吗？比如我上传Images/file1.png，上传后文件名file1.png存放在底部，上传user/file2.jpg文件名file2.jpg存放在file1.png下面等等。

我已经上传了所有用 php 和 javascript 整理的文件。以下是上传完成后的javascript代码：

```
 $(document).ready(function(){
    $('.fileImage').bind('change', handleFileSelect, false);
});

function handleFileSelect(evt) {
    var files = evt.target.files;
    localStorage["fname"] = files[0].name; //save the name for future use
}
function stopImageUpload(success){
      var result = '';
      if (success == 1){
  result = '<span class="msg">The file ('+localStorage["fname"]+') was uploaded successfully!</span><br/><br/>';
    localStorage["fname"] = undefined; //remove the temporary variable

      }
      else {
         result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
      }

      return true;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T02:17:15.473

## JavaScript 方式

如果您的目标是现代浏览器（不再是 IE6789），那么[File API](http://www.html5rocks.com/en/tutorials/file/dndfiles/)是您获取文件名的正确选择！它易于使用，并且代码中没有混乱。

查看我制作的演示：http: [//jsfiddle.net/xUzcS](http://jsfiddle.net/xUzcS)
这是你想要的吗？

但是如果你想支持那个旧的IE6，那么对不起，你必须走AJAX的方式，或者使用VBscript。（不建议）

## 添加

```
function handleFileSelect(evt) {
    var files = evt.target.files;
    localStorage["fname"] = files[0].name; //save the name for future use
}

document.getElementById('files').addEventListener('change', handleFileSelect, false);​ 
```

然后：

```
if (success == 1){
    result = '<span class="msg">The file ('+localStorage["fname"]+') was uploaded successfully!</span><br/><br/>';
    localStorage["fname"] = undefined; //remove the temporary variable
} 
```

这可能对你有用，因为我不知道整个 html。

# json - 如何用 Resteasy 装饰 json 响应

> ID：10167831
> 
> 赞同：1
> 
> 时间：2012-04-16T01:43:55.020
> 
> 标签：json, rest, jackson, resteasy

我正在使用将由 Extjs 客户端使用的 Resteasy 实现一个 restfull 服务，并且我想用更多属性来装饰在 http 响应中检索到的 json 对象，而无需在服务方法中使用具有附加属性的包装类或覆盖 JacksonJsonProvider
示例：

原始对象：

```
{
   "id":"1",
   "name":"Diego"
} 
```

装饰物：

```
{
   "success":"true",
   "root":{
             "id":"1",
             "name":"Diego"
          }
} 
```

我找到了[JAXB 装饰器](http://docs.jboss.org/resteasy/docs/2.3.1.GA/userguide/html/Built_in_JAXB_providers.html#decorators)，但我无法为 json 类型实现装饰器。

我尝试使用[拦截器](http://docs.jboss.org/resteasy/docs/2.3.1.GA/userguide/html/Interceptors.html)替换将用包装器序列化的实体，但如果替换为集合的实体，它将不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T00:22:47.557

您可以编写一个拦截器，在将 JSON 响应传递给客户端之前对其进行包装。这是一个示例代码：

1.  定义自定义 HTTPServletResponseWrapper

    ```
    public class MyResponseWrapper extends HttpServletResponseWrapper {
        private ByteArrayOutputStream byteStream;

        public MyResponseWrapper(HttpServletResponse response, ByteArrayOutputStream byteStream) {
            super(response);
            this.byteStream = byteStream;
        }

        @Override
        public ServletOutputStream getOutputStream() throws IOException {
            return new ServletOutputStream() {
                @Override
                public void write(int b) throws IOException {
                    byteStream.write(b);
                }
            };
        }
        @Override
        public PrintWriter getWriter() throws IOException {
            return new PrintWriter(byteStream);
        }
    } 
    ```

2.  定义过滤器类：

    ```
    @WebFilter("/rest/*")
    public class JSONResponseFilter implements Filter {

        private final String JSON_RESPONSE = " { \"success\":\"true\", \"root\": ";
        private final String JSON_RESPONSE_CLOSE = "}";

        /* .. */

        @Override
        public void doFilter(ServletRequest request, ServletResponse response,
                FilterChain chain) throws IOException, ServletException {

            // capture result in byteStream by using custom responseWrapper
            final HttpServletResponse httpResponse = (HttpServletResponse) response;
            final ByteArrayOutputStream byteStream = new ByteArrayOutputStream();
            HttpServletResponseWrapper responseWrapper = new MyResponseWrapper(httpResponse, byteStream);

            // do normal processing but capture results in "byteStream"
            chain.doFilter(request, responseWrapper);

            // finally, wrap response with custom JSON
          // you can do fancier stuff here, but you get the idea
            out.write(JSON_RESPONSE.getBytes());
            out.write(byteStream.toByteArray());
            out.write(JSON_RESPONSE_CLOSE.getBytes());
        }
    } 
    ```

# php - Codeigniter AutoLoad DB，但有能力检查连接是否存在

> ID：10167835
> 
> 赞同：1
> 
> 时间：2012-04-16T01:44:09.310
> 
> 标签：php, codeigniter

如何使用 autoload.php 自动加载数据库

当然，我已经获得了自动加载功能……这很容易。

但也允许我检查数据库是否已连接，如果没有，则显示特定页面，显示“我们很抱歉，但我们的数据库当前不可用”之类的内容。

它必须是某种我必须制作的自定义钩子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:42:52.793

您可以编辑错误模板`application/errors/error_db.php`以使用您的自定义消息。也许使用`ENVIRONMENT`常量并执行以下操作：

```
<?php if (ENVIRONMENT === 'production'): ?>
  <p>We are sorry but our database is currently unavailable.</p>
<?php else: ?>
  <!-- default template with actual database error messages -->
<?php endif; ?> 
```

否则，我想你可以使用钩子。`pre_controller`如果您要自动加载数据库类并想要拦截错误，则必须至少是这样，或者您可以在进行连接检查后将数据库类加载`__construct()`到类中。`MY_Controller`如果你愿意的话，你甚至可以在第一行直接做`index.php`。

但是：我认为您要查找的内容可能在语言文件中。看看：
`system/language/english/db_lang.php`。
如果您在同一个地方创建自己的文件，而`/application`不是`/system`，您可以重写适当的语言行：

```
// $lang['db_unable_to_connect'] = 'Unable to connect to your database server using the provided settings.';
$lang['db_unable_to_connect'] = 'We are sorry but our database is currently unavailable.'; 
```

...只需编辑错误模板中的 CSS 和/或标记。再次，您可以利用`ENVIRONMENT`常量在开发模式中显示有用的错误，并在生产中显示用户友好的错误。

当然，如果您无法连接到您的数据库 - 这是一个需要立即关注的主要问题。

# python - 可以扩展 collections.deque 以构建“文件缓冲区”吗？

> ID：10167839
> 
> 赞同：3
> 
> 时间：2012-04-16T01:44:39.560
> 
> 标签：python, deque

我想在 python 中构建一个循环文件​​缓冲区来保存文件名（字符串）。缓冲区应具有以下属性。

*   缓冲区的大小是其名称存储在缓冲区中的文件大小的总和。缓冲区将具有最大允许大小。
*   添加新文件时，如果缓冲区大小小于最大允许大小，则添加该文件名字符串。否则，最旧的修改文件将被推出并添加新文件。如果新添加的文件比缓冲区中已经存在的所有文件都旧，则不会发生任何事情。

是否可以为此目的扩展双端队列？

还是我应该从头开始写？有没有我可以用于此目的的设计理念？

谢谢

肯定的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T02:19:32.710

好的，我相信 Raymond Hettinger 对您的问题的解释是正确的，并且您的评论已经澄清您不关心队列的长度，而是关心所有文件大小的总和。这更有意义，我很高兴我终于明白你的意思了。考虑到这一点，这里有一个简单的实现`heapq`，我相信它可以满足您提出的所有要求。通过`put`ting`(timestamp, filename, filesize)`队列上的元组来使用它，并注意当您`get`从队列中取出一个项目时，它将是最旧的文件（即具有最小时间戳的文件。）

```
import heapq

class FilenameQueue(object):
    def __init__(self, times_sizes_names, maxsize):
        self.maxsize = maxsize
        self.size = sum(s for t, s, n in times_sizes_names)
        self.files = list(times_sizes_names)
        heapq.heapify(self.files)
        while self.size > self.maxsize:
            self.get()
    def __len__(self):
        return len(self.files)
    def put(self, time_size_name):
        self.size += time_size_name[1]
        if self.size < self.maxsize:
            heapq.heappush(self.files, time_size_name)
        else:
            time_size_name = heapq.heappushpop(self.files, time_size_name)
            self.size -= time_size_name[1]
    def get(self):
        time_size_name = heapq.heappop(self.files)
        self.size -= time_size_name[1]
        return time_size_name 
```

我添加了一个`__len__`方法，以便您可以在获取队列之前对其进行测试。这是一个使用示例：

```
>>> f = FilenameQueue(((22, 33, 'f1'), (44, 55, 'f2'), (33, 22, 'f3')), 150)
>>> while f:
...     f.get()
... 
(22, 33, 'f1')
(33, 22, 'f3')
(44, 55, 'f2')
>>> f = FilenameQueue(((22, 33, 'f1'), (44, 55, 'f2'), (33, 22, 'f3')), 150)
>>> f.put((55, 66, 'f4'))
>>> while f:
...     f.get()
... 
(33, 22, 'f3')
(44, 55, 'f2')
(55, 66, 'f4') 
```

请参阅我的编辑历史记录，以了解涉及`Queue.PriorityQueue`次优的完全不同的解决方案。我忘记了通过*阻止*而不是通过丢弃元素来`maxsize`强制限制。那不是很有用！

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T02:53:08.457

如果我正确阅读了您的问题，则您需要一系列文件名，文件名不超过给定的最大大小。如果添加的新文件超过了最大值，您希望忘记最旧的文件。

这个简单的基于双端队列的类应该很好地处理它：

```
from collections import deque

class FileDeque(object):
    'FIFO queue of files upto a given total size'

    def __init__(self, maxsize):
        self.maxsize = maxsize
        self.d = deque()
        self.sizes = dict()
        self.currsize = 0

    def append(self, filename, filesize):
        'Add a new file to the FileDeque'
        self.d.append(filename)
        self.sizes[filename] = filesize
        self.currsize += filesize
        while self.currsize > self.maxsize and self.d:
            oldfilename = self.d.popleft()
            oldfilesize = self.sizes.pop(oldfilename)
            self.currsize -= oldfilesize

    def __iter__(self):
        'List files oldest to newest'
        return iter(self.d) 
```

示例会话如下所示：

```
>>> f = FileDeque(maxsize=10000)
>>> f.append('raptors.txt', 2500)
>>> f.append('rexes.txt', 4200)
>>> list(f)
['raptors.txt', 'rexes.txt']
>>> f.append('stegos.txt', 5000)
>>> list(f)
['rexes.txt', 'stegos.txt']
>>> f.append('brontos.txt', 500)
>>> list(f)
['rexes.txt', 'stegos.txt', 'brontos.txt']
>>> f.append('dactyls.txt', 4000)
>>> list(f)
['stegos.txt', 'brontos.txt', 'dactyls.txt'] 
```*

# twitter - Twitter流API过滤器参数之间的逻辑与可能吗？

> ID：10167843
> 
> 赞同：0
> 
> 时间：2012-04-16T01:46:13.040
> 
> 标签：twitter

我有兴趣为我的项目收集一些 Twitter 数据，连接到流并根据多个位置**和**多个跟踪关键字收集数据。但是，从文档中可以看出，我似乎将获得符合任一条件的**所有状态发布。**是否可以根据位置和轨迹进行过滤？

我正在查询大约 10 个城市，并且必须为所有城市打开管道然后必须自己进行关键字过滤，这似乎是一个疯狂的前景。如果需要，我将丢弃我收集的 99.9% 的数据......

这样做的正确方法是什么？我应该改用搜索 API 吗？速率限制似乎是个问题，Search API 无法提供我感兴趣的数据量。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:48:36.077

不，您不能在流 API 上定义任何复杂的过滤器；扔掉 99.9% 的推文并没有错（只要快点——在浪费你的 CPU 处理它们之前）

# java - 防止 JFace TableColumn 被调整为 0 宽度

> ID：10167845
> 
> 赞同：4
> 
> 时间：2012-04-16T01:46:57.283
> 
> 标签：java, eclipse-rcp, jface

我正在使用 JFace TableViewer 和 TableColumnLayout。如何设置列的最小宽度，或者至少防止它被调整为 0 宽度？

```
TableColumnLayout layout = new TableColumnLayout();
parent.setLayout(layout);
TableViewer viewer = new TableViewer(parent, SWT.FULL_SELECTION | SWT.BORDER);

//adding a few columns like this
TableColumn col = new TableColumn(viewer.getTable(), SWT.LEFT);
int minWidth = 100; 
layout.setColumnData(col, new ColumnWeightData(10, minWidth, true));
col.setMoveable(true);
... 
```

看来 ColumnWeightData 的 minWidth 参数没有得到遵守，我仍然可以将列的大小调整为 0 宽度。

使用类似这样的东西：

```
col.addControlListener(new ControlListener(){
    @Override
    public void controlMoved(ControlEvent e) {
    }

    @Override
    public void controlResized(ControlEvent e) {
        if(col.getWidth()<5)
            col.setWidth(5);

    }}); 
```

但这似乎很丑陋，有没有更清洁的方法呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T07:38:05.987

`Table`对此没有内置支持。所以一个`Resize`听众——就像你在你的问题中展示的那样——是唯一的方法。

# vb.net - 你能禁用网络异常吗？

> ID：10167846
> 
> 赞同：0
> 
> 时间：2012-04-16T01:47:01.410
> 
> 标签：vb.net, exception, web, http-status-code-404

我想知道您是否可以禁用 Web 异常，例如，

> 404 未找到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:23:04.953

您没有禁用 WebExceptions。像大多数其他例外一样，它们的全部意义在于表明一个在发生时无法修复的问题。您不能忽略这一点并期望您的应用程序能够正常工作。

您所做的是*捕获并处理*异常。像这样。

```
Try
    Dim response = request.GetResponse()

    '... do stuff with response here ...

Catch ex as WebException
    ' Note, `response` probably isn't usable here!  Pretty sure it's
    ' out of scope.  In any case, if `GetResponse` is throwing the
    ' exception, then it didn't return a value.  However, you should be
    ' able to access `ex.Response` to get info about the response,
    ' including the HTTP response code.
    Dim errorResponse = CType(ex.Response, HttpWebResponse)
    If errorResponse.StatusCode = HttpStatusCode.NotFound Then

        '... handle error ...

    Else
        ' if it's not a 404, we're not doing anything about the exception
        ' so rethrow it
        Throw
    End If
End Try

' Note, `response` is out of scope here! 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T03:15:24.043

这必须在 IIS 中完成。

为此，导航至开始 -> 控制面板 -> 管理工具 -> IIS

在列表中选择您的 Web 服务器并双击错误页面选项

为您尝试替换或删除的错误消息添加特定网页。

如果您需要更多详细信息，这是一个很好的演练：[http ://www.braintrove.com/id/46](http://www.braintrove.com/id/46)

# macos - OS X Firemonkey 应用程序中的 TClientDataset

> ID：10167849
> 
> 赞同：12
> 
> 时间：2012-04-16T01:47:16.380
> 
> 标签：macos, delphi, network-programming, delphi-xe2, firemonkey

我有一个 Windows Firemonkey 应用程序，它使用 TClientDatasets 加载我试图在 OS X 上工作的 XML 数据文件。数据文件存储在 Windows 文件共享中，因此多个用户可以访问相同的数据（我不是这里关注并发问题）。

我似乎无法让 mac 版本从服务器加载文件 - 它似乎自动将本地路径添加到我在 TClientDataset.Filename 属性中设置的任何内容。

如果我在启动应用程序之前将数据文件复制到应用程序包中，它会完美运行，所以我想我会尝试在代码中复制文件，但我也无法让它工作 - 它找不到文件在服务器上。

```
TFile.Exists('smb://<servername>/<path>/Data.xml'); 
```

尽管我可以在 Finder 中看到它，但返回 FALSE。

理想情况下，我更愿意从共享中加载文件，而不是在启动时复制它们并在退出时复制回来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-01T17:31:43.033

我遇到了类似的问题，并通过在 Windows 端创建一个 tcp 服务器和在客户端创建一个 tcp 客户端来解决它..并通过流发送 xml 文件..就像一个魅力......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:36:06.107

最大的问题是 Mac OS 不会自动将您的网络文件夹映射到本地文件夹，即使您没有映射驱动器，Windows Virtualy 也会为您执行此操作，因此所有文件都临时复制到虚拟空间，这就是您可以使用的原因它直接来自您在 Windows 上的应用程序，无需映射网络文件夹。

因此，要解决该问题，您需要使用以下方式将共享挂载到某个文件夹：

mkdir /Volumes/WinShareName 挂载 WinShareName "cifs://server/share"

所以在那之后你可以使用 TFile.Exists('/Volumes/WinShareName/Data.xml'); 或者直接从clienteddataset.loadfromfile 加载。

我只是无法测试它，因为我现在没有 Mac 机器，但这就是主要思想。

[已更新----您可以在此处](https://superuser.com/questions/336665/how-to-automount-smb-shared-network-drives-in-mac-os-x-lion)查看有关如何安装网络驱动程序的更多示例

# java - 如何在android上的谷歌地图中绘制点？

> ID：10167850
> 
> 赞同：0
> 
> 时间：2012-04-16T01:47:28.573
> 
> 标签：java, android, google-maps

我的问题是我有一个地址列表，我必须显示从第一个点到最后一个点的路径，并通过抛出所有其他点，比如我开车去......我没有该功能的正确名称，所以我无法在谷歌上搜索...有人知道我该怎么做吗？或该功能的名称？如果你不明白我在寻找什么是谷歌在 maps.google.com 上提供的功能，你可以在其中说出你在哪里，你要去哪里......比谷歌向你展示开车、步行或坐公共汽车...我需要这样的东西，然后通过扔另一个点...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:55:50.510

您的问题可能会被另一个关于在 android 上的谷歌地图中绘制路线的线程回答。

[如何在谷歌地图中显示两个地理坐标之间的路线？](https://stackoverflow.com/questions/2643993/how-to-display-a-route-between-two-geocoords-in-google-maps)

和

[J2ME/Android/BlackBerry - 行车路线，两个地点之间的路线](https://stackoverflow.com/questions/2023669/j2me-android-blackberry-driving-directions-route-between-two-locations/2023685#2023685)

否则谷歌类似：'android 开发谷歌地图路线'

/托马斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:23:41.243

[链接1](http://csie-tw.blogspot.in/2009/06/android-driving-direction-route-path.html#ixzz0rfsIHaO2)

[链接2](https://stackoverflow.com/questions/3109158/how-to-draw-a-path-on-a-map-using-kml-file/3109723#3109723)

请参阅以上两个链接，其中包含绘制路由路径的示例代码。

# ios - Facebook IOS SDK requestWithGraph 未发布消息

> ID：10167852
> 
> 赞同：0
> 
> 时间：2012-04-16T01:47:39.110
> 
> 标签：ios, objective-c, facebook

除了来自用户的小消息简介（“消息”参数）之外，每个参数都会正确发布。为什么这部分帖子没有显示在 facebook 中？我设置的参数错误吗？请查看这张图片，看看我说的是帖子的哪一部分： [https ://skitch.com/hahmadi82/8uecw/brenton-joynin](https://skitch.com/hahmadi82/8uecw/brenton-joynin)

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                                       [NSString stringWithFormat:@"%@ has invited you (%@) to enjoy an offer at %@ on %@", [nameArray objectAtIndex:0], [facebookNameArray objectAtIndex:i], spotString, timeChosenString], @"name",
                                                       domain, @"link",
                                                       [NSString stringWithFormat:@"%@ (%@)", offerString, peopleString], @"caption",
                                                       @"Going out? Use JoynIn to grab amazing offers from local bars, clubs, and restaurants. All you need to bring is friends!", @"description",
                                                       titleChosen.text, @"message",              
                                                       nil];
                        [facebook requestWithGraphPath:[NSString stringWithFormat:@"%@/feed/",[facebookUIDArray objectAtIndex:i]] andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:45:35.737

您的 Facebook 会话有效吗？用 if 语句询问：

```
 if (facebook isSessionValid) {
NSLog (@"Working fine..."); // it might also be better to place the post method in here and put an else statement to open a alert where it says error or something like that
} 
```

如果没有....检查你的方法，比如

handleOpenURL 和 fbDidLogin

在那里登录，看看是否被调用....如果没有，我有一个非常相似的问题......我会指导你完成

所以我的问题是我应该在 App Delegate 中声明 Facebook 变量......看这个..这是你应该做的手表：

```
 - (void)viewDidLoad
   {
fbAppDelegate = (NerdfeedAppDelegate *)[[UIApplication sharedApplication] delegate]; 
[[fbAppDelegate facebook] authorize:nil];// or wherever you wanna put it...
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.
   }

   -(IBAction)post {

    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                                   [NSString stringWithFormat:@"%@ has invited you (%@) to enjoy an offer at %@ on %@", [nameArray objectAtIndex:0], [facebookNameArray objectAtIndex:i], spotString, timeChosenString], @"name",
                                                   domain, @"link",
                                                   [NSString stringWithFormat:@"%@ (%@)", offerString, peopleString], @"caption",
                                                   @"Going out? Use JoynIn to grab amazing offers from local bars, clubs, and restaurants. All you need to bring is friends!", @"description",
                                                   titleChosen.text, @"message",              
                                                   nil];
                    [fbAppDelegate.facebook requestWithGraphPath:[NSString stringWithFormat:@"%@/feed/",[facebookUIDArray objectAtIndex:i]] andParams:params andHttpMethod:@"POST" andDelegate:self];

   } 
```

应用代理.h：

```
 @interface AppDelegate : UIResponder <UIApplicationDelegate, FBSessionDelegate,    FBDialogDelegate, FBLoginDialogDelegate, FBRequestDelegate> 

   {

  Facebook *facebook;

  }

  @property (strong, nonatomic) UIWindow *window;
  @property (strong, nonatomic) Facebook *facebook; 
```

应用代理.m：

```
 static NSString *kAppID;
      - (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
 return [facebook handleOpenURL:url];
   }

    - (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
return [facebook handleOpenURL:url];
 }
  - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{ 
  kAppID = [[NSString alloc] initWithString:@"//app id"];
   // ....
   facebook = [[Facebook alloc] initWithAppId:kAppId andDelegate:(id)self.viewController];
      [facebook setSessionDelegate:self];
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
      if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"]) {
      facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
      facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }

return YES;
   }

- (void)fbDidLogin {

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
[defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
[defaults synchronize];    
       }

  -(void)fbDidLogout {

// Remove saved authorization information if it exists
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"]) {
    [defaults removeObjectForKey:@"FBAccessTokenKey"];
    [defaults removeObjectForKey:@"FBExpirationDateKey"];
    [defaults synchronize];
   }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:07:14.043

首先，“怎么来”是孩子们说的。大声笑对不起。其次，这是发布到另一个用户的提要。所以你应该检查他们的墙，而不是你的墙。

我相信你必须包括描述。这是我们使用的代码。似乎您的代码应该可以工作。您还应该检查以确保您的 %@ 格式化程序中有正确的 Facebook ID。

```
NSString *message = NSLocalizedString(@"FACEBOOK_INVITE_MESSAGE", nil);
NSString *link = @"http://www.facebook.com/trivialapp";
NSString *description = NSLocalizedString(@"FACEBOOK_INVITE_DESCRIPTION", nil);
NSString *picture = @"http://trivi.al/Content/images/icon72.png";
NSMutableDictionary *tParams = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                message,     @"message",
                                link,        @"link",
                                description, @"description",
                                picture,     @"picture", nil];

[facebook requestWithGraphPath:[NSString stringWithFormat:@"%@/feed", [playerDict objectForKey:@"id"]] 
                      andParams:tParams
                    andHttpMethod:@"POST"
                    andDelegate:self]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T10:02:48.663

如果您的意思是使用帖子对话框发布消息实际上那是不可能的，我遇到了同样的问题，我在 Facebook 文档中找到了这个

> 该字段旨在供用户表达自己。预先填写此字段会削弱用户语音的真实性。

# c++ - C ++使用迭代器将函数映射到可迭代对象

> ID：10167855
> 
> 赞同：0
> 
> 时间：2012-04-16T01:48:16.023
> 
> 标签：c++, oop, functional-programming

我有一个接受大`std::vectors`（通过`const &`）并返回大向量（按值）的函数。在我的代码的一部分中，我需要执行以下操作：

```
std::list<std::vector<double> > all_vectors;
// all_vectors is filled with values somewhere in here
for (const std::vector & v : all_values)
{
   std::vector<double> res = f(v);
   // do something with res
} 
```

在我的代码的另一部分我需要做：

```
std::list<std::vector<double> > all_vectors;
// all_vectors is filled with values somewhere in here
for (const std::vector & v : all_values)
{
   std::vector<double> res = f(v);
   // do something different with res
} 
```

**最简单的选择（内存占用）：** 通过简单地映射然后遍历结果并执行`f`或（对于每种情况）来重用代码是微不足道的。这样做的缺点是我（不必要地）需要存储一长串大s。一方面，我确信它不会使用比我更多的内存；但即便如此，不必要地存储大量数据似乎是一种不好的做法。`all_values``// do something with res``// do something different with res``std::vector`

**选项 1（根据请求使用迭代器生成结果）：** 一种选择是创建一些 iterator_map 函数，其行为类似于 map，但根据需要生成结果。我认为这对于 Python 的`yield`.

**选项 2（使用面向对象的设计）：** 另一种选择是使用`ABC`继承并覆盖函数`g`：在一个派生类中`g`执行`// do something with res`，而在另一个派生类中执行`// do something different with res`。

**选项 3+ (???):**

我真的很想听听您关于如何在 C++ 中处理此类问题的建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:58:56.060

为什么需要按值返回向量？如果您可以通过引用返回并使用`vector<double>::const_iterator`，则可以放心，您不会修改原始向量。

如果您确实需要一个副本，您很可能在这两种情况下都需要一个不同的副本，因此您的选项 0 将不起作用。

如果您从列表中的向量编译值的混搭集合，迭代器选项对我来说听起来最好——每次调用时`operator++`，您都可以动态计算下一个元素。

# c++ - 处理大量规则（条件和约束）CEP 系统

> ID：10167856
> 
> 赞同：5
> 
> 时间：2012-04-16T01:48:23.777
> 
> 标签：c++, algorithm, data-structures, rule-engine, complex-event-processing

我正在开发一个接受 100k+ 唯一输入的应用程序 - 为简单起见，我们假设每个输入都是浮点值（a、b、c...等） - 尽管它们也可以是字符串等。应用程序有很多规则/与这些输入相关的事件/触发器。

**示例 1：**

```
Rule[(a > b) and (c <= d)] --> [execute EventX] 
```

**定义1：**上述规则说：当输入'a'的值大于'b'的值并且输入'c'的值小于或等于'd'的值时，执行EventX

**示例 2：**

```
Rule[x != x.prev] --> [execute EventZ] 
```

**定义2：**上面的规则说：如果在一个值更新之后，如果输入'x'的当前值不等于它之前的值（值已经改变了）。执行事件Z

我发现随着输入数量的增加以及规则数量的增加，评估“特定”规则并确定是否应触发事件所需的总计算量正在失控 - 投掷问题上更快和更多的硬件没有按预期扩展。

目前，在每次新的输入更新时，都会在哈希表中查找相关的输入/变量，该哈希表将变量映射到包含它的规则。随后对这些规则中的每一个进行评估，如果结果为真或可操作，则异步触发相关事件。

这个问题属于复杂事件处理领域，不幸的是，该领域中的大多数架构都使用上述相同的死机方法 - 可能对评估/重新评估事物的频率进行了一些改进。我们的想法是拥有一个可以近乎实时地做出反应的系统。将规则和输入分布在多个节点上似乎也效果不佳，因为在某些情况下，超过 95% 的活动规则中存在少数输入。

我希望如果那里有任何 SO'ers，知道更好的方法来解决这个问题，数据/结构或算法。

我想到的一个简单想法是可以构建一个依赖逻辑推理的列表。

如果有两个这样的规则：

```
Rule[a < b] --> [exec E1]
Rule[b >= a] --> [exec E2] 
```

然后对“a”或“b”的更新不应该需要对两者进行评估，但我发现构建这样的逻辑推理结构非常复杂且容易出错，并且难以完全和严格地测试。

输入可以代表股票价格、温度传感器等。

进一步说明，一些输入是暂时受限的，这意味着该规则可能要求变量的状态在一段时间内处于特定位置/状态（例如：MSFT 的价格在过去 30 秒内 > 20 美元），目前，这是通过使用值为 0 或 1 /false 或 true 的“表示变量”（外观）来完成的（变量的值由单独的机制确定，这通常是触发规则的结果）。

还应该注意的是，由于近乎实时的限制和每秒产生的数据量，使用带有触发器和存储过程的数据库的选项是不可能的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T15:47:00.727

几个想法。

如果您的规则的条件是连词，请为每个未满足条件维护一个未满足项。仅将规则放在该术语的检查列表中。如果该术语得到满足，请扫描其他术语以确定条件被触发或存在另一个未满足的术语。（我想我是在 SAT 求解器的背景下了解到这个技巧的。）

如果您有像 10 <= x <= 50 这样的术语，请使用[区间树](http://en.wikipedia.org/wiki/Interval_tree)而不是散列快速定位将因 x 的更新而变得不满意的满意术语和即将变得满意的不满意术语。（O(log n) 完全搜索，加上每个返回结果的 O(1)。）如果一次考虑一个变量会产生过多的虚假命中，则存在多维概括，但维护它们的成本会更高。

如果您没有类似的术语（例如，a <= b），请进行派生输入 (b - a) 并使用您的哈希策略使它们保持最新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:55:17.957

> Distributing the rules and inputs over multiple nodes doesn't seem to work well either, as in some situations a minority of inputs exists in over 95% of the active rules.

Distribute the rules, and feed the inputs to all the machines. Then you can linearly scale on the number of rules... if you are on a LAN you could send the events/input as multicast, so the network traffic won't increase.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T02:18:09.483

尝试分解常见的表达式，对它们进行分组和缓存：这可以加快速度，尤其是那些最常用的，所以性能可能会增长。

这有多可行，取决于您在表达逻辑时必须使用的语言。我看到您的流程可以建模为电子表格的可能性，其中计算是数据驱动程序。WRT 单元格引用的拓扑类型的公式足以进行基本评估，但事情很快就会变得复杂......

在 C++ 中，您可以尝试使用模板表达式来解决您的逻辑。为您的语言建模的助手可能是[Boost.proto](http://www.boost.org/doc/libs/1_49_0/doc/html/proto.html)

[ETALIS](http://code.google.com/p/etalis/)在 Prolog 中执行 CEPS。

我还没有（还）尝试过（唉），但我相信它非常好。并且肯定会实现您所追求的，甚至更多。

在 SWI-Prolog 中运行，应该是可访问的，易于设置和操作，并且 SWI-Prolog C++ 接口对于实际数据交换非常方便。

# c++ - 使用堆栈的 C++ 代码

> ID：10167860
> 
> 赞同：-1
> 
> 时间：2012-04-16T01:49:47.800
> 
> 标签：c++

我正在编写一个程序，它是一个简单的表达式检查器。程序要做的就是检查用户给定的输入是否格式正确。我正在处理三个文件。我将在下面发布每个部分。如果我的编码正确，我的问题在案例一的 main.cpp 中。我是堆栈的新手，不确定我是否正确地对我想要发生的事情进行了编码。以防万一代码是获取一个后跟一个 : 的表达式，并且如果输入`'('`然后推送到堆栈并且如果答案是`)'`然后获取顶部并比较它们是否是对的。然后输出表达式是否格式正确。谢谢。

这是代码：

主文件

```
switch (choice){
case 1: 
    cout << "Current Setting: () " << endl;
    cout << "Enter your expression followed by a ; : " << endl;
    do {

    cin >> answer;

    if (answer = '(')
        stack.push( '(' );
    else 
        if (answer = ')' )
        (stack.top() == '(')

            while (answer != ';'); 
```

堆栈.h

```
elemType top(void) const;
// precondition: this stack is not empty
// returns top element in this stack

// transformers
void push(const elemType& item);
// precondition: this stack is not full
// adds item to this stack

void pop(void);
// removes top element from this stack if exist
// remains empty otherwise 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T01:54:10.357

不。当您试图将其与一个字符进行比较时，您正在阅读整个表达式。

```
if (answer = '(') 
```

循环也没有做任何事情

```
 while (answer != ';'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:05:55.963

表达方式

```
if (answer = '(') 
```

分配`'('`给 answer 并检查它是否非零（它是）——所以总是执行第一个分支。

你需要：

```
if (answer == '(') 
```

相反（对于另一个类似）。

您还需要`}`在`while`

# memcached - Memcached 参数检查

> ID：10167864
> 
> 赞同：2
> 
> 时间：2012-04-16T01:51:03.630
> 
> 标签：memcached

出于某种原因，目前 memcache 会导致站点响应时间出现峰值。

[在其他有关 memcached 数字的问题中](https://stackoverflow.com/questions/1464615/are-these-memcached-stats-normal)cmd_get = get_hits + get_misses

```
`STAT cmd_get 6236962
STAT get_hits 6236962
STAT get_misses 6543342` 
```

`出于某种原因，在我们的设置中，cmd_get 等于 get_hits，而 get_misses 大于 cmd_get。当我尝试运行 stats malloc 时，我收到一个看起来很奇怪的错误。`

 `结果是非常慢的事务，可能需要 30 秒才能执行 memcache set 和 get

# 问题 ＃

1.  为什么我的 cmd_get = get_hits？
2.  为什么我的 get_misses 比我的 cmd_get 高？
3.  如何调试导致响应时间尖峰的原因？

统计数据

```
`STAT pid 18998
STAT uptime 10603
STAT time 1334538670
STAT version 1.4.2
STAT pointer_size 64
STAT rusage_user 225.370000
STAT rusage_system 717.590000
STAT curr_connections 613
STAT total_connections 1884098
STAT connection_structures 1306
STAT cmd_get 6236962
STAT cmd_set 2517801
STAT cmd_flush 0
STAT get_hits 6236962
STAT get_misses 6543342
STAT delete_misses 234263
STAT delete_hits 247387
STAT incr_misses 0
STAT incr_hits 0
STAT decr_misses 0
STAT decr_hits 0
STAT cas_misses 0
STAT cas_hits 0
STAT cas_badval 0
STAT bytes_read 6593604547
STAT bytes_written 3999518494
STAT limit_maxbytes 6442450944
STAT accepting_conns 1
STAT listen_disabled_num 0
STAT threads 4
STAT conn_yields 0
STAT bytes 1417582141
STAT curr_items 549532
STAT total_items 2517801
STAT evictions 0` 
```

`统计板`

 ````
`.........
STAT 25:chunk_size 21696
STAT 25:chunks_per_page 48
STAT 25:total_pages 33
STAT 25:total_chunks 1584
STAT 25:used_chunks 1570
STAT 25:free_chunks 0
STAT 25:free_chunks_end 14
STAT 25:mem_requested 30429185
STAT 25:get_hits 1265
STAT 25:cmd_set 3844
STAT 25:delete_hits 0
STAT 25:incr_hits 0
STAT 25:decr_hits 0
STAT 25:cas_hits 0
STAT 25:cas_badval 0
STAT 26:chunk_size 27120
STAT 26:chunks_per_page 38
STAT 26:total_pages 9
STAT 26:total_chunks 342
STAT 26:used_chunks 305
STAT 26:free_chunks 0
STAT 26:free_chunks_end 37
STAT 26:mem_requested 7494861
STAT 26:get_hits 1308
STAT 26:cmd_set 3876
STAT 26:delete_hits 0
STAT 26:incr_hits 0
STAT 26:decr_hits 0
STAT 26:cas_hits 0
STAT 26:cas_badval 0
STAT 27:chunk_size 33904
STAT 27:chunks_per_page 30
STAT 27:total_pages 32
STAT 27:total_chunks 960
STAT 27:used_chunks 280
STAT 27:free_chunks 673
STAT 27:free_chunks_end 7
STAT 27:mem_requested 7980338
STAT 27:get_hits 43377
STAT 27:cmd_set 115313
STAT 27:delete_hits 0
STAT 27:incr_hits 0
STAT 27:decr_hits 0
STAT 27:cas_hits 0
STAT 27:cas_badval 0
STAT active_slabs 26
STAT total_malloced 1692051984` 
```

* * *

 `## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:22:50.807

你为什么用memcached 1.4.2版本，最新的是1.4.13。这可能是发行版中的一个错误，但我很难找到，因为大多数系统都使用最新版本。我还面临一个性质不同但与内存泄漏有关的问题，因此我们对其进行了升级，问题就消失了。这可能不是答案，但如果问题在最新的 memcached 版本上仍然存在，人们仍然可以提供帮助。```

# jquery - jquery ajax 缓存错误，但基于 ie 的浏览器存在问题

> ID：10167865
> 
> 赞同：0
> 
> 时间：2012-04-16T01:51:08.850
> 
> 标签：jquery, ajax, internet-explorer, browser-cache

下面的代码在 Firefox 和 chrome 上完美运行，但是 ie 出现了奇怪的问题。我自己测试了很多次，即 6、7、8 和 9 似乎对我有用。当客户端请求页面和函数时面临的问题有时调用有时不调用。

```
 Close:function() {

    $.ajax({
      url: 'URL',
      cache: false,
      success: function (data) {
        eval( data ) ;
        if ( json_data.status ) {
            CountDown.close();
          }
        else {
            setTimeout(CountDown.Close, 1000);
          }
      },
      error: function() { setTimeout(CountDown.Close, 1000); } 
    });

  }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T02:35:07.347

这个世界上 AJAX 和 IE 的缓存问题太多了，你有一些东西可以帮助你解决这个问题。

您可以尝试以下许多方法：

在 html 页面中添加这些元标记：

```
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="expires" content="-1" /> 
```

将这些响应标头添加到调用的 url 应用程序：

```
缓存控制：无缓存
过期：过期：1994 年 12 月 1 日星期四 00:00:00 GMT
```

如果您在 IIS 中进行开发，请在应用程序 Web.Config 中设置此键：

```
<system.web>
    <caching>
        <outputCacheSettings>
            <outputCacheProfiles>
                <add name="CacheProfile1" duration="60" />
            </outputCacheProfiles>
        </outputCacheSettings>
    </caching>
<system.web> 
```

# haskell - Haskell：where子句中的绑定变量

> ID：10167867
> 
> 赞同：3
> 
> 时间：2012-04-16T01:51:15.467
> 
> 标签：haskell

绑定变量的范围是什么？为什么我不能从 where 子句中访问它？例如，在此示例中：

```
someFunc x y = do
  let a = x + 10
  b <- someAction y
  return subFunc
  where
    subFunc = (a * 2) + (b * 3) 
```

在这里，subFunc 可以看到 a 而不是 b。为什么我不能在 where 子句中使用绑定变量？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T02:29:18.213

因为它可能导致不一致。想象一下这段代码：

```
printName = do
  print fullName
  firstName <- getLine
  lastName <- getLine
  return ()
  where
    fullName = firstName ++ " " + lastName 
```

该代码不起作用，并且由于这些情况，绑定变量的使用仅限于`do`实际绑定之后的块部分。对上述代码进行脱糖处理时，这一点变得清晰：

```
printName =
  print fullName >>
  getLine >>= (\ firstName ->
    getLine >>= (\ lastName ->
      return ()
    )
  )
  where
    fullName = firstName ++ " " ++ lastName 
```

在这里，可以看到变量`firstName`和`lastName`不在子句的范围内`where`，并且它们不能在该子句的任何定义中使用。

# ruby-on-rails - rake assets：precomplie 很慢（超过半小时）

> ID：10167868
> 
> 赞同：0
> 
> 时间：2012-04-16T01:51:15.963
> 
> 标签：ruby-on-rails, asset-pipeline, ruby-on-rails-3.2

我正在运行 Rails 3.2.3，当我运行时

> rake 资产：预编译

大约需要 40 分钟才能完成。

以下是在我的资产组中

```
gem 'sass-rails',   '~> 3.2.3'
  gem 'bootstrap-sass', '~> 2.0.1'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer'

  gem 'uglifier', '>= 1.0.3' 
```

这是在我的本地开发盒上运行的。耗时 2,338 秒，约 40 分钟。如果不在本地编译 Heroku 会在 500 秒左右超时。我听说人们对 1 到 3 分钟的编译有问题。但这远不止这些。可能是什么问题呢？

**更新：** Applcation.js ( [gist](https://gist.github.com/2402544) ) Application.css ( [gist](https://gist.github.com/2402554) )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:03:59.427

解决方案是拥有所有需要来自 Twitter 的 Bootstrap 的文件，`application.css.scss`以便`@import 'bootstrap'`只调用一次

# php - header() 什么都不做

> ID：10167874
> 
> 赞同：0
> 
> 时间：2012-04-16T01:52:16.333
> 
> 标签：php

我最近唯一改变的是将 register_globals 关闭

这是登录脚本的结尾：

```
$from = $_POST['from']; //convert form element to var
//echo "got here, from is $from"; die; 

// test to prove $from is empty
if($from == '')
{ 
    $from = '/pages/reg2.html'; 
}
header("Location: $from"); // this should redirect page 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T04:00:52.293

试试这个代码应该可以工作

```
<?php

if (isset($_POST['from']) && !empty($_POST['from'])) { 
$from = $_POST['from']; //convert form element to var
//echo "got here, from is $from"; die; 

 // test to prove $from is empty
}

if(empty($from))

{ 
    $from = '/pages/reg2.html'; 
}

//if still doesnt work try to replace this line with : echo $from; exit(); 
//just for you to know at what point you are .
header("Location: $from");
exit();

?> 
```

# java - 比较字符串是 "1"<"seven"

> ID：10167877
> 
> 赞同：-7
> 
> 时间：2012-04-16T01:53:18.043
> 
> 标签：java, compare

如果我要将字符串“1”与字符串“7”进行比较，哪个更大。另外，如果我将字符串“1”与字符串“Test”进行比较，哪个更大？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T01:55:57.270

Java 中的字符串比较是逐个字符进行的。每个字符都有一个特定的排名，基于它在 Unicode 字符表中的出现位置（对于这种情况，我们可以使用[ASCII](http://en.wikipedia.org/wiki/Ascii_code#ASCII_printable_characters)，因为它是英文）。

“1”将被视为小于“7”，以及“T”。

调用（把它放在里面`main()`：

```
System.out.println("1".compareTo("7"));
System.out.println("1".compareTo("Test"));
System.out.println("1".compareToIgnoreCase("7"));
System.out.println("1".compareToIgnoreCase("Test")); 
```

您将得到负值结果 - 这些是 ASCII 点与您要比较的字符之间的距离。 `compareToIgnoreCase()`比较小写 ASCII 范围内的值，所以这就是 last 的值`compareToIgnoreCase()`如此之低的原因。

# haskell - 类型类 MonadPlus、Alternative 和 Monoid 之间的区别？

> ID：10167879
> 
> 赞同：90
> 
> 时间：2012-04-16T01:53:55.320
> 
> 标签：haskell, applicative, monoids, alternative-functor, monadplus

标准库 Haskell 类型类`MonadPlus`、`Alternative`和`Monoid`每个都提供了两个具有基本相同语义的方法：

*   空值：`mzero`、`empty`或`mempty`。
*   `a -> a -> a`将类型类中的值连接在一起的运算符： `mplus`、`<|>`或`mappend`。

这三个都指定了实例应遵守的这些法律：

```
mempty `mappend` x = x
x `mappend` mempty = x 
```

因此，似乎这三个类型类都提供了*相同*的方法。

（`Alternative`也提供`some`and `many`，但它们的默认定义通常就足够了，因此就这个问题而言，它们并不太重要。）

所以，我的疑问是：为什么有这三个极其相似的类？除了它们不同的超类约束之外，它们之间是否有任何真正的区别？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-04-16T02:36:32.283

**`MonadPlus`并`Monoid`服务于不同的目的。**

A`Monoid`在 kind 类型上被参数化`*`。

```
class Monoid m where
    mempty :: m
    mappend :: m -> m -> m 
```

因此它可以被实例化为几乎任何有明显的关联运算符并且具有单元的类型。

然而，`MonadPlus`不仅指定你有一个monoidal结构，而且该结构与`Monad`工作方式有关，*并且*该结构不关心monad中包含的值，这（部分）由事实表明这`MonadPlus`需要一种论点`* -> *`。

```
class Monad m => MonadPlus m where
    mzero :: m a
    mplus :: m a -> m a -> m a 
```

除了幺半群定律，我们还有两套潜在的定律可以应用`MonadPlus`。可悲的是，社区不同意他们应该是什么。

至少我们知道

```
mzero >>= k = mzero 
```

但是还有另外两个相互竞争的扩展，左（原文如此）分布定律

```
mplus a b >>= k = mplus (a >>= k) (b >>= k) 
```

和左接法

```
mplus (return a) b = return a 
```

因此，任何实例`MonadPlus`都应满足这些附加法律中的一项或两项。

**那么呢`Alternative`？**

`Applicative`在 之后定义`Monad`，逻辑上属于 的超类`Monad`，但很大程度上是由于 Haskell 98 中设计人员面临的不同压力，甚至直到 2015`Functor`年才成为超类`Monad`。现在我们终于有了GHC`Applicative`中的超类（如果不是`Monad`但在语言标准中。）

实际上，`Alternative`是`Applicative`什么`MonadPlus`是什么`Monad`。

对于这些我们会得到

```
empty <*> m = empty 
```

类似于我们所拥有的，`MonadPlus`并且存在类似的分配和捕获属性，至少您应该满足其中一个。

不幸的是，即使是`empty <*> m = empty`法律的要求也太强了。例如，它不适用于[Backwards](http://hackage.haskell.org/package/transformers-0.4.3.0/docs/Control-Applicative-Backwards.html)！

当我们查看 MonadPlus 时，empty >>= f = empty 定律几乎是强加给我们的。无论如何，空结构中不能有任何'a'来调用函数`f`。

但是，由于`Applicative`不是的超类，也不*是*的*超*类，我们最终分别定义了这两个实例。`Monad``Alternative`*`MonadPlus`*

 *此外，即使`Applicative`是 的超类`Monad`，你最终还是需要这个`MonadPlus`类，因为即使我们确实服从

```
empty <*> m = empty 
```

这还不足以证明

```
empty >>= f = empty 
```

因此，声称某物是 a`MonadPlus`比声称它是 强`Alternative`。

现在，按照惯例，给定类型的 and 应该是一致的，但`MonadPlus`可能完全*不同*。`Alternative``Monoid`

 *例如`MonadPlus`and `Alternative`for`Maybe`做显而易见的事情：

```
instance MonadPlus Maybe where
    mzero = Nothing
    mplus (Just a) _  = Just a
    mplus _        mb = mb 
```

但是该`Monoid`实例将一个半群提升到一个`Monoid`. 可悲的是，因为当时在 Haskell 98 中不存在一个`Semigroup`类，它通过要求 a 来做到这一点`Monoid`，但不使用它的单位。ಠ_ಠ</p>

```
instance Monoid a => Monoid (Maybe a) where
    mempty = Nothing
    mappend (Just a) (Just b) = Just (mappend a b)
    mappend Nothing x = x
    mappend x Nothing = x
    mappend Nothing Nothing = Nothing 
```

**TL;DR** `MonadPlus`是比 更强的声明`Alternative`，而后者又是比 更强的声明`Monoid`，虽然类型的`MonadPlus`和`Alternative`实例应该相关，但`Monoid`可能（有时是）完全不同的东西。**

# java - RSA加密密钥对的确定性生成

> ID：10167881
> 
> 赞同：5
> 
> 时间：2012-04-16T01:54:01.740
> 
> 标签：java, android, rsa

我正在尝试在 Android 上使用 Java 确定性地生成 RSA 密钥对。我的要求是我无法存储密钥对，并且必须在运行时生成它以等同于任何以前/未来的运行。

我的过程是，我将确定性地播种一个随机数生成器并传递该生成器以创建密钥。我的代码是：

```
SecureRandom random=SecureRandom.getInstance("SHA1PRNG");
random.setSeed(1234);   //something device specific will be used to set this
KeyPairGenerator keyGen=KeyPairGenerator.getInstance("RSA");
keyGen.initialize(1024, random);

KeyPair pair=keyGen.generateKeyPair();
PublicKey pub=pair.getPublic();
PrivateKey priv=pair.getPrivate(); 
```

生成的密钥因运行而异。但是，SecureRandom 数字在每次运行时都是相同的，甚至在不同设备之间也是相同的。

我错过了什么？我怎样才能重复生成这些密钥？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T06:01:58.447

你想做什么？即使这样可行，此代码也将依赖于 Android 上 SHA1PRNG 实现的一个怪癖，因此它可能随时中断。通常，`setSeed()`会增加熵，因此即使您`SecureRandom`使用相同的种子播种，也不能保证您将获得相同的数字。如果您在桌面 Java 上尝试此代码，它很可能会失败。到目前为止，它适用于大多数（所有？）当前的 Android 版本，但这不能保证。

如果您需要可预测的密钥，您可能需要为每个设备预置预生成的密钥。如果您需要安全地存储它们，请在 ICS 上使用`KeyChain`API，或在 ICS 之前的设备上使用受密码保护的密钥库。即使您不存储实际密钥，如果有人知道密钥是如何生成的（种子），他们也可以生成相同的密钥，并且您的密钥与种子一样安全。如果它是特定于设备的，那么可能并不难找到。

至于为什么这不起作用，RSA密钥生成器基本上`BigIntegers`在循环中生成随机数，测试素数。素数测试是概率性的，因此您可能会在每次运行时选择不同的素数。您可能想要获取[SpongyCastle](https://github.com/rtyley/spongycastle)，在模拟器上运行它并设置断点`RSAKeyPairGenerator.java`以检查到底发生了什么。

# jqtransform - jqTransform 取消按钮

> ID：10167885
> 
> 赞同：0
> 
> 时间：2012-04-16T01:54:54.833
> 
> 标签：jqtransform

我试图让 jqTransform 在表单上工作。我想让用户选择取消新格式并返回他们刚刚来自的页面。

我在许多线程中读到 jqTransform 实际上会转换 html，所以我的 onclick() 可能无法正常工作。zip 文件中的 jqTransform 演示实际上有一个取消按钮，但没有显示如何使其工作。我的按钮代码如下所示：

此相同代码适用于不使用 jqTransform 的表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:45:34.563

您可以尝试使用 jquery 事件处理程序

```
 $("#btncancel").click(function() {
       document.location.href='index.php';
 }) 
```

btncancel 是取消按钮 ID。

# php - PHP超链接/弹出表

> ID：10167886
> 
> 赞同：0
> 
> 时间：2012-04-16T01:54:58.640
> 
> 标签：php, mysql, hyperlink, html-table, popup

我正在从 MySQL 查询创建一个 PHP 表，如下所示：

```
 $resultkulim = mysql_query("SELECT customer_name, zone_name, segment_code, COUNT(segment_code) FROM complete_wk where zone_name = 'ZONE KULIM' and (segment_code = 's30' or segment_code='s40' or segment_code='s50'')");
    $totalrrkulim = mysql_query("SELECT zone_name, repeat_rc, COUNT(repeat_rc) FROM complete_wk where zone_name = 'ZONE KULIM' and repeat_rc>1 and (segment_code = 's30' or segment_code='s40' or segment_code='s50')");

                echo "<table class='table1'>";
                echo "<thead>";
                    echo "<tr>";
                        echo "<th>Zone</th>";
                        echo "<th>Total TR</th>";
                        echo "<th>Total RR (RR>1)</th>";
                        echo "<th>%RR</th>";
                    echo "</tr>";
                echo "</thead>";
                //kulim row
                while($rowkulim = mysql_fetch_array($resultkulim))
                  {
                        echo "<tbody>";
                        echo "<tr>";
                            echo "<td>Zone Kulim</td>";
                            echo "<td >" . $rowkulim['COUNT(segment_code)'] . "</td>";
                      while($rrkulim = mysql_fetch_array($totalrrkulim))
                          {
                            $myresultkulim = $rrkulim['COUNT(repeat_rc)'] / $rowkulim['COUNT(segment_code)'] * 100;
                                  echo "<td>" . $rrkulim['COUNT(repeat_rc)'] . "</td>";
                                  echo "<td>" . number_format($myresultkulim) . "%" . "</td>";
                              echo "</tr>"; 
                            echo "</tbody>";
                          }
                  }
                echo "</table>"; 
```

该表的示例结果如下：

```
Zone         Total TR    Total RR    %RR
Zone Kulim     182          11        6% 
```

我想要做的是，我希望能够单击 Total TR 的结果，即“182”，它会将我带到包含该 182 结果详细信息表的其他页面。

我已经完成了另一张表，它位于“localhost/tmj/index.php/tr/kulim”

我希望有人能启发我如何从上面的表格代码中制作弹出窗口或超链接到其他页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T02:14:23.457

我不确定这是否是您想要的，请尝试

```
echo '<td ><a href="index.php/tr/kulim">' . $rowkulim['COUNT(segment_code)'] . "</a></td>"; 
```

或者这是一个动态链接？

# ios - 来自图像集的 iphone 动画

> ID：10167889
> 
> 赞同：0
> 
> 时间：2012-04-16T01:55:35.773
> 
> 标签：ios

我有大约 5,000 个标记为 image_1 到 image_5000 的图像，我如何创建一个循环遍历每个图像然后重复的动画？这是一个 iPhone 应用程序，仅供我个人使用，非常感谢任何帮助。

这是我正在使用的代码，为什么它不起作用。

```
 //.h
@interface ViewController : UIViewController{
IBOutlet UIImageView *imageView;
int i;
}
@end 
```

* * *

```
 - (void)viewDidLoad
{

i = 0;
[NSTimer scheduledTimerWithTimeInterval:0.5
                                 target:self
                               selector:@selector(loop) 
                               userInfo:nil
                                repeats:YES];
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}
-(void)loop{
if (i<MAX_IMAGES) {

    imageView.image = [UIImage imageNamed:[NSString stringWithFormat:@"image_%d.bmp",i]];
    NSLog(@"Image:%d",i);
        i+=1;
    if (i >= MAX_IMAGES) {
        i = 1;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:07:01.813

使用自动版本的图像太多，因此您必须使用[CADisplayLink](https://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40009031)自己实现它。在您的显示链接功能中，您应该将图像视图的图像交换到下一个图像。如果你不明白，网上有很多关于如何使用 CADisplayLink 的教程；）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T02:08:25.140

Here's an example of the naive approach. You are likely to run into memory issues, but without seeing your image set, it's difficult to know whether it will suffice or not.

```
UIImageView *imageView = [[UIImageView alloc] initWithFrame:self.view.frame];

NSMutableArray *images = [NSMutableArray arrayWithCapacity:5000];
for(size_t i = 0; i <= 5000; ++i) {
    [images addObject:[UIImage imageNamed:[NSString stringWithFormat:@"image_%d", i]]];
}

imageView.animationImages = images;
imageView.animationDuration = 250.0;
imageView.animationRepeatCount = 0;

[imageView startAnimating]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T02:46:16.490

I would use a NSTimer to load an image at a time into an UIIMageView. That way you can have controlled of the interval between images changes and minimized memory usage. Let me know if you need sample code.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T07:00:43.207

You could look at using Cocos2d. Not sure if it can handle 5000 images though.

5000 images sounds a lot like a movie. Have you thought about approaching it from that angle?

# java - 直接将图像添加到 JPanel

> ID：10167893
> 
> 赞同：0
> 
> 时间：2012-04-16T01:56:23.557
> 
> 标签：java, swing

我正在做一个设计游戏的项目，我想知道是否可以直接将图像添加到 JPanel 而无需将其添加到 jLabel 然后将标签添加到面板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:20:38.997

你可以这样尝试：

```
class Sample extends JPanel {
    BufferedImage image;

    Pseudo(BufferedImage image) {
        this.image = image;
        // or load it in this class
        setLayout(null);

    }

    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        int x =
        int y =
        g.drawImage(image, x, y, this);
    }
} 
```

这会将图像直接添加到 JPanel。

# php - PHP 重定向/获取 URL 和查询字符串

> ID：10167894
> 
> 赞同：1
> 
> 时间：2012-04-16T01:56:27.700
> 
> 标签：php, string, redirect

我已将站点的主目录移至子目录，因此该子目录现在是根目录。

我仍然有指向子目录的链接，所以我想在抓取任何和所有查询字符串参数的同时进行重定向。

新闻博客以前位于“/news/”，但现在博客是主目录。

例如，我想重定向

```
example.com/news/?p=1092
to
example.com/?p=1092 
```

问题是查询字符串很多，我想全部抓取。

我做不到：($_GET["p"])

因为可能还有：

example.com/news/?page=1092&location=xyz

我认为我也不能使用 htaccess，因为我仍在新应用程序中使用新闻目录。所以重写规则会非常复杂。

我在想也许我可以在新闻目录中创建一个 index.php 并执行 parse_url 或 $_SERVER['REQUEST_URI']; 并在 example.com/news/ 上进行拆分，但我不知道如何。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:08:26.897

获取hte页面的URI

```
$request_url=$_SERVER['REQUEST_URI']; 
```

输出应该是`news/?p=1023`

展开结果

```
explode("/", $request_url, 2); 
```

之后获取组件`/news/`然后重定向

```
$link = $request_url[2]; //the second piece of the explode
header( 'Location: http://www.example.com/$link' ) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:02:29.223

您正在寻找前端控制器模式。谷歌有很多例子，包括[这个](http://css.dzone.com/books/practical-php-patterns/practical-php-patterns-front)。希望这可以帮助！

# c++ - 如何通过编程方式杀死audiodg.exe进程？

> ID：10167895
> 
> 赞同：0
> 
> 时间：2012-04-16T01:56:34.113
> 
> 标签：c++, windows, process

如何通过编程方式杀死audiodg.exe进程？

最好的编程方式是cpp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T00:35:03.320

调用[TerminateProcess()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686714%28v=vs.85%29.aspx)。为此，您需要一个进程[句柄](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684320%28v=vs.85%29.aspx)，而这又需要一个进程 ID (PID)，可以通过[此方法](https://stackoverflow.com/questions/4526749/get-a-process-id-from-process-name)从进程名称中检索该 ID 。TerminateProcess() 需要 PROCESS_TERMINATE (0x0001) 作为访问权限。

# comments - 使用 ClojureScript 为 Chrome 构建用户脚本，如何让用户脚本注释块存在于编译输出中？

> ID：10167896
> 
> 赞同：3
> 
> 时间：2012-04-16T01:56:42.180
> 
> 标签：comments, userscripts, clojurescript

我正在尝试使用 ClojureScript 在 Chrome 中创建用户脚本。我遇到的问题是该`<name>.user.js`文件需要在顶部声明有关 UserScript 的属性的注释块。

它看起来像这样：

```
// ==UserScript==
// @name CLJS Hello World
// @namespace http://something.com/my_cljs_user_script
// @author spoon16
// @include *
// ==/UserScript== 
```

如何在编译的 JS 文件中包含这个块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:18:43.147

[（这里](https://groups.google.com/forum/?fromgroups=#!topic/clojurescript/_qViDrdu30U)正在进行讨论）

1.  在您的 cljsbuild 构建规范中添加一个 foreign-libs 标记（如果您使用的是 cljsbuild），这是我添加的内容：

    ```
    :foreign-libs [{:file "comment-block.js" :provides ["comment.block"]}] 
    ```

2.  添加那个外国“lib”。这是我的内容：

    ```
    /**
     * @fileoverview
     * This file contains nothing but a comment block which is to be preserved 
     * by the google closure compiler. This comment block contains a comment
     * block which is necessary to be in the output of the compiled javascript
     * even in advanced compilation mode.
     */
    /**
     * @preserve
    // ==UserScript==
    // @description Description of the user script
    // @include INCLUDESPEC HERE
    // @include ETC ETC
    // @name user script name
    // ==/UserScript==
    */ 
    ```

3.  （要求）你的外国图书馆。

    ```
    (require [comment.block :as ignored]) 
    ```

4.  运行您的（高级）编译。在编译输出的某个地方，会出现 UserScript 块（请注意，用户脚本块需要位于第 0 列，以 // 样式注释开头，这就是为什么在 之后有换行符的原因`@preserve`）。

5.  调用编译后的输出类似的东西`blablabla.user.js`（后缀`'user.js'`是必需的），greasemonkey 会识别它，从用户脚本块中获取数据，每个人都有独角兽（甚至是素食主义者！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T00:40:32.863

我认为最好的办法是使用两个单独的文件——一个是保留为 javascript 文件的 UserScript 模板，另一个是编译的实际 ClojureScript。只需包含执行所需 ClojureScript 的函数。

# asp-classic - VBScript / Classic ASP - 如何检查对象中是否存在属性而不引发错误

> ID：10167898
> 
> 赞同：11
> 
> 时间：2012-04-16T01:57:02.403
> 
> 标签：asp-classic

**示例代码：**

```
Dim myObject
Set myObject = JSON.parse(someJsonResponseFromTheServer)    

myFunction(myObject.someProperty) 
```

**问题：**

当在我的应用程序中运行与此类似的代码时，它会从服务器抛出一个`500`错误，并显示类似于“对象不支持属性或方法'someProperty'的消息。我想要解决这个问题是这样的：

```
Dim myObject
Set myObject = JSON.parse(someJsonResponseFromTheServer)    

If myObject.someProperty Then
    myFunction(myObject.someProperty)
End If 
```

但是，如果我添加条件，它会在带有条件的行而不是带有方法调用的行上引发相同的错误。

**我的问题：**

在 ASP Classic 中，如何在不引发错误的情况下检测对象中是否存在属性？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-17T07:12:37.793

经典 ASP 的好处之一是它允许您**在同一页面中同时**运行 VBScript 和 JScript - 因此您可以使用两者的强大功能。

首先，将此 JScript 代码块添加到现有`.asp`文件中：

```
<script language="JScript" runat="server">
function CheckProperty(obj, propName) {
    return (typeof obj[propName] != "undefined");
}
</script> 
```

假设 VBScript 是页面中的默认语言，您可以在 VBScript 代码中调用它，如下所示：

```
Dim myObject
Set myObject = JSON.parse(someJsonResponseFromTheServer)    
If CheckProperty(myObject, "someProperty") Then
    myFunction(myObject.someProperty)
End If 
```

使用通用类对象对其进行了测试，它工作正常 - JScript 在 VBScript 之前编译，因此可以访问它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-16T02:03:08.487

可悲的是，这通常意味着“错误”声明。

```
Private Function TestProperty()
    Dim Success
    Success = False

    On Error Resume Next
        ' set for property here
        Success = (Err.Number = 0)
    On Error Goto 0
    TestProperty = Success
Exit Function 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-16T11:57:00.367

假设您包含一些 runat="server" js 文件，该文件为您提供 JSON 解析器，然后`JSON.parse`将返回一个 Javascript 对象。

如果上述假设是正确的，那么以下应该起作用：

```
If myObject.hasOwnProperty("someProperty") Then 
    myFunction(myObject.someProperty) 
End If 
```

# java - 为什么 PHP 构造函数是一个方法？

> ID：10167900
> 
> 赞同：1
> 
> 时间：2012-04-16T01:57:09.907
> 
> 标签：java, php, python, constructor

PHP`__construct()`用于为新创建的对象设置属性。据我了解，它不是真正的构造函数，而是一种方法。为什么？

另外 - 对于较少的 .. 不一致的语言，如 Java 或 Python，对象是否在调用构造函数之前或之后被实例化？这与 PHP 方式有何不同？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T02:00:28.527

这两种语言在调用构造函数之前都会对其进行实例化。在 Java 中，您可以访问`this`, 在 Python 中`self`。此外，在 Java 中，它就像一个方法，除了没有返回类型。在 Python 中，语法与方法 ( `__init__`) 完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T02:02:01.457

它实际上被称为[魔术方法](http://php.net/manual/en/language.oop5.magic.php)，它是自动被某些“事件”调用的方法。*魔术方法*是最接近PHP*事件的方法。*[__construct](http://www.php.net/manual/en/language.oop5.decon.php#object.construct)在类实例化事件中由 PHP 自动调用。

与`__construct`魔术方法一起使用的是[__destruct](http://www.php.net/manual/en/language.oop5.decon.php#object.destruct)魔术方法，它总是在脚本关闭时调用，即使在`exit()`或`die()`已被调用时也是如此。

我发现使用多个类来“玩”这些不同的魔术方法很有用，以了解这些`__destruct`方法发生的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T06:11:49.763

在每一种面向对象的语言中（我所知道的；我几乎不是所有这些语言的专家），在创建对象**后**调用构造函数来初始化对象的*内容*。构造函数中没有代码创建对象，或者无论如何都可以影响创建过程[1]。

（注意我不是指内存；在 C++ 和 Java 等语言中，“对象已创建”表示其字段占用的内存已分配，而在 Python 中“对象已创建”表示有一个字典可以一旦分配了对象的属性，就保存它们）

在我所知道的大多数 OO 语言中，构造函数也具有与方法极为相似的语法，并且我认为将它们视为大多数意义上的方法并没有任何概念上的困难（在 Python 中，该`__init__`方法实际上是各种意义上的方法；有只是运行时系统在创建新对象后对其调用的协议）。

* * *

[1]Python还有一个特性可以*让*你控制对象的创建过程；但是您不使用`__init__`方法（与 Java/PHP 中的构造函数最接近的特殊方法）来执行此操作，而是使用`__new__`.

# java - （@Context HttpServletResponse 响应在 resteasy 中不起作用

> ID：10167901
> 
> 赞同：5
> 
> 时间：2012-04-16T01:57:23.870
> 
> 标签：java, servlets, web

带有 resteasy 框架的 Web 应用程序。

```
@Path("/do3")
@GET
public void response(@Context HttpServletResponse response) throws IOException{ 
    response.setStatus(202);

} 
```

为什么得到 /do3 返回 204，而不是 202？提前致谢。

PS：（1）我切换到@post方法。它也无法通过get获得预期的代码：202。(2) response.addHeader("key", "value"); 可以正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T04:58:33.627

RESTEasy 正在尽其所能解释您的方法 - 您没有指定返回类型，因此它将 204（无内容）返回给客户端。void`GET`方法确实没有多大意义，应该避免使用，或者转换为另一个 HTTP 动词（如 POST）。

就主题而言，这不是设置来自 JAX-RS 调用的响应状态的正确方法。您应该改用[ResponseBuilder](http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/Response.ResponseBuilder.html)。

```
Response.status(202).build(); 
```

`HttpServletResponse`当然，只要在调用上下文中有意义，您就可以将注入用于任何其他事情：

```
response.setHeader("Location", "http://www.example.com/myresource/5"); 
```

# css - 为什么单击此提交按钮时没有任何反应？

> ID：10167909
> 
> 赞同：0
> 
> 时间：2012-04-16T01:59:35.483
> 
> 标签：css, forms

我在创建图像提交按钮时遇到问题。当我点击它时，什么也没有发生。这是我的代码：

```
<input type="image" src="notify_me.png" name="submit" id="submit" OnClick="this.disabled = true" value=""/>

if($_POST) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:09:32.600

您需要在点击事件中提交表单：

```
<input type="image" src="notify_me.png" onclick="document.forms[0].submit();" /> 
```

您还应该使用提交类型的输入：

```
<input type="submit" style="width:(width); height:(height); background-image:url('notify_me.png'); border:none; padding:0;" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:13:58.970

在禁用 onClick 事件后添加 return true。

```
<input type="image" src="notify_me.png" name="Submit" id="submit" onClick="this.disabled = true; return true;" value="" /> 
```

# haskell - Haskell 中的快速排序如何工作？

> ID：10167910
> 
> 赞同：6
> 
> 时间：2012-04-16T01:59:36.310
> 
> 标签：haskell, functional-programming

在[Haskell 网站上](http://www.haskell.org)，有这个示例[快速排序实现](http://www.haskell.org/haskellwiki/Introduction#Quicksort_in_Haskell)：

```
quicksort :: Ord a => [a] -> [a]
quicksort []     = []
quicksort (p:xs) = (quicksort lesser) ++ [p] ++ (quicksort greater)
    where
        lesser  = filter (< p) xs
        greater = filter (>= p) xs 
```

网站上有一个解释，但我有几个我没有看到的问题得到解决......

*   对两个元素进行重新排序的实际比较/交换在哪里？这是否由“Ord”（有序）类型定义本身处理。那么类型强制执行这种被订购的条件？
*   'greater' 过滤器定义了项目 '>= p' （枢轴），所以这是否意味着我们最终会在函数的结果列表中得到一个额外的枢轴 [p]，因为 '++ [p ]' 物品？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-16T02:18:25.083

1.  没有交换，因为这不是（几乎）就地版本的 QS。取而代之的是，构建新列表然后将其连接起来——比较是在创建`lesser`和`greater`创建时完成的，其中`<`,是一个限制为可排序的类型类`>=`——如果不使用它，你将无法使用or 。`Ord``a``<``>=`
2.  不，因为枢轴不是`xs`- 模式匹配将输入列表拆分为`p`和的一部分`xs`。

这是糟糕的 ASCII 可视化：

```
 qs [5, 5, 6, 3, 1]
                                          |
                         qs [3, 1]   ++  [5] ++ qs [5, 6]
                             |            |       |
                  qs [1] ++ [3] ++ qs []  |    qs [] ++ [5] ++ qs [6]
                             |            |       |
                           [1, 3]    ++  [5]  ++ [5, 6]
                             \            |        /
                              \-------------------/
                                        |
                                  [1, 3, 5, 5, 6] 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-16T02:35:11.833

> 对两个元素进行重新排序的实际比较/交换在哪里？这是否由`Ord`（有序）类型定义本身处理。那么类型强制执行这种被订购的条件？

## 是什么`Ord`意思？

`Ord`只是意味着`a`应该与自身或更严格的操作（如`>`, , ）具有可比性`<`，并且`==`应该为`a`. 您可以将其视为对方法的约束。

## 那么，在哪里下单呢？

答案是最后一个模式：

```
quicksort (p:xs) = (quicksort lesser) ++ [p] ++ (quicksort greater)
    where
        lesser  = filter (< p) xs
        greater = filter (>= p) xs 
```

在运行时，程序将获取一个数组，并且该数组必须满足以下两种模式之一：

模式 1#：它是空的，在这种情况下，函数返回相同的空数组并停止。

模式 2#：它不为空，或者换句话说，有一个 head 元素`p`附加到一个 tailing array `xs`。在这种情况下，函数被告知将其放在`p`中间，将所有`xs`小于的元素`p`放在 的左侧（由 定义`lesser`），将所有大于或等于的`p`元素放在 的右侧。此外，函数最终被告知将自身（即相同的函数）应用于（如我们上面定义的，是 的左侧的数组）和（如我们上面定义的，是右侧的数组侧`xs``p``p``quicksort``lesser``p``greater``p`）。如您所见，这将一直持续到您留下一个大小为零的数组并且模式 1# 终止该函数。

最后，每当这些递归调用终止时，函数将返回数组：

```
sortedlesser ++ p ++ sortedgreater 
```

其中`sortedlesser`是应用`quicksort`on产生的数组`lesser`，是应用on`sortedgreater`产生的数组。`quicksort``greater`

## 等等……我们不是一次又一次地复制 p 吗？

> 'greater' 谓词定义了项目 '>= p' （枢轴），所以这是否意味着我们最终会在函数的结果列表中得到一个额外的枢轴 [p]，因为 '++ [p ]' 物品？

不，这不是模式匹配的工作方式。这是说其中的所有元素`xs`都大于或等于`p`。顾名思义`p`，它本身就是 out of `xs`。如果 in 有重复项`p`，`xs`则它们将落在右侧。请注意，此选择将​​保留原始数组的自然顺序。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-16T06:48:00.303

请注意，您可以使用以下方法编写更短且性能更高的代码（因为`partition`只扫描原始列表一次）

```
quicksort [] = []
quicksort (p:xs) = (quicksort lesser) ++ [p] ++ (quicksort greater)
    where (lesser, greater) = partition (< p) xs 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-16T09:34:19.247

如果你只想要一行：

```
qsortOneLine s = case s of{[]->[];(x:xs)->qsortOneLine [y | y<-xs, y<x] ++ x : qsortOneLine [y | y<-xs, y>=x]} 
```

如果您想要更高性能的代码：

```
qsort3 :: Ord a => [a] -> [a]
qsort3 x = qsort3' x []
qsort3' [] y     = y
qsort3' [x] y    = x:y
qsort3' (x:xs) y = part xs [] [x] []  
      where
         part [] l e g = qsort3' l (e ++ (qsort3' g y))
         part (z:zs) l e g 
             | z > x     = part zs l e (z:g) 
             | z < x     = part zs (z:l) e g 
             | otherwise = part zs l (z:e) g 
```

[http://en.literateprograms.org/Quicksort_(Haskell](http://en.literateprograms.org/Quicksort_(Haskell) )

# sitecore - 如何在 Sitecore 中设置响应头的 Cache-Control？

> ID：10167911
> 
> 赞同：3
> 
> 时间：2012-04-16T01:59:38.347
> 
> 标签：sitecore, sitecore6

默认情况下，Sitecore 似乎不缓存页面。在 web.config 中，设置这个

```
<setting name="DisableBrowserCaching" value="false"/> 
```

并创建管道处理器

```
page.Response.Cache.SetExpires(DateTime.Now.AddSeconds(60));
page.Response.Cache.SetCacheability(HttpCacheability.Public); 
```

但它没有用，响应头仍然存在`no-cache`。顺便说一句，我在 中添加了管道`renderLayout`，有人知道吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:18:58.057

我试图通过首先将`DisableBrowserCaching`设置设置为来重现这一点`true`。这确实会产生一个无缓存标头。

然后我将它设置为`false`并重新加载页面并且无缓存标题消失了。不需要其他任何东西。

如果要设置过期标头，则应在 IIS 中的 HTTP 响应标头功能中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:07:07.717

在内容呈现为 HTML 之前，Sitecore 有 7 层缓存。您可以在呈现内容之前控制每个缓存。但是默认情况下 no-cache 是真的。

这是因为 Sitecore 中的页面是动态的。他们根据当前情况更改布局和内容。特别是如果您使用设备 ( [http://briancaos.wordpress.com/2012/04/12/identifying-mobile-devices-in-sitecore/](http://briancaos.wordpress.com/2012/04/12/identifying-mobile-devices-in-sitecore/) ) 并且在使用 Sitecore DMS 时，每个设备和用户的内容呈现方式不同。

如果您构建自己的浏览器缓存机制，请确保您只在具有静态内容的页面上执行此操作。

# java - Oracle Coherence：如何在复制缓存中设置调用调用的超时？

> ID：10167918
> 
> 赞同：7
> 
> 时间：2012-04-16T02:01:07.347
> 
> 标签：java, oracle, caching, timeout, weblogic

我在许多也运行 OSB 的 weblogic 节点上运行了一个复制缓存。缓存作为启动类与服务器一起启动。它有一个非常简单的对象缓存，可以通过布尔属性“可用”简单地跟踪它们是否正在使用中。

从 OSB 我正在对同一个类进行 java 标注，该类使用将对象标记为不可用的处理器在缓存上调用“invoke”，然后运行 ​​Thread.sleep(31000)。这是我想稍后添加的一些冗长处理的占位符。

我想要发生的是，如果调用（）调用时间过长，该过程应该超时并返回或抛出异常。所以我一直在尝试配置一个 30000 毫秒的请求超时来测试这个。不幸的是，我无法弄清楚如何让这个超时发生。

我努力了：

*   将处理器包装在 PriorityProcessor 中并在 invoke() 之前调用 setRequestTimeout(30000)

*   将`<request-timeout`>30000 `</request-timeout`> 添加到`<replicated-scheme/`缓存配置中的 > 元素

*   将`<tasktimeout`>30000 `</tasktimeout`> 添加到`<replicated-scheme/`缓存配置中的 > 元素

*   将`<guardian-timeout`>30000 `</guardian-timeout`> 添加到`<replicated-scheme/`缓存配置中的 > 元素

*   创建一个 tangosol-coherence-override.xml 并将 Guardian-timeout `<init-param`> 添加到`<service`“类型”与缓存配置中的服务“名称”匹配的 > 元素

*   将 sleep() 调用更改为 Thread.sleep(310000) 只是为了查看是否有任何开箱即用的默认设置会在 5 分钟后启动。

这些都不会导致任何类型的超时，无论我告诉它多长时间，处理器都会简单地休眠，然后返回而没有错误。

有没有人做过类似的事情，可以给我一些建议？将不胜感激。

谢谢

詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:45:38.773

[好的，在Tim Middleton](http://coherencedownunder.wordpress.com/)的帮助下，我有了答案。

基本上复制的缓存不支持超时，事实证明它不是我的系统的合适选择！

解决方案是：

1.  切换到`<distributed-cache`缓存配置中的 > 方案。
2.  将`<thread-count`> 元素添加到具有数字 > 1 的方案中（我选择了 10，但它只是您想要支持的并发实例数量）。
3.  使用[PriorityProcessor](http://download.oracle.com/otn_hosted_doc/coherence/330/com/tangosol/util/processor/PriorityProcessor.html)包装 EntryProcessor 并在调用 invoke() 之前使用 setRequestTimeoutMillis() 设置超时。（注意这是我尝试的第一件事，但事实证明缓存类型错误）

# mobile - Rails3 Kaminari 和移动设备

> ID：10167919
> 
> 赞同：3
> 
> 时间：2012-04-16T02:01:17.043
> 
> 标签：mobile, pagination, partial, kaminari

我已经在我的视图中实现了 Kaminari 以进行分页。现在我已经实现了我的应用程序以通过 railscast 指令[http://railscasts.com/episodes/199-mobile-devices](http://railscasts.com/episodes/199-mobile-devices)检测移动设备。

分页工作正常，而不是在移动设备中。当我切换到 index.mobile.erb 的移动设备时，我收到了这个错误。

* * *

活动中的 ActionView::MissingTemplate#index

显示 /home/jon/cny32/app/views/activities/index.mobile.erb 其中第 35 行提出：

缺少带有 {:handlers=>[:erb, :builder, :arb, :coffee], :formats=>[:mobile], :locale=>[:en, :en]} 的部分 kaminari/paginator。在以下位置搜索：*“/home/jon/cny32/app/views”*“/home/jon/.rvm/gems/ruby-1.9.2-p290/gems/activeadmin-0.4.2/app/views”*“ /home/jon/.rvm/gems/ruby-1.9.2-p290/gems/devise-2.0.4/app/views" * "/home/jon/.rvm/gems/ruby-1.9.2-p290@全球/宝石/kaminari-0.13.0/app/views"

提取的源代码（大约第 35 行）：

32:33:34:
35: <%= 分页@activities %> Rails.root: /home/jon/cny32

应用程序跟踪 | 框架跟踪 | 完整跟踪 app/views/activities/index.mobile.erb:35:in `_app_views_activities_index_mobile_erb___54960106_95964060' app/controllers/activities_controller.rb:8:in`index' 请求

参数：

{"format"=>"mobile"} 显示会话转储

显示环境转储

回复

标题：

没有任何

* * *

当我取出 <%= paginate @activities %> 时，它可以工作，但只列出控制器中指定的 10 页，当然没有分页。

我的目标是在普通视图和移动设备上进行分页。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T07:21:12.120

也有这个问题。从 gem 复制粘贴 kaminari 视图到您的应用程序的明显方法将扩展名更改为移动设备。为此，您需要：

*   捆绑打开 kaminari
*   转到 kaminari gem 中的应用程序/视图
*   从这里复制 kaminari 文件夹并将其放在您的视图文件夹下
*   将部分扩展从 html.erb 更改为 mobile.erb（你可以删除 haml 和 slim 的）。

但是，这又不是完美的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-24T20:33:37.683

你也可以运行生成器：

`% rails g kaminari:views default`

# c# - 使用 WebDriver 的 javascript 出现一些错误

> ID：10167920
> 
> 赞同：1
> 
> 时间：2012-04-16T02:01:36.673
> 
> 标签：c#, javascript, testing, selenium, webdriver

我想使用 javascript 来定位控件并向其发送值。例如，我想将 textbox(id="ID") 中的文本更改为“123456”。

这是我的代码：

```
((IJavaScriptExecutor)driver).ExecuteScript("document.getElementById('ID').value='TextValue'"); 
```

但是有些错误。它显示`invalidoperateException`。在此之前，我尝试使用 javascript 返回标题并且它有效。

```
string title = (string)((IJavaScriptExecutor)driver).ExecuteScript("return document.title"); 
```

我无法弄清楚问题是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:52:04.547

这是我的做法：

```
IWebElement element = driver.FindElement(By.Id("ID"));
string setAttrScript = "arguments[0].setAttribute('value',arguments[1])";
driver.ExecuteScript(setAttrScript, element, "TextValue"); 
```

# matlab - MatLab中数据集的最大和最小点

> ID：10167926
> 
> 赞同：0
> 
> 时间：2012-04-16T02:02:38.540
> 
> 标签：matlab, max, data-analysis

嗨，我正在尝试找到一种在 MatLab 中创建矩阵的方法，该矩阵仅在 30 秒内重复一个练习的最大值和最小值。

例如，如果我有数据集：

```
data = [1 3 5 7 9 6 4 2 3 6 8 10 7 6 4 2 1] 
```

我想要的结果是：

```
output = [1 9 2 10 1] 
```

该函数只会绘制不断变化的波形的峰值。

我试过的代码如下：

```
size = length(data);    %Get the length of the dataset 
x = 1;                  %Set a counter value
maxplot = 0;            %Default, a maximum value has not yet been plotted

for x = 1:size-1
    a1 = data(1,x);     %Get two adjacent samples of the dataset
    a2 = data(1,x+1);

    v = 1;  %Set the initial column for the max points matrix

    while maxplot == 0
        if a1 > a2
            max(v,1) = a1;
            v = v + 1;
            maxplot = 1;
        end
    end

    if a1 < a2
        maxplot = 0;    
    end
end 
```

感谢提前回复的人，

杰瑞德。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T02:12:26.973

你可以使用这样的东西：

```
function Y = findpeaks(X)
    deltas = diff(X);
    signs = sign(deltas);
    Y = [true, (signs(1:(end-1)) + signs(2:end)) == 0, true]; 
```

`findpeaks`将返回与其输入数组长度相同的逻辑`X`数组。要提取标记的值，只需按逻辑数组索引。

例如，

```
data = [1 3 5 7 9 6 4 2 3 6 8 10 7 6 4 2 1];
peaks = data(findpeaks(data)) 
```

应该输出：

```
peaks =
    1    9    2   10    1 
```

这个函数没有做任何特殊的事情来处理输入数组中的重复值。我把它留给读者作为练习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T03:09:05.490

这个版本没有约翰的漂亮，但是当有平坦的部分时它不会失去峰值：

```
function peaks = findpeaks(data)
% Finds the peaks in the dataset

size = length(data);    %Get the length of the dataset 
x = 1;                  %Set a counter value
peaks = data(1,1);      %Always include first point

if size == 1  %Check for sanity
    return
end

lastdirection = 0;      %Direction of change

directions = sign( diff(data) ); %Directions of change
                                 % between neighboring elements

while x < size
    % Detect change in direction:
    if abs( directions(x) - lastdirection ) >= 2
        peaks = [peaks, data(1,x)];
        lastdirection = directions(x);
    else
        % This is here so that if lastdirection was 0 it would get
        % updated
        lastdirection = sign( lastdirection + directions(x) );
    end
    x = x+1;
end

peaks = [peaks, data(1,size)];
end 
```

# java - 使用 fileinputstream 从文件中读取字节以查找丢失的图像

> ID：10167932
> 
> 赞同：0
> 
> 时间：2012-04-16T02:03:51.767
> 
> 标签：java, parsing, io, byte

我正在尝试读取 .raw 文件以查找一些“损坏”的图像。我已经尝试了一切。据我了解，以下应该有效

```
public void readFile(){
FileInputStream inFile = new FileInputStream(this.rawFile);
System.out.println(inFile.read());
} 
```

但只打印一个字节。我需要读取所有这些并查找 255 的字节（表示新图像的开始）并将前 255 的字节保存到下一个 255（下一个图像）到 .jpg

对不起，如果我在这里不清楚。

请提出您可能有的任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:10:18.443

您正在调用[`read()`](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html#read%28%29)FileInputStream 上的方法。此方法读取单个字节并返回它。从[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html#read%28%29)：

> 从此输入流中读取一个字节的数据。如果还没有输入可用，则此方法会阻塞。

你有几个选择...

您可以继续一次读取一个字节，在这种情况下，您需要一个循环：

```
int read;

while ((read = inFile.read()) != -1)
{
  // process the byte
} 
```

或者，您可以将文件的一部分读入缓冲区并使用[`read(byte[],int,int)`](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html#read%28byte%5b%5d,%20int,%20int%29).

如果文件不是太大，您可以一次将其读入内存。

```
final byte[] buff = new byte[this.rawFile.length()];    // size the array
inFile.read(buff);                                      // read the whole file in
inFile.close();                                         // close the file descriptor

for (int i = 0; i < buff.length; i++)                   // search the in-memory buffer
{
  if (buff[i] == 0xFF)
  {
    // found marker byte ...
  }
} 
```

# javascript - 将 emacs 用于大型多文件 JavaScript 项目

> ID：10167933
> 
> 赞同：1
> 
> 时间：2012-04-16T02:04:13.037
> 
> 标签：javascript, c++, emacs, project-management, webgl

我希望将游戏从 C++ 移植到 JavaScript/WebGL，并且我想使用 emacs。

我可能会使用 js2-mode 进行代码编辑，但是管理多文件多类项目的好方法是什么？

如果重要的话，我正在使用 Ubuntu。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:07:52.777

我不确定 JS 是否存在明确的项目经理。[不过，这是](http://blog.deadpansincerity.com/2011/05/setting-up-emacs-as-a-javascript-editing-environment-for-fun-and-profit/)将 Emacs 设置为节点环境的一个非常好的分步操作。

# javascript - 用jquery将点击的对象id变成一个变量来优化

> ID：10167935
> 
> 赞同：0
> 
> 时间：2012-04-16T02:04:27.963
> 
> 标签：javascript, jquery, jquery-ui

您好，我想知道是否有一种方法可以点击此处的某些内容使用该变量后，我可以淡出所有其他框并淡入淡出。否则，我将不得不通过单击 id 来创建 6 个单独的函数，这将使其代码更多我基本上想要一种将它们合并为一个的方法。我很感激任何和所有的帮助已经研究了一段时间，但似乎无法弄清楚也许获得另一个视角会有所帮助

```
jQuery(function(){
    jQuery(".catalignleft").click(function() {

        function complete() {
          jQuery(".alignleft");
        }

        if(status == 1) {
            jQuery("#box1").fadeOut();
            jQuery("#box2").fadeOut();
            jQuery("#box3").fadeOut();
            jQuery("#box4").fadeOut();
            jQuery("#box5").fadeOut();
            jQuery("#box6").fadeOut();
            jQuery("#box1").fadeIn();
            status--;
        } else{
        jQuery("#box1").fadeIn(1600, "linear", complete);
status++;
}

    });

    jQuery("#btn2").click(function() {
    jQuery("#box1").fadeOut();

    jQuery("#log").empty();
    });
    jQuery(".blocked a").click(function(event) {
  event.preventDefault();
  jQuery('<div/>')
});

    jQuery("#btn2").click(function() {

    jQuery("#box2").fadeOut();
    jQuery("#log").empty();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:07:27.053

使用类选择器而不是 ID 选择器，并`$(this).fadeIn`在其`fadeOut`回调中放入 a，如下所示：

```
$(".box").click(function() {
    $(".box").fadeOut("slow", function() {
        $(this).fadeIn();
    });
}); 
```

（假设你所有的盒子都有一个“盒子”类）：

```
<div class="box"></div> 
```

* * *

此外，没有理由使用`jQuery(...)`. 您可以将其缩短`$(...)`并节省一些打字时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T02:17:33.987

*正如 Elliot 在他的回答中显示的那样，您可以使用this*引用当前对象（在本例中为单击的对象）（即使您没有使用 jQuery）。

# batch-file - 批处理文件命令选择用户的路径（用户输入）并创建一个在命令中引用的文件夹

> ID：10167936
> 
> 赞同：0
> 
> 时间：2012-04-16T02:04:29.083
> 
> 标签：batch-file, makefile, command, directory, user-input

我需要一个批处理文件命令，它将选择用户的目录路径（用户输入），它应该创建一个由我引用的目录。

例如，如果用户选择路径“C:\New folder”，那么批处理文件应该创建“C:New folder\Folder1\Folder2”。路径“Folder1\Folder2”是我的目录，它应该与用户的路径“C:New folder”一起创建，例如 mkdir“Folder1\Folder2”。这是为了将一些文件复制到该文件夹​​。

（问题更新）到目前为止我的代码：

```
@echo off
set /p var=Enter destination folder:
mkdir "MyFolder\Folder1" %var%
xcopy file.exe "MyFolder\Folder1" %var% 
```

但是，它不再起作用了。它将仅在当前目录上创建“MyFolder\Folder1”。但是，结构正是这样。路径“Myfolder\Folder1”应与用户路径一起创建。我应该怎么办..？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:20:33.507

在您的脚本中，您没有提到在哪里创建 myfolder ...

脚本应该如下所示。

```
set /p var=Enter destination folder
mkdir %var%\sample1 
```

确保目标文件夹正确。
提供有关目标文件夹外观的消息。

您甚至可以将其作为参数传递并`%1`代替`%var%`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T02:31:08.483

我认为您希望用户在运行脚本时在命令行上执行类似的操作。

`yourscript folderpath`

为此，您可以使用 a`%1`检查用户输入是否存在，并将其用作脚本中的变量。

查看[www.ss64.com](http://www.ss64.com)以获得一个很棒的函数库和脚本示例。
我在那里学到了很多。

您也可以使用`set/p`提出问题，答案将保存为变量。
我通常更喜欢这个，因为最终用户在第一次使用脚本时可能不知道指定参数。

也许也可以研究一下 powershell，因为它比批处理脚本更通用。

# java - JSP 页面上的添加和减去按钮不起作用

> ID：10167940
> 
> 赞同：1
> 
> 时间：2012-04-16T02:05:21.800
> 
> 标签：java, html, jsp

我正在编写一个执行计算的简单网络应用程序。我有 2 个按钮，用于加法和减法，但它们不起作用。我尝试使用一个`switch`语句和一个`if`语句，但都没有工作。你能帮我理解这个问题吗？

这是我的代码...

```
<%
String name = (String) session.getAttribute("name");
if (name==null) {
    name = request.getParameter("name");
    if (name!=null){
        session.setAttribute("name",name);
    }
}

String sum = (String) session.getAttribute("sum");
if (sum==null) {
    sum = "0";
    session.setAttribute("sum",sum);
}
int isum = Integer.parseInt(sum);

String number = request.getParameter("number");
if (number==null){
    number = "0";
}
int inumber = Integer.parseInt(number);
if(request.getParameter("add") != null){ 
    isum += inumber;
    session.setAttribute("sum",""+isum);
}
if(request.getParameter("subtract") != null){
    isum += inumber;
    session.setAttribute("sum",""+isum);
}
%>

<html>
    <head>
    <title>Adding Machine</title>
    </head>

    <body>
        <form method='get' action='adder.jsp'>
            <%
            if (name==null) {
            %>
                <p>
                    Name: <input type='text' name='name' id='name'>
                </p>
                <p>
                    <input type='submit' name='submit' id='submit' value='signin'>
                </p>
            <%
            } else {
            %>
                <p>Welcome, <%=name%>!</p>
                <p>Current sum is: <%=isum%></p>
                <p>
                    Number to add: <input type='text' name='number' id='number' value='add'>
                </p>
                <p>
                     <input type='submit' name='submit' id='submit' value='add'>
                </p>
                <p>
                    <input type='submit' name='submit' id='submit' value='subtract'>
                </p>
            <%
            }
            %>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:12:46.013

您需要使用该`id`属性来唯一标识每个输入元素。请注意，您有两个带有`id="submit"`. 我想你的意思是把 id="add" 和 id="subtract"。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T06:14:42.507

看来您从某处严重复制了示例：

的语法`request.getParameter()`是：

```
request.getParameter("formParamName"); 
```

阅读更多：[Java 文档](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29)

在这里，您肯定会得到 NULL，因为没有名为“add”或“subtract”的参数。

将您的代码更改为

```
if(request.getParameter("submit") != null){ 

    if(request.getParameter("submit").equals("add"))
        isum += inumber;
    else if(request.getParameter("submit").equals("subtract"))
        isum -= inumber;
    session.setAttribute("sum",""+isum);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T03:00:31.443

我认为您获取参数的方式不正确。您应该使用 like：request.getParameter("xxx") 其中 xxx 是您的参数名称，以获取参数的值。

在您的 html 示例代码中，应该是：request.getParameter("submit") 而不是 request.getParameter("add") 或 ("substract")，它们都将返回 null，因此不会发生任何事情。

我建议您应该修改这两个输入标签的 html 代码，使用两个不同的名称属性来分隔不同的操作：添加/减去，而不是代码中的两个相同名称（“提交”）输入标签。

# iis-7 - IIS 将 .html URL 重写为 ColdFusion - 如何获取查询字符串？

> ID：10167947
> 
> 赞同：0
> 
> 时间：2012-04-16T02:06:58.447
> 
> 标签：iis-7, coldfusion, url-rewriting

我正在接管一个 ColdFusion 应用程序，但我在重写时遇到了一些麻烦。

该站点位于 IIS7/CF9.0.1/SQL Server 堆栈上。Helicon 经理正在处理重写。

大多数 URL 都写入一个 html 文件，所以我们会有类似 /profile.html 的内容

URL 被这一行重写：

```
RewriteRule /([^\?]*?)\.(html)(\??)(.*)? /default.cfm?name=$1.$2&$4 [I] 
```

当有像 /view.html?id=123 这样的查询字符串时，就会出现问题。查询字符串*应该*由 $4 变量写入，但是当我像这样转储 URL 时，我在应用程序中什么也得不到：

```
<cfset objRequest = GetPageContext().GetRequest() />
<cfset strUrl = objRequest.GetRequestUrl().Append(
"?" & objRequest.GetQueryString()
 ).ToString()
 />
<cfoutput>#strUrl#</cfoutput> 
```

我得到类似的东西：[http://10.211.55.6/default.cfm?name=view.html&](http://10.211.55.6/default.cfm?name=view.html&)。查询字符串永远不会出现。

我相信这是一个 IIS 设置 - 可能允许 .html 处理程序访问 GET 变量？我已经设置了一个 .html 处理程序，但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T05:29:06.273

这不起作用的原因是因为 RewriteRule 永远不会看到查询字符串，只会看到资源的路径。要访问查询字符串，您需要使用重写条件

```
RewriteEngine on
RewriteBase /

RewriteCond %{QUERY_STRING}            ^(.*)$
RewriteRule ^([^\.]+)\.html$           default.cfm?name=$1.html&%1 [NC,L] 
```

在此示例中，我们只是检查查询字符串并使用`%1`这意味着 this 中的第一组`RewriteCond`在您的示例中是多余的，您不需要匹配任何内容，因此您可以这样做：-

```
RewriteEngine on
RewriteBase /

RewriteRule ^([^\.]+)\.html$           default.cfm?name=$1.html&%{QUERY_STRING} [NC,L] 
```

但是，聪明的方法就是使用正确的标志来做你想做的事情，`QSA`这意味着查询字符串追加如下： -

```
RewriteEngine on
RewriteBase /

RewriteRule ^([^\.]+)\.html$           default.cfm?name=$1.html [NC,QSA,L] 
```

Helicon 的 ISAPI 重写的所有文档都可以在这里找到：[http](http://www.helicontech.com/isapi_rewrite/doc/) ://www.helicontech.com/isapi_rewrite/doc/ 。它们很容易添加书签。

我希望这会有所帮助。

# c# - 关于验证和 AJAX 选项卡容器/选项卡面板

> ID：10167955
> 
> 赞同：1
> 
> 时间：2012-04-16T02:07:59.243
> 
> 标签：c#, asp.net, tabpanel

我有一个 ajax 选项卡容器，它有 3 个选项卡面板，

例如，第一个面板插入数据，第二个面板更新数据，第三个面板删除数据

在第一个面板（插入）中，我使用必填字段验证器进行错误处理

在第二个面板中，我没有给出这个错误处理

然后我试图更新一个数据，但它不能这样做，因为第一个面板有一个错误处理，除了我点击更新面板之外它还会运行。

很快，我的问题是当我单击更新面板上的更新按钮时，它什么也没做，因为这个按钮在第一个面板上触发了必填字段验证器（错误处理）。

那么，你能给我解决方案如何解决这个问题吗？那么按钮可以在每个面板上单独工作吗？

我试图将属性 false 赋予所需的验证器，当我单击插入按钮时，它使验证器设置为 true，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:17:06.067

您需要为验证者创建组并提交按钮。在每个选项卡上设置所有验证器的**ValidationGroup**属性和提交按钮。例如，在插入选项卡上，在您的 RequiredFieldValidators 和“插入”按钮上设置此属性：

```
ValidationGroup="InsertData" 
```

使用不同的 ValidationGroup 在每个选项卡上执行相同的操作。你可以在这里找到一个例子：

[http://msdn.microsoft.com/en-us/library/ms227424.aspx](http://msdn.microsoft.com/en-us/library/ms227424.aspx)

# ruby-on-rails - Rails 从 RestKit POST 显示“警告：无法验证 CSRF 令牌真实性”

> ID：10167956
> 
> 赞同：23
> 
> 时间：2012-04-16T02:08:23.543
> 
> 标签：ruby-on-rails, ios, ruby-on-rails-3, restkit

当我尝试从 POST 时`RestKit`，Rails 控制台中出现警告：

```
Started POST "/friends" for 127.0.0.1 at 2012-04-16 09:58:10 +0800
Processing by FriendsController#create as */*
Parameters: {"friend"=>{"myself_id"=>"m001", "friend_id"=>"f001"}}
WARNING: Can't verify CSRF token authenticity
(0.1ms)  BEGIN
SQL (1.7ms)  INSERT INTO `friends` (`friend_id`, `myself_id`) VALUES ('f001', 'm001')
(1.1ms)  COMMIT
Redirected to http://127.0.0.1:3000/friends/8
Completed 302 Found in 6ms (ActiveRecord: 3.0ms) 
```

这是客户端代码：

```
NSMutableDictionary *attributes = [[NSMutableDictionary alloc] init];
[attributes setObject: @"f001" forKey: @"friend_id"];
[attributes setObject: @"m001" forKey: @"myself_id"];
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObject:attributes forKey:@"friend"];
[[RKClient sharedClient] post:@"/friends" params:params delegate:self]; 
```

我怎样才能摆脱警告？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-04-27T01:41:05.430

您可以使用以下方法安全地删除警告：

```
skip_before_filter  :verify_authenticity_token 
```

这应该进入你拥有的每个 Rails API 控制器，或者如果你有一个`base_controller`适用于所有 API 控制器的控制器，那么把它放在那里。

如果您还可以通过 Web 浏览器访问您的应用程序，则不要将此行放入其中，`application_controller`因为您将创建安全漏洞。

删除`csrf`API 调用是安全的，因为特定漏洞只能通过 Web 浏览器执行。

**2013 年 12 月 16 日更新**

我已经看到了一些指向这个答案的链接和一些其他内容，这些内容暗示了一个澄清。如果您使用基于 Web 的身份验证方法来验证 API（例如会话或 cookie），则 API 可能容易受到 CSRF 的攻击。

您的 Web API 是否容易受到CSRF[攻击？](https://mathieu.fenniak.net/is-your-web-api-susceptible-to-a-csrf-exploit/).

我的建议仍然适用于 RestKit 的用户，因为用户凭据不太可能基于会话或 cookie，而是基于用户名或 api 密钥。

如果您的 API 可以通过会话或 cookie 进行身份验证，那么您应该避免跳过`: verify_authenticity_token`，并且应该考虑转向基于 api 密钥的身份验证。

如果您的 API 可以使用也用于在 Web 上进行身份验证的用户名和密码进行身份验证，那么仍然存在潜在的漏洞，尽管它不那么严重，因为它需要用户在您的站点中输入他们的用户名和密码访问带有漏洞的站点时的 HTTP Auth 质询框。同样，为了获得最佳安全性，您应该考虑转向基于 api 密钥的身份验证。

值得注意的是，我不同意你需要添加`:only => [:your_method]`额外的保护，前提是你有独立的 api 控制器，你的 api 没有与你的 web 响应混合，并且你没有使用 session 或 cookie。如果这些都到位，您可以安全地将其添加`skip_before_filter`到`base_controller`您的 api 中。

# php - PHP 使用 SQL 数据填充下拉列表

> ID：10167960
> 
> 赞同：1
> 
> 时间：2012-04-16T02:08:47.197
> 
> 标签：php, sql

我想用数据库中的值填充一个下拉列表。

```
<?php
require 'conn.php';

$filter=mysql_query("select distinct fuel_type from car");
while($row = mysql_fetch_array($filter)) {
$options ="<option>" . $row['fuel_type'] . "</option>";

$menu="<form id='filter' name='filter' method='post' action=''>
  <p><label>Filter</label></p>
    <select name='filter' id='filter'>
      " . $options . "
    </select>
</form>";

echo $menu;
}
?> 
```

问题是我得到了两个列表，而不是一个包含值的列表。请指教

![下拉列表](../Images/cf84340b8f8e35ba43461a32f7d880f7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T02:09:55.353

`echo $menu;`应该在你的循环之外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T02:11:55.960

您需要`$menu`从循环中删除：

```
<?php
require 'conn.php';

$options = '';
$filter=mysql_query("select distinct fuel_type from car");
while($row = mysql_fetch_array($filter)) {
    $options .="<option>" . $row['fuel_type'] . "</option>";
}

$menu="<form id='filter' name='filter' method='post' action=''>
  <p><label>Filter</label></p>
    <select name='filter' id='filter'>
      " . $options . "
    </select>
</form>";

echo $menu;

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T02:16:34.413

```
<?php
require 'conn.php';

$filter=mysql_query("select distinct fuel_type from car");
$menu="
<form id='filter' name='filter' method='post' action=''>
  <p><label>Filter</label></p>
    <select name='filter' id='filter'>";

// Add options to the drop down
while($row = mysql_fetch_array($filter))
{
  $menu .="<option>" . $row['fuel_type'] . "</option>";
}

// Close menu form
$menu = "</select></form>";

// Output it
echo $menu;
?> 
```

# c# - C#中列表的通用序列化

> ID：10167961
> 
> 赞同：3
> 
> 时间：2012-04-16T02:09:26.917
> 
> 标签：c#, xml, serialization, generic-list

我正在尝试将几个对象列表序列化为 xml。列表具有不同的类型，但它们都需要在顶部列表对象上具有一些相同的属性。

我想要得到的是顶层的“计数”和列表中所有项目的对象名称：

```
 <JobResult Count="2">
       <Job>
           <Id>1</Id>
       </Job>
       <Job>
           <Id>2</Id>
       </Job>
    </JobResult> 
```

然后是另一个列表：

```
 <PersonResult Count="1">
       <Person>
           <Id>1</Id>
       </Person>
 </PersonResult> 
```

我正在使用的代码是：

```
[XmlRoot()]
    public class Result<T>
    {
        [XmlElement()]
        public List<T> Items { get; set; }

        public Result()
        {
            this.Items = new List<T>();
        }

        [XmlAttribute("Count")]
        public int ItemCount
        {
            get
            {
                return this.Items.Count;
            }
            set
            {

            }
        }
    }
var jobs= new Result<Job>();
var persons= new Result<Person>(); 
```

我得到的是：

```
<ResultOfJob Count="2">
       <Item>
           <Id>1</Id>
       </Item>
       <Item>
           <Id>2</Id>
       </Item>
    </ResultOfJob > 
```

我已经尝试过这样的属性命名，但得到 <_x007B_0_x007D_> 而不是 item。

```
[XmlElement({0})]
 public List<T> Items { get; set; } 
```

动态处理项目命名的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:31:31.367

我最终解决这个问题的方法是以类似的方式创建结果类：

```
public abstract class Result<T> 
{
    [XmlIgnore]
    public abstract List<T> Items {get;set;}

    [XmlAttribute]
    public int ResultCount
    {
        get
        {
            return this.Items.Count;
        }
        set { }
    }

    public Result()
    {
        this.Items = new List<T>();
    } 
```

然后我为任何需要将公共 ResultCount 作为属性的对象继承这个类。如果我需要为所有结果对象添加任何其他通用属性，我可以通过上面的 Result 类来完成。

这是一个示例继承类：

```
public class ChallengesResult : Result<ChallengeResource>
{
    public ChallengesResult()
        : base()
    {
    }

    [XmlElement("Challenge")]
    public override List<ChallengeResource> Items { get; set; }
} 
```

Result 类中 List 上的 [XmlIgnore] 允许我使用 [XmlElement] 属性指定派生类中列表项的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T16:49:17.790

以下是如何为定义如下的 Job / Person 类型实现它

```
public class Job
{
    [XmlElement]
    public int Id;
}

public class Person
{
    [XmlElement]
    public int Id;
} 
```

要生成 JobResult Xml，

```
private static string GetJobResultXml()
{
    var jobs = new Result<Job>();
    jobs.Items.Add(new Job() { Id = 1 });
    jobs.Items.Add(new Job() { Id = 2 });

    XmlSerializerNamespaces xmlnsEmpty = new XmlSerializerNamespaces();
    xmlnsEmpty.Add("", "");

    XmlWriterSettings xws = new XmlWriterSettings();
    xws.OmitXmlDeclaration = true;
    xws.ConformanceLevel = ConformanceLevel.Auto;
    xws.Indent = true;

    XmlAttributeOverrides overrides = new XmlAttributeOverrides();
    XmlAttributes attr = new XmlAttributes();
    attr.XmlRoot = new XmlRootAttribute("JobResult");
    overrides.Add(jobs.GetType(), attr);

    XmlAttributes attr1 = new XmlAttributes();
    attr1.XmlElements.Add(new XmlElementAttribute("Job", typeof(Job)));
    overrides.Add(jobs.GetType(), "Items", attr1);

    StringBuilder xmlString = new StringBuilder();
    using (XmlWriter xtw = XmlTextWriter.Create(xmlString, xws))
    {
        XmlSerializer serializer = new XmlSerializer(jobs.GetType(), overrides);
        serializer.Serialize(xtw, jobs, xmlnsEmpty);

        xtw.Flush();
    }

    return xmlString.ToString();
} 
```

为了生成 PersonResult xml，您必须稍微修改上述方法以获得预期的结果，如下所示

```
private static string GetPersonResultXml()
{
    var jobs = new Result<Person>();
    jobs.Items.Add(new Person() { Id = 1 });
    jobs.Items.Add(new Person() { Id = 2 });

    XmlSerializerNamespaces xmlnsEmpty = new XmlSerializerNamespaces();
    xmlnsEmpty.Add("", "");

    XmlWriterSettings xws = new XmlWriterSettings();
    xws.OmitXmlDeclaration = true;
    xws.ConformanceLevel = ConformanceLevel.Auto;
    xws.Indent = true;

    XmlAttributeOverrides overrides = new XmlAttributeOverrides();
    XmlAttributes attr = new XmlAttributes();
    attr.XmlRoot = new XmlRootAttribute("PersonResult");
    overrides.Add(jobs.GetType(), attr);

    XmlAttributes attr1 = new XmlAttributes();
    attr1.XmlElements.Add(new XmlElementAttribute("Person", typeof(Person)));
    overrides.Add(jobs.GetType(), "Items", attr1);

    StringBuilder xmlString = new StringBuilder();
    using (XmlWriter xtw = XmlTextWriter.Create(xmlString, xws))
    {
        XmlSerializer serializer = new XmlSerializer(jobs.GetType(), overrides);
        serializer.Serialize(xtw, jobs, xmlnsEmpty);

        xtw.Flush();
    }

    return xmlString.ToString();
} 
```

我希望这有帮助。

有关使用 XmlAttributes 类的更多信息，请点击此链接

[http://msdn.microsoft.com/en-us/library/sx1a4zea(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/sx1a4zea(v=vs.80).aspx)

# html - HTML5 Rackspace 访问控制允许来源不起作用

> ID：10167965
> 
> 赞同：3
> 
> 时间：2012-04-16T02:10:11.343
> 
> 标签：html, http, cross-domain, cors, rackspace

所以我在 Rackspace Cloud Files 上有一些视频文件，但由于我使用 HTML5 函数 (.toDataURL()) “SECURITY_ERR: DOM Exception 18”不断被抛出。当我在服务器上使用视频文件时，我的代码工作正常。

因此，我阅读了有关 CORS 并修改了我的 Rackspace Cloud Files 标头，如下所示：

```
access-control-allow-credentials:   true    
access-control-allow-origin:    [my domain here]    
access-control-allow-headers:   Content-Type, Depth, User-Agent, X-File-Size, X-Requested-With, If-Modified-Since, X-File-Name, Cache-Control
access-control-allow-methods:   OPTIONS, GET, POST  
access-control-expose-headers:  X-File-Size, X-Requested-With, If-Modified-Since, X-File-Name
Content-Type:   video/webm 
```

但是 DOM Exception 18 错误不断被抛出。我不知道问题是什么。我使用 web-sniffer.net 检查了我在 Rackspace 上的视频文件是否输出了 HTTP 标头，它们是，所以有什么问题，为什么它不起作用？

我已经在 IE9、Chrome 19、Safari 5.1.2 和 Aurora 12.0a2 上尝试过，它们在这些浏览器中都不起作用，所以我确定这不是浏览器问题。

我只需要摆脱这个 DOM Exception 18 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:55:26.487

如果您的内容位于 CDN（或除当前主机之外的任何其他主机）上，则 toDataURL() 将不起作用，这是 CANVAS 元素的安全限制。

比较[http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#security-with-canvas-elements](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#security-with-canvas-elements)了解禁止内容的详细信息

基本上，每当您想对画布中的图像或视频进行操作**并保存结果**时，您都必须将所有先前的内容都放在同一个域中。一种解决方法是在用户编辑时获取所需文件并临时保存它们

# c++ - sql结合c++

> ID：10167969
> 
> 赞同：-3
> 
> 时间：2012-04-16T02:11:08.633
> 
> 标签：c++, sql

我正在编写将技术人员添加到数据库中的 sql 和 c++ 代码。必须执行 3 条 sql 插入语句。我的代码中包含该内容，但我的代码不符合要求或不符合要求。这是要问的。

程序应提示用户输入 ssn。

如果该 ssn/employee 已经在 Employee 表中，程序应该通知用户该员工已经在 DB 中，并询问用户是否要更新该员工的 union-membership-number；如果用户的回答是肯定的，程序应该向用户询问新的 union-member-number 并在 DB 中更新它。

如果 ssn/employee 尚未在数据库中，程序应向用户询问该员工的 union-membership-number，然后将该记录存储在 Employee 表中。假设员工是技术人员，程序应询问用户要存储的有关该技术人员的信息（姓名、地址和电话号码）并将其存储在 Technician 表中；那么程序应该向用户询问技术人员是专家的飞机型号，并将相应的记录添加到专家表中。

这是我的代码：

```
void add_technician() {
EXEC SQL BEGIN DECLARE SECTION;
    char sn[9];
    int s=0;
    char answer;
    int umn;
    char tname[30];
    char tadd[30];
    char tpho[10];
    char tmod[15];
EXEC SQL END DECLARE SECTION;

cout << "Enter social security number:";
cin >> sn;  

EXEC SQL SELECT SSN into :s from Employee where SSN= :sn;

          if (s == sn)
   { 
cout << "Employee already exists in the database."; 
   cout <<"Would you like to update the union-membership-number?";
   cin >> answer;
   if (answer == 'y'|| 'Y')
   {cout <<"Enter new union member number:";
   cin >> umn;
EXEC SQL 
    INSERT INTO Employee (ssn, union_member_no)
    VALUES (:sn, :umn);
 } 
   }
         else {
 cout << "Enter in union membership number of the new employee: ";
            cin >> umn;
            EXEC SQL INSERT INTO Employees (ssn, union_member_no) 
                   VALUES (:sn, :umn);
            EXEC SQL COMMIT WORK;
             cout << "Enter the address of the technician.";
             cin >> tadd;
 cout << "Enter the name technician name.";
             cin >> tname;

            EXEC SQL INSERT INTO Technicians (address, name, phone)
       VALUES (:tadd, :tname, :tpho);
EXEC SQL COMMIT WORK;
            cout << "Enter airplane model number that you are an expert on." ;
            cin >> tmod;
EXEC SQL INSERT INTO Experts (model_no, ssn)
    VALUES (:tmod);
EXEC SQL COMMIT WORK; }                

} 
```

当我运行程序时，它会跳过我的前两个 IF 语句。我似乎无法理解为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T02:22:06.230

您将值存储回 s 的方式不正确。

查看一个很好的示例[ESQL Programmer's guide](http://www.dbmaker.com/download/manual/esql.pdf)

我会说你有一个 MySQL 方法来解决这个问题。相反，我会做这样的事情（粗略的方法）：

```
int s = 0;
EXEC SQL SELECT rowSSN into :s from Employee where SSN= :sn;

if (s == sn) 
... 
```

s 的值实际上是它自己的行的值。考虑查看 CURSOR 以通过计算从查询返回的行数来获得一种方法。

# java - Java：在 Mac 上播放音频文件的任何简单方法？

> ID：10167981
> 
> 赞同：0
> 
> 时间：2012-04-16T02:13:14.870
> 
> 标签：java, memory, audio, osx-lion

所以我正在尝试制作一款游戏，其中包含在游戏过程中要播放的许多不同的音效。然而，应用程序在大约一分钟左右后不断崩溃，说：

```
Invalid memory access of location 0x54008 rip=0x11c7737fd 
```

或者有时还有与内存相关的另一个错误。在报告中，它说我的程序使用了太多内存，并且由于内存不足而崩溃。但是，它在 Windows 上运行得非常好，不仅在另一台计算机上，甚至在使用虚拟机的同一台计算机上（我正在使用 macbook 顺便说一句）。我已将 Java 更新到最新版本。有没有办法解决这个问题，或者至少有**另一种在 Mac (Lion) 上也能正常工作的方法**？我使用以下链接中的代码在我的程序中播放音频文件：

[http://www.anyexample.com/programming/java/java_play_wav_sound_file.xml](http://www.anyexample.com/programming/java/java_play_wav_sound_file.xml)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:09:29.337

你可以使用[`java.applet.AudioClip`](http://docs.oracle.com/javase/6/docs/api/java/applet/AudioClip.html)返回的[`Applet.newAudioClip()`](http://docs.oracle.com/javase/6/docs/api/java/applet/Applet.html#newAudioClip%28java.net.URL%29)？

> AudioClip 接口是用于播放声音剪辑的简单抽象。可以同时播放多个 AudioClip 项目，并将生成的声音混合在一起以产生复合声音。

（你不制作 Java Applet 没关系——你仍然可以使用这些类......）

```
AudioClip clip = Applet.newAudioClip(resource);
clip.play(); 
```

（我在 Snow Leopard 上使用过这个没有任何问题。）

# php - 将php开关转换为javascript？

> ID：10167992
> 
> 赞同：-1
> 
> 时间：2012-04-16T02:15:46.583
> 
> 标签：php, javascript, switch-statement

我想得到一些关于将此 php 转换为 javascript 的建议。你可以用开关在javascript中做到这一点吗？

不确定如何在这种情况下使用 javascript 处理数组。我不能在 php 中使用它，只能在 javascript 中使用它。

```
if(isset($_POST['process'])){ 
$sch = $_POST['sch'];
$inches = $_POST['inches'];

switch($sch){

        case "40":
            $inch = array("1.5"=>1.610,"2.0"=>2.063,"2.5"=>2.469);
                foreach($inch as $k =>$v){
                    if($inches == $k){
                        echo "Result =" . $v;
                    }
                }
        break;            
        case "60":
            $inch = array("2.0"=>2.063);
                foreach($inch as $k =>$v){
                    echo $v;
                }
        break;
        case "80":
            $inch = array("2.5"=>2.469);
                foreach($inch as $k =>$v){
                    echo $v;
                }
        break;

    }
}
?>
<form action="" method="post">
<select name="inches" id="inches">
  <option value="1.5">1.500</option>
  <option value="2.0">2.000</option>
  <option value="2.5">2.500</option>
  <option value="3.0">3.000</option>
</select>
<select name="sch" id="sch">
  <option value="40">sch 40</option>
  <option value="60">sch 60</option>
  <option value="80">sch 80</option>
  <option value="100">sch 100</option>
</select>
<input name="process" type="submit" value="Submit" id="process" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:56:23.803

没有从 php 到 javascript 的直接转换，但当然可以在客户端使用相同的算法。

我试图用 jquery 重写 javascript 中的第一个案例。[看这里！](http://jsfiddle.net/usernamedemanded/qgcU2/3/)

我是一个度量标准的人，我无法理解这段代码的作用以及 sch 代表什么。如果您尝试进行转换，最好以数学方式进行转换，而不是使用数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:05:11.487

```
var sch = '',  // here assign value for sch
inches = ''; // here assign value for inches
switch (sch) {
case "40":
    inch = {
        "1.5": 1.610,
        "2.0": 2.063,
        "2.5": 2.469
    };
    $.each(inch,
    function(key, val) {
        if (inches == val) {
            console.log("Result =" + $v);
        }
    });
    break;
case "60":
    inch = {
        "2.0": 2.063
    };
    $.each(inch,
    function(key, val) {
        console.log("Result =" + $v);
    });
    break;
case "80":
    inch = {
        "2.5": 2.469
    };
    $.each(inch,
    function(key, val) {
        console.log("Result =" + $v);
    });
    break;
} 
```

# php - Smarty 模板，文档过期问题

> ID：10167995
> 
> 赞同：2
> 
> 时间：2012-04-16T02:15:56.490
> 
> 标签：php, smarty

我在我的 php 项目中使用 smarty 模板语言。它工作得很好，除了我得到：

> 文档已过期，此文档不再可用。

每次单击浏览器中的后退按钮时都会出错。我没有更改 php 或 smarty 中的任何设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:39:42.433

和聪明一点关系都没有。当通过 POST 请求（提交表单）生成上一页时，后退按钮会显示此消息。这是完全正常的行为。通过提交表单生成的页面不应通过后退按钮可用。要摆脱它，请使用 GET 方法（URL 中的查询字符串）。