# StackOverflow 问答 10847000-10847999

# iphone - 尝试从 sqlite 数据库中获取数据

> ID：10847001
> 
> 赞同：-3
> 
> 时间：2012-06-01T08:38:05.150
> 
> 标签：iphone, objective-c, ios, sqlite

下面是我的代码，我正在尝试从 my.sqlite 数据库中获取数据，但它没有执行我的 if 案例。它总是在 else 条件下进入。我在做什么错事？我无法执行我的 if 案例，即 if(sqlite3_prepare_v2(database, sqlQuerry, -1, &queerryStatement, NULL)==SQLITE_OK)

```
 sqlite3 *database;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *databasePath = [documentsDirectory stringByAppendingPathComponent:@"my.sqlite"];
    const char* dbPath=[databasePath UTF8String];
    if(sqlite3_open(dbPath, &database)==SQLITE_OK)
   {
      const char *sqlQuerry="SELECT * FROM Contacts;";
      sqlite3_stmt *querryStatement;
      if(sqlite3_prepare_v2(database, sqlQuerry, -1, &querryStatement, NULL)==SQLITE_OK)
      {
          NSLog(@"conversion successful....");
          while (sqlite3_step(querryStatement)==SQLITE_ROW) 
         {
             NSString *addressField = [[NSString alloc] initWithUTF8String:
                                      (const char *)    
                        sqlite3_column_text(querryStatement, 0)];

            NSString *phoneField = [[NSString alloc] initWithUTF8String:
                          (const char *) sqlite3_column_text(querryStatement, 1)];

            NSLog(@"DB ID :- %@",addressField);
            NSLog(@"DB NAME :- %@",phoneField);
        }
        sqlite3_reset(querryStatement);
    }
    else {
        NSLog(@"error while conversion....");
    }
    sqlite3_close(database);
} 
```

///////////////////////////////////////// ////////////////////////////////////我尝试使用fmdb并将其作为bellow：但我的* s和*结果对象是获取 nil 值并且未执行 while 语句

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docsPath = [paths objectAtIndex:0];

NSString *path = [docsPath stringByAppendingPathComponent:@"my.sqlite"];

FMDatabase* database = [FMDatabase databaseWithPath:path];
[database open];

FMResultSet *s = [database executeQuery:@"SELECT COUNT(*) FROM Contacts"];
while ([s next]) 
{
    int totalCount = [s intForColumnIndex:0];
    NSLog(@"Count : %i", totalCount);
}

FMResultSet *results = [database executeQuery:@"select * from Contacts"]; 
```

而（[结果下一个]）{

```
 NSString *contact_id  = [results stringForColumn:@"contact_id"]; 
    NSString *name = [results stringForColumn:@"name"]; //
    NSLog(@"User: %@ - %@",name, contact_id);
}
[database close]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:09:22.773

**用以下代码替换前*六行：***

```
sqlite3 *database;

NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);

NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *databasePath = [documentsDirectory stringByAppendingPathComponent:@"my.sqlite"];

NSLog(@"DATABASE PATH=%@",databasePath); 

NSFileManager *fn=[NSFileManager defaultManager];

NSError *error;

BOOL success=[fn fileExistsAtPath:databasePath];

    if(!success) {
         NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"my.sqlite"];
         success = [fn copyItemAtPath:defaultDBPath toPath:databasePath error:&error];
                 }

const char *dbPath=[databasePath UTF8String];

if(sqlite3_open(dbPath, &database)==SQLITE_OK) 
{

        //. . . . your code...// 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:44:53.643

如果您对任何 sqlite API 有问题，那么您需要使用`sqlite3_errmsg()`( [reference](http://www.sqlite.org/c3ref/errcode.html) ) 报告错误，这将帮助您跟踪问题。

更改您的代码以报告错误并使用日志输出更新您的问题：

```
if (sqlite3_open(dbPath, &database) == SQLITE_OK)
{
    ...
}
else
{
    NSLog("Failed to open database '%@': %s", databasePath, sqlite3_error(database));
} 
```

根据`sqlite3_open()`（[此处](http://www.sqlite.org/c3ref/open.html)）的文档：

> .... 否则返回错误代码。sqlite3_errmsg() 或 sqlite3_errmsg16() 例程可用于在任何 sqlite3_open() 例程失败后获取错误的英语描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:58:30.620

我发现我哪里出错了。我使用 Core Data 创建并插入数据到我的数据库中。在获取时，我想触发非常复杂的查询，所以我不得不切换到 SQLite。我做的一切都很好，但得到了错误：`Table not found`。

实际的问题是，`CoreData`我的数据库的每个表名都用“z”开头的名称更改，所以我的表名 Contacts 以类似的方式更改为 ZContacts 和列名。当我在 SQLite Manager 中打开我的 sqlite 数据库时，我发现我错了。

# android - Android：当用户点击按钮时，如何让我的页面滑动

> ID：10847004
> 
> 赞同：0
> 
> 时间：2012-06-01T08:38:13.887
> 
> 标签：android, button, swipeview

当用户单击按钮而不是轻击动作时，如何使我的页面滑动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:49:07.440

使用有意图的动画，您可以根据需要使用从左到右或从右到左的动画，反之亦然。

# c++ - 在 C++ 中使用高斯概率密度函数

> ID：10847007
> 
> 赞同：10
> 
> 时间：2012-06-01T08:38:23.823
> 
> 标签：c++, distribution, probability, gaussian, normal-distribution

首先，这是 pdf 高斯函数的正确 C++ 表示吗？

```
float pdf_gaussian = ( 1 / ( s * sqrt(2*M_PI) ) ) * exp( -0.5 * pow( (x-m)/s, 2.0 ) ); 
```

其次，我们做这样的事情有意义吗？

```
if(pdf_gaussian < uniform_random())
   do something
else
   do other thing 
```

**编辑：**你究竟想要达到的一个例子：

假设我有一个名为 Y1 的数据。然后一个名为 Xi 的新数据到达。我想看看我是否应该将 Xi 与 Y1 相关联，或者我是否应该将 Xi 保留为将称为 Y2 的新数据数据。这是基于新数据 Xi 和现有数据 Y1 之间的距离。如果 Xi 离 Y1 “远”，则 Xi 不会关联到 Y1，否则如果它“不远”，它将关联到 Y1。现在我想使用基于 Y 与过去已经与 Y 相关联的数据之间距离的平均值和标准差的高斯概率来建模这个“远”或“不远”。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T10:07:34.667

从技术上讲，

```
float pdf_gaussian = ( 1 / ( s * sqrt(2*M_PI) ) ) * exp( -0.5 * pow( (x-m)/s, 2.0 ) ); 
```

没有错，但可以改进。

首先，`1 / sqrt(2 Pi)`可以预先计算，并且`pow`与整数一起使用不是一个好主意：它可能使用`exp(2 * log x)`或专门用于浮点指数的例程而不是简单的`x * x`.

示例更好的代码：

```
float normal_pdf(float x, float m, float s)
{
    static const float inv_sqrt_2pi = 0.3989422804014327;
    float a = (x - m) / s;

    return inv_sqrt_2pi / s * std::exp(-0.5f * a * a);
} 
```

您可能希望将此作为模板而不是使用`float`：

```
template <typename T>
T normal_pdf(T x, T m, T s)
{
    static const T inv_sqrt_2pi = 0.3989422804014327;
    T a = (x - m) / s;

    return inv_sqrt_2pi / s * std::exp(-T(0.5) * a * a);
} 
```

这也允许您`normal_pdf`在`double`参数上使用（虽然它不是那么通用）。最后一个代码有一些注意事项，即您必须小心不要将它与整数一起使用（有一些变通方法，但这会使例程更加冗长）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T08:40:29.017

是的。`boost::random`具有高斯分布。

例如，请参阅这个问题：[如何使用升压正态分布类？](https://stackoverflow.com/questions/2078474/how-to-use-boost-normal-distribution-classes)

作为替代方案，有一种标准方法可以将两个均匀分布的随机数转换为两个正态分布的数字。

参见，例如这个问题：[Generate random numbers following a normal distribution in C/C++](https://stackoverflow.com/questions/2325472/generate-random-numbers-following-a-normal-distribution-in-c-c)

作为对您上次编辑的回应（请注意，问题与已编辑完全不同，因此我对原始问题的回答是无关紧要的）。我认为您最好先自己制定“使用高斯分布建模远或不远”的确切含义。然后用数学术语重新表达这种理解，然后才开始编程。就目前而言，我认为问题未得到充分说明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T08:47:33.493

使用 Box-Muller 变换。这将创建具有正态/高斯分布的值。

[http://en.wikipedia.org/wiki/Normal_distribution#Generating_values_from_normal_distribution](http://en.wikipedia.org/wiki/Normal_distribution#Generating_values_from_normal_distribution)

[http://en.wikipedia.org/wiki/Box_Muller_transform](http://en.wikipedia.org/wiki/Box_Muller_transform)

使用数学库进行编码并不是很复杂。

例如。

生成2个均匀数，用它们得到两个正态分布数。然后返回一个并保存另一个，以便您将它用于“下一个”随机数请求。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-01T10:20:55.663

从 C++ 11 开始，`std::normal_distribution`标准头文件中定义的`random`可用于生成高斯随机样本。更多信息可以在[这里](http://en.cppreference.com/w/cpp/numeric/random/normal_distribution)找到。

# android - 如何从我的 Arraylist 中删除与收件箱中的名称不匹配的名称？

> ID：10847010
> 
> 赞同：0
> 
> 时间：2012-06-01T08:38:29.763
> 
> 标签：android, string, arraylist, sms, contacts

这是我从设备中获取联系人姓名的代码。我遇到的问题是，在我的列表视图中，“元素”将显示联系人列表中的每个姓名。关于如何删除没有 SMS 的名称的任何想法？

```
 // converts contacts from cursor to arraylist
    nameList = new ArrayList<String>();
    cursor = getContacts();
    while(cursor.moveToNext()){

        nameList.add(cursor.getString(cursor.getColumnIndex(
                     ContactsContract.Data.DISPLAY_NAME )));
    }

    // convert arraylist to string array
    name = new String[nameList.size()];
    name = nameList.toArray(name);

    // new arraylist for after contacts with no messages are removed
    elements = new ArrayList<String>();

    //convert back to an arraylist
    for(int i = 0; i < name.length; i++){
        elements.add(name[i]);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:02:17.893

我想您需要检索短信列表，然后与每个联系人号码进行比较，以找到每个联系人的实际短信数量。一旦你有了，你可以从列表中删除有 0 条消息的联系人。 [这是关于使用 SMS 的一个很好的链接](http://mobdev.olin.edu/mobdevwiki/FrontPage/Tutorials/SMS%20Messaging)

# android - 有谁知道如何编码这种情况？用于计算游戏高分

> ID：10847015
> 
> 赞同：1
> 
> 时间：2012-06-01T08:38:38.547
> 
> 标签：android

有谁知道如何编码？

以下是游戏说明：

屏幕上显示 3 张图像。用户必须将图像放在正确的位置。当图像被拖到正确的位置时，游戏就结束了。

现在我的问题是，我如何编写代码来计算分数和总分。总分将是最高分。

请帮助我，我无法发布我的图像，这就是我用文字写的原因，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:46:25.543

根据我从你的问题中了解到的

> > 1.) 找出正确完成游戏所需的移动次数 n
> > 
> > 2.) 为每个动作分配点数，并根据最少的动作数进行排名。（3 步 -3 分，4 步 - 4 分等，所以 3 步比 4 步排名更好）

我认为对于这样的游戏来说，这比获得高分更好。

> 但是同样的逻辑也可以用于高分。（N 次移动，其中 N 是可能的最佳移动 - 100 分，每额外移动 10 分，依此类推）

我们可以对游戏进行更多解释。

# php - Mysql 查询以检查 3 个表的现有行

> ID：10847018
> 
> 赞同：0
> 
> 时间：2012-06-01T08:38:44.420
> 
> 标签：php, mysql, sql

我想要做的是将三个单独的表查询到由唯一引用标识的一行中。我并没有完全理解该`Join`子句，因为它似乎需要每个表中的某种相关数据。

我知道我可以做到这一点，但不能失去一点效率。任何帮助将不胜感激。

表结构

```
 package_id int(8),
    client_id int(8),
    unique reference varchar (40) 
```

每个表都具有基本相同的结构。我只需要知道如何查询所有三个，1 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:01:59.720

如果您有几个表共享相同或相似的定义，您可以使用 union 或 union all 将它们视为一个。此查询将从具有请求引用的每个表中返回行。我已经包含`OriginTable`了信息，以防您的代码需要参考原始表进行更新或其他内容。

```
select 'TableA' OriginTable, 
       package_id, 
       client_id
  from TableA
 where reference = ?
 union all
select 'TableB' OriginTable, 
       package_id, 
       client_id
  from TableB
 where reference = ?
 union all
select 'TableC' OriginTable, 
       package_id, 
       client_id
  from TableC
 where reference = ? 
```

您可以使用其他列扩展选择列表，前提是它们具有相同的数据类型，或者可以从第一次选择隐式转换为数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:04:26.037

```
array_of_tables[]; // contain name of each table

foreach(array_of_tables as $val)
{
    $query="select * from `$val` where $condition "; // $conditon 
    $result=mysqli_query($connection,$query);
    $result_row[]=mysqli_fetch_assoc($result); // if only one row going to return form each table
    //check resulting array ,for your row
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:56:42.997

假设您有 3 张桌子：

table1、table2 和 table3 的结构

```
package_id int(8),
client_id int(8),
unique reference varchar (40) 
```

假设列引用是唯一键。

然后你可以使用这个：

```
SELECT t1.exists_row ,t2.exists_row ,t3.exists_row FROM
(
    (SELECT COUNT(1) as exists_row FROM table1 t1 WHERE 
         t1.reference = @reference ) t1,
    (SELECT COUNT(1) as exists_row FROM table1 t2 WHERE 
         t2.reference = @reference ) t2,
    (SELECT COUNT(1) as exists_row FROM table1 t3 WHERE 
         t3.reference = @reference ) t3
) a 
```

;

将 @reference 替换为唯一键的实际值

或者当你提供的输出

```
SHOW CREATE TABLE 
```

我可以用实际查询重写 SQL

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T08:57:40.257

```
SELECT * FROM table1 t1 JOIN table2 t2 ON (t2.unique = t1.unique) JOIN table3 t3 ON (t3.unique = t1.unique) WHERE t1.unique = '?'; 
```

您可以使用这样的 JOIN，假设所有三个表都具有相同的唯一列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T09:03:53.817

完全可以使用 where 子句在表之间创建连接。事实上，这通常是我所做的，因为我发现它可以让你更清楚地了解你实际在做什么，如果你没有得到你期望的结果，你可以一点一点地调试它。

话虽如此，但是 join 写起来肯定要快得多！

请记住，我对 SQL 有点生疏，所以我可能忘记了记忆，并且我不会包含任何代码，因为您没有说您使用的是什么 DBMS，因为它们的代码都略有不同。

要记住的是，连接函数作用于其中具有相同数据（和类型）的列。

如果每个表都有同名的“加入”字段，那就容易多了，那么这应该是一个问题

```
join on <nameOfField> 
```

但是，如果您希望在不同的表中使用具有不同名称的字段，则需要列出完全限定的名称。即tableName.FieldName

如果您在自然、内部和外部、左侧和右侧方面遇到问题，您需要考虑一个维恩图，其中自然是表格之间的共同点。如果您只使用 2 个表，内部和外部等效于左和右（每个表在维恩图中都是一个圆圈），左和右是您选择的主要部分中列表中表的顺序（第一个是左边，第二个是右边）。

当您添加第三个表格时，您可以使用这些关键字选择任何交叉部分。

然而，我总是发现更容易进行主选择并创建一个临时表，然后使用这个临时表执行我的下一个连接（因此实际上只需要再次使用自然或左右）。我再次发现这更容易调试。

最好的办法是进行实验，看看你会得到什么回报。如果没有您的表格图表，这是我能提供的最好的。

简单来说...

嵌套选择 where field = (从 table where field = 中选择)

和临时表

（我认为）更容易调试......但需要更多的写作！

大卫。

# javascript - 为什么这个 javascript 不使用复选框启用文本框？

> ID：10847019
> 
> 赞同：0
> 
> 时间：2012-06-01T08:38:58.367
> 
> 标签：javascript, jsp

再次遇到问题实际上我有以下 jsp 代码，其中我有几个文本框，我通过使用属性 disabled="disabled" 禁用了这些文本框。现在的问题是我将使用迭代器从每个文本框中的数据库中获取的每条记录，该迭代器迭代从数组列表中的数据库添加的值。如果数据库返回多条记录，则使用该复选框我可以启用文本框，但如果数据库结果集仅返回一条记录然后我无法启用文本框并抛出以下错误：消息：'document.f1.chk'为空或不是对象行：26 字符：10 代码：0

```
<script type="text/javascript">

function enable()
{
    for(i=0;i<document.preapp.chk.length;i++)
        {
        if(document.preapp.chk[i].checked==true)

            {
            document.preapp.id[i].disabled=false;
            document.preapp.vname[i].disabled=false;
            document.preapp.comp[i].disabled=false;
            document.preapp.cont[i].disabled=false;
            document.preapp.wtm[i].disabled=false;
            document.preapp.intime[i].disabled=false;

            }
        else

            if(document.preapp.chk[i].checked==false)
            {
            document.preapp.id[i].disabled=true;
            document.preapp.vname[i].disabled=true;
            document.preapp.comp[i].disabled=true;
            document.preapp.cont[i].disabled=true;
            document.preapp.wtm[i].disabled=true;
            document.preapp.intime[i].disabled=true;
            }
        }
}

</script>

<CENTER><a href="../vm/form.jsp ">Back to Search</a></CENTER>
<form method="post" action="" name="preapp">

<table border="1" align="center" width="100%">
<%

Iterator itr;
try
{
ArrayList al=(ArrayList)request.getAttribute("sq");
int i=0;
for(itr=al.iterator();itr.hasNext();)
    {
i=i+1;

%>
        <tr>
            <td></td><td><input type="checkbox" name="chk"  onclick="enable(this)" ></td></tr></tr>
            <tr><td>Id</td><td><input type="text" name="id" value="<%=itr.next()%>" disabled="disabled" size="100%"></td></tr>
            <tr><td>Visitor Name</td><td><input type="text" name="vname" value="<%=itr.next()%>" disabled="disabled" size="100%"></td></tr>
            <tr><td>Comapny</td><td><input type="text" name="comp" value="<%=itr.next()%>" disabled="disabled" size="100%"></td></tr>
            <tr><td>Contact</td><td><input type="text" name="cont" value="<%=itr.next()%>" disabled="disabled" size="100%"></td></tr>
            <tr><td>Meeting Scheduled With</td><td><input type="text" name="wtm" value="<%=itr.next()%>" disabled="disabled" size="100%"></td></tr>
            <tr><td>Entry Made On</td><td><input type="text" name="intime" value="<%=itr.next()%>" disabled="disabled" size="100%"></td></tr>
            <tr><td></td>
        </tr>

        <tr>

        </tr>

<%

    }

}
catch(Exception e)
{
e.printStackTrace();
System.out.println(e.getMessage());
}

%> 
```

如何解决这个问题？请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:41:55.650

它就像魅力一样，除非你只有一个 TR 块。

在这种情况下，.chk 没有“长度”属性！

您应该单独考虑这种情况：

```
function enable()
{

    if(document.preapp.chk.length == null)
    {

        disabledState = !document.preapp.chk.checked

        document.preapp.id.disabled=disabledState;
        document.preapp.vname.disabled=disabledState;
        document.preapp.comp.disabled=disabledState;
        document.preapp.cont.disabled=disabledState;
        document.preapp.wtm.disabled=disabledState;
        document.preapp.intime.disabled=disabledState;

    } else {

        for(i=0;i<document.preapp.chk.length;i++)
        {

            disabledState = !document.preapp.chk[i].checked

            document.preapp.id[i].disabled=disabledState;
            document.preapp.vname[i].disabled=disabledState;
            document.preapp.comp[i].disabled=disabledState;
            document.preapp.cont[i].disabled=disabledState;
            document.preapp.wtm[i].disabled=disabledState;
            document.preapp.intime[i].disabled=disabledState;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:15:52.537

一些建议：不要将元素的属性设置为 true 或 false，而是尝试使用`setAttribute`and`removeAttribute`方法：

```
document.preapp.id[i].disabled=true;
//replace with:
document.preapp.id[i].setAttribute('disabled','disabled');
//to enable:
document.preapp.id[i].removeAttribute('disabled'); 
```

你做事的方式在 99.9% 的情况下都能正常工作。不过，我还没有看到上面的代码失败（我遇到了真/假方法的问题）。

下一个：您发布的错误消息包含非常有用的信息：检查原始代码的第 26 行。在您的代码段中找不到“document.f1.chk”，因此我无法检查您的代码中是否存在拼写错误或其他可能的问题。

您也将元素传递给 enable 函数。那么，为什么要遍历所有元素，检查页面上的所有元素？

```
function enable(elem)
{
    var i = document.preapp.indexOf(elem);//
    if (elem.checked === true)
    {
        document.preapp.id[i].removeAttribute('disabled');
        //...
    }
    //functions have properties, exploit them:
    if (typeof enable.previous === 'undefined' || enable.previous === i)
    {
        enable.previous = i;
        return true;
    }
    document.preapp.id[enable.previous].setAttribute('disabled','disabled');
    //...
    enable.previous = i;
} 
```

enable函数的最后一段存储了刚刚被点击的checkbox的索引，这样当之前已经点击了enable函数时，就不需要再循环遍历所有元素：`enable.previous`保存上次点击的checkbox的索引.

最后：该块没有左括号或右括号`else`，并且有一行额外的空格。其他没有括号也可以正常工作，但只分支一行。在您的代码中，这一行是空白的：要么删除 else，要么添加括号。

PS：也许小提琴会有助于清楚地了解情况？

* * *

正如 Teejay 指出的那样，在唯一名称的情况下，直接引用元素，而不是传递 nodesList。

# iphone - 是在 iOS 4 上运行的使用故事板的 iPhone / iPad 应用程序

> ID：10847023
> 
> 赞同：0
> 
> 时间：2012-06-01T08:39:16.243
> 
> 标签：iphone, xcode, ipad, storyboard

文件“故事板”似乎是 XCode 4 中出现的新奇事物，但实际上它是 iOS 5 中的新事物。我的问题是：iPhone / iPad 创建的故事板项目是否不仅适用于 iOS 4.3、4.1 等早期系统， 4.0、3甚至iPhone、3G等？

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T09:21:37.957

故事板是在 iOS 5 中引入的，因此不能在 iOS 4 或更低版本上使用。

此外，Xcode 的版本确实反映了所使用的 iOS SDK 的版本。设备版本也不会告诉您有关它正在运行的 iOS 版本的任何信息。（除非你没有它可以运行的最高版本）

[`ARC`](https://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)是一种节省开发人员编写代码时间的新方法，因为您不必自己释放对象。编译器会处理这个问题。`ARC`支持任何运行 iOS 4.0 或更高版本的设备。

# c# - 如何进行此 LINQ 查询？

> ID：10847027
> 
> 赞同：2
> 
> 时间：2012-06-01T08:39:32.373
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

我有一个包含所有顾问的下拉列表。

这是我用于此 LINQ 查询的实体：

![在此处输入图像描述](../Images/adbc97a94102553150ee1dcaa43509b0.png)

我想要做的是获取所有具有 Complete_date 设置的目标卡的顾问 ID。我不知道该怎么做。

现在，我有以下 LINQ 查询来获取所有顾问 ID。

```
public List<Consultant> GetAllConsultantsByID()
{
    var allConsultants = from id in db.Consultant
                         select id;
    return allConsultants.ToList();
} 
```

任何形式的帮助表示赞赏

提前致谢

更新：

这就是我必须在我的 Get Action 方法中使用我的 Linq 方法的方式：

```
var consultants = repository.GetAllConsultantsByID();
model.Consultants = new SelectList(consultants, "Id", "Name"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:43:47.693

您可以使用`Consultant.GoalCard`导航属性和[`Any`](http://msdn.microsoft.com/en-us/library/bb534338.aspx)扩展方法：

```
var query = from con in db.Consultant
            where con.GoalCard.Any(card => card.Completed_Date != null)
            select con;
return query.ToList(); 
```

`Consultant.Goalcard``GoalCards`将所有的公开`Consultant`为可查询的属性。因此，您也可以对此执行查询。（此示例假设`Completed_Date`可以为空）

注意：看到 a`Consultant`可以有多个`GoalCard`s，您可能希望将`Consultant`的`GoalCard`导航属性重命名为`GoalCards`（以明确可以有多个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:43:35.207

现在假设`Complete_Date`是 type `DateTime?`，你可以这样做：

```
public IEnumerable<Consultant> GetConsultantIds()
{
     return db.Consultant.Where(c => c.GoalCard != null && c.GoalCard.Completed_Date.HasValue).Select(c => c.Id).AsEnumerable(); 
} 
```

[编辑]

由于`GoalCard`是一个集合（误导性名称:)），您可以执行类似的操作来获取在任何卡片上设置了至少一个已完成日期的顾问的 ID：

```
public IEnumerable<int> GetConsultantIds()
{
     return db.Consultant.Where(c => c.GoalCard != null && c.GoalCard.Any(card => card.Completed_Date.HasValue)).Select(c => c.Id).AsEnumerable(); 
} 
```

这仅适用于 ID 列表，适用于`Consultant`符合条件的对象列表：

```
public IEnumerable<Consultant> GetConsultantIds()
{
     return db.Consultant.Where(c => c.GoalCard != null && c.GoalCard.Any(card => card.Completed_Date.HasValue)).AsEnumerable(); 
} 
```

# javascript - 如何用 jQuery 提取单个句子？

> ID：10847031
> 
> 赞同：2
> 
> 时间：2012-06-01T08:39:54.277
> 
> 标签：javascript, jquery, split

我试图从一堆段落中提取两个句子，但我被卡住了......基本上，这些段落看起来像这样：

```
<p class="some_paragraph">This is a sentence. Here comes another sentence. A third sentence.</p>
<p class="some_paragraph">Another sentence here. Interesting information. Very interesting.</p>
<p class="some_paragraph">This is a sentence. Here comes another sentence. A third sentence.</p> 
```

我需要做的是，在这三个段落的所有 9 个句子中找到两个“最短”的句子。必须将两个提取的句子放入以下范围：

```
<span class="span1">Shortest sentence comes here</span>
<span class="span2">Second shortest sentence comes here</span> 
```

我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:52:20.713

```
var snt = [];
$('.some_paragraph').each(function() {
    var text = $(this).text();
    text.replace(/[A-Z][^.]+\./g, function(s) {
        if (snt.length < 2) {
            snt.push(s);
        }
        else {
           snt[+(snt[0].length <= snt[1].length)] = s;
        }
    });
});

console.log(snt); // outputs the two shortest sentences

/* creating two span with shortest sentences */
snt.map(function(el, i) {
   $('<span />', { class: "span" + (i+1), text: el }).appendTo($('body')); 
});

/**
 * Result:
 *  
 * <span class="span1">Very interesting.</span>
 * <span class="span2">A third sentence.</span>
 */ 
```

小提琴示例：http: [//jsfiddle.net/4La9y/2/](http://jsfiddle.net/4La9y/2/)

为了清楚起见，这个 critic 声明`snt[+(snt[0].length <= snt[1].length)] = s;`意味着如果我已经用两个句子填充了数组，那么你找到的下一个将被存储在`snt[0]`if`snt[1]`是最短的地方，反之亦然

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T08:48:57.380

```
//First grab all text

var t = $('.some_paragraph').text();
var sentences = t.split('.');
sentences.sort(function(a, b) {
    return a.length - b.length;
});
//sortest sentence
$('.span1').text(sentences[1]);
$('.span2').text(sentences[2]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:57:50.147

```
var smallest = 0;
            var smaller = 0;
            var bigger = 0;
            var smallest_sen;
            var smaller_sen;

            $('p.some_paragraph').each(function(){
                plength = $(this).text().length;
                if(smallest == 0){
                smallest = plength;
                smallest_sen = $(this).text();
                }else if(smallest > plength){
                    smaller_sen = smallest_sen;
                    smaller = smallest;
                    smallest = plength;
                    smallest_sen = $(this).text();
                }
            });
            alert(smallest_sen);
            alert(smaller_sen); 
```

# asp.net-mvc-3 - 使用路由和视图的 ASP.NET MVC 3 本地化

> ID：10847032
> 
> 赞同：1
> 
> 时间：2012-06-01T08:40:00.907
> 
> 标签：asp.net-mvc-3, razor, localization, multilingual

我已经搜索并尝试了许多本地化方法，但都不是我想要的。基本上，我希望我的网址是这样的

*   www.myweb.com <== 默认语言（即英语）
*   www.myweb.com/promotion
*   www.myweb.com/th/promotion <== 当地语言（泰语）
*   www.myweb.com/cn/promotion <== 当地语言（中文）

然后我希望这些 url 映射到不同的视图结构，如下所示

```
/Views
    /_Localization
        /cn
            /Home
                /About.cshtml
                /Index.cshtml
            /Shared
                /_Layout.cshtml
                /Error.cshtml
        /th
            /Home
                /About.cshtml
            /Shared
    /Home
        /About.cshtml
        /Index.cshtml
    /Shared
        /_Layout.cshtml
        /_LogOnPartial.cshtml
        /Error.cshtml
    _ViewStart.cshtml
    Web.config 
```

如您所见， Thai 没有它自己的`Index.cshtml`,`_Layout.cshtml`和`Error.cshtml`. 所以，我希望它回退到使用默认值。但是中国人会自己用。

我试过`MapRoute`喜欢这个

```
routes.MapRoute(
    "DefaultLocal",
    "{lang}/{controller}/{action}/{id}",
    new { lang = "th", controller = "Home", action = "Index", id = UrlParameter.Optional }
);

routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

但我不知道如何指向不同的视图结构。在这个例子中，[Brian Reiter](http://brianreiter.org/2011/03/23/simple-asp-net-mvc-globalization-with-graceful-fallback/)，它`Cookie`不使用 url。

那么，我怎样才能做到这一点。请注意，我使用 RazorViewEngine。 **感谢您的任何帮助和想法。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T07:44:59.610

由于需要大量代码，我只会说明如何完成它的想法。

您可以`RazorViewEngine`像这样子类化：

```
public class I18NRazorViewEngine : RazorViewEngine
{
    public I18NRazorViewEngine() : this(null)
    { }

    protected string[] I18NAreaViewLocationFormats;
    protected string[] I18NAreaMasterLocationFormats;
    protected string[] I18NAreaPartialViewLocationFormats;
    protected string[] I18NViewLocationFormats;
    protected string[] I18NMasterLocationFormats;
    protected string[] I18NPartialViewLocationFormats;

    public I18NRazorViewEngine(IViewPageActivator viewPageActivator)
        : base(viewPageActivator)
    {
        this.I18NAreaViewLocationFormats = new string[]
        {
            "~/Areas/{3}/{2}/Views/{1}/{0}.cshtml",
            "~/Areas/{3}/{2}/Views/{1}/{0}.vbhtml",
            "~/Areas/{3}/{2}/Views/Shared/{0}.cshtml",
            "~/Areas/{3}/{2}/Views/Shared/{0}.vbhtml"
        };

        this.I18NAreaMasterLocationFormats = new string[]
        {
            "~/Areas/{3}/{2}/Views/{1}/{0}.cshtml",
            "~/Areas/{3}/{2}/Views/{1}/{0}.vbhtml",
            "~/Areas/{3}/{2}/Views/Shared/{0}.cshtml",
            "~/Areas/{3}/{2}/Views/Shared/{0}.vbhtml"
        };

        this.I18NAreaPartialViewLocationFormats = new string[]
        {
            "~/Areas/{3}/{2}/Views/{1}/{0}.cshtml",
            "~/Areas/{3}/{2}/Views/{1}/{0}.vbhtml",
            "~/Areas/{3}/{2}/Views/Shared/{0}.cshtml",
            "~/Areas/{3}/{2}/Views/Shared/{0}.vbhtml"
        };

        this.I18NViewLocationFormats = new string[]
        {
            "~/Views/{2}/{1}/{0}.cshtml",
            "~/Views/{2}/{1}/{0}.vbhtml",
            "~/Views/{2}/Shared/{0}.cshtml",
            "~/Views/{2}/Shared/{0}.vbhtml"
        };

        this.I18NMasterLocationFormats = new string[]
        {
            "~/Views/{2}/{1}/{0}.cshtml",
            "~/Views/{2}/{1}/{0}.vbhtml",
            "~/Views/{2}/Shared/{0}.cshtml",
            "~/Views/{2}/Shared/{0}.vbhtml"
        };

        this.I18NPartialViewLocationFormats = new string[]
        {
            "~/Views/{2}/{1}/{0}.cshtml",
            "~/Views/{2}/{1}/{0}.vbhtml",
            "~/Views/{2}/Shared/{0}.cshtml",
            "~/Views/{2}/Shared/{0}.vbhtml"
        };
    }

    public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
    {
        var langValue = controllerContext.Controller.ValueProvider.GetValue("lang");
        if (langValue == null || String.IsNullOrEmpty(langValue.AttemptedValue))
            return base.FindView(controllerContext, viewName, masterName, useCache);

        //Code here
    }

    public override ViewEngineResult FindPartialView(ControllerContext controllerContext, string partialViewName, bool useCache)
    {
        var langValue = controllerContext.Controller.ValueProvider.GetValue("lang");
        if (langValue == null || String.IsNullOrEmpty(langValue.AttemptedValue))
            return base.FindPartialView(controllerContext, partialViewName, useCache);

        //Code here
    }        
} 
```

接下来你应该做的是查看`VirtualPathProviderViewEngine`FindView 和实现的内部`FindPartialView`。反映的代码是这样的：

```
public virtual ViewEngineResult FindPartialView(ControllerContext controllerContext, string partialViewName, bool useCache)
{
    if (controllerContext == null)
    {
        throw new ArgumentNullException("controllerContext");
    }
    if (string.IsNullOrEmpty(partialViewName))
    {
        throw new ArgumentException(MvcResources.Common_NullOrEmpty, "partialViewName");
    }
    string requiredString = controllerContext.RouteData.GetRequiredString("controller");
    string[] searchedLocations;
    string path = this.GetPath(controllerContext, this.PartialViewLocationFormats, this.AreaPartialViewLocationFormats, "PartialViewLocationFormats", partialViewName, requiredString, "Partial", useCache, out searchedLocations);
    if (string.IsNullOrEmpty(path))
    {
        return new ViewEngineResult(searchedLocations);
    }
    return new ViewEngineResult(this.CreatePartialView(controllerContext, path), this);
} 
```

和

```
public virtual ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
{
    if (controllerContext == null)
    {
        throw new ArgumentNullException("controllerContext");
    }
    if (string.IsNullOrEmpty(viewName))
    {
        throw new ArgumentException(MvcResources.Common_NullOrEmpty, "viewName");
    }
    string requiredString = controllerContext.RouteData.GetRequiredString("controller");
    string[] first;
    string path = this.GetPath(controllerContext, this.ViewLocationFormats, this.AreaViewLocationFormats, "ViewLocationFormats", viewName, requiredString, "View", useCache, out first);
    string[] second;
    string path2 = this.GetPath(controllerContext, this.MasterLocationFormats, this.AreaMasterLocationFormats, "MasterLocationFormats", masterName, requiredString, "Master", useCache, out second);
    if (string.IsNullOrEmpty(path) || (string.IsNullOrEmpty(path2) && !string.IsNullOrEmpty(masterName)))
    {
        return new ViewEngineResult(first.Union(second));
    }
    return new ViewEngineResult(this.CreateView(controllerContext, path, path2), this);
} 
```

两种方法都依赖于私有`GetPath`方法：

```
private string GetPath(ControllerContext controllerContext, string[] locations, string[] areaLocations, string locationsPropertyName, string name, string controllerName, string cacheKeyPrefix, bool useCache, out string[] searchedLocations)
{
    searchedLocations = VirtualPathProviderViewEngine._emptyLocations;
    if (string.IsNullOrEmpty(name))
    {
        return string.Empty;
    }
    string areaName = AreaHelpers.GetAreaName(controllerContext.RouteData);
    List<VirtualPathProviderViewEngine.ViewLocation> viewLocations = VirtualPathProviderViewEngine.GetViewLocations(locations, (!string.IsNullOrEmpty(areaName)) ? areaLocations : null);
    if (viewLocations.Count == 0)
    {
        throw new InvalidOperationException(string.Format(CultureInfo.CurrentCulture, MvcResources.Common_PropertyCannotBeNullOrEmpty, new object[]
        {
            locationsPropertyName
        }));
    }
    bool flag = VirtualPathProviderViewEngine.IsSpecificPath(name);
    string text = this.CreateCacheKey(cacheKeyPrefix, name, flag ? string.Empty : controllerName, areaName);
    if (useCache)
    {
        return this.ViewLocationCache.GetViewLocation(controllerContext.HttpContext, text);
    }
    if (!flag)
    {
        return this.GetPathFromGeneralName(controllerContext, viewLocations, name, controllerName, areaName, text, ref searchedLocations);
    }
    return this.GetPathFromSpecificName(controllerContext, name, text, ref searchedLocations);
} 
```

你应该做的是重新实现它。大多数代码您可以重用，但您应该创建自己的方法而不是`VirtualPathProviderViewEngine.GetViewLocations`. 这里它的反映代码：

```
private static List<VirtualPathProviderViewEngine.ViewLocation> GetViewLocations(string[] viewLocationFormats, string[] areaViewLocationFormats)
{
    List<VirtualPathProviderViewEngine.ViewLocation> list = new List<VirtualPathProviderViewEngine.ViewLocation>();
    if (areaViewLocationFormats != null)
    {
        for (int i = 0; i < areaViewLocationFormats.Length; i++)
        {
            string virtualPathFormatString = areaViewLocationFormats[i];
            list.Add(new VirtualPathProviderViewEngine.AreaAwareViewLocation(virtualPathFormatString));
        }
    }
    if (viewLocationFormats != null)
    {
        for (int j = 0; j < viewLocationFormats.Length; j++)
        {
            string virtualPathFormatString2 = viewLocationFormats[j];
            list.Add(new VirtualPathProviderViewEngine.ViewLocation(virtualPathFormatString2));
        }
    }
    return list;
} 
```

您还可以重用大部分代码，但您应该使用自己的类，而不是 VirtualPathProviderViewEngine.ViewLocation 和 VirtualPathProviderViewEngine.AreaAwareViewLocation。他们可能是这样的：

```
class ViewLocation
{
    protected string _virtualPathFormatString;
    public ViewLocation(string virtualPathFormatString)
    {
        this._virtualPathFormatString = virtualPathFormatString;
    }
    public virtual string Format(string viewName, string controllerName, string areaName, string lang)
    {
        return string.Format(CultureInfo.InvariantCulture, this._virtualPathFormatString, new object[]
        {
            viewName,
            controllerName,
                    lang
        });
    }
} 
```

和：

```
class AreaAwareViewLocation : VirtualPathProviderViewEngine.ViewLocation
{
    public AreaAwareViewLocation(string virtualPathFormatString) : base(virtualPathFormatString)
    {
    }
    public override string Format(string viewName, string controllerName, string areaName, string lang)
    {
        return string.Format(CultureInfo.InvariantCulture, this._virtualPathFormatString, new object[]
        {
            viewName,
            controllerName,
            areaName,
                    lang
        });
    }
} 
```

然后当您调用`Format`方法时，您应该将`langValue.AttemptedValue`（它来自第一个代码块的范围`FindView`和`FindPartialView`）传递给 lang 参数。通常它会被调用`VirtualPathProviderViewEngine.GetPathFromGeneralName`。

主要建议是使用 ILSpy 或其他反汇编程序来探索 System.Web.Mvc 的代码（甚至更好 - 下载其源代码）。目标是重新实现`FindView`和`FindPartialView`. 提供的其余代码是为了说明它是如何在 mvc 框架中完成的。

寻找在我们的新视图引擎中声明的数组而不是那些已经存在并被默认类使用的没有 I18N 前缀的数组也很重要

尽管答案是间接的，但希望它会有所帮助。如果您遇到任何困难，您可以提出其他问题。

PS 不要忘记在 global.asax.cs 中注册您的视图引擎，之后它将被开发。

```
protected virtual void Application_Start()
{
   ViewEngines.Engines.Clear();
   ViewEngines.Engines.Add(new I18NRazorViewEngine());
} 
```

# node.js - 我无法在 Windows 上使用“vows test/*”命令运行测试。如何使用它？节点.js

> ID：10847033
> 
> 赞同：3
> 
> 时间：2012-06-01T08:40:04.630
> 
> 标签：node.js, testing, vows

我已将 vows 安装为我的项目的模块，并将路径“node_modules\vows\bin”添加到我的 windows vista 环境路径变量中。

**注意：**我还将“node_modules\vows\bin\vows”重命名为 vows.exe，因为没有扩展名我会收到此错误：“vows”不被识别为内部或外部命令、可运行程序或批处理文件。

现在，无论我在 Windows 的 cmd 中放置“誓言”，什么都没有发生，我 cd 进入我的测试文件夹并运行“vows myFirstTest.js”，但没有任何反应。（当我说什么都没有发生时，我在 cmd 中的光标会移到顶部然后返回到它的原始位置并且它会永远这样做，因此每次我在 cmd 中尝试 vows 命令时，我都必须关闭 cmd 以运行另一个命令）。

我在做什么坏事？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T12:54:10.047

NPM 擅长全局安装包并为每个操作系统（UNIX-ish + Windows）制作可执行文件，因此请继续以下操作：

```
npm install -g vows 
```

# php - 停止 Curl 重定向到新页面

> ID：10847044
> 
> 赞同：1
> 
> 时间：2012-06-01T08:40:50.063
> 
> 标签：php, curl

我正在尝试向域发出 curl 请求：[http://xyz.com](http://xyz.com)。这是我的代码。

```
 $ch = curl_init();

    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_URL, $strURL);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $arrData);

    curl_exec($ch); 
```

在发出请求时，它会被重定向到其中的某个页面，并且不会返回到我的页面。

我怎样才能停止在 curl 请求中间被重定向。

对不起各位...

在提出建议后，我尝试将 CURLOPT_FOLLOWLOCATION 设置为 0 并且它起作用了......这是我的错误，我没有删除下一行标题重定向并且它继续传递和传递......

抱歉，是我的错。

再一次... CURLOPT_FOLLOWLOCATION 到 0 不会转移...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:48:57.903

尝试使用该`CURLOPT_MAXREDIRS`选项。

**CURLOPT_MAXREDIRS**：要遵循的 HTTP 重定向的最大数量。将此选项与 CURLOPT_FOLLOWLOCATION 一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:02:36.413

我认为因为该页面会检查您的用户代理或设置 cookie，所以您需要尽可能地尝试模仿网络浏览器。

就像添加用户代理一样：

```
 curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_2) AppleWebKit/535.7 (KHTML, like Gecko) Chrome/16.0.912.63 Safari/535.7'); 
```

或尝试设置cookie：

```
 $cookieJar = tempnam ("/tmp", "CURLCOOKIE");
    curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookieJar); 
```

如果您提供网址，也许我可以提供更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T09:17:42.247

尝试玩：

1.  `CURLOPT_RETURNTRANSFER`,

2.  `CURLOPT_FOLLOWLOCATION`,

3.  `CURLOPT_COOKIEJAR`,

4.  `CURLOPT_COOKIEFILE`

并考虑记录，使用它进行调试更容易！

```
$handle = fopen('log.tmp', 'w');
curl_setopt($ch, CURLOPT_VERBOSE, 1);
curl_setopt($ch, CURLOPT_STDERR, $handle); 
```

# eclipse - 如何找到安装在 Eclipse IDE 中的 Scala 版本？

> ID：10847049
> 
> 赞同：6
> 
> 时间：2012-06-01T08:41:18.363
> 
> 标签：eclipse, scala, eclipse-plugin, scala-ide

问题是如何找到安装在 Eclipse IDE 中的 Scala 模块的版本？我知道我已经安装了 2.9.xxx 的东西，但我想继续跟踪版本号以防将来更新，例如，查找正确的 API 手册。

还是有一种通用的方法可以在 Eclipse IDE 中查看已安装插件的版本？

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-01T08:50:40.960

Help->About Eclipse->[scala-ide.org Button]->Plugin-Details: 在那里你可以看到带有 Scala 版本的插件“Scala Library for Eclipse”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T08:49:55.920

您可以在帮助菜单中查看已安装的插件版本 | 关于日食 | 安装细节 | 插件。

# sql-server - 数据集的 SSRS 查询执行失败

> ID：10847054
> 
> 赞同：28
> 
> 时间：2012-06-01T08:41:35.970
> 
> 标签：sql-server, sql-server-2008, reporting-services, ssrs-2008

刚刚将我的项目部署到我的报告服务器上。

我有多个数据集引用该服务器上数据库中存在的视图。

当我尝试进入任何报告部分时，我收到以下消息：

```
An error has occurred during report processing. (rsProcessingAborted)
Query execution failed for dataset 'dataset1'. (rsErrorExecutingCommand)
For more information about this error navigate to the report server on the local server machine, or enable remote errors 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-01T10:18:19.903

我启用了远程错误以查明问题。

我发现特定数据集中的一列（我的一个视图）正在引发错误。

因此，使用“SQL Delta”工具，我将数据库的开发版本与报告服务器上的实时版本进行了比较。我注意到其中一个视图在开发服务器上有一个额外的列，它不在数据库的实时版本上。

SQL Delta 生成了我需要运行的脚本来更新我的实时数据库上的视图。

我运行了这个脚本，重新运行了报告，一切正常。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-21T11:05:49.860

我遇到了类似的错误消息。我能够在不启用远程错误的情况下修复它。

在 Report Builder 3.0 中，当我使用**Run**按钮运行报表时，出现错误警报，说

```
An error has occurred during report processing. (rsProcessingAborted)
[OK] [Details...] 
```

按详细信息按钮给了我一个文本框，我在其中看到了以下文本：

```
For more information about this error navigate to the report server
on the local server machine, or enable remote errors
----------------------------
Query execution failed for dataset 'DataSet1'. (rsErrorExecutingCommand) 
```

我感到困惑和沮丧，因为我的报告没有名为“ `DataSet1`”的数据集。`.rdl`可以肯定的是，我什至在文本编辑器中打开了文件。过了一会儿，我注意到在我可以阅读的下方的文本框中有更多的文本。完整的错误信息是：

```
For more information about this error navigate to the report server
on the local server machine, or enable remote errors
----------------------------
Query execution failed for dataset 'DataSet1'. (rsErrorExecutingCommand)

----------------------------
The execution failed for the shared data set 'CustomerDetailsDataSet'.  
(rsDataSetExecutionError)
----------------------------
An error has occurred during report processing. (rsProcessingAborted) 
```

我*确实*有一个名为“ `CustomerDetailsDataSet`”的共享数据集。我在 SQL Server Management Studio 中打开了查询（这是一个以文本模式输入的完整 SQL 查询），并在那里运行它。我收到错误消息，清楚地指向某个表，我一直在使用的列已被重命名和更改。

从那时起，修改我的查询以使其与新列一起使用，然后将该修改粘贴到共享数据集“ `CustomerDetailsDataSet`”中，然后轻推报表生成器中的报表以识别对共享数据集的更改，这很简单。

在此修复后，我的报告不再触发此错误。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-06T13:12:06.607

我遇到了同样的问题，它与未授予部分表的安全性有关。查看您的用户有权访问报告使用的数据库/表/视图/函数等。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-26T18:00:52.430

我刚刚处理了同样的问题。确保您的查询列出完整的源名称，不使用快捷方式。Visual Studio 可以识别快捷方式，但您的 Reporting Services 应用程序可能无法识别您的数据应该来自哪些表。希望有帮助。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-07-02T15:57:21.563

像这里的许多其他人一样，我有同样的错误。在我的情况下，这是因为它使用的存储过程的执行权限被拒绝。当与数据源关联的用户被授予该权限时，该问题已得到解决。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-11-27T17:27:19.050

我的解决方案来自[GShenanigan](https://stackoverflow.com/q/10847054/#comment14126464_10847054)：

> 您需要查看 SSRS 服务器上的日志文件以获取更多详细信息。它们将位于以下位置：“C:\Program Files (x86)\Microsoft SQL Server\MSRS10_50.DEV\Reporting Services\LogFiles\”

我能够在视图引用的数据库表上找到与视图所在位置不同的权限问题。我一直专注于视图数据库的权限，因此这有助于查明错误所在。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-09-18T18:52:20.383

我有类似的问题显示错误

> 有关此错误的详细信息，请导航到本地服务器计算机上的报表服务器，或启用远程错误数据集“PrintInvoice”的查询执行失败。

解决方案：1）在某些情况下，错误可能与数据集有关，您始终可以通过转到数据集属性并选择“查询设计器”并尝试“运行”来检查数据集是否填充了您期望的确切数据，如果您可以成功地提取您期望的字段，那么您可以确定数据集没有任何问题，这将我们带到下一个解决方案。

2）即使错误消息显示“查询数据集执行失败”，另一个可能的机会是数据源连接，请确保您已连接到具有所需表的正确数据源并且您有权访问该数据源。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-12-11T17:24:02.330

非常感谢我找到了这个很棒的帖子。至于我的情况，执行存储过程的用户没有`EXECUTE`权限。`EXECUTE`解决方案是通过将以下代码添加到存储过程的末尾来为存储过程中的用户授予权限。

```
GRANT EXECUTE ON dbo.StoredProcNameHere TO UsernameRunningreports
GO 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-11-05T19:46:00.743

在我的情况下，我为数据集创建了一个新的 SSRS 报告和新的存储过程。我忘记将存储过程添加到有权执行它的数据库角色中。一旦我使用 EXECUTE 将权限添加到 SQL 数据库角色，一切都很好！

用户遇到的错误消息是*“客户端呈现期间发生错误。报表处理期间发生错误 (rsProcessingAborted)。数据集“DataSet1”的查询执行失败。(rsErrorExecutingCommand) 更多信息..."*

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-02-07T19:29:59.830

BIGHAP：解决此问题的简单方法。

在将 SharePoint 列表用作数据源时，我遇到了同样的问题，并阅读了上面非常有帮助的博客。我在 Visual Studio 中对 DataSource 和 Data 对象名称和查询字段进行了更改，并且查询在 Visual Studio 中工作。我能够将报告部署到 SharePoint，但是当我尝试打开它时，我收到了同样的错误。

我猜想问题是我需要将 DataSource 和 DataSet 都重新部署到 SharePoint，以便渲染工具中的更改全部同步。

我将 DataSource、DataSet 和 Report 重新部署到 sharePoint 并且它工作。正如其中一篇博客所述，虽然 Visual Studio 允许我在数据集和数据源中所做的更改，但如果您没有将 Visual Studio 设置为在部署报表时自动重新部署数据源和数据集（这可能很危险，因为这可能会影响其他报告共享这些对象）可能会发生此错误。

所以，当然解决方法是在这种情况下，您必须重新部署数据源、数据集和报告来解决问题。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-10-01T14:33:45.757

我也有一个非常相似的问题，有一个非常相似的错误消息。我的问题是无法连接到数据库。在我们的例子中，我们有镜像数据库并且连接字符串没有指定故障转移伙伴。所以当数据库无法连接时，它永远不会去镜像并抛出这个错误。一旦我在我的数据源的连接字符串中指定了故障转移伙伴，它就解决了这个问题。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-01-19T17:04:02.700

使用 SSRS、Report Builder 3.0、MSSQL 2008 和对 Oracle 11G 数据库的查询，我发现 oracle 存储过程运行良好，产生了一致的结果，没有错误。当我尝试将数据导入 SSRS 时，我收到了 OP 查询中列出的错误。我发现只有在删除参数时才会加载和显示数据（不是一个好主意）。在进一步检查中，我发现在数据集属性>参数下，我已将开始日期设置为参数名称 P_Start，将参数值设置为 @P_Start。

将 Parameter 值添加为 [@P_Start] 解决了问题，并且数据加载良好，参数到位。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-07-29T06:52:12.350

**我遇到了同样的错误，但这有效并解决了我的问题**

*如果报告已连接到分析服务器，则在您的分析服务器模型中向用户（访问报告服务器以查看报告）授予所需的权限。为此，**在模型或多维数据集的角色中添加用户并将** 模型部署到您的分析服务器。*

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-01-31T20:25:55.210

此问题是由孤立的 SQL 登录引起的。我运行了我最喜欢的 sp_fixusers 脚本并解决了错误。上面查看日志的建议是一个很好的建议……它让我得到了答案。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-11-23T07:03:58.680

我也面临同样的问题 - 我检查了下面的事情来解决这个问题，

*   *如果您最近更改了数据源中的指向数据库名称，
    则首先检查该报告的所有存储过程是否存在于更改的数据库中。*

*   *如果主报告上有多个子报告，请确保每个报告单独运行良好。*

*   *还要检查安全面板 - 用户必须有权访问该报告的数据库/表/视图/函数。*

有时，我们还需要检查`dataset1`——存储过程。好像您正在尝试显示报告，`user1`并且如果此用户没有`access(rights)`提供的`(dataset1 database)`数据库，那么它将引发与上述相同的错误，因此必须检查用户是否有权访问`dbreader`SQL Server。

此外，如果该存储过程包含其他一些数据库**（Database2）**，例如

```
Select * from XYZ inner join Database2..Table1 on ... where... 
```

那么用户也必须具有该数据库的访问权限。

**注意：**您可以检查此路径上的日志文件以获取更多详细信息，

```
C:\Program Files\Microsoft SQL Server\MSRS11.SQLEXPRESS\Reporting Services 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2018-08-09T06:55:27.897

这可能是您的视图或存储过程的权限问题

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-12-14T15:25:09.660

从选择查询中删除所有评论为我解决了这个问题。我的数据集在预览版中工作，但是当我进入设计/查询设计器并在那里尝试查询时，我得到了 ORA-01006；绑定变量不存在。从选择中删除所有评论后，它起作用了。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-02-04T17:33:46.633

除了上述答案之外，还可能是由于缺少**SQL 存储过程**或**SQL 函数**。例如，这可能是由于函数没有从非产品区域迁移到生产（产品）区域。

# security - Seam/JSF 中的安全性和 GET 参数或页面参数

> ID：10847056
> 
> 赞同：2
> 
> 时间：2012-06-01T08:41:54.043
> 
> 标签：security, jsf, seam, getparameter

页面参数（在 Seam 中）或 GET 参数（通用）经常被提及作为将信息从一个视图传输到另一个视图的适当方法。但显然，在 url 中包含敏感数据并不是一个好主意，例如 //myserver/show.jsf?userId=12，因为很容易操纵这些参数并查看不允许查看的数据。

到目前为止，我一直在使用示例和文献显示的内容（因为到目前为止并不重要）：

```
<s:link..>
<f:param value="#{user.id}" name="userId" /> 
</s:link> 
```

在 JSF 文件和相应的目标 page.xml 中

```
<param name="userId" value="#{userHome.userId}" /> 
```

我对两件事感兴趣（对 Seam 来说仍然是新事物）：

1）如果您想坚持页面参数，您正在使用哪些不同的可能策略来保护未经许可的访问，例如不同的用户帐户？我相信你们中的一些人已经面临这个挑战。这些策略的优缺点是什么。

2) 我想在项目中到处使用 Seam EntityHome 对象，因为它可以轻松处理实体和某种 DAO 结构 - 但是如果不使用页面参数，如何有效地使用 HomeObjects？

非常感谢你们的一些想法和经验。非常感谢。

乔希

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:14:07.793

GET 参数本身并不是不安全的，所有 REST 服务都依赖于放入 URL 中的数据。如果您的用户详细信息页面（在您的示例中）不检查您是否确实有权访问用户帐户“12”，则参数（GET 或 POST）是不安全的。另外，不要认为 POST 参数比 GET 参数更难操作。

因此，您的代码应该检查您是否有权查看敏感数据。要处理未经授权的访问，如果用户设置了他无权获得的 ID ，您只需`org.jboss.seam.security.AuthorizationException`在方法中抛出一个。`setUserId()`启动这个异常使 Seam 遵循中描述的异常处理机制`pages.xml`（默认情况下它重定向到`/error.xhtml`带有错误消息的页面）。

```
@In Identity identity;  // The standard Seam Identity component
@In Long sessionUserId; // You should outject this during user login

public void setUserId(Long userId) {
  // Grant access is user is an admin or his id is the same as the one
  // he is trying to set. Otherwise, exception.
  if (!identity.hasRole('admin') && !sessionUserId.equals(userId)) {
    throw new AuthorizationException("Not authorized");
  }
  this.userId = userId;
} 
```

# android - 在图像切换上添加小部件淡入淡出效果

> ID：10847059
> 
> 赞同：0
> 
> 时间：2012-06-01T08:42:02.430
> 
> 标签：android, android-widget

我有显示图像的主屏幕小部件。图像正在切换某些场景。我需要在图像切换上添加淡入淡出效果。有什么办法吗？

我知道如何在 View 上使用动画来达到我的目的，但 AppWidget 使用 RemoteViews...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:19:59.840

没有普通的事情可以做到这一点。您唯一能做的就是使用位图 Alpha 通道来淡化图像，但这会占用所有处理器时间。我的建议 - 不要那样做。

# vbulletin - vBulletin 3.8：如何在模板中显示数组值

> ID：10847064
> 
> 赞同：1
> 
> 时间：2012-06-01T08:42:36.167
> 
> 标签：vbulletin

我在这里的问题（**可能**）是 $db->fetch_array 不会显示数据库中的所有结果。我不知道会发生什么，但我只得到了 3 个结果中的 1 个，即使我稍微更改了查询，我也尝试了很多东西。你有什么想法为什么我不能在这里得到所有的结果吗？

它适用于 vBulletin 3.8 顺便说一句。

谢谢人们。

```
if ($_REQUEST['do'] == 'showthis') {

    $rel = $db->query_first("
        SELECT *
        FROM " . TABLE_PREFIX . "anexampletable
        WHERE fromuserid OR touserid = " . $vbulletin->userinfo['userid'] . "
        AND confirmstatus =1
    ");

if ($rel)  {

$queryrel = $db->query_read("
                SELECT *
        FROM " . TABLE_PREFIX . "anexampletable
        WHERE fromuserid OR touserid = " . $vbulletin->userinfo['userid'] . "
        AND confirmstatus =1
        ");            

while ($queryre = $db->fetch_array($queryrel)) { 

if ($queryre['reltype'] == '1') {

               $ty = " is something else ";

} else if ($queryre['reltype'] == '2') {

               $ty = " is something ";

} else if ($queryre['reltype'] == '3') {

               $ty = " is something else ";

} else if ($queryre['reltype'] == '4') {

               $ty = " is something ";

} else if ($queryre['reltype'] == '5') {

               $ty = " is something ";

} else if ($queryre['reltype'] == '6') {

               $ty = " is something ";

} else if ($queryre['reltype'] == '7') {

               $ty = " is something ";

} else if ($queryre['reltype'] == '8') {

               $ty = " is something ";

} else if ($queryre['reltype'] == '9') {

               $ty = " is something ";

} else if ($queryre['reltype'] == '10') {

               $ty = " is something ";

} else if ($queryre['reltype'] == '11') {

               $ty = " is something else ";

} else if ($queryre['reltype'] == '12') {

               $ty = " is something else ";

} else if ($queryre['reltype'] == '13') {

               $ty = " is something ";

} else if ($queryre['reltype'] == '14') {

               $ty = " is something ";
} else {

$ty = " is default ";

}

$sender = $queryre['fromusername'];
$receiver = $queryre['tousername'];
$showit = $sender . $ty . $receiver;

}

eval('print_output("' . fetch_template('relationships') . '");');

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T00:42:15.447

您的查询是说：

```
WHERE `fromuserid` has any value 

OR (touserid = $vbulletin->userinfo['userid']). 
```

如果您想要与用户标识匹配`fromuserid`或`touserid`与用户标识匹配的行，请尝试以下操作：

```
$queryrel = $db->query_read("
        SELECT * FROM " . TABLE_PREFIX . "anexampletable

        WHERE (fromuserid = " . $vbulletin->userinfo['userid'] . ") 
        OR (touserid = " . $vbulletin->userinfo['userid'] . ")

        AND confirmstatus =1
        "); 
```

**更新：**
在不知道您正在使用的数据的情况下很难确定问题。我创建了一个测试，输出您的代码正在使用的数据，您将能够看到查询的各个部分正在返回什么，然后可以确定问题所在。

通过将此代码放在示例中的代码之前临时修改您的文件（您需要使用正确的表名）。然后编辑您的问题并将输出粘贴到底部。

```
echo "vBulletin User ID = " . $vbulletin->userinfo['userid'];

$test_query1 = $db->query_read("
  SELECT * FROM " . TABLE_PREFIX . "anexampletable
  WHERE (fromuserid = " . $vbulletin->userinfo['userid'] . ")
");  

$t1_count = 0;
echo "Test From User ID Results<br />";
while ($test1_output = $db->fetch_array($test_query1)) {
  $t1_count++;
  echo "Test From User Result " . $t1_count . "<br />";
  echo "From User ID = " . $test1_output['fromuserid'] . "<br />";
  echo "To User ID = " . $test1_output['touserid'] . "<br />";
  echo "Confirm Status = " . $test1_output['confirmstatus'] . "<br />";
  echo "Relationship Status = " . $test1_output['reltype'] . "<br />";
}

$test_query2 = $db->query_read("
  SELECT * FROM " . TABLE_PREFIX . "anexampletable
  WHERE (touserid = " . $vbulletin->userinfo['userid'] . ")
");  

$t2_count = 0;
echo "<br /><br />Test To User ID Results<br />";
while ($test2_output = $db->fetch_array($test_query2)) {
  $t2_count++;
  echo "Test To User Result " . $t2_count . "<br />";
  echo "From User ID = " . $test2_output['fromuserid'] . "<br />";
  echo "To User ID = " . $test2_output['touserid'] . "<br />";
  echo "Confirm Status = " . $test2_output['confirmstatus'] . "<br />";
  echo "Relationship Status = " . $test2_output['reltype'] . "<br />";
}

exit(); 
```

**最终代码？**
看来有两个问题：
**1）**查询需要修改：
原始：

```
fromuserid OR touserid = " . $vbulletin->userinfo['userid'] . " 
```

更新：

```
(fromuserid = " . $vbulletin->userinfo['userid'] . " 
OR 
touserid = " . $vbulletin->userinfo['userid'] . ") 
```

**更新于 2012 年 7 月**
**5 日 2)**您不能在 vb3 模板中循环遍历数组，因此我们将连接字符串。
在模板中使用的 $showit 变量是一个字符串。每次连续通过 while 循环都会覆盖它，因此只有最后一个结果被发送到模板。而不是使用`$showit = xxx;`，使用`$showit .= xxx;`with `.=`。

我已经更新了下面代码的最后 15 行左右。

* * *

**您可以查看论坛页面的生成方式以了解更多信息。**
打开upload\forumdisplay.php 文件。`while`创建线程列表的循环从这里开始：
upload\forumdisplay.php(962)
`while ($thread = $db->fetch_array($threads))`

每个线程的输出使用“threadbit”模板生成并添加到`$threadbit`此处的字符串中：
upload\forumdisplay.php(1000)
`eval('$threadbit .= "' . fetch_template('threadbit') . '";');`

最后输出“FORUMDISPLAY”模板：
upload\forumdisplay.php(1056)
`eval('print_output("' . fetch_template('FORUMDISPLAY') . '");');`

如果您查看 FORUMDISPLAY 模板，您会发现`$threadbit`字符串从开头使用了大约 1/5。

* * *

试试下面的代码，看看它是如何工作的，我`else if`用一个语句替换了这一系列`switch()`语句。它更有效率。

```
if ($_REQUEST['do'] == 'showthis') {

  // Make standalone query, easy to output query string and run it directly for testing
  $rel_sql = "SELECT * FROM " . TABLE_PREFIX . "anexampletable
    WHERE (fromuserid = " . $vbulletin->userinfo['userid'] . "
    OR touserid = " . $vbulletin->userinfo['userid'] . ")
    AND confirmstatus =1";

  $queryrel = $db->query_read($rel_sql);

  if ($db->num_rows($queryrel))
  {
    while ($queryre = $db->fetch_array($queryrel))
    {
      switch ($queryre['reltype'])
      {
        case 1:
          $ty = " do something 1 ";
          break;
        case 2:
          $ty = " do something 2 ";
          break;
        case 3:
          $ty = " do something 3 ";
          break;

        // Add as many cases as needed
        .......
        case xxx:
          $ty = " do something xxx ";
          break;
        .......

        default:
          $ty = " is default ";
      }

      $sender = $queryre['fromusername'];
      $receiver = $queryre['tousername'];

      // UPDATED FROM HERE DOWN on 07/05/2012
      // Add to $showit with ".=" rather than overwriting it with "=".

      // Method One
      // If the output is simple, try this.
      // I added a line break after each entry.
      $showit .= $sender . $ty . $receiver . "<br />";

      OR

      // Method Two
      // If the output is complex.
      // Create a separate template and store the output in $showit
      // Remember to add the new template to the $actiontemplates array.
      eval('$showit .= "' . fetch_template('showit') . '";');
    }

    eval('print_output("' . fetch_template('relationships') . '");');
  }
} 
```

# networking - 在重叠的 MPLS-VPN 中如何分配路由目标？

> ID：10847067
> 
> 赞同：2
> 
> 时间：2012-06-01T08:42:47.897
> 
> 标签：networking, network-protocols, vpn, bgp

我不确定我应该在这里还是在 ServerFault 中问这个问题。但是由于这个问题更多的是关于网络的概念而不是它在特定硬件中的实现，所以我决定在这里发布它。

据我了解，路由目标在 MPLS-VPN 中用于区分 PE 路由器中的不同 VRF。

假设任何两个 VPN 之间没有站点共享，则出口和进口路由目标相同，因此 PE 可以将传入 BGP 数据包中的路由目标与其自己的出口路由目标进行比较，并安装在适当的 VRF 中。

我的疑问是，当存在属于多个 VPN 的站点时，如何处理路由目标的分配？

是否在所有 PE 中手动安装了到各种 VRF 的路由目标？

如果是这样，它不会导致可扩展性问题吗？

如果不是，如何安装 VRF 的路由目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:57:44.910

> 据我了解，路由目标在 MPLS-VPN 中用于区分 PE 路由器中的不同 VRF。

换句话说，route-targets 用于在 PE 路由器上实现 VRF 的 VRF 路由导入和导出策略。

> 我的疑问是，当存在属于多个 VPN 的站点时，如何处理路由目标的分配？

如所写，当您说“属于多个 VPN”时，这个问题对于您的意思是模棱两可的，因为不清楚您是否只是想在单个站点内保留 VRF 的分离（参见下面示例 1 中的 Site_C），或者是否您希望单个站点的路由表接收来自两个不同 VRF 的路由（请参见下面示例 2 中的 Site_BB）。这个答案将使用下图作为参考...

![MPLS VPN 示例拓扑](../Images/8e96d191ca4209e849b936ccb8272482.png)

## 概念

请特别注意 PE 路由器附近的小方框。这些框代表接口本地的路由和转发表；思科称这些表格为 VRF。VRF_A 仅处理与连接到粉红云的 CE 路由器之间的数据包。VRF_B 仅处理与连接到蓝云的 CE 路由器之间的数据包。

多协议 BGP 用于通过服务提供商网络（白云）宣布来自每个 VRF 的路由。白云内的设备从不安装粉色和蓝色路由（即使那些其他 ISP 路由器正在运行 bgp）；这是因为 PE 路由器接收到这些路由后，会将这些路由转换为一个特殊的 BGP 地址族，称为 VPNv4。VPNv4 地址族提供了一种区分来自不同客户的相似路由的方法；VPNv4 还带有附加到每个路由的特殊 BGP 属性，称为[路由区分器](http://en.wikipedia.org/wiki/Route_distinguisher)和路由目标，它们是扩展的 BGP 社区。

路由目标通常以`<asn>:<custom_numer>`. 路由目标手动分配给每个 PE 路由器上的 VRF。PE路由器从VRF中的CE接收到路由后，给这些路由打上Route-Distinguisher标记，使其成为服务提供者唯一的VPNv4地址，并打上Route Target以实现路由的导入和导出策略。

## 示例 1

*   假设 VPN_A 有 Site_AA、Site_AB 和 Site_C。CE_Site_AA、CE_Site_AB 和粉色接口 CE_Site_C 通过粉色链路与各自的 PE 路由器运行 OSPF。PE 路由器将通过 VRF_A 上的 OSPF 接收的路由导出`rt 100:1`并使用多协议 BGP 宣布这些路由。当 PE 路由器收到带有 标记的 MP-BGP 路由时`rt 100:1`，它们会将这些路由导入 VRF_A 并在粉色接口上使用 OSFP 携带它们。

*   假设 VPN_B 有 Site_BA 和 Site_BB。CE_Site_BA、CE_Site_BB 和 CE_Site_C 上的蓝色接口通过蓝色链路与各自的 PE 路由器运行 OSPF。PE 路由器将通过 VRF_B 上的 OSPF 接收到的路由导出`rt 100:2`并使用多协议 BGP 宣布这些路由。当 PE 路由器接收到带有 标记的 MP-BGP 路由时`rt 100:2`，它们会将这些路由导入 VRF_B 并在蓝色接口上使用 OSFP 携带它们。

值得注意的是，CE_Site_C 必须在到 PE_3 的两个接口/子接口上使用 VRF，以保持来自 VRF_A 和 VRF_B 的流量分开。

## 示例 2

我们将扩展示例 1 以将 172.16.1.0/24 暴露给 Site_BB。

假设我们需要将 Site_AA 的 172.16.1.0/24 暴露给 Site_BB 的 VRF_B。此时 PE_1 需要导出 172.16.1.0/24`rt 100:1`和`rt 100:51`。PE_2 现在将带标签的 VPNv4 路由`rt 100:2`导入 VRF_B 并将`rt 100:51`接收 172.16.1.0/24 导入 VRF_B。如果 Site_BB 需要以类似方式向 Site_AA 公开其路由，则 PE_2 需要用 标记一个或多个适当的 DMZ 子网`rt 100:52`，因此可以将其导入 PE_1 上的 VRF_A。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T05:14:46.780

After doing some research on the topic and some fruitful discussion with [Mike](https://stackoverflow.com/users/667301/mike-pennington), I think I have a good idea on how the Route Targets are assigned. So I decided to answer my own question.

Quoting from Mike's answer

> Route-targets are used to implement VRF route import and export policies for a VRF on a PE router.

The problem arises when we have a PE router sending control plane information received from a site belonging to multiple VPNs. There should be some way for the PE to decide which route target (thereby signalling to which VPN this control information belongs to) to assign to the BGP control packet it sends.

The important point to be noted is that VRFs are configured on particular interfaces and Route Targets are configured for interfaces.

So, if we have a site that belongs to, say, 3 VPNs, the site's CE and the corresponding PE should be connected via 3 different interfaces (or sub-interfaces) and a specific route Target assigned to each interface (or sub-interface).

Regarding my other question

> Are the route targets to various VRFs manually installed in all the PEs?

From what I had gathered from searching online, Route targets are indeed configured manually on the routers.

# javascript - 主干视图未正确渲染

> ID：10847070
> 
> 赞同：0
> 
> 时间：2012-06-01T08:42:57.110
> 
> 标签：javascript, backbone.js, html5-canvas

我正在制作一个应用程序，用户应该能够单击一个元素，然后必须在另一个 HTML 分区中呈现相同的元素。问题是，点击事件的行为是混乱的，结果并不像预期的那样。

我正在使用backbone.js 模型、集合和视图来执行此操作。关于如何解决此问题以获得正确行为的任何想法？

这是我要开始工作的代码：http: [//jsfiddle.net/rpKbM/](http://jsfiddle.net/rpKbM/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:09:34.740

问题是`el`您在创建新的`canvas`. 尝试以下操作，应该可以按预期工作（它将创建一个新元素而不是移动当前元素）：

```
canvas.click(function() {
  var newview = new BoxView({
    tagName: 'canvas', //Instead of el: canvas
    model: model
  });
$("#new").html(newview.render());
}); 
```

这是一个更正且有效的[jsfiddle](http://jsfiddle.net/rpKbM/3/)

# xcode - xcode 在我的系统上将 "$(BUILT_PRODUCTS_DIR) 解析到哪里？

> ID：10847074
> 
> 赞同：19
> 
> 时间：2012-06-01T08:43:07.163
> 
> 标签：xcode, build

使用 Xcode 4.2 为 iPhone 模拟器编译时，如果我放置

> “$(BUILT_PRODUCTS_DIR)”

在

> 构建设置/标题搜索路径/调试

并退出编辑我可以看到它解析为：

> “构建/调试-iphoneos”

这应该在我的系统上的什么位置？我看过：

```
Library/Developer/Xcode/DerivedData/{Project Name}/Build 
```

但我找不到一个名为 build 的文件，其中包含一个名为 Debug-iphoneos 的文件夹。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T08:53:30.050

在我的系统上，编译一个 OSX 项目，它解析为绝对路径：

```
BUILT_PRODUCTS_DIR /Users/andy/Source/MyProject/build/Debug 
```

有太多 Xcode 构建变量，我保存了一个文本文件，其中包含一个示例列表，这些示例列表是我通过执行自定义构建脚本并查看日志选项卡中的输出获得的。

如果您的代码将进入该`Library`文件夹，则该文件夹隐藏在 Lion 下。您可以使用以下命令从命令行 ( `Terminal`) 取消隐藏它：

```
$ cd ~
$ chflags nohidden Library 
```

然后，您应该能够看到它的内容。

另一个提示：我有一个`~/tmp`文件夹，可以让临时的东西堆积起来，并且我已经设置了我的 Xcode 首选项以放入该文件夹`DerivedData`，`Archives`以便我可以：

*   不时删除它（我不喜欢临时的东西堆积在我无法控制的地方）。
*   查看它以将预发布存档项目打包给测试人员。

# sql-server - 当数据集 vb.net 发生更改时重新加载 DataGridView

> ID：10847075
> 
> 赞同：0
> 
> 时间：2012-06-01T08:43:10.393
> 
> 标签：sql-server, vb.net, visual-studio-2010

我的 Windows 窗体应用程序中有一个 DataGridView 控件。我想做的是：我想重新加载视图，以便在绑定的数据库表发生更改时显示正确的数据。换句话说，当我使用 sql 查询而不是 DataGridView1.Rows.Remove(DataGridView1.CurrentRow) 属性删除记录时，我希望对 datagridview 也发生更改。例如：我有一个绑定到 datagridview 的客户表。当我删除一条记录时，比如说 ID=5 的记录，我希望在运行时从 gridview 中删除该行。这可能吗？

**编辑：**

每次我删除客户以重新绑定数据源时，我都会调用此过程

```
Private Sub reloadDataset()
        DataGridView1.DataSource = ""
        DataGridView1.DataSource = CustomerBindingSource
    End Sub 
```

但它不起作用....我做错了什么？谢谢你的努力..

**编辑 2**

澄清一下：CustomerBindingSource 有 DataSource(myDatasource) 和数据成员表 customers

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T19:32:54.023

我无法从您发布的有限代码中看出，但如果您使用的是 BindingSource，则需要确保重新加载它是 DataSource，而不是 DataGridView DataSource。DataGridView 可以保持绑定到相同的 BindingSource：

```
Private Sub Load()

   'Tell DataGridView to use BindingSource.
    DataGridView1.DataSource = CustomerBindingSource

   'Fetch the table.
   'Tell the BindingSource what you want it to wrap/use as it's DataSource.
   CustomerBindingSource.DataSource = FetchData()

End Sub

Private Sub Reload()

   'We have made some changes and need to refresh/reload.
   'We need to re-fetch the table and re-bind it to BindingSource's DataSource.
   CustomerBindingSource.DataSource = FetchData()

End Sub

Private Function FetchData() as DataTable

     Using Conn As New Data.SqlClient.SqlConnection("connectionString"),
        Command As New Data.SqlClient.SqlCommand("SQLQuery", Conn),
        Adapter As New Data.SqlClient.SqlDataAdapter(Command)

        Dim Table As New DataTable

        Adapter.Fill(Table)

        Return Table

    End Using

End Function 
```

FetchData 返回 BindingSource 可以绑定的数据表，但您可以返回任何可以绑定的对象。请注意，此 FetchData 实现特定于 SQL Server。

# visual-studio-2010 - 如何在 Visual C++ 2010 中添加 lib 文件以链接？

> ID：10847076
> 
> 赞同：30
> 
> 时间：2012-06-01T08:43:11.127
> 
> 标签：visual-studio-2010, visual-c++, linker

我在 Visual C++ 2010 上找到了 Additional Dependencies 东西，但是当我转到 . 我需要添加 wsock32.lib 来链接我的文件，我该如何实现？

谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-01T08:44:56.813

在文本字段中添加 wsock32.lib。

```
 Project Properties -> Linker -> Input -> Additional Dependencies. 
```

当您单击该字段时，您会得到一个`...`按钮。单击此按钮并为每行添加一个库名称。或者，您可以在字段中写下名称。用空格字符分隔所有条目。

您可以验证它是否在命令行中

```
 Project Properties -> Linker -> Command Line. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T03:43:38.493

这是一种使用 C 和 C++ 语言将 LIB 文件添加到 Visual Studio 项目的 GUI 方法（适用于像我一样喜欢鼠标四处游荡的人）。我在 Visual Studio 2012 中做到了这一点。但我认为它也适用于以前的版本。

1.  在 Windows 资源管理器中找到要添加到项目的 LIB 或其他文件。将 LIB 文件从 Windows 资源管理器拖到 Visual Studio 的解决方案资源管理器中，然后将其添加到要添加 LIB 文件的项目中。现在，您将看到解决方案资源管理器中列出的文件。

而已！只需一步！您不会在“项目属性 -> 链接器 -> 输入 -> 附加依赖项”中看到该文件。但是，它隐藏在宏 %(AdditionalDependencies) 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T08:46:30.393

编辑 Additional Dependencies 并将 wsock32.lib 放入其中。

并在Link->general->附加库目录中添加lib的路径

# python - 我应该将自己的单个下划线属性视为私有吗？

> ID：10847087
> 
> 赞同：1
> 
> 时间：2012-06-01T08:43:58.507
> 
> 标签：python

如果我对类中的属性使用单个前导下划线，那么我从不同的对象访问它是错误的吗？是一个下划线说“我会随意使用它，但你用户不应该触摸它”或者甚至开发人员是否应该将它视为私有的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T08:45:28.630

单下划线表示不供*公众*使用；欢迎在同一个包中的代码戳它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:24:58.817

我认为您应该尽可能合理地避免这样做，因为它破坏了封装，这是面向对象范式的好处之一。虽然有些人认为作为某些更高级别的范围界定很好，比如模块或包，但我发现即使在单个类的各种方法中，避免这样做也是一个有用的经验法则——至少如果它相当复杂、微妙的话，或者只是我想我以后可能想改变的一个方面。

原因是每次你用一个对象做某事时，你都会在一个对象的内部和你编码的地方创建依赖关系，无论是同一个对象或模块的另一部分还是其他什么。这种情况越多，以后维护或增强事物就越困难。

要考虑的另一个方面是，每当您觉得有必要这样做时，它可能表明需要更好的设计——在这种情况下，您可以将其视为警告信号并做出相应的反应。

为处理内部细节的操作创建接口通常意味着必须设计和实现比不这样做更多的代码。因此，在每种情况下，都必须权衡收益与成本，以确定是否值得。最终的经验（和教育，如果它正在进行的话）使这样的决定更容易，甚至可能是本能的。

# performance - groovy/grails 域类创建新实例需要很多时间

> ID：10847090
> 
> 赞同：0
> 
> 时间：2012-06-01T08:44:18.537
> 
> 标签：performance, grails, object, groovy, instance

我的代码看起来像：

```
static Value findValue(ProjectTouchpoint touchpoint, ProjectQualifier qualifier, ProjectTargetGroup targetGroup)
    {
        def value = Value.findByProjecttouchpointAndProjectqualifierAndProjecttargetgroup(touchpoint,qualifier,targetGroup)
        if(!value) {
            value = new Value(projecttouchpoint:touchpoint, projectqualifier:qualifier, projecttargetgroup:targetGroup, value:0)
              value.save(flush:true)
        }
        return value;
    } 
```

问题：这行代码执行大约需要 1 秒：

```
value = new Value(projecttouchpoint:touchpoint, projectqualifier:qualifier, projecttargetgroup:targetGroup, value:0) 
```

我只创建了一个域类的新实例，value.save(flush:true) 只需要 0.X 秒（数据库写入）

我在一个循环中初始化了大约 10k 个值，这需要很长时间

有任何想法吗？泰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:56:27.217

`withTransaction`在一个块中进行循环应该会有所帮助

这是几年前的[一篇博客文章，展示了这个想法](http://www.intelligrape.com/blog/2009/09/09/batch-processing-in-grails/)

# php - 将数据从 Android 发送到 PHP

> ID：10847094
> 
> 赞同：0
> 
> 时间：2012-06-01T08:44:26.197
> 
> 标签：php, android, json

起初，我对这些东西很陌生，所以我希望这不是一个非常基本的问题。我正在尝试从 PHP 网络获取我的 Android 应用程序中的数据，PHP 有一些函数可以返回一些数据，但是要调用它们，我需要先从 android 应用程序发送和字符串。我正在尝试搜索如何做到这一点，但我什么也没找到。任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:06:38.487

```
 public void getServerData() throws JSONException, ClientProtocolException, IOException {               

        HttpParams httpParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParams, TIMEOUT_MILLISEC);
        HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
        HttpClient client = new DefaultHttpClient(httpParams);
        HttpPost request = new HttpPost(url);

        request.setHeader( "Content-Type", "application/json" );        

        JSONObject json = new JSONObject();         
        json.put("type", "register");
        json.put("user_name", "colors");
        json.put("user_password", "colors123");

        Log.i("jason Object", json.toString());        

        StringEntity se = new StringEntity(json.toString());                 
        se.setContentEncoding("UTF-8");
        se.setContentType("application/json");    
        request.setEntity(se);        

        HttpResponse response = client.execute(request);        
        HttpEntity entity = response.getEntity();
        InputStream is = entity.getContent();
        String _response = convertStreamToString(is);
        System.out.println("res  " + _response);           
        int res_code = response.getStatusLine().getStatusCode();
        System.out.println(" code " +res_code); 
    }               
    private static String convertStreamToString(InputStream is) {

        BufferedReader reader = new BufferedReader(new InputStreamReader(is), 1856);
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append((line + "\n"));
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    } 
```

# python - 更改克隆工作流程

> ID：10847097
> 
> 赞同：0
> 
> 时间：2012-06-01T08:44:33.760
> 
> 标签：python, plone

默认情况下，文件没有工作流

所以我把它们放在简单的发布工作流程中（私人 -> 提交 -> 发布）

我希望经过身份验证的用户在发布文件时无法修改文件

（在 Plone 4.0.7 上）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:43:10.253

你应该试试这个：

*   转到`portal_workflow`->`contents`
*   复制粘贴`simple_publication_workflow`
*   重命名`copy_of_simple_publication_workflow`为其他名称（例如。`my_files_workflow`）
*   转到`my_files_workflow`-> `States`-> `published`->`Permissions`
*   取消选中不需要的权限

现在您可以将这个新的工作流程分配给您的文件。

# iphone - 如何制作一个在计算器屏幕上显示所有操作的计算器？

> ID：10847101
> 
> 赞同：0
> 
> 时间：2012-06-01T08:44:55.333
> 
> 标签：iphone, xcode

我想做一个计算器，我从很多教程中学到了，但我想要实现的是在计算器屏幕上显示操作；类似于“ 2 + 3 * 4 / 7 mod 3 ”。如何才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:51:42.923

你可以阅读斯坦福的这个[教程](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/)。本课程的第一个演示是一个计算器，引导您了解如何进动。值得一读。

这是[iTunes U 视频链接](http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewPodcast?id=395605774)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:51:45.043

你要做的是保留一堆你用来到达你所在位置的按键，当键是一个数字时，计算答案，当你得到一个新的按键时，重绘你的显示视图并渲染来自的值堆栈的底部。

如果你需要灵感，商店里有很多类似的应用程序。

# sencha-touch-2 - 使用 hasOne 关联保存模型

> ID：10847104
> 
> 赞同：3
> 
> 时间：2012-06-01T08:44:58.187
> 
> 标签：sencha-touch-2

我有这些模型：

```
Ext.define('TestApp.model.User', {
    extend: 'Ext.data.Model',
    config: {
        fields: [
            {name: 'username', type: 'string'},
        ],

        proxy: {
           type: 'localstorage',
        },
    },
});

Ext.define('TestApp.model.Config', {
    extend: 'Ext.data.Model',
    config: {

        hasOne  : {model: 'TestApp.model.User', name: 'user'},

        proxy: {
           type: 'localstorage',
        },

    }
}); 
```

我试图保存这样的配置条目：

```
 var david = Ext.create('TestApp.model.User', {username: 'david'})
    david.save();
    var config = Ext.create('TestApp.model.Config');
    config.setUser(david);
    config.save(); 
```

当我重新启动应用程序时，我保存了我的**用户条目**并保存了我的**配置条目**，但是**我的关联没有保存**：

**config.getUser()** -> 我得到*未定义*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:01:04.450

根据[Mitchell Simoens](http://www.sencha.com/forum/showthread.php?190000-Has-Many-with-localstorage&p=762500&viewfull=1#post762500)的说法，不支持存储相关数据。

不确定它是否对您的情况有所帮助，但[草拟了一种方法](http://www.sencha.com/forum/showthread.php?220305-Problem-with-localstorage-store-and-model-with-hasMany-association&p=835806&viewfull=1#post835806)（该方法似乎也解决了我自己当前（不相关）的问题）。

希望能帮助到你

# permissions - 使用 minGW 和 MSYS 在 Windows 上构建 libav 时出错

> ID：10847106
> 
> 赞同：3
> 
> 时间：2012-06-01T08:45:04.247
> 
> 标签：permissions, makefile, mingw, msys, libav

我在使用[libav 时遇到了问题。](http://libav.org) 我使用 MinGW 和 MSYS 在 Windows 上构建 libav。但是，当我使用“make”时，在构建一些文件（.o 文件）后我得到错误，它是

```
$ make 
AR    libavcodec/libavcodec.a C:\msys\mingw\bin\ar.exe: libavcodec/: Permission denied 
make: *** [libavcodec/libavcodec.a] Error 1 
```

之后，我查看 libavcodec 文件夹的权限，我拥有所有权限。:| 请帮我解决这个问题或者给我一个完整的指导来在windows上构建libav（我使用win7 x64并且有msys，mingw）谢谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T06:04:46.773

我不确定这是否相关，但我在尝试制作 ffmpeg 时遇到了同样的错误。最初，当我使用 configure 时，我得到了一个缺少分隔符的错误（在一个 makefile 中）。我发现[一个页面](http://ffmpeg.org/trac/ffmpeg/ticket/1209)建议检查 git 使用的是 unix 行尾而不是 windows (CR LF)。所以我用

```
git config --global core.autocrlf false 
```

将 git 设置为使用 unix 行结尾，然后认为我已经更新了我的源代码（对 git 来说是新手，结果我没有）。我仍然收到缺少分隔符的错误，所以我在行首添加了一个选项卡并配置完成。然后我使用 make 并且会得到与您相同的错误。我在其他一些 makefile 中看到它们仍然有 windows 行结尾，所以我删除了除[此处](https://stackoverflow.com/questions/673407/how-do-i-clear-my-local-working-directory-in-git)提到的 .git 文件夹之外的整个目录，然后使用

```
git reset --hard 
```

再次获取文件。在此之后配置和制作没有错误，所以我的猜测是您使用的是 Windows 行结尾或者 makefile 有问题。

# java - javascript中的加密和java中的解密

> ID：10847109
> 
> 赞同：1
> 
> 时间：2012-06-01T08:45:19.800
> 
> 标签：java, javascript, security, encryption

是否可以做一个简单的加密 JavaScript 并在 java.xml 中检索数据。我知道 javascript 加密的缺点，但我现在必须这样做。没有使用 SSL 代替的可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:55:16.080

在网上找到了这个图书馆，显然这就是你想要的。

[河豚加密库](http://dren.ch/js_blowfish/)

[您可以在此处](http://www.flexiprovider.de/examples/ExampleRSA.html)找到有关 Java 解密的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T10:01:10.730

有 RSA、Blowfish、DSA、TEA 等的 javascript 实现（尝试 google 获取代码）。您必须进行一些测试以找出哪些实现创建了相同的加密内容表示。

使用非常复杂的算法/大密钥大小并没有真正的巨大好处，因为通过非安全连接传输 javascript（和任何密钥）存在漏洞（即使您实施非对称密码并且只发送公共密钥，MITM 可以修改 javascript 以发送未加密的版本）。如果是我，我可能会选择[TEA](http://www.movable-type.co.uk/scripts/tea-block.html)（一个快速的 google 出现了很多实现，包括[这里](http://www.winterwell.com/software/TEA.php)的 java 实现）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T12:01:33.557

如果真的，真的必须是 JS 密码学，[斯坦福 Javascript 密码库](http://crypto.stanford.edu/sjcl/)值得一看。[如有关它的论文](http://crypto.stanford.edu/sjcl/acsac.pdf)中所述，它的设计旨在尽可能地遵循现代要求。当然，它也会受到基于浏览器的 Javascript 密码学的[普遍缺点](http://www.matasano.com/articles/javascript-cryptography/)的影响，但不幸的是，正如 owlstead 在评论中提到的那样，源中似乎有更多不稳定的部分。它仍在开发中，这些部分有望得到改进。但鉴于 Javascript 中没有类似 OpenSSL 的东西，它可能值得一试。

# macos - 备份文件中带有日期的 Mac shell 脚本

> ID：10847120
> 
> 赞同：1
> 
> 时间：2012-06-01T08:45:56.350
> 
> 标签：macos, shell

我创建了一个需要进行 postgresql 备份的 shell 脚本。并删除超过 4 天的文件。但是当我运行这个脚本时。它创建：“backup_db_01_06_2012 * *”，如果我将 .backup 附加到它，备份文件将无法正常工作。你们能帮帮我吗？您可以在下面找到脚本。

```
CUR_DATE=$(date +"%d_%m_%Y")
BACKUP_FILE="/folder/backup/backup_db_$CUR_DATE"

find /folder/backup -name "*.backup" -type f -Btime +4d -delete

/Applications/pgAdmin3.app/Contents/SharedSupport/pg_dump \
    -h localhost -p 5432 \
    -U postgres -F c -b -v -f "$BACKUP_FILE" db 
```

# iphone - 将项目从 ARC 转换为 MRC

> ID：10847123
> 
> 赞同：1
> 
> 时间：2012-06-01T08:46:05.390
> 
> 标签：iphone, objective-c, ios

我在 ARC 中开始了我的项目，但由于某些原因我想将其更改为 MRC，有没有什么方法可以做到这一点而不必重新制作我的项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:55:13.653

尝试将 ARC 更改为`No`构建设置。

选择左上角的项目，然后选择构建设置，然后在搜索栏中输入自动。将**Objective-C 自动引用计数**设置为`No`. 应该设置为`Yes`好像您选择了 ARC。

![在此处输入图像描述](../Images/991aa9066e2e81553a6116cb370ce557.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:02:07.257

根据@iNoob 的回答，您可以在构建设置中切换编译器标志。

如果您要问的是“是否有等效于**Edit -> Refactor -> Switch to Objective-C ARC** ”，恐怕答案是否定的。您必须手动添加所有必要的`retain`//调用`release`。`autorelease`

你想离开 ARC 的原因是什么（我假设为 < iOS 4.0 构建）？

# matlab - matlab如何将负数打包为int16

> ID：10847124
> 
> 赞同：0
> 
> 时间：2012-06-01T08:46:21.780
> 
> 标签：matlab, binary, numbers

matlab如何将负数打包为int16，如-22？

对于正数，我注意到当我们有 4 位数字时，它会像这样打包：

数字是： 1254 matlab 将其打包为 230 和 4 然后如果将这些数字转换为二进制，我们将有 11100110 代表 230 和 100 代表 4 。现在您可以将其转换为正常格式，如下所示：

```
>> bin2dec('10011100110')

ans =

       1254.00 
```

现在它如何处理负数？（当它打包 -22 到 int16 时，它转换为 234 和 255）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:18:11.053

以下是如何在两个方向上进行转换：

```
%# convert from int16 to binary
>> dec2bin(typecast(int16(-22),'uint16'))
ans =
1111111111101010

%# convert from binary representation to int16
>> typecast(uint16(bin2dec('1111111111101010')),'int16')
ans =
    -22 
```

# android - Android glGenTextures 返回无效的 ID

> ID：10847125
> 
> 赞同：0
> 
> 时间：2012-06-01T08:46:21.980
> 
> 标签：android, opengl-es, textures

我们为安卓开发了一款游戏，一切都在许多设备上运行良好。但昨天我们在三星 Galaxy Tab P1000 上测试了游戏，但出现了问题。

glGenTextures 函数返回无效的 ID，例如：100271、315638026、534244737、1505553220、-1563003837

这很奇怪。我们尝试在 onSurfaceCreated 和 onDrawFrame 函数中创建纹理，结果相同。如果我们用我们自己的基于计数器的实现替换 glGenTextures 函数，一切正常！

有谁知道发生了什么？

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T09:41:33.217

为什么你认为这些是无效的 ID？

纹理 ID 是 GLuint，即无符号，所以你肯定没有负数。并且没有要求 OpenGL 纹理 ID 是单调和密集的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:24:26.427

这就是我解决问题的方法：

```
IntBuffer t = IntBuffer.allocate(1);
gl.glGenTextures(1, t);
int texture_id = t.get(0);
gl.glBindTexture(GL10.GL_TEXTURE_2D, texture_id); 
```

或者，您可以通过创建静态 int 来实现自己的纹理计数器，并在每次创建纹理时递增它。

# bash - 如何使用包含空格的变量？

> ID：10847127
> 
> 赞同：5
> 
> 时间：2012-06-01T08:46:26.037
> 
> 标签：bash

我有以下文件：

```
~/tmp/testbash$ l
file 1.test  move.sh* 
```

哪里`move.sh`是：

```
#!/bin/bash
#-x

FILENAME='file\ .test'
echo $FILENAME
echo joo
mv $FILENAME test.test 
```

当我运行时`./move.sh`，我得到这个输出和错误：

```
file\ .test
joo
mv: target `test.test' is not a directory 
```

问题是它执行命令为：

```
mv file .test test.test 
```

而不是：

```
mv file\ .test test.test 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T08:50:24.733

如果变量包含嵌入的空格，则用双引号 (") 将变量括起来。

```
FILENAME='file .test'
mv "$FILENAME" test.test 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T08:50:01.303

如果变量值中有空格，请使用双引号：

```
FILENAME='file\ .test'
echo "$FILENAME"
echo joo
mv "$FILENAME" test.test 
```

# objective-c - 如何将字符串拆分为子字符串？

> ID：10847134
> 
> 赞同：-1
> 
> 时间：2012-06-01T08:47:00.307
> 
> 标签：objective-c, ios5, nsstring, substring

我想将下面的字符串拆分为子字符串， `string = 000000000000000000111111111111111111111111000000`. 如何拆分，就像我们在提到的字符串中有 48 个字符一样？我想将每个字符分成一个数组，以便我可以根据索引获取值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:51:19.133

关于什么

```
unichar aCharacter = [string characterAtIndex: charIndex]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:52:42.907

如果要检索某个字符，可以使用`[(NSString *)string characterAtIndex:(int)index];`

例如获取索引 0 处的字符

```
unichar character = [string characterAtIndex:0]; 
```

[NSString 字符索引：](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/characterAtIndex%3a)

如果要将字符串拆分为子字符串，则可以使用拆分/子字符串函数`– substringFromIndex:`,`– substringWithRange:`和`– substringToIndex:`. 您还可以使用更多方法。看看[NSString 开发参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-06T11:12:29.763

通过使用**toCharArray()**方法[看到这个](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toCharArray())

```
String str="000000000000000000111111111111111111111111000000";
char[] cr=str.toCharArray();
System.out.println(cr[18]);//output:1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-17T11:24:30.073

使用打击代码，您可以使用索引获取字符串

```
NSMutableArray * stringArray = [[NSMutableArray alloc]init];
for (int i=0; i<yourString.length; i++) {
    [stringArray addObject:[NSString stringWithFormat:@"%c",[yourString characterAtIndex:i]]];
}
NSLog(@"string %@",stringArray); 
```

# php - PHP, OOP, 接口

> ID：10847135
> 
> 赞同：0
> 
> 时间：2012-06-01T08:47:02.223
> 
> 标签：php, oop, abstract-methods

我正在学习 PHP，我在想，

抽象类或接口中的方法称为抽象方法。

**我的问题：**

抽象类/接口中定义的抽象方法是否不包含在子类中？

**如果是真的，那就意味着：**

仅在子类内部的是未定义为抽象的方法/属性，这意味着接口在实现时无法创建子类。

**也意味着：**

当从抽象类/接口定义抽象方法时，扩展/实现抽象类/接口的类只需查看方法签名并确保这些方法被覆盖（女巫不是真正覆盖，重写是一个更好的词说（虽然我听到压倒一切））。

如果有人可以帮助我专业地理解抽象方法，祝你有美好的一天。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T08:59:57.363

抽象类只是一个包含一个或多个抽象方法的类。抽象类不能被实例化，因为它基本上是不完整的。它作为其子类的一种蓝图。

抽象方法是未完全定义的方法。它有一个签名但没有实现。实现必须在子类中完成。子类自动继承任何非抽象方法，但必须实现抽象方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:01:17.303

实际上，这就是发生的事情：

一个接口可以继承一个或多个接口，实现该接口的类也实现了所有的基接口。您不能拥有接口的实例，而是需要有一个实现该接口的类并拥有该类的对象。如果某事需要一个类型是这些接口之一的对象，那么上述类的对象将适合。

一个抽象类可以继承自一个且不超过一个类。您不能创建抽象类的实例，而是需要创建一个从它继承的派生类，并拥有该类的对象。它还可以包含文件、抽象或非抽象方法，并实现一个或多个接口。从抽象类继承的类必须是抽象的或实现从基类继承的所有抽象方法（如果类是抽象的，则继承这些抽象方法以在任何进一步的派生类中实现）。如果某事需要一个对象，该对象的类型是在抽象基类或抽象基类本身上实现的接口之一，那么所提到的派生类的对象将适合。

* * *

When the concept of interface was introduced, multiple inheritance of classes was more common, and a interface was just a kind of class (some still refers to it like that). As time passes interface has became a separate concept and multiple inheritance has been constrained to only be allowed between interfaces.

# xml - 自动刷新从 XML 文件调用数据的 swf

> ID：10847139
> 
> 赞同：0
> 
> 时间：2012-06-01T08:47:48.273
> 
> 标签：xml, flash, actionscript-2

所以我需要做一个应用程序女巫从 XMl 文件中调用一些数据。XML 数据将是动态的，因此我需要在我的 swf 中进行自动刷新。我试过这个

```
var interval = setInterval(my_function, 10000); 
```

因为我有

```
my_xml = new XML();

my_xml.load("direktno.xml");

my_xml.onLoad = my_function;

my_xml.ignoreWhite = true;

function my_function()
{ my function } 
```

但这只会刷新`my_function` 而不重新加载 XML 文件。任何想法>

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:15:33.263

如果您将代码更改为此，它将每 10 秒重新加载一次 XML 文件。

```
var my_xml = new XML();
my_xml.ignoreWhite = true;
my_xml.onLoad = onXMLLoaded;

function reloadXML(){ 
    my_xml.load("direktno.xml");
}
function onXMLLoaded() { 
    // do what you want
}

var interval = setInterval(reloadXML, 10000); 
```

希望能帮助到你。

# javascript - 在 Internet Explorer 9 中运行任何测试之前都会调用 QUnit 设置回调

> ID：10847144
> 
> 赞同：1
> 
> 时间：2012-06-01T08:47:56.983
> 
> 标签：javascript, internet-explorer-9, qunit

在 IE9 中执行 QUnit 测试时，我遇到了一个非常奇怪的问题。测试结构是这样的：

```
function setupTest() {
    // Adding some extra items to the DOM
}

function teardownTest() {
    // Removing dirtied items from the DOM
}

module("MODULE A", {setup: setupTest, teardown: teardownTest});

test("TEST 1", function () {
    // Some simple assertions
});

module("MODULE B", {setup: setupTest, teardown: teardownTest});

test("TEST 2", function () {
    // Some simple assertions
}); 
```

这些测试大约有 50% 的时间会失败。我已确保测试完全独立，并且在测试运行之前/之后安装/拆卸完全完成。问题归结为设置回调有一半的时间被乱序调用。通过日志记录，我可以看到这种情况：

成功运行：

```
LOG: completing setup
LOG: MODULE A: TEST 1
LOG: completing teardown
LOG: completing setup
LOG: MODULE B: TEST 2
LOG: completing teardown 
```

运行失败：

```
LOG: completing setup
LOG: completing setup    <-- ?
LOG: MODULE B: TEST 2
LOG: completing teardown
LOG: MODULE A: TEST 1
LOG: completing teardown 
```

正如您在不成功的运行中看到的那样，设置回调正确执行了两次，但在执行任何一个测试之前。由于 teardown 删除了所需的 DOM 元素，因此第二个执行的测试必然会失败，因为它的设置被调用得太早，并且第一个执行测试（正确地）通过它的 teardown 将其撕掉了。

当第二个测试在第一个测试之前执行时，总是会出现这个问题，但我看不出这会导致问题的原因。该问题从未出现在 Chrome 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T10:44:11.910

我在 Chrome 中遇到了同样的问题（正好 50% 的时间我的测试失败了）并通过下一种方式解决了它：

**有错误的代码：**

```
require(["jquery", "jquerymobile", "QUnit", "underscore", 
    "units/general.unit", "units/mapping.unit"],
function( $, jqm, __QUnit, _ ) {
    var test_modules = Array.prototype.splice.call(arguments, 4);
    _.each( test_modules, function(test){
        test.start();
    });
    QUnit.load();
    QUnit.start();
}); 
```

**修正版**

```
require(["jquery", "jquerymobile", "QUnit", "underscore", 
    "units/general.unit", "units/mapping.unit"],
function( $, jqm, __QUnit, _ ) {
    QUnit.load();
    QUnit.start();
    var test_modules = Array.prototype.splice.call(arguments, 4);
    _.each( test_modules, function(test){
        test.start();
    });
}); 
```

`QUnit.load()`并`QUnit.start()`在测试调用之前移动，它可以解决问题。

# cocoa - 如何侦听本机 Cocoa 应用程序的 OAuth2 重定向 uri

> ID：10847148
> 
> 赞同：0
> 
> 时间：2012-06-01T08:48:03.503
> 
> 标签：cocoa, oauth-2.0, soundcloud

我开始第一次尝试制作 mac 应用程序，而首要任务是使用带有 Soundcloud 的 OAuth 对我的应用程序进行身份验证。发送授权请求很简单，但我遇到的问题是如何侦听从 Soundcloud 返回的重定向。

我已经在 info.plist 中设置了我的 URL 方案并将我的应用程序设置为侦听传入的请求，但是当我尝试注册时，我没有得到响应。我已经用 safari 测试了 URL，它运行良好。

这是我的应用程序委托的代码片段：

```
- (void) applicationDidFinishLaunching:(NSNotification *)aNotification
{
NSAppleEventManager *appleEventManager = [NSAppleEventManager sharedAppleEventManager];
[appleEventManager setEventHandler:self
                       andSelector:@selector(handleGetURLEvent:withReplyEvent:)
                     forEventClass:kInternetEventClass andEventID:kAEGetURL];

[[NXOAuth2AccountStore sharedStore] setClientID:@"myClientID" 
                                         secret:@"superSecretSecret"
                               authorizationURL:[NSURL URLWithString:@"https://soundcloud.com/connect"]
                                       tokenURL:[NSURL URLWithString:@"https://api.soundcloud.com/oauth2/token"]
                                    redirectURL:[NSURL URLWithString:@"myApp://connect"]
                                 forAccountType:@"iHopeThisWorks"];

}

- (void)handleGetURLEvent:(NSAppleEventDescriptor *)event withReplyEvent:(NSAppleEventDescriptor *)replyEvent
{
NSURL *url = [NSURL URLWithString:[[event paramDescriptorForKeyword:keyDirectObject] stringValue]];
} 
```

我的猜测是 soundcloud 不知道在哪里可以找到 myApp://connect 因为它只存在于我的本地机器上。那么我是否需要创建一些中介，例如处理 http 请求的 Web 服务？如果是这样，中介如何知道如何连接回我的机器？对不起，如果这些是基本的或被误导的问题，但就像我之前说的，这是我第一次尝试这样的事情，我的 google-fu 未能找到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:02:14.393

通常 OAuth 服务提供商应该`Resource Owner Password Credentials Grant`为桌面实施 - 在您的情况下，他们没有。

但是他们已经对 OAuth2Client 做了一个包装器——在[https://github.com/soundcloud/CocoaSoundCloudAPI](https://github.com/soundcloud/CocoaSoundCloudAPI)上查找它。文档位于[http://developers.soundcloud.com/docs#authentication](http://developers.soundcloud.com/docs#authentication)。

回答您的问题，URI 是`myApp://connect`您的应用程序是否按字面意思调用`myApp`。在 vimeo 上查看开发人员的视频：http: [//vimeo.com/28715664](http://vimeo.com/28715664)。

最好的并阅读文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:15:53.607

你可以使用 a `NSWebView`。我知道这听起来不太优雅，因为您实际上并不需要“视图”，但据我所知，这是获取重定向的最简单解决方案。

# php - PHP MYSQL 列数据下拉列表

> ID：10847149
> 
> 赞同：1
> 
> 时间：2012-06-01T08:48:09.000
> 
> 标签：php, mysql, pdo

我正在尝试使用我的一个列的数据制作一个下拉列表...如果下面的代码正在这样做，我正在徘徊...（顺便说一句，它不起作用）非常感谢！

```
<select id="teamlist" name="teamlist">
<?php
        $pdo = new PDO('mysql:host=localhost;dbname=clubresults', 'root', '12345678');
    #Set Error Mode to ERRMODE_EXCEPTION.
    $pdo->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);  

$stmt = $pdo->prepare('Select teamname from members');

   while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
     echo "<option>$row</option>";
   }
 ?>
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:52:29.287

您必须先执行语句，然后才能获取结果。

```
$stmt->execute(); 
```

或者你可以使用`query`

```
$pdo->query('select ... '); 
```

你可以[在这里](http://php.net/manual/en/pdostatement.execute.php)和[这里阅读更多](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html#7.2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:57:01.553

[参考这个链接](http://www.php.net/manual/en/pdo.prepare.php)

您必须按如下方式执行准备语句。

```
$sql = 'SELECT name, colour, calories
    FROM fruit
    WHERE calories < :calories AND colour = :colour';
$sth = $dbh->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));
$sth->execute(array(':calories' => 150, ':colour' => 'red'));
$red = $sth->fetchAll();
$sth->execute(array(':calories' => 175, ':colour' => 'yellow'));
$yellow = $sth->fetchAll(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:59:01.250

您的[pdoStatement::fetch](http://il.php.net/manual/en/pdostatement.fetch.php)返回一个关联[数组](http://php.net/manual/en/language.types.array.php)，您需要在数组中选择正确的值，而不仅仅是给数组本身打印，正如您注意到的那样打印什么都没有。

```
echo "<option>{$row['teamname']}</option>"; 
```

是你需要的

# ruby-on-rails - 如何从 Jquery Ajax 获取数据

> ID：10847150
> 
> 赞同：1
> 
> 时间：2012-06-01T08:48:10.257
> 
> 标签：ruby-on-rails, ruby, jquery

我正在使用此功能尝试向服务器发出请求。我想知道如何在 Rails 控制器中获取 Jquery Ajax 发送的数据。

```
function addnote(){

    $.ajax({

        type: "POST",

        url:SERVER_URL+"api/addNotes/",

        data: {note_text: $('#note_text').val(), note_lat: $('#lat').val(), note_lng: $('#lng')},

        success: function(data, textStatus, jqXHR) {

        },
        error: function(jqXHR, textStatus, errorThrown) {
            alert("Error=" + errorThrown);
        }
    }); 
```

这是我的导轨控制器

```
def add_notes

    end 
```

结尾

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T11:30:59.913

**在导轨控制器中**

```
def add_notes
    note_text = params[:note_text]
    note_lat = params[:note_lat]
    note_lng = params[:note_lng]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:25:28.053

你丢失了 params[:note_add] -> 你只有 :note_text, :note_lat, :note_lng。检查您的“数据：”字符串。

# windows-phone-7 - 联系人列表在 wp7 中显示空列表

> ID：10847155
> 
> 赞同：1
> 
> 时间：2012-06-01T08:48:23.180
> 
> 标签：windows-phone-7, silverlight-4.0, contacts, addressbook

当我在模拟器中测试我的应用程序时，联系人列表就会出现。但是当我在设备联系人列表中测试时没有显示。我正在使用 HTC 雷达。这是我的代码片段：

```
AddressChooserTask addressTask;        
    public ContactsPage()
    {
        InitializeComponent();
        addressTask = new AddressChooserTask();
        addressTask.Completed += new EventHandler<AddressResult>(addressTask_Completed);
    }

    void addressTask_Completed(object sender, AddressResult e)
    {
        if (e.TaskResult == TaskResult.OK)
        {
            string displayName = e.DisplayName;

            Contacts contacts = new Contacts();
            contacts.SearchCompleted += new EventHandler<ContactsSearchEventArgs>(contacts_SearchCompleted);
            contacts.SearchAsync(displayName, FilterKind.DisplayName, null);
        }
    }        

private void btnChooseContacts_Click(object sender, RoutedEventArgs e)
    {
        addressTask.Show();
    } 
```

请任何人让我摆脱问题！提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:54:54.437

你做了很多奇怪的事情。
第一，您在 foreach 循环中一遍又一遍地分配相同的对象。因此，如果最后一项为空白，则生成的文本框将为空白。
第二，您试图引用一个可能为空的属性。FirstOrDefault() 可以返回 null，因此请检查。
第三。您确实应该使用数据绑定并将结果绑定到列表框（或其他可数据绑定的 UI 元素）。

# jquery - 关闭浏览器窗口之前的 JQuery 对话框

> ID：10847156
> 
> 赞同：0
> 
> 时间：2012-06-01T08:48:24.533
> 
> 标签：jquery, dialog, popup, window

我从其他帖子中了解到，处理此问题的唯一方法是通过无法编辑的浏览器对话框。我遇到的问题是，无论我如何离开页面，该框都会出现。该页面有一个保存和删除按钮，这是离开页面的正确方法，我不希望为他们显示对话框。

这是我拥有的 JQuery

```
$(document).ready(function(){
//save or delete
  window.onbeforeunload = function() {
              var message = 'You have unsaved changes, please stay and save or delete them.';
              return message;
          }
}); 
```

保存和删除按钮是：

```
 <a id='savenewscopesheet' class='taskbutton'>Save</a>
  <a id='deletenewscopesheet' class='taskbutton'>Delete</a> 
```

我正在使用更多的 JQuery 来处理它们的功能，因此它们没有 href。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:59:13.630

**更新了代码**

```
$(document).ready(function(){
//save or delete

$('.taskbutton').click(function() {

    window.onbeforeunload = null;

    window.location='yourUrl'; //navigate to required page..

});

window.onbeforeunload = function() {
              var message = 'You have unsaved changes, please stay and save or delete them.';
              return message;
          }    

}); 
```

试试这个..

[http://jsfiddle.net/kabichill/px4ZU/](http://jsfiddle.net/kabichill/px4ZU/)

# php - 在 PHP 脚本中处理 If-modified-since 标头

> ID：10847157
> 
> 赞同：13
> 
> 时间：2012-06-01T08:48:29.890
> 
> 标签：php, if-modified-since

我有一个使用**?img=**参数调用的 PHP 脚本。

该参数的值是图像的（urlencoded）URL。

我的脚本检查该图像是否已存储在我的服务器上。

如果没有 - 它会下载它。之后，它可以选择调整图像大小并将其发送到 STDOUT，即返回到请求浏览器，并在前面加上**Content-Type**和**Last-modified**标头：

```
Connection:close
Content-Type:image/jpeg
Date:Fri, 01 Jun 2012 08:28:30 GMT
Last-Modified:Fri, 01 Jun 2012 08:02:44 GMT
Server:Apache/2.2.15 (CentOS)
Transfer-Encoding:chunked
X-Powered-By:PHP/5.3.3 
```

这是解决一些跨域问题所必需的，并且一年多以来对我来说效果很好：

[![截屏](../Images/30ea560859e99d440765713bfc7bbc70.png)](https://i.stack.imgur.com/9msZR.png)

但是，我想添加功能来处理传入的**If-Modified-since**标头 - 发送**未修改的 304**响应。

我的问题是：

1) 在 Apache 中运行时，这在 PHP 中是否可行？

2) 如何在 PHP 中处理（即解析和生成）最好的日期？

奖金问题）如何为调整大小的图像添加**Content-Length标头？**

我的代码如下（我省略了 CURL 下载部分）：

```
<?php

define('CACHE_DIR', '/var/www/cached_avatars/');

$img    = urldecode($_GET['img']);
$cached = CACHE_DIR . md5($img);

# omitted downloading part for brevity

$readfh = fopen($cached, 'rb');
if ($readfh) {
        flock($readfh, LOCK_SH);

        $size = getimagesize($cached);
        $w    = $size[0];
        $h    = $size[1];
        $type = $size[2];
        $mime = $size['mime'];

        # find the downscale factor to fit image into $maxw x $maxh
        $scale = max($w / $maxw, $h / $maxh);

        header('Content-Type: ' . $size['mime']);
        header('Last-Modified: ' . gmdate('D, d M Y H:i:s T', filemtime($cached)));

        $length = filesize($cached);
        $buf = fread($readfh, $length);
        fclose($readfh);

        # the image is smaller than $maxw x $maxh, do not scale up
        if ($scale <= 1) {
                header('Content-Length: ' . $length);
                print($buf);
                return;
        }

        $tw = $w / $scale;
        $th = $h / $scale;
        $image = imagecreatefromstring($buf);
        $thumb = imagecreatetruecolor($tw, $th);
        imagecopyresampled($thumb, $image, 0, 0, 0, 0, $tw, $th, $w, $h);
        imagedestroy($image);

        # How to add Content-Length here, after image resizing?

        if (IMAGETYPE_JPEG == $type)
                imagejpeg($thumb, null, 75);
        else if (IMAGETYPE_PNG == $type)
                imagepng($thumb, null, 9);
        else if (IMAGETYPE_GIF == $type)
                imagegif($thumb, null);

        imagedestroy($thumb);
}

?> 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-01T08:55:26.107

这在 PHP 中绝对是可能的！

当浏览器检查是否有修改时，它会发送一个`If-Modified-Since`标头；在 PHP 中，此值将设置在`$_SERVER['HTTP_IF_MODIFIED_SINCE']`.

要解码日期/时间值（我相信使用 rfc822 编码），您可以使用`strtotime()`，所以：

```
if (isset($_SERVER['HTTP_IF_MODIFIED_SINCE']) && 
    strtotime($_SERVER['HTTP_IF_MODIFIED_SINCE']) >= filemtime($localFileName))
{
    header('HTTP/1.0 304 Not Modified');
    exit;
} 
```

说明：如果`If-Modified-Since`标头是由浏览器发送的，并且日期/时间至少是您所服务文件的修改日期，则您编写“304 Not Modified”标头并停止。

否则，脚本将照常继续。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-12T12:26:04.487

我最近不得不使用此功能（通过 PHP 提供图像）以使图像仅对注册用户可见。Jack 的代码很有帮助，但我必须做一些 hack 才能让它完美运行。我想我应该分享这个。

```
if (isset($_SERVER['HTTP_IF_MODIFIED_SINCE']) && 
    strtotime($_SERVER['HTTP_IF_MODIFIED_SINCE']) >= filemtime($path_to_image))
{
    header('HTTP/1.0 304 Not Modified');
    header("Cache-Control: max-age=12096000, public");
    header("Expires: Sat, 26 Jul 2015 05:00:00 GMT");
    header("Pragma: cache");
    exit;
}else{
    header("Content-type: image/jpeg");
    header("Cache-Control: max-age=12096000, public");
    header("Expires: Sat, 26 Jul 2015 05:00:00 GMT");
    header("Pragma: cache");
    echo file_get_contents($path_to_image);
} 
```

简而言之，如果脚本是浏览器请求，则返回 Not Modified `HTTP_IF_MODIFIED_SINCE`。否则，图像将提供适当的标题和到期日期。

# javascript - 访问 jquery 中的子元素

> ID：10847158
> 
> 赞同：-1
> 
> 时间：2012-06-01T08:48:35.203
> 
> 标签：javascript, jquery

```
<div id="main">
 <div id="1">
   <div>contents..</div>
   <div>contents..</div>
 </div>
 <div id="2">
   <div>contents..</div>
   <div>contents..</div>
 </div>
 <div id="3">
   <div>contents..</div>
   <div>contents..</div>
 </div>
</div> 
```

我怎样才能将所有内容都访问`div object`到一个拥有的数组中`contents in there innerHTML`？

**编辑**

好的，我试过了：

```
var totaldiv = $("#main").children();
var totalElements = [];
var c = 0;
$.each(totaldiv, function (i, v) {
    $(totaldiv[i]).children().each(function () {
        totalElements[c++] = $(this);
    });
}); 
```

有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T08:51:23.500

你有[`.filter()`](http://api.jquery.com/filter)

```
var divArr = $('#main div > div').filter(function() {
    return $(this).html();  // return those div not empty, has text or html element
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/qam7n/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:54:54.763

您可能希望排除更高级别的元素 - 如果您单独使用`.text()`，您将获得包含其下方*任何位置*的文本的每个元素，而不仅仅是在子节点中：

```
var haveContent = $('div').filter(function() {
    return $(this).children().length === 0 && $.trim($(this).text()) !== '';
}).get(); 
```

演示在[http://jsfiddle.net/alnitak/WNKLA/](http://jsfiddle.net/alnitak/WNKLA/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:59:16.047

在最基本的情况下，以下内容将与您上面的示例相匹配：

```
$('#main div div'); 
```

假设有可能没有任何文本内容的 div 元素，你可以试试这个：

```
$('#main div div').contents().filter(function(){ return this.length > 0; }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T09:03:36.187

你可以`.contents()`用来访问innerhtml中的所有div内容。

```
var arry = $('div:contains(contents)'); 
```

检查此链接；

[http://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)

和

[https://developer.mozilla.org/en/nodeType](https://developer.mozilla.org/en/nodeType)

并检查这个..它类似于你的问题

[Jquery：检查 div 是否包含文本，然后执行操作](https://stackoverflow.com/questions/902597/jquery-checking-to-see-if-div-contains-text-then-action)

# java - 监视 Java 类方法调用

> ID：10847160
> 
> 赞同：1
> 
> 时间：2012-06-01T08:48:39.807
> 
> 标签：java

是否可以监视对 Java 类的实例进行的方法调用。我知道我可以使用`java.lang.reflect.InvocationHandler`. 我想知道是否还有其他更简单的方法不涉及修改类的源代码？

编辑：例如`java.util.HashMap`。这个类的源代码不可用 - 至少对我来说它不是在 Oracle 的 JDK 下运行时。我将如何拦截对 put(...) 方法的调用。我想检查调用中的参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T09:01:54.330

您可以使用[Aspect Oriented Programming](http://en.wikipedia.org/wiki/Aspect-oriented_programming)来做到这一点。你只需要声明你想要“窥探”的代码的切入点。简而言之-您可能会声明注释，将它们放在方法签名之上，并且所有带注释的方法都可能在编译时由编译器修改（或在将字节码加载到 jvm 时进行修改），而无需修改其源代码.

[AspectJ](http://en.wikipedia.org/wiki/AspectJ)对此很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:58:21.393

让我重新表述您的问题：每次执行对特定类的非静态方法调用时，您都希望执行自己的代码。我还假设您可以完全访问 JVM 环境。

看看[JMX Beans](http://docs.oracle.com/javase/tutorial/jmx/mbeans/standard.html)。这些 bean 是 Java 虚拟机行为的接口。

另请查看[Java 代理](http://javahowto.blogspot.be/2006/07/javaagent-option.html)规范，以修改您无权访问 MAIN 方法的现有应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-24T15:58:39.287

你可以试试[JMSPY](https://github.com/dmgcodevil/jmspy)。Jmspy 是一个 java 库，它允许记录 java 方法调用，将数据保存到一个名为快照的文件中，并使用 jmspy 查看器对其进行分析。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T08:56:55.533

看看[AspectJ](http://www.eclipse.org/aspectj/)。它允许您在方法调用中插入钩子，并在方法主体运行之前和之后执行任意代码。它使用自定义类加载器解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T09:00:01.880

我建议研究允许分离横切关注点（日志等）的[面向方面的编程。](http://en.wikipedia.org/wiki/Aspect-oriented_programming)

这样，为您的方法指定切入点，您可以“窥探”这些方法。

# matlab - Matlab中特定时间间隔的几何平均值

> ID：10847163
> 
> 赞同：0
> 
> 时间：2012-06-01T08:48:56.427
> 
> 标签：matlab, time-series, moving-average

假设我有一个矩阵 (NX2)，其中第一列的元素是秒数（从午夜开始），第二列是与秒相关联的股票收益。如何使用函数 geomean 并计算特定时间间隔的几何回报？假设几何平均值*每隔*一分钟返回一次？问题是我可能会说在某个特定的分钟间隔内有 4 次股票回报，而有时在另一个间隔内有 10 次回报。如果我按分钟提取所有交易，则每分钟间隔内登记的回报数量将不一样。
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:30:47.877

只要您将时间以分钟为单位（从午夜开始）作为整数，您就可以使用我的[合并](http://www.mathworks.com/matlabcentral/fileexchange/8354-consolidator)函数和 geomean 来计算您需要的时间，并且它是矢量化的。只需从文件交换处下载即可。

[Consolidator](http://www.mathworks.com/matlabcentral/fileexchange/8354-consolidator)将返回它在给定分钟内找到任何数据的时间向量，以及每个时间返回的几何平均值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T14:57:20.300

你可以用一个简单的方法做到这一点`arrayfun`：

```
>> n = [15 1;25 2;67 3; 99 4;182 5] #% example data

n =
 #% t(s)   val  
    15     1
    25     2
    67     3
    99     4
   182     5

>> t1=0:60:240;
>> t2=t1+60;
>> arrayfun(@(t1,t2) geomean(n( n(:,1)>t1 & n(:,1)<=t2, 2)), t1,t2)

ans =

    1.4142    3.4641       NaN    5.0000       NaN 
```

`t1`并且`t2`只是您感兴趣的窗口的开始和结束时间的向量。在这里，我将它们设置为连续的 60 秒间隔；但是它们可以是您想要的任何东西。不连续的，重叠的，你说的。

`n`匿名函数在被调用时捕获存在的矩阵`arrayfun`，并为每`t1,t2`对矩阵的行创建一个逻辑索引。

# iphone - ObjectAL：在 fadeTo:duration:target:selector 上崩溃：

> ID：10847167
> 
> 赞同：0
> 
> 时间：2012-06-01T08:48:59.303
> 
> 标签：iphone, ios, fadeto

出于某种原因，我不确定为什么，我的应用程序在 OALAudioTrack 对象上的 fadeTo 方法上不断崩溃。

我有三个不同的 OALAudioTrack 对象，它们位于一个数组中，如果给定的值不同，我只需要更改一个 OALAudioTrack 对象。当值不同时，我需要淡出 OALAudioTrack 对象，然后淡入新的 OALAudioTrack 对象并替换数组中的 OALAudioTrack 对象，但我不能这样做，因为在第一次淡出时它会一直崩溃（到 0.0f ）。当应用程序崩溃时，它总是在同一行崩溃，即 OALActionManager.m 第 159 行（ NSUInteger index = [targets indexOfObject:action.target]; ）并且错误显示“线程 1 EXE_BAD_ACCESS”。在进行淡入淡出之前我必须做些什么，任何帮助都将不胜感激，因为我已经看了一天多，而且我似乎无法克服这个错误。我正在使用的代码如下：

```
if ([[self.soundScapes objectAtIndex:i] isKindOfClass:[OALAudioTrack class]])
{
    [self.tmpSoundScapes removeAllObjects];
    [self.tmpSoundScapes addObject:[fnArr objectAtIndex:i]];
    [self.tmpSoundScapes addObject:[NSNumber numberWithInt:i]];

    OALAudioTrack *currentTrack = [self.soundScapes objectAtIndex:i];

    if ([currentTrack playing])
    {
      NSLog(@"is playing");
      [currentTrack stopFade];

      //This is where the app crashes
      [currentTrack fadeTo:0.0 duration:1.5 target:self selector:@selector(onFadeComplete:)];
    }
}

-(void)onFadeComplete:(id)sender
{
    NSLog(@"fade complete");

    NSString *fn = [self.tmpSoundScapes objectAtIndex:0];
    int i = [[self.tmpSoundScapes objectAtIndex:1] intValue];

    OALAudioTrack *currentTrack = [self.soundScapes objectAtIndex:i];
    [currentTrack stop];
    currentTrack = nil;

    OALAudioTrack* track = [OALAudioTrack track];
    [track preloadFile:fn];
    track.autoPreload = YES;
    track.numberOfLoops = -1;   // Loop forever when playing.            
    track.gain = 0.0f; // volume
    [track play];

    [self.soundScapes replaceObjectAtIndex:i withObject:track];
    [self.soundScapesFiles replaceObjectAtIndex:i withObject:fn];

    int timer;
    if (i==1) 
        timer = 10.0f;
    else if (i==2)
        timer = 25.0f;
    else
        timer = 0.5f;

//    [self performSelector:@selector(onPlayScoundScape:) withObject:[NSNumber numberWithInt:i] afterDelay:timer];
    [track fadeTo:1.0f duration:timer target:self selector:@selector(onPlayScoundScape:)];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T10:47:48.517

崩溃的部分是“action.target”。“目标”是一个弱引用，所以如果你的轨道在动作完成之前解除分配，它会崩溃。

我怀疑在某些时候，您的代码要么以其他方法从 self.soundScapes 中删除轨道，要么正在对 onFadeComplete 进行另一个调用，从而在轨道淡入淡出完成之前生成相同的索引（从而驱逐当前正在消失的轨道）。

# forms - Drupal 6：创建自定义表单时如何将多个表单元素保持在一行中？

> ID：10847170
> 
> 赞同：0
> 
> 时间：2012-06-01T08:49:15.027
> 
> 标签：forms, drupal, drupal-6

我创建了一个自定义表单，其中有四个元素。我想将所有这些元素放在一行中。怎么做 ？

我用谷歌搜索了它，找不到任何相关的东西..如果 CSS 有什么事情要做，那么请建议我将 DIV 放在哪里。

我在下面粘贴代码 -

```
<?php

function taskform_form(&$node, $form_state)
{

  $form['date'] = array(
    '#type' => 'date', 
    '#title' => t('Date'),        
  );

  $form['edproject'] = array(
    '#type' => 'select', 
    '#title' => t('Project'), 

    '#options' => array(
      1 => 'Konnected', 
      2 => 'eLearning', 
      3 => 'Others',
    ),
    '#description' => t('Choose a project'),
  );

  $form['task'] = array(
    '#type' => 'textfield', 
    '#title' => t('Task'), 
    '#size' => 30,
    '#required' => TRUE,
    '#maxlength' => 30,
    '#description' => t('Enter the task'),
  );

  $form['remarks'] = array(
    '#type' => 'textarea', 
    '#title' => t('Remarks'), 
    '#size' => 30,
    '#cols' => 6,
    '#description' => t('Enter remarks (If any).'),
  );

  $form['submit'] = array(
    '#type' => 'submit',
    '#value' => t('Add Task'),
    '#submit' => array('taskform_form_submit'),
  );
  return $form;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:17:54.633

您可以使用表单元素的前缀和后缀属性并将其显示在一行中。如果对您有用，请查看下面的代码。

```
function taskform_form(&$node, $form_state)
{
  $form['date'] = array(
    '#type' => 'date', 
    '#title' => t('Date'),
    '#prefix' => '<table><tr><td>',
    '#suffix' => '</td>',   
  );

  $form['edproject'] = array(
    '#type' => 'select', 
    '#title' => t('Project'), 

    '#options' => array(
      1 => 'Konnected', 
      2 => 'eLearning', 
      3 => 'Others',
    ),
    '#description' => t('Choose a project'),
    '#prefix' => '<td>',
    '#suffix' => '</td>',
  );

  $form['task'] = array(
    '#type' => 'textfield', 
    '#title' => t('Task'), 
    '#size' => 30,
    '#required' => TRUE,
    '#maxlength' => 30,
    '#description' => t('Enter the task'),
    '#prefix' => '<td>',
    '#suffix' => '</td>',
  );

  $form['remarks'] = array(
    '#type' => 'textarea', 
    '#title' => t('Remarks'), 
    '#size' => 30,
    '#cols' => 6,
    '#description' => t('Enter remarks (If any).'),
    '#prefix' => '<td>',
    '#suffix' => '</td></tr></table>',
  );

  $form['submit'] = array(
    '#type' => 'submit',
    '#value' => t('Add Task'),
    '#submit' => array('taskform_form_submit'),
  );

  return $form;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T21:09:43.917

或者，您可以使用前缀和后缀将整个元素包装在一个 div 中，并从 CSS 中定位该 div。这样，您可以将结构信息与渲染分开。

另一种选择是编写具有魔力的自定义主题函数。但是，我会选择前缀后缀解决方案，因为它在短期内更容易维护。

查看[这个快速教程](http://drupal.org/node/751826)，主题表单部分描述了您的选项。

# c# - 从源代码中提取共享秘密有多容易

> ID：10847174
> 
> 赞同：1
> 
> 时间：2012-06-01T08:49:49.157
> 
> 标签：c#, .net

我想加密一个字符串并以加密格式将其保存到磁盘。为此，我必须将共享密钥放在源代码中的某个位置。用户在程序运行时提取它有多容易？如果他们这样做，这不是世界末日，但如果他们看不到这个字符串，我会更喜欢它。我正在使用 c# .net

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:52:27.573

对于知道自己在做什么的人（即：任何有兴趣首先“破解”您的应用程序的人来说，这都是微不足道的）。它会阻止最随意的非技术用户访问磁盘文件中的字符串，但仅此而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:56:05.060

它的孩子的游戏。你听说过Reflector吗。它是一个读取ILCode并生成源代码的软件。从源代码中获取秘密就像在公园里散步。您可以使用以下安全措施

**使用字符串加密混淆您的代码**

**添加自定义安装程序操作以在 app.config 文件中存储使用系统特定密钥 (DPAPI) 加密的秘密**

不管是什么方法，都不是 100% 的破解证明。如果你公开提供可执行文件，它可以被逆转

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T08:57:07.820

将密钥存储在配置文件中并使用 aspnet_regiis 实用程序加密配置文件的部分。

[查看完整代码以加密配置文件](http://www.dotnetprofessional.com/blog/post/2008/03/03/Encrypt-sections-of-WebConfig-or-AppConfig.aspx)

# c# - wcf服务中的暴露方法

> ID：10847175
> 
> 赞同：0
> 
> 时间：2012-06-01T08:49:51.933
> 
> 标签：c#, wcf

所以我终于完成了 WCF 服务中的缓存。不管怎样，现在这是我的界面

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    IEnumerable<Screen_Data> GetData(DateTime d);
} 
```

这是我实现这个接口的类

```
[AspNetCompatibilityRequirements(RequirementsMode =
                       AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
public class Service1 : IService1
{
   [AspNetCacheProfile("CacheFor2Minutes")]
   [WebGet(UriTemplate = "?DateTime={DateTime}")]
   public IEnumerable<Screen_Data> GetData(DateTime d)
   {
       ScreenScrapingEntities1 db = new ScreenScrapingEntities1();
       IEnumerable<Screen_Data> sd = from p in db.Screen_Data
                                     where p.DateTime > d
                                     select p;
       return sd;
    }
} 
```

这个 screen_data 是一个数据库表，我从数据库生成了一个 ado.net 实体数据模型。

我的问题是，当我尝试从传递日期时间值的 WCF 客户端调用此方法时，它应该返回超过 10 行。我不确定如何从该方法返回这些行，有人可以帮助我使用我在课堂上编写的这段代码，它甚至不使用 linq 查询中的 lambda 表达式。

这就是我`GetData`从客户端调用此方法的方式

```
DateTime t = DateTime.Parse("2012-05-31 11:38:29.070");
ServiceReference1.Service1Client client = new ServiceReference1.Service1Client();
client.GetData(t); 
```

这是创建模型时生成的类

```
[EdmEntityTypeAttribute(NamespaceName="ScreenScrapingModel", Name="Screen_Data")]
    [Serializable()]
    [DataContractAttribute(IsReference=true)]
    public partial class Screen_Data : EntityObject
    {
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:15:46.150

使用你自己的 Dto

```
[DataContract]
public class ScreenDto
{
    [DataMember]
    public int Id { get; set; }
    [DataMember]
    public string  Name { get; set; }
    [DataMember]
    public DateTime DateAdded { get; set; }
} 
```

尝试返回数组

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    ScreenDto[] GetData(DateTime d);
} 
```

更改方法实现

```
public ScreenDto[] GetData(DateTime d)
   {
       ScreenScrapingEntities1 db = new ScreenScrapingEntities1();
       ScreenDto[] sd = (from p in db.Screen_Data
                            where p.DateTime > d
                            select new ScreenDto()
                            {Id = p.Id, Name = p.Name, DateAdded =p.Date)
                            .ToArray();
       return sd; // put break point here, to check return data
    } 
```

称它为

```
ServiceReference1.Service1Client client = new ServiceReference1.Service1Client();
var results =  client.GetData(t); 
```

启动 Web 服务和客户端应用程序，您的 Web 服务应该处于调试模式，检查您是否收到来自客户端的调用，以及它从服务端返回的结果。

# c++ - 我应该在头文件中定义静态内联方法吗？

> ID：10847176
> 
> 赞同：23
> 
> 时间：2012-06-01T08:49:52.127
> 
> 标签：c++, static, inline, header-files

我已经了解了通常最好不要在头文件中定义任何内容，因为包含头文件的每个其他文件都会生成冗余副本。但是，在静态内联方法的情况下，似乎我必须在现场定义它（至少 Visual Studio 2010 不允许我这样做）。因此，如果我在头文件中编写接口，则无法在类定义之外或在 .cpp 文件中定义静态内联方法。

那么，我应该费心使用静态内联方法吗？还有一个相关的问题：我是否应该在头文件中定义任何方法或变量（常量呢）？

无论如何，奇怪的是，我的 C++ 书籍中并没有详细介绍它。

编辑：我通读了关于静态内联方法的类似问题，但似乎没有一个直接解决这个问题。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-01T09:02:21.793

> **如何在头文件中添加函数定义？**

这可以通过 3 种可能的方式实现：

1.  标记功能`inline`或
2.  制作函数`static`或
3.  将函数放在匿名命名空间中。

> **这样做的正确方法是什么？**

`#1`即：标记函数`inline`是正确的方法，而不会破坏***One Definition Rule***。

> **其他两种方法有什么问题？**

在这两个`#2`和`#3`每个翻译单元中都将包含它自己的函数版本，并且程序将包含函数的几个不同版本，从而导致生成的二进制文件的大小增加。
即：对于一个`static`函数`fun()`，`&fun`在每个翻译单元中会有所不同，程序会包含`N`不同版本的函数。
此外，如果函数包含静态局部变量，那么将有`N`不同的静态局部变量，每个函数实例一个。

> **第一种方法如何避免这个问题？**

`inline`函数具有外部链接。
当您标记一个函数时`inline`，该函数将在所有翻译单元中具有相同的地址。此外，在内联函数体内定义的静态局部变量和字符串文字在翻译单元中被视为相同的对象。
简而言之，内联函数将在所有翻译单元中具有相同的地址。

> **头文件中的`static inline`函数定义是怎么回事？**

`static`关键字强制函数具有内部链接。
每个定义为 inline 的函数实例都被视为一个单独的函数，并且每个实例都有自己的静态局部变量和字符串文字的副本。因此，这将类似于`#2`。

**注意：**
该标准要求`inline`用户程序中的所有函数定义必须在使用或调用该函数的所有翻译单元中具有完全相同的定义。

* * *

相关标准参考：

**C++03 标准**

**3.2 一个定义规则：**
**第 3 段：**

> **每个程序都应包含该程序中使用的每个非内联函数或对象的一个​​定义；无需诊断**。定义可以显式出现在程序中，可以在标准或用户定义库中找到，或者（在适当时）隐式定义（参见 12.1、12.4 和 12.8）。**内联函数应在使用它的每个翻译单元中定义。**

**7.1.2 函数说明符**
**第 4 段：**

> 内联函数应在使用它的每个翻译单元中定义，并且在每种情况下都应具有完全相同的定义（3.2）。[注意：在其定义出现在翻译单元之前，可能会遇到对内联函数的调用。] 如果具有外部链接的函数在一个翻译单元中声明为内联，则应在其出现的所有翻译单元中声明为内联；不需要诊断。**具有外部链接的内联函数在所有翻译单元中应具有相同的地址。anextern 内联函数中的静态局部变量始终引用同一个对象。外部内联函数中的字符串文字是不同翻译单元中的相同对象。**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-01T09:02:30.413

> (1) 我无法在类定义之外或在 .cpp 文件中定义静态内联方法。

`static inline`您可以在头文件中的类之外定义方法。[演示](http://ideone.com/tE6AH)。您不能在 .cpp 文件中定义它们。

> (2) 我应该费心使用静态内联方法吗

我会说，它们很容易避免。如果您出于自己的目的需要查看头文件中的正文，则只需将它们设为`inline`.

> （3）我是否应该在头文件中定义任何方法或变量（常量呢）

1.  在类体内，您可以定义`static const`整型数据。
2.  `static`方法可以在类体内定义
3.  `static inline`方法可以定义在类主体内部或头文件中的类主体外部
4.  `static`数据成员必须在单个`.cpp`文件中定义以遵守*一个定义规则*

# java - Wrapping StyledText：强制不换行

> ID：10847178
> 
> 赞同：1
> 
> 时间：2012-06-01T08:49:58.947
> 
> 标签：java, swt

我如何告诉`StyledText`创建的`SWT.WRAP`样式不包含在单词中（它应该只包含空格）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:54:56.000

`StyledText` **仅**包含空格。只有当一个单词对于一行来说太长时，它实际上会在一个单词中换行。但在这种情况下，没有其他办法可以做。

# ruby-on-rails - Ruby on rails 算术表达式

> ID：10847188
> 
> 赞同：-2
> 
> 时间：2012-06-01T08:50:28.993
> 
> 标签：ruby-on-rails

我有一个这样的控制器动作：

```
def index    
    @start_limit = 0    
    @last_limit = 5    
    @start = params[:start]    
    @last = params[:next]    
    if @last    
      @start_limit = (@Start_limit) + (@last)  
      @last_limit = (@last_limit) + (@last)  
    elsif @start  
      @start_limit = (@start_limit) - (@start)  
      @last_limit = (@last_limit) - (@start)  
    else  
      # do nothing  
    end  
end 
```

当我正在执行包含此类控制器操作的程序时，会发生以下错误：
`undefined method '+' for nil:NilClass`. 我需要一个解决方案。
我是RoR的新手，我欢迎任何人的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T08:57:42.943

Ruby 是一种区分大小写的语言，因此`@start_limit`（`@Start_limit`第 7 行，大写字母 s）是两个不同的变量。将其更改为小写，它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T08:57:43.257

代替：

`@start_limit = (@Start_limit) + (@last)`

和：

`@start_limit = (@start_limit) + (@last)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-27T09:10:13.023

改变

```
if @last    
      @start_limit = (@Start_limit) + (@last)  
      @last_limit = (@last_limit) + (@last)  
    elsif @start  
      @start_limit = (@start_limit) - (@start)  
      @last_limit = (@last_limit) - (@start)  
    else 
```

至

```
if @last    
      @start_limit = (@start_limit) + (@last)  
      @last_limit = (@last_limit) + (@last)  
    elsif @start  
      @start_limit = (@start_limit) - (@start)  
      @last_limit = (@last_limit) - (@start)  
    else 
```

# iphone - 打包支持国际化的ipad app

> ID：10847191
> 
> 赞同：1
> 
> 时间：2012-06-01T08:50:35.523
> 
> 标签：iphone, ipad, internationalization, iso

我需要构建一个支持国际化（大约 16 种语言）并包含大量图像和文本的应用程序。打包它们的最佳方式是什么？当我在应用商店中分发它时，我应该为每种语言都有一个单独的应用程序，还是只有一个管理所有语言的应用程序。

这更像是一个架构决策，而不是技术决策。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:29:35.763

您可以利用内置的本地化功能。对于文本，您可以使用该方法`NSLocalizedString(@"blah", nil)`。您还可以添加与此功能一起使用的文件，以便为用户提供正确的语言`Localizable.Strings`。

在 iTunes Connect 中，您可以选择为您选择的每种语言添加不同的描述和屏幕截图（通过 iTunes Connect 手动设置）。iTunes 还将处理所有不错的定价问题。

这是一个[很好的教程](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)，可以帮助您入门。您可能会遇到的一个问题是向`Localizable.Strings`文件中添加额外的语言，轻松做到这一点的方法是通过终端（因为 Xcode 不允许您将额外的文件拖放到其中）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T18:15:32.660

您不需要为每种语言都提供单独的应用程序。只需创建一个名为 Localizable.Strings 的文件。教程：[http](http://www.ibabbleon.com/iphone_app_localization.html) ://www.ibabbleon.com/iphone_app_localization.html和[http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)

我希望这对你有帮助。

# android - OpenGL ES2：顶点索引和纹理坐标？

> ID：10847192
> 
> 赞同：1
> 
> 时间：2012-06-01T08:50:37.480
> 
> 标签：android, graphics, opengl-es, opengl-es-2.0

我正在使用顶点索引来渲染我的网格。传递顶点索引和顶点位置没有问题。

但是我想知道在纹理坐标的情况下，我是否也应该使用索引传递它们？

**编辑：**我正在尝试传递和渲染 OBJ 文件，并对如何处理“fx/y/z”中描述的纹理坐标感到困惑

例如，在 Cube 的情况下，我传递了我的顶点坐标：

*8 顶点坐标

*36 个顶点索引：

当传递纹理（甚至法线）时，我应该将它们传递为：

* *（8个纹理坐标+36个纹理坐标索引）*。如果是这样，如何在渲染期间分配它们？

**或者**

* *（36 个纹理坐标）*？

这是我的抽象网格类，

```
public class AbstractMesh3D {
    //private int buffers[]={0,0};
    private int vbVertices[]=new int[1];
    private int vbIndices[]=new int[1];
    private int vbNormals[]=new int[1];
    private int vbColors[]=new int[1];
    private int vbTextureCords[]=new int[1];
    private boolean bVertices=false;
    private boolean bIndices=false;
    private boolean bNormals=false;
    private int numOfVertices;
    private int numOfIndices;
    private int numOfNormals;
    private World3D _world;
    private String textureId;

    public void setTextureId(String textureId) {
        this.textureId = textureId;
    }

    public AbstractMesh3D(){

    }
    public void setWorld(World3D world){
        this._world=world;
    }
    public void setVertexBuffer(float vertexData[]){
        GLES20.glGenBuffers(1, vbVertices, 0);
        //Short
        FloatBuffer vertexFloatBuffer=ByteBuffer.allocateDirect(vertexData.length*4).order(ByteOrder.nativeOrder()).asFloatBuffer();
        vertexFloatBuffer.put(vertexData);
        vertexFloatBuffer.position(0);

        //GLES20.glGenBuffers(1, vbVertices, 0);
        GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, vbVertices[0]);
        GLES20.glBufferData(GLES20.GL_ARRAY_BUFFER, vertexData.length*4, vertexFloatBuffer, GLES20.GL_STATIC_DRAW);
        numOfVertices=vertexData.length/3;
        bVertices=true;

        GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, 0);
        GLES20.glBindBuffer(GLES20.GL_ELEMENT_ARRAY_BUFFER, 0);

        //vertexFloatBuffer.
    }

    public void setNormalBuffer(float normalData[]){
        GLES20.glGenBuffers(1, vbNormals, 0);
        //Short
        FloatBuffer vertexFloatBuffer=ByteBuffer.allocateDirect(normalData.length*4).order(ByteOrder.nativeOrder()).asFloatBuffer();
        vertexFloatBuffer.put(normalData);
        vertexFloatBuffer.position(0);

        GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, vbNormals[0]);
        GLES20.glBufferData(GLES20.GL_ARRAY_BUFFER, normalData.length*4, vertexFloatBuffer, GLES20.GL_STATIC_DRAW);
        bNormals=true;
        numOfNormals=normalData.length/3;

        GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, 0);
        GLES20.glBindBuffer(GLES20.GL_ELEMENT_ARRAY_BUFFER, 0);

    }

    public void setIndices(short indices[]){
        GLES20.glGenBuffers(1, vbIndices, 0);
        ShortBuffer vertexFloatBuffer=ByteBuffer.allocateDirect(indices.length*2).order(ByteOrder.nativeOrder()).asShortBuffer();
        vertexFloatBuffer.put(indices);
        vertexFloatBuffer.position(0);

        //GLES20.glGenBuffers(1, buffers[1], 0);
        GLES20.glBindBuffer(GLES20.GL_ELEMENT_ARRAY_BUFFER, vbIndices[0]);
        GLES20.glBufferData(GLES20.GL_ELEMENT_ARRAY_BUFFER, indices.length*2, vertexFloatBuffer, GLES20.GL_STATIC_DRAW);
        numOfIndices=indices.length;
        bIndices=true;

        GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, 0);
        GLES20.glBindBuffer(GLES20.GL_ELEMENT_ARRAY_BUFFER, 0);

    }

    public void render(){
        int posHandle=_world.getOgl_aPositionHandle();
        int normalHandle=_world.getOgl_aNormalHandle();

        GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, vbVertices[0]);
        GLES20.glEnableVertexAttribArray(posHandle);
        GLES20.glVertexAttribPointer(posHandle, 3, GLES20.GL_FLOAT, false, 12, 0);

        if(bNormals){
            GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, vbNormals[0]);
            GLES20.glEnableVertexAttribArray(normalHandle);
            GLES20.glVertexAttribPointer(normalHandle, 3, GLES20.GL_FLOAT, false, 12, 0);
        }

        if(bIndices){   
            //System.out.println("render indices");
            GLES20.glBindBuffer(GLES20.GL_ELEMENT_ARRAY_BUFFER, vbIndices[0]);

            GLES20.glDrawElements(GLES20.GL_TRIANGLES, numOfIndices, GLES20.GL_UNSIGNED_SHORT, 0);          

        }else{
            GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, numOfVertices);
        }
        GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, 0);
        GLES20.glBindBuffer(GLES20.GL_ELEMENT_ARRAY_BUFFER, 0);

        GLES20.glDisableVertexAttribArray(posHandle);
        GLES20.glDisableVertexAttribArray(normalHandle);
        //System.out.println("rendered");

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T22:29:06.217

您必须重新排序 texcoords 和顶点，以使它们共享相同的索引。您不能对不同的属性使用单独的索引。

顶点的数量总是必须等于 texcoord 的数量必须等于法线的数量，等等。

在解析 OBJ 时，这将涉及复制一些顶点/纹理坐标，以便您可以满足此要求。

# c# - Windows phone7：检查 Internet 连接可用性

> ID：10847197
> 
> 赞同：3
> 
> 时间：2012-06-01T08:51:00.763
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

在 windows phone7 中，我只需要在继续下一组操作之前检查 Internet 连接是否可用。我搜索并找到了许多帖子中建议的 3 个选项。它们如下。

```
(a). bool isNetworkAvailable = NetworkInterface.GetIsNetworkAvailable();
(b). bool isNetworkAvailable = DeviceNetworkInformation.IsNetworkAvailable;
(c). bool isNetworkAvailable = (NetworkInterface.NetworkInterfaceType != NetworkInterfaceType.None); 
```

在 (a) 和 (b) 选项中，即使 WIFI 关闭并且没有可用的互联网连接，它也会提供 TRUE 作为结果。但是（c）在互联网不可用时提供准确（真实）的结果。但是需要**很长时间**才能做出反应。在那之前，应用程序被卡住了......

我用一个真实的设备（不是只用模拟器）检查了所有这些，并努力寻找哪种方式是检查设备互联网可用性的最佳方式。

任何建议都非常感谢......谢谢提前......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:27:32.000

知道网络可用并连接到更广泛的 Internet 之间是有区别的。`NetworkInterface.GetIsNetworkAvailable()`非常快，如果网络接口被禁用，将返回 false。

如果它返回网络可用，则仅表示您可以连接 - DNS 查找速度、蜂窝网络连接（如果没有 WiFi 连接）和设备不可用仍然存在潜在问题已经连接等

如果它会导致性能问题，您应该考虑将网络访问从 UI 线程中移出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:36:42.793

我们来用这个。我在我的项目中有同样的概念，我做了以下事情。希望能帮助到你。

```
 public bool netWorkAvailable()
    {
        if (NetworkInterface.GetIsNetworkAvailable())
        {
            Logger.log(TAG, "netWorkAvailable()");
            return true;
        }
        return false;
    }

 if (netWorkAvailable())
   {
     buffer.Append(SERVER_URL);
     buffer.Append("_req=").Append(8);
     httpConnection = new HttpConnection();
     httpConnection.connect(REQ_REGISTRATION, buffer.ToString(), listener, null);
     httpConnection.Post();
    } 
```

我有不同的类来处理所有的httpconnection。除了这些，我还为我的项目检查了一些其他的东西，它们如下：

```
public bool IsWifiAvailable()
    {
     if ((NetworkInterface.NetworkInterfaceType == NetworkInterfaceType.Wireless80211))
         {
          return true;
         }
     else
       {
        return false;
       }
    }

    public bool threeGkAvailable()
    {
        if ((NetworkInterface.NetworkInterfaceType == NetworkInterfaceType.MobileBroadbandCdma)
                  || (NetworkInterface.NetworkInterfaceType == NetworkInterfaceType.MobileBroadbandGsm))
        {
            return true;
        }
        else
        {
            return false;

        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T22:06:04.087

也许您可能想尝试将 a 发送`HttpWebRequest`到已知网页并检查响应中的前几个字符是否与预期结果匹配。您可能还希望循环通过此检查功能几次，直到连接测试实际获得结果（无论是成功还是失败）。

将其加载到与 UI 线程分离的线程上，然后试一试。确保捕获任何异常（如果由于缺乏连接或其他问题而导致测试无法进行）。我实际上已经在我的一个 Windows Phone 7 应用程序中使用了它，但我不确定它是否是最好的想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-12T07:53:09.637

您可以通过使用 webclient 请求网页来检查用户是否连接到 Internet。

```
WebClient client = new WebClient();
        client.DownloadStringCompleted += (s, e) =>
        {
            if (e.Error == null && !e.Cancelled)
            {
                //completed.TrySetResult(true);
                MessageBox.Show("Internet Connected", "True", MessageBoxButton.OK);
            }
            else
            {
                //completed.TrySetResult(false);
                MessageBox.Show("Internet Not Connected", "False", MessageBoxButton.OK);
            }
        };
        client.DownloadStringAsync(new Uri("http://www.google.com/")); 
```

您也可以设置一个 20 秒的超时时间，以防万一

# ios - dialogDidComplete：即使用户取消，也会在 iOS SDK 中调用 FBDialogDelegate 方法

> ID：10847199
> 
> 赞同：1
> 
> 时间：2012-06-01T08:51:05.200
> 
> 标签：ios, facebook, fbdialogs

iOS SDK：当用户取消提要对话框（或任何其他平台对话框）时，是否会调用 dialogCompleteWithUrl: 和 dialogDidComplete: FBDelegate 方法——这显然是错误的，这是一个已知问题。

dialogDidNotComplete：当用户使用小关闭图标（带有 x 的圆圈）取消时被正确调用。

这是一个错误吗？或者有没有其他方法可以找出通过取消和共享取消对话框之间的区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:31:38.617

不妨发布解决此问题的解决方案。

此问题与 Facebook Connect for iOS 中列出的问题不同[：dialogDidComplete 响应区分](https://stackoverflow.com/questions/4411923/facebook-connect-for-ios-dialogdidcomplete-response-differentiation)

但解决方案是一样的：

```
#pragma mark - FBDialogDelegate 

- (void) dialogCompleteWithUrl:(NSURL*) url
{
    if ([url.absoluteString rangeOfString:@"post_id="].location != NSNotFound) {
        // user pressed "Send"
    } else {
        // user pressed "Cancel" button (although not the circle with X)
    }
} 
```

# javascript - 在 JavaScript 链接上打开 2 个窗口

> ID：10847210
> 
> 赞同：-1
> 
> 时间：2012-06-01T08:51:45.223
> 
> 标签：javascript, hyperlink

当我点击我的 JavaScript 链接时遇到问题，它在 2 个选项卡而不是一个选项卡上打开

```
Symbol.bindElementAction(compId, symbolName, "${_book_now}", "click", function(sym, e) {
         window.open("http://www.etihad.com", "_blank"); 
```

谁能明白为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-01T08:54:25.030

尝试`return false`在函数结束前添加。这将阻止默认行为（至少使用 jQuery）。

编辑
怎么样： `e.preventDefault();`？

请参阅[http://forums.adobe.com/message/4412987](http://forums.adobe.com/message/4412987)

# java - xStream 不适用于列表和属性

> ID：10847219
> 
> 赞同：0
> 
> 时间：2012-06-01T08:52:36.887
> 
> 标签：java, xml, xstream

我正在尝试制作 XML 文件的一些对象。但是我做错了，这是我放入 xml 文件的方法：

```
 XStream x = new XStream();
    XML v =  (XML) x.fromXML("<maxi-xml><name>World League</name><type>15</type><season>33</season><date>2012-05-27T18:00:00+02:00</date><arenaId>2191</arenaId><nationId>4</nationId><regionId>85</regionId><standings>2</standings><attendance>20000</attendance><meteo>3</meteo><status>3</status><event id=8228607/><event id=8228608/><event id=8228609/><event id=8228610/><event id=8228611/><event id=8228612/><event id=8228613/><event id=8228614/><event id=8228615/><event id=8228616/></maxi-xml>");
    System.out.println("versie" + v.toString()); 
```

这是xml文件：

```
<maxi-xml>
<name>National League 2.1 Nederland</name>
<type>15</type>
<season>33</season>
<date>2012-05-27T18:00:00+02:00</date>
<arenaId>2191</arenaId>
<nationId>4</nationId>
<regionId>85</regionId>
<standings>2</standings>
<attendance>20000</attendance>
<meteo>3</meteo>
<status>3</status>
<event id="8228607"/>
<event id="8228608"/>
<event id="8228609"/>
<event id="8228610"/>
<event id="8228611"/>
<event id="8228612"/> 
```

这是我正在使用的类：

比赛班：

```
 @XStreamAlias("maxi-xml")
 public class Competition {

    String name;
     int type;
     int season;
    Date date;
     int arenaId;
     int nationId;
     int regionId;
     int standings;
     int attendance;
     int meteo;
     int status;
     @XStreamImplicit
     ArrayList<Event> event;

     public Competition(    String name, int type, int season, Date date, int arenaId, int nationId, int regionId, int standings, 
        int attendance, int meteo, int status,  ArrayList<Event> event) {
        this.name = name;
        this.type = type;
        this.season = season;
        this.date = date;
        this.arenaId = arenaId;
        this.nationId = nationId;
        this.regionId = regionId;
        this.standings = standings;
        this.attendance = attendance;
        this.meteo = meteo;
        this.status = status;
        this.event = event;
    }

 } 
```

事件类：

```
public class Event {

    @XStreamAsAttribute
    int id;

    public Event(int id) {
        this.id = id;
    }

} 
```

有人知道我做错了什么吗？

当我做相反的事情时，这就是我得到的：

使用这段代码：

```
 XStream x = new XStream();
    ArrayList<Events> list = new ArrayList<Events>();
    list.add(new Events(16));
    list.add(new Events(1364));
    list.add(new Events(1365));
    list.add(new Events(1234));
    list.add(new Events(5679));

    XML xml = new XML("something", 1, 22, new Date(), 2, 2, 2, 2, 232434, 1, 3, list);
    String s = x.toXML(xml);
    System.out.println(s);

<Competition>
  <name>something</name>
  <type>1</type>
  <season>22</season>
  <date>2012-06-01 09:18:27.161 UTC</date>
  <arenaId>2</arenaId>
  <nationId>2</nationId>
  <regionId>2</regionId>
  <standings>2</standings>
  <attendance>232434</attendance>
  <meteo>1</meteo>
  <status>3</status>
  <event>
    <Event>
      <id>16</id>
    </Event>
    <Event>
      <id>1364</id>
    </Event>
    <Event>
      <id>1365</id>
    </Event>
    <Event>
      <id>1234</id>
    </Event>
    <Event>
      <id>5679</id>
    </Event>
  </event>
</Competition> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:29:25.317

如果有帮助，请检查以下 URL。

[http://x-stream.github.io/alias-tutorial.html](http://xstream.codehaus.org/alias-tutorial.html)

# xml - REST - 何时使用 400（“错误请求”）

> ID：10847224
> 
> 赞同：30
> 
> 时间：2012-06-01T08:52:51.357
> 
> 标签：xml, rest, http-status-codes, restful-architecture, http-status-code-400

我有一个类似 sales/customers/{customerno} 的资源。如果客户端向此资源发送 PUT 请求，我将返回 400 - 如果实体正文中的 xml 不是有效的 xml，则请求错误。但是如果 xml 有效，但 xml 的内容无效怎么办。例如，客户正在尝试更新客户的 PostCode 并提供无效的 PostCode。在这种情况下返回 400 - Bad request 是否正确，还是我应该使用的另一个 http 代码？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-01T08:56:24.683

来自[维基百科的 HTTP 状态代码列表](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error)：

> **400 Bad Request：** 由于语法错误，请求无法完成。

在这种情况下，您的客户端向您发送了一个包含无效邮政编码的 XML 有效负载，这是一种无效语法形式；因此，发送 400 Bad Request 是在这种情况下返回的适当错误代码。

此外，维基百科引用[RFC-4918](http://www.rfc-editor.org/rfc/rfc4918.txt)作为该主题的资源。从本文档中，您将找到以下信息：

> 服务器可以拒绝有问题的请求（即使它们由格式良好的 XML 组成），例如，带有 400（错误请求）状态代码和解释问题的可选响应正文。

由于您的请求格式正确（XML 还不错，它只是包含语义上不正确的信息），您*可能会*拒绝状态码为 400 的内容。这个词`*may*`表明还有其他选择。

虽然您可能想使用状态码 422，但在这种情况下这是不正确的，因为无效的邮政编码不符合语义错误的标准。参见下文...

来自维基百科：

> **422 Unprocessable Entity (WebDAV; RFC 4918)**：请求格式正确，但由于语义错误而无法遵循。

此外，这里有一些[定义来帮助解释状态码 422](https://wci.llnl.gov/codes/basis/manual/node53.html)：

> *   语法错误发生在解析输入代码的过程中，并且是由语法错误的语句引起的。典型的错误可能是输入中的非法字符、缺少运算符、连续两个运算符、同一行上没有插入分号的两个语句、不平衡的括号、放错位置的保留字等。
>     
>     
> *   在代码被解析为语法正确之后，在执行代码期间会发生语义错误。这些与语句的构造方式无关，而与它们的含义有关。诸如不正确的变量类型或大小、不存在的变量、超出范围的下标等都是语义错误。

您的无效邮政编码既不是语法错误也不是语义错误；因此，排除状态码 422 作为选项是合理的。

要回答您的问题，状态码 400 是合适的；但是，您可能还有其他选择。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-01T11:20:18.110

[此处](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-p2-semantics-19#section-7.4.1)找到的 HTTP 规范的修订版更新了措辞，试图避免这种混淆，因为 400 仅限于格式错误的请求。

> 7.4.1。400 错误请求
> 
> 由于客户端错误（例如，格式错误的语法），服务器不能或不会处理请求。

# java - Swing 应用程序桌面

> ID：10847225
> 
> 赞同：-2
> 
> 时间：2012-06-01T08:53:04.157
> 
> 标签：java, swing

这是我的代码，我有 3 个文本字段和 1 个组合框。我使用了 mysql 数据库和休眠我可以创建一个碧玉报告（/home/webwerks/gitpro/Swing/src/report5.jrxml"）给这样的路径它没关系，但是我已经设置了outfile的动态路径（jasper report）。你可以看到jButton5ActionPerformed代码，我可以在这个地方给出这样的outfile的静态路径（JasperExportManager.exportReportToPdfFile（jasperPrint，“/home/webwerks/report.pdf”）我可以给出动态路径如何请帮助我

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         

     if (evt.getSource() == jButton1) {
            String s = jTextField1.getText();
            String s1 = jTextField2.getText();
            String s2 = jTextField3.getText();
            String s4 = (String) jComboBox1.getSelectedItem();
            Session session = HibernateUtil.getSessionFactory().openSession();
            session.beginTransaction();
            Performance performance = new Performance();
            performance.setFirerating(s4);
            performance.setSoundrating(s);
            performance.setWidth(s1);
            performance.setMaxheight(s2);
            session.save(performance);
            session.flush();
        }
    }                                        

    private void jButton5ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        // TODO add your handling code here:
        if (evt.getSource() == jButton5) {
            try {
                Session session = HibernateUtil.getSessionFactory().openSession();
                List l = ((org.hibernate.classic.Session) session).find("from Hibernate.Performance");
                Map parameters = new HashMap();
                InputStream input = new FileInputStream("/home/webwerks/gitpro/Swing/src/report5.jrxml");
                JasperDesign jasperDesign = JRXmlLoader.load(input);
                JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);
                JRBeanCollectionDataSource ds = new JRBeanCollectionDataSource(l);
                JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, parameters, ds);
                JasperExportManager.exportReportToPdfFile(jasperPrint, "/home/webwerks/report.pdf");
            } catch (Exception e) {
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:19:45.180

您需要使用 JFileChooser，如[本教程所示](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)

```
final JFileChooser fc = new JFileChooser();
// configure file chooser if needed
int returnVal = fc.showSaveDialog(jButton5);
if (returnVal == JFileChooser.APPROVE_OPTION) {
     String filename = fc.getSelectedFile().getAbsolutePath();
     // Put your code here to generate the report.
} 
```

# jquery - 在 webkit 浏览器上拖动输入时出现不希望的滚动

> ID：10847235
> 
> 赞同：2
> 
> 时间：2012-06-01T08:53:42.643
> 
> 标签：jquery, webkit, scrollto

我正在使用 Jquery“ScrollTo”插件：[http](http://demos.flesler.com/jquery/scrollTo/) ://demos.flesler.com/jquery/scrollTo/ ，它工作正常，但我在使用 webkit 浏览器时遇到了问题。当我拖动输入并将光标移到容器元素之外（具有固定大小和溢出：隐藏 css 属性）时，它会以不希望的行为移动滚动，如下例所示：

[http://jsfiddle.net/H6PaC/53/](http://jsfiddle.net/H6PaC/53/)

我可以像这篇文章一样修复这个禁用 mousedown 事件：[Disabling Drag Scroll for Text Inputs with JQuery](https://stackoverflow.com/questions/6864581/disabling-drag-scroll-for-text-inputs-with-jquery) with this code：

```
$("input").mousedown(function(event){
    $(event.target).focus();
    event.preventDefault();
}); 
```

但是我需要传播 de drag 事件以选择输入中的文本（这个事实是触发错误的原因）。

我还尝试将 -webkit-user-drag: none 应用于输入，但这并不能解决问题。

我发现了类似的帖子，但是任何解决了这个问题的帖子，所以如果我可以在输入和文本区域中允许文本选择，我会很满意。

PS我的英语不是很好，希望我已经解释清楚了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:38:41.087

你可以试试看：

```
$("#scroll_link").click(function(){
  //disable guilty trigger, force scroll in viewport works
  window.guilty_trigger = false;
  $("div.viewport").scrollTo($("input.goal"),800);
});

$(".guilty").on('mousedown', function(e){
    window.guilty_trigger = true;
}).on('mouseup blur', function(e){
    window.guilty_trigger = false;
});

$(".viewport").on('scroll', function(e){
  //if guilty_trigger is true, viewport should keep your position
  if ( window.guilty_trigger ) {
    $("div.viewport").scrollTo($("input.guilty"));
    return false;
  }
});​ 
```

这是您的更新[jsFiddle](http://jsfiddle.net/H6PaC/87/)工作...

****因@Jörn Berkefeld 评论而编辑**

由于 chrome 27（如 Jörn 所说）Chrome 浏览器已停止触发输入元素中的滚动事件，因此我需要通过 mousedown 和 mouseup+blur 更改此事件以模拟所需的行为；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T15:11:08.397

简单的解决方案：

```
$('.container').on('mousedown', 'input', function(e){
    $(e.target).focus();
    e.preventDefault();
}); 
```

[在这里拉小提琴。](http://jsfiddle.net/H6PaC/74/)

这可以防止滚动 - 以及正确的文本选择。更多内容；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-14T03:00:26.417

似乎是作为 Webkit 错误跟踪器上的错误提出的。

[https://bugs.webkit.org/show_bug.cgi?id=114384](https://bugs.webkit.org/show_bug.cgi?id=114384)

需要更多人来确认。

我不认为阻止鼠标事件是最好的主意。我能够成功阻止这种情况发生的唯一方法是在滚动事件上设置向左滚动和向上滚动。虽然屏幕重绘时会有轻微的抖动，但我认为这比在输入字段上禁用鼠标事件更可取。

```
$('body').on('scroll', '.ofhidden', function(e) {
    var $el = $(e.currentTarget);
    $el.scrollLeft(0);
    $el.scrollTop(0);
}); 
```

# c++ - 如何从 int 转换为 char*？

> ID：10847237
> 
> 赞同：111
> 
> 时间：2012-06-01T08:53:48.000
> 
> 标签：c++, integer, const-char

我知道的唯一方法是：

```
#include <sstream>
#include <string.h>
using namespace std;

int main() {
  int number=33;
  stringstream strs;
  strs << number;
  string temp_str = strs.str();
  char* char_type = (char*) temp_str.c_str();
} 
```

但是有没有打字少的方法？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-06-01T08:58:50.850

*   在 C++17 中，[`std::to_chars`](https://en.cppreference.com/w/cpp/utility/to_chars)用作：

    ```
    std::array<char, 10> str;
    std::to_chars(str.data(), str.data() + str.size(), 42); 
    ```

*   在 C++11 中，[`std::to_string`](http://en.cppreference.com/w/cpp/string/basic_string/to_string)用作：

    ```
    std::string s = std::to_string(number);
    char const *pchar = s.c_str();  //use char const* as target type 
    ```

*   在 C++03 中，您所做的一切都很好，除了`const`用作：

    ```
    char const* pchar = temp_str.c_str(); //dont use cast 
    ```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-01T08:59:16.627

我认为您可以使用 sprintf ：

```
int number = 33;
char* numberstring[(((sizeof number) * CHAR_BIT) + 2)/3 + 2];
sprintf(numberstring, "%d", number); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-01T08:56:16.597

你可以使用提升

```
#include <boost/lexical_cast.hpp>
string s = boost::lexical_cast<string>( number ); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-01T08:57:43.403

C 风格的解决方案可能是使用，但更好的方法是使用[/](http://en.cppreference.com/w/cpp/io/c/fprintf)[`itoa`](http://www.cplusplus.com/reference/clibrary/cstdlib/itoa/)将此数字打印到字符串中。检查这个问题：[如何将整数转换为可移植的字符串？](https://stackoverflow.com/q/2225868/1168156)[`sprintf``snprintf`](http://en.cppreference.com/w/cpp/io/c/fprintf)

请注意，[`itoa`](http://www.cplusplus.com/reference/clibrary/cstdlib/itoa/)函数*未在 ANSI-C 中定义，也不是 C++ 的一部分，但某些编译器支持。*这是一个非标准功能，因此您应该避免使用它。也检查这个问题：[Alternative to itoa() for convert integer to string C++?](https://stackoverflow.com/q/228005/1168156)

另请注意，在使用 C++ 编程时编写 C 风格的代码被认为是不好的做法，有时被称为“可怕的风格”。你真的想把它转换成 C 风格的`char*`字符串吗？:)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-01T08:59:05.033

我不会在最后一行中对 const 进行类型转换，因为它的存在是有原因的。如果你不能忍受 const char* 那么你最好复制 char 数组，如：

```
char* char_type = new char[temp_str.length()];
strcpy(char_type, temp_str.c_str()); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-01-05T04:25:07.960

好吧..首先我需要做这个问题所要求的东西，但我需要它快！不幸的是，“更好”的方法是**将近 600 行代码！！！**请原谅它的名字与它所做的事情没有任何关系。正确的名称是**Integer64ToCharArray(int64_t value);**

[https://github.com/JeremyDX/All-Language-Testing-Code/blob/master/C%2B%2B%20Examples/IntegerToCharArrayTesting.cpp](https://github.com/JeremyDX/All-Language-Testing-Code/blob/master/C%2B%2B%20Examples/IntegerToCharArrayTesting.cpp)

随意尝试清理该代码而不影响性能。

**输入：**从 min 到 max 范围内的任何有符号 64 位值。

**例子：**

```
std::cout << "Test: " << AddDynamicallyToBuffer(LLONG_MAX) << '\n';
std::cout << "Test: " << AddDynamicallyToBuffer(LLONG_MIN) << '\n'; 
```

**输出：**

```
Test: 9223372036854775807
Test: -9223372036854775808 
```

**原始速度测试：( *Integer64ToCharArray();* )**

最佳情况 1 位数值。

> 循环：100,000,000，花费时间：1,381（Milli），每循环时间 13（Nano）

最坏情况下的 20 位数值。

> 循环：100,000,000，花费时间：22,656（Milli），每循环时间 226（Nano

**新的设计速度测试：( *AddDynamicallyToBuffer();* )**

最佳情况 1 位数值。

> 循环：100,000,000，花费时间：427（Milli），每循环时间 4（Nano）

32 位最坏情况 - 11 位数值。

> 循环：100,000,000，花费时间：1,991（Milli），每循环时间 19（Nano）

负 1 万亿最坏情况 - 14 位数值。

> 循环：100,000,000，花费时间：5,681（Milli），每循环时间 56（Nano）

64 位更坏情况 - 20 位数值。

> 循环：100,000,000，花费时间：13,148（Milli），每次循环时间 131（Nano）

**这个怎么运作！**

我们执行分而治之的技术，一旦我们现在字符串的最大长度，我们只需单独设置每个字符值。如上面的速度测试所示，较大的长度会导致较大的性能损失，但它仍然比原始循环方法快得多，并且在两种方法之间实际上没有代码更改，然后循环不再使用。

在我的用法中，因此我返回偏移量，而不是编辑 char 数组的缓冲区，而是开始更新顶点数据，并且该函数有一个额外的偏移量参数，因此它没有初始化为 -1。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-04-11T11:01:00.997

请参阅此答案[https://stackoverflow.com/a/23010605/2760919](https://stackoverflow.com/a/23010605/2760919)

对于您的情况，只需将 snprintf 中的类型从 long ("%ld") 更改为 int ("%n")。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-01-01T14:12:09.213

这可能有点晚了，但我也有同样的问题。在 C++17 中使用“charconv”库解决了转换为 char 的问题。

[https://en.cppreference.com/w/cpp/utility/to_chars](https://en.cppreference.com/w/cpp/utility/to_chars)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-22T08:49:30.180

**您也可以使用强制转换。**

***例子：***

```
string s;
int value = 3;
s.push_back((char)('0' + value)); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-17T16:52:12.867

将我们的整数值转换为 std::string 以便我们知道多长（多少位数）。

然后我们创建字符串字母大小+1的字符数组长度，所以我们可以将我们的值复制到字符串然后是字符数组。

```
#include <string>

char* intToStr(int data) {
    std::string strData = std::to_string(data);

    char* temp = new char[strData.length() + 1];
    strcpy(temp, strData.c_str());

   return temp;
} 
```

# android - requestLocationUpdates() 和 removeUpdates() ，无法使用 TimerTask 在单独的线程中处理

> ID：10847243
> 
> 赞同：0
> 
> 时间：2012-06-01T08:54:16.500
> 
> 标签：android, multithreading, thread-safety, android-service, android-location

我在我的服务中使用 Timer 和 TimerTask，我正在安排 GPS 使用此方法定期检查 @Service - onCreate()

```
 scheduleAllGPST.scheduleAtFixedRate(new AllGPSTimer(), 0, 
                                                everyInterval); 
```

我的服务类中的代码片段：

```
//class inside service class
class AllGPSTimer extends TimerTask {
   public void run() {
     if (!canGetLocation) stopLocationRequest();
     else requestLocation();
}
}
// Service class method
public void requestLocation() {
  try {
    locListener = new mylocationlistener();
    locationManager.requestLocationUpdates(provider, 0, 0, locListener);// Error happens at this line 
   }
  catch (Exception e) {
    e.printStackTrace();
  }
}
public void stopLocationRequest() {
 try {
    locationManager.removeUpdates(locListener);// And also it happens at this line 
 }
 catch (Exception e) {
    e.printStackTrace();
 }
} 
```

我收到此错误：

```
Error :
java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
 at android.os.Handler.<init>(Handler.java:121)
at android.location.LocationManager$ListenerTransport$1.<init>(LocationManager.java:139)
at android.location.LocationManager$ListenerTransport.<init>(LocationManager.java:137)
at android.location.LocationManager._requestLocationUpdates(LocationManager.java:708)
at android.location.LocationManager.requestLocationUpdates(LocationManager.java:630)
at com.mobile.sales.GPSService.requestLocation(GPSService.java:146)
at com.mobile.sales.GPSService$AllGPSTimer.run(GPSService.java:140)
at java.util.Timer$TimerImpl.run(Timer.java:289) 
```

从错误中，我猜这个 requestLocationUpdates() 和 removeUpdates() 只能从 Service 类的主线程中使用，而不是从主线程的衍生线程中使用。我猜对了吗？

那么Service类的Activity类中是否有类似runOnUiThread(runnable)的方法？

请任何人帮助我处理位置 API 方法和计时器任务的衍生线程？如果我猜错了，也请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-22T04:00:36.520

公共类 GpsManager {

```
public GpsManager()
{
    // TODO Auto-generated constructor stub
}

LocationManager lm;
LocationListener ll;

public void Start(Context context)
{
    lm = (LocationManager) context
            .getSystemService(Context.LOCATION_SERVICE);

    isactive = true;

    handler=new Handler(){

        @Override
        public void handleMessage(Message msg)
        {

            if(isactive)
            lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll);
            super.handleMessage(msg);
        }
    };
    ll = new MyLocationListener(context, lm,handler);
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll);
}

Handler handler;
public boolean isactive;

public void Stop()
{
    lm.removeUpdates(ll);
    isactive = false;
}

class MyLocationListener implements LocationListener
{

    Context _con;
    LocationManager _lm;

    Handler _handler;
    public MyLocationListener(Context con, LocationManager lm,Handler h)
    {
        _lm = lm;
        _con = con;
        _handler=handler;
    }

    @Override
    public void onLocationChanged(Location location)
    {
        if (location != null)
        {

            Toast.makeText(
                    _con,
                    "lon = " + location.getLongitude() + ". lat = "
                            + location.getLatitude(), Toast.LENGTH_SHORT)
                    .show();
            lm.removeUpdates(this);
            Thread th=new Thread(new Runnable()
            {

                @Override
                public void run()
                {
                    Message msg=Message.obtain();
                    _handler.sendMessageDelayed(msg,1000);

                }
            });
            th.run();
        }

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras)
    {

        Toast.makeText(_con, "status change " + provider,
                Toast.LENGTH_SHORT).show();

    }

    @Override
    public void onProviderEnabled(String provider)
    {

        Toast.makeText(_con, "provider enable " + provider,
                Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onProviderDisabled(String provider)
    {

        Toast.makeText(_con, "provider disable " + provider,
                Toast.LENGTH_SHORT).show();
    }

} 
```

}

# java - 对象内部的属性会在会话中消失，但 Bean 本身不会

> ID：10847244
> 
> 赞同：0
> 
> 时间：2012-06-01T08:54:23.850
> 
> 标签：java, session, jsf, properties, mojarra

我有两条不同的路径，这只发生在另一条路径中：

1.  `SignUp.Xhtml-->SigninUpOkView-->Login.xhtml-->Welcome.xhtml-->UsersController.prepareCreateParty()--->createParty.xhtml-->UsersController.createParty()`

2.  `SignUp.Xhtml-->SigninUpOkView-->Login.xhtml-->Logout-->Login.xhtml-->Welcome.xhtml-->UsersController.prepareCreateParty()--->createParty.xhtml-->UsersController.createParty()`

那么会发生什么：我在控制器的方法 prepareCreateParty() 中创建了一个新的派对对象并将其插入到用户对象中，这样当用户转到 CreateParty-xhtml 页面时，派对不为空，但它仅在我的情况 2 中工作在 Signin up 和 createParty 之间注销。UserController 是 managedBean 并且 UsersController 在 SessionScoped 上。我仍然在会话中使用名称为用户的用户，并将其放在登录过滤器中。Welcome.xhtml---->UsersController.CreateParty() 之间的情况相同，但发生了一些非常奇怪的事情。我尝试在 createParty-method 中将默认名称插入派对，在第一种情况下，即使用户对象仍然存在，它也会消失，只有用户内的派对属性为 NULL。情况二，当我注销和登录时，它仍然存在并且一切正常。什么会导致这种情况？我已经尝试了一切，我开始感到痛苦和沮丧。

在用户中：

```
@JoinColumn(name = "party_id", referencedColumnName = "party_id")
@ManyToOne
private Party partyId; 
```

在 USERSCONTROLLER (SessionScoped ManagedBean): public UsersController(Users userEntity) { this.currentUser = userEntity; }

```
public Users getSelected() {

        FacesContext facesContext = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) facesContext.getExternalContext().getSession(false);

        if (currentUser == null) {

            currentUser = (Users) session.getAttribute("user");
            if(currentUser==null){
                currentUser = new Users();
                selectedItemIndex = -1;
            }

        } 
```

* * *

```
public String prepareCreateParty() {

    if (currentUser == null) {
        currentUser = this.getUsersFromSession();
    }

    Party party = new Party();
    party.setName("Testing default name of the party");
    currentUser.setPartyId(party);
    return "createParty"; 
```

在 CreateParty.xhtml 页面中：

```
<p:row>

    <p:column> <h:outputLabel value="#{bundle.CreatePartyLabel_name}" for="name" /></p:column>
    <p:column><p:inputText id="name" value="#{usersController.selected.partyId.name}" title="#{bundle.CreatePartyTitle_name}" required="true" requiredMessage="#{bundle.CreatePartyRequiredMessage_name}"/></p:column>
    <p:column><p:tooltip for="name" showEvent="focus" hideEvent="blur" /></p:column>  
    <p:column><h:outputLabel value="&nbsp;&nbsp;"/></p:column>

</p:row> 
```

在 LoginFilter.doFilter() 中：

```
if (userPrincipal != null && session.getAttribute("user") == null) {

    UsersFacade test = new UsersFacade();
    Users userEntity = test.findByUsername(userPrincipal.getName());
    session.setAttribute("user", userEntity);
    UsersController userController = new UsersController(userEntity);// Unnecessary constructor call!! 
```

Glassfish 3.1.2 Mojarra 2.1.6 PrimeFaces 3.2 疯狂 1.100%

到底是什么原因造成的，非常感谢您的帮助！我希望你能理解我的解释，即使英语是这样的。萨米人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:04:20.410

我认为这个问题是因为你最终得到了两个不同的`Users`对象实例（我将它重命名为`User`btw，它只代表一个用户，对吗？），一个`user`在由过滤器设置的会话范围内，另一个是在注册期间设置的`currentUser`属性。`UserController`您正在`getSelected()`检查是否`currentUser`不是`null`，因此毕竟不使用过滤器设置的那个。使会话无效会清除`currentUser`，因此它“按预期”工作。

如果您`sessionMap.put("user", user)`在注册期间进行，那么我建议您改用

```
@ManagedProperty("#{user}")
private Users user; // +setter 
```

必要时在托管 bean 中，这样您就可以确保拥有当前登录用户的唯一且正确的实例。请注意，`#{user}`不一定需要是`@ManagedBean`. EL 只是通过属性名称扫描请求/视图/会话/应用程序范围。

# asp.net-mvc - Microsoft MVP 应用程序是否可以在同一应用程序中另外具有 MVC 4.0 应用程序

> ID：10847249
> 
> 赞同：0
> 
> 时间：2012-06-01T08:54:38.687
> 
> 标签：asp.net-mvc, c#-4.0, mvp

我们有一个应用程序，其中 UI 层已使用 MVP 构建。同一个解决方案能否适配mvc4.0应用。我们将创建一些具有特定功能的新页面。我们想让它适应所有设备（台式机、平板电脑和移动设备）。所以我们认为拥有 MVC4.0 会为我们做这些事情。

多少可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:10:40.970

简短的回答。是的。长答案..小心。看看hanselmans的帖子：

[http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx](http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx)

将 ASP.NET MVC 3 集成到现有升级的 ASP.NET 4 Web 窗体应用程序中

# linux - 使用vim创建新文件时如何自动创建整个路径？

> ID：10847254
> 
> 赞同：2
> 
> 时间：2012-06-01T08:54:55.510
> 
> 标签：linux, vim, gnu

要在 vim 中打开新文件，我通常会执行以下操作：

```
:tabe my_newfile 
```

但是，假设我想在 NEW 目录中打开一个新文件，如下所示：

```
:tabe newdir/my_newfile 
```

导致错误

```
"newdir/my_newfile" E212: Can't open file for writing 
```

有没有一种自动创建新目录的流畅方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:02:35.733

我在 vim 之外使用了这个解决方法：我创建了一个 shell 脚本`vim`，`$HOME/bin`其中备份了我在 folder 中编辑的每个文件`$HOME/.vimback/...path.../file`。

以类似的方式，您可以创建一个类似的脚本来运行

```
for f in "$@" ; do
    mkdir -p $(dirname "$f")
done

/usr/bin/$(basename "$0") "$@" 
```

但我建议询问是否应该创建目录以避免由于拼写错误而意外创建目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:04:18.047

尝试插件[auto_mkdir](http://www.vim.org/scripts/script.php?script_id=3352)。这听起来正是您正在寻找的。

PS：我没用过，也不会用（由于@Aaron_Digulla 的评论

# zsh - 如何使 zsh 前向词行为与 bash/emacs 中的相同

> ID：10847255
> 
> 赞同：17
> 
> 时间：2012-06-01T08:54:56.150
> 
> 标签：zsh, zshrc

zsh forward-word 与 bash/emacs 有点不同，我想改变它。

我不描述所有差异，而是一步一步地向您展示 bash 的行为。我将光标标记为“^”符号。

```
foo bar --non-needed-param --needed-param^ 
```

兆字节

```
foo bar --non-needed-param --needed-^param 
```

兆字节

```
foo bar --non-needed-param --^needed-param 
```

兆字节

```
foo bar --non-needed-^param --needed-param 
```

兆字节

```
foo bar --non-^needed-param --needed-param 
```

兆字节

```
foo bar --^non-needed-param --needed-param 
```

兆字节

```
foo ^bar --non-needed-param --needed-param 
```

MF

```
foo bar^ --non-needed-param --needed-param 
```

医学博士

```
foo bar^-needed-param --needed-param 
```

医学博士

```
foo bar^-param --needed-param 
```

医学博士

```
foo bar^ --needed-param 
```

该算法既可以灵活地在单词中移动，也可以为我删除部分单词。它也在emacs中，所以我已经习惯了。我也想在 zsh 中看到它。谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-02T07:30:53.400

为了这个目的，我有这个`.zshrc`：

```
# Bash-like navigation
autoload -U select-word-style
select-word-style bash 
```

编辑：啊，我记得为了让一切按我的意愿工作而缺少什么。我还`forward-word-match`通过将以下内容放入`$ZDOTDIR/functions/forward-word-match`（假设您的`$ZDOTDIR/functions`目录位于 中`$fpath`；否则将其放入其中或修改`$fpath`数组）中进行了覆盖：

```
emulate -L zsh
setopt extendedglob

autoload match-words-by-style

local curcontext=":zle:$WIDGET" word
local -a matched_words
integer count=${NUMERIC:-1}

if (( count < 0 )); then
    (( NUMERIC = -count ))
    zle ${WIDGET/forward/backward}
    return
fi

while (( count-- )); do

    match-words-by-style

    # For some reason forward-word doesn't work like the other word
    # commands; it skips whitespace only after any matched word
    # characters.

    if [[ -n $matched_words[4] ]]; then
        # just skip the whitespace and the following word
  word=$matched_words[4]$matched_words[5]
    else
        # skip the word but not the trailing whitespace
  word=$matched_words[5]
    fi

    if [[ -n $word ]]; then
  (( CURSOR += ${#word} ))
    else
  return 1
    fi
done

return 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-08T12:53:34.410

要使用 Emacs 键绑定获得所需的行为，我所要做的就是：

```
bindkey '\ef' emacs-forward-word 
```

Moriz Bunkus 回答的这一部分现在似乎也可以自行工作：

```
autoload -U select-word-style
select-word-style bash 
```

在某些边缘情况下它似乎表现得更好（例如，它被视为`?`单词边界，而上述情况则没有。）

# javascript - 如何附加之后或其他解决方案？

> ID：10847258
> 
> 赞同：1
> 
> 时间：2012-06-01T08:55:11.917
> 
> 标签：javascript, jquery, html

```
<table border="2">
    <tr><td>one</td><td>two</td></tr>
    <tr><td>one</td><td>two</td></tr>
    <tr><td colspan="2" id="new" >add new</td></tr>
</table>

$('#new').click(function(){
   $('#new').append("<tr><td>one</td><td>two</td></tr>");
}) 
```

现在，如果我单击“添加新”，那么这将是：

```
one | two
one | two
add new
one  two 
```

我该怎么做：

```
one | two
one | two
one | two
add new 
```

**直播：http :** [//jsfiddle.net/tg5qD/](http://jsfiddle.net/tg5qD/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:01:16.053

```
$('#new').click(function(){
   $('#new').parent('tr').before("<tr><td>one</td><td>two</td></tr>");
})​ 
```

[演示](http://jsfiddle.net/nawazhi/tg5qD/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T08:57:54.510

您可以通过以下方式修改 JavaScript 代码：

```
$('#new').click(function(){
   $('#new').parent().before("<tr><td>one</td><td>two</td></tr>");
}) 
```

或者修改您的 HTML 以使用该脚本。

```
<table border="2">
    <tr><td>one</td><td>two</td></tr>
    <tr><td>one</td><td>two</td></tr>
    <tr id="new"><td colspan="2" >add new</td></tr>
</table>
<script>
  $('#new').click(function(){
    $('#new').before("<tr><td>one</td><td>two</td></tr>");
  });
</script> 
```

第二种解决方案将点击处理程序附加到行而不是单元格。这样您就可以轻松使用`before`（[jQuery 文档](http://api.jquery.com/before/)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T08:58:12.413

[http://jsfiddle.net/tg5qD/5/](http://jsfiddle.net/tg5qD/5/)

```
$('#new').on('click', function(){
   $('#new').parent().before("<tr><td>one</td><td>two</td></tr>");
})​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T08:58:30.947

**演示** [http://jsfiddle.net/eDNH5/2/](http://jsfiddle.net/eDNH5/2/)

**另一个工作演示** [http://jsfiddle.net/eDNH5/5/](http://jsfiddle.net/eDNH5/5/)

API：[http ://api.jquery.com/before/](http://api.jquery.com/before/)

**以另一种方式更新**

```
$('#new').click(function(){
    $('table tr:last').before('<tr><td>one</td><td>two</td></tr>');
})​ 
```

**代码**

```
$('#new').click(function(){
   $('#new').parent().before("<tr><td>one</td><td>two</td></tr>");
})​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T08:59:46.080

您可能想使用[prepend()](http://api.jquery.com/prepend/)插入[append()](http://api.jquery.com/append/)

这是一个演示：http: [//jsfiddle.net/tg5qD/3/](http://jsfiddle.net/tg5qD/3/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-01T09:00:34.713

```
$('#new').click(function(){
   $('#new').parent('tr').before("<tr><td>one</td><td>two</td></tr>");
}) 
```

**演示**：http: [//jsfiddle.net/tg5qD/4/](http://jsfiddle.net/tg5qD/4/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-01T09:08:21.737

我实际上会`$(this)`在点击事件中引用添加新按钮。节省您再次在 DOM 中查找元素的时间。

```
$('#new').click(function(){
   $(this).parent().before("<tr><td>one</td><td>two</td></tr>");
}) 
```

更好的是，如果您使用`.on`事件对象，您可以在以后灵活地关闭此点击事件，如果您愿意的话。

```
$('#new').on({
   "click.addNew": function(){
       $(this).parent().before("<tr><td>one</td><td>two</td></tr>");
   }
}) 
```

JS 小提琴：http: [//jsfiddle.net/tg5qD/11/](http://jsfiddle.net/tg5qD/11/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-01T09:12:24.637

您可以使用以下方式.. 首先需要找到`tr`id 'new' 的父级。然后我们可以将新元素附加到父元素之前。

```
$('#new').click(function(){
   $(this).parent('tr').before("<tr><td>one</td><td>two</td></tr>");
})​ 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-01T09:32:02.077

```
$('#new').click(function(){
   $("<tr><td>one</td><td>two</td></tr>").insertBefore($(this).parent());
}); 
```

阅读[.insertBefore()](http://api.jquery.com/insertbefore)

**[演示](http://jsfiddle.net/thecodeparadox/7GZAa/)**

# android - Android 动画如何在幕后工作？

> ID：10847260
> 
> 赞同：13
> 
> 时间：2012-06-01T08:55:15.683
> 
> 标签：android, animation, thread-safety, tween

在过去的几个月里，我用 Java 构建了一个开源补间引擎（[Universal Tween Engine](http://code.google.com/p/java-universal-tween-engine/)），以便能够轻松地为我的 android 游戏添加流畅的动画和过渡。它对游戏来说就像轻而易举，并且被许多人成功使用（主要是在[LibGDX](http://libgdx.badlogicgames.com/)社区中）。该库是通用的，可用于动画任何东西（Swing UI 组件、opengl 游戏对象等）。现在，我想为专用于 android UI 的库创建一个插件，因为与内置动画框架相比，我相信它可以极大地简化非常复杂的动画的创建。

我的库公开了一个`.update(float deltaTime)`方法，每次您想要更新所有正在运行的动画时都必须调用该方法。它是为游戏量身定制的，因为每个游戏都暴露了一个无限循环，但 UI 并非如此。

因此，我想知道 Android API 的动画框架是如何工作的。**是否有一个专门用于动画的静态线程，它连续运行并逐帧更新动画并暂停，直到有新的动画运行**？

我正在考虑类似的事情[，](http://code.google.com/p/java-universal-tween-engine/wiki/AndroidUI)但我对这段代码并不满意，因为它没有考虑设备刷新率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:10:38.563

一个好的起点是看一下 Android 视图系统是如何实现它的。开源的乐趣。

当您在视图上调用 .animate() 时，您会返回一个 ViewPropertyAnimator，它会在 startAnimation() 时启动一个 ValueAnimator。

ValueAnimator 有一个驱动循环的处理程序。

[https://github.com/CyanogenMod/android_frameworks_base/blob/ics/core/java/android/view/ViewPropertyAnimator.java](https://github.com/CyanogenMod/android_frameworks_base/blob/ics/core/java/android/view/ViewPropertyAnimator.java)

[https://github.com/CyanogenMod/android_frameworks_base/blob/ics/core/java/android/animation/ValueAnimator.java](https://github.com/CyanogenMod/android_frameworks_base/blob/ics/core/java/android/animation/ValueAnimator.java)

# c# - WPF ListBox 仅滚动半行

> ID：10847263
> 
> 赞同：0
> 
> 时间：2012-06-01T08:55:29.357
> 
> 标签：c#, wpf, xaml, .net-3.5

我正在使用通过包含 StackPanel 的 ScrollViewer 设置样式的 ListBox。

为了允许滚动，它使用RepeatButtons 来调用ScrollBar.LineUpCommand 和ScrollBar.LineDownCommand。

控件显示正确，按钮使 ScrollViewer 滚动。

但是每次按下按钮只会使列表滚动不到一个项目。

如何设置 ScrollBar.SmallChange 以匹配 ListBoxItem 的高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:23:13.543

`StackPanel`正在实现`IScrollInfo`，因此您可以`CanContentScroll="True"`在滚动查看器上进行设置，它将有关滚动的信息传递到堆栈面板。

正在按项目`StackPanel`高度滚动。

# c# - Linq 索引选择（取两个）

> ID：10847270
> 
> 赞同：0
> 
> 时间：2012-06-01T08:56:20.307
> 
> 标签：c#, linq

好的，我知道它`Select((x, i) => ...)`没有文字形式，但我有一个相当复杂的查询，现在有一个新要求，使一半的预计输出字段依赖于输出“行号”。有什么方法，甚至是一种丑陋的方法来引入索引并以文字形式保留一个查询？

另请注意，并非所有源行都参与结果，因此我不能仅将源投影到可枚举的索引元组中，必须在最终投影之前以及所有连接和位置之后应用索引。

编辑：

原始查询很大，所以放在这里没有意义，让ssimplify with pseudo

```
from a in source
where somecondition(a)
join b in source2 on a.key equals b.key
where someothercondition(a, b)
select new
{
    f1 = a.f1,
    oldf2 = func(a.field, b.field),
    newf2 = func(a.field, b.field, index)
    // ... (20 somthing more projected fields)
} 
```

我需要 newf2 的索引，我需要它而不将查询拆分为两个查询

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:24:52.637

如果你想要这个“在一个查询中”，大多数是“文字形式”，你必须做类似的事情：

```
from t in
    (
        (
            from a in source
            where somecondition(a)
            join b in source2
            on a.key equals b.key
            where someothercondition(a, b)
            select new { a = a, b = b }
        ).Select((x, i) => new { index = i, a = x.a, b = x.b } )
    )
select new {
    f1 = t.a.f1,
    oldf2 = func(t.a.field, t.b.field),
    newf2 = func(t.a.field, t.b.field, t.index)
    // ... (20 somthing more projected fields) } 
```

但这*太可怕*了。

我宁愿把它全部放在`.`形式上：

```
a
    .Where(a => somecondition(a))
    .Join(b, a => a.key, b => b.key, (a,b) => new { a = a, b = b })
    .Where(pair => somecondition(pair.a, pair.b))
    .Select((t, i) => new
        {
            f1 = t.a.f1,
            oldf2 = func(t.a.field, t.b.field),
            newf2 = func(t.a.field, t.b.field, i)
            // ...
        }); 
```

连接语法更难看，但至少你没有混淆语法。

你甚至可能更喜欢做

```
var pairs = 
    from a in source
    where somecondition(a)
    join b in source2
    on a.key equals b.key
    where someothercondition(a, b)
    select new { a = a, b = b };

var indexedPairs = pairs.Select((x, i) => new { index = i, a = x.a, b = x.b } );

var projectedIndexedPairs =
    from t in indexedPairs
    select new {
        f1 = t.a.f1,
        oldf2 = func(t.a.field, t.b.field),
        newf2 = func(t.a.field, t.b.field, t.index)
        // ... (20 somthing more projected fields)
        }; 
```

但这不是“一次查询”...

（这是很多 LINQ，其中可能存在一些语法错误，但您大致了解。）

**令人眼花缭乱的灵感闪现**

你提到`let`魔法让我想到了这一点。它似乎在我写的一个快速示例中起作用。

```
// Copious commenting to explain what you're doing.
int x = 0;

// Copious commenting to explain what you're doing.
var query =
    from a in source
    where somecondition(a)
    join b in source2
    on a.key equals b.key
    where someothercondition(a, b)
    let i = x++
    select new {
        f1 = a.f1,
        oldf2 = func(a.field, b.field),
        newf2 = func(a.field, b.field, i),
        // ... (20 somthing more projected fields)
        }; 
```

更新：这是相当脆弱的。例如，如果您迭代`query`两次，则索引会不断增加。（即它不会重置为零。）

# iphone - 如何使用 metaio 移动 SDK 绘图。而不是直接从文件中加载几何数据

> ID：10847271
> 
> 赞同：0
> 
> 时间：2012-06-01T08:56:21.020
> 
> 标签：iphone, sdk, augmented-reality

目前，我正在开发一款在 iphone 和 android 平台上的 AR 软件。而且我是 Metaio SDK 的新手......我真的不知道如何用 OpenGL 或其他类似的东西来绘制东西。我所能找到的只是将一个文件（如“md2”）加载到源代码中，然后 SDK 本身将处理所有其他文件。但是，对我来说，我只想在跟踪标记的坐标基础上显示一个矩形并在其上放置一些纹理。有没有人可以帮我解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:08:49.617

有一个[Android 教程](http://docs.metaio.com/bin/view/Main/CustomRendererExample)展示了如何将 SDK 与外部 OpenGL 渲染器一起使用。

对于 iPhone，缺少该示例，但集成将与 Android 非常相似。

# ruby-on-rails-3 - 为什么我的引导 sass 没有排水沟？

> ID：10847277
> 
> 赞同：0
> 
> 时间：2012-06-01T08:56:57.117
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, sass

我使用的是固定的`container`，并且引导程序应该在所有侧面都有一个 20px 的排水沟。
不过，我没有得到任何排水沟，虽然迈克尔哈特尔的布局还可以。

```
矿山 | 哈特尔

```

![矿](../Images/12c19df114fecfbbb54595f1d0e89763.png).![哈特尔](../Images/4ee27ce5f67d90d27f1a4253c0fdf619.png)

我在 Linux 上使用 Chrome。谢谢！

## 编辑：找到罪犯：但现在呢？

```
/* line 9, /.rvm/gems/ruby-1.9.3-p0/gems/bootstrap-sass-2.0.2/vendor/assets/stylesheets/bootstrap/_scaffolding.scss */
body {
  margin: 0;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 13px;
  line-height: 18px;
  color: #333333;
  background-color: white;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:23:28.017

你在用`.container-fluid`吗？

```
.container-fluid {
   padding-right: 20px;
   padding-left: 20px;
} 
```

来自示例[http://twitter.github.com/bootstrap/examples/fluid.html](http://twitter.github.com/bootstrap/examples/fluid.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T20:19:21.823

通过使用自定义样式解决 - 但没有解决引导问题（我只是覆盖它）

```
body {
  padding-top: 60px;
  padding-right: 20px;
  padding-left: 20px;
} 
```

[感](https://stackoverflow.com/users/809953/sebastien)谢塞巴斯蒂安和[特里](https://stackoverflow.com/users/803739/terry)

# python - 如何通过python脚本获取Actvie目录用户的msExchMailboxGuid的值

> ID：10847285
> 
> 赞同：1
> 
> 时间：2012-06-01T08:57:17.680
> 
> 标签：python, active-directory, win32com

我可以通过 python 脚本获取 Active Directory 用户的一些属性，如下所示：

```
import win32com.client

ldap="SELECT cn, mail From 'LDAP://OU=XXXXXXXX,DC=center,DC=intranet,DC=sinotrans'"

c = win32com.client.Dispatch('ADODB.Connection')
c.Open('Provider=ADsDSOObject')

rs,rc = c.Execute(ldap)
rs.MoveFirst()
while not rs.EOF:
    for e in rs.fields:
        print('{}: {}'.format(e.Name, e.Value))
    print()
    rs.MoveNext() 
```

但是，如果我在 SQL 查询子句中添加“msExchMailboxGuid”，则 msExchMailboxGuid 的值始终为 . 似乎 msExchMailboxGuid 不是字符串，我如何打印它的值？我在 Python 3.2.3 下运行脚本。任何答案表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:29:48.407

我已经在 Python 2.7 上测试了以下内容，但主要思想应该是相同的。

msExchMailboxGuid 上的[MSDN 文档](http://msdn.microsoft.com/en-us/library/aa564778%28v=EXCHG.80%29.aspx)指出它的语法是 2.5.5.10，如[本表](http://technet.microsoft.com/en-us/library/cc961740.aspx)中所述，它是一个八位字节字符串。

这似乎在 Python 中表示为一串毫无意义的 unicode 字符。[`ord()`](http://docs.python.org/library/functions.html#ord)我们可以使用将字符转换为整数的函数将其转换为十六进制字符串。

这给了我们这样的东西：

```
import win32com.client

ldap="SELECT cn, mail, msExchMailboxGuid From 'LDAP://OU=XXXXXXXX,DC=center,DC=intranet,DC=sinotrans'"

c = win32com.client.Dispatch('ADODB.Connection')
c.Open('Provider=ADsDSOObject')

rs,rc = c.Execute(ldap)
rs.MoveFirst()
while not rs.EOF:
    for e in rs.fields:
        if e.Name != 'msExchMailboxGuid':
            print('{}: {}'.format(e.Name, e.Value))
        else:
            print('{}: {}'.format(e.Name, ''.join(['{:x}'.format(ord(x)) for x in e.Value]))
    print()
    rs.MoveNext() 
```

这应该将 输出`msExchMailboxGuid`为十六进制字符串。要将`msExchMailboxGuid`值显示为格式良好的 GUID 字符串，我们可以从[这篇博客文章](http://clintboessen.blogspot.com/2011/03/convert-octet-string-into-readable.html)`HexGuidToGuidStr`中移植该函数，如下所示：

```
def hex_to_guid(s):
   return '-'.join([
       ''.join(s[8-2*x:10-2*x]  for x in range(1, 5)),
       ''.join(s[12-2*x:14-2*x] for x in range(1, 3)),
       ''.join(s[16-2*x:18-2*x] for x in range(1, 3)),
       s[16:20],
       s[20:]
   ]) 
```

最后得到：

```
import win32com.client

ldap="SELECT cn, mail, msExchMailboxGuid From 'LDAP://OU=XXXXXXXX,DC=center,DC=intranet,DC=sinotrans'"

c = win32com.client.Dispatch('ADODB.Connection')
c.Open('Provider=ADsDSOObject')

rs,rc = c.Execute(ldap)
rs.MoveFirst()
while not rs.EOF:
    for e in rs.fields:
        if e.Name != 'msExchMailboxGuid':
            print('{}: {}'.format(e.Name, e.Value))
        else:
            if e.Value is not None:
                print('{}: {}'.format(e.Name, hex_to_guid(''.join(['{:x}'.format(ord(x)) for x in e.Value]))))
    print()
    rs.MoveNext() 
```

说了这么多，`msExchMailboxGuid`可能仅仅因为没有与相关用户关联的值而显示为空字符串。特别是如果您使用我刚刚列出的代码，您需要特别处理这种情况。

# c# - C# 正则表达式精确长度

> ID：10847286
> 
> 赞同：3
> 
> 时间：2012-06-01T08:57:27.053
> 
> 标签：c#, regex

我有一个程序，它必须使用正则表达式输出精确长度的子字符串。但它也会输出与格式匹配的更大长度的子字符串。输入：a as asb, asd asdf asdfg 预期输出（长度 = 3）：asb asd 实际输出：asb asd asd asd

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text.RegularExpressions;

namespace LR3_2
    {
    class Program
    {
        static void regPrint(String input, int count)
        {
            String regFormat = @"[a-zA-Z]{" + count.ToString() + "}";
            Regex reg = new Regex(regFormat);
            foreach (var regexMatch in reg.Matches(input))
            {
                Console.Write(regexMatch + " ");
            }

            //Match matchObj = reg.Match(input);
            //while (matchObj.Success)
            //{
            //    Console.Write(matchObj.Value + " ");
            //    matchObj = reg.Match(input, matchObj.Index + 1);
            //}
        }

        static void Main(string[] args)
        {
            String input = " ";
            //Console.WriteLine("Enter string:");
            //input = Console.ReadLine();
            //Console.WriteLine("Enter count:");
            //int count = Console.Read();

            input += "a as asb, asd asdf  asdfg";
            int count = 3;
            regPrint(input, count);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T09:05:42.070

将`\b`（意思是“在单词的开头或结尾”）添加到您的表达式中，例如：

```
\b[a-zA-Z]{3}\b 
```

在您的代码中，您应该执行以下操作：

```
String regFormat = @"\b[a-zA-Z]{" + count.ToString() + @"}\b"; 
```

要在编写自己的测试程序之前测试正则表达式，您可以使用[Expresso](http://www.ultrapico.com/Expresso.htm)或[The Regulator](http://sourceforge.net/projects/regulator/)等工具。它们实际上可以帮助您编写表达式并对其进行测试。

# java - Mock系统背后的逻辑

> ID：10847287
> 
> 赞同：1
> 
> 时间：2012-06-01T08:57:33.233
> 
> 标签：java, mockito, easymock, powermock

市场上有不同的 Java mock 框架，例如 Mockito 和 PowerMock。我主要在这个线程中询问Mock系统背后的逻辑是什么。如果有一个实际的类，并且有一个模拟类。

模拟系统所做的就是用模拟类替换实际类的字节码。如果我们要模拟方法，我们只需要用模拟方法替换实际类的方法字节码。这就是模拟系统背后的逻辑吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:02:29.533

[这是](http://martinfowler.com/articles/mocksArentStubs.html)[Martin Fowler](http://en.wikipedia.org/wiki/Martin_Fowler)对嘲笑理论的深刻见解。

# php - 如何用 Gearman 实现循环任务列表？

> ID：10847288
> 
> 赞同：2
> 
> 时间：2012-06-01T08:57:37.250
> 
> 标签：php, mysql, gearman, circular-list

我的 MySQL 数据库中有一个包含 200K 记录的表。每条记录都包含一个应该以某种方式处理的 URL。在我的案例中，URL 处理不是一项简单的任务，因此我选择使用[Gearman](http://gearman.org/)队列将这些作为后台作业运行。

因此，对于我表中的每条记录 (URL)，我计划创建单独的任务并将其提供给 Gearman。

此外，我的表中的数据不是静态的，并且经常会在那里添加新的 URL。

根据我的业务逻辑，我需要不断处理这个 url 列表。当我完成数据库表中最后一条记录的处理后，我应该移动到第一个记录，并且应该再次对所有记录重复处理。

所以我的问题：

*   在这种情况下如何更好地为 Gearman 提供任务？
*   我应该使用 cron 还是可以组织 Gearman 自动提取任务的逻辑？
*   一次可以向 Gearman 提交多少个任务？

那么，你能告诉我如何最好地实施这个系统吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T11:43:05.820

听起来您需要的是一个队列，其中已处理的项目被添加回队列的底部。我建议这样组织工作流程：

1.  一旦新 URL 出现在您的系统中，将其添加到 Gearman 后台作业队列。

2.  在 Gearman worker 实现中，一旦作业处理完毕，再次将其添加到队列中。

通过这种方式，您将按照添加到队列中的顺序不断地处理 URL，并且整个队列将被无限重复。当然，这假设您重复执行一项任务。

如果有多个任务（例如，首先，在所有 URL 上执行任务 #1，然后执行任务 #2 等），您可以遵循类似的模式，只需在第一个队列之后将作业发送到第二个队列（例如不同的工作人员）任务。然后，根据您希望如何准确地订购工作，您将看到一切都自动发生（如果两个工作人员始终可用），或者您需要监视队列 #1 并且仅在它为空时启动工作人员 #2 . 有关此类监控的详细信息，请参阅[访问 Gearman 管理的任何方式？](https://stackoverflow.com/questions/2752431/any-way-to-access-gearman-administration)

一般来说，Gearman 可以轻松快速地处理 200,000 件物品。现在，使用持久队列会使事情变慢一点（它本质上是一个 MySQL / 其他 DB 连接），但不应该做任何可怕的事情。我自己没有尝试过，但成功的故事通常涉及更多的项目，而且通常也有一个持久的队列。

唯一需要注意的是 Gearman 不允许批量处理作业（例如同时处理 10 个项目）。当您正在处理 URL 时，这意味着您需要一次处理 1 个 URL，这很昂贵，因为您需要等待每个 URL 分别下载。您可以通过使用事件驱动/非阻塞编程语言进行处理来避免它，或者您可以查看[beanstalkd](http://kr.github.com/beanstalkd/)，它允许进行此类批处理。

# javascript - 如何在表单验证时获得函数的返回值

> ID：10847290
> 
> 赞同：1
> 
> 时间：2012-06-01T08:57:40.423
> 
> 标签：javascript, html

我在一个网站上工作，我必须检查一些表格，这样任何字段都不应该为空，如果有任何空字段，它应该写这个字段在字段名称的右侧是空的

我的表单代码是：-

```
 <form action="Owners Infoback.php"  onsubmit="return validateForm()"  method="post" name="enquiry" id="" class="form-body-02">
    <ul>
        <li>1\. Name of owner <input name="Name_of_owner" type="text" class="textarea-bk-02" id=""  value="" style="border:none; width:330px; margin-left:40px; margin-top:15px; height:20px;"/>

        </li>
        <li>
         2\. Name of company:<br />
         <p>(Enter name registered)</p></label>
        <input name="Name_of_company_registered" type="text" class="textarea-bk-02" id=""  value="" style="border:none; width:330px; margin-left:40px; margin-top:13px; height:20px;"/>
        </li>
        <li>
          3\. Address:<p>(Write your own manufacturer address)</p>

        <input name="Owner_address" type="text" class="textarea-bk-02" id=""  value="" style="border:none; width:330px; height:20px; margin-left:40px; margin-top:13px;"/></li>

        </li>
        <li>
          4\. Email id:
          <input name="Owner_Email_id" type="text" class="textarea-bk-02" id=""  value="<?php echo "{$row[3]}";?>" style="border:none; width:330px; margin-left:40px; margin-top:13px; height:20px;"/>
        </li>
        <li><input name="Save" type="submit"  class="send-btns-02 right" value="save" style="margin-top:5px;" >
        <div class="clear"></div>
        </li>
    </ul> 
```

我的java脚本函数是：-

```
 function validateForm(string msz)
  {
 var x=document.forms["enquiry"]["Name_of_owner"].value;
if (x==null || x=="")
{
msz="First name must be filled out");
return msz;
}
x=document.forms["enquiry"]["Name_of_company_registered"].value;
if (x==null || x=="")
{ 
alert("Name of company registered filled out");
return false;
}
x=document.forms["enquiry"]["Owner_address"].value;
if (x==null || x=="")
{
alert("Owner addressmust be filled out");
return false;
}
 x=document.forms["enquiry"]["Owner_Email_id"].value;
 var atpos=x.indexOf("@");
var dotpos=x.lastIndexOf(".");
if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
{
 alert("Not a valid e-mail address");
 return false;
}
} 
```

我想要而不是警报功能，它应该返回一个星号（*）和消息请填写此表格，就在字段名称的右边，请帮助我..提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:04:30.173

You could put hidden Divs next to each form input:

```
<div id="nameOfOwnerError" style="display:none">*</div> 
```

And do this for each input, then you can choose to show/hide them depending whether they are valid or not:

```
$("#nameOfOwnerError").show(); 
```

**Edit:** Neeraj - try this.

In Javascript (sorry), something along the lines of.....

```
 var nameOfOwnerError = document.getElementById("nameOfOwnerError");
nameOfOwnerError.style.display="visible"; 
```

Off the top of my head, but you get the idea. Main point was simply to hide the asterisks and show hide them using the code you have.

**Edit2:** Sorry Neeraj, was untested - this works for me:

```
document.getElementById('nameOfOwnerError').style.display = ""; 
```

makes the element reappear and you could do

```
...display="none"; 
```

in the js code to hide again

**Edit3:** You could add an OnKeyUp event to the textboxes, so that when a text is entered into the textbox, you could trigger you validation script:

```
<input name="Name_of_owner" type="text" onkeyup="validateForm('');" class="textarea-bk-02" id=""  value="" style="border:none; width:330px; margin-left:40px; margin-top:15px; height:20px;"/> 
```

Using the ifs to determine if the field is empty (as you are doing), you should be able to show/hide the asterisks as soon as a user has typed into a given textbox.

Got to go for now but something along these lines is what you're looking for, good luck!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:03:55.297

你不希望它返回一个 *. 您希望它返回 false （就像它正在做的那样）。您还想要在该字段旁边画一个 * 以及您希望他们做什么的消息。

For this to happen you will either want to add an invisible div next to the form field and show it (whichever one it is, based on the missing data) when the user tries to submit an invalid form. Or you can add the element at run time using document.createElement and attach it to the parent of the form field. In either case you'll have to make sure your HTML accommodates the extra element.

# java - Eclipse 3.5 和 Java 7

> ID：10847294
> 
> 赞同：6
> 
> 时间：2012-06-01T08:57:43.560
> 
> 标签：java, eclipse, rcp, java-7

有什么方法可以将 Eclipse 3.5 的 Java 编译器合规级别提高到 1.7。（即）通过添加插件/附加组件。因为默认情况下这将不支持 JDK 1.7 合规性。

我们在 Eclipse 升级中有一个限制，因为它是一个 RCP 应用程序。

对此的任何想法将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T09:24:09.267

旧的 eclipse 版本不支持 java 7。您必须至少下载 eclipse-3.8M1 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T07:54:33.037

总而言之，没有办法在 Eclipse 3.5 中启用 Java 7 Compliance。至少必须迁移到 3.7。非常感谢您的回复。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-01T09:00:55.380

Windows --> Preferences --> Java --> Installed JRE --> Add --> Standard VM --> 然后选择 JDK 7 并将其设置为默认值。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-01T09:06:48.837

![在此处输入图像描述](../Images/f0a97309830f47f4f7bc373fcaa0c4fc.png) 请检查图像以更改设置，使其成为编译器设置下的默认设置。

# magento - 为什么 Magento 不再为我的旧产品生成缓存图像

> ID：10847296
> 
> 赞同：4
> 
> 时间：2012-06-01T08:57:50.050
> 
> 标签：magento

我已将我的 Magento 更改为新服务器。问题是它不会为现有产品生成缓存图像。一切都成为占位符。只有创建的新产品具有缓存图像。如何强制 Magento 使用媒体文件夹中的真实图像？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:31:51.873

这可能是一个权限错误，因为这也发生在我身上多次。尝试是否`chmod 777 media/catalog/product -R`可行`chmod 777 media -R`，然后根据您的服务器设置调查上述文件夹的正确非 777 权限。您可能可以`chown`将媒体文件夹`www-data:www-data`或`apache:apache`. 同样，这取决于您的服务器设置。

# c# - 我必须在实现 IDisposable 的类的析构函数中做任何特别的事情吗？

> ID：10847299
> 
> 赞同：0
> 
> 时间：2012-06-01T08:57:58.003
> 
> 标签：c#, .net, destructor, idisposable

我有一个实现的 C# 类，`IDisposable`在我的`Dispose()`实现中我调用`Dispose()`了也实现`IDisposable`.

同一个类的析构函数呢？我需要在那里做一些特别的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:23:13.097

C# 析构函数语法指示编译器覆盖`Object.Finalize()`. 覆盖的类`Object.Finalize()`被称为具有“终结器”；所有这些对象都被放置在一个名为“Finalization Queue”的特殊列表中（“队列”这个词可能有点奇怪，因为该列表没有语义相关的顺序）并标记为“finalizable”。*执行垃圾回收时，系统首先标记在终结队列之外*存在直接或间接强引用的所有对象*. 然后系统检查每个可终结的对象以查看它是否已被标记。如果没有，它将被标记为“不可终结”，但将被添加到一个名为“freachable [eff-reachable] queue”的队列中。最后，系统将 freachable 队列中的所有对象标记为“活动”，丢弃所有未标记的对象，并且 - 如果 freachable 队列不为空 - 调度一个线程以开始调用`Finalize`其中包含的所有项目。请注意，“freachable queue”中的对象以及它们持有强引用的每个对象都将被视为“活动”，直到它们成为`Finalize()`方法已运行；由于它们将被标记为“不可终结”，因此之后它们将有资格进行垃圾收集，除非它们已被重新标记为“可终结”，或者对它们的强引用已存储在活动对象中。*

 *请注意，“析构函数”或“终结器”确实会加速对象的销毁——相反，它会为*已被销毁*的对象提供暂缓运行其`Finalize()`方法的时间（对于 C# 程序，该方法将依次运行析构函数）。如果具有终结器的对象知道（1）需要在宇宙结束之前发生的事情，（2）没有其他对象会做，并且（3）可以在任意和未知的线程上下文。请注意，很少使用终结器来调用`IDisposable.Dispose`在其他物体上。如果此类对象可以处理从任意线程上下文中释放的问题，那么它们可能会自行完成（因此它们的释放不符合要求#2）；如果它们无法处理从任意线程上下文中释放的问题，则它们不能在终结器中释放（要求 #3）。

顺便说一句，微软在 .net 开发的早期似乎认为实现`IDisposable`但没有终结器的类应该做出规定，以便派生类可以添加终结器，并且他们继续推荐一种`Dispose`允许这一点的模式。虽然有时派生类有一个“警钟”终结器会很有用，如果它在尚未处理的对象上调用它会生成某种警告，但我建议派生自非平凡的类没有终结器的类不应尝试在终结器方法或析构函数中执行清理。*最终确定涉及一些棘手的极端情况，如果在继承链的每一步都*没有得到完美的处理，可能会导致 Heisenbugs（不可预测的失败）*. 如果基类的设计不支持可靠的终结清理，那么将终结器添加到派生类可能会破坏原本可以工作的代码。*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:01:50.883

不，只要您在 Dispose 实现中释放任何资源就可以了。Microsoft 建议使用 using() 语句实现 IDisposable 接口的使用，以便应用程序在对象超出范围时立即调用 dispose。听起来你做的一切都很好——只要确保你在使用该实现时尝试使用 using() 即可。

我知道有时这是不可能的，并且您希望范围持续更长时间，但一次性通常用于处理非托管资源，因此您往往在这些事情上没有太多的生命

更新：

看起来也有理由创建一个析构函数，因为有人在他们的评论中发布了:)

你每天都在这里学到新东西 :D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T09:04:08.590

我认为您的意思是*终结器*而不是*析构器*。

请注意，终结器是非常不寻常的。每个一次性对象都应该有一个终结器当然不是真的。通常，只有控制非托管资源的对象（即那些在 CLR 控制之外获取的对象）可能需要终结器。

如果你确实需要一个终结器，那么你应该调用`GC.SuppressFinanlize`你的 dispose 方法。从[实现`Dispose`方法](http://msdn.microsoft.com/en-us/library/fs2xkftw.aspx)的文档中：

> Dispose 方法应为其正在处理的对象调用 SuppressFinalize 方法。如果对象当前在终结队列中，则 SuppressFinalize 会阻止调用其 Finalize 方法。请记住，执行 Finalize 方法对性能的影响很大。如果您的 Dispose 方法已经完成了清理对象的工作，那么垃圾收集器就没有必要调用对象的 Finalize 方法。

请参阅[`GC.SuppressFinanlize`文档](http://msdn.microsoft.com/en-us/library/system.gc.suppressfinalize.aspx)以获取包含终结器的示例模式。**

# mysql - 将两个 MySQL 查询合二为一

> ID：10847303
> 
> 赞同：1
> 
> 时间：2012-06-01T08:58:10.937
> 
> 标签：mysql, sql, select, left-join, in-operator

在我的数据库中，我有两个表：Replies 和 Threads。

我正在尝试创建一个贡献页面，显示用户已启动或回复的线程。

内部回复是“ThreadId”和“Poster”，它们指定了它被回复的线程的 Id，并且 Threads 中的每一行都有一个 Id 列以及一个“Poster”列。

我正在尝试进行查询以获取用户发布或发布的所有线程的行。

例子：

```
$myUsername = "Bob";
$q = mysql_query("SELECT * FROM `Threads` WHERE `Poster`='$myUsername'
OR (another query to find if they had a row in Replies matching `ThreadId`='$tid'
AND `Poster`='$myUsername')"); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:05:05.577

您将需要使用 IN 子句来指定线程 id 应该在回复表中的查询返回的那些中。这样的事情是我正确理解了您的表格的结构。

```
SELECT * FROM Threads WHERE Poster = $myUsername OR Id IN (
SELECT ThreadId FROM Replies WHERE Poster = $myUsername
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:52:45.257

使用 Christina 的解决方案可能不会产生非常有效的查询。以下*应该*更好：

```
SELECT * 
FROM Threads t1
WHERE t1.Poster='$myUsername'
UNION
SELECT *
FROM Threads t2
INNER JOIN replies r
ON t2.id=r.thread_id
WHERE t2.Poster<>'$myUsername'
AND r.Poster='$myUsername'; 
```

然而：

1) 你真的需要 threas 表中的所有列吗？即使你这样做了，使用 '*' 也很麻烦

2) 如果用户回复不止一个，您仍然会得到重复的消息 - 但是当您使用 '*' 时无法解决此问题

3）如果您在两个表中的海报上都没有索引，则查询仍然会很慢，因为大量数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T16:33:23.913

我做了不同的事情。这两个查询提供了返回的重复项和什么没有，所以我决定走更长的路。

我做了什么：

1）浏览每个用户的回复，并获取线程ID

2) 使用这些 ID 构建查询字符串，例如“OR Id=$threadId OR Id=$threadId2”等

3）将查询字符串放入SELECT * FROM Threads WHERE Poster=$user $queryString2等线程查询

4) 解决方案。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-05T11:04:15.163

试试这个：

您可以使用**LEFT OUTER JOIN**代替**IN**运算符

```
SELECT T.* 
FROM Threads T 
LEFT OUTER JOIN Replies R ON T.Id = R.ThreadId AND R.Poster = $myUsername
WHERE T.Poster = $myUsername OR R.Id IS NOT NULL 
```

# java - 如何更改 Nimbus 中单个 JProgressBar 的颜色？

> ID：10847308
> 
> 赞同：4
> 
> 时间：2012-06-01T08:58:23.077
> 
> 标签：java, swing, look-and-feel, jprogressbar, nimbus

我正在尝试更改 Nimbus LAF（外观）中单个 JProgressBar 的颜色。这个解决方案确实有效，但它改变了所有 JProgressBars 的颜色：/

```
 UIDefaults defaults = UIManager.getLookAndFeelDefaults();
    defaults.put("nimbusOrange",defaults.get("nimbusBase")); 
```

在这个[线程](https://stackoverflow.com/questions/7174420/change-colors-for-jprogressbar-with-nimbus)中是另一种单独更改每个 JProgressBar 颜色的解决方案：

```
 progress = new JProgressBar();
    UIDefaults defaults = new UIDefaults();
    defaults.put("ProgressBar[Enabled].backgroundPainter", new MyPainter());
    progress.putClientProperty("Nimbus.Overrides.InheritDefaults", Boolean.TRUE);
    progress.putClientProperty("Nimbus.Overrides", defaults); 
```

不幸的是，我无法让它工作。我不知道在哪里可以找到“MyPainter()”的库。所以我尝试用“defaults.get("nimbusBase")”和“Color.red”替换这个方法（不知道我在做什么）。也没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T09:07:41.190

1.你能指出是哪一个吗

```
UIManager.put("ProgressBar.background", Color.orange);
UIManager.put("ProgressBar.foreground", Color.blue);
UIManager.put("ProgressBar.selectionBackground", Color.red);
UIManager.put("ProgressBar.selectionForeground", Color.green); 
```

通知有效期`UIDefaults`为`MetalLookAndFeel`,

2.然后请在[Nimbus Defaults中搜索等效项](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html#primary)

3.then 尝试[用逻辑和这个 Painter 覆盖 JProgressBar](https://stackoverflow.com/a/10788379/714968)

# maven - 如何通过 Maven Nexus REST api 获得最高版本的工件？

> ID：10847312
> 
> 赞同：1
> 
> 时间：2012-06-01T08:58:39.773
> 
> 标签：maven, nexus, maven-metadata

我虽然可以使用 /nexus/service/local/artifact/maven/resolve?r=releases&g=com.mycompany&a=myArtifact&v=LATEST

然后我读到[了 LATEST 和 RELEASE 之间的区别](http://maven.40175.n5.nabble.com/nexus-REST-API-artifact-maven-resolve-redirect-returns-unexpected-for-v-LATEST-td5581415.html)。

在 Maven 3 中，不再填充 LATEST - 好的
，但是 RELEASE 只给我最新的发布版本！
那么如何获取最高版本的工件呢？
我需要一些东西，它返回版本**2.1.3**
有什么 线索吗？

这是我来自 Nexus 的 maven-metadata.xml：

```
<metadata>
  <groupId>com.mycompany</groupId>
  <artifactId>myartifact</artifactId>
  <versioning>
    <latest>1.0.4</latest>
    <release>2.0.5</release>
    <versions>
      <version>1.0.0</version>
      <version>1.0.1</version>
      <version>1.0.2</version>
      <version>1.0.4</version>
      <version>1.0.5</version>
      <version>1.0.6</version>
      <version>1.0.7</version>
      <version>2.0.0</version>
      <version>2.0.1</version>
      <version>2.0.2</version>
      <version>2.0.3</version>
      <version>2.0.4</version>
      <version>2.1.0</version>
      <version>2.1.1</version>
      <version>2.1.2</version>
      <version>2.1.3</version> <!-- released week ago -->
      <version>2.0.5</version> <!-- released today -->
    </versions>
    <lastUpdated>20120531131959</lastUpdated>
  </versioning>
</metadata> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:13:59.440

[使用DefaultArtifactVersion](http://www.docjar.org/docs/api/org/apache/maven/artifact/versioning/DefaultArtifactVersion.html)中的代码从您可以使用排序的字符串创建版本实例`compareTo()`。

代码在工件中

```
<dependency>
  <groupId>org.apache.maven</groupId>
  <artifactId>maven-artifact</artifactId>
  <version>3.0</version>
</dependency> 
```

请注意，这并不总是有效。例如，具有比最新`commons-lang:commons-lang`版本旧但排序更高的版本。`20030203.000129``2.6`

# iphone - presentModalViewController 耗时操作

> ID：10847318
> 
> 赞同：2
> 
> 时间：2012-06-01T08:58:52.117
> 
> 标签：iphone, ios, performance

我有一个 UINavigationController 和 UINavigationBar 我有一个按钮。当我按下这个按钮时，一个新的 UINavigationController 以模式呈现为 UIModalPresentationFormSheet。这行得通。

但我认识到 FormSheet 的呈现非常耗时。我在 action 方法中放了两个日志（“start”和“finish”，见下面的代码），一个在第一行，一个在最后一行。日志时间告诉我，运行此代码大约需要 1.5 到 2 秒。

这就是从 UINavigationItem 调用的 Action 方法：

```
- (IBAction)addBtnPressed:(id)sender{
  NSLog(@"start");

  FooViewController *fooContr = [[FooViewController alloc] init];
  fooContr.delegate = self;
  UINavigationController *navContr = [[UINavigationController alloc] initWithRootViewController:fooContr];
  [fooContr release];
  navContr.modalPresentationStyle = UIModalPresentationFormSheet;

  [self.navigationController presentModalViewController:navContr animated:YES];

  [navContr release];

  NSLog(@"finish"); 
```

}

好像这条线

```
 [self.navigationController presentModalViewController:navContr animated:YES]; 
```

需要 90% 的时间。

有谁知道这里发生了什么以及如何优化它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:05:09.267

`UINavigationController`用 the预加载，`FooViewController`所以当你展示它时它已经在内存中了。

加载`FooViewController`实例视图可能需要花费这么多时间。

您可以通过对其执行某些操作来使其加载。像

`UIView *view = fooContr.view;`

您应该在单击显示模态视图控制器的按钮之前执行此操作。否则它可能会产生相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:02:42.637

性能问题一定是因为您`navContrManAufn`需要时间来创建自己。它在 init 时执行什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T09:09:26.963

最小化您在 viewControllers 中的 init 中的代码，在可能的情况下将代码移动到 viewDidLoad 甚至 viewDidAppear（应该只运行一次的代码应该在 viewDidload 中）。

# android - android 许可无法绑定到服务

> ID：10847320
> 
> 赞同：-1
> 
> 时间：2012-06-01T08:58:57.653
> 
> 标签：android, android-lvl

我正在尝试实施 android 许可并在日志中不断收到无法绑定到服务的错误。

我遇到与此链接类似的问题

[Android Context.bindService 总是返回 false 并且永远不会触发 ServiceConnection 对象](https://stackoverflow.com/questions/2914921/android-context-bindservice-always-returns-false-and-serviceconnection-object-is)

但解决方案没有奏效。我一直回到 android 示例应用程序，无论我尝试什么上下文以及何时不对示例进行任何更改，我都会遇到相同的错误。服务是否需要在清单中，它不在示例中。我在想也许它与图书馆有关？我已经在使用 1.5 的库中尝试过这个，然后在模拟器中使用 android 2.1 和 1.5，在所有情况下，同样的问题，服务不会绑定......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T19:22:00.617

我确定问题不是我的源代码，而是我试图测试它的方式。对于模拟器，您需要使用 Google API 8 或更高版本或安装市场才能绑定服务，我刚刚使用了 Google API 8，它似乎工作正常。在我的设备上，我仍然不确定它失败的确切原因，它是 2.3 版，并且在我登录的主帐户时可以正常工作，但是我在开发人员控制台中添加的其他登录名似乎不起作用。我怀疑这是因为 APK 尚未上传，但仍不确定为什么它适用于我的帐户但不存在...

# javascript - 按钮单击时的 Javascript 条件回发

> ID：10847325
> 
> 赞同：0
> 
> 时间：2012-06-01T08:59:11.773
> 
> 标签：javascript, asp.net

我的 ASP.NET 页面中有一个按钮控件，它应该根据某些条件有条件地回发。

```
<input runat="server" type="button" id="btnDone" value="Select" onclick="return SendAndCloseAdvWin();" onserverclick="serverProcessing" /> 
```

.

```
function SendAndCloseAdvWin() {
  var win = GetRadWindow();

  if (GetRadCtrl('lstSelectors').get_checkedItems().length == 0) {
    DisplayError('Please select atleast one item.');

    return false;
  }
  else {
    if (win) {
      win.close(GetSelectedItems());
      return true;
    }
  }
} 
```

如果条件为真，则页面不应回发，否则应回发。但我发现即使条件失败，页面也不会回发。我在这里想念什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:07:32.207

您的按钮是“按钮”而不是“提交”按钮。

尝试将您的按钮更改为：

```
<input runat="server" type="submit" id="btnDone" value="Select" onclick="return SendAndCloseAdvWin();" onserverclick="serverProcessing" /> 
```

同样在您的 JS 中，除非满足嵌套条件，否则您不会在“else”中返回任何值。您应该在失败中返回真/假。

```
 else {
    if (win) {
      win.close(GetSelectedItems());
      return true;
    }
    return false;
  } 
```

# jquery - 连接到多个可排序项目

> ID：10847329
> 
> 赞同：0
> 
> 时间：2012-06-01T08:59:20.810
> 
> 标签：jquery

我正在连接到一个可排序的项目：

```
$(function() {
    $('.page').sortable({
        connectWith: ".connect",
        items: ".myItems" 
    }) 
```

如何连接到多个项目？就像是 ：

```
$(function() {
    $('.page').sortable({
        connectWith: ".connect",
        items: [".myItems"] , [".myItems1"] 
    }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:20:36.327

由于[sortable](http://jqueryui.com/demos/sortable/)的文档指定`items`选项采用有效的 jQuery 选择器。所以你可以像这样使用它

```
$(function() {
   $('.page').sortable({
     connectWith: ".connect",
     items: ".myItems,.myItesm1" 
  });
)}; 
```

[工作小提琴](http://jsfiddle.net/joycse06/UAcC7/47/)

在小提琴中，您会发现您只能对具有`fixed`and类的元素进行排序`me`。

# javascript - 使用 html/javascript 的 AIR 框架移动窗口

> ID：10847330
> 
> 赞同：0
> 
> 时间：2012-06-01T08:59:26.093
> 
> 标签：javascript, html, air

我正在 Aptana 2.0 中使用 HTML 和 JavaScript/jQuery 构建 AIR 框架应用程序。我已经删除了工具箱（<systemChrome>none</systemChrome>），但我需要让用户能够移动窗口。

我希望能够单击窗口或窗口本身上的任何控件并移动窗口。

我找到了一些在 ActionScript 中执行此操作的示例，但它并没有太大帮助，因为我需要在 HTML/JavaScript 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:39:09.873

我们只需要处理鼠标按下事件，当鼠标按下时，调用对象的`startMove()`方法`nativeWindow`使该窗口跟随鼠标。

```
// bind the mouse down event
$(document).bind
(
    "mousedown",
    function ()
    {
        // this will make the window to follow the mouse
        nativeWindow.startMove();
    }
); 
```

# python - 在 Python 中的简单模拟上“未调用”AssertionError

> ID：10847331
> 
> 赞同：3
> 
> 时间：2012-06-01T08:59:37.047
> 
> 标签：python, mocking

我第一次尝试使用 Python 模拟模块（使用 pip 下载）。我在设置断言时遇到问题，我已将其范围缩小到以下代码：

```
class TestUsingMock(unittest.TestCase):

    def setUp(self):
        self.fake_client = mock.Mock()

    def test_mock(self):
        self.fake_client.copy = mock.Mock()
        self.fake_client.copy("123")
        self.fake_client.assert_called_with("123")

if __name__ == "__main__":
    unittest.main() 
```

这是我得到的错误：

```
F
======================================================================
FAIL: test_mock (__main__.TestVCSDriver)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "./mock_test.py", line 17, in test_mock
    self.fake_client.assert_called_with("123")
  File "/Library/Python/2.6/site-packages/mock.py", line 859, in assert_called_with
    raise AssertionError('Expected call: %s\nNot called' % (expected,))
AssertionError: Expected call: mock('123')
Not called 
```

没有断言，一切正常。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T09:50:55.243

您正在调用该对象，但测试是否已调用`self.fake_client.copy`另一个对象。`self.fake_client`

要么调用“正确”的对象：

```
self.fake_client("123")
self.fake_client.assert_called_with("123") 
```

或测试`copy`：

```
self.fake_client.copy("123")
self.fake_client.copy.assert_called_with("123") 
```

# git - 使用带有额外字典的 sgml 模式时，Aspell 不返回拼写错误的单词

> ID：10847333
> 
> 赞同：1
> 
> 时间：2012-06-01T08:59:42.363
> 
> 标签：git, bash, grep, spell-checking, aspell

我对此感到非常困惑。我有一个拼写检查在 Git 中上演的东西的脚本。这是获取拼写错误单词列表的命令：

```
git diff --cached | grep -e "^+[^+]" | aspell list --mode sgml --lang en --extra-dicts=/home/test/dictionary.test --add-sgml-skip={ulink,literal,screen} | sort | uniq 
```

--add-sgml-skip 中的参数数量不相关。生成 dictionary.test 文件：

```
aspell --lang=en create master /home/test/dictionary.test < /home/test/dict.txt 
```

这一切都有效，一切都很好，但在一个文档中，它不起作用，没有找到任何单词。我不知道为什么会这样。这是更多信息：

```
> git diff --cached | grep -e "^+[^+]" | wc -l
250
> git diff --cached | grep -e "^+[^+]" | aspell list --mode sgml --lang en --extra-dicts=/home/test/dictionary.test | sort | uniq | wc -l
39
> git diff --cached | grep -e "^+[^+]" | aspell list --mode sgml --lang en --extra-dicts=/home/test/dictionary.test --add-sgml-skip={ulink} | sort | uniq | wc -l
39
> git diff --cached | grep -e "^+[^+]" | aspell list --mode sgml --lang en --extra-dicts=/home/test/dictionary.test --add-sgml-skip={ulink,literal} | sort | uniq | wc -l
0 
```

当我在其他存储库中运行此命令时，它可以完美运行。我一直试图弄清楚这一天，但我很茫然。我必须知道为什么会发生这种情况，否则我将无法再睡一晚:) 非常感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T05:09:11.960

Aspell 在下一行尝试它以获取可能的错误（将 test.html 替换为现有文件）。

```
cat test.html | aspell list f- sgml --lang en --extra-dicts=/home/test/dictionary.test --add-sgml-skip={nospell,literal,screen} | sort | uniq 
```

如果没有错误，请尝试。

```
git diff --cached | grep -e "^+[^+]" | cat test.html | aspell list f- sgml --lang en --extra-dicts=/home/test/dictionary.test --add-sgml-skip={nospell,literal,screen} | sort | uniq 
```

# c# - 在 C# 中访问数据库时出错

> ID：10847336
> 
> 赞同：0
> 
> 时间：2012-06-01T08:59:48.847
> 
> 标签：c#, sql-server, database

我正在使用以下连接字符串访问基于服务的数据库

```
static string appath = Library_Records.Program.app_path;

string connectionstring = @"Data Source=.\SQLEXPRESS;AttachDbFilename=appath;Integrated Security = true;User Instance = True";
connection = new SqlConnection(connectionstring);

 static string dbfiles = null;
 internal static string app_path
 {
     get { return dbfiles = "|Datadirectory|\\5700.mdf"; }
 } 
```

Library_Records:namespace, Program 是包含的类名`Main()`

当我打电话时`connection.Open()`，它给出了以下错误

> 尝试为文件路径附加自动命名的数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。

`5700`是我的`.mdf`扩展名数据库。如何纠正这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:04:08.353

变量永远不会自动替换为字符串中的值，因此`AttachDbFilename=appath;`不会起作用。

您应该执行以下操作：

```
string connectionstring = 
    string.Format(@"Data Source=.\SQLEXPRESS;AttachDbFilename={0};Integrated Security=True;User Instance=True", appath);

connection = new SqlConnection(connectionstring); 
```

# c# - C# 本地化语言文件 (resx)？

> ID：10847340
> 
> 赞同：2
> 
> 时间：2012-06-01T09:00:08.190
> 
> 标签：c#, localization

嗨，我是 C# 和本地化的新手，我开始工作了，但我想知道是否有任何预制语言 (resx) 文件可供下载，或者我应该自己从头开始创建它们吗？

谢谢

巴特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:05:36.450

有两种方法可以理解您的问题。

如果它是：

**一个。** *你想要一个通用的、常见的 RESX 包含应用程序中的典型单词……我不这么认为。*

**湾。** *您想要创建一个 RESX，您需要手动创建 XML 文件及其强类型版本作为一个类，以便在您的应用程序中轻松访问它：不。*

对于“ **a** ”，我没有任何要添加的解释，但是关于“ **b** ”，只需转到 Visual Studio 并右键单击您的项目或项目文件夹，选择“添加新项目”并查找资源文件项，单击“添加”，仅此而已。

# struts2 - 如何在struts2中获取基本网址

> ID：10847342
> 
> 赞同：1
> 
> 时间：2012-06-01T09:00:18.170
> 
> 标签：struts2, struts

我正在使用 struts2 框架和在 struts1 中我们使用从基本 url 指向它

```
<html:rewrite page='/stylesheets/m.css'/> 
```

请告诉我如何在 sturts2 中做同样的事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:35:05.877

As @Quaternion commented

```
<link rel="stylesheet" href="<s:url value="/stylesheets/m.css"/>" />

<link rel="stylesheet" href="${pageContext.request.contextPath}/stylesheets/m.css" type="text/css"> 
```

[Strut2 UrlTag](http://struts.apache.org/2.3.4/docs/using-struts-2-tags.html)

# php - 发表评论时如何使网络链接可点击

> ID：10847347
> 
> 赞同：0
> 
> 时间：2012-06-01T09:00:56.390
> 
> 标签：php

当在 mf 网站上发表评论时，我需要您的帮助来制作可点击的网络链接。我下面的代码无法实现这一点。它只插入（代码未显示），网站不可点击。

感谢您的帮助。

```
 $reg = "/(http|https|ftp|ftps|www)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/g";

  if(preg_match($reg, $comment, $url,))         
       { 

  $comment_body = preg_replace($reg, "<a href = " .$url[0]. "> $url[0] </a> ", $comment);

                  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:19:01.920

试试这个：

```
$url    = 'this is an url http://www.test.com';
$result = preg_replace('@(https?://([-\w\.]+)+(:\d+)?(/([\w/_\.]*(\?\S+)?)?)?)@', '<a href="$1">$1</a>', $url);

echo $result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:19:36.943

我认为问题在于你如何指定你的href：html喜欢这样的sstuff周围的引号。尝试：

```
$comment_body = preg_replace($reg, "<a href = \"" .$url[0]. "\"> $url[0] </a> ", $comment); 
```

否则它看起来像：

```
href=some_url.whatever 
```

代替

```
href="some_url.whatever" 
```

# c++ - 如何在命令窗口的一个位置写入变量并在同一位置更新其值？

> ID：10847358
> 
> 赞同：2
> 
> 时间：2012-06-01T09:01:42.140
> 
> 标签：c++, gcc, printing

例如输出是 ***a=20***我想将数字*“20”*更改为另一个数字并将结果写入第一个输出的相同位置，而不是在新行中（不需要最早的*“a”*数量只是最后一个结果很重要）我尽量避免这样的事情：

**输出：**

```
a=20
a=21
a=70
.
.
. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T09:05:14.720

你有没有试过这个：

```
printf("\ra=%d",a);
// \r=carriage return, returns the cursor to the beginning of current line 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T09:13:32.460

形式上，通用解决方案需要类似`ncurses`. 实际上，如果您要寻找的只是这样一行：

```
a = xxx 
```

where`xxx`是一个不断演变的值，您可以输出没有 a `'\n'`（或 a`std::flush`代替`std::endl`）的行；要更新，只需输出足够的`\b`字符即可返回数字的开头。就像是：

```
std::cout << "label = 000" << std::flush;
while ( ... ) {
    //  ...
    if ( timeToUpdate ) {
        std::cout << "\b\b\b" << std::setw(3) << number << std::flush;
    }
} 
```

这假定了固定宽度格式（在我的示例中，没有大于 999 的值）。对于可变宽度，您可以首先格式化为 std::ostringstream，以确定下次必须输出的退格数。我会为此使用特殊的计数器类型：

```
class DisplayedCounter
{
    int myBackslashCount;
    int myCurrentValue;
public:
    DisplayedCounter()
        : myBackslashCount(0)
        , myCurrentValue(0)
    {
    }
    //  Functions to evolve the current value...
    //  Could be no more than an operator=( int )
    friend std::ostream& operator<<(
        std::ostream& dest,
        DisplayedCounter const& source )
    {
        dest << std::string( myBackslashCount, '\b' );
        std::ostringstream tmp;
        tmp << myCurrentValue;
        myBackslashCount = tmp.str().size();
        dest << tmp.str() << std::flush();
        return dest;
    }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T09:05:46.780

上次我不得不这样做（回到恐龙在地球上漫游并且牛仔布很酷的时候），我们使用了[Curses](http://en.wikipedia.org/wiki/Curses_%28programming_library%29)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T09:11:21.470

您可以存储所需的所有输出，并在每次更改值时重新绘制整个控制台窗口。在 Linux 上不知道，但在 Windows 上，您可以使用以下命令清除控制台：

```
system("cls"); 
```

# javascript - 聚焦 jquery 不起作用

> ID：10847361
> 
> 赞同：1
> 
> 时间：2012-06-01T09:01:55.093
> 
> 标签：javascript, jquery

我希望#result 将隐藏在#search_form 之外的发送点击。我尝试使用focusout，但它不起作用。

```
<div id="search_form">
    <form method="post" onsubmit="return checkForm(this.form)">
        <div class="search padding">
            <input type="text" id="searchbox" name="manga_name" class="input" value="Tìm truyện muốn đọc ..." onfocus="if (value =='Tìm truyện muốn đọc ...'){value =''}" onblur="if (value ==''){value='Tìm truyện muốn đọc ...'}" onkeyup="keyup();"/>
            <input type="submit" value=" " id="searchsubmit" class="go"/>
        </div>
    </form>     
    <div id="result"></div>
</div>

<script>
    $("#search_form").focusout(function() {
        $('#result').html('');
        $('#result').css('display', 'none');
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:04:28.620

请执行以下代码

```
<script>
    $("#search_form").on("focusout",function() {
        $('#result').html('');
        $('#result').css('display', 'none');
    });
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-01T09:03:14.977

把你的代码放进去

`$(document).ready(function(){//your code})`

IE，

```
$(function(){}); 
```

这可能会帮助你。

```
<script> 

    $(function(){
        $("#search_form").focusout(function() { 
            $('#result').html(''); 
            $('#result').css('display', 'none'); 
        }); 
        }); 
    </script> 
```

# boost - 如果它执行的函数很好地结束，分离的 boost::thread 是否能很好地清理

> ID：10847367
> 
> 赞同：1
> 
> 时间：2012-06-01T09:02:19.167
> 
> 标签：boost, boost-thread

假设我显式或隐式分离 boost::thread（析构函数这样做，与 std::thread 不同），并且线程调用的函数保证不会让任何异常未处理......这是否会泄漏一些资源，或者当函数退出时，所有东西都被操作系统清理了吗？如果你想知道我为什么想要它：我想要一些异步触发并忘记执行的东西，而不调用线程停止（for .join()）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:12:12.847

大多数资源——动态分配的内存、各种句柄等——都是进程范围的，所以当分配它们的线程结束时，它们当然不会被释放。（另一方面，有线程相关的资源，如线程堆栈和 TLS（线程本地存储），它们在线程退出时被释放，但我想这不是你的意思。）

另外，请注意 join() 不是“线程停止”，它只是等待线程停止。即，当您调用thread1.join() 时，您只需等到thread1 结束。它不会释放任何资源。

# c# - 从 C# 使用 C 库的提示

> ID：10847370
> 
> 赞同：9
> 
> 时间：2012-06-01T09:02:22.540
> 
> 标签：c#, .net, c, interop

我有一个 C 语言库，我想从 C# 中使用它。

根据我从网上收集到的信息，[一个想法](http://www.pcreview.co.uk/forums/unmanaged-c-lib-c-t1919937.html)是将其包装在 C++ dll 中，然后 DllImport 将其包装起来。

问题是我要调用的函数有一个相当讨厌的参数集：包括对函数的引用（将是一个 .NET 函数）和几个数组（一些写入，一些读取）。

```
int lmdif(int (*fcn)(int, int, double*, double*, int*), 
          int m, int n, double* x, double ftol, double xtol, double gtol, 
          int maxfev, double epsfcn, double factor) 
```

给定这样的界面，我应该注意什么？（请也提供解决方案）

[你为什么不...]

[- 用 C# 重写？我开始了，但它已经是从 FORTRAN 机器翻译的，我不太喜欢编码我无法理解的东西。]

[- 使用[现有的 .NET 库](http://www.centerspace.net/)？我现在正在尝试，但结果并不完全相同]

[- 在 C++ 中重新编译？我在想，但看起来很痛苦]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T11:32:26.790

作为记录，我得到了大部分的方法来让它工作，然后最终将适当的 C 文件拉入 C++ 项目（因为我正在与我什至不需要的代码中的兼容性问题作斗争）。

以下是我在此过程中收集的一些提示，可能对遇到此问题的人有所帮助：

## 编组阵列

`double*`在 C 中，指向双精度 ( ) 的指针和双精度数组( )之间没有区别`double*`。当你来到互操作时，你需要能够消除歧义。我需要传递 的数组`double`，因此签名可能如下所示：

```
[DllImport(@"PathToDll")]
public static extern Foo(
    [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 2)[In] double[] x, 
    [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 3)[Out] double[] y, 
    int x_size, 
    int y_size) 
```

C 需要有关数组长度的额外信息，您必须将其作为单独的参数传入。编组还需要知道这个大小在哪里，因此您指定`SizeParamIndex`，它表示参数列表中大小参数的从零开始的索引。

您还可以指定要传递数组的方向。在这个例子`x`中被传递*到* `Foo`'sends back'`y`中。

## 调用约定

您实际上不需要了解这意味着什么的更详细的细节（换句话说，我不需要），您只需要知道存在不同的调用约定，并且它们需要在双方都匹配。C# 默认为`StdCall`，C 默认为`Cdecl`. 这意味着您只需要显式指定调用约定，如果它与您使用它的任何一方的默认值不同。

这在回调的情况下尤其麻烦。如果我们将回调传递给`C`from `C#`，我们打算使用 调用该回调`StdCall`，但是当我们传入它时，我们正在使用`Cdecl`. 这会产生以下签名（有关上下文，请参阅[此问题](https://stackoverflow.com/q/10879518/11410)）：

```
//=======C-code======
//type signature of callback function
typedef int (__stdcall *FuncCallBack)(int, int);

void SetWrappedCallback(FuncCallBack); //here default = __cdecl

//======C# code======
public delegate int FuncCallBack(int a, int b);   // here default = StdCall 

[DllImport(@"PathToDll", CallingConvention = CallingConvention.Cdecl)]
private static extern void SetWrappedCallback(FuncCallBack func); 
```

## 打包回调

很明显，但对我来说并不是很明显：

```
int MyFunc(int a, int b)
{
   return a * b;
}
//...

FuncCallBack ptr = new FuncCallBack(MyFunc);
SetWrappedCallback(ptr); 
```

## .def 文件

您想从 C++ 项目（待`DllImport`编辑）公开的任何函数都需要在`ModDef.def`文件中显示，其内容如下所示：

```
LIBRARY MyLibName
EXPORTS
    SetWrappedCallback  @1 
```

## 外部“C”

如果你想在 C++ 中使用 C 函数，你必须将它们声明为`extern "C"`. 如果你包含 C 函数的头文件，你可以这样：

```
extern "C" {
  #include "C_declarations.h"
} 
```

## 预编译头文件

为了避免编译错误，我必须做的另一件事是将每个“C”文件`Right-click -> Properties -> C/C++ -> Precompiled Headers`设置`Precompiled header`为**不使用预编译头文件。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T09:07:54.397

唯一的“讨厌”参数是函数指针。但幸运的是，.NET 通过委托很好地处理了它们。

唯一的问题是调用约定。在 C# 中，它只发出一种类型 (iirc `stdcall`)，而 C 代码可能期望`cdecl`. 后一个问题可以在 IL 级别上处理（或使用`Reflection.Emit`）。

[这是一些](https://github.com/leppie/IronScheme/blob/master/IronScheme/IronScheme/Compiler/FFICallGenerator.cs#L233)通过它执行的代码`Reflection.Emit`（这是为了帮助理解需要在委托的方法上放置什么伪属性`Invoke`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T09:30:10.800

[Marshal.GetFunctionPointerForDelegate](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.getfunctionpointerfordelegate.aspx)的 Microsoft 文档：

*“将委托转换为可从非托管代码调用的函数指针。”*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-01T15:59:34.077

这就是我通常与 C# 中的 C DLL 交互的方式：

```
 public static unsafe class WrapCDll {
    private const string DllName = "c_functions.dll";

    [DllImport(DllName, CallingConvention = CallingConvention.Cdecl)]
    public static extern void do_stuff_in_c(byte* arg);
  } 
```

无需使用 C++ 包装，您就可以获得所需的调用约定。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T17:59:22.553

几年前有一篇[MSDN 文章引用了](http://msdn.microsoft.com/en-us/magazine/cc164193.aspx)[InteropSignatureToolkit](http://clrinterop.codeplex.com/releases/view/14120)。这个小工具对于编组 C 接口仍然很有用。将接口代码复制并粘贴到“SigImp Translation Sniplet”中并观察结果。

结果如下，但我不知道如何使用委托或它是否有效。因此，如果它有效，请添加一些评论。

```
/// Return Type: int
///param0: int
///param1: int
///param2: double*
///param3: double*
///param4: int*
public delegate int Anonymous_83fd32fd_91ee_45ce_b7e9_b7d886d2eb38(int param0, int param1, ref double param2, ref double param3, ref int param4);

public partial class NativeMethods {

    /// Return Type: int
    ///fcn: Anonymous_83fd32fd_91ee_45ce_b7e9_b7d886d2eb38
    ///m: int
    ///n: int
    ///x: double*
    ///ftol: double
    ///xtol: double
    ///gtol: double
    ///maxfev: int
    ///epsfcn: double
    ///factor: double
    [System.Runtime.InteropServices.DllImportAttribute("<Unknown>", EntryPoint="lmdif", CallingConvention=System.Runtime.InteropServices.CallingConvention.Cdecl)]
public static extern  int lmdif(Anonymous_83fd32fd_91ee_45ce_b7e9_b7d886d2eb38 fcn, int m, int n, ref double x, double ftol, double xtol, double gtol, int maxfev, double epsfcn, double factor) ;

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-12T12:57:07.123

这是一种通过 StringBuilder 将大量数字数据发送到 C 函数的方法。只需将您的数字转储到 StringBuilder 中，同时在适当的位置设置分隔符等等：

```
class Program
    {  
        [DllImport("namEm.DLL", CallingConvention = CallingConvention.Cdecl, EntryPoint = "nameEm", 
            CharSet = CharSet.Ansi, BestFitMapping = false, ThrowOnUnmappableChar = true)]
        public static extern int nameEm([MarshalAs(UnmanagedType.LPStr)] StringBuilder str);
        static void Main(string[] args)
        {
            int m = 3;
            StringBuilder str = new StringBuilder();
            str.Append(String.Format("{0};", m));
            str.Append(String.Format("{0} {1:E4};", 5, 76.334E-3 ));
            str.Append(String.Format("{0} {1} {2} {3};", 65,45,23,12));
            m = nameEm(str);
        }
    } 
```

在 C 端，将 StringBuilder 选为 char*：

```
extern "C"
{
    __declspec(dllexport) int __cdecl nameEm(char* names)
    {
        int n1, n2, n3[4];
        char *token,
             *next_token2 = NULL,
             *next_token = NULL;
        float f;

        sscanf_s(strtok_s(names, ";", &next_token), "%d", &n2);
        sscanf_s(strtok_s(NULL, ";", &next_token), "%d %f", &n1, &f);
        // Observe the use of two different strtok-delimiters.
        // the ';' to pick the sequence of 4 integers,
        // and the space to split that same sequence into 4 integers.
        token = strtok_s(strtok_s(NULL, ";", &next_token)," ",&next_token2);
        for (int i=0; i < 4; i++)
        {
             sscanf_s(token,"%d", &n3[i]);
             token = strtok_s(NULL, " ",&next_token2);
        }    
        return 0;
    }
} 
```

# dotcloud - dotcloud.yml 中的两个 WWW

> ID：10847373
> 
> 赞同：3
> 
> 时间：2012-06-01T09:02:32.927
> 
> 标签：dotcloud

是否可以将两个“www”条目放入*dotcloud.yml*文件中？我想要一个 type:node 和一个 type:static，但它们位于*.yml*文件的“www”部分。不知道我是否能做到这一点，但我肯定很乐意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T11:38:10.037

服务名称必须是唯一的，因此您不能同时拥有名为“www”的服务`node`和服务。`static`

您是否有理由希望它们都具有“www”的名称？

服务名称可以是任何您想要的名称，并且仅用于标识服务，与您希望与该服务关联的域名无关。因此，通常最好将它们命名为明显的名称，以便更容易了解每个服务在做什么。

这是您可以为您做些什么的示例`dotcloud.yml`

```
www:                   # Could actually be anything: front, joe...
    type: node         # But this must be a valid service type.
static:                  # There again, the name can be anything you like.
    type: static       # ...but the type has to be a valid one. 
```

有关`dotcloud.yml`文件检查的更多信息。[http://docs.dotcloud.com/guides/build-file/](http://docs.dotcloud.com/guides/build-file/)

# css - 在 CSS 中将一个类导入另一个类

> ID：10847374
> 
> 赞同：0
> 
> 时间：2012-06-01T09:02:35.523
> 
> 标签：css, class

我正在编写一个短代码，以在有人单击按钮时使表单可见。所以我写下了这些css行。但现在我需要知道如何将一个类导入另一个类。以下是我写的。

```
 .upload {
    background-image: url(images/window.png);
    height: 261px;
    left: 50%;
    margin-left: -163px;
    margin-top: -225px;
    position: absolute;
    top: 50%;
    width: 333px;
    visibility:hidden;
}

.click {
    /*I wanna import the class 'upload' here... 
    /*just like .upload:visibility:visible

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:04:48.447

你可以这样写：

```
.upload.click{
 visibility:visible;
} 
```

**HTML**

```
<button value="submit" class="upload click"/> 
```

# php - 验证类的正确设计？

> ID：10847378
> 
> 赞同：1
> 
> 时间：2012-06-01T09:02:51.333
> 
> 标签：php, class, static, static-methods

我想创建一个验证表单输入的类（请不要对重新发明轮子发表评论）。

我认为拥有一个具有静态验证方法的类更有意义，而不是因为该对象不包含任何数据而必须实例化一个验证对象？

例如，类似：

```
<?php

class Validator {

    static function is_numeric($val) {

        if(is_numeric($val))
            return true;

    }

} 
```

允许我使用：

```
if(!Validator::is_numeric($_POST['age'])) $error['age'] = "Age must be a number"; 
```

然而：

```
<?php

class Validator {

    public function is_numeric($val) {

        if(is_numeric($val))
            return true;

    }

} 
```

是否意味着必须实例化该类的实例才能使用这些函数——我认为这是对系统内存的毫无意义的使用？：

```
$validator = new Validator();
if(!$validator->is_numeric($_POST['age'])) $error['age'] = "Age must be a number"; 
```

我的示例验证方法是一个糟糕的示例，因为它除了使用标准的 PHP is_numeric 函数之外什么也没做，但这只是为了说明我的观点。

***静态方法类是更好的选择吗？如果不是，为什么？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:17:42.173

我建议不仅将您的验证方法设为静态，而且还允许对类进行实例化。

假设我们称我们的类为“Field”。然后，最好有一个带有参数的构造函数：field_name、widget_type、validator_type 以及您想要的任何其他内容。然后你可以只创建 Field 对象并调用'validate（）'或其他类似命名的函数。

例如：

```
$email_field = new Field('Email','entry','email_validator');
$email_field.validate(); 
```

然后构造函数可以从请求变量中获取它的值，验证函数将寻找一个名为“email_validator”的静态验证器。更好的办法是将验证器放在构造函数中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:14:44.293

我认为，如果您在验证器类的特定实例上使用多个函数调用。最好使用单例方法或只创建一个实例（即`$validator = new Validator;`）；

内存方面，这将是最好的选择，我会说，如果你（假设）对类有 100 次单独的静态调用，而不是 1 个实例和 100 次调用，那么你最好创建一个新实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T09:15:15.347

对我来说，使用验证器类似乎是更好的选择。如果不需要类变量，您可以在不实例化的情况下使用它。如果您不需要该类的长期实例，则它不需要 RAM 中的任何空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T10:27:47.173

考虑一下代码的可维护性和可读性。构建框架和类等总是很诱人，但是在 100 个 LOC 而不是 40 个 LOC 中嵌入相同的功能并不总是好的选择。这个决定应该取决于你的验证者会做什么。

如果它没有内部状态，也没有复杂的参数，就不要创建类。

一个简单的函数不仅更易于分析，它还可以让用户知道没有副作用，他不必阅读比他打算使用的函数更多的文档。

把事情简单化。

# c++ - POCO中找不到ntdll.dll？

> ID：10847379
> 
> 赞同：0
> 
> 时间：2012-06-01T09:02:58.870
> 
> 标签：c++, https, ntdll

当我使用 HTTPSClientSession 运行程序时，它崩溃了，因为：

```
NULL pointer: _pInstance [in file "c:\poco-1.4.3p1-all\util\include\poco\util\application.h,line 446] 
```

然后，我跟踪堆栈，发现`ntdll.dll`没有加载，我对此表示怀疑。

任何想法为什么 NTDLL 看起来没有加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T03:04:35.537

我已经解决了这个问题，因为没有构建 Application 的实例

# javascript - jQuery。queue() 与使用回调函数完成某事有何不同？

> ID：10847381
> 
> 赞同：7
> 
> 时间：2012-06-01T09:03:15.080
> 
> 标签：javascript, jquery, queue, jquery-callback

html:

```
<span>hello world!</span> 
```

js：（使用回调）

```
$('span').click(function() {
  $(this).animate({
    fontSize: '+=10px'
  }, 'slow', function() {
    // callback after fontsize increased
    $(this).text(  $(this).text() + ' rolled! ' );
  });
}); 
```

这样每次`SPAN`点击时，在字体大小增加后附加文本“滚动”，而不是一起发生。

它可以通过使用 queue() 来完成，如下所示：

js：（使用队列（））

```
$('span').click(function() {
  $(this).animate({
    fontSize: '+=10px'
  }, 'slow'})
  .queue(function() {
    $(this).text(  $(this).text() + ' rolled! ' );
  });
}); 
```

我不确定它们之间有什么区别。两者都做同样的事情。

**为什么 queue() 比使用回调更好/更喜欢（或者为什么不是）？queue() 有什么特别之处？**

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:10:01.680

您可以将更多事件（您在代码中指定的其他事件）放入与放入动画相同的队列中。

所以回调将在你的动画准备好后立即执行，但如果使用 queue() ，队列中可能会有其他事件首先执行。

这种行为的好处是不会同时执行并发事件（例如向上滑动和向下滑动），这会产生奇怪的事情。

例子：

```
$('div').click(function() {
  $(this).animate({
    color: 'green'
  }, 'slow'})
  .queue(function() {
    $(this).text( ' got colored! ' );
  });
});

$('span').click(function() {
  $(this).animate({
    fontSize: '+=10px'
  }, 'slow'})
  .queue(function() {
    $(this).text(  ' got bigger! ' );
  });
}); 
```

如果你先点击div，然后点击span，现在你可以确定div的队列会先被执行，当它准备好时，span的队列就会被执行。

在回调的情况下，属于最先准备好的动画将首先执行。如果它们同时准备好，那么它们将同时执行。在这种情况下，这将导致看不到“有色！” 文字或“变大了！” 文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:12:41.110

使用`callback`参数与使用方法完全相同`.queue(callback)`。
当您`callback`向任何动画提供 a 时，它只是将回调以与`.queue`.

`.queue(callback)`只是另一种从动画中单独添加回调的方法。
这样做有完全正当的理由：

```
$(this).animate(...);
if (shouldDoCallback) {
    $(this).queue(...);
} 
```

# facebook - 未为公共用户显示页面选项卡

> ID：10847384
> 
> 赞同：0
> 
> 时间：2012-06-01T09:03:49.463
> 
> 标签：facebook, tabs

我为 Facebook 用户创建了一个应用程序，但对于公共用户，此选项卡在 Facebook 选项卡上不可见。

此应用程序不在沙盒模式下运行，并且在其他公共页面上的测试用例中作为选项卡也适用于所有其他 Facebook 用户。

[使用 Facebook 文档http://developers.facebook.com/docs/appsonfacebook/pagetabs/](http://developers.facebook.com/docs/appsonfacebook/pagetabs/)中的文档工作流创建的 Pagetab

是否有可用于在 Facebook 页面上添加 Pagetab 或数量限制的修订工作流程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:10:44.183

您是否将正确的应用程序添加到您的粉丝页面？您是否在时间线中启用了 App Box，以便用户可以点击它？转到`Edit Page`您的页面并单击`Apps`左侧菜单。仔细检查您的应用程序是否存在。然后单击`Edit Settings`确保该选项卡已添加到您的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T10:01:55.283

**使用这种方式**

[https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=](https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=) {YOUR_Domain_URL}

然后你会得到一个列表页面，你可以选择一个，应用程序会得到一个链接来加载

参考：[https ://developers.facebook.com/docs/appsonfacebook/pagetabs/](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)

# php - Moodle $DB 函数

> ID：10847385
> 
> 赞同：0
> 
> 时间：2012-06-01T09:03:50.483
> 
> 标签：php, database, moodle

我现在一直在研究moodle，似乎找不到正确的答案...

```
public static function exists($user, $course){
    return self::$DB->record_exists('completion_ext', array(
        'user_id'=>$user,
        'course'=>$course

    ));
} 
```

我创建了这段代码并试图回应它......函数的类被命名`completion_ext`，所以当我去的时候

```
echo completion_ext::exists(1, 3); 
```

它应该回声`true`还是`false`对？请需要帮助

当我执行上面说的代码时，它是空白的......它不是真的，也不是假的，只是空白

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:26:25.197

这将返回布尔值 true 或 false，但是当您回显布尔结果时，它将被转换为字符串，该字符串将布尔值转换为 1 表示 true 或 none 表示 false。

如果您认为应该获得 1，但您没有获得 1，请通过执行此操作确保没有数据库查询问题。

```
public static function exists($user, $course){
    try {
        return self::$DB->record_exists('completion_ext', array(
            'user_id'=>$user,
            'course'=>$course

        ));
    } catch (Exception $ex) {
        echo $ex->getMessage();
        if (!empty($ex->error)) {
            echo $ex->error;  // since dml_exception stores it here
        }
    }
} 
```

如果这没有帮助，请确保您已打开调试并从管理设置一直向上（只需搜索调试）并确保在调用函数之前打印标题。我假设您的班级将本地 $DB 参数设置为系统全局 $DB 参数？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T10:34:19.413

在使用它之前声明 $DB 变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T00:30:14.207

> 它应该回声`true`还是`false`对？

*不*，它不回显( `false`) 或`1`( `true`)。请参阅[手册中的布尔到字符串转换](http://php.net/manual/language.types.type-juggling.php)。使用`echo`将使 PHP 将所有内容转换为字符串。

# android - 在 Android 的 HTTP 用户代理标头中，“U”是什么意思？

> ID：10847390
> 
> 赞同：7
> 
> 时间：2012-06-01T09:03:59.057
> 
> 标签：android, user-agent

我正在尝试实现 HTTP 用户代理标头解析器。

我很想知道 Android 的 HTTP 用户代理标头中“U”的含义。

这是 Android 的示例 HTTP 用户代理标头：

> Mozilla/5.0 (Linux; **U** ; Android 4.0.2; ko-kr; Galaxy Nexus Build/ICL53F) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30

有人知道吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T09:10:44.357

U 为强大的安全性......

[http://www.useragentstring.com/Android%20Webkit%20Browser_id_18032.php](http://www.useragentstring.com/Android%20Webkit%20Browser_id_18032.php)

安全值：

*   N 表示不安全

*   U 强大的安全性

*   我为弱安全

# javascript - 在 iNettuts 拖放中绑定新创建的元素

> ID：10847395
> 
> 赞同：1
> 
> 时间：2012-06-01T09:04:22.880
> 
> 标签：javascript

iNettuts拖放中需要调用什么函数来绑定新创建的元素，使新创建的元素可拖放。

# php - 在不使用表单的情况下将文本框值分配给 php 变量

> ID：10847397
> 
> 赞同：0
> 
> 时间：2012-06-01T09:04:27.353
> 
> 标签：php

我想检索文本框值并将其分配给 php 变量但不使用表单。我正在做搜索功能，我想在按钮单击时隐藏一些内容，并且在同一次单击时想要搜索功能，但是如果我使用表单，那么它将重定向到另一个页面或再次重新加载我不想要的页面。

所以我想要另一种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:07:51.450

阿贾克斯，除了是希腊神话中特洛伊战争的英雄……是您需要的技术，也是您的朋友。

我建议使用 jQuery [因为 Barry 发布的速度比我快，因为我想确保我得到了正确的神话参考...]

正如MaxArt所指出的那样，实际上有两个名叫“阿贾克斯”的希腊英雄，都参加了特洛伊战争（并且都参加了荷马的伊利亚特）。

* * *

您可以像这样使用 jQuery：

```
<!-- Link jQuery (replace src with the location where you have jQuery) -->

<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js">
</script>

<!-- Try something like this [having jQuery linked]: -->

<script type="text/javascript">
     function doButtonStuff()
     {
         //Use jQuery to "hide some contents"
         $('#stufftohideId').hide(); //stufftohideId identifies what to hide

         //set the url of the web page that will take this info on your server
         var ulr = "http://localhost";

         //The following part will fail if you cannot connect to the server
         $.post(
             url,
             {text: $('#textboxId').val()}, //textboxId identifies the textbox
             function (data)
             {
                 //data is what the server responded
                 //do something with data, for instance:
                 alert(data);
             }
         );
     }
</script>

<input type="text" id="textboxId"></input>
<input type="button" onclick="doButtonStuff();" value="Click Me"></input>

<div id="stufftohideId">
    <p>
        This is an example of something to hide.
    </p>
</div> 
```

您将使用您传递的网址进入服务器端，如下所示：

```
<?php $text = $_POST['text']; ?> 
```

确保验证请求方法，例如：

```
<?php
    if ($_SERVER['REQUEST_METHOD'] == 'POST')
    {
        $text = $_POST['text'];
        //do something with $text, for instance:
        echo $text;
    }
?> 
```

并且还要验证和清理输入。如果需要会话，也请验证。无论服务器返回什么，都将在客户端收到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:08:06.863

您可以通过使用 PHP 的 ajax 实现来防止页面重新加载或重定向。你可以检查 CakePHP、tppAjax...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T09:13:36.893

```
$(document).ready(function() {

    $("#textboxID").change(function(){
        var text = $(this).val();
    }); 
```

});

使用 jQuery，您可以使用文档就绪函数中的 .change 方法来获取文本字段值。通过 jquery 获取值后，您可以执行一些 ajax 并将 javascript 变量发送到 php 页面，您可以在其中使用 $_GET 方法获取它，此时您的变量在 php 中，您可以做任何您想做的事情用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T09:06:38.683

如果您不想重新加载页面，请查看 AJAX，例如 jQuery：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# c# - 多个 DbContexts 单个接口？

> ID：10847399
> 
> 赞同：0
> 
> 时间：2012-06-01T09:04:29.237
> 
> 标签：c#, entity-framework, dbcontext

我有**n 个**环境，每个环境都由 DbContext（和 EntityFramework）管理。它们都是“相同”的数据库（但可能会出现差异），并且要求提供一种在环境之间复制的方法。

我目前正在通过以下方式解决这个问题。

```
public class TableA
    {
        public string FieldA { get; set; }
        public string FieldB { get; set; }
        public string FieldC { get; set; }

        public static void Copy(EnvironmentTypes to, EnvironmentTypes from, int id)
        {
            var fromModel = TableA.Get(from,id);

            TableA.Add(to,fromModel);
        }

        public static TableA Get(EnvironmentTypes env, int id)
        {
            switch (env)
            {
                case EnvironmentTypes.Development
                    using (var db = new DevelopmentContext.DevelopmentEntities())
                    {
                        var entity = db.TableA.Find(id);

                        return Mapper.Map<TableA>(entity); // using AutoMapper
                    }
                    break;
                case EnvironmentTypes.SystemTest
                    using (var db = new SystemTestContext.SystemTestEntities())
                    {
                        var entity = db.TableA.Find(id);

                        return Mapper.Map<TableA>(entity); // using AutoMapper
                    }
                    break;
            }
        }

        public static TableA Add(EnvironmentTypes env, TableA fromModel)
        {
            switch (env)
            {
                case EnvironmentTypes.Development
                    using (var db = new DevelopmentContext.DevelopmentEntities())
                    {
                        db.TableA.Add(Mapper.Map<DevelopmentContext.TableA>(fromModel));
                        db.SaveChanges();
                        return fromModel; 
                    }
                    break;
                case EnvironmentTypes.SystemTest
                    using (var db = new SystemTestContext.SystemTestEntities())
                    {
                        db.TableA.Add(Mapper.Map<SystemTestContext.TableA>(fromModel));
                        db.SaveChanges();
                        return fromModel; 
                    }
                    break;
            }
        }
    } 
```

这导致了很多 1\. 代码复制，2\. 对象复制（我的 POCO 类中的实体数量已经是 n 倍，现在我需要再次复制该类）。

环境可能存在差异，因此使用 Automapper。

我怎样才能摆脱这种重复的代码并使流程更清晰？

# objective-c - 返回后释放对象，这是一种好习惯吗？

> ID：10847402
> 
> 赞同：0
> 
> 时间：2012-06-01T09:04:32.970
> 
> 标签：objective-c, ios

我只是想知道我们是否可以这样做：

```
 SBJsonParser *parser = [[SBJsonParser alloc] init];
    id repr = [parser objectWithString:self];

    return repr;
    [parser release]; 
```

那么在返回对象后释放对象，这是一个好习惯吗？感谢任何信息:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:10:35.620

简单的回答：没有

您不能在语句之后执行*任何操作。*`return`

相反，你应该`autorelease`对象。这将在周围 AutoreleasePool 的下一次清理运行中释放它。

```
SBJsonParser *parser = [[[SBJsonParser alloc] init] autorelease];
return [parser objectWithString:self]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:05:33.860

```
SBJsonParser *parser = [[[SBJsonParser alloc] init]]autorealease];//<<< auto release the object on creaion
    id repr = [parser objectWithString:self];

    return repr; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T09:07:55.253

您的编译器将不会到达 return 语句之后的任何行（除非您使用 finally 语句。）。你明白了`autorelease`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T09:08:10.420

实际上，您在 return 语句之后的代码甚至不会被执行。glogic的解决方案是要走的路。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T09:08:57.640

你学过编程基础吗？在 return 语句之后，不执行任何操作。

请参阅： [为什么 NSLog() 在方法返回之后什么都不做？](https://stackoverflow.com/questions/10482655/why-does-nslog-not-do-anything-if-its-after-a-methods-return)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T09:28:10.693

> > 方法返回到调用它时的代码
> 
> *   完成方法中的所有语句
>     
>     
> *   到达返回语句
>     
>     
> *   或抛出异常。

# c# - PDFTron：转换为质量更好的 jpeg

> ID：10847404
> 
> 赞同：0
> 
> 时间：2012-06-01T09:04:34.920
> 
> 标签：c#, .net, pdf, jpeg

我正在尝试使用 PDF Tron 将 PDF 页面转换为 JPEG：

```
Obj encoder_param = (new ObjSet()).CreateDict();
encoder_param.PutNumber("Quality", 100);
draw.Export(doc.GetPage(i), tmpSketchFileName, "JPEG", encoder_param); 
```

但是素描的质量很差！谁能告诉我我做错了什么？我尝试过 PNG 和 TIFF 格式，但仍有许多不足之处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:25:06.853

就像 Ben 评论的那样，增加 DPI 会提高输出吗？

例如`draw.SetDPI(300);`

# android - 如何设置在模拟器或 Android 设备上工作的厨房水槽示例？

> ID：10847407
> 
> 赞同：2
> 
> 时间：2012-06-01T09:04:48.330
> 
> 标签：android, cordova, sencha-touch-2

我是 sencha 和 phonegap 的新手。我想将[厨房水槽](http://docs.sencha.com/touch/2-0/#!/example/kitchen-sink)示例打包在 apk 文件中并在模拟器或 Android 设备上运行。

我怎么能去。请提供任何链接以开始使用它。我已经设置了 phonegap 插件。谢谢！！

```
<!DOCTYPE HTML>
<html manifest="" lang="en-US">
<head>
<meta charset="UTF-8">
<title>Kitchen Sink</title>
<link rel="stylesheet" href="sencha/resources/css/sencha-touch.css"
type="text/css">
<script type="text/javascript" src="sencha/sencha-touch.js"></script>
<script id="microloader" type="text/javascript"
src="../../microloader/development.js"></script>
<!-- Uncomment following line to access PhoneGap APIs (not necessary to use PhoneGap to package web app) -->
<!-- <script type="text/javascript" charset="utf-8" src="cordova-1.6.1.js"></script>-->

 </head>
 <body></body>
</html> 
```

项目目录看起来像

![在此处输入图像描述](../Images/172366007d76a425224c8eaf6a611b1f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:09:24.763

你见过这个吗？

[http://docs.sencha.com/touch/2-0/#!/guide/native_android](http://docs.sencha.com/touch/2-0/#!/guide/native_android)

还有来自PhoneGap的教程：

[http://docs.phonegap.com/en/1.7.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/1.7.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:49:04.557

有一个PhoneGap-Beginners-Guide.pdf的链接。这本书包含电话簿的所有基本概念。

我希望它对你有帮助。

[http://lecturer.eepis-its.edu/~yuliana/Android/Buku/PhoneGap-Beginners-Guide.pdf](http://lecturer.eepis-its.edu/~yuliana/Android/Buku/PhoneGap-Beginners-Guide.pdf)

# scala - 在 specs2 中分组测试用例或“shared_examples_for”等价物

> ID：10847420
> 
> 赞同：2
> 
> 时间：2012-06-01T09:05:37.707
> 
> 标签：scala, testing, tdd, bdd, specs2

我正在尝试针对 Java 类库编写一堆测试代码，并且我在 Scala 上使用 specs2。

我有一组应该为 T 类的所有子类运行的测试用例，但无法找出实现它的最佳方法。

来自 Ruby，我自然而然地在 Rspec 中寻找像 *shared_examples_for* 宏这样的东西，但在 specs2 中似乎没有这样的东西。

然后我想，用测试用例子类化我自己的*规范子类可能是一种方法。*

有没有更整洁的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T23:44:51.343

[您可以在用户指南](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Structure.html#Share+examples)中找到共享示例的示例。基本上，这使用了这样一个事实，即您可以定义一个采用特定实例的方法来测试和声明它的示例（参见`nonEmptyStack`方法）。

如果这有助于让我通过一个使用可变的快速示例来启动您`Specification`：

```
 import org.specs2._

 class SubclassesSpec extends mutable.Specification {
   "These examples must pass for all subclasses" >> {
     subclasses foreach { subclass => examples(subclass) }
   }

   /** @return instances of subclasses of type T where T is 
    * the supertype of the classes you want to test */
   def subclasses: Seq[T] = ...

   /** @return examples parameterized by a specific instance */
   def examples(t: T) = {
     "this is the first example" >> {
       // use t here
     }
     "this is the second example" >> {
       // use t here
     }
   }
 } 
```

在执行此操作之前，您唯一需要检查的是示例之间可能存在的副作用。在上面的规范中，所有的例子都是并发执行的*，*它们共享同一个对象。如果这会产生任何问题，您可以：

*   在规范顶部添加`sequential`以避免并发

*   更改`subclasses`和`examples`到`def subclasses: Seq[() => T]`等，`def examples(t: () => T)`以便您将为每个示例创建一个全新的实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T21:10:12.737

它不是 specs2，但 ScalaTest 有这样的语法：

[http://www.scalatest.org/user_guide/sharing_tests](http://www.scalatest.org/user_guide/sharing_tests)

# c# - 在 SQL Server 2008 R2 Express 中使用 ServiceStack.OrmLite 的 Unicode 字符串

> ID：10847421
> 
> 赞同：2
> 
> 时间：2012-06-01T09:05:37.973
> 
> 标签：c#, .net, servicestack, sql-server-2008r2-express, ormlite-servicestack

我们开始在使用 SQL Server 2008 R2 Express 存储的 C# 项目中使用 .NET 版本的 OrmLite。[https://github.com/ServiceStack/ServiceStack.OrmLite](https://github.com/ServiceStack/ServiceStack.OrmLite)

现在我们发现使用 SQL Server 的 ORM 映射器无法将 Unicode 字符保存到表中。

我们需要多语言应用程序（因此在 SQL Server 中设置特定的 LOCALE 不是解决方案）。

我们还测试了使用普通 ADO.NET 都可以正常工作！

我们还尝试设置配置选项：

```
OrmLiteConfig.DialectProvider.UseUnicode = true; 
```

一点变化都没有！
（我认为它只与表创建而不是字符串保存有关......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-10T10:00:08.800

对于仍然遇到此问题的人：在 OrmLite 的 v3.9.71 中，如果您设置此问题已得到修复`OrmLiteConfig.DialectProvider.UseUnicode = true;`

这会将基础查询更改为使用 Unicode。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-26T11:01:39.957

对于 .NET 核心

你应该把：

> OrmLiteConnectionFactory dbFactory = new OrmLiteConnectionFactory(connStr, SqlServerDialect.Provider);
> 
> **OrmLiteConfig.DialectProvider.GetStringConverter().UseUnicode = true;**

进入你的 Startup.cs

# iphone - 在 MPMoviePlayerController 中播放视频时如何显示和禁用视频控件？

> ID：10847424
> 
> 赞同：0
> 
> 时间：2012-06-01T09:05:57.620
> 
> 标签：iphone, video, mpmovieplayercontroller

**我想在使用MPMoviePlayerController**播放视频时显示视频控件并禁用它们。我可以显示控件，但它们会在 3 秒后熄灭，我需要再次点击屏幕才能再次看到控件。此外，我还想禁用控件。我只想让用户在没有任何控制的情况下看到视频的进度。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:37:03.720

设置`controlStyle`为`MPMovieControlStyleNone`和

添加`UIProgressView`以显示进度

# php - 使用 php/或 html 保存为对话框以在用户选择中写入

> ID：10847425
> 
> 赞同：1
> 
> 时间：2012-06-01T09:06:00.883
> 
> 标签：php, html, dialog, savefiledialog

我的疑问是如何向用户打开一个对话框（使用 html/php），以便他可以决定将记录 txt 文件（将由 php fwrite 创建）的位置和名称。

**更新1：**

他的页面将获得带有值的复选框，我希望用户能够为 php 脚本提供一个目录和一个 nameOfFile，以便在该目录中创建具有该名称的文件，但我想要一个类似于对话框的东西用户指出他在哪里决定

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:10:13.907

PHP 无法在客户端系统上写入文件（PHP 是一种服务器端语言）。

我不知道 html/javascript 中的保存对话框功能，用户可以在其中选择目标，然后文件将下载到该功能。

# android - 如何防止安卓恢复出厂设置？

> ID：10847427
> 
> 赞同：1
> 
> 时间：2012-06-01T09:06:02.363
> 
> 标签：android

我想在 Android 中捕捉/收听出厂重置事件。是否有任何广播意图或任何其他方式来做到这一点？
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:09:43.993

幸运的是，出于明显的安全原因，这是不可能的。

# iphone - 用其他按钮停止声音

> ID：10847429
> 
> 赞同：0
> 
> 时间：2012-06-01T09:06:12.817
> 
> 标签：iphone, audio, xcode4.2, ibaction, libjingle

我尝试创建一个小型 JingeMachine，播放声音 mp3 wav 和其他我使用此按钮上的操作是 TouchDown：

```
- (IBAction)NormalApplause:(id)sender {
CFBundleRef mainBundle = CFBundleGetMainBundle();
CFURLRef soudFileURLRef;
soudFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"normalApplause" , CFSTR ("mp3"), NULL);
UInt32 sounudID;
AudioServicesCreateSystemSoundID(soudFileURLRef, &sounudID);
AudioServicesPlaySystemSound(sounudID); 
```

}

如何用其他按钮停止所有声音？我将可以通过多次触摸启动所有声音，但如果可能的话，我将通过一次触摸停止所有声音。

请问可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:15:19.927

您无法停止播放的声音`AudioServices`，您需要使用[`AVAudioPlayer`](http://developer.apple.com/library/iOS/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html).

此外，如果您打电话`AudioServicesCreateSystemSoundID`，您将需要[`AudioServicesDisposeSystemSoundID`](http://developer.apple.com/library/ios/#documentation/AudioToolbox/Reference/SystemSoundServicesReference/Reference/reference.html#//apple_ref/doc/uid/TP40007916-CH3-SW4)正确处理声音参考。

# google-apps-script - 我们可以为 Google Doc 制作一个每周自动启动的脚本吗？

> ID：10847430
> 
> 赞同：0
> 
> 时间：2012-06-01T09:06:18.353
> 
> 标签：google-apps-script

我有一个脚本，我必须每周发布一次，这很无聊，如果我不在这里，没有人会为我做。所以如果我们能做到，我们是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:10:44.280

您可以使用**cron**来自动安排您的任务。您可以在这里找到更多信息：[http ://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-25T09:38:25.970

当您在 Google Docs 脚本编辑器页面上时，您可以从称为时间驱动的事件中执行脚本。

（*之前作为评论给出的 OP 的回答*）

# javascript - xmlhttprequest 对象工作但没有给出响应输出？

> ID：10847432
> 
> 赞同：1
> 
> 时间：2012-06-01T09:06:36.130
> 
> 标签：javascript, xmlhttprequest, responsetext

我有以下代码，其中我正在调用`getlink.php`脚本以获取给定文件的链接。但是当我这样做时，`alert(xhr.responseText)`它什么也没显示。但是如果我在控制台上输出，因为`console.log("my object: %o", xhr);` 它给出了`responseText`字段。代码是：

```
function linkFile(file) {  
    uri = "http://localhost/imgbag/getlink.php";  
    var xhr = new XMLHttpRequest();  
    var formdata= new FormData();
    formdata.append("linkFile",file);
    xhr.open("POST", uri, true);  
    xhr.send(formdata);
    console.log("my object: %o", xhr);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:08:46.917

当您在 xhr.open 中使用 true 时，它​​会将其设置为异步，这意味着响应将稍后返回，您需要通过附加侦听器来收集它。

如果您将该参数设置为 false，您的代码将起作用（但不会是异步的，并且会阻塞调用（这意味着它只会坐在那里直到响应返回）

这是添加侦听器的方法（因为您的异步方法实际上是更好的方法）... [http://www.w3schools.com/ajax/ajax_xmlhttprequest_onreadystatechange.asp](http://www.w3schools.com/ajax/ajax_xmlhttprequest_onreadystatechange.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:15:43.553

像这样定义`onload`属性：

```
xhr.onload = function () {
    alert(xhr.responseText);
} 
```

这确保`alert`只有在请求成功完成后才会发生。

资料来源：[MDN](https://developer.mozilla.org/En/Using_XMLHttpRequest)

# symfony - Doctrine2 - 在不获取关联实体的情况下持久化带有关联的实体

> ID：10847434
> 
> 赞同：2
> 
> 时间：2012-06-01T09:06:38.480
> 
> 标签：symfony, doctrine-orm

我有 2 个实体：ProfileContact 和 Profile。它们之间存在关联。

```
class ProfileContact {

    /**
     * @var integer $profileContactId
     *
     * @ORM\Column(name="profile_contact_id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $profileContactId;

    /**
     * @var text $description
     *
     * @ORM\Column(name="description", type="text", 
     * nullable=true)
     */
    private $description;

    /**
     * @var Profile
     *
     * @ORM\ManyToOne(targetEntity="Profile")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="profile_id", 
     * nullable=false, 
     * onDelete="CASCADE", referencedColumnName="profile_id")
     * })
     */
    private $profile;
} 
```

.

```
class Profile {

    /**
     * @var integer $profileId
     *
     * @ORM\Column(name="profile_id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $profileId;
} 
```

当然也有合适的 setter 和 getter。

我应该如何创建和持久化 ProfileContact 实体以与现有配置文件关联但 D2 之前未获取？我不想向数据库询问整个 Profile 实体。

```
 $profile = $this->getProfileRepository()->find(2);  //I want to avoid this
    $item = new \Alden\BonBundle\Entity\ProfileContact();
    $item->setProfile($profile);
    $item->setDescription('abc');
    $em = $this->getEntityManager();
    $em->persist($item);
    $em->flush(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T10:15:01.493

试试这个

```
$item->setProfile($em->getReference('Profile', 2)); 
```

# mysql - 使用 SQL 更新多行

> ID：10847436
> 
> 赞同：1
> 
> 时间：2012-06-01T09:06:41.053
> 
> 标签：mysql, sql, oracle

我有两张桌子

```
student:
(student_id, student_name) 
```

和

```
license:
(license_id, student_id) 
```

我有一个学生 ID 列表（例如“3,4,5”）

我想更新表许可证中的 3（列表大小）行并将其 student_id 字段分别从 null 更改为 3、4、5。

我怎么做？运行更新循环对我来说不是一个合适的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:21:04.647

我有一个 id 解析器的 MS SQL 版本。您可以使用它来生成一个包含您的 id 的单列的表，它需要一个 varchar(max) 类型的参数。您可以在 select 语句中使用它，例如

```
SELECT * FROM TABLENAME
WHERE COLUMNAME IN (SELECT value FROM parseIDs ('1,2,3')) 
```

这是功能：

```
CREATE FUNCTION parseIDs  
(
    @IDList VARCHAR(MAX)
)
RETURNS @IDs TABLE (value VARCHAR(80))
AS
BEGIN
    IF @IDList is null
        RETURN

    DECLARE @Len INT, 
            @Pos INT, 
            @Cur INT

    SELECT @Pos = 0, 
           @Len = 0, 
           @Cur = 1, 
           @IDList =  CASE 
                        WHEN SUBSTRING(@IDList, LEN(@IDList), 1) = ',' THEN @IDList 
                        ELSE @IDList + ',' 
                      END

    SELECT @Pos = CHARINDEX( ',', @IDList, @Cur)
    WHILE (@Pos <> 0)
    BEGIN
        INSERT @IDs VALUES (LTRIM(SUBSTRING( @IDList, @Cur, (@Pos - @Cur))))
        SELECT @Cur = @Pos + 1
        SELECT @Pos = CHARINDEX( ',', @IDList, @Cur)
    END
    return
END 
```

# dotcloud - 'npm install websocket' 在推送时死机

> ID：10847441
> 
> 赞同：0
> 
> 时间：2012-06-01T09:07:08.587
> 
> 标签：dotcloud

我正在尝试在 dotcloud 上设置一个 WebSocket 示例……但我无法使用 NPM 安装 WS 库。这是我的 package.json：

```
{
    "name": "wsdemo",
    "version": "1.0.0",
    "dependencies": {
        "websocket": ""
    }
} 
```

当我调用**dotcloud push myappname**时，错误提示 websocket 库需要安装较新版本的 Node。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:07:09.023

将版本号**1.0.6**添加到 websockets 的版本中，它就可以工作了。

```
{
    "name": "wsdemo",
    "version": "1.0.0",
    "dependencies": {
        "websocket": "1.0.6"
    }
} 
```

# html - Web Sockets 服务器端的使用/实现

> ID：10847443
> 
> 赞同：3
> 
> 时间：2012-06-01T09:07:09.947
> 
> 标签：html, websocket, npm

我是 Web Sockets 的新手，我想知道 Web 套接字是如何在服务器端实现的？.. 对于客户端，我可以在 html5 中编写 onmessage() 等...JavaScript 等...但是对于服务器端我有很多选择。我很困惑如何在服务器端实现它，以及如何通过 node.js 或 npm 或 web sockets.io 用 Ja​​vaScript 或 C 编写服务器端代码？我该如何安装它们或者是否有任何 sdk ..安装程序是什么？

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:05:30.807

您在问题中提到的大多数服务器端选项都与相同的技术相关，即 node.js。

1.  [node.js](http://nodejs.org/)是一种基于 Google v8 引擎的服务器端 JavaScript 解决方案，旨在构建可扩展的 Web 应用程序
2.  [npm](http://npmjs.org/)是 node 的包管理器，它允许您安装和发布 node 程序并管理它们的依赖项。它在某些方面类似于某些 Linux 发行版（例如 rpm 和 apt）上可用的包管理器。
3.  [socket.io](http://socket.io/)是 node.js 的一个插件，用于开发实时应用程序。它为客户端选择[最合适的传输机制](http://socket.io/#browser-support)，但将细节隐藏在单个 API 后面。

如果你正在构建一个实时应用程序，我绝对可以推荐在 node 和 socket.io 上查看更多细节。

[节点下载页面](http://nodejs.org/#download)有适用于 Windows 和 Mac的安装程序，并且有各种[在 Ubuntu 上安装节点的](https://www.google.com/search?btnG=Google%20Search&q=ubuntu%20install%20node)指南。

# grails - 如何将整数（在数据库中）映射到字符串（在视图中）

> ID：10847444
> 
> 赞同：0
> 
> 时间：2012-06-01T09:07:12.033
> 
> 标签：grails, grails-orm, grails-domain-class

我有一个域类：

```
class MyUser {

 ..

int sex
int qualification
int occupation

..
} 
```

假设我想约束这些整数类别，例如：

```
occupation : [0:"not occupied", 1:"architect", 2:"student", 3:"policeman" and so on..] 
```

我想在数据库中保存整数值，并在我的视图中显示整数的字符串表示形式（这种行为可以自动搭建吗？）。

有没有办法以 grails 的方式快速做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T06:45:21.747

如果你愿意，你也可以使用地图并通过控制器将其传递给查看....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:44:21.323

我建议使用一个对象来代表这样的职业......

```
class MyUser {
...
    int sex
    int qualification
    Occupation occupation
...
} 
```

那么你的职业课应该是这样的......

```
class Occupation {
    ...
    String name
    ...
} 
```

**但是**，如果你坚持使用枚举类型，你可以做这样的事情......

```
 public enum Occupation {
        GEEK(0, 'Geek'),
        NERD(1, 'Nerd'),

        final int id;
        final String name;

        Occupation (int id, String name) {
          this.id = id;
          this.name = name;
       }
    } 
```

您的 MyUser 课程会像这样......

```
 class MyUser {
    ...
        int sex
        int qualification
        int occupation
    ...
    } 
```

你gsp想要这样的东西......

```
 <g:select name="occupation" id="occupation"
                        from="${Occupation.values()}" 
                        value="${fieldValue(bean: user, field: 'occupation')}" 
                        optionKey="id"
                        optionValue="name"/> 
```

**这是未经测试的，但应该可以工作。享受。**

# html - 如何根据大小和类型选择特定的输入元素？

> ID：10847445
> 
> 赞同：0
> 
> 时间：2012-06-01T09:07:15.403
> 
> 标签：html, css

我有两组`input type=text`在 CSS 中样式不同的元素。对于第一组，长度由 CSS 确定`width`。对于第二组，大小值用于确定输入框的长度：

```
<input type=text name=name value='Jason Bourne'> /*1st set*/
<input type=text name=cardNumber value='4111111111111111' size=19> /*2nd set*/ 
```

在不引入`class`or`id`属性的情况下，是否可以使用 just 单独设置两个集合的样式`CSS selectors`？

澄清：上面的 19 号只是一个例子。我希望能够根据是否设置大小属性进行选择，并结合类型为文本的属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:13:22.593

这是可能的 - [http://jsfiddle.net/geQqG/2/](http://jsfiddle.net/geQqG/2/)

```
 input[type="text"]{
    color: red;
}

input[size]{
    color: green;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:32:55.837

Dipaks 的回答给了我一些灵感，我尝试了小提琴，这实际上是我正在寻找的：

```
input[type="text"] {
 color: blue;
}

input[type="text"]:not([size]) {
 width: 200px;
 color: red;
} 
```

# java - 比尔特。在动态组的组页眉/页脚中显示当前分组值

> ID：10847451
> 
> 赞同：0
> 
> 时间：2012-06-01T09:07:49.243
> 
> 标签：java, report, birt

**简短的问题：**

我有一个可以在运行时更改分组条件的组（请参阅下面长问题中的详细信息）。我可以在组页眉/页脚中显示组的当前值（例如，按分支分组 - 显示分支名称，按客户端分组 - 客户端名称等）？

**长问题：**

我想允许我的用户即时更改分组条件。我可以通过两种方式相对容易地实现这一点：

1.  通过 BIRT 设计时 API（传递给适当的行/数据集列值）。
2.  通过报告参数。将数据集列名称作为参数值传递，并在组条件中使用它

    eval(params["groupColumnName"].value)

我的问题是我必须在组页眉中显示当前组的值（并且很高兴在组页脚中重复它）。

我不知道如何为选项 1 实现这一点。（设计时 API）。

对于选项 2。我可以在组页眉/页脚中重复 2\. 中的 Java 脚本，但这不是我想要实现的。我不想重复那个繁琐的 java 脚本 2-3 次。我能否以某种方式在组级别定义该值（类似于组的命名查询），然后在组条件、页眉和页脚中重用它？

可能的 BIRT 允许按组名显示分组的当前值吗？

欢迎任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T09:53:39.830

您可以通过以下两种方式之一实现选项 2：

1.  使用计算参数的公式向数据集添加计算列，并根据报告中的要求按/包含计算列。
2.  如果您使用的是 SQL 数据源，请在查询的 SELECT 子句中添加一个新字段作为 CASE WHEN*参数值*... 并根据报告中的要求分组/包含新字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:31:08.593

我所做的 - 通过 DataItem 和 TextItem 的 API 更改组页眉/页脚。

以防万一有人想现在我的解决方法：

```
 private static void processRowHandle(SlotHandle pSlotHandle, ReportGroup pGroupInfo) throws SemanticException {
    if (pSlotHandle == null) return;
    for(Object obj : pSlotHandle.getContents()){
        if (obj instanceof RowHandle){
            SlotHandle cells = ((RowHandle)obj).getCells();
            if (cells == null) continue;
            for(Object item : cells.getContents()){
                if (item instanceof CellHandle){
                    SlotHandle content = ((CellHandle)item).getContent();
                    if (content == null) continue;
                    for(Object cell : content.getContents()){
                        if (cell instanceof DesignElementHandle) processGroupLabels((DesignElementHandle) cell, pGroupInfo);
                    }
                }
            }
        }
    }
}

private static void processGroupLabels(DesignElementHandle pElementHandle, ReportGroup pGroupInfo) throws SemanticException {
    if (pElementHandle instanceof DataItemHandle){
        DataItemHandle dataItemHandle = (DataItemHandle)pElementHandle;
        if (pGroupInfo.getOldBindingName().equals(dataItemHandle.getResultSetColumn())){
            dataItemHandle.setResultSetColumn(pGroupInfo.getNewColumn().getBindingNameText());
        }
    }
    if (pElementHandle instanceof TextItemHandle){
        String newColumnBindingText = ExpressionUtil.createRowExpression(pGroupInfo.getNewColumn().getBindingNameText());
        String content = ((TextItemHandle)pElementHandle).getContent().replace(pGroupInfo.getOriginalExpression(), newColumnBindingText);
        ((TextItemHandle)pElementHandle).setContent(content);
    }
} 
```

# c# - WPF 3.5 RenderTargetBitmap 内存占用

> ID：10847454
> 
> 赞同：1
> 
> 时间：2012-06-01T09:07:55.097
> 
> 标签：c#, wpf, memory, .net-3.5

我有一个使用 RenderTargetBitmap 的 3.5 WPF 应用程序。

它像一只大熊一样吃掉记忆。

3.5 中的一个已知问题是 RenderTargetBitmap.Render 存在内存问题。

已经找到了一些解决方案，但我没有帮助。 [https://connect.microsoft.com/VisualStudio/feedback/details/489723/rendertargetbitmap-render-method-causes-a-memory-leak](https://connect.microsoft.com/VisualStudio/feedback/details/489723/rendertargetbitmap-render-method-causes-a-memory-leak)

[程序占用太多内存](https://stackoverflow.com/questions/6449297/program-takes-too-much-memory/6449558#6449558) 还有更多...

有没有更多的想法来解决它......

```
static Image Method(FrameworkElement e, int width, int height)
{
    const int dpi = 192;

    e.Width = width;
    e.Height = height;

    e.Arrange(new Rect(0, 0, width, height));
    e.UpdateLayout();

    if(element is Graph)
        (element as Graph).UpdateComponents();

    var bitmap = new RenderTargetBitmap((int)(width*dpi/96.0),
                                                     (int)(height*dpi/96.0),
                                                     dpi,
                                                     dpi,
                                                     PixelFormats.Pbgra32);

    bitmap.Render(element);

    var encoder = new PngBitmapEncoder();

    encoder.Frames.Add(BitmapFrame.Create(bitmap));

    using (var stream = new MemoryStream())
    {
        encoder.Save(stream);
        element.Clip = null;
        Dispose(element);
        bitmap.Freeze();

        DisposeRender(bitmap);
        bitmap.Clear();

        GC.Collect();
        GC.WaitForPendingFinalizers();
        return System.Drawing.Image.FromStream(stream);

    }
}

public static void Dispose(FrameworkElement element)
{
        GC.Collect();
        GC.WaitForPendingFinalizers();
        GC.Collect();
}

public static void DisposeRender(RenderTargetBitmap bitmap)
{
        if (bitmap != null) bitmap.Clear();
        bitmap = null;
        GC.Collect();
        GC.WaitForPendingFinalizers();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-21T20:57:03.957

如果你`RenderTargetBitmap`使用**Resource Monitor 监控**类的行为，你可以看到每次调用这个类，你会损失 500KB 的内存。我对您的问题的回答是：不要`RenderTargetBitmap`多次使用课程

你甚至不能释放 RenderTargetBitmap 的已用内存。

如果您真的需要使用`RenderTargetBitmap`类，只需在代码末尾添加这些行。

```
 GC.Collect()
        GC.WaitForPendingFinalizers()
        GC.Collect() 
```

# java - 如何在 slf4j Logger 中启用调试？

> ID：10847458
> 
> 赞同：57
> 
> 时间：2012-06-01T09:08:07.603
> 
> 标签：java, logging, slf4j

如何全局启用`debug`所有`slf4j.Logger`对象？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-01T11:39:14.637

以编程方式，使用 logback：

```
setLoggingLevel(ch.qos.logback.classic.Level.DEBUG); 
```

在哪里

```
public static void setLoggingLevel(ch.qos.logback.classic.Level level) {
    ch.qos.logback.classic.Logger root = (ch.qos.logback.classic.Logger) org.slf4j.LoggerFactory.getLogger(ch.qos.logback.classic.Logger.ROOT_LOGGER_NAME);
    root.setLevel(level);
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-03-30T22:57:01.203

存在各种切换调试日志的功能：
本文对所有[这些](http://saltnlight5.blogspot.ru/2013/08/how-to-configure-slf4j-with-different.html)都有很好的解释。对我来说很合适的是：

**使用 slf4j 和 Log4j 记录器**
创建文件*src/main/resources/log4j.properties*

```
log4j.rootLogger=DEBUG, STDOUT
log4j.logger.deng=INFO
log4j.appender.STDOUT=org.apache.log4j.ConsoleAppender
log4j.appender.STDOUT.layout=org.apache.log4j.PatternLayout
log4j.appender.STDOUT.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-08-24T12:37:47.147

Pass the System Property -Dorg.slf4j.simpleLogger.defaultLogLevel=DEBUG at your Java startup for the SLF4J Simple api

[![enter image description here](../Images/ba89dc88152055b144b6e13eed40fa2c.png)](https://i.stack.imgur.com/TOdPx.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-01T10:00:26.093

使用 logback 作为 slf4j 绑定。

没有配置文件的默认行为是将 DEBUG 及以上级别的所有事件记录到 System.out。有关详细信息，请参阅[http://logback.qos.ch/manual/configuration.html#automaticConf](http://logback.qos.ch/manual/configuration.html#automaticConf)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T09:20:14.803

对于 log4j

```
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="true">

<!-- ============================== -->
<!-- Append messages to the console -->
<!-- ============================== -->

<appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender">
    <param name="Target" value="System.out"/>
    <param name="Threshold" value="INFO"/>

    <layout class="org.apache.log4j.PatternLayout">
        <!-- The default pattern: Date Priority [Category] Message\n -->
        <param name="ConversionPattern" value="%d [%t] %-5p %c - %m%n"/>
    </layout>
</appender>

<appender name="web" class="org.apache.log4j.DailyRollingFileAppender">
    <param name="Threshold" value="DEBUG"/>
    <param name="Append" value="true"/>
    <param name="File" value="${catalina.home}/logs/web.log"/>
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d [%t] %-5p %c - %m%n"/>
    </layout>
</appender>

<category name="com.idc.scd" additivity="false">
    <priority value="${log4j.category.com.mypackage}"/>
    <appender-ref ref="web"/>
</category>

</log4j:configuration> 
```

通过这种配置，您的所有“com.mypackage”日志将写入 catalina.home 下的“web.log”文件中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T09:11:41.383

取决于您使用的绑定...如果它是 log4j，请查看[http://logging.apache.org/log4j/1.2/manual.html](http://logging.apache.org/log4j/1.2/manual.html)及其配置章节

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-01T09:15:09.223

如果您使用 log4j 作为 slf4j 的绑定，您可以创建一个 log4j.xml（或 log4j.properties）文件并将其添加到类路径中。一个例子可能是：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="false">
  <appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender">
    <param name="Target" value="System.out" />
    <param name="Threshold" value="DEBUG" />
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d{HH:mm:ss,SSS} %-5p [%c{1}] %m%n" />
    </layout>
  </appender>
  <root>
    <appender-ref ref="CONSOLE" />
  </root>
</log4j:configuration> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-17T16:41:18.003

这是我通常用来设置 logback 日志记录的示例配置。
Gradle 依赖项（同样适用于 Maven）

```
compile group: 'org.slf4j', name: 'slf4j-api', version: '1.7.25'
compile group: 'ch.qos.logback', name: 'logback-classic', version: '1.2.3' 
```

`logback.xml`要放置在项目的类路径（src/main/resources）中的配置

```
<configuration>

    <statusListener class="ch.qos.logback.core.status.NopStatusListener" />

    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <layout class="ch.qos.logback.classic.PatternLayout">
            <Pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36}.%M\(%line\) - %msg%n</Pattern>
        </layout>
    </appender>

    <!-- enable debug only on org.hibernate.SQL package -->
    <logger name="org.hibernate.SQL" level="debug" additivity="false">
        <appender-ref ref="STDOUT" />
    </logger>

    <root level="info">
        <appender-ref ref="STDOUT" />
    </root>

</configuration> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-21T22:44:03.957

只需将以下内容添加到`application.properties`

```
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.context=DEBUG 
```

# box2d - 如何使物品与地板碰撞但不与玩家碰撞？

> ID：10847461
> 
> 赞同：0
> 
> 时间：2012-06-01T09:08:11.073
> 
> 标签：box2d, collision-detection

我想让物品（动态物体）由于重力而与地板（静态物体）发生碰撞。但是我不希望玩家与地板上的物品发生碰撞，尽管我需要在玩家与物品重叠时进行回调（就像 item isSensor 属性设置为 true 一样）。

是否可以？我尝试了一些使用类别位和掩码位的配置，但没有成功。

我之前没有遇到过这个问题，因为项目的gravityScale 设置为0，所以它们不会掉在地板上。但现在他们需要对重力做出反应。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:23:10.107

您必须实现一个扩展的类`b2ContactListener`。您可以选择拒绝`PreSolve()`虚函数中的碰撞。在`b2Contact`传递给 的对象中`PreSolve()`，您可以获得 2 个固定装置，如果您之前存储了指向用户数据的指针，您可以从中得出实际碰撞的内容。

在启动游戏引擎之前，创建 的子类的新对象`b2ContactListener`，然后调用`SetContactListener()`游戏世界对象的方法来设置监听器。

[示例代码](https://github.com/nhahtdh/PS5/blob/master/Game/ContactListener.mm)

# jquery - jquery将html元素添加到表中

> ID：10847462
> 
> 赞同：0
> 
> 时间：2012-06-01T09:08:16.153
> 
> 标签：jquery, html, add

我想添加一个指向空 html 表的链接。它在 0.2 秒内适用于 Firefox 和 Chrome，但不适用于 IE9。那里至少需要3分钟。原因是传递的数据完全不同。我在所有三个浏览器中都进行了相同的查询。这是我的代码：

```
function submitForm(dataString) 
{

    jQuery.ajax({
        type: 'POST',
        cache: false,
        dataType: 'text',
        url: 'retrieveFileList.php',
        data: {'data':dataString},
        success: function(data){
            jQuery('#tresults').append(data);
        }
    });

    return false;
} 
```

从 php 文件返回的数据如下所示：

```
while($row = mysql_fetch_array($result))
{

$linktextpos = strrpos($row[0],"/",0);
$linktext = substr($row[0],$linktextpos);

echo "<tr>";
echo "<td>";
echo "</td>";
echo "<td>";
echo "<a color='#ffffff' href=\"" . $row[0] . "\"><font color=\"#ffffff\">" . "..." . $linktext . "</font></a>";
echo "</td>";
echo "</tr>";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:58:26.807

你的php返回多少行？我没有对此进行测试，但我猜 IE9 在将大量行插入表时可能不太聪明。尝试像这样插入它：

```
jQuery('#tresults').append($(data)); 
```

如果这没有帮助，请尝试将您的 php 输出包装在`<tbody></tbody>`.

.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:04:01.400

行。发现了问题。我的 HTML 文件的标题错误。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> 
```

MSIE 浏览器无法识别此（无 PublicID）并以 Quirks 模式呈现它，因此 document.getElementById()... 无法正常工作，并且 sql 得到了错误的参数。噗。

它应该说：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/HTML4/loose.dtd"> 
```

# javascript - ajax调用后更新div

> ID：10847467
> 
> 赞同：0
> 
> 时间：2012-06-01T09:08:39.657
> 
> 标签：javascript, jquery, css, asp.net-mvc-3, fancybox

```
<li>
    <div class="slidera_img">
    <a href="image.jpg" rel="example_group" title="<a href='#' onClick='ajaxpost(@item.Id)'><img src='foo.jpg'/></a>">
    <img  src="@Url.Action("ViewImage", "Image", new { id = item.Id, imageType = "thumb" })" alt="" width="100" height="100" />
    </a>
    </div>   
    <div class="slidera_num">@item.VoteCount</div>
</li> 
```

我有上面的代码，它打开了一个模态框，slidera_img div 中的 href 使用以下代码生成了一个 ajax。之后，我希望能够将带有 slidera_num 类的 div 更新为我从 ajax 请求中获得的当前值。

```
<script type="text/javascript">
    function ajaxpost(id) {
        var item = $(this).parent();
        alert(item);
        $.get('@Url.Action("VoteAjax","Home")', { id: id }, function (response) {
            item.closest("li").find(".slidera_num").html(response.vote);
        });
    } 
```

我在上面试过但没有运气。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:58:07.743

首先只是链接到您需要的图像：

```
<a href="image.jpg" rel="example_group"><img  src="@Url.Action("ViewImage", "Image", new { id = item.Id, imageType = "thumb" })" alt="" width="100" height="100" /></a> 
```

然后调用fancybox来显示它。在该调用中，您可以与`onComplete`返回项目的事件挂钩，然后调用您需要更新页面的任何其他 ajax 调用。所以只需调用它：

```
$("img[rel='example_group'").fancybox({ onComplete: function(item){
  $.get('@Url.Action("VoteAjax","Home")', { id: item.id }, function (response) {
        $(item).closest("li").find(".slidera_num").html(response.vote);
    });
}}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:40:12.447

在不知道 fancybox 究竟是如何工作的情况下，我对你帮助不大，但我可以提出一些建议：

1.  如果有 javascript 错误，请检查您的浏览器。如果 ajaxpost() 或 ajax 回调函数失败，您的代码将无法工作。
2.  在带有调试器的浏览器中打开您的页面，例如带有 Web Inspector 的 webkit 浏览器或带有 Firebug 的 Firefor，并在您的 ajaxpost() 和 ajax 回调中放置一个断点，各一个。检查您是否选择了正确的元素。item 是你所期望的吗？ajax 回调中的选择器链是否找到了您期望它找到的内容？
3.  告诉原始 ajaxpost() 的样子以及您添加的具体内容。还请告诉我们您的fancybox 加载时您的html 会转换成什么。您也可以在 Web Inspector 或 Firebug 中看到这一点。有了这些信息，也许有人可以提供帮助。

# c# - 使用 Directshow 和 C# 录制视频时的文本叠加

> ID：10847477
> 
> 赞同：0
> 
> 时间：2012-06-01T09:09:29.713
> 
> 标签：c#, text, overlay, directshow, directshow.net

通过使用 DirectShowLib，我可以使用 ASF 编写器来录制视频，这里是开始录制的代码

```
 try
        {
            IBaseFilter capFilter = null;
            IBaseFilter asfWriter = null;
            IFileSinkFilter pTmpSink = null;
            ICaptureGraphBuilder2 captureGraph = null;               
            GetVideoDevice();
            if (availableVideoInputDevices.Count > 0)
            {
                //
                //init capture graph
                //
                graphBuilder = (IFilterGraph2)new FilterGraph();
                captureGraph = (ICaptureGraphBuilder2)new CaptureGraphBuilder2();
                //
                //sets filter object from graph
                //
                captureGraph.SetFiltergraph(graphBuilder);
                //
                //which device will use graph setting
                //
                graphBuilder.AddSourceFilterForMoniker(AvailableVideoInputDevices.First().Mon, null, AvailableVideoInputDevices.First().Name, out capFilter);
                captureDeviceName = AvailableVideoInputDevices.First().Name;                    
                //
                //check saving path is exsist or not;if not then create
                //
                if (!Directory.Exists(ConstantHelper.RootDirectoryName + "\\Assets\\Video\\"))
                {
                    Directory.CreateDirectory(ConstantHelper.RootDirectoryName + "\\Assets\\Video\\");
                }
                #region WMV                   
                //
                //sets output file name,and file type
                //
                captureGraph.SetOutputFileName(MediaSubType.Asf, ConstantHelper.RootDirectoryName + "\\Assets\\Video\\" + videoFilename + ".wmv", out asfWriter, out pTmpSink);                    
                //
                //configure which video setting is used by graph
                //                
                IConfigAsfWriter lConfig = asfWriter as IConfigAsfWriter;
                Guid asfFilter = new Guid("8C45B4C7-4AEB-4f78-A5EC-88420B9DADEF");
                lConfig.ConfigureFilterUsingProfileGuid(asfFilter);
                #endregion
                //
                //render the stram to output file using graph setting
                //
                captureGraph.RenderStream(null, null, capFilter, null, asfWriter);
                m_mediaCtrl = graphBuilder as IMediaControl;
                m_mediaCtrl.Run();
                isVideoRecordingStarted = true;
                VideoStarted(m_mediaCtrl, null); 
```

现在我想在视频重新编码时在视频上添加一个文本覆盖，并且通过使用 DirectshowLib 这可行吗？

例如，当视频录制开始时，视频应该与文本叠加一起录制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T17:08:33.073

I'm doing it in my software in a way that `SampleGrabber` filter is inserted into a graph, and upon arrival of a picture, I convert it to `Bitmap` object, then draw on it with `Graphics`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:29:15.240

查看 DirectShow.Net 示例中的 DMO 和 DxLogo 示例来满足您的需求。Daniel Mošmondor 解释的内容可以在 DxSnap 示例中找到……

[http://directshownet.sourceforge.net/](http://directshownet.sourceforge.net/)

# c# - Newtonsoft.Json: DeserializeObject(string value, Type type) 返回 JObject

> ID：10847480
> 
> 赞同：2
> 
> 时间：2012-06-01T09:09:37.140
> 
> 标签：c#, .net, json, serialization, json.net

我正在使用 SignalR 接收类型名称和 Json，目前我通过在服务器上使用管道符号连接时相对天真地实现了它：

```
var ctx = GlobalHost.ConnectionManager.GetConnectionContext<MyConnection>();
ctx.Connection.Broadcast(message.GetType().FullName + "|" + JsonConvert.SerializeObject(message)); 
```

在客户端，我试图反序列化回正确的类型，但当然不能使用任何通用方法，`JsonConvert`所以我想出了这个：

```
var pipePos = eventMessageString.IndexOf("|", StringComparison.Ordinal);
var typeName = eventMessageString.Substring(0, pipePos);
var eventJson = eventMessageString.Substring(pipePos + 1);

var eventType = Type.GetType(typeName);
var evt = JsonConvert.DeserializeObject(eventJson, eventType); 
```

唯一的麻烦是它`evt`是 a `Newtonsoft.Json.Linq.JObject`，而实际上它应该是该`eventType`类型的一个实例。

有没有更好的方法来做到这一点，或者至少有一个解决方案来让它发挥作用？我觉得我错过了一些非常明显的东西——也许我已经盯着它看太久了？

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:23:15.797

eventType 是非空的吗？调用 Type.GetType 时，您需要该类型的程序集限定名称。

# javascript - 在 DOM 中获取 raphael id 属性

> ID：10847481
> 
> 赞同：3
> 
> 时间：2012-06-01T09:09:43.803
> 
> 标签：javascript, svg, raphael

[我已经使用http://readysetraphael.com/](http://readysetraphael.com/)将一些 SVG 转换为 Rapahel

这是生成的代码示例：

```
...
path6233.attr({id: 'path6233' 
... 
```

我查看了 attr 文档，它没有提到 id 作为正确的属性。id 属性也没有添加到 DOM。有没有办法让 raphael 将此 ID 添加到 DOM 以便我可以设置元素的样式？

或者，我可以以某种方式遍历所有路径并轻松地将 id attr 添加到真实的 DOM ID 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T18:18:20.667

我以前没看过 readysetraphael.com —— 这很漂亮。

通过 Raphael 纸元素的 forEach 方法遍历给定 SVG 容器中的所有元素应该相当简单：

```
var i = 0;
paper.forEach(function (el) 
{
    el.node.setAttribute("id", "node-" + i++ ) );
}); 
```

但我应该问——既然您已经将 SVG 整合到 Raphael 中，为什么不简单地使用 Raphael 以编程方式设置它们的样式？对你的推理的好奇促使我问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T07:36:52.413

您可以通过调用`node`属性来获取底层 DOM 元素的形状，如下所示：

```
path6233.node.id = 'node-id'; 
```

# c# - NHibernate 和 DataGridView 绑定

> ID：10847491
> 
> 赞同：2
> 
> 时间：2012-06-01T09:10:17.010
> 
> 标签：c#, nhibernate, architecture

我使用 BindingSource 将我的 NHibernate 对象绑定到 DataGridView，我想要的是对象与数据库紧密连接，即如果对象发生某些变化，则更改应该在 Commit（用户按下保存按钮）或 RollBack 后影响数据库否则交易（取消按钮）。但也存在一些问题： 1\. 如果事务回滚，对象不会被回滚。2.如何监控对象列表的变化。使用 BindingSource 事件会破坏我的模型，甚至无法删除数据库中的对象，因为删除列表项后会调用 BindingSource 更改事件。伙计们，我真的不知道如何实现这样的模型，如果你在这个范围内有经验，请给我一些建议。

## 班级

```
 class AudienceFormController
{
    private AudiencesForm _form;
    private IList<AudienceType> _audiences;
    private BindingSource _bindingSource;

    private void BindTable()
    {
        _audiences = Controller.Manager.RetrieveAll<AudienceType>(SessionAction.Begin);

        _bindingSource = new BindingSource();
        _bindingSource.DataSource = _audiences;
        _bindingSource.AllowNew = true;

        _form.AudienceTypesDataGridView.DataSource = _bindingSource;
        _form.AudienceTypesDataGridView.AllowUserToAddRows = true;
        _form.AudienceTypesDataGridView.AutoGenerateColumns = true;

        _form.SaveATypeButton.Click += new EventHandler(SaveATypeButton_Click);
        _form.CancelATypeButton.Click += new EventHandler(CancelATypeButton_Click);

        _bindingSource.ListChanged += new System.ComponentModel.ListChangedEventHandler(_bindingSource_ListChanged);
    }

    void _bindingSource_ListChanged(object sender, System.ComponentModel.ListChangedEventArgs e)
    {
        switch (e.ListChangedType)
        {
            case ListChangedType.ItemChanged:
                {
                    Controller.Manager.Save(_bindingSource.List[e.NewIndex]);
                    break;
                }
            //case ListChangedType.ItemDeleted:
            //    {
            //        Controller.Manager.Save(_bindingSource.List[e.OldIndex]);
            //        break;
            //    }

        }
    }

    void CancelATypeButton_Click(object sender, EventArgs e)
    {
        Controller.Manager.RollBack();
        _bindingSource.DataSource = Controller.Manager.RetrieveAll<AudienceType>(SessionAction.Begin);
    }

    void SaveATypeButton_Click(object sender, EventArgs e)
    {;
        Controller.Manager.Commit();
    }

    public AudienceFormController(AudiencesForm form)
    {
        _form = form;
        BindTable();
    }
} 
```

# ajax - Jquery选项卡：ajax成功后打开选项卡

> ID：10847498
> 
> 赞同：1
> 
> 时间：2012-06-01T09:10:55.357
> 
> 标签：ajax, jquery-ui-tabs

我有一个跨越多个选项卡的表单。当用户单击下一个选项卡时，只有当所有字段都正确填写时，表单才会被验证，用户范转到下一个选项卡。到目前为止，一切都很好。我还想将该字段存储在 cookie 或数据库中（还不确定）。我通过对 php 控制器的 ajax 调用来做到这一点。这也可以正常工作，但下一个选项卡会立即打开。我想先等待成功回调，然后再打开下一个选项卡。我只是似乎没有让它工作。我在选项卡的选择事件中的部分代码：

```
$.ajax({
  type: 'POST',
  url: 'saveorder/save_tab',
  data: {data : tabData},
  success: function(msg) {
     $('#tabs').tabs('option', 'select',2); 
    },
  dataType: 'json'
});
return false 
```

这显然会阻止显示下一个选项卡，但是在 ajax 请求成功之后什么也没有发生。任何人的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:15:33.513

**试试这个代码:)**

```
$.ajax({
  type: 'POST',
  url: 'saveorder/save_tab',
  dataType: 'json',
  data: {data : tabData},
  success: function(msg) {
     $("#tabs").tabs({ selected:2});
    },
  error: function(msg) {
     $("#tabs").tabs({ selected:1}); //load ur previous tab itself if returns error..
    }

}); 
```

# eclipse - Eclipse 找不到我的静态库

> ID：10847500
> 
> 赞同：1
> 
> 时间：2012-06-01T09:11:06.247
> 
> 标签：eclipse, g++, static-libraries, eclipse-cdt

我想在我的项目中使用 SRILM 包。我已经成功编译了 SRILM，现在在 ~/srilm/lib/i686-ubuntu 中有静态库我在 eclipse 中创建了一个 c++ 项目并将 libdstruct.a 添加到库中并将其路径设置为搜索库的目录。但是eclipse找不到我的图书馆！以下代码是我在 Eclipse 中单击构建项目按钮时的输出。如您所见，g ++说找不到-llibdstruct

```
**** Build of configuration Debug for project test ****

make all 
Building file: ../src/test.c
Invoking: GCC C Compiler
gcc -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"src/test.d" -MT"src/test.d" -o"src/test.o" "../src/test.c"
Finished building: ../src/test.c

Building target: test
Invoking: GCC C Linker
gcc -L/home/atp/srilm/lib/i686-ubuntu -o"test"  ./src/test.o   -llibdstruct
/usr/bin/ld: cannot find -llibdstruct
collect2: ld returned 1 exit status
make: *** [test] Error 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T00:39:03.840

> /usr/bin/ld: 找不到 -llibdstruct

当您将`-llibdstruct`标志传递给链接器时，您要求它查找一个名为`liblibdstruct.a`. 没有这样的文件，所以链接器理所当然地抱怨。

您*实际*需要的文件被调用`libdstruct.a`，并且要传递的正确标志是`-ldstruct`.

# javascript - 如何通过 jQuery 在模态窗口中实现此功能？

> ID：10847502
> 
> 赞同：-2
> 
> 时间：2012-06-01T09:11:17.623
> 
> 标签：javascript, html, css

我在 html 列表中有一堆 li。

ul li img .det li

我想做一件事，当我点击弹出窗口时，我会显示一个模式弹出窗口。我想在我的模态弹出窗口中有一个 prev next 按钮（希望它们在 jQuery 中）

我试过[http://webdesigntutsplus.s3.amazonaws.com/tuts/316_modal/source/index.html](http://webdesigntutsplus.s3.amazonaws.com/tuts/316_modal/source/index.html)

他们是否有任何插件或脚本使我能够制作此功能。我还想从我拥有的 det 数据中设置模式弹出窗口。

.det 是隐藏容器。它仅在有人单击时显示。有人有想法在这里实现插件以获得使我能够使用 prev-next 按钮制作功能模式弹出窗口的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T10:24:42.420

我不知道您的代码中有什么，但是在您的 .det li （在 html 中）上，您可以设置一个函数 onclick="popup()" 并在 js 函数中初始化您的弹出窗口，例如：

```
function popup(){
            $( "#dialog:ui-dialog" ).dialog( "destroy" );

            $( "#dialog-modal" ).css("display", "auto");

    $( "#dialog-modal" ).dialog({
        modal: true,
    });

        } 
```

（如果您的对话框是模态的并命名为“dialog-modal”）。希望能帮助到你。

# r - 使用 ggplot2 在一个绘图上绘制多个箱线图

> ID：10847506
> 
> 赞同：4
> 
> 时间：2012-06-01T09:11:39.387
> 
> 标签：r, ggplot2, boxplot

当我使用此代码时，标准 R 绘图在一个绘图中生成 30 个箱线图：

```
boxplot(Abundance[Quartile==1]~Year[Quartile==1],col="LightBlue",main="Quartile1 (Rare)") 
```

我想在 ggplot2 中产生类似的东西。到目前为止，我正在使用这个：

```
d1 = data.frame(x=data$Year[Quartile==1],y=data$Abundance[Quartile==1])
a <- ggplot(d1,aes(x,y))
a + geom_boxplot() 
```

有30年的数据。每年有145种。每年有 145 个物种被分类为 1-4 的四分位数。

但是，我只得到一个使用它的箱线图。知道如何沿 x 轴获得 30 个箱线图（每年一个）吗？非常感谢任何帮助。

有30年的数据。每年有145种。每年有 145 个物种被分类为 1-4 的四分位数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T11:19:36.300

`str(d1)`告诉你什么`x`？如果是数字或整数，那么这可能是您的问题。如果`Year`是一个因素，那么你会得到一个每年的箱线图。举个例子：

```
library(ggplot2)

# Some toy data
df <- data.frame(Year = rep(c(1:30), each=20), Value = rnorm(600))
str(df) 
```

请注意，这`Year`是一个整数变量

```
ggplot(df, aes(Year, Value)) + geom_boxplot()   # One boxplot

ggplot(df, aes(factor(Year), Value)) + geom_boxplot()   # 30 boxplots 
```

# c# - 如何从 SQL Server 2008 R2 生成 PDF 文件

> ID：10847509
> 
> 赞同：1
> 
> 时间：2012-06-01T09:11:53.350
> 
> 标签：c#, pdf-generation, sql-server-2008-r2

我很难找到有关如何从 SQL Server 2008 R2 生成 PDF 文件的解决方案。

我有一个现有模板，我想要生成的 PDF 看起来与我的模板完全相同。但我真的不知道如何开始这样做。

我已经下载了一个*reportviewer*，因为有人告诉我要使用它。顺便说一句，我正在使用 C#。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:17:56.287

您应该考虑支持导出为多种文档格式的[SSRS](http://www.microsoft.com/sqlserver/en/us/solutions-technologies/business-intelligence/SQL-Server-2012-reporting-services.aspx)，包括 pdf。

# sharepoint-2010 - SPDisposeCheck 告诉我不要处理 Sharepoint Web

> ID：10847513
> 
> 赞同：0
> 
> 时间：2012-06-01T09:12:18.000
> 
> 标签：sharepoint-2010, dispose, using

```
using (var web = SPContext.Current.Site.RootWeb)
{
    //Some code
} 
```

SPDisposeCheck 工具告诉我不要处置此对象 - 但我认为这是您*应该*处置 SP 对象的最佳示例！？

SPDisposeCheck 的输出：

**注意：不应在此对象上调用 Dispose。初始分配：web := Microsoft.SharePoint.SPContext.get_Current().{Microsoft.SharePoint.SPContext}get_Site().{Microsoft.SharePoint.SPSite}get_RootWeb()**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:17:32.250

SPContext 对象在请求的整个生命周期中都存在。如果您处置它的内部 Web 或网站属性，您将破坏可能在请求生命周期后期请求此属性的其他 SharePoint 组件。

为简单起见，只配置您创建的 Web 和 Site。不是由 SharePoint 引擎管理的。

PS：你考虑过在[http://sharepoint.stackexchange.com](http://sharepoint.stackexchange.com)上发帖吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-13T08:40:24.983

这真的正确吗？如果您查看 SPSite.RootWeb 的代码，它看起来像这样：

```
public SPWeb RootWeb
{
    get
    {
       if (this.m_rootWeb == null)
       {
          this.m_rootWeb = this.OpenWeb(this.ServerRelativeUrl);
          this.m_rootWebCreated = true;
       }
       return this.m_rootWeb;
    }
} 
```

它实际上做了一个 OpenWeb，然后你应该处理它。还是我错了？

# video - Jwplayer 和 fancybox 视频不播放

> ID：10847514
> 
> 赞同：0
> 
> 时间：2012-06-01T09:12:22.580
> 
> 标签：video, fancybox, jwplayer

我试图实现最新的fancybox（5.8.2011），它使用jwplayer从我们的服务器加载视频。不幸的是，fancybox 网站非常简陋，并没有提供很多信息。到目前为止，这是我的代码：

HTML：

```
<div class="vidHolder">
        <a href="HTTP://myserver.com/images/pathtofile/test_640.mp4"
            class="fboxVid">
            <img src="Assets/img/preview.jpg" alt="" />
        </a>
    </div> 
```

javascript:

```
$(document).ready(function () {
    $('.fboxVid').click(function () {
        $.fancybox({
            'title': this.title,
            'content': '<embed src="player.swf?file=' + this.href + '&amp;autostart=true&amp;" type="application/x-shockwave-flash" width="352" height="240" wmode="opaque" allowfullscreen="true" allowscriptaccess="always"></embed>'
        }); // fancybox
        return false;
    }); // click
}); // ready 
```

简而言之，窗口打开并加载 Flash 播放器，但视频不播放。

我觉得这是因为我没有正确加载 jwplayer 的设置，但我不知道该怎么做。对于那些感兴趣的人，我的播放器 swf 文件位于文档根目录中（但是，我在使用 firebug 或 chrome 开发人员工具时都没有看到它）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:47:26.863

您可以参考以下类似问题的答案来加载fancybox中的视频。

[用html播放flv](https://stackoverflow.com/questions/2248800/play-flv-in-html/11184113#11184113)

使用 video.js 非常简单.......您可以使用 video.js 使用其他视频格式，您需要更改的只是

```
<source src="..." type="video/mp4"> 
```

此外，您的浏览器可能存在一些问题，您的浏览器是否支持 .mp4 格式，我无法在 chrome 中播放 .mp4，但在 Firefox 中可以正常播放。尝试使用不同格式的相同视频添加更多来源。喜欢...

```
<source src="video1.mp4" type="video/mp4">
<source src="video1.ogg" type="video/ogg">
<source src="video1.webm" type="video/webm"> 
```

# html - 如何在 Web 浏览器（html 格式）中打开本地 .msg 文件并显示嵌入的图片

> ID：10847522
> 
> 赞同：2
> 
> 时间：2012-06-01T09:12:43.683
> 
> 标签：html, vb.net, outlook, msg

我知道如何在 webbrowser 中以 html 格式打开本地 .msg 文件。

问题是当 .msg 嵌入图片时，唯一出现的是它应该在的空白区域（“找不到图片”）。

如果我在 Outlook 中打开 .msg 文件，我可以正确看到图像，但在我的程序中我看不到嵌入的图片。

我正在使用 Vb .Net，而且我是新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:45:10.237

以 MHTML 格式保存消息 - 它嵌入了图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T17:07:27.717

嵌入的图像是附件。使用一些能够读取 .msg 文件格式并获取附件并在 html 正文中插入/链接的 API

[https://stackoverflow.com/questions/5271261/how-to-create-an-outlook-msg-file-from-a-web-service](https://stackoverflow.com/questions/5271261/how-to-create-an-outlook-msg-file-from-a-web-service)

# iphone - 同时执行多个方法的最快方法

> ID：10847525
> 
> 赞同：6
> 
> 时间：2012-06-01T09:13:00.660
> 
> 标签：iphone, objective-c, ios, asynchronous

我有 4 个方法，每个方法在方法返回之前需要一两秒钟，这些方法返回 UIImage，我需要这些图像以最快的方式显示。

```
-(NSMutableArray*)prepareImages{
  UIImage *imageToModifyUsingUIImageCategory;

  NSMutableArray *imageArray = [[NSMutableArray alloc]initWithObjects:
  [imageToModifyUsingUIImageCategory doSomethingAndReturn1],
  [imageToModifyUsingUIImageCategory doSomethingAndReturn2],
  [imageToModifyUsingUIImageCategory doSomethingAndReturn3],
  [imageToModifyUsingUIImageCategory doSomethingAndReturn4],nil];    
  return imageArray;
} 
```

在上述方法结束时，我将从该数组中获得 4 张图像。每个“doSomethingAndReturn”方法需要一两秒，这意味着我的`prepareImages`方法将在大约 5 秒内完成执行。太长了吧？

我的问题是，还有什么其他方法可以更快地完成所有这些工作？GCD 对我来说是一个选择吗？如何？

任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-01T09:48:28.957

假设您不介意在后台顺序加载图像（而不是并行加载），一个简单的调度到后台队列运行`prepareImages`就可以了：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
    NSArray *images = [self prepareImages];

    // now send the result back to the main thread so we can do
    // UIKit stuff
    dispatch_async(dispatch_get_main_queue(), ^{
        // set the images on your UIImageViews here...
    });
}); 
```

这会将图像加载到低优先级的后台队列中，然后在完成后分派回主线程。

如果你想保持这个更低的优先级，你可以使用`DISPATCH_QUEUE_PRIORITY_BACKGROUND`，尽管这仅在 iOS 4.3 和更高版本中可用。在这种情况下，您应该检查返回值`dispatch_get_global_queue`，如果它返回 0，您可以回退到其他优先级之一。

如果您想并行加载每个图像，您可能应该将您的`doSomethingAndReturn`方法转换为`NSOperation`子类并使用 an`NSOperationQueue`来运行它们。这将需要更多的努力来实施。如果一次处理多个大图像，还要注意内存使用情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:40:07.773

我有一个想法如何解决，但尚未测试。我正在从我遇到并解决的其他几个问题中得出解决方案：

*   插入`NSNull`到`NSMutableArray`作为占位符。

*   `dispatch_async`繁重的工作并替换相应的条目`NSMutableArray`（使用`@synchronized`关键字锁定`NSMutableArray`）

*   同样在`dispatch async`函数中，将函数分派回主队列以更新视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T09:46:07.523

你可以使用[NSOperationQueue](https://developer.apple.com/documentation/Cocoa/Reference/NSOperationQueue_class/index.html)：

> NSOperationQueue 类管理一组 NSOperation 对象的执行。被添加到队列后，操作将保留在该队列中，直到它被显式取消或完成其任务的执行。队列中的操作（但尚未执行）本身根据优先级和互操作对象依赖性进行组织，并相应地执行。一个应用程序可以创建多个操作队列并向其中的任何一个提交操作。

[NSOperationQueue 实现的示例](http://www.cimgf.com/2008/02/16/cocoa-tutorial-nsoperation-and-nsoperationqueue/)

或[GCD 队列](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)：

> Grand Central Dispatch (GCD) 调度队列是执行任务的强大工具。调度队列允许您相对于调用者异步或同步地执行任意代码块。您可以使用调度队列来执行您过去在单独线程上执行的几乎所有任务。调度队列的优点是它们比相应的线程代码更易于使用并且在执行这些任务时效率更高。

[GCD 队列实现的示例](http://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html#//apple_ref/doc/uid/TP40008091-CH102-SW4)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T09:57:24.030

您可以在处理器的另一个内核上同时执行该操作：

```
NSThread detachNewThreadSelector:@selector(YOUR_METHODS_HERE:) toTarget:self withObject:nil];
NSThread detachNewThreadSelector:@selector(YOUR_METHODS_HERE:) toTarget:self withObject:nil];
NSThread detachNewThreadSelector:@selector(YOUR_METHODS_HERE:) toTarget:self withObject:nil];
NSThread detachNewThreadSelector:@selector(YOUR_METHODS_HERE:) toTarget:self withObject:nil]; 
```

如果您的处理器有四个内核，则每种方法都将在不同的内核上执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T14:22:02.633

我只是将其作为练习：对每个 doSomethingAndReturn 使用 GCD 并发 Q 并使用串行 q 来监视回调的数量。当回调的数量等于 doSomethingAndReturn(s) 的数量时，则返回 prepareImages 数组。

我创建了代码来测试这个概念。

```
-(NSString *)doSomethingAndReturn1
{
    for (int i=0; i<30; i++) 
    {
        NSLog(@"soSomethingAndReturn1 i: %i", i);
    }
    return @"soSomethingAndReturn1";
}

-(NSString *)doSomethingAndReturn2
{
    for (int i=0; i<10; i++) 
    {
        NSLog(@"soSomethingAndReturn2 i: %i", i);
    }
    return @"soSomethingAndReturn2";
}

-(NSString *)doSomethingAndReturn3
{
    for (int i=0; i<20; i++) 
    {
        NSLog(@"soSomethingAndReturn3 i: %i", i);
    }
    return @"soSomethingAndReturn3";
}

-(void)addToArray:(NSString *)str
{
    [asyncArray addObject:str];
    NSLog(@"asyncArray: %@", asyncArray);
}

- (IBAction)buttonMultitasksPressed:(id)sender 
{
    dispatch_queue_t serialdQueue;
    serialdQueue = dispatch_queue_create("com.mydomain.testbed.multimethods", NULL);
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            [self addToArray:[self doSomethingAndReturn1]];
        });
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            [self addToArray:[self doSomethingAndReturn2]];
        });
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            [self addToArray:[self doSomethingAndReturn3]];
        });
        dispatch_sync(serialdQueue, ^{
            while (!([asyncArray count] == 3)) 
            {
                NSLog(@"not there yet count: %i", [asyncArray count]);
            }
        });

    NSLog(@"end of dispatch_sync serialQueue");
//    return asyncArray;
} 
```

编辑：第二个想法：连续剧是没有必要的。

# android - Activity.finish() 方法到底在做什么？

> ID：10847526
> 
> 赞同：170
> 
> 时间：2012-06-01T09:13:01.493
> 
> 标签：android, activity-lifecycle, ondestroy, application-lifecycle

我正在开发android应用程序一段时间，并关注了很多关于活动生命周期和应用程序生命周期的帖子。

我知道`Activity.finish()`在某处调用方法`Activity.onDestroy()`，并且还从堆栈中删除了活动，我猜它以某种方式指向操作系统和垃圾收集器，他可以“做他的伎俩”并在找到合适的时候释放内存所以....

我来到这个帖子 - [退出应用程序是否令人不悦？](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon/2034238)并阅读马克墨菲的答案。

这让我对这个方法到底做了什么感到有点困惑`finish()`。

有没有机会我会打电话`finish()`而`onDestroy()`不会被打电话？

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-06-02T14:14:09.987

当调用**`finish()`**一个活动时，该方法**`onDestroy()`**被执行。此方法可以执行以下操作：

1.  关闭活动正在管理的任何对话框。
2.  关闭活动正在管理的所有游标。
3.  关闭任何打开的搜索对话框

另外，**`onDestroy()`**不是析构函数。它实际上并没有破坏对象。它只是一种基于某种状态调用的方法。因此，在超类运行并返回之后，您的实例仍然存在并且非常好* `onDestroy()`。Android 保留进程以防用户想要重新启动应用程序，这使得启动阶段更快。该进程将不会做任何事情，如果需要回收内存，该进程将被杀死

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2015-09-10T17:35:48.077

我在@K_Anas 上的 2 美分回答。我对 finish() 方法进行了简单的测试。列出Activity生命周期中重要的回调方法

1.  在 onCreate() 中调用 finish()：**onCreate() -> onDestroy()**
2.  在 onStart() 中调用 finish() ：**onCreate() -> onStart() -> onStop() -> onDestroy()**
3.  在 onResume() 中调用 finish()：**onCreate() -> onStart() -> onResume() -> onPause() -> onStop() -> onDestroy()**

我的意思是，在执行 finish() 时，会调用这些方法的对应部分以及介于两者之间的任何方法。

例如：

```
 onCreate() counter part is onDestroy()
 onStart() counter part is onStop()
 onPause() counter part is onResume() 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2017-04-12T08:11:26.670

另请注意，如果您在意图之后调用 finish()，您将无法使用“返回”按钮返回上一个活动

```
startActivity(intent);
finish(); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-06-01T09:17:56.270

`onDestroy()`用于最终清理 - 释放您自己可以使用的资源、关闭打开的连接、阅读器、作者等。如果你不覆盖它，系统就会做它必须做的事情。

另一方面，`finish()`只是让系统知道程序员想要`Activity`完成当前的工作。因此，它`onDestroy()`在那之后调用。

需要注意的一点：

没有必要*仅*调用 to`finish()`触发调用`onDestroy()`. 不。我们知道，如果android系统觉得有当前需要的资源需要`Activity`被释放，它就可以自由地杀死活动。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-08-31T04:25:27.653

除了上面的@rommex 答案之外，我还注意到`finish()`确实会排队销毁 Activity 并且它取决于 Activity 优先级。

如果我`finish()`在 之后打电话`onPause()`，我看到了`onStop()`，并`onDestroy()`立即打电话。

如果我`finish()`在之后打电话`onStop()`，我要`onDestroy()`等到 5 分钟后才能看到。

根据我的观察，finish 似乎已排队，当我查看它时`adb shell dumpsys activity activities`它被设置为`finishing=true`，但由于它不再位于前台，因此它没有优先销毁。

总之，`onDestroy()`永远不能保证被调用，但即使在被调用的情况下，它也可能被延迟。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-08-12T11:13:33.193

Finish() 方法将销毁当前活动。如果您不希望在用户按下后退按钮时一次又一次地加载此活动，则可以使用此方法。基本上它会从当前堆栈中清除活动。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-05-11T12:19:21.837

各种答案和注释声称finish（）可以跳过onPause（）和onStop（）并直接执行onDestroy（）。公平地说，有关此的 Android 文档（[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)）指出“活动正在完成或被系统破坏”，这非常模棱两可，但可能暗示finish() 可以跳转到 onDestroy()。

finish() 上的 JavaDoc 也同样令人失望（[http://developer.android.com/reference/android/app/Activity.html#finish()](http://developer.android.com/reference/android/app/Activity.html#finish())），实际上并没有注意到调用了哪些方法来响应完成()。

所以我在下面写了这个迷你应用程序，它在进入时记录每个状态。它包括一个调用 finish() 的按钮——因此您可以查看哪些方法被触发的日志。这个实验表明，finish()*确实*也调用了 onPause() 和 onStop()。这是我得到的输出：

```
2170-2170/? D/LIFECYCLE_DEMO﹕ INSIDE: onCreate
2170-2170/? D/LIFECYCLE_DEMO﹕ INSIDE: onStart
2170-2170/? D/LIFECYCLE_DEMO﹕ INSIDE: onResume
2170-2170/? D/LIFECYCLE_DEMO﹕ User just clicked button to initiate finish() 
2170-2170/? D/LIFECYCLE_DEMO﹕ INSIDE: onPause
2170-2170/? D/LIFECYCLE_DEMO﹕ INSIDE: onStop 
2170-2170/? D/LIFECYCLE_DEMO﹕ INSIDE: onDestroy

package com.mvvg.apps.lifecycle;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.Toast;

public class AndroidLifecycle extends Activity {

    private static final String TAG = "LIFECYCLE_DEMO";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d(TAG, "INSIDE: onCreate");
        setContentView(R.layout.activity_main);
        LinearLayout layout = (LinearLayout) findViewById(R.id.myId);
        Button button = new Button(this);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View view) {
                Toast.makeText(AndroidLifecycle.this, "Initiating finish()",
                        Toast.LENGTH_SHORT).show();
                Log.d(TAG, "User just clicked button to initiate finish()");
                finish();
            }

        });

        layout.addView(button);
    }

    @Override
    protected void onStart() {
        super.onStart();
        Log.d(TAG, "INSIDE: onStart");
    }

    @Override
    protected void onStop() {
        super.onStop();
        Log.d(TAG, "INSIDE: onStop");
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        Log.d(TAG, "INSIDE: onDestroy");
    }

    @Override
    protected void onPause() {
        super.onPause();
        Log.d(TAG, "INSIDE: onPause");
    }

    @Override
    protected void onResume() {
        super.onResume();
        Log.d(TAG, "INSIDE: onResume");
    }

} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-03-03T05:02:45.747

@user3282164 根据[Activity](http://developer.android.com/reference/android/app/Activity.html)生命周期，它应该在调用时经过`onPause()`-> `onStop()`-> 。`onDestroy()``finish()`

该图没有显示`onDestroy()`由系统引起的从 [Activity Running] 到 [ ] 的任何直线路径。

[onStop()](http://developer.android.com/reference/android/app/Activity.html#onStop%28%29)文档说“*请注意，在调用 onPause() 方法后系统没有足够内存来保持活动进程运行的低内存情况下，可能**永远不会***调用此方法。 ”

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-02-25T06:51:32.077

我的研究表明，该`finish()`方法实际上在队列中放置了一些销毁操作，但 Activity 并没有立即销毁。破坏是预定的。

例如，如果您放置`finish()`在`onActivityResult()`回调中，而 while`onResume()`还没有运行，那么 first将被执行，然后`onResume()`才被调用。`onStop()``onDestroy()`

注意：`onDestroy()`可能根本不会被调用，如[文档](https://developer.android.com/reference/android/app/Activity.html#onDestroy())中所述。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-04-06T10:23:04.323

正如@prakash 所说，在 onCreate() 中调用 finish 不会直接调用 onDestroy() 。在您将控制权交还给 Android 之前，该`finish()`操作甚至不会开始。

*在onCreate()*中调用 finish( ) ：**onCreate() -> onStart() -> onResume()**。如果用户退出应用程序将调用**-> onPause() -> onStop() -> onDestroy()**

*在onStart()*中调用 finish( ) ：**onCreate() -> onStart() -> onStop() -> onDestroy()**

*在onResume()*中调用 finish( ) ：**onCreate() -> onStart() -> onResume() -> onPause() -> onStop() -> onDestroy()**

如需进一步参考，请查看此[oncreate Continuous after finish](https://stackoverflow.com/questions/8282569/oncreate-flow-continues-after-finish) & [about finish()](https://stackoverflow.com/questions/2590947/about-finish-in-android)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-04-09T00:59:46.333

到目前为止，romnex 似乎给出了唯一正确的答案：“onDestroy() 可能根本不会被调用”。即使在实践中，几乎在所有情况下都可以，但不能保证：finish() 上的[文档](https://developer.android.com/reference/android/app/Activity.html#finish%28%29)只承诺将活动的结果传播回调用者，但仅此而已。此外，[生命周期文档](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)阐明，一旦 onStop() 完成（甚至在旧设备上更早），操作系统就可以终止该活动，尽管这不太可能，因此在简单测试中很少观察到，这可能意味着该活动可能在执行 onDestroy() 时甚至之前被杀死。

因此，如果您想确保在调用 finish() 时完成了某些工作，则不能将其放入 onDestroy() 中，而是需要在调用 finish() 之前，在实际调用它之前在同一个地方进行。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-03-11T09:43:11.367

Roomex 说的对！

发生在我身上的是我正在开发一个需要我使用蓝牙监听器类的应用程序。主页上的一个 Fragment 调用了一个也在使用 BluetoothListner 类的活动。我使用**startActivityForResult()**方法来获得确认。问题是在尝试侦听蓝牙端口时获得片段的确认后，活动通道仍然处于活动状态。即使我专门关闭了它的**onDestroy()**方法。我花了好几天，但不知道如何停下来。

我想如果我不使用**startAcivityForResult()**并且只使用**startActivity()**有和没有调用的**finish()**方法，这可能会解决这个问题。当然，如果我确实在片段中调用**完成（）**，那么从活动中将不得不使用导航视图调用 MainActivity 并指向片段。这样，它可能会创建一个全新的 MainActivity 实例。或者在调用 Activity 时不使用**finish() ，** **onDestroy()**方法将为 Activity 调用，并且片段的**onResume()**方法将在我们返回时被调用。

* * *

## 回答 #13

> 赞同：-5
> 
> 时间：2014-03-29T11:49:00.587

finish() 只是返回到 android 中的上一个活动，或者您可以说它在应用程序中退了一步

# jquery - 在 HTML5 中使用 javascript 的单选按钮的单击事件

> ID：10847528
> 
> 赞同：2
> 
> 时间：2012-06-01T09:13:11.173
> 
> 标签：jquery, css, html

我想使用 Dot net 在 HTML5 中使用 jquery 获取单选按钮的单击事件。当我单击手风琴面板的任何一个单选按钮时，我在手风琴面板中有两个单选按钮，另一个面板应该打开但它不是我的 jquery 代码如下：

```
<script type="text/javascript">

$(document).ready(function () {

    $("#radioinstant").click(function () {

        $(".flip").hide();
        $(".panel").hide();
        $(".flip1").show();
        $(".panel1").show();
    });
}); 
```

但我无法检查单选按钮是否被点击，也无法打开另一个面板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:30:50.050

不确定..但是试试看..$(document).ready(function () {

```
$("#youraccordionid #radioinstant").click(function (e) {
e.preventDefault(); //preventing the default behaviour of accordion

    $(".flip").hide();
    $(".panel").hide();
    $(".flip1").show();
    $(".panel1").show();
}); 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:32:45.820

```
 $(document).ready(function()
{
    $(".flip1").click(function()
   {

         do what u want here
    });

  $(".flip2").click(function()
   {

     do what u want here
    });

 });

and keep this tags 

 <input name="rad1" type="radio" class="flip1"> radio1  </p>
 <input name="rad1" type="radio" class="flip2"> radio2  </p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T09:49:55.033

什么是#radioinstant？如果您将 id="radionistant" 放在每个单选按钮上，它将不起作用。ID 必须是唯一的，重复 ID 的结果取决于浏览器。如果 id="radioinstant" 位于包含所有收音机的元素上，它将起作用，因为该事件会冒泡到它，但请注意，如果您单击#radioinstant 本身或其中的任何其他元素，它也会触发。

如果您想将一个事件绑定到多个元素，请按类（为所有收音机提供相同的类）或按元素类型（绑定到页面上的所有收音机）进行。您还可以使用“#container input:radio”或“#container .radio_class”缩小绑定范围。

您还可以检查是否检查了特定的收音机。它与复选框相同：

```
if ($('.radio_1').is(':checked')) {
    //something
}
else if ($('.radio_1').is(':checked')) {
    //something else
}
//etc 
```

您还可以使用 $('input:radio:checked') 选择选中的收音机并检查它的类或值或其他。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-05T06:43:15.107

编写一个函数，传递单击的单选按钮的值来显示和隐藏您想要显示或隐藏的内容：

```
function Getvalue(id) {
        if (id == "your radio button id") {
           //do what you want
        }
        else{
            // do what you want
        } 
```

# javascript - 用于检索 div 的单击功能

> ID：10847529
> 
> 赞同：1
> 
> 时间：2012-06-01T09:13:11.557
> 
> 标签：javascript, jquery

我如何检索找出哪个按钮单击来自哪个 div。基本上我有多个 div

```
<div id="rare1">
<input type=button value="OK" id=btn>
</div>
<div id="rare2">
<input type=button value="OK" id=btn>
</div>
<div id="rare3">
<input type=button value="OK" id=btn>
</div> 
```

我有一个功能

```
$("#btn").click(function(){
    $("#rare"+i+" #btn").attr("disabled", "true");
} 
```

这样我可以禁用添加的最新按钮。我如何选择哪个按钮单击不同的 div id 并选择正确的 btn 以禁用？

**很抱歉忘记添加一些我想检索单击按钮的 div id 的内容。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:14:58.513

`id`每页的每个元素必须是唯一的。目前你有`btn`每个按钮，使用一个类，例如`class="btn"`，然后修改你的代码是这样的：

```
<div id="rare1">
   <input type=button value="OK" class=btn>
</div>
<div id="rare2">
   <input type=button value="OK" class=btn>
</div>
<div id="rare3">
   <input type=button value="OK" class=btn>
</div> 
```

**JS：**

```
$(".btn").click(function(){
    $(this).prop("disabled", true);
} 
```

要获取当前单击的按钮，请使用`$(this)`如上面的代码所示。

* * *

## 根据评论更新

要获取父 div id，请使用：

```
$(this).parent().attr('id') 
```

所以：

```
$(".btn").click(function(){
    var parentId = $(this).parent().attr('id');
    $(this).prop("disabled", true);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T09:16:28.003

Id 是唯一的按钮给它类

```
<div id="rare1">
<input type=button value="OK" class="btn">
</div>
<div id="rare2">
<input type=button value="OK" class="btn">
</div>
<div id="rare3">
<input type=button value="OK" class="btn">
</div>

$(".btn").click(function(){

    $(this).attr("disabled", "true");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T09:15:45.910

您可以使用“this”变量选择单击的按钮。

`$("#btn").click(function(){ $(this).attr("disabled", "true"); }`

# facebook - 发布到墙上的 Facebook api 错误

> ID：10847536
> 
> 赞同：0
> 
> 时间：2012-06-01T09:13:32.997
> 
> 标签：facebook, facebook-graph-api

```
$facebook->api('/me/feed', 'post', array(
    message => "Test" ,
    link => "link",
    name => "test",
    picture => "test pic",
    caption => "test",
    description => "test"
)); 
```

我得到的错误是 Uncaught OAuthException: (#100) 抱歉，这篇文章包含一个被阻止的 URL

当我在本地主机上运行时不会出现错误，仅当我将代码上传到服务器然后运行它时才会出现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:15:40.780

您是否在应用设置中启用了迁移“Stream post URL security”？如果是，该 URL 是否符合要求？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:16:52.153

1.  用户是否有自动的 publish_stream 权限
2.  您是否在 Fb 开发界面中修改了您的应用程序，以便将服务器 url 链接到应用程序，而不是 localhost？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T09:53:02.870

**使用 JS SDK** [https://developers.facebook.com/docs/reference/javascript/FB.api/](https://developers.facebook.com/docs/reference/javascript/FB.api/)

**[在此之前使用来自https://developers.facebook.com/blog/post/525/](https://developers.facebook.com/blog/post/525/)**的 OAUTH 进行身份验证****

 **```
var body = 'Reading JS SDK documentation';
FB.api('/me/feed', 'post', { message: body }, function(response) {
  if (!response || response.error) {
    alert('Error occured');
  } else {
    alert('Post ID: ' + response.id);
  }
}); 
```**

# excel - Excel内置函数

> ID：10847550
> 
> 赞同：1
> 
> 时间：2012-06-01T09:14:49.590
> 
> 标签：excel

我正在将 Excel 工作簿转换为基于 Web 的应用程序。

工作簿根据用户的输入执行许多计算。我目前正在对这些计算的公式进行逆向工程。

该工作簿包含对 PV() 函数的许多调用，但是它不是传递隐式值，而是将计算或作为其他计算结果的单元格传递给函数。

在 excel 中有什么方法可以让我看到传递给 inbuild 函数的底层值实际上是什么？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:26:05.040

这是如何调试公式错误的[链接](http://www.ozgrid.com/Excel/debug-formula-errors.htm)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T10:06:04.627

米克

如果我理解正确，那么如果您单击包含公式的单元格，然后单击公式栏中的函数图标 ( *f* x)，那么您将看到正在使用哪些隐式值。

或者，如果您选择`Tools > Formula Auditing > Evaluate Formula`然后单击`Evaluate`按钮，您可以循环浏览每个输入，它将解析基础值。

快乐的小径。

# java - 如何在使用 jsf 和托管 bean 时将布尔字段放入数据表中？

> ID：10847553
> 
> 赞同：0
> 
> 时间：2012-06-01T09:14:59.560
> 
> 标签：java, jsf, javabeans

h:datatable 问题在这里我有一个带有“isApprove”字段的表..如何显示它的值。对或错？我想根据真假值显示“不正确”图像的“正确”。怎么做？任何 1 可以帮助我吗？

```
 <f:facet name="header">
                        <h:outputText value="Company List" />
                </f:facet>
                <p:column>
                        <f:facet name="header">
                            <h:outputText value="Name"/>
                        </f:facet>
                    <h:outputText value="#{company.appCompanyName}"></h:outputText>
                </p:column>
                 <p:column>
                        <f:facet name="header">
                            <h:outputText value="isApproved"/>
                        </f:facet>
                    <h:outputText value="#{company.isAppIsApproved}"></h:outputText>
                </p:column>
    </p:dataTable>
</h:form>
And ManagedBean code is

...
public Boolean getIsApproved() {
        return isApproved;
    }

    public void setIsApproved(Boolean isApproved) {
        this.isApproved = isApproved;
    }

    public CompanyListManagedBean() {
    }

     public Collection<Tblcompany> GetCompanyList() {
        return showAllCompany();
    }

    private java.util.List<webservice.Tblcompany> showAllCompany() {
        webservice.AdminWebService port = service.getAdminWebServicePort();
        return port.showAllCompany();
    }
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:23:02.450

```
<h:graphicImage rendered="#{company.isAppIsApproved}" ... /> //correct image
<h:graphicImage rendered="#{not company.isAppIsApproved}" ... /> //incorrect image 
```

我认为从代码中可以很明显地看出它是如何工作的：-)请注意，您可以将它用于几乎所有元素，例如,`<h:table>`等等。`<h:panelGrid>``<h:form>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:24:02.510

```
<h:graphicImage id="correctImage" value="./myCorrectImage.png" rendered="#{company.isAppIsApproved}"/>
<h:graphicImage id="notCorrectImage" value="./myIncorrectImage.png" rendered="#{not company.isAppIsApproved}"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:36:34.983

尝试这种方式，添加一个复选框并使用`<a4j:support>`我们可以在 bean 的方法中根据需要更改图像的操作或使用`Graphic Image`

```
<h:selectBooleanCheckbox value="#{Bean.isAppIsApproved}">
                                    <a4j:support event="onchange" action="#{Bean.approvedCheck}" reRender="tableId" />
                                </h:selectBooleanCheckbox> 
```

# coq - 我如何让 coq 相信 (A/\B)/\C == A /\ B /\ C？

> ID：10847554
> 
> 赞同：6
> 
> 时间：2012-06-01T09:15:01.143
> 
> 标签：coq

在我的证明中，我偶然发现了`A /\ B /\ C`假设中存在的问题，我需要证明`(A /\ B) /\ C`. 这些在逻辑上是完全一样的，但是 coq 不会用`assumption.`.

我一直在通过应用公理来解决这些问题，但是有没有更优雅（和正确）的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T11:09:31.463

所以我的方法是定义我的引理，

```
Lemma conj_assoc : forall A B C, A /\ (B /\ C) <-> (A /\ B) /\ C. 
```

这是一个暗示另一个。

`intros. split.`然后将其分为两个目标。

1.  `A /\ (B /\ C) -> (A /\ B) /\ C`
2.  `(A /\ B) /\ C -> A /\ (B /\ C)`

证明每一个都大致相同。对于 (1)，

*   `intro Habc.`从左手尺寸得到假设。
*   `destruct Habc as [Ha Hbc]. destruct Hbc as [Hb Hc].` 得到个人假设。
*   `auto`使用这些假设。

我把它留给你解决（2），但它非常相似。

然后`Qed.`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-03T22:03:03.490

如果您有`A /\ B /\ C`一个假设，并且您的目标是`(A /\ B) /\ C`，则可以使用该策略**`tauto`**。这种策略解决了命题演算中的所有重言式。还有一种策略`firstorder`可以用量词解决一些公式。

如果你有`A /\ B /\ C`并且你想`(A /\ B) /\ C`作为一个引理的参数传递，你需要做更多的工作。一种方法是设定`(A /\ B) /\ C`一个中间目标并加以证明：

```
assert ((A /\ B) /\ C). tauto. 
```

如果`A`,`B`和`C`是大型表达式，您可以使用复合策略来匹配假设`H : A /\ B /\ C`并对其应用 tauto 策略。这是一种强硬的方法，在这种情况下过度杀伤，但在您希望通过许多类似情况自动证明的更复杂的情况下很有用。

```
match type of H with ?x /\ ?y /\ ?z =>
  assert (x /\ (y /\ z)); [tauto | clear H]
end. 
```

有一种更简单的方法，即应用执行转换的已知引理。

```
apply and_assoc in H. 
```

您可以通过浏览库文档找到引理。您也可以搜索它。这不是最容易搜索的引理，因为它是等价的，并且搜索工具是针对含义和等价的。您可以使用`SearchPattern (_ /\ _ /\ _).`来查找形式的引理（`forall x1 … xn, ?A /\ ?B /\ ?C`其中`?A`和可以是任何表达式）。您可以使用来查找形式的引理。不幸的是，这并没有找到我们所追求的，这是形式的引理。工作是什么`?B``?C``SearchRewrite (_ /\ _ /\ _)``forall x1 … xn, (?A /\ ?B /\ ?C) = ?D``forall x1 … xn, (?A /\ ?B /\ ?C) <-> ?D`

```
Coq < SearchPattern (_ <-> (_ /\ _ /\ _))
and_assoc: forall A B C : Prop, (A /\ B) /\ C <-> A /\ B /\ C 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T15:54:49.740

作为一般提示，如果您怀疑有类似的东西很明显，请检查标准库。方法如下：`Locate "/\".`产生一个`Notation`为我们解决问题的响应，

```
Notation            Scope     
"A /\ B" := and A B  : type_scope
                      (default interpretation) 
```

现在我们可以发出命令，`SearchAbout and.`查看范围内的内容，并发现`and_assoc`见证了您感兴趣的含义。实际上，您可以从直觉中获得提示*：*该`intuition`策略可以自行利用此含义。

```
Lemma conj_example : forall A B C D,
  (A /\ B) /\ C -> (A /\ (B /\ C) -> D) -> D.
Proof. intuition. Qed. 
```

# php - 正则表达式返回空字符串

> ID：10847555
> 
> 赞同：0
> 
> 时间：2012-06-01T09:15:05.067
> 
> 标签：php, regex

所以，这感觉很傻，但我无法理解它。

我正在尝试从日志文件中捕获 id-code 和 name，示例归结为

```
$line = "exten => 3002,2,Dial(/dev/null,20); Name Here";
$match = "/exten => ([0-9]{4}),2,Dial\(\/dev\/null,20\); ([\w]*)/Us";

if (preg_match($match, $line, $result))
{
    var_dump($result);  
} 
```

我想抓住的地方`3002`和`Name Here`。我得到的输出是这个

```
array(3) {
  [0]=>
  string(36) "exten => 3002,2,Dial(/dev/null,20); "
  [1]=>
  string(4) "3002"
  [2]=>
  string(0) ""
} 
```

这感觉*有点*愚蠢，但我很茫然，所以..我可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:19:53.317

我的第一个想法：

```
...([\w]*)/Us";
        ^  ^
        |  |
        |  \_ Ungreedy
        |
         \_ Zero or more 
```

**编辑：**

如果您只想要该行的其余部分：

```
$match = "/exten => ([0-9]{4}),2,Dial\(\/dev\/null,20\); (.+)$/Us";
                                                         ^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:26:49.913

问题肯定是 : ([\w]*) 最后。

\w 不会匹配 whitespace ，并且 "Name Here" 有空格。

我会推荐 ([\w\s]*) 来匹配“Name Here”

# sql - KIll SQL Server SELECT 语句？

> ID：10847561
> 
> 赞同：1
> 
> 时间：2012-06-01T09:15:17.070
> 
> 标签：sql, sql-server

我有一个`SELECT`悬而未决的声明，我想杀死它。如果这很重要（不是微软的），我正在通过 SQL GUI 访问服务器。

有没有我可以执行的命令来终止该进程？

我在使用时得到这个`EXEC('Kill ' + Pid):`

> KILL 命令不能在用户事务中使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:18:28.623

你可以试试这个[`KILL`](http://msdn.microsoft.com/en-us/library/ms173730%28v=sql.105%29.aspx)命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-08T02:27:16.980

如果单独使用 KILL 命令不起作用，例如您不断收到“*无法在用户事务中使用 KILL 命令。* ”错误，然后再次使用您的`OFFLINE`数据库`BACKONLINE`。这将强制完全断开数据库上的任何延迟进程。

不要执行 DEATTACH，因为那是“矫枉过正”并且可能危及使您的数据库重新联机。

如果它是一个生产数据库，显然在你这样做之前要**三思！**

# c# - 查找动态生成的 Storyboard 实例 (WPF)

> ID：10847567
> 
> 赞同：1
> 
> 时间：2012-06-01T09:15:33.573
> 
> 标签：c#, wpf, asynchronous, storyboard

我在查找带有名称的生成故事板时遇到问题。我不能使用类变量，因为这段代码被多次调用并且返回是异步的。

您可以查看我的其他问题以获取更多信息：[这里](https://stackoverflow.com/questions/10814491/wpf-storyboard-doesnt-begin-if-stop-is-called-after-processing)

我的代码：

```
private void refreshPostIt(int index)
    {
        Button btn = // Button to rotate
        Storyboard sb = new Storyboard();
        sb.Name = "sb" + postItIndex;

        Storyboard.SetTarget(rotate, btn);
        Storyboard.SetTargetName(rotate, btn.Name);
        Storyboard.SetTargetProperty(rotate, new PropertyPath("(UIElement.RenderTransform).(RotateTransform.Angle)"));
        sb.Children.Add(rotate);
        sb.Begin(btn, true);

        // Asynchronous call
        BackgroundWorker bgw = new BackgroundWorker();
        bgw.DoWork += new DoWorkEventHandler(bgw_DoWork);
        bgw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bgw_RunWorkerCompleted);
        bgw.RunWorkerAsync(postItIndex);
    }
private void bgw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        int postItIndex = // Retrieved from e.Arguments
        Button btn = // Find the Button thanks to the postItIndex

        Storyboard sb = // Here is my problem, how to find the Storyboard
        if (sb != null)
        {
            // Stop rotation
            //sb.Stop(btn);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:39:20.317

总是可以创建一个继承自 BackgroundWorker 的类，它不是密封的。向该类添加一个属性，该属性包含您要传递给已完成事件的任何信息。

```
 class StoryboardWorkerArgs
    {
        public Storyboard StoryBoard { get; set; }
        public object Other { get; set; }
    }

    class BackgroundWorker2 : BackgroundWorker
    {
        public StoryboardWorkerArgs Args { get; set; }
    } 
```

然后，您可以在 args 属性中设置故事板。

```
BackgroundWorker2 worker = new BackgroundWorker2();
worker.DoWork += new DoWorkEventHandler(worker_DoWork);
worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(worker_RunWorkerCompleted);
worker.Args = new StoryboardWorkerArgs ()
{
  StoryBoard = null, /* reference to your storyboard*/
  Other = null, /* postItIndex */
 };
 worker.RunWorkerAsync(); 
```

然后在您完成的活动中。

```
void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    BackgroundWorker2 sender2 = sender as BackgroundWorker2;
    if (sender2 != null)
    {
        var story = sender2.Args.StoryBoard; // <- your storyboard.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T10:21:29.813

如果您使用 MVVM 显示“postIt”-s 启动和停止情节提要将完全在 XAML 中。

在代表 Post 的 UIItem dataTemplate 中有以下伪样式：

```
<Style>
    <Style.Triggers>
        <DataTrigger Binding="{Binding IsRefreshing}"
                     Value="True">
            <DataTrigger.EnterActions>
                <BeginStoryboard x:Name="rotating">
                    <Storyboard>
                        <DoubleAnimation... />
                    </Storyboard>
                </BeginStoryboard>
            </DataTrigger.EnterActions>
            <DataTrigger.ExitActions>
                <StopStoryboard BeginStoryboardName="rotating" />
            </DataTrigger.ExitActions>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

您的视图模型应该类似于（伪代码）：

```
Class MyApp : INotifyPropertyChanged
  ObservableCollection<Post> Posts {get;set;}
  void RefreshPost(int id);

Class Post : INotifyPropertyChanged
  bool IsRefreshing {get;set;} 
```

在窗口中有一个带有 ItemTemplate 的 listBox 用于您的 Post，并为 ItemsSource 提供 Posts 集合。

并将窗口的数据上下文设置为 MyApp 的一个实例。因此，每当您更改某些帖子的 IsRrefreshing 时，UI 都会完成其余的工作。

# python - 自己“完成”的线程的行为？

> ID：10847568
> 
> 赞同：0
> 
> 时间：2012-06-01T09:15:36.133
> 
> 标签：python, multithreading

如果线程目标完成执行（`__do_loop__`设置为 True），线程对象是否会自行删除？我可以`start_event_loop`再次运行没有任何问题吗？

我想在 WxPython 程序中使用这种行为，该程序[在对象包含正在运行的线程时拒绝终止](https://stackoverflow.com/questions/10833163/how-to-kill-a-wxpython-application-when-user-clicks-a-frames-close)。

```
def event_loop(self):
    while self.__do_loop__ == True:
        ...stuff

def start_event_loop(self):
    self.__do_loop__ = True
    self.__thread__ = Thread(target = self.event_loop, args=())
    self.__thread__.start() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:23:49.327

您仍然必须调用`join`线程对象，除非它处于守护程序模式。

# powershell - 将 powershell 管道类型更改为哈希表（或任何其他可枚举类型）

> ID：10847573
> 
> 赞同：6
> 
> 时间：2012-06-01T09:15:49.453
> 
> 标签：powershell, hashtable, pipeline, cmdlet

我喜欢编写一个执行以下任务的 cmdlet“Convert-ToHashTable”：

```
$HashTable = Import-Csv Table.csv | Convert-ToHashTable 
```

Import-csv 在管道上放置一个数组，如何在我的 Convert-ToHashTable cmdlet 中将其更改为哈希表？在 cmdlet 的 Process 部分中，我可以访问元素，但我不知道如何更改管道本身的类型

Process { Write-Verbose "Process $($myinvocation.mycommand)" $CurrentInput = $_ ... }

有没有办法将完整的哈希表作为新管道返回或创建一个具有哈希表类型的新管道？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T09:26:41.247

你打算用什么作为哈希表的键？除此之外，即使使用简单的 foreach-object 也应该很容易做到：

```
Import-Csv Table.csv | Foreach-Object -begin {
    $Out = @{}
} -process {
    $Out.Add('Thing you want to use as key',$_)
} -end {
    $Out
} 
```

老实说，不需要任何“改变管道类型”的魔法......？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T18:58:42.710

另一种可能性是使用更紧凑的 foreach 形式：

```
$Out = @{}
Import-Csv Table.csv | %{ $Out[$_.Key] = $_.Value } 
```

这将 $Out 设置为值的哈希表，而不是将管道转换为生成哈希表。但是您当然可以将 $Out 导入其他内容。

另请注意，$Out.Add(x, y) 和 $Out[x] = y 之间存在细微差别。如果元素已经存在，前者会抛出异常，而后者会替换它。

# javascript - 通过 Web 脚本的 javascript 控制器访问 Alfresco 的 alfresco-global.properties 文件中的值？

> ID：10847576
> 
> 赞同：2
> 
> 时间：2012-06-01T09:16:15.157
> 
> 标签：javascript, alfresco

我发现可以通过在 bean 定义中公开以下属性来访问 alfresco 实例的全局属性。

```
<property name="properties">
    <ref bean="global-properties"/>
</property> 
```

但我想通过 webscript 的 javascript 控制器访问全局属性。这怎么可能？

运行露天 3.4.d

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:07:26.503

我不确定是否有全局属性的根对象，

但是 Spring bean 中可用的任何信息都可以使用 ProcessorExtension 和 Surf 框架的 ScriptProcessorRegistry 机制提供给 javascript 控制器。

使用它们，您可以使用您想要的属性（方法）定义和添加您自己的根对象。

# c# - 窗口应用程序中类似查询的弹出框

> ID：10847577
> 
> 赞同：1
> 
> 时间：2012-06-01T09:16:18.033
> 
> 标签：c#, notifications, window

我正在使用 C# 开发基于窗口的应用程序。每件事都运行良好。我只想显示通知消息及其工作，我可以像 Jquery 花式对话框那样显示通知消息吗？是否有任何第三方使用，例如 telrix、ajax 等，它们向我显示 jquery 花式对话框之类的消息。

提前致谢。

# php - 正常ajax调用后无法访问jquery

> ID：10847578
> 
> 赞同：1
> 
> 时间：2012-06-01T09:16:26.507
> 
> 标签：php, jquery, partial-views

```
<ul id="months">
                <?php foreach ($months as $key => $value) { ?>
                    <?php if ($key != 0 && array_key_exists($key, $monthArray) && date("m") > $key) { ?>
                        <li id="<?= $key ?>"><a href="#" rel="nofollow"><?= $value ?></a></li>
                        <?php
                    }
                }
                ?> 
```

下面是jquery代码

```
 $("#year").change(function(){
//        alert($(this).val());
        $.ajax({
            type: 'get',
            url: 'ay/templates/frontend/_previous_months.tpl.php',
            data: 'year=' + $(this).val(),
            success: function(data) {
                $("#months").html(data);`
            }
        });
    }); 
```

**问题：**当我第一次请求部分时，我得到了正确的结果，但是当我得到部分后，我无法从中访问 jquery，

下面是当我得到我的parial之后我需要访问的jquery函数（**在进行上面的ajax调用之前，当我点击li item时我可以访问下面的jquery函数**）

```
$("#months li").click(function(){
    alert("aaaaaaaaaaaaaaaaaaa");
    $.ajax({
        type: 'get',
        url: 'ay/templates/frontend/_previous_charities.tpl.php',
        data: 'month=' + $(this).attr("id") + '&year=' + $('#year').val(),
        success: function(data) {
            if(data == 'false'){
                $("#charity_result").html("No previous charity in selected Month");
            }else{
                $('#charity_result').fadeOut('slow');
                //                $('#ajax-result').fadeIn('slow');

                $('#charity_result').fadeIn('slow');
                $("#charity_result").html(data);

            }

        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:23:17.427

我认为您的`click`事件未添加到您的`#months li`. 尝试使用 live 方法：[http ://api.jquery.com/live/](http://api.jquery.com/live/)

代替：

`$("#months li").click(function() {`

用这个：

`$("#months li").live('click', function() {`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:38:04.710

从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。（但它工作正常^^虽然）

# php - 我可以使用 Facebook SDK 上传照片并在说明中添加链接吗？

> ID：10847579
> 
> 赞同：0
> 
> 时间：2012-06-01T09:16:27.457
> 
> 标签：php, facebook, facebook-php-sdk

我可以使用 Facebook SDK 上传照片并在说明中添加链接吗？正是它所说的。目前我能够做到这一点，但根本没有任何描述。我可以向相册添加描述，但我想将其添加到照片中。分别添加到我的网站的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:42:38.210

**是的，你可以做到 **

```
$facebook = new facebook(array(
       'appId'=>$appId,
       'secret'=>$secret,
       'fileUpload'=>true,
       'cookie'  =>true  

));

$facebook->setFileUploadSupport(true);

$photo_details = array(
    'message'=> utf8_encode($user_profile['first_name']." ".$user_profile['last_name']." ha usato l'app Perch� \n usi facebook?\n").$link,
);
$photo_details['image'] = '@' . realpath('temp.jpg');

$upload_photo = $facebook->api('/'.$current_album_id.'/photos', 'post', $photo_details); 
```

# mips - 为嵌入式 linux 交叉编译 Chromium 浏览器

> ID：10847582
> 
> 赞同：1
> 
> 时间：2012-06-01T09:16:40.737
> 
> 标签：mips, cross-compiling, embedded-linux, chromium

我们想在 MIPS 平台上运行的嵌入式 linux 中运行 chromium 浏览器。它可以实现吗？如果是，我们如何进行？我们看到铬构建系统（gyp）没有交叉编译选项。

# php - 库存/价格检查后如何自动提交自定义 PayPal 购物车

> ID：10847583
> 
> 赞同：4
> 
> 时间：2012-06-01T09:16:42.743
> 
> 标签：php, post, paypal, cart

万事如意，

的背景：

我已经建立了一个定制商店，它有一个 PayPal 付款选项。通常，PayPal 选项的工作方式如下：

1.  用户将商品添加到购物车（假设它们有库存）
2.  用户选择发货目的地
3.  用户单击“立即结帐”样式按钮
4.  用户登录或输入运输/账单详细信息
5.  向用户显示付款页面以输入卡详细信息或单击“使用 PayPal 付款”按钮

“Pay with PayPal”按钮是我想要调整的。目前，我有一个 php 函数，它从用户购物车中获取所有项目并将其转换为 PayPal 表单，然后将其回显到页面上。此表格包含所有 PayPal 信息，包括物品、数量、尺寸、运费、业务详细信息、退货/取消/IPN url 等。

问题：

如果用户在某一天填充他们的购物车并通过结帐程序到达付款页面，则 PayPal 表单会在那里新生成（包括项目价格和数量，目前还可以）

他们离开电脑**时没有**点击“使用 PayPal 支付”按钮，可能需要几天时间考虑一下。与此同时，他们购物车中商品的价格/库存会发生变化。

即使我将未完成的购物车设置为在 24 小时后删除，用户已经加载了 PayPal 表单，因此即使**几个月**后仍可以使用旧的库存水平和价格点击“使用 PayPal 付款”！

解决方案：

我在这里看到了几个选项，并对每个选项的建议持开放态度（或者确实是更好的解决方案！）

1.  使用可怕的“刷新”元标记设置付款和购物车页面，以确保它们每天更新，并让 php 在页面加载之前检查库存/价格。这样，如果股票或价格*发生*变化，将向用户呈现最新价格。（这不是我的首选）

2.  不要在支付页面上生成 PayPal 表单，而是让“使用 PayPal 支付”按钮将用户引导到另一个 php 页面（比如“process_paypal.php”），该页面会执行所有必需的检查，如果有任何问题，可以发送一条消息发送给用户。（到目前为止，一切都很好）。**然后**（这是我正在努力的部分），如果一切正常，生成表单**并**自动提交，将用户重定向到 PayPal 网站进行登录。（我知道这可以很容易地使用 jQuery 或Javascript，但如果可能的话，如果存在这样的东西，我更喜欢 PHP 解决方案？我对 cURL 不是很熟悉，所以不知道它是否用于）

3.  你告诉我？！:)

感谢您对此提供的任何帮助。

本·艾弗里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:06:30.690

就个人而言，在这种情况下，如果购物车不存在，我会使用 paypal 回调 url 拒绝购买。

如果购物车存在于您的系统中，您要做的只是成功响应他们的 IPN 呼叫。否则以失败响应。

我相信 PayPal 中有一个设置可以拒绝没有成功响应的付款。

**编辑：**只是查看了代码（自从我这样做以来已经有一段时间了）。我们最终做的是使用基于 IPN 调用的 PayPal API 触发退款。在我看来，这样做是完全可以接受的，因为对客户不收取任何费用。

# clojure - aset 不在 clojurescript 中链接

> ID：10847588
> 
> 赞同：2
> 
> 时间：2012-06-01T09:17:26.890
> 
> 标签：clojure, clojurescript

我在 clojurescript 中找到了一个结果，其中 aset 被链接：

```
(def data (js-obj))
(-> data 
    (aset "a" "a")
    (aset "b" "b"))

(aget data "a") ;=> "a"
(aget data "b") ;=> 'returns nothing' 
```

然而

```
(-> 1 inc dec) ;=> returns 1, which is fine 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T18:10:02.033

Ankur 关于为什么会发生这种情况是正确的。要“解决”它，您应该使用更具语义描述性的：

```
(doto data
      (aset "a" "a")
      (aset "b" "b")) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T09:32:43.723

`aset`返回插入的元素而不是数组对象本身，因此在“b”的情况下，`data`不会从先前的“a”调用中线程到它。

# objective-c - 核心数据错误 executeFetchRequest:error:

> ID：10847599
> 
> 赞同：1
> 
> 时间：2012-06-01T09:18:16.507
> 
> 标签：objective-c, core-data

我一直在使用 Core Data 数据库，它设置为使用以下代码从数据库中加载一些数据：

```
NSManagedObjectContext *context = [self managedObjectContext];
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"AssignmentsInfo" inManagedObjectContext:context];
[fetchRequest setEntity:entity];
NSError *error;
NSArray *dataReturn = [context executeFetchRequest:fetchRequest error:&error];
dataSet = dataReturn;

NSFetchRequest *fetchRequestSubjects = [[NSFetchRequest alloc]init];
NSEntityDescription *entitySubjects = [NSEntityDescription entityForName:@"Subjects" inManagedObjectContext:context];
[fetchRequestSubjects setEntity:entitySubjects];
NSError *errorSubjects;
NSArray *subjectList = [context executeFetchRequest:fetchRequestSubjects error:&errorSubjects]; 
```

但是运行此代码会返回错误：

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'executeFetchRequest:error: A fetch request must have an entity.' 
```

***第一掷调用堆栈：（0x16b1022 0x1842cd6 0xed3871 0x599a 0xe3a1e 0xe2fec 0x109f1d 0xf41cb 0x10adf1 0x10ae0d 0x10aea9 0x496f5 0x4973c 0x1a596 0x1b274 0x2a183 0x2ac38 0x1e634 0x159bef5 0x1685195 0x15e9ff2 0x15e88da 0x15e7d84 0x15e7c9b 0x1ac65 0x1c626 0x32ed 0x2385为0x1）终止叫做抛出异常（LLDB）

我不太确定为什么会发生此错误。我进行了三次检查，并且我拥有的 xcode 模型中没有拼写错误。managedObjectContext 也可以正常工作。谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:29:36.057

尝试：
1\. Debug 看看`entitySubjects`是不是`nil`
2\. 试试 Product->Clean, Product->Build 然后再运行，如果没有帮助
3\. 如果你添加了新的模型版本，你可能忘记设置了作为“当前版本”，如果不是这种情况
4.您的数据可能已损坏，请尝试删除它并再次运行
5.最后一次尝试是再次重新创建您的模型，可能出现问题...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T23:17:45.030

确保您的 managedObjectContext 不是`nil`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T09:39:55.233

好吧，似乎其中一个或两个调用`[NSEntityDescription -entityForName:...]`都返回 nil。

可能是您的数据模型未在托管对象上下文中正确加载或设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-13T23:54:17.757

如果您更改了其中一个属性/实体的名称并尝试从设备上删除应用程序，则可能会出现此错误。一个好的解决方法是从设备上删除应用程序并在再次构建和运行应用程序之前清理项目。只需确保在您的应用上线后迁移您的数据，而不是用简单的方式进行更改。

另一种可能性是您可能正在尝试对您的请求使用未按照您的想法设置的谓词，例如我有这个：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"id == %@", UserId]; 
```

当我的 dataModel 将该字段设置为“objectId”时。确保它们匹配。祝你好运

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-04T16:29:05.707

在我的情况下，经过多次恶化，我发现在数据模型配置中分配给实体的类已被删除。输入类的名称消除了错误。

# zend-framework - 坚持原则2“类不存在”

> ID：10847600
> 
> 赞同：2
> 
> 时间：2012-06-01T09:18:24.817
> 
> 标签：zend-framework, doctrine-orm, one-to-many, many-to-one, persist

所以我有这两个类，它们之间有 OneToMany 和 ManyToOne 关系：

```
命名空间 RM\Entity；

使用 Doctrine\Common\Collections\ArrayCollection；

/**
 * @Table(name="用户")
 * @实体
 * @作者萨比
 */
类用户{

    /**
     * @ID
     * @Column(name="id", type="integer", nullable=false)
     * @GeneratedValue(strategy="IDENTITY")
     * @OneToMany(targetEntity="JobListing", mappedBy="ownerId", orphanRemoval=true)
     */
    私人 $id;

    /**
     * @var 字符串 $displayname
     * @Column(type="string", nullable=false)
     */
    私人 $displayname;
}

```

和

```
命名空间 RM\Entity；

使用 Doctrine\Common\Collections\ArrayCollection；

/**
 * @Table(name="job_listings")
 * @Entity(repositoryClass="RM\Entity\Repository\JobListingRepository")
 * @作者萨比
 */
类作业列表 {

    /**
     * @var 整数 $id
     * @Column(name="id", type="integer", nullable=false)
     * @ID
     * @GeneratedValue(strategy="IDENTITY")
     */
    私人 $id;

    /**
     * @var 用户
     * @ManyToOne(targetEntity="User",cascade={"persist"})
     * @JoinColumns({
     * @JoinColumn(name="ownerId", referencedColumnName="id", nullable=false)
     * })
     */
    私人 $ownerId;

```

但是，当保存 JobListing 时，坚持它会引发以下错误：

```
应用程序错误
异常信息：

消息：类不存在
堆栈跟踪：

#0 library\Doctrine\ORM\Mapping\ClassMetadata.php(67): ReflectionClass->__construct(false)
#1 library\Doctrine\ORM\Mapping\ClassMetadataFactory.php(350): Doctrine\ORM\Mapping\ClassMetadata->__construct(false)
#2 library\Doctrine\ORM\Mapping\ClassMetadataFactory.php(260): Doctrine\ORM\Mapping\ClassMetadataFactory->newClassMetadataInstance(false)
#3 library\Doctrine\ORM\Mapping\ClassMetadataFactory.php(169): Doctrine\ORM\Mapping\ClassMetadataFactory->loadMetadata(false)
#4 library\Doctrine\ORM\EntityManager.php(247): Doctrine\ORM\Mapping\ClassMetadataFactory->getMetadataFor(false)
#5 library\Doctrine\ORM\UnitOfWork.php(1222): Doctrine\ORM\EntityManager->getClassMetadata(false)
#6 library\Doctrine\ORM\UnitOfWork.php(1678): Doctrine\ORM\UnitOfWork->doPersist(1, Array)
#7 library\Doctrine\ORM\UnitOfWork.php(1252): Doctrine\ORM\UnitOfWork->cascadePersist(Object(RM\Entity\JobListing), Array)
#8 library\Doctrine\ORM\UnitOfWork.php(1201): Doctrine\ORM\UnitOfWork->doPersist(Object(RM\Entity\JobListing), Array)
#9 library\Doctrine\ORM\EntityManager.php(454): Doctrine\ORM\UnitOfWork->persist(Object(RM\Entity\JobListing))
#10 library\RM\Entity\JobListingService.php(54): Doctrine\ORM\EntityManager->persist(Object(RM\Entity\JobListing))
#11 application\controllers\JobListingController.php(28): RM\Entity\JobListingService->saveJobListing(Object(RM\Entity\JobListing))
#12 library\Zend\Controller\Action.php(516): JobListingController->addAction()

```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:01:40.583

问题实际上出在我试图保存的对象中。我没有将整个用户实体传递给 ownerId，只有用户的 id。

所以当方法

```
Doctrine\ORM\UnitOfWork->doPersist(1, Array) 
```

被称为它实际上是试图保存一个数字而不是用户实体。

这就是为什么抛出错误“找不到类”的原因，因为没有类“1”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T10:29:36.853

您不能在主键上定义关系。尝试在 User 类中添加另一个字段：

```
/**
 * @Table(name="users")
 * @Entity
 * @author Csabi
 */
class User {

    /**
     * @Id
     * @Column(name="id", type="integer", nullable=false)
     * @GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @OneToMany(targetEntity="JobListing", mappedBy="ownerId", orphanRemoval=true)
     */
    private $jobListings;

    /**
     * @var string $displayname
     * @Column(type="string", nullable=false)
     */
    private $displayname;
} 
```

# sql - 合并到一个 select 语句中 - Oracle

> ID：10847603
> 
> 赞同：1
> 
> 时间：2012-06-01T09:18:35.833
> 
> 标签：sql, oracle, select, merge

是否可以使用 select 过滤一些要在表上合并的条目？

```
MERGE INTO (
  SELECT * FROM P4PCA2_PIVOT_CA
  WHERE ( CA_LIG_VTE_NUM_ID_PDT <> 0 )
)  ta
USING P4DAS2_DONARTSTK tb ON (tb.NUM_ID_PDT =ta.CA_LIG_VTE_NUM_ID_PDT)    
WHEN MATCHED THEN
  UPDATE SET ta.COD_SECVTE_REVENT=tb.COD_SECVTE_REVENT); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T09:38:57.503

在 Oracle 中，您可以对（某些）视图或子查询执行 DML。指导原则是，如果 Oracle 能够从视图中检索物理行，则视图是可更新的。

因此，您可以在子查询上使用[MERGE 。](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9016.htm#SQLRF01606)在某些情况下这是有道理的。例如，假设您有一个带有状态列的表。您想将新信息合并到此表中，但只修改具有`STATUS='active'`. 你可以写：

```
MERGE INTO (SELECT * FROM mytable WHERE status='active') old
     USING (SELECT * FROM newtable) new
        ON (new.id = old.id)
      WHEN MATCHED THEN UPDATE SET old.data1=new.data1; 
```

### 编辑

看来这会`ORA-00903`在 9iR2 中产生。不过它适用于 11g。测试脚本：

```
create table t (id number, c varchar2(10));
insert into t (select rownum, 'aaa' from dual connect by level <= 1000);
merge into (select * from t where id <= 10) t 
     using (select 1 id from dual) d 
        ON (t.id = d.id) 
      when matched then update set c = 'iii'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:45:50.693

11g 以下版本的 hacktastic 解决方法：

创建一个包来保存变量值：

```
CREATE PACKAGE PKG_MY_VARIABLES 
as
  CA_LIG_VTE_NUM_ID_PDT number;
end;
/ 
```

创建一个引用该包的视图。

```
create or replace view V_P4PCA2_PIVOT_CA
as 
select * 
  from P4PCA2_PIVOT_CA 
 where CA_LIG_VTE_NUM_ID_PDT <> PKG_MY_VARIABLES.CA_LIG_VTE_NUM_ID_PDT ; 
```

在运行合并语句之前，将包变量设置为所需的值。

```
exec pkg_my_variables.CA_LIG_VTE_NUM_ID_PDT := 0; 
```

针对视图运行合并。

```
MERGE INTO V_P4PCA2_PIVOT_CA ta
USING P4DAS2_DONARTSTK tb ON (tb.NUM_ID_PDT =ta.CA_LIG_VTE_NUM_ID_PDT)    
WHEN MATCHED THEN
  UPDATE SET ta.COD_SECVTE_REVENT=tb.COD_SECVTE_REVENT); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T09:33:18.160

就像是：

```
MERGE INTO P4PCA2_PIVOT_CA ta
USING (
  select tb.*
  from P4DAS2_DONARTSTK tb
    join P4PCA2_PIVOT_CA ta on tb.NUM_ID_PDT = ta.CA_LIG_VTE_NUM_ID_PDT
  where ta.CA_LIG_VTE_NUM_ID_PDT <> 0 
) t ON (t.NUM_ID_PDT =ta.CA_LIG_VTE_NUM_ID_PDT)    
WHEN MATCHED THEN 
  update set ta.COD_SECVTE_REVENT=tb.COD_SECVTE_REVENT; 
```

`USING`根据您的示例，不确定我是否正确地加入了该部分。

基本思想是仅在 USING 子句中选择要更新的行，而不是作为 INTO 子句的一部分。

# scala - Akka 调度员永远等待

> ID：10847604
> 
> 赞同：2
> 
> 时间：2012-06-01T09:18:38.903
> 
> 标签：scala, concurrency, actor, akka

最近，我一直在使用 Akka 开发不同的示例；例如 playtool P2P 模型。为了更好地评估、基准测试和理解，我尝试使用Akka 引入[的不同类型的调度程序来运行该示例。](http://doc.akka.io/docs/akka/2.0.1/scala/dispatchers.html#Types_of_dispatchers)

我一直面临的问题是，特别是`BalancingDispatcher`与 a 一起使用`thread-pool-executor`（默认情况下应该用于这种类型的调度程序），应用程序往往会进入*完全等待*状态；这是僵局吗？！当我`jstack`用来获取应用程序中线程的转储时，突出的观察结果是所有调度程序线程都处于`TIMED_WAITING`或`WAITING`状态。

我很想知道这是否是由于应用程序设计造成的死锁？而且，更重要的是，我如何才能调试或深入研究处理此类问题？

此应用程序中最有用的代码片段可以是：

每个中的`search`方法`Node`向同行询问搜索查询并返回结果

```
 def search(query: String): Collection[String] = {
    var result: List[String] = List[String]()
    this.list().toList.foreach { q =>
        if (q.contains(query)) {
            result = query :: result
        }
    }
    implicit val timeout = Timeout(1 hour)
    // println("[" + this + "]'s peers: " + peers)
    for (p <- peers) {
      // println("asking [" + p + "] for [" + query + "]")
      val tmp: Future[Collection[String]] = ask(p.asInstanceOf[ActorRef], _search(query)).mapTo[Collection[String]]
      msgs.incrementAndGet()
      val l = Await.result(tmp, timeout.duration).asInstanceOf[Collection[String]]
      l.toList.foreach { q =>
        if (q.contains(query)) {
            result = q :: result
        }
      }
    }
    result.toList
  } 
```

主要部分中用于评估节点网络的片段：

```
import context.dispatcher
var start = System.currentTimeMillis
val futures = List.fill(querySize)(ask(root, _search("_" + r.nextInt(100))).mapTo[Collection[String]])
val results = Future.sequence(futures)
Await.ready(results, Timeout(1000 hour).duration)
var end = System.currentTimeMillis 
```

# java - 从 Netty 读取的有效方法

> ID：10847609
> 
> 赞同：0
> 
> 时间：2012-06-01T09:19:06.427
> 
> 标签：java, netty

我之前问过[这个](https://stackoverflow.com/questions/10815036/efficient-way-to-write-using-netty)关于使用 netty 有效地将消息写入网络的问题。现在在它的阅读方面还有一个更紧迫的问题。至少在编写消息时，可以控制用作中间存储的字节缓冲区（因此可以编写代码以重用缓冲区），但在 Netty 的读取端（即上游事件），OioWorker 和 NioWorker 类完全使无法插入`byte[]`用于从网络读取的 `InputStream`. 例如， 调用的`run()`方法来读取字节。`OioWorker`此方法创建一个新的 byte[] 。

我怎样才能告诉 Netty 停止这样做并可能重用一些 ChannelBuffer ？（我知道会有线程问题 - 我准备处理这些 - 事实上我在单线程上运行整个读取操作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:29:59.457

使用 java `ThreadLocal<T>`。

```
 private static final ThreadLocal<ChannelBuffer> headBuffer = new ThreadLocal<ChannelBuffer>() {
    @Override
    protected ChannelBuffer initialValue() {
      return ChannelBuffers.buffer(DEFAULT_HEAD_LENGTH);
    }
  };

  @Override
  public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) throws Exception {
    ...
    headBuffer.get().clear();
    headBuffer.get().writeBytes(outboundHeadBuff);
    e.getChannel().write(headBuffer.get());
    ...
  } 
```

# android - 在 Android 中设置通用 GPS 文件

> ID：10847614
> 
> 赞同：0
> 
> 时间：2012-06-01T09:19:33.743
> 
> 标签：android, eclipse, gps

我目前正在尝试获取一个通用 GPS 文件，该文件将返回我当前位置的纬度和经度。从程序中获取非零/空值时我遇到了很多麻烦。有没有更好的获取 GPS 的方法？如果另一个选择是使用 Asynctask，我将非常感激！谢谢！

这是我调用 gps 文件的主程序。

` switch(arg0.getId()) { case R.id.gpsBTN: 连接器 g = new Connector();

```
 while(vc[0] == 0 && vc[1] == 0)
        {
            g.locate();
        }
    }` 
```

这是我实际的 gps 文件。` loco = 新的连接器（）；LM = (LocationManager) getSystemService(Context.LOCATION_SERVICE); LM.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, loco); g2 = 定位（）；}

```
public double[] locate() {
    return g2;
}

public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub
    g2[0] = location.getLatitude();
    g2[1] = location.getLongitude();

} 
```

`

# php - 让 ffmpeg 在 XAMPP 中工作

> ID：10847616
> 
> 赞同：0
> 
> 时间：2012-06-01T09:19:43.980
> 
> 标签：php, ffmpeg, xampp, ffmpeg-php

我正在尝试弄清楚如何使用 XAMPP 在 Windows 64 上安装和使用 ffmpeg。

我已经完成了[本教程](http://www.youtube.com/watch?v=gU49GiWGGAI&feature=youtu.be)并安装了 ffmpeg-php 库，我可以在 phpinfo() 中看到扩展。

现在我将 ffmpeg.exe 放在站点根文件夹中，然后运行这个 php 脚本：

```
extension_loaded('ffmpeg') or die('Error in loading ffmpeg');

function convertTo( $input, $output ) 
{
echo $cmd = "ffmpeg -i $input $output";
$outputData = array();
exec( $cmd , $outputData);
echo "<br/>";
print_r($outputData);
}

convertTo( "input.mp4", "output.flv" ); 
```

我得到这个输出：

```
ffmpeg -i input.mp4 output.flv
Array ( ) 
```

但没有编码文件。我的 php 安全模式已关闭，电影文件也在根文件夹中。

工作场所信息：

*   win7 64位
*   XAMPP 1.7.2
*   阿帕奇 2.2
*   php 5.3.5

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:03:58.303

对于 windows，使用 ffmpeg.exe 并修改代码

```
function convertTo( $input, $output ) 
{
echo $cmd = "c:\\ffmpeg\\ffmpeg -i $input $output";
$outputData = array();
exec( $cmd , $outputData);
}

convertTo( "d:\www\input.mp4", "d:\www\output.flv" ); 
```

$outputdata 不返回任何东西，所以不要期望输出。

# python - 芹菜分割错误

> ID：10847620
> 
> 赞同：4
> 
> 时间：2012-06-01T09:19:53.993
> 
> 标签：python, gdb, celery

当进程（芹菜工人）导致分段错误错误时，我该怎么办？在我的情况下，芹菜中出现了问题，但我不知道如何找到哪个模块（用于任务）有损坏的代码。链接到有关问题的一些附加信息 - [https://github.com/ask/celery/issues/690](https://github.com/ask/celery/issues/690)。换句话说，gdb 中的哪个命令可以提供有用的信息或其他解决此问题的方法。

感谢您的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-21T13:21:08.703

这可能会有所帮助：

[安装 python-amqp 包并删除 python-librabbitmq](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=736348#10)

在 Ubuntu 上，python-librabbitmq 的最新 APT 软件包版本似乎是 1.0.3，比上一个版本 (1.5.1) 太旧。您可以通过 pip 而不是 apt-get 安装最新的：

```
sudo pip install -U librabbitmq 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-01T10:10:41.483

我有类似的问题，删除 .celerybeat 文件后解决了。

# asp.net-mvc-4 - 通过 Html.UpshotContext 调用带参数的 Web api 方法

> ID：10847621
> 
> 赞同：1
> 
> 时间：2012-06-01T09:19:55.600
> 
> 标签：asp.net-mvc-4, asp.net-web-api, upshot

我目前正在开发 MVC4 SinglePage 应用程序。

我有一个 Web Api 方法**GetChartsByCategory(int catId)** 所以在我看来 cshtml 页面我应该如何在这种情况下声明 Html.UpshotContext 。

我不想调用**GetAllCharts()**，然后使用敲除或结果在客户端进行过滤。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:32:44.930

无法使用 Html.UpshotContext 提供参数。您可以使用 $.ajax() 调用 GetChartsByCategory() 并将结果映射到您的模型。

例子：

```
$.ajax("GetChartsByCategory", true, {
    data: { id: catID },
    dataType: 'json',
    success: function (data) {
        // on success, data contains a list of charts
        self.charts(ko.utils.arrayMap(data, function (item) {
            return new Chart(item);
        }));
    }
}); 
```

模型：

```
Chart = function (initialData) {
    var self = this;

    // inject the initial data
    $.each(initialData, function (key, value) {
        self[key] = ko.observable(value);
    });

....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:18:19.633

允许您坚持淘汰/结果框架的另一种选择是更改结果提供参数操作名称以将参数包含为路由和/或查询字符串的一部分。

以下示例使用从 HTML 收集的“ApplicationId”作为 WebAPI 调用的参数，该方法接受“id”参数作为路由的一部分（“/api/controller/action/id”）：

控制器方法：

```
public class ClientDetailsScreenController : DataController
{
    public ClientModel GetClient(int id)
    {
        var client = //Fetch client with id using your prefered method
        return client;
    }
} 
```

查看 HTML 结果上下文：

```
@(Html.UpshotContext(true).DataSource<ClientDetailsScreenController>(ctr => ctr.GetClient(0)))) 
```

请注意，传递给 GetClient 方法的“0”会被 DataSource 方法忽略，因此可以是使方法签名有效的任何内容。

淘汰赛视图模型：

```
function ClientDetailsViewModel() {
    var self = this;

    //Store the operation name with a leading '/' for use later
    self.operationNameTemplate = upshot.dataSources.Client._providerParameters.operationName + "/";

    //Observable property for the ApplicationId enter via HTML
    self.selectedApplicationId = ko.observable("1");

    //Refresh Data Source Operation - Called in HTML when the ApplicaitonId changes
    self.refresh = function () {
        //Set the upshot operation name to include the id parameter value.
        upshot.dataSources.Client._providerParameters.operationName = self.operationNameTemplate + self.selectedApplicationId();
        //Refresh the data source causing the bound HTMl to be updated.
        self.dataSource = upshot.dataSources.Client.refresh(); 
    };

    //Data Source Setup
    self.refresh();
    self.clients = self.dataSource.getEntities();
} 
```

希望这可以帮助其他试图通过结果传递给服务器的参数的人。如果有人有更好的方法，请告诉我们。

# python - 在 Tkinter 中执行函数期间程序冻结

> ID：10847626
> 
> 赞同：8
> 
> 时间：2012-06-01T09:20:16.440
> 
> 标签：python, multithreading, user-interface, tkinter

我为我的一个脚本创建了一个小 GUI。一切运作良好。

当我单击一个按钮时，它会启动一个大功能，该功能正在解析来自某些网站的大量数据。

但是一旦我点击了按钮，程序就会冻结，直到函数完全运行。一切正常，但为什么我的 GUI 在函数执行期间冻结。我想打印一个小进度条，但这是不可能的。

这是程序的一部分：

```
 self.Button1 = Button(self.MENU, text="IELTS", command=self.My_Command)
    self.Button1.grid(row=0, column=0,sticky=W+E)

def My_Command(self):

    ## HERE WE LAUNCH THE FUNCTION
    Module_1.main() # My Big Function from another file

    self.Button1.config(text="DONE") 
```

在执行 Module_1.main() 期间我不能做/打印任何事情...... GUI 完全冻结了。

Module_1.main() 函数是一个线程解析器（解析来自两个网站的一些数据），运行时间一般为 2 分钟。如果有人想在执行此功能所需的 2 分钟内与程序进行交互，那将非常有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T10:55:38.043

Tkinter 是单线程的。屏幕更新发生在事件循环的每次行程中。每当您有一个长时间运行的命令时，您都会阻止事件循环完成迭代，从而阻止事件的处理，从而阻止重绘。

您唯一的解决方案是 a) 为长时间运行的命令使用线程，b) 为长时间运行的命令使用进程，或 c) 将命令分成小块，每个小块都可以在几毫秒内运行，这样您就可以运行一个事件循环的后续迭代中的块。您还有另一种解决方案，即`update_idletasks`定期调用小部件的方法，但这更像是一种解决方法而不是修复。

请记住，Tkinter 不是线程安全的，因此使用线程需要格外小心。您只能从主线程调用小部件上的方法，这意味着其他线程必须通过线程安全队列与主线程通信。

# scala - 为什么 Scala 并行集合有时会导致 OutOfMemoryError？

> ID：10847628
> 
> 赞同：5
> 
> 时间：2012-06-01T09:20:35.010
> 
> 标签：scala, collections, parallel-processing

这大约需要 1 秒

```
(1 to 1000000).map(_+3) 
```

虽然这给出了**java.lang.OutOfMemoryError: Java heap space**

```
(1 to 1000000).par.map(_+3) 
```

**编辑：**

我有标准的 scala 2.9.2 配置。我在 scala 提示符下输入这个。在 bash 我可以看到 [ -n "$JAVA_OPTS" ] || JAVA_OPTS="-Xmx256M -Xms32M"

而且我没有在我的环境中设置 JAVA_OPTS。

100 万个整数 = 8MB，创建两次列表 = 16MB

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T09:56:21.490

它似乎与 JVM 内存选项**和**存储 Parralel 集合所需的内存肯定有关。例如：

```
scala> (1 to 1000000).par.map(_+3) 
```

最后是`OutOfMemoryError`我第三次尝试评估它，而

```
scala> (1 to 1000000).par.map(_+3).seq 
```

从来没有失败过。问题不在于计算，而是并行集合的存储。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T12:01:20.357

失败的几个原因：

1.  并行集合不是专门的，因此对象被装箱。这意味着您不能将元素的数量乘以 8 来获得内存使用情况。
2.  使用`map`意味着将范围转换为向量。对于并行向量，尚未实现有效的串联，因此合并由不同处理器产生的中间向量通过复制进行 - 需要更多内存。这将在未来的版本中解决。
3.  REPL 存储以前的结果 - 在每一行中评估的对象保留在内存中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T12:13:18.927

这里有两个问题，存储并行集合所需的内存量和“通过”并行集合所需的内存量。

可以看出这两行之间的区别：

```
(1 to 1000000).map(_+3).toList
(1 to 1000000).par.map(_+3).toList 
```

REPL 存储评估的表达式，记住。在我的 REPL 上，我可以在内存不足之前执行这 7 次。通过并行执行暂时使用额外的内存，但是一旦执行 toList，额外的使用量就会被垃圾收集。

```
(1 to 100000).par.map(_+3) 
```

返回 ParSeq[Int]（在本例中为 ParVector），它比普通 Vector 占用更多空间。这个我可以在内存不足之前执行 4 次，而我可以执行这个：

```
(1 to 100000).map(_+3) 
```

在我用完内存之前有 11 次。所以并行集合，如果你把它们放在身边，会占用更多的空间。

作为一种解决方法，您可以`List`在返回它们之前将它们转换为更简单的集合，例如 a。

至于为什么并行集合占用这么多空间，为什么还要引用这么多东西，我不知道，但我怀疑`views`[*]，如果你认为这是一个问题，请[提出一个问题](https://issues.scala-lang.org/secure/Dashboard.jspa)。

[*] 没有任何真实证据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-12T14:29:36.303

我也有同样的情况，但是使用 ThreadPool 似乎可以解决我的问题：

```
 val threadPool = Executors.newFixedThreadPool(4)
  val quadsMinPar = quadsMin.par
  quadsMinPar.tasksupport = new ThreadPoolTaskSupport(threadPool.asInstanceOf[ThreadPoolExecutor]) 
```

大型集合的 ForkJoin 可能会创建太多线程。

# c# - HttpUtility.JavaSciptStringEncode 解码

> ID：10847634
> 
> 赞同：0
> 
> 时间：2012-06-01T09:21:16.443
> 
> 标签：c#, .net, string, odata

我有一个长字符串，必须传递给 wcf web 方法。这个字符串以

```
\b\0\0\0\0\0\0..... 
```

并且有很多不可打印的符号。我试过 HttpUtility.HtmlEncode 这个字符串，但它不起作用。将所需字符串传递给服务器的唯一方法是使用 HttpUtility.JavaSciptStringEncode 方法。

但是在服务器端，我不知道如何将此字符串解码为以前的状态。HttpUtility.UrlDecode 没有帮助。

如何在服务器端正确解码字符串？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:21:35.673

我找到了解决方案。我必须`Base64`在使用前对字符串进行编码`HttpUtility.UrlEncode`。`HttpUtility.JavaSciptStringEncode`现在不需要。

# javascript - 在javascript中的事件处理函数中返回？

> ID：10847637
> 
> 赞同：1
> 
> 时间：2012-06-01T09:21:23.627
> 
> 标签：javascript, xmlhttprequest

以下代码不起作用，并且没有返回正确的结果。

```
function test(file) {
 var uri = "http://localhost/test.php";
 var xhr = new XMLHttpRequest();
 var result="done";
 xhr.open("POST", uri, true);
 xhr.send();
 xhr.onloadend=function()
  {
   result=xhr.responseText;
   return result;
  }
} 
```

从事件处理程序返回是错误的还是只是将结果返回给测试函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:28:04.537

正如您所做的那样，在事件处理程序中返回不会将结果返回到调用范围。您用于附加侦听器的 DOM 事件函数忽略返回值。如果您尝试从 onload 访问结果，则需要在回调中这样做

```
function test(file, callback){
    var uri = "http://localhost/test.php";  
    var xhr = new XMLHttpRequest();  
    xhr.open("POST", uri, true);  
    xhr.send(formdata);
    xhr.onload=function(){
        callback(xhr.responseText);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:29:05.067

从事件处理程序返回是可以的，但是您的返回值并没有达到您显然认为的位置。在大多数情况下，事件处理程序应该只返回`true`or `false`，这表明您是否要禁用默认行为（`false`意思是“抑制此事件的默认行为”）。不可能在函数中或作为函数的返回值接收`onloadend`处理程序的返回值，因为事件处理程序是在函数已经返回时异步执行的。`test()``test()`

# payment-gateway - 支付网关 square 和 groupon 有什么用？

> ID：10847638
> 
> 赞同：1
> 
> 时间：2012-06-01T09:21:25.303
> 
> 标签：payment-gateway

我想实现一个移动支付系统；谁知道这些公司在使用？

谢谢

# spring - AbstractFactoryBean isSingleton（）不起作用

> ID：10847641
> 
> 赞同：1
> 
> 时间：2012-06-01T09:21:50.060
> 
> 标签：spring

我正在尝试实现FactoryBean。这是我的代码：

```
public class SkilledEmployee extends AbstractFactoryBean<Employee> {

    private Employee emp;
    private Skill skill;

    public SkilledEmployee(Employee emp, Skill skill) {
        this.emp = emp;
        this.skill = skill;
    }

    public Class<Employee> getObjectType() {
        return Employee.class;
    }

    protected Employee createInstance() throws Exception {
            Employee emp1 = new Employee(emp);
        emp1.addSkill(skill);
        return emp1;
    }

    public boolean isSingleton() {
        return true;
    }

} 
```

以下是我声明我的 bean 的方式：

```
<bean id="skilledEmployee1" class="com.pramati.spring.SkilledEmployee">
                <constructor-arg ref="subordinate3"/>
                <constructor-arg ref="singing"/>
            </bean>
            <bean id="skilledEmployee2" class="com.pramati.spring.SkilledEmployee">
                <constructor-arg ref="subordinate2"/>
                <constructor-arg ref="singing"/>
            </bean> 
```

当我从上下文中获取这些 bean 时，我看到我得到了不同的 bean，尽管我将对象声明为单例。

我正在尝试了解 FactoryBean，但我知道这不是一个有效的用例，而且是设计上的一个错误。但我想知道它为什么会这样？有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:27:37.483

这是两个不同的 bean，因为您分别声明了它们。更简单的例子：

```
<bean id="foo1" class="com.example.Foo"/>
<bean id="foo2" class="com.example.Foo"/> 
```

在这里，我们声明了两个单例 bean，`foo1`并且`foo2`. 如果你从 Spring 中获取它们，你会得到两个不同的对象。但是，如果您再次获取它们，您将获得相同的对象。

同样在您的情况下：`skilledEmployee1`and`skilledEmployee2`是两个不同的单例 bean。如果您再次从上下文中获取它们，您将收到相同的实例 - 正如预期的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T10:02:15.990

只是对已经回答的内容的补充。在将工厂 bean 声明为单例时，它会在 bean 初始化本身上调用 createInstance()。对工厂 bean 的任何进一步调用都会导致相同的实例。如果 singleton() 未被覆盖，则默认值为 false。并且在 bean 初始化时，不会创建实例。它为每个获取工厂 bean 的调用创建一个新实例。

# c++ - Jenkins：在控制台日志上使用 cpplint 解析器的异常（警告插件）

> ID：10847642
> 
> 赞同：0
> 
> 时间：2012-06-01T09:21:54.617
> 
> 标签：c++, plugins, jenkins, warnings, lint

我想使用 cpplint.py 脚本来获取代码上的编码样式错误。我设法在 Jenkins 中执行了 python 脚本，并将输出发布到控制台日志。我想使用 cpplint 浏览器通过警告插件解析控制台日志。不幸的是，我得到以下异常：

```
ERROR: Publisher hudson.plugins.warnings.WarningsPublisher aborted due to exception
java.lang.NullPointerException
    at hudson.plugins.violations.util.AbsoluteFileFinder.addSourcePaths(AbsoluteFileFinder.java:20)
    at hudson.plugins.violations.types.cpplint.CppLintParser.parse(CppLintParser.java:44)
    at hudson.plugins.warnings.parser.ViolationsAdapter.parse(ViolationsAdapter.java:60)
    at hudson.plugins.warnings.parser.ParserRegistry.parse(ParserRegistry.java:317)
    at hudson.plugins.warnings.parser.ParserRegistry.parse(ParserRegistry.java:296)
    at hudson.plugins.warnings.WarningsPublisher.parseConsoleLog(WarningsPublisher.java:293)
    at hudson.plugins.warnings.WarningsPublisher.perform(WarningsPublisher.java:257)
    at hudson.plugins.analysis.core.HealthAwarePublisher.perform(HealthAwarePublisher.java:338)
    at hudson.tasks.BuildStepMonitor$2.perform(BuildStepMonitor.java:27)
    at hudson.model.AbstractBuild$AbstractRunner.perform(AbstractBuild.java:703)
    at hudson.model.AbstractBuild$AbstractRunner.performAllBuildSteps(AbstractBuild.java:678)
    at hudson.model.AbstractBuild$AbstractRunner.performAllBuildSteps(AbstractBuild.java:656)
    at hudson.model.Build$RunnerImpl.post2(Build.java:162)
    at hudson.model.AbstractBuild$AbstractRunner.post(AbstractBuild.java:625)
    at hudson.model.Run.run(Run.java:1433)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:238) 
```

这很奇怪，因为我没有提供任何要解析的文件，而是配置了插件来解析控制台日志。我是否必须配置 cpplint 才能产生特殊的输出？还是只是插件中的错误？如果您确实需要任何进一步的信息，请询问。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:46:16.603

这实际上是插件中的一个错误。将在警告插件的下一次更新中修复。

# jquery - 无论如何要在 jqGrid 中包含 MultiSelect Combobox 吗？

> ID：10847644
> 
> 赞同：3
> 
> 时间：2012-06-01T09:22:04.180
> 
> 标签：jquery, jquery-ui, jqgrid

我有一个 jqGrid，我希望一列是一个多选组合框。我得到了一个插件，

[http://www.abeautifulsite.net/blog/2008/04/jquery-multiselect/](http://www.abeautifulsite.net/blog/2008/04/jquery-multiselect/)

如何整合这些，以及如何获得选定的值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T13:42:35.433

例如，您可以使用[jQuery UI MultiSelect Widget](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)来实现带有复选框的多选。

[该演示](http://www.ok-soft-gmbh.com/jqGrid/MultipleCheckboxEdit.htm)展示了如何实现这一点。您将得到如下结果

![在此处输入图像描述](../Images/88c31494510fc13a3cbc08f67163c4fe.png)

您可以使用不同的选项自定义多选插件。在演示中，我使用了以下代码

```
edittype: 'select', editoptions: {
    value: 'FE:FedEx;TN:TNT;IN:Intim',
    dataInit: function (elem) {
        setTimeout(function () {
            $(elem).multiselect({
                minWidth: 100, //'auto',
                height: "auto",
                selectedList: 2,
                checkAllText: "all",
                uncheckAllText: "no",
                noneSelectedText: "Any",
                open: function () {
                    var $menu = $(".ui-multiselect-menu:visible");
                    $menu.width("auto");
                    return;
                }
            });
        }, 50);
    },
    multiple: true,
    defaultValue: 'IN'
} 
```

我应该提一下，您可以在不使用任何插件的情况下编辑多个可选列表。唯一的缺点是用户界面不会那么好。[下一个演示](http://www.ok-soft-gmbh.com/jqGrid/MultipleCheckboxEdit0.htm)展示了在没有多选插件的情况下如何工作。

**更新**：如果您需要在加载后直接将所有行设置为编辑模式，您可以像在下一个演示中那样执行此操作。

# c# - 只能在上一级删除注册表项吗？

> ID：10847645
> 
> 赞同：1
> 
> 时间：2012-06-01T09:22:05.910
> 
> 标签：c#, .net, registry, registrykey

在我们的应用程序中，我们有不同的组件，并且注册表项将在组件名称中创建。

例如。

我们有一个名为 Notification 的组件，我们的注册表项如下

```
RegistryKey rKeyNotification = Registry.LocalMachine.OpenSubKey("SOFTWARE\\CompanyName\\ProdName\\Notification"); 
```

现在我想删除这个键和所有的子键。

我试图完全删除这个 rKeyNotification。但我找不到任何办法。

我正在尝试如下。

```
if (rKeyNotification != null) {

   rKeyNotification.DeleteSubKeyTree("Notification");
} 
```

但是这件作品会寻找 `RegistryKey rKeyNotification =Registry.LocalMachine.OpenSubKey("SOFTWARE\\CompanyName\\ProdName\\Notification\\Notification");`

没有像`rKeyNotification.DeleteSubKeyTree()`

我应该总是上一级`(Registry.LocalMachine.OpenSubKey("SOFTWARE\\CompanyName\\ProdName)`然后只删除密钥吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:57:17.873

没有删除密钥本身的方法，但您可以`Registry.LocalMachine`直接使用：

```
string keyname = @"SOFTWARE\CompanyName\ProdName\Notification";
Registry.LocalMachine.DeleteSubKeyTree(keyname); 
```

# cuda - 在 CUDA 内核函数中，为什么 tex3D 不能返回任何值？

> ID：10847646
> 
> 赞同：1
> 
> 时间：2012-06-01T09:22:10.927
> 
> 标签：cuda, textures, multidimensional-array, volume-rendering

在这里，我有两个不同版本的代码。

第一个是来自 CUDA SDK 的完整 CUDA 程序。在内核中，tex3D 运行良好。

第二个版本更复杂，有很多 OpenGL 函数和 OpenGL 纹理。它的 .cu 文件与第一个相同。但是，我在同一个内核函数中使用 cudaMalloc 变量从 tex3D 获取值，我发现 tex3D 函数没有返回任何内容。实际上，两个程序使用相同的方式来创建 3D 纹理，如下代码所示：

```
#define  SIZE_X 128 //numbers in elements
#define  SIZE_Y 128
#define  SIZE_Z 128
typedef float  VolumeType;
cudaExtent volumeSize = make_cudaExtent(SIZE_X, SIZE_Y, SIZE_Z); 

cudaArray *d_volumeArray = 0; //for tex
cudaArray *d_transferFuncArray; //for transferTex

texture<VolumeType, 3, cudaReadModeElementType> tex;         // 3D texture
texture<float4, 1, cudaReadModeElementType> transferTex; // 1D transfer function texture

//initialize the 3d texture "tex" with a 3D array "d_volumeArray"
cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc<VolumeType>();
cutilSafeCall( cudaMalloc3DArray(&d_volumeArray, &channelDesc, volumeSize) ); 

// set texture parameters
tex.normalized = true;                      // access with normalized texture coordinates
tex.filterMode = cudaFilterModeLinear;      // linear interpolation
tex.addressMode[0] = cudaAddressModeClamp;  // clamp texture coordinates
tex.addressMode[1] = cudaAddressModeClamp;
CUDA_SAFE_CALL(cudaBindTextureToArray(tex, d_volumeArray, channelDesc));// bind array to 3D texture

//get the real value for 3D texture "tex"
float *d_volumeMem;
cutilSafeCall(cudaMalloc((void**)&d_volumeMem, SIZE_X*SIZE_Y*SIZE_Z*sizeof(float)));

.....//assign value to d_volumeMem in GPU. I've already checked the d_volumeMem is valid

//copy d_volumeMem to 3DArray
cudaMemcpy3DParms copyParams = {0};
copyParams.srcPtr = make_cudaPitchedPtr((void*)d_volumeMem, SIZE_X*sizeof(VolumeType),   SIZE_X, SIZE_Y); 
copyParams.dstArray = d_volumeArray;
copyParams.extent = volumeSize;
copyParams.kin = cudaMemcpyDeviceToDevice;
cutilSafeCall( cudaMemcpy3D(&copyParams) ); 
```

下面的代码是调用 tex3D 的内核函数。实际上，它和 CUDA SDK volumeRender 的内核一样，都是光线投射的实现。

```
__global__ void d_render(....)
{
 ......//ray-casting progress

 float temp = tex3D(tex, pos1, pos2, pos3); 
 //pos1 pos2 pos3 is valid
 //Here actually I use a cudaMalloc variable "s" to store the temp
 //In the first version, s has different value for different position
 //In the second version, temp is 0 all the time

......//ray-casting progress
} 
```

我认为这些代码很好，因为它们中的大多数来自 CUDA SDK volumeRender，并且在我的第一个版本代码中运行良好。

但我不知道为什么在第二个版本中 tex3D 突然无效。也许其他一些OpenGL纹理有一些负面影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T01:55:56.460

实际上，问题是我在选择 CUDA 设备之前做了绑定纹理的东西。所以，首先调用 cudaChooseDevice 和 cudaSetGLDevice 会让事情顺利进行！

# php - 从 MySQL 列数据填充下拉列表

> ID：10847647
> 
> 赞同：1
> 
> 时间：2012-06-01T09:22:16.393
> 
> 标签：php, mysql, pdo

我目前无法在下拉列表中显示我的数据库列中的条目。

下面的代码......我猜是一半工作......当我运行它时，下拉列表为我提供了 6 个选项（我的数据库中的列也有 6 列）现在我只需要显示名称！

感谢所有帮助！

```
<select id="teamlist" name="teamlist">
<?php
  $pdo = new PDO('mysql:host=localhost;dbname=clubresults', 'root', '12345678');
  #Set Error Mode to ERRMODE_EXCEPTION.
  $pdo->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);  
  $stmt = $pdo->prepare('Select teamname from members');
  $stmt->execute();
  while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
    echo "<option>{$row['teamname']}</option>";
  }
?>
</select> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T10:53:50.667

```
 <select id="teamlist" name="teamlist">
 <?php
        $pdo = new PDO('mysql:host=localhost;dbname=clubresults', 'root', '12345678');
        #Set Error Mode to ERRMODE_EXCEPTION.
        $pdo->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);  

    $stmt = $pdo->prepare('Select teamname from members');
    $stmt->execute();
       while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
    echo '<option>'.$row['teamname'].'</option>';
       }
     ?>
 </select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:25:36.643

`{`里面不需要`<option>`

```
echo "<option>".$row['teamname']."</option>" 
```

# objective-c - 目标c复选框不刷新

> ID：10847650
> 
> 赞同：0
> 
> 时间：2012-06-01T09:22:35.460
> 
> 标签：objective-c, xcode4, uitableview, checkbox

我对自定义 UITableViewCell 中的复选框有疑问。当我触摸复选框时，图像更改（“checked.png”-->“unchecked.png”和“unhacked.png”-->“checked.png”）并且值保存在数据库（SQLLite）中。问题是，如果我进入一个有“检查”复选框的视图并触摸它，图像不会改变，但如果我重新加载视图，图像是正确的！如何在事件“按下复选框”时自动重新加载视图？这是我的代码：

```
// called when the checkmark button is touched 
- (void)checkAction:(id)sender
{
    // note: we don't use 'sender' because this action method can be called separate from the button (i.e. from table selection)
    self.checked = !self.checked;
    UIImage *checkImage = (self.checked) ? [UIImage imageNamed:@"checked.png"] : [UIImage imageNamed:@"unchecked.png"];
    [checkButton setImage:checkImage forState:UIControlStateNormal];
} 
```

非常感谢您的任何建议！

斯特凡诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:28:46.500

每当在已渲染的 UITableViewCell 中进行更改时，您需要重新加载该单元格，以便重新绘制它并反映更改。

因此，在您拦截 checkAction 后，您需要重新加载整个表格（不必要的）或只是具有复选框的表格行。

我猜你的下一个问题是，我怎么知道复选框在哪一行？好吧，这里有一个简单但易于实现的技巧。在每个复选框中添加一个具有行值的标记值（这是一个整数值）。

然后通过以下方式获取单元格引用：

```
- (void)checkAction:(id)sender
{
   int tag= sender.tag;
    NSIndexPath *cellIndexPath = [NSIndexPath indexPathForRow:tag inSection:0];
    [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:cellIndexPath] withRowAnimation:UITableViewRowAnimationFade];
} 
```

现在，如果您只有 1 个部分，这将正常工作。如果您有多个部分，则需要进行更多调整才能获得表格部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:03:42.713

尝试这个：

```
- (void)checkAction:(id)sender
{
  if(![sender isSelected])
  {
    [sender setSelected:YES];
    [checkButton setImage:[checkButton setImage:[UIImage imageNamed:@"checked.png"] forState:UIControlStateNormal];
    //Save state in Database

  }
  else
  {
    [sender setSelected:NO];
    [checkButton setImage:[checkButton setImage:[UIImage imageNamed:@"unchecked.png"] forState:UIControlStateNormal];
   //Save state in Database
  }

  [YourTableView reloadData]; 
```

}

# c# - 从 Web 浏览器页面获取数据到 wpf 应用程序

> ID：10847651
> 
> 赞同：1
> 
> 时间：2012-06-01T09:22:37.857
> 
> 标签：c#, http, browser

我有一个 wpf 应用程序，因为我有一个文本框，我在其中输入 url，我正在 Web 浏览器控件中获取该网页。例如，如果我在 wpf 应用程序中的 Web 浏览器控件中打开任何网页想要从该 Web 浏览器控件中获取所有文本并将其显示在文本框中。从该文本框中，我可以将其导出到任何文件中。我现在需要有关如何从 Web 浏览器控件中获取所有数据然后将其放入多行文本框中的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:57:46.130

您可以使用 System.Net 中的 HttpWebRequest 和 HttpWebResponse 对象与网络服务器进行通信。

例如

```
string GetWebPage(string address)
{
    string responseText;
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(address);

    using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
    {
        using (StreamReader responseStream = new StreamReader(response.GetResponseStream(), Encoding.GetEncoding("utf-8")))
        {
            responseText = responseStream.ReadToEnd();
        }
    }

    return responseText;
} 
```

然后，您可以使用以下方法设置文本框的文本：

```
myTextBox.Text = GetWebPage(address); 
```

为了更好地为您的用户服务，您应该使 Web 请求异步，这样您就不会在数据下载时锁定 UI。您可以使用 a`BackgroundWorkerThread`来执行此操作。

# iphone - 纵向模式应用，横向全屏电影播放后返回纵向模式

> ID：10847652
> 
> 赞同：1
> 
> 时间：2012-06-01T09:22:49.390
> 
> 标签：iphone, mpmovieplayercontroller

所以我有一个仅在纵向模式下的应用程序。如果我以全屏模式启动电影播放器​​并将其旋转到横向模式，然后按“完成”按钮，状态栏处于横向模式，视图处于纵向布局但处于横向模式，因此仅显示部分碎石。

如果我自己旋转设备，视图会正确重置，但我需要一种以编程方式执行此操作的方法。

我试过这个： shouldAutorotateToDeviceOrientation 仅在纵向模式下返回 true

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                     selector:@selector(_moviePlayerWillExitFullscreen:)
                                             name:MPMoviePlayerWillExitFullscreenNotification object:nil];

- (void)_moviePlayerWillExitFullscreen:(NSNotification *)notification {
    1) [self willRotateToInterfaceOrientation:self.interfaceOrientation duration:0];
    2) [self attemptRotationToDeviceOrientation];
} 
```

# spring - Spring WS - JaxRPC - Web 服务响应

> ID：10847653
> 
> 赞同：2
> 
> 时间：2012-06-01T09:22:53.230
> 
> 标签：spring, jax-rpc

我正在使用 spring ws jaxrpc 来使用外部 Web 服务。

Web 服务的配置如下。

```
<bean id="myWebService" class="org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean">
        <property name="serviceInterface" value="jatis.avantrade.foundation.model.service.WeatherService"/>
        <property name="wsdlDocumentUrl" value="http://www.w3schools.com/webservices/tempconvert.asmx?WSDL"/>
        <property name="namespaceUri" value="http://tempuri.org/"/>
        <property name="serviceName" value="TempConvert"/>
        <property name="portName" value="TempConvertHttpPost"/>
        <property name="endpointAddress" value="http://www.w3schools.com/webservices/tempconvert.asmx"/>
</bean>

<bean id="client" class="jatis.avantrade.foundation.model.service.WeatherServiceImpl">    
    <property name="service" ref="myWebService"/>
</bean> 
```

然后，我如下调用 Web 服务。

```
package jatis.avantrade.foundation.model.service;

import java.rmi.Remote;

import javax.jws.WebMethod;
import javax.jws.WebService;
import javax.jws.soap.SOAPBinding;
import javax.jws.soap.SOAPBinding.Style;
import javax.xml.ws.BindingType;

@WebService(serviceName = "TempConvert")
@SOAPBinding(style = Style.DOCUMENT)
@BindingType(value = "http://schemas.xmlsoap.org/wsdl/soap/http")
public interface WeatherService extends Remote {

@WebMethod(action = "http://tempuri.org/CelsiusToFahrenheit", operationName = "CelsiusToFahrenheit")
    public String CelsiusToFahrenheit(String input);
} 
```

但是，它抛出异常。

```
Caused by: com.sun.xml.internal.ws.streaming.XMLStreamReaderException: unexpected XML tag. expected: {http://service.model.foundation.avantrade.jatis/}CelsiusToFahrenheitResponse but found: {http://tempuri.org/}CelsiusToFahrenheitResponse
at com.sun.xml.internal.ws.streaming.XMLStreamReaderUtil.verifyTag(XMLStreamReaderUtil.java:203)
at com.sun.xml.internal.ws.streaming.XMLStreamReaderUtil.verifyTag(XMLStreamReaderUtil.java:211)
at com.sun.xml.internal.ws.client.sei.ResponseBuilder$DocLit.readResponse(ResponseBuilder.java:513)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:110)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)
at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:107)
at $Proxy23.CelsiusToFahrenheit(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.remoting.jaxws.JaxWsPortClientInterceptor.doInvoke(JaxWsPortClientInterceptor.java:520)
at org.springframework.remoting.jaxws.JaxWsPortClientInterceptor.doInvoke(JaxWsPortClientInterceptor.java:494) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T02:04:57.527

尝试从 bean 定义中删除除 、 和 之外的所有`serviceInterface`属性`endpointAddress`。`serviceName`

这应该可以工作，并且足以使用您生成的接口`wsdl2java`或类似接口的 Web 服务。

# python - 对 numpy 数组进行二次采样/平均

> ID：10847660
> 
> 赞同：9
> 
> 时间：2012-06-01T09:23:16.940
> 
> 标签：python, arrays, numpy, subsampling

我有一个带有浮点数的 numpy 数组。

我想要的（如果它不存在的话）是一个函数，它为我提供了一个新数组，其中包含给定数组中每个 x 点的平均值，例如子采样（与插值相反（？））。

例如 sub_sample(numpy.array([1, 2, 3, 4, 5, 6]), 2) 给出 [1.5, 3.5, 5.5]

例如，可以删除剩菜，例如 sub_sample(numpy.array([1, 2, 3, 4, 5]), 2) 给出 [1.5, 3.5]

提前致谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-01T09:40:04.013

使用 NumPy 例程，您可以尝试类似

```
import numpy

x = numpy.array([1, 2, 3, 4, 5, 6])

numpy.mean(x.reshape(-1, 2), 1) # Prints array([ 1.5,  3.5,  5.5]) 
```

只需将`2`通话中的替换`reshape`为您想要平均的项目数。

**编辑**：这假设`n`分为`x`. 如果要将其转换为通用功能，则需要包含一些检查。也许是这样的：

```
def average(arr, n):
    end =  n * int(len(arr)/n)
    return numpy.mean(arr[:end].reshape(-1, n), 1) 
```

这个函数在起作用：

```
>>> x = numpy.array([1, 2, 3, 4, 5, 6])
>>> average(x, 2)
array([ 1.5,  3.5,  5.5])

>>> x = numpy.array([1, 2, 3, 4, 5, 6, 7])
>>> average(x, 2)
array([ 1.5,  3.5,  5.5]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T09:33:04.190

```
def subsample(data, sample_size):
    samples = list(zip(*[iter(data)]*sample_size))   # use 3 for triplets, etc.
    return map(lambda x:sum(x)/float(len(x)), samples)

l = [1, 2, 3, 4, 5, 6]

print subsample(l, 2)
print subsample(l, 3)
print subsample(l, 5) 
```

给出：

```
[1.5, 3.5, 5.5]
[2.0, 5.0]
[3.0] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-11-02T02:15:16.107

这也是一种有效的单行解决方案：

```
downsampled_a = [a[i:n+i].mean() for i in range(0,size(a),n)] 
```

“a”是包含您的数据的向量，“n”是您的采样步骤。

PS：`from numpy import *`

# asp.net-mvc - ASPNET MVC 自定义路由失败并显示“未找到与名为 'Home' 的控制器匹配的类型。”

> ID：10847663
> 
> 赞同：6
> 
> 时间：2012-06-01T09:23:32.510
> 
> 标签：asp.net-mvc, routing

我正在尝试创建一个自定义路由来处理具有多个参数的特定 url。我向 global.asax 添加了一个新的新路由定义，但是当我尝试导航到该操作时，我收到错误消息“未找到与名为‘Home’的控制器匹配的类型。”

谁能告诉我哪里出错了？

全球.asax：

```
public static void RegisterRoutes(RouteCollection routes)
{
  routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

  routes.MapHttpRoute(
      name: "HomeDetails",
      routeTemplate: "Home/Detail/{articleId}/{articleVersion}",
      defaults: new { controller = "Home", action = "Detail", articleId = "0", articleVersion = "0.0" }
  );

  //routes.MapHttpRoute(
  //    name: "DefaultApi",
  //    routeTemplate: "api/{controller}/{id}",
  //    defaults: new { id = RouteParameter.Optional }
  //);

  routes.MapRoute(
      name: "Default",
      url: "{controller}/{action}/{id}",
      defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
  );
} 
```

控制器：

```
public class HomeController : Controller
{

  public ViewResult Index()
  {
    return View();
  }

  public ViewResult Detail(int articleId, decimal articleVersion)
  {
  // does stuff here...
  return View(model);
  }

} 
```

我试图点击的网址将类似于`http://localhost/home/detail/1234/1.2`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-01T10:14:05.317

`MapHttpRoute`路由到继承`ApiController`.

在您的示例 HomeController 继承了标准`Controller`（不是 ApiController），您需要使用`MapRoute`它来找到控制器：

```
routes.MapRoute(
  name: "HomeDetails",
  url: "Home/Detail/{articleId}/{articleVersion}",
  defaults: new { controller = "Home", action = "Detail", articleId = 0, articleVersion = 0.0 }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:41:40.753

嗨，这样的代码更改。

```
 routes.MapHttpRoute(
      name: "HomeDetails",
      routeTemplate: "{controller}/{action}/{articleId}/{articleVersion}",
      defaults: new { controller = "Home", action = "Detail", articleId = "0", articleVersion = "0.0" }
  ); 
```

# java - 尝试为域名创建模式

> ID：10847664
> 
> 赞同：0
> 
> 时间：2012-06-01T09:23:34.103
> 
> 标签：java, android, regex, pattern-matching

我正在尝试创建一个模式来验证没有“http://www”的域名，但我无法这样做完全请有人帮助我；

```
"\\.[a-zA-Z][a-zA-Z]"
".*?([^.]+\\.[^.]+)" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:27:44.897

图案：`^[a-zA-Z0-9\-\.]+\.(com|org|net|mil|edu|COM|ORG|NET|MIL|EDU)$`

描述
域名：此正则表达式测试域或主机名的有效性。它将匹配任何不包含 URL 中无效字符且以 .com、.org、.net、.mil 或 .edu 结尾的有效域名。您可以通过附加 | 来添加其他有效的 TLD。（管道）字符和所需的 TLD 到括号中的列表。

匹配
3SquareBand.com | asp.net | 军队.mil

有关更多模式，请查看[此处](http://regexlib.com/Search.aspx?k=URL&AspxAutoDetectCookieSupport=1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T09:35:56.380

您是否尝试过[Patterns](http://developer.android.com/reference/android/util/Patterns.html)类中的模式？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T13:07:25.040

就我而言，那个 Pattern API 并不完美，所以我使用了这个正则表达式。

```
Pattern p = Pattern.compile("^(http|ftp|https)://|^[a-zA-Z0-9]+\\.[a-zA-Z][a-zA-Z]" ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T08:53:11.707

对于 Java 开发人员，这种模式适用于我的问题：

```
private static final String DOMAIN_START_END_PATTERN_STRING =
    "^([a-zA-Z0-9]([a-zA-Z0-9\\-]{0,65}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,6}$"; 
```

# javascript - javascript中的多字符串搜索模式

> ID：10847665
> 
> 赞同：0
> 
> 时间：2012-06-01T09:23:35.413
> 
> 标签：javascript, regex

我有一个包含所有结构（html、head 和其他标签）的 html 内容。我需要获取正文内容，所以我这样做了

```
data = data.replace(/.*<body.*?>(.*)<\/body>/mi,"$1"); 
```

但是那个正则表达式似乎不起作用，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:33:58.323

Javascript 不支持`s`(=dot 匹配换行符) 开关，所以你必须使用`[^]`(=any character) 而不是`.`

```
"<\n xxx \n>".replace(/<.*>/, "YES")  // < xxx >
"<\n xxx \n>".replace(/<[^]*>/, "YES") // YES 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:40:35.027

没有标志可以`.`匹配新行，因此您必须手动将其添加到匹配中。我建议使用空格类`\s`。`.*`此外，不需要初始值。

```
data = data.replace(/<body.*?>((\s|.)*)<\/body>/mi,"$1"); 
```

# printing - Minix 从内核打印到控制台

> ID：10847666
> 
> 赞同：1
> 
> 时间：2012-06-01T09:23:36.647
> 
> 标签：printing, kernel, minix

我正在尝试更改 Minix 中的调度并希望从 /kernel/proc.c 打印到标准输出。Printf 不能在内核中使用。我正在使用 Minix 3.1.2。

我想添加代码

```
sched() 
```

功能以便将消息打印到控制台。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:53:17.350

打电话`printk(const char *fmt, ...)`。

# ruby - 负数的二进制补码表示，在给定数量的（六）位数上

> ID：10847668
> 
> 赞同：0
> 
> 时间：2012-06-01T09:23:42.323
> 
> 标签：ruby

在 Ruby 中，如何在给定数量的（六进制）数字上获得负数的干净二进制补码六进制表示？

我已经知道了：

```
irb(main):003:0> a=-7
=> -7
irb(main):005:0> str = "0x" << sprintf("%X",x)
=> "0x..F9" 
```

然后我还需要

1.  压制“..”
2.  必要时传播“F”

有什么成语可以正确地加点吗？

JCLL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:49:28.520

当数字为负数时，如何自己做减法：

```
sprintf("%#X",16**digits-7) 
```

# mysql - MySQL 加入查询 - 或被忽略

> ID：10847673
> 
> 赞同：1
> 
> 时间：2012-06-01T09:24:15.303
> 
> 标签：mysql, join

当您独自工作并且迷失在自己的脑海中时，偶尔会出现令人讨厌的问题之一！我完全期待答案很简单：

我有一个这样的查询：

```
SELECT * FROM table_a
LEFT JOIN table_b ON table_a.order_id = table_b.order_id
WHERE (table_a.column_a='string' OR table_b.column_b='string' OR table_b.column_c='string')
group by column_d 
```

该查询正在返回所有行，并且似乎忽略了查询的 WHERE 部分……但事实并非如此。如果我删除 OR 部分，它会按预期工作：

```
SELECT * FROM table_a
LEFT JOIN table_b ON table_a.order_id = table_b.order_id
WHERE (table_a.column_a='string')
group by column_d 
```

想法/明显的问题？

**更新**

我的具体问题是我正在针对一个整数列评估一个字符串，这意味着该语句评估为未知。代码现在如上，但如果字符串是数字，我只添加特定的 OR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:38:53.513

通过观察您的加入，我猜想您正在比较的某些列是可以为空的，并且阶段返回结果为 true 的行（**注意，在阶段与空值进行比较的列导致 UNKNOWN。是否，未返回. 您可以通过添加一个检查值是否为 Null 的条件来解决此问题**）

```
SELECT * FROM table_a
LEFT JOIN table_b ON table_a.order_id = table_b.order_id
WHERE ((table_a.column_a IS NOT NULL AND table_a.column_a='string') OR (table_b.column_b IS NOT NULL AND table_b.column_b='string') OR (table_b.column_c IS NOT NULL AND table_b.column_c='string'))
GROUP BY column_d 
```

# oracle - 如何在 PL/SQL 中模拟 32 位有符号整数溢出？

> ID：10847674
> 
> 赞同：3
> 
> 时间：2012-06-01T09:24:16.237
> 
> 标签：oracle, plsql, integer, integer-overflow

你知道如何在 Oracle PL/SQL 中模拟 32 位整数溢出吗？例如，

```
2147483647 + 1 = -2147483648 
```

或者

```
-2147483648 - 1 = 212147483647 
```

我尝试了 PLS_INTEGER，但它引发了溢出异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:42:40.440

我终于找到了一种方法来做到这一点。假设`N`是 type 的值`NUMBER`，您需要以某种方式模拟 32 位有符号整数溢出，然后：

```
N := MOD(N, 4294967296);
IF N > 2147483647
THEN
    N := N - 4294967296;
ELSIF N < -2147483648
THEN
    N := N + 4294967296;
END IF; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:15:32.177

也许您可以捕获溢出异常，如下所示：

```
DECLARE 
  n PLS_INTEGER;
  addend PLS_INTEGER;

  NUMERIC_OVERFLOW EXCEPTION;
  PRAGMA EXCEPTION_INIT(NUMERIC_OVERFLOW, -1426);
BEGIN
  n := 2147483642;
  addend := 6;

  BEGIN  
    n := n + addend;
  EXCEPTION
    WHEN NUMERIC_OVERFLOW THEN
      DBMS_OUTPUT.PUT_LINE('OVERFLOW!');
      n := -2147483647 + (-2147483647 + n + addend - 1);

    WHEN OTHERS THEN
      DBMS_OUTPUT.PUT_LINE('SQLCODE=' || SQLCODE || '  ' || SQLERRM);
  END;

  DBMS_OUTPUT.PUT_LINE(n);
END; 
```

分享和享受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-11T09:58:55.060

在 Oracle 中模拟 32 位有符号溢出有一个更优雅的单行解决方案：

```
N := MOD (N - 2147483647, 4294967296) + 2147483647; 
```

`N`是`NUMBER`或类型`INTEGER`。

# regex - RegExp 用于具有固定值的分隔字段

> ID：10847675
> 
> 赞同：0
> 
> 时间：2012-06-01T09:24:23.620
> 
> 标签：regex

我正在尝试验证字符串是否匹配某个模式：

```
#:XY1:XY2:ABC:::xy:: 
```

该部分`#:XY1`是必需的，后面的字段和分隔符是可选的。但是，如果存在第三个字段，则它必须是`ABC`. 我正在尝试这样：

```
^#:[^:]+:?([^:]+)?:?(ABC)?:?([^:]*:?)*$ 
```

但它也匹配行，这些行并不完全具有`ABC`第三个字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:00:57.647

请试试这个：

```
^#((((:[^:]+))((:[^:]*))?)|((((:[^:]+))(:[^:]*))((:(ABC)?)(:[^:]*)*)?))$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:31:50.760

您可以使用如下表达式：

```
(?x) ^#:[^:]+  (?: :[^:]+  (?: :ABC  (?: :[^:]* )*  )?  )? $ 
```

尽管如此，使用其他编程结构可能会更好（更具可读性）。Perl 示例：

```
my @l = split /:/, '#:XY1:XY2:ABC:::xy::';
if($l[0] eq '#' && $l[3] eq 'ABC'){
    # do stuff
} 
```

# javascript - 如何在服务器端asp.net代码中读取从客户端javascript创建的cookie

> ID：10847676
> 
> 赞同：-3
> 
> 时间：2012-06-01T09:24:25.663
> 
> 标签：javascript, asp.net

例如，我在页面加载中放置了一个 cookie，在服务器端 c# 代码的按钮提交上有一些特定的值，我如何获取该 cookie 的值？（asp.net）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:21:31.203

以下是在 C# 中读取 cookie 的方法：

```
string cookieValue = string.Empty;

if (Request.Cookies["cookiename"] != null)
{
    cookieValue = Request.Cookies["cookiename"].Value.ToString();
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-01T09:37:44.123

阅读饼干：

```
if (Request.Cookies["NameofCookie"] != null)
{
    string value = string.Empty;
    if (Request.Cookies["NameofCookie"]["yourkey"] != null)
    { value= Request.Cookies["NameofCookie"]["yourkey"]; }
} 
```

# excel - 根据excel中的年份和周数计算月份

> ID：10847678
> 
> 赞同：11
> 
> 时间：2012-06-01T09:24:31.200
> 
> 标签：excel, date, week-number

在 Excel 2007 中，我有一个年数和周数，我想计算出月数。

问题是，在我的情况下，每周的开始是星期一，所以几年中有些星期会重叠。

例子：

```
Year: 2012
Week 1 started: Monday 2nd January
Sunday 1st January was in week 52 of 2011 
```

所以给出以下内容：

```
Year: 2011
Week: 10 
```

我如何计算出第 10 周从 3 月 7 日开始，因此第 10 周在第 3 个月。

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-01T18:57:17.887

您实际上可以更简单地执行此操作。如果年份在`A2`，例如 2012，并且周数在，`B2`您可以使用此公式获取该周的开始日期

`=DATE(A2,1,-2)-WEEKDAY(DATE(A2,1,3))+B2*7`

格式为日期

......显然，您可以将其包装在 MONTH 函数中以获取月份，即

`=MONTH(DATE(A2,1,-2)-WEEKDAY(DATE(A2,1,3))+B2*7)`

将结果单元格格式化为一般格式

**解释**

上面找到上一年**最后一个**星期一的日期，然后加上周数 * 7 给出相关周的开始日期。

ISO 周一年中的**第一**天始终是 12 月 29 日至 1 月 4 日期间唯一的星期一，因此要找到该日期，我们可以找到 1 月 5 日之前的星期一。

要查找任何日期之前的星期一，您可以使用此通用公式

`=date-WEEKDAY(date-2)`

因此，如果日期是 A2 中显示的当年 1 月 5 日，则与

`=DATE(A2,1,5)-WEEKDAY(DATE(A2,1,3))`

.....但这给出了今年的第一个星期一，所以如果我想要前一年的最后一个星期一，我可以减去 7 - 一种方法是从 5 中减去 7 得到 -2 因此：

`=DATE(A2,1,-2)-WEEKDAY(DATE(A2,1,3))`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T09:45:55.923

我建议以下方法

*   确定 1 月 1 日的 (ISO) 周（参见[此页](http://www.rondebruin.nl/weeknumber.htm)）[在单元格*C4*中]

    `=INT((B4-DATE(YEAR(B4-WEEKDAY(B4-1)+4),1,3)+WEEKDAY(DATE(YEAR(B4-WEEKDAY(B4-1)+4),1,3))+5)/7)`（假设 B4 `=DATE([Year],1,1)`）

*   计算第 1 周开始的日期 [在单元格*D4*中]

    `=IF(C4=1,B4-WEEKDAY(B4,3),B4+7-WEEKDAY(B4,3))`

*   确定相关周的星期一和相应的月​​份

    `=MONTH(D4+7*([Week]-1))`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-14T10:58:59.847

ISO 周总是包含 1 月 4 日，所以让我们从星期一开始获取它的工作日（显然“年”是带有年份的单元格）：

```
WEEKDAY(DATE(year;1;4)) 
```

这是我们需要从该日期返回以找到星期一的天数（加一）

```
DATE(year;1;4)-WEEKDAY(DATE(year;1;4))+1 
```

所以现在我们只需要依靠...

```
DATE(year;1;4)-WEEKDAY(DATE(year;1;4))+1+weeknumber*7 
```

# ios5 - RestKit 给我 EXC_BAD_ACCESS

> ID：10847680
> 
> 赞同：1
> 
> 时间：2012-06-01T09:24:39.883
> 
> 标签：ios5, restkit

我一直试图让 RestKit 在我的应用程序上工作，但没有成功。我有一个启用 ARC 的应用程序，我使用[https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x)安装了它。我一直在阅读 StackOverflow 上的文章，说我需要一个单例类或其他东西。我回到基础并尝试按照以下示例进行操作：[https](https://github.com/RestKit/RestKit/wiki/Tutorial-%3A-Introduction-to-RestKit) ://github.com/RestKit/RestKit/wiki/Tutorial-%3A-Introduction-to-RestKit 。

在我的 AppDelegate 中，我有：

```
RKClient *client = [RKClient clientWithBaseURLString:@"http://restkit.org"];
   NSLog(@"I am your RKClient singleton: %@", [RKClient sharedClient]); 
```

在我的另一堂课上，我有：

```
 - (void) sendRequests {
    [[RKClient sharedClient] get: @"/foo.xml" delegate:self];

    NSDictionary *params = [NSDictionary dictionaryWithObject:@"RestKit" forKey:@"Sender"];
    [ [RKClient sharedClient] post:@"/other.json" params:params delegate:self];

    // DELETE a remote resource from the server
    [ [RKClient sharedClient] delete:@"/missing_resource.txt" delegate:self];

}

- (void)request:(RKRequest*)request didLoadResponse:(RKResponse*)response {  
    if ([request isGET]) {
        // Handling GET /foo.xml

        if ([response isOK]) {
            // Success! Let's take a look at the data
            NSLog(@"Retrieved XML: %@", [response bodyAsString]);
        }

    } else if ([request isPOST]) {

        // Handling POST /other.json        
        if ([response isJSON]) {
            NSLog(@"Got a JSON response back from our POST!");
        }

    } else if ([request isDELETE]) {

        // Handling DELETE /missing_resource.txt
        if ([response isNotFound]) {
            NSLog(@"The resource path '%@' was not found.", [request resourcePath]);
        }
    }
}

- (void) requestWillPrepareForSend:(RKRequest *)request {
    NSLog(@"request: %@",request);
} 
```

我收到 EXC_BAD_ACCESS(code -1, address = 0x766c6550) 错误，它指向的行是：

```
if ([self.delegate respondsToSelector:@selector(requestWillPrepareForSend:)]) { 
```

顺便说一句，我通过执行以下操作调用 getRequest：

```
RestHandler *myRestHandler = [[RestHandler alloc] init];
[myRestHandler sendRequests]; 
```

和 RestHandler 确实有 .

谁能在这里为我提供一些见解？我读了一堆关于 StackOverflow 的文章，但我回到了基础，仍然无法弄清楚。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:06:54.237

如果您不为请求使用局部变量，则可以使用该代码。将 RestHandler 对象放在 AppDelegate 实例变量上，然后执行以下操作：

```
@interface RSAppDelegate : NSObject <NSApplicationDelegate,NSOutlineViewDataSource, NSOutlineViewDelegate> {
    RestHandler *myRestHandler;
} 
```

在 applicationDidFinishLaunching 中：

```
myRestHandler = [[RestHandler alloc] init];
[myRestHandler sendRequests]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:32:52.107

设置`myRestHandler`as strong 的属性。该对象在 url 请求形成之前失去了内存`Restkit`。

# php - PHP构造函数和相互依赖的字段反弹

> ID：10847681
> 
> 赞同：2
> 
> 时间：2012-06-01T09:24:46.567
> 
> 标签：php, design-patterns, object, constructor

`MyClass`有一个反弹的字段，其中每个值取决于另一个实例值，最后，在一个`DependencyClass`. 一个非常简单的例子：

# 解决方案 A（使用构造函数）

```
public class MyClass
{
    private $myField1, $myField2;

    public function MyClass(DependencyClass $dependency)
    {
        $value = $dependency->getValue();
        $value++; // Computations on dependency value

        $this->myField1 = $value + 3;
        $this->myField2 = $value - 1;
    }

    public function getMyField1()
    {
        return $this->myField1;
    }

    public function getMyField2()
    {
        return $this->myField2;
    }
} 
```

我的问题是，类构造函数是我应该放置这个计算逻辑的正确位置吗？或者更适合做一些代码重复，例如：

# 解决方案 B（仅用于依赖的构造函数）

```
public class MyClass
{
    private $dependency;

    public function MyClass(DependencyClass $dependency)
    {
        $this->dependency= $dependency
    }

    public function getMyField1()
    {
        $value = $this->dependecy->getValue();
        $value++; // Computations on dependency value

        return $value + 3;
    }

    public function getMyField2()
    {
        $value = $this->dependecy->getValue();
        $value++; // Computations on dependency value

        return $value - 1;
    }
} 
```

或`MyClass`仅制作一个容器和用户一个外部汇编程序类，如：

# 解决方案 C（外部汇编程序）

```
Class Assembler
{
    public getMyClass()
    {
        $dependency = new Dependency();
        $value      = $dependency->getValue();
        $value++; // Computations on dependency value

        $myClass = new MyClass();
        $myClass->setMyField1($value + 3);
        $myClass->setMyField2($value - 1);

        return $myClass;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T00:08:47.213

这取决于您的情况和需求。

如果您的计算很简单并且总是使用，我会将它们放在 ctor 中。（解决方案 A）

如果其中一个计算很复杂和/或并不总是使用，我会在访问器中选择“惰性评估”，并让访问器在计算结果后缓存结果。（解决方案 B，但我会添加结果缓存）。

我建议不要使用解决方案 C。它实际上只是不同范围内的构造函数，因此您的类的凝聚力较低。它隐藏了对另一个类的依赖。这使得测试变得困难，因为其他类不能被模拟或存根。该类几乎没有存在的理由——它几乎与只读数组相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:30:50.630

答案是“视情况而定”。你想达到什么目的？

使用解决方案 A 和 B，您已将与 Dependency 的耦合和计算作为 MyClass 对象的固有部分：MyClass 不存在于 Dependency 中，它总是以某种方式使用 Dependency。另一方面，解决方案 C 将 MyClass 与 Dependency 完全解耦，使 MyClass 成为一个不起眼的数据对象。

所以问题是，在给定时刻你所面临的任何更具体的情况下，哪一个是有意义的。您希望 MyClass 中的数据将来能够以多种方式构造，还是希望始终从 Dependency 中创建？

# playframework - 游戏中的依赖解析 - sbt - ivy 与分类器

> ID：10847683
> 
> 赞同：0
> 
> 时间：2012-06-01T09:24:52.357
> 
> 标签：playframework, dependencies, sbt, ivy

在我的 Build.scala 中，我得到了一个依赖项（在我们本地的 Nexus/Maven 仓库中），它有一个分类器：

```
[...]
val appDependencies = Seq(
    "org.example" % "something-ejb" % "1.0.0" classifier "client"
)
[...] 
```

本地 Nexus 已配置，其他一切正常，所有依赖项都已获取。但是在获取分类器依赖项时，我得到了这个错误

```
[warn]  [NOT FOUND  ] org.example#something-ejb;1.0.0!something-ejb.ejb-client (2015ms)
[warn] ==== Example Nexus Releases: tried
[warn]   http://example.org:8080/nexus/content/groups/Nexus_Central/org/example/something-ejb/1.0.0/something-ejb-1.0.0.ejb-client
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::              FAILED DOWNLOADS            ::
[warn]  :: ^ see resolution messages for details  ^ ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: org.example#something-ejb;1.0.0!something-ejb.ejb-client
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[error] {file:/C:/something-tool/}something-tool/*:update: sbt.ResolveException: download failed: org.example#something-ejb;1.0.0!something-ejb.ejb-client 
```

工件在 Nexus 中，但不是带有 ...ejb-client 而是带有 ...client.jar（没有 ejb）。这个“ejb-client”来自哪里？我没有配置那个。

我尝试使用具有新解析器模式的解析器：

```
Resolver.url("Example Releases Classifiers", new java.net.URL("http://example.org:8080/nexus/content/groups/Nexus_Central/"))( Patterns("[organisation]/[module]/[revision]/[artifact]-[revision](-[classifier]).[ext]")) 
```

但似乎没有效果，错误依然存在。

# c# - C# 属性继承没有像我期望的那样工作

> ID：10847688
> 
> 赞同：4
> 
> 时间：2012-06-01T09:25:13.797
> 
> 标签：c#, inheritance, properties, attributes

我在基类中有一个属性，上面有一些属性：

```
[MyAttribute1]
[MyAttribute2]
public virtual int Count
{
  get
  {
    // some logic here
  }
  set
  {
    // some logic here
  }
} 
```

在派生类中我已经这样做了，因为我想将 MyAttribute3 添加到属性中并且我无法编辑基类：

```
[MyAttribute3]
public override int Count
{
  get
  {
     return base.Count;
  }
  set
  {
     base.Count = value;
  } 
```

}

但是，该属性现在的行为就像它没有 MyAttribute1 和 MyAttribute2 一样。我做错了什么，还是属性没有继承？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T09:58:14.350

默认情况下不继承属性。您可以使用以下`AttributeUsage`属性指定：

```
[AttributeUsage(AttributeTargets.Property, Inherited = true)]
public class MyAttribute : Attribute
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T09:59:42.447

如果您只是使用方法 .GetType().GetCustomAttributes(true)，这对我来说似乎工作正常，即使您设置 Inherited=true，它也不会真正返回任何属性。

```
[AttributeUsage(AttributeTargets.Property, Inherited = true, AllowMultiple = true)]
sealed class MyAttribute : Attribute
{
    public MyAttribute()
    {
    }
}

[AttributeUsage(AttributeTargets.Property, Inherited = true, AllowMultiple = true)]
sealed class MyAttribute1 : Attribute
{
    public MyAttribute1()
    {
    }
}

class Class1
{
    [MyAttribute()]
    public virtual string test { get; set; }
}

class Class2 : Class1
{
    [MyAttribute1()]
    public override string test
    {
        get { return base.test; }
        set { base.test = value; }
    }
} 
```

然后从类 2 中获取自定义属性。

```
Class2 a = new Class2();

MemberInfo memberInfo = typeof(Class2).GetMember("test")[0];
object[] attributes = Attribute.GetCustomAttributes(memberInfo, true); 
```

attributes 显示数组中的 2 个元素。

# mysql - MySQL（初学者）：根据查询答案替换另一个表中的字段

> ID：10847689
> 
> 赞同：1
> 
> 时间：2012-06-01T09:25:19.110
> 
> 标签：mysql

我有两张表，一张有怪物的名字和他们各自的分数：

```
CREATE TABLE `mobscores` (
  `name` TINYTEXT NOT NULL ,
  `score` TINYINT NOT NULL
); 
```

和一个在我的服务器上实际杀死的人：

```
CREATE TABLE `mobkills` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `name` tinytext NOT NULL,
  `mob` tinytext NOT NULL,
  `item` smallint(6) NOT NULL DEFAULT '0',
  `date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
); 
```

现在我可以用蛮力的方式将第一个表读入散列（在这里使用 Perl，但这对问题无关紧要。），在告诉 MySQL 我想要杀死一个人之后，逐行读取 mobkills玩家从 $whateverdate 开始，然后使用哈希上的返回 mob 字段来检索分数以添加到总数中。但我知道 SQL 很强大，所以我不需要自己这样做。所以，问题是，我如何告诉 MySQL 交换，甚至一起计算表 mobscores 中得分的暴民名​​称？

像这样的东西（幻想语法传入，因为我不知道真实的语法）：

```
SELECT score (AS score FROM mobscores WHERE name=mob) 
FROM mobkills 
WHERE name= 'McMiner' AND date >= SomeQueryDateToStartFrom; 
```

我不知道 MySQL 是否甚至可以为我加分，这样我就不需要在 Perl 脚本中步行了，但那是可选的。提前致谢。:)

编辑：是的，多亏了 rkosegis 的提示，我得到了这个。:D

```
SELECT name, sum( (SELECT score FROM mobscores WHERE mobscores.name = mobkills.mob)) 
as score 
FROM mobkills group by name order by score desc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:29:19.897

尝试：

```
SELECT (SELECT sum(score) FROM mobscores WHERE mobscores.name = mobkills.name GROUP BY name) as Score
FROM mobkills 
WHERE name= 'McMiner' AND date >= SomeQueryDateToStartFrom; 
```

或者，您可以使用内部连接...

# java - XML 比较 - 略有不同

> ID：10847692
> 
> 赞同：1
> 
> 时间：2012-06-01T09:25:30.663
> 
> 标签：java, xml, xmlunit

这是我要解决的问题。

1.  我有两个包含 XML 文件的文件夹。
2.  一个文件夹 - 可以说是“源”文件夹 - 包含大约 350,000 个 XML 文件。
3.  另一个文件夹 - 可以说是“比较”文件夹 - 包含相同的 350,000 个 XML 文件和更多。
4.  两者中存在的 350,000 个文件具有相同的名称。完全一样的。
5.  但是，“source”中的文件与“compare”中的文件略有不同。比较中的文件可能（也可能没有）有一些额外的节点。
6.  我需要比较“源”和“比较”中的“同名文件”。如果 - 对于“源”中的每个文件 - “源”文件中存在的所有节点都存在于“比较”文件中 - 我需要生成一个好的报告。
7.  如果不是，即
8.  “源”中有一些文件在“比较”中不存在
9.  在“源”的任何文件中，都有一些节点不存在于“比较”的相应文件中
10.  然后我需要创建一个错误报告，其中包含缺少的详细信息。

我目前正在为这个问题寻求 Java + XMLUnit，但不确定是否可以解决它。即使是这样，我也绝对不确定这是否是最佳的工具选择。

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:31:15.587

就个人而言，我只会对整个文件夹进行文件比较，然后当我找到具有相同名称但校验和大小不同的文件时，然后检查节点。如果文件具有相同的名称、相同的大小和相同的校验和，则检查文件是没有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:46:30.730

您需要按步骤进行。

1.  列出您的 350,000 个文件。“比较”文件夹中的这些额外文件与您的问题无关。
2.  通过考虑完全相同的文件来缩小要比较的文件数量。您可以简单地加载它们并比较生成的字符串，就像 Stirng 使用哈希码进行比较一样。
3.  比较两个文件夹中的 xml 文件的实例。我认为最好的方法是使用 XMLUnit。应该看起来像：

    `Diff diff = new Diff(sourceXml, compareXml); if (diff.identical()) { // whatever you want to do }`

当然，如果您的文件不是太大，这种方法效果最好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T12:59:57.937

看看 DeltaXML 产品；它可能比自己编写代码便宜。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T11:14:58.143

第一件事。让我继续记录并说 XMLUnit 是一个宝石。我爱它。如果您正在查看 XML 值/属性/结构等的一些单元测试。您很可能会找到使用 XMLUnit 的现成解决方案。[这是一个很好的起点](http://xmlunit.sourceforge.net/example.html.)。

它是相当可扩展的。它已经带有身份检查（如在 XML 中具有相同的元素和属性以相同的顺序）或相似性检查（如在 XML 中具有相同的元素和属性而不管顺序）。

但是，就我而言，我正在寻找一种稍微不同的用法。我有一个很大的 XML（几百个节点）和一堆 XML 文件（大约 350,000 个）。我不需要比较可以用 XPATH 识别的某些特定节点。它们在 XML 中不一定总是处于相同的位置，但是有一些通用的方法可以用 XPATH 来识别它们。有时，某些节点将根据其他一些节点的值被忽略。只是给一些想法

1.  这里的逻辑是在我想忽略的节点上，即价格。/书店/书[价格>35]/价格

2.  这里的逻辑是在一个相对位置的节点上。我想根据价格的价值忽略作者。这两者是按位置相关的。/书店/书[价格=30]/./作者

经过大量修补后，我选择了一个低技术的解决方案。在使用 XMLUnit 比较文件之前，我使用 XPATH 来屏蔽要忽略的节点的值。

```
 public static int massageData(File xmlFile, Set<String> xpaths, String mask)
        throws JDOMException, IOException {
    logger.debug("Data massaging started for " + xmlFile.getAbsolutePath());
    int counter = 0;

    Document doc = (Document) new SAXBuilder().build(xmlFile
            .getAbsolutePath());

    for (String xpath : xpaths) {
        logger.debug(xpath);
        XPathExpression<Element> xpathInstance = XPathFactory.instance()
                .compile(xpath, Filters.element());
        List<Element> elements = xpathInstance.evaluate(doc);
        // element = xpathInstance.evaluateFirst(doc);
        if (elements != null) {
            if (elements.size() > 1) {
                logger.warn("Multiple matches were found for " + xpath
                        + " in " + xmlFile.getAbsolutePath()
                        + ". This could be a *potential* error.");
            }
            for (Element element : elements) {
                logger.debug(element.getText());
                element.setText(mask);
                counter++;
            }
        }
    } 
```

希望这可以帮助。

# php - 将设置值插入 MySQL 数据库无法正常工作

> ID：10847694
> 
> 赞同：0
> 
> 时间：2012-06-01T09:25:30.850
> 
> 标签：php, mysql

我试图尝试将作品“桃”插入我的“树”表中，其中有以下字段：

ID（自动增量）owner_id tree_type（这是我想要添加“PEACH”的地方）tree_height tree_ammount active

这是脚本

```
<?PHP

session_start();

include 'src/sql_handler.php'; 

include 'src/tree_handler.php';

if(isset($_POST['submitPeach'])) {

$array = array('tree' => $_POST['tree'],);

$handler = new Tree_Handler;

$handler->addPeach($array);

}

?>

<!DOCTYPE HTML>
<html>
<body>

<form method="post" action="<?php echo $PHP_SELF;?>">
<input type="image" src="images/tree/Choose Fruit/fruit1.jpg" name="submitPeach" />    
</form>

</body>
</html> 
```

我的 sql_handler 很好，我知道这一点，因为它用于连接 MySQL 数据库，它可以与我的所有其他脚本一起正常工作。

这是tree_handler.php

```
function addPeach($array) {

    $SQL_CON = new MySQL_Con;

    $SQL_CON->MySQL_Con();

    $tree_type = 'Peach';

    $query = mysql_query("SELECT ID FROM users WHERE email='".mysql_real_escape_string($_SESSION['email'])."'") or die(mysql_error());

    $data = mysql_fetch_array($query);

    $query = mysql_query("INSERT INTO trees(owner_id, tree_type, active) VALUES ('".mysql_real_escape_string($data['ID'])."',[Peach],[0])") or die(mysql_error());

    if (!$query) 
$message  = 'Invalid query: ' . mysql_error();
echo "Added";
die($message);

    $SQL_CON->End_Con();

} 
```

我的问题是，当我单击fruit1.jpg 图片时，它就像加载一样，但什么也不做，将任何内容插入表中，也不给我错误消息。插入表时我必须使用所有列还是我大声只选择 owner_id、tree_type、活动列

**大规模编辑：**

我想匹配用户的电子邮件，然后添加该用户的 ID。（我们在 users 表中有一个称为 ID 的列，它是 users 表中的自动增量）转移到树表 owner_id 列。然后将单词 Peach 插入到 tree_type 列中，如果它的活动与否现在将是 0，因为它不活动，一旦用户单击该 peach 并附加它，仍然有那些 tree_height 和 tree_ammount 列被保留为 NULL 直到他们被带到下一个屏幕，在那里他们以一种有趣的方式与他们选择的树进行交互以选择树的高度，但那是另一个故事和不同的页面。只是想我会让你知道完整的过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:55:35.130

您的查询应如下所示

```
$query = mysql_query("INSERT INTO trees(owner_id, tree_type, active) VALUES
('".mysql_real_escape_string($data['ID'])."','Peach',0)") or die(mysql_error()); 
```

# calculator - Java Calculator Program

> ID：10847695
> 
> 赞同：0
> 
> 时间：2012-06-01T09:25:35.967
> 
> 标签：calculator

I have a program I need to write and was wondering if anyone could give me some pointers. I have written the a lot of the program but need hints on an algorithm because I'm stuck. I am using Java.

I had thought of traversing the file, storing the instruction and number in a 2D array. The array ends when I reach 'Apply'. Does tat sound like a good idea?

Write some code to calculate a result from a set of instructions. Instructions comprise of a keyword and a number that are separated by a space per line. Instructions are loaded from file and results are output to the screen. Any number of Instructions can be specified. Instructions can be any binary operators of your choice (e.g., add, divide, subtract, multiply etc). The instructions will ignore mathematical precedence. The last instruction should be “apply” and a number (e.g., “apply 3”). The calculator is then initialised with that number and the previous instructions are applied to that number.

Example:

[Input from file]
add 2
multiply 3
apply 3

[Output to screen]
15

[Explanation]
(3 + 2) * 3 = 15

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:39:42.253

Rather than using an array, you know that you will have a series of operations of a known type followed by numbers of a known type. So you really want to tokenise it into your own structure that can be created from an operation name and a quantity and then knows how to perform that operation and also how to describe it. Then you can create a file parser which reads each row and returns an operation object relevant to it. You probably use an interface for that, so that your `IMathmaticalOperation` would have a `name`, `symbol`, `number`, and `performOperation( number )` members and then you could have `AdditionOperation`, `SubtractionOperation` and so on that implement it and know how to perform their own operations. This also means if you decided to add new functions to your calculator it would be easy to create new objects implementing that interface without having to change your core code too much. Your file parser can then return an array of IMathmaticalOperations and doesn't have to know the details of how they actually do things, just that they implement the operations correctly.

It also makes it easy to unit test. It sounds like you're just starting out, so learning how to do unit testing now will get you on a good path for the rest of your programming life.

# python - 检查 pyodbc 连接是打开还是关闭

> ID：10847703
> 
> 赞同：12
> 
> 时间：2012-06-01T09:25:55.840
> 
> 标签：python, mysql, odbc, pyodbc

我经常收到这个错误：`ProgrammingError: The cursor's connection has been closed.`

在我尝试执行查询之前，有没有办法检查我正在使用的连接是否已关闭？

我正在考虑编写一个包装器来执行查询。首先它会检查连接是否关闭，如果是，它会重新连接。这是一种明智的做法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T10:08:50.867

包装器是个好主意，但我不知道任何 API 可以可靠地检查连接是否关闭。

所以解决方案是这样的：

```
for retry in range(3):
    try:
        ... execute query ...
        return # Stop on success
    except e:
        if is_connection_broken_error(e):
             reconnect()
             continue
        raise

raise # throw if the retry fails too often 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-07T10:34:39.740

另一种选择是检查您是否可以获得光标（很多时候这就是您想要的连接），否则重新初始化连接。它看起来像这样：

```
try:
    cursor = conn.cursor()
except e:
    if e.__class__ == pyodbc.ProgrammingError:        
        conn == reinit()
        cursor = conn.cursor() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T09:39:42.113

你也可以这样做`duck typing`。使用您需要的东西并捕获异常。99% 的情况下它可能是好的。

# asp.net - nopCommerce - 是代码优先吗？

> ID：10847707
> 
> 赞同：2
> 
> 时间：2012-06-01T09:26:14.233
> 
> 标签：asp.net, entity-framework, nopcommerce

我最近开始研究 nopCommerce 并且从他们的博客中我发现这是一个 Code First approch 开发。但是，我在 nopCommerece 示例中找到了以下文件。

1.  数据.NopModel.csdl
2.  数据.NopModel.ssdl
3.  数据.NopModel.msl

我想知道 SSDL/MSL/CSDL 文件是如何创建的？我知道这些来自整个框架。但是，虽然代码优先开发是如何生成的？

我想知道元数据文件是从哪里生成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T15:31:01.917

Code First 在内部在这些文件中生成 XML，但从不将它们写入磁盘。在普通的 Code First 项目中，您不会有这些文件，但有时查看它们的内容可能对调试很有用。

如果您想从 Code First 获取这些文件，那么您可以使用`EdmxWriter.WriteEdmx()`. 此方法创建的 EDMX XML 包含 throww 部分——一个用于概念模型 (CSDL)，一个用于存储模型 (SSDL)，另一个用于两者之间的映射 (MSL)。

# mysql - mysql在一列中计算某些列的值

> ID：10847708
> 
> 赞同：1
> 
> 时间：2012-06-01T09:26:16.237
> 
> 标签：mysql, select, count

我有那个 MySQL 表：

```
table
| ID | col1 | col2 | col 3|
  1      1      0      1
  2      0      1      1
  3      1      1      1 
```

如何像这样将每一列中的所有 col1、col2、col3 计数到每一行？

```
table
| ID | colnew |
  1      2      
  2      2    
  3      3 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T09:28:22.783

```
SELECT ID, col1 + col2 + col3 AS colnew FROM my_table 
```

# vb6 - 如何在 VB6 中处理 OCR 扫描错误

> ID：10847710
> 
> 赞同：1
> 
> 时间：2012-06-01T09:26:23.383
> 
> 标签：vb6, error-handling, ocr, modi

我试图从图片文档中获取所有信息。其中包括某些部分的手写。在扫描此即时消息时，我的屏幕冻结得像地狱一样，然后给出一个错误，说 VB6 停止工作......我真的不知道是什么原因造成的，所以如果出现错误或 OCR 故障，我只想克服它。可惜还没有成功。这是我到目前为止所做的：

```
Dim Mdoc As MODI.Document
Dim Mlay As MODI.Layout
Dim fso As Scripting.FileSystemObject
Dim logfile As Object

Public Function ScanMan(ByVal Name As String, ByVal Path As String) As String
    Set Mdoc = New MODI.Document
    'Set Mdoc = CreateObject("MODI.Document")
    Set fso = New Scripting.FileSystemObject

    DoEvents
    ''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
    ''''''''''''''''''' Create OCRLog File '''''''''''''''''''
    OCRPath = App.Path & "\OCR Results Log\"
    OCRName = Str(DateTime.Date) & " OCRresults"
    If fso.FolderExists(OCRPath) = False Then
        fso.CreateFolder (OCRPath)
    End If
    If fso.FileExists(OCRPath & OCRName & ".txt") = False Then
        fso.CreateTextFile OCRPath & OCRName & ".txt"
    End If
    Set logfile = fso.OpenTextFile(OCRPath & OCRName & ".txt", ForAppending)
    ''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
    ''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

    On Error GoTo OCRErr
    DoEvents
    Mdoc.Create Path & Name
    Mimg = Mdoc.Images(0).OCR(miLANG_ENGLISH, True, True)
    Set Mlay = Mdoc.Images(0).Layout
    logfile.WriteLine Mlay.Text

    ScanMan = Mlay.Text

    Mdoc.Close False

    Set Mlay = Nothing
    Set Mdoc = Nothing

OCRErr:
    logfile.WriteLine "OCR given (" & Err.Number & ") numbered (" & Err.Description & ") error."
    logfile.Close
End Function 
```

那么我该如何处理这个冻结问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:31:54.193

**尝试这个：**

```
Mdoc.Images(0).OCR
logfile.Write Mdoc.Images(0).Layout.Text 
```

* * *

希望这可以帮助。

# c# - Excel工作表列不包含日期列中的时间但仍使用c#在DataGridView中显示时间

> ID：10847715
> 
> 赞同：1
> 
> 时间：2012-06-01T09:26:51.400
> 
> 标签：c#, excel, date, format, formatting

我正在将 excel 工作表导入 DataGridView。我的 excel 工作表包含一列作为日期，此值为 12-05-2014。导入 DataGridView 后，它显示 12-05-2014 00:00:00。

让我如何在 Windows 应用程序的 DataGridView 中仅显示日期而不显示时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:30:50.707

DateTime 始终包含 Date 和 Time 部分。您可以通过以下方式删除时间部分。

将`DefaultCellStyle.Format`字符串设置`"d"`为该列的 datagridview 中。

或在 aspx 中使用 ToShortDateString

```
<asp:TemplateColumn HeaderText="Upload Date">
    <ItemTemplate>
        <%# ((DateTime)DataBinder.Eval(Container.DataItem, "FileDate")).ToShortDateString() %>
    </ItemTemplate>
</asp:TemplateColumn> 
```

或者

```
dataGridView1.Columns[0].DefaultCellStyle.Format = "MM'/'dd'/'yyyy"; 
```

或者

您可以设置所需的格式：

```
dataGridViewCellStyle.Format = "MM/dd/yyyy";
this.date.DefaultCellStyle = dataGridViewCellStyle;
// date being a System.Windows.Forms.DataGridViewTextBoxColumn 
```

只有在数据绑定之后才应该提及您的单元格格式。

# iphone - 如何将 plist 中的所有键名放入数组中

> ID：10847719
> 
> 赞同：-3
> 
> 时间：2012-06-01T09:27:25.857
> 
> 标签：iphone, ios, plist

我是 iPhone 新手。我有一个小小的疑问是我有一个看起来像这样的 plist

```
key               Type        Value
Genesis           Array       (50items)
Exodus            Array       (40items)
Leviticus         Array       (30items)
Numbers           Array       (20items) 
```

我的疑问是如何将这些所有（键）名称放入一个数组中？也就是说，我想要一个名称为 Genesis、Exodus、Leviticus、Numbers 的数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:32:13.863

看看[allKeys](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/allKeys)；[这将返回NSDictionary 中](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html)包含的所有键

```
NSString *path = [[NSBundle mainBundle] bundlePath];
NSString *finalPath = [path stringByAppendingPathComponent:@"file.plist"];
NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:finalPath];
NSArray *keys=[dict allKeys]; 
```

请注意， allKeys 返回的数组无法反映 plist 中键的顺序，如果要按键排序，则需要`keys`使用一些[比较器](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/sortedArrayUsingComparator%3a)对数组进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:07:22.247

```
NSString *path = [[NSBundle mainBundle] pathForResource: @"yourPlist" ofType: @"plist"]; 
NSDictionary dict = [NSDictionary dictionaryWithContentsOfFile: path];
NSArray *myarray = [dict allKeys];
//NSArray *myarray = [dict allValues];//if Values Required the use allValues... 
```

# spring-rabbit - 如何处理 spring rabbit 中的连接中断？

> ID：10847726
> 
> 赞同：1
> 
> 时间：2012-06-01T09:27:49.220
> 
> 标签：spring-rabbit

如何处理 spring-rabbit 中从我的兔子服务器断开的连接？我需要设置任何特定选项吗？配置如下图：

```
<rabbit:connection-factory id="connectionFactory" host="${rabbitmq.host:rserver1}" port="${rabbitmq.port:5672}"
    username="guest" password="guest" />

<rabbit:template id="amqpTemplate" connection-factory="connectionFactory" />

<rabbit:admin connection-factory="connectionFactory" />

<rabbit:queue name="Q1.${server.name:unknown}"  />
<rabbit:queue name="Q2.${server.name:unknown}"  />

<rabbit:listener-container connection-factory="connectionFactory">
    <rabbit:listener queues="Q2.${server.name:unknown}" ref="q1QueueConsumer" />
    <rabbit:listener queues="Q2.${server.name:unknown}" ref="q2QueueConsumer" />
</rabbit:listener-container>

<rabbit:topic-exchange name="Exchange">

  <rabbit:bindings>
    <rabbit:binding queue="Q1.${server.name:unknown}" pattern="#.Q1.#" />
     <rabbit:binding queue="Q2.${server.name:unknown}" pattern="#.Q2.#" />
  </rabbit:bindings>
</rabbit:topic-exchange> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:11:19.300

Spring rabbit 可以自动处理重新连接到 broker。请小心，因为 1.0.0 版本不能很好地与 RabbitMQ 的 1.8.x 版本配合使用

# .net - 使用 razor 模板在 MVC3 中发送电子邮件

> ID：10847727
> 
> 赞同：3
> 
> 时间：2012-06-01T09:27:51.670
> 
> 标签：.net, asp.net-mvc-3, email, razor

谁能帮我做决定？我在网上看到了一些变体，但我不想使用其他人的一些现成的东西。我想使用 .net 提供的可能性来创建自己的功能。

任何帮助将不胜感激。提前谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T09:43:01.923

这样做真的很简单：

```
 var emailModelData = new
            {
                Name = "John Someone",

                OrganizationName = "OragnizationName"

            };

            var templatePath = physicalApplicationPath +
                @"EmailTemplates\" + Mail.Default.WelcomeMailTemplate + ".cshtml";

            var template = System.IO.File.ReadAllText(templatePath, Encoding.Default);
            var body = Razor.Parse(template, emailModelData);

            //this is doesnt matter it is just and object which i pass to the SendEmail function below
            var simpleMailMessage = new SimpleMailMessage
            {
                To = recipientEmail,
                From = Mail.Default.From,
                Body = body,
                IsBodyHtml = true,
                ReplyTo = Mail.Default.ReplyTo,
                Subject = "subject blah blah"
            };
            //If using a test mail address. Used in development
            if (Mail.Default.SendToTestEmailAddress)
            {

                simpleMailMessage.Bcc = string.Empty;
                simpleMailMessage.CC = string.Empty;
                simpleMailMessage.To = Mail.Default.TestEmailAddress;
            }
//see below the code for the SendEmail funciton
            _email.SendEmail(simpleMailMessage, null, Constants.WEBSITE_SOURCE_NAME); 
```

//------------------------------------------------ --------

```
public bool SendMail(SimpleMailMessage mail)
        {

            using (var client = new SmtpClient()) 
            {
                try
                {
                    var email = CreateMailMessage(mail);
                    client.Send(email);
                    return true;

                }
                catch (Exception exception)
                {
                     return false;

                }

            }
            return false;

        }

        private static System.Net.Mail.MailMessage CreateMailMessage(SimpleMailMessage mail)
        {
            var msg = new System.Net.Mail.MailMessage();

            if (!string.IsNullOrEmpty(mail.From))
                msg.From = new MailAddress(mail.From);

            if (!string.IsNullOrEmpty(mail.Subject))
                msg.Subject = mail.Subject;

            if (!string.IsNullOrEmpty(mail.Body))
                msg.Body = mail.Body;

            msg.IsBodyHtml = true;

            if (!string.IsNullOrEmpty(mail.Sender))
                msg.Sender = new MailAddress(mail.Sender);

            if (!string.IsNullOrEmpty(mail.To))
                msg.To.Add(new MailAddress(mail.To));

            if (!string.IsNullOrEmpty(mail.ReplyTo))
                msg.ReplyToList.Add(new MailAddress(mail.ReplyTo));

            if (!string.IsNullOrEmpty(mail.CC))
                msg.CC.Add(new MailAddress(mail.CC));

            if (!string.IsNullOrEmpty(mail.Bcc))
                msg.Bcc.Add(mail.Bcc);

            return msg;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:37:47.270

这里有几个链接可能会有所帮助

## [邮政](http://aboutcode.net/postal/)

这是相关的博客文章[http://aboutcode.net/2010/11/17/going-postal-generating-email-with-aspnet-mvc-view-engines.html](http://aboutcode.net/2010/11/17/going-postal-generating-email-with-aspnet-mvc-view-engines.html)

# android - 如何获取我在 onDraw 中获得的画布的位图？

> ID：10847728
> 
> 赞同：26
> 
> 时间：2012-06-01T09:27:57.157
> 
> 标签：android, android-canvas

如何从自定义视图的画布创建位图。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-06-03T13:11:52.120

虽然画布没有`getBitmap()`函数，但由于您正在制作自定义视图，您可以做的是在视图类中编写这样的函数。

```
public Bitmap get(){
   return this.getDrawingCache();
} 
```

这将返回视图的位图，但重要的是在**所有**构造函数中添加它，

```
this.setDrawingCacheEnabled(true); 
```

否则`getDrawingCache`会返回`null`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-01T09:31:31.500

没有办法`Bitmap`从`Canvas`. 您可以访问它的唯一方法是在创建这样的画布时自己传递它`new Canvas(myBitmap)`并保留参考。

EDIT2：请参阅@Alex 评论打击 - 将 a 传递`Bitmap`给 the的方法`Canvas`似乎不适用于最新版本的 Android。

编辑：如果您不`Canvas`自己创建，您可以创建一个屏幕大小`Bitmap`（或您需要的任何大小），然后将其传递给`Canvas`in`onDraw`调用，如下所示`canvas.setBitmap(myBitmap)`：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T10:02:59.277

我发现 Canvas 有一个 setBitmap 函数，但没有一个 getBitmap 函数。这很奇怪，但无论如何，它使我能够自己创建位图并将其传递给画布，保留参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-10T10:40:08.497

getDrawingCache() 在 API 28 中已弃用。

所以现在您可以在自定义视图中使用以下代码

```
Bitmap bitmap = Bitmap.createBitmap(getWidth(), getHeight(), Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas(bitmap);
draw(canvas);
// return bitmap; -- this is the bitmap you need 
```

如果您想在自定义视图之外使用此代码，请使用 viewInstance.getHeight()... viewInstance.draw(canvas) 之类的方法将在位图上绘制视图

# java - 用于单元测试的 Mock dao

> ID：10847733
> 
> 赞同：1
> 
> 时间：2012-06-01T09:28:25.980
> 
> 标签：java, hibernate, unit-testing, generics, junit

我想开发我的 dao 类的 Mock。如何模拟我的 GenericDao 的以下方法？：

```
 public List<T> getList(int max, int p) throws DataAccessException {
    String t= type.getT();
    String sql = "from " + t+ " order by id desc";
    List<T> o= HibernateUtils(type, this.getSession().createQuery(sql).setFirstResult(max* (p- 1)).setMaxResults(max).list());
    return o;
} 
```

这里面的东西：

```
 @Override
public List<T> getList(int maxResults, int pageNumber) {
    List<T> list = new ArrayList<T>();

    //......

    return list;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:00:31.213

调用`getList()`然后使用`subList()`结果上的方法将其切成页面。

您将希望将其`LinkedHashMap`用作地图实现，以确保值的顺序不会改变。

试试这个：

```
@Override
public List<T> getListByPage(int maxResults, int pageNumber) {
    List<T> list = getList();

    if( list.size() > maxResults ) {
        list = list.subList( 0, maxResults );
    }

    int start = pageNumber * pageSize;
    int end = Math.min( start + pageSize, list.size() );

    if( list.size() < start ) {
        list = new ArrayList<T>();
    } else {
        list = list.subList( start, end );
    }

    return list;
} 
```

# java - 带有多个 wsdl 文件的 JAX-WS wsimport

> ID：10847734
> 
> 赞同：3
> 
> 时间：2012-06-01T09:28:26.610
> 
> 标签：java, jax-ws, webservice-client

我正在尝试编写许多 Web 服务客户端。我收到了许多 wsdl，所有这些都引用了许多常见的数据结构。

我想使用 wsimport 来生成 Web 服务客户端 jar 文件。我正在运行的命令是

```
wsimport src/*wsdl -d target 
```

首先，这似乎是合理的做法吗？

如果我运行，`wsimport src/srv1.wsdl -d target`我会得到似乎是一组合理的 java 类。同样，如果我跑步，`wsimport src/srv2.wsdl -d target`我也会得到一组合理的课程。

但是，如果我运行`wsimport -d targey src/srv1.wsdl src/srv2.wsdl`我会生成大量的类，但没有创建 srv2 中的服务类。我希望找到它的包裹在那里，但它是空的。

我正在使用作为 JDK6 一部分的基本 wsimport

我在这里做错了吗？

戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T04:34:41.537

我在当前项目中使用 wsimport 为 wcf webservice 导入 wsdl 文件。我不知道您是否可以在单个 wsimport 语句中指定要导入的多个 wsdl 文件，但是，您可以使用以下方式单独处理每个 wsdl 文件：

```
wsimport -d <directory-for-generated-classes> <wsdl-file-location> 
```

这里 -d 用于指定要放置已编译类的目录（替换为要放置已编译类的目录的路径。如果不指定目录，则放置已编译类在当前工作目录中）

如果你也想生成源 java 文件，那么你可以使用类似的东西：

```
wsimport -d <directory-for-generated-classes> -s <directory-for-generated-source> <wsdl-file-location> 
```

-s 用于指定要放置生成的源 java 文件的目录。

如果要生成包含特定 wsdl 文件的所有已编译类文件的 jar 文件，则可以使用以下内容：

```
wsimport -d <directory-for-jar-file> -clientjar jarfilename.jar <wsdl-file-location> 
```

这会将 jar 文件放在指定目录中，但不会保留生成的编译类文件。所有的类文件都打包在 jar 中。

您可以通过发出以下命令查看其他选项：

```
wsimport -help 
```

关于处理多个 wsdl 文件，您可以创建一个批处理文件来处理在每行中使用单个 wsimport 语句指定的多个 wsdl 文件。

希望能帮助到你 ：）

# java - KSOAP 解析错误：- java.lang.ClassCastException: org.ksoap2.SoapFault

> ID：10847735
> 
> 赞同：2
> 
> 时间：2012-06-01T09:28:29.623
> 
> 标签：java, android, ksoap

我对 ksoap Parsing 有一点了解。当我解析一些数据时，它会给出错误：

`java.lang.ClassCastException: org.ksoap2.SoapFault`

[我可以在SoapUI](http://www.soapui.org/)中看到该方法的响应，但是当我在 android 中解析该方法时，它会出现如上所述的错误。

这是 SoapUI 中作为输入的请求参数

```
 <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/">
        <soapenv:Header/>
        <soapenv:Body>
           <tem:SaveChangePasswordForExternalUser>
              <tem:userId>Test123</tem:userId>
              <!--Optional:-->
              <tem:oldPassword>TestTest</tem:oldPassword>
              <!--Optional:-->
              <tem:newPassword>Test</tem:newPassword>
              <!--Optional:-->
              <tem:retypedNewPassword>Test</tem:retypedNewPassword>
           </tem:SaveChangePasswordForExternalUser>
        </soapenv:Body>
     </soapenv:Envelope> 
```

这是我在 SoapUI 中得到的响应

```
 <s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body>
      <s:Fault>
         <faultcode xmlns:a="http://schemas.microsoft.com/net/2005/12/windowscommunicationfoundation/dispatcher">a:InternalServiceFault</faultcode>
         <faultstring xml:lang="en-US">Old Password was incorrectly entered. Remember that passwords are case-sensitive.</faultstring>
         <detail>
            <ExceptionDetail xmlns="http://schemas.datacontract.org/2004/07/System.ServiceModel" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
               <HelpLink i:nil="true"/>
               <InnerException i:nil="true"/>
               <Message>Old Password was incorrectly entered. Remember that passwords are case-sensitive.</Message>       
               <Type>System.Web.Services.Protocols.SoapException</Type>
            </ExceptionDetail>
         </detail>
      </s:Fault>
   </s:Body>
</s:Envelope> 
```

这就是我尝试通过android中的代码获得响应的方式

```
public void getData()
    {

        private static final String NAMESPACE = "http://tempuri.org/"; //
        private static final String URL = "http://173.203.136.194:99/LeaseWave.MobileApplication.Service/MobileApplicationService.svc/basic";
        private static final String SOAP_ACTION = "http://tempuri.org/IMobileApplicationService/SaveChangePasswordForExternalUser";
        private static final String METHOD_NAME = "SaveChangePasswordForExternalUser";

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("userId", "Test123");
        request.addProperty("oldPassword", "TestTest");
        request.addProperty("newPassword", "Test");
        request.addProperty("newPassword", "Test");

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        try {

            androidHttpTransport.call(SOAP_ACTION, envelope);
            SoapObject resultsRequestSOAP = (SoapObject) envelope.bodyIn;

            Log.i("Long...", "Response  ------ "+resultsRequestSOAP);

        }catch (Exception e)
        {
            e.printStackTrace();
        }

    } 
```

但我没有得到成功。有人对此有任何提示或解决方案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T07:19:15.457

当您处理 SOAP Web 服务时，这个问题可能会出现一段时间。来自服务的响应可以是**SOAP 对象**，如果出现错误，例如传递了错误的凭据，则 Response 会带有错误消息，并且它是**SOAPFAULT 对象**。因此，请更新您的解析代码以检查响应对象的类型。

这种代码可以解决你的问题，

```
 if (envelope.bodyIn instanceof SoapFault) {
        String str= ((SoapFault) envelope.bodyIn).faultstring;
        Log.i("", str);

        // Another way to travers through the SoapFault object
    /*  Node detailsString =str= ((SoapFault) envelope.bodyIn).detail; 
        Element detailElem = (Element) details.getElement(0) 
                     .getChild(0); 
        Element e = (Element) detailElem.getChild(2);faultstring; 
        Log.i("", e.getName() + " " + e.getText(0)str); */
    } else {
        SoapObject resultsRequestSOAP = (SoapObject) envelope.bodyIn;
        Log.d("WS", String.valueOf(resultsRequestSOAP));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T10:18:19.910

请进行更改:::

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("tem:userId", UserId);
        request.addProperty("tem:oldPassword",OldPasssword);
        request.addProperty("tem:newPassword", NewPassword);
        request.addProperty("tem:retypedNewPassword", NewPasswordAgain); 
```

您需要传递准确的标记名称才能将值放入 Web 服务的方法中，就像将值指定为方法的准确参数名称一样。

让我知道是否还有其他问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:03:52.497

我相信错误在这里：

```
Log.i("Long...", "Response  ------ "+resultsRequestSOAP); 
```

ClassCastException 可能是因为将 SOAP 对象“resultsRequesSOAP”静默转换为字符串。我不确定 .toString() 是否有效，但尝试返回一些内容并使用 SOAPObject 的 getProperty() 方法获取它。看看这是否有效。

如果不是，请发布错误日志并进行调试，看看问题到底出在哪里。哪条线...

# css - SCSS/Sass Compass：如何定位重复的选择器

> ID：10847738
> 
> 赞同：3
> 
> 时间：2012-06-01T09:28:41.760
> 
> 标签：css, sass, compass-sass

我刚刚继承了一个不错的小项目，其中由于 IFrame，CSS 被拆分为多个小 CSS 文件。

因此，现在我将所有内容链接在一起并将其放入 SCSS 中，我发现自己有大量重复的选择器，它们的样式完全相同。

我猜罗盘 SCSS 中有一个不错的小选项可以让它“建议”重复标签

谁能指出我正确的方向？

干杯，
杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:40:16.933

不久前我遇到了同样的问题，最终结果是我编写了一个快速的 Sasslint 工具来解析 .sass 文件并输出每个重复选择器的行号：[https ://github.com/dfltr/Sasslint](https://github.com/dfltr/Sasslint)

我还没有更新它以明确支持 SCSS，我也不知道是否需要进行任何修改，但这对你来说可能是一个很好的起点。

# iphone - 如何在 iOS 中实现“触摸状态栏滚动到顶部”？

> ID：10847742
> 
> 赞同：2
> 
> 时间：2012-06-01T09:28:57.273
> 
> 标签：iphone, ios

情况：嵌入在滚动视图中的 tableView

我搜索了一些问题，有人说将scrollView的scrollsToTop设置为NO（scrollView.scrollsToTop = NO;）会起作用。我试过了，但是没有用...

感谢您的帮助

编辑...

我现在知道原因是因为我在滚动视图中嵌入了不止一个表格视图，所以我应该将除我所在的视图之外的所有其他视图设置为“scrollsToTop = NO;” :-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T09:34:45.470

尝试将其设置`scrollsToTop`为父`NO`滚动视图，并将其设置`YES`为表视图。

# ios - UINavigationBar 强制标题视图在后面居中

> ID：10847744
> 
> 赞同：1
> 
> 时间：2012-06-01T09:29:18.737
> 
> 标签：ios, alignment, uinavigationbar, title, back

我已经为我的导航栏实现了一个自定义标题视图，其中包含一个图像和一个标签。通过将其 origin.x 设置为 10 像素，此视图与栏的左侧对齐。

到目前为止一切顺利，但是当我按下视图控制器然后返回主屏幕时，标题视图居中而不是位于左侧。

我尝试将其左右栏按钮项设置为 nil 并将其 origin.x 设置为 10，但似乎没有任何效果。我尝试了 viewWillAppear 和 viewDidAppear：

```
CGRect frame = self.navigationItem.titleView.frame;
frame.origin.x = 10;
self.navigationItem.titleView.frame = frame;

self.navigationItem.backBarButtonItem = nil;
self.navigationItem.leftBarButtonItem = nil; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:55:19.377

首先，您应该在 viewDidLoad 中设置 navigationItem（在调用 [super viewDidLoad] 之后）而不是 viewWill/DidAppear。

您是否仅在第二个视图控制器上设置了 navigationItem 而不是主 vc ？？？

如果是这样，您需要在两者上设置 navigationItem，或者在两个视图控制器都应子类化的基本视图控制器类中。

# xmpp - 它是否需要通过本地安装的 ejabberd 服务器对音频/视频聊天进行任何配置更改？

> ID：10847746
> 
> 赞同：1
> 
> 时间：2012-06-01T09:29:23.857
> 
> 标签：xmpp, ejabberd

我已经在本地安装并配置了 ejabberd，使用 Pidgin 作为客户端。我的问题是，如何使用本地 ejabberd 服务器进行音频/视频聊天？我是否需要安装任何其他模块，或进行任何配置更改`ejabberd.cfg`？（我使用的是 Centos 6、32 位。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:58:03.827

使用 XMPP 叮当协议的音频和视频开箱即用，适用于每个 XMPP 兼容服务器。不需要额外的配置。

# dependency-injection - 静态成员的 Unity DI（例如在静态类程序中）/何时填充成员

> ID：10847748
> 
> 赞同：1
> 
> 时间：2012-06-01T09:29:28.410
> 
> 标签：dependency-injection, unity-container, enterprise-library

我正在尝试从统一开始，我正在寻求解决这个特定问题的帮助：我已经了解依赖注入/统一是什么以及如何以编程方式执行此操作，但我不明白成员是如何/何时填充的标有依赖属性。

```
class Program
{
    static Program()        
    {
        uContainer = new UnityContainer();
        var section =   (UnityConfigurationSection)ConfigurationManager.GetSection("unity");
        section.Configure(uContainer);
    }

    private static IUnityContainer uContainer;

    [InjectionMethod]
    public static void InjectTrace(ITraceManager traceManager)
    {
        trace = traceManager;
    }

    [Dependency]
    public static ITraceManager trace { get; set; }// = /*new WebTraceManager("C:\\","trace",true);//*/new EnterpriseLibaryLoggingWrapper(false);

    static void Main(string[] args)
    {
        //Programmatically inject dependency
        // TODO: Do this via attributes
        //UnityContainer myContainer = new UnityContainer();
        //UnityConfigurationSection section = (UnityConfigurationSection)ConfigurationManager.GetSection("unity");

        //section.Containers["containerOne"].Configure(myContainer);
        //trace = myContainer.Resolve<ITraceManager>();
        trace.ProgramStatus("Start");
        trace.ProgramStatus("End");
        Console.ReadLine();
    }
} 
```

Main 中以编程方式设置跟踪属性的未注释部分工作正常。但是使用属性“依赖”属性将不会被填充。是否缺少对统一容器的调用？谢谢您的帮助。

根据史蒂夫的建议，我更改了示例，使用实例而不是静态类：

```
 static Program()
    {
        uContainer = new UnityContainer();
        var section = (UnityConfigurationSection)ConfigurationManager.GetSection("unity");
        section.Configure(uContainer);
        Instance = uContainer.Resolve<Program>();
    }

    Program(ITraceManager traceManager)
    {
        trace = traceManager;
    }

    static readonly Program Instance;

    //Do not use Dependency Attribute
    //[Dependency]
    public  ITraceManager trace { get; set; }// = /*new WebTraceManager("C:\\","trace",true);//*/new EnterpriseLibaryLoggingWrapper(false);

    static void Main(string[] args)
    {          
        Instance.Run();
    }

    void Run()
    {            
        trace.ProgramStatus("Start");
        trace.ProgramStatus("End");
        Console.ReadLine();
    } 
```

但是打电话的时候

```
Instance = uContainer.Resolve<Program>(); 
```

，我收到一个异常告诉我，该程序未在容器中注册。那是真的，但是 Unity 不应该通过程序代码已知类型的 Program 来返回具有已解决依赖关系的程序吗？我在网上找到的例子总是像这样使用构造函数注入

```
IUnityContainer uContainer = new UnityContainer();
MyObject myInstance = uContainer.Resolve<MyObject>(); 
```

终于找到了注入构造函数示例的问题，当然构造函数必须是PUBLIC。异常消息让我有点困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T09:43:22.277

几点：

*   您目前似乎完全用 XML 配置容器。**不要那样做！**您应该只配置在 XML 中构建（部署配置）后可以实际更改的依赖项。其余的，使用基于代码的配置，因为基于 XML 的配置非常脆弱，缺乏编译时支持，缺乏智能感知支持，缺乏表现力。
*   **不要使用方法注入**来初始化组件。这导致了[时间耦合](http://blog.ploeh.dk/2011/05/24/DesignSmellTemporalCoupling/)。注入依赖的主要方式是使用构造函数注入。定义对构造函数参数的所有依赖项。所有具有依赖关系的类型都应该有一个包含所有需要的依赖关系的[公共构造函数。](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=97)Unity 将自动找到该构造函数并知道如何调用该构造函数并注入依赖项。
*   **根本不要使用属性！**这会将您的代码与使用的容器耦合，而应用程序代码应该忽略 DI 容器的存在。同样，坚持构造函数注入。

# ruby-on-rails-3 - 将 find_by_sql 与 RSPEC 一起使用时缺少属性

> ID：10847753
> 
> 赞同：0
> 
> 时间：2012-06-01T09:29:39.643
> 
> 标签：ruby-on-rails-3, rspec, find-by-sql

我使用在开发中运行良好的 find_by_sql 语句。当涉及到使用规范的测试环境时，它会输出错误：

ActiveModel::MissingAttributeError：缺少属性：已注册

我已经运行 db:test:purge 和 db:test:prepare 来清理测试数据库。但错误仍然发生。在开发和测试中，我使用 PostgreSQL。

有问题的陈述如下：

```
def registered_friends
  User.find_by_sql(
  ["select users.id, users.first_name from users inner join friendships
    on users.id=friendships.friend_id
    where friendships.user_id = ?
    and users.registered = true",self.id])
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:54:12.240

谢谢塞巴斯蒂安，

我发现了问题。在我的模型中，我初始化字段“已注册”以将其默认设置为“假”。由于 SQL 查询没有返回“已注册”字段，因此它在这一点上中断了。我在它也进入开发阶段后发现它。

# java - 如何用扩展集合中对象的不同对象数组填充集合

> ID：10847757
> 
> 赞同：0
> 
> 时间：2012-06-01T09:30:09.363
> 
> 标签：java, arrays, object, casting, set

## 如何用扩展集合中对象的不同对象的数组（对象 []）填充集合。

我得到了这个对象数组，我想将它转换成一组对象，扩展数组中的对象，如下所示：

```
 Object[] a = new Object[1];
    a[0] = new SomeObject();
    Set<SomeObject> aSet = new HashSet<SomeObject>(a); 
```

如果不可能像这样将数组转换为 Set ，那么是否可以将数组转换为 List ？

注意：如果你想达到这个循环方式，如下所示：

```
Object[] a = new Object[1];
a[0] = new SomeObject("Something");
Set<SomeObject> aSet = new HashSet<SomeObject>();

for(int i = 0; i < a.length; i++){
aSet.add((SomeObject)a[i])  
} 
```

但我不想这样做循环方式。
**编辑：** 是的......我知道所有对象都扩展了 java.lang.Object 类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T09:51:33.690

回应 OP 最近的评论：

> 不知何故，我无法将此 List 转换为 Set，因此我让该方法将 List 转换为 Array 并返回该 Array

在这种情况下，您可以简单地这样做：

```
List<SomeObject> list = ...
Set<SomeObject> set = new HashSet<SomeObject>(list); 
```

重要的是：此代码**与强制转换完全无关**！实际发生的是你有一个`List`对象，你创建一个新`Set`的并将列表中的所有元素复制到其中。**此操作不会**修改原始列表。

重复我的评论，您显然误解了 Java 中的强制转换意味着什么。对象转换的工作方式与原始值转换非常不同。请阅读有关此主题的一些文章，例如： [http ://www.volantec.biz/castingObjects.htm](http://www.volantec.biz/castingObjects.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T09:36:37.963

你首先决定你想用你的 UserObject 做什么。无论您是将所有内容保存`UserObject`在一个数组中，还是将它们保存在任何集合中。

存储两次对我来说意义不大，你只是消耗更多的内存。

编辑：

在这种情况下，请使用以下内容。

```
Set<T> mySet = new HashSet<T>(Arrays.asList(someArray)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T09:36:41.390

声明`Object[] a = new Object[1];` 为`SomeObject[] a = new SomeObject[1];`

使用以下代码：

```
SomeObject[] a = new SomeObject[1]
a[0] = new SomeObject();
Set<UserObject> aSet = new HashSet<UserObject>(Arrays.<UserObject> asList(a)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T09:35:54.407

```
Object[] a = new Object[3];
a[0] = new String("SAMIR1");
a[1] = new String("SAMIR2");
a[2] = new String("SAMIR3");
Set<Object> aSet = new HashSet<Object>(Arrays.<Object> asList(a));
System.out.println(aSet); 
```

# delphi - Turbopower Lockbox3 - 我可以控制 AES-256 加密的初始化向量和填充吗？

> ID：10847759
> 
> 赞同：2
> 
> 时间：2012-06-01T09:30:17.020
> 
> 标签：delphi, aes, lockbox-3

在从 Delphi2007 迁移到 XE2 的过程中，我们正在考虑将加密库从 DCPCrypt 切换到 Turbopower Lockbox 3。

a) 在 DCPCrypt 中，我对初始化向量有明确的控制。如何在 TPLB3 中设置 IV？

b) DCPCrypt 没有填充，我们在加密前用零填充明文。TPLB怎么垫？当然，我们仍然可以自己做。

## 测试向量

*   密码 = AES-256；
*   链接模式 = CBC；
*   终止 = C# 样式全零填充；
*   IV 传输 = 以明文形式预先在密文流中的完整块。
*   密钥 = 33d46cffa158533194214a91e712fc2b45b587076675affd910edeca5f41ac64 little-endien
*   IV = 917fe226df8308f4d96c33304768354a
*   密文 = +kdTGzdV5KZIw8tv466nhQ== (base64)
*   明文 = 'a_decent_text' (ansistring)

谢谢简

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T12:13:03.357

**a) 四**

让我先说您可能正在尝试解决一个不需要解决的问题。密码箱 3 是自动加盐的。这意味着在大多数情况下，会自动生成一个 64 位随机数并将其插入 IV。随机数值通过插入密文流的方式传输。结果是您可以使用 TCodec 组件而无需编写单行代码来管理 IV，并且您仍然可以获得加盐的所有加密优势（基本上意味着不可预测的 IV）。这与 DCPCrypt 形成对比，在 DCPCrypt 中，您要么将 IV 归零，要么自行管理 IV。

我无法想象除了“已知测试答案”测试之外的场景，您希望或需要覆盖此行为，但话虽如此，如果您真的想坚持设置自己的 IV，如果您有 cvs 客户端，您可以下载修订版 231（尚未“稳定发布”状态），并实现 TCodec 组件的 OnSetIV() 事件处理程序以将 IV 设置为您的自定义值。由于 IV 与消息一起传输，因此在解密时无需执行此步骤。

如果您想要一些演示代码，请告诉我。

**b）填充**（从第一篇文章中更正。抱歉错误。）

这取决于链接方法。当使用标准流到块适配器时，在以下情况下处理终止。

*   **零长度消息**：

零长度消息被加密为零长度密文。

*   **欧洲央行模式**：

对于 ECB 模式 Lockbox 3 使用 ISO/IEC 9797-1 方法 2 填充。ISO/IEC 9797-1 方法 2 本质上是一个字节的填充，其值为 $80，后跟到达下一个块边界所需的零字节。

*   **不是欧洲央行，但消息是块对齐的**：

没有填充。不需要特殊的终止处理。

*   **密钥流模式**（例如 OFB）

没有填充。通过截断处理终止。

*   **其他**（如CBC）

没有填充。终止是通过密文窃取来处理的，这“对学校来说太酷了”！如果消息太短而无法窃取密文（少于 2 个块），则它会自动切换到 CFB-8 位并视为密钥流。

* * *

# 更新

## 警告

LockBox 3 从未设计用于与 CSharp 风格的用户管理 IV 和全零填充的互操作性。（恕我直言，这种类型的填充是有问题的，应该避免使用）。

以下代码片段演示了从注释中给出的测试向量中解密 LockBox3。假设密文流前面带有完整的 IV，并且加密编解码器使用（令人讨厌的）全零填充。

```
procedure TForm5.Button1Click(Sender: TObject);
const
  Key: ansistring = #$33#$d4#$6c#$ff#$a1#$58#$53#$31#$94#$21#$4a#$91#$e7#$12#$fc#$2b +
                       #$45#$b5#$87#$07#$66#$75#$af#$fd#$91#$0e#$de#$ca#$5f#$41#$ac#$64;
  Reference_Plaintext: ansistring = 'a_decent_text';
  IV: ansistring = #$91#$7f#$e2#$26#$df#$83#$08#$f4#$d9#$6c#$33#$30#$47#$68#$35#$4a;
var
  Stream, ReconStream: TStream;
  Cipherb64: ansistring;
  Recon_Plaintext: ansistring;
begin
Stream := TMemoryStream.Create;
Stream.WriteBuffer( Key[1], Length( Key));
Stream.Position := 0;
CryptographicLibrary1.RegisterStreamCipher( StreamToBlock_Adapter_CSharpVariant);
Codec1.StreamCipherId := 'CSharp.StreamToBlock';
Codec1.BlockCipherId  := Format( AES_ProgId, [256]);
Codec1.InitFromStream( Stream);
Stream.Size := 0;
Stream.WriteBuffer( IV[1], Length( IV));
Cipherb64 := '+kdTGzdV5KZIw8tv466nhQ==';
Base64_to_stream( Cipherb64, Stream);
ReconStream := TMemoryStream.Create;
Stream.Position := 0;
Codec1.DecryptStream( ReconStream, Stream);
ReconStream.Position := 0;
SetLength( Recon_Plaintext, ReconStream.Size);
ReconStream.ReadBuffer( Recon_Plaintext[1], Length( Recon_Plaintext));
SetLength( Recon_Plaintext, StrLen( PAnsiChar( Recon_Plaintext)));
ReconStream.Free;
Stream.Free;
if Recon_Plaintext = Reference_Plaintext  then
    ShowMessage( 'Test passed! LockBox3 decrypts from CSharp-style zero padding.')
  else
    ShowMessage( 'Test failed!')
end; 
```

## 需要注意的几点：

1.  假设您在设计时可能在表单上预先创建了 TCodec 和 TCryptographicLibrary（建议命名）。
2.  TCodec 的链接模式和其他属性已在设计时设置。对于我们的测试向量，它应该设置为 CBC 。
3.  给定的流到块适配器是一个特殊的适配器，通常不包含在密码库中。这就是为什么有一行代码可以显式注册它的原因。
4.  您将需要一个 CVS 客户端从 TurboPower LockBox 3 CVS 存储库下载最新版本。这个适配器还没有在正式的稳定版本中。
5.  使用此适配器，您只能解密。CSharp 兼容的加密尚不可用。（让我知道您是否需要尽早而不是稍后）。
6.  我在 Delphi 2007 和 Delphi 2010 上对其进行了测试。它对我有用。

* * *

# 更正

最大短消息长度，即对于经典密文流将被视为太短的明文消息的最大长度，因此将其链接模式视为密钥流（CFB 8位），是一字节小于一个块，（不是前面所说的“小于 2 个块”）。一个半块消息仍然可以使用密文窃取作为其块量化方法。半块消息不能。

# java - 使用 ibatis 将 HashMap 值插入到表中

> ID：10847761
> 
> 赞同：3
> 
> 时间：2012-06-01T09:30:30.923
> 
> 标签：java, sql, hashmap, ibatis

我在[http://old.nabble.com/insert-statement-td21157498.html](http://old.nabble.com/insert-statement-td21157498.html)上找到了这个 我想做同样的事情。我的表中有两列。我可以通过映射 hashmap 键来插入 hash map 值到列名。现在我想将键值对放在表中，而不考虑键名。

从上面的链接粘贴。

我想写一个动态插入语句，但是字段和值都是动态的。

我是说

```
<insert id="someIDhere" parameterClass="java.util.HashMap">

    insert into table_one (

        !!! dynamic list of keys from the HashMap

    ) values (

        !!! values

    );

  </insert> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:08:16.930

哈希图可以是：

```
 HashMap<String,Integer> hm = new HashMap<String, Integer>();
    hm.put("col1", 1);
    hm.put("col2", 23);
    hm.put("col3", 34); 
```

然后以 hm 作为参数调用 insert someIDhere。

```
insert into table_one (

    COLUMN1, COLUMN2, COLUMN3

) values (

    #col1#, #col2#, #col3#

); 
```

# java - 如何在java中创建一个带有2个特定字符串的随机字符串作为输入？

> ID：10847763
> 
> 赞同：0
> 
> 时间：2012-06-01T09:30:44.167
> 
> 标签：java

我有一个函数，它接受 2 个字符串，比如用户名和密码作为参数。我需要使用这两个字符串作为输入生成一个随机用户 ID。任何人都可以提出解决方案吗？

`generateUserId(String userName, String password)`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:41:42.040

这可能会有所帮助：`http://docs.oracle.com/javase/1.5.0/docs/api/java/util/UUID.html` 摆弄它。

```
String res = UUID.nameUUIDFromBytes((password+username).getBytes()).toString();
System.out.println(res); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:35:34.463

像这样的东西怎么样

```
int seed = userName.hashCode() & password.hashCode(); 
return new String(new Random(seed).nextLong()); 
```

# python - 从 Git 存储库安装 Python 包后，缺少一些文件夹

> ID：10847764
> 
> 赞同：7
> 
> 时间：2012-06-01T09:30:47.407
> 
> 标签：python, pip, setup.py

我想从以下 repo [https://github.com/geomin/django-countria](https://github.com/geomin/django-countria)安装一个包。我使用的命令是`pip install git://github.com/geomin/django-countria.git`. Pip 将 repo 克隆到一个临时文件夹，然后运行`setup.py`​​. 问题是安装完成后，包含`site_packages`文件`countria-0.8-py2.7.egg/countria/models.py`，`countria-0.8-py2.7.egg/countria/__init__.py`但没有文件夹。如果我克隆包并运行，我会得到相同的行为。`fixtures``locale``setup.py`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T09:40:37.040

包缺少固定装置和东西的原因是这个 repo 中没有[MANIFEST](https://github.com/yourlabs/django-autocomplete-light/blob/master/MANIFEST.in "点击查看示例")。

尝试安装开发：

```
pip install -e git+git://github.com/geomin/django-countria.git#egg=countria 
```

或者，克隆包并运行：

```
pip install -e path/to/clone 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:17:19.637

我可以在开发模式下安装包是正确的，但是由于我需要在版本控制系统中工作而不对 src/ 文件夹进行版本控制，所以我需要使用 pip 使其工作。我尝试使用 MANIFEST.in 文件，但似乎 MANIFEST 在不同的 python 版本之间无法正常工作，或者它不会直接影响要安装的文件。所以解决方案是在 setup.py 中添加所需的文件作为包数据和附加文件。 [http://docs.python.org/distutils/setupscript.html#installing-package-data](http://docs.python.org/distutils/setupscript.html#installing-package-data) 相关问答：[https ://stackoverflow.com/a/3597263/812501](https://stackoverflow.com/a/3597263/812501)

# php - 我可以在打字时使用 jQuery 更新 PHP 会话吗？

> ID：10847767
> 
> 赞同：2
> 
> 时间：2012-06-01T09:30:55.183
> 
> 标签：php, jquery, ajax, session, real-time

我有一个文本区域。我想在用户输入时更新服务器上的 PHP 会话。因此，当他们打字时，会话会更新。如果他们在没有提交表单的情况下离开页面，我仍然可以调用并返回“实时会话创建”的信息？

看起来像：

```
<form action="submit.php">

<textarea rows="10" id="question" name="question"></textarea>

<input type="submit" value="save">

</form>

<script type="text/javascript">
var formData = $("#question").val();
$(function() {
        function goSession(formData) {
            POST="http://updatesession.php.com/?do="+formData;
        }
        $("#question").change()({
            goSession();
        });
    });

</script> 
```

PHP

```
<?php

session_start();

$sessionTheSavedQuestionForm=$_REQUEST["do"];
if($sessionTheSavedQuestionForm=="0" || $sessionTheSavedQuestionForm==""){
    $_SESSION["sessionTheSavedQuestionForm"]=0;
} else {
    $_SESSION["sessionTheSavedQuestionForm"]=$sessionTheSavedQuestionForm;
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:07:26.267

使用计时器和键入的字符的组合。

这就是我想出的。我有一段时间没有使用 JS，所以它可能看起来有点生疏，但它确实有效。

在顶部的文本区域中输入一些内容，然后观察它出现在底部的文本区域中

[http://jsfiddle.net/nfjAE/](http://jsfiddle.net/nfjAE/)

不要将数据发送到 textarea，而是查看[jQuery 提供的 AJAX 库](http://api.jquery.com/jQuery.post/)

我已经更新了我的小提琴： http: [//jsfiddle.net/nfjAE/3/](http://jsfiddle.net/nfjAE/3/)，其中包含一个无 jQuery 的答案，包括一个 AJAX 调用示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:33:22.060

您可以在定义的时间间隔后发送 ajax 调用，而不是键入每个字符以保存在会话或数据库中，无论您喜欢什么。使用 jquery ajax 发送数据。[**您可以在此处**](http://api.jquery.com/jQuery.post/)找到如何发送 ajax 调用[](http://api.jquery.com/jQuery.post/)

 **```
function SendData(event) {

/* get some values from elements on the page: */
var $form = $( this ),
    term = $form.find( 'input[name="s"]' ).val(),
    url = $form.attr( 'action' );

/* Send the data using post and put the results in a div */
$.post( url, { s: term },
  function( data ) {

  }
);
}​

setInterval(SendData, 5000); // This will call above method after every 5 seconds 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T10:49:35.920

你可以试试；

```
$("#question").keyup(function() {
var formData = $("#question").val();
 //AJAX REQUEST
}); 
```

并在您的文本区域中作为；

```
<textarea rows="10" id="question" name="question"><?php echo $sessiondata; ?></textarea> 
```**

# c - atoi 来自 char * 在 C 中返回 0

> ID：10847770
> 
> 赞同：1
> 
> 时间：2012-06-01T09:31:09.127
> 
> 标签：c, atoi

对C非常陌生，所以请多多包涵。我有一个函数，它接受 3 个 char * 变量`opcode`、`arg1`和`arg2`.

arg1 和 arg2 可以是 (1) 包含持有无符号整数的变量名称的字符串，或 (2) 实际整数。

无论哪种方式，我都需要得到实际的整数。到目前为止，我正在尝试使用 atoi，但它似乎在第一种情况下返回 0。

IE

`sscanf(instruction, "%s %s %s", opcode, arg1, arg2);`

`sum = atoi(arg1) + atoi(arg2);`

我不能发布整个代码，因为它不属于我，但希望上面的演示有点帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:36:57.707

正如我在评论中所说，你不能指望在运行时检索命名变量的值，在 C 中。变量名称不是在代码运行时保留的东西，而是纯机器代码，所有变量都有被“煮熟”到内存地址。名字已经不在了。

该`atoi()`函数将包含整数的字符串（例如`"4711"`，）转换为实际值，`4711`。这就是它所做的一切，它不能以任何方式“按名称”检索值。

如果您希望在程序运行时拥有一种将变量名映射到值的机制，那么您将不得不自己*创建*该机制，因为该语言*没有*. 例如，您可以创建某种结构数组，让您将名称与值相关联，但这当然需要您初始化该数组。

像这样的东西：

```
int foo = 12;
char *vname = "foo";

print("the value of %s is %d\n", vname, get_variable_value(vname)); 
```

根本*不会*在 C 中发生，该函数`get_variable_value()` *不能存在*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:40:52.127

变量名仅在编译时使用。一旦程序被编译，所有关于您使用的名称的信息都会丢失¹。因此，您无法在运行时通过包含变量名称的“字符串”访问变量内容。²

¹更准确地说，它们可用于链接器或调试器，但这不是您可以使用（或指望）的东西

²我可以想到一种（可怕的）方法来使用宏或使用所有变量名称到它们的地址的映射，但我相信你的程序需要通过设计来修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T09:42:08.600

您必须创建一个数据结构，在其中放置变量及其值。在您使用的库中查找“哈希映射”。

然后你可以用它`isdigit(arg[0])`来检查参数是数字还是变量名。伪代码：

```
sum = toInt(arg1) + toInt(arg2)

int toInt(char * arg) {
    return isdigit(arg[0]) ? atoi(arg) : map->lookupValue(arg);
} 
```

# facebook-like - 按应用程序喜欢的页面

> ID：10847771
> 
> 赞同：-1
> 
> 时间：2012-06-01T09:31:10.200
> 
> 标签：facebook-like

是否有可能通过将用户添加到 /PAGE_ID/likes 或类似的方式从 facebook 应用程序中像 facebook 页面一样编程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:51:05.897

不，绝对不可能。

您只能使用 Facebook 提供的社交插件来点赞，但用户必须自己与它们互动（也就是点击）。

# facebook - Facebook Open Graph：定义对象和动作

> ID：10847773
> 
> 赞同：1
> 
> 时间：2012-06-01T09:31:23.327
> 
> 标签：facebook, facebook-opengraph

我正在构建一个 Facebook 应用程序，人们可以在其中预测足球比赛。我想要的是一个通知系统，上面写着：

```
'Friend A' predicted a 3-2 score on 'Match A' 
```

或者

```
'Friend A' predicted:
- Match A: 3-2
- Match B: 0-0 
```

并将这些更新显示给玩家的朋友。这可能吗？我不能再进一步了：

```
'Friend A' predicted 'Match A'. 
```

谢谢，埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:02:08.560

您只能在发布操作中使用两个参数 a`object`和 a `action`。在您的情况下，动作是`predicted`，对象是`match`。您不能`score`为您想要实现的目标添加第三个变量。也许[Score API](http://developers.facebook.com/docs/score/)可以帮助您实现您想做的事情。

# ipad - MonoTouch：每个进程在 ipad 3 上允许的内存是否比 ipad 2 少？

> ID：10847777
> 
> 赞同：1
> 
> 时间：2012-06-01T09:31:34.620
> 
> 标签：ipad, memory, xamarin.ios

我有一个在 ipad 2 上运行良好的应用程序，在 ipad 3 上它崩溃了，显然是因为内存不足错误。他们是否有可能减少单个应用程序的使用量？如果是这样，单点触控是否有一种很好的方法可以在设备上进行跟踪，以便我可以最好地调整需要的内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T10:02:49.877

我的猜测是，由于屏幕分辨率发生了变化，因此在渲染到屏幕或使用图像时，您将需要 4 倍的位数。

基本上有两种工具可以追踪内存问题：

*   仪器。这是一个 Apple 工具/分析器，它可以做很多事情，其中​​可以做内存分析。您可以从 Xcode（菜单 Xcode -> Open Developer Tool -> Instruments）打开它。
*   [堆射](http://docs.xamarin.com/ios/tutorials/MONOTOUCH_PROFILER)。这是 MonoTouch 的内存分析器 - 您可以在 MonoDevelop 中访问它（菜单项目 -> 配置文件 - Mono）。如果问题是图像数据，它不会直接显示在此工具中，因为它只跟踪托管对象（并且图像数据存储在相应的本机对等体中，因此 HeapShot 分析器看不到它。但是您可以看到您正在使用的图像数量以及是否泄漏其中任何一个）。

# ruby-on-rails - OpenSSL::SSL::SSLError 仅适用于 Ubuntu 12.04

> ID：10847779
> 
> 赞同：3
> 
> 时间：2012-06-01T09:31:39.517
> 
> 标签：ruby-on-rails, ruby, oauth, evernote

我正在使用 Evernote Ruby API 开发 Web 应用程序（使用 rails 和 oauth）。但是在 Ubuntu 12.04 中运行应用程序时出现错误“SSL_connect SYSCALL returned=5 errno=0 state=unknown state”。这仅在 ubuntu 12.04 中发生。Ubuntu 版本 < 12.04 没有这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:39:02.490

您当前的 SSL_Cert_file 环境变量设置为什么？尝试将 SSL_Cert_file 环境变量设置为：

```
export SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt 
```

如果这不起作用并且您正在使用 RVM，则可能将路径设置为：`~/.rvm/usr/ssl/cert.pem`

在您进行任何更改之前，只需记下当前路径，以便您可以在需要时将其设置回来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:31:20.580

此问题是由 Ubuntu openssl 1.0.1 中的一个已知错误引起的：

[https://bugs.launchpad.net/ubuntu/+source/openssl/+bug/965371](https://bugs.launchpad.net/ubuntu/+source/openssl/+bug/965371)

[https://serverfault.com/questions/389197/ssl-routinesssl23-writessl-handshake-failure](https://serverfault.com/questions/389197/ssl-routinesssl23-writessl-handshake-failure)

不幸的是，有很多指责正在进行，没有修复。如果您运行的是 Ruby 1.9，您可以强制 SSL 版本为 TLSv1 或 SSLv3 来修复它（问题在于 TLSv1.1）：

[Ruby SSL 错误 - sslv3 警报意外消息](https://stackoverflow.com/questions/6821051/ruby-ssl-error-sslv3-alert-unexpected-message)

# php - PHP自动转换特殊字符？

> ID：10847780
> 
> 赞同：0
> 
> 时间：2012-06-01T09:31:43.343
> 
> 标签：php, file-rename

我有一个目录列表代码，其中列出了特定目录中的所有文件。文件名有一个包含 az 和 0-9 以外的特定字符。它就像“i”上方没有点的小“i”。文件名为：“ClrmamePro Kullanımı English.mp4”。看看“Kullanımı”和“英语”。您可以看到“i”和“ı”之间的区别。

现在的问题是，当我列出目录时，php 会自动将字母“ı”转换为“i”，因此在执行重命名时出现错误

```
rename(E:/workspace/project/ClrmamePro Kullanimi English.mp4,
E:/workspace/project/movie_11.mp4) [<a href='function.rename'>function.rename</a>]: The system cannot find the file specified. 
```

我有一个正则表达式来更正文件名，但由于 PHP 自动将“ı”转换为“i”，我无法捕捉到它。

目录列表的代码如下

```
function getDirectoryListing($directory) {
    // create an array to hold directory list
    $results = array();
    // create a handler for the directory
    $handler = opendir($directory);
    // open directory and walk through the filenames

    while ($file = readdir($handler)) {
        // if file isn't this directory or its parent, add it to the results
        if (strpos($file,'.') !== 0) {
            $results[] = $file;
        }
    }

    closedir($handler);
    // done!
    return $results;
}

echo '<pre>';
print_r(getDirectoryListing('movies'));
echo '</pre>'; 
```

得到的 o/pi 如下：

```
Array
(
    [0] => ClrmamePro Kullanimi English.mp4
    [1] => Download Gears of War 3 - eSoftZone.webm
    [2] => Facebook_ Science and the Social Graph.MP4
) 
```

查看索引 0 处的第一个文件。我目录中的实际文件名是

```
ClrmamePro Kullanımı English.mp4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:04:41.607

对于`movies`目录中的每个文件，以下代码段会输出文件名以及文件是否存在。显示的文件名经过编码以正确显示特殊字符。

该`encode`方法将字符串中的所有字符转换`"$file "`为 HTML 实体。[该方法是对 Stack Overflow 文章“如何使用 PHP 将所有字符转换为其等效的 html 实体”](https://stackoverflow.com/a/3005240/788324)中的解决方案稍作修改的版本。文章中找到的解决方案在我的 PHP 服务器上不起作用，所以我移到`prependAmpersandAndPound`了函数之外。

```
// https://stackoverflow.com/a/3005240/788324
function prependAmpersandAndPound($n) {
    return "&#$n;";
}
function encode($str) {
    $str = mb_convert_encoding($str , 'UTF-32', 'UTF-8');
    $t = unpack("N*", $str);
    $t = array_map(prependAmpersandAndPound, $t);
    return implode("", $t);
}

echo "<pre>\n";
$listing = getDirectoryListing('movies');
foreach ($listing as $file) {
    echo "\"" . encode($file) . "\" ";
    if (file_exists('movies/' . $file)) {
        echo "exists.\n";
    } else {
        echo "does not exist.\n";
    }
}
echo '</pre>'; 
```

模仿您的设置，上面的代码片段输出：

**HTML 源代码：**

```
<pre>
"&#68;&#111;&#119;&#110;&#108;&#111;&#97;&#100;&#32;&#71;&#101;&#97;&#114;&#115;&#32;&#111;&#102;&#32;&#87;&#97;&#114;&#32;&#51;&#32;&#45;&#32;&#101;&#83;&#111;&#102;&#116;&#90;&#111;&#110;&#101;&#46;&#119;&#101;&#98;&#109;" exists.
"&#67;&#108;&#114;&#109;&#97;&#109;&#101;&#80;&#114;&#111;&#32;&#75;&#117;&#108;&#108;&#97;&#110;&#305;&#109;&#305;&#32;&#69;&#110;&#103;&#108;&#105;&#115;&#104;&#46;&#109;&#112;&#52;" exists.
"&#70;&#97;&#99;&#101;&#98;&#111;&#111;&#107;&#95;&#32;&#83;&#99;&#105;&#101;&#110;&#99;&#101;&#32;&#97;&#110;&#100;&#32;&#116;&#104;&#101;&#32;&#83;&#111;&#99;&#105;&#97;&#108;&#32;&#71;&#114;&#97;&#112;&#104;&#46;&#77;&#80;&#52;" exists.
</pre> 
```

**在浏览器中显示：**

```
"Download Gears of War 3 - eSoftZone.webm" exists.
"ClrmamePro Kullanımı English.mp4" exists.
"Facebook_ Science and the Social Graph.MP4" exists. 
```

# android - AutoCompleteTextView 中的下拉列表方向

> ID：10847781
> 
> 赞同：3
> 
> 时间：2012-06-01T09:31:44.480
> 
> 标签：android, autocomplete

我的自动完成文本视图有问题。我在屏幕底部有自动完成文本视图，当我在其中添加适配器然后运行此代码时，它会向上显示下拉菜单。所以请帮助我向下显示自动完成文本视图的下拉菜单，帮助者必须感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-17T06:22:06.773

我也有同样的问题。

在`AutoCompleteTextView`xml 文件中添加这一行：

```
android:dropDownHeight="100dp" 
```

# python - 使用python返回参数到命令行

> ID：10847784
> 
> 赞同：1
> 
> 时间：2012-06-01T09:31:49.863
> 
> 标签：python, command-line

我想在批处理文件和 python 程序之间建立连接。

我想用python得到一个参数“abc”，让批处理文件使用参数“abc”来做其他事情。

如何在 python 中将参数返回到命令行？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T09:39:50.510

你没有说你正在使用什么环境（*nix/Windows/OSX 等），但是对于 *nix 和 shell 脚本你可以做

```
# Python
# whatever.py
import sys
sys.stdout.write('abc')
sys.exit(0)

# In your shell
OUT=`python whatever.py`
echo $OUT
# Will print abc, and it's stored in the variable `OUT` for later consumption. 
```

编辑（对于 Windows）：

```
# Python
# whatever.py
import sys
sys.stdout.write('abc')
sys.exit(0)

# In a .bat file, or cli.
python whatever.py > temp.txt
set /p OUT=<temp.txt
# Creates/replaces a file called temp.txt containing the output of whatever.py
# then sets the `OUT` var with the contents of it. 
```

不幸的是，Windows 的执行方式不如 *nix 方式好和整洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-04T12:00:17.740

在 shell 中，您始终可以使用`-c`switch 来执行单次运行的任何命令。为了更好地解释，它以python脚本的形式执行字符串。所以简而言之，它运行 python 终端，执行然后终止 python 终端。就那么简单。现在让我举一些例子来说明

*请记住，我使用带有 cmd 终端的 Windows 10 机器*

```
python -c "print(__name__)" 
```

返回`__main__`值，因为我目前在命令提示符下。现在这太棒了，因为 python 支持多线程**；**在每一行之后，因此理论上您可以将整个脚本编写为文本文件，然后使用`python -c`安装的正确版本的 python 执行它。

所以，`python -c "import sys;sys.stdout.write('abc')"`如果你愿意，你可以很容易地做到这一点。

现在要将其保存到命令变量中，我只发现了一种不好的方法，但如果有人有另一种方法。请给出意见。

```
python -c "import string;print(dir(string))" >> text.txt
set /p drStr= < text.txt
del text.txt 
```

或在大量的 oneliner 中：

```
python -c "import string;print(dir(string))" >> text.txt && set /p drStr= <text.txt && del text.txt 
```

现在只需键入`set drStr`以打印出变量即可。

# html - 带有 css 过渡的精美菜单

> ID：10847785
> 
> 赞同：2
> 
> 时间：2012-06-01T09:31:50.503
> 
> 标签：html, css, menu, css-transitions

我制作了一个带有一些 css3 过渡的菜单。我只是想分享这个，因为我在我制作的网站上经常使用它（也因为我想尝试使用 stackoverflow 的“回答你自己的问题”选项）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:31:50.813

HTML：

```
<nav>
    <li class="active">
        <a href="#">Home</a>
    </li>
    <li>
        <a href="#">This</a>
    </li>
    <li>
        <a href="#">That</a>
    </li>
    <li>
        <a href="#">Everything</a>
    </li>
</nav>​ 
```

CSS：

```
nav{
    display:table;
    margin: 10px;
    overflow:auto;
    border-left: solid 1px #ccc;
}

nav li a,
nav:hover li.active a{
    color: #ccc;
    text-decoration:none;
    padding: 0 10px;
    background: transparent;
    font-size: 2em;
    text-transform:uppercase;
    font-family: Arial, Verdana, Sans-serif;
    border: solid 1px #ccc;
    border-width: 1px 1px 1px 0;
}

nav li{
    float:left;
    padding:0;
    list-style:none;
}

nav li.active a,
nav li a:hover,
nav:hover li.active a:hover{
    background: #ccc;
    color:white;
}

nav li a{ /* Transition-effects */
    transition: all 0.4s linear;
    -o-transition: all 0.4s linear;
    -ms-transition: all 0.4s linear;
    -moz-transition: all 0.4s linear;
    -webkit-transition: all 0.4s linear;
} 
```

jsFiddle 演示：http:
[//jsfiddle.net/BN8Sm/](http://jsfiddle.net/BN8Sm/)

例如，您可以在 Drupalsites 上使用它，在那里您有一个带有活动类的菜单项。

# android - threadid=1：线程以未捕获的异常退出

> ID：10847790
> 
> 赞同：0
> 
> 时间：2012-06-01T09:31:54.043
> 
> 标签：android

我有那个错误，我不明白出了什么问题。我只是Android开发的初学者，所以我可能做了一件愚蠢的事情，但我找不到它......

**这是我的活动：**

```
package pjl.appli;

import android.app.Activity;
import android.os.Bundle;
import android.widget.RadioButton;
import android.widget.RadioGroup;

public class SoundGenActivity extends Activity {
    /** Called when the activity is first created. */

    RadioGroup radioGroup = new RadioGroup(this);
    RadioButton fm = new RadioButton(this);
    RadioButton granulaire = new RadioButton(this);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // On ajoute les boutons au RadioGroup
        radioGroup.addView(fm, 0);
        radioGroup.addView(granulaire, 1);    
    }
} 
```

**这是我的 main.xml：**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:baselineAligned="false"
    android:orientation="horizontal" >

    <RadioGroup
        android:id="@+id/radioSyntheseSonore"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >
        <RadioButton
            android:id="@+id/fm"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/fm"
            android:checked="true" />
        <RadioButton
            android:id="@+id/granulaire"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/granulaire" />
    </RadioGroup>

</LinearLayout> 
```

这是我的日志：

```
 06-01 09:09:07.398: D/AndroidRuntime(800): Shutting down VM
06-01 09:09:07.398: W/dalvikvm(800): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
06-01 09:09:07.419: I/dalvikvm(800): threadid=3: reacting to signal 3
06-01 09:09:07.498: I/dalvikvm(800): Wrote stack traces to '/data/anr/traces.txt'
06-01 09:09:07.498: E/AndroidRuntime(800): FATAL EXCEPTION: main
06-01 09:09:07.498: E/AndroidRuntime(800): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{pjl.appli/pjl.appli.SoundGenActivity}: java.lang.NullPointerException
06-01 09:09:07.498: E/AndroidRuntime(800):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
06-01 09:09:07.498: E/AndroidRuntime(800):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-01 09:09:07.498: E/AndroidRuntime(800):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-01 09:09:07.498: E/AndroidRuntime(800):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-01 09:09:07.498: E/AndroidRuntime(800):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-01 09:09:07.498: E/AndroidRuntime(800):  at android.os.Looper.loop(Looper.java:137)
06-01 09:09:07.498: E/AndroidRuntime(800):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-01 09:09:07.498: E/AndroidRuntime(800):  at java.lang.reflect.Method.invokeNative(Native Method)
06-01 09:09:07.498: E/AndroidRuntime(800):  at java.lang.reflect.Method.invoke(Method.java:511)
06-01 09:09:07.498: E/AndroidRuntime(800):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-01 09:09:07.498: E/AndroidRuntime(800):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-01 09:09:07.498: E/AndroidRuntime(800):  at dalvik.system.NativeStart.main(Native Method)
06-01 09:09:07.498: E/AndroidRuntime(800): Caused by: java.lang.NullPointerException
06-01 09:09:07.498: E/AndroidRuntime(800):  at android.content.ContextWrapper.getResources(ContextWrapper.java:81)
06-01 09:09:07.498: E/AndroidRuntime(800):  at android.view.View.<init>(View.java:2696)
06-01 09:09:07.498: E/AndroidRuntime(800):  at android.view.ViewGroup.<init>(ViewGroup.java:374)
06-01 09:09:07.498: E/AndroidRuntime(800):  at android.widget.LinearLayout.<init>(LinearLayout.java:166)
06-01 09:09:07.498: E/AndroidRuntime(800):  at android.widget.RadioGroup.<init>(RadioGroup.java:66)
06-01 09:09:07.498: E/AndroidRuntime(800):  at pjl.appli.SoundGenActivity.<init>(SoundGenActivity.java:13)
06-01 09:09:07.498: E/AndroidRuntime(800):  at java.lang.Class.newInstanceImpl(Native Method)
06-01 09:09:07.498: E/AndroidRuntime(800):  at java.lang.Class.newInstance(Class.java:1319)
06-01 09:09:07.498: E/AndroidRuntime(800):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
06-01 09:09:07.498: E/AndroidRuntime(800):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
06-01 09:09:07.498: E/AndroidRuntime(800):  ... 11 more
06-01 09:09:07.928: I/dalvikvm(800): threadid=3: reacting to signal 3
06-01 09:09:07.978: I/dalvikvm(800): Wrote stack traces to '/data/anr/traces.txt'
06-01 09:09:08.208: I/dalvikvm(800): threadid=3: reacting to signal 3
06-01 09:09:08.248: I/dalvikvm(800): Wrote stack traces to '/data/anr/traces.txt'
06-01 09:14:07.708: I/Process(800): Sending signal. PID: 800 SIG: 9 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-01T09:34:36.280

您的广播组似乎是问题的根源，请检查您的代码的那部分

您是否已添加`radiogrp=(RadioGroup)findviewbyid("id")`到您的代码中？您需要在对该视图调用操作之前添加它。

# android - Play 商店显然忽略了我的支持屏幕设置

> ID：10847794
> 
> 赞同：1
> 
> 时间：2012-06-01T09:32:22.200
> 
> 标签：android, android-manifest, tablet, google-play

我工作的公司最近发布了一些专门设计用于仅在手机上运行的应用程序。为了确保这些应用程序无法在平板电脑上下载，我们将`<supports-screens />`标签添加到我们的 AndroidManifest。

我们的标签如下所示：

```
<supports-screens 
                  android:smallScreens="true"
                  android:normalScreens="true"
                  android:largeScreens="true"
                  android:xlargeScreens="false" /> 
```

但是，我们仍然可以在我们的 Asus Transformer TF101、我们的 Samsung tab 10.1 和 Transformer Prime 上下载该应用程序。

因此，用户一直在平板电脑上下载我们的应用程序并报告我们提前知道会遇到的问题，因此我们试图阻止用户在平板电脑上下载它。

我们做错了什么？我是否在这里遗漏了一些仍然让它出现在平板电脑上的东西？当我检查开发者控制台时，它甚至说该应用程序支持 xlargescreens，尽管我明确表示它不支持。

那么这里可能发生了什么？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:48:31.720

By`<supports-screens>` 您只能限制小型设备使应用程序可用 - 即使在清单中将其设置为 false，所有其他屏幕尺寸也会使应用程序可用。

此支持屏幕将允许您的应用程序在您的 xlarge 屏幕中以屏幕尺寸运行，有时您可以在 xlarge 屏幕中看到您可以看到其他应用程序作为手机屏幕运行。

对于您需要使用的市场过滤器`<compatible-screens>`

[链接在这里：](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:59:39.990

[此处引用在](http://developer.android.com/guide/topics/manifest/supports-screens-element.html#xlarge)标签中`android:xlargeScreens`。`<supports-screens>`它指出，

> 指示应用程序是否支持超大屏幕尺寸。xlarge 屏幕被定义为比“大”屏幕显着更大的屏幕，例如平板电脑（或更大的东西），并且可能需要应用程序方面特别小心才能充分利用它，尽管它可能依赖于调整大小由系统填满屏幕。
> 
> 此默认值实际上在某些版本之间有所不同，因此最好始终明确声明此属性。请注意，将其设置为“false”通常会启用屏幕兼容模式。
> 
> 此属性是在 API 级别 9 中引入的。

[此处](http://developer.android.com/guide/practices/screen-compat-mode.html)列出了屏幕兼容模式的复杂性。希望这可以帮助。

# eclipse - 如何在 Eclipse 中浏览文件系统？

> ID：10847795
> 
> 赞同：2
> 
> 时间：2012-06-01T09:32:23.793
> 
> 标签：eclipse

我希望能够从 Eclipse 3.6.2 中浏览文件系统。据我了解，这应该可以通过远程系统资源管理器实现，但是当我打开远程系统视图时，它是空的。如何让它显示我的文件系统？还是有另一种从 Eclipse 内部浏览文件的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:57:47.860

使用 File -> New -> Folder 创建一个新文件夹

展开对话框底部的“高级”选项。选择最后一个选项（“链接文件夹”）将硬盘的某个文件夹“链接/映射”到项目中。

这就像一个软链接：它使硬盘中的文件和文件夹在新项目文件夹下可见。数据不会被复制，也不会被单元测试代码访问。

示例：您链接`C:\`或`/`到`hd`。然后，此测试将通过：

```
assertFalse( new File( "hd" ).exists() ); 
```

但是您可以从 Project 和 Package Explorer 视图中浏览整个硬盘。

**[编辑]**问题实际上是如何使用 Eclipse 访问远程文件（可能由 NFS 或网络共享等映射）。

没有令人满意的方法可以做到这一点。网络驱动器具有使它们成为问题的功能：

1.  网络延迟和中断。
2.  锁定
3.  变更通知

第一个问题使 Eclipse 变慢（如果您有延迟），或者它甚至会在 Eclipse 等待文件 API 返回时挂起 UI。

然后有人可能锁定了一个文件（或者锁定不能可靠地工作，这以不同的方式更糟）。

最后，Eclipse 想要确保工作空间中的文件是“最新的”。为此，它具有在本地硬盘上运行良好（或多或少）的策略，但取决于您的文件服务器操作系统和错误，这可能会导致各种麻烦。

通常的解决方案是将文件移动到版本控制系统。这样，每个开发人员都可以拥有自己的副本，并且可以避免上述所有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:40:41.760

我不熟悉远程系统资源管理器。随着时间的推移，我习惯了一种解决方法。如果您打算浏览 FS 中的相同位置，请在您要检查的文件夹中创建一个新的 vanilla 项目。

我们正在使用此解决方法来保持应用程序服务器在视线范围内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T19:06:41.670

如果您想在 Windows Explorer/Mac Finder 中查看相应的 Eclipse 资源，则可以使用以下 Eclipse 插件。

[https://code.google.com/p/show-file-on-disk/](https://code.google.com/p/show-file-on-disk/)

# c# - 选择不同的对象并使用 LINQ 对它们进行排序

> ID：10847798
> 
> 赞同：-4
> 
> 时间：2012-06-01T09:32:39.660
> 
> 标签：c#, linq

我有不同的表和不同的数据，但它们都共享一个共同的`Created`DateTime 列。

是否可以在 LINQ 中`select`对所有 4 个表进行查询并对所有对象进行排序`Created` 并将它们作为列表返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:40:18.837

你可以做这样的事情

```
t1.Select(i => new {Value = (object)i, Created = i.Created})
  .Concat(t2.Select(i => new {Value = (object)i, Created = i.Created}))
  .Concat(t3.Select(i => new {Value = (object)i, Created = i.Created}))
  .Concat(t4.Select(i => new {Value = (object)i, Created = i.Created}))
  .OrderBy(i => i.Created)
  .Select(i => i.Value)
  .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:36:49.857

你可以查询你的表

```
var q1 = from t1 select Created;
var q2 = from t2 select Created;
var q3 = from t3 select Created;
var q4 = from t4 select Created; 
```

然后使用

```
var res = q1.Union(q2).Union(q3).Union(q4).OrderBy(p=>p).ToList(); 
```

或者

```
var q1 = (from t1 select Created)
         .Union(from t2 select Created)
         .Union(from t3 select Created)
         .Union(from t4 select Created)
         .OrderBy(p=>p).ToList(); 
```

# javascript - 如何在html中制作绑定效果

> ID：10847799
> 
> 赞同：0
> 
> 时间：2012-06-01T09:32:40.103
> 
> 标签：javascript, html, binding

我想在一个地方制作“绑定”效果，所以我需要将要输入的文本动态重写为 span 元素。我为此使用onchange，但它不起作用。

**HTML**

```
<input type="text" id="binding" onChange="binding()"/>
<span class="binding"></span> 
```

**JavaScript**

```
function binding(){
    $(".binding").html() = $("#binding").val();
} 
```

所以在jsfiddle中有一个例子：

[http://jsfiddle.net/63Fgb/4/](http://jsfiddle.net/63Fgb/4/)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:36:16.670

这个例子：

```
$("#binding").keyup(function(){
   $(".binding").html($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:34:47.573

当元素在更改后失去焦点时会触发 change 事件。

您想绑定到 keyup 和 paste 事件。

此外，`html()`是一个函数，而不是一个属性。您需要将数据作为参数传递给它，而不是分配它。

另外，基于 JS Fiddle，如果你想使用 jQuery 方法，你需要使用 jQuery 库，而不是 Mootools 库。

```
$('#binding').bind("keyup paste", function () {
    $(".binding").html($(this).val());
}); 
```

见[活的例子](http://jsfiddle.net/63Fgb/6/)。

最后，如果您希望人们输入文本而不是 HTML，那么您应该使用`text()`，而不是`html()`.

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T09:35:39.050

`onchange`仅在您以某种方式“接受”输入（切换焦点）时才调用。你应该试试`onkeydown`，，，`onkeyup``onkeypress`

# jira - 如何在集成测试期间向 JIRA 插件提供额外的数据源

> ID：10847806
> 
> 赞同：1
> 
> 时间：2012-06-01T09:33:05.120
> 
> 标签：jira, jira-plugin

我正在寻找一种方法来提供一个额外的数据源，在使用提供的 JIRA 插件 SDK 执行集成测试时将获取该数据源。

目前，我的插件访问我通过以下方式配置 Tomcat 定义的 JDBC 数据库：

添加到 server.xml：

```
<Resource auth="Container" 
  driverClassName="net.sourceforge.jtds.jdbc.Driver" 
  maxActive="20" 
  name="jdbc/myDS" 
  password="password" 
  type="javax.sql.DataSource" 
  url="jdbc:jtds:sqlserver://sqlserver:/database" 
  username="username"/> 
```

这到 web.xml

```
<resource-ref>
  <description>My Datasource</description>
  <res-ref-name>jdbc/myDS</res-ref-name>
  <res-type>javax.sql.DataSource</res-type>
  <res-auth>Container</res-auth>
</resource-ref> 
```

然后我可以从我的插件中访问数据库，如下所示

```
 Context initContext = new InitialContext();     
 Context envContext = (Context)initContext.lookup("java:/comp/env");
 DataSource ds = (DataSource)envContext.lookup("jdbc/myDS"); 
```

此方法在使用独立的 JIRA 实例时工作正常，但是我使用提供的集成测试`atlas-integration-test`启动了 JIRA 的嵌入式版本，而正是这个嵌入式版本我无法配置使用额外的数据源。

我找到了我认为需要将资源添加到的文件，`entityengine.xml`但这似乎在每次嵌入式服务器启动时都会重新生成，因此我添加到该文件的任何更改都将丢失。

我一直在关注本指南： [https ://developer.atlassian.com/display/JIRADEV/Plugin+Tutorial+-+Writing+Integration+Tests+for+your+JIRA+plugin](https://developer.atlassian.com/display/JIRADEV/Plugin+Tutorial+-+Writing+Integration+Tests+for+your+JIRA+plugin)

并在 Atlassian 论坛上找到了一个类似的帖子，但仍未解决：[http ://forums.atlassian.com/thread.jspa?messageID=257355500&tstart=0](http://forums.atlassian.com/thread.jspa?messageID=257355500&tstart=0)

如何配置 JIRA 的嵌入式版本来获取我的数据源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T22:03:04.957

好问题，但我认为在jira开发标签下的answers.atlassian.com上会更好。我知道有人有一个用于集成测试的 MySQL 配置，或者可能只是更改了 JIRA SDK 的配置方式？

# php - PHP - 设置继承的静态属性也会在其他继承它的类中设置它

> ID：10847810
> 
> 赞同：2
> 
> 时间：2012-06-01T09:33:18.723
> 
> 标签：php, static, inheritance

我有一个代表 html 元素的类层次结构。其中一些可能与某些浏览器版本不兼容。例如，HTML5 画布与版本 9 之前的 Internet Explorer 不兼容。

对于每种类型的元素，我希望能够知道调用浏览器是否支持它们。

```
abstract class AbstractView // Base class, doesn't represent anything.
{
    // ...

    // By default, an element will be considered compatible with any version of ny browser.
    protected static $FirstCompatibleVersions = array(
        'Firefox' => 0,
        'Chrome' => 0,
        'Internet Explorer' => 0);

    protected static function SetFirstCompatibleVersion($browser, $version)
    {
        static::$FirstCompatibleVersions[$browser] = $version;
    }

    protected static function IsSupportedByBrowser()
    {
        $browser = // ... Assumed to be the calling browser name.
        $version = // ... Assumed to be the calling browser version.
        return static::$FirstCompatibleVersions[$browser] <= $version;
    }
}

class CanvasView extends AbstractView // Displays a canvas. Not compatible with IE < 9.
{
    // ...
}

CanvasView::SetFirstCompatibleVersion('Internet Explorer', 9);

class FormView extends AbstractView // Displays a form. Assumed compatible with anything.
{
    // ...
}

// Nothing to do form FormView.

echo FormView::IsSupportedByBrowser(); // Should print 1 (true) (on firefox 12) but does not. 
```

我的问题是，当我执行时：

```
CanvasView::SetFirstCompatibleVersion('Internet Explorer', 9); 
```

这不仅会设置 CanvasView::$FirstCompatibleVersion['Internet Explorer']，还会为所有其他类设置这个值，就像这个数组对所有类一样，使我的所有元素与 IE < 9 不兼容.

我能做些什么来防止这种情况发生？

感谢您花时间阅读。

-病毒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:12:30.327

在静态方法中，您可以使用`get_called_class()`(PHP 5.3+) 来了解正在调用哪个类。

```
FormView::SetFirstCompatibleVersion() 
```

将`get_called_class()`返回`'FormView'`。这就是您可以区分子类的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T10:09:02.543

你无法阻止这一点。AbstractView 的所有子级共享类静态变量。您可以改用对象或在每个类的静态变量中设置它们的兼容性，而不是使用 SetFirstCompatibleVersion。

# windows - 如何在 Windows 机器上安装自动工具（autoconf、automake、aclocal、libtoolize pkgconfig）

> ID：10847811
> 
> 赞同：7
> 
> 时间：2012-06-01T09:33:20.667
> 
> 标签：windows, android-ndk, linphone

我想构建 Linphone android 项目。我已经下载了项目，但无法按照 README 中给出的说明进行操作。没有得到如何在 Windows 机器上安装 autotools。如果有人有任何想法，请帮我安装这些工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T12:03:48.860

好吧，您应该首先下载所有需要的依赖项，例如 ndk version>=8 和 Cygwin。您可以在 android 开发者网站上找到 ndk 并将其解压缩到所需位置。

现在下载 cygwin 安装程序，它只有几 KB。当您启动安装程序时，它将搜索软件包和服务器列表。选择靠近您所在位置的服务器。从可用的软件包中，下载完整的 Developers 分支，这样以后您就不会遇到任何新的问题，即您缺少某些文件或其他任何东西。

下载后，在 Cygwin 安装程序的帮助下安装它。安装路径应包含任何 sapce，因此最好将其安装在 Drive:\Cygwin

现在下一步是为 NDK 和 Cygwin 的 bin 目录设置环境变量路径，所以要快点.. 没有什么比这一步更简单了:)

现在，所有依赖项都可以使用了。所以启动cygwin shell，它类似于普通的CMD。

通过执行以下命令定位到项目的根目录：

$光盘

此根目录必须包含所有文件，如清单文件、makefile 和最重要的：prepare_sources.sh

现在运行以下命令：

$ ./prepare_sources.sh /

这个 ndk 的完整路径是 ndk 解压缩源中的 ndk-build 文件的路径。就我而言，它是：G:/android-ndk-r8d-windows/android-ndk-r8d/ndk-build

现在按 Enter 键……你已经完成了主要任务……现在让 Cygwin 处理所有事情，包括本机文件的编译。等待 cygwin 完成该过程......它需要像宽带这样的高速互联网连接。

完成此过程后，将项目导入eclipse并运行它.. :)

我希望它会对你有所帮助.. :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T10:56:31.643

安装 MingW 或 Cygwin：[http ://cygwin.com/install.html](http://cygwin.com/install.html)

您可以选择要安装的软件包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T16:26:40.963

使用命令行

```
git clone git://git.linphone.org/linphone-android.git --recursive 
```

然后你会`prepare_sources.sh`进入**linphone-android 目录**

我使用 GitShell 实用程序从命令行下载。
让我知道。

# spring - 在构造函数注入期间 Bean 解析为 null

> ID：10847813
> 
> 赞同：0
> 
> 时间：2012-06-01T09:33:30.767
> 
> 标签：spring, resteasy

我想在春天使用 resteasy 和 jax-rs 创建一个 rest api。为此，以下几行是我的应用程序上下文的一部分：

```
<bean id="RESTeasyProviderFactory" class="org.springframework.web.context.support.ServletContextAttributeFactoryBean">
    <property name="attributeName" value="org.jboss.resteasy.spi.ResteasyProviderFactory" />
</bean>

<bean id="RESTeasyRegistry" class="org.springframework.web.context.support.ServletContextAttributeFactoryBean">
    <property name="attributeName" value="org.jboss.resteasy.spi.Registry" />
</bean>

<bean id="RESTeasyBeanPostProcessor" class="org.jboss.resteasy.plugins.spring.SpringBeanProcessor">
    <constructor-arg>
        <bean class="org.jboss.resteasy.core.AsynchronousDispatcher">
            <constructor-arg ref="RESTeasyProviderFactory" />
        </bean>
    </constructor-arg>
    <constructor-arg ref="RESTeasyRegistry" />
    <constructor-arg ref="RESTeasyProviderFactory" />
</bean> 
```

在组件扫描期间，当我找到第一个休息接口 bean 时，这会在组件扫描期间导致 npe：

```
Caused by: java.lang.NullPointerException
       at org.jboss.resteasy.plugins.spring.SpringBeanProcessor$ResteasyBeanPostProcessor.getInjector(SpringBeanProcessor.java:133)
       at org.jboss.resteasy.plugins.spring.SpringBeanProcessor$ResteasyBeanPostProcessor.postProcessAfterInitialization(SpringBeanProcessor.java:125)
       at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:407)
       at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1461)
       at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
       ... 11 more 
```

调试器显示resteasyregistry bean 和resteasyproviderfactory bean 都被解析为null。

谁能解释这是怎么发生的？作为测试，我更改了 xml，因此将注册表和工厂设置为属性，但即使在调用 setter 时，注册表和工厂也为空。

* *EDIT2：弹簧调试日志**

这里是spring调试日志中的相关部分。

```
2012-06-01 12:13:34,337 DEBUG [main] o.s.b.f.s.DefaultListableBeanFactory - Creating shared instance of singleton bean 'RESTeasyBeanPostProcessor'
2012-06-01 12:13:34,337 DEBUG [main] o.s.b.f.s.DefaultListableBeanFactory - Creating instance of bean 'RESTeasyBeanPostProcessor'
2012-06-01 12:13:34,337 DEBUG [main] o.s.b.f.s.DefaultListableBeanFactory - Creating instance of bean 'org.jboss.resteasy.core.AsynchronousDispatcher#e0380'
2012-06-01 12:13:34,340 DEBUG [main] o.s.b.f.s.DefaultListableBeanFactory - Creating shared instance of singleton bean 'RESTeasyProviderFactory'
2012-06-01 12:13:34,340 DEBUG [main] o.s.b.f.s.DefaultListableBeanFactory - Creating instance of bean 'RESTeasyProviderFactory'
2012-06-01 12:13:34,340 DEBUG [main] o.s.b.f.s.DefaultListableBeanFactory - Eagerly caching bean 'RESTeasyProviderFactory' to allow for resolving potential circular references
2012-06-01 12:13:34,350 DEBUG [main] o.s.b.f.s.DefaultListableBeanFactory - Finished creating instance of bean 'RESTeasyProviderFactory'
2012-06-01 12:13:34,386 DEBUG [main] o.s.b.f.s.DefaultListableBeanFactory - Finished creating instance of bean 'org.jboss.resteasy.core.AsynchronousDispatcher#e0380'
2012-06-01 12:13:34,386 DEBUG [main] o.s.b.f.s.DefaultListableBeanFactory - Creating shared instance of singleton bean 'RESTeasyRegistry'
2012-06-01 12:13:34,386 DEBUG [main] o.s.b.f.s.DefaultListableBeanFactory - Creating instance of bean 'RESTeasyRegistry'
2012-06-01 12:13:34,386 DEBUG [main] o.s.b.f.s.DefaultListableBeanFactory - Eagerly caching bean 'RESTeasyRegistry' to allow for resolving potential circular references
2012-06-01 12:13:34,386 DEBUG [main] o.s.b.f.s.DefaultListableBeanFactory - Finished creating instance of bean 'RESTeasyRegistry'
2012-06-01 12:13:34,389 DEBUG [main] o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'RESTeasyProviderFactory'
2012-06-01 12:13:34,393 DEBUG [main] o.s.b.f.s.DefaultListableBeanFactory - Eagerly caching bean 'RESTeasyBeanPostProcessor' to allow for resolving potential circular references
2012-06-01 12:13:34,393 DEBUG [main] o.s.b.f.s.DefaultListableBeanFactory - Finished creating instance of bean 'RESTeasyBeanPostProcessor' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:09:55.467

您是否尝试过在构造函数上使用索引？

例如

```
 <constructor-arg index="0"><value>7500000</value></constructor-arg>
   <constructor-arg index="1"><value>42</value></constructor-arg> 
```

此外，您的属性似乎是指类：

```
<property name="attributeName" value="org.jboss.resteasy.spi.Registry" /> 
```

你能发布你的课程或告诉我们你想在这里注入什么吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-09T09:45:18.650

我通过为这两个 bean 编写自己的单例工厂来解决这个问题。它很烦人，不应该是必要的，但它确实有效。

最后我们完全改变了这部分配置，所以即使这个丑陋的解决方案也变得不必要了。

# websocket - 默认情况下可与大多数防火墙一起使用的 Websocket 配置

> ID：10847816
> 
> 赞同：0
> 
> 时间：2012-06-01T09:33:44.167
> 
> 标签：websocket, port, firewall

我们刚刚在我们的 webapp 中添加了一个 websocket，它可以通过端口 9090 上的通用互联网（即不在防火墙后面）访问。一个客户端遇到了问题，因为他们的防火墙阻止了对该端口的访问。

是否有一个聪明的解决方案，不需要客户端进行额外的配置？我读过防火墙通常允许使用端口 443，并且是 Skype 的配置选项。这是一个选择吗？

我想到的一种解决方案，但我不知道它是否会起作用，是配置 web 服务器以将端口 80 上的某些请求代理到 websocket。但是，我不知道 websocket 是否可以共享端口 80，因为它也将服务正常的网页和 ajax 请求。

我们使用 socket.io 来实现 websocket 通信，并且在 node.js 前面有一个 webserver。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T13:19:25.533

防火墙只是可能干扰 WebSocket 连接的一种中介。另一个主要类别是网络代理。

为了最大限度地提高 WebSocket 连接成功的机会，您需要在端口 443 上运行 WSS（安全 WebSocket），其中 WS 服务器具有由 CA 颁发的证书，该证书内置于所有主要浏览器中。

这将在许多受限的公司网络中工作，除非有 MITM 代理来检查（未加密的）流量。

原则上，WS 可以与一个普通的旧 HTTP 服务器共享一个给定的端口——但是这个主题与上面是正交的。

# php - 如何将变量传递给其他 PHP 文件？

> ID：10847817
> 
> 赞同：3
> 
> 时间：2012-06-01T09:33:51.593
> 
> 标签：php, terminal

在运行一个 PHP 脚本时。该脚本将在脚本中的某处调用另一个。这两个脚本需要同时运行，所以我不能在这里使用 include 或 require。该脚本将使用终端调用，如下所示：

```
exec( '/usr/bin/php ../process.php >> logs/' . date( 'Y_m_d' ) . '.log 2>&1 &' ); 
```

这里最大的问题是我想处理 6 种不同的东西，但它们都将使用完全相同的代码。唯一的区别是处理它们的目录。

现在的问题是：是否有一种简单的方法可以在传递一个或多个变量的同时运行第二个脚本？

我尝试了类似的东西`../process?var=something`，但这显然不能这样工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T09:37:32.113

您可以将一些变量作为参数传递给脚本。传递的所有参数都在变量中`$argv`。

请参阅 php 文档[$argv](http://de.php.net/manual/en/reserved.variables.argv.php)

然后只需遍历`$argv`并检查您定义的一些关键字。

```
exec( '/usr/bin/php ../process.php -f '/path/to/folder' >> logs/' . date( 'Y_m_d' ) . '.log 2>&1 &' ); 
```

然后`$argv`变量将保持`-f`and `/path/to/folder`，因此只需在循环中检查并通过+1`-f`的位置获取值。`-f`

# hibernate - 最受欢迎的 JPA 实现

> ID：10847819
> 
> 赞同：3
> 
> 时间：2012-06-01T09:34:11.967
> 
> 标签：hibernate, jpa, persistence, eclipselink, toplink

我是一名初级程序员，被要求开发一个应该利用 Java Persistence API (JPA) 的应用程序。

哪个是最流行的 JPA 实现（Hibernate、Toplink、EclipseLink）

我可以将上述任何内容与 Apache Tomcat 一起使用，或者每个实现都与特定的服务器应用程序相关联吗？

有没有关于这个主题的好的入门书籍或教程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T09:40:31.340

如果您选择 Toplink，您将被解雇并在桥下度过一天，喝着便宜的伏特加，想知道您的职业生涯会是什么样子。

我只听说 EclipseLink 不错，但我认为 Hibernate 有更多的行业用途并且有一些非 JPA 特性。

您应该能够将它们全部与 Tomcat 一起使用，因为它们是 Java API 的实现，而不是特别依赖于任何容器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-01T09:50:00.593

那要看。两种解决方案都有效，但每个解决方案都做出了自己的设计决定，取决于您，这些决定可能对您有利或不利。

所以我建议使用这两种技术来实现一个简单但完整的原型（每一种都花一周时间）来了解哪一种更适合你。完整意味着：实施您知道自己需要的每个用例，尤其是复杂的用例。

作为指导，我发现 Hibernate 具有更多功能，但 Eclipse Link 会为您提供更好的错误消息 -> 我在解决 Link 问题上花费的时间更少。

另一方面，Hibernate 内置了更多功能，因此我在那里花费更少的时间将需求转化为代码 - 当我可以找到该功能时，了解它是如何工作的并且我没有遇到一些奇怪的错误消息难倒并在圈子里跑了几天。

Eclipse Link 曾经是一个商业产品，所以文档更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T09:36:54.203

这是一个非常主观的问题。
我认为 Hibernate 仍然更受欢迎，但最流行的东西不一定总是最适合特定任务。

就个人而言，我会在大多数项目中使用 EclipseLink（它是 TopLink 的继任者）——它并非没有 JPA 的参考实现，它具有良好的支持和定期发布，由 Eclipse 基金会驱动并附带良好的文档。

您可以将 EclipseLink 和 hibernate 与每个应用程序服务器一起使用（tomcat 非常好），甚至可以独立使用（根本没有应用程序服务器）——JPA 标准保证了这一点。

如果您不使用特定于实现的东西（并坚持使用 JPA），您甚至可以将 EclipseLink 与 Hibernate 交换（反之亦然）——尽管我这样做是有充分理由的。

# jquery - 如何将 Python 异常信息返回给 jQuery.ajax POST 调用？

> ID：10847820
> 
> 赞同：1
> 
> 时间：2012-06-01T09:34:12.640
> 
> 标签：jquery, python, ajax

我在我的 HTML 代码中创建了一个 JQUERY AJAX 代码：

```
$.ajax({
                type: "POST",
                url:  "runrep.py",
                data:
                {
                       'my_data' : 'test' 
                },
                success: function(html)
                {
                }
                error:function(xhr,err)
                {
                     alert("Failed\nreadyState: "+xhr.readyState+"\nstatus: "+xhr.status + "\nresponseText: "+xhr.responseText);
                }
}); 
```

在我的后端代码“runrep.py”中，我专门尝试连接到已关闭的 MySQL 数据库。

当我在 Apache error_logs 中运行程序时，我看到 DB 无法连接 MySQL 异常但 UI 页面没有呈现任何错误？

```
class SampleClass:
        def __init__(self):
                self.conn = MySQLdb.connect(host="host",user="user",passwd="passwd",db="db")
                self.cursor = self.conn.cursor(MySQLdb.cursors.DictCursor)
                form = cgi.FieldStorage()
                self.my_data = form["my_data"].value 
```

我应该怎么做才能打印程序错误，无论是异常还是由于浏览器/客户端的运行时问题导致的错误？即使我捕捉到异常，我怎样才能相应地返回 AJAX 调用失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:46:08.740

基本上，您应该处理代码中的异常并将其传递给服务器代码。例如，如果您使用 Werkzeug/Flask（请参阅[文档](http://werkzeug.pocoo.org/docs/exceptions/)），您可以这样做：

```
import werkzeug

class SampleClass:
    def __init__(self):
        try:
            self.conn = MySQLdb.connect(host="host",user="user",passwd="passwd",db="db")
        except Exception as e:
            raise werkzeug.exceptions.HTTPException("Error: %s" % str(e) )

        self.cursor = self.conn.cursor(MySQLdb.cursors.DictCursor)
        form = cgi.FieldStorage()
        self.starttime = form["my_data"].value 
```

引发的异常应该由服务器框架转换为适当的 HTTP 响应，其中包含一些表示错误的 HTTP 状态代码，例如 500。当服务器响应错误代码时，您可以在 AJAX 查询中处理它。

有关异常处理和带有错误状态代码的响应的更多信息，请参阅您的 HTTP/WSGI 框架。

# php - 是否可以在 PHP 中不使用 eval 来呈现文件的内容？

> ID：10847821
> 
> 赞同：-2
> 
> 时间：2012-06-01T09:34:12.777
> 
> 标签：php, variables, rendering, eval, file-get-contents

我正在尝试在 PHP 中创建一个简单的框架，其中将包含一个文件（index.bel）并在文件中呈现变量。例如， index.bel 可能包含以下内容：

```
<h1>{$variable_name}</h1> 
```

如果不使用 eval 或要求框架的用户像这样键入 index.bel，我将如何实现这一点：

```
$index = "<h1>{$variable_name}</h1>"; 
```

换句话说：是否可以在不使用 eval 的情况下呈现文件的内容？我的问题的一个有效解决方案是：

索引.php：

```
<?php
$variable_name = 'Welcome!';
eval ('print "'.file_get_contents ("index.bel").'";'); 
```

索引.bel：

```
<h1>{$variable_name}</h1> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T09:47:04.747

我知道很多人建议您添加模板引擎，**但**如果您想创建自己的，最简单的方法是使用 str_replace：

```
$index        = file_get_contents ("index.bel");
$replace_from = array ('$variable_a', '$variable_b');
$replace_to   = array ($var_a_value, $var_b_value);
$index        = str_replace($replace_from,$replace_to,$index); 
```

现在这是简单的变量替换，但您很快就会想要更多的标签、更多的功能，以及使用`preg_replace_callback`. 您可能想看看它，因为它最终可以替换变量、包含其他文件`{include:file.bel}`、替换文本（如`{img:foo.png}`.

**编辑**：阅读更多您的评论，您正在创建自己的框架。看看它，`preg_replace_callback`因为它为您提供了更多处理事情的方法。

这里非常简单的例子：

```
...
$index = preg_replace_callback ('/{([^}]+)}>/i', 'preg_callback', $index);
...

function preg_callback($matches) {
  var_dump($matches);

  $s = preg_split("/:/",$matches[1]);  // string matched split by :
  $f = 'func_'.strtolower($s[0]);      // all functions are like func_img,func_include, ...
  $ret = $f($s);                       // call function with all split parameters

  return $ret;
}

function func_img($s) {
  return '<img src="'.$s[1].'" />';
} 
```

从这里您可以改进这一点（通过多种方式），例如，如果您愿意，可以将所有功能划分为类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:39:12.290

是的，这是可能的，但你为什么要制作自己的框架？您提供的代码显然看起来像 Smarty 模板。你可以试着看看他们是怎么做到的。

运行这些代码的一种可能方法是将它们分成几部分。您拆分美元符号和下一个不是下划线、字母或数字的符号。一旦你这样做了。您可以将其解析为变量。

$var = '变量名'; // 先拆分

回声 $$var; // 获取给定的变量

你的意思是这样的吗？

# php - 如何使用简单的 Html 视频播放器还具有下一个视频的快退功能？

> ID：10847825
> 
> 赞同：0
> 
> 时间：2012-06-01T09:34:41.107
> 
> 标签：php, html, video, media-player

我正在尝试将此代码用于 html 中的视频，但它用于 Flash 视频，第二件事是它没有下一个视频剪辑的快退功能

我的代码是，

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"    codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" width="250" height="250" align="middle">
<param name="allowScriptAccess" value="sameDomain"/>
<param name="movie" value="Pro Tools Tutorials.swf"/>
<param name="quality" value="high"/>
<param name="bgcolor" value="#000000"/>
<param name="allowFullScreen" value="true"/>
<embed src="/unknittingmouse1.swf" quality="high"  align="middle"  bgcolor="#ffffff"  width="250" height="230" allowFullScreen="true" allowScriptAccess="sameDomain" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">
   </embed>
   </object> 
```

我们还必须小心该视频代码将在 Internet Explorer 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T10:36:20.440

用于`jwplayer` 具有多个选项的视频

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T10:34:17.110

您应该查看 video.js ( [http://videojs.com/](http://videojs.com/) ) 添加它所有的控件和功能都包含在一个不错的包中。

# spring - 如何在 Spring JSP 中设置 Last-Modified 响应标头

> ID：10847828
> 
> 赞同：3
> 
> 时间：2012-06-01T09:34:49.243
> 
> 标签：spring, jsp

我正在使用以下配置在 Spring 中设置与缓存相关的响应标头。

```
<mvc:interceptors>
    <mvc:interceptor>
        <mvc:mapping path="/*.*"/>
        <bean id="webContentInterceptor" class="org.springframework.web.servlet.mvc.WebContentInterceptor">
            <property name="cacheSeconds" value="31536000"/>
            <property name="useExpiresHeader" value="true"/>
            <property name="useCacheControlHeader" value="true"/>
        </bean>
    </mvc:interceptor>
    <!-- Map other interceptors here -->
</mvc:interceptors> 
```

**问题：如何在此处设置 Last-Modified ？** [另一个问题：是我自己还是真的很难找到这样的文档，尤其是 Spring 文档中的属性名称？]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T10:20:15.783

根据我的说法，在 Spring Framework 中有更好的方法来实现这一点。

有一个名为**ShallowEtagHeaderFilter**的过滤器。您只需在 web.xml 中将其指定为过滤器。

[请在此处](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/filter/ShallowEtagHeaderFilter.html)阅读其 javadoc以获取更多详细信息。

希望这对您有所帮助。干杯。

# android - 自定义对话框中具有空验证的 EditTextPreference 的自定义布局

> ID：10847829
> 
> 赞同：3
> 
> 时间：2012-06-01T09:34:56.087
> 
> 标签：android, view, preferenceactivity, edittextpreference

我的应用程序中有 PreferenceActivity，我想为 EditTextPreference 指定自定义布局。我在具有`android:layout`属性的 xml 文件中执行此操作。一切正常，布局正在更改，但我无法更改其字段的任何值。代码运行没有错误，在调试中我可以看到值发生了变化，但视觉上没有变化。我试图打电话`view.invalidate()`，`onContentChanged()`但没有任何改变。所有 ID 都正常，没有抛出异常。所以我不知道。我会感谢你的帮助。

这是我的preferences_file_types.xml 的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <PreferenceCategory
        android:key="@string/preference_category_file_types"
        android:title="@string/settings_supported_file_types" >
        <EditTextPreference
            android:key="@string/preference_file_type_image"
            android:layout="@layout/file_types_list_item"
            android:title="@string/settings_supported_file_types_hint" />
    </PreferenceCategory>
</PreferenceScreen> 
```

这是我的 PreferenceActivity 类的代码：

```
public class FileTypesSettingsActivity extends PreferenceActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences_file_types);
        LayoutInflater inflater = getLayoutInflater();
        EditTextPreference imageTypePreference = (EditTextPreference) findPreference(getString(R.string.preference_file_type_image));
        View specifiedView = inflater.inflate(imageTypePreference.getLayoutResource(), null);
        changeViewAttributes(specifiedView);    
    }

    private void changeViewAttributes(View view) {
        ImageView fileTypeIcon = (ImageView) view.findViewById(R.id.file_types_list_item_iv_icon);
        fileTypeIcon.setBackgroundResource(R.drawable.ic_file_image);

        TextView fileTypePredefined = (TextView) view.findViewById(R.id.file_types_list_item_tv_predefined_extensions);
        fileTypePredefined.setText("JPG BMP GIF PNG");

        TextView fileTypeAdded = (TextView) view.findViewById(R.id.file_types_list_item_tv_added_extensions);
        fileTypeAdded.setText("BLA BLA BLA");
    }
} 
```

# iphone - iphone sdk上网格布局中的图像

> ID：10847834
> 
> 赞同：0
> 
> 时间：2012-06-01T09:35:29.777
> 
> 标签：iphone, ios

我想在网格视图中显示图像，如行和列。如果我单击图像应该返回网格中图像的索引值。我不知道这个概念。如果你不明白我的问题，我想像 iPhone 默认照片库应用程序以网格布局查看照片。！，我想像下面的屏幕截图一样输出，我正在尝试搜索但没有找到有用的资源任何人都可以帮助我提供代码或任何教程链接...！

![在此处输入图像描述](../Images/c501cb961bf89ca8615ad3ede8feabc2.png)

谢谢...！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:38:10.007

试用[AQGridView](https://github.com/AlanQuatermain/AQGridView)（它就像一个 Grid-Tableview）

> AQGridView 试图在 iPhone 上创建类似于 NSCollectionView 的东西。……
> 
> AQGridView 基于 UITableView 及其相关类的编程模型。为了创建这个类，我仔细研究了 UITableView 是如何完成它的工作的，并试图尽可能地复制它。这意味着如果您熟悉 iPhone 或 iPad 上的表格视图编程，您会发现 AQGridView 很容易上手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:40:22.057

.. 或者你可以试试[Three20](http://three20.info/)

它提供网格视图和全屏画廊。

# c - C中的阶乘，运行时错误的尾随零？

> ID：10847841
> 
> 赞同：0
> 
> 时间：2012-06-01T09:36:01.583
> 
> 标签：c

```
#include<stdio.h>

int main()
{
    long ctr[100000],i;
    float j;
    long d[100000],T,h,o;

    scanf("%ld",T);
    printf("\n");

    for(i=0; i<T; i++)
    {
        scanf("%ld",d[i]);
        printf("\n");

        for(h=d[i]; h<=0; h--)
        {
            j=h%10;
            if(j==5)
            {
                ctr[i]++;
            }
        }
    }
    for(o=0; o<=i; o++)
    {
        printf("%ld\n",o);
    }
    return 0;
} 
```

这是一个程序，用于查找用户输入的一组“T”数字的阶乘的尾随零的数量。

我所做的是将每个数字除以 10 并测试数字是否为 5。然后我将数字减 1 直到它达到 0。每对 5*4 贡献一个尾随 0。

程序是否消耗太多内存或是否存在其他运行时错误？该程序出现运行时错误，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:53:00.757

几点观察：

*   `long[100000]`假设是普通的 32 位，则需要 400,000 字节的堆栈，如果是 64位，则需要`long`800,000 字节。`long`您有两个这样的数组，这可能会使您的程序达到操作系统堆栈大小的限制。
*   该`scanf()`函数需要*指向*存储它正在读取的值的位置的指针。你没有给它指针。正如保罗 R 在评论中所说。
*   假设输入正数，循环`for(h=d[i]; h<=0; h--)`将永远不会运行它的主体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T01:31:00.293

循环是无限的。确保计数不会变为负数，否则您将遇到运行时错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T09:52:22.583

嗯......这个循环看起来像循环无穷大。

```
for(h=d[i]; h<=0; h--) 
```

因此给你一个运行时错误......因为计数变为负数，并且你的循环条件说继续直到值小于或等于零，但看起来你的值永远不会达到零。

对于 scanf 函数，不要忘记使用 & 符号。像这样：

```
scanf("%ld", &sampleVariable); 
```

这就是您的运行时错误的解决方案。:)

* * *

而且也许您应该使用高精度变量，我认为您需要比双精度数据类型更高的精度，因为您将处理大量数字。

有关附加信息，请参见此处：[http ://www.nongnu.org/hpalib/](http://www.nongnu.org/hpalib/)

# image - 我可以在 Excel 2007 中缩小或最小化图片的大小吗？

> ID：10847843
> 
> 赞同：0
> 
> 时间：2012-06-01T09:36:03.260
> 
> 标签：image, excel, vba

我们是否可以最小化插入 Excel 中的图片/图像，以便我们只有在单击任何按钮时才能看到它（我们在 Excel 中取消分组或分组数据的方式）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:51:32.860

是的，您可以，右键单击图片并单击分配宏（您也可以在按钮上执行此操作）

单击新建以创建新宏。

您将在 VB 编辑器中获得以下代码：

```
Sub Picture1_Click()

End Sub 
```

在两者之间添加这 3 行以将大小调整为 50%：

```
Sub Picture1_Click()
ActiveSheet.Shapes.Range(Array("Picture 1")).Select
Selection.ShapeRange.ScaleWidth 0.5, msoFalse, msoScaleFromTopLeft
Selection.ShapeRange.ScaleHeight 0.5, msoFalse, msoScaleFromTopLeft
End Sub 
```

仅供参考，所选图片的名称显示在公式栏之前。

如果你明白了，你将能够通过搜索一些关于 excel 宏和 vba 的工作原理来做相反的事情。

# java - 在 java 类路径中使用通配符

> ID：10847850
> 
> 赞同：9
> 
> 时间：2012-06-01T09:36:23.977
> 
> 标签：java, classpath, wildcard

我正在运行一个应该执行`main`方法的 shell 脚本：

```
java -classpath /path/to/app/conf/lib/nameJar* com.example.ClassTest 
```

在这一点上，我得到了这个例外：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext
Caused by: java.lang.ClassNotFoundException: org.springframework.context.ApplicationContext
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:303)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:316) 
```

这是因为弹簧罐位于另一个文件夹中。所以我改变了脚本：

```
java -classpath /path/to/app/conf/lib/nameJar*:/path/to/app/lib/spring* com.example.ClassTest 
```

但是使用此脚本，无法找到 com.example.ClassTest。关于这个问题的任何想法？

提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-01T09:42:31.107

java 类路径通配符扩展是不寻常的。

从[文档](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html)：

> **了解类路径通配符**
> 
> 类路径条目可以包含基本名称通配符 *，这被认为等同于指定目录中所有扩展名为 .jar 或 .JAR 的文件的列表。例如，类路径条目 foo/* 指定名为 foo 的目录中的所有 JAR 文件。仅由 * 组成的类路径条目将扩展为当前目录中所有 jar 文件的列表。

因此，您需要指定的是：

```
java -classpath /path/to/app/conf/lib/*:/path/to/app/lib/* 
```

如果您只需要特定的罐子，则需要单独添加它们。类路径字符串**不**接受通用通配符，如,`nameJar*`等 。`*.jar``spring*`

阅读[在 java 类路径中设置多个 jar 以](https://stackoverflow.com/questions/219585/setting-multiple-jars-in-java-classpath)获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:40:53.037

似乎 JVM 找不到与 Spring 相关的 JARS。将所有必需的 JARS 放在一个位置（例如 c:\libs）并在运行“java”命令时使用“java.ext.dirs”

喜欢 ：

```
java -Djava.ext.dirs=c:/libs com.example.ClassTest 
```

# php - 按值访问数组元素

> ID：10847851
> 
> 赞同：0
> 
> 时间：2012-06-01T09:36:27.573
> 
> 标签：php

我有一个像这样的数组：

```
stdClass Object
(
    [223] => Array
        (

            [0] => stdClass Object
                (
                    [tribeName] => TTTT
                    [tribeid] => 31
                    [numusers] => 10
                    [dateCreated] => 2012-05-28 18:30:34
                )

            [1] => stdClass Object
                (
                    [tribeName] => KKKKK
                    [tribeid] => 32
                    [numusers] => 11
                    [dateCreated] => 2012-05-28 18:32:12
                )

            [2] => stdClass Object
                (
                    [tribeName] => RRRR
                    [tribeid] => 33
                    [numusers] => 5
                    [dateCreated] => 2012-05-28 18:53:17
                )

            [3] => stdClass Object
                (
                    [tribeName] => mytehhhhhst2
                    [tribeid] => 34
                    [numusers] => 4
                    [dateCreated] => 2012-05-28 18:56:15
                )

            [4] => stdClass Object
                (
                    [tribeName] => yog
                    [tribeid] => 58
                    [numusers] => 1
                    [dateCreated] => 2012-06-01 12:32:47
                )

            [5] => stdClass Object
                (
                    [tribeName] => newFunc
                    [tribeid] => 63
                    [numusers] => 1
                    [dateCreated] => 2012-06-01 12:45:01
                )

            [6] => stdClass Object
                (
                    [tribeName] => Jghj
                    [numusers] => 0
                    [tribeid] => 
                )
        )
) 
```

这里，223 是键值，每次都是新的。我将其作为键（$array）访问。我会得到 223 的价值。但是我怎样才能访问它的值，例如tribeName？请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:42:39.287

尝试这个

```
 foreach ($array as $value) {
           foreach($value as $data )
               echo $data->tribeName;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:27:54.213

Try this..

```
foreach($var as $key => $val)
    {
            $kkv = $var[$key];
            $inarray = $kkv[0];
            print_r($inarray);
            echo $inarray['tribeName'];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T09:39:26.410

AFAIK，您将不得不遍历数组并手动检查每个元素。当然，您也可以为此编写一个函数。

如果您需要比较整个数组元素，而不仅仅是其中的一个成员，您可以使用[array_search](http://php.net/manual/en/function.array-search.php)来确定键。

# backbone.js - 许多基于backbone.js的框架在现实世界中的优势和劣势是什么？

> ID：10847852
> 
> 赞同：186
> 
> 时间：2012-06-01T09:36:28.833
> 
> 标签：backbone.js, javascript-framework

希望有人可以分享他们对一些最新出现的backbone.js 变体的经验。我在几个项目中在主干/下划线/需求方面有一些很好的经验，我想朝着更高级的复杂应用程序结构解决方案迈出下一步。

我知道以下框架可用：

*   [木偶](https://github.com/derickbailey/backbone.marionette)
*   [Geppetto（基于木偶）](http://modeln.github.com/backbone.geppetto/#geppetto-context/job-1-event-bus)
*   [卓别林](https://github.com/chaplinjs/chaplin),[卓别林 - 卓别林样板](https://github.com/pabera/chaplin-boilerplate)
*   [椎骨](https://github.com/hautelook/vertebrae)
*   [布局管理器](https://github.com/tbranyen/backbone.layoutmanager)
*   [胸部](http://walmartlabs.github.com/thorax/)
*   [光环](https://github.com/addyosmani/aura)
*   [卢卡](https://github.com/datapimp/luca)
*   [新加坡](http://fahad19.github.com/singool/)
*   [后台堆栈](https://github.com/pwalczyszyn/backstack)
*   [骨干用户界面](http://perka.github.com/backbone-ui/?utm_source=javascriptweekly&utm_medium=email)
*   [绿巨人](https://github.com/davps/backbone.hulk)

*   [BTW - 大型项目的绝佳起点](http://boilerplatejs.org/)

可能我错过了一些。

这里有一个关于差异的简短介绍：

*   [演讲台谈话链接](https://speakerdeck.com/u/molily/p/application-frameworks-on-top-of-backbonejs-talk-at-appsberlinjs)

但它很笼统。我想知道是否有人可以分享他们使用这些框架在现实生活中的应用程序的经验。

选择其中一个有什么好处？例如，木偶什么时候会成为比卓别林更好的解决方案，或者为什么椎骨更适合某些应用。

当然，显而易见的答案将是“**使用最适合您需要的东西**”，但我缺乏使用这些框架的经验来了解它们的强度/目的/优势或首选方案。

谢谢！

**编辑 1：** 找到这篇文章： [Backbone.Marionette vs Backbone-Boilerplate](https://stackoverflow.com/questions/10510050/backbone-marionette-vs-backbone-boilerplate)

**编辑 2：** **Mathias schafer（卓别林）通过邮件回答：**

简而言之，当前的结构接近于 1.0 版，因为它已经在生产中使用。我们不打算在 1.0 之前添加大的新功能或破坏 API 更改。

Marionette 肯定是目前最全面、最稳定的库。它解决了使用 Backbone 开发 JS 应用程序的几个方面。例如，它有一个强大的视图层，Backbone 本身完全无效。当然，你会发现有些方面并不能满足你的要求，你可能会觉得有必要围绕木偶搭建一个结构。

相比之下，卓别林专注于 Backbone 应用程序的一个很小但非常重要的方面，即整体应用程序结构和模块生命周期。在这方面，卓别林非常自以为是，更像是一个框架而不是一个库（就像“你的代码调用一个库，一个框架调用你的代码”）。Chaplin 提供了一些位于各个应用程序模块之上并控制整个应用程序状态的中心类。这为您的应用程序提供了一个传统的结构，例如 Ruby on Rails。

在 Chaplin 中，您声明了一些映射到控制器的路由，并且一旦路由匹配，Chaplin 就会启动控制器。它还负责处理旧控制器，以及显示和隐藏控制器应该创建的主视图。这是基本的想法，但卓别林会处理丑陋的细节以使其顺利运行。

这种结构有两个原则： - 模块化、解耦和沙盒 - 使用发布/订阅和中介者的跨模块通信

当然，这些模式在软件开发领域并不新鲜，而且卓别林并不是唯一将它们应用于 Backbone.js 应用程序的库。

Chaplin 还为 View 层提供了增强功能，例如高度复杂的 CollectionView，但总体上不如 Marionette 及其区域和布局。但是使用卓别林视图提供的方法编写这样的元类相对容易。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-06-13T13:50:15.257

您正在研究的大多数（全部？）框架都解决了相同的问题，但它们以略有不同的方式来解决问题，目标也略有不同。

我认为可以公平地说，所有这些项目都会解决这些类别的问题：

*   提供一组合理的默认值
*   减少样板代码
*   在 BackboneJS 构建块之上提供应用程序结构
*   提取作者在其应用程序中使用的模式

我从 2011 年 12 月开始制作的 Marionette 也有一些非常明确的目标和理想：

*   复合应用架构
*   企业消息传递模式影响
*   模块化选项
*   增量使用（没有全有或全无要求）
*   没有服务器锁定
*   轻松更改这些默认值
*   代码作为配置/过度配置

我并不是说其他​​框架都没有这些相同的目标。但我认为 Marionette 的独特性来自于这些目标的结合。

## 复合应用架构

我在使用 WinForms 和 C# 的胖客户端分布式软件系统中工作了 5 年多。我为台式机、笔记本电脑（智能客户端）、移动设备和 Web 应用程序构建了应用程序，它们都共享一个核心功能集并多次使用相同的服务器后端。在这段时间里，我了解了模块化的价值，并很快走上了复合应用程序设计的道路。

基本思想是“组合”应用程序的运行时体验并处理许多较小的、不一定相互了解的单独部分。它们向整个复合应用系统注册自己，然后通过各种解耦消息和调用的方式进行通信。

我在我的博客上写过一些关于这个的文章，介绍 Marionette 作为 Backbone 的复合应用程序架构：

*   [http://lostechies.com/derickbailey/2011/11/17/introduction-to-composite-javascript-apps/](http://lostechies.com/derickbailey/2011/11/17/introduction-to-composite-javascript-apps/)
*   [http://lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/](http://lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/)

## 消息队列/模式

同样大规模的分布式系统还利用消息队列、企业集成模式（消息传递模式）和服务总线来处理消息。最重要的是，这对我的解耦软件开发方法产生了巨大影响。我开始从这个角度看待单进程、内存中的 WinForms 应用程序，很快我的服务器端和 Web 应用程序开发也受此影响。

这直接转化为我对 Backbone 应用程序设计的看法。我在 Marionette 中为高级应用程序对象和您在应用程序中创建的每个模块提供了一个事件聚合器。

我考虑可以在我的模块之间发送的消息：命令消息、事件消息等等。我还将服务器端通信视为具有这些相同模式的消息。有些模式已经进入 Marionette，但有些还没有。

*   [http://lostechies.com/derickbailey/2011/07/19/references-routing-and-the-event-aggregator-coordinating-views-in-backbone-js/](http://lostechies.com/derickbailey/2011/07/19/references-routing-and-the-event-aggregator-coordinating-views-in-backbone-js/)
*   [http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/](http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/)
*   [http://lostechies.com/derickbailey/2009/12/23/understanding-the-application-controller-through-object-messaging-patterns/（WinForms](http://lostechies.com/derickbailey/2009/12/23/understanding-the-application-controller-through-object-messaging-patterns/)代码，但仍然适用）

## 模块化

代码的模块化非常重要。对于任何具有显着规模和复杂性的系统，都必须创建具有明确定义的入口和出口点的小型、封装良好的封装。

Marionette 通过其`module`定义直接提供模块化。但我也认识到有些人喜欢 RequireJS 并想使用它。所以我提供了标准构建和 RequireJS 兼容构建。

```
 MyApp = new Backbone.Marionette.Application();

MyApp.module("MyModule", function(MyModule, MyApp, Backbone, Marionette, $, _){

  // your module code goes here

}); 
```

（目前还没有可用的博客文章）

## 增量使用

这是我在 Marionette 的每一个部分中我能做到的核心理念之一：对 Marionette 的使用没有“全有或全无”的要求。

Backbone 本身对所有的构建块对象都采用了一种非常增量和模块化的方法。您可以自由选择要使用的那些，何时使用。我坚信这一原则，并努力确保 Marionette 以同样的方式工作。

为此，我为 Marionette 构建的大部分部件都是独立构建的，可以与 Backbone 的核心部件一起使用，并且可以更好地协同工作。

例如，几乎每个 Backbone 应用程序都需要在屏幕上的特定位置动态显示 Backbone 视图。这些应用程序还需要在新视图到位时处理关闭旧视图并清理内存。这就是 Marionette's`Region`发挥作用的地方。区域处理获取视图、在其上调用渲染以及将结果填充到 DOM 中的样板代码。然后将关闭该视图并为您清理它，前提是您的视图上有一个“关闭”方法。

```
 MyApp.addRegions({
  someRegion: "#some-div"
});

MyApp.someRegion.show(new MyView()); 
```

但是您不需要使用 Marionette 的视图来使用区域。唯一的要求是您在对象原型链中的某个点从 Backbone.View 扩展。如果您选择提供`close`方法、`onShow`方法或其他方式，木偶区会在合适的时间为您调用。

*   [http://lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/](http://lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/)
*   [http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)

## 无服务器锁定

我在各种服务器技术之上构建 Backbone / Marionette 应用程序：

*   ASP.NET MVC
*   Ruby on Rails
*   红宝石/西纳特拉
*   NodeJS / ExpressJS
*   PHP / 苗条
*   爪哇
*   二郎
*   ... 和更多

当涉及在浏览器中运行时，JavaScript 就是 JavaScript。服务器端 JavaScript 也很棒，但它对我如何编写基于浏览器的 JavaScript 的影响或影响为零。

由于我构建的项目和客户使用的后端技术的多样性，我不能也不会出于任何原因将 Marionette 锁定在单个服务器端技术堆栈中。我不会提供样板项目。我不会提供 ruby​​ gem 或 npm 包。我希望人们了解 Marionette 不需要特定的后端服务器。它是基于浏览器的 JavaScript，后端无关紧要。

当然，我完全支持其他人为他们的语言和框架提供包。我在 Wiki 中列出了这些包，并希望人们在看到需要时继续构建更多包。但这是社区支持，而不是 Marionette 的直接支持。

*   [https://github.com/derickbailey/backbone.marionette/wiki/Available-packages](https://github.com/derickbailey/backbone.marionette/wiki/Available-packages)

## 轻松更改默认值

为了减少样板代码并提供合理的默认值（这是我直接从 Tim Branyen 的 LayoutManager 中“借用”的一个想法），我认识到其他开发人员需要使用与我略有不同的实现。

我提供基于`<script>`模板内联标签的渲染，默认使用 Underscore.js 模板。但是您可以通过更改Marionette 中的`Renderer`和/或对象来替换它。`TempalteCache`这两个对象提供了渲染功能的核心，并且有一些 wiki 页面展示了如何针对特定的模板引擎和加载模板的不同方式进行更改。

使用 Marionette v0.9，它变得更加容易。例如，如果你想用预编译的模板替换内联模板脚本块的使用，你只需要替换 Renderer 上的一种方法：

```
 Backbone.Marionette.Renderer.render = function(template, data){
  return template(data);
}; 
```

`template`现在整个应用程序将使用您附加到视图属性的预编译模板。

我什至在 v0.9 中提供了一个 Marionette.Async 附加组件，它允许您支持异步呈现视图。我一直在努力尽可能简单地替换 Marionette 中的默认行为。

## 代码作为配置

在某些情况下，我是“约定优于配置”的粉丝。这是完成工作的一种强有力的方式，而 Marionette 提供了一些这样的方法——虽然不是太多，老实说。许多其他框架 - 尤其是 LayoutManager - 提供了比 Marionette 更多的配置约定。

这是有目的和意图的。

我已经构建了足够多的 JavaScript 插件、框架、附加组件和应用程序，以了解尝试让约定以有意义且快速的方式工作的痛苦。它可以快速完成，但通常以能够改变它为代价。

为此，我对 Marionette 采用了“代码即配置”的方法。我没有提供很多“配置”API，您可以在其中提供具有静态值的对象文字，这些值会改变一系列行为。相反，我通过带注释的源代码和实际的 API 文档记录了每个对象具有的方法，目的是告诉您如何更改 Marionette 以按照您想要的方式工作。

通过为 Marionette 对象提供简洁明了的 API，我创造了一种情况，即替换特定对象或整个 Marionette 的行为相对简单且非常灵活。我牺牲了“简单”的配置 API 调用来提供您自己的代码以使事情以您想要的方式工作的灵活性。

您不会在 Marionette 中找到“配置”或“选项”API。但是你会发现大量的方法，每一个都服务于一个非常特定的目的，带有清晰的签名，可以很容易地改变 Marionette 的工作方式。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-05T21:18:39.860

我目前正在使用带有布局管理器模块和把手的主干作为模板引擎，我发现使用已经存在的 Grails 后端设置一个小应用程序非常容易。在开始使用布局管理器之前，我阅读了有关木偶和卓别林的文章，在我看来两者都非常强大但复杂。然后我想起了我最初选择backbone.js的原因：简单。所有这些框架都在添加主干设计中遗漏的内容。我并不是说一个框架不好，但是如果我需要更复杂的东西，我会尝试其他项目，比如 ember.js 或 sproutcore，因为它们有一个独特的代码库，并且在他们的开发人员心中有一个目标。在这里，我们在另一个框架之上有框架。当然，主干不仅是构建应用程序的主干，也是编写一些更强大的库的主干，但我认为唯一真正糟糕的是视图层，因为缺少布局管理器和嵌套视图的可能性。使用布局管理器可以很好地填补空白。

所以，我对你的问题的回答是：从按原样使用主干开始，问问自己缺少什么以及你对框架的期望是什么。如果你发现主干遗漏了太多东西，那就去其他框架中搜索它们，然后选择最接近你需要的那个。如果你仍然对选择没有信心，也许主干不适合你，你必须寻找其他解决方案（ember.js、sproutcore、ExtJs、JavaScript MVC 都很好）。如果您有编写客户端应用程序的经验，那么您实际上并不需要所有框架的经验来选择合适的框架（当然是对您而言）

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-21T04:10:51.210

我在 BenchPrep 工作时开发了[Luca 框架](http://datapimp.com/luca)，我们用它在主干.js 库之上开发了几个大型单页应用程序。

几年前我使用 ExtJS 并从该框架中窃取了我最喜欢的概念，例如组件驱动的架构，您将视图开发为独立组件，然后使用容器视图将它们与其他组件连接在一起。由于它在很大程度上基于配置，因此在 Luca 中开发应用程序感觉很像用 JSON 描述对象。

这种方法的一个优点是能够跨多个应用程序或在应用程序的不同位置重用组件，只需使用 Backbone 的扩展进行微小的更改。只需对 JSON 配置进行细微调整，就可以很容易地尝试许多不同的组件布局/表示。

除了广泛的辅助/实用功能之外，Luca 还提供了许多更高级别的 Backbone 衍生产品，您可以以任何可以想象的方式拼凑起来以构建复杂的 UI。

**视图、组件、容器**

*   增强模型、视图、集合、路由器类
*   便于模型、集合、视图、应用程序及其各自管理器之间通信的配置选项。
*   容器（拆分/列布局、网格布局、选项卡视图、卡片/向导视图）
*   带有所有标准字段组件的 FormView，以及用于与 Backbone.Model 同步的助手
*   GridView，用于从 Luca.Collection 生成可滚动的网格元素
*   CollectionView，用于基于集合生成视图
*   工具栏/按钮

**Twitter Bootstrap 样式和标记免费**

*   Luca 与 Twitter 引导框架配合得非常好。只需设置 Luca.enableBootstrap = true 并包含 CSS，您的组件（例如选项卡视图、工具栏、按钮、表单、字段、网格等）将自动使用 Twitter Bootstrap 兼容标记和 CSS 类约定。
*   使用 Grid 系统进行布局，并以智能方式响应大多数 bootstrap 基础 css 类
*   Luca.Viewport 和 GridLayout 组件设置为与引导程序的响应式、流体或静态网格系统一起使用。
*   旨在为 twitter 引导组件提供一对一匹配，以将它们表示为可配置的主干视图

**应用程序组件**

*   基于 Backbone.Model 的状态机提供 getter/setter 方法和属性更改事件作​​为应用程序控制流的一种样式
*   集成控制器组件，它隐藏/显示应用程序页面以响应 Backbone.Router 或状态机事件
*   集成的集合管理器跟踪您创建的集合，允许您对它们进行范围、分组、为它们分配默认参数
*   一个套接字管理器，它是 websocket 服务之上的一个抽象层，它使推送像 Backbone.Event 一样简单
*   一个键盘事件路由器，它在关心响应此类事件的组件上触发命名键事件

**集合和模型增强**

*   集合基于[主干查询](https://github.com/davidgtonge/backbone_query)，它提供了一个非常类似于 mongoDb 的查询接口
*   只需设置 collection.localStorage = true 即可启用本地存储 Backbone.sync
*   自动填充其数据在页面加载时引导的集合
*   缓存方法/计算属性。缓存集合方法的结果，并过期缓存以响应集合或其模型上的更改/添加/删除事件
*   模型上的计算属性。基于复杂函数构建属性，并根据变化自动更新计算值

**事件和挂钩**

与库存的 Backbone 组件相比，Luca 组件在它们发出的事件方面更加自由。它们将发出诸如 before:initialize、after:initialize、before:render、after:render、activation、first:activation、deactivation、first:deactivation 之类的事件，这使您可以更精细地调整组件的行为。另外，通过在视图的@hooks 属性中定义一个事件，它会自动为您调用一个类似命名的函数（如果存在）。这可以防止许多提高可读性的回调样式代码。

您还可以配置 Luca.Events 类以将事件发布到全局发布/订阅通道，这使得构建大型应用程序更容易并有助于模块间通信。

**红宝石**

Luca 是专门针对 Rails 和 Sinatra API 开发的，因此目前针对特定堆栈进行了优化，但它绝不会将您锁定在特定服务器中。

Luca 作为配置为在资产管道上工作的 Ruby Gem 的一部分分发，或者作为可下载的 JS 文件分发。

您不需要使用 Rails 或 Sinatra。但如果你这样做，我已经包含了很多有用的东西：

*   带有 .luca 扩展名的文件被处理为带有 JST 样式变量插值的 HAML。（相当于 .jst.ejs.haml ）由资产管道
*   用于浏览器的测试工具，或基于 Jasmine 的无头单元测试以及许多 Backbone 和 Underscore 测试助手。
*   Luca 附带的开发工具集的 API 端点（稍后会详细介绍）
*   一个 API 端点，允许您以最少的配置将 Redis 用作 Luca.Collection 的无模式存储引擎

**开发工具**

*   Luca 应用程序可以使用 Luca 特定的帮助程序和命令启用浏览器内的咖啡脚本控制台，以帮助监视、检查、调试 Luca 应用程序和组件

![由 CoffeeScript 提供支持的浏览器开发控制台中的 Luca 示例](../Images/278be31056eb690cd71b65cb3ddd6211.png)

*   在 Rails Gem 和 Luca 基于 CodeMirror 的组件编辑器的帮助下，您可以使用 Coffeescript 直接在浏览器中编辑 Luca Framework 的源代码以及应用程序特定的组件。您将看到对您的编辑的即时反馈，受影响对象的实例将使用更新的原型进行刷新，并且您可以将更改保存到磁盘。

*   组件测试器是一个实时沙箱，用于单独使用构成应用程序的组件。它为您提供了用于修改组件原型、设置其依赖项和配置组件的工具。每次您进行编辑时，组件都会立即重新渲染。您可以直接在浏览器中查看和编辑组件生成的标记以及 CSS，并立即查看您的更改。这使它成为一个非常有价值的实验工具。

*   组件测试器将很快与 Jasmine 集成，因此您可以在编辑其代码时实时查看组件单元测试的结果

![组件测试仪截图](../Images/8518103ac874e627e97833a9c728ddf2.png)

Luca 是一项正在进行中的工作，但维护了一个稳定的 API（还没有 1.0），并且已经在几个大型生产应用程序中使用。它绝对是一个非常自以为是的框架，但我正在努力使其更加模块化。我正在积极处理文档和示例组件。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-06-05T22:34:31.620

我研究了使用 Backbone.js 构建的各种框架，并为 HauteLook 的一个项目构建了 Vertebrae。项目目标包括...动态脚本加载、AMD 模块格式、依赖管理、使用大部分开源库构建、组织包中的代码、优化和构建一个或多个单页应用程序、托管在完全缓存的服务器上，例如无服务器- 仅使用数据 API 编写脚本，对我来说最有趣的是，对项目使用行为驱动的开发。该项目的描述位于：[http ://www.hautelooktech.com/2012/05/24/vertebrae-front-end-framework-built-with-backbone-js-and-requirejs-using-amd/](http://www.hautelooktech.com/2012/05/24/vertebrae-front-end-framework-built-with-backbone-js-and-requirejs-using-amd/)

**我们的问题：**

选定的库（jQuery、Underscore.js、Backbone.js、RequireJS、Mustache）提供模块加载、依赖管理、应用程序结构（用于模型、集合、视图和路由）、与 API 的异步交互、各种实用程序和对象来管理异步行为，例如（承诺）延迟、回调。完成框架所需的其余逻辑包括：

*   管理单页应用程序状态的对象（模型）；
*   一个布局管理器，用于呈现、排列/转换和清除视图，以及
*   响应路由、获取/设置应用程序状态并将工作移交给布局管理器的控制器。

**我们的解决方案**（在 Vertebrae 中实施）：

*应用程序状态管理器*-

应用程序管理器将数据存储在内存中，并将数据持久存储在浏览器存储中，以为公共数据/元数据提供资源。还提供数据（状态）以根据先前的交互（例如选择的选项卡、应用的过滤器）重建页面视图。应用程序状态管理器提供资源检索状态的策略。旨在充当状态机。

*布局管理器*-

布局管理器具有一个或多个视图以及每个（渲染的）视图的文档（DOM）目的地。一个页面可以在许多视图之间转换，因此布局管理器跟踪视图状态，例如渲染、未渲染、显示、未显示。您可以使用布局管理器延迟加载和呈现站点访问者很可能请求的（分离的）视图，例如页面上的选项卡更改。视图状态之间的转换由该对象管理。可以清除整个布局，以便删除视图对象及其绑定，为垃圾收集准备这些对象（防止内存泄漏）。布局管理器还与控制器通信视图状态。

*控制器*-

控制器对象由路由处理函数调用，负责获取相关状态（应用程序模型）以生成页面（布局），（还负责在路由更改时设置状态）。控制器将所请求页面的相关数据（模型/集合）和构造的视图对象传递给布局管理器。作为副作用，控制器的使用可以防止路由对象变得臃肿和混乱。路由应该映射到控制器，然后控制器启动页面视图，保持路由处理功能精简。

Todos 应用程序在开发模式下托管并在 Heroku 上进行了优化...

*   [http://vertebrae-framework.herokuapp.com/](http://vertebrae-framework.herokuapp.com/)
*   [http://vertebrae-optimized.herokuapp.com/](http://vertebrae-optimized.herokuapp.com/)

借用了其他框架中的许多概念，例如 Derick Bailey 指出的需要破坏视图来预览内存泄漏 - [http://lostechies.com/derickbailey/](http://lostechies.com/derickbailey/)；Tim Branyen 的布局管理器[http://tbranyen.github.com/backbone.layoutmanager/](http://tbranyen.github.com/backbone.layoutmanager/)

总之，Backbone.js 旨在成为您应用程序中的一个工具，Backbone.js 库不提供构建应用程序所需的所有架构，但确实提供了与 API 和可靠代码结构的良好交互...视图（也像控制器一样）和你的数据层模型和集合，最后是路由。我们构建 Vertebrae 以实现我们项目的目标，并决定将代码提取为框架供其他人使用、学习或其他。

我认为你的问题的答案是从所有框架中学习并使用你需要的东西来实现你的目标，如果你发现你的项目目标与使用 Backbone 构建的框架之一非常吻合，那么很好，否则构建你自己的框架社区分享了很多很好的例子。或者，如果您发现自己在应用程序的方向上有点迷失，那么选择一些更有主见和结构化的东西，也许是 Ember.js。很棒的事情是有各种各样的选择可以帮助您使用 (MVX) MVC 之类的模式和 JavaScript 进行编码。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-04-11T09:28:07.120

我是 Chaplin 的合著者，我在 Chaplin.js 和 Marionette.js 之间进行了深入比较：

[http://9elements.com/io/index.php/comparison-of-marionette-and-chaplin/](http://9elements.com/io/index.php/comparison-of-marionette-and-chaplin/)

这不是“枪战”，而是试图以平衡的方式解释这两种方法。

# asp.net - 使用 Get 和 value 进行自动化

> ID：10847855
> 
> 赞同：1
> 
> 时间：2012-06-01T09:36:45.303
> 
> 标签：asp.net

我想验证一个请求 - 传递它 - 然后它在服务器上 stranivaya 如果相同 - 那 avtorihovalsya - 如果没有，那么就没有

可以做什么 iskusttveno - 不使用控件（也使用类）：从 zaregestirovannogo 中的 nezaregestirovannogo 翻译用户：

例如：

我提出请求[http://Login.aspx?Hash=jiojor](http://Login.aspx?Hash=jiojor)

如果具有 Hash = jiojor 的数据库用户，请检查 Page_Load

如果是，那么：

Register.User(nameUser) = true 并且用户已登录 nameUser

# mysql - MySQL MATCH AGAINST 的问题

> ID：10847861
> 
> 赞同：1
> 
> 时间：2012-06-01T09:37:05.617
> 
> 标签：mysql

我正在使用 MATCH AGAINST 来搜索数据库中的多个字段，但结果有问题。

查询是：

```
MATCH(productname, stockcode, productdescription, additional_1, additional_2, additional_3, additional_4, additional_5, additional_6, additional_7, additional_8) AGAINST ('red* tile*' IN BOOLEAN mode) 
```

从查询中，我想要 "red%" 或 "tile%" 结果，但这是返回包含单词 'requiRED' 的记录，这是我不想要的。

这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:39:18.657

很可能，您已将`ft_min_word_len`默认值设置为`4`.

`red`在此设置中不会被索引或匹配，只是在查询中被忽略。

`ft_min_word_len`如果要匹配，请更改为较小的值`red`（如果有索引，则需要重建索引）。

看到[这个小提琴](http://www.sqlfiddle.com/#!2/cbbe5/2)。

**更新：**

如果您希望两个单词都匹配，请使用以下命令：

```
AGAINST ('+red* +tile*' IN BOOLEAN mode) 
```

# forms - 检查 extjs 中表单发送的值

> ID：10847863
> 
> 赞同：0
> 
> 时间：2012-06-01T09:37:13.823
> 
> 标签：forms, extjs, submit, handler, sencha-architect

我在 extjs 中使用了一个字段集并想提交值。现在我想用警报检查值，但我不知道我该怎么做。

```
{
   "xtype": "fieldset",
   "height": 377,
   "id": "configurationDriversConfiguration",
   "width": 648,
   "layout": {
      "type": "auto"
   },
   "collapsible": true,
   "title": "Driver Configuration",
   "items": [
      {
         "xtype": "button",
         "id": "configurationDriversAdd",
         "text": "Add"
      },
      {
         "xtype": "button",
         "id": "configurationDriversDelete",
         "text": "Delete"
      },
      {
         "xtype": "textfield",
         "id": "configurationDriversCode",
         "fieldLabel": "Driver Code"
      },
      {
         "xtype": "textfield",
         "id": "configurationDriversName",
         "fieldLabel": "Driver Name"
      },
      {
         "xtype": "textfield",
         "id": "configurationDriversLicense",
         "fieldLabel": "Driver License nr"
      },
      {
         "xtype": "textfield",
         "id": "configurationDriversGivenName",
         "fieldLabel": "Driver Given Name"
      },
      {
         "xtype": "textfield",
         "id": "configurationDriversFamilyName",
         "fieldLabel": "Driver Familiy Name"
      },
      {
         "xtype": "textfield",
         "id": "configurationDriversPhone",
         "fieldLabel": "Driver Phone Nr"
      },
      {
         "xtype": "textfield",
         "id": "configurationDriversEmail",
         "fieldLabel": "Driver Email"
      },
      {
         "xtype": "combobox",
         "id": "configurationDriversProvider",
         "fieldLabel": "Provider",
         "displayField": "name",
         "store": "comboProviders",
         "valueField": "id"
      },
      {
         "xtype": "textareafield",
         "id": "configurationDriversMemo",
         "fieldLabel": "Memo"
      },
      {
         "xtype": "button",
         "height": 37,
         "id": "configurationDriversSave",
         "text": "Save"
      }
   ]
} 
```

是我的代码。当我单击保存时，我想查看所有值。我使用 Sencha Architect，但找不到处理程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:53:04.203

在“保存”按钮定义中添加如下内容：

```
handler: function(btn) {
   var fieldSet = btn.up('fieldset');
   Ext.Array.each(fieldset.items, function(i) {
       console.log(i.getValue());
   });
} 
```

# objective-c - Objective-C 序列化复杂对象列表

> ID：10847865
> 
> 赞同：2
> 
> 时间：2012-06-01T09:37:20.843
> 
> 标签：objective-c

我有一个如下所示的类列表：

```
@interface AISlideItem: NSObject
{
    NSString*  PlaceHolderName;
    NSUInteger PlaceHolderID;
}
@property (nonatomic, strong) NSString* PlaceHolderName;
@property (nonatomic) NSUInteger PlaceHolderID;

@end

@interface AITitleSlideItem : AISlideItem
{
    NSString* Title;
}
@property (nonatomic, strong) NSString* Title;
@end

@interface AIParagraphSlideItem : AISlideItem
{
    NSMutableArray* Paragraphs;
}
@property (nonatomic, strong) NSMutableArray* Paragraphs;
@end

@interface AITextSlideItem : AISlideItem
{
    NSString* Text;
}
@property (nonatomic, strong) NSString* Text;
@end

@interface AIPictureSlideItem : AISlideItem
{
    NSMutableData* Picture;
}
@property (nonatomic, strong) NSMutableData* Picture;
@end

@interface AISlideContent : NSObject
{
    NSString*       LayoutName;
    NSMutableArray* Items;
}
@property (nonatomic,strong) NSString* LayoutName;
@property (nonatomic,strong) NSMutableArray* Items;
@end

@interface ContentParaghraph : NSObject
{
    NSInteger Level;
    NSString* Text;
}
@property (nonatomic) NSInteger Level;
@property (nonatomic, strong) NSString* Text;
@end 
```

我想将一个包含 AISlideContent 对象的 NSMutableArray 序列化为 json。json 中的每个项目的名称都应该与变量的名称相同。

我怎样才能做到这一点？

这是一个示例 JSON：

```
{
  d: [
     {
          Items: [
          {
              placeHolderName: "1",
              Title: "Title Slide"
          },
          {
              placeHolderName: "2",
              Paragraphs: [
                 {
                     Level: 0,
                     Text: "Title content"
                 }
              ]
          }
       ],
       LayoutName: "Title"
     },
     {
         Items: [
         {
              placeHolderName: "1",
              Title: "Slide 2"
     },
     {
              placeHolderName: "2",
              Paragraphs: [
              {
                 Level: 0,
                 Text: "Line 1"
              },
              {
                 Level: 0,
                 Text: "Line 2"
              },
              {
                 Level: 1,
                 Text: "Line 2 indented"
              },
              {
                 Level: 2,
                 Text: "Line 3 more indented"
              },
              {
                 Level: 0,
                 Text: "Line 4"
              }
              ]
     }
      ],
      LayoutName: "Title and Content"
     },
     {
           Items: [
           {
                placeHolderName: "1",
                Title: "Slide 3"
           },
           {
                placeHolderName: "3",
                Picture: [

                ]
           }
       ],
       LayoutName: "Picture above Caption"
      }
      ]
} 
```

ps 我启用了 ARC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:50:06.433

您必须遵循[`NSCoding`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)协议并覆盖`encodeObject`和`decodeObject`方法。

[这](http://samsoff.es/posts/archiving-objective-c-objects-with-nscoding)是一个示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T21:42:23.987

Objective-C JSON 库定义了 Objective-C 类和相应 JSON 元素之间的映射。例如，一个 NSArray 将被映射到一个 JSON 数组，一个 NSDictionary 将被映射到一个 JSON 对象，一个 NSString 到一个 JSON 字符串等等。

JSON 序列化器的实现将遍历对象层次结构并使用自省来确定 Objective-C 类类型，或者在内部为那些可以序列化的 Objective-C 类实现 Category，然后按顺序调用/调用适当的序列化方法将字符写入流。

现在，拥有一个包含具有任意类的对象的对象层次结构并尝试运行序列化程序可能会失败，因为它不知道如何序列化 NSDate 例如。

此问题的一个可能解决方案是查看您正在使用的 JSON 库的文档，并确定是否以及如何实现这一点。AFAIK，Cocoa 的内置 NSJSONSerialization 不能做到这一点。

最近的**JSONKit**可能对你有用，它使用回调机制。不过，我并没有深入研究它。

**另一方面， JPJson 库**使用 Category 方法。您只需为您的自定义类分别定义一个类别，即您想要序列化（例如 NSDate）并实现协议的内置 Cocoa 类。一旦实现（这在 JPJson 中很容易），即使在深度嵌套的层次结构中，此类的对象也将被正确序列化，并维护其他序列化选项 - 如“漂亮打印”、Unicode 编码、字符串转义等。

查看您的示例，使用 JPJson 似乎很容易实现。JPJson 包在 GitHub 上，还有一个示例，展示了如何序列化这些自定义类。

您可以查看[https://github.com/couchdeveloper/JPJson](https://github.com/couchdeveloper/JPJson)，尤其是 Sample6。

# c# - 双工通道故障事件不会在第二次连接尝试时出现

> ID：10847877
> 
> 赞同：2
> 
> 时间：2012-06-01T09:38:03.757
> 
> 标签：c#, .net, wcf, wcf-4, duplex-channel

我有常规的 net.tcp WCF 服务客户端和常规的 net.tcp**双工**（即带有回调）WCF 服务客户端。我已经实现了一些逻辑来不断地重新实例化连接，以防服务出现故障。

它们的创建方式完全相同：

```
FooServiceClient Create()
{
    var client = new FooServiceClient(ChannelBinding);
    client.Faulted += this.FaultedHandler;
    client.Ping(); // An empty service function to make sure connection is OK
    return client;
}

BarServiceClient Create()
{
    var duplexClient = new BarServiceClient(new InstanceContext(this.barServiceCallback));
    duplexClient.Faulted += this.FaultedHandler;
    duplexClient.Ping(); // An empty service function to make sure connection is OK
    return duplexClient;
}

public class Watcher
{
public Watcher()
{
    this.CommunicationObject = this.Create();
}

ICommunicationObject CommunicationObject { get; private set; }

void FaultedHandler(object sender, EventArgs ea)
{
    this.CommunicationObject.Abort();
    this.CommunicationObject.Faulted -= this.FaultedHandler;
    this.CommunicationObject = this.Create();
}
} 
```

`FaultedHandler()`中止通道并使用上面的代码**重新创建它。**

重新连接逻辑工作得很好，在`FooServiceClient`许多故障后重新连接。然而，几乎相同但双工`BarServiceClient`仅从第一个`BarServiceClient`实例接收故障事件，即**一次**。

为什么只有双工的第一个实例`BarServiceClient`得到故障事件？有什么解决方法吗？

* * *

一个类似的未回答问题：[WCF Reliable session without transport security will not faulted event on time](https://stackoverflow.com/questions/4703732/wcf-reliable-session-without-transport-security-will-not-faulted-event-on-time)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:48:30.213

经过两天与 WCF 的战争后，我找到了一种解决方法。

有时 WCF 会触发`Faulted`事件，但有时不会。但是，该`Closed`事件总是被触发，尤其是在`Abort()`调用之后。

所以我调用which 有效地触发`Abort()`事件。随后，执行重新连接。如果框架从未触发 when ，则始终触发该事件。`FaultedHandler``Closed``ClosedHandler``Faulted``Closed`

```
BarServiceClient Create()
{
    var duplexClient = new BarServiceClient(new InstanceContext(this.barServiceCallback));
    duplexClient.Faulted += this.FaultedHandler;
    duplexClient.Closed += this.ClosedHandler;
    duplexClient.Ping(); // An empty service function to make sure connection is OK
    return duplexClient;
}

public class Watcher
{
public Watcher()
{
    this.CommunicationObject = this.Create();
}

ICommunicationObject CommunicationObject { get; private set; }

void FaultedHandler(object sender, EventArgs ea)
{
    this.CommunicationObject.Abort();
}

void ClosedHandler(object sender, EventArgs ea)
{
    this.CommunicationObject.Faulted -= this.FaultedHandler;
    this.CommunicationObject.Closed -= this.ClosedHandler;
    this.CommunicationObject = this.Create();
}
} 
```

# android - 当我为textView设置背景时，Android如何垂直居中文本

> ID：10847880
> 
> 赞同：1
> 
> 时间：2012-06-01T09:38:09.507
> 
> 标签：android, xml, layout, textview, alignment

我需要将 TextView 居中在紫色背景的中心![在此处输入图像描述](../Images/5ae5021fa1da215de2e4b6f1639f5cfd.png)

这是 XML：

```
<TextView
    android:id="@+id/widget33"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="somePurplePNG"
    android:text="TextView"
    android:gravity="left"
    android:layout_alignParentTop="true"
    android:layout_alignParentLeft="true" /> 
```

有任何想法吗？谢谢 PS：我无法创建包装 textview 并定义背景的布局。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T09:42:13.127

像这样更改文本视图的**重力**

```
android:gravity="center_horizontal" 
```

或者

```
android:gravity="center" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:41:57.383

使用解决

```
android:gravity="center_vertical" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T09:54:01.230

以这种方式使用 TextView

```
 <TextView
    android:id="@+id/widget33"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    aandroid:background="@drawable/somePurplePNG"
    android:text="TextView"
    android:gravity="center"/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T08:32:06.893

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<TextView
    android:id="@+id/widget33"
    android:layout_width="match_parent"
    android:layout_height="64dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:gravity="center"
    android:text="TextView" />

</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-06T14:50:59.097

您可以在 java 类中以编程方式对齐文本视图中的文本

```
TextView YourTextView = (TextView)findViewById(R.id.textViewid);
//This will align text in both horizontal and Vertical of its container
YourTextView.setGravity(Gravity.CENTER);

//Place object in the vertical center of its container
YourTextView.setGravity(Gravity.CENTER_HORIZONTAL);

//Place object in the vertical center of its container
YourTextView.setGravity(Gravity.CENTER_VERTICAL); 
```

# iphone - 以编程方式更改图像的颜色

> ID：10847890
> 
> 赞同：1
> 
> 时间：2012-06-01T09:38:54.850
> 
> 标签：iphone, objective-c, ios

我有一个奶油色的图像，我希望能够动态地给它一个蓝色（例如）颜色，而不会通过使用另一个图像来伪造颜色变化。

iOS中是否适合这种事情？任何人都能够提供一些实现这种事情的指针吗？

非常感谢，-代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:40:18.600

也许[GPUImage](https://github.com/BradLarson/GPUImage)可以解决您的问题：

> GPUImage 框架是一个 BSD 许可的 iOS 库，可让您将 GPU 加速的滤镜和其他效果应用于图像、实时摄像机视频和电影。与 Core Image（iOS 5.0 的一部分）相比，GPUImage 允许您编写自己的自定义过滤器，支持部署到 iOS 4.0，并具有更简单的界面。但是，它目前缺少 Core Image 的一些更高级的功能，例如面部检测。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T09:49:53.673

如果你是 RGB 专家，你可以使用 CGImage 对图像做任何事情。您可以遍历每个像素并将奶油像素转换为蓝色！

以下仅供参考，请勿将其视为答案。

```
-(UIImage *) getNewImageFromImage:(UIImage *)image {
    const int RED = 1, GREEN = 2, BLUE = 3;

    CGRect imageRect = CGRectMake(0, 0, image.size.width*2, image.size.height*2);

    int width = imageRect.size.width, height = imageRect.size.height;

    uint32_t * pixels = (uint32_t *) malloc(width*height*sizeof(uint32_t));
    memset(pixels, 0, width * height * sizeof(uint32_t));

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(pixels, width, height, 8, width * sizeof(uint32_t), colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedLast);

    CGContextDrawImage(context, CGRectMake(0, 0, width, height), [image CGImage]);

    for(int y = 0; y < height; y++) {
        for(int x = 0; x < width; x++) {
            uint8_t * rgbaPixel = (uint8_t *) &pixels[y*width+x];
            rgbaPixel[RED] = <DO_SOMETHING>;
            rgbaPixel[GREEN] = <DO_SOMETHING>;
            rgbaPixel[BLUE] = <DO_SOMETHING>;
        }
    }

    CGImageRef newImage = CGBitmapContextCreateImage(context);

    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace);
    free(pixels);

    UIImage * resultUIImage = [UIImage imageWithCGImage:newImage];
    CGImageRelease(newImage);

    return resultUIImage;
} 
```

# nutch - Nutch 不会抓取多个站点

> ID：10847893
> 
> 赞同：0
> 
> 时间：2012-06-01T09:38:58.943
> 
> 标签：nutch, web-crawler, multiple-sites

我正在尝试使用 Nutch 抓取多个站点。我的 seed.txt 看起来像这样：

```
http://1.a.b/
http://2.a.b/ 
```

我的 regex-urlfilter.txt 看起来像这样：

```
# skip file: ftp: and mailto: urls
-^(file|ftp|mailto):

# skip image and other suffixes we can't yet parse
# for a more extensive coverage use the urlfilter-suffix plugin
-\.(gif|GIF|jpg|JPG|png|PNG|ico|ICO|css|CSS|sit|SIT|eps|EPS|wmf|WMF|zip|ZIP|ppt|PPT|mpg|MPG|xls|XLS|gz|GZ|rpm|RPM|tgz|TGZ|mov|MOV|exe|EXE|jpeg|JPEG|bmp|BMP|js|JS)$

# skip URLs containing certain characters as probable queries, etc.
-[?*!@=]

# skip URLs with slash-delimited segment that repeats 3+ times, to break loops
-.*(/[^/]+)/[^/]+\1/[^/]+\1/

# accept anything else
#+.
+^http://1.a.b/*
+^http://2.a.b/* 
```

我在最后一部分尝试了以下内容：

```
+^http://([a-z0-9]*\.)*a.b/* 
```

唯一被抓取的站点是第一个站点。所有其他配置均为默认配置。

我运行以下命令：

```
bin/nutch crawl urls -solr http://localhost:8984/solr/ -dir crawl -depth 10 -topN 10 
```

有任何想法吗？！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:55:08.990

在 regex-urlfilter.txt 试试这个：

旧设置：

```
# accept anything else
#+.
+^http://1.a.b/*
+^http://2.a.b/* 
```

新服务：

```
# accept anything else
+. 
```

# java - 不通过 BufferedImage 解压 TIFF 文件

> ID：10847901
> 
> 赞同：0
> 
> 时间：2012-06-01T09:39:20.530
> 
> 标签：java, tiff, jai, javax.imageio

我收到需要作为未压缩 TIFF 文件写入其他地方的大型 CCITT Group 4 压缩 TIFF 文件。我正在使用 jai_imageio TIFF 读取器和写入器来执行此操作，只要图像的乘积 _width * height_ 适合整数，它就可以很好地工作。

这是我正在使用的代码：

```
TIFFImageReaderSpi readerSpi= new TIFFImageReaderSpi();
ImageReader imageReader = readerSpi.createReaderInstance();
byte[] data = blobManager.getObjectForIdAndVersion(id, version);
ImageInputStream imageInputStream = ImageIO.createImageInputStream(data); 
imageReader.setInput(imageInputStream);

TIFFImageWriterSpi writerSpi = new TIFFImageWriterSpi();
ImageWriter imageWriter = writerSpi.createWriterInstance();
ImageWriteParam imageWriteParam = imageWriter.getDefaultWriteParam();
imageWriteParam.setCompressionMode(ImageWriteParam.MODE_DISABLED);
//bufferFile is created in the constructor
ImageOutputStream imageOutputStream = ImageIO.createImageOutputStream(bufferFile);
imageWriter.setOutput(imageOutputStream);

//Now read the bitmap
BufferedImage bufferedImage = imageReader.read(0);
IIOImage iIOImage = new IIOImage(bufferedImage, null, null);
//and write it
imageWriter.write(null, iIOImage, imageWriteParam); 
```

不幸的是，我收到的文件通常非常大，无法创建 BufferedImage。我一直在尝试找到一种从 ImageReader 直接流式传输到 ImageWriter 的方法，但我不知道如何做到这一点。有人有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:44:53.127

您可以使用 TIFF 切片将 TIFF 分割成更小的部分（“切片”）。如果您控制创建大图像的代码，JAI 允许您逐块检索图像内容。

下面是一个关于如何使用 JAI 创建平铺图像的示例：

```
ColorModel cm = source.createColorModel();
// SampleModel with the tilesize
SampleModel sm = cm.createCompatibleSampleModel(tileWidth, tileHeight);
TiledImage image = new TiledImage(0, 0, imageWidth, imageHeight, 0, 0, sm, cm);

TIFFEncodeParam tep = new TIFFEncodeParam();
tep.setTileSize(tileWidth, tileHeight); // Set tile size to avoid OOM
tep.setWriteTiled(true);
JAI.create("filestore", image, filepath, "TIFF", tep); 
```

如果你不能控制 TIFF 的制作，我对 JAI 的了解太有限，帮不上什么忙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:46:39.507

我遇到了一些问题，最终结果可能会让您感到惊讶：

我最终使用 Runtime.exec() 方法使用一些命令行选项调用 IrfanView。这样，我不担心压缩或大小，它只是为我工作并在正确的文件夹中输出正确的文件。

如果你在 Linux 上，你可以使用 ImageMagik 或类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:50:21.363

为您的 Java VM 提供更多内存。

如果这不起作用，请查看[JAI 源代码中的 TIFF 插件的源代码](http://java.net/projects/jai-imageio-core/sources/svn/show/trunk/src/share/classes/com/sun/media/imageioimpl/plugins/tiff)。您也许可以编写自己的处理器，它只是使用流式方法解压缩数据结构（因此您永远不必随时将整个图像保存在内存中）。

如果这也不起作用，请查看[JNA](https://github.com/twall/jna)，它允许您从 Java 调用 DLL 中的代码（不需要 C 代码；一切都由纯 Java 完成，与 Sun 的 JNI API 不同）。

# iphone - 使用 ASIFormDataRequest 上传文件不起作用

> ID：10847902
> 
> 赞同：0
> 
> 时间：2012-06-01T09:39:24.233
> 
> 标签：iphone, file-upload, upload, asihttprequest

我正在使用 ASIHTTPRequest 框架尝试通过 iPhone 将文件上传到我的网络服务器。下面是代码。只要我不使用 setFile 方法，我就会从服务器返回 200，所以一切都很好。一旦我实现了 setFile，服务器就会返回 0。我预计会出现 401 或类似的情况，因为我可以想象我正在处理身份验证问题。我的服务器是IIS，为什么我在请求中使用NTLM方式。我错过了什么吗？

```
NSInteger httpStatus;
NSString *httpResponseString;
NSError *httpRequestError;

NSArray *paths = [[[NSArray alloc] init] autorelease];
paths =  NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filename = [documentsDirectory stringByAppendingPathComponent:@"abiliator_basis_de_ar.xml"];

NSURL *myURL = [NSURL URLWithString: @"http://my.url.com/"]; 
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:myURL];
[request setShouldPresentCredentialsBeforeChallenge:NO];
[request setUsername:@"myUserName"];
[request setPassword:@"myPassword"];
[request setDomain:@"myDomainName"];
[request setFile:[NSURL URLWithString:filename] forKey:@"xml"];
[request startSynchronous];
httpRequestError = [request error];
httpResponseString = [request responseString];
httpStatus = [request responseStatusCode];
if (!httpRequestError) {
    httpStatus = [request responseStatusCode];
    NSLog(@"Class %@, Method: %@ - OK login and filetransfer successful '%i'", self.myClassName, NSStringFromSelector(_cmd), httpStatus);
} 
else {            
    NSLog(@"Class %@, Method: %@ - Error '%i' occurred sending the http request", self.myClassName, NSStringFromSelector(_cmd), httpStatus);
} 
```

是的，文件存在，这里是 ls 的结果：

```
rene-stegs-macbook-pro:~ renesteg$ ls -ltr '/Users/renesteg/Library/Application Support/iPhone Simulator/5.1/Applications/417BD791-64BC-48D0-B519-F10C7F617E36/Documents/abiliator_basis_de_ar.xml'
-rw-r--r--@ 1 renesteg  staff  1062 22 Mai 13:44 /Users/renesteg/Library/Application Support/iPhone Simulator/5.1/Applications/417BD791-64BC-48D0-B519-F10C7F617E36/Documents/abiliator_basis_de_ar.xml 
```

这里是文件名的值：

```
Filename string is: '/Users/renesteg/Library/Application Support/iPhone Simulator/5.1/Applications/417BD791-64BC-48D0-B519-F10C7F617E36/Documents/abiliator_basis_de_ar.xml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:16:14.320

您在上传文件时做错了什么。

它需要喜欢这个

```
NSFileManager *fileManager = [NSFileManager defaultManager];

    request = [[[ASIFormDataRequest alloc] initWithURL:url] autorelease];
    [request setRequestMethod:@"POST"];
    [request setTimeOutSeconds:120];

    [request setPostFormat:ASIMultipartFormDataPostFormat];
    [request addRequestHeader:@"Content-Type" value:@"multipart/form-data"];  
    if ([fileManager fileExistsAtPath:filePath] == YES) {

        [request setFile:filePath withFileName:@"test.xml" andContentType:@"xml" forKey:@"FieldName"];
    } 
```

这里需要为fromdata请求设置文件路径。

希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:23:36.273

我认为发生错误是因为您应该使用：

```
[request setFile:[NSURL fileURLWithPath:filename] forKey:@"xml"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T10:33:55.137

您可能应该尝试使用 setData:forKey: 并发送 xml 文件的数据，示例如下..

```
.....
NSURL *myURL = [NSURL URLWithString: @"http://my.url.com/"]; 
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:myURL];
[request setShouldPresentCredentialsBeforeChallenge:NO];
[request setUsername:@"myUserName"];
[request setPassword:@"myPassword"];
[request setDomain:@"myDomainName"];
[request setData:[NSData dataWithContentsOfFile:fileName] forKey:@"xml"];
[request startSynchronous];
..... 
```

此外，您可能应该提出这个`asynchronous`请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T12:21:46.280

好的，问题出在 Neels 注释行之间：缺少 PHP。而这个当然需要在URL中调用，所以构建URL的正确方法是：

```
NSURL *myURL = [NSURL URLWithString: @"http://my.url.com/upload.php"]; 
```

这样我得到了我的 iPhone httpRequest 代码和 PHP 的映射。

这是所需的 PHP 代码：

```
 <?php 
 $target = "upload/"; 
 $target = $target . basename( $_FILES['xml']['name']) ; 
 $ok=1; 
 if(move_uploaded_file($_FILES['xml']['tmp_name'], $target)) 
 {
    echo "The file ". basename( $_FILES['xml']['name']). " has been uploaded";
 } 
 else {
    echo "Error uploading". basename( $_FILES['xml']['name']). " occured";
 }
 ?> 
```

# java - 使用带有 PS4 设置的 java 在调试模式下运行 bash 脚本

> ID：10847904
> 
> 赞同：1
> 
> 时间：2012-06-01T09:39:38.790
> 
> 标签：java, bash, shell

我想使用带有 PS4 环境变量集的 Java 在调试模式下运行我的 bash 脚本。

```
ProcessBuilder pb = new ProcessBuilder("/bin/bash" ,"-x", "/junk/leaptest.sh");
Map<String, String> env = pb.environment();
env.put("PS4", "${BASH_SOURCE}:::${LINENO}:::COV:");
final Process process = pb.start();
BufferedReader br = new BufferedReader(new InputStreamReader(process.getInputStream()));
PrintWriter pw = new PrintWriter(process.getOutputStream());
String line;
while ((line = br.readLine()) != null) {
    System.out.println("line no--->>" + line);
    pw.println("2000");
    pw.flush();
} 
```

我得到的输出因为它没有在调试模式下运行并且我的 PS4 env 没有设置

当我使用运行时命令时，同样的事情，

```
String[] cmd = new String[3];
cmd[0] = "/bin/bash"; // should exist on all POSIX systems
cmd[1] = "-xv";
cmd[2] = args[0];

String[] env = new String[1];
env [0] = "PS4=${BASH_SOURCE}:::${LINENO}::: COV:";
Runtime rt = Runtime.getRuntime();
System.out.println("Execing " + cmd[0]  + cmd[1]);

Process proc = rt.exec(cmd,env); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:17:24.467

当使用`bash`运行时`-x`，它将跟踪信息写入标准错误，而不是标准输出。您需要通过以下方式捕获它：

```
PrintWriter pwe = new PrintWriter(process.getErrorStream()); 
```

# html - 响应式图像与在 HTML 中指定图像的宽度和高度

> ID：10847905
> 
> 赞同：35
> 
> 时间：2012-06-01T09:39:41.957
> 
> 标签：html, css, image

我正在阅读有关响应式设计的内容，我注意到以下问题：

关于“流体图像”的建议之一是使用 CSS 规则，例如：

```
img {
max-width: 100%;
height: auto; } 
```

但为了让它产生正确的影响，我们需要去除 img 标签的内联图像宽度和高度属性。

如何解决[在 HTML 中指定图像的宽度和高度很重要](http://blog.silktide.com/2010/09/its-important-to-specify-the-width-and-height-of-an-image-in-html/) ？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-19T22:07:25.613

尽管（正如我在其他答案中所述）`width`and`height`属性不会干扰流体图像，但流体图像确实会干扰尚未加载的图像，它们会在 Chrome 以外的浏览器中占用适当的空间。有一个解决方法：将图像包装在具有内在比率的 div 中，如本文所述：[http ://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/](http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/)

```
.img-wrapper {
    max-width: 200px; /* The actual width of the image */
}

.img-wrapper2 {
    height: 0;
    padding-bottom: 100%; /* The image's height divided by its width */
} 
```

不幸的是，这需要两个包装器 div，才能获得正确的最大宽度效果。`width`但是，它确实提供了与和`height`属性提供的明显加载速度相同的优势。你可能想给`.img-wrapper` `overflow: hidden`隐藏一些旧IE的病态行为。

jsfiddle：http: [//jsfiddle.net/7j3db/32/](http://jsfiddle.net/7j3db/32/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-01T13:39:03.783

您不需要剥离图像的宽度和高度属性。

jsFiddle：http: [//jsfiddle.net/7j3db/](http://jsfiddle.net/7j3db/)

在 Chrome、Firefox、Opera、IE9 和 IE9 模拟 IE7 中测试。使用您提到的确切 CSS 规则，似乎在所有这些中都可以正常工作。

编辑：使用无法加载的图像进行测试：http: [//jsfiddle.net/7j3db/1/](http://jsfiddle.net/7j3db/1/)

这在 Chrome 和 IE（甚至 IE7）中具有适当的效果，但在 Firefox 或 Opera 中却没有。然而，即使在 Firefox 和 Opera 中，效果也比不考虑 width 和 height 属性要好（因为 width 属性仍然有效，即使 height 属性没有效果）。

使用 alt 文本 ( [http://jsfiddle.net/7j3db/2/](http://jsfiddle.net/7j3db/2/) ) 进行进一步测试：IE7 完美处理，但 IE9 加入了 Opera，而 IE8 做了一些非常奇怪的事情（图像高度取决于 alt 文本的长度 -替代文本越多，空间越少）。Chrome 似乎完全忽略了替代文本。Opera 和 FF 显示 alt 文本，但在其他方面与之前的行为基本相同。然而，width 和 height 属性似乎与这些 alt 文本问题无关（在某种程度上，IE8 除外）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-29T13:36:18.360

您可以通过添加来实现这一点

```
html, body{
max-width:100%;
width:100%;
} 
```

并将这些属性放在 img 标签的父 div 上。

# java - JAVA 类 com.adobe.xmp.* 未找到

> ID：10847912
> 
> 赞同：2
> 
> 时间：2012-06-01T09:39:59.210
> 
> 标签：java

我无法在以下位置找到类的可下载源代码：

```
com.adobe.xmp.* 
```

以及所有依赖项....

有什么地方可以推荐吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:48:08.013

检查[可扩展元数据平台 (XMP)](http://www.adobe.com/products/xmp/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-27T06:53:44.190

下载[xmpcore-5.1.2.jar](http://www.java2s.com/Code/Jar/x/Downloadxmpcore512jar.htm)。将其作为外部 jar 添加到您的项目中。

看起来所有直接来自 Adob​​e 的代码现在都是 .cpp。可能不再支持 Java。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T09:45:57.267

你有没有看过

[http://labs.adobe.com/technologies/xmptoolkit/](http://labs.adobe.com/technologies/xmptoolkit/)

# joomla - Joomla 中出现意外的 302 重定向

> ID：10847926
> 
> 赞同：1
> 
> 时间：2012-06-01T09:40:41.033
> 
> 标签：joomla

我在本地设计了我的网站。然后将 MySql 数据库导出为 Sql 文件并在真实服务器中执行脚本。还将 joomla 目录复制到服务器。

现在，当我访问主页时，我的网站出现奇怪的 302 重定向错误。但是，我可以登录到管理面板。我可以看到我所有可用的内容。

重定向发生在同一页面上，即向 index.php/en/ 发出连续请求（使用 fiddler 检查）。

我是否缺少任何配置？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:00:51.743

好吧，如果没有指向站点的链接来亲自查看行为，这很棘手，但可能是您忘记上传 .htaccess 文件或在 configuration.php 中设置重定向基或 cookie 路径/域（如果它是空的，那么仅当您手动编辑它时，它可能不是问题）。

# android - 关闭意图选择对话框（在用户选择之后）

> ID：10847928
> 
> 赞同：0
> 
> 时间：2012-06-01T09:40:44.763
> 
> 标签：android, android-intent

我在我的应用程序中使用导航意图，例如：

```
 uri= String.format(Locale.ENGLISH,"http://maps.google.com/maps?daddr=%f,%f",latitude, longitude);
    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uri));
    EventMapOfflineActivity.this.startActivity(intent); 
```

完美运行，用户可以选择他想要启动的应用程序。

> 但是，在选择之后，对话框不会自行关闭，并且在返回应用程序后，有时用户必须将返回按钮最多按 4 次才能关闭该对话框。
> 
> 那么有什么方法可以让 Android 操作系统关闭该对话框？还是我们必须尊重 Android 的做法？

我会在我的应用程序的 onStop() 处理程序中执行此操作，当用户选择要在对话框中启动的应用程序时调用该处理程序（在单击以转到导航时将标志设置为 true，并在 onStop() 中将标志设置为 false )

我只是认为Android操作系统不喜欢弄乱它的对话框，或者有没有一种干净的方法来做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:08:49.173

> 但是，在选择之后，对话框不会自行关闭，并且在返回应用程序后，有时用户必须将返回按钮最多按 4 次才能关闭该对话框。

这很可能是您的固件存在问题，可能是由于设备制造商的错误或您在设备上安装的某些修改固件中的错误。

> 那么有什么方法可以让 Android 操作系统关闭该对话框？

Android 会自动关闭对话框。

# magento - 禁用产品的 Magento 代码位置在哪里？

> ID：10847929
> 
> 赞同：-4
> 
> 时间：2012-06-01T09:40:46.910
> 
> 标签：magento, product

我很想知道**Magento 如何禁用产品**？

处理产品状态的**代码**在哪里，即在 Magento 中**启用**或**禁用**？

**请提供我在 Magento 中禁用产品的代码位置？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:45:32.897

更加努力地[搜索您的答案](http://www.google.com)可能会对您有所帮助：

[http://www.magentocommerce.com/boards/viewthread/195388/#t243282](http://www.magentocommerce.com/boards/viewthread/195388/#t243282)

`Mage::getModel('catalog/product_status')->updateProductStatus($product->getId(), $storeId, Mage_Catalog_Model_Product_Status::STATUS_DISABLED);`

此外，您可以（在 linux 上）运行以下 grep 命令

`grep -rin -A2 -B2 "updateProductStatus" *`

找出可能调用那段代码的实例的位置。

编辑：在 Magento 1.6.2.0 上，您可以在此处找到它。（例如上面的shell命令的结果）

```
electricjesus@quadsrv64:~/projects/magento/magento/app$ grep -rin -A2 -B2 "updateProductStatus" *
code/core/Mage/Catalog/Model/Product/Flat/Indexer.php-172-     * @return Mage_Catalog_Model_Product_Flat_Indexer
code/core/Mage/Catalog/Model/Product/Flat/Indexer.php-173-     */
code/core/Mage/Catalog/Model/Product/Flat/Indexer.php:174:    public function updateProductStatus($productId, $status, $store = null)
code/core/Mage/Catalog/Model/Product/Flat/Indexer.php-175-    {
code/core/Mage/Catalog/Model/Product/Flat/Indexer.php-176-        if (is_null($store)) {
code/core/Mage/Catalog/Model/Product/Flat/Indexer.php-177-            foreach (Mage::app()->getStores() as $store) {
code/core/Mage/Catalog/Model/Product/Flat/Indexer.php:178:                $this->updateProductStatus($productId, $status, $store->getId());
code/core/Mage/Catalog/Model/Product/Flat/Indexer.php-179-            }
code/core/Mage/Catalog/Model/Product/Flat/Indexer.php-180-            return $this;
--
code/core/Mage/Catalog/Model/Product/Flat/Observer.php-110-        $storeId    = $storeId > 0 ? $storeId : null;
code/core/Mage/Catalog/Model/Product/Flat/Observer.php-111-
code/core/Mage/Catalog/Model/Product/Flat/Observer.php:112:        $this->_getIndexer()->updateProductStatus($productId, $status, $storeId);
code/core/Mage/Catalog/Model/Product/Flat/Observer.php-113-
code/core/Mage/Catalog/Model/Product/Flat/Observer.php-114-        return $this;
--
code/core/Mage/Catalog/Model/Product/Indexer/Flat.php-317-            if (isset($data['catalog_product_flat_status'])) {
code/core/Mage/Catalog/Model/Product/Indexer/Flat.php-318-                $status = $data['catalog_product_flat_status'];
code/core/Mage/Catalog/Model/Product/Indexer/Flat.php:319:                $this->_getIndexer()->updateProductStatus($productIds, $status);
code/core/Mage/Catalog/Model/Product/Indexer/Flat.php-320-            }
code/core/Mage/Catalog/Model/Product/Indexer/Flat.php-321-
--
code/core/Mage/Catalog/Model/Product/Status.php-198-     * @return  Mage_Catalog_Model_Product_Status
code/core/Mage/Catalog/Model/Product/Status.php-199-     */
code/core/Mage/Catalog/Model/Product/Status.php:200:    public function updateProductStatus($productId, $storeId, $value)
code/core/Mage/Catalog/Model/Product/Status.php-201-    {
code/core/Mage/Catalog/Model/Product/Status.php-202-        Mage::getSingleton('catalog/product_action')
--
code/core/Mage/Catalog/Model/Resource/Product/Status.php-106-     * @return Mage_Catalog_Model_Resource_Product_Status
code/core/Mage/Catalog/Model/Resource/Product/Status.php-107-     */
code/core/Mage/Catalog/Model/Resource/Product/Status.php:108:    public function updateProductStatus($productId, $storeId, $value)
code/core/Mage/Catalog/Model/Resource/Product/Status.php-109-    {
code/core/Mage/Catalog/Model/Resource/Product/Status.php-110-        $statusAttributeId  = $this->_getProductAttribute('status')->getId(); 
```

# android - 重命名工作目录

> ID：10847932
> 
> 赞同：0
> 
> 时间：2012-06-01T09:40:56.037
> 
> 标签：android, package

我想重命名我的 android 项目的工作目录。例如 tn.lordroid.project 而不是 tn.haythem.project。

当我尝试这个时：直接重命名包，所以我得到了错误。没有错误的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:44:25.363

如果您使用 Eclipse：

1.  右键单击项目
2.  选择 Android 工具 > 重命名应用程序包

# sql-server - ssms中修改存储过程的快捷键

> ID：10847934
> 
> 赞同：3
> 
> 时间：2012-06-01T09:41:14.250
> 
> 标签：sql-server, sql-server-2008, keyboard-shortcuts

在 SQL Server Management Studio 中，
存储过程列表显示的对象资源管理器详细信息中，我想在这里按任何存储过程上的快捷键以打开其修改窗口。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T09:57:52.803

我在文档中找不到任何关于此的内容。

我发现最快的是`Right Click`+ `Y`（当您在对象资源管理器中突出显示存储过程时）。

`Shift`编辑：如果您确实需要一个完全基于键盘的版本，您可以使用+模拟右键单击`F10`。

[资源](http://chriscatto.blogspot.co.uk/2009/08/sql-server-management-studio-hotkeys.html)

# extjs4 - 如何限制在 extjs 数字字段中输入连字符？

> ID：10847942
> 
> 赞同：1
> 
> 时间：2012-06-01T09:41:51.417
> 
> 标签：extjs4, extjs4.1

目前 extjs numberfield 允许在字段中使用除数字以外的“-”连字符。如何限制打字？如果我提供自定义 vtype 验证，它只会在我提交之后进行检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:36:02.823

使用 autoStripChars 并从 initComponent 中的允许中删除连字符。更正的代码如下。

```
autoStripChars: true,
initComponent: function() {
    var me = this,
        allowed;

    me.callParent();

    me.setMinValue(me.minValue);
    me.setMaxValue(me.maxValue);

    // Build regexes for masking and stripping based on the configured options
    if (me.disableKeyFilter !== true) {
        allowed = me.baseChars + '';
        if (me.allowDecimals) {
            allowed += me.decimalSeparator;
        }
/* removed code
    if (me.minValue < 0) {
            allowed += '-';
        } 
*/
        allowed = Ext.String.escapeRegex(allowed);
        me.maskRe = new RegExp('[' + allowed + ']');
        if (me.autoStripChars) {
            me.stripCharsRe = new RegExp('[^' + allowed + ']', 'gi');
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T10:12:27.113

您需要创建自定义 VType。在文本字段发生任何更改后调用 VType 验证，您可以配置允许输入的字符：

[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.VTypes](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.VTypes)

看看`xxxMask`房产。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T23:08:55.477

您还可以使用带有 maskRe 配置的常规文本字段。

```
maskRe: /[0-9]/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-17T02:06:01.247

与@lagnat 的回复类似，这是一个白名单，您可以使用 stripCharsRe 配置将字符列入黑名单。

```
stripCharsRe: /-/ 
```

如果您想限制负值。

```
minValue: 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-12T13:09:04.183

```
{
    minValue: 0,
    autoStripChars: true,
    allowExponential: false
} 
```

# .net - 在 .net windows 应用程序中更改 SingleViewPort 布局 Eyeshot 控件的原点？

> ID：10847943
> 
> 赞同：0
> 
> 时间：2012-06-01T09:41:53.610
> 
> 标签：.net, graphics, eyeshot

如何在 .net windows 应用程序中更改 SingleViewPort 布局 Eyeshot 控件的默认原点？Eyeshot 是一种图形工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T11:42:42.367

我已经使用这个库几个星期了，我认为没有办法改变它。事实上，原点**就是**原点 (0, 0, 0)，你不能改变它，我不明白你为什么要这样做......

如果您的目标是相对于原点以外的另一个点进行旋转或进行一些变换，那么总有一种方法。大多数函数都可以在其参数中采用 Point3D 来实现这一点。此外，您可以翻译您的对象，使其对真实原点 (0,0,0) 做出反应。

如果只是为了让它消失，你可以打电话

```
singleViewportLayout1.OriginSymbol.Visible = false; 
```

这就是我现在能想到的。如果您在原始帖子中添加更多信息或作为评论，我可以编辑我的帖子以帮助您更多。

# php - 如何将支付网关与在 wordpress 中创建的网站集成？

> ID：10847947
> 
> 赞同：1
> 
> 时间：2012-06-01T09:42:11.230
> 
> 标签：php, wordpress, web, payment-gateway

我想使用 wordpress 将支付网关与 Soho Hotel Theme 集成。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:25:12.533

您可能希望将其集成为 WordPress 插件：[http](http://codex.wordpress.org/Writing_a_Plugin) ://codex.wordpress.org/Writing_a_Plugin这样您就可以在不修改核心的情况下扩展功能。您还可以在主题中创建自定义页面模板以集成网关。

也就是说，网关只是等式的一部分。通常在页面上有一个购物车或至少一个购买按钮来下订单。任何第三方购物车都应该已经有使用网关的选项，因此您无需构建自己的网关集成。您需要一些可以收集数据并将其提交到网关的东西。如果您还没有解出方程的那部分，请先解出它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:27:40.840

[如果您从WooCommerce](http://www.woothemes.com/woocommerce/)之类的电子商务插件开始- 他们有一个[API](http://wcdocs.woothemes.com/codex/extending/payment-gateway-api/)可供您使用。谢谢！

# android - 在 PageViewer 中自动滚动

> ID：10847959
> 
> 赞同：1
> 
> 时间：2012-06-01T09:43:04.163
> 
> 标签：android

我的网页浏览器有问题。我想每两秒滚动一次页面。我尝试这样的事情：

```
handler.postDelayed(new Runnable() {
    public void run() {

        viewPager.setCurrentItem(viewPager.getCurrentItem()+1, true);

    } 
},2000); 
```

但它仅在我开​​始活动时才有效。如果我将此代码放入`public void onPageSelected(int page)`它可以工作，但我想在单击并手动滚动页面时执行此操作，我想停止此处理程序，但它不起作用。我怎么能这样做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T10:26:53.420

你应该像这样定义你的 Runnable 和 Handler ：

```
private boolean pagerMoved = false;
private static final long ANIM_VIEWPAGER_DELAY = 2000;

private Handler h = new Handler();
    private Runnable animateViewPager = new Runnable() {
        public void run() {
            if (!pagerMoved) {
                viewPager.setCurrentItem(viewPager.getCurrentItem()+1, true);
                h.postDelayed(animationFrame, ANIM_VIEWPAGER_DELAY);
            }
        }
    }; 
```

确保在 onPause 和 onResume 方法中设置和拆除

```
@Override
    public void onPause() {
        super.onPause();
        if (h != null) {
            h.removeCallbacks(animateViewPager);
        }
    }

    @Override
    public void onResume() {
        super.onResume();
        h.postDelayed(animateViewPager, ANIM_VIEWPAGER_DELAY);
    } 
```

最后，您需要在 viewpager 上监听一个触摸事件，以便您可以将 pagerMoved 设置为 true（这将停止进一步的自动页面转换）。

# javascript - CSS & JQuery：更好的可用性

> ID：10847962
> 
> 赞同：2
> 
> 时间：2012-06-01T09:43:09.880
> 
> 标签：javascript, jquery, html, css

我想改善以下代码的用户体验：

HTML：

```
<div class="news-item">
    <div class="main-content">
        <div class="header"> Header 1 </div>
        <div class="content"> lorum ipsum </div>
        <div class="time"> time </div>
    </div>
</div>

<div class="news-item">
    <div class="main-content">
        <div class="header"> Header </div>
        <div class="content"> lorum ipsum </div>
        <div class="time"> time </div>
    </div>
</div>​ 
```

JavaScript：

```
jQuery(document).ready(function() {
    $(".header").click(function () {
      $(this).parent().toggleClass("expand");
    });
});​ 
```

CSS：

```
body {
    background-color: whitesmoke;
}

.header{
    font-size: 20px;
    padding-bottom: 20px;
    cursor:pointer;
}

.main-content {
    margin: 0 0 12px 70px;
    padding: 0;
    background: rgb(251, 251, 251);
    width: 80%;
    -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.35);
    -moz-box-shadow: 0 1px 2px rgba(0,0,0,0.35);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.35);
    position:relative;
    margin-left: 20px;
    margin-top: 20px;
    background-color: white;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    padding: 22px;
    height: 20px;
    overflow: hidden;
}

.expand {
    height: 200px;
}​ 
```

演示：http: [//jsfiddle.net/9UJ7f/4/](http://jsfiddle.net/9UJ7f/4/)

您可能会注意到，当您单击页眉时，框会展开或折叠。

但是，这仅在我们单击标题时有效，例如，当我们单击框的边框（在折叠模式下）时，没有任何反应。

为了消除“无效点击”，我希望它是这样的：

A. 在折叠模式下：如果单击框上的任意位置（.main-content 类），该项目将展开

B. 在扩展模式下：如果您只单击 .Header 类，项目将再次收缩。

这样做的最佳方法是什么？

# 更新：

好吧，你是对的。CSS 有点偏离。我选择了 Sandeep 的解决方案，因为它是最简约但效果最好的解决方案。但也要感谢所有提供帮助的人。特别是 codeparadox & Arif 的 JS 解决方案。（尽管边界周围仍然有一些“无效点击”）。你们太棒了，伙计们。我会给大家竖起大拇指的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T10:00:31.570

```
jQuery(document).ready(function() {
    $('.header').click(function(e) {
        e.stopPropagation();
        $(this).parent().toggleClass('expand');
    })
    $(".main-content").click(function() {
        if (!$(this).hasClass('expand')) {
            $(this).addClass("expand");
        }
    });
}); 
```

**[完美的工作样本](http://jsfiddle.net/thecodeparadox/9UJ7f/22/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:59:55.377

## *[演示](http://jsfiddle.net/roXon/NbxDq/1/)*

```
<div class="main-content">
    <h2 class="header"> Header 1 </h2>     <!-- you can use h2 -->
    <div class="content"> lorum ipsum 1 </div>
    <div class="time"> time 1</div>
</div> 
```

只需从容器 ( ) 中移除填充`.content`并使用您的子元素填充。

```
.main-content {  

    position:relative;
    overflow: hidden;
    margin-left: 20px;
    margin-top: 20px;

    width: 80%;
    height: 50px;  

    background: rgb(251, 251, 251);

    -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.35);
    -moz-box-shadow: 0 1px 2px rgba(0,0,0,0.35);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.35);

    background-color: white;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;

}

h2.header, .content, .time{
    padding:3px 22px;
}
h2.header{   
    padding:13px 22px;
    font-size: 20px;    
    cursor:pointer;
}
.time{ padding-bottom:20px; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T10:00:36.627

**为标题**DIV提供填充。像这样写：

```
 .main-content {
        margin: 0 0 12px 70px;
        padding: 0;
        background: rgb(251, 251, 251);
        width: 80%;
        -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.35);
        -moz-box-shadow: 0 1px 2px rgba(0,0,0,0.35);
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.35);
        position:relative;
        margin-left: 20px;
        margin-top: 20px;
        background-color: white;
        -webkit-border-radius: 5px;
        -moz-border-radius: 5px;
        border-radius: 5px;
        padding-bottom: 22px;
        height: 42px;
        overflow: hidden;
    }
    .header  ~ div{
        margin:22px;
    }

    .header{
        font-size: 20px;
        padding: 22px;
        cursor:pointer;
    } 
```

检查这个[http://jsfiddle.net/9UJ7f/14/](http://jsfiddle.net/9UJ7f/14/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T10:01:02.210

这应该适合你：

## **[演示](http://jsfiddle.net/9UJ7f/19/)**

这是新的javascript：

```
jQuery(document).ready(function() {
    $(".news-item").click(function () {
        if( !$('.main-content', this).hasClass('expand') )
            $('.main-content', this).toggleClass("expand");
    });

    $('.news-item .main-content.expand .header').live('click',function () {
        $(this).parent().toggleClass("expand");
    });
});​ 
```

这就是你所描述的。如果 .news-item 没有 .expand 类，它只会扩展一个项目。如果确实有，那么单击标题是唯一可以关闭它的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T10:07:39.487

你的js是正确的。改变你的CSS

```
body {
    background-color: whitesmoke;
}

.header{
    font-size: 20px;
    cursor:pointer;
    padding: 22px 22px 20px 22px;
}

.content { padding: 0 22px; }
.time { padding: 0 22px; }

/* thanks to raingroove for the main styling ! */
.main-content {
    margin: 0 0 12px 70px;
    padding: 0;
    background: rgb(251, 251, 251);
    width: 80%;
    -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.35);
    -moz-box-shadow: 0 1px 2px rgba(0,0,0,0.35);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.35);
    position:relative;
    margin-left: 20px;
    margin-top: 20px;
    background-color: white;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    height: 66px;
    overflow: hidden;
}

.expand {
    height: 200px;
} 
```

见[http://jsfiddle.net/9UJ7f/25/](http://jsfiddle.net/9UJ7f/25/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-01T10:11:58.080

@thecodeparadox 答案的小补充

```
jQuery(document).ready(function() 
   {
    $('.header').click(function(e) {
        e.stopPropagation? e.stopPropagation() : e.cancelBubble = true; //e.stopPropagation() does not work for all browsers
        $(this).parent().toggleClass('expand');
    })
    $(".main-content").click(function() {
        if (!$(this).hasClass('expand')) {
            $(this).addClass("expand");
        }
    });
}); 
```

# android - 在Android中转换为json字符串

> ID：10847966
> 
> 赞同：0
> 
> 时间：2012-06-01T09:43:31.050
> 
> 标签：android, json

我有包含名字、姓氏、电话号码和电子邮件属性的联系人类。

*   我想`ArrayList<Contact>`作为 json 字符串传递给网页（加载 url）。

如何做到这一点......我的代码：

```
 function Callback(result)
{
document.getElementById('res').innerHTML=result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:45:30.910

你想把一个类的信息转换成一个 JSON 字符串吗？没问题 - [GSON](http://code.google.com/p/google-gson/)会帮助你。

在您的情况下，您必须执行以下操作：

```
Gson gson = new Gson();
StringBuffer sb = new StringBuffer();

ArrayList<Contact> contact = new ArrayList<Contact>();
//add some contacts
....

for(Contact c : contact) {
     sb.append(gson.toJson(c));
}

String strToPass = sb.toString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:49:35.767

我建议使用[Json Simple Library](http://code.google.com/p/json-simple/)，您可以轻松地在 JSON 和 Java 实体之间进行映射，在您的情况下，它可以直接将您的 Array List 转换为 JSON Array ...

例子 ：

```
 LinkedList list = new LinkedList();
  list.add("foo");
  list.add(new Integer(100));
  list.add(new Double(1000.21));
  list.add(new Boolean(true));
  list.add(null);
  String jsonText = JSONValue.toJSONString(list);
  System.out.print(jsonText); 
```

# facebook - Open Graph Actions - 克服 FB 引发的预先批准错误

> ID：10847969
> 
> 赞同：0
> 
> 时间：2012-06-01T09:43:41.203
> 
> 标签：facebook, facebook-opengraph

要对我的应用程序运行 Open Graph 操作，这就是我想要做的：

1.  创建动作和对象
2.  创建对象元文件
3.  发布动作

    *   这对管理员本身不起作用，因为 FB 生成了太多错误
    *   由于操作未获批准，并且对于我当前的用户群发布这些操作失败，因此生成了错误。

为了避免错误（这阻止了我从 FB 批准我的操作），我阻止了我的用户群发布操作，并为管理员、开发人员和测试人员设置了过滤器（也就是说，只发布来自这些帐户的请求经过）

有没有更好的方法来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:00:11.993

这是正确的。在 Facebook 批准该操作之前，只能为应用程序的测试用户/管理员/开发人员启用这些操作。但是，如果发布操作失败，无论如何您都应该优雅地失败。用户不应该知道有错误，但您应该将其记录下来以便稍后进行调试。

# xsd - JAXB 和 XSD：元素，complexType 按属性值

> ID：10847972
> 
> 赞同：2
> 
> 时间：2012-06-01T09:43:59.427
> 
> 标签：xsd, jaxb

我的 XML 文件有`root`元素，然后有许多`item`元素作为根的子元素。所以它看起来像这样：

```
<root>
   <item type=type1 id=1>...</item>  
   <item type=type1 id=2>...</item>  
   <item type=type2 id=3>...</item>  
   <item type=type3 id=4>...</item>  
</root> 
```

每个`item`元素都有属性，说明我们正在处理的项目类型。在当前的 XSD `xs:element name="root"`中，complexType 具有复杂类型的序列`item`。我正在使用 JAXB 将我的 XML 文件映射到 Java 对象。现在我必须获取所有项目并根据它们的类型创建新的特定对象。它变得越来越复杂，因为每个项目类型都有自己的一组字段（子节点）。有没有机会我可以告诉 JAXB（通过 XSD）有不同类型的`items`并根据项目的`name`属性创建我需要的对象？因此，对于每个项目，都应该有单独的 complexType（将映射到 java 对象）。

如果我的 XML 看起来像这样就可以了：

```
<root>
   <item1 id=1>...</item1>
   <item1 id=2>...</item1>
   <item2 id=3>...</item2>
   <item3 id=4>...</item3>
</root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T18:57:49.517

如果您可以更改 XML，以便您可以拥有一个***合格*****的类型**属性（xsi 是与 XML Schema Instance 命名空间关联的前缀） ，而不是不合格的**类型属性，那么：** ***`xsi:type`***

 ****   您的架构需要为这些类型提供定义

就是这样...

如果你不能（值得一试）也许[这篇关于 SO 的帖子](https://stackoverflow.com/questions/2992234/java-jaxb-unmarshall-xml-to-specific-subclass-based-on-an-attribute)可以帮助你。***

# iphone - 无法在 Safari/iPhone 中打开 HTML href 链接

> ID：10847973
> 
> 赞同：1
> 
> 时间：2012-06-01T09:44:07.300
> 
> 标签：iphone, html, cordova

我使用 HTML 在 XCode 中使用 Phonegap 创建了一个简单的应用程序。我的代码如下所示：

```
<dd><a href="tel:0674-673425">Office Number</a></dd>
<dd><a href="tel:+9945637826">Personal Number</a></dd>
<dd><a href="http://google.com">Log in to your Mail ID</a></dd> 
```

前两个链接工作正常。我可以拨打一个号码；但最后一行不起作用。好像是残疾人。在手机中，运行后，它显示“登录到您的邮件 ID”作为选项卡，但当我单击它时没有任何反应。网址不会进入 Safari 浏览器。

请帮忙。如何像前两行一样将此链接集成到 iPhone 中的 Safari 浏览器。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:34:53.330

你必须在你的应用程序中实现子浏览器...... [https://github.com/purplecabbage/phonegap-plugins/tree/master/iPhone/ChildBrowser](https://github.com/purplecabbage/phonegap-plugins/tree/master/iPhone/ChildBrowser) 它还可以选择在 safari 中打开链接...... ..如果你有任何疑问请随时问.....

# iphone - 如何平滑地上下动画图像。苹果手机

> ID：10847975
> 
> 赞同：-4
> 
> 时间：2012-06-01T09:44:20.247
> 
> 标签：iphone, ios, ipad, uianimation

我想平滑地上下动画图像。任何人都知道如何做到这一点..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:52:45.343

确保导入以下框架：

`#import <QuartzCore/QuartzCore.h>` `#import <CoreGraphics/CoreGraphics.h>`

```
UIImageView *someImage = .....
CALayer *b = someImage.layer;
// Create a keyframe animation to follow a path to the projected point
CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"scale"];
animation.removedOnCompletion = NO;

// Create the path for the bounces
CGMutablePathRef thePath = CGPathCreateMutable();

// Start the path at my current location
CGPathMoveToPoint(thePath, NULL, someImage.center.x, someImage.center.y);
CGPathAddLineToPoint(thePath, NULL,20, 500.0);

animation.path = thePath;

animation.speed = 0.011;
animation.repeatCount = 1000000;

// Add the animation to the layer
[someImage addAnimation:animation forKey:@"move"]; 
```

您可以使用这些值，直到获得所需的结果。如果这是您的解决方案，请接受此作为答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T09:49:57.787

看一个简单的UIView（UIImageView）动画[教程](http://www.raywenderlich.com/2454/how-to-use-uiview-animation-tutorial)

> iPhone 应用程序最酷的事情之一是它们中的许多应用程序的动画效果。您可以让视图飞过屏幕、淡入或淡出、淡出、旋转等等！这不仅看起来很酷，而且动画是一个很好的指标，表明用户应该注意正在发生的事情，例如更多信息可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T14:35:25.450

```
- (void) showProgressView
{
if (progressViewBack.frame.origin.y == 460.0)
{
    [self.view bringSubviewToFront:progressViewBack];
    [progressViewBack setFrame:CGRectMake(6.0, 460, 308.0, 126.0)];
    [progressViewBack setBounds:CGRectMake(0, 0, 308, 126.0)];

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationDelegate:self];
    [progressViewBack setFrame:CGRectMake(6.0, 334.0, 308.0, 126.0)];
    [UIView commitAnimations];
}
else if (progressViewBack.frame.origin.y == 334.0)
{   
    [progressViewBack setFrame:CGRectMake(6.0, 334.0, 308.0, 126.0)];       
    [progressViewBack setBounds:CGRectMake(0, 0, 308.0, 126.0)];

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationDelegate:self];
    [progressViewBack setFrame:CGRectMake(6.0, 460.0, 308.0, 126.0)];
    [UIView commitAnimations];
} 
```

}

# android - 非静态方法上的 JNI 调用失败

> ID：10847979
> 
> 赞同：1
> 
> 时间：2012-06-01T09:44:25.777
> 
> 标签：android, android-ndk, java-native-interface

我正在尝试在 Android 项目上使用 JNI 从 C++ 调用非静态 java 方法，但 GetMethodID 始终返回 NULL。

这是我的代码：

```
void Java_com_kungfu_rabbit_KungFuRabbitActivity_nativeOnCreate(JNIEnv *env, jobject obj)
{
    // this code works fine
    jclass cls = env->FindClass("com/kungfu/rabbit/KungFuRabbitActivity");
    jmethodID mid = env->GetStaticMethodID(cls, "foo", "()V");
    env->CallStaticVoidMethod(cls, mid);

    // this one fails:
    jclass cls = env->GetObjectClass(obj);
    jmethodID mid = env->GetMethodID(cls, "foo2", "()V");
    env->CallVoidMethod(obj, mid);
} 
```

我从扩展 Activity 的类中调用这个本机函数。foo 是一个公共静态 void 函数，而 foo2 是一个公共 void 函数。我不明白为什么它会失败......

谁能帮我理解？提前致谢

# odata - 限制绑定到 OData 服务的 Kendo UI Grid 的请求字段集

> ID：10847980
> 
> 赞同：1
> 
> 时间：2012-06-01T09:44:26.267
> 
> 标签：odata, kendo-ui

如何配置 Kendo UI 网格，使其仅针对特定（显示）字段发出请求？

在我的例子中，一个 Kendo UI 网格绑定到一个 OData 服务。该服务公开了一个包含许多（200 多个）字段的表。该应用程序允许用户配置网格的显示字段集，设置初始过滤器和排序参数。该应用程序配置网格，然后关闭并查询 OData 服务。

网格 kendo.Data.DataSource 定义为：

```
var gridDataSource = new kendo.data.DataSource({
    type: "odata",
    transport: {
        read: {
            url: "@Url.Content(dynDataSource.Url)",
            contentType: "application/json; charset=utf-8",
            type: "GET",
            dataType: "json"
        }
    },
    pageSize: @Model.MaxPageSize,
    serverPaging: true,
    serverFiltering: true,
    serverSorting: true,
    filter: ...
} 
```

这是 Grid 发出的示例请求（由 Firebug 捕获）：

```
http://localhost:22411/Data/Comp?%24inlinecount=allpages&%24top=1000&%24filter=DistrictCode+eq+%27460800%27 
```

这会返回表的所有字段，这是一个问题。需要通过仅选择必填字段来限制字段，其请求如下所示：

```
http://localhost:22411/Data/Comp?%24inlinecount=allpages&%24top=1000&%24filter=DistrictCode+eq+%27460800%27&%24select=DistrictCode,DistrictName,DistrictNumber 
```

同样，如何配置网格以实现这一点？

我意识到源代码可用于 Kendo UI，但我目前仍在试用版中，其中不包含源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:15:25.900

我想我自己有一个可行的解决方案。我使用了这篇博文中的一个想法：

[http://community.dynamics.com/product/crm/crmtechnical/b/zhongchenzhoustipstricksandportaldevelopment/archive/2012/05/20/how-to-use-kendo-ui-datasource-kendo-ui-grid-with-dynamics- crm-2011-rest-endpoint.aspx](http://community.dynamics.com/product/crm/crmtechnical/b/zhongchenzhoustipstricksandportaldevelopment/archive/2012/05/20/how-to-use-kendo-ui-datasource-kendo-ui-grid-with-dynamics-crm-2011-rest-endpoint.aspx)

我在 ajaxSend 事件中附加了一个事件处理程序，监视我的 OData 服务 URL，一旦检测到这样的请求，就将`select`列列表附加到 URL。这是代码：

```
$(document).ajaxSend(function (e, jqxhr, settings) {
  if (settings.url.toLowerCase().indexOf("@Url.Content(dynDataSource.Url)".toLowerCase()) >= 0) {
      settings.url += "&%24select=@requestColumnList";
  }
}); 
```

希望这可以帮助。不过，如果有人有更好的解决方案，我想听听。

我还在 Telerik 论坛上发布了这个问题：[http ://www.kendoui.c​​om/forums/framework/data-source/configure-the-kendo-ui-datasource-so-it-would-issue-requests-only -for-specific-displayed-fields.aspx#2131604](http://www.kendoui.com/forums/framework/data-source/configure-the-kendo-ui-datasource-so-it-would-issue-requests-only-for-specific-displayed-fields.aspx#2131604)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-26T15:57:48.187

我遇到了类似的问题并实现了一种方法，该方法在传输的读取`data`回调中构造包含列的数组：

```
dataSource.transport.read.data = function(options) {

    var data = {};

    data["$select"] = columns.map(function(c) {
        return c.field;
    });

    return data;
} 
```

如果您正在使用列菜单并且有隐藏列，您还可以根据哪些列可见进行过滤，并在启用列时强制刷新网格。

```
columnShow: function (e) {
    e.sender.dataSource.read();
} 
```

# java - Jetty 中的 keyStorePassword 和 keyManagerPassword 有什么区别？

> ID：10847983
> 
> 赞同：5
> 
> 时间：2012-06-01T09:44:39.233
> 
> 标签：java, ssl, jetty, keystore

我正在查看 Jetty 的 SSL：[http ://wiki.eclipse.org/Jetty/Reference/SSL_Connectors](http://wiki.eclipse.org/Jetty/Reference/SSL_Connectors)

keyStorePassword 和 keyManagerPassword 都有属性。我想 keyManagerPassword 被 Javax KeyManager 使用，那么从密钥库中恢复密钥的密码也是如此吗？

那么 keyStorePassword 和 keyManagerPassword 通常具有相同的值吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T12:19:16.833

Keymanagerfactory 确实有密码。

嗯，这是这些 API 的一点历史和演变，也许可以更清楚地说明它们。

keyManagerPassword 作为密码 arg 传递给 KeyManagerFactory.init(...) 如果没有 keymanagerpassword，则使用 keystorepassword。如果没有设置信任管理器，则使用密钥库作为信任库，使用密钥库密码作为信任库密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T10:52:34.987

`keyManagerPassword`看起来像一个错误的特征。拥有密码的是密钥库，而不是 KeyManager。Javadoc 中没有提及相关类的密钥管理器密码。

# asp.net-ajax - 在 ASP.Net 中从客户端访问信息

> ID：10847984
> 
> 赞同：0
> 
> 时间：2012-06-01T09:44:47.173
> 
> 标签：asp.net-ajax, client-side

我有一个 ASP.Net 网站，我希望能够在下面了解有关浏览我网站的人的信息。

1.  登录操作系统的用户名。
2.  确切的操作系统（操作系统类型 - Windows、Mac 等：操作系统版本）。
3.  MAC地址
4.  客户端机器的 IP 地址。

我的网站是一个高度安全的网站，如果需要访问该网站，我可以让用户安装 activex 和/或一些小程序。

请帮助我这样做的最佳方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:29:55.473

**1** - 登录操作系统的用户名

这仅在您使用 WIndows Forms 作为身份验证方法时可用，如果您使用 Forms，您可以通过登录帐户轻松获取其名称/用户

**2** - 中的确切操作系统（操作系统类型 - Windos、Mac 等：操作系统版本）。

我们称之为[浏览器代理](http://whatsmyuseragent.com/)，您可以通过在 javascript 中使用来获取它：

```
navigator.userAgent 
```

**3** - Mac 地址

您只能获取您自己的服务器的 Mac 地址，即您托管网站的服务器，并且您可以获得与服务器拥有的网络设备一样多的网络设备，记住**Mac 地址不是唯一的**！

**4** - 客户端机器的 IP 地址。

仅使用 javascript 无法获得此信息，您需要使用您的编程语言，您[应该使用它](http://thepcspy.com/read/getting_the_real_ip_of_your_users/)来获取真实的 IP 地址：

```
string ip = Request.ServerVariables["HTTP_X_FORWARDED_FOR"];
if(ip == "") { 
    ip = Request.ServerVariables["REMOTE_ADDR"]; 
} 
```

总之，使用 jQuery 很简单：

```
<%
    string ip = Request.ServerVariables["HTTP_X_FORWARDED_FOR"];
    if(ip == "") { ip = Request.ServerVariables["REMOTE_ADDR"]; }
%>
<script type="text/javascript">

  $(function() {

    var ipAddress = '<% = ip %>',
        browser = navigator.userAgent,
        username = <% = Session["username"] %>;

    // now send the data back to your server, if using jQuery, just do:
    $.get("/login-user.aspx", { 
            ip: ipAddress, 
             browser: browser, 
             user: username 
          }, function(data) {
             // use this if you return anything as a response             
          });
   });    
</script> 
```

然后，您可以使用[http://UserAgentString.com /](http://UserAgentString.com/) **API 来解析您的用户代理字符串，或使用该[**对象**](http://UserAgentString.com/)`navigator`从浏览器（或任何第三方库）中获取您想要的内容......**

# opengl - 滚动纹理的 GLSL 着色器

> ID：10847985
> 
> 赞同：7
> 
> 时间：2012-06-01T09:44:48.547
> 
> 标签：opengl, opengl-es, glsl

如何在平面上滚动纹理？所以我有一个带有纹理的平面，我可以使用着色器从右向左滚动（无限）它上面的纹理吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-01T10:23:39.503

1.  使用设置纹理环绕模式

    `glTexParameteri(TextureID, L_TEXTURE_WRAP_S, GL_REPEAT)`

2.  将名为 float 的制服添加`Time`到纹理着色器中

3.  `texture2D(sampler, u + Time, v)`在获取纹理样本时使用类似的东西。

4.  `Time`使用代码中的某个计时器更新制服。

这是一个 GLSL 着色器：

```
/*VERTEX_PROGRAM*/

in vec4 in_Vertex;
in vec4 in_TexCoord;

uniform mat4 ModelViewMatrix;
uniform mat4 ProjectionMatrix;

out vec2 TexCoord;

void main()
{
     gl_Position = ProjectionMatrix * ModelViewMatrix * in_Vertex;

     TexCoord = vec2( in_TexCoord );
}

/*FRAGMENT_PROGRAM*/

in vec2 TexCoord;

uniform sampler2D Texture0;

/// Updated in external code
uniform float Time;

out vec4 out_FragColor;

void main()
{
   /// "u" coordinate is altered
   out_FragColor = texture( Texture0, vec2(TexCoord.x + Time, TexCoord.y) );
} 
```

# django - 使用 pip 和 virtualenv 安装 Django

> ID：10847988
> 
> 赞同：1
> 
> 时间：2012-06-01T09:45:20.940
> 
> 标签：django, virtualenv, pip

我正在尝试在 mac 上使用 virtualenv 和 pip 安装 Django，我在安装它时遇到了一些问题。我基本上是在关注这个视频：[http](http://www.youtube.com/watch?v=71Ja7L89EOA) ://www.youtube.com/watch?v= 71Ja7L89EOA 来安装 Django。

当我像视频中那样输入 .env/bin/activate 时卡住了

错误信息：

```
APPLEs-iMac-2:~ IMAC$ .env/bin/activate
-bash: .env/bin/activate: No such file or directory 
```

可能做错了什么？Shld 我在项目文件中做，我不能在主文件夹中做是吗？

需要一些帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T09:47:59.077

有一个空间。命令`source`等于`.` 正确的是`. env/bin/activate`

# android - 在 Android 2.3.3 中为特定分辨率提供独特的布局

> ID：10847990
> 
> 赞同：0
> 
> 时间：2012-06-01T09:45:28.147
> 
> 标签：android, android-layout

我需要使用基于屏幕分辨率的特定 xml 布局，**而不是 size**。因此，第一个设计用于分辨率 <= 480x800，第二个设计用于分辨率 >= 480x800。

它是怎么做的？

更新。

我想出了

```
 Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
    final int height = display.getHeight();
    final int width = display.getWidth();

    int leadingResolutionSize = Math.max(height, width);
    if(leadingResolutionSize <= 800){
        setContentView(R.layout.main);
    }else if(leadingResolutionSize > 800 && leadingResolutionSize <= 1024){
        setContentView(R.layout.main_1024_600);
    }else if(leadingResolutionSize > 1024){
        setContentView(R.layout.main_1280_800);
    } 
```

**你认为这是一个好的解决方案吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:49:55.820

您可以创建不同的 xml 布局

并将它们全部放入

*   hdpi
*   身份证
*   mdpi
*   xhdpi

有关更多信息，请参阅[此](https://stackoverflow.com/a/8491012/1289716)答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T10:02:00.127

`layout`您项目中的文件夹包含 xml 文件，这些文件可以默认为`PORTRAIT`Mode 设计（在您的情况下为 480*800）。如果你想要模式。`LANDSCAPE`以同样的方式声明另一个名为`layout-land`（即 800*480）的文件夹并将布局 xml 文件存储在该文件夹中，并根据您的要求修改这些文件。

# spring - Spring MVC 将上传的 MultipartFile 保存到特定文件夹

> ID：10847994
> 
> 赞同：42
> 
> 时间：2012-06-01T09:45:36.987
> 
> 标签：spring, file, tomcat, file-upload

我想将上传的图像保存到部署在 Tomcat 上的 Spring 3 MVC 应用程序中的特定文件夹中

我的问题是我无法将上传的图像文件保存到运行应用程序的主机。

这是我尝试过的：

```
private void saveFile(MultipartFile multipartFile, int id) throws Exception {
    String destination = "/images/" + id + "/"  + multipartFile.getOriginalFilename();
    File file = new File(destination);
    multipartFile.transferTo(file);
} 
```

结果：FileNotFoundException - 是的，我确实想创建这个文件！？！

我尝试使用`context.getRealPath`or `getResources("destination")`，但没有任何成功。

如何使用我的多部分文件的内容在我的应用程序的特定文件夹中创建一个新文件？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-12-12T13:19:28.190

这段代码肯定会对你有所帮助。

```
String filePath = request.getServletContext().getRealPath("/"); 
multipartFile.transferTo(new File(filePath)); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-12-08T17:47:04.840

让我们在 webapp 中创建**uploads**目录并将文件保存在**webapp/uploads**中：

```
@RestController
public class GreetingController {

    private final static Logger log = LoggerFactory.getLogger(GreetingController.class);

    @Autowired
    private HttpServletRequest request;

    @RequestMapping(value = "/uploadfile", method = RequestMethod.POST)
        public
        @ResponseBody
        ResponseEntity handleFileUpload(@RequestParam("file") MultipartFile file) {
            if (!file.isEmpty()) {
                try {
                    String uploadsDir = "/uploads/";
                    String realPathtoUploads =  request.getServletContext().getRealPath(uploadsDir);
                    if(! new File(realPathtoUploads).exists())
                    {
                        new File(realPathtoUploads).mkdir();
                    }

                    log.info("realPathtoUploads = {}", realPathtoUploads);

                    String orgName = file.getOriginalFilename();
                    String filePath = realPathtoUploads + orgName;
                    File dest = new File(filePath);
                    file.transferTo(dest); 
```

编码
`String realPathtoUploads = request.getServletContext().getRealPath(uploadsDir);`

如果我从 Idea IDE 运行应用程序，则返回下一条路径
`C:\Users\Iuliia\IdeaProjects\ENumbersBackend\src\main\webapp\uploads\`

如果我制作 .war 并在 Tomcat 下运行它，则为下一条路径：
`D:\Programs_Files\apache-tomcat-8.0.27\webapps\enumbservice-0.2.0\uploads\`

我的项目结构：
[![在此处输入图像描述](../Images/6652c1c227ec0370bfeb302acf5bda5f.png)](https://i.stack.imgur.com/7G29x.jpg)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-02-05T06:37:36.640

您可以从 multipartfile 获取 inputStream 并将其复制到您想要的任何目录。

```
public String write(MultipartFile file, String fileType) throws IOException {
    String date = LocalDateTime.now().format(DateTimeFormatter.ofPattern("yyMMddHHmmss-"));
    String fileName = date + file.getOriginalFilename();

    // folderPath here is /sismed/temp/exames
    String folderPath = SismedConstants.TEMP_DIR + fileType;
    String filePath = folderPath + File.separator + fileName;

    // Copies Spring's multipartfile inputStream to /sismed/temp/exames (absolute path)
    Files.copy(file.getInputStream(), Paths.get(filePath), StandardCopyOption.REPLACE_EXISTING);
    return filePath;
} 
```

这适用于 Linux 和 Windows。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-26T23:20:22.150

我看到了一个使用 xml 配置的 spring 3 示例（注意这不适用于 spring 4.2。*）： http: [//www.devmanuals.com/tutorials/java/spring/spring3/mvc/spring3-mvc-upload-file。 html`](http://www.devmanuals.com/tutorials/java/spring/spring3/mvc/spring3-mvc-upload-file.html) _

```
<bean id="multipartResolver"
class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
<property name="maxUploadSize" value="100000" />
<property name="uploadTempDir" ref="uploadDirResource" />
</bean>

<bean id="uploadDirResource" class="org.springframework.core.io.FileSystemResource">
<constructor-arg>
<value>C:/test111</value>
</constructor-arg>
</bean>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-13T05:20:54.790

```
String ApplicationPath = 
        ContextLoader.getCurrentWebApplicationContext().getServletContext().getRealPath(""); 
```

这是如何在Spring中获取App的真实路径（不使用响应，会话......）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-07T14:19:06.880

以下在 ubuntu 上对我有用：

```
String filePath = request.getServletContext().getRealPath("/");
File f1 = new File(filePath+"/"+multipartFile.getOriginalFilename());
multipartFile.transferTo(f1); 
```

# openjpa - org.apache.openjpa.util.MetaDataException 同时使用 ANT 增强构建时间

> ID：10847999
> 
> 赞同：1
> 
> 时间：2012-06-01T09:46:00.003
> 
> 标签：openjpa

我正在使用使用 ANT 的 OpenJPA 的构建时间增强功能。这是项目结构

```
TestOpenJPA
+ src
| + in
| | + ns
| | | xxx.java
| + META-INF
| | persistence.xml
+ build
+ dist
+ OpenJPA_lib_jar
| openjpa-all-2.2.0.jar
+ build.xml 
```

`build.xml`这是文件中的增强代码段

```
 <!-- Define the classpath to include the necessary files. -->
<!-- ex. openjpa jars, persistence.xml, orm.xml, and target classes  -->
<path id="jpa.enhancement.classpath">
    <!-- Assuming persistence.xml/orm.xml are in META-INF -->
    <pathelement location="META-INF" />

    <!-- Location of the .class files -->
    <pathelement location="build/classes" />

    <!-- Add the openjpa jars -->
    <fileset dir="OpenJPA_lib_jar">
            <include name="*.jar" />
    </fileset>
</path>
<!-- define the openjpac task; this can be done at the top of the -->
<!-- build.xml file, so it will be available for all targets -->
<taskdef name="openjpac" classname="org.apache.openjpa.ant.PCEnhancerTask" classpathref="jpa.enhancement.classpath" />

<!-- invoke enhancer on all .class files below the model directory -->
<openjpac>
    <classpath refid="jpa.enhancement.classpath" />
    <fileset dir=".">
        <include name="**/model/*.class" />
    </fileset>
</openjpac>
<echo message="Enhancement complete" /> 
```

当我在 Eclipse（靛蓝）中构建项目时，输出中出现以下异常。

```
[openjpac] <openjpa-2.2.0-r422266:1244990 fatal user error> org.apache.openjpa.util.MetaDataException: MetaDataFactory could not be configured (conf.newMetaDataFactoryInstance() returned null). This might mean that no configuration properties were found. Ensure that you have a META-INF/persistence.xml file, that it is available in your classpath, or that the properties file you are using for configuration is available. If you are using Ant, please see the <properties> or <propertiesFile> attributes of the task's nested <config> element. This can also occur if your OpenJPA distribution jars are corrupt, or if your security policy is overly strict.
[openjpac]  at org.apache.openjpa.meta.MetaDataRepository.initializeMetaDataFactory(MetaDataRepository.java:1904)
[openjpac]  at org.apache.openjpa.meta.MetaDataRepository.endConfiguration(MetaDataRepository.java:1885)
[openjpac]  at org.apache.openjpa.lib.conf.Configurations.configureInstance(Configurations.java:518)
[openjpac]  at org.apache.openjpa.lib.conf.Configurations.configureInstance(Configurations.java:443)
[openjpac]  at org.apache.openjpa.lib.conf.PluginValue.instantiate(PluginValue.java:104)
[openjpac]  at org.apache.openjpa.conf.MetaDataRepositoryValue.instantiate(MetaDataRepositoryValue.java:68)
[openjpac]  at org.apache.openjpa.lib.conf.ObjectValue.instantiate(ObjectValue.java:83)
[openjpac]  at org.apache.openjpa.conf.OpenJPAConfigurationImpl.newMetaDataRepositoryInstance(OpenJPAConfigurationImpl.java:968)
[openjpac]  at org.apache.openjpa.ant.PCEnhancerTask.executeOn(PCEnhancerTask.java:88)
[openjpac]  at org.apache.openjpa.lib.ant.AbstractTask.execute(AbstractTask.java:171)
[openjpac]  at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
[openjpac]  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[openjpac]  at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
[openjpac]  at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[openjpac]  at java.lang.reflect.Method.invoke(Unknown Source)
[openjpac]  at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[openjpac]  at org.apache.tools.ant.Task.perform(Task.java:348)
[openjpac]  at org.apache.tools.ant.Target.execute(Target.java:390)
[openjpac]  at org.apache.tools.ant.helper.ProjectHelper2.parse(ProjectHelper2.java:180)
[openjpac]  at org.eclipse.ant.internal.core.ant.InternalAntRunner.parseBuildFile(InternalAntRunner.java:348)
[openjpac]  at org.eclipse.ant.internal.core.ant.InternalAntRunner.run(InternalAntRunner.java:634)
[openjpac]  at org.eclipse.ant.internal.core.ant.InternalAntRunner.run(InternalAntRunner.java:496)
[openjpac]  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[openjpac]  at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
[openjpac]  at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[openjpac]  at java.lang.reflect.Method.invoke(Unknown Source)
[openjpac]  at org.eclipse.ant.core.AntRunner.run(AntRunner.java:378)
[openjpac]  at org.eclipse.ant.internal.launching.launchConfigurations.AntLaunchDelegate.runInSameVM(AntLaunchDelegate.java:321)
[openjpac]  at org.eclipse.ant.internal.launching.launchConfigurations.AntLaunchDelegate.launch(AntLaunchDelegate.java:274)
[openjpac]  at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:854)
[openjpac]  at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:703)
[openjpac]  at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:696)
[openjpac]  at org.eclipse.core.externaltools.internal.model.ExternalToolBuilder.launchBuild(ExternalToolBuilder.java:181)
[openjpac]  at org.eclipse.core.externaltools.internal.model.ExternalToolBuilder.doBuildBasedOnScope(ExternalToolBuilder.java:169)
[openjpac]  at org.eclipse.core.externaltools.internal.model.ExternalToolBuilder.build(ExternalToolBuilder.java:88)
[openjpac]  at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
[openjpac]  at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
[openjpac]  at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
[openjpac]  at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:239)
[openjpac]  at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:292)
[openjpac]  at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
[openjpac]  at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:295)
[openjpac]  at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:351)
[openjpac]  at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:374)
[openjpac]  at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:143)
[openjpac]  at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:241)
[openjpac]  at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)

BUILD FAILED 
```

谁能告诉我什么是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:40:12.213

当我`<config propertiesFile = "${basedir}/src/META-INF/persistence.xml"/>`在`<openjpac>`标签中添加时，它就`MetaDataException`消失了。我在[这里找到了解决方案](https://stackoverflow.com/questions/8574004/how-to-do-openjpa-enhancement-with-ant-intellij-idea)