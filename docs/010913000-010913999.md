# StackOverflow 问答 10913000-10913999

# python - f2py 数组值函数

> ID：10913003
> 
> 赞同：6
> 
> 时间：2012-06-06T11:08:55.647
> 
> 标签：python, function, numpy, fortran, f2py

最新版本的 f2py 是否支持包装数组值 fortran 函数？在一些古老的文档中，这不受支持。现在怎么样了？

例如，让我们将以下函数保存为 func.f95。

```
function func(x)
    implicit none
    double precision :: x(:),func(size(x))
    integer :: i
    do i=1,size(x)
        func(i) = i*x(i)
    end do
end function 
```

我编译这个`f2py --fcompiler=gnu95 -c -m func func.f95`

然后让下面的python代码为test_func.py

```
import func
from numpy import array

x = array(xrange(1,10),dtype='float64')
print 'x=',x

y = func.func(x)
print 'func(x)=',y 
```

的输出
`python test_func.py`是

```
x= [ 1\.  2\.  3\.  4\.  5\.  6\.  7\.  8\.  9.]
Segmentation fault 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:52:33.183

f2py 的机制将 Fortran*子例程*转换为 python 函数。它不明白如何将 Fortran*函数*转换为 python 函数。我发现我需要用一个子例程包装所有 Fortran 函数，或者更好的是，将它们重写为子例程。

# sql - 相关和非相关查询的需求是什么？

> ID：10913008
> 
> 赞同：-1
> 
> 时间：2012-06-06T11:09:32.513
> 
> 标签：sql, sql-server, sql-server-2008

今天遇到了sql server的一个特性，叫做关联查询和非关联查询。据我了解，上述概念完成的任务可以使用连接来实现。

所以根据我的理解，在提出这个概念之前，sql server 的架构可能有一些预定义的目标。我想知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:22:06.580

在许多情况下，相关子查询可以重写为查询。您还应该了解 SQL Server 并没有发明任何这些想法——SQL、相关子查询或非相关子查询。我很确定这些可以追溯到 IBM 在 1970 年代后期指定的原始 SQL 语言。它们绝对是 1992 年的第一个 SQL 标准。

我可以想到三种需要相关子查询或需要相关子查询的情况。

首先，在尝试匹配两个表之间的行时使用更新或删除。在这种情况下，语法似乎需要相关的子查询来进行连接。实际上，SQL Server 确实提供了解决此问题的语法，但它最终引入了更复杂的想法——例如，更新连接中的一个表意味着什么。

其次，当相关子查询使用某些窗口函数时，例如 row_number()。在这种情况下，可能无法展开它们。

第三种情况是一种效率。考虑以下查询：

```
select *
from a
where a.blah in (select blah from b where b.foo = a.foo) and a.id in (list) 
```

您可以将其展开为：

```
select a.*
from a join
     (select distinct b.foo, b.blah
      from b
     ) b
     on a.foo = b.foo and
        a.blah = b.blah
where a.id in (list) 
```

在第一种情况下，如果 b 中的 foo 和 blah 上有索引，那么优化器可能会使用该索引而不进行任何聚合。在第二种情况下，几乎所有优化器（据我所知）都会对子查询进行聚合，即使只使用一行也是如此。

# sql - 视图中的 SQL Server SUM 函数

> ID：10913013
> 
> 赞同：4
> 
> 时间：2012-06-06T11:09:50.450
> 
> 标签：sql, sql-server-2008, sum, sql-view

我有一个字段视图：

```
typeId, type int
price, type decimal(15,4)) 
```

价格是计算值。

我想要的是`totalPrice`在 select 语句中添加另一个计算列 ( )，它将具有相同 id 的记录的所有价格相加，给出结果（假设视图中有四行）：

```
typeId   price         totalPrice
1        10,000        30,000
1        15,000        30,000
1        5,000         30,000
2        10,000        10,000 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T11:57:17.147

假设您现有的视图名为 TheSummary。将其重命名为 x_TheSummary

创建一个带有重命名视图的旧名称的新视图。

```
create view TheSummary as

select x.*, g.totalPrice
from x_TheSummary x
join
(
    select typeId, sum(price) as totalPrice
    from x_TheSummary
    group by typeId
) as g on g.typeId = x.typeId 
```

这样，您的新视图不会对依赖于旧视图名称的应用程序进行任何重大更改

顺便说一句，由于您使用的是 SQL Server 2008，因此您也可以使用以下窗口查询，但上面的查询适用于不支持窗口的 RDBMS。

```
create view TheSummary as

select x.*, sum(totalPrice partition by typeId) as totalPrice
from x_TheSummary x 
```

简单多了

* * *

@ivan-83 一秒钟，我认为 SQL Server 2008 不支持分区窗口。我对这种在 SQL 2008 上不起作用的构造（运行总数）想了太多，但它在 SQL 2012 上起作用。

```
SELECT  i, sum(i) over(order by i) as rt
FROM    (values(1),(9),(7),(6)) as x(i) 
```

正在运行的总查询在 SQL 2008 上不起作用：[http ://www.sqlfiddle.com/#!3/d41d8/1539](http://www.sqlfiddle.com/#!3/d41d8/1539)

它现在适用于 SQL 2012：[http ://www.sqlfiddle.com/#!6/d41d8/111](http://www.sqlfiddle.com/#!6/d41d8/111)

输出：

```
| I | RT |
----------
| 1 |  1 |
| 6 |  7 |
| 7 | 14 |
| 9 | 23 | 
```

综上所述，SQL Server 2012 不仅支持分区开窗，还支持逐行开窗。SQL Server 2008 仅支持分区窗口。所以@ivan-83 解决方案也有效。为此，我赞成你的回答

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:16:13.290

```
 select *, (select sum(price) 
            from view as v2 
            where v2.typeId = v1.typeId) as totalPrice 
 from view as v1 
```

试试这个

```
 .
  .
  .

dbo.SklepOcenjenaVrednost.StevilkaNarocila, 
   CAST(CASE dbo.CstPostavkaSklepa.DDVID WHEN 1 
      THEN dbo.CstPostavkaSklepa.CenaSkupajDDV * 1.085 
      WHEN 2 THEN dbo.CstPostavkaSklepa.CenaSkupajDDV * 1.2 
      ELSE dbo.CstPostavkaSklepa.CenaSkupajDDV END AS decimal(15, 4)) AS  CenaPostavkeZDDV

  , (select sum (CAST(CASE dbo.CstPostavkaSklepa.DDVID 
                   WHEN 1 THEN dbo.CstPostavkaSklepa.CenaSkupajDDV * 1.085 
                   WHEN 2 THEN dbo.CstPostavkaSklepa.CenaSkupajDDV * 1.2 
                   ELSE dbo.CstPostavkaSklepa.CenaSkupajDDV END AS decimal(15, 4)))
    from dbo.CstPostavkaSklepa as CstPostavkaSklepa2 
    where dbo.CstPostavkaSklepa.SklepID = CstPostavkaSklepa2.SklepID ) as CenaSklepaZDDV 

 FROM dbo.CstSklep INNER JOIN
    dbo.ActiveProcess ON dbo.CstSklep.ProcID = dbo.ActiveProcess.Id INNER JOIN
    dbo.CstPostavkaSklepa ON dbo.CstSklep.SklepID = dbo.CstPostavkaSklepa.SklepID   INNER JOIN
  .
  .
  . 
```

# xml - 使用 XSD 将平面数据表转换为数据集

> ID：10913026
> 
> 赞同：1
> 
> 时间：2012-06-06T11:10:44.173
> 
> 标签：xml, vb.net, xsd, flat-file

任何人都可以告诉我这是否可能？

我有如下文本形式的数据：

```
...
^GLOBAL HDORDNOLBL
^GLOBAL HDORDNO
^GLOBAL ORDDATLBL
Orderdatum
^GLOBAL ORDDAT
01/06/12
^GLOBAL INVDATLBL
Fact.datum
^GLOBAL INVDAT
05/06/12
^GLOBAL COUNTRYLBL
^GLOBAL COUNTRY
Belgium
^GLOBAL CUSNOLBL
Klantennummer
^GLOBAL CUSNO
AL8985
... 
```

我将把它放在一个平面数据表中，`^[ITEM]`作为一个字段并`[VALUE]`作为值。我可以管理这个但是......我想根据某些规则将此数据表转换为数据集。基本上，我想做的是从平面数据制作结构化数据集。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:20:32.313

使用查找/替换[将分隔符更改](https://stackoverflow.com/questions/10750162/excel-code-for-a-row-line-in-source)为 CSV 格式，将平面文件以 CSV 格式导入 Excel，然后使用[VBA 宏](https://stackoverflow.com/questions/9558013/save-as-xml-with-vba)使用 XSD 将其转换为 XML。

# mysql - 如何在单个查询中默认更新mysql中的字段值

> ID：10913030
> 
> 赞同：0
> 
> 时间：2012-06-06T11:11:04.250
> 
> 标签：mysql, database, phpmyadmin

我在 mysql 中有一个包含价格字段的表（该表中大约有 500 行）。现在我想以这样一种方式更新价格字段，以便我可以在所有当前没有数据的地方设置 5。虽然大约 100-120 行 [价格] 包含一些我想保持原样的值。我尝试通过 phpmyadmin 将 5 设置为默认值，但它不起作用。我不想手动插入这 350-400 个数据字段。使用 phymyadmin 作为工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:21:19.800

这是[UPDATE](https://dev.mysql.com/doc/refman/5.5/en/update.html)查询的基本情况。

```
UPDATE table
SET price = 5
WHERE price = 0 
```

将来我强烈建议您开始使用 NULL 作为空值，因为您很可能有时`0`不*被*视为“空”。

# selenium - 如何验证文本字段的字符数？

> ID：10913032
> 
> 赞同：0
> 
> 时间：2012-06-06T11:11:11.873
> 
> 标签：selenium, junit, automation, testng

我想检查我可以在文本字段中插入的字符数，并且正在考虑使用“for循环”，但这无济于事，因为 Selenium 尝试插入超过所需字符的字段将不接受，但测试继续没有任何失败，那么有没有办法获取文本字段的字符数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:31:27.330

这行得通吗？

```
final String myLongString = "Something horrrrribly looooong";
final int longStringLength = myLongString.length();

// assuming driver is a healthy WebDriver instance
WebElement elem = driver.findElement(By.id("myInput"));
elem.sendKeys(myLongString);
// it's possible that you'll first need to lose focus on elem before the next line
int realLength = elem.getValue().length();
assertEquals(longStringLength, realLength); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-26T11:21:18.307

使用量角器我捕获了该字段中的实际文本，然后进行了一个 forloop 来计算每个字母。

```
element(by.css('elementPATH')).getAttribute('value').then(function(words){
            //forloop to count each word
            var x = 0
            for(var i = 0; i < words.length; i++) {
                x = x + 1;
            };
            //check condition
            expect(x).toBe(200);
            return true;
        }); 
```

让我知道这是否有帮助。

# facebook - Facebook 连接，同时在 2 个网站上注册

> ID：10913033
> 
> 赞同：0
> 
> 时间：2012-06-06T11:11:17.627
> 
> 标签：facebook, connect

我可以使用 fb connect 同时连接到 2 个不同的网站吗？

我有一个使用 FB connect 的网络站点，但我也有一个论坛，我希望我的用户在上面注册有什么方法可以让他们在注册一个站点时使用连接自动在另一个站点上创建相同的用户详细信息按钮？

还是有另一种解决方法，以便我可以让他们同时加入两个站点，这样他们就不会创建 2 个不同的用户？

任何帮助都会很好，但请简单地说，因为我对这样的事情不是很有经验:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:34:57.987

您最好的选择是将您的论坛创建为您的主站点的子域，例如[https://forum.yoursite.com](https://forum.yoursite.com)。如果这样做，即使两者分别托管/运行，您也可以使用相同的 FB 登录。

否则，如果它们不是同一个站点，那么真正的用户不应该同时注册两个站点。

# iphone - UIAlertView 委托方法崩溃

> ID：10913036
> 
> 赞同：2
> 
> 时间：2012-06-06T11:11:27.550
> 
> 标签：iphone, delegates, uialertview, presentmodalviewcontroller

在我的 iPhone 应用程序中，我有一个`NSObject`A 类和一个`UIViewController`B 类。我想从 A 调用 B 类中的一个实例方法。我使用了以下代码。

```
Bclass *vc = [[Bclass alloc]init];
[vc hideAlert:NSString];
[vc release]; 
```

在 B 类中：

```
- (void)hideAlert:(NSString*)message{
    UIAlertView *shareAlrt = [[UIAlertView alloc] initWithTitle:@""
                                                        message:message
                                                       delegate:self
                                              cancelButtonTitle:@"Ok"
                                              otherButtonTitles:nil];
    [shareAlrt show];
    [shareAlrt release];
} 
```

并调用该方法并显示一个 AlertView。单击确定按钮时，我想导航到 Cclass 类。

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0)
    {
        Cclass *vc = [[Cclass alloc]initWithNibName:@"Cclass" bundle:[NSBundle mainBundle]];
        [self presentModalViewController:vc animated:NO];
        [vc release];
    }
} 
```

但是当我点击确定按钮时，应用程序崩溃了。这里发生了什么事？我已经`<UIAlertViewDelegate>`在 B class.h 文件中添加了，但仍然是同样的错误。请帮忙

我收到错误代码`*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFType alertView:clickedButtonAtIndex:]: unrecognized selector sent to instance 0x81baa80'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:40:07.317

换个方法就好

```
- (void)hideAlert:(NSString*)message{
    UIAlertView *shareAlrt = [[UIAlertView alloc] initWithTitle:@""
                                                    message:message
                                                   delegate:self
                                          cancelButtonTitle:nil
                                          otherButtonTitles:@"Ok",nil];
    [shareAlrt show];
    [shareAlrt release];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-06T11:18:34.013

假设您没有其他按钮，除了标题为“确定”的取消按钮，这已经得到了回答。通过查看您显示的代码进行假设。

您使用了取消按钮，您无法在该按钮上处理委托来执行任何操作。

如果您查看**UIAlertViewDelegate 类参考的文档**

> 或者，您可以实现 alertViewCancel: 方法以在系统取消您的警报视图时采取适当的操作。如果委托没有实现这个方法，默认的行为是模拟用户点击取消按钮并关闭视图。

# iphone - 如何将数据附加到 iPhone 上的 Facebook 应用请求？

> ID：10913037
> 
> 赞同：0
> 
> 时间：2012-06-06T11:11:27.673
> 
> 标签：iphone, ios, facebook, apprequests, facebook-app-requests

我正在将 Facebook 请求“深度链接”到我的 iOS 应用程序中。Facebook 应用程序已设置并且似乎可以工作，因为我可以向朋友发送请求，请求徽章出现在朋友的 Facebook 中，然后单击请求启动我的应用程序（全部在 iPhone 上）。但是，到目前为止，我无法通过请求传递任何数据，当我的应用程序从带有请求的 Facebook 应用程序启动时，我想使用这些数据。

我使用以下调用：

```
-(void) fbRequestActionWithMessage: (NSString *) message andLink: (NSString *) link
{
    NSDictionary *requestData = [NSDictionary dictionaryWithObjectsAndKeys:
                      @"data1", @"key1",
                      @"data2", @"key2",
                      nil];

    NSString *requestDataString = [requestData JSONRepresentation];

    NSMutableDictionary* params = [NSMutableDictionary
                                  dictionaryWithObjectsAndKeys:
                                  message,  @"message",
                                  @"Check this out", @"notification_text",
                                  link, @"link",
                                  requestDataString, @"data",                                   
                                  nil];

    [facebook dialog:@"apprequests" andParams:params andDelegate:self];
} 
```

params 字典中的“数据”和“链接”值似乎都没有任何效果。理想情况下，当我的应用程序从此请求启动时，我会取回“数据”或“链接”值。这可以做到吗？我找不到任何关于 params 字典结构的 Facebook 文档 - 是否有支持的键及其效果的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T05:05:55.867

iOS 不支持“link”参数和“notification_text”，但您应该能够传入数据并将其取回。

例如，传入数据：

```
FBSBJSON *jsonWriter = [FBSBJSON new];
NSDictionary *requestData = [NSDictionary dictionaryWithObjectsAndKeys:
                      @"data1", @"key1",
                      @"data2", @"key2",
                      nil];

NSString *requestDataString = [jsonWriter stringWithObject:requestData];
NSMutableDictionary* params = 
    [NSMutableDictionary dictionaryWithObjectsAndKeys:
    message, @"message",
    requestDataString, @"data",
    nil];

[facebook dialog:@"apprequests"
       andParams:params
     andDelegate:self]; 
```

例如，读回来：

```
....
@property (nonatomic, retain) NSURL *openedURL;

....
@synthesize openedURL = _openedURL;

....
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
    sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    self.openedURL = url;
    return [FBSession.activeSession handleOpenURL:url]; 
}

- (void)applicationDidBecomeActive:(UIApplication *)application {
    [FBSession.activeSession handleDidBecomeActive];
    if (FBSession.activeSession.isOpen) {
        [self checkIncomingNotification];
    }
}

- (void) notificationGet:(NSString *)requestid {
    [FBRequestConnection startWithGraphPath:requestid
          completionHandler:^(FBRequestConnection *connection,
                              id result,
                              NSError *error) {
              if (!error) {
                  NSString *title;
                  NSString *message;
                  if ([result objectForKey:@"data"]) {
                      // Process data in request
                      FBSBJSON *jsonParser = [FBSBJSON new];
                      NSDictionary *requestData = 
                      [jsonParser 
                        objectWithString:[result objectForKey:@"data"]];
                      [NSString stringWithFormat:@"Badge: %@, Karma: %@",
                      NSString *data1 = [requestData objectForKey:@"key1"];
                      NSString *data2 = [requestData objectForKey:@"key2"];
                  }
              }
          }];
}

- (void) checkIncomingNotification {
  if (self.openedURL) {
    NSString *query = [self.openedURL fragment];
    if (!query) {
        query = [self.openedURL query];
    }        
    NSDictionary *params = [self parseURLParams:query];
    // Check target URL exists
    NSString *targetURLString = [params valueForKey:@"target_url"];
    if (targetURLString) {
        NSURL *targetURL = [NSURL URLWithString:targetURLString];
        NSDictionary *targetParams = [self parseURLParams:[targetURL query]];
        NSString *ref = [targetParams valueForKey:@"ref"];
        // Check for the ref parameter to check if this is one of
        // our incoming news feed link, otherwise it can be an
        // an attribution link
        if ([ref isEqualToString:@"notif"]) {
            // Get the request id
            NSString *requestIDParam = [targetParams 
                                        objectForKey:@"request_ids"];
            NSArray *requestIDs = [requestIDParam 
                                   componentsSeparatedByString:@","];

            // Get the request data from a Graph API call to the
            // request id endpoint
            [self notificationGet:[requestIDs objectAtIndex:0]];
        }
    }
    // Clean out to avoid duplicate calls
    self.openedURL = nil;
  }
} 
```

您可以使用最新的 SDK v3.1 找到更多详细信息： [https ://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/](https://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/)

# regex - 正则表达式匹配逗号+换行符

> ID：10913038
> 
> 赞同：1
> 
> 时间：2012-06-06T11:11:36.607
> 
> 标签：regex

我正在寻找一个正则表达式来检查`,`和`newline`字符的出现。我更喜欢 egrep 。

**例子：**

```
strstr("Hello World","Hello"); 
```

不应该匹配，并且

```
strstr("Hello World",
       "Hello"); 
```

应该返回一个匹配。

我尝试了`egrep ',\n'`, 和`egrep ',$'`，但都不成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:14:38.450

你有没有尝试过

```
,\r\n 
```

根据您的平台，这会有所不同

```
\r    Mac up to OS 9 
\n   UNIX/Linux, Starting from Mac OS 10 (OS X)
\r\n DOS 
```

正则表达式

```
,$ 
```

也应该有效，并且更通用，但请记住设置选项，以便 $ 匹配换行符，而不仅仅是整个字符串的结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:46:54.313

我的猜测是逗号后有空格，或者您在此文件中的行尾类型错误。我会从这个开始，看看它是否成功。然后缩小：

```
',[ \t\l\f]*[\n\r]*' 
```

# c# - 在 Global.Asax 中获取相对根

> ID：10913040
> 
> 赞同：7
> 
> 时间：2012-06-06T11:11:41.013
> 
> 标签：c#, asp.net, global-variables, global

我试图在应用程序启动时将我的应用程序的物理根和相对根存储在内存中。

我做了这样的物理路径：

```
 //Get the physical root and store it
    Global.ApplicationPhysicalPath = Request.PhysicalApplicationPath; 
```

但我无法获得相对路径。我有以下代码有效，但它需要将其放入`page`对象中：

```
Global.ApplicationRelativePath = Request.Url.AbsoluteUri.Replace(Request.Url.AbsolutePath, "") + Page.ResolveUrl("~/"); 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T08:47:33.800

为了在 application_start 中获取相对路径，请使用以下命令：

```
 protected void Application_Start(object sender, EventArgs e)
 {
     string path = Server.MapPath("/");
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T11:01:53.690

在 Global.asax 中添加以下代码：

```
private static string ServerPath { get; set; }

protected void Application_BeginRequest(Object sender, EventArgs e)
    {
        ServerPath = BaseSiteUrl;
    }

    protected static string BaseSiteUrl
    {
        get
        {
            var context = HttpContext.Current;
            if (context.Request.ApplicationPath != null)
            {
                var baseUrl = context.Request.Url.Scheme + "://" + context.Request.Url.Authority + context.Request.ApplicationPath.TrimEnd('/') + '/';
                return baseUrl;
            }
            return string.Empty;
        }
    } 
```

# xml - JAXP 是否用于 XML 解析或 XML 绑定？

> ID：10913041
> 
> 赞同：1
> 
> 时间：2012-06-06T11:11:46.690
> 
> 标签：xml, xml-parsing, jaxp, xml-binding

我知道 JAXP 是用于 XML 解析的，但是是否有可能在 JAXP 的帮助下实现 xml 绑定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:19:46.180

不，但是对于 XML 绑定，您可以使用 JAXB。

# django - 模型特定实例的权限

> ID：10913042
> 
> 赞同：0
> 
> 时间：2012-06-06T11:11:49.370
> 
> 标签：django, permissions

我有一个带有附加字段的 CustomUser 模型和`region`具有相同字段的其他模型。

如何仅允许 CustomUser 的实例添加/删除/查看具有相同区域值的其他模型的实例（授予所有权限）？

**编辑**

按照 vivek soundrapandi 的建议，使用自定义管理器，我可以做到

```
class ShopManager(models.Manager):
    def get_query_set(self):
        return super(ShopManager, self).get_query_set().filter(region=?) 
```

但是如何按当前连接用户的区域过滤 Shop 实例？

这仍然允许 CustomUser 使用默认管理器从其他区域修改 Shop 实例，对吗？

有没有办法使用 Django 权限系统来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:19:32.143

使用[django-guardian](https://github.com/lukaszb/django-guardian)（实际上就是这样，但 SO 想要更多字符）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:16:20.377

尝试使用模型管理器使用您自己的函数。 [单击此处获取文档说明](https://docs.djangoproject.com/en/dev/topics/db/managers/#custom-managers-and-model-inheritance)

好的，

```
class Blog(models.Model):
    name = models.CharField(max_length=100)
    tagline = models.TextField()

class Entry(models.Model):
    blog = models.ForeignKey(Blog)
    name = models.CharField(max_length=100)
Entry.objects.filter(blog__name__exact='Beatles Blog') 
```

此示例检索所有带有名为“Beatles Blog”的 Blog 的 Entry 对象。因此，您的模型管理器应该对您要引用的所有其他类执行相同的操作，并将它们组合以生成单个结果集。如果我正确理解了您的问题，这应该是解决方案。

# php - Mysql_fetch_object() SQL 查询（如何：如果没有找到结果，显示“消息”）？

> ID：10913047
> 
> 赞同：0
> 
> 时间：2012-06-06T11:12:09.673
> 
> 标签：php, sql

我花了几个小时试图完成这项工作。搜索中没有解决方案对我有帮助，所以我终于问了。

我要做的是：**如果没有找到结果，则显示一条消息**。

这就是我所拥有的，目前它并没有令我沮丧。

```
 $sql = mysql_query("SELECT * FROM cover WHERE MATCH(keyword,description,categories) AGAINST('$search_key' in boolean mode) ORDER BY id DESC LIMIT $from , $perPage");

    $i=1;
    while($result = mysql_fetch_object($sql)) {

    $keyword = $result->keyword;
    $img = $result->img;
    $description = $result->description;

    if($img != null) { DO THIS;
    if($i==2) { require_once(dirname(__FILE__).'/page.php'); }
    $i++; }
    }
    if($img == null) { print "<center>No Results Found</center>"; } 
```

我不知道如何使用**mysql_num_rows**（这是我所看到的网站上最流行的解决方案），它返回一个错误，我认为它不能很好地工作`mysql_fetch_object($sql)` **？** 而且我不认为这样：`$img = $result->img;`也可以与 mysql_num_rows 一起使用。

我只是想找到一种方法来做到这一点，而无需修改括号内的任何内容，只需修改括号外的内容。

* * *

**当我说 "NOT WORKING"**时，我的意思是如果找不到结果，它不会显示应该显示的消息。我已经测试过`if($img != null) { print "<center>No Results Found</center>"; }`，它工作正常，它显示了消息。但它似乎并没有以另一种方式工作，我现在只是感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:17:10.863

如果您对 mysql_num_rows 有疑问，请查看您的索引：

```
$i = 1; 
```

如果没有结果，则循环后的值仍为 1，因此您需要检查 AFTER while 循环：

```
if($i == 1) { print "<center>No Results Found</center>"; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:25:34.633

以下将起作用：

```
$sql = mysql_query("SELECT * FROM cover WHERE MATCH(keyword,description,categories) AGAINST('$search_key' in boolean mode) ORDER BY id DESC LIMIT $from , $perPage");
if(mysql_num_rows($sql) > 0)
{
    $i=1;
    while($result = mysql_fetch_object($sql)) 
    {
        $keyword = $result->keyword;
        $img = $result->img;
        $description = $result->description;

        if($img != null) 
        { 
            DO THIS;
            if($i==2) 
            { 
                require_once(dirname(__FILE__).'/page.php'); 
            }
            $i++; 
        }
    }
}
else
{ 
    print "<center>No Results Found</center>"; 
} 
```

`$result`当您可以直接使用时，我看不出为什么要将值存储到单独的变量中`$result->keyword`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:20:04.137

您的问题是 while() 循环仅在返回结果时发生，因此在此内部永远不会引发 NULL 比较。

我建议您需要像这样重新排序代码：

```
$sql = mysql_query("SELECT * FROM cover WHERE MATCH(keyword,description,categories) AGAINST('$search_key' in boolean mode) ORDER BY id DESC LIMIT $from , $perPage");
$numResults = mysql_num_rows($sql);
if ($numResults === 0) { // mysql_query returned no results
    print "<center>No Results Found</center>";
} else { 
    require_once(dirname(__FILE__).'/page.php');
    while($result = mysql_fetch_object($sql)) 
    {
        $keyword = $result->keyword;
        $img = $result->img;
        $description = $result->description;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T11:15:32.767

你可以像这样使用它

```
 if(mysql_num_rows($result) <= 0);
    {
    echo 'There is no result';
    }
    else
     {
       your code
    } 
```

这是您的代码中的实现

```
 $sql = mysql_query("SELECT * FROM cover WHERE MATCH(keyword,description,categories) AGAINST('$search_key' in boolean mode) ORDER BY id DESC LIMIT $from , $perPage");

    $i=1;
    $result = mysql_fetch_object($sql);
    if(mysql_num_rows($result) > 0 )
    {
    while($result) {

    $keyword = $result->keyword;
    $img = $result->img;
    $description = $result->description;

    if($img != null) { DO THIS;
    if($i==2) { require_once(dirname(__FILE__).'/page.php'); }
    $i++; }
    }
    if($img == null) { print "<center>No Results Found</center>"; }
    }
   else
     {
         echo 'There is no result';
     } 
```

# java - TimeZone 自定义显示名称

> ID：10913048
> 
> 赞同：1
> 
> 时间：2012-06-06T11:12:11.013
> 
> 标签：java, timezone

我需要一个时区显示值如下：

```
(UTC + 05:30) Chennai, Kolkata, Mumbai, New Delhi 
```

但是通过使用以下方法，我得到了一些不同的输出。我应该如何获得上面的时区显示名称？（如果需要，我可以使用 JODA）。

```
public class TimeZoneUtil {

    private static final String TIMEZONE_ID_PREFIXES =
            "^(Africa|America|Asia|Atlantic|Australia|Europe|Indian|Pacific)/.*";
    private static List<TimeZone> timeZones;

    public static List<TimeZone> getTimeZones() {
        if (timeZones == null) {
            timeZones = new ArrayList<TimeZone>();
            final String[] timeZoneIds = TimeZone.getAvailableIDs();
            for (final String id : timeZoneIds) {
                if (id.matches(TIMEZONE_ID_PREFIXES)) {
                    timeZones.add(TimeZone.getTimeZone(id));
                }
            }

            Collections.sort(timeZones, new Comparator<TimeZone>() {

                public int compare(final TimeZone t1, final TimeZone t2) {
                    return t1.getID().compareTo(t2.getID());
                }
            });
        }

        return timeZones;
    }

    public static String getName(TimeZone timeZone) {
        return timeZone.getID().replaceAll("_", " ") + " - " + timeZone.getDisplayName();
    }

    public static void main(String[] args) {
        timeZones = getTimeZones();
        for (TimeZone timeZone : timeZones) {
            System.out.println(getName(timeZone));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:42:19.387

此代码可能会为您解决问题：

```
public static void main(String[] args) {

    for (String timeZoneId: TimeZone.getAvailableIDs()) {
        TimeZone timeZone = TimeZone.getTimeZone(timeZoneId);

        // Filter out timezone IDs such as "GMT+3"; more thorough filtering is required though
        if (!timeZoneId.matches(".*/.*")) {
            continue;
        }

        String region = timeZoneId.replaceAll(".*/", "").replaceAll("_", " ");
        int hours = Math.abs(timeZone.getRawOffset()) / 3600000;
        int minutes = Math.abs(timeZone.getRawOffset() / 60000) % 60;
        String sign = timeZone.getRawOffset() >= 0 ? "+" : "-";

        String timeZonePretty = String.format("(UTC %s %02d:%02d) %s", sign, hours, minutes, region);
        System.out.println(timeZonePretty);
    }
} 
```

输出如下所示：

> (UTC + 09:00) 东京

但是，有一些警告：

*   我只过滤掉其 ID 与格式“大陆/地区”（例如“美国/New_York”）匹配的时区。您必须进行更彻底的过滤过程才能摆脱诸如此类的输出`(UTC - 08:00) GMT+8`。

*   您应该阅读[TimeZone.getRawOffSet()](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html#getRawOffset%28%29)的文档并了解它在做什么。例如，它没有考虑 DST 影响。

*   总的来说，您应该知道这是一种混乱的方法，主要是因为时区 ID 可以有多种不同的格式。也许您可以将自己限制在对您的应用程序很重要的时区，并且只需将时区 ID 的键值映射到显示名称？

# java - 为什么重写的方法不能抛出新的检查异常

> ID：10913050
> 
> 赞同：4
> 
> 时间：2012-06-06T11:12:22.917
> 
> 标签：java

我有两个问题：

1.  重写方法不能抛出新的检查异常的约束的目的是什么？
2.  为什么允许被覆盖的方法只能抛出所有或不抛出，或者在超类中被覆盖方法的 throws 子句中指定的已检查异常的子集？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T11:14:10.357

在这两种情况下，都是因为您要覆盖的基本方法已经使用调用代码设置了合约；如果您可以添加该方法可能抛出的已检查异常，那么您将违反合同。

考虑一个具有引发检查异常`Base`的方法的类。您还有一个which 派生自和 overrides 。中的代码正在使用一个变量，但使用 的新实例对其进行初始化，并调用. 合同就是扔而已；扔任何东西都会破坏合同。`foo``SomeException``Derived``Base``foo``App``Base b``Derived``b.foo()``foo``SomeException`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T11:16:45.363

因为[代换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。

简而言之：因为你不应该用新的行为让类层次结构的用户感到惊讶。

这个原则对所有 OO 设计/语言都是通用的，而不是 Java 特有的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T11:25:38.157

假设可以在重写的方法中添加新的抛出异常。

```
class AA{
    void method() throws FileNotFoundException{}
}
class BB extends AA{
    @Override
    void method() throws FileNotFoundException, UnsupportedEncodingException {}
} 
```

现在您创建对对象 BB 的引用 AA 并调用方法

```
AA a=new BB();
try {
    a.method();
} catch (FileNotFoundException e) {
    e.printStackTrace();
} 
```

编译器只会让你捕获`FileNotFoundException`异常，并且不允许捕获`UnsupportedEncodingException`，因为它是从引用 AA 调用的。

但是您可以向覆盖的方法添加几种类型的异常

*   如果它们是已抛出异常 ( `IOException`-> `IOException, FileNotFoundException`) 的子类型，因为它们将被检查，
*   如果不必检查新异常 -> all `RuntimeException`s

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T11:15:10.930

覆盖类可以添加行为而不是删除。声明抛出异常的方法 - 是一种行为。

想想如果你有课程`A`和`B extends A`.
`A`实现`foo() throws MyException`和`B`实现`foo() throws OtherException`

什么会

```
A a = new B();
a.foo(); 
```

一定要抓吗？

然而，如果`B.foo()`只抛出异常的一个子集——它仍然是完全安全的，调用环境将捕获（或声明为抛出）所有`A`抛出的异常——并且这样做——它还将处理所有 B。

# java - JFrame 上关闭/最小化按钮的自定义设计

> ID：10913058
> 
> 赞同：2
> 
> 时间：2012-06-06T11:12:56.037
> 
> 标签：java, swing, jframe, look-and-feel, windowlistener

我想应用我自己的关闭和最小化按钮。有没有办法改变`JFrame`设计？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T12:33:43.420

诀窍在于[PLAF](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/index.html)和[`setDefaultLookAndFeelDecorated(true)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html#setDefaultLookAndFeelDecorated%28boolean%29)（[指定窗饰](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html#setDefaultLookAndFeelDecorated)）。

例如

![金属](../Images/90908ffdc1f5684067b9e1ed2bf99911.png) ![视窗](../Images/7658eaac131039911c40b75b5819849b.png)

```
import java.awt.BorderLayout;
import javax.swing.*;

public class FrameCloseButtonsByLookAndFeel {

    FrameCloseButtonsByLookAndFeel() {
        String[] names = {
                UIManager.getSystemLookAndFeelClassName(), 
                UIManager.getCrossPlatformLookAndFeelClassName()
        };
        for (String name : names) {
            try {
                UIManager.setLookAndFeel(name);
            } catch (Exception e) {
                e.printStackTrace();
            }
            // very important to get the window decorations.
            JFrame.setDefaultLookAndFeelDecorated(true);
            JFrame f = new JFrame(UIManager.getLookAndFeel().getName());
            f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

            JPanel gui = new JPanel(new BorderLayout());
            f.setContentPane(gui);

            JTree tree = new JTree();
            tree.setVisibleRowCount(4);
            gui.add(tree, BorderLayout.LINE_START);

            gui.add(new JScrollPane(new JTextArea(3,15)));

            JToolBar toolbar = new JToolBar();
            gui.add(toolbar, BorderLayout.PAGE_START);
            for (int ii=1; ii<5; ii++) {
                toolbar.add(new JButton("Button " + ii));
                if (ii%2==0) {
                    toolbar.addSeparator();
                }
            }

            f.pack();

            f.setLocationByPlatform(true);
            f.setVisible(true);
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new FrameCloseButtonsByLookAndFeel();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T11:39:18.723

认为你是在 JWindow 之后

[http://docs.oracle.com/javase/7/docs/api/javax/swing/JWindow.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/JWindow.html)

然后，您可以创建自己的按钮，这些操作可以最小化/关闭您的窗口

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T11:39:07.857

我知道唯一可以做的就是在该侦听器中添加一个[`WindowListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html)并`JFrame`处理关闭事件。您几乎可以进行任何操作，例如显示对话框甚至取消关闭`JFrame`.

有关如何编写此类侦听器的更多详细信息，请参阅本[教程。](http://docs.oracle.com/javase/tutorial/uiswing/events/windowlistener.html)

至于最小化：据我所知，没有办法控制或修改这种行为，它完全由操作系统控制。

更改最小化/关闭/最大化按钮方面的唯一方法是使用自定义 LookAndFeel 和设置`JFrame.setDefaultLookAndFeelDecorated (true);`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-29T12:51:06.317

1.  设置`jframe undecorated`。
2.  为每个按钮放置一个`jlabel`。
3.  为每个`Btn`.
4.  放置`mouseListeners`每个`jlabel`并指定代码，例如，`System.exit(0);/set ICONIFIED option`

# python - 在分配装饰器之前引用的局部变量

> ID：10913060
> 
> 赞同：2
> 
> 时间：2012-06-06T11:13:08.680
> 
> 标签：python, decorator

我正在使用具有[此处](http://www.python.org/dev/peps/pep-0318/#current-syntax)描述的功能语法的装饰器。

我遍历一个字典列表。在这个循环中，我用带参数的装饰器包装了一个通用函数。然后我用当前字典作为参数调用包装函数。

我的问题是我得到一个`local variable 'generic_evaluator' referenced before assignment`错误。

这是我的代码：

**相关装饰师：**

```
def log(logfile_name):
    def inner_log(func):
        def wrapped(*args, **kwargs):
            import os
            ret = func()
            # business code...
        return wraps(func)(wrapped)
    return inner_log 
```

这里是我用装饰器包装`generic_evaluator`函数的地方。`log`

```
for evaluation in generic_evaluations:
    generic_evaluator = log(evaluation['suffix'])(generic_evaluator)
    generic_evaluator(evaluation['suffix'], evaluation['id']) 
```

**编辑**

另外，这段代码可能会更清楚：

```
@tictoc
def generic_evaluator(suffix_url, id):
    xml = etree.parse(get_resource(base_url + "/" + suffix_url + "/" + str(id)))
    links = fetch_urls_from_xml(xml)
    return links 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:40:51.657

如果`generic_evaluator`是一个全局函数，并且您实际上想要重新绑定全局名称`generic_evaluator`，请将此名称声明为全局：

```
global generic_evaluator 
```

如果您不想重新绑定全局名称，请使用不同的本地名称并对其进行初始化：

```
local_generic_evaluator = generic_evaluator 
```

[这个答案](https://stackoverflow.com/questions/9264763/unboundlocalerror-in-python/9264845#9264845)解释了发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:18:45.073

```
generic_evaluator = log(evaluation['suffix'])(generic_evaluator) 
```

您在此处分配之前引用 generic_evaluator log(evaluation['suffix'])(generic_evaluator)

尝试这个：

```
for evaluation in generic_evaluations:
    generic_evaluator = log(evaluation['suffix'])(use_some_other_variable)
    generic_evaluator(evaluation['suffix'], evaluation['id']) 
```

# eclipse - 转义 URI 中的空格

> ID：10913062
> 
> 赞同：0
> 
> 时间：2012-06-06T11:13:22.027
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我正在尝试在 Eclipse 中以编程方式创建一个链接文件夹，并使用 Eclipse EFS 链接位于工作区外部位置的 zip 文件。

我收到以下异常

```
java.net.URISyntaxException: Illegal character in query at index 20: zip:/?file:///D:/New Folder/documentation.zip
    at java.net.URI$Parser.fail(URI.java:2810)
    at java.net.URI$Parser.checkChars(URI.java:2983) 
```

问题是 URI 中的空格。

`%20`我尝试用和“ ”替换空格`+`，但都没有奏效。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:46:37.443

双重逃脱它，`%2520`它会起作用。

# haskell - Haskell ZeroMQ 绑定不适用于 REQ 套接字

> ID：10913063
> 
> 赞同：4
> 
> 时间：2012-06-06T11:13:26.287
> 
> 标签：haskell, zeromq, message-passing

所以我在这里，几乎无法在 Windows 桌面上安装 libzmq，然后用 cabal 安装 zeromq-haskell。我想通过在 hello-world 类型的应用程序中将 python 程序与 haskell 程序绑定来测试 api。

所以我看到的最基本的模式是请求-回复模式。首先，我尝试用haskell（REP）制作服务器，用python（REQ）制作客户端，无论我做什么，女巫都惨遭失败。生成的异常消息是 Exception: receive: failed (No error)。

因此，我查看了 System.ZMQ 和 System.ZMQ.Base 源代码，我看到在调用 c_zmq_recv 时接收会引发错误，而女巫又会直接映射到对 C api 的 ffi（？）调用。所以我想也许我没有正确安装，但后来我尝试在 Haskell 中创建客户端，在 python 中创建服务器，我注意到它没有任何问题，所以可能 recv 接口不是这里的问题。

这是下面的haskell代码，具有客户端和服务器功能

```
import System.ZMQ
import Control.Monad (forM_,forever)
import Data.ByteString.Char8 (pack,unpack)
import Control.Concurrent (threadDelay)

clientMain :: IO ()
clientMain = withContext 1 (\context->do
    putStrLn "Connecting to server"
    withSocket context Req $ (\socket-> do
        connect socket "tcp://127.0.0.1:5554"
        putStrLn $ unwords ["Sending request"]
        send socket (pack "Hello...") []
        threadDelay (1*1000*1000)
        reply<-receive socket []
        putStrLn $ unwords ["Received response : ",unpack reply]))

serverMain :: IO ()
serverMain = withContext 1 (\context-> do
    putStrLn "Listening at 5554"
    withSocket context Rep $ (\socket-> do
        connect socket "tcp://127.0.0.1:5554"
        forever $ do 
            message<-receive socket [] -- this throws an IO Exception
            putStrLn $ unwords ["Received request : ",unpack message]
            threadDelay (1*1000*1000)
            send socket (pack "World") [] ))

main :: IO ()
main = serverMain -- replace with clientMain and it works 
```

现在我真的没有时间测试所有其他通信模式（推/拉、订阅/发布、配对等），而对于我需要的 python 服务器/haskell 客户端可能更好，但我对天气很好奇我'我做错了什么，或者我的代码的任何部分以任何方式损坏。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:41:39.837

您需要使其中一个套接字（通常是服务器）绑定，您似乎让它们都连接。

尝试在函数中更改`connect socket "tcp://127.0.0.1:5554"`为。`bind socket "tcp://127.0.0.1:5554"``serverMain`

# android - 第二个活动的某些部分如何在android中的第一个活动中可见

> ID：10913065
> 
> 赞同：0
> 
> 时间：2012-06-06T11:13:30.937
> 
> 标签：android, android-layout

我在第一个活动中有一个列表视图，我想在点击时转到第二个活动，但我想实现第一个视图是[这样](https://play.google.com/store/apps/details?id=com.evernote&hl=en)的，这意味着第二个活动的某些部分在第一个活动中可见。我怎样才能实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:19:20.400

在这种情况下，不要创建两个单独的活动。您可以做的是，将第二个活动的 xml 布局写入第一个活动的 xml 文件中，但将其可见性保持为“ `GONE`”。单击调用第二个活动的按钮时，只需将此布局的可见性设置为“ `VISIBLE`”。所以你会得到想要的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:30:16.953

将第二个活动中布局的背景颜色设置为透明：

```
android:background="@android:color/transparent" 
```

# jquery - ajax请求抛出错误

> ID：10913070
> 
> 赞同：0
> 
> 时间：2012-06-06T11:13:47.247
> 
> 标签：jquery, ajax

我正在尝试实现一个静态`javascript`/`jQuery`脚本来测试我的`ajax`功能。例如，这将在我的主目录中的某个地方，并包含`ajax`对我的一堆请求`localhost`：

```
function getSomethingAjax(){
    $.get('http://127.0.0.1:8888/getSomething',{} , function(json){    
        getSomethingCallback(json);
    }, "json");
} 
```

我的 Firebug 给了我这样的错误： [firebug screenshot http://img443.imageshack.us/img443/4934/tinygrabscreenshot06061.png](http://img443.imageshack.us/img443/4934/tinygrabscreenshot06061.png) 但是如果我手动打开页面（只需在浏览器中输入：127.0.0.1:8888/getSomething）我得到匹配的回报。访问 url 有什么区别？我的`ajax`请求在等待一个特定的返回值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:20:07.313

发出 Ajax 请求的页面和请求的页面必须在同一个域中。

浏览器将阻止任何违反此规则的 ajax 请求。

只是一个建议：我建议使用服务器端语言进行测试。这将允许您调用应用程序，而不必将测试脚本保留在同一个域中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:20:16.837

也许您的回邮地址与您的不符。如果您使用 127.0.0.1 发送请求，则服务器返回 localhost 它将失败。尝试使用 localhost 而不是 IP？

# javascript - 如何使用javascript在文本框焦点上设置边框颜色？

> ID：10913073
> 
> 赞同：0
> 
> 时间：2012-06-06T11:14:07.933
> 
> 标签：javascript, asp.net

在我的表单中，五个文本框..当点击文本框时，它的边框颜色必须改变。（在文本框焦点事件上，边框颜色会改变）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:26:57.207

只需采用非常简单的 DHTML 方法：

```
<div id="textbox1" onfocus='changeBorderColor()'></div>

<script type="text/javascript">
function changeBorderColor(){
var color=rgb(50,100,150);
document.getElementById("textbox1".style.border-color:" + color;
}
 </script> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:30:41.083

Giri 检查这个它可以帮助你

```
<script type="text/javascript">
function changeBorderColor(id)
{
 document.getElementById(id).style.border = "1px solid #ff0000";
  }
</script>

</head>

 <body>
 <input type="text" name="txtTest" id="txtTest" onclick="changeBorderColor(this.id)"/>
 </body> 
```

此代码用于函数中的一个文本框传递参数

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-06T12:18:05.170

```
input {
border: 1px solid black;
margin-top: 150px;
margin-left: 100px;

height: 45px;
width: 300px;
padding: 5px;
border-radius: 5px;

font-size: 30px;

transition:.2s linear;
-webkit-transition:.2s linear;
-moz-transition:.2s linear;
}

input:focus {
outline: none;
box-shadow: 0px 0px 7px #61C5FA;
border-color: #61C5FA;
} 
```

# extjs - 当我尝试排序时调用网格上的选择事件

> ID：10913074
> 
> 赞同：0
> 
> 时间：2012-06-06T11:14:09.103
> 
> 标签：extjs, extjs-mvc, extjs4.1

我的控制器中有以下内容。这用于编辑选定的行。这是按预期进行的，但是当我单击字段名称对列进行排序时，也会调用此事件。

```
'#cutterGrid':{
                select :this.onCutterSelect
            }, 
```

我在这里使用最好的活动吗？我正在使用 extjs 4.1

# pdf - 在 icefaces modalpopup 中显示 pdf 文件

> ID：10913077
> 
> 赞同：0
> 
> 时间：2012-06-06T11:14:21.033
> 
> 标签：pdf, icefaces, modalpopup

是否可以在带有 icefaces 的 modalpopup 中显示 pdf 文件。试过这个，但似乎不起作用。我也是icefaces的新手。

```
 <ice:panelPopup autoCentre="true" visible="#{popup.visible}" modal="true">
                            <f:facet name="header"/>
                            <f:facet name="body">

                               <OBJECT DATA="/ICEfacesDevelopersGuide.pdf" TYPE="application/pdf" WIDTH="100%" HEIGHT="100%" />
                                <ice:commandButton value="Close" action="#{popup.close}" />
                            </f:facet>
                        </ice:panelPopup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:41:27.673

我最终以旧方式使用输出链接和目标属性在新窗口或选项卡上打开它。

# python - Python：如何将字典插入 sqlite 数据库？

> ID：10913080
> 
> 赞同：15
> 
> 时间：2012-06-06T11:14:34.107
> 
> 标签：python, sqlite, dictionary

我有一个带有以下列的表的 sqlite 数据库：

```
id(int) , name(text) , dob(text) 
```

我想在其中插入以下字典：

```
{"id":"100","name":"xyz","dob":"12/12/12"} 
```

字典键是列名。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T11:26:53.077

[查看此处](http://docs.python.org/library/sqlite3.html)的文档，您可以添加一行：

```
c.execute("INSERT INTO stocks VALUES (?,?,?)", [dict["id"], dict["name"], dict["dob"]]) 
```

或者您可以使用列表并一次添加多行：

```
# Larger example that inserts many records at a time
purchases = [('2006-03-28', 'BUY', 'IBM', 1000, 45.00),
             ('2006-04-05', 'BUY', 'MSFT', 1000, 72.00),
             ('2006-04-06', 'SELL', 'IBM', 500, 53.00),
            ]
c.executemany('INSERT INTO stocks VALUES (?,?,?,?,?)', purchases) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-08-10T14:09:16.453

这是一种保持参数安全的方法。（可能需要在表名部门打磨）

```
def post_row(conn, tablename, rec):
    keys = ','.join(rec.keys())
    question_marks = ','.join(list('?'*len(rec)))
    values = tuple(rec.values())
    conn.execute('INSERT INTO '+tablename+' ('+keys+') VALUES ('+question_marks+')', values)

row = {"id":"100","name":"xyz","dob":"12/12/12"}
post_row(my_db, 'my_table', row) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-06-10T22:17:57.410

要直接使用字典，您可以执行以下操作：

```
user1 = {"id":100, "name": "Rumpelstiltskin", "dob": "12/12/12"}
c.execute("INSERT INTO users VALUES (:id, :name, :dob)", user1) 
```

与实例/模型一起使用：

```
class User:                                                                      

    def __init__(self, name, dob):                                            
        self.name = name                                                             
        self.dob = dao  

u1 = User("Rumpelstiltskin", "12/12/12")
c.execute("INSERT INTO users VALUES (:name, :dob)", u1.__dict__) 
```

id 是 Python 中的关键字，因此如果您想将其用作实例变量的标识符，我建议您使用 _id （与表的主键名称相同）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-06T11:23:42.780

例如，如果 ，`c = conn.cursor()`并且您的字典被命名`dict`并且您的表`tablename`，那么您可以编写

```
c.execute('insert into tablename values (?,?,?)', [dict['id'], dict['name'], dict['dob']]) 
```

它将根据需要将字典的元素插入表中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-29T19:40:31.860

根据 Gareth 的回复，如果您正在使用`MySQLdb`，您可以使用`executemany`并传递一个值列表，您可以直接从`dict`using`dict.values()`

# jquery - 使用语义标记结构的选项卡式导航框？

> ID：10913087
> 
> 赞同：4
> 
> 时间：2012-06-06T11:14:47.963
> 
> 标签：jquery, html, css, semantic-markup

我正在尝试创建一个带有选项卡的信息框，用于切换框的内容，如下所示：[http ://www.cssnewbie.com/build-a-tabbed-box-with-css-and-jquery/](http://www.cssnewbie.com/build-a-tabbed-box-with-css-and-jquery/)

使用一些 CSS 和 jQuery 很容易，对吧？问题是我试图找出一种使用语义标记的方法，这样当 CSS/JS 被禁用时，它只会以正确的顺序显示标题及其内容。我见过的所有例子都是这样的：

```
<div id="box-nav">
    <ul>
        <li>Content head 1</li>
        <li>Content head 2</li>
        <li>Content head 3</li>
    </ul>
</div>

<div id="box-content">
    <div id="content-1">
        <p>Blah 1\. </p>
    </div>
    <div id="content-2">
        <p>Blah 2\. </p>
    </div>
    <div id="content-3">
        <p>Blah 3\. </p>
    </div>
</div> 
```

这使得通过分离标题及其内容来构建非常容易，但我想使用这个标记来做一个：

```
<div id="content-1">
    <h2>Content head 1</h2>
    <p>Blah 1\. </p>
</div>
<div id="content-2">
    <h2>Content head 2</h2>
    <p>Blah 2\. </p>
</div>
<div id="content-3">
    <h2>Content head 3</h2>
    <p>Blah 3\. </p>
</div> 
```

这样它就可以优雅地降级为纯 HTML，但是如果不使用 jQuery 重新排列标记，我无法完全弄清楚。

有人知道这样做的干净方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T12:20:25.083

### 我有一个干净、纯正和语义化的解决方案给你

我使用`dl`元素而不是标题元素。我认为这是可以接受的结果。

*   [dabblet.com 上的基本功能演示](http://dabblet.com/gist/2881519)
    ![purecss 选项卡](../Images/cc52c66a991b6f89ff9f24c5fe5b231f.png)
*   [purecss 选项卡界面的装饰](http://dabblet.com/gist/2881538)
    ![purecss 选项卡](../Images/07414326b556462ab2b998c9a11177a5.png)

在我的解决方案中`dl`，元素用于语义标签：

> 使用 DL 元素创建的定义列表通常由一系列术语/定义对组成（尽管定义列表可能有其他应用程序）。因此，在宣传产品时，可以使用定义列表：

**像这样的标记**：

```
<div id="wrap">
    <dl>
        <dt id="ft"><a href="#tab1">TAB 1</a></dt>
            <dd id="tab1">tab1 content</dd>
        <dt id="st"><a href="#tab2">TAB 2</a></dt>
            <dd id="tab2">tab2 content</dd>
        <dt id="tt"><a href="#tab3">TAB 3</a></dt>
            <dd id="tab3">tab3 content</dd>
    </dl>
</div> 
```

**视觉外观**将是这样的：
![dl 元素](../Images/982ee1d7e3b6c87b91c1391751bc8777.png)

要从此标记创建选项卡界面，请使用以下命令**`CSS`：**

```
#wrap, dt {
    position: absolute;
}

dl {
    overflow: hidden;
}

dt {
    bottom: 100%;
}

dd, dl {
    width: 640px;
    height: 400px;
}

#st {
    left: 92px;
}
#tt {
    left: 184px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:05:07.447

您可以仅使用目标伪类使用 css 来隐藏 div

[目标类](http://www.w3.org/Style/Examples/007/target)

# jasper-reports - 分配给参数 SUBREPORT_DIR 的不兼容 java.lang.Integer 值

> ID：10913088
> 
> 赞同：0
> 
> 时间：2012-06-06T11:14:58.743
> 
> 标签：jasper-reports

让我描述一个情况：我有一个报表 A 和子报表 B 和 C。A 使用 B，B 使用 C。A`SUBREPORT_DIR`中的默认值是`$P{CUSTOM_SUBREPORT_DIR}`。在 A.jrxml 我看到：

```
<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
    <defaultValueExpression><![CDATA[$P{CUSTOM_SUBREPORT_DIR}]]></defaultValueExpression>
</parameter>
<parameter name="CUSTOM_SUBREPORT_DIR" class="java.lang.String">
    <defaultValueExpression><![CDATA[]]></defaultValueExpression>
</parameter> 
```

我还需要一个适当的`SUBREPORT_DIR`in B 值，所以我使用 iReport (Subreport properties/Parameters) 传递了它，所以`A.jrxml`我有：

```
<subreportParameter name="SUBREPORT_DIR">
    <subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
</subreportParameter> 
```

当我尝试生成报告时，AI 得到`net.sf.jasperreports.engine.JRException: Incompatible java.lang.Integer value assigned to parameter SUBREPORT_DIR in the B dataset.`

我确定这`$P{SUBREPORT_DIR}`不是整数，`SUBREPORT_DIR`B 子报表中的参数类型是字符串。我使用 iReport 4.0.2 制作的所有报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:48:18.270

您可以尝试以下方法（我这样做并且有效）：

在报告 A 中定义参数：

```
<parameter name="SUBREPORT_B_DIR" class="java.lang.String" isForPrompting="false" />
<parameter name="SUBREPORT_C_DIR" class="java.lang.String" isForPrompting="false" /> 
```

在报表 A 中定义子报表 B。这里我从参数中为报表 B 使用 DataSource。此外，我使用子报表 C 目录向子报表 B 发送一个参数，并将另一个参数与报表 C 的 DataSource 一起发送。

```
<subreport>
    <reportElement x="0" y="16" width="583" height="10" />
    <subreportParameter name="SUBREPORT_C_DIR">
         <subreportParameterExpression><![CDATA[$P{SUBREPORT_C_DIR}]]></subreportParameterExpression>
    </subreportParameter>
    <subreportParameter name="SubReportCDataSource">
         <subreportParameterExpression><![CDATA[$P{SubReportCDataSource}]]></subreportParameterExpression>
    </subreportParameter>
    <dataSourceExpression><![CDATA[$P{SubReportBDataSource}]]></dataSourceExpression>
    <subreportExpression><![CDATA[$P{SUBREPORT_B_DIR} + "B.jasper"]]></subreportExpression>
</subreport> 
```

最后，在子报表 B 中，定义子报表 C：

```
<subreport>
        <reportElement x="0" y="16" width="583" height="10" />
        <dataSourceExpression><![CDATA[$P{SubReportCDataSource}]]></dataSourceExpression>
        <subreportExpression><![CDATA[$P{SUBREPORT_C_DIR} + "C.jasper"]]></subreportExpression>
    </subreport> 
```

# asp.net - 使用 SSL 和表单身份验证保护 WCF 数据服务

> ID：10913090
> 
> 赞同：0
> 
> 时间：2012-06-06T11:15:08.100
> 
> 标签：asp.net, .net, wcf, wcf-data-services

![在此处输入图像描述](../Images/786737df3ad3fdd8cb1ebece26f7db42.png)

我在使用表单身份验证和 ssl 对 WCF 数据服务进行身份验证时遇到问题。我打电话`Membership.ValidateUser`进行身份验证，然后完成数据服务。

问题是：我查看了 Fiddler 中的数据，发现我仍然设法在请求标头中看到用户名和密码。

我查看了`ClientFormsAuthenticationMembershipProvider`代码，发现它在请求正文中发送了用户名和密码。那么为什么我可以在请求消息中看到它呢？

请在图片中查看我的情况。

提前致谢 ...

# wordpress - 在服务器上批量调整图像大小，现在 Wordpress 中的图像大小错误

> ID：10913091
> 
> 赞同：0
> 
> 时间：2012-06-06T11:15:08.713
> 
> 标签：wordpress

我在我的服务器上运行了一个 Mogrify 脚本并调整了大约 1000 张图像的大小。一切顺利。

然而，当我开始在 Wordpress 中编辑页面时，我注意到所有图像看起来都很奇怪。例如，缩略图的大小不正确，看起来好像被错误地调整了大小。

在我调整大小之前，我检查了媒体库中的一些图像，发现它们的元数据显示的是旧分辨率。

有什么方法可以让 Wordpress 通过并使用正确的图像尺寸更新其媒体库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:01:05.727

问题是 WordPress 有自己的处理图像大小的方式。不仅是元数据和其他数据库信息，WP 生成的各种版本都有文件名后缀的大小。

您可能需要`add_image_size`在主题的 functions.php 中使用和/或在管理面板中调整媒体设置。

之后，运行插件[Regenerate Thumbnails](http://wordpress.org/support/plugin/regenerate-thumbnails)。关于它的名字，我将引用插件作者：

> 任何不是全尺寸图像的都是缩略图。有些缩略图比其他缩略图大。我的插件重新制作了所有这些。

*PS：请注意，WordPress 问题更适合这里：[http ://wordpress.stackexchange.com](http://wordpress.stackexchange.com)*

# zend-framework - ZF 命名空间自动加载程序和引导

> ID：10913093
> 
> 赞同：0
> 
> 时间：2012-06-06T11:15:20.087
> 
> 标签：zend-framework, bootstrapping, autoloader

我有一个标准的 ZF 结构

库 -wil -Auth -Adapter.php

在这个文件夹 /libary/Wil/Auth/Adapter 我有这个类

基于[http://www.zendcasts.com/logging-in-users-using-doctrine-and-zend_auth/2010/01/](http://www.zendcasts.com/logging-in-users-using-doctrine-and-zend_auth/2010/01/)

类 Wil_Auth_Adapter 实现 Zend_Auth_Adapter_Interface {

}

并在 application.ini 中声明我的 autoloaderNamespaces[]="Wil"

我在引导程序中没有任何内容可以将其注册为 Helper Broker 或任何东西。

我的问题是为什么当我从像这样的控制器调用它时它会起作用 $adapter = new Wil_Auth_Adapter()

很明显，我不了解 ZF 中的自动加载器、资源和引导。

我在哪里可以得到这个过程的一个很好的解释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:58:49.933

首次使用时，自动加载器会自动包含类。资源是应用程序使用的“东西”，例如数据库连接、缓存、自动加载器。引导过程设置这些资源。所以这是三个独立的东西，但它们是相互联系的。

您的身份验证适配器只是一个类，因此不需要任何特殊设置。经纪人。自动加载器知道一个名为的类`Wil_Auth_Adapter`将存在于`Wil/Auto/Adapter.php`，它会检查该类的 include_path 上的文件夹（默认情况下包括库文件夹）。

# c# - USING 语句的返回值

> ID：10913094
> 
> 赞同：1
> 
> 时间：2012-06-06T11:15:22.043
> 
> 标签：c#, .net, return, idisposable, using

最初，此方法仅在出现任何问题时才返回**false ，无论其类型如何。**我想知道`using`如果出现异常，应用语句会破坏逻辑

是否可以通过这种方式从 using 语句中返回**真值：**

```
 try
    {

        Measurements.DeleteAllMeasurements(ID);
        string query = "DELETE FROM `Narz` WHERE `NAZk_1_ID`=@NAZ_ID";
        using(OleDbConnection strukturaConnection = new OleDbConnection(CommonConnectionString + DbPath + strStructureMdb))
            {
                using (OleDbCommand command = new OleDbCommand(query, strukturaConnection);)
                    {

                        command.Parameters.Add("@NAZ_ID", OleDbType.Numeric, 50);
                        command.Parameters["@NAZ_ID"].Value = ID;
                        command.ExecuteNonQuery();
                        return true; 
                    } 
            }
    }
    catch (Exception ex)
    {
        Logger.LogError(ex);
        return false;
    } 
```

或者我应该以另一种方式返回**false ？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T11:17:28.240

`IDisposable.Dispose()`所有 using 语句所做的只是在代码块末尾 隐式调用实例的实现。

除非您正在返回一个引用并且该`Dispose()`方法恰好对其进行了操作，否则这两个问题是完全不相关的。

简而言之，从 using 语句中返回什么值并不重要。

***编辑：**关于您的方法“应该返回”什么：我们没有足够的信息来了解这一点。我们甚至不知道该方法的名称是什么。而且我们不知道该方法将被应用程序的哪些其他对象或方面使用。返回值应该对其调用者有意义，并有效地传达操作的结果。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:19:48.380

而是在方法创建时创建一个布尔值。在 try 中将其值设置为 true，在 catch 中将其值设置为 false。外部捕获返回该变量值。

使用不会影响您或我的代码。它只是用于`IDisposable.Dispose()`隐式调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:18:36.937

没关系 - 它所做的只是在 using 语句括号中调用 IDisposable 对象的 dispose 方法

# wordpress - 启用主题时创建 Wordpress 导航菜单

> ID：10913100
> 
> 赞同：1
> 
> 时间：2012-06-06T11:15:52.133
> 
> 标签：wordpress, wordpress-theming

当我激活我的主题时，我需要在 wordpress 中创建一个导航菜单。

我在主题激活时创建了一些页面，我需要将这些页面添加到导航菜单中。

我使用 . 创建了菜单`register_nav_menu`，但无法在此菜单下添加页面。

请帮助我问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:34:03.880

您是否尝试过 wp_update_nav_menu_item() 功能？

```
wp_update_nav_menu_item(
    $id_of_menu, 
    0, /* Use 0 to create a new menu item */
    array(
        'menu-item-title'   => 'Title',
        'menu-item-classes' => 'title',
        'menu_item_url'     => 'url',
        'menu_item_status'  => 'published')
); 
```

那应该为您解决问题！查看[http://www.acousticwebdesign.net/wordpress/how-to-create-wordpress-3-navigation-menus-in-your-theme-or-plugin-code/](http://www.acousticwebdesign.net/wordpress/how-to-create-wordpress-3-navigation-menus-in-your-theme-or-plugin-code/)了解更多深入信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:46:39.810

只需在您的functions.php 中写入 // 在仪表板之后将订单添加为主菜单。

[http://codex.wordpress.org/Function_Reference/add_dashboard_page](http://codex.wordpress.org/Function_Reference/add_dashboard_page)

```
function dasboard_sub_menu() {  
    global $menu; 
    global $submenu; 
    $menu[6] = array( __('Orders'), 'read', 'edit.php?post_type=shop_order', '', 'menu-top menu-top-first menu-icon-orders', 'menu-dashboard', 'none' );
    $menu[7] = array( __('Catalogue'), 'read', 'edit.php?post_type=product', '', 'menu-top menu-top-first menu-icon-catalogue', 'menu-dashboard', 'none' );
    $menu[8] = array( __('Coupons'), 'read', 'edit.php?post_type=shop_coupon', '', 'menu-top menu-top-first menu-icon-coupon', 'menu-dashboard', 'none' );
   //$menu[4] = array( '', 'read', 'separator1', '', 'wp-menu-separator' );
    $menu[59] = array( '', 'read', 'separator2', '', 'wp-menu-separator1' );
    $menu[99] = array( '', 'read', 'separator3', '', 'wp-menu-separator2' );
    $menu[56] = array( '', 'read', 'separator4', '', 'wp-menu-separator3' );
    $menu[57] = array( '', 'read', 'separator5', '', 'wp-menu-separator4' );
    $submenu[ 'index.php' ][1] = array( __('Reports'), 'read', 'admin.php?page=woocommerce_reports' );
}  
add_action( 'admin_menu', 'dasboard_sub_menu' );  
// To add Submenu Orders under Dashboard Sub Menu
// To add Orders as main menu after dasboard 
```

# php - PHP SimpleTest / xdebug 代码覆盖率测试 - 忽略一些行

> ID：10913102
> 
> 赞同：0
> 
> 时间：2012-06-06T11:15:56.463
> 
> 标签：php, code-coverage, xdebug, simpletest

我对 SimpleTest / xdebug 测试类有问题 - 具体来说，我已经注册了一个关闭函数来关闭我的测试覆盖并保存结果。

但是，这仍然（正确地）显示为从未达到：

```
if (error_condition) {
    die();
} // This line is never actually reached, and shows up in the report as unreached, confusing the automatic analyzers. 
```

除了避免使用“死”退出，而是使用异常，有没有办法将排队标记为“不测试”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:35:13.100

我不认为 SimpleTest 有这个，但是，它甚至不应该将其视为“未涵盖”。它只是无法访问，这不是问题。

# jquery - Ajax 调用将我带到另一个视图，而不是将数据附加到现有视图

> ID：10913103
> 
> 赞同：0
> 
> 时间：2012-06-06T11:15:56.507
> 
> 标签：jquery, ajax, asp.net-mvc-3, append

我正在尝试使用与[此类](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)似的部分视图更新我的部分页面。我可以通过单击“删除”来删除部分视图 - 所以我的 jquery 在那里工作，但是我无法添加部分视图的另一行。当我单击链接以“添加另一行”时，我会进入一个仅显示返回的 html 的页面，而不是将该数据附加到我当前的视图中。

这是我的主要观点：

```
@model MyApp.ViewModels.ApplicationViewModel
@{
    ViewBag.Title = "ApplyToSomething";
}
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"> </script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"> </script>
<script src="@Url.Content("~/Scripts/MyJqueryAjaxFile.js")" type="text/javascript"> </script>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Apply To Something</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.LastName)
            @Html.DisplayFor(model => model.LastName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.EducationalBackground)
        </div>

        //
        // THIS IS THE SECTION I AM HAVING PROBLEMS WITH
        <div id = "editorRows">
            @Html.Partial("_EducationalBackground")
            <!-- PUT ADDITIONAL PARTIAL VIEWS HERE -->
        </div>

        @Html.ActionLink("Add another row", "EducationalBackground", null, new {id = "addItem"})

        <div class="editor-label">
            @Html.LabelFor(model => model.WillingToTravel)
        </div>
        <div clsas="editor-field">
            @Html.EditorFor(model => model.WillingToTravel)
            @Html.ValidationMessageFor(model => model.WillingToTravel)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

这是我的部分观点：

```
@model MyApp.ViewModels.ApplicationViewModel
@using (Html.BeginForm())
{
@Html.ValidationSummary(true)
    <div class="editorRow">
        @Html.EditorFor(model => model.UniversityOrCollege)
        @Html.ValidationMessageFor(model => model.UniversityOrCollege)
    <p>
        <a href="#" class="deleteRow">delete</a>
    </p>
    </div>
} 
```

这是我的 .js 文件：

```
$("#addItem").click(function () {
    $.ajax({
        url: this.href,
        cache: false,
        success: function (html) { $("#editorRows").append(html); }
    });
    return false;
});

$("a.deleteRow").live("click", function () {
    $(this).parents("div.editorRow:first").remove();
    return false;
}); 
```

这是我的控制器操作：

```
public ActionResult Apply()
{
    // I generate data for model. . .
    return View(model);
}

public PartialViewResult EducationalBackground()
{
    return PartialView("_EducationalBackground", new ApplicationViewModel());
} 
```

这是视图 Html 的 ViewSource 的精确复制/粘贴（请注意，它列出了实际值而不是“MyApp”之类的内容）：

```
 <div class="editor-label">
            <label for="EducationalBackground">EducationalBackground</label>
        </div>
        <div id = "editorRows">
            <h2>_EducationalBackground</h2>
<form action="/InstructorApplication/ApplyToBecomeInstructor" method="post">    <div class="editorRow">
        <input class="text-box single-line" id="UniversityOrCollege" name="UniversityOrCollege" type="text" value="" />
        <span class="field-validation-valid" data-valmsg-for="UniversityOrCollege" data-valmsg-replace="true"></span>
    <p>
        <!--<a href="/InstructorApplication/%23?class=deleteRow">deleteRow</a>-->
        <a href="#" class="deleteRow">delete</a>
    </p>
    </div>
</form>
            <!-- PUT PARTIAL VIEWS HERE -->
        </div>

        <a href="/InstructorApplication/EducationalBackground" id="addItem">Add another row</a> 
```

为什么我的“添加另一行”链接将我带到另一个视图，而不是将数据附加到我当前的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:26:45.140

```
$("#addItem").click(function () {
    $.ajax({
        url: this.href,
        cache: false,
        success: function (data) { $("#editorRows").append(data);  return false;}
    });
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:45:06.247

尝试将事件传递给回调函数并尝试执行`event.preventDefault()` [http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

```
$("#addItem").click(function (event) {
    event.preventDefault();
    $.ajax({
        url: this.href,
        cache: false,
        success: function (data) { $("#editorRows").append(data);}
    });
}); 
```

这将阻止默认事件。

# javascript - 正确解析 ajax 响应

> ID：10913104
> 
> 赞同：0
> 
> 时间：2012-06-06T11:15:57.510
> 
> 标签：javascript, jquery, ajax

我使用 Ajax 从服务器获取数据。

返回的数据（来自萤火虫）：

```
{"users":[{"name":"some name", "age":17},{"name":"some name2", "age":25}]} 
```

当我尝试

```
$.post('server.php', function(data){
    var users = eval(data).users;
    alert(users[0].name);
}); 
```

我上了萤火虫：

```
Uncaught SyntaxError: Unexpected token ) 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T11:22:29.393

**请不要使用 eval - 这是[邪恶的](http://javascriptweblog.wordpress.com/2010/04/19/how-evil-is-eval/)**

相反，只需使用“json”参数。

```
$.post('server.php', function(data) {
    alert(data.users[0].name);
}, "json"); 
```

如果您的标头是正确的，您甚至不需要 json 参数，但它会强制 jQuery 接收并将其解析为 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:22:33.393

用单引号对括号中的数据进行编码

```
 $.post('server.php', function(data){
        var users = eval('('+data+')');
        alert(users[0].name);
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:17:53.267

您必须用括号括起来 json 字符串

```
$.post('server.php', function(data){
    var users = eval('('+data+')').users;
    alert(users[0].name);
}); 
```

[演示](http://jsfiddle.net/ZPYgF/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T11:19:23.123

我不明白这一点，`eval()`但也许我不太了解这个功能......

有了这个作品：

```
var data = {"users":[{"name":"some name", "age":17},{"name":"some name2", "age":25}]};
alert(data.users[0].name); 
```

您还可以循环使用：

```
$.each(data.users, function (i, user_obj){
    alert(user_obj.name);
}); 
```

看看[这个演示](http://jsfiddle.net/dx2hA/)。

最好将它添加`dataType: "json"`到您的 ajax 请求中，以便正确解析。

# c - 为什么 C 中的 double 是 8 个字节对齐的？

> ID：10913120
> 
> 赞同：18
> 
> 时间：2012-06-06T11:16:45.420
> 
> 标签：c, 32bit-64bit, memory-alignment

我正在阅读一篇关于内存中数据类型对齐的文章（[此处）](http://www.geeksforgeeks.org/archives/9705)，但我无法理解一点，即

> 请注意，双变量将在 32 位机器上的 8 字节边界上分配，并且需要两个内存读取周期。在 64 位机器上，根据存储体的数量，双变量将分配在 8 字节边界上，并且只需要一个内存读取周期。

我的疑问是：为什么需要在 8 字节边界而不是 4 字节上分配双变量？如果它是在 4 字节边界上分配的，我们仍然只需要 2 个内存读取周期（在 32 位机器上）。如果我错了，请纠正我。

另外，如果有人对成员/内存对齐有很好的教程，请分享。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-06T13:35:14.080

将大小为 2^N 的数据值对齐在 2^N 的边界上的原因是为了避免该值跨缓存线边界分割的可能性。

x86-32 处理器可以在最多两次 32 位内存读取中从任何字边界（8 字节对齐或不对齐）获取双精度。但是，如果该值跨越缓存行边界分割，则获取第二个字的时间可能会很长，因为需要从内存中获取第二个缓存行。这会不必要地产生较差的处理器性能。（实际上，当前的处理器不会一次从内存中获取 32 位；它们倾向于在更宽的总线上获取更大的值以实现真正的高数据带宽；如果它们同时获取两个字的实际时间在同一缓存行中，并且已经缓存，可能只有 1 个时钟）。

这种对齐方案的一个自由结果是这些值也不会跨越页面边界。这避免了在数据获取过程中出现页面错误的可能性。

因此，出于性能原因，您应该在 8 字节边界上对齐双精度。编译器知道这一点，只是为你做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T13:51:40.920

将值对齐在比其大小更低的边界上使其容易被拆分到两个高速缓存行。将值拆分为两个缓存线意味着在将缓存线逐出到后备存储时需要额外的工作（将逐出两个缓存线；而不是一个），这是对内存总线的无用负载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-28T22:42:25.873

32 位架构上双精度的 8 字节对齐不会减少内存读取，但在减少缓存访问方面仍能提高系统性能。请阅读以下内容： [https ://stackoverflow.com/a/21220331/5038027](https://stackoverflow.com/a/21220331/5038027)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-06T11:47:05.910

请参阅这篇关于[双精度浮点格式的 wiki 文章](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)

内存周期数取决于您的硬件架构，它决定了您拥有多少 RAM 组。如果您有 32 位架构和 4 个 RAM bank，则只需 2 个内存周期即可读取。（每个 RAM bank 贡献 1 个字节）

# prototypejs - 从外部 .js 文件调用函数

> ID：10913122
> 
> 赞同：0
> 
> 时间：2012-06-06T11:16:45.730
> 
> 标签：prototypejs

我有一个 draw.js 文件，其功能为

```
var drawArrow=function(x1,y1,x2,y2)
{ 
// some code 
} 
```

在我的 html 页面中，我写了

```
<script type="text/javascript" src="draw.js"></script>
<script type="text/javascript">
  function callme() {
  // insert code here
  }
</script> 
```

请告诉我我需要在**callme()**中编写什么代码来调用**draw.js的****drawArrow**函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:20:26.220

当您调用 js 文件时，没有什么是外部的，所有方法都可以轻松访问，因为它是在同一页面上创建的，现在只需执行此操作

```
<script type="text/javascript">
  function callme() {
drawArrow=function(x1,y1,x2,y2);
  // insert code here
  }
</script> 
```

# objective-c - 在子类中向下转换 Objective-C 实例变量

> ID：10913123
> 
> 赞同：1
> 
> 时间：2012-06-06T11:17:00.740
> 
> 标签：objective-c, class, properties, protocols, subclass

我有一个类型`A`为实例变量的类`X`。

```
@interface A : NSObject {
    X *x;
}
@end 
```

一些`X`实例还符合协议`P`。我想`A`为这些`X`实例实现一个专门的版本。

```
@interface B : A {
    X <P> *x;
}
@end 
```

这编译得很好。但是，当我`x`从`B`实例访问时，更改不会传播到`A`. 因此，`A`未重新定义的函数使用`X`的函数以外的其他实例`B`。

*   **仅添加协议时，是否可以以某种方式重新定义实例变量？** 关于子类有一个类似的[问题](https://stackoverflow.com/questions/4248066/objective-c-narrow-instance-variable-types-in-subclasses)。但是，子类和协议是不一样的。虽然我的方法编译得很好，但它并没有按预期工作。

*   如果不可能：是否有执行此操作的通用模式？

    1.  如果我不使用新类型覆盖实例变量，那么代码中就会充满丑陋的东西：

        ```
        [((X <P> *)x) methodOfP] 
        ```

    2.  如果我覆盖实例变量，我必须自己将更改传播到超类`A`。这需要额外的功能。

    3.  使用属性而不是实例变量：这会成功吗？可以在子类中重新定义属性吗？

        ```
        @interface A : NSObject {
            X *x;
        }
        @property (strong, nonatomic) X *x;
        @end
        @implementation A
        - (X *)x
        {
            return x;
        }
        - (void)setX:(X *)anX
        {
            x = anX;
        }
        @end

        @interface B : A
        @property (strong, nonatomic) X <P> *x;
        @end
        @implementation B
        @end 
        ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:51:24.703

您尝试做的事情违反了面向对象编程的基本原则[Liskov Substitution Principle](https://en.wikipedia.org/wiki/Liskov_substitution_principle)。B 的实例可以传递给任何期望 A 的代码，并且该代码有权将其视为 A。这意味着它可以`-setX:`在对象上调用，传入 X 的实例*而不要求该对象符合协议磷*。

换句话说，您正在尝试创建不是 A 的 A 的子类。

您想要这样做的事实表明设计混乱。你应该退后一步重新思考。首先，仅根据接口设计所有类，并确保它们的接口在继承方面有意义。然后才考虑实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:53:22.553

最简单的解决方案是隐藏实例变量。您可以通过将 ivars 从接口移动到实现文件中的类延续来做到这一点：

```
@interface A ()
{
    X *x;
}
@end 
```

或执行负责人：

```
@implementation A 
{
    X *x;
}
//methods go here
@end 
```

您不应该直接访问超类 ivar。而是使用`super.propertyName`. 然后，您可以向子类添加一个方法，该方法`x`仅在实现协议时才返回：

```
-(X*<protocol>)xThatImplementProtocol
{
     X *x = super.x;

    return ([x conformsToProtocol:protocol]) ? x : nil;
} 
```

但是，这种方法会破坏多态性。

老实说，我认为您会使用不同的方法（可能是组合）来解决这个问题。子类化似乎不是很自然的选择。

# sql - 总是运行带有 failOnError="false" 的 Liquibase changeSet？

> ID：10913133
> 
> 赞同：12
> 
> 时间：2012-06-06T11:17:53.140
> 
> 标签：sql, database-schema, database-migration, liquibase

我正在尝试`changeSet`在应该创建索引的 liquibase 中执行以下操作。如果索引不存在，它应该默默地失败：

```
<changeSet failOnError="false" author="sys" id="1">
    <createIndex unique="true"  indexName="key1" tableName="Table1">
        <column name="name" />
    </createIndex>
</changeSet> 
```

到现在为止还挺好。问题是，这`changeSet`不会登录到 DATABASECHANGELOG 表中，因此每次 liquibase 运行时都会执行。根据 liquibase 文档，例如来自 Nathen Voxland 的[这个答案](https://stackoverflow.com/questions/1625567/prevent-error-when-dropping-not-existing-sequences-creating-existing-users#answer-1627524)，我认为变更集应该在 DATABASECHANGELOG 表中标记为运行。相反，它根本没有记录，正如我之前所说的，每次 liquibase 运行时都会执行（并且每次都失败）。

我错过了什么吗？

（我使用 MySQL 作为 DBMS）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T22:41:16.503

在Nathen Voxland 给出的[答案中，他推荐了更正确的方法，即在运行变更集之前使用](https://stackoverflow.com/questions/1625567/prevent-error-when-dropping-not-existing-sequences-creating-existing-users#answer-1627524)[先决条件](http://www.liquibase.org/documentation/preconditions.html)检查数据库的状态。

在我看来，忽略失败是个坏主意……意味着您不能完全控制数据库配置……“failOnError”参数允许 liquibase 继续。如果实际上它没有因为发生错误而记录更改集，那么构建记录不是一个坏主意吗？

# java - Java 等效于 Ruby 的 String.unpack for "q*"

> ID：10913137
> 
> 赞同：0
> 
> 时间：2012-06-06T11:17:57.633
> 
> 标签：java, ruby

在 Java 中，我试图解码由以下 ruby​​ 代码编写的整数：

```
def int_to_hex_string(i)
  [i].pack('q').reverse
end 
```

对于数字 42，生成的字符串将为`"\x00\x00\x00\x00\x00\x00\x00*"`.

以下 Ruby 代码将反转该过程：

```
def hex_string_to_int(s)
  s.reverse.unpack('q*').first
end 
```

如何在 Java 中模拟最后一种方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:03:13.123

更新：最简单的方法是使用 java.math.BigInteger：

```
return new BigInteger(bytes).intValue(); 
```

或者，如果一个人真的想自己实现它：

```
public static int unpackInteger(byte[] bytes) {
    int sum = 0;
    int mul = 1;

    for (int i=bytes.length-1; i >= 0; i--) {
        sum += (mul * (bytes[i] & 0xff));
        mul <<= 8;
    }
    return sum;
} 
```

# javascript - 如何在 sublime text 2 中创建自定义布局？

> ID：10913138
> 
> 赞同：7
> 
> 时间：2012-06-06T11:18:04.333
> 
> 标签：javascript, sublimetext2

我想创建一个 2 列布局，其中第 2 列被分成 2 行，但没有真正乐于尝试找出如何做到这一点。我知道这个布局被添加到 Main.sublime-menu 所以我复制了其中一个布局并将其命名为 Custom 1，但不确定我必须添加什么作为键/值对或数组。谁能帮我解决这个问题？

这是我到目前为止的工作：

```
{
                        "caption": "Custom 1",
                        "command": "set_layout",
                        "args":
                        {
                            "cols": [0.0, 0.5, 1.0],
                            "rows": [0.0, 0.5, 1.0],
                            "cells": [[0, 0, 1, 1], [0, 1, 1, 2], [0, 2, 1, 3]]
                        }
                    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-09T08:02:47.840

试试这个：

```
{
    "caption" : "Custom 1",
    "command": "set_layout",
    "args":
    {
        "cols": [0.0, 0.5, 1.0],
        "rows": [0.0, 0.5, 1.0],
        "cells":
        [
            [0, 0, 1, 2], [1, 0, 2, 1],
                          [1, 1, 2, 2]
        ]
    }
} 
```

参考：

*   [https://gist.github.com/1320281](https://gist.github.com/1320281)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-23T03:47:11.860

这种结构可以帮助您在 Sublime Text 中进行任何设计。

```
 0.0                             0.5                           1.0
          +-------------------------------+-----------------------------+

         0,0                             1,0                           2,0
   0.0    +-------------------------------+-----------------------------+
     |    |                               |                             |
     |    |                               |                             |
     |    |                               |                             |
     |    |                               |                             |
     |    |                               |                             |
     |   0,1                              1,1                           2,1
  0.33    |                               +-----------------------------+
     |    |                               |                             |
     |    |                               |                             |
     |    |                               |                             |
     |    |                               |                             |
     |    |                               |                             |
     |   0,2                              1,2                           2,2
  0.66    |                               +-----------------------------+
     |    |                               |                             |
     |    |                               |                             |
     |    |                               |                             |
     |    |                               |                             |
     |    |                               |                             |
     |   0,3                             1,3                           2,3
   1.0    +-------------------------------+-----------------------------+ 
```

[http://asciiflow.com/#0B0pB9AbvJ9zLcHFZYnp2YTZjNU0](http://asciiflow.com/#0B0pB9AbvJ9zLcHFZYnp2YTZjNU0)

* * *

**Sublime View：**（2列，1列分成3行）

![在此处输入图像描述](../Images/4fd9b23c149650ebc309e97cefbc3a57.png)

您的键盘映射设置（*首选项 -> 键绑定用户 -> 添加内括号*）

```
{ "keys": ["alt+shift+7"],
    "caption": "2 cols (full - 3)",
    "command": "set_layout",
    "args":
        { "cols": [0.0, 0.5, 1.0],
          "rows": [0.0, 0.33, 0.66, 1.0],
          "cells": [ [0, 0, 1, 3], [1, 0, 2, 1], [1, 1, 2, 2], [1, 2, 2, 3] ]
        }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T17:25:12.663

如果您想要一个两行布局，其中第一行包含一个面板（一列），而第二行包含两列，请使用以下代码：

```
{
    "caption": "1\. Full - 2\. 2 columns",
    "command": "set_layout",
    "args":
    {
        "cols": [0.0, 0.5, 1.0],
        "rows": [0.0, 0.5, 1.0],
        "cells":
        [
            [0, 0, 2, 1], 
            [0, 1, 1, 2], [1, 1, 2, 2]
        ]
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-15T07:27:12.810

试试很棒的[sublime-SplitScreen](https://github.com/spadgos/sublime-SplitScreen)插件。

*   通过包控制安装：`Cmd+Shift+P`，然后安装包并搜索“SplitScreen”。
    *   `Cmd`在 Mac 中，`Ctrl`否则。
*   安装后，`Alt+Shift+S`激活插件，输入口粮之类`7:3,2:1`的实现这样的布局：

```
--------------------
| | |
| | |
| | |
| | |
--------------------
| | |
| | |
--------------------

```

*   项目自述文件中的更多示例。

# javascript - 对象和资源管理器 9 以及 Javascript 中的所有其他浏览器和版本的不同行为

> ID：10913147
> 
> 赞同：0
> 
> 时间：2012-06-06T11:18:33.920
> 
> 标签：javascript, dom, cross-browser

我正在尝试使用我保存到 JS var 中的 DOM 元素：

```
lastCheckBoxChecked = this; 
```

“this”表示输入/复选框 DOM 元素。

现在，尝试获取是否从元素中选中了复选框：

```
if(lastCheckBoxChecked.getAttribute('checked') == true) 
```

不起作用。
当我检查什么是`lastCheckBoxChecked`成立时，我发现在**IE9**中它成立`Object`并且在写作时

```
alert(lastCheckBoxChecked.getAttribute('checked')) 
```

我得到了正确的值，但在**firefox**和**chrome**中它持有
`object HTMLInputElement`并且没有功能（未定义）。

我不知道这是否是我没有得到任何东西的原因，但这是我的方向。

有人对这个有了解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T11:20:36.383

请使用这个：

```
if(lastCheckBoxChecked.checked)
    ... 
```

不是：

```
if(lastCheckBoxChecked.getAttribute('checked') == true) 
```

`getAttribute`检查复选框的初始状态，或者是否`getAttribute`仅更改。用户操作对其没有影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T11:21:01.737

*属性*表示它最初具有的值，并且不会因用户交互而改变。要获取当前值，请使用其*属性*：

```
lastCheckBoxChecked.checked 
```

# javascript - Firefox history.pushState 错误

> ID：10913149
> 
> 赞同：2
> 
> 时间：2012-06-06T11:18:34.637
> 
> 标签：javascript, jquery, firefox

```
history.pushState(null, null, '?state=1'); 
```

在 Firefox 控制台中尝试上述操作时，它返回以下错误：

```
[19:15:18.029] history.pushState(null, null, '?state=1');
[19:15:18.032] [Exception... "Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIDOMHistory.pushState]"  nsresult: "0x80004005 (NS_ERROR_FAILURE)"  location: "JS frame :: Web Console :: <TOP_LEVEL> :: line 1"  data: no] 
```

我不知道为什么......另外，我使用 History.js 的网页也返回相同的错误。在 Chrome 中一切正常。

火狐12.0

任何帮助将不胜感激...

# android - ActionBarSherlock 菜单正常弹出

> ID：10913151
> 
> 赞同：0
> 
> 时间：2012-06-06T11:18:41.967
> 
> 标签：android, actionbarsherlock

我有一个 SherlockListActivity，并试图在操作栏中有一个按钮。这是我的 menu.xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android=">http://schemas.android.com/apk/res/android">
<item
    android:id="@+id/add"
    android:title="Add" 
    android:showAsAction="ifRoom" />
</menu> 
```

这是我显示菜单的java代码：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
   MenuInflater inflater = this.getSupportMenuInflater();
   inflater.inflate(R.layout.menu, menu);
   return false;
} 
```

但是在我的活动中，操作栏显示，但没有按钮，我设备上的菜单按钮什么也不做。我的设备正在运行 2.3.3。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T11:25:47.253

尝试`true`从 onCreateOptionsMenu() 返回。

# c++ - qDebug 没有打印包含二进制数据的完整 QByteArray

> ID：10913155
> 
> 赞同：12
> 
> 时间：2012-06-06T11:18:55.383
> 
> 标签：c++, qt, qbytearray, qdebug

我有一个`QByteArray`存储从 GPS 接收到的数据，它是部分二进制和部分 ASCII。我想知道调试建议知道收到了什么，所以我写了`qDebug`这样的：

```
//QByteArray buffer;
//...
qDebug() << "GNSS msg (" << buffer.size() << "): " << buffer; 
```

我在控制台收到这样的消息：

```
GNSS msg ( 1774 ): "ygnnsdgk...(many data)..PR085hlHJGOLH
(more data into a new line, which is OK because it is a new GNSS sentence and
probably has a \n at the end of each one) blablabla... 
```

但突然间我得到了一个新的打印迭代。数据还没有被删除，它已经被附加了。所以新的消息大小例如 3204，明显比以前的打印大。但它的打印结果完全相同（但括号中的新尺寸为 3204）。没有新数据被打印出来，就像之前的消息一样：

```
GNSS msg ( 3204 ): "ygnnsdgk...(many data)..PR085hlHJGOLH
(more data into a new line, which is OK because it is a new GNSS sentence and
probably has a \n at the end of each one) blablabla... 
```

我想`qDebug`停止打印是因为它有一个限制，或者因为它到达了一个终止字符或类似的东西，但我只是在猜测。

对这种行为有任何帮助或解释吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-06T13:02:00.050

**解决方案/解决方法：**

实际上， 的`qDebug()`输出在一个字符`QByteArray`处被截断。`'\0'`这与 QByteArray 无关；你甚至不能使用 qDebug() 输出一个 '\0' 字符。有关说明，请参见下文。

```
QByteArray buffer;
buffer.append("hello");
buffer.append('\0');
buffer.append("world");

qDebug() << "GNSS msg (" << buffer.size() << "): " << buffer; 
```

输出：

```
GNSS msg ( 11 ):  "hello 
```

甚至以下任何参数都被忽略：

```
qDebug() << "hello" << '\0' << "world"; 
```

输出：

```
hello 
```

您可以通过在调试它们之前替换字节数组中的特殊字符来解决这个“问题”：

```
QByteArray dbg = buffer;   // create a copy to not alter the buffer itself
dbg.replace('\\', "\\\\"); // escape the backslash itself
dbg.replace('\0', "\\0");  // get rid of 0 characters
dbg.replace('"', "\\\"");  // more special characters as you like

qDebug() << "GNSS msg (" << buffer.size() << "): " << dbg; // not dbg.size()! 
```

输出：

```
GNSS msg ( 11 ):  "hello\0world" 
```

* * *

**那么为什么会这样呢？为什么我不能`'\0'`使用 qDebug() 输出？**

让我们深入研究 Qt 内部代码以了解其`qDebug()`作用。以下代码片段来自 Qt 4.8.0 源代码。

当您这样做时会调用此方法`qDebug() << buffer`：

```
inline QDebug &operator<<(const QByteArray & t) {
    stream->ts  << '\"' << t << '\"'; return maybeSpace();
} 
```

以上`stream->ts`是 type `QTextStream`，它将转换`QByteArray`为 a `QString`：

```
QTextStream &QTextStream::operator<<(const QByteArray &array)
{
    Q_D(QTextStream);
    CHECK_VALID_STREAM(*this);
    // Here, Qt constructs a QString from the binary data. Until now,
    // the '\0' and following data is still captured.
    d->putString(QString::fromAscii(array.constData(), array.length()));
    return *this;
} 
```

如您所见，`d->putString(QString)`被调用（类型`d`是文本流的内部私有类），它`write(QString)`在对等宽字段进行一些填充后调用。我跳过了的代码，`putString(QString)`直接跳转到`d->write(QString)`，定义是这样的：

```
inline void QTextStreamPrivate::write(const QString &data)
{
    if (string) {
        string->append(data);
    } else {
        writeBuffer += data;
        if (writeBuffer.size() > QTEXTSTREAM_BUFFERSIZE)
            flushWriteBuffer();
    }
} 
```

如您所见，`QTextStreamPrivate`有一个缓冲区。此缓冲区的类型为`QString`. 那么当缓冲区最终打印在终端上时会发生什么？为此，我们必须找出当您的`qDebug()`语句完成并将缓冲区传递给消息处理程序时会发生什么，默认情况下，消息处理程序会在终端上打印缓冲区。这发生在`QDebug`类的析构函数中，其定义如下：

```
inline ~QDebug() {
   if (!--stream->ref) {
      if(stream->message_output) {
         QT_TRY {
            qt_message_output(stream->type, stream->buffer.toLocal8Bit().data());
         } QT_CATCH(std::bad_alloc&) { /* We're out of memory - give up. */ }
      }
      delete stream;
   }
} 
```

所以这里是非二进制安全的部分。Qt 获取文本缓冲区，将其转换为“本地 8 位”二进制表示（到目前为止，AFAIK 我们应该仍然拥有我们想要调试的二进制数据）。

但随后将其传递给消息处理程序*，而无需额外指定二进制数据的长度*。正如您应该知道的，不可能找出也应该能够容纳`'\0'`字符的 C 字符串的长度。（这就是为什么`QString::fromAscii()`在上面的代码中需要额外的长度参数来保证二进制安全。）

因此，如果您想处理`'\0'`字符，即使编写自己的消息处理程序也无法解决问题，因为您无法知道长度。悲伤，但真实。

# ios - Flex 4.6 TextInput 提示 ios 行为不端

> ID：10913156
> 
> 赞同：5
> 
> 时间：2012-06-06T11:18:56.633
> 
> 标签：ios, apache-flex, prompt, textinput, autocorrect

在 ios 上，TextInput 很奇怪。以下代码：

```
 <s:TextInput id="password" width="100%" displayAsPassword="true"
                     needsSoftKeyboard="true" 
                     prompt="Password"  
                     softKeyboardType="default"
                     returnKeyLabel="done"
                     autoCorrect="false"
                     skinClass="spark.skins.mobile.TextInputSkin"
                     /> 
```

当我选择 textInput 时，提示按预期消失，但第一个字符是自动选择的。当第二个键被按下时，第一个字符被删除。这只发生在输入第一个字符并且该字段有提示消息时。“自动更正”似乎没有做任何事情。

有谁知道这个问题的解决方法？我查看了 SkinnableTextBase 类，但找不到任何有罪的代码。

这个问题从 Flex 4.6 开始。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T09:50:44.263

花了几个小时研究 Flex 代码后，我终于意识到 Flex 不是问题所在。这个问题发生在**Air 3.2**（也在**Air 3.3** beta 中）。**如果我用Air 3.1**编译，一切正常。

我尝试了各种方法，但似乎无法在**Air 3.2** + 中修复它。我检查了我的其他项目，似乎我用**Air 3.2**编译的所有应用程序都有类似的问题:(

**[更新]**

问题出在**SkinnableTextBase.as**在**Flex SDK**中的某个地方。

当调用**textDisplay_changeHandler(event:Event)**时，**invalidateSkinState()**会导致问题。如果您将皮肤的状态设置为空（“”），它会起作用：

```
skin.currentState = "";
invalidateSkinState(); 
```

问题是主题没有正确更新（它是 ah@ck）。

如果您在 CSS 中将**“showPromptWhenFocused”**设置为**false**，则问题不会发生；唯一的副作用是当您选择**textInput**时提示消失。

```
s|TextInput
{
    skinClass:ClassReference("spark.skins.mobile.TextInputSkin");
    showPromptWhenFocused: false;
} 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T06:36:34.747

使用 FB4.6 和 Air3.5 解决了带有火花皮肤的 Textinput 的飞行问题。我认为实际的问题来自Air。但是现在软键盘在聚焦时没有激活。

```
<s:TextInput id="mail"  softKeyboardType="email" skinClass="spark.skins.spark.TextInputSkin" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T04:14:20.053

你在滚动 TextInput 吗？如果没有，您可以使用新的 Flex 4.6 TextInput 移动皮肤。新皮肤使用 StageText 可以解决您的问题。删除属性 skinClass="spark.skins.mobile.TextInputSkin" 并且它应该默认为新皮肤。

```
<s:TextInput id="password" width="100%" displayAsPassword="true"
                 needsSoftKeyboard="true" 
                 prompt="Password"  
                 softKeyboardType="default"
                 returnKeyLabel="done"
                 autoCorrect="false"
                 /> 
```

注意：如果滚动 TextInput，StageText 将无法正确呈现，并且您必须像当前一样使用 Flex 4.5 移动皮肤。

# azure - Azure：无法将字节发送到 XContainer wad-tracefiles

> ID：10913158
> 
> 赞同：1
> 
> 时间：2012-06-06T11:19:12.423
> 
> 标签：azure, azure-diagnostics

由于某种原因，我在 Azure 中使用诊断时遇到错误。我的（WCF）WebRole 的代码是：

```
public override bool OnStart()
    {
        // To enable the AzureLocalStorageTraceListner, uncomment relevent section in the web.config  
        DiagnosticMonitorConfiguration diagnosticConfig = DiagnosticMonitor.GetDefaultInitialConfiguration();
        diagnosticConfig.Directories.ScheduledTransferPeriod = TimeSpan.FromMinutes(1);
        diagnosticConfig.Directories.DataSources.Add(AzureLocalStorageTraceListener.GetLogDirectory());
        diagnosticConfig.Directories.BufferQuotaInMB = 256;

        // Start diagnostics
        DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString", diagnosticConfig);

        // Write trace line
        Trace.WriteLine("CUSTUM TRACE MESSAGE");

        // Start instance
        return base.OnStart();
    } 
```

我的 Web.config 文件如下所示：

```
<?xml version="1.0"?>
<configuration>
  <configSections>
  </configSections>
  <system.diagnostics>     
    <sharedListeners>
      <add name="AzureLocalStorage" type="WCFServiceWebRole1.AzureLocalStorageTraceListener, WCFServiceWebRole1"/>
    </sharedListeners>
    <sources>
      <source name="System.ServiceModel" switchValue="Verbose, ActivityTracing">
        <listeners>
          <add name="AzureLocalStorage"/>
        </listeners>
      </source>
      <source name="System.ServiceModel.MessageLogging" switchValue="Verbose">
        <listeners>
          <add name="AzureLocalStorage"/>
        </listeners>
      </source>
    </sources>
    <trace autoflush="true">
      <listeners>
        <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
          name="AzureDiagnostics">
          <filter type="" />
        </add>
      </listeners>
    </trace>
  </system.diagnostics> 
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

在计算模拟器中，我看到以下错误：

```
[MonAgentHost] Output: Monitoring Agent Started
[Diagnostics]: Starting configuration channel polling
[MonAgentHost] Error: MA EVENT: 2012-06-06T10:01:20.111Z
[MonAgentHost] Error:     2
[MonAgentHost] Error:     6396
[MonAgentHost] Error:     6624
[MonAgentHost] Error:     NetTransport
[MonAgentHost] Error:     0
[MonAgentHost] Error:     x:\btsdx\215\services\monitoring\shared\nettransport\src\xblobconnection.cpp
[MonAgentHost] Error:     XBlobConnection::PutBytesXBlob
[MonAgentHost] Error:     1621
[MonAgentHost] Error:     ffffffff80050023
[MonAgentHost] Error:     0
[MonAgentHost] Error:     
[MonAgentHost] Error:     Failed to send bytes to XContainer wad-tracefiles 
```

此错误重复多次。“wad-tracefiles”容器由 AzureLocalStorageTraceListener 类中的以下代码添加：

```
public static DirectoryConfiguration GetLogDirectory()
    {
        DirectoryConfiguration directory = new DirectoryConfiguration();
        directory.Container = "wad-tracefiles";
        directory.DirectoryQuotaInMB = 10;
        directory.Path = RoleEnvironment.GetLocalResource("WCFServiceWebRole1.svclog").RootPath;
        return directory;
    } 
```

为什么在这种情况下写入跟踪消息会失败？当我使用 Azure 存储资源管理器查看存储时，我看到的唯一表是 WADDirectoriesTable 而不是 WADLogsTable。确实创建了“wad-tracefiles”blob，但这不是我应该从我的代码中找到跟踪消息的地方。

任何人，任何想法？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:59:32.563

您的第一个问题是您没有使用 SetCurrentConfiguration() 和 GetDefaultInitialConfiguration() 来最终节省传输时间和日志级别。您必须使用这些 API 的集合，如下所示：

```
GetDefaultInitialConfiguration() 
SetCurrentConfiguration() 
```

或者

```
GetCurrentConfiguration()
SetCurrentConfiguration() 
```

因此，基于以下行的配置将不会保存在诊断配置中： diagnosticConfig.Directories.DataSources.Add(AzureLocalStorageTraceListener.GetLogDirectory());

使用上述建议，然后看看会发生什么。

我还建议只创建一个非常简单的 Web 或辅助角色 hello world 示例，并通过启用 Azure 诊断来添加一般 TRACE 消息，以查看这是否会给您带来任何错误。这将证明您的 SDK 安装或 Azure 存储模拟器是否有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:45:09.600

Thank you for your reply! The project I am using is a really simple WebRole with only one trace message so I can not strip any code out.

I tried your suggestion and you are right, I do not get any error messages anymore with the following code:

```
public override bool OnStart()
    {
        setDiagnostics();

        Trace.WriteLine("CUSTUM TRACE MESSAGE");

        // Start instance
        return base.OnStart();
    }

    private void setDiagnostics()
    {
        // Get diagnostics connectionstring
        string wadConnectionString = "Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString";
        CloudStorageAccount cloudStorageAccount = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue(wadConnectionString));

        // Get the diagnostics configuration of the deployment and its role instances that are currently running
        DeploymentDiagnosticManager deploymentDiagnosticManager = new DeploymentDiagnosticManager(cloudStorageAccount, RoleEnvironment.DeploymentId);
        RoleInstanceDiagnosticManager roleInstanceDiagnosticManager = cloudStorageAccount.CreateRoleInstanceDiagnosticManager(
            RoleEnvironment.DeploymentId,
            RoleEnvironment.CurrentRoleInstance.Role.Name,
            RoleEnvironment.CurrentRoleInstance.Id);

        // Load diagnostics configuration
        DiagnosticMonitorConfiguration diagConfig = roleInstanceDiagnosticManager.GetCurrentConfiguration();

        // Get the default value if there is no config yet
        if (diagConfig == null)
            diagConfig = DiagnosticMonitor.GetDefaultInitialConfiguration();

        // Enable EventLogs
        diagConfig.WindowsEventLog.DataSources.Add("Application!*");
        diagConfig.WindowsEventLog.ScheduledTransferPeriod = TimeSpan.FromMinutes(1D);
        diagConfig.WindowsEventLog.BufferQuotaInMB = 128;

        // Failed Request Logs
        diagConfig.Directories.DataSources.Add(AzureLocalStorageTraceListener.GetLogDirectory());
        diagConfig.Directories.ScheduledTransferPeriod = TimeSpan.FromMinutes(1D);
        diagConfig.Directories.BufferQuotaInMB = 128;

        // Crash Dumps
        CrashDumps.EnableCollection(true);

        // Set new configuration
        roleInstanceDiagnosticManager.SetCurrentConfiguration(diagConfig);

        // Start the DiagnosticMonitor
        DiagnosticMonitor.Start(wadConnectionString, diagConfig);
    } 
```

When I look in which tables are present in the Azure Storage Explorer I only see the "WADDirectoriesTable" and the "WADWindowsEventLogsTable". Trace messages should come in the "WADLogsTable" right? So I see the Trace message in the Compute Emulator but I do not see them in my storage... any ideas why?

# javascript - GoMap - 在隐藏的 div 中显示地图

> ID：10913164
> 
> 赞同：1
> 
> 时间：2012-06-06T11:19:26.913
> 
> 标签：javascript, jquery

我正在使用 goMap jQuery 插件来显示我的地图，并希望隐藏地图并在点击时显示它。但是，地图显示不正确。

在另一个线程中，我发现我需要触发`google.maps.event.trigger(map, 'resize');`以刷新地图，但由于某种原因，这在我的代码中不起作用。

谁能帮我这个？谢谢

```
<a class="showmap" href="#">Show map</a>
<div id="map" style="height: 400px; width: 400px;"> </div>

<script type="text/javascript">
$(function() {
    $("#map").goMap({
        latitude: 56.948813,
        longitude: 24.104004,
        zoom: 6
    });
});

$(document).ready(function() {
    $("#map").hide();
    $('.showmap').click(function() {
        $("#map").slideToggle();
        google.maps.event.trigger($.goMap.mapId, 'resize');
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T12:03:53.070

你需要使用

`google.maps.event.trigger($.goMap.map, 'resize');`

我认为您需要在包含地图的 div 完全显示后触发调整大小。

```
$('#map').slideToggle('slow', function() {
  google.maps.event.trigger($.goMap.map, 'resize');
}); 
```

# java - 有意图地长传，总是出错

> ID：10913165
> 
> 赞同：3
> 
> 时间：2012-06-06T11:19:38.477
> 
> 标签：java, android, android-intent, long-integer

我需要使用以下代码将带有意图的长（_id）从活动 A 传递到活动 B：

```
Intent vip0= new Intent(this, PageSinglePlayerGuess.class);
vip0.putExtra("resid", (long) 1);
startActivity(vip0); 
```

并使用此方法（在 onCreate() 中调用）在 Activity B 中获取它：

```
public long getResId() {
    Intent i= getIntent();
    resid= i.getLongExtra("resid", 1);
    Log.d("D", "Risorsa: " + resid);
    return resid;
} 
```

驻留于ActB 是一个long。我收到此错误：

```
 06-06 11:10:47.138: W/Bundle(538): Key resid expected Long but value was a java.lang.Integer.  The default value 1 was returned.
    06-06 11:10:47.158: W/Bundle(538): Attempt to cast generated internal exception:
    06-06 11:10:47.158: W/Bundle(538): java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Long
    06-06 11:10:47.158: W/Bundle(538):  at android.os.Bundle.getLong(Bundle.java:966)
    06-06 11:10:47.158: W/Bundle(538):  at android.content.Intent.getLongExtra(Intent.java:3874)
    06-06 11:10:47.158: W/Bundle(538):  at com.gmail.corsalini.celebrityquiz.PageSinglePlayerGuess.getResId(PageSinglePlayerGuess.java:60)
    06-06 11:10:47.158: W/Bundle(538):  at com.gmail.corsalini.celebrityquiz.PageSinglePlayerGuess.onCreate(PageSinglePlayerGuess.java:46)
    06-06 11:10:47.158: W/Bundle(538):  at android.app.Activity.performCreate(Activity.java:4465)
    06-06 11:10:47.158: W/Bundle(538):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
    06-06 11:10:47.158: W/Bundle(538):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
    06-06 11:10:47.158: W/Bundle(538):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
    06-06 11:10:47.158: W/Bundle(538):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
    06-06 11:10:47.158: W/Bundle(538):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
    06-06 11:10:47.158: W/Bundle(538):  at android.os.Handler.dispatchMessage(Handler.java:99)
    06-06 11:10:47.158: W/Bundle(538):  at android.os.Looper.loop(Looper.java:137)
    06-06 11:10:47.158: W/Bundle(538):  at android.app.ActivityThread.main(ActivityThread.java:4424)
    06-06 11:10:47.158: W/Bundle(538):  at java.lang.reflect.Method.invokeNative(Native Method)
    06-06 11:10:47.158: W/Bundle(538):  at java.lang.reflect.Method.invoke(Method.java:511)
    06-06 11:10:47.158: W/Bundle(538):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    06-06 11:10:47.158: W/Bundle(538):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    06-06 11:10:47.158: W/Bundle(538):  at dalvik.system.NativeStart.main(Native Method) 
```

知道如何解决这个问题吗？（看起来很容易，但我就是无法摆脱它）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T11:25:44.603

根据日志，问题似乎如下：

`resid= i.getLongExtra("resid", 1);`

所以将其更改为：

`resid= i.getLongExtra("resid", 1L);`

顺便说一句：getLongExtra 实现如下所示：

```
public long getLongExtra(String name, long defaultValue) {
   return mExtras == null ? defaultValue : mExtras.getLong(name, defaultValue);
} 
```

所以这就是为什么看到它失败了：

```
at android.os.Bundle.getLong(Bundle.java:966) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T11:20:35.417

改变：

```
vip0.putExtra("resid", 1L); 
```

长值总是用`L`后缀声明的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:25:49.337

尝试使用 Long.valueOf(Integer int) 而不是 (long) 1

这是因为它仍然被视为 int 。

# iphone - 如何使视图像所附图像中的那样？

> ID：10913166
> 
> 赞同：3
> 
> 时间：2012-06-06T11:19:44.560
> 
> 标签：iphone, ios, ipad

![在此处输入图像描述](../Images/eeafbea735655045aa215ee02bce1f16.png)

我想实现所附图像中的 UI 功能。该图像是应用商店中西门子应用程序的屏幕截图。这里明亮的部分可以像轮子一样旋转。我已经通过链接

[http://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit](http://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit)。

但我无法实现图像中的功能。

以下是下载 Siemens 应用程序的链接。

[http://itunes.apple.com/us/app/siemens/id452698392?mt=8](http://itunes.apple.com/us/app/siemens/id452698392?mt=8)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:46:40.897

我能想到的最简单的方法是使用两个图像。一种是绿色和白色的细节显示，另一种是灰色的，带有轻微的圆形渐变、大量透明度和完全透明的部分。

灰色图像将在顶部并根据其最后停止位置通过旋转和轻敲来处理触摸运动。

# powerpoint - 如何从 pptx 文件中读取 pptx 引擎名称

> ID：10913176
> 
> 赞同：0
> 
> 时间：2012-06-06T11:20:14.230
> 
> 标签：powerpoint, openxml

给定 pptx 文件，如何知道是哪个引擎创建了该文件？（例如，MSOffice、docx4j/pptx4j 等）也许，Office Open XML 结构中有一些地方可以放置签名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:56:20.753

它通常会进入扩展属性部分：

```
<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties">    
  <Application>Microsoft Office PowerPoint</Application> 
```

哪个 Powerpoint 存储在 /docProps/app.xml

该部分还可以包含 <AppVersion>

但不能保证应用程序会写入或更新。例如，docx4j 仅在配置为时才会这样做。

# iphone - iPhone中的后退按钮动画问题

> ID：10913180
> 
> 赞同：1
> 
> 时间：2012-06-06T11:20:20.463
> 
> 标签：iphone, ipad, uitabbarcontroller

我有这样的场景，点击选项卡时，我正在调用**viewWillAppear**方法，但是之后当我按下后退按钮时，它会直接返回而没有任何动画。

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController{
      switch(mytabbar.selectedIndex)
      {
         case 0:
              [viewController viewWillAppear:YES];
              break;
      }
  } 
```

一切正常，但我没有得到后退按钮动画是唯一的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:28:00.887

不允许调用视图控制器生命周期方法，例如`viewWillAppear`和`viewDidLoad`. 当需要和适用时，它们会在视图的整个生命周期中自动调用。

你需要告诉我们你到底想实现什么，然后我们可以帮助你吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:39:27.277

点击后退：

```
- (IBAction)onBackButtonClicked:(id)sender{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

# android - 相机预览没有重新启动？

> ID：10913181
> 
> 赞同：4
> 
> 时间：2012-06-06T11:20:22.023
> 
> 标签：android, android-intent, android-camera

我正在研究android中的相机代码以拍照并将其保存在手机上。它从手机摄像头拍摄照片并将其保存在存储卡上。唯一的问题是拍照后相机预览没有重新启动。

我无法弄清楚解决方案。代码如下。需要建议。. . 我的项目中有两个类。. .

**摄影活动班**

```
public class CameraActivity extends Activity 
{

  private static final String TAG = "CameraDemo";
  Preview preview; 
  Button buttonClick; 

  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    preview = new Preview(this); 
    ((FrameLayout) findViewById(R.id.preview)).addView(preview); 

    buttonClick = (Button) findViewById(R.id.buttonClick);
    buttonClick.setOnClickListener(new OnClickListener() {
      public void onClick(View v) { 
        preview.camera.takePicture(shutterCallback, rawCallback, jpegCallback);    
      }
    });

    Log.d(TAG, "onCreate'd");
  }

  // Called when shutter is opened
  ShutterCallback shutterCallback = new ShutterCallback() { 
    public void onShutter() {
      Log.d(TAG, "onShutter'd");
    }
  };

  // Handles data for raw picture
  PictureCallback rawCallback = new PictureCallback() {
    public void onPictureTaken(byte[] data, Camera camera) {
      Log.d(TAG, "onPictureTaken - raw");
    }
  };

  // Handles data for jpeg picture
  PictureCallback jpegCallback = new PictureCallback() { 
    public void onPictureTaken(byte[] data, Camera camera) {
      FileOutputStream outStream = null;
      try {
        // Write to SD Card
        outStream = new FileOutputStream(String.format("/sdcard/DCIM/queries.jpg",
            System.currentTimeMillis()));
        outStream.write(data);
        outStream.close();
        Log.d(TAG, "onPictureTaken - wrote bytes: " + data.length);
      } catch (FileNotFoundException e) { 
        e.printStackTrace();
      } catch (IOException e) {
        e.printStackTrace();
      } finally {
      }
      Log.d(TAG, "onPictureTaken - jpeg");

    }
  };

} 
```

**预览课**

```
class Preview extends SurfaceView implements SurfaceHolder.Callback{ 
  private static final String TAG = "Preview";

  SurfaceHolder mHolder;  // <2>
  public Camera camera; // <3>

  Preview(Context context) {
    super(context);

    // Install a SurfaceHolder.Callback so we get notified when the
    // underlying surface is created and destroyed.
    mHolder = getHolder();  // <4>
    mHolder.addCallback(this);  // <5>
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS); // <6>

  }

  // Called once the holder is ready
  public void surfaceCreated(SurfaceHolder holder) {  // <7>
    // The Surface has been created, acquire the camera and tell it where
    // to draw.
    camera = Camera.open(); // <8>
    try {

        Camera.Parameters parameters = camera.getParameters();
        parameters.set("orientation", "landscape");
        camera.setParameters(parameters);
        camera.setPreviewDisplay(holder);  

        camera.setPreviewCallback(new PreviewCallback() { 
        // Called for each frame previewed
        public void onPreviewFrame(byte[] data, Camera camera) {  
          Log.d(TAG, "onPreviewFrame called at: " + System.currentTimeMillis());
          Preview.this.invalidate();  
        }
      });
    } catch (IOException e) { 
      e.printStackTrace();
    }

  }

  // Called when the holder is destroyed
  public void surfaceDestroyed(SurfaceHolder holder) { 
    //Log.d(TAG,"Stopping preview in SurfaceDestroyed().");
    camera.setPreviewCallback(null);
    camera.stopPreview();
    camera.release();
    camera = null;           
  }

  // Called when holder has changed
  public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) { 
    camera.startPreview();
  }

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T14:35:00.257

[Android API Guide 中关于相机的文章](http://developer.android.com/guide/topics/media/camera.html)也遇到了同样的问题。拍照后我可以通过添加以下两个内容来恢复预览：

1）在文件中添加外部存储权限`AndroidManifest.xml`：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

2) 通过调用再次开始预览`camera.startPreview()`。在您的代码中：

```
...
Log.d(TAG, "onPictureTaken - jpeg");
camera.startPreview();
.... 
```

我相信你可以让你的以同样的方式工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T11:27:56.277

在 onPictureTaken 中再次启动 CAMERAACTIVITY，如下所示：

```
// Handles data for jpeg picture
  PictureCallback jpegCallback = new PictureCallback() { 
    public void onPictureTaken(byte[] data, Camera camera) {
      FileOutputStream outStream = null;
      try {
        // Write to SD Card
        outStream = new FileOutputStream(String.format("/sdcard/DCIM/queries.jpg",
            System.currentTimeMillis()));
        outStream.write(data);
        outStream.close();
        Log.d(TAG, "onPictureTaken - wrote bytes: " + data.length);
      } catch (FileNotFoundException e) { 
        e.printStackTrace();
      } catch (IOException e) {
        e.printStackTrace();
      } finally {
        camera.release();
        camera = null;
        startActivity(new Intent(CAMERAACTIVITY.this, CAMERAACTIVITY.class));
        finish();
      }
      Log.d(TAG, "onPictureTaken - jpeg");

    }
  }; 
```

如果你愿意，你也可以使用 Thread.sleep(2000); 这样，捕获的图像将显示 2 秒钟，然后再次启动相机活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T11:01:12.840

添加 Thread.Sleep(2000); camera.startPreview();

这样相机将显示捕获的图像 2 秒并重新启动相机。

# symfony - 在控制器动作之前执行代码

> ID：10913182
> 
> 赞同：29
> 
> 时间：2012-06-06T11:20:22.443
> 
> 标签：symfony

我想在我的项目中的所有操作之前执行代码（计算一个重要的全局变量）。如何在我的控制器中设置预操作功能？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-06T11:59:43.867

Symfony2 中没有*pre-action*方法。为此，您必须使用[事件侦听](http://symfony.com/doc/current/book/internals.html#events)器。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-10-24T05:06:16.793

可能使用侦听器是实现“控制器初始化任务之后”的更优雅的方式，但有更简化的方式来实现：

```
use Symfony\Component\DependencyInjection\ContainerInterface;

/**
 * Override method to call #containerInitialized method when container set.
 * {@inheritdoc}
 */
public function setContainer(ContainerInterface $container = null)
{
    parent::setContainer($container);
    $this->containerInitialized();
}

/**
 * Perform some operations after controller initialized and container set.
 */
private function containerInitialized()
{
     // some tasks to do...
} 
```

将此代码插入到您的控制器中，或者，如果您愿意，您甚至可以将其插入到控制器的某些基本父级抽象中。

因为容器在初始化时会被设置到每个控制器，我们可以`setContainer`在容器设置后重写方法来执行一些任务。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-03T10:53:12.590

你应该特别阅读这个文档页面：[http ://symfony.com/doc/current/cookbook/event_dispatcher/before_after_filters.html](http://symfony.com/doc/current/cookbook/event_dispatcher/before_after_filters.html)

# java - 忽略 WCF 服务的 Axis 客户端上的认证身份验证

> ID：10913185
> 
> 赞同：5
> 
> 时间：2012-06-06T11:20:27.960
> 
> 标签：java, wcf, security, https, axis

我为 WCF 服务创建了一个轴客户端（客户端由 Eclipse 生成，使用 WSDL 作为输入）。

客户端在使用 HTTP 时工作正常。

使用 HTTPS 时出现以下异常：

javax.net.ssl.SSLHandshakeException：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径

我理解这个错误，但我不想给它一个证书所在的地方。

我想告诉 Axis 避免这一步（接受任何证书而不检查它）。

我知道如何用 HttpsURLConnection 来做（创建一个什么都不做的自定义验证器），但我不知道如何用轴来做......（我如何告诉轴使用我的自定义验证器，或者更好，如何我告诉它完全忽略这一步）。

有人能帮我吗？

谢谢，

马坦

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-06T11:59:26.537

我遇到了同样的问题并使用以下方法修复了它：

```
AxisProperties.setProperty("axis.socketSecureFactory","org.apache.axis.components.net.SunFakeTrustSocketFactory"); 
```

如果这不起作用，请查看[此处](http://ws.apache.org/xmlrpc/ssl.html)。

# c - LD_PRELOADing malloc 和 free

> ID：10913186
> 
> 赞同：1
> 
> 时间：2012-06-06T11:20:29.270
> 
> 标签：c, linux, gcc, ld-preload

我编写了自己的*malloc*和*free*并将它们编译到共享库中。我用我的程序 LD_PRELOAD 那个库。这样，我的程序将始终使用我的自定义*malloc*和*free*还是在某些情况下并非如此。我听说 gcc 也内置了 malloc 和*free*。我的 gcc 附带的 glibc 是否有可能使用内置的*malloc*和*free*。

其次，我注意到当我运行我的程序时，我看到*自由*函数调用比*malloc/calloc*调用更频繁（98 到 16）。我自己不进行任何内存分配（在一个地方除外），所以所有分配都是由我使用的标准库函数完成的。还要注意我在我的程序中使用 pthread 。如果你想知道，我的程序是这样的。

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/mman.h>
#include <sys/types.h>

#define NUM_THREADS     8

pthread_mutex_t m = PTHREAD_MUTEX_INITIALIZER;

int sum;
float total = 1;
extern int __did_libc_start_main;

void *PrintHello(void *threadid)
{
   long tid;
   tid = (long)threadid;
   pthread_mutex_lock( &m );
   sum++;
   total *= total + tid * 0.097891313423578;
   printf( "p%d, tid%d, total = %g, start = %d!\n", getpid(), tid, total, 0 );
   pthread_mutex_unlock( &m );
   printf("Hello World! It's me, thread #%ld!\n", tid);
   pthread_exit(NULL);
}

int main (int argc, char *argv[])
{
   pthread_t threads[NUM_THREADS];
   int rc;
   long t;
   char * p;
   char * m;

   fork();

   p = (char*)mmap(0, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0);
   p[0] = 78;
   printf( "p = %p, p[0] = %d, pid = %d!\n", p, p[0], getpid() );
   m = (char*)malloc( 80 );
   printf( "m = %p!\n", m );
#if 1  
   for(t=0; t<NUM_THREADS; t++)
   {
      printf("In main: creating thread %ld\n", t);
      rc = pthread_create(&threads[t], NULL, PrintHello, (void *)t);
      if (rc){
         printf("ERROR; return code from pthread_create() is %d\n", rc);
         exit(-1);
      }
   }
   for(t=0; t<NUM_THREADS; t++)
    pthread_join(threads[t], NULL);

   printf( "\n\nTotal = %g\n\n", total );

   /* Last thing that main() should do */
   pthread_exit(NULL);
#endif
   printf( "\n\n%d: Done without major problems\n\n", getpid() );
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:19:59.733

使用`LD_PRELOAD`覆盖`malloc`等预计会起作用；这就是例如[DUMA 的](http://duma.sourceforge.net/)工作方式。

除了`malloc`,`calloc`和`free`，确保覆盖`realloc`,`memalign`和`valloc`。此外，您可能需要覆盖 C ++ `new`、`new[]`和.`delete``delete[]`

有关如何正确执行此操作的示例，请参阅[使用 LD_PRELOAD 机制覆盖“malloc” 。](https://stackoverflow.com/questions/6083337/overriding-malloc-using-the-ld-preload-mechanism)

# qt - 根据发布类型更改源目录和工作目录

> ID：10913187
> 
> 赞同：1
> 
> 时间：2012-06-06T11:20:30.493
> 
> 标签：qt, qt-creator

我正在使用 Qt 并阅读此处的其他问题，例如：[如何在 QMake .pro 文件中指定不同的调试/发布输出目录](https://stackoverflow.com/questions/2580934/how-to-specify-different-debug-release-output-directories-in-qmake-pro-file)我已经能够更改构建文件的位置。

您必须手动编辑 .pro 文件是否正确，而且我看不到更改不同版本上使用的工作目录的方法。

我查看“项目”选项卡，有一个“运行”设置，但这里的工作目录对于调试和发布配置都是相同的。有没有办法改变这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:52:57.323

是的，您必须编辑 .pro 文件才能更改构建文件所在的目录。（*来吧，这不是很多工作！*）:-)

如果您启用“影子构建”选项，您的工作目录将在调试和发布构建之间自动更改。

# java - 在 Swing 应用程序中集成 Tally

> ID：10913188
> 
> 赞同：0
> 
> 时间：2012-06-06T11:20:31.447
> 
> 标签：java, swing, jakarta-ee

我将使用 Swing 和 Spring，Hibernate 开发一个桌面应用程序。我的应用程序将接受用户的输入，并且所有条目都应输入到 Tally 中。所以我的问题是有可能这样做，如果是的话，任何人都可以提供解释如何做到这一点的链接......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:35:18.773

我找到了解决方案，如果我的英语错了，请原谅我，我的目的只是向所有人提供更多信息。所以那些正在寻找相同的人请先通过[Tally-doc](http://mirror.tallysolutions.com/Downloads/TDL%20Developer/Tally.ERP%209%20-%20Integration%20Capabilities.pdf)

那么阅读这个[文档](http://mirror.tallysolutions.com/Downloads/TDL%20Developer/Tally.ERP%209%20-%20Integration%20Capabilities.pdf)你会更快的理解。好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:33:22.620

您是否考虑过阅读 Tally 的[集成功能文档](http://www.tallysolutions.com/website/html/tallydeveloper/integration-capabilities.php)？它非常清楚地表明他们有一个基于 XML 的 API，支持 HTTP Get 和 Post 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-20T02:13:23.270

另请参阅 [https://sourceforge.net/projects/vch2tally/](https://sourceforge.net/projects/vch2tally/)
如果您可以从 java 调用 dll，则可以轻松导出数据。当然，该工具是根据文档“Tally integration Captivities”开发的。

# jquery - jplayer - 没有足够的论据

> ID：10913191
> 
> 赞同：0
> 
> 时间：2012-06-06T11:20:35.663
> 
> 标签：jquery, wordpress, jplayer

这个问题涉及 wp-ecommerce 的 jplayer 插件（http://getshopped.org/premium-upgrades/premium-plugin/jplayer-mp3-player/），分为两部分。我在他们的论坛上问过这个问题，但是尽管它是付费插件，但他们几乎不提供任何支持...

所以第一部分：我使用 jplayer 插件来预览 mp3（例如[http://www.bombthebass.com/store/music/x-ray-eyes/](http://www.bombthebass.com/store/music/x-ray-eyes/)）每当播放 mp3 时，chrome 中的控制台都会返回 Uncaught TypeError: Not jquery.jplayer.js.min 的第 34 行有足够的参数。有人能弄清楚它来自哪里吗？

第二部分：一般来说，当一个实例开始时，我会尝试让播放器暂停所有其他实例。这不适用于全新安装（不应该是默认行为吗？）我尝试手动添加 jplayers pauseOthers 方法，如下所示：

$('#jquery_jplayer_').bind($.jPlayer.event.play, function() { $(this).jPlayer("pauseOthers"); });

这将返回 Uncaught TypeError: Cannot read property 'play' of undefined。由于它是 wordpress 的插件，因此应包含所有必要的脚本。我还尝试了旧版本的 jquery（当前 1.7.1，我尝试过 werde 1.4 和 1.6 的旧版本）。为什么未定义播放事件？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:43:28.683

好的，对于想知道的每个人：wpsc jplayer 脚本和 jquery 的最新版本存在兼容性问题，现在在当前插件版本中已修复。

# iphone - 核心数据。对大尺寸 NSManagedObject 的 NSMutableSet 进行排序

> ID：10913193
> 
> 赞同：1
> 
> 时间：2012-06-06T11:20:36.540
> 
> 标签：iphone, sorting, core-data, nsmanagedobject, nsfetchrequest

我想获取大约 200 个 NSManagedObject，每个大小约为 5Mb。如果我使用 executeFetchRequest，我会收到内存警告和应用程序崩溃（因为获取的 NSManagedObjects 出现在 iPhone 的 RAM 中）。如果我可以使用 executeFetchRequest，我可以使用 sortdescriptor 按 id 对数据进行排序。但我不能（或者可能我应该为 NSFetchRequest 设置适当的属性，但我不知道是什么属性）。这就是为什么我使用另一种方法来加载大量数据的原因：我有实体专辑，它有很多实体SpecificImage。我使用这段代码来获取当前专辑的所有图像：

```
- (NSMutableSet *)getAllSpecificImages
{
        NSString *entityName = kEntityName;
        AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
        NSManagedObjectContext *context = appDelegate.managedObjectContext;
        NSEntityDescription *entityDesctiption = [NSEntityDescription 
                                                  entityForName: entityName
                                                  inManagedObjectContext:context];
        // check if town exists
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"id == %d", self.CurrentCategoryItemID];
        NSFetchRequest *requestToCheckExistense = [[NSFetchRequest alloc] init];
        [requestToCheckExistense setEntity:entityDesctiption];
        [requestToCheckExistense setPredicate:predicate];
        NSArray *objects = [context executeFetchRequest:requestToCheckExistense error:nil];
        [requestToCheckExistense release];
        if (objects == nil)
        {
            NSLog(@"there was an error");
            return nil;
        }
        NSManagedObject *object;
        if ([objects count] > 0)
        {
            // edit item
            object = [objects objectAtIndex:0];

        }
        else
        {
            // if object doesn't exist, find max id to imlement autoincrement
            NSFetchRequest *request = [[NSFetchRequest alloc] init];
            [request setEntity:entityDesctiption];
            NSArray *allobjects = [context executeFetchRequest:request error:nil];
            [request release];
            NSInteger newID = 1;
            if ([allobjects count] > 0)
            {
                NSNumber *maxID = [allobjects valueForKeyPath:@"@max.id"];
                newID = [maxID intValue] + 1;
            }

            // write item
            object = [NSEntityDescription insertNewObjectForEntityForName:entityName inManagedObjectContext:context]; 
            [object setValue:[NSNumber numberWithInt:newID] forKey:@"id"];
            self.CurrentCategoryItemID = newID;
        }

    NSMutableSet *set = [object mutableSetValueForKey:@"specificImages"];
    return set;
} 
```

然后我得到 NSManagedObjects 数组

```
NSMutableArray *array = [NSMutableArray arrayWithArray:[setOfManagedObjectsSpecificImages allObjects]]; 
```

但是随后我尝试获取此 NSManagedObjects 的排序数组，并且再次收到内存警告和应用程序崩溃。我试着用

```
NSSortDescriptor *sortDiscriptor = [NSSortDescriptor sortDescriptorWithKey:@"id" ascending:YES];
[array sortUsingDescriptors:[NSArray arrayWithObject:sortDiscriptor]]; 
```

和

```
[self quickSort:array left:0 right:([array count] - 1)]; 
```

在哪里

```
- (void)quickSort: (NSMutableArray *)arr left:(NSInteger)left right:(NSInteger) right
{
    @autoreleasepool {
        int i = left, j = right;

        int pivot = [((SpecificImage *)[arr objectAtIndex:(left + right) / 2]).id intValue];

        /* partition */

        while (i <= j) {
            while ([((SpecificImage *)[arr objectAtIndex:i]).id intValue] < pivot)
            {

                i++;
            }

            while ([((SpecificImage *)[arr objectAtIndex:j]).id intValue] > pivot)
            {

                j--;
            }

            if (i <= j) {

                [arr exchangeObjectAtIndex:i withObjectAtIndex:j];

                i++;

                j--;

            }

        };

        /* recursion */

        if (left < j)
        {
            [self quickSort:arr left:left right:j];
        }

        if (i < right)
        {
            [self quickSort:arr left:i right:right];
        }

    }

} 
```

但这没有帮助。

从我的角度来看，当我得到一组 NSManagedObjects 时，它们不在 RAM 中。但在排序过程中，它们会出现在 RAM 中。

我想对 NSMutableSet 进行排序（尝试设置：

```
NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"specificImages.id" ascending:YES]; 
```

但我得到了

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'to-many key not allowed here' 
```

我描述的这个问题是另一个问题[NSSortDescriptor to-many Relations](https://stackoverflow.com/questions/10813826/nssortdescriptor-to-many-relationships)

从我的角度来看，我看到了 2 种方法：1）执行 FetchRequest，但提供：对象不会出现在 RAM 中（我不知道如何，但我几乎确定这是可能的）2）改变我的快速排序提供：对象没有出现在 RAM 中

**更新** 这是我的代码，我尝试使用 executeFetchRequest 获取对象（对象在 RAM 中，我希望它是错误对象（不在 RAM 中））：

```
+ (NSMutableSet *)GetImagesWithPredicate:(NSPredicate *)predicate
{
    NSString *entityName = kEntityName;
    AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];;
    NSManagedObjectContext *context = appDelegate.managedObjectContext;
    NSEntityDescription *entityDesctiption = [NSEntityDescription 
                                              entityForName: entityName
                                              inManagedObjectContext:context];

    // find object
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entityDesctiption];
    [request setPredicate:predicate];
    NSArray *objects = [context executeFetchRequest:request error:nil];
    [request release];
    if (objects == nil)
    {
        NSLog(@"there was an error");
        return nil;
    }
    NSMutableSet *set = [NSMutableSet setWithArray:objects];
    return set;
} 
```

谓词：

```
NSMutableArray *allID = [NSMutableArray array];
for (int i = 1; i < 639; i++)
{
      [allID addObject:[NSNumber numberWithInt:i]];
}
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"id in %@", allID]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T11:27:46.960

tl;博士代码。

CoreData 有一个东西。这叫**故障**。故障对象意味着您引用了该对象的数据仍在存储中（您的“不在 RAM 中”的版本）。要默认一个对象，您必须调用`valueForKey:`方法并获取任何属性（这会加载除关系之外的整个对象）。在进行排序时，核心数据会在内部调用`valueForKey:`，这会导致您的图像数据被加载。

我对您的建议：创建一个单独的实体，称为类似`ImageDescriptor`您将保存排序所需的所有属性的地方。该实体将与实际二进制图像数据保持一对一的关系，您仅在需要时才获取（即使用延迟获取）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:13:30.073

我使用了 Eimantas 方法，但我知道了如何获取对象而不将它们记录在 RAM 中。我用了`includesPropertyValues`

# solr - solr 中的 dataDir 参数

> ID：10913194
> 
> 赞同：4
> 
> 时间：2012-06-06T11:20:47.880
> 
> 标签：solr

使用 Solr 3.6。在 solrconfig.xml 上有一个 dataDir 参数，它要求指定一个备用目录来保存除默认值之外的所有索引数据。

是备份还是其他？它可能对性能产生什么影响？它被认为是最佳实践吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T11:29:39.490

dataDir 是 Solr 将存储索引数据的目录（默认情况下，它位于 Solr 主目录中的 ./data 下）。您可以使用它来设置不同的路径。它不是备份。更多信息[在这里](http://wiki.apache.org/solr/SolrConfigXml#dataDir_parameter)。

它不太可能对性能产生影响。除非您将其指向文件系统中更快磁盘上的另一个挂载点。

我想说最好的做法是将 dataDir 放在 Solr 主目录之外，这样您就可以升级 Solr 而不必担心数据所在的位置。如果您的服务器上有多个磁盘，这很有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T11:29:51.190

您指定的`dataDir`不是存储索引的附加位置。如果您不希望将索引存储在默认位置（位于 solr home 内），则它就是存储索引的位置。这对于将索引保存在安全的地方并在每次发布时覆盖现有配置而不必担心索引本身非常有用。

# firefox - 保存和恢复 html 页面

> ID：10913199
> 
> 赞同：0
> 
> 时间：2012-06-06T11:21:00.183
> 
> 标签：firefox, firefox-addon

我需要编写一个扩展，它可以执行以下操作：

*   将当前 HTML 保存在本地文件中
*   打开本地文件

问题是通过打开`file://.../page.html`相对网址（例如`<img src="/img.jpg"/>`）不再起作用。

在保存页面之前，我尝试将所有相对 url 更改为绝对 url，因为要正确更改所有这些是完全不可能的。

任何人都可以想到一些解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:48:11.870

尝试将`base`标签添加到文档的头部： [http ://www.w3.org/TR/html-markup/base.html](http://www.w3.org/TR/html-markup/base.html)

# jfreechart - 在 JFreeChart 中隐藏一些类别标签以避免重叠

> ID：10913201
> 
> 赞同：3
> 
> 时间：2012-06-06T11:21:05.143
> 
> 标签：jfreechart

我正在使用 JFreeChart 生成 StackedBarChart。根据输入数据，我可以有很多类别（通常在 20 到 40 之间），导致标签重叠。在以下屏幕截图中，您可以看到类别从 1 到 38 的图表：

![类别从 1 到 38 的图表，标签重叠](../Images/e5003c4cb5e7ad2b3947154df6fc4c5e.png)

我想显示一些类别标签作为参考，但不是全部。最好显示第一个和最后一个，以及其间的每五分之一。这可能吗？

我无法更改图表的宽度，并且只有在标签太小以至于您无法再阅读它们时才能使标签变小...最后的手段是隐藏整个类别轴...

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T09:18:12.950

一种简单的解决方案是将类别标签设置为背景颜色（在本例中为白色）。

```
 CategoryPlot plot = (CategoryPlot) chart.getPlot();
    CategoryAxis domainAxis = plot.getDomainAxis();
    domainAxis.setTickLabelPaint("Category 2", Color.white);
    domainAxis.setTickLabelPaint("Category 4", Color.white); 
```

这将产生一个这样的图表

![在此处输入图像描述](../Images/9ced751704f6b4202db02a202e61267c.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T22:09:39.360

您可以`setVerticalTickLabels(true)`在域轴上使用，如本[例](https://stackoverflow.com/a/5522583/230513)所示。

附录：糟糕，引用的[示例](https://stackoverflow.com/a/5522583/230513)是针对`ValueAxis`. 对于 a `CategoryAxis`，如 中所用`StackedBarChart`，您可以使用该方法更加灵活`setCategoryLabelPositions()`。[`BarChartDemo1`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/demo/BarChartDemo1.html)源代码中说明了典型用法，[此处](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/demo/BarChartDemo1.html#line.65)显示。

# windows-phone-7 - 取消固定磁贴更新 Windows Phone 中对象中的信息

> ID：10913205
> 
> 赞同：1
> 
> 时间：2012-06-06T11:21:20.097
> 
> 标签：windows-phone-7, windows-phone-7.1

我有一个包含一个布尔属性的对象`IsPinnedToStart`。当用户从主应用程序创建辅助磁贴时，此属性设置为 true。当用户从主应用程序中取消固定磁贴时，此属性设置为 false。

但是，当我从“开始”取消固定磁贴时，该属性不会以其他方式更新。

所以我的主要问题是，当我从“开始”屏幕取消固定辅助磁贴时，如何在应用程序中获得通知？

任何帮助将不胜感激。提前谢谢... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:33:12.140

你没有。您应该查询您的应用在开始屏幕中创建的所有图块（在 ShellTile.ActiveTiles 集合中），并从那里确定当前内容项是否已固定。

例如，要删除链接到特定项目 ID 的图块...

```
var tile = ShellTile.ActiveTiles.Single(t => t.NavigationUri.ToString().Contains("?ItemId=" + MyItemId));
tile.Delete(); 
```

或确定是否有特定项目 ID 的图块...

```
bool tileExists = ShellTile.ActiveTiles.Where(t => t.NavigationUri.ToString().Contains("?ItemId=" + MyItemId)).Any(); 
```

注意：未经测试的代码，基于[此处的博客文章](http://blogs.microsoft.co.il/blogs/pavely/archive/2011/09/30/dynamic-live-tiles-in-windows-phone-7.aspx)

# android - 使用不同的密钥库辞职 apk

> ID：10913207
> 
> 赞同：23
> 
> 时间：2012-06-06T11:21:22.897
> 
> 标签：android, apk, sign

目前我正在使用私有密钥库文件签署 apk，但我想用不同的密钥库文件签署该 apk。我怎样才能辞职那个apk ..？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-14T14:47:12.940

您可以使用不同的密钥库为您的 apk 签名。

按着这些次序：

签署释放：`$1.apk -> $1_release.apk"`

**第 1 步：**删除任何以前的签名

*   将您的扩展名更改`.apk`为`.zip`.
*   打开并删除文件夹 META-INF
*   将扩展名更改为`.apk`
    或
    命令：`zip [originalapk]`
    示例：`zip "$1".apk -d`

* * *

**第 2 步：**使用 release.keystore 签名：

命令：

```
jarsigner –verbose –keystore [keystorefile] –signedjar [unalignedapk] [originalapk] alias_name 
```

例子：

```
C:\Program Files\Java\jdk1.6.0_43\bin> jarsigner -verbose -keystore release.keystore -signedjar "$1"_unaligned.apk "$1".apk release 
```

* * *

**第 3 步：**对齐

命令：`zipalign -f 4 [unalignedapk] [releaseapk]`

例子：

```
C:\Users\Downloads\adt-bundle-windows-x86\adt-bundle-windows-x86\sdk\too ls>zipalign -f 4 "$1"_unaligned.apk "$1"_release.apk 
```

* * *

**第 4 步：**清理

命令：`rm 4 [unalignedapk]`
示例：`rm "$1"_unaligned.apk`

* * *

**其他命令可能会有所帮助：**

1.  使用 keytool 生成新密钥

```
keytool -genkey -alias -keystore  
```

1.  列出键

```
keytool -list -keystore
```

* * *

**笔记：**

为了签署我们的 apk，我们已将 JDK 从 1.7 降级到 1.6.0_43 更新。

原因：

从 JDK 7 开始，默认签名算法已更改，要求您在签名 APK 时指定签名和摘要算法（-sigalg 和 -digestalg）。

命令：

```
jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore [keystorefile] [originalapk] alias_name 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-06T11:27:02.610

你应该检查下面的SO线程

[我可以用不同的证书辞职 .apk](https://stackoverflow.com/questions/3267216/can-i-resign-an-apk-with-a-different-certificate-than-what-it-came-with)

或者[这个](https://stackoverflow.com/questions/7119839/re-sign-an-android-apk)也可以帮助你

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-03T11:27:37.550

你也可以使用开源的 apk-resigner 脚本，非常好用。

APK-resigner：[https ://github.com/onbiron/apk-resigner](https://github.com/onbiron/apk-resigner)

```
./signapk.sh calculator.apk ~/.android/debug.keystore android androiddebugkey 
```

此外，如果您想使用调试密钥对 APK 进行签名，您可以使用。

```
./signapk.sh calculator.apk 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-07-31T04:53:59.397

1.  删除旧标志

    > zip -d xxxx.apk(你的 apk 文件) META-INF/*

2.  签名apk

    > jarsigner -verbose -keystore xxxx.keystore(你的密钥库) -signedjar out_sign.apk(outfile) unsign.apk(unsign apk) xxxxxalias(你的别名)

3.  如果签名 apk 不起作用并且 jdk >= 1.7

    > 添加参数**-digestalg SHA1 -sigalg MD5withRSA**
    > jarsigner -verbose **-digestalg SHA1 -sigalg MD5withRSA** -keystore xxxx.keystore(你的密钥库) -signedjar out_sign.apk(outfile) unsign.apk(unsign apk) xxxxxalias(你的别名)

# windows-phone-7 - 如何在wp7的列表框中获取选中和未选中复选框项目的ID？

> ID：10913209
> 
> 赞同：0
> 
> 时间：2012-06-06T11:21:27.850
> 
> 标签：windows-phone-7, listbox

默认情况下，一些列表框项目被选中，其中一些未被选中。然后用户可以更改选中或未选中的项目。请告诉我如何维护选中的 ids，未选中的 ids ..

```
 private void CheckBox_Checked(object sender, RoutedEventArgs e)
        {
            ListBoxItem checedItem = this.listBox2.ItemContainerGenerator.ContainerFromItem((sender as CheckBox).DataContext) as ListBoxItem;
            if (checedItem != null)
            {
                checedItem.IsSelected = true;
            }

        }
private void CheckBox_Unchecked(object sender, RoutedEventArgs e)
        {
            ListBoxItem checedItem = this.listBox2.ItemContainerGenerator.ContainerFromItem((sender as CheckBox).DataContext) as ListBoxItem;
            if (checedItem != null)
            {
                checedItem.IsSelected = false;
            }
        }

string result1 = e.Result.ToString();

                XDocument xmlDocu = XDocument.Load(new MemoryStream(System.Text.UTF8Encoding.UTF8.GetBytes(result)));

                interestrates = (from rts in xmlDocu.Descendants("Friend")

                                 select new SampleCheckedData
                                 {

                                     Id = (string)rts.Element("userid"),
                                     Name = (string)rts.Element("name"),
                                     Icon = (string)rts.Element("imageurl"),
                                     IsChecked = !(Boolean)rts.Element("visiblestatus"),

                                 }).ToList<SampleCheckedData>();

                this.listBox2.ItemsSource = interestrates;

<ListBox x:Name="listBox2" SelectionMode="Multiple" Margin="0,67,0,0">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                            <Image Source="{Binding Icon}" Stretch="Fill" MaxHeight="Infinity" MaxWidth="Infinity" Width="100" Height="100" />

                                <TextBlock Text="{Binding Name}" Width="300" VerticalAlignment="Center" TextWrapping="NoWrap" FontSize="22" />
                            <CheckBox IsChecked="{Binding IsChecked}" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
                        </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

编辑：

```
 private void btnDone_Click(object sender, RoutedEventArgs e)
        {
            var checkedItems = from item in interestrates where item.IsChecked select item.Id;
            var uncheckedItems = from item in interestrates where !item.IsChecked select item.Id;
} 
```

请告诉我如何维护已检查的用户标识，未检查的用户标识.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:38:58.783

假设您将集合存储在代码中的某个位置，而不仅仅是直接将其分配给 ListBox ItemsSource 属性，您应该能够简单地查看集合项的属性......

```
var checkedItems = from item in interestrates where item.IsChecked select item;
var uncheckedItems = from item in interestrates where !item.IsChecked select item; 
```

如果您只需要 userIds，则将查询更改为类似

```
var checkedItems = from item in interestrates where item.IsChecked select item.Id;
var uncheckedItems = from item in interestrates where !item.IsChecked select item.Id; 
```

# android - android/eclipse 上 dataset-web 服务的 web 方法

> ID：10913211
> 
> 赞同：1
> 
> 时间：2012-06-06T11:21:41.797
> 
> 标签：android, eclipse, web-services

如何为 Web 服务创建一个 Web 方法，该方法通过从 android 使用它来将值作为“数据集”返回。

这种网络方法对吗？

```
public class GetName {

    public DataSet GetName(String str) {
        return str;
    }
} 
```

如果没有，请让我现在有任何想法或示例来源。我已经根据我的知识进行了谷歌搜索，但仍在寻找解决方案。

感谢您宝贵的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:41:42.883

试试这个链接[在 Eclipse 中创建基于 Java 的 Web 服务，](http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html)它将帮助您创建基于 Java 的 Web 服务，如果您有问题可以写信给我。

# ios - 按下记住我按钮后登录视图不会出现。必须出现第二个视图

> ID：10913214
> 
> 赞同：0
> 
> 时间：2012-06-06T11:22:00.313
> 
> 标签：ios, cocoa-touch

我需要一些代码来完成我的任务：即，如果任何用户登录并记住用户名和密码，那么在下一次启动登录视图中一定不能出现。事实上，它会出现第二种观点。

怎么可能。等待你的想法

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:29:10.573

1.  首次登录时， 如果用户选择了“记住我” ，请将用户名和密码保存在[Keychain中。](http://log.scifihifi.com/post/55837387/simple-iphone-keychain-code)
2.  下次启动应用程序时，从 Keychain 获取用户凭据，然后自己进行登录过程。如果登录过程需要时间，请使用活动指示器或其他东西让用户等待。
3.  如果登录成功，请调用您的第二个视图。
4.  每当用户单击注销（如果您有注销按钮）时，请确保从钥匙串中删除凭据。所以下次启动时，由于钥匙串中没有凭证，所以必须显示登录页面

# perl - 在 bash 脚本中使用源代码

> ID：10913222
> 
> 赞同：1
> 
> 时间：2012-06-06T11:22:54.263
> 
> 标签：perl, bash, env, perlbrew

我已经使用 perlbrew 在 CentOS 5.x 服务器上安装了一些需要 Perl 5.010 的代码，它需要这两行

```
source ~/perl5/perlbrew/etc/bashrc 
```

和

```
perlbrew switch perl-5.10.1 
```

要在我的 /usr/bin/env 中有 perl 5.010 之前在 shell 中执行，所以我尝试创建以下可执行 bash 脚本以最小化这两个步骤`./setEnv.sh`

```
#!/bin/bash
echo "**setting environment variables - 'perlbrew switch-off' to exit"
SETSOURCE= `source ~/perl5/perlbrew/etc/bashrc`
echo $SETSOURCE
SETPERL= `perlbrew switch perl-5.10.1`
echo $SETPERL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:07:51.143

进程无法修改其父环境，因此自 shebang 以来您做错了。

在反引号（子shell）中执行源代码仅影响子shell，并在命令执行后结束。

```
 $ ### test.sh assign "inside" to TEST
    $ TEST='outside'; echo "$(source test.sh; echo $TEST)" - $TEST
    inside - outside 
```

您可能想要做的是`setEnv.sh`直接从您的 shell 获取脚本。

```
 $ ### test.sh assign "inside" to TEST
    $ TEST='outside'; source test.sh; echo $TEST 
    inside 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:28:07.320

使用`source`不带反引号的命令。只写一行

```
source ~/perl5/perlbrew/etc/bashrc 
```

在你的脚本中。（`source`有副作用，当您在子外壳中时不起作用。我什至不确定您是否可以`source`作为外部命令运行。）

# django - 从 django 运行 fabfile 任务

> ID：10913224
> 
> 赞同：0
> 
> 时间：2012-06-06T11:23:08.830
> 
> 标签：django, fabric

我有一个织物任务，例如-

```
def run_task():

#code here 
```

从命令提示符我运行这个任务：

```
fab -c env.fabricrc run_task -H hostnamr 
```

如何从 django 运行此任务？我在 django 应用程序的网页上单击一个按钮，它应该这样做。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:15:20.737

[这是](http://docs.fabfile.org/en/1.4.2/usage/library.html)关于如何在不使用 fab 命令运行任务的情况下将 fabric 用作 python 模块/库的部分。

简短的例子：

```
from fabric.api import execute
#import your task if it is not in the same module, i.e.:
from mytasks import run_task

execute(run_task, hosts='hostname') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:07:51.040

我认为您应该将此逻辑放在您的 Django 应用程序中的某个位置。让我们`run_task`只是这个逻辑的包装。

它是基于应用程序的 fabfile，反之亦然。

# version-control - Nuget 在 VS2010 中构建时如何跟踪包版本？

> ID：10913225
> 
> 赞同：1
> 
> 时间：2012-06-06T11:23:14.520
> 
> 标签：version-control, nuget, nuget-package

我已经注意到几次 Nuget 包将重置包版本，有效地从头开始，并为包提供比前一个更低的版本。

我正在使用 VS2010 和 AssemblyInfo.cs 中的星号 * 功能来生成版本：

```
// You can specify all the values or you can default the Revision and Build Numbers 
// by using the '*' as shown below:
[assembly: AssemblyVersion("1.0.0.*")]
//[assembly: AssemblyFileVersion("1.0.*")] 
```

现在，我可能有一个编号为 1.0.0.32334 的构建，然后突然随机地构建将成为例如 1.0.0.16272，并且从它构建的包也会发生同样的情况。

这完全是随机发生的（还没有弄清楚究竟是在什么时候或在什么条件下），但这很烦人，因为它杀死了 Nuget 的更新机制——因为它找不到新版本。

有没有其他人发现这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:39:49.870

简短回答：Nuget 默认只使用程序集版本，但您可以在 nuspec 或命令行中覆盖。

根据[MSDN](http://msdn.microsoft.com/en-us/library/4w8c1y2s.aspx)，版本号的格式是这样的：

> major.minor.build.revision

[自动递增的内部版本号的行为如下](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyversionattribute.aspx)：

> 默认内部版本号每天递增。默认修订号是随机的。

当您使用自动构建编号时，您应该允许 VS 自动增加构建编号*和*修订编号，就像注释掉的示例所示。尽管文档声称修订号是随机的，但在我看来它不是随机的。事实上，它似乎全天都在增加，并且很可能在第二天重置。但是，我不会指望它，因为它可能是一个可能会改变的实现细节。

通过不让 VS 选择内部版本号，您实际上是将其减少到一个随机数，因此有时修订号小于先前的修订号也就不足为奇了。除非在 nuspec 中或从命令行覆盖，否则 NuGet 只会采用程序集版本并为包使用相同的版本。因此，您的根本原因可能是您选择程序集版本号的方式。

如果可以，只需将版本控制方案更改为：

```
[assembly: AssemblyVersion("1.0.*")] 
```

但如果这是不可接受的，那么您将不得不在 Nuspec 中维护版本号，或者在调用`Nuget pack`.

# jquery - 如何更改聊天框上的箭头图像

> ID：10913231
> 
> 赞同：0
> 
> 时间：2012-06-06T11:23:44.300
> 
> 标签：jquery, html

我想更改页脚右侧聊天框 div 的打开和关闭时的箭头图像。

这是我的**代码**

```
<div class="chat_olark">
            <div id="top_chat" style="cursor:pointer">
                <div id="chat_heading"><a href="#">Contact Us!</a></div>
                <div id="chat_arw"><a href="javascript:toggle()"><img src="images/chat_arw_up.png"></a></div>
            </div>
            <div id="body_chat" style="display:none;">
                <div id="chat_txt">We're not around, but we'd love to chat another time.</div>
                <form name="cat" action="contact.php" method="post" onsubmit="return valid();">
                <textarea value="click here and type your name..." style="resize: none; height: 15px; margin-left: 5px; width: 235px;" cols="50" rows="20" name="contactname" placeholder="Name" id="name"></textarea>
                <textarea value="click here and type your name..." style="resize: none; height: 15px; margin-left: 5px; margin-top:5px; width: 235px;" cols="50" rows="20" name="email" placeholder="Your Email" id="email"></textarea>
                <textarea value="click here and type your name..." style="resize: none; height: 30px; margin-left: 5px; margin-top:5px; width: 235px;" cols="50" rows="20" name="subject" placeholder="Subject Here!" id="subject"></textarea>
                <textarea value="click here and type your name..." style="resize: none; height: 70px; margin-left: 5px; margin-top:5px; width: 235px;" cols="50" rows="20" name="message" placeholder="Your Message Here!" id="msg"></textarea>
                <input type="submit" name="submit" value="Send" class="proceed_btn505" style="float:right;margin: 10px 7px 0 0;cursor:pointer">
                </form>
            </div>

        </div> 
```

查询：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js" type="text/javascript"></script>
<script type="text/javascript">

$(document).ready(function(){

        $("#body_chat").hide();
        $("#top_chat").show();

    $('#top_chat').click(function(){
    $("#body_chat").slideToggle();
    });

});

</script> 
```

当显示 body_chat 时，应该更改图像箭头。我的第二个图像名称是 arr_down.png。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:31:55.067

这应该可以解决问题：

```
(function($){
$('div#chat_arw a').on('click',function(e){
    $("#body_chat").slideToggle();
    $(this).children().attr('src','images/arr_down.png');
});
})(jQuery); 
```

但是，我敢打赌改变课程而不是 srcs。

所以你会有：

```
<div id="chat_arw"><a href="javascript:toggle()" class="arrow-up'>Open Chat!</a></div> 
```

然后切换到：

```
<div id="chat_arw"><a href="javascript:toggle()" class="arrow-down'>Open Chat!</a></div> 
```

有类似的东西：

```
(function($){
$('div#chat_arw a').on('click',function(e){
    $("#body_chat").slideToggle();
    $(this).removeClass().addClass('arrow-down');
});
})(jQuery); 
```

# javascript - .on() 不适用于 ajax 加载页面

> ID：10913232
> 
> 赞同：3
> 
> 时间：2012-06-06T11:23:45.867
> 
> 标签：javascript, jquery, html, ajax

我的 soft.php 代码

```
<!DOCTYPE html>
<html>
<head><style>
</style>
<script src="jquery.js"></script>
<script>
$(function(){
$("button").on("click",function(){alert("f");});
$("div").on("click",function(){
$("span").load("check.php");
});

});</script></head><body>
<div>Click</div>
<button>eaf</button><span></span>
</body></html> 
```

和 check.php 代码

```
<body>
<button>Hello</button>
</body> 
```

我想提醒 f 单击通过 ajax 加载的按钮，该按钮与 .live() 一起工作正常。但是有人告诉我 .on() 可以用来代替 live 但 .on() 在这里不起作用。建议解决方案

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T11:25:11.997

```
$('body').on("click", "button", function(){
    alert("f");
}); 
```

当您`button`在页面加载后添加到 DOM 时，您需要使用委托事件。

最好使用其他选择器而不是`body`.

您可以使用多个选择器，如下所示：

```
$('body').on("click", "button, div", function(){
    alert("f");
}); 
```

阅读[**`.on()`**](http://api.jquery.com/on)

# node.js - node.js 如何知道我放置脚本的位置？

> ID：10913235
> 
> 赞同：1
> 
> 时间：2012-06-06T11:23:54.120
> 
> 标签：node.js

我已经尝试了在 node.js 中制作“hello world”示例的最常用方法。我在mac和现在的windows上都试过了。没有运气。

1.  我安装 node.msi
2.  运行cmd.exe
3.  我输入：`node`在命令外壳中，然后输入。
4.  新行出现`>`符号，所以现在我假设我处于“节点模式”
5.  我输入：`node test.js`，test.js中的内容是`console.log.("hello")`，然后我按回车
6.  输出中出现三个点“...”。

在类似的教程中，预期的输出是一个字符串“hello”，我只是得到`...`而且我不知道是什么`...`意思。这是否意味着服务器正在运行？

我以管理员身份运行 cmd.exe。当`...`我在 mac btw 上测试时，输出是相似的。我也不明白如何在没有完整路径的情况下引用 js 脚本。节点如何知道我放置脚本的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T11:39:36.243

有两种使用节点的方法。您可以将它用作 REPL，就像您发现的那样，只需在命令行中键入“node”，然后您就可以以线性格式发出命令。但是，运行节点的最常见方式以及您缺少的方式是直接从命令行运行包含您的 javascript 的文件。

因此，从干净的命令行无需输入 Node REPL，只需键入“node test.js”，您将获得预期的“Hello World”输出。Node 在当前目录中查找脚本。如果文件位于其他位置，您将需要提供相对或绝对路径。认为节点与运行任何标准 Unix/Linux 命令（如“cp”或“ls”）没有什么不同

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:26:45.833

只是在前面所说的基础上添加一两件事。

刚才我遇到了同样的问题（在**Windows 7中开始使用****node.js**，我试图打开文件，我看到的只是三个点 - “...”），我发现你只需编写以下代码即可轻松地在节点 REPL 中加载脚本：

 **`.load yourFileName.js` 在节点终端 REPL 中。

当我要加载的 js 脚本不在默认节点文件夹中时，我必须为其添加相对路径。因此，如果文件位于您计算机上的文件夹 node/node_modules/example.js 中，您必须编写：

```
.load node_modules/example.js 
```

我通过简单地输入 node.js 发现了这一点`.help`。

这只是补充了上面的答案，否则它是完全有效的。**

# php - simplexml rss 意外'：'

> ID：10913236
> 
> 赞同：0
> 
> 时间：2012-06-06T11:23:54.867
> 
> 标签：php, rss, simplexml

我有这个php（下面的问题）

```
<?php
$url = "http://woytest.blogspot.com/feeds/posts/default?alt=rss";
$rss = simplexml_load_file($url);
if($rss){
echo '<h1>'.$rss->channel->title.'</h1>';
$items = $rss->channel->item;
foreach($items as $item){
$title = $item->title;
$link = $item->link;
$img = $item->media:thumbnail->attributes()->url; // error on this line
$description = $item->description;
echo 'Post Title: '.$title.'<br/>';
echo 'Post Link: '.$link.'<br/>';
echo 'Post thumbnail: '.$img.'<br/>';
echo '<br/><br/><br/>';
}
}
?> 
```

问题是`media:thumbnail`出现`<media:thumbnail url='...'>`在 rss 提要上的冒号如何克服我尝试`{'media:thumbnail'}`仅替换`media:thumbnail`php 中的冒号但没有运气的问题...我是 php 新手，请您解释一下我的错误的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:33:14.083

看看[http://alisothegeek.com/2011/07/picking-apart-xml-feeds-and-namespaces-with-php-and-simplexml/](http://alisothegeek.com/2011/07/picking-apart-xml-feeds-and-namespaces-with-php-and-simplexml/)

希望这对您有所帮助；）

例子：

```
$entries = simplexml_load_file('http://woytest.blogspot.com/feeds/posts/default?alt=rss');
$namespaces = $entries->getNamespaces(true);

foreach ($entries->channel->item as $feeditem) 
{
    $thumbnail = $feeditem->children($namespaces['media'])->thumbnail;
    $attr = $thumbnail->attributes();

    echo '<pre>';
    echo "URL = {$attr['url']}, width = {$attr['width']}, height = {$attr['height']}\n";
    echo print_r($attr, true);
    echo '</pre>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:32:54.390

调用**print_r()**以了解对象结构：

```
$url = "http://woytest.blogspot.com/feeds/posts/default?alt=rss";
$rss = simplexml_load_file($url);
echo "<pre>";
print_r($rss);
echo "</pre>"; 
```

# excel - 在 VSTO 中找不到从 XLStart 文件夹加载的所有插件

> ID：10913237
> 
> 赞同：2
> 
> 时间：2012-06-06T11:24:00.727
> 
> 标签：excel, c#-4.0, vsto, excel-addins, xla

我在文件夹中有一些 xla 和 xll 文件`XLStart`。在 C# 中，我想找出当前加载的插件。

使用这些插件无法访问，`Globals.ThisAddIn.Application.AddIns`但我`Globals.ThisAddIn.Application.VBE.VBProjects`从[这里](http://social.msdn.microsoft.com/Forums/da-DK/vsto/thread/23e16392-d6de-430d-b282-7897a8fff2e0)找到了这个。使用的问题`Globals.ThisAddIn.Application.VBE.VBProjects`是它没有列出我所有的 xla 和 xll 文件。

列出从文件夹加载的所有插件的任何想法`XLStart`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-18T05:09:19.067

默认情况下，从 XLSTART 目录加载的任何 Excel 文件（包括加载项）都不会成为`Addins`集合的一部分。

从 XLSTART 加载的加载项文件将在 VBE 中可见，但由于它是加载项，因此该文件在 Excel 中不可见，并且在`Workbooks`集合中不可枚举。

枚举 VBE 项目是一种方法，但它要求 VBE 可以在用户的​​ Excel 安全设置下访问，并且在检查项目时，您需要了解已保存/未保存、受保护/未保护的项目以及那些是项目的项目被其他项目引用。

但是，仅仅因为 Workbooks 集合不会*枚举*不可见的加载项并不意味着它们不在*集合*`Workbooks`中。

如果您知道要查找的加载项的名称，则可以使用：

```
ThisAddIn.Application.Workbooks.get_Item("MyAddin.xlam") 
```

因此，如果您枚举 XLSTART 目录中的文件名，然后检查：

```
ThisAddIn.Application.Workbooks.get_Item(addinName).FullName == addinFullName 
```

对于*每个文件*，您将知道加载了哪些 XLSTART 文件。

# android - 在屏幕方向更改时旋转视图（但不是布局）

> ID：10913248
> 
> 赞同：2
> 
> 时间：2012-06-06T11:25:03.637
> 
> 标签：android, layout, screen-orientation

我想旋转按钮/文本视图/等。在屏幕方向更改时，但我想保持布局不变。如何做呢？我正在使用线性布局。

这就是我的意思： ![http://i46.tinypic.com/209hwnr.png](../Images/99965cd9406915379d013c7154b8d523.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T11:28:11.927

> 为横向模式创建`res->layout->layout-land`并放置您的 xml 文件

您在文件夹中的布局文件`layout`仅适用于纵向模式现在如果您需要横向然后创建`layout-land`文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:38:41.863

可以通过两种方式完成：

1.) 您可以在文件夹中定义一个新的 xml 文件`layout-land` 。

2.)`android:configChanges="orientation"`在 manifest.xml 中的活动标签中使用

然后在你的活动课上：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        ChangeToLandscape();
    } else {
        ChangeToPortrait();
    }
}

LayoutParams lp;
public void ChangeToLandscape() {
    lp = new LayoutParams(new ViewGroup.MarginLayoutParams(
            LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
    textView1.setLayoutParams(lp);
    lp.setMargins(0, 0, 0, 0); // Whatever you want
    // Similar for other views
}

//Similarly, implement `ChangeToPortrait()` 
```

希望能帮助到你 ！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:28:00.160

您必须更改布局参数。

# css - 容器 div 标签的 100% 高度和宽度不起作用

> ID：10913251
> 
> 赞同：6
> 
> 时间：2012-06-06T11:25:15.400
> 
> 标签：css, html, height, width

我的网页有以下布局。遵循 CSS 代码在 Internet Explorer 9 中给了我 100% 的高度和宽度。虽然在 FF 和 Chrome 中给了我 100% 的宽度，但不是 100% 的高度。我尝试了几个示例，其中大多数都有相同的问题。我在[http://jsfiddle.net/cwkzq/3/](http://jsfiddle.net/cwkzq/3/)上使用了相同的代码，如果我查看相同的 FF，它会给我 100% 的高度和宽度。

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title></title>
        <style type="text/css">
            html, body {
                height: 100%;
            }
            body {
                margin: 0;
                padding: 0;
                border: 1;
                background-color:Aqua;
            }
            .Container {
                width: 100%;
                height: 100%;
                border: solid 1px red;
                margin: 0 auto;
                padding: 0 1em;
                font: 12px/1.5 Verdana;
                background-color:red;
            }
        </style>
    </head>
    <body>
    <form id="form1" runat="server">
    <!--  Container    -->
    <div class="Container">
        <!--  TopMenu Bar    -->
        <div class="colorBar">
        asd
        </div>
        <!--  TopMenu Bar   -->
        <!--  Middle Part    -->
        <div class="MiddleWrapper">
            <!--  Left Title    -->
                <div class="Title">

                </div>
            <!--   Left Title   -->
            <!--   Large Image   -->
                <div class="ImageLeftWrapper">

                </div>
            <!--   Large Image   -->
            <!--  Logo Wrapper    -->
                <div class="LogoWrapper">

                </div>
            <!--   Logo Wrapper   -->
            <!--   Page Text Area  -->
                <div class="PageText">

                </div>
            <!--   Page Text Area   -->
            <!--  Search Bar    -->
                <div class="SearchBar">

                </div>
            <!--   Search Bar    -->
            <!--   Banner Images -->
                <div class="BannerImageWrapper">

                </div>
            <!--  Banner Images   -->
        </div>
        <!--  Middle Part    -->
        <!--   Menu Wrapper    -->
        <div class="MenuWrapper">

        </div>
        <!--   Menu Wrapper    -->
        <!--   Footer Section  -->
        <div class="FooterWrapper">

        </div>
        <!--  Footer Section  -->
    </div>
    <!--  Container   -->
    </form>
    </body>
    </html> 
```

如果有人能指出代码中的问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-06T11:27:39.063

仅当父元素也设置了高度时，将高度设置为百分比才有效。所以如果你想将 div 设置为 100% 的高度，你还必须将 form 和 body 设置为 100% 的高度。

# html - html 电子邮件中不需要的空格

> ID：10913257
> 
> 赞同：0
> 
> 时间：2012-06-06T11:25:36.820
> 
> 标签：html, rendering, html-email

我正在尝试发送 html 电子邮件，但遇到以下问题：

我有一个包含布局（切片中的图像及其链接）的 photoshop 文件，我用 Fireworks 打开它，然后导出为 Html。当我在浏览器（Firefox、Internet Explorer）中打开 Html 文件时，一切看起来都很好。但是，当我在 Sendblaster（我用来发送时事通讯的程序）中导入 Html 时，一些切片之间会出现不需要的空格。我尝试将电子邮件发送给自己，但同样的事情发生了。有什么想法可以解决这个问题吗？

这是关于两个切片之间出现空格的代码

```
 <td colspan="2" rowspan="5">
        <img src="images/MERCK-TEYXOS-final-outli-81.jpg" width="24" height="383" alt=""></td>
    <td>
        <img src="images/spacer.gif" width="1" height="14" alt=""></td>
</tr>
<tr>
    <td colspan="5" rowspan="4">
        <img src="images/MERCK-TEYXOS-final-outli-82.jpg" width="72" height="369" alt=""></td>
    <td>
        <img src="images/spacer.gif" width="1" height="290" alt=""></td>
</tr> 
```

这是表格的声明

```
 <table id="Table_01" width="885" height="2196" border="0" cellpadding="0" cellspacing="0"> 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:17:08.720

`alt`对于每个图像，在属性之后和结束标记之前添加以下内联 CSS 声明>

```
style="display:block;" 
```

这是一个影响 Hotmail 和 Gmail 的常见问题 - 添加 CSS 并不会真正影响任何其他客户端，但为了完整性，将它添加进去是件好事。值得在谷歌上搜索`email display:block`更多信息。

# asp.net - KnockOut.js 如何与 Telerik Asp.net MVC 扩展一起使用

> ID：10913261
> 
> 赞同：3
> 
> 时间：2012-06-06T11:25:41.340
> 
> 标签：asp.net, asp.net-mvc-3, telerik-grid, telerik-mvc, knockout-2.0

我正在为我目前广泛使用telerik asp.net mvc 扩展库的应用程序探索KnockOut。

几天来我一直在探索 KnockOut，但现在我遇到了一个问题，如何将 Telerik 的 mvc 网格与 KnockOut 绑定。我不想使用 KnockOut 网格 api，因为我的应用程序已经在许多不同的地方使用 Telerik 的 mvc 网格。那么淘汰赛数据绑定如何与 Telerik 的 mvc 网格一起工作呢？

# c# - 控制字符出现在 XDocument.Save() 中，但仅对 Unix 可见？

> ID：10913266
> 
> 赞同：0
> 
> 时间：2012-06-06T11:25:49.500
> 
> 标签：c#, linq-to-xml, control-characters

我正在使用保存一个简单的 XDocument

`xDoc.Save(result.Filename, SaveOptions.OmitDuplicateNamespaces);`

当我们打开文件并在 Windows 系统（Server2008 或 Win7）上处理它时，xml 是正确的，并且可以在下一个系统中正确处理。

但是，当我们迁移到生产系统（unix）时，xml 无法正确读取。

当我们`vi`在 unix 框上生成文件时，有三个前导控制字符。正确删除这些和 xml 进程。

我在 Notepad++ 中看不到这些字符（将文件显示为 ANSI/UTF8）。

有谁知道这些字符是什么，它们是如何到达那里的……以及如何删除它们或阻止它们出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:41:29.570

您可以省略 Unicode BOM，只需传递`new UTF8Encoding(false)`给 save 方法。

像这样的东西（请把它当作伪代码）：

```
using(var writer =  new StreamWriter(result.Filename, false, new UTF8Encoding(false))){
    xDoc.Save(writer , SaveOptions.OmitDuplicateNamespaces);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:30:14.670

这是 Unicode BOM（字节顺序标记）。

如果它在 Linux 中显示，请获取支持 Unicode 的编辑器/查看器。

# c# - 使用嵌套级别的属性值重命名 XML 元素

> ID：10913268
> 
> 赞同：-2
> 
> 时间：2012-06-06T11:26:08.673
> 
> 标签：c#, xml, xslt

我有一个`<div>`带有属性的嵌套级别元素的 xml 文档。我想按属性名称重命名 div 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:10:17.147

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="div">
  <xsl:element name="{@class}">
    <xsl:apply-templates select="node()|@*"/>
  </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时**：

```
<html>
  <div class="animal">
     Animals:
     <div class="mammal">
       Mammals:
        <div class="dog">
          Dogs
        </div>
        <div class="cat">Cats</div>
    </div>
  </div>
</html> 
```

**产生想要的正确结果**：

```
<html>
   <animal class="animal">
      Animals:

      <mammal class="mammal">
         Mammals:

         <dog class="dog">
                      Dogs

         </dog>
         <cat class="cat">Cats</cat>
      </mammal>
   </animal>
</html> 
```

**说明**：

正确使用**[标识规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**设计模式。

# jquery - 背景图像已预加载但再次加载

> ID：10913272
> 
> 赞同：0
> 
> 时间：2012-06-06T11:26:29.857
> 
> 标签：jquery, css

我正在预加载我知道正在缓存的背景图像，但我的代码没有从缓存中读取它。它再次加载它，就好像它没有被缓存一样。“imgSrcArray”实际上包含 8 个图像，但为了简单起见，我对这个示例进行了硬编码。

有人有想法么？

```
imgSrcArray = ["images/img0"]; 

//preload image
$.each(imgSrcArray, function (i, val) {
    $(function() { 
        $(document.body).append($("<img id='imgHid" + i + "'/>").attr("src", val).hide()) 
    }); 
});

$(document).ready(function(){
    $('#bkgrnddiv').css('backgroundImage', 'url(images/img0)');   
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:10:16.767

我已经稍微清理了你的代码，它只加载了一次图像。也许它与在循环中附加到文档负载有关。

[http://jsfiddle.net/Fuejf/](http://jsfiddle.net/Fuejf/)

```
var imgSrcArray = ['http://placekitten.com/200/300'];

function preload() {
    $.each(imgSrcArray, function(i, val) {
            $('body').append($("<img id='imgHid" + i + "'/>").attr("src", val).hide())

    });
}

$(function() {
    console.log('document loaded');
    preload();
});

$(document).ready(function() {
    console.log('document ready');
    $('#bkgrnddiv').css({
        'background': 'transparent url(' + imgSrcArray +') no-repeat 0 50%'
    });
});​ 
```

# c - 为什么不能使用指向 char 指针的指针而不是 char 指针数组？

> ID：10913277
> 
> 赞同：8
> 
> 时间：2012-06-06T11:26:45.350
> 
> 标签：c, pointers

当我尝试以下代码中的第二个选项进行初始化`names`时，我得到一个分段错误。我猜第二个选项在概念上有些不正确。有任何想法吗？

```
 char *names[] = {
            "Alan", "Frank",
            "Mary", "John", "Lisa"
        };

 char **names = {
            "Alan", "Frank",
            "Mary", "John", "Lisa"
        }; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T11:32:06.467

是的。在第一种情况下，您有一个指针数组。每个指针指向一个单独的项目（艾伦，弗兰克...）

第二次声明

```
char **names; 
```

意味着名称是指向指针的指针[您不能像这样初始化一组字符串]。如在

```
char *str = "hello"
char **names = &str; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T11:42:43.940

在第一种情况下，您有一个`char*`. 这意味着，您已经为 5 个 char* 变量（数组的条目）分配了内存，一个接一个地整齐地坐在内存中。此外，它们中的每一个都被初始化为每个字符串的开头。

在第二种情况下，您有一个 char** 类型的指针。您只有足够的内存用于一个指针。

（我已经跳过讨论为每个字符串分配的内存。在这两种情况下可能相同，但在这里无关紧要）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T11:32:40.340

它具有完全不同的内存布局。

你的第一个例子是一个指针数组。它占据 5 倍的大小`char *`。

`char *`但是，您的第二个示例是指向预期一个或多个位置的指针。无法按照您的方式对其进行初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T12:01:18.300

它不会导致 gcc 出现段错误。然而，用整数数组尝试同样的 this 可能会说明为什么它没有多大意义：

```
char* names[] = { "Dennis", "Richie" };
char** more_names = { "Sarah", "O'connor" };

printf("Name: %s %s\n", names[0], names[1] );
printf("Name: %s %s\n", more_names + 0, more_names + 1);

int numbers[] = { 0, 1 };
int x = 2, y = 3;
int* more_numbers = { &x, &y };

printf("Numbers: %d, %d\n", numbers[0], numbers[1] );
printf("Numbers: %d, %d\n", *(more_numbers + 0), *(more_numbers + 1)); 
```

奇怪的是，这个例子实际上为整数数组产生了预期的结果。但是 gcc 确实会产生警告。

# c++ - 在 C++ Direct3D 应用程序上覆盖透明 Wpf

> ID：10913287
> 
> 赞同：2
> 
> 时间：2012-06-06T11:27:04.400
> 
> 标签：c++, wpf, direct3d

我能够通过 C++ Direct3D 应用程序运行透明 WPF 应用程序，但帧速率从 60FPS 下降到 14FPS。有什么方法可以提高性能吗？我不想在 C++ 中创建 UI，我也想要透明控件。

# sql-server - 如何备份每张表100行的数据库？

> ID：10913292
> 
> 赞同：5
> 
> 时间：2012-06-06T11:27:36.337
> 
> 标签：sql-server

我想备份一个 SQL Server 数据库，其中包含所有对象以及数据，但所有表中的数据应限制为每个表 100 行。我可以很容易地在 mysql 中做到这一点，但在 SQL Server 中我不知道该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T12:45:36.313

您不能真正`BACKUP DATABASE`为此使用显式。但是你可以做这样的事情 - 但是请记住 - 正如我的评论 - 如果你依赖任何类型的数据完整性，这些数据的用途将是有限的，因为排序将是相对任意的，除非一切都是 1:1并且您碰巧对所有查询进行了神奇的方便排序，这将是一个庞大的数据大杂烩：

```
CREATE DATABASE copy_of_original;
GO

USE original_db;
GO

DECLARE @sql NVARCHAR(MAX);
SET @sql = N'';

-- this assumes all tables are in `dbo` schema:
SELECT @sql = @sql + CHAR(13) + CHAR(10)
  + 'SELECT TOP (100) * INTO copy_of_original.dbo.' 
  + QUOTENAME(name) + ' FROM dbo.' + QUOTENAME(name) + ';'
FROM sys.tables
WHERE schema_id = 1;

PRINT @sql;
-- EXEC sp_executesql @sql; 
```

完成此操作后，您可以备份`copy_of_original`- 但请记住，原始数据库中不存在任何索引或约束，并且`TOP`将从每个表（或整个表）中选择任意一组 100 行，对于少于 100 行的小表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:59:26.940

你可以试试这个解决方案

1.  请创建您的数据库的副本

2.  在您的数据库副本中执行以下代码以从表中删除超过 100 行的行。

    sp_msforeachtable
    '改变表？NOCHECK CONSTRAINT ALL ; WITH [DUMMYTABLE] AS (SELECT RN = ROW_NUMBER() OVER (ORDER BY NEWID()), * FROM ?) DELETE FROM [DUMMYTABLE] WHERE RN > 100 ALTER TABLE ? 检查所有约束'

3.  备份您的新数据库。

**限制：** *当我们禁用约束并从数据库中删除行时，备份数据库的数据完整性问题。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:30:26.890

对于 SQL Server，我会使用工具“bcp”

不过，这需要一些编码：为每个表生成前 100 个选择语句并创建一个批处理文件

# ksh - SUA-Korn shell 不保留环境变量

> ID：10913295
> 
> 赞同：1
> 
> 时间：2012-06-06T11:27:42.947
> 
> 标签：ksh, sua

我在 Windows 上使用 SUA-Korn shell，其中我在 .profile 中将别名设置为 alias sqlplus='sqlplus.exe'

因此，当我启动 SUA-Korn shell 并运行 sqlplus 时，它会调用 sqlplus.exe 并且工作正常，但是当我将相同的命令放入 .ksh 文件并运行时，它会给出“未知命令 sqlplus”的错误

下面是 .ksh 文件

```
#!/bin/ksh
sqlplus main/main@SID9 @script.sql 
```

如果我在 SUA-Korn shell 中执行上面的 test.ksh 作为

```
. test.ksh 
```

然后它工作正常但是

```
test.ksh 
```

给

> 未知命令 sqlplus。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:28:10.063

不幸的是，别名仅在交互式 shell 中有效。我建议改用函数或变量。这两个都将转换为您的 shell 脚本。

在您的**.profile 中：**

```
sqlplus="sqlplus.exe" 
```

在您的**脚本**中：

```
eval $sqlplus main/main@SID9 @script.sql 
```

试一试。

# mysql - 多对多关系SQL查询

> ID：10913308
> 
> 赞同：3
> 
> 时间：2012-06-06T11:28:17.167
> 
> 标签：mysql

我正在尝试创建一个可以在多对多关系数据库中获取结果的查询。
到目前为止，我得到了以下内容：
一张带有歌曲的表格，一张带有标签的表格和一个“链接”表格，因为一首歌曲可以有多个标签，一个标签可以属于多首歌曲。

它看起来像这样：

```
Songs       Link        Tags
=======     =====       =========
Sid          Sid        Tid
Songname     Tid        Tagname 
```

现在假设您有 3 首歌曲 AB 和 C 以及 3 个标签：X、Y 和 Z。
歌曲 A 有标签 Y，歌曲 B 有标签 Z，歌曲 C 有标签 X 和 Z。

我设法创建了一个查询，以仅通过一个标签获取一首歌曲（例如 Z 给出 B 和 C）。
但是，当输入多个标签（例如，输入（搜索）字段）时，我如何创建一个搜索歌曲的查询。

我已经搜索过几次命令 INTERSECT 和 INNER JOIN 出现了，但我无法成功创建查询。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T11:33:31.380

这是您的基本多对多选择语句。

```
select s.*, t.*  
from songs s
join songs_tags st on s.songId = st.songId
join tags t on t.tagId = st.tagId
-- optional where clause
where s.name = 'my song' 
```

当 where 子句基于标签时，翻转它

```
select s.*, t.*  
from tags t
join songs_tags st on s.songId = st.songId
join songs s on s.songId = st.songId
-- optional where clause
where t.name = 'whatever' 
```

如果要返回所有带有多个标签的歌曲，只需更改 where 子句：

```
select s.*
from tags t
join songs_tags st on s.songId = st.songId
join songs s on s.songId = st.songId
where t.name in ('tag1', 'tag2', 'tag3') 
```

返回带有特定标签的特定歌曲，例如，如果您想按名称和标签搜索

```
select s.*, t.*  
from songs s
join songs_tags st on s.songId = st.songId
join tags t on t.tagId = st.tagId
where s.name like '%mysong%' and t.name in ('tag1', 'tag2') 
```

您还可以过滤连接表本身，有时是必要的：

```
select s.*, t.*  
from songs s
join songs_tags st on s.songId = st.songId
join tags t on t.tagId = st.tagId and t.name in ('tag1', 'tag2')
where s.name like '%mysong%' 
```

查找没有标签的歌曲

```
select s.*
from songs s
left join songs_tags st on s.songId = st.songId
where st.songId is null 
```

要查找具有所有标签的歌曲：

```
select s.*
from songs s
join songs_tags st1 on s.songid = st1.songid
join songs_tags st2 on s.songid = st2.songid
join songs_tags st3 on s.songid = st3.songid
where st1.tagid = 1 and st2.tagid = 2 and st3.tagid = 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T11:41:26.657

这将获取与**任何**标签匹配的所有歌曲，并首先返回与所有标签匹配的歌曲：

```
SELECT s.Sid, s.Songname
FROM Songs s
JOIN Link l ON ( l.Sid = s.Sid )
JOIN Tags t ON ( t.Tid = s.Tid )
WHERE t.Tagname IN ( 'X', 'Y' )
GROUP BY s.Sid, s.Songname
ORDER BY COUNT(1) DESC 
```

* * *

这个只会返回那些匹配**所有**标签的歌曲：

```
SELECT s.Sid, s.Songname
FROM Songs s
JOIN Link l ON ( l.Sid = s.Sid )
JOIN Tags t ON ( t.Tid = s.Tid )
WHERE t.Tagname IN ( 'X', 'Y' )
GROUP BY s.Sid, s.Songname
HAVING COUNT(1) = 2 -- 'X' and 'Y' 
```

如果您生成此查询，您也必须生成计数（`2`在我的情况下）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T11:32:38.327

```
SELECT DISTINCT s.Sid, s.Songname 
FROM 
    Songs s join Link l on s.Sid=l.Sid 
    join Tags t on t.Tid=l.Tid 
WHERE t.Tagname in ('Z', 'Y'); 
```

这将返回所有带有标签 Z 或 Y 的歌曲

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T11:33:07.690

```
select distinct songs.* 
from songs 
inner join link on link.sid = songs.sid 
inner join tags on tags.tid = link.tid
where tagname IN ('a','b','c') 
```

像这样的东西？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T11:46:06.043

你可以试试这个-

```
select a.Sid, a.SongName, c.Tid, c.TagName  
from Songs a
LEFT OUTER JOIN Links b ON a.Sid = b.Sid 
LEFT OUTER JOIN Tags c ON b.Tid = c.Tid 
WHERE c.TagName IN ('Tag1', 'Tag2', ...... ) // as many tags you want 
group by a.Sid, a.SongName, c.Tid, c.TagName 
```

# php - PHP shell_exec 输出问号

> ID：10913309
> 
> 赞同：0
> 
> 时间：2012-06-06T11:28:17.490
> 
> 标签：php, bash, encoding, shell-exec

我正在使用一个调用外部程序的 PHP 脚本，`shell_exec`我对它的输出很感兴趣。问题是当我使用俄语字母时，输出总是以问号形式出现。

整个过程在 Ubuntu 11.10 上运行，当外部程序在 bash 中执行时，它会产生正确的输出（没有问号）。

这是我的代码：

```
setlocale(LC_ALL, "en_US.UTF-8");
echo morpher("Антон");

function morpher($command) {
    static $path = '/usr/bin/mono %sengine/helpers/language/morpher.exe %s';
    $path = sprintf($path, SITE_ROOT, $command);

    $output = shell_exec($path);

    error_log($output) // series of question marks instead of russian letters
    error_log( mb_detect_encoding($output) ); // outputs ASCII
    error_log( iconv('ASCII', 'UTF-8', $output) ); // same question marks

    return explode("\n", $output);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:32:03.157

`LANG="en_US.UTF8"`通过像这样添加解决：`'LANG="en_US.UTF8" mono %sengine/helpers/language/morpher.exe %s';`

# css - z 索引即 7 对话框 div

> ID：10913311
> 
> 赞同：0
> 
> 时间：2012-06-06T11:28:23.090
> 
> 标签：css, internet-explorer-7

对话框 div 中的文本仅在 IE 7 中显示在页面上的文本下方。

查看此 [页面](http://www-test.flypeach.com/newsletter/registration.aspx) 并单击左侧的任何文本框。

我尝试在 div.dialogFromAndTo 元素上更改 skin.css 文件中的 z-index，但这没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:36:46.140

你可能需要 clearFix 你的`<div id="dialogFrom">`，因为那里有浮动的元素。

这篇旧文章：[http](http://www.positioniseverything.net/easyclearing.html) ://www.positioniseverything.net/easyclearing.html解释了这个概念，您可以通过谷歌搜索找到不同的方法来应用 clearFix 方法

编辑尝试添加这个：

```
div.dialogFromAndTo {
    overflow: hidden;
} 
```

或者可能`zoom: 1`触发 hasLayout - 我不知道您是否已经拥有它，因为我目前无法访问您的页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:40:18.640

我只将它用于 IE 7，它是一个 hack，但可以，有没有更好的方法？

```
*  {
  *z-index:13; 
} 
```

# xml - 如何获取属性值并在动态生成的 xml 文件中替换它？

> ID：10913312
> 
> 赞同：1
> 
> 时间：2012-06-06T11:28:30.850
> 
> 标签：xml, c#-4.0

我有一个 xml 文件。我必须搜索一个属性并使用 c# 将其值替换为某个值此外，我不知道该属性出现了多少次以及动态生成该 xml 时有多少元素。对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T11:46:18.383

一种方法是将文档加载到实例中，然后通过使用带有 XPath 表达式的实例的方法来[`System.Xml.XmlDocument`](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)查找相应属性的所有出现并相应地修改它们。[`SelectNodes`](http://msdn.microsoft.com/en-us/library/hcebdtae.aspx)`XmlDocument`

这是一个例子：

假设以下 XML 文档：

```
<?xml version="1.0"?>
<test>
    <a/>
    <b myAttribute="someValue"/>
    <c myAttribute="someOtherValue"/>
    <d/>
    <e>
        <f myAttribute="yetAnotherValue" anotherAttribute="anIrrelevantValue"/>
    </e>
</test> 
```

将 Xml 文档另存为`test.xml`. 在同一目录下，编译以下程序。它将更改所有被调用的属性的值`myAttribute`（由 XPath 表达式选择`//@myAttribute`）：

```
using System;
using System.Xml;

class Program
{
    public static void Main(string[] args)
    {
        XmlDocument doc = new XmlDocument();
        doc.Load("test.xml");

        Console.WriteLine("Before:");
        Console.WriteLine(doc.OuterXml);

        foreach (XmlNode node in doc.SelectNodes("//@myAttribute")) {
            node.Value = "new value";
        }

        Console.WriteLine("After:");
        Console.WriteLine(doc.OuterXml);

        doc.Save("test.xml");

        Console.ReadLine();
    }
} 
```

（为方便起见，还输出了修改前后的xml文档。）

**使用命名空间**

现在，该示例使用名称空间进行了扩展（根据 OP 的要求，XLink 之一）：

xml文件：

```
<?xml version="1.0"?>
<test xmlns:xlink="http://www.w3.org/1999/xlink">
    <a/>
    <b xlink:myAttribute="someValue"/>
    <c myAttribute="someOtherValue"/>
    <d/>
    <e>
        <f xlink:myAttribute="yetAnotherValue" anotherAttribute="anIrrelevantValue"/>
    </e>
</test> 
```

C#代码：

```
using System;
using System.Xml;

class Program
{
    public static void Main(string[] args)
    {
        XmlDocument doc = new XmlDocument();
        doc.Load("test.xml");

        Console.WriteLine("Before:");
        Console.WriteLine(doc.OuterXml);

        XmlNamespaceManager nsMgr = new XmlNamespaceManager(doc.NameTable);
        nsMgr.AddNamespace("xlink", "http://www.w3.org/1999/xlink");
        foreach (XmlNode node in doc.SelectNodes("//@xlink:myAttribute", nsMgr)) {
            node.Value = "new value";
        }

        Console.WriteLine("After:");
        Console.WriteLine(doc.OuterXml);

        doc.Save("test.xml");

        Console.ReadLine();
    }
} 
```

备注 1：注意`myAttribute`现在只修改了两次调用的属性，第三次（在`<c>`元素中）不属于 XPath 表达式中指示的名称空间。

备注 2：Xml 文件和 C# 代码中使用的命名空间前缀恰好是相同的（`xlink`），但这不是必需的。例如，您可以`xl`在 C# 代码中使用并获得相同的结果（仅显示更改的行）：

```
nsMgr.AddNamespace("xl", "http://www.w3.org/1999/xlink");
foreach (XmlNode node in doc.SelectNodes("//@xl:myAttribute", nsMgr)) { 
```

# php - 如何阻止人们访问正常路径但允许它在 Mod-Rewrite 中使用

> ID：10913316
> 
> 赞同：1
> 
> 时间：2012-06-06T11:29:08.670
> 
> 标签：php, .htaccess, url, mod-rewrite

我正在使用 mod-rewrite 来制作真正的网址

```
www.example.com/public/questions.php?question_id= <int> 
```

去

```
www.example.com/questions/ <int> 
```

那么怎么可能禁止以前的地址用作 REQUEST_URI 并只允许它们通过我的新缩短的 url？

如果我提出一个规则

```
RewriteRule ^public public/page404_ready.php 
```

这也使我当前更改的所有网址都没用。

（如果我确实完成了这一切，我是否必须将页面中所有我自己的（AJAX）链接更改为新的 URL？）

这是我现在的文件

```
RewriteRule ^questions/topics/(.+)/?$ public/questions.php?topics=$1 [NC,L]
RewriteRule ^questions/ask/?$ public/ask_question.php [NC,L]
RewriteRule ^questions/edit/([0-9]+)/?$ public/edit_question.php?question_id=$1 [NC,L]
RewriteRule ^questions/posts/edit/([0-9]+)/?$ public/edit_post.php?post_id=$1 [NC,L]
RewriteRule ^users/edit/([0-9]+)/?$ public/edit_profile.php?user_id=$1 [NC,L]
RewriteRule ^(admin)/?$ public/$1/index.php [NC,L]
RewriteRule ^(admin)/(\w+)/?$ public/$1/$2.php [NC,L]
RewriteRule ^(admin)/(\w+)/(\d+)/?$ public/$1/$2.php?topic_id=$3 [NC,L]

RewriteRule ^([\w\-]+)/?$ public/$1.php [NC,L]

#RewriteRule ^public public/page404_ready.php [L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:45:52.490

我不明白你到底想用这个规则做什么：

```
RewriteRule ^public public/page404_ready.php 
```

您可以使用以下代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# this is your current rule
RewriteRule ^questions/([0-9]+)/?$ public/questions.php?question_id=$1 [L,NC,QSA]

# this is the URL you want to block
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+public/questions\.php\?question_id=[0-9]+[&\s] [NC]
RewriteRule ^ - [F] 
```

# java - Executing batch file from runnable jar gives path not found error

> ID：10913320
> 
> 赞同：0
> 
> 时间：2012-06-06T11:29:15.233
> 
> 标签：java, jar, batch-file, executable-jar

I am executing a batch file from java program. When I execute from eclipse it works fine but when I make it a runnable jar it is not able to find the path of the batch file

I kept the batch file as a resource in the source directory. When I print the path of the resource using Class.getResource("/resource/mybat.bat") it gives the path correctly as

*   ***resources/mybat.bat***(jar creation option : package required library into generated jar)
*   ***file:/C:/Users/aasha.medhi/Desktop/myjar.jar!/resources/mybat.bat***(jar creation option : Extract required libraries into generated jar)

If I extract the jar, the resources folder exist.

However when I try to run the jar, it gives "The system cant find the path specified error" for the batch file

I have gone through most of the links and tried out different options but without any luck. I just need a way to create the runnable jar properly.Please help..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:36:09.973

While Java can read JARs and treat them just as the normal file system, most other applications cannot. In this case `cmd` can't. You have to extract the batch to a temporary location and run it from there.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:36:15.703

If I understood correctly you have that batch file inside the jar, which should make it available on the classpath (check META-INF manifest file for that).

Once you have the resource available, in your case the batch file, you can reach it via ClassLoader. Inside your class that should trigger the batch file put the following:

```
this.getClass().getClassLoader().getResource(name) 
```

# java - 如何从 spring mvc 安全配置生成权限矩阵？

> ID：10913322
> 
> 赞同：2
> 
> 时间：2012-06-06T11:29:20.740
> 
> 标签：java, spring, spring-mvc, spring-security

在我们的项目中，我们混合了基于 xml 和注释的 spring mvc 安全配置。我们有很多角色，很多控制者，以及关于谁应该能够做什么的经常变化的要求。我认为拥有 util 类会很好地生成[这样](http://permissionmatrix.jpg.to/)的权限矩阵。

到目前为止，我所做的是编写简单的[类路径扫描器](https://stackoverflow.com/questions/259140/scanning-java-annotations-at-runtime)，它查找所有标有[@Controller](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-context/3.0.0.RELEASE/org/springframework/stereotype/Controller.java)的类并提取[@PreAuthorize](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework.security/spring-security-core/3.0.0.RELEASE/org/springframework/security/access/prepost/PreAuthorize.java)的值。控制器的命名约定很简单：{Action}{Type}Controller（例如 NewOrderController）因此很容易生成人类（我指的是非程序员）可读的 csv 文件。

问题是对注释的类路径扫描并没有涵盖我们在 xml 配置中得到的内容。

我想知道是否有任何其他方法可以查询 spring mvc 本身用于访问解析的元数据。

**编辑**：

示例 xml 配置（大大简化）：

```
<security:http pattern="/static/**" security="none" />

<security:http auto-config="false"
               use-expressions="true"
               entry-point-ref="entryPoint"
               security-context-repository-ref="securityContextRepository">
    <security:intercept-url pattern="/product/**" access="hasAnyRole('PRODUCT_USER')" />
    <security:intercept-url pattern="/admin/**" access="hasAnyRole('ADMIN_USER')" />
    <!-- No security configuration for /order/** -->
</security:http> 
```

注释驱动配置示例：

```
@Controller
@RequestMapping("/order/new/{id}")
public class NewOrderController {

    @Autowired
    public NewOrderController() {
    }

    @RequestMapping(method = RequestMethod.GET)
    @PreAuthorize("hasRole('ORDER_USER')")
    public ModelAndView display() {
        return new ModelAndView(/*...*/);
    }

    @RequestMapping(method = RequestMethod.POST)
    @PreAuthorize("hasRole('ORDER_USER')")
    public RedirectView process() {
        return new RedirectView(/*...*/);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:47:25.077

我想[这个答案](https://stackoverflow.com/a/6898824/248082)将帮助您构建解决方案来解析和加载 URL 拦截器上的元数据，以便收集配置的角色。

# sql - 更新特定列

> ID：10913323
> 
> 赞同：0
> 
> 时间：2012-06-06T11:29:21.440
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

如何控制只更新表的特定列？

我的方法是：为这些表创建而不是更新触发器，并控制仅更新可更新列，如果更新，不可更新列引发错误并带有适当的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:32:55.060

是的，您可以使用触发器来实现这一点，但不要使用`INSTEAD OF`触发器。您可以更好地使用`FOR UPDATE`触发器，因为您不必重写整个更新查询。您只想拒绝不允许的更新。如果允许执行某项操作，则不会引发错误，因此数据将照常更新。

例子：

```
CREATE TRIGGER [dbo].[CheckUpdate] ON [dbo].[MyTable] FOR UPDATE AS

DECLARE @EXPECTED INT = (SELECT COUNT(0) FROM INSERTED)
DECLARE @ALLOWED INT = (
   SELECT COUNT(0)
   FROM INSERTED i 
   INNER JOIN DELETED d 
   ON i.Id = d.Id
   WHERE i.Name = d.Name -- The readonly column
) 

IF(@EXPECTED <> @ALLOWED) -- True if there are not allowed records to updated
BEGIN
    -- Prevent the record will be updated
    RAISERROR ('Readonly columns cannot be changed',11, 1);
    ROLLBACK
END
--Do nothing in the ELSE because everything seems to be OK
--(the record will be updated) 
```

您还可以使用`Stored Procedures`来控制某些表的更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:32:02.880

如果您想限制对数据库的更新，您通常会为更新和插入创建存储过程，并且只使用存储过程而不是表更新来更新数据。

# java - Spring中的全局事务

> ID：10913324
> 
> 赞同：1
> 
> 时间：2012-06-06T11:29:24.380
> 
> 标签：java, spring, transactions

如果事务产生多个线程，有没有办法在 Spring 中模拟全局事务。我知道这在 Spring 中是不可能的，但我想也许有一些解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:55:28.090

通常 Transaction 和其他上下文由容器保存在 ThreadLocal 中，并且在 Thread 执行期间对每个方法都可用。[如果您将使用 WorkManager API，则需要检查您的供应商是否支持将事务上下文传播到异步作业（我记得](http://docs.oracle.com/cd/E12840_01/wls/docs103/javadocs/commonj/work/WorkManager.html)规范中不需要它）。

另一种选择可能是查看 Spring 的[自定义 bean 范围](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch04s04.html)- 您可以尝试为您的操作实现自定义范围并在那里存储事务上下文。但这可能不是微不足道的。

更一般地说，需要将事务范围传播到异步线程听起来是不对的——通常异步操作要么是 CPU 密集型的，要么是长期存在的，也许可以在不需要事务的情况下更好地重新实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:31:17.227

Spring 不提供事务支持；它仅与现有机制（JTA、本地事务、模拟事务）相关联。因此，您受制于所使用的任何基础交易。

如果您在应用程序服务器中，其中一些允许在容器内执行并行处理。容器管理的线程池具有将容器资源（JNDI 上下文、事务等）传播到其他线程的优势。

例如，WebSphere 和 WebLogic 使用 WorkManager API： http: [//www.devx.com/Java/Article/28815/0](http://www.devx.com/Java/Article/28815/0) 虽然我似乎记得 Java EE 6 现在支持线程池（对此不确定，尽管）。

# symfony - Symfony2：NotFoundHttpException 的自定义 404 错误

> ID：10913328
> 
> 赞同：1
> 
> 时间：2012-06-06T11:29:32.767
> 
> 标签：symfony, http-status-code-404

到目前为止，当我抛出时，我的“TwigBundle”自定义 error404.html.twig 页面在生产模式下正确显示：

```
$this->createNotFoundException('whatevs'); 
```

但是，当 Symfony 抛出“NotFoundHttpException”时（例如每当找不到路由时），“找不到路由”页面确实会显示在 app_dev 上，提到“404 Not Found”，但在生产模式下它只显示一个空白页...

这似乎不正常，因为根据 Symfony 文档：“createNotFoundException() 方法创建了一个特殊的 NotFoundHttpException 对象，最终在 Symfony 内部触发 404 HTTP 响应。”

那为什么我没有得到同样的行为呢？有什么我想念的吗？

我正在使用主分支。

编辑：这是我的 security.yml 文件，我正在使用 FOSUserBundle 和 FOSFacebookBundle：

```
security:
providers:
    chain_provider:
        chain:
            providers: [fos_userbundle, my_fos_facebook_provider]
    fos_userbundle:
        id: fos_user.user_manager
    my_fos_facebook_provider:
        id: my.facebook.user

encoders:
    "FOS\UserBundle\Model\UserInterface": sha512

firewalls:
    public:
        pattern:   ^/
        fos_facebook:
            app_url: "http://apps.facebook.com/***/"
            server_url: "http://localhost/facebookApp/"
            login_path: /login
            check_path: /checkFb
            default_target_path: /
            provider: chain_provider
        form_login:
            login_path: /login
            check_path: /login_check
            provider: chain_provider
            remember_me:   true
            csrf_provider: form.csrf_provider
        remember_me:
            key:           %secret%
        anonymous: true
        logout: true
    login:                                           
        pattern:   ^/(login$|register|resetting)  
        anonymous: true

role_hierarchy:
    ROLE_ADMIN:       ROLE_ADMIN
    ROLE_SUPER_ADMIN: [ROLE_ADMIN, ROLE_ALOOW_TO_SWITCH]
    ROLE_USER:        ROLE_USER

access_control:
    - { path: ^/, role: [IS_AUTHENTICATED_ANONYMOUSLY] }
    - { path: ^/secured/, role: [IS_AUTHENTICATED_FULLY] } # This is the route secured with fos_facebook
    - { path: ^/facebook/,           role: [ROLE_FACEBOOK] } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:19:22.873

有同样的问题。请参阅[https://github.com/symfony/symfony/issues/5320](https://github.com/symfony/symfony/issues/5320)您可能在 errorpage 或 layout.html.twig 上调用 is_granted。阅读 Stof 如何解决这个问题的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T05:26:59.937

每个 Stof 在[https://github.com/symfony/symfony/issues/5320](https://github.com/symfony/symfony/issues/5320)：

> “您避免在错误页面中调用 is_granted （或者您仅在 app.user 不为空时才这样做，这会在没有令牌或令牌是匿名的情况下发生）。......问题是路由器之前运行“

# zooming - 只允许缩小直到界限

> ID：10913329
> 
> 赞同：0
> 
> 时间：2012-06-06T11:29:38.913
> 
> 标签：zooming, openlayers

我试图弄清楚，如何将缩放因子限制为边界（通过限制范围定义），这意味着你只能缩小，只要你不触摸视口两侧的边界。

我发现的是这个问题（[OpenLayers 中的最小/最大缩放级别](https://stackoverflow.com/questions/4240610/min-max-zoom-level-in-openlayers)），但不知何故我不知道如何让它工作。

我正在开发实际的 OpenLayers 2.11 版。

有什么解决办法吗？

# android - Intent Service 派生调用显式超类构造函数

> ID：10913334
> 
> 赞同：1
> 
> 时间：2012-06-06T11:29:51.143
> 
> 标签：android, android-intent, android-widget

我正在学习android，遇到了一个例子

```
public static class A extends IntentService {
    public A() {
        super("AppWidget$A");
    }
} 
```

有人可以告诉我为什么我们必须显式调用超类（IntentService）的构造函数吗？参数字符串是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T11:36:44.997

它仅用于调试。下面是使用它的 IntentService 源代码的一部分：

```
public abstract class IntentService extends Service {

    ...
    private String mName;
    ...

    /**
     * Creates an IntentService.  Invoked by your subclass's constructor.
     *
     * @param name Used to name the worker thread, important only for debugging.
     */
    public IntentService(String name) {
        super();
        mName = name;
    }

    ...

    @Override
    public void onCreate() {
        super.onCreate();
        HandlerThread thread = new HandlerThread("IntentService[" + mName + "]");
        thread.start();

        mServiceLooper = thread.getLooper();
        mServiceHandler = new ServiceHandler(mServiceLooper);
    }

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T06:15:54.013

IntentService 有一个带有字符串参数“name”的构造函数。我发现它的唯一用途是为 IntentService 命名工作线程。这个线程被命名为 IntentService [name]。

# iphone - 在 detailsviewcontroller 中进行更改时在 masterviewcontroller 中重新加载 tableview

> ID：10913338
> 
> 赞同：1
> 
> 时间：2012-06-06T11:30:05.643
> 
> 标签：iphone, uitableview, uisplitview

我正在使用拆分视图，并希望在详细视图中进行一些更改时重新加载主视图中的表格。

我对 masterview 进行回调以重新加载数据：

详细查看：

```
- (void) doneEditSite {
    [popCtrl dismissPopoverAnimated:YES];
    [editSiteVC release];
    [self.tableView reloadData];
    masterVC *tableList = [[masterVC alloc] init];
    [tableList refreshMV:nil];
    [tableList release];
} 
```

在 masterVC 中：

```
- (void) refreshMV:(id)sender {
    [self getAllMySite:nil];
    [self.tableView reloadData];
} 
```

numberOfSectionsInTableView 和 numberOfRowsInSection 被调用（我已经用 NSLog 检查过），但从未调用 cellForRowAtIndexPath。

我错过了什么？

谢谢，马克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:32:32.267

您不应该`alloc/init`使用新的主视图，而是获取对现有主视图的引用。

# php - 带有 MongoDB 子数组的 Codeigniter

> ID：10913340
> 
> 赞同：2
> 
> 时间：2012-06-06T11:30:12.567
> 
> 标签：php, codeigniter, mongodb, mongodb-php

我在 mongodb 中有以下类型的集合：

```
Array
(
[_id] => 4fcf383a5990581c0b000015
[user_id] => 1
[username] => admin
[password] => 21232f297a57a5a743894a0e4a801fc3
[first_name] => admin
[last_name] => admin
[address] => 
[address_2] => 
 [deshboard_report] => Array
    (
        [0] => Array
            (
                [report_ids] => 1
                [rpt_color] => color-red
                [rpt_status] => max
                [report_title] => Last Point
                [report_file] => last_location
            )
        [1] => Array
            (
                [report_ids] => 2
                [rpt_color] => color-green
                [rpt_status] => max
                [report_title] => Inactive Device
                [report_file] => inactive_devices
            )
    )
) 
```

我想搜索`report_ids`，搜索返回子数组`deshboard_report`怎么可能？

我使用这个库来连接：[https ://github.com/alexbilbie/codeigniter-mongodb-library](https://github.com/alexbilbie/codeigniter-mongodb-library)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:35:28.613

查询数组中的元素时，您的结果当前将默认返回整个文档。

您可以使用 $elemMatch 返回与具有特定报告 ID 的子数组匹配的整个文档。

JS shell 的示例 .. 查找带有 report_ids=2 的文档：

```
 db.collection.find({'deshboard_report': {"$elemMatch": {report_ids: 2}}}); 
```

# php - php 如果超过限制，则截断字符串并在末尾省略一些..类似于 ruby

> ID：10913342
> 
> 赞同：3
> 
> 时间：2012-06-06T11:30:14.940
> 
> 标签：php, ruby-on-rails, string, concatenation, trim

我在最近的 php 代码中多次需要这个功能，所以我正在寻找一个函数来完成这项工作，如果有的话..

如果字符串大于限制，则将其截断并放置一些省略文本，例如`...(continued)`..

就像在 ruby​​ 中一样，我们在字符串上有 truncate 函数

```
"And they found that many people were sleeping better.".truncate(25, :omission => "... (continued)") 
```

我可以通过首先检查长度超过..然后修剪，然后连接来做到这一点......但我正在寻找一些类似的功能..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:48:55.827

```
function truncate($string,$length=100,$appendStr="..."){
    $truncated_str = "";
    $useAppendStr = (strlen($string) > intval($length))? true:false;
    $truncated_str = substr($string,0,$length);
    $truncated_str .= ($useAppendStr)? $appendStr:"";
    return $truncated_str;
} 
```

您甚至可以编辑该功能，以便您可以选择以确切的最大长度剪切或尊重单词边界......
选择基本上是你的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:32:04.013

```
function substr_with_ellipsis($string, $chars = 100)
{
    preg_match('/^.{0,' . $chars. '}(?:.*?)\b/iu', $string, $matches);
    $new_string = $matches[0];
    return ($new_string === $string) ? $string : $new_string . '&hellip;';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T13:38:41.597

```
class StringHelper
{

    public static function truncate($string, $length = 100, $append = "...")
    {
        if (strlen($string) <= intval($length)) {
            return $string;
        }

        return substr($string, 0, $length) . $append;
    }

} 
```

我在 Yii 框架中使用的用于截断的静态通用方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-05-28T21:40:59.013

建立在[@OkekeEmmanuelOluchu 的回答之上](https://stackoverflow.com/a/10914550/713874)。有点短和干净：

```
function truncateString($string, $length = 100, $append = "..."){
    $truncated_str = substr($string, 0, $length);
    $truncated_str .= strlen($string) > intval($length) ? $append : "";
    return $truncated_str;
} 
```

# php - 使用 jQuery(view) 创建的 cookie 在第一次尝试时无法在 php(controller) 中访问

> ID：10913348
> 
> 赞同：4
> 
> 时间：2012-06-06T11:30:25.153
> 
> 标签：php, javascript, jquery, cookies

我在 Chrome 和 Firefox 上遇到了一个奇怪的问题，改变它可以正常工作 IE。[ **Edit1**：IE有时也会出现问题]

**前提：**

*   在我的 homepageView.php 中，我使用 jQuery 创建了一个 cookie，比如 Cookie1。
*   我的主页有一个应用程序的链接，我们称之为 App1。
*   Cookie1 在 App1 的控制器中被访问，如果没有找到它会重定向回主页。

**问题陈述**

*   清除缓存
*   转到主页（已创建 Cookie1）
*   单击指向 App1 的链接。
*   App1 被重定向到主页（App1 无法访问 Cookie1）
*   **再次**点击 App1 链接，App1 工作正常。

**片段**

*主页视图.php*

```
 createCookie('loggedin_ind', true);

   function createCookie(name,value,days) {
        if (days) {
           var date = new Date();
           date.setTime(date.getTime()+(days*24*60*60*1000));
           var expires = "; expires="+date.toGMTString();
        }
        else{
           var expires = "";
        }
        document.cookie = name+"="+value+expires+"; path=/";

    } 
```

*App1Contoller.php*

```
function index()
{
    if(isset($_COOKIE["loggedin_ind"]))
    {
        //Display App1
    }
    else
    {
        redirect('http://localhost/Sitename');
    }
} 
```

任何人都可以请建议为什么 cookie 仅在第一次不被写入（通过 jQuery）**或**不被读取（通过 php）？从第二次开始它工作正常。

它在我的本地主机上也可以正常工作，仅当代码迁移到服务器时才会出现问题。

**Edit2：**我用**session替换了***cookie*逻辑，但问题仍然存在。

 ****Edit3：**我有一种强烈的感觉，这是一个**与服务器相关的问题**。我在我的 hostgator 共享主机上托管了相同的代码，它在那里工作正常，这个问题只发生在我的 godaddy VDS 上。谁能建议我如何检查我的两个服务器上的 cookie/会话处理方式是否不同。谢谢。

非常感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T07:40:22.573

我检查了你的代码，代码没有问题，服务器端有问题

以下是一些步骤，请查看并与您现有的配置进行比较

**步骤1 ：-**

使用输出缓冲在调用此函数之前发送输出，所有输出到浏览器的开销都在服务器中缓冲，直到您发送它。您可以通过在脚本中调用**ob_start()**和**ob_end_flush()**来完成此操作，或者在 php.ini 或服务器配置文件中设置 output_buffering 配置指令。

**第2步：-**

PHP 指令**register_globals 设置为 on**然后 cookie 值也将变为变量。

**在您的情况下最重要**

设置值为 FALSE 的 cookie 将尝试删除 cookie，**您不应使用布尔值。相反，使用 0 表示 FALSE，使用 1 表示 TRUE。**

希望对你有帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:09:59.777

我的一个项目也有类似的问题。我从我的主页发布到一个 php 脚本，然后根据 php 页面的结果，它将被重定向回我的主页。重定向回我的主页时，我会丢失会话。

无论如何，您如何显示 App 1？

我发现我的错误是我使用绝对 url 而不是相对 url 引用我的 php 脚本，这将导致 php 脚本启动新会话，有效地覆盖我以前的会话。

当我将我的帖子网址从 **http://www.mysite.com/folder/script.php**更改为 **/folder/script.php 时**，我的会话将不再被覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T13:45:52.437

我认为查看在第一个和第二个请求中发送给 App1 的纯 HTTP-Headers 会很有帮助......

如果 cookie 在两个标头中都是持久的，则这是与服务器相关的问题。否则我会仔细看看浏览器。

请求应该看起来像这样：

```
GET /app1 HTTP/1.1
Host: default.localhost
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:13.0) Gecko/20100101 Firefox/13.0.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Cookie: loggedin_ind=1 
```

以下是 Firefox 的推荐扩展列表，用于查看纯 HTTP 标头：[哪些 Firefox 扩展可以转储 HTTP 响应？](https://stackoverflow.com/questions/1372446/what-firefox-extension-can-dump-http-responses) 我个人在大多数情况下都使用 Firebug。**

# iphone - iPhone中的ASP.net GridView水平滚动问题

> ID：10913352
> 
> 赞同：1
> 
> 时间：2012-06-06T11:30:31.707
> 
> 标签：iphone, asp.net, mobile, gridview

我在 iphone 中遇到了一个与我在 asp.net 3.5 中开发的移动网站相关的问题

参考购物车区域的截图： ![在此处输入图像描述](../Images/4c453dfdde28faa211c682bc24509eb9.png)

在桌面浏览器中查看相同的网格时，它显示滚动，但在 iPhone 中没有，其余区域消失。

网格视图代码：

```
<div class="tabularDataContainer">
    <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" class="tabularData">
        <tr class="tableH">
            <td width="39%" align="left" valign="top" class="tableH tableHL"><p>Workshop Name</p></td>
        <td align="left" valign="top" width="1%"class="tableHD">&nbsp;</td>
            <td width="19%" align="left" valign="top" class="tableH"><p>Date</p></td>
            <td align="left" valign="top" width="1%"class="tableHD">&nbsp;</td>
            <td width="19%" align="left" valign="top" class="tableH"><p>Attendee Name </p> </td>
            <td align="left" valign="top" width="1%"class="tableHD">&nbsp;</td>
            <td width="10%" align="left" valign="top" class="tableH"><p>City</p></td>
            <td align="left" valign="top" width="1%"class="tableHD">&nbsp;</td>
            <td width="10%" align="center" valign="top" class="tableH tableHR"><p>Amount</p></td>
       </tr>
    </table> 
<asp:GridView ID="grdCart" runat="server" AutoGenerateColumns="false" EmptyDataText="<br /> &nbsp;The Cart is Empty" ShowHeader="false" ShowFooter="false" GridLines="None" Width="100%" OnSelectedIndexChanging ="GrdCartRowCommand" OnRowDataBound="grdCartDatabound" DataKeyNames="wName,Date, sdat, endt, wDates, AttendeeName"    >
                                        <Columns >

                                        <asp:TemplateField>
                                        <ItemTemplate >
                                        <div style="width:100%; height:60px;">
                                        <div style="position:relative; width:100%;">
                                        <div style="position:absolute; top:0px; width:100%;" id="Container" runat="server" >
                                        <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0" class="tabularDataRounded" >

                                        <tr class="cartD">
                                        <td width="39%" align="left" valign="top">
                                            <table width="100%">
                                              <tr>
                                                <td align="left" valign="middle" width="5%" style="border-bottom:none;" class="cartcross"><p><asp:LinkButton id="lb_DeleteItem" runat="server" CommandName="Select" ><img src="images/delete.png" alt="Delete" class="del" width="100%" height="100%"></asp:LinkButton ></p></td>
                                                <td align="left" valign="middle"  width="95%" style="border-bottom:none;"><p><asp:DropdownList ID="ddl_wshops" runat="server" DataTextField="wName" cssclass="cartddl" style="display:block;" OnSelectedIndexChanged="ddl_AddNewWorkShop_SelectedIndexChanged" AutoPostBack="true"  >
                                                </asp:DropdownList></p></td>
                                              </tr>
                                            </table>                                </td>
                                        <td align="left" valign="middle" width="1%" ></td>
                                        <td width="19%" align="left" valign="middle" ><p><asp:DropdownList ID="ddl_wdat" runat="server" cssclass="cartddldat" AutoPostBack="true" OnSelectedIndexChanged="ChangeDateInItem"  >
                                                </asp:DropdownList></p></td>
                                        <td align="left" valign="middle" width="1%">&nbsp;</td>
                                        <td width="19%" align="left" valign="middle" ><p><asp:DropdownList ID="listbox_wAttendee" runat="server" cssclass="cartddldat" AutoPostBack="true" OnSelectedIndexChanged="ddlChangeAttendeeInItem"   >
                                                </asp:DropdownList> </p></td>
                                        <td align="left" valign="middle" width="1%">&nbsp;</td>
                                        <td width="10%" align="left" valign="middle" ><p><%#Eval("City")%></p></td>
                                        <td align="left" valign="middle" width="1%">&nbsp;</td>
                                        <td width="10%" align="right" valign="middle" style="padding-right:15px"><p>$<%#Eval("Amount")%></p></td>
                                      </tr>
                                      </table>
                                      <div> 
```

任何人指导我如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:01:15.783

我已经结束了这个问题只是使用

gridview 容器上的“溢出：滚动”属性，我搜索了很多这个问题，但我什么也没找到。

使用上述属性 iPhone 允许您用两根手指向左或向右水平滚动，但在 android 或其他手机中，用两根手指 LOL 没有任何反应。

# php - 当整个应用程序不需要解析时，PHP 用单引号替换双引号

> ID：10913356
> 
> 赞同：1
> 
> 时间：2012-06-06T11:30:47.500
> 
> 标签：php, performance, parsing, php-5.3

如果我在整个应用程序中有很多引用，例如下面的代码片段，在不需要解析的情况下，我使用双引号而不是单引号/撇号将所有这些双引号替换为单引号具有积极意义影响我的应用程序的性能？

```
$is_parkland = $info["is_parkland"]; 
```

我知道`"`在上面的示例中使用 是要求 PHP 解析双引号之间的内容。这种事情在我的遗留代码中的应用程序中很明显。

我的应用程序中有大约 300,000 行 PHP，实际上，我很想知道是否在必要时将它们*全部*替换，这会对我的应用程序产生显着或积极的影响吗？

值得付出努力吗？我正在使用 PHP 5.3.13。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:56:53.503

我认为性能差异并不显着。此外，如果应用程序性能令人满意且负载不高，那么无论如何都不会注意到增益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:40:25.703

PHP 基准测试：

[http://phpbench.com/](http://phpbench.com/)

看起来对于较新版本的 PHP，单引号和双引号之间几乎没有区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:42:23.567

单引号的速度比双引号快。数量不多，但使用 300k 行代码可能会产生重大影响。来源：[PHP 基准测试](http://phpbench.com/)

# html - 不想在标签的标题属性中显示 HTML

> ID：10913357
> 
> 赞同：4
> 
> 时间：2012-06-06T11:31:01.050
> 
> 标签：html, title

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:36:16.667

删除`title`属性。如果使用它，则取决于浏览器是否愿意将其用作工具提示，并且通常他们确实喜欢——这样的使用或多或少是`title`属性的基本思想。

如果具有该属性的特定原因，例如假设对搜索引擎的影响，那么您可以将该属性保留在 HTML 中，但使用该`removeAttribute()`方法使用客户端 JavaScript 将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:39:48.927

您应该删除工具提示中的 HTML，否则您需要一些基于 HTML 的提示插件，例如**Tipsy**。

Tipsy 是一个 jQuery 插件，用于基于锚标签的标题属性创建类似 Facebook 的工具提示效果。

项目页面： http: [//onehackoranother.com/projects/jquery/tipsy/](http://onehackoranother.com/projects/jquery/tipsy/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:43:17.903

您可以在标题中显示文本，然后可以删除该属性。

```
var ttext;
$('.toolLink').hover(function(){
  ttext = $(this).attr('title');
  //$('.showTitle').text(ttext); //use only if you are displaying the title text
  $(this).removeAttr('title');
},function(){
  $(this).attr('title', ttext);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T11:43:25.227

我面临同样的问题，这有点棘手，但我使用这样的 jquery 解决了这个问题。你没有用 jquery 标记这个问题，但我认为这对你有帮助。

```
 var attrTitleValue="";
 $('#YourAnchorTag').hover(function() {
                    attrTitleValue = $('#YourAnchorTag').attr("title");//Its depend upon you how you find your anchor tag
                    $('#YourAnchorTag').attr("title", "");
                }, function() {
                    $('#YourAnchorTag').attr("title", attrTitleValue);
                }); 
```

# java - Java Applet（在浏览器中）不适用于 Java 1.7

> ID：10913359
> 
> 赞同：2
> 
> 时间：2012-06-06T11:31:15.043
> 
> 标签：java, browser, applet, java-7

在浏览器（Firefox、Safari、Chrome ......）中启动我的 Soundrecorder-applet 时遇到了一些问题，我能够隔离问题，如下所述：

**问题：**

安装的java版本：***6u32***

编译后的java版本（applet）：6u32 OR 7u4

**结果：**该小程序在以下操作系统上运行没有任何问题：Windows、Linux、Safari、Chrome 和 Firefox 下的 OS x。

* * *

安装的java版本：***7u4***

编译后的java版本（applet）：6u32 OR 7u4

**结果：**该小程序不适**用于**以下操作系统：Windows、Linux、Safari 下的 OS x、Chrome 和 Firefox。

* * *

第一个结论：Applet 不适用于已安装的 Java **7u4**版本！

我还必须提到，我做了一些必要的修改来让我的代码在 java 7 下编译。

**build.xml - 文件：**

```
<target name="build" depends="base">
    <javac srcdir="${src}" destdir="${bin}" target="1.7">
    </javac>
</target> 
```

**org.eclipse.jdt.core.prefs：**

*   org.eclipse.jdt.core.compiler.codegen.targetPlatform=1.7

*   org.eclipse.jdt.core.compiler.compliance=1.7

*   org.eclipse.jdt.core.compiler.source=1.7

提示：不需要考虑***org.eclipse.jdt.core.prefs*** **，因为编译是使用Apache Ant Java library**进行的。

# javascript - javascript中对象的数学运算

> ID：10913360
> 
> 赞同：3
> 
> 时间：2012-06-06T11:31:24.670
> 
> 标签：javascript

我正在尝试像这样操作对象中的属性：

```
for (property in posts.data) {
    property = property+1+",";
    output += property;
}
document.write(output); 
```

属性是数字的：0、1、2 等。

在这种情况下，我想得到结果 1,2,3。但相反，我得到了 01、11、21 等......它似乎将该属性视为文本字符串而不是数字。为什么？我能做些什么呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T11:47:38.383

1.一元'+'运算符将字符串转换为整数

> ```
> for (property in posts.data) {
>    var t = +property + 1;
>    output += t+",";
> } 
> ```

2.Javascript的`parseInt`方法

> ```
> for (property in posts.data) {
>     var t = parseInt(property, 10)+ 1;
>      output += t+","; 
> } 
> ```

parseInt 函数 call(radix) 中的第二个参数将告诉函数遵循什么数字系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:38:48.853

用于在添加之前将其`parseInt`转换`property`为整数`1`。

演示：http: [//jsfiddle.net/mPSnL/](http://jsfiddle.net/mPSnL/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T11:39:07.507

`Parse`中的`property`变量`Int`。喜欢`parseInt()`

```
for (property in posts.data) {
    var p = parseInt(property)+1+",";
    output += p;
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T11:40:45.983

你可以强制字符串和 int

```
for (property in posts.data) {
  var v = parseInt(property, 10) + 1;
  output += v + ",";
} 
```

# php - PHP file_exists 不起作用

> ID：10913362
> 
> 赞同：7
> 
> 时间：2012-06-06T11:31:27.120
> 
> 标签：php

我正在尝试让个人资料照片显示在我正在开发的网站上的评论列表中。如果他们没有个人资料照片，我会显示一个标准图像，不幸的是，即使存在，图像总是会转到标准图像而不是个人资料。继承人的代码：

```
$reviewerPic = 'http://www.[URL].co.uk/images/members/' . $reviewPosterId . '/profilePic.jpg';
$default_pic = 'http://www.[URL].co.uk/images/background.jpg';
    if(file_exists($reviewerPic)){
        $reviewer_pic = '<img src="' . $reviewerPic . '" width="100px" style="float: left; margin: 20px;" />';
    }else {
        $reviewer_pic = '<img src="' . $default_pic . '" width="100px" style="float: left; margin: 20px;" />';
} 
```

非常通用的代码，但它似乎不起作用！它只是一直显示背景图像...

关于为什么 file_exists 不起作用的任何想法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-06T11:35:07.330

您正在使用的函数[file_exists](http://php.net/file_exists)使用物理路径，您需要提供的参数应该是可以找到文件的服务器上的地址，而不是 url

Sou你应该有类似的东西

```
/home/var/www/images/ 
```

代替

```
http://www.[URL].co.uk/images/ 
```

因此，您需要检查该文件是否存在于本地服务器上，然后您可以使用 url 使其对公众可用（在 img src 中）

您可以在手册页上看到此功能仅适用于**某些**URL 包装器，因此最好使用路径而不是 url（我想这取决于 allow url fopen 设置）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T11:36:37.387

`file_exists`不适用于 HTTP，

使用 :`$_SERVER["DOCUMENT_ROOT"]`访问主机中的 root

所以

```
$reviewerPic = $_SERVER["DOCUMENT_ROOT"].'/images/members/' . $reviewPosterId .  '/profilePic.jpg';
$default_pic = $_SERVER["DOCUMENT_ROOT"].'/images/background.jpg'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T11:34:47.423

File_exists 使用 /home/www/username/public_html/ 格式。您可能想从您的主机中检索它。

所以它会是这样的`/home/www/jack/public_html/[URL].co.uk/profilepic/id/profilePic.jpg`。

顺便说一句，不需要`.`在你的`echo '<img src=...`. 您可以在字符串中使用变量，您应该只`.`在需要使用函数或其他东西修改它时使用，例如`"string0".function($str....)."string1";`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T11:36:38.543

根据[file_exists](http://php.net/file_exists)的 PHP 手册，并非所有协议都支持该功能：

> 这个函数也可以与***一些***URL 包装器一起使用。请参阅 [支持的协议和包装](http://php.net/manual/en/wrappers.php)器以确定哪些包装器支持 stat() 系列功能。

[HTTP 包装器](http://php.net/manual/en/wrappers.http.php)不支持stat *：*

> 支持 stat() 否

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T11:35:44.437

`file_exists`PHP 函数仅适用于物理文件，例如或`/var/www/file.ext`不适`C:\WWW\File.ext`用于 HTTP 文件。它甚至不知道如何处理 HTTP 文件。

在这种情况下，如果您想知道文件是否存在，因为它将是一个 HTTP 响应，您可以尝试使用`curl`，如果它以 响应`404`，则找不到该文件。

有关更多信息，请查看以下内容： http: [//php.net/manual/en/function.file-exists.php](http://php.net/manual/en/function.file-exists.php)和 [http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T11:36:53.467

`file_exists`不支持远程 URL。

你可以试试这个：

```
if (fopen($reviewerPic, "r"))
   echo "File exists!"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-25T12:39:33.600

尝试简单的一种。

```
$reviewerPic = 'http://www.[URL].co.uk/images/members/' . $reviewPosterId . '/profilePic.jpg';
$default_pic = 'http://www.[URL].co.uk/images/background.jpg';
    if($fileopen = @fopen($reviewerPic)){
        $reviewer_pic = '<img src="' . $reviewerPic . '" width="100px" style="float: left; margin: 20px;" />';
       fclose($fileopen);
    }else {
        $reviewer_pic = '<img src="' . $default_pic . '" width="100px" style="float: left; margin: 20px;" />';
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-20T16:54:44.970

一个很好的处理方法就在这里~

```
<?php

$imgok="1.webp"; // Your actual image
$imgerr="template.webp"; // If image is missing
$dir="/assets/image/products/"; // Location of the image directory

$path = $_SERVER['DOCUMENT_ROOT'].$dir. $imgok; // Full Paths for processing

echo file_exists($path) ? $dir.$imgok : $dir.$imgerr; // Actual paths for domain to get the image

?> 
```

# java - 如何在 JUnit 中检查两个对象数组是否相等？

> ID：10913363
> 
> 赞同：2
> 
> 时间：2012-06-06T11:31:37.213
> 
> 标签：java, junit, equals, junit4, assert

我有一个 JAVA 类*NoName*，其对象具有方法*getProperties()*。*此方法返回一个属性*数组。当我现在有两个*NoName*实例时，如何使用*assertEquals*检查两个实例的*Property* -Arrays 是否相同？

`_assertEquals(inst.getProperties(), ance.getProrties())_`不会做这项工作，因为它已被弃用。

而且由于*NoName*类是一个库类，我无法覆盖*equals()*（据我目前为止，这似乎是此类问题的常用解决方案）。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T12:57:06.540

```
assertThat(ob1.getProperties(), 
    IsArrayContainingInOrder.contains(obj2.getProperties)); 
```

这是使用 Hamcrest 匹配器，我认为它是进行断言的更可取的方法，因为失败的输出更具描述性。

还有一个`IsArrayContainingInAnyOrder`if 顺序无关紧要。

[IsArrayContainingInAnyOrder](http://www.jarvana.com/jarvana/view/org/hamcrest/hamcrest-library/1.2.1/hamcrest-library-1.2.1-javadoc.jar!/org/hamcrest/collection/IsArrayContainingInAnyOrder.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:39:46.953

由于您正在讨论比较对象的内部结构，因此您可以覆盖类的`equals`方法`NoName`，并在其中比较两个对象的属性数组。但是，您也需要注意该`hashCode`方法。

`hasSameProperties(NoName obj)`或者，您可以简单地在类中创建一个辅助方法`NoName`，并在比较两个对象的属性数组后使该方法返回一个布尔标志。然后在 JUnit 中，您可以简单地使用该`assertTrue`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:48:59.603

```
Property[] one = inst.getProperties(), two = ance.getProperties();
assertEquals(one.length, two.length);
for (int i=0; i<one.length; i++) assertEquals("index #" + i, one[i], two[i]); 
```

这提供了基本的磨砂膏。如果您担心其他一些边缘条件（例如，数组可能为空，或者只要每个数组中的所有相同元素都允许数组具有不同的顺序），那么将需要一些额外的工作（例如，空检查，如果`Property`实现的排序`Comparable`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-23T10:20:46.513

Hamcrest 1.3 使用稍微不同的语法，一些例子：

```
import static org.hamcrest.collection.IsArrayContainingInOrder.arrayContaining;

...

@Test
public void inOrder1() {
    assertThat(new String[]{"foo", "bar"}, arrayContaining(equalTo("foo"), equalTo("bar")));
}

@Test(expected =  AssertionError.class)
public void inOrder2() {
    assertThat(new String[]{"bar", "foo"}, arrayContaining(equalTo("foo"), equalTo("bar")));
    // Expected: ["foo", "bar"]
    //      but: item 0: was "bar"
}

@Test(expected =  AssertionError.class)
public void inOrder3() {
    assertThat(new String[]{"foo", "bar", "lux"}, arrayContaining(equalTo("foo"), equalTo("bar")));
    // Expected: ["foo", "bar"] in any order
    //      but: Not matched: "lux"
}

@Test(expected =  AssertionError.class)
public void inOrder4() {
    assertThat(new String[]{"foo", "bar"}, arrayContaining(equalTo("foo"), equalTo("bar"), equalTo("lux")));
    // Expected: ["foo", "bar", "lux"] in any order
    //      but: No item matched: "lux" in ["foo", "bar"]
} 
```

# android - 在 Android NDK 上禁用 AVX

> ID：10913365
> 
> 赞同：0
> 
> 时间：2012-06-06T11:31:46.860
> 
> 标签：android, testing, gcc, toolchain

我无法通过 GCC 测试 (test_installed) - 在 AVX 测试中收到错误：

> 错误：“_mm_maskstore_pd”
> avxintrin.h:900 的参数 2 的类型不兼容注意：预期为“_ *m128d”，但参数的类型为“* _m128i”

如何禁用 AVX 测试或通过它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T07:09:50.543

我找到了答案。
我要做的就是应用[此补丁](http://gcc.gnu.org/ml/gcc-patches/2010-07/msg01791.html)来更改测试文件，以正确确定支持的 AVX。

# android - 如何在android中为Shapes编写相交

> ID：10913371
> 
> 赞同：0
> 
> 时间：2012-06-06T11:32:07.447
> 
> 标签：android, math, graphics, rotation, shape

我写了一个名为 Shape 的对象，它有一个 Point 代表 topLeftCorner，一个 Dimension 代表它的宽度和高度。要获得 topRightCorner，我可以简单地将宽度添加到 topLeftPoint.x。我用它们围绕它们的中心旋转一定程度。旋转后的问题是，我的`intersects(Shape)`方法失败了，因为它不尊重形状的旋转。每个形状的旋转都是相同的。我当前的实现在我的形状对象中看起来像这样：

```
public boolean intersects(Shape s){
    // functions returning a Point of shape s
    return intersects(s.topLeft())
        || intersects(s.topRight())
        || intersects(s.bottomLeft())
        || intersects(s.bottomRight())
        || intersects(s.leftCenter())
        || intersects(s.rightCenter())
        || intersects(s.center());
}

public boolean intersects(Point p){
    return p.x >= leftX()
        && p.x <= rightX()
        && p.y >= topY()
        && p.y <= bottomY();
} 
```

基本上我需要像`rotatedLeftX()`or这样的功能`rotatedTopRight()`才能正常工作。同样对于那个计算，我认为在旋转 90 之前的 topLeft 点何时变成 topRight 并不重要......

我已经在这里阅读[了这个](https://stackoverflow.com/questions/9971230/calculate-rotated-rectangle-size-from-known-bounding-box-coordinates)和[这个](https://stackoverflow.com/questions/9447749/find-corners-of-a-rotated-rectangle)问题，但并不完全理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:25:52.737

我修改了来自 Stackoverflow 的算法，以执行您在我编写的战舰游戏中使用矩形指示的内容。这是代码：

```
 private boolean overlaid(int [][][] shps, int curr)
    {
        for (int i = curr-1; i>=0; --i)
        {
//              From: http://stackoverflow.com/questions/306316/determine-if-two-rectangles-overlap-each-other/306332#306332                
//              if (RectA.X1 < RectB.X2 && RectA.X2 > RectB.X1 &&
//                      RectA.Y1 < RectB.Y2 && RectA.Y2 > RectB.Y1)

            if (shps[curr][0][1] <= shps[i][1][1] && 
                shps[curr][1][1] >= shps[i][0][1] &&
                shps[curr][0][0] <= shps[i][1][0] && 
                shps[curr][1][0] >= shps[i][0][0])
                return true;
        }

        return false;
    }

 private int [][][]   shps = {  {{-1,-1},{-1,-1}},
                                 {{-1,-1},{-1,-1}},
                                 {{-1,-1},{-1,-1}}  }; 
```

该`shps`参数只是一个矩阵，使用 {x0,y0}, {x1,y1} 指示每个矩形的左上角和右下角的位置。例如，`shps[curr][0][1]`== 当前`shp`的 y0。出于我的目的，我不得不使用 <= 和 >=。此外，如果您使用屏幕坐标与笛卡尔坐标，则必须注意 y 的倒数。如果您想使用不叠加，也可以使用德摩根定律。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:38:44.120

我有一个解决方案：

假设我想计算一个形状的旋转（90 度），其中 x =1，y=1（topLeft 点），宽度为 4，高度为 6，围绕其中心 (3, 4) == (x1, y2)

```
rotatedX = x1 + cos(q) * (x - x1) - sin(q) * (y - y1)
rotatedY = y1 + sin(q) * (x - x1) + cos(q) * (y - y1) 
```

在这种情况下：

```
rotatedX = 3 + cos(90) * (1 - 3) - sin(90) * (1 - 4)
rotatedY = 4 + sin(90) * (1 - 3) + cos(90) * (1 - 4) 
```

这是为了在笛卡尔平面中旋转（其中正旋转值意味着逆时针旋转）

因此，如果您想应用 90 度 CLOCKWISE 的旋转，您只需将旋转乘以 -1；

# python - 方法声明中的 Python 默认值与 Objective-c

> ID：10913379
> 
> 赞同：0
> 
> 时间：2012-06-06T11:32:36.050
> 
> 标签：python, objective-c, ios

> 出于所有意图和目的，Objective-C 方法声明只是一个附加两个附加参数的 C 函数（请参阅 Objective-C 运行时编程指南中的“消息传递”）。因此，Objective-C 方法声明的结构不同于在 Python 等语言中使用命名参数或关键字参数的方法的结构，如下面的 Python 示例所示： 在此 Python 示例中，Thing 和 NeatMode 可能会被省略或可能调用时有不同的值。

```
def func(a, b, NeatMode=SuperNeat, Thing=DefaultThing):
    pass 
```

在 Objective-c 相关书籍上展示这个例子的目的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:39:50.883

这是 Objective-C 如何不支持其他语言（例如 Python）可能支持的某些功能的（差）示例。文本解释说，虽然 Objective-C 具有格式的“命名参数”

```
- (void)myMethodWithArgument:(NSObject *)argument andArgument:(NSObject *)another; 
```

这些参数不支持默认值，Python 支持。

前面提到的添加两个参数暗示了 Objective-C 中的消息传递是如何在幕后工作的，即通过在每个方法前面添加一个接收器对象和一个选择器。用 Objective-C 编写代码不需要了解这些细节，尤其是初学者，但 Apple[在这里](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ObjCRuntimeGuide/Articles/ocrtHowMessagingWorks.html#//apple_ref/doc/uid/TP40008048-CH104)解释了这个过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:36:04.927

```
def func(a, b, NeatMode=SuperNeat, Thing=DefaultThing):
    pass 
```

NeatMode, Thing 是目标 c 中的可选命名参数，它们将是

```
- (void) func:(int)a :(int)b NeatMode:(object*)SuperNeat Thing:(object*)DefaultThing 
```

请阅读有关此主题的更多信息 [http://www.diveintopython.net/power_of_introspection/optional_arguments.html](http://www.diveintopython.net/power_of_introspection/optional_arguments.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:37:27.340

我认为这里的重点是区分你如何“习惯”接收函数中的参数和objective-c是如何做的。一般：

```
public void accumulate(double value, double value1) {                                    

} 
```

在objective-c中：

```
-(void)accumulateDouble:(double)aDouble withAnotherDouble:(double)anotherDouble{

} 
```

# android - 如何使 textView 准确地包装其多行内容？

> ID：10913384
> 
> 赞同：16
> 
> 时间：2012-06-06T11:32:50.840
> 
> 标签：android, android-layout, textview

我怎样才能让 textview 准确地包装这样的文本？

android:width 属性不是解决方案，因为文本是动态的。

期望的行为

```
|Adcs  |
|adscfd| 
```

当前行为：

```
|Adcs      |
|adscfd    | 
```

这是代码（TextViews 的样式仅定义诸如 textColor、textSize、textStyle 之类的东西）。

```
<TextView
        android:id="@+id/text_title_holder"
        style="@style/TextBold.Black.Title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:maxWidth="100dp"
        android:maxLines="2"
        android:text="Adcs adscfd"
        android:gravity="left"
        android:visibility="visible" /> 
```

[mutiline TextView 上](https://stackoverflow.com/q/8069776/1395546)的主题wrap_content width没有好的答案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-22T08:20:21.557

我遇到了这个问题，并没有在互联网上找到解决方案。我通过创建重新测量给定文本的新组件 TightTextView 来做到这一点，以防您指定了组件的 maxWidth 并且 Layout （文本）的宽度小于视图的测量宽度。

```
package com.client.android.app.views;

import android.content.Context;
import android.text.Layout;
import android.util.AttributeSet;
import android.widget.TextView;

/**
 * Tightly wraps the text when setting the maxWidth.
 * @author sky
 */
public class TightTextView extends TextView {
    private boolean hasMaxWidth;

    public TightTextView(Context context) {
        this(context, null, 0);
    }

    public TightTextView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public TightTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        if (hasMaxWidth) {
            int specModeW = MeasureSpec.getMode(widthMeasureSpec);
            if (specModeW != MeasureSpec.EXACTLY) {
                Layout layout = getLayout();
                int linesCount = layout.getLineCount();
                if (linesCount > 1) {
                    float textRealMaxWidth = 0;
                    for (int n = 0; n < linesCount; ++n) {
                        textRealMaxWidth = Math.max(textRealMaxWidth, layout.getLineWidth(n));
                    }
                    int w = Math.round(textRealMaxWidth);
                    if (w < getMeasuredWidth()) {
                        super.onMeasure(MeasureSpec.makeMeasureSpec(w, MeasureSpec.AT_MOST),
                                heightMeasureSpec);
                    }
                }
            }
        }
    }

    @Override
    public void setMaxWidth(int maxpixels) {
        super.setMaxWidth(maxpixels);
        hasMaxWidth = true;
    }

    @Override
    public void setMaxEms(int maxems) {
        super.setMaxEms(maxems);
        hasMaxWidth = true;
    }
} 
```

！！！刚刚将其移植到较旧的 android API，因为 getMaxWidth() 仅在 API 级别 16 后可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T12:49:47.170

这个问题现在有点老了，但我也遇到了这个问题，我想在 mapView 上的黑框中显示绿色文本，并通过将我的 textView 放在 RelativeLayout 容器中来解决它。然后我使用填充来设置边框大小。textView 现在可以很好地拥抱文本。我在eclipse中的大纲看起来像这样。

```
RelativeLayout
    mapview
    LinearLayout
        RelativeLayout
            textView1  << this is the box I want to hug the text
        imageView1
    RelativeLayout
    etc.... 
```

希望这可以帮助。

# c# - 如何在 WebBrowser 控件中打开 .eml 文件？

> ID：10913389
> 
> 赞同：0
> 
> 时间：2012-06-06T11:33:09.167
> 
> 标签：c#, html, email, webbrowser-control, openpop

我想在这里问一下，如何在 WebBrowser 控件中打开位于文件系统中的 .eml 文件。这是我此刻所拥有的：

```
string uri = Convert.ToString(myDataReader["Uri"]); //obtained the URI from a database query a few lines of code earlier

FileInfo file = new FileInfo(uri);
OpenPop.Mime.Message mensagem = OpenPop.Mime.Message.Load(file);

origem = mensagem.Headers.From.ToString(); //origin of the email
destino = mensagem.Headers.To.ToString(); //destiny
assunto = mensagem.Headers.Subject.ToString(); //subject
conteudo = mensagem.MessagePart.Body; //message body 
```

我正在使用 OpenPop.Net 以另一种形式从 POP3 服务器获取消息，我需要知道如何获取这些消息的 HTML 部分......

提前致谢！

若昂·博雷戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:21:38.863

您是否查看[过 OpenPop.Net 的示例](http://hpop.sourceforge.net/examples.php)？具体来说，您应该查看[“查找电子邮件的特定部分（文本、html、xml）”示例](http://hpop.sourceforge.net/exampleSpecificParts.php)。

网站上还[介绍](http://hpop.sourceforge.net/emailIntroduction.php)了电子邮件的工作原理。这可能有助于理解 OpenPop.Net 是如何构建的，因为它是围绕电子邮件的内部结构演变而来的。

# c# - 仅将 LayoutTransform 应用于父级，而不应用于任何特定的子级

> ID：10913391
> 
> 赞同：3
> 
> 时间：2012-06-06T11:33:13.653
> 
> 标签：c#, wpf

**主窗口.XAML：**

```
<Window x:Class="TestWPFApp.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Name="myMainWindow"
            Title="MainWindow" Width="200" Height="250">
        <Grid Name="MainGrid" SizeChanged="MainGrid_SizeChanged">
            <Grid.LayoutTransform>
                <ScaleTransform x:Name="ApplicationScaleTransform"
                            CenterX="0"
                            CenterY="0"
                            ScaleX="{Binding ElementName=myMainWindow, Path=ScaleValue}"
                            ScaleY="{Binding ElementName=myMainWindow, Path=ScaleValue}" />
            </Grid.LayoutTransform>
            <Grid VerticalAlignment="Center" HorizontalAlignment="Center" Height="150">
                <TextBlock FontSize="20" Text="Hello World" Margin="5" VerticalAlignment="Top" HorizontalAlignment="Center"/>
                <Button Content="Button" VerticalAlignment="Bottom" HorizontalAlignment="Center" Name="myButton"/>
            </Grid>
        </Grid>

    </Window> 
```

**主窗口代码隐藏：**

```
 public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        #region ScaleValue Depdency Property
        public static readonly DependencyProperty ScaleValueProperty = DependencyProperty.Register("ScaleValue", typeof(double), typeof(MainWindow), new UIPropertyMetadata(1.0, new PropertyChangedCallback(OnScaleValueChanged), new CoerceValueCallback(OnCoerceScaleValue)));

        private static object OnCoerceScaleValue(DependencyObject o, object value)
        {
            MainWindow mainWindow = o as MainWindow;
            if (mainWindow != null)
                return mainWindow.OnCoerceScaleValue((double)value);
            else
                return value;
        }

        private static void OnScaleValueChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            MainWindow mainWindow = o as MainWindow;
            if (mainWindow != null)
                mainWindow.OnScaleValueChanged((double)e.OldValue, (double)e.NewValue);
        }

        protected virtual double OnCoerceScaleValue(double value)
        {
            if (double.IsNaN(value))
                return 1.0f;

            value = Math.Max(0.1, value);
            return value;
        }

        protected virtual void OnScaleValueChanged(double oldValue, double newValue)
        {

        }

        public double ScaleValue
        {
            get
            {
                return (double)GetValue(ScaleValueProperty);
            }
            set
            {
                SetValue(ScaleValueProperty, value);
            }
        }
        #endregion

        private void MainGrid_SizeChanged(object sender, EventArgs e)
        {
            CalculateScale();
        }

        private void CalculateScale()
        {
            double yScale = ActualHeight / 250f;
            double xScale = ActualWidth / 200f;
            double value = Math.Min(xScale, yScale);
            ScaleValue = (double)OnCoerceScaleValue(MainGrid, value);
        }
    } 
```

我有这个示例应用程序。我在**MainGrid**上应用 LayoutTransform 以通过调整窗口大小来缩放应用程序。如何避免我的控件**myButton**应用该转换？我不希望该转换适用于它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T11:40:07.887

两种选择

1）不要让它成为一个孩子，而只是让它在视觉上重叠，例如使用第二个网格。

2）对孩子应用变换的逆，这将否定变换，可能很昂贵，但应该可以解决问题。

```
<Button LayoutTransform="{Binding ElementName=MainGrid, Path=LayoutTransform.Inverse}"/> 
```

我个人会使用第一个选项。

# asp.net - 什么，为什么或何时选择 cshtml 与 aspx 更好？

> ID：10913394
> 
> 赞同：116
> 
> 时间：2012-06-06T11:33:23.343
> 
> 标签：asp.net, asp.net-mvc, razor

我想知道什么、为什么或什么时候选择 cshtml 更好，什么、为什么或什么时候选择 aspx 技术更好？这两种技术的用途是什么？

谢谢，

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-06-06T11:50:13.217

正如其他人所回答的那样，`.cshtml`（或者`.vbhtml`如果那是您的口味）提供了一个处理程序映射来加载 MVC 引擎。该`.aspx`扩展只加载执行编译和提供 Web 表单的 aspnet_isapi.dll。处理程序映射的区别只是一种允许两者在同一服务器上共存的方法，从而允许 MVC 应用程序和 WebForms 应用程序存在于一个共同的根目录下。

这允许[http://www.mydomain.com/MyMVCApplication](http://www.mydomain.com/MyMVCApplication)有效并使用 MVC 规则以及[http://www.mydomain.com/MyWebFormsApplication](http://www.mydomain.com/MyWebFormsApplication)作为标准 Web 表单有效。

**编辑：**
至于技术上的差异，MVC（Razor）模板框架旨在将.Net页面返回到更加RESTful的“基于Web”的模板视图平台，将模型（业务/数据对象）之间的代码逻辑分开，视图（用户看到的）和控制器（两者之间的连接）。WebForms 模型 (aspx) 是 Microsoft 尝试使用复杂的 javascript 嵌入来模拟一个更有状态的应用程序，类似于 WinForms 应用程序，它具有事件和页面生命周期，能够在页面之间保留自己的状态。

使用一个或另一个的选择总是有争议的，因为这两种系统都有支持和反对的争论。我喜欢 MVC 架构中的简单性（尽管路由一点也不简单）和 Razor 语法的简单性。我觉得 WebForms 架构太重了，不能成为一个有效的 Web 平台。话虽如此，在很多情况下，WebForms 框架都提供了一个非常简洁和可用的模型，该模型具有定义良好的丰富事件结构。这一切都归结为应用程序的需求和构建它的人的偏好。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-06-06T11:44:48.783

Razor 是 ASP.NET MVC 的**视图引擎**，也是**模板引擎**。Razor 代码和 ASP.NET 内联代码（与标记混合的代码）都首先编译并在执行之前变成临时程序集。因此，就像 C# 和 VB.NET 都编译为 IL 一样，这使得它们可以互换，Razor 和内联代码都是可以互换的。

因此，这更多的是风格和兴趣的问题。我更喜欢使用 razor，而不是 ASP.NET 内联代码，也就是说，我更喜欢 Razor (cshtml) 页面而不是 .aspx 页面。

想象一下，你想获得一个`Human`类，并渲染它。在您编写**的 cshtml**文件中：

```
<div>Name is @Model.Name</div> 
```

在您编写的**aspx文件中：**

```
<div>Name is <%= Human.Name %></div> 
```

如您所见，`@`razor 的标志使混合代码和标记变得更加容易。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-06T12:03:59.577

`.cshtml`虽然 Razor ( / `.vbhtml`) 和 WebForms ( `.aspx`/ )之间的语法肯定不同`.ascx`，（Razor 是两者中更简洁和现代的），但没有人提到虽然两者都可以用作视图引擎/模板引擎，但传统的 ASP.NET Web 窗体控件可用于任何 .aspx 或 .ascx 文件（即使与 MVC 架构相结合）。

这与已建立长期解决问题的解决方案并将其打包到可插入组件（例如大文件上传控件）并且您希望在 MVC 站点中使用它的情况相关。使用 Razor，您无法做到这一点。但是，您可以使用带有 Web 窗体视图的传统 ASP.NET 体系结构执行所有相同的后端处理。

此外，ASP.NET Web 表单视图可以具有代码隐藏文件，它允许将逻辑嵌入到与视图一起编译的单独文件中。虽然软件开发社区越来越多地将紧密耦合的架构和[智能客户端模式视为不好的做法](http://codeidol.com/csharp/domain-driven-design/Isolating-the-Domain/The-Smart-UI-Anti-Pattern/)，但它曾经是主要的做事方式，并且在 .aspx/.ascx 文件中仍然很有可能。Razor 故意没有这样的品质。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-06T11:38:50.947

Cshtml 文件是 Razor 使用的文件，正如[该问题](https://stackoverflow.com/questions/3423732/razor-cshtml-any-benefit-over-what-we-have)的答案所述，它们的主要优点是它们可以在单元测试中呈现。对这个其他主题的各种答案将带来许多其他有趣的观点。

# c# - 实体框架 where、order 和 group

> ID：10913396
> 
> 赞同：22
> 
> 时间：2012-06-06T11:33:45.530
> 
> 标签：c#, linq, entity-framework

我正在使用以下 LINQ 从表中选择数据：

```
(from m in entity.Results
where m.Group == 0 ||
m.Group == 1
orderby m.Points descending
select m); 
```

这为我提供了第 1 组或第 2 组中所有用户的结果。这样我就可以显示他们拥有的分数。但这向我展示了他们分别在第 1 组和第 2 组中的分数。

我如何对它们进行分组并显示它们的总分？所以代替这个（我现在拥有的）：

```
user1 - group1 - 10
user1 - group2 - 7
user2 - group1 - 7
user2 - group2 - 5 
```

我要这个：

```
user1 - total: 17
user2 - total: 12 
```

我如何调整我的查询以获得这样的结果集？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-06T11:45:13.987

您需要对用户进行分组，然后用于`Sum`计算`TotalPoints`：

```
from m in entity.Results
where m.Group == 0 || m.Group == 1
group m by m.User into g
let TotalPoints = g.Sum(m => m.Points)
orderby TotalPoints descending
select new { User = g.Key, Username = g.Key.Username, TotalPoints }; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-06T11:45:52.667

```
entity.Results
      .Where(m => m.Group == 0 || m.Group == 1)
      .GroupBy(m => m.UserID)
      .Select(m => new { User = m.Key, TotalPoints = m.Sum(v => v.Points) })
      .OrderByDescending(m => m.TotalPoints); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T11:51:39.450

嗨 Vivendi 使用这个（请根据您的要求编辑）

```
var q = (from h in entity.Results
group h by new { h.UserID} into hh
select new {
    hh.Key.UserID,
    Score = hh.Sum(s => s.Points )
}).OrderByDescending(i => i.Points); 
```

**输出**

总数：17

总数：12

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-14T16:24:39.487

另一个有多个总和和连接的示例

```
 from e in _context.LearnResults
 join c in _context.Country on e.CountryId equals c.CountryId
 where c.DomainId.Equals("xx")
 group e by e.Country.Name into newCountry
 let Approved = newCountry.Sum(e => e.Approved)
 let Total = newCountry.Sum(e => e.Total)
 select new LearnResults() { CountryName = newCountry.Key, Approved= Approved, Total=Total }; 
```

# android - 收到错误错误：res/menu/mainMenu.xml：文件名无效：必须仅包含 [a-z0-9_.]

> ID：10913397
> 
> 赞同：0
> 
> 时间：2012-06-06T11:33:48.027
> 
> 标签：android

我是android新手，刚刚开始。我在 res 文件夹 menu/mainMenu.xml 中创建了一个文件。但我得到了错误

```
Error: res/menu/mainMenu.xml: invalid file name: must contain only[a-z0-9_.] 
```

当我将文件名更改为 mainmenu（删除大写 M）时，它开始工作。为什么？我正在使用 IntelliJ 10.5.1。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:41:25.237

xml 文件在命名 xml 文件时不支持大写字母，因此请尝试删除大写字母。

正确`mainmenu.xml`或`main_menu.xml`。有关更多详细信息，您可以查看[此](https://stackoverflow.com/questions/6808751/res-layout-contact-us-xml-invalid-file-name-must-contain-only-a-z0-9)内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:34:33.577

应该是`mainmenu.xml`，xml文件的命名不允许大写。

```
 File name must contain only lowercase a-z, 0-9, or _. 
```

*   只是`a-z`，请注意不是资本......和`white-space not allowed`

*   名称必须以字符开头。不能以数字 (0-9)

*   仅允许使用名称`_`符号。不允许使用其他符号。

# c# - 使用通用参数获取/计算 .NET 类型的外部 MSDN url

> ID：10913398
> 
> 赞同：2
> 
> 时间：2012-06-06T11:33:52.190
> 
> 标签：c#, .net, types, msdn

可以使用以下链接格式（例如[System.IO.FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)）访问没有泛型参数的类型的外部 MSDN 文档页面：

[http://msdn.microsoft.com/](http://msdn.microsoft.com/) **< ISO_LANGUAGE >** /library/ **< FULL_TYPE_NAME >** .aspx

但是类型，比如泛型[List< T >](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)是通过类似于哈希的东西来访问的：

[http://msdn.microsoft.com/de-de/library/6sh2ey19.aspx](http://msdn.microsoft.com/de-de/library/) **_** _

Microsoft 如何计算“哈希” *6sh2ey19*或存储在哪里？

是否有 C# 的解决方案，例如？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T11:49:16.703

MSDN 提供了一组 Web 服务，可让您确定 URL，甚至根据需要显示内容：

[http://services.msdn.microsoft.com/ContentServices/ContentService.asmx](http://services.msdn.microsoft.com/ContentServices/ContentService.asmx)

MSDN 杂志上还有一篇关于如何使用 Web 服务的不错的文章，这可能是一个很好的起点：

[http://msdn.microsoft.com/en-us/magazine/cc163541.aspx](http://msdn.microsoft.com/en-us/magazine/cc163541.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:12:06.927

我创建了一个控制台应用程序来从 John Koerner 建议的 MSDN ContentService 下载 BCL 类的完整列表。结果是一个包含两列（类型名称、内容 ID）的 CSV 文件，可用于创建直接 MSDN 链接。

.NET Framework 4.5 的 CSV 文件可以在这里下载（~165 kbytes）： [https ://github.com/yallie/MsdnHelper/blob/master/out/ClassLibrary45.csv.gz](https://github.com/yallie/MsdnHelper/blob/master/out/ClassLibrary45.csv.gz)

这是一个 C# 片段如何将 CSV 加载到 IDictionary<string, string>： [https ://github.com/yallie/MsdnHelper/blob/master/out/ClassLibrary45.cs](https://github.com/yallie/MsdnHelper/blob/master/out/ClassLibrary45.cs)

使用此字典创建 MSDN 链接：

```
var contentId = classes["System.IDisposable"]; // full type name
var msdnLink = string.Format("http://msdn.microsoft.com/en-us/library/{0}.aspx", contentId); 
```

# ios5 - 参考 id 的 RestKit 映射对象

> ID：10913401
> 
> 赞同：0
> 
> 时间：2012-06-06T11:34:05.207
> 
> 标签：ios5, mapping, restkit

我有一个对象*OrganizationalUnit*，它通过*parentId*属性链接到父实体。*OrganizationalUnit*还有一个主键属性*ouId*（映射自 JSON“_id”字段）。

这是我的代码：

```
RKManagedObjectMapping *ouMapping = [RKManagedObjectMapping mappingForClass:[OrganizationalUnit class] inManagedObjectStore:manager.objectStore];
[ouMapping mapAttributes:@"name",@"type", nil];
[ouMapping mapKeyPath:@"_id" toAttribute:@"ouId"];
[ouMapping setPrimaryKeyAttribute:@"ouId"];

[ouMapping mapKeyPath:@"parent" toAttribute:@"parentId"];

[ouMapping hasOne:@"parent" withMapping:ouMapping];
[ouMapping connectRelationship:@"parent" withObjectForPrimaryKeyAttribute:@"parentId"]; 
```

其工作方式与 RestKit 中的示例相同：

```
RKManagedObjectMapping* taskMapping = [RKManagedObjectMapping mappingForClass:[Task class] inManagedObjectStore:objectStore];
taskMapping.primaryKeyAttribute = @"taskID";
[taskMapping mapKeyPath:@"id" toAttribute:@"taskID"];
[taskMapping mapKeyPath:@"name" toAttribute:@"name"];
[taskMapping mapKeyPath:@"assigned_user_id" toAttribute:@"assignedUserID"];
[objectManager.mappingProvider setMapping:taskMapping forKeyPath:@"task"];

// Hydrate the assignedUser association via primary key
[taskMapping hasOne:@"assignedUser" withMapping:userMapping];
[taskMapping connectRelationship:@"assignedUser" withObjectForPrimaryKeyAttribute:@"assignedUserID"]; 
```

它应该在本地创建基于 id 的对象之间的关系。

不幸的是，在运行时，当接收数据的实际映射发生时，我收到错误：

```
*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<__NSCFString 0x6d9c6f0> valueForUndefinedKey:]: this class is not key value coding-compliant for the key _id.' 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:29:58.807

我想我正在找到问题的根源，可能是由于孩子们无法参考父母，因为他们还不存在。

# drupal - 如何在 drupal 7 中打印页面？

> ID：10913406
> 
> 赞同：-1
> 
> 时间：2012-06-06T11:34:26.487
> 
> 标签：drupal, drupal-7

我有一个用于生成报告的 drupal 7 模块。我想打印一份没有 drupal 菜单和页脚的报告。我希望报告单独显示在第二页上并查看描述性数据？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:44:34.380

入侵打印模块的鳕鱼后。我发现要生成空白的drupal页面，请在链接回调中使用以下内容

drupal_send_headers();
打印 $myHTML;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:52:08.657

在你的页面回调中，你可以简单地打印出你想要的信息然后死掉，但这会阻止关闭函数和 hook_exit 任务。更好的方法是使用 drupal_page_footer()

[http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_page_footer/7](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_page_footer/7)

# d3.js - D3 有向图

> ID：10913407
> 
> 赞同：5
> 
> 时间：2012-06-06T11:34:28.913
> 
> 标签：d3.js, directed-graph

我使用以下示例生成有向图

[http://bl.ocks.org/1153292](http://bl.ocks.org/1153292)

我想添加一个单击事件，以便当用户单击某个节点时，显示该节点的标题

到目前为止，我这样做了

```
var circle = svg.append("svg:g").selectAll("circle")
    .data(force.nodes())
  .enter().append("svg:circle")
    .attr("r", 6)
    **.on("mouseup", disp)**
    .call(force.drag);
     ;

function disp() {
    alert("Display the heading of the node clicked here");

}; 
```

请告诉我如何显示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-06T21:50:42.527

您可以使用`.on()`来获得点击事件

```
circle.on("click", function(d) {
    alert(d.name)
}) 
```

jsFiddle：http: [//jsfiddle.net/chrisJamesC/HgHqy/](http://jsfiddle.net/chrisJamesC/HgHqy/)

# android - 单击提交按钮后，如何使用在edittext中输入的url下载sd卡中的pdf文件

> ID：10913414
> 
> 赞同：-1
> 
> 时间：2012-06-06T11:35:21.130
> 
> 标签：android, pdf

我正在开发一个应用程序，在单击提交按钮后，使用在 edittext 中输入的 url 下载 sd 卡中的 pdf 文件。

```
 Button b = (Button)findViewById(R.id.button1);
       final EditText ed = (EditText)findViewById(R.id.editText1);
       b.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
         String URL  = ed.getText().toString();
          WebView web1 =(WebView)findViewById(R.id.webview);
          web1.getSettings().setJavaScriptEnabled(true);
           web1.loadUrl(URL);  
           }
          }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:41:48.277

这里 urlToDownload 是您的编辑文本的文本，将方法写入您的按钮单击事件以下载 pdf 文件。

```
public void downloadPdfContent(String urlToDownload){
     try {
          String fileName="xyz";
          String fileExtension=".pdf";
          //download pdf file.
          URL url = new URL(urlToDownload);
          HttpURLConnection c = (HttpURLConnection) url.openConnection();
          c.setRequestMethod("GET");
          c.setDoOutput(true);
          c.connect();
          String PATH = Environment.getExternalStorageDirectory() + "/mydownload/";
          File file = new File(PATH);
          file.mkdirs();
          File outputFile = new File(file, fileName+fileExtension);
          FileOutputStream fos = new FileOutputStream(outputFile);
          InputStream is = c.getInputStream();
          byte[] buffer = new byte[1024];
          int len1 = 0;
          while ((len1 = is.read(buffer)) != -1) {
                fos.write(buffer, 0, len1);
          }
          fos.close();
          is.close();
          System.out.println("--pdf downloaded--ok--"+urlToDownload);
     } catch (Exception e) {
          e.printStackTrace();
     }
} 
```

并将 write_external_storage 权限授予您的应用程序清单文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:44:01.630

下面的代码可以帮助你 -

```
public class DownloaderThread extends Thread
{
        // constants
        private static final int DOWNLOAD_BUFFER_SIZE = 4096;

        // instance variables
        private AndroidFileDownloader parentActivity;
        private String downloadUrl;

        /**
         * Instantiates a new DownloaderThread object.
         * @param parentActivity Reference to AndroidFileDownloader activity.
         * @param inUrl String representing the URL of the file to be downloaded.
         */
        public DownloaderThread(AndroidFileDownloader inParentActivity, String inUrl)
        {
                downloadUrl = "";
                if(inUrl != null)
                {
                        downloadUrl = inUrl;
                }
                parentActivity = inParentActivity;
        }

        /**
         * Connects to the URL of the file, begins the download, and notifies the
         * AndroidFileDownloader activity of changes in state. Writes the file to
         * the root of the SD card.
         */
        @Override
        public void run()
        {
                URL url;
                URLConnection conn;
                int fileSize, lastSlash;
                String fileName;
                BufferedInputStream inStream;
                BufferedOutputStream outStream;
                File outFile;
                FileOutputStream fileStream;
                Message msg;

                // we're going to connect now
                msg = Message.obtain(parentActivity.activityHandler,
                                AndroidFileDownloader.MESSAGE_CONNECTING_STARTED,
                                0, 0, downloadUrl);
                parentActivity.activityHandler.sendMessage(msg);

                try
                {
                        url = new URL(downloadUrl);
                        conn = url.openConnection();
                        conn.setUseCaches(false);
                        fileSize = conn.getContentLength();

                        // get the filename
                        lastSlash = url.toString().lastIndexOf('/');
                        fileName = "file.bin";
                        if(lastSlash >=0)
                        {
                                fileName = url.toString().substring(lastSlash + 1);
                        }
                        if(fileName.equals(""))
                        {
                                fileName = "file.bin";
                        }

                        // notify download start
                        int fileSizeInKB = fileSize / 1024;
                        msg = Message.obtain(parentActivity.activityHandler,
                                        AndroidFileDownloader.MESSAGE_DOWNLOAD_STARTED,
                                        fileSizeInKB, 0, fileName);
                        parentActivity.activityHandler.sendMessage(msg);

                        // start download
                        inStream = new BufferedInputStream(conn.getInputStream());
                        outFile = new File(Environment.getExternalStorageDirectory() + "/" + fileName);
                        fileStream = new FileOutputStream(outFile);
                        outStream = new BufferedOutputStream(fileStream, DOWNLOAD_BUFFER_SIZE);
                        byte[] data = new byte[DOWNLOAD_BUFFER_SIZE];
                        int bytesRead = 0, totalRead = 0;
                        while(!isInterrupted() && (bytesRead = inStream.read(data, 0, data.length)) >= 0)
                        {
                                outStream.write(data, 0, bytesRead);

                                // update progress bar
                                totalRead += bytesRead;
                                int totalReadInKB = totalRead / 1024;
                                msg = Message.obtain(parentActivity.activityHandler,
                                                AndroidFileDownloader.MESSAGE_UPDATE_PROGRESS_BAR,
                                                totalReadInKB, 0);
                                parentActivity.activityHandler.sendMessage(msg);
                        }

                        outStream.close();
                        fileStream.close();
                        inStream.close();

                        if(isInterrupted())
                        {
                                // the download was canceled, so let's delete the partially downloaded file
                                outFile.delete();
                        }
                        else
                        {
                                // notify completion
                                msg = Message.obtain(parentActivity.activityHandler,
                                                AndroidFileDownloader.MESSAGE_DOWNLOAD_COMPLETE);
                                parentActivity.activityHandler.sendMessage(msg);
                        }
                }
                catch(MalformedURLException e)
                {
                        String errMsg = parentActivity.getString(R.string.error_message_bad_url);
                        msg = Message.obtain(parentActivity.activityHandler,
                                        AndroidFileDownloader.MESSAGE_ENCOUNTERED_ERROR,
                                        0, 0, errMsg);
                        parentActivity.activityHandler.sendMessage(msg);
                }
                catch(FileNotFoundException e)
                {
                        String errMsg = parentActivity.getString(R.string.error_message_file_not_found);
                        msg = Message.obtain(parentActivity.activityHandler,
                                        AndroidFileDownloader.MESSAGE_ENCOUNTERED_ERROR,
                                        0, 0, errMsg);
                        parentActivity.activityHandler.sendMessage(msg); 
                }
                catch(Exception e)
                {
                        String errMsg = parentActivity.getString(R.string.error_message_general);
                        msg = Message.obtain(parentActivity.activityHandler,
                                        AndroidFileDownloader.MESSAGE_ENCOUNTERED_ERROR,
                                        0, 0, errMsg);
                        parentActivity.activityHandler.sendMessage(msg); 
                }
        }

} 
```

以上代码是从这个[现有](http://code.google.com/p/hassanpurcom/source/browse/trunk/android/AndroidFileDownloaderExample/)项目中提取的。不要忘记给予所需的权限`Internet`

# filemaker - 通过脚本在列表视图中选择不同的记录

> ID：10913416
> 
> 赞同：0
> 
> 时间：2012-06-06T11:35:33.443
> 
> 标签：filemaker

我在**Filemaker 11**中有一个表，其中包含以下字段：`thingID, infoNumber (#), itemHistory`. `infoNumber`显示我们认为项目历史发生的顺序（有时这是不正确的，需要重新排列）。

> thingID, #, itemHistory
> 
> 事情 1, 1 和亚当在一起
> 
> 事情 1、2 和克莱尔在一起
> 
> 事情 1、3 和 Ben 在一起
> 
> 第 1、4 件事是和戴夫在一起的

我在**列表视图**中显示这些（按 infoNumber asc 排序），并且用户意识到它实际上是“1,3,2,4”，我希望**向上和向下箭头**可见以便用户切换它们，即单击 infoNumber=3 记录上的向上箭头会将其设置为 2，而旧的 infoNumber=2 将设置为 3。

*当用户单击列表视图中的按钮时，如何编写脚本来切换这些？*

我的想法：

> Set Variable[$clickedDown, infoNumber] #我们点击的记录的infoNumber
> 
> 如果 [ $clickedDown != 1 ]
> 
> 设置字段 [ infoNumber, clickedDown -1 ]
> 
> # 但是如何使用 infoNumber = clickedDown-1 移动到记录？
> 
> 万一

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:31:40.563

我这样做的方式是进行多次查找，这是我采用一种方式的解决方案。

> # 首先你点击了某个东西，记录它当前的 infoNumber
> 
> 设置变量 [ $infoNumber, infoNumber ]
> 
> # 使用-2（任意）作为临时占位符
> 
> 设置字段 [ infoNumber = -2]
> 
> 错误捕获 [开]
> 
> 执行查找 [thingID = $thingID, infoNumber = $infoNumber - 1]
> 
> 如果 [ 获取 (LastError = 401) ]
> 
> # 没有结果然后只是重新搜索临时并将其设置回原来的样子
> 
> 执行查找 [thingID = $thingID, infoNumber = -2]
> 
> 设置字段 [ infoNumber, $infoNumber ]
> 
> 别的
> 
> 设置字段 [ infoNumber, $infoNumber ]
> 
> 执行查找 [thingID = $thingID, infoNumber = -2]
> 
> 设置字段 [ infoNumber, $infoNumber -1 ]
> 
> 万一
> 
> # 回到你之前的布局

我很想知道是否有更好的方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T22:47:08.147

你可以通过使用关系来做到这一点。创建一个新的表事件（例如**History Previous**）并将其链接到列表布局的表事件（例如**History**），并使用以下谓词：

```
History::ThingID = History Previous::ThingID
History::infoNumber > History Previous::infoNumber 
```

按**History Previous::infoNumber**降序排列关系。

这将为您提供一组相关的历史记录，这些记录出现在相关事物列表的前面。由于排序，第一条记录将是前一条记录。

现在，当您运行脚本时，您可以：

```
If [ Count ( History Previous::ThingID ) > 0 ]
Set Variable [ $infoNumber, History Previous::infoNumber ]
Set Field [ History Previous::infoNumber, History::infoNumber ]
Set Field [ History::infoNumber, $infoNumber ]
End If 
```

请注意，尽管**History Previous**关系可能引用多条记录，但您可以依靠关系排序来为您提供对第一条记录的访问，无论是从它获取数据（在**Set Variable**步骤中）还是将数据设置到其中（在第一个**设置字段**步骤中）。

# python - 是什么让用户定义的对象不会在 Python 中抛出 AttributeError？

> ID：10913417
> 
> 赞同：5
> 
> 时间：2012-06-06T11:35:37.043
> 
> 标签：python, oop

> **可能重复：**
> [为什么我不能直接向任何 python 对象添加属性？](https://stackoverflow.com/questions/623520/why-cant-i-directly-add-attributes-to-any-python-object)
> [为什么不能在 python 中为对象添加属性？](https://stackoverflow.com/questions/1285269/why-cant-you-add-attributes-to-object-in-python)

以下代码不会抛出 AttributeError

```
class MyClass():
    def __init__(self):
        self.a = 'A'
        self.b = 'B'
my_obj = MyClass()
my_obj.c = 'C' 
```

这与

```
>>> {}.a = 'A'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'dict' object has no attribute 'a' 
```

有什么不同？它是关于 dict 是一个内置类而 MyClass 是用户定义的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:51:49.727

不同之处在于用户定义类的实例默认具有与其关联的属性字典。`vars(my_obj)`您可以使用或访问此词典`my_obj.__dict__`。您可以通过定义来防止创建属性字典`__slots__`：

```
class MyClass(object):
    __slots__ = [] 
```

内置类型也可以提供属性字典，但通常不提供。支持属性的内置类型的一个示例是*函数的类型。*

# ruby-on-rails - 如何将审计跟踪记录到数据库？

> ID：10913425
> 
> 赞同：0
> 
> 时间：2012-06-06T11:36:22.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想编写一个日志模型和控制器，以记录用户所做的一切。我正在考虑使用来自 ip 地址、用户调用的控制器、显示的视图和 params.inspect 创建一个数据库表。

有没有办法获取当前正在使用的控制器的变量？部署它的最佳方法是什么？有没有做这一切的宝石？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:53:03.240

如果您将生产中的日志级别设置为 :debug，那么每个请求都会记录您需要的信息。也许，为调试生产日志编写解析器可能更容易。

如果你愿意，你也可以给你的 ApplicationController 添加一个过滤器：

```
class ApplicationController
  before_filter :log_activity

  def log_activity
    if Rails.env == 'production'
      @logger ||= Logger.new("#{Rails.root}/log/activity.log")
      values = [
        request.remote_ip,
        controller_name,
        action_name,
        params.inspect
      ]
      @logger.info "#{values.join ' | '}"
    end
  end

  ...
end 
```

这可能不完整，因为您希望输出更详细，但这就是想法。

# javascript - 通过 Javascript 显示 HTML 内容

> ID：10913427
> 
> 赞同：-3
> 
> 时间：2012-06-06T11:36:33.800
> 
> 标签：javascript, html

我想知道，我怎样才能使用 Javascript 显示 HTML 内容，据我所知并一直在搜索它根本不可能做到这一点。

但是我找到了一个 javascript 代码，它`frame`在 URL 参数中显示 HTML 内容（不是原始内容）。

这里是：

[http://otslist.eu/ratingWidget.js](http://otslist.eu/ratingWidget.js) - 在这里你可以找到原始的 javascript 代码。

[http://otslist.eu/ratingWidget.js?frame=1](http://otslist.eu/ratingWidget.js?frame=1) - 这里显示的是 HTML。

这怎么可能？如何做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:48:14.233

您看到的 JavaScript 是服务器上的 PHP 脚本。使用一些浏览器/网络调试器工具来检查 HTTP 响应：

```
HTTP/1.1 200 OK 
Server              nginx/0.7.67
Date                Wed, 06 Jun 2012 11:50:44 GMT
Content-Type        text/html
Connection          keep-alive
X-Powered-By        PHP/5.3.10
Expires             Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control       no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma              no-cache
Content-Encoding    gzip 
```

并看到它是由 PHP 驱动的。所以它是 PHP 脚本的输出，而不是常规的 JavaScript 文档。

省略时，PHP 脚本会输出一个 JavScript `frame=1`。当`frame=1`包含 时，它会告诉 PHP 脚本将 JavaScript 嵌入 HTML 页面并提供该页面。

**更新：** PHP 脚本*可能*如下所示：

```
<?php
$asHTML = $_GET['frame'] == 1;

if($asHTML) {
  // Generate HTTP headers for HTML, like
  header("Content-Type", "text/html");
} else {
  // Generate HTTP headers for the JavaScript, like
  header("Content-Type", "text/javascript");
}

if($asHTML) {
  // Generate HTML top document part
  echo "<html><head><title>Title</title></head><body><script type=\"text/javascript\">";
  // Other HTML header stuff here as well, see the live example (as I am too lazy to type it here)
}

// Read the JavaScript from a file that is available on the server
readfile("javascript.js");

if($asHTML) {
  // Close HTML tags
  echo "</script></body></html>";
} 
```

请注意，我很快就一起输入了这个，所以它可能充满了错误。但它应该给你一个大致的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:44:15.430

如果您查看两个页面的源代码，您会发现它是不同的代码。带frame参数的页面是HTML，另一个是JS。因此，服务器查找 frame 参数，如果存在则为 HTML 页面提供服务，否则为 JS 页面提供服务。

尝试

```
http://otslist.eu/ratingWidget.js?frames=1 
```

这里`frame`参数不存在（是带s的帧），所以它服务于JS版本

并尝试

```
http://otslist.eu/ratingWidget.js?frame=1515 
```

这里`frame`参数存在，即使值为 1515，所以它服务于 HTML 版本

此外，如果您使用 Firefox 的“实时 HTTP 标头”附加组件，您将看到服务器对第一个 url 的响应是`Content-Type: text/javascript`，第二个是`Content-Type: text/html`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:49:49.880

我可能会想念你的观点，但它似乎是非常基本的 javscript。innerHTML 属性可用于操作例如 div 中包含的内容。例如

```
document.getElementById("changeMyContent").innerHTML='<strong>New</strong> content'; 
```

看看[http://www.w3schools.com/js/default.asp](http://www.w3schools.com/js/default.asp)，他们有一个活生生的例子。

# php - codeigniter 活动记录中的波斯语字符错误

> ID：10913430
> 
> 赞同：2
> 
> 时间：2012-06-06T11:36:38.603
> 
> 标签：php, codeigniter, persian, farsi

我尝试通过这个模型（page_model.php）通过codeigniter中的活动记录来获取一些数据：

```
class Page_model extends CI_model{
    function __construct()
    {
        // Call the Model constructor
        parent::__construct();
    }
    function get_content($page){
        var_dump($page);
        $query = $this->db->get_where('pages', array('name' => $page));
        var_dump($query);
        if($query->num_rows()<1){
            echo $page;
            return FALSE;
        }
        else{
//          foreach($query->result() as $row){
//              $data[]=$row;
//          }
//          return $data;
    return $data=$query->result();

        }

    }
} 
```

和 contents.php 视图：

```
<div class="contents">
<?php 
foreach($info as $p){
    $c= $p->content;
}
echo $c;

?>
</div> 
```

pages.php 控制器：

```
<?php 
class Pages extends CI_controller{
    public function __construct(){
        parent::__construct();
        $this->load->model('page_model');
    }
    public function index($page){
        echo strlen("س");
        $data['info']=$this->page_model->get_content("ایران");
        var_dump($data['info']);
        $this->load->view('header',$data);
        $this->load->view('contents',$data);
        $this->load->view('footer');
    }

} 
```

它给了我这个错误：

```
 PHP Error was encountered

Severity: Warning

Message: Invalid argument supplied for foreach()

Filename: views/contents.php

Line Number: 3

A PHP Error was encountered

Severity: Notice

Message: Undefined variable: c

Filename: views/contents.php

Line Number: 6 
```

var_dump($page)：

```
string 'ایران' (length=10) 
```

var_dump($query)：

```
object(CI_DB_mysql_result)[16]
  public 'conn_id' => resource(29, mysql link persistent)
  public 'result_id' => resource(32, mysql result)
  public 'result_array' => 
    array (size=0)
      empty
  public 'result_object' => 
    array (size=0)
      empty
  public 'custom_result_object' => 
    array (size=0)
      empty
  public 'current_row' => int 0
  public 'num_rows' => int 0
  public 'row_data' => null 
```

var_dump（$信息）：

```
boolean false 
```

但我有一个列名=“ایران”的记录，我将 permited_url_chars 设置为空。

谢谢你

# actionscript-3 - 如何防止 Event.Resize 在 displayState 更改为 FULL_SCREEN 时触发两次？

> ID：10913432
> 
> 赞同：0
> 
> 时间：2012-06-06T11:36:38.457
> 
> 标签：actionscript-3, flash, events, fullscreen

我有一个带有全屏按钮的应用程序，当单击该按钮时，我将舞台的 displayState 更改为`StageDisplayState.FULL_SCREEN_INTERACTIVE`.

如果 .那会`Event.RESIZE`引起两次火灾`stage.scaleMode = StageScaleMode.NO_SCALE`。

如果我改回`stage.displayState = StageDisplayState.NORMAL`.

除了直接调用 onResize 函数或实现自定义事件之外，任何人都知道防止 Event.RESIZE 触发两次的好方法吗？

重现问题的示例代码：

```
package test
{
    import flash.display.Sprite;
    import flash.display.StageDisplayState;
    import flash.display.StageScaleMode;
    import flash.events.Event;
    import flash.events.MouseEvent;

    public class Main extends Sprite 
    {

        public function Main():void 
        {
            if (stage) 
                this.init();                
            else 
                this.addEventListener(Event.ADDED_TO_STAGE, init);
        }

        private function init(e:Event = null):void 
        {
            this.removeEventListener(Event.ADDED_TO_STAGE, init);
            stage.addEventListener(Event.RESIZE, onResize);
            stage.scaleMode = StageScaleMode.NO_SCALE;

            var button:Sprite = new Sprite();
            button.mouseEnabled = true;
            button.addEventListener(MouseEvent.CLICK, doResize);
            button.graphics.lineStyle(3,0x00ff00);
            button.graphics.beginFill(0x0000FF);
            button.graphics.drawRect(10, 10, 100, 100);
            button.graphics.endFill();

            this.addChild(button);
        }

        private function doResize(e:MouseEvent) : void {
            if (stage.displayState == StageDisplayState.NORMAL) {
                stage.displayState = StageDisplayState.FULL_SCREEN_INTERACTIVE;                
            }
            else {
                stage.displayState = StageDisplayState.NORMAL;
            }           
        }

        private function onResize(e:Event) : void {
            trace("onResize", stage.displayState);
        }       
    }   
} 
```

进一步调查表明，切换到全屏似乎需要两个步骤，首先将大小调整为 a `StageDisplayState.NORMAL`，然后再调整为`StageDisplayState.FULL_SCREEN_INTERACTIVE`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:02:04.920

似乎这是仅限于调试播放器的错误。

Flash Player 11.1 的调试版本重现了此错误，而 Chrome 版本 11.2 和浏览器插件 11.1 则没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-29T21:05:25.907

使用布尔值。例如，在 resize 函数中使其为 true 并检查是否不为 true 来执行它。

# iphone - Sencha Touch 2 - Iphone 应用程序 - 空白屏幕

> ID：10913436
> 
> 赞同：2
> 
> 时间：2012-06-06T11:37:00.847
> 
> 标签：iphone, extjs, screen

我正在使用 sencha touch 2 命令构建 iphone 应用程序。应用程序工作正常，除了当我在 iphone 上打开它时，它显示启动画面，然后显示白色空白屏幕 1-2 秒。我相信这可能是收集所有要执行的 sencha js 文件的问题。但是有什么办法可以显示临时屏幕而不是白色的空白屏幕？

我没有使用电话间隙来构建 iphone 应用程序。

谢谢，病毒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:54:45.727

在基于 phonegap 的应用程序中，将提供增加启动屏幕持续时间的规定。搜索相同的东西。您可能会为构建应用程序的方式找到解决方案（不是 phonegap）

编辑：尝试lazyload .. 即，在加载内容时使用类似悸动的东西。因为空白屏幕可能看起来像是应用程序无法正常工作

# visual-studio-2008 - 在构建后事件期间从批处理文件调用 al.exe

> ID：10913439
> 
> 赞同：1
> 
> 时间：2012-06-06T11:37:10.380
> 
> 标签：visual-studio-2008, build-automation

我有一个批处理文件，我想在 VS 2008 的构建后事件中调用它。这包含对`al.exe`. 所述项目的构建通常以`exit code 1`.

如果在批处理文件中，我将调用替换为调用`al.exe`，`C:\Windows\Microsoft.NET\Framework\v2.0.50727\al.exe`则构建事件将根据需要进行处理。这意味着在执行批处理文件期间找不到构建后事件“al.exe”。

问题是我需要在我们的构建服务器上执行它，而不仅仅是在我的机器上，从长远来看，不仅仅是在构建服务器上，所以我不想引用硬编码的路径名。

我遇到了环境变量`$(MSBuildBinPath)`，`$(MSBuildToolsPath)`但它们没有在构建后事件编辑器中列为宏，并且似乎没有解决问题，当我在批处理文件中使用它们时，如下所示：

```
"$(MSBuildToolsPath)\al.exe" /link: ... 
```

也许这里的语法（双引号）不正确？当然，我已经尝试了几种变体。如果没有：是否有人有任何其他提示如何使用硬编码路径字符串？我确实在这里找到了建议安装更新版本的 MS 工具的帖子，但是构建服务器的设置不受我的控制并且相当标准化，因此更改它会是一项相当痛苦的任务。出于这个原因，我更喜欢可以从 VS 2008 项目设置中控制的解决方案。

批处理文件是运行由另一个较早构建的项目生成的二进制文件的输出，因此如果我只知道如何在该其他项目中找出路径，我可以将正确的（与机器相关的）路径写入批处理文件或在该项目输出的二进制文件的运行时。

TIA，托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:44:10.350

当您调用`MSBuildToolsPath`脚本（在构建后）并`%1`使用`al.exe`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:18:11.540

您使用什么工具来自动化构建？

根据我的经验，我不建议将这样的内容直接添加到项目文件中。如果您在多个项目文件中执行此类操作，然后需要更改构建的工作方式，这将成为维护的噩梦。

借鉴@Attila 的建议，我会说创建一个简单的 MSBuild 文件来执行，该文件将处理构建，然后执行我的批处理文件。

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup>
    <ProjectsToBuild Include="MyCoolProject.csproj; MyCoolSolution.sln" />
  </ItemGroup>
  <Target Name="Build">
    <MSBuild Projects="@(ProjectsToBuild)" />
    <Exec Command="MyBatchFile.bat $(MSBuildToolsPath)" />
  </Target>
</Project> 
```

然后，不要让构建服务器在项目或解决方案文件上执行构建，而是在上面的文件上执行 MSBuild。

```
MSBuild.exe CoolProjectBuildFile.Build 
```

希望这可以帮助！如果您有任何问题，请告诉我。

# android - 在gridview中显示对话框

> ID：10913440
> 
> 赞同：0
> 
> 时间：2012-06-06T11:37:14.607
> 
> 标签：android, image, gridview, dialog

我已经实现了从 sdcard 中挑选的图像的网格视图。现在我希望每个图像都显示在单击对话框中。如何在图像适配器中执行此操作？任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:36:48.360

你不会在你的适配器中这样做......在你的点击监听器中做它（从你调用和设置gridview适配器的任何地方）。

```
gridview.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
       ImageView iv = (ImageView) v.findViewById(R.id.imageviewid);  // get the resource id
       Drawable image = iv.getDrawable();  // get the image
       CreateYourDialog(image);            // pass the image to a method to create your dialog
    }
}); 
```

如果您的 GridView 只是每个单元格的图像视图，那么您可以跳过`findViewById`代码行并简单地使用`Drawable image = v.getDrawable();`.

# php - php ssh2_auth_password 认证失败

> ID：10913445
> 
> 赞同：0
> 
> 时间：2012-06-06T11:38:18.573
> 
> 标签：php, ssh

我的 php 脚本生成了一个 excel 文件，我希望将这个文件传输到我们的文件服务器上，这与 web 不同。

我正在使用 ssh2_auth_password() 函数，但我被`Warning: ssh2_auth_password() [function.ssh2-auth-password]: Authentication failed for root using password`消息卡住了。

大多数情况下，通过更改`PasswordAuthentication yes`sshd_config 文件中的行来解决此问题。这是由返回一个数组的函数完成并确认的`ssh2_auth_none()`：“0：公钥，1：密码，2：键盘交互”

`scp /srv/www/htdocs/**** root@192.168.168.1:/***/***`当我通过 putty（键入）执行操作并提供密码时，它可以工作。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:00:09.017

最后，我只需要删除`ssh2_auth_none()`，它就可以了！

# ruby-on-rails - 自定义 Twitter 引导程序

> ID：10913461
> 
> 赞同：0
> 
> 时间：2012-06-06T11:39:17.157
> 
> 标签：ruby-on-rails, twitter-bootstrap

我正在使用 Twitter 引导程序和 Ruby on Rails 来开发应用程序。问题是，一旦我进入背景，颜色就会混乱。所以我想知道如何更改“默认网格系统”的颜色以及是否可以使用更多主题

```
rails generate bootstrap:themed <model name> -f    ?? 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:08:18.280

从生成器的外观来看，我假设您正在使用 gem [twitter-bootstrap-rails](https://github.com/seyhunak/twitter-bootstrap-rails)。

boostrap:themed 实际上只是将标记应用于模型的视图。查看github 上[twitter-bootstrap-rails / lib / generators / bootstrap / themed / templates / index.html.erb](https://github.com/seyhunak/twitter-bootstrap-rails/blob/master/lib/generators/bootstrap/themed/templates/index.html.erb)的模板，看看我的意思。例如，它通过使用`<table class="table table-striped">`. -f 参数是 --force （覆盖）

现在这向您展示了更改 CSS 所需的操作。最简单的方法就是覆盖[您要更改的 CSS](http://twitter.github.com/bootstrap/base-css.html)。

一个很好的方法是将覆盖的 CSS 放入 app/assets/stylesheets/bootstrap_and_overrides.css.less （或类似的，具体取决于您使用的类型）

如果我正确地回答了你的问题，你想覆盖 @bodyBackground[少变量](http://twitter.github.com/bootstrap/less.html)。

现在，也许这就是您问题的答案，很难理解您真正要求的是什么。

# iphone - 在应用程序中打开 pdf 会破坏设计

> ID：10913465
> 
> 赞同：1
> 
> 时间：2012-06-06T11:39:30.640
> 
> 标签：iphone, objective-c, cocoa-touch, uidocumentinteraction

我在做一件事时遇到了一些问题，我正在制作一个应用程序，并且我有一个显示 pdf 文件的 webview，如果单击，我有一个按钮将调用 UIDocumentInteractionController（在新窗口中打开 pdf）。

我将留下屏幕截图以使其更容易：

当我打开应用程序时：

[http://imgur.com/dpIEd](http://imgur.com/dpIEd)

打开 UIDocumentInteractionController 后：

[http://imgur.com/VYV2N](http://imgur.com/VYV2N)

这里也是代码

.h 文件

```
@interface pdfView : UIViewController <UIDocumentInteractionControllerDelegate>
{
    IBOutlet UIActivityIndicatorView *loading;
    IBOutlet UIWebView *Wview;
    UIDocumentInteractionController *controller;
}

@property (nonatomic, retain) IBOutlet UIActivityIndicatorView *loading;

@property (nonatomic, retain) IBOutlet UIWebView *Wview;

@property (nonatomic, retain) UIDocumentInteractionController *controller;

-(void)buttonPressed;
-(IBAction)open_in:(id)sender;
-(IBAction)back:(id)sender;

@end 
```

.m 文件

```
#import "pdfView.h"

@implementation pdfView

@synthesize loading,Wview;
@synthesize controller;

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (void)viewDidLoad
{
    [loading startAnimating];

    [super viewDidLoad];

    Wview.scalesPageToFit = TRUE;
    Wview.multipleTouchEnabled = TRUE;
    [Wview setOpaque:NO];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"guia_seguranca_2" ofType:@"pdf"];
    NSURL *targetURL = [NSURL fileURLWithPath:path];
    NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
    [Wview loadRequest:request];

    [loading stopAnimating];
}

-(IBAction)open_in:(id)sender
{
    NSString *fileToOpen = [[NSBundle mainBundle] pathForResource:@"guia_seguranca_2" ofType:@"pdf"];
    UIDocumentInteractionController* preview = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:fileToOpen]];
    preview.delegate = self;
    [preview presentPreviewAnimated:YES];
    [preview retain]; 
}

-(IBAction)back:(id)sender
{
    [self.view removeFromSuperview]; 
}

-(void)buttonPressed
{
    //[self.view removeFromSuperview];

    NSString *fileToOpen = [[NSBundle mainBundle] pathForResource:@"guia_seguranca_2" ofType:@"pdf"];
    UIDocumentInteractionController* preview = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:fileToOpen]];
    preview.delegate = self;
    [preview presentPreviewAnimated:YES];
    [preview retain]; 
 }

- (UIViewController *)documentInteractionControllerViewControllerForPreview:(UIDocumentInteractionController *)controller
{
    return self;
}

- (UIView *)documentInteractionControllerViewForPreview:(UIDocumentInteractionController *)controller
{
    return self.view;
}

- (CGRect)documentInteractionControllerRectForPreview:(UIDocumentInteractionController *)controller
{
    return self.view.frame;
}

- (void)documentInteractionControllerDidEndPreview:(UIDocumentInteractionController *)controller
{
    [self.controller autorelease];
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc. that aren't in use.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc
{
    [super dealloc];
    [Wview release];
    [loading release];
}

@end 
```

提前致谢.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:16:01.803

我建议不要使用 webview 并使用像这样的 pdf 应用程序（ibook、cloudreader）。

```
//name of pdf
NSString * pathString = @"userguide";
//get pdf path
NSString * filePath = [[NSBundle mainBundle] pathForResource:pathString ofType:@"pdf"];

NSURL *url = [NSURL fileURLWithPath:filePath];
self.docController = [UIDocumentInteractionController interactionControllerWithURL:url];

BOOL isValid = [self.docController presentOpenInMenuFromRect:self.handBookLaunch.frame inView:self.view  animated:YES];

if (!isValid) {
    NSString * messageString = [NSString stringWithFormat:@"No PDF reader was found on your device. Please download a PDF reader (eg. iBooks)."];

    UIAlertView * alertView = [[UIAlertView alloc] initWithTitle:@"Error" message:messageString delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alertView show]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T11:00:15.397

已解决，添加此代码用于布局验证：

```
-(void) viewWillAppear:(BOOL)animated
    {
    CGRect arect=[[UIScreen mainScreen]applicationFrame];

    CGRect anotherrect=[[UIApplication sharedApplication]statusBarFrame];

    if(self.view.center.y==arect.size.height/2)

    self.view.center=CGPointMake(self.view.center.x, self.view.center.y+anotherrect.size.height); // fix silliness in IB that makes view start 20 pixels higher than it should on iPhone
    } 
```

来源：[https ://discussions.apple.com/thread/2658315?start=0&tstart=0](https://discussions.apple.com/thread/2658315?start=0&tstart=0)

# forms - Symfony 2 从数组中添加选择

> ID：10913468
> 
> 赞同：0
> 
> 时间：2012-06-06T11:39:37.420
> 
> 标签：forms, symfony

我在 symfony 中的表单有问题。

首先是代码：

```
$test = array();
    foreach($docGrp as $dc){
        $test[] = $dc->getGruppenName();
    }
    $form = $this->createFormbuilder($document)
        ->add('gruppe', 'choice', array(
        'choices'   =>array(
            'Gruppen'   =>  $test,
        ),
        'multiple'  =>  true,
        'expanded'  => true,
    ))
        ->getForm(); 
```

我希望数组显示为复选框，并且它的值应该是数组中的值。但是，我得到一个例外，上面写着

“在渲染模板期间引发了异常（“警告：strtr() 期望参数 1 为字符串，给定数组”

因此，如果我将选择更改为“Gruppen =>”test”，它会起作用。但它违背了目的，我需要将这些值从数组中取出。

如果有人知道我的意思，帮助会很酷:)

到目前为止阿迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:06:30.060

问题在于您在表单中传递选择的方式。因为 $test 是一个数组，所以您实际上是在传递一个二维数组作为选择选项，例如 array('Gruppen' => array(....))，这是不允许的。

在 Symfony 中使用多选小部件时，我已经看到 2d 数组起作用。随着尺寸的增长，小部件会缩进选项。但它不适用于复选框。你想要做的是传递一个数组，如：

```
$countries = array(
    'au' => 'Australia',
    'at' => 'Austria',
    'az' => 'Azerbaijan',
    ...
); 
```

数组键是值。

```
$form = $this->createFormbuilder($document)
    ->add('country_code', 'choice', array(
        'choices'   => $countries
        'multiple'  =>  true,
        'expanded'  => true,
    )
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T13:37:28.857

试试这个代码：

```
foreach($docGrp as $dc)
{
    $test[] = array($dc->getGruppenID()=>$dc->getGruppenName());
}

$form = $this->createFormbuilder($document)
    ->add('gruppe', 'choice', 
      array('choices' =>$test
    ),
    'multiple'  =>  true,
    'expanded'  => true,

))
    ->getForm(); 
```

# google-app-engine - 使用服务帐户从 Google API Consol 连接到 Prediction API

> ID：10913475
> 
> 赞同：1
> 
> 时间：2012-06-06T11:39:50.220
> 
> 标签：google-app-engine, google-prediction

我第一次尝试使用 Google Prediction API。

我只是按照文章[https://developers.google.com/appengine/articles/prediction_service_accounts](https://developers.google.com/appengine/articles/prediction_service_accounts)中给出的步骤进行操作。

在执行上述文章中的步骤 2.4 时，我遇到了一个奇怪的问题。

我已按照以下步骤操作。

1) 我在 xyz.com 域中创建了一个应用程序，并且我的应用程序的服务帐户名称为“myapp@appspot.gserviceaccount.com”。

2）然后我转到 Google API 控制台上的“团队”选项卡，并尝试将我的应用程序的服务帐户名称添加到我已激活预测 API 和 Google Cloud Storage 的项目中。

在将服务帐户添加到项目时，它给了我一个错误，提示“只有域 xyz.com 中的用户可以添加到项目中”。同样的消息也显示在“团队”选项卡的底部。xyz.com 是部署我的应用程序的域。

谁能帮我理解为什么会出现这种消息？将服务帐户添加到 Google Console API 项目是否需要任何域级别的管理员设置？

问候，尼尔扎里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:29:53.367

目前，如果您使用自己的 Apps 帐户创建项目，则只能添加同一域的成员。

您需要做的是从 xxx@gmail.com 帐户（不是您的 Apps 域帐户）创建一个新项目。然后，您可以同时添加@appspot.gserviceaccount.com 和您自己的@xyz.com。

我认为您甚至可以稍后删除 xxx@gmail.com，一旦您添加了自己@xyz.com。如果您需要，甚至为自己激活账单@xyz.com，而不是 xxx@gmail.com。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:10:13.340

取自[https://developers.google.com/appengine/docs/python/googlestorage/overview](https://developers.google.com/appengine/docs/python/googlestorage/overview)

您可以手动修改存储桶的 ACL：

授予应用程序访问存储桶的另一种方法是使用 gsutil 实用程序手动编辑和设置存储桶 ACL 和默认对象 ACL：

*   获取存储桶的 ACL 并将其保存到文件以进行编辑：`gsutil getacl gs://mybucket > myAcl.txt`
*   将以下条目添加到您刚刚检索到的 ACL 文件中：

> <Entry>
> <Scope type="UserByEmail">
> <EmailAddress>
> your-application-id@appspot.gserviceaccount.com
> </EmailAddress>
> </Scope>
> <Permission>
> WRITE
> </Permission>
> </Entry>

*   如果要将多个应用程序添加到 ACL，请为每个应用程序重复上述条目，仅更改电子邮件地址以反映每个应用程序的服务名称。
*   在您的存储桶上设置修改后的 ACL：`gsutil setacl myAcl.txt gs://mybucket`

# php - 在 html 和 php 中创建模板

> ID：10913481
> 
> 赞同：0
> 
> 时间：2012-06-06T11:40:02.280
> 
> 标签：php, html, session

如何仅更改页面的内容而不更改周围的模板？

假设我有一个用户登录并查看他的帐户信息页面。如果页面只需要更改其中的某些元素怎么办？

这基本上就是我所做的：

```
<?php
session_start();
if($_SESSION['user'] == 'stuff'){
?>

User account page with certain changes in its content (html)

<?php
} else {
?>

User account page that says "you need to login first" with the same template (html)

<?php
}
?> 
```

所以，这里没有重定向。我该如何简化这个或者除了这种方式没有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:45:10.150

您还可以分别加载页眉和页脚。

主要内容会根据用户是否登录而改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:46:04.453

首先对模板进行编码。然后将代码复制到 PHP 变量中 - 最好将其存储在一些“templates.php”文件中，然后调用它。接下来，只需执行即可`print $header;`。

# android - 错误 MSB4185：“System.Globalization.CultureInfo”尚未启用执行

> ID：10913484
> 
> 赞同：8
> 
> 时间：2012-06-06T11:40:11.773
> 
> 标签：android, mono, monodevelop, xamarin.android, currentuiculture

当尝试使用 Mono for Android 构建 MonoDevelop 时，我收到此错误。根据调试它不在我的代码中，所以我一无所知。任何想法？

> 错误 MSB4185：类型“System.Globalization.CultureInfo”的函数“CurrentUICulture”尚未启用执行。(MSB4185)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T16:26:13.080

我拥有 MSBuild（和这段代码）。这是源自文件 microsoft.csharp.targets 的错误，正如错误消息可能所说的那样。里面有一个属性函数：

$([System.Globalization.CultureInfo]::CurrentUICulture.Name)

错误的意思是它认为这个函数不在 MSBuild 的“安全列表”中。这些是没有副作用的选定功能。（如果你想使用任何函数，你必须有一个环境变量 MSBUILDENABLEALLPROPERTYFUNCTIONS=1）。

我真的不知道为什么会出现这种情况，除非您以某种方式将 4.5 microsoft.csharp.targets 与 4.0 microsoft.build.dll 一起使用（安全列表中没有它）。除了与 Monodevelop 有关的情况外，我还没有收到有关此的报告。

请原谅我的天真，但我假设 Monodevelop 正在使用带有 Microsoft MSBuild 的 Microsoft .NET Framework，而不是重新实现它。

担

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T19:39:25.427

我的工作解决方案是这样的：

打开 CMD 并在其上运行以下命令：`setx MSBUILDENABLEALLPROPERTYFUNCTIONS 1`

我认为可用的另一个解决方案是安装[Mono Runtime](http://www.go-mono.com/mono-downloads/download.html)并将其设置为工具 -> 选项 -> .NET 运行时的默认 CLR 运行时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T17:13:58.973

从我的 Windows 7 机器上卸载 .NET Framework 4.5 RC 后，此错误消失了。当然，请确保在卸载 4.5 后拥有有效的 .NET 运行时。

# iphone - 如何使用蓝牙在 ipod 中查找其他设备？

> ID：10913487
> 
> 赞同：-4
> 
> 时间：2012-06-06T11:40:19.190
> 
> 标签：iphone, ios

在过去的两天里，我一直在努力解决这个问题。我需要做的是我需要在 iPhone 和 Android 之间传输数据，我已经通过了这个链接。我也在这方面取得了成功......

我能够在我的诺基亚设备中找到我的 iPhone，当我在诺基亚中单击“添加”时，一个 6 位数字会发送到 iPhone，然后问题就开始了。我不知道下一步该做什么。

我正在使用私有框架 BluetoothManager。请帮助我，因为我无法获得有关 BluetoothManager.framework 的任何文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:51:22.903

可以肯定的是，原生 iDevice 蓝牙堆栈不支持将数据发送到 iDevice 以外的任何设备，并且您需要在两端都有一个应用程序。

我从未听说过能够从 iPod/Phone/Pad 传输到任何其他设备。

# sql - 复杂的SQL编写

> ID：10913488
> 
> 赞同：1
> 
> 时间：2012-06-06T11:40:19.377
> 
> 标签：sql, sql-server-ce, sql-server-ce-4

我有这张桌子：

```
table session(
ID number,
SessionID VarChar,
Date,
Filter
) 
```

此表包含搜索信息，如下所示：

```
ID  SessionID                   Date                filter
4   peqq421gaspts3nuulq5mwcq    24/05/2012 13:48    meagPixel=5
6   peqq421gaspts3nuulq5mwcq    24/05/2012 13:48    brand=Canon
7   peqq421gaspts3nuulq5mwcq    24/05/2012 13:48    brand=Canon&meagPixel=12.1
8   peqq421gaspts3nuulq5mwcq    24/05/2012 13:48    brand=Canon
10  peqq421gaspts3nuulq5mwcq    24/05/2012 13:48    brand=Nikon
12  peqq421gaspts3nuulq5mwcq    24/05/2012 13:48    meagPixel=12.1
13  peqq421gaspts3nuulq5mwcq    24/05/2012 13:48    meagPixel=12.1&opticalZoom=True
14  peqq421gaspts3nuulq5mwcq    24/05/2012 13:49    meagPixel=12.1&opticalZoom=True&brand=Panasonic
16  peqq421gaspts3nuulq5mwcq    24/05/2012 13:49    price=500.00
18  peqq421gaspts3nuulq5mwcq    24/05/2012 13:49    price=499.00
19  peqq421gaspts3nuulq5mwcq    24/05/2012 13:49    price=499.00&brand=Olympus
21  peqq421gaspts3nuulq5mwcq    24/05/2012 13:49    zoomRange=2000
22  peqq421gaspts3nuulq5mwcq    24/05/2012 13:49    zoomRange=2000&brand=Leica
23  peqq421gaspts3nuulq5mwcq    24/05/2012 13:49    zoomRange=2000&brand=Leica&price=1995.00
24  peqq421gaspts3nuulq5mwcq    24/05/2012 13:49    zoomRange=2000&brand=Leica&price=1995.00&opticalZoom=True
25  peqq421gaspts3nuulq5mwcq    24/05/2012 13:49    zoomRange=2000&brand=Leica&price=1995.00&opticalZoom=True&meagPixel=16.2
26  peqq421gaspts3nuulq5mwcq    24/05/2012 13:50    zoomRange=2000&brand=Leica&price=1995.00&opticalZoom=True&meagPixel=16.2&weight=345
27  peqq421gaspts3nuulq5mwcq    24/05/2012 13:58    zoomRange=2000&brand=Leica&price=1995.00&opticalZoom=True&meagPixel=16.2
41  poiq41111spts00000q5aaaa    27/05/2012 13:48    meagPixel=5 
```

我想获得独特的搜索。独特的搜索是：

*   用户（会话）的最长搜索（过滤器）
*   如果第一个过滤器发生变化 - 它需要被视为新搜索（过滤器）

由于 ASP.NET 不保证 SessionID 是唯一的 (SessionID,Date) 是唯一的。

我没走多远：

```
SELECT        MAX(Filter)
FROM            Session
GROUP BY SessionID 
```

顺便说一句，我给出的示例表数据的结果应该返回：

```
ID  SessionID                   Date                filter              
4   peqq421gaspts3nuulq5mwcq    24/05/2012 13:48    meagPixel=5     
7   peqq421gaspts3nuulq5mwcq    24/05/2012 13:48    brand=Canon&meagPixel=12.1      
10  peqq421gaspts3nuulq5mwcq    24/05/2012 13:48    brand=Nikon     
14  peqq421gaspts3nuulq5mwcq    24/05/2012 13:49    meagPixel=12.1&opticalZoom=True&brand=Panasonic     
16  peqq421gaspts3nuulq5mwcq    24/05/2012 13:49    price=500.00        
19  peqq421gaspts3nuulq5mwcq    24/05/2012 13:49    price=499.00&brand=Olympus      
26  peqq421gaspts3nuulq5mwcq    24/05/2012 13:50    zoomRange=2000&brand=Leica&price=1995.00&opticalZoom=True&meagPixel=16.2&weight=345     
41  poiq41111spts00000q5aaaa    27/05/2012 13:48    meagPixel=5 
```

感谢您的任何帮助和指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:06:20.123

@GarethD - 用于 Schema 和插入查询的 Tx。我尝试了稍微不同的方法。我不确定这是否适用于所有情况。它在 mysql 和 mssql 中工作。

```
 select * 
          from tsession t1 
          where  not exists (
                             select * 
                             from tsession t2 
                             where t2.filter  like concat(t1.filter,'%') 
                             and t1.filter<>t2.filter 
                             and t1.sessionid=t2.sessionid) 
          order by id; 
```

这给出了问题中要求的准确结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:14:50.283

要获得最长的搜索过滤器，您需要执行以下操作：

```
select s.*
from (select s.*,
             row_number() over (partition by sessionid order by len desc) as rownum
      from (select s.*, len(filter) as len
            from session s
           ) s
     ) s
where rownum = 1 
```

我正在使用 Windows 功能执行此操作。您可以通过使用聚合和连接来做同样的事情。

但是，您是说 session 不是真正的标识符。会话/过滤器是。以下查询几乎可以满足您的需求：

```
select s.*
from (select s.*,
             row_number() overo over (partition by sessionid, filter 
                                      order by len desc) as rownum
      from (select s.*, len(filter) as len
            from session s
           ) s
     ) s
where rownum = 1 
```

（唯一的变化是分区子句包括过滤器。）

您可能有重复项。如果您想要所有重复项，则可以使用稍微不同的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:39:39.607

首先，您的示例数据中似乎存在错误，我认为第 25、26 和 27 行都应该出现在您的最终数据中。27 当然应该，因为它是会话 ID 和日期组合的唯一条目。

假设以上是正确的，那么我认为我已经正确地建立了您的逻辑。

第 1 步是为每个过滤器定义第一个搜索词，以及它在会话中出现的顺序：

```
;WITH CTE AS
(   SELECT  *, 
            SUBSTRING(Filter, 1, CASE WHEN CHARINDEX('&', Filter) = 0 THEN LEN(Filter) ELSE CHARINDEX('&', Filter) - 1 END) [FirstTerm],
    FROM    Session
) 
```

下一步是确定每次搜索是新搜索还是先前搜索的延续。这是通过获取会话中的上一个搜索词（为什么在最后一个 CTE 中定义了 SessionOrder）并确定第一个搜索词是否相同来完成的。

```
, CTE2 AS
(   SELECT  T1.*, 
            CASE WHEN T1.SessionOrder = 1 OR T2.SessionOrder IS NOT NULL THEN 1 ELSE 0 END [NewSearch]
    FROM    CTE T1
            LEFT JOIN CTE T2
                ON  T1.SessionID = T2.SessionID
                AND T1.Date = T2.Date
                AND T1.FirstTerm != T2.FirstTerm
                AND T1.SessionOrder = T2.SessionOrder + 1
) 
```

接下来，每个新搜索都需要在会话中拥有自己的排名，以便对目的进行分组。然后，您定义了规则（SessionID、日期和第一个搜索词的唯一组合），然后您可以根据过滤器的长度对唯一组合中的每个项目进行排序：

```
, CTE3 AS
(   SELECT  *,
            ROW_NUMBER() OVER(PARTITION BY SessionID, Date, ISNULL(SearchNumber, 0) ORDER BY LEN(Filter) DESC) [SearchOrder]
    FROM    CTE2 T1
            OUTER APPLY
            (   SELECT  SUM(NewSearch) [SearchNumber]
                FROM    CTE2 T2
                WHERE   T1.SessionOrder >= T2.SessionOrder
                AND     T1.SessionID = T2.SessionID
                AND     T1.Date = T2.Date
            ) c
) 
```

最后，您需要做的就是将结果限制为 SessionID、Date 和第一个过滤词的每个组合的最长搜索词：

```
SELECT  ID, SessionID, Date, Filter
FROM    CTE3
WHERE   SearchOrder = 1
ORDER BY ID 
```

通常我会把这一切放在 SQLFiddle 上，而不是在这里发布一个完整的工作示例，但它今天似乎不起作用。所以这是我用来测试数据的完整 SQL：

```
CREATE TABLE #Session (ID INT, SessionID VARCHAR(50), Date DATETIME, Filter VARCHAR(200))
INSERT INTO #Session VALUES
    (2, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:48', 'brand=Canon'),
    (4, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:48', 'meagPixel=5'),
    (6, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:48', 'brand=Canon'),
    (7, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:48', 'brand=Canon&meagPixel=12.1'),
    (8, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:48', 'brand=Canon'),
    (10, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:48', 'brand=Nikon'),
    (12, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:48', 'meagPixel=12.1'),
    (13, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:48', 'meagPixel=12.1&opticalZoom=True'),
    (14, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:49', 'meagPixel=12.1&opticalZoom=True&brand=Panasonic'),
    (16, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:49', 'price=500.00'),
    (18, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:49', 'price=499.00'),
    (19, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:49', 'price=499.00&brand=Olympus'),
    (21, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:49', 'zoomRange=2000'),
    (22, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:49', 'zoomRange=2000&brand=Leica'),
    (23, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:49', 'zoomRange=2000&brand=Leica&price=1995.00'),
    (24, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:49', 'zoomRange=2000&brand=Leica&price=1995.00&opticalZoom=True'),
    (25, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:49', 'zoomRange=2000&brand=Leica&price=1995.00&opticalZoom=True&meagPixel=16.2'),
    (26, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:50', 'zoomRange=2000&brand=Leica&price=1995.00&opticalZoom=True&meagPixel=16.2&weight=345'),
    (27, 'peqq421gaspts3nuulq5mwcq', '24/05/2012 13:58', 'zoomRange=2000&brand=Leica&price=1995.00&opticalZoom=True&meagPixel=16.2'),
    (41, 'poiq41111spts00000q5aaaa', '27/05/2012 13:48', 'meagPixel=5')

;WITH CTE AS
(   SELECT  *, 
            SUBSTRING(Filter, 1, CASE WHEN CHARINDEX('&', Filter) = 0 THEN LEN(Filter) ELSE CHARINDEX('&', Filter) - 1 END) [FirstTerm],
    FROM    #Session
), CTE2 AS
(   SELECT  T1.*, 
            CASE WHEN T1.SessionOrder = 1 OR T2.SessionOrder IS NOT NULL THEN 1 ELSE 0 END [NewSearch]
    FROM    CTE T1
            LEFT JOIN CTE T2
                ON  T1.SessionID = T2.SessionID
                AND T1.Date = T2.Date
                AND T1.FirstTerm != T2.FirstTerm
                AND T1.SessionOrder = T2.SessionOrder + 1
), CTE3 AS
(   SELECT  *,
            ROW_NUMBER() OVER(PARTITION BY SessionID, Date, ISNULL(SearchNumber, 0) ORDER BY LEN(Filter) DESC) [SearchOrder]
    FROM    CTE2 T1
            OUTER APPLY
            (   SELECT  SUM(NewSearch) [SearchNumber]
                FROM    CTE2 T2
                WHERE   T1.SessionOrder >= T2.SessionOrder
                AND     T1.SessionID = T2.SessionID
                AND     T1.Date = T2.Date
            ) c
)
SELECT  ID, SessionID, Date, Filter
FROM    CTE3
WHERE   SearchOrder = 1
ORDER BY ID

DROP TABLE #Session 
```

* * *

**附录**

好的，根据您的结果集，您实际上并不想按日期列分组，您只需将行按第一个搜索词和 sessionID 分组的长度顺序排列。

此查询产生与您的示例数据相同的结果。我在 2008 R1 中对此进行了测试，但看不出它在 SQL-Server CE 中不起作用的原因。

```
;WITH CTE AS
(   SELECT  *,
            ROW_NUMBER() OVER(PARTITION BY SessionID, SUBSTRING(Filter, 1, CASE WHEN CHARINDEX('&', Filter) = 0 THEN LEN(Filter) ELSE CHARINDEX('&', Filter) - 1 END) ORDER BY LEN(Filter) DESC) [RowNumber]
    FROM    Session
)
SELECT  *
FROM    CTE
WHERE   RowNumber = 1
ORDER BY ID 
```

* * *

最终解决方案的[SQL Fiddle](http://sqlfiddle.com/#!3/44e9b/2)

# java - 在java方法中调用路径

> ID：10913489
> 
> 赞同：0
> 
> 时间：2012-06-06T11:40:21.030
> 
> 标签：java, variables, path, environment

我在以下代码中调用路径（具有我需要运行的 python 文件）有一个小问题：

```
Process p = Runtime.getRuntime().exec(callAndArgs,env,
                    new java.io.File("C:\\Users\\Balkishore\\Documents\\NetBeansProjects\\Testinstrument_Rest\\build\\web"));//excuting python file 
```

从上面的代码可以看出，python文件是使用java.io.file函数中指定的路径调用的。但它非常具体，因为它只能在我的电脑上运行。我怎样才能使它通用，以便可以在任何计算机上运行这段代码？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:42:08.637

如果此文件已存在于应用程序中，那么您需要执行

```
ServletContext.getRealPath("/"); 
```

这将为您现在从这里提供到 Web 根目录的路径，您需要相对移动才能访问您的文件

* * *

如果这是一个外部文件

把它放进去`${user.home}/appname/`

```
String filePath = System.getProperty("user.home")+File.separator+"APP_NAME" 
```

并指示您的用户将文件放在此路径中，或从某个配置文件（.properties、.conf）中读取路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:44:14.593

将您的 python 脚本放置到相对于您的工作目录的位置并使用相对路径。或者使用配置文件或属性来读取路径。

# android - 如何在 Android 2.2+ 上支持标签？

> ID：10913490
> 
> 赞同：-1
> 
> 时间：2012-06-06T11:40:24.143
> 
> 标签：android, tabs

我正在尝试为所有 Android 2.2 及更高版本提供选项卡支持。有没有办法在不使用任何已弃用的类/方法的情况下实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:02:39.593

问题如下： TabActivity 已弃用，因为它派生自[ActivityGroup](http://developer.android.com/reference/android/app/ActivityGroup.html)也已弃用。问题是，在选项卡中启动 Activity 并且不要破坏回调，例如`onActivityResume`. 有一些“黑客”可以解决这个问题，但它们都依赖于已弃用的[LocalActivityManager](http://developer.android.com/reference/android/app/LocalActivityManager.html)。所以我看不到`Tabs`没有任何不推荐使用的调用的使用解决方案。自 Android 3.X 以来，谷歌为这种东西发明了[Fragments ，这些东西在低版本上受](http://developer.android.com/reference/android/app/Fragment.html)[SupportPackage](http://developer.android.com/sdk/compatibility-library.html)支持。如果您想避免弃用的类/方法，您应该明确地尝试将它们与新的[ActionBar结合使用](http://developer.android.com/reference/android/app/ActionBar.html)

编辑：链接到[FragmentTabs](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html)以供进一步参考

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T12:06:52.407

我同意拉斐尔给出的答案。

除了求助于 TabActivity，您还可以使用常规的 TabHost 在所有版本的 android 中显示选项卡。

# java - 在碧玉报告中将字符串格式化为货币格式

> ID：10913495
> 
> 赞同：19
> 
> 时间：2012-06-06T11:40:37.257
> 
> 标签：java, string, formatting, jasper-reports

我有一个带有一些数值的字符串。

我想以一种方式格式化它，数百以逗号分隔，并且数字前面有 $ 美元符号。

例如 12345 应格式化为 $12,345.00

我尝试了以下没有美元符号的代码：

```
new java.text.DecimalFormat(#,##0.00).format.(myString) 
```

以及下面带有美元符号的：

```
new java.text.DecimalFormat($ #,##0.00).format.(myString) 
```

但是，两者都给出错误。

实现这种格式的正确方法是什么？

这是 jasper report jrxml 的一部分，我想在报告中避免“null”，从而插入以下代码：

```
<textField isBlankWhenNull="false" isStretchWithOverflow="true">            
  <reportElement stretchType="RelativeToTallestObject" x="1350" y="0" width="150" height="30"/>             
      <textElement/>             
   <textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{myString}!=null?new java.text.DecimalFormat(#,##0.00).format.($F{myString}):"Unavailable"]]></textFieldExpression>        
</textField> 
```

其中 myString 来自查询并在 jrxml 中声明为：

```
 <field name="myString" class="java.lang.String"/> 
```

早些时候 myString 被声明为 BigDecimal，但后来比较运算符 ?= 不起作用。

如果货币值不可用，我想在报告上打印“不可用”而不是默认的“空”。否则，我希望数字的格式如上所述。

如何解决这个问题？

谢谢阅读。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-06T12:07:58.967

正确的表达是：

```
new java.text.DecimalFormat("$ #,##0.00").format(Double.valueOf($P{strParam})) 
```

***java.lang.Integer***和***java.lang.String***的工作示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="format_as_current" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <parameter name="intParam" class="java.lang.Integer">
        <defaultValueExpression><![CDATA[12345678]]></defaultValueExpression>
    </parameter>
    <parameter name="strParam" class="java.lang.String">
        <defaultValueExpression><![CDATA["12345678.95"]]></defaultValueExpression>
    </parameter>
    <title>
        <band height="79" splitType="Stretch">
            <textField>
                <reportElement x="137" y="18" width="291" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[new java.text.DecimalFormat("$ #,##0.00").format($P{intParam})]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="137" y="48" width="291" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[new java.text.DecimalFormat("$ #,##0.00").format(Double.valueOf($P{strParam} != null && $P{strParam}.length() > 0 ? Double.valueOf($P{strParam}) : 0))]]></textFieldExpression>
            </textField>
        </band>
    </title>
</jasperReport> 
```

结果将是（在*iReport*中预览）：

![*iReport* 中的结果](../Images/06d970bedc2dacf16a120d465d8550d8.png)

***注意：*** 您还应该添加对 null 的检查。

您还可以使用*textField的****模式***属性来格式化数据。

 *样品：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="format_as_current" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <parameter name="intParam" class="java.lang.Integer">
        <defaultValueExpression><![CDATA[12345678]]></defaultValueExpression>
    </parameter>
    <parameter name="strParam" class="java.lang.String">
        <defaultValueExpression><![CDATA["12345678.95"]]></defaultValueExpression>
    </parameter>
    <title>
        <band height="148" splitType="Stretch">
            <textField pattern="$ #,##0.00">
                <reportElement x="218" y="99" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$P{intParam}]]></textFieldExpression>
            </textField>
            <textField pattern="$ #,##0.00">
                <reportElement x="218" y="119" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$P{strParam} != null && $P{strParam}.length() > 0 ? Double.valueOf($P{strParam}) : 0]]></textFieldExpression>
            </textField>
        </band>
    </title>
</jasperReport> 
```

结果将是相同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T19:16:14.303

上面的代码适用于三种情况：

1.  修正小数点后两个零。当我尝试为此目的使用“双”数据类型时，它对我不起作用。但是这段代码可以做到。
2.  在字符串数据类型中的数字之前修复 $ -sign，并且还自己处理“-”符号。
3.  在数字中的 3 位数字后获取“，”

对我来说，我想在每三位数字之后加上“，”逗号（通过将字符串作为参数传递），我尝试了以下代码。它确实对我有用....非常感谢。我很欣赏这个答案。

```
<textFieldExpression>

<![CDATA[new java.text.DecimalFormat("$ #,##0.00").format(Double.valueOf($P{actualWrittenPremium} != null && $P{actualWrittenPremium}.length() > 0 ? Double.valueOf($P{actualWrittenPremium}) : 0))]]>

</textFieldExpression> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-02T18:33:07.703

刚刚遇到这个问题并找到了一个对我来说很好的解决方案。

请注意 - 这并不完全是 Autor 所要求的，但如果你用谷歌搜索这个问题，你最终会在这里。

我有德语和英语语言环境的服务器，所有货币都应该像`7.500,60`

我最后的表达：

```
new java.text.DecimalFormat("#,##0.00", new java.text.DecimalFormatSymbols(java.util.Locale.GERMANY)).format($F{variable}) + " €" 
```

所以语言环境设置是“硬编码的”——正是我需要的。

也许这会帮助某人

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-22T20:06:00.880

我使用 iReport 5.6.0 并接受了其中一些答案，但它对我有用的是：

文本字段（我把它放到设计器中）：

```
Float.valueOf($V{DISPONIBLE_FINAL}) 
```

在模式（进入属性选项卡）中，我使用了自定义格式：

```
$#,##0.00 
```

将此处提到的所有字符串放在整个“编辑表达式”字段中对我不起作用。

希望能帮助到你。

PD：我使用的是与 mvnrepository 站点中检查的 jasper 5.6.0 兼容的 groovy jar。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-14T17:04:29.550

在 iReport 中尝试推荐的答案时，我得到“美元符号后的非法字符串正文字符；” 当我运行报告时。

通过使用这样的反斜杠转义美元符号可以轻松解决：

```
new java.text.DecimalFormat("\$ #,##0.00").format(Double.valueOf($F{le1_feeAmount})) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-20T19:27:39.433

您也可以使用 iReport Studio 执行此操作。在工作室中单击字段并查看属性窗格。在**文本字段属性**下的属性窗格中，您将找到**Pattern**属性。粘贴**#,##0.00**或单击三个点并勾选弹出菜单中的复选框以分隔1000。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-23T20:01:42.623

问题是语言环境，这对我有用：

```
 new java.text.DecimalFormat("#,##0.00", new DecimalFormatSymbols(Locale.ENGLISH)).format(Double.valueOf($F{7})) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-29T19:15:32.273

使用`DecimalFormat`不是最佳的。对于格式化货币，我们应该使用`NumberFormat`. 有了`NumberFormat`我们，我们就更加灵活了；我们可以动态设置当前的语言环境，货币会自动适应所选的语言环境。

```
<![CDATA[ NumberFormat.getCurrencyInstance($P{REPORT_LOCALE}).format($F{price}) ]]> 
```

我们可以使用`REPORT_LOCALE`参数设置语言环境

```
def params = [REPORT_LOCALE: new Locale("sk", "SK")]
def jrPrint = JasperFillManager.fillReport(jrReport, params, ds) 
```

或与`net.sf.jasperreports.default.locale`财产。

```
net.sf.jasperreports.default.locale=sk_SK 
```

有关工作示例，请参阅[https://zetcode.com/jasperreports/formatcurrency/ 。](https://zetcode.com/jasperreports/formatcurrency/)*

# excel - 在 jasper 报告中的 excel 中命名动态生成的工作表名称

> ID：10913496
> 
> 赞同：4
> 
> 时间：2012-06-06T11:40:41.857
> 
> 标签：excel, jasper-reports, ireport

我有一个要求，我需要生成 excel 格式的报告。excel表格的表格将动态生成。我想知道是否有办法命名这些动态生成的工作表。使用 net.sf.jasperreports.export.xls.sheet.names.{arbitrary_name} 属性我们只能命名我们知道的工作表。对于其他工作表碧玉将默认名称设为“Page X”，依此类推。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:49:31.990

您可以准备一份报告列表并将其添加到 JasperPrint 列表中。

最后，您可以将列表中所有工作表的名称设置为：

```
exporterXLS.setParameter(JRXlsAbstractExporterParameter.SHEET_NAMES, new String[] {"sheet one", "sheet two",
            "sheet three"}); 
```

其中 exporterXLS 是 JRXlsExporter 类的一个实例。

下面是我上面描述的更完整的例子：

```
Connection con = this.jdbcTemplate.getDataSource().getConnection();
Map<String, String> hashmap = new HashMap<String, String>();
hashmap.put("ReportQuery", this.ReportQuery);
JasperReport myJasperReport = JasperCompileManager.compileReport(this.reportJRXML);
JasperPrint myJasperPrint = JasperFillManager.fillReport(myJasperReport, hashmap, con);

List<JasperPrint> jprintList = new ArrayList<JasperPrint>();

jprintList.add(myJasperPrint);
OutputStream outputfile = new FileOutputStream(new File(this.outputExcel));

JRXlsExporter exporterXLS = new JRXlsExporter();

exporterXLS.setParameter(JRExporterParameter.JASPER_PRINT_LIST, jprintList);
exporterXLS.setParameter(JRExporterParameter.OUTPUT_STREAM, outputfile);
exporterXLS.setParameter(JRXlsAbstractExporterParameter.IS_COLLAPSE_ROW_SPAN, Boolean.TRUE);
exporterXLS.setParameter(JRXlsAbstractExporterParameter.IS_REMOVE_EMPTY_SPACE_BETWEEN_COLUMNS, Boolean.TRUE);
exporterXLS.setParameter(JRXlsAbstractExporterParameter.IS_REMOVE_EMPTY_SPACE_BETWEEN_ROWS, Boolean.TRUE);
exporterXLS.setParameter(JRXlsAbstractExporterParameter.IS_ONE_PAGE_PER_SHEET, Boolean.FALSE);
exporterXLS.setParameter(JRXlsAbstractExporterParameter.IS_DETECT_CELL_TYPE, Boolean.FALSE);
exporterXLS.setParameter(JRXlsAbstractExporterParameter.IS_WHITE_PAGE_BACKGROUND, Boolean.FALSE);
exporterXLS.setParameter(JRXlsAbstractExporterParameter.IS_IGNORE_GRAPHICS, Boolean.TRUE);
exporterXLS.setParameter(JRXlsAbstractExporterParameter.SHEET_NAMES, new String[] {"first report"});
exporterXLS.exportReport(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T09:25:54.550

您可以通过在页眉或任何位置使用 line 元素动态地为单独的工作表命名。

注意：我们可以在元素级别而不是报表级别设置此属性，这就是我在示例中使用线作为元素的原因。

例子 ：

```
 <line>
            <reportElement x="140" y="17" width="50" height="1">
                <propertyExpression name="net.sf.jasperreports.export.xls.sheet.name"><![CDATA[$F{TERRITORY}]]></propertyExpression>
            </reportElement>
        </line> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-03T21:30:22.123

# 在 iReport 设计器中

使用 iReport Designer，您需要执行以下步骤：

1.  转到元素的属性
2.  滚动到名为“属性”的属性
3.  单击 3 点按钮以打开“属性”窗口
4.  点击添加
5.  在名称中输入“net.sf.jasperreports.export.xls.sheet.name”
6.  勾选“使用表达式”
7.  按下值字段右侧的按钮，然后
8.  选择您的字段、变量或参数。

## 在 JRXML

如果您想直接在 JRXML 文件中更改它，您需要找到您的元素并向其中添加以下 propertyExpression（用于使用字段作为工作表名称的输入）：

```
 <propertyExpression name="net.sf.jasperreports.export.xls.sheet.name">
      <![CDATA[$F{FieldName}]]>
 </propertyExpression> 
```

# dynamics-crm-2011 - 给定的键不在字典 Plugin CRM 2011 online 中

> ID：10913500
> 
> 赞同：1
> 
> 时间：2012-06-06T11:41:06.117
> 
> 标签：dynamics-crm-2011

谁能告诉我我做错了什么，我已经尝试了一个多星期了。

按照代码。

> 插件（执行）的意外异常：Microsoft.Crm.Sdk.Samples.ProjectTotalAmount：System.Collections.Generic.KeyNotFoundException：字典中不存在给定的键。

```
namespace Microsoft.Crm.Sdk.Samples
{
    public class ProjectTotalAmount : IPlugin
    {

        public void Execute(IServiceProvider serviceProvider)
        {

            Microsoft.Xrm.Sdk.IPluginExecutionContext context = (Microsoft.Xrm.Sdk.IPluginExecutionContext) serviceProvider.GetService(typeof(Microsoft.Xrm.Sdk.IPluginExecutionContext));

            if (context.InputParameters.Contains("Target") &&
                context.InputParameters["Target"] is Entity)
            {

                IOrganizationServiceFactory serviceFactory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
                IOrganizationService service = serviceFactory.CreateOrganizationService(context.UserId);

                //create a service context
                var ServiceContext = new OrganizationServiceContext(service);
                //ITracingService tracingService = localContext.TracingService;

                Entity entity = (Entity)context.InputParameters["Target"];

                if (entity.LogicalName == "new_project")
                {

                    Guid projectGUID = ((EntityReference)entity["new_project"]).Id;
                    Entity a = service.Retrieve("new_project", ((EntityReference)entity["new_project"]).Id, new ColumnSet(true));

                    decimal totalAmount = 0;

                    try
                    {
                        //fetchxml to get the sum total of estimatedvalue
                        string new_amount_sum = string.Format(@" 
                        <fetch distinct='false' mapping='logical' aggregate='true'> 
                            <entity name='new_projectitem'> 
                                <attribute name='new_amount' alias='new_amount' aggregate='sum' /> 
                                <filter type='and'>
                                    <condition attribute='new_projectid' operator='eq' value='{0}' uiname='' uitype='' />
                                </filter>
                            </entity>
                        </fetch>", a.Id);

                        EntityCollection new_amount_sum_result = service.RetrieveMultiple(new FetchExpression(new_amount_sum));

                        foreach (var c in new_amount_sum_result.Entities)
                        {
                            totalAmount = ((Money)((AliasedValue)c["new_amount_sum"]).Value).Value;
                        }

                        //updating the field on the account
                        Entity acc = new Entity("new_project");
                        acc.Id = a.Id;
                        acc.Attributes.Add("new_amount", new Money(totalAmount));
                        service.Update(acc);

                    }
                    catch (FaultException ex)
                    {
                        throw new InvalidPluginExecutionException("An error occurred in the plug-in.", ex);
                    }
                }
            }

        }
    }   
} 
```

插件的设置：

验证后同步执行模式服务器部署

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:05:25.540

在我们开始查看您的代码之前，一些可以帮助您的提示...

*   此错误通常意味着您的代码引用的属性不存在（或没有值）
*   你还没有说你的插件是在哪条消息上注册的。这可能会影响运行时的可用参数
*   您已经注释掉了您的`tracingService`变量，但这至少可以帮助您了解您的代码已经走了多远。恢复它并添加几行这样的行来跟踪您在失败之前的进度。此信息将写入客户端异常对话框中提供给您的错误日志。：

    ```
    tracingService.Trace("Project Id is {0}", projectGUID);` 
    ```

和

```
 tracingService.Trace("Number of returned records: {0}", new_amount_sum_result.Entities.Count);` 
```

*   以下行似乎完全多余，因为您只使用属性`Id`from`a`并且它已经存在为`entity.Id`：

    `Entity a = service.Retrieve("new_project", ((EntityReference)entity["new_project"]).Id, new ColumnSet(true));`

# android - 在可扩展列表视图中可点击的图像

> ID：10913501
> 
> 赞同：0
> 
> 时间：2012-06-06T11:41:15.883
> 
> 标签：android, expandablelistview

我在可扩展列表视图组的右侧有一个图像。我希望当我单击图像时，这会展开 de 组，但是当我单击图像时，它什么也不做。

我的 onCreate 中有这段代码，我不知道这是否必须在可扩展列表适配器中。

```
 /*****************************************************************/
// Elementos del layout
        expLista = getExpandableListView();
        expLista.setItemsCanFocus(true);
        expLista.setOnGroupClickListener(new OnGroupClickListener() {

            @Override
            public boolean onGroupClick(ExpandableListView parent, View v,
                    int groupPosition, long id) {
                grupoCLickeado = groupPosition;
                ImageView btnExpandir = (ImageView) v
                        .findViewById(R.id.imgExpandir);
                btnExpandir.setFocusable(false);
                btnExpandir.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        expLista.expandGroup(grupoCLickeado, true);
                    }
                });
                expLista.setOnGroupExpandListener(new OnGroupExpandListener() {

                    @Override
                    public void onGroupExpand(int groupPosition) {
                        expLista.collapseGroup(groupPosition);
                        codigoServicio = numerosServicios.get(groupPosition);
                    }

                });

                return false;
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:02:56.957

而不是使用**OnGroupExpandListener**您必须使用**setOnGroupClickListener**，

取而代之的是，

```
expLista.setOnGroupExpandListener(new OnGroupExpandListener() {

                @Override
                public void onGroupExpand(int groupPosition) {
                    expLista.collapseGroup(groupPosition);
                    codigoServicio = numerosServicios.get(groupPosition);
                }

            }); 
```

用这个，

```
expLista.setOnGroupClickListener(new OnGroupClickListener() {

                @Override
            public boolean onGroupClick(ExpandableListView parent, View v,
                        int groupPosition, long id) {

                        expLista.collapseGroup(groupPosition);
                        return true;
                    }
                    return true;
                }
            }); 
```

# php - Kohana 3.x call_user_func() 错误

> ID：10913506
> 
> 赞同：0
> 
> 时间：2012-06-06T11:41:35.337
> 
> 标签：php, callback

我一直在 Kohana 3 上收到此错误消息

> ErrorException [ 警告 ]: call_user_func() 期望参数 1 是有效的回调，未找到函数 'pages_save' 或无效的函数名

在我的控制器中，我有以下代码：

```
 public function action_pages(){
    return call_user_func('pages_'.$this->request->param('id'));
}
function pages_save(){
    $this->auto_render = false;
} 
```

如果我要访问 admin/pages/save 我应该被重定向到 pages_save() 函数对吗？但不知何故我不能？Kohana 不断向我抛出上述异常。我应该怎么做。在我看来，优化是一回事，如果我做 switch-case / if-else 块，如果我需要做的太多的话，我会永远花时间......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:57:42.200

首先，您应该相信错误消息。这意味着你犯了一个错误。稍微清理一下你的代码：

```
public function action_pages()
{
    $method = sprintf('pages_%s', $this->request->param('id'));
    return call_user_func($method);
}

public function pages_save()
{
    $this->auto_render = false;
} 
```

这里的变化很小：将缺少的可见性说明符添加到`pages_save`并将方法名放入名为`$method`.

现在它变得越来越明显，您在这里使用了一个未定义的公共函数名称，而不是您想要调用的类方法`$this`。所以让我们解决这个问题：

```
public function action_pages()
{
    $method = sprintf('pages_%s', $this->request->param('id'));
    return $this->$method();
} 
```

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:46:43.287

不是 Kohana，是 PHP 引发了错误。要`call_user_func()`在类中使用，您需要使用以下语法：

```
call_user_func(array($this, 'pages_'.$this->request->param('id'))); 
```

# javascript - 在 ASP Gridview 中使用 Fancybox

> ID：10913507
> 
> 赞同：1
> 
> 时间：2012-06-06T11:41:36.140
> 
> 标签：javascript, jquery, asp.net, gridview, fancybox

我想在我的 ASP.NET 网站中使用 Fancybox 插件。

*请注意，我是没有经验的程序员*

**简要概述**

我的网站有两个 aspx 页面，第一个页面包含具有 asp:HyperLinkField 的 asp:GridView，当单击一个弹出窗口时，“应该”出现有关单击行的更多详细信息。

**细节**

1) *Default.aspx*包含具有 asp:HyperLinkField 的 gridview 以将数据库字段传递给 URL。请注意，我使用 CssClass 来提供 Fancybox 类*“各种”*

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
         DataSourceID="ObjectDataSource1">
    <Columns>
    <asp:HyperLinkField DataTextField="kpiName" HeaderText="Name" 
        DataNavigateUrlFields="kpiNo, unit, YTD, kpiName, YEE" 
        DataNavigateUrlFormatString="../Popup/Detail.aspx?
         kpiNo={0}&unit={1}&YTD=  {2}&kpiName={3}&YEE={4}"> 
        <ControlStyle CssClass="various"></ControlStyle>
        </asp:HyperLinkField>
        <asp:BoundField DataField="unit" HeaderText="unit" SortExpression="unit" />
        ...
    </Columns> 
```

2) *Details.aspx*有 asp:DetailView 和 VB 代码来获取传递的参数

```
Request.QueryString("urlField") 
```

3) Fancybox 脚本

```
 $(document).ready(function() {
        $(".various").fancybox({
            maxWidth    : 800,
            maxHeight   : 600,
            fitToView   : false,
            width       : '70%',
            height      : '70%',
            autoSize    : false,
            closeClick  : false,
            openEffect  : 'none',
            closeEffect : 'none'
        });
    }); 
```

**我想要完成的是将 URL 字段传递给 Details.aspx，然后在 Fancybox 创建的弹出窗口中显示 Details.aspx**

谢谢

# c - 刷新多播组成员资格

> ID：10913509
> 
> 赞同：6
> 
> 时间：2012-06-06T11:41:48.777
> 
> 标签：c, linux, multicast, uclinux

我有几台嵌入式机器正在侦听并将 rtp 音频数据流式传输到多播组。它们连接到智能管理交换机 (Netgear GS108Ev2)，该交换机在其端口上执行基本的 igmp 侦听和多播过滤，这样我的 (W)LAN 的其余部分就不会被淹没。

开始时一切正常约 500-520 秒。之后，他们将不再**收到**任何数据，直到他们离开并再次加入该组。我猜这个开关在超时后“忘记”了加入。

有什么方法可以刷新组成员身份，即让交换机知道还有人在听，而不会丢失数据包？

系统信息：

```
Arch: blackfin

# cat /proc/version
Linux version 2.6.28.10-ADI-2009R1-uCBF54x-EMM
(gcc version 4.3.3 (ADI) ) #158 PREEMPT Tue Jun 5 20:05:42 CEST 2012 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:48:21.947

这就是多播/IGMP 协议的工作方式。客户必须通过发送*会员报告*定期加入群组，否则将假定他在短暂的超时后离开了群组。但是，这些报告通常仅在从本地多播路由器接收到*成员资格查询*时才发送。您的客户要么没有收到查询，要么没有回复报告。

尝试使用像 wireshark 这样的工具来查看哪些 IGMP 数据包是通过您的网络发送的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T19:32:56.657

正如 scai 已经解释的那样，您需要一个*IGMP 查询器*来发送.`Membership Queries`

如果您无法配置路由器来执行此操作，则可以使用其中一台计算机。看到运行一个完整的多播路由守护进程是多么的大材小用（我从来没有这样做过），我建议你尝试滥用[igmpproxy](http://sourceforge.net/projects/igmpproxy/)。

首先创建一个虚拟上游接口（这不是持久的！）：

```
ip tap add dev tap6 mode tap 
```

编写 igmpproxy.conf：

```
# Dummy upstream interface.
phyint tap6 upstream  ratelimit 0  threshold 1

# Local interface.
phyint eth0 downstream  ratelimit 0  threshold 1

# Explicitly disable any other interfaces (yes, it sucks).
phyint NAME disabled
... 
```

最后启动 igmpproxy（以 root 身份）：

```
igmpproxy -v /path/to/igmpproxy.conf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-24T08:02:47.543

如果您的嵌入式设备运行的是 linux，您需要关闭它们上的反向数据包过滤器，否则它们将不会响应组成员资格查询。在这种情况下，上游交换机将假定没有人在收听该多播并将其关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-05T08:46:55.103

我有同样的问题，wifi 上的多播在 260 秒后丢失，我通过在套接字上添加 AddSourceMembership 用我的应用程序解决了这个问题。

```
private void StartListner(IPAddress sourceIp, IPAddress multicastGroupIp, IPAddress localIp, int port)
{
    try
    {
        Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);

        IPEndPoint localEndpoint = new IPEndPoint(localIp, port);
        socket.Bind(localEndpoint);

        byte[] membershipAddresses = new byte[12]; // 3 IPs * 4 bytes (IPv4)
        Buffer.BlockCopy(multicastGroupIp.GetAddressBytes(), 0, membershipAddresses, 0, 4);
        Buffer.BlockCopy(sourceIp.GetAddressBytes(), 0, membershipAddresses, 4, 4);
        Buffer.BlockCopy(localIp.GetAddressBytes(), 0, membershipAddresses, 8, 4);
        socket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.AddSourceMembership, membershipAddresses);

        try
        {
            byte[] b = new byte[1024 * 2];
            int length = socket.Receive(b);
        }
        catch { }
    }
    catch (Exception ex)
    {
        logger.Error("Exception: " + ex);
    }
} 
```

# java - org.mozilla.javascript.EvaluatorException：当我使用 HtmlUnit 时出现非法字符

> ID：10913511
> 
> 赞同：3
> 
> 时间：2012-06-06T11:41:51.437
> 
> 标签：java, http-unit

我正在使用[HttpUnit](http://httpunit.sourceforge.net)来模拟设计成指定 url 的表单的提交按钮单击。（我正在使用`http://stu21.kntu.ac.ir/Login.aspx`）。我使用如下代码来获取响应页面。

```
 WebConversation conversation = new WebConversation();
    WebRequest request = new GetMethodWebRequest("http://stu21.kntu.ac.ir/Login.aspx");
    WebResponse response = conversation.getResource(request);       

    WebForm loginForm = response.getForms()[0]; //Form has been got successfully
    request = loginForm.getRequest();
    request.setParameter("txtusername", "8810103" );
    request.setParameter("txtpassword", "8810103" );
    response = conversation.getResponse( request ); //error while getting the .js files 
```

它成功获取表单，但是当我填写表单并想提交表单时，发生以下错误：

> getSubframeResponse(WebWindow.java:183) 在 com.meterware.httpunit.WebWindow.getResponse(WebWindow.java:158) 在 com.meterware.httpunit.WebWindow.updateWindow(WebWindow.java:199) 在 com.meterware.httpunit.WebWindow .getSubframeResponse(WebWindow.java:183) 在 com.meterware.httpunit.WebWindow.getResponse(WebWindow.java:158) 在 com.meterware.httpunit.WebClient.getResponse(WebClient.java:122) 在 Main.main(Main. java:76) 线程“main”中的异常 com.meterware.httpunit.ScriptException: Script 'ï»¿var shuffleArray = new Array(); //var 字段 = ""; shuffle = function (o) { //v1.0 java:183) 在 com.meterware.httpunit.WebWindow.getResponse(WebWindow.java:158) 在 com.meterware.httpunit.WebClient.getResponse(WebClient.java:122) 在 Main.main(Main.java:76) 异常在线程“主”com.meterware.httpunit.ScriptException：脚本'ï»¿var shuffleArray = new Array(); //var 字段 = ""; shuffle = function (o) { //v1.0 java:183) 在 com.meterware.httpunit.WebWindow.getResponse(WebWindow.java:158) 在 com.meterware.httpunit.WebClient.getResponse(WebClient.java:122) 在 Main.main(Main.java:76) 异常在线程“主”com.meterware.httpunit.ScriptException：脚本'ï»¿var shuffleArray = new Array(); //var 字段 = ""; shuffle = function (o) { //v1.0
> 
> ```
> for (var j, x, l = o.length; l; j = parseInt(Math.random() * l), x = o[--l], o[l] = o[j], o[j] = x);
> for (var H = 0; H < 10; H++) {
>     shuffleArray[H] = o[H];
> }
> return o; } 
> ```
> 
> ///////////////////////////键盘脚本函数 KeyPadInit() { alert("yes"); var 随机数；var myNumbers = new Array();
> 
> ```
> for (jj = 0; jj < 10; jj++) {
>     randomnumber = Math.floor(Math.random() * 10);
>     while (IsInArray(myNumbers, randomnumber) == 1) {
>         randomnumber = Math.floor(Math.random() * 10);
>     };
>     switch (jj) {
>         case 0: document.getElementById('btnSeven0').value = randomnumber; break;
>         case 1: document.getElementById('btnSeven1').value = randomnumber; break;
>         case 2: document.getElementById('btnSeven2').value = randomnumber; break;
>         case 3: document.getElementById('btnSeven3').value = randomnumber; break;
>         case 4: document.getElementById('btnSeven4').value = randomnumber; break;
>         case 5: document.getElementById('btnSeven5').value = randomnumber; break;
>         case 6: document.getElementById('btnSeven6').value = randomnumber; break;
>         case 7: document.getElementById('btnSeven7').value = randomnumber; break;
>         case 8: document.getElementById('btnSeven8').value = randomnumber; break;
>         case 9: document.getElementById('btnSeven9').value = randomnumber; break;
>     }
>     myNumbers[myNumbers.length] = randomnumber;
> } 
> ```
> 
> }
> 
> 函数 IsInArray(objArray, num) { for (i = 0; i <= objArray.length - 1; i++) { if (objArray[i] == num) 返回 1; } 返回 0; }
> 
> 功能改变风格（objbtn，动作）{
> 
> ```
> if (action == 'out') {
>     objbtn.className = 'PadStyle';
> }
> else if (action == 'over') {
>     objbtn.className = 'PadStyleOver';
> } 
> ```
> 
> }
> 
> var inpId = new Array(); var shuffleArray = new Array();
> 
> // ***** ** *** ** *** ** *** ** *** ** *** ** *** ******计算输入框的数量****** ** *** ** *** ** *** ** *** ** *** ** *** * * *** ** *** *****fillArray = function () { inpId.splice(0, inpId.length - 1); 变量 i = 0; var InputsId = document.getElementsByTagName("input"); for (var k = 0; k < InputsId.length; k++) { if ((InputsId[k].type == "text") || (InputsId[k].type == "password") || (InputsId [k].type == "checkbox") || (InputsId[k].type == "submit")) { if (!(InputsId[k].disabled)) { inpId[i++] = InputsId[k] ; } } } }
> 
> 函数 AmountMaskE2(amount) { var i, j, mystring, flag;
> 
> ```
> if (amount == '')
>     return "";
> 
> i = amount.length;
> 
> mystring = "";
> for (j = 0; j < i; j++) {
>     if (amount.substring(j, j + 1) == ",") {
>         flag = true;
>     }
> }
> 
> if (flag == true) {
>     amount = DAmountMaskE(amount);
> }
> i = amount.length;
> if (i > 3) {
>     for (j = i; j > 0; j = j - 3) {
> 
>         if (j > 3) {
>             mystring = "," + amount.substring(j - 3, j) + mystring;
> 
>         } else {
>             mystring = amount.substring(0, j) + mystring;
>         }
>     }
> 
>     return mystring;
> } else {
> 
>     return amount;
> } 
> ```
> 
> }
> 
> 函数 DAmountMaskE(amount) { var i, j, mystring, str; 我=数量.长度；我的字符串 = "";
> 
> ```
> for (j = i; j >= 0; j -= 1) {
>     str = amount.substring(j, j - 1);
>     if (str != ",") {
>         mystring = str + mystring;
>     }
> }
> return mystring; }' failed: org.mozilla.javascript.EvaluatorException: illegal character  at 
> ```
> 
> com.meterware.httpunit.javascript.ScriptingEngineImpl.handleScriptException(ScriptingEngineImpl.java:64) 在 com.meterware.httpunit.javascript.ScriptingEngineImpl.runScript(ScriptingEngineImpl.java:95) 在 com.meterware.httpunit.scripting.ScriptableDelegate.runScript( ScriptableDelegate.java:88) 在 com.meterware.httpunit.parsing.NekoDOMParser.runScript(NekoDOMParser.java:151) 在 com.meterware.httpunit.parsing.ScriptFilter.getTranslatedScript(ScriptFilter.java:150) 在 com.meterware.httpunit .parsing.ScriptFilter.endElement(ScriptFilter.java:131) 在 org.cyberneko.html.filters.DefaultFilter.endElement(DefaultFilter.java:249) 在 org.cyberneko.html.filters.NamespaceBinder.endElement(NamespaceBinder.java:367 ) 在 org.cyberneko 的 org.cyberneko.html.HTMLTagBalancer.callEndElement(HTMLTagBalancer.java:1015)。html.HTMLTagBalancer.endElement(HTMLTagBalancer.java:888) at org.cyberneko.html.HTMLScanner$SpecialScanner.scan(HTMLScanner.java:2831) at org.cyberneko.html.HTMLScanner.scanDocument(HTMLScanner.java:809) at org .cyberneko.html.HTMLConfiguration.parse(HTMLConfiguration.java:478) at org.cyberneko.html.HTMLConfiguration.parse(HTMLConfiguration.java:431) at org.apache.xerces.parsers.XMLParser.parse(Unknown Source) at org .apache.xerces.parsers.DOMParser.parse(Unknown Source) at com.meterware.httpunit.parsing.NekoHTMLParser.parse(NekoHTMLParser.java:48) at com.meterware.httpunit.HTMLPage.parse(HTMLPage.java:271)在 com.meterware.httpunit.WebResponse.getReceivedPage(WebResponse.java:1301) 在 com.meterware.httpunit.WebResponse.getFrames(WebResponse.java:1285) 在 com.meterware.httpunit.WebResponse。getFrameRequests(WebResponse.java:1024) at com.meterware.httpunit.FrameHolder.updateFrames(FrameHolder.java:179) at com.meterware.httpunit.WebWindow.updateFrameContents(WebWindow.java:315) at com.meterware.httpunit.WebClient .updateFrameContents(WebClient.java:526) 在 com.meterware.httpunit.WebWindow.updateWindow(WebWindow.java:201) 在 com.meterware.httpunit.WebWindow.getSubframeResponse(WebWindow.java:183) 在 com.meterware.httpunit。 WebWindow.getResponse(WebWindow.java:158) 在 com.meterware.httpunit.WebWindow.updateWindow(WebWindow.java:199) 在 com.meterware.httpunit.WebWindow.getSubframeResponse(WebWindow.java:183) 在 com.meterware.httpunit .WebWindow.getResponse(WebWindow.java:158) 在 com.meterware.httpunit.WebWindow.updateWindow(WebWindow.java:199) 在 com.meterware.httpunit.WebWindow。getSubframeResponse(WebWindow.java:183) 在 com.meterware.httpunit.WebWindow.getResponse(WebWindow.java:158) 在 com.meterware.httpunit.WebClient.getResponse(WebClient.java:122) 在 Main.main(Main.java :76)

谁能给我一个解决我的问题的解决方案？

# sas - 如何在 9.3 Unix 服务器上设置自动调用宏

> ID：10913513
> 
> 赞同：0
> 
> 时间：2012-06-06T11:41:54.073
> 
> 标签：sas, sas-macro

我正在使用企业版 SAS (v9.3) 并想设置一些通用宏（用于记录目的），以便部门中的每个人都可以使用它们。

我知道我想要的是自动调用功能，但我能找到的唯一信息是在本地安装上设置这些。谁能指出一些关于如何在（Unix）服务器上设置这些的文档？

谢谢

乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:21:05.863

您正在寻找 SASAUTOS 系统选项。它记录在“SAS Companion for UNIX”中：http: [//support.sas.com/documentation/cdl/en/hostunx/63053/HTML/default/viewer.htm#n0uf2iszq5m4kin1qqpywhjwabpt.htm](http://support.sas.com/documentation/cdl/en/hostunx/63053/HTML/default/viewer.htm#n0uf2iszq5m4kin1qqpywhjwabpt.htm)

执行此操作的“最安全”位置是在系统配置文件中（SASHOME 目录中的 sasv9_local.cfg）。

# objective-c - 内存泄漏误报

> ID：10913514
> 
> 赞同：2
> 
> 时间：2012-06-06T11:41:57.037
> 
> 标签：objective-c, xcode, memory-leaks, clang-static-analyzer

我的模型中有一个简单的方法来创建一个包含其属性的 NSDictionary 对象。不幸的是，“分析”认为这种方法正在泄漏内存：

**在第 76 行分配并存储在“dic”中的对象的潜在内存泄漏（此处用点标记）。**

```
-(NSDictionary*) getDictionary {
    NSDictionary *dic = [[NSDictionary alloc] init];

    [dic setValue:(id)self.internal_code forKey:@"internal_code"];
    [dic setValue:(id)self.identifier forKey:@"id"];
    [dic setValue:(id)self.owner forKey:@"owner"];
    [dic setValue:(id)self.address forKey:@"address"];
    [dic setValue:(id)self.displayed_name forKey:@"displayed_name"];

    return dic;
} 
```

我没有使用 ARC。

PS：对于进来的人来说，我发布的原始代码是正确的——它有一个自动发布。之后我对其进行了编辑，因此内存泄漏会再次出现并准确询问原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:50:16.027

尝试在返回 dic 时自动释放，如下所示

```
return[dic autorelease]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:58:56.053

`alloc`从不以、或开头的方法返回对象时`copy`，该对象必须以自动释放的形式返回。`mutableCopy``new`

从概念上讲，当您返回它时，它不应该*归*您的代码所有。当您键入 、 或 时，您获得了`alloc`对象的`copy`所有权。当您键入或时，您放弃所有权。`mutableCopy``new``release``autorelease`

您可以将您的退货声明更改为：

```
return [dic autorelease]; 
```

或者更好的做法是将`alloc`//全部放在一行，这样代码更易于查看，并且在复制和粘贴代码时不会意外分离分配和释放：`init``autorelease`

```
NSDictionary *dic = [[[NSDictionary alloc] init] autorelease]; 
```

一个更简单的方法是使用这个方便的构造函数`NSDictionary`：

```
NSDictionary *dic = [NSDictionary dictionary]; 
```

以上几行将修复内存泄漏。但是，您还试图改变不可变类型 ( `NSDictionary`)。您应该改用可变字典：

```
NSMutableDictionary *dic = [NSMutableDictionary dictionary]; 
```

最后，理想情况下，您应该使用该`setObject:forKey:`方法设置值，尽管`setValue:forKey:`也可以。

有关内存管理的更多信息，请阅读[Advanced Memory Management Programming Guide](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/memorymgmt/Articles/MemoryMgmt.html)。

如果您的目标是 iOS 4 或更高版本，我强烈建议您使用 ARC。

# php - 遍历关联数组

> ID：10913515
> 
> 赞同：0
> 
> 时间：2012-06-06T11:42:01.443
> 
> 标签：php, json

我正在尝试通过此 API 调用获取特定用户的所有 Twitter 关注者

```
https://api.twitter.com/1/users/lookup.json?screen_name=twitterapi,twitter&include_entities=true 
```

那里有一个示例输出：

```
https://dev.twitter.com/docs/api/1/get/users/lookup 
```

我正在尝试通过执行以下操作来获取用户的屏幕名称：

```
$json2=file_get_contents('http://api.twitter.com/1/users/lookup.json?user_id='.$post.'') ; 
$accounts2 = json_decode($json2);

while( $element = each( $accounts2 ) ) {
  echo $element[ 'screen_name' ];
  echo '<br />';
} 
```

其中 $post 是连接在一起的所有 id（大约 100 个）。

以上将失败：

```
Notice: Trying to get property of non-object 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T11:47:42.773

替换这一行：

```
$accounts2 = json_decode($json2); 
```

有了这个：

```
$accounts2 = json_decode($json2, true); 
```

它将其转换为关联数组。因为`user_id`是唯一的，所以您不必遍历结果，而可以简单地这样做：

```
echo $accounts2[0]['screen_name'] . '<br />'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:07:51.040

这行得通。

```
$json2=file_get_contents('http://api.twitter.com/1/users/lookup.json?user_id='.$post.'') ; 
$accounts2 = json_decode($json2);
foreach ($accounts2 as $key => $jsons) {

             foreach($jsons as $key => $value) {

                if($key == 'screen_name'){
                 echo $value;
                }

            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:14:38.893

用这个。

```
$json2=file_get_contents('http://api.twitter.com/1/users/lookup.json?user_id='.$post.'') ; 
$accounts2 = json_decode($json2,true);

echo $accounts2[0]['screen_name']; 
```

# java - “RMI TCP Connection(idle)”线程对应什么类型的连接？

> ID：10913516
> 
> 赞同：7
> 
> 时间：2012-06-06T11:42:03.877
> 
> 标签：java, rmi

我正在使用 jdk1.6 开发基于 RMI 的分布式系统。

有时`ConcurrentModificationException`，当 RMI 运行时无法序列化对象时，我会看到该线程上发生的错误。我可以通过同时更新从远程方法返回的对象来轻松重现该异常。

但问题是我找不到这些电话的来源。RMI 异常被写入`stderr`（在它退出远程对象方法后在运行时代码中的服务器端捕获），但在客户端服务中没有匹配的异常（如果这是一个合法的远程调用，`RemoteException`则会引发适当的原因）。

这些异常的唯一不同之处在于它们发生在“RMI TCP Connection(idle)”线程上，而不是像“RMI TCP Connection(<connection count>)-<client endpoint info>”这样的线程上。

关于 RMI 中那些“空闲”线程的任何线索？我没有在 openjdk 源代码中找到这样的。

更新：我正在添加一个异常堆栈跟踪作为复制，这是您通常在所描述的情况下看到的。

服务器端控制台显示：

```
Exception dispatching call to [-3534448f:12f54948b7f:-7fff, 349678755005857493] in thread "RMI TCP Connection(6)-x.x.x.x" at Thu Apr 14 16:15:13 BST 2011:
java.util.ConcurrentModificationException
    at java.util.ArrayList.writeObject(ArrayList.java:573)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:945)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1469)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
    at sun.rmi.server.UnicastRef.marshalValue(UnicastRef.java:274)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:315)
    at sun.rmi.transport.Transport$1.run(Transport.java:159)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

向调用者抛出客户端大小异常：

```
java.rmi.UnmarshalException: error unmarshalling return; nested exception is:
    java.io.EOFException
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:173)
    at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:178)
    at java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:132)
    at $Proxy0.getData(Unknown Source)
    at Clnt.main(Clnt.java:11)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:115)
Caused by: java.io.EOFException
    at java.io.ObjectInputStream$BlockDataInputStream.peekByte(ObjectInputStream.java:2553)
    at java.io.ObjectInputStream.skipCustomData(ObjectInputStream.java:1899)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1873)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1752)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
    at sun.rmi.server.UnicastRef.unmarshalValue(UnicastRef.java:306)
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:155)
    ... 9 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T01:37:32.723

线程在 RMI 的连接池中创建，名称为“RMI TCP Connection(idle)”。当使用其中之一时，用于执行的可运行将线程重命名为“RMI TCP Connection(n)”，其中`n`正在处理的连接号（序列号），并在可运行的中重命名为“空闲”最后阻塞。因此，任何标记为“RMI TCP Connection(idle)”的跟踪都必须在可运行对象将其重命名为连接线程之前出现，或者在它被重命名回来之后出现。

不要问我怎么可能。如果不是您的问题，您的问题的实际答案是不要在同时返回对象时修改它们；-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:35:53.310

我到了它的底部。问题发生在两种情况下：

1.  当封送返回值引发一些异常并且该异常又包含易于并发修改的对象时。`UnicastServerRef`尝试将原因写入（已经损坏的）返回流和原因`ConcurrentModificationException`。
2.  当方法引发异常并且此异常无法序列化`ConcurrentModificationException`（或任何其他运行时异常）时。
    这个异常一直向上堆栈，并被线程池捕获和记录，而不是 RMI 运行时（这就是为什么`Exception dispatching call to`开头没有行）。这解释了线程名称是空闲的，因为从 RMI 的角度来看，它已经返回到池中。

这是真正的异常，实际上与在第一行和实际调用跟踪方面再现的异常显示的有点不同：

```
Exception in thread "RMI TCP Connection(idle)" java.util.ConcurrentModificationException
 at java.util.ArrayList.writeObject(ArrayList.java:573)
 at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
 at java.lang.reflect.Method.invoke(Method.java:597)
 at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:945)
 at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1461)
 at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1392)
 at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1150)
 at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1509)
 at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1474)
 at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1392)
 at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1150)
 at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1509)
 at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1474)
 at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1392)
 at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1150)
 at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1509)
 at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1474)
 at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1392)
 at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1150)
 at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:326)
 at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:343)
 at sun.rmi.transport.Transport$1.run(Transport.java:159)
 at java.security.AccessController.doPrivileged(Native Method)
 at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
 at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
 at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
 at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
 at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
 at java.lang.Thread.run(Thread.java:619) 
```

它没有为原始问题提供太多线索，所以我必须等待客户端异常出现在某个时候才能解决这个问题。
如果通过 jconsole 读取 JMX 属性时发生这种异常，它不会显示堆栈跟踪，但会显示属性值不可用。

# iphone - sqlite3 和 fmdb 嵌套 FMResultSet 是可能的吗？

> ID：10913517
> 
> 赞同：5
> 
> 时间：2012-06-06T11:42:04.603
> 
> 标签：iphone, ios, sqlite, fmdb

我正在尝试通过主要详细信息类型的表进行迭代，并且我想在进行时填充主要/详细信息结构。显然，当我嵌套结果集时，我得到一个 BAD Access 异常：

```
FMDatabase *db = self.database;
[db open];
db.traceExecution = YES;
db.logsErrors = YES;
FMResultSet *rs = [db executeQuery:@"select group_id, label from main.preference_group order by group_id"];
while ([rs next])
{
    PreferenceGroup *pg = [[PreferenceGroup alloc] init];
    pg.group_id = [rs intForColumn:@"group_id"];
    pg.label = [rs stringForColumn:@"label"];
    pg.translatedLabel = NSLocalizedString(pg.label, nil);
    NSMutableArray * prefs = [[NSMutableArray alloc] init];
    [prefGroups addObject:prefs];
    FMResultSet *rs2 = [db executeQuery:@"select pref_id, label, value from main.preference where group_id = ? order by pref_id", pg.group_id, nil];
        while ([rs2 next])
        {
            Preference * pref = [[Preference alloc] init];
            pref.group_id = pg.group_id;
            pref.pref_id = [rs2 intForColumn:@"pref_id"];
            pref.label = [rs2 stringForColumn:@"label"];
            pref.value = [rs2 stringForColumn:@"value"];
            pref.translatedLabel = NSLocalizedString(pref.value, nil);
            [prefs addObject:pref];
        }
        [rs2 close];
    }
    [rs close];
    [db close]; 
```

在 rs2（第二个结果集）中，我得到了 FMDatabase 类中的 EXEC_BAD_ACCESS。

这是对 sqlite3/fmdb 的限制还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:45:01.770

我刚刚发现我做错了什么。作为第二个查询的一部分，我传递了一个 int 。我必须将其转换为 NSNumber：

```
 FMResultSet *rs2 = [db executeQuery:@"select pref_id, label, value from main.preference where group_id = ? order by pref_id", [NSNumber numberWithInt:pg.group_id], nil]; 
```

这意味着，是的，sqlite3/fmdb 确实支持嵌套查询！:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:28:29.843

我也在使用 FMDB 和 SQLITE3，我发现嵌套查询有效：

（我并不是说下面的代码提示很好，请不要介意格式）

Master 和 Detail 表都有一个名为“id”的列

```
FMResultSet *rso = [database executeQuery:@"select * from master order by id"];
while ([rso next])
{
    NSInteger masterId = [rso intForColumn:@"id"];
    NSString *q3 = [[NSString alloc] initWithFormat:
               @"select * from detail where masterid = %d order by id", masterId, nil ];

    FMResultSet *rsa = [database executeQuery:q3 ];

    while ([rsa next])
    {
        NSInteger detailId   = [rsa intForColumn:@"id"];
        //
        // here do something with masterId and detailId 
    }
} 
```

实际上，这是一个令人愉快的惊喜。我一半期望必须首先查询所有主记录，然后在应用程序内存中循环它们以从 SQlite3 中获取详细信息。但上述构造工作正常。

# java - 在 JTable 中显示一个 ResultSet 内存消耗高

> ID：10913521
> 
> 赞同：1
> 
> 时间：2012-06-06T11:42:11.647
> 
> 标签：java, memory, jtable, resultset, consumption

我目前正在编写一个跟踪监视器，它从设备接收消息以进行调试。它看起来很像 WireShark。

跟踪存储在数据库中，JTable 显示 ResultSet。问题是：只要 Trace-Monitor 连接到设备，内存消耗就会随着每个传入的跟踪消息而增加。我认为这是因为 JTable 持有引用。

如何告诉 JTable 仅将用户在滚动区域中实际看到的数据保留在内存中？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T07:00:12.313

这样做可能对你有用

模型.setRowCount(0);

# ios - cellForRowAtIndexPath 为除第一个以外的任何部分返回 nil

> ID：10913525
> 
> 赞同：2
> 
> 时间：2012-06-06T11:42:38.637
> 
> 标签：ios, objective-c, iphone, xcode

我有一个`UITableViewController`，它`UITableView`是静态的，有三个部分。我正在尝试`viewWillAppear`像这样填充我的静态部分：

```
-(void) viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [[[self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]] detailTextLabel] setText:@"Stuff"];
    [[[self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:1]] detailTextLabel] setText:@"Other stuff"];
    ...
} 
```

第一行很好地填充了第 0 行中的第 0 行，但第二行（实际上是对除第一行之外的任何部分的任何 cellForRowAtIndexPath 调用）返回一个 nil 单元格。

我做了一些测试来尝试缩小问题范围：

```
[self.tableView numberOfSections] // returns 3 - which is correct
[self.tableView numberOfRowsInSection:1] // return 4 - which is unique and correct for my second section 
```

因此，表格视图似乎具有正确的部分，但是：

```
[self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:1] // nil 
```

我很困惑 - 有没有人知道可能是什么原因造成的？

我在代码中没有什么特别之处：它是在故事板中创建的一个简单的静态表，从一开始就设置了所有三个部分；视图控制器正确地是 UITableViewController 的子类；我可以完美地填充第 0 部分，并且所有工作都如我所料。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:29:33.013

如果视图控制器最初出现时单元格不在屏幕上，则它们可能尚未设置。您应该改为创建您感兴趣的单元格的出口并以这种方式修改值。

# css - IE 中的 Wordpress CSS 错误

> ID：10913528
> 
> 赞同：1
> 
> 时间：2012-06-06T11:42:52.340
> 
> 标签：css, wordpress, internet-explorer

我已经建立了一个网页，它在 chrome、ff 中运行良好，但在 IE 中不行。 [http://www.magyarregeszet.hu/](http://www.magyarregeszet.hu/)

我发现了许多关于表格和布局的特定错误，但是我似乎无法弄清楚字体和文本转换类型错误。

有人能帮我吗？例如，左上角的菜单项在 IE 中也应该是大写的。这个条目是：

```
.menu-item:not(.menu-item-77)  {
    color: white;   
    text-transform: uppercase;
        font-weight:normal;
        margin-bottom: 4px;
        border-bottom: 1px solid white;    
        text-decoration: none;  
} 
```

我使用 wordpress 和构造函数主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:37:23.803

您不能`:not`在 IE8 中使用伪类，请查看[http://caniuse.com/#search=:not](http://caniuse.com/#search=:not)以获得支持。Internet Explorer 9+ 支持此高级选择器。

如果您需要 IE8 支持，我鼓励您提供基本样式：

```
.menu-item {
    color: #FFF
} 
```

然后是您的特定样式：

```
.menu-item-77 {
    color: #CCC
} 
```

小提琴：http: [//jsfiddle.net/jonathansampson/w39a7/](http://jsfiddle.net/jonathansampson/w39a7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:28:59.187

`:not`不兼容 IE8 [http://www.quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html)

# android - OverridePendingTransition 用于 Fragmentbased Preferenceactivity

> ID：10913534
> 
> 赞同：0
> 
> 时间：2012-06-06T11:43:41.530
> 
> 标签：android, preferenceactivity

在我当前的项目中，我使用自定义动画在工作正常的活动之间切换。

但是由于这个动画用于每个活动切换，我的基于片段的[PreferenceActivity](http://developer.android.com/reference/android/preference/PreferenceActivity.html)看起来有点不合适。

我已经尝试覆盖 onBuildStartFragmentIntent 中的转换（对我来说，这似乎是新活动将开始的唯一指标。

```
 @Override
    public Intent onBuildStartFragmentIntent (String fragmentName, Bundle args, int titleRes, int shortTitleRes) {
        this.overridePendingTransition(R.anim.slideinleft, R.anim.slideoutleft);
        return super.onBuildStartFragmentIntent(fragmentName, args, titleRes, shortTitleRes);
    } 
```

但这不起作用。

**编辑：** 在 Blundell 的评论之后，我再次阅读了这个问题，我需要更具体。实际上，overridePendingTransition 不起作用的不是 PreferenceActivity 本身。当打开另一个 Activiy 的 PreferenceActivity 时，它正在使用类似于 Blundell 的博客中描述的方法。

我的意思是，当 PreferenceActivity 用于小屏幕时，它只有一个窗格。当然后单击标题时，将打开一个新活动。但是所有这些行为都是由 PreferenceActivity 处理的。如果单击标题并且 PreferenceActivity 打开一个新活动，我想用自定义动画打开这个新屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-19T14:11:40.193

在文档 [这里]( [https://developer.android.com/reference/android/preference/PreferenceActivity.html#onBuildStartFragmentIntent(java.lang.String](https://developer.android.com/reference/android/preference/PreferenceActivity.html#onBuildStartFragmentIntent(java.lang.String) , android.os.Bundle, int, int)) 方法

```
Intent onBuildStartFragmentIntent (String fragmentName, 
            Bundle args, 
            int titleRes, 
            int shortTitleRes) 
```

描述：

> 在单窗格模式下由 startWithFragment(String, Bundle, Fragment, int, int, int) 调用，以构建 Intent 以启动显示所选片段的新活动。默认实现构造了一个 Intent，该 Intent使用适当的参数**重新启动**当前活动以显示片段。

这解释了这种“奇怪”的行为。你可以试试这个。在像这样的 PreferenceActivity 覆盖方法中。这会触发每个片段切换的自定义动画。

```
@Override
protected boolean isValidFragment(String fragmentName) {
    overridePendingTransition(R.anim.slide_in_right,R.anim.slide_out_left);

    //return true value for valid fragments 

    return PreferenceFragment.class.getName().equals(fragmentName)
            || GeneralPreferenceFragment.class.getName().equals(fragmentName)
            || DataSyncPreferenceFragment.class.getName().equals(fragmentName)
            || NotificationPreferenceFragment.class.getName().equals(fragmentName);
} 
```

当然，后面的动画你单独设置。

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    overridePendingTransition(R.anim.slide_in_left,R.anim.slide_out_right);
} 
```

此代码来自 Preference Activity 模板。希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:09:35.103

尝试这个？

```
onCreate(Bundle savedInstanceState);//Make the most sense 
```

否则试试这些？

```
onRestoreInstanceState(Bundle state);
onNewIntent(Intent intent); 
```

或者全部覆盖它们并做一些日志记录

```
Log.d("Debug", "onCreate called"); 
```

# c++ - 重新排序基于 C++ 映射的集合的有效方法

> ID：10913535
> 
> 赞同：6
> 
> 时间：2012-06-06T11:43:49.843
> 
> 标签：c++, algorithm, stl, map

我有一个大型（ish - >100K）集合，将用户标识符（一个 int）映射到他们购买的不同产品的数量（也是一个 int。）我需要尽可能有效地重新组织数据以找到有多少用户拥有不同数量的产品。例如，有多少用户有 1 个产品，有多少用户有两个产品等。

我通过将原始数据从 a 反转为 a 来实现这一点`std::map`（`std::multimap`其中键和值只是颠倒了。）然后我可以挑选出拥有*N*个产品的用户数量`count(N)`（尽管我也将值唯一地存储在一个集合中，所以我可以确定我正在迭代的值的确切数量及其顺序）

代码如下所示：

```
// uc is a std::map<int, int> containing the  original
// mapping of user identifier to the count of different
// products that they've bought.
std::set<int> uniqueCounts;
std::multimap<int, int> cu; // This maps count to user.

for ( map<int, int>::const_iterator it = uc.begin();
        it != uc.end();  ++it )
{
    cu.insert( std::pair<int, int>( it->second, it->first ) );
    uniqueCounts.insert( it->second );
}

// Now write this out
for ( std::set<int>::const_iterator it = uniqueCounts.begin();
        it != uniqueCounts.end();  ++it )
{
    std::cout << "==> There are "
            << cu.count( *it ) << " users that have bought "
            << *it << " products(s)" << std::endl;
} 
```

我不禁觉得这不是最有效的方法。有人知道这样做的聪明方法吗？

我的限制是**我不能使用 Boost 或 C++11 来做到这一点**。

哦，还有，如果有人想知道，这既不是作业，也不是面试问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T12:01:25.000

假设您知道单个用户可以购买的最大产品数量，您可能会看到仅使用向量来存储操作结果的性能更好。实际上，您将需要为原始地图中的几乎每个条目进行分配，这可能不是最快的选择。

它还将减少映射上的查找开销，获得内存局部性的好处，并用向量的恒定时间查找替换对多映射的计数（这不是恒定时间操作）的调用。

所以你可以做这样的事情：

```
std::vector< int > uniqueCounts( MAX_PRODUCTS_PER_USER );

for ( map<int, int>::const_iterator it = uc.begin();
        it != uc.end();  ++it )
{
    uniqueCounts[ uc.second ]++;
}

// Now write this out
for ( int i = 0, std::vector< int >::const_iterator it = uniqueCounts.begin();
        it != uniqueCounts.end();  ++it, ++i )
{
    std::cout << "==> There are "
            << *it << " users that have bought "
            << i << " products(s)" << std::endl;
} 
```

即使您不知道产品的最大数量，您似乎也可以猜测一个最大值并根据需要调整此代码以增加向量的大小。无论如何，它肯定会导致比原始示例更少的分配。

所有这一切都是假设您在处理完这些数据之后实际上并不需要用户 ID（正如下面的评论中所指出的，为每个用户购买的产品数量是一个相对较小且连续的集合。否则，您最好使用地图代替矢量 - 您仍然可以避免调用 multimap::count 函数，但可能会失去其他一些好处）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T12:08:40.820

这取决于您所说的“更有效”是什么意思。首先，这真的是瓶颈吗？当然，100k 条目很多，但如果您只需要每隔几分钟执行一次，那么算法需要几秒钟就可以了。

我看到的唯一需要改进的地方是内存使用。如果这是一个问题，您可以跳过多图的生成，只保留一个计数器图，如下所示（注意，我的 C++ 有点生疏）：

```
std::map<int, int> countFrequency; // count => how many customers with that count

for ( std::map<int, int>::const_iterator it = uc.begin();
        it != uc.end();  ++it )
{
    // If it->second is not yet in countFrequency, 
    // the default constructor initializes it to 0.
    countFrequency[it->second] += 1;
}

// Now write this out
for ( std::map<int, int>::const_iterator it = countFrequency.begin();
        it != countFrequency.end();  ++it )
{
    std::cout << "==> There are "
            << it->second << " users that have bought "
            << it->first << " products(s)" << std::endl;
} 
```

如果添加了用户并购买了`count`商品，您可以`countFrequency`使用

```
countFrequency[count] += 1; 
```

如果现有用户从`oldCount`到项目，`newCount`您可以更新`countFrequency`

```
countFrequency[oldCount] -= 1;
countFrequency[newCount] += 1; 
```

现在，顺便说一句，我建议使用`unsigned int`for count（除非负数有正当理由）和 typedef'ing 一个`userID`类型，以增加可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T12:01:13.760

如果可以的话，我建议始终保持这两条数据都是最新的。换句话说，我会维护第二张地图，将购买的产品数量映射到购买那么多产品的客户数量。如果您维护它，此地图包含您问题的确切答案。每次客户购买产品时，设 n 为该客户现在购买的产品数量。从键 n-1 的值中减去 1。将键 n 处的值加一。如果键的范围足够小，这可能是一个数组而不是一个映射。您是否期望一个客户购买数百种产品？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T13:03:06.217

只是为了百灵，这是一种混合方法，`vector`如果数据很小，则使用 a`map`来涵盖一个用户购买了真正荒谬数量的产品的情况。我怀疑您是否真的需要在商店应用程序中使用后者，但更一般的问题版本可能会从中受益。

```
typedef std::map<int, int> Map;
typedef Map::const_iterator It;

template <typename Container>
void get_counts(const Map &source, Container &dest) {
    for (It it = source.begin(); it != source.end(); ++it) {
        ++dest[it->second];
    }
}

template <typename Container>
void print_counts(Container &people, int max_count) {
    for (int i = 0; i <= max_count; ++i) {
        if contains(people, i) {
            std::cout << "==> There are "
                << people[i] << " users that have bought "
                << i << " products(s)" << std::endl;
        }
    }
}

// As an alternative to this overloaded contains(), you could write
// an overloaded print_counts -- after all the one above is not an 
// efficient way to iterate a sparsely-populated map. 
// Or you might prefer a template function that visits
// each entry in the container, calling a specified functor to
// will print the output, and passing it the key and value.
// This is just the smallest point of customization I thought of.
bool contains(const Map &c, int key) {
    return c.count(key);
}
bool contains(const std::vector<int, int> &c, int key) {
    // also check 0 < key < c.size() for a more general-purpose function
    return c[key]; 
}

void do_everything(const Map &uc) {
    // first get the max product count
    int max_count = 0;
    for (It it = uc.begin(); it != uc.end(); ++it) {
        max_count = max(max_count, it->second);
    }

    if (max_count > uc.size()) { // or some other threshold
        Map counts;
        get_counts(uc, counts);
        print_counts(counts, max_count);
    } else {
        std::vector<int> counts(max_count+1);
        get_counts(uc, counts);
        print_counts(counts, max_count);
    }
} 
```

从这里你可以重构，创建一个类模板`CountReOrderer`，它接受一个模板参数，告诉它是使用 a`vector`还是 a`map`进行计数。

# android - 从另一个活动获取和设置变量

> ID：10913536
> 
> 赞同：0
> 
> 时间：2012-06-06T11:43:51.403
> 
> 标签：android, getter-setter

我有一个包含变量“艺术家”的getter和setter的类：

班级：

```
public void setArtist(String artist) {
    this.artist = artist;
}

public String getArtist() {
    return artist;
} 
```

我想从这样的活动中调用 setArtist：

活动一：

```
Playlist.setArtist(someString) 
```

但是 eclipse 告诉我我需要将 setArtist 更改为静态。我使用 setter 的全部目的是避免有任何静态引用。我做错了什么，还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T11:51:57.590

这完全取决于您想要对象的地点和时间。你可以这样做：

```
class Artist implements Serializable{
  public static final String EXTRA = "com.your.package.ARTIST_EXTRA";

  private String name;

  public void setName(String name) {
      this.name = name;
  }

  public String getName() {
      return name;
  }    
} 
```

活动一：

```
public void onCreate(Bundle savedInstance){
    // ....
    Artist artist = new Artist();
    artist.setName("Rolf");        

    Intent intent = new Intent(this, SecondActivity.class);
    intent.putExtra(Artist.EXTRA, artist);
    startActivity(intent);
} 
```

活动二：

然后，您可以在第二个活动中引用您的艺术家：

```
public void onCreate(Bundle savedInstance){
   // ....
   Artist artist = (Artist) getIntent().getSerializableExtra(Artist.EXTRA);

   Log.d("YourApp", "I have the artist! "+ artist.getName());

} 
```

注意您正在序列化的内容，因为您无法序列化某些对象。

另一种方法是拥有一个扩展 Application 并在其中保留引用的类，然后您可以从任何 Activity 上下文中检索它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T11:47:00.560

您不能假设其他活动将在内存中，因此这是错误的做法。我会阅读一些 android 活动以及如何使用它们。

[http://developer.android.com/guide/topics/fundamentals/activities.html](http://developer.android.com/guide/topics/fundamentals/activities.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T11:46:35.090

请制作一个对象`Playlist`然后设置变量。

```
Playlist mObjPlaylist= new Playlist();
mObjPlaylist.setArtist(someString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T11:50:21.370

如果你想访问像 A.show() 这样的方法，show() 方法应该是一个静态方法，因为静态方法不需要对象是可访问的。一种解决方案是将这些 getter 和 setter 设置为静态方法，并在您现在访问它时访问它。另一种解决方案是使用单例模式，因此在这种情况下，您不需要将这些方法设为静态，您只需要获取该类的单例对象并像这样访问这些方法：

```
PlayList.getInstance().setArtist(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T11:48:26.267

你处理活动的方式不是正确的方式。

如果您需要在两个 Activity 中使用一些通用数据，那么您可以通过使用通用类来操作它，而不是将其放在 Activity 中。此外，如果您想在从 Activity 启动另一个 Activity 时传递一些数据，您可以通过 Intent Extra 传递它.

```
 class PlayList{
            private static PlayList self=null;
           private string artist;
            public static PlayList getInstance(){
            if(self==null){
            self=new PlayList();
            } 
            return self;
            }
            public void setArtist(String artist) {
                this.artist = artist;
            }

            public String getArtist() {
                return artist;
            }
        } 
```

# c# - 文本框值未在 asp.net c# 中访问

> ID：10913542
> 
> 赞同：1
> 
> 时间：2012-06-06T11:44:16.730
> 
> 标签：c#, asp.net

我在 .aspx 页面上有一个文本框。在此页面上有一个用户控件。在此用户控件内部有一个按钮。我想在按钮单击时获取不在用户控件内部的文本框的值。如何我这样做

请帮我 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:47:48.813

在用户控件的按钮单击事件中写下这一行

```
protected void Button_Click(sender obj,EventArgs arg)
{
  TextBox txtbox= (((MyPage)parent).FindControl("TextBoxid") as TextBox);
  if(txtbox!=null)
   (((MyPage)this.Page).FindControl("TextBoxid") as TextBox).Text;
  //or 
  //(((MyPage)this.Parent).FindControl("TextBoxid") as TextBox).Text;

} 
```

**或者**

替代方法是在您的页面中创建属性并在您的用户控件中访问它

```
public string txtValue
{
  get 
  {
    return TextboxID.Text;
  }
} 
```

在用户控件的按钮单击事件中

```
protected void Button_Click(sender obj,EventArgs arg)
{
    string txtvalue = ((Mypage)this.Page).txtValue;
   //or
   //((MyPage)this.Parent).txtValue;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:49:33.553

尝试使用以下方法，

```
((TextBox)USerControl.Parent.FindControl("txtbox")).Text 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:48:38.570

考虑到解耦，我建议如果您的用户控件需要访问它之外的信息，那么应该传入该信息，反之亦然。控件不应该对信息的来源负责，它只知道有信息。考虑到这一点，我建议冒泡事件以获取所需的信息。

# 事件冒泡

这将涉及创建一个新的委托，然后`Button`在单击它后触发它，从而使事件冒泡并允许我们返回所需的值，在本例中是文本框的值。

## 第 1 步：声明委托

```
// declare a delegate
public delegate string MyEventHandler(object sender, EventArgs e); 
```

## 步骤 2：更新用户控件

```
// update the user control
public class MyUserControl : UserControl
{
    // add the delegate property to your user control
    public event MyEventHandler OnSomeButtonPressed;

    // trigger the event when the button is pressed
    protected void MyButton_Click(object sender, EventArgs e)
    {
        string someString = string.Empty;
        if (this.OnSomeButtonPressed != null)
        {
            someString = this.OnSomeButtonPressed(this, e);
        }

        // do something with the string
    }    
} 
```

## 第三步：更新页面

```
// be sure to register the event in the page!
public class MyPage : Page
{
    protected override void OnLoad(object sender, EventArgs e)
    {
        base.OnLoad(sender, e);
        myUserControl.OnSomeButtonPressed += this.HandleUserControl_ButtonClick;
    }

    public string HandleUserControl_ButtonClick(object sender, EventArgs e)
    {
        return this.SomeTextBox.Text;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T11:47:41.007

```
((TextBox)USerControl.Page.FindControl("txtbox")).Text 
```

或者

```
((YourPageType)USerControl.Page).TextBox.Text 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T11:47:57.493

```
protected void MyButton_Click(object sender, EventArgs e)
{
  string TextBoxValue;
  TextBoxValue = MyTextBox.Text;
} 
```

是你想要的吗？

# ruby - Ruby：从内部方法访问 attr_accessor 的方法

> ID：10913544
> 
> 赞同：3
> 
> 时间：2012-06-06T11:44:23.347
> 
> 标签：ruby, attr-accessor

我有一个代码：

```
class A
  attr_accessor :somevar

  def a
    somevar = 'something'
    puts @somevar
  end

  def b
    send :somevar=, 'something'
    puts @somevar
  end

end

A.new.a #=> nil
A.new.b #=> 'something' 
```

为什么有区别？为什么我不能通过编写器分配一个实例变量？但是为什么创建了局部变量而不是调用了方法（setter）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T11:51:01.650

`attr_accessor :somevar`引用**实例**变量`@somevar`。实例变量必须以`@`符号开头。所有其他变量，如方法中没有符号的“somevar”，`@`只是该方法或范围的局部变量，而不是对象的实例变量。

因此，将方法“a”中的第一行更改为

```
@somevar = 'something' 
```

会得到你期望的答案。

相关说明：您不必在 Ruby 中声明实例变量，只需使用`@somevar`类型表示法创建它们。该`attr_accessor`方法为该实例变量创建 setter 和 getter。

Ruby 中的方法附加到对象，因此为了让类 A 调用它自己的 somevar setter 方法，您需要编写`self.somevar = 'something'`，否则 Ruby 解析器认为您只是在创建一个局部变量。

这可能会令人困惑，因为您可以调用`a`from的方法`b`，只需执行以下操作：

```
def b
  send :somevar=,'something'
  puts @somevar
  a  # would invoke its own method 'a'
end 
```

但是 setter 方法`somevar=`在创建具有相同符号的局部变量时是模棱两可的：

```
somevar='something'  # Ruby assumes you want to create a local variable 
```

因此，要调用 somevar setter 方法，您需要明确说明您正在调用 self 上的方法：

```
self.somevar = 'something' 
```

当你打电话时，`send :somevar=,'something'`你也在调用 somevar 实例方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:47:20.793

这是因为方法 a 正在创建一个名为 somevar 的局部变量。这只是 Ruby 的小怪癖之一。您可以通过执行`self.somevar = 'something'`或来解决此问题`@somevar = 'something'`。

# ruby-on-rails - 未定义的方法“remote_function”

> ID：10913545
> 
> 赞同：5
> 
> 时间：2012-06-06T11:44:23.603
> 
> 标签：ruby-on-rails, ruby

我正在使用带有黑光应用程序的 rails-3.2.1

我正在尝试在我的 link_to 标记中调用 remote_function。

```
<%= link_to_document document, :label=>document_show_link_field, :onclick =>     remote_function(:controller => 'catalog', :action => 'save_user_history') %> 
```

这给出了以下错误

```
undefined method `remote_function' for #<#<Class:0x2ff0dc0>:0x2f4af38>. 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T11:57:59.633

这个函数是[Prototype helper](https://github.com/rails/rails/blob/v3.0.13/actionpack/lib/action_view/helpers/prototype_helper.rb)的一部分，它在[Rails 3.1 中从框架中移除](http://weblog.rubyonrails.org/2011/4/21/jquery-new-default/)并移到了[prototype-rails gem](https://rubygems.org/gems/prototype-rails)中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T12:04:04.353

您始终可以使用普通的 link_to。

```
<%= link_to "Save User History", save_user_history_catalogs_path %> 
```

或者，如果它是一个 ajax 函数，则如下所示：

```
<a id="save_user_history">Save User History</a> 
```

在你的 javascript 文件中：

```
$("#save_user_history").click(function() {
  $.post("/catalogs/save_user_history", function(data) {
    .... 
```

# php - PHP套接字不发送

> ID：10913546
> 
> 赞同：1
> 
> 时间：2012-06-06T11:44:25.017
> 
> 标签：php, sockets, graphite

我正在尝试将一些纯文本数据发送到在我本地运行的石墨服务器，这是相同的代码：

```
<?php
error_reporting(E_ALL);

$address = '127.0.0.1';
$port = 2003;

$fsock = fsockopen($address,$port);

for($i=1;;$i++){

  $send = "dummy.metric.value ".$i." ".time();
  $sent = fwrite($fsock, $send, strlen($send));
  echo $send ." sent ".$sent."\n";
  sleep(4);
}

?> 
```

没有错误，但石墨服务器不显示新数据。服务器正在运行，我可以通过`nc`和发送数据`telnet`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:27:03.243

另外不要忘记检查 carbon.conf，因为默认情况下 UDP 侦听器是关闭的。

这个选项愚弄了我，因为显然 StatsD 和 Graphite 在同一主机上使用 TCP 进行通信。我测试了插入指标

```
echo "test.foo 20 `date +%s`" | nc 192.168.10.10 2003 
```

但是在阅读了手册页之后，事实证明你必须在 nc 中添加 -u 才能强制它使用 UDP。

希望这可以节省其他人一些时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:09:27.453

您正在打开 TCP 流 - 但[石墨使用 UDP](https://github.com/etsy/statsd/blob/087fde9f3e52c4f76cc28b3d9bf986e0a3a3ae49/examples/php-example.php)吗？

# php - 如何在 DataTable jQuery 插件中放置多个表

> ID：10913553
> 
> 赞同：0
> 
> 时间：2012-06-06T11:45:04.087
> 
> 标签：php, jquery, mysql, html-table

我一直在使用这个[插件](http://www.datatables.net)来表示我来自 mysql 数据库的数据。

我正在使用此脚本[示例](http://datatables.net/release-datatables/examples/data_sources/server_side.html)进行服务器端处理。

现在这个脚本可以完美运行，为什么你有一张桌子。但是当我有多表查询时就会出现问题。

例如我有：

```
$sWhere = "a.ID=b.ID AND b.Name=c.Name"; 
```

这只是可变的地方。如果您转到我提供的链接，您可以看到用于获取数据的 php 脚本。当我放置一个以上的表时，我得到唯一的表错误。并且搜索功能无法使用。

有人可以告诉我如何使用这个脚本来在一个查询中包含多个表。

如果您需要更多来源，请告诉我。

编辑：

我的 HTML：

```
<table id="table_my" width="100%" border="1" cellspacing="2" cellpadding="5" class="chart_1">
                <thead>
                    <tr class="even">
                        <th>A</th>
                        <th>B</th>
                        <th>C</th>
                        <th>D</th>
                        <th>E</th>
                        <th>F</th>
                        <th>G</th>

                    </tr>
                </thead>

              <tbody>
              </tbody>
              </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:51:07.367

当执行该多表查询时，HTML 标记应该会发生变化。为什么不比较两者并检查 HTML 标记中的差异？

DataTable jQuery 插件的标记应该是这样的：

```
<table>
    <thead>
        <tr>
            <th>Column Name</th>
            <th>Column Name</th>
            <th>Column Name</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Row Value</td>
            <td>Row Value</td>
            <td>Row Value</td>
        </tr>
        <tr>
            <td>Row Value</td>
            <td>Row Value</td>
            <td>Row Value</td>
        </tr>
        <tr>
            <td>Row Value</td>
            <td>Row Value</td>
            <td>Row Value</td>
        </tr>
        <tr>
            <td>Row Value</td>
            <td>Row Value</td>
            <td>Row Value</td>
        </tr>
    </tbody>
</table> 
```

还要记住，它不能与多个标签`tbody`或`thead`没有这些标签的表格一起使用。另外，如果你已经使用了`colspan`和`rowspan`属性，它就不起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-14T21:29:57.407

来自***www.facebook.com/Heanock Z behere 埃塞俄比亚*** *

## 回答上述问题

* 我只是像我在 php 或其他语言中使用的那样使用，我有两个要加入的表 **tbl_employees** **

emp_id

** int(11) auto_increment 主键， **emp_name** varchar(50)， **sex** enum('female','male')， **emp_dept** varchar(50)， **emp_salary** double， **job** int(11) = 是我将分享的外键从第二张桌子

**tbl_job**

**

job_id

** int(11) 主键， **job_name** varchar(50)， **job_cat** varchar950)

最后这是我在***php mysql plus datatable中的代码***

员工 ID 员工姓名 性别 部门 工资 职位 编辑 删除

```
 $stmt = $db_con->prepare("SELECT emp_id,emp_name,sex,emp_dept,emp_salary,job_name FROM tbl_employees,tbl_job where job=job_id ORDER BY emp_id DESC");
    $stmt->execute();
    while($row=$stmt->fetch(PDO::FETCH_ASSOC))
    {
        ?>
        <tr>
        <td><?php echo $row['emp_id']; ?></td>
        <td><?php echo $row['emp_name']; ?></td>
        <td><?php echo $row['sex']; ?></td>
        <td><?php echo $row['emp_dept']; ?></td>
        <td><?php echo $row['emp_salary']; ?></td>
        <td><?php echo $row['job_name']; ?></td> 
```

如果您对上述问题有任何疑问，请写信给我@ heanocklove@gmail.com 或上面列出的我的 facebook 页面

非常感谢

# r - R字符串中的嵌入变量

> ID：10913559
> 
> 赞同：0
> 
> 时间：2012-06-06T11:45:19.790
> 
> 标签：r

我正在尝试在数据框中循环和重命名 colnames。

如何在 R 的 colname 字符串中嵌入数字变量。我发现 .(x) 与图形中标题的 bquote/paste 方法相关联，但它不适用于标准字符串。

在 Ruby 中，我可以通过以下方式使用 #{x} 将变量嵌入到字符串中

```
irb(main):005:0> (1..10).each{|i| p "hello no #{i}"}
"hello no 1"
"hello no 2"
"hello no 3"
"hello no 4"
"hello no 5"
"hello no 6"
"hello no 7"
"hello no 8"
"hello no 9"
"hello no 10" 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:28:35.127

您可以简单地使用`sprintf()`. 例如：

```
i <- 4;
data[[sprintf("hello.%1.2d",i)]] <- ...; 
```

# android - Android - 有没有办法在 Eclipse 中打开本机内存用户界面？

> ID：10913562
> 
> 赞同：1
> 
> 时间：2012-06-06T11:45:31.520
> 
> 标签：android, eclipse, memory-management, ddms

我一直在通过命令行密切关注本机内存。但是，如果我能在 Eclipse 中的 DDMS 视图下看到本机内存用户界面，那将非常有帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:07:27.723

如果您进入“Window -> Show View”，您可以完全自定义您的 Perspective（在本例中为 DDMS），您可以将所有您想要的视图添加到您的透视图中。

# regex - Mongoose：如何在字符串中的任何位置以任意顺序查找 3 个单词？（SQL 3 与 and 类似）

> ID：10913568
> 
> 赞同：0
> 
> 时间：2012-06-06T11:46:04.150
> 
> 标签：regex, filter, mongoose

我找不到使用正则表达式找到所有 3 个单词（或更多）的行的方法：

例子

```
input words: "comp abc 300"
should match: "abcdef compres 300" and "ascompr zazabcd 9300" 
```

我现在有一个带有正则表达式的循环，它返回：

```
(.*comp.*)(.*abc.*)(.*300.*) 
```

但仅按此顺序匹配。我希望它像示例中的每个顺序一样匹配

就像 SQL 中的 3 一样。

谢谢 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T11:48:25.487

积极的前瞻是您所需要的：

```
(?=.*comp)(?=.*abc)(?=.*300).* 
```

更多信息请访问[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T21:12:33.763

我创建了一个封装它的 Node 函数：

```
// Will add a full-text regexp search to a query
// can be used like this:
//   var query = myModel.model.find();
//   addFullTextSearch( query, "firstName", mySearchString );

function addFullTextSearch( query, paramName, searchString ) {
    if (searchString) {
        var r = "";
        var sss = searchString.split(" ");
        if (sss.length<=1) {            // only one word
            r = sss[0];
        } else {
            // result should look like this: (?=.*comp)(?=.*abc)(?=.*300).*
            for (var s in sss) {
                r += "(?=.*" + sss[s] + ")";
            }
            r += ".*";
        }
        query.where(paramName).regex(new RegExp(r, 'i'));       // "i" for case insensitivity
    }
}  // addFullTextSearch 
```

# c# - 使用 Visual Studio 11 Beta/Visual Studio 2012 RC 时的“@Model”、“@Viewbag”和“@Url”“当前上下文中不存在”Razor MVC3

> ID：10913572
> 
> 赞同：13
> 
> 时间：2012-06-06T11:46:12.737
> 
> 标签：c#, visual-studio-2012

我在 Visual Studio 10 中创建了一个 MVC3 应用程序。编辑视图时，“@Model”、“@Viewbag”和“@Url”都显示为有效。

我最近安装了 Visual Studio 11 Beta，在编辑（或创建）视图时，我收到上述关键字的“x 在当前上下文中不存在”错误，显然没有智能感知。

我已经安装了 Visual Studio 2012 RC，希望它只是一个 Visual Studio 11 Beta 问题......它不是。自从在 Visual Studio 2012 RC 中运行它以来，我注意到存在“@Html”关键字，但是智能感知列表是有限的 - 与模型相关的任何内容（例如“@Html.EditorFor()”）和任何内容缺少“渲染”系列。

如果我运行该项目，一切都很好。

现在，如果我在 Visual Studio 11 Beta/2012 RC 中创建一个新项目，所有关键字都会被识别。

我需要在我的项目文件中进行编辑以使其正常工作吗？

**编辑 - 从我下面的评论中复制的更多答案** 对于升级到 VS 2015 的人，它不支持 MVC 4，您需要将项目升级到 MVC5。请参阅 - [http://www.asp.net/mvc/overview/releases/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and- web-api-2](http://www.asp.net/mvc/overview/releases/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-06T12:07:36.647

将以下设置添加到您的 MAIN web.config 文件的 appSettings 部分：

```
<add key="webpages:Version" value="1.0.0.0"/> 
```

从连接：[http ://connect.microsoft.com/VisualStudio/feedback/details/732597/visual-studio-11-beta-razor-intellisense-not-working](http://connect.microsoft.com/VisualStudio/feedback/details/732597/visual-studio-11-beta-razor-intellisense-not-working)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-17T23:10:07.250

vs2015的更新；

在您的 MAIN web.config 中查找此元素

```
 <dependentAssembly>
    <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
  </dependentAssembly> 
```

并将“newVersion”参数放在您的 webPages:version 中

IE

```
<add key="webpages:Version" value="3.0.0.0" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-22T02:02:25.327

对于通过搜索访问此页面的任何人，我都可以按照此页面上的指南逐行解决此问题，直到我可以重建项目为止。一旦我重建并重新加载了项目，所有的智能感知都回来了。

这是链接：[http ://www.asp.net/mvc/overview/releases/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5 -and-web-api-2](http://www.asp.net/mvc/overview/releases/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2)

# ibm-midrange - 我可以在 rpgleref 源代码中使用没有 /end-free 的 /free 吗？

> ID：10913575
> 
> 赞同：1
> 
> 时间：2012-06-06T11:46:34.970
> 
> 标签：ibm-midrange, rpgle, rpg

我正在编写一组程序来创建、编写和编译一组 SQLRPGLE 程序。我的程序开头的很多代码在我拥有的每个程序中都重复了，所以我把它放到参考源中是有意义的......它大致的形式

```
 H some h specs
    D a load of d specs

    /free
       my nice free formatted code that I use everywhere 
```

然后我的元程序出现并添加了很多代码。此时我的程序看起来像这样

```
 /copy *libl/qrpgleref,myRefPgm

      lots of nice rpg and sql

    /end-free 
```

当我编译它时它不起作用 - 我认为这是因为程序无法正确匹配 /free 和 /end-free ......对吗？还是我在这里错过了一些更微妙的东西？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T12:47:42.853

我认为您的程序没有编译的原因，仅基于您问题中提供的示例，是因为您将 H 和 D 规范与您的自由格式计算规范混合在一起。顺序对 RPG 来说很重要，你不能乱来。如果您复制的代码需要 D 和 H 规范，那么您有两种选择：

*   为 H、D 和 C（自由格式）规范创建单独的 /copy 源成员。然后/将它们复制到您的 RPG 程序中的正确位置。
*   创建一个 *MODULE 或 *SRVPGM，然后只将原型的 D 规范复制到您的 RPG 程序中。仅基于您在问题中提出的内容，我认为最好的解决方案是创建一个服务程序。为了更容易将服务程序绑定到 RPG 程序，我喜欢创建一个绑定目录，然后在我的 RPG 程序中放置一个 H 规范：H BNDDIR( *library/bnddir* )。这样，我仍然可以在 PDM 中使用正常的 14 进行编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T13:06:08.470

我认为你可以，但为什么不添加`/free`and`/end-free`以防将来出现混乱或问题？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T09:29:09.860

根据 IBM ILE RPGLE 语言参考 (SC09-2508-08)

> /COPY 或 /INCLUDE 指令包含的任何语句都被视为固定语法计算。/COPY 成员中的任何自由格式语句**必须由**/FREE 和**/END-FREE**指令分隔。

另请注意：

> 当您指定 /END-FREE 时，自由格式计算块结束。

我的建议是尽可能避免使用 /copybooks。

# sql-server - 如何编辑 SQL Server 跟踪文件？

> ID：10913580
> 
> 赞同：0
> 
> 时间：2012-06-06T11:46:47.937
> 
> 标签：sql-server, windows, sql-server-2005, rml

我想更改跟踪文件中的特定条目。我该怎么做？

我收到了一组在 prod 服务器上运行的跟踪文件。从这些我试图获得一组 RML 文件以在不同的环境中重放负载。要将 .trc 文件更改为 RML 文件，我运行了 readtrace.exe

但是，readtrace 没有输出 RML 文件。查看日志我看到以下错误

> 06/06/12 15:43:20.914 [0X0000060C] SPID: 118 Seq: 50736293 [Error: 110003] [State: 0] [Abs Char: 233] [Seq: 0] 语法错误：字符串附近缺少正确的结束引号（字符位置：0x139 字节位置：0x272）

然后它清楚地显示导致此错误的条目。虽然我已将错误发送给开发团队并且修复将在下一个版本中发布，但我需要使用当前的跟踪文件来生成和重放负载。因此，我想修复导致此错误的跟踪文件中的特定条目。

是否可以？我尝试在写字板中打开跟踪文件，但写字板崩溃了，鉴于跟踪文件为 250MB，这并不奇怪。尝试安装 Vim 并查看是否可以在那里打开和更改跟踪文件，但想知道是否有人知道更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:08:04.437

我找不到这样做的方法，所以最终采用了请求新服务器端跟踪的预期方式，这是在修复完成后采取的。

在此之前，我确实尝试将跟踪文件加载到表中，然后加载到分析器中，然后更改我需要的值并生成一个新的跟踪文件，但是当您加载到分析器时，生成 RML 所需的关键事件会丢失。我还在写字板中打开了一个较小的跟踪文件，发现我无法编辑内容，因为还有二进制内容，并且不清楚文本编辑会实现什么。

因此，最后，获得可以生成 RML 文件的跟踪的唯一方法是修复代码中的错误查询并推送修复，然后再次获取跟踪。

# mysql - mysql左连接同表求和错误结果

> ID：10913582
> 
> 赞同：3
> 
> 时间：2012-06-06T11:46:53.273
> 
> 标签：mysql, join, sum

我对应该执行以下操作的查询有疑问：

1.  获取特定记录并计算特定时间段的一些值
2.  在另一个时间段内计算这些关键字的相同值

这应该发生在 1 个查询中。我能够编写它，但 SUM() 返回的错误值远高于正常值。我认为这是因为 LEFT JOIN。

```
SELECT SQL_CALC_FOUND_ROWS table1.id, table1.KeywordId, table1.AccountName, table1.CampaignName, table1.AdGroupName, table1.Keyword, table1.MatchType, SUM(table1.Spend)/SUM(table1.Clicks) AS AverageCpc, SUM(table1.Impressions) AS Impressions, (SUM(table1.Clicks)*table1.revenue_price)/SUM(table1.Impressions) AS Ctr, SUM(table1.Impressions*table1.AveragePosition)/SUM(table1.Impressions) AS AveragePosition, SUM(table1.Clicks) AS Clicks, SUM(table1.Spend) AS Spend, SUM(table1.free_joins) AS FreeJoins, SUM(table1.paid_joins) AS PaidJoins, SUM(table1.paid_joins)*table1.revenue_price AS Revenue, (SUM(table1.paid_joins)*table1.revenue_price)-SUM(table1.Spend) AS Profit, (SUM(table1.paid_joins)*table1.revenue_price)/SUM(table1.Clicks) AS RevPerClick, table1.CurrentMaxCpc, SUM(table2.Impressions) AS Impressions_chg, SUM(table2.Clicks) AS Clicks_chg, SUM(table2.Impressions*table2.AveragePosition)/SUM(table2.Impressions) AS AveragePosition_chg, (SUM(table2.Clicks)*table2.revenue_price)/SUM(table2.Impressions) AS Ctr_chg, SUM(table2.Spend)/SUM(table2.Clicks) AS AverageCpc_chg, table2.CurrentMaxCpc as CurrentMaxCpc_chg, SUM(table2.free_joins) AS FreeJoins_chg, SUM(table2.paid_joins) AS PaidJoins_chg
            FROM keywords_stats_google_naughtymeetings as table1
            LEFT JOIN keywords_stats_google_naughtymeetings as table2
            ON table1.keywordId = table2.keywordId
            WHERE table1.timeperiod >= '2012-05-21 00:00:00' and table1.timeperiod <= '2012-05-27 00:00:00'
            AND table2.timeperiod >= '2012-05-14' and table2.timeperiod <= '2012-05-20'

            GROUP BY table1.KeywordId, table1.MatchType, table1.revenue_price, table2.KeywordId, table2.MatchType, table2.revenue_price
            ORDER BY  FreeJoins
                    asc
            LIMIT 0, 10 
```

有人可以给我一个建议，我怎样才能得到正确的 SUM 结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:55:35.230

我想你需要`INNER JOIN`这里。尝试将 替换`LEFT JOIN`为`INNER JOIN`。

PS我没有得到你想要的，但我认为这个想法应该更简单。

```
(SELECT id, fields_for_first_period_of_time
  FROM keywords_stats_google_naughtymeetings) t1
  JOIN
(SELECT id, fields_for_second_period_of_time
  FROM keywords_stats_google_naughtymeetings) t2
ON t1.id = t2.id 
```

这只是这个想法的草图。我的意思是通过两个单独的查询获得结果。然后加入他们。这将更容易调试。我希望这可以帮助你。

# css - ClientBundle 中的 ImageResource 作为真实元素

> ID：10913588
> 
> 赞同：1
> 
> 时间：2012-06-06T11:47:15.517
> 
> 标签：css, gwt, clientbundle

默认情况下，IE9 不打印背景图像。是否有一个选项告诉 ClientBundle，所有图像都应该是真实元素而不是假的 css 背景图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:31:00.923

这取决于如何`ClientBundle`生成，以及如何从`ImageResource`.

[默认情况下](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/resources/Resources.gwt.xml?r=10282)，除了 IE6 和 IE7 之外，所有浏览器都将`ClientBundle`s`ImageResource`生成为`data:`URL，它们将使用*精灵图像*，就像`ImageBundle`. 但是在 IE8 和 IE9 中，您必须确保选择了适当的排列，因为它们具有可能使它们看起来像 IE6 或 IE7 的兼容模式。检查 IE 开发人员工具中使用的模式（点击`F12`打开它们）。

给定一个*内联*或*外部* `ImageResource`（使用`data:`或`http://`URL，但不使用*捆绑*的 AKA*精灵*图像），然后您可以使用`ImageResource`'s`getSafeUri()`作为元素`src`属性的值。 不幸的是，当您*传递**to*或. 让我们称之为错误。`<img>`
**`ImageResource``Image``AbstractImagePrototype`**

# regex - 如何在awk中获取regExp的子表达式值？

> ID：10913598
> 
> 赞同：11
> 
> 时间：2012-06-06T11:47:48.997
> 
> 标签：regex, linux, awk

我正在分析的日志包含如下信息：

```
y1e","email":"","money":"100","coi 
```

我想获取金钱的价值，我使用了“awk”，例如：

```
grep pay action.log | awk '/"money":"([0-9]+)"/' , 
```

那么我怎样才能得到 ([0-9]+) 中的子表达式值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T02:22:24.960

如果您有 GNU AWK ( `gawk`)：

```
awk '/pay/ {match($0, /"money":"([0-9]+)"/, a); print substr($0, a[1, "start"], a[1, "length"])}' action.log 
```

如果不：

```
awk '/pay/ {match($0, /"money":"([0-9]+)"/); split(substr($0, RSTART, RLENGTH), a, /[":]/); print a[5]}' action.log 
```

两者的结果都是`100`。而且没有必要`grep`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T12:12:10.093

作为替代方案，假设数据格式在行被 grep 后保持不变，这将提取货币字段，而不是使用正则表达式：

```
awk -v FS=\" '{print $9}' data.txt 
```

假设 data.txt 包含

```
y1e","email":"","money":"100","coin.log 
```

产生：

```
100 
```

即，您的字段分隔符设置为`"`并且您打印出字段 9

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T16:03:28.790

如果你`money`在不同的地方进来，那么硬编码位置参数可能不是一个好主意。

你可以试试这样的 -

```
$ awk -v FS=[,:\"] '{ for (i=1;i<=NF;i++) if($i~/money/) print $(i+3)}' inputfile 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T11:52:15.653

您需要引用正则表达式的第 1 组

我不精通 awk，但这里有一些其他相关的问题

[awk 从每一行中提取多个组](https://stackoverflow.com/questions/1116193/awk-extract-multiple-groups-from-each-line)

[GNU awk：访问替换文本中捕获的组](https://stackoverflow.com/questions/1555173/gnu-awk-accessing-captured-groups-in-replacement-text)

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T04:29:27.297

```
grep pay action.log | awk -F "\n" 'm=gensub(/.*money":"([0-9]+)".*/, "\\1", "g", $1) {print m}' 
```

# gwt - GWT：我可以在显示弹出窗口后延迟几秒钟吗

> ID：10913605
> 
> 赞同：9
> 
> 时间：2012-06-06T11:48:06.230
> 
> 标签：gwt

我有一个小的 GWT 应用程序，我在其中显示一个成功的弹出窗口

```
 if(success){
               DescoratedPopupPanel popup = new DecoratedPopupPanel();
               popup.show();
               //Now here i want to wait for like 5 secs and then 
               popup.hide();
             } 
```

知道如何在隐藏弹出窗口之前设置 5 秒的延迟时间

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-06T12:26:53.147

这是使用 Timer 产生 5 秒延迟的代码：

```
 final DecoratedPopupPanel popup = new DecoratedPopupPanel();
        popup.show();
        // Now here i want to wait for like 5 secs and then
        Timer timer = new Timer()
        {
            @Override
            public void run()
            {
                popup.hide();
            }
        };

        timer.schedule(5000); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T12:20:20.643

您可以使用[com.google.gwt.user.client.Timer](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/Timer.html)来安排未来的任务。

正如 Thomas Broyer 在评论中提到的，您还可以使用[com.google.gwt.core.client.Scheduler#scheduleFixedDelay()](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/core/client/Scheduler.html#scheduleFixedDelay%28com.google.gwt.core.client.Scheduler.RepeatingCommand,%20int%29)始终返回 false以`RepeatingCommand`指示它应该只执行一次。

# jquery - 使用 jQuery 提交表单不起作用？

> ID：10913609
> 
> 赞同：1
> 
> 时间：2012-06-06T11:48:16.483
> 
> 标签：jquery

我有一个看起来像的表格：

```
<form action="/Soeg.aspx" method="GET" id="searchFormHeader"></form> 
```

在更下方的代码中，我有一个提交按钮，表单由 form="" 触发但是，IE 不支持，然后我尝试在 jQuery 中为 IE 制作解决方案

```
<input type="submit" form="searchFormHeader" value="Søg" class="site-search-input"> 
```

jQuery 解决方案如下所示：

```
//If IE submit site search form
if ($jq(".ie")) {
    $jq(".site-search-input").click(function () {
        alert("clicked");
        $jq('#searchFormHeader').submit(function () {
            alert('Handler for .submit() called.');
            return false;
        });
    });
} 
```

但是，它永远不会进入 submit()，这没有任何意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:50:33.600

您已经为表单提交提供了一个处理程序，但您从未真正**提交**过表单。称呼：

```
$jq('#searchFormHeader').submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:55:51.973

该`submit`函数非常类似于`click`传递的参数是相应事件的事件处理程序。因此，在单击事件的情况下，您似乎正确地钉住了它，但是您在该事件处理程序中唯一要做的就是将事件处理程序附加到 form.submit 事件。您不会触发该事件。

查看您的代码和您的问题，您似乎希望在单击按钮时提交表单。如果是这样，您可以将代码更改为以下

```
if ($jq(".ie")) {
    $jq('#searchFormHeader').submit(function () {
            alert('Handler for .submit() called.');
            return false;
        });
    $jq(".site-search-input").click(function () {
        alert("clicked");
        $jq('#searchFormHeader').submit();
    });
} 
```

我已将事件处理程序移到单击事件之外，以避免一遍又一遍地附加与事件处理程序相同的函数（每次单击按钮时）。这将确保如果您多次单击该按钮，您不会每次都将事件处理程序附加到提交事件

**编辑** 没有提交输入值的问题有三个选项

*   如果您希望支持 IE8-，请将输入移至表单内部。这将是我的首选选项，它很简单，可以消除整个问题。
*   不使用提交，但使用 $.post 回发
*   克隆输入元素将其添加到表单并在提交后再次将其删除。我觉得这很骇人听闻

如果你想回帖，你可以做这样的事情

```
 var form,formId,data,url,id,
    submit = function () {
          //find the form of whatever activated the submitting
          form = $(this).closest("form");
          formId = form.attr('id');
          //iterate all related input fields and collect the data
          //note selects, textareas and checkbox/radiobuttons 
          //needs attention if those are also possible
          data = {};
          $jq("input[form="+formId + "]").each(function(){
                id = this.attr('name') ? this.attr('name') : this.attr('id');
                data[id] = this.val();
          });
          //find the url to post to
          url = form.attr('action') ? form.attr('action') : windows.location;
          //post the data to the server
          //using your original submit event handler as callback
          $jq.post(url,data,function () {
            alert('Handler for .submit() called.');
          });
          return false;
    }

    //make sure they all have a form attribut
    $jq("input").each(function(){
        if(!this.attr('form')){
            formId = this.closest("form").attr('id');
            this.attr('form',formId);
        }
    }

    //attach click event handler to the button
    $jq(".site-search-input").click(submit.call(this))
                             .closest("form")
                             .submit(submit.call(this)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:56:02.587

jQuery函数：

```
$jq(".site-search-input").click(function () {
    alert("clicked");
    $jq('#searchFormHeader').submit(function () {
        alert('Handler for .submit() called.');
        return false;
    });
}); 
```

HTML 元素：

```
<form action="/Soeg.aspx" method="GET" id="searchFormHeader">

  <input type="submit" form="searchFormHeader" value="Søg" class="site-search-input"/>

</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T11:57:44.777

HTML 代码：

```
<form action="#" method="POST" id="searchFormHeader">
<input type="submit" form="searchFormHeader" value="Søg" class="site-search-input">
</form> 
```

JQ代码：

```
$(document).ready(function () {
if ($(".ie")) {
    $(".site-search-input").click(function () {
        alert("clicked");
        $('#searchFormHeader').submit(function () {
            alert('Handler for .submit() called.');
            return false;
        });
    });
}
}); 
```

# javascript - 使用谷歌地图检测附近

> ID：10913610
> 
> 赞同：0
> 
> 时间：2012-06-06T11:48:18.387
> 
> 标签：javascript, ruby-on-rails, google-maps, geolocation

我有一个带有地址和用户的公司列表，这些公司发送索赔（也设置了他们自己的位置）。

而且我只需要为用户附近 20 英里内的公司发送电子邮件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:47:39.030

不知道为什么要使用谷歌地图，因为您发送电子邮件而不是在地图上显示位置，对吧？

我认为您最好的答案是使用地理编码服务将地址转换为纬度和经度，然后将它们放入支持地理空间索引的 Mongo 或其他数据库中。

因此，在地理编码后的 Mongo DB 中，您需要将每个地址转换为以下内容：

```
{email: 'foobar@foobar.com', address: 'address', loc : { lon : 40.739037, lat: 73.992964 } } 
```

之后，您可以查询数据库以提取用户的电子邮件，在 Mongo 中它将类似于：

```
db.emails.find( { loc : { $near : [50,50] } } ).limit(20) 
```

[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

[http://www.mongodb.org/display/DOCS/Geospatial+Indexing](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)

# java - 使用 jquery 上传电子邮件文件

> ID：10913611
> 
> 赞同：0
> 
> 时间：2012-06-06T11:48:19.700
> 
> 标签：java, javascript, jquery, html, applet

我正在使用 jquery 创建拖放文件上传器。当我试图从 ms Outlook 或苹果邮箱中拖动电子邮件文件并放入该 jsp 文件时，它不接受电子邮件内容。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:55:01.593

您的问题是您没有拖放文件。尝试将电子邮件的内容保存到`.txt`文件（或 Word 等），然后上传。

# python - 在 Windows 上模拟 /dev/random

> ID：10913614
> 
> 赞同：7
> 
> 时间：2012-06-06T11:48:29.167
> 
> 标签：python, windows, linux, random

我现在正在尝试将 python 代码从 linux 移植到 windows。在不同的地方，随机数是通过读取 /dev/random 生成的。有没有办法在 Windows 上模拟 /dev/random？

我正在寻找一种可以使代码在 linux 上可用的解决方案...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-06T11:53:57.777

如果您使用的是 Python，为什么要关心具体的实现？只需使用[模块`random`并](http://docs.python.org/library/random.html)让它处理它。

除此之外，（如果你不能依赖软件状态）[`os.urandom`](http://docs.python.org/library/os.html#os.urandom)提供基于操作系统的随机值：

> 在类 UNIX 系统上，这将查询 /dev/urandom，而在 Windows 上，它将使用 CryptGenRandom。

（请注意，它为此[`random.SystemRandom`](http://docs.python.org/library/random.html#random.SystemRandom)提供了一个很好的界面）。

如果你**真的很想**它是加密随机的，你可能想看看[PyCrypto](https://www.dlitz.net/software/pycrypto/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-06T11:54:29.103

您可以改为调用[random.SystemRandom](http://docs.python.org/library/random.html#random.SystemRandom)。这将在 Windows 上使用[CryptGenRandom](http://en.wikipedia.org/wiki/CryptGenRandom)，在 Linux 上使用 /dev/urandom。

否则，总是有 Cygwin 的 /dev/random？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T11:53:16.833

您可以使用Python 标准库中的[random](http://docs.python.org/library/random.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-30T20:15:45.920

如果您安装 Cygwin，则 /dev/random 可用。在 Cygwin 控制台窗口中，您将能够运行以下命令：

```
tom@myHost ~
$ hexdump -C -n 8 /dev/random
00000000  4f 9d 57 cc 9a 01 aa cb                           |O.W.....|
00000008 
```

并且假设您将 Cygwin 的 bin 目录添加到您的路径中，您也可以在 Window Command Prompt 窗口中运行该命令，但它只能使用 Cygwin 命令。

```
Microsoft Windows [Version 10.0.18363.778]
(c) 2019 Microsoft Corporation. All rights reserved.

C:\Users\tom>hexdump -C -n 8 /dev/random
00000000  01 99 93 1d 51 f0 dd f4                           |....Q...|
00000008 
```

不知道这对你有没有帮助！我认为您无法将其用作可以从应用程序内部读取的设备文件，而无需使用某种技巧，例如：请参阅[https://www.codeproject.com/articles/66235/interacting-with -shell-applications-made-easy](https://www.codeproject.com/articles/66235/interacting-with-shell-applications-made-easy)

# android - 如何从android调用soap服务

> ID：10913615
> 
> 赞同：0
> 
> 时间：2012-06-06T11:48:38.903
> 
> 标签：android, ksoap2

> **可能重复：**
> [如何使用 Android 调用 SOAP Web 服务](https://stackoverflow.com/questions/297586/how-to-call-soap-web-service-with-android)

我正在使用此代码，但它给出了一些错误，例如：找不到类 'org.ksoap2.serialization.SoapObject'，从方法 com.rossitek.Welcome.onCreate 引用

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
        request.addProperty("fname","kum");// Parameter for Method
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 
        envelope.dotNet = true;// **If your webservice in .net otherwise remove it**
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        try {
        androidHttpTransport.call(SOAP_ACTION, envelope);//call the eb service Method
        } catch (Exception e) {
        e.printStackTrace();}//Next task is to get Response and format that response
        SoapObject obj = null,obj1,obj2,obj3;
        try {
            obj = (SoapObject) envelope.getResponse();
        } catch (SoapFault e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        obj1=(SoapObject) obj.getProperty("diffgram");
        obj2=(SoapObject) obj1.getProperty("NewDataSet");
        for(int i=0;i<obj2.getPropertyCount();i++)//the method getPropertyCount() return the number of rows
        {
        obj3=(SoapObject) obj2.getProperty(i);  
        obj3.getProperty(0).toString();//value of column 1
        obj3.getProperty(1).toString();//value of column 2
        //like that you will get value from each column
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:57:11.340

我认为。在运行时应用程序在 ksoap2 jar 文件中找不到任何 SoapObject 类。

下载最后更新的 ksoap2 jar 文件并尝试。

我认为它对你有帮助。

# flash - jpegcam，拒绝访问后禁用捕获按钮

> ID：10913616
> 
> 赞同：5
> 
> 时间：2012-06-06T11:48:45.120
> 
> 标签：flash, webcam

在我的 php 项目中，我使用了 jpegcam、[http://code.google.com/p/jpegcam/](http://code.google.com/p/jpegcam/) & 当我们加载网络摄像头捕获页面时，它要求 Flash 播放器权限“允许或拒绝”，即使我拒绝了该选项捕获按钮已启用。我想在加载时禁用捕获按钮并仅在用户允许权限时启用！

那么如何在隐私设置对话框中检查用户是否允许或拒绝了对网站的网络摄像头访问？！伙计们，任何帮助将不胜感激.. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:59:56.737

ActionScript 的`Camera.muted`属性正是您所需要的。您链接到的源会创建一个名为 的私有`Camera`对象`camera`。您可以将其公开或添加新方法来检查其`muted`属性；

```
final public function has_access( ) : Boolean {
    return !camera.muted;
} 
```

通常，您会隐藏/禁用按钮*，直到*muted 变为 false（它不太可能再次变为 true；用户必须手动打开设置框并禁用访问）。

您还可以使用侦听器来避免不断检查此值；

```
final public function add_access_listener( myFunc : Function ) : void {
    camera.addEventListener( "status", myFunc ); // StatusEvent.STATUS
} 
```

这将像这样使用：

```
myWebcam.add_access_listener( myAccessFunc );
function myAccessFunc( ev : StatusEvent ) : void {
    if( ev.code == "Camera.Unmuted" ) {
        // video became available, enable button
    } else {
        // video became unavailable, disable button
    }
}
// remember that the user could have granted persistent permission
// (i.e. the status will be unmuted without actually changing)
if( myWebcam.has_access( ) ) {
    // video is already available, enable button
} else {
    // video is not yet available, disable button
} 
```

为避免任何可能的内存泄漏，`removeEventListener`如果您删除了相机，您也应该调用，但该库似乎并没有被设计为这样做（并且不会删除它自己的侦听器）。

# git - 为什么提交后文件保留在索引中？

> ID：10913621
> 
> 赞同：2
> 
> 时间：2012-06-06T11:49:06.003
> 
> 标签：git

我一直在阅读[git index 有什么问题，](http://www.gitguys.com/topics/whats-the-deal-with-the-git-index/#session)但有人可以解释一下为什么文件在提交后仍保留在索引中。我不明白为什么这是必要的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:02:17.923

首先，请注意 Git 以快照而非补丁的形式存储您的存储库历史记录。

因此，当您运行`git status`并看到您没有分阶段更改时，这并不意味着索引是“空的”。

这意味着索引中的快照与最新提交（更准确地说，引用的提交）之间*没有区别*`HEAD`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:14:42.723

另一种思考方式是，如果您执行了`git commit`. 因此，在提交之后，它应该立即包含该提交的内容。当您进行进一步修改时，您将这些修改添加到索引中以制作您的下一次提交。

# java - primefaces 3.2条形图x轴值渲染不正确

> ID：10913624
> 
> 赞同：0
> 
> 时间：2012-06-06T11:49:12.737
> 
> 标签：java, jakarta-ee, primefaces, managed-bean

我希望显示 primefaces 的条形图但修改了 x 轴值，我希望使用以下代码在 x 轴（动态）上显示年份，但不显示年份，而是得到诸如 1,2 之类的值， 3... 在 x 轴上 2010、2011、2012 年，...：

托管豆：

```
 categoryModel = new CartesianChartModel();  
  objejb=(StockCommodityEJBStateless) new InitialContext().lookup("StockCommodityTest");
        ChartSeries scrip1 = new ChartSeries(); 
        scrip1.setLabel(scripSymbol1);  
        Collection coll=objejb.getScripQtyYearWise(scripID1);
        for (Object o : coll) {
        Object[] res = (Object[]) o;
        Number sum = (Number)res[0];
        Object year = res[1];
        scrip1.set(year,sum);
    }
        ChartSeries scrip2 = new ChartSeries(); 
        scrip2.setLabel(scripSymbol2);  
        Collection coll2=objejb.getScripQtyYearWise(scripID2);
        for (Object o : coll2) {
        Object[] res = (Object[]) o;
        Number sum = (Number)res[0];
        Object year = res[1].toString();
        scrip2.set(year,sum);
    }
categoryModel.addSeries(scrip1);
categoryModel.addSeries(scrip2); 
```

我哪里错了？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:37:16.673

我的错误，我忘记将对象年份转换为字符串！只需要为 scrip1 添加：

```
Object year = res[1].toString(); 
```

# c# - StreamWriter 在系统突然关闭时在文件末尾写入 NUL 字符

> ID：10913632
> 
> 赞同：5
> 
> 时间：2012-06-06T11:49:36.283
> 
> 标签：c#, streamwriter, shutdown

我正在编写一些测试应用程序来使用`StreamWriter`. 执行该`WriteLine`方法时系统突然关闭。重新启动机器后，我观察到文件末尾有许多 NUL 字符。

我搜索了包括 MSDN 在内的许多网站，但没有找到解决此问题的方法。

任何人都可以帮我解决这个问题吗？

如果我们执行以下步骤，这可以很容易地重现：

1.  创建 WindowsApplication 并在其上放置一个按钮控件。

2.  在按钮单击事件处理程序中编写以下代码：

    私人无效按钮1_Click（对象发送者，EventArgs e）

    ```
     {
         string str = "Welcome to the C Sharp programming world with a test application using IO operations.";
         StreamWriter sw = new StreamWriter(fileName, true, Encoding.Unicode, str.Length);
         sw.WriteLine(str);
         sw.Close();        
     } 
    ```

3.  运行应用程序并连续单击按钮（在机器关闭之前不要停止），然后按 PC 的 Poweroff 按钮。

4.  重新启动 PC 并检查文件。它包含以下文本：

欢迎来到带有使用 IO 操作的测试应用程序的 C Sharp 编程世界。

欢迎来到带有使用 IO 操作的测试应用程序的 C Sharp 编程世界。

欢迎来到带有使用 IO 操作的测试应用程序的 C Sharp 编程世界。

欢迎来到带有使用 IO 操作的测试应用程序的 C Sharp 编程世界。

欢迎来到带有使用 IO 操作的测试应用程序的 C Sharp 编程世界。

欢迎来到带有使用 IO 操作的测试应用程序的 C Sharp 编程世界。

NULNULNULNULNULNULNULNULNULNULNULNULNULNULNULNULNULNULNULNULNULNULNULNULNULNULNULNULNULNULNUL

NUL 字符会出现在 Notepaad++ 中，而我们在普通记事本中看不到这些字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T11:53:39.107

那个会发生。当您首先附加一个文件时，它的大小在目录中被纠正（这在 NTFS 中是事务性的），然后写入实际的新数据。很有可能如果您关闭系统，您最终会得到一个附加大量空字节的文件，因为与元数据（文件大小）写入不同，数据写入不是事务性的。

这个问题没有绝对的解决办法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-08-05T13:33:54.003

我在linux（在树莓上）上的*netcore*有同样的问题。看起来它们是某种没有及时刷新的缓冲区。（`StreamWriter.Flush()`方法没有帮助）。

解决方法是将缓冲区大小设置为数据大小`array.Length`并禁用所有缓存`FileOptions.WriteThrough`（来自 msdn :)

> 指示系统应该通过任何中间缓存写入并直接进入磁盘。

```
string str = "Welcome to the C Sharp programming world with a test application using IO operations.";
byte[] data = new UTF8Encoding(true).GetBytes(str);
using (FileStream fs = new FileStream(fileName, FileMode.Append, FileAccess.Write,
                                FileShare.Read, data.Length, FileOptions.WriteThrough))
{                    
    fs.Write(data , 0, data.Length);
} 
```

对于那些来自 C/C++ 的人，它设置了 posix 标志：

> O_DIRECT 尽量减少进出该文件的 I/O 的缓存影响。一般来说，这会降低性能，但在特殊情况下很有用，例如当应用程序进行自己的缓存时。文件 I/O 直接与用户空间缓冲区进行。

更多信息：[SO问题](https://stackoverflow.com/questions/15971746/posix-o-direct-vs-windows-file-flag-write-through-file-flag-no-buffering/15971822)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T19:29:16.600

我知道这看起来很糟糕，但这是我解决问题所必须做的。将字符串写入文件后，只需输入以下代码即可。

```
var lines = System.IO.File.ReadAllLines(workingFile.FullName);

//Strip the "null line" from file
if (lines[lines.Length - 1].StartsWith("\0\0\0\0\0"))
{
    System.IO.File.WriteAllLines(workingFile.FullName, lines.Take(lines.Length - 1).ToArray());
} 
```

这样做是将文件中的所有行读入一个数组，如果最后一行是讨厌的 NUL 行，则代码将写入 Array 的所有元素减去最后一个元素（NUL 行）

# html - 复选框 CSS 规则不适用于 Internet Explorer 9

> ID：10913634
> 
> 赞同：0
> 
> 时间：2012-06-06T11:49:54.393
> 
> 标签：html, css, checkbox, internet-explorer-9

我更改复选框背景的代码：

```
.question11 input[type=checkbox] + label {
    display: block;
    height: 16px;
    padding-left: 25px;
    background: url(images/bg.gif) top left no-repeat;
} 
```

问题是它不适用于 Internet Explorer 9.0.4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:16:54.123

CSS 选择器对于 IE 来说太复杂了。如果可以更改 HTML，简单的解决方案是为复选框和标签提供类或 id。

```
<input type="checkbox" class="foo"><label class="foo">...</label>

.question11 .foo {
  ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T12:51:55.647

朱哈娜是对的。

另一个问题是，您不能仅通过 CSS 为复选框设置 100% 的样式。
它有很棒的插件，因此您可以通过图像完全替换复选框等。

--> [Uniform -](http://uniformjs.com/)例如带有 jQ​​uery 的性感表单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T13:31:01.837

该规则不会在任何复选框上设置任何属性。它仅适用`label`于特定上下文中的元素，这就是它在 IE 9 和其他浏览器上的工作方式。

如果您希望将规则应用于紧随其后的任何复选框元素`label`（正如我猜的那样），那么您将需要一种不同类型的选择器——在 CSS 选择器第 4 级草案中似乎不存在的东西，仍然更少支持。因此，您需要添加一些标记，例如复选框的类属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T12:52:18.860

像这样试试

```
.chh {

background-image: url(images/checkbox_bg.gif);}

 if(document.getElementById(id+ii).checked==true){
   document.getElementById(id+ii).className==chh;
                    } 
```

先写css再应用javascript函数

# java - 为 userId 获取休眠的 PropertyAccessException

> ID：10913636
> 
> 赞同：0
> 
> 时间：2012-06-06T11:49:55.970
> 
> 标签：java, hibernate, persistence, hql

我已经做了一个在hibernate中使用数据库登录的例子。我的Xml和实体类是User.java：

```
import java.util.Date;
import javax.persistence.Entity;

@Entity(name="User")
public class User {

    private Integer userID;
    private String username;
    private String password;
    private Date createdDate;

    /**
     * Default Constructor
     */
    public User() {
        super();
    }

    public User(Integer userID, String username, String password) {
        this.userID = userID;
        this.username = username;
        this.password = password;
    }

    public Integer getUserID() {
        return userID;
    }

    public void setUserID(Integer userID) {
        this.userID = userID;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public Date getCreatedDate() {
        return createdDate;
    }

    public void setCreatedDate(Date createdDate) {
        this.createdDate = createdDate;
    }

}//end of class() 
```

用户手册.java：

```
public class UsersBooks {

    // Declaring all attributes
    private double userID;
    private String bookID;
    private String permission;

    // Constructors
    public UsersBooks() {
        super();
    }

    public UsersBooks(double userID, String bookID, String permission) {
        super();
        this.userID = userID;
        this.bookID = bookID;
        this.permission = permission;
    }

    // Getters and Setters
    public double getUserID() {
        return userID;
    }

    public void setUserID(double userID) {
        this.userID = userID;
    }

    public String getBookID() {
        return bookID;
    }

    public void setBookID(String bookID) {
        this.bookID = bookID;
    }

    public String getPermission() {
        return permission;
    }

    public void setPermission(String permission) {
        this.permission = permission;
    }

    // Overriding toString()
    @Override
    public String toString() {
        return "UsersBooks [userID=" + userID + ", bookID=" + bookID
                + ", permission=" + permission + "]";
    }//end of toString()

}//end of class 
```

用户社交信息.java：

```
public class UserSocialInfo {

    private int socialID;

    private String loginProvider;
    private String loginProviderUID;
    private String UID;
    private String nickname;
    private String photoURL;
    private String thumbnailURL;
    private int birthDay;
    private int birthMonth;
    private int birthYear;
    private String gender;
    private String proxiedEmail;
    private String country;
    private String state;
    private String city;
    private String zip;
    private String firstname;
    private String lastname;
    private String profileURL;
    private int userID;

    /**
     * 
     */
    public UserSocialInfo() {
        // TODO Auto-generated constructor stub
    }
    /**
     * @return the socialID
     */
    public int getSocialID() {
        return socialID;
    }

    /**
     * @param socialID the socialID to set
     */
    public void setSocialID(int socialID) {
        this.socialID = socialID;
    }

    /**
     * @return the loginProvider
     */
    public String getLoginProvider() {
        return loginProvider;
    }

    /**
     * @param loginProvider the loginProvider to set
     */
    public void setLoginProvider(String loginProvider) {
        this.loginProvider = loginProvider;
    }

    /**
     * @return the loginProviderUID
     */
    public String getLoginProviderUID() {
        return loginProviderUID;
    }

    /**
     * @param loginProviderUID the loginProviderUID to set
     */
    public void setLoginProviderUID(String loginProviderUID) {
        this.loginProviderUID = loginProviderUID;
    }

    /**
     * @return the uID
     */
    public String getUID() {
        return UID;
    }

    /**
     * @param uID the uID to set
     */
    public void setUID(String uID) {
        UID = uID;
    }

    /**
     * @return the nickname
     */
    public String getNickname() {
        return nickname;
    }

    /**
     * @param nickname the nickname to set
     */
    public void setNickname(String nickname) {
        this.nickname = nickname;
    }

    /**
     * @return the photoURL
     */
    public String getPhotoURL() {
        return photoURL;
    }

    /**
     * @param photoURL the photoURL to set
     */
    public void setPhotoURL(String photoURL) {
        this.photoURL = photoURL;
    }

    /**
     * @return the thumbnailURL
     */
    public String getThumbnailURL() {
        return thumbnailURL;
    }

    /**
     * @param thumbnailURL the thumbnailURL to set
     */
    public void setThumbnailURL(String thumbnailURL) {
        this.thumbnailURL = thumbnailURL;
    }

    /**
     * @return the birthDay
     */
    public int getBirthDay() {
        return birthDay;
    }

    /**
     * @param birthDay the birthDay to set
     */
    public void setBirthDay(int birthDay) {
        this.birthDay = birthDay;
    }

    /**
     * @return the birthMonth
     */
    public int getBirthMonth() {
        return birthMonth;
    }

    /**
     * @param birthMonth the birthMonth to set
     */
    public void setBirthMonth(int birthMonth) {
        this.birthMonth = birthMonth;
    }

    /**
     * @return the birthYear
     */
    public int getBirthYear() {
        return birthYear;
    }

    /**
     * @param birthYear the birthYear to set
     */
    public void setBirthYear(int birthYear) {
        this.birthYear = birthYear;
    }

    /**
     * @return the gender
     */
    public String getGender() {
        return gender;
    }

    /**
     * @param gender the gender to set
     */
    public void setGender(String gender) {
        this.gender = gender;
    }

    /**
     * @return the proxiedEmail
     */
    public String getProxiedEmail() {
        return proxiedEmail;
    }

    /**
     * @param proxiedEmail the proxiedEmail to set
     */
    public void setProxiedEmail(String proxiedEmail) {
        this.proxiedEmail = proxiedEmail;
    }

    /**
     * @return the country
     */
    public String getCountry() {
        return country;
    }

    /**
     * @param country the country to set
     */
    public void setCountry(String country) {
        this.country = country;
    }

    /**
     * @return the state
     */
    public String getState() {
        return state;
    }

    /**
     * @param state the state to set
     */
    public void setState(String state) {
        this.state = state;
    }

    /**
     * @return the city
     */
    public String getCity() {
        return city;
    }

    /**
     * @param city the city to set
     */
    public void setCity(String city) {
        this.city = city;
    }

    /**
     * @return the zip
     */
    public String getZip() {
        return zip;
    }

    /**
     * @param zip the zip to set
     */
    public void setZip(String zip) {
        this.zip = zip;
    }

    /**
     * @return the firstname
     */
    public String getFirstname() {
        return firstname;
    }

    /**
     * @param firstname the firstname to set
     */
    public void setFirstname(String firstname) {
        this.firstname = firstname;
    }

    /**
     * @return the lastname
     */
    public String getLastname() {
        return lastname;
    }

    /**
     * @param lastname the lastname to set
     */
    public void setLastname(String lastname) {
        this.lastname = lastname;
    }

    /**
     * @return the profileURL
     */
    public String getProfileURL() {
        return profileURL;
    }

    /**
     * @param profileURL the profileURL to set
     */
    public void setProfileURL(String profileURL) {
        this.profileURL = profileURL;
    }

    /**
     * @return the userID
     */
    public int getUserID() {
        return userID;
    }

    /**
     * @param userID the userID to set
     */
    public void setUserID(int userID) {
        this.userID = userID;
    }
} 
```

我的 xml 文件 User.hbm.xml：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
    "-//Hibernate/Hibernate Mapping DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="com.entities.User" table="users">
        <id name="userID" type="long" column="userid">
            <generator class="increment" />
        </id>
        <property name="username" column="username" />
        <property name="password" column="password" />
        <property name="userID" column="userid" insert="false" update="false"/>
        <property name="createdDate" column="created_date" />
    </class>
</hibernate-mapping> 
```

UserBooks.hbm.xml：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
    "-//Hibernate/Hibernate Mapping DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="com.entities.UsersBooks" table="users_books">
        <id name="userID" type="long" column="user_id">
        </id>
        <property name="userID" column="user_id" insert="false" update="false"/>
        <property name="bookID" column="book_id" insert="false" update="false"/>
        <property name="permission" column="permissions" />
    </class>
</hibernate-mapping> 
```

用户社交信息.java：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
    "-//Hibernate/Hibernate Mapping DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="com.entities.UserSocialInfo" table="user_social_info">
        <id name="socialID" type="long" column="social_id">
            <generator class="increment" />
        </id>
        <property name="socialID" column="social_id" insert="false" update="false"/>
        <property name="loginProvider" column="login_provider" />
        <property name="loginProviderUID" column="login_provider_uid" insert="false" update="false"/>
        <property name="UID" column="uid" insert="false" update="false"/>
        <property name="nickname" column="nickname" />
        <property name="photoURL" column="photo_url" />
        <property name="thumbnailURL" column="thumbnail_url" />
        <property name="birthDay" column="birthday" />
        <property name="birthMonth" column="birthmonth" />
        <property name="birthYear" column="birthyear" />
        <property name="gender" column="gender" />
        <property name="proxiedEmail" column="proxied_email" />
        <property name="country" column="country" />
        <property name="state" column="state" />
        <property name="city" column="city" />
        <property name="zip" column="zip" />
        <property name="firstname" column="firstname" />
        <property name="lastname" column="lastname" />
        <property name="profileURL" column="profile_url" />
        <property name="userID" column="user_id" insert="false" update="false"/>
    </class>
</hibernate-mapping> 
```

休眠.cfg.xml：

```
<!DOCTYPE hibernate-configuration PUBLIC 
    "-//Hibernate/Hibernate Configuration DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory name="fabulaFactory">
            <property name="connection.driver_class">
                 com.mysql.jdbc.Driver
            </property>
        <property name="connection.url">
             jdbc:mysql://localhost:3306/appname
        </property>
        <property name="connection.username">
             user
        </property>
        <property name="connection.password">
            pwd
        </property>
            <property name="connection.pool_size">5</property>
            <!-- SQL dialect -->
            <property name="dialect">
                 org.hibernate.dialect.MySQLInnoDBDialect
            </property>
            <!-- Echo all executed SQL to stdout -->
            <property name="show_sql">false</property>
               <property name="hbm2ddl.auto">update</property>
        <mapping resource="com//hibernatexmlfiles//User.hbm.xml"/>
        <mapping resource="com//hibernatexmlfiles//UsersBooks.hbm.xml"/>
        <mapping resource="com//hibernatexmlfiles//UserSocialInfo.hbm.xml"/>
    </session-factory>
</hibernate-configuration> 
```

在执行项目时，我收到如下错误：

```
 org.hibernate.PropertyAccessException: IllegalArgumentException occurred while calling setter of com.fabulait.fabula.entities.User.userID
        at org.hibernate.property.BasicPropertyAccessor$BasicSetter.set(BasicPropertyAccessor.java:70)
        at org.hibernate.tuple.AbstractTuplizer.setIdentifier(AbstractTuplizer.java:130)
        at org.hibernate.persister.entity.BasicEntityPersister.setIdentifier(BasicEntityPersister.java:2930)
        at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:146)
        at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:107)
        at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:184)
        at org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:33)
        at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:173)
        at org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:27)
        at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:69)
        at org.hibernate.impl.SessionImpl.save(SessionImpl.java:477)
        at org.hibernate.impl.SessionImpl.save(SessionImpl.java:472)
        at com.service.UserService.storeSessionInfo(UserService.java:410)
        at com.web.LoginUser.doPost(LoginUser.java:122)
        at com.web.LoginUser.doGet(LoginUser.java:48)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:679)
    Caused by: java.lang.IllegalArgumentException: argument type mismatch
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.hibernate.property.BasicPropertyAccessor$BasicSetter.set(BasicPropertyAccessor.java:40)
        ... 32 more 
```

所以请给点建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T11:52:26.493

它应该是

```
from User u where u.username=:username 
```

我假设是用表映射`User` 的实体类（ ）`@Entity`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:30:23.790

另外，请记住，如果您已将自动导入设置为“false”，则需要完全限定类名或设置名称

```
@Entity(name="User")
public class User {
} 
```

作为建议，对于大多数更简单的查询，使用条件查询通常更容易（并且性能更高，因为您不必将 hql 解析为 AST 树）。在您的情况下，您只是在检查任何匹配项。因此，遍历结果以比较用户名与 where 子句中的内容是多余的。以下是一种更有效的方法来做你正在寻找的东西：

```
Criteria c = session.createCriteria(User.class);
c.add(Restrictions.eq("username", username));
c.setProjection(Projections.rowCount());
Number count = (Number) c.uniqueResult();
return (count.intValue() > 0); 
```

# javascript - 使用 Google Charts DataTable 角色时如何进行垂直注释？

> ID：10913637
> 
> 赞同：6
> 
> 时间：2012-06-06T11:49:59.650
> 
> 标签：javascript, gwt, google-visualization

我正在使用 Google Chart Tools DataTable Roles 功能来注释 LineChart，如下面的链接中所述：- [https://developers.google.com/chart/interactive/docs/roles](https://developers.google.com/chart/interactive/docs/roles)

但是注释是水平的而不是垂直的。例如，下面的“开始使用电子表格”注释是垂直的，这是我想要的，但对我来说它不是垂直的。 ![在此处输入图像描述](../Images/566da69bc8025605c7a27277e094ad85.png)

我正在使用以下代码添加带注释的列：-

```
addColumn({type:'string', role:'annotation'}); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-07T00:34:50.290

你很近！由于您已准备好常规注释，因此只需添加到图表选项中： `annotations: {style: 'line'}`.

jsFiddle 示例：http: [//jsfiddle.net/tVCv9/268/](http://jsfiddle.net/tVCv9/268/)

阅读有关注释的文档：[https ://developers.google.com/chart/interactive/docs/roles?hl=fr#annotationrole](https://developers.google.com/chart/interactive/docs/roles?hl=fr#annotationrole)

祝你好运！

# opa - Opa：模块和包有什么区别？

> ID：10913641
> 
> 赞同：1
> 
> 时间：2012-06-06T11:50:13.863
> 
> 标签：opa

我阅读了[Opa 文档](http://doc.opalang.org/manual)，但没有发现模块和包之间的区别，以及模块或包如何链接到 Opa 应用程序的源代码布局。

有人可以提供有关如何以及何时使用模块与包的合理示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:36:10.967

## 套餐

您可以将应用程序的某些部分隔离到不同的`packages`. 例如，您可以创建 3 个包：模型、视图和控制器。`package myApp.model`只需在属于模型包的源文件的开头定义示例即可。

然后，如果您的某个视图文件需要模型，只需`import myApp.model`在文件开头添加即可。

除了在源文件中写入`package`和`import`之外，您还可以使用单个 conf 文件：

```
myApp.controller:
    import myApp.view
    src/controller.opa

myApp.view:
    import myApp.model
    src/view.opa

myApp.model:
    src/model.opa 
```

然后使用 --conf 编译选项。

## 模块

一个模块是这样定义的

```
module MyModule {
   function f(){ void }
} 
```

您可以通过以下方式访问模块功能`MyModule.f()`

## 包内的模块

因此，如果您有一个包含定义`model`模块的包`MyModule`，并且您想从外部访问它，您将编写：

```
import myApp.model
MyModule.f() 
```

**更新**：阅读下面的消息，它们提供了其他有用的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T06:47:22.500

只是为了补充 Cedrics 的回答：

*包是一个基本的编译单元*。如果一个包或它所依赖的任何包发生了变化，那么它不需要重新编译。对于较小的项目，不使用包可能是可以的，这相当于将所有内容放在一个包中。对于较大的项目，您通常希望将项目拆分为多个包以从单独的编译中受益。

*模块主要为相关定义提供命名空间*。您可以在一个包中包含多个模块。

Opa 不施加任何文件名限制。您可以在一个文件中包含多个模块，它们的名称与文件名无关。包名称和文件在源目录树中的位置之间也没有强加关系（尽管在这里使用约定肯定是有意义的）。显然，一个文件属于一个包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:31:13.817

基本上，包总是用于包含在另一个文件中定义的值和函数。（除了那些在标准库中定义的。）因此它可以将代码部分彼此分开，或者换句话说，将您的代码构造成不同的部分。Cédrics 回答中已经解释了他们的使用方式。包不提供抽象，因为完整的代码总是包含在`import`.

另一方面，模块提供抽象。使用模块，可以定义仅在模块*内部*使用而从外部不可见的值和函数。这使得可以向模块的用户隐藏部分实现，并为外部提供定义良好的*接口。*这个概念使更改特定实现部分变得更容易，而不会破坏使用模块的代码。这是程序设计中非常重要的概念。

# java - 读取数字证书的友好名称

> ID：10913644
> 
> 赞同：1
> 
> 时间：2012-06-06T11:50:19.170
> 
> 标签：java, certificate, ssl-certificate, x509certificate, digital-certificate

我正在使用 java 处理数字证书，并且正在使用标准 getter 方法读取 X.509 证书的属性。下面是我的代码——

```
X509Certificate c = (X509Certificate)cf.generateCertificate(fr);
System.out.println("\tCertificate for: " +c.getSubjectDN());
System.out.println("\tCertificate issued by: " +c.getIssuerDN());
System.out.println("\tCertificate SN# " +c.getSerialNumber()); 
```

我还想阅读证书的友好名称。但是，没有 getFriendlyName 之类的获取器。那么如何读取证书的友好名称，或者它不能以编程方式派生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T12:29:39.257

友好名称未保存在证书中 - 这是 Microsoft Windows 证书存储的一项功能。所以它不是跨平台的，这意味着没有标准的Java API。

# php - 如何在网站中集成位置图？

> ID：10913651
> 
> 赞同：0
> 
> 时间：2012-06-06T11:50:57.880
> 
> 标签：php

我正在使用 codeigniter 开发一个房地产网站。我必须为每个属性实现谷歌地图。我如何选择每个用户在谷歌地图上找到他们的财产。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:57:20.857

您必须加载谷歌地图库。下面的教程很不错。

```
http://www.in-the-attic.co.uk/2010/08/20/codeigniter-google-map-library-and-html5-geolocation/ 
```

# c# - asp web应用程序中的word查看器

> ID：10913656
> 
> 赞同：0
> 
> 时间：2012-06-06T11:51:10.067
> 
> 标签：c#, asp.net, com, activex

我必须为显示 .docx 文件（具有精确对齐的文本、图像、表格等）以及目录（如该文档的树视图）创建一个 asp Web 应用程序页面。我想问一下，有没有开源的ActiveX控件或插件或其他东西来实现特定的任务。我已经在 windows 窗体应用程序中完成了它，但现在想在 asp web 窗体中完成它。我在 Windows 应用程序中使用**了 dsoframer控件。**请让我实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:54:43.360

支持将 .docx 文件呈现为 HTML - 我无法说出它在网页版 Word 桌面版中呈现的准确度。不过，这里有一个教程：http: [//blog.maartenballiauw.be/post/2008/01/11/Preview-Word-files-%28docx%29-in-HTML-using-ASPNET-OpenXML-and-LINQ -to-XML.aspx](http://blog.maartenballiauw.be/post/2008/01/11/Preview-Word-files-%28docx%29-in-HTML-using-ASPNET-OpenXML-and-LINQ-to-XML.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:54:57.533

请看下面的文章，

[关联](http://www.c-sharpcorner.com/uploadfile/scottlysle/wordinweb01202007101216am/wordinweb.aspx)

# java - 使用 POST 请求和图形 API 发布到用户的墙上

> ID：10913657
> 
> 赞同：0
> 
> 时间：2012-06-06T11:51:13.457
> 
> 标签：java, facebook, facebook-graph-api, servlets

我是 facebook 应用程序开发的新手，我一直在尝试在用户墙上发布一条简单的消息。我设法获得了访问令牌。这是 POST 请求的代码。我正在使用 java servlet

```
 String data = URLEncoder.encode("access_token", "UTF-8") + "=" + URLEncoder.encode(accessToken, "UTF-8");
data += "&" + URLEncoder.encode("message", "UTF-8") + "=" + URLEncoder.encode("finally", "UTF-8");
out.println("data is\n"+data);
// Send data
String u="https://graph.facebook.com/me/feed";
URL urls = new URL(u);
URLConnection conn = url.openConnection();
conn.setDoOutput(true);
OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
wr.write(data);
wr.flush(); 
```

好吧，这段代码不起作用，我不能在墙上发帖。关于我可能错在哪里的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:17:38.143

我很确定这是因为你没有指定`application/x-www-form-urlencoded`内容类型，试试这个：

```
URLConnection connection = new URL("https://graph.facebook.com/me/feed").openConnection();
connection.setDoOutput(true);
connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");

DataOutputStream out = new DataOutputStream(connection.getOutputStream());
out.writeBytes(data);
out.flush();
out.close() 
```

* * *

# 编辑

好的，所以还有两件事可能会导致此问题：

1.  您还需要指定内容长度。
2.  您可能需要阅读响应以使其计数..

此代码已经过测试并且可以正常工作：

```
StringBuffer buffer = new StringBuffer();
buffer.append("access_token").append('=').append(ACCESS_TOKEN);
buffer.append('&').append("message=").append('=').append("YO!");
String content = buffer.toString();

URLConnection connection = new URL("https://graph.facebook.com/me/feed").openConnection();
connection.setDoOutput(true);
connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
connection.setRequestProperty("Content-Length", Integer.toString(content.length()));

DataOutputStream out = new DataOutputStream(connection.getOutputStream());
out.writeBytes(content);
out.flush();
out.close();

BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream()));
String inputLine;
while ((inputLine = in.readLine()) != null) { 
    System.out.println(inputLine);
}

in.close(); 
```

# iphone - 我的应用程序可以在新的 iOS 上运行吗？

> ID：10913662
> 
> 赞同：1
> 
> 时间：2012-06-06T11:51:26.843
> 
> 标签：iphone, ios, xcode

我为 iOS 5.1 制作了一个应用程序。该应用程序是否也适用于 iOS 6？或者我是否需要对代码中的任何更新或其他内容做些什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T11:53:16.040

Apple 具有良好的向后和向前兼容性，因此它应该可以正常工作 有些情况下，当您使用某些特定库时，您的应用需要重新提交，但 99% 的情况下，您的应用会正常运行

这里要注意的一点：如果苹果会改变他们下一个设备的分辨率，你可能会发现一些低质量的图标（在 iphone 4 首次发布时发生）但无论如何你的应用程序应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T11:53:36.820

通常操作系统版本向后兼容应用程序。

# c++ - 写入二进制 VTK 文件时出错

> ID：10913666
> 
> 赞同：2
> 
> 时间：2012-06-06T11:51:50.363
> 
> 标签：c++, binaryfiles, vtk, paraview

我正在尝试编写一个基本的二进制 VTK 文件来使用 ParaView 显示一些数据，但我有一些错误，我不明白为什么。这是我在 C++ 中的测试代码：

```
#include <iostream>
#include <fstream>

double myarray[72] = {
0,0,0,1,0,0,2,0,0,3,0,0,4,0,0,
5,0,0,0,1,0,1,1,0,2,1,0,3,1,0,
4,1,0,5,1,0,0,2,0,1,2,0,2,2,0,
3,2,0,4,2,0,5,2,0,0,3,0,1,3,0,
2,3,0,3,3,0,4,3,0,5,3,0};
int main()
{
    std::ofstream vtkstream("test01.vtk", std::ios::out | std::ios::trunc);
    bool ascii = false;
    if (vtkstream) {
        vtkstream<<"# vtk DataFile Version 2.0"<<"\n";
        vtkstream<<"Exemple"<<"\n";
        if (ascii) {
            vtkstream<<"ASCII"<<"\n";
            vtkstream.close();
            vtkstream.clear();
            vtkstream.open("test01.vtk", std::ios::out | std::ios::app);
            vtkstream<<"DATASET STRUCTURED_GRID"<<std::endl;
            vtkstream<<"DIMENSIONS 6 4 1"<<std::endl;
            vtkstream<<"POINTS 24 double"<<std::endl;
            for (unsigned int i = 0; i < 72; ++i) {
                vtkstream<<myarray[i]<<" ";
            }
        } else {
            vtkstream<<"BINARY"<<"\n";
            vtkstream.close();
            vtkstream.clear();
            vtkstream.open("test01.vtk", std::ios::out | std::ios::app | std::ios::binary);
            vtkstream<<"DATASET STRUCTURED_GRID"<<std::endl;
            vtkstream<<"DIMENSIONS 6 4 1"<<std::endl;
            vtkstream<<"POINTS 24 double"<<std::endl;
            for (unsigned int i = 0; i < 72; ++i) {
                vtkstream<<myarray[i];
            }
        }
        vtkstream.close();
    } else {
        std::cout<<"ERROR"<<std::endl;
    }
    return 0;
} 
```

ASCII 文件格式完美运行，但二进制版本在 ParaView 中产生以下错误：

> 一般警告：在 ........\src\VTK\IO\vtkDataReader.cxx，第 1363 行读取二进制数据时出错！

我在 VTK 格式中的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:55:52.550

似乎 VTK 假设二进制文件以大端格式编写，而大多数 PC 使用小端存储（请参阅[VTK 文件格式文档](http://www.vtk.org/VTK/img/file-formats.pdf)第 2 页的底部）。您可以尝试在写入二进制数据时交换字节顺序，看看这是否解决了您的问题？

另请参阅[此 VTK 用户帖子](http://vtk.1045678.n5.nabble.com/writing-VTK-binary-file-td1225989.html)，与此问题类似。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-19T21:21:28.623

我的 50 美分。这是最终对我有用的代码。使用字节交换，并使用函数`write`跳过`<<`运算符的格式化

```
#include <iostream>
#include <fstream>

// Thanks to https://stackoverflow.com/questions/105252
template <typename T>
void SwapEnd(T& var)
{
  char* varArray = reinterpret_cast<char*>(&var);
  for(long i = 0; i < static_cast<long>(sizeof(var)/2); i++)
    std::swap(varArray[sizeof(var) - 1 - i],varArray[i]);
}

double myarray[72] = {
  0.001,0.002,0,1,0,0,2,0,0,3,0,0,4,0,0,
  5,0,0,0,1,0,1,1,0,2,1,0,3,1,0,
  4,1,0,5,1,0,0,2,0,1,2,0,2,2,0,
  3,2,0,4,2,0,5,2,0,0,3,0,1,3,0,
  2,3,0,3,3,0,4,3,0,5,3,0};

int main()
{
  std::ofstream vtkstream;
  vtkstream.open("test.vtk", std::ios::out | std::ios::app | std::ios::binary);
  if (vtkstream) {
    vtkstream<<"# vtk DataFile Version 2.0"<<"\n";
    vtkstream<<"Exemple"<<"\n";
    vtkstream<<"BINARY"<<"\n";
    vtkstream<<"DATASET STRUCTURED_GRID"<<std::endl;
    vtkstream<<"DIMENSIONS 6 4 1"<<std::endl;
    vtkstream<<"POINTS 24 double"<<std::endl;
    for (unsigned int i = 0; i < 72; ++i) {
      SwapEnd(myarray[i]);
      vtkstream.write((char*)&myarray[i], sizeof(double));
    }
    vtkstream.close();
  } else {
    std::cout<<"ERROR"<<std::endl;
  }
  return 0;
} 
```

# java - 不在war文件中创建空目录

> ID：10913667
> 
> 赞同：0
> 
> 时间：2012-06-06T11:51:55.737
> 
> 标签：java, war

我需要在我的 Web 应用程序中创建一些空目录以供将来使用。在我的 IDE 中，我创建了它们，但是当我运行我的应用程序时，这个文件夹没有被创建并且在应用程序的 war 文件中不存在。

如何在运行时在 war 文件中创建这些空文件夹？

我知道添加一个文件（例如 .empty 文件）可以解决我的问题，但这不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:15:58.523

不要假设您可以在解压 .war 的位置写入文件系统。无法保证 .war 甚至会被解包，或者如果是的话，它会被解包到哪里。

您最好使用通过 servlet 上下文参数配置的外部目录，并将其用于存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-03T12:46:12.533

如果您使用的是 java servlet（我只是假设，因为它是在我阅读时在 tomcat 中运行的 java 应用程序），您可以实现 ServletContextListener 接口以在上下文事件上运行您的自定义代码，例如创建文件夹

```
public class MyListener implements ServletContextListener {

    @Override
    public void contextInitialized(ServletContextEvent sce) {

       // check existence or create your folders
       // this is the code that will be run on context init

    }

    @Override
    public void contextDestroyed(ServletContextEvent sce) {

       // here you can run custom code when the context is destroyed

    }
} 
```

当然，您需要在 web.xml 文件中添加所有必需的描述符，大多数 IDE 会为您完成，您可以拥有自己的自定义参数或加载属性文件的路径，但无论如何这里是一个片段：

```
<listener>
    <description>ServletContextListener</description>
    <listener-class>org.your.package.MyListener</listener-class>
</listener>
    <context-param>
    <param-name>your:param-name</param-name>
    <param-value>value</param-value>
</context-param>
<context-param>
    <param-name>your:config-file</param-name>
    <param-value>path/to/config.properties</param-value>
</context-param> 
```

希望，我还不算晚。我之前使用 QuartzScheduler 使用此策略来设置在后台运行的备份/警报作业组。

# php - 我需要知道 session_start 以前用过吗？

> ID：10913670
> 
> 赞同：0
> 
> 时间：2012-06-06T11:52:07.437
> 
> 标签：php, cookies

我有很多代码。
我需要始终使用 session_start() 函数。
如果我没有使用 session_start() 不要互相运行。

例子：

```
<?php 
if(session_start() == "used")
{
       // not run
}
else
{
       session_start();
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T11:55:58.347

你的意思是，你想检查会话是否已经开始？你可以从这里得到它

[检查 PHP 会话是否已经开始](https://stackoverflow.com/questions/6249707/php-a-better-way-to-check-if-session-has-already-started)

```
if(session_id() == '') {
    // session isn't started
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T11:57:41.467

```
if(session_id() === ""){
   session_start();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T14:25:10.087

你可以这样试试：

```
if (!isset($_SESSION)) {    
    session_start();
} 
```

另请参阅[会话](http://php.net/manual/en/reserved.variables.session.php)文档

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T11:55:09.797

我认为使用这个页面顶部会更好。没有必要使用这个sevral时间。

```
session_start(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T12:10:36.197

你可以这样做： if(!isset($_SESSION)){ `session_start();` }

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T11:55:31.680

我认为这行不通，因为您需要`session_start()`在任何代码行之前执行

# c# - C# - 框架中的异常处理

> ID：10913675
> 
> 赞同：3
> 
> 时间：2012-06-06T11:52:28.530
> 
> 标签：c#, exception, exception-handling, frameworks, namespaces

我必须用 C# 编写一个 FTP (AUTH TSL) 框架。我是编写框架的菜鸟。
例如，当我证明一个文件存在而它不存在时，我该怎么办？

*   为使用框架的程序员抛出异常？
*   打印 ExceptionMessage (Console.WriteLine()) 而不抛出异常？

在这种情况下什么是专业的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T11:56:41.633

实际上是一个广泛的问题，但有一些线索可以让你上路：

1.  永远不要在框架中使用`Console.WriteLine()`或任何类似的东西。
2.  对于类似的方法`Framework.FileExists`，如果文件不存在，只需返回`false`值。这就是布尔返回值的真正本质。那更语义化。
3.  对于遇到问题的操作，抛出自定义或预定义的异常。例如，如果你需要一个参数并且你想确保没有 null 被传递给你的方法，那么只需检查方法体中的参数，如果它为 null，则 throw `ArgumentNullException`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:45:23.987

要将“错误代码”作为返回值传回，通常使用枚举。您的上传方法可能会返回

```
public enum UploadResult
{
    Success,
    PasswordInvalid,
    UserInvalid,
    FileNotFound,
    HostNotFound
} 
```

然后，您的框架的用户可以像这样轻松地使用它：

```
if (Ftp.Upload(User, Pass, Host, File) != UploadResult.Success)
{
    MessageBox.Show("Sorry, something went terribly wrong.");
} 
```

或检查更具体的原因，然后重试。

编辑：正如我在对您的原始帖子的评论中所写的那样：如果*确实*发生了意外或用户输入明显无效，请抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T11:55:44.337

我会抛出一个异常，因为框架的用户很清楚发生了什么。但我会编写自己的异常类。

我不会使用返回码，因为这样用户必须知道它们并解释它们。可能会出现错误。

# ios - 为什么在应用旋转变换之前需要修改 CALayer 的 transform3D 的 m34？

> ID：10913676
> 
> 赞同：4
> 
> 时间：2012-06-06T11:52:28.687
> 
> 标签：ios, opengl-es, 3d, calayer

以下代码可以对图层进行***透视***旋转变换：

```
CATransform3D transform3DFoo = CATransform3DIdentity;

transform3DFoo.m34 = -1.0 / 1000;

transform3DFoo = CATransform3DRotate(transform3DFoo, M_PI / 4, 1, 0, 0); 
```

但是，如果两行颠倒：

```
CATransform3D transform3DFoo = CATransform3DIdentity;

transform3DFoo = CATransform3DRotate(transform3DFoo, M_PI / 4, 1, 0, 0);

transform3DFoo.m34 = -1.0 / 1000; 
```

然后视角消失了。现在它是正交的（没有透视）。熟悉透视的人知道原因吗？

* * *

**更新：**

```
// First Identity and then transform3DFoo.m34 = -1.0 / 1000; is done

1.00000     0.00000     0.00000     0.00000 
0.00000     1.00000     0.00000     0.00000 
0.00000     0.00000     1.00000    -0.00100 
0.00000     0.00000     0.00000     1.00000 

// and then CATransform3DRotate(transform3DFoo, M_PI / 4, 1, 0, 0);

1.00000     0.00000     0.00000     0.00000 
0.00000     0.70711     0.70711    -0.00071 
0.00000    -0.70711     0.70711    -0.00071 
0.00000     0.00000     0.00000     1.00000 

// Now start with Identity and only the Rotate statement is done:

1.00000     0.00000     0.00000     0.00000 
0.00000     0.70711     0.70711     0.00000 
0.00000    -0.70711     0.70711     0.00000 
0.00000     0.00000     0.00000     1.00000 

// and then transform3DFoo.m34 = -1.0 / 1000; is done

1.00000     0.00000     0.00000     0.00000 
0.00000     0.70711     0.70711     0.00000 
0.00000    -0.70711     0.70711    -0.00100 
0.00000     0.00000     0.00000     1.00000 
```

（加上“OpenGL”的标签是因为在OpenGL中应该是一样的原理）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T01:22:58.090

先设置`m34`相当于先旋转后投影。最后设置`m34`大致相当于先投影后旋转。由于输入坐标的 z=0，首先投影不会做任何事情。

要了解这是为什么，您需要了解一下变换矩阵的工作原理。

我相信在 CA 位置是由一个变换矩阵`M`通过执行以下操作进行变换的：

```
[x y z w] = [x y z w] * M 
```

（见[http://en.wikipedia.org/wiki/Matrix_multiplication](http://en.wikipedia.org/wiki/Matrix_multiplication)）

将两个变换矩阵相乘相当于连接变换。左边的变换/矩阵首先发生。很容易看出这是为什么：

```
[x y z w] * (LEFT * RIGHT) = ([x y z w] * LEFT) * RIGHT 
```

大多数（全部？）CA变换函数（例如`CATransform3DRotate`）只是将您的变换矩阵与另一个适当构造的矩阵预乘，例如：

```
M = ROTATE * M 
```

设置`m34`大致相当于预乘一个投影矩阵，即：

```
M = PROJ * M 
```

（`PROJ`投影矩阵在哪里——一个单位矩阵，但有`m34`集合）

这并不完全正确（这就是我一直粗略地说的原因）——它只有`M`在正确的位置有一些 0 和 1 时才有效。基本上，在一般情况下，只是设置`m34`是一件无意义的事情——正确的做法是乘以一个投影矩阵。

无论如何，如果你把所有这些放在一起，你应该能够明白为什么我在第一段中所说的是真的（假设我没有犯任何错误:)

# java - 休眠查询

> ID：10913677
> 
> 赞同：1
> 
> 时间：2012-06-06T11:52:31.290
> 
> 标签：java, hibernate, orm

对于我可能愚蠢的问题，我很抱歉。我有产品和订单表（具有多对多关系），还有一个用户表。现在我想通过 user_id 和特殊字段“order_satus”获取产品数量。我可以进行两个查询，按特殊标准获取订单，然后按顺序获取产品尺寸。但这根本不是最优的。当我使用 JDBCTemplate 时，我做了很多连接并且只得到一个查询。

这是我的实体：

```
@Entity
@Table(name = "shop.order")
public class Order {
@Id
@Column(name = "order_id")
@GeneratedValue(strategy = GenerationType.AUTO)
private long orderId;

private long user_id;

@Column(name = "databegin")
private Date dateBegin;

@Column(name = "dataend")
private Date dateEnd;

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "user_id", insertable = false, updatable = false)
private User user;

@ManyToMany(fetch = FetchType.LAZY)
@JoinTable(name = "order_product", joinColumns = { @JoinColumn(name = "order_id") }, inverseJoinColumns = { @JoinColumn(name = "product_id") })
private List<Product> products;
} 
```

产品实体

```
 @Entity
    @Table(name = "product")
    public class Product {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int product_id;

    @ManyToMany(fetch = FetchType.LAZY)
    @JoinTable(name = "order_product", joinColumns = { @JoinColumn(name = "product_id") }, inverseJoinColumns = { @JoinColumn(name = "order_id") })
    private List<Order> order;

    public List<Order> getOrder() {
        return order;
    }

    public void setOrder(List<Order> order) {
        this.order = order;
    }

    @Column
    @NotBlank
    private String name;

    @Column
    @Max(value = 250)
    private String descr;

    @Column
    @Max(value = 250)
    private String manufacturer;

    @Column
    private Double price;

    @Column
    private Byte[] barcode;

    @Column
    private Byte[] picture;

    @ForeignKey(name = "category_id")
    private int category_id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:25:48.357

正如你给sql查询..

> 'select count(*) from produtc p join order ord on ord.id = ? 和 ord.status = ?' ——伊戈尔·马斯特诺伊

根据您提供的实体结构，HQL 将是..

```
select ord.products productList from Order ord where ord.id=? and ord.status=? 
```

此查询将返回您的产品列表 ( `List<Product> products`)，然后您可以通过 java 代码获取计数，即`productList.size();`此大小是您需要的产品计数，基于您将作为参数传递的订单 ID 和订单状态，您也可以`user.id`在 where 中附加原因根据用户过滤您的结果。

这是根据您的需要的产品列表..

```
Query query = getSession().createQuery("select ord.products productList from Order ord where ord.id=:orderID and ord.status=:orderStatus");
query.setInteger("orderID", orderIDParameter);
query.setString("orderStatus", orderStatusParameter);
List<Product> productList = (List<Product>) query.list();
Integer productCount = productList.size(); 
```

此 productCount 是您需要的产品数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:27:22.740

如果我没记错的话，一个用户可以有多个订单，一个订单可以有多个产品。

我认为一个不错的选择是使用 DetachedCriteria 并用它来构建您的查询。

应该看起来像（未经测试）：

```
DetachedCriteria userCriteria = DetachedCriteria.forClass(User.class);
userCriteria.add(Projections.groupProperty("user_id"));
userCriteria.add(Projections.count("product_id");
DetachedCriteria orderCriteria = userCriteria.createCriteria("order.user_id","order",CriteriaSpecification.LEFT_JOIN);
DetachedCriteria orderCriteria = orderCriteria.createCriteria("order_product.order_id","product",CriteriaSpecification.LEFT_JOIN);
//orderCriteria.add(Restrictions.eq(...); // I can't see a "status" field in your model

List results = userCriteria.list(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:27:42.960

```
select size(ord.products) from Order ord where ord.id = :orderId and ord.status = :orderStatus 
```

或者

```
select count(*) from Order ord join ord.products where ord.id = :orderId and ord.status = :orderStatus 
```

第一种形式将产生一个子查询来获取计数。第二个依赖于连接来创建应用计数的 sql 产品。在我看来，第一种形式更直观，而第二种查询在大多数情况下会表现得更好。

# php - 如何动态翻译网页

> ID：10913678
> 
> 赞同：0
> 
> 时间：2012-06-06T11:52:33.333
> 
> 标签：php, translation

> **可能重复：**
> [您将如何将预先存在的 Web 应用程序转换为多语言应用程序？](https://stackoverflow.com/questions/156911/how-would-you-transform-a-pre-existing-web-app-in-a-multilingual-one)
> [国际化简单 PHP 网站的最佳方式](https://stackoverflow.com/questions/6953528/best-way-to-internationalize-simple-php-website)

我试图弄清楚如何翻译我网页上的所有静态文本（我正在使用 PHP）。但我不太确定“正确”的方式是什么。到目前为止，这是我的想法，但也许这一切都是错误的：D

**1.** 对于页面上的每个静态文本，只需使用“getTranslation(“Hello World!”) 之类的内容获取翻译，它就会在数据库或 XML/CSV/PHP 之类的文件中查找所有翻译。翻译。

但这似乎很糟糕，因为每次刷新/加载时，我们都必须在每个页面上查询数据库或解析文件。

**2** 每次加载页面时，我都可以从数据库/文件中读取并将当前语言的翻译存储在一个数组中，并在页面构建时从数组中获取翻译，而不是再次查询数据库/解析文件。

**3** 有没有办法只阅读一次翻译，然后让所有页面都可以访问？我唯一能想到的是 php 的 SESSION，但在那里存储翻译似乎是错误的。

那么“最常见”或“正确”的方法是什么？

狩猎愉快！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:56:00.207

听起来你需要[gettext](http://php.net/manual/en/book.gettext.php)。gettext 被广泛使用和广泛支持。我很确定它也得到了很好的优化。

# php - C2DM 应用服务器解决方案

> ID：10913680
> 
> 赞同：2
> 
> 时间：2012-06-06T11:52:39.570
> 
> 标签：php, jquery, asp.net, android-c2dm

任何人都可以推荐一个教程或指向我可以用来为 C2DM 设置第三方应用程序服务器的一些易于实现的 .net 或 PHP 代码的方向。

我是一名前端开发人员，具有一些 PHP/.net 经验，但 Java 经验非常少，我们的应用程序是使用所需的 Java 代码/类设置的，我已经在 C2DM 注册，但我正在努力处理应用程序服务器部分方程。

我想设置一个服务器应用程序，它可以处理表单请求以向我们的应用程序发送消息。

任何帮助或建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:13:15.147

与客户端相比，C2DM 的服务器部分是小菜一碟（在我看来）。您可以在下面找到有关服务器部分的一些教程：

即使您不是 JAVA 开发人员，[JAVA也很容易理解。](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html#tutorial_serverapp)
一种用于[PHP](http://blog.digitalstruct.com/2010/11/21/android-c2dm-with-php-and-zend-framework/)和 Zend 框架。stackoverflow 上 的[C#](https://stackoverflow.com/questions/5714230/c2dm-server-with-c-sharp)
基本示例

如果您想要一些性能，要避免的一个常见错误：不要为每条要发送的消息而连接。您只需对谷歌服务器进行一次身份验证，然后您就可以发送多条通知消息。

另外不要忘记 Google 会定期刷新`Update-Client-Auth`标头中的令牌。您应该处理此标头以使您的令牌保持最新。看看[这个](https://groups.google.com/group/android-c2dm/browse_thread/thread/00b03b6a0985059f/14b69680f3b6926b)关于它的讨论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:42:55.923

你可能想看看[这篇文章](https://stackoverflow.com/questions/4121508/c2dm-implementation-php-code)。它是使用 curl 的基本 PHP 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:48:53.350

我正在构建一个基于 Drupal CMS 的服务器端 C2DM。
虽然它还没有 100% 准备好，但如果你愿意，我可以尝试帮助你构建它。
使用 Drupal 作为服务器端，其惊人的模块如服务和规则，您可以非常容易地创建一个非常有趣的应用程序，几乎是“开箱即用”。

# android - 如何在 Android 中使用自定义相机捕获和保存图像？

> ID：10913682
> 
> 赞同：40
> 
> 时间：2012-06-06T11:53:12.450
> 
> 标签：android, android-layout, android-intent, android-camera

如何在自定义相机中捕获图像，然后将该图像保存在 android 中？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-06-06T11:58:23.837

请看下面的答案。

Custom_CameraActivity.java

```
public class Custom_CameraActivity extends Activity {
    private Camera mCamera;
    private CameraPreview mCameraPreview;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mCamera = getCameraInstance();
        mCameraPreview = new CameraPreview(this, mCamera);
        FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
        preview.addView(mCameraPreview);

        Button captureButton = (Button) findViewById(R.id.button_capture);
        captureButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                mCamera.takePicture(null, null, mPicture);
            }
        });
    }

    /**
     * Helper method to access the camera returns null if it cannot get the
     * camera or does not exist
     * 
     * @return
     */
    private Camera getCameraInstance() {
        Camera camera = null;
        try {
            camera = Camera.open();
        } catch (Exception e) {
            // cannot get camera or does not exist
        }
        return camera;
    }

    PictureCallback mPicture = new PictureCallback() {
        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
            File pictureFile = getOutputMediaFile();
            if (pictureFile == null) {
                return;
            }
            try {
                FileOutputStream fos = new FileOutputStream(pictureFile);
                fos.write(data);
                fos.close();
            } catch (FileNotFoundException e) {

            } catch (IOException e) {
            }
        }
    };

    private static File getOutputMediaFile() {
        File mediaStorageDir = new File(
                Environment
                        .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),
                "MyCameraApp");
        if (!mediaStorageDir.exists()) {
            if (!mediaStorageDir.mkdirs()) {
                Log.d("MyCameraApp", "failed to create directory");
                return null;
            }
        }
        // Create a media file name
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss")
                .format(new Date());
        File mediaFile;
        mediaFile = new File(mediaStorageDir.getPath() + File.separator
                + "IMG_" + timeStamp + ".jpg");

        return mediaFile;
    }
} 
```

CameraPreview.java

```
public class CameraPreview extends SurfaceView implements
        SurfaceHolder.Callback {
    private SurfaceHolder mSurfaceHolder;
    private Camera mCamera;

    // Constructor that obtains context and camera
    @SuppressWarnings("deprecation")
    public CameraPreview(Context context, Camera camera) {
        super(context);
        this.mCamera = camera;
        this.mSurfaceHolder = this.getHolder();
        this.mSurfaceHolder.addCallback(this);
        this.mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    @Override
    public void surfaceCreated(SurfaceHolder surfaceHolder) {
        try {
            mCamera.setPreviewDisplay(surfaceHolder);
            mCamera.startPreview();
        } catch (IOException e) {
            // left blank for now
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder surfaceHolder) {
        mCamera.stopPreview();
        mCamera.release();
    }

    @Override
    public void surfaceChanged(SurfaceHolder surfaceHolder, int format,
            int width, int height) {
        // start preview with new settings
        try {
            mCamera.setPreviewDisplay(surfaceHolder);
            mCamera.startPreview();
        } catch (Exception e) {
            // intentionally left blank for a test
        }
    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <FrameLayout
        android:id="@+id/camera_preview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" />

    <Button
        android:id="@+id/button_capture"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Capture" />

</LinearLayout> 
```

将以下行添加到您的 androidmanifest.xml 文件中

```
<uses-feature android:name="android.hardware.camera" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-06T12:01:52.290

关注片段将帮助您

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="de.vogella.cameara.api"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />
    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="de.vogella.camera.api.MakePhotoActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/captureFront"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:onClick="onClick"
        android:text="Make Photo" />

</RelativeLayout> 
```

**PhotoHandler.java**

```
package org.sample;

import java.io.File;
import java.io.FileOutputStream;
import java.text.SimpleDateFormat;
import java.util.Date;

import android.content.Context;
import android.hardware.Camera;
import android.hardware.Camera.PictureCallback;
import android.os.Environment;
import android.util.Log;
import android.widget.Toast;

public class PhotoHandler implements PictureCallback {

    private final Context context;

    public PhotoHandler(Context context) {
        this.context = context;
    }

    @Override
    public void onPictureTaken(byte[] data, Camera camera) {

        File pictureFileDir = getDir();

        if (!pictureFileDir.exists() && !pictureFileDir.mkdirs()) {

            Log.d(Constants.DEBUG_TAG, "Can't create directory to save image.");
            Toast.makeText(context, "Can't create directory to save image.",
                    Toast.LENGTH_LONG).show();
            return;

        }

        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyymmddhhmmss");
        String date = dateFormat.format(new Date());
        String photoFile = "Picture_" + date + ".jpg";

        String filename = pictureFileDir.getPath() + File.separator + photoFile;

        File pictureFile = new File(filename);

        try {
            FileOutputStream fos = new FileOutputStream(pictureFile);
            fos.write(data);
            fos.close();
            Toast.makeText(context, "New Image saved:" + photoFile,
                    Toast.LENGTH_LONG).show();
        } catch (Exception error) {
            Log.d(Constants.DEBUG_TAG, "File" + filename + "not saved: "
                    + error.getMessage());
            Toast.makeText(context, "Image could not be saved.",
                    Toast.LENGTH_LONG).show();
        }
    }

    private File getDir() {
        File sdDir = Environment
          .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);
        return new File(sdDir, "CameraAPIDemo");
    }
} 
```

**MakePhotoActivity.java**

```
package org.sample;

import android.app.Activity;
import android.content.pm.PackageManager;
import android.hardware.Camera;
import android.hardware.Camera.CameraInfo;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Toast;
import de.vogella.cameara.api.R;

public class MakePhotoActivity extends Activity {
    private final static String DEBUG_TAG = "MakePhotoActivity";
    private Camera camera;
    private int cameraId = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // do we have a camera?
        if (!getPackageManager()
                .hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
            Toast.makeText(this, "No camera on this device", Toast.LENGTH_LONG)
                    .show();
        } else {
            cameraId = findFrontFacingCamera();
            camera = Camera.open(cameraId);
            if (cameraId < 0) {
                Toast.makeText(this, "No front facing camera found.",
                        Toast.LENGTH_LONG).show();
            }
        }
    }

    public void onClick(View view) {
        camera.takePicture(null, null,
                new PhotoHandler(getApplicationContext()));
    }

    private int findFrontFacingCamera() {
        int cameraId = -1;
        // Search for the front facing camera
        int numberOfCameras = Camera.getNumberOfCameras();
        for (int i = 0; i < numberOfCameras; i++) {
            CameraInfo info = new CameraInfo();
            Camera.getCameraInfo(i, info);
            if (info.facing == CameraInfo.CAMERA_FACING_FRONT) {
                Log.d(DEBUG_TAG, "Camera found");
                cameraId = i;
                break;
            }
        }
        return cameraId;
    }

    @Override
    protected void onPause() {
        if (camera != null) {
            camera.release();
            camera = null;
        }
        super.onPause();
    }

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-21T14:43:18.807

请参阅本文档

[http://developer.android.com/guide/topics/media/camera.html#custom-camera](http://developer.android.com/guide/topics/media/camera.html#custom-camera)

安卓开发者网站

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2015-10-02T13:32:28.953

```
 showbookimage.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

                // create intent with ACTION_IMAGE_CAPTURE action
                Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                /**
 Here REQUEST_IMAGE is the unique integer value you can pass it any integer
 **/
                // start camera activity
                startActivityForResult(intent, TAKE_PICTURE);
            }

            }

        ); 
```

然后你现在可以给图像一个文件名，如下所示，然后将其转换为位图，然后再转换为文件

```
 private void createImageFile(Bitmap bitmap) throws IOException {
        // Create an image file name
        ByteArrayOutputStream bytes = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.JPEG, 40, bytes);
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
        String imageFileName = "JPEG_" + timeStamp + "_";
        File storageDir = Environment.getExternalStoragePublicDirectory(
                Environment.DIRECTORY_PICTURES);
        File image = File.createTempFile(
                imageFileName,  /* prefix */
                ".jpg",         /* suffix */
                storageDir      /* directory */
        );
        FileOutputStream stream = new FileOutputStream(image);
        stream.write(bytes.toByteArray());
        stream.close();
        // Save a file: path for use with ACTION_VIEW intents
        mCurrentPhotoPath = "file:" + image.getAbsolutePath();
        fileUri = image.getAbsolutePath();
        Picasso.with(getActivity()).load(image).into(showbookimage);
    }
    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent intent) {

        if (requestCode == TAKE_PICTURE && resultCode== Activity.RESULT_OK && intent != null){
            // get bundle
            Bundle extras = intent.getExtras();
            // get
            bitMap = (Bitmap) extras.get("data");
//            showbookimage.setImageBitmap(bitMap);
            try {
                createImageFile(bitMap);
            } catch (IOException e) {
                e.printStackTrace();
            }

        }
    } 
```

使用毕加索图像显示相当快

# javascript - JavaScript / jQuery 输入[type=text] 模式

> ID：10913686
> 
> 赞同：1
> 
> 时间：2012-06-06T11:53:19.323
> 
> 标签：javascript, jquery, design-patterns, date, input

好的，我在表单中有一个输入，这是一个日期输入。我希望它接受基于“XX/XX/XXXX”之类的模式的字符。目前它只接受数字和“/”。但我不希望用户输入“X/XXXX/XX”之类的日期或其他类型的日期，也不想像“//XX/XXX/XXX”这样写错。我不知道如何在这个或 jQuery 上使用 js，因此用户根据模式输入日期而不是其他方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T11:57:00.597

廉价而简单的方法可能只是实现[jQuery UI 日期选择器](http://jqueryui.com/demos/datepicker/#date-formats)控件，以便您可以通过它来控制输入格式。

它基本上是在回避问题，但可能会为您解决实际问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:00:35.037

使用正则表达式`^(3[0-1]|[0-2]?[0-9])\/(0?[0-9]|1[0-2])\/(2[0-9]+)$`：

```
var date = "20/12/2012";

console.log(isDateOK(date));

function isDateOK(date) {
    return date.match(/^(3[0-1]|[0-2]?[0-9])\/(0?[0-9]|1[0-2])\/([1-2][0-9]{3})$/);
} 
```

如果不匹配，它将返回 false。此示例使用 DD/MM/YYYY。如果您想要 MM/DD/YYYY，请改用以下正则表达式：`^(0?[0-9]|1[0-2])\/(3[0-1]|[0-2]?[0-9])\/[1-2][0-9]{3$`

JSFiddle：http: [//jsfiddle.net/UBFeN/2/](http://jsfiddle.net/UBFeN/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T11:56:24.567

看看： [http ://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

# solr - 用于 Solr 索引的单独 HDD 或单独分区

> ID：10913688
> 
> 赞同：1
> 
> 时间：2012-06-06T11:53:27.647
> 
> 标签：solr

使用 solr 时什么是最好的……使用单独的 HDD 或 SSD 来托管 solr 索引数据？或者只是硬盘上的一个单独的分区？

只关心 Windows Server R2 上 solr 的搜索和索引性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:04:09.437

将索引数据与其他服务放在同一分区中没有任何好处，因为 Solr 仍将与其他进程竞争访问同一主轴。

这是所有搜索引擎将索引与其他数据分开放置的标准程序。

SSD 是存储索引数据的可行选择，尽管它们并未广泛用于关键数据。SSD 比 HDD 快得多，但不那么可靠。不过，这与索引无关，因为如果 SSD 崩溃，您可以“轻松”重建索引。

# knockout.js - 如何取消映射可观察数组

> ID：10913691
> 
> 赞同：2
> 
> 时间：2012-06-06T11:53:42.423
> 
> 标签：knockout.js, knockout-mapping-plugin

我有一个包含多个集合的复杂视图模型。用户可以将新项目添加到集合中。我手动创建视图模型并用于`ko.mapping.fromJS`绑定来自服务器的数据。集合可以是空的或已经包含值。

我寻找一种从视图数据创建 JSON 以将其发送回服务器的方法。

当我使用`ko.mapping`JSON 时，只包含添加项目的空对象，因为它们在初始数据中不存在。

当我使用`ko.toJSON`JSON 时，它包含 ko_mapping 属性。

我创建了一个[jsfiddle](http://jsfiddle.net/delixfe/qEdnf/19/)。

一种解决方案似乎是使用`ko.toJSON`并删除 ko_mapping 属性，但我希望有更好的解决方案。

编码：

```
var initialData = {
   title: 'numbers:',
   numbers: []
   };

function Data() {
    var self = this;

    self.title = ko.observable();  
    self.numbers = ko.observableArray();

    self.addNumber = function() {
        self.numbers.push({
            id: ko.observable(2)
        });
    };

    self.removeNumber = function(item) {
        self.numbers.destroy(item);
    };
}

function ViewModel() {
    var self = this;
    self.masterData = [{
        id: 1,
        caption: "One"},
    {
        id: 2,
        caption: "Two"}];

    self.data = new Data();

    self.toMappedJSON = function() {
        var json = ko.mapping.toJSON(self.data);
        $('#json').text(js_beautify(json));
    };

   self.toJSON = function() {
       var json = ko.toJSON(self.data);
       $('#json').text(js_beautify(json));
   };    
}

var viewModel = new ViewModel();
ko.mapping.fromJS(initialData, {}, viewModel.data);

ko.applyBindings(viewModel);​ 
```

的HTML：

```
<div data-bind="with: data">
<h2 data-bind="text: title"></h2>
    <ul data-bind="foreach: numbers">
        <li>
           <select data-bind="value: id, options: $root.masterData, optionsText: 'caption', optionsValue: 'id'"></select>
            value: <span data-bind="text: id"></span>
            <button data-bind="click: $parent.removeNumber">-</button>
        </li>
    </ul>
    <button data-bind="click: addNumber">+</button>
</div>

<h2>JSON</h2>
<div>
    <button data-bind="click: toMappedJSON">ko.mapping.toJSON</button>
    <button data-bind="click: toJSON">ko.toJSON</button>    
</div>
<textarea id="json" rows="15" cols="50"></textarea> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T15:32:18.360

在取消映射时，映射插件的要求是所有对象都必须已使用插件创建。当您将项目添加到数组时，您没有使用映射插件创建它们。只需将您的添加方法更改为此。

```
self.addNumber = function() {
   self.numbers.push(ko.mapping.fromJS({
      id: ko.observable(2)
   }));
}; 
```

它应该工作。

希望这可以帮助。

# css - 有没有办法在 CSS 中定义颜色常量？

> ID：10913697
> 
> 赞同：2
> 
> 时间：2012-06-06T11:54:15.223
> 
> 标签：css

我的 CSS 文件中的所有颜色都分散在各处。

我希望我在 CSS 中的所有颜色都在一个地方，以便它们易于调整。像常量这样的东西会很有用。

什么是帮助的好方法？我在想像下面这样的东西，但我会很感激任何建议：

```
BODY_BACKGROUND_COLOR = #A8A8A8;
HEADER_BACKGROUND_COLOR = BLUE;
HEADER_TEXT = BLACK;
BODY_TEXT = #eee;

/* ... tonnes of CSS ... */

body {
  background-color: BODY_BACKGROUND_COLOR;

/* ... tonnes of CSS ... */

.header {
  /* ... tonnes of CSS ... */
  background-color: HEADER_BACKGROUND_COLOR;
  /* ... tonnes of CSS ... */
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T11:55:03.187

您可以使用 CSS 处理器，例如[LESS](http://lesscss.org/)。

但是，如果您只想将颜色用作常量，则可以使用服务器端语言处理文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:31:30.727

[LESS](http://lesscss.org)绝对是一个合适的选择。除了将 js 文件添加到 HTML 之外，无需任何操作即可开始。请记住，它会增加您客户端的负载。一旦你喜欢它，你就可以在服务器端使用它，从而避免客户端负载。

它还为您提供了对颜色执行操作的选项 - 例如添加两种颜色、按给定百分比使颜色变亮和变暗等。

顺便说一句，我认为使用服务器端语言来处理每个请求的 CSS 文件会给服务器增加不必要的负担。而 AFAIK，包括 HTML 文件中的内联 CSS 代码是唯一的方法，这不是提供 CSS 文件的最佳方式（因为它们不能被缓存）。

# java - 如果 remove() 调用但什么也没做，迭代器会损坏吗？

> ID：10913700
> 
> 赞同：0
> 
> 时间：2012-06-06T11:54:40.617
> 
> 标签：java, collections, iterator, concurrentmodification

假设我正在迭代某个集合，然后`remove()`用缺席键调用，这样它什么都不做。下一次迭代会导致异常吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T12:01:26.520

首先，`ConcurrentModificationException`是可选的。*一个兼容的容器根本*不需要尝试发现并发修改。

然而，大多数标准容器倾向于这样做。

我刚刚在 JDK7 中检查了其中的几个，它们只有在找到元素后才会增加修改计数。

话虽如此，我会劝阻你不要依赖这种行为。

# jquery - 将悬停暂停添加到 setInterval()？

> ID：10913703
> 
> 赞同：9
> 
> 时间：2012-06-06T11:54:49.387
> 
> 标签：jquery, setinterval

嗨，这是我用于幻灯片放映的 jquery 函数以及其他内置函数。当我将鼠标悬停在整个 div 上时，我一直试图让它暂停。帮帮我！

```
$(function() {
var timer = setInterval( showDiv, 5000);
var counter = 2;
function showDiv() {

if (counter ==0) { counter++; return; }

$('div','#slide-show-overall')
  .stop()
  .fadeOut('slow')
  .filter( function() { return this.id.match('picture-set-' + counter); })   
  .fadeIn('slow');
  if (counter ==2) { slideWings();} //extra functions
  if (counter ==1) { resetWings();} //extra functions
counter == 3? counter = 1 : counter++; 
}
});
}); 
```

```
<div style="position:absolute;width:1000px;height:600;top:0px;z-index:0;overflow:hidden;" id="slide-show-overall" >
<div id="picture-set-1" style="">
<img src="images/3.jpg" align=left width=1000>
</div>
<div id="picture-set-2" style="display:none;">
<img src="images/1.jpg" align=left width=1000>
<img src="images/wing_left.png" align=left height=200 width=200 style="margin-top:-900px;margin-left:230px;" id="wing-left-1">
<img src="images/wing_right.png" align=left height=200 width=200 style="margin-    top:-900px;margin-left:830px;" id="wing-right-1">
</div>
<div id="picture-set-3" style="display:none;">
<img src="images/5.jpg" align=left width=1000>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-06T12:01:02.603

您想用来`clearInterval`删除悬停间隔，然后在关闭悬停功能中替换它：

```
$('#slide-show-overall').hover(function(ev){
    clearInterval(timer);
}, function(ev){
    timer = setInterval( showDiv, 5000);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T12:00:52.987

```
$('#slide-show-overall > div').hover(
  function () {
    clearInterval(timer)
  },
  function () {
    timer = setInterval( showDiv, 5000);
  }
); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-28T13:57:00.040

为什么不将整个“setInterval”过程放入一个函数中？这样，您可以通过名称停止它并通过调用该函数来启动它。

```
// the function - set var up just in case
// the timer isn't running yet
var timer = null;
function startSetInterval() {
    timer = setInterval( showDiv, 5000);
}
// start function on page load
startSetInterval();

// hover behaviour
$('#slide-show-overall').hover(function() {
  clearInterval(timer);
},function() {
  startSetInterval();
}); 
```

# java - 使用用户登录表单和匿名登录表单进行身份验证的最佳方法

> ID：10913704
> 
> 赞同：1
> 
> 时间：2012-06-06T11:54:51.063
> 
> 标签：java, authentication, forms-authentication, vaadin

我必须构建一个显示一些数据的 Web 应用程序。我将有两种用户：注册用户和匿名用户。注册用户将从公司内网运行应用程序，匿名用户将从互联网运行应用程序。注册用户将看到比匿名用户更多的数据。

我需要一个登录表单来注册用户（知道谁在查看数据），但是当匿名用户使用该应用程序时，登录表单一定不能显示。

在同一个 Web 应用程序中，第一个屏幕必须是登录表单，但在某些情况下，登录表单不能出现。最好的方法是什么？

我正在使用 Vaadin（基于 GWT 的 Java 框架）来开发我的应用程序。我认为一个好方法是检查浏览器 url，但我不确定是否是最好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:58:46.427

正如 McOmghall 所说。您可以通过调用获取用户的ip：

```
WebBrowser b = (WebBrowser) getMainWindow().getTerminal().
String ip = b.getAddress(); 
```

或（在您的应用程序类中）：

```
WebBrowser b = ((WebApplicationContext) getContext()).getBrowser();
String ip = b.getAddress(); 
```

然后您可以使用 Jakara Commons Net 检查 IP 地址是否在您公司的子网中（例如 192.168.0.0/24）：

```
SubnetInfo subnet = (new SubnetUtils("192.168.0.0", "255.255.255.0")).getInfo();
boolean test = subnet.isInRange(ip); 
```

这是[另一个很酷的解决方案](https://stackoverflow.com/a/579300/403053)，不需要使用任何 3rd 方库。

[来源 1](https://vaadin.com/forum/-/message_boards/view_message/18465)

[来源 2](https://stackoverflow.com/questions/577363/does-anyone-know-a-java-component-to-check-if-ip-address-is-from-particular-netw)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:04:30.277

如果你有外网和内网的区别，你应该通过IP检查连接的来源。Java 提供了一种方法来做到这一点，但我不知道 Vaadin 是否可以做到这一点。

# java - PrimeFaces 的对话框组件的问题

> ID：10913706
> 
> 赞同：2
> 
> 时间：2012-06-06T11:55:00.940
> 
> 标签：java, jsf-2, dialog, primefaces

在我的应用程序中，当用户单击`Reply`评论时，我将显示一个用于输入消息的对话框。请看下面的图片。

![回复对话框](../Images/a0fc3b5d4a28ecdd11a0532607a0a939.png)

如您所见，我的对话框有两个问题。

1.  它被`<p:layoutUnit>`右侧的部分隐藏。
2.  当我将属性添加`modal="true"`到对话框时，对话框本身也无法访问。

如果您能给我一些关于如何解决这些问题的建议，我将不胜感激。

最好的祝福，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T14:33:03.050

我终于找到了解决方案。要解决这个问题，有两件事要做：

1.  将属性添加`appendToBody="true"`到对话框组件。
2.  把对话带出中心`<p:layoutUnit>`，让它独立存在`<p:layout>`。

需要注意的重要一点是，如果我将属性添加`style="z-index: 999 !important;"`到对话框组件中，对话框将正常出现。但是，文本区域将变得无响应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-15T12:54:59.303

在 Primefaces 5.x 上，它在我设置时工作`appendTo="@(body)"`

# php - 访问数组 php

> ID：10913713
> 
> 赞同：-3
> 
> 时间：2012-06-06T11:55:33.187
> 
> 标签：php, arrays

我有以下 PHP 数组：

```
class MyItems {
  $items = array(
      'note' => array(),
      'abstract' => array()
  )
} 
```

我想`note`使用以下代码访问数组：

```
$item = new MyItems();

$i = $item -> items;

echo $i['note']; 
```

但我明白了`Notice: Undefined index: note`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:57:24.400

```
Notice: Undefined index: notes 
```

或者

```
Notice: Undefined index: note 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:01:30.547

这应该有效：

```
class MyItems {
  public $items = array(
      'note' => array(),
      'abstract' => array()
  );
} 
```

添加`public`之前`$items`和一个';' 在最后一个')'之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:17:59.643

试试下面的例子，它正在工作

```
 <?php
  class MyItems 
  {
  var $items = array(
  'note' => array('test'),
  'abstract' => array()
  );
  }
  $item = new MyItems();

 $i= $item->items;
 $i['note']=10;
 echo $i['note'];
 ?> 
```

# hibernate - JPA 实体关系：删除时级联

> ID：10913715
> 
> 赞同：3
> 
> 时间：2012-06-06T11:55:37.860
> 
> 标签：hibernate, jpa, cascade

我正在使用 Spring、JPA 和 Hibernate。

我得到了以下实体：

```
@Entity
@Table(name = "Supplier")
public class Supplier {

   @Id
   @Column(name = "Supplier_ID", nullable = false)
   private Integer supplierId;

   ...
} 
```

和，

```
@Entity
@Table(name = "Product")
public class Product {

   @Id
   private Integer productId;

   @ManyToOne(cascade = CascadeType.ALL)
   @OnDelete(action = OnDeleteAction.CASCADE)
   @JoinColumn(name = "Supplier_ID")
   private Supplier supplier;

   ...
} 
```

现在，我的问题是，使用给定的架构

1.  当我从子项（即产品）中删除一行时，供应商也会被删除吗？
2.  或者，只有当父级（即供应商）被删除时，才会级联删除所有子级“产品”

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T13:37:36.393

The product will be removed when the supplier is removed due to the OnDelete annotation.

The OnDelete annotation is used only when the schema is generated by Hibernate. It configures the foreign key in database so that when the referenced row is deleted, the row containing the foreign key is also deleted.

See [http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-hibspec-singleassoc](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-hibspec-singleassoc)

But Hibernate will also delete the supplier when you delete the product (which is probably not what you want), because of the CascadeType.ALL set on the association. You should remove this attribute: there is no reason to delete a supplier when one of its product is removed.

# android - 按下按钮后如何执行代码以运行？

> ID：10913719
> 
> 赞同：0
> 
> 时间：2012-06-06T11:55:43.670
> 
> 标签：android

在 Android 中按下按钮时，您可以使用 setOnClickListener 在用户抬起手指后执行代码。你怎么能在他们按下后立即执行代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:57:36.063

使用`setOnTouchListener`方法：

```
 button.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
     // TODO Auto-generated method stub
     if(event.getAction()==MotionEvent.ACTION_DOWN)
           //do what you wish to
     return false;
    }
   })) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:59:25.150

```
findViewById(R.id.myButton).setOnTouchListener(new OnTouchListener(){
        @Override
        public boolean onTouch(View arg0, MotionEvent arg1) {
            if(arg1.getAction() == MotionEvent.ACTION_DOWN){
                //do something funny
            }
            return true;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:02:16.100

你可以尝试这样的事情：

```
public class DownTouchButton extends Button implements OnTouchListener {

    private DownTouchButton(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    private DownTouchButton(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    private DownTouchButton(Context context) {
        super(context);
        init();
    }

    private void init() {
        setOnTouchListener(this);
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        int action = event.getAction();
        switch(action){
        case MotionEvent.ACTION_DOWN:
            Log.d("YourApp", "A down event");
            break;
        default:
            break;
        }
        return false;
    }
} 
```

然后在你的xml中：

```
<com.your.package.DownTouchButton
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="Down Press Me!"
/> 
```

# google-app-engine - Google App Engine (python)：根据自定义字段过滤用户

> ID：10913720
> 
> 赞同：1
> 
> 时间：2012-06-06T11:55:43.473
> 
> 标签：google-app-engine, filter

我正在使用`webapp2_extras.appengine.auth.models.User`基本上扩展了`google.appengine.api.users model`. 现在，我在我的应用程序中注册了自定义用户，他们有很多自定义字段。问题是我想使用各种自定义字段过滤/（多过滤器）所有用户。例如：

用户模型有 2 个字段`is_active`，`activation_key`现在我想使用这些字段过滤它们，例如：

```
from google.appengine.api import users

act_key = 'hw-2j38he63u83hd6hak3FshSqj3TGemn9'
user = users.all().filter('is_active =', False).filter('activation_key =', act_key).get()
if user:
  return True
else:
  return False 
```

使用自定义字段过滤用户模型的最佳方法是什么？

编辑：

还尝试了以下方法：

```
from webapp2_extras.appengine.auth.models import User

query = User.query().filter('is_active =', False)
print query 
```

但这会引发如下错误：

```
Traceback (most recent call last):
File "/opt/google_appengine_1.6.4/google/appengine/ext/admin/__init__.py", line 320, in post
exec(compiled_code, globals())
File "<string>", line 6, in <module>
File "lib/ndb/query.py", line 968, in filter
raise TypeError('Cannot filter a non-Node argument; received %r' % arg)
TypeError: Cannot filter a non-Node argument; received 'is_active =' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T00:22:20.030

在 NDB 中查询 Expando 属性的语法与在旧 DB API 中的执行方式略有不同，并[在此处](https://developers.google.com/appengine/docs/python/ndb/queries#properties_by_string)记录。您的查询需要看起来像这样：

```
user = users.all().filter(ndb.GenericProperty('is_active') == False, ndb.GenericProperty('activation_key) == act_key).get() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:56:53.987

您的自定义用户模型是用`db`包实现的还是`ndb`？

对于第一个问题，如果您只需要检查用户是否存在，您可以进行 keys_only 查询`.all(keys_only=True).filter(...`

使用 webapp2 用户模型查询时遇到的错误取决于 ndb 包。使用 ndb 查询的正确语法是：

```
User.query().filter(User.is_active == False) 
```

或者

```
User.query(User.is_active == False) 
```

当然，您需要查询您的自定义用户模型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T14:10:53.890

`webapp2_extras.appengine.auth.models.User`是具有`created`、`updated`和属性`auth_ids`的Expando 模型。`password`除此以外的所有内容或*自定义属性*都将存储为不透明的 blob，即不会被索引。也就是说，无法查询/过滤它们。

您可以对`User`模型进行子类化并添加您需要的属性，或者（更好）创建一个新模型（例如`Account`）。

在处理 Datastore 以使模型尽可能小时，这是一个好习惯，这就是为什么：考虑一个具有数十个属性的模型，每次获取一个实体时都需要获取所有属性；网络在这里不是问题，什么是 protobuf 解码，而 Python 并不擅长它。

# c++ - 如何在编译时检查类型

> ID：10913728
> 
> 赞同：5
> 
> 时间：2012-06-06T11:56:12.183
> 
> 标签：c++, visual-c++, c-preprocessor

我提供了使用 float 或 double 类型编译程序的选项，但有一个问题：我需要手动设置 GL_FLOAT 或 GL_DOUBLE，因为我不知道如何执行以下操作：

```
typedef float MYTYPE;

#if MYTYPE == float
    #define GL_MYTYPE GL_FLOAT // used for vertex array parameters.
#else
    #define GL_MYTYPE GL_DOUBLE
#endif 
```

注意：我没有 C++11 或其他任何东西，只有好的旧 C++。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T12:07:00.313

在 C++11 中，您可以将[`std::conditional`](http://en.cppreference.com/w/cpp/types/conditional)and[`std::is_same`](http://en.cppreference.com/w/cpp/types/is_same)用作：

```
#define GL_MYTYPE  std::conditional                       \
                   <  std::is_same<MYTYPE,float>::value,  \
                      GL_FLOAT,                           \
                      GL_DOUBLE                           \
                   >::type 
```

在 C++03 中，您可以自己实现这些功能：

```
template<bool B, class T, class F>
struct conditional { typedef T type; };

template<class T, class F>
struct conditional<false, T, F> { typedef F type; }; 
```

和

```
template<class T, class U>
struct is_same { static const bool value = false; };

template<class T>
struct is_same<T, T> { static const bool value = true; }; 
```

请注意，实施`conditional`取自[网站](http://en.cppreference.com/w/cpp/types/conditional)本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T12:00:03.830

`#define`s 在编译器运行之前由预处理器处理。所以它看不到`typedef`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T12:00:31.543

使用预处理器宏来改变你的`typedef`行的作用

```
#if defined(TYPE_IS_FLOAT)
typedef float MYTYPE;
#else
typedef double MYTYPE;
#end 
```

然后使用你的构建系统进行`TYPE_IS_FLOAT`适当的设置（当然给它一个更好的名字）。

或者将所有类似行为的代码包装在模板类中，并为此类型使用模板参数，然后使用当时合适的版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T12:02:37.933

你可以这样做：

```
#define MYFLOAT

#ifdef MYFLOAT
    typedef float MYTYPE;
     #define GL_MYTYPE GL_FLOAT // used for vertex array parameters.
#else
    typedef double MYTYPE;
    #define GL_MYTYPE GL_DOUBLE
#endif 
```

您需要定义`MYFLOAT`是否要使用`float`，或者省略它以使用`double`。

PS：保持 ind 这不是在编译时评估的，而是在预处理时评估的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T12:00:13.883

您可以使用 #ifdef 如下：

```
#ifdef DOUBLE
   #define GL_MYTYPE GL_FLOAT
   //or
   typdef ...
#endif

#ifdef FLOAT
   #define GL_MYTYPE GL_DOUBLE
   //or
   typdef ...
#endif 
```

您必须使用 DOUBLE 或 FLOAT 作为定义的符号来编译代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-13T15:55:29.663

我认为[纳瓦兹的回答](https://stackoverflow.com/a/10913905/148668)*几乎*是正确的。在 和 之间进行选择的特殊情况下`GL_FLOAT`，`GL_DOUBLE`不需要`std::conditional`。只需使用[三元 if](https://en.wikipedia.org/wiki/%3F:)：

```
#define GL_MYTYPE std::is_same<MYTYPE,float>::value?GL_FLOAT:GL_DOUBLE 
```

这是因为`GL_FLOAT`and`GL_DOUBLE`不是类型，而是文字`GLenum`值。所以`GL_MYTYPE`也不应该是一个类型名，而是一个`GLenum`. 所以我宁愿使用：

```
const GLenum GL_MYTYPE = std::is_same<MYTYPE,float>::value?GL_FLOAT:GL_DOUBLE; 
```

# ipad - 如何在所有低版本 iPad 中使用 popoverBackgroundViewClass

> ID：10913729
> 
> 赞同：1
> 
> 时间：2012-06-06T11:56:16.523
> 
> 标签：ipad, ios5

我在我的项目中使用**popoverBackgroundViewClass**。如果从 iOS5 进行构建，则构建在 iPad3 中运行良好，但在 iPad2 中崩溃。我该怎么做才能在所有较低版本的 iPad 中执行 iOS5 构建

```
 if (version >= 5.0)
{

    pc.popoverBackgroundViewClass = [KSCustomPopoverBackgroundView class];

} 
```

//pc-----> UIPopOverCotroller //

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T06:21:13.980

我也解决了同样的问题。当您从 iOS5 进行构建时，您应该确保

```
 iOS Deployment Target iOS 3.1
     ** Compiler for C/C++/Objective-C LLVM GCC 4.2** 
```

# mysql - 来自 mysql 的 1 天前的记录

> ID：10913733
> 
> 赞同：1
> 
> 时间：2012-06-06T11:56:26.203
> 
> 标签：mysql

我将日期作为整数存储在我的表中

现在我希望获得所有早于 1 天的记录

我使用以下代码。但它不起作用

```
SELECT * from points where point_date < now() - interval 1 day 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T12:00:31.420

```
SELECT * from points where point_date < DATE_SUB(now() ,INTERVAL 1 DAY) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:01:23.323

尝试使用`FROM_UNIXTIME()`函数，看看它是如何工作的。

```
SELECT * from points where FROM_UNIXTIME(point_date) < (now() - interval 1 day) 
```

# iphone - 比较两个 NSMutableArray

> ID：10913735
> 
> 赞同：2
> 
> 时间：2012-06-06T11:56:29.883
> 
> 标签：iphone, objective-c, ios, nsmutablearray

我有一个包含 NSMutableDictionary 值的 NSMutableArray。我必须确定 NSMutableArray 中是否存在特定的字典值？

NSMutableArray：

表数据：

```
{
    {

        categories = 267;
        "category_ids" = 267;
        "created_at" = "2012-04-18 05:32:10";
        "custom_design_from" = "2010-12-03 00:00:00";
    }
    {
        categories = 267;
        "category_ids" = 267;
        "created_at" = "2012-04-18 05:32:10";
        "custom_design_from" = "2010-12-03 00:00:00";
    }
 } 
```

我必须确定一个特定的字典值。

我的代码：

```
if ( [tableData containsObject:[appDelegate.Product objectAtIndex:i]] ) 
{
     // Return Always false...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:06:33.197

据我记得，`containsObject:`方法通过向其中的所有实例发送`isEqual:`消息来检查数组是否包含给定对象。NSDictionary 类有方法 isEqualToDictionary: comares 字典的内容。你可以试着做这样的事情

```
- (BOOL) dictionaryArray:(NSMutableArray*)array containsDictionary:(NSDictionary*)givenDictionary
{
    BOOL result = NO;

    for( NSDictionary* dict in array )
    {
        if( [dict isEqualToDictionary:givenDictionary] )
        {
            result = YES;
        }
    }

    return result;
} 
```

如果您的数组通过调用包含给定字典，则此方法应返回

```
NSDictionary* dict = [appDelegate.Product objectAtIndex:i];
if ( [self dictionaryArray:tableData containsDictionary:dict] )
{
    // do what you need
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:01:13.150

如果 2 个字典包含相同的数据但它们不是同一个对象，则可能会发生这种情况 例如 ( `NSDictionary`)

```
NSDictionary *d1 = [NSDictionary dictionaryWithObject:@"1" forKey:@"1"];
NSDictionary *d2 = [NSDictionary dictionaryWithObject:@"1" forKey:@"1"];
if(d1 == d2)
   //Does note get called 
```

s1 具有与 s2 相同的数据，但对象不同，因此正常的相等性测试将永远无法工作

这可能是发生在你身上的事情你可能有 2 个具有相同数据结构的字典，但它们实际上并不是同一个对象

您将不得不通过测试 NSDictionary 中的实际字符串或 id 来详细说明您的字典

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:23:51.930

包含相同数据的两个对象通常不相同。一个例子：

```
NSMutableArray* array1 = [NSMutableArray arrayWithObjects:@"a", nil];
NSMutableArray* array2 = [NSMutableArray arrayWithObjects:@"x", @"y", nil];
NSMutableArray* array3 = array2; 
```

现在，当然，array1 与 array2 是不同的对象，而 array2 和 array3 是相同的对象。

```
1: a
2: x, y
3: x, y 
```

所以，让我们改变其中之一：

```
[array1 replaceObjectAtIndex:0 withObject:@"x"];
[array1 addObject:@"y"]; 
```

现在所有三个数组都有相同的内容，但数组 1 和数组 2 仍然是不同的对象：

```
1: x, y
2: x, y
3: x, y 
```

让我们做另一个改变：

```
[array2 addObject:@"z"]; 
```

由于array1 与array2 是不同的对象，因此更改array 2 不会影响array1。但是 array2 与 array3 相同（array2 和 array3 只是同一事物的两个名称）：

```
1: x, y
2: x, y, z
3: x, y, z 
```

# cordova - 带有错误的cordova1.6.1：cordova-android.js：第3558行：JSCallback错误：请求失败

> ID：10913737
> 
> 赞同：2
> 
> 时间：2012-06-06T11:56:39.623
> 
> 标签：cordova

首先加载本地html：

```
String url ="file:///android_asset/www/login-mobile.html";
this.loadUrl(url); 
```

phonegap 在 login-mobile.html 中成功加载。

但是...当我单击 login-mobile.html 中的登录按钮时，然后使用代码触发单击事件：

```
document.location = "http://192.168.84.86:8080/static/mobile-demo/phonegap/phonegap.html";
or 
$("#loginForm").attr("action","http://192.168.84.86:8080/static/mobile-    demo/phonegap/phonegap.html");
document.loginForm.submit(); 
```

然后 phonegap 加载以下错误：

```
D/CordovaLog(13261): http://192.168.84.101:8686/maw-home/res/js/cordova-  android.js: Line 3558 : JSCallback Error: Request failed. 
```

据我所知，XHR（cordova/plugin/android/callback）有问题。但我不知道为什么？

多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:08:08.877

补充：逻辑很简单：在登录验证后，使用cordova-1.6.1直接到另一个页面。

所以我发现有一种方法是可行的：用js模拟a标签href处理机制。

```
var theTarget = document.getElementById('alink'); 
var clickevent = document.createEvent('Event');
clickevent.initEvent('click', true, false);
theTarget.target = "_blank";
theTarget.href = "http://192.168.84.86:8080/static/mobile-demo/phonegap/phonegap.html";
theTarget.dispatchEvent(clickevent); 
```

它直接到phonegap.html 并正确加载cordova。

所以这就是为什么？还有其他方法可以代替，因为在验证后，我想将数据发布到页面（phonegap.html）。

# guice - 在 Shiro Guice 中，如何将 authc 更改为不同的子类？

> ID：10913745
> 
> 赞同：0
> 
> 时间：2012-06-06T11:56:59.190
> 
> 标签：guice, shiro

例子：

在 shiro.ini 我有：

```
# Change from FormAuthenticationFilter to VerboseFormAuthenticationFilter
authc=webapp.filters.VerboseFormAuthenticationFilter
authc.loginUrl=/login
authc.successUrl=/oncall 
```

如何使用 Shiro Guice 执行上述操作？我对以下行感兴趣：

```
authc=webapp.filters.VerboseFormAuthenticationFilter 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:43:27.977

```
public class YourShiroSecurityModule extends ShiroWebModule {
    private static final Key<VerboseFormAuthenticationFilter> VERBOSE_AUTH = Key.get(VerboseFormAuthenticationFilter.class);

    public YourShiroSecurityModule(ServletContext servletContext) {
        super(servletContext);
    }

    @Override
    protected void configureShiroWeb() {
        [...]
        addFilterChain("<path>", VERBOSE_AUTH);
    }
} 
```

# html - 嵌套 ul 绝对定位在父 li 下

> ID：10913754
> 
> 赞同：0
> 
> 时间：2012-06-06T11:57:20.840
> 
> 标签：html, css

这里是html+css：http: [//jsfiddle.net/xgXXN/](http://jsfiddle.net/xgXXN/)

我想`orange`（父 li）出现 OVER `green`（嵌套 ul）。绿色 ul 必须绝对定位，因为我不希望它拉伸父 li。

我找不到解决方案:(。如果可能的话，最好的只是css修改而不是HTML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:08:36.423

您遇到的问题是因为您将应用应用`z-index`到`li`然后也应用到此 li 的子列表。

尝试设置`position:relative`并`z-index`改为锚点。

[http://jsfiddle.net/N62x8/](http://jsfiddle.net/N62x8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:06:55.940

我希望这是您正在寻找的：

```
ul.main-menu > li > ul {
    position:absolute;
    padding-top: 5px;
} 
```

# c++ - #if /#endif 预处理指令

> ID：10913756
> 
> 赞同：0
> 
> 时间：2012-06-06T11:57:25.890
> 
> 标签：c++, c, preprocessor-directive

我应该总是使用`#if`指令加上`#endif`吗？

1.  如果是的话 - 如果我只使用会出现什么问题`#if`？
2.  如果没有 - 当我只使用`#if`时，当组合`#if`/ `#else`？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T11:58:53.503

如果您没有匹配的`#endif`, （或`#else`... `#endif`），您的代码将无法编译。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T12:16:06.370

```
1.If yes - what could be a problem if I only use #if? 
```

正如其他人所提到的，如果您仅使用#if 并且不将其与#endif 匹配，则预处理器将失败，并将显示为编译器错误。

```
2.If no - why I use only #if,and when combination #if/#else? 
```

即使在#if/#else 的情况下，最后也应该有一个#endif。否则它将无法正常工作。您可以自己尝试并检查。

除了检查和定义宏之外，这些最常用于条件编译。请在下面找到一些相关链接（基本级别）：

[http://gcc.gnu.org/onlinedocs/cpp/Ifdef.html](http://gcc.gnu.org/onlinedocs/cpp/Ifdef.html)
[http://en.wikipedia.org/wiki/C_preprocessor](http://en.wikipedia.org/wiki/C_preprocessor)
[http://www.phanderson.com/C/preprocess.html](http://www.phanderson.com/C/preprocess.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T11:58:52.713

是的。

没有`#endif`预处理器就不会知道`#if`块的结尾。

# apache - apache htaccess 使用条件

> ID：10913757
> 
> 赞同：1
> 
> 时间：2012-06-06T11:57:31.590
> 
> 标签：apache, .htaccess

我想在 htaccess 中使用条件，如果是真的使用一些重写规则。例如我的想法是：

```
if(subdomain='en' OR query string have '[lan=en]'){
    RewriteRule ^home.html$ index.php [QSA,L]
    RewriteRule ^user/1.html$ user.php?id=1 [QSA,L]
    .....
}elseif(subdomain='fa' OR query string have '[lan=fa]'){
    RewriteRule ^home.html$ index_fa.php [QSA,L]
    RewriteRule ^karbar/1.html$ user.php?id=1 [QSA,L]
    .....
} 
```

我该怎么做？有什么方法可以为每个条件使用不同的 .htaccess 文件吗？

**注意：**我的域地址和查询字符串是动态的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:07:22.353

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后在您`.htaccess`的`DOCUMENT_ROOT`目录中使用如下规则：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^en\. [OR]
RewriteCond %{QUERY_STRING} (^|&)lan=en(&|$)
RewriteRule ^home\.html$ index.php [L]

RewriteCond %{HTTP_HOST} ^en\. [OR]
RewriteCond %{QUERY_STRING} (^|&)lan=en(&|$)
RewriteRule ^user/1\.html$ user.php?id=1 [QSA,L]

RewriteCond %{HTTP_HOST} ^fa\. [OR]
RewriteCond %{QUERY_STRING} (^|&)lan=fa(&|$)
RewriteRule ^home\.html$ index_fa.php [L]

RewriteCond %{HTTP_HOST} ^fa\. [OR]
RewriteCond %{QUERY_STRING} (^|&)lan=fa(&|$)
RewriteRule ^karbar/1\.html$ user.php?id=1 [QSA,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:14:26.527

您可以将一组`RewriteCond`指令与多个`RewriteRule`指令组合在一起，但要以一种迂回的方式：

```
RewriteCond %{HTTP_HOST} !^en\. [AND]
RewriteCond %{QUERY_STRING} !(^|&)lan=en(&|$)
RewriteRule .* - [S=2]
RewriteRule ^home\.html$ index.php [L]
RewriteRule ^user/1\.html$ user.php?id=1 [QSA,L]

RewriteCond %{HTTP_HOST} !^fa\. [AND]
RewriteCond %{QUERY_STRING} !(^|&)lan=fa(&|$)
RewriteRule .* - [S=2]
RewriteRule ^home\.html$ index_fa.php [L]
RewriteRule ^karbar/1\.html$ user.php?id=1 [QSA,L] 
```

指令中的`[S=2]`标志`RewriteRule`表示“跳过接下来的 2 条规则”；因此规则如下所示：“如果`HTTP_HOST`不以 开头`en.` *且不* `QUERY_STRING`包含`lan=en`，则跳过接下来的两条规则”；*因此，仅*当上述条件*不*匹配时才考虑接下来的两个规则。

# css - CSS 包装器不会随着浮动子级一起增长

> ID：10913764
> 
> 赞同：0
> 
> 时间：2012-06-06T11:57:56.287
> 
> 标签：css

我的页面上有一个按此规则设置样式的包装器

```
#wrapper{
    width: 900px;
    margin: 0 auto;
    background: #FFF;
    padding: 10px;
    margin-top: 30px;
    margin-bottom: 30px;
} 
```

问题是，如果孩子们漂浮，包装就不会增长。经过一番谷歌搜索后，我发现添加 display:none 可以解决它。确实如此，但我不能这样做，因为我的一些元素必须溢出包装（通过包装伸出的设计元素）。我如何在不使用溢出的情况下解决它：隐藏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:02:23.813

这是使用浮点数时的常见问题。有几个常见的解决方案：

1.  在浮动后添加一个 div `clear: both`。[例子](http://jsfiddle.net/dX2Xh/)。

    ```
    <div style="float: left"></div>
    <div style="float: left"></div>
    <div style="clear: both"></div> 
    ```

2.  将两个浮动添加到具有 CSS 属性的容器中`overflow: auto`。[例子](http://jsfiddle.net/dX2Xh/1/)。

    ```
    <div style="overflow: auto">
        <div style="float: left"></div>
        <div style="float: left"></div>
    </div> 
    ```

3.  使父元素浮动。[例子](http://jsfiddle.net/dX2Xh/2/)。

    ```
    <div style="float: left">
        <div style="float: left"></div>
        <div style="float: left"></div>
    </div> 
    ```

4.  使用 :after CSS 伪元素。[例子](http://jsfiddle.net/dX2Xh/3/)。

    ```
    .parentelement:after {
        content: ".";
        display: block;
        height: 0; 
        clear: both; 
        visibility: hidden;
    } 
    ```

5.  向父元素添加设置高度。[例子](http://jsfiddle.net/dX2Xh/4/)。

    ```
    <div style="height: 200px">
        <div style="float: left"></div>
        <div style="float: left"></div>
    </div> 
    ```

就个人而言，为了简单和语义，我使用选项 2

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T12:02:38.977

您需要清除浮动元素，例如

```
<div style="float:left"></div>
<div style="float:right"></div>
<div style="clear:both"></div> 
```

# java - 外观设计模式和抽象

> ID：10913773
> 
> 赞同：4
> 
> 时间：2012-06-06T11:58:21.983
> 
> 标签：java, oop, design-patterns

java中的外观设计和抽象有什么区别？我只是觉得它就像java中的接口一样简单，并且具有相同的目的。

我看到更多关于人们说这是客户的第一次接触，隐藏了更多的接口和类。但以上都是接口的目的。！！！

在这里糊涂了！！！！！！请举一个小例子并帮助我。

谢谢，普尼斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T12:06:13.990

来自维基百科：

> 外观是一个对象，它为更大的代码体（例如类库）提供简化的接口。立面可以：
> 
> *   使软件库更易于使用、理解和测试，因为外观为常见任务提供了方便的方法；
>     
>     
> *   出于同样的原因，使库更具可读性；减少外部代码对库内部工作的依赖，因为大多数代码都使用外观，从而在开发系统时提供更大的灵活性；
>     
>     
> *   用一个设计良好的 API（根据任务需要）包装设计不佳的 API 集合。
>     
>     
> 
> 当包装器必须尊重特定接口并且必须支持多态行为时，使用适配器。另一方面，当人们想要一个更简单或更简单的界面来使用时，就会使用外观。

这意味着外观是具有行为的实际对象，而不是接口。接口的作用是指定实现必须支持哪些操作，而外观提供了使用代码体（例如整个库）的简单/方便的方法，例如提供常用的设置、默认值等.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:03:06.893

外观模式是一种**设计模式**。所有的设计模式都是抽象的。这里真正的问题是“什么是抽象？”。

抽象是当你隐藏一些细节时。例如，您可能有一个为每个域模型（例如用户、项目、操作等）提供服务的应用程序。您希望您的 API 的使用者不必知道这些细节（即担心获得正确的服务、如何一起使用它们等），所以您建立了一个“门面”，它只是一个服务所有其他服务所做的一切，但在一个界面中。这是一个抽象，因为 Facade 用户不知道幕后有 N 个服务，也不关心它们是如何使用的，因为他/她只是使用统一的实现。

您已经**使用**设计模式**抽象**出细节。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:05:29.613

外观模式不仅仅是对真实类的接口抽象。它可用于对应用程序的状态进行检查以确定 Facade 方法的行为，例如

Facade.GetUserDetails()

执行检查以查看是否存在数据库连接，如果没有，则缓存中的用户等。

此外，取决于门面的类型

IFACADE --> 网球：IFACADE --> 壁球：IFACADE

这是可以利用抽象和外观的力量的地方......**

# php - 2种语言在网站上使用php

> ID：10913775
> 
> 赞同：0
> 
> 时间：2012-06-06T11:58:23.997
> 
> 标签：php, cookies

请帮助组织双语网站。

所以首先有两个文件 eng.php，es.php，它们将存储在翻译站点中。

例子：

```
$lang['hi'] = 'Hi'; 
```

如何在网站上组织进一步的语言选择并在 cookie 中记录有关语言的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:06:08.497

你可以有两个这样的文件。

来源`en.php`：

```
$lang = array(
    'hi' => 'Hi'
); 
```

来源`es.php`：

```
$lang = array(
    'hi' => 'Hello'
); 
```

而对于主要内容文件，来源应该是这样的：

```
<?php
    session_start(); // Make sure you initialize cookies / session
    $allowedLangs = array('en', 'es'); // Array with allowed values
    if(isset($_SESSION['lang'])) { // If already user had stored language in session
        include $_SESSION['lang'] . ".php";
    } elseif(isset($_GET['lang']) && in_array($_GET['lang'], allowedLangs)) { // If user had requested like index.php?lang=en
        include $_GET['lang'] . ".php";
        $_SESSION['lang'] = $_GET['lang']; // Update the session with the language
    } else { // If user is visiting for the first time, then...
        include "en.php";
    }

    echo $lang['hi'];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:09:15.150

```
<?php
    if(!isset($_COOKIE['lang'])){
        ?>
        Choose Language...
        <a href="es.php">ES</a><a href="eng.php">ENG</a>
        <?php
    } else {
        if($_COOKIE['lang']=='es'){
            header("location:es.php");
        }
        elseif($_COOKIE['lang']=='eng'){
            header("location:eng.php");
        }
    }
?> 
```

es.php // 英文.php

```
<!--Your Content-->
<?php
    setcookie("lang","es/eng",time()+SECONDS_YOU_WANT)
?> 
```

# java - GAE 模块是否适用于 PlayFramework 2.0？

> ID：10913782
> 
> 赞同：3
> 
> 时间：2012-06-06T11:58:54.900
> 
> 标签：java, google-app-engine, playframework

我在文档中读到播放模块仅适用于 1.x 版本的播放框架。但是我发现有很多新版本的gae-module，他们支持2.0版本的play-framework吗？

另外，我在谷歌群组中发现了这一点，其中 Pascal（开发和维护 gae 模块）说他将很快为 play2.0 编写模块。但是线程是2011年12月的。它开始支持play2.0吗？

另外我想知道是否有人将 play2.0 应用程序部署到 google-appengine 以及如何，即使它是在没有 gae 模块的情况下直接使用 appengine-sdk 完成的）？

非常感谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:58:53.953

一旦 Google App Engine 实现了 Servlet 3.0（在这个[bug](http://code.google.com/p/googleappengine/issues/detail?id=3091)上进行了跟踪）和 Play 2.0 实现了 WAR 部署（在这个[bug](https://play.lighthouseapp.com/projects/82401/tickets/8-war-packaging)上进行了跟踪，那么在 Google App Engine 上部署 Play 2.0 应用程序在技术上应该是可行的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:13:04.567

不，gae 模块不适用于 Play 2.0。

正如您可以在[模块的网页上](http://www.playframework.org/modules/gae)阅读的那样：

> 此模块仅适用于 Play 1.x 系列。

另外，请看一下[这个问题](https://stackoverflow.com/questions/9378719/play-2-0-and-google-app-engine)和[这个线程](https://groups.google.com/group/play-framework/browse_thread/thread/32d59c69a04dd781?pli=1)。

所以，总而言之：Play 2.0 不能在 Google App Engine 上运行，也许永远也不会。但是您可以将 Play 1.x 与 gae 模块一起使用，它仍然可以用于新项目。

# cakephp - CakePHP - 自动登录用户

> ID：10913784
> 
> 赞同：1
> 
> 时间：2012-06-06T11:59:00.220
> 
> 标签：cakephp, authentication

如何在不知道密码的情况下自动登录用户？我可以从数据库中获取有关用户的任何信息（用户名、ID、电子邮件等），但密码将是数据库中的哈希版本，因此 Auth::login() 失败，因为密码不是明文版本.

有任何想法吗？这一定是以前做过的，但我找不到任何东西。

据我所知，Cake 1.3 过去只允许您提供一个用户 ID，它会登录他们，但 Cake 2.x 不再支持，那么这是如何完成的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:22:45.110

看看我的 Qlogins： http: [//www.dereuromark.de/2012/02/08/qlogin-quicklogins-fur-cakephp/](http://www.dereuromark.de/2012/02/08/qlogin-quicklogins-fur-cakephp/)

特别是 [https://github.com/dereuromark/tools/blob/2.0/Controller/QloginController.php#L57](https://github.com/dereuromark/tools/blob/2.0/Controller/QloginController.php#L57)

我根据提供的密钥来做。但是您可以很容易地看到如何通过仅知道 user_id 等来自动登录某人：

```
if ($this->Auth->login($user['User'])) {} 
```

诀窍是将用户数据传递给该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:01:18.900

请参阅[Auth::identify()](http://api20.cakephp.org/class/auth-component#method-AuthComponentidentify)：使用配置的身份验证适配器，并尝试通过 $request 中包含的凭据来识别用户。

如果它返回真正的重定向或做任何你喜欢的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:36:25.167

Cake 用来判断用户是否“登录”的所有方法都是检查会话。所以，只需填充会话。

```
$user = $this->User->read(null, 1);
$this->Session->write('Auth', $user);
debug($this->Auth->loggedIn()); 
```

这跳过了身份验证过程，甚至跳过了尝试识别它们。但现在他们在会话中，就应用程序而言，他们已登录。

# python - 如何允许用户选择文件？

> ID：10913786
> 
> 赞同：3
> 
> 时间：2012-06-06T11:59:13.713
> 
> 标签：python, r

现在，我的代码中有这一行来硬编码目录路径

```
dir_path = '/home/user/pywork' 
```

但我宁愿让用户自己使用类似于 R's 的构造来选择它`scan(choose.files())`。

我该怎么做？

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T13:05:42.293

我在快速谷歌 ( ) 后发现的一个选项`python open directory dialog box`是使用`TKinter`：

```
import Tkinter, tkFileDialog
root = Tkinter.Tk()
dirname = tkFileDialog.askdirectory(parent=root, initialdir="/",
                                    title='Please select a directory') 
```

我在[这里](http://www.daniweb.com/software-development/python/threads/210657/open-directory-dialog-box)找到了信息。

# wpf - 我应该学习WPF吗？投资时机好不好？

> ID：10913788
> 
> 赞同：4
> 
> 时间：2012-06-06T11:59:19.430
> 
> 标签：wpf

这是我在这里的第一个问题:)

我是 C# 开发人员，不是专家，但仍在学习和成长。我想学习 WPF，这样我就可以创建具有漂亮 UI 的应用程序。但是我担心，在我花时间学习它之后，它会过时，你知道 Windows 8 和 Metro 应用程序之类的东西，所以我的问题是：

在这个时候，学习 WPF 是否是一个很好的时间投资？还是我学习地铁会更好？

谢谢。

# android - android：覆盖来电屏幕

> ID：10913789
> 
> 赞同：2
> 
> 时间：2012-06-06T11:59:21.293
> 
> 标签：android, screen, overriding, phone-call

我想在来电屏幕上添加一些附加信息。为此，在我的应用程序中，我正在检查 PHONE_STATE 和 RINGING，我正在调用一个活动。在此活动中，我正在设置如下文本视图。

它按预期工作。文本被添加到来电屏幕 问题是：

如果我在我的应用程序中，即在我的应用程序的视图中，并且如果有来电，android 来电窗口就会出现并消失。我的应用程序窗口位于顶部，并且应该覆盖来电窗口的文本视图也可见。

请解释这种行为。我怎样才能解决这个问题？

```
super.onCreate(savedInstanceState);
Log.i(TAG,"oncreate");
getWindow().addFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);
this.requestWindowFeature(Window.FEATURE_NO_TITLE);
setContentView(R.layout.incomingcallscreen);
TextView name = (TextView)findViewById(R.id.textView1);
name.setText(getIntent().getExtras().getString("NAME"));
incomingCallActivityContext = this; 
```

布局是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="250dip"
        android:src="@drawable/icon"
        android:text="CALLER NAME"
        android:textSize="35sp"
        android:textColor="@color/WHITE"
        android:layout_gravity="center_horizontal"
        android:windowAnimationStyle="@android:style/Animation.Translucent"
        android:windowBackground="@android:color/transparent"
        android:windowIsTranslucent="true" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T04:04:41.243

放入`android:launchMode="singleInstance"`您的清单活动。
解释（小）
“singleTask”和“singleInstance”模式也仅在一个方面彼此不同：“singleTask”活动允许其他活动成为其任务的一部分。它始终位于其任务的根部，但其他活动（必须是“标准”和“singleTop”活动）可以启动到该任务中。**另一方面，“singleInstance”活动不允许其他活动成为其任务的一部分。这是任务中的唯一活动。**如果它启动另一个活动，则该活动被分配给不同的任务——就好像 FLAG_ACTIVITY_NEW_TASK 在意图中一样。

[完整的解释可以在这里找到](http://developer.android.com/guide/topics/manifest/activity-element.html)

# licensing - 想要 GPL 一个在 LGPL 下有部分的项目

> ID：10913798
> 
> 赞同：0
> 
> 时间：2012-06-06T12:00:05.763
> 
> 标签：licensing, gpl, lgpl

我现在有一个闭源应用程序零售，我想作为开源发布。

我希望每个人都可以免费使用该应用程序，但不会将其纳入任何其他人的商业活动中，因此我选择了 GPL 作为许可证，以便每个人都可以从任何参与其中的社区工作中受益。

目前，该应用程序正在使用 LGPL 下的许多部分。这是否会阻止我使用 GPL，因为任何链接的组件都应该是 GPL 对吗？好像我一把它放在软件上就违反了 GPL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:07:24.520

> 目前，该应用程序正在使用 LGPL 下的许多部分。这是否会阻止我使用 GPL，因为任何链接的组件都应该是 GPL 对吗？

LGPL 的每个版本都允许您在 GPL 的相应版本（或任何更高版本）下重新许可代码。如果您可以在这种情况下将 LGPL 代码切换为使用 GPL，则可以进行这种组合。

有关多个版本和升级路径的矩阵，请参见此处：http: [//gplv3.fsf.org/dd3-faq](http://gplv3.fsf.org/dd3-faq)

# javascript - 使用 Jquery fadeOut() 如何隐藏这个消息框

> ID：10913801
> 
> 赞同：0
> 
> 时间：2012-06-06T12:00:17.510
> 
> 标签：javascript, jquery

当我单击关闭按钮时，我正在尝试关闭（*淡出）消息框。*但在这里它不起作用。帮我解决这个问题。

在它自动关闭之前。如果我单击关闭按钮，消息框应该隐藏。但在这里它不起作用

这是我的[Jsfiddle](http://jsfiddle.net/sureshpattu/rxR5E/6/)

这是我的脚本；

```
$('.msg_close_icon_div').click(function(){
    $('.error_msgbox').fadeOut('slow');    
});

$('.error_msgbox').hide().fadeIn('slow').delay(4500).fadeOut('slow'); 
```

如果用户没有单击关闭按钮（*它在右上角*），那么我想在 3 秒后自动关闭消息框。​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:06:28.110

您还没有在小提琴中选择 jQuery 插件 onload

检查工作小提琴 - [http://jsfiddle.net/rxR5E/3/](http://jsfiddle.net/rxR5E/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:20:01.440

您无法手动隐藏 div，因为您使用延迟（）阻止了队列。delay() 函数的缺陷在于它不能被取消，这在[jQuery 手册](http://api.jquery.com/delay/)中实际上是有提到的。

删除 delay() 和 click() 函数将按预期工作。如果您仍然需要计时事件，我建议使用不同的方法，可能是普通的 setTimeout() 或使用 jQuery (http://api.jquery.com/queue/) 中可用的更合适的 queue() 函数。

您还应该修改当前代码，因为它会产生[FOUC](http://en.wikipedia.org/wiki/Flash_of_unstyled_content)！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:21:27.223

setTimeout() 将有助于解决这个问题：

这是脚本：

```
$('.msg_close_icon_div').click(function(){
    $('.error_msgbox').fadeOut('slow');    
}); 

setTimeout(function(){ jQuery(".error_msgbox").hide(); }, 7000); 
```

示例在这里**[DEMO](http://jsfiddle.net/sureshpattu/rxR5E/8/)**

**[更多 setTimeout() 示例](http://www.jquery4u.com/jquery-functions/settimeout-example/#.T89YJ7Bo3Zc)**

# smarty - 如何同时使用 Handlebars.js 和 Smarty？

> ID：10913803
> 
> 赞同：4
> 
> 时间：2012-06-06T12:00:20.810
> 
> 标签：smarty, handlebars.js

我将 Smarty 用于服务器端模板，我想将 Handlebars.js 用于客户端模板，但 Smarty 会出错，因为 Handlebars 使用与 Smarty 相同的花括号。我可以在 Smarty 的文字标签中编写 Handlebars 模板，但这次我不能在 Handlebars 模板中使用 Smarty。

例如：我为 cleanurl 编写了一个 smarty 块函数。我不想为javascript编写一个cleanurl函数。所以我想同时使用Smarty和Handlebars.js。

```
<div class="model-item" id="model-{{id}}">
    <a href="{$mainurl}{cu}?com=model&act=view&id={{id}}{/cu}"> {{name}} </a>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T19:14:02.927

您还可以使用文字标签...比转义每个花括号要好得多。

```
{literal}
<script id="entry-template" type="text/x-handlebars-template">
  {{any_var}}
</script>
{/literal} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:35:08.047

[http://www.smarty.net/docs/en/language.escaping.tpl](http://www.smarty.net/docs/en/language.escaping.tpl)

文档的这一部分讨论转义。我认为“{ldelim}，{rdelim}”可能是您正在寻找的......尽管它使代码的可读性降低了......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-11T03:33:03.927

我知道这是一个老问题，但现在这是一个受支持的 smarty 功能。（我在寻找同样的问题时偶然发现了你的问题，所以我想回答它，以防其他人有同样的问题）

如果你添加这个：

`$smarty->setLiterals(array('{{{','}}}','{{','}}'));`

Smarty 现在将忽略胡须和车把的所有双重和三重分隔线。注意：在启用之前，必须检查他们现有的 smarty 模板是否有任何合法的 smarty 使用 {{ 或 {{{ 并在设置后重新编写他们的代码，这些现在是文字，它们将不再用作 smarty 语句。

[https://github.com/smarty-php/smarty/issues/508#issuecomment-437640751](https://github.com/smarty-php/smarty/issues/508#issuecomment-437640751)

这是版本 3.1.32

# image - 在 matlab 中逐个像素检查图像的特定 rgb 值

> ID：10913809
> 
> 赞同：2
> 
> 时间：2012-06-06T12:00:44.087
> 
> 标签：image, matlab, matrix, pixel

我想从 MATLAB 中的文件夹中读取 RGB 图像（.jpg），扫描图像的每个像素并检查它是否具有特定颜色（例如，如果它是 Violet: `R 128,G 0, B 255`）并计算有多少像素具有这种特定颜色。

你有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:26:59.173

假设图像被加载到名为的变量中`A`：

```
 pixelMask =  A(:,:,1) == 128 & A(:,:,2) == 0 & A(:,:,3) == 255;
 count = nnz(pixelMask); 
```

另一种方法是使用`bxsfun`和单例扩展：

```
 pixel = cat(3,128,0,255);
 S = all(bsxfun(@eq, A, pixel), 3);
 count = nnz(S); 
```

# json - 通过 REST API 在 JIRA 中上传文件

> ID：10913817
> 
> 赞同：0
> 
> 时间：2012-06-06T12:01:21.717
> 
> 标签：json, rest, attachment, jira

我们都非常清楚 JIRA REST API 的请求和响应格式是 JSON 格式的。我使用 url 类型成功检索了上传文件的附件详细信息`http://example.com:8080/jira/rest/api/2/attachment`。

我现在需要使用相同的 REST API 将文件上传到 JIRA。我拥有一个 java 客户端，它声明的 tat 我需要使用`MultiPartEntity`. 我不知道如何提交`X-Atlassian-Token: nocheck`带有 JSON 请求的标头。搜索文档我只得到了基于 curl 的请求示例。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-14T15:43:54.883

我已经这样做了，它的工作原理：

```
public static void main( String[] args ) throws Exception {
    File f = new File(args[ 0 ]);
    String fileName = f.getName();
    String url = "https://[JIRA-SERVER]/rest/api/2/issue/[JIRA-KEY]/attachments";

    CloseableHttpClient httpClient = HttpClients.createDefault();
    HttpPost post = new HttpPost( url );
    post.setHeader( "Authorization", basicAuthHeader( "username", "password" ) );
    post.setHeader( "X-Atlassian-Token", "nocheck" );
    HttpEntity reqEntity = MultipartEntityBuilder.create()
            .setMode( HttpMultipartMode.BROWSER_COMPATIBLE )
            .addBinaryBody( "file",
                new FileInputStream( f ),
                ContentType.APPLICATION_OCTET_STREAM,
                f.getName() )
            .build();
    post.setEntity( reqEntity );
    post.setHeader( reqEntity.getContentType() );
    CloseableHttpResponse response = httpClient.execute( post );
}

public static String basicAuthHeader( String user, String pass ) {
    if ( user == null || pass == null ) return null;
    try {
        byte[] bytes = ( user + ":" + pass ).getBytes( "UTF-8" );
        String base64 = DatatypeConverter.printBase64Binary( bytes );
        return "Basic " + base64;
    }
    catch ( IOException ioe ) {
        throw new RuntimeException( "Stop the world, Java broken: " + ioe, ioe );
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-30T13:25:02.417

这就是我做依赖okhttp和okio的方式

```
private static void upload(File file) throws Exception{
    final String address = "https://domain/rest/api/2/issue/issueId/attachments";
    final OkHttpClient okHttpClient = new OkHttpClient();
    final RequestBody formBody = new MultipartBody.Builder()
            .setType(MultipartBody.FORM)
            .addFormDataPart("file", file.getName(),
                    RequestBody.create(MediaType.parse("text/plain"), file))
            .build();
    final Request request = new Request.Builder().url(address).post(formBody)
            .addHeader("X-Atlassian-Token", "no-check")
            .addHeader("Authorization", "Basic api_token_from_your_account")
            .build();
    final Response response = okHttpClient.newCall(request).execute();
    System.out.println(response.code() + " => " + response.body().string());
} 
```

# asp.net-mvc - MVC3 中的新 T4 控制器模板

> ID：10913824
> 
> 赞同：5
> 
> 时间：2012-06-06T12:01:53.290
> 
> 标签：asp.net-mvc, asp.net-mvc-3, controller, t4, code-templates

如您所知，要在 MVC 中创建新的 t4 模板，需要将`CodeTemplates`文件夹添加到项目中。有两个主要子文件夹 1- `AddController`, 2-`AddView`我总是使用`AddView`文件夹添加新模板来生成自定义视图，知道我需要新模板来生成控制器，但是当我将新`tt`文件添加到`AddController`文件夹时，模板中没有任何新选项新控制器，总是有 3 个选项：

![在此处输入图像描述](../Images/f0fb70e176c454c972e27d4002888629.png)

那么如何向“添加控制器”窗口添加新选项以使用我的自定义控制器模板？或者如果我尝试错误的方式，您对使用模板生成控制器有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T12:48:35.597

看来您只能使用[MvcScaffolding](http://mvcscaffolding.codeplex.com/) nuget 包来扩展“添加控制器”对话框：

从[asp.net 页面](http://www.asp.net/mvc/mvc3#BM_MvcScaffolding)：

> ASP.NET MVC 3 工具更新包括对该脚手架系统的强大 Visual Studio 支持，例如：
> 
> *   添加控制器对话框现在支持创建、读取、更新和删除控制器操作和相应视图的全自动脚手架。默认情况下，这使用 EF Code First 构建数据访问代码。
> *   **添加控制器对话框通过 NuGet 包（例如 MvcScaffolding）支持可扩展的脚手架。这允许将自定义脚手架插入到对话框中，这将允许您为其他数据访问技术创建脚手架，例如 NHibernate，如果您愿意的话，甚至可以使用 ODBCDirect 为 JET 创建脚手架！**

[您可以从本文](http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/)开始了解 MvcScaffolding 。

# ajax - componentone c1calendar 显示弹出日历并在文本框中设置所选日期 javascript 错误

> ID：10913826
> 
> 赞同：0
> 
> 时间：2012-06-06T12:01:57.620
> 
> 标签：ajax, c#-4.0, asp.net-4.0, componentone

我正在使用此代码来显示 javascript 错误。

```
function SelectDate()
{
    var calendar = Sys.Application.findComponent("C1Calendar1.ClientID");
    var input = document.getElementById("TextBoxDate");
    calendar.popupBeside(input, C1.Web.Wijmo.PositioningMode.bottomLeft);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:29:36.057

我对 c# 了解不多，但我认为可能有几种可能的原因它不起作用。只要用你的调试器或类似的东西试试它是否是其中之一......

*   `calendar`可能是未定义的，因为它可能没有找到。
*   `calendar`可能是错误的类型，可能是原始类型。
*   `calendar`可能没有 popupBeside 方法。

如果不是其中之一，我也不知道问题出在哪里。如前所述，我真的没有使用 C# 的经验，所以这只是一些可能出错的想法。

# jquery - 使用 jQuery 替换字符串

> ID：10913829
> 
> 赞同：-3
> 
> 时间：2012-06-06T12:02:06.053
> 
> 标签：jquery, regex

我遇到了一种情况：

仅当不在字母表之前或不成功时，`MA`才用空白替换字符串中的特定序列，例如。`MA`

例如：

输入字符串：

```
string abc= "This is a MAin method with MA .Use your MA and MAt it " 
```

输出字符串：

```
string result = "This is a MAin method with .Use your and MAt it " 
```

注：为了澄清，我`MA`用大写字母写了。我们必须使用 jQuery 来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:06:45.923

你不需要 jQuery，只需要一个简单的 Javascript RegExp：

```
var input = "This is a MAin method with MA .Use your MA and MAt it ",    
    output = input.replace(/([^A-Za-z])(MA)([^A-Za-z])/g, '$1$3'); 
```

RegExp 中的`[^A-Za-z]`表示“不是字母字符”，就像您在问题中所说的那样。如果您还想包含数字，您可以添加`0-9`. 如果您不在乎`MA`是大写还是小写，则改为使用 RegExp 结尾`/ig`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:11:49.363

您应该能够使用正则表达式，例如`MA\s([^a-zA-Z]+)`

然后在javascript（不需要jquery）中做这样的事情：

```
var abc = 'This is a MAin method with MA .Use your MA and MAt it ';
var result = abc.replace(/MA\s*([^a-zA-Z]+)/g, '$1')
console.log('We want: This is a MAin method with .Use your and MAt it');
console.log('We got:  ' + result); 
```

[​http://jsfiddle.net/gjFCa/](http://jsfiddle.net/gjFCa/)

您将获得以下输出：

```
We want: This is a MAin method with .Use your and MAt it
We got:  This is a MAin method with .Use your  and MAt it 
```

所以空间太大了，但你应该能够用一个简单的替换它`result = result.replace(' ', ' ');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:10:23.783

```
var input = "This is a MAin method with MA .Use your MA and MAt it ";

output = input.replace('MA ', ''); 
```

# haskell - 在 Haskell 中组合 monad

> ID：10913835
> 
> 赞同：11
> 
> 时间：2012-06-06T12:02:30.203
> 
> 标签：haskell, io, state-monad

我正在尝试编写一个蜘蛛纸牌播放器作为 Haskell 学习练习。

我的函数将为每个游戏`main`调用一次函数（使用），传入游戏编号和随机生成器（）。该函数应该返回一个monad 和一个 IO monad，其中包含一个显示游戏画面和一个指示游戏是赢还是输的信息。`playGame``mapM``StdGen``playGame``Control.Monad.State``String``Bool`

如何将`State`monad 与`IO`monad 结合起来作为返回值？`playGame 的类型声明应该是什么？

```
playGame :: Int -> StdGen a -> State IO (String, Bool) 
```

是`State IO (String, Bool)`正确的吗？如果不是，应该是什么？

在`main`，我打算使用

```
do
  -- get the number of games from the command line (already written)
  results <- mapM (\game -> playGame game getStdGen) [1..numberOfGames] 
```

这是正确的调用方式`playGame`吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-06T16:56:16.727

你想要的是`StateT s IO (String, Bool)`，哪里`StateT`由`Control.Monad.State`（来自`mtl`包）和`Control.Monad.Trans.State`（来自`transformers`包）提供。

这种普遍现象称为 monad 转换器，您可以在[Monad Transformers, Step by Step](https://web.archive.org/web/20201101000000*/https://page.mi.fu-berlin.de/scravy/realworldhaskell/materialien/monad-transformers-step-by-step.pdf)中阅读对它们的精彩介绍。

有两种定义它们的方法。其中之一位于`transformers`使用`MonadTrans`类来实现它们的包中。第二种方法可以在`mtl`类中找到，并为每个 monad 使用单独的类型类。

该`transformers`方法的优点是使用单个类型类来实现所有内容（在[此处](http://hackage.haskell.org/packages/archive/transformers/0.2.2.0/doc/html/Control-Monad-Trans-Class.html#t:MonadTrans)找到）：

```
class MonadTrans t where
    lift :: Monad m => m a -> t m a 
```

`lift`有两个很好的属性，任何实例都`MonadTrans`必须满足：

```
(lift .) return = return
(lift .) f >=> (lift .) g = (lift .) (f >=> g) 
```

这些是变相的函子定律，`(lift .) = fmap`where`return = id`和`(>=>) = (.)`。

类型类方法也有它的`mtl`好处，有些事情只能使用`mtl`类型类来彻底解决，但缺点是每个`mtl`类型类都有自己的一套法则，在为它实现实例时你必须记住. 例如，`MonadError`类型类（在[此处](http://hackage.haskell.org/packages/archive/mtl/1.1.0.2/doc/html/Control-Monad-Error-Class.html#t:MonadError)找到）定义为：

```
class Monad m => MonadError e m | m -> e where
    throwError :: e -> m a
    catchError :: m a -> (e -> m a) -> m a 
```

这个类也有法律：

```
m `catchError` throwError = m
(throwError e) `catchError` f = f e
(m `catchError` f) `catchError` g = m `catchError` (\e -> f e `catchError` g) 
```

这些只是伪装的 monad 法则，where`throwError = return`和`catchError = (>>=)`（而 monad 法则是伪装的范畴法则，where`return = id`和`(>=>) = (.)`）。

对于您的具体问题，您编写程序的方式将是相同的：

```
do
  -- get the number of games from the command line (already written)
  results <- mapM (\game -> playGame game getStdGen) [1..numberOfGames] 
```

...但是当您编写`playGame`函数时，它看起来像：

```
-- transformers approach :: (Num s) => StateT s IO ()
do x <- get
   y <- lift $ someIOAction
   put $ x + y

-- mtl approach :: (Num s, MonadState s m, MonadIO m) => m ()
do x <- get
   y <- liftIO $ someIOAction
   put $ x + y 
```

当您开始堆叠多个单子变压器时，这些方法之间的差异会变得更加明显，但我认为现在这是一个好的开始。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-06T12:13:02.403

`State`是一个单子，并且`IO`是一个单子。您尝试从头开始编写的内容称为“monad 转换器”，Haskell 标准库已经定义了您需要的内容。

看看 state monad 转换`StateT`器：它有一个参数，它是你想要包装到`State`.

每个 monad 转换器实现了一堆类型类，这样对于每个实例，转换器每次都可以处理它（例如状态转换器只能直接处理与状态相关的函数），或者它将调用传播到内部 monad以这样一种方式，当您可以堆叠所有您想要的转换器时，并有一个统一的界面来访问所有转换器的功能。这是一种[责任链](http://www.dofactory.com/Patterns/PatternChain.aspx)，如果你想这样看的话。

如果您查看[hackage](http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/Control-Monad-Trans-State-Lazy.html#g:2)，或者快速搜索堆栈溢出或 google，您会发现很多`StateT`.

**编辑**：另一个有趣的读物是[Monad Transformers Explained](http://www.haskell.org/haskellwiki/Monad_Transformers_Explained)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T21:01:14.510

好的，这里需要澄清一些事情：

*   你不能“返回一个单子”。monad 是一种*类型*，而不是一种值（准确地说，monad 是具有类实例的*类型构造函数*`Monad`）。我知道这听起来很迂腐，但它可能会帮助你在头脑中理清事物和事物类型之间的区别，这很重要。
*   请注意，如果没有它，您将无法做任何事情`State`，所以如果您对如何使用它感到困惑，那就不要觉得您需要！通常，我只写我想要的普通函数类型，然后如果我注意到我有很多形状像`Thing -> (Thing, a)`我的函数，我会说“啊哈，这看起来有点像`State`，也许这可以简化为`State Thing a`”。`State`理解和使用普通函数是使用或使用它的朋友的重要的第一步。
*   `IO`另一方面，它是唯一可以完成其工作的东西。但是这个名字`playGame`并没有立即出现在我身上，因为它是需要做 I/O 的东西的名字。特别是，如果您*只*需要（伪）随机数，则无需`IO`. 正如评论者所指出的，[MonadRandom](http://hackage.haskell.org/package/MonadRandom)非常适合简化此操作，但您也可以再次使用纯函数来获取并返回`StdGen`from `System.Random`。你只需要确保你`StdGen`正确地穿线你的种子（the ）（自动这样做基本上`State`是发明的原因；你可能会发现在没有它的情况下尝试编程后你会更好地理解它！）
*   Finally, you're not quite using `getStdGen` correctly. It's an `IO` action, so you need to bind its result with `<-` in a `do`-block before using it (technically, you don't *need* to, you have lots of options, but that's almost certainly what you want to do). Something like this:

    ```
    do
      seed <- getStdGen
      results <- mapM (\game -> playGame game seed) [1..numberOfGames] 
    ```

    Here `playGame :: Integer -> StdGen -> IO (String, Bool)`. Notice, however, that you're passing the *same* random seed to each `playGame`, which may or may not be what you want. If it isn't, well, you could return the seed from each `playGame` when you were done with it, to pass to the next one, or repeatedly get new seeds with `newStdGen` (which you could do from inside `playGame`, if you decide to keep it in `IO`).

Anyway, this hasn't been a very structured answer, for which I apologise, but I hope it gives you something to think about.

# r - 当 X 值相同时，在构面网格中的两个图形上强制 X 轴

> ID：10913840
> 
> 赞同：11
> 
> 时间：2012-06-06T12:02:43.073
> 
> 标签：r, ggplot2, bar-chart, facet

我有两组关于 X 轴的大约 30 个类别的数据，用于分面。我将用一些随机数据展示这一点：

```
dataf <- data.frame(x=c(1:30), A=rnorm(30,20,5), B=rnorm(30,15,0.5))
datam <- melt(dataf, id="x")
ggplot(datam, aes(factor(x), value)) + 
  geom_bar(stat="identity") + 
  facet_grid(variable ~ .) 
```

![在此处输入图像描述](../Images/9e18cfe7f62b95a31ea8071754dfd8e4.png)

这很可爱，只是如果 x 轴也在该图上复制，则更容易快速读取顶部分组中的类别。然而

```
ggplot(datam, aes(factor(x), value)) + 
  geom_bar(stat="identity") + 
  facet_grid(variable ~ ., scales="free") 
```

对 x 轴没有影响，因为我猜这两个分组的值是相同的。

如何强制为顶部组以及条形图复制 X 轴？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-06T12:05:00.483

尝试`facet_wrap`改用：

```
ggplot(datam, aes(factor(x), value)) + 
    geom_bar(stat="identity") + 
    facet_wrap(~variable,nrow = 2,scales = "free") 
```

![在此处输入图像描述](../Images/27fb673e86b3e1823bf832945e961b7f.png)

# biztalk - BizTalk 中的线程不足

> ID：10913842
> 
> 赞同：2
> 
> 时间：2012-06-06T12:02:53.760
> 
> 标签：biztalk

我在我们的 BTS 生产环境中遇到了无法在其他环境中重现的问题。在这里忍受我。

作为我们解决方案的一部分，编排 (orch1) 将直接绑定的消息发送到消息框，然后进入侦听形状，其中一个分支上的相关接收形状和另一个分支上的延迟（实现接收超时）。延迟设置为 10 分钟。

直接绑定请求由不同的编排（orch2）处理，然后将响应（再次通过直接绑定）返回到消息框，以便 orch1 可以接收它。

发生的情况是，大约每 50 次这种类型的操作中，orch1 中的超时被击中，当来自 orch2 的响应返回时，我们会遇到路由失败（这是您所期望的 orch1 上的实例订阅消息已被删除）。

奇怪的是，orch2 甚至在 orch1 中超时后才初始化（请参见以下屏幕截图）

![Orch1 计时](../Images/0f6e041adc83fa9962d068f5867f416e.png)

在这里您可以看到 orch1 将直接绑定请求发送到消息框，10 分钟后超时被击中。请求在 11:26:31 发送，超时时间在 11:36:32。

![Orch2 计时](../Images/187c8ee2e4e5b29d820b99bb3fbfb559.png)

这显示了 orch2 的时序。如您所见，接收形状仅在 orch1 中触发超时后才被击中（在 11:36:45）

奇怪的是 orch1 和 orch2 都托管在同一个主机上。此外，我们有一个负载平衡的集群，并且我们有 2 个该主机的实例可用于工作。所以我希望 orch2 上应该总是有可用性来处理传入的工作。然而，情况似乎并非如此。

我目前的怀疑是两个主机实例的线程饥饿。但是我的问题是

1.  这是一个明智的怀疑吗？
2.  我在做一些根本错误的事情吗？
3.  有什么关于使用影响线程的听形状吗？

请注意，我们已经将主机线程设置配置为推荐级​​别（MaxIOThreads = 100，MaxWorkerThreads = 100，MinIOThreads = 25，MinWorkerThreads = 25）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:05:26.030

听起来像是比赛条件，但我不知道在哪里。

您是否考虑过分离任务？

1.  orch1 的第一部分发送请求。
2.  Orch2 处理任务 1 的输出。
3.  orch1 的第二部分处理来自 orch2/Task 2 的响应。

缺点是它无法响应超时。我不知道这对你的问题是否重要。

# c++ - 检查 COM 指针是否存在

> ID：10913846
> 
> 赞同：2
> 
> 时间：2012-06-06T12:03:02.227
> 
> 标签：c++, com, atl, dcom

在 C++ 中，MFC：

我有一个 CComPointer：

```
CComPointer<IMyTask> m_pTask; 
```

我的代码中有很多地方，我调用这个 ComPointer 来运行任务的方法。例如：

```
void method1()
 {
    if (FAILED(hRet = m_pTask->MyFunc1()))
                  .....
 }

void method2()
{
    if (FAILED(hRet = m_pTask->MyFunc2()))
                  .....
} 
```

当 MyTask 关闭时，我尝试解决问题以恢复。我写了一个方法，recover()，将 CoCreate 重新运行到 MyTask，它实际上解决了这个问题。

我可以看到，如果 MyTask 死了，我会得到一个 HR 失败代码 -2147023174，RPC 服务器不可用。但是，com 指针 m_pTask 具有完整的数据（它不知道任务已死）。

我可以做这样的事情：

```
void method1()
 {
    if (FAILED(hRet = m_pTask->MyFunc1()))
        if (hRet == -2147023174)
           recover();
                  .....
 }

void method2()
{
    if (FAILED(hRet = m_pTask->MyFunc2()))
        if (hRet == -2147023174)
           recover();
                  .....
} 
```

但是，因为我有很多通过编译器调用方法，所以我想做一些更通用的东西。我希望每次尝试通过 ComPointer 运行方法时，在运行该方法之前，检查该任务是否已经存在，如果不存在 - 运行恢复方法。因为即使任务结束了，ComPointer 仍然拥有 CoCreate 时间的所有数据，我不知道我该怎么做。

我该怎么做？

任务因为系统中的某些时候发生错误而死掉了，目前我的解决方案不需要找到任务失败的原因，只需将其恢复即可。我正在寻找一个通用的解决方案——比如 ComPointer 的包装器，但我希望包装器类只检查 MyTask 是否仍然存在，如果它存在，它将返回 ComPointer，如果不存在，它将运行恢复.

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:21:09.597

听起来您想要一个自定义 DCOM 代理，而不是 midl 和 Windows 提供的默认逻辑。这是可能的，但也需要大量的工作。如果您需要为使用 COM 创建对象的第三方代码提供自定义行为，这是最佳选择。

当您控制客户端代码时，编写一个实现相同 COM 接口的包装类可能会更简单，并通过将每个调用转发到远程服务器来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:13:06.443

CComPointer 的实现相当简单。您可以轻松地剪切和粘贴它以形成您自己的智能指针类的基础。

CComPointer 实现依赖于覆盖“->”运算符。这样就无需了解接口提供的方法。每个呼叫都被有效地拦截然后转发。

在您的新智能指针类中，您可以在“->”运算符覆盖的实现中构建您需要的额外功能。

为验证呼叫而进行的检查更难。

我认为 QueryInterface 是一个有效的调用，您可以使用它来检查连接是否处于活动状态 - QueryInterface 保证存在并且需要调用真正的实现。

然而，总会有一个竞争条件——在你的检查电话和你的真实电话之间的连接可能会失败。

因此，您最好只进行真正的通话，如果失败，请尝试恢复并再次通话 - 这很难以一种好的模式进行 - 可能最容易通过宏来实现，请参阅 Forgottn 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:52:56.660

MFC 类向导允许您围绕 com 组件生成包装类。[这个页面描述了如何。](http://www.murrayc.com/learning/windows/usecomfromMFC.shtml)

生成包装类后 - 您可以编辑任何方法以在其中实现重试逻辑。[您可以对#import 指令](http://msdn.microsoft.com/en-us/library/8etzzkb6%28v=vs.80%29.aspx)生成的包装类使用相同的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T12:15:27.663

好的，这是对一般问题的一般回答。我不想知道，为什么任务实际上已经死了，而指针却没有。为任务指针编写一个包装器并改用它。它看起来像这样：

```
class CMyTaskWrapper
{
     CComPtr<IMyTask> m_ptr;
     ...
     HRESULT myFunc1()
     {
         HRESULT hRes = m_ptr->myFunc1();
         if(hRes == 0x800706BA)
         {
             recover();
         }
         return hRes;
     }
     ... //here you should list all members of IMyTask
 }; 
```

**Edit1：**添加了一个宏示例（见评论 #2）

```
MYMACRO_0(HRESULT_GETTER, POINTER, FUNCTION) \
HRESULT_GETTER = POINTER->FUNCTION(); \
if(HRESULT_GETTER == 0x800706BA) recover(); \
HRESULT_GETTER = POINTER->FUNCTION() 

MYMACRO_1(HRESULT_GETTER, POINTER, FUNCTION, PARAM1) \
HRESULT_GETTER = POINTER->FUNCTION(PARAM1); \
if(HRESULT_GETTER == 0x800706BA) recover(); \
HRESULT_GETTER = POINTER->FUNCTION(PARAM1)

//here you should add MYMACRO_2 ... MYMACRO_N 
```

您可以通过以下方式使用它：

```
MYMACRO_0(hRes, m_pTask, MyFunc1);
MYMACRO_1(hRes, m_pTask, MyFunc2, parameter_to_pass); 
```

这可能会有所帮助，这将隐藏函数列表，但是使用这样的代码并不是一个好主意。

# javascript - 过渡开始得太早，而 css 样式尚未完全应用

> ID：10913848
> 
> 赞同：2
> 
> 时间：2012-06-06T12:03:05.753
> 
> 标签：javascript, css, google-chrome, webkit-transition

我的代码在[这里](http://jsfiddle.net/VeJxD/)。共有三个位置：`zero(0,0)`, `end(200,200)`, `random(0,200)`。

一个 div 位于`random(0,200)`开头的位置。

我想要 ：

步骤 1) 将 div 设置在 position 中`zero(0,0)`。这一步没有动画

步骤2）通过过渡将其从一个位置移动`zero`到另一个位置。`end`这一步有动画

像这样的代码不能很好地工作：

```
document.getElementById('x').className = 'pos_zero';    // set the div to the position zero(0,0)
move(); 
// in function move: 
// document.getElementById('x').className = ' trans'; 
// document.getElementById('x').className += ' pos_end' ; 
```

似乎过渡开始得太早了，而 css style( `className = 'pos_zero'`) 还没有完全应用。它只是直接从一个位置移动到另一个`random`位置`end`。而我真正想要的是`end`从 position 定位的动画`zero`，而不是 from `random`。

像这样的代码有效：

```
document.getElementById('x').className = 'pos_zero';    // set the div to the position zero(0,0)    
setTimeout('move()',1); 
```

此代码通过使用`timeout`函数成功完成。此代码首先将 div 设置在位置`pos_zero`，然后通过`timeout`函数进行异步转换。而且`timeout`功能似乎不是很专业。

所以，我正在寻找更专业的解决方案。

顺便一提。我想知道。是否有任何方法可以确保完全应用样式，例如“Style.flush()”之类的？

@Inerdial 它确实有效！非常感谢。**要强制更新（强制立即同步重排或重新布局），您的 javascript 应该读取受更改影响的属性，例如 someSpan 和 otherSpan 的位置。**` 新代码无需超时即可工作。

```
document.getElementById('x').className = 'pos_zero';
var tmp = document.getElementById('x').offsetTop; // read a property to force an update.
move(); 
```

谢谢大家。并对我造成的混乱感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T01:11:33.993

感谢@Inerdial。它确实有效！其实这个答案来自他的评论。

**要强制更新（强制立即同步重排或重新布局），您的 javascript 应该读取受更改影响的属性，例如 someSpan 和 otherSpan 的位置。**` [-stackoverflow.com/a/1397505/41655](https://stackoverflow.com/a/1397505/41655)

新代码无需超时（[jsfiddle.net/vd6V8](http://jsfiddle.net/vd6V8)）即可工作：

```
document.getElementById('x').className = 'pos_zero';
var tmp = document.getElementById('x').offsetTop; // read a property to force an update.
move(); 
```

谢谢大家。并对我造成的混乱感到抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:04:10.437

这实际上是唯一的方法，因为在 CSS 更改之间浏览器需要“脱离”当前运行的代码。

当您使用`setTimeout()`代码出口时，将应用 CSS，然后运行您的其他代码。这产生了预期的行为。

# ocr - 让 gocr 使用数据库

> ID：10913856
> 
> 赞同：2
> 
> 时间：2012-06-06T12:03:56.940
> 
> 标签：ocr

我正在尝试让 gocr 识别 png 中的文本。我使用以下命令运行 gocr：

```
gocr -p ../db/ -m 386 output-4.png 
```

-m 386 选项关闭识别引擎，并根据手册页扩展数据库（提示用户输入未识别的字符并用用户回答扩展数据库）。

gocr 提示我输入它无法识别的字符，然后我告诉它这些字符是什么 - 然后它会从 png 中生成一个完美（足够接近）的文档。

所以我重新运行 gocr 使用：

```
gocr -p ../db/ -m 258 output-4.png 
```

这里 -m 258 选项关闭字符识别算法并告诉 gocr 匹配数据库中的字符。但是现在它输出了很多无法识别的字符。它不应该产生与我在训练数据库后获得的相同输出吗？

我可以使用算法打开匹配（然后在找不到匹配项时让 gocr 匹配数据库中的字符）但是它会引入很多错误，例如将“9”识别为“g”或“0”如“o”等。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:52:42.713

您可以使用 -a 100 标志来训练 gocr，这应该会询问您更多字符。这对我有用。所以：

```
gocr -p ../db/ -m 386 -a 100 output-4.png 
```

# android - 登录网站

> ID：10913862
> 
> 赞同：4
> 
> 时间：2012-06-06T12:04:12.417
> 
> 标签：android, http, http-post, http-get

我正在制作一个需要登录网站的应用程序。为此，我创建了一个 HttpClient 并对 url 执行 HttpPost。据我所知，这是有效的。StatusCodes 返回 200。在此之后，我对受限 url 执行 HttpGet（使用相同的客户端）。但是，我总是在我的 LogCat 中返回 Forbidden Exception 或登录屏幕。从网上搜索我发现有时需要在 HttpPost 之前先对站点执行 HttpGet，并且还要附加一个 CookieStore。两者都完成了，但仍然没有成功..这里有人可以帮助我吗？

```
 HttpClient client = new DefaultHttpClient();

        HttpGet initiate = new HttpGet(url);            
        HttpPost post = new HttpPost(url);
        HttpGet page = new HttpGet(restrictedurl);
        HttpContext localContext = new BasicHttpContext();

        CookieStore cookieStore = new BasicCookieStore();
        localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);

            try {
                List<NameValuePair> params = new ArrayList<NameValuePair>();
                params.add(new BasicNameValuePair("username", username));
                params.add(new BasicNameValuePair("password", password));

                post.setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));

                HttpResponse response = client.execute(initiate, localContext);
                Log.i(Tag, " " + response.getStatusLine().getStatusCode());
                response.getEntity().consumeContent();

                response = client.execute(post, localContext);
                Log.i(Tag, " " + response.getStatusLine().getStatusCode());             
                response.getEntity().consumeContent();                                      

                ResponseHandler<String> handler = new BasicResponseHandler();
                String htmlpage = client.execute(page, handler, localContext);
                Log.i(Tag, " " + response.getStatusLine().getStatusCode());
                Log.i(Tag, htmlpage);
                response.getEntity().consumeContent();  

            } catch (UnsupportedEncodingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace(); 
```

这是我的 LogCat：

```
 06-06 13:38:47.033: I/LogTag    (27839):  StatusCode HttpGet: 200
    06-06 13:38:47.197: I/LogTag    (27839):  StatusCode HttpPost: 200
    06-06 13:38:47.361: W/System.err(27839): org.apache.http.client.HttpResponseException: Forbidden
    06-06 13:38:47.377: W/System.err(27839):    at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:71)
    06-06 13:38:47.384: W/System.err(27839):    at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:59)
    06-06 13:38:47.384: W/System.err(27839):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:657)
    06-06 13:38:47.384: W/System.err(27839):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:627)
    06-06 13:38:47.384: W/System.err(27839):    at com.dakro.wiebetaaltwat.MainActivity$AsyncPost.doInBackground(MainActivity.java:136)
    06-06 13:38:47.384: W/System.err(27839):    at com.dakro.wiebetaaltwat.MainActivity$AsyncPost.doInBackground(MainActivity.java:1)
    06-06 13:38:47.392: W/System.err(27839):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
    06-06 13:38:47.392: W/System.err(27839):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
    06-06 13:38:47.392: W/System.err(27839):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
    06-06 13:38:47.392: W/System.err(27839):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
    06-06 13:38:47.392: W/System.err(27839):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
    06-06 13:38:47.400: W/System.err(27839):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
    06-06 13:38:47.400: W/System.err(27839):    at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:07:10.140

禁止错误通常表示您在 Web 服务器上访问的目录/文件存在权限问题。

检查所有者和组权限。还要检查文件上的写/读/执行标志。

您可以通过网络浏览器直接导航到该网址并查看它是否也显示禁止消息吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:10:05.617

你可以使用这个条件

```
 StatusLine statusLine = response.getStatusLine();
                int statusCode = statusLine.getStatusCode();
                if (statusCode == 200) {

                } else {

                } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T23:15:02.270

甜蜜的成功！虽然我可以 POST 到 URL 并获得 200 StatusCode，但它不是“完整”的 URL。必须向其中添加 index.php。表格数据也不完整。需要再添加两个参数。

```
 params.add(new BasicNameValuePair("action", "login"));
                params.add(new BasicNameValuePair("login_submit", "Inloggen")); 
```

通过检查该站点以获取它发布到该站点的表单数据来发现这一点。使用 Chrome 的开发者工具（网络选项卡）中的构建。感谢您的回复！

# cassandra - 卡桑德拉和赫克托问题

> ID：10913869
> 
> 赞同：2
> 
> 时间：2012-06-06T12:04:43.167
> 
> 标签：cassandra, cluster-computing, hector

我在 1 个节点上设置了 Cassandra，并用数据淹没了它。然后我配置了第二个节点、它的初始令牌、种子等，并在其上启动了 Cassandra。现在，当我在 1 个节点集群上运行我的 Hector 代码时，它给了我所有的数据。但是当我在 2 节点集群上运行相同的代码时，我得到的数据更少（列和行的数量更少）。我不明白我做错了什么。我什至尝试使用 CassandraHostConfigurator 添加一串主机，但我仍然没有获得全部数据。我也尝试运行 nodetool repair 但仍然面临同样的问题

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:43:10.203

当您将节点添加到集群中时，您应该 **`auto_bootstrap: true`**在**cassandra.yaml**中启动该节点，以便集群中的其他节点（在您的情况下是唯一的节点）将流数据新节点（根据令牌）。

**编辑**对于 Casssandra-1.0 及以后的版本，没有选项作为引导程序，在这种情况下，我们必须使用计算出的新令牌启动第二个节点，它将开始流式传输数据。一旦流式传输完成运行`nodetool move <new_token>`。有关更多信息，请参阅[将节点添加到集群](http://www.datastax.com/docs/1.1/operations/cluster_management)

如果不这样做，第二个节点将没有根据令牌应该保存的数据。当您尝试从 Cassandra 中读取数据时，它可能正在根据令牌在新添加的节点上查找数据，但由于没有数据，您没有得到正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:49:10.297

*   请检查你所有的防火墙，iptables 配置是接受节点通信到另一个

将节点添加到 ring 后，`nodetool ring`用于查看数据加载示例我的集群有 3 个节点，结果将类似：

> 192.168.23.84 datacenter1 rack1 Up Normal 37.52 GB 33.33%
> 192.168.23.85 datacenter1 rack1 Up Normal 37.5 GB 33.33%
> 192.168.23.86 datacenter1 rack1 Up Normal 37.5 GB 33.33%

如果类似，当你使用 hector 时，使用此代码检查 hector 对哪个服务器的请求：

```
MutationResult result = mutator.execute();
logger.info(" host:" + result.getHostUsed().getHost()); 
```

尝试写很多次来重新检查目标主机是否包含您的所有主机。

当使用 Hector 示例时，我使用这个 CassandraHostConfigurator 将许多主机添加到集群中：

```
CassandraHostConfigurator cassandraHostConfigurator = new CassandraHostConfigurator(
                "192.168.23.84:9160,192.168.23.85:9160,192.168.23.86:9160");
cluster = HFactory.getOrCreateCluster("testcluster", cassandraHostConfigurator); 
```

# gps - 从 GPS 坐标中获取城市名称

> ID：10913870
> 
> 赞同：3
> 
> 时间：2012-06-06T12:04:43.383
> 
> 标签：gps, google-api, city

我想从 GPS 坐标中获取城市的名称。我可以使用 Google API 获取 GPS 点的详细信息

```
http://maps.googleapis.com/maps/api/geocode/output?parameters 
```

输出是我不想成为的 XML ......例如

```
http://maps.google.com/maps/api/geocode/xmllatlng=53.244921,-2.479539&sensor=false&region=gb 
```

将坐标的 XML 详细信息返回给我....我认为这不容易获得城市的名称....我只想要城市的名称..提前感谢您的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T16:16:25.933

正确的网址如下

```
http://maps.googleapis.com/maps/api/geocode/xml?latlng=53.244921,-2.479539&sensor=true 
```

无论如何，xml 非常适合获取城市。在这种情况下

```
<address_component>
    <long_name>Northwich</long_name>
    <short_name>Northwich</short_name>
    <type>postal_town</type>
</address_component> 
```

就是你要找的。不确定您希望从哪种语言中获取此信息。从您使用 javascript 的其他问题来看。所以我建议学习如何使用 javascript 解析 XML。

[所以在这里](https://stackoverflow.com/questions/649614/xml-parsing-of-a-variable-string-in-javascript)有一个很棒的帖子

# c# - AutoResetEvent 导致多线程 UCMA 3.0 应用程序中的死锁

> ID：10913872
> 
> 赞同：1
> 
> 时间：2012-06-06T12:04:57.923
> 
> 标签：c#, multithreading, autoresetevent, ucma

在我的 Parallel.Foreach 循环中，我正在调用

```
 _helper.subscribeUserEndPoint(loop._contactGrpSvcs); 
```

_helper 是 UserEndPoint 和所有其他操作（如订阅）的封装类

订阅方法是：

```
 public void subscribeUserEndPoint(ContactGroupServices cntGrpSvcs)
        {

            cntGrpSvcs.BeginSubscribe(TerminateSubscribe, cntGrpSvcs);

            _contactSubscribeCompleted.WaitOne();

            LOG.Info("Returning from Successful Subscribe Endpoint");
        }

    private void TerminateSubscribe(IAsyncResult result)
    {

        ContactGroupServices cntGrpSvcs = result.AsyncState as ContactGroupServices;
        try
        {
            cntGrpSvcs.EndSubscribe(result);
        }
        catch (Exception ex)
        {
            LOG.Error("Failed to Complete Subscribe. " + ex.StackTrace);
        }
        CollaborationSubscriptionState state = cntGrpSvcs.CurrentState;
        LOG.Info("Subscribed State = " + state.ToString());

            _contactSubscribeCompleted.Set();

    } 
```

等待_contactSubscribeCompleted.WaitOne()时的线程死锁；有什么方法可以避免这种死锁争用？

干杯，

```
 -- Brian 
```

PS：可能发生死锁的一个原因是 AutoResetEvent 的固有问题——从文档中——“不能保证每次调用 Set 方法都会释放一个线程。如果两个调用靠得太近，这样第二次调用在线程被释放之前发生，只有一个线程被释放。就好像第二次调用没有发生一样。另外，如果在没有线程等待并且已经发出 AutoResetEvent 信号时调用 Set，则通话无效。” 有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T00:09:42.493

通过调用 begin 方法，然后等待操作完成，您正在以完全同步的方式调用 api。没有等待句柄更容易做到这一点。您可以将 begin 和 end 方法链接在一起。

```
public void subscribeUserEndPoint(ContactGroupServices cntGrpSvcs)
{
  try
  {
    cntGrpSvcs.EndSubscribe(cntGrpSvcs.BeginSubscribe(null, null));
    CollaborationSubscriptionState state = cntGrpSvcs.CurrentState;
    LOG.Info("Subscribed State = " + state.ToString());
    LOG.Info("Returning from Successful Subscribe Endpoint");
  }
  catch (Exception ex)
  {
    LOG.Error("Failed to Complete Subscribe. Exception: " + ex.ToString());
  }   
} 
```

# ios - 为用户创建邮件帐户

> ID：10913878
> 
> 赞同：2
> 
> 时间：2012-06-06T12:05:32.840
> 
> 标签：ios, cocoa-touch, email

如果用户提供登录数据，是否有办法（API）为用户创建和设置邮件帐户？假设他的帐户是 bla@fake.de 和密码 1234。如果我知道提供商，我可以为他进行设置吗？它可能在 android 中，但由于苹果的政策，我怀疑它在 iOS 中。

如果有人知道如何做到这一点，我会很感激，如果他能指导我找到一些关于如何做到这一点的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:02:42.633

没有公共的设备 API 来实现这一点。一个可能的解决方案可能是让您的服务器创建一个您[将通过无线方式提供的](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009505)[配置文件](http://developer.apple.com/library/ios/#featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010206)。当然，只有当您可以控制相关邮件服务时，这种方法才有意义。

# internet-explorer - IE遇到问题

> ID：10913879
> 
> 赞同：1
> 
> 时间：2012-06-06T12:05:34.753
> 
> 标签：internet-explorer, browser

我在我的项目中使用 jQuery 和 PHP，应用程序在除 IE 之外的所有浏览器中运行良好（目前我已经在 IE-8 中测试过）。Javascript 文件对 IE 没有任何影响，我看到了源代码网页，我写的javascript东西在那里，但没有显示任何效果。jQuery中有没有在IE中不起作用的函数？如果是这样，请列出它们，另一个这可能是什么问题，HTML 或 CSS？如果是这样，我所有的对齐在其他浏览器中都可以正常工作。可能出了什么问题？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:54:51.267

IE 不支持跟踪用户位置等一些 JS 功能。在使用 IE 时，我们必须注意精细的 CSS 和有效的 HTML。在您的页面中检查这些问题，然后测试一次。

# mysql - MySQL SUM 基于外键的不同行，没有子查询

> ID：10913880
> 
> 赞同：1
> 
> 时间：2012-06-06T12:05:43.120
> 
> 标签：mysql, sum

我有以下 MySQL 表，其中 B_ID 是指向 Table_B 的 ID 列的外键：

```
----------    -----------
|Table_A |    |Table_B  |
----------    -----------
|B_ID int|    |ID int   |
----------    |VALUE int|
              ----------- 
```

我想计算 Table_B 中 VALUE 列的总和，仅考虑在 Table_A 中显示为外键的 ID。另外，我想在 Table_B 中添加每一行最多一次。

因此，如果表中填充了以下数据：

```
------    ------------
|B_ID|    |ID | VALUE|
------    ------------
|1   |    |1  | 50   |
|2   |    |2  | 100  |
|2   |    |3  | 200  |
------    ------------ 
```

总和为 150（计算为 50+100）。

我现在使用的查询是：

```
SELECT SUM(b.VALUE)
FROM Table_B b
WHERE b.id IN (SELECT DISTINCT B_ID FROM Table_A) 
```

但是，如果可能的话，我想避免使用子查询。关于如何在没有子查询的情况下执行此操作的任何想法？

注意：该查询本身是较大查询中的子查询，因此只能选择一列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:15:06.427

这不会消除子查询，但如果您在中的记录很少且在中`a`很多，效率会更高`b`：

```
SELECT  SUM(value)
FROM    (
        SELECT  DISTINCT b_id
        FROM    a
        ) a
JOIN    b
ON      b.id = a.b_id 
```

为此创建一个索引以`a.b_id`使其快速工作。

如果 中 的记录很少，`b`而 中的记录很多`a`，那么您的原始查询会更快。该指数的建议仍然适用。

# magento - 通过渲染器在订单网格中添加新列后订单导出错误

> ID：10913881
> 
> 赞同：2
> 
> 时间：2012-06-06T12:05:51.493
> 
> 标签：magento

仅供参考，我使用 grid.php 文件中的以下代码在 Sales > Order Grid 中添加了 2 个自定义列。

```
$this->addColumn(’ddmsaccount’,array(
‘header’ => Mage::helper(’customer’)->__(’DDMS Account #’),
‘width’ => ‘50’,
‘renderer’ => ‘Mage_Adminhtml_Block_Sales_Order_Renderer_Ddms’,
‘filter’ => false,
‘sortable’ => false,
‘index’ => ‘ddmsaccount’
)); 
```

一切正常：在网格布局中可以看到自定义列，过滤/渲染一切正常。

我得到的唯一问题是自定义列未在 CSV 中导出。

让我知道是否有人对此有任何想法。谢谢帕万

# jquery - Jquery验证没有标点符号和数字

> ID：10913883
> 
> 赞同：0
> 
> 时间：2012-06-06T12:05:57.797
> 
> 标签：jquery, regex, validation, expression

我有一个用于输入名称的文本字段。此处不允许使用数字或标点符号。只允许使用字母和破折号，也允许使用 é、è、à、ç、... 等字母

我需要使用哪个正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:11:25.827

如果您要排除的字符列表很小，您可能应该使用类似

```
[\d\.,;] 
```

+ 您要排除的任何其他标点符号/非单词标记（`,',(,) 等似乎是合理的候选者，其中一些需要转义 - 可能应该[为整个 shebang](http://www.regular-expressions.info/characters.html)审查这样的网站），并根据您的文字进行检查。如果弹出，验证失败。上面的括号形成了所谓的字符类或字符集。如果您应用正则表达式修饰符（+、?、. 等），该类将匹配它们之间发生的任何事情一次 - 更多或更少次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:18:59.930

**工作演示** [http://jsfiddle.net/zCZdX/3/](http://jsfiddle.net/zCZdX/3/) **更新** [了 http://jsfiddle.net/48JW4/](http://jsfiddle.net/48JW4/)

好链接：[http ://www.hanselman.com/blog/InternationalizedRegularExpressions.aspx](http://www.hanselman.com/blog/InternationalizedRegularExpressions.aspx)

假设您将添加空格和破折号，就像您提到的那样，这应该足以满足您的需要。

希望这对您有所帮助并添加图像以方便您。

也请开始接受答案，否则每个人都会士气低落以提供帮助而没有任何来自OP的热情`:)`

哦，请阅读：[JavaScript validation issue with international characters](https://stackoverflow.com/questions/1073412/javascript-validation-issue-with-international-characters)

**代码**（休息随意玩小提琴）

```
this.value = this.value.replace(/[^\w\-\s\dÀÈÌÒÙàèìòùÁÉÍÓÚÝáéíóúýÂÊÎÔÛâêîôûÃÑÕãñõÄËÏÖÜäëïöüçÇßØøÅåÆæÞþÐð]+$/g,''); 
```

**图片**

![在此处输入图像描述](../Images/c85b7bc082556df5892693a84fe97ea1.png)

# php - 用于在复杂的 mysql 查询中提取列名和别名的 PHP 代码

> ID：10913884
> 
> 赞同：1
> 
> 时间：2012-06-06T12:05:58.407
> 
> 标签：php, regex, mysqli

我在 PHP 程序中有一个选择查询。

```
SELECT u.name AS name,
    u.email AS email,
    u.status AS status ,
    u.is_blocked AS is_blocked,         
    pm.plan_name AS plan_name,
    upt.amount AS amount,
    upt.payment_status AS payment_status,
    DATE_FORMAT(upt.dt, '%m-%d-%Y')AS payment_date,
    DATE_FORMAT(upt.plan_expiry_date,'%m-%d-%Y') AS exp_dt
FROM users u, user_plan_transaction upt, plan_master pm
WHERE
    u.user_id = upt.user_id
    AND upt.payment_status  IN ('PAID', 'ADMIN_PAID')
    AND upt.dt = (SELECT dt FROM user_plan_transaction WHERE user_id = u.user_id
                  ORDER BY dt DESC
                  LIMIT 1 )
    AND upt.plan_id = pm.plan_id 
```

从这个查询中，我需要提取两个数据集：（
两个数据集都是列名，如下所示：）

```
(1) u.name, u.email, u.status, u.is_blocked, pm.plan_name, upt.amount, upt.payment_status, 
DATE_FORMAT(upt.dt, '%m-%d-%Y'),  DATE_FORMAT(upt.plan_expiry_date,'%m-%d-%Y')
(2) name, email, status, is_blocked, plan_name, amount, payment_status, payment_date, exp_dt 
```

`mysqli_fetch_field()`我试着用函数来做。但是该函数不返回值`DATE_FORMAT(upt.dt, '%m-%d-%Y')`并且`DATE_FORMAT(upt.plan_expiry_date,'%m-%d-%Y')`在数据集中

此外，如果查询稍后更改，我希望能够再次提取字段。

例如。查询 2：

```
SELECT name,
       email,
       status,
       is_blocked
FROM users 
```

然后我需要两个数据集：

```
(1) name, email, status, is_blocked
(2) name, email, status, is_blocked 
```

我需要为任何 mysql 查询提取这两个数据集。

任何人都可以帮忙吗？

谢谢

我找不到基于 mysql php 的解决方案。我必须使用正则表达式来解决这个问题吗？我如何用不在括号中的逗号进行 preg_split。例如：

DATE_FORMAT(upt.dt, '%m-%d-%Y')AS payment_date，

我不想在“upt.dt”之后用逗号分隔，但在“payment_date”之后用逗号分隔。

# wordpress - Wordpress 仅发布每个类别的 1 个帖子

> ID：10913887
> 
> 赞同：3
> 
> 时间：2012-06-06T12:06:12.200
> 
> 标签：wordpress, posts, wp-list-categories

我有这个网站：[http](http://n0rd.no/testing/) ://n0rd.no/testing/在那里我尝试让每个播客在首页上发布一篇文章，而不是在该类别中发布一篇公关文章。

我发现[如何](https://stackoverflow.com/questions/3264323/how-do-i-get-only-1-post-from-each-category-in-wordpress)在此站点上的 wordpress 中的每个类别中仅获取 1 篇文章，但无法弄清楚如何使用我的代码进行此操作。

谁能帮帮我吗？

```
<?php /* Template Name: category view */ ?>
<?php get_header(); ?>

<?php
    // Determine column/image size front page
    $cols = '3';
    $cols = get_option('woo_cols');
    $r1 = 3; $r2 = 2;
    if (get_option('woo_ratio1')) $r1 = get_option('woo_ratio1');
    if (get_option('woo_ratio2')) $r2 = get_option('woo_ratio2');
    if ( $cols == "1") {
        $class = "one"; $width = 940; $height = $width / $r1 * $r2;
    } elseif ( $cols == 2 ) {
        $class = "two"; $width = 460; 
    } elseif ( $cols == 3 ) {
        $class = "three"; $width = 300; 
    } elseif ( $cols == 4 ) {
        $class = "four"; $width = 220; 
    } elseif ( $cols == 5 ) {
        $class = "five"; $width = 172; 
    }
    $height = $width / $r1 * $r2;   
    $height = round($height);
?>

    <!-- Content Starts -->
    <div class="content">

    <?php $paged = (get_query_var('paged')) ? get_query_var('paged') : 1; query_posts('cat=83'); ?>
    <?php if (have_posts()) : ?>
    <?php while (have_posts()) : the_post(); $count++; ?>

        <!-- Post Starts -->
        <div class="bg-photo-thumb <?php echo $class; ?>-col<?php if ($count == $cols) { echo ' last'; $count = 0; } ?>">
        <div class="photo-thumb"><?php ciii_category_images(); ?><h2 class="cattitle"><?php 
$category = get_the_category(); 
//print_r($category );
if($category[0]){
echo '<a href="'.get_category_link($category[0]->term_id ).'" class="catname">'.$category[0]->cat_name.'</a>';
}
?>
</h2><br clear="all" />
<h3 class="catdisc"><?php echo $category[0]->category_description;  ?></h3>

<?php
if (strpos($_SERVER[HTTP_REFERER], "twitter.com") == true) {
    echo "Hello Twitter User!";
}
?>
            <div class="fix"></div>

        </div>
        </div>
        <!-- Post Ends -->

    <?php endwhile; else: ?>
        <p><?php _e('Sorry, no posts matched your criteria.', 'woothemes' ) ?></p>
    <?php endif; ?>  

        <div class="fix"></div>
        <div class="more_entries">
            <?php if (function_exists('wp_pagenavi')) wp_pagenavi(); else { ?>
            <div class="alignleft bg"><?php previous_posts_link(__('&laquo; Newer Entries ', 'woothemes' )) ?></div>
            <div class="alignright bg"><?php next_posts_link(__(' Older Entries &raquo;', 'woothemes' )) ?></div>
            <br class="fix" />
            <?php } ?> 
        </div>      
        <div class="fix"></div>

    </div><!-- Content Ends -->

<?php get_footer(); ?> 
```

更新 - 我现在使用以下代码让它工作：

```
<?php /* Template Name: category view */ ?>
<?php get_header(); ?>

<?php
    // Determine column/image size front page
    $cols = '3';
    $cols = get_option('woo_cols');
    $r1 = 3; $r2 = 2;
    if (get_option('woo_ratio1')) $r1 = get_option('woo_ratio1');
    if (get_option('woo_ratio2')) $r2 = get_option('woo_ratio2');
    if ( $cols == "1") {
        $class = "one"; $width = 940; $height = $width / $r1 * $r2;
    } elseif ( $cols == 2 ) {
        $class = "two"; $width = 460; 
    } elseif ( $cols == 3 ) {
        $class = "three"; $width = 300; 
    } elseif ( $cols == 4 ) {
        $class = "four"; $width = 220; 
    } elseif ( $cols == 5 ) {
        $class = "five"; $width = 172; 
    }
    $height = $width / $r1 * $r2;   
    $height = round($height);
?>
    <div class="content">
<?php

$news_cat_ID = get_cat_ID('News'); 
$news_cats   = get_categories("parent=$news_cat_ID");
$news_query  = new WP_Query();

foreach ($news_cats as $news_cat):
?>

<?php $news_query->query('posts_per_page=1&cat=' . $news_cat->term_id); ?>
<?php if ($news_query->have_posts()): $news_query->the_post(); ?>

        <div class="post">
        <div class="bg-photo-thumb <?php echo $class; ?>-col<?php if ($count == $cols) { echo ' last'; $count = 0; } ?>">
        <div class="photo-thumb"><?php ciii_category_images(); ?><h2 class="cattitle"><?php 
$category = get_the_category(); 
//print_r($category );
if($category[0]){
echo '<a href="'.get_category_link($category[0]->term_id ).'" class="catname">'.$category[0]->cat_name.'</a>';
}
?>
</h2><br clear="all" />
<h3 class="catdisc"><?php echo $category[0]->category_description;  ?></h3>

<?php
if (strpos($_SERVER[HTTP_REFERER], "twitter.com") == true) {
    echo "Hello Twitter User!";
}
?>
            <div class="fix"></div>

        </div>
        </div>
            <!-- do whatever you else you want that you can do in a normal loop -->
        </div>  

<?php endif; ?>

<?php endforeach; ?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:07:54.883

我用它来修复它：

```
<?php /* Template Name: category view */ ?>
<?php get_header(); ?>

<?php
    // Determine column/image size front page
    $cols = '3';
    $cols = get_option('woo_cols');
    $r1 = 3; $r2 = 2;
    if (get_option('woo_ratio1')) $r1 = get_option('woo_ratio1');
    if (get_option('woo_ratio2')) $r2 = get_option('woo_ratio2');
    if ( $cols == "1") {
        $class = "one"; $width = 940; $height = $width / $r1 * $r2;
    } elseif ( $cols == 2 ) {
        $class = "two"; $width = 460; 
    } elseif ( $cols == 3 ) {
        $class = "three"; $width = 300; 
    } elseif ( $cols == 4 ) {
        $class = "four"; $width = 220; 
    } elseif ( $cols == 5 ) {
        $class = "five"; $width = 172; 
    }
    $height = $width / $r1 * $r2;   
    $height = round($height);
?>
    <div class="content">
<?php

$news_cat_ID = get_cat_ID('News'); 
$news_cats   = get_categories("parent=$news_cat_ID");
$news_query  = new WP_Query();

foreach ($news_cats as $news_cat):
?>

<?php $news_query->query('posts_per_page=1&cat=' . $news_cat->term_id); ?>
<?php if ($news_query->have_posts()): $news_query->the_post(); ?>

        <div class="post">
        <div class="bg-photo-thumb <?php echo $class; ?>-col<?php if ($count == $cols) { echo ' last'; $count = 0; } ?>">
        <div class="photo-thumb"><?php ciii_category_images(); ?><h2 class="cattitle"><?php 
$category = get_the_category(); 
//print_r($category );
if($category[0]){
echo '<a href="'.get_category_link($category[0]->term_id ).'" class="catname">'.$category[0]->cat_name.'</a>';
}
?>
</h2><br clear="all" />
<h3 class="catdisc"><?php echo $category[0]->category_description;  ?></h3>

<?php
if (strpos($_SERVER[HTTP_REFERER], "twitter.com") == true) {
    echo "Hello Twitter User!";
}
?>
            <div class="fix"></div>

        </div>
        </div>
            <!-- do whatever you else you want that you can do in a normal loop -->
        </div>  

<?php endif; ?>

<?php endforeach; ?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:36:19.710

也许我错了，但你尝试使用 insted 你的：

```
<div class="content">

<?php

$cat_ID = get_cat_ID('News'); 
$cats   = get_categories("parent=$news_cat_ID");
$main_query  = new WP_Query();
$count = 0;

foreach ($cats as $cat):
   $news_query->query('posts_per_page=1&cat=' . $cat->term_id);
   if ($main_query->have_posts()): 
    $count++; 
    $main_query->the_post(); ?>
        <!-- Post Starts -->
        <div class="bg-photo-thumb <?php echo $class; ?>-col<?php if ($count == $cols) { echo ' last'; $count = 0; } ?>">
        <div class="photo-thumb"><?php ciii_category_images(); ?>
        <h2 class="cattitle">
        <?php $category = get_the_category(); 
        if($category[0]){
            echo '<a href="'.get_category_link($category[0]->term_id ).'" class="catname">'.$category[0]->cat_name.'</a>';
        }?>
        </h2>
    <br clear="all" />
    <h3 class="catdisc"><?php echo $category[0]->category_description;  ?></h3>
    <?php
    if (strpos($_SERVER[HTTP_REFERER], "twitter.com") == true) {
        echo "Hello Twitter User!";
    }
    ?>
        <div class="fix"></div>
        </div>
        </div>
        <!-- Post Ends -->
   <?php endif; ?>

<?php endforeach; ?>
<div class="fix"></div>
        <div class="more_entries">
            <?php if (function_exists('wp_pagenavi')) wp_pagenavi(); else { ?>
            <div class="alignleft bg"><?php previous_posts_link(__('&laquo; Newer Entries ', 'woothemes' )) ?></div>
            <div class="alignright bg"><?php next_posts_link(__(' Older Entries &raquo;', 'woothemes' )) ?></div>
            <br class="fix" />
            <?php } ?> 
        </div>      
        <div class="fix"></div>

    </div> 
```

# javascript - 合并两个 javascript 对象而不覆盖

> ID：10913888
> 
> 赞同：0
> 
> 时间：2012-06-06T12:06:12.843
> 
> 标签：javascript

我有两个带有如下数据的 javascript 对象：

```
{
   "data": [
      {
         "foo": "2388163605_10150954953808606",
         "bar": {
            "xyz": "123",
         },
         "name": {
            "name": [
               {
                  "content": 1,
                  "data": "some text",
                  "id": "2388163605"
               }
            ]
         },
        },
        {
         "not_the_same": "other values",
         "foo": "different",
         "bar": {
            "xyz": "123",
         },
         "name": {
            "name": [
               {
                  "content": 1,
                  "data": "some text",
                  "id": "2388163605"
               }
            ]
         },
        }]
} 
```

第二个：

```
{
   "data": [
      {
         "foo": "123+09",
         "bar": {
            "xyz": "1adad0",
         },
        },
      }]
} 
```

如您所见，属性等有所不同，当然值也有所不同。他们也没有相同数量的项目。我正在尝试像这样合并它们：

```
$.extend(true,posts, posts_object); 
```

（posts 和 posts_objects 包含这两个对象）

我想将它们合并到这个：

```
{
   "data": [
      {
         "foo": "2388163605_10150954953808606",
         "bar": {
            "xyz": "123",
         },
         "name": {
            "name": [
               {
                  "content": 1,
                  "data": "some text",
                  "id": "2388163605"
               }
            ]
         },
        },
        {
         "not_the_same": "other values",
         "foo": "different",
         "bar": {
            "xyz": "123",
         },
         "name": {
            "name": [
               {
                  "content": 1,
                  "data": "some text",
                  "id": "2388163605"
               }
            ]
         },
        },
      {
         "foo": "123+09",
         "bar": {
            "xyz": "1adad0",
         },
        },
      }]
} 
```

但是，这会导致来自第二个对象的数据覆盖第一个对象的数据。有没有办法合并它们，而是将第二个对象中的项目添加到第一个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:11:39.993

如果通过“添加项目”，您的意思是您希望在第二个对象中但*不在*第一个对象中的所有属性最终都添加到第一个对象中，那么*：*

 *```
var tmp;
$.extend(true, tmp, posts);
$.extend(true, posts, posts_object);
$.extend(true, posts, tmp); 
```

可能会奏效。这完全取决于您想要什么复制语义。*

# git - git中分支上的提交数

> ID：10913892
> 
> 赞同：26
> 
> 时间：2012-06-06T12:06:29.833
> 
> 标签：git, version-control

我正在编写一个小脚本，想知道自创建以来我在当前分支上做了多少次提交。

在此示例中，我将在以下位置进行 2 次提交`child`：

```
git checkout master
git checkout -b child
...
git commit -a
...
git commit -a 
```

所以我想要的是

```
commit_number = ...
echo $commit_number 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-12-12T11:09:31.257

Git 可以为您提供提交次数，而无需进一步编写 shell 脚本。

```
git rev-list master.. --count 
```

[rev-list](https://git-scm.com/docs/git-rev-list)（列在 中`git help -a`）用于处理修订。

正如`master..`将列出从 master 的基础和当前分支到当前分支的提交一样，`--count`将为您提供它们的计数。

如果您希望获得两个修订之间的提交次数，您将使用`master...`. 详细说明：在从 master 到 master 的最近共同祖先和当前分支 (HEAD) 之间，再到当前分支。如果您将提交历史可视化为一棵树，您应该能够遵循共同祖先的两个分支。`master..`另一方面，只会计算两个分支中的一个。

因此，您是否想使用`master..`或`master...`取决于您是否想知道自从您将其拆分后*您在分支中进行了多少次提交（），或者**当前*`master..`master 和分支之间的差异，master 和分支中的*提交*数分支被分开了。

 *** * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-06T12:18:59.503

假设您从 master 分支，为您提供在 master 中但不在 master`master..yourbranch`中的提交范围。`yourbranch`

然后，您只需将它们分别列出一行，并计算行数：

```
git log master..yourbranch --pretty=oneline | wc -l 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-06T13:07:33.250

**更新**： git rev-list 现在有`--count`：

```
git rev-list --count master.. 
```

使用较旧的 git 版本：

```
git rev-list master.. |wc -l 
```

rev-list 列出修订，并`master..`指*自当前`HEAD`偏离`master`*.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-18T05:37:25.613

如果你想查看你或其他人做了多少次提交，从你当前的 开始`HEAD`，你可以这样做：

```
git shortlog -sn 
```

示例输出：

```
 490  Donald Duck
   312  Some Developer
   274  John Doe
   144  Jane Doe
     5  Leet Hacker 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-25T09:38:26.767

以下命令将计算总分支提交，忽略合并提交。

*   `git rev-list --count --no-merges master..`

该`rev-list`选项用于处理修订列表。当两个或更多人一起工作并且在提交之前不更新他们的本地副本时，
该选项`--count`将只返回一个数字而忽略合并。`--no-merges`

请访问以下链接以查看带有说明的图片。

参考：[https ://improveandrepeat.com/2017/10/little-git-tricks-how-many-commits-are-in-a-branch/](https://improveandrepeat.com/2017/10/little-git-tricks-how-many-commits-are-in-a-branch/)**

# jquery - 向 jquery ajax .load() 添加加载动画

> ID：10913895
> 
> 赞同：16
> 
> 时间：2012-06-06T12:06:33.567
> 
> 标签：jquery, ajax

我目前有这个代码，它很简单

```
$('#window').load('http://mysite.com/mypage.php'); 
```

但它仅在完全加载后才显示内容，并且在此期间#windows 元素保持为空。我想在页面加载之前显示加载图像。我该怎么做？jquery 网站对此一无所知。（AFAIK）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-06T12:20:52.400

首先创建一个`loading`div。

```
 <div id='loadingDiv'>
    Please wait...  <img src='path to your super fancy spinner' />
 </div> 
```

* * *

最初隐藏此 DIV 并附加代码以在 ajaxCall 启动时显示此 div 并在 ajax 调用完成时隐藏此。

```
$('#loadingDiv').hide().ajaxStart( function() {
$(this).show();  // show Loading Div
} ).ajaxStop ( function(){
$(this).hide(); // hide loading div
}); 
```

**编辑**
不久前，SO 格式化标签存在一些问题。又加了那些。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-06T12:09:04.117

为此，您必须使用 gif 图像。首先将#window的html改成gif图片，直到内容加载完毕

工作代码

```
$('#window').html("<img src="image_url" />").load('http://mysite.com/mypage.php'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T12:22:01.270

对于我知道可能需要超过几毫秒的异步请求，我使用[Spin.js](http://fgnass.github.com/spin.js/)它没有任何外部依赖项，并且是跨浏览器兼容的

```
var opts = {
  lines: 13, // The number of lines to draw
  length: 10, // The length of each line
  width: 4, // The line thickness
  radius: 11, // The radius of the inner circle
  rotate: 0, // The rotation offset
  color: '#000', // #rgb or #rrggbb
  speed: 0.6, // Rounds per second
  trail: 32, // Afterglow percentage
  shadow: false, // Whether to render a shadow
  hwaccel: false, // Whether to use hardware acceleration
  className: 'spinner', // The CSS class to assign to the spinner
  zIndex: 2e9, // The z-index (defaults to 2000000000)
  top: 'auto', // Top position relative to parent in px
  left: 'auto' // Left position relative to parent in px
};

var target, spinner;

$(function(){
    target = $('#window').get(0);
    spinner = new Spinner(opts);
    spinner.spin(target);
    setTimeout(function(){
        spinner.stop();
        $(target).html("Loading finished.");
    }, 3500);
}); 
```

见小提琴[http://jsfiddle.net/y75Tp/73/](http://jsfiddle.net/y75Tp/73/)（感谢verbumSapienti的更新）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-21T14:56:13.120

1) 转到[cssload.net](http://www.cssload.net)并配置一个带有形状、颜色、速度和大小的微调器。下载代码。

2）将**样式**代码放入css文件

3）将**div**代码放入你的html文件中，如：

```
<div id="loadingDiv">
        Please wait...
        <div id="spinnerDiv">
            <div id="blockG_1" class="facebook_blockG">
            </div>
            <div id="blockG_2" class="facebook_blockG">
            </div>
            <div id="blockG_3" class="facebook_blockG">
            </div>
        </div>
    </div>

where the #spinnerDiv is the actual div from cssload. 
```

4) 在一个 js 文件中，添加以下 jquery 行：

```
//*******************************
    // Loading div animation
    $(document).ajaxStart(function(){
          $("#loadingDiv").css("display","block");
        });
        $(document).ajaxComplete(function(){
          $("#loadingDiv").css("display","none");
        }); 
```

ajaxStart 会在 ajax 调用开始时被调用；当相同的调用完成时调用 ajaxComplete。

5) 如果您不想在页面首次加载时看到微调器，请确保在您的 css 文件中添加以下内容：

```
#loadingDiv{
display:none;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-07T00:17:22.950

jQuery load() 方法有一个回调，您可以在其中获取 xhr 状态。使用 spin.js 加载器（或任何其他加载指示器），您可以显示，然后在 .load() 完成时隐藏。注意：此示例将给出 404，因为加载的文件不存在，但微调器加载指示器的工作原理相同。

```
 // create gloabal page spinner for loading stuff
 var opts = {
   lines: 13, // The number of lines to draw,
   length: 12, // The length of each line
   width: 4, // The line thickness
   radius: 15, // The radius of the inner circle
   scale: .5, // Scales overall size of the spinner
   corners: 1, // Corner roundness (0..1)
   color: '#000', // #rgb or #rrggbb or array of colors
   opacity: 0.25, // Opacity of the lines
   rotate: 0, // The rotation offset
   direction: 1, // 1: clockwise, -1: counterclockwise
   speed: 1, // Rounds per second
   trail: 60, // Afterglow percentage
   fps: 20, // Frames per second when using setTimeout() as a fallback for CSS
   zIndex: 2e9, // The z-index (defaults to 2000000000)
   className: 'spinner', // The CSS class to assign to the spinner
   top: '50%', // Top position relative to parent
   left: '50%', // Left position relative to parent
   shadow: false, // Whether to render a shadow
   hwaccel: false, // Whether to use hardware acceleration
   position: 'absolute', // Element positioning
 }
 var spinner = new Spinner(opts).spin();
 var target = $("#loader").append(spinner.el);

 $("#result").load("ajax/test.html", function(response, status, xhr) {
   if (status == "error") {
     var msg = "Sorry but there was an error: ";
     $("#result").html(msg + xhr.status + " " + xhr.statusText);
   }
   // remove loader
   $("#loader").empty();
 });
```

```
<script src="http://fgnass.github.io/spin.js/spin.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="loader">
</div>
<div id="result">
</div>
```

# wpf - 融入背景的文本框

> ID：10913897
> 
> 赞同：5
> 
> 时间：2012-06-06T12:06:47.460
> 
> 标签：wpf, silverlight, windows-phone-7

如何创建一个融入背景页面的文本框，这里的想法是我想创建带有线条和用户类型的笔记本效果（就像在笔记本中用线条书写一样）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T12:23:59.257

`TextBox`使用透明背景，将其放在笔记本纸图像的顶部并对齐字体大小，使其看起来符合需要。你可能想`TextBox`用`ViewBox`

```
 <TextBox TextWrapping="Wrap" Background="{x:Null}"/> 
```

或者使用`TextBox`带有笔记本纸的图像作为背景：

```
 <TextBox TextWrapping="Wrap">
    <TextBox.Background>
       <ImageBrush ImageSource="notebook-paper.png"/>
    </TextBox.Background>
 </TextBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:02:54.067

根据需要设计您的样式`TextBox`，以便背景显示出来。要删除文本框的背景、填充、边框等，请使用：

```
<TextBox Margin="0" BorderThickness="0" Padding="0" Background="Transparent" /> 
```

要控制行高，使其在记事本线条图形上整齐排列，请使用`TextBlock`附加属性：

```
<TextBox
    Margin="0" BorderThickness="0" Padding="0" Background="Transparent"
    TextBlock.LineHeight="10" 
    TextBlock.LineStackingStrategy="BlockLineHeight" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:00:35.237

有更好的方法来做到这一点。您可以覆盖默认样式并使 TextBox 透明。像那样。

```
<TextBox Style="{StaticResource TransparentTextBox}"/> 
```

这是那种风格：

```
<Style x:Key="TransparentTextBox" TargetType="TextBox">
        <Setter Property="FontFamily" Value="{StaticResource PhoneFontFamilyNormal}"/>
        <Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMediumLarge}"/>
        <Setter Property="Background" Value="{StaticResource PhoneTextBoxBrush}"/>
        <Setter Property="Foreground" Value="{StaticResource PhoneTextBoxForegroundBrush}"/>
        <Setter Property="BorderBrush" Value="{StaticResource PhoneTextBoxBrush}"/>
        <Setter Property="SelectionBackground" Value="{StaticResource PhoneAccentBrush}"/>
        <Setter Property="SelectionForeground" Value="{StaticResource PhoneTextBoxSelectionForegroundBrush}"/>
        <Setter Property="BorderThickness" Value="{StaticResource PhoneBorderThickness}"/>
        <Setter Property="Padding" Value="2"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TextBox">
                    <Grid Background="Transparent">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="EnabledBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Collapsed</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="DisabledOrReadonlyBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="ReadOnly">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="EnabledBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Collapsed</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="DisabledOrReadonlyBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="DisabledOrReadonlyBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneTextBoxBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="DisabledOrReadonlyBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneTextBoxBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="DisabledOrReadonlyContent">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneTextBoxReadOnlyBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused"/>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="EnabledBorder" BorderThickness="{TemplateBinding BorderThickness}" Margin="{StaticResource PhoneTouchTargetOverhang}">
                            <ContentControl x:Name="ContentElement" BorderThickness="0" HorizontalContentAlignment="Stretch" Margin="{StaticResource PhoneTextBoxInnerMargin}" Padding="{TemplateBinding Padding}" VerticalContentAlignment="Stretch" Content="sdasdasd"/>
                        </Border>
                        <Border x:Name="DisabledOrReadonlyBorder" BorderBrush="{StaticResource PhoneDisabledBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="Transparent" Margin="{StaticResource PhoneTouchTargetOverhang}" Visibility="Collapsed">
                            <TextBox x:Name="DisabledOrReadonlyContent" Background="Transparent" Foreground="{StaticResource PhoneDisabledBrush}" FontWeight="{TemplateBinding FontWeight}" FontStyle="{TemplateBinding FontStyle}" FontSize="{TemplateBinding FontSize}" FontFamily="{TemplateBinding FontFamily}" IsReadOnly="True" SelectionForeground="{TemplateBinding SelectionForeground}" SelectionBackground="{TemplateBinding SelectionBackground}" TextAlignment="{TemplateBinding TextAlignment}" TextWrapping="{TemplateBinding TextWrapping}" Text="{TemplateBinding Text}" Template="{StaticResource PhoneDisabledTextBoxTemplate}"/>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

# java - Android - RadioGroup 中的 RadioButtons 挤压 - 格式问题

> ID：10913899
> 
> 赞同：0
> 
> 时间：2012-06-06T12:06:52.173
> 
> 标签：java, android, xml, radio-button

我正在尝试将 a`TableRow`分成 4 个相等的部分。第一个是 a `TextView`，最后三个是`RadioGroups`。我已经成功地将它们`TableRow`分成了这些相等的部分。但是，每一行都是动态构建的，每行最多可能有 5`RadioButtons`个`RadioGroup`. 当在每个显示和功能中构建一个`TableRow`5时，它们都被挤压在一起。发生这种情况时，有没有办法让多行，但仍然保持在同一部分的同一部分？当给定适当的参数时，基本上就像 a会变成多行？`RadioButtons``RadioGroup``RadioButtons``RadioGroup``TableRow``TextView`

本案例的 Java 代码：

```
RadioButton rb1, rb2, rb3, rb4, rb5;
RadioGroup rg;
TextView tv;
TableLayout tl = (TableLayout) this.findviewById(R.string.tl);
LayoutInflater inflater = getLayoutInflater();

//set up TableRow and TextView
TableRow tr = (TableRow)inflater.inflate(R.layout.tablerow3q, tl, false);
tr.setBackgroundColor(Color.LTGRAY);
tv = (TextView)tr.findViewById(R.id.tv);
tv.setText("Some text");

//loop sets up 1 RadioGroup per increment, each with 5 RadioButtons
for(int i = 0; i < 3; i++) {
    rb1 = new RadioButton(this);
    rb2 = new RadioButton(this);
    rb3 = new RadioButton(this);
    rb4 = new RadioButton(this);
    rb5 = new RadioButton(this);

    rb1.setText("test1");
    rb2.setText("test2");
    rb3.setText("test3");
    rb4.setText("test4");
    rb5.setText("test5");

    //without these layouts, only four buttons are displayed, the other is cut off
    rb1.setLayoutParams(new RadioGroup.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1f);
    rb2.setLayoutParams(new RadioGroup.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1f);
    rb3.setLayoutParams(new RadioGroup.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1f);
    rb4.setLayoutParams(new RadioGroup.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1f);
    rb5.setLayoutParams(new RadioGroup.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1f);

    //add RadioButtons to correct RadioGroup based on loop increment
    if(i == 0) {
        rg1 = (RadioGroup)tr.findViewById(R.id.rg1);
        rg1.addView(rb1);
        rg1.addView(rb2);
        rg1.addView(rb3);
        rg1.addView(rb4);
        rg1.addView(rb5);
    }
    if(i == 1) {
        rg1 = (RadioGroup)tr.findViewById(R.id.rg2);
        rg1.addView(rb1);
        rg1.addView(rb2);
        rg1.addView(rb3);
        rg1.addView(rb4);
        rg1.addView(rb5);
    }
    if(i == 2) {
        rg1 = (RadioGroup)tr.findViewById(R.id.rg3);
        rg1.addView(rb1);
        rg1.addView(rb2);
        rg1.addView(rb3);
        rg1.addView(rb4);
        rg1.addView(rb5);
    }
}
tl.addView(tr); 
```

XML 布局`TableRow`正在被夸大：

```
<?xml version="1.0" encoding="utf-8"?>
<TableRow xmlns:android="http://schemas.android.com/apk/res/android">
    <TextView
        android:id="@+id/tv"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_margin="1dip"
        android:layout_weight="0.25"
        android:background="#ffffff"/>
    <RadioGroup
        android:id="@+id/rg1"
        android:layout_width="0dip"
        android:orientation="horizontal"
        android:layout_margin="1dip"
        android:layout_weight="0.25"
        android:background="#ffffff"/>
    <RadioGroup
        android:id="@+id/rg2"
        android:layout_width="0dip"
        android:orientation="horizontal"
        android:layout_margin="1dip"
        android:layout_weight="0.25"
        android:background="#ffffff"/>
    <RadioGroup
        android:id="@+id/rg3"
        android:layout_width="0dip"
        android:orientation="horizontal"
        android:layout_margin="1dip"
        android:layout_weight="0.25"
        android:background="#ffffff"/>
</TableRow> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T21:56:12.780

RadioGroup 扩展了 LinearLayout，它不包装其内容。不过，有几个选项可以解决这个问题：

1.  复制`RadioGroup`该类的源代码并对其进行修改以扩展不同类型的 Layout，例如 a`TableLayout`或`RelativeLayout`. 您需要管理单选按钮的排列方式。

2.  动态构建一个嵌套`TableLayout`并使用`OnClickListener`s 来处理选择/取消选择各种单选按钮。

# facebook - 我是否需要“创建新应用”来创建新的 Facebook 页面选项卡？

> ID：10913903
> 
> 赞同：0
> 
> 时间：2012-06-06T12:06:57.603
> 
> 标签：facebook

我有一个现有的业务页面[位于此处](https://www.facebook.com/pages/Wines-For-Home/153306744766496)，我想在此页面上创建一系列“标签”（例如关于我们、推荐的葡萄酒等）。

首先，为了弄清楚这一点，我是否正在为每个新标签“创建新应用”？我不希望用户必须授予任何权限，因为选项卡并不是真正的应用程序，只是信息，尽管我想不出任何其他方式来做到这一点。

因此，假设我必须在向我的页面添加新选项卡之前“创建新应用程序”，然后我如何将创建的应用程序链接到我的业务页面并将其显示为选项卡？我已经阅读了很多文章并在这里进行了搜索，但没有找到明确的答案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:12:32.133

> 首先，为了弄清楚这一点，我是否正在为每个新标签“创建新应用”？

是的。您只能为每个应用程序提供一个页面选项卡 URL，因此您必须根据需要设置尽可能多的应用程序。

> 我不希望用户必须授予任何权限

只要您的应用程序不要求任何权限，就不会提示用户接受任何内容。

> 然后如何将创建的应用程序链接到我的业务页面并将其显示为选项卡？

为此，请使用[Facebook 页面选项卡生成器](https://apps.facebook.com/pagetabgenerator/)。

# vba - 表单字段的 MS Access 参考问题

> ID：10913904
> 
> 赞同：0
> 
> 时间：2012-06-06T12:06:58.123
> 
> 标签：vba, ms-access

您好，这是我的目标，我有一个带有开始日期（start_Date）和结束日期（end_Date）字段的 for 以及一个包含交叉表查询作为记录源的报告。我希望能够根据表格上给出的日期对报告中的数据进行排序。我尝试了 3 种不同的方法。

1.  运行宏并使用 where 条件打开报告，在这种情况下，Access 会抱怨并说“[Reports]！[AuditPTTETotal]！[Date] 不是有效的参考”

2.  通过 VBA 设置我的报告的“where 条件”。另一个参考错误，但这一次，它说我的表单字段无效。

    ```
     Private Sub ViewReport_Click()

        Dim strWhere As String

        If Not IsNull(Me.start_Date) Then
          strWhere = strWhere & " AND [Reports]![AuditPTETotal]![Date] >=#" & [Forms]! [AuditPTETotals]![start_Date] & "# "
        End If
        If Not IsNull(Me.end_Date) Then
          strWhere = strWhere & " AND [Reports]![AuditPTETotal]![Date] <=#" & [Forms]!   [AuditPTETotals]![end_Date] & "# "
        End If
        DoCmd.OpenReport "AuditPTETotal", acViewNormal, , strWhere

       End Sub 
    ```

3.  最后，将我的表单值传递给查询。这些方法都不适合我，我真的需要完成这项工作。我别无选择。任何帮助，将不胜感激。

询问

```
PARAMETERS [Forms]![AuditPTETotals]![start_Date] DateTime, [Forms]![AuditPTETotals]!   [end_Date] DateTime;
TRANSFORM Sum(ScrapCollection.PTEtotal) AS SumOfPTEtotal
SELECT ScrapCollection.Date, ScrapCollection.regNum
FROM ScrapCollection INNER JOIN (ScrapTireType INNER JOIN ScrapCollectionTireType ON (ScrapTireType.scrapTireTypeID = ScrapCollectionTireType.scrapTireTypeID) AND (ScrapTireType.scrapTireTypeID = ScrapCollectionTireType.scrapTireTypeID)) ON ScrapCollection.scrapCollectionID = ScrapCollectionTireType.scrapCollectionID
WHERE (((ScrapCollection.Date) Between [Forms]![AuditPTETotals]![start_Date] And [Forms]![AuditPTETotals]![end_Date]))
GROUP BY ScrapCollection.Date, ScrapCollection.regNum
PIVOT ScrapTireType.description; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:34:15.930

如果要通过使用表单来限制交叉表的结果，则必须具有参数：

```
PARAMETERS [Forms]![AForm]![text0] DateTime, [Forms]![AForm]![text2] DateTime;
TRANSFORM Count(Table1.AKey) AS CountOfAKey
SELECT Table1.AText
FROM Table1
WHERE (((Table1.ADate) Between [Forms]![AForm]![text0] And [Forms]![AForm]![text2]))
GROUP BY Table1.AText
PIVOT Table1.ADate; 
```

# c# - IRC Bot 上的管理员用户

> ID：10913909
> 
> 赞同：0
> 
> 时间：2012-06-06T12:07:14.930
> 
> 标签：c#, irc

好的，所以我不熟悉 IRC 协议，但我已经阅读了相当多的内容以获得更好的理解，但我仍然不确定我将如何设置它，所以我的机器人只会遵循我的命令或阅读机器人“管理员” "来自文本文件。我想实现这一点，以阻止每个人让他退出和垃圾邮件。

如果您需要更具体的内容，请随时询问，我会更新帖子。

按照要求：

```
 public void sendData(string cmd, string param)
    {
        if (param == null)
        {
            sw.WriteLine(cmd);
            sw.Flush();
            Console.WriteLine(cmd);
        }
        else
        {
            sw.WriteLine(cmd + " " + param);
            sw.Flush();
            Console.WriteLine(cmd + " " + param);
        }
    }

    public void IRCWork()
    {
        string[] ex;
        string data;
        bool shouldRun = true;
        while (shouldRun)
        {
            data = sr.ReadLine();
            Console.WriteLine(data);
            char[] charSeparator = new char[] { ' ' };
            ex = data.Split(charSeparator, 5);

            if (ex[0] == "PING")
            {
                sendData("PONG", ex[1]);
            }

            if (ex.Length > 4) //is the command received long enough to be a bot command?
            {
                string command = ex[3]; //grab the command sent

                switch (command)
                {
                    case ":!join":
                        sendData("JOIN", ex[4]);
                        //if the command is !join send the "JOIN" command to the server with the parameters set by the user
                        break;
                    case ":!say":
                        sendData("PRIVMSG", ex[2] + " " + ex[4]);
                        //if the command is !say, send a message to the chan (ex[2]) followed by the actual message (ex[4]).
                        break;
                    case ":!quit":
                        sendData("QUIT", ex[4]);
                        //if the command is quit, send the QUIT command to the server with a quit message
                        shouldRun = false;
                        //turn shouldRun to false - the server will stop sending us data so trying to read it will not work and result in an error. This stops the loop from running and we will close off the connections properly
                        break;
                    case ":!part":
                        sendData("PART", ex[4]);
                        break;
                    case ":!query":
                        sendData("QUERY", ex[4] + ex[4]);
                        break;
                    case ":!useradd":
                        sendData("USERADD", ex[4]);
                        break;

                }
            }
        }
    } 
```

# html - 布局 3 列不带假列

> ID：10913914
> 
> 赞同：0
> 
> 时间：2012-06-06T12:07:30.957
> 
> 标签：html, css, layout

我需要做一个 3 列布局，两侧没有人造列。我不能使用人造列，因为我需要用 javascript 管理这些列。

任何人都可以建议我我能做什么？这里的工作示例：http: [//jsfiddle.net/jVnJX/3/](http://jsfiddle.net/jVnJX/3/) 右栏必须附加到页脚。

任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:47:55.633

您可以使用以下 jQuery：

```
var left_height = $('#column-sx').height();
$('#column-dx').css('height', left_height); 
```

[​在此处](http://jsfiddle.net/jVnJX/4/)查看示例

# java - Java rpg 碰撞检测

> ID：10913916
> 
> 赞同：0
> 
> 时间：2012-06-06T12:07:41.203
> 
> 标签：java, collision-detection

所以我正在研究一个java RPG，我被困在碰撞检测上。这是我到目前为止的地图

![地图](../Images/b26e9e9a6d339d871109d34f8b07bdff.png)

我试图得到它，这样他就不能在蓝色上行走，但可以在白色上行走。我进行移动的方式是通过对每个纹理 x 和 y 应用 x 偏移和 y 偏移来移动地​​图，并在按下 wasd 键时添加/删除它们。这给出了玩家正在移动的影响，即使它是地图。这是我尝试进行检测的代码。

```
int x_offset = InGame.current_level.xoffset;
    int y_offset = InGame.current_level.yoffset;
    Rectangle player = new Rectangle(Math.round((x + x_offset) / 256),Math.round((y + y_offset) / 256),256,256);

for(int x = 0;x!= InGame.current_level.width;x++){
for(int y = 0;y!= InGame.current_level.height;y++){ 
int tile  = InGame.current_level.tiles[x+y* InGame.current_level.width];
            Rectangle tileRect = new Rectangle(x + x_offset ,y + y_offset,256,256);
            if(player.contains(tileRect)){
                System.out.println("Standing on " + tile);
                return;
                }
        }
    } 
```

但有时它说他没有站在任何瓷砖上，当它说他在瓷砖上时通常是错误的。每个 Tile 都是通过 (x * 256) + xoffset 渲染的，对于 y 也是如此。地图存储在 int[] 中，其中数组的每一部分都是一个数字，对应于一个 tile id

# java - Java中的数学 - 不同对象的不同结果

> ID：10913920
> 
> 赞同：4
> 
> 时间：2012-06-06T12:07:52.463
> 
> 标签：java, math

我正在为我正在处理的应用程序进行计算时得到一些奇怪的结果，我认为这里的某个人可能能够帮助弄清楚发生了什么。

此特定计算的要求表明计算应如下所示：

A和B是已知的

```
A * B = C 
```

对于这个特定的计算

```
A = 0.0410
B = 123456789010 
```

这是我看到的结果：

计算器：

```
0.0410 * 123456789010 = 5061728349.41 
```

爪哇：

B 是双倍的：

```
0.0410f * 123456789010d = 5.061728489223363E9 = 5061728489.223363 
```

B 很长：

```
0.0410f * 123456789010l = 5.0617288E9 
```

与 10 和 1 点的差异相比，精度损失对我来说并不重要（无论如何我只需要 9 位精度）。为什么使用 double 进行计算会给我“错误”的结果？

顺便说一句，我尝试使用`BigDecimal`并得到与使用双精度相同的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T12:22:20.667

发生的各种类型转换由[JLS #5.6.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2)指定。在您的情况下（摘录）：

> *   如果任一操作数是 double 类型，则另一个操作数将转换为 double。
> *   否则，如果任一操作数的类型为浮点型，则另一个将转换为浮点型。

在`0.0410f * 123456789010d = 506172848.9223363`,`0.0410f`中首先转换为不一定等于 的双精度数`0.0410d`。其实你可以试试看，不是：

```
 double d1 = 0.041d;
    double d2 = 0.041f;
    System.out.println(new BigDecimal(d1));
    System.out.println(new BigDecimal(d2)); 
```

输出：

> 0.0410000000000000001720845688168992637656629085540771484375
> 0.041000001132488250732421875

在您的下一个示例中：

```
0.0410f * 123456789010L = 506172832 
```

long 转换为浮点数，您可以通过以下示例进行验证：

```
 float f1 = 0.0410f;
    float f2 = 123456789010L;
    System.out.println(new BigDecimal(f1)); // 0.041000001132488250732421875
    System.out.println(new BigDecimal(f2)); // 123456790528
    System.out.println(new BigDecimal(0.0410f * 123456789010L)); // 5061728768
    System.out.println(new BigDecimal(f1 * f2)); // 5061728768 
```

至于一般浮点/双精度操作的精度，请查看[这个问题](https://stackoverflow.com/questions/4937402/moving-decimal-places-over-in-a-double)。

最后，如果你使用 BigDecimal，你会得到正确的答案：

```
 BigDecimal a = new BigDecimal("0.041");
    BigDecimal b = new BigDecimal("123456789010");
    System.out.println(a.multiply(b)); // outputs 5061728349.410 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T12:24:26.307

TLDR 答案：浮点数不能更准确地表示“正确”答案。改用双精度。此外，在没有显式转换的情况下，乘法也会不精确地完成。

[我使用http://www.ideone.com](http://www.ideone.com)得到的答案

```
 A      B     C      
float  long  float  5061728768.000000
double long  double 5061728489.223363 
```

问题是浮点数的精度远小于双精度数，因此当乘以一个大数（例如，您的 10^10 值）时，您会在乘法中失去这种精度。如果我们将 A 显式转换为 double 以进行乘法运算：

```
double C = ((double)A)*B; //=5061728489.223363 
```

然后我们得到额外的精度。如果我们将双重答案转换为浮点数：

```
float C = (float)((double)((double)A)*B); //=5061728256.000000 
```

你看到答案又不一样了。使用了乘法的结果类型，因此在这种情况下`double`，但转换回`float`降低精度。如果没有明确的 double ( `double C=A*B`) 大小写，`float`则使用该类型。使用这两种强制转换，乘法都是作为双精度进行的，并且在乘法*之后*精度会丢失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T12:20:04.367

第一个计算使用双精度（64 位），第二个计算使用浮点数（32 位）。您看到的是“舍入错误”。

在这两种情况下，它都是浮点计算，但在第二种情况下，不涉及“双”参数，因此它只使用 32 位算术。

引用[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html)：

> 如果二元运算符的至少一个操作数是浮点类型，则该运算是浮点运算，即使另一个是整数。
> 
> 如果数值运算符的至少一个操作数是 double 类型，则使用 64 位浮点算术执行运算，数值运算符的结果是 double 类型的值。如果另一个操作数不是双精度数，则首先将其扩展（第 5.1.5 节）以通过数字提升（第 5.6 节）键入双精度数。
> 
> 否则，使用 32 位浮点运算进行运算，数值运算符的结果是浮点类型的值。（如果另一个操作数不是浮点数，则首先通过数字提升将其扩展为浮点数。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T12:24:25.793

您的问题的答案可能在Java 语言规范的[浮点运算部分和](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.4)[这篇较早的文章](https://stackoverflow.com/questions/4097694/java-float-int-implicit-conversion)中。由于正在发生的隐式转换，您可能会遇到舍入错误。

适用于您情况的报价是

第三次操作：

> 如果二元运算符的至少一个操作数是浮点类型，则该运算是浮点运算，即使另一个是整数。

第二次操作：

> 如果数值运算符的至少一个操作数是 double 类型，则使用 64 位浮点算术执行运算，数值运算符的结果是 double 类型的值。如果另一个操作数不是双精度数，则首先将其扩展（第 5.1.5 节）以通过数字提升（第 5.6 节）键入双精度数。

第一次操作

> 否则，使用 32 位浮点运算进行运算，数值运算符的结果是浮点类型的值。（如果另一个操作数不是浮点数，则首先通过数字提升将其扩展为浮点数。）

因此，您不必担心，而是确定您想要的精度并在必要时使用适当的铸件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T12:27:32.723

32 位 IEEE 浮点数具有七位精度；64 位允许 16 个。这就是你所得到的。如果这些都不够，您必须使用 BigDecimal。

*在实现 IEE 标准的每*一种语言中都是如此，而不仅仅是 Java。

# cocoa - 防止窗口在空格之间被拖动

> ID：10913926
> 
> 赞同：1
> 
> 时间：2012-06-06T12:08:23.547
> 
> 标签：cocoa, window, drag, spaces

Lion MacOS 中有一项功能允许将窗口**拖到其他空间**中。我想为我的 NSWindow**禁用**这个机会。

我有一个基本窗口，其中设置了 collectionBehavior 以加入所有空间。我正在实现将子视图拖动到单独的窗口（浮动）中的能力。当用户将此浮动窗口拖到屏幕边缘时，Lion 会自动切换空格。这不是一个理想的行为。

如何禁用此窗口在空格之间拖动？

# javascript - 人脸检测 javascript/html5/flash

> ID：10913928
> 
> 赞同：2
> 
> 时间：2012-06-06T12:08:29.470
> 
> 标签：javascript, flash, html, face-detection

在网页中进行人脸检测的最佳方法是什么？

哪个是最常用的，实际上我需要的是检测人脸，捕获一张人脸。

我没有这方面的经验。

有没有可用的js解决方案？

你有什么建议和意见？

谢谢你。

**朋友们：我正在测试你所有的答案：我会带着结果回来。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:44:56.160

您在这里有几种可能性，这取决于您要用于实现的目标语言。其中一种可能性是 Flash，您可以在其中使用移植到`AS3`最初在`OpenCV`.

[http://www.libspark.org/wiki/mash/Marilena](http://www.libspark.org/wiki/mash/Marilena)

这是由马里奥·克林格曼（Mario Klingemann）改进的。您可以在此处找到该项目：[http](http://www.quasimondo.com/archives/000687.php) ://www.quasimondo.com/archives/000687.php ，其中包括源代码。

如果所需的平台是本机 Web 浏览器，没有任何专有插件，那么新的[WebRTC](http://www.webrtc.org/) W3 计划就是替代方案之一。还有一个，后面会讲。你可以在这里找到实现：http: [//neave.com/webcam/html5/face/](http://neave.com/webcam/html5/face/)。

另一种解决方案是使用 websockets 与后端服务器进行前端通信，其中正在进行大量的图像检测分析。整个过程可以总结为几个步骤：

*   我们使用特定功能的`getUserMedia`功能访问网络摄像头。`HTML5`
*   然后我们使用 websocket 将网络摄像头数据发送到服务器。
*   在这里，我们分析接收到的数据，例如使用 JavaCV/OpenCV 来检测和标记任何识别的人脸。
*   我们再次使用 websocket 将数据发送回客户端。

我们可以在后端站点使用一些选项：

[Jetty](http://www.eclipse.org/jetty/)：提供 websockets 和许多其他集成。

[OpenCV](http://opencv.willowgarage.com/wiki/)：具有各种图像处理算法的库。我们使用他们对人脸识别的支持。

[JavaCV](http://code.google.com/p/javacv/)：为计算机视觉领域的研究人员提供常用库的包装器。使用这个 java 包装器，我们可以通过从 Jetty 接收到的数据直接分析图像。

这是上面描述的一个很酷的[实现](http://www.smartjava.org/content/face-detection-using-html5-javascript-webrtc-websockets-jetty-and-javacvopencv)。

**更新**

目前最令人印象深刻的 JS 人脸识别库是：**[clmtrackr](https://github.com/auduno/clmtrackr)**，它是一个用于将人脸模型拟合到视频或图像中的人脸的库。在这里可以找到对该技术的全面解释：http: [//auduno.tumblr.com/post/61888277175/fitting-faces](http://auduno.tumblr.com/post/61888277175/fitting-faces)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T11:26:09.910

此演示仅使用 JavaScript 和 getUserMedia API 进行实时客户端人脸检测： http: [//neave.github.com/face-detection/](http://neave.github.com/face-detection/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T12:18:33.003

您可以使用[face.com](http://developers.face.com/docs/api/)的免费 API 。它可以用于您想要的任何语言（AS、JS 等）。

它有一些不错的功能（面部特征检测 - 眼睛、嘴巴等）、年龄检测等等

它限制为每小时 5ooo 照片，但在大多数情况下，这已经绰绰有余了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T12:15:38.600

不确定它是否可用，但您当然可以移植一个。我的观点是这绝对是可能的，但可能需要与 Flash 配对才能访问凸轮。

绝对谷歌这个，它覆盖得很好。例如，甚至还有一个[www.facedetection.com](http://www.facedetection.com) - 加上上面评论中的众多 API/SDK。

如果您有时间，为什么不尝试自己制作/改进现有的东西。您可能会发现一些轻量级的简单方法，这正是您想要的。:)

如果您不仅仅对检测感兴趣，那么：您需要考虑您是在进行识别还是识别。

识别您需要在人脸数据库中搜索图像人脸。

识别您需要确认图像面部与给定身份匹配。

# android - 是否可以在 android sdk 上安装 android market

> ID：10913930
> 
> 赞同：0
> 
> 时间：2012-06-06T12:08:36.570
> 
> 标签：android

是否可以在 android sdk 上安装 android market？如果可以，请给我步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:48:12.867

Google Play 商店（以前称为 Android 市场）仅分发给获得许可的设备制造商。它不能通过任何其他方式合法获得，当然也不能从随机网站下载。任何分发 Play 商店 APK 的此类网站都存在软件盗版行为。

如果您想要 Play 商店，请购买 Android 设备。

# jsp - 用jsp文件中的java代码动态改变div

> ID：10913932
> 
> 赞同：0
> 
> 时间：2012-06-06T12:08:44.533
> 
> 标签：jsp

我的jsp文件中有这段代码：

```
div id="fullBG" style="width:1200px;background-repeat:  no-repeat ;">

 $("#fullBG").css("background-image", "url(" + bgImageUrl + ")"); 
```

我想将第二行代码更改为java代码。

我怎样才能做到这一点 ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:16:48.070

您应该避免在 JSP 中使用 scriptlet。这是精彩的答案[如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files).

如果您发现编写 EL 有困难，请指出您面临的困难在哪里，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:03:55.400

正如我所理解的，您需要动态更改背景图像。而且您需要从 java (jsp) 中执行此操作。如果您需要在页面加载时执行此操作，您可以将背景图像放入 servlet 中的请求属性中：

```
request.setAttribute("bgImageUrl", "your_url"); 
```

在jsp中：

```
$("#fullBG").css("background-image", "url(${bgImageUrl})"); 
```

如果您需要在不重新加载页面的情况下执行此操作：使用 ajax。

# ios - 对于本地通知，当应用程序在前台运行时如何显示“警报”？

> ID：10913934
> 
> 赞同：2
> 
> 时间：2012-06-06T12:08:54.727
> 
> 标签：ios, ios5

我需要应用程序在前台运行时发出警报

我在我的设备中测试它，当它在后台时，警报显示；但是当应用程序进入前台时，没有警报显示，默认情况下会发生这种情况吗？

我搜索了一些问题，有人说我可以使用“UIAlertView”模拟警报...

有没有其他合适的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:20:05.740

当您的应用程序处于前台时，您必须处理通知。系统不会为您弹出警报，您必须将通知捕获`application:didReceiveRemoteNotification:`并自己处理。

如果你想要一个警报，那么在那个方法中你应该召唤一个`UIAlertView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:14:58.320

我会这样做：

```
if ([UIApplication sharedApplication].applicationState != UIApplicationStateBackground) {
  // show an alert view
}
else {
  // your local notification configuration
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T01:14:19.983

@Kjuly 对上述内容是正确的，但您还应该检查 UIApplicationStateInactive。只是检查是否更容易

[UIApplication sharedApplication].applicationState != UIApplicationStateActive

# sql-server - 从 table1 中选择 table2 中没有行的行

> ID：10913941
> 
> 赞同：0
> 
> 时间：2012-06-06T12:09:36.583
> 
> 标签：sql-server, select, sql-delete

我有 2 个表，OrderTable 和 OrderDetailTable。

我正在尝试从 OrderTable 中选择 OrderDetailTable 中没有任何行的行，以便我们可以删除它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:11:41.577

我假设你有`id`两个表之间的关系：

```
select * from OrderTable  
where orderdetails_id not in (select id from OrderDetailTable) 
```

并删除它们

```
delete from OrderTable  
where orderdetails_id not in (select id from OrderDetailTable) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:13:03.800

```
SELECT o.*
FROM OrderTable o
LEFT JOIN OrderDetailTable od ON od.idOrderTable = o.id
WHERE od.id IS NULL; 
```

od.id 可以是 OrderDetailTable 中不能为空的任何字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:14:00.173

假设 OrderTable 有一个列 id，而 OrderDetailTable 有一个列 orderTable_id

```
select * from OrderTable
WHERE id not in (
 select ot.id from OrderTable ot inner join OrderDetailTable odt on odt.orderTable_id = ot.id
) 
```

# imagemagick - 设置背景颜色：与-透明相反

> ID：10913944
> 
> 赞同：9
> 
> 时间：2012-06-06T12:09:58.390
> 
> 标签：imagemagick

假设我有一个带有透明像素的 PNG，我如何将它们转换为纯色？

*[（请注意，这与这个问题](https://stackoverflow.com/questions/2322750/replace-transparency-in-png-images-with-white-background)略有不同，因为我希望用任意颜色替换。白色在 ImageMagick 中是“特殊的”，因为那里接受的答案表明它忽略了提及白色的事实）。*

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-06T12:18:57.680

对我来说，以下作品（ImageMagick 6.6.3-1）：

```
convert in.png -background "#FF0000" -flatten out.png 
```

只需将红色换成适合您需要的颜色即可。

# git - jenkins中的git克隆致命：远程端意外挂断

> ID：10913952
> 
> 赞同：-2
> 
> 时间：2012-06-06T12:10:22.777
> 
> 标签：git

我无法在 jenkins 中克隆 git repo。安装的git版本是1.7.10。我还在用户目录中配置了 ssh 密钥。使用相同的配置，我可以从命令行和 git bash 中克隆 git。

但是，当我从詹金斯“执行窗口批处理命令”尝试相同的命令时，作业失败并出现错误：`fatal: The remote end hung up unexpectedly`

```
C:\JenkinsSlave\workspace\ClonePath>git clone git@giturl.git 
Cloning into 'gitrepo'...
fatal: The remote end hung up unexpectedly
Build step 'Execute Windows batch command' marked build as failure
Notifying upstream projects of job completion
Finished: FAILURE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:14:53.353

我怀疑您的 Jenkins 工作是在您认为的用户帐户下运行的。但无论如何，从只读资源位置克隆是大多数构建服务器要做的事情。试试这个：

```
git clone git://giturl.git 
```

# php - 阿拉伯语文本未存储在 MySQL 数据库中

> ID：10913954
> 
> 赞同：0
> 
> 时间：2012-06-06T12:10:27.340
> 
> 标签：php, jquery, mysql, character-encoding

我想知道为什么阿拉伯文本没有存储在数据库中。它更改为其他一些 unicode 格式，例如**%$&^%$%^&!** #***。

我已将我的列**排序规则**设为**utf8_general_ci**。我需要在我的 sql 查询中做一些修改吗？

我的 SQL 查询是：

```
$query="INSERT INTO blog_tab(blog_details) 
    VALUES('$blog_details') "; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:16:24.903

创建数据库时，SQL 可能是这样的：

```
CREATE TABLE IF NOT EXISTS `employees` (
  `empid` int(11) NOT NULL,
  `empname` varchar(255) NOT NULL,
  PRIMARY KEY (`empid`)
) ENGINE=InnoDB ; 
```

或像这样：

```
CREATE TABLE IF NOT EXISTS `employees` (
  `empid` int(11) NOT NULL,
  `empname` varchar(255) NOT NULL,
  PRIMARY KEY (`empid`)
) ENGINE=InnoDB charset=latin1 ; 
```

尝试更改`charset`为`utf-8`，如下所示：

```
CREATE TABLE IF NOT EXISTS `employees` (
  `empid` int(11) NOT NULL,
  `empname` varchar(255) NOT NULL,
  PRIMARY KEY (`empid`)
) ENGINE=InnoDB charset=utf-8 ; 
```

希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:15:32.940

字符集、排序规则和编码似乎是正确的。

在连接到数据库之前添加以下内容应该会有所帮助：

```
mysql_query("SET NAMES 'utf8'"); 
mysql_query('SET CHARACTER SET utf8'); 
```

[http://www.adviesenzo.nl/examples/php_mysql_charset_fix/](http://www.adviesenzo.nl/examples/php_mysql_charset_fix/)上的页面包含对您的问题的解释和进一步指导。

# php - PHP CSV 管理器类

> ID：10913958
> 
> 赞同：0
> 
> 时间：2012-06-06T12:10:35.820
> 
> 标签：php, class, csv

我搜索了很多，但没有找到任何特殊的类。谁在创建 csv 文件，更新（也附加），从 csv 文件中删除记录..

有谁知道这项工作的任何 php 类库。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:18:24.383

检查[PEAR::File_CSV_DataSource](http://pear.php.net/package/File_CSV_DataSource)。

# .net - 嵌入式系统入门

> ID：10913960
> 
> 赞同：-1
> 
> 时间：2012-06-06T12:10:36.813
> 
> 标签：.net, embedded, microcontroller, .net-micro-framework

我正在使用 C# 语言（WinForms、Web、WPF）处理 .NET Framework。现在我需要完成我的大学任务。它应该是用于嵌入式设备（如微控制器或类似设备）的简单程序。我完全没有数字电子学的基础知识，但我对C有一点了解。我有很多时间研究这些东西（大约半年或更长时间）。所以我该怎么做？什么对我更好？

1.  你能推荐一些书籍或培训课程来开始使用嵌入式系统吗？

2.  我听说过一些关于 .NET Micro Framework 的信息。这是解决我问题的最佳方法吗？我应该买什么设备来学习编程（eBay上有很多设备）。

3.  还有很多建议使用 PIC 单片机和 C 语言对其进行编程。所以我再次询问我需要什么设备和什么IDE？

PS对不起英语不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:20:48.460

很难回答你的问题，因为你没有提到你想做什么。我熟悉微芯片微控制器 (PIC)，他们有一系列价格合理的开发板，您可以从他们的网页免费获得 IDE 和编译器（IDE 称为 MPLAB，编译器取决于您的设备采用）。但是，如果您来自 pc 世界，开始为微控制器开发有时会有点令人沮丧。这些工具有它们的怪癖，你必须习惯它们。

您的问题的另一个替代方案可能是 arduino 板，它们非常便宜（大约 20-25 美元）并且它们易于编程，您不需要任何额外的设备来对其进行编程。（板直接插入USB）。您还可以从 arduino 网站免费获得所有开发工具。

我看到 Arduino 和 PIC 之间的主要区别在于，Arduino 有点像业余爱好者的玩具，而用 C 语言编写 Pics 可以让您更好地了解嵌入式软件的开发方式。与其他微控制器相比，pic 的好处是它们在业余爱好者中非常受欢迎，这意味着有很多适合初学者的书籍。

根据您对学习嵌入式软件的认真程度，如果只是为了一个简单易用的项目并且再也不会看到微控制器，我会选择 Arduino，但是如果您想真正学习编写嵌入式软件，我会选择功能相当强大的开发板，这将允许您将来运行 RTOS。根据开发板，您可能需要也可能不需要外部编程器（许多开发板板载 USB 编程器）

我只是快速浏览了一下 .net 微框架是什么，显然它只被移植到 ARM 内核并且需要相当多的内存才能运行，所以除非你开发了一个开发板来运行 .net 微框架（只是遇到了一个叫做netduino的东西）我不会考虑的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:43:35.677

1.  嵌入式系统大多是用 C 语言编程的，部分软件是汇编语言。因此，如果没有很好的 C 知识（堆栈如何工作，如何修改给定地址的内存内容......）和计算机体系结构（什么是中断，什么是后端缓存，处理器如何启动...）。有很多关于这些的优秀文献，你可以从维基百科开始。

2.  我对 .NET Micro Framework 了解不多，也不认识任何使用它的人。对于嵌入式系统的开始，您应该只考虑另一种设备，请参见 3。

3.  正如 praemdonck 所说，带有 MPLAB 调试探针的 Microchip dsPIC 可能是最实惠的解决方案，而且您实际上可以用这些微控制器做很多事情。我不会考虑基于嵌入式 Linux 的解决方案，因为您不会深入到底层来理解嵌入式编程的真正含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T06:54:52.123

> 1) 你能推荐一些书籍或培训课程来开始使用嵌入式系统吗？

[这是一本不错的在线书籍](http://users.ece.utexas.edu/~valvano/embed/toc1.htm)。它基于一个被称为 68HC12 的过时微控制器，尽管讨论的主题对所有微控制器都是通用的，尤其是关于嵌入式 C 编程的部分。

（68HC12是摩托罗拉90年代中期开发的，2002年左右过时。被现代HCS12取代，指令兼容。作为参考，68HC12被认为是一个老旧的，过时的MCU，但它是在第一个20年后设计的PIC。仅供参考 PIC 到底有多过时。）

> 2) 我听说了一些关于 .NET Micro Framework 的事情。这是解决我问题的最佳方法吗？我应该买什么设备来编程（eBay上有很多东西）。

我专门从事嵌入式系统工作，但从未听说过。所以不......这可能不是一个好主意，听起来像是微软又一次绝望地尝试涉足嵌入式系统。如果我认识他们，那只会是另一种风格的 PC。

> 3）我还看到很多建议使用 PIC 微控制器和 C 语言为它们编程。同样，我需要什么设备和什么 IDE？

其他人已经回答了这个问题。C语言绝对是嵌入式系统所需要的。如果您是 C 语言的初学者，尤其是嵌入式 C，我强烈建议您选择一个平台，该平台的编译器以其 C 标准合规性而闻名。任何使用 GCC 的平台都可能是初学者的明智选择。

# multithreading - 非窗口类中的自定义消息 - 需要默认处理程序吗？

> ID：10913961
> 
> 赞同：18
> 
> 时间：2012-06-06T12:10:56.203
> 
> 标签：multithreading, delphi, message, delphi-xe2, hwnd

有了一个类（TObject），我有：

```
private
  FHwnd : HWND;
  procedure HandleMyMessage(var Message : TMessage); message TH_MYMESSAGE; 
```

在哪里`TH_MYMESSAGE = WM_USER + 1`

在类构造函数中：

```
FHwnd := AllocateHWND(HandleMyMessage); 
```

唯一接收到引用的对象`FHwnd`是私有自定义 TThread（在此类中创建），它发布的唯一消息是`TH_MYMESSAGE`. 我的理解是`message`过程声明中的指令将其处理限制为仅`TH_MYMESSAGE`.

这在测试中运行良好，但在集成到更大的应用程序后，我收到的反馈`HandleMyMessage`也会触发其他消息（具有明显的不良结果）。

`if Message.Msg <> TH_MYMESSAGE then Exit;`这很容易通过添加来纠正`HandleMyMessage`。我的问题是：为什么会这样？

我最好的猜测是，尽管它有指令，但它`AllocateHWND`已经`HandleMyMessage`相当于 a 。有没有正确的方法来实现我所缺少的？`DefWndProc``message`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-06T12:36:07.407

嗯，当然可以。`AllocateHWnd`接受 a`TWndMethod`作为创建窗口的窗口过程。我猜，这种混乱是由于编译器接受了`messsage`指令造成的。不要说：

```
private
  FHwnd : HWND;
  procedure HandleMyMessage(var Message : TMessage);

..

procedure TMyClass.HandleMyMessage(var Message: TMessage);
begin
  case Message.Msg of
    TH_MYMESSAGE: //
  end;
  Message.Result := DefWindowProc(FHWnd, Message.Msg, Message.WParam, Message.LParam);
end; 
```

* * *

**编辑：（**对评论的回应）。要在创建实用程序窗口的类上处理消息，您可以将消息从 AllocateHWnd 创建的窗口路由到您的类：

```
private
  FHwnd : HWND;
  procedure HandleMyMessage(var Message : TMessage);
  procedure THMyMessage(var Message: TMessage); message TH_MYMESSAGE;

..

procedure TMyClass.HandleMyMessage(var Message: TMessage);
begin
  case Message.Msg of
    TH_MYMESSAGE: Dispatch(Message);
  end;
  Message.Result := DefWindowProc(FHWnd, Message.Msg, Message.WParam, Message.LParam);
end;

procedure TMyClass.THMyMessage(var Message: TMessage);
begin
  //
end; 
```

# java - 使用 REGEX 提取数据

> ID：10913962
> 
> 赞同：0
> 
> 时间：2012-06-06T12:10:56.347
> 
> 标签：java, regex

我可以知道如何使用 REGEX 提取以下数据吗？

1) 文本A;文本B;文本C;文本D

提取 "textA;textB;textC" 又名 textD 的父级

2) 文本A;文本B;文本C;文本D AB(数字A)

提取 AB(numberA) 的 "textA;textB;textC;textD" 又名父级

3) textA;textB;textC;textD AB(numberA) 提取“numberA”进行比较

目前的实现，我使用java字符串函数，这使得它不可配置。我怀疑用户没有给我实际数据，我需要在不久的将来再次更改该功能。我希望使用正则表达式来使功能可配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:16:55.930

1.  `(.*);[a-zA-Z]+`- 1美元

2.  `(.*) .*`- 1美元

3.  `.* .*\((.*)\)`- $1
    如何使用正则表达式和组：[http](http://www.javamex.com/tutorials/regular_expressions/capturing_groups.shtml)
    ://www.javamex.com/tutorials/regular_expressions/capturing_groups.shtml 示例：

    ```
    String s = "textA;textB;textC;textD";
    Pattern pt = Pattern.compile("(.*);[a-zA-Z]+");
    Matcher mt = pt.matcher(s);
    if(mt.matches())
        System.out.println(mt.group(1)); 
    ```

打印：`textA;textB;textC`.
UPD：因为模式未知，所以像 1) 这样的答案`textA;textB;textC;(textD)`也是正确的。当问这样的问题时，最好写模式，即使你不知道正则表达式也只能使用单词。
UPD：谢谢纠正

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T07:27:44.260

可以简单地使用这个吗？

```
String[] arr = "textA;textB;textC;textD AB".spilt("[; ]"); 
```

# c++ - C++ 中的一维动态数组

> ID：10913969
> 
> 赞同：1
> 
> 时间：2012-06-06T12:11:38.957
> 
> 标签：c++, visual-studio-2010

我用 C++ 编码只有 15 天，我遇到了一些我被卡住的东西。我需要使用动态二维数组来满足我的目的。我使用 std::vector 创建一维动态数组，但我不知道如何创建二维动态数组。如果有帮助，我正在使用 VC++，但我不使用 VC++ 库函数。

有谁知道如何完成它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:17:42.450

您可以使用嵌套向量来做到这一点：

```
int number_of_rows, number_of_columns;

std::vector < std::vector <int> > array;

array.resize(number_of_rows);

for (int i=0; i < number_of_rows; ++i)
    array[i].resize(number_of_columns);

array[1][2] = 3; // e.g. of assignment 
```

在构造函数中初始化完整的数组大小：

```
std::vector <std::vector <int> > (nor, std::vector<int>(noc)); 
```

但是请注意，嵌套`std::vector`结构不会将您绑定到二维数组——每个嵌套向量都可以有不同的大小。例如：

```
std::vector <std::vector <int> > not_array(3); 
    // contains 3 inner empty vectors
for (int i=0; i < 3; ++i)
    arrray[i].resize(i+1); 
```

现在按顺序`not_array`包含大小为*1、2 和 3*的向量。

如果您想确定您使用的是*矩阵*(2D)，而不仅仅是 (1D) 向量的向量，您可以使用外部库中的实现。

*   `OpenCV`是一个计算机视觉库，包含[类`cv::Mat`](http://opencv.willowgarage.com/documentation/cpp/core_basic_structures.html#mat)
*   `boost`是一个通用库，并具有[`matrix`类的实现](http://www.boost.org/doc/libs/1_42_0/libs/numeric/ublas/doc/matrix.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:18:17.963

如果您的数组维度可以是可变的（例如，每行可以有不同的长度），`vector<vector<int> >`那么这是一个很好的解决方案（替换`int`为您的特定元素类型）。

即使每行的长度相同，您也可以使用此方法，但确保此属性可能需要更多工作。在后一种情况下，您最好找到支持某种`Matrix`类型的库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T12:26:19.963

C++/STL 标准库中没有二维数据结构。

正如其他人所说，您可以通过嵌套 STL 容器（例如`vector`. 但**它不能保证整体结构的一致性**。（不能保证矩阵的两行长度相同）。

您应该将其封装在一个对象中以强制执行正确的矩阵结构。或者您可以使用已经存在的 Matrix 数据结构，我敢肯定有很多库可以提供它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T12:21:02.597

二维数组是向量的向量。参见[例如](http://www.yolinux.com/TUTORIALS/LinuxTutorialC++STL.html)。

```
// Declare size of two dimensional array and initialize.
vector< vector<int> > vI2Matrix(3, vector<int>(2,0));   
vI2Matrix[0][0] = 0;
vI2Matrix[0][1] = 1;
vI2Matrix[1][0] = 10;
vI2Matrix[1][1] = 11;
vI2Matrix[2][0] = 20;
vI2Matrix[2][1] = 21;
cout << "Loop by index:" << endl;

int ii, jj;
for(ii=0; ii < 3; ii++)
{
  for(jj=0; jj < 2; jj++)
  {
     cout << vI2Matrix[ii][jj] << endl;
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-15T08:48:17.790

如果您正在处理标量数组，则绝对应该考虑使用[**Eigen**](http://eigen.tuxfamily.org/index.php?title=Main_Page)。

> Eigen 是一个用于线性代数的 C++ 模板库：矩阵、向量、数值求解器和相关算法。

它附带了一个很棒的[文档](http://eigen.tuxfamily.org/dox/)，其中提供了许多示例。

在 Eigen 上调整数组大小很简单：

```
#include <Eigen/Dense>
using namespace Eigen;
...
MatrixXd m(5,5);  // 5x5 matrix of double
m.resize(10,5);   // resizing to a 10x5 matrix 
```

请注意，Eigen 也[可扩展为自定义标量类型](http://eigen.tuxfamily.org/dox-devel/TopicCustomizingEigen.html#CustomScalarType)。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-06T12:13:21.593

```
std::vector< std::vector<int> > 
```

**之后**

放大 std::vector 非常简单，但缩小有一些问题。见[参考文献](http://cplusplus.com/reference/stl/vector/resize/)。

当您减小大小时，您只是在逻辑上删除额外的元素（不能保证在物理上减少内存）。要强制减少内存，您可以使用这样的[技巧](https://stackoverflow.com/a/1111099/532208)。

# asp.net-mvc - Azure Web 角色并不总是显示移动视图？

> ID：10913972
> 
> 赞同：3
> 
> 时间：2012-06-06T12:11:42.597
> 
> 标签：asp.net-mvc, azure

我有一个奇怪的错误。当我第一次部署我的 Azure 应用程序时，我可以查看网站的移动版本 (Index.Mobile.cshtml)。15 分钟后，我得到了桌面视图（Index.cshtml）。

如果我每 10 分钟浏览一次网站，那么我可以看到移动版只要我想要的时间（测试了 6 次点击超过一个小时）。然后我有 15 分钟没有点击链接，当我再次获得桌面版本时。

如果我重新启动 IIS 则该过程重复，我首先获得移动版本，保持刷新 5 分钟，我正确地看到了移动版本。等待 15 分钟，我得到桌面版本。

在物理服务器上运行的相同代码保持正确，并且在本地调试也可以工作。

_ViewSwitcher 仍然正确地说我在移动版本上，但它没有使用页面的 Index.Mobile.cshtml 版本。

我正在运行 ASP.NET MVC 4 RC。

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:24:35.280

这是一个与 MVC4 相关的已知错误：

[http://aspnetwebstack.codeplex.com/workitem/280?PendingVoteId=280](http://aspnetwebstack.codeplex.com/workitem/280?PendingVoteId=280)

# android - Android 创建启动活动的意图

> ID：10913977
> 
> 赞同：0
> 
> 时间：2012-06-06T12:12:02.393
> 
> 标签：android, android-intent, android-asynctask, android-tabhost

我有一个应用程序，它由一个 tabhost 组成。我正在使用 a`AsyncTask`在后台执行一些互联网工作。现在在 中`onPostExecute`，我希望它开始一个新的活动。当我创建一个新意图时，会显示新活动，但没有选项卡..它只是活动。

现在我已经在线阅读了如何做到这一点，并且我已经设法进入了我认为的正确方向。这是整个代码：

```
package com.appsoweb.kvodeventer;

import org.json.JSONObject;

import android.app.Activity;
import android.app.ActivityGroup;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class KVOMeldingen extends ActivityGroup {

    public static final JSONObject jsonResult = null;
    Button bLogin, bCreateAccount, bResetPassword;
    EditText etUsername, etPassword;
    static String Username;
    static String Password;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.meldingen);
        final EditText etUsername = (EditText) findViewById(R.id.etUsername);
        final EditText etPassword = (EditText) findViewById(R.id.etPassword);
        Button bLogin = (Button) findViewById(R.id.bLogin);
        Button bCreateAccount = (Button) findViewById(R.id.bCreateAccount);
        Button bResetPassword = (Button) findViewById(R.id.bResetPassword);

        bLogin.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (etUsername.length() <= 0) {
                    etUsername.setError("Veld mag niet leeg zijn");
                } else if (etPassword.length() <= 0) {
                    etPassword.setError("Veld mag niet leeg zijn");
                } else {
                    Username = etUsername.getText().toString();
                    Password = etPassword.getText().toString();
                }
                LoginTask NDLT = new LoginTask();
                NDLT.execute();
            }
        });

        bCreateAccount.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // Doe iets hier.......

            }

        });

        bResetPassword.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // Doe iets hier........

            }

        });

    }

    public static String getUsername() {
        return Username;
    }

    public static String getPassword() {
        return Password;
    }

    class LoginTask extends AsyncTask<Void, Void, JSONObject> {

        ProgressDialog waitingDialog;

        @Override
        protected void onPreExecute() {
            waitingDialog = new ProgressDialog(KVOMeldingen.this);
            waitingDialog.setMessage("Laden...");
            waitingDialog.show();
            super.onPreExecute();
        }

        @Override
        protected JSONObject doInBackground(Void... params) {

            JSONObject json = JsonFunctionLogin
                    .getJsonLoginResult("http://api.crossalertdeventer.nl/login.json");
            return json;

        }

        @Override
        protected void onPostExecute(JSONObject json) {
            super.onPostExecute(json);
            if (waitingDialog.isShowing()) {
                waitingDialog.dismiss();
                Log.d("iets gebeurt", "gedaan");
            }
            try {

                String LoginResult = json.getString("login");
                String UserIdResult = json.getString("user_id");
                Log.d("LoginResult", LoginResult);
                Log.d("LoginUserId", UserIdResult);
                json = null;
                Intent intent = new Intent(KVOMeldingen.this, KVOCards.class);

                View view = getLocalActivityManager().startActivity("KVOCards", intent
                                                .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))
                                                .getDecorView();

                replaceView(view);

            } catch (Exception e) {
                Log.e("KVOMeldingen", "error" + e.getMessage());
            }

        }

        public void replaceView(View v){
            setContentView(v);
        }
    }

} 
```

如您所见：我创建了一个视图，它将通过`Inten`t 显示。但是意图在背景后不会启动。它给了我一个错误：

无法启动 Activity componentInfo 无法添加窗口...令牌.....无效...您的应用程序正在运行吗？

我究竟做错了什么？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:16:12.830

开始一个新的 Activity 意味着你正在从你的 TabActivity 导航到一个普通的 Activity。显然，您在 Activity 中找不到选项卡。您必须替换视图而不是创建活动。

这是一个很好的例子，说明如何将 ActivityGroup 与 TabActivity 一起使用。

[http://web.archive.org/web/20100816175634/http://blog.henriklarsentoft.com/2010/07/android-tabactivity-nested-activities/](http://web.archive.org/web/20100816175634/http://blog.henriklarsentoft.com/2010/07/android-tabactivity-nested-activities/)

但是这种方法仍然被弃用。不过，您可能不得不考虑使用片段。

看看这里，[http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html)

# function - 视图和表值函数之间的 T-SQL 内连接优化

> ID：10913981
> 
> 赞同：2
> 
> 时间：2012-06-06T12:12:12.160
> 
> 标签：function, tsql, join, view

我有一个视图和表值函数，并在它们之间进行内部连接。每一方都有几百万条记录需要连接。

我已经阅读了很多如何优化连接（最常见的答案是使用索引，但我的视图不能被索引视图），但仍然没有找到一种方法应该如何以正确的方式完成视图和函数之间的连接并优化。

编辑：

为了表明问题确实是内部连接 ​​- 我为每个查询制作了“SELECT COUNT(*)”：

1.  查看 - 0 秒
2.  功能 - 18 秒
3.  函数内连接视图 - 42 秒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:29:37.607

让我们从另一个角度看一下——你真的需要对如此大量的数据进行这种联接吗？我有类似的问题，这是我的情况和解决方案：

1.  在我的案例中，数百万条记录都不需要 - 只是特定的过滤数据
2.  我已经为从那个巨大的表到其他表的插入\更新\删除创建了触发器——它们旨在跟踪我需要的数据
3.  现在我可以对特定的（比如说 - 过滤的）数据进行快速连接

这种方法有他自己的优点和缺点；主要不便 - 您应该重建\检查您的数据库结构：这种方式可能并不适合所有情况

无论如何-这是我对特定问题的解决方案，它仍然可以正常工作，我的性能至少提高了 10 倍

# c# - 将数据从 c# 导出到 word 文档

> ID：10913985
> 
> 赞同：0
> 
> 时间：2012-06-06T12:12:40.437
> 
> 标签：c#, asp.net, grid, export-to-word

我在 c# 中有一个填充数据的网格。该网格中的一列包含按字母顺序排序的字母（后跟数字），如下所示：

```
A124
A256
A756
B463
B978
D322
etc. 
```

我需要将这些数据导出为 Word 文档（.doc 或 .docx 格式）。这就是我为导出一个信号网格所做的：

```
var dt = FuntionThatReturnsDatatables();

var gd = new GridView
        {
            DataSource = dt                     
        };

        gd.DataBind();

        HttpContext.Current.Response.Clear();
        HttpContext.Current.Response.Buffer = true;

        HttpContext.Current.Response.AddHeader("content-disposition", "attachment;
        filename=" + "List" + DateTime.Now.ToString("dd.MM.yyyy") + ".doc");

        HttpContext.Current.Response.ContentEncoding = System.Text.Encoding.UTF8;
        HttpContext.Current.Response.ContentType = "application/ms-word";
        HttpContext.Current.Response.Charset = "UTF-8";

      HttpContext.Current.Response.BinaryWrite(System.Text.Encoding.UTF8.GetPreamble()); 

        var oStringWriter = new StringWriter();
        var oHtmlTextWriter = new HtmlTextWriter(oStringWriter);

        gd.RenderControl(oHtmlTextWriter);
        HttpContext.Current.Response.Output.Write(oStringWriter.ToString());
        HttpContext.Current.Response.Flush();
        HttpContext.Current.Response.End(); 
```

但现在我必须遵循这个逻辑： - 对于网格中的每个字母，应该像这样创建一个带有标题的新表：

```
Table A:
 A124
 A256
 A756 
```

![在此处输入图像描述](../Images/5690cc1f3715901b32d10e3a2ff85678.png)

![在此处输入图像描述](../Images/53f985ef07e7dbc307fc3276f0a020f0.png)

*   每个新表都应该从一个新页面开始，如下所示：

    表 A: A124, A256, A756, //新页面

    表 B: B463, B978, //新页面

    表 D：D322 等

*   该word文档中的页面需要编号。

有没有办法在 c# 中编写代码来执行此操作，或者是否有一些库/插件可以完成此任务？

一些例子将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T12:16:59.970

您应该能够使用 Microsoft 的 OpenXML SDK 来实现这一点。

参考：http: [//msdn.microsoft.com/en-us/library/bb448854.aspx](http://msdn.microsoft.com/en-us/library/bb448854.aspx)

参考样本：

1.  [http://blogs.msdn.com/b/acoat/archive/2010/06/19/document-creation-and-conversion-with-the-openxml-sdk-and-sharepoint-2010-word-automation-services。 aspx](http://blogs.msdn.com/b/acoat/archive/2010/06/19/document-creation-and-conversion-with-the-openxml-sdk-and-sharepoint-2010-word-automation-services.aspx)
2.  [http://blogs.msdn.com/b/acoat/archive/2011/04/06/document-creation-and-conversion-with-the-openxml-sdk-and-sharepoint-2010-word-automation-services-第 2 部分.aspx](http://blogs.msdn.com/b/acoat/archive/2011/04/06/document-creation-and-conversion-with-the-openxml-sdk-and-sharepoint-2010-word-automation-services-part-2.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:24:33.497

您需要使用哪个版本的 Word？如果它是可以处理.docx 文件格式的版本，即2007 及更高版本，那么您可以直接生成这些文件。事实上，最简单的方法是在 Word 中创建一个 .docx 文件，用作一种模板，然后以编程方式操作该文件中的 xml。

有关详细信息，请参阅

*   [http://msdn.microsoft.com/en-us/magazine/cc163526.aspx](http://msdn.microsoft.com/en-us/magazine/cc163526.aspx)
*   [http://msdn.microsoft.com/en-us/library/system.io.packaging.aspx](http://msdn.microsoft.com/en-us/library/system.io.packaging.aspx)

# python - 使用时区信息正确解析日期字符串

> ID：10913986
> 
> 赞同：7
> 
> 时间：2012-06-06T12:12:53.323
> 
> 标签：python, datetime, timezone, datetime-parsing

我通过关键跟踪器 API 接收到这样的格式化日期字符串：“2012/06/05 17:42:29 CEST”

我想将此字符串转换为 UTC 日期时间对象，看起来 python-dateutil 无法识别该时区，pytz 也不知道它。

我担心我最好的选择是用 CET 替换字符串中的 CEST，但这感觉非常错误。有没有其他方法可以将夏令时字符串解析为我找不到的 UTC 日期时间对象？

```
pytz.timezone('CEST')
# -> pytz.exceptions.UnknownTimeZoneError: 'CEST'
dateutil.parser.parse("2012/06/05 17:42:29 CEST")
# -> datetime.datetime(2012, 6, 5, 17, 42, 29) 
```

编辑：再次考虑后减去一小时是完全错误的，因为相应的时区目前也是夏令时，解析的问题仍然存在

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T12:15:03.920

没有真正的`CEST`时区。根据您所在的地区使用`Europe/Paris`,`Europe/Berlin`或`Europe/Prague`（或另一个）：

```
>>> pytz.country_timezones('de')
[u'Europe/Berlin']

>>> pytz.country_timezones('fr')
[u'Europe/Paris'] 
```

它们（当前）是相同的，并且都指的`CEST`是夏天。

```
>>> dateutil.parser.parse("2012/06/05 17:42:29 CEST").astimezone(pytz.utc)
datetime.datetime(2012, 6, 5, 15, 42, 29, tzinfo=<UTC>) 
```

# iphone - AppStore 中的核心数据更新

> ID：10913990
> 
> 赞同：2
> 
> 时间：2012-06-06T12:13:10.140
> 
> 标签：iphone, core-data, ios5, core-data-migration

我正要更新我的一个应用程序。这个应用程序使用 Core Data 来保存用户输入的数据。

现在我想修复一些与 Core Data 完全无关的错误。

我该怎么做才能让用户在下载更新后获取他的数据？我不考虑轻量级迁移，因为我没有改变任何东西。我是否必须添加新的模型版本控制文件？- 我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:15:29.377

如果您根本没有更改您的核心数据模式，那么您无需做任何事情。它仍然可以毫无问题地读取旧数据文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:15:32.973

你不必做任何事情。如果模型和数据没有作为更新的一部分进行更新，并且您将用户的数据存储在文档目录中，那么您的应用程序的新版本将继续使用现有数据。

# css - 如何在css中居中滑块？

> ID：10913992
> 
> 赞同：1
> 
> 时间：2012-06-06T12:13:13.900
> 
> 标签：css, wordpress, slider, center

我在一个主题上安装了这个插件。这个主题有一个滑块，但我不喜欢它。所以我安装了这个。

[http://wordpress.org/extend/plugins/content-slide/](http://wordpress.org/extend/plugins/content-slide/)

我试过用这个

```
#wpcontent_slider_container{
position:relative;
margin: 0 auto;
} 
```

和这个

```
#wpcontent_slider_container{
position:relative;
margin-left:auto;
margin-right:auto;
} 
```

什么也没有发生。

我必须在div中放一些东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-16T20:17:37.630

我有同样的问题。这就是我解决它的方法：

```
#wpcontent_slider_container {
margin-left: auto !important;
margin-right: auto !important;
}

#wpcontent_slider {
/* Your styling here */
} 
```

如果没有“！重要”的东西，CSS 对我也不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T12:15:06.750

改变宽度

```
#wpcontent_slider_container{
    width: 500px;
    margin:0 auto;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T12:15:58.277

在`#wpcontent_slider_container's`父元素中添加

```
text-align:center; 
```

居中对齐你的`#wpcontent_slider_container`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T21:22:03.837

如果您知道滑块的宽度，那么当中心对齐很顽固时，这里有一个对我有用的小修复。

```
#sliderDiv{
   position:relative;
   left:50%;
   margin-left:-(half the width of the div);
  (ex. if div is at 500px it would be margin-left:-250px;)
 } 
```

它不漂亮，但它有效。不过，您可能必须隐藏外部容器的水平溢出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T12:16:29.663

```
#wpcontent_slider_container{
text-align: center;
} 
```

或使用`<center`> 标签

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-09T23:28:20.990

最后，我可以解决我网页中滑块 ubication 的问题。

只需修改`style.css`, `.main_img { float:left; margin:15px 10px 0 60px}`, 更改值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-19T06:04:58.833

在 auto !important 上使用 'margin-right' 和 'margin-left' 也对我有用。即使不使用 !important 命令，它实际上也可以工作。

# shell - 文件意外结束

> ID：10913996
> 
> 赞同：0
> 
> 时间：2012-06-06T12:13:28.170
> 
> 标签：shell, unix, gnuradio

我正在尝试修改 OSX 中的 .tcshrc 文件以包含用于安装 GNURadio 的 shell 环境变量。但是，它返回给我这样的错误消息

> “-bash：/Users/admin/.tcshrc：第 22 行：语法错误：文件意外结束”

修改后的tcshrc文件如下

```
 if (-r /opt/local/bin/port) then
      setenv LDFLAGS "-L/opt/local/lib ${LDFLAGS}"
      setenv PATH ${HOME}/bin:/opt/local/bin:/opt/local/sbin:${PATH}
      setenv MANPATH /opt/local/share/man:${MANPATH}
      setenv INFOPATH /opt/local/share/info:${INFOPATH}
      setenv PKG_CONFIG_PATH /opt/local/lib/pkgconfig:${PKG_CONFIG_PATH}
  endif

  # Gnuradio source directory (set up for installing gnuradio in $GR/local/)
  setenv GR $HOME/gnuradio
  setenv GR_INSTALL ${GR}/local
  setenv LDFLAGS "-L${GR_INSTALL}/lib ${LDFLAGS}"
  setenv PKG_CONFIG_PATH ${GR_INSTALL}/lib/pkgconfig:${PKG_CONFIG_PATH}
  setenv DYLD_LIBRARY_PATH ${GR_INSTALL}/lib:${DYLD_LIBRARY_PATH}

  # Set up PYTHON variables
  setenv PYTHON_CMD python
  setenv PYTHON_VERSION `${PYTHON_CMD} -V |& sed -e 's@\.@ @2' | awk '{ print $2 }'`
  setenv PYTHON_ROOT `which ${PYTHON_CMD} | sed -e s@/bin/${PYTHON_CMD}@@g`
  setenv PYTHONPATH ${GR_INSTALL}/lib/python${PYTHON_VERSION}/site-packages:${PYTHON_ROOT}/lib/python${PYTHON_VERSION}/site-packages 
```

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:19:32.247

您希望 BASH 读取和处理一组用于不同 shell 的指令！TCSH 有一种类似 c 的编程语言，而 BASH 和 SH 使用一些类似 ALGOL-68 的模式（我认为）。Bash 根本无法处理您的脚本。

为您的 schript (tcsh/csh) 使用正确的 shell 或将您的脚本重写为 bash 语法。

```
if [ -r /opt/local/bin/port ]
  then
      export LDFLAGS="-L/opt/local/lib ${LDFLAGS}"
      export PATH=${HOME}/bin:/opt/local/bin:/opt/local/sbin:${PATH}
      export MANPATH=/opt/local/share/man:${MANPATH}
      export INFOPATH=/opt/local/share/info:${INFOPATH}
      export PKG_CONFIG_PATH=/opt/local/lib/pkgconfig:${PKG_CONFIG_PATH}
  fi

  # Gnuradio source directory (set up for installing gnuradio in $GR/local/)
  export GR=$HOME/gnuradio
  export GR_INSTALL=${GR}/local
  export LDFLAGS="-L${GR_INSTALL}/lib ${LDFLAGS}"
  export PKG_CONFIG_PATH=${GR_INSTALL}/lib/pkgconfig:${PKG_CONFIG_PATH}
  export DYLD_LIBRARY_PATH=${GR_INSTALL}/lib:${DYLD_LIBRARY_PATH}

  # Set up PYTHON variables
  export PYTHON_CMD=python
  export PYTHON_VERSION=`${PYTHON_CMD} -V 2>&1 | sed -e 's@\.@ @2' | awk '{ print $2 }'`
  export PYTHON_ROOT=`which ${PYTHON_CMD} | sed -e s@/bin/${PYTHON_CMD}@@g`
  export PYTHONPATH=${GR_INSTALL}/lib/python${PYTHON_VERSION}/site-packages:${PYTHON_ROOT}/lib/python${PYTHON_VERSION}/site-packages 
```

# git - 当您需要切换机器但还没有准备好提交时，正确的工作流程是什么？

> ID：10913997
> 
> 赞同：1
> 
> 时间：2012-06-06T12:13:29.227
> 
> 标签：git, version-control

我在两台机器上工作，一台在实验室，一台在家里。我经常在实验室开始工作，并想在家里继续，但代码不是我想提交的状态。用 git 处理这种情况的正确工作流程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:18:08.500

我只是从家里通过 SSH 连接到实验室机器。xterm 中的命令行看起来与 xterm 中通过 ssh 的命令行相同。

还记得使用[GNU screen](http://www.gnu.org/software/screen/)或[tmux](http://tmux.sourceforge.net/)。这样，您可以继续您的编辑器会话，将编译结果“留在屏幕上”以供将来查看等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:19:06.637

一种解决方案可能是在您在计算机之间进行开发时创建另一个分支，并且仅在您提交实际代码时将其合并到主干中。这样，您可以提交将代码推送到存储库并在机器之间可用，但仍将其与“完成”代码分开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T12:16:02.877

您只需提交到开发分支并对其进行处理，直到事情准备就绪，然后将其提交到生产分支......

# backbone.js - 骨干关系 fetchRelated 不发送请求

> ID：10913998
> 
> 赞同：3
> 
> 时间：2012-06-06T12:13:31.420
> 
> 标签：backbone.js, fetch, backbone-relational

我正在使用带有 Rails 3.2 后端的主干.js 和主干关系 0.5.0。我有一个有很多笔记的卡片模型。

这是我的 JS 模型和集合：

```
Workflow.Collections.Cards = Backbone.Collection.extend({ 
  model: Workflow.Models.Card,
  url: '/cards'
});

Workflow.Models.Card = Backbone.RelationalModel.extend({
  modelName   : 'card',
  urlRoot     : '/cards',

  relations: [
  {
    type: Backbone.HasMany,
    key: 'notes',
    relatedModel: 'Workflow.Models.Note',
    collectionType: 'Workflow.Collections.Notes',
    includeInJSON: false,
    reverseRelation: {
      key: 'card',
      includeInJSON: 'id'
    }
  }]

});

Workflow.Collections.Notes = Backbone.Collection.extend({
  model: Workflow.Models.Note,
  url: '/cards/74/notes' // intentionally hard-coded for now
});

Workflow.Models.Note = Backbone.RelationalModel.extend({
  modelName   : 'note',
  urlRoot     : '/notes'
}); 
```

正常提取效果很好，但是当我在控制台中尝试 fetchRelated 时，我得到一个空数组：

```
card = new Workflow.Models.Card({id: 74}) // cool
card.fetch() // hits the sever with GET "/cards/74" - works great
card.fetchRelated('notes') // [] - didn't even try to hit the server 
```

奇怪的是，这行得通：

```
card.get('notes').fetch() // cool - GET "/cards/74/notes" 
```

我*可以*使用该方法并解析响应文本，但感觉真的很脏。

有人知道我在这里缺少什么吗？

先谢谢了，这个真的很折磨我！

斯图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:48:46.163

您应该`Card`使用`Note`ids 数组创建：`card = new Workflow.Models.Card({id: 74, notes: [74, 75]});`并相应地更改`url`方法`Notes`：

```
Workflow.Collections.Notes = Backbone.Collection.extend({
  model: Workflow.Models.Note
});

Workflow.Models.Note = Backbone.RelationalModel.extend({
  modelName   : 'note',
  urlRoot     : function () {
    return this.get('card').url() + '/notes';
}
});

card = new Workflow.Models.Card({id: 74, notes: [74, 75]});
card.fetchRelated('notes'); 
```

[http://jsfiddle.net/theotheo/5DAzx/](http://jsfiddle.net/theotheo/5DAzx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T23:41:20.537

我应该在不久前发布我的解决方案 - 可能有更好的方法，但这是我采用的惯例：

以下所有代码都在**卡片视图**中（显示笔记的地方）。

首先，我将一个`renderNotes`方法绑定到`'reset'`卡片笔记集合上的事件：

```
initialize: function () {
    _.bindAll(this);

    this.model.get('notes').on('reset', this.renderNotes);

    var self = this;
    this.model.get('notes').on('add', function(addedNote, relatedCollection) {
      self.renderNote(addedNote);
    });
  } 
```

我还绑定到该`'add'`集合上以调用单数`renderNote`.

renderNotes 和 renderNote 方法的工作方式如下：

```
renderNotes: function () {
    if (this.model.get('notes')) {
      this.model.get('notes').each(this.renderNote);
    }
  },

  renderNote: function (note) {
    var noteView = new Workflow.Views.Note({ model: note });
    this.$('.notes').append(noteView.render().el);
  }, 
```

然后，拼图的最后一块是实际打开服务器以获取卡片的注释（这将反过来触发`'reset'`我在上面绑定的事件）。我在卡片视图的`render`方法中这样做：

```
render: function () {
    // render all of the eager-loaded things
    this.model.get('notes').fetch();
    return this;
  }, 
```

由于@user1248256 好心地帮助我在我的 OP 的评论中解决问题，我的困惑主要在于我希望`fetchRelated`拉下延迟加载的记录——实际上并非如此。

作为旁注，这个视图实际上是一个模式，可以打开和关闭（从页面中删除）。为了防止[这篇优秀文章](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFEQFjAA&url=http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/&ei=Up8EULXmBe7omAXmm_2kBg&usg=AFQjCNEP8_EpNm9a5ygpvsRfviq-izWdIA&sig2=xXQ3eYohyrSSZ0rrhYz8jQ)中描述的僵尸事件问题，我还手动解除了上述事件的绑定。

# java - 具有复杂键的地图的 JSON 表示

> ID：10913999
> 
> 赞同：19
> 
> 时间：2012-06-06T12:13:33.097
> 
> 标签：java, javascript, json, serialization

我想将以下（java）数据结构序列化为 JSON：

```
class Machine {
  String name;
  Map<PartDescriptor, Part> parts;
}

class PartDescriptor {
  String group;
  String id;

  hashCode()
  equals()
}

class Part {
  String group;
  String id;
  String description;
  String compat;
  ...
  ...
} 
```

one 的 JSON 表示形式是`Machine`什么？

另外（*可选*），将我指向一个 JSON 到 Java 序列化器/反序列化器，它将支持您的表示

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-06T12:21:49.537

我会做类似的事情：

```
{
  "name": "machine name",
  "parts": [
     { "group": "part group", "id": "part id", "description": "...", ... },
     { "group": "part group", "id": "part id", "description": "...", ... },
     // ...
  ]
} 
```

如果每个 Part 的“id”是唯一的，那么“parts”属性可以是对象而不是数组，每个部分的“id”作为键。

```
{
  "name": "machine name",
  "parts": {
     "1st part id": { "group": "part group", "description": "...", ... },
     "2nd part id": { "group": "part group", "description": "...", ... },
     // ...
  }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-17T03:22:19.577

您不需要注释或自定义序列化程序。假设您已经为`Part`and`Machine`中的所有字段设置了 getter，那么真正缺少的只是`toString()`on `PartDescriptor`。如果出于某种原因，您没有 getter 函数，则需要对感兴趣的字段进行注释，`@JsonProperty`以便 Jackson 知道要包含在序列化输出中的字段。但是，最好（也更容易）简单地创建 getter。

`toString()`on`PartDescriptor`应该返回您要在映射中使用的键。正如另一个答案所暗示的，您可以简单地连接相关字段：

```
@Override
public String toString() {
    return group + "|" + id;
} 
```

然后，当您尝试`Machine`用 Jackson's序列化 a 时，您会神奇地得到这种形式`ObjectMapper`：

```
{
  "name" : "Toaster",
  "parts" : {
    "Electrical|Descriptor1" : {
      "group" : "Electrical",
      "id" : "Part1",
      "description" : "Heating Element",
      "compat" : "B293"
    },
    "Exterior|Descriptor2" : {
      "group" : "Exterior",
      "id" : "Part2",
      "description" : "Lever",
      "compat" : "18A"
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-06T12:22:16.603

我会这样做。`parts`顶级对象的键将`JSONArray`是`JSONObject`具有`key`'s 和`value`'s 的一个。the`key`将是您的对象，`PartDescriptor`而 the`value`将是您的`Part`.

```
{
    "name":"theName",
    "parts":[
        {
            "key":{
                       "group":"theGroup",
                       "id":"theId"
                  },
            "value":{
                       "group":"theGroup",
                       "id":"theId",
                       "description":"theDescription",
                       "compat":"theCompat",
                       ...
                    }
        },
        ...
    ]
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T12:42:08.700

假设 group+id 给出了一个唯一的组合，并且 ":" 是一个允许的分隔符：

```
{  
   "name": "machine name",
   "parts": { 
               "somegroup:01465": {
                                    "group":"somegroup",
                                    "id": "01465",
                                    ...
                                  },
               "othergroup:32409": {
                                     "group":"othergroup",
                                     "id": "32409",
                                     ...
                                   }

            }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-16T13:04:23.920

JSON 要求密钥是一个字符串，因此如果您确实需要将数据表示为键控（例如，您不想使用数组，就像 Pointy 的回答中那样，因为您想*在合同*中保证它没有具有相同键的重复条目），那么您需要自行决定将复杂键序列化为字符串的方法。

`group1|part1`如果使用使用分隔符连接的方法（例如），需要注意两点：

*   您需要一个本身不能出现在关键部分中的分隔符，或者在序列化时需要对其进行转义（例如将其加倍）。这防止的问题可能很少遇到，但如果要以可重用的通用代码编写，则最好根据墨菲定律保证它 - 如果出现问题，最终会出现问题。
*   为了真正防止“具有相同复合键的多个值”，您需要保持键的相同顺序，例如按字母顺序对键进行排序

鉴于：

> 另外（可选），将我指向一个 JSON 到 Java 序列化器/反序列化器，它将支持您的表示

一个值得注意的例子可能是[Gson](https://github.com/google/gson) - Google 的 Java 的 JSON 序列化程序库 - 它使用这种表示：

```
{
     "(group1,part1)": { description: ... },
     "(group1,part2)": { description: ... },
     "(group2,part1)": { description: ... },
     ...
     "(groupX,partX)": {description: ... },
} 
```

注意：该功能需要通过设置启用（[为了向后兼容](https://github.com/google/gson/issues/210#issuecomment-406734879)[`enableComplexMapKeySerialization`](https://javadoc.io/doc/com.google.code.gson/gson/2.6/com/google/gson/GsonBuilder.html)默认关闭）

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2013-08-16T16:31:53.553

可以呈现为下表：

```
<table class="machine" name="">
   <tr>
     <th class="partdescriptor" colspan="2">
     <th class="part" colspan="4">
   </tr>
   <tr>
     <td class="partdescriptor group"></td>
     <td class="partdescriptor" id=""></td>
     <td class="part group"></td>
     <td class="part" id=""></td>
     <td class="description"></td>
     <td class="compat"></td>
    </tr>
 </table> 
```

由于缺少通过属性的元数据，标记分解为以下 JSON 对象：

```
{
    "HTMLTableElement": 
    [
        {
            "classname": "machine",
            "name": ""
        },
        {
            "HTMLTableRowElement": 
            [
                {
                    "HTMLTableCellElement": {"classname":"partdescriptor","colspan":2}
                },
                {
                    "HTMLTableCellElement": {"classname":"part","colspan":4}
                }
            ]
        },
        {
            "HTMLTableRowElement": 
            [
                {
                    "HTMLTableCellElement": {"classname":"partdescriptor group"}
                },
                {
                    "HTMLTableCellElement": {"classname":"partdescriptor","id":""}
                },
                {
                    "HTMLTableCellElement": {"classname":"part","id":""}
                },
                {
                    "HTMLTableCellElement": {"classname":"description"}
                },
                {
                    "HTMLTableCellElement": {"classname":"compat"}
                }
            ]
        }
    ]
} 
```

或者，Unicode 可以简化映射：

```
{"name":"","[{\u0022group\u0022:\u0022\u0022},{\u0022id\u0022:\u0022\u0022}]":
 [
 {"group":""},
 {"id":""},
 {"description":""},
 {"compat":""}
 ]
} 
```

可以字符串化的：

```
JSON.stringify({"name":"","[{\u0022group\u0022:\u0022\u0022},{\u0022id\u0022:\u0022\u0022}":[{"group":""},{"id":""},{"description":""},{"compat":""}]}) 
```

生产：

```
"{\"name\":\"\",\"[{\\\"group\\\":\\\"\\\"},{\\\"id\\\":\\\"\\\"}]\":[{\"group\":\"\"},{\"id\":\"\"},{\"description\":\"\"},{\"compat\":\"\"}]}" 
```

可以解析：

```
JSON.parse("{\"name\":\"\",\"[{\\\"group\\\":\\\"\\\"},{\\\"id\\\":\\\"\\\"}]\":[{\"group\":\"\"},{\"id\":\"\"},{\"description\":\"\"},{\"compat\":\"\"}]}") 
```

产生一个对象字面量：

```
({name:"", '[{"group":""},{"id":""}]':[{group:""}, {id:""}, {description:""}, {compat:""}]}) 
```

**参考**

*   [HTMLTableRowElement](http://html5index.org/DOM%20-%20HTMLTableRowElement.html)

*   [HTMLTableCellElement](http://html5index.org/DOM%20-%20HTMLTableCellElement.html)