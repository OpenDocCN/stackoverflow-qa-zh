# StackOverflow 问答 10517000-10517999

# jsf - 如何用 WEB-INF/lib 中的 jar 覆盖服务器 jar 或使用它们？

> ID：10517000
> 
> 赞同：1
> 
> 时间：2012-05-09T13:20:26.560
> 
> 标签：jsf, jsf-2, jboss

我有 Web 应用程序，它应该使用 WEB-INF/lib 中包含的 JSF 2.0 库......但它没有......而不是我得到异常，因为我的服务器（JBoss 4.2）也提供 JSF 库......

如何强制我的应用程序使用 WEB-INF/lib 中的 .jar？

**注意**：当我从服务器中删除 JSF 库时，我的应用程序会正常运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:05:26.553

告诉 JBoss 你的 WAR 已经通过 webapp 的`web.xml`.

```
<context-param>
    <param-name>org.jboss.jbossfaces.WAR_BUNDLES_JSF_IMPL</param-name>
    <param-value>true</param-value>
</context-param> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:23:47.070

为什么不能使用这些 JAR 的服务器版本？

您应该使用与您部署到的服务器所使用的相同版本的 JAR 来编写和测试您的应用程序。同步....我会升级 JBOSS 或降级您的应用程序。

但是，如果您必须这样做，也许这份文档可以告诉您如何：

[http://www.datadisk.co.uk/html_docs/java_app/jboss5/jboss5_deployment.htm](http://www.datadisk.co.uk/html_docs/java_app/jboss5/jboss5_deployment.htm)

# php - Restler 自定义路线

> ID：10517005
> 
> 赞同：0
> 
> 时间：2012-05-09T13:20:49.370
> 
> 标签：php, url-routing, restler

我们正在探索 Restler 框架。我们需要的是一个自定义路由，例如：

```
[host]/:sessionid/{class}/{method}?param1=x&param2=y 
```

例如类`Settings`中的方法`Game`：

```
<?php
class Game {
    function settings($session, $sound=TRUE, $music=TRUE){
        //
    }
}
?> 
```

应该映射到`http://hostname/12435635/game/settings?sound=x&music=y`

我们已经设法通过破解`routes.php`文件来实现它，但是由于文件是自动生成的，所以这个想法不是很好。那么，是否可以在不破解 Restler 的源代码或修改`routes.php`文件的情况下创建此类路由？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T15:02:19.203

第一步是从 URI 中删除类名。可以通过修改`addAPIClass`语句来实现

```
$r->addAPIClass('Game', ''); 
```

这会改变自动生成的 uri 结构，如下所示

```
http://hostname/settings/12435635/?sound=x&music=y 
```

下一步是通过在 api 方法中添加 PHPDoc 注释来手动指定路由，如下所示

```
<?php
class Game {

    /**
    * @url GET /:session/game/settings
    */
    function settings($session, $sound=TRUE, $music=TRUE){
        //
    }
} 
```

这将映射到

```
http://hostname/12435635/game/settings?sound=x&music=y 
```

`routes.php`每次在生产模式下生成时都会添加此路线:)

您可以添加更多 @url 注释以创建多个路由到同一方法

# asp.net-mvc-3 - 无法访问从控制器返回的 json 数据

> ID：10517011
> 
> 赞同：0
> 
> 时间：2012-05-09T13:20:52.283
> 
> 标签：asp.net-mvc-3, jquery-ui, razor, modal-dialog

我有一个带有两个模态弹出对话框表单的表单，在主表单中有一个下拉列表，其中有一个添加新元素的按钮，当我单击该按钮时，我得到了模态表单，这是提交对话框表单的按钮 Ok ：

```
"Ok": function () {
                var dialog = $(this);
                var form = dialog.find('input:text, select');
                $.post('/Demande/CreateDemande', $(form).serialize(), function (data) {
                    {
                        $('#IDDEMANDE').append($('<option selected="selected"></option>').val(data.IDDEMANDE).html(data.NUM_LETTRE));
                    };
                    dialog.dialog('close');
                    $('#IDDEMANDE').attr('disabled', 'disabled');
                }, "json")
            } 
```

不幸的是，对话框没有关闭，也没有通过提交按钮的功能（数据）。

这是我的控制器

```
 public JsonResult CreateDemande(DEMANDE demande)
    {
        if (ModelState.IsValid)
        {
            db.DEMANDE.AddObject(demande);
            db.SaveChanges();
            //var dem1 = db.DEMANDE.Select(m => m.IDDEMANDE).LastOrDefault();
            return Json(demande, JsonRequestBehavior.AllowGet);
        }

        var dem = db.DEMANDE.LastOrDefault();
        return Json(dem, JsonRequestBehavior.AllowGet);

    } 
```

先感谢您

# android - Android 获取 JNI 库目录

> ID：10517016
> 
> 赞同：3
> 
> 时间：2012-05-09T13:21:11.047
> 
> 标签：android, android-ndk, shared-libraries

我有一个应用程序，它有一个共享库和一个使用共享库的小型可执行文件。

小可执行文件（~2kB）在资产中，我将它写入缓存目录，可以通过调用`Context.getCacheDir()`. `LD_LIBRARY_PATH=/data/data/my.app.package/lib`在使用`ProcessBuilder`.

1.  有没有更好的方法来设置库路径？

2.  有没有办法在不硬编码的情况下获取库目录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T14:33:25.130

通过 ProcessBuilder.environment() 设置库路径对我来说似乎是合理的，您可以通过调用 Context.getApplicationInfo() 来获取库目录：

```
ApplicationInfo info = getApplicationInfo();
Log.i(TAG, "native library dir = " + info.nativeLibraryDir); 
```

# html - 如何使用 knitr 导入本地图像进行降价

> ID：10517020
> 
> 赞同：39
> 
> 时间：2012-05-09T13:21:35.170
> 
> 标签：html, image, markdown, figure, knitr

我在本地目录中有一个外部创建的 png 图像，我想使用 knitr 将其导入到报告中。最终的目标文件类型是 html。当我用 R 代码创建我自己的数字时，我可以毫不费力地让它们出现，但我不知道我认为这是一个更简单的问题。

当我在它的时候，我将如何导入一个我有一个 url 的图形？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-09T18:33:09.690

如果您已经有一个本地图像，您可以使用 HTML 或 markdown 语法将其包含在您的文档中。[HTML 语法](http://www.w3schools.com/html/html_images.asp)是`<img src="path/to/your/image" />`，[markdown](http://daringfireball.net/projects/markdown/syntax#img)是`![title](path/to/your/image)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-19T06:12:26.037

您可以使用R Markdown 中的**knitr::include_graphics()**在knitted html 中包含图像。

```
knitr::include_graphics(rep('path_of_image.png')) 
```

确保在路径中使用**“/”而不是“\”。**

# delphi - Delphi 应用程序和 TSAWARE 标头标志

> ID：10517022
> 
> 赞同：8
> 
> 时间：2012-05-09T13:21:49.370
> 
> 标签：delphi, remote-desktop, terminal-services

这个问题是否也适用于终端服务器上运行的 Delphi 应用程序？

正如 MSDN 文章“[在 RD 会话主机服务器上运行的 Office 2007 或 Office 2003 应用程序可能会在 Windows Server 2008 R2 中意外关闭](http://support.microsoft.com/kb/2498855/en-us?sd=rss&spid=1163)”解释

> 由于 Tsappcmd.dll 组件会出现此问题。此组件对终端服务器不知道的应用程序的导入地址表 (IAT) 进行更改，以防止病毒或恶意软件恶意挂接应用程序。因此，由于加载模块的顺序，应用程序可能会遇到临时内存损坏。Office 2007 和 Office 2003 不包含 TSAWARE 标头标志。此标志通知服务器应用程序可识别终端服务器。

用户环境（Windows Server 2008 R2 Service Pack 1）中的某些 Delphi 2009 应用程序经常挂起或崩溃。我正在寻找可能的原因，因为这些挂起/崩溃无法重现。

MSDN文章似乎首先适用于Office产品，这是正确的还是-**注意，这是基本问题**-Tsappcmd.dll是否也修改了非Office程序，因此Delphi应用程序可能会出现错误？（当然，如果丢失的 TSAWARE 标志无害，我更愿意让 Delphi 应用程序保持不变）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T17:58:39.660

是的，Tsappcmd.dll 将影响所有在 PE 标头中没有 TSAWARE 标志的程序。然而，这并不意味着所有这些应用程序都会受到此特定错误的影响。但是您可以通过设置 TSAWARE 标志（请参阅 TOndrej 提供给我的博客的链接）或通过设置知识库文章中提到的注册表项来轻松测试这一点。

PS：说它是防病毒的解释似乎是一个虚假的解释，这个机制是出于应用程序兼容性的原因而引入的......

# eclipse - 在 Eclipse 中清理项目的快捷方式？

> ID：10517028
> 
> 赞同：54
> 
> 时间：2012-05-09T13:22:01.857
> 
> 标签：eclipse

清理项目有什么捷径吗？或者我们可以使用以下方法创建清理项目的快捷方式：

> 窗口--> 首选项--> Java--> 编辑器--> 模板？

如果是，如何？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-09T13:45:06.433

要清理 android 项目：

```
Window -> Preferences -> General -> Keys (Ctrl+Shift+L) 
```

在类型过滤器文本中写入 **`build clean`**。在那里你可以绑定密钥，例如。 **`Ctrl+Shift+L`**.

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-01-04T09:31:23.167

这很容易：

1.  按 `ALT` + `P`+ `N`。
2.  释放`ALT`
3.  `Enter`.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-09T13:26:33.390

窗口 -> 首选项 -> 常规 -> 键 (Ctrl+Shift+L+L)

在*类型 filter text*中，键入 clean。您将拥有可能的命令，并且可以分配您想要的任何快捷方式。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-06-19T19:09:26.097

正如乔治所说，这真的很容易。

只需注意点击时出现的下划线 `ALT` 。然后，如果您遵循这些下划线，请点击`P`然后`N`。

注意：最后不必 `ALT` 按下或敲击`Enter`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-02T16:46:38.870

在 Preferences/General/Keys 中寻找“Build Clean”。您可以为该命令分配绑定。在 Mac OS X Kepler 上为我工作。

# jquery - jQuery悬停无法正常工作

> ID：10517033
> 
> 赞同：0
> 
> 时间：2012-05-09T13:22:29.493
> 
> 标签：jquery

我不知道这段代码有什么问题。左悬停工作正常，但右悬停不工作。我的意思是，如果您将鼠标悬停在“L”上，然后将鼠标移至“R”，则它不起作用<。

这是我的 JS 小提琴：

[http://jsfiddle.net/neoragex/npnHw/5/](http://jsfiddle.net/neoragex/npnHw/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:26:32.237

它只是干扰了“结果”标签。

在这里修复：http: [//jsfiddle.net/npnHw/6/](http://jsfiddle.net/npnHw/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:26:36.543

这在 Chrome 中对我有用。也许您使用的是其他浏览器？

# perl - 如何分离 CGI 中的线程？

> ID：10517034
> 
> 赞同：1
> 
> 时间：2012-05-09T13:22:38.433
> 
> 标签：perl, background, cgi, fork, detach

我有一个 Perl 插件需要一段时间才能完成操作。该插件通常通过网络从一个 CGI 界面启动，该界面应该在后台发送它并立即打印一条消息。不幸的是，我找不到这样做的方法。我的意思是 CGI 正确启动插件，但它也等待它完成，我不想发生这种情况。我尝试了*&*，*fork*，*detach*，甚至[Proc::Background](http://search.cpan.org/~bzajac/Proc-Background/lib/Proc/Background.pm)，到目前为止还没有运气。我很确定这个问题与 CGI 有关，但我想知道为什么，如果可能的话，解决这个问题。这是我尝试过的代码，请记住，所有方法都可以在控制台中正常工作，只是 CGI 会产生问题。

```
# CGI
my $cmd = "perl myplugin.pl";

# Proc::Background
my $proc = Proc::Background->new($cmd);
# The old friend &
system("$cmd &");
# The more complicated fork
my $pid = fork;
if ($pid == 0) {
    my $launch = `$cmd`;
    exit;
}
# Detach

print "Content-type: text/html\n\n";
print "Plugin launched!"; 
```

我知道 StackOverflow 上有一个[类似的问题](https://stackoverflow.com/questions/45792/how-can-i-fork-a-background-processes-from-a-perl-cgi-script-on-windows)，但如您所见，它并不能解决我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:13:55.527

这基本上是 pilcrow 答案中 shell 在幕后所做的 Perl 实现。它有两个潜在的优势，它不需要使用 shell 来调用你的第二个脚本，并且它在 fork 失败的罕见情况下提供了更好的用户反馈。

```
my @cmd = qw(perl myplugin.pl);

my $pid = fork;
if ($pid) {
    print "Content-type: text/html\n\n";
    print "Plugin launched!";
}
elsif (defined $pid) {
    # I skip error checking here because the expectation is that there is no one to report the error to.
    open STDIN,  '<', '/dev/null';
    open STDOUT, '>', '/dev/null'; # or point this to a log file
    open STDERR, '>&STDOUT';
    exec(@cmd);
}
else {
    print "Status: 503 Service Unavailable\n";
    print "Content-type: text/html\n\n";
    print "Plugin failed to launch!";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T14:25:41.347

让您的子进程关闭或删除其继承的标准输出和标准错误，以便 Apache 知道它可以自由响应客户端。请参阅 merlyn 关于该主题的[文章](http://www.stonehenge.com/merlyn/LinuxMag/col39.html)。

例子：

```
system("$cmd >/dev/null 2>&1 &"); 
```

虽然我看到不寒而栗`system("$cmd ...")`。

# php - 获取给定输入的月份从一周中的哪一天开始

> ID：10517035
> 
> 赞同：-1
> 
> 时间：2012-05-09T13:22:45.000
> 
> 标签：php, date, strtotime

我有一个函数，它定义了当月从一周中的哪一天开始：

```
public function firstDayOfMonth()
    {
        $day =  (int) date("w", strtotime(date('m').'/01/'.date('Y').' 00:00:00'));
        return $day;
    } 
```

如果我给它输入，例如“六月”，我将如何更改上述内容，以使我能够获得该月开始的星期几。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:28:52.903

您可以将代码简化为：

```
$month = 'June';
$day = (int) date('w', strtotime($month)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:35:09.190

```
public function firstDayOfMonth($month) {
    $day =  (int) date("w", strtotime($month . ' 01,' . date('Y') . ' 00:00:00'));
    return $day;
} 
```

# logging - Mule 3.2.1 CE：从输入 XML 中提取一个值并记住它以供以后使用

> ID：10517037
> 
> 赞同：0
> 
> 时间：2012-05-09T13:22:50.393
> 
> 标签：logging, xpath, mule

我正在尝试使用 xpath 从传入的 SOAP 请求中提取一个值，但由于某种原因，Mule 不会将其识别为 xml。在这里的代码示例中，我只是想记录信息，我怀疑 Mule 只是将 Mule 消息转换为字符串，这会导致类似 "[B4FEfea"; toString() 的标准输出。并且 xpath 表达式在那个上失败了。

流程本身工作正常，我可以从 SOAP-UI 发送一个请求，并且在没有记录器组件的情况下返回一个响应，但在响应内部我还想添加一部分输入，但失败了。

这是流程：

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:mulexml="http://www.mulesoft.org/schema/mule/xml" xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" xmlns:core="http://www.mulesoft.org/schema/mule/core" xmlns:file="http://www.mulesoft.org/schema/mule/file" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="CE-3.2.1" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/xml http://www.mulesoft.org/schema/mule/xml/current/mule-xml.xsd 
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd ">
    <mulexml:namespace-manager includeConfigNamespaces="false">  
        <mulexml:namespace prefix="soapenv" uri="http://schemas.xmlsoap.org/soap/envelope/"/>  
        <mulexml:namespace prefix="mob" uri="http://mobistar.be/spellchecker/"/> 
    </mulexml:namespace-manager>

    <flow name="spellcheckerFlow2" doc:name="spellcheckerFlow2" processingStrategy="synchronous">
        <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" path="spellcheck" contentType="text/xml" doc:name="SOAP Spell check"/>
        <logger message="#[xpath://mob:Text]" level="INFO" doc:name="Logger"/>
        <mulexml:xslt-transformer maxIdleTransformers="2" maxActiveTransformers="5" xsl-file="E:\Projects\Mobistar\Mule\spellchecker\src\main\resources\Request2GoogleAPI.xslt" doc:name="XSLT"/>
        <response>
            <mulexml:xslt-transformer maxIdleTransformers="2" maxActiveTransformers="5" xsl-file="E:\Projects\Mobistar\Mule\spellchecker\src\main\resources\GoogleAPI2Response.xslt" doc:name="XSLT"/>
        </response>
        <http:outbound-endpoint exchange-pattern="request-response" host="www.google.com" port="80" path="tbproxy/spell?lang=en" contentType="text/xml" doc:name="Google API"/>
    </flow>
</mule> 
```

我发送的请求是这样的：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:spel="http://mobistar.be/spellchecker/">
   <soapenv:Header/>
   <soapenv:Body>
      <spel:CheckSpellingRequest>
         <spel:Text>Please test this blabla</spel:Text>
      </spel:CheckSpellingRequest>
   </soapenv:Body>
</soapenv:Envelope> 
```

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T23:48:43.780

似乎 XPath 不正确，您应该尝试

/soapenv:信封/soapenv:正文/拼写:CheckSpellingRequest/拼写:文本

如果您想存储一个值以供以后使用，您可以使用消息属性：

存储属性：

```
<message-properties-transformer scope="session">    
<add-message-property key="incomingText"
    value="#[xpath://soapenv:Envelope/soapenv:Body/spel:CheckSpellingRequest/spel:Text]" />
</message-properties-transformer> 
```

读取属性：

```
<logger message="#[header:session: incomingText]" level="INFO" doc:name="Logger"/> 
```

# javascript - 防止滚动冒泡

> ID：10517038
> 
> 赞同：10
> 
> 时间：2012-05-09T13:22:53.640
> 
> 标签：javascript, jquery, css, scroll, event-bubbling

如何防止滚动冒泡？

以下示例不起作用：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Scroll Bubbling</title>
        <style>
            #menu {
                width: 80px;
                height: 150px;
                background: red;
                overflow: auto;
            }
        </style>
        <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
        <script type="text/javascript">
            function isScrollOnBound( scrollContainer ) {
                if ( $( scrollContainer ).scrollTop() === 0 || 
                     $( scrollContainer ).scrollTop() + $( scrollContainer ).innerHeight() >= $( scrollContainer )[0].scrollHeight ) {
                    return true;
                } else {
                    return false;
                }
            }

            $(function() {                  
                $( '#menu' ).on( 'scroll', function(e) {
                    if ( isScrollOnBound( this ) ) {
                        e.stopPropagation();
                    }                   
                });

                $( window ).on( 'scroll', function(e) {
                    alert( 'stopPropagation not working' );
                });                 
            });     
        </script>
    </head> 
    <body>  
        page 1<br />page 2<br />page 3<br />page 4<br />page 5<br />page 6<br />page 7<br />page 8<br />page 9<br />page 10<br />page 11<br />page 12<br />page 13<br />page 14<br />page 15<br />page 16<br />page 17<br />page 18<br />page 19<br />page 20<br />page 21<br />page 22<br />page 23<br />page 24<br />page 25
        <div id="menu">
            menu 1<br />menu 2<br />menu 3<br />menu 4<br />menu 5<br />menu 6<br />menu 7<br />menu 8<br />menu 9<br />menu 10
        </div>
        page 26<br />page 27<br />page 28<br />page 29<br />page 30<br />page 31<br />page 32<br />page 33<br />page 34<br />page 35<br />page 36<br />page 37<br />page 38<br />page 39<br />page 40<br />page 41<br />page 42<br />page 43<br />page 44<br />page 45<br />page 46<br />page 47<br />page 48<br />page 49<br />page 50
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T10:16:42.320

[这就是](https://stackoverflow.com/questions/1459676/prevent-scroll-bubbling-from-element-to-window)为什么您尝试做的事情不起作用的原因。这是不应该的。

我遇到了[一种可靠的方法](https://stackoverflow.com/questions/5802467/prevent-scrolling-of-parent-element)来实现我猜你想要的。

## 使用[Brandon Aaron 的插件](http://brandonaaron.net/code/mousewheel/docs)

[示例](http://jsfiddle.net/2DwyH/)| 代码

```
var menu = $('#menu')

menu.on('mousewheel', function(e, d) {
    if((this.scrollTop === (menu[0].scrollHeight - menu.height()) && d < 0) || (this.scrollTop === 0 && d > 0)) {
        e.preventDefault();
    }
}); 
```

[注意：它在 IE 中也可以工作，只是当 JSFiddle 包含该插件时，IE 会返回一个 mime 不匹配错误。IE很烂。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:15:58.670

您需要绑定`touchmove`到`document`(我认为) 和 return `false`，这意味着什么都不做。仅在需要时`div`绑定它（在滚动时），然后在滚动完成时解除绑定。

当我不想滚动父级时，我遇到了同样的问题，这是我可以解决的唯一方法。

当您需要文档不滚动时，请执行以下操作：

```
$(document).bind('touchmove', function(){
    return false;
}); 
```

完成后解除绑定：

```
$(document).unbind('touchmove'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:53:20.070

您可以尝试 setContentHeight() 来解决您的问题。

# html - 表格背景问题（左、右、中为图像）

> ID：10517043
> 
> 赞同：1
> 
> 时间：2012-05-09T13:23:15.217
> 
> 标签：html, css

我正在尝试使用三个图像（左、右和中间）为表格的第一行设置背景。中间可以是图像或只是颜色填充。

代码在这个小提琴中：http: [//jsfiddle.net/bumpy009/c3txj/13/](http://jsfiddle.net/bumpy009/c3txj/13/)

结果应如下所示：

![在此处输入图像描述](../Images/3a3b730e2035dedc62231cbdd354fb22.png)

我只能一次出现一个箭头，不能同时出现两个，也不能用颜色填充中间区域。

我需要使用 table bg 方法，因为我计划将此类用于具有不同宽度和不同单元格宽度的不同表格。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:29:43.313

您只能将一个背景图像应用于表格。

如果您将左右类应用于各自的标签，它将起作用

[http://jsfiddle.net/tXGCa/2/](http://jsfiddle.net/tXGCa/2/)

# mysql - 判断 MySQL 中是否安装了 InnoDB 插件

> ID：10517045
> 
> 赞同：6
> 
> 时间：2012-05-09T13:23:24.983
> 
> 标签：mysql

我们如何检查 MySQL 中是否安装了 Innodb 插件？是否有任何变量可以检查 Innodb 插件是否安装？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T13:38:17.737

如果您需要通过查询数据库来确定是否启用了 InnoDB，则应使用 INFORMATION_SCHEMA 表。

```
SELECT SUPPORT FROM INFORMATION_SCHEMA.ENGINES WHERE ENGINE = 'InnoDB'; 
```

其中，如果 InnoDB 已启用并且是默认数据库，则会给出以下结果

```
+---------+
| SUPPORT |
+---------+
| DEFAULT |
+---------+ 
```

如果 InnoDB 可用，但不是默认引擎，则结果将为`YES`. 如果它不可用，结果显然是`NO`.

请参阅[http://dev.mysql.com/doc/refman/5.5/en/engines-table.html](http://dev.mysql.com/doc/refman/5.5/en/engines-table.html) 和[http://dev.mysql.com/doc/refman/5.5/en/information-schema.html](http://dev.mysql.com/doc/refman/5.5/en/information-schema.html)参考。

当 InnoDB 可用时，您在评论中提到的 INFORMATION_SCHEMA 表也可用。

```
SHOW TABLES FROM INFORMATION_SCHEMA LIKE 'INNODB%';

+----------------------------------------+
| Tables_in_INFORMATION_SCHEMA (INNODB%) |
+----------------------------------------+
| INNODB_CMP_RESET                       |
| INNODB_TRX                             |
| INNODB_CMPMEM_RESET                    |
| INNODB_LOCK_WAITS                      |
| INNODB_CMPMEM                          |
| INNODB_CMP                             |
| INNODB_LOCKS                           |
+----------------------------------------+ 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-09T13:25:31.240

类型：

`SHOW ENGINES`

在 mysql 提示符下。

Innodb 会这样：

```
Engine: InnoDB
Support: YES
Comment: Supports transactions, row-level locking, and foreign keys 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T13:25:17.557

采用`SHOW ENGINES;`

见：[http ://dev.mysql.com/doc/refman/5.0/en/storage-engines.html](http://dev.mysql.com/doc/refman/5.0/en/storage-engines.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-27T14:04:52.313

" `show plugins`" 是可用的，但是我的服务器使用的是内置的 InnoDB 引擎，仍然不清楚是内置版本还是插件版本。

似乎最好的检查方法是查看`my.cnf`文件。根据插件的安装文档，您必须专门忽略内置版本并启用插件：

```
[mysqld] 
ignore-builtin-innodb 
plugin-load=innodb=ha_innodb_plugin.so 
;innodb_trx=ha_innodb_plugin.so   
;innodb_locks=ha_innodb_plugin.so  
;innodb_lock_waits=ha_innodb_plugin.so  
;innodb_cmp=ha_innodb_plugin.so  
;innodb_cmp_reset=ha_innodb_plugin.so  
;innodb_cmpmem=ha_innodb_plugin.so  
;innodb_cmpmem_reset=ha_innodb_plugin.so 
```

（此处显示的 plugin-load 选项值被格式化为多行以用于显示目的，但应使用单行写入 my.cnf 中，选项值中不包含空格。在 Windows 上，替换扩展`.dll`的每个实例。）`.so`

见[http://dev.mysql.com/doc/refman/5.1/en/replacing-builtin-innodb.html](http://dev.mysql.com/doc/refman/5.1/en/replacing-builtin-innodb.html)

从 v5.5 开始，该插件取代了内置的 InnoDB：http: [//dev.mysql.com/doc/refman/5.5/en/innodb-installation.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-installation.html)

# sql-server-2008 - 链接到 SQL Server 的 Sharepoint 列表

> ID：10517046
> 
> 赞同：1
> 
> 时间：2012-05-09T13:23:32.203
> 
> 标签：sql-server-2008, sharepoint-2010

我目前正在运行两台单独的服务器，一台用于共享点，一台用于 SQL Server，但它们位于同一个域中。我希望动态链接共享点列表以更新它们在 SQL 服务器数据库上的相应表。这可能吗？如果是这样，我应该研究什么才能让它发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T05:22:03.117

试试 Business Connectivity Services： http: [//msdn.microsoft.com/en-us/magazine/ee819133.aspx](http://msdn.microsoft.com/en-us/magazine/ee819133.aspx)怎么样？您将需要使用 SharePoint Designer 创建一个外部内容类型，该类型将使用选定的身份（例如 Windows 帐户）连接到您的 SQL Server 实例。然后，您可以从外部内容类型创建一个列表。

或者，您可以使用 Visual Studio 2010 创建一个业务数据连接模型作为您的外部内容类型：http: [//msdn.microsoft.com/en-us/vstudio/Video/ff623022](http://msdn.microsoft.com/en-us/vstudio/Video/ff623022) 如果您不介意编码，这可能更灵活.

列表和 SQL Server 数据可以通过使用 BCS 相互同步。

# eclipse - 在 eclipse ide 中包含和使用 scalaz

> ID：10517053
> 
> 赞同：2
> 
> 时间：2012-05-09T13:23:57.443
> 
> 标签：eclipse, scala, scalaz

我尝试在 eclipse ide 中使用 scalaz 库。我下载 scalaz-full_2.9.1-6.0.4.jar 并转到 java build 选项卡中的项目属性和 scalaz-full_2.9.1-6.0.4.jar 到外部 jar。

然后我写：

```
import scalaz._ 
```

在我的 scala 文件中并得到错误：

**未找到：值 scalaz**

如何正确地将 scalaz lib 包含到我的项目中？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:04:13.090

我想你必须包括内罐（如 scalaz-core_2.9.1-6.0.4.jar）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-20T21:58:00.570

进口 ：

```
import scalaz._
import Scalaz._ 
```

Maven依赖：

```
 <dependency>
        <groupId>org.scalaz</groupId>
        <artifactId>scalaz-core_2.11</artifactId>
        <version>7.1.0</version>
    </dependency>

    <dependency>
        <groupId>org.scalaz</groupId>
        <artifactId>scalaz-effect_2.11</artifactId>
        <version>7.1.0</version>
    </dependency>

    <dependency>                
        <groupId>org.scalaz</groupId>
        <artifactId>scalaz-scalacheck-binding_2.9.3</artifactId>
        <version>7.1.0</version>
    </dependency>

    <dependency>
        <groupId>org.scalaz</groupId>
        <artifactId>scalaz-typelevel_2.11</artifactId>
        <version>7.1.0</version>
    </dependency> 
```

我从 Scalaz 教程[http://eed3si9n.com/learning-scalaz/sbt.html的 sbt 部分获取了这些依赖项](http://eed3si9n.com/learning-scalaz/sbt.html)

# windows-phone-7 - 在 wp7 中使用 REST 的最佳方法是什么

> ID：10517054
> 
> 赞同：-1
> 
> 时间：2012-05-09T13:24:08.323
> 
> 标签：windows-phone-7

在 WP7 中使用 REST 的最佳方式是什么。请将源代码或网址发给我。我尝试了具有异步访问的 WebClient 但无法正常工作。服务器没有收到请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:26:02.310

你可以尝试使用restsharp [http://restsharp.org/](http://restsharp.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:26:00.460

```
System.Uri targetUri = new System.Uri("http://www.dot.com/restSvc");
HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(targetUri);
request.BeginGetResponse(new AsyncCallback(ReadWebRequestCallback), request); 
```

# eclipse - Eclipse Indigo 中 maven 的依赖层次结构视图

> ID：10517055
> 
> 赞同：6
> 
> 时间：2012-05-09T13:24:11.657
> 
> 标签：eclipse, maven, m2e

似乎无法使用最新版本的 eclipse (Indigo SR2) 获得依赖层次视图。大约一年前的这篇[文章](https://stackoverflow.com/questions/6475927/maven-pom-editor-dependency-graph-missing)表明不再支持依赖图，但依赖层次结构应该可以工作

谢谢

sfk

![更新：截图上传](../Images/4cafe5a8a901b3982094b22e0b61fad1.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-09T14:23:22.203

确保使用*Maven POM Editor*`pom.xml`打开文件。右键单击该文件，然后选择*Open With > Maven POM Editor*。这应该为您提供预期的编辑器，其中包含查看依赖项和依赖关系层次结构的选项。

 **请看下面的截图：

![截屏](../Images/5adb4b4c11c4f14c6eedab9ef23bdee7.png)**

# mysql - SQL - 需要将数据从一个表插入另一个表，其中 1 个字段等于另一个

> ID：10517056
> 
> 赞同：0
> 
> 时间：2012-05-09T13:24:13.200
> 
> 标签：mysql, sql, database

不确定这是否是一个基本问题，但我似乎无法弄清楚语法。

我有一个名为`leads`- primary key`LeadsId`的表和另一个名为`rep_assign`prime key的表`lead_id`。

我想将`rep_id`位于的字段存储`rep_assign`到`leads`表中`leads.LeadsId = rep_assign.lead_id`。

有谁知道怎么做？我只想将数据从一个表移动到另一个`LeadsId`等于`lead_id`.

我已经尝试`SELECT INTO`了`INSERT INTO`几种方法，但我似乎无法让它发挥作用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:32:15.757

听起来您的两个表中都已经包含大部分数据。也许您只需要更新潜在客户表以添加 rep_id。

```
UPDATE leads SET rep_id=(SELECT rep_id FROM rep_assign WHERE rep_assign.lead_id=leads.LeadId ORDER BY rep_assign_id DESC LIMIT 1) 
```

像这样的 NB 子查询适用于大多数 RDBMS，但不是全部。如果这对您不起作用，如果您能告诉我们您正在使用什么 RDBMS（例如 MySQL），将会有所帮助。

# ios - Xcode：Instruments 4.0 需要 Mac OS X 10.7 Lion？

> ID：10517059
> 
> 赞同：0
> 
> 时间：2012-05-09T13:24:19.010
> 
> 标签：ios, xcode, macos, instruments

我刚买了一台公司的 MacBook，开始学习 Xcode。当我尝试启动此“仪器”工具时，我收到以下错误消息：

![在此处输入图像描述](../Images/9e0063bbcfab5030a4a2e498c32b8079.png)

但我已经有 Mac OS X 10.7：

![在此处输入图像描述](../Images/91051dcebd3ecf49df329674b6c02950.png)

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:27:24.303

我建议您重新安装开发人员工具。

卸载所有 Xcode 开发者工具：

```
sudo Developer/Library/uninstall-devtools --mode=all 
```

# html - 如何在 div 中自动包装 WordPress 小部件？

> ID：10517060
> 
> 赞同：1
> 
> 时间：2012-05-09T13:24:24.260
> 
> 标签：html, wordpress, widget

如何在不更改小部件本身的情况下自动将默认 WordPress 小部件包装到 DIV 中？我正在尝试自动执行此操作：

```
<div class="widget">
Some WordPress widget's code
</div> 
```

有没有办法自动包装这些小部件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:27:12.670

注册侧边栏时会处理，请参阅[http://codex.wordpress.org/Function_Reference/register_sidebar](http://codex.wordpress.org/Function_Reference/register_sidebar)

和例子

```
register_sidebar( array(
    'name' => __( 'Main Sidebar', 'twentyeleven' ),
    'id' => 'sidebar-1',
    'before_widget' => '<aside id="%1$s" class="widget %2$s">',
    'after_widget' => "</aside>",
    'before_title' => '<h3 class="widget-title">',
    'after_title' => '</h3>',
) ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-29T12:33:59.953

您可以在注册小部件时直接添加 html。你可以看到，我是如何在我们的小部件中添加 html 的。

如下所示：

```
<div id="sample-widget" style="text-align:center"> 
```

下面是注册小部件的完整代码。

```
// Registering new widget area
function sample_widgets_init() {
    register_sidebar( array(
        'name' => 'Footer',
        'id' => 'Footer',
        'before_widget' => '<div id="sample-widget" style="text-align:center">',
        'after_widget' => '</div>',
        'before_title' => '<h2 class="rounded">',
        'after_title' => '</h2>',
    ) );
}
// Initializing our newly created function named as "sample_widgets_init"
add_action( 'widgets_init', 'sample_widgets_init' ); 
```

# android - 空指针异常调试

> ID：10517061
> 
> 赞同：0
> 
> 时间：2012-05-09T13:24:25.357
> 
> 标签：android, exception, pointers, null

这是一个计算器应用程序，当我点击 foreg 时。9、我在带星号的行出现空指针异常。可能出了什么问题？我只是一个初学者。

```
nine.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    String con= input.getText().toString();             
                    handlenumber("9",con);   **
                }
private void handlenumber(String number,String com)  **
    {
        number=new String();
        com=new String();

        if(com.equals("0") || com.equals("") || r!=0){

            input.setText(number);  **                            
            r=0;
        }
        else
            {
            input.setText(com.concat(number));                          
            }   
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:29:32.657

从您显示的内容来看，它似乎`input`为空，请确保将其初始化/分配给它。

此外，您有两个参数传递给`handlenumber`，不要重新分配给他们使用它们。例如删除行：

```
number=new String();
com=new String(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:31:08.260

尝试从您的代码中删除以下行：

```
 number=new String();
    com=new String();

private void handlenumber(String number,String com)  **
{
    if(com.equals("0") || com.equals("") || r!=0){

        input.setText(number);  **                            
        r=0;
    }
    else
        {
        input.setText(com.concat(number));                          
        }   
} 
```

# java - 在 Java 中覆盖 toString() 的简单方法

> ID：10517062
> 
> 赞同：2
> 
> 时间：2012-05-09T13:24:26.927
> 
> 标签：java, overriding, tostring

我有一个包含许多字段的 java bean。我知道如何`toString()`使用 StringBuilder 覆盖并直接使用字段名称。有没有办法以更好的方式做到这一点，比如没有字段名？

提前致谢。

PS：这个bean已经在我的产品中实现了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T13:26:25.500

我经常像这样使用 Apache Common Lang [`ToStringBuilder`](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/builder/ToStringBuilder.html)：

```
public String toString() {
   return ToStringBuilder.reflectionToString(this);
} 
```

这使用反射为有问题的对象生成一个`toString`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:26:56.053

Apache Common 有一个[`ToStringBuilder`类](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/builder/ToStringBuilder.html)，它使用反射来创建一个不错的`toString`结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T13:27:04.667

您可以使用反射来显式地或通过使用辅助类（例如[此处](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/builder/ReflectionToStringBuilder.html)提供的类）来执行相同的操作。我会假设反射有直接使用字段名称的开销。

# blackberry - ListField 中文本右侧的复选框

> ID：10517065
> 
> 赞同：2
> 
> 时间：2012-05-09T13:24:31.360
> 
> 标签：blackberry, blackberry-jde

我想要在文本右侧带有图像和复选框的列表字段。我在左侧获得了图像，但无法在右侧获得复选框。如果可能，复选框应该是不可见的。只应看到刻度线。我想实现

```
 Image text1 chechbox 
   Image text2 
   Image text3 checkbox 
```

所有列表项的图像应该相同。

```
public final class ListfieldDemo1 extends MainScreen 
```

{

```
private Vector _listElements;
ListField list;
private ListField _checkList;

public ListfieldDemo1()
{        
    // Set the displayed title of the screen   
    super(Manager.NO_VERTICAL_SCROLL);
    add(new LabelField("Fruits List", LabelField.FIELD_HCENTER));
    add(new SeparatorField());
    setTitle("ListField with images and checkbox");
    _listElements = new Vector();
    add(new SeparatorField());
    list = new ListField();
    ListCallback _callback = new ListCallback(this);
    list.setCallback(_callback);
    list.setSize(4);
    int index = list.getSelectedIndex();

    add(list);

    createField();
}

    protected void createField()
    {
        String itemOne = "Apple";
        String itemTwo = "Blackberry";
        String itemthree ="Grapes";
        String itemfour = "Banana";
        _listElements.addElement(itemOne);

        _listElements.addElement(itemTwo);
        _listElements.addElement(itemthree);
        _listElements.addElement(itemfour);
        reloadList();
    }

    private void reloadList() {

        list.setSize(_listElements.size());
    }
    public boolean invokeAction(int action)
    {
        switch (action)
        {
        case ACTION_INVOKE: // Trackball click.
        return true;
        }
        return super.invokeAction(action);

    }
class ListCallback implements ListFieldCallback
  {
private static final int LEFT_OFFSET = 10;
private static final int TOP_OFFSET = 10;
ListfieldDemo1 listfieldDemo1;

public ListCallback(ListfieldDemo1 listfieldDemo1)
{
        this.listfieldDemo1 = listfieldDemo1;
}

public void drawListRow(ListField listField, Graphics g, int index,
        int y, int w) {

    String text = (String)_listElements.elementAt(index);
    g.drawText(text, 60, y + 5, 0, w);
    text = (String) _listElements.elementAt(index);
    Bitmap bitm = Bitmap.getBitmapResource("bullet_arrow.png");
    int xpos = LEFT_OFFSET;
    int ypos = TOP_OFFSET + y;
    w = bitm.getWidth();
    int h = bitm.getHeight();

    g.drawBitmap(xpos, ypos, w, h, bitm, 0, 0);

    xpos = w + 20;

}

public Object get(ListField listField, int index) {
    // TODO Auto-generated method stub
    return null;
}

public int getPreferredWidth(ListField listField) {
    // TODO Auto-generated method stub
    return 0;
}

public int indexOfList(ListField listField, String prefix, int start) {
    // TODO Auto-generated method stub
    return 0;
}

}
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T18:55:12.890

我认为您想要如下图所示的内容：

![用刻度线列出测试](../Images/30b43fa05d337bf61075cd33ddce162e.png)

这是代码：

```
import java.util.Vector;
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.system.Display;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.Manager;
import net.rim.device.api.ui.MenuItem;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.component.ListField;
import net.rim.device.api.ui.component.ListFieldCallback;
import net.rim.device.api.ui.component.Menu;
import net.rim.device.api.ui.component.SeparatorField;
import net.rim.device.api.ui.container.MainScreen;

public final class ListDemoScreen extends MainScreen {

    private Vector _listElements;

    ListField list;
    private ListField _checkList;
    private MenuItem _toggleItem;

    public ListDemoScreen() {
        super(Manager.NO_VERTICAL_SCROLL);
        // Set the displayed title of the screen
        setTitle("List Demo");
        add(new LabelField("Fruits List", LabelField.FIELD_HCENTER));
        add(new SeparatorField());

        _listElements = new Vector();
        add(new SeparatorField());
        list = new ListField();
        ListCallback _callback = new ListCallback(this);

        list.setCallback(_callback);
        list.setSize(4);

        add(list);

        createField();

    }

    protected void createField() {
        ChecklistData itemOneCheckList = new ChecklistData("Apple", false);
        ChecklistData itemTwoCheckList = new ChecklistData("Blackberry", false);
        ChecklistData itemThreeCheckList = new ChecklistData("Grapes", false);
        ChecklistData itemFourCheckList = new ChecklistData("Banana", false);

        _listElements.addElement(itemOneCheckList);
        _listElements.addElement(itemTwoCheckList);
        _listElements.addElement(itemThreeCheckList);
        _listElements.addElement(itemFourCheckList);
        reloadList();

    }

    private void reloadList() {
        list.setSize(_listElements.size());
    }

    public boolean invokeAction(int action) {
        switch (action) {
        case ACTION_INVOKE: // Trackball click.
            int index = list.getSelectedIndex();
            ChecklistData data = (ChecklistData) _listElements.elementAt(index);
            data.toggleChecked();
            _listElements.setElementAt(data, index);
            list.invalidate(index);
            return true; // We've consumed the event.
        }
        return super.invokeAction(action);

    }

    class ListCallback implements ListFieldCallback {
        ListDemoScreen listDemoScreen;

        public ListCallback(ListDemoScreen listDemoScreen) {
            this.listDemoScreen = listDemoScreen;

        }

        public void drawListRow(ListField list, Graphics g, int index, int y,
                int w) {

            ChecklistData data = (ChecklistData) _listElements.elementAt(index);

            Bitmap bitmapImage = null;
            Bitmap bitmapTick = null;
            int widthImage=0;
            int heightImage=list.getRowHeight(index);
            int widthTick=0;
            int heightTick=list.getRowHeight(index);;
            int maxHeight = list.getRowHeight(index);

            int xpos=0;
            int ypos=y;
            bitmapImage = Bitmap.getBitmapResource("earth-icon.png");
            bitmapTick = Bitmap.getBitmapResource("ok-icon.png");
            if(bitmapImage != null && bitmapTick != null) {
                widthImage = bitmapImage.getWidth();
                widthTick = bitmapTick.getWidth();
                heightImage = bitmapImage.getHeight();
                heightTick = bitmapTick.getHeight();
                maxHeight = (heightTick > heightImage) ? heightTick : heightImage;

                list.setRowHeight(index, maxHeight);

                g.drawBitmap( xpos, ypos+(list.getRowHeight(index)-heightImage)/2, widthImage, heightImage, bitmapImage, 0, 0 );
                if(data.isChecked()) {
                    g.drawBitmap( getWidth()-widthTick-2, ypos+(list.getRowHeight(index)-heightTick)/2, widthTick, heightTick, bitmapTick, 0, 0 );
                }
            }

            ChecklistData currentRow = (ChecklistData) this.get(list, index);

            StringBuffer rowString = new StringBuffer();

            rowString.append(currentRow.getStringVal());
            // Draw the text.
            g.drawText(rowString.toString(), xpos + widthImage, y + (list.getRowHeight(index)-getFont().getHeight())/2, 0, -1);
        }

        public Object get(ListField list, int index) {
            return _listElements.elementAt(index);
        }

        public int indexOfList(ListField list, String prefix, int string) {
            return _listElements.indexOf(prefix, string);
        }

        public int getPreferredWidth(ListField list) {
            return Display.getWidth();
        }

    }

    private class ChecklistData {
        private String _stringVal;
        private boolean _checked;

        ChecklistData(String stringVal, boolean checked) {
            _stringVal = stringVal;
            _checked = checked;
        }

        private String getStringVal() {
            return _stringVal;
        }

        private boolean isChecked() {
            return _checked;
        }

        // Toggle the checked status.
        private void toggleChecked() {
            _checked = !_checked;
        }

    }

    protected void makeMenu(Menu menu, int instance) {
        Field focus = UiApplication.getUiApplication().getActiveScreen()
                .getLeafFieldWithFocus();
        if (focus == _checkList) {
            menu.add(_toggleItem);
        }

        super.makeMenu(menu, instance);
    }

} 
```

使用您自己的图标**和**[**`earth-icon.png`**](http://icons.iconarchive.com/icons/treetog/junior/48/earth-icon.png)（[**`ok-icon.png`**](http://icons.iconarchive.com/icons/deleket/sleek-xp-basic/24/Ok-icon.png)勾选标记）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T07:08:59.647

使用此样式位将 Checkboxfield 标签放在左侧。

```
private static final long checkBoxStyle = 134217728;
add(new CheckboxField("test " , false, checkBoxStyle | USE_ALL_WIDTH)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:19:14.960

我有同样的问题，这是我的解决方案：

```
public class FlippedCheckboxField extends CheckboxField {
private final boolean rightToLeft;
private int dislocation = -1;

public FlippedCheckboxField(final String arg0, final boolean arg1, final long arg2, final boolean rightToLeft) {
    super(arg0, arg1, arg2);
    this.rightToLeft = rightToLeft;
}

protected void paint(final Graphics graphics) {
    final int width = getWidth();
    final int height = getHeight();
    final Bitmap x = new Bitmap(width, height);
    final Graphics g = Graphics.create(x);
    super.paint(g);

    if (this.dislocation == -1) { // not yet initialized
        this.dislocation = calculateDislocation(width, height, x, this.rightToLeft);
    }

    graphics.drawBitmap(width - this.dislocation, 0, this.dislocation, height, x, 0, 0);
    graphics.drawBitmap(0, 0, width - this.dislocation, height, x, this.dislocation, 0);
}

private int calculateDislocation(final int width, final int height, final Bitmap x, final boolean rightToLeft) {
    final int middleRow[] = new int[width];
    x.getARGB(middleRow, 0, width, 0, height / 2, width, 1); // get middle row
    final int beginCheckbox = findNextColumn(height, x, middleRow, rightToLeft ? width : 0, rightToLeft, false);
    final int endCheckbox = findNextColumn(height, x, middleRow, beginCheckbox, rightToLeft, true);
    final int beginText = findNextColumn(height, x, middleRow, endCheckbox, rightToLeft, false);
    if (rightToLeft) {
        final int i = width - beginCheckbox + beginText;
        return i;
    } else {
        return beginText - beginCheckbox;
    }
}

private int findNextColumn(final int height, final Bitmap x, final int[] middleRow, final int xOffset, final boolean rightToLeft, final boolean findWhite) {
    final int whitePixel = middleRow[rightToLeft ? 0 : middleRow.length - 1];
    if (rightToLeft) {
        for (int i = xOffset - 1; i >= 0 ; i --) {
            final boolean isColumnWhite = isColumnWhite(height, x, middleRow, i, whitePixel);
            if (isColumnWhite ^ !findWhite) { // found first white or non-white column, return
                return i;
            }
        }
        return xOffset;
    } else {
        for (int i = xOffset; i < middleRow.length; i ++) {
            final boolean isColumnWhite = isColumnWhite(height, x, middleRow, i, whitePixel);
            if (isColumnWhite ^ !findWhite) { // found first white or non-white column, return
                return i;
            }
        }
        return xOffset;
    }
}

private boolean isColumnWhite(final int height, final Bitmap x, final int[] middleRow, final int xOffset, final int whitePixel) {
    if (middleRow[xOffset] != whitePixel) {
        return false;
    } else {
        final int currentColumn[] = new int[height]; // get current column
        x.getARGB(currentColumn, 0, 1, xOffset, 0, 1, height);
        for (int i = 0; i < height; i++) { // check if all pixels in the current column are white
            if (currentColumn[i] != whitePixel) { // non white
                return false;
            }
        }
        return true;
    }
}
} 
```

在此处查看原始问题：[在 Blackberry 上将复选框向右对齐](https://stackoverflow.com/questions/7470117/align-checkbox-to-the-right-on-blackberry)

# wix - Wix - 安装 MSI 文件时如何覆盖 UpgradeCode

> ID：10517066
> 
> 赞同：2
> 
> 时间：2012-05-09T13:24:32.230
> 
> 标签：wix, windows-installer

我正在编写具有 2 个要求的 WIX 安装程序：

1.  实施升级规则（我成功地使用`<MajorUpgrade>`or`<Upgrade>`表
2.  保留一种强制安装与当前版本并行的旧版本的方法（因此不要升级）。

问题来自第二个要求：如果应用程序的所有版本都具有相同的UpgradeCode，系统将删除旧版本（具有相同的UpgradeCode）avec安装新版本。

那么是否可以升级旧版本（默认情况下）并让用户强制并行安装？我的一种解决方案是在安装 MSI 时更改 UpgradeCode。在这种情况下，两个版本将完全独立，这就是我想要的。

但是我没有找到在安装阶段指定另一个 UpgradeCode 的方法。我试过`msiexec /i app.msi UpgradeCode="{60C200E9-E317-4a67-9CC1-7BF156DEF4FD}"`了，但根据日志，它可以正确获取 UpgradeCode 属性，但在构建 MSI 时仍使用 GUID 指定。

知道如何在安装 MSI 时强制升级代码吗？

有关信息，我的 Wix 文件的组成如下：

```
<?define ProductUpgradeCode = "32318521-631C-4064-88C6-4A54FAA3B383"?>
[...]
<Product Name='App' Id='*' UpgradeCode='$(var.ProductUpgradeCode)'
Language='1033' Codepage='1252' Version='1.0.0' Manufacturer='App inc'>
[...]
<MajorUpgrade AllowDowngrades="yes" Schedule="afterInstallInitialize" /> 
```

**编辑 - 解决方案**，基于 Ciprian 的回答：

首先，定义一个`ALLOWUPGRADE`具有默认值的属性`Yes`：

```
<Property Id="ALLOWUPGRADE" Value="Yes" /> 
```

然后，在 中设置操作`<InstallExecuteSequence>`，因此它仅在以下情况下卸载旧版本`ALLOWUPGRADE=Yes`：

```
<RemoveExistingProducts After="InstallFinalize">ALLOWUPGRADE="Yes"</RemoveExistingProducts> 
```

而且，更好的是，添加一个对话框，询问用户是否要升级或进行并行安装。一个按钮`ParallelInstallBtn`会将属性值更改为`No`。`FindRelatedProducts`如果某个部分检测到旧版本，则会调用此对话框`UpgradeVersion`：

```
<UI>
  <Dialog Id="InstallDlg" Width="370" Height="270" Title="[ProductName] Setup" NoMinimize="yes">
    [...]
    <Control Id="ParallelInstallBtn" Type="PushButton" X="280" Y="243" Width="80" Height="17" Default="no" Text="&amp;Parallel Install">
      <Publish Property="ALLOWUPGRADE" Value="No">1</Publish>
      <Publish Event="EndDialog" Value="Return">1</Publish>
    </Control>
  </Dialog>
  <InstallUISequence>
    <Show Dialog="InstallDlg" After="FindRelatedProducts">OLDERVERSIONBEINGUPGRADED</Show>
  </InstallUISequence>
</UI> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:44:50.537

您可以通过调节[RemoveExistingProducts](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371197%28v=vs.85%29.aspx)操作来做到这一点。

```
 <InstallExecuteSequence> 
      <RemoveExistingProducts After="InstallFinalize">ALLOWUPGRADE="Yes"</RemoveExistingProducts> 
 </InstallExecuteSequence> 
```

默认情况下，ALLOWUPGRADE 属性的值为“Yes”。当您不希望执行升级时，请更改它。

# ios - 没有数据显示时添加uilabel

> ID：10517069
> 
> 赞同：0
> 
> 时间：2012-05-09T13:24:42.607
> 
> 标签：ios, xcode, nsmutablearray, uilabel, tableview

我希望能够通过 uilabel 设置在没有显示数据时如何添加数据的指令（nsmutablearray）。我怎么做。此外，当数据出现时，如何让它消失？

任何帮助表示赞赏。非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:35:01.407

简单的检查应该做到这一点

```
if ([self.myArray count] == 0) {
    self.myLabel.hidden = NO;
} else {
    self.myLabel.hidden = YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:30:00.387

您需要使用插座将 UILabel 连接到您的 UIViewController 子类，然后在有趣的事情发生时向该对象发送消息以设置其 text 属性。

没有更多细节，很难提供更多帮助。

# jquery - 将 json 数据从 python (bottle.py) 传递到小册子的 javascript 库以显示在滑图上

> ID：10517070
> 
> 赞同：1
> 
> 时间：2012-05-09T13:24:42.847
> 
> 标签：jquery, python, json, bottle, leaflet

我正在做我认为是一个简单的副项目。事实证明，我有点脱离了我的舒适区，因为我对 python 一无所知（我使用的是 PHP）。我正在尝试创建一个显示一组兴趣点的滑动地图（使用 cloudemade 的传单）。我有一个包含 POI 名称、纬度和经度的 CSV 文件。

到目前为止，我能够读取 CSV 数据并将其转换为 JSON 数据，并使用 bottle.py 在网页中显示 JSON 数据的转储。

我的问题是如何通过 jquery 将 bottle.py 的 JSON 数据传递给传单的 javascript 库？

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T05:01:56.817

Leaflet 支持 GEOJSON，可以很容易地用 Leaflet 显示矢量数据。

看：

[http://leaflet.cloudmade.com/examples/geojson.html](http://leaflet.cloudmade.com/examples/geojson.html)

python [geojson](http://pypi.python.org/pypi/geojson/)库也支持geojson，所以除了将它放入适当的对象并在将生成的JSON提供给传单之前添加您想要的任何其他属性之外，您不需要在python方面做很多事情。

只需使用标准 XMLHttpRequest() 从您提供服务的任何位置获取 JSON 对象。

```
function loadData(){

    // retrieve and load features to a layer
    var xhrequest = new XMLHttpRequest();
    xhrequest.onreadystatechange = function(){
        if (xhrequest.readyState == 4){
            if (xhrequest.status == 200){
                var geojsonLayer = new L.GeoJSON();
                geojsonLayer.on("featureparse", function(e){
                    if (e.properties && e.properties.name && e.properties.value){
                        var popupContent = "Whatever added properties you want to display";
                        e.layer.bindPopup(popupContent);                     
                    }; 
                    // any styles you've added
                    if (e.properties && e.properties.style && e.layer.setStyle){
                        e.layer.setStyle(e.properties.style);                      
                    };                      
                });    
                var layerItems =  JSON.parse(xhrequest.responseText);
                // add features to layer
                for (i=0; i<layerItems.length;i++){
                    var geojsonFeature = layerItems[i];
                    geojsonLayer.addGeoJSON(geojsonFeature);                       
                };
                map.addLayer(geojsonLayer); 
            };                
        };            
    };
    var url= "<url of where you are serving the GEOJSON data>"; 
    xhrequest.open('GET', url, true);
    xhrequest.send(null);            
} 
```

# tfs - TFS 构建完成后压缩文件

> ID：10517071
> 
> 赞同：0
> 
> 时间：2012-05-09T13:24:46.437
> 
> 标签：tfs, build, 7zip

我对 TFS 有一个小问题。我正在尝试在构建完成后压缩文件并将其发送到放置位置。我正在使用以下命令调用 7zip 来压缩文件。

**命令**：

`<Exec Command="7z a &quot;$(BuildNumber)_Sandbox.zip&quot; &quot;$(DropLocation)\$(BuildNumber)&quot;"/>`

构建运行，但由于某种原因，尽管构建日志显示归档命令已运行，但文件从未被压缩。

**日志**：

```
Creating archive Sandbox DB Update_20120509.1_Sandbox.zip

Compressing  Sandbox DB Update_20120509.1\File1.sql
Compressing  Sandbox DB Update_20120509.1\File2.sql
Compressing  Sandbox DB Update_20120509.1\RefreshAll\DLL1.dll
Compressing  Sandbox DB Update_20120509.1\RefreshAll\Results\Results.txt

Everything is Ok
Done Building Project "S:\Source\5\TFS Sandbox\Sandbox DB Update\BuildType\TFSBuild.proj" (EndToEndIteration target(s)).

Build succeeded. 
```

我正在使用 TFS2008 构建脚本。如果这不是最好的方法，有人可以指出一种更简单的压缩文件的方法。我尝试查看 MSBuild 扩展 zip 功能，但它似乎比仅运行上面的命令要复杂得多。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:53:48.160

一个狂野的镜头：您没有添加 zip 文件的路径，因此它可能位于“EXEC”进程的当前目录中，这很可能不是您想要的目录。将目录添加到 zip 的路径可能会有所帮助。

# c# - 如何从此代码通过更多人发送邮件？

> ID：10517077
> 
> 赞同：-6
> 
> 时间：2012-05-09T13:25:12.917
> 
> 标签：c#, window, gmail, sendmail

我正在尝试一次向一百多人发送带有附件的电子邮件，并且我发现非常好的源代码可以完美地与附件一起使用，但不能一次向多个人发送邮件。

所以现在我的问题是：你能帮我修改现有代码以使其工作吗？

编程语言：C#

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Mail;

namespace ConsoleApplication3
{

    public class GmailAccount
    {
        public string Username;
        public string Password;
        public string DisplayName;

        public string Address
        {
            get
            {
                return Username + "@gmail.com";
            }
        }

        private SmtpClient client;

        public GmailAccount(string username, string password, string displayName = null)
        {
            Username = username;
            Password = password;
            DisplayName = displayName;

            client = new SmtpClient
            {
                Host = "smtp.gmail.com",
                Port = 587,
                EnableSsl = true,
                DeliveryMethod = SmtpDeliveryMethod.Network,
                UseDefaultCredentials = false,
                Credentials = new NetworkCredential(Address, password)
            };
        }

        public void SendMessage(string targetAddress, string subject, string body, params string[] files)
        {
            MailMessage message = new MailMessage(new MailAddress(Address, DisplayName), new MailAddress(targetAddress))
            {
                Subject = subject,
                Body = body
            };

            foreach (string file in files)
            {
                Attachment attachment = new Attachment(file);
                message.Attachments.Add(attachment);
            }

            client.Send(message);
        }
    }

    class Program
    {   
        static void Main(string[] args)
        {
            GmailAccount acc = new GmailAccount("username", "password", "Caption");
            acc.SendMessage("some.person@gmail.com", "Hello World!", "like in the title...", "C:\\temp.rar");
        }
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:27:39.443

我认为这就是你要找的：

```
message.To.Add(new MailAddress("test@gmail.com"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:29:42.633

在 SendMessage 的 targetAddress 参数中传递更多用逗号分隔的值。

向多人发送邮件的示例代码：

```
public bool SendEmail()
{
    bool status = false;

        try
        {
            //code to send email
            this._mail = new MailMessage();

            this._mail.From = new MailAddress(this.From, this.DisplayName);

            if (!string.IsNullOrEmpty(this.To))
            {
                var distinctAddress = new List<string>(this.To.Split(',').Distinct());
                this.To = string.Empty;

                foreach (string address in distinctAddress) // Loop through all strings
                {
                    this.To += address + ","; // Append string to StringBuilder
                }
                this.To = this.To.TrimEnd(',');
                this._mail.To.Add(this.To);
            }

            if (!string.IsNullOrEmpty(this.CC))
                this._mail.CC.Add(this.CC);

            if (!string.IsNullOrEmpty(this.BCC))
                this._mail.Bcc.Add(this.BCC);

            this._mail.Subject = this.Subject;

            this._mail.IsBodyHtml = this.IsBodyHtml;

            this._mail.Body = this.Body;

            if (this.Priority == true)
            {
                this._mail.Priority = MailPriority.High;
            }

            this._mail.DeliveryNotificationOptions = DeliveryNotificationOptions.OnFailure;

            if (this._attachments != null && this._attachments.Count > 0)
            {
                foreach (string file in this._attachments)
                {
                    Attachment attachment = new Attachment(file);
                    this._mail.Attachments.Add(attachment);
                }
            }

            this._smtpServer = new SmtpClient(this.EmailServer);
            this._smtpServer.EnableSsl = this.EnableSsl;
            this._smtpServer.Port = this.Port;
            this._smtpServer.Credentials = new System.Net.NetworkCredential(this.UserId, this.Password);

            if (String.IsNullOrEmpty(this.To) != true || string.IsNullOrEmpty(this.CC) != true || string.IsNullOrEmpty(this.BCC) != true)
                this._smtpServer.Send(this._mail);
            status = true;
        }
        catch (Exception ex)
        {
        }
    return status;
} 
```

# php - 通过以下方式限制 Google Shopping API

> ID：10517080
> 
> 赞同：0
> 
> 时间：2012-05-09T13:25:27.247
> 
> 标签：php, google-api, google-shopping-api

我正在尝试使用 Google Shopping API（用于 PHP）来查询某些产品并仅返回部分商店的价格 - 例如 Amazon、HMV，并且想知道如何将结果限制在某些商店？

在 API 文档或在线中找不到答案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:44:14.427

据此，accountId 属性是发布[该](https://developers.google.com/shopping-search/v1/reference-request-parameters)*产品的商家中心帐户的 Id*。这听起来很像商店。

创建一个您想要的商家 ID 号码数组，例如：

```
$merchants = array('Amazon' => '123456',
                   'HMV' => '789012'); 
```

然后生成您的请求并将这些值作为 accountId 传递。我不确定您是否可以一次传递多个值。

需要注意的一点是，可能很难找到某些商家的 accountId。看到这个：[https ://groups.google.com/group/google-content-api-for-shopping/browse_thread/thread/e0c4d098e25f97c8](https://groups.google.com/group/google-content-api-for-shopping/browse_thread/thread/e0c4d098e25f97c8)

# node.js - Towerjs 控制器中的操作更新不起作用

> ID：10517084
> 
> 赞同：0
> 
> 时间：2012-05-09T13:25:32.340
> 
> 标签：node.js, coffeescript, towerjs

我将尝试在 towerjs 中创建一个控制器，但是在更新操作时出现错误：

```
TypeError: Property 'id' of object #<Object> is not a function 
```

这里看起来我的动作：

```
update: ->
  App.User.find @params.id (error, user) =>
    user.updateAttributes @params.user, (error) =>
      if error
        @render "edit", locals: user: user
      else
        @render "show", locals: user: user 
```

控制台向我显示传递了 id 参数：

```
Parameters:
{ user: 
  { name: 'admin',
    email: 'example@domain.com',
    password: '21232f297a57a5a743894a0e4a801fc3' },
  id: '4faa6c614b2ce49b34000001',
  action: 'update',
  format: 'html' } 
```

更多信息：显示、编辑、销毁中内置了相同的操作，并且它们正在工作。所有操作都使用相同的 _form 部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:08:38.633

这段代码：

```
f @params.id (a, b) => ... 
```

相当于：

```
f(@params.id((a,b) => ...)) 
```

所以你试图`@params.id`作为一个函数调用并将你的`(error,user) =>`函数`@params.id`作为它的参数传递给它。我认为您想将`@params.id`和作为两个参数传递`(error,user) =>`，`App.user.find`因此请添加逗号：

```
update: ->
  App.User.find @params.id, (error, user) =>
    #---------------------^ 
```

# java - 使用正则表达式模式将字符串拆分为冒号

> ID：10517086
> 
> 赞同：0
> 
> 时间：2012-05-09T13:25:40.257
> 
> 标签：java, regex

我有一个这样的字符串。

```
ars:a:currency (Argentina!: Pesos): 
```

我需要使用冒号拆分字符串，但不应拆分括号内的冒号。我需要一个正则表达式来拆分这个字符串。

我的输出应该是

```
ars
a
currency (Argentina!: Pesos)** 
```

帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:35:17.280

*如果*您确定不会有任何嵌套括号，则可以使用单个正则表达式来完成。在这种情况下，仅当下一个括号不是右括号时，您才可以简单地在冒号上拆分：

```
String[] splitArray = subjectString.split(
    "(?x):    # Multiline regex: Match a colon\n" +
    "(?!      # only if it's impossible to match the following at this point:\n" +
    " [^()]*  #  any number of characters besides parentheses\n" +
    " \\)     #  followed by a closing parenthesis\n" +
    ")        # End of lookahead assertion"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:30:13.947

它不适用于单个正则表达式。您可以在不复杂的情况下做的是`String.split("[()]")`，在每个其他数组索引处用 拆分字符串`:`，最后连接回来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:30:20.660

也许这样的事情对你有用：

```
String[] tok = str.split(":", 3); 
```

`str`你的字符串在哪里。

# php - PHP Graphviz 铬缩放问题

> ID：10517088
> 
> 赞同：-1
> 
> 时间：2012-05-09T13:25:51.407
> 
> 标签：php, graphviz

我一直在使用 PHP Graphviz 在 iframe 中绘制我的工作流程图。就在最近，我开始看到 chromium 的不稳定行为（在 Linux 上）。当我通过 PHP Graphviz 创建一个简单的图形时（使用此处接受的答案：[PHP GraphViz Documentation](https://stackoverflow.com/questions/2241382/php-graphviz-documentation)），Firefox 会正确创建图形并具有滚动条，但 chrome 会缩放整个图形以适应 iframe。

问题是当 iframe 变得比图表小得多时，Chromium 会缩小图表而不是让它滚动，从而使整个事情变得微型且不可读。我找不到可以解决问题的 iframe 或 PHP Graphviz 的任何设置。

我的 iframe 文件是这样的：

```
 echo "<iframe id='graphwin' src='/tools/tool-temp-svg2.html' scrollbars='yes' frameborder='1' height='50' width='50'></iframe>"; 
```

内部文件与上面链接的问题中给出的相同。

chrome 上的输出如下所示（按实际比例）：

![在此处输入图像描述](../Images/65f4dc4e633b577cc1177830127c49f7.png)

Chromium 版本是：18.0.1025.151 (Ubuntu 12.04)，但也可以在 chrome 中看到。火狐工作正常。

我在 chromium 网站上看到过这种行为的错误报告，但它们很旧并且都标记为已解决。

**更新：**在这里添加了一个演示页面：http: [//www.legalinfo-online.com/demo/tool-temp-svg.php](http://www.legalinfo-online.com/demo/tool-temp-svg.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:28:19.987

如果没有更多细节，我必须假设您在没有指定任何参数的情况下调用 gv->image() 方法，在这种情况下，gv 会返回 SVG 输出。如果是这样的话，我认为 Chromium 实际上是在做正确的事情。iframe 为 svg 布局提供了边界框，它只是渲染 svg 以适应其中。

要强制 svg 呈现更大的尺寸，我认为您可以更改 svg 节点的 viewbox 属性以指定布局的范围。这个想法是铬将渲染 svg 以适合指定的视图框，然后 iframe 将嵌入更大的视图框。警告 - 我没有试过这个。

或者，作为一种变通方法，您可以使用参数调用 gv->image( ) 方法来强制 Graphviz 生成 .png 等。由于 .png 文件将具有与其相关联的自己的大小，我相信嵌入式 iframe 将调整其内部边界以适应 .png，然后如果内部视图大于 iframe 的边界，则显示滚动条。

# c# - 如何使用 Entity Framework 为包含静态数据的数据库播种？

> ID：10517094
> 
> 赞同：4
> 
> 时间：2012-05-09T13:26:10.757
> 
> 标签：c#, .net, entity-framework, entity-framework-4.3

如何在实体框架中创建*（种子）*大量静态数据？静态数据是指位于数据库中但仅存在一次的数据。

例如，在我的数据库中，我有一个 CountrySet，其中包含全球所有国家/地区。我希望这些国家永远存在，但事实是，每次我清除我的数据库并重新创建它以进行新部署时，所有这些数据都会丢失。

在我的应用程序启动时创建所有内容（如果尚未创建）似乎对时间非常敏感。

我可以在这里做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T13:36:34.533

首先，让我问这个问题：

您是否熟悉`Seed`自己设置时可以访问的功能`Initializer`？

例子：

在你的主函数中写下这样的内容：

```
System.Data.Entity.Database.SetInitializer(new SystemContext.SystemInitializer()); 
```

`SystemContext`你的`DbContext`班级在哪里。

在该课程中，您应该具有以下内容：

```
public class SystemContext : DbContext
    {
        public DbSet<Stock> Stocks { get; set; }
        public DbSet<RawDayValues> StockRawValues { get; set; }

        public SystemContext()
            : base("Server=localhost;Database=test;Trusted_Connection=True;") 
        { }

        public class SystemInitializer : DropCreateDatabaseIfModelChanges<SystemContext>
        {
            #region SEED
            // This is what you're looking for!
            protected override void Seed(SystemContext context)
            {
                try
                {
                    var stock = new Stock() { Symbol = "TEST" };
                    context.Stocks.Add(stock);
                    context.SaveChanges();
                }
                catch (Exception ex) { Console.Error.WriteLine(ex.Message); }
                base.Seed(context);
            }

            #endregion
        }
    } 
```

这只是我在一个项目中的一些模板代码。

如果您确实每次都在重新创建数据库，那么我不知道有任何其他方法可以在不“手动”添加所有数据的情况下“播种”数据库。

另一方面，如果您打算在每次想要更改其中的详细信息时都**删除数据库之外的其他操作，则可能必须***手动*编写函数，根据某些逻辑清除所有新数据。

我希望这回答了你的问题 ：）

**还：**您既没有在问题中指定，也没有使用标签指定您正在谈论的技术。我认为它是[c#](/questions/tagged/c%23 "显示标记为“c#”的问题")、[.net](/questions/tagged/.net "显示标记为“.net”的问题")和[entity-framework-4.3.1](/questions/tagged/entity-framework-4.3.1 "显示标记为“entity-framework-4.3.1”的问题")。如果不是这种情况，请重新标记/指定。

**祝你今天过得愉快 ：）**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:37:21.157

您可以为上下文设置初始化程序，例如：

`System.Data.Entity.Database.SetInitializer<MyContext>(new MyInitializer());`

其中“MyInitializer”是一个继承`IDatabaseInitializer<MyContext>`接口的类。这个接口有一个方法`InitializeDatabase(TContext context)`，每当（重新）创建数据库时都会调用这个方法。

在此方法中，您可以使用任何您想要填充数据库的方式。

# c# - 具有存储库的域/模型对象上的静态方法

> ID：10517098
> 
> 赞同：0
> 
> 时间：2012-05-09T13:26:21.957
> 
> 标签：c#, entity-framework, design-patterns, repository

我为每个实体都有单独的存储库类。现在我想在使用存储库实例的域对象上实现一些静态方法，但这种方法的缺点是，我必须在静态变量上保存存储库实例（这在 Web 应用程序上效果不佳）或者我必须创建每个静态方法的新实例。有没有更好的方法（即在具有存储库实例的域类上实现静态方法）？请分享你的想法。

基础存储库：

```
public abstract class AbstractRepository<TEntity> : IabstractRepository<TEntity>
    where TEntity : EntityObject
{
    protected CivilRegistryEntities civilContext;

    public AbstractRepository()
    {
        civilContext = CivilRegistryEntities.Instance; // Per HTTP request singletone.
    }

    // Other method implementation goes here.
} 
```

每个实体存储库：

```
public class BirthReportRepository : AbstractRepository<BirthReport>
{

} 
```

域/实体/模型对象：

```
public partial class BirthReport
{
    //Not works well in web application.
    private static BirthReportRepository repository = new BirthReportRepository();

    public static BirthReport Method1()
    {
        return repository.SomeMethod();
    }

    public static BirthReport Method2()
    {
        return repository.SomeOtherMethod();
    }

    // Other methods(both static and instance) goes here.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:02:07.027

静态可变状态是可怕的。时期。存储库包含一个上下文，一个上下文包含大量可变状态。除此之外，上下文的生命周期应该很短。并且：我认为您的域*类*应该与存储库无关。这是伪封装。相反，让域*服务*处理 Method1、method2。

您可以考虑使用 IoC 容器将上下文注入到您的存储库中，并将一个存储库注入到您的域服务中。IoC 容器还可以处理上下文和存储库的生命周期。对于 Web，每个请求一个实例是常见的。

# c# - .NET 便携式库缺少 BitConverter.DoubleToInt64Bits，替换非常慢

> ID：10517101
> 
> 赞同：6
> 
> 时间：2012-05-09T13:26:30.157
> 
> 标签：c#, performance, bitconverter

我正在用 C# 开发一个可移植类库，我想将 a 位转换`double`为`long`. 这个问题最直接的解决方案是使用该`BitConverter.DoubleToInt64Bits`方法，但不幸的是，该方法在 .NET 类库的 Portable Library 子集中不可用。

作为替代方案，我提出了以下“两次”位转换：

```
var result = BitConverter.ToInt64(BitConverter.GetBytes(x), 0); 
```

我的测试表明，这个表达式始终产生与`DoubleToInt64Bits`. 但是，我的基准测试也表明，这种替代公式比在完整的 .NET Framework 应用程序中实现时慢大约四倍*。*`DoubleToInt64Bits`

仅使用便携式库子集，是否可以实现`DoubleToInt64Bits`比我上面的公式更快的替换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T15:39:05.727

使用工会怎么样？

```
[StructLayout(LayoutKind.Explicit)]
public struct DoubleLongUnion
{
    [FieldOffset(0)]
    public double Double;

    [FieldOffset(0)]
    public long Long;
}

public static long DoubleToInt64Bits(double value)
{
    var union = new DoubleLongUnion {Double = value};
    return union.Long;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T14:33:37.927

如果您能够标记您的程序集，`unsafe`那么您可以将`DoubleToInt64Bits`实现提升到您自己的库中：

```
public static unsafe long DoubleToInt64Bits(double value)
{
    return *(((long*) &value));
} 
```

# google-app-engine - 我可以将存储在数据存储中的数据导出到 Excel 吗？

> ID：10517107
> 
> 赞同：1
> 
> 时间：2012-05-09T13:26:45.557
> 
> 标签：google-app-engine, google-cloud-datastore

我想将数据存储中的数据导出为 Excel 格式文件。数据很简单，就是stringProperty。我可以这样做吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T13:35:12.467

如果应用程序是用 python 编写的，您应该阅读如何下载数据：
[https ://developers.google.com/appengine/docs/python/tools/uploadingdata](https://developers.google.com/appengine/docs/python/tools/uploadingdata)

您可以将数据导出到 csv 文件，然后将其导入 excel。

编辑：
即使是 java 应用程序也有一个方法：http: [//ikaisays.com/2010/06/10/using-the-bulkloader-with-java-app-engine/](http://ikaisays.com/2010/06/10/using-the-bulkloader-with-java-app-engine/)

# iphone - 将 HTTPS 与 Monotouch 和 WCF 一起使用

> ID：10517109
> 
> 赞同：1
> 
> 时间：2012-05-09T13:26:55.327
> 
> 标签：iphone, wcf, ssl, xamarin.ios, makecert

我们有一个在 iPhone 上使用 monotouch 运行的应用程序。目前我们正在使用 BasicHttpBinding 连接到 WCF 服务。我们现在正在确保连接安全，再次使用 BasicHttpBinding 和 BasicHttpSecurityMode.Transport（这实际上是 HTTPS）。

我们创建了一个自签名证书并将其添加到服务器上。通过浏览器（从 iPhone 和 PC）访问服务器地址时，我们可以毫无问题地连接到它。但是，如果我们连接 MonoTouch 应用程序，我们将得到以下异常：

```
 System.Net.WebException has been thrown
    Error writing request: BeginWrite failure 
```

我们使用Wireshark分析连接，发现服务器正在关闭连接（服务器收到ClientHello后发送tcp reset）。我们在 IIS 的错误日志中发现以下消息：

```
 An TLS 1.0 connection request was received from a remote client application, but none of the cipher suites supported by the client application are supported by the server. The SSL connection request has failed. 
```

如果我们查看我们的服务器支持哪些密码，我们会看到以下列表：

```
 TLS_RSA_WITH_AES_128_CBC_SHA256
    TLS_RSA_WITH_AES_128_CBC_SHA
    TLS_RSA_WITH_AES_256_CBC_SHA256
    TLS_RSA_WITH_AES_256_CBC_SHA
    TLS_RSA_WITH_RC4_128_SHA
    TLS_RSA_WITH_3DES_EDE_CBC_SHA
    TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256
    TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P384
    TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA_P256
    TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA_P384
    TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA_P256
    TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA_P384
    TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256_P256
    TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256_P256
    TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384_P384
    TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384_P384
    TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA_P256
    TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA_P384
    TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA_P256
    TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA_P384
    TLS_DHE_DSS_WITH_AES_128_CBC_SHA256
    TLS_DHE_DSS_WITH_AES_128_CBC_SHA
    TLS_DHE_DSS_WITH_AES_256_CBC_SHA256
    TLS_DHE_DSS_WITH_AES_256_CBC_SHA
    TLS_DHE_DSS_WITH_3DES_EDE_CBC_SHA
    TLS_RSA_WITH_RC4_128_MD5
    SSL_CK_RC4_128_WITH_MD5
    SSL_CK_DES_192_EDE3_CBC_WITH_MD5
    TLS_RSA_WITH_NULL_SHA256
    TLS_RSA_WITH_NULL_SHA 
```

而我们知道 Monotouch 至少支持 TLS_RSA_WITH_AES_128_CBC_SHA （根据 Wireshark）

有没有人有解决这个问题的方法或解决方法？也许我们需要在 IIS 或 makecert 中使用一些特殊选项？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:39:43.260

Mono（和 MonoTouch）支持您列表中的许多密码（大多数除了带有 的密码`*DH*`）。

您的日志中的错误表明由于密码选择，服务器不接受连接。在 SSL/TLS 中，客户端将他的列表发送到服务器，服务器选择它喜欢的列表（性能/安全性）。您无法在 Mono[Touch] 方面进行任何更改来影响这一点。

**只有**当服务器**未**配置为接受任何提供的密码（来自 Mono）时，我才看到过这种情况。这通常是配置为**仅** `*DH*`支持密码的服务器。

100% 确定服务器支持什么（或配置为允许）并不总是那么容易。SSL/TLS 协议从不发送此类列表（与客户端不同）。

我建议你使用 Wireshark 和一些网络浏览器来连接服务器。如果连接正常并使用`*DH*`密码，那么您将知道 (98%) 您的服务器可能配置错误（上面的列表中）。

为什么 ？因为浏览器通常支持许多密码（如 Mono）和`*DH*`（不像 Mono）。因此，如果服务器选择了一个`*DH*`密码，这是一个很好的线索，它不允许其他任何事情。服务器的通常选择倾向于使用 RC4 或 AES - 但 YMMV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:40:51.310

您的浏览器是否显示证书错误？如果是这样，您必须使用：

```
ServicePointManager.ServerCertificateValidationCallback = (a, b, c, d) => true; 
```

在您第一次请求之前在您的程序中执行此操作一次。它自动接受所有证书，甚至是自签名证书。

尽管如此，我认为 MonoTouch 应该在这里给出不同的错误信息。在 Windows 上会发生什么？

# mysql - 删除从属表中包含许多行的行

> ID：10517112
> 
> 赞同：0
> 
> 时间：2012-05-09T13:26:58.940
> 
> 标签：mysql, relational-database

我有一个表格列表。有这样的约束的依赖表：

```
CONSTRAINT `FK_list_id` FOREIGN KEY (`list_id`) 
  REFERENCES `lists` (`list_id`) 
  ON DELETE CASCADE ON UPDATE CASCADE. 
```

例如，如果我有一些 list_id 子表中有许多行（100 或更多），则需要很长时间才能删除它。此外，这些操作可能会限制服务器。

在这种情况下我应该如何删除列表？我应该不使用`ON DELETE CASCADE`，而是删除列表，然后在后台删除订阅者，而不是通过级联删除子行来删除列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:29:14.437

您可以`ON DELETE SET NULL`改用，然后您可以搜索 FK id 所在的记录`NULL`并删除这些记录。

# javascript - 动态设置元素的高度以使其溢出：auto？

> ID：10517116
> 
> 赞同：3
> 
> 时间：2012-05-09T13:27:07.200
> 
> 标签：javascript, jquery, html, css, overflow

我有一长串元素，我想滚动它们，同时保持页面的其余部分在它周围保持静态。

```
<header>
  <!-- the header is stuck to the top of the page -->
</header>
<ul class="list">
  <!-- long list of stuff which should scroll -->
  <li></li>
  <li></li>
  <li></li>
  <li></li>
  <!-- ... and so on, hundreds of elements -->
</ul>
<footer>
  <!-- the footer is stuck to the bottom of the page -->
</footer> 
```

现在，只要我在`<ul>`.

```
ul.list {
  overflow: auto;
  height: 700px;
} 
```

问题是，如果用户的浏览器高于`700px + [header height] + [footer height]`then`ul.list`就不会占用所有可用空间。列表和页脚之间有一个间隙。相反，如果用户的浏览器小于`700px`，则某些列表元素会隐藏在页面底部之外。

如何使列表占据所有可用高度？

到目前为止我能想到的唯一方法是检测`$header.offset()`and `$footer.offset()`，减去它们以获得它们之间的距离并设置每次触发`ul`窗口事件时的高度。`resize`对于看起来应该是一个简单问题的问题，这似乎是一个过于复杂的解决方案。有没有更好的办法？

顺便说一句，这是我应用的样式，以使字体粘在页面底部。

```
footer  {
  // stick the footer to the bottom of the page
  position: fixed;
  bottom: 0px;
  left: 0;
  right: 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:46:39.663

如果您知道页眉和页脚的高度并且可以绝对定位列表，那就很简单了：

```
ul.list {
  overflow: auto;
  position: absolute;
  top:    [height of header]px;
  bottom: [height of footer]px;
} 
```

如果您希望列表具有固定宽度并保持居中，您可以执行以下操作：

```
ul.list {
  overflow: auto;
  position: absolute;
  top:    [height of header]px;
  bottom: [height of footer]px;

  left:  50%;      
  width: 600px;  /* as an example */
  margin-left: -300px; /* negative half of the width */
} 
```

# c++ - 二叉搜索树 - 搜索函数返回对象 (C++)

> ID：10517123
> 
> 赞同：0
> 
> 时间：2012-05-09T13:27:28.987
> 
> 标签：c++, search, binary-search-tree

```
//Node.cpp

Node::Node(DataType Item):item(Item)
{
    lchild = 0;
    rchild = 0;
}

DataType Node::getItem()
{
    DataType anItem = item; 
    return anItem;
}

void Node::setItem( const DataType & data)
{
    item = data;
}

Node* Node::getLChild() const
{
    Node * p = lchild;
    return p;
}

void Node::setLChild(Node * p)
{
    lchild = p;
}

Node* Node::getRChild() const
{
    Node * p = rchild;
    return p;
}

void Node::setRChild(Node * p)
{
    rchild = p;
}

Node::~Node()
{
}

//BST.cpp

DataType * BST::Search(const string name)
{
    return Search(name, root);
}

DataType * BST::Search(const string name, Node * r)
{
    if(r != 0)
    {
        if (name.compare(r->getItem().getname()) == 0)
            return &(r->getItem());
        else
        {
            if (name.compare(r->getItem().getname()) < 0)
                return Search(name, r->getLChild());
            else
                return Search(name, r->getRChild());
        }
    }
    else
        return NULL;
}

//main.cpp

    MyClass mc1("Tree","This is a tree");
    MyClass mc2("Book","This is a book");
    MyClass mc3("Zoo","This is a zoo");

    BST tree;
    tree.Insert(mc1);
    tree.Insert(mc2);
    tree.Insert(mc3);

    MyClass * mc = tree.Search("Book");
    if (mc != NULL)
        cout << mc->getname() << endl; 
```

问题出在 Search 函数返回的 MyClass 对象 (mc) 上。

我追踪到 Search() 并确保“r->getItem()”得到我想要的。

“return &(r->getItem());”有什么问题 ?

谢谢！

++++++

我有点困惑..我可以更改为“DataType BST::Search(const string name)”而不是“DataType * BST::Search(const string name)”....看来编译器不能经过。返回 NULL 会有一些问题...

但我尝试你的方法来改变 DataType* Node::getIthem() 它仍然有错误....@@

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T13:45:51.917

我*猜*这会按值`Node::getItem()`返回：`DataType`

```
DataType Node::getItem(); 
```

当您获取该返回值的地址时，您实际上是在获取将立即消失（临时）的地址。我怀疑它在内部`Node`保存`DataType`对象，在这种情况下`Node::getItem()`可以返回指向其中之一的指针。

```
DataType* Node::getItem() { return &item; }
const DataType* Node::getItem() const { return &item; } 
```

或通过引用返回：

```
DataType& Node::getItem() { return item; }
const DataType& Node::getItem() const { return item; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:35:04.270

`return &(r->getItem());`将内存地址返回给任何`r->getItem()`返回，而不是对象本身。如果`r->getItem()`返回一个指针，你将不得不`return (r->getItem());`.

# javascript - JQuery.address - 从 url 中删除 #

> ID：10517124
> 
> 赞同：1
> 
> 时间：2012-05-09T13:27:36.917
> 
> 标签：javascript, jquery, ajax, deep-linking

我目前正在使用 jquery.address 插件来实现深度链接。

比如我要加载test1.html。我单击该链接，它会显示在地址栏 /#/test1 上。我想只显示 /test1 而没有标签。如果用户重新加载页面，我会使用 PHP。

这是我的代码：

JS-

```
<script type="text/javascript">
/*<![CDATA[*/
$("document").ready(function(){

    function loadURL(url) {
        console.log("loadURL: " + url);
        $("#area").load(url);
    }

    // Event handlers
    $.address.init(function(event) {
        console.log("init: " + $('[rel=address:' + event.value + ']').attr('href'));
    }).change(function(event) {
        $("#area").load($('[rel=address:' + event.value + ']').attr('href'));
        console.log("change");
    })

    $('a').click(function(){
        loadURL($(this).attr('href').replace('', /^#/));
    });

    });

/*]]>*/
</script> 
```

HTML -

```
<a href="test1.html" rel="address:/test1">Test 1</a> <br />
<a href="test2.html" rel="address:/test2">Test 2</a> <br /> <br /> <br />

Load Area: <br />
<div id="area"></div> 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:50:44.927

为什么不拆分它并采取最后一部分？

```
var urlArray = $(this).attr('href').split('/');
var page = urlArray[urlArray.length - 1];
loadURL(page); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:30:21.093

[字符串.替换](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)

```
loadURL($(this).attr('href').replace(/^#/, '')); 
```

编辑：请注意，这`^`意味着正则表达式中[的“字符串开头”](http://www.regular-expressions.info/anchors.html)。这意味着它不会匹配字符串中的任何内容`"/#/test1"`。如果你想剥离`/#/`你应该使用这个：

```
'/#/test1'.replace(/\/#\//, ''); 
```

[http://jsfiddle.net/wD7LZ/](http://jsfiddle.net/wD7LZ/)

# asp.net-mvc - 如何在 SAAS 解决方案（Windows Azure）中配置自定义域？

> ID：10517127
> 
> 赞同：4
> 
> 时间：2012-05-09T13:27:45.303
> 
> 标签：asp.net-mvc, azure, dns, a-records

我们正在 Windows Azure 上构建 SAAS 解决方案。每个客户都应该有可能将他的自定义域 (example.com) 映射到我们的服务。

根据这篇[文章](http://msdn.microsoft.com/en-us/library/windowsazure/gg981933.aspx)，将自定义域映射到 Azure 托管服务有两种选择：

1.  CNAME 记录（需要一个子域，例如 www）。不是个案。必须有没有子域的选项。

2.  将 A 记录映射到 VIP（虚拟 IP）。这个更好。提到：“除非托管服务的部署被删除，否则部署的VIP保证不会改变”。但是前几天我们的IP突然变了，没有删除。目前它是一个试用账户（90 天），并且只使用了一个实例。大概这可能是一个原因。

起初我们计划使用 A 记录将自定义域（example.com 等）映射到 VIP，但似乎不稳定。至少在审判中不是。

有没有人建造过类似的东西？如何实现自定义域的稳定映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:24:09.477

我会选择 CNAME，因为这是全球 Windows Azure 用户普遍使用的名称，但是作为 Windows Azure 保证，只要您不删除服务，VIP 在服务生命周期内不会更改，所以您肯定可以用它。我已经看到用户也开始使用它。

-> 关于您声称即使您没有删除服务也更改了 VIP 的说法，我想说即使使用试用帐户也不能发生这种情况。

*   你是如何部署你的应用程序的？如果您以删除先前部署并创建新部署的方式部署应用程序，这可能会导致 VIP 发生变化。例如从 VS 部署，删除现有部署，然后创建一个新部署，这将导致相同的行为。更新现有部署并确保您正在使用的过程正在进行升级（无删除 + 新部署）总是好的。

如果上述情况不是您的情况，并且您确定您的 VIP 已更改而没有删除现有部署，则应将此通知 Windows Azure 支持团队，因为 Windows Azure 声称只要不删除 VIP 在服务生命周期内就不会更改.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:46:42.153

处理此问题的最佳方法是使用上面的选项 1。您的服务可能因多种原因而下降，所有这些都不能保证 VIP 将保持不变。所以最安全的方法是使用 CNAME。

# gnome-terminal - 更改 gnome-terminal 标题以反映当前目录？

> ID：10517128
> 
> 赞同：35
> 
> 时间：2012-05-09T13:27:47.057
> 
> 标签：gnome-terminal

我想更改 gnome-terminal 窗口的标题以反映当前目录。有没有办法做到这一点？一个脚本可能是？“更改终端标题”线程没有多大帮助。当我们使用命令时手动：

```
gnome-terminal --title=$PWD 
```

它可以工作，但是会创建一个新的终端实例（如预期的那样）。我希望能够使用

```
--title=$PWD 
```

使用 cd 命令。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-09T13:35:20.570

由于 gnome-terminal 使用与 xterm 相同的控制命令，此页面可能会有所帮助。

[bash 和其他 shell 的 Xterm 标题](http://tldp.org/HOWTO/Xterm-Title-4.html#ss4.3)

TL;博士：

将以下内容添加到您的 .bashrc

`PROMPT_COMMAND='echo -ne "\033]0;${USER}@${HOSTNAME}: ${PWD}\007"'`

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-10-23T01:47:58.367

`PROMPT_COMMAND='echo -ne "\033]0;$(basename ${PWD})\007"'`将仅显示当前目录作为标题

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-01T16:36:13.200

我这样做是为了覆盖`cd`命令并设置`pwd`为标题：

```
function title { echo -en "\033]2;$1\007"; }
function cd { dir=$1; if [ -z "$dir" ]; then dir=~; fi; builtin cd "$dir" && title `pwd`; }
cd `pwd` 
```

我只是把这个扔进我的`~/.bash_aliases`. 你可能会调整它来做你想做的事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-03T19:20:56.887

我不是专家，但您应该尝试编辑您的 ~/.bashrc 文件。如果我正确理解了您的问题，您可以根据我的（我使用的是 Ubuntu 12.04）更改您的 .bashrc。“旧”行被注释掉，新行位于其下方（带有附加注释）。

```
case "$TERM" in
xterm*|rxvt*)
  # OLD PS1 directive
    #PS1="\[\e]0;${debian_chroot:+($debian_chroot)}\u@\h: \w\a\]$PS1"
  # NEW PS1 directive, shows only current directory name as terminal window name
    PS1="\[\e]0;${debian_chroot:+($debian_chroot)}\W\a\]$PS1"
    ;;
*)
    ;;
esac 
```

结果是我的终端标题等于我当前的目录标题，例如。在`cd Documents/projects`我的终端标题之后`projects`（如果文件打开，终端名称就是它的名称）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-08T17:14:53.637

'basename' 更新了空白问题的答案

```
PROMPT_COMMAND='echo -ne "\033]0;$(basename "$(pwd)")\007"' 
```

更新 2013 年 10 月 23 日 1:47 user2909452

# tridion - MMC 管理单元错误

> ID：10517133
> 
> 赞同：4
> 
> 时间：2012-05-09T13:28:09.033
> 
> 标签：tridion

我们最近安装了 Tridon 2011 SP1。当我尝试打开 SDL Tridion Content Manager 管理单元时，收到错误消息

MMC 无法创建管理单元。

名称：SDL Tridion 内容管理器 CLSID：{5DB34C8F-}

尝试重新安装应用程序，但错误仍然存​​在。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T14:17:35.380

您使用的是什么操作系统？64位？很可能您正在执行 64 位 mmc。您应该通过下一个命令行执行 32 位 mmc：mmc -32。您可以在此处阅读有关 mmc 32 位/64 位的更多信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa815172](http://msdn.microsoft.com/en-us/library/windows/desktop/aa815172(v=vs.85).aspx) (v=vs.85).aspx 。

Tridion 管理单元的问题是 32 位 COM 组件，不能在 64 位进程中创建。

如果它没有帮助，您能否查看事件查看器以获取更详细的错误消息？

# api - 如何获取 odata.intel.com 的 API 密钥？

> ID：10517138
> 
> 赞同：0
> 
> 时间：2012-05-09T13:28:39.123
> 
> 标签：api, hardware, intel, processors, opendata

我刚刚注意到英特尔有一个 API 可以访问他们的主板、芯片组和处理器数据库：http: [//odata.intel.com/](http://odata.intel.com/)

有人知道如何注册 API 密钥吗？我在任何地方都找不到注册表单或其他文档。有人使用这些数据编写了应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:19:25.560

我猜自从你问这个问题以来，这已经改变了。现在请求 API 密钥非常简单——只需访问[http://odata.intel.com/](http://odata.intel.com/)并单击右侧边栏中的“请求 API 密钥”。我在几秒钟内就收到了我的，尽管他们声称会是 1-3 天。

# jquery - 如何删除标签而不在jquery中选择它

> ID：10517139
> 
> 赞同：0
> 
> 时间：2012-05-09T13:28:43.407
> 
> 标签：jquery, jquery-ui, tabs, jquery-tabs

我想删除标签而不选择它。当我选择一个选项卡并将其删除时。它工作正常。并且没有选择它它不起作用

HTML：

```
<!DOCTYPE html>
<html>
<head>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css"   rel="stylesheet" type="text/css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js">  </script>
</head>
<body style="font-size:62.5%;">

<div id="tabs">
  <ul>
 </ul>
</div>
<input type='button' id='addTab' value='Add Tab'>
<input type='button' id='removeTab' value='RemoveTab'>
</body>
</html> 
```

JS：

```
$(document).ready(function() {
    $("#tabs").tabs({
        tabTemplate: "<li><a href='#{href}'>#{label}</a> <p title='close' id='removeTab' style='cursor:pointer;display:inline'>x</p></li>"
    });
});

$(function() {
    var index = 0;
    index++;

    $("#addTab").live('click', function() {
        index++;
        var title = 'Tab.....  ' + index;
        var url = '#fragment-' + index;
        addTab(url, title, index);
    });

    function addTab(url, title, index) {
        $('#tabs').tabs("add", url, title, [index]);
    }

    $('#removeTab').live('click', function() {
        var $tabs = $('#tabs').tabs();
        var selected = $tabs.tabs('option', 'selected');
        alert(selected);
        $('#tabs').tabs("remove", [selected]);
    });
});​ 
```

JS 小提琴[http://jsfiddle.net/andrewwhitaker/6VrwD/27/](http://jsfiddle.net/andrewwhitaker/6VrwD/27/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:40:25.913

您可以像这样选择删除后的第一个选项卡：http: [//jsfiddle.net/6VrwD/28/](http://jsfiddle.net/6VrwD/28/) 使用我添加的代码，您可以找出更复杂的逻辑，例如选择下一个选项卡（如果存在）等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:58:30.500

这是一个工作示例[http://jsfiddle.net/k44Wk/](http://jsfiddle.net/k44Wk/1/)即使它没有被选中，它也会删除单击的选项卡。

这是使事情起作用的修改部分：

```
$('#removeTab').live('click', function() {
    var $tabs = $('#tabs').tabs();
    var selected = $tabs.tabs('option', 'selected');
    if(selected == -1)
        selected = $('p[id=removeTab]').index(this);
    $('#tabs').tabs("remove", [selected]);
}); 
```

一件事，您应该避免对多个元素使用相同的 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T14:00:38.493

您可以从单击“x”图标的选项卡中获取 href 属性，并使用它来删除该选项卡。您可以通过执行以下操作来做到这一点：

```
var link = $('a', $(this).parent()).attr('href');
$('#tabs').tabs("remove", link); 
```

唯一的事情是与 x 图标具有相同 ID 的删除按钮（您应该尽可能避免）现在正在寻找其父级中的第一个 a 元素（在本例中为）。最好的方法是删除删除提交或为单击该提交创建另一个功能。

# objective-c - 键盘隐藏UITextview时UITableView滚动

> ID：10517140
> 
> 赞同：0
> 
> 时间：2012-05-09T13:28:43.830
> 
> 标签：objective-c, cocoa-touch, uitableview, keyboard

我的自定义 UITableViewController 有问题。我正在“viewDidLoad”期间创建一个并开始向其中添加自定义单元格。如果我用 UITextfield 触摸一个单元格并开始编辑，键盘将覆盖该单元格。
到目前为止，我已经读到这是因为我已经以编程方式添加了我的 tableview。有一些解决方案可以监听键盘事件，然后手动滚动表格视图，但我发现了一种我想利用的行为。
到目前为止：创建tableview，没有自动滚动。
在不同的场合，我需要推送一个模态视图。驳回此观点后：一切正常。我在屏幕底部有一个 Textfield 单元格，当我单击它时，键盘会将单元格向上推。

现在这是一个大问题：在这个简单的推动和解雇过程中会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:53:22.333

这是我多年来一直坚持的那些奇怪的事情之一，虽然我不太确定为什么键盘会滚动模式而不是推动，但解决它的一种方法是使用[TPKeyboardAvoiding](https://github.com/michaeltyson/TPKeyboardAvoiding)。这是一个简单的修复，但是您确实需要使用带有 tableview 的 xib 文件。

# windows-phone-7 - wp7序列化安全异常

> ID：10517143
> 
> 赞同：0
> 
> 时间：2012-05-09T13:28:56.520
> 
> 标签：windows-phone-7, serialization, securityexception, tombstoning

首先，描述可能有点长，有很多代码，但我不想提供我能提供的所有信息。我正在为我的应用程序使用墓碑，我想保存一个序列化类：

```
 [DataContract]
    private class Tombstone
    {
        [DataMember]
        public UserDetails UserProfile { get; set; }
    }

    // Create instance of the tombstone class
    private Tombstone _tombstone;
    public ProfileSetup()
    {
        _tombstone = new Tombstone();
    }

    //Add data to userProfile
    void UserInformationAccess_OnGetUserDetailsComplete(GetUserDetailsResponse response)
    {
        _tombstone.UserProfile = response.userDetails;
    } 
```

而且我在从...导航的异常中就在这里：

```
 protected override void OnNavigatedFrom(NavigationEventArgs e)
    {
        if (_tombstone != null)
            this.SaveState("tombstone", _tombstone);
    }

//The state manager class
public static class StateManager
{
    /// <summary>
    /// Saves a key-value pair into the state object
    /// </summary>
    /// <param name="phoneApplicationPage">The phone application page.</param>
    /// <param name="key">The key.</param>
    /// <param name="value">The value.</param>
    public static void SaveState(this PhoneApplicationPage phoneApplicationPage, string key, object value)
    {
        if (phoneApplicationPage.State.ContainsKey(key))
        {
            phoneApplicationPage.State.Remove(key);
        }

        phoneApplicationPage.State.Add(key, value);
    }
} 
```

现在振作起来，异常即将来临：

```
“安全异常”

   在 System.Runtime.Serialization.DataContract.DataContractCriticalHelper.CreateDataContract（Int32 id，RuntimeTypeHandle typeHandle，Type 类型）
   在 System.Runtime.Serialization.DataContract.DataContractCriticalHelper.GetDataContractSkipValidation（Int32 id，RuntimeTypeHandle typeHandle，Type 类型）
   在 System.Runtime.Serialization.DataContract.GetDataContractSkipValidation（Int32 id，RuntimeTypeHandle typeHandle，Type 类型）
   在 System.Runtime.Serialization.DataContract.GetDataContract(RuntimeTypeHandle typeHandle, Type type, SerializationMode 模式)
   在 System.Runtime.Serialization.XmlObjectSerializerContext.GetDataContract（RuntimeTypeHandle typeHandle，Type 类型）
   在 System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType（XmlWriterDelegator xmlWriter，对象 obj，RuntimeTypeHandle objectTypeHandle，类型 objectType，Int32 声明类型 ID，RuntimeTypeHandle 声明类型句柄，类型声明类型）
   在 System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize（XmlWriterDelegator xmlWriter，对象 obj，布尔 isDeclaredType，布尔 writeXsiType，Int32 声明类型 ID，RuntimeTypeHandle 声明类型句柄）
   在 System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference（XmlWriterDelegator xmlWriter，对象 obj，布尔 isDeclaredType，布尔 writeXsiType，Int32 声明类型 ID，RuntimeTypeHandle 声明类型句柄）
   在 System.Reflection.RuntimeMethodInfo.InternalInvoke（RuntimeMethodInfo rtmi、Object obj、BindingFlags invokeAttr、Binder binder、Object 参数、CultureInfo 文化、Boolean isBinderDefault、Assembly caller、Boolean verifyAccess、StackCrawlMark 和 stackMark）
   在 System.Reflection.RuntimeMethodInfo.InternalInvoke（对象 obj、BindingFlags invokeAttr、Binder binder、Object[] 参数、CultureInfo 文化、StackCrawlMark 和 stackMark）
   在 System.Reflection.MethodBase.Invoke（对象 obj，对象 [] 参数）
   在 System.Runtime.Serialization.XmlFormatWriter.InternalSerialize（MethodInfo 方法信息，对象 memberValue，类型 memberType，布尔 writeXsiType，XmlObjectSerializerWriteContext 上下文，XmlWriterDelegator xmlWriter）
   在 System.Runtime.Serialization.XmlFormatWriter.WriteValue（类型 memberType，对象 memberValue，布尔 writeXsiType，XmlObjectSerializerWriteContext 上下文，XmlWriterDelegator xmlWriter）
   在 System.Runtime.Serialization.XmlFormatWriter.WriteMember（SerializingObject serObj，Int32 memberIndex，ClassDataContract 派生的MostClassContract）
   在 System.Runtime.Serialization.XmlFormatWriter.WriteClass（CallStackElement`1 callStackElement）
   在 System.Runtime.Serialization.XmlFormatWriter.Serialize（XmlObjectSerializerWriteContext 上下文）
   在 System.Runtime.Serialization.XmlFormatWriter.InitializeCallStack（XmlWriterDelegator xmlWriterDel，对象 obj，XmlObjectSerializerWriteContext writeContext，DataContract 合同）
   在 System.Runtime.Serialization.CollectionDataContract.WriteXmlValue（XmlWriterDelegator xmlWriter，对象 obj，XmlObjectSerializerWriteContext 上下文）
   在 System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue（DataContract 数据合同，XmlWriterDelegator xmlWriter，对象 obj，RuntimeTypeHandle 声明的TypeHandle）
   在 System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType（DataContract dataContract，XmlWriterDelegator xmlWriter，Object obj，RuntimeTypeHandle 声明的TypeHandle）
   在 System.Runtime.Serialization.DataContractSerializer.InternalWriteObjectContent（XmlWriterDelegator writer，对象图）
   在 System.Runtime.Serialization.DataContractSerializer.InternalWriteObject（XmlWriterDelegator writer，对象图）
   在 System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions（XmlWriterDelegator writer，对象图）
   在 System.Runtime.Serialization.XmlObjectSerializer.WriteObject（XmlDictionaryWriter 编写器，对象图）
   在 System.Runtime.Serialization.XmlObjectSerializer.WriteObject（流流，对象图）
   在 Microsoft.Phone.Shell.StreamPersister.Serialize（IDictionary`2 字典，IEnumerable`1 knownTypes）
   在 Microsoft.Phone.Shell.StreamPersister.Save（ShellPage shellPage，字符串键，IDictionary`2 字典，IEnumerable`1 knownTypes）
   在 Microsoft.Phone.Controls.PhoneApplicationPage.InternalOnNavigatedFrom(NavigationEventArgs e)
   在 System.Windows.Navigation.NavigationService.RaiseNavigated（对象内容，Uri uri，NavigationMode 模式，布尔 isNavigationInitiator，PhoneApplicationPage existingContentPage，PhoneApplicationPage newContentPage）
   在 System.Windows.Navigation.NavigationService.Journal_NavigatedExternally（对象发件人，JournalEventArgs 参数）
   在 System.Windows.Navigation.Journal.OnNavigatedExternally（字符串名称，Uri uri，NavigationMode 模式）
   在 System.Windows.Navigation.Journal.ShellPage_NavigatedAway（对象发送者，NavigateAwayEventArgs args）
   在 Microsoft.Phone.Shell.Interop.ShellPageCallback.FireOnNavigateAway(IntPtr thisPage, Direction direction, IntPtr pageNext)

```

我已经研究了很多与此相关的内容，但我发现是空的:(感谢任何帮助。

**[编辑]**

像问题的接缝是 TombStone 类具有私有可访问性，我改变了它......但我得到了以下异常：

不应使用数据合同名称“ArrayOfKeyValueOfstringJTokeneJCYCtcq:http://schemas.microsoft.com/2003/10/Serialization/Arrays”键入“Newtonsoft.Json.Linq.JObject”。将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。

这里也是 UserDetails 类

```
[KnownType(typeof(Phone[]))]
[KnownType(typeof(UserInterest<InterestCategory?, object>))]
[KnownType(typeof(UserInterest<InterestCategory?, object>[]))] 

    [DataContract]
    public class UserDetails
    {
        /// <summary>
        /// Specifies an identifier of user
        /// </summary>
        /// 
        [DataMember]
        public long userId { get; set; }

        /// <summary>
        /// Specifies a nick of user
        /// </summary>
        /// 
        [DataMember]
        public string nick { get; set; }

        /// <summary>
        /// Specifies a full name of user. The field is absent if it has null value
        /// </summary>
        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]

        [DataMember]
        public string fullName { get; set; }

        /// <summary>
        /// Specifies a gender of user. The field is absent if it has null value
        /// </summary>
        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        [JsonConverter(typeof(EnumAttributeConverter<Gender>))]
        [DataMember]
        public Gender? gender { get; set; }

        /// <summary>
        /// Specifies a birthday of user as string in dd.MM.yyyy format.
        /// The field is absent if it has null value.
        /// </summary>
        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        [DataMember]
        public string birthday { get; set; }

        /// <summary>
        /// Specifies an e-mail of user. The field is absent if it has null value
        /// </summary>
        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        [DataMember]
        public string email { get; set; }

        /// <summary>
        /// Specifies a website of user. The field is absent if it has null value.
        /// </summary>
        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        [DataMember]
        public string website { get; set; }

        /// <summary>
        /// Specifies a general information about user. The field is absent if it has null value.
        /// </summary>
        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        [DataMember]
        public string about { get; set; }

        /// <summary>
        /// Specifies a place of birth for user. The field is absent if it has null value.
        /// </summary>
        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        [DataMember]
        public Address<Country?>? homeAddress { get; set; }

        /// <summary>
        /// Specifies a place of residence for user. The field is absent if it has null value. 
        /// </summary>
        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        [DataMember]
        public Address<Country?>? currentAddress { get; set; }

        /// <summary>
        /// Specifies a list of user's phones. The field is absent if it has null value.
        /// </summary>
        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        [DataMember]       
        public Phone[] phones { get; set; }

        /// <summary>
        /// Specifies an URI of avatar of profile. The field is absent if it has null value.
        /// </summary>
        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        [DataMember]
        public string avatar { get; set; }

        /// <summary>
        /// Specifies a job. The field is absent if it has null value.
        /// </summary>
        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        [DataMember]
        public string job { get; set; }

        /// <summary>
        /// Specifies a mood status of user as a color.The field is absent in read commands if it has null value.
        /// </summary>
        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        [DataMember]
        public int? mood { get; set; }

        /// <summary>
        /// Specifies a relationship status of user.The field is absent if it has null value.
        /// </summary>
        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        [DataMember]
        public RelationshipStatus? relationshipStatus { get; set; }

        /// <summary>
        /// Defines a discovery purpose specified by user.The field is absent if it has null value.
        /// </summary>
        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        [DataMember]
        public DiscoveryPurpose? discoveryPurpose { get; set; }

        /// <summary>
        /// Specifies a list of user interests. The field is absent if it has null value.
        /// </summary>
        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        [DataMember]
        public UserInterest<InterestCategory?, object>[] interests { get; set; }

        /// <summary>
        /// Specifies a status of user. The field is absent if it has null value.
        /// </summary>
        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        [DataMember]
        public string status { get; set; }

        /// <summary>
        /// Specifies an availability status of user.
        /// </summary>
        [JsonConverter(typeof(EnumAttributeConverter<AvailabilityStatus>))]
        [DataMember]
        public AvailabilityStatus availabilityStatus { get; set; }

        /// <summary>
        /// Specifies a location of user. The field is absent if location is undefined.
        /// </summary>
        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        [DataMember]
        public Location location { get; set; }

        /// <summary>
        /// Defines if the given user and the requestor interacted previously.
        /// </summary>
        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
        [DataMember]
        public bool interacted { get; set; }

        /// <summary>
        /// Defines the status of pending friendship request if it exists.
        /// Equals NONE if there is no pending friendship request.
        /// Equals PENDING_IN if the given user sent friendship
        /// request to the user (requestor) who requests extended
        /// information.
        /// Equals PENDING_OUT if the requestor sent friendship
        /// request to the given request.
        /// </summary>
        [JsonConverter(typeof(EnumAttributeConverter<FriendshipRequestStatus>))]
        [DataMember]
        public FriendshipRequestStatus friendshipRequestStatus { get; set; }

        /// <summary>
        /// Defines if the given user was ignored by the requestor.
        /// </summary>
        /// 
        [DataMember]
        public bool ignored { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:42:39.000

异常表明引用的类型之一在序列化程序的上下文中不可访问/可见...问题是您将类定义为私有：

《私课墓碑》

This means that it is only visible to the class in which it is defined.
You need to make this class public.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T21:23:11.827

问题在于`DataContractSerializer`序列化`UserDetails`对象的能力。

`Add`页面字典的方法`State`将使用 DataContractSerializer 序列化对象。

您已经证明您已经`Tombstone`使用 DataContract 序列化属性标记了该类，但是呢`UserDetails`？

幸运的是，您可以通过尝试自己序列化和反序列化对象来调试此问题。
您可能还会发现使用另一个序列化程序（json.net 很好且易于使用）可以获得更好的性能，因为它的`DataContractSerializer`速度非常慢。

# iphone - 故事板无需单击按钮即可应用推送（模态，推送，自定义）

> ID：10517145
> 
> 赞同：0
> 
> 时间：2012-05-09T13:28:59.990
> 
> 标签：iphone, ios, ipad, uiviewcontroller, xcode-storyboard

故事板推送模式自定义 segue。

我正在处理情节提要，并在一个视图上单击一个按钮，一个 Web 服务被调用。成功后，我需要推送到其他视图控制器。为此，我添加了一个视图控制器并将其类从检查器设置为视图。

但是我没有在情节提要上应用任何segue，但我想将其推送到该视图控制器

`[self.navigationcontroller pushviewcontroller animated:YES];`

任何帮助，将不胜感激。

谢谢维卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:32:37.063

将 navigationController 添加到您的视图中，然后推送到下一个视图。

# java - 在 BouncyCastle 库中将 SignerID 转换为 X509CertSelector

> ID：10517148
> 
> 赞同：0
> 
> 时间：2012-05-09T13:29:07.927
> 
> 标签：java, security, x509certificate, bouncycastle, x509

我正在尝试验证特定消息是否使用来自我自己的信任锚识别的实体证书的有效签名进行签名。我正在这样做：

```
public static boolean isValid(CMSSignedData signedData, X509Certificate rootCert) throws Exception
{
    CertStore certsAndCRLs = signedData.getCertificatesAndCRLs("Collection", "BC");
    SignerInformationStore signers = signedData.getSignerInfos();
    Iterator it = signers.getSigners().iterator();

    if (it.hasNext()){
        SignerInformation signer = (SignerInformation)it.next();

        X509CertSelector signerConstraints = signer.getSID();

        PKIXCertPathBuilderResult result = buildPath(rootCert, signerID, certsAndCRLs);

        return signer.verify(result.getPublicKey(), "BC");
    }
    return false;
} 
```

但是这一行给了我一个编译错误：

```
X509CertSelector signerConstraints = signer.getSID(); 
```

因为它无法从 SignerId 转换为 X509CertSelector。我尝试使用显式转换：

```
X509CertSelector signerConstraints = (CertSelector) signer.getSID(); 
```

和：

```
X509CertSelector signerConstraints = (X509CertSelector) signer.getSID(); 
```

没有结果。我怎样才能做到这一点？谢谢

PS：请注意，这段代码是从 David Hook 的“Beginning Cryptography with Java”中提取的，但它不能编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:44:29.677

我昨天解决了我自己的问题。我认为这与作为我项目的外部存档包含的 .jar 相关。现在，我正在使用这些：

```
bcprov-jdk16-145.jar
bcmail-jdk16-145.jar 
```

代替：

```
bcprov-jdk15on-147.jar
bcmail-jdk15on-147.jar 
```

也许旧版本不支持这种隐式转换。

**编辑**：大卫胡克在[http://bouncy-castle.1462172.n4.nabble.com/Problem-with-SignerID-and-X509CertSelector-td4620461.html中的回答](http://bouncy-castle.1462172.n4.nabble.com/Problem-with-SignerID-and-X509CertSelector-td4620461.html)

> 使用 org.bouncycastle.cert.selector.jcajce.JcaX509CertSelectorConverter - 不幸的是，“使用 Java 开始加密”中的代码现在已经过时了。我想我得把文字处理器拿出来了。
> 
> 问候，
> 
> 大卫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-03T13:06:21.793

在 1.52 上使用 BouncyCastle bcmail-jdk15 我成功地做到了这一点：

```
X509CertificateHolderSelector x509CertificateHolderSelector = new X509CertificateHolderSelector(info.getSID().getSubjectKeyIdentifier());
X509CertSelector certSelector = new JcaX509CertSelectorConverter().getCertSelector(x509CertificateHolderSelector);
@SuppressWarnings("unchecked")
Collection<X509Certificate> certCollection = (Collection<X509Certificate>) certs.getCertificates(certSelector); 
```

# ios - Canvas getImageData 在移动 Safari 上不起作用

> ID：10517154
> 
> 赞同：2
> 
> 时间：2012-05-09T13:29:17.190
> 
> 标签：ios, html, mobile, canvas, safari

我正在尝试从移动 safari（iOS 5.0）上的画布中提取像素，但我收到了一个奇怪的 TypeError：

```
> var ctx = canvas.getContext("2d");
> ctx.getImageData(0,0,canvas.width,canvas.height);

> ImageDataConstructor
    constructor: Object
    data: TypeError: 'undefined' is not an object
    height: 50
    width: 50
    __proto__: Object 
```

不知何故，这段极其微不足道的代码不适用于移动 safari（使用 Weinre 进行测试），但它确实可以在桌面 safari 和 chrome 上运行……谁能帮助我？为什么数据对象报告 TypeError？

谢谢，

抢

PS。我尝试了一个空画布，一个包含实际内容的画布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T03:30:32.433

该文档说 canvas.drawImage() 在 iOS 上不可用。

[http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/HTML-canvas-guide/PuttingVideoonCanvas/PuttingVideoonCanvas.html](http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/HTML-canvas-guide/PuttingVideoonCanvas/PuttingVideoonCanvas.html)

我假设它是对称的并且 canvas.getImageData() 也被禁用 8(

# jquery - 拖放时从项目中删除拖动功能

> ID：10517161
> 
> 赞同：1
> 
> 时间：2012-05-09T13:29:35.083
> 
> 标签：jquery

我有一个可拖动的项目列表：

```
$( "li" ).draggable({
      connectToSortable: ".sortable",
      helper: "clone"
}); 
```

一旦一个项目被拖放，我想防止用户再次拖动同一个项目。我能做到这一点吗？可能在刚刚拖动的项目中添加一些 css 吗？

如果用户没有放下该项目（取消拖动），那么该项目的未来拖动应该保持启用

**注意：**我无法删除 helper:`clone`属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:36:58.513

像这样的东西可能会起作用：

```
$( "li" ).draggable({
           connectToSortable: ".sortable",
           helper: "clone",
           stop: function(event, ui) { $(this).draggable('disable') }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:32:57.813

在监听 dragstop 事件时禁用可拖动。

```
$( ".selector" ).bind( "dragstop", function(event, ui) {
    $( ".selector" ).draggable({ disabled: true });
}); 
```

# facebook - Facebook 连接登录

> ID：10517170
> 
> 赞同：0
> 
> 时间：2012-05-09T13:30:13.573
> 
> 标签：facebook, connect

我有 facebook 登录在我的网站上工作。

但是当用户登录时，按钮保持不变，我希望它更改为用户的图像和名称。

这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:51:55.900

用户登录后，只需向“/me?fields=name,picture”发出请求，使用该数据修改 dom 并将按钮替换为用户的名称和图片。

[用Graph Explorer](http://developers.facebook.com/tools/explorer?method=GET&path=me?fields=name,picture)试试这个查询。

# mongodb - 在 mongodb 中选择 sum()

> ID：10517177
> 
> 赞同：3
> 
> 时间：2012-05-09T13:30:32.823
> 
> 标签：mongodb, mongoid

假设我需要知道我一生中赚了多少钱：我会在 SQL 中做什么是这样的：

```
select sum(salary) from employee_salary where employee_id=1000; 
```

有没有一些简单的方法可以通过 mongoid、rails 在 mongoDB 中执行此操作？甚至不要想用 map/reduce 向我求婚。

我发现的最简单的方法是：

```
db.employee_salary.group(
    { 
        cond: { "employee_id":1000 },
        reduce: function(obj,prev) { prev.sum += obj.salary; },
        initial: { sum: 0 }
    }
)[0].sum; 
```

但是看起来好难看...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T13:36:13.963

试试这个：

```
Employee.where(id: 1000).sum(:salary) 
```

# zend-form - 禁用布局时的 zend dojo 表单

> ID：10517179
> 
> 赞同：0
> 
> 时间：2012-05-09T13:30:33.393
> 
> 标签：zend-form, zend-form-element

我想在弹出窗口中使用 zend dojo 表单，现在弹出页面已禁用布局。有没有办法让该表单在弹出窗口中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:29:47.950

我专门为我的弹出表单创建了另一个布局，并将该布局分配给通过控制器查看。并在该布局中启用了道场。

# javascript - 如何制作html标签旋转效果？

> ID：10517180
> 
> 赞同：-1
> 
> 时间：2012-05-09T13:30:36.900
> 
> 标签：javascript, html, image

我有图像移动到屏幕右侧，我想为它们添加旋转效果但是。应该就像当一个图像超出浏览器空间时，它应该从浏览器的另一侧返回。不是在整个图像离开后，或者不应该通过扩展水平滚动条离开侧面浏览器空间。标签可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:41:57.900

你可能会觉得这很有用

[动画-css-transforms-firefox-webkit](http://www.zachstronaut.com/posts/2009/02/17/animate-css-transforms-firefox-webkit.html)

您可以遵循的另一个示例是：

[http://code.google.com/p/jqueryrotate/wiki/Examples](http://code.google.com/p/jqueryrotate/wiki/Examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:06:33.357

HTML 无法为您实现这一点。它是一种标记语言，与表示或行为无关。

要创建您描述的内容，您将需要 Javascript。你应该投入大量时间来学习它，当你准备好时，你应该尝试编写你的“图像循环脚本”。然后你会遇到问题，StackOverflow 社区会很乐意提供帮助。

# jsp - 在数据库中插入下拉值

> ID：10517191
> 
> 赞同：0
> 
> 时间：2012-05-09T13:31:47.910
> 
> 标签：jsp

![在此处输入图像描述](../Images/0e38a5f3c23ba958abdae08899c4975c.png)我需要从 jsp 页面中的表中获取值并将其插入数据库。如何捕获此值，请提出建议。如何获取下拉列表值和相应的 workorderID。如果有任何其他方法可以实现这一点，请建议

我在数据库中的表是 work_assigned，有 2 列 workorder_id,Technician_id

## myJsp.jsp

```
 <form action="TechAssigned![ ][2]">
           <%
           ArrayList allworkorders=(ArrayList)session.getAttribute("ALL_WORK_ORDERS");
           ArrayList allusers=(ArrayList)session.getAttribute("ALL_USERS");

            out.println("<td align=\"center\">"+wto.getWorkorderid()+"</td>");

            out.println("<select name=\"technician_assigned\">");
    out.println("<option>Select </option>");
    Iterator eng=alleng.iterator();
    while(eng.hasNext()){
        UserTO uto1=(UserTO)eng.next();
        out.println("<option value=\""+uto1.getUserid()+" "+wto.getWorkorderid()+"\">"+uto1.getFirstname()+" "+uto1.getLastname()+"</option>");

    }
    out.println("</select>");   
           %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:03:16.467

1 在 jsp 中的表单中指定一些操作：

```
<form action="/yourprocessingurl" method="post"> 
```

2 在 web.xml 中定义 servlet 和它的 url 映射。该 servlet 将处理您的请求。

```
<servlet>
    <servlet-name>processingServlet</servlet-name>
    <servlet-class>your.packege.ProcessingServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>processingServlet</servlet-name>
    <url-pattern>/yourprocessingurl</url-pattern>
</servlet-mapping> 
```

3 在 servlet 中从请求中获取参数并使用 JDBC 或其他技术保存到数据库。

```
String selectedValue = request.getParameter("technician_assigned"); 
```

# c# - C#在点击单词时转到行？

> ID：10517192
> 
> 赞同：1
> 
> 时间：2012-05-09T13:32:02.603
> 
> 标签：c#, winforms, richtextbox

所以我试过用谷歌搜索，但它没有返回任何有用的东西，或者至少没有任何有助于这种特殊情况的东西。本质上，我想做的是在richtexbox 中有一个单词，该单词链接到同一个richtextbox 中其他地方的一行，这样当用户单击该单词时，它们就会被带到相关的行。

我考虑过存储每个链接单词的数组及其索引和长度，每次用户导航文本框并在选择时滚动到链接的行号时都会搜索该数组，但这似乎不是很有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:37:44.370

恐怕richtextbox不支持开箱即用的任何东西，所以你的建议实际上是一个很好的方法。为了提高性能，您可以使用字典来查找选定的链接。性能损失应该不明显。

# python - Django中的信号是什么

> ID：10517193
> 
> 赞同：1
> 
> 时间：2012-05-09T13:32:03.307
> 
> 标签：python, django, signals

我来自 java 背景，但我正在开发一个基于 django 的网站。为此，我时不时地寻找一些东西，并且不断地看到对“信号”的引用。我不确定这是 django 的东西，python 的东西，还是我以前从未关心过的其他东西。

谁能告诉我什么是“信号”？

干杯。

更新我对信号的想法为零。我知道，我知道，这可能是一个*很大*的问题……但你知道当你读到某件事时，你不知道它是什么——那种未知的未知之类的东西？从评论中......一个信号来自操作系统？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T13:41:07.983

哎呀，评论都忽略了明显的答案是的，有操作系统信号，但在 Django 应用程序中，它更有可能指的是[Django 的信号](https://docs.djangoproject.com/en/dev/topics/signals/)。它们让您可以监听 Django 应用程序中发生的某些事件。

# c# - 无法在托管代码中捕获本机异常

> ID：10517199
> 
> 赞同：17
> 
> 时间：2012-05-09T13:32:18.950
> 
> 标签：c#, .net, exception-handling

我有一个混合的 .NET 和本机代码控制台应用程序。应用程序进程因 Visual C 运行时库致命错误而终止。即使我使用以下内容，托管代码也不会捕获本机异常：

1.  尝试/捕获块
2.  `AppDomain.UnHandledExption += ...`
3.  `RuntimeCompatibilityAttribute(WrapNonExceptionThrows = true)`在 AssmblyInfo 文件中标记。

我还可以做些什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-09T13:35:28.670

.NET 4 中的本机异常已更改，因此无法使用标准 catch 块捕获它们。您特别必须标记抛出异常的函数`[HandleProcessCorruptedStateExceptions]`以便能够捕获它。

更多在这里， http: [//msdn.microsoft.com/en-us/magazine/dd419661.aspx](http://msdn.microsoft.com/en-us/magazine/dd419661.aspx)

注意那篇文章中的注释，比如如果你想正常捕获它们而不是按照他们的建议执行 finally 块并退出，添加`legacyCorruptedState­­ExceptionsPolicy=true`到你的配置文件中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-09T13:38:40.137

不带 () 的捕获将捕获不符合 CLS 的异常，包括本机异常。

```
try
{

}
catch
{

} 
```

# jsf - 按原样打印 HTML 而不是实际的 HTML

> ID：10517200
> 
> 赞同：20
> 
> 时间：2012-05-09T13:32:19.613
> 
> 标签：jsf, html-escape

我正在使用 JSF 1.2

我正在尝试使用打印文本`<h:outputtext>`

```
<h:outputText id="warningDose" styleClass="redText" value="#{templatePrescriptionMaintenanceBackingBean.doseWarningText}"></h:outputText> 
```

现在这个变量包含带有 html 标签的文本。`<b>`等等`<i>`……

但这会按原样显示内容，而不是实际的粗体或斜体 html 输出。

有什么方法可以`<h:outputText>`让它给出 html 响应？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-09T13:57:44.797

您应该在 h:outputText 标签中设置：

```
escape="false" 
```

但是请记住，在 JSF 视图页面和底层 bean 之间混合“视图”构造（即创建带有 HTML 标记的字符串）是一种不好的做法。所有的“视图制作”都应该在视图页面中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T13:51:23.140

只需将其设置为不逃脱。

```
<h:outputText id="warningDose" escape="false" styleClass="redText" value="#{templatePrescriptionMaintenanceBackingBean.doseWarningText}"></h:outputText> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-12T16:33:10.367

我有一个非常相似的问题。我的问题在[这里](https://stackoverflow.com/questions/37172950/how-to-display-html-tags-within-houtputtext-tags)

我的 xhtml 页面看起来像 -

```
<h:outputText  itemEscaped="false" escape="false"    value="#{singleViewResultDO.associatedCode}" /> 
```

associatedCode 正在从我想使用 HTML 标记进行条件样式的 SQL 查询中获取值。

这是我的 SQL 查询的样子：

```
Select A, REPLACE(Wm_Concat(DISTINCT  CASE WHEN sv.rmvd = 0 THEN  ' '||sv.CMPNION_CD  ELSE '<span style=\"color:red; \">' || ' '||sv.CMPNION_CD|| '</span>' END),' , ','') ,  "
from Table 
```

忽略 REPLACE 和 WM_CONCAT，因为它用于显示逗号分隔值。相关的代码是

```
CASE WHEN sv.rmvd = 0 THEN  ' '||sv.CMPNION_CD  ELSE '<span style=\"color:red; \">' || ' '||sv.CMPNION_CD|| '</span>' END 
```

我想拥有基于条件 rmvd = 0 的标签。由于我的 中有 escape="false" ，因此我不需要在查询中转义我的 html 标签。我的意思是不需要将 < 转换为 < > 到 > 和 " 到 "

另请注意，由于我的跨度中有双引号 ""，因此我需要将其转义一次，以便在到达 .

我得到了我想要的输出 - 红色的 8000778

# wordpress - WordPress 到 Drupal 6 提要

> ID：10517203
> 
> 赞同：0
> 
> 时间：2012-05-09T13:32:26.083
> 
> 标签：wordpress, drupal, feed

我有一个 drupal 网站，我正在使用 wordpress 博客。我的目标是使用 feed burner 将 wordpress 博客的所有帖子捕获到我的 drupal 网站。我正在使用 feeds 模块（drupal），但问题是“图像标签”是尽管显示了 wordpress 的所有其他内容，但未显示在 drupal 站点中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:22:00.043

可能更多的是在 Drupal 端设置的输入过滤器，而不是提要的问题。

检查 Drupal 端允许的标签，并确保标签是允许的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:20:10.650

您可以在这里做两件事：有一个名为聚合器的核心模块，它应该可以解决问题。

对于图像，您必须显示与 wordpress 相同的路径，或者自定义代码以将其保存在本地然后显示。

顺便说一句，您是否也将帖子保存到 Drupal？

# javascript - 使用 jQuery/Ember 框架访问丢弃的项目

> ID：10517205
> 
> 赞同：0
> 
> 时间：2012-05-09T13:32:37.360
> 
> 标签：javascript, jquery-ui, ember.js, jquery-ui-droppable

我正在使用 ember.js 和 jQuery-ui 框架。目前，我能够让元素可拖动，并且可以在将项目放入特定 div 时触发事件。

但是，我无法获得拖放到 div 上的实际元素。传入的事件变量表示元素被拖放到的 div，“this”表示一个 ember 对象。

我如何能够访问被丢弃的项目？

我正在使用的代码概述：

```
App.MyView = Em.View.extend({
    ...
    drag: function (event) {
        // This works correctly and the event here represents the actual element
        console.log("Dragging");
    },
    drop: function (event) {
        // This is where I am not able to access the dropped iem
        console.log("Dropped");
    },
    ...
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:36:08.563

如果您使用 jQuery 可拖动/可放置，`ui.draggable`应该是您正在寻找的。

[http://jqueryui.com/demos/droppable/#event-drop](http://jqueryui.com/demos/droppable/#event-drop)

`drop: function(event, ui) { ... }`

> 在回调中，$(this) 表示可拖放的可拖放对象。ui.draggable 表示可拖动。

# java - 构造函数java中的静态变量初始化

> ID：10517207
> 
> 赞同：2
> 
> 时间：2012-05-09T13:32:40.847
> 
> 标签：java, static, constructor

我想从下面的代码中了解静态变量 b 的值未初始化，尽管该值已在构造函数中初始化。

```
public class A {
       private static B b = null;
       public A() {
           if (b == null)
             b = new B();
       }

       public static void main(String[] args) {
           b.func();
       }
    } 
```

谢谢普尼斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T13:34:24.287

错误 - 这样做：

```
public class A {
       private static B b = null;

       static {
             b = new B();
       }

       public A() {
       }

       public static void main(String[] args) {
           b.func();
       }
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T13:36:32.913

你永远不会调用 A() 构造函数。main 函数是静态的，这意味着它不“属于” A 的实例。因此，当您输入 main 时，没有创建 A 的实例，因此从未调用过 A 构造函数并且 b 仍然为空。

如果运行此代码，您应该得到 NullPointerException。

如果添加 new A(); 在 b.func() 之前；那么你会没事的（代码仍然很奇怪）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T07:30:13.203

我认为你的问题有两个部分：

> 1) 为什么静态变量 b 的值没有被初始化，而值是在构造函数中初始化的？

Ans: 首先是在 main() 之前没有调用构造函数。在 main() 中调用构造函数。每当在 main() 中，您使用`new`as ：

```
public static void main(String args[]){
MyClass myclass= new MyClass()
} 
```

然后只调用构造函数。

在您的代码中，静态变量 b 未初始化，因为您在构造函数 A() 中对其进行了初始化，但从未调用过此构造函数。您可以在代码中调用 A() 构造函数：

```
public static void main(String[] args) {
          A a=new A(); // constructor gets called here.
           b.func();
       } 
```

> 2）初始化静态变量的正确方法是什么？

初始化静态变量的正确方法是使用静态初始化块，而不是在构造函数中初始化它们，如上面 duffymo 给出的答案所示。

```
static {
  b = new B();
 } 
```

您还可以使用：

```
public class A {
       private static B b = new B();

       public A() {
       }

       public static void main(String[] args) {
           b.func();
       }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T13:48:47.047

你的问题是为了帮助你“理解为什么”行为是这样的。原因是调用静态方法时不会调用 Class A 的构造函数`main()`。

如果您要实例化一个类型的对象，`A`那么将调用构造函数并引用`B`初始化。

我建议总是在执行之前实例化一个类，这`static void main()`是一个好的做法。如果您开始使用框架（例如 Spring），您最好创建类的实例，而不是仅仅编写类似于编写过程代码的静态方法。

不使用静态初始化程序并遵循此处的原则大纲的解决方案是......

```
public class A {
    private static B b = null;

    public A() {
        if (b == null)
          b = new B();
    }

    public static void main(String[] args) {
        A a = new A();
        a.callFunc();
    }

    public void callFunc() {
        b.func();
    }
} 
```

如您所见，您需要一种引用的方法，因此`b.func() method`我添加了一个`a.callFunc()`

# jquery - 获取由类名标识的 td 元素的位置（索引）

> ID：10517209
> 
> 赞同：1
> 
> 时间：2012-05-09T13:32:47.383
> 
> 标签：jquery

我有这个代码

```
<tr id="3" class="gradeA odd focus row_selected">
    <td class="center">Kids Footwear 2</td>
    <td class="sorting_1 center focus">200</td>
    <td class="center">50</td>
    <td class="center">200</td>
    <td class="center">30-34</td>
    <td class="center">234-343</td>
    <td class="center">200</td>
    <td class="center">25</td>
    <td class="center">1.23</td>
</tr> 
```

我想获取`<td>`包含该类的元素的索引值`focus`

因此，如果在`<td>`元素内设置焦点类

```
first `<td>` then return 0
second `<td>` then return 1
third `<td>` then return 2 
```

等等。我如何在 jQuery 中使用这个？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:34:25.707

您可以使用该[`index`](http://api.jquery.com/index/)方法。如果您有多个`tr`包含 a 类的元素，`td`那么`focus`您可能希望使选择器特定于`tr`您关心的：

```
var index = $("td.focus").index(); 
```

来自 jQuery 文档：

> 如果没有参数传递给 .index() 方法，则返回值是一个整数，指示 jQuery 对象中的第一个元素相对于其兄弟元素的位置。

**更新**（见评论）

您可以使用`children`或`find`从 中获取`td`元素`tr`，然后使用上面的代码：

```
var index = tr.find("td.focus").index(); 
```

# xamarin.ios - 在 MonoDevelop 中，如何在键入 /// 时关闭详细注释生成

> ID：10517210
> 
> 赞同：4
> 
> 时间：2012-05-09T13:32:52.997
> 
> 标签：xamarin.ios, monodevelop

这更像是一个 MonoDevelop 问题。我真的很喜欢使用 '///' 并获得 VisualStudio 提供的评论的骨架轮廓。但我讨厌默认提供的额外填充文本，因为它没有增加任何实际价值（它只是重申我已经输入的内容！）。对于我的生活，我找不到保留 XML 注释生成但没有额外文本的选项。有一个已针对此问题修复的错误报告 ( [https://bugzilla.novell.com/show_bug.cgi?id=606222](https://bugzilla.novell.com/show_bug.cgi?id=606222) ) 但我没有看到该选项在哪里解决。

我想要生成的只是：

```
 /// <summary>
    /// 
    /// </summary>
    /// <param name="bar"></param>
    public void Foo(string bar)
    {
    } 
```

TL; 博士；

**在 MonoDevelop 中是否有（以及在哪里）关闭自动生成的详细注释的选项，但保留方法标头的样板/// 注释？**

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T23:05:06.143

不支持。我很确定投诉的解决方案是撤消将有两个步骤，因此您可以轻松删除自动填充的值。

添加选项是一个滑坡。例如，您可能想要：

```
/// <summary>
/// 
/// </summary>
/// <param name="bar"></param>
public void Foo(string bar)
{
} 
```

但我可能想要

```
/// <summary></summary>
public void Foo(string bar)
{
} 
```

其他人可能想要

```
/// <summary></summary>
/// <param name="bar"></param>
public void Foo(string bar)
{
} 
```

支持这一点的选项 UI 将非常复杂，并且 MD 已经有太多的选项，因此必须为每个新选项提供强有力的案例。这种行为可能并不适合每个人，但它非常好，调整生成的文档仍然比从头开始输入要容易得多。

但是，生成评论的插件[是开源的](https://github.com/mono/monodevelop/tree/master/main/src/addins/MonoDevelop.DocFood)，因此您可以轻松地随意修改它。

# magento - Magento - 非出售产品

> ID：10517212
> 
> 赞同：4
> 
> 时间：2012-05-09T13:33:02.937
> 
> 标签：magento, product, catalog

我想将一些产品设置为“非销售”，删除“添加到购物车”按钮并添加联系表格的链接。

我正在寻找这个解决方案几个星期。搜索，我发现了这个帖子：

[http://www.e-commercewebdesign.co.uk/blog/magento-tutorials/non-salable-products-with-attribute-sets.php](http://www.e-commercewebdesign.co.uk/blog/magento-tutorials/non-salable-products-with-attribute-sets.php)

但我不能让它工作。有人可以帮我提供更多细节吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T20:42:08.350

该教程将起作用，但我会以不同的方式进行。

首先，该教程强制您使用特定的属性集 ID。与产品 ID、类别 ID 等一样，如果您正在管理开发/生产服务器环境，这可能会发生变化。我不会推荐这个。

就个人而言（我知道有更好的方法），我会创建一个新的产品属性，类似于“非卖品”。将此属性设为“是/否”，默认为“否”（出售）。

然后，在您有添加到购物车按钮的地方，例如在 view.phtml 中，找到显示添加到购物车按钮的代码块，例如：

```
 <?php echo $this->getChildHtml('addtocart') ?> 
```

用以下内容包装这个块：

```
 <?php if(!$_product->getNotForSale()) : ?>
      <?php echo $this->getChildHtml('addtocart') ?>
 <?php endif ?> 
```

然后对于那些您不想被购买的产品，将产品管理中的属性值设置为“是”。

此外，您可以在其中绑定一个 else 语句以显示备用按钮或其他任何内容。

此方法基本相同，但为您提供了更细粒度的控制，因为您不必弄乱各种属性集及其 ID。控制属性名称也比控制属性集 ID 容易得多。

--- 编辑 --- 放置内容而不是按钮：

```
<?php if(!$_product->getNotForSale()) : ?>
    <?php echo $this->getChildHtml('addtocart') ?>
<?php else : ?>
    <?php echo $this->__('Call Us to Order') ?>
    ... or whatever else you may want here ...
<?php endif ?> 
```

# symfony1 - 如何在 symfony 框架中设置 noindex 和 nofollow 元数据？

> ID：10517214
> 
> 赞同：0
> 
> 时间：2012-05-09T13:33:14.497
> 
> 标签：symfony1, metadata, robot, nofollow, noindex

我正在使用 symfony 1.0.6，站点结构如下；

应用程序/前端/模块/自定义页面

我想将“noindex 和 nofollow”元数据设置为 custompages 模块的页面。

我试着给如下：

```
metas:
  robots: noindex,nofollow 
```

但它不起作用。

请帮忙...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:19:29.207

您不会忘记 view.yml 文件中的父“默认”容器吗？

```
default:
  metas:
    robots: noindex,nofollow 
```

# c#-4.0 - 仅通过 IList 时存储 IList 的 Task

> ID：10517215
> 
> 赞同：0
> 
> 时间：2012-05-09T13:33:15.260
> 
> 标签：c#-4.0, task-parallel-library

我有以下财产：

```
public Func<EntityKey, string, Task<IList<MyProperty>>> RequestHandler { get; private set; } 
```

我的类上还有一个构造函数，如下所示：

```
public RequestHandlerTasks(Func<EntityKey, string, IList<MyProperty>> handler) 
```

如何操作传递给构造函数的“处理程序”，以便将其存储在“RequestHandler”属性中？

如果您还没有发现它，构造函数使用“IList”并且属性需要IList 的Task。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:47:47.573

目前尚不清楚语义是什么意思，但它*可能*很简单：

```
public RequestHandlerTasks(Func<EntityKey, string, IList<MyProperty>> handler)
{
    // Whenever the RequestHandler delegate is called, it will start a new task.
    RequestHandler = (arg1, arg2) =>
        Task.Factory.StartNew(() => handler(arg1, arg2));
} 
```

这将*编译*- 它是否做你*想要*的是另一回事......

# java - 当从第三个（插件）引用时，Powermock 导致 Eclipse 中 JUnit Plugin-Test 的 ClassNotFoundException

> ID：10517217
> 
> 赞同：4
> 
> 时间：2012-05-09T13:33:25.383
> 
> 标签：java, junit, eclipse-rcp, classnotfoundexception, powermock

我正在 Eclipse 中编写 JUnit-Tests 来测试*没有 Maven*的 RCP-Eclipse-Application 。对于某些测试用例，必须使用 Powermock（使用 Easymock）来模拟对象创建和静态方法。

我有一个包含应该是 testet 的类的插件和包含相应测试的第二个插件。让我们捐赠它们 PluginObject 和 PluginTest：

工作情况：

```
* PluginObject
  - src 
      - ClassUnderTest

* PluginTest
 - src
     - TestCase
 - lib
     - easymock
     - powermock
     - ... [aditional classes (like JavaAssist)] 
```

使用 PLuginTest 中带有 powermock-Jar 的配置，TestCase 和 Plugins-Manifest-Runtim 中的配置运行正常并返回所需的结果。

我的 TestCase 从以下几行开始，当前使用*@RunWith* -Annotation：

```
@RunWith(PowerMockRunner.class)
@PowerMockIgnore({ "javax.management.*", 
"javax.xml.parsers.*",
"com.sun.org.apache.xerces.internal.jaxp.*",
"javax.xml.*",
"ch.qos.logback.classic.*",
"org.slf4j.*",
"org.eclipse.core.runtime.jobs.ISchedulingRule" })
@PrepareForTest    ({Controller.class,ProcessLoaderFactory.class,Engine.class,CommandCollector.class})
@SuppressStaticInitializationFor({"Controller","   ProcessLoaderFactory","Engine","CommandCollector"})
public class ControllerTest {
...
[skipped package information due to copyrights] 
```

* * *

但是我有多个插件想要在我的应用程序中使用 Powermock 进行模拟，这对我来说将共享库提取到另一个特殊插件似乎是个好主意 - 我们称之为 Test.Util：

```
* PluginObject
  - src 
      - ClassUnderTest

* PluginTest
 - src
     - TestCase

* Test.Util
 - lib
     - easymock
     - powermock
     - ... [aditional classes (like JavaAssist)] 
```

对于除 Powermock 之外的所有其他库，我没有任何问题，但是当我将 Powermock 从 PluginTest 移动到 Test.Util-Plugin 时，在启动 JUnit Plugin-Test 时初始化时出现“ClassNotFoundException”。（正常的 JUnit-Test 不会抛出此错误）

```
java.lang.ClassNotFoundException: xxx.yyy.zzz.MyTest
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(Unknown Source)
at org.powermock.core.classloader.MockClassLoader.loadModifiedClass(MockClassLoader.java:143)
at org.powermock.core.classloader.DeferSupportingClassLoader.loadClass(DeferSupportingClassLoader.java:67)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Unknown Source)
at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.createDelegatorFromClassloader(JUnit4TestSuiteChunkerImpl.java:133)
at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.createDelegatorFromClassloader(JUnit4TestSuiteChunkerImpl.java:39)
at org.powermock.tests.utils.impl.AbstractTestSuiteChunkerImpl.createTestDelegators(AbstractTestSuiteChunkerImpl.java:217)
at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.<init>(JUnit4TestSuiteChunkerImpl.java:59)
at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.<init>(AbstractCommonPowerMockRunner.java:32)
at org.powermock.modules.junit4.PowerMockRunner.<init>(PowerMockRunner.java:31)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:31)
at org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:24)
at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)
at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.<init>(JUnit4TestReference.java:33)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestClassReference.<init>(JUnit4TestClassReference.java:25)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:48)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.main(RemotePluginTestRunner.java:62)
at org.eclipse.pde.internal.junit.runtime.PlatformUITestHarness$1.run(PlatformUITestHarness.java:47)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4140)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3757)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2696)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2660)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2494)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:674)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:667)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
at org.eclipse.pde.internal.junit.runtime.NonUIThreadTestApplication.runApp(NonUIThreadTestApplication.java:54)
at org.eclipse.pde.internal.junit.runtime.UITestApplication.runApp(UITestApplication.java:41)
at org.eclipse.pde.internal.junit.runtime.NonUIThreadTestApplication.start(NonUIThreadTestApplication.java:48)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

*我在 MANIFEST.MF 的 Runtime 下*的 Classpath 中配置了 Test.Util，并导出了这些插件的每个包。在 Eclipse 中，正确的库是从 TestCase 链接的。

我还使用带有 JUnit-Rule 而不是*@RunWith*的 Bootstrapping ，但它会导致相同的 ClassNotFoundException。问题没有改变。

我现在尝试了很多东西 - 重新配置插件测试的运行配置，在清单中设置 ClassPath: .\，延迟/非延迟加载以及为 PluginTest 和 Test.Util-Plugin 设置 Buddy-ClassLoading。

经过数小时的网络尝试和搜索，我仍然不知道为什么 Powermock 会导致此异常，如果它是从 Test-Plugin 提取到第三个插件中，以及我如何使这项工作正常工作。我目前不能说我的应用程序中是否有错误配置。

有谁遇到过相同或类似的问题，或者得到了很好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:41:35.197

“注册”政策对我没有帮助，我也不想用 util 插件注册每个插件。我的解决方案是在“Test.Util”中声明：

Eclipse-BuddyPolicy：依赖、注册、全局、应用

这使 PowerMockito 或多或少地可以使用所有类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-17T08:13:55.667

您需要一个具有正确 OSGI 清单和 OSGI 依赖项的 Powermock 版本。现在你可以试试我的小项目，其中包含 Powermock 1.5.4 的 P2 更新站点。请参阅[https://code.google.com/p/powermock/OSGI](https://code.google.com/p/powermock/)部分（直接链接：[https](https://code.google.com/p/powermock-osgi) ://code.google.com/p/powermock-osgi ）。

在 OSGI 环境中，您**只能使用导出包中的 Powermock 操作类**。在我的 P2 更新站点上，您会找到一个 Powermock，它具有：

```
Eclipse-BuddyPolicy: global,ext,boot 
```

这基本上意味着 Powermock 可以访问任何导出的包。您仍然必须导出经过测试的包。如果您不想公开所有捆绑包的包，您仍然可以在清单中使用[X-Friends](http://blog.vogella.com/2010/05/25/x-friends-in-equinox/)指令。您使用 Powermock 将包导出为 X-Friend，仅此而已。

**更新：** 回答克里斯的问题：

> 有趣的是，你能解释一下为什么 PowerMock 只能操作导出的类吗？我目前的理解是，在运行时所有包都是可见的，只有在构建/编译时才重要。

如果你使用 Class.forName() 来获取 OSGI 中的类运行时，你将使用你的包类加载器来获取你的名字的类。这个包类加载器只看到导入包中的类。Powermock 包具有动态导入，但 Powermock 包的类加载器仍然只能看到任何包的任何导出包中的类。

如果您知道您的类来自哪里，哪个包将其导出，那么您将能够获取该包的类加载器，并从该类加载器中获取搜索到的类。但这当然很复杂，这意味着 Powermock 包需要一些 hacky 魔术类加载器，它隐藏了这个细节，但这样的东西不存在。

有关详细信息，请参阅[http://olegz.wordpress.com/2008/11/05/osgi-and-classforname/](http://olegz.wordpress.com/2008/11/05/osgi-and-classforname/)

**更新：** Powermock-osgi 现在托管在 github 上。[https://github.com/liptga/powermock-osgi](https://github.com/liptga/powermock-osgi)

更新站点：[https ://raw.githubusercontent.com/liptga/powermock-osgi/master/update-site/1.5.6.0](https://raw.githubusercontent.com/liptga/powermock-osgi/master/update-site/1.5.6.0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T09:17:01.880

我已经删除了我之前的评论，因为我成功地设法使用存储在单个插件中的 PowerMock 库运行 pde 插件测试。要使用您的示例回答您的问题，您需要在您的 Test.Util 中添加以下行（您不应使用大写的插件 ID）MANIFEST.MF

```
Eclipse-BuddyPolicy: registered 
```

然后，如果您使用 PluginTest 插件是一个普通插件，则在它的 MANIFEST.MF 中添加以下行

```
Eclipse-RegisterBuddy: Test.Util 
```

如果您的 PluginTest 是包 PluginObject 的一个片段，那么您必须在作为 PluginObject 清单的主机包中添加上一行。希望这可以帮助 ;）

# windows-phone-7 - 以编程方式生成布局 (XAML)

> ID：10517219
> 
> 赞同：1
> 
> 时间：2012-05-09T13:33:30.970
> 
> 标签：windows-phone-7, xaml

如何以编程方式生成布局 (XAML)？

假设我有某种循环。在每次我想用我得到的值生成它之后：

```
 <Grid Height="150" Name="grid1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition Width="200" />
                    </Grid.ColumnDefinitions>
                    <Image Height="150" Name="image1" Stretch="Fill" Width="200" Grid.Column="1" Source="/Ilm;component/Images/testicon.png" HorizontalAlignment="Right" VerticalAlignment="Top" />
                    <TextBlock Height="51" Name="textBlock1" Text="Paris" Margin="12,20,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" FontSize="40" />
                    <TextBlock FontSize="40" Height="51" HorizontalAlignment="Left" Margin="13,75,0,0" Name="textBlock2" Text="19°C" VerticalAlignment="Top" />
                </Grid> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T13:49:51.777

要向网格添加新行，您需要添加新行定义，然后添加新控件。这将类似于以下逻辑：

```
rowNumber = 0; // Set the current row that you are adding 
grid1.RowDefinitions.Add(new RowDefinition());

Image img = new Image();
img.Height = 150;
img.Name = "image1";
img.Stretch = Stretch.Fill;
img.Width = 200;
img.HorizontalAlignment = HorizontalAlignment.Right;
img.VerticalAlignment = VerticalAlignment.Top;
// Set your image properties
img.SetValue(Grid.RowProperty, rowNumber);
img.SetValue(Grid.ColumnProperty, 1);
grid1.Children.Add(img);

TextBlock tb1 = new TextBlock();
// Set your text block properties
tb1.SetValue(Grid.RowProperty, rowNumber);
tb1.SetValue(Grid.ColumnProperty, 0);
grid1.Children.Add(tb1);

TextBlock tb2 = new TextBlock();
// Set your text block properties
tb2.SetValue(Grid.RowProperty, rowNumber);
tb2.SetValue(Grid.ColumnProperty, 0);
grid1.Children.Add(tb2); 
```

您需要将要设置的属性放在我有评论的地方，并提供正确的行号（从零开始）。

要添加整个内容...

```
Grid grid1 = new Grid();
grid1.Height = 150;
grid1.Name = "grid1";
parentControl.Children.Add(grid1); // Note: parentControl is whatever control you are added this to
grid1.ColumnDefinitions.Add(new ColumnDefinition());
grid1.ColumnDefinitions.Add(new ColumnDefinition { Width = 200});

// From here insert the code for adding a row that is provided above 
```

就是这样。你只需要填写我没有提供的属性。请记住，您的变量`parentControl`会有所不同。您还没有提供要添加这些控件的控件，因此不清楚那将是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:57:16.993

一种选择是按照建议将所有代码作为[Hexxagonal](https://stackoverflow.com/a/10517495/9664)放置在代码隐藏中。

另一种更传统的选择是使用[ItemsControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)。这将通过将可视布局保留在 XAML 中而不是代码隐藏来实现更清晰的职责分离。

# jquery - 选择更改事件

> ID：10517222
> 
> 赞同：1
> 
> 时间：2012-05-09T13:33:48.217
> 
> 标签：jquery

JS

```
$(document).ready(function () {

$('#issue_no').change(function()
{
   alert('Value change to ' + $(this).attr('value'));
});

}); 
```

HTML

```
<select id='issue_no' name='issue_non'>
    <option value='_empty' selected='selected' style='display:none;'></option>
    <option value="ABC">Vol 1, No 1 (2012): Journal of JISRComputing</option>
</select> 
```

似乎不起作用。为什么？为什么更改选择值时不显示警报。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:41:09.873

确保你引用了 jQuery：

```
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js"></script> 
```

将您的代码包装在一个准备好的函数中：

```
$(function(){
  /* Code Here */
}); 
```

请务必检查您`id`的 's 和标记的结构是否正确：

```
<select id='issue_no' name='issue_non'>
    <option value='_empty' selected='selected' style='display:none;'></option>
    <option value="ABC">Vol 1, No 1 (2012): Journal of JISRComputing</option>
</select> 
```

编写格式良好的 JavaScript 以便于阅读：

```
$(function(){
    $("#issue_no").on("change", function(){
        alert( this.value );
    });
}); 
```

毕竟这一切，它的工作原理：http: [//jsbin.com/obadub/edit#javascript,html](http://jsbin.com/obadub/edit#javascript,html)

与往常一样，请确保您页面上的其他地方没有问题。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Alert Selected Value</title>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js"></script>
    <script>
    $(function(){
      $("#issue_no").on("change", function(){
        alert( this.value );
      });
    });
    </script>
  </head>
  <body>
    <select id='issue_no' name='issue_non'>
      <option value='_empty' selected='selected' style='display:none;'></option>
      <option value="ABC">Vol 1, No 1 (2012): Journal of JISRComputing</option>
    </select>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:36:41.453

[它有效](http://jsfiddle.net/zaeFM/)。您的问题可能出在其他地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:38:30.120

您要么需要使用`$(document).ready(function() {...});`（或其简写形式`$(function() {...});`），要么只需将该脚本移动到页面底部，就在结束正文标记 ( `</body>`) 之前。

此外，还有很多更好的选择来获取价值，而不是使用`.attr('value')`（我不相信它甚至会按照你的意愿工作）。调用`.val()`jQuery 函数 ( `$(this).val()`) 或直接访问属性，使用`this.value`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T13:39:28.707

你可以使用喜欢

```
$(function() {
   $('#issue_no').on("change", function()
   {
      alert('Value change to ' + $(this).val());
   });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T13:41:56.450

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script type="text/javascript" src="Scripts/jquery-1.7.1.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#issue_no').on('change', function () {
                alert('Value change to ' + $(this).attr('value'));
            });
        });
    </script>
</head>
<body>
    <select id='issue_no' name='issue_non'>
        <option value='_empty' selected='selected' style='display: none;'></option>
        <option value="ABC">Vol 1, No 1 (2012): Journal of JISRComputing</option>
    </select>
</body>
</html> 
```

# jfreechart - 如何在 jfreechart 中为折线图上的特定值设置形状？

> ID：10517223
> 
> 赞同：1
> 
> 时间：2012-05-09T13:34:05.453
> 
> 标签：jfreechart, shape

嗨，我是 jfreechart 的新手。我想将形状显示为折线图上的特定值。我使用**了 setSeriesShapesVisible()**方法，但它显示所有数据点的形状。

如何在折线图中绘制特定值的形状？Bz 我只想在折线图中绘制最大值和最小值的形状。

请帮我..

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:15:15.387

> 你能给我一些如何使用`XYShapeAnnotation`类的例子吗？

[是的，这里](https://stackoverflow.com/search?q=user:230513%20%5Bjfreechart%5D%20XYShapeAnnotation)讨论了几个例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:06:34.910

[您可以使用XYShapeAnnotation](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/annotations/XYShapeAnnotation.html)来实现这一点（检查 的其他子类`AbstractXYAnnotation`，也许有一个更适合您）。创建一个新注释，并将其添加到您的绘图中`XYPlot.addAnnotation`

# javascript - 自定义小部件中的自定义小部件

> ID：10517224
> 
> 赞同：0
> 
> 时间：2012-05-09T13:34:07.063
> 
> 标签：javascript, dojo, spring-roo

诚然，我还是 Dojo 的新手，而且我的 Javascript 一直很薄弱，所以在这里原谅和草率的代码或语言。

我将 Dojo 1.7.1 与 Spring Roo 1.2.1RELEASE 一起使用。我正在通过[Google](http://dojotoolkit.org/documentation/tutorials/1.7/modules/)的 CDM 加载 Dojo 。

我前段时间创建了一个自定义图像缩略图查看器以在我的站点上使用，我通过在 Spring Roo 的 load-scripts.tagx 中向我的 djConfig 添加一个模块来包含该模块，该模块在每个页面加载时运行。缩略图小部件不遵循 AMD 模式，因为当时我无法让它正常工作。

这是 djConfig：

```
 <script type="text/javascript">
    var djConfig = {
            parseOnLoad: false, 
            isDebug: false, 
            locale: '${fn:toLowerCase(userLocale)}',
            modulePaths:    {
                "message": "${message_dojo_url}",
                "img.ArtThumbnailWidget": "${artThumbnailWidget_dojo_url}",
                "img.ArtTableWidget": "${artTableWidget_dojo_url}",
            },
        };
  </script> 
```

这是缩略图的 JS：

```
// img.ArtThumbnailWidget
dojo.provide("img.ArtThumbnailWidget");

dojo.require("dojo._base.declare");
dojo.require("dojo.parser");
dojo.require("dojo.ready");
dojo.require("dijit._WidgetBase");
dojo.require("dijit._TemplatedMixin");
dojo.require("dojox.image.LightboxNano");

// Create the widget
require([
         "dojo/_base/declare",
         "dojo/parser",
         "dojo/ready",
         "dijit/_WidgetBase",
         "dijit/_TemplatedMixin",
         "dojo/dom",
         "dojo/dom-construct",
         "dojo/on",
         "dojo/text!img/ArtThumbnailWidget/templates/ArtThumbnailWidget.html",
         "dojox/image/LightboxNano",
         "dojo/domReady!"
    ], function(declare, parser, ready, _WidgetBase, _TemplatedMixin, dom, domConstruct, on, template) {

    dojo.declare("img.ArtThumbnailWidget",[dijit._WidgetBase, dijit._TemplatedMixin], {
        /* Our properties will go here */

        // Art JSON object, default is null
        art: null,

        // Viewer ID (the username of the person looking at this image), which will default to null
        viewerId: null,

        // maxThumbnailSize is how large of an image to return for the thumbnail.  The back-end will resize the thumbnail accordingly
        maxThumbnailSize: 100,

        // maxImageSize is how large of an image to return for the LightboxNano.  The back-end will resize the image accordingly
        maxImageSize: 500,

        // Our template - important!
        templateString: template,

        // A class to be applied to the root node in our template
        baseClass: "artThumbnailWidget",

        // Specifies there are widgets in the template itself that need to be rendered as well
        widgetsInTemplate: true,

        // Competition-related vars
        competitionUrlBase: null,
        competitionButtonIconUrl: null,

        /* This is called once the DOM structure is ready, but before anything is shown */
        postCreate: function() {
            // Get a DOM node reference for the root of our widget
            var domNode = this.domNode;

            // Run any parent postCreate processes - can be done at any point
            this.inherited(arguments);

            if(this.art!=null && this.viewerId!=null && this.art.owner.name == this.viewerId) {     // If the view is the owner, add the toolbar
                // TODO: We need to clean this up, make it "prettier", and make the URLs more generic
                var toolbarNode = domConstruct.create("div", {}, this.containerNode);

                if(this.competitionUrlBase!=null) {
                    var url = this.competitionUrlBase;
                    if(url.indexOf('?')<0) {    // URL does not have a '?'
                        url = url+"?";
                    } else {    // URL has a '?', so we need to tack on and additional '&'
                        url = url+"&";
                    }
                    url = url+"username="+this.art.owner.name+"&artPieceId="+this.art.id;

                    var compButtonNode = domConstruct.create("a",
                            {
                                href: url,
                            },toolbarNode);
                    var compButtonImg = domConstruct.create("img",
                            {
                                src: this.competitionButtonIconUrl,
                                width: this.maxThumbnailSize/4,
                                height: this.maxThumbnailSize/4,
                            },compButtonNode);
                }
            }
        },

        /* This private method is used to re-set the node values when something changes  */
        _resetNodeValues: function() {
            if(this.art !=null) {
                // Using our thumbnailNode attach point, set its src value
                this.thumbnailNode.src = this.art.url+"?maxSize="+this.maxThumbnailSize;
                this.thumbnailNode.alt = this.art.title;
                this.thumbnailNode.width = this.maxThumbnailSize;
                this.thumbnailNode.height = this.maxThumbnailSize;

                // Now setup the link for the LightboxNano
                var lightboxNano = new dojox.image.LightboxNano({
                    href: this.art.url+"?maxSize="+this.maxImageSize,
                },this.thumbnailNode);
            }
        },

        /* This is called anytime the "art" attribute is set.  Consider is a "setter" method */
        _setArtAttr: function(av) {
            if (av != null) {
                // Save it on our widget instance - note that
                // we're using _set, to support anyone using
                // our widget's Watch functionality, to watch values change
                this._set("art", av);

                this._resetNodeValues();
            } else {
                // We could have a default here...would be an error, since we
                // shouldn't be calling this without an art object
            }
        },

        _setMaxThumbnailSizeAttr: function(ms) {
            // Save it on our widget instance - note that
            // we're using _set, to support anyone using
            // our widget's Watch functionality, to watch values change
            this._set("maxThumbnailSize", ms);

            this._resetNodeValues();
        },

        _setMaxImageSizeAttr: function(ms) {
            // Save it on our widget instance - note that
            // we're using _set, to support anyone using
            // our widget's Watch functionality, to watch values change
            this._set("maxImageSize",ms);

            this._resetNodeValues();
        }
    });     // End of the widget

}); 
```

现在我正在尝试添加另一个自定义组件，即上述缩略图的表格。新代码需要引用这个旧的 Widget，但我似乎无法让它工作。

新的表格小部件（到目前为止）：

```
// in "img/ArtTableWidget"
define([
        "dojo/_base/declare", "dojo/parser", 
        "dijit/_WidgetBase", "dijit/_TemplatedMixin", 
        "dojo/dom", "dojo/dom-construct","img/ArtThumbnailWidget",
        "dojo/text!./ArtTableWidget/templates/ArtTableWidget.html"], 
    function(declare,parser,_WidgetBase,_TemplatedMixin, dom, domConstruct, ArtThumbnailWidget, template) {
        return declare("img.ArtTableWidget",[dijit._WidgetBase,dijit._TemplatedMixin], {
            // Default values for the ArtTable

            // The base URL to use for downloading the photos
            artUrlBase: null,

            // The base URL used for submitting competitions and the button URL
            newCompetitionUrlBase: null,
            newCompetitionButtonIconUrl: null,

            // Indicates what params on the URL are used to control page 
            // and size.  These will be appended to the URL as needed.
            pageNumberParameterName: "page",
            pageSizeNumberParameterName: "size",

            // Holds the page and size
            page: 1,
            size: 15,
            totalPages: 0,

            columns: 3,

            // Holds the current list of "art"
            artList: [],

            // The userid currently viewing
            viewerId: null,

            // Our HTML template
            templateString: template,

            baseClass: "artTableWidget",

            // Specifies there are widgets in the template itself that need to be rendered as well
            widgetsInTemplate: true,

            // Functions //

            postCreate: function() {
                this._load(this.page);
            },

            // Loads the given page
            _load: function(pageToLoad) {
                if(pageToLoad==null) {
                    pageToLoad=1;
                }

                // Generate the URL
                genUrl = this.artUrlBase.indexOf("?")>=0 ? this.artUrlBase+"&page="+pageToLoad+"&size="+this.size : this.artUrlBase+"?page="+pageToLoad+"&size="+this.size;

                // Make the call to the backend
                dojo.xhrGet({
                    url: genUrl,
                    handleAs: "json",
                    tableWidget: this,
                    load: function(data,ioArgs) {
                        this.tableWidget.page = data.page;
                        this.tableWidget.totalPages = data.totalPages;
                        this.tableWidget.artList = data.data;

                        this.tableWidget._updateTable();
                    }
                });
            },

            _updateTable: function() {
                // Fix the buttons at the bottom

                // Clear the artTable
                domConstruct.empty(this.artTable);

                // Loop through the art and build the rows
                tableRow = tableRow = domConstruct.create("tr",{},this.artTable);
                dojo.forEach(this.artList,function(art,index) {
                    if(index % columns == 0) {
                        tableRow = domConstruct.create("tr",{},this.artTable);
                    }
                    tableColumn = domConstruct.create("td",{style: { marginLeft: "auto", marginRight: "auto" }},tableRow);
                    var tnNode = new ArtThumbnailWidget({
                        art: art,
                        viewerId: this.viewerId,
                        competitionUrlBase: this.newCompetitionUrlBase,
                        competitionButtonIconUrl: this.newCompetitionButtonIconUrl,
                    });
                    tnNode.placeAt(tableColumn);
                });
            }
        });
}); 
```

但是，当我在 Chrome 中运行新组件时，我在 dojo.js.uncompressed.js 行 1716 中收到一个通用错误。错误消息是“multipleDefine”，并且附加的对象看起来是我的 ArtTableWidget。我在挖掘这个对象时注意到“deps”成员，它似乎是在顶部定义（）中定义的所有依赖项的数组，其中包括 img/ArtThumbnailWidget，但“pack”成员是未定义的. 我猜它只是没有加载我的模块或其他东西。

错误（抱歉，如果复制/粘贴看起来不正确）是：

```
dojo.js.uncompressed.js:1716
Error
  arguments: undefined
  get stack: function getter() { [native code] }
  info: Object
  cacheId: 0
  cjs: Object
  def: function (declare,parser,_WidgetBase,_TemplatedMixin, dom, domConstruct, ArtThumbnailWidget, template) {
  deps: Array[8]
    0: Object
    1: Object
    2: Object
    3: Object
    4: Object
    5: Object
    6: Object
      cacheId: 0
      def: 0
      executed: 4
      injected: 2
      isAmd: false
      isXd: null
      mid: "img/ArtThumbnailWidget"
      pack: undefined
      pid: ""
      result: Object
      url: "/ArtSite/resources/img/ArtThumbnailWidget.js"
      __proto__: Object
    7: Object
    length: 8
    __proto__: Array[0]
    executed: 0
    injected: 2
    isAmd: false
    isXd: null
    mid: "img/ArtTableWidget"
    node: HTMLScriptElement
    pack: undefined
    pid: ""
    require: function (a1, a2, a3){
    result: Object
    url: "/ArtSite/resources/img/ArtTableWidget.js"
    __proto__: Object
  message: "multipleDefine"
  set stack: function setter() { [native code] }
  src: "dojoLoader"
  type: undefined
  __proto__: ErrorPrototype
  dojo.js.uncompressed.js:1719src: dojoLoader
  dojo.js.uncompressed.js:1719info: 
  Object
  dojo.js.uncompressed.js:1721. 
```

我需要一些帮助才能回到正确的轨道。

**编辑 1** 我使用 BuffaloBuffalo 的回复中的信息更新了所有模块，除了 dojoConfig 中的“路径”，我使用了以下内容：

```
 <script type="text/javascript">
    var djConfig = {
            parseOnLoad: false, 
            isDebug: false, 
            locale: '${fn:toLowerCase(userLocale)}',
            packages: [
                 { name: "message", location: "${message_dojo_module_base_url}" },
                 { name: "img", location: "${img_dojo_module_base_url}" }
            ]
        };
  </script> 
```

似乎找到了 .js 文件，但没有找到使用*dojo/text*加载的模板。我尝试做“./path/Template.html”和“/module/path/Template.html”，但第一个似乎试图通过CDN（上面链接的Google APIs站点）解析URL，后者似乎想要完全合格的路径。我关闭了一条完整的路径，因为这似乎是一种肮脏的方式。我还尝试像这样添加到 dojoConfig 的路径：

```
 paths: [
             { "message" : "${message_dojo_module_base_url}" }
        ] 
```

但这似乎根本没有帮助，在 Chrome 的 JS 控制台中导致了一些非常讨厌的错误。

如果我在[这里](http://ajax.googleapis.com/ajax/libs/dojo/1.7.1/dojo/dojo.js.uncompressed.js)正确阅读，dojo/text 不使用模块吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:09:04.457

很难说出*确切的*问题是什么，但有几件事让我很震惊：

如果您使用的是 1.7，则`djConfig`应该命名该对象（dojoConfig 仍然有效，但不妨更新它）。`dojoConfig`

该`modulePaths`属性应更新为命名`path`。如果`img.ArtThumbnailWidget`并且`img.ArtTableWidget`驻留在一个公共目录中，您可以使用以下内容：

```
var dojoConfig = {
            parseOnLoad: false, 
            isDebug: false, 
            locale: '${fn:toLowerCase(userLocale)}',
            paths:    {
                "message": "${message_dojo_url}",
                "img": "${art_module_url}"
            }
        }; 
```

第二件事是 img.ArtThumbnailWidget 中混合的 legacy/amd 加载器样式。使用 AMD 风格，您已经完成了 99% 的工作。你需要做的就是

1.  删除 dojo.provide 和 dojo.requires
2.  更新`require([],function(){..});`为`define([],function(){..});`
3.  更新声明中的引用以使用局部变量而不是全局变量：

    ```
    //ArtThumbnailWidget
    define('img/ArtThumbnailWidget', [
        "dojo/_base/declare",
        "dojo/parser",
        "dojo/ready",
        "dijit/_WidgetBase",
        "dijit/_TemplatedMixin",
        "dojo/dom",
        "dojo/dom-construct",
        "dojo/on",
        "dojo/text!img/ArtThumbnailWidget/templates/ArtThumbnailWidget.html",
        "dojox/image/LightboxNano",
        "dojo/domReady!"
        ], function (declare, parser, ready, _WidgetBase, _TemplatedMixin, dom, domConstruct, on, template) {

      return declare("img.ArtThumbnailWidget", [_WidgetBase, _TemplatedMixin], {
        /* Our properties will go here */

        // Art JSON object, default is null
        art: null,

        // Viewer ID (the username of the person looking at this image), which will default to null
        viewerId: null,

        // maxThumbnailSize is how large of an image to return for the thumbnail.  The back-end will resize the thumbnail accordingly
        maxThumbnailSize: 100,

        // maxImageSize is how large of an image to return for the LightboxNano.  The back-end will resize the image accordingly
        maxImageSize: 500,

        // Our template - important!
        templateString: template,

        // A class to be applied to the root node in our template
        baseClass: "artThumbnailWidget",

        // Specifies there are widgets in the template itself that need to be rendered as well
        widgetsInTemplate: true,

        // Competition-related vars
        competitionUrlBase: null,
        competitionButtonIconUrl: null,

        /* This is called once the DOM structure is ready, but before anything is shown */
        postCreate: function () {
          // Get a DOM node reference for the root of our widget
          var domNode = this.domNode;

          // Run any parent postCreate processes - can be done at any point
          this.inherited(arguments);

          if (this.art != null && this.viewerId != null && this.art.owner.name == this.viewerId) { // If the view is the owner, add the toolbar
            // TODO: We need to clean this up, make it "prettier", and make the URLs more generic
            var toolbarNode = domConstruct.create("div", {}, this.containerNode);

            if (this.competitionUrlBase != null) {
              var url = this.competitionUrlBase;
              if (url.indexOf('?') < 0) { // URL does not have a '?'
                url = url + "?";
              } else { // URL has a '?', so we need to tack on and additional '&'
                url = url + "&";
              }
              url = url + "username=" + this.art.owner.name + "&artPieceId=" + this.art.id;

              var compButtonNode = domConstruct.create("a", {
                href: url,
              }, toolbarNode);
              var compButtonImg = domConstruct.create("img", {
                src: this.competitionButtonIconUrl,
                width: this.maxThumbnailSize / 4,
                height: this.maxThumbnailSize / 4,
              }, compButtonNode);
            }
          }
        },

        /* This private method is used to re-set the node values when something changes  */
        _resetNodeValues: function () {
          if (this.art != null) {
            // Using our thumbnailNode attach point, set its src value
            this.thumbnailNode.src = this.art.url + "?maxSize=" + this.maxThumbnailSize;
            this.thumbnailNode.alt = this.art.title;
            this.thumbnailNode.width = this.maxThumbnailSize;
            this.thumbnailNode.height = this.maxThumbnailSize;

            // Now setup the link for the LightboxNano
            var lightboxNano = new LightboxNano({
              href: this.art.url + "?maxSize=" + this.maxImageSize,
            }, this.thumbnailNode);
          }
        },

        /* This is called anytime the "art" attribute is set.  Consider is a "setter" method */
        _setArtAttr: function (av) {
          if (av != null) {
            // Save it on our widget instance - note that
            // we're using _set, to support anyone using
            // our widget's Watch functionality, to watch values change
            this._set("art", av);

            this._resetNodeValues();
          } else {
            // We could have a default here...would be an error, since we
            // shouldn't be calling this without an art object
          }
        },

        _setMaxThumbnailSizeAttr: function (ms) {
          // Save it on our widget instance - note that
          // we're using _set, to support anyone using
          // our widget's Watch functionality, to watch values change
          this._set("maxThumbnailSize", ms);

          this._resetNodeValues();
        },

        _setMaxImageSizeAttr: function (ms) {
          // Save it on our widget instance - note that
          // we're using _set, to support anyone using
          // our widget's Watch functionality, to watch values change
          this._set("maxImageSize", ms);

          this._resetNodeValues();
        }
      }); // End of the widget
    }); 
    ```

我怀疑传统风格与 AMD 风格的结合`ArtThumbnailWidget`是令人困惑的`ArtTableWidget`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:11:23.073

所以，是的，这里有很多可能是错误的。你能得到一个更小的例子吗？

1.  **绝对**值得检查浏览器开发工具的“网络”选项卡，看看*它*正在尝试加载什么。这通常有助于模块解析。同步运行（我认为你是这样），而不是异步模式也有助于在那里进行诊断。
2.  您是否应该在 modulePaths 中注册 img/ArtThumbnailWidget 而不是 img.ArtThumbnailWidget？
3.  从长远来看，您可能想要注册包而不是逐个模块...
4.  您应该能够在您的小部件中引用 dojo/text!./templates/ArtThumbnailWidget.html 而不是 dojo/text!img/ArtThumbnailWidget/templates/ArtThumbnailWidget.html，但只有在您获得小部件加载。（您的模块的需求是相对于您的模块进行处理的。）

# sql - 过滤 JOIN：WHERE 与 ON

> ID：10517225
> 
> 赞同：3
> 
> 时间：2012-05-09T13:34:21.343
> 
> 标签：sql, sql-server-2008, join, where

我对使用`ON`vs.过滤连接的理解是否`WHERE`正确？

* * *

# `WHERE`

...将过滤连接表的结果，这意味着 a`LEFT JOIN`或`RIGHT JOIN`不会显示预期表中的所有记录，因为即使`WHERE`过滤器可能位于另一个表中的字段上，它们也会被过滤掉。

# `ON`

...可以用作正在连接的表的过滤器。我曾经认为`ON`仅用于在连接两个表时比较它们之间的字段，但它也可以作为`WHERE`正在连接的特定表的隔离。

* * *

当您只连接两个表时，这一切都不重要，但我已经意识到，在跨 3 个以上的表进行非常大的连接时，理解差异至关重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:49:45.720

[@Gratzy 提供](https://stackoverflow.com/questions/1401889/sql-filter-criteria-in-join-criteria-or-where-clause-which-is-more-efficient)的链接很有帮助

ON 子句和 WHERE 子句中的条件之间的区别当然是灰色的。

对于 INNER JOINS，它们是等价的。对于 OUTER JOINS，您的理解是正确的，即 WHERE 子句在概念上是在评估 ON 条件之后应用的。

但在许多情况下，差异更多地取决于意图而不是功能。ON 条件和 WHERE 子句之间通常存在语义差异。

例如，旧版本的 SQL Server 确实使用 WHERE 子句中的条件实现了 ON 语法，使用`*=`or`=*`语法来暗示 LEFT 或 RIGHT 连接（在某些情况下，这会导致 LEFT 和 RIGHT JOIN 等效项的结果奇怪地微妙地不同）

一般来说，我的建议是始终使用 ON 子句中的适当关键字段来连接基于记录如何相互关联的逻辑的记录。使用 WHERE 子句应用逐渐限制此结果集的过滤条件。

# jax-rs - 是否可以在 JAX-RS 中使用类似“aaaa/{x},{y}”的路径？

> ID：10517231
> 
> 赞同：1
> 
> 时间：2012-05-09T13:34:37.657
> 
> 标签：jax-rs

我想要这样的东西：

```
@GET
@Path("aaaa/{x},{y}")
public object getXY(@SomeAttribute("x") String x, @SomeAttribute("y") String y) {
...
} 
```

将 @PathParam 与 Restlet JAX-RS 扩展一起使用不起作用。我想知道 JAX-RS 规范是否原生支持这样的 URL。原生我的意思是它能够识别和解析 x 和 y。

当然，我可以使用单个`{xy}`参数并用逗号分隔它。不过我不感兴趣。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:39:58.830

通常 REST URL 指向一个资源。您的 URL 不指向单个资源（这是我对查看您的 Url 路径的看法。如果我错了，请纠正我）。因此，如果有意义，您可以选择带有 x 和 y 作为查询参数的“\aaaa”之类的 url。我希望您知道如何检索查询参数。

# multithreading - 为发布模式编译时没有多线程

> ID：10517243
> 
> 赞同：0
> 
> 时间：2012-05-09T13:35:27.677
> 
> 标签：multithreading, visual-studio, eigen

我正在使用 VS2010 中的 Eigen 库对矩阵矩阵乘法进行编程。当我在调试模式下运行时，应用程序使用了我所有的 CPU，但是当我在发布模式下运行时，它只使用 1 个线程。是否需要更改设置才能启用多线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:23:56.867

这太愚蠢了，但我从未在属性配置中为 RELEASE 模式启用 openMP，即使我认为我这样做了。

# jquery - jQuery DataTables 插件 - 页面更改发生在哪里

> ID：10517246
> 
> 赞同：2
> 
> 时间：2012-05-09T13:35:39.513
> 
> 标签：jquery, jquery-plugins

我快要失去理智了。我正在为一家大公司开发一个项目，通过他们的框架。他们严重依赖[jQuery.datatables 插件](http://datatables.net/)，这不是一件坏事，但在我看来，文档很差而且很混乱，而且源代码很难理解。

简短版本：我需要知道如何与页面更改事件挂钩，以便在它发生时执行一些代码。

长版：我有一个 json 数据数组要放入表中，这些项目没有唯一标识符；因此，在将其发送到 dataTable 之前，我添加了一个列 id，该列 id 用数组中的项目索引填充，并为它创建了一个列。在我调用 fnUpdate 之后，我隐藏索引列并为每一行添加一个单击事件，使用该列上的值来知道哪个 json 对象对应于该行。它不漂亮，但它有效，直到我换页为止；那个时候，s还隐藏着，但是s又出现了。我需要找到如何挂钩页面更改事件，以便我可以再次隐藏它们，或者我需要一种更优雅的方式来做同样的诡计。

感谢您的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:06:24.463

您可以监听 DataTable 实例发出的“页面”事件：http: [//datatables.net/docs/DataTables/1.9.1/DataTable.html#page](http://datatables.net/docs/DataTables/1.9.1/DataTable.html#page)

所以你会做这样的事情：

```
$(myTableInstance).bind('page', function () {
   pagingFunction();
} ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:39:02.450

您可以使用[fnDrawCallback](http://datatables.net/usage/callbacks#fnDrawCallback)或[fnInfoCallback](http://datatables.net/usage/callbacks#fnDrawCallback)来检测更改。单击下一步时，它们都会被触发。

但请注意，页面更改并不是触发这些回调的唯一来源。

或者你可以尝试这样的事情：

```
$('.dataTables_length select').live('change', function(){
   alert(this.value);
}); 
```

# iphone - iPhone：UIButton 的文本没有得到“零”

> ID：10517248
> 
> 赞同：0
> 
> 时间：2012-05-09T13:35:43.207
> 
> 标签：iphone, objective-c, ios5

我在我的应用程序中遇到了一些奇怪的问题。

在我的 ViewDidLoad() 方法中，我将按钮的标题设置如下。

```
[btnA setTitle:@"A" forState:UIControlStateNormal]; 
```

在另一个单击事件中，我想将此标题的值设置为 nil，如下所示。

```
[btnA setTitle:nil forState:UIControlStateNormal]; 
```

但是当我在上述语句之后立即打印日志时，如下所示

```
NSLog(@"btnA:%@",btnA.titleLabel.text); 
```

它打印日志如下

```
btnA:A 
```

奇怪的是，当我在模拟器中运行应用程序时，按钮的文本没有显示任何内容，因此在单击事件时它变为 nil。

有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:38:32.163

您可以将标题设置为空字符串，如下所示：

```
[btnA setTitle:@"" forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:24:26.290

尝试以下代码

```
button.titleLabel.text   = @""; 
```

或在您自己的代码中尝试延迟

```
- (IBAction)produceImage:(id)sender
{

     // Call another function which setthe title after delay

    [self performSelector:@selector(title:) withObject:sender afterDelay:2];

}

- (IBAction)title:(id)sender
{
   [sender setTitle:@"" forState:UIControlStateNormal];

      NSLog(@"sender:%@",sender.titleLabel.text);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T13:38:16.787

```
[btnA setTitle:@"" forState:UIControlStateNormal]; 
```

或设置 btnA = nil;

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-09-04T02:31:58.293

当你再次从按钮获取值时，你可以做`setTitle @" " .` setTitle @"" `or`nil` 是没用的，它给你以前的值

# emscripten - 当我尝试将 cpp 与 std 转换时出错，包括使用 Emscripten

> ID：10517249
> 
> 赞同：0
> 
> 时间：2012-05-09T13:35:45.580
> 
> 标签：emscripten

当我尝试使用 emcc 转换以下代码时：

```
#include <iostream>
int main()
{
  std::cout << "hello, world!" << std::endl;
  return 0;
} 
```

我收到此错误：

```
Traceback (most recent call last):
  File "./emcc", line 797, in <module>
    extra_files_to_link.append(shared.Cache.get(name, create))
  File "/home/user/emscripten/tools/shared.py", line 879, in get
    shutil.copyfile(creator(), cachename)
  File "/usr/lib/python2.7/shutil.py", line 82, in copyfile
    with open(src, 'rb') as fsrc:
IOError: [Errno 2] No such file or directory: '/tmp/emscripten_temp_MVh5qU/libcxx/libcxx.bc' 
```

我可以转换任何不使用标准的源。我可以使用 clang 生成上面示例的字节码并使用 lli 执行。

我在两台不同的机器（Linux 64）上尝试了同样的错误。

有人可以帮我避免这个错误吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-03T07:34:07.540

问题已经有一段时间了，但只是为了发表意见。

**它确实适用**于我从 brew 构建的 osx 10.6.8、llvm 3.1。

只是，这 6 行代码的输出约为 113k 行，占用 4.8 MB 空间 :) emscripten 源代码中[的 tests/hello_world.cpp](https://github.com/kripken/emscripten/blob/master/tests/hello_world.cpp)
的输出为2200 行。

# regex - 查找并替换 Visual Studio 的正则表达式

> ID：10517254
> 
> 赞同：1
> 
> 时间：2012-05-09T13:36:13.440
> 
> 标签：regex, visual-studio-2010

我有**很多**这样的字符串要在 Visual Studio 中查找和替换：

```
$CLICKTHRU:Dark-Shadows-Reunion-Experience$
$CLICKTHRU:Pirahna-3DD-Experience$
$CLICKTHRU:The-Dictator$ 
```

我一直在尝试按照[这里](http://msdn.microsoft.com/en-us/library/2k3te2cs%28v=vs.80%29.aspx)的 msdn 上的说明进行操作，但我有点卡住了。

到目前为止，这是我可耻的尝试：

```
\$CLICKTHRU\:[:a|-|\$] 
```

在仅匹配的第一个字符串上进行测试

```
$CLICKTHRU:D 
```

谁能帮我做一个简短的解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:02:11.567

使用此模式：`\$CLICKTHRU\:[^$]+\$`

The`$`是一个元字符，因此必须对其进行转义才能按字面意思解释，除非它出现在字符类中。在 Visual Studio 中，冒号也必须被转义。

*   `\$CLICKTHRU\:`鉴于上述解释，非常简单。这主要是匹配文字字符。
*   `[^$]+`是一个负字符类，因为它以`^`方括号内的 a 开头。它匹配任何不是字符的`$`字符。`+`表示模式应该匹配一次或多次。
*   `\$`匹配结束`$`字符。

# tomcat - 将 BIRT Viewer 3.7.1 部署到 Tomcat Server 7.0

> ID：10517264
> 
> 赞同：0
> 
> 时间：2012-05-09T13:36:42.333
> 
> 标签：tomcat, birt

我已经使用 Glassfish Server 3.1.2 成功地将 BIRT Viewer 3.7.1 部署到了一个 Web 应用程序中。我将 JSP taglib 与 JSF 2.0 动态 Web 项目 (v2.5) 一起使用。现在我正在尝试从 Glassfish 切换到 Tomcat 7.0 Server，因为 Glassfish 有很多显示问题，但是当我执行包含 JSP taglib 的网页时，我收到了这个错误：

> 请求的资源 (/birt/frameset) 不可用。

我认为问题与将 BIRT Viewer 部署到 Tomcat 中有关。在这两种情况下，我遇到了这个错误： - 我将战争文件 (birt.war) 复制到了 Tomcat 的 Webapps 文件夹中，并从 Tomcat 管理器中部署了它。- 我还尝试将 WebViewerExample 文件夹复制到 Tomcat 的 Webapps 文件夹中。

对于 Glassfish 部署，我从管理器中部署了 war 文件，它可以正常工作。那么如何将 BIRT 查看器成功部署到 Tomcat 服务器中？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:16:40.567

看看[这个教程](http://terrarum.net/administration/deploying-birt-on-tomcat.html#tomcat)。在这里，您还可以找到如何运行报告。

`http://127.0.0.1:8080/birt`但首先要确保您可以通过或打开 birt 示例`http://localhost:8080/birt`。

或者在你的情况下也许`http://localhost:8080/WebViewerExample`。

# jquery - Jquery Megamenu 2：子导航项的位置 - Firefox 与其他浏览器。

> ID：10517265
> 
> 赞同：0
> 
> 时间：2012-05-09T13:36:47.670
> 
> 标签：jquery, megamenu

该脚本来自：[http](http://www.geektantra.com/2010/05/jquery-megamenu-2/) ://www.geektantra.com/2010/05/jquery-megamenu-2/ 。示例安装：[http](http://dev6.web2market.com/) ://dev6.web2market.com/ 。这是我遇到的最可配置的。

我只带着一件我希望得到一些反馈的东西撞到了墙上。子导航项的位置 - Firefox 与其他浏览器。

我在下面看到了过去发布的解决方案。我将 js 中的所有“偏移”替换为“位置”：

```
 mm_item_content_obj.css({
 ‘top’: ($mm_item_link.position().top + $mm_item_link.outerHeight()) – 1 +”px”,
 ‘left’: ($mm_item_link.position().left) – 5 + ‘px’
 }) 
```

Firefox 与所有其他经过测试的浏览器之间存在大约 20 像素的差异。IE8、IE9、Chrome 和 Safari 的当前版本。

我使用 Firebug 基本上剥离了与相对或绝对定位相关的代码不需要的任何内容。测试了css，但没有骰子。

有人遇到过这种情况么？所有测试的浏览器都对偏移和位置选项的位置变化做出一致的响应。这只是 Firefox 与其他所有产品之间令人抓狂的区别。似乎 Firefox 正在阅读其他人没有阅读的内容，反之亦然？

谢谢朱莉

# php - PHP - 未定义的变量和其他错误

> ID：10517267
> 
> 赞同：0
> 
> 时间：2012-05-09T13:36:49.353
> 
> 标签：php, undefined, deprecated

今天我想写一个简单的php脚本，但是我遇到了一些烦人的错误。我只是简单地包含 config.php 文件并尝试访问 root_path 变量但没有成功。还有 2 个其他警告仅在我包含 config.php 文件时显示。

这些文件在最新的 xampp 上运行。

smarty_setup.php：

```
<?php
require('config.php');
require($root_path . '/libs/Smarty.class.php');

class FileHosting extends Smarty {

   function __construct()
   {
        parent::__construct();

        $this->setTemplateDir($root_path . '/templates/');
        $this->setCompileDir($root_path . '/templates_c/');
        $this->setConfigDir($root_path . '/configs/');
        $this->setCacheDir($root_path . '/cache/');
        $this->caching = Smarty::CACHING_LIFETIME_CURRENT;
        $this->assign('app_name', 'File Hosting');
   }
}
?> 
```

配置.php：

```
<?php
    $root_path = 'D:/xampp/htdocs/example';
    $db_user = 'xxx';
    $db_password = 'xxx';
    $db_name = 'xxx';
    $db_host = 'xxx';
    $facebook_appID = 'xxx';
    $facebook_secret = 'xxx';
?> 
```

错误：

```
Deprecated: Assigning the return value of new by reference is deprecated in D:\xampp\php\PEAR\Config.php on line 80

Deprecated: Assigning the return value of new by reference is deprecated in D:\xampp\php\PEAR\Config.php on line 166

Notice: Undefined variable: root_path in D:\xampp\htdocs\example\includes\smarty_setup.php on line 3

Notice: Undefined variable: root_path in D:\xampp\htdocs\example\includes\smarty_setup.php on line 11

Notice: Undefined variable: root_path in D:\xampp\htdocs\example\includes\smarty_setup.php on line 12

Notice: Undefined variable: root_path in D:\xampp\htdocs\example\includes\smarty_setup.php on line 13

Notice: Undefined variable: root_path in D:\xampp\htdocs\example\includes\smarty_setup.php on line 14 
```

谢谢你帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:41:24.597

在您的班级内，您正在访问`$root_path`全局范围内的 。将其传递给构造函数：

```
class FileHosting extends Smarty {

   // Pass $root_path as a param to the constructor
   function __construct($root_path)
   {
        parent::__construct();

        $this->setTemplateDir($root_path . '/templates/');
        $this->setCompileDir($root_path . '/templates_c/');
        $this->setConfigDir($root_path . '/configs/');
        $this->setCacheDir($root_path . '/cache/');
        $this->caching = Smarty::CACHING_LIFETIME_CURRENT;
        $this->assign('app_name', 'File Hosting');
   }
}

// Instantiate as
$smarty = new FileHosting($root_path); 
```

这些错误中的第一个令人费解，因为它表明`config.php`没有正确包括在内。

```
Notice: Undefined variable: root_path in D:\xampp\htdocs\example\includes\smarty_setup.php on line 3 
```

如果这些确实是唯一的内容`config.php`（例如，您还没有在函数中设置这些变量），那么您不应该得到第一个`root_path`通知。

### 更新

如果您未能包含`config.php`相对路径，请确保：

1.  `config.php`与您尝试从中包含它的文件位于同一目录中
2.  检查您的 PHP`include_path`以确保它包含当前目录`.`：

.

```
echo get_include_path(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:42:04.137

尝试使 $root_path 成为常量而不是变量：

`define('ROOT_PATH', 'D:/xampp/htdocs/example');`

然后像这样使用它：

`$this->setTemplateDir(ROOT_PATH . '/templates/');`

# jsp - 如何将 Unicode 字符作为 JSP/Servlet request.getParameter 传递？

> ID：10517268
> 
> 赞同：15
> 
> 时间：2012-05-09T13:36:53.557
> 
> 标签：jsp, servlets, unicode, character-encoding, mojibake

经过大量的试验和错误，我仍然无法弄清楚问题所在。JSP、servlet 和数据库都设置为接受 UTF-8 编码，但即使我在任何具有任何两字节字符（如 em dash）的东西上使用 request.getParameter 时，它们也会被打乱为损坏的字符。

我已经手动提交到数据库，它能够接受这些字符，没问题。如果我从 servlet 中的数据库中提取文本并以我的 jsp 页面形式打印它，它不会显示任何问题。

我唯一一次发现它作为损坏的字符返回是当我在使用 request.getParameter 检索它之后尝试在其他地方显示它时。

有没有其他人有这个问题？我该如何解决？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-09T13:43:14.270

如果根本没有正确设置请求和/或响应编码，就会发生这种情况。

对于 GET 请求，您需要在 servletcontainer 级别对其进行配置。目前尚不清楚您使用的是哪一个，但例如 Tomcat，这将`URIEncoding`通过`<Connector>`其`/conf/server.xml`.

```
<Connector ... URIEncoding="UTF-8"> 
```

对于 POST 请求，您需要创建一个[过滤器](https://stackoverflow.com/tags/servlet-filters/info)，该过滤器映射到涵盖所有这些 POST 请求的所需 URL 模式。例如`*.jsp`，甚至`/*`。做以下工作`doFilter()`：

```
request.setCharacterEncoding("UTF-8");
chain.doFilter(request, response); 
```

对于 HTML 响应和提交的 HTML 表单输入值的客户端编码，您需要设置 JSP 页面编码。将此添加到 JSP 的顶部（鉴于显示 UTF-8 直接格式 DB 可以正常工作，您可能已经正确完成了它）。

```
<%@page pageEncoding="UTF-8" %> 
```

或者为了防止在每个 JSP 上复制粘贴，请在以下位置配置一次`web.xml`：

```
<jsp-config>
    <jsp-property-group>
        <url-pattern>*.jsp</url-pattern>
        <page-encoding>UTF-8</page-encoding>
    </jsp-property-group>
</jsp-config> 
```

对于源代码文件和标准输出（IDE 控制台），您需要设置 IDE 工作区编码。目前尚不清楚您使用的是哪一个，但例如 Eclipse，通过将*Window > Preferences > General > Workspace > Text File Encoding*设置为 UTF-8 来完成。

[![在此处输入图像描述](../Images/5aaabec43cccd017c7a4c3189f2571e1.png)](https://i.stack.imgur.com/ukrYs.png)

请注意，通过 HTTP 提供页面时会**忽略**`<meta http-equiv>`HTML标记。只有当页面通过本地磁盘文件系统打开时才考虑。也不需要指定，因为它已经默认为在使用表单提供 HTML 页面期间使用的响应编码。另请参阅[W3 HTML 规范](https://www.w3.org/TR/html401/interact/forms.html#adef-accept-charset)。**`file://``<form accept-charset>`**

 **### 也可以看看：

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)
*   [为什么 POST 不支持字符集，但 AJAX 请求却支持？雄猫 6](https://stackoverflow.com/questions/4392610/why-does-post-not-honor-charset-but-an-ajax-request-does-tomcat-6/)
*   [HTML：表单不发送 UTF-8 格式输入](https://stackoverflow.com/questions/33941751/html-form-does-not-send-utf-8-format-inputs/)
*   [servlet 应用程序中的 Unicode 字符显示为问号](https://stackoverflow.com/questions/13108466/unicode-characters-in-properties-files-in-servlet-application-are-shown-as-quest)
*   [写入数据库时​​ UTF-8 编码错误（读取正常）](https://stackoverflow.com/questions/14687698/bad-utf-8-encoding-when-writing-to-database-reading-is-ok/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-29T14:45:20.297

BalusC 的答案是正确的，但我只想补充一点很重要（当然对于 POST 方法）

```
request.setCharacterEncoding("UTF-8"); 
```

在读取任何参数之前调用。这是读取参数的实现方式：

```
@Override
public String getParameter(String name) {
    if (!parametersParsed) {
        parseParameters();
    }
    return coyoteRequest.getParameters().getParameter(name);
} 
```

如您所见，当您第一次读取任何参数时，会设置一个标志**parametersParsed**，parseParameters() 方法会解析所有请求的参数并设置编码。来电：

```
request.setCharacterEncoding("UTF-8"); 
```

参数解析后将没有效果！这就是为什么有些人抱怨设置请求的编码不起作用的原因。这里的大多数答案都建议使用 servlet 过滤器并在那里设置字符编码。这是正确的，但也请注意，某些安全库可以在您的过滤器之前读取请求参数（这是我的情况），因此如果您的过滤器在此之后执行，则请求参数的字符编码已经设置并设置 UTF-8 或任何其他将没有效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T13:53:37.077

Tomcat FAQ 很好地涵盖了这个主题。特别是： [http](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q8) ://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q8 和[http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q4](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q4)

FAQ 中给出的测试 JSP 本质上是我多年前通过 Tomcat 修复各种编码问题时使用的 JSP。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-07-21T02:01:30.927

只是想补充一点，以防其他人犯了和我一样的错误，我忽略了**POST 方法**

阅读所有这些解决方案并应用于我的代码，但它仍然不起作用，因为我忘记添加`method="POST"`我的`<form>`标签**

# asp.net - 使用 Entity Framework 和 MVC3 搜索记录

> ID：10517271
> 
> 赞同：0
> 
> 时间：2012-05-09T13:37:05.430
> 
> 标签：asp.net, .net, asp.net-mvc-3, linq, entity-framework

我的知识是.Net 非常缺乏。任何有关以下方面的帮助将不胜感激：

我有一个客户模型：

```
public class CustomerModel
{

private DBEntities db = new DBEntities();

public List<CustomerModel> CustomerResultModel { get; set; }

[Required]
[DisplayName("Customer Number")]
public long ID { get; set; }

[StringLength(50)]
public string Firstname { get; set; }

[StringLength(50)]
public string Organisation { get; set; }

[StringLength(500)]
[DisplayName("Address Line 1")]
public string AddressLine1 { get; set; }

[StringLength(50)]
[Required(ErrorMessage = "A Postcode is required")]
public string Postcode { get; set; }

public CustomerModel GetCustomerResults(string q)
{
    CustomerModel model = new CustomerModel();

    var res = from s in db.CMUCustomers select s;

    foreach (var result in res)
    {
        CustomerModel modelres = new CustomerModel();

        modelres.ID = result.ID;
        modelres.CustomerName = result.Firstname;
        modelres.AddressLine1 = result.AddressLine1;
        modelres.Postcode = result.Postcode;
        modelres.Organisation = result.Organisation;

        model.CustomerResultModel.Add(modelres);
    }

    return model;
  }

} 
```

在我的控制器中，我有：

```
private CustomerModel customerResults = new CustomerModel();

public ViewResult Search(string q)
{

CustomerModel model = customerResults.GetCustomerResults(q);
return View(model);

} 
```

但是，我在“model.CustomerResultModel.Add(modelres);”上遇到错误 声明“对象引用未设置为对象的实例。”。对我可能做错的事情有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:47:18.343

它告诉您没有实例化 List 的错误，您需要在定义类的构造函数时或在分配值之前使用 List 实例化属性

如果你想在构造函数中

```
public CustomerModel ()
{
    this.CustomerResultModel  = new List<CustomerModel>()
} 
```

# backbone.js - 主干.js 模型不是路由器的构造函数

> ID：10517272
> 
> 赞同：0
> 
> 时间：2012-05-09T13:37:06.227
> 
> 标签：backbone.js, initialization, javascript-namespaces

我有一个backbone.js 命名空间应用程序演示的问题，我正在尝试显示一个简单的本地存储元素列表，当我调用应用程序时，控制台会检索此错误

```
App.model.club is not a constructor 
```

部分代码在路由器部分；

```
 initialize: function () {
   console.log('App.router Initialized');
   App.clubCollection = new App.collection.clubs();
   localStorage.clear();
   App.clubCollection.create(new App.model.club({id: 1, name:'Open Baladin', category: 'Pubs'}));
   App.clubCollection.create(new App.model.club({id: 2, name:'Ai marmi', category: 'Ristorante'}));
   App.clubCollection.create(new App.model.club({id: 3, name:'Branca Leone', category: 'Disco'}));

}, 
```

上述分区代码第五行出现的错误。

这是命名空间文件 app.js：

```
window.App = {
model:  {},
view:   {},
collection: {},
router:  {},
util: {},
data: {},
contentHolder : $('#app').find(":jqmData(role='content')"),
container:$('#app'),

init: function() {
    console.log('window.App Initialized')
    new App.router();
    Backbone.history.start();
}
} 
```

这是模块文件：

```
App.model.club = App.model.club || {}

App.model.club = Backbone.Model.extend({

defaults: {
    'id' : 1
    'name' : 'Open Baladin',
    'category' : 'Pubs'
},

initialize: function() {
    console.log('App.model.club initialized');
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:53:21.910

你忘了 'id' 后面的逗号：1

# javascript - Internet Explorer 上的 jQuery 弹出菜单

> ID：10517274
> 
> 赞同：0
> 
> 时间：2012-05-09T13:37:10.570
> 
> 标签：javascript, jquery

这里 - [http://desandr.ci-team.ru](http://desandr.ci-team.ru)（鼠标点击“КАТАЛОГ”）

在 FF 和 Chromium 上工作正常 - 在元素显示菜单下的“鼠标进入”上。在 Internet Explorer 8 上 - 什么都没有。

这是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:02:03.113

我有

> 未捕获的类型错误：无法读取 null 的属性“左”

在您的 popup.js 文件的第 5 行：

```
$(menu).css("left", $(this).offset().left); 
```

这可能是无法正常工作的原因。我在 Chrome 18.0.1025.168 上测试过

检查您的 toggle_menu 函数签名 - 现在不需要任何参数。小心“this”和“$(this)”之间的区别

在准备功能中，您可以尝试

```
toggle_menu($(this)); 
```

并更改 toggle_menu 函数以接受元素

```
function toggle_menu(myLink) {
    menu = myLink.attr("pp"); 
```

# cocoa - Mac App Store 中是否允许绕过系统打印对话框的应用程序？

> ID：10517280
> 
> 赞同：0
> 
> 时间：2012-05-09T13:37:26.233
> 
> 标签：cocoa, mac-app-store, appstore-sandbox

当您想通过 Mac App Store 发布应用程序时，是否允许（也考虑沙盒）让您的应用程序绕过系统打印对话框并直接与打印机对话？

我知道您应该尽可能使用系统打印对话框。不过，这适用于具有特殊色彩管理要求的特殊应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:43:28.890

如果您只使用公共 API，并且在 App Store 提交指南中没有禁止它的特定指南，那么我想它会没问题 - 特别是因为您有特定的理由。

如果指南中没有提到它，您将不得不通过将其提交给 Apple 来了解它。

# lotus-notes - 重复控制刷新错误

> ID：10517284
> 
> 赞同：0
> 
> 时间：2012-05-09T13:37:41.937
> 
> 标签：lotus-notes, xpages

我有一个奇怪的问题。

我有一个带有重复控件的 XPage，其中数据源是一个视图。此视图按类别名称过滤。XPage 中有一个带有以下脚本的按钮：

```
doc = session.getCurrentDatabase().createDocument();            
doc.replaceItemValue("form", "myForm");
doc.replaceItemValue("docId", "myID");
doc.save(); 
```

该按钮在重复控件上进行部分刷新，但始终在第一次单击按钮时（打开 XPage 后）不会刷新重复器。第二次单击按钮后，我可以看到两个新文档。

当我从视图中删除文档时，我遇到了同样的问题，但在这种情况下，我收到以下错误消息：

```
javax.faces.el.PropertyNotFoundException: Error testing property 'label' in bean of type null
Error testing property 'label' in bean of type null 
```

任何想法如何重新加载重复控件会更好（没有错误）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:10:11.863

问题是您正在后端创建文档，因此运行时不知道创建了一个新文档，因此依赖于索引器将文档添加到视图中，然后再将其添加到刷新中，这通常在稍有延迟后发生，这就是为什么在下一次刷新后，您会看到两个文档。我过去解决它的方法是使用 setTimeout() 以大约 300-500 毫秒的延迟执行刷新，这肯定有点骇人听闻。

希望这可以帮助。

# php - 在 LAMP 堆栈上管理电子邮件相关应用程序的最佳解决方案

> ID：10517288
> 
> 赞同：1
> 
> 时间：2012-05-09T13:38:08.917
> 
> 标签：php, mta

我们正在开发一个用 PHP 编写的 Web 应用程序，其中需要执行以下操作：

1) Web 应用程序为注册用户提供了一个唯一的电子邮件地址。

2) 用户可以将电子邮件地址提供给通过电子邮件提交内容的合作者

3) PHP 脚本必须监控新电子邮件

4) 新电子邮件将被解析并加载到数据库中以供 Web 应用程序使用。

现在，我正在考虑在 Ubuntu 服务器上使用带有 Courier 的 Postfix，然后通过 PHP 的 exec() 或 system() 命令向系统发出调用。

有没有更好的解决方案呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:45:50.073

我会使用类似 node.js 的东西来处理电子邮件监控和系统调用。

看看[node-imap](https://github.com/mscdex/node-imap)作为一个很好的例子。

# ios - 如何强制 iOS Safari 忽略 EXIF 旋转？

> ID：10517293
> 
> 赞同：5
> 
> 时间：2012-05-09T13:38:18.857
> 
> 标签：ios, ipad, browser, exif

似乎我们有一个问题，桌面上的图像正确显示为直立，但在 iPad 上它们被旋转为横向。经过进一步调查，iPad 似乎从图像上的 EXIF 数据中查看旋转信息，并确定它应该以横向而不是纵向显示（这是它真正需要的）。

有没有什么办法可以在不下载所有成千上万的图像、剥离 EXIF 数据并将其重新上传到我们的云提供商的情况下处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-13T11:53:43.953

使用 jQuery，它的 HTML 结构要短得多：

```
<a href="foo" style="width:100px; height:100px;">
   <img src="bar" style="position:absolute; width:100px; height:100px; top:0; left:0;">
</a> 
```

Javascript：

```
setTimeout($.proxy(function(){
   this.css("position", "");
}, $('<video style="visibility:hidden; position:absolute; width:1px; height:1px">').before("img")), 0); 
```

注意：超时可防止有时位置不正确的显示错误。

**在iOS 7.1、7.0****和**6.1**上**像魅力一样工作！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T19:15:15.400

这非常奇怪，但由于某种原因 - 当您将图像绝对放置在视频元素（甚至是空的视频标签）上方时 - 带有 EXIF 旋转的图像**不会**旋转！

```
<video></video>
<img src="url.jpg" style="position:absolute;top:0;left:0" /> 
```

在 IOS 5.1 Iphone 4 上测试。（我希望没有人将此作为错误提交！;)）。

# c++ - 用于访问系统资源信息的多平台库

> ID：10517295
> 
> 赞同：2
> 
> 时间：2012-05-09T13:38:26.083
> 
> 标签：c++, resources, multiplatform

我需要一个多平台库来确定操作系统有多少可用 RAM、安装了多少、CPU 使用率有多高等等。该库应在 Windows 和 POSIX 环境中工作。有什么建议么？

**编辑**：我知道它是特定于操作系统的；我可以自己编写一些小型库来抽象它，但如果已经有一些可用的库，我宁愿不这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T19:36:07.323

这里几乎有同样的问题，它有一个答案：

[https://stackoverflow.com/a/871614/344347](https://stackoverflow.com/a/871614/344347)

# c++ - 对结果为 NULL 终止字符串的 UTF-8 字符串进行简单加密？

> ID：10517301
> 
> 赞同：2
> 
> 时间：2012-05-09T13:38:50.567
> 
> 标签：c++, algorithm, encryption

我想加密我在服务器上发送给客户端的内容（不一定是为了安全，只是为了防止有人轻易看到 Wireshark 之类的数据）。

我正在寻找一种算法，其结果仍然是一个以 NULL 结尾的字符串，但可以非常快速轻松地解密回 utf-8 字符串。我使用的网络库只允许我向客户端发送 NULL 终止的字符串，这就是原因。我正在使用带有可靠数据包的 UDP 库。

有哪些算法可以做这种事情？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T13:53:53.473

异或具有某个值（或另一个字符串）的所有字节。

在发送数据之前，将所有 '\0' 字符替换为 0xff 0xfe 并将所有 0xff 替换为 0xff 0xff。（显然，您可以使用其他值）

接收数据时，逆向处理——用 0xff 替换 0xff 0xff，用 0 替换 oxff 0xfe。然后用 key 异或。

或者，您可以对加密数据进行 base64 编码以处理`\0`字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:42:48.790

如果你想打乱你的数据，你可以寻找进行*Base64*编码、*ROT13*或*HEX*编码的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:27:43.597

**如果**您需要密文与明文大小相同，则需要从 [1..255] 到 [1.255] 的字符映射，因此您可以执行类似的操作

```
cipherbyte = ((clearbyte + keystreambyte) mod 255)+1 
```

您确定 [1..255] 中的每个角色都有明确的路径吗？

**如果**您不介意密文大于明文，那么您可以 XOR（mod 256）并采用 SigTerm 建议的转义机制。

**请注意**，无论哪种情况，您都需要一些密钥流材料，并且必须决定一些密钥管理策略。阅读[流密码](http://en.wikipedia.org/wiki/Stream_cipher)可能会给您一个良好的开端，请记住，两次使用相同的密钥等同于一遍又一遍地使用相同的编码（不是很强大）。

# php - Galleria Fullscreen 无法在 IE 上运行

> ID：10517302
> 
> 赞同：0
> 
> 时间：2012-05-09T13:39:00.963
> 
> 标签：php, jquery, drupal, galleria

我正在使用 Drupal 7 和 Galleria 1.2.6 并且有全屏主题。我的画廊在 Firefox 上工作。但是当单击全屏图像时无法在 IE 上运行。

问题线：

```
 this.setStyle(this.get('iefix'), { 
```

完整的代码：

```
 if (Galleria.IE) {
            this.addElement('iefix');
            this.appendChild('container','iefix');  
            this.setStyle(this.get('iefix'), {
                zIndex:3,
                position:'absolute',
                backgroundColor: '#000',
                opacity:.4
            })
        } 
```

错误日志：

```
Webpage error details

User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0)
Timestamp: Wed, 9 May 2012 13:43:16 UTC

Message: Object doesn't support this property or method
Line: 39
Char: 13
Code: 0
URI: http://mysite.com/sites/all/libraries/galleria/themes/fullscreen/galleria.fullscreen.js 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:55:30.040

看来`setStyle`IE8 并不能很好地工作。[那里](http://www.nutt.net/2010/04/02/prototype-js-setstyle-and-ie-not-working-together/)可能有解决方案

很快它将替换为`this.setStyle`，`Element.setStyle`但您可能需要查看`galleria`论坛以确保您获得相同的版本或询问他们有关此问题的信息。

# java - 在距坐标列表的最小距离处查找坐标

> ID：10517306
> 
> 赞同：4
> 
> 时间：2012-05-09T13:39:10.093
> 
> 标签：java, algorithm, spatial

我有一个二维空间中的坐标列表（x [i]， y [i]）。如何找到一个坐标（X，Y），使其与其他给定坐标之间的距离最小？是否有一个数学公式可以解决（X，Y）？

让我举个例子。假设我有坐标列表 (0,0);(1,0);(0,1);(-1,0);(0,-1); 现在我必须找出可能的坐标（一个或多个），以使生成的坐标与所有点的距离最小。在这种情况下（0,0）。

正如 Voo 所说，这是我的要求： **找到一个点，使到给定集合中的点的距离之和最小**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:43:42.957

**假设您要寻找最接近给定点的候选人**

您正在询问[*最近的邻居搜索*](http://en.wikipedia.org/wiki/Nearest_neighbor_search)。

最简单的方法就是遍历每个候选坐标，计算欧几里得距离（假设您想要一个欧几里得度量），并跟踪最小值。这足够了吗？

更复杂（但可能更快）的方法包括将您的候选点存储在例如[空间分区树](http://en.wikipedia.org/wiki/Space_partitioning)中，例如四叉树或 kd-tree，或其他几种变体之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T14:37:30.910

要求：找到一个点，使到给定集合中的点的距离之和最小。

与所有其他点的欧式距离和最小的点具有：

x = 集合中所有 X 的
平均平均值 y = 集合中所有 Y 的平均平均值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T13:45:08.010

```
public Coord2D minDistance(List<Coord2D> coordinates, Coord2D someCoord) {
   float minDistance = Float.MAX_VALUE;
   Coord2D result;
   for (Coord2D coord : coordinates) {
       float distance = Math.sqrt(Math.pow((coord.x - someCoord.x), 2) + (Math.pow((coord.y - someCoord.y), 2))
       if (distance < result) { 
           result = coord;
           minDistance = distance;
       }
   }

   return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T13:42:41.657

您可以使用欧几里得距离公式计算两点之间的距离：squareroot((x1-X)²+(yi-Y)²) 或者您可以使用曼哈顿公式：|yi-Y|+|xi-X|。

这是寻路问题吗？

# javascript - Javascript 正则表达式所有以开头的名称

> ID：10517307
> 
> 赞同：0
> 
> 时间：2012-05-09T13:39:11.440
> 
> 标签：javascript, regex, drop-down-menu

我有一个 javascript 函数，它应该用传递给函数的字母开头的数组中的所有项目填充一个选择框。我唯一的问题是我无法让我的正则表达式语句/编码工作。这是我的功能：

```
function replaceCompanySelect (letter)
{

var list = document.getElementById("company");  //Declare the select box as a variable
list.options.length=0;  //Delete the existing options

list.options[0]=new Option("Please Select a Company", "0", false, false); //Add the first option in

for(var i=1;i<companies.length;i++)  //For each company in the array
{

    if(companies[i].match("/\b"+letter+"/g") != null && (letter != 'undefined' ||letter != 'undefined'))  //If the company starts with the correct letter and the position's value is not undefined or empty
    {

        alert(companies[i]); //Only used for testing purposes, code should be as above loop to I used to insert the 1st option

    }

}

} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:43:03.030

这也有效，并且没有 RegEx：

```
if (companies[i].charAt(0).toLowerCase() == letter.toLowerCase()) {...} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:50:51.137

我不会打扰正则表达式。你只会制造问题。像这样的东西会起作用。

```
var companies  = ["microsoft","apple","google"],
    startsWith = function(arr,match){

        var length = arr.length;

        for(var i=0; i < length; i+=1){

            if(arr[i].toUpperCase().lastIndexOf(match.toUpperCase(), 0) === 0){

                return arr[i];                           
            }

        }
    };

console.log(startsWith(companies,"g")); //=> returns google 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:03:30.203

就像是？

```
function foo (letter) {
 var companies  = ["microsoft","apple","google"];
  return companies.filter(function(s) { return s.match(new RegExp(letter,"ig")); });
}

alert(foo("G")); //google 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T13:42:52.790

这实际上可能在没有正则表达式的情况下更有效（当然，这将被视为微优化......）。我只会做类似的事情：

```
if (letter && companies[i][0].toLowerCase() === letter.toLowerCase()) { ... } 
```

# asp.net - 如何根据数据库中的整数值生成复选框字段？

> ID：10517311
> 
> 赞同：0
> 
> 时间：2012-05-09T13:39:46.533
> 
> 标签：asp.net, vb.net, gridview, checkbox

我想使用 GridView 生成复选框字段，系统将根据 totalDay 的数量计算要显示的字段数。如果数据库中存储的totalDay是7，那么调用eventID时会生成7个checkbox，D1-D7 checkboxes字段会出现；如果 totalDay 为 5，它将生成 5 个复选框，将出现 D1-D5 复选框字段。

在 PHP 中，我设法根据值 totalDay 自动生成我想要的 D 字段数。但我不知道如何在 VB 中编写代码。

PC Fair Event 为期 7 天，因此在用户选择要预订的活动和展位后，它将显示 7 个复选框： ![在此处输入图像描述](../Images/819f7c4173114612c1cab7579f6443d6.png)

嘉年华 2012 的持续时间为 5 天，因此在用户选择要预订的活动和展位后，它将显示 5 个复选框： ![在此处输入图像描述](../Images/dd7fff91c478cdd28ebb9d5b5733946f.png)

PHP中可以生成复选框的代码：

```
$query = "select * from booths, eventinfo where booths.eventID=eventinfo.eventID && booths.eventID = ".$id."";

$_SESSION['EVENT_ID']=$id;
$result = mysql_query($query);
$result2= mysql_query($query);

echo "<table border='0' style='width:400px;table-layout:fixed'>";

$rows2 = mysql_fetch_array($result);
$Day=$rows2['totalDay'];
echo "<table>";
for ($day = 0; $day <= $Day; ++$day) {
    if($day==0){
        echo "<th>Booth</th>";
    }else{
         echo "<th>D".$day."</th>";
    }
}

while($rows = mysql_fetch_array($result2)){
    $boothAlias=$rows['boothAlias'];
    $totalDay=$rows['totalDay'];
    $boothID=$rows['boothID'];

    echo "<tr><td>$boothAlias</td>";
    for ($day2 = 1; $day2 <= $totalDay; ++$day2) {

        $d=$rows["D$day2"];

        if ($d==0){
            echo "<td><input name='totalDay[]' type='checkbox' value='$boothAlias $boothID $day2'/></td>";

        }else{
            echo "<td><input name='totalDay[]' type='checkbox' value='$boothAlias $day2' disabled='true'/></td>";
            }
        }
        echo "</tr>";
}

echo "</table>";
}
} 
```

我不知道如何调用 totalDay 值并循环检查 VB 中的 D 字段。有没有更好的解决方案来生成复选框？可以只重用一个itemtemplate来生成checkbox并绑定D字段吗？

以下是我当前的 VB 代码：

```
<%@ Page Language="VB" MasterPageFile="~/MasterPageMember.master" AutoEventWireup="false" CodeFile="member_view_event_list.aspx.vb" Inherits="member_view_event_list" title="Untitled Page" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">

</asp:Content>

<asp:Content ID="ContentPlaceHolder2" runat="server" 
contentplaceholderid="ContentPlaceHolder2">

<table width="80%">
    <tr><td class="style10">&nbsp;</td><td class="style8">&nbsp;</td><td>&nbsp;</td></tr>
    <tr><td class="style10">
        <asp:Label ID="Label1" runat="server" Text="Select Event:"></asp:Label>
    </td><td class="style8">
        <asp:DropDownList ID="ddlEventList" runat="server" 
            DataSourceID="SqlDataSourceEvent" DataTextField="eventTitle" 
            DataValueField="eventID" AutoPostBack="True" Width="200">

        </asp:DropDownList>
        <asp:SqlDataSource ID="SqlDataSourceEvent" runat="server" 
            ConnectionString="<%$ ConnectionStrings:ConnectionString1 %>" 
            SelectCommand="SELECT DISTINCT [eventTitle], [eventID] FROM [booth_eventinfo]">
        </asp:SqlDataSource>
    </td><td>
            &nbsp;</td></tr>

    <tr><td class="style10">
        <asp:Label ID="Label2" runat="server" Text="Select Booth:"></asp:Label>
        </td><td class="style8">
        <asp:DropDownList ID="ddlBoothList" runat="server" 
            DataSourceID="SqlDataSourceBooth" DataTextField="boothAlias" 
            DataValueField="boothID" AutoPostBack="True" Width="200">

        </asp:DropDownList>
        <asp:SqlDataSource ID="SqlDataSourceBooth" runat="server" 
            ConnectionString="<%$ ConnectionStrings:ConnectionString1 %>" 
            SelectCommand="SELECT [boothAlias], [boothID] FROM [booth_eventinfo] WHERE ([eventID] = @eventID)">
            <SelectParameters>
                <asp:ControlParameter ControlID="ddlEventList" Name="eventID" 
                    PropertyName="SelectedValue" Type="Int32" />
            </SelectParameters>
        </asp:SqlDataSource>
        </td><td>
             </td></tr>

    <tr><td class="style10">
        &nbsp;</td><td class="style8">
            &nbsp;</td><td>
             &nbsp;</td></tr>

    <tr><td class="style9" colspan="3">

        <asp:GridView ID="GridViewDay" runat="server" AutoGenerateColumns="False" 
            CellPadding="4" DataSourceID="SqlDataSourceDay" ForeColor="#333333" 
            GridLines="None">
            <RowStyle BackColor="#FFFBD6" ForeColor="#333333" />
            <Columns>

                <asp:TemplateField HeaderText="Day1" SortExpression="D1" HeaderStyle-HorizontalAlign="Center">
                <ItemTemplate>
                <asp:CheckBox ID="CheckBox1" runat="server" Checked='<%# Bind("D1") %>' />
                </ItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Day2" SortExpression="D2" HeaderStyle-HorizontalAlign="Center">
                <ItemTemplate>
                <asp:CheckBox ID="CheckBox2" runat="server" Checked='<%# Bind("D2") %>' />
                </ItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Day3" SortExpression="D3" HeaderStyle-HorizontalAlign="Center">
                <ItemTemplate>
                <asp:CheckBox ID="CheckBox3" runat="server" Checked='<%# Bind("D3") %>' />
                </ItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Day4" SortExpression="D4" HeaderStyle-HorizontalAlign="Center">
                <ItemTemplate>
                <asp:CheckBox ID="CheckBox4" runat="server" Checked='<%# Bind("D4") %>' />
                </ItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Day5" SortExpression="D5" HeaderStyle-HorizontalAlign="Center">
                <ItemTemplate>
                <asp:CheckBox ID="CheckBox5" runat="server" Checked='<%# Bind("D5") %>' />
                </ItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Day6" SortExpression="D6" HeaderStyle-HorizontalAlign="Center">
                <ItemTemplate>
                <asp:CheckBox ID="CheckBox6" runat="server" Checked='<%# Bind("D6") %>' />
                </ItemTemplate>
                </asp:TemplateField>

            </Columns>

            <FooterStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="#FFCC66" ForeColor="#333333" HorizontalAlign="Center" />
            <SelectedRowStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="Navy" />
            <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
            <AlternatingRowStyle BackColor="White" />
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSourceDay" runat="server" 
            ConnectionString="<%$ ConnectionStrings:ConnectionString1 %>" 
            SelectCommand="SELECT [D1], [D7], [D6], [D5], [D4], [D3], [D2] FROM [booth_eventinfo] WHERE ([boothID] = @boothID)">
            <SelectParameters>
                <asp:ControlParameter ControlID="ddlBoothList" Name="boothID" 
                    PropertyName="SelectedValue" Type="Int32" />
            </SelectParameters>
        </asp:SqlDataSource>
        </td></tr>

    <tr><td class="style10">
        &nbsp;</td><td class="style8">
            &nbsp;</td><td>
            &nbsp;</td></tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:44:21.820

我认为您可以更轻松地使用`CheckBoxList`控件：

```
<asp:CheckBoxList ID="CheckList1" runat="server" 
    RepeatLayout="Table" 
    RepeatDirection="Horizontal" 
    RepeatColumns="7" 
    DataTextField="DayName" 
    DataValueField="DayNumber">
</asp:CheckBoxList> 
```

然后，在代码隐藏中，您只需绑定列表：

```
Protected Sub Page_Load(sender As Object, e As EventArgs)
    If Not Page.IsPostBack Then
        CheckList1.DataSource = GetData()
        CheckList1.DataBind()
    End If
End Sub 
```

# iphone - iOS：分组 UITableView 问题

> ID：10517313
> 
> 赞同：0
> 
> 时间：2012-05-09T13:39:53.907
> 
> 标签：iphone, uitableview, xcode4, grouped-table

当我尝试在属性检查器中将表格视图样式从*Plain*更改为*Grouped*然后构建时，它给了我以下错误消息：*Uncategorized could not read archive*。所以有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:54:32.007

您确定没有在项目名称或其他任何地方使用任何特殊字符吗？因为我在 Xcode 4 中创建了一个项目，然后使用属性对 tableview 进行分组并运行程序，它运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:55:23.773

您的所有 xib 文件和类不应包含特殊字符，如 $、#、% 等搜索并删除它们

# javascript - 使用 jQuery 检查所有表单输入是否为空

> ID：10517315
> 
> 赞同：25
> 
> 时间：2012-05-09T13:40:12.720
> 
> 标签：javascript, jquery, html, forms

我正在尝试验证联系表单，并且我想在填写每个输入字段后创建某种“表单已完成”消息（一些输入是文本框，一些是单选按钮）。

到目前为止，这是我的代码：

```
$(document).ready(function() {
  $('.form:input').each(function() {
    if ($(this).val() != "") {
      $('.congrats').css("display", "block");
    }
  });
});
```

```
p.congrats {
  display: none;
}
```

```
<div class="form">
  <input type="text" />
  <br />
  <input type="text" />
</div>
<p class="congrats">Congrats!</p>
```

[http://jsfiddle.net/7huEr/](http://jsfiddle.net/7huEr/)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-09T13:46:04.913

这应该让你开始：

```
$(document).ready(function() {
    $(".form > :input").keyup(function() {
        var $emptyFields = $('.form :input').filter(function() {
            return $.trim(this.value) === "";
        });

        if (!$emptyFields.length) {
            console.log("form has been filled");
        }
    });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="form">
    <input type="text" /><br />
    <input type="text" />
</div>
<p class="congrats"></p>
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T13:47:14.817

试试这个 ：

```
$("#a").on('click',function () {
var bad=0;
 $('.form :text').each(function(){ 
        if( $.trim($(this).val()) == "" ) bad++; 

    });

    if (bad>0) $('.congrats').css("display","block").text(bad+' missing'); 
    else $('.congrats').hide(); 
}); 
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="form">
    <input type="text" /><br />
    <input type="text" />
</div>
<p class="congrats"></p><input style="width:100px" value="check" id="a" type="button" />
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-04T18:07:23.483

这个使用 jQuery 的`serializeArray`函数，所以你不必担心检查不同类型的字段或什么是空字段：

```
$.fn.isBlank = function() {
    var fields = $(this).serializeArray();

    for (var i = 0; i < fields.length; i++) {
        if (fields[i].value) {
            return false;
        }
    }

    return true;
}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-09T13:51:22.407

```
$('#check').click(function () {
    var allFilled = true;

    $(':input:not(:button)').each(function(index, element) {
        if (element.value === '') {
            allFilled = false;
        }
    });

    console.log(allFilled);
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="form">
    <input type="text" /><br />
    <input type="text" />
</div>
<p class="congrats"></p>
<input type="button" id="check" value="check" />
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T13:54:47.460

jsFiddle：http: [//jsfiddle.net/7huEr/38/](http://jsfiddle.net/7huEr/38/)

```
$(document).ready( function()
{
    // Iterate over each input element in the div
    $('.form input').each(function()
    {
        // Add event for when the input looses focus ( ie: was updated )
        $(this).blur( function()
        {
            // Variable if all inputs are valid
            var complete = true;

            // Iterate over each input element in div again
            $('.form input').each(function()
            {
                // If the input is not valid
                if ( !$(this).val() )
                {
                    // Set variable to not valid
                    complete = false;
                }
            });

            // If all variables are valid
            if ( complete == true )
            {
                // Show said congrats
                $('.congrats').show();
            }
        });
    });
});​ 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-15T03:07:55.847

现代香草解决方案：

```
// Returns True if all inputs are not empty
Array.from(document.querySelectorAll('#myform input')).every(
    function(el){return el.value;}
) 
```

# python - wx 顶级菜单栏事件（python）

> ID：10517316
> 
> 赞同：1
> 
> 时间：2012-05-09T13:40:17.333
> 
> 标签：python, wxpython, menubar, wxwidgets

wxPython 中是否有任何方法可以在没有任何子项的情况下捕获对菜单栏上项目的单击。

即具有菜单结构

*   文件
    *   节省
    *   退出
*   垃圾邮件

我能够捕获单击保存或退出项目的事件，但不确定如何捕获单击垃圾邮件的事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:49:45.423

@uhz 解决方案几乎可以工作，但我不推荐它。不允许可点击的顶级菜单项一定是有原因的。在我的环境（Debian，wx 2.8）下，他的解决方案会出现奇怪的行为，比如通过悬停项目来触发事件。
你的用例更多的是工具栏之一，我建议你在这里使用一个。如果您不熟悉这些示例，我可以再建议您查看[zetcode（部分工具栏）上的示例。](http://zetcode.com/wxpython/menustoolbars/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:06:14.680

据我了解，文件和垃圾邮件是顶级菜单项。在 Windows 上，您可以尝试使用`wx.EVT_MENU_OPEN`和过滤事件，例如：

```
import wx
from wx.lib.mixins.inspection import InspectionMixin

class MyFrame(wx.Frame):
    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title)        
        menuBar = wx.MenuBar()        
        fileMenu = wx.Menu()
        fileMenu.Append(wx.ID_ANY, "Save")
        fileMenu.Append(wx.ID_ANY, "Quit")
        menuBar.Append(fileMenu, "File")
        self.__spamMenu = wx.Menu()
        menuBar.Append(self.__spamMenu, "Spam")
        self.SetMenuBar(menuBar)
        self.Bind(wx.EVT_MENU_OPEN, self.__onSpamOpen)

    def __onSpamOpen(self, event):
        if event.GetMenu() != self.__spamMenu:
            return event.Skip()
        print "Spam clicked"

class MyMenuApp(wx.App, InspectionMixin):
    def OnInit(self):
        self.Init()
        frame = MyFrame(None, wx.ID_ANY, 'Frame Window Demo')
        frame.Show(True)
        self.SetTopWindow(frame)
        return True

if __name__ == "__main__":
    app = MyMenuApp(0)
    app.MainLoop() 
```

这适用于 Python 2.6 和 wxPython 2.9.3.1

# google-app-engine - App 引擎 AppID

> ID：10517319
> 
> 赞同：1
> 
> 时间：2012-05-09T13:40:31.583
> 
> 标签：google-app-engine

好的，所以这个问题实际上是针对谷歌的，但是由于它不可能得到任何形式的支持，所以在这里尝试一下。我的公司有一个 Google Apps 高级帐户，其中包含一个链接到 App Engine 的自定义域。该帐户是很久以前在 App Engine 没有 HRD 选项时创建的。默认应用程序名称（对应于自定义域）xxx.appspot.com 是使用旧的主/从数据存储创建的，因此我着手迁移它。首先，我将所有内容迁移到 xxx-hrd，然后删除了 xxx.appspot.com，以便我可以使用 HRD 重新创建它。我现在的问题是，当我尝试创建 xxx.appspot.com 时，它告诉我 appid 不可用。然后我浏览了 Google Apps 并从那里创建了它.. 一切顺利.. 但现在似乎该应用程序已创建但没有人可以访问它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T14:17:41.380

根据 google 文档，不可能两次创建相同的 app-id。

```
Once you register an application ID, you can delete it, 
but you can't re-register that same application ID after
it has been deleted. You can skip these next steps if you
don't want to register an ID at this time. 
```

（这就是您无法在 GAE 中创建应用程序的原因）

可能是您的应用程序帐户中用于访问此应用程序 ID 的配置，它可能仅检测到已删除的应用程序 ID。

我建议建立一个新的 app-id 并将它们连接到您的应用程序帐户中。

通常还需要一些时间才能使连接正常工作（因为 DNS 条目已重新配置并且需要分发）。我不得不等几个小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:42:25.253

如果您有高级帐户，您是否尝试在企业门户上打开案例：[https](https://enterprise.google.com/customerportal/) ://enterprise.google.com/customerportal/ ？

我总是使用该渠道获得优质服务。

# android - 如果我们导航到（Android）中的另一个活动，则所有活动的标签栏

> ID：10517321
> 
> 赞同：0
> 
> 时间：2012-05-09T13:40:45.377
> 
> 标签：android, android-activity

我编写了一个带有 2 个选项卡的简单 Android 程序。Tab 1 有一个按钮，它将打开一个新窗口。但我意识到，当打开这个新窗口时，Android 标签栏将被隐藏。

我想在新活动开始时始终显示 Android 标签栏，即显示所有活动的标签栏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:48:46.760

您使用的是 Android[选项卡布局](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html)吗？如果是这样，那么您的活动将成为 TabHost 的子项，并且您没有问题。

如果您将自己的自定义按钮显示为选项卡，那么您需要在两个活动上都显示它。使用包含是一个很好的方法来做到这一点。请参阅[创建可重用的 UI 组件](http://developer.android.com/resources/articles/layout-tricks-reuse.html)。

# c# - 使用 Global.asax 进行 URL 重写和回发的另一种方法？

> ID：10517323
> 
> 赞同：0
> 
> 时间：2012-05-09T13:40:51.247
> 
> 标签：c#, asp.net, url-rewriting, postback

我一直遇到 URL 重写和回发问题。

**编辑：**当前使用 IIS 7 和 URL 重写模块。

基本上在回发之后，我的 URL 重写完全搞砸了，并在我的查询字符串中添加了一些重复的和不必要的字段值对。考虑到我在我的代码中解析 URL，这在引发回发后破坏了一个已经工作的页面。

从我之前看到的很多人都有同样的问题，几乎所有人都通过修改PageLoad 上的**表单操作来修复它，如下所示：**

```
protected void Page_Load(object sender, EventArgs e)
    {
        form1.Action = Request.RawUrl;

        //Some other interesting things.
    } 
```

**重要提示：**这成功了，它*有效。*

然而，尽管我的开发经验实际上还不到一个月，但到目前为止，我一直在努力寻找更优雅的解决方案来解决我的问题。我被暗示可能有一个更好的选择，包括**编辑*Global.asax***以便在更“全局”级别上获得相同的结果。

在我看来，这应该会提高整体效率，因为该技巧将在调用任何其他页面之前完成。

***所以我的实际问题是：***

如何通过编辑 Global.asax 文件而不是修改 MasterPage 加载事件上的表单操作来实现相同的目的？如果您有更优雅的解决方案，我将不胜感激您也将其包括在内。

考虑到这是我的第一个问题，我希望我已经足够有建设性了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:32:40.647

如果您无法更改重写方法，那么我可以想到两种可能比您拥有的方法更好的方法。

1）创建一个基本页面并重写其中的操作 - 然后所有页面都应该从新的基本页面继承。这将代码保存在一个位置，您不必在每一页中都写。

2) 从默认表单控件继承并完全停止呈现动作属性，然后它将回发到重写的 URL。然后用新控件替换所有表单实例。你可以在这篇文章的一半左右看到我的意思[http://msdn.microsoft.com/library/ms972974](http://msdn.microsoft.com/library/ms972974)

**编辑**

3）Scott Gu 发布了这个问题的解决方案（在这篇文章中[http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)）这更干净，并且不涉及使用控制适配器更改任何代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:02:52.953

通过iis还有另一种方法：

[IIS URL 重写器和解释](http://www.iis.net/download/urlrewrite)

我建议您像这样计算根（如果存在 master，则在母版页属性中）：

```
Root = "http://" + Request.Url.Host + Request.ApplicationPath;
Root += (Root.EndsWith("/") ? "" : "/"); 
```

然后使用此指令将其粘贴到 .aspx 中：

```
<%=Root %> 
```

# jquery - 自动点击文档准备好的href链接

> ID：10517331
> 
> 赞同：0
> 
> 时间：2012-05-09T13:41:18.060
> 
> 标签：jquery, click

我有一个包含链接列表的页面。链接中有一个：

```
<a href="javascript:__doPostBack('content_0$rptLeftNavExternal$ctl00$rptLeftNavInternal$ctl11$CheckBox_PublicationType','')" id="content_0_rptLeftNavExternal_rptLeftNavInternal_0_CheckBox_PublicationType_11">Data Sheets</a> 
```

单击链接会在内容区域中生成项目的动态列表 - 无需重新加载页面。

使用 jQuery，我想要的是（1）页面完全加载，然后（2）自动点击链接。

我已经阅读了那些有类似问题的人的页面并想出了这个：

```
$(document).ready(function () {

  $("#content_0_rptLeftNavExternal_rptLeftNavInternal_0_CheckBox_PublicationType_11").click(function() {
    function() { __doPostBack('content_0$rptLeftNavExternal$ctl00$rptLeftNavInternal$ctl11$CheckBox_PublicationType',''); }
});

}); 
```

但是，它不起作用。什么都没发生。

如果有人可以解释/告诉我上面的代码有什么问题，我将不胜感激。

谢谢。

斯蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:45:23.820

如果你写：

```
$("#object").click(function(){ ...}); 
```

您正在`click event handler`对象上添加一个。如果你想启动你必须使用的事件

```
$("#object").click(); 
```

但在你的情况下，你为什么不直接使用 call ？

```
$(document).ready(function () {
  __doPostBack('content_0$rptLeftNavExternal$ctl00$rptLeftNavInternal$ctl11$CheckBox_PublicationType','');    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:02:37.490

jQuery 的[click](http://api.jquery.com/click/)函数有一个重载，可以将另一个处理程序[绑定](http://api.jquery.com/bind/)到您的元素。这是你打电话的那个。如果你不给它一个参数，就会调用无参数重载，它会点击你的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:43:15.233

您的代码实际上为您的`a`元素添加了一个点击处理程序。

但是，要执行该函数，您不需要附加处理程序或单击链接，而只需按以下方式执行其处理程序，例如：

```
$(document).ready(function () {
  __doPostBack('content_0$rptLeftNavExternal$ctl00$rptLeftNavInternal$ctl11$CheckBox_PublicationType',''); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T13:43:52.023

`.click(function() {`*将点击处理程序*附加到您的链接。您只想执行该功能。

```
$(document).ready(function () {
  __doPostBack('content_0$rptLeftNavExternal$ctl00$rptLeftNavInternal$ctl11$CheckBox_PublicationType',''); }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T13:44:03.507

`$("#blah")`用于引用 DOM 元素`id="blah"`。您发布的锚标记没有`id`属性，您的 jQuery 表达式没有引用任何元素。

# ubuntu - UBUNTU：当程序通过 rc.local 以引导顺序运行时，XOpenDisplay(NULL) 失败

> ID：10517333
> 
> 赞同：2
> 
> 时间：2012-05-09T13:41:20.050
> 
> 标签：ubuntu, x11, rc

我编写了一个程序，该程序在登录后在终端中以 ROOT 权限运行，但在重新启动后调用 XOpenDisplay(NULL) 时失败。该程序通过 rc.local 启动，但似乎无法看到 X11。

我需要 ROOT，因为我进行了 LibUSB 调用，如果不是 ROOT，这些调用会失败。我可以看到程序以 ROOT 权限运行，但检查环境变量显示未设置 DISPLAY。我有一个延迟循环运行，并在用户登录后进行检查，用户可以看到环境变量中设置的 DISPLAY 但程序不能。如果程序终止并在终端中运行，它可以完美运行，所以问题是程序在启动时无法与 X11 交互，并且这种状态仍然存在。

我希望程序在没有用户登录的情况下启动并运行。

谁能让我知道我需要做什么？

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:55:50.690

您的程序应仅在 X11 启动并运行后启动。但更好的设计是创建一个以 root 权限运行但不使用 X 的服务，并安排一个 X 客户端以某种方式与其通信。如果没有 X 就无法生存，那么就钩入 X11 启动序列，而不是系统启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:12:02.373

感谢tripleee解决了。

Ubuntu 现在使用 LightDM，因此将下面的行添加到`/etc/lightdm/lightdm.conf`

```
greeter-setup-script=usr/bin/'my-script' 
```

其中“我的脚本”是：

```
#!/bin/sh
/usr/bin/'my-prog' & 
```

一切正常。

# debugging - 如何在 VB6 中写入调试控制台？

> ID：10517338
> 
> 赞同：14
> 
> 时间：2012-05-09T13:41:39.137
> 
> 标签：debugging, vb6, console

我是 VB 的新手。我想测试一些旧的 VB 代码，但我需要能够打印到控制台才能测试代码中设置的某些值。如何从 VB 打印到控制台？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-09T13:43:30.217

使用 debug.print。但是 VB6 应用程序上没有控制台，可以打印到调试窗口。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-10T17:39:09.380

预计这不会是公认的答案，因为 Debug.Print 是进行 IDE 测试的方式。

然而，只是为了展示如何在 VB6 中轻松使用标准 I/O 流：

```
Option Explicit
'
'Reference to Microsoft Scripting Runtime.
'

Public SIn As Scripting.TextStream
Public SOut As Scripting.TextStream

'--- Only required for testing in IDE or Windows Subsystem ===
Private Declare Function AllocConsole Lib "kernel32" () As Long
Private Declare Function GetConsoleTitle Lib "kernel32" _
    Alias "GetConsoleTitleA" ( _
    ByVal lpConsoleTitle As String, _
    ByVal nSize As Long) As Long
Private Declare Function FreeConsole Lib "kernel32" () As Long

Private Allocated As Boolean

Private Sub Setup()
    Dim Title As String

    Title = Space$(260)
    If GetConsoleTitle(Title, 260) = 0 Then
        AllocConsole
        Allocated = True
    End If
End Sub

Private Sub TearDown()
    If Allocated Then
        SOut.Write "Press enter to continue..."
        SIn.ReadLine
        FreeConsole
    End If
End Sub
'--- End testing ---------------------------------------------

Private Sub Main()
    Setup 'Omit for Console Subsystem.

    With New Scripting.FileSystemObject
        Set SIn = .GetStandardStream(StdIn)
        Set SOut = .GetStandardStream(StdOut)
    End With

    SOut.WriteLine "Any output you want"
    SOut.WriteLine "Goes here"

    TearDown 'Omit for Console Subsystem.
End Sub 
```

请注意，VB6 中的实际控制台程序只需要很少的代码。其中大部分是关于当程序不在控制台子系统中运行时分配控制台窗口。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-09T15:04:57.223

使用优秀的免费[DebugView](http://technet.microsoft.com/en-us/sysinternals/bb896647)`OutputDebugString`使用和查看消息。调试可执行文件或从 IDE。Karl Peterson 的更多信息和可重用代码[在这里](http://visualstudiomagazine.com/articles/2008/11/17/executing-debuggables.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T13:44:12.353

这不是 Vb6 可以轻松做到的（我确信可以做到，但您将调用本机 Win32 API，如果您只是将其用于调试，则不值得痛苦）

您最好的选择（恕我直言）是将这些值写入日志文件。

# bash - 带通配符的猫

> ID：10517340
> 
> 赞同：1
> 
> 时间：2012-05-09T13:41:48.767
> 
> 标签：bash, shell, unix

这个问题可能微不足道，但我无法让它发挥作用。我只想将多个特定文件夹中的 2 个特定文件再次合并到每个特定文件夹中的一个新文件中。

```
cat */folder_*/*/file.a */folder_*/*/file.b > */folder_*/*/file.c 
```

但它不起作用，因为

```
-bash: */folder_*/*/file.c: No such file or directory 
```

所以我想也许由于某种原因`cat`无法创建文件（尽管确实如此），所以我尝试了

```
touch */folder_*/*/file.c; cat */folder_*/*/file.a */folder_*/*/file.b > */folder_*/*/file.c 
```

但同样它不适用于`cat`甚至`touch`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:13:32.490

也许你想要这样的东西；

```
for a in  */folder_*/*/file.a; do
    # maybe continue if b missing
    cat "$a" "${a%.a}.b" >"${a%.a}.c"
done 
```

通配符和重定向由 shell 处理；`cat`没有通配符的概念，也不知道您将其输出发送到哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:44:53.960

您不能对目标文件使用通配符。您必须完全指定文件名。`cat`与具体无关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T14:22:23.333

```
for dir in */folder_*/*; do 
  [[ -d "$dir" ]] && ( cd "$dir" && cat file.a file.b > file.c )
done 
```

我`cd && cat`在一个子shell中运行，所以你不必 cd 回到你开始的地方。

# c# - 动态生成复选框，并选择其中一些为选中状态

> ID：10517356
> 
> 赞同：4
> 
> 时间：2012-05-09T13:42:23.367
> 
> 标签：c#, asp.net-mvc, c#-4.0, razor, checkbox

所以我的问题是这样的，

我有两个清单

列表 A 包含。

1.  项目 1
2.  第 2 项
3.  第 3 项
4.  第 4 项
5.  第 5 项

并且列表 B 包含

1.  项目 1
2.  第 2 项
3.  第 3 项
4.  第 4 项
5.  ......
6.  ……
7.  项目 10

我要做的就是在 MVC Razor 视图中为 B 中的所有项目动态生成复选框，在这些复选框中，检查（选择）A 中所有项目的所有复选框。因为 A 将始终是 B 的子集。

然后用户可以选中或取消选中任何框，这些值可以传递给控制器​​以进行保存。列表 A 将使用用户选择的新值进行更新。

任何帮助？

**更新 1：** 我能够查看 Model.CheckboxSelections 中的所有项目。我不想使用局部视图。我正在尝试类似以下的操作，但仍然缺少一些东西。

```
 @for (int i = 0; i < Model.CheckboxSelections.Count; i++)
        {
@Html.CheckBox(Model.CheckboxSelections[i].Sku.ToString(), Model.CheckboxSelections[i].IsChecked.ToString())
     } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T13:51:39.350

有一定的重复自己的风险，我会用以下句子开始我的回答：

> 与往常一样，在 ASP.NET MVC 应用程序中，您应该使用视图模型。

所以：

```
public class MyViewModel
{
    public string Name { get; set; }
    public bool IsChecked { get; set; }
} 
```

然后是控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        // Those are your domain models
        // they could come from a database or something
        var listA = new[] { "Item 1", "Item 2", "Item 3", "Item 4", "Item 5" };
        var listB = new[] { "Item 1", "Item 2", "Item 3", "Item 4", "Item 5", "Item 6", "Item 7", "Item 8", "Item 9", "Item 10" };

        // Now let's map our domain model to our view model
        var model = listB.Select(x => new MyViewModel
        {
            Name = x,
            IsChecked = listA.Contains(x)
        });

        return View(model);
    }

    [HttpPost]
    public ActionResult Index(IEnumerable<MyViewModel> model)
    {
        var selectedItems = model.Where(x => x.IsChecked);
        var format = string.Join(",", selectedItems.Select(x => x.Name));
        return Content("Thank you for selecting " + format);
    }
} 
```

然后是相应的视图 ( `~/Views/Home/Index.cshtml`)：

```
@model IEnumerable<MyViewModel>

@using (Html.BeginForm())
{
    @Html.EditorForModel()
    <button type="submit">OK</button>
} 
```

最后是相应的编辑器模板，它将为模型集合的每个元素自动呈现（`~/Views/Home/EditorTemplates/MyViewModel.cshtml`）：

```
@model MyViewModel

<div>
    @Html.HiddenFor(x => x.Name)
    @Html.LabelFor(x => x.IsChecked, Model.Name)
    @Html.CheckBoxFor(x => x.IsChecked)
</div> 
```

渲染结果（如我的 Chrome 浏览器所见）如下所示：

![在此处输入图像描述](../Images/6a1537cc56201cc5b0113c6eefaf8850.png)

看看使用视图模型有多容易？

# c# - 一个文件夹的asp站点地图

> ID：10517357
> 
> 赞同：1
> 
> 时间：2012-05-09T13:42:28.657
> 
> 标签：c#, asp.net, sitemap

我想为我的应用程序创建一个站点地图。是否可以将节点指向文件夹，以便该文件夹中的所有页面都具有节点设置的角色？

```
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >  
<siteMapNode title="Private Pages" roles="Provate" url="">
  <siteMapNode title="Secure folder" url="/MainFolder">
  </siteMapNode>      
</siteMapNode> 
```

感谢任何能提供帮助的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:49:09.687

您的站点地图中未设置文件夹的角色。您应该`web.config`在文件夹中创建一个本地文件并在那里设置您的授权规则。

您可以在站点地图中做的是让节点对用户可见或不可见，并且所有子节点都可以继承该设置。

请注意，用户是否可以在您的菜单中看到链接与用户是否可以通过将浏览器指向资源的 url 来访问资源无关。

这就是为什么你应该同时拥有：本地配置文件中的授权规则（防止用户访问资源）和站点地图规则（防止用户看到菜单中的链接）。

# gmail - 获取已登录用户的 Gmail 个人资料图片

> ID：10517359
> 
> 赞同：2
> 
> 时间：2012-05-09T13:42:44.870
> 
> 标签：gmail, google-contacts-api

可以使用任何 Google api 获取登录用户的 Gmail 个人资料图片吗？

使用 Google 联系人 API，我可以获得我的联系人图片，但不是我的。使用 Google Plus api，我可以检索我的 Google plus 图片，这与我的 Gmail 图片不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T20:57:13.287

使用用户个人资料信息，发出授权请求以获取[https://www.googleapis.com/oauth2/v1/userinfo?access_token=](https://www.googleapis.com/oauth2/v1/userinfo?access_token=) {accessToken} 请参阅[https://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)了解更多信息细节

# saas - 远程 QuickBooks 功能 API？

> ID：10517368
> 
> 赞同：0
> 
> 时间：2012-05-09T13:43:18.377
> 
> 标签：saas, quickbooks

是否有一个 API 可以从我自己的 SaaS 应用程序远程使用 QuickBooks 功能，而不仅仅是 QuickBooks 用户的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:55:58.097

不。

如果您在运行 QuickBooks 的同一台机器上安装使用[QuickBooks SDK](https://ipp.developer.intuit.com/0085_QuickBooks_Windows_SDK/010_qb)的应用程序，您与 QuickBooks UI 交互的能力有限：您可以在 QuickBooks 菜单上创建一个菜单项，响应数据事件，并使 QuickBooks显示报告和个人交易。尝试使用此配置从 Saas 应用程序控制 QuickBooks 是不现实的。

如果您使用[Intuit 合作伙伴平台](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform)（这是一种集成 Saas 应用程序的好方法），那么您只是在处理数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-30T06:20:01.043

以下内容旨在以简化的方式演示 INTUIT API AUTHORIZATION：

注意：本教程假设您已经在[https://developer.intuit.com](https://developer.intuit.com)注册 并创建并注册了新应用程序。因此，您必须拥有“Oauth Consumer Key”和“Oauth Consumer Secret”。

概述的步骤：

```
Get REQUEST TOKEN, REQUEST TOKEN SECRET & Authorization URL.

Go to Authorization URL select the company to be authorised and click Authorize button.

Get OAUTH VERIFIER CODE post authorization (after autorization button is clicked) through a GET request from Intuit API server.

Get ACCESS TOKEN and ACCESS TOKEN SECRET using
OAUTH VERIFIER CODE,
REQUEST TOKEN & REQUEST TOKEN SECRET.

Create DateService object using 'Oauth Consumer Key', 'Oauth Consumer Secret', ACCESS TOKEN, ACCESS TOKEN SECRET & Company id (a.k.a Realm id). 
```

[http://philosophyofsciencetech.blogspot.in/2016/04/intuit-java-api-authorization-java-to.html](http://philosophyofsciencetech.blogspot.in/2016/04/intuit-java-api-authorization-java-to.html)

# php - PHP 中机器的 IP 地址给出 ::1 但为什么呢？

> ID：10517371
> 
> 赞同：44
> 
> 时间：2012-05-09T13:43:42.717
> 
> 标签：php, ip-address

我正在尝试通过 php 获取我的机器的 IP 地址。为此，我正在编写如下代码：

```
<?php echo  "<br />".$_SERVER['REMOTE_ADDR'];?> 
```

但是这段代码不起作用。它正在返回“ `::1`”。请帮助我如何获取实际的IP地址。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-05-09T13:48:38.840

`::1`是实际IP。它是一个 ipv6 环回地址（即 localhost）。如果您使用的是 ipv4，它将是`127.0.0.1`.

如果您想获得不同的 IP 地址，则需要通过不同的网络接口连接到服务器。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-01-21T13:13:26.490

如果您尝试运行 localhost，此答案将解决您的问题。只需少量更改

```
apache2/httpd.conf 
```

搜索所有“听”字例如：

```
Listen 80 
```

做成这样。

```
Listen 127.0.0.1:80 
```

比重新启动你的 apache

```
$_SERVER[REMOTE_ADDR] 
```

将会呈现 `Listen 127.0.0.1`

你可以在这个[详细的答案链接中看到答案](https://stackoverflow.com/a/13649642/5818602)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-09T13:47:05.310

如果您的意思是获取用户的 IP 地址，您可以执行以下操作：

```
<?php
    if(!empty($_SERVER['HTTP_CLIENT_IP'])){
      $ip=$_SERVER['HTTP_CLIENT_IP'];
    }
    elseif(!empty($_SERVER['HTTP_X_FORWARDED_FOR'])){
      $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
    }
    else{
      $ip=$_SERVER['REMOTE_ADDR'];
    }
?>

<?php echo  "<br />".$ip;?> 
```

它将获取用户的实际 IP 地址，而不考虑代理等。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-09T13:46:07.480

$_SERVER['REMOTE_ADDR'] 是客户端的 IP 地址。

$_SERVER['SERVER_ADDR'] 是服务器的 IP 地址。

参考： http: [//php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-04-27T04:37:06.227

简单的答案：您在本地服务器上使用它。尝试运行

```
function getUserIpAddr(){
    if(!empty($_SERVER['HTTP_CLIENT_IP'])){
        //ip from share internet
        $ip = $_SERVER['HTTP_CLIENT_IP'];
    }elseif(!empty($_SERVER['HTTP_X_FORWARDED_FOR'])){
        //ip pass from proxy
        $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
    }else{
        $ip = $_SERVER['REMOTE_ADDR'];
    }
    return $ip;
}

echo 'User Real IP - '.getUserIpAddr(); 
```

在真实服务器中。或者您也可以使用在线 php 执行器。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-09T13:46:25.943

看看输出`phpinfo()`。如果该地址不在该页面上，则该地址不能直接通过 PHP 获得。

# asp.net-mvc - 在 ASP.NET MVC 中处理来自格式错误的请求的 ELMAH 错误

> ID：10517374
> 
> 赞同：2
> 
> 时间：2012-05-09T13:43:45.260
> 
> 标签：asp.net-mvc, elmah

我们刚刚安装了一个大的 ASP.NET MVC 项目（从 ASP.NET 转换而来）。一切运行良好，但我们通过 ELMAH 看到大量错误，这些错误来自格式错误的 bot/spider 请求。它们不是恶意的——只是格式不正确。示例是对没有 ProductID 的产品页面的请求和对 ProductID 不是整数的产品页面的请求。在这些情况下，我设置了一个需要整数 ProductID 的操作方法，如果 ASP.NET MVC 看到其他任何内容，则会引发错误。

我真的不想破解我的操作方法来接受字符串或可为空的整数并编写代码来进行转换和处理丢失的参数。处理真实用户看不到的错误似乎需要做很多工作。

我知道我可以在 ELMAH 中过滤掉这些错误，但我想知道是否有更优雅的方式来处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:05:00.837

您可以过滤记录在 ELMAH 中的错误。

关于错误过滤的一般文章 - [http://code.google.com/p/elmah/wiki/ErrorFiltering](http://code.google.com/p/elmah/wiki/ErrorFiltering)

一些示例 - [http://code.google.com/p/elmah/wiki/ErrorFilterExamples](http://code.google.com/p/elmah/wiki/ErrorFilterExamples)

你可以在你的 global.asax （或其他地方）中放置类似的东西。

```
 protected void ErrorLog_Filtering(object sender, ExceptionFilterEventArgs e)
    {
        if(e.Exception.GetBaseException() is WebFaultException)
        {
            var exception = ((WebFaultException) e.Exception.GetBaseException());

            if(exception.StatusCode == HttpStatusCode.NotModified)
                e.Dismiss();
        }
    } 
```

我认为您可能会更好地使用 web.config 方法，明确列出被已知正则表达式模式命中的 URL。这样你的过滤就不会太苛刻，导致误报。

# java - Java String 到 int 二进制数的转换

> ID：10517383
> 
> 赞同：1
> 
> 时间：2012-05-09T13:44:04.393
> 
> 标签：java

我正在尝试将用户输入的字符串转换为 int。没问题，我正在使用以下代码：

```
c = sc.next();
while(!c.contains("#")){
    i = Integer.parseInt(c);
    input.add(c);
    c= sc.next();
} 
```

（这只是进行转换的代码部分，扫描仪部分正在工作）

唯一的问题是输入是二进制数，所以当输入例如“00111”时，转换给我“111”，我不能丢失那些0。如何在不丢失左侧零的情况下将用户输入转换为数字？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T13:46:58.297

如果`00111`与 then 不同，`111`则不能将其存储为整数，则需要将它们存储为字符串。

但是请注意，即使在二进制中， 00111 [2]也等于 111 [2]。

要解析二进制文字并将其存储在整数中，请使用

```
Integer.parseInt(c, 2); 
```

（但这并不能解决保持前导零的问题。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T13:47:24.717

你应该使用：

```
Integer.parseInt(c, 2) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T13:47:15.253

`Integer.parseInt("00111", 2);`

但是您必须提前知道基数才能区分二进制 (2) 和十进制 (10) 数字。

或者我可能不明白你的问题？你关于“失去0”的说法有点难以理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-01T14:17:46.873

要保留二进制字符串 s 中的前导零：

从字符串到整数：将“1”作为前缀附加到 s 并转换为整数。

从整数到字符串：将整数转换为二进制字符串并删除第一个“1”。

# objective-c - 如何给 NSWindow 一个摇晃效果说 NO，如登录失败窗口

> ID：10517386
> 
> 赞同：7
> 
> 时间：2012-05-09T13:44:11.940
> 
> 标签：objective-c, macos, cocoa, nswindow

我使用下面的代码来摇动视图并且它可以正常工作，现在我想摇动一个窗口我更改了两行，我用 code2 在代码中加粗但不起作用

```
//-------- code 1
CGFloat DegreesToRadians(CGFloat degrees)
{
    return degrees * M_PI / 180;
}

NSNumber* DegreesToNumber(CGFloat degrees)
{
    return [NSNumber numberWithFloat:
            DegreesToRadians(degrees)];
}
---------------
[self.view setWantsLayer:YES];

CAKeyframeAnimation * animation= [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation.z"];
[animation setDuration:0.04];
[animation setRepeatCount:10];

srand([[NSDate date] timeIntervalSince1970]);
float rand = (float)random();
[animation setBeginTime:CACurrentMediaTime() + rand * .0000000001];

NSMutableArray *values = [NSMutableArray array];
[values addObject:DegreesToNumber(-1)];
[values addObject:DegreesToNumber(1)];
[values addObject:DegreesToNumber(-1)];    
[animation setValues:values];        
[self.view.layer addAnimation:animation forKey:@"rotate"];

//-------- code 2 
[self.window.animator addAnimation:animation forKey:@"rotate"];
[self.window.animator setWantsLayer:YES]; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-05-06T10:05:30.143

您需要添加`QuartzCore Framework`.

然后使用以下内容：

```
#import <Quartz/Quartz.h>

//below action calls the method `shakeWindow`

- (IBAction)shake:(id)sender {
    [self shakeWindow];
}

-(void)shakeWindow{

    static int numberOfShakes = 3;
    static float durationOfShake = 0.5f;
    static float vigourOfShake = 0.05f;

    CGRect frame=[self.window frame];
    CAKeyframeAnimation *shakeAnimation = [CAKeyframeAnimation animation];

    CGMutablePathRef shakePath = CGPathCreateMutable();
    CGPathMoveToPoint(shakePath, NULL, NSMinX(frame), NSMinY(frame));
    for (NSInteger index = 0; index < numberOfShakes; index++){
        CGPathAddLineToPoint(shakePath, NULL, NSMinX(frame) - frame.size.width * vigourOfShake, NSMinY(frame));
        CGPathAddLineToPoint(shakePath, NULL, NSMinX(frame) + frame.size.width * vigourOfShake, NSMinY(frame));
    }
    CGPathCloseSubpath(shakePath);
    shakeAnimation.path = shakePath;
    shakeAnimation.duration = durationOfShake;

    [self.window setAnimations:[NSDictionary dictionaryWithObject: shakeAnimation forKey:@"frameOrigin"]];
    [[self.window animator] setFrameOrigin:[self.window frame].origin];

} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-15T09:07:28.727

这是 NSWindow 扩展形式的 Swift 版本（基于 Anoop Vaidya 答案）。

可能的用法：

```
window?.shakeWindow()
view.window?.shakeWindow()
NSApp.windows.first?.shakeWindow() 
```

ETC...

扩展（Swift 3.0）：

```
extension NSView {

    func shake(with intensity : CGFloat = 0.05, duration : Double = 0.5 ){
        let numberOfShakes      = 3
        let frame : CGRect = self.frame
        let shakeAnimation :CAKeyframeAnimation  = CAKeyframeAnimation()

        let shakePath = CGMutablePath()
        shakePath.move(to: CGPoint(x:NSMinX(frame),y:NSMinY(frame)))

        for _ in 0...numberOfShakes-1 {
            shakePath.addLine(to: CGPoint(x:NSMinX(frame) - frame.size.width * intensity,y:NSMinY(frame)))
            shakePath.addLine(to: CGPoint(x:NSMinX(frame) + frame.size.width * intensity,y:NSMinY(frame)))
        }

        shakePath.closeSubpath()
        shakeAnimation.path = shakePath
        shakeAnimation.duration = duration

        self.animations = ["frameOrigin":shakeAnimation]
        self.animator().setFrameOrigin(self.frame.origin)
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-10T07:16:13.777

**斯威夫特 4 解决方案**

```
 let window = self.view.window

    let numberOfShakes = 3
    let durationOfShake = 0.4
    let vigourOfShake : CGFloat = 0.03
    let frame : CGRect = (window?.frame)!
    let shakeAnimation :CAKeyframeAnimation  = CAKeyframeAnimation()

    let shakePath = CGMutablePath()
    shakePath.move( to: CGPoint(x:NSMinX(frame), y:NSMinY(frame)))

    for _ in 0...numberOfShakes-1 {
        shakePath.addLine(to: CGPoint(x:NSMinX(frame) - frame.size.width * vigourOfShake, y:NSMinY(frame)))
        shakePath.addLine(to: CGPoint(x:NSMinX(frame) + frame.size.width * vigourOfShake, y:NSMinY(frame)))
    }

    shakePath.closeSubpath()
    shakeAnimation.path = shakePath
    shakeAnimation.duration = durationOfShake

    let animations = [NSAnimatablePropertyKey(rawValue: "frameOrigin") : shakeAnimation]

    window?.animations = animations
    window?.animator().setFrameOrigin(NSPoint(x: frame.minX, y: frame.minY)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-22T13:50:55.823

斯威夫特 3 解决方案：

```
extension NSWindow {

    func shakeWindow(){
        let numberOfShakes      = 3
        let durationOfShake     = 0.25
        let vigourOfShake : CGFloat = 0.015

        let frame : CGRect = self.frame
        let shakeAnimation :CAKeyframeAnimation  = CAKeyframeAnimation()

        let shakePath = CGMutablePath()
        shakePath.move(to: CGPoint(x: frame.minX, y: frame.minY))

        for _ in 0...numberOfShakes-1 {
            shakePath.addLine(to: CGPoint(x: frame.minX - frame.size.width * vigourOfShake, y: frame.minY))
            shakePath.addLine(to: CGPoint(x: frame.minX + frame.size.width * vigourOfShake, y: frame.minY))
        }

        shakePath.closeSubpath()

        shakeAnimation.path = shakePath;
        shakeAnimation.duration = durationOfShake;

        self.animations = ["frameOrigin":shakeAnimation]
        self.animator().setFrameOrigin(self.frame.origin)
    }

} 
```

# android - Android：了解可绘制文件夹

> ID：10517389
> 
> 赞同：20
> 
> 时间：2012-05-09T13:44:13.627
> 
> 标签：android, image, drawable

我在文件夹下有一个尺寸为 250*70 像素的图像`drawable`（我刚开始进行 Android 开发，所以我在 中创建了`drawable`文件夹`res`），我在文件夹中有相同的图像，尺寸更高`drawable-large`；但图像看起来不像我预期的那样。

谁能解释 3 个可绘制文件夹背后的原因/目的？

我应该在哪里存储我的图像，以便它在两种模式（横向和纵向）和所有手机（包括平板电脑）中都能正确显示？

我希望我的图像动态缩放到设备屏幕的大小。

任何人都可以分享您的观点或搜索链接吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-09T13:51:23.707

文件夹名称需要是：

*   /drawable-ldpi 用于低密度屏幕
*   /drawable-mdpi 用于中等密度屏幕
*   /drawable-hdpi 用于高分辨率屏幕
*   /drawable-xhdpi 用于超高分辨率屏幕

/drawable 应该为您（1）不关心哪个设备或（2）xml可绘制资产的资产保留

然后最重要的是，您可以使用配置限定符根据配置提供不同的资源，您可以在此处阅读所有相关信息[http://developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)

例如，您可以拥有带有文件夹的风景的高分辨率资产

*   /drawable-land-hdpi

希望有帮助

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-09T13:51:07.623

默认情况下，Android 为具有不同分辨率的图像维护三个文件夹，其背后的原因是应用程序将在其上执行的 Android 设备的使用或分辨率。

hdpi 图像文件夹维护 Android 宽屏集或具有更高分辨率的 Android 手机的图像。

ldpi 用于较低的图像质量，由早期的 android 集支持

中等图像的 mdpi 支持具有最大分辨率的设备的 xhdi 图像文件夹。

Android OS 通过检查兼容设备及其分辨率来选择自己的图像。

希望能帮助到你。如果您得到解释，请接受。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-01T09:43:28.897

可绘制的 ldpi

可绘制的 mdpi

可绘制的 hdpi

可绘制的 xhdpi

可绘制的 tvdpi

可绘制的nodpi

可绘制-xxhdpi

可绘制的xxxhdpi

```
We can also use "drawable-xxhdpi"
xxhdpi (480dpi, Android 4.1 or later) 
```

请参阅以下链接中的“Android表格列”

[http://en.wikipedia.org/wiki/Smartphone](http://en.wikipedia.org/wiki/Smartphone)

请参考以下链接（xxxhdpi）中的“表1”

[http://developer.android.com/guide/practices/screens_support.html#xxxhdpi-note](http://developer.android.com/guide/practices/screens_support.html#xxxhdpi-note)

注意：drawable-xxxhdpi 限定符仅用于提供一个在 xxhdpi 设备上看起来比平常更大的启动器图标。您不需要为所有应用程序的图像提供 xxxhdpi 资产。

注意将在以下链接中 [http://developer.android.com/design/style/iconography.html#xxxhdpi-launcher](http://developer.android.com/design/style/iconography.html#xxxhdpi-launcher)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T13:49:59.153

您应该使用`drawable-hdpi`文件夹而不是`drawable-large`.

还[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)页面可能对您有帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T13:51:59.623

实际上有 4 种屏幕分辨率标准 - 检查此链接以获取更多信息[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)，下表。当您在设备上安装应用程序时，设备会返回这些标准之一并从相应文件夹中选择资源 - ldpi、mdpi、hdpi 和 xhdpi

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-09T13:05:46.767

1）不同drawable文件夹背后的原因-通过适应每个设备的屏幕密度来增强用户在使用我们的应用程序时的体验。

2）“我应该在哪里存储......” - 理想情况下，您可以为每个存在的屏幕密度存储具有适当尺寸的图像。如果您是初学者，只需使用一个文件夹，现在不用担心。

4）图像缩放这是一个很酷的指南，可以帮助您在应用程序内进行图像缩放： [https ://thoughtbot.com/blog/android-imageview-scaletype-a-visual-guide](https://thoughtbot.com/blog/android-imageview-scaletype-a-visual-guide)

3) 链接： [https](https://material.io/tools/devices/) ://material.io/tools/devices/ - 所有设备和密度的列表

# python - 如何为 django 注册创建自定义 django 后端？

> ID：10517391
> 
> 赞同：2
> 
> 时间：2012-05-09T13:44:16.687
> 
> 标签：python, django, django-forms, django-registration

我读过这个

> [http://docs.b-list.org/django-registration/0.8/backend-api.html](http://docs.b-list.org/django-registration/0.8/backend-api.html)

我有机会制作自己的后端。我这样做是因为我想创建一个不允许使用相同的电子邮件进行注册的后端，并且我想更改电子邮件错误消息。我也想添加到我自己的领域！

这是我想出的：

```
from django import forms
from registration.forms import RegistrationForm
from django.utils.translation import ugettext_lazy as _
from django.contrib.auth.models import User
from registration.forms import attrs_dict

class customRegistrationForm(RegistrationForm):
    email2 = forms.EmailField(widget=forms.TextInput(attrs=dict(attrs_dict,
        maxlength=75)),
        label=_("Confirm email"))

    def clean_email(self):
        """
        Validate that the email is alphanumeric and is not already
        in use.
        """
        try:
            email = User.objects.get(email__iexact=self.cleaned_data['email'])
        except User.DoesNotExist:
            return self.cleaned_data['email']
        raise forms.ValidationError(_("That email already exists - if you have forgotten your password, go to the login screen and then select \"forgot password\""))

    def clean(self):
        """
        Verifiy that the values entered into the two email fields
        match. Note that an error here will end up in
        ``non_field_errors()`` because it doesn't apply to a single
        field.

        """
        if 'email' in self.cleaned_data and 'email2' in self.cleaned_data:
            if self.cleaned_data['email'] != self.cleaned_data['email2']:
                raise forms.ValidationError(_("The two email fields didn't match."))
        return super(RegistrationForm,clean) 
```

以上内容在我的**init** .py 文件中（不管是什么）

然后，我的 urls.py 代码中有：

```
url(r'^accounts/register/$',
    register,
        { 'backend': 'myapp.forms.customRegistrationForm' },
    name='registration_register'),
... #other urls here! 
```

现在，当我转到 /accounts/register 页面时，出现以下错误：

> /accounts/register/ 处的 AttributeError
> 
> 'customRegistrationForm' 对象没有属性 'registration_allowed'

这很奇怪。它似乎告诉我我需要一个“registration_allowed”方法添加到我的子类中。但是，子类是 RegistrationForm 的子类，它工作正常并且没有定义那些东西......我知道我*可以*添加这些成员，但它似乎超出了扩展的目的，对吗？

更新

这是现在可以工作的代码！

我将不同的类分解为不同文件夹中的不同**init** .py 文件——一个称为“表单”，一个称为“后端”，它们都位于我的主项目下的文件夹“djangoRegistration”中。

/forms/**初始化**.py

```
from django import forms
from registration.forms import RegistrationForm
from django.utils.translation import ugettext_lazy as _
from django.contrib.auth.models import User
from registration.forms import attrs_dict

class customRegistrationForm(RegistrationForm):
    def __init__(self, *args, **kw):
        super(RegistrationForm, self).__init__(*args, **kw)
        self.fields.keyOrder = [
            'username',
            'email',
            'email2',
            'password1',
            'password2'
        ]

    email2 = forms.EmailField(widget=forms.TextInput(attrs=dict(attrs_dict,
        maxlength=75)),
        label=_("Confirm email"))

    def clean_email(self):
        """
        Validate that the email is alphanumeric and is not already
        in use.
        """
        try:
            email = User.objects.get(email__iexact=self.cleaned_data['email'])
        except User.DoesNotExist:
            return self.cleaned_data['email']
        raise forms.ValidationError(_("That email already exists - if you have forgotten your password, go to the login screen and then select \"forgot password\""))

    def clean(self):
        """
        Verifiy that the values entered into the two email fields
        match. Note that an error here will end up in
        ``non_field_errors()`` because it doesn't apply to a single
        field.

        """
        if 'email' in self.cleaned_data and 'email2' in self.cleaned_data:
            if self.cleaned_data['email'] != self.cleaned_data['email2']:
                raise forms.ValidationError(_("The two email fields didn't match."))
        return super(RegistrationForm,clean) 
```

/后端/**初始化**.py

```
from registration.backends.default import DefaultBackend
from dumpstownapp.djangoRegistration.forms import customRegistrationForm

class customDefaultBackend(DefaultBackend):
    def get_form_class(self, request):
        """
        Return the default form class used for user registration.

        """
        return customRegistrationForm 
```

最后，我的 urls.py 只是引用了新的后端：

```
url(r'^accounts/register/$',
    register,
        { 'backend': 'myapp.djangoRegistration.backends.customDefaultBackend' },
    name='registration_register'),
#more urls here! yay! 
```

最后一点，我必须添加一些代码来“排序”字段的呈现方式，这就是 customRegistrationForm 中的**init**方法正在做的事情

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T13:51:22.023

您正在尝试使用表单作为后端，但这根本不是后端。正如您链接到的文档所解释的那样，后端是一个实现某些方法的类，包括`registration_allowed`. 该表单没有实现任何这些，这并不奇怪，因为它用于用户输入和验证，而不是后端操作。

但是，该页面确实提示了实现此功能的正确方法。后端可以定义的方法之一是`get_form_class()`，它返回要使用的表单类。因此，您似乎需要一个自定义后端，该后端`registration.backends.default.DefaultBackend`仅继承并覆盖该`get_form_class`方法，该方法仅返回`customRegistrationForm`.

# wpf - 如何用文字包裹图像？

> ID：10517392
> 
> 赞同：1
> 
> 时间：2012-05-09T13:44:17.747
> 
> 标签：wpf, image, text, textblock

如何用如下绑定的文本包装图片。如果我在下面尝试，我会遇到错误：

> 错误 1 ​​无法将“TextBlock”类型的值添加到“BlockCollection”类型的集合或字典中

```
 <FlowDocumentScrollViewer>
                <FlowDocument IsHyphenationEnabled="True" IsOptimalParagraphEnabled="True" LineHeight="10" LineStackingStrategy="MaxHeight" TextAlignment="Left">
                    <Paragraph>

                        <Floater Width="130" HorizontalAlignment="Left" Margin="0,0,5,5" Padding="3">
                            <TextBlock Margin="5" TextAlignment="center" TextWrapping="Wrap" 
                               Text="{Binding Path=TitleTip}" FontSize="12" Name="style"> </TextBlock>
                            <BlockUIContainer >
                                <StackPanel>
                                    <Image Source="{Binding Path=Picture}" Margin="5" Height="30"></Image>
                                </StackPanel>
                            </BlockUIContainer>
                        </Floater>
                    </Paragraph>
                    <Paragraph></Paragraph>
                </FlowDocument>
            </FlowDocumentScrollViewer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-25T08:52:13.137

您需要用 BlockUIContainer 包围 TextBlock 或将其包含在现有的 BlockUIContainer 中

```
<BlockUIContainer > 
<TextBlock Margin="5" TextAlignment="center" TextWrapping="Wrap" 
 Text="{Binding Path=TitleTip}" FontSize="12" Name="style"> </TextBlock>
 </BlockUIContainer > 
```

# python - 双队列同步和性能

> ID：10517398
> 
> 赞同：0
> 
> 时间：2012-05-09T13:44:56.220
> 
> 标签：python, concurrency, synchronization, queue, amqp

我有一个使用 AMQP 的后台作业处理系统。多个服务器正在使用同一队列中的作业。这些服务器中的每一个都运行 4 个工作进程。到目前为止，一切都很好。

现在要处理的作业本身需要一些 IPC，为了保持一致，我再次使用 AMQP 队列（当然不同的队列）。这个想法是每个工人都将拥有它的 IPC 对应物，如下所示：

```
 /    IPC queue   \
Main queue ---> * W1 /                  \ W1-counterpart
              > * W2 /                  \ W2-counterpart
              > * W3 /                  \ W3-counterpart
              > * W4 /                  \ W4-counterpart
                     \ IPC Result queue / 
```

对方可以独立操作，所以如果W3-counterpart 为W1 处理工作就可以了。我注意到，问题是该系统似乎并没有一直被充分利用。即使主队列充满了作业，似乎也只有 2 个被同时处理，在不同的时刻，所有 4 个都被使用。为什么？为什么这不是一直有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:50:09.643

当您询问传入队列是否为空/非空时，我建议添加一些调试打印或类似结果。

# jquery - 如何立即选择并显示隐藏的 jquery ui 选项卡的内容，该选项卡在单击按钮时可见

> ID：10517400
> 
> 赞同：0
> 
> 时间：2012-05-09T13:45:04.520
> 
> 标签：jquery, jquery-ui, tabs

单击按钮时，我使选项卡可见，但实际上我必须单击选项卡才能查看内容。使选项卡可见时如何查看选项卡内容？

```
$('#searchPanelSubmit').click(function (e) {
            e.preventDefault(); 
            $('#tabs li:eq(2)').show();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:51:36.890

查看[jQuery UI Tabs](http://jqueryui.com/demos/tabs/#method-select)的文档，特别是`select`方法：

```
$('#searchPanelSubmit').click(function (e) {
    $('#tabs').tabs('select', 2);
    e.preventDefault(); 
}); 
```

# c# - XAML - InputBindings 防止触发 MouseLeftButtonDown-Events

> ID：10517404
> 
> 赞同：0
> 
> 时间：2012-05-09T13:45:15.893
> 
> 标签：c#, events, xaml

我有一个派生自 ItemsControl 的类，在其中我实现了自己的选择算法，它使用 MouseLeftButtonDown 来更改选择。

现在我需要一个特定的控件来处理 ViewModel 中的鼠标点击，所以我写了以下内容：

```
<controls:DraggableItemsContainer bla="blub">
    <controls:DraggableItemsContainer.InputBindings>
        <MouseBinding Gesture="LeftClick" Command="{Binding DeselectSubGroupsCommand}" />
    </controls:DraggableItemsContainer.InputBindings>
</controls:DraggableItemsContainer> 
```

现在发生的事情是，我不再得到 MouseLeftButtonDown 事件 - 这是可以理解的，因为命令“e.handles”点击。

但在这种情况下，这不是我想要的。有没有办法触发事件？

PS：是的，我需要在 MouseLeftButtonDown 事件中进行选择，而不是在任何预览事件中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:14:38.783

两种选择：

*   您可以使用自定义 ItemsControl 挂钩[`PreviewMouseDown`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.previewmousedown.aspx)而不是[`MouseDown`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mousedown).
*   您可以继续 hook `MouseDown`，但通过调用[`AddHandler`](http://msdn.microsoft.com/en-us/library/ms598899.aspx), 并传递参数`true`来完成`handledEventsToo`。

如果在`MouseBinding`完成工作后收到通知很重要，那么您需要使用`AddHandler`. 如果您可以先收到消息，那就`PreviewMouseDown`更简单了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:04:38.347

我认为您的问题是您尝试使用两种不同的方法在同一控件上捕获同一事件。

尝试这个：

```
<Grid>
    <Grid.InputBindings>
        <MouseBinding Gesture="LeftClick" Command="{Binding DeselectSubGroupsCommand}" />
    </Grid.InputBindings>
    <controls:DraggableItemsContainer bla="blub">
         .....
    </controls:DraggableItemsContainer>
</Grid> 
```

确保在您的控制范围内您拥有`e.Handled = false`.

这应该允许您的内部逻辑运行，然后执行命令。如果你需要它以相反的顺序......我不知道。

# c# - 为什么不能使用 List 使用 Directory.GetDirectories("c:\\") 时代替 string[]？

> ID：10517408
> 
> 赞同：0
> 
> 时间：2012-05-09T13:45:26.330
> 
> 标签：c#

我只是好奇为什么我必须在使用`string[]`时使用`Directory.GetDirectories()`

```
string[] directories = Directory.GetDirectories("c:\\");

foreach (var dir in directories)
{
     Console.WriteLine(dir);
} 
```

为什么我不能使用

```
List<string> _directories = new List<string>();
        _directories = Directory.GetDirectories("c:\\"); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T13:47:31.557

因为`GetDirectories`返回 a `string[]`，基本上。

无论如何，您可以：

```
List<string> _directories = new List<string>(Directory.GetDirectories("c:\\")); 
```

...或者：

```
List<string> _directories = Directory.GetDirectories("c:\\").ToList(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T13:48:39.733

你应该使用`Directory.EnumerateDirectories()`无论如何 - 因为它只会枚举目录，而不是填充整个数组 - 这将使用更少的内存。

来自 MSDN：

EnumerateDirectories 和 GetDirectories 方法的区别如下： 使用 EnumerateDirectories 时，可以在返回整个集合之前开始枚举名称集合；使用 GetDirectories 时，必须等待返回整个名称数组，然后才能访问该数组。因此，当您处理许多文件和目录时，EnumerateDirectories 会更有效。

（除非你真的需要一个填充数组）

编辑：

所以 - 更具体地回答这个问题 - 如果你想返回 List<> 类型，你最好这样做：

```
var dirs = Directory.EnumerateDirectories("c:\\").ToList(); 
```

因为这将避免转换的“数组”步骤。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T13:49:49.840

[Directory.GetDirectories](http://msdn.microsoft.com/en-us/library/system.io.directory.getdirectories%28VS.71%29.aspx)[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19%28VS.80%29.aspx)自 .Net 1.1 以来一直存在，然后才引入诸如此类的泛型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T13:50:28.653

简短的回答是性能。如果您事先知道您将拥有多少个项目（并且您会进行搜索），您可以预先分配一个普通数组并填充它，而不会使用双倍增长策略惩罚`List<>`。

一旦你有了你的基本`string[]`对象，你可以很容易地把它提供给一个列表，如果你真的需要的话，可以附加到它上面。采用另一种方式会导致最常用用例的性能损失。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T13:48:04.687

因为它显然是方法的返回类型。

# regex - 用随机值替换文本文件中的模式

> ID：10517409
> 
> 赞同：3
> 
> 时间：2012-05-09T13:45:31.090
> 
> 标签：regex, bash, text, sed, awk

我有一个带有这种模式的文本文件：

```
\t (hello world) 
```

我需要用唯一值（例如 ob1、obj2 等）替换括号中的文本，这样

```
\t (obj)
\t (obj)
\t (obj) 
```

变成……

```
\t (obj1)
\t (obj2)
\t (obj3) 
```

或者其他任何独特的东西。使用在 cygwin 中工作的任何工具的解决方案都可以工作。我使用 bash 和 sed 的尝试失败了：

```
#!/bin/bash
x=1
for fl in myfile; do
    cp $fl $fl.old
    sed 's/\\t \(.*\)/\\t \("${x}"\)/g' $fl.old > $fl.new
    x=$((x+1))
    echo $x
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:54:58.023

我知道如何做到这一点的最好方法是使用 perl 就地编辑：

例如 myfile.txt 包含：

```
\t (obj)
\t (obj)
\t (obj) 
```

运行就地编辑：

```
perl -i.bak -ne '$a=int(rand()*2000); s/\((.*?)\)/{$1$a}/g; print' myfile.txt 
```

myfile.txt 现在包含：

```
\t (obj1869)
\t (obj665)
\t (obj1459) 
```

显然`2000`根据您的要求进行调整。

**编辑**：如果您希望使用递增标识符，请使用：

```
perl -i.bak -ne '$a++; s/\((.*?)\)/{$1$a}/g; print' myfile.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:57:52.470

```
perl -pe 's/(?<=[(])[^)]*/"obj" . ++$count/eg' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:00:28.257

试试这个正则表达式...它使用 sed 的“扩展”正则表达式。

```
sed -r -e "s/\t \((.*)\)/\t \1${x}/g" 
```

但是，我不确定您的问题是要`obj`转到`obj1`, `obj2`, ... 在同一个文件中，还是每个文件都有自己独特的`obj1`, `obj2`...

**编辑**显然你需要逐行读取文件......这样的事情可能会奏效。

```
x=1
while read line; do echo ${line} |  sed -r -e "s/\t \((.*)\)/\t \1${x}/g"; let "x=x+1"; done < myfile.txt > myfile.new.txt 
```

当然，它可能`perl`像其他人那样使用起来更简单

# java - 使用 Pervasive Connectors 创建连接器

> ID：10517415
> 
> 赞同：1
> 
> 时间：2012-05-09T13:45:54.023
> 
> 标签：java, pervasive

任何人都可以帮我解决我的问题吗，我正在搜索如何从 1 周开始普遍创建连接器，我无法找到解决方案，至少要继续前进，我按照预定义的链接

```
http://www.pervasive.com/Galaxy/Products/Connectors.aspx?type=connector 
```

请帮助我，如何在 Java 中为普及数据库创建连接器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T18:20:30.993

连接器框架和文档不公开，需要保密协议。您必须联系 Pervasive ( [http://www.pervasiveintegration.com](http://www.pervasiveintegration.com) ) 来讨论这个问题。

# mathml - MathML - 左下标和上标

> ID：10517416
> 
> 赞同：0
> 
> 时间：2012-05-09T13:45:59.237
> 
> 标签：mathml, subscript, superscript

如何编写保留 MathML 正确语法的左下标和上标？我的意思是这样的：

![左下标和上标](../Images/322e0845f2834e293779a6891b7727f7.png)

感谢您的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:19:33.577

使用`<mmultiscripts>`- 有关详细信息，请参阅[http://www.w3.org/TR/MathML3/chapter3.html#presm.mmultiscripts](http://www.w3.org/TR/MathML3/chapter3.html#presm.mmultiscripts)。在你的情况下，它是：

```
<mmultiscripts>
    <mi>a</mi>
    <mprescripts/> <mi>c</mi> <mi>b</mi>
</mmultiscripts> 
```

# c++ - c中的文件包含

> ID：10517419
> 
> 赞同：-1
> 
> 时间：2012-05-09T13:46:06.613
> 
> 标签：c++, codeblocks

如果问题很蹩脚，我不是程序员对不起。如果断章取义，请引导我到正确的链接...

如果我有一个头文件说“file.h”并且我在其中声明了几个函数。除了在“file.c”中给出定义之外，还有什么方法可以让我将不同的.c 文件用于不同的功能，以便头文件保持 file.h（具有所有相应的功能）。我正在使用代码块。

任何帮助表示赞赏....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:50:07.517

[*注意：这部分答案是指OP从他的问题中删除的源代码......*](https://stackoverflow.com/revisions/10517419/1)

您声明`getNode`为采用单个`int`参数并返回指向 a 的指针`node`。然而，您将其定义`getNode`为不带参数并返回指向 a 的指针`node`。

您要么需要改进您的声明或定义，并且鉴于您对 的使用`getNode`，我会改进您的定义：

```
node* getNode(int data)
{
    node* temp=new node;
    temp->data = data; // <- use the argument
    temp->left=NULL;
    temp->right==NULL;
    temp->next==NULL;
    return temp;
} 
```

* * *

至于新问题，由于预处理器，头文件只是源包含的块。

*按照惯例*，您可以使用它来声明全局变量、函数和数据结构。但是，您必须注意确保这些声明有意义并且与您的应用程序的其余部分同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:53:01.883

您在 treelib.h 中定义的 getNode 定义有一个参数。您在 treelib.cpp 中的 getNode 实现没有。所以在treelib.h中它被定义为“node* getNode(int);” 但在 treelib.cpp 中，您已将其实现为“node* getNode()”。两者不一样。更改 treenode.cpp 中的版本以匹配标题中的定义，你会没事的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T13:53:12.427

头文件通常用于声明结构/类、常量、函数原型等。但是除了您赋予它们的含义之外，头文件和源文件之间**没有任何关系；**没有“每个源文件一个头文件”之类的东西。

您可以根据需要拆分代码。`file.h`并不一定意味着`file.cpp`任何地方都应该有一个文件。这只是惯例。

关于您的问题，您只是错误地实现了您的功能（您的源文件中缺少一个参数。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T13:54:32.207

对于您的第一个问题，是的，您可以，[这是一篇](http://c2.com/cgi/wiki?OneBigHeaderFile)讨论它的文章。

如果您有一个标题为标题的头文件`header.h`并希望它包含包含在另一个库中`function.c`以及来自另一个库的函数，您只需 **在 header.h 中执行以下操作：**

```
#include "header.c"
#include <other.h> 
```

其中，`other.h`是一个包含其他函数的函数头文件。

* * *

***注意：这部分答案是指OP删除的问题的一部分。***

对于您的下一个问题，您的函数声明似乎与您`getNode`尝试实现它的方式不匹配。（创建为 void 函数，但使用整数参数调用它）。为了解决你的问题，我会先解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T13:50:42.150

Q1：是的，只需为每个函数使用不同的实现文件，然后链接它们。

事实上，这是将代码分解为单独的编译单元的好方法。它不仅使查找相关代码变得更容易，而且如果某些函数从未被引用，还可以减小可执行文件的大小。

Q2：你还没有定义函数`getNode(int)`，而是`getNode( )`

# bioinformatics - 给定GI NCBI核苷酸数据库的blast

> ID：10517421
> 
> 赞同：0
> 
> 时间：2012-05-09T13:46:14.270
> 
> 标签：bioinformatics, blast, ncbi

我有本地数据库驱动的网站，其中包含一些通过其 GI 编号唯一标识的序列。是否可以在给出 GI 的情况下直接链接到“NCBI 爆炸站点”。例如 GI 903049 的序列有这个链接：

[http://www.ncbi.nlm.nih.gov/nuccore/903049](http://www.ncbi.nlm.nih.gov/nuccore/903049)

它链接到这个爆炸页面：

[http://blast.ncbi.nlm.nih.gov/Blast.cgi?PAGE=Nucleotides&PROGRAM=blastn&QUERY=U22848.1&DATABASE=nr&MEGABLAST=on&BLAST_PROGRAMS=megaBlast&LINK_LOC=nuccore&PAGE_TYPE=BlastSearch](http://blast.ncbi.nlm.nih.gov/Blast.cgi?PAGE=Nucleotides&PROGRAM=blastn&QUERY=U22848.1&DATABASE=nr&MEGABLAST=on&BLAST_PROGRAMS=megaBlast&LINK_LOC=nuccore&PAGE_TYPE=BlastSearch)

我想直接链接到这个网站而不必去NCBI。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:54:26.873

您可以使用 ncbi efetch 下载所有 gis：

[http://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=nuccore&id=903049&rettype=fasta&retmode=text](http://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=nuccore&id=903049&rettype=fasta&retmode=text)

并运行本地版本的blast：[http ://blast.ncbi.nlm.nih.gov/Blast.cgi?CMD=Web&PAGE_TYPE=BlastDocs&DOC_TYPE=Download](http://blast.ncbi.nlm.nih.gov/Blast.cgi?CMD=Web&PAGE_TYPE=BlastDocs&DOC_TYPE=Download)

也可以问映泰： http: [//www.biostars.org/show/questions/](http://www.biostars.org/show/questions/)

# php - 将值直接传递给准备好的语句方法 PHP

> ID：10517424
> 
> 赞同：1
> 
> 时间：2012-05-09T13:46:27.657
> 
> 标签：php, mysql

我有以下代码：

```
$stmt = $mysqli->prepare("INSERT INTO account 
                            SET accFirstName=?, accLastName=?, accTelephone=?, 
                                accAltTelephone=?, accAddress=?, accCountry=?, 
                                accCity=?, accRegion=?, accPostalCode=?, 
                                accEmail=?, accEmailConfirmed=?, accPassword=?, 
                                accType=?, accStatus='A', accDate=NOW(), 
                                accOrder=".$acctID); 
```

我可以直接将值传递给`prepare()`它而不绑定它，例如：`accStatus='A', accDate=NOW(), accOrder=$acctID`？

这些值不是来自用户输入，这里不需要谈论安全性。

这是一个 php/mysql 正确的语法吗？

在这之间，我运行查询并将数据正确保存在数据库中。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:50:10.417

如果同一个查询在其中包含其他数据多次执行，则准备好的语句与存储过程相结合具有更好的性能。如果该查询在每个脚本中只运行一次，您可以按照描述进行操作，但请记住安全性的损失。

示例可以在这里找到：

[http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

没有准备好的语句绑定的查询的语法/字符串看起来很好。

# iphone - 如何在 UISearchBar 中创建两个输入文本字段

> ID：10517430
> 
> 赞同：2
> 
> 时间：2012-05-09T13:46:42.163
> 
> 标签：iphone, objective-c, ios

我想创建带有两个输入字段的 UISearchbar，一个用于关键字，另一个用于位置，如 Yelp 应用程序，我该如何做这样的事情，请指教 ![这是我的要求的快照  ](../Images/edcb04a7c58dd627a1b256ed4953af77.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:00:07.707

我不认为你可以在同一个 UISearchbar 中有两个搜索参数。您必须为此创建搜索组件，可能是一个带有两个 UItextField 和一个搜索按钮的视图，并且您可以使用 UITextFieldDelegates 来执行各种搜索操作。

请参阅Apple 的[自定义 UISearchBar 的外观](https://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UISearchBar_Class/Reference.html)。

# forms - Zend Framework 提交 2 个表单，其中 1 个提交

> ID：10517436
> 
> 赞同：-1
> 
> 时间：2012-05-09T13:47:02.803
> 
> 标签：forms, zend-framework

好的，这听起来很简单，但有一个问题。我会试着解释一下情况。

我有一个页面，它是用布局构建的，在中心有一个带有 2 个按钮和一个普通表单的视图。2 个按钮用于在两种输入形式之间切换。当提交被按下时，两个表单都被提交。第一种形式用于一般信息，第二种形式用于根据需要上传图像和信息。

现在为了避免这个问题*，为什么不使用一种形式？*要求以这种方式将两者分开。

因此，我正在考虑使用 2 个视图，其中前 2 个按钮的作用类似于提交，使用表单数据创建 POST 请求，但实际上并未将其提交到数据库。然后重定向到您可以上传图像的第二个视图。

然后当按下实际提交按钮时，我希望将收集的所有数据写入数据库。

基本上它就像一个带有 2 个选项卡的页面，每个选项卡都有一个表单，并且只有 1 个提交按钮来提交两个选项卡上的表单。

我只是不知道如何创建这两个按钮来存储帖子数据，然后让“最终”提交按钮使用以前的帖子数据，然后使用其他表单数据来创建一个新的组合帖子数据以存储在数据库。

任何人都知道如何做到这一点？我是正确地接近这个还是有一个更简单或更清洁的方法来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:05:04.947

这里有许多选项，一个选项是创建一个表单并将两个单独的部分添加为子表单，即 Zend_Form_SubForm 的实例。然后，您可以单独设置表单样式，对它们进行标记，但为两者保留一个提交按钮。此外，当您提交时，表单数据将被分成每个子表单的数组元素。

你可以在这里看到更多关于这个的信息：

[http://framework.zend.com/manual/en/zend.form.advanced.html#zend.form.advanced.multiPage](http://framework.zend.com/manual/en/zend.form.advanced.html#zend.form.advanced.multiPage)

我喜欢的另一个解决方案是使用动作助手将添加表单的过程拆分为两个页面，类似于上面的 url，但将表单信息存储在会话对象中，直到两者都得到验证，然后同时处理两个表单。

[http://framework.zend.com/wiki/display/ZFPROP/Zend_Controller_Action_Helper_Multiform+Proposal+-+Simon+Mundy](http://framework.zend.com/wiki/display/ZFPROP/Zend_Controller_Action_Helper_Multiform+Proposal+-+Simon+Mundy)

[http://framework.zend.com/wiki/pages/viewpage.action?pageId=42130](http://framework.zend.com/wiki/pages/viewpage.action?pageId=42130)

希望这可以帮助。

# sql-server - 用于嵌套 XML 标记的带有 CharIndex 的 SQL Server 子字符串

> ID：10517438
> 
> 赞同：1
> 
> 时间：2012-05-09T13:47:07.610
> 
> 标签：sql-server, xml, stored-procedures, substring

这是我用来从 xml 中获取 5 位数字的存储过程：

```
 CREATE PROCEDURE [dbo].[SP_KINGPRICE_InsertJournalFromPost]
    (
        @ResponseID bigint,
        @TransactionDetailID bigint
    )
    AS
    BEGIN
    DECLARE @info as varchar(max) = '', @Reference as varchar(max) = ''
    SET @info = (SELECT SUBSTRING(Response, CHARINDEX('<GlJournal>',Response) + 11,5) 
                 FROM SysproIntegration..ifmTransactionDetailResponse 
                 WHERE TransactionDetailResponseID = @ResponseID)
    SET @Reference = (SELECT DISTINCT Reference 
                      FROM GenJournalDetail 
                      WHERE Journal = CAST(@info as DECIMAL(5,0)))
    INSERT INTO ZJournalRecords
    (JournalNumber,Reference)

    VALUES (@info,@Reference)
    END 
```

XML 有一个这样的标签：

```
 <GLJournal>12345</GLJournal> 
```

如果 XML 文档只有这些标签之一，我不用担心。SP 工作正常。当有两个嵌套`<GLJournal>`标签时，问题就出现了。xml 然后看起来像：

```
 <GLJournal>
        <SomeTag/>
        <SomeTag2/>
        <GLJournal>12345</GLJournal>
    </GLJournal> 
```

如何获取嵌套标签的 5 位值？（它总是 5 位数）我曾想过使用 try catch，但这似乎不是一个优雅的解决方案。

编辑：
另外，部分问题是，我不知道什么时候会有一个`GlJournal`或两个标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:47:15.413

我决定计算标签的出现次数，并在此基础上对某个位置进行子串化。

```
DECLARE @info as varchar(max) = '', @Reference as varchar(max) = '', @inputString as varchar(max), @searchString as varchar(max), @numberOfTags as int

SET @searchString = '<GlJournal>'
SET @inputString = (SELECT Response FROM SysproIntegration..ifmTransactionDetailResponse WHERE TransactionDetailResponseID = @ResponseID)
SET @numberOfTags = (LEN(@inputString) - 
                 LEN(REPLACE(@inputString, @searchString, ''))) /
                 LEN(@searchString)

IF @numberOfTags = 1 
BEGIN
SET @info = (SELECT SUBSTRING(Response, CHARINDEX('<GlJournal>',Response) + 11,5) FROM SysproIntegration..ifmTransactionDetailResponse WHERE TransactionDetailResponseID = @ResponseID)
SET @Reference = (SELECT DISTINCT Reference FROM GenJournalDetail WHERE Journal = CAST(@info as DECIMAL(5,0)))
END
ELSE
BEGIN
SET @info = (SELECT SUBSTRING(Response, CHARINDEX('<GlJournal>',Response) + 69,5) FROM SysproIntegration..ifmTransactionDetailResponse WHERE TransactionDetailResponseID = @ResponseID)
SET @Reference = (SELECT DISTINCT Reference FROM GenJournalDetail WHERE Journal = CAST(@info as DECIMAL(5,0)))
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:12:47.680

这是您可能会适应的 int 测试：

```
 declare @xml xml, @tags smallint

SET @tags = 1

-- Load @xml...
--SELECT @xml = Response 
--FROM SysproIntegration..ifmTransactionDetailResponse 
--WHERE TransactionDetailResponseID = @ResponseID

-- ... or for test...
IF @tags = 1 BEGIN
    -- Test 1 GLJournal tag
    SET @xml = '12346'
END ELSE IF @tags = 2 BEGIN
    -- Test 2 GLJournal tags
    SET @xml = '

        12345
    '
END ELSE BEGIN
    -- Test no GLJournal tags 
    SET @xml = ''
END    

DECLARE @i int; SET @i = -1

-- Try one tag    
SELECT @i = ParamValues.ID.query('GLJournal').value('.','int')
FROM @xml.nodes('/') as ParamValues(ID)

IF @i = 0   
    -- Try two tags 
    SELECT @i = ParamValues.ID.query('GLJournal').value('.','int')
    FROM @xml.nodes('/GLJournal') as ParamValues(ID)     

SELECT @i    

-- INSERT INTO ZJournalRecords... other stuff 
```

# c# - “异步”关键字附近显示错误，但构建成功

> ID：10517440
> 
> 赞同：3
> 
> 时间：2012-05-09T13:47:14.130
> 
> 标签：c#, .net, visual-studio, asynchronous, async-ctp

当我在没有打开任何文件的情况下编译我的项目时，构建按预期成功。现在，当我打开一个包含任何带有**async**关键字的方法的文件时，在我的错误窗口中会出现如下消息：

```
Error   6   ; expected  
Error   10  ; expected  
Error   16  A namespace cannot directly contain members such as fields or methods   
Error   2   Identifier expected 
```

当我构建解决方案时，它仍然成功。

我安装了 AsyncCTPv3 和 ReSharper。我目前禁用了 ReSharper，但仍然显示这些错误。任何人的线索？

**编辑：在await**关键字附近似乎发生了同样的错误。我的意思是 await 和 async 齐头并进，但这些错误只发生在**non-.NET-4.0-elements**旁边，这很奇怪。编译器甚至都不在乎。我认为只有 Visual Studio 才能解释这些关键字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:51:00.797

首先。非常感谢提供此[链接的](http://blogs.msdn.com/b/lucian/archive/2011/11/01/async-ctp-v3-installation.aspx)[Joshua Drake](https://stackoverflow.com/users/19308/joshua-drake)。首先，我认识到我的文件版本与应该存在的文件版本不匹配。我重新安装没有任何成功。后来我注意到这个网站上的以下段落：

> 在安装 Async CTP v3 之前运行 Windows 更新，并获取 2011 年 10 月之前的所有更新（包括可选更新）
> 
> 但之后没有。特别是**KB2635973**和**KB2615527**以及**KB2645410 三个**已知与 Async CTP v3**不兼容。**
> 
> 安装 Async CTP v3 后，您可以获得后续更新。

这就是线索。卸载上述三个更新后，我再次重新安装了 Async CTP 并且它工作正常。非常感谢！

# ios - 无法从锁定屏幕中删除本地通知

> ID：10517445
> 
> 赞同：3
> 
> 时间：2012-05-09T13:47:23.180
> 
> 标签：ios, notifications, uilocalnotification, nsnotificationcenter, lockscreen

在我的应用程序中，有时我需要向用户显示一些通知，以防用户没有回复他们，我需要删除该通知。现在，如果我调用 cancelAllLocalNotifications 函数，它会从通知中心删除通知（当设备解锁时也会从主屏幕删除警报）。

但是当设备被锁定并且通知显示在锁定屏幕上时。一段时间后，我的应用调用了**cancelAllLocalNotifications**函数。现在，这**不会从 Lock-screen 删除通知**，但是通知中心没有项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:11:45.527

使用`cancelAllLocalNotifications`不会删除已经显示的。它取消所有计划的通知。我认为没有办法从锁定屏幕清除通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-19T08:38:19.970

我不知道那个时候是不是不可能，但现在你可以从锁屏取消通知。如果现在有人需要这个。

如果您发送通知，则必须将其存储在某个地方，以便在应该取消通知时能够识别它。

你所要做的就是

```
UIApplication.sharedApplication().cancelLocalNotification(notification) 
```

要确定应该取消的通知，您可以在 userinfo 属性中设置信息

```
notification.userInfo = ["title": item.title, "UUID": item.UUID] 
```

# .net - 使用第 7 层或第 4 层进行负载平衡

> ID：10517447
> 
> 赞同：2
> 
> 时间：2012-05-09T13:47:24.710
> 
> 标签：.net, iis-7, iis-7.5, load-balancing

我想念第 7 层或第 4 层应用负载平衡的区别。其中之一更好吗？我如何决定哪个更适用于我的系统？

提前致谢 ...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T14:08:53.327

我想这可能是一个非常激烈的讨论，无论如何它与编程无关，但是......

它们之间的区别在于您在哪里（哪个[OSI](http://en.wikipedia.org/wiki/OSI_model)层）进行平衡。在我看来，你**永远**不应该只在第 7 层上进行平衡（那么你应该总是使用第 4 层）。

为什么？第 7 层负载平衡很好，因为您不需要任何特殊的硬件，它是在应用程序级别完成的，但是您为此付出了许多其他缺点：

*   性能不太好：负载均衡器必须跟踪 cookie 和会话（在需要时），为此您需要更强大的硬件。正确的方法应该是让应用程序来妥善管理它。要覆盖这一点，您需要更强大的硬件。
*   负载分布在服务器之间，但要实现*真正*的负载**平衡**并不容易。很多时候，它只是注入到 DNS 服务器中的东西，然后它不知道服务器有多忙（假设您有一个密集型操作和两个轻量级操作要分派到两台服务器，循环法可能会分配一个密集型和一个轻量级到同一台服务器时，最好*可以*将两个轻量级分配给同一台服务器）。
*   它们根本不可扩展（它们必须管理您的应用程序应该管理的内容）并且会浪费大量资源。

为什么他们是好的？它们可能是修补不可扩展应用程序的快速、简单、肮脏的解决方案（对于第 4 层平衡，您的 ASP.NET 应用程序本身应该是可扩展的）。它们可能是临时问题的临时解决方案，而不是解决方案。在现实世界中，第 4 层负载平衡是首选（有时与第 7 层平衡混合，例如 Google 使用第一级循环 dns 负载平衡）。

阅读这篇关于负载平衡的非常好的文章：http: [//1wt.eu/articles/2006_lb/index.html](http://1wt.eu/articles/2006_lb/index.html)

我发现一些有趣的东西，[在这里](http://blog.inetu.net/2012/05/advantages-of-layer-7-load-balancing/)（关于第 7 层负载平衡的优点）他们说：

> 虽然用例仍然相当有限，但第 7 层负载平衡的这一功能确实为未来的使用开辟了许多可能性。随着这项技术的发展，我们将获得更智能地平衡其他类型流量的能力。

如果用例（这些优势）“*仍然相当有限*”并且我们必须等待“*随着这项技术的发展”，那么我认为***现在**没有任何理由将任何负载平衡解决方案仅基于第 7 层（而且它真的很容易将来随时添加）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-12T11:33:45.353

**第 4 层**负载平衡器对网络和传输层协议（IP、TCP、FTP、UDP）中的数据进行操作。

**第 7 层**负载平衡器根据 HTTP 等应用层协议中的数据分发请求。它还可以根据特定数据（如 HTTP 标头、cookie 或 http 的特定参数内的数据）分发请求。

> 所以第 4 层负载均衡器是 tcp 负载均衡器，而第 7 层负载均衡器是 http 负载均衡器。

# javascript - IE 9 在子元素上具有不透明度，我无法使用 captify 阻止它

> ID：10517448
> 
> 赞同：3
> 
> 时间：2012-05-09T13:47:28.977
> 
> 标签：javascript, jquery, html, css

好的，我正在使用一段名为 Captify 的 javascript。它为您添加了一个带有文本的小弹出图像。在所有接受 IE9 的浏览器中效果很好。IE9 会淡化弹出 div 中的所有内容。我已经阅读了它的子元素问题，但我无法修复它。由于无法再在任何地方在线找到 captify，我将包含所有代码以及下面的 css，然后是我页面上的代码。如果有人能帮助我阻止褪色，我将非常感激，因为它给我带来了重大问题。

爪哇

```
jQuery.fn.extend({
captify: function(o){
    var o = $.extend({
        speedOver: 'fast',      // speed of the mouseover effect
        speedOut: 'normal',     // speed of the mouseout effect
        hideDelay: 500,         // how long to delay the hiding of the caption after mouseout (ms)
        animation: 'fade',      // 'fade' or 'slide'
        prefix: '',             // text/html to be placed at the beginning of every caption
        className: 'caption'    // the name of the CSS class to apply to the caption box
    }, o);
    $(this).each(function(){
        var img = this;
        $(this).load(function(){
            $this = img;
            if (this.hasInit){
                return false;
            }
            this.hasInit = true;
            var over_caption = false;
            var over_img     = false;
            //pull the label from another element if there if there is a 
            //valid element id inside the rel="..." attribute, otherwise,
            //just use the text in the title="..." attribute.
            var captionLabelSrc = $('#' + $(this).attr('rel'));
            var captionLabelTitle = !captionLabelSrc.length ? $(this).attr('title') : captionLabelSrc.html();
            var captionLabelHTML = !captionLabelTitle.length ? $(this).attr('alt') : captionLabelTitle;
            captionLabelSrc.remove();
            var toWrap = this.parent && this.parent.tagName == 'a' ? this.parent : $(this);
            var wrapper = toWrap.wrap('<div></div>').parent();
            wrapper.css({
                overflow: 'hidden',
                padding: 0,
                fontSize: 0.1
            })
            wrapper.addClass('caption-wrapper');
            wrapper.width($(this).width());
            wrapper.height($(this).height());
            //transfer the border properties from the image to the wrapper
            $.map(['top','right','bottom','left'], function(i){
                $.map(['style','width','color'], function(j){
                    var key = 'border-'+i+'-'+j;
                    wrapper.css(key, $(img).css(key));
                });
            });
            $(img).css({border: '0 none'});
            //transfer the margin properties
            $.map(['top','right','bottom','left'], function(t){
                var key = 'margin-'+t;
                wrapper.css(key, $(img).css(key));
            });

            //create two consecutive divs, one for the semi-transparent background,
            //and other other for the fully-opaque label
            var caption         = $('div:last', wrapper.append('<div></div>')).addClass(o.className);
            var captionContent  = $('div:last', wrapper.append('<div></div>')).addClass(o.className).append(o.prefix).append(captionLabelHTML);

            //override hiding from CSS, and reset all margins (which could have been inherited)
            $('*',wrapper).css({margin: 0}).show();
            //ensure the background is on bottom
            var captionPositioning = jQuery.browser.msie ? 'static' : 'relative';
            caption.css({
                zIndex: 1,
                position: captionPositioning
            });

            //clear the backgrounds/borders from the label, and make it fully-opaque
            captionContent.css({
                position: captionPositioning,
                zIndex: 2,
                background: 'none',
                border: '0 none',
                opacity: 1.0
            });
            caption.width(captionContent.outerWidth());
            caption.height(captionContent.outerHeight());

            //pull the label up on top of the background
            captionContent.css({ 'marginTop': -caption.outerHeight() });
            //function to push the caption out of view
            var cHide = function(){
                if (!over_caption && !over_img)
                    caption.animate({ marginTop: 0 }, o.speedOut); 
            };
            //when the mouse is over the image
            $(this).hover(
                function(){ 
                    over_img = true;
                    if (!over_caption) {
                        caption.animate({
                            marginTop: -caption.height()
                        }, o.speedOver);
                    }
                }, 
                function(){ 
                    over_img = false;
                    window.setTimeout(cHide, o.hideDelay);
                }
            );

            //when the mouse is over the caption on top of the image (the caption is a sibling of the image)
            $('div', wrapper).hover(
                function(){ over_caption = true; },
                function(){ over_caption = false; window.setTimeout(cHide, o.hideDelay); }
            );
        });
        //if the image has already loaded (due to being cached), force the load function to be called
        if (this.complete || this.naturalWidth > 0){
            $(img).trigger('load');
        }
    });
}
}); 
```

现在用于 captify 的 CSS

```
/* caption styling */

.caption {
color: #ffffff;
padding: 0.6em;
font-size: 10px;
display: none;
cursor: default;
/* remove these 4 lines below if you want 
the caption to span the whole width of the 
image
width: 82%;
/*border-top: 1px solid #303030;
border-right: 1px solid #303030;*/

/* background / transparency */
background: #000000;
opacity: 0.7;
filter: alpha(opacity=70);
-moz-opacity: 0.7;
-khtml-opacity: 0.7;
margin-bottom: 5px;
}

.caption a {
border: 0 none;
text-decoration: none;
background: #000000;
padding: 0.3em;
color:#FFFF00;
}

.caption a:hover {

text-decoration:underline;
}

.caption-wrapper {
float: left;
}

br.c { clear: both; } 
```

现在我的页面

```
<link href="/js/captify/sample.css" rel="stylesheet" type="text/css" /><script     type="text/javascript" src="/js/captify/captify.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$('img.captify').captify({
    // all of these options are... optional
    // ---
    // speed of the mouseover effect
    speedOver: 150,
    // speed of the mouseout effect
    speedOut: 200,
    // how long to delay the hiding of the caption after mouseout (ms)
    hideDelay: 100,
    // 'fade' or 'slide'
    animation: 'fade',      
    // text/html to be placed at the beginning of every caption
    prefix: '', 
    // the name of the CSS class to apply to the caption box
    className: 'caption'
});
});
</script>

  <div id="services">

  <ul >

  <li >

      <img src="/images/sports.png" width="169" height="121" class="captify" rel="caption1" />
                <div id="caption1"><h4>Watersports</h4>
<p>View all the sports we offer on the lakeside.</p></div>   

  </li></ul></div> 
```

以及我使用的额外 CSS

```
#services {
width: 570px;
margin-top: 370px;
height: 130px;
}
#services ul li {
float: left;
height: 128px;
width: 184px;
margin-right: 5px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:33:19.660

由于 IE 不透明度处理很糟糕，我建议你一起放弃。对于背景，您可以使用透明的 png（1x1 重复）来获得相同的效果。或者，如果您使用的是仅 IE 的 css，您可以定义背景以仅使用 IE 的 png。我认为这将为您节省大量时间来解决这个问题

编辑：当然不要忘记在 IE css 中将不透明度设置为 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T03:28:07.590

@马克金，

谢谢它对我有用

但我将绝对改为相对。

```
.caption-text{
    display:block;
    position:relative;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T22:14:15.227

我知道这个问题很老，但有人可能会觉得这很有用：

我在我的页面上做了这个；

```
$('img.captify').captify({
    animation: 'always-on',     
    opacity: '0.7'
});
$('div.caption-bottom').wrapInner('<span class="caption-text"></span>'); 
```

在样式表中我放了这个；

```
.caption-text{position:absolute;} 
```

# php - 如何将完整的安全角色列表/层次结构传递给 Symfony2 中的 FormType 类？

> ID：10517452
> 
> 赞同：3
> 
> 时间：2012-05-09T13:47:45.583
> 
> 标签：php, symfony

我有一个用户编辑表单，我想在其中管理分配给用户的角色。

目前我有一个多选列表，但我无法使用 security.yml 中定义的角色层次结构填充它。

有什么方法可以将这些信息传递给 FormType 类中的表单构建器？

```
$builder->add('roles', 'choice', array(
                'required' => true,
                'multiple' => true,
                'choices' => array(),
            )); 
```

环顾四周，[我发现](https://stackoverflow.com/a/8931181/461813)我可以从控制器中的容器中获取角色：

```
$roles = $this->container->getParameter('security.role_hierarchy.roles'); 
```

我还发现我可能会将其设置为要在 services.xml 中的 FormType 类上注入的依赖项：

```
<parameters>
    <parameter key="security.role_heirarchy.roles">ROLE_GUEST</parameter>
</parameters>
<services>
    <service id="base.user.form.type.user_form" class="Base\UserBundle\Form\UserType" public="false">
        <tag name="form.type" />
        <call method="setRoles">
            <argument>%security.role_heirarchy.roles%</argument>
        </call>
    </service>
</services> 
```

但是，这不起作用，并且似乎从未调用过该`setRoles`方法。

那么我怎样才能让它工作呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T16:12:48.320

在您的控制器中

```
$editForm = $this->createForm(new UserType(), $entity, array('roles' => $this->container->getParameter('security.role_hierarchy.roles'))); 
```

在用户类型中：

```
$builder->add('roles', 'choice', array(
    'required' => true,
    'multiple' => true,
    'choices' => $this->refactorRoles($options['roles'])
))

[...]

public function getDefaultOptions()
{
    return array(
        'roles' => null
    );
}

private function refactorRoles($originRoles)
{
    $roles = array();
    $rolesAdded = array();

    // Add herited roles
    foreach ($originRoles as $roleParent => $rolesHerit) {
        $tmpRoles = array_values($rolesHerit);
        $rolesAdded = array_merge($rolesAdded, $tmpRoles);
        $roles[$roleParent] = array_combine($tmpRoles, $tmpRoles);
    }
    // Add missing superparent roles
    $rolesParent = array_keys($originRoles);
    foreach ($rolesParent as $roleParent) {
        if (!in_array($roleParent, $rolesAdded)) {
            $roles['-----'][$roleParent] = $roleParent;
        }
    }

    return $roles;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T15:07:09.293

您可以创建自己的类型，然后传递服务容器，然后您可以从中检索角色层次结构。

首先，创建自己的类型：

```
class PermissionType extends AbstractType 
{
    private $roles;

    public function __construct(ContainerInterface $container)
    {
        $this->roles = $container->getParameter('security.role_hierarchy.roles');
    }
    public function getDefaultOptions(array $options)
    {
        return array(
              'choices' => $this->roles,
        );
    );

    public function getParent(array $options)
    {
        return 'choice';
    }

    public function getName()
    {
        return 'permission_choice';
    }
} 
```

然后您需要将您的类型注册为服务并设置参数：

```
services:
      form.type.permission:
          class: MyNamespace\MyBundle\Form\Type\PermissionType
          arguments:
            - "@service_container"
          tags:
            - { name: form.type, alias: permission_choice } 
```

然后在创建表单时，只需添加 *permission_choice* 字段：

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('roles', 'permission_choice');
} 
```

如果您只想获得没有层次结构的单个角色列表，那么您需要以某种方式*扁平化层次结构。*一种可能的解决方案是：

```
class PermissionType extends AbstractType 
{
    private $roles;

    public function __construct(ContainerInterface $container)
    {
        $roles = $container->getParameter('security.role_hierarchy.roles');
        $this->roles = $this->flatArray($roles);
    }

    private function flatArray(array $data)
    {
        $result = array();
        foreach ($data as $key => $value) {
            if (substr($key, 0, 4) === 'ROLE') {
                $result[$key] = $key;
            }
            if (is_array($value)) {
                $tmpresult = $this->flatArray($value);
                if (count($tmpresult) > 0) {
                    $result = array_merge($result, $tmpresult);
                }
            } else {
                $result[$value] = $value;
            }
        }
        return array_unique($result);
    }
    ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-25T12:36:48.437

webda2l 提供的带有 $options 数组的解决方案不适用于 Symfony 2.3。它给了我一个错误：

> 选项“角色”不存在。

我发现我们可以将参数传递给表单类型构造函数。

在您的控制器中：

```
$roles_choices = array();

$roles = $this->container->getParameter('security.role_hierarchy.roles');

# set roles array, displaying inherited roles between parentheses
foreach ($roles as $role => $inherited_roles)
{
    foreach ($inherited_roles as $id => $inherited_role)
    {
        if (! array_key_exists($inherited_role, $roles_choices))
        {
            $roles_choices[$inherited_role] = $inherited_role;
        }
    }

    if (! array_key_exists($role, $roles_choices))
    {
        $roles_choices[$role] = $role.' ('.
            implode(', ', $inherited_roles).')';
    }
}

# todo: set $role as the current role of the user

$form = $this->createForm(
    new UserType(array(
        # pass $roles to the constructor
        'roles' => $roles_choices,
        'role' => $role
    )), $user); 
```

在 UserType.php 中：

```
class UserType extends AbstractType
{
    private $roles;
    private $role;

    public function __construct($options = array())
    {
        # store roles
        $this->roles = $options['roles'];
        $this->role = $options['role'];
    }
    public function buildForm(FormBuilderInterface $builder,
        array $options)
    {
        // ...
        # use roles
        $builder->add('roles', 'choice', array(
            'choices' => $this->roles,
            'data' => $this->role,
        ));
        // ...
    }
} 
```

我从[Marcello Voc](https://groups.google.com/d/msg/symfony2/z4RvxhuktyE/fNi4yQZHUrUJ)那里得到了这个想法，感谢他！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-27T14:14:48.207

对于 symfony 2.3：

```
<?php

namespace Labone\Bundle\UserBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Symfony\Component\DependencyInjection\ContainerInterface as Container;

class PermissionType extends AbstractType 
{
    private $roles;

    public function __construct(Container $container)
    {
        $roles = $container->getParameter('security.role_hierarchy.roles');
        $this->roles = $this->flatArray($roles);
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'choices' => $this->roles
        ));
    }

    public function getParent()
    {
        return 'choice';
    }

    public function getName()
    {
        return 'permission_choice';
    }

    private function flatArray(array $data)
    {
        $result = array();
        foreach ($data as $key => $value) {
            if (substr($key, 0, 4) === 'ROLE') {
                $result[$key] = $key;
            }
            if (is_array($value)) {
                $tmpresult = $this->flatArray($value);
                if (count($tmpresult) > 0) {
                    $result = array_merge($result, $tmpresult);
                }
            } else {
                $result[$value] = $value;
            }
        }
        return array_unique($result);
    }
} 
```

# java - 在mongodb中查询sql“like”的语法-我正在使用java

> ID：10517455
> 
> 赞同：11
> 
> 时间：2012-05-09T13:47:53.803
> 
> 标签：java, mongodb

基本上这是我的问题： [如何用“like”查询 MongoDB？](https://stackoverflow.com/questions/3305561/how-to-query-mongodb-with-like)

但我想这里的所有答案都适用于您使用 mongodb shell 命令行，那么`db.users.find({"name": /.*m.*/})`当我们使用 java 时，什么是等效的。

这就是我想要做的事情

> ```
>  DBCollection coll = MongoDBUtil.getDB().getCollection("post_details");      
>     BasicDBObject query = new BasicDBObject();      
>     query.put("price", new BasicDBObject("$gt", 5).append("$lt", 8)); 
> ```

```
 /*what should i write instead of this line*/ 
            query.put("title", "/.*m.*/");

    DBCursor cur = coll.find(query); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T13:52:37.507

对于这个问题，您应该使用正则表达式，如本例所示：

```
BasicDBObject query = new BasicDBObject();
Pattern regex = Pattern.compile("the title you are looking for"); // should be m in your case
query.put("title", regex); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-23T21:12:04.630

以上面的例子作为参考，但是使用了 Filters 类：

```
Pattern regex = Pattern.compile("title you look for");
Bson filter = Filters.eq("nombre", regex)); 
```

# magento - 如何仅在类别和产品页面中显示比较产品，最近查看/比较的产品？

> ID：10517456
> 
> 赞同：0
> 
> 时间：2012-05-09T13:47:54.407
> 
> 标签：magento

我只想在类别和产品页面中显示“比较产品，最近查看/比较的产品块”。并隐藏在现代主题的所有其他地方。我怎样才能做到这一点？请建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:24:02.163

> 免责声明：这不是关于布局的课程，请参阅教程 - 这里有很多问题，还有很多问题。Magento 网站上的一个位于[http://www.magentocommerce.com/design_guide/articles/intro-to-layouts](http://www.magentocommerce.com/design_guide/articles/intro-to-layouts)

您需要在此处编辑布局文件。让我们以您的一个请求为例；比较产品：

在`catalog.xml`文件中，您可以在顶部看到类似这样的内容：

```
<default>
...
    <reference name="right">
        <block type="catalog/product_compare_sidebar" before="cart_sidebar" name="catalog.compare.sidebar" template="catalog/product/compare/sidebar.phtml"/>
... 
```

`right`现在这是告诉它在右栏中的所有页面中显示（假设它们有一个块，没有明确删除它）。

听起来您希望它在这些页面上，而不是在其他页面上，所以让我们将其从这里移到类别页面和产品页面中。

在本文档中，您还将看到以下标签：

```
<catalog_category_default translate="label"> 
```

如果我们在其中添加上面的内容，将以下内容放入`<reference name="right">`标签中，或者如果您愿意，可以留下，如果它不存在则创建它：

```
<block type="catalog/product_compare_sidebar" before="cart_sidebar" name="catalog.compare.sidebar" template="catalog/product/compare/sidebar.phtml"/> 
```

同样对于产品视图

```
 <catalog_product_view translate="label"> 
```

现在，您可能会发现它仍然出现在其他页面中，例如该`My Account`页面。可以在其中找到以下布局`customer.xml`：

```
<customer_account translate="label">
...
    <reference name="left">
    ...
        <block type="catalog/product_compare_sidebar" name="catalog.compare.sidebar" template="catalog/product/compare/sidebar.phtml"/>
... 
```

上面提到的`<block type...`标签应该从这里删除。

这有希望让您了解如何实现您想要做的事情。

# android - Android InApp Billing - 什么是真正的随机数？

> ID：10517459
> 
> 赞同：5
> 
> 时间：2012-05-09T13:48:04.723
> 
> 标签：android, in-app-purchase, in-app-billing, nonce

是的，我已经阅读了@developer.android.com 的所有文档，并且我确实理解了这一切，但有一个基本例外——它是为了什么而引入的。

由于来自 Google Play 的所有订单响应都由任何人都无法访问的私钥签名，并且正在通过配对的公钥进行验证（在我的情况下是在外部服务器上，因此第三人也无法访问）所以根本（几乎）没有办法欺骗。

所有这些随机数只是确保购买的多余方式。更重要的是，文档对这种情况只字未提，当：

1.  我购买了一件物品；
2.  生成随机数并将其发送到 Google Play；
3.  发生崩溃，所以我所有*已知的随机数*都丢失了；
4.  让我的应用重新启动并从 Google Play 获得回调；
5.  ...并因未识别 nonce 而拒绝此呼叫！

在上述情况下，用户支付了一个项目并且从未得到它，这是可耻的。当然，我可以将 nonce 存储在某个文件中，并在我的应用程序返回时重新读取它，但这违反了 nonce 的所有原则。

恕我直言，有人刚刚说“嘿，验证过程太简单了，让我们随机添加一些东西，它会更酷！”。所以有人做到了。

或者，你会敞开心扉接受我错过的其他用例吗？否则，我将从我的代码中删除整个随机数部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:56:29.890

您不需要将随机数“存储到磁盘”来解决应用程序崩溃问题。

当您的应用程序崩溃时，您将丢失已知随机数列表。但是，当您的应用重新启动并且您收到一个时，您必须在执行此操作时`IN_APP_NOTIFY`执行另一个操作，您将生成一个新的随机数并将其添加到已知随机数列表中。`GET_PURCHASE_INFORMATION``GET_PURCHASE_INFORMATION`

您必须记住的是，随机数是每个`GET_PURCHASE_INFORMATION`（返回您购买的多件商品）而不是每个购买的商品一个随机数。

正如您所说，您已经实现了自己的方法来避免重放攻击，但是使用随机数曾经是一种*安全*的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T10:12:04.223

“nonce 就像交易中的盐一样，类似于 *nix 系统存储密码的方式。nonce 用于为使用您的密钥加密的值添加熵，从而在很大程度上消除了两个交易被加密并导致相同的签名，以及其他类似的加密攻击。”

查看[queso 的答案](https://security.stackexchange.com/questions/4067/how-should-i-protect-in-app-android-payments-when-using-a-separate-server)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T13:59:54.340

想象一下，您的用户以 100 美元的价格购买了一件商品。通知您的应用程序有可用的付款数据，应用程序请求数据并且 AppStore 以 PURCHASE_STATE_CHANGED 响应。用户从 AppStore 记录消息 (!) 并保存。

之后，用户伪造了一个通知给你的应用，告诉它支付数据可用（任何人都可以伪造，因为这个通知没有签名）。该应用程序认为“哦，嘿，也许我刚刚崩溃并丢失了有关我的用户刚刚购买的所有信息！？让我们看看 AppStore 有什么要说的”。所以它从应用商店请求数据。用户中断该请求并将先前记录的消息发送到您的应用程序。该应用程序看到该消息，对其进行验证并发现它是有效的（因为它已签名并且全部）。因此，该应用程序将为您提供另一件价值 100 美元的物品。还有一个。就像用户重播录制的消息一样频繁。因此称为：重放攻击。

然而，有一件事可以防止这种攻击：nonce。如果您的应用在其支付数据请求中发送了一个随机数，它希望在 PURCHASE_STATE_CHANGED 回复中收到相同的随机数。由于 nonce 仅使用一次，因此您无法重播以前记录的消息，因为它们与请求中使用的 nonce 不匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T14:06:30.470

您应该在发送它们之前**保存生成的随机数。**Android 应用程序可能随时崩溃或关闭，因此通常应保存所有内容。

使用 nonce 的原因是为了[防止重放攻击](http://en.wikipedia.org/wiki/Cryptographic_nonce)。我远没有资格回答是否需要使用 nonce，但我认为它的存在是有原因的。

# javascript - 使用鼠标滚轮和滚动条平滑垂直页面滚动

> ID：10517460
> 
> 赞同：6
> 
> 时间：2012-05-09T13:48:04.840
> 
> 标签：javascript, jquery, scrollbar, mousewheel, parallax

我正在玩并尝试建立一个视差网站 - 是的，我知道它们是一种令人讨厌的时尚，但我仍然想尝试一下。因此，为了获得灵感，我一直在查看各种优秀视差网站的示例，并遇到了这个：[https](https://victoriabeckham.landrover.com/INT) ://victoriabeckham.landrover.com/INT 。

它使用鼠标滚轮、滚动条和锚链接进行平滑滚动。我一直在寻找可以实现这种效果的 jQuery 插件，但似乎只能找到使用内部页面链接的插件——锚点或 ID（详见下文）——而不是鼠标滚轮和滚动条。我很有可能使用错误的关键字进行搜索。有谁知道找到这些插件的正确术语或知道任何可以实现这种效果的插件？

附带说明一下，我目前正在学习 jQuery 和 Javascript，但还处于早期阶段 - 仍在通过 codeacademy 拖网，还没有进入任何真实世界的代码。所以目前我正在使用插件作为一种学习方式，但希望在几个月内我可以构建自己的东西！

平滑滚动到锚标签或 ID：

*   [http://archive.plugins.jquery.com/project/ScrollTo](http://archive.plugins.jquery.com/project/ScrollTo)
*   [http://jsfiddle.net/9Amdx/7/](http://jsfiddle.net/9Amdx/7/)
*   [http://arthurclemens.github.com/jquery-page-scroll-plugin/](http://arthurclemens.github.com/jquery-page-scroll-plugin/)
*   [http://www.learningjquery.com/2007/09/animated-scrolling-with-jquery-12](http://www.learningjquery.com/2007/09/animated-scrolling-with-jquery-12)
*   [http://www.designova.net/scrollerbird/](http://www.designova.net/scrollerbird/)
*   [http://chris-spittles.co.uk/?p=462](http://chris-spittles.co.uk/?p=462)
*   [http://joelb.me/scrollpath/（*@DrunkRocketeer](http://joelb.me/scrollpath/)提供）

并且，另一个使用类似滚动技术的视差网站示例：

*   [http://www.ascensionlatorre.com](http://www.ascensionlatorre.com)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:44:05.853

试试这个。[https://nicescroll.areaaperta.com/](https://nicescroll.areaaperta.com/)

它有

```
$().scrollTop() 
```

jQuery 事件侦听器，因此您可以使用视差脚本配置滚动路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T14:03:23.790

我认为您必须将其中的几种效果结合起来才能制作出类似于 Landrover 网站的东西。平滑滚动脚本、滚动路径脚本和视差脚本。

这是该网站的路径元素的一个有趣的网站：http: [//joelb.me/scrollpath/](http://joelb.me/scrollpath/)

尽管了解这些站点如何工作的最佳方法是检查它们！一些使用视差的酷网站： [http ://www.awwwards.com/?s=parallax&post_type=all&search=Ok](http://www.awwwards.com/?s=parallax&post_type=all&search=Ok)

我希望这是一些帮助/启发！

# c# - 如何在多个线程中使用副本（或相同）对象

> ID：10517463
> 
> 赞同：0
> 
> 时间：2012-05-09T13:48:11.570
> 
> 标签：c#, wpf, canvas, copy, clone

我正在尝试在应用程序中创建一个警告窗口。该窗口需要在单独的线程上运行，并且除其他外还包含一个描绘失败对象的画布。Canvas 已经存在于主应用程序中，我需要的只是在警告窗口中显示相同的 Canvas。问题是我收到一个错误，说另一个线程拥有该对象。我尝试使用[这种](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlwriter.aspx)方法进行深层复制，但没有运气。有什么我错过的吗，或者真的没有简单的方法来复制画布或图像集合。或者，是否可以进行深层复制，然后更改复制对象的踏步亲和性？

我应该认为之前有人遇到过这个问题，但是我的搜索技能这次没有给我相关的结果。

提前致谢！-ruNury

编辑 1

```
 private Canvas cloneCanvas()
    {
        Canvas testcanv = new Canvas();

        Dispatcher.Invoke(new Action(delegate
        {
            var t = SomeViewModel.GetCanvasWithImages();
            testcanv = CopyCanvas(t);
        }));

        return testcanv;
    }

    public static UIElement DeepCopy(UIElement element)
    {
        if (element != null)
        {
            var xaml = XamlWriter.Save(element);

            var xamlString = new StringReader(xaml);

            var xmlTextReader = new XmlTextReader(xamlString);

            var deepCopyObject = (UIElement)XamlReader.Load(xmlTextReader);

            return deepCopyObject;
        }

        return null;

    }

    private Canvas CopyCanvas(Canvas inputCanvas)
    {

        if (inputCanvas != null)
        {
            var outputCanvas = new Canvas();

            foreach (UIElement child in inputCanvas.Children)
            {
                outputCanvas.Children.Add(DeepCopy(child));
            }

            return outputCanvas;
        }

        return null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:53:56.880

您可以单例模式来维护一个警告窗口对象。

当您想将画布放入警告窗口时，您必须使用[Dispatcher](http://www.switchonthecode.com/tutorials/working-with-the-wpf-dispatcher)。

Dispatcher 会将方法调用编组到 UI 线程。

就像是

```
 warningWindow.Dispatcher.Invoke(
      System.Windows.Threading.DispatcherPriority.Normal,
      new Action(
        delegate()
        {
          myCheckBox.IsChecked = true;
        }
    )); 
```

可以通过单例实例获得warningWindow

# android - 如何在 onRecive 函数中获取设备 ID

> ID：10517465
> 
> 赞同：0
> 
> 时间：2012-05-09T13:48:18.203
> 
> 标签：android, broadcastreceiver, device

我试图在 onRecive （在广播接收器内）中获取设备 ID，但我发现的唯一方法是使用此代码：

```
TelephonyManager tManager = (TelephonyManager)myActivity.getBaseContext().getSystemService(Context.TELEPHONY_SERVICE);
device_id = tManager.getDeviceId(); 
```

但在这里我不在活动中。那么我怎样才能获得设备ID？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:52:02.203

如果你在 onReceive 那么你有一个上下文。如果您有上下文，则可以调用 getSystemService 并执行与此处相同的操作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T14:13:32.547

用这个：

```
 public class PhoneReceiver extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {
        TelephonyManager tManager = (TelephonyManager)context.getSystemService(Service.TELEPHONY_SERVICE);
        device_id = tManager.getDeviceId();
        }
        } 
```

# sql - 复杂的 SQL 查询如果在另一个视图中不存在则需要添加一行

> ID：10517468
> 
> 赞同：1
> 
> 时间：2012-05-09T13:48:32.913
> 
> 标签：sql

我有一个非常复杂的视图。该查询从大约 14 个表中提取数据，还涉及一个子查询。结果如下：[Unique Identifier][office][number][description][value][customer][strjobid]...

现在，此信息是从名为 ViewTeamMembers 的视图中提取的。ViewTeamMembers 视图将根据唯一标识符返回所有团队成员。有时有团队成员但没有“所有者”。我需要我的查询从 ViewTeamMembers 中提取数据（现在正在这样做）并检查是否有所有者。如果没有所有者，我需要在我的结果集中插入一行，其中所有者名称为“未分配”，所有其他数据将由其他团队成员的数据填充。我怎样才能做到这一点？

例子：

```
ViewTeamMembers
[unique123][Office1][555-5555][description][1,000][Frank][hourly]
[unique123][Office1][555-5555][description][1,000][Tom][Salary]
[unique123][Office1][555-5555][description][1,000][Brent][Hourly] 
```

我需要对此进行查询，并查看是否存在具有作业ID“所有者”的人的行，如果没有，我需要将我自己的行插入到我的视图中

```
[unique123][Office1][555-5555][description][1,000][Not Assigned][Owner] 
```

所以当我查看我的查询结果集时，我应该得到

```
[unique123][Office1][555-5555][description][1,000][Frank][hourly]
[unique123][Office1][555-5555][description][1,000][Tom][Salary]
[unique123][Office1][555-5555][description][1,000][Brent][Hourly]
[unique123][Office1][555-5555][description][1,000][Not Assigned][Owner] 
```

这是我的加入

`LEFT OUTER JOIN dbo.viewteammembers ON dbo.viewteammembers.guidrequirementid = dbo.tblrequirements.guidrequirementid`

我会假设我必须做这样的事情：

```
select * from viewteammembers case when not exists(select * from viewteammebers where strjobid = 'Owner') then 
```

但我不知道使这项工作的语法是什么。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:15:38.643

根据您使用的数据库类型，可能会有更好的方法来做到这一点，但这样的事情应该可以解决问题

```
 -- get dummy rows for all distinct identifiers that don't already have an owner
    select 
       distinct [Unique Identifier], [office], [number], [description], 
       1 as value, 
       'Not Assigned' as Customer, 
       'Owner' as strjobid from ViewTeamMembers vtm
    where 
       not exists (select 1 from ViewTeamMembers vtm2 
                   where vtm2.[Unique Identifier] = vtm.[Unique Identifier] 
                   and StrJobId = 'Owner')
    union all -- add everything already there
    select 
       [Unique Identifier], [office], [number], [description],
       [value], [customer], [strjobid]
    from ViewTeamMembers 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:13:58.697

如果我正确理解了您的要求，那么您有一个要添加的内容表，并且您想删除其中的一些内容。

以下查询结构实现了这一点：

```
with toadd (
    select *
    from <things to add> tad
    where tad.guidrequirementid not in (select guidrequirementid from <view>)
)
insert into <final table>
    select * from toadd 
```

# .net - CodeDom 方法序列

> ID：10517474
> 
> 赞同：0
> 
> 时间：2012-05-09T13:48:46.373
> 
> 标签：.net, codedom

你能说我如何使用 CodeDOM (.net) 做如下声明吗？

```
_myClass.Configure("MyNode").Action("param1", "param2"); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:22:23.380

假设 _myClass 是您正在使用的类中的一个字段，您将通过引用该字段来构建图表。

```
CodeExpression fieldReferenceExpression = new CodeFieldReferenceExpression(new CodeThisReferenceExpression(), "_myClass") 
```

然后，您将使用字符串值“MyNode”的原始表达式作为参数调用字段上的 Configure 方法。

```
CodeExpression configureInvokeExpression = new CodeMethodInvokeExpression(
           new CodeFieldReferenceExpression(new CodeThisReferenceExpression(), "_myClass"),
           "Configure",
           new CodePrimitiveExpression("MyNode")) 
```

最后，您将使用该表达式调用 Action 方法，使用“param1”和“param2”的原始表达式作为参数。

```
CodeExpression actionInvokeExpression = new CodeMethodInvokeExpression(
        new CodeMethodInvokeExpression(
           new CodeFieldReferenceExpression(new CodeThisReferenceExpression(), "_myClass"),
           "Configure",
           new CodePrimitiveExpression("MyNode")),
        "Action", 
        new CodePrimitiveExpression("param1"),
        new CodePrimitiveExpression("param2")); 
```

使用 CSharpCodeProvider，这会生成：

```
this._myClass.Configure("MyNode").Action("param1", "param2") 
```

# c - 声明固定大小或可变大小的 C 数组的最漂亮方法？

> ID：10517478
> 
> 赞同：2
> 
> 时间：2012-05-09T13:48:53.193
> 
> 标签：c, arrays, embedded

我正在为算法编写一个小的 C 代码。主要目标是嵌入式微控制器，但是，出于测试目的，需要 Matlab/Python 接口。

我正在遵循一个嵌入式编程标准（MISRA-C 2004），它要求使用C90，不鼓励`malloc`和朋友使用。因此，代码中的所有数组都在编译时分配了内存。如果更改输入数组的大小，则需要重新编译代码，这在微控制器场景中是可以的。然而，当使用 Matlab/Python 进行原型设计时，输入数组的大小会经常变化，并且每次都重新编译似乎不是一种选择。在这种情况下，使用 C99 是可以接受的，并且数组的大小应在运行时确定。

问题是：我在 C 中有哪些选项可以使这两个场景在同一代码中共存，同时保持代码干净？

我必须强调，我主要关心的是如何使代码易于维护。我考虑过使用*#ifdef*来获取静态分配的数组或动态分配的数组。但是数组太多了，我觉得*#ifdef*让代码看起来很难看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:23:02.267

我想了一种方法，你可以只用一个`#ifdef`. 我个人会咬紧牙关，在需要时重新编译我的代码。使用不同的 C 方言进行生产和测试的想法让我有点紧张。

无论如何，这就是你可以做的。

```
#ifdef EMBEDDED
#define ARRAY_SIZE(V,S) (S)
#else
#define ARRAY_SIZE(V,S) (V)
#endif

int myFunc(int n)
{
    int myArray[ARRAY_SIZE(n, 6)];
    // work with myArray
} 
```

`ARRAY_SIZE`宏选择变量，`V`如果不在嵌入式环境中；或固定大小`S`，如果在嵌入式环境中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:10:11.747

MISRA-C:2004 禁止 C99 和 VLA，因此如果您正在编写严格符合 MISRA 代码，则不能使用它们。在即将发布的 MISRA-C 标准中，VLA 也很可能会被明确禁止。

是否可以选择不使用大小未知的静态分配数组？那是：

```
uint8_t arr[] = { ... };  
... 
n = sizeof(arr)/sizeof(uint8_t); 
```

这很可能是“最漂亮”的方式。或者，您可以在 C99 中使用 VLA 进行调试构建，然后在发布构建中将其更改为静态分配的数组。

# powershell - 处理列表并创建过滤器 - 在内容之间插入 -AND

> ID：10517484
> 
> 赞同：1
> 
> 时间：2012-05-09T13:49:06.097
> 
> 标签：powershell, foreach

我有一个用户列表（.txt）：

```
user1
user2
user3
user4 
```

我想用作 cmdlet (get-qaduser) 上的过滤器。我想忽略列表中的用户。

我试试

```
$filter = Get-Content users.txt | Foreach-Object { " AND Name!='{0}'" -f $_} 
```

但这以 AND 开始我的过滤器，并且每个用户之间都有一个换行符。我该怎么做呢？

孙：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:16:14.507

试试这个：

```
$filter = $filter = Get-Content users.txt | Foreach-Object { "(!samaccountname=$_)" }
$filter = "({0})" -f (-join $filter)
Get-QADUser SizeLimit 0 -LdapFilter $filter 
```

过滤器看起来像：

```
((!samaccountname=user1)(!samaccountname=user2)...) 
```

# c# - 更新（）在 MongoDB 中不起作用

> ID：10517487
> 
> 赞同：0
> 
> 时间：2012-05-09T13:49:16.747
> 
> 标签：c#, mongodb

MongoDB for C#，我开始关注他们的教程，但我得到的编译错误在这一行：

[http://www.mongodb.org/display/DOCS/CSharp+Driver+Quickstart](http://www.mongodb.org/display/DOCS/CSharp+Driver+Quickstart)

```
 var update = Update.Set("Name", "Harry"); 
```

说

> System.Windows.Forms.Control.Update()' 是一种“方法”，在给定的上下文中无效。

我看到的唯一区别是他们使用了控制台应用程序，但我创建了一个 C#WinForms 应用程序并将他们的代码粘贴到按钮 click 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T14:06:41.673

在您使用调用的上下文中，更新只是模棱两可。您需要限定 Update 语句以包含它所在的命名空间。

```
var update = MongoDB.Driver.Builders.Update.Set("Name", "Harry"); 
```

这可能会很烦人，因此您也可以在标题中创建别名。

```
using U = MongoDB.Driver.Builders.Update; 
```

然后，您可以将您的声明更改为：

```
var update = U.Set("Name", "Harry"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T14:01:01.363

我猜您的 c#WinForms 包含一个名为 Update 的方法，c# 尝试访问该方法而不是 MongoDB 方法。您是否检查过您是否已导入所需的所有内容以及您访问的对象是否正确？

# ruby - Ruby `ensure` 没有运行

> ID：10517489
> 
> 赞同：1
> 
> 时间：2012-05-09T13:49:36.470
> 
> 标签：ruby

我的模型中有一个在私有方法中运行的简单方法：

```
def with_time_zone(zone)
  @old_time_zone = Time.zone
  Time.zone = self.account.timezone
  Chronic.time_class = Time.zone
  yield
ensure
  Time.zone = @old_time_zone
  Chronic.time_class = @old_time_zone
end 
```

我这样使用它：

```
with_time_zone(account.timezone) do
  Time.parse(@time)
end 
```

但是，当我运行测试时，开始时区设置为 EST，但是当需要比较时间时，`Time.zone`将设置为该块中最后使用的时区。因此告诉我该`ensure`方法没有被调用，并且 Time.zone 没有被重置。

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T14:02:53.640

也许，您正在对该方法进行嵌套调用？由于您不维护堆栈，因此第一个嵌套调用将导致早期的值`@old_time_zone`丢失。

如果发生这种情况，请停止使用实例变量，并改用局部变量（无`@`符号）。方法的每个嵌套调用都有自己的局部变量，并且它们仍在`ensure`块的范围内。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T14:22:16.007

```
def with_time_zone(zone)
  old_time_zone = Time.zone
  Chronic.time_class = Time.zone = zone
  yield
ensure
  Chronic.time_class = Time.zone = old_time_zone
end

with_time_zone(account.timezone) do
  Time.parse(some_time)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:08:57.263

检查 的值是不够的，`Time.zone`因为在确保运行后其他东西可能已经改变了它..

要隔离问题，请尝试在确保块中包含一条消息以确保它已运行或未运行

# xcode4.3 - 不兼容的指针类型将“NSURL *__strong”发送到“NSURLRequest *”类型的参数

> ID：10517490
> 
> 赞同：1
> 
> 时间：2012-05-09T13:49:43.257
> 
> 标签：xcode4.3

大家好，这是我的简单代码..我错过了什么？这是两天我试图解决这个问题..有什么想法吗？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"dog" ofType:@"pdf"];
    NSURL *url = [NSURL fileURLWithPath:path];
    NSURL *request = [NSURLRequest requestWithURL:url];
    [webView loadRequest:request];  <<<<<< HERE WHERE THE ERROR COME OUT <<<<<<
    [webView setScalesPageToFit:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:01:31.937

`loadRequest`参数是类型的`NSURLRequest`，而不是`NSURL`你的情况。你确定这条线正在编译吗？：

```
NSURL *request = [NSURLRequest requestWithURL:url]; 
```

据我所知，该方法返回 NSURLRequest 类型的对象，而不是 NSURL

# ios - 选择TableView的单元格时如何防止按钮消失？

> ID：10517494
> 
> 赞同：1
> 
> 时间：2012-05-09T13:49:51.173
> 
> 标签：ios, ipad, xcode4

我在 TableView 中有一个自定义单元格，并且单元格中有一个按钮。当我选择单元格时，背景变为蓝色，按钮消失。有什么办法可以防止这种情况发生吗？

像这样的 cellForRowAtIndexPath -

```
- (UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
MyTableCell *cell = (MyTableCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    cell = [[MyTableCell alloc] initWithStyle:UITableViewCellStyleSubtitle
                                  reuseIdentifier:CellIdentifier];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

}
Search *current = [self.retrievedTweets objectAtIndex:indexPath.row];
cell.textLabel.text = current.text;
cell.textLabel.font = [UIFont systemFontOfSize:15.0];
cell.textLabel.numberOfLines = 2;
cell.detailTextLabel.text = current.name;
cell.imageView.image = current.userImage;

btnUncheck =[[UIButton alloc] initWithFrame:CGRectMake(400, 35, 20, 20)];

btnUncheck.backgroundColor = [UIColor redColor];
btnUncheck.layer.cornerRadius = 10;
btnUncheck.hidden =NO;
btnUncheck.tag=indexPath.row;
//[btnUncheck addTarget:self action:@selector(didSelectRowAtIndexPath:) forControlEvents:UIControlEventTouchUpInside];

[cell.contentView addSubview:btnUncheck];
return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:57:43.183

为选定的表格单元格使用自定义图像。或尝试使用按钮图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:35:49.157

你可以做的是：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{[tableView deselectRowAtIndexPath:indexPath animated:YES];} 
```

希望这可以帮助

另外，如果你已经实现了这个，那么在这个委托方法中你还有什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:36:25.280

创建一个背景颜色清晰的“自定义”视图并设置为它。

```
UIView* vista=[[[UIView alloc] init] autorelease];
vista.backgroundColor=[UIColor clearColor];
cell.selectedBackgroundView=vista; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T14:45:04.697

而不是这一行：

```
btnUncheck = [[UIButton alloc] initWithFrame:CGRectMake(400, 35, 20, 20)]; 
```

利用：

```
btnUncheck = [[UIButton buttonWithType:UIButtonTypeCustom] retain];
[btnUncheck setFrame:CGRectMake(400, 35, 20, 20)]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T14:23:19.613

在您的 tableview 委托方法中粘贴以下行

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

{

```
///// your code ///////////
cell.selectionStyle=UITableViewCellSelectionStyleNone;
//// your code//////// 
```

}

在这里你的蓝色背景不会显示..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T16:02:30.113

解决这个问题的方法是创建一个自定义单元格，然后在 xib 编辑器中添加一个按钮。

因此，在 xib 编辑器中，添加一个“UITableViewCell”项。然后将按钮添加到 xib 编辑器中的该单元格项目。然后，您将在此处将您的自定义单元格附加到相应 .m 文件中的表格：

*   (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

我只用一个单行表和自定义单元格作为属性从 xib 绑定​​到具有表视图的 .h 文件尝试了这一点。突出显示在那里，只是使按钮变灰（仍然可见）。要让它与更多行一起工作，需要更多的参与。您需要加载自定义 utableviewcell xib 并动态分配您的自定义单元格以使其正常工作。

# css - 更改 div 悬停时的链接颜色

> ID：10517499
> 
> 赞同：0
> 
> 时间：2012-05-09T13:49:59.110
> 
> 标签：css, class, hover

我有一个 div，其中有一个链接，现在如果我将鼠标悬停在链接上它会改变颜色，但我想将鼠标悬停在 div 上以改变颜色，这里是代码：

```
<div class="first_product margin_right left">
<a href="/link">
</a><div class="first_product_text"><a href="/link"></a><a href="link">Automation&nbsp;<span>+</span></a></div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:00:17.177

我完全赞成使用 Jquery，但如果你想避免它

HTML：

```
 <div class="first_product margin_right left">
      <div class="first_product_text">
           <a href="/link"></a>
           <a href="link">Automation&nbsp;<span>+</span></a>
      </div>
</div>​ 
```

CSS：

```
.first_product_text:hover{background-color:#f22;} 
```

这是[JsFiddle](http://jsfiddle.net/dJHwH/)
​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:50:46.123

这应该可以解决您的问题。

CSS：

```
.first_product_text div:hover a {color:#HOVERCOLOUR;} 
```

# python - ValueError: int() 以 10 为底的无效文字：'107.24'

> ID：10517501
> 
> 赞同：0
> 
> 时间：2012-05-09T13:50:06.747
> 
> 标签：python

我是python新手，我只是尝试通过python在avg播放器中播放视频。所有视频都播放成功，但是一个视频出现了这个值错误。我不知道为什么会发生这个错误。如果你知道描述我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:53:28.263

出现具体问题是因为软件试图解释`107.24`为整数，但事实并非如此。

为什么这样做，或者这个数字来自哪里，从你的问题中给出的少量信息中很难判断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:53:40.523

`'107.24'`是一个浮点字符串并且 int() 不能转换一个`float`字符串，使用`float()`.

```
>>> a='107.24'
>>> int(a)
Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    int(a)
ValueError: invalid literal for int() with base 10: '107.24'

>>> float(a)
107.24 
```

# cakephp - cakePHP virtualField 在另一个模型的条件下

> ID：10517515
> 
> 赞同：0
> 
> 时间：2012-05-09T13:50:31.923
> 
> 标签：cakephp, model

我有 2 个模型，用户和实体。我需要在我的实体页面上，有分页，和一个简单的搜索功能。搜索功能将过滤实体，但它过滤的数据是用户模型中的虚拟字段。

实体模型：

```
public $belongsTo = array(
    'User' => array(
        'className' => 'User',
        'foreignKey' => 'user_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
 }; 
```

User 模型中的虚拟字段：

```
 public $virtualFields = array("searchFor" => "CONCAT(User.first_name, ' ',User.last_name, ' ',User.email)"); 
```

以及实体控制器内的条件：

```
 $conditions["User.searchFor LIKE"] = "%".str_replace(" ","%",$this->passedArgs["searchFor"])."%";
 $this->paginate = array(
                'conditions' => $conditions,
                'order' => array('Re.created' => 'DESC'),
                'limit' => 20
            ); 
```

据我所知，这是不可能的，因为我不能在关联模型的查询中使用 virtualFields，并且它说我必须在“运行时”中使用它，但我真的不明白该怎么做，或者怎么做在这种情况下。有什么想法或方法可以让它发挥作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:44:16.423

您可以尝试像这样将 virtualField 附加到 Entity 模型

```
$this->Entity->virtualFields['searchFor'] = $this->Entity->User->virtualFields['searchFor']; 
```

但是您必须确保完成连接而不是 2 个查询。

我相信它在书中讨论过。

编辑：[书页](http://book.cakephp.org/2.0/en/models/virtual-fields.html#limitations-of-virtualfields)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:36:56.103

为此，我需要对关联模型中的连接字符串进行搜索。通常这可以使用 cake 中的 Virtualfields 来完成，但 cake 不支持在搜索中使用关联模型中的 virtualField。

看到 2 个模型已经与 belongsTo 关联，我只是将条件更改为：

```
 "conditions" => "CONCAT(User.first_name, ' ',User.last_name, ' ',User.email) LIKE" => "%".str_replace(" ","%",$this->passedArgs["searchFor"])."%" 
```

可能不是最优雅的解决方案，但它确实有效。

# android - 是否可以在低于 14 的 API 级别上定位操作栏菜单按钮？

> ID：10517516
> 
> 赞同：0
> 
> 时间：2012-05-09T13:50:40.073
> 
> 标签：android, android-actionbar

我们正在构建一个（仍然）针对 API 级别 8 的应用程序，但我们使用了兼容性包。由于规格的原因，我们不能针对 14 级。在新设备 (HTC One X) 上，ActionBar 的菜单按钮在应用程序下方可见。有没有办法禁用或隐藏该按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T13:54:23.050

尝试阅读[ActionBarSherlock](http://actionbarsherlock.com/)，它是用于在较低 SDK 版本中实现操作栏的兼容性库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:57:00.890

您可以尝试[ActionBarCompat](http://developer.android.com/resources/samples/ActionBarCompat/index.html)。它是纯安卓 :-)

# android - 使用您的安卓手机为您的头戴式显示器构建头部跟踪器

> ID：10517517
> 
> 赞同：3
> 
> 时间：2012-05-09T13:50:40.260
> 
> 标签：android, accelerometer, gravity

我的目标是使用我的安卓手机为我的头戴式显示器编写一个头部跟踪器。移动被转移到鼠标移动，而鼠标移动又在电脑游戏中使用。我想把我的安卓手机安装到头部追踪器的后面，所以它会固定在我的后脑勺上。y轴朝上，x轴朝右看，就是看我后脑勺的时候看到的是手机显示屏。

![手机图片](../Images/036dd8395b79c8aaa5a5422a30444ea6.png)

由于这种设置的机制，y 轴和重力轴之间存在一个角度，因此当直视前方时，手机会稍微倾斜远离头部的后部。此外，它围绕 z 轴略微旋转，并且可能在围绕 z 轴移动时旋转大约 5 到 10° 的角度。

我的手机没有陀螺仪。我用了

```
public void onSensorChanged(SensorEvent event)
{
  // alpha is calculated as t / (t + dT)
  // with t, the low-pass filter's time-constant
  // and dT, the event delivery rate

  final float alpha = 0.8;

  gravity[0] = alpha * gravity[0] + (1 - alpha) * event.values[0];
  gravity[1] = alpha * gravity[1] + (1 - alpha) * event.values[1];
  gravity[2] = alpha * gravity[2] + (1 - alpha) * event.values[2];

  linear_acceleration[0] = event.values[0] - gravity[0];
  linear_acceleration[1] = event.values[1] - gravity[1];
  linear_acceleration[2] = event.values[2] - gravity[2];
} 
```

这比仅使用来自加速度计的原始数据效果更好。我只是用0.8作为alpha，需要根据t/(t+dT)来调整吗？那么如何得到t和dT呢？

使用这种设置，上下倾斜头部就可以了 - 在这里和那里进行一些改进 - 很好。

但是左右移动是个问题。还从左下到右上移动对角线并镜像。或者在圈子里移动。

来自基础数学而不是我的错误描述，您建议使用哪些代码来完成这项工作？

# openfire - 无法在端口 7777 上设置本地 SOCKS5 代理：地址已在使用中：JVM_Bind

> ID：10517518
> 
> 赞同：2
> 
> 时间：2012-05-09T13:50:41.900
> 
> 标签：openfire

在将消息从 spark 中存在的代理发送到客户端应用程序中存在的客户端时

我收到以下错误

无法在端口 7777 上设置本地 SOCKS5 代理：地址已在使用中：JVM_Bind

我为向客户端发送消息而编写的代码是..波纹管..

我在课堂上写了以下方法，实现了 org.jivesoftware.smackx.workgroup.agent.OfferListener

```
Message message1 = new Message();
message1.setBody(message);
try {
for (MultiUserChat muc : GlobalUtils.getMultiuserchat()) {
   if (muc.getRoom().equals(conf)) {
      muc.sendMessage(message1);
      System.out.println("message sent  ############# agent to client..");
   }
}

} catch (Exception ex) {
    System.out.println("exception while sending message in sendMessage() ");
    ex.printStackTrace();
} 
```

帮我

谢谢 rajesh.v

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-26T05:44:19.723

这是因为您在同一台机器上运行您的服务器和您的客户端。

你知道...我假设您使用 openfire 作为服务器.. Openfire 默认使用端口 7777 进行文件传输代理服务，并且默认启用它。并且您的客户端通过使用端口 7777 进行默认文件传输来执行相同的操作。

在服务器设置 > 文件传输设置中查看 openfire 设置。您可以禁用它。或者只是在不同的机器上运行您的客户端和服务器。我认为您处于开发状态，因此您的服务器和客户端在同一台机器上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:34:39.357

你的消息的有效负载是什么 - 里面有没有 & - 不知道为什么，但这似乎很糟糕

# c# - C# .NET 2 异常：外部组件已引发异常

> ID：10517526
> 
> 赞同：0
> 
> 时间：2012-05-09T13:51:02.133
> 
> 标签：c#, .net-2.0

我在 c# 2 应用程序中开发过。一个 ASP .NET Web 服务和一个使用该 Web 服务的 WinForms 客户端。客户端分发给许多客户。对于其中一位客户，应用程序突然开始抛出以下异常：

```
External component has thrown an exception.
at System.Diagnostics.SharedPerformanceCounter.GetCounter(String counterName, String instanceName, Boolean enableReuse, PerformanceCounterInstanceLifetime lifetime)
at System.Diagnostics.SharedPerformanceCounter..ctor(String catName, String counterName, String instanceName, PerformanceCounterInstanceLifetime lifetime)
at System.Diagnostics.PerformanceCounter.Initialize()
at System.Diagnostics.PerformanceCounter.set_RawValue(Int64 value)
at System.Net.NetworkingPerfCounters.Initialize()
at System.Net.Configuration.SettingsSectionInternal..ctor(SettingsSection section)
at System.Net.Configuration.SettingsSectionInternal.get_Section()
at System.Net.ServicePointManager.set_Expect100Continue(Boolean value)
at #Neh.#hgh.#P0f(String[] args) 
```

异常末尾的混淆（使用SmartAssembly 5）函数是客户端的主要函数，如下所示

```
public static void Main(string[] args) {
    try {
        AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);
        Application.ThreadException += new System.Threading.ThreadExceptionEventHandler(Application_ThreadException);

        System.Net.ServicePointManager.Expect100Continue = false;
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        Globals.Settings.NoWaitPrintJobs = true;
        Application.Run(new frmMain());
    }
    catch(Exception ex) {
        HandleUnhandledException(ex);
    }
} 
```

从异常中我了解到它正在中断

```
System.Net.ServicePointManager.Expect100Continue = false; 
```

该应用程序不引用任何互操作组件，只是其他托管 dll。它还在 shell32.dll 中使用本机函数

```
[DllImport("shell32.dll")]
static extern bool SHGetSpecialFolderPath(IntPtr hwndOwner, [Out] StringBuilder lpszPath, int nFolder, bool fCreate); 
```

在静态对象的主窗体加载事件上调用它。

```
Globals.Settings.InitLocalFiles(); 
```

我还不知道客户的电脑规格。我认为他有Windows XP。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:08:16.657

看起来运行客户端的用户帐户没有正确的权限，无法使用性能计数器

请参阅[“UnauthorizedAccessException”-“Global\.net clr 网络”](https://stackoverflow.com/q/905331/15710)

这使得网络类不使用性能计数器。

# html - 需要为我的 webapp 使用基于 HTML 5 的图表组件的建议

> ID：10517527
> 
> 赞同：0
> 
> 时间：2012-05-09T13:51:02.727
> 
> 标签：html, extjs, fusioncharts

> **可能重复：**
> [在网络上提供图表的最佳方式？服务器端还是客户端库？HTML5？](https://stackoverflow.com/questions/4305052/best-way-to-provide-charts-on-the-web-server-side-or-client-side-library-html5)

我们有一个 Web 应用程序，它的表示层建立在 Flex 之上。该网站由具有弹性图表的页面组成，例如条形图、柱形图、饼图等。由于我们希望该网站可以在 iPad 和 iPhone 上运行，因此我们计划将表示层移动到 HTML5。我们的图表显示在 portlet 内的仪表板上，它是可拖动的，并且我们的点击是交互式的。我听说过一些名字，比如 Fusion chart 和 Senchas。我可以使用哪些其他 3rd 方图表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:42:55.927

在两年的时间里，我已经将我的数十个客户从 Flash 迁移到 JavaScript 图表。有很多很好的 Flash 图表库，但对于 HTML5/JavaScript，它基本上可以归结为两种选择：

[amCharts JavaScript 图表](http://www.amcharts.com/javascript/)和[Highcharts](http://www.highcharts.com/)

它们都充满了功能，积极开发和支持。我建议您同时下载它们（它们提供功能齐全的免费版本）并尝试更适合您任务的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:59:49.827

您也可以使用[jqChart](http://www.jqchart.com)。

# c# - 解析一种csv文件

> ID：10517528
> 
> 赞同：1
> 
> 时间：2012-05-09T13:51:04.753
> 
> 标签：c#, .net, parsing, csv

我有一种 csv 文件，带有一些额外的参数。我不想编写自己的解析器，因为我知道那里有很多好的解析器。问题是，如果有任何解析器可以处理我的场景，我会感到不安。我的 csv 文件如下所示：

![CSV 文件](../Images/22ba2b17af8973949b586d66678bc9a9.png)

我想先阅读 #ADM 下面的第二行，所以在这种情况下是 3 行。而我想阅读#Prov 之后的第二行。

有没有我可以使用的好的解析器或阅读器来帮助我解决这个问题，我将如何编写来处理我的场景？

我的文件的扩展名也不是 .csv ，而是 .lab ，但我想这不会有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:42:54.990

*Fore*，我没有看到该任务的特定语言，并且阅读太晚了`c#`。这是一个`perl`解决方案，但评论很好，所以我希望它可以有用且易于翻译成其他语言。

假设一个测试文件 ( `infile`) 像：

```
1
2
3
4
5

#Adm
6                                                                                                                                                                                                                                            
7                                                                                                                                                                                                                                            

#Prov                                                                                                                                                                                                                                        
8                                                                                                                                                                                                                                            
9                                                                                                                                                                                                                                            

#Adm                                                                                                                                                                                                                                         
10                                                                                                                                                                                                                                           
11                                                                                                                                                                                                                                           

#Prov                                                                                                                                                                                                                                        
12                                                                                                                                                                                                                                           
13                                                                                                                                                                                                                                           

#Adm                                                                                                                                                                                                                                         
14                                                                                                                                                                                                                                           
15                                                                                                                                                                                                                                           

#Prov                                                                                                                                                                                                                                        
16                                                                                                                                                                                                                                           
17 
```

内容`script.pl`：

```
use warnings;
use strict;

## Assign empty value to read file by paragraphs.
$/ = qq[];

## Arrays to save second row of its section.
my (@adm, @prov);

## Regex to match beginning of section.
my $regex = qr/(?:#(?|(Adm)|(Prov)))/;

## Read file.
while ( <> ) { 

    ## Remove last '\n'.
    chomp;

    ## If matches the section and it has at least two lines...
    if ( m/\A${regex}/ and tr/\n/\n/ == 2 ) { 

        ## Group the section name ($1) and its second line ($2).
        if ( m/\A${regex}.*\n^(.*)\Z/ms ) { 

            ## Save line in an array depending of section's value.
            if ( $1 eq q[Adm] ) { 
                push @adm, $2; 
            }   
            elsif ( $1 eq q[Prov] ) { 
                push @prov, $2; 
            }   
        }   
    }   
}

## Print first lines of 'Adm' section and later lines of 'Prov' section.
for ( ( @adm, @prov ) ) { 
    printf qq[%s\n], $_; 
}

exit 0; 
```

像这样运行它：

```
perl script.pl infile 
```

具有以下输出：

```
7
11
15
9
13
17 
```

# c#-4.0 - 如何改进以下代码？

> ID：10517532
> 
> 赞同：0
> 
> 时间：2012-05-09T13:51:08.070
> 
> 标签：c#-4.0

有没有更好的方法来编写下面的程序（我相信它可以但是如何）

```
for (int i = 0; i < relevantElements.Count(); i++)
            {
                switch (len)
                {
                    case 1: result.Add(new ContextElements
                    {
                        CultureName = GetElementValues(relevantElements[0], applicationType)
                        ,
                        AffId = null
                        ,
                        EmailAddress = null
                    }); 
                        break;
                    case 2:
                    result.Add(new ContextElements
                    {
                        CultureName = GetElementValues(relevantElements[0], applicationType)
                        ,
                        AffId = GetElementValues(relevantElements[1], applicationType)
                        ,
                        EmailAddress = null
                    }); 
                        break;
                    case 3:
                        result.Add(new ContextElements
                        {
                            CultureName = GetElementValues(relevantElements[0], applicationType)
                            ,
                            AffId = GetElementValues(relevantElements[1], applicationType)
                            ,
                            EmailAddress = GetElementValues(relevantElements[2], applicationType)
                        });
                        break;
                }
            } 
```

谢谢

编辑

我有一个源 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>

<RootElement>

  <HomeSite>

   <Context enabled="1" active="1">

      <Culture>en-us</Culture>

      <Affiliate>0</Affiliate>

      <EmailAddress>sreetest@test.com</EmailAddress>

      <Password>sreesree1</Password>

    </Context>

  </HomeSite>

  <ResourceManager>

    <Context enabled="1" active="1">

      <Culture>en-us</Culture>

      <Affiliate>0</Affiliate>

    </Context>

  </ResourceManager>  

  <Purchase>

     <Context enabled="1" active="1">

      <PurchaseUrl>http://purchase.mcafee.com?culture=en-us&amp;affid=0</PurchaseUrl>

    </Context>

    <Context enabled="0" active="0">

      <PurchaseUrl>http://purchase.mcafee.com?culture=en-gb&amp;affid=0</PurchaseUrl>

    </Context>

  </Purchase>  

</RootElement> 
```

从“HomeSite”应用类型可以看出，“Context”元素下有 3 个元素，即 Culture、Affiliate、EmailAddress。但这与其他应用程序类型“ResourceManager”和“Purchase”不同。我也有一个自定义实体，如下所示

```
public class ContextElements

{
    public string CultureName { get; set; }

    public string AffId { get; set; }

    public string EmailAddress { get; set; }

} 
```

挑战是我必须在运行时填写属性值。不能超过 3 个。

我的完整程序（但需要改进代码）

```
class Program
    {       
        static void Main(string[] args)
        {
            XDocument xmlSkuDescDoc = null;

            xmlSkuDescDoc = XDocument.Load(@"D:\Config.xml");

            string applicationType = ApplicationType.Purchase.ToString();

            var result = new List<ContextElements>();

            var elementCollection = new List<string>();

            (from data in xmlSkuDescDoc.Descendants(applicationType)
             select data)
                     .Descendants("Context")
                     .Elements()
                     .ToList()
                     .ForEach(i => elementCollection.Add(i.Name.ToString()));

           //Exclude unwanted elements
            var relevantElements = elementCollection.Except(new List<string> { "Password" }).ToList();

            int len = relevantElements.Count();

            for (int i = 0; i < relevantElements.Count(); i++)
            {
                switch (len)
                {
                    case 1: result.Add(new ContextElements
                    {
                        CultureName = GetElementValues(relevantElements[0], applicationType)
                        ,
                        AffId = null
                        ,
                        EmailAddress = null

                    }); 
                        break;
                    case 2:
                    result.Add(new ContextElements
                    {
                        CultureName = GetElementValues(relevantElements[0], applicationType)
                        ,
                        AffId = GetElementValues(relevantElements[1], applicationType)
                        ,
                        EmailAddress = null
                    }); 
                        break;
                    case 3:
                        result.Add(new ContextElements
                        {
                            CultureName = GetElementValues(relevantElements[0], applicationType)
                            ,
                            AffId = GetElementValues(relevantElements[1], applicationType)
                            ,
                            EmailAddress = GetElementValues(relevantElements[2], applicationType)
                        });
                        break;
                }
            }

           // //just for printing
           result.ForEach(i => Console.WriteLine(string.Format("CultureName = {0} , AffId = {1} , EmailAddress = {2} ", i.CultureName, i.AffId, i.EmailAddress)));

            Console.ReadKey();

        }

        private static string GetElementValues(string elementName,string applicationType)
        {
             XDocument xmlSkuDescDoc = null;

            xmlSkuDescDoc = XDocument.Load(@"D:\Config.xml");

            return (from data in

                             (from data in xmlSkuDescDoc.Descendants(applicationType)

                              select data).Descendants("Context")

                    select new { Value = (string)data.Element(elementName)}).FirstOrDefault().ToString();
        }

        public enum ApplicationType
        {
            HomeSite = 1
            ,
            ResourceManager
                ,
            ApplicationProvisioning
                ,
            Purchase
                ,
            GAC
           , WebSVCService
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:57:04.793

具有相同行为的代码的直接机械重写将是

```
for (int i = 0; i < relevantElements.Count(); i++)
{
    result.Add(new ContextElements
    {
        CultureName = GetElementValues(relevantElements[0], applicationType),
        AffId = len < 2 ? null : GetElementValues(relevantElements[1], applicationType),
        EmailAddress = len < 3 ? null : GetElementValues(relevantElements[2], applicationType),
    }); 
} 
```

也就是说，我不知道这段代码试图做什么，或者它是否正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:00:52.877

好吧，您可以通过这种方式稍微改进代码：

```
var cultureName = GetElementValues(relevantElements[0], applicationType);
AffIdType affId = null; // replace with the actual type
EmailAddressType emailAddress = null; // ditto

switch (len)
{
    case 2:
        AffId = GetElementValues(relevantElements[1], applicationType);
        break;
    case 3:
        AffId = GetElementValues(relevantElements[1], applicationType);
        EmailAddress = GetElementValues(relevantElements[2], applicationType);
        break;
}
for (int i = 0; i < relevantElements.Count(); i++)
{
    result.Add(new ContextElements
    {
        CultureName = cultureName,
        AffId = affId,
        EmailAddress = emailAddress
    });
} 
```

（我假设您的代码不依赖于`AffId`s 和`EmailAddress`es 是不同的对象。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:08:03.723

至少你可以这样做：

```
var culture = GetElementValues(relevantElements[0], applicationType); 
var affId = GetElementValues(relevantElements[1], applicationType); 

for (int i = 0; i < relevantElements.Count(); i++) 
        { 
            switch (len) 
            { 
                case 1: 
                result.Add(new ContextElements 
                { 
                    Culture = culture, 
                    AffId = null, 
                    EmailAddress = null 
                });  
                    break; 
                case 2: 
                result.Add(new ContextElements 
                { 
                    Culture = culture, 
                    AffId = affId,
                    EmailAddress = null 
                });  
                    break; 
                case 3: 
                    result.Add(new ContextElements 
                    { 
                        Culture = culture, 
                        AffId = affId,
                        EmailAddress = GetElementValues(relevantElements[2], applicationType) 
                    }); 
                    break; 
            } 
        } 
```

# android - 如何为 Android 4.0.3 创建 AVD？（无法找到“userdata.img”）

> ID：10517555
> 
> 赞同：22
> 
> 时间：2012-05-09T13:52:00.743
> 
> 标签：android, android-emulator, avd

我正在尝试按照[教程](http://developer.android.com/resources/tutorials/hello-world.html)为 Android 4.0.3 创建我的第一个 AVD ，但我收到了错误消息：

> [2012-05-09 10:46:29 - SDK Manager] 找不到 ABI armeabi 的“userdata.img”文件以复制到 AVD 文件夹中。

我试图解决的问题：

*   我正在尝试使用 Android 4.0，现在我更新到 4.0.3 并且问题是一样的。
*   我用 4.0 重新安装了 Eclipse 插件两次，用 4.0.3 重新安装了两次，并且行为没有改变。
*   我再次将 Eclipse for Java 下载到另一个文件夹，并安装了插件。行为是相同的。

该文件`<sdk>/system-images/android-15/armeabi-v7a/userdata.img`存在，它是一个 4mb 文件，只读。

**相关问题**：[How to create an AVD for Android 4.0](https://stackoverflow.com/questions/7817044/how-to-create-an-avd-for-android-4-0) - 答案在这里没有用。

我在 Ubuntu 11.10 上运行 Eclipse Indigo Service Release 2 Build id: 20120216-1857。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-09T14:11:29.380

确保您已安装所有最新文件。转到 Eclipse 中的 SDK 管理器（WINDOW/SDK 管理器）。确保所有文件都显示“已安装”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T08:01:55.413

我在尝试为 Android 2.3.3 (API 10) 设置模拟器时遇到了这个问题。

我的 SDK 中安装了两个平台：API 10 和 17。我注意到`userdata.img`这些平台的文件位于以下位置：

```
system-images/
  android-17/
    x86/
      userdata.img
  android-10/
    x86/
      images/
        x86/
          userdata.img 
```

如您所见，该`android-10`平台的模拟器图像可能没有放在正确的文件夹中。

无论如何，简而言之：如果您处于相同的情况，只需将文件夹的内容移动到`android-[version]/x86/images/x86/`文件`android-[version]/x86/`夹中即可。它对我有用。

显然，如果您尝试启动 ARM 映像，请对`armeabi`文件夹而不是文件夹执行相同的操作`x86`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T12:57:17.667

我认为您还必须在 Android 4.1 下下载 ARM EABI v7a 系统映像

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T08:59:35.847

我写了一个安装指南来让 Android SDK 和 Eclipse 一起工作。关于防火墙，您可能会遇到一些陷阱，尤其是在 Windows 上。这里是：

[http://testigniter.blogspot.co.uk/2012/06/eclipse-with-android-sdk-installation.html](http://testigniter.blogspot.co.uk/2012/06/eclipse-with-android-sdk-installation.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T11:13:00.747

打开 SDK 管理器（以管理员身份运行）--> Android 4.1 (API 16)--> ARM EABI v7a 系统映像。安装这个。

# php - gd2的屏幕效果

> ID：10517559
> 
> 赞同：0
> 
> 时间：2012-05-09T13:52:10.057
> 
> 标签：php, image, gd2

是否可以使用带有 gd2 的 PHP 将水印插入另一张具有屏幕效果的照片（类似于 Photoshop 中）？我在 PHP 手册和谷歌中寻找类似的东西，但我只找到了 imagelayereffect 和 imagefilter 功能，这些没有屏幕效果

# objective-c - 十进制到十六进制 - Cocoa/Objective-C

> ID：10517560
> 
> 赞同：2
> 
> 时间：2012-05-09T13:52:30.150
> 
> 标签：objective-c, xcode, macos, cocoa

我需要转换一些具有小数内容的字符串。我希望这些内容在一个字符串中，以十六进制格式...

我该怎么做？

我尝试使用 NSScanner 但这种方法似乎有点大，只是进行 dec-hex 计算？

感谢您的回答！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-09T14:03:08.287

如果您知道您的字符串只包含一个有效的十进制数，那么最简单的方法是：

```
NSString *dec = @"254";
NSString *hex = [NSString stringWithFormat:@"0x%lX", 
                  (unsigned long)[dec integerValue]];
NSLog(@"%@", hex); 
```

# javascript - 不重复逗号

> ID：10517564
> 
> 赞同：1
> 
> 时间：2012-05-09T13:52:44.690
> 
> 标签：javascript, jquery

```
<input type="text" class="dot"> <br />
<input type="text" class="dot"> <br />
<input type="text" class="dot"> <br />

$('.dot').keydown(function(){
        $(this).val($(this).val().toString().replace(/\./g, ','));
}) 
```

[http://jsfiddle.net/ZtkBW/](http://jsfiddle.net/ZtkBW/)

在此示例中，我将点替换为逗号。如何阻止在当前输入中添加两个逗号？

如果输入中已经是一个逗号，那么下一个应该被删除。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T14:03:08.103

这是尝试用正则表达式解决问题的经典案例，现在你有两个问题......

目前尚不清楚您想要什么，但这将停止多次按下逗号键。它应该是从这里检测句点（代码 190）并用它做任何你想做的事情的一小步。

```
$('.dot').keydown(function(e){
    if (e.which == 188) {
        if (this.value.indexOf(',') != -1) {
            e.preventDefault();
            return false;
        }
    }
})​; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T14:14:09.297

使用`keypress`事件而不是`keydown`事件（因为`keydown`不是由键重复触发）。

查找`.`和字符，如果文本中已经有逗号，则`,`通过返回来停止事件。`false`

由于事件是可停止的，它发生在值更改之前，因此您需要使用超时将句点替换为逗号。

```
$('.dot').keypress(function(e){
    var txt = $(this).val();
    if (e.which == 46) {
        if (txt.indexOf(',') != -1) {
            return false;
        } else {
            var t = $(this);
            window.setTimeout(function(){
                t.val(t.val().replace('.', ','));
            }, 0);
        }
    } else if (e.which == 44) {
      return txt.indexOf(',') == -1;
    }
}); 
```

演示：http: [//jsfiddle.net/eAkUc/1/](http://jsfiddle.net/eAkUc/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T14:17:27.510

```
$('.dot').keypress(function(e){
     if( ($(this).val().indexOf(',') != -1 || $(this).val().indexOf('.') != -1) && 
         (e.charCode==','.charCodeAt(0) || e.charCode=='.'.charCodeAt(0)) )
         e.preventDefault();
     else
         $(this).val($(this).val().toString().replace(/\./g, ','));
})​;​ 
```

[**演示**](http://jsfiddle.net/Efx2m/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T13:55:56.170

如果我正确理解您想要什么，这是一种方法：

```
var myVal = $(this).val();
myVal[myVal.indexOf(",")] = ".";
myVal.split(",").join("");
$(this).val(myVal); 
```

# c# - 从 c# .net 中的资源库下载文件

> ID：10517567
> 
> 赞同：1
> 
> 时间：2012-05-09T13:52:46.530
> 
> 标签：c#, .net, stream, filestream

我正在开发一个应用程序，用户必须从多个屏幕下载一个示例文件（excel）才能使用。这样做的更好方法是什么。

我正在做的是

将文件放在应用程序正在执行的目录中，并使用 Application.StartupPath 下载文件。这听起来不是一个很好的解决方案。在任何时候，用户都可以编辑文件或删除文件或类似的东西。

我想做的是

我想在我的资源中添加所有文件并从资源中下载文件。我添加了文件，但我需要一些关于如何从资源下载它的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:57:25.073

您可以使用[Assembly.GetManifestResourceStream](http://msdn.microsoft.com/en-us/library/xc4235zt.aspx)并将流保存在某个文件中以使用它。这是一个简单的例子：

```
using (var resource = Assembly.GetManifestResourceStream("resource_key"))
using (var file = File.OpenWrite(filename))
{
    var buffer = new byte[1024];
    int len;
    while ((len = resource.Read(buffer, 0, buffer.Length)) > 0)
    {
        file.Write(buffer, 0, len);
    }  
} 
```

*请注意。无法将文件更改存储回资源。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:02:54.340

您可以使用：

```
 class ResourceHelper
    {
           public static void MakeFileOutOfAStream(string stream, string filePath)
            {
                using(var fs = new FileStream(filePath,FileMode.Create,FileAccess.ReadWrite))
                {
                    CopyStream(GetStream(stream), fs);
                }
            }

            static void CopyStream(Stream input, Stream output)
            {
                byte[] buffer = new byte[32768];
                int read;
                while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
                {
                    output.Write(buffer, 0, read);
                }
            }
 static Stream GetStream(string stream)
        {
             return Assembly.GetExecutingAssembly().GetManifestResourceStream(stream));

        }
    } 
```

并使用流传递您资源的完整名称，即名称空间+资源文件名（evantual 文件夹将被视为名称空间部分）区分大小写。请记住将项目中的文件标记**为嵌入式资源**。

# nhibernate - 如何在 nhibernate 中使用 groupby 获取不同行的计数？

> ID：10517572
> 
> 赞同：0
> 
> 时间：2012-05-09T13:53:02.910
> 
> 标签：nhibernate, fluent-nhibernate

我必须在 nhibernate 中编写下面的查询。

select count(*),Class from Student group by Class

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:58:19.830

可能是这样的吗？

```
ProjectionList projList = Projections.ProjectionList();
projList.Add(Projections.GroupProperty("Class"));
projList.Add(Projections.Count("Id"));
var result = session.CreateCriteria<Student>()
                            .SetProjection(projList)
                            .List(); 
```

# jpa - JPA 查询“优化”

> ID：10517577
> 
> 赞同：0
> 
> 时间：2012-05-09T13:53:14.980
> 
> 标签：jpa, ejb, eclipselink

我刚刚打开了 JPA (EclipseLink) 数据库中的查询日志记录，并目睹了 JPA“优化”和“缓存”的恐怖。

例如，执行如下简单的 JPA 查询：

```
 SELECT p FROM Picklist p; 
```

... 将导致 JPA 对数据库执行一百万次 SQL 查询（每条记录一个查询，因此从 id=[...] 的选项列表中选择 *）。Picklist 是一个简单的实体！

为什么它不执行 SELECT * FROM Picklist 而只是在内存中执行其他所有操作（填充持久性上下文或其他）？

它是否需要一些特殊的开关来告诉它这样做？为什么它会这样工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:44:47.737

JPA 提供了许多不同的查询优化技术，但如果您不使用其中任何一种，则可能会导致不必要的查询。

我假设您正在查看 Picklist 关系的查询，尽管您使用的确切查询、Picklist 的映射和 SQL 会有所帮助。

了解如何优化关系

见， [http://java-persistence-performance.blogspot.com/2010/08/batch-fetching-optimizing-object-graph.html](http://java-persistence-performance.blogspot.com/2010/08/batch-fetching-optimizing-object-graph.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:21:59.013

首先你需要检查 JPA Query

```
SELECT Picklist p FROM Picklist p; 
```

这应该是

```
SELECT p FROM Picklist p; 
```

其次，您需要了解您不能进行`Select *`查询，因为当您执行该类型的查询时，您会带来更多的信息，而不仅仅是列。

第三请记住，Hibernate 需要将查询翻译到每个数据库，以提供该功能可能会降低一些性能，因为它是 Sql Native 从来没有随着每个新版本以及如果您需要极高的性能而得到改进。使用您完全可以使用和处理记录的普通 Sql 查询

# android - 使用画布绘制文本

> ID：10517578
> 
> 赞同：-1
> 
> 时间：2012-05-09T13:53:18.183
> 
> 标签：android, canvas

如何清除画布上呈现的文本？我想用 method 清除画布上写的文字`canvas.drawText()`。每次都应该更新文本，就好像我在设置一个显示时间的数字时钟一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:46:43.837

如果您在视图的 onDraw 中，则每次调用该方法时都会清除您获得的画布。

如果您有表面视图或位图支持的画布，只需重绘背景。例如，如果您的背景是白色的，那么`fontCanvas.drawARGB(255, 255, 255, 255);`

本质上，不要认为你的画布是一张纸。你越接近硬件，它就越不像一张纸。如果你摆脱这种想法，这些问题的答案将是显而易见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:57:50.303

尝试用新的油漆重新绘制，例如：

```
Paint paint = new Paint();    
paint.setXfermode(new PorterDuffXfermode(Mode.CLEAR)); 
```

有关 porterDuff 模式的更多信息：[https ://softwyer.wordpress.com/2012/01/21/1009/](https://softwyer.wordpress.com/2012/01/21/1009/)

# c# - 使用 MVC 清理和验证 ViewModel，如何？

> ID：10517584
> 
> 赞同：4
> 
> 时间：2012-05-09T13:53:34.917
> 
> 标签：c#, asp.net-mvc, nhibernate, domain-driven-design, viewmodel

我有一些关于如何使用 asp.net mvc 的最佳实践来实现 DDD 原则的最佳方式的问题。实际上，我想知道，您是如何进行验证的（在视图模型或模型中）？

我有这个 DomainModel 和 ViewModel：

```
public class Product {
   public int Id { get; protected set; }
   public string Name { get; set; }
   public decimal Price { get; set; }
   public int Stock { get; set; }
   public Category Category { get; set; }
   public Supplier Supplier { get; set; }
   public string Code { get; set; } // it has to be unique
}

public class ProductViewModel {
   public int Id { get; set; }
   /* other simple properties */
   public int IdCategory { get; set; }
   public int IdSupplier { get; set; }
   public string Code { get; set; } 
} 
```

行。该模型使用 NHibernate 映射并且工作正常。我想知道，是否更好地为 ViewModel 或 DomainModel 创建验证？我的意思是，当我在 asp.net mvc 的操作上收到 ViewModel 时，我会验证它，但是如果我在 viewmodel 上添加业务规则，我不会做错吗？我问这个是因为我知道最好将这些业务验证添加到我的域中，但是我是否应该在我的帖子上进行两次验证，然后再坚持？看看我对 asp.net mvc 的操作：

```
[Post]
public ActionResult Update(ProductViewModel viewModel) {

  // what kind of validations should I do here? 
  if (invalid) {
    return View(viewModel);
  } 

  // how can I return the errors to my View?

  // Is here any best pratice to transform from ViewModel to Domain instance?
  Product product = ???

  _repository.Save(product);

  return RedirectToAction("Index");
} 
```

有人可以通过代码做一个例子吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T14:02:34.417

我想说您应该在两个级别上执行验证。在您的视图模型中，您将进行表面验证，例如此字段是必需的，并且此字段必须采用以下格式，而在您的业务层中，您应该验证业务规则，例如用户名已经存在，...

因此，让我们举一个典型 POST 操作的示例：

```
[HttpPost]
public ActionResult Update(ProductViewModel viewModel) 
{
    if (!ModelState.IsValid) 
    {
        // The view model is invalid => redisplay the view in order
        // to show the error messages
        return View(viewModel);
    }    

    // at this stage we know that the view model is valid =>
    // now we can map it to a domain model that we want to update:

    Product product = Repository.GetModel(viewModel.Id);

    // I use AutoMapper (http://automapper.org/) to map between 
    // my domain models and my view models. In this example
    // we are updating only the properties of the domain model
    // that were part of the view model and that the user is allowed
    // to modify in this view => we are merging
    Mapper.Map<ProductViewModel, Product>(viewModel, product);

    // now we can process the domain model
    Repository.Update(product);

    return RedirectToAction("Index");
} 
```

如果您想处理域模型错误，则有不同的可能性。我个人喜欢这种`TryXXX`模式：

```
string errorMessage;
if (!Repository.TryUpdate(product, out errorMessage))
{
    // the business validation failed => add the error message to the modelstate
    // and redisplay the view
    ModelState.AddModelError("", errorMessage);
    return View(viewModel);
} 
```

另一种可能是将`ModelState`字典传递给业务层，让它直接添加模型状态错误。这样，您可以再次简单地`if (!ModelState.IsValid)`在视图中进行测试，以了解业务层中是否出现问题并重新显示相同的视图以显示错误消息。

就视图模型中的验证而言，有不同的方法。您可以使用 Microsoft 的*官方*方式，即使用验证属性装饰您的视图模型属性。例如：

```
public class ProductViewModel 
{
    [Required]
    public string Foo { get; set; }

    ...
} 
```

我个人不使用这些属性。我发现它们非常有限，尤其是当您想对依赖属性等进行更复杂的验证时。出于这个原因，我使用[了 FluentValidation.NET](http://fluentvalidation.codeplex.com/)，它与 ASP.NET MVC[很好地集成](http://fluentvalidation.codeplex.com/wikipage?title=mvc&referringTitle=Documentation)，并允许我轻松地对我的验证规则进行[单元测试。](http://fluentvalidation.codeplex.com/wikipage?title=Testing&referringTitle=Documentation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:19:44.697

应用于您的视图模型的验证规则不一定与您的域模型相同。通常，您会检查视图模型是否存在输入错误，并检查域模型是否存在违反业务规则的情况。两个模型中的一些验证规则是相同的，这很好，因为您的域模型独立于视图模型，反之亦然。

# android - 如何处理数据库异常：软件设计

> ID：10517585
> 
> 赞同：0
> 
> 时间：2012-05-09T13:53:34.940
> 
> 标签：android, exception-handling, software-design

我正在开发 Android 3.1 及更高版本的应用程序，但这个问题并不特定于特定环境。

我有三层：活动（表示）、模型（表示数据库表的对象）和数据（访问 SQLite 数据库的类）。

我所有的数据库方法都是这样的：

```
public void insertUserAnswers(ArrayList<UserAnswer> answers)
{
    try
    {
        if ((db == null) || (!db.isOpen()))
            this.open();
    }
    catch (Exception e) {
        e.printStackTrace();
    }
    finally
    {
        this.close();
    }
} 
```

如您所见，我捕获了每个异常并且我没有通知任何人，因为（这是我的问题）我不知道该怎么做。

如何通知它是 sql 命令的错误？有什么模式可以做到这一点吗？

我想我可以返回一个值来指示或不缓存异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:19:32.867

首先，不要像这样捕获所有异常，很难知道出了什么问题并通知用户究竟出了什么问题。而是做这样的事情：

```
try {
    operationThatThrowsMultipleExceptions();
}
catch (ExceptionTypeOne e){
    // do something here
}
catch (ExceptionTypeTwo e){
    // do something here
}
catch (Exception e){
    // do something here
} 
```

你会看到我们`Exception`在最后捕捉到了，有点像捕捉所有类型的东西，以确保我们没有错过任何东西。

就您的模型而言，我这样做的方式是确保所有数据层对象都将其异常抛出到表示层（活动），以便活动可以处理它。在表示层，您可以选择如何向用户展示错误：通常以漂亮、信息丰富的错误消息的形式。不过，情况可能并非总是如此。例如，如果您正在填充模型并点击空指针，因为数据库没有返回，那么在数据层发现问题并且不填充模型。然后，当您的表示层开始展示模型时，那里不会有任何东西，这就是您的表示层可以决定如何将其传达给用户的点。

总结：除非真的有必要，否则不要在数据层捕获异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:02:52.953

对，对不起，我没有正确阅读你的问题，所以改变了我的答案。

这实际上取决于您期望的异常类型，我看到您取消了所有异常，但是您应该能够将其范围缩小到特定异常，您可以让调用者处理异常，然后您可以显示祝酒词或其他内容如果异常是可恢复的，将帮助用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:16:35.863

一般来说，如果您打算对错误采取行动，或允许其他对象对其采取行动（优雅降级左右），那么返回合适的返回值似乎是正确的。然后该`insertUserAnswers`方法可以返回一个数值，例如：

```
0: "Success"
1: "IO error (file system not accessible or so)"
2: "SQL error (invalid insert query, invalid arguments, ...)" 
```

这可能需要您捕获比基础更具体的异常`Exception`，以便确定出了什么问题。

另外：作为用户，我不关心有关错误的技术细节。我什至不确定我是否对是否有错误感兴趣。因此，如果您问我，显示错误对话框不一定是“对错误采取行动”。如果这是您打算做的唯一事情（显示错误对话框），那么我建议您不要打扰返回值并完全跳过错误通知。

您应该始终以某种方式记录错误（如果您愿意，可以通过`Log.e("MyTag", "My log message")`或您自己的日志基础设施）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T14:23:43.223

您可能想看看为`SQLiteOpenHelper`您打开数据库（一次或很少）。`ContentProvider`如果您希望多个进程或应用程序能够访问数据，请结合使用。

然后确保您的代码不会产生错误（在 SQLite 级别等），如果您忘记了某些内容，只需让应用程序崩溃 - 这是知道您做错了什么的最安全方法，还允许您通过 Play/Market 报告错误。

*仅当您希望*在某些情况下（如文件 I/O）产生错误的代码并且您知道如何处理它们时，捕获异常才是好的。

捕获所有内容只会隐藏您的错误并使其难以检测（用户必须不断监视日志消息左右）。如果您的应用程序没有崩溃但也不可用，因为它需要数据库才能运行，您可能会让用户感到困惑，而不仅仅是让它崩溃。

并简单地将消息打印到 logcat 使用

```
catch (Exception e) {
    // either 
    Log.w("TAG", e);
    // or
    Log.e("TAG", "some message", e);
} 
```

这将打印带有标签/日志级别的消息，您可以选择而不是使用`W/System.err`

# objective-c - 创建 UIImage 抠图

> ID：10517589
> 
> 赞同：0
> 
> 时间：2012-05-09T13:53:50.710
> 
> 标签：objective-c, ios, xcode, uiview, uiimageview

我有一个`UIView`包含 2 `UIImageViews`- 一个框架和框架后面的图片。框架不是矩形 - 它是不规则的形状。用户可以操作框架后面的图片（缩放、旋转和平移），完成后，我想捕捉框架内图片的剪切 - 而不是图片和框架一起。有没有办法我可以做到这一点？

我已经设法将图片和框架拼合为一个图像，如下所示，但我只想要图片，如果成功提取，它将具有框架形状的边框。

```
- (IBAction)renderPhoto:(id)sender {
    //Combine the layers into a single image
    UIView *canvas = [[[sender superview] subviews] objectAtIndex:0];
    UIGraphicsBeginImageContext(canvas.bounds.size);
    [canvas.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *combinedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:04:11.873

用我这个方法..

```
- (UIImage*)imageByCropping:(UIImage *)imageToCrop toRect:(CGRect)rect
{

    UIGraphicsBeginImageContext(photo.frame.size);/// use your screen or photo frame
    [photo.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *screenshot = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    CGImageRef imageRef = CGImageCreateWithImageInRect([screenshot CGImage], rect);
    UIImage *cropped = [UIImage imageWithCGImage:imageRef];

    /*    no origin .....
    UIGraphicsBeginImageContext(tempview.frame.size);
    [[self.photo layer] renderInContext:UIGraphicsGetCurrentContext()];   
    cropped= UIGraphicsGetImageFromCurrentImageContext();    
    UIGraphicsEndImageContext(); 
    */
        return cropped;
} 
```

希望，这对你有帮助.... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:16:37.283

您可以从您的框架创建一个蒙版，并将此蒙版应用于目标图像，以从目标图像上切下框架。或者，根据您最终使用最终图像的方式，在执行绘图时使用框架剪辑上下文可能更简单。

本主题涵盖了所有内容：[https ://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_images/dq_images.html#//apple_ref/doc/uid/TP30001066-CH212-TPXREF101](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_images/dq_images.html#//apple_ref/doc/uid/TP30001066-CH212-TPXREF101)

第二个选项（剪切上下文）在[通过剪切上下文掩蔽图像下](https://developer.apple.com/library/mac/documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_images/dq_images.html#//apple_ref/doc/uid/TP30001066-CH212-CJBHDDBE)。

# vb.net - 无法通过数值比较从 vb 中的访问数据库中进行选择

> ID：10517592
> 
> 赞同：1
> 
> 时间：2012-05-09T13:53:57.540
> 
> 标签：vb.net, ms-access

我无法从 vb 中的访问数据库中检索。这是我指出问题的代码：

```
`cmd.CommandText = "SELECT  distinct(brought_date) from brought_coffee  where crop_year =? order by brought_date"
        cmd.Parameters.Add("@ccy", OleDb.OleDbType.Integer).Value = Convert.ToInt32(cyrNote.SelectedItem.Trim)
        myData = cmd.ExecuteReader
        'MessageBox.Show(cyrNote.SelectedItem.Trim)

        While myData.Read()
            dte = myData(0)
            dtComb.Items.Add(dte)

        End While
        MessageBox.Show("dt1" & dte)` 
```

在我看来，我在这里遇到的问题似乎是占位符在`crop_year =?`哪里`?`，占位符`Convert.ToInt32(cyrNote.SelectedItem.Trim)`是我从组合框中获得的值，`cyrNote`并尝试将其转换为整数，`Convert.ToInt32()`以便可以将其与`crop_year`定义为的数据库值进行比较数据库中的整数。但是这里的问题是选择返回null。我试图`?`用已知值（如“2011”）替换占位符，它返回了一个值。这对我来说意味着我的比较`crop_year=Convert.ToInt32(cyrNote.SelectedItem.Trim)`是负面的，但我期待一些积极的东西。我试图用谷歌搜索如何转换为整数，这是我能得到的最好的。有人可以告诉我如何可以很好地完成这种转换，或者换句话说，我的代码可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:31:11.430

我认为这个问题与命名参数无关。相反，*SelectedItem*是对象类型。你应该使用

```
cyrNote.SelectedText 
```

或者

```
cyrNote.Text 
```

无论哪个有效（取决于您的组合框实现）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:39:02.727

尝试在 SQL 语句中替换`?`为。`@ccy`您需要使用命名参数或序数参数，但您的 SQL 文本需要序数，并且您的变量注入被命名为...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:53:36.720

由于访问时没有命名参数，请尝试在发送时删除名称。

```
cmd.Parameters.Add("", OleDb.OleDbType.Integer).Value = Convert.ToInt32(cyrNote.SelectedItem.Trim) 
```

应该的伎俩。

此外，如果可以的话，更改代码以使用：

```
cmd.Parameters.AddWithValue("", Convert.ToInt32(cyrNote.SelectedItem.Trim)); 
```

使用访问权限时，您无需指定任何内容。

# xml - VB.NET Trim 不适用于包含 vbLf 的 XML InnerText？

> ID：10517599
> 
> 赞同：1
> 
> 时间：2012-05-09T13:54:35.610
> 
> 标签：xml, vb.net

如果我采用以下 XML：

```
<security>
<user>user</user>
<password>pass   </password>
</security> 
```

并在密码节点上调用该`Trim()`方法`InnerText`，它会正确修剪它，但是如果我将片段修改为如下所示：

```
<security>
<user>user</user>
<password>pass 
```

我无法使该`Trim()`方法正常工作，删除空格后通过返回为`pass`（最后有一个空格）。我查看了监视窗口，当我双击该值时，它显示为：

`"pass" & vbLf & ""`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:00:52.590

String.Trim 方法从不删除换行符。它只删除空格。如果要删除所有换行符，只需执行以下操作：

```
InnterText.Replace(Environment.NewLine, "").Trim() 
```

但是，这将删除文本开头或中间的任何换行符。但是，也许这就是你想要的，无论如何。

或者，您可以使用 Trim 的重载传递要删除的字符数组（但它只会从开头和结尾删除，而不是从中间删除）：

```
InnterText.Trim(Environment.NewLine.ToCharArray()).Trim() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:06:05.120

根据定义，根据[Char.IsWhiteSpace](http://msdn.microsoft.com/en-us/library/t809ektx%28v=vs.90%29.aspx)的页面，换行符、制表符和回车符都是空白字符。它还需要注意的是，此函数返回 true 并不意味着它将被 Trim 删除。

您可以使用 Replace 或将[Char 数组传递给 Trim](http://msdn.microsoft.com/en-us/library/d4tt83f9%28v=vs.90%29.aspx)以删除要删除的字符。

# html - 我的图片不显示？（新手Q）

> ID：10517603
> 
> 赞同：0
> 
> 时间：2012-05-09T13:54:53.427
> 
> 标签：html, image

文件结构：

![文件结构](../Images/4ccf91477e8d11f1a42c0e8d632b2fb8.png)

代码 ：

```
 <html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Metnik EL Logo</title>
    </head>
    <body>
        <img src ="/images/metnikElHeaderLogo.jpg" alt="metnikHeadLogo" />
    </body>
</html> 
```

真的不明白我做错了什么。顺便说一句，尝试使用 ../images 并尝试设置高度和宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:58:32.620

从 index.jsp 中，图像的路径应该是

```
<img src ="images/metnikElHeaderLogo.jpg" alt="metnikHeadLogo" /> 
```

从“页面”文件夹中的其他文件中，您将需要：

```
<img src ="../images/metnikElHeaderLogo.jpg" alt="metnikHeadLogo" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:08:19.787

您使用图像的绝对路径，在您的情况下，您必须使用相对路径（[进一步阅读](http://www.uvsc.edu/disted/decourses/dgm/2120/IN/steinja/lessons/06/06_04.html)）

在您的情况下，您必须使用此表示法

```
<img src ="./images/metnikElHeaderLogo.jpg" alt="metnikHeadLogo" /> 
```

哪里：

**"./"** — 相对路径开始字符串，表示与写入字符串的文件位于同一文件夹中的路径

**同一文件夹中的**“images/”子文件夹****

# android - 谁能告诉我一个类是否扩展了视图而不是我如何在其中调用 xml 以在图像底部显示按钮

> ID：10517606
> 
> 赞同：0
> 
> 时间：2012-05-09T13:55:04.220
> 
> 标签：android

**这是我的 MainActivity 哪个 Activity**

```
public class MainActvity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(new BitmapView(this));
} 
```

**我必须在这张图片的底部显示一个带有一些按钮的 Xml 文件**

```
class BitmapView extends View {
    public BitmapView(Context context) {
        super(context);``
    }

    @Override
    public void onDraw(Canvas canvas) {
        Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.icon);
        canvas.drawColor(Color.BLACK);
        canvas.drawBitmap(bmp, 10, 10, null);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:01:47.223

不建议这样做，因为按钮不负责（我的意思是，当它们被按下时它们不会被点击也不会改变它们的状态；事实上，当按下按钮时，由你来检测） .

无论如何，如果这是你想要的，你可以这样做：

```
private void drawButton(Canvas canvas, float left, float right, Button button) {
    canvas.translate(left, right);
    button.draw(canvas);
    canvas.translate(-left, -right);
} 
```

您可以在 onDraw 方法中调用它。通常，您必须手动实例化按钮。此外，您可以绘制整个视图......因此，在这种情况下，您必须实例化它们或膨胀它们；然后你只需调用它的`draw`方法传递你得到的画布`onDraw`。

# facebook-fql - 群组成员总数

> ID：10517610
> 
> 赞同：0
> 
> 时间：2012-05-09T13:55:19.360
> 
> 标签：facebook-fql, facebook-group

我有这个代码。我试图显示加入某个群组的总人数。

```
perPage = 500
    for count in range(100):
        res = fql('SELECT uid FROM group_member WHERE gid = 457030854323270 limit 500 offset 500' % (fbUserId, perPage, perPage * count))
        if len(res) == 0:
            break
        friends += len(res) 
```

它需要一个循环吗？虽然不知道怎么写...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:57:31.623

编辑：这是 facebook 我真的不知道它是如何工作的，你可以试试这个。如果有错误请在评论中告诉我，我将删除它。

你能不只是

```
SELECT Count(uid) from group_member WHERE gid = 457030854323270 limit 500 offset 500' % (fbUserId, perPage, perPage * count)) 
```

那将返回结果总数？

# linux - Linux 上的文件中缺少 EOL 字符

> ID：10517614
> 
> 赞同：2
> 
> 时间：2012-05-09T13:55:31.570
> 
> 标签：linux, bash, shell, sed

我有一个在最后一行末尾没有 EOL 的文件。当我从中读取的 bash 脚本没有处理最后一行时，我注意到了这一点。

我是这样读的：

```
while read LINE
do
    ...
done <thefile 
```

该文件已提供给我，因此在它登陆我的系统之前我无能为力（Linux - OpenSuSE 10.2）。我确实`dos2unix`在文件上运行，但这并不能解决丢失的 EOL。

我见过几个涉及`vi`and的解决方案`ed`，但它们有点笨拙，我希望有一个更整洁的解决方案，也许使用`sed`，我可以在我的 bash 脚本中使用？

奇怪`vi`的是，当我归档并执行 a时，我可以在最后一行的末尾`:set list`看到一个“ ”。`$`我原以为它会丢失，因为我认为“ `$`”代表`\n`。或者换行符和换行符之间可能有区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T15:04:46.933

如果文件还没有换行符（并且不是空白），这是一个在文件末尾添加换行符的选项：

```
if [ -s "$thefile" ] && [ "$(tail -c1 "$thefile"; echo x)" != $'\nx' ]; then
    echo >>"$thefile"
fi 
```

或者，这里有一个简单的方法来修改循环以处理最后一个换行符之后的任何内容：

```
while read LINE || [ -n "$LINE" ]
do
... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T13:56:49.377

这将在文件末尾添加一个换行符：

```
echo >> thefile 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-09T14:03:51.577

[`sed -i -e '$a\' "path"`](https://github.com/l0b0/tilde/blob/64f57adb079fbfc857430eba1d25809a72768ca9/.bash_aliases#L482)只有在没有换行符的情况下才会在 EOF 处添加换行符（跳转后的说明）。

如果要处理在 EOF 处*可能*没有换行符的文件，则必须检查`read`循环后是否存在输出变量：

```
while read LINE
do
    ...
done <thefile

if [ "${LINE+defined}" = defined ]
then
    ...
fi 
```

不是很优雅，但至少您不必在处理之前修改输入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T14:08:39.880

几个实用程序在输出末尾添加换行符。例如，您可以使用 cut 并执行以下操作：

```
cut -b 1- < thefile | 
while read LINE; do ...; done 
```

（可能不是所有 cut 的实现都像我描述的那样，但很多都这样做。）

罗伯特的解决方案可能是最简单的，如果你不能真正改变文件，你可以这样做：

```
{ cat thefile; echo; } | while read ... 
```

请注意，将 while 放入管道中会将其放入子进程中，这可能会对脚本产生影响（例如，在循环中进行的分配不会持续存在），因此您可能需要使用临时文件或命名管道来修改数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T09:55:09.287

`[ -n "$l" ]``[[ $l ]]`可以在 bash中替换。`[[ $l ]]`相当于`[[ -n $l ]]`。`$l`不必引用，因为在内部不执行分词和路径名扩展`[[`。

```
$ printf 'x\ny' | while IFS= read -r l; do echo "$l"; done
x
$ printf 'x\ny' | while IFS= read -r l || [[ $l ]]; do echo "$l"; done
x
y 
```

`$(tail -c1)`仅当文件以换行符结尾或为空时才为空。`$()`从末尾删除换行符，`tail -c1`对于空文件为空。`-s`测试文件是否存在且不为空。

```
f=/tmp/some\ file
[[ -s $f && $(tail -c1 "$f") ]] && printf \\n >> "$f" 
```

`sed -n p`（不打印，打印）是`sed '$a\'`. BSD seds 需要`-i ''`而不仅仅是`-i`.

```
sed -i '' -n p *.txt 
```

# .net - xUnit.Net - 是否可以忽略整个命名空间？

> ID：10517615
> 
> 赞同：0
> 
> 时间：2012-05-09T13:55:38.147
> 
> 标签：.net, testing, xunit.net

在我的测试程序集中，我经常有一个 Spikes 目录，我在其中放置了......嗯......项目早期的尖峰代码。

我很少维护甚至运行这些测试，因为它们通常与连接到其他系统和关注其他测试涵盖的用例有关。

是否可以在 xUnit 中将整个命名空间标记为忽略，还是应该删除代码？

# java - 在 Java 中加入远程路径

> ID：10517617
> 
> 赞同：3
> 
> 时间：2012-05-09T13:55:43.050
> 
> 标签：java, path

我正在使用 Apache (commons-net) 提供的 FTP 库。我想检查 FTP 服务器上是否存在文件，所以我使用以下`listFiles`方法`FTPClient`：

```
ftpClient.listFiles(remoteFileDir + "\\" + fileName); 
```

当前目录为 FTP 服务器根目录。因此， 的值`remoteFileDir`是相对于该根目录的路径。

我的问题涉及远程目录路径和文件名之间的合并。正确的方法是什么？对于本地文件，我会这样做：

```
File file = new File(remoteFileDir,fileName); 
```

但是在这里它不起作用，因为当我调用时`file.getAbsolutePath()`，我得到了本地当前目录中文件的绝对路径，这不是我想要的。另外，我想合并是根据我当地的环境完成的。

PS：我看了[如何在远程机器上确定路径？](https://stackoverflow.com/questions/3026500/how-are-paths-determined-on-a-remote-machines)但这对我没有帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:14:22.970

我找到了FTPClient的方法changeWorkingDirectory。

```
ftpClient.changeWorkingDirectory(remoteFileDir);
FTPFile[] names = ftpClient.listFiles(fileName); 
```

在这种情况下，我不必指定分隔符。

# c# - XPATH EXPRESSION：删除介于两者之间的节点

> ID：10517618
> 
> 赞同：0
> 
> 时间：2012-05-09T13:55:43.030
> 
> 标签：c#, xpath

我有这个 xml 文件：

```
 <Item Text="Reports" Navigateurl ="Reports/Default.aspx" Select="true">
  <Group>
    <Item Text="Customers" NavigateUrl="Reports/Customers/Default.aspx" Select="true">
      <Group>
        <Item Text="Customers" NavigateUrl="Reports/Customers/CustomerList.aspx" 
            Select="true"   />
        <Item Text="Customer Products" 
         NavigateUrl="Reports/Customers/CustomersProducts.aspx" Select="true" />
        <Item Text="Customer Measurements" 
        NavigateUrl="Reports/Customers/CustomerLocationMeasurements.aspx" Select="true"  />
        <Item Text="Customer Groups" NavigateUrl="Reports/Customers/CustomerGroups.aspx" 
         Select="true"/>
        <Item Text="Customer Outages" NavigateUrl="Reports/Customers/CustomerOutages.aspx" 
         Select="true" />
      </Group>
    </Item>
    <Item Text="Rules" NavigateUrl="Reports/Rules/Default.aspx" Select="true" >
      <Group>
        <Item Text="Customer Product Rules" 
         NavigateUrl="Reports/Rules/CustomerProducts.aspx" Select="true"/>
        <Item Text="Customer Product Rules Event Limits" 
          NavigateUrl="Reports/Rules/CustomerProductEventLimits.aspx" Select="true" />
        <Item Text="Customer Product  Rules Curtailable Days/Hours" 
         NavigateUrl="Reports/Rules/CustomerProductCurtailableDaysHours.aspx" 
          Select="true"  />
      </Group>
    </Item>
     </Group>
  </Item> 
```

所以，当我使用这个 XPATH 表达式时，

```
 XmlDataSource XmlDataSource1 = new XmlDataSource();
        XmlDataSource1.DataFile = "~/Menu.xml";
        XmlDataSource1.XPath = "//Item[@Text ='Reports']/Group/Item                  
                                  [@Select='true']       
        XmlDataSource1.DataBind();
        SiteMap1.DataSource = XmlDataSource1; 
```

我得到这个输出：

```
 Customers
            Group
               Customer Pages
          Rules
             Group
               Rules Pages 
```

但我不希望 Group 标签显示在输出中。你能告诉我这是如何实现的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:30:21.127

**XPath 是一种*查询*语言，用于从 XML 文档中选择节点或提取其他数据。因此它不能修改文档的结构——例如删除一个节点**。

这种处理——称为转换，可以很容易地用 XSLT 和（不那么容易）用 XQuery 完成。

# html - 跟踪鼠标位置以在画布 HTML5 中打孔

> ID：10517626
> 
> 赞同：0
> 
> 时间：2012-05-09T13:55:56.653
> 
> 标签：html, video, canvas, position, mouse

也许我正试图让我的技能变得有点复杂。我想做的是：

*   在画布 0 (z-index:1) 上播放视频
*   在画布 1 (z-index:2) 上播放视频
*   在画布2上做一个圆孔
*   使孔跟随鼠标位置（在画布上）；

我写了这个：

```
<!DOCTYPE HTML><html><head>

<style>
body {
    margin: 0px;
    padding: 0px;
}
#myCanvas {
    border: 1px solid #9C9898;
    height:400px;
    width:700px;
    position:absolute;
    top:0px;
    left:0px;
}
#myCanvas1 {
    border: 1px solid #9C9898;
    height:400px;
    width:700px;
    position:absolute;
    top:100px;
    left:0px;
}
#BIG{
    height:800px;
    width:800px;
    position:absolute;
    top:0px;
    left:0px;       

}
#v{
    position:absolute;
    top:600px;
    height:40px;
    width:100px;
}
#v1{
    position:absolute;
    top:500px;
    height:0px;
    width:0px;
}
</style>

<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>

    var centerX= 200;
    var centerY= 200;

document.addEventListener('DOMContentLoaded', function(){

    },false);

        function draw(v,c,w,h,v1,c1, radius, centerX, centerY) {

            if(v.paused || v.ended){
                v1.pause();
                return false;
            }

            c.beginPath();
            c.arc(centerX, centerY, radius, 0, 2* Math.PI, true);
            c.clip();

            c.drawImage(v,0,0,w,h);

            c1.drawImage(v1,0,0,w,h);
            setTimeout(draw,20,v,c,w,h,v1,c1, radius, centerX, centerY);

        }

        function getMousePos(canvas, evt){
            // get canvas position
            var obj = canvas;
            var top = 0;
            var left = 0;
            while (obj && obj.tagName != 'BODY') {
                top += obj.offsetTop;
                left += obj.offsetLeft;
                obj = obj.offsetParent;
            }

            // return relative mouse position
            var mouseX = evt.clientX - left + window.pageXOffset;
            centerX=mouseX;
            var mouseY = evt.clientY - top + window.pageYOffset;
            centerY=mouseY;
            return {
                x: mouseX,
                y: mouseY
            };
        }

        function writeMessage(canvas, message ,x){
            var context = canvas.getContext('2d');
            context.clearRect(0, 0, canvas.width, canvas.height);
            context.font = '18pt Calibri';
            context.fillStyle = 'black';

            context.fillText(x, 10, 25);
        }

        window.onload = function(){

                var v = document.getElementById('v');
                var v1=document.getElementById('v1');
                var canvas = document.getElementById('myCanvas');
                var context = canvas.getContext('2d');
                var canvas1 = document.getElementById('myCanvas1');
                var context1 = canvas1.getContext('2d');

                var cw = Math.floor(canvas.clientWidth );
                var ch = Math.floor(canvas.clientHeight );

                canvas.width = cw;
                canvas.height = ch;
                canvas1.width = cw;
                canvas1.height = ch;

                var radius = 70;

                 canvas.addEventListener('mousemove', function(evt){
                         var mousePos = getMousePos(canvas, evt);
                        var message = "Mouse position: " + mousePos.x + "," + mousePos.y;
                        writeMessage(canvas, message, mousePos.x);

                    }, false);

                v.addEventListener('play', function(){

                    draw(this,context,cw,ch, v1, context1, centerX, centerY, radius);

                    v1.play();

                    },false);

        };
        </script>
    </head>
    <body>
        <div id="BIG">
            <canvas id="myCanvas1" width="1000" height="1000"></canvas>
            <canvas id="myCanvas" width="1000" height="1000"></canvas>

        </div>
        <video id="v1" >
            <source src=video.webm type=video/webm>
            </video>
            <video id="v" controls >
                <source src=video.mp4 type=video/mp4>
                </video>

                <span>

                </span>
            </body>
            </html> 
```

但我做错了什么，因为它会造成洞，但洞没有跟随指针。有任何想法吗？我已准备好从头开始，但我需要一些帮助。太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T01:46:52.793

这是我找到的解决方案：`

```
<style>
body {
    margin: 0px;
    padding: 0px;
    background:#010101;
    color:#EEE;
    height:700px;
    text-align:center;
}
#title{
    position:relative;
    font-family: 'Lobster', cursive;
    text-shadow: 1px 1px 3px #888;
}
#Regia{
    position:relative;
    font-family: 'Lobster', cursive;
    top:425px;
}
#myCanvas {
    border: 1px solid #9C9898;
    height:400px;
    width:700px;
    position:absolute;
    top:0px;
    left:0px;
}
#myCanvas1 {
    border: 1px solid #9C9898;
    height:400px;
    width:700px;
    position:absolute;
    top:0px;
    left:0px;
    -webkit-box-shadow: 5px 5px 54px -10px #555; /* Saf3-4, iOS 4.0.2 - 4.2, Android 2.3+ */
              box-shadow: 5px 5px 54px -10px #555; /* Opera 10.5, IE9, FF4+, Chrome 6+, iOS 5 */
}
#BIG{
    height: 500px;
    width: 700px;
    position: relative;
    top: 0px;
    left: 50%;
    margin-left: -350px;
}
#v{
    position:relative;
    top:425px;
    height:0px;
    width:700px;
}
#v1{
    position:absolute;
    top:500px;
    height:0px;
    width:0px;
}
</style>
<script>

    var centerX= 20;
    var centerY= 20;

document.addEventListener('DOMContentLoaded', function(){

    },false);

        function draw(v,c,w,h,v1,c1, radius) {

            if(v.paused || v.ended){
                v1.pause();

            }
            c.save();
            c.clearRect(0, 0, 700, 400);
            c.globalAlpha=1;                
            c.beginPath();
            c.arc(centerX, centerY, radius, 0, 2* Math.PI, false);              
            c.clip();
            c.drawImage(v,0,0,w,h);         
            c.restore();                
            c1.drawImage(v1,0,0,w,h);
            setTimeout(draw,33,v,c,w,h,v1,c1, radius);
        }

        function getMousePos(canvas, evt){
            // get canvas position
            var obj = canvas;
            var top = 0;
            var left = 0;
            while (obj && obj.tagName != 'BODY') {
                top += obj.offsetTop;
                left += obj.offsetLeft;
                obj = obj.offsetParent;
            }

            // return relative mouse position
            centerX= evt.clientX - left + window.pageXOffset;
            centerY = evt.clientY - top + window.pageYOffset;

        }

        window.onload = function(){

                var v = document.getElementById('v');
                var v1=document.getElementById('v1');
                var canvas = document.getElementById('myCanvas');
                var context = canvas.getContext('2d');
                var canvas1 = document.getElementById('myCanvas1');
                var context1 = canvas1.getContext('2d');

                var cw = Math.floor(canvas.clientWidth );
                var ch = Math.floor(canvas.clientHeight );

                canvas.width = cw;
                canvas.height = ch;
                canvas1.width = cw;
                canvas1.height = ch;

                var radius = 80;

                 canvas.addEventListener('mousemove', function(evt){
                         getMousePos(canvas, evt);

                    }, false);

                v.addEventListener('play', function(){

                    draw(this,context,cw,ch, v1, context1, radius);

                    v1.play();

                    },false);

        };
        </script>
    </head>
    <body>
        <div id="title"><H1>Test Lente HTML5 - Online</h1></div>

        <div id="BIG">
            <canvas id="myCanvas1" width="400" height="400"></canvas>
            <canvas id="myCanvas" width="400" height="400"></canvas>
            <video id="v" controls="controls" >
                <source src=video0.mp4 type=video/mp4></source>
                    <source src=video0.ogg type=video/ogg></source>
                        <source src=video0.webm type=video/webm><p>Your browser can’t play HTML5 video.</p></source>
                </video>
                <div id="Regia">    <p>Streaming Test</p></div>

        </div>
        <video id="v1" muted="muted" >
            <source src=video1.webm type=video/webm></source>
                <source src=video1.mp4 type=video/mp4></source>
                    <source src=video1.ogg type=video/ogg></source>
            </video>

                <span>

                </span>
            </body>
            </html> 
```

我做了一些明显的改变。现在的步骤是：

*   在画布0上绘制视频0
*   在canvas1中画一个圆
*   剪辑并恢复
*   然后在 canvas1 上绘制视频 1

我知道也许 x 和 y 鼠标变量在全球范围内并不那么礼貌......任何其他好的解决方案都值得赞赏！

`

# linux - REDHAT：无法打开日食

> ID：10517631
> 
> 赞同：1
> 
> 时间：2012-05-09T13:56:28.587
> 
> 标签：linux, eclipse, eclipse-plugin, redhat

我在加载 Eclipse 时遇到问题。它加载工作区显示 Eclipse 窗口。当我尝试工作时，它被空白窗口击中。我在命令提示符下收到此错误。

```
An IOException occurred at scim_bridge_client_imcontext_set_cursor_location ()
The messenger is now down 
```

下面的 .log 文件

```
!ENTRY org.eclipse.core.resources 2 10035 2012-05-09 07:23:18.586
!MESSAGE The workspace exited with unsaved changes in the previous session; refreshing     
workspace to recover changes.

!ENTRY org.eclipse.ui 4 4 2012-05-09 07:23:23.357
!MESSAGE Could not create view: 'org.eclipse.ui.internal.introview'.

!ENTRY org.eclipse.ui 4 0 2012-05-09 07:23:26.278
!MESSAGE Problems occurred restoring workbench.
!SUBENTRY 1 unknown 0 0 2012-05-09 07:23:26.278
!MESSAGE OK
!SUBENTRY 1 unknown 0 0 2012-05-09 07:23:26.278
!MESSAGE OK
!SUBENTRY 1 unknown 0 0 2012-05-09 07:23:26.279
!MESSAGE OK
!SUBENTRY 1 unknown 0 0 2012-05-09 07:23:26.279
!MESSAGE OK
!SUBENTRY 1 org.eclipse.ui 4 0 2012-05-09 07:23:26.279
!MESSAGE Unable to restore perspective: Workspace - Java.
!SUBENTRY 2 org.eclipse.ui 0 0 2012-05-09 07:23:26.279
!MESSAGE Problems occurred restoring perspective.
!SUBENTRY 3 org.eclipse.ui 0 0 2012-05-09 07:23:26.279
!MESSAGE 
!SUBENTRY 2 unknown 0 0 2012-05-09 07:23:26.279
!MESSAGE OK
!SUBENTRY 2 unknown 0 0 2012-05-09 07:23:26.279
!MESSAGE OK
!SUBENTRY 2 unknown 0 0 2012-05-09 07:23:26.279
!MESSAGE OK
!SUBENTRY 2 unknown 0 0 2012-05-09 07:23:26.279
!MESSAGE OK
!SUBENTRY 2 unknown 0 0 2012-05-09 07:23:26.279
!MESSAGE OK
!SUBENTRY 2 unknown 0 0 2012-05-09 07:23:26.279
!MESSAGE OK
!SUBENTRY 2 unknown 0 0 2012-05-09 07:23:26.280
!MESSAGE OK
!SUBENTRY 2 org.eclipse.ui 4 0 2012-05-09 07:23:26.280
!MESSAGE Could not find view: org.eclipse.ui.internal.introview
!SUBENTRY 1 unknown 0 0 2012-05-09 07:23:26.280
!MESSAGE OK 
```

请帮帮我..我不知道该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:27:21.177

从日志看来，您的 Eclipse 安装中缺少一些内容。例如：

```
!MESSAGE Could not find view: org.eclipse.ui.internal.introview 
```

令人震惊。我建议您重新安装 Eclipse。

您收到的消息（您最初显示的）不太可能与 Eclipse 相关，看起来与 vim 的使用有关：

[https://bugzilla.redhat.com/show_bug.cgi?id=466876](https://bugzilla.redhat.com/show_bug.cgi?id=466876)

如果您在安装新的 Eclipse 后还有其他问题，您可以创建一个新工作区并将现有工作区中的所有项目导入其中（确保在导入时选择“复制”选项）。但是，您将丢失工作区设置。

# php - 我如何在 Plesk 中使用 PHP 或 Perl 作为计划任务每 天访问 URL？

> ID：10517632
> 
> 赞同：2
> 
> 时间：2012-05-09T13:56:33.057
> 
> 标签：php, perl, plesk

我在 Windows 上使用共享主机。我需要运行一些代码，这些代码基本上每天只会在我的 .NET 网站上访问一个 URL。

我正在使用 Plesk。我已经看到我可以在 Plesk 中创建计划任务，但是当我询问我的托管服务提供商时，他们说我只能执行 PHP 或 Perl 脚本（而不是 Windows 可执行文件）。

我在 PHP 和 Perl 方面的经验为零。如何使用 Perl 或 PHP 做到这一点？有什么陷阱吗？我是否需要在我的服务器上设置其他任何东西来运行这些脚本，或者只是将这些`.php`或`.perl`文件放在某处？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T13:58:15.743

```
<?php

  file_get_contents('http://yoururl.com');
  exit();

?> 
```

这将向`'http://yoururl.com'`. 如果您不关心响应，那么这是要走的路。您所要做的就是确保您的服务器可以执行 php 代码——我认为可以肯定地说当今的大多数服务器都能够做到这一点。特别是如果它的共享主机。

您可以通过您的 plesk 控制面板将其放在 cron 作业中。

如果您被允许执行系统进程，您也可以将此命令作为 cronjob 来逃避：

```
wget -O - 'http://yoururl.com' 
```

从`wget` [手册页](http://linux.die.net/man/1/wget)-

> **Wget - 非交互式网络下载器。**
> Wget 是一个免费的实用程序，用于从 Web 上非交互式下载文件。它支持 HTTP、HTTPS 和 FTP 协议，以及通过 HTTP 代理检索...

# javascript - 打开新窗口时谷歌分析超时（种类）

> ID：10517636
> 
> 赞同：0
> 
> 时间：2012-05-09T13:56:58.947
> 
> 标签：javascript, asynchronous, google-analytics, google-analytics-api

我正在我们客户的一个网站上实施 GA，我们有一个链接到外部网站的联系按钮。我们想在 GA 中跟踪它的开放情况，这似乎很容易......

```
<a href="http://www.belowgra.de/blah" id="MyLink" target="_contactPage">Click Here!</a>

$('#MyLink').on('click', function(){
    _gaq.push(['_trackPageview', '/contact/blah']);
}); 
```

这就是我们跟踪所有其他页面浏览量等的方式，但由于某种原因，它在这种情况下会阻塞。单击链接时，它会按预期触发并在新窗口中打开。但是，如果您查看 Firebug 的 net 选项卡，对 GA gif 的调用永远不会完成加载（而且，奇怪的是，它似乎并没有超时 - 自从我开始使用谷歌搜索然后写这篇文章以来肯定已经有几分钟了，而且我的测试窗口中的请求仍在运行...）

**编辑**

此外，诸如通过 javascript 打开窗口和阻止默认事件/返回 false 之类的变体也不起作用。我确实找到了一种解决方案：

```
function trackIt(){
    _gaq.push(['_trackPageview', '/contact/blah']);
}

$('#MyLink').on('click', function(event){
    setTimeout(trackIt, 1000);
}); 
```

但我不喜欢将它放在延迟块中的想法 - 虽然我可以尝试减少那里的时间，但我不想冒这种情况不会按预期触发的风险，我会永远不知道（IE7 - 看着你！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:05:44.483

由于链接在新窗口中打开，因此在当前页面被销毁之前完成跟踪 GIF 请求应该没有任何问题。我想知道当打开一个新窗口时 Firebug Net 面板是否有问题 - 您可以尝试使用[Fiddler](http://www.fiddler2.com/fiddler2/)之类的代理，而不是使用 Firebug 检查跟踪调用吗？

# c# - 知道在 C# 中选择了组合框中的哪个选项吗？

> ID：10517640
> 
> 赞同：2
> 
> 时间：2012-05-09T13:57:04.577
> 
> 标签：c#, combobox

我有一个组合框，里面有一个东西列表……列表中的东西数量没有设置。它正在从文件夹中收集数据，您可以在组合框中拥有无限（有点夸张）的项目......我怎么知道用户选择了哪个选项？

我尝试了下面的代码，但它不起作用。我是 C# 的新手，不知道我做错了什么。

```
 comboBox1.SelectedIndex = 0;
        comboBox1.Refresh();

        if(comboBox1.SelectedIndex = 0)
        {
           //setting the path code goes here
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T14:00:00.453

要比较 C# 中的值，您需要使用“==”而不是“=”

```
if(comboBox1.SelectedIndex == 0) 
{ 
   //setting the path code goes here 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T14:00:10.123

使用`ComboBox.SelectedItem` 属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T14:06:26.913

编辑：显然我想要快速回答而不是好的信息，我正在添加更多信息以使其更易于阅读

每次选择更改时都会触发组合框的事件。在设计器中选择您的组合框，然后选择事件选项卡并双击 SelectionChanged。

如果您只需要访问从中选择的内容，可以说单击按钮，您可以按照 Rahul 所述使用

```
Button1_Click(...)
{ 
    MessageBox.Show(comboBox1.SelectedItem.ToString()); 
} 
```

或者如果您只是想访问当前显示在组合框中的文本

```
Button1_Click(...)
{ 
    MessageBox.Show(comboBox1.SelectedText); 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T13:59:34.047

当您使用 = 运算符时，它将右侧设置为左侧，结果是右侧（也设置左侧）。

当您使用 == 运算符时，它会检查右手边是否等于左手边，结果是布尔值（真/假）。

```
int i = 10;
int j = 40;

Console.WriteLine(i == j); // false
Console.WriteLine(i); // 10
Console.WriteLine(j); // 40
Console.WriteLine(i = j); // 40
Console.WriteLine(i); // 40
Console.WriteLine(i == j); // true 
```

所以一开始，您将 SelectedIndex 设置为 0，您可能不想这样做，因为您想知道用户选择了哪个索引。

因此，如果您要更改 SelectedIndex，您将无法知道用户选择了什么。

你需要的条件是这样的：

```
if (comboBox1.SelectedIndex == 0)
{
    // Selected item is item 0
} 
```

当你这样做时：

```
if (comboBox1.SelectedIndex = 0)
{
} 
```

实际发生的是 SelectedIndex 设置为 0，然后编译器尝试将 0 强制转换为布尔值（因为它在 if 条件内），这将导致编译错误。

# svn - 如何计算 SVN 分支中更改或添加的行数？

> ID：10517641
> 
> 赞同：10
> 
> 时间：2012-05-09T13:57:04.480
> 
> 标签：svn

我想将 SVN 分支中的线路更改数量加起来，这样我就可以知道我在项目期间从另一方走了多远，并估计了当我将它与主干合并时发生冲突的概率。

我能想到的方法是获取统一的差异并做一些 grep|wc -l hack，但问题是很难区分不同的文件类型，例如前端源文件（.css、.html）和后端源文件（.xml、.java）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-13T13:44:33.587

将 beginRev 作为您要测量的变更集的初始修订，将 endRev 作为最终修订：

```
svn diff --summarize -rbeginRev:endRev <URLtoBranch> 
```

这将为您提供添加、删除和修改的文件的输出。

我你想要更多的细节级别，你可以通过以下方式解析 svn diff 输出`diffstat`：

```
svn diff -rbeginRev:endRev <URLtoBranch> | diffstat 
```

这将返回带有每个文件信息的更改直方图，以及更改的文件、添加和删除的行的摘要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T14:10:23.740

[StatSVN](http://statsvn.org/)可能是您正在寻找的。我曾经短暂地使用过它，它似乎很适合给开发者反馈。我不确定它是否会为您提供所需的确切信息，但可能值得快速查看。

# c - 尝试设置 QT 创建者和 Cuda 时“未使用链接器输入文件，因为未完成链接”

> ID：10517660
> 
> 赞同：1
> 
> 时间：2012-05-09T13:58:17.753
> 
> 标签：c, cuda, qt-creator

我正在尝试使用 QT creator 作为 IDE 开始使用 C 和 Cuda。不幸的是，我从一开始就遇到了问题，并且不确定它来自哪里（如果它是逐渐开始的，那就更容易识别了）。

我基本上已经安装了 CUDA（和 c）并运行了小型测试程序，但我想使用 IDE，所以我使用以下说明安装了 QT creator：http: [//cudaspace.wordpress.com/2011/04/07/qt- creator-cuda-linux/](http://cudaspace.wordpress.com/2011/04/07/qt-creator-cuda-linux/) 但在运行示例时出现错误：'链接器输入文件未使用，因为链接未完成'

这是所有文件（由于我使用的是mac并且说明适用于linux，因此我进行了修改。我可以编译基本`hello world`类型的东西，但由于某种原因不能编译示例）：my_first_project.pro：

```
TEMPLATE = app
LANGUAGE = C++
CONFIG += qt4

SOURCES += main.cpp \
    cuda_interface.cu
# Cuda sources
CUDA_SOURCES += cuda_interface.cu
# Project dir and outputs
PROJECT_DIR = $$system(pwd)
OBJECTS_DIR = $$PROJECT_DIR/Obj
DESTDIR = ../bin

# Path to cuda SDK install
CUDA_SDK = /Users/lostsoul/Dropbox/qt_cuda/C/
# Path to cuda toolkit install
CUDA_DIR = /usr/local/cuda
# GPU architecture
CUDA_ARCH = compute_10
# nvcc flags (ptxas option verbose is always useful)
NVCCFLAGS = --compiler-options -fno-strict-aliasing -use_fast_math --ptxas-options=-v
# include paths
INCLUDEPATH += $$CUDA_DIR/include
INCLUDEPATH += $$CUDA_SDK/common/inc/
INCLUDEPATH += $$CUDA_SDK/../shared/inc/
# lib dirs
QMAKE_LIBDIR += $$CUDA_DIR/lib64
QMAKE_LIBDIR += $$CUDA_SDK/lib
QMAKE_LIBDIR += $$CUDA_SDK/common/lib
# libs - note than i'm using a x_86_64 machine
LIBS += -lcudart -lcutil_x86_64
# join the includes in a line
CUDA_INC = $$join(INCLUDEPATH,' -I','-I',' ')
LD_LIBRARY_PATH = /usr/local/cuda/lib

# Prepare the extra compiler configuration (taken from the nvidia forum - i'm not an expert in this part)
cuda.input = CUDA_SOURCES
cuda.output = ${OBJECTS_DIR}${QMAKE_FILE_BASE}_cuda.o

cuda.commands = $$CUDA_DIR/bin/nvcc -m64 -g -G -arch=$$CUDA_ARCH -c $$NVCCFLAGS $$CUDA_INC $$LIBS  ${QMAKE_FILE_NAME} -o ${QMAKE_FILE_OUT}

cuda.dependcy_type = TYPE_C
cuda.depend_command = $$CUDA_DIR/bin/nvcc -g -G -M $$CUDA_INC $$NVCCFLAGS   ${QMAKE_FILE_NAME}
# Tell Qt that we want add more stuff to the Makefile
QMAKE_EXTRA_COMPILERS += cuda 
```

cuda_interface.cu：

```
// CUDA-C includes
#include <cuda.h>
#include <cutil_inline.h>

extern "C"
void runCudaPart();

// Main cuda function

void runCudaPart() {

// all your cuda code here *smile*

} 
```

主.cpp：

```
#include <QtCore/QCoreApplication>

// This is the 'elder trick of the...' - Tell the compiler this function is defined in other place
extern "C"
void runCudaPart();

int main(int argc, char *argv[]) {

    QCoreApplication a(argc, argv);

    runCudaPart();

    return a.exec();

} 
```

这是错误的输出：

```
09:24:27: Running build steps for project first_project...
09:24:27: Configuration unchanged, skipping qmake step.
09:24:27: Starting: "/usr/bin/make" -w
make: Entering directory `/Users/lostsoul/Dropbox/qt_cuda/first_project-build-desktop-Desktop_Qt_4_8_1_for_GCC__Qt_SDK__Debug'
/usr/local/cuda/bin/nvcc -m64 -g -G -arch=compute_10 -c --compiler-options -fno-strict-aliasing -use_fast_math --ptxas-options=-v -I/usr/local/cuda/include -I/Users/lostsoul/Dropbox/qt_cuda/C//common/inc/ -I/Users/lostsoul/Dropbox/qt_cuda/C//../shared/inc/ -lcudart -lcutil_x86_64 ../first_project/cuda_interface.cu -o ../first_project/Obj/cuda_interface_cuda.o
g++ -c -pipe -g -gdwarf-2 -arch x86_64 -Xarch_x86_64 -mmacosx-version-min=10.5 -Wall -W -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I../../../QtSDK/Desktop/Qt/4.8.1/gcc/mkspecs/macx-g++ -I../first_project -I../../../QtSDK/Desktop/Qt/4.8.1/gcc/lib/QtCore.framework/Versions/4/Headers -I../../../QtSDK/Desktop/Qt/4.8.1/gcc/include/QtCore -I../../../QtSDK/Desktop/Qt/4.8.1/gcc/lib/QtGui.framework/Versions/4/Headers -I../../../QtSDK/Desktop/Qt/4.8.1/gcc/include/QtGui -I../../../QtSDK/Desktop/Qt/4.8.1/gcc/include -I/usr/local/cuda/include -I../C/common/inc -I/Users/lostsoul/Dropbox/qt_cuda/C//../shared/inc/ -I. -I../first_project -I. -F/Users/lostsoul/QtSDK/Desktop/Qt/4.8.1/gcc/lib -o ../first_project/Obj/main.o ../first_project/main.cpp
gcc -c -pipe -g -gdwarf-2 -arch x86_64 -Xarch_x86_64 -mmacosx-version-min=10.5 -Wall -W -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I../../../QtSDK/Desktop/Qt/4.8.1/gcc/mkspecs/macx-g++ -I../first_project -I../../../QtSDK/Desktop/Qt/4.8.1/gcc/lib/QtCore.framework/Versions/4/Headers -I../../../QtSDK/Desktop/Qt/4.8.1/gcc/include/QtCore -I../../../QtSDK/Desktop/Qt/4.8.1/gcc/lib/QtGui.framework/Versions/4/Headers -I../../../QtSDK/Desktop/Qt/4.8.1/gcc/include/QtGui -I../../../QtSDK/Desktop/Qt/4.8.1/gcc/include -I/usr/local/cuda/include -I../C/common/inc -I/Users/lostsoul/Dropbox/qt_cuda/C//../shared/inc/ -I. -I../first_project -I. -F/Users/lostsoul/QtSDK/Desktop/Qt/4.8.1/gcc/lib -o ../first_project/Obj/cuda_interface.o ../first_project/cuda_interface.cu
i686-apple-darwin11-llvm-gcc-4.2: ../first_project/cuda_interface.cu: linker input file unused because linking not done
g++ -headerpad_max_install_names -arch x86_64 -Xarch_x86_64 -mmacosx-version-min=10.5 -o ../bin/first_project.app/Contents/MacOS/first_project ../first_project/Obj/cuda_interface_cuda.o ../first_project/Obj/main.o ../first_project/Obj/cuda_interface.o   -F/Users/lostsoul/QtSDK/Desktop/Qt/4.8.1/gcc/lib -L/usr/local/cuda/lib64 -L/Users/lostsoul/Dropbox/qt_cuda/C//lib -L/Users/lostsoul/Dropbox/qt_cuda/C//common/lib -L/Users/lostsoul/QtSDK/Desktop/Qt/4.8.1/gcc/lib -lcudart -lcutil_x86_64 -framework QtGui -L/usr/local/pgsql/lib -L/tmp/qt-stuff-85167/source/qt-everywhere-opensource-src-4.8.1/Desktop/Qt/4.8.1/gcc/lib -F/tmp/qt-stuff-85167/source/qt-everywhere-opensource-src-4.8.1/Desktop/Qt/4.8.1/gcc/lib -framework QtCore 
i686-apple-darwin11-llvm-g++-4.2: ../first_project/Obj/cuda_interface.o: No such file or directory
make: *** [../bin/first_project.app/Contents/MacOS/first_project] Error 1
make: Leaving directory `/Users/lostsoul/Dropbox/qt_cuda/first_project-build-desktop-Desktop_Qt_4_8_1_for_GCC__Qt_SDK__Debug'
09:24:33: The process "/usr/bin/make" exited with code 2.
Error while building project first_project (target: Desktop)
When executing build step 'Make' 
```

在过去的几个小时里，我一直在努力解决这个问题，我真的不确定如何解决这个问题。我唯一想到的可能是我的 make 版本对于指令来说太新了（因为我遵循的教程是去年的），但命令似乎可以执行。我对 C/Cuda 和 QT 创建者真的很陌生，我唯一的目标是在 QT 上执行 c/c++ 和 cuda 代码（因为显然它可以以它们相互对话的方式编译并完成代码完成）。我越深入越不确定这个错误是 QT 错误还是 C 错误（我不认为它是 CUDA 特定的错误，因为我真的没有任何代码）。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:32:54.553

根据我们在聊天中的讨论，我们发现 CUDA SDK 安装目录存在问题，因此您可以通过删除 SDK 相关内容来简化 .pro 文件。

检查您的 CUDA SDK 安装目录 (/Developer/GPU\ Computing/C) 的空白区域，因为它可能是问题的原因。

也就是说，使用最新软件和 osx lion 的基本配置如下：

```
QT += core
QT -= gui

TARGET = cuda_sample
CONFIG += console
CONFIG -= app_bundle
TEMPLATE = app
# Source files for C/C++ compiler
SOURCES += main.cpp
# project build directories
DESTDIR = $$system(pwd)
OBJECTS_DIR = $$DESTDIR/Obj
# and C/C++ flags
QMAKE_CFLAGS_RELEASE =-O3
QMAKE_CXXFLAGS_RELEASE =-O3
# cuda source
CUDA_SOURCES += cuda_interface.cu
# Path to cuda toolkit install
CUDA_DIR = /usr/local/cuda
INCLUDEPATH += $$CUDA_DIR/include
QMAKE_LIBDIR += $$CUDA_DIR/lib
# GPU architecture
CUDA_ARCH = sm_20
# NVCC flags
NVCCFLAGS = --compiler-options -fno-strict-aliasing -use_fast_math --ptxas-options=-v
# Path to libraries
LIBS += -lcudart -lcuda
# join the includes in a line
CUDA_INC = $$join(INCLUDEPATH,' -I','-I',' ')
# Prepare the extra compiler configuration (taken from the nvidia forum - i'm not an expert in this part)
cuda.commands = $$CUDA_DIR/bin/nvcc -m64 -O3 -arch=$$CUDA_ARCH -c $$NVCCFLAGS $$CUDA_INC $$LIBS ${QMAKE_FILE_NAME} -o ${QMAKE_FILE_OUT}

cuda.dependcy_type = TYPE_C
cuda.depend_command = $$CUDA_DIR/bin/nvcc -O3 -M $$CUDA_INC $$NVCCFLAGS     ${QMAKE_FILE_NAME}

cuda.input = CUDA_SOURCES
cuda.output = ${OBJECTS_DIR}${QMAKE_FILE_BASE}_cuda.o
# Tell Qt that we want add more stuff to the Makefile
QMAKE_EXTRA_COMPILERS += cuda 
```

由于我们没有使用 CUDA SDK 库，请从您的 cuda_interface.cu 文件中删除以下行

```
#include <cutil_inline.h> // remove this line from your file 
```

就这样。请记住运行 qmake 以获取 .pro 文件的更改。

# vbscript - VBS 检查文件列表

> ID：10517663
> 
> 赞同：1
> 
> 时间：2012-05-09T13:58:20.757
> 
> 标签：vbscript

我有这个脚本，但想扩展它以检查文件列表以及映射驱动器 R: 是否存在，如果不存在则映射。

FileA.txt FileB.txt FileD.txt
FileE.txt FileF.dll FileG.dll

```
Const OverwriteExisting = TRUE

Set objFSO = CreateObject("Scripting.FileSystemObject")

Set objLocalFile = objFSO.GetFile("C:\SCRIPT\SCRIPTTEXT.txt")
dtmLocalDate = objLocalFile.DateLastModified

Set objServerFile = objFSO.GetFile("R:\SCRIPT\SCRIPTTEXT.txt")
dtmServerDate = objServerFile.DateLastModified

If dtmLocalDate < dtmServerDate Then
    objFSO.CopyFile objServerFile.Path, objLocalFile.Path, OverwriteExisting
End If 
```

如果没有驱动器不存在错误“此网络连接不存在”但重新映射正常，则该片段不起作用。

```
> Set WSHNetwork = CreateObject("WScript.Network")
> 
> WSHNetwork.RemoveNetworkDrive "R:","True","True"
> 
> WSHNetwork.MapNetworkDrive "R:", "\\192.168.1.103\","True" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:29:22.377

不映射，直接用url做比较

```
on error resume next
path = "\\192.168.1.103\SCRIPT\SCRIPTTEXT.txt"
if objFSO.fileExist(path)
  Set objServerFile = objFSO.GetFile(path)
  dtmServerDate = objServerFile.DateLastModified
  if dtmLocalDate < dtmServerDate Then
    objFSO.CopyFile objServerFile.Path, objLocalFile.Path, OverwriteExisting
  end if
else
  objFSO.CopyFile objServerFile.Path, objLocalFile.Path
end if 
```

# asp.net-web-api - 来自 ASP.NET Web API 的错误 HTTP 响应代码

> ID：10517665
> 
> 赞同：4
> 
> 时间：2012-05-09T13:58:23.043
> 
> 标签：asp.net-web-api

我正在尝试从 ASP.NET Web API Web 方法 (POST) 返回 401（未经授权）响应代码，但我得到 404。我做错了吗？

`throw new HttpResponseException(HttpStatusCode.Unauthorized);`（或将其设置在 HttpResponseMessage 上）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:03:16.243

Grrr - 问题是表单身份验证，它劫持了 401 并向不存在的登录表单发出重定向（302），因此出现 404。我只需在 web.config 文件中将身份验证模式设置为无。

# c# - .CS 表单中未访问的 SQL 参数

> ID：10517667
> 
> 赞同：0
> 
> 时间：2012-05-09T13:58:30.703
> 
> 标签：c#, model-view-controller, entity-framework-4.1

我们正在使用 ASP.NET MVC 3.0 代码优先的 Linq-to-Sql。

最初我们构建了所有的表、存储过程等。它工作正常。

我通过添加 3 个新参数直接更新了 SQL Server 数据库中的存储过程。但我面临的问题是我无法访问 .CS 文件中的那些新的 3 个参数。

在我们构建这些存储过程的初始阶段，有 2 个参数可以很好地检索。

这是代码

```
protected databasecontext db;

public List<databasecontextname(.dbml file)> GetList()
{
   var x = db.storedprocedurename(parameters here)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:21:36.107

我得到了解决方案，我们必须使用最新的存储过程更新 .dbml 文件，因为应用程序将采用 .dbml 上下文。

# google-maps - 使用 DrawingManager 为多边形拖动事件

> ID：10517669
> 
> 赞同：2
> 
> 时间：2012-05-09T13:58:39.350
> 
> 标签：google-maps, google-maps-api-3

我正在使用绘图管理器来绘制折线、多边形、圆形和矩形。

每当更改多边形（即，我放置了一个多边形）并且我拖动或更改了多边形的形状时。我希望在多边形的形状发生变化时触发一个事件。

当多边形的形状发生变化时，有人可以告诉我如何触发事件吗？

我尝试过“拖动”事件，但对我不起作用。

对于其他工具，我也需要同样的东西。

原谅英语。

谢谢，
卡利安巴萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:58:38.920

老问题，但找到了解决您问题的方法。

我所做的是`radius_changed`在 circlecomplete 监听器中添加一个监听器。
例子：

```
google.maps.event.addDomListener(drawingManager, 'circlecomplete', function(circle) {
    google.maps.event.addListener(circle, 'radius_changed', function() {
        radius = circle.getRadius();
        alert(radius);
    }); 
}); 
```

您会看到我如何在创建的对象上添加侦听器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T22:05:49.157

我不相信有任何方法可以拖动形状。它们可以被制作`editable`，它提供了移动顶点的能力，但它们是不可拖动的。

有一组 -complete 事件，每种类型的形状都有一个：

*   `circlecomplete`
*   `markercomplete`
*   `polygoncomplete`
*   `polylinecomplete`
*   `rectanglecomplete`

和一个通用事件，当*任何*形状类型完成时触发：

*   `overlaycomplete`

[开发人员指南](https://developers.google.com/maps/documentation/javascript/tutorial)包括有关[绘图事件](https://developers.google.com/maps/documentation/javascript/overlays#drawing_events)的部分，该部分提供绘图事件侦听器代码示例。

# c# - ViewResult 不使用 ASP.NET MVC 在 ASP.NET WebForms 项目中呈现页面内容

> ID：10517670
> 
> 赞同：0
> 
> 时间：2012-05-09T13:58:51.740
> 
> 标签：c#, asp.net, asp.net-mvc, error-handling, webforms

我有一个 ASP.NET Web Forms APP，我想一次将它迁移到 ASP.NET MVC。我已将 MVC 设置为在 webforms 应用程序中运行。我已经正确设置了所有内容，如果我将 ASP.NET MVC 文件夹（控制器、视图）放在项目中名为 MVC 的子文件夹中，并将我的全局 asax 中的路由设置为

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    routes.IgnoreRoute("{resource}.aspx/{*pathInfo}");
    routes.MapRoute("Default", // Route name
        "w/{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = "" } // Parameter defaults
    );
}

protected void Application_Start()
{
    RegisterRoutes(RouteTable.Routes);
} 
```

所有配置和程序集引用均已设置。如果我进行调试，我可以在我的 Home 控制器上的 Index 方法中设置一个断点。

```
public class HomeController
    : Controller
{
    public ActionResult Index()
    {
        this.HttpContext.Trace.Write("Hrm...");
        return View("index", (object)"Hello");
    }
} 
```

正在发生的问题是

```
return View("index", (object)"Hello"); 
```

如果 MVC 无法找到视图，则通常不会返回错误状态代码或您期望的搜索列表。相反，我收到了 200 个 http 响应，而响应的内容正文中没有任何内容。

这是http请求的详细信息：

```
GET http://localhost.:2396/w/home/index2 HTTP/1.1
Accept: */*
Accept-Language: en-us
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; MS-RTC LM 8; InfoPath.2; .NET CLR 1.1.4322; .NET4.0C; .NET4.0E)
Accept-Encoding: gzip, deflate
Connection: Keep-Alive
Host: localhost.:2396
Pragma: no-cache
Cookie: ASP.NET_SessionId=3yqf2t55sckemhmxq2bhibmq

HTTP/1.1 200 OK
Server: ASP.NET Development Server/9.0.0.0
Date: Wed, 09 May 2012 12:42:43 GMT
X-AspNetMvc-Version: 2.0
Cache-Control: private
Content-Length: 0
Connection: Close 
```

上面的请求转到 index2，这是一个不存在的操作，它不会给我一个错误。我怀疑索引操作中的 ViewResult 正在引发异常，但不知何故它在某处被抑制了。我继承了这个代码库，所以我只是想弄清楚发生了什么。

在 web.config 我已经配置了错误处理，这样我应该能够看到任何错误消息，但这仍然不能解释为什么 http 状态代码总是 200。

```
<customErrors mode="Off"/>

<httpErrors errorMode="DetailedLocalOnly"/> 
```

另一个快速说明，如果我更换

```
return View("index", (object)"Hello"); 
```

和

```
return Content("abc"); 
```

它将在 http 响应的内容正文中正确输出“abc”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:07:36.087

似乎您的视图位置错误，因为您提到控制器，视图位于名为“MVC”的文件夹下。

“Views”文件夹应该在根目录下，即 ViewEngine 查找视图的地方。

**更新：** 您可以使用自定义 ViewEngine 覆盖此默认行为。对于该实现`IViewEngine`接口，它有一个名为的方法`FindView`，您可以在其中实现自己的逻辑来扫描不同的位置。

# java - 需要一个java继承设计技巧

> ID：10517672
> 
> 赞同：1
> 
> 时间：2012-05-09T13:58:57.457
> 
> 标签：java, inheritance

我有一个抽象超类和一些派生类。
我想创建一个方法

```
createNew() 
```

当在派生类上调用时，它将创建派生类的新实例，其中包含其所有成员的智能副本。
对创建很重要的所有成员都在抽象类中，因此代码应该相同。
我可以在超类中编写 createNew() 的实现吗？

类似的东西

```
SonA sonA2 = sonA1.createNew()   
SonB sonB2 = sonB1.createNew() 
```

abs 超类应该执行实现，因为代码是相同的。
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:03:31.517

实现应该分为抽象类和具体类。您可以使用模板方法模式来做到这一点：

```
public abstract class AbstractSon {
    protected abstract AbstractSon createNewImpl();
    public AbstractSon createNew() {
        AbstractSon res = createNewImpl();
        res.name = "default name";
        return res;
    }
}
public class Son1 extends AbstractSon {
    protected AbstractSon createNewImpl() {
        return new Son1();
    }
}
public class Son2 extends AbstractSon {
    protected AbstractSon createNewImpl() {
        return new Son2();
    }
} 
```

您可以以不同的方式拆分职责以获得精确的返回类型：

```
public abstract class AbstractSon {
    protected void prepare(AbstractSon toPrepare) {
        toPrepare.name = "default name";
    }
}
public class Son1 extends AbstractSon {
    public Son1 createNew() {
        Son1 res = new Son1();
        prepare(res);
        return res;
    }
}
public class Son2 extends AbstractSon {
    public Son2 createNew() {
        Son2 res = new Son2();
        prepare(res);
        return res;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:01:53.653

创建一个抽象方法，作为您的方法使用的回调——并在每个子类中`createNew`实现**该方法。**`createNew`可以是`final`公共超类的具体的，甚至是方法。提到的抽象方法将返回相应子类的新实例。

另一种方法是通过反射找出`createNew`调用了哪个类并基于它创建一个新实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T14:03:52.033

您可以编写此代码（使用反射：`getClass().newInstance()`获取实际类的实例，而不是定义方法的类），但它有一些问题。例如，您打算从此方法返回什么？

您必须返回超类型，这意味着您必须为每次调用进行强制转换。

通常的解决方案是定义一个`copy()`您在每个级别上定义的方法。然后你可以这样做：

```
 class SonA {
     SonA createNew() {
         SonA result = new SonA();
         this.copy( result );
         return result;
     }

     void copy( SonA target ) {
         super.copy( target );

         // copy my fields to target ...
     }
 } 
```

您可能还想阅读有关[复制构造函数](http://www.javapractices.com/topic/TopicAction.do?Id=12)的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T14:06:37.103

一种可能性是将复制因素考虑到一个单独的方法中，并从派生类中调用它`createNew()`：

```
abstract class Base {

  public abstract Base createNew();

  protected void populate(Base out) {
    // copy the data from `this' to `out'
  }
}

class Derived1 extends Base {
  public Derived1 createNew() {
    Derived1 ret = new new Derived1();
    populate(ret);
    return ret;
  }
}

class Derived1 extends Base {
  public Derived2 createNew() {
    Derived2 ret = new new Derived2();
    populate(ret);
    return ret;
  }
} 
```

# c# - 如何将 C# 应用程序的文本输出写入文本文件

> ID：10517678
> 
> 赞同：0
> 
> 时间：2012-05-09T13:59:32.843
> 
> 标签：c#, text, wmi

如果这是一个“新手”问题，请原谅我，但我刚刚开始自学 C#，我开始搞乱 WMI，并使用 microsoft WMI 生成器，我做了这个，目的是为了分析一些东西关于它是如何工作的。但是，有没有办法让它将数据写入文本文件？

代码：

```
using System;

    using System.Management;

    using System.Windows.Forms;

    namespace WMISample
    {
        public class MyWMIQuery
        {

            public static void Main()
            {
                try
                {
                    ManagementObjectSearcher searcher = 
                    new ManagementObjectSearcher("root\\CIMV2", 
                    "SELECT * FROM Win32_BIOS"); 

                foreach (ManagementObject queryObj in searcher.Get())
                {
                    Console.WriteLine("-----------------------------------");
                    Console.WriteLine("Win32_BIOS instance");
                    Console.WriteLine("-----------------------------------");
                    Console.WriteLine("SerialNumber: {0}", queryObj["SerialNumber"]);
                }
            }
            catch (ManagementException e)
            {
                MessageBox.Show("An error occurred while querying for WMI data: " + e.Message);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:02:33.933

如果您只想将文本附加到文件中：

```
File.AppendAllText("c:\file.txt", "some text"); 
```

如果您特别希望将控制台通过管道传输到文本文件，则需要将控制台的标准输出重定向到 FileStream，如下所述：

来自： http: [//msdn.microsoft.com/en-us/library/system.console.setout (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.console.setout(v=vs.71).aspx)

```
 Console.WriteLine("Hello World");
 FileStream fs1 = new FileStream("Test.txt", FileMode.Create);
 // First, save the standard output.
 TextWriter tmp = Console.Out;

 StreamWriter sw1 = new StreamWriter(fs1);
 Console.SetOut(sw1);
 Console.WriteLine("Hello file");

 Console.SetOut(tmp);
 Console.WriteLine("Hello World");

 sw1.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:02:14.507

有一个特定的 using 语句用于写入和从文件中写入，它的 system.IO（用于输入输出）这里是一个教程的链接，该教程正确解释了所有基本 IO 的使用 [http://www.csharp-station.com/如何/ReadWriteTextFile.aspx](http://www.csharp-station.com/HowTo/ReadWriteTextFile.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:15:35.937

如果这是出于日志记录的目的，您可以使用 Trace 和 TextWriterTraceListener 将其写入文件，这几乎正是它的用途。

# web-services - 无法更改 SOAPFault 处理程序中的故障详细信息元素（在 handleFault 方法中）

> ID：10517679
> 
> 赞同：0
> 
> 时间：2012-05-09T13:59:33.370
> 
> 标签：web-services, websphere, axis, soapfault, soaphandler

我在 Websphere V8 上使用 JAX-WS Web 服务。当 WS 返回 SOAP 错误时，我想对详细元素进行一些更新。所以我创建了 SOAP 处理程序：

```
 public boolean handleFault(SOAPMessageContext messageContext) {
    try {
        SOAPMessage msg = messageContext.getMessage(); 
        SOAPBody body = msg.getSOAPBody();
        Detail d = body.getFault().getDetail();
        Node esbException = d.getFirstChild();

        // do some changes in detail element...

        // save changes
        msg.saveChanges();

        return true;
    } catch ....
    return true;
} 
```

我可以更新故障消息，但客户端获取原始故障（更改之前）。但是当我打印更新的故障（在肥皂处理程序中）时，我可以看到更改（例如调用 msg.writeTo(System.out)）。

任何线索为什么不将更新的故障返回给 ws 客户端？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:21:35.217

可能与 WebSphere 中的以下错误有关：[http ://www-01.ibm.com/support/docview.wss?rs=180&uid=swg1PM39817](http://www-01.ibm.com/support/docview.wss?rs=180&uid=swg1PM39817)

# django - django 国际化：为复数标记字符串时，计数器不可用

> ID：10517683
> 
> 赞同：0
> 
> 时间：2012-05-09T13:59:43.993
> 
> 标签：django, internationalization

在代码中为 django stings 添加复数应该使用`ungettext()`，其中第三个参数是决定它应该使用单数还是复数的计数器：

```
text = ungettext(
        'There is %(count)d %(name)s available.',
        'There are %(count)d %(name)s available.',
        count
) % {
    'count': count,
    'name': name
} 
```

当`ungettext()`被调用时，作为计数器的参数应该是可用的。但就我而言，字符串和计数器是分开的，因此不可能在正确的位置提供计数器：

```
class foo(bar):
    description="There is %(count)d %(names)s available."

class foo_2(bar):
    description="%(count)d rabbits jump over the %(names)s."

# More 'foo' type classes....

class foo_model(Model):
    count=IntegerField()
    name=CharField()
    klass=CharField()
    #model definition...

    def _get_self_class(self):
        if self.klass=='foo':
            return foo
        elif self.klass=='foo_2':
            return foo_2

    def get_description(self):
            return self._get_self_class.description%(self.count,self.name) 
```

我有点不知道如何将其国际化。有人有好主意吗？

**更新：**

我已将示例更改为更接近我的情况

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:23:09.357

例如，您需要在`ungettext`某个地方构建

```
class Foo(Bar):
    description = "There is %(count)d %(names)s available."
    description_plural = "There are %(count)d %(names)s available."

class FooModel(Model):
    count = IntegerField()
    name = CharField()
    # model definition...

    def get_description(self):
        return ungettext(Foo.description, Foo.description_plural, self.count) % \
                   {'count':self.count, 'name':self.name} 
```

# python - Python 脚本不再运行

> ID：10517696
> 
> 赞同：0
> 
> 时间：2012-05-09T14:00:34.527
> 
> 标签：python, selenium

运行一些 python 脚本时出现问题。我收到消息“在 0.000 秒内运行 0 次测试”。

这发生在不知道在哪里。但是，Soem 脚本仍然有效。我找不到脚本之间的任何区别，因为有些应该运行而有些不应该运行。

我做了一些研究，“unittest”似乎是一个共同的主题。据我所知，我没有更改我的代码，并且我已经包含了 import unittest。

我觉得没有必要发布我的代码，因为运行的脚本和不运行的脚本之间没有区别（除了文件名 odf）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:02:00.950

您将它们作为单元测试而不是正常运行。你在使用 Eclipse 吗？你可能按错了按钮。

# ruby-on-rails-3 - Rails 3.2.3 从公共返回索引而不是静态页面

> ID：10517704
> 
> 赞同：0
> 
> 时间：2012-05-09T14:01:24.933
> 
> 标签：ruby-on-rails-3

我有一个部署到heroku的rails应用程序。我的索引页面上有一个表单，我想在提交时重定向到静态“thanks.html”页面。

问题是当我请求“thanks.html”时，应用程序正在返回索引页面。日志显示 GET 请求为 200，就好像找到并返回了“thanks.html”。

目前我的“thanks.html”和“index.html”一起在公共文件夹中。我目前没有任何路线，期望 Rails 在没有额外配置的情况下总是从公共返回匹配的静态页面。

[我确实尝试了Routing to static html page in /public 中](https://stackoverflow.com/questions/5631145/routing-to-static-html-page-in-public)提出的修复，但没有成功。

匹配 '/foo', :to => 重定向('/public/foo.html')

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:33:11.070

我正在使用以下文章中的一些额外配置来添加静态页面的缓存。看来这就是迫使所有请求都发送到我的 index.html 页面的原因。我在 config.ru 中注释掉了与机架相关的信息，一切正常。devcenter.heroku.com/articles/static-sites-on-heroku

# javascript - 如何在 Backbone.js 中的 Router.routes 中绑定外部方法

> ID：10517705
> 
> 赞同：3
> 
> 时间：2012-05-09T14:01:28.697
> 
> 标签：javascript, backbone.js

**是否可以从Router.routes**映射中的其他对象绑定方法？

**我在Views**中有所有“逻辑代码” ，我想避免在**Router**中定义方法。

例如，我有这个：

```
var app = new (Backbone.View.extend({    
         playHome: function(){
            // logic code here
         }
//..........
});
var router = new (Backbone.Router.extend({
        routes: {
          "play"         : 'playHome'
        },
        playHome: function(){
            app.playHome();
        } 
```

我想做这样的事情：

```
var router = new (Backbone.Router.extend({
        routes: {
          "play"         : 'app.playHome'
        }, 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T20:55:03.053

这是一个相当简单的方法来完成你想要的：

```
 var WorkspaceRouter = Backbone.Router.extend({
    routes: {
      "help": "help", // #help
      "search/:query": "search", // #search/kiwis
      "search/:query/p:page": "search" // #search/kiwis/p7
    },

    help : function () { },

    search : function () { }
  });

  var App = {
    help: function() { console.log("help"); },

    search: function(query, page) { console.log("search", query, page); }
  };

  $(document).ready(
      function () {
        var router = new WorkspaceRouter();
        Backbone.history.start();

        router.on("route:help", App.help);
        router.on("route:search", App.search);
      }
  ); 
```

该解决方案依赖于 Backbone 为每个路由触发一个事件以及调用路由器本身的函数这一事实。如果您愿意允许路由器上的虚拟函数什么都不做，那么您可以将您喜欢的任何内容附加到路由器的事件并在其他对象上调用任意数量的其他函数，根据需要附加整个事物（或分离它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T10:14:19.093

查看[Backbone.Marionette 的 AppRouter](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.approuter.md) .. 它允许您提供一个控制器对象，该对象只需提供所需的路由方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T14:18:39.147

这是完成您正在寻找的另一种方法...

```
var app = new (Backbone.View.extend({    
    playHome: function(){
        // logic code here
    }
    //..........
});

var router = new (Backbone.Router.extend({
    initialize: function(){
        // route,  route name for event, callback function
        this.route("play", "playRoute", _.bind(app.playHome, app))
    }, 
```

它`app.playHome`作为路由的回调函数调用，与回调`app`绑定`this`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T14:10:15.307

我想我在某个地方读到过这个，在哪里？不知道。但是您可以将一流的函数作为值传递给 routes 对象。这边走：

```
var router = new (Backbone.Router.extend({
    routes: {
      "play"         : app.playHome
    }, 
```

虽然没有保证！想知道我在哪里读到的。希望这可以帮助

# php - Firefox PHP 包含和 CSS

> ID：10517706
> 
> 赞同：2
> 
> 时间：2012-05-09T14:01:31.407
> 
> 标签：php, html, css, include

我的问题是我觉得有点具体，基本上我在使用 PHP 包含时在 Firefox 中显示一些 CSS 样式时遇到了问题。

我有我的 index.php 和 header.php，它们包含在索引文件中。头文件包含本教程[http://www.basewebmaster.com/css/simple-css-drop-down-menu.php](http://www.basewebmaster.com/css/simple-css-drop-down-menu.php)中的代码，当我在 Firefox 的独立 html 文件中运行它时，它工作正常，但在header.php 文件它没有正确显示它在其他所有浏览器中的位置。

该网站在这里：[http ://createful.com/cleave](http://createful.com/cleave)

如果您在 FF 以外的任何浏览器中查看它，它应该会显示一个不错的下拉菜单，但在 FF 中它真的很混乱，仅在我对 header.php 文件使用包含语句的实例中（静态 html 文件完美运行） .

我的 index.php 文件有以下代码：

```
<?php include("header.php"); ?> 
```

我的 header.php 包含我在本文前面链接的教程中的确切代码。我的 style.css 也有教程中的确切代码。

为了比较，这是相同代码的静态版本，在 FF 中完美运行：[http ://www.createful.com/cleave/test/index.html](http://www.createful.com/cleave/test/index.html)

我不太确定需要什么其他信息来解决这个问题，但希望这已经足够了，如果需要，我可以提供任何其他信息。

提前致谢。

编辑 - 这是 index.php 和 header.php 的完整代码

索引.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
    <title>Jon Cleave</title>

    <link href="css/style.css" rel="stylesheet" type="text/css" />

    <script src="js/jquery-1.4.2.min.js" type="text/javascript"></script> 
    <script src="js/scripts.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/jScrollPane.js"></script>
    <link rel="stylesheet" type="text/css" media="all" href="css/jScrollPane.css" />
    <link href='http://fonts.googleapis.com/css?family=Arvo:400,700' rel='stylesheet' type='text/css'>

    <script type="text/javascript">
        $(document).ready(function() {
            $('.open1').hide();

            $('.close1').click(function() {
                $('.info').slideUp('slow', function() {
                    // Animation complete.
                });

            $('.close1').hide();
            $('.open1').show();

            });
        });

        $(document).ready(function() {
            $('.open1').click(function() {
                $('.info').slideDown('slow', function() {
                    // Animation complete.
                });

            $('.open1').hide();
            $('.close1').show();

            });
        });
    </script>

</head>    
<body>

<?php require "header.php"; ?>

<!-- BEGIN BACKGROUND PICTURES -->
<div id="loader" class="loading"></div>
<div id="bkgallery">

    <ul>
        <li><img src="work/work1.png" id="im1" alt=""/> </li>  
        <li><img src="work/triworks_arch2.jpg" id="im2" alt=""/> </li> 
        <li><img src="work/triworks_arch3.jpg" id="im3" alt=""/> </li>  
    </ul>

    <div class="close1">x</div>
    <div class="open1">+</div>
    <div class="info">Info box 1</div>
    <div class="info two">Info box 2</div>

    <a href="" class="next" title="next page">next</a>
    <a href="" class="prev" title="prev page">prev</a>
</div><!-- #bkgallery -->
<!-- END BACKGROUND PICTURES -->

<!-- END CONTENT -->

<!-- END FOOTER -->

</body> 
```

页脚.php

```
 <div id="header">
    <div id="logo"><h1>Jon Cleave</h1></div>

    <div id="nav">
        <ul class='drop-down'>
        <li class="top"><a href='#nogo'>index</a>
            <ul>
            <li><a href='#nogo1'>Male</a></li>
            <li><a href='#nogo2'>Female</a></li>
            </ul>
        </li>
        <li class="top"><a href='#nogo3'>case studies</a>
            <ul>
            <li><a href='#nogo4'>Blond</a></li>
            <li><a href='#nogo5'>Brown</a></li>
            <li><a href='#nogo6'>Black</a></li>
            <li><a href='#nogo7'>Red</a></li>
            </ul>
        </li>
        <li class="top"><a href='#nogo8'>cv</a>
            <ul>
            <li><a href='#nogo9'>Blue</a></li>
            <li><a href='#nogo10'>Green</a></li>
            <li><a href='#nogo11'>Brown</a></li>
            <li><a href='#nogo12'>Grey</a></li>
            </ul>
        </li>
        <li class="top"><a href='#nogo8'>contact</a>
            <ul>
            <li><a href='#nogo9'>Email</a></li>
            </ul>
        </li>
        </ul>
    </div>

</div><!-- header --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:23:15.847

通常发生这种情况时，问题是因为您的文件是用 UTF-8 和 BOM 编码的。BOM 充当不可见字符，但会导致布局问题。

大多数编辑器（除了记事本）允许您编码为“没有 BOM 的 UTF-8”，因此您应该尽可能使用该选项。

如果不是，请不要使用 UTF-8。就我个人而言，我仍然在 ISO-8859-1 中做我所有的事情，如果我需要一个 Unicode 字符，我会使用一个 HTML 实体。

BOM 说明 - [http://en.wikipedia.org/wiki/Byte_Order_Mark](http://en.wikipedia.org/wiki/Byte_Order_Mark)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:38:00.903

您的问题源于您的样式表第 284 和 299 行：

```
.close1 {
    position: fixed;
    color: #fff;
    top: 65px;
    left: 30px;
    display: block;
    background: #444;
    width: 208px;
    padding: 0px 0px 1px 8px;
    opacity:0.8;
    z-index: 0;
    background-image: url("../img/close.png);
    background-repeat: repeat;
}

.open1 {
    position: fixed;
    color: #fff;
    top: 65px;
    left: 30px;
    display: block;
    background: #444;
    width: 208px;
    padding: 0px 0px 1px 8px;
    opacity:0.8;
    z-index: 0;
    background-image: url("../img/close.png);
    background-repeat: repeat;
} 
```

注意 ? 的开头`"`和缺少的`"`结尾`background-image`？这会导致之后的所有声明都被忽略。

# c++ - wdk中的异常处理

> ID：10517713
> 
> 赞同：0
> 
> 时间：2012-05-09T14:01:48.673
> 
> 标签：c++

我不能在本机子系统中使用异常处理。

这是我的 cpp 文件：

```
#include <ntddk.h>
#include <exception>

int __cdecl  main () {
    try
    {
      throw 20;

    }
    catch (int e)
    {

    }

    return 0;
} 
```

还有我的源文件：

```
TARGETNAME = native
TARGETTYPE = PROGRAM
UMTYPE = nt
USER_C_FLAGS=$(USER_C_FLAGS) /EHa
SOURCES = exeption.cpp \

INCLUDES=$(DDK_INC_PATH)
MINWIN_SDK_LIB_PATH=$(SDK_LIB_PATH)
TARGETLIBS=$(NTDLL_CRT) $(SDK_LIB_PATH)\ntdll.lib lib.lib 
```

我的错误是：

```
error LNK2019: unresolved external symbol ___CxxFrameHandler3 referenced in function __ehhandler$_main

error LNK2019: unresolved external symbol __EH_epilog3 referenced in function __catch$_main$0

error LNK2019: unresolved external symbol __EH_prolog3_catch referenced in function _main

error LNK2019: unresolved external symbol __CxxThrowException@8 referenced in function _main

error LNK2001: unresolved external symbol "const type_info::`vftable'" (??_7type_info@@6B@) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:40:10.127

此处描述了此问题：http: [//www.codeproject.com/Articles/22801/Drivers-Exceptions-and-C](http://www.codeproject.com/Articles/22801/Drivers-Exceptions-and-C)，其解决方案可能有效，但可能导致未定义的行为。

但是，您的问题更简单：您需要使用一些 DDK 的东西编写用户模式程序。只需使用默认包含所有 CRT 库的 VC++ 构建环境（或 Windows SDK），并包含用于 DDK 内容的 ntddk.h 文件。

如果您想在驱动程序中使用 C++ 异常，答案很简单：永远不要这样做。

# javascript - CMS 使用 jquery 1.7，主题使用 jQuery 1.6 == 冲突

> ID：10517716
> 
> 赞同：1
> 
> 时间：2012-05-09T14:02:05.463
> 
> 标签：javascript, jquery

我已经获得了一个主题来实现到 cms 中。

该主题使用 jQuery 1.6 并且没有 javascript 错误。

CMS (concrete5) 使用 jQuery 1.7.1 并且没有 javascript 错误。

当我将主题合并到 CMS 中时，我将包含放到 jQuery 中（因为我要避免包含 jQuery 两次），现在我收到以下错误：

```
Uncaught TypeError: Property '$' of object [object DOMWindow] is not a function (ccm.app.js line 1 --> ccm.app.js is part of the CMS javascript).
Uncaught TypeError: Property '$' of object [object DOMWindow] is not a function (page controls menu.js). 
```

脚本 src 引用的顺序如下：

```
- jQuery
- ccm.app.js (CMS)
- page controls menu.js (CMS)
- custom.js (my theme) 
```

我意识到这不是很多需要查看和排除故障的代码，但是有谁知道**可能**导致这种错误的 jQuery 1.6 和 jQuery 1.7 之间的区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:21:15.920

您使用的 jQuery 版本没有分配快捷方式`$`。您可以将您引用的脚本更改为分配快捷方式的内容，或者在导入 jQuery 后立即

```
<script type="text/javascript">
$ = jQuery;
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T14:43:21.170

上面的答案找到了问题的根源，但我想我会提到这部分，以防其他人有同样的问题。

对我来说，在我的 custom.js 文件中，我有 jQuery noConflict 包装器围绕着 jQuery 的每一点：

```
jQuery.noConflict()(function($){
   $(document).ready(function() {
     // some jQuery javascript here     

   });
}); 
```

将其更改回只是：

```
 $(document).ready(function() {
     // some jQuery javascript here     

   }); 
```

摆脱了我遇到的问题。

# jquery - JQuery，可以将css属性添加到对话框按钮吗？

> ID：10517718
> 
> 赞同：0
> 
> 时间：2012-05-09T14:02:12.137
> 
> 标签：jquery, jquery-ui, jquery-selectors

这是我到目前为止整理的代码。

我找到了可以添加类的地方，但我只想将按钮的颜色更改为灰色，以使它们看起来更自然，而不是标准的蓝色。

```
 <script>
   $(document).ready(function () {
        $("#divdeps").dialog({
            autoOpen: false,
            resizable: false,
            modal: true,
            buttons: [
                {
                    text: "Yes",
                    click: function() {
                        // Cancel code here
                        $(this).dialog("close");
                    }
                },
                {
                    text: "No",
                    click: function() {
                        // Save code here
                        $(this).dialog("close");
                    }
                }
            ], 
```

-- 垫片 --

```
 close: function() {
                // Close code here (incidentally, same as Cancel code)
                $(this).dialog("close");
            },
            open: function () {
                $(".ui-dialog-titlebar").addClass("boxtitlebg");
                $(".ui-dialog-titlebar").css("height", "17px");
                $(".ui-widget-header").css("border", "none");
                $(".ui-widget-content").css("border", "none");

            }
        });
    });
   </script>

<div id="divdeps" style="display: none" title="this title">This is my div</div>

<div onclick="$('#divdeps').dialog('open');">click here</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:18:16.177

您可以将 CSS 属性添加到任何 jQuery 对象：

```
$("<selector>").css("background-color", "#ddd"); 
```

只要弄清楚你的选择器应该是什么，就应该这样做。所有按钮都应该有一个公共类，所以这很可能是您应该使用的选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:38:18.687

```
$('.ui-dialog-buttonpane').find('button').css("border", "none"); 
```

# java - jar 文件可以在类路径中出现两次吗？

> ID：10517723
> 
> 赞同：1
> 
> 时间：2012-05-09T14:02:30.347
> 
> 标签：java, jar, classpath

我在一个文件夹中有一堆 jar，为了简化类路径设置，我使用了新的（在 Java 6 中）类路径通配符语法：

`CLASSPATH=":/$JARS/*"`

这将获取 $JARS 目录中的所有 jar。到现在为止还挺好。

但是，该目录中有一个 jar，我需要首先出现在类路径中，通配符语法的文档说明 jar 的顺序取决于实现，不能依赖。

我想做的是在通配符前面添加一个我需要首先明确出现的罐子：

`CLASSPATH=":/$JARS/first.jar:/$JARS/*"`

现在这意味着`first.jar`它将在类路径中出现两次，首先是显式引用，然后是通配符。这会给我带来什么问题吗？

是的，我知道我可以放入`first.jar`一个不同的目录来避免这个问题，但可以说这样做会涉及很多我不想处理的麻烦（我正在处理第 3 方产品） .

**编辑：** 我需要首先出现 jar，因为它包含一些 XML 配置文件（作为资源加载），这些文件需要覆盖另一个 jar 中具有相同名称的 XML 文件（由第 3 方供应商提供）。只是为了澄清，`first.jar`是我控制的唯一罐子。目录中的所有其他 jar 均由第 3 方供应商提供。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T14:12:10.057

是的，相同的 jars/类可以在类路径中出现多次。jvm 按顺序搜索它们。

此问题的更多信息：[JVM 如何处理不同版本的重复 JAR](https://stackoverflow.com/questions/1669305/how-does-jvm-deal-with-duplicate-jars-of-different-versions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:10:24.853

会有一些问题。有时 JVM 可能工作正常，但有时它可能无法识别任何 jar。最好在类路径中有一个 jar。

# iphone - 如何在 iPhone 上使用 WiFi 发送串行数据？

> ID：10517724
> 
> 赞同：1
> 
> 时间：2012-05-09T14:02:31.363
> 
> 标签：iphone, wifi, serial-communication

我构建了一个机器人，我想通过我的 iPhone 无线控制它。由于苹果公司在这方面的丑陋政策，蓝牙被淘汰了，所以我想知道我是否可以为机器人配备 WiFi 系统，如果我可以从 iPhone 上的应用程序发送数据流。Apple 是否允许通过其 API 进行任何类型的 WiFi 访问，而不是通过浏览器？理想情况下，该应用程序还可以读取机器人发送的数据。这有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:06:46.160

是的，这是可能的，假设机器人可以以某种方式打开一个套接字。

您可以在机器人和 iPhone 之间创建 TCPI/IP 套接字连接。使用此连接，您可以发送和接收您想要的任何数据。

一些涉及类似问题的问题：

[如何创建一个小型 Mac 应用程序，通过 WiFi 网络从 iOS 应用程序接收数据？](https://stackoverflow.com/questions/3902282/how-can-i-create-a-small-mac-app-that-receives-data-over-the-wifi-network-from-a)

[iPhone 和 Mac 之间的 Ad Hoc Wifi 连接 - 可能吗？](https://stackoverflow.com/questions/1848525/ad-hoc-wifi-connection-between-iphone-mac-possible)

（您主要使用 Bonjour 链接问题，因为这可能在机器人上不可用，您需要另一种方法来发现 IP 地址）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:19:00.773

> 由于苹果在这方面的丑陋政策，蓝牙已被淘汰

您可以使用 Bonjour 通过蓝牙进行 ad-hoc 网络。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/8070998/using-ios-gamekits-bluetooth-bonjour-with-other-platforms)。

# playframework-2.0 - Ebean-Stacktrace 中缺少信息

> ID：10517726
> 
> 赞同：0
> 
> 时间：2012-05-09T14:02:34.490
> 
> 标签：playframework-2.0, ebean

今天遇到一个Ebean和play2.0的小问题。我在 de.ppi.psec.services.AuthenticationServiceImpl 第 333 行写了类似的东西

```
Ebean.find(PsecUser.class).where().eq("byLoginname", loginname).findUnique(); 
```

并获得以下 Stacktrace

```
 [error] application - Problem during validate Login
    javax.persistence.PersistenceException: Query threw SQLException:Feld "BYLOGINNAME" nicht gefunden
    Column "BYLOGINNAME" not found; SQL statement:
    select t0.id c0, t0.loginname c1, t0.email_address c2, t0.lastname c3, t0.firstname c4, t0.description c5, t0.enabled c6, t0.login_failed_count c7, t0.expired_date c8, t0.password c9, t0.last_update c10
    from psec_user t0
    where byLoginname = ?  [42122-158]
    Bind values:[null]
    Query was:
    select t0.id c0, t0.loginname c1, t0.email_address c2, t0.lastname c3, t0.firstname c4, t0.description c5, t0.enabled c6, t0.login_failed_count c7, t0.expired_date c8, t0.password c9, t0.last_update c10
    from psec_user t0
    where byLoginname = ?

            at com.avaje.ebeaninternal.server.query.CQuery.createPersistenceException(CQuery.java:849) ~[ebean.jar:na]
            at com.avaje.ebeaninternal.server.query.CQuery.createPersistenceException(CQuery.java:829) ~[ebean.jar:na]
            at com.avaje.ebeaninternal.server.query.CQueryEngine.findMany(CQueryEngine.java:238) ~[ebean.jar:na]
            at com.avaje.ebeaninternal.server.query.DefaultOrmQueryEngine.findMany(DefaultOrmQueryEngine.java:104) ~[ebean.jar:na]
            at com.avaje.ebeaninternal.server.core.OrmQueryRequest.findList(OrmQueryRequest.java:344) ~[ebean.jar:na]
            at com.avaje.ebeaninternal.server.core.DefaultServer.findList(DefaultServer.java:1469) ~[ebean.jar:na]
    Caused by: org.h2.jdbc.JdbcSQLException: Feld "BYLOGINNAME" nicht gefunden
    Column "BYLOGINNAME" not found; SQL statement:
    select t0.id c0, t0.loginname c1, t0.email_address c2, t0.lastname c3, t0.firstname c4, t0.description c5, t0.enabled c6, t0.login_failed_count c7, t0.expired_date c8, t0.password c9, t0.last_update c10
    from psec_user t0
    where byLoginname = ?  [42122-158]
            at org.h2.message.DbException.getJdbcSQLException(DbException.java:329) ~[h2.jar:1.3.158]
            at org.h2.message.DbException.get(DbException.java:169) ~[h2.jar:1.3.158]
            at org.h2.message.DbException.get(DbException.java:146) ~[h2.jar:1.3.158]
            at org.h2.expression.ExpressionColumn.optimize(ExpressionColumn.java:134) ~[h2.jar:1.3.158]
            at org.h2.expression.Comparison.optimize(Comparison.java:154) ~[h2.jar:1.3.158]
            at org.h2.command.dml.Select.prepare(Select.java:797) ~[h2.jar:1.3.158]
    [error] application -

    ! @6aagbfped - Internal server error, for request [POST /login] ->

    play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[RuntimeException: java.lang.reflect.InvocationTargetException]]
            at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [play_2.9.1.jar:2.0.1]
            at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [play_2.9.1.jar:2.0.1]
            at akka.actor.Actor$class.apply(Actor.scala:311) [akka-actor.jar:2.0.1]
            at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1.jar:2.0.1]
            at akka.actor.ActorCell.invoke(ActorCell.scala:619) [akka-actor.jar:2.0.1]
            at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:196) [akka-actor.jar:2.0.1]
    Caused by: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
            at play.data.Form.bind(Form.java:225) ~[play_2.9.1.jar:2.0.1]
            at play.data.Form.bindFromRequest(Form.java:145) ~[play_2.9.1.jar:2.0.1]
            at controllers.psec.AuthController.signIn(AuthController.java:48) ~[psec_2.9.1.jar:0.1]
            at Routes$$anonfun$routes$1$$anonfun$apply$17$$anonfun$apply$18.apply(routes_routing.scala:132) ~[classes/:na]
            at Routes$$anonfun$routes$1$$anonfun$apply$17$$anonfun$apply$18.apply(routes_routing.scala:132) ~[classes/:na]
            at play.core.Router$HandlerInvoker$$anon$4$$anon$1.invocation(Router.scala:1086) ~[play_2.9.1.jar:2.0.1]
    Caused by: java.lang.reflect.InvocationTargetException: null
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.6.0_31]
            at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:1.6.0_31]
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:1.6.0_31]
            at java.lang.reflect.Method.invoke(Unknown Source) ~[na:1.6.0_31]
            at play.data.Form.bind(Form.java:222) ~[play_2.9.1.jar:2.0.1]
            at play.data.Form.bindFromRequest(Form.java:145) ~[play_2.9.1.jar:2.0.1]
    Caused by: javax.persistence.PersistenceException: Query threw SQLException:Feld "BYLOGINNAME" nicht gefunden
    Column "BYLOGINNAME" not found; SQL statement:
    select t0.id c0, t0.loginname c1, t0.email_address c2, t0.lastname c3, t0.firstname c4, t0.description c5, t0.enabled c6, t0.login_failed_count c7, t0.expired_date c8, t0.password c9, t0.last_update c10
    from psec_user t0
    where byLoginname = ?  [42122-158]
    Bind values:[null]
    Query was:
    select t0.id c0, t0.loginname c1, t0.email_address c2, t0.lastname c3, t0.firstname c4, t0.description c5, t0.enabled c6, t0.login_failed_count c7, t0.expired_date c8, t0.password c9, t0.last_update c10
    from psec_user t0
    where byLoginname = ?

            at com.avaje.ebeaninternal.server.query.CQuery.createPersistenceException(CQuery.java:849) ~[ebean.jar:na]
            at com.avaje.ebeaninternal.server.query.CQuery.createPersistenceException(CQuery.java:829) ~[ebean.jar:na]
            at com.avaje.ebeaninternal.server.query.CQueryEngine.findMany(CQueryEngine.java:238) ~[ebean.jar:na]
            at com.avaje.ebeaninternal.server.query.DefaultOrmQueryEngine.findMany(DefaultOrmQueryEngine.java:104) ~[ebean.jar:na]
            at com.avaje.ebeaninternal.server.core.OrmQueryRequest.findList(OrmQueryRequest.java:344) ~[ebean.jar:na]
            at com.avaje.ebeaninternal.server.core.DefaultServer.findList(DefaultServer.java:1469) ~[ebean.jar:na]
    Caused by: org.h2.jdbc.JdbcSQLException: Feld "BYLOGINNAME" nicht gefunden
    Column "BYLOGINNAME" not found; SQL statement:
    select t0.id c0, t0.loginname c1, t0.email_address c2, t0.lastname c3, t0.firstname c4, t0.description c5, t0.enabled c6, t0.login_failed_count c7, t0.expired_date c8, t0.password c9, t0.last_update c10
    from psec_user t0
    where byLoginname = ?  [42122-158]
            at org.h2.message.DbException.getJdbcSQLException(DbException.java:329) ~[h2.jar:1.3.158]
            at org.h2.message.DbException.get(DbException.java:169) ~[h2.jar:1.3.158]
            at org.h2.message.DbException.get(DbException.java:146) ~[h2.jar:1.3.158]
            at org.h2.expression.ExpressionColumn.optimize(ExpressionColumn.java:134) ~[h2.jar:1.3.158]
            at org.h2.expression.Comparison.optimize(Comparison.java:154) ~[h2.jar:1.3.158]
            at org.h2.command.dml.Select.prepare(Select.java:797) ~[h2.jar:1.3.158] 
```

我想知道为什么我没有在堆栈跟踪中找到我的课程。我用一个旧的 Ebean 应用程序尝试了类似的东西，然后我得到了信息。那么为什么我没有在堆栈跟踪中找到我的课程？我解决了这个问题，所以我确定错误出现在 de.ppi.psec.services.AuthenticationServiceImpl 第 333 行。

# oracle - 从复合主键表中删除重复项

> ID：10517737
> 
> 赞同：3
> 
> 时间：2012-05-09T14:03:16.460
> 
> 标签：oracle, key, sql-delete, composite

我有一个带有复合主键（a，b）的表。我在临时表中进行了备份，但有些重复记录是如何出现的。现在无法将备份记录移动到主表。

请建议一些方法来删除基于 2 列的临时表中的重复项。表是 oracle 表，有 7000 万条记录，大约 400 万个重复项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:07:27.017

你有两个选择：

1.  在复制它们之前删除源表中的重复项
2.  首先不要复制重复项。

第二个效率更高，可以使用以下语句完成：

```
INSERT INTO target_table (a,b,c,d,e,f)
SELECT a,b,max(c),max(d),max(e),max(f)
FROM source_table
GROUP BY a,b; 
```

作为替代方案（例如，当某些列被定义为`CLOB`or`LONG`并且您不能对它们应用 max() 时）：

```
INSERT INTO target_table (a,b,c,d,e,f)
SELECT a,b,c,d,e,f
FROM (
    SELECT a,b,c,d,e,f,
           row_number() over (partition by a,b) as rn
    FROM source_table
) 
WHERE rn = 1; 
```

如果您确实想首先删除行，可以使用以下语句执行此操作：

```
DELETE FROM source_table
WHERE rowid NOT IN (SELECT min(rowid)
                    FROM source_table
                    GROUP BY a,b
                    HAVING count(*) > 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:15:17.487

1.  [orafaq](http://www.orafaq.com/faq/how_does_one_eliminate_duplicates_rows_from_a_table)中列出了 3 种方法

2.  消除重复记录的最简单方法是 SELECT DISTINCT 到临时表中，截断原始表并将记录选择回原始表中。详情[在这里](http://www.sqlteam.com/article/deleting-duplicate-records)。

3.  [这个](http://support.microsoft.com/kb/139444)适用于 MSSQL Server，但我想同样的原则也适用于你的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:49:21.230

说我有类似的数据

```
 1   user1   1
2   user1   1
3   user1   1
4   user1   3
5   user1   9
6   user2   1
7   user2   1
8   user2   10
9   user3   97 
```

这里user1(3)和user2(1)有重复记录。

此查询将仅显示重复案例中的那些记录因此而不是 user1 的 3 条记录，它仅显示 2

```
 SELECT BT.NAME, BT.LOCATION
   FROM SO_BUFFER_TABLE_7 BT,
        (SELECT BT.NAME, BT.LOCATION, MAX(ROWID) AS UNQ
           FROM SO_BUFFER_TABLE_7 BT
          GROUP BY BT.NAME, BT.LOCATION
         HAVING COUNT(*) > 1) A
  WHERE BT.ROWID <> A.UNQ
    AND BT.NAME = A.NAME
    AND BT.LOCATION = A.LOCATION 
```

结果是

```
 1   user1   1
2   user1   1
3   user2   1 
```

您可以将 SELECT 替换为 DELETE 以删除重复记录。

希望能帮助到你

# sql - 在存储过程中从字符串转换日期时间时转换失败

> ID：10517741
> 
> 赞同：5
> 
> 时间：2012-05-09T14:03:35.197
> 
> 标签：sql

在存储过程中运行以下 sql 时出现转换错误，因为由于某种原因我无法转换为 varchar

```
Declare @sql varchar(100)
Declare @ddtime datetime

set @ddtime = '2012-02-03 22:14:50.057'

set @sql = 'select * from table1 where tdate='+@ddtime

exec(@sql) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T14:06:16.207

您需要将其转换`@ddtime`为 a ，`varchar`因为您将其包含在字符串中：

```
Declare @sql varchar(100)
Declare @ddtime datetime

set @ddtime = '2012-02-03 22:14:50.057'

set @sql =  'select * from table1 where tdate= '''+ convert(nvarchar(25), @ddtime, 121) + ''''

exec(@sql) 
```

或者只是让你`@ddtime`作为 a`varchar`而不是 a `datetime`。

```
Declare @ddtime varchar(25) 
```

保留日期的`convert(varchar(25), @ddtime, 121)`格式与您最初设置的格式相同。

[如何在 SQL Server 中格式化日期时间和日期](http://anubhavg.wordpress.com/2009/06/11/how-to-format-datetime-date-in-sql-server-2005/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:06:54.787

将@ddtime 变量数据类型更改为varchar。您正在尝试连接 varchar 和 datetime。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:08:32.017

你的 ddtime 是日期时间

你不能将它连接到字符串。

改变

```
set @sql = 'select * from table1 where tdate='''+cast ( @ddtime as nvarchar(100))+'''' 
```

或者

改成

```
Declare @ddtime nvarchar(100) 
```

# ruby-on-rails - Rails 3 - 自己的验证消息不是“不是数字”

> ID：10517756
> 
> 赞同：2
> 
> 时间：2012-05-09T14:04:43.323
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想检查我的应用程序，输入值应该是整数，**不能**为空或 nil。

```
class Event < ActiveRecord::Base
  validates :event_cost, :presence => { :message => "can't be empty..." }

  validates :event_cost, 
              :numericality => { :only_integer => { :message => "should be only integer" } } 
end 
```

因此，如果用户在该字段中不打印任何内容，我会收到消息`"Event cost is not a number"`。我怎样才能设置我自己的消息而不是那个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T14:13:28.683

尝试

```
class Event < ActiveRecord::Base
  validates :event_cost, :presence => { :message => "can't be empty..." }

  validates :event_cost, 
              :numericality => { :message => "Your own message", :only_integer => true } 
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:11:28.277

试试这个，它会正常工作，因为你没有将 only_integer 设置为 true 它不能正常工作

```
:event_cost, 
          :numericality => { :only_integer => true, :message => "should be only integer"} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T14:13:43.370

试试这个

验证 :event_cost, :numericality => { :only_integer => true,{ :message => "应该只是整数" } }

# svn - 如何在使用多配置作业时防止 Jenkins 从 SVN 签出到工作区文件夹

> ID：10517757
> 
> 赞同：4
> 
> 时间：2012-05-09T14:04:56.337
> 
> 标签：svn, jenkins

我已经使用多配置项目选项在 Jenkins 中配置了一个作业。我能够成功构建用户定义的轴目标，但发现 Jenkins 首先开始在工作区文件夹中签出（实际上并没有使用）并在工作区/目标文件夹中签出相同的内容，在该文件夹中为该目标构建实际执行。

因此，当触发构建时，Jenkins 首先将给定的 URL 检出到 workspace/，然后再检出到 workspace/target/ 等。

实际步骤：

```
1\. checkout to workspace
2\. checkout to workspace/target/<target1>
3\. checkout to workspace/target/<target2> 
```

预期步骤：

```
1\. checkout to workspace/target/<target1>
2\. checkout to workspace/target/<target2> 
```

我怎样才能防止詹金斯进行第一次结帐而只做相关的结帐？

甚至更好的是，我的构建允许在一次结帐中完成所有操作。我可以这样做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-09T12:12:18.543

问题是 Jenkins 使用了一个父作业，它为每个目标生成作业。不幸的是，它还对作业工作区进行了结帐。

如果您在不同的从机/机器上运行这些特定于目标的作业，您可以将目标检出目录设置为与父工作区目录相同。如此有效地共享该节点上的工作空间，而不是复制它。

在“**高级项目选项**”部分中，单击“高级”按钮以展开该部分。选中**使用自定义工作区**并使用“。” 用于**子构建目录**。如果未指定，则默认为类似`/target/<target1>`

Now instead of checking out to `workspace/target/<target1>` it will only checkout to `workspace/` on the different targets.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:40:29.177

Workaorund：使用将轮询 SVN 的触发器作业，进行结帐，并通过[Parameterized Trigger Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)开始您的主要作业。

# asp.net - 如何在asp.net中执行另一个页面

> ID：10517760
> 
> 赞同：0
> 
> 时间：2012-05-09T14:05:22.267
> 
> 标签：asp.net

我有一个页面需要多次从另一个页面调用。重要的是执行 Page_Load 方法。第一页有这个代码（第一页名称是Call.aspx）：

```
 Dim objWebClient As New WebClient
                        objWebClient.Headers.Add("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)")
                        Dim objStream As Stream = objWebClient.OpenRead("D:\confirm.aspx")
                        Dim objSR As New System.IO.StreamReader(objStream)
                        objWebClient.Dispose()
                        objStream.Dispose() 
```

这应该调用另一个页面。它不执行其他页面。我有以下代码来确保执行确认页面：

```
 Dim objWrite As New System.IO.StreamWriter("c:\aa.txt")
        objWrite.WriteLine("Hello")
        objWrite.Close() 
```

但是没有输出。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:19:30.383

听起来您可能对[HttpServerUtility.Execute()](http://msdn.microsoft.com/en-us/library/fb04e8f7.aspx)感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:14:00.420

这是在做什么？：

```
objWebClient.OpenRead("D:\confirm.aspx") 
```

是`D:\`对网址的引用吗？看起来您只是在调用文件本身，这不会产生您想要的效果。（暂时忽略位于驱动器根目录中的文件......）

ASPX 页面本身不可执行。Web 服务器（通常是 IIS）必须为它们处理请求，并通过 .NET 运行时等传递这些请求，以便处理服务器端处理。文件本身只是文本，它没有解释服务器端代码的内部方法。这就是 Web 服务器的用途。

为了向 Web 资源（页面或任何其他 Web 资源）发出 Web 请求，您需要使用 Web URL。类似的东西：`http://localhost/confirm.aspx` 因此该页面将需要由 Web 服务器在某个地方提供服务。

**然而**，更重要的是，您*不必*这样做。如果代码需要由两个页面共享，则应将该代码提取到共享组件中。“页面”永远不必“调用另一个页面”（除非它们位于完全独立的服务器上，并且您将寻求更多的 SOA 方法）。两个页面都应该调用一个共享组件（一个类，通常可能在它自己的程序集中，或者只是在具有这些页面的 Web 项目中）。

业务逻辑不在页面中。只有 UI 进入页面。共享业务逻辑进入业务类。

# jquery - 使用 JQuery 将文本添加到 Sharepoint 增强的富文本编辑器

> ID：10517762
> 
> 赞同：1
> 
> 时间：2012-05-09T14:05:29.080
> 
> 标签：jquery, sharepoint, rich-text-editor

我正在编写一个脚本，该脚本将在页面上的富文本编辑器中插入一个表格。为此，我编写了以下代码：

```
$('#'+id).contents().children().children('body').html(value); 
```

其中：*value*是一个带有表格 html 代码的变量。

当我执行代码时，如果我使用警报检查 iFrame 内的 html 代码，它显示在 body 标记内有一个表格，我在 value 变量中拥有的表格，但该表格没有显示在文本区域中富文本编辑器。

你有什么想法吗？我已经在互联网上搜索了 3 天的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:07:43.040

我的[博客上](http://sympmarc.com/2011/05/25/setting-a-rich-text-column-in-a-sharepoint-form/)有一篇文章，说明了如何做到这一点。这是基本思想：

```
var systemDescriptionRTETextArea = $("textarea[Title='System Description']");
$(systemDescriptionRTETextArea).html("Cream cheese"); 
```

# asp.net - ASP.NET 模拟 NT AUTHORITY\IUSR 但模拟被禁用。ASP.NET 错误？

> ID：10517764
> 
> 赞同：14
> 
> 时间：2012-05-09T14:05:42.010
> 
> 标签：asp.net, sql-server, iis, impersonation

我在“ASP.NET v4.0 Classic”应用程序池中运行在 Windows 7 / IIS 7.5 上的 ASP.NET 4.0 应用程序，该应用程序配置为作为网络服务运行。该应用程序有一个`Application_EndRequest`连接到本地 SQL Server 实例的处理程序。SQL 连接字符串指定`Integrated Security=SSPI`. Web.config*没有*`<identity impersonate="true" />`. _

当我浏览到 时`http://localhost/TestSite/`，会引发以下异常：

```
System.Data.SqlClient.SqlException (0x80131904): Login failed for user 'NT AUTHORITY\IUSR'.
   ...
   at System.Data.SqlClient.SqlConnection.Open()
   at Global.Application_EndRequest(Object sender, EventArgs e) 
```

当我浏览到（在 IIS 中配置的默认文档）或任何其他 .aspx 页面时，*不会*引发此异常；`http://localhost/TestSite/default.aspx`在这些情况下，应用程序作为“NT AUTHORITY\NETWORK SERVICE”正确连接到 SQL Server，这是一个有效的登录。

**即使禁用了模拟，为什么 ASP.NET 会在 EndRequest 中模拟“NT AUTHORITY\IUSR”？这是 ASP.NET 中的错误吗？**

以下 Global.asax.cs 文件演示了该问题：

```
public class Global : HttpApplication
{
    public Global()
    {
        this.BeginRequest += delegate { Log("BeginRequest"); };
        this.PreRequestHandlerExecute += delegate { Log("PreRequestHandlerExecute"); };
        this.PostRequestHandlerExecute += delegate { Log("PostRequestHandlerExecute"); };
        this.EndRequest += delegate { Log("EndRequest"); };
    }

    protected void Application_EndRequest(Object sender, EventArgs e)
    {
        try
        {
            using (SqlConnection connection = new SqlConnection("Server=.;Integrated Security=SSPI"))
            {
                connection.Open();
            }
        }
        catch (Exception ex)
        {
            Trace.WriteLine(ex);
        }
    }

    private static void Log(string eventName)
    {
        HttpContext context = HttpContext.Current;
        Type impersonationContextType = typeof(HttpContext).Assembly.GetType("System.Web.ImpersonationContext", true);
        Trace.WriteLine(string.Format("ThreadId={0} {1} {2} Impersonating={3}",
            Thread.CurrentThread.ManagedThreadId,
            context.Request.Url,
            eventName,
            impersonationContextType.InvokeMember("CurrentThreadTokenExists", BindingFlags.NonPublic | BindingFlags.Static | BindingFlags.GetProperty, null, context, null)));
    }
} 
```

这是跟踪输出：

```
ThreadId=3 http://localhost/TestSite/ BeginRequest Impersonating=False
ThreadId=3 http://localhost/TestSite/ PreRequestHandlerExecute Impersonating=False
ThreadId=7 http://localhost/TestSite/default.aspx BeginRequest Impersonating=False
ThreadId=7 http://localhost/TestSite/default.aspx PreRequestHandlerExecute Impersonating=False
ThreadId=7 http://localhost/TestSite/default.aspx PostRequestHandlerExecute Impersonating=False
ThreadId=7 http://localhost/TestSite/default.aspx EndRequest Impersonating=False
ThreadId=7 http://localhost/TestSite/ PostRequestHandlerExecute Impersonating=True
ThreadId=7 http://localhost/TestSite/ EndRequest Impersonating=True
System.Data.SqlClient.SqlException (0x80131904): Login failed for user 'NT AUTHORITY\IUSR'.
   ...
   at System.Data.SqlClient.SqlConnection.Open()
   at Global.Application_EndRequest(Object sender, EventArgs e) 
```

请注意，对`TestSite/`（映射到`DefaultHttpHandler`）的请求似乎产生了对（映射到）的*嵌套*请求。ASP.NET 完成处理后，它会在继续处理对.`TestSite/default.aspx``ASP.default_aspx``TestSite/default.aspx``TestSite/`

**更新：**我已将此问题提交给[Microsoft Connect](http://connect.microsoft.com/VisualStudio/feedback/details/742531/asp-net-impersonates-nt-authority-iusr-but-impersonation-is-disabled)。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-09T23:05:01.300

最有可能的是，您的服务器、站点或应用程序的设置已设置为“匿名身份验证”模式导致页面请求以 IUSR 用户身份处理。您的应用程序不请求模拟并不重要；IIS 正在强制它。（顺便说一句，“模拟”是 Windows 领域的通用术语，用于假设另一个用户的凭据。它不是特定于 ASP.NET。）

一点背景知识：

出于安全原因，IIS 允许您的服务器在不同的系统凭据下处理“匿名”和“经过身份验证”的请求。

现在，在 IIS 7.5 中，如果您同时启用了匿名身份验证和 Forms 身份验证（这是典型的），在您的网站用户通过 Forms 登录之前，它会认为您的用户是“匿名的”。在您的用户使用 Forms Auth 登录后，它会认为您的用户“已通过身份验证”。

起初我发现这种行为令人困惑，因为它是 IIS 6.0 的一个变化，它不知道 Forms auth，并认为所有 Forms-Authenticated 用户都是匿名的！

如果需要，您可以更改提交匿名请求的身份。我的偏好（听起来也像您的偏好）是它们在**与我网站的应用程序池相同的系统凭据下运行。** 要让 IIS 做到这一点，请执行以下操作：

1.  打开 IIS 管理器 (inetmgr)
2.  在“连接”面板中，向下钻取到您站点的节点并选择它
3.  在右侧面板的“IIS”组下，双击“身份验证”图标。
4.  右键单击“匿名身​​份验证”并从上下文菜单中选择“编辑...”。
5.  在弹出对话框中，选择**“应用程序池标识”**单选按钮。
6.  单击确定。

第 5 步起初也让我感到困惑，因为我认为“应用程序池标识”意味着“应用程序池伪帐户”（IIS 7.5 中的另一个新功能）。当然，它的真正含义是**“应用程序池配置为在同一帐户下运行，不管是什么”。**

如果您希望该服务器上的所有网站默认使用此行为，甚至只是特定站点下的单个应用程序，您也可以在这些级别配置身份验证选项。只需在 Connections 窗格中选择要配置的节点，然后重复步骤 3-6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:18:11.277

**即使应用程序（可能）不使用模拟，为什么应用程序会尝试以“NT AUTHORITY\IUSR”身份登录？**

如果你这样做

```
<identity impersonate="true"/> 
```

它将模拟登录用户

如果你这样做

```
<identity impersonate="true" userName="contoso\Jane" password="pass"/> 
```

它将模拟上面设置的用户。

但是，如果您根本不模拟并使用 Windows 身份验证，那么它使用默认系统帐户是有意义的。

我不知道为什么它第一次尝试为IUSR，然后在后续请求中自动切换到NETWORK SERVICE。但我确实知道，当您从一台服务器跳转到另一台服务器时，不会使用应用程序池凭据。除非您如下所示设置模拟用户，否则 NETWORK SERVICE 是用于在服务器外部获取资源的默认帐户。

```
 <connectionStrings>
        <add name="myConnectionString" connectionString="Data Source=MyServerName;Initial Catalog=MyDataBaseName;Integrated Security=True;"
          providerName="System.Data.SqlClient" />
      </connectionStrings>

<identity impersonate="true" userName="contoso\Jane" password="pass"/> 
```

# python - django-debug-toolbar 没有出现

> ID：10517765
> 
> 赞同：156
> 
> 时间：2012-05-09T14:05:43.123
> 
> 标签：python, django, django-debug-toolbar

我看了其他问题，无法弄清楚...

我做了以下安装 django-debug-toolbar：

1.  pip install django-debug-toolbar
2.  添加到中间件类：

> ```
> MIDDLEWARE_CLASSES = (
>     'django.middleware.common.CommonMiddleware',
>     'django.contrib.sessions.middleware.SessionMiddleware',
>     'django.middleware.csrf.CsrfViewMiddleware',
>     'django.contrib.auth.middleware.AuthenticationMiddleware',
>     'django.contrib.messages.middleware.MessageMiddleware',
>     # Uncomment the next line for simple clickjacking protection:
>     # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
>     'debug_toolbar.middleware.DebugToolbarMiddleware',
> ) 
> ```

3 添加了 INTERNAL_IPS：

> INTERNAL_IPS = ('174.121.34.187',)

4 添加 debug_toolbar 到已安装的应用程序

我没有收到任何错误或任何东西，工具栏没有出现在任何页面上，甚至没有出现在管理员页面上。

我什至将 debug_toolbar 模板的目录添加到我的`TEMPLATE_DIRS`

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2012-05-09T14:21:03.530

愚蠢的问题，但你没有提到它，所以......`DEBUG`设置什么？它不会加载，除非它是`True`.

如果它仍然不起作用，请尝试添加“127.0.0.1” `INTERNAL_IPS`。

**更新**

这是最后的努力，您不应该*这样*做，但它会清楚地显示是否只是一些配置问题或是否存在一些更大的问题。

将以下内容添加到 settings.py：

```
def show_toolbar(request):
    return True
SHOW_TOOLBAR_CALLBACK = show_toolbar 
```

这将有效地删除调试工具栏的所有检查，以确定它是否应该自行加载；它总是会加载。仅将其保留用于测试目的，如果您忘记并使用它启动，所有访问者也将看到您的调试工具栏。

[有关显式配置，另请参阅此处](http://django-debug-toolbar.readthedocs.org/en/latest/installation.html)的官方安装文档。

编辑（2015 年 6 月 17 日）：

显然，核选项的语法已经改变。它现在在自己的字典中：

```
def show_toolbar(request):
    return True
DEBUG_TOOLBAR_CONFIG = {
    "SHOW_TOOLBAR_CALLBACK" : show_toolbar,
} 
```

他们的[测试](https://github.com/django-debug-toolbar/django-debug-toolbar/blob/master/tests/settings.py#L72)使用这本词典。

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2013-02-04T22:43:01.773

调试工具栏希望将 request.META['REMOTE_ADDR'] 中的 ip 地址设置在 INTERNAL_IPS 设置中。在您的一个视图中添加打印语句，如下所示：

```
print("IP Address for debug-toolbar: " + request.META['REMOTE_ADDR']) 
```

然后加载该页面。确保 IP 在 settings.py 中的 INTERNAL_IPS 设置中。

通常，我认为您可以通过查看计算机的 ip 地址轻松确定地址，但在我的情况下，我在带有端口转发的 Virtual Box 中运行服务器......谁知道发生了什么。尽管在 VB 或我自己的操作系统上的 ifconfig 中没有看到它，但 REMOTE_ADDR 键中显示的 IP 是激活工具栏的诀窍。

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2012-09-09T15:55:37.447

如果其他一切正常，也可能是您的模板缺少显式结束`<body>`标记——</p>

> [注意：只有当响应的 mimetype 是 text/html 或 application/xhtml+xml 并且包含结束标记时，调试工具栏才会显示自己。](https://github.com/django-debug-toolbar/django-debug-toolbar#installation)

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2018-05-23T15:19:11.207

# 码头工人

如果您在带有 docker 的**Docker**容器中使用 Django 服务器进行开发，则启用工具栏的说明不起作用。原因与您需要添加的实际地址将`INTERNAL_IPS`是动态地址有关，例如 172.24.0.1。而不是尝试动态设置 的值`INTERNAL_IPS`，直接的解决方案是替换启用工具栏的功能，`settings.py`例如：

```
DEBUG_TOOLBAR_CONFIG = {
    'SHOW_TOOLBAR_CALLBACK': lambda _request: DEBUG
} 
```

这也适用于其他动态路由情况，例如 Vagrant 或 Heroku。

* * *

这里有一些更多的细节供好奇的人参考。django_debug_tool 中决定是否显示工具栏的代码检查如下的值`REMOTE_ADDR`：

```
if request.META.get('REMOTE_ADDR', None) not in INTERNAL_IPS:
       return False 
```

因此，如果`REMOTE_ADDR`由于动态 docker 路由而实际上不知道 的值，则工具栏将不起作用。您可以使用 docker network 命令查看动态 IP 值，例如 `docker network inspect my_docker_network_name`

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2013-12-05T21:30:57.237

当前的稳定版本 0.11.0 需要满足以下条件才能显示工具栏：

**设置文件：**

1.  `DEBUG = True`
2.  `INTERNAL_IPS`包括您的浏览器 IP 地址，而不是服务器地址。如果在本地浏览，这应该是`INTERNAL_IPS = ('127.0.0.1',)`. 如果远程浏览，只需[指定您的公共地址](http://www.whatsmyip.org/)。
3.  要安装的 debug_toolbar 应用程序，即`INSTALLED_APPS = (..., 'debug_toolbar',)`
4.  要添加的调试工具栏中间件类，即`MIDDLEWARE_CLASSES = ('debug_toolbar.middleware.DebugToolbarMiddleware', ...)`. 它应该尽可能早地放在列表中。

**模板文件：**

1.  必须是类型`text/html`
2.  必须有一个结束`</html>`标签

**静态文件：**

如果您提供静态内容，请确保通过以下方式收集 css、js 和 html：

```
./manage.py collectstatic 
```

* * *

**关于即将发布的 django-debug-toolbar 版本的注意事项**

较新的开发版本为设置点 2、3 和 4 添加了默认值，这使生活更简单一些，但是，与任何开发版本一样，它都有错误。我发现`ImproperlyConfigured`通过 nginx/uwsgi 运行时来自 git 的最新版本导致错误。

无论哪种方式，如果您想从 github 安装最新版本，请运行：

```
pip install -e git+https://github.com/django-debug-toolbar/django-debug-toolbar.git#egg=django-debug-toolbar 
```

您还可以通过执行以下操作克隆特定提交：

```
pip install -e git+https://github.com/django-debug-toolbar/django-debug-toolbar.git@ba5af8f6fe7836eef0a0c85dd1e6d7418bc87f75#egg=django_debug_toolbar 
```

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2016-05-04T12:29:15.817

我尝试了一切，从设置`DEBUG = True`到设置`INTERNAL_IPS`到客户端的 IP 地址，甚至手动配置 Django 调试工具栏（请注意，最近的版本会自动进行所有配置，例如添加中间件和 URL）。在远程开发服务器中没有任何工作（尽管它在本地工作）。唯一有效的方法是按如下方式配置工具栏：

```
DEBUG_TOOLBAR_CONFIG = {
    "SHOW_TOOLBAR_CALLBACK" : lambda request: True,
} 
```

这取代了决定是否应显示工具栏的默认方法，并始终返回 true。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2012-05-09T14:30:07.223

我的工具栏工作得非常完美。使用此配置：

1.  `DEBUG = True`
2.  `INTERNAL_IPS = ('127.0.0.1', '192.168.0.1',)`
3.  `DEBUG_TOOLBAR_CONFIG = {'INTERCEPT_REDIRECTS': False,}`
4.  中间件是第一个元素`MIDDLEWARE_CLASSES`：

> ```
> MIDDLEWARE_CLASSES = (
>     'debug_toolbar.middleware.DebugToolbarMiddleware',
>     'django.middleware.common.CommonMiddleware',
>     'django.contrib.sessions.middleware.SessionMiddleware',
>     'django.middleware.csrf.CsrfViewMiddleware',
>     'django.contrib.auth.middleware.AuthenticationMiddleware',
>     'django.contrib.messages.middleware.MessageMiddleware',
> ) 
> ```

我希望它有帮助

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2014-10-20T19:05:40.957

在 Windows 上添加`10.0.2.2`到您的 INTERNAL_IPS，它在内部与 vagrant 一起使用

INTERNAL_IPS = ('10.0.2.2', )

这应该有效。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2012-08-29T06:28:56.057

我遇到了同样的问题，经过一番谷歌搜索后终于解决了。

在 INTERNAL_IPS 中，您需要有*客户端的*IP 地址。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-11-01T13:41:39.803

可能导致工具栏保持隐藏状态的另一件事是它找不到所需的静态文件。debug_toolbar 模板使用 {{ STATIC_URL }} 模板标签，因此请确保静态文件中有一个名为 debug toolbar 的文件夹。

collectstatic 管理命令应该在大多数安装中处理这个问题。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-10-05T21:57:59.813

我尝试了[pydanny 的 cookiecutter-django](https://github.com/pydanny/cookiecutter-django/blob/master/%7B%7Bcookiecutter.repo_name%7D%7D/%7B%7Bcookiecutter.repo_name%7D%7D/config/local.py)的配置，它对我有用：

```
# django-debug-toolbar
MIDDLEWARE_CLASSES = Common.MIDDLEWARE_CLASSES + ('debug_toolbar.middleware.DebugToolbarMiddleware',)
INSTALLED_APPS += ('debug_toolbar',)

INTERNAL_IPS = ('127.0.0.1',)

DEBUG_TOOLBAR_CONFIG = {
    'DISABLE_PANELS': [
        'debug_toolbar.panels.redirects.RedirectsPanel',
    ],
    'SHOW_TEMPLATE_CONTEXT': True,
}
# end django-debug-toolbar 
```

我只是通过添加`'debug_toolbar.apps.DebugToolbarConfig'`而不是[官方 django-debug-toolbar 文档](http://django-debug-toolbar.readthedocs.org/en/1.2/installation.html#quick-setup)`'debug_toolbar'`中提到的来修改它，因为我使用的是 Django 1.7。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2014-09-29T21:32:55.520

对先前答案的补充：

如果工具栏没有显示，但它在 html 中加载（在浏览器中检查您的站点 html，向下滚动）

问题可能是找不到调试工具栏静态文件（您也可以在站点的访问日志中看到这一点，例如 /static/debug_toolbar/js/toolbar.js 的 404 错误）

然后可以通过以下方式修复它（nginx和apache的示例）：

nginx配置：

```
location ~* ^/static/debug_toolbar/.+.(ico|css|js)$ {
    root [path to your python site-packages here]/site-packages/debug_toolbar;
} 
```

阿帕奇配置：

```
Alias /static/debug_toolbar [path to your python site-packages here]/site-packages/debug_toolbar/static/debug_toolbar 
```

或者：

```
manage.py collectstatic 
```

更多关于 collectstatic 的信息：[https ://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#collectstatic](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#collectstatic)

或手动将 debug_toolbar 静态文件的 debug_toolbar 文件夹移动到您设置的静态文件文件夹

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2020-07-31T19:31:27.257

我知道这个问题有点老了，但是今天我用 docker 安装了 django-toolbar 并遇到了同样的问题，这为我解决了

```
INTERNAL_IPS = ["127.0.0.1", "10.0.2.2"]

import socket
hostname, _, ips = socket.gethostbyname_ex(socket.gethostname())
INTERNAL_IPS += [".".join(ip.split(".")[:-1] + ["1"]) for ip in ips] 
```

正如我在评论中读到的，问题是 docker 使用动态 ip，为了解决这个问题，我们可以从上面的代码中获取 ip

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2017-01-01T20:47:27.787

**Django 1.8.5：**

我必须将以下内容添加到项目 url.py 文件中才能显示调试工具栏。之后显示调试工具栏。

```
 from django.conf.urls import include
 from django.conf.urls import patterns
 from django.conf import settings

  if settings.DEBUG:
      import debug_toolbar
      urlpatterns += patterns('',
              url(r'^__debug__/', include(debug_toolbar.urls)),
              ) 
```

**django 1.10：**及更高版本：

```
from django.conf.urls import include, url
from django.conf.urls import patterns
from django.conf import settings

if settings.DEBUG:

  import debug_toolbar
  urlpatterns =[
         url(r'^__debug__/', include(debug_toolbar.urls)),
         ] + urlpatterns 
```

也不要忘记将 debug_toolbar 包含到您的中间件中。调试工具栏主要在中间件中实现。在您的设置模块中启用它，如下所示：（django 较新版本）

* * *

```
MIDDLEWARE = [
# ...
'debug_toolbar.middleware.DebugToolbarMiddleware',
# 
```

旧式中间件：（中间件需要有_CLASSES键）

```
MIDDLEWARE_CLASSES = [
# ...
'debug_toolbar.middleware.DebugToolbarMiddleware',
# ...
] 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2014-10-15T20:40:15.070

In my case, it was another problem that hasn't been mentioned here yet: I had GZipMiddleware in my list of middlewares.

As the automatic configuration of debug toolbar puts the debug toolbar's middleware at the top, it only gets the "see" the gzipped HTML, to which it can't add the toolbar.

I removed GZipMiddleware in my development settings. Setting up the debug toolbar's configuration manually and placing the middleware *after* GZip's should also work.

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2014-01-17T15:43:46.553

`127.0.0.1:8000`对我来说，这就像在地址栏中输入一样简单，而不是`localhost:8000`显然与 INTERNAL_IPS 不匹配。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2016-05-09T11:57:08.777

在我的情况下，我只需要删除 python 编译文件（`*.pyc`）

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2013-05-02T09:37:29.567

对于这个特定的作者来说，情况并非如此，但我一直在为调试工具栏不显示而苦苦挣扎，在做了他们指出的一切之后，我发现这是 MIDDLEWARE 顺序的问题。因此，将中间件放在列表的前面可能会起作用。我的是第一个：

`MIDDLEWARE_CLASSES = ( 'debug_toolbar.middleware.DebugToolbarMiddleware', 'django.middleware.common.CommonMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware', 'dynpages.middleware.DynpageFallbackMiddleware', 'utils.middleware.UserThread', )`

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2014-04-28T02:41:49.557

我遇到了同样的问题，我通过查看 Apache 的错误日志解决了它。我用 mod_wsgi 在 mac os x 上运行了 apache debug_toolbar 的 tamplete 文件夹没有被加载

日志样本：

```
==> /private/var/log/apache2/dummy-host2.example.com-error_log <==
[Sun Apr 27 23:23:48 2014] [error] [client 127.0.0.1] File does not exist: /Library/WebServer/Documents/rblreport/rbl/static/debug_toolbar, referer: http://127.0.0.1/

==> /private/var/log/apache2/dummy-host2.example.com-access_log <==
127.0.0.1 - - [27/Apr/2014:23:23:48 -0300] "GET /static/debug_toolbar/css/toolbar.css HTTP/1.1" 404 234 "http://127.0.0.1/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.9; rv:28.0) Gecko/20100101 Firefox/28.0" 
```

我只是将这一行添加到我的 VirtualHost 文件中：

```
Alias /static/debug_toolbar /Library/Python/2.7/site-packages/debug_toolbar/static/debug_toolbar 
```

*   当然你必须改变你的python路径

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-12-11T19:11:24.237

这个对我有用。

```
#urls.py
if settings.DEBUG:
    from django.conf.urls.static import static
    import debug_toolbar
    import mimetypes

    mimetypes.add_type("application/javascript", ".js", True)

    urlpatterns += static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

    urlpatterns = [path('__debug__/', include(debug_toolbar.urls)), ] + urlpatterns 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2021-12-09T21:42:34.443

1.  就像你说的那样，我已经配置了文档中所说的所有内容，但 debug_toolbar 仍然没有出现。然后我在 Firefox 中试了一下，效果很好。

2.  然后从 chrome，我检查网页并更改类名 class="djdt-hidden"。您可以尝试更改或删除它。

3.  运行 manage.py collectstatic 并重复上述步骤

4.  实际上，您可以通过编辑跳过步骤 2 和 3

    `.djdt-hidden{ display: none;}`

    从路径

    > debug_toolbar/static/debug_toolbar/css/toolbar.css

5.  在 settings.py 中的某处添加这两行

    `import mimetypes`

    `mimetypes.add_type("application/javascript", ".js", True)`

6.  在 urls.py

    `import debug_toolbar`

    `urlpatterns += [ path('__debug__/', include(debug_toolbar.urls)),]`

7.  使用参考[django调试工具栏安装](https://django-debug-toolbar.readthedocs.io/en/latest/installation.html)

8.  如果它仍然不起作用，请创建 launch.json 并提及不同的端口号以进行调试

` {

```
"version": "0.2.0",
"configurations": [

    {
        "name": "Python: Django",
        "type": "python",
        "request": "launch",
        "program": "${workspaceFolder}\\manage.py",
        "args": [
            "runserver",
            "9000",
        ],
        "django": true
    }
] 
```

} `

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2013-06-21T18:10:15.273

你必须确保你的模板中有一个结束标签。

我的问题是我的模板中没有常规的 html 标签，我只是以纯文本显示内容。我通过从具有标签的 base.html 继承每个 html 文件来解决它。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-05-06T20:11:24.197

我在使用 Vagrant 时遇到了同样的问题。我通过添加`::ffff:192.168.33.1`到 INTERNAL_IPS 来解决这个问题，如下例所示。

```
INTERNAL_IPS = (
    '::ffff:192.168.33.1',
) 
```

请记住，这`192.168.33.10`是我在 Vagrantfile 中的专用网络中的 IP。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-04-14T20:42:54.860

对于使用 Pycharm 5 的任何人 - 模板调试在某些版本中不起作用。[已在 5.0.4 中修复，受影响的版本](https://youtrack.jetbrains.com/issue/PY-17923)- 5.0.1、5.0.2 签出问题

花很多时间来找出答案。也许会帮助某人

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-10-19T11:52:28.540

在我正在处理的代码中，在处理主请求期间发出了多个小请求（这是非常具体的用例）。它们是由同一个 Django 线程处理的请求。Django 调试工具栏 (DjDT) 不会出现这种行为，并在第一个响应中包含 DjDT 的工具栏，然后它会删除线程的状态。因此，当主请求被发送回浏览器时，响应中不包含 DjDT。

**经验教训：DjDT 保存每个线程的状态。它在第一次响应后删除线程的状态。**

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-04-10T16:44:10.120

我遇到了这个问题，不得不从源代码安装调试工具栏。

如果您使用 PureCSS 和其他 CSS 框架，那么 1.4 版会出现隐藏问题。

[这](https://github.com/django-debug-toolbar/django-debug-toolbar/commit/4111d930327f10a47c8bcc6b46f21d5aa62d4460)是修复该问题的提交。

文档解释了如何从源代码安装。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-09-27T20:02:20.813

如果您使用的是 Windows，它可能来自您的注册表。将 HKEY_CLASSES_ROOT.js\Content Type 设置为 text/javascript 而不是 text/plain。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-11-07T09:54:08.040

经过多次试验和错误，这在 Django=3.1 中对我有用。在编写完所有 internal_ip、中间件、附加到 url 之后，将此代码放在下面的 settings.py 中

```
def show_toolbar(request):
return True

DEBUG_TOOLBAR_CONFIG = {
"SHOW_TOOLBAR_CALLBACK": show_toolbar,
'INSERT_BEFORE': '</head>'
} 
```

他们中的许多人建议 SHOW_TOOLBAR_​​CALLBACK，但就我而言，它仅在添加“INSERT_BEFORE”后才有效

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2021-02-17T18:07:13.630

添加后有同样的问题

```
urls.py
mimetypes.add_type("application/javascript", ".js", True)
urlpatterns = [... 
```

和

```
DEBUG_TOOLBAR_CONFIG = {
 'INTERCEPT_REDIRECTS': False,
 'SHOW_TOOLBAR_CALLBACK': lambda request: True,
 'SHOW_TEMPLATE_CONTEXT': True,
 'INSERT_BEFORE': '</head>'
} 
```

添加了 javascripts 文件，但所有标签都有类`djdt-hidden`和隐藏

`<div id="djDebug" class="djdt-hidden" dir="ltr" data-default-show="true">`

我正在使用`GoogleChrome`

错误已修复并出现`FireFox`django 工具栏图标

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-12-07T14:54:10.740

运行以下命令：

```
python manage.py migrate 
```

现在再次运行服务器

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2019-04-06T23:19:48.050

什么让我是一个过时的浏览器！

注意到它从调试工具栏加载了一些样式表，并猜测它可能是前端问题。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2021-12-28T16:04:52.653

一切都完成了，但在 Chrome 中没有显示“django 调试工具栏”。

Chrome 控制台：无法加载模块脚本：需要 JavaScript 模块脚本，但服务器以 MIME 类型“文本/纯文本”响应。根据 HTML 规范对模块脚本强制执行严格的 MIME 类型检查。(工具栏.js;1)

在 EDGE 中，显示的工具栏与服务器和 url 完全相同。

* * *

## 回答 #33

> 赞同：-1
> 
> 时间：2013-02-02T17:42:47.573

一件愚蠢的事情让我..如果您使用 apache wsgi，请记住触摸 .wsgi 文件以强制重新编译您的代码。只是浪费我 20 分钟的时间来调试这个愚蠢的错误:(

# php - 如何将参数传递给 codeigniter 方法

> ID：10517766
> 
> 赞同：3
> 
> 时间：2012-05-09T14:05:46.273
> 
> 标签：php, codeigniter, get, arguments

我在 codeigniter 控制器中有一个方法，有时通过 url 调用，有时从控制器的另一个方法内部调用。当我在内部调用它时，我传递了一个参数数组。方法的简化版：

（在控制器内）

```
function get_details($args='') {

    if (isset($args['first_name'])) 
    {
        $first_name = $args['first_name'];
    } 
    else
    {
        $first_name = $this->uri->segment(3);
    } 

    ... do some other stuff ...

} 
```

该方法被称为：

```
<domain>/<controller>/get_details/abcd/efgh 
```

或来自控制器的另一个功能：

```
$this->get_details(array('first_name'=>'abcd', 'last_name'=>'efgh')); 
```

我期待当通过 url 调用该方法时， isset($args['first_name']) 将是错误的，但是似乎以这种方式调用的参数就在那里。我尝试打印一些东西，这就是我得到的：

```
print_r($args)  ---->   abcd

echo($args['first_name'])  ----> a

echo($args['whatever_index_I_use'])  ----> a 
```

似乎 url 的第三个参数正在传递给方法（通过 codeigniter？），但无法弄清楚为什么似乎设置了数组索引，我只能认为 php 正在将字符串转换为 int ，所以`$args['whatever_index_I_use'], becomes $args[0]`？？

不知道这是一个codeigniter的事情还是我错过了php的微妙之处。

非常感谢任何可以解释发生了什么的人。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:58:14.717

我不知道这是错误还是预期行为，但在[Strings 文档](http://br2.php.net/manual/en/language.types.string.php#108027)中有一条评论可以准确显示您遇到的情况。如果您使用字符串的文本和索引，它将返回第一个字符。为避免这种情况，首先检查参数是数组还是字符串：

```
if(is_array($args)) {
    echo($args['first_name']);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T22:03:11.337

要完成@SérgioMichels 的回答，原因是 PHP 期望整数作为给定索引。当你给它一个字符串时，PHP 会将字符串转换为整数，并且假设字符串不是以数字开头，类型转换将返回 0，否则返回前导数字。

```
$str = 'abcdefghi';
var_dump($str['no_number']); // Outputs: string(1) "a"
var_dump($str['3something']); // Outputs: string(1) "d" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T17:03:54.230

要专门回答您的问题 - 这将解决您的错误：

```
function get_details($args='') 
{
    if (is_array($args))
    {
        $first_name = $args['first_name'];
    } 
    else
    {
        $first_name = $this->uri->segment(3);
    } 
    ... do some other stuff ...
} 
```

但是您的代码存在一些问题。首先，您声明您将该方法称为

```
<domain>/<controller>/get_details/abcd/efgh 
```

但是您不接受控制器中的“efgh”变量。为此，您需要将功能更改为

```
function get_details($first, $last) 
```

在这种情况下，您现在可以将函数调用为

```
$this->get_details('abcd', 'efgh'); 
```

现在你甚至不需要测试数组等，这是一个更好的解决方案 IMO。

如果您决定坚持使用数组，请更改：

```
$first_name = $this->uri->segment(3); 
```

到

```
$first_name = $args; 
```

因为根据定义 - $args 是第三个 URI 段。

# sql - 如果没有外部引用，则删除行，否则更新

> ID：10517769
> 
> 赞同：2
> 
> 时间：2012-05-09T14:05:58.380
> 
> 标签：sql, sql-update, db2, delete-row

我有一个包含三个表的 DB2 数据库： `locations`, `items`, `movement_history`. 该`items`表有一个外键`location_id`, into `locations`。该`movement_history`表有一个外键 , `item_id`into`items`和两个外键, `location_id_before`and `location_id_after`, into `locations`。

`location`如果没有行`items`或引用它，我想删除`movement_history`它。如果该`location`行在某处*被*引用，我只想更新它以标记为已删除。有没有办法在一个声明中做到这一点？最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:14:41.083

试试这样的命令：

```
MERGE INTO LOCATIONS AS LOC
USING (
  SELECT Q1.ID, COALESCE(Q4.LOCATION_AFTER, Q3.LOCATION_BEFORE, Q2.LOCATION) AS ANY_REF
  FROM LOCATIONS Q1
    LEFT OUTER JOIN ITEMS Q2 ON Q2.LOCATION = Q1.ID
    LEFT OUTER JOIN MOVEMENT_HISTORY Q3 ON Q3.LOCATION_BEFORE = Q1.ID
    LEFT OUTER JOIN MOVEMENT_HISTORY Q4 ON Q4.LOCATION_AFTER = Q1.ID) AS T1
    ON LOC.ID = T1.ID
WHEN MATCHED AND T1.ANY_REF IS NOT NULL THEN
  UPDATE SET ACTUAL = 'N'
WHEN MATCHED AND T1.ANY_REF IS NULL THEN
  DELETE 
```

# c# - 将linq中的字符串转换为int到大数据库上的实体

> ID：10517770
> 
> 赞同：4
> 
> 时间：2012-05-09T14:05:59.270
> 
> 标签：c#, sql-server, sql-server-2008, entity-framework, linq-to-entities

我想将 linq 中的字符串转换为 int 到实体，但 Convert.ToInt32 和 int.Parse 无法转换为 sql 而且我的数据库很大，无法将它们全部存储到内存中（超过 60k 记录并变得更大）我的查询类似于

```
int myNumber = 1390;
var result = from dr in myEntitiy.TableX
             where (Convert.ToInt32(dr.stringYear) > myNumber) // <== error
             select dr; 
```

错误说无法翻译转换方法

> LINQ to Entities 无法识别方法“Int32 ToInt32(System.String)”方法，并且该方法无法转换为存储表达式。

什么解决方案

更新：如果没有办法做到这一点，请让我确定这一点，然后我必须更改数据库中的字段类型，但这会很难:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:59:53.893

我认为将比较作为字符串进行比较是非常安全的，除非您的年份 < 1000 或 > 9999：

```
... dr.stringYear.CompareTo(myNumberString) > 0 
```

EF 将其转换为 SQL 谓词，例如

```
WHERE [alias].[stringYear] > @p 
```

这在 SQL 中是可能的，但在 C# 中是不可能的。

一个优点是任何索引`stringYear`都可以在执行计划中使用。转换`stringYear`为数字会消除任何索引。

当字符串列包含锯齿状字符串值时，此方法仍然有用。在这种情况下，谓词应与 Length 结合使用。例如，查找任何数字字符串作为整数大于某个参考值的所有实体

```
var len = myNumberString.Lenght;

var query = 
    from row in context.LegacyTable
    where row.NumericString.CompareTo(myNumberString) > 0
       && row.NumericString.Length >= len
    select row; 
```

然后查询引擎不能使用索引来进行长度比较，但它可能可以这样做来进行`>`比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T17:25:31.083

这行得通，但是生成的 SQL 会很乱

```
int myNumber = 1390;
var result = from dr in myEntitiy.TableX
             let num = myEntitiy.TableX.Take(1).Select(x => dr.stringYear).Cast<int>().FirstOrDefault()
             where num > myNumber
             select dr; 
```

# ruby-on-rails - 发布请求规范导致 401 未经授权用于 omniauth-facebook 和设计

> ID：10517771
> 
> 赞同：3
> 
> 时间：2012-05-09T14:06:03.700
> 
> 标签：ruby-on-rails, rspec, devise, capybara, omniauth

我正在开发 Facebook 应用程序并使用 devise 和 omniauth-facebook 进行身份验证。我按照 wiki 页面进行设置，并使用 OmniAuth.config.add_mock(:facebook, @omniauth_hash) 作为我的规格。

这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem 'sqlite3', '~> 1.3.6'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'devise', '~> 2.0.4'
gem 'haml', '~> 3.1.4'
gem 'haml-rails', '~> 0.3.4'
gem 'therubyracer', '~> 0.9.10'
gem 'twitter-bootstrap-rails', '~> 2.0.6'
gem 'simple_form', '~> 2.0.2'
gem 'omniauth-facebook', '~> 1.2.0'
gem 'unicorn', '~> 4.3.1'
gem 'koala', '~> 1.4.1'
gem "formtastic", "~> 2.1.1" # 2.2.0 breaks activeadmin 0.4.3
gem 'activeadmin', '~> 0.4.3'
gem 'redis', '~> 2.2.2'

gem 'jquery-rails', '~> 2.0.2'

group :development, :test do
  gem 'spork', '~> 1.0rc'
  gem 'guard'
  gem 'guard-test'                            # run tests automatically in background
  gem 'annotate', '2.4.1.beta1'
  gem 'guard-annotate'                        # annotate models, tests, etc with infos from db
  gem 'guard-rspec'                           # run specs automatically in background
  gem 'guard-spork', '~> 0.5.2'
  gem 'rb-fsevent'
  gem 'growl'
  gem 'rspec-core',  '2.7.0'
  gem 'rspec-rails', '2.7.0'
  gem 'simplecov'                             # test coverage
  gem 'factory_girl', '2.3.2', :require => false
  gem 'factory_girl_rails', '~> 1.4', :require => false                    # better fixtures
  gem 'capybara'                              # better request tests with rspec
  gem 'capybara-json', '~> 0.2.0'
  gem 'launchy'
end 
```

我的 GET 请求规范运行良好。重定向到omniauth-callback 等等。现在我想测试我用作 Flash 客户端的后端 API 的第一个 POST 请求。在我的请求规范中，我在调用此发布请求时只会收到“401 Unauthorized”。

有人可以帮我吗？我忘了什么吗？为什么我的 GET 请求工作正常，但 POST 却不行？

提前致谢

# php - (php) 将类成员传递给调用类函数的函数

> ID：10517773
> 
> 赞同：0
> 
> 时间：2012-05-09T14:06:08.240
> 
> 标签：php, xampp

我开始学习 php 并使用迷宫生成器来测试我的知识。每个顶点都是二维数组 ($gridlist[$x][$y]) 中 Grid 类的成员

每个方向（NSEW）和“已访问”都有一个类变量。构造函数将所有变量设置为 0。我在类中包含了一个函数来设置顶点之间的连接器，因此调用 $gridlist[2][2]->set_connect("N") 会将 Nconnect 变量设置为 1。

要将两个点连接在一起，需要设置连接的每一侧，因此我编写了一个函数（不在类中）来执行此操作：

```
function connect_twoV2($a, $b, $d){
    $c = $gridlist[$a][$b];
    switch ($d){
        case "N":
            $c->set_connect("N");
            $e = $gridlist[$a][$b-1];
            $e->set_connect("S");
            break;
        case "S":
            $c->set_connect("S");
            $e = $gridlist[$a][$b+1];
            $e->set_connect("N");
            break;
        case "E":
            $c->set_connect("E"); ///This is line 170
            $e = $gridlist[$a+1][$b];
            $e->set_connect("W");
            break;
        case "W":
            $c->set_connect("W");
            $e = $gridlist[$a-1][$b];
            $e->set_connect("E");
            break;
    }
} 
```

但是，当我运行包含此调用的文件时：

```
connect_twoV2(1, 2, "E"); 
```

我得到：致命错误：在第 170 行 C:\XAMPP\xampplite\htdocs\phptest\zMaze3.php 中的非对象上调用成员函数 set_connect()

谁能告诉我为什么类函数调用在 $c 上不起作用？

非常感谢

H T

（xampp 1.7.3 上的 php 5.3.1，用 IE8 测试）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:08:48.513

`$gridlist`是在函数外部声明的变量，因此无法从函数内部访问。您可以通过以下两种方式之一解决此问题：

1）使用（邪恶）`global`关键字：

```
global $gridlist;    
$c = $gridlist[$a][$b]; 
```

2）将其作为参数传递给您的方法（首选方法）

```
function connect_twoV2($gridlist, $a, $b, $d){ 
```

# sql-server - T-sql - 确定值是否为整数

> ID：10517777
> 
> 赞同：56
> 
> 时间：2012-05-09T14:06:17.257
> 
> 标签：sql-server, tsql, casting, integer, isnumeric

我想确定一个值是否为整数（如`TryParse`在.NET 中）。不幸`ISNUMERIC`的是不适合我，因为我只想解析整数而不是每种数字。有没有这样的`ISINT`东西？

这是一些使事情变得清晰的代码。如果`MY_FIELD`不是 int，则此代码将失败：

```
SELECT @MY_VAR = CAST(MY_FIELD AS INT)
FROM MY_TABLE
WHERE MY_OTHER_FIELD = 'MY_FILTER' 
```

谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-09T14:12:04.100

这是一篇描述UDF创建的[博客文章。](http://www.tek-tips.com/faqs.cfm?fid=6423)`IsInteger`

基本上，它建议增加`'.e0'`值并使用`IsNumeric`. 这样，任何已经有小数点的东西现在都有两个小数点，导致`IsNumeric`为假，任何已经用科学计数法表示的东西都被`e0`.

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-09T14:46:45.983

在他的文章中[我可以将此字符串转换为整数吗？](http://www.sqlmag.com/article/tsql3/can-i-convert-this-string-to-an-integer-), Itzik Ben-Gan 提供了一个纯 T-SQL 的解决方案和另一个使用 CLR 的解决方案。

您应该选择哪种解决方案？

> **T-SQL 或 CLR 解决方案更好吗？** 使用 T-SQL 解决方案的优势在于您无需走出 T-SQL 编程领域。但是，CLR 解决方案有两个重要优势： 更简单、更快速。当我针对具有 1,000,000 行的表测试这两种解决方案时，CLR 解决方案在我的笔记本电脑上运行需要两秒钟，而不是七秒钟（对于 T-SQL 解决方案）。所以下次需要检查给定字符串是否可以转换为整数时，可以包括我在本文中提供的 T-SQL 或 CLR 解决方案。

如果只想维护T-SQL，那就使用纯T-SQL方案。如果性能比方便更重要，那么使用 CLR 解决方案。

纯 T-SQL 解决方案很棘手。它将内置 ISNUMERIC 函数与模式匹配和强制转换相结合，以检查字符串是否表示 int。

```
SELECT keycol, string, ISNUMERIC(string) AS is_numeric,
  CASE
    WHEN ISNUMERIC(string) = 0     THEN 0
    WHEN string LIKE '%[^-+ 0-9]%' THEN 0
    WHEN CAST(string AS NUMERIC(38, 0))
      NOT BETWEEN -2147483648\. AND 2147483647\. THEN 0
    ELSE 1
  END AS is_int
FROM dbo.T1; 
```

CLR 解决方案的 T-SQL 部分更简单。就像调用 ISNUMERIC 一样调用 fn_IsInt 函数。

```
SELECT keycol, string, ISNUMERIC(string) AS is_numeric,
  dbo.fn_IsInt(string) AS is_int
FROM dbo.T1; 
```

C# 部分只是 .NET 的解析函数 Int32.TryParse 的包装器。这是因为 SQL Server int 和 .NET Int32 都是 32 位有符号整数。

```
using System;
using System.Data.SqlTypes;

public partial class UserDefinedFunctions
{
    [Microsoft.SqlServer.Server.SqlFunction]
    public static SqlBoolean fn_IsInt(SqlString s)
    {
        if (s.IsNull)
            return SqlBoolean.False;
        else
        {
            Int32 i = 0;
            return Int32.TryParse(s.Value, out i);
        }
    }
}; 
```

请阅读 Itzik 的文章以获得对这些代码示例的完整解释。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-07-16T20:40:57.570

使用 sqlserver 2005 及更高版本，您可以使用带有 LIKE 运算符的类似正则表达式的字符类。见[这里](https://msdn.microsoft.com/en-us/library/ms179859%28v=sql.90%29.aspx)。

要检查字符串是否为非负整数（它是十进制数字序列），您可以测试它是否不包含其他字符。

```
SELECT numstr
  FROM table
 WHERE numstr NOT LIKE '%[^0-9]%' 
```

注意1：这也会返回空字符串。

注意2：使用`LIKE '%[0-9]%'`将返回任何包含至少一个数字的字符串。

见[小提琴](http://sqlfiddle.com/#!6/372fd/3/0)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-08-27T14:13:40.153

```
WHERE IsNumeric(MY_FIELD) = 1 AND CAST(MY_FIELD as VARCHAR(5)) NOT LIKE '%.%' 
```

这可能是最简单的解决方案。除非您`MY_FIELD`包含 .00 或类似的东西。在这种情况下，将其转换为浮点数以删除任何尾随 .00

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-02-26T12:42:08.117

死灵术。
从 SQL-Server 2012+ 开始，您可以使用 TRY_CAST，如果转换不成功，它将返回 NULL。

例子：

```
DECLARE @foo varchar(200)
SET @foo = '0123' 
-- SET @foo = '-0123' 
-- SET @foo = '+0123' 
-- SET @foo = '+-0123' 
-- SET @foo = '+-0123' 
-- SET @foo = '.123' 
-- SET @foo = '1.23' 
-- SET @foo = '.' 
-- SET @foo = '..' 
-- SET @foo = '0123e10' 

SELECT CASE WHEN TRY_CAST(@foo AS integer) IS NULL AND @foo IS NOT NULL THEN 0 ELSE 1 END AS isInteger 
```

这是唯一真正可靠的方法。

如果您需要对 SQL-Server 2008 的支持，请返回 Sam DeHaan 的回答：

```
SELECT CASE WHEN ISNUMERIC(@foo + '.e0') = 1 THEN 1 ELSE 0 END AS isInteger 
```

SQL-Server < 2012（又名 2008R2）将在 2019 年 7 月 9 日结束（扩展）支持。
此时，很快，可以放弃对 < 2012 的支持。
我现在不会再使用任何其他黑客了。
只需告诉您节俭的客户进行更新 - 自 2008 年以来已经 10 多年了。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-09-12T11:22:39.667

使用 IsNumeric 函数的这种解决方法将起作用：

`select * from A where ISNUMERIC(x) =1 and X not like '%.%'`

或使用

`select * from A where x **not like** '%[^0-9]%'`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-12-14T22:33:48.993

以下对于一个`WHERE`子句是正确的；使函数将其包装在`CASE WHEN`.

```
 ISNUMERIC(table.field) > 0 AND PATINDEX('%[^0123456789]%', table.field) = 0 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-07-01T06:34:17.203

> 看看下面的查询是否有帮助

```
SELECT *
FROM MY_TABLE
WHERE CHARINDEX('.',MY_FIELD) = 0 AND CHARINDEX(',',MY_FIELD) = 0       
AND ISNUMERIC(MY_FIELD) = 1 AND CONVERT(FLOAT,MY_FIELD) / 2147483647 <= 1 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-04-06T10:32:10.773

```
声明@i 数字（28,5）= 12.0001

if (@i/cast(@i as int) > 1)
开始
    选择“这不是 int”
结尾
别的
开始
    选择“这是 int”
结尾

```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-03-07T17:09:48.050

从 SQL Server 2012 开始，实现了`TRY_CONVERT`和`TRY_CAST`函数。这是对解决方案的巨大改进`ISNUMERIC`，它可以（并且确实）给出误报（或否定）。例如，如果您运行以下命令：

```
SELECT CONVERT(int,V.S)
FROM (VALUES('1'),
            ('900'),
            ('hello'),
            ('12b'),
            ('1.1'),
            ('')) V(S)
WHERE ISNUMERIC(V.S) = 1; 
```

使用`TRY_CONVERT`(or `TRY_CAST`) 可以避免：

```
SELECT TRY_CONVERT(int,V.S),
       V.S,
       ISNUMERIC(V.S)
FROM (VALUES('1'),
            ('900'),
            ('hello'),
            ('12b'),
            ('1.1'),
            ('')) V(S)
--WHERE TRY_CONVERT(int,V.S) IS NOT NULL; --To filter to only convertable values 
```

请注意，`'1.1'`返回`NULL`之前会导致错误（因为十进制的字符串表示不能转换为`int`），但也会`''`返回`0`，即使`ISNUMERIC`声明值“无法转换”。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-05-09T14:21:55.440

我认为您的数据库设计有问题。我认为在一个列中混合 varchar 和数字是一个非常糟糕的主意？这是什么原因？

当然，您可以检查是否有除 [0-9] 以外的任何字符，但假设您在表中有 1m 行并且您正在检查每一行。我认为它不会很好地工作。

无论如何，如果您真的想这样做，我建议您在客户端进行。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-05-17T12:08:23.993

我觉得这样做是撒旦的工作，但作为替代方案：

TRY - CATCH 怎么样？

```
DECLARE @Converted as INT
DECLARE @IsNumeric BIT

BEGIN TRY
    SET @Converted = cast(@ValueToCheck as int)
    SET @IsNumeric=1
END TRY
BEGIN CATCH
    SET @IsNumeric=0
END CATCH

select IIF(@IsNumeric=1,'Integer','Not integer') as IsInteger 
```

这有效，但仅在 SQL Server 2008 及更高版本中有效。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-01-09T12:20:49.070

我尝试了这个脚本并得到了答案

```
ISNUMERIC(Replace(Replace([enter_your_number],'+','A'),'-','A') + '.0e0') 
```

例如，对于向上的问题，这是答案：

```
SELECT @MY_VAR = CAST(MY_FIELD AS INT)
FROM MY_TABLE
WHERE MY_OTHER_FIELD = 'MY_FILTER' and ISNUMERIC(Replace(Replace(MY_FIELD,'+','A'),'-','A') + '.0e0') = 1 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-02-04T23:25:56.697

Sometimes you don't get to design the database, you just have to work with what you are given. In my case it's a database located on a computer that I only have read access to which has been around since 2008\.

I need to select from a column in a poorly designed database which is a `varchar` with numbers 1-100 but sometimes a random string. I used the following to get around it (although I wish I could have re designed the entire database).

```
SELECT A from TABLE where isnumeric(A)=1 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-07-08T21:21:34.323

为什么不这样做：

```
CASE
WHEN ROUND(MY_FIELD,0)=MY_FIELD THEN CAST(MY_FIELD AS INT)
ELSE MY_FIELD
END
as MY_FIELD2 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-11-29T10:25:40.743

我不是 SQL 的专业人士，但是如何检查它是否可以被 1 分开？对我来说，它完成了这项工作。

```
SELECT *
FROM table    
WHERE fieldname % 1 = 0 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-05-21T18:42:48.097

使用 TRY_CONVERT，它是 .NET 中 TryParse 的 SQL 替代方案。IsNumeric() 不知道空字符串被计为（整数）零，并且某些完全有效的货币符号本身不会转换为（货币）零。[参考](https://www.red-gate.com/simple-talk/blogs/time-stop-using-isnumeric/)

```
SELECT @MY_VAR = CASE WHEN TRY_CONVERT(INT,MY_FIELD) IS NOT NULL THEN MY_FIELD
                 ELSE 0
                 END
FROM MY_TABLE
WHERE MY_OTHER_FIELD = 'MY_FILTER' 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-12-19T04:44:08.173

使用 PATINDEX

```
DECLARE @input VARCHAR(10)='102030.40'
SELECT PATINDEX('%[^0-9]%',RTRIM(LTRIM(@input))) AS IsNumber 
```

参考 [http://www.intellectsql.com/post-how-to-check-if-the-input-is-numeric/](http://www.intellectsql.com/post-how-to-check-if-the-input-is-numeric/)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-03-04T13:36:32.557

看到这已经很老了，但我的解决方案不在这里，我想添加另一种可能的方法来做到这一点：

```
 --This query only returns values with decimals
  SELECT ActualCost
  FROM TransactionHistory
  where  cast(ActualCost as int) != ActualCost

  --This query only returns values without decimals
  SELECT ActualCost
  FROM TransactionHistory
  where  cast(ActualCost as int) = ActualCost 
```

这里最简单的部分是检查选择的值在转换为整数时是否相同。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-08-06T00:28:10.547

有同样的问题。我终于用了

```
where ATTRIBUTE != round(ATTRIBUTE) 
```

它对我有用

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-12-02T22:30:22.120

```
WHERE IsNumeric(value + 'e0') = 1 AND CONVERT(FLOAT, value) BETWEEN -2147483648 AND 2147483647 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2020-02-21T20:08:10.120

`Case
When (LNSEQNBR / 16384)%1 = 0 then 1 else 0 end`

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2019-03-01T05:51:01.433

这在 SQL Server 中工作正常

SELECT (SELECT ISNUMERIC(2) WHERE ISNUMERIC(2)=1 AND 2 NOT LIKE '%.%')

# ruby-on-rails - 如果更改新头像导致错误，我该如何回退旧头像？

> ID：10517784
> 
> 赞同：0
> 
> 时间：2012-05-09T14:06:36.540
> 
> 标签：ruby-on-rails, paperclip

我有一个名为的模型`Profile`：

```
has_attached_file :avatar 
```

我正在验证它只接受图像，其中：

```
 validates_attachment_size :avatar,:less_than => 2.megabytes
  validates_attachment_content_type :avatar, :content_type => /^image\/(jpg|jpeg|pjpeg|png|x-png|gif)$/, :message => 'file type is not allowed (only jpeg/png/gif images)' 
```

控制器动作是这样实现的：

```
@profile = Profile.find(params[:id])
if @profile.update_attributes(params[:profile])
  redirect_to @profile, notice: "Profile was updated"
else
  from_render = params[:render]
  from_render = "show" if !["show","edit"].include?(from_render)
  respond_to do |format|
    format.html { render :action => from_render }
  end
end 
```

在视图中，我将其显示为：

```
 <%= image_tag profile.avatar.url(:medium) %> 
```

我允许从显示和编辑操作更改图片，因此其他（知道在发生错误时重定向到哪里）。问题是，如果我上传一个文本文件，视图将尝试呈现一个图像标签，该标签具有文本文件的 href。这会导致呈现不正确的内容。所以，现在，`profile.avatar`指向文件，附件没有保存。如何回退到原始图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:00:33.687

我在更新之前保留了旧对象的副本，如果更新失败，我会显示出来。

# java - 使用 dom4j 创建带密钥的 xpath

> ID：10517786
> 
> 赞同：0
> 
> 时间：2012-05-09T14:06:41.750
> 
> 标签：java, xpath, dom4j

有人知道在使用 dom4j 元素时如何使用键自动获取 xpath 吗？

让我解释：

鉴于以下 xml，我创建了一个 dom4j 文档。

```
<response>
  <installation>
    <id>0001</cid>
    <code>0000</code>
  </installation>
  <installation>
    <id>0002</cid>
    <code>0078</code>
  </installation>
</response> 
```

遍历文档，我可以使用`element.getUniquePath()`或为每个元素创建一个 xpath`element.getPath()`

```
/response/installation[1]/code
or
/response/installation/code 
```

到目前为止还不错，但还不够好。由于无法提前知道对象的顺序，我想在我的 xpath 中使用 key。

```
 /response/installation[id=0001]/code 
```

现在我的问题是，是否有人知道如何做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:20:54.750

我不知道有什么办法可以改变 and 背后的`getUniquePath`策略`getPath`。

如果您迭代作为代码的元素，您可以检索前面的同级并使用它生成一个 XPath，方法是检索`id`前一个标记的文本内容`code`。

否则，此 XPath 将起作用：`/response/installation/code[preceding-sibling::id[text()=0002]]`

# asp.net-mvc - 显示错误消息而不重定向到 Error.cshtml

> ID：10517796
> 
> 赞同：0
> 
> 时间：2012-05-09T14:07:17.923
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我正在尝试做一些简单的事情（我认为），但似乎没有找到一种方法来做到这一点。在我的 MVC 应用程序中，当控制器中出现错误时，我想处理错误并在我的 _layout.cshtml 的部分中显示错误。我想当我通过在客户端捕获 OnError 事件来对控制器操作进行 ajax 调用时，我可以做到这一点。当控制器返回视图或部分视图时，我该怎么做？提前致谢。

# c++ - 发生 C++ 破坏类错误

> ID：10517799
> 
> 赞同：1
> 
> 时间：2012-05-09T14:07:19.847
> 
> 标签：c++, oop, class

这个程序在执行时有什么问题，我想破坏类，但是程序结束时我在 cout fetch 后看到错误框。问题是什么？

```
#include <iostream>
using namespace std;

class user {

    public:int internal;
    public:user(int point) {
               internal = point;
           };

           ~user () {
               cout << "Fetch";
           }
    };

void main() {
    user gil(5);
    user * p;
    p=&gil;
    delete p;
    getchar();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T14:09:46.337

调用`delete`未收到的指针`new`是未定义的行为。IOW，你的代码错了，不要那样做，`gil`有自动存储，无论如何都会自动销毁（duh）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T14:09:55.183

您的代码具有**未定义的行为**。您正在调用`delete`未分配的指针`new`。
一旦你有一个未定义的行为，所有的赌注都没有了，任何行为都是可能的。

一旦创建对象的范围结束，自动（堆栈）存储上的对象就会被释放`{` `}`，无需调用`delete`它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T14:13:47.347

您创建的类将被自动销毁，因为它是在堆栈上分配的。您不需要在其上使用删除运算符。但是如果你只想调用析构函数，你可以这样做：

```
gil.~user(); 
```

但是我不建议这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T14:14:26.390

尝试：

```
#include <iostream>
using namespace std;

class user 
{
public:
  int internal;
  user(int point) 
  {
    internal = point;
  }

  ~user() 
  {
    cout << "Fetch" << endl;
  }
};

int main() 
{
  user* p = new user(5);
  cout << p->internal << endl;
  delete p;
  return 0;
} 
```

为了避免使用`new`/`delete`并在变量超出范围时将其销毁：

```
#include <iostream>
using namespace std;

class user 
{
public:
  int internal;
  user(int point) 
  {
    internal = point;
  }

  ~user() 
  {
    cout << "Fetch" << endl;
  }
};

int main() 
{
  user p(5);
  cout << p.internal << endl;
  return 0;
} 
```

# c# - 如何在 C# 中参数化事件

> ID：10517801
> 
> 赞同：4
> 
> 时间：2012-05-09T14:07:24.950
> 
> 标签：c#, events

我想重新定义一个事件，我的意思是，我有这个：

```
boton.Click += infoApp;
//i think thats similar to: boton.Click = new System.EventHandler(infoApp). 
```

当点击按钮'boton'时，函数/方法'infoApp'触发，这个方法是这样的：

```
private void infoApp(object sender, EventArgs e)
{
/* my code*/
} 
```

到这里为止，一切都很顺利；但我需要向该方法发送另一个参数：

```
boton.Click += infoApp(string par) 
```

所以我认为这可以工作：

```
private void infoApp(object sender, EventArgs e, string par)
{
/*My code*/
} 
```

但事实并非如此。

我读过代表之类的东西，但我不明白；我不知道该怎么做才能解决我的问题；有任何想法吗？

提前致谢

pd：对不起，我的英语很糟糕，我不会说英语。尽量简单解释。我正在使用VS2008。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T14:10:48.553

解决此问题的一种方法是将事件处理程序包装在闭包中：

*而不是*这一行：

```
boton.Click += infoApp; 
```

做这个：

```
string par = "something";

boton.Click += (sender, e) => {
  //Now call your specific method here:
  infoApp(sender, e, par);
}; 
```

# jsf-2 - Apache MyFaces ERROR_HANDLING 上下文参数 VS javax.faces.PROJECT_STAGE

> ID：10517803
> 
> 赞同：1
> 
> 时间：2012-05-09T14:07:33.780
> 
> 标签：jsf-2, web.xml, myfaces

任何人都可以验证这些上下文参数是否等效？

似乎将 javax.faces.PROJECT_STAGE 设置为“Development”与将 org.apache.myfaces.ERROR_HANDLING 设置为“true”具有相同的效果。

我见过很多例子，其中 jacax.faces.PROJECT_STAGE 和/或 faces.DEVELOPMENT 显式设置为 FALSE，而 org.apache.myfaces.ERROR_HANDLING 设置为 TRUE。

第一印象表明 FALSE 的初始设置是多余的，我推测使用 PROJECT_STAGE 更好，因为它与 JSF 规范的特定实现无关？

谢谢

```
<context-param>
        <param-name>
            org.apache.myfaces.ERROR_HANDLING
        </param-name>
        <param-value>
            true
        </param-value>
    </context-param>

    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
</context-param> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:45:11.923

今天在一本教科书中找到了这个答案。

`javax.faces.PROJECT_STAGE`仪器`ERROR_HANDLING`水平的用户。

因此它们不是等价的，但是使用一个会导致另一个的动作。

它是在 JSF 2.0 中引入的。

由于它在 API 中的定义，更适合`javax.faces.PROJECT_STAGE`作为首选。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T18:02:54.187

org.apache.myfaces.ERROR_HANDLING

它表明 myfaces 负责处理错误。通过将值指定为 true 或 false。

作为facelets.DEVELOPMENT在哪里

表示 facelets 负责处理错误。

这两种机制都可以处理异常并提供详细的堆栈跟踪。

MyFaces 提供的错误处理机制在容器的默认错误页面机制之前启动，因此通过将其值设置为 false，我们禁用了这种处理异常的能力。

# c# - application_start 中的计时器以切换“当前交易”

> ID：10517805
> 
> 赞同：0
> 
> 时间：2012-05-09T14:07:39.973
> 
> 标签：c#, asp.net, asp.net-mvc-3, razor

一直试图找出完成这项任务的最佳方法，我将尝试尽可能直截了当地解释我的想法。

我正在使用类似于 woot.com、whiskeymilitia.com 等的网站，其中有当日交易或特定时间限制，即：15 分钟交易。我正在尝试创建一个计时器，该计时器将在应用程序启动时每 x 秒运行一次，例如每 5 秒一次，并检查交易时间限制是否已过。

我目前正在查询数据库以向我提供应该显示的有效交易，但我不完全确定如何在 Application_Start 中实现它。基本上，它将检查交易和交易限制时间 + 已用时间，并确定是否在该点将该交易标记为不活动。是否可以将我在应用程序启动中查询的模型路由到控制器？

任何类型的建议都会非常好，因为这对我来说是一个新概念，并且很想提出一个可靠的解决方案！

如果需要，请随时让我澄清任何事情！再次感谢 ：）

- 编辑 -

在查看 SqlDependency 后，我在测试所有内容时遇到了错误。

当前数据库的 SQL Server Service Broker 未启用，因此不支持查询通知。如果您希望使用通知，请为此数据库启用 Service Broker。您的主机必须在您的数据库上启用 SQL Service Broker。大多数共享环境托管公司似乎都避免这样做，并表示这对专用服务器环境意味着更多。

寻找替代方案。想我会放弃这个让人们在遇到同样的事情之前达到顶峰。

-- 编辑 晚上 8:30 --

所以我试图利用 Cache 类来解决这个问题，但我完全被卡住了。

```
 public ActionResult Index()
    {            

        CurrentDealModel model = new CurrentDealModel();

        model.DealQueueDetails = db.FirstOrDefault<ProductQueue>("SELECT * FROM ProductQueue WHERE Active = 1");

        model.ProductDetails = db.FirstOrDefault<Product>("WHERE Id = @0", model.DealQueueDetails.ProductId);

        return View(model);
    } 
```

我想将此数据缓存在控制器中存储在变量 model.DealQueueDetails.DealTimeLimit 中的时间量 - 此解决方案的问题是管理员将确定交易将显示多长时间，这意味着我需要基于缓存在那个值上。如果有人可以提供一些额外的帮助，我将非常感激！

根据詹姆斯约翰逊和我尝试过的其他人

Cache.Insert("AbsoluteCacheKey", cacheData, null, DateTime.Now.AddMinutes(15), System.Web.Caching.Cache.NoSlidingExpiration

但是，将 cacheData 设置为我的模型会返回 NullReferenceException。感叹我为什么要为此挣扎这么多嘿嘿。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:15:54.470

ASP.NET 不适合实现任何类型的计时功能。使用计划任务或服务，或将过期日期存储在服务器端存储介质之一（缓存、应用程序等）中，并在每次请求时检查它。

我建议使用 SqlDependency[进行缓存：ASP.NET 应用程序中的 SqlDependency](http://msdn.microsoft.com/en-us/library/9dz445ks.aspx)

**编辑**

如果不使用 a `SqlDependency`，只需设置绝对过期时间：

```
Cache.Insert("AbsoluteCacheKey", cacheData, null, 
    DateTime.Now.AddMinutes(15), System.Web.Caching.Cache.NoSlidingExpiration); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:14:24.983

好吧，经过 12 个小时的修修补补和研究，我终于能够正确实施它，并且运行良好，这让我想开始为它担心，哈哈。

```
 public ActionResult Index()
    {

        ViewBag.Message = "Welcome to ASP.NET MVC!";

        CurrentDealModel model = new CurrentDealModel();

        model.DealQueueDetails = db.FirstOrDefault<ProductQueue>("SELECT * FROM ProductQueue WHERE Active = 1");

        model.ProductDetails = db.FirstOrDefault<Product>("WHERE Id = @0", model.DealQueueDetails.ProductId);
        var DealTime = model.DealQueueDetails.DealTimeLimit;
        var CurrentTime = System.DateTime.Now;

        TimeSpan span = DealTime.Subtract(CurrentTime);

        var model1 = HttpContext.Cache.Get(model.DealQueueDetails.Id.ToString());
        if (model1 == null)
        {
            model1 = HttpContext.Cache.Add(model.DealQueueDetails.Id.ToString(), model, null, System.DateTime.Now.Add(span).AddSeconds(10), Cache.NoSlidingExpiration, CacheItemPriority.High, new CacheItemRemovedCallback(RedirectToNewDeal));
            var CachedObject = HttpContext.Cache.Get(model.DealQueueDetails.Id.ToString());
            return View(CachedObject);
        }
        return View(model1);

    } 
```

减去一些需要重命名的变量和一些重构，它工作得很好。然后我将 CacheItemRemovedCallback 设置为以下函数。

```
 public static void RedirectToNewDeal(String key, Object item, CacheItemRemovedReason reason) 
    {
        DatabaseEntitiesDB db = DatabaseEntitiesDB.GetInstance();

        if(reason.ToString() == "Expired")
        {
            var QueueToDisable = db.FirstOrDefault<ProductQueue>("WHERE Id = @0", key);
            QueueToDisable.Active = false;
            QueueToDisable.Update();
        }
    } 
```

对于一些错误处理/日志记录，还需要对此进行一些重构，但这正如我所预期的那样。现在除此之外唯一的事情是我必须每 3 秒在主要的几个内部调用一个 AJAX 轮询方法来检查缓存，我就是这样做的。

```
 public ActionResult CacheCheck(string key)
    {
        var GetCachedObject = HttpContext.Cache.Get(key);

        if (GetCachedObject != null)
        {
            return Content("NotExpired");
        }
        return Content("Expired");

    } 
```

AJAX 调用

```
setTimeout(function () {
        setInterval(CacheCheck, 2000);
        CacheCheck();
    }, 10000);

function CacheCheck() {
        $.ajax({
            type: "POST",
            url: '@Url.Action("cachecheck", "home", new { key = Model.DealQueueDetails.Id })',
            success: function (data) {                    
                if (data == "Expired") {
                    window.location.reload();
                } 
            }
        })
    } 
```

如果有人知道刷新页面并加入新交易的更好方法，我会全力以赴！

感谢大家和他们的帮助，我希望这对其他人也有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:14:29.543

我建议您将当前交易保存在缓存中，这样您就不必访问数据库。但是，那么，它在必要时将如何更新呢？好吧，简单的回答：将缓存的到期时间设置为交易完成的绝对时间，这样它就必须去数据库寻找新的交易。

伪代码：

```
 public Deal GetDeal()
  {
      if (Cache contains deal)
          return deal from cache;
      else
      {
          get deal
          add deal to cache with absolute expiration
      }   
  } 
```

要使用缓存，请查看：

*   [缓存类](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)
*   [Cache.Add 方法](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.add.aspx)（使用 absoluteExpiration 参数）
*   [Cache.Get 方法](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.get.aspx)

使用此实现，您不必担心性能、轮询、服务器重新启动、依赖关系或其他任何问题。

# ruby - ruby sinatra openid 应用程序回复“Nonce 已使用或超出范围”

> ID：10517807
> 
> 赞同：1
> 
> 时间：2012-05-09T14:07:47.380
> 
> 标签：ruby, openid, sinatra, google-openid, nonce

我在 Ubuntu 映像上的 sinatra 上运行以下 ruby​​ openId 示例。

```
 %w(rubygems sinatra openid openid/store/filesystem).each { |lib| require lib}

REALM = 'http://localhost:4567'
RETURN_TO = "#{REALM}/complete"

get '/loginform' do
  erb :loginform
end

post '/login' do
  checkid_request = openid_consumer.begin(params[:openid_identifier])
  redirect checkid_request.redirect_url(REALM, RETURN_TO) if checkid_request.send_redirect?(REALM, RETURN_TO)
  checkid_request.html_markup(REALM, RETURN_TO)
end

get '/complete' do
  response = openid_consumer.complete(params, RETURN_TO)
  return 'You are logged in!' if response.status == OpenID::Consumer::SUCCESS
   msg=response.message
   <<-eos
    Could not log on with your OpenID due to #{msg}
    eos
end

def openid_consumer
  @consumer = OpenID::Consumer.new(session, OpenID::Store::Filesystem.new("#{File.dirname(__FILE__)}/.tmp/openid")) if @consumer.nil?
  return @consumer
end

enable :inline_templates

__END__

@@ layout
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <title>got openid?</title>
</head>
<body>
  <%= yield %>
</body>
</html>

@@ loginform
<form method="post" accept-charset="UTF-8" action='/login'>
  Identifier:
  <input type="text" class="openid" name="openid_identifier" />
  <input type="submit" value="Verify" />
</form> 
```

输入谷歌网址（https://www.google.com/accounts/o8/id）时，我被重定向到谷歌，输入我的凭据，但我没有被授予访问权限：

> Nonce 已使用或超出范围：“2012-05-09T13:50:xxxxxxxxxxxxxxx”

（顺便说一句，我正在使用“ruby”而不是“shotgun”执行 ruby​​ 程序）。有人可以为我提供一些关于输出的含义以及补救措施的见解吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:00:42.080

解决了！问题源于商店特权。我认为这主要是一个Ubuntu问题。

我改变了这个：

```
@consumer = OpenID::Consumer.new(session, OpenID::Store::Filesystem.new("#{File.dirname(__FILE__)}/.tmp/openid")) if @consumer.nil? 
```

进入这个（无状态）：

```
@consumer = OpenID::Consumer.new(session, nil) if @consumer.nil? 
```

它奏效了！

# asp.net - ASP 正则表达式只允许带有 7 或 8 的数字 bigin

> ID：10517809
> 
> 赞同：0
> 
> 时间：2012-05-09T14:07:48.850
> 
> 标签：asp.net, regex

我需要一个在 asp.net 中的正则表达式，它将检查我的帐号字段，该字段只允许以 7 或 8 开头的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:20:38.623

*[编辑]*这将适用于您的给定案例。我已经在 RegexBuddy 中对其进行了测试。

```
^(?:7|8)\d{6}-\d{7} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:25:46.140

你可以使用[Regex.IsMatch 方法](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.ismatch.aspx)

```
if (Regex.IsMatch(AccountNumber, @"^[7-8]+$")) 
```

此外，阅读这些文章也会对您有所帮助

[正则表达式基本语法参考](http://www.regular-expressions.info/reference.html)

[学习如何编写正则表达式](http://geekswithblogs.net/brcraju/archive/2003/10/23/235.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:21:17.467

```
^[78][0-9]* 
```

表达式应该以 7 或 8 开头，然后有 0 或更多的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T14:55:50.830

您的 14 位格式的精确解决方案：

```
^[78]\d{6}-\d{7}$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T14:17:35.720

你可以试试喜欢这个（部分示例）

```
^(7|8) 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-09T14:13:23.930

你可以试试这个；我在这里填充我的答案以超过堆栈溢出所施加的 130 个字符的最小长度

```
^[7-8]+$ 
```

# c# - 如何在 Windows Phone 中正确地将 xml 设置为 RichTextBox？

> ID：10517810
> 
> 赞同：2
> 
> 时间：2012-05-09T14:07:51.667
> 
> 标签：c#, silverlight, windows-phone-7

我有一个xml代码：

```
<Paragraph>Download it directly to the <Hyperlink NavigateUri="http://itunes.apple.com/fi/app/goalapp/id502461189?ls=1&mt=8">iTunes Store</Hyperlink> or <Hyperlink NavigateUri="https://market.android.com/details?id=com.strikersoft.meramal.se">Android Market</Hyperlink>. The application is launched for Swedish app store.</Paragraph> 
```

富文本框.Xaml = xml;

但是在这种情况下我有一个错误，那么如何在 Windows Phone 中正确地将 xaml 设置为 RichTextBox？

**更新**

![在此处输入图像描述](../Images/b396c5dfdbee7f0cfae148221b709003.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:13:39.683

基于发布的代码的基本用法或 RichTextBox：

```
<RichTextBox 
    Width="400" Height="400" 
    Background="Transparent" 
    BorderBrush="White" 
    BorderThickness="3">
    <Paragraph>Download it directly to the 
        <Hyperlink NavigateUri="http://itunes.apple.com/fi/app/goalapp/id502461189?ls=1&amp;mt=8" TargetName="_blank">iTunes Store</Hyperlink> 
        or <Hyperlink NavigateUri="https://market.android.com/details?id=com.strikersoft.meramal.se" TargetName="_blank">Android Market</Hyperlink>. 
        The application is launched for Swedish app store.
    </Paragraph>
</RichTextBox> 
```

**注意**：在创建 URL 时，必须对 URL 进行编码，即在 URL 中使用与号 (&) 时，它们应该创建为`&amp;`并且`NavigateUri`需要`TargetName="_blank"`添加的属性才能在浏览器中打开。

**编辑**

在代码中设置`XAML`属性时，xml命名空间需要包含在xml中。将整个 xml 块（并确保如上所述对 URL 进行编码）包装在一个`Section`节点中：

```
<Section 
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
  <Paragraph>
    Download it directly to the
    <Hyperlink NavigateUri="http://itunes.apple.com/fi/app/goalapp/id502461189?ls=1&amp;mt=8" TargetName="_blank">iTunes Store</Hyperlink>
    or <Hyperlink NavigateUri="https://market.android.com/details?id=com.strikersoft.meramal.se" TargetName="_blank">Android Market</Hyperlink>.
    The application is launched for Swedish app store.
  </Paragraph>
</Section> 
```

在后面的代码中，确保 XML 是一个字符串，即：

```
var xml = XDocument.Load("MyDoc.xml");
richTextBox.Xaml = xml.ToString(); 
```

# java - 现有服务的 Netty (Dummy)

> ID：10517811
> 
> 赞同：0
> 
> 时间：2012-05-09T14:08:02.030
> 
> 标签：java, sockets, netty

有一个现有的服务，我想为其编写一个虚拟服务（使用 Netty）。它将用于测试目的。

该服务的现有客户端代码片段如下所示：

```
Socket socket = new java.net.Socket();
socket.connect(new InetSocketAddress("localhost", 8080), 10000);
socket.setSoTimeout(20000); // set a timeout of 20 seconds
InputStreamReader ir = new InputStreamReader(socket.getInputStream());
PrintWriter out = new PrintWriter(socket.getOutputStream(), true);
// write some string to the server and wait for answer
out.println("SomeCommand");
// server has written some answer, read it
char[] c = new char[2];
ir.read(c, 0, 2);
String cs = new String(c);
if ("OK".equals(cs.toString())) {
    // write some more string's to the server
}
// we're done, close the connection
out.println("BYE");
out.close();
socket.close(); 
```

[Netty](http://netty.io/)是为 java.net.Socket 连接创建服务器的正确框架吗？（如果没有，应该使用哪个框架，如果有的话？）

我正在尝试使用 QuoteOfTheMoment 示例找到一种从 Netty 开始的方法。QuoteOfTheMomentServerHandler 基本上做了我想要的，在传入消息时，返回一些答案，以便上面的代码片段可以使用输入流读取答案，但上面的套接字无法连接到 QuoteOfTheMomentServer。错误是“连接被拒绝”。

[**编辑**]更多说明：
问题（我认为）没有连接或我使用的端口。让我试着更好地问这个问题：

我刚开始使用netty（没有nio经验）并且不熟悉不同类型的渠道、管道等等。
服务器应该**像**servlet 请求/响应（例如，不是 http 或尝试重建 http servlet impl），对写入输出流的 inputString 做出反应，如代码片段中一样，并将一些字符串/字节写回输入-stream 在代码片段中，所以客户端才继续。所以连接应该保持打开但也是同步的，客户端等待来自服务器的应答。如果我在 java 教程中使用示例[“编写套接字的服务器端”，](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)我可以让它为客户端工作。但我想利用netty的线程处理等。
QuoteOfTheMomentServerHandler 似乎是我想要的服务器端实现，但是该设置可以处理给定的客户端代码吗？

所以问题是考虑到客户端的工作方式，应该使用哪种管道、通道或类似的东西？

同样，客户端和服务器是存在的。我想构建一个虚拟服务器实现以与现有客户端一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:34:41.900

Netty 是一个 TCP/IP 框架。所以是的，如果你正在开发一个 TCP/IP 服务器，这个工具包非常好用。

我假设您在尝试将客户端连接到服务器时遇到错误。服务器也应该正在运行。

当收到连接被拒绝错误时，有几个需要检查。第一个是服务器上的防火墙（如果有的话）允许连接到端口 8080？其次，从您的客户端计算机尝试打开到服务器的 telnet 会话，例如：

```
Telnet yourserverip 8080 
```

这将打开到服务器的套接字连接。如果您收到错误消息，请使用 Google 搜索。

最后一个是你可能正在运行一个像tomcat、glassfish、IIS这样的服务器，它已经使用了8080端口。尝试使用非标准端口，例如 10810。

更新：

如果您是 netty 新手，请阅读[http://netty.io/docs/stable/guide/html/](http://netty.io/docs/stable/guide/html/)此处的用户指南。

我查看了即时服务的报价，我相信我发现了部分问题。The Quote of the moment service 是一个广播 UDP/IP 客户端和服务器。UDP 是 TCP IP 的一个更轻量级的“版本”。它不保证交付给客户端或服务器，它是广播的。UDP 有点像无线电广播，因为它通常不针对特定 IP，而是在整个网络上广播。因此，您正常的 TCP IP 连接将无法在 UDP 服务器上工作。

请参阅此链接以了解如何编写 UDP 客户端[http://systembash.com/content/a-simple-java-udp-server-and-udp-client/](http://systembash.com/content/a-simple-java-udp-server-and-udp-client/)。

我建议您将时刻服务器的报价从 UDP 转换为 TCP/IP 服务器，因为这将为您提供一些创建 TCP/IP 服务器的练习，而无需过多介绍。一旦您对此感到满意，您应该能够从头开始一次。

请记住，Netty 会为您处理 NIO 部分。它是一个基于 NIO 的更高级别的框架，因此对您隐藏了很多细节。你不需要非常了解 NIO 才能使用 netty，但你需要很好地理解 Netty 的概念。

# google-docs-api - 上传 2 个 GIG 文件的超时错误（Appengine 任务 Python 中的可恢复上传）

> ID：10517813
> 
> 赞同：1
> 
> 时间：2012-05-09T14:08:05.253
> 
> 标签：google-docs-api

尝试使用从 Doclist api 重新启动的可恢复上传上传 2 GIG 文件时出现超时错误 - 请参阅下面的日志摘录。我认为在 Appengine 任务中使用可恢复上传 2 GIG 不会成为问题，有什么想法吗？

文件“/base/data/home/apps/s~gofiledrop/31.358777816137338904/handler.py”，第 564 行，在 post new_entry = uploader.UploadFile('/feeds/upload/create-session/default/private/full?convert =false', entry=entry) 文件 "/base/data/home/apps/s~gofiledrop/31.358777816137338904/gdata/client.py", 第 1033 行, 在 upload_file start_byte, self.file_handle.read(self.chunk_size))文件“/base/data/home/apps/s~gofiledrop/31.358777816137338904/gdata/client.py”，第 987 行，upload_chunk desired_class=self.desired_class) 文件“/base/data/home/apps/s~gofiledrop/ 31.358777816137338904/gdata/client.py”，第 265 行，在请求 uri=uri，auth_token=auth_token，http_request=http_request，**kwargs）文件“/base/data/home/apps/s~gofiledrop/31.358777816137338904/atom/client .py”，第 117 行，在请求中返回 self.http_client.request(http_request) 文件“/base/data/home/apps/s~gofiledrop/31.358777816137338904/atom/http_core.py”，第 420 行，在请求中 http_request.headers，http_request._body_parts 文件“ /base/data/home/apps/s~gofiledrop/31.358777816137338904/atom/http_core.py”，第 497 行，在 _http_request 返回 connection.getresponse() 文件“/base/python_runtime/python_dist/lib/python2.5/httplib. py”，第 206 行，在 getresponse 截止日期=self.timeout 中）在 _http_request 中返回 connection.getresponse() 文件“/base/python_runtime/python_dist/lib/python2.5/httplib.py”，第 206 行，在 getresponse 截止日期=self.timeout 中）在 _http_request 中返回 connection.getresponse() 文件“/base/python_runtime/python_dist/lib/python2.5/httplib.py”，第 206 行，在 getresponse 截止日期=self.timeout 中）

# facebook - 根据实际页面更改 facebook 元标记

> ID：10517815
> 
> 赞同：1
> 
> 时间：2012-05-09T14:08:07.583
> 
> 标签：facebook, metadata

有人可以帮我解决我的问题吗？我想根据实际页面更改 facebook 元标记。我尝试过类似的方法，但它不起作用......

```
<head>
<script type="text/javascript">
window.document.write('<meta property="og:title" content="actual page title"/>');
</script>
<meta property="og:image" content="http://foto.mrsoft.cz/main.php?g2_view=core.DownloadItem&g2_itemId=10843&g2_serialNumber=2"/>
</head> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:44:33.397

为您的服务器启用 PHP 并将您的页面标题捕获到一个变量中，例如`$actual_page_title`.

然后使用 PHP 语句回显：

```
 <meta property="og:title" content="<?php echo $actual_page_title; ?>" /> 
```

# groovy - 在groovy中连接字符串时如何摆脱“null”？

> ID：10517817
> 
> 赞同：11
> 
> 时间：2012-05-09T14:08:18.833
> 
> 标签：groovy

我有一堂课

```
class A{
    String name
    String address
}

def a = new A()
a.address = "some address"    
println "${a.name} ${a.address}"  => "null some address" 
```

这里`a.name`是 null，所以打印的字符串将包含“null”，但是我希望结果是`"some address"`忽略 null 值。

我知道我可以`println "${a.name ?: ''} ${a.address ?: ''}"`在打印时使用，有没有更简单的解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T15:09:44.297

您可以重新定义`toString`Groovy`null`对象的方法以返回空字符串而不是`null`.

```
def a = [a:null, b:'foobar']
println "${a.a} ${a.b}"
org.codehaus.groovy.runtime.NullObject.metaClass.toString = {return ''}
println "${a.a} ${a.b}" 
```

这将打印：

```
null foobar
 foobar 
```

如果您只想`toString`临时重新定义，请在最后一个之后添加以下内容`print...`以将其改回：

```
org.codehaus.groovy.runtime.NullObject.metaClass.toString = {return 'null'} 
```

* * *

您还可以使用 Groovy [[1]](http://docs.codehaus.org/display/GROOVY/Groovy+Categories) [[2]](http://groovy.codehaus.org/gapi/groovy/lang/Category.html)`null`更改的行为。例如：`toString``Category`

```
@Category(org.codehaus.groovy.runtime.NullObject) class MyNullObjectCategory {def toString() {''}}
use (MyNullObjectCategory) {
    println "${a.a} ${a.b}"
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-09T14:13:13.297

`toString`你可以像这样在你的类中实现一个方法：

```
class A{
  String name
  String address
  String toString() {
    "${name ?: ''} ${address ?: ''}".trim()
  }
} 
```

然后做

```
def a = new A( address:'some address' )
println a 
```

要`some address`打印出来，但这仍然使用 Elvis 运算符，就像您在问题中所说的那样......

不知道你可以做更简单的事情......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T14:34:06.800

不确定是否更简单，但是：

```
[a.name, a.address].findAll().join(' ') 
```

您当然可以将它与 Tim 的 toString[建议](https://stackoverflow.com/a/10517899/581845)结合使用。

请注意，如果任何值可能是“假的”（例如 0），它会将其过滤掉。你可以解决这个问题：

```
[a.name, a.address].findAll {it != null}.join(' ') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-27T07:33:48.303

我认为，实现它的一种相当简单的方法，即删除 null，是连接字符串并使用替换方法。

```
myString=""
myString=myString + "Bla Bla"
myString.replace("null", '') 
```

# android - Amazon Silk 浏览器 - 移动 Web 开发人员的注意事项

> ID：10517818
> 
> 赞同：2
> 
> 时间：2012-05-09T14:08:20.110
> 
> 标签：android, mobile-website, kindle-fire, amazon-silk

我有一个客户希望我针对 Kindle Fire 优化他们的移动网站。我在 iPhone、iPad 和 Android 上进行过开发，但不是针对 Android 平板电脑，也不是专门针对 Kindle Fire。

我想知道，作为一名移动 Web 开发人员，在这个平台上进行 Web 开发时，我应该做些什么特别的考虑，或者我应该注意什么危险信号？

经过一番研究，它看起来像是在使用 Android 2.3，运行一个名为 Amazon Silk 的类似 Opera mini 的浏览器，并使用一个名为 SPDY 的网络协议。A 发现一篇文章建议我应该为 1280 × 752 的空间进行设计。

我在 Quora 上找到了一篇文章，上面写着“Silk 会跟踪用户的总体行为，并会尝试预测可能的下一页（类似于某些浏览器预加载链接的做法——只是以更有针对性的方式）。然后它将该内容传递给提前设备。” 这对我来说有点危险，因为我确实在我的一些网页上实现了一些服务器端 (php) 跟踪和日志记录。我不想在没有被真人请求的页面上记录日志。

除此之外，我真的看不出还有什么值得担心的。想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-18T22:40:21.347

Amazon Silk 后端确实采用了某些优化来减少延迟。但是，作为一般规则，您不需要将 Silk 后端纳入您的 Web 开发考虑因素。无需担心任何问题。

关于 UA 字符串：您可以在 Silk 开发人员指南中找到有关 Silk 用户代理的最新和最重要的信息：http: [//docs.aws.amazon.com/silk/latest/developerguide/user-agent.html](http://docs.aws.amazon.com/silk/latest/developerguide/user-agent.html)。

# jquery - 向下滚动后div滑入

> ID：10517826
> 
> 赞同：-2
> 
> 时间：2012-05-09T14:08:41.633
> 
> 标签：jquery, scroll, slide, scrolltop

这是我的代码 [http://jsfiddle.net/mihaene/7bdkB/](http://jsfiddle.net/mihaene/7bdkB/)

我想要一个 div 滑入，只要我向下滚动一定数量的像素。它可以工作，但是非常非常延迟（例如 5 秒）。有什么问题？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:21:58.653

嗨，我认为问题是你的 else 块。然后 jQuery 开始播放动画，大约需要 300 毫秒。

```
var $test2 = $(".test2");
$(window).scroll(function () {
    if ($(this).scrollTop() > 100) {
        $test2.stop().animate({left: "200px"}, 300);
    } else {
        $test2.stop().animate({left: "-90px"}, 300);
    }
}); 
```

所以只需使用 jQuery 的 stop() 方法来停止这些动画。

旁注：也许您应该考虑不同的 if / else 语句，以免像其他建议的那样在每个滚动事件中都获得动画（或停止/重新启动）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:18:17.963

这是我能想到的最好的解决方案，如果我错了，请纠正我。

这些事件被堆叠起来，一个接一个地被触发。所以我的解决方案是将它们放在一个队列中，并在需要时清除队列。

我用[队列](http://jqapi.com/#p=queue)

**[演示](http://jsfiddle.net/dhirajbodicherla/KdTct/)**

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:16:38.523

您的 jsfiddle 示例没有延迟问题，但这可能是因为窗口大小很小并且滚动触发的机会不多。延迟的可能原因是滚动功能触发的频率。它们会很快堆积起来并导致延误。

添加一个console.log（如果使用Firebug）并在控制台中查看频率以更好地了解频率。

# java - Java 执行器调用外部可执行文件的速度仅稍快一些

> ID：10517827
> 
> 赞同：1
> 
> 时间：2012-05-09T14:08:41.797
> 
> 标签：java, concurrency, runnable, executorservice

我有一个 Java 程序需要调用相同的外部可执行文件 6 次。这个可执行文件生成一个输出文件，一旦所有 6 次运行完成，我将这些文件“合并”在一起。我确实有一个 for 循环，我在其中运行代码，等待外部可执行文件的第一次运行结束，然后我再次调用它，等等。

我发现这非常耗时，平均需要 52.4 秒才能运行 6 次……我认为通过一次运行外部可执行文件 6 次来加速非常容易，尤其是因为它们不相互依赖. 我使用`ExecutorService`and`Runnable`等来实现这一点。

使用我当前的实现，我节省了大约 5 秒的时间，只快了大约 11%。

这是一些（简化的）代码，解释了我在做什么：

```
private final List<Callable<Object>> tasks = new ArrayList<Callable<Object>>();

....

private void setUpThreadsAndRun() {
    ExecutorService executor = Executors.newFixedThreadPool(6);

    for (int i = 0; i < 6; i++) {
        //create the params object
       tasks.add(Executors.callable(new RunThread(params)));
    }

    try {
        executor.invokeAll(tasks);
    } catch (InterruptedException ex) {
        //uh-oh
    }

    executor.shutdown();
    System.out.println("Finished all threads!");
}

private class RunThread implements Runnable {
    public RunThread(ModelParams params) {
        this.params = params;
    }

    @Override
    public void run()
    {
         //NOTE: cmdarray is constructed from the params object
        ProcessBuilder pb = new ProcessBuilder(cmdarray);
         pb.directory(new File(location));
         p = pb.start();
    }
} 
```

我希望有一种更有效的方法来做到这一点......或者我可能通过尝试一次运行此过程 6 次来“堵塞”我的计算机资源。这个过程确实涉及文件 I/O 并写入大小约为 30mb 的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:13:20.907

只有当你有至少 6 个 CPU 内核并且你的应用程序受 CPU 限制——即主要执行处理器操作时，才能将可执行文件分叉 6 次才能获得性能提升。由于每个应用程序写入一个 30mb 的文件，听起来它正在执行大量的 IO，而应用程序是 IO 绑定的——受限于您的硬件服务 IO 请求的能力。

为了加快你的程序，你可以尝试 2 个并发进程，看看你是否得到了改进。但是，如果您的程序受 IO 限制，那么您将永远不会通过分叉多个副本来提高速度。

# css - 具有相同高度的并排div

> ID：10517829
> 
> 赞同：3
> 
> 时间：2012-05-09T14:08:52.307
> 
> 标签：css, html, height

如何放置并排 DIV 的高度？

当我更改浏览器的宽度时，有时左侧 div 会比左侧高或短。

我希望左边或右边的 div 自动成长为与另一个相同的高度。

设置显示表行是最好的解决方案吗？

看一下我要开发的页面的图像。 [http://i.imgur.com/BhvV2.png](http://i.imgur.com/BhvV2.png)

* * *

我使用 display=table-row、table 和 table-cell 解决了这个问题。我添加了一个 div 作为表格。现在它是完美的！看一看。

[http://jsfiddle.net/tcWCC/47/](http://jsfiddle.net/tcWCC/47/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T14:27:07.540

这是一个解决方案，也可以在 SO 上找到

[http://jsfiddle.net/kaAjW/](http://jsfiddle.net/kaAjW/)

这是原始帖子的链接

[如何让两个并排的 div 高度相同？](https://stackoverflow.com/questions/2997767/how-do-i-keep-two-divs-that-are-side-by-side-the-same-height)

该技术称为 Faux Columns，这是一篇关于它的文章

[http://www.alistapart.com/articles/fauxcolumns/](http://www.alistapart.com/articles/fauxcolumns/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T23:34:52.790

我使用 display=table-row、table 和 table-cell 解决了这个问题。我添加了一个 div 作为表格。现在它是完美的！看一看。

[http://jsfiddle.net/tcWCC/47/](http://jsfiddle.net/tcWCC/47/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:39:01.730

如果您尝试做的是将内容放在带有圆形角的灰色框中，那么您的 div 不需要具有相同的高度。只需将背景颜色和边框半径移动到封闭的 div：http: [//jsfiddle.net/tcWCC/41/](http://jsfiddle.net/tcWCC/41/)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-05-09T14:16:23.063

我认为如果不使用 html 表格，您将无法做到这一点。

# javascript - JavaScript 函数执行可以中断吗？

> ID：10517835
> 
> 赞同：5
> 
> 时间：2012-05-09T14:09:02.723
> 
> 标签：javascript, jquery, multithreading, oop, thread-safety

有一个对象来存储数据。

```
var store = {
    elements: [],
    eventsEnabled: true,
    addElement: function(element) {
        this.elements.push(element);
        if (this.eventsEnabled) {
            // Code that triggers event, calls handlers... whatever
        }
    }
}; 
```

存储数据的行为来自两个事件（两种生产者）。第一个“生产者”不会触发任何事件：

```
setInterval(function() {
    store.eventsEnabled = false;
    store.addElement('hello');
    store.eventsEnabled = true;
}, 12000); 
```

第二个确实触发事件：

```
setInterval(function() {
    store.addElement('bye');
}, 7000); 
```

问题是，第二个生产者能否打破第一个生产者的执行流程？

我的意思是，如果生产者 1 禁用事件，并且在完成执行之前（因此在再次启用事件之前），生产者 2 开始执行并添加其元素，则不会触发任何事件。那可能吗？这会发生吗？

如果是这样，如何将此代码转换为某种线程安全的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T14:23:55.573

JavaScript 是单线程的。一个功能不能被中断，因此您可以确保每个功能块将在另一个功能块开始之前完成。

（但是，如果一个函数进行异步调用，则其他函数可能会在异步操作开始之前执行。不过，这在您的代码中不会发生，我可以看到，除了`setTimeout`调用之外，您可以确定那些将在正确的顺序。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T14:12:03.417

`eventsEnabled`将in 作为参数传递给方法不是更明智`addElement`吗？

```
var store = {
    elements: [],
    addElement: function(element,eventsEnabled) {
        this.elements.push(element);
        if (eventsEnabled) {
            // Code that triggers event, calls handlers... whatever
        }
    }
}; 
```

第一的：

```
setInterval(function() {
    store.addElement('hello',false);
}, 12000); 
```

第二：

```
setInterval(function() {
    store.addElement('bye',true);
}, 12000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:30:52.653

根据@Jamiec 的建议，您还可以查看传递事件函数：

```
var store = {
    elements: [],
    addElement: function(element, callback) {
        this.elements.push(element);
        if (callback !== undefined) {
            callback();
            // Common code that triggers event, calls handlers... whatever
            alert("I'm Common Event Code");
        }
    }
};​ 
```

像这样使用：

```
setInterval(function() {
    store.addElement('hello', function(){ alert("I'm Special Event Code!"); });
}, 12000); 
```

因此，如果需要某个事件，您可以将其传入，否则将其忽略。

# wpf - 鼠标单击后如何停止树视图折叠事件

> ID：10517837
> 
> 赞同：3
> 
> 时间：2012-05-09T14:09:05.940
> 
> 标签：wpf, treeview

鼠标单击 TreeViewItem 箭头（在视图中）后，如何停止 treeview collaps 事件？我需要显示我的树视图一直在扩展。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-14T20:53:40.257

您可以在 XAML 中设置 Collapsed 事件：

```
<TreeView 
    Name="myTreeView"
    ItemsSource="{Binding dataSource}">
            <TreeView.ItemContainerStyle>
                <Style TargetType="TreeViewItem">
                    <Setter Property="IsExpanded" Value="True" />
                    <Style.Triggers>
                        <EventTrigger RoutedEvent="Collapsed">
                            <EventTrigger.Actions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <BooleanAnimationUsingKeyFrames 
                                            Duration="0" 
                                            Storyboard.TargetProperty="(TreeViewItem.IsExpanded)">
                                            <DiscreteBooleanKeyFrame KeyTime="0" Value="True" />
                                        </BooleanAnimationUsingKeyFrames>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger.Actions>
                        </EventTrigger>
                    </Style.Triggers>
                </Style>                            
            </TreeView.ItemContainerStyle>
        </TreeView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:33:59.007

您可以将 TreeViewItem 上的 Collapsed 事件设置为：

```
private void TreeViewItem_Collapsed(object sender, RoutedEventArgs e)
{
    (sender as TreeViewItem).IsExpanded = true;
} 
```

但是，它并不能阻止它折叠，它只是在折叠时自动扩展它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:11:15.977

只需[重新设计](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.template.aspx)甚至没有`TreeViewItems`箭头（和可折叠区域）。

例如

```
<Style TargetType="TreeViewItem">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="TreeViewItem">
                <StackPanel>
                    <ContentPresenter ContentSource="Header"/>
                    <ItemsPresenter Margin="20,0,0,0"/>
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

*（这是最低要求，如果需要，您将需要触发器来显示当前选择）*

# jquery - jquery mousedown 事件函数无法传递处理程序

> ID：10517839
> 
> 赞同：0
> 
> 时间：2012-05-09T14:09:13.903
> 
> 标签：jquery, events, mouse

我有这个代码：

```
function drawing(){
 this.dragging = function(){
 $('#object').mousedown(startDragging);
}

function startDragging(){
 console.log(e.PageX);
}
}

var draw = new drawing();
$('#object2').click(function(e){
draw.dragging();
}) 
```

当我训练启动它时，我进入控制台“未定义”，谁能告诉我我的错误在哪里？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:12:21.693

`event`如果您想在其他地方引用它，您需要传递该对象（在您`e`以某种方式定义它之前不存在）。这应该有效：

```
function drawing() {
    this.dragging = function(e) {
        $('#object').mousedown(startDragging(e));
    }

    function startDragging(event) {
        console.log(event.PageX);
    }
}

var draw = new drawing();

$('#object2').click(function(e) {
    draw.dragging(e);
})​ 
```

# java - 如何在 RMI 远程方法中自动化 Hibernate 样板

> ID：10517840
> 
> 赞同：0
> 
> 时间：2012-05-09T14:09:18.943
> 
> 标签：java, hibernate, rmi

我有一个接受来自客户端的远程调用的 RMI 类。

此类使用 Hibernate 加载实体并执行一些业务逻辑，通常是只读的。

目前大多数远程方法体看起来像这样：

```
try {
    HibernateUtil.currentSession().beginTransaction();

    //load entities, do some business logic...

} catch (HibernateException e) {
   logger.error("Hibernate problem...", e);
   throw e;
} catch (other exceptions...) {
   logger.error("other problem happened...", e);
   throw e;
} finally {
   HibernateUtil.currentSession().getTransaction().rollback(); //this because it's read-only, we make sure we don't commit anything
   HibernateUtil.currentSession().close();
} 
```

我想知道是否有一些我可以（相对容易地）实现的模式，以便自动实现这种“尝试打开会话/捕获休眠异常/最终关闭休眠资源”行为，而无需在每个方法中对其进行编码。

类似于 webapps 中使用的“在视图中打开会话”的东西，但可以应用于远程 RMI 方法调用而不是 HTTP 请求。

理想情况下，我希望仍然能够直接调用方法，而不是使用一些反射传递方法名称作为字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:37:48.940

如果可能的话，我想要的只是一个“快速而干净”的解决方案，所以现在没有新的框架（不过我可能稍后会使用 Spring+Hibernate 堆栈）。

所以我最终使用了一个“快速且不那么脏”的解决方案，其中涉及“命令”模式的变体，其中休眠调用被封装在实现我的通用命令接口的匿名内部类中，命令执行器包装使用 Hibernate 会话和异常处理进行调用。通用位是为了让执行方法具有不同的返回值类型。

我对这个解决方案不是 100% 满意，因为它仍然意味着一些样板代码围绕着我的业务逻辑（我对返回值所需的显式转换特别不满意）并且它使得理解和调试稍微复杂一些。

然而，重复代码的收益仍然很大（从大约 10 行到每个方法 3-4 行），更重要的是 Hibernate 处理逻辑集中在一个类中，因此如果需要可以轻松更改它，并且错误更少 -易于。

这是一些代码：

命令界面：

```
public interface HibernateCommand<T> {
    public T execute(Object... args) throws Exception; 
} 
```

执行者：

```
public class HibernateCommandExecuter {

    private static final Logger logger = Logger.getLogger(HibernateCommandExecuter.class);

    public static Object executeCommand(HibernateCommand<?> command, boolean commit, Object... args) throws RemoteException{
        try {
            HibernateUtil.currentSession().beginTransaction();

            return command.execute(args);

        } catch (HibernateException e) {
            logger.error("Hibernate problem : ", e);
            throw new RemoteException(e.getMessage());
        }catch(Exception e){
            throw new RemoteException(e.getMessage(), e);
        }
        finally {
            try{
                if(commit){
                    HibernateUtil.currentSession().getTransaction().commit();
                }else{
                    HibernateUtil.currentSession().getTransaction().rollback();
                }
                HibernateUtil.currentSession().close();
            }catch(HibernateException e){
                logger.error("Error while trying to clean up Hibernate context :", e);
            }
        }
    }   
} 
```

远程调用方法中的示例使用（但也可以在本地使用）：

```
@Override
    public AbstractTicketingClientDTO doSomethingRemotely(final Client client) throws RemoteException {
        return (MyDTO) HibernateCommandExecuter.executeCommand(new HibernateCommand<MyDTO>() {
            public AbstractTicketingClientDTO execute(Object...args) throws Exception{
                MyDTO dto = someService.someBusinessmethod(client);
                return dto;
            }
        },false);
    } 
```

请注意客户端参数是如何声明为 final 的，因此可以在内部类中引用它。如果无法声明 final，则可以将其作为参数传递给 executeCommand 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:00:06.573

我建议你使用**spring+hibernate**堆栈。这为我们节省了很多我猜你正在寻找的可重复代码。请检查[此链接](http://www.vaannila.com/spring/spring-hibernate-integration-1.html)。它实际上是 Web 应用程序的示例，但也可以用于[独立应用程序](http://solitarygeek.com/java/developing-a-simple-java-application-with-spring)。

# c# - 在构建之前插入代码

> ID：10517841
> 
> 赞同：0
> 
> 时间：2012-05-09T14:09:30.363
> 
> 标签：c#, visual-studio-2010, vs-extensibility, vspackage, intellitrace

我正在为 Visual Studio 2010 构建一个 vspackage，并且需要能够在构建过程中将代码无形地注入到解决方案中的每个函数中。

目前我可以使用这个：

```
TextDocument doc = (elemInfo.ProjectItem.Document.Object() as TextDocument);

EditPoint ep = doc.CreateEditPoint(elemInfo.StartPoint);
ep.Insert(sb.ToString()); 
```

它将代码直接插入代码文件以供所有人查看。这行得通，但由于代码只收集运行时数据，我永远不需要看到它。有没有办法在构建过程中注入代码而不像上面那样公开插入代码？

我可以为解决方案中的所有代码文件创建临时文件，并将代码注入其中，然后在调试会话结束后处理它们。这会是最好的方法吗？

当 Intellitrace 从正在运行的可执行文件中收集数据时，它不需要做类似的事情吗？我假设它将代码注入每个方法以保存变量状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:59:56.133

PostSharp，[http://www.sharpcrafters.com/](http://www.sharpcrafters.com/) 根据@bzlm 基本上是 AOP

# macos - 如何设置从工作站到服务器的简单 Mercurial 备份解决方案？

> ID：10517842
> 
> 赞同：0
> 
> 时间：2012-05-09T14:09:34.387
> 
> 标签：macos, mercurial, windows-server, atlassian-sourcetree

第一，忏悔。在大约 10 年的专业发展中，我从未使用过源代码控制系统。在那里，感觉好多了。我的历史设置（按照管理层的建议，哈！）是在服务器上创建过时的文件夹，并每天晚上将我的数据复制并粘贴到其中。

我早就知道更好、更易于管理的解决方案是使用 git 或 Mercurial 来管理我的源代码，但我从来没有花时间学习这些新工具，因为我的旧系统一直运行良好作为我曾经从事过的每个项目的唯一开发人员，我的需求。

我终于改变了这个设置。我已经在我的 Mac 上安装了 Mercurial，经过一番阅读，我更喜欢 git。作为一个 GUI 前端，我安装了 SourceTree，它看起来很容易使用并且非常友好。我遇到的问题是，我找不到一个非常简单、直接的演练来设置我用来将更改推送到每个晚上的服务器存储库。我确定它在那里，我只是找不到它。

老实说，我曾尝试用谷歌搜索，但“SourceTree”一词有一些含义。我找不到任何有用的信息，因为我找到的信息中有一半是关于使用 git 的，而且它往往涉及将项目推送到类似的站点`github.com`，这与我的情况无关。

此外，我浏览了 Mercurial 文档，但我可能仍然不完全清楚完整的提交/更新/推送/拉取/分支/合并概念。我只想快速进行一些设置，以备份和跟踪我的项目的更改，而不必成为源代码控制专家。

**如何在 Windows 网络服务器上设置一个简单的存储库，并每天晚上推送和拉取更改？** 我的公司希望我将数据存储在个人文件夹中的网络共享上，该网络共享备份到磁带，然后存储在异地。

我确信它必须很简单。我只是想确保我做得正确，以便在我需要访问备份的情况下，它就在那里并且可以很容易地拉动......或分支......或其他任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T22:23:22.887

好吧，这取决于您要使用的服务器类型。

假设它不是 Windows 服务器（只是猜测，因为您是 Mac 用户）。我们还假设现在您只需要它自己，而不是一堆用户。

那么最简单的方法就是使用SSH。假设服务器是`server`，并且您在那里有一个帐户`rlh`。您需要有一个公钥/私钥对才能进行无缝访问（无需在每次拉/推时输入密码）。显然，您还需要在服务器上安装 Mercurial。

在服务器上，创建一个 repo（例如，在您的主目录中）：

```
rlh@mac$ ssh server
rlh@server$ mkdir myproject
rlh@server$ cd myproject
rlh@server$ hg init 
```

在您的机器上，克隆 repo：

```
rlh@mac$ hg clone ssh://rlh@server/myproject myproject 
```

默认目标将自动设置，您应该无需额外配置即可拉/推。

如果您对此有任何疑问，请随时询问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T08:32:22.923

在搜索托管解决方案时，最好不要在查询中包含术语 SourceTree — SourceTree 只是一个前端工具，原则上与 Mercurial 托管无关。这或许可以解释缺乏有用信息的原因。

以下是设置 Mercurial 服务器的方法概述：

[https://www.mercurial-scm.org/wiki/PublishingRepositories](https://www.mercurial-scm.org/wiki/PublishingRepositories)

就我个人而言，我使用的是普通的 hgweb，这对我很有帮助。

我还建议考虑使用托管服务，例如 BitBucket 或 Google Code。它需要更少的精力来设置和维护。以下是 Mercurial 托管服务的概述：

[https://www.mercurial-scm.org/wiki/MercurialHosting](https://www.mercurial-scm.org/wiki/MercurialHosting)

就我个人而言，我也在考虑将我的自托管 Mercurial 存储库转移到 BitBucket，因为它减少了维护开销，而且它还具有错误跟踪器、wiki 等功能。

# javascript - 修改 Google Map Type 的最大缩放级别

> ID：10517848
> 
> 赞同：9
> 
> 时间：2012-05-09T14:09:58.393
> 
> 标签：javascript, google-maps, google-maps-api-3

我需要将`maxZoom`级别设置`google.maps.MapTypeId.HYBRID`为 21。实际上，他设置为 14（使用萤火虫控制台检查）。

设置`google.maps`对象'maxZoom'的属性在这种情况下不起作用，我已经尝试修改`google.maps.mapTypes`对象，但没有成功。

```
var options = {
    center: new google.maps.LatLng(lat_centre,lng_centre),   
    zoom: 14, 
    maxZoom: 21,
    mapTypeId: google.maps.MapTypeId.TERRAIN,   
    panControl: true,
    zoomControl: true,
    mapTypeControl: false,
    scaleControl: false,
    streetViewControl: false,
    overviewMapControl: false,
    disableDoubleClickZoom: true,
    styles: [ 
        {featureType: "poi", stylers: [{visibility: "off"}]} 
        ]                   
    };

    map = new google.maps.Map(document.getElementById("map_container"),options); 
```

和

```
google.maps.event.addListener(map, 'tilesloaded', function(event){

    var mapTypeRegistry = map.mapTypes;

    var currentMapTypeId = map.getMapTypeId();

    var mapType = mapTypeRegistry.get(currentMapTypeId);

    mapType.maxZoom = 21;
  }); 
```

那么，有没有办法增加 mapType HYBRID 的缩放级别？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T15:20:23.273

如果您更改了`mapType`对象的属性（`maxZoom`、`minZoom`等...），则*仅*在地图类型更改为之后，更改的效果才会出现`mapType`。例如，如果 current`mapType`是，`TERRAIN`而您更改了`TERRAIN`，则只有在更改为另一种类型（例如,等）并返回 . 后才能工作。`maxZoom``maxZoom``mapType``ROADMAP``HYBRID``TERRAIN`

而不是设置`mapType`的`maxZoom`选项，使用核心地图的`maxZoom`选项。为事件添加监听器`"maptypeid_changed"`，当事件发生时，更改`maxZoom`选项`map`：

```
google.maps.event.addListener(map, 'maptypeid_changed', function(event){
    if( map.getMapTypeId() === google.maps.MapTypeId.TERRAIN ){
        map.setOptions({maxZoom:/*For example*/5});
    }else 
    if( map.getMapTypeId() === google.maps.MapTypeId.ROADMAP ){
        map.setOptions({maxZoom:/*For example*/8});
    }//Etc...
    else{
        map.setOptions({maxZoom:/*For example*/21});
    }
}); 
```

# c++ - Arduino Sketch 编译，然后在上传时冻结

> ID：10517850
> 
> 赞同：1
> 
> 时间：2012-05-09T14:10:00.183
> 
> 标签：c++, class, arduino, adk

我目前正在开发一个自动跳棋板。我已经使用三个类在 C++ 中对其进行了编码，然后进行了必要的更改以将其用作 Arduino 上的库。C++ 代码分为三个类，它们为棋盘的位置启动一个 8 x 8 数组，并跟踪棋盘上棋子的移动。

我认为转换为 Arduino 库是正确的，因为我能够编译草图而没有任何错误。但是当我将它上传到 ADK Mega 时，即使是简单的命令，例如`Serial.print()`.

这是草图：

```
#include <Board.h>

Board myBoard ;

int currentTurn=0;
int order[4][4]={{0,2,1,3},{1,5,2,4},{4,2,5,3},{2,4,0,2}};
int k=0;    
int *A;

void setup()
{
  pinMode(13, OUTPUT); 
  Serial.begin(9600);
}

void loop()
{
  A=myBoard.arr(); 
  for (int i=0; i<98; i++)
  {
     Serial.print(A[i]);
  }

 command[0]=order[k][0]; 
 command[1]=order[k][1];
 command[2]=order[k][2];
 command[3]=order[k][3];

  myBoard.processCommand(command,currentTurn); 

  if(myBoard.nextTurn())
  {
    if(currentTurn==0)
    { 
      currentTurn=1; 
      digitalWrite(13,HIGH);
      delay(3000);
    }
    else
    { 
      currentTurn=0;
      digitalWrite(13,LOW);
      delay(3000);    
    }      
  }
k++;
} 
```

基本上，该类返回一个由 0 和 1 组成的数组，其中包含有关棋子位置的信息。但是，一旦我上传草图，什么都没有发生！

有谁知道为什么会发生这种情况？

如果有人认为问题可能存在，这是 Board 类的构造函数

**编辑**

```
 Board::Board()
{

    bool gameFinished=false;
    bool turnChange=false;
    initBoard();
    initPawns();

} 
```

我已经更改了构造函数以简化事情。对象数组现在被创建为标题中的公共成员：Pawn myPawns[24]。程序现在可以正常运行，我可以打印数组，但仅限于 void loop() 中的第一次迭代，之后打印的数组对应于空棋盘（不存在棋子）。我怀疑程序在第一次迭代后没有正确访问 Pawns 数组 - 当调用构造函数时 - 。动态分配 Pawns 数组会解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:00:22.757

在您的构造函数中，您要求为小型处理器提供大量堆栈：

*   24`Pawn`秒 - 不管它们有多大
*   64`int`秒`board`

a 有多大（`Pawn`以字节为单位）？

你可能会用完堆栈。查看[此线程](http://arduino.cc/forum/index.php?topic=82772.0)以获取有关内存类型以及如何查看是否已用完堆栈/堆的更多讨论。 [另一个关于 Arduino 内存的有用页面](http://www.arduino.cc/playground/Main/CorruptArrayVariablesAndMemory)

总共可用的 2048 (IIRC) 中有 1224 个字节！

另外-您是否`new`在调用-这将使用也是RAM的堆。

**编辑：** 从您的评论中听起来您已经分配了*两次*，一次在类中，一次在函数内的堆栈中-您是要这样做吗？

**更多编辑：**

不要在标题中分配东西。 `extern`然后或将它们原型化，或将它们放入类中。但不要在那里分配它们！

如果你`Pawn myPawns[24]`在类里面，你不需要在构造函数中声明它。

# javascript - 更改 Facebook 喜欢的按钮设计

> ID：10517859
> 
> 赞同：1
> 
> 时间：2012-05-09T14:10:49.130
> 
> 标签：javascript, facebook, iframe, facebook-like

我想在我的页面上更改 facebook 默认点赞按钮的点赞按钮设计，因为它不适合那里，而且看起来很糟糕...... =）

方法 1：使用 Javascript 更改 iframe 内部的设计。=> 失败，因为 iframe 在域“facebook.com”上并且脚本在我的网站上运行...

方法 2：只需将图像放在实际按钮上。=> 总是进入后台，无论如何都是肮脏的解决方案......

方法 3：查看 9gag.com 的点赞按钮（他们做得很好）。=> 不知道他们到底在做什么，当按钮被点击时他们触发了一些 JS，但我不知道接下来会发生什么......

谁能想到一些更好的解决方案，或者给我一个提示 9gaggers 是如何做到的？顺便说一句，我的网站是[lolkitten.org](http://lolkitten.org/)，请随意动手... =)

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:13:40.420

我今天早些时候才发现这个教程：http: [//olegnax.com/492-custom-share-button-facebook/](http://olegnax.com/492-custom-share-button-facebook/)

# c++ - 如何在一台本地机器/主机上对简单的 tcp 客户端/服务器进行单元测试？

> ID：10517860
> 
> 赞同：3
> 
> 时间：2012-05-09T14:10:49.783
> 
> 标签：c++, sockets, testing

我目前是第一次包装 BSD 套接字，并在此过程中对我的结果进行单元测试。无论如何，我在编写一个简单的测试来测试与重用本地主机地址相关的 Acceptor 和 TcpSocket 类时遇到了一个问题，即

伪代码：

```
//server thread
{
    //binds, listens and accepts on port 50716 on localhost
    TcpAcceptor acceptor(Resolver::fromService("50716"));
    //i get a ECONNREFUSED error inside the accept function when trying to create newSock
    TcpSocket newSock = acceptor.accept();
}

//connect in the main thread
TcpSocket connectionSocket(Resolver::resolve(Resolver::Query("localhost", "50716"))); 
```

甚至可以在同一个主机/端口上监听和连接吗？有没有办法在同一台机器/主机上运行简单的客户端/服务器测试？

谢谢！

**编辑：**

酷，现在一切正常！仅供参考，我还注意到在这个过程中你甚至不需要使用线程，即使你使用阻塞套接字来执行一个简单的测试，如果你像这样将监听与接受解耦：

```
//server socket
TcpAcceptor acceptor;
acceptor.bind(Resolver::fromService("0"));
acceptor.listen();

//client socket, blocks until connection is established
TcpSocket clientSock(SocketAddress("127.0.0.1", acceptor.address().port()));

//accept the connection, blocks until one accept is done
TcpSocket connectionSock = acceptor.accept();

//send a test message to the client
size_t numBytesSent = connectionSock.send(ByteArray("Hello World!"));

//read the message on the client socket
ByteArray msg(12);
size_t bytesReceived = clientSock.receive(msg);
std::cout<<"Num Bytes received: "<<bytesReceived<<std::endl;
std::cout<<"Message: "<<msg<<std::endl; 
```

像这样构建测试允许很好和简单的测试用例，即使是阻塞功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T14:38:28.037

是的，这是可能的。没有服务器和客户端必须是不同进程的限制。一个线程可以打开/侦听套接字，而其他线程可以连接到它。

# json - 如何将 Jerkson 与枚举一起使用？

> ID：10517861
> 
> 赞同：3
> 
> 时间：2012-05-09T14:10:57.420
> 
> 标签：json, scala, jackson

我正在尝试使用 Jerkson 在采用泛型类型的方法中生成枚举的 Json 表示 - 但它看起来很奇怪。我也尝试使用 case 对象，但 Json 结果看起来也不错：

```
object WeekDay extends Enumeration {
  type WeekDay = Value
  val Mon, Tue, Wed, Thu, Fri, Sat, Sun = Value
}

trait Letter
case object A extends Letter
case object B extends Letter
case object C extends Letter

object Test extends App {
  import com.codahale.jerkson.Json._

  import WeekDay._
  def printWeekDay(weekday: WeekDay) {println("weekday: " + generate(weekday))}
  printWeekDay(Mon)

  def printLetter(letter: Letter) {println("letter: " + generate(letter))}
  printLetter(A)
} 
```

运行时，我得到：

```
weekday: {"$outer":{"ValueSet$module":null},"scala$Enumeration$Val$$i":0}
letter: {} 
```

关于如何在 Json 中获得正确值的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T22:23:10.860

您可能需要在 Enumeration 和 jerkson.Json.JsValue 之间进行隐式转换。

playframework 使用这种方法

[http://www.playframework.org/documentation/api/2.0/scala/index.html#play.api.libs.json.Writes](http://www.playframework.org/documentation/api/2.0/scala/index.html#play.api.libs.json.Writes)

# java - 将多个数据库结果写入 csv 文件

> ID：10517865
> 
> 赞同：0
> 
> 时间：2012-05-09T14:11:11.027
> 
> 标签：java, file-io, csv

我正在将第一个数据库查询结果集的结果集写入 csv 文件的前 2 列。

然后我试图在 csv 的第三列中写入标题名称“HSS1”，这将具有另一个数据库表的结果集。我没有以正确的方式进行第二步。

第一步：

```
 fw = new FileWriter(filename);
        fw.append("CID");
        fw.append(',');
        fw.append("Uniques");
        fw.append('\n');

        rs=stmt.executeQuery(sql);

            while(rs.next()){

                fw.append(rs.getString(1));
                fw.append(',');
                fw.append(rs.getString(2));
                fw.append('\n');
                fw.flush(); 
```

在 csv 文件中为第二个数据库查询写入标题名称

第二步

```
try{

    fw.append(",");
    fw.append(",");
    fw.append("HSS1");
    fw.append('\n');

    fw.close(); 
```

HSS1 被写入第三列，但它不是标题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:19:30.963

`append()`总是附加到文件的末尾。

您需要做的是将代码移动到正确的位置并同时迭代两个数据库查询（在一个循环中）。

# android - 在 Android 4.0 中启用 Wifi 直连

> ID：10517867
> 
> 赞同：0
> 
> 时间：2012-05-09T14:11:12.820
> 
> 标签：android, wifi

我买了一个新的安卓 4.0.3 平板电脑——Micromax Funbook P300 来学习开发安卓应用程序。

我从 Wifi Direct 开始，这样平板电脑就可以用作机器人平台的遥控器。

令我失望的是，股票操作系统在设置菜单中没有提供此功能。

是否可以检查我们是否可以以编程方式启动 wifi direct 功能？

如果没有，有人可以指导一些解决这个问题的教程吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T22:03:01.447

WiFi Direct 应受 Android 4.0.3 支持（自 Android API 14 或 Android 4.0 以来一直存在）。由于硬件限制，您的平板电脑可能不支持 WiFi Direct，但我对此表示怀疑。您可能在设置中看不到它，因为平板电脑上运行的自定义 Android 皮肤阻止您看到它，或者 WiFi Direct 设置界面可能直到 Android 4.1 或其他版本才实现。

无论如何，您都可以在代码中轻松地对其进行测试。

首先，将适当的权限放入您的 manifest.xml

[http://developer.android.com/training/connect-devices-wireless/wifi-direct.html#permissions](http://developer.android.com/training/connect-devices-wirelessly/wifi-direct.html#permissions)

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.android.nsdchat"
    ...

    <uses-permission
        android:required="true"
        android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission
        android:required="true"
        android:name="android.permission.CHANGE_WIFI_STATE"/>
    <uses-permission
        android:required="true"
        android:name="android.permission.INTERNET"/>
    ... 
```

接下来，尝试初始化 Android WiFiP2pManager 类，看看是否支持。

[http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html](http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html)

```
public void onCreate(Bundle savedInstanceState) {
    WifiP2pManager manager = (WifiP2pManager) getSystemService(Context.WIFI_P2P_SERVICE);
    WifiP2pManager.Channel channel = manager.initialize(this, getMainLooper(), null);
} 
```

在我放空的地方，你可以传递一个回调来检查失败。如果可行，请按照[Wi-Fi Direct 指南](http://developer.android.com/training/connect-devices-wirelessly/wifi-direct.html)的其余部分创建您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:18:46.387

Android SDK 包含一个使用 DirectWiFi 模式的示例应用程序：

[WiFiDirectDemo - Wi-Fi 直连演示](http://developer.android.com/resources/samples/WiFiDirectDemo/index.html)

使用的 API 本身位于[android.net.wifi.p2p](http://developer.android.com/reference/android/net/wifi/p2p/package-summary.html)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-07-18T12:32:43.660

他并不是要一个编码的程序示例，而是一种以编程方式开启技术的方式（即一行代码）。据我所知，没有办法做到这一点。这一切都必须在您的设备设置中完成。虽然某些设备允许打开 Wi-Fi Direct，但其他设备将其视为启用常规 Wi-Fi - 您尝试过吗？您是否检查过 P300 是否支持 Wi-Fi Direct？

# c# - 复制大文件时更新进度条

> ID：10517869
> 
> 赞同：2
> 
> 时间：2012-05-09T14:11:16.773
> 
> 标签：c#, .net, visual-studio-2010

我正在寻找一种在将文件从一个位置复制到另一个位置时更新进度条的方法。

我正在 a 中进行复制，`BackgroundWorker`并在后台更新进度条。我尝试使用 file.length 来获取文件大小并使用它来计算百分比并以这种方式更新栏，但没有任何乐趣。

我附上代码，任何帮助将不胜感激，谢谢。

```
namespace Copier 
```

{公共部分类Form1：Form {公共Form1（）{InitializeComponent（）；}

```
 // Declare for use in all methods
    public string copyFrom;
    public string copyTo;

    private void btnCopyFrom_Click(object sender, EventArgs e)
    {
        // uses a openFileDialog, openFD, to chose the file to copy
        copyFrom = "";

        openFD.InitialDirectory = @"C:\Documents and Settings\user\My Documents";
        openFD.FileName = "";

        //openFD.ShowDialog();

        if (openFD.ShowDialog() == DialogResult.Cancel)
        {
            MessageBox.Show("cancel button clicked");
        }

        else
        {
            // sets copyFrom = to the file chosen from the openFD
            copyFrom = openFD.FileName;
            // shows it in a textbox
            txtCopyFrom.Text = copyFrom;
        }
    }

    private void btnCopyTo_Click(object sender, EventArgs e)
    {
        //uses folderBrowserDialog, folderBD, to chose the folder to copy to
        copyTo = "";

        this.folderBD.RootFolder = System.Environment.SpecialFolder.MyComputer;
        this.folderBD.ShowNewFolderButton = false;
        //folderBD.ShowDialog();
        //DialogResult result = this.folderBD.ShowDialog();

        if (folderBD.ShowDialog() == DialogResult.Cancel)
        {
            MessageBox.Show("cancel button clicked");
        }
        else
        {
            // sets copyTo = to the folder chosen from folderBD
            copyTo = this.folderBD.SelectedPath;
            //shows it in a textbox.
            txtCopyTo.Text = copyTo;
        }
    }

    private void btnCopy_Click(object sender, EventArgs e)
    {
        copyBGW.RunWorkerAsync();
    }

    private void btnCancel_Click(object sender, EventArgs e)
    {
        Application.Exit();
    }

    //=================================================================
    //                      BackGroundWorkers
    //=================================================================

    private void copyBGW_DoWork(object sender, DoWorkEventArgs e)
    {
        try
        {
            // copies file
            string destinatationPath = Path.Combine(copyTo, Path.GetFileName(copyFrom));
            File.Copy(copyFrom, destinatationPath);
            MessageBox.Show("File Copied");
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }
} 
```

或者有人可以告诉我一种方法来让进度条自己走，这样它就表明表格没有冻结？

已经清理了代码

感谢您到目前为止的输入

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:20:35.347

我认为调用 CopyFileEx 是最简单的，它允许您指定一个进度处理程序，以便在复制文件时从操作系统获取更新。以下是从 pinvoke.net 页面复制的[CopyFileEx](http://pinvoke.net/default.aspx/kernel32/CopyFileEx.html "CopyFileEx")示例代码：

```
[DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Auto)]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool CopyFileEx(string lpExistingFileName, string lpNewFileName,
   CopyProgressRoutine lpProgressRoutine, IntPtr lpData, ref Int32 pbCancel,
   CopyFileFlags dwCopyFlags);

delegate CopyProgressResult CopyProgressRoutine(
long TotalFileSize,
long TotalBytesTransferred,
long StreamSize,
long StreamBytesTransferred,
uint dwStreamNumber,
CopyProgressCallbackReason dwCallbackReason,
IntPtr hSourceFile,
IntPtr hDestinationFile,
IntPtr lpData);

int pbCancel;

enum CopyProgressResult : uint
{
    PROGRESS_CONTINUE = 0,
    PROGRESS_CANCEL = 1,
    PROGRESS_STOP = 2,
    PROGRESS_QUIET = 3
}

enum CopyProgressCallbackReason : uint
{
    CALLBACK_CHUNK_FINISHED = 0x00000000,
    CALLBACK_STREAM_SWITCH = 0x00000001
}

[Flags]
enum CopyFileFlags : uint
{
    COPY_FILE_FAIL_IF_EXISTS = 0x00000001,
    COPY_FILE_RESTARTABLE = 0x00000002,
    COPY_FILE_OPEN_SOURCE_FOR_WRITE = 0x00000004,
    COPY_FILE_ALLOW_DECRYPTED_DESTINATION = 0x00000008
}

private void XCopy(string oldFile, string newFile)
{
    CopyFileEx(oldFile, newFile, new CopyProgressRoutine(this.CopyProgressHandler), IntPtr.Zero, ref pbCancel, CopyFileFlags.COPY_FILE_RESTARTABLE);
}

private CopyProgressResult CopyProgressHandler(long total, long transferred, long streamSize, long StreamByteTrans, uint dwStreamNumber,CopyProgressCallbackReason reason, IntPtr hSourceFile, IntPtr hDestinationFile, IntPtr lpData)
{
    return CopyProgressResult.PROGRESS_CONTINUE;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T14:19:45.130

这不能在多个级别上起作用。首先，需要通过[WorkerReportsProgress](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.workerreportsprogress.aspx)将后台工作人员设置为“报告更改” ，但是这个标志并不意味着他可以自动执行此操作，当然这不会起作用。为此，Worker 提供了[ReportProgress](http://msdn.microsoft.com/en-us/library/ka89zff4.aspx)方法，您需要调用该方法来显示当前进度。这揭示了你方法的最后一个缺陷。File.Copy 方法正在阻塞，但您的工作人员需要时间来调用 ReportProgress 方法。因此，您需要找到一种异步复制文件的方法。[这个](https://stackoverflow.com/questions/882686/asynchronous-file-copy-move-in-c-sharp)问题可能会有所帮助，当然 Dave Bishs 的评论是异步文件复制的一个很好的参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:32:10.680

我的建议是移动 DoWork 后台工作人员的内容`btnCopyTo_Click`并将`btnCopyFrom_Click`其分开，然后使用`btnCopyTo_Click`并`btnCopyFrom_Click`触发后台工作人员。后台工作人员可用于报告进度，因此您甚至无法在不这样做的情况下开始。

至于何时实际更新进度条，我建议每次确定您正在复制的文件的大小。

如果您随后将文件拆分为特定大小的块，然后使用循环一次复制一个块，那么您应该能够在循环的多个循环中将进度条增加一定量。

或者找到一种方法让异步线程在复制过程中从 0 到 100 连续循环进度条。这是一个非常基本的解决方案，但它至少让用户知道正在发生某些事情。

# mercurial - 使用 Mercurial 发布到公共环境

> ID：10517870
> 
> 赞同：1
> 
> 时间：2012-05-09T14:11:22.473
> 
> 标签：mercurial, workflow

基本上，我对在小型团队环境中使用 mercurial 很陌生。我正在寻找一种方法（如有必要，第三方将我的更改集/修订发布到公共登台和公共实时服务器。

目前我已经在我们本地的 ubuntu 服务器上设置了，使用通配符 DNS，一个带有文件夹的目录，每个文件夹都包含一个项目。在该文件夹中，我创建了另一个名为“repo”的文件夹，它存储了我网站的本地干净版本。然后我从该本地文件夹克隆到一个自定义文件夹，完成我的工作，然后将其推回到前面提到的“repo”文件夹中。

接下来，“repo”文件夹连接到第 3 方站点 bitbucket。这样我就可以在外地工作了。

我想弄清楚的是，如果有开放源代码或允许我在 Web 界面中使用的东西，请查看我的修订版并选择将其发布到 2 个服务器位置之一。我知道 beanstalk 可以做到，但我真的很喜欢 bitbucket，而且它具有成本效益。我有大约 15-25 个不同的存储库。

我的过程是不是太多了？我怎样才能使这个过程尽可能高效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:05:06.943

你在用hgweb吗？从你的描述中不清楚你是，你当然应该是。

除此之外，从中央仓库克隆到本地工作克隆，修改、提交并将 bash 推送到中央仓库听起来很正常。

为什么要使用 Web 界面从您的中央私有仓库推送到您的公共站点？为什么不直接从您的工作克隆转到公共站点？

例如，在我的博客存储库中的本地计算机（根本不是 Web 服务器）上，我在`.hg/hgrc`文件中有以下内容：

```
[paths]
default = ssh://ry4an.org/projects/unblog
publish = https://ry4an.org/hg/unblog 
```

如果我这样做，`hg pull`我会从我的主目录中的 ry4an.org 服务器上的私人仓库中获得更改。然后我编辑、提交，然后`hg push`再次转到我远程服务器上的私人仓库。当我想实际发布博客条目时`hg push publish`，我会将变更集从本地工作存储库推送到公共存储库（在[http://ry4an.org/hg/unblog](http://ry4an.org/hg/unblog)，这是 http://ry4an.org 的实时[内容/取消博客](http://ry4an.org/unblog)）

理论上，我可以使用某种 Web 界面将变更集从 ssh://ry4an.org/projects/unblog 移动到[https://ry4an.org/hg/unblog](https://ry4an.org/hg/unblog)，但是从我的本地工作克隆发送它们给我更好工具（`hg incoming`、`hg outgoing`、`hg log`等）

我是从根本上误解了您的目标还是有帮助？

# vb.net - twitter json - 无法使用 json.net / javascriptserializer 转换为 jobject 或 jarray

> ID：10517875
> 
> 赞同：0
> 
> 时间：2012-05-09T14:11:49.683
> 
> 标签：vb.net, json, json.net, javascriptserializer

我已经被困了 3 天了……我一直在访问 twitter api 来获取用户列表的 user_timeline，而返回的 json 无法使用。我尝试使用 javascriptserializer 反序列化它并得到一个错误：

传入的无效对象，':' 或 '}'

现在这令人沮丧，因为我希望返回的 json 没有错误。然后我尝试了 json.net 并使用 string.split 拆分帖子，并尝试将每个帖子转换为 Jobject 或 jarray。对于 Jarray 我得到

'加载 jArray 时内容意外结束

对于作业：

'从 jsonreader 读取 JObject 时出错。当前的 jsonreader 项目不是对象，StartArray'

这真是令人沮丧。

这是 json 开头和结尾的示例：

```
[{"created_at":"Tue May 08 10:30:05 +0000   2012","id":199808381991653377,
  "id_str":"199808381991653377",
  "text":"@waddehawk Sorry for the misinformation earlier,
          this should be tomorrow after 2pm.",
  "source":"\u003cahref=\"http:\/\/www.awarenessnetworks.com\/home\/\"                              
  "truncated":false,
  "in_reply_to_status_id":199796940358156288,
  "in_reply_to_status_id_str":"199796940358156288",
  "in_reply_to_user_id":333905755,"in_reply_to_user_id_str":"333905755",
  "in_reply_to_screen_name":"waddehawk",
  "user":
  {"id":95310018,"id_str":"95310018",
  "name":"DBS Bank","screen_name":"dbsbank","location":"Singapore",
  "description":"The DBS official channel, 
  we're here Mon-Fri, 9am-6pm. Otherwise, call us 
  at 18001111111 or contact us via www.dbs.com\/contact",
  "url":"http:\/\/www.dbs.com","protected":false,
  "followers_count":1350,"friends_count":173,"listed_count":58,
  "created_at":"Tue Dec 08 00:07:04 +0000           2009","favourites_count":0,"utc_offset":28800,
  "time_zone":"Singapore","geo_enabled":false,
  "verified":false,"statuses_count":306,"lang":"en",
  "contributors_enabled":false,"is_translator":false,
  "profile_background_color":"CC0000",
  "coordinates":null,"place":null,"contributors":null,
  "retweet_count":1,"favorited":false,"retweeted":false,"possibly_sensitive":false}]
  {"created_at":"Tue May 08 19:45:51 +0000   2012","id":199948247710703616,
  "id_str":"199948247710703616",
 "text":"@mhess4 We agree! We still have several days to go. Hope you'll 
    be able to  make it to one of our stops before Fri!",
  "source":"\u003ca href=\"http:\/\/www.exacttarget.com
  \/products\/social.aspx?utm_source=sp1\" rel=\"nofollow\"\u003eSocialEngage\u003c\/a\u003e",
 "truncated":false,"in_reply_to_status_id":199527746962071553,
 "in_reply_to_status_id_str":"199527746962071553",
 "in_reply_to_user_id":36889749,"in_reply_to_user_id_str":"36889749",
 "in_reply_to_screen_name":"mhess4","user":
 {"id":80374332,"id_str":"80374332","name":"Citibank",
  "screen_name":"Citibank","location":"","description":"Special offers, 
  ideas for managing your financial life, and 
   other updates from  Citibank","url":"http:\/\/www.citi.com",
  "protected":false,
  "followers_count":9221,"friends_count":8454,
  "listed_count":245,"created_at":"Tue Oct 06 18:49:45 +0000 2009","favourites_count":0,"utc_offset":-18000,
 "time_zone":"Quito","geo_enabled":false,"verified":true,
 "statuses_count":1592,"lang":"en","contributors_enabled":true,
 "is_translator":false,"profile_background_color":"C0DEED",
 "profile_background_image_url":"http:\/\/a0.twimg.com
 \/profile_background_images\/95956292\/twitter_bg_1280x1024.jpg",
 "profile_background_image_url_https":"https:\/\/si0.twimg.com
 \/profile_background_images\/95956292\/twitter_bg_1280x1024.jpg",
 "profile_background_tile":false,"profile_image_url":"http:\/\/a0.twimg.com
  \/profile_images\/853331211\/citi-co-r-3d_sm_rgb_normal.jpg","profile_image_url_https":
"https:\/\/si0.twimg.com\/profile_images\/853331211\/citi-co-r-3d_sm_rgb_normal.jpg","profile_link_color":"0084B4",
 "profile_sidebar_border_color":"C0DEED","profile_sidebar_fill_color":"DDEEF6",
 "profile_text_color":"333333","profile_use_background_image":true,
 "show_all_inline_media":false,"default_profile":false,
 "default_profile_image":false,"following":null,"follow_request_sent":null,
 "notifications":null},"geo":null,"coordinates":null,"place":null,
 "contributors":null,"retweet_count":0,"favorited":false,"retweeted":false},.. 
```

现在我已经在这里格式化了代码并且没有粘贴整个文件，但它对我来说确实是有效的 json，并且在从 twitter api 接收到流后我没有更改任何内容。有人可以指出我正确的方向吗？我真的需要解析这些东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:43:05.363

总之，想通了。太恐慌了，没有看到明显的解决方案。我只是确保我清理了 json 并使用在线[http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/) 清洁器对其进行了验证。这样做并且能够使用 json.net 转换为 JObject

# image - 如何使用 XPCOM 检索网页中存在的图像（如果可能，已解码）

> ID：10517877
> 
> 赞同：0
> 
> 时间：2012-05-09T14:11:56.453
> 
> 标签：image, firefox, xpcom

如果可能的话，如何通过 XPCOM 获取网页上的所有图像？

图像可以在 HTML 中指定为某个 CSS 属性中的背景 url，在 img 标记内，或以 Web 开发人员可能包含的任何形式。

我尝试研究 imgIContainer、imgIDecodeObserver 和许多其他接口。尽管我们可以通过一种方式向 Mozilla 提供图像 URI，以便它加载图像、解码并返回 imgIContainer。但是我无论如何都找不到获取当前网页中的所有图像。

这必须在 Java 或 Javascript 中完成。

有什么建议么？

* * *

@Wladimir - 感谢您的帮助。

我想要所有图像，包括 CSS 结构（背景图像）。所以现在我正在监听来自 nsIWebProgressListener 的事件。

```
 onStateChange: function(webProgress, request, stateFlags, status) {
        if ((~stateFlags & (nsIWebProgressListener.STATE_IS_REQUEST | nsIWebProgressListener.STATE_STOP)) == 0) {
            var imgReq = request.QueryInterface(CI.imgIRequest);
            if (imgReq)
                var img = imgReq.image;
        }
    } 
```

问题是`request.QueryInterface(CI.imgIRequest)`所有非图像请求都会引发异常。尽管可以通过将代码放在 try-catch 块中来忽略这些异常，但我更喜欢干净利落地做事。

是否有任何条件可以检查以了解请求是否为图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:39:35.200

您可以查看现有代码。页面信息对话框有一个媒体选项卡，可以成功显示页面上的大多数图像。重要的功能是[`grabAll()`in`pageInfo.js`](http://hg.mozilla.org/mozilla-central/file/b5765cc9da6c/browser/base/content/pageinfo/pageInfo.js#l667)，它为每个元素调用（通过[TreeWalker](https://developer.mozilla.org/en/DOM/document.createTreeWalker)）。正如你所看到的，没有通用的方法来获取图像，这个函数而是[`window.getComputedStyle()`](https://developer.mozilla.org/en/DOM/window.getComputedStyle)用来提取这个元素的一堆 CSS 属性的值：`background-image`, `border-image`, `list-style-image`, `cursor`。它还将查找`<img>`, `<svg:image>`, `<link>`(favicon), `<input>`, `<button>`,`<object>`和`<embed>`标签。然而，它并不能识别所有内容，例如这些 CSS 结构将不会被识别：

```
.foo:before
{
  content: url(image.png);
}
.foo:hover
{
  background-image: url(image.png);
} 
```

尽管如此，这可能是您所能得到的——除非您想查看网页加载时发出的请求。

**编辑**：如果您在执行请求时查看请求（通过[网络进度侦听](https://developer.mozilla.org/en/Code_snippets/Progress_Listeners)器），您可以执行以下操作：

```
if (request instanceof CI.imgIRequest)
  var img = request.URI.spec; 
```

请注意，这`request.image`对您没有多大帮助，几乎所有方法`imgIContainer`都只能从本机代码访问。

# postgresql - Postgresql - 有没有办法知道一个 INSERT 错误代码来确定我是否应该因为重复的唯一限制而更新？

> ID：10517878
> 
> 赞同：1
> 
> 时间：2012-05-09T14:11:59.823
> 
> 标签：postgresql

我的表中有一组复合的 UNIQUE 列。因此，如果我插入到违反唯一键的表中，Postgresql 将返回并出错，我的 PHP 脚本可以读取此错误。

插入时，而不是这样做：

```
SELECT id FROM table WHERE col1='x' and col2='y'
(if no rows)
INSERT INTO table...
(else if rows are found)
UPDATE table SET... 
```

我更喜欢使用：

```
INSERT INTO table...
(if error occurred then attempt to UPDATE)
UPDATE table SET... 
```

从上面返回的错误类型将是“错误：重复键值违反唯一约束“xxxxxxxx_key”

但是，如果 INSERT 由于某些其他原因（例如无效数据）失败，则执行 UPDATE 是没有意义的。有没有办法“知道”（来自 PHP/Postgres）如果错误实际上是由于这个重复的密钥问题而不是无效数据而失败的？我只是好奇。如果数据无效，无论如何执行 UPDATE 也会返回错误，但您认为最佳做法是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:18:54.937

只需检查错误消息，看看你有什么样的错误。[pg_result_error_field()](http://us3.php.net/manual/en/function.pg-result-error-field.php)显示了这一切。详细信息请查看 PGSQL_DIAG_SQLSTATE 和[PostgreSQL 手册](http://www.postgresql.org/docs/current/interactive/errcodes-appendix.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T16:02:33.113

您可能想在官方文档中查看此[示例。](http://www.postgresql.org/docs/current/static/plpgsql-control-structures.html#PLPGSQL-UPSERT-EXAMPLE)

您可以自由添加更多`WHEN EXCEPTION ... THEN`处理程序，可用错误列表[也可以在文档中找到](http://www.postgresql.org/docs/current/static/errcodes-appendix.html)。

尽管在上面的示例中，如果出现任何其他错误，该函数将引发异常，但`unique_violation`特殊处理的错误除外。

# class - 在 vaadin 中使用其他类的布局

> ID：10517886
> 
> 赞同：0
> 
> 时间：2012-05-09T14:12:30.963
> 
> 标签：class, function, layout, parameter-passing, vaadin

有什么想法可以让我使用在 MyApplication.java 中声明的其他类和函数中的布局。我尝试将它们放在参数中它可以工作，但它变得非常复杂例如 xhen 在函数 XI 中调用一个名为 Y 的函数必须传递参数的所有布局，如下所示：

X(layout1,layout2,layout3,layout4) { Y(a,b,c,layout1,layout2,layout3,layout4) }

我尝试使用一个名为 uiHelper 的类，但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:28:56.210

您可以查看 vaadin 的 Blackboard 插件。

> [https://vaadin.com/addon/blackboard](https://vaadin.com/addon/blackboard)

从该页面：

> 有时，具有较深的组件层次结构会带来问题，当您需要通知树中较高的组件在下面的深处发生了某些事情时。您通常有两种选择之一 - 要么将侦听器一直向下传递到层次结构，从而导致更多耦合的代码，要么让中间的每个组件成为侦听器/通知器，将事件一直向上传递。使用 Blackboard，您可以注册任何侦听器以侦听任何事件，并且当该事件被触发时，该事件的所有侦听器都会被触发。这使您的组件保持清洁并摆脱不必要的样板代码。

对于您的示例，您可以创建**LayoutChangeListener**和**LayoutChangeEvent**。 **MyApplication**然后可以实现**LayoutChangeListener**并且当触发**LayoutChangeEvent**时，您可以更改布局而无需传递它。

# php - 如何在 SQLite 中显示 SQL 错误？

> ID：10517887
> 
> 赞同：2
> 
> 时间：2012-05-09T14:12:33.147
> 
> 标签：php, sqlite, iis, pdo

在 PHP 中使用 SQLite（因此使用 PDO），我有以下代码：

```
try {
$db = new PDO("sqlite:C:\Program Files\Spiceworks\db\spiceworks_prod.db");

echo "Done.<br /><b>";

$query = "SELECT id FROM Devices LIMIT 5";

echo "Results: ";

$result = $db->query($query);

while ($row = $result->fetchArray()) {
    print_r($row)."|";
}
}
catch(PDOException $e) {  
    echo $e->getMessage();  
} 
```

但这不会从 SQL 中打印出任何数据。我知道数据库中有数据并且连接有效。如果我将查询更改为：

```
$query = "SELECT BLAHid FROM FakeDevices LIMIT 5"; 
```

没有什么变化。SQL 中的任何内容都不会再次打印出来，即使这显然是一个无效的 SQL 查询，我也看不到任何错误。

在这两种情况下，“完成”和“结果”都可以打印出来。如何打印 SQL 错误，例如查询无效？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T14:17:27.480

您需要告诉 PDO 抛出异常。您可以通过在连接到数据库后添加以下行来做到这一点：

```
$db = new PDO("sqlite:C:\Program Files\Spiceworks\db\spiceworks_prod.db");
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

这样，您可以捕获所有异常，除了第一行可能存在的问题，即数据库连接本身。

# ruby-on-rails - 当我不希望有任何括号时，Rails 抱怨缺少括号

> ID：10517888
> 
> 赞同：0
> 
> 时间：2012-05-09T14:12:33.847
> 
> 标签：ruby-on-rails, ruby, erb

我收到以下错误：

```
Showing app/views/layouts/application.html.erb where line #15 raised:
app/views/layouts/application.html.erb:15: syntax error, unexpected keyword_end  
  ');@output_buffer.append= ( end );@output_buffer.safe_concat('
                             ^
app/views/layouts/application.html.erb:22: syntax error, unexpected keyword_ensure, expecting ')'
app/views/layouts/application.html.erb:24: syntax error, unexpected keyword_end, expecting ')'

Extracted source (around line #15):
12: <div class="container">
13:   <%= flash.each do |key, value| %>
14:       <div class="alert alert-<%= key %>"><%= value %></div>
15:   <%= end %>
16:   <%= yield %>
17:   <%= render 'layouts/footer' %>
18: </div> 
```

以下是 application.html.erb 的内容

```
<!DOCTYPE html>
<html>
<head>
  <title><%= title %></title>
  <%= stylesheet_link_tag   "application", media: 'all' %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
  <%= render 'layouts/shim' %>
</head>
<body>
<%= render 'layouts/header' %>
<div class="container">
  <%= flash.each do |key, value| %>
      <div class="alert alert-<%= key %>"><%= value %></div>
  <%= end %>
  <%= yield %>
  <%= render 'layouts/footer' %>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T14:14:14.437

尝试：

```
 <% flash.each do |key, value| %>
   <div class="alert alert-<%= key %>"><%= value %></div>
 <% end %> 
```

`<%=`表示输出，不能输出结束的结果。 `<%`表示执行，您可以在以下位置查看所有标签：

[http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html)

```
<% Ruby code -- inline with output %>
<%= Ruby expression -- replace with result %>
<%# comment -- ignored -- useful in testing %>
% a line of Ruby code -- treated as <% line %> (optional -- see ERB.new)
%% replaced with % if first thing on a line and % processing is used
<%% or %%> -- replace with <% or %> respectively 
```

# java - 意图不起作用

> ID：10517891
> 
> 赞同：0
> 
> 时间：2012-05-09T14:12:44.817
> 
> 标签：java, android, eclipse

我有这个意图代码：

```
Intent arbeiten = new Intent(this, arbeiten.class);
startActivity(arbeiten); 
```

但 Eclipse 告诉我：

```
The constructor Intent(new AdapterView.OnItemClickListener(){}, Class<arbeiten>) is undefined 
```

同一项目中的其他（工作）意图，但其他类看起来像

```
Intent toolb = new Intent(this, ToolBox.class);
toolb.putExtra("json", json.toString());
startActivity(toolb); 
```

他们正在工作...

“Arbeiten”类看起来像这样：

```
package XXX;
import android.app.Activity;
import android.os.Bundle;

public class arbeiten extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:16:25.007

这是因为`this`指的是您的`OnItemClickListener`. 有不同的方法来解决这个问题。一种方法是像这样引用活动的上下文：

```
Context mContext;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //your code

    mContext = this;
} 
```

然后在您的 中`OnClickListener`，将其更改为：

```
Intent arbeiten = new Intent(mContext, arbeiten.class);
startActivity(arbeiten); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T14:17:36.333

从错误消息来看，您似乎是`Intent`在`OnClickListener`. 要创建`Intent`，您必须通过`Context`. 您可以使用以下方法实现此目的：

```
Intent arbeiten = new Intent(NameOfYourActivity.this, arbeiten.class);
startActivity(arbeiten); 
```

（外部类在哪里`NameOfYourActivity`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T14:16:45.310

这是因为您是从侦听器内部调用它，所以`this`引用侦听器而不是“外部”活动。尝试：

```
Intent arbeiten = new Intent(YourClassName.this, arbeiten.class);
startActivity(arbeiten); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T14:19:24.733

试试这个：

```
startActivity(new Intent(getApplicationContext(), arbeiten.class)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T14:21:37.360

首先为您的本地对象选择一些不同的名称，除了 arbeiten，并确保您调用正确的“this”，例如：

```
Intent intent = new Intent(YourCurrentActivity.this, arbeiten.class);
startActivity(intent); 
```

# c# - 允许用户在多公司程序中选择和更改图标

> ID：10517896
> 
> 赞同：3
> 
> 时间：2012-05-09T14:12:55.210
> 
> 标签：c#, out-of-memory

我正在开发一个允许用户输入多个公司的 C# 程序，并且我正在尝试允许用户为每个公司使用一个图标（以及任务栏中的公司名称），以帮助他们轻松区分他们。

到目前为止，我有以下代码，它显示了图标的图片框以确认它是正确的图像，但是当我运行程序时，它在更改图像 3 或 4 次后因内存不足异常而崩溃。在阅读了此站点上类似问题的解决方案后，我尝试处理该图像，但似乎无法使其正常工作：

```
private void btnBrowse_Click(object sender, EventArgs e)
{
  openFileDialog1.InitialDirectory = "R:\\rightsort fulfilment\\charity icons";
  openFileDialog1.Title = "Choose an Icon";
  openFileDialog1.FileName = "";
  openFileDialog1.Filter = "Icon Files|*.ico";

  if (openFileDialog1.ShowDialog() != DialogResult.Cancel)
  {
    txtIcon.Text = openFileDialog1.FileName;
    pictureBox1.Image = Image.FromFile(txtIcon.Text);
    pictureBox1.Visible = true;
  }
  else
  {
    txtIcon.Text = "";
    pictureBox1.Visible = false;
  }
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:24:27.343

图像类继承自 IDisposable。每次用新图片替换时都需要调用 Dispose 方法来释放资源。

但是我不知道这是否是您问题的根源。您还可以尝试运行内存分析器并查看内存分配的确切位置和方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:28:11.107

我会尝试在图片控件中处理旧图像。像这样的东西：

```
if (openFileDialog1.ShowDialog() != DialogResult.Cancel)
{
    txtIcon.Text = openFileDialog1.FileName;
    Image oldImage = pictureBox1.Image;
    pictureBox1.Image = Image.FromFile(txtIcon.Text);
    if (oldImage != null)
    {
        oldImage.Dispose();
    }
    pictureBox1.Visible = true;
 } 
```

# objective-c - 变长 c 数组

> ID：10517897
> 
> 赞同：2
> 
> 时间：2012-05-09T14:13:00.373
> 
> 标签：objective-c, arrays, variables

我正在使用目标 c 创建一个包含可变长度数组的结构。我知道你可以像这样创建一个长度为 n 的数组：

```
double array[n]; 
```

而且我也相信 C++ 你可以声明：

```
vector<double> array; 
```

您不必声明数组长度。有没有办法在目标 c 中做类似的事情？我正在使用 ARC。

在此先感谢，本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:15:28.207

你只需要创建一个 NSMutableArray 就像 -

```
NSMutableArray *myArray = [NSMutableArray array];

[myArray addObject:....];// Add as many object as you want. 
```

你只需要在创建可变长度数组时注意一件事，不要将 nil 添加为对象，因为 nil 只是表示可变长度参数列表的结尾。

编辑-可能会帮助您-通过这种方式，您可以在结构中定义目标 c 数据类型-

```
typedef struct{ 
    int numInputs; 
    __unsafe_unretained NSMutableArray *array;
} Pin; 
```

# python - 从概念上理解 SQLite

> ID：10517900
> 
> 赞同：0
> 
> 时间：2012-05-09T14:13:14.627
> 
> 标签：python, sqlite, web-hosting

我查看了 sqlite.org 文档，但我是新手，所以请耐心等待。（我对 MySQL 有一点点经验，我认为使用它对于我试图用我的应用程序做的事情来说有点过头了。）

据我了解，我最初可以在我的 MAC 上本地创建一个 SQLite db 文件，并使用 Firefox 扩展向其中添加主菜。然后我可以存储任意数量的表格和图像（作为二进制文件）。一旦使用此数据库的网站上线，我就可以将数据库文件上传到任何网络托管服务到任何目录。在我的站点中，我可以有一个表单来收集数据并发送请求以将该数据写入 db 文件。然后，我可以有一个 iOS 应用程序连接到数据库并读取数据。我做对了吗？

我可以运行写入 SQLite 的 Python 脚本吗？我应该问潜在的托管服务哪些问题？（我想离开 MediaTemple，所以我环顾四周……）我不想局限于 Windows 服务器，我假设 SQLite 会在 Unix 上运行？或者，它是否依赖于托管服务？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:19:11.933

> 我可以将 db 文件上传到任何网络托管服务到任何目录

假设该服务安装了用于处理 sqlite 的库，并且安装了该 sqlite。

> 我能运行一个写入 SQLite 的 Python 脚本吗

是的，好吧，也许。从 Python 2.5 开始，Python 将 sqlite 支持作为其标准库的一部分。

> 我应该问潜在的托管服务哪些问题

通常，在他们的技术规范中，他们会列出支持的数据库/库/语言。我已经在 Dreamhost 上成功运行了带有 sqlite 数据库的 Python 站点。

> SQLite 可以在 Unix 上运行

大多数 *nix 风格都有预打包的 sqlite 安装二进制文件。托管服务提供商也应该能够告诉您这一点。

# installation - 查询所有以非 root 身份安装的 rpm？

> ID：10517904
> 
> 赞同：1
> 
> 时间：2012-05-09T14:13:24.087
> 
> 标签：installation, rpm

正如标题所述，我想知道在初始化我自己的数据库后如何列出所有已安装的 rpm（我浏览了手册页并用谷歌搜索，但这并没有给我带来财富）：

**rpm --initdb --root /home/username/local --dbpath /home/username/local/lib/rpm**

?

执行**rpm -qa**不会显示上面本地数据库中的任何包。

最好的问候，手枪先生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:10:38.730

当您想使用用户安装的数据库时，您需要在每次调用 rpm 时同时使用`--root /home/username/local`和选项。`--dbpath /home/username/local/lib/rpm`除非另有说明，否则 rpm 始终使用系统数据库。

**注意：**使用这两个选项似乎过度，因为数据库是在 root 下创建的。在您的情况下，这意味着数据库将位于`/home/username/local/home/username/local/lib/rpm`. 我相信那不是你的本意

# c++ - 提升数值常数优点

> ID：10517908
> 
> 赞同：5
> 
> 时间：2012-05-09T14:13:34.877
> 
> 标签：c++, boost, constants, cmath

通过使用Boost Numeric Constants（例如，在编译过程中`pi<T>`定义`<boost/math/constants/constants.hpp>`而不是包含`<cmath>`和使用，而不是使用更热的计算机）可以获得什么（我猜在类型安全性、性能和准确性方面） ？`M_PI`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T22:41:27.747

类型安全和更高的精度。

“所有常量都至少精确到 128 位长双精度所需的 34 位十进制数字，并且当与合适的任意精度类型一起使用时，大多数常量都精确到 100 位或更多。”

[http://www.boost.org/doc/libs/1_49_0/boost/math/constants/constants.hpp](http://www.boost.org/doc/libs/1_49_0/boost/math/constants/constants.hpp)

# sql - SQL Server 2008R2 Management Studio 中的角色和系统角色灰显

> ID：10517909
> 
> 赞同：3
> 
> 时间：2012-05-09T14:13:39.167
> 
> 标签：sql, sql-server

在 SQL Server Reporting Services Management Studio 的对象资源管理器中右键单击这些角色和系统角色中的选项时，我无法添加新角色、自定义报告或打开属性。不知道为什么，有大神解答，求大神帮忙。它最初工作正常，直到我在执行 Technet 的教程“从入门创建新报告”时遇到权限问题：由于我作为本地管理员的权限不足，无法创建与 ProductSales 的连接

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T14:22:02.987

您的 sql server management studio 是否在管理员登录时运行？如果没有右键单击它并以管理员身份运行。

# c++ - 使用 Boost 确保模板参数继承自某个类

> ID：10517919
> 
> 赞同：1
> 
> 时间：2012-05-09T14:14:13.823
> 
> 标签：c++, visual-studio-2010, templates, boost

我刚刚注意到我的代码经常重复这种结构：

```
if( someErrorHappened ){
        string errorMsg = "Falcon Punch!";
        ::GetErrorLoggerInstance()->Log( LOG_TYPE_ERROR, "class", "method", errorMsg );
        throw SomeCustomException( errorMsg );
} 
```

我想我可以编写一个模板函数，这样我就可以用这样的单行替换所有这些：

```
LogAndThrowIfError<SomeCustomException>( someErrorHappened, "class", "method", "Falcon Punch!" ); 
```

我可以用我的基本模板知识做到这一点。我的问题是，如果模板参数是一个不从特定类继承的类，我可以使用 Boost 来确保出现编译错误吗？（即我只想让这个函数用于我的自定义异常）。有点像 C# 的`where`泛型关键字。

这可能看起来很牵强，但我需要强制执行，因为我们的应用程序具有托管和非托管代码，并且我们的自定义本机异常映射到自定义托管异常，这就是为什么这只应该与我们的异常一起使用。

我在 Visual Studio 2010 中工作，所以我没有所有花哨的 C++11 东西，只是其中的一些（移动语义是最有趣的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T17:31:57.590

尝试

```
 BOOST_STATIC_ASSERT(( boost::type_traits::is_base_of< ExceptionBaseClass, T >::value )); 
```

它在内部进行与@Zolyomi 在他的回答中发布的相同检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T13:52:29.167

实际上，您不需要 Boost 或任何花哨的库来执行此操作，尽管您可以根据需要使用它们。最简单的方法是做类似的事情

```
template<typename T>
void LogAndThrowIfError(...options...)
{
    static ExceptionBaseClass *CheckBaseClass_WriteYourErrorMessageHere = static_cast<T*>(null);
    ... your logging code here ...
} 
```

每次使用新类型 T 实例化模板时，它都会检查一次 T* 是否可以转换为 ExceptionBaseClass*，这基本上相当于 T 是从 ExceptionBaseClass 派生的。

请注意，如果检查失败，错误消息可能不是很直接，如果您不介意依赖它们，Boost 或其他库可能会提供更好的错误消息。

# multithreading - 我可以在 MATLAB 中录制音频信号期间执行功能吗？

> ID：10517923
> 
> 赞同：1
> 
> 时间：2012-05-09T14:14:23.533
> 
> 标签：multithreading, matlab

我想在记录信号期间获得音频数据帧的音高。（不停止录制）首先，我执行了以下代码。

```
r = audiorecorder(fs,16,1);
while 1
   recordblocking(r,T);  % T is frame length [s]   (A)
   sample{k} = getaudiodata(r);   
   pitch{k} = get_pitch(sample{k});     % (B)
end 
```

但是，在执行 get_pitch 函数期间，录制过程会停止，这会导致丢失部分要录制的音乐信号。

我希望样本记录不间断地执行，但是将长度为 T[s] 的数据发送到函数 get_pitch 以便连续获得所有帧的音高。

有没有人可以给我一些建议？我非常感谢您的所有评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:30:47.370

一般来说，如果你使用的是 Matlab，并且你想要多线程，你唯一的希望就是并行计算工具箱。你这里有一个典型的`consumer/producer scenario`- 尝试用谷歌搜索它。

但是，您的方法的问题不一定是缺少线程。如果 get_pitch 命令足够快，你就没有问题。您不妨保存所有样本并在之后进行分析（如果它适合应用程序）。

# django - 使用 django 表单向导保存模型时出错

> ID：10517925
> 
> 赞同：0
> 
> 时间：2012-05-09T14:14:31.370
> 
> 标签：django, django-models, django-forms

我`IntegrityError`在尝试将模型保存到数据库时遇到问题

```
def done(self, form_list, **kwargs):
    new = Business()
    new.user = self.request.user
    for form in form_list:
        for k,v in form.cleaned_data.iteritems():
            new.k = v
    new.save()
    return redirect('/') 
```

错误说：`(1048, "Column 'category_id' cannot be null")`

正在完成并具有类别模型的表格：

```
class AddForm2(forms.Form):
    category = forms.ModelChoiceField(queryset = Category.objects.filter(children__isnull=True))
    city = forms.ModelChoiceField(queryset = City.objects.all())
    name = forms.CharField(max_length = 200, label="Business Name")
    address = forms.CharField(max_length = 200, label="Street Address")
    slogan = forms.CharField(max_length=140)
    phone = forms.CharField(max_length=10)
    website = forms.URLField()
    email = forms.EmailField() 
```

商业模型.py

```
class Business(models.Model):
    TYPE_CHOICES = (
        ('1','Basic'),
        ('2','Silver'),
        ('3','Platinum'))

    user = models.OneToOneField(User)
    ad_type = models.CharField(choices = TYPE_CHOICES, default = '1', max_length=1)
    name = models.CharField(max_length=200)
    slug = models.SlugField()
    address = models.CharField(max_length=200)
    slogan = models.CharField(max_length=140, blank=True)
    description = models.TextField()
    phone = models.CharField(max_length=10)
    website = models.URLField(blank=True)
    email = models.EmailField()
    twitter = models.CharField(max_length=100, blank=True)
    facebook = models.URLField(blank=True)
    category = models.ForeignKey(Category)
    city = models.ForeignKey(City) 
```

* * *

编辑：

我在我的 done 方法中更改了行`new.k = v`，`setattr(new,k,v)`它起作用了。不知道有什么区别...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:42:45.403

done() 函数应该使用 setattr 代替：

```
def done(self, form_list, **kwargs):
    new = Business()
    new.user = self.request.user
    for form in form_list:
        for k,v in form.cleaned_data.iteritems():
            setattr(new, k, v)
    new.save()
    return redirect('/') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:56:12.310

在深入研究之后`django.forms.models`，我建议使用方便的`construct_instance`方法将数据从多个表单保存到单个实例：

```
from django.contrib.formtools.wizard.views import SessionWizardView
from django.forms.models import construct_instance

class YourFormWizard(SessionWizardView):

    def done(self, form_list, **kwargs):
        new = Business()
        new.user = self.request.user
        for form in form_list:
            new = construct_instance(form, new, form._meta.fields, form._meta.exclude)
        new.save()
        return redirect('/') 
```

# c# - ListBox AutoSizes 按项目高度

> ID：10517926
> 
> 赞同：6
> 
> 时间：2012-05-09T14:14:33.020
> 
> 标签：c#, winforms, listbox, dock, tablelayoutpanel

我将 TableLayoutPanel 用于表单中的所有元素。我使用 Dock Fill 来自动调整 TextBox 和 ListBox 的大小。TextBox 完全适合 TableLayoutPanel 的单元格，但不适合 ListBox。它按项目高度自动调整大小。

![在此处输入图像描述](../Images/da7269ad26cc91599849601924d99b06.png)

如何删除ListBox底部和表单底部之间的这个间隙？我知道我可以将 ListBox 的高度设置为某个值（例如 ListBox 中的项目高度为 16、16 * 10 个元素 = 160、160 将正确匹配），但是还有其他解决方案吗？
我正在使用 C#。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-09T14:22:50.213

设置 ListBox 的属性`IntegralHeight = false;`，使其不会通过项目高度变量调整控件的大小。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T14:23:32.457

将列表框的 IntegralHeight 属性设置为 false

# ruby - 为什么我的 ruby 应用程序可以在本地运行，而不能在 Heroku 上运行？

> ID：10517927
> 
> 赞同：0
> 
> 时间：2012-05-09T14:14:35.763
> 
> 标签：ruby, ruby-on-rails-3, git, heroku, postgresql-9.1

我有一个可以在本地正常工作的 Ruby 1.8.7 应用程序。为了在 Heroku 上加载它，我将数据库从 SQLite 更改为 PostgreSQL，安装 PostgreSQL 9.1.3，我将 Gemfile 替换`sqlite3`为：

```
group :development, :test do
  gem 'sqlite3'
end
group :production do
  gem 'pg'
end 
```

并改变零件生产`config/database.yml`：

```
production:
adapter: postgresql
database: project_production
pool: 5
timeout: 5000 
```

然后我运行`bundle install --without production`成功。接下来我创建了一个 git 存储库：

```
git init
git add *
git commit -m "text" 
```

`heroku create --stack bamboo-ree-1.8.7`后来我用,成功地`git push heroku master`创建了一个 heroku 应用程序。`heroku rake db:migrate`

但它没有用！

少了什么东西？是我做错了什么还是没有发表任何声明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:55:28.750

“git add *”工作吗？我认为你最好使用：

```
$ git add . 
```

正如 Larsenal 所问，你能发布你的日志吗？

```
$ heroku logs 
```

关于 heroku 部署的基本信息在[这里](https://devcenter.heroku.com/articles/rails3)。

您不需要 database.yml 中的“生产”块，这是部署时由 heroku 自动生成的。

亲切的问候，麦克斯

# java - 如何在java中使用RSA密钥加密解密

> ID：10517930
> 
> 赞同：11
> 
> 时间：2012-05-09T14:14:53.790
> 
> 标签：java, openssl, rsa

我需要用 openssl 生成的`rsaprivatekey.pem`和密钥替换从 Unix 到 java 代码的加密和解密步骤`rsapublickey.pem`

我生成密钥

```
openssl  genrsa  -out /tmp/rsaprivatekey.pem  -des3 1024
openssl rsa -in /tmp/rsaprivatekey.pem -pubout -out /tmp/rsapublickey.pem 
```

我在 unix 中使用键（我需要在 java 中做）

```
echo "Text to encript"| openssl rsautl -encrypt -inkey /tmp/rsapublickey.pem -pubin -out out.enc
openssl rsautl -decrypt -inkey /tmp/rsaprivatekey.pem -in out.enc 
```

这是我的尝试

```
public static void main(String[] args) {

    Base64 base64 = new Base64();

    String TextStream = "this is the input text";
    byte[] Cipher;
    System.out.println("input:\n" + TextStream);
    Cipher = encrypt(TextStream);
    System.out.println("cipher:\n" + base64.encodeAsString(Cipher));
    System.out.println("decrypt:\n" + decrypt(Cipher));
}

private static byte[] encrypt(String Buffer) {
    try {

        Cipher rsa;
        rsa = Cipher.getInstance("RSA");
        rsa.init(Cipher.ENCRYPT_MODE, getPrivateKey(PRIVATE_PATH));
        return rsa.doFinal(Buffer.getBytes());
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

private static String decrypt(byte[] buffer) {
    try {
        Cipher rsa;
        rsa = Cipher.getInstance("RSA");
        rsa.init(Cipher.DECRYPT_MODE, getPrivateKey(PUBLIC_PATH));
        byte[] utf8 = rsa.doFinal(buffer);
        return new String(utf8, "UTF8");
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

public static PrivateKey getPrivateKey(String filename) throws Exception {
    File f = new File(filename);
    FileInputStream fis = new FileInputStream(f);
    DataInputStream dis = new DataInputStream(fis);
    byte[] keyBytes = new byte[(int) f.length()];
    dis.readFully(keyBytes);
    dis.close();

    PKCS8EncodedKeySpec spec = new PKCS8EncodedKeySpec(keyBytes);
    KeyFactory kf = KeyFactory.getInstance("RSA");
    return kf.generatePrivate(spec);
}

public static PublicKey getPublicKey(String filename) throws Exception {
    File f = new File(filename);
    FileInputStream fis = new FileInputStream(f);
    DataInputStream dis = new DataInputStream(fis);
    byte[] keyBytes = new byte[(int) f.length()];
    dis.readFully(keyBytes);
    dis.close();

    X509EncodedKeySpec spec = new X509EncodedKeySpec(keyBytes);
    KeyFactory kf = KeyFactory.getInstance("RSA");
    return kf.generatePublic(spec);
} 
```

但它不起作用，PKCS8EncodedKeySpec/X509EncodedKeySpec 不正确......但我不知道该放什么

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T15:36:52.103

解决方案：

感谢@Sanjeev，使用充气城堡 API，我能够使用 openssl 生成的密钥进行加密/解密

```
public static void main(String[] args) throws IOException {

    Security.addProvider(new BouncyCastleProvider());

    KeyPair keyPair = readKeyPair(new File(PRIVATE_PATH), "pass"); 
    // if the private key is not encripted, pass can be anything.
    Key publickey = readPublicKey(new File(PUBLIC_PATH), "pass"); 
    Base64 base64 = new Base64();
    String text = "this is the input text";
    byte[] encripted;
    System.out.println("input:\n" + text);
    encripted = encrypt(keyPair.getPublic(), text);
    System.out.println("cipher:\n" + base64.encodeAsString(encripted));
    System.out.println("decrypt:\n" + decrypt(keyPair.getPrivate(), encripted));        
}

private static byte[] encrypt(Key pubkey, String text) {
    try {
        Cipher rsa;
        rsa = Cipher.getInstance("RSA");
        rsa.init(Cipher.ENCRYPT_MODE, pubkey);
        return rsa.doFinal(text.getBytes());
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

private static String decrypt(Key decryptionKey, byte[] buffer) {
    try {
        Cipher rsa;
        rsa = Cipher.getInstance("RSA");
        rsa.init(Cipher.DECRYPT_MODE, decryptionKey);
        byte[] utf8 = rsa.doFinal(buffer);
        return new String(utf8, "UTF8");
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

private static KeyPair readKeyPair(File privateKey, String keyPassword) throws IOException {
    FileReader fileReader = new FileReader(privateKey);
    PEMReader r = new PEMReader(fileReader, new DefaultPasswordFinder(keyPassword.toCharArray()));
    try {
        return (KeyPair) r.readObject();
    } catch (IOException ex) {
        throw ex;
    } finally {
        r.close();
        fileReader.close();
    }
}

private static Key readPublicKey(File privateKey, String keyPassword) throws IOException {
    FileReader fileReader = new FileReader(privateKey);
    PEMReader r = new PEMReader(fileReader, new DefaultPasswordFinder(keyPassword.toCharArray()));
    try {
        return (RSAPublicKey) r.readObject();
    } catch (IOException ex) {
        throw ex;
    } finally {
        r.close();
        fileReader.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T15:23:49.350

我认为您在阅读 PEM 文件时遇到问题。JPA 不直接支持 PEM 格式。您有两个选择，或者将它们转换为 DER 编码文件（您可以使用 openSSL 来执行此操作），或者您可以使用 bouncy castle API 来读取（或写入）PEM 文件。您感兴趣的课程称为 PEMReader（也可能是 PEMWriter）。 [这是](https://www.bouncycastle.org/docs/docs1.5on/org/bouncycastle/util/io/pem/PemReader.html)bouncycastle 网站上的 Javadoc。

# java - Android - 滑动抽屉挂出（卡出）？

> ID：10517933
> 
> 赞同：0
> 
> 时间：2012-05-09T14:15:07.503
> 
> 标签：java, android, slidingdrawer

如何让滑动抽屉的内容有点“伸出”（挂出）？

![http://i.stack.imgur.com/bRX8K.png](../Images/9e1409cfa074fcc5e3b75f628972daaa.png)

拉后

![http://i.stack.imgur.com/0gWvb.png](../Images/e65dbcd8d592cb1b399901ec8a4eefbf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:34:08.730

你不能用股票小部件来做到这一点。

但是，之前有人问过这个问题，并且有人发布了一个[答案](https://stackoverflow.com/a/9976924/1105376)，该人已经做了一个课程来让你这样做。按照答案链接获取说明。

代码在[这里](http://pastebin.com/FtVyrcEb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T01:09:52.187

这是在您的 XML 文件中执行此操作的示例

```
<SlidingDrawer

              android:id="@+id/drawer"
              android:layout_width = "320dp" //set what ever dimensions you find appopriate
              android:layout_height = "440dp"
              android:orientation = "vertical"
              android:handle="@+id/handle"
              android:content="@+id/content">

<ImageView
              android:id="@+id/handle"
              android:layout_width="48dp" // Set your dimensions. This will be your handle
              android:layout_height="48dp"
              android:src="@drawable/putHandleImageHere" />

<TextView android:id="@+id/content"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text ="Hello World" /> 
```

---------------编辑--------我重读了你的问题，我看到你试图让内容挂出. 尝试使用

```
android:paddingTop="10dp" 
```

或者

```
android:layout_marginTop="10dp" 
```

让我知道这是否有效，祝你好运。

# java - 带有自定义形状标记的 Java GIS 框架

> ID：10517936
> 
> 赞同：1
> 
> 时间：2012-05-09T14:15:17.993
> 
> 标签：java, api, gps, markers, gis

我需要找到一个可以生成具有多个坐标标记的地图图像的开源 Java 框架/库/api。特别是我需要自定义标记的形状（即根据外部附加数据使标记圆的大小更大或更小）。此外，地图适合标记会很好（所以如果我只在欧洲放置标记，图像将只显示欧洲，而不是整个地球）。有谁知道具有这种功能的Java API？我查看了 geotools 或 jmapviewer 之类的东西，但它们似乎缺乏我需要的功能。

# c# - Visual Studio 2010 智能感知

> ID：10517937
> 
> 赞同：0
> 
> 时间：2012-05-09T14:15:26.787
> 
> 标签：c#, visual-studio, visual-studio-2010

使用 Visual Studio 2010 时，我打开一个 aspx 和 cs 文件进行编辑。（我还没有创建项目。我只是从我的 web 目录中打开一个 aspx 文件和一个 cs 文件进行编辑。）智能感知不会检测 System.Web 或大量其他文件。事实上，似乎只有基本资源可用。有没有办法纠正这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:18:40.433

由于您不在项目中，因此您缺乏很多允许完全智能感知支持的上下文。VS 不知道包含哪些程序集，也没有从 web.config 导入。

请记住，Intellisense 尝试仅向您呈现实际适用于当前构建配置的代码完成。如果没有引用程序集，它就无法猜测您在 System.Web 中是否有任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:29:46.623

Intellisense 几乎基于文件开头的“使用”子句的内容。它根据您已经针对“已使用”程序集中包含的可能功能列表键入的内容运行。

例如，如果您希望智能感知能够访问`Convert`您需要使用`System`程序集的功能。没有它，智能感知不会知道该功能存在

# java - 更新视图的规则是什么？

> ID：10517938
> 
> 赞同：0
> 
> 时间：2012-05-09T14:15:27.863
> 
> 标签：java, android, refresh

这不是一个特定的问题，但每次我必须更新我的 android 应用程序上的视图时，我都必须搜索很多内容以查看我的代码有什么问题。顺便说一句，不仅适用于android，而且一般适用于移动设备。

那么这种任务有什么规则/案例吗？我的意思是，什么时候可以使用`Invalidate`，什么时候必须使用`Handler`，等等。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:25:16.373

根据我的说法，当您使用“处理程序”时，您会在 UI 线程中放置一个锚点，以便您可以随时访问您的视图。当您发布“无效”时，您会说“嘿！您可以刷新我的视图吗？”。如果您在 UI 线程上，它可以立即（或几乎）执行。如果您在另一个线程中，它会“发布”一个需求，并且当您的活动返回到 UI 线程时，UI 将被刷新。

# iphone - Cocoa 枚举变量名为 nsstring

> ID：10517940
> 
> 赞同：0
> 
> 时间：2012-05-09T14:15:29.630
> 
> 标签：iphone, objective-c, ios, cocoa, enums

我有一个命名枚举

```
enum{
    MyErrorCodeOne            = 1
    MyErrorCodeTwo            = 2
}MyErrorCodes; 
```

例如，当我遇到 2 时，有没有办法将 NSLog "MyErroCodeOne" 发送给用户，而不是 2。 switch 语句不是这种情况，因为我目前有大约 50 个错误代码。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:28:27.163

评论响应很好，但您也可以只在全局范围内定义一个数组，比如这样说错误名称：

NSArray *errorNames = [NSArray arrayWithObjects:@"MyErrorCodeOne", @"MyErrorCodeTwo", nil];

并通过 [errorNames objectAtIndex:MyErrorCodeOne] 引用它；

只有这对你来说更容易。在我看来，第一反应是最好的。

# c# - C# Zedgraph 更改行破折号长度

> ID：10517941
> 
> 赞同：2
> 
> 时间：2012-05-09T14:15:30.687
> 
> 标签：c#, zedgraph

我正在尝试更改 Zed Graph 线上破折号的长度。我希望实线之间有更大的间隙。

我的代码示例

```
LineItem LineCurve = null
LineCurve = ZedGraphControl.GraphPane.AddCurve("line1",PairPointListData, Color, Symbol);
//now I want to change the dash settings
LineCurve.Line.Style = System.Drawing.Drawing2D.DashStyle.Dash;
LineCurve.Line.StepType = StepType.ForwardStep;
LineCurve.Line.DashOn = 1.0f;//Not sure what this floating point does
LineCurve.Line.DashOff = 1.0f;//Also not sure 
```

我已经更改了 Dash On 和 Off 的值，但我看不到任何明显的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T16:50:42.353

您的破折号样式必须设置为“自定义”。请参阅：http: [//zedgraph.sourceforge.net/documentation/html/P_ZedGraph_LineBase_DashOff.htm](http://zedgraph.sourceforge.net/documentation/html/P_ZedGraph_LineBase_DashOff.htm)

这是一些示例代码：

```
 double[] xvals = new double[100];
        double[] yvals = new double[100];

        for (double i = 0; i < xvals.Length; i++)
        {
            xvals[(int)i] = i / 10;
            yvals[(int)i] = Math.Sin(i / 10);
        }

        var zgc = msGraphControl1.zedGraphControl1;
        var lineItem = zgc.GraphPane.AddCurve("Custom", xvals, yvals, Color.Blue);

        lineItem.Line.Style = DashStyle.Custom;
        lineItem.Line.Width = 3;
        lineItem.Line.DashOn = 5;
        lineItem.Line.DashOff = 10;

        //offset the next curve
        for (int i = 0; i < xvals.Length; i++)
        {
            xvals[i] = xvals[i] + 0.5;
            yvals[i] = yvals[i] + 0.05;
        }

        var lineItem2 = zgc.GraphPane.AddCurve("DashDotDot", xvals, yvals, Color.Red);

        lineItem2.Line.Width = 3;
        lineItem2.Line.Style = DashStyle.DashDotDot;

        //offset the next curve
        for (int i = 0; i < xvals.Length; i++)
        {
            xvals[i] = xvals[i] + 0.5;
            yvals[i] = yvals[i] + 0.05;
        }

        var lineItem3 = zgc.GraphPane.AddCurve("Solid", xvals, yvals, Color.Black);

        lineItem3.Line.Width = 3;
        lineItem3.Line.Style = DashStyle.Solid;

        zgc.AxisChange();
        zgc.Refresh(); 
```

# wordpress - 两个div的正确定位，拆分

> ID：10517953
> 
> 赞同：2
> 
> 时间：2012-05-09T14:16:16.230
> 
> 标签：wordpress, css

找到以下信息的正确/最佳方法是什么，分为两个 div。

您可以在此处查看相关页面：

[http://property.begbies-traynor.com/sale/the-camelot-hotel/](http://property.begbies-traynor.com/sale/the-camelot-hotel/)

如您所见，顶部区域分为两部分。右侧一张用于主要属性图像，左侧一张包含属性特征。

我尝试过使用 Floats，但它的显示方式似乎不稳定。

拆分这两条信息的最佳方法是什么？

目前它们被设置为两个独立的 div，其中一个设置为 float:right;

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:23:55.857

`#split`需要是`float: left;`

`#split`那么和的总宽度`#split-two`需要比容器窄。

最后，您将需要一个清除元素，或者使用[合适的 clearfix](http://nicolasgallagher.com/micro-clearfix-hack/)`<br style="clear:both;" />` ，或者在容器内使用便宜且肮脏但之后`#split`和之后`#split-two`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:37:44.637

您说您想要*右侧*的属性图像和*左侧*的信息列，但在您的示例中，您`float:right`在`#split-two`信息列上。

如果您确实想要右侧的图像和左侧的列，则需要进行以下更改：

```
#split {
float: right;
}

#split-two {
float: none;
} 
```

在html中：

```
<div id="split-two" class="clearfix">   
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:28:29.290

将以下代码添加到您的样式中。

```
#split {
width: 340px;
float: left;
} 
```

# javascript - 通过单击列的标题对列进行排序

> ID：10517960
> 
> 赞同：0
> 
> 时间：2012-05-09T14:16:23.767
> 
> 标签：javascript, html, sorting

我正在尝试在我的 php 代码中实现一种排序功能。功能就像，当我们单击列的标题时，该特定列的记录将按升序排序，再次单击同一列意味着该列的记录将按降序排序。请帮助我如何继续进行一些示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:18:22.213

JQuery 有很多插件可以做这种事情。我在自己的项目中使用[了 Tablesorter ，效果很好。](http://tablesorter.com/docs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:21:43.863

我也推荐 jQuery Tablesorter，它是一个很棒的小插件。

您确实希望避免执行排序后端，因为这会给您的服务器带来压力，但如果您愿意，它就像根据用户单击的列向查询附加 ORDER BY 指令一样简单。同样，我不推荐这种方法，我认为你应该在前端使用 Tablesorter 之类的插件来做。

# c# - 在 Ninject 3.0 中使用默认参数值

> ID：10517962
> 
> 赞同：12
> 
> 时间：2012-05-09T14:16:28.477
> 
> 标签：c#, ninject, ninject-3

我有一个带有构造函数的类，该构造函数的参数具有默认值。使用 Ninject 2.2，它会尊重该`[Optional]`属性并且可以正常工作，而没有针对这样声明的构造函数*定义绑定：*

```
public EmployeeValidator([Optional] IValidator<PersonName> personNameValidator = null) 
```

自升级到 Ninject 3.0 以来，此对象的构造失败并显示一条消息，指出提供者返回 null：

> 测试方法 ValidatorIsolated.Tests.EmployeeValidatorTest.CreateEmployeeValidatorTest 抛出异常：
> 
> Ninject.ActivationException：使用 IValidator {PersonName} 的条件隐式自绑定激活 IValidator {PersonName} 时出错
> 
> 提供者返回 null。
> 
> 激活路径：
> 
> 2) 将依赖项 IValidator{PersonName} 注入到 EmployeeValidator 类型的构造函数的参数 personNameValidator 中
> 
> 1) 请求 IValidator{Employee}
> 
> 建议：
> 
> 1) 确保提供者正确处理创建请求。

当存在参数的默认值时，该`[Optional]`属性是否仍然有效？使用诸如此类的可选参数处理注入的最佳方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-09T15:57:35.817

在这种情况下，可选属性被忽略，因为始终有可用的默认值 - 但提供的值为 null。默认情况下，Null 不是允许的值。

您可以通过将 NinjectSettings.AllowNullInjection 设置为 true 来覆盖此行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-03T15:04:27.407

您可以通过如下配置绑定来避免`AllowNullInjection`全局设置，同时仅在绑定存在时才注入参数：

```
Kernel.Bind<IEmployeeValidator>()
      .To<EmployeeValidator>()
      .WithConstructorArgument(typeof(IValidator<PersonName>), c => c.Kernel.TryGet<IValidator<PersonName>>()); 
```

`[Optional]`不需要这样做。

# jbutton - 如何取消按下 jButton？

> ID：10517963
> 
> 赞同：0
> 
> 时间：2012-05-09T14:16:30.633
> 
> 标签：jbutton

我有一个调用函数的 jButton。此功能最多可能需要一分钟才能完成。在此期间，jButton 保持按下状态。有没有办法解压jButton？

我试过了

```
jButton.setEnabled(true);
jButton.setEnabled(false); 
```

但这些似乎没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T14:23:34.087

不要在 GUI 线程中进行处理。改用 a [`SwingWorker`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)。

# c# - linq 匿名方法（闭包）中的局部变量范围

> ID：10517964
> 
> 赞同：6
> 
> 时间：2012-05-09T14:16:33.813
> 
> 标签：c#, .net, linq, closures, anonymous-methods

Linq Query 中声明的局部变量的范围是什么。

我正在编写以下代码

```
 static void Evaluate()
    {
        var listNumbers = Enumerable.Range(1, 10).Select(i => i);
        int i = 10;
    } 
```

编译器在 int i=10 行标记错误，说明

```
A local variable named 'i' cannot be declared in this scope because it would give a different meaning to 'i', which is already used in a 'child' scope to denote something else 
```

我无法理解为什么会出现这个错误。

我的理解是，`i`第一行之后（在 foreach 循环中）将超出范围。所以`i`可以再次声明。

实际行为是`i`在第一行之后无法访问（在 foreach 循环中），这是正确的。但`i`不能再次声明。这似乎很奇怪。

编辑这是基于安德拉斯回应的以下问题。答案非常好，但引起了进一步的怀疑。

```
 static void Evaluate3()
    {
        var listNumbers = Enumerable.Range(1, 10).Select(i => i);
        var listNumbers1 = Enumerable.Range(1, 10).Select(i => i);
    } 
```

基于函数的逻辑评估 .Select(i=>i) 和 int i=10，i 都是函数块的局部，因此会出现复杂错误。

函数 Evaluate3 不应该编译，因为方法块中有两个 i，但它编译成功，没有任何警告/错误。

问题，Evaluate 和 Evaluate3 都不应该编译，或者两者都应该编译。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T14:43:44.787

这里要注意的关键事实是声明：

```
int i; 
```

*...从开始到结束*在整个封闭范围内生效- 而不仅仅是从声明的那一点开始。在 .Net 中，局部变量的声明只是对编译器的一条指令，用于为整个范围保留该名称和局部变量。*这意味着一旦它被声明，它就已经为before 和 after*的所有行保留了。

实际上，这意味着您实际上应该阅读`Evaluate`为：

```
static void Evaluate()  
{  
  int i;  
  var listNumbers = Enumerable.Range(1, 10).Select(i => i);  
  i = 10;
} 
```

如果您确实相应地编写了您的方法，您会看到编译器错误发生在 lambda 声明上——这是完全合理的。值得庆幸的是，从人类的角度来看，C# 编译器足够聪明，可以认识到代码的顺序对*我们*很重要，它实际上会将编译器错误分配给第二个或后续声明的源代码行；因此为什么在你的版本中`Evaluate`它发生就行了`int i = 10;`。知道了函数 local 的实际生命周期`i`，编译器是正确的：`i`there的使用***将***`i`与lambda 中的早期使用冲突。

您可以使用显式范围来避免这种情况：

```
static void Evaluate()  
{
  var listNumbers = Enumerable.Range(1, 10).Select(i => i);
  {
    int i = 10;
  }
} 
```

在您的情况下，`Evaluate3`请注意，虽然两个 lambda 共享父函数范围，但它们也有自己的，并且在那里声明了它们`i`的 s - 这就是它们不相互干扰的原因（实际上它们是, 同级作用域）。

顺便说一句`Evaluate`，`Evaluate3`最终可以简化为：

```
static void Evaluate()
{
  { 
    int i;
  }
  int i; //<-- error
}

static void Evaluate3()
{
   { 
     int i;
   }
   { 
     int i;
   }
   //fine here - both i's are in different scopes.
} 
```

这实际上是我之前使用显式作用域的第二种情况——也就是说，在同一个函数的不同作用域中，`i`实际上每个函数都有不同的类型。就像我说的那样 - 我再也没有做过，有问题的代码不再存在:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:29:20.960

从[规格](http://msdn.microsoft.com/en-us/library/aa664742.aspx)：

```
The scope of a local variable declared in a local-variable-declaration is the block in which the declaration occurs. It is an error to refer to a local variable in a textual position that precedes the local-variable-declarator of the local variable. 
```

即使事先声明了lambda ，它也在`i => i`局部变量的范围内。`int i = 10`编译器不会因为您在`i`声明之前使用而引发错误，而是会帮助您指出您已经习惯于`i`引用其他内容，并且此声明会改变这一点。

编辑：根据您的更新：

在第一种情况下，您的第一个`i`包含在 lambda 中，但您的第二个`i`包含整个`Evaluate`方法*，包括 lambda* - 因此您会收到错误。

在第二种情况下，您的第一个`i`包含在其 lambda 中，您的第二个`i`包含在*其*lambda 中 - 两者都不`i`在另一个范围内，因此没有错误。

您的段落“基于...的逻辑...两者都是功能块的本地...”是不正确的-第一个`i`不是功能块的本地，而是lambda的本地。

# asp.net - OutputCache 的 VaryByParam 似乎不起作用

> ID：10517967
> 
> 赞同：1
> 
> 时间：2012-05-09T14:16:37.097
> 
> 标签：asp.net, caching

这是我创建的示例演示，用于尝试解释 OutputCache 的 VaryByParam 属性：

标记：

```
<%@ OutputCache Duration="10" VaryByParam="ID" %>

<asp:Button ID="SetQueryStringButton1" runat="server" 
                Text="Set query string ID=1 and redirect"
                PostBackUrl="~/OutputCachingUsingQueryString/Default.aspx?ID=1" />
    <br />
    <asp:Button ID="SetQueryStringButton2" runat="server" 
                Text="Set query string ID=2 and redirect"
                PostBackUrl="~/OutputCachingUsingQueryString/Default.aspx?ID=2" />
    <br />
    <asp:Button ID="SetQueryStringButton3" runat="server" 
                Text="Set different query string and redirect"
                PostBackUrl="~/OutputCachingUsingQueryString/Default.aspx?ABCD=3" /> 
```

代码隐藏：

```
if (IsPostBack)
    {
        string key = Request.QueryString.GetKey(0);
        MessageLabel.Text = "The value of query string " + key + " is : " + Request.QueryString[key] + "<br/>";
        MessageLabel.Text += DateTime.Now.ToLongTimeString();
    } 
```

当我单击前两个按钮时，根据 VaryByParam 的定义，它会缓存 ID = 1 和 ID = 2 的页面。但是当我单击第三个按钮时，它会缓存 ABCD = 3 的页面。我所期待的是否不应该为 ABCD=3 缓存页面，因为我没有在 VaryByParam 中指定它。当我重复单击第三个按钮时，我得到相同的 dateTime。

**编辑开始**：我也这样尝试过：

标记：

```
<%@ OutputCache Duration="10" VaryByParam="ID" %>
<asp:Label ID="MessageLabel" runat="server"/><br/>
<a href="Default.aspx?ID=1">Click Me and pass ID=1</a><br/>
<a href="Default.aspx?ID=2">Click Me and pass ID=2</a><br/>
<a href="Default.aspx?ABCD=3">Click Me and pass ABCD=3</a><br/> 
```

代码隐藏：

```
if (!IsPostBack)
{
   if (Request.QueryString.Keys.Count > 0)
   {
      string key = Request.QueryString.GetKey(0);
      MessageLabel.Text = "The value of query string: " + key + " is: " +  Request.QueryString[key] + "<br/>";
      MessageLabel.Text += DateTime.Now.ToString();
   }
} 
```

当我单击第三个时，它会在我单击几次后显示 MessageLabel。我在这里遇到了某种奇怪的行为。

**编辑结束**

请阐明我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:46:29.417

您是否`OutputCache`在页面中放置了指令`Default.aspx`？从我看到的内容来看，您正在`Default.aspx`从具有该`OutputCaching`指令的页面进行后支持....

> [PostBackUrl](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.postbackurl.aspx)：
> 
> 单击 Button 控件时要从当前页面发布到的网页的 URL。默认值为空字符串 ("")，它会导致页面回发到自身。

**编辑：**

我尝试了相同的场景，得到了相同的结果。无论我点击第三个按钮多少次，页面仍然被缓存。我查看了 Firebug，第一次单击后可以看到以下信息：

```
Response Headersview
Cache-Control   public, max-age=10 
```

然后在连续点击后 max-age 减少。只有当 max-age 达到 0 时，才会再次向服务器请求该页面。这是预期的行为。

问题是：第三个按钮正在传递不同的参数（ABCD），并且页面在不应该被缓存时继续被缓存，因为`OutputCache`指令指定了不同的参数（ID）：

```
<%@ OutputCache Duration="10" VaryByParam="ID" %> 
```

所以，我也想知道为什么会这样……因为第三个按钮传递了一个不同的参数（ABCD），它不应该缓存页面（根据我对 MSDN 文档的理解）。也许我们都误解了这一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-01T19:22:07.013

这就是使用 VaryByParam = "ID" 时 OutputCache 的工作方式 - 它为每个请求使用不同的键 ID 值执行单独的缓存版本。如果用户发出不使用 ID 的请求 - 将创建一个新的缓存版本。例子：

1.  home/index/ID=1 -> 版本 1
2.  home/index/ID=2 -> 版本 2
3.  home/index/ID=1 -> Version 1 /reusing cache version for ID=1/
4.  主页/索引/ -> 版本 3
5.  home/index/Name=Peter -> 版本 3 /重用缓存版本 3/
6.  home/index/Name=Peter&ID=2 -> 版本 2 /reusing Version 2 因为使用 ID=2/

因此，我们可以得出的结论是，如果执行**VaryByParam=ID**，那么新版本将用于我们与该参数一起使用的每个值。如果我们不在请求中使用该参数，则会创建一个单独的缓存版本，并将在下一个请求中重用。

# java - 使 web 服务模式验证将空标签视为缺失

> ID：10517983
> 
> 赞同：1
> 
> 时间：2012-05-09T14:17:41.253
> 
> 标签：java, validation, jax-ws

我有一个带有 @SchemaValidation 的 jaxws 网络服务。

```
@SchemaValidation(handler = MySchemaValidationHandler.class)
@WebService(portName = "MyService", serviceName = "MyService", targetNamespace = "urn:com.my.urn", wsdlLocation = "/wsdls/mywsdl.wsdl", endpointInterface = "com.my.MyService")
@BindingType("http://schemas.xmlsoap.org/wsdl/soap/http")
public class MyServiceImpl
        implements MyService {
    @Resource
    WebServiceContext wsContext;
    public void myOperation(Holder<XMLGregorianCalendar> tag1, Holder<XMLGregorianCalendar> tag2, Holder<String> message) {
    ...
    }
} 
```

在 xsd 我有以下示例：

```
<xsd:choice>
    <xsd:element name="tag1" type="xsd:dateTime" minOccurs="0"/>
    <xsd:element name="tag2" type="xsd:dateTime" minOccurs="0"/>
</xsd:choice> 
```

当我发送带有空标签的请求时，我收到有关字段格式的错误（不符合日期格式的限制）。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:com.my.urn">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:myOperation>
         <Tag1>value1</Tag1>
         <Tag2></Tag2>
      </urn:myOperation> 
   </soapenv:Body>
</soapenv:Envelope> 
```

在请求描述中，我有强制标签和选择标签，并且必须在响应中返回正确的错误消息，所以我不能在处理程序中跳过此类错误。我也无法修改 xsd 或 wsdl

逻辑上为空的标签与缺少标签的含义相同。如何使验证将空标签视为缺失，或者如何在验证之前删除空标签？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:45:12.823

编辑：不要发送无效的 XML。在您给出的示例中，您应该删除`<Tag2></Tag2>`您的客户端代码。不要试图滥用服务器的验证来处理无效的 XML。

# python - 如何使用铁蟒添加交换管理单元

> ID：10517987
> 
> 赞同：1
> 
> 时间：2012-05-09T14:17:56.003
> 
> 标签：python, powershell, ironpython, exchange-server, powershell-2.0

下面是我的 Iron Python 脚本，它适用于所有系统级命令（get-process 等），但我想添加 MS-Exchange 管理单元来调用交换命令。有人能帮我吗 ？

定义运行脚本（脚本）：

```
runspace = RunspaceFactory.CreateRunspace()
runspace.Open()
pipeline = runspace.CreatePipeline()
cache = System.IO.Path.GetTempFileName()
pipeline.Commands.AddScript(script)

pipeline.Commands.Add("Out-String")
results = pipeline.Invoke()
pickled = []
for thing in results:
    pickled.append(thing.ToString())
return pickled 
```

谢谢苏珊特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:32:54.483

`Add-PSSnapin`在将调用传递给 AddScript 方法之前，您可以在“脚本”中添加调用。您还可以添加以下内容：

```
ps = PowerShell.Create()
ps.AddCommand("Add-PSSnapin").AddParameter("Name","Microsoft.Exchange.Management.PowerShell.Admin") 
```

# javascript - 如何使用列表框过滤谷歌地图标记？

> ID：10517988
> 
> 赞同：0
> 
> 时间：2012-05-09T14:17:56.950
> 
> 标签：javascript, jquery, xml, google-maps, google-maps-api-3

我希望能够使用 3 个列表框过滤地图上的标记，每个列表框可能有多个选择。

[我没有在网上找到任何关于过滤谷歌地图的内容，就像这个](http://www.geocodezip.com/v3_MW_example_categories.html)带有复选框的示例一样接近我想要的。

我从那里借了所有代码，除了`show()`and`hide()`函数，并为自己做了几个：

```
//  grabs values of all selected items inside a listbox
//  pushes them into an array and returns it.
//  'listbox' string parameter is mandatory
function grabSelectedItems(listbox) {
    if(document.getElementById(listbox)){
        var selectedOptions = [];
        var listBoxInstitutions = document.getElementById(listbox);
        for(var i = 0; i < listBoxInstitutions.options.length; i++) {
            if(listBoxInstitutions.options[i].selected) {
                selectedOptions.push(listBoxInstitutions.options[i].value);
            }
        }
        return selectedOptions;
    }
    alert(listbox + " couldn't be found");
}

//  uses 'grabSelectedItems()' to get selected values
//  from multiple listboxes, puts the returned arrays into
//  one, big array and returns it.
//  accepts minimum 1 string parameter(mandatory) or more
//  treating each parameter as the name of a listboxe
//  to grab selected values from
function grabAllSelectedItems() {
    if(arguments.length > 0) {
        var allSelectedOptions = [];
        for(var i = 0; i < arguments.length; i++) {
            allSelectedOptions.push(grabSelectedItems(arguments[i]));
        }
        return allSelectedOptions;
    }
    alert("Please pass at least one string parameter");
} 
```

现在我使用它在单击具有 id 的输入按钮时返回选定值的大数组`filter`：

```
$(function() {
    $("#filter").click(function() {
        grabAllSelectedItems('listbox1', 'listbox2', 'listbox3');
    });
}); 
```

但我现在卡住了，无法根据我在列表框中的选择来绘制标记。

我有一个包含所有数据的大 XML 文件，我想使用它根据我在列表框中选择的内容在地图上生成和绘制标记。所有标记都有 lat 和 lng 坐标，但这些标记还包含这些子标记，这些子标记也有自己的 lat 和 lng 坐标。我这样做是因为他们的信息是相互关联的。

以前有人做过这样的事情吗？

# javascript - Webkit 控制台是否不知道如何在 KnockOut 中使用 observables？

> ID：10517989
> 
> 赞同：1
> 
> 时间：2012-05-09T14:17:58.110
> 
> 标签：javascript, webkit, console, knockout.js, knockout-2.0

让我一步一步解释

1.  我的一个功能是`console.log()`在模型中对 Knockout observable 进行操作
2.  控制台说`Array(0)`
3.  但是，此时我单击`array(0)`它显示项目。所以数组中没有项目是不正确的
4.  在我`Console.log()`和我点击 之间的那一刻`array(0)`，`observableArray()`已经填满了项目，因此不再是空的。

我的问题是，控制台的这个功能错了吗？它应该实际显示项目，还是只显示一个空数组。为什么会发生这种情况？

或者反过来看，当控制台中有 50 个项目时，控制台是否会`array(0)`更新`array(50)`。

我该如何克服这个问题？使用它的代码片段：

```
var myModel = function(){
    this.myArray = ko.observableArray();
}

var model = new myModel();
console.log(model.myArray());

model.myArray.push('item'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:27:19.073

对于这个问题，它帮助我将数据添加到另一个变量，并通过 console.log() 记录。

例子：

```
var myArray = [];

var logArray = myArray;
console.log(logArray); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-14T21:40:51.070

不确定我是否理解正确，但您的控制台日志仅显示您拨打电话时的项目。因此，在您将项目推送到阵列后，如果您制作了另一个控制台日志，它将反映最新的更改。仅仅因为它是一个 observable 并不意味着控制台日志会自动更新。

要让控制台日志“挂钩”到任何更改，您必须使用绑定调用中的日志创建自定义绑定。

# c# - 如何获取 MSSQL 数据库的所有表？

> ID：10517991
> 
> 赞同：1
> 
> 时间：2012-05-09T14:17:59.210
> 
> 标签：c#, sql, sql-server

我正在编写一个工具来计算表中的所有条目。我的问题是，如何获取现有数据库的所有表？我正在使用 Microsoft SQL Server 2008 R2，并且我已经有一种方法来获取表的字符串数组：

```
List<string> lResult = new List<string>();
        SqlConnection sqlConn10 = new SqlConnection(sConnStr);
        sqlConn10.Open();
        SqlCommand sqlComm10 = new SqlCommand("SELECT " + sColumn + " FROM " + sTable + " WHERE " + sWhere, sqlConn10);
        SqlDataReader myReader10 = sqlComm10.ExecuteReader();
        int i = 0;
        try
        {
            while (myReader10.Read())
            {
                lResult.Add(myReader10.GetString(0));
                i++;
            }
        }
        catch
        {
            myReader10.Close();
            sqlConn10.Close();
        }

        return lResult.ToArray();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T14:19:51.347

要么你使用 sql 命令

```
select * from sys.tables 
```

或者您使用 DataTable

```
DataTable dt = SQLConnection.GetSchema("Tables");
foreach (DataRow row in dt.Rows)
{
 ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T14:19:54.307

```
SELECT * FROM INFORMATION_SCHEMA.TABLES 
```

`INFORMATION_SCHEMA`有很多关于您的数据库的有用元数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T14:19:55.620

要获取所有表的列表，您需要使用类似于以下的查询：

```
SELECT * 
FROM information_schema.tables 
```

# java - 使用 Spring Data JPA 的模型库（继承）

> ID：10517994
> 
> 赞同：0
> 
> 时间：2012-05-09T14:18:15.327
> 
> 标签：java, spring, inheritance, spring-data-jpa

我会为每个类/实体使用带有 ID 和时间戳的 ModelBase。但是当我`Long`在界面中使用主键的类型时，`JPARepository<>`我会收到消息

```
Not an entity: class java.lang.Long 
```

**代码：**

```
@MappedSuperclass
public class ModelBase implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @Column(nullable = false, columnDefinition = "datetime")
    private Date lastModified;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public Date getLastModified() {
        return lastModified;
    }

    public void setLastModified(Date lastModified) {
        this.lastModified = lastModified;
    }

    @PreUpdate
    @PrePersist
    public void updateLastModified() {
        lastModified = new Date();
    }

} 
```

**从 Modelbase 继承的 Modelclass**

```
@Entity
@Table(name = "Name")
public class Name extends ModelBase implements Serializable {} 
```

**回购**

```
public interface NameRepository extends JpaRepository<Long, Name>{} 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:20:21.613

是反过来的：

```
JpaRepository<Name, Long> 
```

首先是实体，然后是 ID。检查 JPARepository javadoc。