# StackOverflow 问答 11201000-11201999

# java - Google App 引擎 memcached 设计

> ID：11201004
> 
> 赞同：2
> 
> 时间：2012-06-26T05:02:37.667
> 
> 标签：java, google-app-engine, memcached, google-cloud-datastore

我是 GAE 内存缓存的新手，我需要帮助。基本上，我有一个数据存储超过了数据存储读取操作限制，因为我没有使用内存缓存。我的数据存储区写入次数最少，但读取次数多，每次写入时，它都应该可供读取。因为，该网站已经启动，我需要一个快速的解决方案，所以我需要在这方面的设计帮助。所以问题是，每当数据存储区中有写入时，新条目都应该被 memcached。我想知道的另一件事是如何将数据存储复制到内存缓存。同时，我正在研究它，但由于该站点已启动，因此我在这里没有任何代码就在这里询问。

谢谢

更新：

Java 代码如下所示：

```
 MemcacheService memcache = MemcacheServiceFactory.getMemcacheService();
        if(memcache.contains("LocationInfo"))
        {
            JSONArray js = new JSONArray((String)memcache.get("LocationInfo"));
            result = new ArrayList<LocationInfo>();

            for(int i = 0; i < js.length(); i++)
            {
                JSONObject jso = (JSONObject)js.get(i);
                LocationInfo loc = new LocationInfo(jso);
                result.add(loc);
            }
        }
        else
        {
           q1= pm.newQuery(LocationInfo.class);
           q1.setFilter(filter);
           result = (List<LocationInfo>)q1.execute();
           JSONArray js = new JSONArray();
            for(LocationInfo loc : result)
            {
                js.put(loc.toJSON());
            }
            memcache.put("LocationInfo", js.toString());
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:40:37.787

```
from google.appengine.ext import db
from google.appengine.api import memcache

def top_arts(update = False):
  key = 'top'

  #Getting arts from memcache
  arts = memcache.get(key)
  #Check if key is defined in memcache
  #or an update has been invoked
  if update or not arts:

      #Querying the Google Data store using GQL
      arts = db.GqlQuery('SELECT * from Art ORDER BY created DESC LIMIT 10')
      memcache.set(key, arts)

  return arts 
```

您可以使用相同的函数从 memcache 中读取数据，然后将数据写入 memcache

例如：

从内存缓存中读取：-

```
 arts = top_arts() 
```

写入数据库时​​：-

```
#write your entry in database
<some database code>
#update memcache with this new entry
top_arts(update=True) 
```

# c++ - 将整数数组转换为数字

> ID：11201015
> 
> 赞同：9
> 
> 时间：2012-06-26T05:05:05.353
> 
> 标签：c++, arrays, integer

想我有一个这样的整数数组：

```
a[0]=60; a[1]=321; a[2]=5; 
```

现在我想将整个数组转换为整数，例如`int b`运行代码后变为 603215。

怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-26T05:09:20.910

使用`std::stringstream`：

```
#include <iostream>
#include <sstream>

int main() {
    std::stringstream ss;
    int arr[] = {60, 321, 5};

    for (unsigned i = 0; i < sizeof arr / sizeof arr [0]; ++i)
        ss << arr [i];

    int result;
    ss >> result;
    std::cout << result; //603215
} 
```

请注意，在 C++11 中，稍微难看的循环可以替换为：

```
for (int i : arr)
    ss << i; 
```

此外，鉴于溢出的可能性很大，数字的字符串形式可以使用`ss.str()`. 为了避免溢出，使用它可能比尝试将它塞进一个整数更容易。负值也应该考虑在内，因为这只有在第一个值为负时才有效（并且有意义）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-26T05:50:33.043

```
int a[] = {60, 321, 5};

int finalNumber = 0;
for (int i = 0; i < a.length; i++) {
    int num = a[i];
    if (num != 0) {
        while (num > 0) {
            finalNumber *= 10;
            num /= 10;
        }
        finalNumber += a[i];
    } else {
        finalNumber *= 10;
    }
} 
```

finalNumber 有结果：**603215**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-26T05:10:24.850

将所有数字连接为字符串，然后将其转换为数字

```
#include <string>
int b = std::stoi("603215"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-26T05:19:31.737

该算法将起作用：

1.  使用 for 循环将数组的所有整数值转换为字符串。
2.  现在将所有字符串值附加到从索引 0 到数组长度的一个字符串。
3.  再次将该字符串更改为整数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-20T04:12:30.953

迭代数组并将值转换为字符串。然后连接所有这些并转换回整数。

```
#include <string>

int a[] = {60, 321, 5};
std::string num = "";
for(auto val : a)
    num += a;
int b = std::stoi(num); 
```

# git - 不确定使用变基或合并什么？

> ID：11201017
> 
> 赞同：1
> 
> 时间：2012-06-26T05:05:17.120
> 
> 标签：git, merge, rebase, git-rebase, git-remote

我不小心使用了 gh-pages 分支，所以现在它已成为最新的分支。如果没有使用 master 分支，如何更新它？我认为正确的图表是这样的

```
 / E-F-G
A-B-C-D 
```

我该怎么办？当我尝试过时，我总是把它搞砸

ABCDE...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:15:39.583

如果图表正确，则无需重新设置基准。

如果你合并，git 将执行快进合并，给你：

```
A-B-C-D-E-F-G 
```

所以：

```
git checkout master
git merge gh-pages 
```

# iphone - 当从 3 个选项卡中选择选项卡项目时，如何使 becomeFirstRespoonder 仅执行一次

> ID：11201018
> 
> 赞同：0
> 
> 时间：2012-06-26T05:05:21.693
> 
> 标签：iphone, ios, ios4

我正在开发一个具有三个标签栏项目的应用程序。

当我单击第二个标签栏项目时，搜索栏需要像（搜索栏`becomeFirstResponder`）一样自动启用。

我已经在`viewWillAppear`方法中做到了这一点。所以每次它都会自动成为第一响应者。但我只希望在选择标签栏项目时搜索栏必须`becomeFirstresponder`。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:09:22.330

您可以`tabBarController: didSelectViewController:`用于识别何时按下特定选项卡。从那里你可以打电话`becomeFirstResponder`。

# android - 如何正确关闭 DialogFragment？

> ID：11201022
> 
> 赞同：130
> 
> 时间：2012-06-26T05:05:51.517
> 
> 标签：android, android-dialogfragment

文档`dismiss()`对类中的方法这么说`Dialog`：

> 关闭此对话框，将其从屏幕上移除。可以从任何线程安全地调用此方法。请注意，当对话框被关闭时，您不应重写此方法进行清理，而应在`onStop()`.

在我的代码中，我所做的就是调用`getDialog().dismiss()`将其关闭。但我没有做任何其他事情，甚至没有使用`onStop()`. 所以我问到底如何正确解除 a`DialogFragment`以避免任何内存泄漏等。

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2012-08-28T15:35:35.933

**tl; dr：**关闭 a 的正确方法`DialogFragment`是`dismiss()` *直接在 DialogFragment 上*使用。

* * *

**详细信息**：[DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html)状态的文档

> 对话框的控制（决定何时显示、隐藏、关闭它）应该通过这里的 API 来完成，而不是直接调用对话框。

因此，您不应该使用`getDialog().dismiss()`，因为这会`dismiss()` *在 dialog 上*调用。相反，您应该使用`dismiss()`DialogFragment 本身的方法：

> **公共无效解雇（）**
> 
> 关闭片段及其对话框。如果片段被添加到回栈，所有回栈状态直到并包括这个条目都将被弹出。否则，将提交一个新事务以删除该片段。

如您所见，这不仅需要关闭对话框，还需要处理流程中涉及的片段事务。

`onStop`只有在显式创建任何需要手动清理的资源（关闭文件、关闭游标等）时才需要使用。即使那样，我也会覆盖`onStop`DialogFragment 而不是`onStop`底层 Dialog。

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2014-03-05T01:30:25.270

我认为关闭 a 的更好方法`DialogFragment`是：

```
Fragment prev = getSupportFragmentManager().findFragmentByTag("fragment_dialog");
if (prev != null) {
    DialogFragment df = (DialogFragment) prev;
    df.dismiss();
} 
```

这样你就不必持有对的引用，`DialogFragment`并且可以从任何地方关闭它。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-03-14T09:41:06.920

您为什么不尝试仅使用此代码：

```
dismiss(); 
```

如果您想自行关闭对话框片段。您可以简单地将此代码放在要关闭对话框的对话框片段中。

例如：

```
button.setOnClickListener(new View.OnClickListener() {
   @Override
   public void onClick(View v) {
       dismiss();
   }
}); 
```

这将关闭屏幕上显示的最近的对话框片段。

希望它对你有帮助。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-10-08T16:56:20.097

我对特雷尔的回答投了赞成票。我只是想为任何 Kotlin 用户发布这个：

```
supportFragmentManager.findFragmentByTag(TAG_DIALOG)?.let {
    (it as DialogFragment).dismiss()
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-10-26T09:04:10.817

**Kotlin 版本**的 Terel 答案

```
(fragmentManager.findFragmentByTag(TAG) as? DialogFragment)?.dismiss() 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-26T05:15:15.747

你应该解雇你`Dialog`，`onPause()`所以覆盖它。

同样在解雇之前，您可以检查`null`并显示如下代码段：

```
@Override
protected void onPause() {
    super.onPause();
    if (dialog != null && dialog.isShowing()) {
        dialog.dismiss();
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-05-04T09:42:18.800

在其他答案中有对官方文档（[DialogFragment Reference](https://developer.android.com/reference/android/app/DialogFragment.html)）的引用，但没有提及那里给出的示例：

```
void showDialog() {
    mStackLevel++;

    // DialogFragment.show() will take care of adding the fragment
    // in a transaction.  We also want to remove any currently showing
    // dialog, so make our own transaction and take care of that here.
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    Fragment prev = getFragmentManager().findFragmentByTag("dialog");
    if (prev != null) {
        ft.remove(prev);
    }
    ft.addToBackStack(null);

    // Create and show the dialog.
    DialogFragment newFragment = MyDialogFragment.newInstance(mStackLevel);
    newFragment.show(ft, "dialog");
} 
```

> 这将删除任何当前显示的对话框，创建一个带有参数的新 DialogFragment，并将其显示为后堆栈上的新状态。当事务被弹出时，当前的 DialogFragment 及其 Dialog 将被销毁，并重新显示前一个（如果有）。请注意，在这种情况下，DialogFragment 将负责弹出 Dialog 的事务，并与它分开解除。

为了我的需要，我将其更改为：

```
FragmentManager manager = getSupportFragmentManager();
Fragment prev = manager.findFragmentByTag(TAG);
if (prev != null) {
    manager.beginTransaction().remove(prev).commit();
}

MyDialogFragment fragment = new MyDialogFragment();
fragment.show(manager, TAG); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-27T13:04:58.413

我发现当我的片段在导航图中用`<fragment>`标签定义时（对于全屏对话框片段），对话框片段不会被`dismiss()`命令关闭。相反，我不得不弹出回栈：

```
findNavController(getActivity(), R.id.nav_host_fragment).popBackStack(); 
```

`<dialog>`但是，如果在导航图中使用标签定义了相同的对话框片段，则`dismiss()`可以正常工作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-05-12T11:08:56.947

```
CustomFragment dialog = (CustomDataFragment) getSupportFragmentManager().findFragmentByTag("Fragment_TAG");
if (dialog != null) {
  dialog.dismiss();
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-05-28T18:51:59.050

添加到其他答案中，当进行`DialogFragment`全屏调用`dismiss()`时，不会从片段后台堆栈中弹出 DialogFragment。一种解决方法是调用`onBackPressed()`父活动。

像这样的东西：

**CustomDialogFragment.kt**

```
closeButton.onClick {
    requireActivity().onBackPressed()
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-04-26T08:02:50.787

只需从您要关闭的片段中调用dismiss()。

```
imageView3.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            dismiss();
        }
    }); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-12-16T11:49:37.367

考虑下面的示例代码片段，它演示了如何安全地关闭对话框片段：

```
DialogFragment dialogFragment = new DialogFragment();

/** 
 * do something
 */

// Now you want to dismiss the dialog fragment
if (dialogFragment.getDialog() != null && dialogFragment.getDialog().isShowing())
{
    // Dismiss the dialog
    dialogFragment.dismiss();
} 
```

快乐编码！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-01-14T18:14:54.313

这是一个简单的 AppCompatActivity 扩展函数，它关闭打开的 Dialog Fragment：

```
fun AppCompatActivity.whenDialogOpenDismiss(
    tag: String
) {
    supportFragmentManager.findFragmentByTag(tag)?.let { 
        if(it is DialogFragment) it.dismiss() }
} 
```

当然，您可以直接从任何活动中调用它。如果您需要从 Fragment 调用它，只需对 Fragment 类进行相同的扩展功能

# matlab - 预兆图差异

> ID：11201026
> 
> 赞同：3
> 
> 时间：2012-06-26T05:06:36.000
> 
> 标签：matlab, frequency-analysis

我正在绘制以下内容

```
Cu4 = tf([1 2], [1 2 6]);

[magCu4 phaseCu4 wout] = bode(Cu4,logspace(-2,7,300));
magCu4 = squeeze(magCu4);
phaseCu4 = squeeze(phaseCu4);
semilogx(wout,20*log10(magCu4)),grid;
hold on
bode(Cu4,'r') 
```

我希望 semilogx 图会返回与“bode”相同的图。但是，情况似乎并非如此。有谁知道这里出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T02:30:26.277

不同之处在于您没有在第二次调用 bode 时指定频率向量，因此 MATLAB 选择了一个默认向量（在您的代码中它的长度为 46）。

相反，您可以尝试：

```
bode(Cu4,'r',logspace(-2,7,300)) 
```

比较以下代码制作的图

```
[magCu4 phaseCu4 wout] = bode(Cu4,logspace(-2,7,300));
magCu4 = squeeze(magCu4);

figure(1);
semilogx(wout,20*log10(magCu4))
hold on; 
bode(Cu4,'r') 
hold off;

figure(2);
semilogx(wout,20*log10(magCu4))
hold on; 
bode(Cu4,'r',logspace(-2,7,300)) 
hold off; 
```

# c# - 实体框架代码优先中的继承情况未正确解决

> ID：11201027
> 
> 赞同：0
> 
> 时间：2012-06-26T05:06:42.373
> 
> 标签：c#, entity-framework, ef-code-first

我有一`Candidate`堂课。当有人删除 a`Candidate`时，我希望`DeletedCandidate`从中派生`Candidate`的 a 存储在单独的表中。

我如何在 EF 中对此进行建模，代码优先？我认为我最好的选择是 TBC，但是当我在 Context 中使用以下内容时，`System.Data.MappingException`会抛出 a。

```
modelBuilder.Entity<DeletedCandidate>().Map(d => {
                d.ToTable("DeletedCandidate");
                d.MapInheritedProperties();

            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:32:55.457

我不会将继承用于类似归档的任务。在您的主流应用程序代码中，您将始终必须区分 Candidates 和 DeletedCandidates。使用 EF，您必须始终通过`OfType<Candidate>`.

我会为 DeletedCandidates 创建一个单独的类（和表）。因此，您总是可以在需要时找到它们，但它们永远不会在您的其余代码中受到伤害。一个缺点可能是您必须始终保持两者的属性（和列）同步。这可以通过让两个类实现一个公共接口来缓解（您可以通过代码优先轻松地做到这一点）。

如果您需要保留与 DeletedCandidates 的外键关系，那就另当别论了。在这种情况下，我认为您能做的最好的事情就是使用已删除的标志（但您需要过滤才能获得活跃的候选人）。

只是一个建议：D。

# asp.net - 将母版页中的资源文化变化传播到内容网页

> ID：11201029
> 
> 赞同：1
> 
> 时间：2012-06-26T05:06:51.973
> 
> 标签：asp.net, master-pages

当谈到 Web 应用程序时，我是个菜鸟。但我正在尽我最大的努力使用 ASP.NET 2.0 来学习它，对于这篇长篇文章感到抱歉。

我有一个母版页（M1）和 3 个不同的内容页 C1、C2、C3，它们基本上使用母版页 M1 在内容占位符中填充其各自的内容。

所有网络表单都已本地化，并在资源 (xml) 文件中添加了适当的语言资源字符串，例如：Resource.en-US.xml、Resource.de-DE.xml 等。最后在代码中引用了资源在设置适当的当前文化和当前 uiculture 之后。

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-US");
//where the btnSubmit is a control on the form
btnSubmit.Text = rm.GetString("Submit", Thread.CurrentThread.CurrentCulture); 
```

现在问题来了，我在母版页中包含了一个选项，可以更改用户可用的**母版页**中的显示语言，作为带有 asp:image 的 asp:linkbutton。每当用户单击所需语言的链接按钮时，内容页面控件应显示与所选文化相对应的整个内容字符串。

1.  我如何做到这一点？

2.  我是否必须实现 Session 变量以包含所选语言？或者存储在 Cookie 中也可以完成这项工作？

**我试过的**

在母版页加载事件上。我尝试调用一个方法**SetCultureSpecificInformation**，它基本上设置 CurrentThread 的文化和 uiculture 属性，并将所选语言存储在会话变量中。

在 asp:linkbutton OnClick 事件处理程序上也有类似的实现。在这种情况下，它会修改会话变量。

最后引用内容网页 OnPage_Load 事件上的会话变量。

但不知何故，上述方法并没有产生预期的结果。语言切换不一致。任何可以帮助我提供足够好的设计方法来实现相同功能的人。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T06:51:43.157

添加**Global.asax**文件：编写这段代码

```
 void Application_BeginRequest(Object sender, EventArgs e)
    {
        // Code that runs on application startup
        HttpCookie cookie = HttpContext.Current.Request.Cookies["CultureInfo"];
        if (cookie != null &amp;&amp; cookie.Value != null)
        {
            System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo(cookie.Value);
            System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(cookie.Value);
        }
        else
        {
            System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo("en");
            System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("en");
        }
    } 
```

* * *

在 Masterpage 页面上

```
protected void ddlanguage_SelectedIndexChanged(object sender, EventArgs e)
    {
        Session["language"] = ddlanguage.SelectedValue;

        //Sets the cookie that is to be used by Global.asax
        HttpCookie cookie = new HttpCookie("CultureInfo");
        cookie.Value = ddlanguage.SelectedValue;
        Response.Cookies.Add(cookie);

        //Set the culture and reload for immediate effect.
        //Future effects are handled by Global.asax
        Thread.CurrentThread.CurrentCulture = new CultureInfo(ddlanguage.SelectedValue);
        Thread.CurrentThread.CurrentUICulture = new CultureInfo(ddlanguage.SelectedValue);

        if (cookie.Value == "en")
        {
            Session["ddindex"] = 0;
        }

        else if (cookie.Value == "fr")
        {
           Session["ddindex"] = 1;
        }

        else if (cookie.Value == "de")
        {
           Session["ddindex"] = 2;
        }
        Server.Transfer(Request.Path);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-11T14:53:58.260

在我的例子中，使用了几个按钮来从母版页设置文化，然后在母版页的代码中使用此代码：

```
 protected void IdiomButton_Click(object sender, ImageClickEventArgs e)
    {
        ImageButton theButton = (ImageButton)sender;
        Session["culture"] = theButton.ID == "ItalianButton" ? CultureInfo.CreateSpecificCulture("it-IT") : CultureInfo.CreateSpecificCulture("en-US");
        Response.Redirect(Request.RawUrl);
    } 
```

然后在我使用的每个子页面中：

```
protected override void InitializeCulture()
    {
        if (Session["culture"] != null)
            System.Threading.Thread.CurrentThread.CurrentUICulture = CultureInfo.CreateSpecificCulture(Session["culture"].ToString());
        else
            System.Threading.Thread.CurrentThread.CurrentUICulture = CultureInfo.CreateSpecificCulture("it-IT");
    } 
```

# iphone - 从 ViewController 类导入时 NSString 返回为 NULL

> ID：11201030
> 
> 赞同：0
> 
> 时间：2012-06-26T05:06:56.403
> 
> 标签：iphone, ios, ipad

从 ViewController 类导入时 NSString 返回为 NULL

我想将字符串变量从一等导入到二等..但它没有导入

请在下面找到满足代码供您参考

```
ViewController:

@interface ViewController : UIViewController{

NSString * string;

@property(nonatomic, retain)NSString * string;

@end

@implementation ViewController
@synthesize string;

-(IBAction) login:(id) sender{
string = @"HI";
}

class2:

#import"ViewController.h"

@interface class2 : UIViewController{
ViewController * vc;
NSString * string1;

@property(nonatomic, retain)NSString * string1;

@end

@implementation ViewController
@synthesize string1;

-(IBAction) login:(id) sender{
NSLog(@"%@",vc.string);

@end
} 
```

NSLog 在哪里返回 NULL!!!!

请帮助我！提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:11:42.883

@pradeepj 它返回`Null`是因为您的`vc`实例也是`Null`，我不确定您如何获得`vc`. 如果您使用的是 a ，那么您可以通过使用的属性`UINavigationController`来获取 的实例。`vc``viewControllers``UINavigationController`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:12:18.797

第二个类不只是自动获取对您设置字符串值的同一个 class1 实例的引用。您的 class2 需要有一个可能从 class1 设置的属性，该属性引用您设置字符串的 class 1 的实例

//在第 1 类中

```
Class2 *vc = [[Class2 alloc] init];
vc.class1 = self;

[self.navigationcontroller pushViewController:vc animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T05:14:12.750

我不清楚您的代码，但如果您想将字符串从 class1 发送到 class2，那么您可以按照以下方法：

1.在 class2 中声明属性，与您声明的相同：

```
NSString * string1;
@property(nonatomic, retain)NSString * string1;

@synthesize string1; 
```

2.然后在您导航到 class2 的 class1 中（从您初始化 class2 的位置）只需为您的 string1 分配所需的值，如下所示：

```
class2Obj.string1 = @"Hi"; 
```

在 class2 中，您可以访问 string1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T05:14:32.047

只是改变：

```
-(IBAction) login:(id) sender{
string = @"HI";
} 
```

到

```
-(IBAction) login:(id) sender{
self.string = @"HI";
} 
```

这将保留您的变量，以便您可以在其他地方找到它。只需确保`vc`在获取变量值之前已正确分配`string`变量。

# html - 重命名选择下拉列表中的单个元素

> ID：11201031
> 
> 赞同：1
> 
> 时间：2012-06-26T05:07:00.957
> 
> 标签：html, ruby-on-rails, ruby, haml, frontend

在 Rails 应用程序中，我有一个数组，它是条目类型的列表：`["steps", "calories", "water", "sodium", "sugar", "fruits_veggies"]`

在我看来，我正在创建一个选择框来选择上述条目类型之一：`.controls= f.select :type, entry_type_options`

这很好用，但我想在下拉框中用“fruits & veggies”替换“fruits_veggies”。如何为单个值执行此操作？options_for_select 看起来很有希望，但我不确定该采取什么路线。

请注意，我正在为“entry_type_options”使用帮助程序：

```
def entry_type_options                                                                                                                                                                                                                  
  @entry_type_options ||= Entry::TYPES.map {|t| [t.capitalize, t] }                                                                                                                                                                     
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:21:09.297

这绝对是一个起得太晚的例子。我刚刚更改了助手：

```
 def entry_type_options                                                                                                                                                                                                                  
   @entry_type_options ||= Entry::TYPES.map {|t| (t == "fruits_veggies") ? ["Fruits & Veggies", t] : [t.capitalize, t]}                                                                                                                  
 end 
```

# eclipse - 无法安装 IBM Worklight

> ID：11201032
> 
> 赞同：0
> 
> 时间：2012-06-26T05:07:02.033
> 
> 标签：eclipse, ibm-mobilefirst

```
Cannot complete the install because of a conflicting dependency.
  Software being installed: IBM Worklight Studio 1.0.0.v20120606_0304 (com.ibm.imp.tools.feature.feature.group 1.0.0.v20120606_0304)
  Software currently installed: Eclipse IDE for Java EE Developers 1.3.1.20100916-1202 (epp.package.jee 1.3.1.20100916-1202)
  Only one of the following can be installed at once: 
    Java Development Tools UI 3.6.1.r361_v20100825-0800 (org.eclipse.jdt.ui 3.6.1.r361_v20100825-0800)
    Java Development Tools UI 3.5.2.r352_v20100106-0800 (org.eclipse.jdt.ui 3.5.2.r352_v20100106-0800)
    Java Development Tools UI 3.6.2.r362_v20110203 (org.eclipse.jdt.ui 3.6.2.r362_v20110203)
    Java Development Tools UI 3.5.1.r351_v20090821-0800 (org.eclipse.jdt.ui 3.5.1.r351_v20090821-0800)
  Cannot satisfy dependency:
    From: IBM Web Editor Common 1.0.0.v20120517_1932 (com.ibm.etools.webtools.webedit.common 1.0.0.v20120517_1932)
    To: bundle org.eclipse.jdt.ui [3.6.2,4.0.0)
  Cannot satisfy dependency:
    From: IBM Worklight Studio 1.0.0.v20120606_0304 (com.ibm.imp.tools.feature.feature.group 1.0.0.v20120606_0304)
    To: com.ibm.imp.webtools.core.feature.feature.group 1.0.0
  Cannot satisfy dependency:
    From: Web Tools Core 1.0.0.v20120517_1932 (com.ibm.imp.webtools.core.feature.feature.group 1.0.0.v20120517_1932)
    To: com.ibm.etools.webtools.webedit.common [1.0.0.v20120517_1932]
  Cannot satisfy dependency:
    From: Eclipse IDE for Java EE Developers 1.3.1.20100916-1202 (epp.package.jee 1.3.1.20100916-1202)
    To: org.eclipse.epp.package.jee.feature.feature.group [1.3.1.20100916-1202]
  Cannot satisfy dependency:
    From: Java EE IDE Feature 1.3.1.20100916-1202 (org.eclipse.epp.package.jee.feature.feature.group 1.3.1.20100916-1202)
    To: org.eclipse.jdt.feature.group 0.0.0
  Cannot satisfy dependency:
    From: Eclipse Java Development Tools 3.5.1.r351_v20090810-0600-7r88FEoFI0WTo6Az-1qFRHm37ChJ (org.eclipse.jdt.feature.group 3.5.1.r351_v20090810-0600-7r88FEoFI0WTo6Az-1qFRHm37ChJ)
    To: org.eclipse.jdt.ui [3.5.1.r351_v20090821-0800]
  Cannot satisfy dependency:
    From: Eclipse Java Development Tools 3.5.2.r352_v20100108-7r88FEwFI0WTuoBl0iaG0tyhfZH6 (org.eclipse.jdt.feature.group 3.5.2.r352_v20100108-7r88FEwFI0WTuoBl0iaG0tyhfZH6)
    To: org.eclipse.jdt.ui [3.5.2.r352_v20100106-0800]
  Cannot satisfy dependency:
    From: Eclipse Java Development Tools 3.6.1.r361_v20100714-0800-7z8XFUSFLFlmgLc5z-Bvrt8-HVkH (org.eclipse.jdt.feature.group 3.6.1.r361_v20100714-0800-7z8XFUSFLFlmgLc5z-Bvrt8-HVkH)
    To: org.eclipse.jdt.ui [3.6.1.r361_v20100825-0800] 
```

当我尝试为 Eclipse 安装 worklight 插件时出现此错误。如何解决这种依赖

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:35:15.123

我建议您安装 Eclipse Indigo 包（Java 或 Java EE），然后安装 worklight。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:47:16.403

IBM Worklight Studio 需要 JDT 3.6 或更高版本。但是，您使用的是 Eclipse 3.5 Java EE 包，由于某些其他要求，JDT 无法更新到 3.6。

您可以尝试先将您的 Eclipse Java EE 软件包更新到最新版本，或者直接将 IBM Worklight Studio 安装到新的 Eclipse 3.6+ 中。

# wpf - wpf datagrid 水平滚动错误？

> ID：11201041
> 
> 赞同：1
> 
> 时间：2012-06-26T05:08:26.403
> 
> 标签：wpf, scrollbar, wpfdatagrid

我`DataGrid`在 WPF 中注意到，当我设置时`SelectionMode="Extended"`，水平滚动变得非常不完整/奇怪。某种“全选”类型的按钮在网格的左上角迅速出现/消失，并且标题和列在滚动时来回跳跃。滚动条本身也在滚动时来回跳跃。滚动确实可以工作，但是滚动时的行为*看起来*确实很糟糕。

我注意到，如果我设置，`SelectionMode="Single"`那么问题就会消失，但我想使用`SelectionMode="Extended"`. 这是我的数据网格的代码：

```
<DataGrid x:Name="dataGrid" SelectionMode="Extended" SelectionUnit="Cell" 
    HeadersVisibility="Row,Column" RowHeaderWidth="0"
    ItemsSource="{Binding ElementName=dataPager, Path=PageView}" 
    CanUserReorderColumns="False"
    CanUserAddRows="False" CanUserDeleteRows="False" CanUserResizeRows="False"> 
```

有谁知道如何解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T00:58:26.133

所以我想出了一个解决我的问题的方法。我认为是“全选”按钮导致它在滚动过程中出现/消失的方式出现问题，所以我研究了是什么使该按钮出现以及如何使其不出现。原来问题出在行标题上，所以我改变了：

```
HeadersVisibility="Row,Column" 
```

到：

```
HeadersVisibility="Column" 
```

删除标题可见性中的行部分后，“全选”按钮停止出现，并按预期进行滚动。仍然不完全确定为什么“全选”按钮会以这种方式出现/消失......

# ios - UIImagePickerController 的 pushViewController 在导航栏后面放错了推送视图

> ID：11201042
> 
> 赞同：0
> 
> 时间：2012-06-26T05:08:46.353
> 
> 标签：ios, uiimagepickercontroller

当我将视图控制器推入 UIImagePickerController 对象时，视图控制器的视图错位在导航栏后面。无论我选择什么作为图像选择器源。我以模态方式呈现图像选择器并在其代表中执行以下操作

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
  [[UIApplication sharedApplication] setStatusBarHidden:NO];
  [picker setNavigationBarHidden:NO];

  SecondViewController *secondVC = [[SecondViewController alloc] init];
  [picker pushViewController:secondVC animated:YES];
  [secondVC release];
} 
```

而在 SecondViewController 中并没有什么特别之处。

当我将同一个视图控制器推入 UINavigationController 的对象时，它被正确放置在导航栏下方。我应该怎么做才能使用图像选择器作为导航控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:16:46.193

在推送第二个视图控制器之前，我应该设置图像选择器的导航栏的[半透明属性 NO。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html#//apple_ref/occ/instp/UINavigationBar/translucent)

# oracle - 仅触发更改的值

> ID：11201045
> 
> 赞同：15
> 
> 时间：2012-06-26T05:08:58.633
> 
> 标签：oracle, plsql, triggers, oracle11g

假设我们在表中有 3 条记录： orig_tab

```
---------------------------------------------
|  PK  |  Name  |  Address  |  Postal Code  |
---------------------------------------------
|   1  |  AA    |  Street1  |   11111       |
|   2  |  BB    |  Street2  |   22222       |
|   3  |  CC    |  Street3  |   33333       |
--------------------------------------------- 
```

现在数据发生了变化：

```
---------------------------------------------
|  PK  |  Name  |  Address  |  Postal Code  |
---------------------------------------------
|   1  |  AA    |  Street1  |   11111       |
|   2  |  BB    |  Street2  |   44444       |
|   3  |  CC    |  Dtreet7  |   33333       |
--------------------------------------------- 
```

客户想要的是更新记录，只有更新的列（是的，我知道这没有任何意义，但他们使用 1970 年代的一些旧系统，他们想做一些日志记录等）。所以报表应该是这样的：

```
---------------------------------------------
|  PK  |  Name  |  Address  |  Postal Code  |
---------------------------------------------
|   2  |        |           |   44444       |
|   3  |        |  Dtreet7  |               |
--------------------------------------------- 
```

这是我试过的：

```
CREATE OR REPLACE TRIGGER vr_reporting_trigger
   AFTER UPDATE ON orig_tab
   FOR EACH ROW
BEGIN
IF inserting THEN
INSERT INTO rep_tab(pk, name, address, code)
  SELECT :new.pk, :new.name, :new.address, :new,code FROM DUAL
  WHERE NOT EXISTS (SELECT 1 FROM rep_tab WHERE pk = :new.pk);
UPDATE rep_tab t SET t.name = :new.name, t.address = :new.address, t.code = :new.code 
   WHERE t.pk = :new.pk;
ELSIF updating THEN
IF :new.pk <> :old.pk THEN
     UPDATE rep_tab t
        SET t.name = :new.name, t.address = :new.address, t.code =: new.code
      WHERE t.pk = :old.pk ;
  END IF;
  MERGE INTO rep_tab d
  USING DUAL ON (d.pk = :old.pk)
  WHEN MATCHED THEN
  UPDATE SET d.name = :new.name, d.address = :new.address, d.code =: new.code
  WHEN NOT MATCHED THEN
  INSERT (d.pk,d.name, d.address, d.code) VALUES (:new.pk,:new.name, new.address, new.code);
END IF;
END; 
```

使用此解决方案，我得到：

```
---------------------------------------------
|  PK  |  Name  |  Address  |  Postal Code  |
---------------------------------------------
|   2  |  BB    |  Street2  |   44444       |
|   3  |  CC    |  Dtreet7  |   33333       |
--------------------------------------------- 
```

我知道它在更新语句时插入子句中的某处，但我不知道如何根据我的要求更改此子句。有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-26T05:32:57.483

你需要这个：

> 在 UPDATE 触发器中，可以使用 UPDATING 条件谓词指定列名，以确定是否正在更新命名列。例如，假设触发器定义如下：

```
CREATE OR REPLACE TRIGGER ...
... UPDATE OF Sal, Comm ON Emp_tab ...
BEGIN

... IF UPDATING ('SAL') THEN ... END IF;

END; 
```

来自[Oracle 文档 (9i)](http://docs.oracle.com/cd/A97630_01/appdev.920/a96590/adg13trg.htm)

[11gR2 文档](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/triggers.htm#LNPLS99955)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-11-29T14:07:12.203

仅触发更改的值。

作为示例（仅`NOT NULL`支持）（具有 NULL 的比较运算符始终返回 FALSE）：

```
CREATE OR REPLACE TRIGGER trigger_department_update
  BEFORE UPDATE OF 
      department_id,
      cluster_id, 
      division_id, 
      macroregion_id, 
      address, 
      email
    ON cl_department
  FOR EACH ROW
BEGIN
  IF (
    :new.department_id != :old.department_id
    OR :new.cluster_id != :old.cluster_id
    OR :new.division_id != :old.division_id
    OR :new.macroregion_id != :old.macroregion_id
    OR :new.address != :old.address
    OR :new.email != :old.email
  ) 
    THEN :new.update_date := CURRENT_TIMESTAMP; 
  END IF;
END; 
```

使用 NULL 支持（感谢本文下方评论中的[@Oleg](https://stackoverflow.com/users/6081130)）（感谢[@Chris Bandy](https://stackoverflow.com/users/1608057)的[回答](https://stackoverflow.com/questions/10416789/how-to-rewrite-is-distinct-from-and-is-not-distinct-from#answer-18684859)）：

```
CREATE OR REPLACE TRIGGER trigger_department_update
  BEFORE UPDATE OF 
      department_id,
      cluster_id, 
      division_id, 
      macroregion_id, 
      address, 
      email
    ON cl_department
  FOR EACH ROW
BEGIN
  IF (
    ((:new.department_id <> :old.department_id OR :new.department_id IS NULL OR :old.department_id IS NULL) AND NOT (:new.department_id IS NULL AND :old.department_id IS NULL))
    OR ((:new.cluster_id <> :old.cluster_id OR :new.cluster_id IS NULL OR :old.cluster_id IS NULL) AND NOT (:new.cluster_id IS NULL AND :old.cluster_id IS NULL))
    OR ((:new.division_id <> :old.division_id OR :new.division_id IS NULL OR :old.division_id IS NULL) AND NOT (:new.division_id IS NULL AND :old.division_id IS NULL))
    OR ((:new.macroregion_id <> :old.macroregion_id OR :new.macroregion_id IS NULL OR :old.macroregion_id IS NULL) AND NOT (:new.macroregion_id IS NULL AND :old.macroregion_id IS NULL))
    OR ((:new.address <> :old.address OR :new.address IS NULL OR :old.address IS NULL) AND NOT (:new.address IS NULL AND :old.address IS NULL))
    OR ((:new.email <> :old.email OR :new.email IS NULL OR :old.email IS NULL) AND NOT (:new.email IS NULL AND :old.email IS NULL))
  ) 
    THEN :new.update_date := CURRENT_TIMESTAMP; 
  END IF;
END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-16T21:57:41.520

对待 null ：

`... nvl(to_char(:new.department_id,' ') <> nvl(to_char(:old.department_id,' ') OR ...`

# javascript - 如何在 Android Webview 中已加载的网页上执行 Javascript

> ID：11201054
> 
> 赞同：2
> 
> 时间：2012-06-26T05:10:12.860
> 
> 标签：javascript, android, html, webview

我想在 Webview 中已加载的网页上执行 javascript。我正在加载一个新的文章网页，例如：www.techcrunch,com in webview。我想在 Webview 中这个已经加载的网页上运行 javascript。此 javascript 是资产文件夹中的外部文件。javascript基本上从标签中提取图像，在html页面中进行一些其他处理。如何在已加载的 www.techcrunch.com 页面上执行此 javascript？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T05:39:38.850

这与任何其他网络浏览器一样。使用*javascript*协议：

```
webview.loadUrl("javascript:alert('Example');"); 
```

# ios - 在没有互联网堆栈溢出时检测凹凸

> ID：11201060
> 
> 赞同：0
> 
> 时间：2012-06-26T05:11:12.160
> 
> 标签：ios, connectivity, bump

当没有 Internet 连接时，有没有办法告诉用户他们不能 Bump 他们的 iPhone 来传输数据。我使用了 motionEnded: 方法来检测抖动，但与 Bump 功能相比灵敏度较低。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:12:57.337

使用苹果的可达性类来检查连接可用性并弹出一个警报视图，其中包含您想要的用户消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:14:27.393

你的问题不清楚。您能否详细说明您正在努力实现的目标，到目前为止所做的事情？

无论如何，如果我做对了，您想在没有互联网连接的情况下传输数据。还记得蓝牙吗？Apple 在其上构建了一个[GameKit](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html)框架。你可以探索一下。

# driver - 如何：在用户模式和内核模式之间进行 2 路通信

> ID：11201061
> 
> 赞同：0
> 
> 时间：2012-06-26T05:11:14.733
> 
> 标签：driver, kernel-mode, wdf, minifilter

我编写了一个驱动程序，它从 IRP 缓冲区中提取一个值。现在基于这个关键字，我必须通过或丢弃 IRP。所以我需要从内核模式驱动程序中与数据库进行通信，这并不容易。因此，我正在使用应用程序或 exe 来执行此操作，这将导致我将传递或丢弃 IRP 的真假。

我想将驱动程序与我在客户端应用程序中获取数据的应用程序链接起来。

我考虑过使用可以充当管道的临时文件。

请提出一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:44:56.953

我会选择 IOCTL。

与数据库通信的应用程序从向驱动程序发送一个或多个 IOCTL 开始。我们将这种类型的 IOCTL 称为 IOCTL-1。

IOCTL-1 的完成表示驱动程序对数据库的请求。请求详细信息可以在 IOCTL 输出缓冲区中传递。

应用程序检测 IOCTL-1 完成，检索请求详细信息，运行查询并使用不同的 IOCTL (IOCTL-2) 将结果传递给驱动程序。然后它重新发送 IOCTL-1 以便驱动程序可以发出另一个请求。

# batch-file - 带空格的地址？

> ID：11201062
> 
> 赞同：2
> 
> 时间：2012-06-26T05:11:22.883
> 
> 标签：batch-file

```
tree C:\My files >> pathtree.txt 
```

它似乎不起作用。我期望看到的是我的文件树，但它输出`Too many parameters - files`. 我认为这是因为空间，但我不知道如何解决它。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T05:12:24.640

使用引号。

```
tree "C:\My files" >> pathtree.txt 
```

# javascript - 在不影响布局的情况下降低鼠标悬停元素周围的灵敏度的简单方法是什么？

> ID：11201066
> 
> 赞同：1
> 
> 时间：2012-06-26T05:12:12.453
> 
> 标签：javascript

我有几个 onmouseover 事件（javascript 函数和 jquery 手风琴的组合），但它们似乎对鼠标的确切位置过于敏感，以至于它很难触发和/或鼠标移出和关闭太容易功能（使得选择某些东西和/或无意中触发错误的功能变得非常困难）。我正在使用非常紧凑的布局，所以我无法增加元素之间的空间。

在不影响布局的情况下扩展将触发功能的区域或降低鼠标悬停元素周围的灵敏度的简单方法是什么？我尝试过使用边距和填充，但似乎没有帮助。

我在菜单中使用的 javascript 函数中包含了以下一个示例。

```
# HTML #
<a style="top:13px; left:43px; position:absolute; z-index:31" href="createaccount.html">Create Account </a>

<ul class="menu" style="top:2px; left:99px; position:absolute;"> 
<li><a style=" text-align: left;" href="createaccount.html" onmouseover="mopen('m1')" onmouseout="mclosetime()">&#x25B6;</a>

<div id="m1" onmouseover="mcancelclosetime()" onmouseout="mclosetime()">
<a href="mybody.html" style="top:-9px; left: 16px">Quick Start</a>  
</div></li>
</ul>

# Javascript #
var timeout = 150;
var closetimer = 0;
var ddmenuitem = 0;

function mopen(id) {
mcancelclosetime();
if (ddmenuitem) ddmenuitem.style.visibility = 'hidden';
ddmenuitem = document.getElementById(id);
ddmenuitem.style.visibility = 'visible';
}
function mclose() {
if (ddmenuitem) ddmenuitem.style.visibility = 'hidden';
}
function mclosetime() {
closetimer = window.setTimeout(mclose, timeout);
}
function mcancelclosetime() {
if (closetimer) {
    window.clearTimeout(closetimer);
    closetimer = null;
} 
}
document.onclick = mclose;

# CSS #
.menu div { 
position: absolute; visibility: hidden; margin: 0px 0px 0px 7px; padding: 0; width: 120px; height:62px; background: black;}

    .menu div a {position: relative; display: block; padding: 0px 0px 0px 0px; margin: -3px 0px 0px -9px; width: 105px; text-align: left; text-decoration: none; background: black; color: white; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:18:12.680

我不清楚问题是什么，但您可以尝试在文档级别处理 mousedown 并自己找到适当的控件。因此，您可以自己降低敏感度。

IE。类似于以下伪代码

```
document.onmousedown = mouseDown;

function mouseDown(e)
{
    for (int i=0; i < controls.Count; i++)
    {
        position = getAbsolutePosition(control[i);
        if ((e.x > control.x - 5) && (e.x < control.right + 5) &&
            (e.y > control.y - 5) && (e.y < control.bottom + 5))
        ... do something
} 
```

上面的代码允许控件周围的 5 像素缓冲区仍被视为控件的一部分。“getAbsolutePosition”是将控件坐标转换为屏幕坐标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T04:50:52.853

发生 mouseover 事件后，在项目顶部显示一个透明 div，每边大 5px。如果您使用巧妙的 CSS 样式，它甚至可能不需要 javascript。

搜索“纯 CSS 分层菜单”。

# javascript - 如何动态插入脚本标签

> ID：11201077
> 
> 赞同：0
> 
> 时间：2012-06-26T05:13:12.993
> 
> 标签：javascript, jquery

我正在尝试动态插入脚本标签及其内容。

现在我已将其更改为创建一个文本节点。

```
var text = "$(document).ready(function(){ $('.Picture1').onmouseover(function()      
{$('.tooltip').show();});});"
insertScript(text );

function insertScript(script_text) { 
 var script_tag = document.createElement('script'); 
 script_tag.type = "text/javascript";  
 var script = document.createTextNode(script_text); 
 script_tag.appendChild(script);  
 document.getElementsByTagName('head')[0].appendChild(script_tag); 
} 
```

我试图在脚本调试器中找到它（按 F12 表示 IE）我首先动态插入 JQuery-1.7.1，然后插入上面的代码。

我想动态插入两者。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:31:51.853

我想您要动态地将脚本插入页面的唯一原因是执行它。在这种情况下，您可以只使用`eval`. 它将具有相同的优点和缺点。

# jsp - request.getSession() 在 sendRedirect() 之后创建新会话

> ID：11201081
> 
> 赞同：3
> 
> 时间：2012-06-26T05:13:52.337
> 
> 标签：jsp, session, jakarta-ee, servlets, struts2

我们正在开发旅行应用程序。通过这个航班，酒店，巴士票将被预订。它是基于产品的应用程序。我们有近 25 个客户（3 个客户正在使用，仍在开发中）。我们正在为所有客户维护一台服务器。一个服务器（应用程序）多个客户端是我的应用程序的伟大成就。但问题是每个客户都有不同的支付网关用于他们的汇款，如 EBS、HDFC、ICICI、ATOM 等。我们必须使用 sendRedriect() 来调用他们的支付网关系统。

```
response.sendRedirect("hdfc link...."); 
```

在重定向之前，我们在会话范围内存储了近 7-9 个对象，每个对象将包含近 35-50 个变量。支付网关流程完成后，将重定向到我的应用程序。当我尝试获取会话时

```
request.getSession(); 
```

它正在创建新会话一段时间（10 次中有 5 次）。

存储在请求范围内的变量对我来说至关重要。我无法将其存储到数据库中，因为它们非常庞大。对于每个请求，我们都会生成长度为 25 的随机数。使用该随机数存储会话变量。

```
session.setAttribute("flightStatus"+randomNumber, flightstatus object); 
```

所以请建议如何取回上一个会话，以及为什么上一个会话无效并且新会话正在创建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:08:37.163

我认为你应该使用 request.getSession(false) 。如果您不想获得新的会话。

阅读此文档：[request.getSession(false)](http://docs.oracle.com/javaee/1.4/api/javax/servlet/http/HttpServletRequest.html#getSession%28boolean%29)

# java - Liferay 文档中的 Portlet

> ID：11201084
> 
> 赞同：1
> 
> 时间：2012-06-26T05:14:26.853
> 
> 标签：java, jsp, liferay, portlet

嗨，我尝试从 liferay 文档中做 portlet。但是我的java类不起作用。

MyGreetingPortlet

```
package com.liferay.samples;  
import java.io.IOException; 
import javax.portlet.ActionRequest; 
import javax.portlet.ActionResponse; 
import javax.portlet.PortletException; 
import javax.portlet.PortletPreferences; 
import com.liferay.util.bridges.mvc.MVCPortlet;  
public class MyGreetingPortlet extends MVCPortlet { @Override 
public void processAction( ActionRequest actionRequest, ActionResponse actionResponse) 
        throws IOException, PortletException { 
    PortletPreferences prefs = actionRequest.getPreferences(); 
    String greeting = actionRequest.getParameter("greeting");  
    if (greeting != null) { 
        prefs.setValue("greeting", greeting); 
        prefs.store();
        }  
    super.processAction(actionRequest, actionResponse); 
    } 
} 
```

视图.jsp

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %> 
<%@ page import="javax.portlet.PortletPreferences" %> 
<portlet:defineObjects />
<% PortletPreferences prefs = renderRequest.getPreferences();
String greeting = (String)prefs.getValue( "greeting", "Hello! Welcome to our portal."); %>
<p><%= greeting %></p>
<portlet:renderURL var="editGreetingURL"> <portlet:param name="jspPage" value="/edit.jsp" /> 
</portlet:renderURL> 
<p><a href="<%= editGreetingURL %>">Edit greeting</a></p> 
```

编辑.jsp

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %> 
<%@ page import="com.liferay.portal.kernel.util.ParamUtil" %> 
<%@ page import="com.liferay.portal.kernel.util.Validator" %> 
<%@ page import="javax.portlet.PortletPreferences" %>  
<portlet:defineObjects />  
<% PortletPreferences prefs = renderRequest.getPreferences(); 
String greeting = (String)prefs.getValue( "greeting", "Hello! Welcome to our portal."); %>  
<portlet:actionURL var="editGreetingURL"> <portlet:param name="jspPage" value="/edit.jsp" /> 
</portlet:actionURL>  
<form action="<%= editGreetingURL %>" method="post"> 
<label><input type="text"><%= greeting %></label>
<input type="submit" name="submit" value="Submit">
</form>  
<portlet:renderURL var="viewGreetingURL"> 
<portlet:param name="jspPage" value="/view.jsp" /> 
</portlet:renderURL>  
<p><a href="<%= viewGreetingURL %>">&larr; Back</a></p> 
```

部署 jsp 后工作正常，但是当我单击提交按钮时没有任何反应。在这个例子中我只改变一件事：删除 aui 标签，但不认为改变什么，因为我已经尝试了一些不同的例子，没有人使用 java 类。哦，我使用 MVC portlet。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:30:52.570

我认为您在 portlet.xml 中的 portlet-class 没有指向您的自定义 portlet 类，并且仍在引用 MVCPortlet。请更改它以指向您的自定义 portlet 类

**- -更新 - -**

在我本地检查您的代码后发现您传递参数的方式不正确。您没有传递参数的名称。您应该传递如下所示的参数。

```
<input type="text" name="<portlet:namespace/>greeting"><%= greeting %></input> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T07:16:01.020

文件 portlet.xml 也需要更改，使其指向我们的新类

```
 <portlet>
    <portlet-name>my-greeting</portlet-name>
    <display-name>My Greeting</display-name>
    <portlet-class>com.liferay.samples.MyGreetingPortlet</portlet-
    class>
    <init-param>
    <name>view-jsp</name>
    <value>/view.jsp</value>
    </init-param> 
```

在edit.jsp

```
<%
    PortletPreferences prefs = renderRequest.getPreferences();
    String greeting = (String) prefs.getValue("greeting",
            "Hello! Welcome to our portal.");
%> 
```

在此之后添加以下代码

```
<liferay-ui:success key="success" message="Greeting saved successfully!" /> 
```

重新生成war文件，您将看到输出。不过，如果您遇到问题，我会提供完整的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:34:45.490

我想没有必要打电话

```
super.processAction(actionRequest, actionResponse); 
```

删除它并重试，然后它可能会起作用。

# php - 如何使用 cron 脚本执行类函数

> ID：11201093
> 
> 赞同：0
> 
> 时间：2012-06-26T05:15:28.587
> 
> 标签：php, class, shell, cron, cron-task

我被困在一个 cron 脚本中，需要你的帮助。

我的网站托管在 1and1 服务器上。我使用类函数结构在 php 中编写了一个 cron 脚本。

实际上有两个脚本。它们是：1）init.php 2）job.php

在 init.php 中，我编写了必要的类和函数。在 job.php 脚本中，我在顶部和下方包含了 init.php，为此我编写了其他功能（数据库查询和发送电子邮件）。

如果我直接使用浏览器（http://www.abc.com/job.php）执行脚本，脚本执行得很好。我收到电子邮件。但是，在使用 shell 将此脚本设置为 cron 任务后，我没有得到任何响应。我也不知道如何检查 cron 的错误日志。

php文件的示例结构如下：

**初始化.php：**

```
define('DB_SERVER','***********');
define('DB_USERNAME','*******');
define('DB_PASSWARD','******');
define('DB_DATABASE','*******');

class information{

   public function __construct(){
        $connection = mysql_connect(DB_SERVER,DB_USERNAME,DB_PASSWARD) or die ('connection error'.mysql_error());
        mysql_select_db(DB_DATABASE,$connection) or die('database error'.mysql_error());
   }

   public function configuration(){

        $sql = "SELECT * FROM config order by id";
        $exe = mysql_query($sql);

        $site_config = array();

        while($res = mysql_fetch_array($exe)){      
            $site_config[$res['name']]=$res['value'];
        }
        return $site_config;
    }

}

$obj = new information; 
```

**工作.php：**

要求（'init.php'）；

```
class Achdirect_cmi
{
    private $ID;
    private $AID;
    private $Key;

    public $site_config;

    public function __construct()
    {
        global $obj;

        $this->site_config = $obj->configuration();

        $this->ID           = $this->site_config['id']; 
        $this->AID           = $this->site_config['A_id'];
        $this->Key = $this->site_config['key'];     

    }
.
.
.
.

} 
```

请帮我执行这个脚本。

** cron 作业是使用 SSH 访问设置的。

下面提到的命令已用于设置 cron 脚本。

*   *   *   *   *   /usr/bin/php /a/b/htdocs/scripts/job.php

为了检查我的 shell 命令和配置是否执行，我还添加了一个测试脚本。测试脚本正确执行。**

**在对功能一一分析后，我发现下面的代码没有执行。变量已正确初始化，但未创建“SoapClient”对象。请注意，SoapClient 类不是我定义的，而是 php5 的核心功能。**

```
try{

$client = new SoapClient($url, array("location" => $location));

$params = array("ticket" => $auth_array, "MerchantID" => $MerchantID, "TransactionID" => $trace_number );

$response = $client->getTransaction($params);

}
catch (Exception $e){ 

echo $e->getMessage();
} 
```

请建议我需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:55:03.303

您的问题很可能是“require('init.php');”

cron 作业从 cron 所在的位置运行，而不是从您拥有 job.php 文件的路径运行。因此，如果要包含该文件，则应包含包含文件的完整路径。

```
require('/a/b/htdocs/scripts/init.php'); 
```

（如果那是正确的目录 - 似乎是一个有趣的命名结构！）

# cakephp - 在会话中使用 ID 填充 CakePHP 中的表单字段

> ID：11201096
> 
> 赞同：0
> 
> 时间：2012-06-26T05:15:43.243
> 
> 标签：cakephp

如果没有发布数据，我希望我在 CakePHP2 中创建的表单显示空白，但如果会话密钥 Person.id 存在，则使用模型中的数据填充。这是我的代码：

```
function about() {
    // Make session key for debug purposes
    $this->Session->write("Person.id",1);
    if($this->request->is('post')) {
        debug("post");
    } else {
        debug("not post");
        // Use the value in the session Person.id to find the 
        // record in the Person model
        $this->params->data = $this->Person->findById($this->Session->read("Person.id"));
    }
} 
```

以上大部分作品。`Person`如果我在不发布任何数据的情况下访问视图，则表单将按预期使用模型中的数据填充。

`not post`但是，如果我发布表单，我仍然会在我期待的时候收到调试消息`post`。

如果我注释掉分配数据的行，`$this->params->data`然后提交表单会给我正确的调试消息，`post`但我不明白为什么会这样。

如果`$this->params->data`填充对 Cake 的意义与表单帖子相同，那么我应该如何检查真实、真实的表单帖子？

**更新：**如果我更改`if($this->request->is('post'))`为`if($this->request->data)`then 它完全按照我想要的方式工作......但我仍然不明白为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:15:06.803

在 CakePHP2 中，当您使用 FormHelper 在视图中创建表单时，它会[自动生成](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#creating-forms)此字段

```
<input type="hidden" name="_method" value="PUT"/> 
```

当您编辑记录时（意味着设置了它的主键）。

当您提交表单时，此隐藏字段会覆盖 HTTP 方法，您的请求不会被视为 POST，而是被视为 PUT。您可以像这样更新您的测试：

```
if($this->request->is('put')) {
  ...
} 
```

或反映您使用时获得的代码`bake`

```
if($this->request->is('post') || $this->request->is('put')) {
  ...
} 
```

如果你想自己看，只需调试请求：

```
debug($this->request); 
```

然后有点跑题了，但是如果您会话中的关键“Person.id”是登录用户，您可能会使用自定义机制来登录/注销用户，并且可能值得查看[AuthComponent](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)。

# javascript - 单击事件未在 Firefox 中触发 - 主干

> ID：11201100
> 
> 赞同：1
> 
> 时间：2012-06-26T05:16:25.443
> 
> 标签：javascript, backbone.js

我有以下看法：

```
App.HouseListElemView = Backbone.View.extend({
    tagName: 'li',
    events: {
        'click': function() {
            App.detailsRouter.navigate('details/' + this.model.id, true);     
        },
        'click .btn-compare': 'compare',
        'click .btn-compare > input': 'toggleCompare',
    },
   // more stuff here...
 }); 
```

列表中的第一个点击事件在 safari 和 chrome 中都会触发，但在 Firefox 中不会触发。我正在使用 Firefox 11.0。

我是否错误地声明了我的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:22:54.307

是的，你做错了。执行以下操作，它应该可以工作

```
App.HouseListElemView = Backbone.View.extend({
    tagName: 'li',
    events: {
        'click': 'navigateTo',
        'click .btn-compare': 'compare',
        'click .btn-compare > input': 'toggleCompare',
    },
    navigateTo:function() {
            App.detailsRouter.navigate('details/' + this.model.id, true);
        },
   // more stuff here...
 }); 
```

顺便说一下，点击事件将绑定到视图的根目录，即`el`. 因此，请务必使用选定的类似来指定点击目标`'click #navigator':'navigateTo'`

# objective-c - 对象值不在其他类中

> ID：11201102
> 
> 赞同：0
> 
> 时间：2012-06-26T05:16:31.057
> 
> 标签：objective-c, ios

我正在创建一个简单的基于 iPhone 导航的应用程序。在这我从一等移动到二等。在第二堂课中，我为`string(selectedName)`. 当我回到 中的第一个类时`(void)ViewWillAppear`，我正在`selectedString`通过该类的对象访问 的值。我已经在 -`(void)ViewDidLoad`方法中的第一类中分配了第二类的对象，但它在`null`那里记录了值。请帮帮我。

在第二类中，我有一个名为 selectedString 的字符串，我为它设置了一些值。并记录它，它记录得很好。

在第一类 viewDidLoad 方法中，我已经像这样分配了第二类的对象

```
 Second *obj=[Second alloc]initWithNibName:@"Second" bundle:nil]; 
```

在 viewWillAppear 方法中，我像这样访问 selectedString ，但它记录为空。

```
 NSLog(@"%@",obj.selectedString); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:28:55.810

试试这个传回数据：

要将数据从 ViewControllerB 传递回 ViewControllerA，您需要使用协议和委托。

为此，我们将使 ViewControllerA 成为 ViewControllerB 的委托，这允许 ViewControllerB 将消息发送回 ViewControllerA，从而使我们能够发送回数据。

要让 ViewControllerA 成为 ViewControllerB 的委托，它必须符合我们必须指定的 ViewControllerB 协议。这告诉 ViewControllerA 它必须实现哪些方法。

1) 在 ViewControllerB.h 中 #import 下方但 @interface 上方您指定协议。

```
@protocol ViewControllerBDelegate <NSObject>
- (void)addItemViewController:(ViewControllerB *)controller didFinishEnteringItem:(NSString *)item;
@end 
```

2) 接下来仍然在 ViewControllerB.h 中，您需要设置委托属性并在 ViewControllerB.m 中合成

```
@property (nonatomic, weak) id <ViewControllerBDelegate> delegate; 
```

3) 在 ViewControllerB 中，当我们弹出视图控制器时，我们会在委托上调用一条消息。

```
NSString *itemToPassBack = @"Pass this value back to ViewControllerA";
[self.delegate addItemViewController:self didFinishEnteringItem:itemToPassBack]; 
```

4) ViewControllerB 就是这样，现在在 ViewControllerA.h 中告诉 ViewControllerA 导入 ViewControllerB 并符合其协议。

```
#import "ViewControllerB.h"

    @interface ViewControllerA : UIViewController <ViewControllerBDelegate> 
```

5) 在 ViewControllerA.m 中从我们的协议中实现以下方法

```
- (void)addItemViewController:(ViewControllerB *)controller didFinishEnteringItem:(NSString *)item
{
     NSLog(@"This was returned from ViewControllerB %@",item);
} 
```

6) 在我们将 ViewControllerB 推送到导航堆栈之前，我们需要做的最后一件事是告诉 ViewControllerB ViewControllerA 是它的委托。

```
ViewControllerB *viewControllerB = [[ViewControllerB alloc] initWithNib=@"ViewControllerB" bundle=nil];
viewControllerB.delegate = self
[self pushViewController:viewControllerB animated:YES]; 
```

# objective-c - NSManagedObject hasChanges 总是返回 false

> ID：11201104
> 
> 赞同：0
> 
> 时间：2012-06-26T05:16:39.847
> 
> 标签：objective-c, ios, core-data, nsmanagedobject

我有一个日志 NSManagedObject，无论这是一个新对象还是已经保存的对象，无论有没有变化，下面的代码都会返回三重 NO。我的问题可能是什么？谢谢。

```
#define NSStringFromBOOL(aBOOL)    aBOOL? @"YES" : @"NO"
NSLog(@"updated: %@, inserted: %@, hasChanges: %@",
      NSStringFromBOOL([[self log] isUpdated]), 
      NSStringFromBOOL([[self log] isInserted]),
      NSStringFromBOOL([[self log] hasChanges])
      ); 
```

# html - 如何用按钮画一条线在线的中心

> ID：11201106
> 
> 赞同：0
> 
> 时间：2012-06-26T05:17:06.603
> 
> 标签：html, css

我想`<hr>`在 CSS 中画一条线。在线的中心有一个按钮，可以将那条线从中间切开。那么如何在css中实现这个效果呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:18:54.730

给`margin-bottom`你的减号`button`。像这样写：

```
button{
 margin-bottom:-20px;
 position:relative;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:29:23.187

CSS

```
.button-holder{display:block; height:30px; border-bottom:1px solid #ff0000; position:relative; text-align:center;}
input{position:absolute; bottom:-13px;} 
```

HTML

```
<div class="button-holder">
    <input type="button" value="button in the middle of HR" />
</div> 
```

# cocos2d-iphone - 超类中的自我类方法，然后使用它的子类

> ID：11201107
> 
> 赞同：0
> 
> 时间：2012-06-26T05:17:09.763
> 
> 标签：cocos2d-iphone, self, scene

`[self classmethod]`在超级类中，然后使用它子类我正在制作一些基于 cocos2d 的 iPhone 游戏。在我之前见过的许多游戏中，当用户的角色死亡或消失时，场景会重新开始。它可以简单地完成，但如果在每个子类中实现，则需要一些处理。

```
[[CCDirector sharedDirector] replacescene:[childclass scene]]; 
```

但是如果我可以在父类中实现，它可以一次完成。我猜。所以我`[self scene]`在父类中尝试过，但它不起作用。

## 我怎样才能在父类中做到这一点？

添加在

```
@interface Parent : CCLayer  {} 
```

+(CCScene*)场景；

-（无效）死亡；

@结尾

@实现父

...

+(CCScene*)场景{

```
CCScene *scene = [CCScene node];

// 'layer' is an autorelease object.
Parent *layer = [Parent node];

// add layer as a child to scene
[scene addChild: layer];

// return the scene
return scene; 
```

}

...

-（无效）死{

// 在角色死亡后调用

[[CCDirector sharedDirector] replacescene:[self scene]]; //这会报错“Parent may not respond to 'scene'”

}

* * *

@interface Child1 : 父 {}

+(CCScene*)场景；

@结尾

@实现父

...

+(CCScene*)场景{

```
CCScene *scene = [CCScene node];

// 'layer' is an autorelease object.
Child *layer = [Child node];

// add layer as a child to scene
[scene addChild: layer];

// return the scene
return scene; 
```

}

...

@结尾

我认为 Child1 不需要死方法实现，因为它是 Parent 的子类，但它不起作用。还有 Child2、Child3 ……也是。

当我将 dead 方法移动到 Child1 并修改它的 self -> Child1 时，它会起作用

请让我知道，如果你不能理解我的问题。谢谢你的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:12:15.930

找到了我想要的解决方案。

-(void) dead { // 如果你的角色死了，调用这个方法

[[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:2.0 场景：[self.class 场景]]]；

}

在 dead 方法中，self 可以是继承自超类的子类。

ex) 超类是 Stage：CCLayer，子类是 Stage1：当你的角色在 Stage1、Stage2、Stage3 中死亡时调用 Stage dead 方法......你不需要在这些类中实现每个 dead 方法（Stage1，Stage2 ..) 喜欢 [[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:2.0 scene:[StageX scene]]];

# ios - HTML 5 + iOS - 创建混合应用程序

> ID：11201110
> 
> 赞同：3
> 
> 时间：2012-06-26T05:17:33.733
> 
> 标签：ios, html, jquery-mobile, cordova, hybrid

我正在尝试将我的原生 iOS 应用程序转换为使用 HTML 5 的混合应用程序。经过研究，我最终使用了**jQuery mobile + phoneGap。**

我的问题是

1.  是否可以在一个视图中混合使用 html 5 和原生 iOS 功能？例如，我可以使用 html 文本字段来获取值并使用它使用 iOS 选择器进行一些转换。
2.  是否可以从 html 页面导航到本机 xib？
3.  最后，有没有更好的解决方案来创建混合应用程序？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T06:44:05.793

1.  是的，您可以在单个“视图”中混合原生 iOS 功能。如果您希望将原生 iOS 选择器*插入*到 Web 视图中，那是不可能的。正如 nhahtdh 所提到的，您添加的任何本机 iOS 视图都将放置在您的 HTML5 UIWebView 之上。要执行这样的任务，您需要掌握通过 Javascript 进行的通信。有关如何在 ObjC 和 Javascript 之间轻松通信以在本机和 HTML 之间来回传递值的技术，请参阅[https://github.com/diy/conduit](https://github.com/diy/conduit)等框架。

2.  可以从 HTML 页面执行导航（例如，单击链接时），方法是设置您的 iOS 应用程序以监视特定的 URL 请求，并根据它们执行一些操作。为此，我使用了 NSURLCache。因此，如果您希望 HTML 中的链接触发加载 xib 文件，您可以观察通过 NSURLCache 请求的 URL，并在看到时加载您的 xib。[这个链接](http://cocoawithlove.com/2010/09/substituting-local-data-for-remote.html)帮助我掌握了这项技术。

3.  据我了解，所有混合 iOS + HTML 框架都使用这种通用技术来建立一组类似 REST 的 URL 请求，这些请求可以由类似 NSURLCache 的系统解析并根据这些 URL 触发本机事件。虽然使用现有框架可能会为您节省一些时间，但您自己实现更简单的功能并不难。但是，大型框架可能会帮助您进行更高级的 HTML 资源缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:46:41.777

可能我在这里迟到了，但前两个问题的答案是**可以**的。您可以从具有 Javascript 的 Web 调用具有 Picker 显示代码和导航/推送其他视图的 Objective C 方法。您只需要使用 UIWebViewDelegate 在您的本机应用程序中跟踪它们。这是我如何做到这一点的示例：

// 在您的 Javascript 文件中，在您想要调用 Pickerview 或想要推送另一个原生视图的方法中

```
 var iframe = document.createElement("IFRAME");
       iframe.setAttribute("src", "js-frame:myObjectiveCFunction"; 
      document.documentElement.appendChild(iframe);
       iframe.parentNode.removeChild(iframe);
       iframe = null; 
```

在您的 Native Objective - C 文件中：包括 << **UIWebViewDelegate** >>

```
- (BOOL)webView:(UIWebView *)webView  shouldStartLoadWithRequest:(NSURLRequest *)request
       navigationType:(UIWebViewNavigationType)navigationType {

if ([[[request URL] absoluteString] hasPrefix:@"js-frame:"]) {
    // Extract the selector name from the URL
    NSArray *components = [requestString componentsSeparatedByString:@":"];
    NSString *functionName = [components objectAtIndex:1];
    // Call the given selector
    [self performSelector:NSSelectorFromString(functionName)];
    // Cancel the location change
    return NO;
}
// Accept this location change
return YES; 
```

}

```
- (void)myObjectiveCFunction {
    // Do whatever you want!
   // show Native picker view
   // Push another native View
} 
```

同样，您甚至可以将参数从 HTML 页面发送到 Objective c。// ----------------------------------

# asp.net - 如何在 ajax 日历控件中禁用日期条件？

> ID：11201111
> 
> 赞同：0
> 
> 时间：2012-06-26T05:17:38.420
> 
> 标签：asp.net, ajax, calendar

> **可能重复：**
> [Ajax 日历扩展器结束日期](https://stackoverflow.com/questions/11081198/ajax-calender-extender-end-date)

我有 2 个使用 ajax 日历扩展器的文本框，第一个 texbox 选择开始日期和另一个（第二个）结束日期，现在我不希望第二个文本框的日期早于第一个 texbox。因此要在第二个日历扩展器中禁用这些日期。我怎样才能在 asp.net 中这样做？

# html - 是否可以为特定子目录创建 404 错误页面？

> ID：11201113
> 
> 赞同：1
> 
> 时间：2012-06-26T05:17:42.530
> 
> 标签：html, .htaccess, http-status-code-404, subdirectory

是否可以为特定子目录制作自定义 404 页面而不是全局页面？

例如我想要

/bla 显示 /404.html

和 /subdirectory/bla 显示 /subdirectory/404.html

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T05:25:56.503

试试这个

```
ErrorDocument 404 /subdirectory/404.html 
```

# ios - 标记 iOS 应用程序的最有效方法

> ID：11201114
> 
> 赞同：0
> 
> 时间：2012-06-26T05:17:50.173
> 
> 标签：ios, push-notification, apple-push-notifications, urbanairship.com, badge

我有一个 iOS 应用程序，它本质上是一个很长的列表。每天都有新项目添加到列表顶部。我想标记应用程序并指明列表中添加了多少新项目。当用户打开应用程序时，徽章就会消失。

**最简单和最具成本效益的方法是什么？**

到目前为止，我已经考虑过：

*   自己跟踪设备 ID 并发送远程通知以标记应用程序
*   使用 Urban Airship 或类似服务为我跟踪设备 ID
*   只需使用 24 小时计时器标记应用程序

跟踪设备 ID 可能比我想做的要多。Urban Airship 非常昂贵：0 - 10k 用户每月 200 美元。“聪明”的第三种选择可能是最简单和最便宜的，但有一些限制。

也许第一个选择不是那么多工作。也许有人使用 AWS 做到了这一点。也许有比 Urban Airship 更便宜的替代品。可能还有一些我没有考虑过的事情。感谢所有反馈！

**编辑#1**：假设我每天添加 5-10 个新项目。并假设我可以在每天上午 10 点之前添加项目。也许我可以有一个 24 小时计时器，用 5 到 10 之间的随机数标记应用程序。该应用程序在启动时会抓取一个配置文件，这样我就可以远程关闭计时器。不确定如果用户完全杀死了应用程序，计时器是否会停止。当然，计数不会是完美的，但它可能并不重要。

**编辑＃2**：我想知道主要是自己做多少工作。设备令牌可以存储在 AWS 上的某个表中。我可以编写一个简单的脚本来随时发送通知。实施反馈的东西可能很烦人。但它可能可以在 AWS 上用一些简单的东西来完成。**有谁做过这个并且知道它真正涉及到多少工作？**

# perl - 使用 perl WWW::Mechanize::Formfiller 填写表格

> ID：11201115
> 
> 赞同：0
> 
> 时间：2012-06-26T05:17:53.133
> 
> 标签：perl, www-mechanize

我希望从具有交互式菜单的网站[http://revigo.irb.hr/下载信息。](http://revigo.irb.hr/)在使用获取表单字段后，我正在尝试以下 Perl 代码

```
perl -MWWW::Mechanize::Shell -e shell
get http://revigo.irb.hr/
fillout
...
submit
script 
```

最终代码如下：

```
 use strict;
      use WWW::Mechanize;
      use WWW::Mechanize::FormFiller;
      use URI::URL;

      my @go_terms=qw/GO:0006612 GO:0045862 GO:0048545 GO:0007568 GO:0046326 GO:0051901  GO:0010524 GO:0006044 GO:0032024/;
      my $go_string=join("\n",@go_terms);
      my $agent = WWW::Mechanize->new( autocheck => 1 );
      my $formfiller = WWW::Mechanize::FormFiller->new();
         $agent->env_proxy();

      $agent->get('http://revigo.irb.hr/');
      $agent->form_number(1) if $agent->forms and scalar @{$agent->forms};
      $formfiller->add_filler( 'goList' => Fixed => $go_string);
      $formfiller->add_filler( 'cutoff' => Fixed => '0.4' );
      $formfiller->add_filler( 'isPValue' => Fixed => 'yes' );
      $formfiller->add_filler( 'whatIsBetter' => Fixed => 'higher' );
      $formfiller->add_filler( 'goSizes' => Fixed => '0' );
      $formfiller->add_filler( 'measure' => Fixed => 'SIMREL' );
      $formfiller->fill_form($agent->current_form);

   my $request = $agent->click("startRevigo");
      print $request->as_string; 
```

但是我收到以下错误消息*“错误发布[http://revigo.irb.hr/revigo.jsp：revigo.mechanize.pm](http://revigo.irb.hr/revigo.jsp)第 21 行的内部服务器错误”* 有人可以帮我解决问题吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:39:22.250

`goSizes`必须具有有效值，例如`0`. [您可以通过使用Firebug](http://getfirebug.com/)自己轻松发现这一点。

# linux - 删除包含日期和另一个表达式的行

> ID：11201119
> 
> 赞同：1
> 
> 时间：2012-06-26T05:18:12.550
> 
> 标签：linux, sed

对不起我的简单问题。但我正在寻找一种方法来删除文件中以包含 2 或 3 个大写字母并且还包含日期的字符串开头的行。例如：

```
ABC/ Something comes here, 29/1/2001. 
```

在编写此类脚本的第一步中，我使用此代码查找并显示包含日期的行，但它不起作用。

```
sed -e 's/[0-9]+\/[0-9]+\/[0-9]+//' myfile.txt 
```

这段代码有什么问题，我应该如何改变它来做我想做的事？

最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:26:44.770

```
sed -r -e '/[A-Z]+.*[0-9]+\/[0-9]+\/[0-9]+/p;d' # on Mac OSX: sed -E -e ... 
```

然后只是删除这些行做类似的事情......

```
'/[A-Z]+.*[0-9]+\/[0-9]+\/[0-9]+/d' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T21:30:08.627

我会尝试：

```
sed -e '/^[A-Z]\{2,3\}.*[0-9]\{1,2\}\/[0-9]\{1,2\}\/[0-9]\{4\}/ d' input-file 
```

解释：

```
^                  Match at the beginning of the pattern.
[A-Z]\{2,3\}       Match two or three uppercase ASCII letters.
.*                 Match anything.
[0-9]\{1,2\}\/     Match the day, one or two digits, and the separator.
[0-9]\{1,2\}\/     Same match for the month.
[0-9]\{4\}         Match four digits for the date.
d                  If previous regexp matched, delete the line. 
```

# css - 将子样式添加到父项

> ID：11201120
> 
> 赞同：0
> 
> 时间：2012-06-26T05:18:12.733
> 
> 标签：css, styles, parent

为什么这个 css 会为页面上的所有表格添加填充，而不仅仅是带有 set 类的表格：

CSS：

```
.tableclass th, tr, td {padding: 8px;} 
```

HTML：

```
<table class="tableclass>
<th>Header Text</th>
<tr>
<td>Content</td>
<tr>
</table> 
```

我在页面上有 3 个表，它们都有 8px 填充——我只想要 tableclass 表中的 8px 填充。就像我为所有表格元素设置了一个全局填充？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:18:57.677

这个，

```
.tableclass th, tr, td {padding: 8px;} 
```

和这个一样

```
.tableclass th {padding: 8px;}
tr {padding: 8px;}
td {padding: 8px;} 
```

因此，您要为下面的所有元素添加 8px 填充`th`，`.tableclass`然后再为所有`tr`元素和所有`td`元素添加 8px 填充。

正如 Rohit Azid 建议的那样，您应该这样做：

```
.tableclass tr,
.tableclass th,
.tableclass td {
  padding: 8px;
} 
```

（上面我假设你想在 table-row 元素上填充。如果我假设不好，我想你知道该怎么做）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:24:19.957

您能否检查所有 html 标记是否正确关闭。您也可以尝试为其他两个表设置不同的 css 类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:04:51.790

嘿，现在习惯 了这个表的**css**，就像这样

```
.tableclass th, .tableclass tr td{
padding:8px;
} 
```

现在，如果您想填充而不是像这样在表格中应用此类

```
<table class="tableclass">
<th>Header Text</th>
<tr>
<td>Content</td>
<tr>
</table> 
```

**现场演示** [http://jsfiddle.net/DEYy6/](http://jsfiddle.net/DEYy6/)

# wcf - iis 8 windows 8 Beta中的WCF服务

> ID：11201121
> 
> 赞同：0
> 
> 时间：2012-06-26T05:18:13.897
> 
> 标签：wcf, windows-8, iis-8

我们有一个在 IIS 7 中运行良好的 WCF 服务。我们正在迁移到 Windows 8 服务器。我们在 IIS 8 中部署了 WCF 服务。浏览 SVC 文件时出现以下配置错误

> 定义了一个重复的“system.web.extensions/scripting/scriptResourceHandler”部分

错误页面中的配置源部分

```
<sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
<section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
<sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:36:46.313

这是在 4.0 应用程序池中使用 2.0 的配置文件时引起的，如果不需要，您可以从 web.config 中删除所有这些部分，或者将应用程序池更改为 2.0

# c - 如何确定是否抛出了 Lua 错误？

> ID：11201123
> 
> 赞同：1
> 
> 时间：2012-06-26T05:18:19.530
> 
> 标签：c, lua

我已经在我的 C 程序中嵌入了一个 Lua 解释器，并且我有一个简单的问题，我似乎无法找到一个明确的答案。

假设我有一个暴露给 Lua 的 C 函数，如下所示：

```
static int calculate_value(lua_State *L) 
{
    double x = luaL_checknumber(L, 1);
    return 0;
} 
```

如何确定（在 C 中，在调用此函数之后）Lua 在调用 luaL_checknumber 时抛出错误？堆栈顶部是否有错误消息？是否有其他指示错误已被抛出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:46:58.207

一般来说，你不会。抛出错误的 Lua 函数使用`setjmp/longjmp`（或编译为 C++ 时的异常）将控制权返回给调用 Lua 运行时。错误将呈现给*调用*您的函数的 Lua`calculate_value`函数。

如果你想以不同的方式处理参数错误，你不能使用 Lua 的`luaL_check*`函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:17:43.577

如果该函数是通过 Lua 调用的，则可以使用`pall`. 或者`lua_pcall`在运行调用该函数的 Lua 脚本之前使用。

# c++ - 使用 MFC 的 YouTube 下载器

> ID：11201124
> 
> 赞同：0
> 
> 时间：2012-06-26T05:18:27.617
> 
> 标签：c++, visual-studio-2010, visual-c++, dll, mfc

我正在 MFC 中创建一个 YouTube 下载器类型的应用程序。
我有一个文本框，并添加按钮和一个`CListCtrl`.
我的问题是如何`CListCtrl`在单击添加按钮时添加文本框 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:26:05.310

您可能已经通过 DDX 将所有控件绑定到变量（通过值的文本框，通过控件的 clistctrl）。您的代码可能如下所示：

```
void CYouTubeDialog::DoDataExchange(CDataExchange* pDX)
{
    CDialog::DoDataExchange(pDX);
    DDX_Text(pDX, IDC_URLTEXTBOX, m_strURL);
    DDX_Control(pDX, IDC_URLLIST, m_ListCtrl);
} 
```

在此处阅读有关 DDX 的更多信息：http: [//msdn.microsoft.com/en-us/library/xwz5tb1x%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/xwz5tb1x%28v=vs.80%29.aspx)

通过消息映射功能单击“添加”按钮会触发一个方法。

```
BEGIN_MESSAGE_MAP(CYouTubeDialog, CDialog)
    ON_BN_CLICKED(IDC_ADDBUTTON, OnBnClickedAdd)
END_MESSAGE_MAP( ) 
```

在此处阅读有关消息映射的更多信息：http: [//msdn.microsoft.com/en-us/library/0x0cx6b1%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/0x0cx6b1%28v=vs.80%29.aspx)

此方法触发将文本编辑的内容添加到列表 ctrl 并清除内容：

```
CYouTubeDialog::OnBnClickedAdd()
{
    UpdateData(true);
    m_ListCtrl.InsertItem(0, m_strURL);  
    m_strURL.Empty();
    UpdateData(false);
} 
```

我不知道您的 ListCtrl 看起来如何（列等），您可以在此处阅读有关它们的更多信息：http: [//msdn.microsoft.com/en-us/library/bycfwcsh%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/bycfwcsh%28v=vs.80%29.aspx)

我希望这有帮助！祝你好运！

# android - 如何使用从 SharedPreferences 检索到的字符串

> ID：11201125
> 
> 赞同：0
> 
> 时间：2012-06-26T05:18:32.740
> 
> 标签：android, string, compare, sharedpreferences

我有几个我的 PreferenceActivity 显示的 ListPreferences。从启动此活动的类中，我监听 SharedPreferences 上的任何更改并使用 getString(String key, String default) 来获取所选选项。

当我检索这个字符串时，我需要根据它是什么字符串来执行某些操作。但是，我将如何使用字符串。如果它是一个 int，我可以使用 switch case，但我该怎么处理字符串？

除了使用 if-else 和使用 String.equals 来比较两个字符串之外，还有其他方法吗？或者有没有办法检索选定的位置而不是选定的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:27:20.167

您可以将所有`String`s`HashMap`连同相应`int`的值一起存储到 a 中，然后`switch`在`int`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:46:44.153

```
 int k = 0;
    String i = "Namratha"; // replace the value from Shared Preference
    try {
        k = Integer.parseInt(i);
    } catch (Exception e) {
        Log.v("Exception**********", e.getMessage());
    } 
```

看看值是否是**字符串**，它会**抛出异常**并去**catch 块**，这样你就可以从偏好中理解 calue 是 String .. 你是否相应地在 catch 块内填充..

否则，如果值是**int然后在****try block**中做你的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T05:54:10.243

如果您必须有一个表示位置的 int，您可以使用 String 数组和 Arrays.binarySearch 方法

```
private static final String[] VALUES = { "a", "b", "c", "d", "e" };

public void processSelection( String selectedValue ) {  
    int pos = Arrays.binarySearch( VALUES, selectedValue );

    switch (pos) {
    case 0:
        ... 
    break;

    default:
        break;
    }
} 
```

# hadoop - 从 hbase 表映射减少特定区域数据

> ID：11201129
> 
> 赞同：0
> 
> 时间：2012-06-26T05:18:45.680
> 
> 标签：hadoop, hbase

我是 Hadoop 和 Hbase 的新手。我想知道是否有一种方法可以在 hbase 表中的某些选定数据区域上映射减少。我的意思是有没有一种方法可以指定 Map reduce 应该采用的表的哪些区域，而不是采用完整的表并根据区域数拆分任务。一些代码片段会有很大帮助。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:02:05.187

您可以设置处理的开始行和结束行。如果您这样做一次 - 您可以在 HBase Web UI 中获取该区域的开始和停止键。
它可以通过使用接受 scan 作为参数的 TableMapReduceUtil 来完成。在内部（我认为）它调用 setStartRow 和 setStopRow 到 TableInputFormat）
在这里您可以找到示例：
[http](http://massapi.com/class/org/apache/hadoop/mapreduce/Job.java.html) ://massapi.com/class/org/apache/hadoop/mapreduce/Job.java.html （在页面中搜索 setStartRow） .

# jquery - 图片上传类似于 ebay 图片上传功能

> ID：11201132
> 
> 赞同：0
> 
> 时间：2012-06-26T05:18:57.463
> 
> 标签：jquery, image-uploading

我想设置 ebay.com 网站中使用的图片上传插件。我想下载这个插件。我已经搜索过了，但还没有。其他 oplugins 没有这一切功能。如果所有功能都有可用的插件。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:35:36.027

您可以`uploadify`用于图像上传。这里是链接[http://www.uploadify.com](http://www.uploadify.com)您也可以在那里查看演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-11T21:56:37.177

在 2017 年，我发现这是一个很好的解决方案：

[jQuery 文件上传](https://blueimp.github.io/jQuery-File-Upload/)

# android - 如何将位图绘制为按钮？

> ID：11201136
> 
> 赞同：2
> 
> 时间：2012-06-26T05:19:24.680
> 
> 标签：android, android-custom-view, android-button

我正在尝试绘制一个由位图组成的按钮，例如

```
b[j] = (Button) sm.findViewById(R.drawable.picture); 
```

但我无法使用该`draw(Canvas canvas)`方法显示此图片。

有没有办法像位图一样显示按钮

```
canvas.drawBitmap(bitmap,..,..,null); 
```

我实际上不想从 xml 或`onCreate()`方法内部显示按钮。

有没有办法可以从其他任何地方显示它？？？？

谢谢！！！！

我会在这里发布我的程序，请帮忙！！！

已经创建了四个类...

在此处输入代码

```
**class 1:-**

package game.pack;
import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.view.WindowManager;

public class Sushitap extends Activity {

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(new SushiMain(this));

   }
}

**class 2:-**

 package game.pack;
import android.content.Context;
import android.graphics.*;
import android.util.DisplayMetrics;
import android.view.*;
import android.widget.Button;

public class SushiMain extends SurfaceView implements SurfaceHolder.Callback {

    Canvas canvas;
    Tower s;
    SushiThread st;
    int height;
    int width;

    public SushiMain(Context context) {

        super(context);
        getHolder().addCallback(this);
        DisplayMetrics met = context.getResources().getDisplayMetrics();
        height=met.heightPixels;
        width= met.widthPixels;

        int x=width;

                s = new Tower(context,this,x,260);

        st = new SushiThread(getHolder(), this);
        setFocusable(true);

    }

    public void surfaceChanged(SurfaceHolder sh, int format, int height,
            int width) {
        getResources();
    }

    public void surfaceCreated(SurfaceHolder sh) {

        st.setRunning(true);
        st.start();

    }

    public void surfaceDestroyed(SurfaceHolder holder) {

            boolean retry = true;
          while (retry) {
           try {
            st.join();
            retry = false;
           } catch (InterruptedException e) {

           }
          }

         }

        public void render(Canvas canvas) {

                            s.onDraw(canvas);
}

}

**class 3:-**

package game.pack;

import android.graphics.*;
import android.view.*;

public class SushiThread extends Thread{

    private SurfaceHolder sh;
    private SushiMain sm;
    Tower t;
    private boolean running;

    public SushiThread(SurfaceHolder sh,SushiMain sm)
    {
        super();

        this.sh=sh;
        this.sm=sm;

    }

    public void run()
    {
        Canvas canvas;

        while(running)
        {

            canvas=null;

            try{

                canvas=this.sh.lockCanvas();

                synchronized (sh) {

                    this.sm.render(canvas);
                }

            }
            finally{

                if(canvas!=null){

                    sh.unlockCanvasAndPost(canvas);

                }

            }

        }

    }

    public void setRunning(boolean running) {
        this.running=running;

    }

**class 4**

package game.pack;

import java.util.Random;

import android.content.Context;
import android.graphics.*;
import android.view.View;
import android.widget.Button;
import android.widget.ImageButton;

public class Tower extends View

{
    int x,y;
    ImageButton sushiArray; 
    Canvas canvas; 

    public Tower(Context c,SushiMain mainObj, int x, int y) {

        super(c);
        this.x = x;
        this.y = y;

    }   

        protected void onDraw(Canvas canvas) {

            sushiArray.draw(canvas);

    }

}

please let me know how to implement my imageButton.,,thank you!!! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:05:08.010

(1)您可以使用 ImageButton 来完成您的 moto ，如下所示：

```
 <ImageButton android:id="@+id/theImageButton"
            android:layout_height="wrap_content" android:layout_width="wrap_content" 
            android:layout_gravity="center"
            android:background="@drawable/ic_your_image" /> 
```

这里的“ic_your_image”是您要显示为按钮的图像。

(2) 或者，您可以简单地使用图像视图并通过在其上设置 onClickListener 使其可点击。

(3) 您也可以通过编程方式进行操作：

```
 View linearLayout =  findViewById(R.id.your_main_xml);

            ImageButton newButton=new ImageButton(this);
            newButton.setBackgroundDrawable(getApplication().getResources().getDrawable(R.drawable.your_image)); 
            newButton.setId(5);
            noLisnText.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));
            noLisnText.setGravity(Gravity.CENTER_HORIZONTAL|Gravity.CENTER_VERTICAL);
            ((LinearLayout) linearLayout).addView(newButton); 
```

在图像视图中设置位图（我不确定，你必须测试它）：

```
 View linearLayout =  findViewById(R.id.your_main_xml);
            ImageView newImage=new ImageView(this);
            newImage.setId(5);
            newImage.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
            ((LinearLayout) linearLayout).addView(newImage);
            newImage.setImageBitmap(bitmap); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:52:14.710

使用[ImageButton](http://developer.android.com/reference/android/widget/ImageButton.html)在按钮上显示图像而不是文本。

# sql-server - 获取 SQL Server 中两列的百分比差异

> ID：11201142
> 
> 赞同：1
> 
> 时间：2012-06-26T05:19:49.423
> 
> 标签：sql-server, sql-server-2008

我正在根据给定的月份/年份选择列的计数。与上个月相比，我需要返回该计数的百分比差异。

这是我到目前为止所拥有的。这将返回我需要的前半部分（当前月份计数）。

```
select 
    o.productName, COUNT(*) as totalSales 
from 
    order o
inner join 
    product p on o.productID=p.productID
where 
    datePart(month, dateTimeReceived) = 2
    and datePart(year, dateTimeReceived) = 2012         
group by 
    o.productName
order by 
    totalSales desc 
```

所以这个的输出如下

```
Widget 1  - 200 sold
Widget 2  - 190 sold 
```

同样，我还想包含第三列，它记录了上个月的百分比变化。

此外，关于我如何选择，我并没有感到温暖的模糊，`datePart`所以如果你有关于如何更好地接近它的建议，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:26:32.177

有多种方法可以产生您想要的结果。这个使用 CTE 计算两个月的总数，然后将其连接回自身。

```
With cte as 
(
SELECT 

       o.productname, 
       Datepart(month, datetimereceived) m,
       Count(*) AS totalSales 
FROM   order o 
       INNER JOIN product p 
               ON o.productid = p.productid 
WHERE  Datepart(month, datetimereceived) in ( 2, 2-1) 
       AND Datepart(year, datetimereceived) = 2012 
GROUP  BY o.productname, 
       Datepart(month, datetimereceived) 
ORDER  BY totalsales DESC )
SELECT 
      a.productName ,
      a.totalSales,
      a.totalSales / b.totalSales percentage_of_prevous_month

FROM 
      cte a 
      INNER JOIN cte b 
      ON a.productname = b.productname
         and a.month = b.month - 1 
```

There are some pieces missing. You'll probably actually need to do something like to get a non zero value, if the division results in a number < 0

```
cast(a.totalSales as decimal)/ cast( b.totalSales  as decimal) 
```

Also the using the Month input like this will cause problems if your input is January. So you're better of normalizing the datetimerecived to the first of the month

e.g.

Modified SELECT and Group by

```
 CONVERT(VARCHAR(25),DATEADD(dd,-(DAY(@mydate)-1),datetimerecieved),101) m 
```

Modified WHERE

```
 CONVERT(VARCHAR(25),DATEADD(dd,-(DAY(datetimerecieved)-1),datetimerecieved),101)
                  in ( '2/1/2012', DateAdd(m,-1,'2/1/2012')) 
```

Modified ON

```
a.M > b.M 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:20:24.203

EDITED: Didn't read the bit about the percentage column. This returns 4 columns, productName, currentMonth, previousMonth and percentChange. The ISNULL function is there to prevent "divide by zero" errors. You could adapt this into a proc and just pass in the CurrentYear & CurrentMonth parameters, or you could pass in a single datetime parameter and let it work out the month/year from that, or even use GETDATE() and not pass any parameters.

```
declare @CurrentYear int,
    @CurrentMonth int,
    @previousYear int,
    @previousMonth int

set @CurrentYear = 2012
set @CurrentMonth = 2

if @CurrentMonth = 1 begin
    set @previousMonth = 12
    set @previousYear = @CurrentYear - 1
end else begin
    set @previousMonth = @CurrentMonth - 1
    set @previousYear = @CurrentYear
end

select  productName,
    (select COUNT(*) 
    from    [order] o 
    where   DATEPART(year, dateTimeReceived) = @CurrentYear
    and DATEPART(month, dateTimeReceived) = @CurrentMonth
    and o.productid = p.productid) as currentMonth,
    (select COUNT(*) 
    from    [order] o 
    where   DATEPART(year, dateTimeReceived) = @previousYear
    and DATEPART(month, dateTimeReceived) = @previousMonth
    and o.productid = p.productid) as previousMonth,
    convert(decimal(10, 2), 100*(
    (select COUNT(*) 
    from    [order] o 
    where   DATEPART(year, dateTimeReceived) = @CurrentYear
    and DATEPART(month, dateTimeReceived) = @CurrentMonth
    and o.productid = p.productid) 
    -
    (select COUNT(*) 
    from    [order] o 
    where   DATEPART(year, dateTimeReceived) = @previousYear
    and DATEPART(month, dateTimeReceived) = @previousMonth
    and o.productid = p.productid)
    /
    NULLIF(
    (select COUNT(*) 
    from    [order] o 
    where   DATEPART(year, dateTimeReceived) = @previousYear
    and DATEPART(month, dateTimeReceived) = @previousMonth
    and o.productid = p.productid), 0))) as percentChange
from    product p 
```

# python - 在python中使用本机文件管理器复制文件

> ID：11201151
> 
> 赞同：2
> 
> 时间：2012-06-26T05:20:38.123
> 
> 标签：python, copy, cross-platform, pywin32, win32com

好的，所以我正在开发一个应用程序，它允许用户在菜单中选择文件对象，并允许他们将所述选择复制到另一个位置。到目前为止，我已经设法使用 pywin32 模块来允许我使用 Windows 的本机文件复制器来复制文件。

它的代码：

```
from win32com.shell import shell, shellcon
srcstr = chr( 0 ).join( [ file[0] for file in files ] )
deststr = chr( 0 ).join( [ file[1] for file in files ] )
shell.SHFileOperation(
    ( 0, shellcon.FO_COPY, srcstr, deststr, shellcon.FOF_MULTIDESTFILES, None, None )
) 
```

这是在 Windows 下复制的好方法，但我想知道是否有办法在 Mac 和/或 Linux 下实现相同的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:25:54.760

你考虑过shutil（[http://docs.python.org/library/shutil.html](http://docs.python.org/library/shutil.html)）吗？该模块提供了这种高级文件操作，同时保持与操作系统无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:00:14.940

在 Mac 上执行此操作的另一种方法是通过 PyObjC 使用 NSWorkspace。像这样：

```
from Cocoa import *
ws = NSWorkspace.sharedWorkspace()
ws.performFileOperation_source_destination_files_tag_(NSWorkspaceCopyOperation,
    '/dirname/of/source', '/dest/directory', ['basenameOfSource'], None) 
```

问题是这实际上并不能保证与 Finder 做同样的事情。对于大副本，它通常会，但对于较小的副本，可能根本没有反馈。

另外，如果您想获得任何反馈，您必须存储 ret[1] 并注册 NSWorkspace 通知 NSWorkspaceDidPerformFileOperationNotification，这意味着您需要一个运行循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T05:39:57.680

在 Mac 上，您需要编写 Finder 脚本。

一种方法是使用 ScriptingBridge。首先：

```
import ScriptingBridge
f = ScriptingBridge.SBApplication.applicationWithBundleIdentifier_("com.apple.Finder") 
```

然后……好吧，启动 AppleScript Editor，查看 Finder 的字典，并弄清楚如何将 AppleScript 翻译成 Python+ScriptingBridge，如果您有任何问题，请再回来询问。但这里有一些提示：

诀窍是从路径到 Finder 引用。而且没有简单的方法可以直接到达那里。相反，您必须从 startupDisk 开始，在其上调用文件夹（），过滤 name == path 的第一个组件，然后重复。请参阅[http://developer.apple.com/library/mac/#samplecode/ScriptingBridgeFinder/Listings/Controller_m.html](http://developer.apple.com/library/mac/#samplecode/ScriptingBridgeFinder/Listings/Controller_m.html)（它是用 Objective C 而不是 Python 编写的，但 ScriptingBridge 部分很容易翻译）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T05:40:15.030

该解决方案可能是特定于操作系统/桌面的；例如在 GNOME 上，您需要使用 DBus 与 Nautilus 进行通信。

有人询问文档，显然没有：[Where to find information about Nautilus D-Bus interface](https://stackoverflow.com/questions/6997680/where-to-find-information-about-nautilus-d-bus-interface)

并且此线程表明您需要的功能可能存在于当前版本的 Nautilus 中： [https ://askubuntu.com/questions/52093/how-can-i-initiate-nautilus-file-operations-from-the-command-线](https://askubuntu.com/questions/52093/how-can-i-initiate-nautilus-file-operations-from-the-command-line)

但要支持 OS X、KDE ​​等，您可能必须为每个工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T05:52:56.833

我不羡慕这项任务。为了实现这一点，您并不是针对“Linux”，而是针对桌面环境 X、Y、Z 等（以及每个环境的不同版本）。这不仅仅是 KDE 与 Gnome，它是 KDE 3/4 与 Gnome 2/3 与 Enlightment 与 Xfce4 与 Blackbox 与 TWM 等。

您可以使用 GTK 或 WXwidgets 之类的库获得跨桌面文件选择器，但我认为其中任何一个都没有用于复制操作的进度小部件（您必须自己编写代码）并且它们看起来不是“原生“ 任何一个。

一般来说，虽然我不认为本机复制对话框真的是大多数 linux 用户会关心的东西。我们习惯了看起来不同的程序，我们学会了与之共存。

无论如何，我推荐[GtkProgressBar](http://developer.gnome.org/gtk/2.24/GtkProgressBar.html)或[wxProgressDialog](http://docs.wxwidgets.org/2.8/wx_wxprogressdialog.html)，因为这两个库都应该很容易完成这项任务，并且两个库都有 python 绑定。

# jquery - 关于使用 jquery 删除以前的 div

> ID：11201152
> 
> 赞同：0
> 
> 时间：2012-06-26T05:20:39.100
> 
> 标签：jquery

我有问题，即如何选择以前的 div 代码：-

```
if($i > $start_from){
                echo "<div id=\"blog$i\"><h1 style=\"padding-top:30px; font-size:14px;\" id=\"shareContent\"><a target=\"_blank\" href=\"$url\">$title</a><br /></h1>
                $desc
                <br />
                <p><em>hahaquotes, DATED: $date, URL: <a target=\"_blank\" href=\"$url\">$url</a></em></p>
                <div class=\"applyLink\" style=\"width:720px; padding-right:12px; margin-top:20px;\">
                <p><a target=\"_blank\" href=\"$url\">READ</a><span style=\"float:right; cursor:pointer;\"><a class=\"delete\">DELETE</a></span></p>
                </div></div>";
                if($i == $start_from + 4) break; 
                }
                } 
```

这是我的代码当我单击删除时，整个 div 应该被删除，div 的 id 是动态创建的，我如何使用 jquery 实现这一点。请帮助我提前谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T05:29:50.650

`delete`使用类作为选择器将点击处理程序附加到锚点。在处理程序`this`中将引用单击的元素，然后您可以从那里遍历到要删除的内容，而无需知道其 ID：

```
$("a.delete").click(function() {
    $(this).closest("div").closest("div").remove();
}); 
```

该[`.closest()`方法](http://api.jquery.com/closest/)向上遍历 DOM 以找到与提供的选择器匹配的最近的祖先。在您的特定 html 结构中，您要查找的 div 是第二接近的，所以我只是将两个调用链接`.closest()`在一起。

如果您修改 html 以提供要删除特定类的 div，例如“条目”，则可以简化此操作，因为您可以通过一次调用遍历它，`.closest()`如下所示：

```
echo "<div id=\"blog$i\" class=\"entry\">(etc.)"

$("a.delete").click(function() {
    $(this).closest("div.entry").remove();
}); 
```

如果你有几个这样的结构，那么每个“删除”链接只会删除它所属的 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:25:50.027

您可以将选择器用作

```
 $('div[id$="blog"]') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T05:31:13.227

假设父 div 有`id`属性而其他`div`没有`id`（根据你的例子）。
您可以使用

```
$(".delete").click(function() {
    $(this).parents("div[id]").remove();
 }): 
```

**编辑：**
使用`.closest()`代替`.parents()`会更好更有效。

```
$(".delete").click(function() {
    $(this).closest("div[id]").remove();
 }): 
```

感谢**nnnnnn**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T05:36:07.137

您的代码将是这样的：-

jQuery:-

```
$(document).ready(function(){
    $('a.delete').click(function(){
        $(this).closest('.parentPanel').remove();
    });

}); 
```

*编辑：更改`parentUntill()`为`closest()`通知的队友中的少数人，我同意`parentUntill()`在匹配的选择器下方选择选择器 1step。** **谢谢 nnnnnn**

更改后的代码：- 我添加了一个名为`parentPanel`

```
if($i > $start_from){
            echo "<div id=\"blog$i\" class=\"parentPanel\"><h1 style=\"padding-top:30px; font-size:14px;\" id=\"shareContent\"><a target=\"_blank\" href=\"$url\">$title</a><br /></h1>
            $desc
            <br />
            <p><em>hahaquotes, DATED: $date, URL: <a target=\"_blank\" href=\"$url\">$url</a></em></p>
            <div class=\"applyLink\" style=\"width:720px; padding-right:12px; margin-top:20px;\">
            <p><a target=\"_blank\" href=\"$url\">READ</a><span style=\"float:right; cursor:pointer;\"><a class=\"delete\">DELETE</a></span></p>
            </div></div>";
            if($i == $start_from + 4) break; 
            }
            } 
```

# android - 使用jQuery的自动完成文本框中的滚动条？

> ID：11201155
> 
> 赞同：0
> 
> 时间：2012-06-26T05:20:56.653
> 
> 标签：android, jquery, cordova

我从这个[链接在](http://jqueryui.com/demos/autocomplete/maxheight.html)**jQuery**中使用了自动完成功能。

在普通浏览器中，我得到了滚动条，但在我的 PhoneGap 应用程序中，我没有得到滚动条。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:01:09.887

您提到的演示是针对 jQuery UI 的，它无法按预期工作，因为它在移动设备中，您需要使用为移动浏览器制作的自动完成功能。

参考这篇文章：

[让 jQueryUi 自动完成功能与 jQueryMobile 一起工作](https://stackoverflow.com/questions/5994865/getting-jqueryui-autocomplete-to-work-with-jquerymobile)

或者这些文章：

[http://www.andymatthews.net/code/autocomplete/](http://www.andymatthews.net/code/autocomplete/)

[http://forum.jquery.com/topic/autocomplete-widget-with-jquery-mobile](http://forum.jquery.com/topic/autocomplete-widget-with-jquery-mobile)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:17:22.817

给自动完成建议框一些高度，并将此样式添加到建议框。

```
-webkit-overflow-scrolling: touch; 
```

# gwt - 如何使用 gwt 中的客户端包在按钮上设置图像

> ID：11201158
> 
> 赞同：2
> 
> 时间：2012-06-26T05:21:04.760
> 
> 标签：gwt

我在 gwt 中使用客户端包。在标签上使用客户端包设置图像，打开 pdf 和文本文件，但如何在按钮 ar 按钮中设置图像。谢谢你的回复....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:55:36.823

如果您使用的是[com.google.gwt.user.client.ui.CustomButton](http://code.google.com/p/google-web-toolkit/source/browse/tags/2.4.0/user/src/com/google/gwt/user/client/ui/CustomButton.java) ，则在按钮上使用图像很容易。

创建带有图像的按钮：

```
CustomButton button = new PushButton(new Image(resources.logo1())); 
```

要更改图像，请在 Button 的正面设置一个新图像：

```
button.getUpFace().setImage(new Image(resources.logo2())); 
```

# ios - 关于在基于导航的程序中从视图访问字符串到其先前视图

> ID：11201162
> 
> 赞同：0
> 
> 时间：2012-06-26T05:21:09.490
> 
> 标签：ios

我创建了程序，在该程序中，我们从表格视图导航到选择一行表格视图的简单视图。我在简单视图上制作了四个复选框。我们可以轻松地标记它们。然后我们存储与标记的复选框相对应的信息在字符串中。我想在表格视图中访问这个字符串以在单元格上显示它。我没有使用对象获取它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:35:08.150

一种常见的方法是将对 tableview 控制器的引用存储在简单（详细）视图控制器的属性中。您将在实例化并将简单视图控制器推送到导航堆栈时设置此属性的值。选中复选框后，将字符串保存到 tableview 控制器上的属性中，然后再导航回 tableview。

粗略地说，您的代码将如下所示：

在您的表视图控制器 .h 中：

```
@property (strong, nonatomic) NSString *checkBoxValue; 
```

在您的表视图控制器 .m 中：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    SimpleViewController *simpleVC = [[SimpleViewController alloc] init];
    simpleVC.tableViewController = self;
    [self.navigationController pushViewController:simpleVC animated:YES];
} 
```

在您的简单视图控制器 .h 中：

```
@property (strong, nonatomic) YourTableViewController *tableViewController; 
```

在您的简单视图控制器 .m 中：

```
// after checkboxes are selected...

self.tableViewController.checkBoxValue = @"Value goes here"; 
```

然后，当您导航回表格视图控制器时，您可以对`checkboxValue`属性中的值执行任何您需要的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:52:30.847

您应该使用委托方法。在这种情况下，它是 Objective-C 中常用的模式。我已经回答了这个[SO](https://stackoverflow.com/questions/8606674/uimodaltransitionstylepartialcurl-doesnt-get-back-to-previous-state-not-dismi/8607949#8607949)中的一个例子。如果您之后仍有疑问，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:49:10.793

您可以为此使用自定义委托。在第二类中创建一个委托。当您再次来到第一类时，将自动调用委托方法，不要忘记在第一类中实现委托。

# c# - RavenDB 中的索引过多

> ID：11201163
> 
> 赞同：9
> 
> 时间：2012-06-26T05:21:25.427
> 
> 标签：c#, performance, nosql, ravendb

是否有公式/估计/感觉根据文档种类的数量、每个文档的字段数以及它们之间的关系数向我们展示 RavenDB 数据库中的最佳索引数量是多少？

补充笔记：

据我了解（第一个）我们在 RavenDB 中查询索引，而不是文档和（第二个）索引就像物化视图，因此它们可能会花费很多。我需要知道有多少索引会损害 RavenDB 在更新它们时的性能并使延迟太大而无法忽略？

由于 Raven/MaxNumberOfParallelIndexTasks 设置为当前机器中的处理器数量，这是否意味着其他索引的索引过程会阻塞，直到当前索引任务结束？或者它们是会一次又一次运行的部分更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T06:57:34.760

Kaveh，一般来说，我们更喜欢较少数量的索引，因为索引确实具有与它们相关的非平凡成本。也就是说，它们不需要花费`much`，尤其是因为它们是在后台构建的。

我们有很多客户使用几十个索引运行，我们也有一些客户使用数百个索引。

MaxNumberOfParallelIndexTasks 控制我们并行更新多少索引，但它的工作方式和原因解释起来*有点*复杂。从您的角度来看，它并不真正适用，因为与 MaxNumberOfParallelIndexTasks 一起，我们还考虑了当前系统负载、io 成本等因素。在大量索引中，一些索引会在其他索引构建时等待，是的，但这受到一系列限制，您不可能将其视为现实世界中的问题。

# java - 如何将 vim 转换为 java IDE？

> ID：11201164
> 
> 赞同：1
> 
> 时间：2012-06-26T05:21:38.267
> 
> 标签：java, eclipse, vim

我正在使用 Eclipse。我发现它很强大，但是在我的项目中，它会在没有警告的情况下冻结或关闭。

有人建议我使用 vim，我想尝试一下。是否有任何 vim 插件可用于使该工具像 Eclipse 一样更加高效和易于使用？我试过 Eclim，但它和 Eclipse 一样需要内存。

我使用 Java 进行产品开发。

我正在寻找的功能

*   代码完成
*   重构
*   项目视图
*   Java 和 HTML 模板
*   文件搜索
*   调试
*   Maven 集成

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T06:35:35.507

每个编程工具都有其优点和缺点。总的来说，Eclipse 也是用于大型项目的非常有用和简洁的工具。您应该尝试对其进行微调以使其性能更好。

试试[如何加速 Eclipse？](https://stackoverflow.com/questions/316265/tricks-to-speed-up-eclipse) 和谷歌它

至于 vim，坦率地说，不要试图让一个工具看起来像另一个，而是让自己适应这个工具。这样，您将使用它的所有优势。

例如，要使用vi，一开始很疯狂，但是一旦习惯了，就无法摆脱。Gedit 感觉就像婴儿的玩具 :)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T06:41:29.953

vim 不是 IDE。

它是一个文本编辑器，你可以得到一些插件来帮助你，但它根本不是和 IDE 一样，也无法与 Eclipse 竞争，因为它不是。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T07:40:51.037

与其他答案相呼应，没有办法将 Vim 变成一个严肃的 Java IDE。告诉你改用 Vim 的人要么不知道文本编辑器和 IDE 之间的区别，要么只是对你开了个玩笑。

制作 Java IDE 所需的所有功能或多或少都依赖于一个引擎，该引擎在您键入时*理解*和*检查*您的代码以及*集成*的Java 特定工具链的其他部分。这些在 Vim 中都不可用，它*只是*一个文本编辑器。它是最好的，但远非 IDE。

我想你可以使用 cscope/ctags 来导航你的代码，使用 JavaComplete 来完成全功能，但你可以完全忘记重构、调试和 maven 集成。

# objective-c - 连接外接键盘时支持命令、控制和箭头键

> ID：11201165
> 
> 赞同：2
> 
> 时间：2012-06-26T05:21:52.797
> 
> 标签：objective-c, ios, keyboard

我有一个 iOS 应用程序，我想做的就是在用户连接蓝牙键盘时为基本命令组合键提供更多支持，例如 command+a、command+s、command+x、command+v 和朋友。

我知道这是可能的。Textastic 等应用程序和许多其他编辑应用程序都支持这些功能。

我查看了 UIResponder（它似乎只被弹出菜单使用）、UIKeyInput、UITextInput[Delegate] 和其他 API 文档，但没有提及如何执行此操作。

使用 (BOOL)canPerformAction:(SEL)action withSender:(id)sender 很容易支持在 UIMenuController 中显示哪些选项。但是，连接蓝牙键盘时似乎不会调用此方法。所以我要么需要专门为键盘或其他东西实现另一种方法。

我现在怀疑可能是文本子系统负责执行这些操作。但是，我找不到任何文档！此外，执行操作时不会调用任何 UITextInput 委托方法。我几乎认为该解决方案是私有的，我需要专门询问 Apple 如何访问这些功能（我刚刚完成了）。

**更新：**

positionFromPosition:inDirection:offset: 是用于检测何时按下箭头键的方法。在 iOS 调用此方法后，它会调用 setSelectedText:。您需要解决其余的管道问题。

**更新 2：**

我能够回答我遇到的所有问题。请参阅标记的解决方案以获取答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T21:32:30.777

弄清楚了。我已经实现了 UIMenuController 方法来支持剪切、复制和粘贴。通过实现这些功能*并将*蓝牙键盘连接到物理设备，您将自动获得*基本*命令选项（a、c、x、v 和朋友）。你需要完全实现 UIMenuController UIResponderStandardEditActions。我想注意的是，在 iOS 模拟器中它*不会*触发命令（a、c、x、v 和朋友）动作。*只有*当蓝牙键盘连接到物理设备时，我才能观察到这些功能的工作——即使在模拟器中启用了“模拟硬件键盘”。

关于控制/选项键；当您完全实现 UITextInput 时，您还将获得使用箭头键、箭头键 + 控件、箭头键 + 选项等时的所有移动功能。查看 Apple 提供的 SimpleTextInput 示例代码文件，以更好地了解如何实现这一点.

话虽如此，您*无法*创建*自己的*键盘组合。如果我想要这些功能，Apple 要求我为其创建一张票，但我不...我真的不在乎支持他们提供的任何东西。因此，目前无法使用 Command+s（保存）等命令。

给你一个有趣的小故事；Apple 说我想要做的事情在 API 中是不可能的（使用 command+c、command+v 等）。我想这表明您对他们的技术专长有多大帮助。*非常*令人失望。

**更新：**

自 iOS 7 以来，Apple 已经使捕获任何键命令、esc 等变得微不足道。下面是一个如何捕获各种不同键的示例：

```
return @[[UIKeyCommand keyCommandWithInput:UIKeyInputEscape modifierFlags:0 action:@selector(escapeKeyPressed:)],
         [UIKeyCommand keyCommandWithInput:@"f" modifierFlags:UIKeyModifierCommand action:@selector(commandFindPressed:)],
         [UIKeyCommand keyCommandWithInput:@"s" modifierFlags:UIKeyModifierCommand action:@selector(commandSavePressed:)],
         [UIKeyCommand keyCommandWithInput:@"b" modifierFlags:UIKeyModifierControl action:@selector(controlBKeyPressed:)],
         [UIKeyCommand keyCommandWithInput:@"f" modifierFlags:UIKeyModifierControl action:@selector(controlFKeyPressed:)],
         [UIKeyCommand keyCommandWithInput:@"r" modifierFlags:UIKeyModifierControl action:@selector(controlRKeyPressed:)]
         ];
...

- (void)commandSavePressed:(UIKeyCommand *)keyCommand
{
    [self saveFile];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:31:53.407

不幸的是，没有办法用公共 API 来做到这一点。例如，我在 ipad 上使用无线键盘，所以我以前研究过这个。但是，如果您不介意使用选项键而不是命令键，则可以实施一种解决方法。

假设您正在创建应用程序的文本编辑器类型，您可以这样做：轮询每个键入的字符，并使用 switch 语句将其与某些“特殊功能字符”进行比较。当用户在按住选项时键入键时，会插入特殊字符（例如“、»、ü 等）。只需找到这些字符的 unicode 值，并在按下其中一个键时执行特定操作。另外，请注意除了选项键之外按住 shift 键如何输出不同的字符。

# events - 主干事件在父视图上触发

> ID：11201166
> 
> 赞同：0
> 
> 时间：2012-06-26T05:21:55.473
> 
> 标签：events, view, backbone.js

我是 Backbone.js 的新手，到目前为止我很喜欢它，我一直在使用 Require.js 来模块化整个项目。到目前为止一切顺利，但我确实在事件绑定方面遇到了一些问题。

基本上我想要做的是，当你第一次进入注册页面时，路由器将呈现 registerView。在注册视图中，您将看到一个链接，稍后我将添加更多按钮，一旦我得到这个工作。

单击链接时，我会启动 showLogin 事件并调用 showLogin 函数，并将登录视图呈现到 div (#login-container) 中。由于某种原因我不能使用`$(this.el).html(template(data));`。但是我通过使用 jquery 选择器将视图加载到正确的 div 中来解决它。有人可以向我解释为什么`$(this.el`不起作用`login.js`吗？

现在的主要问题是，当有人单击登录按钮时，我想触发另一个事件。我以为我可以在 loginView(Login.js) 中触发该事件，但该事件是在父视图 (Register.js) 中触发的。当我单击按钮时，javascript 控制台将打印：

```
Register.js Login Clicked 
```

由于我对这个新框架相当陌生，因此肯定有一些我忘记添加的东西，或者我做错了。我希望有更多经验的用户指出我的错误。有任何想法吗？

# 索引.html

```
<div class="container">
  <div id="content">
  </div>
</div> <!-- /container --> 
```

# 登录.html

```
<div id="signin">  
  <form action="">
    <fieldset>
      <legend>Login</legend>
      <input id="login" type="button" value="Login">
    </fieldset>
  </form>
</div> 
```

# 注册.html

```
<ul>
  <li id="login-li"><a id="showlogin">I already have an account</a></li>
</ul>
<div id="login-container">
</div> 
```

# 路由器.js

```
define([
  'jquery',
  'underscore', 
  'backbone',
  'views/register'

  ], function($, _, Backbone, registerView){
  var AppRouter = Backbone.Router.extend({

    routes: {
      "register": "registerView"
    },

    registerView: function() {
      registerView.render();
    }
  });

  return AppRouter;
}); 
```

# 登录.js

```
define([
  'jquery',
  'underscore',
  'backbone',
  'text!templates/login.html'
], function($, _, Backbone, loginTemplate){

  var loginView = Backbone.View.extend({
    el: $("#login-container"),
    initialize: function() {
      _.bindAll(this, 'render'); // fixes loss of context for 'this' within methods
    },

    events: {
      "click input#login":  "login"
    },

    render: function(){
      var data = {};
      var template = Handlebars.compile(loginTemplate);
      $("#login-container").html(template(data));

      #
      # Why the following code does not work like in register.js?
      # $(this.el).html(template(data));
      #

    }, 

    login: function() {
      console.log("Login.js Login Clicked");
    }

  });
  return new loginView;
}); 
```

# 注册.js

```
define([
  'jquery',
  'underscore',
  'backbone',
  'views/login',
  'views/signup',
  'text!templates/register.html'
], function($, _, Backbone, loginView, signupView, registerTemplate){

  var registerView = Backbone.View.extend({
    el: $("#content"),

    initialize: function() {
      _.bindAll(this, 'render');
    },

    events: {
      "click a#showlogin":  "showLogin",
      "click input#login": "login",
    },

    render: function(){
      var data = {};

      var template = Handlebars.compile(registerTemplate);
      $(this.el).html(template(data));
    },

    showLogin: function() {
      loginView.render();
    },

    login: function() {
      console.log("Register.js Login Clicked");
    }
  });
  return new registerView;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:39:02.053

`#login-container`在 DOM 树中有一个带有 id 的 DOM 元素（仅在*呈现*registerView 时添加）之前初始化 loginView ，所以事情自然会有点混乱。

为了纠正这种情况，您可以做的不是像这样在各自的模块中返回每个视图的实例`return new xView`，而是像这样返回“类” `return xView`，然后在需要时像这样初始化它们

```
showLogin: function() {
  (new loginView()).render();
} 
```

# html - 边距顶部在 IE 6 中不起作用

> ID：11201167
> 
> 赞同：0
> 
> 时间：2012-06-26T05:22:09.137
> 
> 标签：html, css, background

我的代码

```
<div id="header">
<div id="header_top">KIDS'<br>ZONE</div>
</div> 
```

css

```
#header{
        width:1024px;
    height:150px;
    background:url('../images/Orange.jpg');
    background-repeat:no-repeat;
    background-size:1024px 150px;
}
#header_top
{
    background:#842DCE;
    width:125px;
    height:70px;
    float:left;
    margin-left:50px;
    margin-top:-20px;
    color:white;
    text-align:center;
    font-family:"Times New Roman", Times, serif;
    font-size:25px;
    padding-top:5px;
    opacity:1;
    font-weight:bold;

} 
```

我在除 IE 之外的其他浏览器中的结果

![在此处输入图像描述](../Images/0ca568b997ee7cc1c9f5793830568e88.png)

在 IE 中

![在此处输入图像描述](../Images/6aec5ece9c9ef2a2c72e24d7d2d7ad3c.png)

可能很简单，但我很挣扎，请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T05:29:50.090

你应该认真地放弃对 IE6 的支持。根据他们的[IE6 Countdown](http://www.ie6countdown.com/)网站，甚至微软也在提倡这一点：

> 升级到较新版本的 Internet Explorer 有很多好处 - 提高速度、选项卡式浏览和更好的隐私设置等等。
> 
> 在过去的 10 年里，网络发生了巨大的变化。浏览器已经发展以适应新的 Web 技术，最新版本的 Internet Explorer 有助于保护您免受新的攻击和威胁。
> 
> 我们建议 Internet Explorer 6 用户升级到较新版本的 Internet Explorer，以获得更安全的浏览体验。

在某些时候，你真的只需要继续前进。现在很少有人明确支持 Netscape Navigator 或 Lynx 浏览器，或者使用 Fortran、BCPL 或 RCA1802 汇编语言编写代码。并且有充分的理由。

而且，如果您是仍然坚持使用 IE6 的组织之一，因为它“正常工作”（哈！），上面那个链接上的*教育*部分有一些资源可以帮助您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T05:38:35.883

CSS

```
 #header{background-color:#FF6600; height:150px; margin-top:100px; position:relative; overflow:visible;}
#header_top{width:100px; height:50px; position:absolute; top:-20px; left:25px; background-color:#CC0099;} 
```

HTML

```
 <div id="header">
         <div id="header_top"></div>
    </div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T05:40:02.550

将 position:absolute 分配给子元素

例如：

```
<style>
#header {width:220px; height:150px; background-color:blue; margin:100px; position:absolute}
#header_top {width:200px; height:130px; background-color:yellow; text-align:justify; margin-top:-50px; position:absolute}
</style> 
```

这里有一个链接供进一步参考:)[驯服 IE6 野兽的权威指南](http://stylisticweb.com/design-tutorials/15-ie6-bugs-and-simple-solutions)。 *如果可能，请停止支持 ie6 。*

# iphone - ISSUE 面临在 Twitter 上发布提要

> ID：11201168
> 
> 赞同：0
> 
> 时间：2012-06-26T05:22:11.417
> 
> 标签：iphone, ios, twitter

请帮助我，我被困在这里

我正在使用 twitter 引擎 api 将 twitter 集成到我的应用程序中，我已成功集成它并获得了时间线。

但是在提要发布期间，我收到以下错误..

请求 DEFC2D14-F4A6-4508-A990-ED4219FC2C5C 失败并出现错误：错误域 = HTTP 代码 = 401“操作无法完成。（HTTP 错误 401。）

我无法理解我做错了什么，知道吗？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:44:34.980

尝试这个。我使用了这个，这并没有给出任何错误。我希望它也能帮助你......

```
 self.tweetView = [[TWTweetComposeViewController alloc] init];
TWTweetComposeViewControllerCompletionHandler completionHandler=^(TWTweetComposeViewControllerResult result) 
{
};
[tweetView setCompletionHandler:completionHandler];
NSURL *url = [[NSURL alloc] initWithString:tweetURL.text];//in case u need to post a URL

[tweetView setInitialText:textView.text]; //custom text in the tweet
[tweetView addImage:[UIImage imageNamed:@"Twitter-icon-3.png"]]; //add image to post
[tweetView addURL:url];
[self presentModalViewController:tweetView animated:YES]; 
```

# youtube-api - Youtube 播放器 api，播放器未在 Opera 中加载

> ID：11201170
> 
> 赞同：1
> 
> 时间：2012-06-26T05:22:30.787
> 
> 标签：youtube-api

我想嵌入 youtube 播放器，并且还必须使用它的事件。它在 chrome 和 firefox 上运行良好，但播放器无法在 Opera 中加载。我希望它在 Opera 中工作。寻求您的帮助。

提前致谢。

我使用以下代码。

```
//Load player api asynchronously.
    var tag = document.createElement('script');
    tag.src = "http://www.youtube.com/player_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    var done = false;
    var player;
    function onYouTubePlayerAPIReady() {
        player = new YT.Player('player', {
            height: '330',
            width: '450',
            videoId: 'VIDEO_ID'
            //                events: {
            //                    'onReady': onPlayerReady,
            //                    'onStateChange': onPlayerStateChange
            //                }

        });        
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T20:54:21.737

对我来说，在 $(document).ready() 函数中放置加载 YT api 的代码后，它在 Opera 中工作。它病了，但有效。在没有这个技巧的普通浏览器中工作......

# objective-c - Objective C - 设置 UIPickerView 委托

> ID：11201171
> 
> 赞同：0
> 
> 时间：2012-06-26T05:22:38.267
> 
> 标签：objective-c, ios, delegates, datasource, uipickerview

我有一个 mainViewController，我有一个 UIPickerView。现在一切都设置好了，但是当我运行应用程序并选择 textField 时，我的 UIPickerView 列表中出现了问号。

现在我才知道，那是因为我没有为它连接代理。但是，如果我为它连接委托，则不会填充 textField。

TextField 在 mainViewController 中。

所以在我的 MainViewController.h 中，我已经导入了 UIPickerView 并拥有这段代码——这一切都没有错误。_pv 是 UIPickerView。

```
 _pv = [[CategoryPicker alloc] init];

[_pv.categoryPicker setDelegate:self];
[_pv.categoryPicker setDataSource:_pv];

[_appPriorityTxtFld setInputView:_pv];
[_appPriorityTxtFld setInputAccessoryView:toolbar]; 
```

现在您可以看到 Delegate 设置为 self，这将允许填充 textField。

如果我将其设置为 _pv，那么我会正确显示列表，但不会填充 textField。

我错过了什么？？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T06:02:37.787

您需要实现选择器委托方法“pickerView:didSelectRow:inComponent:”，并且需要将所选文本设置为 textfild 文本。请参阅以下代码以供参考，

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    return [dataArray objectAtIndex:row];
}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    textField.text = [dataArray objectAtIndex:row];
} 
```

我认为这可能有用。

# c# - 需要对xml文件中的内容进行切片

> ID：11201177
> 
> 赞同：-4
> 
> 时间：2012-06-26T05:23:05.830
> 
> 标签：c#, xml

先生，

我正在执行从 xml 文件中获取内容的任务。我从其他节点读取内容，但首先内容采用以下形式。

```
<NEWSFEED>
<ARTICLE ID="665875" POSTING_DATE="25-Jun-2012" POSTING_TIME="06:00" ARCHIVE_DATE="18-Jun-2013">
<NEWS_TYPE>News</NEWS_TYPE>
<HEADLINE>Diabetes Can Make a Comeback After Weight-Loss Surgery: Study</HEADLINE>
</ARTICLE>
</NEWSFEED> 
```

我想从下面的 xml 行中切出这些内容

```
<ARTICLE ID="665875" POSTING_DATE="25-Jun-2012" POSTING_TIME="06:00" ARCHIVE_DATE="18-Jun-2013"> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:46:44.847

You can do this with the following code:

```
 string x = "<NEWSFEED><ARTICLE ID='665875' POSTING_DATE='25-Jun-2012' POSTING_TIME='06:00' ARCHIVE_DATE='18-Jun-2013'><NEWS_TYPE>News</NEWS_TYPE><HEADLINE>Diabetes Can Make a Comeback After Weight-Loss Surgery: Study</HEADLINE></ARTICLE></NEWSFEED>";
        XmlDocument xDoc = new XmlDocument();
        xDoc.LoadXml(x);
        foreach (XmlElement element in xDoc.GetElementsByTagName("ARTICLE"))
            foreach (XmlAttribute attr in element.Attributes)
                Console.WriteLine("{0}={1}", attr.Name, attr.Value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:35:42.630

试试这些。创建 XmlDocument 对象以保留 xml 文件：

```
XmlDocument xDoc = new XmlDocument(); 
```

接下来使用 load 方法从指定的流中加载 XML 文档。

```
xDoc.Load("pathToYourXmlFile.xml"); 
```

使用 GetElementsByTagName() 方法获取与指定名称匹配的元素集合的地址。

```
XmlNodeList newsFeed= xDoc.GetElementsByTagName("NEWSFEED"); 
```

XmlNodeList 表示指定节点下的有序节点集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T05:44:35.083

> 我想获取字符串中的内容，例如 ID=""、POSTING_DATE="" 和 POSTING_TIME=""，以及 ARCHIVE_DATE=""

使用[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387061.aspx)，您可以这样做：

```
using System.Linq;
using System.Xml.Linq;

string xml = @"<NEWSFEED>
                   <ARTICLE ID='665875' POSTING_DATE='25-Jun-2012'
                            POSTING_TIME='06:00' ARCHIVE_DATE='18-Jun-2013'>
                       <NEWS_TYPE>News</NEWS_TYPE>
                       <HEADLINE>Diabetes Can Make a Comeback After Weight-Loss
                                 Surgery: Study</HEADLINE>
                   </ARTICLE>
               </NEWSFEED>";
XElement doc = XElement.Parse(xml);
var results = doc.Descendants("ARTICLE")
    .Select(d =>
        new 
        {
            ID = d.Attribute("ID").Value ?? "",
            POSTING_DATE = d.Attribute("POSTING_DATE").Value ?? "",
            ARCHIVE_DATE = d.attribute("ARCHIVE_DATE").Value ?? "",
        }).ToList(); 
```

# android - adapter.notifyDataSetChanged() 不适用于我的自定义适配器（从 BaseAdapter 扩展）

> ID：11201178
> 
> 赞同：-4
> 
> 时间：2012-06-26T05:23:06.053
> 
> 标签：android, android-listview, baseadapter

请检查以下代码并告诉我我所做的错误。它不使用 notifyDataSetChanged() 刷新列表

单击刷新按钮时，列表变为空白或没有变化。

代码是这样的：

```
adapter.notifyDataSetChanged(); 
```

其中适配器是我从 BaseAdapter 扩展的适配器类型。请尽快给出解决方案。

如果您愿意，您可以检查我所做的以下代码以查找错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:38:40.320

**这个问题无需进一步讨论**。

**我解决**了这个问题。[**单击此处**](https://stackoverflow.com/questions/11228698/no-change-black-screen-by-notifydatasetchanged)检查解决方案。

# android - 如何在 phoneGap ( Apache Cordova ) Api 中进行更改

> ID：11201179
> 
> 赞同：1
> 
> 时间：2012-06-26T05:23:15.103
> 
> 标签：android, cordova

我想使用 phoneGap 从 sdcard 访问我现有的 .db 文件，但 phoneGap 中可用的方法只接受数据库名称而不接受下面给出的路径。var db = window.openDatabase("数据库", "1.0", "Cordova 演示", 600000);

所以我想对cordova-1.7.0.jar 进行更改，它具有与设备通信的本机代码。我发现 Storage.java 具有 openDatabase(String db, String version, String display_name,long size) 方法，其中我只需要分配一个变量，即 path = "/mnt/sdcard/database" 并重新编译 .jar 文件。所以我从下面的给定路径下载了cordova源，即[https://github.com/apache/incubator-cordova-android](https://github.com/apache/incubator-cordova-android)并对此进行了更改并创建了新的.jar文件以在我的项目中使用。但它在应用程序加载时给出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:57:07.950

将代码编写为插件会更好，因为 PhoneGap 使用 WebKit 数据库。已经有一个用于访问外部 SQLite 数据库的插件，但它适用于 iOS。不过，这将是您编写自己的 Android 插件的一个很好的起点。现有插件可以在[https://github.com/davibe/Phonegap-SQLitePlugin中找到](https://github.com/davibe/Phonegap-SQLitePlugin)

# model-view-controller - 如何集成 Expressjs 和 UnderscoreJS

> ID：11201181
> 
> 赞同：0
> 
> 时间：2012-06-26T05:24:04.160
> 
> 标签：model-view-controller, node.js, express, underscore.js

我正在制作一个 Expressjs 应用程序，但我并不是特别想使用 Jade。我成功地将 UnderscoreJS 安装到我的应用程序中，因此我可以使用它的模板功能（以及它的一些其他功能）。

我的问题是，例如，当我想在我的 html 文档（在 Jade 中）中插入当前年份时，我 `#{+new Date().getFullYear()}`应该在哪里插入？
是否可以直接插入 HTML 文件，或者我应该在路由文件中设置一个等于结果的变量，然后将其发送到`<%=year%>`我的 html 文件中的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:27:51.977

根据我的评论，我认为 EJS 将是一个不错的选择。
您还可以将 Underscore 与 EJS 一起使用 -[如何将 Underscore.js 模板与 EJS 结合使用？](https://stackoverflow.com/questions/10282260/how-can-i-use-underscore-js-templates-in-conjunction-with-ejs)

# html - 图像在 Outlook 2007/2010 中被截断

> ID：11201185
> 
> 赞同：2
> 
> 时间：2012-06-26T05:24:24.517
> 
> 标签：html, image, email, outlook

图像丢失了第一行像素，但仅在某些情况下。示例标记：

```
<table border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td valign="top" height="20">
            <div style="line-height:0;"><img src="http://path.to/image.png" alt="" height="20" width="25" /></div>
        </td>
    </tr>
</table> 
```

我的印象是，既然`<img>`是内联元素，它应该包含在块级元素中。这就是为什么我把我`<img>`的包裹起来`<div>`。但这导致了一个问题，即文本悬垂导致我`<div>`太高。所以我将 line-height 设置为 0 作为解决方法。

无论`height`或`valign`我在`<td>`或上设置什么`<img>`，图像的顶部仍然被切断。我发现删除行高就是答案。为什么是这样？

我将来会在我的`<img>`标签上使用 display: block 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T17:33:02.810

`<div>`根据您使用的电子邮件客户端，您会受到不同的对待。电子邮件客户端的 IE 是 AOL（但是，谁再使用它了）。我认为chipcullen是对的，你想多了。为什么要添加不必要的代码。试试这个（在 TD 内没有线路重复）：

```
<table border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td><img src="http://path.to/image.png" alt="" height="20" width="25"></td>
    </tr>
</table> 
```

或者，如果您真的必须定义高度：

```
<table border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td height="20" style="height:20px;line-height:20px;"><img src="http://path.to/image.png" alt="" height="20" width="25"></td>
    </tr>
</table> 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-14T11:16:30.467

当在营销活动中插入非常长的图像时，Outlook 中会出现这种情况。图像长度的限制约为 1728 像素高。Outlook 将剪掉高于 1728 像素的图像顶部的多余部分。

如果您无法将图像的尺寸减小到 1728 像素以下，最好的选择是将图像裁剪成单独的图像。如果使用拖放模板，您可以将多个图像块添加到广告系列以上传图像的每个部分。要确保图像显示为一个流畅的图像，请导航到每个图像块的设置选项卡，然后选中边距下的边缘到边缘复选框。

# c# - 如何使用filesystemwatcher在c#中监控windows系统中文件的变化

> ID：11201192
> 
> 赞同：3
> 
> 时间：2012-06-26T05:25:23.437
> 
> 标签：c#, wpf, filesystemwatcher

目前我正在使用 filesystemwatcher 类来监视文件更改但在我的情况下，我在系统中的不同位置有数百万个文件，所以我必须创建数百万个导致性能问题的 fileststemwatcher 类的实例。

请告诉我如何最大限度地提高性能，或者是否有另一种方法来监视 c# 中的所有文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T05:29:50.713

FileSystemWatcher 是正常的方式。我建议您查看更高级别的文件 - 例如。驱动器级别的所有更改，并且仅响应您感兴趣的文件夹中的更改。

例如，一旦获得“已更改”事件，您可以检查传递给事件处理程序的 FileSystemEventArgs 上的 FullPath 属性。

而且我假设您已经在文件夹级别观看，而不是单个文件。

# javascript - SelectItem 在 smartgwt 2.5 中不起作用

> ID：11201193
> 
> 赞同：0
> 
> 时间：2012-06-26T05:25:32.380
> 
> 标签：javascript, html, gwt, smartgwt

当我单击向下箭头时，我的 SelectItem 框不显示组合框项目。

我的代码是：

DynamicForm dynamicForm=new DynamicForm();

```
 VLayout layout=new VLayout();

    SelectItem selectItem=new SelectItem("name", "title");

    LinkedHashMap<String, String> valueMap=new LinkedHashMap<String, String>();
    valueMap.put("Value 1", "Item 1");
    valueMap.put("Value 2", "Item 2");
    valueMap.put("Value 3", "Item 3");

    selectItem.setValueMap(valueMap);

    dynamicForm.setFields(selectItem);

    RootLayoutPanel.get().add(dynamicForm); 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:45:11.830

我按原样测试您的代码并且它可以工作，没有理由它不会。对不起，我使用 2.4 。所以检查你是否也有这个版本

# javascript - 使用可用的 Bytestream 在 Javascript 中创建文件

> ID：11201209
> 
> 赞同：0
> 
> 时间：2012-06-26T05:27:08.263
> 
> 标签：javascript, pdf-generation

有没有办法通过设置文件的 mime 类型、标题、内容等在 JavaScript 中创建文件（例如：PDF）并在浏览器中显示并提供下载选项？

我在 javascript 中有一个 pdf 的 Base64 字节流，我正在使用它通过以下方式向用户显示 pdf：

```
document.location.href = 'data:application/pdf;base64,' +data; 
```

它在新窗口中打开文件（它适用于除 IE 之外的所有浏览器，因为它有 url 限制），并且文件不能在所有浏览器中下载。IE 是测试我的应用程序的主要浏览器，所以这是一个大问题。

使用 Java 等后端技术创建文件并将其作为响应发送的选项被排除，因为我有一个 ABAP 后端，它只能给我字节流。许多人建议使用 jsPdf，但 jsPdf 从 javascript 创建内容（例如逐行设置信息和格式）并使用它。但由于我已经拥有我需要的所有数据和格式，我无法使用它。

这是我在网页中询问字节转换和显示 pdf 的问题，得到了回答，以获取更多信息： [如何将字符串形式的十六进制字节流转换为 javascript 中的实际字节流？](https://stackoverflow.com/questions/11131789/how-to-convert-hexadecimal-byte-stream-in-the-form-of-string-to-actual-bytestrea)

我已尽力寻找解决方案，但还没有找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:19:09.067

它可能会帮助您尝试这种方式将 pdf 放入 zip 文件中，为什么要压缩？因为进行 pdf 强制下载的唯一方法是将其放在 .zip 中，浏览器将识别如何处理它的 [链接此处](http://forum.jquery.com/topic/download-using-jquery)

[此处示例使用 pdf 下载 zip 文件](http://viralpatel.net/blogs/demo/js/create-zip-file-javascript/)

# javascript - 这是关闭的一个很好的例子吗？

> ID：11201210
> 
> 赞同：0
> 
> 时间：2012-06-26T05:27:16.493
> 
> 标签：javascript, function, functional-programming, closures

[我在 MDN 上将](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Working_with_Closures#Practical_closures)其视为示例，但不明白为什么这是一件好事 (TM)。

```
function makeSizer(size) {  
      return function() {  
        document.body.style.fontSize = size + 'px';  
      };  
    }  

    var size12 = makeSizer(12);  
    var size14 = makeSizer(14);  
    var size16 = makeSizer(16); 
```

为什么上面比下面好？

```
function makeSizer(size) {  
        document.body.style.fontSize = size + 'px';  
    }  

    var size12 = makeSizer(12);  
    var size14 = makeSizer(14);  
    var size16 = makeSizer(16); 
```

它有什么不同？显然，我错过了重点......

编辑：添加其余代码（完整代码在链接中）

```
document.getElementById('size-12').onclick = size12;  
document.getElementById('size-14').onclick = size14;  
document.getElementById('size-16').onclick = size16;  

<a href="#" id="size-12">12</a>  
<a href="#" id="size-14">14</a>  
<a href="#" id="size-16">16</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:38:13.550

在这种情况下`size`，是封闭的变量。调用`makeSizer(12)`返回一个“记住”的函数引用 12。这个函数引用被分配给一个元素上的点击处理程序（参见 MDN 示例中的其余代码）。它说：如果您点击我，请致电 (execute) `size12`。在单击时，正文的字体大小变为“12px”，因为执行了从返回的函数引用`makeSizer(12)`（封闭值为 12）。

如果您使用该功能，您将立即调整字体大小。

```
function makeSizer(size) {  
        document.body.style.fontSize = size + 'px';  
}
var size12 = makeSizer(12);  
var size14 = makeSizer(14);  
var size16 = makeSizer(16); //=> now the font-size of the body is '16px' 
```

想想当你这样做时在这种情况下会发生什么：

```
document.getElementById('size-12').onclick = size12; 
```

如果你点击会发生什么`#size-12`吗？

您链接到的 MDN 页面链接到[jsfiddle 示例](http://jsfiddle.net/vnkuZ)。试试看！

*好的*或*坏*的事情我很乐意留给社区中更宗教的部分。我会说这个闭包很有用，甚至可能很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:39:47.670

它们都不是更好，但它们的行为不同。

在您按如下方式调用返回的函数之前，第一个实际上不会调整大小：

```
size12(); 
```

您的第二个示例首先声明一个函数，然后调用它 3 次。您立即将大小设置为 12px，然后是 14px，最后是 16px。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T05:49:20.963

你对“好”的标准是什么？

在第一个示例中，您创建了一些必须调用才能完成工作的函数。尺寸是封闭的，很难看到任何好处。你可能想做：

```
function makeSizer(size) {
    return function() {
        document.body.style.fontSize = size + 'px';
    };
}

var setSmall = makeSizer(8);
var setMedium = makeSizer(10);
var setLarge = makeSizer(14); 
```

或类似的，所以现在你只需调用：

```
setSmall(); 
```

第二种情况下的函数应该被称为*setSize*。

闭包的另一个用途是：

```
var setSize = (function() {
  var sizes = {small: 8, medium: 10, large: 14};

  return function(size) {

    if (sizes.hasOwnProperty(size)) {
      document.body.style.fontSize = sizes[size] + 'px';
    }
  }
}());

setSize('small'); 
```

它们是“好”、“坏”还是其他取决于您对它们进行分类的标准。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T08:49:11.287

在第一个示例中，`makeSizer`返回一个函数。在第二个示例中，它不返回任何内容，并且名称具有误导性。两者完全不同。

第一个例子的推理`makeSizer`是函数工厂；它使“sizer”功能。`size12`, `size14`, 和`size16`是特殊的“sizer”函数，由. 制作`makeSizer`。如果稍后调用其中之一，它将设置字体大小。

在第二个示例中，您首先将字体大小设置为 12，然后设置为 14，然后设置为 16，并在每个阶段将无意义的返回值保存到变量中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T14:47:54.887

实际上，您所拥有的*并不是*闭包的示例。

维基百科告诉我们，[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)的定义是*“一个函数以及该函数的非局部变量的引用环境”。*

更简单地说，它是一个“包围”周围范围变量的函数。

一个很好的例子是这样的：

```
public Func<int> ClosureExample()
{
    int a = 1,
        b = 2;

    Func<int> closeIt = () => a + b;
    return closeIt;
} 
```

让我们真正看看这是怎么回事。我们声明两个整数，然后使用 lambda 表达式/闭包/匿名方法（所有这些都是分配给第一类函数泛型的定义的有效名称）返回将用于执行此计算的第一类函数，*使用封闭变量*，其他地方。

您可以说 closeIt 包含整数 a 和 b；这些变量不属于闭包，但它们正在被它使用。

# python-3.x - 获取文件中两个字符串之间的多个字符串

> ID：11201219
> 
> 赞同：0
> 
> 时间：2012-06-26T05:28:11.207
> 
> 标签：python-3.x, text-manipulation

我有一个“.txt”文件，其中有一个字符串，说“支持的功能”和“功能描述”，这两个字符串之间有多行，以“-”开头。如何获取每一行并对其应用一些更改？要获取子字符串，我可以这样做：

```
substr = list[list.find("Functionality supported")+1:list.find("Functionality     Description")]
print ("Apply h1 to substr\n") 
```

这是否有帮助，如果有帮助，如何仅应用于每行中的文本而不是“-”。这个“substr”也有所有这些行，我应该在 substr 上应用 split 吗？

在此先感谢-Pankaj

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:42:40.647

您可以将子字符串拆分为单独的字符串：

```
substrings = substr.split('\n-') 
```

然后将更改应用于每个子字符串，最后将它们连接回来：

```
result = '\n-'.join(substrings) 
```

# iphone - 适合其 UIWebview iPad 中的内容

> ID：11201220
> 
> 赞同：4
> 
> 时间：2012-06-26T05:28:22.263
> 
> 标签：iphone, ipad, uiwebview, height, epub

我是 iPad 开发的新手，

我制作了epub阅读器并在我的webview中加载了epub的每一页，当我看到我的应用程序处于纵向模式滚动时不存在，因为我使用过，

`webview.scalesPageToFit=TRUE;`

当我在横向滚动中看到我的应用程序时，即使我已经使用过，

`webview.scalesPageToFit=TRUE;`

我不想滚动，我希望内容适合屏幕大小。

**这是我的代码片段：**

```
- (void) adjustViewsForOrientation:(UIInterfaceOrientation)orientation {

      if(orientation == UIInterfaceOrientationPortrait || orientation == UIInterfaceOrientationPortraitUpsideDown) {
          _webview.frame=CGRectMake(0, 0, 770, 960);

      }

    else if (orientation == UIInterfaceOrientationLandscapeLeft || orientation == UIInterfaceOrientationLandscapeRight) {
        _webview.frame=CGRectMake(0, 0, 1030, 705);

    }
} 
```

***看我的快照：***

![](../Images/76e61091173707a53827b82b12d3e456.png) 您可以看到横向模式下有滚动，纵向模式下还有很多空间。

简而言之，我想在纵向中增加 UIWebView 的内容大小并在横向中减小**UIWebView的****内容大小**，然后内容将根据屏幕大小适合而无需滚动。

**任何帮助将不胜感激 ！**

# selenium - testNG打开其他项目的JUnit报告

> ID：11201232
> 
> 赞同：0
> 
> 时间：2012-06-26T05:29:36.993
> 
> 标签：selenium, junit, testng

我正在使用 testNG（在 Eclipse 中使用 Selenium）执行自动化测试。当我在 Junit 编辑器中单击失败的测试用例（以更新失败的测试用例）时，它会在其他项目中打开该测试用例的类文件。（不是使用 testNG.xml 运行测试用例的那个）。我正在执行正确的testNG.xml 属于预期项目。但是 JUnit 编辑器中的失败报告在我以前工作的一些其他项目中以相同的名称打开了测试用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:24:33.997

如果您在 Eclipse 中使用 TestNG 运行，那么使用[适用于 Eclipse 的 TestNG 插件](http://testng.org/doc/eclipse.html)可能是一个好主意。

否则，关闭你不参与的项目通常是个好主意。名称混淆的可能性较小:-)。

# hardware - 需要的最低组装说明是多少？

> ID：11201238
> 
> 赞同：1
> 
> 时间：2012-06-26T05:30:31.027
> 
> 标签：hardware, computer-architecture, instruction-set

如果您要构建一个可用于运行任意程序的处理器，您可以使用的最少指令集 (ISA) 是多少？

我刚在想：

*   ALU-ops (add, sub, mul, div)

*   加载注册，[地址]

*   商店注册，[地址]

*   分支如果操作。如果不相等，则可能有分支，如果>，如果<（branchif reg1，reg2，LABEL）

你怎么看？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T06:02:47.540

从技术上讲，您只需要[一个指令](http://en.wikipedia.org/wiki/One_instruction_set_computer)。它需要进行数学和条件分支。例如，如果为负，则减去和分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:45:45.463

您不需要*任何*可以从其他指令构建的指令。

所以，不需要`mul`或者`div`因为你可以通过重复的加法或减法来做到这一点，也不需要`sub`如果你有`neg`(negate) 并且数字会换行，例如使用二进制补码。

当然，您可以使用*两条*分支指令，一条等于，一条小于 - 所有其他指令都可以从这些指令的组合中构建。

因为您没有 I/O 指令，您可能需要使用内存映射 I/O，其中与其他设备的通信是通过内存访问进行的。

而且，如果没有本机`push`and `pop`，您可能需要使用专用寄存器（和内存位置，因为您似乎没有寄存器到寄存器的移动）来实现自己的堆栈。

现在这将不是一个非常*好的*架构，但它应该可以运行。正如 Matrix Architect 所说，“我们已经准备好接受某些生存水平”。

* * *

顺便说一句，看看 RCA1802 CPU（从以前的日子开始）。它*没有*专用的程序计数器或堆栈指针，而是在软件中实现所有这些（有关详细信息，请参见[此处](https://stackoverflow.com/questions/664744/what-is-the-direction-of-stack-growth-in-most-modern-systems/664779#664779)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T06:08:12.663

在 8085 中编程时，我觉得有几种方法可以做同样的事情。所以，如果是这种情况，你就知道你的指令集不是最小的。

我建议遵循以下说明 - 添加、补充、逻辑与、或和加载存储。有条件和无条件跳转。

大多数其他指令都可以使用上述指令执行。

* * *

编辑：仅列出组装说明（基于 8085）：

我将考虑一个模型，其中有 3 个寄存器。像 A = B + C 这样的操作

ADD B, C (A = B + C)
CMA (A = A')
OR B, C (A = B OR C) JMP xxxx（将 PC 设置为 xxxx）
LDA xxxx（在 xxxx 地址加载 A 内容）
STA xxxx
JZ xxxx（如果设置了零标志则跳转）

注意：我意识到在寄存器之间复制数据的附加指令非常有用。但可以省略。请举一个没有它就不行的案例。

# windows-phone-7 - WP7 中的数据库

> ID：11201240
> 
> 赞同：0
> 
> 时间：2012-06-26T05:30:42.583
> 
> 标签：windows-phone-7, windows-phone-7.1.1

我正在创建一个 Windows Phone 应用程序，它需要在数据库中存储一些数据。现在我将这些数据保存在隔离存储中的一些文本文件中。我试图在我的应用程序中创建一个数据库但失败了。谁能帮我创建一个数据库。我参考了以下页面，但我无法清楚地理解它。 [http://msdn.microsoft.com/en-us/library/hh202860(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202860(v=vs.92).aspx)

[http://windowsphonegeek.com/tips/Windows-Phone-Mango-Local-Database-SQL-CE--Creating-the-Database](http://windowsphonegeek.com/tips/Windows-Phone-Mango-Local-Database-SQL-CE--Creating-the-Database)

[http://www.silverlightshow.net/items/Windows-Phone-7.1-Local-SQL-Database.aspx](http://www.silverlightshow.net/items/Windows-Phone-7.1-Local-SQL-Database.aspx)

该应用程序下载一些文件。我的表包含一个作为主键的文档 ID、文档名称、文件大小和下载完成时间。如何更新表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:52:49.730

基本上有两种方法可以实现这一目标。

1.  您可以更早地创建数据库和表结构，并将数据库文件放在项目中的资源下，并且在首次启动应用程序时，您可以将该数据库复制到隔离存储。

2.  其次，将您的表结构定义为类，并在您的应用程序首次启动时创建数据库和表。

您可以创建派生自默认 Datacontext 类的 Datacontext 类，以便您可以通过 LINQ 查询保存和获取数据。

希望这可以帮助。

# objective-c - 检查互联网连接未显示警报消息

> ID：11201243
> 
> 赞同：1
> 
> 时间：2012-06-26T05:31:06.830
> 
> 标签：objective-c, nsurlconnection

我已经尝试了这个网站上的一些帖子。但是在我的 iphone 应用程序中，如果没有连接互联网，它不会显示任何错误。它只是显示加载视图。我为此使用了以下代码

```
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
error=nil;
if(error != nil)
{

    UIAlertView * alert;
    if([[error localizedDescription] isEqualToString:@"no Internet connection"])
    {
        alert = [[UIAlertView alloc] initWithTitle:@"No Internet connection" message:[error localizedDescription] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    }

    else
    {
        alert = [[UIAlertView alloc] initWithTitle:@"Connection failed" message:[error localizedDescription] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    }
    [alert release];
} 
} 
```

即使未连接互联网，也不会显示此警告。谁能帮我？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T07:03:58.420

请参阅Apple 提供的有关 Reachability[的](https://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)示例代码。

并实施某些必要的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:43:07.613

[这](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/uid/TP40003793-CH3g-SW40)是 NSUrlConnection 当前支持的错误代码

没有互联网连接的错误代码是 NSURLErrorNotConnectedToInternet = -1009，

当您遇到 NSError* 错误时，您可以在您的情况下使用它

```
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    if(error != nil)
    {
        if ([error code] == NSURLErrorNotConnectedToInternet) {
          //not connected to internet
       }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T07:26:27.483

使用此代码...

定义这个

```
#define AF_INET     2 
```

并实现这一点，

```
- (BOOL) connectedToNetwork 
```

{

```
struct sockaddr_in zeroAddress;
bzero(&zeroAddress, sizeof(zeroAddress));
zeroAddress.sin_len = sizeof(zeroAddress);
zeroAddress.sin_family = AF_INET;

// Recover reachability flags
SCNetworkReachabilityRef defaultRouteReachability = SCNetworkReachabilityCreateWithAddress(NULL, (struct sockaddr *)&zeroAddress);
SCNetworkReachabilityFlags flags;

BOOL didRetrieveFlags = SCNetworkReachabilityGetFlags(defaultRouteReachability, &flags);
CFRelease(defaultRouteReachability);

if (!didRetrieveFlags)
{    
    printf("Error. Could not recover network reachability flags\n");
    return 0;
}   
BOOL isReachable = flags & kSCNetworkFlagsReachable;
BOOL needsConnection = flags & kSCNetworkFlagsConnectionRequired;
return (isReachable && !needsConnection) ? YES : NO; 
```

}

使用 bool 进行检查，

```
 BOOL check = [self connectedToNetwork]; 
```

然后检查这个条件，

```
 if (!check) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Warning!" message:@"Your internet connection is currently unavailable. Please try to connect later."
                                                   delegate:self cancelButtonTitle:@"Done" otherButtonTitles:nil];
    [alert show];
    [alert release];
} 
```

# iphone - 我想知道 IPA 文件的执行流程

> ID：11201244
> 
> 赞同：4
> 
> 时间：2012-06-26T05:31:10.277
> 
> 标签：iphone, executable, dylib, ipa

我有一个 IPA 文件，其中包含 info.plist、可执行文件、package.info、配置证书、动态库、代码资源等。我想知道首先执行哪个文件以及执行的顺序。我想向 IPA 添加一些内容，为此我需要了解现有 IPA 的工作原理。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T06:03:45.953

IPA 文件只是应用程序的 zip 文件。它包含二进制文件本身、Info.plist、代码设计文件、图标和其他资源。

当您从 AppStore 下载应用程序时，IPA 文件与元文件一起下载到 /var/mobile/Media/Downloads。完全下载后，将运行安装守护程序 (installd)，它将 IPA 提取到 /var/mobile/Applications/<UUID here>/。在这个目录中有：

*   .app 文件夹，其中包含应用程序的所有资源和可执行文件。
*   用于存储任何类型文件（读/写权限）的 Documents 文件夹。
*   一个库文件夹，用于使用 NSUserDefaults (Library/Preferences/.plist) 以 plist 格式缓存数据和存储键/值数据。
*   用于存储临时数据的 tmp 文件夹。当应用程序未运行时，此文件夹的内容将被删除。

然后删除 IPA 文件，从而通过删除应用程序存档来释放空间。

当 SpringBoard（主屏幕应用程序）加载时，它会读取每个应用程序的 Info.plist 并缓存它。从中，它获取显示名称（图标下的名称）、图标本身以及可执行文件的名称等。

当您单击应用程序的图标时，SpringBoard 将应用程序的 Default.png 显示为启动屏幕，同时将可执行文件加载到内存中。它在此过程中被解密，因为每个 AppStore 应用程序在被 Apple 签名时都会被加密。一旦可执行文件加载到内存中，dyld（动态链接器）就会加载它所链接的任何框架或库（例如 UIKit、libobjc、libSystem 等）。应用程序不能包含任何自己的库；可执行文件必须是独立的。然后，调用应用程序的 main() 函数，并运行应用程序的代码。

您应该知道以下几点：

1.  修改应用程序可执行文件中的单个字节将使代码签名无效，内核将拒绝运行应用程序。

2.  除非您在越狱设备上运行，否则无法编辑或修改可执行文件，即使在运行时也是如此。如果不以一种或另一种方式（二进制修改或运行时 dylib 注入）运行未独立的代码，则无法更改应用程序的运行方式。

3.  IPA 只能由您的帐户安装。您不能下载 IPA 并期望它运行。代码签名将无效。

4.  修改应用程序的运行方式并非易事。一些应用程序将其所有配置设置存储在一个未验证身份的 plist 中，但这些应用程序很少而且相差甚远。大多数应用程序将使用哈希算法（例如 md5 或 sha1）验证配置或保存文件，这使得在不让应用程序拒绝它们的情况下编辑这些文件变得更加困难。许多其他应用程序根本不使用 plist 或其他易于编辑的文件类型。他们要么使用鲜为人知的或专有的格式，要么不使用配置文件。

了解您正在进入的领域之前，先了解一下。我并不是在劝阻你尝试；我只是想帮助您了解必须克服的障碍才能实现这一目标。

# google-chrome - 使用 SVG 图像时，背景图像图块之间存在间隙。如何在 Chrome 中解决？

> ID：11201248
> 
> 赞同：14
> 
> 时间：2012-06-26T05:31:27.267
> 
> 标签：google-chrome, css, svg, background-image

当我使用 SVG 图像作为页面主体的平铺背景时，平铺之间存在细微的间隙。如果我切换到文件的 PNG 版本，它不会发生。

我正在使用最新版本的 Mac 版 Google Chrome – 版本 19.0.1084.56。我没有测试过 Windows，因为我没有那个平台。文件在 Safari 和 FF 中按预期工作。

经过一堆谷歌搜索和搜索后，我没有找到任何类似的报告。也许这里有人有解决方案。

这是我的测试代码：

```
<!DOCTYPE html>
<html>
<head>
<title>SVG background test</title>
<style type="text/css">
body {
   background-color: #FFF;
   background-image: url(img/assets/background.svg);
   background-repeat: repeat;
}
</style>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T23:39:00.457

事实证明，这不仅发生在 Chrome 上，而且在该浏览器中更为明显。正如我在上面发布的，这里是解决方案：在阅读了一个稍微不同的 Chrome/svg 问题的解决方案后，我找到了答案。发回这里以防其他人遇到此问题。我在 Illustrator 中创建了我的 SVG 文件。显然我的画板/图像大小不是精确的像素。我通过在文本编辑器中打开我的 SVG 文件并查看我看到的文件顶部发现了这一点：

```
width="229.9999px" height="147.4256px" 
```

我在 illustrator 中打开了 svg 文件并确保尺寸完全是偶数像素，然后在文本文件中再次仔细检查。更正的尺寸为：

```
width="230px height="148px" 
```

出于某种原因，简单地编辑文本文件中的值对我来说不起作用，但是在 Illustrator 中修复比弄清楚如何正确编辑 svg 文本文件更快。无论如何，现在我的瓷砖上没有缝隙。希望能帮助其他人，如果他们遇到这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-26T18:43:48.330

有四件事要寻找（此答案适用于最终在这里寻找解决方案的其他人）：

1.  确保`height`and`width`是整数，也就是“没有小数部分”（如 Violet 所述，没有小数）
    示例：`height="326.25"`vs`height="326"`

2.  确保你`viewbox`也是整数
    示例`viewBox="0 0 306.25 753"`vs`viewBox="0 0 306 753"`

3.  如果你有视口，你还可以设置`preserveAspectRatio`属性
    [Learn More On MDN](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/preserveAspectRatio)

4.  另一件需要注意的事情是在`svg`标签中设置了 height 和 width 属性。这解决了 IE`background-size`大小问题。[这是一篇关于它的好文章。](http://thatemil.com/blog/2015/03/15/sizing-svg-background-images-in-internet-explorer/)

在我的情况下，SVG 在 Chrome 中正确重复，但在 Firefox 中存在差距，直到我将所有属性设置为整数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-12T16:46:43.720

这不是宽度或高度的问题。即使您的 svg 模式是 100px x 100px 并且没有小数点，它也会出现。

您可以解决将 preserveAspectRatio="none" 放入 svg 文件的问题：`<svg preserveAspectRatio="none" ...>`

但是当你想重复一个 svg 模式时，你不能选择这个选项，因为你的模式会被扭曲。

你找到答案了吗？

# msbuild - Jenkins 问题 - 如何访问 MSBuild 文件中的全局变量以及在条件通过时如何发送邮件

> ID：11201250
> 
> 赞同：1
> 
> 时间：2012-06-26T05:31:41.540
> 
> 标签：msbuild, jenkins, email-validation, email-attachments

1.  出于某种原因，我必须在我的 MSBuild 文件中访问 Jenkins 全局环境变量，如 BUILD ID 等，但我不知道该怎么做。

2.  运行我的 NUnit 项目后，我创建了一个特定的报告，一个 pdf 文件，但有时可能不会生成这个文件（比如没有数据要显示），所以我必须检查这个报告是否存在以及是否是的，然后我必须将其附在邮件中并发送给一些人。我正在使用 Jenkins 的 Email-ext 插件，但我不确定如何检查这种情况。

你建议我为这些问题做些什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:35:25.737

1.  不知道 Jenkins 是如何工作的，但是应该有一些方法可以传递额外的命令行参数。要传递 Jenkins 全局变量添加 /p: 切换到 MSBuild 命令行。假设 JenkinsVersion 是 Jenkins 中的全局变量。您可以使用`/p:MsBuildJenkinsVariable=JenkinsVersion`. MsBuild $(MsBuildJenkinsVariable) 属性现在应该用 JenkinsVersion 填充。

2.  我知道你想以某种方式在 Jenkins 中设置条件。如果无法在 Jenkins 中执行此操作，您可以使用 MSbuild 脚本执行此操作。我正在使用[MSBuild.ExtensionPack.Communication.Email](http://www.msbuildextensionpack.com/help/4.0.5.0/html/2439bba8-d062-a4b9-3ca6-2e348d031ec1.htm) MSBuild 任务发送通知电子邮件。设置电子邮件任务的条件属性以在报告文件不存在时发送电子邮件。

# iphone - 实现样本缓冲区委托方法iphone

> ID：11201251
> 
> 赞同：0
> 
> 时间：2012-06-26T05:31:42.413
> 
> 标签：iphone, objective-c, ios, video-capture

这是我的代码

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput 
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer 
   fromConnection:(AVCaptureConnection *)connection
{ 
    // Create a UIImage from the sample buffer data
    UIImage *image = [self imageFromSampleBuffer:sampleBuffer];
    dispatch_async(dispatch_get_main_queue(), ^{
      [[self imgView] setImage:image];
    });
} 
```

从样本缓冲区数据创建 UIImage

```
- (UIImage *) imageFromSampleBuffer:(CMSampleBufferRef) sampleBuffer 
{

     CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    // Lock the base address of the pixel buffer.
    CVPixelBufferLockBaseAddress(imageBuffer,0);

    // Get the number of bytes per row for the pixel buffer.
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
    // Get the pixel buffer width and height.
    size_t width = CVPixelBufferGetWidth(imageBuffer);
    size_t height = CVPixelBufferGetHeight(imageBuffer);

    // Create a device-dependent RGB color space.
    static CGColorSpaceRef colorSpace = NULL;
    if (colorSpace == NULL) {
        colorSpace = CGColorSpaceCreateDeviceRGB();
    if (colorSpace == NULL) {
           // Handle the error appropriately.
           return nil;
        }
    }

    // Get the base address of the pixel buffer.
    uint8_t *baseAddress = malloc( bytesPerRow * height );    
    memcpy( baseAddress, CVPixelBufferGetBaseAddress(imageBuffer), bytesPerRow * height );

    // Get the data size for contiguous planes of the pixel buffer.
    size_t bufferSize = CVPixelBufferGetDataSize(imageBuffer);

    // Create a Quartz direct-access data provider that uses data we supply.
    CGDataProviderRef dataProvider = CGDataProviderCreateWithData(NULL, baseAddress, bufferSize, NULL);
    // Create a bitmap image from data supplied by the data provider.
    CGImageRef cgImage = CGImageCreate(width, height, 8, 32, bytesPerRow,
              colorSpace, kCGImageAlphaNoneSkipFirst | kCGBitmapByteOrder32Little, dataProvider, NULL, true, kCGRenderingIntentDefault);

    CGDataProviderRelease(dataProvider);

    // Create and return an image object to represent the Quartz image.
    UIImage *image = [UIImage imageWithCGImage:cgImage];
    CGImageRelease(cgImage);
    free(baseAddress);
    CVPixelBufferUnlockBaseAddress(imageBuffer, 0);

    return image;
} 
```

我的图像视图中仍然没有图像，任何人都可以帮我找出错误。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T04:52:26.790

这是使我工作的代码：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput 
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer 
   fromConnection:(AVCaptureConnection *)connection
{ 
// Create a UIImage from the sample buffer data
UIImage *img = [self imageFromSampleBuffer:sampleBuffer];
dispatch_async(dispatch_get_main_queue(), ^{

    self.imgView.image=img;
});

}
// Create a UIImage from sample buffer data
- (UIImage *) imageFromSampleBuffer:(CMSampleBufferRef) sampleBuffer 
{

// Get a CMSampleBuffer's Core Video image buffer for the media data
CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); 
// Lock the base address of the pixel buffer
CVPixelBufferLockBaseAddress(imageBuffer, 0); 

// Get the number of bytes per row for the pixel buffer
size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer); 
// Get the pixel buffer width and height
size_t width = CVPixelBufferGetWidth(imageBuffer); 
size_t height = CVPixelBufferGetHeight(imageBuffer); 

// Get the number of bytes per row for the pixel buffer
u_int8_t *baseAddress = (u_int8_t *)malloc(bytesPerRow*height);
memcpy( baseAddress, CVPixelBufferGetBaseAddress(imageBuffer), bytesPerRow * height     );

// size_t bufferSize = CVPixelBufferGetDataSize(imageBuffer);

// Create a device-dependent RGB color space
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB(); 

// Create a bitmap graphics context with the sample buffer data

//The context draws into a bitmap which is `width'
//  pixels wide and `height' pixels high. The number of components for each
//      pixel is specified by `space'
CGContextRef context = CGBitmapContextCreate(baseAddress, width, height, 8, 
                                             bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaNoneSkipFirst); 

// Create a Quartz image from the pixel data in the bitmap graphics context
CGImageRef quartzImage = CGBitmapContextCreateImage(context);

// Unlock the pixel buffer
CVPixelBufferUnlockBaseAddress(imageBuffer,0);

// Free up the context and color space
CGContextRelease(context); 
CGColorSpaceRelease(colorSpace);

// Create an image object from the Quartz image
UIImage *image = [UIImage imageWithCGImage:quartzImage scale:1.0 orientation:UIImageOrientationRight];

free(baseAddress);
// Release the Quartz image
CGImageRelease(quartzImage);

return (image);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T22:32:58.703

试试这个：

```
- (UIImage *) imageFromSampleBuffer:(CMSampleBufferRef) sampleBuffer 
{
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    CVPixelBufferLockBaseAddress(imageBuffer, 0);

    uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer);
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
    size_t width = CVPixelBufferGetWidth(imageBuffer);
    size_t height = CVPixelBufferGetHeight(imageBuffer);

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef newContext = CGBitmapContextCreate(baseAddress, width, height, 8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
    CGImageRef newImage = CGBitmapContextCreateImage(newContext);

    CGContextRelease(newContext);
    CGColorSpaceRelease(colorSpace);

    return [UIImage imageWithCGImage:newImage];

    CGImageRelease(newImage);
    CVPixelBufferUnlockBaseAddress(imageBuffer, 0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-13T15:43:02.713

使用 GLKView 加速渲染；然后，将此代码插入您的委托方法中：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection
{
    CMFormatDescriptionRef formatDesc = CMSampleBufferGetFormatDescription(sampleBuffer);

    // update the video dimensions information
    _currentVideoDimensions = CMVideoFormatDescriptionGetDimensions(formatDesc);

    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);

// If you want to apply filters to your UIImage before you display it...

    CIImage *tempImage = [CIImage imageWithCVPixelBuffer:(CVPixelBufferRef)imageBuffer options:nil];
    CIFilter *filter = [CIFilter filterWithName: @"CIExposureAdjust" keysAndValues:@"inputImage", tempImage, nil];
    [filter setValue:@(self.tag) forKey:@"inputEV"];
    CIFilter *filter2 = [CIFilter filterWithName: @"CILinearToSRGBToneCurve" keysAndValues:@"inputImage", [filter valueForKey: @"outputImage"], nil];
    CIFilter *filter3 = [CIFilter filterWithName: @"CIGammaAdjust" keysAndValues:@"inputImage", [filter2 valueForKey: @"outputImage"], nil];
    [filter3 setValue:@(self.tag) forKey:@"inputPower"];
    CIImage *sourceImage = [filter3 valueForKey: @"outputImage"];

    CGRect sourceExtent = sourceImage.extent;

    CGFloat sourceAspect = sourceExtent.size.width / sourceExtent.size.height;
    CGFloat previewAspect = _videoPreviewViewBounds.size.width  / _videoPreviewViewBounds.size.height;

    // we want to maintain the aspect radio of the screen size, so we clip the video image
    CGRect drawRect = sourceExtent;
    if (sourceAspect > previewAspect)
    {
        // use full height of the video image, and center crop the width
        drawRect.origin.x += (drawRect.size.width - drawRect.size.height * previewAspect) / 2.0;
        drawRect.size.width = drawRect.size.height * previewAspect;
    }
    else
    {
        // use full width of the video image, and center crop the height
        drawRect.origin.y += (drawRect.size.height - drawRect.size.width / previewAspect) / 2.0;
        drawRect.size.height = drawRect.size.width / previewAspect;
    }

    [_videoPreviewView bindDrawable];

    if (_eaglContext != [EAGLContext currentContext])
        [EAGLContext setCurrentContext:_eaglContext];

    // clear eagl view to grey
    glClearColor(0.5, 0.5, 0.5, 1.0);
    glClear(GL_COLOR_BUFFER_BIT);

    // set the blend mode to "source over" so that CI will use that
    glEnable(GL_BLEND);
    glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);

    [_ciContext drawImage:sourceImage inRect:_videoPreviewViewBounds fromRect:drawRect];

    [_videoPreviewView display];
} 
```

您始终可以轻松地将 CIImage 转换为 UIImage；但为什么？通过将图像渲染到 EAGLContext 中，您可以获得 GPU 加速的图像显示。我想不出你为什么需要 UIImage 除非这是你知道的唯一方法。

请注意，此代码可以减少到几行，但很少有人需要在使用示例缓冲区时正确定位和着色视频文件中的帧的方法。如果是这样的话，这涵盖了您需要的一切。（我认为你会发现很难让从样本缓冲区生成的 UIImage 正确定位自身......）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-26T06:19:14.180

尝试使用

```
UIImage *image = [[UIImage alloc] initWithCGImage:]; 
```

代替

```
UIImage *image = [UIImage imageWithCGImage:cgImage]; 
```

# dbpedia - 维基百科人物 API

> ID：11201252
> 
> 赞同：0
> 
> 时间：2012-06-26T05:31:50.167
> 
> 标签：dbpedia, wikipedia-api

我想使用维基百科 API 列出生日在特定日期的人。

以前有人用过吗？请向我建议正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:24:17.857

Wikipedia 不直接提供此信息，请尝试[DBPedia](http://wiki.dbpedia.org/Downloads37#persondata)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T05:11:19.117

Wikipedia 在 Wikidata 上托管其数据，该数据由[Wikibase Web API](https://www.mediawiki.org/wiki/Wikibase/API)提供支持。

# jquery - 如果 Div 是 A、B 或 C，则淡出并淡入 Div X

> ID：11201254
> 
> 赞同：0
> 
> 时间：2012-06-26T05:31:51.587
> 
> 标签：jquery, html, css

我现在正在研究我的投资组合网站的导航，我无法弄清楚如何将其他属性添加到我的`toggle()`函数中。

它基本上是一个过滤系统，有 4 个可能的选项，它们是..

*   全部
*   交互的
*   形象的
*   声音的

**我想这样做，以便当您单击一个按钮时，它会淡出所有其他选项，并淡出相应的内容部分..**

**例如 - 单击交互式按钮将执行以下操作：**

> “如果全部可见，淡出并淡入交互”+“如果图形可见，淡出并淡入交互”+“如果音频可见，淡出并淡入交互”

这样我就可以通过一键点击覆盖我的所有基地。

我在这里尝试向代码中添加多个 ID，但未成功：

```
$(document).ready(function(){
$("#filter-interactive").toggle(function() {
  $("#wrapper-thumbnails-all, #wrapper-thumbnails-graphic, #wrapper-thumbnails-audio").fadeOut(function() { $("#wrapper-thumbnails-interactive").fadeIn(); });
}, function() {
  $("#wrapper-thumbnails-interactive").fadeOut(function() { $("#wrapper-thumbnails-all").fadeIn(); });
  });
}); 
```

这里基本上是我简化 **的 html 结构：只有 ALL 部分一开始是可见的，所有其他部分都设置为 Display:none；**

```
<body>

<div id="wrapper-thumbnails-all">
 Content
</div>

<div id="wrapper-thumbnails-interactive">
 Content
</div>

<div id="wrapper-thumbnails-graphic">
 Content
</div>

<div id="wrapper-thumbnails-audio">
 Content
</div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:08:28.667

我尝试过使用 chackbox，这是一个示例，我不知道是否是您想要的，但请看这个小提琴：

[小提琴](http://jsfiddle.net/TgXtK/)

```
$('#wrapper-thumbnails-all').fadeIn();

$('input:checkbox').change(function(){

    if ($(this).is(':checked')){
        $('#wrapper-thumbnails-'+$(this).val()).fadeIn();
    }else{
        $('#wrapper-thumbnails-'+$(this).val()).fadeOut();
    }

}); 
```

# sql - 带有联接和案例条件的 SQL 更新

> ID：11201257
> 
> 赞同：-1
> 
> 时间：2012-06-26T05:32:06.347
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我想更新一个表。

我的表结构是：

*   `MainTable`：

    ```
    id | status | type | user 
    ```

*   `OtherTable`：

    ```
    id | flag 
    ```

在这里，我想更新所有`status`和不包括 where和 where on not set`user`的字段ie ，但是如何？`MainTable``status='Stop'``flag``OtherTable``0`

`OtherTable`仅持有价值`type='EMP'`。

更新：我想在`MainTable`何时使用条件检查更新所有记录`type ='EMP'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:59:44.613

```
Update MT set user='someuser', status = "somestatus" 
FROM MainTable MT
Join
(
Select * 
from MainTable MT1
Join Othertable OT on MT1.Id = OT.Id
AND OT.Flag = 0
and  MT1.type='EMP'
Union All
Select * 
from MainTable MT2
WHERE MT2.id not in (Select ID FROM Othertable where Flag = 0)
and  MT2.type='EMP'
) tblOther
on MT.ID = tblOther.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:40:53.223

@Asif 给出了智能答案

这是适合我要求的更简单/替代方式

```
 `update MainTable
  set status='someStatus'
  where 
  status!='Stop'
  and check_type!='EMP'

  update MainTable
  set status='someStatus'
  from MainTable inner join OtherTable on OtherTable.id=MainTable.id
  where 
  OtherTable.flag=1` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T05:37:48.070

使用子查询....

```
Update MainTable Set user="" where status='STOP' and id in (select id from OtherTable 
where Flag!=0) 
```

# android - 在 android eclipse 上的 tabhost 上显示一些数据时出现歧义

> ID：11201258
> 
> 赞同：0
> 
> 时间：2012-06-26T05:32:09.147
> 
> 标签：android, web-services, android-tabhost

现在我正在通过android上的SOAP方法使用两个Web服务。使用Web服务的方式只是从用户那里获取输入并在textviews中显示它。它工作正常。但我试图在标签中显示答案由两个选项卡组成的选项卡主机。我试图显示来自第一个 Web 服务的答案将显示在选项卡主机的第一个选项卡中，而来自第二个 Web 服务的答案将显示在同一选项卡主机的第二个选项卡中...

但这里的问题是，它在两个选项卡上显示相同的答案，如何克服这个问题？

*注意：* **我使用相同的编辑文本和按钮从用户那里获取两个 Web 服务的输入。**

我有四项活动，即

*   Demo_tabActivity.java [主要活动]
*   tabhost.java

以下两个活动是上面的选项卡

*   Tab_1.java
*   Tab_2.java

第一个活动（Demo_tabActivity.java）包含一个编辑文本和按钮。第二个（Tabhost.java）活动包含一个 Tabhost 小部件。第三个和第四个活动分别包含文本视图。

第一个活动将通过获取用户的输入来使用 Web 服务，并在选项卡主机（第二个活动）的第一个选项卡（第三个活动）上返回一些数据。同样明智的是，它将消耗另一个 Web 服务。

请在下面找到我的代码

**Demo_tabActivity.java**

```
public class Demo_tabActivity extends Activity 
{
private static String NAMESPACE1 = "http://tempuri.org/";
private static String NAMESPACE2 = "http://tempuri.org/";
private static String METHOD_NAME1 = "FahrenheitToCelsius";
private static String METHOD_NAME2 = "CelsiusToFahrenheit";
private static String SOAP_ACTION1 = "http://tempuri.org/FahrenheitToCelsius";
private static String SOAP_ACTION2 = "http://tempuri.org/CelsiusToFahrenheit";
private static String URL1 = "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";
private static String URL2 = "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";
Button btnFar;
EditText txtFar;

   @Override
   public void onCreate(Bundle savedInstanceState)
   {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       btnFar = (Button)findViewById(R.id.button1);
       txtFar = (EditText)findViewById(R.id.editText_in);
       btnFar.setOnClickListener(new View.OnClickListener()

       {
       public void onClick(View v)
       {
         String b;
         String b2;

         //Initialize soap request + add parameters
         SoapObject request = new SoapObject(NAMESPACE1, METHOD_NAME1);
         SoapObject req = new SoapObject(NAMESPACE2, METHOD_NAME2);
         //Use this to add parameters
         request.addProperty("Fahrenheit",txtFar.getText().toString());
         request.addProperty("Celsius",txtFar.getText().toString());

         //Declare the version of the SOAP request

         SoapSerializationEnvelope envelope = new     SoapSerializationEnvelope(SoapEnvelope.VER11);
         SoapSerializationEnvelope env = new SoapSerializationEnvelope(SoapEnvelope.VER11);

         envelope.setOutputSoapObject(request);
         env.setOutputSoapObject(req);
         envelope.dotNet = true;

         try 
         {
             HttpTransportSE androidHttpTransport = new HttpTransportSE(URL1);
             HttpTransportSE androidHttpT = new HttpTransportSE(URL2);

             //this is the actual part that will call the webservice
             androidHttpTransport.call(SOAP_ACTION1, envelope);
             androidHttpT.call(SOAP_ACTION2, env);          

             // Get the SoapResult from the envelope body.

             SoapPrimitive result = (SoapPrimitive)envelope.getResponse();
             SoapPrimitive res = (SoapPrimitive)envelope.getResponse();

             if (result != null && res != null)
             {
              //Get the first property and change the label text

                b = result.toString();
                b2 = res.toString();
                Intent myIntent = new Intent(v.getContext(), Tabhost.class);
                myIntent.putExtra("gotonextpage", b);
                myIntent.putExtra("goto", b2);
                startActivity(myIntent);
             }
             else
             {
               Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_SHORT).show();
             }
         }
        catch (Exception e)
        {
           e.printStackTrace();
           }
         }
       });
   }
} 
```

**Tabhost.java**

```
 public class Tabhost extends TabActivity {

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);

    String result;
    String result2;

    Bundle extras = getIntent().getExtras();
    Bundle extras2 = getIntent().getExtras();

    if(extras!=null)
    {
        result = extras.getString("gotonextpage");

    } else result = "Didnt work !" ;

    if(extras2 !=null)
    {
        result2 = extras2.getString("goto");

    } else result2 = "Didnt work !" ;

    TabHost tabHost = getTabHost();
    TabHost.TabSpec spec;
    Intent intent;

    intent = new Intent().setClass(this, Tab_1.class);
    intent.putExtra("result", result);
    spec = tabHost.newTabSpec("first").setIndicator("First").setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, Tab_2.class);
    intent.putExtra("result2", result2);
    spec = tabHost.newTabSpec("second").setIndicator("Second").setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(0);

}
} 
```

**Tab_1.java**

```
public class Tab_1 extends Activity 
{
TextView tv1;
String result;

/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.main2);

Bundle extras = getIntent().getExtras();
if(extras != null)
{   
    result = extras.getString("result");
} else result = "didnt work";

tv1 = (TextView)findViewById(R.id.textView_main2);
tv1.setText(result);
}
 } 
```

**Tab_2.java**

```
 public class Tab_2 extends Activity {

String result2;
TextView tv2;

/** Called when the activity is first created. */   

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main3);

    Bundle extras2 = getIntent().getExtras();
    if(extras2 != null) {   
        result2 = extras2.getString("result2");
    } else result2 = "didnt work";

    tv2 = (TextView)findViewById(R.id.textView_main3);
    tv2.setText(result2);

    }
 } 
```

谢谢你的帮助！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:10:58.827

您的代码中几乎没有愚蠢的错误。请进行更正：

更改特定的代码行：

```
 1) SoapPrimitive res = (SoapPrimitive)envelope.getResponse(); 
```

和

```
 SoapPrimitive res = (SoapPrimitive)env.getResponse();

  2)request.addProperty("Celsius",txtFar.getText().toString()); 
```

和

```
 req.addProperty("Celsius",txtFar.getText().toString()); 
```

你会得到结果。

# jquery - 删除谷歌地图背景色

> ID：11201259
> 
> 赞同：3
> 
> 时间：2012-06-26T05:32:19.013
> 
> 标签：jquery, google-maps, google-maps-api-3, background-color

我试图让我的谷歌地图透明。我已经设法改变了地图图块的不透明度（标记也是透明的，但我需要稍后对其进行排序）。我想在页面中添加一个看起来像折叠的渐变，然后让透明地图覆盖它所以它看起来在地图中的折叠线。

我注意到谷歌正在为包含地图的 div 添加背景颜色......在我的计划中有点迷惑。

我尝试使用 jquery 定位 div 以将背景设置为无。不幸的是，谷歌赢了，我无法改变它。

```
$('div div#example').css("background-color","#000"); 
```

这是一个小提琴，展示了我如何设置[http://jsfiddle.net/pTuQ4/](http://jsfiddle.net/pTuQ4/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T07:57:24.303

有一个[地图选项](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)可以更改背景颜色：`backgroundColor`

例如：

```
var mapOptions = {
    zoom: 4,
    center: myLatLng,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    backgroundColor: "black"
}; 
```

# mobile - 主干.js 在同一功能上触发触摸/鼠标事件之一

> ID：11201260
> 
> 赞同：1
> 
> 时间：2012-06-26T05:32:19.140
> 
> 标签：mobile, backbone.js

我有一个带有移动和桌面版本事件的主干视图：

```
events: {
  "touchstart .button": "action1",
  "mousedown  .button": "action1",
  "touchend   .button": "action2",
  "mouseup    .button": "action2",
} 
```

我只想要从我的移动设备触摸时触发的事件之一。目前在我的一个移动设备中，action1 被触发了两次。

我曾尝试使用[此解决方案](https://stackoverflow.com/questions/8503453/click-event-called-twice-on-touchend-in-ipad)中的自定义方法，但不知何故，在 Android 2.3 中，不会触发 touchstart 之后的 touchend 自定义方法，而是会触发纯“touchend”。

因此，我在想如果“touchend”被触发，Backbone.js 是否可以防止“mouseup”被触发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T04:07:55.853

另一种方法，对我来说感觉稍微不那么老套：

我喜欢测试触摸事件并在应用程序初始化时设置一个全局变量。

`MyApp.clickEvent = ('ontouchstart' in window) ? "touchstart" : "mousedown";`

然后在我看来，我执行以下操作：

```
events: function() {
    var _events = {};
    _events[MyApp.clickEvent + " .button"] = "action1";

    return _events;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T07:27:16.867

一个 hacky 解决方案是使用该`underscore.js`函数`throttle`来制作它，以便每 x 毫秒只能调用一次该函数。[查看此处](http://underscorejs.org/#throttle)的文档，看看它是否适合您的需求。

最终的解决方案是：

```
action1: _.throttle(function(params) {
    // Do what you do here
}, 400); // The timeframe within which the function can be called just once. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T19:08:44.637

您可以定义一个函数来确定触摸设备，例如：

```
function is_touch_device() {  
  try {  
    document.createEvent("TouchEvent");  
    return true;  
  } catch (e) {  
    return false;  
  }  
} 
```

*   这个函数来自另一个线程[使用 JavaScript 检测“触摸屏”设备的最佳方法是什么？](https://stackoverflow.com/questions/4817029/whats-the-best-way-to-detect-a-touch-screen-device-using-javascript)

然后在事件中使用它：

```
events: function() {
    if(is_touch_device) {
       return {
          /// touch events
       }

    } else {
      return {
        /// mouse events
      }

}
} 
```

如果它们完全相同，则 dehrg 答案将是一个不那么多余的答案

# c# - SQL DB 迁移建议 --- 更新数据库模型...我可以复制旧记录吗

> ID：11201261
> 
> 赞同：4
> 
> 时间：2012-06-26T05:32:27.570
> 
> 标签：c#, asp.net-mvc, database, merge, database-migration

假设我想更新我的 ASP.NET MVC 网站。不同视图的所有数据都存储在两个 SQL 数据库中，一个用于角色和成员资格，一个用于内容。如果数据库中的表基于某个模型并且我修改了该模型，我如何将旧模型中的数据合并到新模型中？最好是自动的。

我目前正在使用 DropAndCreateIfModelChanges。我知道我很可能需要复制数据库并说一个生产数据库和一个开发数据库来处理所有模型更改。反过来，开发数据库必须复制到生产环境中。

或者在 SQL mgmt 中，我可以手动在 SQL mgmt 中添加新列，而不是删除数据库及其数据吗？那也会很完美。

在此先感谢...今晚可能不会再读了...

编辑：因此，使用下面提供的信息，任何人都可以推荐使用 ASP.NET 4、IIS 7.5 和 SQL 2008 R2 进行数据库迁移的工具。哪些最容易集成，哪些简单，哪些更高级？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:59:21.130

我使用并推荐[DbUp](http://www.paulstovell.com/dbup)，因为它简单且基于脚本，但还有其他几个迁移工具，例如：

*   [亚音速迁移](http://blog.wekeroad.com/2010/03/15/subsonic-migrations-without-subsonic)
*   [RikMigrations](http://www.rikware.com/page/RikMigrations.aspx)
*   [迁移者网](http://code.google.com/p/migratordotnet/)
*   [机器迁移](http://blog.eleutian.com/2008/04/25/AFirstLookAtMachineMigrations.aspx)

# lua - Lua如何从文件中读取数据

> ID：11201262
> 
> 赞同：41
> 
> 时间：2012-06-26T05:32:27.850
> 
> 标签：lua

我想知道是否有办法从文件中读取数据，或者只是查看它是否存在并返回一个`true`或`false`

```
function fileRead(Path,LineNumber)
  --..Code...
  return Data
end 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-06-26T09:58:51.407

尝试这个：

```
-- http://lua-users.org/wiki/FileInputOutput

-- see if the file exists
function file_exists(file)
  local f = io.open(file, "rb")
  if f then f:close() end
  return f ~= nil
end

-- get all lines from a file, returns an empty 
-- list/table if the file does not exist
function lines_from(file)
  if not file_exists(file) then return {} end
  local lines = {}
  for line in io.lines(file) do 
    lines[#lines + 1] = line
  end
  return lines
end

-- tests the functions above
local file = 'test.lua'
local lines = lines_from(file)

-- print all line numbers and their contents
for k,v in pairs(lines) do
  print('line[' .. k .. ']', v)
end 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-08-06T13:53:37.360

You should use the [I/O Library](http://www.lua.org/manual/5.3/manual.html#6.8) where you can find all functions at the `io` table and then use `file:read` to get the file content.

```
local open = io.open

local function read_file(path)
    local file = open(path, "rb") -- r read mode and b binary mode
    if not file then return nil end
    local content = file:read "*a" -- *a or *all reads the whole file
    file:close()
    return content
end

local fileContent = read_file("foo.html");
print (fileContent); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-19T09:49:59.500

如果要逐行解析空格分隔的文本文件，只需添加一点。

```
read_file = function (path)
local file = io.open(path, "rb") 
if not file then return nil end

local lines = {}

for line in io.lines(path) do
    local words = {}
    for word in line:gmatch("%w+") do 
        table.insert(words, word) 
    end    
  table.insert(lines, words)
end

file:close()
return lines;
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T08:46:19.087

有一个可用的[I/O 库](http://www.lua.org/pil/21.html)，但它是否可用取决于您的脚本主机（假设您在某处嵌入了 lua）。如果您使用的是命令行版本，它是可用的。完整的[I/O 模型](http://www.lua.org/pil/21.2.html)很可能是您正在寻找的。

# java - 删除 Java 中除制表符之外的所有其他尾随空白字符

> ID：11201264
> 
> 赞同：1
> 
> 时间：2012-06-26T05:32:47.297
> 
> 标签：java

我知道删除空格就像 String.trim() 一样简单。但是我的字符串包含我想保留的制表符 (\t) 字符。

例子：

```
"teststring\t\t\t     ".trimSpaceNotTab() => "teststring\t\t\t" 
```

我目前的实现是使用 split();

```
String[] arr = tabbedString.split("\t"); 
```

然后将它们作为字符串连接到某个地方。

我发现这个实现又慢又丑。

Java中有没有更好的方法可以保留选项卡？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T05:46:17.067

怎么样

```
tabbedString.replaceAll("[ \n\x0B\f\r]","")
```

使用的功能 -[`String.replaceAll()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

如果您还想使用标签并删除它们，请使用预定义的字符类`\s`

[模式总结](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html#sum)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:37:29.803

[遍历字符串并使用isSpaceChar](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Character.html#isSpaceChar%28char%29)询问每个 Char 是否有空格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T05:47:51.917

使用替换所有空格但不替换制表符（\t）的正则表达式。

# ios4 - UIViewController viewDidLoad 不调用

> ID：11201267
> 
> 赞同：0
> 
> 时间：2012-06-26T05:33:17.233
> 
> 标签：ios4, uiviewcontroller

我是ios开发新手。我想开发自定义导航按钮方法。

```
-(void) handleNext:(id)sender
{
      MRGAppDelegate *appDelegate = (MRGAppDelegate*)
      [[UIApplication sharedApplication]delegate];

      [appDelegate.viewController GotoDirectoryView:self.restListViewController calledView:self.view];

} 
```

在 MRGViewController.m

```
 -(void) GoToDirectoryView:(RestaurantListViewController*) resViewContrller calledView:(UIView*)viewControllerView
{
     self.resListViewController = resViewController;
     [resViewController release];
     [viewControllerView removeFromSuperview];
     [self.resListViewController viewDidLoad];
     [self.view addSubview:self.resListViewController.view];

} 
```

但是不要调用 RestaurantListViewController viewDidLoad 不要调用。没有出现错误。我不知道为什么？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:14:40.907

`viewDidLoad`等`viewWillAppear`是视图控制器生命周期方法，当视图加载到导航堆栈时会自动调用这些方法。您根本不需要调用这些方法。

目前，您只是在现有视图控制器上添加一个视图，而如果您希望调用视图控制器生命周期方法，则需要加载一个新的视图控制器。

像这样使用 -

```
[self.navigationController pushViewController:restListViewController animated:YES];
[restListViewController release]; 
```

编辑 1 -

```
 restListViewController = [[RestaurantListViewController alloc] init];

[self presentModalViewController:restListViewController animated:YES]; 
 [restListViewController release]; 
```

# c++ - 从文件中读取数据并填充 STL 向量

> ID：11201268
> 
> 赞同：0
> 
> 时间：2012-06-26T05:33:19.857
> 
> 标签：c++, stl

```
struct DataValue
{
    DataValue() : uiQuality(0) {} // Here 0 stands for good.
    unsigned int    uiQuality;
    std::string     timeChanged;
    float           value;
};

std::vector<DataValues> myDataValues 
```

在我的应用程序中的某个时刻，我的向量中的数据已被填充。我正在使用下面的文件写入文件。

```
std::ofstream myfile("myData.txt", std::ios::app);

for (int j = 0; j < myDataValues.size(); j++)
{
    std::string quality;
    if(myDataValues[j].quality == 0) {
        quality = "good";
    }
    else {
        quality = "bad";
    }
    myfile << myDataValues[j].timeChanged.c_str() << "  " <<  myDataValues[j].value  << "  " <<  quality << std::endl; 
} 
```

文件如下所示。

```
2012-06-25 12:41:56.789  55  good
2012-06-25 12:51:14.782  55  good
2012-06-25 05:25:16.456  62.6925  good
2012-06-25 05:26:11.458  63.4109  good
2012-06-25 05:27:01.459  63.0383  good
2012-06-25 05:27:56.959  61.5266  good
2012-06-25 05:29:01.959  58.5354  good
2012-06-25 05:32:06.963  47.5656  good
2012-06-25 05:33:06.964  44.9916  good
2012-06-25 05:33:11.963  44.8267  good
2012-06-25 05:34:06.965  43.6011  good
2012-06-25 05:34:56.965  43.493  good
2012-06-25 12:51:14.782  52.418  good
2012-06-25 09:49:54.112  0  good
2012-06-25 11:50:30.781  0  good 
```

现在我必须在其他应用程序中读取上述文件并填充另一个向量。填充向量，无论它是否重复，都不需要此检查。

```
 std::vector<DataValues> anotherDataValues 
```

请求示例代码 如何从上面的文件中读取数据并填充上面的向量？

我如何有效地做到这一点。

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:18:23.343

显而易见的方法是为该类编写一个`>>`(and `<<`) 运算符。插入运算符非常简单：

```
std::ostream&
operator<<( std::ostream& dest, DataValue const& data )
{
    dest << data.timeChanged << "  "
         << data.value << "  "
         << (data.uiQuality == 0 ? "good" : "bad");
    return dest;
} 
```

完成此操作后，您可以通过简单地编写来输出数组：

```
std::copy( myDataValues.begin(), myDataValues.end(),
           std::ostream_iterator<DataValue>( myFile, "\n" ) ); 
```

`<<`运算符有点棘手，因为您必须处理格式中可能出现的错误。鉴于数据格式包含空格，我会强加一个 `\n' 作为终止符，并执行以下操作：

```
std::istream&
operator>>( std::istream& source, DataValue& dest )
{
    std::string line;
    if ( std::getline( source, line ) ) {
        std::istringstream parse( line );
        std::string date;
        std::string time;
        float value;
        std::string status;
        parse >> date >> time >> value >> status >> std::ws;
        if ( ! parse || (status != "good" && status != "bad") ) {
            source.setstate( std::ios_base::failbit );
        } else {
            dest.timeChanged = date + ' ' + time;
            dest.value = value;
            dest.uiQuality = (status == "good" ? 0 : 1);
        }
    }
    return source;
} 
```

请注意，日期格式中的空格会使事情复杂化。如果您对格式有一定的控制权，我会摆脱它。（例如，ISO 使用 a`'T'` 来分隔日期和时间。）无论如何，使用某种类 for`DataTime`是有意义的；当然，这个类会提供它自己的`>>`and `<<`，然后你可以在上面使用它。

完成此操作后，阅读也变得微不足道：

```
std::vector<DataValue> v(
    (std::istream_iterator<DataValue>( myFile )),
    (std::istream_iterator<DataValue>()) ); 
```

（注意额外的括号。至少有一个参数是必要的，以避免最令人尴尬的解析问题。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:00:01.880

您应该首先弄清楚如何读取*一个*DataValue 对象。然后填充它们的向量很容易。以下是您可以执行的操作（尽管您可能应该提供更全面的错误检查）。

```
std::istream & operator>>(std::istream & is, DataValue & dv) {
    std::string date, time, quality;
    float value;
    if (is >> date >> time >> value >> quality) {
        if (quality == "good")
            dv.uiQuality = 0;
        else if (quality == "bad")
            dv.uiQuality = 1;
        else {
            is.setstate(std::ios::failbit);
            return is;
        }
        dv.timeChanged = date + " " + time;
        dv.value = value;
    }
    return is;
} 
```

然后，您可以像这样简单地填充向量：

```
std::ifstream fin("myData.txt");
std::istream_iterator<DataValue> beg(fin), end;
std::vector<DataValue> v(beg,end); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T05:38:07.757

显然你可以只`push_back`在 stl 向量上。但是，如果您这样做，并且知道您的向量有多长。您还可以使用该`reserve`函数请求存储足够的空间，以便不需要调整向量的大小。

或者，您也可以使用`resize`函数调用，并填写您需要的大小的 stl 向量。

[http://www.cplusplus.com/reference/stl/vector/](http://www.cplusplus.com/reference/stl/vector/)

您还可以从 ifstream 的`getline`函数中获取数据

[http://www.cplusplus.com/reference/iostream/istream/getline/](http://www.cplusplus.com/reference/iostream/istream/getline/)

# login - 跨虚假子域和主域的 Joomla 持久用户会话

> ID：11201271
> 
> 赞同：2
> 
> 时间：2012-06-26T05:34:03.187
> 
> 标签：login, joomla, subdomain

有人可以帮我找到一个解决方案来维护跨子域的会话。

该网站为用户使用虚假子域，例如。(thisuser.mysite.com/)。所有虚假子域都映射到主站点 (mysite.com)，因此所有内容都有一个通用数据库。

子域仅用于站点上的几个组件（com_xxx）。对于其他组件，用户通过 htaac​​cess 被重定向到主站点。

问题是当用户从 thisuser.mysite.com 重定向到 mysite.com 时，反之亦然。他们的会话没有被维护。用户必须重新登录。

我尝试将 php.ini 中的 cookie 域更新为“.mysite.com”，但似乎没有帮助。

假设解决方案在于使 cookie 可以从所有子域读取，而不管它是从哪里设置的，那么该站点是否有可能在所有子域和主域中自动登录而没有任何核心黑客攻击？

谢谢大家，您的时间和建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:14:55.197

好吧，这很容易，我在本地机器上测试，如果域没有点，那么 cookie 处理得不好。

只需确保将 taht cookie 域设置为“.mysite.com”即可完成工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T02:46:37.510

我不知道你怎么能做到这一点......

这只是一个想法，它将依赖于javascript ...

当用户使用您的登录表单登录时......将存在一个隐藏的 iframe，并且 javascript 会将您的登录数据发布到您网站的每个域的登录页面。把他们锁起来……

我不觉得这是一件安全的事情......也许我错了......

您可以使用 joomla 的 mootool 框架向每个域发送 ajax 请求...

否则可能需要检查 joomla 如何在数据库中为站点上的每个用户创建会话行。也许您可以使用 1 次登录为每个域创建它们。我要去检查我的mysql....

您使用的是 joomla 1.5 还是 2.5？

否则我为你找到了这份文件：

[http://docs.joomla.org/Multiple_Domains_and_Web_Sites_in_a_single_Joomla!_installation](http://docs.joomla.org/Multiple_Domains_and_Web_Sites_in_a_single_Joomla!_installation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T14:06:12.000

**1\. 还建议您在不同网站使用相同的joomla“秘密”配置值，因为它用于检查不同域之间交换的数据。** 2\. 将 cookie 域设置为 '.mysite.com' 完成工作

# jquery - How to restrict the div to margin right or left

> ID：11201276
> 
> 赞同：0
> 
> 时间：2012-06-26T05:34:33.333
> 
> 标签：jquery, html, scroll

I have created a custom scroll. In which I am shifting the contents right and left by increasing or decreasing the margin. I want to restrict the div not to margin more when the last or first content is visible or you can say I want to make it like scroll. How I can restrict the div not to move anymore

```
$('#left').live('click' , function(){
$('#myDiv').css("margin-left","-=10px");

})
$('#right').live('click' , function(){
$('#myDiv').css("margin-left","+=10px");

}) 
```

[JS Fiddle](http://jsfiddle.net/ranasaani/57wdH/80/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:38:44.670

Define and maximum limit for margin left or right, then use this value to compare before changing its position.

```
var maxMargin = 500, minMargin = 20;

$('#left').on('click' , function(){
    if($('#myDiv').css("marginLeft") > minMargin) {
        $('#myDiv').css("margin-left","-=10px");
    }
});

$('#right').on('click' , function(){
    if($('#myDiv').css("marginLeft") < maxMargin) {
        $('#myDiv').css("margin-left","+=10px");
    }
}); 
```

### And use `.on()` rathan than `.live()`, as it has been deprecated.

# sql - 根据每行中的列值重复行

> ID：11201278
> 
> 赞同：9
> 
> 时间：2012-06-26T05:34:43.130
> 
> 标签：sql, oracle

我的这张表包含以下数据

```
 Job  Quantity   Status  Repeat 
1    100         OK     2 
2    400         HOLD   0 
3    200         HOLD   1 
4    450         OK     3 
```

根据每行的重复列中的值，应再次重复该行。例如，对于作业 1，重复值为 2，因此作业 1 应再重复两次。

结果表应如下所示

```
 Job      Quantity   Status  Repeat 
1        100        OK      2 
1        100        OK      2 
1        100        OK      2 
2        400        HOLD    0 
3        200        HOLD    1 
3        200        HOLD    1 
4        450        OK      3 
4        450        OK      3 
4        450        OK      3 
4        450        OK      3 
```

有人可以帮我解决这个问题吗？我正在使用 oracle 10g

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T05:51:49.800

您可以使用递归 CTE：

```
with    cte(Job, Repeat, i) as 
        (
        select  Job
        ,       Repeat
        ,       0
        from    YourTable
        union all
        select  Job
        ,       Repeat
        ,       i + 1
        from    cte
        where   cte.i < cte.Repeat
        )
select  *
from    cte
order by
        Job
,       i 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!4/61cfa/5/0)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-26T06:06:15.910

假设您不会每行生成超过 1000 行：

```
with num as (select level as rnk from dual connect by level<=1000)
select Job,  Quantity,   Status,  Repeat, rnk 
from t join num on ( num.rnk <= repeat )
order by job, rnk; 
```

这是一个测试： [http ://sqlfiddle.com/#!4/4519f/12](http://sqlfiddle.com/#!4/4519f/12)

**更新：**正如 Jeffrey Kemp 所说，您可以使用子查询“检测”最大值：

```
with num as (select level as rnk 
             from dual 
             connect by level<=(select max(repeat) from t)
             )
select job,  quantity,   status,  repeat, rnk 
from t join num on ( num.rnk <= repeat )
order by job, rnk; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-26T05:41:49.147

您可以先在数据表中获取此数据，然后根据 repeat 的值将行添加到新数据表中，然后绑定此新数据表，而不是使用查询进行此操作。

# php - 输出 facebook url 评论 json_decode

> ID：11201282
> 
> 赞同：-1
> 
> 时间：2012-06-26T05:35:29.893
> 
> 标签：php, facebook, json

我正在尝试在 PHP 中输​​出 facebook 页面的评论。例如：

[http://graph.facebook.com/comments/?ids=http://www.example.com](http://graph.facebook.com/comments/?ids=http://www.example.com)

有人可以解释一下如何正确解码，以便我可以在页面上显示所有评论吗？

我已经尝试了几个不同的脚本/示例，但它们似乎都没有返回任何结果或错误，所以我认为图形 API 可能已经改变了。

```
 //get the json string from URL
        $data = file_get_contents("http://www.example.com");

        //transform json to associative array
        $data = json_decode($data, true);

        //use only the comments array
        $comments = $data['http://www.example.com']['comments']['data'];

        foreach($comments as $comment) { 
            echo $comment['from']['name'];
            echo $comment['message'];
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T05:40:35.460

```
//get the json string from URL
$data = file_get_contents("http://graph.facebook.com/comments/?ids=http://www.example.com");

//transform json to associative array
$data = json_decode($data, true);

//use only the comments array
$comments = $data['http://www.example.com']['comments']['data'];

//you should only see the comments array printed
echo "<pre>"; print_r($comments); echo "</pre>"; 
```

# c# - WPF。禁用/启用 ListBox 项目 ContextMenu & MVVM

> ID：11201290
> 
> 赞同：0
> 
> 时间：2012-06-26T05:36:22.037
> 
> 标签：c#, .net, wpf, mvvm, contextmenu

我有一个包含几个项目的列表框。此项目可能处于 3 种状态：

*   未连接
*   连接的
*   积极的

我需要为每个项目分配一个上下文菜单。实际上，我想为每个列表框项重复使用一个菜单项列表，并且我想根据它们的状态禁用/启用菜单项。我正在使用 MVVM。我想知道实现目标的最佳实践是什么？

```
 <DataTemplate x:Key="TemplateSelector">
        <ContentPresenter Content="{Binding}" Name="contentPresenter">
            <telerik:RadContextMenu.ContextMenu>
                <telerik:RadContextMenu>
                    <telerik:RadMenuItem Header="Connect" Style="{StaticResource ResourceKey=ContextMenuStyle}" />
                    <telerik:RadMenuItem Header="Disconnect" />
                    <telerik:RadMenuItem Header="Delete Database" />
                </telerik:RadContextMenu>
            </telerik:RadContextMenu.ContextMenu>
        </ContentPresenter>

        <DataTemplate.Triggers>
            <DataTrigger Binding="{Binding Path=ConnectionType}" Value="Disconnected">
                <Setter TargetName="contentPresenter" Property="ContentTemplate" Value="{StaticResource OfflineDeviceItemTemlpate}" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=ConnectionType}" Value="Internet">
                <Setter TargetName="contentPresenter" Property="ContentTemplate" Value="{StaticResource OnlineDeviceItemTemplate}" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=ConnectionType}" Value="Wifi">
                <Setter TargetName="contentPresenter" Property="ContentTemplate" Value="{StaticResource OnlineDeviceItemTemplate}" />
            </DataTrigger>
        </DataTemplate.Triggers>
    </DataTemplate>
</UserControl.Resources>

<Grid>
    <telerik:RadListBox x:Name="lsbDevices" ItemsSource="{Binding Path=Devices}" ItemTemplate="{StaticResource TemplateSelector}" 
                        SelectedItem="{Binding SelectedDevice, Mode=TwoWay}" Grid.Row="0" />
</Grid> 
```

我正在考虑为 ModelView 中的每个菜单项添加一个属性，该属性将说明是否应启用相应的菜单项（例如， public `bool ConnectEnabled {...}`）。这是一个好方法还是我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:07:27.247

我认为这是一个 UI 逻辑，你不应该用 XAML 编写它。我建议你可以有一个绑定到列表框项目的类，并且这个类将有一个状态对象或属性，它将维护启用/禁用逻辑用于上下文菜单。您可以将此属性绑定到上下文菜单。

# jquery - 在 AJAX 发布后重新加载 jQuery 函数或类

> ID：11201298
> 
> 赞同：1
> 
> 时间：2012-06-26T05:37:33.803
> 
> 标签：jquery, ajax

我正在制作一个类似于 Stackoverflow 的问答页面，虽然我是手写代码，基本上是为了好玩。

我正在写一个在点击时发生的 ajax 帖子，它带来了一个据称可点击的 div。AJAX 帖子看起来像这样：

```
function answerQuestion(){
    $('.answerQuestion').click(function(){
        var user_id = $('#user_id').val();
        var q_id = $('.q_id').val();
        var answer = CKEDITOR.instances.editor1.getData();
        if(answer && q_id && user_id){
            $.post("scripts/questions/answerQuestion.php", {user_id : user_id, q_id : q_id, answer : answer}, function(answerThisQuestion) {
                $('.answerTotalCont').last().css('border-bottom', '1px dashed #444');
                $(answerThisQuestion).hide().appendTo('.allAnswers').slideDown(1000, 'easeOutExpo');
            });
        }
    });
} 
```

当帖子附加数据时，它会带来一个名为“answerAskButton”的可点击 div。这个 div 有可能在您加载时已经在页面上，并且总是在 AJAX 调用之后加载。

当点击这个“按钮”时，会产生不同的 AJAX 帖子，基本上是为了发表评论。这是它的代码：

```
function submitComment(noType) {
    //$('.answerAskButton').click(function(){
    $('.answerAskButton').live("click", function(){
        //GET ALL OF THE VARIABLES - THIS CODE IS FUNCTIONING PROPERLY - THIS IS JUST ABRIDGED TO SHOW SMALLER CODE
        $.post("scripts/questions/postComment.php", {details : details, user_id : user_id, q_id : q_id, qora : qora, a_id : a_id}, function(postComment) {
            noComment.slideUp(1000, 'easeOutExpo');
            $(postComment).hide().appendTo(newComment).slideDown(1000, 'easeOutExpo');
            $('.questComment').val(noType);
        });
        $('.questCommentsCont').slideUp(300, 'easeOutCirc');
        $('.questComment').val(noType);
    });
} 
```

这些都是在文件加载时调用的。

问题是：当我发布 answerQuestion() 帖子时，在它加载 AJAX 数据并显示一个新的可点击按钮后，该按钮 (answerAskButton) 不再可点击，但是，显然已加载的其他按钮仍在工作。

我听说 .live() 是解决此问题的方法，但正如您所见，它对我不起作用。

有什么建议吗？

更新:: 我更新了代码 .on() 而不是 .live()，尽管它仍然无法正常工作。如果您想查看我的代码，[登录在此处](http://beta.mybattlereport.com/enter.php "登录")（用户名：public，密码：public），相关页面是您可以在问答页面上找到的任何这些[问题页面。](http://beta.mybattlereport.com/question.php?question=1)

我们正在讨论的脚本称为 questions.js，可以通过 firebug 或元素检查器查看

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T05:42:15.590

当您使用 jQuery 1.7.x 时，不要像这样`live()`使用**[`.on()`](http://api.jquery.com/on)**：

```
$(document).on('click', '.answerAskButton', function(){
  // your code
}) 
```

因为`live()`已被弃用。

* * *

### 笔记

**`.on()`委托事件的语法：**

```
$(container).on(eventName, target, handlerFunction) 
```

这里，`container`指向`Static-element`在页面加载时属于 DOM 的一个。

* * *

### 完整代码

```
function submitComment(noType) {
   $(document).on('click', '.answerAskButton', function(){
        //GET ALL OF THE VARIABLES - THIS CODE IS FUNCTIONING PROPERLY - THIS IS JUST ABRIDGED TO SHOW SMALLER CODE
        $.post("scripts/questions/postComment.php", {details : details, user_id : user_id, q_id : q_id, qora : qora, a_id : a_id}, function(postComment) {
            noComment.slideUp(1000, 'easeOutExpo');
            $(postComment).hide().appendTo(newComment).slideDown(1000, 'easeOutExpo');
            $('.questComment').val(noType);
        });
        $('.questCommentsCont').slideUp(300, 'easeOutCirc');
        $('.questComment').val(noType);
    });
} 
```

### 提示

*最好使用其他一些静态元素而不是`document`委托`.on()`。*

# android - 如何使用设备中的数据库设置铃声？

> ID：11201300
> 
> 赞同：1
> 
> 时间：2012-06-26T05:37:45.200
> 
> 标签：android

我想使用我设备中的数据库设置铃声。我的应用程序能够从设备中获取铃声并将其存储在数据库中。现在我想要做的就是我通过微调器选择的任何铃声，它设置为我的默认铃声。

这是我的代码

```
public class SMSReceiver extends BroadcastReceiver{

    DBAdapter db ;
    int vol = 7;
    String code="";
        @Override
    public void onReceive(Context context, Intent intent) {
    contextx=context;
         Bundle bundle = intent.getExtras();
        // TODO Auto-generated method stub
         db = new DBAdapter(context);
         db.open();

         Cursor c = db.getAllTitles();
         int row_size = c.getCount();
         System.out.println("row size++++++++"+row_size);
         if(row_size>0)
         {
             c.moveToFirst();
             code = c.getString(1);
             String status = c.getString(2);
             String ring = c.getString(3);
             vol = c.getInt(4);
             String mode = c.getString(5);

             System.out.println("code++++++++"+code);
             System.out.println("status++++++++"+status);
             System.out.println("ring++++++++"+ring);
             System.out.println("vol++++++++"+vol);
             System.out.println("mode++++++++"+mode);

                   File path = Environment.getExternalStoragePublicDirectory(
                    Environment.DIRECTORY_RINGTONES);
         File Ringtonefile = new File(path,ring);
         setMyRingtone(Ringtonefile) ;
         }

         Object messages[] = (Object[]) bundle.get("pdus");
            SmsMessage smsMessage[] = new SmsMessage[messages.length];
            for (int n = 0; n < messages.length; n++) {
                smsMessage[n] = SmsMessage.createFromPdu((byte[]) messages[n]);
            }

            if(smsMessage[0].getMessageBody().equals(""+code))
            {
                AudioManager audioManager = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);

                  audioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
              audioManager.setStreamVolume(AudioManager.STREAM_RING, vol, AudioManager.FLAG_SHOW_UI + AudioManager.FLAG_PLAY_SOUND);

            }  
            }

   public void setMyRingtone(File file)  
 {  
   ContentValues values = new ContentValues();  
     values.put(MediaStore.MediaColumns.DATA, file.getAbsolutePath());  
     values.put(MediaStore.MediaColumns.TITLE, file.getName());
     values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/mp3");
     values.put(MediaStore.Audio.Media.IS_RINGTONE, true);  
     values.put(MediaStore.Audio.Media.IS_NOTIFICATION, false);  
     values.put(MediaStore.Audio.Media.IS_ALARM, false);  
     values.put(MediaStore.Audio.Media.IS_MUSIC, false);  

     Uri uri = MediaStore.Audio.Media.getContentUriForPath(file.getAbsolutePath());  
     Uri newUri = contextx.getContentResolver().insert(uri, values);  
     RingtoneManager.setActualDefaultRingtoneUri(contextx, RingtoneManager.TYPE_RINGTONE, newUri);} } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:52:54.253

尝试使用[RingtoneManager](http://developer.android.com/reference/android/media/RingtoneManager.html)设置默认铃声：

```
public class SMSReceiver extends BroadcastReceiver{
Context contextx;
    DBAdapter db ;
    int vol = 7;
    String code="";
        @Override
    public void onReceive(Context context, Intent intent) { 
      this.contextx=context;
      //your code....

    File Ringtonefile = new File(path, "Ringtone.mp3");
    setMyRingtone(Ringtonefile) ;
    public void setMyRingtone(File file)  
         {  
           ContentValues values = new ContentValues();  
           values.put(MediaStore.MediaColumns.DATA, file.getAbsolutePath());  
             values.put(MediaStore.MediaColumns.TITLE, file.getName());  
    //       values.put(MediaStore.MediaColumns.SIZE, file.length());  
           values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/mp3");  
    //       values.put(MediaStore.Audio.Media.ARTIST, "Madonna");  
    //       values.put(MediaStore.Audio.Media.DURATION, 230);  
           values.put(MediaStore.Audio.Media.IS_RINGTONE, true);  
           values.put(MediaStore.Audio.Media.IS_NOTIFICATION, false);  
           values.put(MediaStore.Audio.Media.IS_ALARM, false);  
           values.put(MediaStore.Audio.Media.IS_MUSIC, false);  

           Uri uri = MediaStore.Audio.Media.getContentUriForPath(file.getAbsolutePath());  
           Uri newUri = contextx.getContentResolver().insert(uri, values);  
           RingtoneManager.setActualDefaultRingtoneUri(contextx, RingtoneManager.TYPE_RINGTONE, newUri);  
         } 
```

manifast.xml 权限：

```
<uses-permission android:name="android.permission.WRITE_SETTINGS" /> 
```

# c# - 为什么空引用异常？

> ID：11201302
> 
> 赞同：0
> 
> 时间：2012-06-26T05:38:00.020
> 
> 标签：c#, vb.net

任何人都可以帮助我，Visual Basic 应用程序提示我一条消息“对象引用未设置为对象的实例”。我在一个解决方案中有 2 个项目。一种是用c#开发的，另一种是用vb开发的。我在 vb 项目中调用 c# 项目的方法。VB代码是：

```
 Dim objUserProfileSystem As New IndexCatalogSystem() // c# project class
    Dim Ds_Themes As New DataSet()                       //dataset
    Ds_Themes = objUserProfileSystem.FillThemes(msg, 1)  //c# class method returning dataset
    ThemeID = Ds_Themes.Tables(0).Rows(0)("ThemeID")     //getting themeid from dataset 
```

我正在从 c# 应用程序调用 vb 应用程序。喜欢：

```
 System.Diagnostics.Process.Start(Application.StartupPath + "\\DocumentViewer.exe ", " (" + val + ") "); 
```

当我单独调试 vb 项目时它工作正常，当我从 c# 应用程序调用 vb 应用程序时，它提示错误。我错过了任何 .net 框架参考吗？

这是 Fill_Theme 方法。

```
 public DataSet FillThemes(ref String msg, int UserID)
        {
            try
            {
                //inilialize the Connection 
                Connection objCon = new Connection();
                if (objCon.Ini_Connection(ref msg) == true)
                {
                    //declare data set
                    DataSet DsGroup = new DataSet();
                    //declare data adapter
                    SqlDataAdapter DaRole = new SqlDataAdapter();

                    //initialize Sql Select Command and fill dataset
                    DaRole.SelectCommand = new SqlCommand("SELECT ThemeID FROM DMUsers where UserID = " + PARA_User_ID, objCon.con);
                    DaRole.SelectCommand.Parameters.Add(PARA_User_ID, SqlDbType.Int).Value = UserID;
                    DaRole.SelectCommand.CommandType = CommandType.Text;
                    DaRole.Fill(DsGroup, "DMUsers");

                    //Dispose object
                    objCon.Dispose_Con(ref msg);
                    DaRole.SelectCommand.Dispose();
                    DaRole.Dispose();

                    //Return Folder Dataset
                    objCon.Dispose_Con(ref msg);
                    return DsGroup;
                }
                else
                {
                    msg = "Connect ion fail contact Administrator";
                }
                return null;
            } 
```

我开发的整个方法称为主题。

```
 Private Sub Themes()
    Dim objUserProfileSystem As New IndexCatalogSystem()
    Dim Ds_Themes As New DataSet()
    Ds_Themes = objUserProfileSystem.FillThemes(msg,modCommon.UserID)
    ThemeID = Ds_Themes.Tables(0).Rows(0)("ThemeID")

    If Ds_Themes IsNot Nothing Then
        If ThemeID = 1 Then
            MessageBox.Show("6")
            THEMES3Blue()
        ElseIf ThemeID = 2 Then
            THEMES2Olive()
        ElseIf ThemeID = 3 Then
            THEMES1Silver()
        Else
            THEMES1Silver()
        End If
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:18:25.147

我看到在这一行中，可能会出现问题：

```
ThemeID = Ds_Themes.Tables(0).Rows(0)("ThemeID") 
```

尝试这个：

```
if(Ds_Themes != null) {
 if( Ds_Themes.Tables != null) {
    if( Ds_Themes.Tables.Size() > 0) {
       if(Ds_Themes.Tables(0).Rows != null) {
         if(Ds_Themes.Tables(0).Rows.Size() > 0) {
          ThemeID = Ds_Themes.Tables(0).Rows(0)("ThemeID")
         }
       }
    }
  }
} 
```

我使用上面的 5 个 if 语句，因为 VB.NET 在计算“&&”运算符时没有优化。

# c# - 在单独的线程上绘图

> ID：11201306
> 
> 赞同：0
> 
> 时间：2012-06-26T04:38:30.160
> 
> 标签：c#, winforms

我有一个名为“DrawTest”的“公共静态”类，里面是一个方法

```
public static DrawRandomRectangle(Bitmap g)
{

} 
```

我想调用该方法并绘制一堆东西，然后在单独的线程上更新使用图像的图片框。

* * *

为了简化，我不想做任何具体的事情，我只是想学习如何在单独的线程上绘制和更新图片框内的图像。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T04:44:57.453

您想要做的事情的术语称为[Double Buffering](http://en.wikipedia.org/wiki/Multiple_buffering#Double_buffering_in_computer_graphics)。您将在单独的线程上绘制图像，然后在完成后一步将其移至 UI。

MSDN 有一个关于在托管类中使用双缓冲的[完整小节](http://msdn.microsoft.com/en-us/library/ms229622)。

# c# - 在 C# windows 服务中获取 appdata\local 文件夹路径

> ID：11201308
> 
> 赞同：22
> 
> 时间：2012-06-26T05:38:24.637
> 
> 标签：c#, windows-services

我正在尝试使用获取`C:\Users\<username>\AppData\Local`文件夹路径

```
Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData) 
```

在 C# Windows 服务中，但它返回一些其他路径

```
C:\Windows\ServiceProfiles\LocalService\AppData\Local 
```

有谁知道如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T05:47:41.203

您是否在用户帐户下运行该服务？如果没有，该服务将使用自己的配置文件，如您所见。如果用户“登录”了该服务，那么您可以将文件夹传递给该服务并绕过本地检查。否则，请尝试在用户帐户下运行该服务（或为其创建一个帐户）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-25T00:54:19.547

每个用户的 AppData 文件夹都存储在注册表中。

使用此路径：

```
const string regKeyFolders = @"HKEY_USERS\<SID>\Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders";
const string regValueAppData = @"AppData"; 
```

给定一个包含用户 sid 的变量 sid 字符串，您可以获得他们的 AppData 路径，如下所示：

```
string path=Registry.GetValue(regKeyFolders.Replace("<SID>", sid), regValueAppData, null) as string; 
```

# sql-server-2008 - 取消选择具有不同列值的数据

> ID：11201309
> 
> 赞同：0
> 
> 时间：2012-06-26T05:38:34.530
> 
> 标签：sql-server-2008

大家好，我有这个表结构

```
 field 1                  field 2
---------------------------------------------
    1                        1
    1                        2
    2                        1 
```

然后我希望它在选择 Key 时是这样的`Field2 = 1`

```
 field 1                  field 2
---------------------------------------------
   2                         1 
```

我不想返回`field1 = 1`，因为它包含不同的值 field1 IN (1,2)

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:00:10.047

您的帖子似乎不清楚，因为我认为您在描述的某些部分混淆了列名。但是，从您的示例输出来看，我将假设您的意思如下：

> 从表中选择`field2`包含相同值的行`field1`。

如果您只需要输出`field1`and `field2`，您可以执行以下操作：

```
SELECT field1, MAX(field2) AS field2
FROM atable
GROUP BY field1
HAVING COUNT(DISTINCT field2) = 1 
```

如果您的表不能`DISTINCT`包含重复的`(field1, field2)`.

但是，如果表中有更多列并且还需要返回部分或全部列，则可以首先获取上述`field1`值，然后将该行集合返回`atable`以获取完整行，如下所示：

```
SELECT t.*  /* or specify the necessary columns explicitly */
FROM atable AS t
  INNER JOIN (
    SELECT field1
    FROM atable
    GROUP BY field1
    HAVING COUNT(DISTINCT field2) = 1
  ) s ON t.field1 = s.field1 
```

同样，`DISTINCT`可以省略，如上所述。

由于您使用的是 SQL Server 2008，因此您也可以使用窗口聚合。如果您的表不包含 的重复项`(field1, field2)`，则可以使用以下内容：

```
;
WITH counted AS (
  SELECT
    *,
    cnt = COUNT(*) OVER (PARTITION BY field1)
  FROM atable
)
SELECT
  field1,
  field2,
  …
FROM counted
WHERE cnt = 1 
```

但如果允许重复，则需要使用稍微不同的方法，因为`COUNT(DISTINCT …)`. 以下是您可以尝试的方法：

```
;
WITH counted AS (
  SELECT
    *,
    f2min = MIN(field2) OVER (PARTITION BY field1),
    f2max = MAX(field2) OVER (PARTITION BY field1)
  FROM atable
)
SELECT
  field1,
  field2,
  …
FROM minmaxed
WHERE f2min = f2max 
```

也就是说，您将获得`field2`每个`field1`值的最小值和最大值。然后，您将过滤掉`f2min`与 不同的行`f2max`，因为这意味着`field2`组中存在不同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:09:03.093

```
SELECT * FROM table WHERE field_2 = 1 AND field_1 <> 1 
```

# jquery - 仅在弹出 jquery 中打印表数据

> ID：11201313
> 
> 赞同：0
> 
> 时间：2012-06-26T05:38:48.430
> 
> 标签：jquery, printing, html-table

我下面的所有代码部分都显示了我从 ajax 提供数据的表，我的数据显示在动态创建的表内的自定义弹出窗口中；在自定义弹出窗口中，在打印按钮单击上有一个打印按钮我想打印填充有 ajax 数据的表格，该表格以表格格式显示在要打印的同一弹出窗口中。请帮我。

```
function printPreview(i){
             var id=i;     
             var flag=new Array();
                if(checkstatus[i]=="B"){
                        send={address:'http://192.168.1.22:8082/oracledetail/test.php?result=8&table_code='+tableCode[i]}
                        $.ajax({
                            type:"POST",
                            url:"dummytest.php",
                            data:send,
                            success: function(data)
                            {          
                                //alert(data);
                                //centering with css
                                centerPopup();
                                //load popup
                                loadPopup();                                
                                $('#popupContact').html("<a id='popupContactClose'>X</a><h1>Print Bill</h1>"+
                                "<center>"+         
                                "<table id='printView' cellspacing='15px'>"+
                                    "<tr class='rows'>"+
                                        "<td><b><font size='+1'>Sr. No</font></b></td>"+
                                        "<td><b><font size='+1'>Item Name</font></b></td>"+
                                        "<td><b><font size='+1'>Quantity</font></b></td>"+
                                        "<td><b><font size='+1'>Price/Item</font></b></td>"+
                                        "<td><b><font size='+1' style='padding-left:10px;'>Qty*Price</font></b></td>"+
                                    "</tr>"+            
                                "</table>"+ "<br/> <input id='print' type='button' value='Print Bill' />"   +               
                                "</center>"                             
                                 ); 
                                $("#popupContact").delegate('#print',"click",function(){
                                    var tabcode=tableCode[id];
                                    printBill(tabcode);
                                });
                                $("#popupContact").delegate('#popupContactClose',"click",function(){
                                    disablePopup();
                                    location.reload();
                                });
                                var total = 0;                   
                                var responseString=data.split(",");
                                var len= responseString.length;                             
                                for(var i=0;i<len-1;i++){                                   
                                    var orderDetails=responseString[i].split("~");
                                    itemName[i]=orderDetails[0];                            
                                    itemQuantity[i]=orderDetails[1];
                                    priceperItem[i]=orderDetails[2];
                                    itemtotalPrice[i]=orderDetails[3];  
                                    total += parseInt(itemtotalPrice[i]);
                                    $('#printView').append("<tr class='rows'> <td class='srno'><font size='+1' style='text-align=center;'>"+(i+1)+"</font></td>    <td class='itemname'><font size='+1'>"+itemName[i]+"</font></td>  <td class='quantity'><font size='+1'>"+itemQuantity[i]+"</font></td>  <td class='price'> <font size='+1'>"+priceperItem[i]+"</font></td>  <td class='itemtotalprice'><font size='+1'>"+itemtotalPrice[i]+"</font></td> </tr>");    
                                    if(i==len-2){
                                        $('#printView').append("<tr>   <td>&nbsp;</td> <td>&nbsp;</td> <td>&nbsp;</td> <td>&nbsp;</td>    <td> <label> <h3 > Total Bill : "+ total +" </h3> </label>");
                                    }
                                }//for ends.                                

                            }//function ends
                    }); //ajax ends                         
                }//if ends   
                else{                   
                    $('#popupContact').html("<center><h2>Billing Request Not Yet Generated<h2></center>");
                }
        }//function ends.. 
```

这是我的显示数据的弹出窗口，并且只想在此自定义中打印此数据：

![在此处输入图像描述](../Images/f46b02540fda05188f5d8e4efdf5c545.png)

实际上，当我单击打印时，我正在执行以下打印代码：

```
$("#popupContact").delegate('#print',"click",function(){
                                    var tabcode=tableCode[id];
                                    printBill(tabcode);
                                    var display_setting="toolbar=yes,location=no,directories=yes,menubar=yes,";  
                                    display_setting+="scrollbars=yes,width=750, height=600, left=100, top=25"; 
                                    var content_innerhtml = document.getElementById("#printView").innerHTML;  
                                    var document_print=window.open("","",display_setting);  
                                    document_print.document.open();  
                                    document_print.document.write(content_innerhtml);  
                                    document_print.print();  
                                    document_print.document.close();
                                    location.reload();  
                                }); 
```

但是当我调试它时，它在这一行显示错误：

```
line: --> `var content_innerhtml = document.getElementById("#printView").innerHTML;` 
```

> 错误：-->document.getElementById("#printView") 为空

并进一步执行停止并直接`location.reload();` 重新加载页面。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:12:39.443

```
var content_innerhtml = document.getElementById("#printView").innerHTML; 
```

应该

```
var content_innerhtml = document.getElementById("printView").innerHTML; 
```

# iphone - 视频缓存不起作用

> ID：11201315
> 
> 赞同：0
> 
> 时间：2012-06-26T05:39:08.683
> 
> 标签：iphone, objective-c, ios

我正在使用 iOS 中的视频和图像缓存。我已经实现了图像缓存。现在在同一个缓存中，我想存储视频，我还有以下代码用于将图像和视频存储到缓存中：

```
-(void)cacheFromURL:(Food*)foodForUrl
{
AppDelegate *app=[[UIApplication sharedApplication]delegate];
[app.imageCache setCountLimit:50];
NSURL *imageUrl=[NSURL URLWithString:foodForUrl.image];
NSURL *videoUrl=[NSURL URLWithString:foodForUrl.video];
UIImage* newImage = [cache objectForKey:imageUrl.description];

if( !newImage )
{
    NSError *err = nil;

    if(imageUrl!=Nil)
    {
        newImage=[UIImage imageWithData:[NSData dataWithContentsOfURL:imageUrl options:0 error:&err]];
    }

    if(videoUrl!=Nil)
    {
        moviePlayer=[[MPMoviePlayerController alloc]initWithContentURL:videoUrl];
        [app.imageCache setObject:moviePlayer forKey:videoUrl.description];
        NSLog(@"video caching....%@",videoUrl.description);
    }

    if( newImage )
    {
        [app.imageCache setObject:newImage forKey:imageUrl.description];
        NSLog(@"caching....");
    }
    else
    {
    }
}
} 
```

我有以下用于从缓存中检索的代码。它适用于图像，但不适用于视频：

```
- (IBAction)playButton:(id)sender 
{
    AppDelegate *app=[[UIApplication sharedApplication]delegate];
    NSURL *url=[[NSURL alloc]initWithString:food.video];
    NSLog(@"cached for:%@",url.description);
    moviePlayerController=[[MPMoviePlayerController alloc]init];
//    moviePlayerController=[[MPMoviePlayerController alloc]initWithContentURL:[NSURL URLWithString:food.video]];
    moviePlayerController=[app.imageCache objectForKey:url.description];
    moviePlayerController.scalingMode=MPMovieScalingModeAspectFill;
    moviePlayerController.view.frame=CGRectMake(320,200, 320,200);
    [self.view addSubview:moviePlayerController.view];
    [moviePlayerController play];

} 
```

在这种情况下播放视频有什么问题？任何答案和建议都将是有价值的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:13:04.137

您的方法对许多严重错误开放。

1.  您使用内存缓存来缓存媒体。如果缓存变满了，会发生什么？如果您使用的是 NSCache，视频可能会在您访问之前被删除。

2.  您是否知道一次只能播放一个视频？[在这里](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)阅读。

3.  你在做什么没有意义。您创建一个 MPMoviePlayerController，然后将其保留到稍后的某个时间。我建议您分析您的应用程序资源使用情况，我想您会发现这不是最简单的操作。这可能会导致间接错误。

对我来说，您似乎在尝试做一些不是很有用的事情。如果您可以编辑问题以解释您到底想做什么，我们可能会提供更多帮助。否则，事实上，问题是要求我们解决一个糟糕的设计中的实现错误。你会得到一个不好的答案（比如这个），你不会接受，你的接受率会下降，你不会得到未来的答案。我希望这对你有帮助，我知道一开始很难，但试着解释一下：

1.  你的问题是什么？（大图）
2.  你试过什么？
3.  什么地方出了错？

对于这个问题，您似乎错过了第 1 步。

# ssl - 如何为 Amazon S3 存储桶配置 SSL

> ID：11201316
> 
> 赞同：149
> 
> 时间：2012-06-26T05:39:22.457
> 
> 标签：ssl, amazon-s3, amazon-web-services, bucket

我正在使用 Amazon S3 存储桶通过我的 .NET 应用程序上传和下载数据。现在我的问题是：我想使用 SSL 访问我的 S3 存储桶。是否可以为 Amazon s3 存储桶实施 SSL？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-06-26T08:45:01.233

您可以通过 SSL 访问您的文件，如下所示：

```
https://s3.amazonaws.com/bucket_name/images/logo.gif 
```

如果您为存储桶使用自定义域，则可以将 S3 和 CloudFront 与您自己的 SSL 证书一起使用（或通过 Amazon Certificate Manager 生成免费证书）：[http ://aws.amazon.com/cloudfront/custom-ssl-域名/](http://aws.amazon.com/cloudfront/custom-ssl-domains/)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-06-12T13:27:20.293

今天刚刚添加了自定义域 SSL 证书，价格为 600 美元/证书/月。在下面注册您的邀请：http: [//aws.amazon.com/cloudfront/custom-ssl-domains/](http://aws.amazon.com/cloudfront/custom-ssl-domains/)

**更新：**[现在可以免费](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/SecureConnections.html#cnames-and-https-switch-dedicated-to-sni)获得SNI 客户提供的证书。比 600 美元/月便宜得多，而且 XP 几乎被淘汰，它应该适用于大多数用例。

@skalee AWS 有一种机制来实现海报所要求的，“为 Amazon s3 存储桶实现 SSL”，它被称为`CloudFront`. 我将“实现”读作“使用我的 SSL 证书”，而不是“只是在 HTTP URL 上放一个 S，我确信 OP 可以推测出来。

由于 CloudFront 的成本与 S3 完全相同（0.12 美元/GB），但围绕 SSL 具有大量附加功能，并且允许您免费添加自己的 SNI 证书，因此这是在您的域上“实施 SSL”的明显解决方案。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-08-24T11:45:57.147

我发现你可以通过 Cloud Flare 服务轻松做到这一点。

设置一个存储桶，在该存储桶上启用虚拟主机，并通过 Cloudflare 将所需的 CNAME 指向该端点……当然还要为服务付费……但是 5-20 美元 VS 600 美元更容易接受。

完整详情： [https ://www.engaging.io/easy-way-to-configure-ssl-for-amazon-s3-bucket-via-cloudflare/](https://www.engaging.io/easy-way-to-configure-ssl-for-amazon-s3-bucket-via-cloudflare/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-18T12:01:36.263

如果您真的需要它，请考虑重定向。

例如，根据您的请求，`assets.my-domain.example.com/path/to/file`您可以执行 301 或 302 重定向到`my-bucket-name.s3.amazonaws.com/path/to/file`or `s3.amazonaws.com/my-bucket-name/path/to/file`（请记住，在第一种情况下`my-bucket-name`不能包含任何点，否则它将与`*.s3.amazonaws.com, s3.amazonaws.com`S3 证书中的说明不匹配）。

未经测试，但我相信它会工作。但是，我看到的问题很少。

第一个非常明显，是获取此重定向的附加请求。而且我怀疑您是否可以使用您的域名注册商提供的重定向服务器-您必须以某种方式在那里上传适当的证书-因此您必须为此使用自己的服务器。

第二个是您可以在页面源代码中使用您的域名的网址，但是当例如用户在单独的选项卡中打开图片时，地址栏将显示目标网址。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-07-13T22:41:58.263

无法直接使用 S3，但您可以从存储桶创建 Cloud Front 分配。然后转到证书管理器并请求证书。亚马逊免费提供。您已成功确认认证的那些，将其分配给您的 Cloud Front 分配。还要记住将规则设置为将 http 重定向到 https。

我在 Amazon S3 上托管了几个静态网站，例如我已为其分配 SSL 证书的个人网站，因为它们具有 Cloud Front 分发版。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-04T22:31:24.677

如前所述，您无法为 S3 存储桶创建免费证书。但是，您可以创建 Cloud Front 分配，然后为 Cloud Front 分配证书。您为您的域请求证书，然后将其分配给 Cloud Front 设置中的 Cloud Front 分发。我已经使用这种方法通过 SSL 提供静态网站以及提供静态文件。

对于静态网站创建，亚马逊是首选。使用 SSL 获得静态网站真的很实惠。

# php - Expedia API 显示“无法服务此请求。身份验证失败”错误

> ID：11201317
> 
> 赞同：0
> 
> 时间：2012-06-26T05:39:25.153
> 
> 标签：php, xml

我是 EAN 开发的新手。我正在使用 EAN 在 PHP 中开发酒店预订系统。我想从 EAN API 获取预订详情。

以下是我的代码：

```
$itinerary = xxxxxx;
        $cid = 55505;
        $minorRev = 13;
        $apiKey = "y2dfnyvwbwkvgth76hfjdej7";
        $locale = "en_US";
        $currencyCode = "USD";
        $customerSessionId;
        $customerUserAgent;
        $customerIpAddress;
        $url = "http:api.ean.com/ean-services/rs/hotel/v3/";
        $urlBook = "https:book.api.ean.com/ean-services/rs/hotel/v3/";

        $url = ($service == 'res') ? $urlBook : $url;
        $url .= $service
                . "?minorRev={$minorRev}"
                . "&cid={$cid}"
                . "&apiKey={$apiKey}"
                . "&customerUserAgent=" . rawurlencode($customerUserAgent)
                . "&customerIpAddress={$customerIpAddress}"
                . "&customerSessionId={$customerSessionID}"
                . "&locale={$locale}"
                . "&currencyCode={$currencyCode}";

        $xml = "
        <HotelItineraryRequest>
            <itineraryId>{$itinerary}</itineraryId>
            <email>customer@mail.com</email>
       </HotelItineraryRequest>
        ";

        $curl = new Curl();
        $info = $curl->exec($xml, $url, "ItinerarySearch");
        print_r($info); 
```

它显示以下错误： **无法服务此请求。身份验证失败**

这段代码有什么问题。有什么解决方案可以让我从 EAN 获取预订详细信息。

我使用来自 expedia 的演示 php 代码库：http: [//developer.ean.com/code_library/samples/PHP_Booking](http://developer.ean.com/code_library/samples/PHP_Booking)

提前致谢。

# sql - sqlite3 查询 - 值检索

> ID：11201319
> 
> 赞同：0
> 
> 时间：2012-06-26T05:39:43.793
> 
> 标签：sql, sqlite

```
Hi iam using sqlite3 and have following table : 

userId      name        rollNumber  class       section     fingerIdx          
----------  ----------  ----------  ----------  ----------  ------------------
1           ram         1           1           a           Right Thumb Finger
2           ram         1           1           a           Right Index Finger 
```

我的表中有上述值。我的要求是获得具有 fingerIdx 和除 userId 之外的所有其他值的单个结果行，例如“ram, 1, 1, a, 'Right Thumb Finger, Right Index Finger”。如何得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:48:05.683

有`group_concat`你想要的功能。看[这里的描述](http://www.sqlite.org/lang_aggfunc.html)

**编辑：**

此查询适用于 MySQL（我目前没有 sqlite，但它应该以相同的方式工作）：

```
select name, rollnumber, class, section, group_concat(fingerIdx) from so group by name, rollnumber, class, section; 
```

输出：

```
+------+------------+-------+---------+-------------------------+
| name | rollnumber | class | section | group_concat(fingerIdx) |
+------+------------+-------+---------+-------------------------+
| ram  |          1 |     1 | a       | RightThumb,RightIndex   |
+------+------------+-------+---------+-------------------------+ 
```

**编辑2：**

顺便说一句：你应该过度考虑你的桌子设计！同一用户似乎有两个条目，但用户 ID 不同！更好地为一对多关系（或左右）制作`user`表和另一个`(userid, name, rollnumber, class, section)``user_finger``(userId, fingerIdx)`

# c++ - 在 C++ 中扩展库

> ID：11201321
> 
> 赞同：3
> 
> 时间：2012-06-26T05:39:52.100
> 
> 标签：c++, inheritance

是否可以在没有源代码的情况下从 C++ 库扩展类？拥有标题是否足以让您使用继承？我只是在学习 C++ 并且正在进入理论。我会测试这个，但我不知道如何。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T07:13:27.920

**简短的回答** 是的，绝对可以。

**长答案**： *警告：以下文字可能会伤害敏感的 OOP 积分主义者的孩子。如果您觉得或保持成为其中之一，请远离这个答案：我的你和每个人的生活都会更轻松*

让我透露一个秘密：STL 代码只不过是带有头文件和库的常规 C++ 代码，就像您的代码可以 - 并且很可能 - 一样。STL 作者只是像你一样的程序员。它们对于编译器来说并没有什么特别之处。他们对此没有任何超能力。他们坐在他们的*马桶*上，就像你坐在你的马桶上一样，完全按照你的方式做。不要过度混淆它们。

STL 代码遵循与您自己编写的代码完全相同的规则：将调用被覆盖的内容而不是基类：总是如果它是虚拟的，并且如果它不是虚拟的，则仅根据其引用指针的静态类型，就像其他所有代码一样一段 C++ 代码。不多不少。

重要的是不要颠覆尊重 STL 名称约定和语义的设计问题，这样您的代码的每一次进一步使用都不会混淆人们的期望，包括您自己，在 10 年后阅读您的代码，不再记住某些决定。

例如，覆盖`std::exception::what()`必须返回一个解释性的持久 C 字符串（如 STL 文档所说），而不是添加意外的其他模糊操作。

此外，覆盖流或流操作符应该考虑到整个设计（你真的需要覆盖*流*还是只覆盖流缓冲区，或者只是在*它所*包含的*语言环境*中添加一个特定的*方面*？）：换句话说，不仅要研究“类”，而是其所有“世界”的设计，以正确理解它如何与周围的事物一起工作。

 *最后但并非最不重要的一点是，最具争议的方面之一是容器和没有虚拟析构函数的所有东西。

我的观点是，关于“经典的 OOP 规则：不要'派生没有虚拟析构函数的东西”的噪音被夸大了：不要指望 a`cow`成为 a`horse`只是因为你`saddle`在它上面放了 a 。

如果您需要（真的很需要）一个管理字符序列的类，该类具有完全相同的 std::string 接口，能够隐式转换为 std::string 并且具有更多功能，您有两种方法：

*   做好女孩所做的事情，嵌入`std:string`并重写其所有 112 个（是的：它们超过 100 个）方法，其功能只不过是调用它们，并确保您与另一个好男孩程序员的代码仍然处女结婚， 或者 ...
*   发现这需要大约 30 年的时间，你冒着成为 40 岁处女的风险，没有好的好男孩程序员不再感兴趣，更加实际，牺牲你的童贞并衍生`std::string`。你唯一会失去的是你嫁给一个整合主义者的可能性。而且你甚至可以发现这不一定是问题：你甚至远离被他杀死的风险！

您唯一需要注意的是，如果`std::string`不是多态的，您的派生将不会如此，所以不要指望和`std::string*`/或`std::string&`引用`yourstring`调用您的方法，包括析构函数，这对其他所有方法都没有特别的尊重；它只是遵循完全相同的规则。但是......嘿，如果你嵌入并编写一个隐式转换运算符，你将得到完全一样的结果，不多不少！

规则很简单：不要让自己成为虚拟的析构函数，也不要假装“OOP 替换原则”可以使用不是为 OOP 设计的东西，一切都会顺利进行。

由于所有 OOP 积分*主义者*都要求他们永远沉睡，您的代码将可以工作，而他们仍在重写 100 多个 std::string 方法只是为了嵌入它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T05:50:07.453

是的，类的声明足以从中派生。

当您链接到库时，将获取其余代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T05:50:46.600

是的，您可以在标准 C++ 库中扩展类。头文件就足够了。

一些例子：

*   扩展`std::exception`类以创建自定义异常
*   扩展流库以在您的应用程序中创建自定义流

但是您应该注意的一件事是不要扩展没有`virtual destructor`. 例子是`std::vector`，`std::string`

编辑：我刚刚发现另一个关于这个主题的 SO 问题[通过继承扩展 C++ 标准库？](https://stackoverflow.com/questions/1073958/extending-the-c-standard-library-by-inheritance)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T05:53:44.150

只要有一个头文件就足以从该类继承。
C++ 程序分两个阶段构建：

*   编译
    编译器查找类型的定义并检查程序的语言正确性。这会生成目标文件。
*   链接
    编译的目标文件链接在一起形成一个可执行文件。

因此，只要您拥有头文件（*编译所需*）和库（*链接所需*），您就可以从类派生。
但请注意，必须小心该类是否确实是为了继承。
例如：如果您有一个具有非`virtual`析构函数的类，则该类不适合继承。就像所有标准库容器类一样。

所以简而言之，只要有一个类的接口就足以进行派生，但类的实现和设计语义确实起着重要作用。*

# drupal - Drupal 7下include（）中的未定义变量

> ID：11201327
> 
> 赞同：1
> 
> 时间：2012-06-26T05:40:19.550
> 
> 标签：drupal, variables, drupal-theming, drupal-templates

我已经定义了一个函数来返回一个数组，并且需要将此数组作为参数传递给一个模板（node--contenttype.tpl.php）。

```
function mymodule_preprocess_page(&$variables) {{
  $variables['tdata'] = $myArray;
} 
```

在节点--contenttype.tpl.php

```
print $tdata; 
```

我试图调用变量 $tdata，但错误显示

> 注意：未定义的变量：include() 中的 tdata...

如果我在 template.php 中定义一个变量并从 node--contenttype.tpl.php 调用，也会发生同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:55:39.183

哎呀...我想我现在看到了您的问题。

如果您希望变量在节点模板文件中可用，则应该使用 hook_preprocess_node()，而不是 hook_preprocess_page()。

确保在进行更改后清除缓存！

让我们知道这是否解决了您的问题...

# objective-c - 核心数据模型路径与存储路径

> ID：11201331
> 
> 赞同：0
> 
> 时间：2012-06-26T05:40:58.057
> 
> 标签：objective-c, core-data, ios5

以前，我有一个使用核心数据的应用程序。我使用相同的商店 url 来初始化 NSManagedObjectModel 并创建 NSPersistentStoreCoordinator。但是，在新的应用程序中，我尝试使用相同的方式，无法创建模型。所以我必须使用模型 url（我在这个论坛中找到它）才能创建 NSManagedObjectModel。问题是什么？

这是来自旧应用程序：

```
- (NSString *)storeName
{
    return @"ABC.storedata";
}

- (NSURL *)storeUrl
{
    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:self.storeName];
    return storeURL;
}

- (NSManagedObjectModel *)managedObjectModel {
    if (_managedObjectModel == nil) {
        _managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:[self storeUrl]];
    }
    return _managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator;
    }    
    NSError *error = nil;
    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:[self storeUrl] options:nil error:&error]) {

       abort();
    }    

    return _persistentStoreCoordinator;
} 
```

这是来自新应用程序：

```
- (NSString *)storeName
{
    return @"DEF.sqlite";
}

- (NSURL *)storeUrl
{
    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:self.storeName];
    return storeURL;
}

- (NSURL *)modelUrl
{
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"DEF" withExtension:@"momd"];
    return modelURL;
}

- (NSManagedObjectModel *)managedObjectModel {
    if (_managedObjectModel == nil) {
        _managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:[self modelUrl]];
    }
    return _managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator;
    }    
    NSError *error = nil;
    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:[self storeUrl] options:nil error:&error]) {

       abort();
    }    

    return _persistentStoreCoordinator;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:16:39.550

您永远不能对模型和持久存储使用相同的 URL，因为它们是两个非常不同的东西。

模型 URL 必须指向 Xcode 项目中包含的实际模型资源，它是一个 .momd 文件包。在您的情况下，持久存储是一个数据库，一个文档目录中的 .sqlite 文件。

我无法想象它在过去是如何运作的。一种可能性是，由于您的 ABC.storedata 没有尾随 .sqlite，Core Data 一定在幕后添加了一个 .sqlite 并且 DEF.storedata 可能以某种方式与您的模型名称匹配？

这是初始化模型的正确方法，将“模型”替换为 Xcode 项目中模型资源的名称：

```
NSURL *modelURL             = [[NSBundle mainBundle] URLForResource:@"Model" withExtension:@"momd"];        
model                       = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL]; 
```

至于持久存储，没有限制。在大多数情况下，它应该在应用程序文档目录中。

# ios - self.nextResponder vs super for touchesMoved

> ID：11201338
> 
> 赞同：0
> 
> 时间：2012-06-26T05:42:13.613
> 
> 标签：ios, events, touch

这是设置。

我有一个自定义 UIScrollView 作为 PrimeView 的子视图。

自定义的 UIScrollView 可以看作是覆盖滚动视图，它最初获取所有的触摸事件。

现在，当滚动视图不拖动时，我希望它将触摸事件传递给其他响应者。
下面是我目前的代码，但我不确定 self.nextResponder 和 super 之间的区别。

我不明白为什么 touchesBegan 被正确传递给超级视图，但 touchesMoved 没有被传递给超级视图。

```
-(void) touchesBegan: (NSSet *) touches withEvent: (UIEvent *) event
{
    if (!self.dragging)
    {
        [self.nextResponder touchesBegan: touches withEvent:event];

    }

    [super touchesBegan: touches withEvent: event];
}

-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self.nextResponder touchesBegan: touches withEvent:event]; //                                                                                                                                                                                                    
    [super touchesMoved:touches withEvent:event];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T05:52:51.837

苹果的立场是你永远不应该做这样的事情：

```
 [self.nextResponder touchesBegan: touches withEvent:event]; 
```

如果你这样做，你就超出了 UIKit 自己在响应者链上转发消息的范围，结果是未定义的。

Also, in your `touchesMoved:withEvent:`, you're sending `touchesBegan:withEvent:` to `nextResponder`, which seems suspicious.

Also, in your `touchesMoved:withEvent:`, you're passing on the event twice, which seems like a bad idea.

If you want to handle drags conditionally, your best bet is to use a `UIPanGestureRecognizer`. If the recognizer doesn't accept the event, it will be forwarded up the responder chain normally.

If you are a registered (paid) iOS developer, you should have access to the [WWDC 2012 videos](https://developer.apple.com/videos/wwdc/2012/). I **strongly** recommend you watch the “Enhancing User Experience with Scroll Views” video. I won't say more about it because its contents are still under NDA.

# c#-4.0 - 如何在 C# 控制台应用程序中从 App.config 外部获取绑定信息？

> ID：11201341
> 
> 赞同：0
> 
> 时间：2012-06-26T05:42:19.017
> 
> 标签：c#-4.0, app-config

我有一个 App.config 字段，我在其中定义了一些绑定信息。我希望这些信息在一些外部文件中，以便用户可以在需要时更改它。任何人都知道如何实现它？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:51:25.900

假设我们正在谈论程序集绑定重定向......

运行时将使用您的 App.exe.config 文件来定位绑定重定向。我不相信您可以在普通托管应用程序中对此做任何事情，因为在您可以运行任何代码时运行时已经初始化。

如果您有一个使用 CLR 托管 API 的非托管“shim”（例如 C++ 中的 exe），您可以在设置 AppDomain 时告诉它要使用的配置文件的名称。但我不相信您可以将绑定重定向与主应用程序配置分开。

您唯一的其他选择是处理[`AppDomain.AssemblyResolve`](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)事件以处理绑定失败。但这可能代价高昂，因为运行时将在引发此事件之前用尽[所有选项来探测程序集。](http://msdn.microsoft.com/en-us/library/yx7xezcf.aspx)

# asp.net - 在网站上给出 404 错误？ASP.NET？

> ID：11201343
> 
> 赞同：0
> 
> 时间：2012-06-26T05:42:43.997
> 
> 标签：asp.net

在 Web 应用程序中，我创建了一个站点并将代码放在我的域中 [使用 filezilla 我将我的页面上传到我的域中]。我将包含代码的文件夹放在 BusinessEntity 文件夹、BusinessLayer 文件夹、数据访问层和我的代码文件夹等域中。我的 web.config 是我的代码文件夹。但是当我输入我的网址时，它给出了 404 错误。你能帮我解决这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:57:12.493

404 - 未找到错误。某些资源无法获取。打开 Fiddler 或任何其他 Web 调试器并检查返回 404 错误的请求。之后检查是否存在与 Url 对应的资源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:09:10.977

请检查所有这些事情是否正确完成

1.  从本地机器发布项目（使用 Visual Studio）
2.  将发布的项目上传到服务器。
3.  在iis中创建一个虚拟目录（在服务器中）
4.  将虚拟目录映射到工程文件夹（即选择物理目录作为工程文件夹）
5.  进行必要的配置更改（连接字符串或 appsettings）
6.  授予上传文件夹和错误文件夹的写入权限（如果您使用任何）

结帐[http://www.advancedinstaller.com/user-guide/tutorial-iis.html](http://www.advancedinstaller.com/user-guide/tutorial-iis.html)

# ruby-on-rails - Rails 3通过另一个控制器中的连接模型访问has_many

> ID：11201344
> 
> 赞同：0
> 
> 时间：2012-06-26T05:42:51.663
> 
> 标签：ruby-on-rails, ruby-on-rails-3, has-many-through

我正在做一个在线法官应用程序，所以我有一个用户模型、一个问题模型和一个解决方案模型来建立多对多关系。在那个解决方案模型中，我有一个名为“状态”的额外列，我计划在其中存储某个用户的问题状态：已解决，错误的答案，未解决。

我正在尝试修改问题控制器中的索引操作，以在问题列表中呈现问题的状态（这样用户就可以看到他是否解决了问题，就像我之前所说的那样）。不过，当我访问视图时，我遇到了“未初始化的常量 Admin::ProblemsController::Solution”错误。

我对 RoR 真的很陌生，到目前为止我的经验非常苛刻，所以我会很感激任何线索。这是控制器和视图中的代码：

问题控制器.rb

```
def index
  @problems = Problem.all
    if current_user
      @solutions = Solution.includes(:problem).where(:user_id => current_user.id)
  end

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @problems }
  end
end 
```

意见/问题/index.html.erb

```
<% @problems.each do |problem| %>
  <tr>
    <td><%= problem.name %></td>
    <td><%= problem.code %></td>
    <td><%= problem.description %></td>
    <% if current_user %>
      <%= for solution in @solutions do %>
        <% if solution %>
          <td><%= solution.state%></td>
        <% else %>
          <td>Not Solved</td>
        <% end %>
      <% end %>
    <% end %>
    <td><%= link_to 'Show', problem %></td>
    <% if current_user && current_user.is_admin? %>
    <td><%= link_to 'Edit', edit_problem_path(problem) %></td>
    <td><%= link_to 'Delete', problem, method: :delete, data: { confirm: 'Are you sure?' } %></td>
    <% end %>
  </tr>
<% end %> 
```

我不确定这是否是我应该访问解决方案表的最佳方式，或者我是否应该在另一个控制器中执行此操作（在用户控制器中？也许在解决方案控制器文件中？）。

我想清楚如何使用那个“解决方案”连接表。我之前有一个 has_and_belongs_to_many 并因为额外的列而改变了它。我已经阅读了很多关于多对多关系的内容，但对于这种情况我无法理解 =(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:53:54.517

只需要使用：

```
problem.solution.state 
```

除非一个问题可能有很多解决方案，否则它需要类似于：

```
problem.solutions.first.state 
```

然而，这只会给出第一个状态，所以我会在问题中定义一个计算状态的方法（例如，如果任何解决方案解决了它，那么问题就解决了）

对于 1 个问题，给定用户的许多解决方案。在解决方案.rb

```
scope :for_user, lambda {|user_id| :conditions => {:user_id => user_id}} 
```

然后我们可以调用：

```
problem.solutions.for_user(current_user.id).first.state 
```

它可能看起来有点长，但它非常灵活。

# php - Magento：静态块和配置设置迁移

> ID：11201347
> 
> 赞同：5
> 
> 时间：2012-06-26T05:43:15.417
> 
> 标签：php, magento, deployment, e-commerce

要将所有更改迁移到所有环境，我使用数据库升级脚本。我使用它们来创建不同的实例（客户、税收设置等），但通常用于迁移静态块和配置设置。

迁移静态块：

```
<?php
$block = Mage::getModel('cms/block');
$data = array(
   'title' => 'Block title',
   'identifier' => 'block_identifier',
   'content' => 'block content',
   'is_active' => 1,
   'stores' => array(0 => Mage_Core_Model_App::ADMIN_STORE_ID),
);

$block->addData($data);
$block->save();
?> 
```

要迁移设置：

```
<?php
Mage::getModel('core/config')->saveConfig('design/theme/default', 'theme');
?> 
```

我知道我们可以通过 config.xml 修改 Magento 设置：

```
<default>
    <general>
        <store_information>
            <name>My Store</name>
        </store_information>
        <content_staging>
            <block_frontend_stub>home</block_frontend_stub>
        </content_staging>
    </general>
</default> 
```

但据我了解，只有在路径：**general/store_information/name** 和
**general/content_staging/block_frontend_stub** 不存在于 db 或它们的值等于 NULL 时，我们才能以这种方式修改设置，如果值不为 NULL，我们无法修改它通过 xml。我在本地环境中对其进行了测试，我认为我是对的，但在 Magento 找不到负责通过 xml 设置配置的代码。我对吗？

你能告诉我负责它的代码部分吗？Magento 的最佳迁移实践是什么？也许我什么都不知道：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T13:56:08.567

你是对的，配置 xml 文件中指定的值被`core_config_data`表中的值覆盖。正如 B00MER 指出的那样，有问题的代码位于`Mage_Core_Model_Config::init()`：

```
public function init($options=array())
{
    $this->setCacheChecksum(null);
    $this->_cacheLoadedSections = array();
    $this->setOptions($options);
    $this->loadBase();

    $cacheLoad = $this->loadModulesCache();
    if ($cacheLoad) {
        return $this;
    }
    $this->loadModules();
    $this->loadDb();
    $this->saveCache();
    return $this;
} 
```

请注意，`loadDb()`在 之后调用`loadModules()`。
实际的合并逻辑在配置资源模型`Mage_Core_Model_Resource_Config::loadToXml()`中。

对于每个全局设置，这称为：

```
$xmlConfig->setNode('default/' . $r['path'], $value); 
```

对于每个网站范围设置，这称为：

```
$nodePath = sprintf('websites/%s/%s', $websites[$r['scope_id']]['code'], $r['path']);
$xmlConfig->setNode($nodePath, $value); 
```

对于每个网站范围设置，这称为：

```
$nodePath = sprintf('stores/%s/%s', $stores[$r['scope_id']]['code'], $r['path']);
$xmlConfig->setNode($nodePath, $value); 
```

这稍微简化了，但是如果您需要更多详细信息，可以查看源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T11:20:25.483

您可以在每个服务器实例上`core_config_data`通过 via指定设置：`local.xml`

```
<config>
   <stores>
       <store_code>
            <!-- config value for a store  (web/unsecure/base_url)  -->
            <web>
                <unsecure>
                      <base_url>http://example-magento-store.com</base_url>
               </unsecure>
            </web>
        </store_code>
   </stores>
   <websites>
       <website_code>
            <!-- config value for a website  (web/unsecure/base_url)  -->
            <web>
                <unsecure>
                      <base_url>http://another-example-magento-store.com</base_url>
               </unsecure>
            </web>
        </website_code>
   </websites>
   <default>
      <!-- default config value (web/unsecure/base_url) -->
       <web>
            <unsecure>
                   <base_url>http://default-magento-store.com</base_url>
              </unsecure>
        </web>
   </default>
</config> 
```

来源：[https ://twitter.com/IvanChepurnyi/status/111544548806758403](https://twitter.com/IvanChepurnyi/status/111544548806758403)

如果您好奇 Magento 在哪里设置 XML 配置文件中的数据，请查看该类：`Mage_Core_Model_Config`

就最佳实践而言，有很多关于这些主题的信息：

*   [Magento 部署的最佳实践](https://stackoverflow.com/questions/1377338/best-practises-for-magento-deployment)
*   [http://www.dhmedia.com.au/blog/perfect-magento-workflow-using-git](http://www.dhmedia.com.au/blog/perfect-magento-workflow-using-git)
*   [Magento 是否有理由不支持模块的卸载/降级](https://stackoverflow.com/questions/5294385/is-there-a-reason-why-magento-shouldnt-support-uninstall-downgrade-for-modules?lq=1)
*   [http://www.aschroder.com/2010/07/structuring-your-magento-project-for-engineering-not-hacking/](http://www.aschroder.com/2010/07/structuring-your-magento-project-for-engineering-not-hacking/)

# css - CSS“粘性页脚”与嵌套div的百分比高度冲突？

> ID：11201348
> 
> 赞同：2
> 
> 时间：2012-06-26T05:43:20.050
> 
> 标签：css, height, percentage, sticky-footer, html

我有一个“主要部分” div，它设置为从其父 div 继承它的高度，即“包装器”div。包装器 div 设置为从其父 div 继承它的高度，它是文档的主体。和标签设置`html`为。 因此，为了使用 CSS “sticky footer”（可在[http://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)找到），我必须在“main-section” div 中设置等于“footer” div 的高度（它必须在包装器 div**之外**）。然后，页脚 div 也必须被赋予一个等于页脚高度的 *负值。* 所有这些都是为了将​​页脚保持在页面底部，`body``height: 100%`

`padding-bottom` ***`margin-top`

`100%`到页脚，以便`background-color`主要部分在整个页面下方可见。

我很接近这样做，除了主要部分现在延伸到页脚之外，并将窗口拉伸超过 100% 高度（当没有足够的内容超过页面高度时），然后背景颜色可见页脚，超出页面高度（这是不可取的）。

似乎`padding-bottom`main-section div 中的必要参数导致了这个问题，即使页脚设置为`clear: both`and `position: relative`（这**确实**将页脚保持在页面底部，但 main-section div 仍然延伸到下方页脚相当多）。或者`min-height: 100%`包装器的属性可能会导致冲突？

这是相关的html：*** 

 ***```
<div id="wrap">

    <div id="header">
        ...
    </div> <!-- end of header -->

    <div id="main-section">
        ...
    </div> <!-- end of main section -->

</div> <!-- end of wrapper -->

<div id="footer">
    ...
</div> <!-- end of footer --> 
```

...这是相关的CSS：

```
*
{
    margin: 0px;
    padding: 0px;
}

html, body
{
    height: 100%;
}

body
{
    background-color: #bbb;
}

#wrapper
{
    /* wrapper 100% of screen */
        min-height: 100%;

    height: inherit;

    width: 950px;
    margin-left: auto;
    margin-right: auto;
}

    #header
    {
        background-color: #C97;
        line-height: auto;
        text-align: center;

        font-family: "Lucida Console";
        font-weight: bold;
        font-size: 2.5em;
    }

    #main-section
    {
        background-color: #ddd;

        height: inherit;

        /* for a "sticky" footer */
        padding-bottom: 50px; /* equal to the height of the footer */
    }
    #footer
    {       
        clear: both;
        position: relative;

        height: 50px;
        line-height: 50px;
        margin-top: -50px; /* equal to the height of the footer, for a "sticky footer" */

        width: 950px; /* equal to width of wrapper */

        margin-left: auto;
        margin-right: auto;

        text-align: center;

        background-color: #C97;
    } 
```

* * *

**编辑**：重要的是要提到我正在 Firefox 中测试它。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:30:36.220

[这里](http://dtusarview.wordpress.com/2012/06/23/sticky-headerfooter-like-facebook/)给你一个参考。

[现场演示](http://jsfiddle.net/F6dez/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:51:08.157

在页脚中进行更改

```
#footer
{       
    bottom:0px;
    width:100%;
    height:50px;
    position:fixed;  // this is the key
    height: 50px;
    line-height: 50px;
    width: 950px;
    background-color: #C97;
}​ 
```

**[更新了 Jsfiidle 演示](http://jsfiddle.net/zkd2E/6/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T04:22:19.880

因此，一种解决方法，表现出相同的行为——

我没有弄乱嵌套的主要部分`background-color`div `postion: absolute`，而是`position: fixed`将分）。

这样，主部分可以包含任意数量的内容，并且它看起来有一个 100% 高度的背景颜色。***

# android - 从内存中提取应用程序写入的文件

> ID：11201349
> 
> 赞同：0
> 
> 时间：2012-06-26T05:43:21.157
> 
> 标签：android, android-sdcard

我有一个三星 Galaxy Y。我的应用程序为每个服务器事务将日志文件写入 sd 卡。如果 sd 卡不存在，我正在将日志文件写入内部存储器。现在我的问题是，如何提取物理写入内部存储器的日志文件（例如，如果没有 sd 卡，则通过连接到 USB 将不起作用）。那么我如何查看文件是否已写入。我可以在 /data/data/apppkg/files/log.txt 的模拟器中看到它，但在物理设备上我看不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:15:52.080

有一个很好的理由，物理设备不允许您在没有 root 权限的情况下访问内部存储器。

如果您想确保可以可靠地获取这些日志，请将它们通过电子邮件发送给您自己（很容易通过电子邮件意图和数据）或将它们放在您各自的外部存储应用程序目录中。

# sql - MS ACCESS 计数/总和行数，没有重复

> ID：11201351
> 
> 赞同：2
> 
> 时间：2012-06-26T05:43:42.300
> 
> 标签：sql, ms-access, count, distinct

我有下表，我需要计算总行数而不包括任何重复记录。

```
CustomerID
test1
test1
test2
test3
test4
test4 
```

如您所见，总行数为 6，但有两个 test1 和两个 test4，我希望查询返回 4。 IOW，我想计算`CustomerID`.

我已经尝试过子查询，但没有让它为我工作。

**-- 2012 年 6 月 27 日更新 --**

谢谢，两者都为我工作：

> 1.  SELECT COUNT(*) FROM (SELECT CustomerID From TheTable GROUP BY CustomerID) as
> 2.  SELECT COUNT(*) FROM (SELECT DISTINCT CustomerID FROM TheTable) AS sub;

我现在需要一个查询来只保留今天添加的那些 CustomerID，然后计算它们。

例如，

```
CustomerID DateAdded
test1 25/06/2012
test1 25/06/2012
test2 26/06/2012
test3 27/06/2012 - Today
test4 27/06/2012 - Today
test4 27/06/2012 - Today 
```

然后它需要返回 3。

我尝试将以下查询添加到提供的两个解决方案中，但无法让它们中的任何一个工作/返回我想要的值。

> HAVING (([TheTable].DateAdded)=Date());

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T05:48:29.410

~~这可以在 SQL 中使用，我认为它也应该在 Access 中：~~

 ~~```
SELECT COUNT(DISTINCT CustomerID) FROM TheTable 
```~~  ~~*编辑：根据 Jeff 在评论中，Access 不支持上述语法。*

不过，这应该可以肯定：

```
SELECT COUNT(*) FROM ( SELECT CustomerID FROM TheTable GROUP BY CustomerID ) a 
```

按日期限制

```
SELECT COUNT(*) FROM ( 
    SELECT TheTable.CustomerID FROM TheTable GROUP BY CustomerID 
    WHERE TheTable.DateAdded >= Date()
) a 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T15:38:33.997

dbaseman 回答中的第二个建议对我来说是正确的。这种替代方案也应该有效。

```
SELECT COUNT(*)
FROM
    (
        SELECT DISTINCT CustomerID FROM TheTable
    ) AS sub; 
```

我不知道它是否比 dbaseman 的`GROUP BY`. 如果您决定测试这两种方法，请添加评论告诉我们您发现了什么。

根据您的评论，您想评估“*仅今天添加的那些记录*”。由于您没有向我们提供有关您的表的足够信息，我将假装它包含一个名为的日期/时间字段`date_added`。每次添加记录时，您都会在该字段中存储当前日期，时间部分为午夜。在这种情况下，您可以向子查询添加一个`WHERE`子句，要求数据库引擎仅考虑那些`date_added`等于今天日期的行。该`Date()`函数将为您提供今天的日期，午夜作为时间部分。

```
SELECT COUNT(*)
FROM
    (
        SELECT DISTINCT CustomerID FROM TheTable
        WHERE date_added = Date()
    ) AS sub; 
```

一旦你`date_added`用你的字段名称替换，只要我的假设是正确的，那应该可以工作。但是，如果您的`date_added`值包含除 midnite 之外的任何时间组件，则必须修改该`WHERE`子句以捕获从今天开始的*所有*日期/时间值。

```
WHERE date_added >= Date() AND date_added < (Date() + 1) 
```~~

# php - 如何使用 dompdf 在同一个 pdf 中创建两个报告

> ID：11201353
> 
> 赞同：0
> 
> 时间：2012-06-26T05:44:06.307
> 
> 标签：php, pdf

我正在为旅行社做一个网站。它有一个报告创建模块，报告以 pdf 格式保存我使用 dompdf 创建 pdf。我需要相同的 pdf 应该包含两个报告。我在同一个 pdf 中得到了两个报告，但是`2nd one should starts in a new page`. 我怎么能这样做？

```
<?php
require_once("dompdf_config.inc.php");

$html =
  '<html><body>'.
  '<p>Put your html here, or generate it with your favourite '.
  'templating system.</p>'.
  '</body></html>';

$dompdf = new DOMPDF();
$dompdf->load_html($html);
$dompdf->render();
$dompdf->stream("sample.pdf");

?> 
```

我使用了上面的代码，但 $html 变量使用不同。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:02:42.970

您可以使用

```
style="page-break-after:always" 
```

创建新页面。

//编辑完整的代码片段：

```
<div style="page-break-after:always;">Your 2 page</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:59:16.813

打电话`$dompdf->new_page()`；

顺便说一下谷歌搜索技能的道具。

# c# - 如何在单击 ItemTemplate asp：带有查询字符串的图像按钮时打开一个新选项卡/窗口？

> ID：11201361
> 
> 赞同：3
> 
> 时间：2012-06-26T05:45:14.043
> 
> 标签：c#, asp.net

我在 DataList ItemTemplate 中有一个 ImageButton，我试图在单击 ImageButton 时打开一个新页面（新选项卡），但它在同一个选项卡中打开。

```
<ItemTemplate>
   <asp:ImageButton ID="ibtmImage" runat="server" ImageUrl='<%# Eval("Image") %>'OnCommand="ibtmImage_Command" CommandArgument='<%# Eval("Id").ToString() %>' OnClientClick="aspnetForm.target ='_blank';" />
</ItemTemplate>

protected void ibtmImage_Command(object sender, CommandEventArgs e)
{
   Response.Redirect("ItemList.aspx?Id=" + e.CommandArgument.ToString());
} 
```

如何在新标签/新窗口中打开页面。

有人请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T06:53:21.670

我正在做这样的事情并在新标签中打开

```
protected void ibtmImage_Command(object sender, CommandEventArgs e)
{
     string strJS = ("<script type='text/javascript'>window.open('ItemList.aspx?Id=" + e.CommandArgument.ToString() + "','_blank');</script>");
     Page.ClientScript.RegisterStartupScript(this.GetType(), "strJSAlert", strJS);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:56:41.647

在您针对 OnClientClick 的 aspx 页面中执行以下操作：

```
OnClientClick="window.open('http://yourpagetopen/');" 
```

所以你的图像按钮将是：

```
<asp:ImageButton 
 ID="ibtmImage" 
 runat="server" 
 ImageUrl='<%# Eval("Image") %>'
 OnCommand="ibtmImage_Command" 
 CommandArgument='<%# Eval("Id").ToString() %>' 
 OnClientClick="window.open('aspnetForm'); " /> 
```

您也可以摆脱`Response.Redirect`服务器端事件并从 onClientClick 传递参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T05:52:32.683

**ASPX**

```
 <asp:TemplateField Headertext="Name" HeaderStyle-HorizontalAlign="Center">
                        <ItemTemplate>           
                            <asp:HyperLink ID="HyperLink1" runat="server"  Text='<%# Eval("Name") %>' CssClass="no_underline"
                                NavigateUrl='<%# GetNavigateUrl(Eval("Id").ToString()) %>' />
                        </ItemTemplate>
                <HeaderStyle HorizontalAlign="Center"></HeaderStyle>
                    </asp:TemplateField> 
```

**CS** 绑定下一个函数

```
 protected string GetNavigateUrl(string Id)
        {
            string startDateStr = StartDate.ToShortDateString();
            string endDateStr = EndDate.ToShortDateString();
            var script = String.Format("javascript:var w=window.showModalDialog('Details.aspx?Id={0}&StartDate={1}&EndDate={2}', " +
                                 "'Details', 'dialogWidth:1120px; dialogHeight:500px; resizable:no; status: no;');", PartnerId, startDateStr, endDateStr);           
            return script;
        } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-25T07:10:22.100

```
 <asp:HyperLink ID="docTitle" Text='<%#Eval("Titleofdoc") %>' NavigateUrl='<%# string.Concat("~/UI/UploadFilestest.aspx?docId=", Eval("DocId"))%>' Target="_blank"
                                runat="server" /> 
```

# blackberry - 如何为 Blackberry 5.0 及更高版本的操作系统设备实现图像滑动？

> ID：11201362
> 
> 赞同：0
> 
> 时间：2012-06-26T05:45:30.020
> 
> 标签：blackberry, touch, gesture

我需要在应用程序中开发滑动功能。为此，我在五个不同的垂直字段管理器中添加了五个位图字段，这五个垂直字段管理器已添加到具有水平滚动属性的水平字段管理器中，然后我尝试使用触摸事件实现滑动功能。以下代码适用于 Blackberry 5.0 OS 设备，但不适用于 Blackberry 6.0 及更高版本的 OS 设备。

```
 protected boolean touchEvent(TouchEvent message)
    {

        try{
            int x = message.getX(1);
            int y = message.getY(1);       

            int eventCode = message.getEvent();  
            if(eventCode == TouchEvent.DOWN)
            {
                Dx=x; 
                Dy=y;
            }         
            else if(eventCode == TouchEvent.UP)
            {      

                Ux=x;
                Uy=y;

                disX=  Dx-Ux;
                disY=  Dy-Uy;

                if(disX > (Display.getWidth()/3)  && this.index<6)
                {

                    if(this.index<5)
                        this.index++;
                    vfmImage[this.index].setFocus();
                    System.out.println("disX :"+disX +" differnt :"+(Display.getWidth()/3)+" Index :"+this.index);

                }

                else if(disX < Display.getWidth() -(Display.getWidth() + Display.getWidth()/3)  && index>0)
                {

                    if(this.index>0)
                        this.index--;
                    vfmImage[this.index].setFocus();
                    System.out.println("disX :"+disX +"differnt :"+(Display.getWidth() -(Display.getWidth() + Display.getWidth()/3))+" Index :"+this.index);

                }
                else
                {
                    if(index==0)
                    {
                        vfmImage[1].setFocus();
                    }
                    else
                    {
                        vfmImage[this.index-1].setFocus();
                    }

                    vfmImage[this.index].setFocus();

                }

            }  

        }
        catch (Exception e)
        {
            Dialog.alert("catch");
            e.printStackTrace();
        }
        return super.touchEvent(message);
    } 
```

谢谢德旺

# objective-c - 如何释放我们类中另一个类的对象？

> ID：11201365
> 
> 赞同：0
> 
> 时间：2012-06-26T05:45:47.913
> 
> 标签：objective-c

我在命令行应用程序中创建了两个类（FirstClass 和 SecondClass）。我在 FirstClass 方法中创建了 SecondClass 的对象。现在我想在 main 中调用该方法并释放分配给该对象的内存。我的代码如下..

```
@implementation FirstClass

+(NSMutableArray *) addObject{
    NSMutableArray *namesArray = [[[NSMutableArray alloc]init] autorelease];
    SecondClass *second = [[SecondClass alloc]init];
    NSLog(@"Before adding object, count = %ld ",[second retainCount]); //RC = 1
    [second setName:@"Mobicule"];
    [namesArray addObject:second];
    NSLog(@"First object addeded, count = %ld ",[second retainCount]); //RC = 2
    [second release];
    NSLog(@"After release, count = %ld",[second retainCount]); //RC = 1
    return namesArray;
}

@end 
```

我想让保留计数为零..

主要功能如下..

```
int main (int argc, const char * argv[]) {

@autoreleasepool {

    // insert code here...
   // NSLog(@"Hello, World!");

    NSMutableArray *arrayMain = [[NSMutableArray alloc]init];

    arrayMain = [FirstClass addObject];

    for (int i = 0; i<[arrayMain count]; i++) {

        NSLog(@"%@",[[arrayMain objectAtIndex:i] name]);
    }

   NSLog(@"%ld",[arrayMain retainCount]);

}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:00:30.593

我假设您的综合属性 name 是`retain`.

```
 +(NSMutableArray *) addObject{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    NSMutableArray *namesArray = [[NSMutableArray alloc]init];
    SecondClass *second = [[[SecondClass alloc]init]autorelease];
    NSLog(@"Before adding object, count = %ld ",[second retainCount]); //RC = 1
    [second setName:@"Mobicule"]; //implementation will handle the release for you
    [namesArray addObject:second];
    NSLog(@"First object addeded, count = %ld ",[second retainCount]); //RC = 2
    [pool release];
    NSLog(@"After pool release, count = %ld",[second retainCount]); //RC=1
    return [namesArray autorelease];
} 
```

> 你永远不应该使用 -retainCount，因为它永远不会告诉你任何有用的东西。

看看[何时使用 -retainCount？](https://stackoverflow.com/questions/4636146/when-to-use-retaincount)

# android - ListView ：在简单的列表视图中，在更改列表视图中视图的背景颜色时，它在滚动时也会在下面更改

> ID：11201367
> 
> 赞同：-4
> 
> 时间：2012-06-26T05:45:59.130
> 
> 标签：android

这是我的代码。这里所选行的背景颜色正在改变。但是在滚动未选中视图的背景颜色后也发生了变化。我想防止这个问题。有什么帮助吗？

```
 public class ListDemoActivity extends ListActivity {
         String[] names = {
                    "Dwight",
                    "Kennedy",
                    "Johnson",
                    "Richard",
                    "Gerald",
                    "Jimmy",
                    "Ronald",
                    "George",
                    "Bill",
                    "B. Bush",
                    "Rana"
            };
         View view;
         int posn = -1;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            setListAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, names));
        }
        @Override
        protected void onListItemClick(ListView l, View v, int position, long id) {

    Log.i("Log", "Clicked posn"+position);
    Log.i("Log", "id is: "+id);
    if(posn == -1)
    {
        v.setBackgroundResource(R.color.blue);
    //  l.getChildAt(position).setBackgroundResource(R.color.blue);
        view = v;
        posn = position;    
    }
    else if (posn == position)
    {
        v.setBackgroundResource(R.color.blue);
        //l.getChildAt(position).setBackgroundResource(R.color.blue);
    }
    else
    {
        Log.i("Log", "Count of child:  "+l.getChildCount());
    //  View view = l.getChildAt(posn);
    //  Log.i("Log", "Position: "+view.)
        //view.setBackgroundResource(R.color.black);

        //view = l.getChildAt(position);
        //view.setBackgroundResource(R.color.blue);

        view.setBackgroundResource(R.color.black);
        v.setBackgroundResource(R.color.blue);
        view = v;
        posn = position;
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:33:38.890

这是因为 ListView 通过它的适配器重用了它的单元格；当一个单元格被滚动出视图时，它会被放在底部，所以如果你把它涂成蓝色并滚动它，它就会出现在下面。

您可以编写一个简单的自定义适配器，在其中跟踪您想要着色的单元格，并在[`getView(..)`](https://developer.android.com/reference/android/widget/Adapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)您必须覆盖的方法中相应地着色。另请参阅ListViews 上的[此视频](https://www.youtube.com/watch?v=wDBM6wVEO70&list=PL734A052F802C96B9&index=23&feature=plpp_video)。

# javascript - HTML 文件作为 js 或 css

> ID：11201368
> 
> 赞同：1
> 
> 时间：2012-06-26T05:45:59.473
> 
> 标签：javascript, html, css

我知道这是一个愚蠢的问题。

但只是出于好奇，有没有办法将 html 文件（.html 文件）作为 js/css 文件（重命名为 .js 或 .css）发布，类型标头为 HTML 或 js/css 并获取浏览器端的数据是正常的html格式吗？我的意思是浏览器将其作为 html 本身读取并将其显示为任何其他 html 页面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T05:52:34.697

显示资源时对浏览器来说重要的是 Content-Type HTTP 标头。只要此标头由 Web 服务器设置为`text/html`，扩展名并不重要。该资源将被解释为 HTML。`text/html`因此，您可以将 Web 服务器配置为使用Content-Type提供 .js 文件，它会起作用。

该文件甚至不需要存在于服务器上。这就是为什么我更喜欢谈论资源而不是文件。您可以使用服务器端语言并将其配置为响应某些虚拟地址（带有`.js`扩展名）并使用`text/html`Content-Type 标头提供 HTML 内容。

# java - 排除 if 的最佳方法，结果调用多个方法

> ID：11201369
> 
> 赞同：0
> 
> 时间：2012-06-26T05:46:02.173
> 
> 标签：java, jsp, servlets

我有一个用 JSP 制作的表单，这里有多个按钮 - “批准、拒绝、保存、取消”。对于每次提交，控件都转到单个控制器（Servlet），我将这个提交处理为::

```
String methodName = (String) request.getParameter("methodName");
if(methodName.trim.toLower().equals("approve")) 
{
  approve_Claim(parameters);
}
else if(methodName.trim.toLower().equals("reject")) 
{
  reject_Claim(parameters);
}
else if(methodName.trim.toLower().equals("save")) 
{
  save_Claim(parameters);
}
else if(methodName.trim.toLower().equals("cancel")) 
{
  cancel_Claim(parameters);
} 
```

有没有办法删除这些多个if，请建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T05:52:26.103

看起来你基本上想要一个映射`methodName.trim().toLower()`到某种带有参数的“索赔行动”。创建一个这样的界面：

```
interface ClaimAction
{
    void execute(Parameters parameters);
} 
```

`CancelClaimAction`然后用等类实现它`ApproveClaimAction`。接下来创建一个`Map<String, ClaimAction>`映射“批准”到一个`ApproveClaimAction`等。然后：

```
String actionName = methodName.trim().toLower(Locale.US));
ClaimAction action = CLAIM_ACTION_MAPPING.get(actionName);
if (action != null)
{
    action.execute(parameters);
}
else
{
    // Error case, presumably.
} 
```

您*可以*使用枚举来执行此操作，但我希望*这些*类中的每一个都有足够的工作来完成，因此值得将它们分开并单独测试每个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:49:57.757

我想到的一些替代方案是使用 switch 语句：

1.  在参数中传递整数而不是字符串，将它们解析为 servlet 中的 int，然后在此整数上使用 switch case。
2.  如果您使用的是 Java 7，则使用 switch case over string。
3.  ~~在 Java 6 中~~取这个字符串的枚举，然后切换它们 - 对于旧版本，直到 java 5，（因为枚举是在 java 5 中引入的，由 Jon skeet 提到）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:04:56.703

那么第一个建议是您可以重新考虑方法本身。那里有很多 MVC 框架（如 struts、struts2、spring MVC、play 框架），它们为您完成所有处理部分，让您的实际代码非常简单和干净。

* * *

假设您有使用自己的实现的特定目的，我建议您可以为此使用 java 反射。

```
String methodName = (String) request.getParameter("methodName");
this.getClass().getMethod(methodName).invoke(this); 
```

您需要在这里做的是保持方法名称与实际的 java 方法相同。

要传递参数，您可以这样做 -

```
String methodName = (String) request.getParameter("methodName");
this.getClass().getMethod(methodName, Paramter.class).invoke(this, parameters); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T05:54:02.543

必须在某处进行有关触发至极动作的比较。您可以使用类似这样的东西从这个地方删除这个逻辑

```
public void handleRequest(HttpServletRequest request, String action){} 
```

但正如我所说，验证必须在你的代码中的某个地方......

# cakephp - 分页；多个模型的结果

> ID：11201374
> 
> 赞同：0
> 
> 时间：2012-06-26T05:46:41.560
> 
> 标签：cakephp

我建立了一个蛋糕模型，在搜索时需要返回分页结果，这些结果根据另一个模型中的数据排除了某些项目。

我有一个名为 Box 的模型和一个名为 Item 的模型。

每个盒子可以有 0 个或多个项目，但我只希望具有 1 个或多个具有水果类别的项目的盒子出现在分页结果中。

Box 模型与 Item 模型具有“hasMany”关联。

Item 模型有一个名为“is_friut”的字段。

保重，李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:11:56.620

这将在表之间进行内部连接，仅当项目是_fruit 时。

```
public $paginate = array(
    'joins' => array(
        array(
            'table' => 'items',
            'alias' => 'ItemJoin',
            'type' => 'INNER',
            'conditions' => array(
                'ItemJoin.is_fruit' => 1
            )
        )
    )
); 
```

# mysql - 从mysql查询中选择行并将其保存到变量

> ID：11201385
> 
> 赞同：0
> 
> 时间：2012-06-26T05:47:44.103
> 
> 标签：mysql, pdo

如何从 mysql 查询中选择一行并使用 PDO 将其保存到变量中？以前我是这样做的

```
$row = mysql_fetch_array($result);

  $ID = $row['ID']; 
```

现在我阅读了`PDOStatement::fetch()`替代的 PHP 手册，`mysql_fetch_array`但我不知道如何使用它。这是我尝试过的，但显然它不起作用

```
 <?php
include 'config.php';

$sql = "select * from table1";

try {
    $dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);  
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $stmt = $dbh->query($sql);  
    $result = $stmt->fetchAll(PDO::FETCH_OBJ);
    $dbh = null;
    echo '{"items":'. json_encode($result) .'}'; 
} catch(PDOException $e) {
    echo '{"error":{"text":'. $e->getMessage() .'}}'; 
}

$row = $stmt->fetchAll(PDO::FETCH_OBJ);
  $ID = $row['ID'];

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:02:10.973

如果您使用`PDO::FETCH_OBJ`，则必须使用对象表示法来检索结果中的元素。由于您已经调用了一个`fetchAll()`方法，因此以后不能再调用另一个 fetch/fetchAll 方法，因为数据将不再可访问。

代替`$row = $stmt->fetchAll(PDO::FETCH_OBJ);`，迭代`$result`您之前`fetchAll()`返回的变量：

```
foreach($result as $row)
{
    $ID = $row->ID;
    // Etc...
} 
```

# .net - 如何在 Python 中加密并在 C# 中解密？

> ID：11201386
> 
> 赞同：2
> 
> 时间：2012-06-26T05:47:45.057
> 
> 标签：.net, python, encryption, aes

我是加密的新手，并且见过许多不同的库，但是其中许多是多年前创建的，我只是想知道人们今天使用什么在 python 中进行加密，以及可以使用它在 C# .net 中解密的东西

我研究过 pycrypto，但从我读过的所有帖子来看，它似乎有一段时间没有更新（尽管它看起来确实很受欢迎），而且人们在让它与 .net 一起工作方面遇到了真正的困难,

有什么好的建议吗？我不认为有一个可用的.net 和 python 版本的库吗？它确实需要是可靠的加密，例如 AES。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T02:21:18.870

对于将来的任何人，我做了一些测试，发现这非常适合我的目的，silverlight 示例几乎可以直接移植到 C#。

使用 pycrypto 和 System.Security.Cryptography

[http://japrogbits.blogspot.co.nz/2011/02/using-encrypted-data-between-python-and.html](http://japrogbits.blogspot.co.nz/2011/02/using-encrypted-data-between-python-and.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:33:42.740

我们不知道数据是如何移动的，所以这里有一些建议：

1.  如果客户端和服务器通过双向通道进行通信，则使用 SSL。Python 对 SSL 有很好的内置支持，我相信 C# 也有很好的支持。这很容易设置，您甚至可以使用[stunnel](http://www.stunnel.org/)，这样您的 Python 和 C# 代码就不必接触加密。

2.  如果客户端和服务器异步通信（例如，电子邮件、批处理作业等），则使用 PGP/GPG。加密和解密可以卸载到外部进程，例如[GPG](http://www.gnupg.org/)，因此实现成本（无论是什么语言）将相对最小，并且您的 Python 和 C# 代码不必接触加密。

这些都不需要使用库。

在这两种情况下，您都需要创建一个公钥/私钥对。正常的过程是在服务器上安装这个密钥对，并将公钥与客户端捆绑在一起。如果您的应用程序在“客户端”和“服务器”之间没有简单的划分，那么您将需要弄清楚其他事情，但您应该先**询问**，因为很容易弄错密码。容易得吓人。

# 不要使用“AES”。

[如果您在某处的源代码中键入“AES”，那么您做错了。](http://chargen.matasano.com/chargen/2009/7/22/if-youre-typing-the-letters-a-e-s-into-your-code-youre-doing.html)

另外，不要使用 AES。

AES 是一种密码，它是密码系统的组成部分之一。你不想要一个构建块，你想要一个**完整的系统。** SSL 和 PGP/GPG 是完整的系统。如果您尝试使用 AES 发明自己的系统，您可能会在某个地方犯一个简单的错误，**这是一件非常糟糕的事情。**

创建一个可行的密码系统是困难的。就像脑外科手术一样，有很多人会拿起刀，但只有少数人知道在哪里切。

我有没有提到你不应该使用 AES？

好的，不要使用 AES。

不要忘记避免 AES。

# loadrunner - Load Runner 解压错误

> ID：11201398
> 
> 赞同：0
> 
> 时间：2012-06-26T05:49:06.257
> 
> 标签：loadrunner

Action.c(107): 警告 -26601: 解压函数 (wgzMemDecompressBuffer) 失败，返回码=-3 (Z_DATA_ERROR), inSize=740, inUse=0, outUse=0 [MsgId: MWAR-26601]

如何处理上述错误？我什么时候收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:07:50.997

您的负载生成器很可能过载。注意监控负载生成的健康状况，将日志记录保持在绝对最小值，并且故意在主机上负载不足的用户数量，以防止 CPU、磁盘、内存或网络上的资源受限.....这反过来会减慢您的虚拟用户，导致与您遇到的类似的错误，并且通常会攻击测试的完整性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:34:34.270

我找到了与您遇到的相同问题的答案：

```
https://groups.google.com/forum/?fromgroups=#!topic/LR-LoadRunner/epeSF7uSf-Q 
```

**从帖子中复制**

---开始复制---

这个特定的错误很常见。显然，某些设备实现*的 http deflate 压缩与 LR 的预期略有不同*，导致某些事务出现间歇性错误，通常是特定的资源下载。

虽然这个论坛讨论 (http://www.sqaforums.com/showflat.php?Number=550003) 似乎说负载生成器端的资源匮乏可能是原因，但我从未在资源利用情况下观察到它发电机是个问题。

有几种解决方案：

1) 将以下行添加到脚本顶部： web_add_auto_headder("Accept-Encoding", "gzip");

这将默认为 gzip 方法禁用“deflate”压缩方法。

2）在运行时设置中更改压缩方法：首选项

> 选项 > 接受服务器端压缩。（在它起作用之前可能需要一些摆弄，我似乎永远不记得应该打开哪些选项，哪些不应该......）

3) 找到有问题的资源——通常是一个 Flash 对象或图片，并将其从有问题的事务中取出——或者通过从 EXTRARES 部分中删除它，或者通过 web_add_filter() 的方式。然后将其放入它自己的 web_url() 调用中，并附加正确的“RecContentType”标头 - 例如。“RecContentType=应用程序/x-shockwave-flash”。

为什么最后一个选项似乎适用于某些应用程序让我失望。坦率地说，它看起来像 Loadrunner 中的一个错误 - a) 非常古老（这些错误至少从 LR 8 开始就已经存在）和 b) 只发生在可能从未在任何 HP 实验室中见过的非常特殊的情况下。

问候，弗洛里斯---复制结束---

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T09:23:17.687

在首选项 -> 选项选项卡中增加网络缓冲区大小。它帮助我避免了解压错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T17:34:19.867

禁用防病毒软件。这总是对我有用。

# bash - 如何让我的 shell 脚本在出错时中止？

> ID：11201400
> 
> 赞同：0
> 
> 时间：2012-06-26T05:49:16.507
> 
> 标签：bash, shell

例如我有

```
make test
# do other stuff 
```

'make test' 运行一些单元测试，并会以成功或错误退出。如果 make test 因错误而中止，如何终止整个脚本并显示消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T06:09:43.347

```
make test || exit $? 
```

在一般情况下，`set -e`强制脚本在任何错误时中止；但这通常是矫枉过正的，因为您必须防止微不足道的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:06:41.210

没有错误消息，您可以简单地使用

```
set -e
make test
#more stuff 
```

如果你想打印出状态

```
make test
if [ "$?" = "0" ]; then
    echo "all fine!"
else
    echo "yikes, something went wrong"
    exit 1
fi
#more stuff 
```

# asterisk - 检测到数字时如何停止播放命令？

> ID：11201401
> 
> 赞同：1
> 
> 时间：2012-06-26T05:49:17.367
> 
> 标签：asterisk

当我在 Asterisk 中使用播放命令播放文件时，在手机上按下一个键时它不会停止播放。有没有办法停止播放并转到下一个命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:03:25.573

Playback 并非旨在读取用户的输入，而是作为一种播放欢迎消息的工具（请注意，如果未回答，Playback 将回答频道）。Playback的[手册](https://wiki.asterisk.org/wiki/display/AST/Application_Playback)没有说明任何关于读取用户输入的内容。此外，此[voip-info](http://www.voip-info.org/wiki/view/Asterisk+cmd+Playback)页面指出：

```
Playback will play the whole sound file(s), and when complete, return control. 
```

因此，请尝试在您的拨号方案中使用[Read ，例如：](https://wiki.asterisk.org/wiki/display/AST/Application_Read)

```
Read(get,"mysound", 1) 
```

这将播放声音**mysound**，并从用户那里读取最多 1 位数字。更多示例（及其选项的完整语法）可在[Read 的 voip-info 页面上找到](http://www.voip-info.org/wiki/view/Asterisk+cmd+Read)。

最好的！

编辑：在示例中，读取的数字将保存在拨号计划变量**get**中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-14T05:14:09.970

您还可以使用后台命令，该命令将从用户那里获取单个 DTMF 输入。

要了解此命令，请使用此链接 `http://www.voip-info.org/wiki/view/Asterisk+cmd+BackGround`

或在您的服务器中键入以下命令

```
asterisk -rx 'core show application Background' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T02:54:03.893

然后只收集一个数字，对收集的变量不做任何事情:-)

# asp.net - HTTPS 停止使用 IIS express

> ID：11201405
> 
> 赞同：17
> 
> 时间：2012-06-26T05:49:29.700
> 
> 标签：asp.net, https, iis-express

我经历了整个过程

[http://www.hanselman.com/blog/WorkingWithSSLAtDevelopmentTimeIsEasierWithIISExpress.aspx](http://www.hanselman.com/blog/WorkingWithSSLAtDevelopmentTimeIsEasierWithIISExpress.aspx)

几周前，让 https 在我所有 IP 的端口 443 上工作。几天前机器重新启动，我今天再次尝试访问该站点（通过 VS2010 启动，IIS express 托盘显示站点在 80 和 443 上运行）。http 工作正常，但 https 只是说“Internet Explorer 无法显示该页面”。我可以通过 netstat 看到系统进程正在侦听端口 443，但我在浏览器中没有得到任何东西。Fiddler 展示了一些隧道活动，但仅此而已。我应该检查什么才能让它恢复运行？上面博客上的所有步骤对我来说都是巫术，所以现在它不起作用我真的不知道从哪里开始。

-JT

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-26T21:45:16.117

[您是否尝试过以下操作（发布在http://www.hanselman.com/blog/WorkingWithSSLAtDevelopmentTimeIsEasierWithIISExpress.aspx](http://www.hanselman.com/blog/WorkingWithSSLAtDevelopmentTimeIsEasierWithIISExpress.aspx)的底部）。

> “我认为通过将自签名证书从 Personal 移动到 Trusted Root CA 目录会导致开发人员重新启动计算机后 SSL 停止工作的问题。（不知道它是如何发生的，但它确实会一直发生。）我终于解决了这个问题通过导出并将自签名证书重新导入到受信任的根目录中（而不是简单地将其拖过来）发出问题。现在考虑我的自签名证书，我不需要每次重新启动时都重新安装/修复 IIS Express机器。”

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-04-15T17:27:55.017

对我来说，问题在于**端口号**：我的 Visual Studio 2013/IIS Express 配置的应用程序端口号不在范围内**：44300-:44398**

关于同一问题的完整答案：[https ://stackoverflow.com/a/24957146/908936](https://stackoverflow.com/a/24957146/908936)

# c - 如何在 Greenhills 编译器的内联汇编中使用全局变量？

> ID：11201410
> 
> 赞同：0
> 
> 时间：2012-06-26T05:50:14.557
> 
> 标签：c, embedded, inline-assembly, greenhills

我想在内联汇编中使用全局变量。

> asm("LDR R0,g_TsInitStackPointerAddress");

这里 g_TsInitStackPointerAddress 是一个全局变量。编译时没有显示任何错误。

但是在链接时显示以下错误

> [elxr]（错误）超出范围：在地址 0x10013e0 从 InitStack+0x20 (drv.o(.text)+0x1a4) 到 g_TsInitStackPointerAddress 执行重定位类型 R_ARM_POOL (4) 时，0x1001326（无符号）不适合 12 位+0x0 ((普通)+0xb6)

这里我的函数名是 InitStack，文件名是 drv。我无法理解错误。

使用的处理器：Cortex R4
编译器：Greenhills

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:43:18.923

得到解决方案

> __asm("g_TsInitStackPointerAddress_a: DCD g_TsInitStackPointerAddress");

在该函数中给出此语句，然后它将在内联程序集中使用该变量

# windows-phone-7 - 单击wp7中的复选框时如何保存用户详细信息？

> ID：11201413
> 
> 赞同：-2
> 
> 时间：2012-06-26T05:50:25.807
> 
> 标签：windows-phone-7

单击记住我复选框时，我需要保存用户名，密码文本。如果选中复选框，则用户再次登录，则需要在该文本框中显示保存的值。如果未选中记住我复选框，则不需要显示详细信息当他登录时。再次需要输入他的姓名，密码文本才能登录。请告诉我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:46:09.627

将您的用户名和密码绑定到 viewModel 中的属性，并使 viewModel 从隔离存储中提取此数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:52:09.643

你试试自己的东西，然后问我们你是否卡在某个地方。

查看此链接以获取有关如何在[IsolatedStorageSettings中存储和检索设置的良好示例](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings%28v=vs.95%29.aspx)

使用复选框的 Checked 事件处理程序将数据存储在 IsolatedStorage 中，并使用 Unchecked 处理程序将其从 IsolatedStorage 中删除。

并且每次显示登录框时，检查独立存储中数据的可用性并相应地呈现

# oracle - PL/SQL 帮助检查特定模式的特定表中的特定值

> ID：11201417
> 
> 赞同：0
> 
> 时间：2012-06-26T05:50:58.767
> 
> 标签：oracle, plsql, oracle10g, oracle11g, data-warehouse

我正在使用 Oracle 数据库。我有 Toad 来执行我的查询。

我有两列

*   打字机
*   描述

在架构中`Product_BIS`

我想知道是否有任何存储过程来检索架构`Product_BIS`中具有这些列 Typecd 和描述的所有表。如果是这样，我想检查 Typecd ='11'and description='Nokia' 是否存在。

如何找到这个？是否有任何简单的存储过程来检查这个。任何人都可以帮助我

注意：Schema Product_BIS 中有大约 300 个表。所以手动检查很困难

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:14:43.967

您想要的是询问数据字典以查找具有某些列的所有表，然后生成查询以查找这些表中的哪些具有在这些列中具有特定值的行。没有内置的 Oracle 可以执行此操作。

执行此操作的常规方法是动态 SQL。您说您没有在数据库中创建对象的权限。好吧，好吧，只需运行一个匿名块。

此代码可以在 SQL*Plus 或任何其他 IDE 中运行。只需确保您已启用 SERVEROUTPUT。

注意`rownum = 1`汇编语句中的使用。如果多个记录与条件匹配，这可以防止块抛出 TOO_MANY_ROWS 异常。这是可以接受的，因为发布的问题只需要程序断言存在一行或多行。如果实际要求不同，那么显然您需要修改代码。例如，如果您需要显示匹配记录的数量，则选择`count(*)`一个数字变量并相应地更改 DBMS_OUTPUT 语句。

```
declare
    v char(1);
begin
    for r in ( select table_name from all_tab_columns
                where owner = 'PRODUCT_BIS'
                and column_name = 'TYPECD'
                intersect
                select table_name from all_tab_columns
                where owner = 'PRODUCT_BIS'
                and column_name = 'DESCRIPTION' )
    loop
        begin
            execute immediate
                 'select null from '||r.table_name
                   ||' where typecd=''11'' and description = ''nokia'' and rownum = 1'
                 into v;
            dbms_output.put_line ( 'those values exist in '||r.table_name);
       exception
            when no_data_found then
                 dbms_output.put_line ( 'no occurrence of those values in '||r.table_name);
       end;
    end loop;
end; 
```

此解决方案使用硬编码值。我认为这是一次性要求，所以没关系。但是，如果是一个脚本，您将希望针对模式、列名和值的许多不同排列重复运行，那么您应该将其重新编写为使用替换变量的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:41:40.107

可能这会帮助您在特定模式中找到特定值

```
CREATE OR REPLACE FUNCTION FIND_IN_SCHEMA (VAL VARCHAR2)
   RETURN VARCHAR2
IS
   V_OLD_TABLE   USER_TAB_COLUMNS.TABLE_NAME%TYPE;
   V_WHERE       VARCHAR2 (4000);
   V_FIRST_COL   BOOLEAN                            := TRUE;

   TYPE RC IS REF CURSOR;

   C             RC;
   V_ROWID       VARCHAR2 (20);
BEGIN
   FOR R IN (SELECT   T.*
                 FROM USER_TAB_COLS T, USER_ALL_TABLES A
                WHERE T.TABLE_NAME = A.TABLE_NAME
                  AND T.DATA_TYPE LIKE '%CHAR%'
             ORDER BY T.TABLE_NAME)
   LOOP
      IF V_OLD_TABLE IS NULL
      THEN
         V_OLD_TABLE := R.TABLE_NAME;
      END IF;

      IF V_OLD_TABLE <> R.TABLE_NAME
      THEN
         V_FIRST_COL := TRUE;

         -- DBMS_OUTPUT.PUT_LINE('searching ' || V_OLD_TABLE);
         OPEN C
          FOR 'select rowid from "' || v_old_table || '" ' || V_WHERE;

         FETCH C
          INTO V_ROWID;

         LOOP
            EXIT WHEN C%NOTFOUND;
            DBMS_OUTPUT.PUT_LINE ('  rowid: ' || V_ROWID || ' in '
                                  || V_OLD_TABLE
                                 );

            FETCH C
             INTO V_ROWID;
         END LOOP;

         V_OLD_TABLE := R.TABLE_NAME;
      END IF;

      IF V_FIRST_COL
      THEN
         V_WHERE := ' where ' || R.COLUMN_NAME || ' like ''%' || VAL || '%''';
         V_FIRST_COL := FALSE;
      ELSE
         V_WHERE :=
            V_WHERE || ' or ' || R.COLUMN_NAME || ' like ''%' || VAL || '%''';
      END IF;
   END LOOP;

   RETURN 'Success';
END;
/ 
```

# java - 如果java中的列表为空，抛出哪个异常？

> ID：11201420
> 
> 赞同：30
> 
> 时间：2012-06-26T05:51:09.543
> 
> 标签：java

如果列表为空，我对抛出哪个异常有以下疑问

```
public class XYZ implements Runnable {
    private List<File> contractFileList;

    @Override
    public void run() { 
        contractFileList = some method that will return the list;
        //now i want to check if returned contractFile is empty or not , if yes then raise the exception
        if (contractFileList.isEmpty()) {
            // throw new ?????
        }
    }
} 
```

我在批处理中运行此代码，我想抛出一些异常来停止批处理执行。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-26T05:55:20.703

在我看来是这样[`IllegalStateException`](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html)的。

> 表示方法已在非法或不适当的时间被调用。

基本上，您的对象不处于`run`被调用的有效状态。

我不会为此创建您自己的例外，除非您希望它在其他地方被故意捕获。*听起来*这只会由于编程错误而不是意外*情况*而发生......在这种情况下，未经检查的异常是合适的，并且`IllegalStateException`非常清楚地描述了问题的一般性质。

您可以在异常消息中详细说明原因（解释“非法状态”是列表为空）。

我建议你尽量避免为每一个可能出错的小事情创建一个单独的异常类型——除非你分别捕获这些异常，否则拥有不同的类型并没有帮助；它只会增加混乱。具有正确广泛类型但具有有用信息的例外提供了同样多的好处，而没有太多的认知开销。

请注意，如果您仍然要实现，*则不能*`Runnable.run`使用已检查异常，因为未声明抛出任何已检查异常。您必须将其包装在未经检查的异常（例如`RuntimeException`）中，此时好处更少。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-26T05:52:54.580

`Exception`通过子类化并创建一个描述性的名称来创建您自己的例外。

```
public class MyEmptyListException extends Exception {
    public MyEmptyListException(String message) {
        super(message);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T06:41:04.847

如果我要创建任何自定义异常类，我会牢记这些要点。

*   确保在整个应用程序中处理异常的方法一致。
*   新的自定义异常是否会向使用您的方法的开发人员提供有关如何从异常中恢复的更多信息？

请找到一些我发现对理解异常处理有用的链接..

1.  [异常处理的最佳实践](http://onjava.com/pub/a/onjava/2003/11/19/exceptions.html?page=2)
2.  [Java是否需要检查异常](http://www.mindview.net/Etc/Discussions/CheckedExceptions)
3.  [未经检查的异常](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-25T19:28:11.877

我会抛出一个`IllegalArgumentException`. 正如[Javadoc](http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html)解释的那样，它“被抛出以表明一个方法已被传递了一个非法或不适当的参数”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T05:54:16.837

你应该扔`User defined Exception`.

您应该创建自己的异常类，然后抛出它。

# ajax - 当我尝试创建对话框时如何显示加载器图像

> ID：11201421
> 
> 赞同：0
> 
> 时间：2012-06-26T05:51:20.517
> 
> 标签：ajax, jquery

当我单击表格的任何单元格时，我在对话框的表格中显示一些动态数据，它在另一个弹出窗口（对话框）的新表格中显示另一个动态数据。单击第一个表的单元格后，第二个弹出表需要一些时间才能出现。我想显示一个加载器图像，直到我的第二个表（对话框）出现......我在网上搜索了很多，但没有遇到我的情况......

当我单击第一个表的单元格时，会调用此函数...

```
// CODE SNIPPET
function access(test1,facilityName,status)
{
    var divString="<table>"+"<tr>"+"<td><table><div id='rfidMove'></div></table></td>"+"</tr></table>";

    //sending some parameters on a jsp page and based on these params getting content of   that jsp here

    $.post("RfidInventory.jsp?","container="+test1+"facilityName="+facilityName+"&                                                                                                                   status="+status, function(data){

    // showing another jsp page data here to make table in this dialog       
         $("#rfi").dialog("destroy");
         $("#rfi").html(divString);
         $("#rfi").dialog({  
         width: '650',
         height: '300',
             zIndex : '3000',
             modal:true, 
         title: "RFID INVENTORY DETAIL",
             overlay: { opacity: 0.1, background: 'black'} 
       });
   $("#rfidMove").html(data);  
}); 
```

请帮助我，我已经在这方面花了很多时间，但仍在寻找解决方案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:58:20.510

使用动画 GIF 在 DOM 中的某处添加*loader标记，然后将其隐藏：*

```
<div id="#loader" style="display: none;"><img src='loader.gif' alt='loading' /></div> 
```

然后在 AJAX 调用之前显示它：

```
$("#loader").css("display", "");
$.post(url, function(data) {
    $("#loader").css("display", "none");
}); 
```

这是正常的做法。您可以在此站点下载漂亮的自定义动画 GIF：http: [//ajaxload.info/](http://ajaxload.info/)

*编辑*在 Firebug 中尝试这些东西。

**添加加载器**

```
$("body").append("<img id='myloader' src='http://www.ajaxprojects.com/db/img16.gif' />"); 
```

**把它藏起来**

```
$("#myloader").css('display', 'none'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:58:37.250

```
var val = 10;
$( "#progressbar" ).progressbar({
    value: val
});

<div id="progressbar"></div> 
```

请参阅此链接：-

[http://jqueryui.com/demos/progressbar/](http://jqueryui.com/demos/progressbar/)

[http://docs.jquery.com/UI/Progressbar](http://docs.jquery.com/UI/Progressbar)

[http://www.codeproject.com/Articles/66049/Showing-Progress-Bar-Using-jQuery](http://www.codeproject.com/Articles/66049/Showing-Progress-Bar-Using-jQuery)

# web - 发布和访问网站的步骤是什么？

> ID：11201424
> 
> 赞同：-1
> 
> 时间：2012-06-26T05:51:28.597
> 
> 标签：web, dns, virtual-server

嗨，我在 asp.net 上工作了一段时间。我想知道是否要启动使用 asp.net Visual Studio 制作的自己的网站，我该怎么做？

我的问题是我是否应该购买服务器或使用网络虚拟主机。其中哪一个更好？我需要单独购买域名还是自己托管？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:51:03.667

你在那里问了几个问题！我会尽力给你一个全面的答案。

要使网站“公开”，您需要某种形式的托管，然后您将网站文件（编译的 .net 网站）放到服务器上，它就会公开。

那里有数百个主机，在谷歌中快速搜索“Windows 网络托管”将为您提供很多选择。确保您比较一些，以便您物有所值。

正如您所说，您还需要一个域名来“指向”主机，您选择的任何提供商通常都会为您提供包含您选择的域名的价格。

# c# - 如何从 WPF 的菜单中显示用户语言对话框？

> ID：11201425
> 
> 赞同：1
> 
> 时间：2012-06-26T05:51:30.563
> 
> 标签：c#, wpf, user-interface, dialog, menuitem

我想使用用户语言在 WPF（保存、打开、打印...）中打开对话框。

如何找到用户语言？如何使用该语言打开对话框？

菜单和子菜单会自动以正确的语言显示。

```
e.g. Command = Application.save 
```

示例代码将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:28:41.917

有很多方法可以给这只猫剥皮。找到看起来适合您和您的项目要求的那个。我将提供一种我使用的解决方案。

> *如何找到用户语言？*

一台机器可以有不同的文化，每个线程甚至可以有自己的文化。文化包含显示语言和日期/数字格式信息等。

```
System.Globalization.CultureInfo.CurrentCulture;
System.Globalization.CultureInfo.CurrentUICulture 
```

出于此答案的目的，您不需要直接访问这些对象。

> *如何使用该语言打开对话框？*

我使用资源文件 (RESX) 方法本地化我的项目。首先为您想要支持的文化和默认文化创建资源文件，就像这样。

*Resources.resx*
*Resources.en.resx*
*Resources.fr.resx*
*Resoucess.ja.resx*

如果您想**具体**使用完整的文化代码。
*资源.ja-JP*

现在将所有本地化文本添加到资源中，默认也是如此。

当显示语言不是您支持的语言集时，将使用默认值。

WPF 应用程序将选择 Windows 用户的显示区域性以选择要使用的 RESX 文件。
绑定到 XAML 中的 RESX 文件。

```
<TextBlock Text="{x:Static properties:Resources.Owner}"/>  
<TextBlock Text="{x:Static properties:Resources.StartDate}" />  
<TextBlock Text="{x:Static properties:Resources.EndDate}"/> 
```

这里我有三个静态绑定到 Resources.Owner StartDate 和 EndDate 属性的文本块。properties 关键字并未指定您将使用属性，而是指定应用程序属性组中的 Resources 对象。

如果您在使用静态绑定时遇到问题，请检查您的命名空间是否正确。请注意，您不应直接引用任何特定资源。ResourceManager 将处理正确文件的加载。
如果您需要动态语言切换，请查看网上一些不错的资源全球化教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:25:11.140

您可以使用以下语法在 WPF 中获取用户语言...

```
XmlLanguage language = XmlLanguage.GetLanguage(CultureInfo.CurrentCulture.IetfLanguageTag); 
```

我希望这能帮到您..

# jquery - 如何像 jquery 一样使用 yui loader 3rd party lib？

> ID：11201426
> 
> 赞同：0
> 
> 时间：2012-06-26T05:51:40.717
> 
> 标签：jquery, yui

这是我的测试代码：

```
<script type="text/javascript">
YUI({
    modules: {
        'jquery': {
            fullpath: 'script/lib/jquery.min.js'
        },
        'jquery-blockui': {
            fullpath: 'script/lib/jquery.blockUI.js',
            requires: ['jquery']
        }
    }
}).use('jquery-blockui', function(Y, result){
    $.blockUI();
});
</script> 
```

当它运行时，有时它工作，有时不工作。因为在 jquery-blockui 之后加载了 jquery lib。

错误如：

```
Uncaught ReferenceError: jQuery is not defined
Uncaught TypeError: Object function (a,b){return new e.fn.init(a,b,h)} has no method 'blockUI' 
```

那么，代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:42:12.140

如果你使用 YUI 加载器加载非 YUI 脚本，那么在你的 YUI 配置中你通常需要设置 async: false 来避免这个问题。

试试 YUI 3 Cookbook 中的这个食谱：[https ://github.com/evangoer/yui3-cookbook/blob/master/examples/loading/use_jquery.html](https://github.com/evangoer/yui3-cookbook/blob/master/examples/loading/use_jquery.html)

# c++ - 用于初始化派生类型的通用 switch 语句

> ID：11201428
> 
> 赞同：2
> 
> 时间：2012-06-26T05:51:45.180
> 
> 标签：c++, templates, polymorphism

我正在创建一个 DNS 名称解析器。在解析返回的数据包时，我读取了 RR 类型，然后将其通过 switch 以初始化类 Record 的派生类型。记录类型是一个大型枚举类型。我使用模板专业化将枚举映射到结构。

```
template < QueryType n >
struct Struct;

template <> struct Struct< DNS_Q_A > { typedef A Type; };
template <> struct Struct< DNS_Q_CNAME > { typedef CNAME Type; };

template < QueryType n > struct Struct { typedef UNKNOWN Type; }; 
```

目前我有 4 个 switch 语句，它们都做非常相似的事情。即调用 operator new，placement new，用于复制和移动 c'tors。这是需要维护的大量代码。我希望只有 1 个 switch 语句，我可以在其中传递某种类型的对象，其中包含要执行的函数、返回类型和 n 个参数。

switch 语句如下所示：

```
switch ( nType )
{
case DNS_Q_A:
    pInstance = new ( &Container ) Struct< DNS_Q_A >::Type( dynamic_cast< const Struct< DNS_Q_A >::Type& >( Other ) );
    break;
case DNS_Q_CNAME:
    pInstance = new ( &Container ) Struct< DNS_Q_CNAME >::Type( dynamic_cast< const Struct< DNS_Q_CNAME >::Type& >( Other ) );
    break;
} 
```

如您所见，除了对结构类型的依赖之外，每种情况都是相同的。这对我来说是“模板”，但我不知道如何传入一个对象。

我仅限于编码 4 个开关还是有办法？请不要引用“Boost”，此代码必须独立于任何其他库。

解决方案：（感谢 Jan Hudec）

```
template< template < class > class Action >
typename Action< Struct< DNS_Q_A >::Type >::result_type
    CreateRecord ( 
        unsigned n,
        typename Action< Struct< DNS_Q_A >::Type >::first_argument_type arg1,
        typename Action< Struct< DNS_Q_A >::Type >::second_argument_type arg2 )
{
    typedef typename typename Action< Struct< DNS_Q_A >::Type >::result_type ReturnType;
    switch ( n )
    {
    case DNS_Q_A:       return static_cast< ReturnType >( Action< Struct< DNS_Q_A >::Type >()( arg1, arg2 ) );
    case DNS_Q_NS:      return static_cast< ReturnType >( Action< Struct< DNS_Q_NS >::Type >()( arg1, arg2 ) );
    /*...*/
    }
} 
```

Action 结构定义为：

```
template < typename T >
struct Copy : std::binary_function< storage_type&, const Record&, Record* >
{
    Record* operator() ( storage_type& Storage, const Record& Obj )
    {
        return new ( &Storage ) T( dynamic_cast< const T& >( Obj ) );
    }
};
template < typename T >
struct Move : std::binary_function< storage_type&, Record&&, Record* >
{
    Record* operator() ( storage_type& Storage, const Record& Obj )
    {
        return new ( &Storage ) T( dynamic_cast< const T& >( std::move( Obj ) ) );
    }
}; 
```

并将 Switch 语句替换为：

```
pInstance = CreateRecord< Copy >( nType, Container, Other ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:38:17.663

您可以创建一个函数模板来执行函子模板。如果没有 C++11 可变参数，所有仿函数都需要相同数量的参数，因此您必须将它们打包在一个结构中，或者在它们不相关时传递 NULL。使用可变参数模板（我还没有使用它们，所以我不记得确切的语法并且不会在这里写它们）你可以很容易地在每种形式中使用不同的参数。

这个想法就像（在我的脑海中，所以可能有一些错别字）：

```
template <template <typename T> class F>
F<Struct<DNS_Q_A>::Type>::return_type RecordCall(RecordType nType, const F<Struct<DNS_Q_A>::Type>::argument_type &arg)
{
    switch(nType)
    {
        case DNS_Q_A:
            return F<Struct<DNSK_Q_A>::Type>()(arg);
        case DNS_Q_CNAME:
            return F<Struct<DNSK_Q_CNAME>::Type>()(arg);
        // ...
     }
} 
```

现在您编写各个函数，例如：

```
template <typename T>
struct Clone : std::unary_function<BaseType *, const BaseType *>
{
    BaseType *operator()(const BaseType *source)
    {
        return new<T>(dynamic_cast<const BaseType &>(*source));
    }
} 
```

并结合在一起：

```
target = RecordCall<Clone>(source->GetType(), source); 
```

（并包装在另一个函数中，该函数将为多参数形式插入 getter 和/或打包参数，例如放置副本构造）

虽然复制的常用方法是使用虚拟克隆成员方法。但这不适用于建筑。

编辑：请注意，我将内部模板中的返回和参数类型定义为 typedef（使用标准`unary_function`帮助程序），但它们也可以作为单独的模板参数传递，特别是如果使用`RecordCall`将被包装在另一个函数中。也许返回类型甚至不必是模板参数，因为它`Record *`适用于问题中提到的所有情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:29:46.287

我必须承认我不太明白这里不能通过......愚蠢的虚拟函数来完成什么。

```
class Object {
public:
    virtual Object* clone() const = 0;
    virtual void clone(Container& c) const = 0;

    // ...
};

class A: public Object {
public:
    virtual A* clone() const override { return new A(*this); }
    virtual void clone(Container& c) const override { new (&c) A(*this); }

    // ...
}; 
```

然后......只需摆脱开关：

```
pInstance = other.clone(container); 
```

工作就完成了。

# windows - Perl 脚本自动化：在记事本中搜索某些项目

> ID：11201435
> 
> 赞同：1
> 
> 时间：2012-06-26T05:52:48.503
> 
> 标签：windows, perl, automation

我必须在记事本中每天使用近 100 个项目搜索某些项目。我`CTRL+F`想知道，有什么方法可以编写脚本或其他任何东西，我会将所有项目传递给它如果成功，它将给我搜索输出，即它应该返回在记事本中找到的所有项目。

我正在努力`windows`。请帮忙，因为这对我来说是浪费时间，并且在不久的将来，如果项目增加到 1000，这对我来说将是一个巨大的解决方法。

我对 Perl 有一些想法，我认为在 Perl 中是可能的，所以我在这里提出了这个问题。但是如果你想用任何其他语言提供你的脚本，请提供。我需要一个解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T06:20:52.870

```
use strict;
use warnings;

my $qfn   = 'file.txt';
my @terms = ( 'foo', 'bar', ... );

my %terms_not_found = map { $_ => 1 } @terms;

open(my $fh, '<', $qfn)
   or die("Can't open \"$qfn\": $!\n");

while (<$fh>) {
   for my $term (keys(%terms_not_found)) {
      delete $terms_not_found{$term} if /\Q$term/;
   }

   last if !%terms_not_found;
}

print("Found:\n");
print("$_\n")
   for grep !$terms_not_found{$_}, @terms; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:08:18.810

你基本上想要`grep`.

```
grep -o pattern file.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T06:10:25.673

请注意，我不希望这变成一个建议线程，但有时最简单的解决方案是您不必自己编写的解决方案。

[http://www.wingrep.com/](http://www.wingrep.com/)

从功能页面：

*   **命令行界面：**强大的类 UNIX 命令行界面允许从 DOS 框或其他 Windows shell 驱动 Windows Grep。

您可以在批处理脚本中使用wingrep 的命令行选项来执行搜索，并在Windows 中将其设置为每日/每周/任何计划任务来执行您的自动化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T06:33:31.160

下面是 perl 脚本的运行方式。

```
use strict;
use warnings;

open(FILE,'<file.txt');
my @items=qw(abc 123 abc123 xyz);
my @match;

while(<FILE>)
{
 my @words=split(/ /,$_);
 foreach my $el(@items) {
    @match=grep {$el eq $_} @words;
    local $\=" ";    # Output separator
    print @match;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T13:08:06.467

You can try [http://www.codeproject.com/Articles/4600/Notepad-RE-Regular-Expressions](http://www.codeproject.com/Articles/4600/Notepad-RE-Regular-Expressions) It is a very nice tool. You can use perl compatible regular expressions from "boost::regex".

In order to do a grep, you need to use following replace syntax on that tool "^(?:(?!TEXT).)*\r\n" That is the pattern to be searched, and replace with box should be empty.

That regexp will remove any lines without the TEXT in it.

# ruby-on-rails - rails 3.2.6 打开 rails 控制台错误

> ID：11201439
> 
> 赞同：0
> 
> 时间：2012-06-26T05:52:55.273
> 
> 标签：ruby-on-rails

我正在使用 rails 3.2.6 打开 rails 控制台时出现错误，如下所示，请告诉我解决方案。

/home/rajani/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/completion.rb:9:in `require': cannot load such file -- readline (LoadError) from /home/rajani/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/completion.rb:9:in`'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:55:07.850

这取决于您使用的平台。适当地运行`rvm requirements`并安装 readline 库来解决问题，就像`rvm pkg install readline`在安装 ruby​​ 之前一样。

# knockout.js - 通过 Knockout.js 中的字符串从模型中获取可观察性

> ID：11201451
> 
> 赞同：1
> 
> 时间：2012-06-26T05:54:04.350
> 
> 标签：knockout.js, knockout-2.0

我正在 Knockout 中编写自定义绑定处理程序。我想传递一个字符串，例如：`firstName`作为 valueAccessor，然后我想从我的视图模型中获取 observable firstName，但是如何通过 String 获取 observable？

这是我的代码：

```
ko.bindingHandlers.DefaultOrCustom = {
    update: function (element, valueAccessor, allBindingsAccessor, viewModel) {

        var value = valueAccessor(), allBindings = allBindingsAccessor();
        // value will equal "firstName" at this phase
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:37:08.743

您可以将 JavaScript 对象作为关联数组访问，使用您的字段名称作为键（例如`object.foo`，可以表示为`object['foo']`）。然后，当您指向一个可观察对象时，您将其作为函数调用以获取/设置值。

假设您有这样的绑定：

```
data-bind="DefaultOrCustom: 'firstName'" 
```

您可以像这样访问 observable：

```
ko.bindingHandlers.DefaultOrCustom = {
update: function (element, valueAccessor, allBindingsAccessor, viewModel) {

    var value = valueAccessor(), allBindings = allBindingsAccessor();

    var oldValue = viewModel[value](); // read from the observable
    viewModel[value]('New Value');     // write to the observable 
} 
```

* * *

通过检查字段的类型，您可以变得更加灵活。如果它是“函数”，则将其视为可观察的 - 使用 () 形式，否则将其视为常规字段。

```
ko.bindingHandlers.DefaultOrCustom = {
update: function (element, valueAccessor, allBindingsAccessor, viewModel) {

    var value = valueAccessor(), allBindings = allBindingsAccessor();
    var oldValue;

    if (typeof(viewModel[value]) == 'function') {
      oldValue = viewModel[value]();   // read from the observable
      viewModel[value]('New Value');   // write to the observable
    } else {
      oldValue = viewModel[value];     // read from the field
      viewModel[value] = 'New Value';  // write to the field
    }
} 
```

仅供参考：`typeof`实际上不是一个函数，但我经常发现使用这种形式可以让我更清楚地输入什么。

# .htaccess - 如何使用 htaccess 将 sub1.site1.com 重定向到 sub2.site2.com/subdir

> ID：11201455
> 
> 赞同：0
> 
> 时间：2012-06-26T05:54:18.877
> 
> 标签：.htaccess, redirect, cname

据我所知，cname 不能这样做。所以我在 sub1.site1.com 上的 .htaccess 文件中有这个规则：

```
RewriteEngine On
Options +FollowSymlinks
RewriteBase /
RewriteCond %{HTTP_HOST} sub2.site2.com
RewriteCond %{REQUEST_URI} !subdir/
RewriteRule ^(.*)$ subdir/$1 [L] 
```

它不工作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:30:12.880

将所有子域（记录 *，类型 A）指向托管（代码）

在 .haccess 添加行

```
RewriteCond %{HTTP_HOST} (.*).domain.ext [NC] # %1

RewriteRule (.*) domain.ext/%1/$1 [L] # $1 
```

# iphone - 翻转板类型详细视图动画

> ID：11201460
> 
> 赞同：-3
> 
> 时间：2012-06-26T05:54:53.300
> 
> 标签：iphone, objective-c, ipad, ios5

我想做一个翻转板详细视图类型的动画（当用户点击显示元素并显示带有动画的详细视图时）。我有一个在 uitableview 中显示的记录列表，因此对于显示详细视图，我想实现 FlipBoard 详细视图类型动画。如果有人尝试过这种类型的动画。请帮我。到目前为止，我尝试了不同的视图转换/动画，但没有得到想要的输出。

现在我正在将此代码用于动画，但没有按预期输出

//在tableview中选择了索引：

```
if([arrPostsData count]>0)
{
    [[NSNotificationCenter defaultCenter] postNotificationName:kShowWaitAlert object:nil];
    detailvwScrollCount = indexPath.row; 

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:.3];

    detailVwBg.alpha = 0.0;
    detailVwBg.alpha = 1.0;
    btnBack.alpha = 1;

    [self showPostDetail:arrPostsData tapedCell:detailvwScrollCount PostedFiles:arrUserPostedFilesDataDic comments:arrCommentsDataDic];

    [self.view bringSubviewToFront:detailVwBg];
    isDetailvwActive = TRUE;
    [UIView commitAnimations];
} 
```

这只是显示带有其他类型动画的细节视图，而我正在尝试显示细节，例如：从角落到顶部屏幕增加运动。例如：我在 tableview 的最后一个可见单元格上录音，所以现在该单元格应该从直到顶部屏幕增加，最后它将像全屏详细视图一样显示录音行的所有细节。

请帮忙..

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:58:54.527

在 didSelectRowAtIndexPath 中试试这个：

```
DetailViewController *detailViewController=[[DetailViewController alloc] init];
    UIView *animateView = self.navigationController.view;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration: 0.5];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:animateView cache:YES];

    [self.navigationController pushViewController:detailViewController animated:NO];
    [UIView commitAnimations]; 
```

# java - 如何删除检票口网页中的后缀

> ID：11201471
> 
> 赞同：0
> 
> 时间：2012-06-26T05:56:23.820
> 
> 标签：java, wicket

我在检票口创建了一个网页并安装了它。网址如下所示：

```
http://localhost:8080/app/page?5 
```

是否有一个选项可以删除最后仍在增加的数字？

我也安装了这个页面：`mountPage("page", Page.class);`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T06:36:30.927

出现此数字是因为您的页面是有状态的。如果您想避免这种情况，您需要创建无状态页面。

阅读此 wiki 条目以获取更多详细信息： [https ://cwiki.apache.org/WICKET/stateless-pages.html](https://cwiki.apache.org/WICKET/stateless-pages.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:11:29.757

您可以通过将 RequestCycleStrategy 设置更改为[ONE_PASS_RENDER](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/settings/IRequestCycleSettings.html)来禁用后缀您可以在 WicketApplication 的 init() 方法中更改 RequestCycleStrategy。

# c# - 查询到列表的转换非常慢

> ID：11201472
> 
> 赞同：1
> 
> 时间：2012-06-26T05:56:26.397
> 
> 标签：c#, linq

我正在从单个视图查询以检索指标列表。可以从该单个视图中检索指标的所有属性。

这是代码：

```
data = new DataContext();

var core = from item in data.Items
           where countryIDs.Contains(item.CountryId)
           && indicatorIDs.Contains(item.IndicatorId)
           orderby item.Indicator
           select item;

var x = from item in core.Distinct()
        group item by new { item.IndicatorId, item.Indicator }
            into indicator
            select new
            {
                IndicatorID = indicator.Key.IndicatorId,
                IndicatorDescription = indicator.Key.Indicator,
                Genders = from g in core
                          where g.Gender != null
                          && g.IndicatorId == indicator.Key.IndicatorId
                          select new Gender
                          {
                              GenderID = g.GenderId,
                              GenderDescription = g.Gender
                          },
                HasGender = (from g in core
                             where g.Gender != null
                             && g.IndicatorId == indicator.Key.IndicatorId
                             select g.GenderId).Count() > 0,
                AreaTypes = from rat in core
                                     where rat.IndicatorId == indicator.Key.IndicatorId
                                     && rat.AreaType != null
                                     select new AreaType
                                     {
                                         AreaTypeId = rat.AreaTypeId,
                                         AreaDescription = rat.AreaType
                                     },
                HasAreaType = (from rat in core
                                        where rat.IndicatorId == indicator.Key.IndicatorId
                                        && rat.AreaType != null
                                        select rat.AreaTypeId).Count() > 0,
                Sectors = from s in core
                          where s.IndicatorId == indicator.Key.IndicatorId
                          && s.Sector != null
                          select new Sector
                          {
                              SectorID = s.SectorId,
                              Title = s.Sector
                          },
                HasSector = (from s in core
                             where s.IndicatorId == indicator.Key.IndicatorId
                             && s.Sector != null
                             select s.SectorId).Count() > 0
            };

List<Indicator> indicators = new List<Indicator>();
Indicator i = new Indicator();
foreach (var item in x)
{
    i = new Indicator()
    {
        IndicatorID = item.IndicatorID,
        IndicatorDescription = item.IndicatorDescription,
        Genders = item.Genders.ToList(),
        AreaTypes = item.AreaTypes.ToList(),
        Sectors = item.Sectors.ToList(),
        HasGender = item.HasGender,
        HasAreaType = item.HasAreaType,
        HasSector = item.HasSector
    };
    indicators.Add(i);
}
return indicators; 
```

当它到达 foreach 循环时，当 x 被转换时，它会减慢。有没有办法让这个查询更快地转换为列表？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T07:43:01.350

看起来你正在做很多不必要的嵌套查询。

您的`core`查询在返回项目之前进行了一些相对昂贵的过滤和排序。最好只执行一次此查询。

但是，您在此查询上执行了六个不必要的连接。

`Genders`例如，您的查询正在重新查询一个仅保留与您已经分组`core`的项目相同的项目！`IndicatorId`如果我可以假设这`item.Indicator`是一对一的，`item.IndicatorId`那么您的组`indicator`已经包含此子集。

您正在以相同的方式查询`AreaTypes`& `Sectors`。

现在`HasGender`, `HasAreaType`, & `HasSector`each中的每一个都**重复**上述查询并对`.Count()`它们中的每一个强制执行 a 以检查值是否大于零。这是一种浪费，因为它`.Any()`会以更便宜的方式为您检查至少一个值。

`core`现在为了测试查询被访问了多少次，我创建了这个测试代码：

```
var countryIDs = Enumerable.Range(0, 100).ToArray();
var indicatorIDs = Enumerable.Range(0, 100).ToArray();

data.Items.AddRange(
    Enumerable
        .Range(0, 100)
        .Select(n =>
            new Item()
            {
                CountryId = n,
                IndicatorId = n,
                Indicator = "Indicator",
                GenderId = n,
                Gender = "Gender",
                AreaTypeId = n,
                AreaType = "Area",
                SectorId = n,
                Sector = "Sector",
            })); 
```

我修改`core`为如下所示：

```
var counter = 0;
var core =
    (from item in data.Items
    where countryIDs.Contains(item.CountryId)
        && indicatorIDs.Contains(item.IndicatorId)
    orderby item.Indicator
    select item).Do(_ => counter++); 
```

操作员来自`Do`Reactive Extensions`System.Interactive`程序集。

运行您的代码，我得到以下结果：

```
counter == 60100 
```

由于我在集合中放置了 100 个项目，这告诉我您的查询正在调用`core`601 次的新执行！

这可以`core`很容易地更改为执行一次。

首先，我修改`core`为如下所示：

```
var query =
    from item in data.Items
    where countryIDs.Contains(item.CountryId)
        && indicatorIDs.Contains(item.IndicatorId)
    orderby item.Indicator
    select item;

var core = query.ToArray(); 
```

将`.ToArray()`查询结果带入内存。

然后将`x`查询修改为如下所示：

```
var x =
    from item in core.Distinct()
    group item by new
    {
        item.IndicatorId,
        item.Indicator
    } into indicator
    let Genders = (
        from g in indicator
        where g.Gender != null
        select new Gender
        {
            GenderID = g.GenderId,
            GenderDescription = g.Gender,
        }).ToList()
    let AreaTypes = (
        from rat in indicator
        where rat.AreaType != null
        select new AreaType
        {
            AreaTypeId = rat.AreaTypeId,
            AreaDescription = rat.AreaType,
        }).ToList()
    let Sectors = (
        from s in indicator
        where s.Sector != null
        select new Sector
        {
            SectorID = s.SectorId,
            Title = s.Sector,
        }).ToList()
    select new Indicator()
    {
        IndicatorID = indicator.Key.IndicatorId,
        IndicatorDescription = indicator.Key.Indicator,
        Genders = Genders,
        AreaTypes = AreaTypes,
        Sectors = Sectors,
        HasGender = Genders.Any(),
        HasAreaType = AreaTypes.Any(),
        HasSector = Sectors.Any(),
    }; 
```

请注意，我只计算每个`Genders`, `AreaTypes`, &`Sectors`一次并将每个创建为一个列表。这使我可以更改`x`以立即生成`Indicator`.

现在列表的最终创建`indicators`很简单：

```
var indicators = x.ToList(); 
```

当我在这个方法上使用我的样本数据时，我的结果是这样的：

```
counter == 100 
```

这意味着该查询仅命中原始`core`查询一次！

然后，当我将原始样本数据增加到 1,000 个项目时，我检查了嵌套的行为方式——我使用新代码获得了一次点击，使用原始代码获得了 6,001 次点击——而且速度要慢得多。

请记住，LINQ 是延迟计算的，因此执行不会发生在您定义查询的位置，而是执行它的位置。

所以这里的建议是，在内存允许的情况下，您应该尽快执行查询以将数据放入内存，然后执行一次且仅一次的计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:07:04.203

对于初学者，将每个 Count() > 0 更改为 Any() 方法，Count 将强制对您正在查询的表进行全面扫描。

如果这没有给您想要的性能提升，请尝试重写您的查询。*如果您首先将数据投影到匿名类型中，然后*按该匿名类型分组，我认为性能会更高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:09:49.700

您的查询中有一些 where 子句（例如 where s.IndicatorId == indicator.Key.IndicatorId）

尝试在此处使用 Join Syntax，这将使其更快。即您的情况下的核心连接指标。就像是

你的版本

```
from g in core 
where g.Gender != null && g.IndicatorId == indicator.Key.IndicatorId 
```

会得到这样的东西

```
From g In core Join indi In indicator 
on g.IndicatorId Equals indi.Key.IndicatorId 
```

[为什么 LINQ JOIN 比使用 WHERE 链接快得多？](https://stackoverflow.com/questions/5551264/why-is-linq-join-so-much-faster-than-linking-with-where)

# jquery - 使用 jQuery 选择所有子代和后代

> ID：11201474
> 
> 赞同：0
> 
> 时间：2012-06-26T05:56:33.183
> 
> 标签：jquery

我有一些由 WordPress 插件生成的 HTML，该插件旨在允许可扩展/可折叠的文本，深度最多可达三个级别。我希望这样，如果您要折叠第一层或第二层并且它下面的子级也被扩展，那么它们也会被折叠，但我使用的任何东西似乎都不允许选择*所有*子级。这是我目前使用的：

```
$(".hidden-text-toggle").click(function () {
    if ($(".hidden-text:animated").length) return false;
        $(this).next().slideToggle();
        if ($(this).hasClass('expanded') ){     
            $(this).removeClass('expanded');
            $(this).animate({ backgroundColor: "black" , color: "red"});    
        }
        else
        {
            $(this).addClass('expanded');
            $(this).animate({backgroundColor: "red" , color: "black"});

        }
        return false;
    });

<div class="wrapper">
    <h2 class="title">Level One</h2>
    <div class="text" href="#">
        This is level one text.
        <div class="wrapper">
            <h2 class="title" href="#">Level Two</h2>
            <div class="text">
                This is level two text.
                <div class="wrapper">
                    <h2 class="title" href="#">Level Three</h2>
                    <div class="text">                          
                        This is level three text. 
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> 
```

我原以为`$(this).find(".text").slideUp();`在第 4 行之后放置类似的东西会允许这样做，但显然我错了。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:03:00.230

您可以在每个元素上做一个全面的*slideUp （与**[find](http://api.jquery.com/find/)*结合使用）：

```
$("div.wrapper").find("div").slideUp(); 
```

请注意，这实际上是选择根节点下的每个*div ，然后将每个 div 的高度设置为零。*任何已经为零高度的元素都不会受到影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:12:40.833

尝试：

```
$("h2.title").click(function () {
    $(this).next().slideToggle();
});​ 
```

小提琴：http: [//jsfiddle.net/iambriansreed/amppK/](http://jsfiddle.net/iambriansreed/amppK/)

文档：[http ://api.jquery.com/toggle-event/](http://api.jquery.com/toggle-event/)

# linux - 在linux中发送没有主题的邮件

> ID：11201477
> 
> 赞同：0
> 
> 时间：2012-06-26T05:56:40.547
> 
> 标签：linux, sendmail

有人可以帮忙吗，

当我使用该命令时，我收到了没有主题的电子邮件，

```
mail -s "subject" emailid < content.txt 
```

这个命令有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:17:17.940

尝试这个

```
[root@host ~ ]# mail -s "test" me@gmail.com
This will be in the body of the email
Cc: me_cc@gmail.com
.
[root@host ~ ]# 
```

单独的`.`行告诉邮件命令您已完成编写电子邮件正文并充当`EOF`命令的一个。

另一种方式

```
[root@host ~ ]# echo "This will be the body of the email" | mail -s "This is the subject"   me@gmail.com 
```

希望它有效。在我的机器上工作。请确保已安装 sendmail 应用程序并正常工作。

```
EDIT 
```

对于 Sun OS 试试这个

```
echo "Hello World" | mailx -s "Hello World Test" emailaddress.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:07:35.013

使用`mailx`而不是`mail`我猜你正在使用太阳操作系统。

# windows-phone-7 - Windows Phone Webbroswer 没有正确呈现内容？

> ID：11201480
> 
> 赞同：0
> 
> 时间：2012-06-26T05:57:01.327
> 
> 标签：windows-phone-7

Windows phone Webbrowser 未正确呈现内容。例如，欧元符号显示为特殊字符“ ***(欧元 (€)*** ”。有什么方法可以在 WebBrowser 中显示这样的实际内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:05:45.773

试试这个，它对我有用：

```
StringHtmlContent = StringHtmlContent.Replace("€", "&euro ;"); //between &euro and ; no whitespace 
```

或者，在您的情况下：

```
using WebBrowser.NavigateToString("<html><Body><table><tr><td>(euro (&euro ;)</td></td></table></body><html>") 
```

# iphone - iOS 方向问题

> ID：11201485
> 
> 赞同：0
> 
> 时间：2012-06-26T05:57:41.233
> 
> 标签：iphone, ios, uiview

我们只有纵向模式下的某些视图，以及横向模式下的某些视图。我们需要使用侧导航中出现的选项按钮在这些视图之间来回切换。通过按下按钮侧面导航将打开，侧面导航应该适用于纵向和横向模式。

默认情况下，着陆屏幕处于纵向模式，用户可以从那里切换到横向视图，反之亦然。

对于以横向模式出现的视图，无论用户当时是否以纵向方向握住设备，它们都必须正确出现在横向模式下，当显示横向视图时，用户外壳将设备旋转到横向以使用它，反之亦然转移。

什么是合适的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:00:57.443

您必须在视图控制器中覆盖此方法 -`- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation`

在只需要纵向的视图控制器中，使用 -

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {  

  return (interfaceOrientation == UIInterfaceOrientationPortrait ||    interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown );
} 
```

在需要横向模式的视图控制器中，使用 -

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {  

    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft ||     interfaceOrientation == UIInterfaceOrientationLandscapeRight);
 } 
```

# java - 需要一个计数器类名

> ID：11201487
> 
> 赞同：-2
> 
> 时间：2012-06-26T05:57:41.797
> 
> 标签：java, class, counter

我正在编写一个还没有好名字的计数器类。它计算在定义范围内出现的数字，例如 [0-10)、[10-100)。我怎么称呼这个柜台？`StagedCounter`可以吗？我的英语词汇量很差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:01:39.237

我认为`IntervalCounter`会更好，因为您正在间隔计算数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:03:01.247

很好`Counter`。下次你遇到命名问题时，让它休息一天左右，你会想出一个更好的答案。我还建议查看[java 命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)

编辑：Dhwaneet 的提议`IntervalCounter`确实更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:04:49.200

引用自[http://java.sun.com/docs/codeconv/CodeConventions.pdf](http://java.sun.com/docs/codeconv/CodeConventions.pdf)

除变量外，所有实例、类和类常量都是大小写混合，首字母小写。内部单词以大写字母开头。变量名应该简短而有意义。变量名的选择应该是助记符——也就是说，旨在向不经意的观察者表明其使用的意图。

因此，您的变量肯定应该以小写字母开头，其次名称由您决定。如果这有助于您了解此变量的用途，请继续使用它。

我同意其他两种观点，**intervalCounter** 可能更好

# wpf - Metro 风格 (WinRT) UI 是否适合企业应用程序？

> ID：11201490
> 
> 赞同：10
> 
> 时间：2012-06-26T05:57:52.747
> 
> 标签：wpf, windows-runtime, microsoft-metro, enterprise

如果你们正处于设计新企业/商业应用程序的起点，您会考虑为此使用**Metro 风格**( **WinRT** ) 用户界面吗？

我们需要：

*   用于编辑具有数百个字段的多个复杂表单的复杂桌面应用程序 (WPF/MVVM)，某些表单/窗口/页面可能非常庞大，因此必须明智地利用屏幕上的可用空间。通过鼠标和键盘访问所有控件。将来可能会使用触摸屏（但我相信只有不到 5% 的客户会使用它）。
*   用于查看数据的网络应用程序（比桌面应用程序简单得多）
*   适用于 iPhone/Android 的移动应用程序，具有用于现场离线任务的基本功能。

UI 应该在所有应用程序之间保持一致。而且我确信使用 Metro 设计移动应用程序（可能还有 Web 应用程序）不会有问题。但是对于 Metro 来说，桌面应用程序可能过于复杂（由于表格和列表很大）。

有人看过带有 Metro UI 的企业/商业应用程序示例吗？

**PS** 我已经阅读了许多来自 MS 的文章（比如[Designing great生产力应用程序 for Windows](http://msdn.microsoft.com/library/windows/apps/hh868273/)）和一些清醒的观点（比如[Windows 8 Metro 对商业开发人员来说有多合适？](http://betanews.com/2012/05/04/how-suitable-is-windows-8-metro-for-business-developers/)），但仍然找不到大型表单的好方法和带有 Metro UI 的列表。

想得到类似[Zune](http://www.zune.net/en-us/products/software)的东西（在下图中），但往往认为这是不可能的。 ![在此处输入图像描述](../Images/198c4eed67bf01073ab574e660fea803.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T06:52:48.313

一两年前，我们的团队在专业 UI 设计师的支持下，重新设计了一个我们正在开发的基于表单的大型应用程序（基于 WPF）。我们遇到了同样的问题：客户希望显示有时包含数百个表单字段的表单，理想情况下他们希望在一个页面上查看所有字段。

专业人士的建议是：让您的客户相信这是一个坏主意。将每个屏幕的字段数限制为十几个。只有这样，您才会拥有一个看起来不错且易于处理的用户界面。

因此，我认为通过将复杂的表单拆分为更简单的部分，可以在 Metro 中拥有具有复杂表单的企业应用程序。但是，还有其他标准，您需要考虑：

*   企业客户升级到 Windows 8 的意愿如何？考虑到大量企业客户仍在使用 Windows XP（有时甚至是 IE6），我预计他们升级到 Windows 8 的速度会非常缓慢。

*   与 iOS 或 Android 相比，企业客户会更喜欢 Windows Phone 8 吗？我不确定 Android，但我目前的经验是，公司的决策者在搜索移动企业应用程序时主要考虑 iOS，这仅仅是因为他们中的很多人已经拥有 iPad/iPhone 设备。我认为 Windows Phone 8 成为他们关注的焦点可能需要相当长的时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T10:21:04.260

Metro 和经典 Windows 的最大区别在于 Metro 针对触摸屏进行了优化，因此开发 Windows 8 的基本控件更大，并且主要是为触摸交互而设计的（尽管它们具有合理的鼠标支持）。

杂乱的表单在 Windows 8 中会出现问题，因为 Metro 风格偏爱整洁的用户界面。这在平板电脑上尤其明显，弹出式软键盘将覆盖部分屏幕，并且窗口将执行滚动操作，以便将当前聚焦的文本框（例如）置于视图中。

所有 Metro 控件都可以重新模板化以模仿它们的旧版控件（这样您就可以按照您的描述创建一个类似 Zune 的屏幕），但是您需要问自己，如果您在 Windows 8 中创建应用程序有什么好处'不打算使用新的触摸支持？

然而，在 Metro 中编写应用程序有一个很大的好处，那就是可移植性。如果您可以让应用程序的 UI 设计保持为标准 Metro 应用程序（同时满足您的要求），那么您的应用程序应该可以在 Windows 桌面、Windows 平板电脑和 Windows Phone 上运行，并且只需最少的额外开发工作。

使用 Windows 8 Mertro，您还可以通过公司自己的私有“App Store”启动应用程序，但这也可能被视为一种障碍，具体取决于您公司的安全策略（尽管应用程序可以部署在应用程序之外）使用 powershell 存储）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T11:24:55.870

Metro 的设计理念当然是一个有趣的理念。毫无疑问，它可以用来制作令人惊叹的应用程序，但肯定不是每个应用程序都可以使用它。

忽略 Windows 应用商店应用程序（或任何微软本周称其为的），Metro 更独特的方面是：

*   无铬
*   没有渐变
*   边框或容器上没有圆角
*   没有亚像素渲染/抗锯齿 - 一切都清晰锐利
*   没有阴影、透明度或玻璃效果*
*   上下文敏感性
*   强烈使用排版
*   严格使用颜色

*微软实际上打破了这一点 - 特别是下拉列表。

在传统的数据密集型应用程序中表现良好的 Metro 的一个很好的例子是 Outlook 2013：

![Outlook 2013 预览版](../Images/02fb0372e2b64b569019d11a2df5a024.png)

它坚持 Metro 的核心原则，即数据为王，UI 干扰应保持在最低限度。它还可以让您了解如何通过 outlook.com 呈现相同的数据：

![Outlook.com](../Images/f90ce8af96bec77b3cbabda81d636d8f.png)

下面是移动网站上的同一个网站，它展示了外观和感觉的一致性，同时使数据可针对完全不同的形式进行管理：

![Outlook.com](../Images/404c214a8f709390764505c77dce787c.png)

*免责声明：我个人不认为触控是 Metro 设计的隐含方面——触控需要额外考虑手势控制、图形反馈和控制间距等内容。毫无疑问，人们会不同意这一点，但在设计方面没有人会同意 :)*

# android - 在 android 的不同物理设备上工作的同一个应用程序之间共享数据库

> ID：11201491
> 
> 赞同：0
> 
> 时间：2012-06-26T05:58:18.727
> 
> 标签：android, database

伙计们，我的应用程序中有一个数据库，并希望与在其他设备上运行的应用程序共享它！8小时以来一直在尝试！请为我提供一些代码或工作示例。提前致谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:06:00.073

这是不可能的。你应该有公共服务器。将所有数据保存在服务器中。从任何物理设备访问它

# android - 在android中清理内存

> ID：11201502
> 
> 赞同：0
> 
> 时间：2012-06-26T05:59:42.863
> 
> 标签：android, bitmap, out-of-memory

我的应用程序中有很多位图。它们在应用程序启动时加载。在一项活动中，我有两个按钮可以更改语言，但是当我单击按钮时，我会再次开始加载图像。有时我会因内存不足而出错。我如何清理内存，当我点击按钮时我清理内存，然后加载位图？这有可能吗？现在我使用`system.exit(0)`但我不想关闭所有应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T06:13:53.733

不久前，我在使用图形处理密集型应用程序时遇到了同样的问题，经过大量调试后，我发现位图对象没有自动正确释放。

您应该在不再需要它们时立即调用它们的回收方法来自行管理位图（例如 Activity.onStop 方法）。

**编辑（2014 年 10 月 8 日）：**

Android 开发者文档最终包含[对这些位图内存问题的清晰解释](https://developer.android.com/training/displaying-bitmaps/manage-memory.html)。与此同时，有些事情已经变得更好，但我们通常仍然需要处理旧的 Android 版本，这使得位图内存管理变得困难。

以下是关键点：

**从 Android 2.3.3（API 级别 10）及更低版本开始**

*   像素数据存储在**本机内存中**...
*   ...而**不是**在 Dalvik 堆内存中
*   像素数据以**不可预知**的方式**释放**

 **当您已经用位图（或其他大对象）耗尽了 Dalvik 堆内存限制并尝试加载另一个位图时，就会出现问题。即使您不再对旧位图对象持有任何引用，也不能保证在分配新位图对象***之前这些位图得到垃圾收集。***因此，您可以随机达到极限并获得`OutOfMemoryError`.

因此，自己管理位图对象很重要。当您使用完一个位图后，您应该`recycle()`在加载另一个位图之前调用它的方法。

**从 Android 3.0（API 级别 11）开始**

*   像素数据与位图对象一起存储**在 Dalvik 堆上**

在这里，Dalvik 的内存管理器可以看到剩余的内存量，并且可以完全控制回收内存。

**管理位图**

在这两种情况下（较旧的 Android 版本和较新的 Android 版本），您可能需要管理位图对象**以避免：**

*   重复加载同一张图片（优化问题）
*   内存不足（稳定性问题）

Android 开发人员文档包含有关如何使用[最近最少使用的缓存 (LruCache)](https://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)缓存和重用已加载的位图对象的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:06:26.700

不要打电话`System.exit(0)`，因为它会终止你的 JVM。`bitmap.recycle()`使用完后调用每个位图。这将释放位图获取的本机内存。此外，将位图引用设置为 null 将使 GC 在下次运行时收集它。

这个答案将帮助你：[Catching OutOfMemoryError in decoder Bitmap](https://stackoverflow.com/questions/7138645/catching-outofmemoryerror-in-decoding-bitmap/7138785#7138785)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T06:11:06.423

`recycle`如果未从您的数据结构中引用未使用的位图并正确调用，您将不会收到 OutOfMemory 异常。一旦你确保了这一点，自动垃圾收集器就会开始可靠地为你服务，你不需要告诉它什么时候释放东西。

注意程序中的任何静态变量，尤其是集合或复杂结构。如果在任何地方添加了位图，请确保再次将其从那里删除。**

# django - django admin 使用外键过滤器覆盖 change_view

> ID：11201506
> 
> 赞同：1
> 
> 时间：2012-06-26T06:00:04.720
> 
> 标签：django, django-admin

在我的 django ModelAdmin 中，我想根据当前用户组**过滤外键选择**，并且我想以添加和更改形式实现它。我通过使用以下代码在添加视图中实现了它。

**添加视图**

```
def add_view(self, request, form_url = '', extra_context = None):
    service_sector = common.getServiceSector(request.user)
    ModelForm = self.get_form(request)
    if request.POST:
        form = ModelForm(request.POST, request.FILES)
    else:
        form = ModelForm()
    if service_sector:
        qs = form['member'].field.queryset
        qs = qs.filter(service_sector = service_sector)
        form['member'].field.queryset = qs
    adminForm = helpers.AdminForm(form, list(self.get_fieldsets(request)),
    self.prepopulated_fields, self.get_readonly_fields(request),
    model_admin=self)
    context = {
    'adminform': adminForm,
    'is_popup': "_popup" in request.REQUEST,
    'show_delete': False,
    'root_path': self.admin_site.root_path,
    }
    context.update(extra_context or {})
    return self.render_change_form(request, context, form_url=form_url, add=True) 
```

在这里它工作正常。在这个模型中，我有一个独特的字段**电子邮件**，这导致了 change_view 中的问题。我在下面给出了我的 change_view 代码。

**更改视图**

```
def change_view(self, request, object_id, form_url = '', extra_context = None):
    qs = self.model._default_manager.get_query_set()

    service_sector = common.getServiceSector(request.user)
    bene_object = Beneficiary.objects.get(pk=object_id)
    ModelForm = self.get_form(request, bene_object)
    if request.POST:
        form = ModelForm(request.POST, request.FILES)
    else:                     

        form = ModelForm(instance=bene_object)            
    if service_sector:
        qs = form['member'].field.queryset
        qs = qs.filter(service_sector = service_sector)
        form['member'].field.queryset = qs
    adminForm = helpers.AdminForm(form, list(self.get_fieldsets(request)),
    self.prepopulated_fields, self.get_readonly_fields(request),
    model_admin=self)
    context = {
    'adminform': adminForm,
    'is_popup': "_popup" in request.REQUEST,
    'show_delete': False,
    'root_path': self.admin_site.root_path,
    }
    context.update(extra_context or {})
    return self.render_change_form(request, context, form_url = form_url, change = True) 
```

即使我`change = True`在我的 change_view 返回中给出了，它也试图将对象保存为新对象。所以我收到一个错误`Email already exists`，因为电子邮件字段是唯一值字段。或者是否可以使用正常的 change_view 返回，如下所示：

```
return super(ModelAdmin, self).change_view(request, form_url, extra_context) 
```

如果是这样，我该如何过滤外键选择。或者如何使用`render_change_form`来实现这一点？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T05:43:22.560

我已经解决了这个问题并在此处发布了可能对其他人有所帮助的答案。[这里](https://stackoverflow.com/q/10556288/1095090/)的问题帮助我解决了这个问题。使用以下代码，我已经完成了基于用户组的外键过滤器，用于在 django admin 中添加和更改表单，其中包含内联表单集。我给出下面的代码：

```
def render_change_form(self, request, context, *args, **kwargs):
    model = self.model
    opts = model._meta
    formsets = []

    #Change view
    if 'change' in kwargs.keys():
        object_id   = kwargs['obj'].id  #To get object id
        object      = Modelobjects.get(pk=object_id)
        ModelForm   = self.get_form(request, object)
        qs          = self.model._default_manager.get_query_set()
        if request.POST:
            form = ModelForm(request.POST, request.FILES)
        else:
            form = ModelForm(instance = object)
        service_sector = common.getServiceSector(request.user)
        if service_sector:
            #To filter foreignkey
            qs = form['member'].field.queryset
            qs = qs.filter(service_sector = service_sector)
            form['member'].field.queryset = qs
        adminForm = helpers.AdminForm(form, list(self.get_fieldsets(request)),
        self.prepopulated_fields, self.get_readonly_fields(request),
        model_admin=self)
        media = self.media + adminForm.media

        #To get inline formsets used
        prefixes = {}
        for FormSet, inline in zip(self.get_formsets(request),
                                   self.inline_instances):
            prefix = FormSet.get_default_prefix()
            prefixes[prefix] = prefixes.get(prefix, 0) + 1
            if prefixes[prefix] != 1:
                prefix = "%s-%s" % (prefix, prefixes[prefix])
            formset = FormSet(instance=object, prefix=prefix,
                              queryset=inline.queryset(request))
            formsets.append(formset)

        inline_admin_formsets = []
        for inline, formset in zip(self.inline_instances, formsets):
            fieldsets = list(inline.get_fieldsets(request))
            readonly = list(inline.get_readonly_fields(request))
            inline_admin_formset = helpers.InlineAdminFormSet(inline, formset,
                fieldsets, readonly, model_admin=self)
            inline_admin_formsets.append(inline_admin_formset)
            media = media + inline_admin_formset.media

    else:
        #Add view
        ModelForm   = self.get_form(request)
        qs          = self.model._default_manager.get_query_set()
        if request.POST:
            form = ModelForm(request.POST, request.FILES)
        else:
            form = ModelForm()
        service_sector = common.getServiceSector(request.user)
        if service_sector:
            qs = form['member'].field.queryset
            qs = qs.filter(service_sector = service_sector)
            form['member'].field.queryset = qs
        adminForm = helpers.AdminForm(form, list(self.get_fieldsets(request)),
        self.prepopulated_fields, self.get_readonly_fields(request),
        model_admin=self)
        media = self.media + adminForm.media

        prefixes = {}
        for FormSet, inline in zip(self.get_formsets(request),
                                   self.inline_instances):
            prefix = FormSet.get_default_prefix()
            prefixes[prefix] = prefixes.get(prefix, 0) + 1
            if prefixes[prefix] != 1:
                prefix = "%s-%s" % (prefix, prefixes[prefix])
            formset = FormSet(instance=self.model(), prefix=prefix,
                              queryset=inline.queryset(request))
            formsets.append(formset)

        inline_admin_formsets = []
        for inline, formset in zip(self.inline_instances, formsets):
            fieldsets = list(inline.get_fieldsets(request))
            readonly = list(inline.get_readonly_fields(request))
            inline_admin_formset = helpers.InlineAdminFormSet(inline, formset,
                fieldsets, readonly, model_admin=self)
            inline_admin_formsets.append(inline_admin_formset)
            media = media + inline_admin_formset.media

    context = {
    'adminform': adminForm,
    'title': _('Add %s') % force_unicode(opts.verbose_name),
    'is_popup': "_popup" in request.REQUEST,
    'show_delete': False,
    'media': mark_safe(media),
    'inline_admin_formsets': inline_admin_formsets,
    'root_path': self.admin_site.root_path,
    }
    return super(ModelAdmin, self).render_change_form(request, context, args, kwargs) 
```

这里的对象 id 是从中获得的`kwargs['obj'].id`，外键是通过

```
qs = form['member'].field.queryset
qs = qs.filter(service_sector = service_sector)
form['member'].field.queryset = qs 
```

这`common.getServiceSector`是我用于外键过滤条件的自定义方法。您可以根据自己的要求定义自己的方法。希望这对其他人有帮助。谢谢。

# android - 如何自定义 Android 铃声选择器对话框？

> ID：11201507
> 
> 赞同：0
> 
> 时间：2012-06-26T06:00:12.643
> 
> 标签：android

我使用以下代码显示一个对话框，用于选择其中一种铃声：

```
 Intent intent = new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);
 intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TITLE,"My customised Title");
 Uri uri = ContentUris.withAppendedId(
 MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, 1l);
 // Don't show 'Silent'
 intent.putExtra(RingtoneManager.EXTRA_RINGTONE_SHOW_SILENT, false);
 intent.putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI, uri);
 startActivityForResult(intent, 123); 
```

它会打开一个铃声选择对话框，如下所示。

现在，在这里你可以看到字体太大了，`i want to make it small`那我该怎么办呢？我怎样才能使它变小。

![在此处输入图像描述](../Images/b3763100f47bc6949a945cc81222ccd6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:41:38.433

引用 MKJParekh：

> 您需要制作一个自定义对话框。

是的，您需要一个 custom `Dialog`，但在谈论**“自定义对话框”**时请记住，这并不意味着您可以简单地使用上述代码嵌入该对话框来选择音调。

由于这是android-framework提供的选择铃声的方式，你不需要查询铃声，你不需要在Dialog中制作List，你不需要实现选择并将数据传回调用Activity . 它都是android内置的。

制作自己的自定义对话框时，您必须在 Activity/Dialog 中执行以下任务

*   您需要从 android media 查询数据
*   您必须在 Dialog 和 ListView 中显示该结果
*   您必须制作自己的适配器和选择方法
*   将该数据作为结果传递给调用 Activity

然而定制android提供的Dialog是不可能的，它的UI依赖于主题、操作系统和制造商。

# android - 如何访问未运行的视图？

> ID：11201511
> 
> 赞同：0
> 
> 时间：2012-06-26T06:00:42.003
> 
> 标签：android, android-imageview, layout-inflater, findviewbyid

因此，我使用[本](http://www.technotalkative.com/android-custom-toast-notification/)教程创建了一个自定义 toast，它将显示图像。

现在我想做的是能够传入一个图像资源并告诉我的 toast 方法来显示该图像。

所以我有这个：

```
 private void callToast(int image_resource)
{               
    LayoutInflater inflater = getLayoutInflater();
    View v = inflater.inflate(R.layout.mycustomtoast, (ViewGroup) findViewById(R.id.toast_layout));

    /*set the image*/           
    ImageView iv = (ImageView)findViewById(R.id.toast_iv);
    iv.setImageResource(image_resource); 

    Toast t = new Toast(this);
    t.setView(v);
    t.setGravity(Gravity.CENTER,0,0); 

    t.show();  
} 
```

现在 findViewById 返回 null ...我理解是因为它所在的 XML 没有被使用？

如何更改自定义 toast 图像视图的源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:02:02.743

在这里你忘了查看参考`v`

```
ImageView iv = (ImageView)v.findViewById(R.id.toast_iv); 
```

**解决方案**

```
Toast t = new Toast(this);
t.setView(v);

ImageView iv = (ImageView)v.findViewById(R.id.toast_iv);
iv.setImageResource(image_resource); 

t.setGravity(Gravity.CENTER,0,0); 
```

# objective-c - 如何捕获键盘事件 iOS / Objective-C

> ID：11201512
> 
> 赞同：1
> 
> 时间：2012-06-26T06:00:49.240
> 
> 标签：objective-c, ios

我正在努力识别我的 iPhone 应用程序中的关键事件。

我想将 shift、control、command、alt 键分配给我的自定义 UIButton，它是在具有相同功能（shift、alt、控制等）的视图中创建的。

任何人都可以知道如何解决这个问题？

我不是在尝试 Mac OS。对于 iOS，我正在尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:15:27.260

我认为我们可以在 iOS 键盘中使用“shift”键（代表向上箭头），但不能使用其余键。

# javascript - 为什么我不能在使用 jQuery 加载文档时直接调用函数？

> ID：11201525
> 
> 赞同：0
> 
> 时间：2012-06-26T06:01:59.207
> 
> 标签：javascript, jquery

我使用 jQuery 的 $(document).ready 函数。看来我不能直接用它调用函数。我不知道为什么。当我尝试使用 getElementById 查找画布时出现错误。

这有效：

```
<!DOCTYPE html>
<html>
<head>
<script language="javascript" src="http://code.jquery.com/jquery-1.4.2.js" ></script>
<script type="text/javascript">
var test="this is a test";
var canvas;
var ctx;

$(document).ready( function(){ 
    init(); 
}); 

function init() {               
    console.log (test);
    canvas=document.getElementById('canvas');
    ctx = canvas.getContext('2d');      
}

</script>

</head>

<body>
<div>
<canvas id="canvas" width="300" height="300">
    No HTML5 support.
</canvas>       
</div>
</body>

</html> 
```

这也有效：

```
<!DOCTYPE html>
<html>
<head>
<script language="javascript" src="http://code.jquery.com/jquery-1.4.2.js" ></script>
<script type="text/javascript">
var test="this is a test";
var canvas;
var ctx;

$(document).ready(function(){               
    console.log (test);
    canvas=document.getElementById('canvas');
    ctx = canvas.getContext('2d');      
}); 

</script>

</head>

<body>
<div>
<canvas id="canvas" width="300" height="300">
    No HTML5 support.
</canvas>       
</div>
</body>

</html> 
```

但这给出了一个错误......

```
<!DOCTYPE html>
<html>
<head>
<script language="javascript" src="http://code.jquery.com/jquery-1.4.2.js" ></script>
<script type="text/javascript">
var test="this is a test";
var canvas;
var ctx;

$(document).ready(init()); 

function init() {               
    console.log (test);
    canvas=document.getElementById('canvas'); // <= Error here!
    ctx = canvas.getContext('2d');      
}

</script>

</head>

<body>
<div>
<canvas id="canvas" width="300" height="300">
    No HTML5 support.
</canvas>       
</div>
</body>

</html> 
```

亲切的问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T06:07:57.287

它在这一行：

```
$(document).ready(init()); 
```

您实际上是立即调用初始化函数并将其结果作为参数传递给就绪函数。由于此行在 DOM 准备好之前执行，因此 init 函数失败。

您想改为：

```
$(document).ready(init); 
```

也就是说，将实际的 init-function 传递给 ready-function 而不是结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:08:16.523

你应该试试`()`这样`$(document).ready(init);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T06:15:37.730

解决方案取决于您希望*如何*使用您的`init()`功能。

的语法`$(document).ready`是：`$(document).ready(callBackFunction);`

* * *

这意味着您必须提供一个**回调**，即：

1.  一个**函数对象**，作为一个对象，它必须**不带**“（）”括号（如上面的定义），因为我们不是为了执行它而“调用”它！相反，我们提供了对函数的*引用*`.ready()`，因此 JQuery 的内部代码`.ready()`可以自行“查找”并调用该函数

2.  或, inside形式的**匿名函数**。`function() {..somecode..}``.ready(...)`

相反，您要做的是提供**函数调用**，这就是它不起作用的原因：您没有提供函数，而是在某种意义上说，函数的“结果”在大多数情况下**不是**函数对象（而是变量，如果`return`语句不存在，则为 undefined）。

* * *

因此，如果`init()`打算**完全替代**ready() 的回调，只需执行以下操作：

```
$(document).ready(init); // we're passing an object now not a "result" of
                         // a function, so no "()" needed 
```

相反，如果您希望稍后添加一些其他操作来执行除 之外的其他操作，请在匿名函数中`init()`调用`init()`（记住*调用 -> 括号*，如前所述）：

```
$(document).ready(function() { // anonymous callback function
    init(); // we're calling init inside a function now,
            // so "()" are needed in order to execute it
    ... other stuff ...
}); 
```

* * *

对于好奇的人：如果代码如下所示，`$(document).ready(init());` **它将真正起作用：**

```
function init2()
{
     ... real init function;
}

function init()
{
     return init2; // function "returns" a function object...
}

$(document).ready(init()); // init() is "substituted" by a function object
                           // reference to init2(), so it works 
```

（这样做没有多大意义，但它可以更好地解释回调背后的理论）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T06:07:57.250

在 body 标签的 onload 事件中调用 init() 方法

```
<body onload="init()"> 
```

或者

```
$(document).ready(function() {
  // Handler for .ready() called.
  document.addEventListener("deviceready", onDeviceReady, true);
init();
}); 
```

更多活动详情：http: [//jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T06:14:18.490

将此行更改 `$(document).ready(init());` 为`$(document).ready(init);`

链接 [http://jsfiddle.net/rcDue/2/](http://jsfiddle.net/rcDue/2/)

# c# - 使用c#打开一个受excel保护的工作表

> ID：11201532
> 
> 赞同：0
> 
> 时间：2012-06-26T06:02:36.280
> 
> 标签：c#, excel

我正在尝试使用 c# 打开一个 excel 文件，但是 Visual Studio 给出了这个 OLEDB 异常：“无法解密文件。” 打开未受保护的 excel 文件时，代码可以正常工作。

下面是我的代码：

```
string conn = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + s + ";Extended Properties='Excel 8.0;HDR=YES'";
        OleDbConnection objConn = new OleDbConnection(conn);
        objConn.Open();

        OleDbCommand cmd = new OleDbCommand("Select * from [Sheet1$]", objConn);
        OleDbDataAdapter da = new OleDbDataAdapter(cmd);
        da.Fill(dt); 
```

我找到了以下网站，它建议了 vb 的解决方法，但我无法让它在 C# 中工作。[VBA excel](http://www.connectionstrings.com/Articles/Show/how-to-open-password-protected-excel-workbook "这里")

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T06:07:54.563

您可以使用像[OoXmlCrypto](http://code.google.com/p/ooxmlcrypto/)这样的开源库来解密受密码保护的文件，否则您仍然可以使用支持密码的 Microsoft Interop 官方库：

```
using Microsoft.Office.Interop.Excel

WorkbookObject.Password = password; 
```

否则，在您的情况下最简单的方法是，您可以将密码属性添加到您的 OLeDb 提供者的连接字符串中：

```
string conn = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + s + ";Password=password;Extended Properties='Excel 8.0;HDR=YES'"; 
```

# python - django-nonrel 指定 MongoDB BSON 元素名称来建模属性

> ID：11201533
> 
> 赞同：0
> 
> 时间：2012-06-26T06:02:37.777
> 
> 标签：python, mongodb, django-nonrel, bson

在 C# 中，可以使用 MongoDB 驱动程序为数据模型中的每个属性定义自定义 BSONElement 名称，以缩短其存储名称，例如

```
[BsonElement("c")]
public Boolean Current { get; set; } 
```

有什么方法可以通过 django-nonrel 设置和定义的模型来实现这一点

```
class Test(models.Model):
    Current = models.BooleanField() 
```

这样属性“Current”将存储为“c”并在代码中引用为“Current”？研究在这方面做得不是很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:19:18.317

尝试将 db_column 选项设置为 BooleanField 或任何字段——这应该是存储在 MongoDB 中的实际字段名称。

# javascript - rowspan 找到然后检查第一个单元格是否有文本？

> ID：11201536
> 
> 赞同：2
> 
> 时间：2012-06-26T06:02:44.227
> 
> 标签：javascript, jquery

我有 HTML 表格。我正在遍历表并遍历第三个单元格具有 rowspan 属性的每一行。我如何检查是否找到了行跨度然后检查它的第一个单元格是否有文本。如果是，则分配给 javascript 变量。

```
for (var i = 0; row = myTable.rows[i]; i++) {
    if( row.cells[2].hasAttribute("rowspan") {

    }
}

 <table id="myTable">
    <tr>
    <td>cell1</td>
    <td>cell2</td>
    <td>cell3</td>
    </tr>
    <tr>
    <td>cell4</td>
    <td>cell5</td>
    <td rowspan="2">cell6</td>
    </tr>
    <tr>
    <td></td>
    <td>cell8</td>

    </tr>
    <tr>
    <td>cell9</td>
    <td>cell10</td>
    <td>cell11</td>
    </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:07:53.020

只需使用*innerText*（如果您想忽略空格，请使用*修剪）：*

```
if (row.cells[2].getAttribute('rowspan') != null) {
    if (row.cells[2].innerText.trim() != "") {
        myJavascriptVar = row.cells[2].innerText.trim();
    }
} 
```

# android - Android 中 SAX 解析器的内存问题

> ID：11201538
> 
> 赞同：1
> 
> 时间：2012-06-26T06:02:59.027
> 
> 标签：android, saxparser

我实际上是第一次使用 SAX Parser。从这里的教程和问题中，我可以弄清楚大多数事情，现在几乎一切都运行良好。但我还有一个问题。解析 logcat 时，我显示了许多垃圾收集器日志。有时还会出现增长堆消息。如果发生这种情况，总是会创建错误的项目。也许这里有人有一些优化建议。

这是处理程序的 characters 方法的代码，解析器总是解析完整的文件，然后所有找到的项目都存储在一个 sqlite 表中：

```
public void characters(char ch[], int start, int length) {
    //decide wich tag is active, process string

    String parse = new String(ch, start, length);

    if(in_starttag)
    {
        currentItem = new Item();
        in_starttag = false;
    }
    else if(in_mainclasstag)
    {
        if(cats.indexOf(parse) == -1)
        {
            cats.add(parse);

            currentMain = new EgrohItem((categories.size()+1), parse, 1, -1);
            categories.add(currentMain);
        }
        else
        {
            currentMain = categories.get(cats.indexOf(parse));
        }
    }
    else if(in_midclasstag)
    {
        if(cats.indexOf(parse) == -1)
        {
            cats.add(parse);
            currentMid = new EgrohItem((categories.size()+1), parse, 0, currentMain.getId());
            categories.add(currentMid);
        }
        else
        {
            currentMid = categories.get(cats.indexOf(parse));
        }
    }
    else if(in_subclasstag)
    {
        if(cats.indexOf(parse) == -1)
        {
            cats.add(parse);
            currentSub = new EgrohItem((categories.size()+1), parse, 0, currentMid.getId());
            categories.add(currentSub);
        }
        else
        {
            currentSub = categories.get(cats.indexOf(parse));
        }
        currentItem.setAbove_cat(currentMain.getId());
    }
    else if(in_idtag)
    {
        currentItem.setArt_nr(parse);
    }
    else if(in_destag1)
    {
        if(currentItem.getName() != null)
        {
            currentItem.setName(currentItem.getName() + parse);
        }
        else currentItem.setName(parse);
    }
    else if(in_destag2)
    {
        if(currentItem.getName() != null)
        {
            currentItem.setName(currentItem.getName() + parse);
        }
        else currentItem.setName(parse);
    }
    else if(in_destag3)
    {
        if(currentItem.getName() != null)
        {
            currentItem.setName(currentItem.getName() + parse);
        }
        else currentItem.setName(parse);
    }
    else if(in_destag4)
    {
        if(currentItem.getName() != null)
        {
            currentItem.setName(currentItem.getName() + parse);
        }
        else currentItem.setName(parse);
    }
    else if(in_descriptag)
    {
        if(currentItem.getDescription() != null)
        {
            String des = currentItem.getDescription()+" "+parse;
            currentItem.setDescription(des);
        }
        else currentItem.setDescription(parse);
    }
    else if(in_eantag)
    {
        currentItem.setEan(parse);
    }
    else if(in_suppnrtag)
    {
        currentItem.setSupp_nr(parse);
    }
    else if(in_supptag)
    {
        currentItem.setSupplier(parse);
    }
    else if(in_acctag1)
    {
        currentAcc_Nr = parse;
        currentItem.setAccessories_number(currentAcc_Nr);
    }
    else if(in_acctag2)
    {
        if(parse.length()>0 && !parse.equals(" "))
        {
            currentAcc_Nr += parse;
        }
        currentItem.setAccessories_number(currentAcc_Nr);
    }
    else if(in_acctag3)
    {
        if(parse.length()>0 && !parse.equals(" "))
        {
            currentAcc_Nr += parse;
        }
        currentItem.setAccessories_number(currentAcc_Nr);
    }
    else if(in_acctag4)
    {
        if(parse.length()>0 && !parse.equals(" "))
        {
            currentAcc_Nr += parse;
        }
        currentItem.setAccessories_number(currentAcc_Nr);
    }
    else if(in_amount1tag)
    {
        Integer amo1 = new Integer(parse);
        currentItem.setAmo1(amo1);
    }
    else if(in_amount2tag)
    {
        Integer amo2 = new Integer(parse);
        if(amo2 > 0) currentItem.setAmo2(amo2);
    }
    else if(in_amount3tag)
    {
        Integer amo3 = new Integer(parse);
        if(amo3 > 0) currentItem.setAmo3(amo3);
    }
    else if(in_price1tag)
    {
        currentItem.setPrice1(parse);
    }
    else if(in_price2tag)
    {
        if(!parse.equals("0")) currentItem.setPrice2(parse);
    }
    else if(in_price3tag)
    {
        if(!parse.equals("0")) currentItem.setPrice3(parse);
    }
    else if(in_mctag)
    {
        categories.get(currentMain.getId()-1).setName(parse);
    }
    else if(in_mictag)
    {
        categories.get(currentMid.getId()-1).setName(parse);
    }
} 
```

以及开始解析的部分：try { URL src = new URL(src_url); SAXParserFactory spf = SAXParserFactory.newInstance(); SAXParser sp = spf.newSAXParser();

```
 XMLReader xr = sp.getXMLReader();
        MedExampleHandler meh = new MedExampleHandler(prefcon);
        xr.setContentHandler(meh);
        BufferedInputStream bis = new BufferedInputStream(src.openStream(), 200);
        InputSource is = new InputSource(bis);
        xr.parse(is);

        categories = meh.getCategories();
    }
    catch (Exception e)
    {
        Log.d(EgrohCatalogue.TAG, e.toString());
    } 
```

非常感谢您的每一个建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:48:28.700

您不能通过重写正确的方法（如 startDocument、startElements、endElements、endDocuments 以及字符方法）来编写所有代码。

请看[这个](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)例子。

# sql - 拆分组合数据（数字和字符串）以分离数据

> ID：11201541
> 
> 赞同：1
> 
> 时间：2012-06-26T06:03:08.317
> 
> 标签：sql

如何将字符串数据“Test123”拆分为“Test”和“123”两列。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:40:19.173

我为此创建了以下函数，如果有其他简单的方法，请在此处更新

```
/*
SELECT * FROM [dbo].[SPLIT_NUMERIC_STRING] ('TEST1235745DFGBFVNYT HGEFNEYGV  @ADBSD H# CHSC5ae23674523')
*/
CREATE FUNCTION [dbo].[SPLIT_NUMERIC_STRING] 
   (  @ColumnName VARCHAR(MAX)
   ) 
   RETURNS @TABLEOFVALUES TABLE 
      (  NUMERICDATA   VARCHAR(MAX), 
         STRINGDATA VARCHAR(MAX) 
      ) 
AS 
   BEGIN

        DECLARE @Column1 VARCHAR(100)
        DECLARE @Column2 VARCHAR(100)
        DECLARE @StartPosition INT
        DECLARE @String VARCHAR(100)
        DECLARE @NUMBER INT
        DECLARE @ENDPosition INT
        SET @Column1 = ''
        SET @Column2 = ''
        SET @StartPosition = 1

        SELECT @ENDPosition =  LEN(@ColumnName)

        WHILE @ENDPosition > 0 
        BEGIN

            SELECT @String = SUBSTRING(@ColumnName,@StartPosition,1)
            SELECT @NUMBER = ISNUMERIC(@String)

            IF (@NUMBER = 1)
            BEGIN
             SET @Column1 = @Column1 + @String
            END 
            ELSE
             SET @Column2 = @Column2 + @String 

            SET @StartPosition = @StartPosition + 1
            SET @ENDPosition = @ENDPosition - 1
        END
        INSERT INTO @TABLEOFVALUES (NUMERICDATA,STRINGDATA)
        SELECT @Column1 AS NUMERICDATA,@Column2 AS STRINGDATA

      RETURN 

   END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:18:23.467

一些想法：

1.  构建功能，以便您可以直接在 Sql 中使用正则表达式。示例： http: [//www.codeproject.com/Articles/42764/Regular-Expressions-in-MS-SQL-Server-2005-2008](http://www.codeproject.com/Articles/42764/Regular-Expressions-in-MS-SQL-Server-2005-2008)
2.  使用子字符串
3.  如果字母与数字的长度不固定，您也可以使用 WHILE 循环，并在找到一个数字后一个接一个地抓取一个字符

# magento - 产品页面上的 Magento 错误属性名称无效：custom_use_parent_settings

> ID：11201546
> 
> 赞同：1
> 
> 时间：2012-06-26T06:04:15.623
> 
> 标签：magento, magento-1.5

我将 mageto 1.4 更新到 1.5 一切正常，但产品页面返回跟随错误。我也无法索引

索引类别/产品关联和索引产品价格标签显示处理当我单击重新索引时，它出现**重新索引过程出现问题**。

我尝试删除 loc 文件和缓存以及 db 上的一些操作，但没有人能帮我解决这个问题，谢谢

[http://hellteam.bizarsoftware.com.au/technical-downloads/general-tech-essays-misc.html](http://hellteam.bizarsoftware.com.au/technical-downloads/general-tech-essays-misc.html)

```
Invalid attribute name: custom_use_parent_settings.

    Trace:
    #0 /home/hellteam/public_html/app/code/core/Mage/Eav/Model/Entity/Collection/Abstract.php(1166): Mage::exception('Mage_Eav', 'Invalid attribu...')
    #1 /home/hellteam/public_html/app/code/core/Mage/Eav/Model/Entity/Collection/Abstract.php(1255): Mage_Eav_Model_Entity_Collection_Abstract->_addAttributeJoin('custom_use_pare...', 'inner')
    #2 /home/hellteam/public_html/app/code/core/Mage/Eav/Model/Entity/Collection/Abstract.php(292): Mage_Eav_Model_Entity_Collection_Abstract->_getAttributeConditionSql('custom_use_pare...', 0, 'inner')
    #3 /home/hellteam/public_html/app/code/core/Mage/Eav/Model/Entity/Collection/Abstract.php(312): Mage_Eav_Model_Entity_Collection_Abstract->addAttributeToFilter('custom_use_pare...', 0)
    #4 /home/hellteam/public_html/app/code/core/Mage/Catalog/Model/Resource/Eav/Mysql4/Category.php(589): Mage_Eav_Model_Entity_Collection_Abstract->addFieldToFilter('custom_use_pare...', 0)
    #5 /home/hellteam/public_html/app/code/core/Mage/Catalog/Model/Category.php(841): Mage_Catalog_Model_Resource_Eav_Mysql4_Category->getParentDesignCategory(Object(Mage_Catalog_Model_Category))
    #6 /home/hellteam/public_html/app/code/core/Mage/Catalog/Model/Design.php(348): Mage_Catalog_Model_Category->getParentDesignCategory(Object(Mage_Catalog_Model_Category))
    #7 /home/hellteam/public_html/app/code/local/FastDivision/Comet/controllers/Catalog/CategoryController.php(38): Mage_Catalog_Model_Design->getDesignSettings(Object(Mage_Catalog_Model_Category))
    #8 /home/hellteam/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(420): FastDivision_Comet_Catalog_CategoryController->viewAction()
    #9 /home/hellteam/public_html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(253): Mage_Core_Controller_Varien_Action->dispatch('view')
    #10 /home/hellteam/public_html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
    #11 /home/hellteam/public_html/app/code/core/Mage/Core/Model/App.php(340): Mage_Core_Controller_Varien_Front->dispatch()
    #12 /home/hellteam/public_html/app/Mage.php(627): Mage_Core_Model_App->run(Array)
    #13 /home/hellteam/public_html/index.php(80): Mage::run('', 'store')
    #14 {main} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-01T13:05:59.963

在 magento 数据库升级后，我在访问产品列表页面时遇到了类似的问题。在 var/report/ 下记录的错误是：

> SQLSTATE [42S22]：未找到列：1054 'where 子句'中的未知列'custom_use_parent_settings'，查询是：SELECT `main_table`.* FROM `catalog_category_flat_store_1`AS `main_table`WHERE (entity_id IN ('105', '9', '5', '1') ) AND (custom_use_parent_settings = 0) AND ( `level`!= 0) 按`level`DESC 排序

我所做的修复是：

1.  在系统中刷新 Magento 缓存 -> 缓存管理

2.  在系统 > 索引管理中重建所有索引

# ms-access - MS Access 2010 中的字段列表窗格不按文档说明工作？（添加表格字段+通过拖放创建关系）

> ID：11201549
> 
> 赞同：1
> 
> 时间：2012-06-26T06:04:37.090
> 
> 标签：ms-access

MS Office 2010 的在线文档暗示可以在表格设计期间使用字段列表窗格，但我无法重现在线文档中描述的行为。

我想要做的是，给定 2 个表：Employee 和 EmployeeType，通过拖放添加从 Employee 到 EmployeeType 的引用。

文档表明您可以以某种方式将 EmployeeType.TypeName 列拖到 Employee 表中，这将创建新列并定义两个表之间的新关系。

我没有看到这种行为。

该文档还指出，您应该能够在另一个表的数据表视图中调出字段列表窗格 (Alt+F8)，并通过拖放[从另一个表添加字段+创建关系]。

[http://office.microsoft.com/en-us/access-help/create-edit-or-delete-a-relationship-HA010341606.aspx#_Toc269467496](http://office.microsoft.com/en-us/access-help/create-edit-or-delete-a-relationship-HA010341606.aspx#_Toc269467496)

> 从“字段列表”窗格添加字段并创建关系
> 
> ```
> With the table open in Datasheet view, press ALT+F8\. The Field List pane appears.
> Under Fields available in other tables, click the plus sign (+) next to a table name to display the list of fields in that table.
> Drag the field that you want from the Field List pane to the table that is open in Datasheet view.
> When the insertion line appears, drop the field into position. 
> ```
> 
> 查找向导启动。
> 
> ```
> Follow the instructions to complete the Lookup Wizard. 
> ```
> 
> 该字段出现在数据表视图的表中。
> 
> 当您从“其他”（不相关）表中拖动字段并完成查找向导时，字段列表中的表和您将该字段拖到的表之间会自动创建新的一对多关系。此关系由 Access 创建，默认情况下不强制执行参照完整性。要强制执行参照完整性，您必须编辑关系。

我没有看到这种行为。当我打开字段列表窗口时，它显示：没有可添加到当前视图的字段。

**这真的应该工作吗？我可能安装不好吗？**

## 编辑

版主，**请不要关闭这个问题**，因为互联网上有几个人遇到这个确切问题的实例，没有对这个问题进行跟进。这似乎是 Access 2010 中一个罕见且未被承认的错误，因此在此处记录它是有价值的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T19:57:49.677

刚刚发生在我身上。以下是我修复它的方法： 1\. 在数据表视图中。2\. 创建 > 表单 3\. 在字段列表窗格中单击“编辑表”。应该打开一个新选项卡，并且一切正常。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T16:39:12.580

我遇到了同样的问题。我阅读的所有文档都说要单击“添加现有字段”->“显示所有表”，然后只需拖放所需的字段，就会出现适当的控件类型，但每次我尝试实际执行此操作时，它都会显示字段作为数据表。

我在 LAYOUT VIEW 中执行此操作，当我切换到 DESIGN VIEW，然后尝试拖放时，它实际上按预期的方式工作。我想我已经看过他们在布局视图中执行此操作的教程，因此某处可能仍然存在错误，但这似乎是一种解决方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:27:47.523

*是的，应该可以在数据表视图*中为表使用字段列表窗格，它应该显示现有数据库中其他表/列的列表，并且您应该能够从另一个表中拖动列并将其放入数据表视图中表格中所需的位置，这将：

1.  创建该新列
2.  在两个表之间定义一个新的数据库关系（但之后您可能必须手动编辑该关系，因为在此过程中您*无法使用所有关系选项。*
3.  创建一个组合框作为查找显示控件，使用源表/列作为行源（根据其他人在原始问题上指出的评论或在此处总结的评论，这是否可取是非常值得怀疑的：[http://access. mvps.org/access/lookupfields.htm](http://access.mvps.org/access/lookupfields.htm)）

我仍然不知道为什么它对我不可用，在尝试了不同的东西之后，它突然开始工作（我无法重现它不工作，尝试与我之前做的完全相同的事情）。

# jquery - JQuery/CSS 过渡：不使用负边距的更简单方法？

> ID：11201551
> 
> 赞同：2
> 
> 时间：2012-06-26T06:04:50.480
> 
> 标签：jquery, cordova, margin, transition, hidden

我有一个 PhoneGap/Cordova 项目，这意味着我必须结合使用 JQuery 和 CSS 过渡来实现动画（JQuery 动画在 iOS 上很笨重）。

我已经编写了一些代码来实现一系列下拉菜单，但是我认为它做得很糟糕，我正在寻找一些关于如何改进它的建议。

我主要关心的是 div 的定位，尤其是负边距的使用。

如果我要更改 div 的长度，它将通过所有不对齐的内容 - 我必须应用负边距顶部以使它们显示在屏幕顶部，否则它们会像它们一样坐在底部已经正常加载，一个接一个。

此外，如果没有对它们应用翻译，我会在*应该*是 div 的页面底部获得大量空白。

CSS：

```
#dropdiv1 {
    -webkit-transform: translate(0, -3000px);
    -webkit-transition: all ease-in 1s;
}

#dropdiv2 {
    -webkit-transform: translate(0, -3400px);
    -webkit-transition: all ease-in 1s;
}

#dropdiv3 {
    -webkit-transform: translate(0, -4200px);
    -webkit-transition: all ease-in 1s;
} 
```

查询：

```
$('#clickme1').click(
                      function() {
                      $('#dropdiv1').css('-webkit-transform','translate(0, -335px)');
                      });

  $('#clickme2').click(
                        function() {
                        $('#dropdiv2').css('-webkit-transform','translate(0, -2335px)');
                        });

  $('#clickme3').click(
                        function() {
                        $('#dropdiv3').css('-webkit-transform','translate(0, -3300px)');
                        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T02:38:20.217

我对 css 进行了一些更改 - 将 position: absolute 和 z-index 添加到#dropdivs。这解决了它们相互“堆叠”的问题。然后，我将每个 div 放置在其各自的#clickme div/button 下，这样当它出现时，它就会出现在正确的位置。

唯一的缺点是我必须设置页面的高度以适应显示时最高的#dropdiv，否则页面底部会将其切断。

我的代码：

```
<div id="bigcontainer">
    <ul class="mainmenu">
     <li><a id="clickme1" href="#">Click Me 1</a></li>
                    <div class="showdata"  id="dropdiv1">
                        Lots of random text....
                </div>
 <li><a id="clickme2" href="#">Click Me 2</a></li>
                <div class="showdata"  id="dropdiv2">
                    Lots of random text....
                </div>     
 <li><a id="clickme3" href="#">Click Me 3</a></li>
                <div class="showdata"  id="dropdiv3">
                   Lots of random text....
                </div>
</ul>
</div> 
```

CSS：

```
#bigcontainer {
height: 1500px;/*as big as the bigest dropdiv to enable scrolling*/
}    

#dropdiv1 {
    -webkit-transform: translate(0, -3000px);
    -webkit-transition: all ease-in 1s;
    z-index: 1;
    position: absolute;
}

#dropdiv2 {
    -webkit-transform: translate(0, -3400px);
    -webkit-transition: all ease-in 1s;
    z-index: 2;
    position: absolute;
}

#dropdiv3 {
    -webkit-transform: translate(0, -4200px);
    -webkit-transition: all ease-in 1s;
    z-index: 3;
    position: absolute;
} 
```

# iphone - 我需要从推送通知中解析有效负载，但是如果用户按下游戏图标而不是按下通知，我该如何获取数据？

> ID：11201557
> 
> 赞同：1
> 
> 时间：2012-06-26T06:05:52.357
> 
> 标签：iphone, ios, push-notification

我需要从不同的推送通知中解析有效负载，但是如果用户按下游戏图标而不是按下通知来启动应用程序，我该如何获取有效负载？

我已经实现了这两个：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

如果用户按下游戏图标开始游戏，launchOptions 为 nil，那怎么办？有没有提供从通知中心读取推送通知的方法？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T06:07:00.757

如果用户忽略了推送通知并从图标打开了应用程序，那么您将无法获取该通知有效负载，

# eclipse - 如何解决 Git 错误：“无法创建临时存储库”

> ID：11201559
> 
> 赞同：6
> 
> 时间：2012-06-26T06:06:09.137
> 
> 标签：eclipse, git, eclipse-plugin

我对 Git 的概念非常陌生。我为 Eclipse 安装了 Git 插件，现在我正在尝试克隆一个已有一年历史的 Eclipse 项目。

首先，我收到一条错误消息：

```
Cannot list the available branches.
Reason-Exception caught during execution of ls-remote command. 
```

我通过做一些与 ssh 相关的属性更改来解决这个问题。

现在我收到一个错误消息，

```
Couldn't create temporary repository. 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-30T18:38:43.700

假设您在 Windows 上：尝试删除文件*C:/Documents and Settings/[username]/.gitconfig*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T07:06:21.400

[Eclipse 论坛](http://www.eclipse.org/forums/index.php/m/530714/)中似乎有人建议您使用的 EGit 版本可能已过时。尝试更新到更新版本的 EGit。

最新 EGit 版本的地址是：

> [http://download.eclipse.org/egit/updates](http://download.eclipse.org/egit/updates)

[您可以在此处](http://help.eclipse.org/indigo/index.jsp?topic=//org.eclipse.platform.doc.user/tasks/tasks-127.htm)找到安装添加软件站点的说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-20T19:57:48.547

[请注意，gitconfig 可以按此](https://stackoverflow.com/a/17756808/5150013)顺序来自不同的地方

如果有人遇到同样的问题，对我来说解决的方法是在主目录中有一个 .gitconfig ，其名称和电子邮件条目如下所示：

```
[http]
    sslVerify = false
[user]
    name = name-in-git
    email = email-in-git@email.com 
```

PS：在我的情况下，由于自签名证书，sslVerify 是错误的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-18T18:24:03.597

如果您在 Windows 中运行，请以管理员身份运行 eclipse。（尝试过）如果您使用的是 Linux 或 Mac，请使用 sudo 打开 eclipse。

# json - 如何在jsp页面中创建JSON对象

> ID：11201562
> 
> 赞同：2
> 
> 时间：2012-06-26T06:06:24.363
> 
> 标签：json, class, struts, action

我正在使用 struts 1.3 开发一个 Web 应用程序，我的情况是我在 jsp 页面上有一个网格和一些控件，比如我有一个下拉列表、一个文本字段、一个添加按钮和一个提交按钮，现在我的要求是在从下拉列表中选择一些值，在文本字段中输入一些值并按下添加按钮，它应该暂时显示到网格中，为此我考虑过在用户按下添加按钮时使用 JSON 对象，一个 javascript 函数应该调用并将该数据放入 JSON对象并在提交表单时，我应该将该 JSON 对象放入我的 Action 类（Struts）或服务器端以对其进行操作，最后将其保存到数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:14:27.913

这是一个你可以看看的例子。基本上，您的 JSP 页面可能如下所示：

```
<%@page contentType="text/html; charset=UTF-8"%>
<%@page import="org.json.simple.JSONObject"%>
<%
    JSONObject json = new JSONObject();
    json.put("title", "TITLE_TEST");
    json.put("link", "LINK_TEST");
    System.out.print(json);
    System.out.flush();
%> 
```

也看看这个： -

[http://code.google.com/p/json-simple/wiki/JSPAndAJAXExamples](http://code.google.com/p/json-simple/wiki/JSPAndAJAXExamples)

[http://code.google.com/p/json-simple/wiki/EncodingExamples](http://code.google.com/p/json-simple/wiki/EncodingExamples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-31T16:26:55.300

如果我的问题正确，您需要将 JSON 值作为类的对象（我将其称为 MOdel 类）。

为此，您可以做这样的事情。

```
var Model=new Array();
Model['attribute1']=<value from any element in the form>
Model['attribute2']=<another value obtained from the page>

var param=JSON.stringify(Model); 
```

现在 param 变量实际上是 Model 类对象的 JSON 格式。

确保字段属性 1 和属性 2 是您需要读取表单数据的类的变量。此外，变量需要拼写正确。

您可以更改提交表单时调用的方法的签名，以接受 Model 类的对象。

我不确定使用 Struts 时方法签名的语法。但是在 Spring 工作时做过类似的事情。希望这可以帮助

# python - 在 sqlalchemy 中使用 Column(UnicodeText) 截断数据

> ID：11201563
> 
> 赞同：2
> 
> 时间：2012-06-26T06:06:26.513
> 
> 标签：python, mysql, sqlalchemy, pyramid

我有一个这样的模型

```
class mymodel(Base):
    """
    Unprocessed DataSource model
    """
    __tablename__ = 'mymodel_data'
    mod_id = Column(Integer, primary_key=True)
    mod_name = Column(Unicode(150))
    user_id = Column(Integer, ForeignKey('users.user_id'))
    all_data = Column(UnicodeText) 
```

这`all_data`是一个很长的 json 文本，它的大小可以非常非常长。

有时数据被截断，我得到的错误消息是

```
Warning: Data truncated for column 'all_data' at row 1 
```

我需要确保不会发生截断，或者我需要一种解决方法。有办法吗？我尝试阅读[这篇文章](http://www.mydigitallife.info/mysql-error-1170-42000-blobtext-column-used-in-key-specification-without-a-key-length/)，但我不知道该怎么做。

我正在使用 mysql

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:10:30.120

我猜在 MySQL 上，默认使用 TEXT 类型。它有 64K 个字符的限制。SQLAlchemy 将选择不同的类型来匹配给定的长度参数。由于 MEDIUMTEXT 有 16M 的任意限制，而 LONGTEXT（最多 4G 个字符）只需要多 1 个字节，因此您始终可以对这些列使用 LONGTEXT（或使用`UnicodeText(length=2**31)`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:15:48.597

我想我想通了。我可以为 unicodeText 参数指定一个长度。对不起菜鸟问题

# awk - awk 块中的解析错误

> ID：11201565
> 
> 赞同：1
> 
> 时间：2012-06-26T06:06:34.407
> 
> 标签：awk

```
awk 'BEGIN 
    { 
    INPUTFILE ='XXX'; iterator =0;
    requestIterator =0;
    storageFlag =T;
    printFlag =F;
    currentIteration =F;
    recordCount =1;
       while (getline < "'"$INPUTFILE"'") 
       { 
             requestArray[requestIterator]++; 
             requestIterator++;
       }
     } 
     if ($1 ~ /RequestId/) 
     {  
            FS = "="; 
            if($2 in requestArray) 
            {
                  storage[iterator] =$0;
                  printFlag =T;
                  next
            }
            else 
            {
                  storageFlag =F;
                  next
            }
      }
      else 
      {
           if((storageFlag =='T' && $0 != "EOE"))   
           {
                storage[iterator]=$0; iterator++;
           } 
           else {if(storageFlag == 'F')
           {
                next
           } 
           else
           {
               if(printFlag == 'T')
               {
                    for(details in storage) 
               {
                    print storage[details] >> FILE1;
                    delete storage[details];
               } 
               printFlag =F;
               storageFlag =T;
               next
           }
     }' 
```

我在上面的代码中遇到了一些语法错误。你能帮帮我吗？

awk: BEGIN{INPUTFILE =XXXX;iterator =0;requestIterator =0;storageFlag =T;printFlag =F;currentIteration =F;recordCount =1;while (getline < ""){requestArray[requestIterator]++;requestIterator++;} }if ($1 ~ /RequestId/){FS = "=";if($2 in requestArray){storage[iterator] =$0;printFlag =T;next}else{storageFlag =F;next}}else{if(( storageFlag ==T && $0 != EOE)){storage[iterator]=$0;iterator++;}else{if(storageFlag == F){next}else{if(printFlag == T){for(存储细节) {打印存储[详细] >> XXXX;删除存储[详细];}printFlag = F;storageFlag =T;下一个}}}}

awk: ^ 语法错误

awk: ^ 语法错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:12:43.830

报价是问题所在。上的第一个单引号`INPUTFILE ='XXX'`将被解析为与 BEGIN 之前的单引号匹配，从那时起，所有解析都被破坏了。

要么转义引号，要么将 awk 文件放入单独的文件中，而不是“内联”。

```
# STARTING POINT - known bad
awk 'BEGIN { INPUTFILE ='XXX'; iterator =0; ... ' 
```

必须重写以删除外部对内的所有单引号

```
 awk 'BEGIN { INPUTFILE ="XXX"; iterator =0; ... ' 
```

或者根据你需要双打还是单打，在外面使用双打，在里面使用单打

```
awk "BEGIN { INPUTFILE ='XXX'; iterator =0; ... ' 
```

或转义单引号，以便它们通过 awk 并且不会被 shell 消耗。

```
awk 'BEGIN { INPUTFILE =\'XXX\'; iterator =0; ... ' 
```

如果您将 awk 脚本放入一个单独的文件而不是将其内联到 shell 中，那么您的所有问题都会消失。你可以有任何你喜欢的报价，没有人会关心！

# css - CSS：宽度问题

> ID：11201573
> 
> 赞同：0
> 
> 时间：2012-06-26T06:07:20.360
> 
> 标签：css, width

我有一个带有图像的列表项，例如：

```
<ul>
    <li>
        <img></img>
    </li>
</ul> 
```

图像不占据 li 的整个宽度。

如何让 li 宽度缩小到包含图像的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:09:05.983

做图像的高度

```
 <ul>
        <li>
            <img src="" width="xxx" height="xxx"></img>
        </li>
    </ul> 
```

## 现场演示[http://jsfiddle.net/CZqEc/](http://jsfiddle.net/CZqEc/)

更新的现场演示[http://jsfiddle.net/CZqEc/1/](http://jsfiddle.net/CZqEc/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:17:17.847

如果您将 li 设置为`display: inline`，因为 li 默认情况下是块，因此宽度将匹配最大/最宽的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:22:54.977

如果`<li>`是`display:block`或类似（`list-item`也）

采用`li img{max-width:100%}`

* * *

如果`<li>`是`display:inline-block`或者`display:inline` 你还需要设置`<li>`宽度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T07:20:36.943

或尝试

```
li
{
background:url('');
display:   ;
background-size:xx xx;
} 
```

# java - 使用 jQuery 清除表单字段错误类

> ID：11201575
> 
> 赞同：0
> 
> 时间：2012-06-26T06:07:36.200
> 
> 标签：java, jquery, jquery-ui

我正在验证一个表单，当文本字段或任何表单元素出现任何错误时，我正在`error`向该元素添加类。就像是

```
jQuery("#headerSignin_FirstName").addClass('error'); 
```

有 6-7 个字段需要验证，一旦验证，我想重置`error`附加到表单元素的类。虽然我可以手动使用`removeClass`每个字段，但正在寻找一个更优雅、更清晰的解决方案来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:10:41.383

而不是手动使用`removeClass`每个字段，只选择具有`error`类的元素并使用`removeClass`

```
$('#form_id .error').removeClass('error'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:10:21.647

你可以试试这个

```
$('input').removeClass('error') 
```

或者

```
$('input').removeClass('error').addClass('you_can_even_add_another_class'); 
```

# visibility - 设置 MarkerClusterer 的可见性

> ID：11201578
> 
> 赞同：3
> 
> 时间：2012-06-26T06:07:49.160
> 
> 标签：visibility, markerclusterer

尝试切换 MarkerClusterer (V3) 的可见性：

```
var hydrantsShowing = true;  

function ToggleHydrants() {  
    var markers = hydrantsClusterer.getMarkers();

    for (var i = 0; i < markers.length; i++) {
        markers[i].setVisible(!hydrantsShowing);
    }

    hydrantsShowing = !hydrantsShowing;
} 
```

标记确实会切换，但有两个问题：
1\. 必须稍微平移地图才能进行更改。
2\. MarkerClusterer 图标（带有数字）始终存在，即使在标记不可见之后也是如此。

我也尝试过使用 setMap 方法，但行为类似：

```
var hydrantsShowing = true;  

function ToggleHydrants() {  
    var markers = hydrantsClusterer.getMarkers();

    if (hydrantsShowing) {
        for (var i = 0; i < markers.length; i++) {
            markers[i].setMap(null);
        }
    }
    else {
        for (var i = 0; i < markers.length; i++) {
            markers[i].setMap(gmap);
        }
    }

    hydrantsShowing = !hydrantsShowing;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T08:20:47.750

*改用MarkerClustererPlus*解决了这个问题。

```
var hydrantsShowing = true;  

function ToggleHydrants() {
  var markers = hydrantsClusterer.getMarkers();

  for (var i = 0; i < markers.length; i++) {
      markers[i].setVisible(!hydrantsShowing);
  }

  hydrantsClusterer.repaint();
  hydrantsShowing = !hydrantsShowing;
} 
```

设置可见性后调用`repaint()`对所有问题进行排序。
原来的*MarkerClusterer*没有这样的功能。

# javascript - Fancybox 循环播放多个专辑

> ID：11201579
> 
> 赞同：1
> 
> 时间：2012-06-26T06:07:49.457
> 
> 标签：javascript, jquery, fancybox, gallery

我在 Google Groups 中发现这个问题没有得到解答，我在**Fancybox**中也遇到了同样的错误。

我在一页上有更多的图片库。当我使用下一个上一个按钮转到下一个图像时，依此类推，我会从另一个画廊访问图像。

使用灯箱可以执行以下操作：

```
<a href="url" rel="fancybox[gallery1]" >link</a> 
```

我将从图片库中的 gallery1 获取所有图片。我的相册是动态的，所以我不能在我的 javascript 文件中这样做。

这可能吗？

我们将如何控制这种导航？

```
<div class="Album" />
<div class="AlbumImg">
   <a class="big_img" title="Tokyo" rel="flickr_group" href="tokyo.jpg"></a>
   <div id="Gallery0">
      <a class="big_img" title="Tokyo rel="flickr_group" href=""Tokyobig></a>
      <a class="grouped_elements" title="Tokyo" rel="Gallery0" href="Tokyo1"></a>
   </div>
  <div id="Gallery0">
     <a class="grouped_elements" title="Tokyo" rel="Gallery0" href="Tokyo2"></a>
   </div>
   <div id="Gallery0">
      <a class="grouped_elements" title="Tokyo" rel="Gallery0" href="Tokyo3.jpg"></a>
   </div>
   <img class="first" src="Tokyo" title="Tokyo" />
   </a>
</div>

<div class="AlbumImg">
   <a class="big_img" title="Tokyo" rel="flickr_group" href="tokyo.jpg"></a>
   <div id="Gallery1">
      <a class="big_img" title="Tokyo rel="flickr_group" href=""Tokyobig></a>
      <a class="grouped_elements" title="Tokyo" rel="Gallery1" href="Tokyo1"></a>
   </div>
  <div id="Gallery1">
     <a class="grouped_elements" title="Tokyo" rel="Gallery1" href="Tokyo2"></a>
   </div>
   <div id="Gallery1">
      <a class="grouped_elements" title="Tokyo" rel="Gallery1" href="Tokyo3.jpg"></a>
   </div>
   <img class="first" src="Tokyo" title="Tokyo" />
   </a>
</div> 
```

这是我拥有的每张专辑都包含许多图像的代码。当我点击第一张专辑的最后一张图片并下一步导航时，我会看到第二张专辑的第一张图片。但是我想循环回到同一个abum的第一张图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:51:35.170

您粘贴的代码包含很多错误...

您有多个`div`具有相同的 's `id`，并且属性不包含在引号中，两者`<div class="AlbumImg">`都有一个不匹配的结束标记`</a>`。我不太确定这对您的示例是否重要，但您绝对应该考虑一下。正如鲁本所说，**fancybox**也应该使用该`rel`属性，就像灯箱一样。

您的代码应如下所示：

```
<div class="albums">
    <div class="gallery1">
        <a href="http://placehold.it/350x150.png" rel="gallery1">
            <img alt="" src="http://placehold.it/150x150.png"/>
        </a>
        <a href="http://placehold.it/350x150.png" rel="gallery1">
            <img alt="" src="http://placehold.it/150x150.png"/>
        </a>
        <a href="http://placehold.it/350x150.png" rel="gallery1">
            <img alt="" src="http://placehold.it/150x150.png"/>
        </a> 
    </div>
    <div class="gallery2">
        <a href="http://placehold.it/350x150.png" rel="gallery2">
            <img alt="" src="http://placehold.it/150x150.png"/>
        </a>
        <a href="http://placehold.it/350x150.png" rel="gallery2">
            <img alt="" src="http://placehold.it/150x150.png"/>
        </a>
        <a href="http://placehold.it/350x150.png" rel="gallery2">
            <img alt="" src="http://placehold.it/150x150.png"/>
        </a> 
    </div>
</div> 
```

如果你想让你的画廊循环，你必须将一个参数传递给**fancybox**。请参阅[文档](http://fancybox.net/api)。应该是这样的：

```
$(document).ready(function() {
        $('a').fancybox({
            'cyclic':true
        }); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:43:01.097

```
<a class="grouped_elements" rel="gallery-x" href="Tokyo3.jpg"> 
```

这应该有效吗？不要忘记'-'
如果它不起作用，你能提供jquery代码吗？

# ruby - Ruby：如何拦截方法，摆弄参数然后调用方法

> ID：11201598
> 
> 赞同：0
> 
> 时间：2012-06-26T06:09:09.097
> 
> 标签：ruby, activerecord, patch

我需要 ActiveRecord::AttributeAssignment.assign_attributes(new_attributes, options) 的不同行为。

对于我的整个 Web 应用程序，我想评估 [并经常覆盖] new_attributes。（我想这样做是为了支持不遵循 Rails 形式命名约定的第三方 UI 小部件）。虽然这可能有点臭，但我可以编写补丁以仅在调用确实来自第三方表单时才激活。

我写了一个补丁，可以覆盖正常行为；但是，我想知道是否可以从我的补丁中调用原始方法？

当然，我可以将原始的 assign_attributes 剪切并粘贴到我的补丁中。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:11:30.780

alias 或 alias_method 应该可以解决问题，请参阅 [about.com 上的 Ruby：aliasing](http://ruby.about.com/od/rubyfeatures/a/aliasing.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:23:10.737

[`alias_method_chain`](http://apidock.com/rails/v3.2.3/Module/alias_method_chain)对于这种确切的情况存在。

这并不总是正确的选择，但当你有一个合适的用例时效果很好，这个看起来就是这样。

# windows-phone-7 - 应用程序第一个 xaml 页面的旋转门页面动画在应用程序加载时未发生

> ID：11201600
> 
> 赞同：-1
> 
> 时间：2012-06-26T06:09:18.323
> 
> 标签：windows-phone-7, windows-phone, windows-phone-7.1.1

我正在创建一个 Windows Phone 应用程序，并在我的应用程序的所有页面上使用了旋转栅门动画。

旋转栅门动画在导航进出时发生，但在加载应用程序并显示第一页时不会发生。该页面包含一个带有三个全景项目的全景控件。

当应用程序启动时，在启动屏幕之后，页面就会出现。没有旋转栅门或任何其他动画发生

请帮助解决这个问题。任何帮助将不胜感激感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:32:39.373

整个应用程序应该以动画方式打开。如果您在第一页上正确打开了动画，它将变为动画，但不是页面 - 动画项目将是启动画面。

当您关闭应用程序时，它也会被动画化。

# oop - 如何从父类访问基类数据

> ID：11201602
> 
> 赞同：0
> 
> 时间：2012-06-26T06:09:28.403
> 
> 标签：oop, class, instantiation, abstraction

当我实例化 A 类而不是创建抽象类时，如何访问 B 类的功能？这个问题最简单的解决方案是什么？

```
 class A
    {
        public $a = 3;
        public function addup($var)
        {
            return ($var + $var);
        }
    }

    class B extends A
    {
        public function addup1($var)
        {
            return ($var * $var);
        }
    }

    $obj = new A();
    echo "Func from Class A: " . $obj->addup(3);
    echo "<br>";
    echo $obj->addup1(3);
    echo "<br><br><br><br>";

    $obj = new B();
    echo "Func from Class A: " . $obj->addup(3);
    echo "<br>";
    echo "Func from Class B: " . $obj->addup1(3);

    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:40:07.533

通常你可以/不应该。例如，如果您有一流的汽车：

```
class Car {
    public function drive() {
        ...
    }
} 
```

车基本只能开。他不知道其他动作。Car 对扩展它的其他类一无所知。现在让我们通过创建蝙蝠车来扩展汽车。

```
class Batmobile extends Car {
    public function shoot() {
        ...
    }
} 
```

蝙蝠车有用机关枪射击的能力。这是除了 Car 可以做的所有事情（在这种情况下是驾驶）。另一方面，普通汽车`$fiat = new Car();`不是蝙蝠车，因此无法射击。

回到你的情况。如果你有一个 A 的实例，它的所有函数都在这个类中定义。它没有方法 addup1()。您现在有多种选择：

1.  重新设计你的类，也许继承没有正确完成。或者，方法 addup1() 可以移动到类 A。
2.  在[php.net](http://www.php.net/manual/en/language.oop5.inheritance.php)上有人发表了评论（我觉得不太准确）。尽管如此，只要 addup1() 不访问 B 的任何属性，您就可以在 A 中创建该方法，然后在 B 中调用该方法...参见[此评论](http://www.php.net/manual/en/language.oop5.inheritance.php#108847)。

即使您可以执行第二种解决方案，我也不推荐它。这与继承的想法背道而驰。最好重新考虑这些课程，并可能对其进行一些更改。

# sql - SQL - 组合来自同一个表的多个结果

> ID：11201606
> 
> 赞同：0
> 
> 时间：2012-06-26T06:09:50.190
> 
> 标签：sql

我有一个这种格式的大表（20,000,000+ 行）：

```
id ref  feature val
1  a    pos     pc
2  a    gen     m
3  a    syll    Cv
4  b    pos     pc
5  b    L5      harry
6  c    syll    Cv
7  d    gen     m 
```

如何选择满足多对特征 + val 的参考列表？

例如`Select distinct ref where feature='pos' and val = 'pc'`，给出 a,b `Select distinct ref where feature = 'gen' and val= 'm'`给出 a,d

但是我如何返回组合的 refs a、b 和 d，对于那些 refs`feature='pos' and val = 'pc'`与那些 refs 有的​​那些 refs `feature = 'gen' and val= 'm'`？

我需要能够在同一个搜索中将解决方案扩展到许多这样的对。

搜索需要快速，因此有关索引的建议也会有所帮助。

我应该从同一张表中选择 N 次，每个 feature+val 对一个吗？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:19:33.290

您可以使用“或”选择类似的组合：

```
Select distinct ref 
from table
where ( feature='pos' and val = 'pc')
  or ( feature = 'gen' and val= 'm' ) 
```

如果这会变得太笨拙，您可能希望将您的功能/验证组合移动到另一个表中并对其进行连接。

如果您有一个名为 join_table 的连接表（现在有一个灵感名称！），其中包含 feature 和 val 列，您可以执行以下操作：

```
select distinct ref
from table t
  inner join join_table j on t.feature = j.feature and t.val = j.val 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:20:10.583

通常，您会使用`OR`语句来添加这些附加子句

```
 SELECT DISTINCT ref
  FROM   YourTable
  WHERE  (feature = 'pos' AND val = 'pc')
         OR (feature = 'gen' AND val = 'm')
         ... 
```

您可以 通过在连接和时使用持久计算列来*简化*这一点。`feature``val`

```
 SELECT DISTINCT ref
  FROM   YourTable
  WHERE  (featureval = 'pospc')
         OR (featureval = 'genm') 
```

但是`OR`语句的链接仍然存在。

**索引**

必须通过查看执行计划来评估每个语句的性能，但是对于给定的语句，覆盖索引`(feature, val, ref)`不会受到伤害。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:22:02.387

```
sqlite> CREATE TABLE t (id INT, ref VARCHAR, feature VARCHAR, val VARCHAR);
sqlite> 
sqlite> INSERT INTO t (id, ref, feature, val) VALUES (1,  "a",    "pos",     "pc");
sqlite> INSERT INTO t (id, ref, feature, val) VALUES (2,  "a",    "gen",     "m");
sqlite> INSERT INTO t (id, ref, feature, val) VALUES (3,  "a",    "syll",    "Cv");
sqlite> INSERT INTO t (id, ref, feature, val) VALUES (4,  "b",    "pos",     "pc");
sqlite> INSERT INTO t (id, ref, feature, val) VALUES (5,  "b",    "L5",      "harry");
sqlite> INSERT INTO t (id, ref, feature, val) VALUES (6,  "c",    "syll",    "Cv");
sqlite> INSERT INTO t (id, ref, feature, val) VALUES (7,  "d",    "gen",     "m");
sqlite> 
sqlite> SELECT DISTINCT ref FROM t WHERE (feature = 'pos' AND val = 'pc') OR (feature = 'gen' and val= 'm');
a
b
d
sqlite> 
```

运行时间应该是线性的，2000 万行可能看起来很大，但对于当今的硬件和大多数实现来说这应该不是什么大问题，对过滤器类型进行索引可能会提高性能，确保你的行是固定宽度也可能有轻微的改进。

如果您需要更多配置，只需使用`OR`well 添加它们，您就会明白，我建议对其进行测试，并查看查询需要多长时间，我严重怀疑它会很长，尽管我不知道系统也不知道您的实现正在使用，所以我真的不能说太多。

# php - 多表单（或多页）页面

> ID：11201609
> 
> 赞同：0
> 
> 时间：2012-06-26T06:10:11.383
> 
> 标签：php, javascript, mysql

我需要在我的 Web 应用程序中创建一个具有多个表单的部分，但一次只能显示一个表单。这些表单非常相似（区别在于选择框而不是单选按钮等）。应该使用选择框或顶部的某种选项卡式菜单来选择活动表单。表单用于使用 mysql 和 php 插入数据。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:27:22.860

给每个表单标签一个 id 标签，然后在你的下拉选择框中添加一个 onchange 监听器。在侦听器中切换表单的 CSS 显示属性。

```
<select name="..." id="change" onchange='OnChange(this.options[this.selectedIndex].value);'>
    <option val="form_id_1">form 1</option>
</select> 
```

那么javascript将是：

```
<script language="text/javascript">
<!--
function OnChange(form_id)
{

    document.getElementById("first_form_id").style.display = 'none';
    document.getElementById("second_form_id").style.display = 'none';
    document.getElementById("third_form_id").style.display = 'none';
    document.getElementById("fourth_form_id").style.display = 'none';

    document.getElementById(form_id).style.display = 'block';

    return true;
}
//-->
</script> 
```

这首先隐藏所有表单，然后显示您要选择的表单

# android - 如何将一个 BroadcastReceiver 对象注册到标签栏应用程序，以显示应用程序中所有活动的网络状态更新？

> ID：11201610
> 
> 赞同：0
> 
> 时间：2012-06-26T06:10:20.913
> 
> 标签：android, broadcastreceiver, android-tabhost

我正在开发适用于 Android 的标签栏应用程序，我需要更新用户的状态，我想将整个应用程序注册到 a`BroadcastReceiver`并`Toast`在所有屏幕上显示有关网络状态的信息。

我想出了下面的代码，但它只适用于一个`Activity`。我的注册`onResume`方式与我在所有活动中的注册方式相同，但我`currentNetworkInfo`在第二个选项卡中获得了一个空指针。任何想法如何解决这个问题？

```
this.registerReceiver(this.mConnReceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));

private BroadcastReceiver mConnReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            boolean noConnectivity = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);
            String reason = intent.getStringExtra(ConnectivityManager.EXTRA_REASON);
            boolean isFailover = intent.getBooleanExtra(ConnectivityManager.EXTRA_IS_FAILOVER, false);

            currentNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);

            if (currentNetworkInfo.isConnected()) {
                Toast.makeText(getApplicationContext(), "Network connected", Toast.LENGTH_LONG).show();
            } else {
                Toast.makeText(getApplicationContext(), "No Network connection", Toast.LENGTH_LONG).show();
            }
        }
    }; 
```

# struts - 在逻辑的偏移属性中编写条件表达式：struts 1.3的迭代标记

> ID：11201614
> 
> 赞同：0
> 
> 时间：2012-06-26T06:10:37.263
> 
> 标签：struts

我想在struts1.3的logic:iterate标签的offset属性中写一个条件。我的标签看起来像这样

逻辑：迭代名称="instlist" id="inst" type="com.umonitor.fundstransfer.beans.FtInstitution" indexId="counter"

我想将偏移值设置为列表中的每个第 8 个元素。

那可能吗？我想实现分页，但问题是我无法更改操作类或添加任何内容，只能操作 jsp 中的值。我在 jsp 中有完整的列表，并且只能在页面中显示 8 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:51:40.620

你看过逻辑的“偏移”和“长度”属性：迭代吗？[http://struts.apache.org/1.x/struts-taglib/tlddoc/logic/iterate.html](http://struts.apache.org/1.x/struts-taglib/tlddoc/logic/iterate.html)

这些属性将使您能够从某个位置（偏移）开始，然后仅显示接下来的 8 个条目（长度）。

在您的情况下，我猜您有一个名为“page”之类的参数，您需要将偏移量设置为 page*8，将长度设置为 8。

# xslt - Xslt： <xsl:value-of select="$MyVar">有效，但 <xsl:value-of select="MyDataPfath/$MyVar">不工作。 我的代码有什 问问题 问问题 2012-06-26T06:10:52.497 848 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. <xsl:value-of select="$MyVar">有效，但 <xsl:value-of select="MyDataPfath/$MyVar">不工作。 我的代码有什么问题？ 从外观上看，您要实现的是“动态评估”。默认情况下，XSLT 不支持动态评估 XPath，因此您需要使用扩展函数。 根据您的 XSLT 处理器，您可能希望查看 EXSLT 扩展。特别是http://www.exslt.org/dyn/index.html上的动态模块。这将允许做这样的事情 <xsl:value-of select="dyn:evaluate('MyDataPfath/$MyVar')">但是，在您的情况下，也许 $MyVar 只包含一个元素名称。在这种情况下，您可以将您的命令更改为以下，这将在没有任何扩展功能的情况下工作 <xsl:value-of select="MyDataPfath/*[local-name() = $MyVar]">xsltvalue-of 4 3 回答 3 This answer is useful 0 您的代码没有失败，它完全按照规范所说的去做。这与您希望/想象的不同。 您的希望/想象是基于对 XPath 中变量性质的基本误解。XPath 变量不是宏。它们不能通过文本替换起作用；它们代表价值观。如果变量 $E 包含字符串“X”，则MyPath/$E表示与 相同MyPath/"X"，这在 XPath 1.0 中是非法的，并且在 XPath 2.0 中返回的字符串“X”实例与 MyPath 中的节点一样多。 你可能打算MyPath/*[name()=$E] 于 2012-06-26T08:50:19.903 回答 This answer is useful 0 无法通过在 . 它不会识别正确的路径。假设 $MyVar 的值为“Hi”。因此它将表示为“MyDataPfath/“Hi””，这是您要从 XML 中检索的无效路径。要消除此限制，您可以使用 name() 或 local-name() 函数，可按如下方式使用：或 于 2012-06-28T09:28:29.260 回答 This answer is useful 0 从外观上看，您要实现的是“动态评估”。默认情况下，XSLT 不支持动态评估 XPath，因此您需要使用扩展函数。 根据您的 XSLT 处理器，您可能希望查看 EXSLT 扩展。特别是http://www.exslt.org/dyn/index.html上的动态模块。这将允许做这样的事情 <xsl:value-of select="dyn:evaluate('MyDataPfath/$MyVar')">但是，在您的情况下，也许 $MyVar 只包含一个元素名称。在这种情况下，您可以将您的命令更改为以下，这将在没有任何扩展功能的情况下工作 <xsl:value-of select="MyDataPfath/*[local-name() = $MyVar]">于 2012-06-26T08:05:32.510 回答 Related 2 node.js - Nodejs Restify 集合/数组参数 0 c# - 如何使用友好名称的 Core Audio API 主音量控制？ 2 javascript - Selenium IDE - 如何处理 java 脚本警报和确认 3 sql - SQL 案例不等式 5 javascript - node.js如何向手机号码发送验证码？（类似于 nodemailer，但用于 SMS） 0 ember.js - becomeValid 不会被触发 2 android - Base64 图像上传 VS 二进制图像上传？ 1 cocoa - 如何检测 NSString 的语言 1 c - 在控制台上尝试子类化 2 ruby - 如何将由 javascript 生成的 html 下载为 pdf Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</xsl:value-of></xsl:value-of></xsl:value-of></xsl:value-of></xsl:value-of></xsl:value-of></xsl:value-of></xsl:value-of>

> ID：11201617
> 
> 赞同：0
> 
> 时间：
> 
> 标签：xslt, value-of

```
<xsl:value-of select="$MyVar"/> 
```

有效，但

```
<xsl:value-of select="MyDataPfath/$MyVar"/> 
```

不工作。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:50:19.903

您的代码没有失败，它完全按照规范所说的去做。这与您希望/想象的不同。

您的希望/想象是基于对 XPath 中变量性质的基本误解。XPath 变量不是宏。它们不能通过文本替换起作用；它们代表价值观。如果变量 $E 包含字符串“X”，则`MyPath/$E`表示与 相同`MyPath/"X"`，这在 XPath 1.0 中是非法的，并且在 XPath 2.0 中返回的字符串“X”实例与 MyPath 中的节点一样多。

你可能打算`MyPath/*[name()=$E]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:28:29.260

无法通过在 . 它不会识别正确的路径。假设 $MyVar 的值为“Hi”。因此它将表示为“MyDataPfath/“Hi””，这是您要从 XML 中检索的无效路径。要消除此限制，您可以使用 name() 或 local-name() 函数，可按如下方式使用：或

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T08:05:32.510

从外观上看，您要实现的是“动态评估”。默认情况下，XSLT 不支持动态评估 XPath，因此您需要使用扩展函数。

根据您的 XSLT 处理器，您可能希望查看 EXSLT 扩展。特别是[http://www.exslt.org/dyn/index.html上的](http://www.exslt.org/dyn/index.html)**动态**模块。这将允许做这样的事情

```
<xsl:value-of select="dyn:evaluate('MyDataPfath/$MyVar')"/> 
```

但是，在您的情况下，也许 $MyVar 只包含一个元素名称。在这种情况下，您可以将您的命令更改为以下，这将在没有任何扩展功能的情况下工作

```
<xsl:value-of select="MyDataPfath/*[local-name() = $MyVar]"/> 
```

# java - Java：从 MySQL 检索记录时为空 ResultSet

> ID：11201623
> 
> 赞同：0
> 
> 时间：2012-06-26T06:11:18.510
> 
> 标签：java, mysql, resultset

我正在使用netbeans和mysql。我有一个`employee`用以下字段命名的表" `emp_id`, `emp_name`, `intime`, `date`。我尝试使用此查询检索特定记录：

```
SELECT intime FROM employee WHERE emp_id='1' AND date='25/06/12' 
```

我收到一条错误消息`empty resultset`，但该表包含该特定记录。为什么会出现这个错误？

```
error: dsdcom.mysql.jdbc.JDBC4ResultSet@d20b73 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:34:31.260

尝试使用`PreparedStatement`,编写/执行查询

```
String sql="Select intime from employee where emp_id=? and date=?";
PreparedStatement statement=conn.prepareStatement(sql);
statement.setInt(1,1);
statement.setDate(2,java.sql.Date.valueOf("2012-06-25"));
ResultSet rs=statement.executeQuery();
if(rs.next())
 {
   //found
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:24:52.840

可能日期字段是关键字或数据库表数据字段某些列为空，我建议您仔细检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:26:30.097

使用 HeidiSQL 或类似的东西直接在 mysql 中运行上面的查询。并确保它返回您想要的结果。通过使用此方法，您可以更正查询中的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T06:39:34.720

尝试类似的东西

```
SELECT intime FROM employee WHERE emp_id='1' AND date like '25/06/12' 
```

# javascript - 使用 nodejs 安装 websocket

> ID：11201625
> 
> 赞同：1
> 
> 时间：2012-06-26T06:11:31.633
> 
> 标签：javascript, node.js

我正在尝试使用 npm 在 nodejs 上安装 websocket 我收到以下错误。我正在将它安装在 Windows 上。

```
npm install websocket

0 info it worked if it ends with ok
1 verbose cli [ 'C:\\Program Files (x86)\\nodejs\\\\node.exe',
1 verbose cli   'C:\\Program Files (x86)\\nodejs\\node_modules\\npm\\bin\\npm-cli.js',
1 verbose cli   'install',
1 verbose cli   'websocket@1.0.3' ]
2 info using npm@1.1.32
3 info using node@v0.8.0
4 verbose node symlink C:\Program Files (x86)\nodejs\\node.exe
5 verbose config file C:\Users\tasleem\.npmrc
6 verbose config file C:\Program Files (x86)\nodejs\etc\npmrc
7 verbose config file C:\Program Files (x86)\nodejs\node_modules\npm\npmrc
8 verbose read json C:\Program Files (x86)\nodejs\package.json
9 verbose read json C:\Program Files (x86)\nodejs\node_modules\npm\package.json
10 verbose read json C:\Program Files (x86)\nodejs\node_modules\package\package.json
11 verbose read json C:\Program Files (x86)\nodejs\node_modules\websocket-1.0.6\package.json
12 verbose read json C:\Program Files (x86)\nodejs\package.json
13 verbose cache add [ 'websocket@1.0.3', null ]
14 silly cache add name=undefined spec="websocket@1.0.3" args=["websocket@1.0.3",null]
15 verbose parsed url { pathname: 'websocket@1.0.3',
15 verbose parsed url   path: 'websocket@1.0.3',
15 verbose parsed url   href: 'websocket@1.0.3' }
16 silly cache add name="websocket" spec="1.0.3" args=["websocket","1.0.3"]
17 verbose parsed url { pathname: '1.0.3', path: '1.0.3', href: '1.0.3' }
18 verbose addNamed [ 'websocket', '1.0.3' ]
19 verbose addNamed [ '1.0.3', '1.0.3' ]
20 verbose url raw websocket/1.0.3
21 verbose url resolving [ 'https://registry.npmjs.org/', './websocket/1.0.3' ]
22 verbose url resolved https://registry.npmjs.org/websocket/1.0.3
23 http GET https://registry.npmjs.org/websocket/1.0.3
24 error Error: connect ETIMEDOUT
24 error     at errnoException (net.js:781:11)
24 error     at Object.afterConnect [as oncomplete] (net.js:772:19)
24 error  { [Error: connect ETIMEDOUT] code: 'ETIMEDOUT', errno: 'ETIMEDOUT', syscall: 'connect' }
25 error You may report this log at:
25 error     <http://github.com/isaacs/npm/issues>
25 error or email it to:
25 error     <npm-@googlegroups.com>
26 error System Windows_NT 6.1.7601
27 error command "C:\\Program Files (x86)\\nodejs\\\\node.exe" "C:\\Program Files (x86)\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "websocket@1.0.3"
28 error cwd C:\Program Files (x86)\nodejs
29 error node -v v0.8.0
30 error npm -v 1.1.32
31 error syscall connect
32 error code ETIMEDOUT
33 error message connect ETIMEDOUT
34 error errno ETIMEDOUT
35 error ETIMEDOUT errno
36 verbose exit [ 1, true ] 
```

或者我有 WebSocket 包，有人能告诉我在 nodejs 文件夹中的哪里提取它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:41:45.957

[您的站点和NPM 注册表](http://registry.npmjs.org)之间似乎存在连接问题。首先尝试在浏览器中连接到[NPM 注册表](http://registry.npmjs.org)，您应该会遇到相同的错误。

检查您的网络连接，您也可以尝试`ping registry.npmjs.org`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T05:28:11.943

我不确定这是否可以帮助您。我在windows上使用nodejs。Cygwin，当我尝试使用 websockets 制作 javascripts 时，我遇到了标准节点安装问题 - 它太旧了，然后我尝试从 Cygwin 内部安装新版本的节点，但是这是不可能的，所以我继续使用安装它“node-v0.10.24-x64.msi”，可从[http://nodejs.org/download/下载](http://nodejs.org/download/)

下载后，我将 nodejs 文件夹中的所有内容手动复制到 cygwin /usr/local/bin

为了安装 ws (websockets)，需要 npm，为此您需要最新版本 - 在手动复制整个文件夹 nodejs 之后，您可以启动 cygwin 并编写以下内容：

`node -v`

它应该这样写：

$节点-v

v0.10.24

现在您可以进行以下操作：

`$ cd /usr/local/bin/node_modules/npm/bin`

`$ node npm-cli.js install ws`

`$ node npm-cli.js install websockets`

npm-cli.js 是 npm 的命令行界面版本，用 javascript 制作，nodejs 可以解析它，所以现在应该安装 ws 模块

- 注意在安装后将文件夹“node_modules”复制或移动到以下位置非常重要：

cygwin/home/——你的用户——/node_modules

否则，您的 javascript 项目将无法看到已安装的模块 - 这实际上很奇怪，但我对此没有任何答案 - 我只是做了一个副本，然后它就可以工作了

我希望你可以使用这个答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:45:01.087

“npm up -g”也不会伤害..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-05T13:17:03.513

> **Step1 : 设置服务器** Express 充当 HTTP 服务器的角色，提供 HTML 文件和连接 Websocket 服务

```
var express = require('express')
var ws = require('./ws')
var app = express()
app.get('/', function (req, res) {
   res.sendfile(__dirname + '/ws.html');
})
app.listen(3000, function () {
   console.log('app listening on port 3000!')
}) 
```

> **Step2 : 设置客户端** websocket 客户端是浏览器支持的对象。
> 
> 下面将介绍3个重要功能：
> 
> ws.onopen : 连接时发出 ws.send : 向 websocket 服务器发送发送事件 ws.onmessage : 接收消息时发出事件

```
 <script>
    var ws = new WebSocket('ws://localhost:40510');
    // event emmited when connected
    ws.onopen = function () {
        console.log('websocket is connected ...')
        // sending a send event to websocket server
        ws.send('connected')
    }
    // event emmited when receiving message 
    ws.onmessage = function (ev) {
        console.log(ev);
    }
</script> 
```

> 供您参考：[https ://hackernoon.com/nodejs-web-socket-example-tutorial-send-message-connect-express-set-up-easy-step-30347a2c5535](https://hackernoon.com/nodejs-web-socket-example-tutorial-send-message-connect-express-set-up-easy-step-30347a2c5535)

# javascript - ajax - 输出不是简写的 ajax 代码

> ID：11201626
> 
> 赞同：0
> 
> 时间：2012-06-26T06:11:34.330
> 
> 标签：javascript, ajax, jquery

我为 ajax 编写了一个简单的代码来调用页面，但它似乎不起作用。谁能告诉我错误？

```
function toggledisp(val)
{
$.ajax({
  url: 'ads/xyz.php?a=' + val + '&b=2' ,
});
} 
```

另外，如果我们想输出响应文本，那么我们如何使用这种方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:16:08.213

我强烈推荐并邀请您查看使用 jQuery 的**基本**ajax 教程

*   [jQuery AJAX 教程，示例：使用 jQuery 简化 Ajax 开发](http://viralpatel.net/blogs/jquery-ajax-tutorial-example-ajax-jquery-development/)

> 另外，如果我们想输出响应文本，那么我们如何使用这种方法呢？

您将使用`success`或`complete`处理程序：

```
$.ajax({
  url:'url here',
  data: {foo:'foo', bar:'bar'}, // example of data you want to send 
  success: function(response) {
     alert(response);
  }
}); 
```

有关更多信息，请先参阅上面的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:20:03.140

```
function toggledisp(val)
{
  $.ajax({
    url: '/ads/xyz.php' ,
    data:{a:val,b:2},
    success:function(output){ alert(output); }
  });
} 
```

# blackberry - 从编辑字段中删除突出显示框

> ID：11201633
> 
> 赞同：0
> 
> 时间：2012-06-26T06:12:06.733
> 
> 标签：blackberry, textbox, blackberry-editfield

我正在使用编辑字段输入一些文本。当我单击编辑字段时，一个**突出显示框**如图所示。我想隐藏那个盒子。请使用下图捕捉问题：

![在此处输入图像描述](../Images/704843f2b151a8005d02d12935c347fc.png)

如何在编辑字段中删除这个*焦点框？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:15:13.990

由于它是编辑字段，其默认性质是突出显示文本以进行编辑。如果您要在应用程序运行时在该字段中输入值，则意味着您必须对此进行处理。如果您要以编程方式输入值意味着使用富文本字段或您的

```
editfield.setEditable(false); 
```

# c# - 强制 Mpeg2Demultiplexer 使用 ffdshow 渲染 H264 数字电视视频

> ID：11201638
> 
> 赞同：22
> 
> 时间：2012-06-26T06:12:30.990
> 
> 标签：c#, .net, directshow, h.264, dvb

不幸的是，我花了很多时间试图让 DirectShow 的 DTVViewer 示例正常工作，但没有成功。DVBT 网络的视频格式是 H264，我发现 IntelliConnect 行为`IFilterGraph`更喜欢使用 Mpeg2 视频格式。

对于那些想要查看代码的人，这里是。如果您对 DirectShow 一无所知，我分享了我使用此代码的经验。最可能的问题在本教程的**第 5 步和第 6 步中进行了描述。**

*   连接过滤器的辅助函数代码：

    ```
    public static void UnsafeConnectFilters(IFilterGraph2 graph, IBaseFilter source, IBaseFilter dest, Func<AMMediaType, bool> sourceMediaPredicate=null, Func<AMMediaType, bool> destMediaPredicate=null) {
        foreach(IPin spin in IteratePinsByDirection(source, PinDirection.Output)) {
            if(IsConnected(spin))
                continue;
            int fetched;
            AMMediaType[] sourceTypes=GetMajorType(spin, out fetched);
            if(fetched>0) {
                Guid sourceType=sourceTypes[0].majorType;
                try {
                    if(sourceMediaPredicate!=null&&!sourceMediaPredicate(sourceTypes[0]))
                        continue;
                    foreach(IPin pin in IteratePinsByDirection(dest, PinDirection.Input)) {
                        if(IsConnected(pin))
                            continue;
                        var types=GetMajorType(pin, out fetched);
                        try {
                            if(fetched>0) {
                                Guid destType=types[0].majorType;
                                if(destMediaPredicate!=null&&!destMediaPredicate(types[0]))
                                    continue;
                                if(sourceType==destType) {
                                    spin.Connect(pin, types[0]);
                                    return;
                                }
                            }
                            else {
                                spin.Connect(pin, sourceTypes[0]);
                                return;
                            }
                        }
                        finally {
                        }
                    }
                }
                finally {
                }

            }
        }
    } 
    ```

有谁知道：

1.  我应该如何将 h264 引脚连接到 ffdshow？
2.  我应该如何推荐图表使用 h264 视频解码？

* * *

*   **教程和细节**

    1.  创建图表

        ```
        _graph = (IFilterGraph2)new FilterGraph(); 
        ```

    2.  我们正在使用 DVBT 网络

        ```
        IBaseFilter networkProvider = (IBaseFilter) new DVBTNetworkProvider(); 
        ```

        ... 必须调到 602000KHz@8MHz ONID=1 TSID=1 SID=6

        ```
        ITuner tuner = (ITuner) networkProvider;
        IDVBTuningSpace tuningspace = (IDVBTuningSpace) new DVBTuningSpace();
        tuningspace.put_UniqueName("DVBT TuningSpace");
        tuningspace.put_FriendlyName("DVBT TuningSpace");
        tuningspace.put__NetworkType(typeof (DVBTNetworkProvider).GUID);
        tuningspace.put_SystemType(DVBSystemType.Terrestrial);
        ITuneRequest request;
        tuningspace.CreateTuneRequest(out request);
        ILocator locator = (ILocator) new DVBTLocator();
        locator.put_CarrierFrequency(602000);
        ((IDVBTLocator) locator).put_Bandwidth(8);
        request.put_Locator(locator);
        IDVBTuneRequest dvbrequest = (IDVBTuneRequest) request;
        dvbrequest.put_TSID(1);
        dvbrequest.put_ONID(1);
        dvbrequest.put_SID(6);
        _graph.AddFilter(networkProvider, "Network Provider"); 
        ```

    3.  创建一个 mpeg2 解复用器以从单个电视流中获取单独的 EPG/Vidoe/Audio/Text 流

        ```
        _mpeg2Demultiplexer = (IBaseFilter) new MPEG2Demultiplexer();
        _graph.AddFilter(_mpeg2Demultiplexer, "MPEG-2 Demultiplexer"); 
        ```

        现在我们在本地过滤器中搜索 BDA 源过滤器，在我的例子中是`IT9135 BDA Fitler`

        ```
        DsDevice[] devicesOfCat = 
            DsDevice.GetDevicesOfCat(FilterCategory.BDASourceFiltersCategory);

        IBaseFilter iteDeviceFilter;

        _graph.AddSourceFilterForMoniker(
            devicesOfCat[0].Mon, null, devicesOfCat[0].Name, out iteDeviceFilter); 
        ```

    4.  现在连接过滤器：`[DVBT Net. Provider]->[BDA Src Filter]->[MPEG2Demux]-> ...`

        ```
        UnsafeConnectFilters(_graph, networkProvider, iteDeviceFilter);
        UnsafeConnectFilters(_graph, iteDeviceFilter, _mpeg2Demultiplexer); 
        ```

        必须将两个过滤器连接到解复用器，以提供 epg（节目指南数据）。对不起，我不知道他们具体是什么 doig `:P`。它们位于`BDATransportInformationRenderersCategory`类别下。我们尝试通过名称找到它们并将它们连接到 demux

        ```
        DsDevice[] dsDevices = 
            DsDevice.GetDevicesOfCat(FilterCategory.BDATransportInformationRenderersCategory);

        foreach (DsDevice dsDevice in dsDevices)
        {
            IBaseFilter filter;

            _graph.AddSourceFilterForMoniker(
                dsDevice.Mon, null, dsDevice.Name, out filter);

            if(dsDevice.Name == "BDA MPEG2 Transport Information Filter")
                _bdaTIF = filter;
            else if(dsDevice.Name == "MPEG-2 Sections and Tables")
            {
                _mpeg2SectionsAndTables = filter;
            }
            UnsafeConnectFilters(_graph, _mpeg2Demultiplexer, filter);
        } 
        ```

        现在 demux 连接到`MPEG-2 Sections and Tables`和`BDA MPEG2 Transport Information Filter`。

    5.  **现在创建 h264 视频类型并将输出引脚添加到此类型的 demux**

        ```
        AMMediaType h264 = new AMMediaType();
        h264.formatType = FormatType.VideoInfo2;
        h264.subType = MediaSubType.H264;
        h264.majorType = MediaType.Video;
        IPin h264pin;
        ((IMpeg2Demultiplexer) _mpeg2Demultiplexer).CreateOutputPin(h264, "h264", out h264pin); 
        ```

        下面，我尝试搜索能够处理 H264 视频并且位于`DirectShow Filters`类别下的 ffdshow Video Decoder（如 中`GraphStudio`）。

        ```
        DsDevice[] directshowfilters = 
            DsDevice.GetDevicesOfCat(FilterCategory.LegacyAmFilterCategory);

        IBaseFilter ffdshow = null;
        foreach (DsDevice directshowfilter in directshowfilters)
        {
            if(directshowfilter.Name == "ffdshow Video Decoder")
            {
                _graph.AddSourceFilterForMoniker(
                    directshowfilter.Mon, null, directshowfilter.Name, 
                    out ffdshow);

                break;
            }
        } 
        ```

    6.  **为视频输出创建视频渲染器**...

        ```
        _videoRenderer = new VideoRendererDefault();
        _graph.AddFilter((IBaseFilter)_videoRenderer, "Video Renderer"); 
        ```

        ...和音频...

        ```
        DsDevice defaultDirectSound = 
            DsDevice.GetDevicesOfCat(FilterCategory.AudioRendererCategory)[0];

        _graph.AddSourceFilterForMoniker(
            defaultDirectSound.Mon, null, defaultDirectSound.Name, 
            out _audioRender); 
        ```

        这里我尝试将demux的h264输出引脚连接到ffdshow。此方法调用失败并出现 AccessViolationException。我不确定如何将这两者连接在一起`:(`。

        注释此行将导致图表开始运行，尽管图表中有一个断开连接的 ffdshowVideoDecoder 过滤器，但不会显示任何内容。IntelliConnect 将 Mpeg2 视频输出连接到本地可用的视频解码器，正如我所说，它不会显示任何内容。

        ```
        // UnsafeConnectFilters(_graph, _mpeg2Demultiplexer, ffdshow, type => type.majorType == MediaType.Video && type.subType == MediaSubType.H264); 
        ```

    7.  `ConnectFilters`借自 directshowlib 的 DTVViewer 示例

        ```
        ConnectFilters(); 
        ```

        我把实际调音移到了这里

        ```
        tuner.put_TuningSpace(tuningspace);
        tuner.put_TuneRequest(request); 
        ```

    8.  启动图表并希望显示一些声音或视频

        ```
        int hr = (_graph as IMediaControl).Run();
        DsError.ThrowExceptionForHR(hr); 
        ```

    9.  检查图表是否正在运行...

        ```
        FilterState pfs;
        hr = (_graph as IMediaControl).GetState(1000, out pfs);
        DsError.ThrowExceptionForHR(hr); 
        ```

        它说图表正在运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:41:36.990

您是否检查过您的 ffdshow 是否已为 H264/AVC 启用？打开过滤器属性并在“编解码器”部分中，应启用 H264/AVC 格式（您也可以禁用 Mpeg2 解码器以确保它不喜欢这种格式）。

另一件事，您可以尝试使用另一个 Mpeg2 解复用器。默认的“MPEG-2 Demultiplexer”在不同的环境中表现不同。还有许多其他过滤器可以解复用 TS，如果您可以投资一些钱，我建议使用 MainConcept 或 Elecard。

# java - 写入文件代码不写入

> ID：11201640
> 
> 赞同：0
> 
> 时间：2012-06-26T06:12:42.660
> 
> 标签：java, bufferedwriter

好吧，我正在尝试编写一行信息以登录文本文件（.txt），但这是代码无法写入的部分。其他一切都有效，除了这个但没有给出任何错误。

```
public void writeConfig(File config, Boolean append, String errored){
    try {
        Writer output;
        if (config != null){
            output = new BufferedWriter(new FileWriter(config));
        } else {
            output = new BufferedWriter(new FileWriter(er));
        }
        if (append == true){
            output.append(errored);
        } else {
            output.write(errored);
        }
    } catch (Exception e){
        try {
            loadErrorLog(error, true, "Failed to write to Boom's Log.\n");
        } catch (Exception e1){
            log.info("Major Malfunction #686 : Tell Maker immediatly.");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T06:14:54.980

您没有关闭编写器，这意味着所有数据都仅保留在缓冲区中。

你应该在一个`finally`块中关闭它。

此外：

*   您对`append`参数的使用显然很狡猾-您几乎可以肯定将其传递给`FileWriter`(or `FileOutputStream`) 的构造函数。我不认为`append`in`Writer`做你认为它做的事情。
*   尽量避免比较`true`- 只是`if (append)`会更清楚
*   使用条件运算符可以使您的`FileWriter`代码更清晰，特别是如果您*仅*将它用于文件：

    ```
    File file = config == null ? er : config;
    Writer writer = new BufferedWriter(new FileWriter(file)); 
    ```

*   我会避免`FileWriter`首先使用，因为它总是使用平台默认编码。使用`FileOutputStream`包装在 an 中`OutputStreamWriter`，明确指定编码（例如 UTF-8）
*   避免`Exception`在大多数地方捕获；在这里，抓住它会更干净`IOException`。
*   看起来您的`loadErrorLog`方法可能应该在失败时进行日志记录，否则我怀疑您*每次*调用它时都会编写该代码块。
*   如果您无法编写配置，您真的要继续吗？肯定是*这种*方法应该处理异常吗？我可能会`catch`完全删除块（只留下一个`try`/ `finally`）并让`IOException`气泡向上堆叠

# algorithm - 如何合并两个有限状态自动机？

> ID：11201643
> 
> 赞同：5
> 
> 时间：2012-06-26T06:13:03.270
> 
> 标签：algorithm, finite-automata, state-machine, deterministic

假设我有两个确定性有限状态自动机，由以下转换图表示：

**关键字 IF 的 FSA：** IF

```
 ___        ___         _
 /   \  I   /   \  F   // \\
>| 0 |----->| 1 |----->||2||
 \___/      \___/      \\_// 
```

**ID 的 FSA：** [AZ][A-Z0-9]*

```
 ------------
  ___       | _    LET |
 /   \ LET  // \\<------
>| 0 |----->||1||
 \___/      \\_//<------
            |      NUM |
            ------------ 
```

我可以使用什么算法将它们组合成具有三个最终状态的单个确定性有限状态自动机，由以下转换图表示：

```
 -----------------------
            | LETTER BUT F OR NUM |   --------
  ___       | _          _   LET  v _ |  LET |
 /   \  I   // \\  F   // \\----->// \\<------
>| 0 |----->||1||----->||2||      ||3||<--------
 \___/      \\_//      \\_//----->\\_//<------ |
   |                         NUM  |      NUM | |
   | ANY LETTER OTHER THAN I      ------------ |
   ---------------------------------------------

1: ID
2: IF (IT'S ALSO AN ID, BUT THE KEYWORD IF HAS A HIGHER PRECEDENCE)
3: ID 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T06:44:12.243

教科书通常给出自动机`C`，使得`L(C) = L(A) U L(B)`通过对其应用[de-morgan](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)，L(C) = (L(A) ^C [intersection] L(B) ^C ) ^C。
交集是通过构建笛卡尔积自动机来完成的，否定只是简单地切换接受状态。
也可以直接构建联合自动机：构建笛卡尔积自动机，最终状态是`(a,b)`这样的状态，即OR 自动机中的最终状态是OR`a`自动机中的最终状态`A``b``B`

另一种方法是通过简单地创建一个新状态来构建一个[非确定性最终自动机](http://en.wikipedia.org/wiki/Nondeterministic_finite_automaton)(NFA)，并为 start(A) 和 start(B) 添加一个 epsilon 路径，并使用标准算法从自动机中消除非确定性.

问题 - 这个自动机不会是最小的（可能远非如此）。您可以尝试在生成的自动机上使用[此算法](http://www.cs.uky.edu/~lewis/essays/compilers/min-fa.html)以最小化它。

# java - Java中的HexapawnBoard类

> ID：11201646
> 
> 赞同：-1
> 
> 时间：2012-06-26T06:13:13.173
> 
> 标签：java

我必须完成 4 种方法，但我很难理解它们。我正在努力完成`whitemove()`. 我知道我必须遍历电路板，但我不能完全理解我应该怎么做！

```
import java.util.List;
import java.util.ArrayList;

public class HexapawnBoard {
private static final int WHITE_PIECE = 1;
private static final int BLACK_PIECE = 2;
private static final int EMPTY = 0;

private static final int BOARD_SIZE = 3;

private int[][] board;

/**
 * Create a board position from a string of length BOARD_SIZE*BOARD_SIZE (9).
 * The first BOARD_SIZE positions in the string correspond to the black player's home
 * position. The last BOARD_SIZE positions in the string correspond ot the white player's
 * home position. So, the string "BBB   WWW" corresponds to a starting position.
 * 
 * @param pos the string encoding the position of the board
 */
public HexapawnBoard(String pos)
{
    if(pos.length() != BOARD_SIZE * BOARD_SIZE)
        throw new RuntimeException("HexapawnBoard string must be of length BOARD_SIZExBOARD_SIZE");

    board = new int[BOARD_SIZE][BOARD_SIZE];
    for(int row=0;row<BOARD_SIZE;row++)
    {
        for(int col=0;col<BOARD_SIZE;col++)
        {
            switch(pos.charAt(row*BOARD_SIZE+col))
            {
            case 'B':
            case 'b':
                board[row][col] = BLACK_PIECE;
                break;
            case 'W':
            case 'w':
                board[row][col] = WHITE_PIECE;
                break;
            case ' ':
                board[row][col] = EMPTY;
                break;
            default:
                throw new RuntimeException("Invalid Hexapawn board pattern " + pos);
            }
        }
    }
}

/**
 * A copy constructor of HexapawnBoard
 * 
 * @param other the other instance of HexapawnBoard to copy
 */
public HexapawnBoard(HexapawnBoard other)
{
    board = new int[BOARD_SIZE][BOARD_SIZE];
    for(int i=0;i<BOARD_SIZE;i++)
        for(int j=0;j<BOARD_SIZE;j++)
            this.board[i][j] = other.board[i][j];
}

/**
 * Return a string version of the board. This uses the same format as the 
 * constructor (above)
 * 
 * @return a string representation of the board.
 */
public String toString()
{
    StringBuffer sb = new StringBuffer();
    for(int row=0;row<BOARD_SIZE;row++)
    {
        for(int col=0;col<BOARD_SIZE;col++)
        {
            switch(board[row][col])
            {
            case BLACK_PIECE:
                sb.append('B');
                break;
            case WHITE_PIECE:
                sb.append('W');
                break;  
            case EMPTY:
                sb.append(' ');
                break;
            }
        }
    }
    return sb.toString();
}

/**
 * Determine if this board position corresponds to a winning state.
 * 
 * @return true iff black has won.
 */
public boolean blackWins()
{
    for(int col=0;col<BOARD_SIZE;col++)
        if(board[BOARD_SIZE-1][col] == BLACK_PIECE)
            return true;
    return false;
}

/**
 * Determine if this board position corresponds to a winning state
 * 
 * @return true iff white has won
 */
public boolean whiteWins()
{
    for(int col=0;col<BOARD_SIZE;col++)
        if(board[0][col] == WHITE_PIECE)
            return true;
    return false;
}

/**
 * Determine if black has a move
 * 
 * @ return truee iff black has a move
 */
public boolean blackCanMove()
{

    return false;
}

/**
 * Return a List of valid moves of white. Moves are represented as valid 
 * Hexapawn board positions. If white cannot move then the list is empty.
 * 
 * @return A list of possible next moves for white
 */
public List<HexapawnBoard> whiteMoves()
{
    return null
}

/**
 * Determine if two board positions are equal
 * @param other the other board position
 * @return true iff they are equivalent board positions
 */
public boolean equals(HexapawnBoard other)
{

    return true;
}

/**
 * Determine if two board positions are reflections of each other
 * @param other the other board position
 * @return true iff they are equivalent board positions
 */
public boolean equalsReflection(HexapawnBoard other)
{

    return true;
}

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:17:36.557

首先，到目前为止您的代码似乎是正确的。

现在，对于你剩下的四种方法，我真的无法帮助你使用`blackCanMove()`这些`whiteMoves()`方法，因为我不知道这个六人棋游戏中的移动规则是什么。如果你能解释一下规则，我可以帮忙。

就`equals()`and`equalsReflection()`方法而言，您基本上需要做您在复制构造函数中所做的事情，但不是复制，而是进行条件测试。如果两个位置与应有的位置不匹配，则返回`false`。否则，一旦您检查了每个方块并且它们都正确，请返回`true`。

就`whiteMoves()`方法而言，您需要遍历棋盘并找到所有白色棋子。对于每个白色棋子，可能有几个（最多 3 个）有效动作。检查每个位置，看看它们是否可能。如果该位置有黑色棋子，则该棋子可能会沿对角线移动，如果该位置根本没有棋子，则该棋子可能会向前移动。对于每个有效的移动，创建一个新的`HexapawnBoard`代表棋盘在该移动之后的样子。在方法结束时，返回`HexapawnBoard`您创建的所有 s 的列表。

# c++ - C++ 本机到中级

> ID：11201648
> 
> 赞同：1
> 
> 时间：2012-06-26T06:13:17.527
> 
> 标签：c++

理论上和/或实际上是否可以将本机 c++ 编译成某种中间语言，然后在运行时编译？

同样，“便携式”是用来表示这一点的术语吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T06:19:45.553

[LLVM](http://llvm.org/)是一种编译器基础结构，它解析 C++ 代码，将其转换为一种称为 LLVM IR（IR 代表中间表示）的中间语言，它看起来像高级汇编语言。**它是一种独立于机器的语言**。产生 IR 是一个阶段。在下一阶段，它通过各种优化器（称为*pass*）。然后到达发出机器代码（即机器相关代码）的第三阶段。

它是基于模块的设计；一相（模块）的输出成为另一相的输入。您可以将 IR 保存在磁盘上，以便稍后可以恢复剩余阶段，也许在完全不同的机器上！

所以你可以生成 IR，然后在运行时做剩下的事情？我自己**没有**这样做，但 LLVM 似乎很有希望。

这是 LLVM IR 的文档：

*   [LLVM 语言参考手册](http://llvm.org/docs/LangRef.html)

[Stackoverlow 上的这个话题](https://stackoverflow.com/questions/10264635/compiler-output-language-llvm-ir-vs-c)似乎很有趣，正如它所说，

> *   LLVM 优势：
>     *   JIT - 您可以动态编译和运行代码。

这些文章很好读：

*   [LLVM 的设计](http://www.drdobbs.com/architecture-and-design/240001128)（在 drdobs.com 上）

*   [使用 LLVM 框架创建一个工作编译器，第 1 部分](http://www.ibm.com/developerworks/opensource/library/os-createcompilerllvm1/index.html)

# linux - 如何在测试服务器上创建 git repo 的虚拟副本

> ID：11201649
> 
> 赞同：0
> 
> 时间：2012-06-26T06:13:31.327
> 
> 标签：linux, git, ubuntu

我对 Git 相当陌生。我在本地工作过，但今天我需要用 git 设置一台远程机器。我不知道怎么做。

基本上我的设置是这样的。我有一台安装了 vmware 播放器的 Windows 机器，用于连接到 Git repo 所在的 dev ubuntu linux 机器。我将腻子放到开发机器上，并使用所有开发人员用户名通用的用户名执行与 git 相关的所有操作：dev

现在在 dev git repo 中创建了一个新的汇总，它需要部署在我们的 ubuntu linux 测试服务器上。我在测试服务器中有我的帐户。用户名：ash。

设置此应遵循的步骤是什么。我有一段时间与我的一位同事讨论过使用 SSH 密钥。由于他是唯一不可用的联系人，我不知道如何进行。我已经创建了 SSH 密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:19:20.383

以“ash”身份登录机器。

```
ash@gitserver:~$ 
```

创建一个包含 git-repository 的新目录

```
ash@gitserver:~$ mkdir rollout.git 
```

切换到目录

```
ash@gitserver:~$ cd rollout.git 
```

初始化 git 仓库

```
ash@gitserver:~/rollout.git$ git init --bare 
```

返回您的开发机器并克隆新创建的存储库或将其添加到现有 git 存储库的“远程”。使用“ssh://ash@gitserver/~/rollout.git”作为远程 URL。

[克隆更新]：确保要克隆到的目录中没有“rollout”目录。为简单起见，创建一个空目录“foo/”并尝试克隆到该目录。然后，您可以将克隆的存储库移动到您想要的任何位置。

将更改推送到新存储库.......完成！

使用 ssh-keys 将使身份验证更简单和/或更安全，但对于设置 git 存储库没有任何必要（或相关）。

# iphone - 在interfacebuilder中将子视图添加到自定义uiview

> ID：11201650
> 
> 赞同：1
> 
> 时间：2012-06-26T06:13:42.487
> 
> 标签：iphone, ios

我制作了一个`custom UIView`由几个子视图组成的并将其添加到 Nib 文件中。视图正在正确加载，但是当我尝试从 InterfaceBuilder添加`UIView`到我的时出现了我的问题。`custom UIView`我希望添加的子视图转到我的 custom 的最顶层子视图`UIView`，但毫不奇怪，子视图被添加到 root `custom UIView`。

`init`我可以在中做一些魔术`custom UIView`，移动添加的视图。

有其他选择吗？

关于解决这个问题的最佳实践有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:17:28.553

这似乎是正确的，因为当您在 nib 文件中添加 customView 时，您无权访问其子子视图，这意味着将视图添加到此自定义视图，会将它们添加到根视图而不是子视图，

正如您所说，您将不得不采取一些解决方法来完成这项工作，例如使用标签来定义视图，然后通过代码移动它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:25:24.010

您需要将根 UIView的`Custom UIView`to和所有其他子视图添加为. 这样您就可以得到您想要的。您的 IB 层次结构应如下所示...`subview of your Root view``subview of your Custom View`

```
 --->Root UIView
      --->Custom UIView
           --->UItextField
           --->UIlabel
           --->UiimageView 
```

如果您添加您的`Custom UIView in a code`，那么您需要连接`IBoutlet`所有子视图，然后将它们全部作为`subview of your custom view`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T08:51:35.363

似乎没有任何聪明的解决方案。相反，我最终`layoutSubviews`像这样覆盖：

```
-(void)layoutSubviews
{    
    [super layoutSubviews];
    for (UIView *subview in self.subviews){
        if (![self.internalViews containsObject:subview]) {
            [subview removeFromSuperview];
            CGRect f =subview.frame;
            f.origin.y += self.frame.origin.y;
            subview.frame = f;
            [self.contentContainer addSubview:subview];

        }
    }
} 
```

构建视图时，我将所有子视图添加到数组`internalViews`中。该`contentContainer`视图旨在用作所有 InterfaceBuilder 添加视图的父视图。

# cuda - 在 cudaMemcpyAsync 中复制 0 个字节

> ID：11201654
> 
> 赞同：2
> 
> 时间：2012-06-26T06:14:12.933
> 
> 标签：cuda

我很想知道如果我将 cudaMemcpyAsync 中的参数“count”设置为零，即 cudaMemcpyAsync(dst, src, count, cudaMemcpyDeviceToHost, stream) 会发生什么？在我的代码中，该函数返回 cudaSuccess，但副本仍然执行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:16:40.047

*错误，是*的，零字节从源复制到目标。

但是，由于复制和不复制该特定大小之间没有区别，因此无关紧要。

如果您要问是否有任何类型的设备到主机通信用于零大小的缓冲区，那是一个未指定的实现细节（尽管我不会赌钱，因为它会有些低效）。

# android - 如何录制流媒体视频？

> ID：11201657
> 
> 赞同：10
> 
> 时间：2012-06-26T06:14:33.877
> 
> 标签：android, video-streaming, video-recording

我**可以**在`SurfaceView`. 我正在创建`ContextMenu`通过添加菜单项**StartRecording**和**StopRecording**来录制视频。但我可以通过调用录制相机视频`mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);`

在这里，我想将视频源设置为流式视频源。有没有可能这样做？

但我想在播放时录制流媒体视频。你能告诉我如何在播放的同时进行录音吗？

你能提供任何关于这个问题的示例代码吗？

我的示例代码如下所示：

**主.xml：**

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"             android:orientation="vertical" android:layout_width="fill_parent"
android:layout_height="fill_parent">

<FrameLayout android:layout_width="fill_parent" android:layout_height="fill_parent" android:id="@+id/frameLayoutRoot">

    <SurfaceView android:id="@+id/surfaceViewFrame" android:layout_gravity="center" android:layout_height="wrap_content" android:layout_width="wrap_content"></SurfaceView>

    <LinearLayout android:layout_width="fill_parent" android:id="@+id/linearLayoutMediaController" android:layout_height="wrap_content" android:paddingBottom="5dp"
        android:paddingTop="5dp" android:layout_gravity="bottom" android:gravity="center_vertical" android:background="@color/media_controller_bg_color">

        <TextView android:layout_width="wrap_content" android:id="@+id/textViewPlayed" android:layout_marginLeft="5dp" android:layout_marginRight="5dp"
            android:textColor="@color/media_controller_text_color" android:textStyle="bold" android:text="0:00:00" android:padding="0dp" android:textSize="13sp" android:gravity="center"
            android:layout_height="wrap_content"></TextView>

        <SeekBar android:id="@+id/seekBarProgress" android:layout_weight="1" style="@style/MyCustomProgressStyle" android:layout_width="fill_parent"
            android:layout_height="wrap_content" android:progress="50"></SeekBar>
        <TextView android:layout_width="wrap_content" android:id="@+id/textViewLength" android:layout_marginLeft="5dp" android:layout_marginRight="5dp"
            android:textColor="@color/media_controller_text_color" android:textStyle="bold" android:text="0:00:00" android:textSize="13sp" android:padding="0dp" android:gravity="center"
            android:layout_height="wrap_content"></TextView>

    </LinearLayout>

    <ProgressBar style="?android:attr/progressBarStyleLarge" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_gravity="center"
        android:id="@+id/progressBarWait"></ProgressBar>

    <ImageView android:layout_width="wrap_content" android:layout_height="wrap_content" android:id="@+id/imageViewPauseIndicator" android:layout_gravity="center"
        android:src="@drawable/pause_button"></ImageView>
</FrameLayout> 
```

**MediaPlayerDemo.java：**

```
public class MediaPlayerDemo_Video extends Activity implements
    OnBufferingUpdateListener, OnCompletionListener, OnPreparedListener,       OnClickListener, OnSeekCompleteListener,
    Callback, OnSeekBarChangeListener, AnimationListener {

private String path2 = "http://commonsware.com/misc/test2.3gp";
private String path = "";

    private static final String TAG = "MediaPlayerDemo";
private MediaRecorder mediaRecorder;
private MediaPlayer mMediaPlayer;
private SurfaceView surfaceViewFrame;
private SurfaceHolder surfaceHolder;
// private String path;
private Bundle extras;
private Animation hideMediaController;
private LinearLayout linearLayoutMediaController;
private SeekBar seekBarProgress;
private TextView textViewPlayed;
private TextView textViewLength;
private ProgressBar progressBarWait;
private ImageView imageViewPauseIndicator;
private Timer updateTimer;
AudioManager volume;
int keyCode = 0;
   KeyEvent keyEvent;
   private MediaRecorder mVideoRecorder = null;
   private Camera mCamera;

 @Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.mediaplayer_2);

    linearLayoutMediaController = (LinearLayout)       findViewById(R.id.linearLayoutMediaController);
    linearLayoutMediaController.setVisibility(View.GONE);

        hideMediaController =       AnimationUtils.loadAnimation(MediaPlayerDemo_Video.this, R.anim.disapearing);
    hideMediaController.setAnimationListener(this);

    imageViewPauseIndicator = (ImageView) findViewById(R.id.imageViewPauseIndicator);
    imageViewPauseIndicator.setVisibility(View.GONE);

    textViewPlayed = (TextView) findViewById(R.id.textViewPlayed);
    textViewLength = (TextView) findViewById(R.id.textViewLength);

    surfaceViewFrame = (SurfaceView) findViewById(R.id.surfaceViewFrame);
    surfaceViewFrame.setOnClickListener(this);
    surfaceViewFrame.setClickable(false);

    seekBarProgress = (SeekBar) findViewById(R.id.seekBarProgress);
    seekBarProgress.setOnSeekBarChangeListener(this);
             //     seekBarProgress.setProgress(0);

    progressBarWait = (ProgressBar) findViewById(R.id.progressBarWait);
    volume = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    int maxVolume = volume.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
    int curVolume = volume.getStreamVolume(AudioManager.STREAM_MUSIC);
    seekBarProgress.setMax(maxVolume);
    seekBarProgress.setProgress(curVolume);

    surfaceHolder = surfaceViewFrame.getHolder();
    surfaceHolder.addCallback(this);
    surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    mMediaPlayer = new MediaPlayer();
    mMediaPlayer.setOnPreparedListener(this);
    mMediaPlayer.setOnCompletionListener(this);
    mMediaPlayer.setOnBufferingUpdateListener(this);
    mMediaPlayer.setOnSeekCompleteListener(this);
    mMediaPlayer.setScreenOnWhilePlaying(true);
    mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

    if (mMediaPlayer != null) {
        if (!mMediaPlayer.isPlaying()) {
            imageViewPauseIndicator.setVisibility(View.VISIBLE);
        }
    }
 }

 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(0, 0, 0, "StartRecording");
    menu.add(0, 0, 0, "StopRecording");
    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case 0:

        if (mediaRecorder == null)
            mediaRecorder = new MediaRecorder(); // Works well

        mediaRecorder.setPreviewDisplay(surfaceHolder.getSurface());

                             mediaRecorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);  
    mediaRecorder.setOutputFile("/sdcard/DCIM/Camera/StreamLive.3gp");
     mediaRecorder.setMaxDuration(-1);
     try {
            mediaRecorder.prepare();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        break;

    case 1:
        mediaRecorder.stop();
        mediaRecorder.release();
        break;

    default:
        break;
    }
    return super.onOptionsItemSelected(item);
}   

      private void playVideo() {
         try {
                        mMediaPlayer.setDataSource(path);
                    } catch (IllegalArgumentException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IllegalStateException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    mMediaPlayer.setDisplay(surfaceHolder);
                    try {
                        mMediaPlayer.prepare();
                    } catch (IllegalStateException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                                    }

    public void surfaceChanged(SurfaceHolder surfaceholder, int i, int j, int k) {
    Log.d(TAG, "surfaceChanged called");

}

public void surfaceDestroyed(SurfaceHolder surfaceholder) {
    Log.d(TAG, "surfaceDestroyed called");
}

public void surfaceCreated(SurfaceHolder holder) {
    Log.d(TAG, "surfaceCreated called");
    playVideo();
}

public void onPrepared(MediaPlayer mediaplayer) {
    Log.i(TAG, "========== onPrepared ===========");
    int duration = mediaplayer.getDuration() / 1000; // duration in seconds
    seekBarProgress.setMax(duration);
    textViewLength.setText(Utils.durationInSecondsToString(duration));
    progressBarWait.setVisibility(View.GONE);

    // Get the dimensions of the video
            int videoWidth = mMediaPlayer.getVideoWidth();
            int videoHeight = mMediaPlayer.getVideoHeight();
            float videoProportion = (float) videoWidth / (float)       videoHeight;
            Log.i(TAG, "VIDEO SIZES: W: " + videoWidth + " H: " +        videoHeight + " PROP: " + videoProportion);

            // Get the width of the screen
            int screenWidth =            getWindowManager().getDefaultDisplay().getWidth();
            int screenHeight =            getWindowManager().getDefaultDisplay().getHeight();
            float screenProportion = (float) screenWidth /     (float)       screenHeight;
            Log.i(TAG, "VIDEO SIZES: W: " + screenWidth + " H: " +     screenHeight + " PROP: " + screenProportion);

            // Get the SurfaceView layout parameters
            android.view.ViewGroup.LayoutParams lp =        surfaceViewFrame.getLayoutParams();

            if (videoProportion > screenProportion) {
                lp.width = screenWidth;
                lp.height = (int) ((float) screenWidth /     videoProportion);
            } else {
                lp.width = (int) (videoProportion * (float)     screenHeight);
                lp.height = screenHeight;
            }

            // Commit the layout parameters
            surfaceViewFrame.setLayoutParams(lp);

            // Start video
            if (!mMediaPlayer.isPlaying()) {
                mMediaPlayer.start();
                updateMediaProgress();
                     linearLayoutMediaController.setVisibility(View.VISIBLE);
                hideMediaController();

            }
            surfaceViewFrame.setClickable(true);
}

public void onCompletion(MediaPlayer mp) {
    Log.d(TAG, "onCompletion called");
    mp.stop();
    if (updateTimer != null) {
        updateTimer.cancel();
    }
     //     mp.seekTo(0);
     //     finish();
}

public void onBufferingUpdate(MediaPlayer mp, int percent) {
    Log.d(TAG, "onBufferingUpdate percent:" + percent);
    int progress = (int) ((float) mp.getDuration() * ((float) percent /        (float) 100));
    seekBarProgress.setSecondaryProgress(progress / 1000);

   } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:02:19.073

问题就像我在 android 上录制流式音频时遇到的问题。您可以尝试编写视频标头（取决于您的视频格式）以在缓冲区更新时流式传输和附加数据。将流刷新到您想要的任何位置。查看如何排练录音机工作。

# android - 什么是 Android ADB shell“dumpsys”工具，它有什么好处？

> ID：11201659
> 
> 赞同：147
> 
> 时间：2012-06-26T06:14:48.087
> 
> 标签：android, shell, adb

我正在寻找 ADB shell`dumpsys`命令的完整列表以及所有命令的完整说明。

我在哪里可以找到这些信息？

* * *

## 回答 #1

> 赞同：254
> 
> 时间：2012-06-26T06:19:44.267

**什么是 dumpsys，它有什么好处**

*dumpsys*是一个在设备上运行并转储有关系统服务状态的有趣信息的 android 工具。

明显的好处：

1.  以简单的字符串表示形式轻松获取系统信息的可能性。
2.  可以将转储的 CPU、RAM、电池、存储统计数据用于漂亮的图表，这将允许您检查您的应用程序如何影响整个设备！

**我们可以从 dumpsys shell 命令中检索哪些信息以及如何使用它**

如果你运行 dumpsys，你会看到大量的系统信息。但是您只能使用这个大转储的单独部分。

要查看 dumpsys 的所有“子命令”，请执行以下操作：

`dumpsys | grep "DUMP OF SERVICE"`

*输出：*

```
DUMP OF SERVICE SurfaceFlinger:
DUMP OF SERVICE accessibility:
DUMP OF SERVICE account:
DUMP OF SERVICE activity:
DUMP OF SERVICE alarm:
DUMP OF SERVICE appwidget:
DUMP OF SERVICE audio:
DUMP OF SERVICE backup:
DUMP OF SERVICE battery:
DUMP OF SERVICE batteryinfo:
DUMP OF SERVICE clipboard:
DUMP OF SERVICE connectivity:
DUMP OF SERVICE content:
DUMP OF SERVICE cpuinfo:
DUMP OF SERVICE device_policy:
DUMP OF SERVICE devicestoragemonitor:
DUMP OF SERVICE diskstats:
DUMP OF SERVICE dropbox:
DUMP OF SERVICE entropy:
DUMP OF SERVICE hardware:
DUMP OF SERVICE input_method:
DUMP OF SERVICE iphonesubinfo:
DUMP OF SERVICE isms:
DUMP OF SERVICE location:
DUMP OF SERVICE media.audio_flinger:
DUMP OF SERVICE media.audio_policy:
DUMP OF SERVICE media.player:
DUMP OF SERVICE meminfo:
DUMP OF SERVICE mount:
DUMP OF SERVICE netstat:
DUMP OF SERVICE network_management:
DUMP OF SERVICE notification:
DUMP OF SERVICE package:
DUMP OF SERVICE permission:
DUMP OF SERVICE phone:
DUMP OF SERVICE power:
DUMP OF SERVICE reboot:
DUMP OF SERVICE screenshot:
DUMP OF SERVICE search:
DUMP OF SERVICE sensor:
DUMP OF SERVICE simphonebook:
DUMP OF SERVICE statusbar:
DUMP OF SERVICE telephony.registry:
DUMP OF SERVICE throttle:
DUMP OF SERVICE usagestats:
DUMP OF SERVICE vibrator:
DUMP OF SERVICE wallpaper:
DUMP OF SERVICE wifi:
DUMP OF SERVICE window: 
```

**一些倾倒示例和输出**

1）获取所有可能的电池统计信息：

```
$~ adb shell dumpsys battery 
```

你会得到输出：

```
Current Battery Service state:
AC powered: false
AC capacity: 500000
USB powered: true
status: 5
health: 2
present: true
level: 100
scale: 100
voltage:4201
temperature: 271 <---------- Battery temperature! %)
technology: Li-poly <---------- Battery technology! %) 
```

2）获取wifi信息

```
~$ adb shell dumpsys wifi 
```

输出：

```
Wi-Fi is enabled
Stay-awake conditions: 3

Internal state:
interface tiwlan0 runState=Running
SSID: XXXXXXX BSSID: xx:xx:xx:xx:xx:xx, MAC: xx:xx:xx:xx:xx:xx, Supplicant state: COMPLETED, RSSI: -60, Link speed: 54, Net ID: 2, security: 0, idStr: null
ipaddr 192.168.1.xxx gateway 192.168.x.x netmask 255.255.255.0 dns1 192.168.x.x dns2 8.8.8.8 DHCP server 192.168.x.x lease 604800 seconds
haveIpAddress=true, obtainingIpAddress=false, scanModeActive=false
lastSignalLevel=2, explicitlyDisabled=false

Latest scan results:

Locks acquired: 28 full, 0 scan
Locks released: 28 full, 0 scan

Locks held: 
```

3) 获取 CPU 信息

```
~$ adb shell dumpsys cpuinfo 
```

输出：

```
Load: 0.08 / 0.4 / 0.64
CPU usage from 42816ms to 34683ms ago:
system_server: 1% = 1% user + 0% kernel / faults: 16 minor
kdebuglog.sh: 0% = 0% user + 0% kernel / faults: 160 minor
tiwlan_wq: 0% = 0% user + 0% kernel
usb_mass_storag: 0% = 0% user + 0% kernel
pvr_workqueue: 0% = 0% user + 0% kernel
+sleep: 0% = 0% user + 0% kernel
+sleep: 0% = 0% user + 0% kernel
TOTAL: 6% = 1% user + 3% kernel + 0% irq 
```

4）获取内存使用信息

```
~$ adb shell dumpsys meminfo 'your apps package name' 
```

输出：

```
** MEMINFO in pid 5527 [com.sec.android.widgetapp.weatherclock] **
                    native   dalvik    other    total
            size:     2868     5767      N/A     8635
       allocated:     2861     2891      N/A     5752
            free:        6     2876      N/A     2882
           (Pss):      532       80     2479     3091
  (shared dirty):      932     2004     6060     8996
    (priv dirty):      512       36     1872     2420

 Objects
           Views:        0        ViewRoots:        0
     AppContexts:        0       Activities:        0
          Assets:        3    AssetManagers:        3
   Local Binders:        2    Proxy Binders:        8
Death Recipients:        0
 OpenSSL Sockets:        0

 SQL
               heap:        0         MEMORY_USED:        0
 PAGECACHE_OVERFLOW:        0         MALLOC_SIZE:        0 
```

如果您想查看所有进程的信息，请使用`~$ adb shell dumpsys meminfo`

![在此处输入图像描述](../Images/eda3b2fd58c22d7aac3510fe37bc7068.png)

**dumpsys**最终是灵活且有用的工具！

如果您想使用此工具，请不要忘记将权限自动添加到您的 android 清单中`android.permission.DUMP`

尝试测试所有命令以了解有关 dumpsys 的更多信息。快乐倾倒！

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-03-02T00:46:39.910

查看[dumpsys](https://android.googlesource.com/platform/frameworks/native/+/master/cmds/dumpsys/)和[service](https://android.googlesource.com/platform/frameworks/base/+/master/cmds/service/)的源代码，您可以通过执行以下命令获取可用服务列表：

```
adb shell service -l 
```

然后，您可以将您感兴趣的服务名称提供给 dumpsys 以获取具体信息。例如（请注意，并非所有服务都提供转储信息）：

```
adb shell dumpsys activity
adb shell dumpsys cpuinfo
adb shell dumpsys battery 
```

正如您在代码中看到的（以及在 K_Anas 的回答中），如果您在没有任何服务名称的情况下调用 dumpsys，它会将所有服务的信息转储到一个大转储中：

```
adb shell dumpsys 
```

如果您提供了参数，某些服务可以接收有关显示内容的附加参数`-h`，例如：

```
adb shell dumpsys activity -h
adb shell dumpsys window -h
adb shell dumpsys meminfo -h
adb shell dumpsys package -h
adb shell dumpsys batteryinfo -h 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-08-02T10:33:02.933

根据有关[*dumpsys*](https://source.android.com/devices/tech/debug/dumpsys.html)[的官方 Android 信息](https://source.android.com/devices/tech/debug/dumpsys.html)*：*

 *dumpsys工具在设备*上*运行并提供有关系统服务状态的信息。

要获取可用服务的列表，请使用

```
adb shell dumpsys -l 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-10T09:39:28.880

我使用**dumpsys**来捕捉应用程序是否崩溃并且进程仍然处于活动状态。我使用它的情况是查找远程机器应用程序是否崩溃。

```
dumpsys | grep myapp | grep "Application Error" 
```

或者

```
adb shell dumpsys | grep myapp | grep Error 
```

或任何有帮助的东西……等等。

如果应用程序没有运行，您将一无所获。当应用程序停止时，Android 会在屏幕上显示一条消息，进程仍然处于活动状态，如果您通过“ **ps** ”命令或其他任何方式进行检查，您将看到进程状态没有显示任何错误或崩溃含义。但是当您单击按钮关闭消息时，应用程序进程将从进程列表中清除。因此很难在应用程序中找到没有任何代码的崩溃状态。但**dumpsys**可以帮助你。*

# azure - Azure InstanceInput 终结点使用情况

> ID：11201660
> 
> 赞同：3
> 
> 时间：2012-06-26T06:14:49.087
> 
> 标签：azure

有人可以发布使用 InstanceInput 端点的示例代码吗？我在工作角色中使用了以下配置，其中示例 WCF 服务在端口 8080 处侦听。

```
<Endpoints>
  <InstanceInputEndpoint name="InstanceAccess" protocol="tcp" localPort="8080">
    <AllocatePublicPortFrom>
      <FixedPortRange max="10105" min="10101" />
    </AllocatePublicPortFrom>
  </InstanceInputEndpoint>
</Endpoints> 
```

但是我无法使用端口 10101 到 10105 中的任何一个从外部使用者访问此 WCF 服务。我们是否应该使用 Azure 服务的公共 DNS 名称以及给定范围内的公共端口？

此外，我无法从辅助角色 OnStart() 方法中访问此端点详细信息。我使用了 RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["InstanceAccess"]。但它不返回 RoleInstanceEndpoint。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:26:20.467

[这](http://sdrv.ms/MTIzL2)是一个示例 Visual Studio 解决方案，它使用 Azure InstanceInput 端点并在辅助角色上托管 WCF 服务。可以使用 Azure DNS 名称和映射到该实例的公共端口访问在每个单独实例上运行的 WCF 服务。我使用了以下端点配置。

```
 <Endpoints>
      <InstanceInputEndpoint name="Endpoint1" protocol="tcp" localPort="10100">
        <AllocatePublicPortFrom>
          <FixedPortRange max="10110" min="10106" />
        </AllocatePublicPortFrom>
      </InstanceInputEndpoint>
    </Endpoints> 
```

不知何故，无法从 WorkerRole（OnStart() 和 Run() 方法）内访问此端点。所以我使用了'localhost'。

```
 string endpointIP = "localhost:10100";

  if (RoleEnvironment.CurrentRoleInstance.InstanceEndpoints.Keys.Contains("Endpoint1"))
  {
      IPEndPoint externalEndPoint = RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["Endpoint1"].IPEndpoint;
      endpointIP = externalEndPoint.ToString();
  } 
```

该解决方案还包含一个控制台客户端，它使用托管的 DNS 名称来调用这些单独的 WCF 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-04T08:04:41.730

InstanceInput 端点不在本地工作，但一旦部署它就可以正常工作并为每个实例分配不同的端口，根据允许创建实例的端口范围，您不能创建超过配置中指定端口范围的实例。例如，端口范围是 101 - 105 你只能创建 5 个实例

# multithreading - WCF 服务和 COM 互操作回调

> ID：11201663
> 
> 赞同：0
> 
> 时间：2012-06-26T06:15:06.933
> 
> 标签：multithreading, wcf, com, interop, mta

我有一个 COM 对象，它创建 WCF 服务的实例并将句柄作为回调传递给自身。COM 对象被标记/初始化为[MTA](https://en.wikipedia.org/wiki/Component_Object_Model#Threading)。

问题是调用回调的 WCF 服务的每个实例都发生在同一个线程上，因此它们一次被处理一个，这导致在重负载下会话超时。WCF 服务是基于会话的，我不确定这是否有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:25:33.240

`CallbackBehavior`您可以使用属性装饰回调实现并将其设置`ConcurrencyMode`为`ConcurrencyMode.Multiple`. 默认设置是`ConcurrencyMode.Single`一次限制为一个服务回调。当然，如果你这样做，你必须确保你的回调实现是线程安全的。

# linux - JsTestDriver 火狐浏览器崩溃

> ID：11201664
> 
> 赞同：0
> 
> 时间：2012-06-26T06:15:09.913
> 
> 标签：linux, firefox, crash, js-test-driver

我刚开始使用 JsTestDriver，我创建了非常简单的演示代码来查看我是否正确配置了我的环境。然而，当 Firefox 启动（通过 JsTestDriver）“Firefox 启动时意外关闭”时，大约 40-50% 的时间我会收到以下错误。

如果我使用 Chrome，则**不会**出现此错误。

我的环境包括：

*   VirtualBox 4.1.18 运行 Ubuntu 10.04.4 LTS 32bit
*   火狐 13.0.1
*   JsTestDriver-1.3.4.b
*   openjdk-6-jre-headless

我正在执行：

`java -jar /home/developer/bin/JsTestDriver.jar --port 9876 --browser /usr/bin/firefox --tests all --testOutput results`

我的 JsTestDriver 配置是：

```
server: http://localhost:9876

load:
  - src/*.js

test:
  - test/*.js

timeout: 10 
```

源代码（正在测试的代码）是：

```
Person = function()
{
    this.firstName = "";
    this.lastName = "";

    this.fullName = function()
    {
        if((this.firstName != "") && (this.lastName != ""))
        {
            return this.lastName + ", " + this.firstName;
        }

        var name = this.firstName + " " + this.lastName;
        return name.trim();
    }
}; 
```

测试代码（基于 JsTestDriver 的代码）是：

```
PersonTest = TestCase("PersonTest");

PersonTest.prototype.testFullName = function()
{
    fixture = new Person();
    fixture.firstName = "John";
    fixture.lastName = "Doe";

    assertEquals("Doe, John", fixture.fullName());
};

PersonTest.prototype.testFullName_FirstNameOnly = function()
{
    fixture = new Person();
    fixture.firstName = "John";

    assertEquals("John", fixture.fullName());
};

PersonTest.prototype.testFullName_LastNameOnly = function()
{
    fixture = new Person();
    fixture.lastName = "Doe"

    assertEquals("Doe", fixture.fullName());
}; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T01:38:49.783

*您的问题可能在于每次*运行测试时都在打开浏览器打开服务器。我认为一个不太容易出错的解决方案是启动您的服务器并让它捕获一些浏览器，然后让它运行。然后，您可以根据需要对该服务器运行测试。我们的工作解决方案涉及三个始终运行 IE7、IE8、IE9、Firefox 和 Chrome 的虚拟机，我们的 Maven 构建过程在每次构建时运行我们的 javascript 单元测试。此外，请确保您也始终使用“--reset”参数。它将使您的浏览器保持新鲜。我写了一篇文章，展示了如何将 QUnit、Requirejs 和代码覆盖与独立于 Maven 的 JSTD 集成：[js-test-driver+qunit+coverage+requirejs](http://pseudobry.com/js-test-driver-qunit-coverage-requirejs/)。希望能帮助到你。

# php - 使用 SSL 证书问题？

> ID：11201673
> 
> 赞同：0
> 
> 时间：2012-06-26T06:15:42.907
> 
> 标签：php, ssl, https, hosting

我的主机帐户有两个文件夹供我上传/​​安装网站到：

1.  /httpdocs/
2.  /httpsdocs/

我已经将 phpMyDirectory 安装到 /httpdocs/ 并且一切正常。此后，我购买了 SSL 证书，并且我的虚拟主机已在我的域中为我安装了此证书。当我在 default.php （设置文件）中插入 SSL 的基本 URL 时，出现了我的问题：

```
$BASE_URL_SSL = 'https://www.mydomain.com'; 
```

我意识到问题是我的网站没有安装在我的主机帐户的 HTTPS 安全目录中。我应该将内容从 /httpdocs/ 复制到 /httpsdocs/ 还是应该只在 /httpsdocs/ 目录中进行全新安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:20:41.863

标准解决方案是

1.  [将必要的目录/文件符号链接](http://en.wikipedia.org/wiki/Symlink)到 https 目录，或者
2.  使用 .htaccess 规则从 https 目录重写到 http 目录。

使用哪个取决于您的主机为您提供的可能性。

# python - 获取模型的组合信息及其另一个模型的“主键侧”的最有效方法是什么？

> ID：11201676
> 
> 赞同：0
> 
> 时间：2012-06-26T06:15:58.990
> 
> 标签：python, django, django-models, django-views

我正在处理 django 用户模型的“扩展”模型。这是我模型的定义：

```
class UserProfile(models.Model):

    user = models.ForeignKey(User, unique=True, editable=False)
    real_name = models.CharField('Real Name', max_length=20)
    telephone = models.CharField('Tel', max_length=30)
    company = models.CharField('Company', max_length=30)
    department = models.CharField('Department', max_length=30) 
```

如您所见，我的 UserProfile 模型通过“ForeignKey”与 django 的内置用户模型具有“一对一”关系，我知道另一个 solotion 正在使用“OneToOneField”，有人可以告诉我哪个一个是首选还是更适合这里？

现在，我的情况是，我在视图函数中获取了我的 UserProfile 模型和 django 内置 User 模型的组合信息。另外，我需要在这里做一些分页。

```
def get_user_list(request):
    rows_per_page=int(request.POST["rows"])
    page_number=int(request.POST["page"])
    user_list = User.objects.all()# You can see that I only got the built-in User ,
    total=user_list.count()       #but how to get my UserProfile efficiently ?

    paginator = Paginator(user_list, rows_per_page)

    try:
        rows = paginator.page(page_number)
    except PageNotAnInteger:

        rows = paginator.page(1)
    except EmptyPage:

        rows = paginator.page(paginator.num_pages)

    result={
        "total":total,
        "rows":rows.object_list,
        }

    jsonSerializer = JSONSerializer()
    return HttpResponse(jsonSerializer.serialize(result),mimetype='application/json') 
```

现在，我的问题是，如何组合我的 UserProile 模型和内置的 User 模型来制作查询集、列表、字典或其他任何东西，我还需要组合对象以适合我现有的分页代码。:)非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:29:55.180

您应该阅读django 文档[中跨越关系的查找](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)作为入门，然后[向后跟踪关系](https://docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward)以了解如何正确查询对象：

> 如果模型具有 ForeignKey，则外键模型的实例将有权访问返回第一个模型的所有实例的 Manager。默认情况下，这个 Manager 被命名为 FOO_set，其中 FOO 是源模型名称，小写。此管理器返回查询集，可以按照上面“检索对象”部分中的说明进行过滤和操作。

因此，每个`user`对象都与其所有对象具有反向关系`profile`，在一个名为的管理器中`userprofile_set`：

```
u = User.objects.get(pk=1)
user_profile = u.userprofile_set.all() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T14:43:26.250

推荐的解决方案是使用`OneToOneField`AUTH_PROFILE_MODULE 并且`user.get_profile()`如此处所述：[https ://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-user](https://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-user)

# java - 集成 JSF 和 XMPP

> ID：11201679
> 
> 赞同：0
> 
> 时间：2012-06-26T06:16:11.293
> 
> 标签：java, jsf, xmpp

我想在我的 JSF 应用程序中添加额外的功能，用于向我公司的聊天用户发送消息。为了开发这个项目，我使用 NetBeans v7.1、GlassFish v3.1.1 和 Smack API 3.2.2。在我的 Web 应用程序中，我创建了 CDI ApplicationScoped bean 来管理 XMPP 连接。

```
@Named("xmpp")
@ApplicationScoped    
public class XMPPBean implements Serializable {

    private org.apache.log4j.Logger loggerErr = org.apache.log4j.Logger.getLogger("err");

    private XMPPConnection connection = null;

    private String chatHostName = "localhost";
    private int chatport = 5222;
    private String userName = "testuser";
    private String userPass = "12345678";

    public void connect(){       

        ConnectionConfiguration config = new ConnectionConfiguration(chatHostName, chatport);
        connection = new XMPPConnection(config);
        try {            
            connection.connect();            
            connection.login(userName, userPass);            
        } catch (XMPPException e) {            
            loggerErr.error(e.getMessage(), e);            
        }
    }

    public void sendMessage(){

        ChatManager chatmanager = connection.getChatManager();
        Chat newChat = chatmanager.createChat("anotheruser@127.0.0.1", new MessageListener() {
            @Override
            public void processMessage(Chat chat, Message message) {
                System.out.println("Received message: " + " "+message.toXML());
            }
        });

        try {
            newChat.sendMessage("Howdy!");
        } catch (XMPPException e) {
            System.out.println("Error Delivering block");
        }
    }    

    public void disconnect() {
        connection.disconnect();
    }

    public boolean chackConnection(){                
        return connection==null?false:connection.isConnected();
    }

    public String getLoggedinUser() {        
        if (connection == null )
            return "";                
        return connection.getUser();                   
    }       

} 
```

一切正常。我可以连接到 XMPP 服务器，发送和接收消息。但是在我的服务器日志中，我会定期看到异常：

```
SEVERE: java.lang.NullPointerException
    at org.xmlpull.mxp1.MXParser.isNameStartChar(MXParser.java:3157)
    at org.xmlpull.mxp1.MXParser.nextImpl(MXParser.java:1253)
    at org.xmlpull.mxp1.MXParser.next(MXParser.java:1093)
    at org.jivesoftware.smack.PacketReader.parsePackets(PacketReader.java:325)
    at org.jivesoftware.smack.PacketReader.access$000(PacketReader.java:43)
    at org.jivesoftware.smack.PacketReader$1.run(PacketReader.java:70)

SEVERE:     at org.xmlpull.mxp1.MXParser.isNameStartChar(MXParser.java:3157)
SEVERE:     at org.xmlpull.mxp1.MXParser.nextImpl(MXParser.java:1253)
SEVERE:     at org.xmlpull.mxp1.MXParser.next(MXParser.java:1093)
SEVERE:     at org.jivesoftware.smack.PacketReader.parsePackets(PacketReader.java:325)
SEVERE:     at org.jivesoftware.smack.PacketReader.access$000(PacketReader.java:43)
SEVERE:     at org.jivesoftware.smack.PacketReader$1.run(PacketReader.java:70)
SEVERE: java.lang.NullPointerException
    at org.jivesoftware.smackx.commands.AdHocCommandManager$4.connectionClosedOnError(AdHocCommandManager.java:268)
    at org.jivesoftware.smack.PacketReader.notifyConnectionError(PacketReader.java:172)
    at org.jivesoftware.smack.PacketReader.parsePackets(PacketReader.java:332)
    at org.jivesoftware.smack.PacketReader.access$000(PacketReader.java:43)
    at org.jivesoftware.smack.PacketReader$1.run(PacketReader.java:70)

SEVERE:     at org.jivesoftware.smackx.commands.AdHocCommandManager$4.connectionClosedOnError(AdHocCommandManager.java:268)
SEVERE:     at org.jivesoftware.smack.PacketReader.notifyConnectionError(PacketReader.java:172)
SEVERE:     at org.jivesoftware.smack.PacketReader.parsePackets(PacketReader.java:332)
SEVERE:     at org.jivesoftware.smack.PacketReader.access$000(PacketReader.java:43)
SEVERE:     at org.jivesoftware.smack.PacketReader$1.run(PacketReader.java:70) 
```

此异常出现在调用 XMPP 函数后或每隔 10-15 秒定期出现。这是什么错误以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:27:03.840

只是不要忘记断开会话。

检查你的 jabber 连接是否总是在重新部署战争包时断开。

# javascript - 在 Rails 3 和 ruby 1.9.3 中调用 ajax 后无法呈现 html

> ID：11201681
> 
> 赞同：0
> 
> 时间：2012-06-26T06:16:13.837
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

我正在使用 filedrop.js 上传图像。application.js 文件中的代码如下所示：-

```
 $(".droparea").each(function(event){
  var game_id = $(this).attr('id')
  $(this).filedrop({
  maxfilezsize: 5,
  maxfiles: 1,
  dataType: "script",
  paraname :"custom_game[file]"
  url: "/game_plans/'+$(".dropbox").attr("rel")+'/games/'+game_id+/upload_file.js"
  })
 } 
```

这部分工作正常。我正在使用适当的参数进行适当的操作。

```
def upload_file
  # NOTE Upload_file action has been explicity written for the file upload using drag and drop
  @custom_game = CustomGame.find_or_initialize_by_id(params[:id])
  @game_plan = GamePlan.find(params[:game_plan_id])
  @custom_game.update_attributes(params[:custom_game])
  respond_to do |format|
    format.js
  end
end 
```

上传文件.js.erb：

```
$("#<%=  @custom_game%>_file").html(<%= @custom_game.file%>); 
```

但是鉴于相应的操作，即 upload_file.js.erb 我无法执行任何 javascript 命令，而 ruby​​ 命令工作正常。并且在日志中还说部分已成功渲染。

我的日志显示：-

```
(101.8ms)  COMMIT
Rendered activities/upload_file.js.erb (0.6ms)
Completed 200 OK in 379ms (Views: 10.8ms | ActiveRecord: 106.9ms) 
```

我不知道我在哪里犯了错误。upload_file.js.erb 中没有执行 jquery 命令，但 ruby​​ 命令工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:26:00.147

```
$("#<%=  @custom_game%>_file").html(<%= @custom_game.file%>); 
```

`<%= @custom_game %>`返回 CustomGame 对象，我认为您应该在其中使用 @custom_game.title 或其他东西。jQuery 找不到 $("#<#CustomGame:834793746>_file") 所以 html 没有被替换。

您可能想在控制台中尝试 javascript 以检查它是否手动执行（我自己使用 chrome 的开发工具）

# html - 高级下拉菜单未与页面中间对齐

> ID：11201682
> 
> 赞同：0
> 
> 时间：2012-06-26T06:16:20.803
> 
> 标签：html, css, menu, drop-down-menu

基本上我有一个下拉菜单，它没有与页面中间对齐，如下所示......这很烦人，因为我已经尝试了我所知道的一切。我想把它保存在 HTML 和 CSS 中，因为这部分我不使用 JavaScript 或 JQuery 来做。

**CSS 代码：**

```
<style type="text/css">
/* TOP MENU DROP DOWN */
#menu li {
    color: #222222;
}
#mega {
list-style:none;
font-weight:bold;
}
#mega li {
    float:left;
    clear:right;
    padding-left: 15px;
}
#mega li div div {
    float:none;
    clear:both;
}
#mega li:hover {
border-bottom:0;
z-index:1;
    position:center;
}
#mega a {
color:#000;
text-decoration:none;
}
#mega a:hover {
    color:#077fcc;
}

#mega div {
    left:-999em;
}
#mega li:hover div {
    position:center;
    display:block;
    left:0;
}
a:hover, #mega div a:focus, #mega div a:active {
    text-decoration:none;
}
.popup {
    position:fixed;
    width:100%;
    height:300px;
    text-align:center;
    vertical-align:middle;
    background-image:url(img/dropdownbg.gif);
    background-repeat:no-repeat;
    background-position:center;
}
.popup-mid {
    text-align:left;
    position:center;
    height:100%;
    width:950px;
}

/* TOP INSIDE*/

#top-dropbg {
    width:100%;
    height:300px;
}
.drop-box {
    margin:30px 15px;
    height:240px;
}
.drop-sec1 {
    float:left;
    clear:right;
    height:240px;
    width:70%;
}
.drop-sec1-1 {
    width:100%;
    height:20px;
}
.drop-sec1-2 {
    float:left;
    clear:right;
    width:25%;
    height:95px;
}
.drop-sec1-3 {
    width:100%;
    height:5px;
    float:left;
    clear:left;
    border-bottom:1px dotted #CCC;
}
.drop-sec2 {
    float:left;
    clear:right;
    height:240px;
    width:1%;
    margin-right:1%;
    border-right:1px solid #CCC;
}
.drop-sec3 {
    float:left;
    clear:right;
    height:240px;
    width:25%;
}
/* END TOP MENU */

h1 {
    color:#858585;
    font-size:14px;
}
h2{
    color:#333333;
    font-size:24px;
}
p {
    color:#333333;
    font-size:14px;
}
</style> 
```

**HTML 代码：**

```
 <div class="navtop">
                <div id="menu">
                    <ul id="mega">
                        <li><a href="#">Bookings</a>
                            <div class="popup">
                            <div class="popup-mid">
                            <span id="top-dropbg">
                                <span class="drop-box">
                                    <span class="drop-sec1">
        <span class="drop-sec1-1"><h2>Our Services</h2></span>
        <span class="drop-sec1-2"><h1>Vehicles for Every Pocket</h1><p>Lorem ipsum etiam at risus et justo dignissim congue donec congue.</p></span>
        <span class="drop-sec1-2"><h1>Vehicles for Every Pocket</h1><p>Lorem ipsum etiam at risus et justo dignissim congue donec congue.</p></span>
        <span class="drop-sec1-2"><h1>Vehicles for Every Pocket</h1><p>Lorem ipsum etiam at risus et justo dignissim congue donec congue.</p></span>
        <span class="drop-sec1-2"><h1>Vehicles for Every Pocket</h1><p>Lorem ipsum etiam at risus et justo dignissim congue donec congue.</p></span>
        <span class="drop-sec1-3"></span>
        <span class="drop-sec1-2"><h1>Vehicles for Every Pocket</h1><p>Lorem ipsum etiam at risus et justo dignissim congue donec congue.</p></span>
        <span class="drop-sec1-2"><h1>Vehicles for Every Pocket</h1><p>Lorem ipsum etiam at risus et justo dignissim congue donec congue.</p></span>
        <span class="drop-sec1-2"><h1>Vehicles for Every Pocket</h1><p>Lorem ipsum etiam at risus et justo dignissim congue donec congue.</p></span>
        <span class="drop-sec1-2"><h1>Vehicles for Every Pocket</h1><p>Lorem ipsum etiam at risus et justo dignissim congue donec congue.</p></span>
                                    </span>
                                    <span class="drop-sec2">
                                    </span>
                                    <span class="drop-sec3">
        <span class="drop-sec3-1"><h1>Membership and Reward Schemes</h1><p>Lorem ipsum etiam at risus et justo dignissim congue donec congue lacinia dui.</p></span>
                                    </span>
</span>
</span>
                            </div>
                            </div>
                        </li>
                        <li><a href="#">Explore Our Fleet</a>
                            <div class="popup">
                            <div class="popup-mid">
                            2
                            </div>
                            </div>
                        </li>
                        <li><a href="#">Rental Locator</a>
                            <div class="popup">
                            <div class="popup-mid">
                            3
                            </div>
                            </div>
                        </li>
                        <li><a href="#">Services</a>
                            <div class="popup">
                            <div class="popup-mid">
                            4
                            </div>
                            </div>
                        </li>
                        <li><a href="#">Partners</a>
                            <div class="popup">
                            <div class="popup-mid">
                            5
                            </div>
                            </div>
                        </li>
                        <li><a href="#">Specials</a>
                            <div class="popup">
                            <div class="popup-mid">
                            6
                            </div>
                            </div>
                        </li>
                        <li><a href="#">Bluechip</a>
                            <div class="popup">
                            <div class="popup-mid">
                            7
                            </div>
                            </div>
                        </li>
                    </ul>
                </div>
        </div> 
```

提前谢谢大家:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:11:22.890

添加风格

```
body
{ 
text-align: center; /* !!! */
 margin: 0 auto;
padding: 0;
width:100%;
} 
```

并改变这个

```
#mega li {
float:left;
clear:right;
padding-left: 15px;
} 
```

到

```
#mega li {
display:inline;
clear:right;
padding-left: 15px;
} 
```

# php - mysql_fetch_array 回显到 json

> ID：11201685
> 
> 赞同：3
> 
> 时间：2012-06-26T06:16:41.500
> 
> 标签：php, json

我试图弄清楚如何输出我的 php 以回显我的 json 文件。

```
<?php
$sql_query = "SELECT * FROM some_data";
$result = mysql_query($sql_query);
$total_rows = mysql_num_rows($result);
$dataList_desc = '';
$dataList_view = '';
    while($row = mysql_fetch_array($result)) {
            $video_desc = $row["video_desc"];
            $video_views = $row["video_views"];
            $dataList_desc .= '' . $video_desc . '';
            $dataList_view .= '' . $video_views . '';
            echo "[[\" \", \"" . $dataList_desc . "\",],[\" \", \"" . $dataList_view . "\",]";

    }
  mysql_close($con);
?> 
```

我的输出是：

```
[[" ", "Title 1",],[" ", "1000",][[" ", "Title 1Title 2",],[" ", "1000906",][[" ", "Title 1Title 2Title 3",],[" ", "10009061150",][[" ", "Title 1Title 2Title 3Title 4",],[" ", "100090611501800",][[" ", "Title 1Title 2Title 3Title 4Title 5",],[" ", "100090611501800756",][[" ", "Title 1Title 2Title 3Title 4Title 5Title 6",],[" ", "100090611501800756558",] 
```

我需要的是：

```
[["", "Title 1", "Title 2", "Title 3", "Title 4", "Title 5", "Title 6"],["", 1000, 903, 1150, 1800, 756, 558]] 
```

请帮忙。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T06:23:25.443

```
$desc = array(); $views = array();
while($row = mysql_fetch_array($result)) {
        $desc[] = $row["video_desc"]; // or smth like $row["video_title"] for title
        $views[] = $row["video_views"];
}
$res = array($desc, $views);
echo json_encode($res); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-26T06:22:53.580

不要创建自己的 JSON！用于对*数组*`json_encode`进行编码。

 *```
$data = array();
while ($row = mysql_fetch_assoc($result)) {

    ... maybe some processing of $row here ...

    $data[] = $row;
}

echo json_encode($data); 
```*

# sql - 我希望 SQLplus count(*) 返回零值

> ID：11201686
> 
> 赞同：0
> 
> 时间：2012-06-26T06:16:41.870
> 
> 标签：sql, count

我正在使用 Oracle 10.2 并有以下查询：

```
 select h.company, count(*)  
    from history h 
    where h.status = '2'  
    and h.substatus = '0'  
    and h.timestamp > '2012-01-01'  
    and h.timestamp < '2012-02-01'  
    group by h.company
    having (h.company = 'AAA')  
    or (h.company = 'BBB')  
    or (h.company = 'CCC')  
    order by h.company 
```

这将计算来自 AAA、BBB 或 CCC 公司的任何客户达到特定点（状态 = 2）的次数。
假设 BBB 没有（零）客户这样做，结果将返回 2 行计数（AAA 和 CCC）。

我想要什么：我希望查询返回所有 3 家公司的行，即使计数为零。

很抱歉查询的奇怪布局。它也适用于 MS Excel。

编辑：对不起.. 咖啡因太少了。将查询后半部分的“客户”更改为“公司”。

澄清：通过组合“h.company”和“h.customer”（或在客户表（客户c）中使用相同的方法，如“c.company”和“c.customer”，使客户成为唯一的客户

编辑 2：更新的代码。

```
 select c.company, count(*)
    from companyregister c
    left join history h on h.company = c.company
    where h.status = '2'
    and h.substatus = '0'
    and h.timestamp > '2012-01-01'
    and h.timestamp < '2012-02-01'
    group by c.company
    having (c.company = 'AAA')
    or (c.company = 'BBB')
    or (c.company = 'CCC')
    order by c.company 
```

上面的两组代码将产生如下两行：AAA 630 CCC 3020

我想代表 BBB，但由于它们在历史记录中的行数为零，因此它们不会显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:31:07.323

在客户表上进行左连接。我不知道你给它起什么名字，但是像这样：

```
select c.company, count(h.customer)
from customer as  c
left join history as h on h.customer = c.customer
... 
```

另一种选择是在计数时使用条件。我不确定您是否需要任何其他条件以及状态，但类似这样的东西：

```
select company, sum(case status when '2' then 1 else 0 end)  
from history
where substatus = '0'
and timestamp > '2012-01-01'
and timestamp < '2012-02-01'
and customer in ('AAA', 'BBB', 'CCC')
group by customer  
order by customer 
```

# c# - comboBox1.Items.Add ..Collection？

> ID：11201687
> 
> 赞同：0
> 
> 时间：2012-06-26T06:16:54.530
> 
> 标签：c#, combobox

我有一个带有自动完成功能的文本框，我想获取它的集合并填充一个组合框项目？

我想让我的组合框项目成为集合，目前在我的下拉列表中它只是说（集合）所以我如何用集合而不只是单词来填充它。

```
comboBox1.Items.Add(DatabaseService.Instance.AutoComplete("AuditIT", "AutoComplete", paramListAutoCom)); 
```

**这是我填充集合的方法：**

```
public AutoCompleteStringCollection AutoComplete(string dataBase, string procedure, SqlParameter[] parameters)
            {
                try
                {
                   String SearchAt = parameters[2].Value.ToString();
                    if (dataBase.Length > 0) { procedure = dataBase + ".." + procedure; } //Set procedure to DBNAME..ProcedureName
                    AutoCompleteStringCollection namesCollection =
                  new AutoCompleteStringCollection();

                    SqlDataReader dReader;
                    SqlCommand cmd = new SqlCommand(procedure, con);
                    cmd.CommandType = CommandType.StoredProcedure;
                    foreach (SqlParameter p in parameters)
                    {
                        if (p != null)
                        {
                            cmd.Parameters.Add(p);
                        }
                    }
                    con.Open();
                    dReader = cmd.ExecuteReader();
                    if (dReader.HasRows == true)
                    {
                        while (dReader.Read())
                            //namesCollection.Add(dReader["SystemUser"].ToString());
                            namesCollection.Add(dReader[SearchAt].ToString());
                    }
                    con.Close();
                    dReader.Close();
                    return namesCollection;
                }
                catch (Exception ex)
                {

                    MessageBox.Show("" + ex);
                    return null;
                }
            } 
```

如果您需要其他任何东西，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:48:54.140

```
AutoCompleteStringCollection Collection = DatabaseService.Instance.AutoComplete("AuditIT", "AutoComplete", paramListAutoCom);
           foreach (String Item in Collection)
           {
               comboBox1.Items.Add(Item);
           } 
```

# java - 结果集到 Excel 文件

> ID：11201691
> 
> 赞同：4
> 
> 时间：2012-06-26T06:17:16.177
> 
> 标签：java, excel, resultset

有`CSVWriter`将结果集写入 CSV 文件的类。

是否有任何类似的类用于将结果集输出写入`EXCEL`文件。？？

编辑：我的结果集数据将是动态的，所以我只想将结果集数据转储到 excel 文件中

Edit2：参考[http://www.codereye.com/2009/09/converting-resultset-to-excel-table-in.html](http://www.codereye.com/2009/09/converting-resultset-to-excel-table-in.html)。它将数据导出到 excel 表，但我需要传递每列的数据类型。我想删除该依赖项，以便结果集中的任何内容都应该盲目地导出到 excelsheet。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:55:14.433

[http://www.codereye.com/2009/09/converting-resultset-to-excel-table-in.html](http://www.codereye.com/2009/09/converting-resultset-to-excel-table-in.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:55:23.230

我最近使用[了 OpenCSV](http://opencsv.sourceforge.net/)，对我来说效果很好。在这里，例如，如何将 a 写入`ResultSet`CSV 文件：

```
java.sql.ResultSet myResultSet = ...

writer.writeAll(myResultSet, includeHeaders); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-18T18:00:11.747

我无法使用链接的示例，所以我使用 OpenCSV 中的方法作为基础来解析 SQL 表。

```
public class ResultSetToExcel {

public static final int CLOBBUFFERSIZE = 2048;

public void toXLS(ResultSet rs, WritableSheet sheet) throws SQLException, IOException, RowsExceededException, WriteException{

    List<String> header = getColumnNames(rs);

    Integer i=0;

    for(String headCell : header){
        sheet.addCell(new Label(i,0,headCell));
        i++;
    }

    int index = 1;

    while(rs.next()){

        List<String> rowValues = getColumnValues(rs);

        int j=0;

        for(String value: rowValues){
            sheet.addCell(new Label(j,index,value));
            j++;
        }

        index++;
    }
}

public List<String> getColumnNames(ResultSet rs) throws SQLException {
    List<String> names = new ArrayList<String>();
    ResultSetMetaData metadata = rs.getMetaData();

    for (int i = 0; i < metadata.getColumnCount(); i++) {
        names.add(metadata.getColumnName(i+1));
    }

    return names;
}

public List<String> getColumnValues(ResultSet rs) throws SQLException, IOException{

    List<String> values = new ArrayList<String>();
    ResultSetMetaData metadata = rs.getMetaData();

    for (int i = 0; i < metadata.getColumnCount(); i++) {
        values.add(getColumnValue(rs, metadata.getColumnType(i + 1), i + 1));
    }

    return values;
}

private String handleObject(Object obj){
    return obj == null ? "" : String.valueOf(obj);
}

private String handleBigDecimal(BigDecimal decimal) {
    return decimal == null ? "" : decimal.toString();
}

private String handleLong(ResultSet rs, int columnIndex) throws SQLException {
    long lv = rs.getLong(columnIndex);
    return rs.wasNull() ? "" : Long.toString(lv);
}

private String handleInteger(ResultSet rs, int columnIndex) throws SQLException {
    int i = rs.getInt(columnIndex);
    return rs.wasNull() ? "" : Integer.toString(i);
}

private String handleDate(ResultSet rs, int columnIndex) throws SQLException {
    try {

        if(rs.getString(columnIndex) != null){
            SimpleDateFormat formatter = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
            Date fecha = new Date( formatter.parse(rs.getString(columnIndex)).getTime());
            return formatter.format(fecha);
        }
        else
            return "";
    } catch (ParseException e) {
        throw new SQLException("Fecha erronea o faltante");
    }
}

private String handleTime(Time time) {
    return time == null ? null : time.toString();
}

private String handleTimestamp(Timestamp timestamp) {
    SimpleDateFormat timeFormat = new SimpleDateFormat("dd-MMM-yyyy HH:mm:ss");
    return timestamp == null ? null : timeFormat.format(timestamp);
}

private String getColumnValue(ResultSet rs, int colType, int colIndex)
        throws SQLException, IOException {

    String value = "";

    switch (colType){

        case Types.BIT:
        case Types.JAVA_OBJECT:
            value = handleObject(rs.getObject(colIndex));
            break;
        case Types.BOOLEAN:
            boolean b = rs.getBoolean(colIndex);
            value = Boolean.valueOf(b).toString();
            break;
        case Types.NCLOB: // todo : use rs.getNClob
        case Types.CLOB:
            Clob c = rs.getClob(colIndex);
            if (c != null) {
                value = read(c);
            }
            break;
        case Types.BIGINT:
            value = handleLong(rs, colIndex);
            break;
        case Types.DECIMAL:
        case Types.DOUBLE:
        case Types.FLOAT:
        case Types.REAL:
        case Types.NUMERIC:
            value = handleBigDecimal(rs.getBigDecimal(colIndex));
            break;
        case Types.INTEGER:
        case Types.TINYINT:
        case Types.SMALLINT:
            value = handleInteger(rs, colIndex);
            break;
        case Types.DATE:
            value = handleDate(rs, colIndex);
            break;
        case Types.TIME:
            value = handleTime(rs.getTime(colIndex));
            break;
        case Types.TIMESTAMP:
            value = handleTimestamp(rs.getTimestamp(colIndex));
            break;
        case Types.NVARCHAR: // todo : use rs.getNString
        case Types.NCHAR: // todo : use rs.getNString
        case Types.LONGNVARCHAR: // todo : use rs.getNString
        case Types.LONGVARCHAR:
        case Types.VARCHAR:
        case Types.CHAR:
            value = rs.getString(colIndex);
            break;
        default:
            value = "";
    }

    if (value == null){
        value = "";
    }

    return value;

}

private static String read(Clob c) throws SQLException, IOException
{
    StringBuilder sb = new StringBuilder( (int) c.length());
    Reader r = c.getCharacterStream();
    char[] cbuf = new char[CLOBBUFFERSIZE];
    int n;
    while ((n = r.read(cbuf, 0, cbuf.length)) != -1) {
            sb.append(cbuf, 0, n);
    }
    return sb.toString();
} 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T06:25:48.283

[您可以使用Apache POI Jars](http://poi.apache.org/)从结果中获取数据并写入 excel 文件。

# c# - 下拉列表和类别子类别

> ID：11201700
> 
> 赞同：0
> 
> 时间：2012-06-26T06:18:07.710
> 
> 标签：c#, asp.net, drop-down-menu

我试图将无限类别加载到下拉列表，但我失败了。

```
**Categories**
ID, MainCategoryID, CatName, Description, dateCreated, isActive
1, 0, Cars, "blabla", 26.06.2012, True
2, 1, Ferrari, "blabla", 26.06.2012, True
3, 1, Lamborgini, "blabla", 26.06.2012, True
4, 2, F-40, "blabla", 26.06.2012, True
5, 2, F-50, "blabla", 26.06.2012, True
6, 0, Motorbikes, "blabla", 26.06.2012, True

- MainCategory
  -- SubCategory1
  -- SubCategory2
     -- SubSubCategory1
- MainCategory
- MainCategory
  -- SubCategory3
     -- SubSub .. so on 
```

是否可以在下拉列表控件中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:34:13.600

这绝对是可能的。你只需要一点**递归**。可以在您的 sql 查询本身中完成。

如果您使用的是 sql server，您可以使用[公用表表达式实现递归](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)

如果您对此感到困惑，请发表评论，我将编写查询向您展示。

```
WITH cat(ord,lev, id, mainID, catName) AS
(
    SELECT ID*POWER(100, 3) AS ord, 1 AS lev, ID, MainCategoryID,CatName FROM test WHERE MainCategoryID =0
    UNION ALL 
    SELECT cat.ord + test.ID * POWER(100, 3-lev) AS ord,lev+1 AS lev, test.ID, test.MainCategoryID, test.CatName AS CatName FROM test INNER JOIN cat ON test.MainCategoryID = cat.ID
)
SELECT * FROM cat ORDER BY ord 
```

lev 列为您提供行的级别。ord 列用于订购您的物品。此示例最多允许 100 个 id 和 3 个级别。

虽然我在这里订购了数据，但最好在 c# 中完成，在那里使用递归。

# php - 选择不等于关联数组键的多个值的地方

> ID：11201705
> 
> 赞同：5
> 
> 时间：2012-06-26T06:18:34.433
> 
> 标签：php, mysql, select, associative-array

我做了三张桌子。

**Table1=users**。列名是**userid** (auto_increment) 和**username**。
**表2=爱好**。列名是**hobbyid** (auto_increment) 和**hobbyname**。
**表 3=users_hobbies**。列名是 FK_userid 和 FK_hobbyid。

现在**的爱好**有**板球、足球、排球**。
在注册期间，用户**只选择板球和足球**，我将其存储在**$_SESSION['hobby_id']**关联数组中。

但在个人资料中，他/她想添加更多的爱好。

所以我想**显示不等于**$_SESSION['hobby_id'] 的爱好列表。

这当然没有用：

```
foreach($_SESSION['hobby_id'] as $k=>$v)
{

  $query="select hobbyid,hobbyname from hobbies where hobbyid!= $v";
}  
Output was football,volleyball and cricket,volleyball....but i wanted only volleyball 
```

所以我想要那个

```
$query="select hobbyid,hobbyname from hobbies where hobbyid!=(multiple values of session hobby id)"; 
```

我必须输入什么代码才能获得**所需的结果（仅限排球）**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:24:05.910

在 MySQL 中删除`foreach`循环并使用比较：`NOT IN`

```
$query="
    SELECT hobbyid,hobbyname
    FROM hobbies
    WHERE hobbyid NOT IN (" . implode(',', $_SESSION['hobby_id']) . ")
"; 
```

# php - 如何在php中获取服务器端HTTPS请求的用户名和密码

> ID：11201707
> 
> 赞同：0
> 
> 时间：2012-06-26T06:18:39.237
> 
> 标签：php, https

我正在为登录脚本编写 Web 服务。我必须保留在 HTTPS 服务器上。一般来说，我们在服务器端获取用户名和密码为

```
if(isset($_REQUEST['login'])){
    $user=mysql_escape_string($_REQUEST['username']);
    $password=hash('sha512',$_REQUEST['password']);
} 
```

但这对于 HTTP 连接来说很好。

我从未将 HTTPS 连接用于 Web 服务，所以我想知道是否有其他方法可以通过 HTTPS 连接传递用户名和密码？那么如何从该请求中检索数据。

我的客户希望在标头信息中发送这些数据，例如

```
Method: POST
Content-Type: application/x-www-form-urlencoded
Content: username=mynames&password=abcabc 
```

从这里我需要检索数据。我对此一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:22:30.577

HTTPS 对 PHP 代码实际上是透明的。它完全由浏览器和服务器处理。您可以像访问 HTTP 请求一样访问 $_REQUEST 变量。

**编辑（略微修改的问题）：**

如果您的客户希望您有一个登录表单来提交用户名和密码（正如您对问题所做的更改所示），您只需将表单输入与通常在 HTTP 连接中的输入相同。分别将它们命名为“用户名”和“密码”，然后从您将表单发布到的页面上的 $_POST 中提取它们的数据。正如我之前提到的，将服务器设置为响应 HTTPS 将使其透明地处理其他所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:20:23.680

您可以使用 HTTP Auth Basic 对请求进行身份验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T06:41:40.253

正如 Piotr 所提到的，不要使用 HTTP 身份验证。

正如其他人发布的那样：只需将 vhost 设置为在 https 上运行即可。您可以添加类似这样的内容来验证连接是否安全：

```
<?php
if (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] && isset($_POST) && isset($_POST['login'])) {
    // Your username and password verification here.
} 
```

请使用 $_POST。$_REQUEST 是一种令人讨厌的说法：“我真的不知道我在这里做什么......”。

# xaml - 在 Metro xaml 中创建虚拟化列表视图

> ID：11201709
> 
> 赞同：2
> 
> 时间：2012-06-26T06:19:30.640
> 
> 标签：xaml, windows-runtime, microsoft-metro, winrt-xaml

我需要创建一个列表视图，该列表视图绑定到当用户滚动到列表的开头或结尾时加载的项目。我见过 ISupportIncrementalLoading 接口，但这只支持单向加载（向前/更多）。是否可以双向加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:53:52.387

`ListView.Items`这对您来说可能是不可能的，但我已经通过将新项目插入到索引 0的集合中来解决此类问题

# android - Android：程序化电话立即结束

> ID：11201723
> 
> 赞同：1
> 
> 时间：2012-06-26T06:20:44.233
> 
> 标签：android

我最近在与 ADK 合作时遇到了一个关于电话的奇怪问题。我的目标是每当按下演示盾上的按钮时触发电话。当我执行以下代码时，按下按钮时电话拨号器应用程序出现（显示我想拨打的号码），但是，它不执行呼叫，只显示消息“呼叫结束”。

这是我一直在使用的代码：

```
String url = "tel:1234567890";
Intent in = new Intent(Intent.ACTION_CALL, Uri.parse(url));
DemoKitPhone.this.startActivity(in); 
```

几天来我一直在尝试解决这个问题（将这段代码放在 runOnUiThread、BroadcastReceivers 等中无济于事），所以任何帮助都将不胜感激。

编辑：是的，我已经包含了权限 android.permission.CALL_PHONE。很快就会查看 Logcat 并发布详细信息 - tahnk 你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:49:01.617

在您的清单文件中添加以下权限。

```
 <uses-permission android:name=" android.permission.CALL_PHONE" /> 
```

它可以解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:37:04.590

我希望我能正确理解你的问题，

这就是您的调用者应用程序的处理方式。尝试打开电子邮件意图并查看行为。它可能需要用户的最终干预才能执行实际操作。

# c++ - 如何用循环为 c++ 绘制一个矩形？

> ID：11201728
> 
> 赞同：1
> 
> 时间：2012-06-26T06:21:14.340
> 
> 标签：c++

所以我有这个制作盒子的代码，但想要制作角+，长度|和宽度 - 。还想输入一个数字，这样您就可以像 cout<<"enter the length number" 等这样绘制它们......我该怎么做？

这是我必须制作的盒子：

```
#include <iostream.h> 
#include <string.h> 

void main() 
{ 
  for(int z=1; z<=79; z++) 
  { 
    cout << ""; 
  } 

  cout << endl; 

  for(int i=1; i<=5; i++) 
  { 
    cout << ""; 
    for(int j=1; j<=77; j++) 
    { 
      cout << " "; 
    } 

    cout << "" << endl; 
  } 

  for(int y=1; y<=79; y++) 
  { 
    cout << ""; 
  } 

  cout << endl; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:29:33.963

绘制一个矩形，其中`int height`高度和`int width`宽度是

```
#include <iostream>

void draw_rect(int width,int height) 
{
    using std::cout;
    cout << "+";
    for (int i = 0; i < width - 2; i++)
    {
        cout << "-";
    }
    cout << "+\n";

    for (int i = 0; i < height - 2; i++)
    {
        cout << "|";
        for (int j = 0; j < width - 2; j++)
        {
            cout << " ";
        }
        cout << "|\n";
    }

    cout << "+";
    for (int i = 0; i < width - 2; i++)
    {
        cout << "-";
    }
    cout << "+\n";
}

int main ()
{
    draw_rect(8,6);
    return 0;
} 
```

对于如何获取用户输入，请阅读： [Basic C++ IO](http://www.cplusplus.com/doc/tutorial/basic_io/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-02T18:13:04.133

```
#include <iostream>
using namespace std;

void draw_rect( int width, int height)
{   
int i;  
cout << char(218); 
for (i=0; i<width-2; i++) 
cout << char(196);
cout << char(191) << endl;

for (i=0; i<height-2; i++)
{
cout << char(179);
for (int j=0; j<width-2; j++) 
cout << " ";
cout << char(179) << endl;
}
cout << char(192);

for(i=0; i<width-2; i++)
cout << char(196);
cout << char(217) << endl;
}

int main()
{
draw_rect(20,10);
return 0;
} 
```

# asp.net - 如何从 .aspx 页面发送电子邮件？

> ID：11201732
> 
> 赞同：-10
> 
> 时间：2012-06-26T06:21:33.803
> 
> 标签：asp.net

我在我的 .aspx 页面上使用了文本框和提交按钮，我想在按钮单击时通过电子邮件发送所有这些文本框的数据，所以请告诉我解决方案...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T06:33:10.800

在按钮单击事件上调用此函数

```
public bool SendOnlyToEmail(string sToMailAddr, string sSubject, string sMessage,
                                         string sFromMailAddr)
            {
                try
                {
                    System.Net.Mail.MailMessage msg = new System.Net.Mail.MailMessage();
                    if (string.IsNullOrEmpty(sFromMailAddr))
                    {
// fetching from address from web config key
                        msg.From = new System.Net.Mail.MailAddress(System.Configuration.ConfigurationManager.AppSettings["MailFrom"]); 
                    }
                    else
                    {
                        msg.From = new System.Net.Mail.MailAddress(sFromMailAddr);
                    }

                    foreach (string address in sToMailAddr)
                    {
                        if (address.Length > 0)
                        {
                            msg.To.Add(address);
                        }
                    }
                    msg.Subject = sSubject;
                    msg.Body = sMessage;
                    msg.IsBodyHtml = true;

                    //fetching smtp address from web config key
                    System.Net.Mail.SmtpClient objSMTPClient = new System.Net.Mail.SmtpClient(System.Configuration.ConfigurationManager.AppSettings["MailServer"]);
                    //SmtpMail.SmtpServer = Convert.ToString(System.Configuration.ConfigurationManager.AppSettings["MailServer"]);
                    if (sToMailAddr.Length > 0)
                    {
                        objSMTPClient.Send(msg);
                        return true;
                    }
                    else
                    {
                        return false;
                    }
                }
                catch (Exception objException)
                {
                    ErrorLog.InsertException(objException);
                    return false;
                }
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:23:00.830

你可以使用[`SmtpClient`](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T06:28:48.080

没有纯代码的方法来解决这个问题；您依赖于 SMTP 服务器来发送您的邮件。最佳情况：您已经在服务器上设置了一个默认端口。在这种情况下，您只需要这样：

```
SmtpClient client = new SmtpClient("localhost");
client.Send(new MailMessage("me@myserver.com", "someoneelse@foo.com")); 
```

如果做不到这一点，您可以考虑设置一个免费的 SMTP 帐户，或者（如果您打算发送批量电子邮件，绝对有必要），在 Amazon SES 等电子邮件服务提供商处获得一个帐户。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T06:28:50.507

您可以使用以下代码发送电子邮件：

```
SmtpClient smtpClient = new SmtpClient();
MailMessage message = new MailMessage();
MailAddress fromAddress = new MailAddress("senderEmail");
message.From = fromAddress;
message.Subject = "your subject";
message.Body = txtBox.Text;//Here put the textbox text
message.To.Add("to");
smtpClient.Send(message);//returns the boolean value ie. success:true 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-16T20:24:24.450

```
 <script runat="server">

        protected void Button1_Click(object sender, EventArgs e)
        {
            //create the mail message
            MailMessage mail = new MailMessage();

            //set the addresses
            mail.From = new MailAddress("info@infoA2Z.com");
            mail.To.Add("Support@infoA2Z.com");

            //set the content
            mail.Subject = "This is an email";
            mail.Body = "this is the body content of the email.";

            //send the message
            SmtpClient smtp = new SmtpClient();
            smtp.Send(mail);
        }
    </script> 
```

# android - java.lang.IllegalStateException：无法执行活动的方法

> ID：11201733
> 
> 赞同：1
> 
> 时间：2012-06-26T06:21:43.260
> 
> 标签：android

我正在以测验的形式开发这个简单的应用程序，用户可以获得问题和 4 个选项。这些问题是从 SQLite DB 中获取的。在我的 succ.java 活动中，我显示问题并在单击下一个按钮时获取下一个问题。

现在在模拟器上运行它时，如果我没有选择 4 个单选按钮中的任何一个，我的应用程序最终会停止，我必须强制关闭。为了解决这个问题，我想在我的 succ.java 页面中检查，如果两个选项 ae 都没有选择从 db 中获取具有相同问题 ID 的问题，并且如果我选择了任何一个选项来获取具有下一个问题 ID 的问题。

但这仍然行不通，我已经尝试了我可以做的一切。我附上了我的 succ.java。还有logcat。

**成功的java**

```
public class succ extends Activity {
private static String[] response = new String[10];

RadioButton op1,op2,op3,op4;

private int token_page;
 /** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.mainquespage);

    int qno=0;
     String ques="";
     String ans1="";
     String ans2="";
     String ans3="";
     String ans4="";
     //int token=0;
    Bundle extras=getIntent().getExtras();
    //token=extras.getInt("SESS_ID");
     ques=extras.getString("KEY_QUES");
     ans1=extras.getString("KEY_ANS1");
     ans2=extras.getString("KEY_ANS2");
     ans3=extras.getString("KEY_ANS3");
     ans4=extras.getString("KEY_ANS4");
     qno=extras.getInt("KEY_ID");
     token_page=qno+1;
     TextView quesnumber=(TextView)findViewById(R.id.quesIDTEXT);
     quesnumber.setText("QUESTION: "+ qno );
     TextView quescont=(TextView)findViewById(R.id.quesContText);
     quescont.setText(ques);
     TextView opt1=(TextView)findViewById(R.id.op1Text);
     opt1.setText(ans1);
     TextView opt2=(TextView)findViewById(R.id.op2Text);
     opt2.setText(ans2);
     TextView opt3=(TextView)findViewById(R.id.op3Text);
     opt3.setText(ans3);
     TextView opt4=(TextView)findViewById(R.id.op4Text);
     opt4.setText(ans4);

}
public void onRadioButtonClicked(View view) {

    op1 = (RadioButton) findViewById(R.id.op1Text);
    op2 = (RadioButton) findViewById(R.id.op2Text);
    op3 = (RadioButton) findViewById(R.id.op3Text);
    op4 = (RadioButton) findViewById(R.id.op4Text);

    if(op1.isChecked())
    {
        response[token_page-2]=op1.getText().toString();
    }
    else if(op2.isChecked()){
        response[token_page-2]=op2.getText().toString();
    }
    else if(op3.isChecked()){
        response[token_page-2]=op3.getText().toString();
    }
    else if(op4.isChecked()){
        response[token_page-2]=op4.getText().toString();
    }
    else
        response[token_page-2]="";

  }
public void nextClick(View view)
{
    final Context context=this;
    Question question=new Question();
    MyAdapter questionAdapter=new MyAdapter(this);

            if(token_page!=11)
            {   
            questionAdapter.open();
    if(op1.isChecked()||op2.isChecked()||op3.isChecked()||op4.isChecked())
    {
        question=questionAdapter.showQues(token_page);
    }
    else
    {
        question=questionAdapter.showQues(token_page-1);
    }
//please note when i'm just writing: question=questionAdapter.showQues(token_page) //without checking for the selection of radio buttons i get the error i the end after the //last question is answered but when i'm checking it here and using if els then am getting //an error on the same screen. i'm stuck on this since forever. HELP !!

     questionAdapter.close();

        int qno;
     String ques;
     String ans1;
     String ans2;
     String ans3;
     String ans4;
     qno=question.getQno();
     ques=question.getQues();
     ans1=question.getAns1();
     ans2=question.getAns2();
     ans3=question.getAns3();
     ans4=question.getAns4();

        Intent intent=new Intent(context, succ.class);
        intent.putExtra("KEY_ID", qno);
         intent.putExtra("KEY_QUES",ques);
         intent.putExtra("KEY_ANS1",ans1);
         intent.putExtra("KEY_ANS2",ans2);
        intent.putExtra("KEY_ANS3",ans3);
         intent.putExtra("KEY_ANS4",ans4);

            startActivity(intent);

    }//token_page
    else
    {
        Toast.makeText(this, "FINISHED", Toast.LENGTH_LONG).show();
        Bundle b=new Bundle();
        b.putStringArray("ARRAY", response);
        Intent i=new Intent(context, result.class);
        i.putExtras(b);
        startActivity(i);
    }
}
} 
```

**LOGCAT**

```
 06-26 11:26:48.401: D/opendb(357): EXIST
06-26 11:26:52.321: W/KeyCharacterMap(357): No keyboard for id 0
06-26 11:26:52.321: W/KeyCharacterMap(357): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
06-26 11:26:53.781: D/dalvikvm(357): GC_EXTERNAL_ALLOC freed 122K, 51% free 2699K/5447K, external 2128K/2137K, paused 63ms
06-26 11:26:59.923: W/KeyCharacterMap(357): No keyboard for id 0
06-26 11:26:59.923: W/KeyCharacterMap(357): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
06-26 11:29:49.512: D/opendb(478): EXIST
06-26 11:29:58.981: D/AndroidRuntime(478): Shutting down VM
06-26 11:29:58.981: W/dalvikvm(478): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-26 11:29:59.011: E/AndroidRuntime(478): FATAL EXCEPTION: main
06-26 11:29:59.011: E/AndroidRuntime(478): java.lang.IllegalStateException: Could not execute method of the activity
06-26 11:29:59.011: E/AndroidRuntime(478):  at android.view.View$1.onClick(View.java:2144)
06-26 11:29:59.011: E/AndroidRuntime(478):  at android.view.View.performClick(View.java:2485)
06-26 11:29:59.011: E/AndroidRuntime(478):  at android.view.View$PerformClick.run(View.java:9080)
06-26 11:29:59.011: E/AndroidRuntime(478):  at android.os.Handler.handleCallback(Handler.java:587)
06-26 11:29:59.011: E/AndroidRuntime(478):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-26 11:29:59.011: E/AndroidRuntime(478):  at android.os.Looper.loop(Looper.java:123)
06-26 11:29:59.011: E/AndroidRuntime(478):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-26 11:29:59.011: E/AndroidRuntime(478):  at java.lang.reflect.Method.invokeNative(Native Method)
06-26 11:29:59.011: E/AndroidRuntime(478):  at java.lang.reflect.Method.invoke(Method.java:507)
06-26 11:29:59.011: E/AndroidRuntime(478):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-26 11:29:59.011: E/AndroidRuntime(478):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-26 11:29:59.011: E/AndroidRuntime(478):  at dalvik.system.NativeStart.main(Native Method)
06-26 11:29:59.011: E/AndroidRuntime(478): Caused by: java.lang.reflect.InvocationTargetException
06-26 11:29:59.011: E/AndroidRuntime(478):  at java.lang.reflect.Method.invokeNative(Native Method)
06-26 11:29:59.011: E/AndroidRuntime(478):  at java.lang.reflect.Method.invoke(Method.java:507)
06-26 11:29:59.011: E/AndroidRuntime(478):  at android.view.View$1.onClick(View.java:2139)
06-26 11:29:59.011: E/AndroidRuntime(478):  ... 11 more
06-26 11:29:59.011: E/AndroidRuntime(478): Caused by: java.lang.NullPointerException
06-26 11:29:59.011: E/AndroidRuntime(478):  at my.pkg.newquiz.succ.nextClick(succ.java:98)
06-26 11:29:59.011: E/AndroidRuntime(478):  ... 14 more
06-26 11:30:02.821: I/Process(478): Sending signal. PID: 478 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:41:26.610

> 如果我没有选择 4 个单选按钮中的任何一个，我的应用程序最终会停止，我必须强制关闭。

根据您的代码，它正在按预期发生。

您正在做的最大错误是您在检查单选按钮时正在初始化它们。下面是您编写的一个片段。

```
public void onRadioButtonClicked(View view) {

    op1 = (RadioButton) findViewById(R.id.op1Text);
    op2 = (RadioButton) findViewById(R.id.op2Text);
    op3 = (RadioButton) findViewById(R.id.op3Text);
    op4 = (RadioButton) findViewById(R.id.op4Text); 
```

因此，如果情况是如果您不选择任何单选按钮，则两者都不会被初始化，然后如果单击下一步按钮，您显然会得到 NPE。

```
if(op1.isChecked()||op2.isChecked()||op3.isChecked()||op4.isChecked())
    {
        question=questionAdapter.showQues(token_page);
    } 
```

所以解决方案是在 onCreate 中初始化所有单选按钮。

下面是修改后的片段。

```
public class succ extends Activity {
private static String[] response = new String[10];

RadioButton op1,op2,op3,op4;

private int token_page;
 /** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.mainquespage);

    op1 = (RadioButton) findViewById(R.id.op1Text);
    op2 = (RadioButton) findViewById(R.id.op2Text);
    op3 = (RadioButton) findViewById(R.id.op3Text);
    op4 = (RadioButton) findViewById(R.id.op4Text); 

    int qno=0;
     String ques="";
     String ans1="";
     String ans2="";
     String ans3="";
     String ans4="";
     //int token=0;
    Bundle extras=getIntent().getExtras();
    //token=extras.getInt("SESS_ID");
     ques=extras.getString("KEY_QUES");
     ans1=extras.getString("KEY_ANS1");
     ans2=extras.getString("KEY_ANS2");
     ans3=extras.getString("KEY_ANS3");
     ans4=extras.getString("KEY_ANS4");
     qno=extras.getInt("KEY_ID");
     token_page=qno+1;
     TextView quesnumber=(TextView)findViewById(R.id.quesIDTEXT);
     quesnumber.setText("QUESTION: "+ qno );
     TextView quescont=(TextView)findViewById(R.id.quesContText);
     quescont.setText(ques);
     TextView opt1=(TextView)findViewById(R.id.op1Text);
     opt1.setText(ans1);
     TextView opt2=(TextView)findViewById(R.id.op2Text);
     opt2.setText(ans2);
     TextView opt3=(TextView)findViewById(R.id.op3Text);
     opt3.setText(ans3);
     TextView opt4=(TextView)findViewById(R.id.op4Text);
     opt4.setText(ans4);

}
public void onRadioButtonClicked(View view) {

    if(op1.isChecked())
    {
        response[token_page-2]=op1.getText().toString();
    }
    else if(op2.isChecked()){
        response[token_page-2]=op2.getText().toString();
    }
    else if(op3.isChecked()){
        response[token_page-2]=op3.getText().toString();
    }
    else if(op4.isChecked()){
        response[token_page-2]=op4.getText().toString();
    }
    else
        response[token_page-2]="";

  }
public void nextClick(View view)
{
    final Context context=this;
    Question question=new Question();
    MyAdapter questionAdapter=new MyAdapter(this);

            if(token_page!=11)
            {   
            questionAdapter.open();
    if(op1.isChecked()||op2.isChecked()||op3.isChecked()||op4.isChecked())
    {
        question=questionAdapter.showQues(token_page);
    }
    else
    {
        question=questionAdapter.showQues(token_page-1);
    }
//please note when i'm just writing: question=questionAdapter.showQues(token_page) //without checking for the selection of radio buttons i get the error i the end after the //last question is answered but when i'm checking it here and using if els then am getting //an error on the same screen. i'm stuck on this since forever. HELP !!

     questionAdapter.close();

        int qno;
     String ques;
     String ans1;
     String ans2;
     String ans3;
     String ans4;
     qno=question.getQno();
     ques=question.getQues();
     ans1=question.getAns1();
     ans2=question.getAns2();
     ans3=question.getAns3();
     ans4=question.getAns4();

        Intent intent=new Intent(context, succ.class);
        intent.putExtra("KEY_ID", qno);
         intent.putExtra("KEY_QUES",ques);
         intent.putExtra("KEY_ANS1",ans1);
         intent.putExtra("KEY_ANS2",ans2);
        intent.putExtra("KEY_ANS3",ans3);
         intent.putExtra("KEY_ANS4",ans4);

            startActivity(intent);

    }//token_page
    else
    {
        Toast.makeText(this, "FINISHED", Toast.LENGTH_LONG).show();
        Bundle b=new Bundle();
        b.putStringArray("ARRAY", response);
        Intent i=new Intent(context, result.class);
        i.putExtras(b);
        startActivity(i);
    }
}
} 
```

# java - Java - 如何拖放 JPanel 及其组件

> ID：11201734
> 
> 赞同：12
> 
> 时间：2012-06-26T06:21:54.553
> 
> 标签：java, swing, drag-and-drop

我有一个关于拖放的问题：我可以拖放标签、文本或图标。但我想拖放一个 JPanel 及其所有组件（标签、文本框等）。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-12T00:27:57.357

此解决方案有效。一些警告开始。

我没有使用 TransferHandler API。我不喜欢它，它太严格了，但这是个人的事情（它做了什么，它做得很好），所以这可能不符合你的期望。

我正在使用 BorderLayout 进行测试。如果您想使用其他布局，您将不得不尝试弄清楚这一点。DnD 子系统确实提供有关鼠标点的信息（移动和放下时）。

那么我们需要什么：

一种数据风味。我选择这样做是因为它允许更大的限制

```
public class PanelDataFlavor extends DataFlavor {

    // This saves me having to make lots of copies of the same thing
    public static final PanelDataFlavor SHARED_INSTANCE = new PanelDataFlavor();

    public PanelDataFlavor() {

        super(JPanel.class, null);

    }

} 
```

可转让。某种包装器，用一堆 DataFlavor（在我们的例子中，只是 PanelDataFlavor）包装数据（我们的 JPanel）

```
public class PanelTransferable implements Transferable {

    private DataFlavor[] flavors = new DataFlavor[]{PanelDataFlavor.SHARED_INSTANCE};
    private JPanel panel;

    public PanelTransferable(JPanel panel) {
        this.panel = panel;
    }

    @Override
    public DataFlavor[] getTransferDataFlavors() {
        return flavors;
    }

    @Override
    public boolean isDataFlavorSupported(DataFlavor flavor) {

        // Okay, for this example, this is overkill, but makes it easier
        // to add new flavor support by subclassing
        boolean supported = false;

        for (DataFlavor mine : getTransferDataFlavors()) {

            if (mine.equals(flavor)) {

                supported = true;
                break;

            }

        }

        return supported;

    }

    public JPanel getPanel() {

        return panel;

    }

    @Override
    public Object getTransferData(DataFlavor flavor) throws UnsupportedFlavorException, IOException {

        Object data = null;
        if (isDataFlavorSupported(flavor)) {

            data = getPanel();

        } else {

            throw new UnsupportedFlavorException(flavor);

        }

        return data;

    }

} 
```

一个“DragGestureListener”

为此，我创建了一个简单的 DragGestureHandler，它将“JPanel”作为要拖动的内容。这允许手势处理程序成为自我管理的。

```
public class DragGestureHandler implements DragGestureListener, DragSourceListener {

    private Container parent;
    private JPanel child;

    public DragGestureHandler(JPanel child) {

        this.child = child;

    }

    public JPanel getPanel() {
        return child;
    }

    public void setParent(Container parent) {
        this.parent = parent;
    }

    public Container getParent() {
        return parent;
    }

    @Override
    public void dragGestureRecognized(DragGestureEvent dge) {

        // When the drag begins, we need to grab a reference to the
        // parent container so we can return it if the drop
        // is rejected
        Container parent = getPanel().getParent();

        setParent(parent);

        // Remove the panel from the parent.  If we don't do this, it
        // can cause serialization issues.  We could overcome this
        // by allowing the drop target to remove the component, but that's
        // an argument for another day
        parent.remove(getPanel());

        // Update the display
        parent.invalidate();
        parent.repaint();

        // Create our transferable wrapper
        Transferable transferable = new PanelTransferable(getPanel());

        // Start the "drag" process...
        DragSource ds = dge.getDragSource();
        ds.startDrag(dge, Cursor.getPredefinedCursor(Cursor.MOVE_CURSOR), transferable, this);

    }

    @Override
    public void dragEnter(DragSourceDragEvent dsde) {
    }

    @Override
    public void dragOver(DragSourceDragEvent dsde) {
    }

    @Override
    public void dropActionChanged(DragSourceDragEvent dsde) {
    }

    @Override
    public void dragExit(DragSourceEvent dse) {
    }

    @Override
    public void dragDropEnd(DragSourceDropEvent dsde) {

        // If the drop was not successful, we need to
        // return the component back to it's previous
        // parent
        if (!dsde.getDropSuccess()) {

            getParent().add(getPanel());

            getParent().invalidate();
            getParent().repaint();

        }
    }
} 
```

好的，这就是基础。现在我们需要将它们连接在一起......

因此，在我要拖动的面板中，我添加了：

```
 private DragGestureRecognizer dgr;
    private DragGestureHandler dragGestureHandler;

    @Override
    public void addNotify() {

        super.addNotify();

        if (dgr == null) {

            dragGestureHandler = new DragGestureHandler(this);
            dgr = DragSource.getDefaultDragSource().createDefaultDragGestureRecognizer(
                    this,
                    DnDConstants.ACTION_MOVE,
                    dragGestureHandler);

        }

    }

    @Override
    public void removeNotify() {

        if (dgr != null) {

            dgr.removeDragGestureListener(dragGestureHandler);
            dragGestureHandler = null;

        }

        dgr = null;

        super.removeNotify();

    } 
```

以这种方式使用添加/删除通知的原因是为了保持系统清洁。当我们不再需要它们时，它有助于防止事件被传递到我们的组件。它还提供自动注册。您可能希望使用自己的“setDraggable”方法。

那是拖动面，现在是放置面。

首先，我们需要一个 DropTargetListener：

```
public class DropHandler implements DropTargetListener {

    @Override
    public void dragEnter(DropTargetDragEvent dtde) {

        // Determine if we can actually process the contents coming in.
        // You could try and inspect the transferable as well, but 
        // there is an issue on the MacOS under some circumstances
        // where it does not actually bundle the data until you accept the
        // drop.
        if (dtde.isDataFlavorSupported(PanelDataFlavor.SHARED_INSTANCE)) {

            dtde.acceptDrag(DnDConstants.ACTION_MOVE);

        } else {

            dtde.rejectDrag();

        }

    }

    @Override
    public void dragOver(DropTargetDragEvent dtde) {
    }

    @Override
    public void dropActionChanged(DropTargetDragEvent dtde) {
    }

    @Override
    public void dragExit(DropTargetEvent dte) {
    }

    @Override
    public void drop(DropTargetDropEvent dtde) {

        boolean success = false;

        // Basically, we want to unwrap the present...
        if (dtde.isDataFlavorSupported(PanelDataFlavor.SHARED_INSTANCE)) {

            Transferable transferable = dtde.getTransferable();
            try {

                Object data = transferable.getTransferData(PanelDataFlavor.SHARED_INSTANCE);
                if (data instanceof JPanel) {

                    JPanel panel = (JPanel) data;

                    DropTargetContext dtc = dtde.getDropTargetContext();
                    Component component = dtc.getComponent();

                    if (component instanceof JComponent) {

                        Container parent = panel.getParent();
                        if (parent != null) {

                            parent.remove(panel);

                        }

                        ((JComponent)component).add(panel);

                        success = true;
                        dtde.acceptDrop(DnDConstants.ACTION_MOVE);

                        invalidate();
                        repaint();

                    } else {

                        success = false;
                        dtde.rejectDrop();

                    }

                } else {

                    success = false;
                    dtde.rejectDrop();

                }

            } catch (Exception exp) {

                success = false;
                dtde.rejectDrop();
                exp.printStackTrace();

            }

        } else {

            success = false;
            dtde.rejectDrop();

        }

        dtde.dropComplete(success);

    }

} 
```

最后，我们需要向相关方注册放置目标......在那些能够支持放置的容器中，您要添加

```
DropTarget dropTarget;
DropHandler dropHandler;

.
.
.

dropHandler = new DropHandler();
dropTarget = new DropTarget(pnlOne, DnDConstants.ACTION_MOVE, dropHandler, true); 
```

就个人而言，我在 addNotify 中初始化并在 removeNotify 中处理

```
dropTarget.removeDropTargetListener(dropHandler); 
```

只是关于 addNotify 的快速说明，我已经连续调用了很多次，因此您可能需要仔细检查您是否尚未设置放置目标。

就是这样。

您可能还会发现以下一些感兴趣的内容

[http://rabbit-hole.blogspot.com.au/2006/05/my-drag-image-is-better-than-yours.html](http://rabbit-hole.blogspot.com.au/2006/05/my-drag-image-is-better-than-yours.html)

[http://rabbit-hole.blogspot.com.au/2006/08/drop-target-navigation-or-you-drag.html](http://rabbit-hole.blogspot.com.au/2006/08/drop-target-navigation-or-you-drag.html)

[http://rabbit-hole.blogspot.com.au/2006/04/smooth-jlist-drop-target-animation.html](http://rabbit-hole.blogspot.com.au/2006/04/smooth-jlist-drop-target-animation.html)

即使只是出于兴趣，不检查它们也是浪费。

# 2018 更新

因此，在编写原始代码 4 年后，API 的工作方式似乎发生了一些变化，至少在 MacOS 下是这样，这导致了许多问题。

首先`DragGestureHandler`是导致`NullPointerException`何时`DragSource#startDrag`被调用。这似乎与将容器的`parent`引用设置为`null`（通过将其从父容器中删除）有关。

因此，相反，我修改了`dragGestureRecognized`方法以在调用`panel`后从父级中删除`DragSource#startDrag`...

```
@Override
public void dragGestureRecognized(DragGestureEvent dge) {
    // When the drag begins, we need to grab a reference to the
    // parent container so we can return it if the drop
    // is rejected
    Container parent = getPanel().getParent();
    System.out.println("parent = " + parent.hashCode());
    setParent(parent);

    // Remove the panel from the parent.  If we don't do this, it
    // can cause serialization issues.  We could overcome this
    // by allowing the drop target to remove the component, but that's
    // an argument for another day
    // This is causing a NullPointerException on MacOS 10.13.3/Java 8
    //      parent.remove(getPanel());
    //      // Update the display
    //      parent.invalidate();
    //      parent.repaint();

    // Create our transferable wrapper
    System.out.println("Drag " + getPanel().hashCode());
    Transferable transferable = new PanelTransferable(getPanel());
    // Start the "drag" process...
    DragSource ds = dge.getDragSource();
    ds.startDrag(dge, null, transferable, this);

    parent.remove(getPanel());
    // Update the display
    parent.invalidate();
    parent.repaint();
} 
```

我也修改了`DragGestureHandler#dragDropEnd`方法

```
@Override
public void dragDropEnd(DragSourceDropEvent dsde) {
    // If the drop was not successful, we need to
    // return the component back to it's previous
    // parent
    if (!dsde.getDropSuccess()) {
        getParent().add(getPanel());
    } else {
        getPanel().remove(getPanel());
    }
    getParent().invalidate();
    getParent().repaint();
} 
```

和`DropHandler#drop`

```
@Override
public void drop(DropTargetDropEvent dtde) {
    boolean success = false;
    // Basically, we want to unwrap the present...
    if (dtde.isDataFlavorSupported(PanelDataFlavor.SHARED_INSTANCE)) {
        Transferable transferable = dtde.getTransferable();
        try {
            Object data = transferable.getTransferData(PanelDataFlavor.SHARED_INSTANCE);
            if (data instanceof JPanel) {
                JPanel panel = (JPanel) data;
                DropTargetContext dtc = dtde.getDropTargetContext();
                Component component = dtc.getComponent();
                if (component instanceof JComponent) {
                    Container parent = panel.getParent();
                    if (parent != null) {
                        parent.remove(panel);
                        parent.revalidate();
                        parent.repaint();
                    }
                    ((JComponent) component).add(panel);
                    success = true;
                    dtde.acceptDrop(DnDConstants.ACTION_MOVE);
                    ((JComponent) component).invalidate();
                    ((JComponent) component).repaint();
                } else {
                    success = false;
                    dtde.rejectDrop();
                }
            } else {
                success = false;
                dtde.rejectDrop();
            }
        } catch (Exception exp) {
            success = false;
            dtde.rejectDrop();
            exp.printStackTrace();
        }
    } else {
        success = false;
        dtde.rejectDrop();
    }
    dtde.dropComplete(success);
} 
```

重要的是要注意，上述这些修改可能不是必需的，但在我让操作再次工作之后它们就存在了......

我遇到的另一个问题是一堆`NotSerializableException`s

我被要求更新`DragGestureHandler`和`DropHandler`类...

```
public class DragGestureHandler implements DragGestureListener, DragSourceListener, Serializable {
    //...
}

public public class DropHandler implements DropTargetListener, Serializable {
    //...
} 
```

## 可运行的示例...

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.io.Serializable;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class Test implements Serializable {

    public static void main(String[] args) {
        new Test();;
    }

    public Test() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                    ex.printStackTrace();
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setLayout(new GridLayout(1, 2));

            JPanel container = new OutterPane();

            DragPane drag = new DragPane();
            container.add(drag);

            add(container);
            add(new DropPane());
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

    }

    public class OutterPane extends JPanel {

        public OutterPane() {
            setBackground(Color.GREEN);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(100, 100);
        }

    }

} 
```

### `DragPane`

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.dnd.DnDConstants;
import java.awt.dnd.DragGestureRecognizer;
import java.awt.dnd.DragSource;
import javax.swing.JPanel;

public class DragPane extends JPanel {

    private DragGestureRecognizer dgr;
    private DragGestureHandler dragGestureHandler;

    public DragPane() {
        System.out.println("DragPane = " + this.hashCode());
        setBackground(Color.RED);
        dragGestureHandler = new DragGestureHandler(this);
        dgr = DragSource.getDefaultDragSource().createDefaultDragGestureRecognizer(this, DnDConstants.ACTION_MOVE, dragGestureHandler);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(50, 50);
    }

} 
```

### `DropPane`

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.dnd.DnDConstants;
import java.awt.dnd.DropTarget;
import javax.swing.JPanel;

public class DropPane extends JPanel {

    DropTarget dropTarget;
    DropHandler dropHandler;

    public DropPane() {
        setBackground(Color.BLUE);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(100, 100);
    }

    @Override
    public void addNotify() {
        super.addNotify(); //To change body of generated methods, choose Tools | Templates.
        dropHandler = new DropHandler();
        dropTarget = new DropTarget(this, DnDConstants.ACTION_MOVE, dropHandler, true);
    }

    @Override
    public void removeNotify() {
        super.removeNotify(); //To change body of generated methods, choose Tools | Templates.
        dropTarget.removeDropTargetListener(dropHandler);
    }

} 
```

除了我上面提到的更改之外，`DragGestureHandler`、`DropHandler`和`PanelDataFlavor`类保持不变。`PanelTransferable`所有这些类都是独立的外部类，否则会导致额外的`NotSerializableException`问题

# 笔记

由被拖动的`DragGestureHandler`同一组件管理可能会导致所有问题，但我没有时间调查

应该注意的是，我不会提示也不会容忍以这种方式操作组件，因为这很容易导致解决方案今天可能有效但明天不会有效的情况。我更喜欢转移状态或数据——更稳定。

我已经尝试了十几个其他示例，这些示例基于原始答案中提出的相同概念，它们只是转移状态并且它们都可以正常工作，只是在尝试转移时`Component`它失败了 - 直到应用了上述修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-19T21:00:21.580

该代码是 MadProgrammer 的巨大帮助。对于任何想要使用这些类，但想要从您正在拖动的面板中的按钮启动拖动的人，我只是将扩展的 JPanel 替换为一个 JButton，该 JButton 在构造函数中使用面板：

```
public class DragActionButton  extends JButton {
  private DragGestureRecognizer dgr;
  private DragGestureHandler dragGestureHandler;
  private JPanel actionPanel;
DragActionButton (JPanel actionPanel, String buttonText)
 {
 this.setText(buttonText);
 this.actionPanel = actionPanel;
 }   

@Override
public void addNotify() {

    super.addNotify();

    if (dgr == null) {

        dragGestureHandler = new DragGestureHandler(this.actionPanel);
        dgr = DragSource.getDefaultDragSource().createDefaultDragGestureRecognizer(
                this,
                DnDConstants.ACTION_MOVE,
                dragGestureHandler);

    }

}

@Override
public void removeNotify() {

    if (dgr != null) {

        dgr.removeDragGestureListener(dragGestureHandler);
        dragGestureHandler = null;

    }

    dgr = null;

    super.removeNotify();

}

} 
```

那么你在创建按钮时会这样做：

```
 this.JButtonDragIt = new DragActionButton(this.JPanel_To_Drag, "button-text-here"); 
```

# jquery - 从 jquery 或 XMLHttpRequest 到亚马逊 aws 的 HTTP GET 失败，并且 Access-Control-Allow-Origin 不允许使用 Origin

> ID：11201738
> 
> 赞同：0
> 
> 时间：2012-06-26T06:22:19.777
> 
> 标签：jquery, amazon-web-services, xmlhttprequest, amazon-dynamodb

从 jQuery 或 XMLHttpRequest 获取亚马逊 AWS 安全令牌时运气不佳。当我从 jQuery 或 XmlHttpRequest 发送 HTTP GET 时，我得到“Access-Control-Allow-Origin 不允许 Origin http:// MY_IP。”，但如果我在浏览器中粘贴相同的 URL，一切正常。

我的代码：

```
var url_ = "https://sts.amazonaws.com/?Action=GetSessionToken" +
            "&DurationSeconds=3600" +
            "&AWSAccessKeyId=" + AccessKeyId +
            "&Version=2011-06-15" +
            "&Timestamp=" + encode(timestamp) +
            "&Signature=" + encode(hash) +
            "&SignatureVersion=2&SignatureMethod=HmacSHA256";
$.get(url_, function(data) {
alert("response: "+data);
}); 
```

**我的标题：**

响应标头
接受范围字节
年龄 198
连接保持活动
内容长度 3739
内容类型文本/html
日期 2012 年 6 月 25 日星期一 17:48:20 GMT
Etag "48c4862-e9b-4c34f76b13400"
最后修改时间 2012 年 6 月 25 日星期一17:39:28 GMT
Proxy-Connection Keep-Alive
Server Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/0.9.8r DAV/2 PHP/5.3.10 with Suhosin-Patch

请求标头
Accept text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
DNT 1
Host **MY_IP**
If-修改自 2012 年 6 月 25 日星期一 17:13:16 GMT
If-None-Match "48c127c-ea2-4c34f18fe6300"
Proxy-Connection keep-alive
User-Agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:12.0 ) 壁虎/20100101 火狐/12.0

**浏览器标头（如果在浏览器中使用 URL）**

响应标头
Content-Length 808
Content-Type text/xml
日期 Mon, 25 Jun 2012 17:31:54 GMT
x-amzn-RequestId a854ff13-beeb-11e1-b3ac-0147da731d96

请求标头
Accept text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection keep-alive
DNT 1
主机 **sts.amazonaws.com**
用户代理 Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:12.0) Gecko/20100101 Firefox/12.0

我尝试了一些来自[http://www.html5rocks.com/en/tutorials/cors/](http://www.html5rocks.com/en/tutorials/cors/)的代码，但没有运气

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T00:03:27.370

你刚才问了这个问题，你可能已经找到了答案，但如果其他人正在寻找这个问题的答案，这里是：

Access-Control-Allow-Origin 是 XMLHttpRequest 的一项安全功能，用于执行在运行 javascript 的网页域之外的请求时。

例如，一个网页[http://foo.com/index.html](http://foo.com/index.html)正在为[http://bar.com/query?a=b](http://bar.com/query?a=b)做一个 XMLHttpRequest 请求，bar.com 的服务器必须把 Access-Control-Allow - 响应标头中的来源以指定允许跨域请求。

不幸的是，亚马逊 AWS 没有在响应标头中提供 Access-Control-Allow-Origin，这意味着您无法使用此技术访问它。

唯一适用于 AWS 的技术是使用 flash 代理 XMLHttpRequest，但这仅适用于安装了 flash 的设备（没有 iphone 或 ipad）。

# colors - 使用情节提要更改标签栏控制器的颜色

> ID：11201741
> 
> 赞同：3
> 
> 时间：2012-06-26T06:22:33.837
> 
> 标签：colors, uitabbarcontroller, xcode4.2, uistoryboard

我正在开发 Storyboard 并在其中添加了 Tabbar 控制器。我想将 Tabbar 的颜色更改为绿色或黄色。有什么办法可以更改它吗？

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T17:20:39.690

我就是这样做的，希望对你有帮助![在此处输入图像描述](../Images/8cd4098032f8ba1d412eed293fb5b0eb.png)

# c# - C# OleDBCommand SQL 语法错误

> ID：11201748
> 
> 赞同：1
> 
> 时间：2012-06-26T06:23:07.783
> 
> 标签：c#, sql, ms-access-2007, oledbcommand

我在通过 C# OleDbCommand 对 Access 后端表运行插入查询时遇到问题。如果您复制它并直接在 Access 中运行，SQL 运行良好，并且在点击此特定条目之前它适用于其他数据。

我曾尝试更改数据，但没有成功。其来源是一个 XML 文件。XML 数据正在正确加载。

失败的命令是带有错误“INSERT INTO 语句中的语法错误”的 dbCommand.ExecuteNonQuery()。

```
dbCommand = new OleDbCommand(string.Format(INSERT_RECURRING, tableName, fieldList, valueList), dbCon);
dbCommand.ExecuteNonQuery(); 
```

下面是尝试运行但失败的 SQL。请注意，表和字段名称是从 XML 源文件生成的，因此需要大写和下划线。

```
INSERT INTO LIST_CONTACTSGP (RID, CONTACT_TYPE, SURNAME_OR_FAMILY_NAME, GIVEN_NAMES, ORGANISATION, ADDRESS_GP, PHONE, MOBILE, WORK, FAX, EMAIL, COMMENTS) VALUES ('1-8HZAZN', 'Daughter, Other Emergency Contact', 'Smith', 'Ms Jenny', '', '', '49123456', '0416123456', '', '', '', ''); 
```

正如我之前提到的，此 SQL 在 Access 中运行不会失败，并且在此失败之前其他插入命令（在其他表上）工作正常。我删除了所有可能导致问题的 SQL 特殊字符。

任何帮助将不胜感激。

根据要求，堆栈跟踪的副本：

```
System.Data.OleDb.OleDbException was unhandled
  Message=Syntax error in INSERT INTO statement.
  Source=Microsoft Office Access Database Engine
  ErrorCode=-2147217900
  StackTrace:
       at System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr)
       at System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult)
       at System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult)
       at System.Data.OleDb.OleDbCommand.ExecuteCommand(CommandBehavior behavior, Object& executeResult)
       at System.Data.OleDb.OleDbCommand.ExecuteReaderInternal(CommandBehavior behavior, String method)
       at System.Data.OleDb.OleDbCommand.ExecuteNonQuery()
       at CCAPXMLImport.CXIDatabase.insertRepeatedSection(Dictionary`2 ReferralData, String ReferralID) in C:\SMNS-local\Development\TeleHealth\CCAPXMLImport\CCAPXMLImport\CCAPXMLImport\CXIDatabase.cs:line 279
       at CCAPXMLImport.frmMain.btnBrowse_Click(Object sender, EventArgs e) in C:\SMNS-local\Development\TeleHealth\CCAPXMLImport\CCAPXMLImport\CCAPXMLImport\frmMain.cs:line 131
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ButtonBase.WndProc(Message& m)
       at System.Windows.Forms.Button.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at CCAPXMLImport.Program.Main() in C:\SMNS-local\Development\TeleHealth\CCAPXMLImport\CCAPXMLImport\CCAPXMLImport\Program.cs:line 18
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T22:53:33.897

好的，我有一个答案（感谢 ralf.w）。非常感谢 AVD 和 Remou 花时间帮助解决这个问题。

列名需要封装在方括号中。尽管使用其他表并直接在 Access 中工作正常，但通过 OleDbCommand 发送它时，一个（或多个）列名肯定会导致问题。

所以 SQL 代码应该是：

```
string sql="INSERT INTO LIST_CONTACTSGP ([RID], [CONTACT_TYPE], [SURNAME_OR_FAMILY_NAME], 
            [GIVEN_NAMES], [ORGANISATION], [ADDRESS_GP], [PHONE], [MOBILE], [WORK], [FAX], [EMAIL], 
            [COMMENTS]) VALUES (@RID, @CONTACT_TYPE, @SURNAME_OR_FAMILY_NAME, 
            @GIVEN_NAMES, @ORGANISATION, @ADDRESS_GP, @PHONE, @MOBILE, @WORK, @FAX, 
             @EMAIL, @COMMENTS)"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:31:10.277

使用`parameters`而不是字符串连接。

```
string sql="INSERT INTO LIST_CONTACTSGP (RID, CONTACT_TYPE, SURNAME_OR_FAMILY_NAME, 
            GIVEN_NAMES, ORGANISATION, ADDRESS_GP, PHONE, MOBILE, WORK, FAX, EMAIL, 
            COMMENTS) VALUES (@RID, @CONTACT_TYPE, @SURNAME_OR_FAMILY_NAME, 
            @GIVEN_NAMES, @ORGANISATION, @ADDRESS_GP, @PHONE, @MOBILE, @WORK, @FAX, 
             @EMAIL, @COMMENTS)";

using(OleDbCommand dbCommand = new OleDbCommand(sql,conn))
{
  dbCommand.Parameters.Add("@RID",OleDbType.VarChar,20).Value="10";
  dbCommand.Parameters.Add("@CONTACT_TYPE",OleDbType.VarChar,20).Value="Somethig";
  .....
  conn.Open();
  dbCommand.ExecuteNonQuery();
  conn.Close();
} 
```

# iphone - 如何从 ios 的 Plist 中删除键值？

> ID：11201750
> 
> 赞同：1
> 
> 时间：2012-06-26T06:23:12.043
> 
> 标签：iphone, objective-c, plist

我想删除 Plist 中的键值。我发现答案喜欢删除分配给它的值，另一个是加载一个新的 plist 但我需要删除一个键值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:34:52.110

（假设这是与编程相关的）

您可以将其加载到 NSDictionary 中，删除键/值对，然后将其写回：

```
NSString *pathToPlist = @"/Users/H2CO3/my.plist";
NSMutableDictionary *plist = [NSMutableDictionary dictionaryWithCOntentsOfFile:pathToPlist];
[plist removeObjectForKey:@"MyKeyIWannaDelete"];
[plist writeToFile:pathToPlist atomically:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:20:59.797

PlistDict 是加载到 plist 中的字典。通过使用以下代码，我们可以从 plist 中删除键值。

> [plistDict removeObjectForKey:@" **Key** "];

字典必须是可变的（NSMutableDictionary）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:30:59.093

到目前为止，这是不可能通过编码实现的。如果您有这种情况，请使用数据库。因此，您可以删除您想要的任何行？

# iphone - 视图之间的分割导致 CALayer 位置包含 NaN：[305 nan]

> ID：11201751
> 
> 赞同：0
> 
> 时间：2012-06-26T06:23:16.510
> 
> 标签：iphone, objective-c, ios5

我试图从一个视图控制器导航到另一个，但是当我执行 segue 时，我得到以下未捕获的异常：

```
Terminating app due to uncaught exception 'CALayerInvalidGeometry', 
reason: 'CALayer position contains NaN: [305 nan]' 
```

我正在使用以下代码进行转场：

```
[self performSegueWithIdentifier:@"goToGameFromIntro" sender:self]; 
```

# iphone - 如何检查电子邮件地址是否已在 UITextfiled 中完美输入

> ID：11201753
> 
> 赞同：1
> 
> 时间：2012-06-26T06:23:32.577
> 
> 标签：iphone, xcode

> **可能重复：**
> [iPhone sdk 中 textField 上的电子邮件验证](https://stackoverflow.com/questions/5428304/email-validation-on-textfield-in-iphone-sdk)

我有一个应用程序，我想在其中获取用户的电子邮件地址作为输入。我想检查用户是否正确输入了电子邮件地址；像 @ 应该在字段中的文本中。我怎样才能做到这一点？

```
textField.text=@"ali@hotmail.com" 
```

如果文本框有这个值，那么确定，否则它应该提醒电子邮件地址应该是正确的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T06:25:40.390

您可以使用 regExp 验证，例如这个函数

```
-(BOOL) isValidEmail:(NSString *)checkString
{
    checkString = [checkString lowercaseString];
    BOOL stricterFilter = YES; 
    NSString *stricterFilterString = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";
    NSString *laxString = @".+@.+\\.[A-Za-z]{2}[A-Za-z]*";

    NSString *emailRegex = stricterFilter ? stricterFilterString : laxString;
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex];

    return [emailTest evaluateWithObject:checkString];
} 
```

像这样使用它

```
if([self isValidEmail:textField.text])
   //Valid
else
   //Not valid, do the alert 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T06:26:17.473

您可以使用以下方法：-

```
- (BOOL) validateEmail: (NSString *) candidate 
{
    NSString *emailRegex = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}"; 
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex]; 

    return [emailTest evaluateWithObject:candidate];
} 
```

`TRUE`如果输入格式正确，则该方法将返回，否则`FALSE`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:27:00.810

```
-(BOOL)isValidEmaill:(NSString*)in_EmailId
{
    if( (0 != [in_EmailId rangeOfString:@"@"].length) &&  (0 != [in_EmailId rangeOfString:@"."].length) )  
    {  
        NSMutableCharacterSet *invalidCharSet = [[[[NSCharacterSet alphanumericCharacterSet] invertedSet]mutableCopy]autorelease];  
        [invalidCharSet removeCharactersInString:@"_-"];  

        NSRange range1 = [in_EmailId rangeOfString:@"@" options:NSCaseInsensitiveSearch];  

        // If username part contains any character other than "."  "_" "-"  
        NSString *usernamePart = [in_EmailId substringToIndex:range1.location];  
        NSArray *stringsArray1 = [usernamePart componentsSeparatedByString:@"."];  
        for (NSString *string in stringsArray1) {  
            NSRange rangeOfInavlidChars=[string rangeOfCharacterFromSet: invalidCharSet];  
            if(rangeOfInavlidChars.length !=0 || [string isEqualToString:@""])  
                return NO;  
        }  

        NSString *domainPart = [in_EmailId substringFromIndex:range1.location+1];  
        NSArray *stringsArray2 = [domainPart componentsSeparatedByString:@"."];  

        for (NSString *string in stringsArray2) {  
            NSRange rangeOfInavlidChars=[string rangeOfCharacterFromSet:invalidCharSet];  

            if(rangeOfInavlidChars.length !=0 || [string isEqualToString:@""])  

                return NO;  
        }  

        return YES;  
    }  
    else // no '@' or '.' present  
    {
        //[mEmailAddrTextField becomeFirstResponder];
        return NO; 
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T06:28:54.063

试试这个

```
NSString *emailRegEx = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}"; 
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegEx]; 
    if  ([emailTest evaluateWithObject:m_CtrlTxtFld_Email.text] != YES && [m_CtrlTxtFld_Email.text length]!=0)
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Please enter valid email address" message:@"" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        [alert release];
        return;
    } 
```

# mysql - 比赛管理软件的数据库设计

> ID：11201755
> 
> 赞同：0
> 
> 时间：2012-06-26T06:24:11.457
> 
> 标签：mysql, sql, database, database-design

我目前正在使用 php、javascript 和 MySQL 设计一个 Web 应用程序。我正在考虑数据库的两种选择。

拥有所有锦标赛的主表，其中存储了基本信息以及锦标赛 ID。然后，我将创建分区、括号、比赛等表格，并将锦标赛 ID 附加到每个表格名称。然后在访问该锦标赛时，我会简单地执行类似“SELECT * FROM BRACKETS_[在此处插入锦标赛 ID]”的操作。

我的另一个选择是只使用通用括号、分区、比赛等表格，每条记录通过适当列中的外键链接到适当的锦标赛（或括号匹配、括号匹配等）。

我对第一种方法的担忧是，它对我来说有点太忙了，而且似乎数据库很快就会变得混乱。我对第二种方法的关注是性能。该程序有望在全国范围内（如果不是国际范围）具有影响力，而且我担心单个表中有这么多记录，并且可能有这么多人同时访问它，这可能会导致问题。

在数据库管理方面，我不是一个完整的新手。然而，这是我第一次完全独自完成，所以任何和所有的帮助都是值得的。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T06:33:52.080

不要为每个锦标赛创建表。表是实体的一种*类型*，而不是实体的*实例*。如果你混淆了这些概念，可维护性和可扩展性将是可怕的。你甚至自己这么说：

> 该程序有望在全国范围内（如果不是国际范围）具有影响力，而且我担心单个表中有这么多记录，并且可能有这么多人同时访问它，这可能会导致问题。

如果您需要为每条记录创建一个完整的表，您将如何扩展到该级别？

关于第二种方法的性能，您为什么担心？您是否有具体的指标来支持这些担忧？关系数据库往往*非常*擅长查询关系数据。所以保持你的数据是相关的。不要试图发挥创造力并破坏您正在使用的数据库技术的设计。

您已经命名了几种类型的实体：

*   比赛
*   分配
*   括号
*   匹配
*   竞争者
*   等等

这些听起来像我的桌子。根据您查询数据的方式来管理您的索引（也就是说，不要过度索引，否则您将通过插入/更新/删除来为它付费）。适当地规范化数据，取消规范化审计和报告更普遍的地方，等等。如果您担心性能，请密切关注查询执行路径，了解您访问数据的方式。轻微的调整可以产生很大的不同。

不要过早地优化。它在没有任何实际原因的情况下增加了复杂性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:43:54.113

首先，找到您需要存储的实体；诸如锦标赛、赛事、团队、竞争对手、奖品等。这些实体中的每一个都可能是桌子。

标准做法是为它们中的每一个设置一个主键。有时存在唯一标识行的列（或列组），因此您可以将其用作主键。但是，通常最好只使用一个名为`ID`或类似数字类型的列。RDBMS 为此类列创建和使用索引将更快、更容易。

将数据存储在它所属的位置：我希望在表中看到事件的日期和时间`events`，而不是在`prizes`表中。

另一个关键点是符合[第一范式](http://en.wikipedia.org/wiki/First_normal_form)，因为这保证了数据的原子性。这很重要，因为它会在以后为您省去很多麻烦。通过正确执行此操作，您还将拥有正确数量的表格。

最后但同样重要的是：为查询中最常出现的列添加相关索引。这将对性能有很大帮助。不用担心表有太多行，如今 RDBMS-es 处理具有数亿行的表，它们旨在能够有效地做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T08:41:26.213

每当出现项目的新实例时创建新表的想法真的很糟糕，抱歉。

为什么这是一个坏主意的（肯定不完整）列表：

*   每当创建新的 Division 或任何内容时，您的代码都需要自动添加表。这绝对是一种不好的做法，应该仅限于非常小众的情况——你的情况绝对不是。
*   如果您决定稍后添加或修改表结构（例如添加新字段），您将不得不将其添加到*数百个*表中，这将是繁琐、容易出错和大维护难题
*   RDBMS 是根据行而不是表和相关（索引、触发器、约束）元素来构建的，因此您正在使用您*的*工具而不是使用它。
*   这应该是真正的关键 - 你打算如何处理诸如“列出所有在周日进行的比赛”或“找到弗兰克佩里活跃的最近三个括号”之类的请求？

你说：

*在数据库管理方面，我不是一个完整的新手。然而，这是我第一次完全独自完成......*

您还记得另一个在需要新集合时克隆表的项目吗？如果是，您是否注意到这种方法存在一些问题？如果不是，您是否认为这正是 DBA 永远不会出于任何原因做的事情？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T10:30:15.740

除了损害代码的质量和可维护性（正如其他人指出的那样），您是否真的会获得任何性能也是值得怀疑的。

当你执行...

```
SELECT * FROM BRACKETS_XXX 
```

... DBMS 需要找到名称与“BRACKETS_XXX”匹配的表，并且该搜索是在 DBMS 的数据字典中完成的，该字典本身就是一堆表。因此，您正在将表中的搜索替换为数据字典表中的搜索。无论哪种方式，您都需要为搜索付出代价。

***（字典表可能是也可能不是“真实”表，并且可能具有或可能不具有与真实表相似的性能特征，但我敢打赌，对于大量**行，这些性能特征不太可能优于“普通”表。还有，数据字典的性能不太可能记录在案，你真的不应该依赖未记录的功能。）*

此外，DBMS 会突然需要[准备](http://en.wikipedia.org/wiki/Prepare_%28SQL%29)更多的 SQL 语句（因为它们现在是*不同*的语句，指的是不同的表），这会给性能带来额外的压力。

# android - 在 Galaxy Nexus 中配置加速度计带宽

> ID：11201760
> 
> 赞同：0
> 
> 时间：2012-06-26T06:24:38.967
> 
> 标签：android, accelerometer, bandwidth

我们正在开展一个项目，我们需要使用 Galaxy Nexus 获得良好的加速度计数据。但是，我们已经尝试通过原生 c 对 100hz 的加速度计数据进行采样，但我们得到的数据仍然很差。Galaxy Nexus 有一个博世 BMA220，它在那里声明可以配置加速度计带宽。我们认为如果我们可以调整带宽，理论上我们可以获得更好的数据。那么有谁知道我们如何才能访问设备本身？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:10:29.917

我通过带宽猜测我们正在谈论低通滤波器的带宽。它似乎可以从它的总线、I2C 或 SPI 完美配置。我无法判断它连接到 SoC 的总线是什么，但我猜它是 I2C 总线之一。

我无法帮助您访问用户区的 I2C，但这是：[为什么要构建 android 源代码？](https://stackoverflow.com/questions/11101840/why-build-android-source)以及“android i2c”上的其他资源可能会对该主题有所了解。

# eclipse - 想在 Eclipse 中为两个不同的项目同时使用旧版本和新版本的 ant 插件

> ID：11201767
> 
> 赞同：0
> 
> 时间：2012-06-26T06:25:25.100
> 
> 标签：eclipse, plugins

我想在 Eclipse 中为两个不同的项目使用两个版本的 ant 插件。这两个版本都可以在我的 Eclipse 的插件文件夹中找到。但是当我尝试将它添加到 Manifest.MF 文件的插件依赖项中时，我只能看到最新版本的 ant 插件。请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:42:58.950

您可以尝试将这两个 ant 插件导入您的 Eclipse 工作区。然后，您可以让您的项目依赖于任何版本的 ant 进行开发。

对于构建或发布过程，您可以使用 Tycho 定义一个目标平台以包含它们。

# java - Java 堆空间：小程序

> ID：11201769
> 
> 赞同：1
> 
> 时间：2012-06-26T06:25:38.407
> 
> 标签：java, applet, heap-memory, appletviewer

我必须编写一个程序来处理 3000*3000 矩阵。它只能工作到 600*600。

所以我通过增加堆大小来运行我的程序，`java -Xms64m -Xmx1024m <class_name>` 因为最初`OutOfMemoryError`正在发生。这解决了问题。

现在，同样的程序用于在 Applets 中绘制值。所以我做了一个包并导入它。但是随后出现了同样的错误，因为您无法*运行*小程序。

您只能键入`javac class_name.java`和`appletviewer class_name.java`。

所以我无法增加堆大小。所以我特意放了一个`main()`函数......计算要绘制的值（存储在数组中）。

小程序会打印它们。该数组是静态的和全局的。

然后我编译（`javac class_name.java`）并运行（`java -Xms64m -Xmx1024m <class_name>`），然后输入`appletviewer class_name.java`。

但是 0,0,0,... 显示出来了。基本上是 int 数组的默认值。

好像该`main()`功能从未运行过。即使数组是全球性的。

最终，我只需要一个`main()`函数......以及一些存储值并在`ppletviewer class_name.java`输入时保留它们的变量。

有没有办法做到这一点？或者增加小程序的堆大小？

因为当我输入逻辑`init()`或`paint()`函数时，同样的错误会出现（`OutOfMemoryError`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T06:33:02.807

您可以在包含小程序的 HTML 中指定 JVM 参数，例如

```
<APPLET archive="applet.jar" code="ClassName" width="300" height="300">
    <PARAM name="java_arguments" value="-Xms64m -Xmx1024m">
</APPLET> 
```

请参阅[Oracle 关于小程序部署的文档](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/applet/applet_deployment.html)

# php - 获取 SourceGuardian 错误

> ID：11201774
> 
> 赞同：0
> 
> 时间：2012-06-26T06:25:57.073
> 
> 标签：php, mysql, database, web

谁能告诉我如何在 bigrock.com 共享主机上安装 SourceGuardian？

请访问此链接：[http ://www.crimsonbux.com/howto-install.php](http://www.crimsonbux.com/howto-install.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:07:09.200

您可以使用 SourceGuardian 网站上的加载器向导来帮助您回答：

[http://www.sourceguardian.com/loaders/download.php](http://www.sourceguardian.com/loaders/download.php)

# string - 如何显式解析 perl 字符串中的变量？

> ID：11201778
> 
> 赞同：3
> 
> 时间：2012-06-26T06:26:16.680
> 
> 标签：string, perl

在我的 perl 脚本中，我想要两个版本的`$config`目录：

```
my $config='$home/client/config'; 
```

和

```
my $config_resolved="$home/client/config"; 
```

但我想从中得到`$config_resolved`，`$config`即这样的：

```
my $config_resolved=resolve_vars($config); 
```

我怎么能在perl中做这样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T09:43:13.210

来自[Perl FAQ](http://perldoc.perl.org/perlfaq.html)（每个 Perl 程序员都应该至少阅读一次）：

> [如何扩展文本字符串中的变量？](http://perldoc.perl.org/perlfaq4.html#How-can-I-expand-variables-in-text-strings%3f)
> 
> （由布赖恩·d·福伊提供）
> 
> 如果可以避免，请不要这样做，或者如果您可以使用模板系统，例如 Text::Template 或 Template Toolkit，请改为这样做。您甚至可以使用 `sprintf`or完成工作`printf`：
> 
> ```
> my $string = sprintf 'Say hello to %s and %s', $foo, $bar; 
> ```
> 
> 但是，对于我不想提取完整模板系统的一次性简单情况，我将使用一个包含两个 Perl 标量变量的字符串。在这个例子中，我想扩展`$foo`和`$bar`到他们的变量值：
> 
> ```
> my $foo = 'Fred';
> my $bar = 'Barney';
> $string = 'Say hello to $foo and $bar'; 
> ```
> 
> 我可以做到这一点的一种方法涉及替换运算符和双`/e`标志。第一个在替换端`/e`进行评估`$1`并将其转换为`$foo`. 第二个以它的值`/e`开头`$foo`并替换它。`$foo`，然后变成“Fred”，这就是字符串中剩下的内容：
> 
> ```
> $string =~ s/(\$\w+)/$1/eeg; # 'Say hello to Fred and Barney' 
> ```
> 
> `/e`也会默默地忽略违反严格的，用空字符串替换未定义的变量名。因为我使用了`/e`标志（甚至两次！），所以我遇到了与字符串形式的 eval 相同的安全问题。如果 有什么奇怪的东西`$foo`，也许像`@{[ system "rm -rf /" ]}`，那么我可能会给自己惹上麻烦。
> 
> 为了解决安全问题，我还可以从哈希中提取值，而不是评估变量名。使用单个`/e`，我可以检查哈希以确保该值存在，如果不存在，我可以用标记替换缺失的值，在这种情况下 `???`表示我错过了一些东西：
> 
> ```
> my $string = 'This has $foo and $bar';
> my %Replacements = (
>     foo  => 'Fred',
>     );
> # $string =~ s/\$(\w+)/$Replacements{$1}/g;
> 
> $string =~ s/\$(\w+)/
>             exists $Replacements{$1} ? $Replacements{$1} : '???'
>             /eg;
> print $string; 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:36:16.640

我用`eval`这个。因此，您必须用它们的值替换所有标量（它们的名称）。

```
$config = 'stringone';
$boo = '$config/any/string';
$boo =~ s/(\$\w+)/eval($1)/eg;
print $boo; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T07:23:40.280

因为您使用 my 将其声明为私有变量，所以您不妨使用**/ee**修饰符。这可以找到声明在本地范围内的变量：

```
$boo =~ s/(\$\w+)/$1/eeg; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-26T11:50:37.860

这是由`s///`.

在下面的程序中，第一个`/e`计算字符串`$1`以获取`$home`，而第二个计算`$home`获取变量的值`HOME`。

```
use strict;

my $home = 'HOME';

my $config = '$home/client/config';

my $config_resolved = resolve_vars($config);

print $config_resolved, "\n";

sub resolve_vars {
  (my $str = shift) =~ s/(\$\w+)/$1/eeg;
  return $str;
} 
```

**输出**

```
HOME/client/config 
```

# c# - 无法使用类型参数将派生类型转换为基抽象类

> ID：11201784
> 
> 赞同：11
> 
> 时间：2012-06-26T06:26:51.123
> 
> 标签：c#, compiler-errors

我有一个简单的工厂方法，它提供了一个基于提供的泛型类型参数的具体实现实例。如果具体类继承自具有类型参数的公共抽象基类，我无法强制转换它们。编译器告诉我`Error 2 Cannot convert type 'Car' to 'VehicleBase<T>'`。如果我将抽象类替换为具有相同类型参数的接口，或者我从抽象类中删除泛型类型参数，它工作正常。

```
interface IWheel
{
}

class CarWheel : IWheel
{
}

abstract class VehicleBase<T>
{
}

class Car : VehicleBase<CarWheel>
{
}

class VehicleFactory
{
    public static VehicleBase<T> GetNew<T>()
    {
        if (typeof(T) == typeof(CarWheel))
        {
            return (VehicleBase<T>)new Car();
        }
        else
        {
            throw new NotSupportedException();
        }
    }
} 
```

这无法在`(VehicleBase<T>)new Car()`. 这是编译器缺陷，还是故意设计决定以不同的方式处理具有类型参数的抽象类和接口？

作为一种解决方法，我总是可以让抽象类实现一个接口并将其用作我的工厂方法的返回值，但我仍然想知道为什么会发生这种行为。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T06:30:42.133

这是无法**证明**的，因为通用代码需要在**所有**可能的情况下都可以工作（使用相同的 IL），例如`T`，没有什么可说`Car : VehicleBase<float>`的。`if`编译器不会过度分析检查的事实- 静态检查器单独处理每个语句`T`，*它*不会尝试理解条件的因果关系。`CarWheel`

 *要强制它，请`object`在中间投射：

```
return (VehicleBase<T>)(object)new Car(); 
```

然而！您的方法并不是真正的“通用”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-26T06:44:57.110

这既不是编译器缺陷，也不是故意的决定。泛型类的类型参数[既不是协变的也不是逆变](http://msdn.microsoft.com/en-us/library/dd799517.aspx)的，即同一个泛型类的特化之间没有继承关系。从文档：

> 在 .NET Framework 版本 4 中，变体类型参数仅限于泛型接口和泛型委托类型。

这意味着以下代码将编译，因为它使用接口而不是抽象类：

```
interface IWheel
{
}

class CarWheel : IWheel
{
}

interface IVehicleBase<T> 
{
}

class Car : IVehicleBase<CarWheel>
{
}

class VehicleFactory
{
    public static IVehicleBase<T> GetNew<T>() 
    {
        if (typeof(T) == typeof(CarWheel))
        {
            return (IVehicleBase<T>)new Car();
        }
        else
        {
            throw new NotSupportedException();
        }
    }
} 
```

查看“[泛型中的协方差和逆变](http://msdn.microsoft.com/en-us/library/dd799517.aspx)”以获取更多信息和示例。

C# FAQ 博客中还有一个[协变和逆变常见问题解答，其中包含更多信息，以及一个](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)[11 部分的系列！](http://blogs.msdn.com/b/ericlippert/archive/tags/covariance+and+contravariance/)[埃里克·利珀特 ( Eric Lippert](http://blogs.msdn.com/b/ericlippert) ) 的主题

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T06:30:49.547

这似乎有效：

```
return new Car() as VehicleBase<T>; 
```

我*猜*为什么会这样：
由于泛型类型实例`VehicleBase<T>`不相关，因此无法证明强制转换它们可以工作：

![在此处输入图像描述](../Images/7d08eea068369a55f555fe6ed1f154af.png)

如果`T`是 type `Blah`，则演员表将不起作用。你不能回到 object 然后再选择另一个分支（毕竟 C# 中没有多重继承）。

通过将其转换回`object`之前，您再次打开了转换可能起作用的可能性，因为可能仍有一条通往`VehicleBase<CarWheel>`. 当然，一个界面可以出现在下面这棵树的*任何地方*`object`，所以它也应该可以工作。*

# asp.net - Jquery 对话框提交验证

> ID：11201788
> 
> 赞同：0
> 
> 时间：2012-06-26T06:27:04.273
> 
> 标签：asp.net, html, jquery-ui

我需要有人告诉我如何使用 jquery 对话框在提交之前询问“确认”或“取消”验证。我收到Microsoft JScript 运行时错误：在 IE9 上，*对象不支持此属性或方法“对话框” ：*

```
<script type="text/javascript">
  $(document).ready(function () {

    $("#savechanges").click(function () {

        $("#dialog").dialog({
            modal: true,
            autoOpen: false,
            buttons: {
                "Confirm": function () {
                    $("#myformid").submit();
                },
                "Cancel": function () {
                    $(this).dialog("close");
                }
            }
        });         
        return false;
    });
});
</script>

<div id="dialog"></div>

 <p>
    <input type="submit" id="savechanges" value="Save changes" />
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:45:47.083

如果设置`autoOpen`为`false`，定义时不会打开对话框。所以你应该设置它`true`。

来自 jQuery-UI 文档，

```
autoOpen

When autoOpen is true the dialog will open automatically when dialog is called. 
If false it will stay hidden until .dialog("open") is called on it. 
```

[演示](http://jsfiddle.net/p5FuX/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:18:41.460

此问题背后可能有多种原因，请使用任何调试工具（如 firebug）进行检查

1.  使用 Firebug for Firefox 之类的工具来验证是否包含每个 JS 文件。
2.  确保页面上没有其他可能导致错误的 JS。

3.  验证您下载了正确版本的文件。

# javascript - JQuery 触发区域事件和 Internet Explorer

> ID：11201789
> 
> 赞同：0
> 
> 时间：2012-06-26T06:27:06.137
> 
> 标签：javascript, jquery, html, internet-explorer

我有一个 HTML 图像映射，我正在使用 mapper.js 创建 onMouseOver 效果。我想制作特定的地图区域（具有“高”类）以在页面加载时触发 onMouseOver 事件。除了在 Internet Explorer 中，一切正常。

这就是我到目前为止所拥有的。

**Javascript：**

```
function ready() {
    $("area").mouseleave(function() {
        $('.high').each(function(){
            $(this).trigger('mouseover');
        }); 
    });
    $('.high').each(function(){
        $(this).trigger('mouseover');
    });
} 
```

**HTML：**

```
...
<body onload="ready();">
...
<map>
  <area id="Philippines" rel="Philippines" class="noborder iopacity100 icolorfff502 {if in_array("Philippines",$sal)} high {/if}" shape="poly" alt="Philippines" coords="367,308,367,301,364,301,363,295,365,292,360,293,357,291,356,287,356,282,354,281,351,273,354,274,353,268,353,262,360,263,363,266,365,271 />
</map>
... 
```

任何想法如何解决这个问题？

# r - R：多行的switch语句

> ID：11201790
> 
> 赞同：2
> 
> 时间：2012-06-26T06:27:14.053
> 
> 标签：r, switch-statement

在 R 中：我有一个矩阵，其中一列分为 8 种类型：a、b、c、d、e、f、g、h。我需要使用其他列中的数据对每种类型进行不同的计算。我想使用 switch() 函数来自动循环遍历每种类型并说明每种类型的差异计算；但是，我在网上看到的所有内容都只显示了每个开关的单线开关计算的语法示例。

这是一个使用 switch() 帮助中提供的代码的示例。我知道 mean() 是一个函数，但是对于这个例子来说，它不是一个函数，因为我只是想说明我不知道语法（并且在我的在线研究中没有明确说明） ：

```
centre <- function(x, type) {
  switch(type,
     mean = {
           total.sum<-sum(type)
           mean = total.sum/length(type)
     },
     median = median(x),
     trimmed = mean(x, trim = .1))
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T01:21:05.520

我认为沟通不畅来自您示例中的错字：

```
 mean = {
       total.sum<-sum(type)
       mean = total.sum/length(type)
 }, 
```

应该

```
 mean = {
       total.sum<-sum(x)
       mean = total.sum/length(x)
 }, 
```

如果您进行此更改，它的行为将完全符合您的预期。

ETA：我不确定您的评论中有什么问题。请尝试以下代码：

```
set.seed(1)

centre <- function(x, type) {
  switch(type,
     mean = {
           total.sum<-sum(x)
           mean = total.sum/length(x)
     },
     median = median(x),
     trimmed = mean(x, trim = .1))
}

x <- rcauchy(10)
print(centre(x, "mean"))
print(centre(x, "median"))
print(centre(x, "trimmed")) 
```

输出是：

```
[1] -0.4844658
[1] -0.236111
[1] -0.3632328 
```

# java - 将 GMT 转换为设备时区的代码不起作用

> ID：11201793
> 
> 赞同：1
> 
> 时间：2012-06-26T06:27:35.820
> 
> 标签：java, android, calendar, timezone

我从 RSS 提要中输入了以下格式的时间：

**2012 年 6 月 13 日星期三 17:05:44 +0000**

我需要输出为**Wed Jun 13, 2012 22:35:44**

源时间始终为 GMT，所需输出时间为设备时区（可能为 GMT+5:30 或 GMT-2:00 等）。

所以首先我有一个带有 GMT 的日历实例，如下所示。

```
Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone("GMT")); 
```

然后在输入时间使用 StringTokenizer 修改日历，如下所示。

```
calendar.set(Calendar.DAY_OF_MONTH, date);
calendar.set(Calendar.MONTH, month);
.
.
etc. 
```

接下来我有以下代码：

```
calendar.setTimeZone(TimeZone.getDefault()); 
```

基本上，上面的代码将日历更改为设备时区。现在问题是上面的代码*在正常环境下工作正常，但在 Android 中不工作*。有什么解决办法吗？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:40:18.780

首先，您需要[DateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)来解析[Date](http://developer.android.com/reference/java/util/Date.html)对象中的字符串值，然后您可以在 Date 中设置 Timezone 以及您可以借助 Date制作[Calendar对象，该日历对象将成为您的设备时区实例。](http://developer.android.com/reference/java/util/Calendar.html)

下面的代码在我身边工作

```
 String input_format = "EEE MMMMM dd HH:mm:ss Z yyyy";
    String input_value="Wed Jun 13 17:05:44 +0000 2012";
    Date date=null;

    SimpleDateFormat sdf = new SimpleDateFormat(input_format);
    try {
        date = sdf.parse(input_value);
    } catch (ParseException e) {
        e.printStackTrace();
    }

    Calendar calendar = sdf.getCalendar();
    calendar.setTime(date); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T06:33:41.037

如果我理解正确，您只想设置 timezome

```
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
alarmManager.setTimeZone("Europe/Paris"); 
```

例如，将时区设置为巴黎

# ajax - 如何使用 ajax 向 Spring 后端发送“完全经过身份验证”的请求？

> ID：11201795
> 
> 赞同：3
> 
> 时间：2012-06-26T06:27:50.213
> 
> 标签：ajax, spring-security, http-headers

我有一个需要 HTTP 基本身份验证的 Spring Web 服务，我正在尝试通过 Javascript 访问它。

我的 Spring 安全配置具有以下定义：

```
<security:http create-session="stateless"> 
    <security:http-basic />
    <security:intercept-url pattern="/item/**"
        access="ROLE_ADMIN,ROLE_USER" />
</security:http>

    <security:authentication-manager>
    <security:authentication-provider>
        <security:user-service>
            <security:user name="Aladdin" password="open sesame"
                authorities="ROLE_USER, ROLE_ADMIN" />
        </security:user-service>
    </security:authentication-provider>
</security:authentication-manager> 
```

我的 Javascript 客户端正在相应地设置 Authentication 标头。但是我总是会得到 401 的回复：

```
Request URL:http://localhost:8080/item
Request Method:GET
Status Code:401 Full authentication is required to access this resource

Request
Accept:application/json, text/javascript, */*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Authorization:BASIC QWxhZGRpbjpvcGVuIHNlc2FtZQ==
Cache-Control:no-cache
Connection:keep-alive
Cookie:JSESSIONID=x8foxdzzuc8g1cqnhxj34u4tv
Host:localhost:8080
Pragma:no-cache
Referer:http://localhost:8080/index.html
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5
X-Requested-With:XMLHttpRequest

Response:
Cache-Control:must-revalidate,no-cache,no-store
Content-Length:1461
Content-Type:text/html;charset=ISO-8859-1
Server:Jetty(8.1.3.v20120416)
WWW-Authenticate:Basic realm="Spring Security Application" 
```

我的请求中是否缺少某些内容？我使用 Wikipedia 的用户/密码示例来确保编码没有混乱 - 它与[此处的示例匹配](http://en.wikipedia.org/wiki/Basic_access_authentication)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:47:38.870

问题比我想象的要简单——授权标头应该说“基本”而不是“基本”。只是改变它修复了整个事情。

# python - 为什么在使用 sum() 函数时会出现 'int' object is not callable 错误？

> ID：11201801
> 
> 赞同：9
> 
> 时间：2012-06-26T06:28:29.697
> 
> 标签：python, sum, python-2.7, callable

我试图弄清楚为什么在范围上使用 sum 函数时会出错。

这是代码：

```
data1 = range(0, 1000, 3)
data2 = range(0, 1000, 5)
data3 = list(set(data1 + data2)) # makes new list without duplicates
total = sum(data3) # calculate sum of data3 list's elements
print total 
```

这是错误：

```
line 8, in <module> total2 = sum(data3)
TypeError: 'int' object is not callable 
```

我发现了这个错误的解释：

> 在 Python 中，“可调用”通常是一个函数。该消息意味着您将数字（一个>“int”）视为一个函数（一个“可调用”），因此Python不知道该做什么，所以它>停止。

我还读到 sum() 能够用于列表，所以我想知道这里出了什么问题？

我刚刚在 IDLE 模块中尝试过，效果很好。但是，它在 python 解释器中不起作用。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-26T06:41:29.473

您可能将“sum”函数重新定义为整数数据类型。所以它正确地告诉你整数不是你可以传递范围的东西。

要解决此问题，请重新启动您的解释器。

```
Python 2.7.3 (default, Apr 20 2012, 22:44:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> data1 = range(0, 1000, 3)
>>> data2 = range(0, 1000, 5)
>>> data3 = list(set(data1 + data2)) # makes new list without duplicates
>>> total = sum(data3) # calculate sum of data3 list's elements
>>> print total
233168 
```

如果你`sum`隐藏内置，你会得到你看到的错误

```
>>> sum = 0
>>> total = sum(data3) # calculate sum of data3 list's elements
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'int' object is not callable 
```

另外，请注意，无需将其转换`sum`为`set``list`

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-26T06:31:09.343

这意味着在你的代码中的其他地方，你有类似的东西：

```
sum = 0 
```

它用 int （不是）隐藏了内置总和（*可调用）。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T06:52:55.900

在解释器中，它很容易重新启动并修复此类问题。如果您不想重新启动解释器，还有另一种修复方法：

```
Python 2.6.6 (r266:84292, Dec 27 2010, 00:02:40)
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> l = [1,2,3]
>>> sum(l)
6
>>> sum = 0 # oops! shadowed a builtin!
>>> sum(l)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'int' object is not callable
>>> import sys
>>> sum = sys.modules['__builtin__'].sum # -- fixing sum
>>> sum(l)
6 
```

如果您碰巧将值分配给任何其他内置函数，这也会派上用场，例如`dict`或`list`

# android - 查找多个地址的经纬度

> ID：11201802
> 
> 赞同：0
> 
> 时间：2012-06-26T06:28:33.097
> 
> 标签：android, latitude-longitude

我正在构建一个餐厅应用程序，为此我创建了一个数据库，其中包括餐厅名称。电话号码、地址、纬度和经度。纬度和经度用于查找位置。问题是我有 2201 家餐厅，我需要找到所有的经纬度。我正在使用[http://www.findlatitudeandlongitude.com/](http://www.findlatitudeandlongitude.com/) 来查找纬度和经度。但是这是一个非常漫长的过程。还有其他方法可以获取多个位置的经纬度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:36:04.637

[**基本上，Android 为Android GeoCoder**](http://developer.android.com/reference/android/location/Geocoder.html)类提供了一种简单的方法，用于从位置地址获取纬度和经度，反之亦然，（因此您不需要任何其他服务）

```
Geocoder coder = new Geocoder(this);
List<Address> address;

try {
    address = coder.getFromLocationName(locAddress,1);
    if (address == null) {
        return null;
    }
    Address location = address.get(0);
    Log.e("Latitude: " +location.getLatitude(),"Longitude: " + location.getLongitude());
} 
```

还包括清单文件中的权限，

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:41:32.947

如果你有一个地址数组，那么你可以很容易地找到多个地址纬度和经度，这里是 google api [http://maps.google.com/maps/api/geocode/json?address=ahmedab](http://maps.google.com/maps/api/geocode/json?address=ahmedabad&sensor=false) ​​ad&sensor=false 代替艾哈迈达巴德的链接你可以传递你的地址你可以调用这个api获取多个地址而不是从json响应你可以获取纬度和经度并将它们存储在一个数组中。在我的项目中我已经这样做了，这是最简单的方法祝你好运Aamirkhan I。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:43:27.107

要获得准确的位置坐标，您可以使用以下站点，

[http://itouchmap.com/latlong.html](http://itouchmap.com/latlong.html)

[http://www.whatsmygps.com/](http://www.whatsmygps.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T06:49:20.567

[http://maps.googleapis.com/maps/api/geocode/json?address=%@&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=%@&sensor=false)

试试这个谷歌的网络服务.. 只需在上述网络服务中提供地址，作为回应，您将获得位置详细信息......

例如：[http ://maps.googleapis.com/maps/api/geocode/json?address=Pune&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=Pune&sensor=false)

会给你浦那的位置...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T06:49:31.620

使用[GetLatLon](http://www.getlatlon.com/) .com 。这是我最喜欢的。

# wordpress - NGINX 上 Wordpress 3.x4 的 SEO Clean URL

> ID：11201808
> 
> 赞同：0
> 
> 时间：2012-06-26T06:28:52.813
> 
> 标签：wordpress, url, seo, nginx

我正在尝试制作原始网址：

[http://site.com/test/?p=X](http://site.com/test/?p=X)

变成这样：

[http://site.com/test/postname](http://site.com/test/postname)

清理 URl 后，需要让 wordpress 识别干净的 URL。

有任何想法吗？

# javascript - 从 AJAX (JSON) 响应中获取来自 JavaScript 的数据

> ID：11201810
> 
> 赞同：1
> 
> 时间：2012-06-26T06:28:56.297
> 
> 标签：javascript, ajax, json

```
{
   "id":"1",
   "firstName":"vishal",
   "姓氏":"gehlot",
   "title":"先生",
   "officePhone":"643636",
   “最后修改”：””
},
{
   "id":"2",
   "firstName":"daya",
   "lastName":"dayaji",
   "title":"先生",
   "officePhone":"858587",
   “最后修改”：””
},
{
   "id":"7",
   "firstName":"tripti",
   “姓氏”：“三”，
   “标题”：“女士”，
   "officePhone":"4535",
   “最后修改”：””
},
{
   “id”：“59”，
   "firstName":"大雅",
   “姓氏”，
   “标题”：””，
   "officePhone":"698789",
   “最后修改”：””
},
{
   “身份证”：“89”，
   "firstName":"prashant",
   "姓氏":"p",
   “标题”：””，
   "officePhone":"987698",
   “最后修改”：””
}

```

如何使用 JavaScript 获取每个数据？

```
<script type="text/javascript" src="ajax.js">
function loadXMLDoc()
{
    alert('inside');
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
 // alert(xmlhttp.readyState);
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
   // alert(xmlhttp.responseText);
    var obj = [{"id":"1","firstName":"vishal","lastName":"gehlot","title":"Mr.","officePhone":"643636","lastModified":""},{"id":"2","firstName":"daya","lastName":"dayaji","title":"Mr.","officePhone":"858587","lastModified":""},{"id":"7","firstName":"tripti","lastName":"tri","title":"ms","officePhone":"4535","lastModified":""},{"id":"59","firstName":"Daya","lastName":"s","title":"","officePhone":"698789","lastModified":""},{"id":"89","firstName":"prashant","lastName":"p","title":"","officePhone":"987698","lastModified":""}];
      alert(obj);
      for(var index=0; index<obj.length;index++)   {

          alert((obj[index].id));
          alert((obj[index].firstName));
              //like this....
          }
    }
  }
xmlhttp.open("GET","localapi.php?mode=list",true);
xmlhttp.send();
}

</script>
<input type="button" value="Check Data" onclick="loadXMLDoc()" /> 
```

这段代码对我有用，但是当我从 ajax 获取 obj 的相同响应时，它不起作用……问题是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T06:36:34.830

代码：-

```
var obj=[{"id":"1","firstName":"vishal","lastName":"gehlot","title":"Mr.","officePhone":"643636","lastModified":""},{"id":"2","firstName":"daya","lastName":"dayaji","title":"Mr.","officePhone":"858587","lastModified":""},{"id":"7","firstName":"tripti","lastName":"tri","title":"ms","officePhone":"4535","lastModified":""},{"id":"59","firstName":"Daya","lastName":"s","title":"","officePhone":"698789","lastModified":""},{"id":"89","firstName":"prashant","lastName":"p","title":"","officePhone":"987698","lastModified":""}];

        for(var index=0; index<obj.length;index++)   {

            document.write(obj[index].id)
            document.write(obj[index].firstName)
                //like this....
            } 
```

链接：- [http://jsfiddle.net/rcDue/3/](http://jsfiddle.net/rcDue/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:31:48.540

> 如何使用javascript获取**每个数据**

像这样：

```
var obj = JSON.parse(yourJSONData);

for (var x in obj) {
  if (obj.hasOwnProperty(x)) {
    console.log(obj[x]);
  }
} 
```

上面的代码用于[`JSON.parse`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)将您的 JSON 字符串转换为 JavaScript 对象，然后使用`for-in`循环读取它的每个属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:32:39.523

那是一个javascript对象。假设您将其保存在变量中

`var myObjects = {...}`

使用简单的“点”符号访问它

`alert(myObject.id)`产生警报“1” `alert(myObject.firstName)`产生“vishal”

编辑：抱歉，要获取每个属性：

尝试

```
for (var propertyName in myObject) {
     alert(myObject[propertyName]);
} 
```

# iphone - 我可以更改通知的副标题吗？

> ID：11201813
> 
> 赞同：1
> 
> 时间：2012-06-26T06:29:19.280
> 
> 标签：iphone, ios, push-notification

每个通知似乎都有一个标题、副标题和内容。标题来自您的应用程序包的显示名称。服务器可以更改内容。我的问题是：有没有办法改变字幕？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T06:38:46.327

除了这些，你不能改变任何东西

*   向用户显示的警报消息
*   用于标记应用程序图标的数字
*   播放的声音

# http - 用于服务器的正确用户代理是什么？

> ID：11201814
> 
> 赞同：5
> 
> 时间：2012-06-26T06:29:29.870
> 
> 标签：http, request, user-agent

对于[Filepicker.io](https://www.filepicker.io)，我们构建了“从 url 抓取”，但某些网站不喜欢不传递 User-Agent 标头。我可以按照其他[答案](https://stackoverflow.com/questions/9265616/why-does-this-url-raise-badstatusline-with-httplib2-and-urllib2)中的建议使用库存浏览器用户代理，但作为一个优秀的网络公民，我想知道是否有更合适的用户代理来为请求另一台服务器数据的服务器设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T23:51:42.197

取决于您编写服务器时使用的语言。例如，Python 的 urllib 将默认值设置为`User-agent: Python-urllib/2.1`，但如果您愿意，您可以轻松地将其设置为类似`User-agent: filepicker.io/<your-version-here>`或更特定语言的内容。

# python - Tkinter Python 2.6 中的平铺包

> ID：11201822
> 
> 赞同：2
> 
> 时间：2012-06-26T06:30:18.700
> 
> 标签：python, tkinter, ttk

我正在尝试改变我的 Tkinter 应用程序的外观，但运气不佳。我发现了 tile 包并查看了我找到的站点，但我尝试的没有任何效果。我使用的导入代码如下：

```
import Tkinter as Tk
import ttk
import Tile

win1 = Tk()
win1.call('namespace', 'import', '-force', 'ttk::*')
win1.call('tile::setTheme', 'xpnative') 
```

错误：_tkinter.TclError：无效的命令名称'tile::setTheme'

我真的很想知道如何让它适用于对 Tkinter 的任何类型的设计更改。我希望我的界面看起来不错！

将不胜感激任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:37:19.487

即使它没有链接到 Tile 包。我找到了如何获得“xpnative”主题。

简单地：

```
from Tkinter import *
import ttk

s = ttk.Style()
s.theme_use('xpnative') 
```

然后您可能必须为各种小部件插入 ttk.[widgethere]，但它似乎仍然可以工作。

玩得开心！（Python 2.6 版）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:43:23.347

Tile 只是 ttk 包的旧版本。如果您已经可以访问 ttk，则不需要它。

有关如何配置样式的信息，请参阅[关于样式的 tkdocs 教程](http://www.tkdocs.com/tutorial/styles.html)

# iphone - 将地址转换为地理位置并添加范围

> ID：11201824
> 
> 赞同：0
> 
> 时间：2012-06-26T06:30:31.013
> 
> 标签：iphone, api, latitude-longitude

我的服务器上有城市地址和州。

我需要根据距离范围（即英里）在我的 iPhone 应用程序中获取数据。

请给一些适当的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:47:12.613

您可以使用[谷歌地理编码](https://developers.google.com/maps/documentation/geocoding/#GeocodingRequests)来获取经纬度表格地址。

例如 ：

```
http://maps.google.com/maps/api/geocode/json?sensor=false&address=newyork,us 
```

> 地址 - 您要进行地理编码的地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:55:28.117

您可以前往每个城市并测量一些星星的最高位置。
通过[高度关系](http://en.wikipedia.org/wiki/Culmination)，您可以计算出您当前的纬度。

经度有点复杂。你需要一个准确的时钟和一个星位/时间的表格/图表。然后你测量一些星星的最高位置的时间并将其与你的表进行比较。通过这两个值的差异，您可以计算出城市的经度。

但是已经有人这样做并分享了他们的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:42:46.077

您可以使用[谷歌地理定位服务](https://developers.google.com/maps/documentation/geocoding/)，它会从地址获取纬度，反之亦然。

请阅读[常见问题解答](https://developers.google.com/maps/faq)。

另一个是[Foursquare](https://developer.foursquare.com/docs/venues/search)，它也很好用并且提供了很好的数据。

这将解决您的问题。

# asp.net - Sqlcommand 是旧时尚新的一个是 Dataset

> ID：11201828
> 
> 赞同：0
> 
> 时间：2012-06-26T06:30:43.150
> 
> 标签：asp.net, sql, c#-4.0

我为我的应用程序编写了这种类型的命令。但是我的讲师告诉我那些东西是旧时尚，使用新的东西，比如数据集。我想知道你们是正确的吗？那些东西已经过时了？日期设置是这样做的新方法吗？

```
protected void btn_edit_Click(object sender, EventArgs e) 
{ 
    using(SqlConnection con = new SqlConnection(CONN_STR))
    {
      con.Open(); 

      using(SqlCommand cmd = new SqlCommand("UPDATE tbl_BinCardManager SET ItemName = @ItemName WHERE ItemNo = @ItemNo"), con)
      {

        // TODO: fill in param values with real values
        cmd.Parameters.AddWithValue("@ItemName", "my item name");
        cmd.Parameters.AddWithValue("@ItemNo", 1);

        cmd.ExecuteNonQuery(); 
      }
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:38:25.537

您使用的类是 .NET 中几乎所有数据访问技术的基本要素。围绕它有一些抽象，例如 DataSets、LINQ to SQL、Entity Framework 等。但最终它们都使用 SqlConnection 和朋友。

事实上，在我提到的 3 种技术中，DataSet 是那些在很大程度上被丢弃并且在 .NET 2.0 时代工具之外几乎没有支持的技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:56:26.587

不，您的代码根本不是老式的..它对您的要求非常简单。

在真正需要时使用`DATASET`..比如，当您想将一些数据脱机并修改它并再次反映对数据库的更改时..

事实上`SqlCommand`，命令不是`DATASET`..

`DATASET`是可以保存从数据库检索或本地创建的表的东西。

`SqlCommand`是可以帮助您从/向数据库表获取/插入/更新数据的东西

即使你正在使用`DATASET`你仍然需要`SqlCommand`..那么**不存在`Sqlcommand`过时和`Dataset`新的问题**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T06:32:33.627

DataSet 在内部使用 DataReader 来填充日期。数据集也可以在断开连接模式下工作，但您的代码无论如何都不会过时。

您的老师可能正在谈论使用[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)。

# facebook-graph-api - Facebook 帖子从

> ID：11201837
> 
> 赞同：0
> 
> 时间：2012-06-26T06:31:27.417
> 
> 标签：facebook-graph-api, oauth-2.0

我有一个 facebook 应用程序和一个用于该应用程序的组。是否可以使应用程序自动在组上发布。就发帖而言，没关系，但是如何授予应用程序在组上发帖的权限？

我正在使用 facebook graph explorer 来测试这个

[https://graph.facebook.com/GROUP_ID/feed](https://graph.facebook.com/GROUP_ID/feed)，方法 Post 并添加一个带有 URL 'http://www.google.com' 的字段'link' 并选择应用程序作为我想要的应用程序。我收到此错误：

```
{
  "error": {
    "message": "An unexpected error has occurred. Please retry your request later.", 
    "type": "OAuthException", 
    "code": 2
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:23:28.890

问题是权限问题，需要的权限是 user_groups,publish_stream

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:26:07.553

该错误并没有完全说明这一点，但我猜它是因为您没有发送有效的访问令牌而引发的。

从允许发布到该组墙的用户之一获取用户访问令牌。

# .net - 如果某个进程需要分配超过 2 GB 的内存会发生什么？

> ID：11201838
> 
> 赞同：2
> 
> 时间：2012-06-26T06:31:30.897
> 
> 标签：.net, windows, memory-management, internal

据我所知 - Windows 中的任何进程都会获得 2 GB 的虚拟内存地址空间（在某些情况下为 3 GB）用于分配用途。

1.  在什么情况下，进程将获得 3 GB 而不是 2 GB？应用程序开发人员是否有某种方法可以“要求”操作系统分配超过 2/3 GB 的虚拟地址空间？

2.  如果进程需要超过 3/2 GB 会发生什么？（我猜系统会出现一些“内存不足异常”——但有什么方法可以避免这种情况吗？）

例如 - 如果进程是需要分配多于 2/3 GB 的“Microsoft SQL Server”会发生什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:34:20.230

> 据我所知 - Windows 中的任何进程都会获得 2 GB 的虚拟内存地址空间（在某些情况下为 3 GB）用于分配用途。

不，在 x64 上虚拟内存空间要大得多，这就是为什么像 SQL Server 这样的工具通常在 x64 上工作得最好的原因。

请注意，在当前的 .NET 中，**单个对象**（字符串、数组等）的大小限制为 2GB，但看起来很快就会消失（允许大量对象）。参见[gcAllowVeryLargeObjects](http://msdn.microsoft.com/en-us/library/hh285054%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:43:52.077

32 位进程有 4 GB 地址空间，其中通常 1 GB 为硬件保留，1 GB 为 Windows 保留。使用[boot.ini 中的开关，](http://www.maxi-pedia.com/3GB+switch+Windows+boot.ini+3+GB)您可以使 Windows 为进程提供 3 GB 的地址空间。

64 位进程有 16 PB 地址空间。我不知道保留了多少，但可用的地址空间比 2 或 3 GB 大得多。

# xtk - 在 xtk 中跟踪相机移动和对象方向

> ID：11201839
> 
> 赞同：1
> 
> 时间：2012-06-26T06:31:36.207
> 
> 标签：xtk

这是 Matt 之前关于相机方向的问题的后续内容。我正在与他合作开发用于 3D 水力模拟的 python 分析代码的 javascript 界面。

我们已经成功地使用 xtk 在我们的模拟中构建了网格结构的 3D 模型。生成的演示看起来很像 xtk 网站上的简单立方体演示，因此您基于该演示的建议应该很容易移植到我们的用例中。

我们能够在运行时从 XTK 相机对象推断出视图矩阵。经过大量的摸索和反复试验，我们发现视图矩阵实际上是（在 openGL 命名法中）模型-视图矩阵 - 它结合了相机的视图和平移与相机正在查看的模型的方向和平移在。

当我们相对于模型单击、拖动和缩放时，我们试图推断相机相对于（从我们的角度来看）固定模型的方向。最后，我们希望保存一组关键帧，我们可以从中生成相机路径，最终将导出到 python 以制作模拟数据的 3D 体积渲染电影。我们尝试了很多方法，但无法反转模型视图矩阵来推断相机相对于模型的方向。

您对如何做到这一点有任何见解吗？我们对视图矩阵的推断是正确的，还是它实际上跟踪的东西与我上面描述的不同？

从我们的角度来看，如果 xtk 能够跟踪相机*相对于模型*的向上、外观和位置向量，这样我们就可以直接查询和使用这些值，这将是非常棒的。

非常感谢您在这方面的帮助以及免费提供您的可视化工具包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:26:00.660

只要我了解您的需求[http://3dgep.com/?p=1700](http://3dgep.com/?p=1700) ，此页面可能会有用。它很好地理解了我自己需要的视图矩阵，大约在页面的中途可能是一些您可以使用的信息[http://3dgep.com/?p=1700#Converting_between_Camera_Transformation_and_View_Matrix](http://3dgep.com/?p=1700#Converting_between_Camera_Transformation_and_View_Matrix)。

# list - 与 List 相比，F# 序列操作主要慢？

> ID：11201850
> 
> 赞同：3
> 
> 时间：2012-06-26T06:32:47.493
> 
> 标签：list, f#, sequence

使用 F# List 和 Seq 合并两个排序的列表/序列。这些值是通过从辅助存储器中读取两个文件来获得的 - 文件读取的结果存储在两个序列中。假设整数存储用于测试目的，现在尝试合并这些以使用以下代码打印出排序序列：

```
let rec printSortedSeq l1 l2 = 
    match ( l1, l2) with
    | l1,l2 when Seq.isEmpty l1 && Seq.isEmpty l2 -> printfn "";
    | l1, l2 when Seq.isEmpty l1 -> printf "%d " (Seq.head l2);  printSortedSeq l1 (Seq.skip 1 l2);
    | l1, l2 when Seq.isEmpty l2-> printf "%d " (Seq.head l1);  printSortedSeq (Seq.skip 1 l1) [];

    | l1,l2 -> if Seq.head l1 = Seq.head l2 then printf "%d " (Seq.head l1);  printSortedSeq (Seq.skip 1 l1) (Seq.skip 1 l2); 
                               elif Seq.head l1 < Seq.head l2 then printf "%d " (Seq.head l1);  printSortedSeq (Seq.skip 1 l1) (Seq.skip 1 l2); 
                               else printf "%d " (Seq.head l2);  printSortedSeq (Seq.skip 1 l1) (Seq.skip 1 l2); 
```

该代码最初是为了合并两个排序列表而编写的：

```
let rec printSortedList l1 l2 = 
    match ( l1, l2) with
    | h1 :: t1 , h2 :: t2 -> if h1 = h2 then printf "%d " h1;  printSortedList t1 t2; 
                               elif h1 < h2 then printf "%d " h1;  printSortedList t1 l2; 
                               else printf "%d " h2;  printSortedList l1 t2;
    | [] , h2 :: t2 ->  printf "%d " h2;  printSortedList [] t2;
    | h1 :: t1, [] -> printf "%d " h1;  printSortedList t1 [];
    | [], [] -> printfn""; 
```

使用它们的性能大大优于列表。我在做#time之后给出计时结果；；在 FSI 中关于一些试验输入。

```
let x = [0..2..500];
let y = [1..2..100];

let a = {0..2..500}
let b = {1..2..100} 
```

printSortedList xy;; 真实：00:00:00.012，CPU：00:00:00.015

printSortedSeq ab；；真实：00:00:00.504，CPU：00:00:00.515

问题是 - 有没有办法使用序列使事情变得更快？因为虽然列表要快得多，但由于提供输入的文件非常大（> 2 GB），它们不适合主内存，所以我从文件中读取值作为惰性序列。在合并之前将它们转换为列表有点违背了整个目的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T06:57:46.940

Seq.skip 是一种反模式。使用 F# PowerPack 中的 LazyList，或使用枚举器 (GetEnumerator...MoveNext...Current) 来有效地遍历 Seq。查看其他类似的问答。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T17:19:46.817

As toyvo mentioned, this can be greatly simplified using a stateful enumerator:

```
let mkStatefulEnum (e: IEnumerator<'T>) =
  let x = ref None
  fun move ->
    if move then x := (if e.MoveNext() then Some e.Current else None)
    !x

let merge (a: seq<'T>) (b: seq<'T>) =
  seq {
    use x = a.GetEnumerator()
    use y = b.GetEnumerator()
    let nextX = mkStatefulEnum x
    let nextY = mkStatefulEnum y
    yield! Seq.unfold (fun (a, b) ->
      match a, b with
      | Some a, Some b -> 
        if a < b then Some (a, (nextX true, nextY false))
        else Some (b, (nextX false, nextY true))
      | Some a, None -> Some (a, (nextX true, nextY false))
      | None, Some b -> Some (b, (nextX false, nextY true))
      | None, None -> None
    ) (nextX true, nextY true)
  } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T13:31:05.880

您的问题的答案是，与 List 相比，F# 序列操作主要慢，是否。由于序列重新遍历，您的序列代码以多项式时间运行，而您的列表代码以线性时间运行。

为了记录，可以在线性时间内合并两个排序的序列。例如：

```
open System.Collections.Generic

type State<'T> =
    | Neutral
    | Left of 'T
    | Right of 'T
    | Tail

let mergeSeqs (a: seq<'T>) (b: seq<'T>) =
    let cmp x y =
        match compare x y with
        | 1 -> Some (y, Left x)
        | _ -> Some (x, Right y)
    seq {
        use x = a.GetEnumerator()
        use y = b.GetEnumerator()
        let step st =
            match st with
            | Neutral ->
                match x.MoveNext(), y.MoveNext() with
                | true, true -> cmp x.Current y.Current
                | true, false -> Some (x.Current, Tail)
                | false, true -> Some (y.Current, Tail)
                | false, false -> None
            | Left v ->
                match y.MoveNext() with
                | true -> cmp v y.Current
                | false -> Some (v, Neutral)
            | Right v ->
                match x.MoveNext() with
                | true -> cmp x.Current v
                | false -> Some (v, Neutral)
            | Tail ->
                match x.MoveNext(), y.MoveNext() with
                | false, false -> None
                | true, _ -> Some (x.Current, Tail)
                | _, true -> Some (y.Current, Tail)
        yield! Seq.unfold step Neutral
    } 
```

You can improve on that by reducing consing. Design a custom IEnumerator with mutable state similar to `State<'T>`, and use that as the basis for the merged sequence.

# ember.js - 在 ember-data 中映射数据

> ID：11201855
> 
> 赞同：2
> 
> 时间：2012-06-26T06:33:17.823
> 
> 标签：ember.js, ember-data

我有一个基本的 ember-data 模型对象：

```
App.Group =  DS.Model.extend({
//attributes
}); 
```

我有 json，其结构如下：

```
root.levelone.leveltwo.property 
```

我不想按原样映射这个项目，但想将 json 中的属性映射到模型中的属性，如下所示：

```
App.Group =  DS.Model.extend({
  property: DS.attr('string')
}); 
```

是否可以定义与传入 json 不同的映射？我对来自服务器的内容没有太多控制权。

如果 ember-data 无法做到这一点，那么建模这种深度嵌套的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T02:51:57.543

仅供参考，最新版本的 Ember (v.10) 需要在 DS.JSONTransforms 对象上定义自定义转换。并且“to”和“from”属性已重命名为“serialize”和“deserialize”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T08:02:08.527

我不太确定你在问什么，但你可以定义自定义 DS.attr 转换。

可能是这样的？没有测试过。

```
DS.attr.transforms.deepNest = {
  from: function(serialized) {
    return this.root2.property
  },
  to: function(deserialized) {
    return { root2: property }
  }
}

property: DS.attr('deepNest', {key: 'root1'}) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T20:22:25.370

它从此改变：

```
DS.attr.transforms.object = {
  from: function(serialized) {
    return Em.none(serialized) ? {} : serialized;
  },
  to: function(deserialized) {
    return Em.none(deserialized) ? {} : deserialized;
  }
} 
```

对此：

```
DS.RESTAdapter.registerTransform('object', {
  fromJSON: function(serialized) {
    return Em.none(serialized) ? {} : serialized;
  },
  toJSON: function(deserialized) {
    return Em.none(deserialized) ? {} : deserialized;
  }
}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-10T17:26:33.657

Ember data v 1.0 beta 2 需要这种方法：

```
CustomTransform = DS.Transform.extend({
  deserialize: function(serialized) {
    ...
  },

  serialize: function(deserialized) {
    ...
  }
});

Ember.Application.initializer({
    name: "customTransforms",

    initialize: function(container, application) {
      application.register('transform:custom', CustomTransform);
    }
}); 
```

# iphone - 从数据库重新加载 TableView 数据

> ID：11201856
> 
> 赞同：0
> 
> 时间：2012-06-26T06:33:24.257
> 
> 标签：iphone, objective-c, ios, cocoa

在我的应用程序中，我通过互联网中的 php 文件从 DB 获取 git dat，数据显示在表格视图中，但我需要每分钟重新加载我的数据，我可以每分钟获取新数据，但我无法在表格视图中替换它。

1）你知道怎么做吗？

2）如果你知道如何让我的代码更简单，并删除那些不需要的代码？我会感谢你的。

我的 ViewController.m

```
#import "ViewController.h"
#import "CJSONDeserializer.h"

@implementation ViewController
@synthesize tblMain, rows;

NSURL *url;
NSString *jsonreturn;
NSData *jsonData;
NSError *error;
NSDictionary *dict;
UITableViewCell *cell;
static NSString *CellIdentifier;

- (void)viewDidLoad{
    [super viewDidLoad];

    [self GetData];
}

-(void)GetData{
    url = [NSURL URLWithString:@"http://ar2.co/savola/"];
    jsonreturn = [[NSString alloc] initWithContentsOfURL:url];
    NSLog(jsonreturn);
    jsonData = [jsonreturn dataUsingEncoding:NSUTF32BigEndianStringEncoding];
    dict = [[[CJSONDeserializer deserializer] deserializeAsDictionary:jsonData error:&error] retain];
    rows = [dict objectForKey:@"savola"];
    NSLog(@"Array: %@",rows);
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [rows count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    }

    dict = [rows objectAtIndex: indexPath.row];

    cell.textLabel.text = [NSString stringWithFormat:@"%@ - %@", [dict objectForKey:@"company"], [dict objectForKey:@"price"]];
    cell.detailTextLabel.text = [dict objectForKey:@"time"];

    return cell;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:36:04.750

要强制表重新加载其信息，请`[self.tableView reloadData]`从您的视图控制器类调用。这将再次调用所有数据源方法，并且还会更新显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:37:48.123

从服务器获取新数据后，您应该重新加载表。就像在您的 GetData 方法中一样：

```
- (void)GetData
{
    url = [NSURL URLWithString:@"http://ar2.co/savola/"];
    jsonreturn = [[NSString alloc] initWithContentsOfURL:url];
    NSLog(jsonreturn);
    jsonData = [jsonreturn dataUsingEncoding:NSUTF32BigEndianStringEncoding];
    dict = [[[CJSONDeserializer deserializer] deserializeAsDictionary:jsonData error:&error] retain];
    rows = [dict objectForKey:@"savola"];
    NSLog(@"Array: %@",rows);

   [yourTable reloadData];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T06:41:54.553

您需要使用`reloadData`方法重新加载表格视图以显示新数据。

但正如你提到的 - “但我需要每分钟重新加载我的数据”

因此，为此，您可以使用现有数据检查收到的数据，如果新数据发生更改，则只需重新加载表，否则跳过。

如果您在不更改数据的情况下每分钟不必要地重新加载表，那将是不正确的，也会减慢您的应用程序的速度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T06:55:08.473

在这种情况下，我建议您使用[NSFetchedResultsController](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)。它只会在需要时自动更新您的表格。

# linux - 如何删除具有路径模式的所有文件

> ID：11201859
> 
> 赞同：1
> 
> 时间：2012-06-26T06:33:40.183
> 
> 标签：linux, find, rm

我有一个备份位置，它使用硬链接来存储现有或更改的文件。这些备份的位置模仿了带有日期部分的 linux 文件系统。

例如我有文件

```
/backup/servername/2012-06-26T00.43.01/www.website.com/file1.html
/backup/servername/2012-06-26T06.43.01/www.website.com/file1.html
/backup/servername/2012-06-26T06.43.01/www.website.com/file2.html
/backup/servername/2012-06-26T12.43.01/www.website.com/file1.html
/backup/servername/2012-06-26T12.43.01/www.website.com/file2.html 
```

如何找到所有包含 www.website.com 的文件，以便删除它们

我有这个命令组合来删除我可以用 find 找到的文件，但我不知道如何找到这些文件。

```
find . -name 'filename.*' -print0 | xargs -0 rm 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T13:03:28.887

你的术语有点松散，所以很难理解你到底想要什么。但是，如果我对您的理解正确，您想删除名为的目录*中*`www.website.com`的所有文件：

```
find . -wholename '*/www.website.com/*.html' -delete 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:38:32.213

如果我理解你的话，你可以像这样使用 smth：`find /backup/servername/2012-06-26T12.43.01/www.website.com/ -iname '*file*' -print0 | xargs -0 rm`

# php - php基础：多维数组中的array_sum

> ID：11201861
> 
> 赞同：0
> 
> 时间：2012-06-26T06:33:42.940
> 
> 标签：php, multidimensional-array

我正在做从 Oreilly 学习 PHP5 的练习，任务是计算各州的总人口（城市数量有限）。

我创建了一个包含州和城市内部的多维数组，但与书中提出的解决方案不同，我正在尝试使用 sum_array() 函数来计算每个州的人口。

我的逻辑一定是错误的，因为我 array_sum 似乎不知道要使用哪个数组（我三重检查了名称并写​​了好的数组名称）。我错过了什么？

这是我到目前为止所拥有的：

```
$population = array ( 
    'NY' => array('New York' => 8008278),
    'CA' => array('Los Angeles' => 3694820, 'San Diego' => 1223400),
    'IL' => array('Chicago' => 2896016),
    'TX' => array('Houston' => 1953631, 'Dallas' => 1188580, 'San Antonio' => 1144646),
    'PA' => array('Philadelphia' => 1517550),
    'AZ' => array('Phoenix' => 1321045),
    'MI' => array('Detroit' => 951270)
);

print '<table><tr><th>State</th><th>City</th><th>Population</th></tr>';

foreach ($population as $state => $city_info) {
    foreach ($city_info as $city_name => $city_population) {
    print "<tr><td>$state</td><td>$city_name</td><td>$city_population</td></tr>";
    }
    print "<tr><td></td><td>{$state}'s total population</td><td>array_sum($city_info)</td></tr>";
}

print "<tr><td></td><td></td></tr>"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T06:39:41.607

您忘记了引号内的函数。一定是这样的。

```
print "<tr><td></td><td>{$state}'s total population</td><td>".array_sum($city_info)."</td></tr>"; 
```

# css - 使用 CSS 高度属性

> ID：11201874
> 
> 赞同：0
> 
> 时间：2012-06-26T06:34:37.493
> 
> 标签：css, height

[我为一家公司创建的网站](http://iqhomeautomation.com/iqwordpress/)看起来很棒，但我只是不知道要放入正确的 CSS 以在下方显示“欢迎”标题。我知道我应该设置一个高度，但是如果我这样做，它将显示所有页面的高度，因为它包含在 if 语句中。如果在主页上显示此小部件，如果没有则不显示。所以如果我有一个设定的高度，即使小部件在关于页面上不可见，高度仍然会妨碍。所以我认为 height:auto; 会这样做，但它没有这样做。

```
#home-services {
    width: 100%;
    height: auto;
    clear: both;
    margin-bottom: 30px;
    margin: 0px !important;
}
#home-services section {
    float: left;
    width: 240px;
    height: auto;
    margin-right: 10px;
    background-color: #aaa685 !important;
} 
```

![在此处输入图像描述](../Images/4a1d76c264502287b6027bb212ea2026.png) 这就是它在所有浏览器中的样子。

为了让 WELCOME 标题在此页面上向下移动，我还需要在 CSS 中添加什么？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:46:24.843

嘿，现在添加这个 CSS

已经在你的 css 样式表中添加了这个 css

```
#home-services img{
margin: 0 0 -25px !important;
    padding: 0 !important;
} 
```

现在**把这个**css用这个

```
#home-services .textwidget  img{
margin:0 !important;
} 
```

* * *

做这个

```
 #home-services .textwidget  img{ margin-bottom:25px !important;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:47:02.073

尝试插入`padding-top:30px`h1 css。

它将清除问题。如果这给您的布局带来麻烦并且您需要消除填充，请在加载时调用一个 JavaScript 函数来检查是否显示了 h1 并相应地修改填充。这绝不是优雅的，但它会解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:54:55.567

您还可以在 if 语句中使用 jquery 来更改 CSS，例如

```
$(".yourclass").css("CSSproperty", "value"); 
```

# android - 相对运动图像

> ID：11201876
> 
> 赞同：0
> 
> 时间：2012-06-26T06:34:39.407
> 
> 标签：android

我有一个围绕任意点旋转的图像。但我需要 3 个这样的图像同时旋转这就是我尝试实现相同的方式

```
private void rotateLogo(float degrees){
    Matrix matrix1 = new Matrix();
    //int radius = turntable.getWidth()/2;
    double radians = degrees* (Math.PI/180);
    double xcoordinate = 220 * Math.cos(radians)- 60;
    double ycoordinate = 220 * Math.sin(radians) + 50;
    matrix1.postRotate((int)radians, 220, 220);

    // people image
    FrameLayout.LayoutParams linLay  = (FrameLayout.LayoutParams) peopleLogo.getLayoutParams();
    linLay.bottomMargin = (int)ycoordinate + 10;
    linLay.rightMargin = (int)xcoordinate + 10;
    peopleLogo.setImageMatrix(matrix1);
    peopleLogo.setLayoutParams(linLay); 
    rotateLogo2(degrees - 2);
    }

private void rotateLogo2(float degrees){
    double radians = degrees* (Math.PI/180);
    double xcoordinate = 220 * Math.cos(radians)- 60;
    double ycoordinate = 220 * Math.sin(radians) + 50;

    // people image
    FrameLayout.LayoutParams linLay  = (FrameLayout.LayoutParams) serverLogo.getLayoutParams();
    linLay.bottomMargin = (int)ycoordinate + 10;
    linLay.rightMargin = (int)xcoordinate + 10;
    serverLogo.setLayoutParams(linLay);
} 
```

在上面的代码中，我减少了角度并使用相同的代码旋转了第二张图像，但图像不旋转，它只是在触摸时消失。

我还尝试在旋转之前获取第一张图像的布局参数并将其应用于第二张图像，但这也不起作用..

图像在旋转时消失，但有时它会出现然后消失

任何人都可以帮助我了解我可能错在哪里或提出任何其他相同的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:43:33.923

您可以重构代码

```
private void rotateLogo(View logo, float degrees){
   Matrix matrix1 = new Matrix();
    //int radius = turntable.getWidth()/2;
    double radians = degrees* (Math.PI/180);
    double xcoordinate = 220 * Math.cos(radians)- 60;
    double ycoordinate = 220 * Math.sin(radians) + 50;
    matrix1.postRotate((int)radians, 220, 220);

    // people image
    FrameLayout.LayoutParams linLay  = (FrameLayout.LayoutParams) logo.getLayoutParams();
    linLay.bottomMargin = (int)ycoordinate + 10;
    linLay.rightMargin = (int)xcoordinate + 10;
    if (logo isInstanceOf ImageView) { 
        logo.setImageMatrix(matrix1);
    }
    logo.setLayoutParams(linLay); 
} 
```

并使用不同的参数调用该方法两次..

```
rotateLogo(peopleLogo, degrees);
rotateLogo(serverLogo, degrees-2); 
```

# c++ - 对二维向量的元素求和的难度

> ID：11201877
> 
> 赞同：1
> 
> 时间：2012-06-26T06:34:47.383
> 
> 标签：c++, vector, 2d

我有一个向量向量，它给了我 anxn 矩阵。我正在使用 for 循环对矩阵中的所有元素求和，但结果很奇怪。

相关代码为：

```
int main(){
while(cin){

int n = 0;
int sum = 0;

cout << "\n\nEnter a size (n) for the matrix: ";
cin >> n;

vector<vector<int> > matrix ( n, vector<int> ( n ) );
int k = 0;

for ( int i = 0; i < n; i++ ) {
    for ( int j = 0; j < n; j++ )
        matrix[i][j] = k++;
}

for ( int i = 0; i < n; i++ ) {
    for ( int j = 0; j < n; j++ )
        cout<< setw ( 3 ) << matrix[i][j] <<' ';
        cout<<'\n';
}

for ( int i = 0; i < n; i++ ) {
    for ( int j = 0; j < n; j++ )
        sum += matrix[i][j];
}
cout << "\nThe sum of the elements of the matrix is: " << sum << ' \n';
}
} 
```

所以，奇怪的是......当它打印'sum'的值时，出于某种原因，我将“8202”附加到该值上。如果我给它 n = 1，它将打印出 08202，或者对于 3 的 n，它将打印出 368202。

有任何想法吗？我在 Code::Blocks 中尝试了调试器，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:39:32.267

你输出`' \n'`. 注意前面的空格`\n`。那是两个字符/一个字符串。但是，您将`'`s 放在它周围意味着它将两个字符解释为一个字符，从而给您带来奇怪的结果。将其更改为`" \n"`.

奖金史诗般的PHUNZIES内容：我是怎么想出来的？嗯……还能是什么？总和输出正确，所以在它之后一定有问题。输出总和后唯一的事情是什么？你输出`' \n'`......好吧，那有什么问题？还有*BAM！*问题解决了。

# c# - 使用正则表达式规范化电话号码

> ID：11201878
> 
> 赞同：4
> 
> 时间：2012-06-26T06:34:50.390
> 
> 标签：c#, regex, phone-number

我有一个未经验证的用户输入的电话号码列表，它们看起来像：

```
 - 495) 995-0595
 - 105-6439
 - 095 268 8621
 - 324-51-44
 - 7 (495) 995-05-95
 - 7 495 995 05 95
 - 7 (495) 995-0595
 - +7 (495) 995-05-95
 - 7 (495)925-34-89
 - 7(495)9253489
 - 7(495)925-34-89
 - 74959950595 
```

我想将这些数字转换成这种（俄语）格式：+X (XXX) XXX-XX-XX

这里有没有机会使用正则表达式来实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:25:35.830

是的，提取和重新格式化！

```
List<string> oldlist = new List<string>();
List<string> newlist = new List<string>();
foreach(string s in oldlist)
{
     if(s.Contains('(')) s = s.Replace('('), "");//etc
     newlist.Add(numFormat(s));
}

string prefix = "495";

string numFormat(string s)
{
     string my;
     if(s.Length == 7)
     {
         my = string.Format("+7 ({0}) {1} {2} {3}", prefix, s.substring(0,3), s.subtring(3,2), s.substring(5,2);
     }
     else if(s.length == 10)
     {
         my = string.Format("+7 ({0}) {1} {2} {3}", s.substring(0,3), s.substring(3,3), s.subtring(5,2), s.substring(7,2);        
     }
     //etc
     return my;
} 
```

这只是我的想法......但你明白了

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:53:10.550

通过以下方式运行您的列表：

```
var strippedNumbers = new List<string>();
foreach (var num in listOfRussianNumbers.Select(x=>Regex.Replace(x, "[^0-9]", ""))) 
    strippedNumbers.Add(num.Length == 7?"7499"+num:num); 
```

然后使用 string.Format 以您想要的方式打印出来

```
string.Format("+{0} ({1}) {2}-{3}-{4}", 
    num.Substring(0,1), 
    num.Substring(1,3),
num.Substring(4,3),
num.Substring(7,2),
num.Substring(9,2)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T06:41:52.883

我认为你应该这样做

1.  将其转换为字符串。
2.  使用循环删除任何看起来不像数字的东西。你可以用`Char.IsDigit()`这个。
3.  然后使用`string.Substring()`.

确保仅以字符串格式执行所有这些步骤。

像

```
string str = "495) 995-0595";
List<char> digits = new List<char>();

for (int i = 0; i < str.Length; i++)
{
    if(char.IsDigit(str[i]))
        digits.Add(str[i]);
}

str = new string(digits.ToArray());

str = "+" + str.Substring(0, 1) + " (" + str.Substring(1, 3) + ") " 
      + str.Substring(4, 2) + "-" + str.Substring(6, 2) + "-" + str.Substring(8); 
```

这让我回来了`"+4 (959) 95-05-95"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T06:53:37.720

这是我能在短时间内得到的最好的。

```
((\+?\d)\s?)?\(?(\d\d\d)\)?\s?(\d\d\d)(\s|-)?(\d\d)(\s|-)?(\d\d) 
```

这将从您的样本中选择粗体。

**495) 995-0595**
105-6439
**095 268 8621**
324-51-44
**7 (495) 995-05-95**
**7 495 995 05 95**
**7 (495) 995-0595**
**+7 (495) 995-05-95**
**7 (495 ) )925-34-89**
**7(495)9253489**
**7(495)925-34-89**
**74959950595**

对于不匹配的字符串，您可以通过不同的例程发送它们或进行手动处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T06:46:15.730

像这样的东西：

```
(\d)? ?\(?(\d\d\d)?\)? *?(\d\d\d) *?-? *?(\d\d) *?-? *?(\d\d) 
```

# java - 如何使 PHP 库在 java 环境中工作？

> ID：11201882
> 
> 赞同：-1
> 
> 时间：2012-06-26T06:35:07.640
> 
> 标签：java, php

我有一个 php 库，它位于 php 中。我可以让这个 lib 在 java 环境中工作，比如调用 lib 的功能主义者像 java lib 一样工作吗？

问候托尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T06:37:34.543

简短的回答：没有

长答案：不，你不能......它们是两种完全不同的语言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:44:37.937

Java 在作为平台的 JRE 上运行。PHP 解释器在其运行的操作系统上本地运行。

你能做的最好的就是将 PHP 作为系统进程运行，传递你想要运行的 PHP 文件作为参数，并捕获该进程的输出。（即：运行“/path/to/php myfile.php”，并读取输出）。

但是，我应该警告你，这是一个**可怕**的想法，你真的应该重新考虑你在做什么。您的 java 代码将完全失去它的可移植性，并且设计得非常糟糕。

# javascript - OAuth 和 Facebook 页面选项卡

> ID：11201885
> 
> 赞同：0
> 
> 时间：2012-06-26T06:35:24.523
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我需要更多的解释而不是答案本身 - 我正在构建一个页面选项卡，它将从属于该页面的特定相册中提取某些图像。这不需要访问令牌，因此无需向访问者请求权限。

我可以添加喜欢/共享选项，这些选项也可以在没有访问令牌或授权的情况下正常工作。

如何在不请求授权的情况下获取基本用户信息（ID、姓名等）？它是 Facebook 上的一个页面选项卡，因此访问者必须已经登录。

如果我必须请求权限来执行本质上非常标准的操作，这似乎是违反直觉的。

我正在使用 JavaScript SDK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:23:06.883

> 它是 Facebook 上的一个页面选项卡，因此访问者必须已经登录。

用户可能登录到 Facebook——但他不一定*连接*到您的应用程序（还）。你*需要*他，才能得到他的用户ID。

`FB.login`无需在参数中请求任何权限即可调用`scope`—— 这将提示用户连接到您的应用程序，仅授予其读取其个人数据的“基本”权限。这将为您提供他的用户 ID `response.authResponse`（并且还会导致他的用户 ID 包含在`signed_request`他下次访问您的页面选项卡时）。

之后，您可以`/me`通过 Graph API 获取他的基本用户信息。

# java - Java HashMap 与字符串的键比较失败

> ID：11201893
> 
> 赞同：0
> 
> 时间：2012-06-26T06:36:08.320
> 
> 标签：java

我有以下情况。我在 Java 中有一个 HashMap，键为字符串。然后在某个阶段，在运行时我创建与这些键相等的字符串，以便从该映射中检索数据。字符串在“for”循环中创建如下：

```
 String keyToRetrive = "lights[" + Integer.toString(i) + "]" + ".Intensity"; 
```

奇怪的是，当我遍历地图以找到等于该字符串的键时，即使找到匹配项，搜索也会跳过。所以在这个搜索循环中：

```
 while (iter.hasNext()) {
        Map.Entry entry = (Map.Entry) iter.next();
        if (name == entry.getKey()) {  ///name- "lights[0].Intesity"
            uniformOut = (ICleanable) entry.getValue();
            break;
        }
    } 
```

即使地图包含一个，名称为“lights[0].Intesity”的键也永远不会返回 true。我如何解决它。我对两个比较的字符串值都使用了 hashCode()。所以这个版本确实有效：

```
 while (iter.hasNext()) {
        Map.Entry entry = (Map.Entry) iter.next();
        if (name.hashCode() == entry.getKey().hashCode()) {
            uniformOut = (ICleanable) entry.getValue();
            break;
        }
    } 
```

更新：在被指出“==”效果不好并且应该使用“equals（）”这一事实之后，我想缩小问题范围：为什么“==”适用于不是由多个创建的字符串串联块？我的意思是，如果我将要比较的关键字符串定义为一个简单的单个字符串：

```
 String foo="foo"; 
```

这样的字符串可以使用“==”与 HashMap 键进行比较。

我不是专家 Java 程序员，所以任何人都可以解释为什么它会这样工作吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T06:37:53.503

您正在使用`==`运算符比较字符串。改用`equals()`：

```
name.equals(entry.getKey()) 
```

这是 Java 中的一个常见陷阱，请参阅[如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832)和[等于/等于和 == 运算符之间的区别？](https://stackoverflow.com/questions/971954).

* * *

顺便说一句（与您的问题无关）连接字符串时，您不需要`toString()`显式调用，因此：

```
"lights[" + Integer.toString(i) + "]" + ".Intensity" 
```

可以替换为：

```
"lights[" + i + "]" + ".Intensity" 
```

它适用于`i`任何类型，不仅仅是`int`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T06:57:11.360

当您使用 比较对象时`==`，您正在执行**“引用相等”**比较，这意味着您正在检查两个引用是否*指向`String`内存中的同一对象*。如果你熟悉 C，它会像：

```
char* a = some_string();
char* b = some_other_string();
if (a == b) { ... } 
```

另一方面，当您使用 比较对象时`.equals()`，您正在执行**“结构相等”**比较，这意味着您正在检查两个对象是否包含等效数据。同样，C 类似物将是：

```
char* a = some_string();
char* b = some_other_string();
if (strcmp(a, b) == 0) { ... } 
```

现在，您**真正非常不想做的事情**是比较两个对象的哈希码。为什么不？因为具有相同哈希码的两个对象不一定相等！他们可能是，但你不能正确地依赖它。

* * *

**更新：**您还询问了为什么`==`适用于字符串文字。答案是因为 Java 编译器不会在堆上分配常量字符串。相反，它将它们存储在使用它们的类的*常量池中*。所以，如果你写：

```
String foo1 = "foo";
String foo2 = "foo"; 
```

然后编译器将使两个引用指向类常量池中的相同位置。但是，如果你写：

```
String foobar1 = "foobar";
String foobar2 = "foo" + bar();
String bar() { return "bar"; } 
```

编译器不够聪明，无法确定在`foobar2`逻辑上等价于`foobar1`. 但是，即使您*知道*这两个变量是编译时常量，您*仍然*应该保持简单并使用`.equals()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T07:11:41.330

其他人已经说明了为什么您的代码不起作用，但是：

1）如果您使用的是 HashMap，则应该使用 map.get(key) 来检索值，而不是条目的插入器；这就是**哈希**映射的重点。

2）使用泛型，尽可能避免显式转换！

# android - 如何使用经纬度获取谷歌地图链接

> ID：11201895
> 
> 赞同：-8
> 
> 时间：2012-06-26T06:36:20.913
> 
> 标签：android, location

我有经纬度但无法获取谷歌地图的链接，如何获取包含我的经纬度的谷歌地图链接，然后这个链接作为短信发送给其他人......

请帮我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:44:37.907

你可以像这样创建一个URI

[http://maps.google.com/?q=latitude,longitude](http://maps.google.com/?q=latitude,longitude)

只需将您获得的经度和纬度放入URI即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:40:54.000

您在谷歌地图上可能想要的所有静态图像文档都在这里：[https ://developers.google.com/maps/documentation/staticmaps/](https://developers.google.com/maps/documentation/staticmaps/)

本质上：https://maps.googleapis.com/maps/api/staticmap?center=[LATITUDE_HERE],[LONGITUDE_HERE]&zoom=14&size=400x400&sensor=false

如果您正在寻找基本的短信，您可以通过电子邮件使用此链接发送每个运营商的短信号码... 10digitphonenumber@vtext.com ...等请参阅此处的完整列表：[http ://www.emailtextmessages.com](http://www.emailtextmessages.com)

# postgresql - 基于地理类型列问题的 GIST 索引表达式

> ID：11201898
> 
> 赞同：4
> 
> 时间：2012-06-26T06:36:43.550
> 
> 标签：postgresql, indexing, postgis

我对 postgresql 如何使用索引有疑问。我在启用 Postgis 的数据库的 Postgresql 中基于地理类型列的 Gist 索引表达式存在问题。

我有下表：

```
CREATE TABLE place
(
  id serial NOT NULL,
  name character varying(40) NOT NULL,
  location geography(Point,4326),
  CONSTRAINT place_pkey PRIMARY KEY (id )
) 
```

然后我根据“位置”列创建了 Gist 索引表达式

```
CREATE INDEX place_buffer_5000m ON place
USING GIST (ST_BUFFER(location, 5000)); 
```

现在假设在表格路线中，我有带有 Linestring 对象的列形状，并且我想检查线交叉的 5000m 多边形（围绕该位置）。

我认为下面的查询应该使用“place_buffer_5000m”索引但不使用它。

```
SELECT place.name
FROM place, route
WHERE
  route.id=1 AND
  ST_CROSSES(route.shape::geometry, ST_BUFFER(place.location, 5000)::geometry)) 
```

表的地方有大约 76000 行。使用重新创建“place_buffer_5000m”索引在此表上运行分析和清理，但在上述查询期间未使用该索引。

当我在名为“area_5000m”（地理类型）的表格位置创建另一列并更新表格时，有什么有趣的：

```
UPDATE place SET area_5000m=ST_BUFFER(location, 5000) 
```

然后像这样为此列创建要点索引：

```
CREATE INDEX place_area_5000m ON place USING GIST (area_5000m) 
```

然后使用查询：

```
SELECT place.name
FROM place, route
WHERE
  route.id=1 AND
  ST_CROSSES(route.shape::geometry, place.area_5000m::geometry)) 
```

使用索引“place_area_5000m”。问题是为什么不使用基于位置列计算的索引表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:54:15.163

您是否尝试在“功能索引”中添加演员表？这可以帮助确定数据类型。它应该适用于几何，也可能适用于地理，如下所示：

```
CREATE INDEX place_buffer_5000m ON place
USING GIST(ST_BUFFER(location, 5000)::geometry); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:02:22.350

最终，您想知道地点 5 公里内有哪些路线，这是一种非常简单且常见的查询类型。但是，您陷入了一个常见的陷阱：不要使用 ST_Buffer 进行过滤！它是昂贵的！

使用[ST_DWithin](http://www.postgis.org/docs/ST_DWithin.html)，它将使用常规 GiST 索引（如果可用）：

```
SELECT place.name
FROM place, route
WHERE route.id = 1 AND ST_DWithin(route.shape::geography, place.location, 5000); 
```

# google-maps - 如何使用谷歌地图api获得物理位置

> ID：11201899
> 
> 赞同：0
> 
> 时间：2012-06-26T06:36:46.503
> 
> 标签：google-maps, pug

我对 Web 开发比较陌生。我正在尝试使用谷歌地图从经度和纬度中提取物理位置（我认为 google.map 适合这个）。我已经在 J​​ADE 中编写了这段代码，它给了我经纬度。我如何使用这个值来查看确切的物理位置。谢谢 ！

```
if (navigator.geolocation) {
console.log('Geolocation is supported!');
var startPos;
navigator.geolocation.getCurrentPosition(function(position) {
  startPos = position;
  jQuery("#location_latitude").append(startPos.coords.latitude);
  jQuery("#location_longitude").append(startPos.coords.longitude);
  console.log(startPos.coords.latitude);
  console.log(startPos.coords.longitude);
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:43:51.517

我相信您会在源代码中找到解决方案：http: [//html5demos.com/geo](http://html5demos.com/geo)

您必须创建地图，然后在其上找到一个标记。

# ajax - 如何在 EXTJS 4 中将成功处理程序附加到 Treestore 的 ajax 代理？

> ID：11201901
> 
> 赞同：0
> 
> 时间：2012-06-26T06:37:03.330
> 
> 标签：ajax, extjs, extjs4

下面是我对加载存储的服务器的 ajax 调用：

```
 function setUpStore(Id){
    store = Ext.create('Ext.data.TreeStore', {
    storeId:'jsonStore',
    proxy: {
        type: 'ajax',
        url: 'fetchData.action?ID='+Id,
        reader: {
            type: 'json'
        },
        success : function(resp){
            alert("success!!!");
        }
    }
}); 
```

}

它调用以下返回 JSON 对象的 java 方法：

公共字符串 fetchJSONObj(){

```
 HttpServletResponse res = ServletActionContext.getResponse();
              HttpServletRequest req  = ServletActionContext.getRequest();

    ID = (String) req.getParameter("ID");
    res.setHeader("Content-Type", "application/json");

    VendorVO root= ServiceHelper.getInstance().getService().getData(ID);

    Data = new ExtJsTreeWrapper();
    Data.setText(ID);
    Data.setId(ID);
    Data.getChildren().add(convertVOToExtJSWrapper(root));
    return SUCCESS;
} 
```

从服务器获得响应后，我没有收到成功处理程序中提到的警报。我是否正确声明了它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:28:51.673

代理没有一个名为成功的配置选项。

给定您的代码，您可以挂钩商店的加载事件：

```
function setUpStore(Id){
    store = Ext.create('Ext.data.TreeStore', {
        storeId:'jsonStore',
        proxy: {
            type: 'ajax',
            url: 'fetchData.action?ID='+Id,
            reader: {
                type: 'json'
            },
        },
        listeners: {
           load: {
               fn: function() {
                   // Do something here.
               },
           },
           scope: this               
        }
    }
}); 
```

如果您进行手动加载，您还可以将回调作为参数传递给加载函数。

# c++ - 无法创建退出按钮

> ID：11201906
> 
> 赞同：0
> 
> 时间：2012-06-26T06:37:38.400
> 
> 标签：c++, visual-c++, user-interface, atl

我尝试了关于基本对话框的 C 和 ATL 教程。它有一个窗口，里面有2个按钮。在教程的开头，有 2 个按钮，它们都退出应用程序。但是，这两个按钮是默认创建的。因此，我尝试创建另一个可以退出应用程序的按钮，但失败了。

我的目标是在这个项目中使用单选按钮。我想创建一些单选按钮，当我按下按钮时，我想执行一些命令。

以下是链接 - 在我看来，教程链接是不相关的，但我想它不会受到伤害：[Tutorial](http://www.codeproject.com/Articles/6893/Simple-ATL-dialog-based-exe)，[Working Project](https://dl.dropbox.com/u/20637331/zort/DlgTest.zip)，[Problematic Project](https://dl.dropbox.com/u/20637331/zort/hede.zip)。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:35:06.903

1.  您在对话框资源模板上添加一个按钮
2.  您将标识符与资源编辑器中的属性窗格中的按钮相关联，例如`IDC_MYBUTT`
3.  您将在项目文件中找到`#define`所选常量`IDC_MYBUTT``resource.h`
4.  您将处理程序添加到对话框类上的按钮事件。这些是[示例 ATL 对话窗口](https://stackoverflow.com/questions/11194785/sample-atl-dialog-window)`COMMAND_ID_HANDLER`代码上的宏，它们将事件（发送到窗口的基础消息）与特定方法（示例代码中的按钮和按钮都执行）连接起来。`WM_COMMAND``IDOK``IDCANCEL``OnCommand`
5.  在处理程序上，您决定如何处理，特别是结束对话与否。

`COMMAND_HANDLER`，`COMMAND_ID_HANDLER`和朋友在 MSDN 上有介绍：[Message Map Macros (ATL)](http://msdn.microsoft.com/en-us/library/hk23896b.aspx)。

# jquery - 为什么这个 jQuery 不起作用？

> ID：11201909
> 
> 赞同：1
> 
> 时间：2012-06-26T06:37:50.200
> 
> 标签：jquery, function

我无法让一些额外的 jQuery 工作。

我已将其缩小到原始脚本中的以下两行代码，删除后允许我的新 jQuery 工作，但显然我需要这些代码才能使原始脚本运行。

```
var J = jQuery.noConflict();
var $ = function (x) {return document.getElementById(x);} 
```

我试图添加的新代码是：

```
$(function(){

// Contact form - animates fading labels

$formItems = $("input:text, textarea");

$formItems
    // fires after the page has loaded
    // if the field has already some value the label becomes invisible
    .each(function(){
        if ($(this).val() !== '') {
            $(this).prev().css({
                opacity: '0'
            });
        };
    })
    // fires on focus
    // if a focused field has no value label fades away
    .focus(function(){ 
        if ($(this).val() == '') {
            $(this).prev().stop().animate({
                opacity: '0'
            }, 200);
        }
    })
    // fires when the input field is no longer focused
    // labels fade in if there is no input in input fields
    .blur(function(){
        if ($(this).val() == '') {
            $(this).prev().stop().animate({
                opacity: '1'
            }, 200);
        }
    }) 

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:42:12.163

```
(function($) {
$(function(){

// Contact form - animates fading labels

$formItems = $("input:text, textarea");

$formItems
    // fires after the page has loaded
    // if the field has already some value the label becomes invisible
    .each(function(){
        if ($(this).val() !== '') {
            $(this).prev().css({
                opacity: '0'
            });
        };
    })
    // fires on focus
    // if a focused field has no value label fades away
    .focus(function(){ 
        if ($(this).val() == '') {
            $(this).prev().stop().animate({
                opacity: '0'
            }, 200);
        }
    })
    // fires when the input field is no longer focused
    // labels fade in if there is no input in input fields
    .blur(function(){
        if ($(this).val() == '') {
            $(this).prev().stop().animate({
                opacity: '1'
            }, 200);
        }
    }) 

});
})(jQuery); 
```

您的脚本会覆盖，`$`因此您不能再使用它来引用 jQuery。使用这个匿名函数，您可以`$`再次获得一个参数并将 jQuery 传递给它。因此，在您的匿名函数中，您可以再次使用`$`来引用 jQuery。

希望这可以帮助

# php - PHP - 正则表达式匹配这样的字符串：2012/018843/06？

> ID：11201911
> 
> 赞同：0
> 
> 时间：2012-06-26T06:38:04.800
> 
> 标签：php, regex

我不太了解正则表达式，但想创建一个正则表达式来验证这样的字符串：`2012/018843/06.

如果将来可能对某人有所帮助，我想说那将是南非公司注册号。

如果有人愿意发布一个可以通过 PHP 处理并匹配的正则表达式，那就太好了。如果没有，任何指向以这种方式创建正则表达式的“基础”的链接将不胜感激！

谢谢。

编辑：

我试过这个：

`[0-9/]{14}`

但它与长度不完全匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T06:41:54.460

以最简单的形式：

```
preg_match("|^\d{4}/\d{6}/\d{2}$|", $input); 
```

`\d`标记匹配任何整数 0 - 9，里面的整数表示`{}`允许从以前的标记重复多少次，`/`匹配文字，`/`因为我`|`用作正则表达式分隔符。

`^`标记是从字符串的开头匹配，并匹配`$`字符串的结尾，这样，诸如此类的东西`aa2012/124521/11bb`将不匹配（如果取出 ，它将匹配`^$`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T06:42:05.230

数字的长度是固定的吗？然后尝试

```
preg_match('#^\d{4}/\d{6}/\d{2}$#', $string) 
```

句法：

*   `\d`是一个转义序列，表示任何十进制数字 (0-9)，这也可以表示为`[0-9]`
*   `{4}`定义，最后一个表达式（在这种情况下：一个十进制数字）必须出现 4 次，使用这个表达式可以避免多次重复前面的表达式，所以`\d{4}`意味着`\d\d\d\d`
*   `^`表示字符串的开头和字符串`$`的结尾，因此这确保了此字符串中没有其他字符，因此类似的字符串`abc2012/018843/06def`不会匹配

# visual-studio-2010 - 安装 azure sdk 后，SlowCheetah 无法正常工作

> ID：11201912
> 
> 赞同：2
> 
> 时间：2012-06-26T06:38:10.150
> 
> 标签：visual-studio-2010, web-site-project, slowcheetah, azure-sdk-.net

我有 Visual Studio 2010 和 slowcheetah。我有一个网站，我在其中使用多个配置文件，其中一些需要在调试和发布时具有不同的值。为此，我使用了 slowcheetah，每次我使用 Release 选项发布网站时，我的配置都会正常转换。

安装 Azure SDK 后，网站 VS2010 发布界面发生了变化。现在，当我使用 VS 发布时，配置文件不会转换。如果我使用 msbuild 通过命令行发布，它们会发生变化。

有没有办法让 slowcheetah 与 azure sdk 和 VS2010 publish 一起进行配置转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:19:29.127

我刚刚对这个[问题](https://github.com/sayedihashimi/slow-cheetah/issues/19)发表了评论，但我将下面的内容粘贴在了下面，供那些可能在这里找到的人使用。如果您在尝试新的 VSIX 后仍有问题，请告诉我。

这应该通过提交 c6e4a4c 解决。[我在https://dl.dropbox.com/u/40134810/SlowCheetah-c6e4a4c.zip](https://dl.dropbox.com/u/40134810/SlowCheetah-c6e4a4c.zip)有更新的下载，如果您能验证修复，我将不胜感激。现在我将关闭此项目，但如果您在安装该更新后仍然看到问题，请重新打开。

我可能会在一周左右更新公开版本。我还有一些需要修复的错误。

如果你想试试看。

# php - Janrain 导入联系人 API 需要 PRO 类型的账号吗？

> ID：11201913
> 
> 赞同：2
> 
> 时间：2012-06-26T06:38:13.660
> 
> 标签：php, cakephp-2.0, janrain

我正在将 Janrain Import 联系人集成到我的 Cakephp 项目中。使用 Janrain API 时出现以下错误

> ( [stat] => fail [err] => Array ([code] => 7 [msg] => 您必须升级您的帐户才能访问此 API) )

所以我将我的 janrain 帐户升级为 Plus 类型并设置`$engage_pro = false;`Still 同样的错误即将到来。所以我在想
**“Janrain 帐户需要 PRO 类型然后只有导入联系人 API 才能工作”**

这是否正确？因为我从头到尾经过的一切都是正确的。因为我需要联系我的客户来升级这个帐户。任何人有想法请告诉我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:25:44.617

Janrain 有一个 Engage API，它包含 get_contacts 方法来访问我们需要 PRO 帐户的方法，然后只有它会从指定的提供商（google/FB/etc）获取联系人 [检查他们的 API](http://developers.janrain.com/documentation/api/get_contacts/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-15T18:04:19.307

是的，没错，只有 PRO 级别的帐户才能访问 Janrain 社交登录（以前称为 Engage）API。

# linux - 安装ridgerun sdk - Leopard board DM

> ID：11201918
> 
> 赞同：0
> 
> 时间：2012-06-26T06:38:31.330
> 
> 标签：linux, opencv, sdk

我想安装 ridgerun sdk 在 Leopardboard DM365 上构建和运行应用程序。我是新手，我已按照 ridgerun sdk 入门指南执行步骤 - [https://www.ridgerun.com/developer/wiki/index.php/DM365_Leopard_SDK_2011Q2_Getting_Started_Guide](https://www.ridgerun.com/developer/wiki/index.php/DM365_Leopard_SDK_2011Q2_Getting_Started_Guide)

我已经按照指南安装了 sdk。然后按照指南我配置 sdk 来构建它 - “make configure”。在配置中，我选择了对 opencv-2.1.0 的支持。然后，当我“制作”sdk 时，出现以下错误：

```
Checking dependencies for OpenCV-2.1.0
Compiling and installing OpenCV-2.1.0...
Traceback (most recent call last):
File "<string>", line 1, in <module>
ImportError: No module named numpy.distutils
CMake Warning: The variable, 'BUILD_DOXYGEN_DOCS', specified manually, was not used during the generation.
CMake Warning: The variable, 'BUILD_PYTHON_SUPPORT', specified manually, was not used during the generation.
CMake Warning: The variable, 'CMAKE_TOOLCHAIN_FILE', specified manually, was not used during the generation.
make[3]: *** [cmake_built] Error 2
Error building OpenCV-2.1.0
make[2]: *** [dependency_build] Error 1
make[1]: *** [apps_build] Error 1
make: *** [fs_build] Error 2 
```

我被困在这一点上。我搜索了很多，但找不到任何东西。请指导我必须做什么。谢谢，马兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T08:44:02.667

您必须禁用 OpenCV 并重新编译。

转到 RRSDK 的根目录并运行：

```
make config 
```

转到“**文件系统配置--->选择目标的文件系统软件**”

取消选择“OpenCV”。

退出并运行：

```
make
make install 
```

众所周知，OpenCV 在此版本的 RRSDK 中存在配置错误。

# java - 无法使用 java.nio.channels.FileLock 在 Linux 上锁定文件

> ID：11201921
> 
> 赞同：4
> 
> 时间：2012-06-26T06:38:49.463
> 
> 标签：java, linux, filelock

我正在用 Java 创建一个应用程序，我只希望运行一个实例。为此，我创建了一个文件并在我的应用程序运行时获得了锁。

我有以下在 Windows 上工作的代码，但在 Linux 上失败：一旦我获得了一个锁而不解锁它，我可以获得另一个锁。

```
import java.io.File;
import java.io.IOException;
import java.io.RandomAccessFile;
import java.nio.channels.FileChannel;
import java.nio.channels.FileLock;

public class MyApp {

private static File f;
private static FileChannel channel;
private static FileLock lock;

public static void main(String[] args) {
    try {
        f = new File("RingOnRequest.lock");
        // Check if the lock exist
        if (f.exists()) {
            // if exist try to delete it
            f.delete();
        }
        // Try to get the lock
        channel = new RandomAccessFile(f, "rw").getChannel();
        lock = channel.tryLock();
        if(lock == null)
        {
            // File is lock by other application
            channel.close();
            throw new RuntimeException("Only 1 instance of MyApp can run.");
        }
        // Add shutdown hook to release lock when application shutdown
        ShutdownHook shutdownHook = new ShutdownHook();
        Runtime.getRuntime().addShutdownHook(shutdownHook);

        //Your application tasks here..
        System.out.println("Running");
        try {
            Thread.sleep(10000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

    }
    catch(IOException e)
    {
        throw new RuntimeException("Could not start process.", e);
    }

}

public static void unlockFile() {
    // release and delete file lock
    try {
        if(lock != null) {
            lock.release();
            channel.close();
            f.delete();
        }
    } catch(IOException e) {
        e.printStackTrace();
    }
}

static class ShutdownHook extends Thread {

    public void run() {
        unlockFile();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T17:46:56.300

您每次运行时都会删除锁定文件，因此只有一个进程可以对其进行锁定。

当您使用`FileLock`时，它纯粹是*建议*性的——获取文件上的锁可能不会阻止您做任何事情……即使另一个进程获取了锁，读取、写入和删除文件也可能都是可能的。有时，在特定平台上，锁可能会做更多的事情，但这种行为是未指定的，并且依赖于类文档中所保证的更多内容是失败的秘诀。

“咨询锁”*只是*一个信号，它对其他寻找它的进程可见。如果您对它的依赖不止于此，则您的程序在其他平台上运行时会中断。

你为什么要删除锁定文件呢？锁定文件就像一个布尔标志，对系统上的每个进程都是可见的。设计你的协议以这样的方式使用它，你将拥有一个可靠的跨平台锁定机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:51:21.707

为什么不将 PID 保存到文件中，而不是锁定文件，而是验证是否存在具有该 ID 的进程。如果有，并且它是您的应用程序的一个实例，您就知道它已经在运行。

套接字也可能是一个好主意，因为您可以使用它与正在运行的实例进行通信。

**编辑：**

此外，来自[FileLock 的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileLock.html)：

> 锁是否实际上阻止另一个程序访问锁定区域的内容是系统相关的，因此未指定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-14T10:26:54.343

使用`mkdir`. 在 unix 系统上，这是一个[原子操作](http://rcrowley.org/2010/01/06/things-unix-can-do-atomically.html)——如果成功创建了新目录，它将成功，否则将失败。

例子：

```
File lockFile = new File("/path/to/lockdir");
boolean hasLock = lockFile.mkdir();
if (!hasLock) {
  throw new IOException("could not get lock");
}
// do stuff
lockFile.delete(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T07:19:05.330

我使用了与您相同的示例，并在 Mac OS X 上遇到了同样的问题。似乎文件锁定并不能阻止 POSIX 系统上的文件删除。在您解锁之前，您的应用程序仍将拥有对该文件的某种句柄。因此，请考虑在其名称（或内部文件）中使用带有 PID 的锁定文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-11T04:03:20.367

我在 Windows 和 Linux 上都对其进行了测试。工作正常。当应用程序正常关闭时，锁定文件会自动删除。因此，当您重新启动应用程序时，您不必担心锁定文件会留在那里。只需注释掉以下几行：

```
if (f.exists()) {
    // if exist try to delete it
    f.delete();
} 
```

但是，您可能需要考虑如果您的应用程序崩溃并且没有以正常方式关闭会发生什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-08T14:09:44.010

最近我遇到了同样的问题，但就我而言，我有一个优势：我的应用程序仅在超时后才轮询某个目录。由于我的应用程序没有立即轮询目录，因此我编写了特殊的类，该类在 init 方法中使用他自己的 PID 创建锁定文件，之后在它尝试使用它需要调用的目录之前`ownedLock()`- 如果它返回 true 那么我们可以工作，否则退出（代码在 Kotlin 中，但你会明白主要思想）：

```
import java.io.File
import java.lang.management.ManagementFactory
class DirectoryLocker(private val directory: String, private val lockName: String) {
   private val lockFile by lazy { File("$directory/$lockName.lock") }

   // Will try to acquire lock to directory, whoever last writes its pid to file owns the directory
   fun acquireLock() = with(lockFile) {
      createNewFile()
      writeText(currentPID())
   }

   fun ownedLock(): Boolean = lockFilePid() == currentPID()

   fun releaseOwnedLock() {
      if(lockFilePid() == currentPID()) lockFile.delete()
   }

   private fun currentPID(): String {
      val processName = ManagementFactory.getRuntimeMXBean().name
      return processName.split("@".toRegex()).first()
   }

   private fun lockFilePid(): String? {
      return if(lockFile.exists()) lockFile.readLines().first() else null
   }
} 
```

# java - Swing 应用程序到小程序

> ID：11201925
> 
> 赞同：-2
> 
> 时间：2012-06-26T06:39:13.093
> 
> 标签：java, swing, jnlp, java-web-start, japplet

我制作了一个基本的 Swing 应用程序来将数据输入 MySQL 服务器。由于某种原因没有访问驱动程序以连接到数据库。这是代码。提前感谢所有答案

```
import javax.swing.*;
import java.awt.event.*;
import java.sql.*;

public class Action extends JApplet {

  public void init() {
  }

  public Action() {
    JButton button = new JButton("Click here");
    button.addActionListener(new EventHandler());
    add(button);
  }
}

public class EventHandler implements ActionListener{
  public void actionPerformed(ActionEvent e) {
    try{
      Class.forName("com.mysql.jdbc.Driver").newInstance();
      String url = "jdbc:mysql://localhost:3306/testgui";
      Connection con= DriverManager.getConnection(url,"root", null);
      String str = JOptionPane.showInputDialog(null,"Enter type");
      String abc = JOptionPane.showInputDialog(null,"Enter number");
      Statement st= con.createStatement();
      st.executeUpdate("insert into tb1 values (null,'"+str+"',"+abc+")");      
    }
    catch(Exception e1){
      e1.printStackTrace();
    }   
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:14:21.397

请阅读[小程序可以做什么和不能做什么](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)

未签名的小程序不能执行以下操作：

*   他们无法访问客户端资源，例如本地文件系统、可执行文件、系统剪贴板和打印机。
*   他们无法连接到任何第三方服务器（除了它源自的服务器之外的任何服务器）或从任何第三方服务器检索资源。
*   他们无法加载本机库。
*   他们无法更改 SecurityManager。
*   他们无法创建 ClassLoader。
*   他们无法读取某些系统属性。有关禁止的系统属性列表，请参阅[系统](http://docs.oracle.com/javase/tutorial/deployment/doingMoreWithRIA/properties.html)属性。

也许简单可行的方法是查看由[@Andrew Thompson](https://stackoverflow.com/users/418556/andrew-thompson)完成的[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)

# javascript - javascript - 更改图像宽度？

> ID：11201928
> 
> 赞同：0
> 
> 时间：2012-06-26T06:39:30.887
> 
> 标签：javascript, html

我正在使用以下代码检查图像的宽度是否大于 700。如果是这种情况，那么我想将其设置为 700

```
 <img src="" id="main_image">
<script>
    if(document.getElementById(main_image).width > 700) {
    document.getElementById(main_image).width = 700;
    }
    </script> 
```

经过一番搜索，我找到了上面的代码，但它不起作用。告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:42:15.080

使用“main_image”而不是 main_image

```
<script>
if(document.getElementById("main_image").width > 700) {
document.getElementById("main_image").width = 700;
}
</script>
<img src="" id="main_image"> 
```

或者你也可以使用样式

```
document.getElementById("main_image").style.width = "700px"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:42:08.383

尝试`style`：

```
window.onload = function() {
    if(+(document.getElementById('main_image').style.width) > 700) {
      document.getElementById('main_image').style.width = '700px';
    }
}; 
```

如果您已设置`width`属性，那么您将使用`getAttribute('width')`and`setAttribute(700)`或直接使用`width`。但如果它来自 CSS，则需要使用`style`如上所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:42:11.223

您的问题可能是因为您在页面上存在元素之前运行脚本。尝试颠倒脚本和 img 标签。

# .net - 如何在不同目录的.net windows应用程序中读取xml文件？

> ID：11201932
> 
> 赞同：1
> 
> 时间：2012-06-26T06:39:50.493
> 
> 标签：.net, xml, winforms

我有一个 .net windows 应用程序，我正在尝试从 c# windows 应用程序读取 .xml 文件。

但我收到错误：

> 找不到路径“c:\WindowsFormsApplication1\WindowsFormsApplication1\bin\Debug\~\Files\test.xml”的一部分。

但我的文件`Files`位于应用程序中的文件夹`WindowsFormsApplication1`中 `\bin\Debug`

那它为什么要搜索`\bin\Debug`呢？

form.cs 中的代码

```
DataSet dsAuthors = new DataSet("authors");
            string filePath = @"~/Files/test.xml";

            dsAuthors.ReadXml(filePath); 
```

还请告诉我有没有办法像我们在 Web 应用程序中那样使用 Server.MapPath。

我尝试了其他解决方案，例如：

```
string appPath = Path.GetDirectoryName(Application.ExecutablePath);

            System.IO.DirectoryInfo directoryInfo = System.IO.Directory.GetParent(appPath);
            System.IO.DirectoryInfo directoryInfo2 = System.IO.Directory.GetParent(directoryInfo.FullName);

            string path = directoryInfo2.FullName + @"\Files"; 
```

但出现错误： `Access to the path is denied.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:48:51.763

尝试：

```
 string filePath = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, Path.Combine("Files", "test.xml"));// @"~/Files/test.xml"; 
```

如果它不起作用，请确保 test.xml 将“复制到输出目录”属性设置为“始终复制”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:43:48.230

采用`Server.MapPath`

您正在使用相对网址。这不适用于 ReadXml。它需要磁盘上的绝对路径。

Server.MapPath 将采用您的虚拟路径并为您提供其绝对路径。

```
var fullPath = Server.MapPath("~/Files/test.xml");
dsAuthors.ReadXml(fullPath); 
```

注意：Server.MapPath 不验证路径是否实际存在。

# iphone - 如何在 Xcode 中使用 corbel 和 calibri 字体

> ID：11201933
> 
> 赞同：1
> 
> 时间：2012-06-26T06:39:58.727
> 
> 标签：iphone, ios, ipad, xcode4.2

我需要在我的新应用程序中的 textview 、 textfield 和 label 中使用 corbel 和 calibre 字体。我在谷歌搜索过，但没有找到任何解决方案。谁能帮帮我吗。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:47:44.920

跟着这些步骤：

1) 将所需字体作为资源添加到 Xcode。

2) 打开**info.plist**文件。现在创建一个名为**UIAppFonts**的键并将其设为数组。添加字体的文件名作为值。

```
 <key>UIAppFonts</key>
<array>
    <string>corbel.ttf</string>
</array> 
```

3) 保存**info.plist**文件。

4) 要在应用程序中使用字体，请添加此行。

```
[UIFont fontWithName:@"corbel" size:32.0] 
```

**礼貌 ：**

[**我可以在 iPhone 应用程序中嵌入自定义字体吗？**](https://stackoverflow.com/questions/360751/can-i-embed-a-custom-font-in-an-iphone-application)

[**IOS中的自定义字体。**](http://kgriff.posterous.com/45359635)

**PS** 但是要确定字体的确切名称，请放置临时代码行，因为即使是小写敏感也可能导致加载字体出现问题。

```
 NSLog(@"%@",[UIFont familyNames]); 
```

这将打印设备上所有字体的名称。找到与您的字体匹配的字体。无论您得到什么字体名称，都可以在**第 4 步**的行中使用它。

礼貌：[**如何在我的 iPhone 应用程序中包含字体？**](https://stackoverflow.com/questions/566054/how-do-i-include-a-font-with-my-iphone-application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:42:35.640

您可以将自定义字体添加到 Xcode，我认为[本文](http://www.perfectline.ee/blog/uiappfonts-custom-fonts-with-the-iphoneipad-3-2-sdk)可以帮助您这样做。我也找到[了这个](http://www.youtube.com/watch?v=NSuSDuoyfh4)视频。至于 calibre 和 corbel 文件，在 google 中快速搜索会得到你想要的：**corbel caliber tff**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T07:52:02.923

在 Mac OSX 中安装相同的字体并尝试在 textedit 应用程序中找到相同的字体名称。

在 Xcode 中键入准确的拼写（区分大小写）。

有时它会发生字体文件名不同，我们输入不同。将 exect 文件名放在 plist 文件中......但在应用程序中使用安装的字体名称（Xcode。）

# apache - 为 rewritecond 验证 query_string 中的域

> ID：11201935
> 
> 赞同：0
> 
> 时间：2012-06-26T06:40:38.140
> 
> 标签：apache, mod-rewrite, url-rewriting, query-string

我使用的网络服务器是 Apache 2.2。我正在尝试验证外部方发送的查询字符串中的域。

有效请求的示例： [https ://something.example.com/aaa/bbb/ccc?returnurl=https://test.example.com/home](https://something.example.com/aaa/bbb/ccc?returnurl=https://test.example.com/home)

无效请求示例：

1.  scheme://something.example.com/aaa/bbb/ccc?returnurl=https://something.evil.com/home
2.  scheme://something.example.com/aaa/bbb/ccc?returnurl=http://www.google.com
3.  scheme://something.example.com/aaa/bbb/ccct?returnurl=https://something.evil.com/blah?url=https://test.example.com/home

到目前为止，在我的 httpd.conf 文件中，我有：

```
 RewriteEngine On

    RewriteCond %{REQUEST_URI} ^/aaa/bbb/ccc$
    RewriteCond %{QUERY_STRING} !(\.|https://|http://)example\.com(\.|/)|(\.|https://|http://)exampledev\.com(\.|/) [NC]
    RewriteRule ^(.*) / [R=403,L] 
```

上面的代码基本上是查看查询字符串，如果 example.com 和 exampledev.com 不在 query_string 中，则将用户重定向到禁止页面。

此代码仅完成部分工作，因为无效请求编号 3 将被视为包含 example.com，这可能被视为网络钓鱼攻击

不知何故，我需要验证在 query_string returnurl 中返回的域。

http:// 或 httpd:// .com 或 .net 或 .org 或任何其他顶级域之间的字符串。

有人可以帮助或建议我如何验证作为 returnurl 查询字符串返回的域吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:49:08.823

使用以下内容：

```
RewriteEngine On

RewriteCond %{REQUEST_URI} ^/aaa/bbb/ccc$
RewriteCond %{QUERY_STRING} !(returnurl|[&]returnurl)=(http|https)://([a-zA-Z0-9]+[.]example[.]com|[a-zA-Z0-9]+[.]exampledev[.]com|example[.]com|exampledev[.]com)[&]{0,1}
RewriteRule ^(.*) / [R=403,L] 
```

# python - 无法构建 python-ldap-2.3.13

> ID：11201936
> 
> 赞同：1
> 
> 时间：2012-06-26T06:40:39.030
> 
> 标签：python

[我从http://pypi.python.org/pypi/python-ldap/2.3.13](http://pypi.python.org/pypi/python-ldap/2.3.13)下载了 Python LDAP 2.3.13但是在尝试构建它时给了我以下错误：

```
ldap/python-ldap-2.3.13> python setup.py build
extra_compile_args:
extra_objects:
include_dirs: /usr/local/openldap-2.3/include /usr/include/sasl
library_dirs: /usr/local/openldap-2.3/lib
libs: ldap_r lber sasl2 ssl crypto
running build
running build_py
file Lib/ldap.py (for module ldap) not found
file Lib/ldap/schema.py (for module ldap.schema) not found
creating build
creating build/lib.linux-x86_64-2.7
copying Lib/ldapurl.py -> build/lib.linux-x86_64-2.7
copying Lib/ldif.py -> build/lib.linux-x86_64-2.7
copying Lib/dsml.py -> build/lib.linux-x86_64-2.7
creating build/lib.linux-x86_64-2.7/ldap
copying Lib/ldap/__init__.py -> build/lib.linux-x86_64-2.7/ldap
copying Lib/ldap/async.py -> build/lib.linux-x86_64-2.7/ldap
copying Lib/ldap/controls.py -> build/lib.linux-x86_64-2.7/ldap
copying Lib/ldap/cidict.py -> build/lib.linux-x86_64-2.7/ldap
copying Lib/ldap/dn.py -> build/lib.linux-x86_64-2.7/ldap
copying Lib/ldap/filter.py -> build/lib.linux-x86_64-2.7/ldap
copying Lib/ldap/functions.py -> build/lib.linux-x86_64-2.7/ldap
copying Lib/ldap/ldapobject.py -> build/lib.linux-x86_64-2.7/ldap
copying Lib/ldap/modlist.py -> build/lib.linux-x86_64-2.7/ldap
copying Lib/ldap/resiter.py -> build/lib.linux-x86_64-2.7/ldap
copying Lib/ldap/sasl.py -> build/lib.linux-x86_64-2.7/ldap
creating build/lib.linux-x86_64-2.7/ldap/schema
copying Lib/ldap/schema/__init__.py -> build/lib.linux-x86_64-2.7/ldap/schema
copying Lib/ldap/schema/models.py -> build/lib.linux-x86_64-2.7/ldap/schema
copying Lib/ldap/schema/subentry.py -> build/lib.linux-x86_64-2.7/ldap/schema
copying Lib/ldap/schema/tokenizer.py -> build/lib.linux-x86_64-2.7/ldap/schema
file Lib/ldap.py (for module ldap) not found
file Lib/ldap/schema.py (for module ldap.schema) not found
running egg_info
writing requirements to Lib/python_ldap.egg-info/requires.txt
writing Lib/python_ldap.egg-info/PKG-INFO
writing top-level names to Lib/python_ldap.egg-info/top_level.txt
writing dependency_links to Lib/python_ldap.egg-info/dependency_links.txt
file Lib/ldap.py (for module ldap) not found
file Lib/ldap/schema.py (for module ldap.schema) not found
reading manifest file 'Lib/python_ldap.egg-info/SOURCES.txt'
reading manifest template 'MANIFEST.in'
warning: no files found matching 'Makefile'
warning: no files found matching 'Modules/LICENSE'
writing manifest file 'Lib/python_ldap.egg-info/SOURCES.txt'
running build_ext
building '_ldap' extension
creating build/temp.linux-x86_64-2.7
creating build/temp.linux-x86_64-2.7/Modules
-DHAVE_LIBLDAP_R -DHAVE_SASL -DHAVE_TLS -DLDAPMODULE_VERSION=2.3.13 -IModules -I/usr/local/openldap-2.3/include -I/usr/include/sasl -I/snaps14/satprasad/bin/python/usr/local/include/python2.7 -c Modules/LDAPObject.c -o build/temp.linux-x86_64-2.7/Modules/LDAPObject.o
unable to execute -DHAVE_LIBLDAP_R: No such file or directory
error: command '-DHAVE_LIBLDAP_R' failed with exit status 1
ldap/python-ldap-2.3.13> 
```

请让我知道如何解决这个问题？

# c# - 插入数据查询错误

> ID：11201937
> 
> 赞同：-2
> 
> 时间：2012-06-26T06:40:52.413
> 
> 标签：c#, nullreferenceexception

我试图通过登录系统来插入数据。我的查询没有任何错误，但运行时抛出的异常为“对象引用未设置为对象的实例”。检查我的代码，请纠正我。

```
protected void Button1_Click(object sender, EventArgs e)
    {
        try
        {
            if (TextBox6.Text == " ")
            {
                string alertmessage = "";
                alertmessage = "Username should not be blank";
                this.CreateMessageAlert(this, alertmessage, "alertKey");
                TextBox6.Focus();
            }
            else if (TextBox7.Text == " ")
            {
                string alertmessage = "";
                alertmessage = "Username should not be blank";
                this.CreateMessageAlert(this, alertmessage, "alertKey");
                TextBox7.Focus();
            }
            else
            {
                string sq = "SELECT COUNT(*) FROM tbl_KKSUser WHERE Uname=@un and Password=@pas";
                SqlCommand sd = new SqlCommand(sq, con);
                SqlParameter unameparam;
                unameparam = new SqlParameter("@un", SqlDbType.VarChar, 25);
                unameparam.Value = TextBox6.Text;
                sd.Parameters.Add(unameparam);

                string original = TextBox7.Text.Trim();
                string withhash = original;
                b1 = Encoding.BigEndianUnicode.GetBytes(withhash);
                encrypted = Convert.ToBase64String(b1);
                SqlParameter passparam;
                passparam = new SqlParameter("@pas", SqlDbType.VarChar, 8000);
                passparam.Value = Convert.ToString(encrypted);
                sd.Parameters.Add(passparam);

                con.Open();
                {
                    int iresults;
                    iresults = Convert.ToInt32(sd.ExecuteScalar().ToString());
                    if (iresults > 0)
                    {
                        string q = "insert into tbl_KKSMaterialRaise(MaterialCode,Source,Category,Population,StockInStores,Specification,PrearedBy,CheckedBy,ApprovedBy,CreatedDate) values(@mc,@sc,@cat,@pop,@sis,@spec,@pb,@cb,@ab,@cd)";
                        SqlCommand dm = new SqlCommand(q, con);
                        dm.Parameters.AddWithValue("@mc", Mcodeddl.SelectedItem.Text);
                        dm.Parameters.AddWithValue("@sc", TextBox1.Text.Trim());
                        dm.Parameters.AddWithValue("@cat", TextBox2.Text.Trim());
                        dm.Parameters.AddWithValue("@pop", TextBox3.Text.Trim());
                        dm.Parameters.AddWithValue("@sis", TextBox4.Text.Trim());
                        dm.Parameters.AddWithValue("@spec", TextBox5.Text.Trim());
                        dm.Parameters.AddWithValue("@pb", PBddl.SelectedItem.Text);
                        dm.Parameters.AddWithValue("@cb", CBddl.SelectedItem.Text);//In this line i have got error
                        dm.Parameters.AddWithValue("@ab", ABddl.SelectedItem.Text);
                        dm.Parameters.AddWithValue("@cd", DateTime.Today);
                        dm.ExecuteNonQuery();
                        string alertmessage = "";
                        alertmessage = "Component Details Saved";
                        this.CreateMessageAlert(this, alertmessage, "alertKey");
                    }
                    else
                    {
                        Response.Write("<script>alert('Invalid Username/Password')</script>");
                    }
                }
                con.Close();

            }
        }
        catch (Exception ex)
        {
            Response.Write(ex.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:47:12.773

看起来您的下拉列表之一很可能没有选择任何选项，即空引用来自以下行之一：

```
dm.Parameters.AddWithValue("@mc", Mcodeddl.SelectedItem.Text); 
```

在检索 .Text 属性之前，请尝试检查所有这些是否已选择项目。

如果不是这样，那么知道哪一行导致了异常会很有用——你通常可以从异常堆栈跟踪中得到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:46:54.117

这意味着您尚未初始化或分配变量。调试器应该具体告诉你哪个变量。仔细看看它。然后你只需要检查它是否已经初始化（= new Class()）或分配（= instance）。

你可能想看看[这个问题](https://stackoverflow.com/questions/4660142/what-is-a-nullreferenceexception-in-net)。

# ajax - 中止 ajax 请求的执行

> ID：11201942
> 
> 赞同：2
> 
> 时间：2012-06-26T06:41:26.877
> 
> 标签：ajax, jquery

我正在发送一个在选择框的更改事件上调用的 ajax 请求。现在我想要的是，当一个新请求发送到服务器时，它将中止所有以前的 ajax 请求，否则会有很多 ajax 请求同时执行。我只想执行最新的请求。

所有的帮助都将是非常可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:45:04.017

[使用 jQuery 中止 Ajax 请求](https://stackoverflow.com/questions/446594/abort-ajax-requests-using-jquery)

只需将 XMLHttpRequests 存储在一个数组中并一一中止它们。

# asp.net - 这里有两个错误

> ID：11201947
> 
> 赞同：0
> 
> 时间：2012-06-26T06:41:38.483
> 
> 标签：asp.net, global, freetextbox

首先我收到错误解析器错误消息：无法加载类型“WebApplication1.Global”。

源错误：

第 1 行：`<%@ Application Codebehind="Global.asax.cs" Inherits="WebApplication1.Global" Language="C#" %>`

源文件：/global.asax 行：1

`'FreeTextBoxControls.FreeTextBox, FreeTextBox, Version=3.3.1.12354, Culture=neutral, PublicKeyToken=5962a4e684a48b87'` 其次，当我下载了richtextcontrol（freetextboxcontrol）并放置在页面上时，错误1无法解析文件licenses.licx中的类型..我需要建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T09:15:43.623

对于第一部分，它找不到您的 .aspx 文件继承的文件 Inherits="WebApplication1.Global"，因此请从 Page 中删除此属性

第二部分转到“项目”->“添加引用...”选择“浏览”选项卡，浏览到 Bin 文件夹并添加“FreeTextBox.dll”引用。

它肯定会起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T09:34:52.857

1.  右键单击项目

2.  选择添加参考。

3.  选择了“浏览”选项卡

4.  浏览到 Bin 文件夹或这个 dll 'FreeTextBox.dll' 的位置并添加了一个 'FreeTextBox.dll'

# algorithm - 如何获得每个有效点的法线向量？

> ID：11201950
> 
> 赞同：0
> 
> 时间：2012-06-26T06:41:46.823
> 
> 标签：algorithm, math, rendering, hpc, voxel

```
float pts[N][4]={{x1,y1,z1,v1},{x2,y2,z2,v2},...,{xN,yN,zN,vN}};
//in viewsight(0,0)-(w,h);
//N==w*h
//if pts[n][3]==0 then pts[n] is invalid 
```

如何评估每个有效点的法线向量？

pts 是 Point-cloud-data 中的点，在 (w,h) 大小的视图中看到；

像这样的东西：

```
p11,p12,p13...p1w,
p21,p22,p23...p2w,
...
...
ph1,ph2,ph3...phw, 
```

每个点都由它们的邻居关联，并共同为我们生成一个表面。

pts 排列紧密，行和列。我们的任务是找到一种方法来尽可能准确地评估每个点的法线向量朝向我们的视野。

我正在尝试实时执行此操作，因为 pts 是实时生成的。例如，一次计算 1024x1024 点。有人以前发布过解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:44:11.523

通常，曲面上顶点的法线计算为相邻多边形的法线向量的平均值。见：[http ://www.opengl-redbook.com/appendices/AppH.pdf](http://www.opengl-redbook.com/appendices/AppH.pdf)

在这种情况下，对于具有以下邻居的顶点 p55：

```
p44 p45 p46
p54 p55 p56
p64 p65 p66 
```

你可以找到每个三角形的法线，

```
n1 = (p55 - p44) x (p55 - p45)
n2 = (p55 - p45) x (p55 - p46)
... 
```

确保保持向量的方向，以便所有法线都指向同一方向（朝向观察者）。从那里你只需要标准化所有的向量，然后取它们的平均值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:46:04.817

不可能评估一个点的法线向量。一个点不能有法向量。飞机可以。

# php - 使用响应重定向退出弹出窗口

> ID：11201954
> 
> 赞同：0
> 
> 时间：2012-06-26T06:42:00.623
> 
> 标签：php, javascript, html, redirect, response

我需要在我们的一个处理页面上显示退出弹出窗口。我通过注册客户端javascript来显示退出弹出窗口

```
window.onbeforeunload = ShowExitPopUp(); 
```

如果您关闭窗口或尝试输入不同的 URL，弹出窗口会正常执行。然而问题是，一旦进程完成，我的处理页面也在服务器端执行“Response.Redirect”。当 response.redirect 发生时，exitpopup 也会出现。在这种情况下，有没有办法让退出弹出窗口不显示？

这是我正在使用的下面的代码

```
<script type="text/javascript"> 

window.fbAsyncInit = function() {
    FB.Event.subscribe('comment.create',
    function (response) {
        window.location = "http://domain.com";
    });
    FB.Event.subscribe('comments.remove',
    function (response) {
        window.location = "http://domain.com";
    });   
};

(function() {
    var e = document.createElement('script');
    e.async = true;
    e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
    document.getElementById('fb-root').appendChild(e);
}());
//]]>
</script>

<script type="text/javascript">
var ShowExitPopup = true;
function ExitPage()
{
if (ShowExitPopup) 
{ 
ShowExitPopup = false;
location.href = "http://www.YOURURL.com/destination";
return '****************************************\n\YOUR HEADLINE\n\n YOUR TEXT1 \n\n  YOUR TEXT "\n\n                                                                                                     | |\n                                                                                                     | |\n                                                                                                    V V\n                                                      96+                                                v\n  ********************************************************\n';
}
} 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:16:46.767

```
if (document.getElementById('<%=Panel.ClientID %>').style.display == "") {
$find("<%= Popup.ClientID %>").hide();
document.getElementById("<%= btncloseAcc.ClientID %>").click();
} 
```

尝试这个..........

# c# - 访问 Datagridview (WinForms) 中的不可见列

> ID：11201964
> 
> 赞同：6
> 
> 时间：2012-06-26T06:42:30.257
> 
> 标签：c#, winforms, visual-studio-2010, .net-4.0, datagridview

我正在`DataGridView`使用从实体框架获得的列表中显示一些数据。在这个网格中，我将一些数据库列设置`id`为不可见。

当用户单击gridview时，我需要知道单击了哪个对象以进行进一步的步骤，问题是我无法获得该`id`列，也无法通过：

```
datagridview1.CurrentRow.Cells[0].Value // here I get only visible cells 
```

也不通过：

```
datagridview1.CurrentRow.DataBoundItem 
```

似乎通过将某些列设置为不可见，附加的对象具有匿名类型

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T19:40:38.400

我刚试过这个：

```
private void dataGridView_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
    var value = dataGridView.Rows[e.RowIndex].Cells[0].Value;
} 
```

它奏效了。

在我的示例中，第 0 列是隐藏列，其中包含要提取的 id 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T11:02:20.890

对我来说，取**columnName**而不是**index**是可行的。

因此，如果您的列具有名称“id”，您可以使用：

```
datagridview1.CurrentRow.Cells["id"].Value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-02T22:26:28.617

您可以使用我们的数据密钥。

列出隐藏字段的数据键。

然后，您可以使用以下代码访问这些值。

```
GridName.DataKeys[row.RowIndex][Index of key in datakey list].ToString() 
```

例如。假设您的网格名为 myGrid。

您已设置以下数据键：

*   地址
*   城市
*   状态
*   邮政编码

您访问地址的代码是：

```
myGrid.DataKeys[row.RowIndex[0].ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-18T20:09:18.590

我看到`Jakub Kaleta's answer`这被认为是最好的解决方案。经过我的测试，似乎有问题，`YOU SHOULD CLICK ON TEXT DATAGIDVIEW CELL VALUE` 而且它不是一个很好的解决方案！
我用下面的解决方案来做，你可以点击单元格的每个地方！

```
 private void dataGridView_SelectionChanged(object sender, EventArgs e)
        {
            if (dataGridView.SelectedCells.Count > 0)
            {
                int selectedrowindex = dataGridView.SelectedCells[0].RowIndex;
                DataGridViewRow selectedRow = dataGridView.Rows[selectedrowindex];
                _RoleID = int.Parse(Convert.ToString(selectedRow.Cells[1].Value));
                _RoleName = Convert.ToString(selectedRow.Cells[2].Value);

            }
        } 
```

它对我很有效；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-28T13:26:40.307

您可以添加扩展名：

```
public static Int32 ToInt32(this object value)
    {
        try
        {
            return Convert.ToInt32(value);
        }
        catch (Exception)
        {
            return 0;
        }
    }

public static object Get(this DataGridViewRow row,string columnName)
    {
        foreach (DataGridViewCell item in row.Cells)
        {
            if (item.OwningColumn.DataPropertyName.Equals(columnName))
            {
                return item.Value;
            }
        }

        return null;
    } 
```

并致电：

```
int id = gc.CurrentRow.Get("Id").ToInt32(); 
```

# django - 我怎么知道为什么我得到“权限被拒绝”页面？

> ID：11201966
> 
> 赞同：0
> 
> 时间：2012-06-26T06:42:35.647
> 
> 标签：django, admin

在我的管理员的某些操作中，我得到一个“权限被拒绝”页面，在调试日志中我得到

```
[26/Jun/2012 08:23:59] "POST /admin/securite_v2/magasin/ HTTP/1.0" 403 26 
```

我怎样才能看到到底发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:44:15.587

正如它所说，权限相关。

尝试对该 DIR 及其内容执行 CHMOD 777，并查看错误是否仍然存在。但请务必不要将其保留为 777 - 这会产生相当大的安全风险。

# java - 无法获取读取 .xls 文件的路径

> ID：11201978
> 
> 赞同：0
> 
> 时间：2012-06-26T06:43:29.263
> 
> 标签：java, jsp, servlets

我正在开发一个 .xls 阅读器，它获取 .xls 文件并读取它，并将输出作为纯文本提供，但我在将文件路径放入 servlet 时遇到了一些问题......我正在使用 poi.jar 来阅读.xls 文件 ..

.jsp

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <title>Upload Form</title>

    </head>

    <body bgcolor="lightblue">
 <table id='table1' align="center" >
                <tr>

                </tr></table><br/><br/><br/>  
            <br/>

            <table border="1" width="50%" bgcolor="#C2DFFF">
                <tr>
                    <td width="100%">
                        <form action="writeExcel" method="post" enctype="multipart/form-data">

                            <h2 align="center">Welcome</h2>
  <center>

      <input type="file" name="photo"/>
                                <input type="file" name="hem"/>
                                <br/><br/>
                                <input type="submit" value="Save"/>
                                &nbsp;
                                <input type="button" value="Logout" name="logout" onclick="goToURL();" />
                                <br/>
                                <br/>

                            </center>     
                        </form>
                    </td>
                </tr>
</table>

            <br/><br/>

    </body>
</html> 
```

.java

```
import java.io.FileInputStream;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.Iterator;
import java.util.Vector;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.poifs.filesystem.POIFSFileSystem;

public class writeExcel extends HttpServlet {

    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        String fileName = request.getParameter("hem");

       Vector dataHolder = ReadCSV(fileName);
        printCellDataToConsole(dataHolder);
    }

   public static Vector ReadCSV(String fileName) {
        Vector cellVectorHolder = new Vector();

        try {
            FileInputStream myInput = new FileInputStream(fileName);

            POIFSFileSystem myFileSystem = new POIFSFileSystem(myInput);

            HSSFWorkbook myWorkBook = new HSSFWorkbook(myFileSystem);

            HSSFSheet mySheet = myWorkBook.getSheetAt(0);

            Iterator rowIter = mySheet.rowIterator();

            while (rowIter.hasNext()) {
                HSSFRow myRow = (HSSFRow) rowIter.next();
                Iterator cellIter = myRow.cellIterator();
                Vector cellStoreVector = new Vector();
                while (cellIter.hasNext()) {
                    HSSFCell myCell = (HSSFCell) cellIter.next();
                    cellStoreVector.addElement(myCell);
                }
                cellVectorHolder.addElement(cellStoreVector);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return cellVectorHolder;
    }

    private static void printCellDataToConsole(Vector dataHolder) {

        for (int i = 0; i < dataHolder.size(); i++) {
            Vector cellStoreVector = (Vector) dataHolder.elementAt(i);
            for (int j = 0; j < cellStoreVector.size(); j++) {
                HSSFCell myCell = (HSSFCell) cellStoreVector.elementAt(j);
                String stringCellValue = myCell.toString();
                System.out.print(stringCellValue + "\t");
            }
            System.out.println();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:34:01.323

@AVD：fileName 是否代表文件/文档的绝对路径？如果没有，则设置/获取真实（绝对）路径。

@Nitin Sharma：谢谢AVD ..当我使用finename =“C：\ a.xls”时工作正常但我试图通过文件从.jsp获取路径，它只给出文件名而不是完整路径

@AVD：您必须将上传的文件保存在您的网络应用根目录（或子文件夹）下，或者使用上传文件的 InputStream（Servlet 3.0 部分或 Apache fileupload api）对象而不是文件名。

@Nitin Sharma：我不想上传文件...我只想获取该文件的完整路径..

@AVD：没什么好说的！没有选择。（不要保存上传的文件，而是使用上传文件的流）。

@Nitin Sharma：我使用了它，但是 poi 使​​用 File 类对象来读取文件..但是 Apache fileupload api 使用 FileItem 类对象来读取或获取 .xls 文件的路径...而且我无法将 FileItem 类型转换为文件

* * *

看一下`POIFSFileSystem`class，它带`InputStream`参数，你可以通过`FileItem.getInputStream()`（Commons upload）获取。

```
POIFSFileSystem myFileSystem = new POIFSFileSystem(fileItem.getInputStream()); 
```

# selenium - 自定义 portlet 的 Selenium 测试

> ID：11201986
> 
> 赞同：5
> 
> 时间：2012-06-26T06:43:58.907
> 
> 标签：selenium, automated-tests, liferay, liferay-6

谁能给我一个链接/文档，其中包含有关如何使用 Selenium 编写和测试自定义 Liferay Portlet 的信息。

我正在使用 Liferay 6.1EE

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T00:30:12.170

与其他测试相同，假设您想作为 JUnit 测试运行

```
package org.ood.selenium.test;
import com.gargoylesoftware.htmlunit.BrowserVersion;
import com.gargoylesoftware.htmlunit.IncorrectnessListener;
import com.gargoylesoftware.htmlunit.ScriptException;
import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlButton;
import com.gargoylesoftware.htmlunit.html.HtmlPage;
import com.gargoylesoftware.htmlunit.javascript.JavaScriptErrorListener;
import com.thoughtworks.selenium.SeleneseTestBase;
import com.thoughtworks.selenium.Selenium;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.htmlunit.HtmlUnitDriver;
import org.openqa.selenium.remote.DesiredCapabilities;
import org.openqa.selenium.By;
import org.openqa.selenium.OutputType;
import org.openqa.selenium.TakesScreenshot;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebDriverBackedSelenium;
import org.apache.commons.io.FileUtils;
import org.apache.commons.logging.LogFactory;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;

import java.io.File;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.logging.Level;
import java.util.regex.Pattern;

public class MyTest extends SeleneseTestBase {
    WebDriver driver =null;
    @Before
    public void setUp() throws Exception {
        DesiredCapabilities dc = DesiredCapabilities.firefox(); 
        // dc.setCapability(FirefoxDriver.BINARY, new 
        //File("C:/Program Files (x86)/Mozilla Firefox/firefox.exe").getAbsolutePath()); 
        dc.setJavascriptEnabled(true); 
        // driver= new HtmlUnitDriver(true);//Not properly working
        driver = new FirefoxDriver(dc);
        String baseUrl = "http://localhost:8080/web/guest/home"; 
        selenium = new WebDriverBackedSelenium(driver, baseUrl);
    }

    /*  @Test
    public void homePage() throws Exception {
        final WebClient webClient = new WebClient();
            //HTMLUNit throws lots of errors
        webClient.setJavaScriptEnabled(true);
        webClient.setJavaScriptErrorListener(new JavaScriptErrorListener() {

            public void timeoutError(HtmlPage htmlPage, long allowedTime,
                    long executionTime) {
                // TODO Auto-generated method stub

            }

            public void scriptException(HtmlPage htmlPage,
                    ScriptException scriptException) {
                System.out.println(scriptException.getMessage());

            }

            public void malformedScriptURL(HtmlPage htmlPage, String url,
                    MalformedURLException malformedURLException) {
                System.out.println(url);

            }

            public void loadScriptError(HtmlPage htmlPage, URL scriptUrl,
                    Exception exception) {
                // TODO Auto-generated method stub

            }
        });
        //webClient.setThrowExceptionOnFailingStatusCode(false);
        webClient.setThrowExceptionOnScriptError(false);
        final HtmlPage page = webClient.getPage("http://localhost:8080/web/guest/home");
        webClient.getCache().clear();

        page.getElementById("sign-in").click();
        page.getElementById("_58_login").type("test@liferay.com");
        page.getElementById("_58_password").type("test@liferay.com");
        final HtmlButton submit = (HtmlButton)page.getByXPath("//input").get(0);
        submit.click();

        //assertEquals("HtmlUnit - Welcome to HtmlUnit", page.getTitleText());

        System.out.println("Title= " +page.getTitleText());
        final String pageAsXml = page.asXml();
        // assertTrue(pageAsXml.contains("<body class=\"composite\">"));
        System.out.println("pageAsXml=" +pageAsXml);

        final String pageAsText = page.asText();
        //assertTrue(pageAsText.contains("Support for the HTTP and HTTPS protocols"));

        System.out.println("pageAsText="+pageAsText);
        webClient.closeAllWindows();
    }*/

    @Test //Using Graphical GUI
    public void testMytest() throws Exception {

        //driver.get("http://localhost:8080/web/guest/home");

        selenium.open("/");
        //selenium.click("id=sign-in");
        driver.findElement(By.id("sign-in")).click();
        driver.findElement(By.name("_58_login")).clear();
        driver.findElement(By.name("_58_login")).sendKeys("test@liferay.com");
        driver.findElement(By.name("_58_password")).sendKeys("123");
        //driver.findElement(By.name("_58_login")).sendKeys("test@nsn.com");
        //driver.findElement(By.name("_58_password")).sendKeys("test");
        driver.findElement(By.className("aui-button-input-submit")).submit();
        //selenium.setSpeed("1000");
        //selenium.waitForPageToLoad("5000");
        //Select a nested div( the NodeTree)
        driver.findElement(By.xpath("//div[contains(@class,'aui-tree-node-content')" +
                " and (contains(.,'TreeNodeX'))]//div[contains(@class,'aui-tree-hitarea')]"))
                .click();
        //selenium.captureScreenshot("d:/_del/sel_screen.png");//this throws an error
        //workaround
        File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
        FileUtils.copyFile(scrFile, new File("d:/_del/sel_screen.png"));

        System.out.println("Bodytex=[" +selenium.getBodyText() +"]End Body Text");

        String[] titles= selenium.getAllWindowTitles();
        System.out.println("Titles Start-");
        for (int i = 0; i < titles.length; i++) {
            System.out.println(titles[i]);
        }
        System.out.println("Titles End");
        verifyEquals(true, selenium.getBodyText().contains("Site View"));
    }

    @After
    public void tearDown() throws Exception {
        selenium.stop();
    }

} 
```

# python - Matplotlib 设置，用于从交互式绘图中保存用于发布和报告的数字

> ID：11201987
> 
> 赞同：3
> 
> 时间：2012-06-26T06:43:59.467
> 
> 标签：python, numpy, matplotlib, python-2.7

我编写了一个 python 函数来获取任何当前的交互式图形并修改标签和刻度标签的文本大小。然后删除顶部和右侧轴以获得更优选的图形输出格式。然后它输出数字。我遇到的问题是处理设置轴的大小，以便 xlabel 保持在图形的画布上，以便在输出时显示出来。我知道在创建轴时手动可以做到这一点：

```
ax = plt.axes([0.125,0.2,0.95-0.125,0.95-0.2]) 
```

无论如何在绘制图形之后设置这些参数？如果是这样，我如何获得访问权限或进行修改？（也可以在 matplotlibrc 文件中设置吗？）。

另一个问题与图形是否有图例有关：

我通常使用这组图例参数，但事后如何设置其他规范？我只弄清楚了下面的那些：

```
legArgs = dict(bbox_to_anchor=[.44,1.18], borderpad=0.1, labelspacing=0,
               handlelength=1.8, handletextpad=0.05, frameon=False, ncol=5,
                columnspacing=0.02)
               #ncol,numpoints,columnspacing,title,bbox_transform,prop
leg = ax.legend(tuple(legendLabels),tuple(modFreq),'upper center',**legArgs)
leg.get_title().set_fontsize(tick_size)
leg.set_frame_on(False)
leg.set_bbox_to_anchor([1.1,1.05])
for i in leg.get_texts():
    i.set_fontsize(8) 
```

带有辅助功能的完整绘图功能：

```
def plot_for_publication_output(fig, ax, filename, dir_addition='', 
                                fulldir=None, column_width=1, dpi=600,
                                out_formats=['.eps','.pdf','.png']):
    """
    column_width assumes a standard 2 column width format (default 1 column,
    2 meaning spreads across both columns)
    """
    if fulldir == None:
        store_dir = os.path.expanduser('~/'+'Dropbox/Research/Results/' + dir_addition)
    else:
        store_dir = fulldir

    spineLineWidth = 0.5
    tick_size = 9
    fontlabel_size = 10.5
    mydpi = dpi
    outExt = out_formats
    dashs = ['-.', '-', '--', ':']
    dashes = [(1.5, 0), (3.5, 1.5), (1.5, 1.5, 3,1.5), (1, 1)]
    plot_color = "bgrkcykw"
    fig_width_pt = 246.0 * column_width       # Get this from LaTeX using
                                              # \showthe\columnwidth
    inches_per_pt = 1.0 / 72.27               # Convert pt to inches
    golden_mean = (np.sqrt(5) - 1.0) / 2.0    # Aesthetic ratio
    fig_width = fig_width_pt * inches_per_pt  # width in inches
    fig_height = fig_width * golden_mean      # height in inches
    fig.set_size_inches(fig_width, fig_height)
    plotSetAxisTickLabels(ax, tick_size)
    plotSetAxisLabels(ax, fontlabel_size)
    #params = {'axes.labelsize': fontlabel_size, 'text.fontsize': fontlabel_size,
    #          'legend.fontsize': fontlabel_size, 'xtick.labelsize': tick_size,
    #          'ytick.labelsize': tick_size, 'text.usetex': True,
    #          'figure.figsize': fig_size}
    #plt.rcParams.update(params)
    #ax = plt.axes([0.125, 0.2, 0.95 - 0.125, 0.95 - 0.2])
    set_spineLineWidth(ax,spineLineWidth)
    clear_spines(ax)
    ax.yaxis.set_ticks_position('left')
    ax.xaxis.set_ticks_position('bottom')
    for i in outExt:
        plt.savefig(os.path.join(store_dir, filename) + i, dpi = mydpi)

def clear_spines(ax):
    ax.spines['top'].set_color('none')
    ax.spines['right'].set_color('none')
def set_spineLineWidth(ax, lineWidth):
    for i in ax.spines.keys():
        ax.spines[i].set_linewidth(lineWidth)
def showOnlySomeTicks(x, pos):
    s = str(int(x))
    if x == 5000:
        return    '5e3'#'%.0e' % x
    return ''
def plotSetAxisTickLabels(ax, size=16):
    for i in ax.xaxis.get_ticklabels():
        i.set_fontsize(size)
    for i in ax.yaxis.get_ticklabels():
        i.set_fontsize(size)

def plotSetAxisLabels(ax, size=16):
    ax.xaxis.get_label().set_fontsize(size)
    ax.yaxis.get_label().set_fontsize(size) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T13:12:44.647

您可以使用 set_position 函数更改轴位置：

```
# save the instance 
ax = plt.axes([0.125,0.2,0.95-0.125,0.95-0.2])

# change the axes position
ax.set_position([0.52, 0.85, 0.16, 0.075]) 
```

上述命令的文档可在[matplotlib 轴文档](http://matplotlib.sourceforge.net/api/axes_api.html#matplotlib.axes.Axes.set_position)中找到。

您还可以[在 API 中的 legend 中](http://matplotlib.sourceforge.net/api/legend_api.html)找到图例实例的函数，您可能已经找到了，或者在子对象的文档中四处寻找，您也可以以与此行相同的方式调用子函数：

```
leg.get_title().set_fontsize(tick_size) 
```

# c - 消息队列示例中的重新分配或释放错误

> ID：11201990
> 
> 赞同：0
> 
> 时间：2012-06-26T06:44:08.497
> 
> 标签：c, linux, realloc

在这里，我`realloc or free`在消息队列示例中遇到了一些问题。

在下面的程序中，我`double free or corruption`在从消息队列收到最后一条消息时出错。

我在消息队列中发送了 10 条消息，我在接收方收到了 10 条消息，并且工作正常。收到每条消息后，我正在释放`buf`指针。并且每次都是免费的，但上次出现问题意味着第 10 次。它给定的错误就像`double free or corruption`在我检查它是否存在之前它是如何可能`NULL`的，如果条件意味着它不是NULL，那么它如何给出这样的错误。

当我运行超过 10 条消息时，另一件事令人惊讶的是它唯一给出的错误。

如果我发送 1 到 9 条消息，它工作正常。

请让我知道我的代码中的确切问题在哪里。

发送.c

```
/*filename   : send.c
 *To compile : gcc send.c -o send
 */
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/msg.h>

#define SEPRATOR 0X03

struct my_msgbuf
{
    long mtype; /* Message type, must be > 0 */
    char tag[10];
    char messageType[5];
    int messageNumber;
    char sender[64]; 
    char formdata[1]; /* Some compilers allow `char mtext[0]` */
};

int main(void)
{

    int msqid;
    key_t key;
    static int count = 0;
    int sperator = 3;
    int run = 1;
    if ((key = ftok("send.c", 'B')) == -1)
    {
        perror("ftok");
        exit(1);
    }
    printf("send.c Key is = %d\n", key);

    if ((msqid = msgget(key, 0644 | IPC_CREAT)) == -1)
    {
        perror("msgget");
        exit(1);
    }
    printf("Enter lines of text, ^D to quit:\n");
    printf("Size of strcuture == %ld\n",sizeof (struct my_msgbuf));
    while (run)
    {
        count++;
        /* Put string in a temporary place */
        char tempformdata[1024];
        char tempSender[64];
        snprintf(tempformdata, sizeof (tempformdata), "%d%cHi hello test message here%c%d%cHi hello test message here%c%d%cHi hello test message here",count,SEPRATOR,SEPRATOR,count,SEPRATOR,SEPRATOR,count,SEPRATOR);
    snprintf(tempSender, sizeof (tempSender), "TESTMEM%cTESTMEM%cTESTMEM",SEPRATOR,SEPRATOR);
        /* +1 for the terminating '\0' */
        size_t msgsz1 = strlen(tempformdata) + 1;
        //size_t msgsz2 = strlen(tempDestination) + 1;
        size_t msgsz2 = strlen(tempSender) + 1;
        /* Allocate structure, and memory for the string, in one go */
        struct my_msgbuf *buf = malloc(sizeof (struct my_msgbuf) + msgsz1);
        /* Set up the message structure */
        buf->mtype = 1;
        memcpy(buf->tag,"TAGVALUES",8);
        memcpy(buf->messageType,"FORM",4);
        buf->messageNumber = 5;
        memcpy(buf->formdata, tempformdata, msgsz1);
        memcpy(buf->sender, tempSender, strlen(tempSender));
        /* And send the message */
        msgsnd(msqid, buf, (sizeof (struct my_msgbuf) + msgsz1- sizeof(long)), 0);
        if (count == 11)
            run = 0;
        usleep(1000000);
    }
    if (msgctl(msqid, IPC_RMID, NULL) == -1)
    {
        perror("msgctl");
        exit(1);
    }
    return 0;
} 
```

接收.c

```
/* filename   : receive.c
 * To compile : gcc receive.c -o receive
 */
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/msg.h>

struct my_msgbuf
{
    long mtype; /* Message type, must be > 0 */
    char tag[10];
    char messageType[5];
    int messageNumber;
    char sender[64];    
    char formdata[1]; /* Some compilers allow `char mtext[0]` */
};

int main(void)
{
    size_t msgsz = 8;
    struct my_msgbuf *buf = NULL;
    int msqid;
    key_t key;

    if ((key = ftok("send.c", 'B')) == -1)
    { /* same key as send.c */
        perror("ftok");
        exit(1);
    }

    if ((msqid = msgget(key, 0644)) == -1)
    { /* connect to the queue */
        perror("msgget");
        exit(1);
    }

    printf("test: ready to receive messages, captain.\n");

    for (;;)
    {
        /* Allocate if `buf`  is NULL, otherwise reallocate */
        buf = realloc(buf, msgsz);

        /* Receive message */
        ssize_t rsz = msgrcv(msqid, buf, msgsz, 1, 0);

        if (rsz == -1)
        {
            if (errno == E2BIG)
                msgsz += 8; /* Increase size to reallocate and try again */
            else
            {
                perror("msgrcv");
                break;
            }
        }
        else
        {
            /* Can use `buf->mtext` as a string, as it already is zero-terminated */
            printf("Received message of length %d bytes\n", rsz);
            printf("\tReceived Tag value is             :   %s \n",buf->tag);
            printf("\tReceived Message Type value is    :   %s \n",buf->messageType);
            printf("\tReceived Message Number value is  :   %d \n",buf->messageNumber);
            printf("\tReceived destinations value is    :   %s \n",buf->sender);        
            printf("\tReceived form Data Value is       :   %s \n",buf->formdata);
            if(buf!=NULL)
            {
                printf("\nFree Done in Else\n");
                free(buf);
                printf("\nFree Done in Else 2 \n");
                printf("test \n");
                buf = NULL;
            }

        }
    }
    return 0;
} 
```

输出 ：

```
test: ready to receive messages, captain.
Received message of length 175 bytes
    Received Tag value is           :   TAGVALUE 
    Received Message Type value is  :   FORM 
    Received Message Number value is    :   5 
    Received destinations value is  :   TESTMEMTESTMEMTESTMEM 
    Received form Data Value is         :   1Hi hello test message here1Hi hello test message here1Hi hello test message here 

Free Done in Else

Free Done in Else 2 
test 
Received message of length 175 bytes
    Received Tag value is           :   TAGVALUE 
    Received Message Type value is  :   FORM 
    Received Message Number value is    :   5 
    Received destinations value is  :   TESTMEMTESTMEMTESTMEM 
    Received form Data Value is         :   2Hi hello test message here2Hi hello test message here2Hi hello test message here 

Free Done in Else

Free Done in Else 2 
test 
.
.
.
Received message of length 175 bytes
    Received Tag value is           :   TAGVALUE 
    Received Message Type value is  :   FORM 
    Received Message Number value is    :   5 
    Received destinations value is  :   TESTMEMTESTMEMTESTMEM 
    Received form Data Value is         :   9Hi hello test message here9Hi hello test message here9Hi hello test message here 

Free Done in Else

Free Done in Else 2 
test 
msgrcv: Identifier removed
quipment@ubuntu:~/main/IPC/message_queue$ ./receive
test: ready to receive messages, captain.
Received message of length 175 bytes
    Received Tag value is           :   TAGVALUE 
    Received Message Type value is  :   FORM 
    Received Message Number value is    :   5 
    Received destinations value is  :   TESTMEMTESTMEMTESTMEM 
    Received form Data Value is         :   1Hi hello test message here1Hi hello test message here1Hi hello test message here 

Free Done in Else

Free Done in Else 2 
test 
Received message of length 175 bytes
    Received Tag value is           :   TAGVALUE 
    Received Message Type value is  :   FORM 
    Received Message Number value is    :   5 
    Received destinations value is  :   TESTMEMTESTMEMTESTMEM 
    Received form Data Value is         :   2Hi hello test message here2Hi hello test message here2Hi hello test message here 

Free Done in Else

Free Done in Else 2 
test 
Received message of length 175 bytes
    Received Tag value is           :   TAGVALUE 
    Received Message Type value is  :   FORM 
    Received Message Number value is    :   5 
    Received destinations value is  :   TESTMEMTESTMEMTESTMEM 
    Received form Data Value is         :   3Hi hello test message here3Hi hello test message here3Hi hello test message here 

Free Done in Else

Free Done in Else 2 
test 
Received message of length 175 bytes
    Received Tag value is           :   TAGVALUE 
    Received Message Type value is  :   FORM 
    Received Message Number value is    :   5 
    Received destinations value is  :   TESTMEMTESTMEMTESTMEM 
    Received form Data Value is         :   4Hi hello test message here4Hi hello test message here4Hi hello test message here 

Free Done in Else

Free Done in Else 2 
test 
Received message of length 175 bytes
    Received Tag value is           :   TAGVALUE 
    Received Message Type value is  :   FORM 
    Received Message Number value is    :   5 
    Received destinations value is  :   TESTMEMTESTMEMTESTMEM 
    Received form Data Value is         :   5Hi hello test message here5Hi hello test message here5Hi hello test message here 

Free Done in Else

Free Done in Else 2 
test 
Received message of length 175 bytes
    Received Tag value is           :   TAGVALUE 
    Received Message Type value is  :   FORM 
    Received Message Number value is    :   5 
    Received destinations value is  :   TESTMEMTESTMEMTESTMEM 
    Received form Data Value is         :   6Hi hello test message here6Hi hello test message here6Hi hello test message here 

Free Done in Else

Free Done in Else 2 
test 
Received message of length 175 bytes
    Received Tag value is           :   TAGVALUE 
    Received Message Type value is  :   FORM 
    Received Message Number value is    :   5 
    Received destinations value is  :   TESTMEMTESTMEMTESTMEM 
    Received form Data Value is         :   7Hi hello test message here7Hi hello test message here7Hi hello test message here 

Free Done in Else

Free Done in Else 2 
test 
Received message of length 175 bytes
    Received Tag value is           :   TAGVALUE 
    Received Message Type value is  :   FORM 
    Received Message Number value is    :   5 
    Received destinations value is  :   TESTMEMTESTMEMTESTMEM 
    Received form Data Value is         :   8Hi hello test message here8Hi hello test message here8Hi hello test message here 

Free Done in Else

Free Done in Else 2 
test 
Received message of length 175 bytes
    Received Tag value is           :   TAGVALUE 
    Received Message Type value is  :   FORM 
    Received Message Number value is    :   5 
    Received destinations value is  :   TESTMEMTESTMEMTESTMEM 
    Received form Data Value is         :   9Hi hello test message here9Hi hello test message here9Hi hello test message here 

Free Done in Else

Free Done in Else 2 
test 
Received message of length 178 bytes
    Received Tag value is           :   TAGVALUE 
    Received Message Type value is  :   FORM 
    Received Message Number value is    :   5 
    Received destinations value is  :   TESTMEMTESTMEMTESTMEM 
    Received form Data Value is         :   10Hi hello test message here10Hi hello test message here10Hi hello test message here 

Free Done in Else
*** glibc detected *** ./receive: double free or corruption (!prev): 0x0000000001b17010 ***
======= Backtrace: =========
/lib/libc.so.6(+0x775b6)[0x7f5faf6435b6]
/lib/libc.so.6(cfree+0x73)[0x7f5faf649e83]
./receive[0x400986]
/lib/libc.so.6(__libc_start_main+0xfd)[0x7f5faf5eac4d]
./receive[0x400719]
======= Memory map: ========
00400000-00401000 r-xp 00000000 08:11 5374010                            /home/quipment/main/IPC/message_queue/receive
00600000-00601000 r--p 00000000 08:11 5374010                            /home/quipment/main/IPC/message_queue/receive
00601000-00602000 rw-p 00001000 08:11 5374010                            /home/quipment/main/IPC/message_queue/receive
01b17000-01b38000 rw-p 00000000 00:00 0                                  [heap]
7f5fa8000000-7f5fa8021000 rw-p 00000000 00:00 0 
7f5fa8021000-7f5fac000000 ---p 00000000 00:00 0 
7f5faf3b5000-7f5faf3cb000 r-xp 00000000 08:01 2228303                    /lib/libgcc_s.so.1
7f5faf3cb000-7f5faf5ca000 ---p 00016000 08:01 2228303                    /lib/libgcc_s.so.1
7f5faf5ca000-7f5faf5cb000 r--p 00015000 08:01 2228303                    /lib/libgcc_s.so.1
7f5faf5cb000-7f5faf5cc000 rw-p 00016000 08:01 2228303                    /lib/libgcc_s.so.1
7f5faf5cc000-7f5faf746000 r-xp 00000000 08:01 2231881                    /lib/libc-2.11.1.so
7f5faf746000-7f5faf945000 ---p 0017a000 08:01 2231881                    /lib/libc-2.11.1.so
7f5faf945000-7f5faf949000 r--p 00179000 08:01 2231881                    /lib/libc-2.11.1.so
7f5faf949000-7f5faf94a000 rw-p 0017d000 08:01 2231881                    /lib/libc-2.11.1.so
7f5faf94a000-7f5faf94f000 rw-p 00000000 00:00 0 
7f5faf94f000-7f5faf96f000 r-xp 00000000 08:01 2231874                    /lib/ld-2.11.1.so
7f5fafb4b000-7f5fafb4e000 rw-p 00000000 00:00 0 
7f5fafb6b000-7f5fafb6e000 rw-p 00000000 00:00 0 
7f5fafb6e000-7f5fafb6f000 r--p 0001f000 08:01 2231874                    /lib/ld-2.11.1.so
7f5fafb6f000-7f5fafb70000 rw-p 00020000 08:01 2231874                    /lib/ld-2.11.1.so
7f5fafb70000-7f5fafb71000 rw-p 00000000 00:00 0 
7fffab732000-7fffab747000 rw-p 00000000 00:00 0                          [stack]
7fffab796000-7fffab797000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
Aborted 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-26T08:53:33.673

在receive.c中，realloc的调用方式如下：

```
buf = realloc(buf, msgsz + sizeof(long)); 
```

这应该可以解决您的问题。

此外，在 send.c 中，您应该在每个 msgsnd 之后调用 free 并且在将数据复制到`tag`和`messageType`字段时忘记尾随`'\0'`字符 - 您很幸运，因为内存已清零，但这不能保证。

# objective-c - 注册最后一个鼠标位置以进行平滑绘图

> ID：11201996
> 
> 赞同：0
> 
> 时间：2012-06-26T06:44:20.060
> 
> 标签：objective-c, xcode, cocoa, opengl, mouseevent

我使用 OpenGL 在视图中使用鼠标进行绘图。一切看起来都不错，但是当我快速绘制鼠标时，它不会在每个像素中绘制，会出现一些间距。我在这里添加[图片链接](http://s13.postimage.org/t3re0nmdj/Screen_Shot_2012_06_26_at_9_38_08_AM.png)。我当前的 mouseDragged 代码非常简单：

```
- (void) mouseDragged:(NSEvent *)event
{
    location = [self convertPoint: [event locationInWindow] fromView:self];
    NSLog(@"current location (%g,%g)\n",location.y,location.x);
    [self drawSomething];
} 
```

任何更正确地注册鼠标位置的解决方案？或者可以通过某种方式注册 currentMouseLocation 和 previousMouseLocation？像 iOS 函数*previousLocationInView:*之类的东西，这样我就可以告诉 OpenGL 在每两点之间画线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:04:42.240

试试这个：

```
- (void) mouseDragged:(NSEvent *)event
{
    location = [self convertPoint: [event locationInWindow] fromView:self];

    NSLog(@"current location (%g,%g)\n",location.y,location.x);
    NSLog(@"previous location (%g,%g)\n",prev_location.y,prev_location.x);

    [self drawSomething];

    prev_location = location;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:50:01.870

在您的“mouseDragged”中，您可以存储鼠标的先前位置，甚至可以跟踪将点存储在动态数组中的整个路径。这就是为什么没有“先前位置”属性的原因——你可以自己做一个。

有鼠标灵敏度之类的东西，所以一些跳跃是不可避免的——你所能做的就是插值，这基本上意味着你必须从 (prevX, prevY) ​​到 (thisX, thisY) 画线。如果您存储了所有点，则只需绘制折线。

# r - 带有ggmap的世界地图

> ID：11201997
> 
> 赞同：28
> 
> 时间：2012-06-26T06:44:23.057
> 
> 标签：r, ggplot2, ggmap

我正在使用 ggmap 并希望有一张以澳大利亚为中心的世界地图，我可以轻松地绘制地理编码点。与其他一些映射包相比，ggmap 似乎更容易使用。然而，当我使用下面的代码打开地图时，它会出错。

```
gc <- geocode('australia')
center <- as.numeric(gc) 
> map <- get_map(location = center, source="google", maptype="terrain", zoom=0)
Error: zoom must be a whole number between 1 and 21 
```

来自 get_map 帮助：“zoom：地图缩放，从**0（全球）到 21**（建筑）的整数，默认值 10（城市）。openstreetmaps 将缩放限制为 18，雄蕊地图的限制取决于地图类型。 'auto' 自动确定边界框规格的缩放，并且默认为 10 与中心/缩放规格。”

将缩放更改为一个对于 get_map 不会出错，但对于绘制该地图会出错

```
map <- get_map(location = center, source="google", maptype="terrain", zoom=1)
ggmap(map)

Warning messages:
1: In min(x) : no non-missing arguments to min; returning Inf
2: In max(x) : no non-missing arguments to max; returning -Inf
3: In min(x) : no non-missing arguments to min; returning Inf
4: In max(x) : no non-missing arguments to max; returning -Inf 
```

看起来经度没有被拉过。最后，放大 2 倍，它确实有效，但并没有带来整个世界的地图

所以，我的问题是如何使用 get_map 来获取世界地图？

会话信息：

> sessionInfo() R 版本 2.15.0 (2012-03-30) 平台：i386-pc-mingw32/i386 (32-bit)

```
locale:
[1] LC_COLLATE=English_United Kingdom.1252 
[2] LC_CTYPE=English_United Kingdom.1252   
[3] LC_MONETARY=English_United Kingdom.1252
[4] LC_NUMERIC=C                           
[5] LC_TIME=English_United Kingdom.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] mapproj_1.1-8.3 maps_2.2-6      rgdal_0.7-12    sp_0.9-99      
[5] ggmap_2.1       ggplot2_0.9.1  

loaded via a namespace (and not attached):
[1] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       grid_2.15.0       
[5] labeling_0.1       lattice_0.20-6     MASS_7.3-17        memoise_0.1       
[9] munsell_0.3        plyr_1.7.1         png_0.1-4          proto_0.3-9.2     
[13] RColorBrewer_1.0-5 reshape2_1.2.1     RgoogleMaps_1.2.0  rjson_0.2.8       
[17] scales_0.2.1       stringr_0.6        tools_2.15.0 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-26T10:53:01.947

**编辑**：更新到 ggplot2 v 0.9.3

我最近尝试了类似的东西，但收效甚微。但是，有多种方法可以使`map`包中的世界地图居中：请参见[此处](https://stackoverflow.com/questions/5353184/fixing-maps-library-data-for-pacific-centred-0-360-longitude-display)、[此处](https://stackoverflow.com/questions/10620862/use-different-center-than-the-prime-meridian-in-plotting-a-world-map)和[此处](http://www.stanford.edu/~cengel/cgi-bin/anthrospace/great-circles-on-a-recentered-worldmap-in-ggplot)。使用后者的代码，这是一个将世界地图以经度 160 为中心的示例，在使用 ggplot2 绘制的世界地图上绘制 CRAN 镜像位置（使用`geocode()`ggmap 包中的函数获得的坐标），并为新西兰着色（使用`geom_polygon`）。将地图以经度 160 居中，使整个非洲位于地图左侧，格陵兰大部分位于地图右侧。

```
library(maps)
library(plyr)
library(ggplot2)
library(sp)
library(ggmap)

# Get some points to plot - CRAN Mirrors
Mirrors = getCRANmirrors(all = FALSE, local.only = FALSE)

Mirrors$Place = paste(Mirrors$City, ", ", Mirrors$Country, sep = "")    # Be patient
tmp = geocode(Mirrors$Place)
Mirrors = cbind(Mirrors, tmp)

###################################################################################################
# Recentre worldmap (and Mirrors coordinates) on longitude 160
### Code by Claudia Engel  March 19, 2012, www.stanford.edu/~cengel/blog

### Recenter ####
center <- 160 # positive values only

# shift coordinates to recenter CRAN Mirrors
Mirrors$long.recenter <- ifelse(Mirrors$lon < center - 180 , Mirrors$lon + 360, Mirrors$lon)

# shift coordinates to recenter worldmap
worldmap <- map_data ("world")
worldmap$long.recenter <- ifelse(worldmap$long < center - 180 , worldmap$long + 360, worldmap$long)

### Function to regroup split lines and polygons
# Takes dataframe, column with long and unique group variable, returns df with added column named group.regroup
RegroupElements <- function(df, longcol, idcol){
  g <- rep(1, length(df[,longcol]))
  if (diff(range(df[,longcol])) > 300) { # check if longitude within group differs more than 300 deg, ie if element was split
    d <- df[,longcol] > mean(range(df[,longcol])) # we use the mean to help us separate the extreme values
    g[!d] <- 1 # some marker for parts that stay in place (we cheat here a little, as we do not take into account concave polygons)
    g[d] <- 2 # parts that are moved
  }
  g <- paste(df[, idcol], g, sep=".") # attach to id to create unique group variable for the dataset
  df$group.regroup <- g
  df
}

### Function to close regrouped polygons
# Takes dataframe, checks if 1st and last longitude value are the same, if not, inserts first as last and reassigns order variable
ClosePolygons <- function(df, longcol, ordercol){
  if (df[1,longcol] != df[nrow(df),longcol]) {
    tmp <- df[1,]
    df <- rbind(df,tmp)
  }
  o <- c(1: nrow(df)) # rassign the order variable
  df[,ordercol] <- o
  df
}

# now regroup
worldmap.rg <- ddply(worldmap, .(group), RegroupElements, "long.recenter", "group")

# close polys
worldmap.cp <- ddply(worldmap.rg, .(group.regroup), ClosePolygons, "long.recenter", "order") # use the new grouping var
#############################################################################

# Plot worldmap using data from worldmap.cp
windows(9.2, 4)
worldmap = ggplot(aes(x = long.recenter, y = lat), data = worldmap.cp) + 
  geom_polygon(aes(group = group.regroup), fill="#f9f9f9", colour = "grey65") + 
  scale_y_continuous(limits = c(-60, 85)) + 
  coord_equal() +  theme_bw() + 
  theme(legend.position = "none",
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank(),
    axis.title.x = element_blank(),
    axis.title.y = element_blank(),
    #axis.text.x = element_blank(),
    axis.text.y = element_blank(),
    axis.ticks = element_blank(), 
    panel.border = element_rect(colour = "black"))

# Plot the CRAN Mirrors
worldmap = worldmap + geom_point(data = Mirrors, aes(long.recenter, lat),
   colour = "red", pch = 19, size = 3, alpha = .4)

# Colour New Zealand
# Take care of variable names in worldmap.cp
head(worldmap.cp)
worldmap + geom_polygon(data = subset(worldmap.cp, region == "New Zealand", select = c(long.recenter, lat, group.regroup)), 
          aes(x = long.recenter, y = lat, group = group.regroup), fill = "blue") 
```

![在此处输入图像描述](../Images/bf684d8ab1559ffc6d14f7de7d5543d7.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-04T20:20:58.583

我最近遇到了同样的错误，它归结为 ggmap 不喜欢 $\pm$ 80° 以外的纬度。

但是，我不得不单独下载我的图像，因为它太大而无法下载（使用 OSM）；这不是你的问题，但我记录下来供以后的读者阅读。

这是我解决它的方法：

*   [通过BigMap](http://openstreetmap.gryph.de/bigmap.html)单独下载墨卡托投影图像
*   纬度需要注意：当我预计在 85° OSM 覆盖之前一切都应该正常时，我遇到了与纬度限制在 $\pm$ 80° 之外显示的相同的错误），但我没有追踪它们，因为我反正不不需要很高的纬度。
*   0°/0° 中心很适合我的目的（我在欧洲 :-)），但是您当然可以将图像剪切到任何对您有利的位置，然后自己用`cbind`. 只要确保你知道你的切割经度。
*   然后设置图像的边界框
*   并分配适当的类

这就是我所做的：

```
require ("ggmap")
library ("png")

zoom <- 2
map <- readPNG (sprintf ("mapquest-world-%i.png", zoom))
map <- as.raster(apply(map, 2, rgb))

# cut map to what I really need
pxymin <- LonLat2XY (-180,73,zoom+8)$Y # zoom + 8 gives pixels in the big map
pxymax <- LonLat2XY (180,-60,zoom+8)$Y # this may or may not work with google
                                       # zoom values
map <- map [pxymin : pxymax,]

# set bounding box
attr(map, "bb") <- data.frame (ll.lat = XY2LonLat (0, pxymax + 1, zoom+8)$lat, 
                                  ll.lon = -180, 
                                  ur.lat = round (XY2LonLat (0, pxymin, zoom+8)$lat), 
                                  ur.lon = 180)
class(map) <- c("ggmap", "raster")

ggmap (map) + 
  geom_point (data = data.frame (lat = runif (10, min = -60 , max = 73), 
                                 lon = runif (10, min = -180, max = 180))) 
```

结果：
![ggplot世界地图](../Images/31351abf732c15b312d8fa6083b3a205.png)

编辑：我在你的谷歌地图上玩了一下，但我没有得到正确的纬度。:-(

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-05T09:21:36.037

我已经设法基于谷歌地图构建世界地图。不幸的是，这有点失真，因为我相信 ggmap/Google Maps 会施加限制（数据长度 = 409600 像素，维度是 792 的倍数）。然而，以下大小、比例和缩放参数的组合提供了带有 ggmap 的 Google 世界地图。

当然，您可以根据需要更改`lon`以将纵向焦点更改为澳大利亚。

```
library(tidyverse)

your_gmaps_API_key <- ""

get_googlemap(center = c(lon = 0, lat = 0)
          , zoom = 1
          , maptype="roadmap"
          , size = c(512,396) 
          , scale = 2
          , color = "bw"
          , key = your_gmaps_API_key) %>% ggmap(.) 
```

[![生成的地图](../Images/d211423c3bec963323138d483c807e01.png)](https://i.stack.imgur.com/rkt3m.png)

注意：地图上的点来自我自己的数据集，不是由上面的代码生成的，但世界地图在这里是最重要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-03T17:14:20.873

查看 ggplot 的内置 coord_map。这可以创建地图而不需要第三方的瓦片集。它非常适合简单的地图，并且可以使用 ggplot 的所有优点。

[http://docs.ggplot2.org/current/coord_map.html](http://docs.ggplot2.org/current/coord_map.html)