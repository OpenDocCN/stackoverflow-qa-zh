# StackOverflow 问答 000320000-000320999

# debugging - 使用 Cygwin 可执行文件中的堆栈转储

> ID：320001
> 
> 赞同：26
> 
> 时间：2008-11-26T07:47:58.500
> 
> 标签：debugging, gdb, cygwin, coredump, insight

所以我写了错误的代码，偶尔会崩溃......并创建了一个 stackdump 文件。

使用 addr2line 我可以通过将地址解码为一个来弄清楚程序是如何到达崩溃点的。是否有替代工具可以使用堆栈转储来简化调试？有没有办法在 Insight/Gdb 中加载这些信息？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2009-01-06T09:26:54.430

您可以指示 Cygwin 在发生故障时及时启动 gdb 调试器。为此，请添加`error_start=action`到 Cygwin 环境变量：
`export CYGWIN="$CYGWIN error_start=gdb -nw %1 %2"`

否则，您可以让 Cygwin 生成真正的核心转储。
`export CYGWIN="$CYGWIN error_start=dumper -d %1 %2"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T08:08:16.433

首先，确保您在构建时启用了源代码调试（使用 -g 选项）：

```
gcc -g -o myfile myfile.c 
```

然后在崩溃后将转储加载到 gdb 中（或洞察力，或 ddd）

```
gdb myfile core 
```

# sql - 由 UNION 形成的表的列名

> ID：320004
> 
> 赞同：12
> 
> 时间：2008-11-26T07:49:41.930
> 
> 标签：sql, sqlite, union

给定几个简单的表格，如下所示：

```
create table R(foo text);
create table S(bar text); 
```

如果我要在查询中将它们联合在一起，我该如何称呼该列？

```
select T.????
from (
    select foo
    from R
    union
    select bar
    from S) as T; 
```

现在，在 mysql 中，我显然可以将 T 的列称为“foo”——联合中第一个关系的匹配列的名称。然而，在 sqlite3 中，这似乎不起作用。有没有一种在所有 SQL 实现中都是标准的方法？

如果没有，那么只为 sqlite3 怎么样？

更正：sqlite3 确实允许您将 T 的列称为“foo”！哎呀！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-11-26T08:00:33.483

尝试为列指定别名；

```
select T.Col1
from (
    select foo as Col1
    from R
    union
    select bar as Col1
    from S) as T; 
```

或者如果不需要列的名称，那么 T.* 就足够了。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-11-26T08:06:02.147

虽然没有拼写规则，但我们可以使用联合查询中第一个子查询中的列名来获取联合结果。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-31T10:46:38.747

您只需要在第一次选择中使用列别名（在 SQl Server 2008 R2 中测试）

```
select T.Col1
from (
    select 'val1' as Col1
    union
    select 'val2'
    union
    select 'val3'     
) as T; 
```

# database-design - 这是一个好的数据库设计概念吗？

> ID：320007
> 
> 赞同：1
> 
> 时间：2008-11-26T07:52:43.967
> 
> 标签：database-design, normalization

EDIT1：试图通过重命名表格及其关系来解决问题。EDIT2：请不要查看我在三个数据库表中保存的数据类型。他们是在飞行中组成的。它们不是我的真实世界场景（不，我不能谈论我的真实世界数据......事实上，目前它是 1 个父母和 6 个孩子）。请忽略什么类型的数据，只看需要一些数据的事实。EDIT3：这两个 FK 是 0 或 1 对 1 的关系。不是 0 到很多。不是 1 对 1。我试图避免 0 或 1 对 1 关系与 1 对 1 关系，所以我不需要外部连接，而是有一个内部连接。

问题：我需要知道建议的数据库设计是好/坏/蹩脚/等等。

问题：今天我尝试制作*索引视图*，但失败了，因为我的表有外连接。叹。所以我想知道我是否可以将其修复为如下设计：

*   三张桌子。
*   table_User 在 table_Address 上有一个 FK
*   table_User 在 table_Vehicle 上有一个 FK
*   ETC..

和表 B 和 C（现在有点像查找表）有..

*   Id INT IDENTITY PK
*   说明 NVARCHAR(100) *NULLABLE*

注意可以为空的？这样，table_User 中的某些内容在 table_Address 中不存在......该字段为空（因为内部连接）。

之前，我做了一个 LEFT OUTER JOIN，所以如果 table_b 中没有数据，我会得到空值是每个字段的结果。

我将在这里抛出一些数据示例......

表_用户

*   ID：1，姓名：Fred，地址ID：1（NULL）
*   ID: 2, Name: Joe, AddressID: 2 (1 smith street.....)
*   ID: 3, Name: Jane, AddressID: 2 (1 smith street.....)

表地址

*   ID：1，描述 = NULL
*   ID：2，描述 = 1 smith street

等等

所以我终于可以把这一切都放到一个索引视图中。（我的现实生活场景大约有 8 张桌子）。

注意：DB 是 Microsoft Sql Server 2008，但这可能适用于任何 DB。

Q1：这个设计看起来还可以吗？

Q2：所以我在这里做的是对数据进行规范化，对吗？通过保持内部连接在一起。

Q3：最后，如果这是一个好的方法..我是否也可以通过一些唯一的约束或键或索引或什么来确保表中的数据是唯一的（例如街道地址）（我不确定的适当术语）。

谢谢大师！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-26T08:08:35.993

我发现您的问题令人困惑，但也许我可以提供一些帮助。

首先，表没有连接，查询有。您不会创建一个连接到另一个表的表。只有 2 个表可能相关，您可以使用联接查询这些表。

我建议您阅读有关 db normalization 的内容。维基百科有一篇很棒的文章：[http ://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

关于您目前的情况，我不确定您要做什么。如果该地址在不同的行中重复，则具有地址的 ID 似乎没问题。然而，需要几个“地址表”似乎很奇怪。设计时要记住的最重要的事情是： - 在每个表中都有一个正确的主键，这样您就可以正确地连接表。- 除非你有非常好的理由，否则不要重复数据。但我再次推荐上一篇文章。

希望有帮助！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T08:21:10.370

一个非常令人困惑的问题，所以请查看数据库的规范化。第 3 范式（希望在英语中这样称呼）应该可以解决大多数问题。

快速提示：如果您有重复的数据，那么您需要一个单独的表，您可以通过外键在第一个表中引用该表。其他一切都只是查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T10:52:08.067

我个人会对这种设计说“不”。原因：

*   （可能不适用）试图保持地址字段标准化意味着您需要处理此字段以确保避免意外重复。即您必须确保用户以正确的格式输入地址（否则 '1 mystreet' 也可以输入为 '1, mystreet' 或其他 - 需要检查这一点以避免重复，否则规范化无济于事）
*   即使您找到规范化的理由（即为地址保留单独的表），“虚拟”地址的概念对我来说也很奇怪。为什么不使用可为空的 FK 关系，即在父用户表中存储一个 NULL 地址 ID，而不是在其中放置一个虚拟 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T08:43:49.043

因此，您基本上是在表 B 和 C 中添加虚假记录，以使行数与 A 中的行数相同？如果我是你，我不会这样做，因为如果你的数据集很大，那么你会在没有任何实际需要的情况下增加行数，而且你也面临着不一致的风险（你的布局很大程度上取决于你拥有插入这些虚假记录）。除此之外，你想用索引视图实现什么？性能增益？您不是在编写您正在使用的 DBMS，但是根据我在 MSSQL 方面的经验，这不会给您带来很多好处，因为只要您在表 A、B 和 C 中有适当的索引，服务器就可以使用即使没有索引视图，他们也可以构建良好的查询计划。

# php - 您可以在 PHP 中的类之外编写类函数吗？

> ID：320009
> 
> 赞同：3
> 
> 时间：2008-11-26T07:54:07.193
> 
> 标签：php

在 C++ 中，我这样编码：

```
//foo.h    
class cBar
{
    void foobar();
} 
```

* * *

```
//foo.cpp
void cBar::foobar()
{
    //Code
} 
```

我试图在 PHP 上这样做，但解析器会抱怨。PHP 的文档也无济于事。这可以在 PHP 中完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-26T08:06:32.443

不，您需要在类块中包含所有函数定义。如果在一个单独的结构中定义你的函数让你感觉更好，你可以使用一个接口。

```
interface iBar
{
    function foobar();
}

class cBar implements iBar
{
    function foobar()
    {
        //Code
    }
} 
```

我建议只是习惯以一种新的方式编码。在一种语言中进行一致的编码很容易，但我认为如果你想跨语言做同样的事情，你正在打一场失败的战斗。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T08:05:36.093

你不能以同样的方式真正做到这一点。

不过，您可以使用[类抽象](http://nl2.php.net/manual/en/language.oop5.abstract.php)和[接口](http://nl2.php.net/manual/en/language.oop5.interfaces.php)。两者的主要区别在于，接口不允许你指定函数体，抽象对象中的（非抽象）方法可以保存各种默认行为。

**抽象：**

```
abstract class cBar
{
    // MUST be extended
    abstract protected function foobar();

    // MAY be extended
    protected function someMethod()
    {
        // do stuff
    }
}

class cBarExtender extends cBar
{
    protected function foobar()
    {
        // do stuff
    }

} 
```

**界面：**

```
interface cBar 
{
    // MUST be implemented
    protected function foobar();
}

class cBarImplementation implements cBar
{
    protected function foobar()
    {
        // do stuff
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T18:02:31.647

该语言并没有真正提供此功能，但如果您*真的*想要它，您可以安装[ClassKit](http://pecl.php.net/package/classkit)扩展，它可以让您在运行时进行一些动态类修改。

# wpf - WPF中的双向绑定

> ID：320028
> 
> 赞同：31
> 
> 时间：2008-11-26T08:07:51.847
> 
> 标签：wpf, data-binding

我无法在 WPF 中进行双向绑定。

我的应用程序主窗口中有一个字符串属性，它绑定到一个 TextBox（我将模式设置为“TwoWay”）。

TextBox 的值唯一会更新的时间是窗口初始化时。

当我在 TextBox 中键入时，基础字符串属性值不会改变。

当字符串属性的值被外部源更改时（例如 Click 上的事件，它只是重置 TextBox 的值），更改不会传播到 TextBox。

即使在这个几乎微不足道的例子中，我必须执行哪些步骤才能使双向绑定正常工作？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2008-11-26T08:14:53.673

很可能您正在尝试绑定到 .net CLR 属性而不是 WPF dependencyProperty（除了其他一些东西之外，它还提供更改通知）。
对于普通的 CLR 属性，您需要在 PropertyChanged 的​​事件处理程序中实现 INotifyPropertyChanged 并强制更新文本框。

*   所以让你的带有属性的对象实现这个接口，在属性设置器中引发事件。（所以现在我们有属性更改通知）
*   确保对象设置为 UI 元素/控件的 DataContext 属性

当我开始学习 WPF 数据绑定时，这也让我大吃一惊。

**更新：** *好吧，OP，如果我在错误的树上吠叫，那将是浪费时间。无论如何，现在你必须挖一点。你会记得很长时间。*这是完善此答案的代码片段。还发现，一旦我退出，就会自动更新文本框。如果您的 datacontext 对象不是实现 INotifyPropertyChanged 的​​对象，您只需要手动订阅事件并更新 UI。

我的窗口.xaml

```
<Window x:Class="DataBinding.MyWindow" ...
    Title="MyWindow" Height="300" Width="300">
    <StackPanel x:Name="TopLevelContainer">
        <TextBox x:Name="txtValue"  Background="AliceBlue" Text="{Binding Path=MyDotNetProperty}" />
        <TextBlock TextWrapping="Wrap">We're twin blue boxes bound to the same property.</TextBlock>
        <TextBox x:Name="txtValue2"  Background="AliceBlue" Text="{Binding Path=MyDotNetProperty}" />
    </StackPanel>
</Window> 
```

MyWindow.xaml.cs

```
public partial class MyWindow : Window, INotifyPropertyChanged
{
    public MyWindow()
    {
        InitializeComponent();
        this.MyDotNetProperty = "Go ahead. Change my value.";
        TopLevelContainer.DataContext = this;
    }

    private string m_sValue;
    public string MyDotNetProperty
    {
        get { return m_sValue; }
        set
        {
            m_sValue = value;
            if (null != this.PropertyChanged)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("MyDotNetProperty"));
            }
        }
    }

    #region INotifyPropertyChanged Members
    public event PropertyChangedEventHandler PropertyChanged;
    #endregion
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-09-22T21:41:33.593

我觉得有必要增加一些精度：

“两种方式”数据绑定不仅仅是“一种方式”数据绑定。

“单向”数据绑定是从源到依赖属性的绑定。源必须实现 INotifyPropertyChanged，以便从源到目标进行更改传播。

要获得“2 方式”，从而获得从 Target 到 Source 的传播，这取决于您在 Binding 上设置的绑定模式。如果您没有为您的绑定设置任何 BindingMode，则将使用默认的 Binding 模式，并且此默认模式是您的目标 Dependency Property 的特性。

## 例子：

绑定到字符串属性的文本框，称为“MyTextProperty”。在代码中，您将 Textbox.Text DependencyProperty 绑定到对象“MyObject”上的“MyTextProperty”

--> “单向”绑定：“My TextProperty”的设置器必须引发一个事件 Property Changed，并且“MyObject”必须实现 INotifyPropertyChanged。

--> “2ways data binding”：除了需要“One way”之外，bindingMode必须设置为“2ways”。在这种特殊情况下，Textbox 的 Text DependencyProperty 确实有“2 种方式”作为默认模式，所以没有其他事情可做！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-26T08:12:23.663

我们可能需要查看代码。您的字符串属性是否引发 PropertyChanged 事件？或者（甚至更好）它是作为 DependencyProperty 实现的吗？如果没有，绑定的 TextBox 将不知道值何时更改。

至于在 TextBox 中输入却没有看到属性值的变化，那可能是因为您的 TextBox 没有失去焦点。默认情况下，在焦点离开控件之前，绑定的 TextBox 不会将其值写回源属性。尝试跳出它并查看属性值是否更改。

# java - Gui - 在窗口之间导航的最佳方式？

> ID：320043
> 
> 赞同：3
> 
> 时间：2008-11-26T08:20:47.483
> 
> 标签：java, user-interface, swing

我尝试为一个简单的 java 应用程序构建一个 gui (Swing)。应用程序应该有一个像菜单一样的开始窗口。从那里我想导航到其他几个窗口。

我的问题是实现这种导航的最佳实践是什么？我应该构建几个 JFrame 并在导航时打开/关闭它们的可见性，还是应该更好地拥有一个 JFrame 并在这个单一框架中添加/删除 JPanel 以在窗口之间导航？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T08:27:41.870

我建议

*   不要像在旧 Windows 时代那样使用子框架来执行 MDI 应用程序*。*他们糟透了，因为他们使事情变得混乱。
*   设计一个选项卡式界面。欢迎页面/菜单将显示在始终在开始时创建的第一个选项卡上。

现在所有很酷的孩子都会这样做：

*   视觉工作室
*   蚀
*   火狐

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T08:27:54.363

对我来说，多个 JFrame 听起来是一个更好的主意。更多的OO。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T08:38:47.277

如果您的每个窗口对应于不同的任务（可能是嵌套的），您可以将您的应用程序呈现为 SDI，在左侧有一个**任务面板**，如：

![演示](https://i.stack.imgur.com/Zucvw.png)

每个任务都会显示一个带有相关窗口的 JFrame。

其他解决方案：左侧像这张图片的**[目录](http://www.java2s.com/Code/Java/Swing-Components/SwingTaskpanestyle6.htm)**

（注意：它实际上在右下角的这个例子中也显示了一个任务面板）

![SwingX演示](https://i.stack.imgur.com/KbYmE.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-26T08:57:16.893

您必须在这些目标之间找到平衡点：

*   一个“窗口”中没有太多东西
*   用户必须能够快速找到正确的窗口来完成下一步工作
*   所有相关信息必须随时可见

Eclipse 通过创建许多小型编辑器来解决这个问题，每个编辑器显示一些特定信息并允许对其进行修改。然后将编辑器排列在一个 OS 窗口中的选项卡和“视图”中。视图始终是完全可见的，并且可以排列。将视图视为一种将现有编辑器切成两半（水平或垂直）然后能够用另一个编辑器替换其中一半的方法。在每一半之间，你有一个分离器，所以你可以调整大小。

然后将视图的排列保存在“透视”中。

这允许每个用户创建一个同时包含所有必要编辑器的透视图，根据需要安排它们并有效地工作。

# database - 如何从 Informix 中的名称获取约束详细信息？

> ID：320045
> 
> 赞同：6
> 
> 时间：2008-11-26T08:21:44.440
> 
> 标签：database, constraints, informix

在编写大型事务（大量插入、删除、更新）并因此违反 Informix（v10，但也应适用于其他版本）中的约束时，我收到一条不太有用的消息，例如，我违反了约束 r190_710。我怎样才能找出哪些表和键被某个约束所覆盖，我只知道它的名称？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-28T21:30:46.830

Tony Andrews 建议（指向 URL 的不同端点）：

> 从[Informix Guide to SQL: Reference](http://publib.boulder.ibm.com/infocenter/idshelp/v115/index.jsp)看来，您应该查看系统目录表 SYSCONSTRAINTS 和 SYSINDICES。

该手册中描述了 Informix 系统目录。

毫无疑问，SysConstraints 表是分析约束的起点；您可以在该表中找到约束名称，然后您可以从那里找到其他详细信息。

但是，您还必须查看其他表，而不仅仅是（甚至直接）SysIndices。

例如，我的数据库中的表有很多 NOT NULL 约束。对于那些，约束类型为“N”，无需在其他地方查找更多信息。

约束类型“P”表示主键；这需要通过 SysIndexes 视图或 SysIndices 表进行更多分析。同样，约束类型“U”表示唯一约束，需要来自 SysIndexes 视图或 SysIndices 表的额外信息。

'C' 的约束类型表示检查约束；约束的文本（和二进制编译形式）可在 SysChecks 表中找到（数据类型为“T”和“B”；数据或多或少使用 Base-64 编码，但没有“=”填充最后并为 62 和 63 使用不同的字符）。

最后，约束类型“R”表示参照完整性约束。您可以使用 SysReferences 表来找出引用了哪个表，并使用 SysIndexes 或 SysIndices 来确定使用了引用和被引用表上的哪些索引，并从中可以发现相关的列。这会变得很毛茸茸！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-08T12:07:12.170

表中具有约束的列

```
SELECT
    a.tabname, b.constrname, d.colname
FROM
    systables a, sysconstraints b, sysindexes c, syscolumns d
WHERE
    a.tabname = 'your_table_name_here'
AND
    b.tabid = a.tabid
AND
    c.idxname = b.idxname
AND
    d.tabid = a.tabid
AND
(
    d.colno = c.part1 or 
    d.colno = c.part2 or 
    d.colno = c.part3 or 
    d.colno = c.part4 or 
    d.colno = c.part5 or 
    d.colno = c.part6 or 
    d.colno = c.part7 or 
    d.colno = c.part8 or 
    d.colno = c.part9 or 
    d.colno = c.part10 or 
    d.colno = c.part11 or 
    d.colno = c.part12 or
    d.colno = c.part13 or 
    d.colno = c.part14 or 
    d.colno = c.part15 or 
    d.colno = c.part16
)
ORDER BY
    a.tabname, 
    b.constrname,
    d.colname 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-27T10:57:24.290

我一直在使用以下查询来获取有关不同类型约束的更多信息。它基于系统表中的一些探索和关于系统目录的一些解释。

sysconstraints.constrtype 表示约束的类型：

*   P = 主键
*   U = 唯一键/备用键
*   N = 不为空
*   C = 检查
*   R = 参考/外键

```
select
  tab.tabname,
  constr.*, 
  chk.*,
  c1.colname col1,
  c2.colname col2,
  c3.colname col3,
  c4.colname col4,
  c5.colname col5
from sysconstraints constr
  join systables tab on tab.tabid = constr.tabid
  left outer join syschecks chk on chk.constrid = constr.constrid and chk.type = 'T'
  left outer join sysindexes i on i.idxname = constr.idxname
  left outer join syscolumns c1 on c1.tabid = tab.tabid and c1.colno = abs(i.part1)
  left outer join syscolumns c2 on c2.tabid = tab.tabid and c2.colno = abs(i.part2)
  left outer join syscolumns c3 on c3.tabid = tab.tabid and c3.colno = abs(i.part3)
  left outer join syscolumns c4 on c4.tabid = tab.tabid and c4.colno = abs(i.part4)
  left outer join syscolumns c5 on c5.tabid = tab.tabid and c5.colno = abs(i.part5)
where constr.constrname = 'your constraint name' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-01T15:31:49.693

获取受约束“r190_710”影响的表：

```
select TABNAME from SYSTABLES where TABID IN
(select TABID from sysconstraints where CONSTRID IN
(select CONSTRID from sysreferences where PTABID IN 
(select TABID from sysconstraints where CONSTRNAME= "r190_710" )
)
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-03T15:52:05.123

通过浏览 www.iiug.org（国际 Informix 用户组），我发现了这个不太容易的解决方案。

(1) 从约束名称中获取引用约束数据（可以通过将“AND sc.constrname = ?”替换为“AND st.tabname MATCHES ?”来获取表的所有约束）。该语句在这里选择了一些不必要的字段，因为它们在其他情况下可能会很有趣。

```
SELECT si.part1, si.part2, si.part3, si.part4, si.part5, 
    si.part6, si.part7, si.part8, si.part9, si.part10, 
    si.part11, si.part12, si.part13, si.part14, si.part15, si.part16, 
    st.tabname, rt.tabname as reftable, sr.primary as primconstr, 
    sr.delrule, sc.constrid, sc.constrname, sc.constrtype, 
    si.idxname, si.tabid as tabid, rc.tabid as rtabid 
FROM 'informix'.systables st, 'informix'.sysconstraints sc, 
     'informix'.sysindexes si, 'informix'.sysreferences sr, 
     'informix'.systables rt, 'informix'.sysconstraints rc 
WHERE st.tabid = sc.tabid 
  AND st.tabtype != 'Q' 
  AND st.tabname NOT MATCHES 'cdr_deltab_[0-9][0-9][0-9][0-9][0-9][0-9]*' 
  AND rt.tabid = sr.ptabid 
  AND rc.tabid = sr.ptabid
  AND sc.constrid = sr.constrid 
  AND sc.tabid = si.tabid 
  AND sc.idxname = si.idxname 
  AND sc.constrtype = 'R' 
  AND sc.constrname = ?
  AND sr.primary = rc.constrid 
ORDER BY si.tabid, sc.constrname 
```

(2) 使用part1-part16来判断哪一列受约束：part[n]包含一个非0的值，包含使用列的列号。使用 (3) 查找列的名称。

如果 constrtype 为 'R'（引用），请使用以下语句查找引用表的部分：

```
SELECT part1, part2, part3, part4, part5, part6, part7, part8, 
    part9, part10, part11, part12, part13, part14, part15, part16 
FROM 'informix'.sysindexes si, 'informix'.sysconstraints sc 
WHERE si.tabid = sc.tabid 
AND si.idxname = sc.idxname 
AND sc.constrid = ? -- primconstr from (1) 
```

(3) 现在可以使用 (1) 中的 tabid 和 rtabid（用于引用约束）来获取表的列，如下所示：

```
SELECT colno, colname 
FROM 'informix'.syscolumns 
WHERE tabid = ? -- tabid(for referenced) or rtabid(for referencing) from (1)
  AND colno = ? -- via parts from (1) and (2)
ORDER BY colno 
```

(4) 如果constrtype是'C'，则得到如下检查信息：

```
SELECT type, seqno, checktext
FROM 'informix'.syschecks
WHERE constrid = ? -- constrid from (1) 
```

确实毛茸茸的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-26T16:00:46.650

从[Informix Guide to SQL: Reference](http://www.dbcenter.cise.ufl.edu/triggerman/infoshelf/sqlr/01.fm3.html#225634)看来，您应该查看系统目录表 SYSCONSTRAINTS 和 SYSINDICES。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-09T12:27:54.270

如果你的约束是命名`constraint_c6`的，这里是如何转储它的定义（好吧，你仍然需要连接行，因为它们将被空格分隔）：

```
OUTPUT TO '/tmp/constraint_c6.sql' WITHOUT HEADINGS
SELECT ch.checktext
FROM  syschecks ch, sysconstraints co
WHERE ch.constrid = co.constrid
  AND ch.type = 'T' -- text lines only
  AND co.constrname = 'constraint_c6' 
ORDER BY ch.seqno; 
```

# algorithm - 排序字典以最大化相邻单词之间的常见字母

> ID：320046
> 
> 赞同：2
> 
> 时间：2008-11-26T08:21:49.993
> 
> 标签：algorithm, language-agnostic, puzzle

这旨在成为我之前问题的更具体、更容易表达的形式。

从字典中获取具有常用字母长度的单词列表。
如何重新排序此列表以在相邻单词之间保持尽可能多的字母？

示例 1：

```
AGNI, CIVA, DEVA, DEWA, KAMA, RAMA, SIVA, VAYU
reorders to:  
AGNI, CIVA, SIVA, DEVA, DEWA, KAMA, RAMA, VAYU 
```

示例 2：

```
DEVI, KALI, SHRI, VACH
reorders to:
DEVI, SHRI, KALI, VACH 
```

最简单的算法似乎是：选择任何东西，然后搜索最短距离？
但是，DEVI->KALI (1 common) 等价于 DEVI->SHRI (1 common)
选择第一个匹配项会导致整个列表中的常见对更少（4 对 5）。

这似乎应该比完整的 TSP 更简单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-28T17:17:01.193

您要做的是计算完整加权图中的最短哈密顿路径，其中每个单词都是一个顶点，每个边的权重是这两个单词之间不同的字母数。

对于您的示例，该图的边权重如下：

```
     德维·卡利·施里·瓦赫
德维 X 3 3 4
卡利 3 X 3 3
SHRI 3 3 X 4
瓦赫 4 3 4 X

```

然后，只需选择您最喜欢的[TSP 求解算法](http://en.wikipedia.org/wiki/Traveling_salesman_problem)，您就可以开始了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T08:50:25.957

我的伪代码：

*   创建一个节点图，其中每个节点代表一个单词
*   在所有节点之间创建连接（每个节点都连接到其他每个节点）。每个连接都有一个“值”，即常用字符的数量。
*   删除“值”为 0 的连接。
*   通过首选具有最高值的连接来遍历图表。如果您有两个具有相同值的连接，请递归尝试。
*   将 walk 的输出与此特定结果中单词之间的距离总和一起存储在列表中。如果您可以简单地总结您使用的连接，我不能 100% 确定 ATM。你自己看。
*   从所有输出中，选择具有最高值的输出。

这个问题可能是 NP 完全问题，这意味着算法的运行时间将随着字典的增长而变得难以忍受。现在，我只看到了一种优化方法：将图形切割成几个较小的图形，在每个图形上运行代码，然后加入列表。结果不会像您尝试每个排列时那样完美，但运行时会更好，最终结果可能“足够好”。

[编辑] 由于该算法不会尝试所有可能的组合，因此很可能会错过完美的结果。甚至有可能陷入局部最大值。比如说，你有一对价值为 7 的货币对，但如果你选择了这对货币，所有其他价值都会下降到 1；如果您不使用这对，大多数其他值将是 2，从而提供更好的整体最终结果。

该算法以完美换取速度。如果尝试每一种可能的组合都需要数年时间，即使使用世界上最快的计算机，您也必须找到某种方法来限制运行时。

如果字典很小，您可以简单地创建每个排列，然后选择最佳结果。如果它们超出一定的界限，你就完蛋了。

另一种解决方案是将两者混合。使用贪心算法找到可能还不错的“岛屿”，然后使用“完整搜索”对小岛屿进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T10:15:52.430

您可能想看看[BK-Trees](http://en.wikipedia.org/wiki/BK-tree)，它可以有效地查找具有给定距离的单词。不是一个完整的解决方案，但可能是其中的一个组成部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T11:45:48.927

这个问题有一个名字：n-ary Gray code。由于您使用的是英文字母，因此 n = 26。[有关格雷码的 Wikipedia 文章](http://en.wikipedia.org/wiki/Gray_code)描述了该问题并包含一些示例代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-26T08:33:51.403

这可以通过递归方法来完成。伪代码：

```
Start with one of the words, call it w
FindNext(w, l) // l = list of words without w
  Get a list l of the words near to w
  If only one word in list
    Return that word
  Else
    For every word w' in l do FindNext(w', l') //l' = l without w' 
```

您可以添加一些分数来计算常见对并更喜欢“更好”的列表。

# java - 如何将 Struts 2 与 Velocity 和 Tiles 一起使用

> ID：320049
> 
> 赞同：6
> 
> 时间：2008-11-26T08:24:23.187
> 
> 标签：java, struts2, velocity, tiles

有没有人能够使用 struts 2 获得速度和瓷砖？

我在网上查找示例或教程时遇到了一些问题，从我从邮件列表中收集的内容来看，这似乎根本不可能（但邮件已经很旧了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-16T19:10:58.180

[https://struts.apache.org/docs/tiles-plugin.html](https://struts.apache.org/docs/tiles-plugin.html)

您可以从 apache struts 的文档开始。我同时使用瓷砖和速度，它们工作正常。我将速度用于电子邮件模板和前端模板的磁贴。

您还可以参考 Dzone、TutorialsPoint 和 Mykong 上的各种示例。他们提供了很好的例子。

# python - 你如何迭代一棵树？

> ID：320052
> 
> 赞同：5
> 
> 时间：2008-11-26T08:26:22.947
> 
> 标签：python, algorithm

遍历树数据结构的首选方法是什么，因为在某些情况下递归方法调用效率很低。我只是使用像上面这样的生成器。你有什么提示可以让它更快吗？

```
def children(self):
    stack = [self.entities]
    while stack: 
        for e in stack.pop():
            yield e
            if e.entities:
                stack.append(e.entities) 
```

这是一些测试数据。第一个是递归的，第二个使用生成器：

```
s = time.time()
for i in range(100000):
    e.inc_counter()
print time.time() - s

s = time.time()
for i in range(100000):
    for e in e.children():
        e.inc_counter_s()
print time.time() - s 
```

结果：

```
0.416000127792
0.298999786377 
```

测试代码：

```
import random

class Entity():
    def __init__(self, name):
        self.entities = []
        self.name = name
        self.counter = 1
        self.depth = 0

    def add_entity(self, e):
        e.depth = self.depth + 1
        self.entities.append(e)

    def inc_counter_r(self):
        for e in self.entities:
            e.counter += 1
            e.inc_counter_r()

    def children(self):
        stack = [self.entities]
        while stack:
            for e in stack.pop():
                yield e
                if e.entities:
                    stack.append(e.entities)

root = Entity("main")
def fill_node(root, max_depth):
    if root.depth <= max_depth:
        for i in range(random.randint(10, 15)):
            e = Entity("node_%s_%s" % (root.depth, i))
            root.add_entity(e)
            fill_node(e, max_depth)
fill_node(root, 3)

import time
s = time.time()
for i in range(100):
    root.inc_counter_r()
print "recursive:", time.time() - s

s = time.time()
for i in range(100):
    for e in root.children():
        e.counter += 1
print "generator:",  time.time() - s 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-26T08:32:05.433

除非你的树真的很大或者你对速度有很高（真正的）要求，否则我会选择递归方法。更容易阅读，更容易编码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-26T10:31:15.800

递归函数调用并不是非常低效，这是一个古老的编程神话。（如果它们实施不当，它们可能会产生比必要更大的开销，但称它们为“非常低效”是完全错误的。）

记住：不要过早优化，也*不要*在没有先进行基准测试的情况下进行优化。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-26T10:33:04.487

我想不出任何大的算法改进，但是您可以进行的一个简单的微优化是将经常调用的方法（例如 stack.append / stack.pop）绑定到本地（这可以节省字典查找）

```
def children(self):
    stack = [self.entities]
    push = stack.append
    pop = stack.pop
    while stack: 
        for e in pop():
            yield e
            if e.entities:
                push(e.entities) 
```

通过我的测试，这给了一个小的（~15%）加速（使用 8 深度树的 100 次遍历，每个节点有 4 个子节点给了我以下时间：）

```
children     :  5.53942348004
children_bind:  4.77636131253 
```

不是很大，但如果速度很重要，那么值得一试。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-26T09:01:37.057

我不确定您是否可以在树的*完整*按序遍历中大大减少开销，如果您使用递归，调用堆栈会增长一些，否则您必须在访问每个时手动使用堆栈来推送子项的引用节点。哪种方式最快并且使用更少的内存，取决于调用堆栈与普通堆栈的成本。（我猜调用堆栈更快，因为它应该针对它的使用进行优化，并且递归更容易实现）

如果您不关心访问节点的顺序，则树的某些实现实际上存储在动态数组或链表或堆栈中，如果您不关心遍历的顺序，您可以线性遍历。

但是，为什么快速遍历很重要呢？树适合搜索，数组/链表适合完全遍历。如果您经常需要完整的按顺序遍历但很少有搜索和插入/删除，那么有序链表可能是最好的，如果搜索是您最常做的事情，那么您使用树。如果数据真的很大，内存开销可能导致递归不可能，你应该使用数据库。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-11-26T08:33:07.753

如果你有很多 RAM 并且树不经常改变，你可以缓存调用的结果：

```
def children(self):
    if self._children_cache is not None:
        return self._children_cache
    # Put your code into collectChildren()
    self._children_cache = self.collectChildren()
    return self._children_cache 
```

每当树发生变化时，将缓存设置为无。在这种情况下，使用递归调用可能更有效，因为结果累积得更快。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-26T09:03:35.323

我过去写过迭代树遍历代码：它非常难看，而且速度不快，除非你*确切地*知道每个子树会有多少个孩子，而且有多少层。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-26T09:06:34.240

我对函数调用的 Python 内部了解不多，但我真的无法想象你的代码片段比递归遍历树更快。

调用堆栈（用于函数调用，包括递归调用）通常非常快。转到下一个对象只会花费您一次函数调用。但是在您的代码段中 - 您使用堆栈对象的地方，转到下一个对象将花费您一个 stack.append （可能在堆上分配内存），一个 stack.push （可能从堆中释放内存）和一个产量。

递归调用的主要问题是如果你的树太深，你可能会破坏堆栈。这不太可能发生。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-26T11:08:40.857

这是一对小的更正。

```
def children(self):
    stack = [self.entities]
    for e in stack:
        yield e
        if e.entities:
            stack.extend(e.entities) 
```

我实际上认为使用附加的生成器并没有访问所有节点。我认为您的意思是`extend`包含所有实体的堆栈，而不是堆栈`append`的简单实体列表。

此外，当`for`循环终止时，`while`原始示例中的循环也将终止，因为循环后空堆栈没有变化`for`。

# scripting - 如何在不复制扩展属性信息的情况下运行 robocopy？

> ID：320058
> 
> 赞同：3
> 
> 时间：2008-11-26T08:30:16.107
> 
> 标签：scripting, attributes, filesystems, batch-file, robocopy

问候，

我有一个 bat 脚本，它使用 Robocopy 将某些信息从计算机复制到 USB 硬盘上。硬盘驱动器是 FAT 格式，因此不支持具有扩展属性的目录，导致我出现 robocopy 错误 282 [，如此处所述](http://forums.hexus.net/thecus-care-hexus/121981-n5200pro-error-mounted-file-system-does-not-support-extended-attributes.html)。

我如何告诉 robocopy 复制除可扩展属性之外的所有属性信息？

**我仍然需要帮助，但是，到目前为止，我在谷歌上搜索了一些有用的信息**

*   Robocopy 命令行选项：[http ://www.ss64.com/nt/robocopy.html](http://www.ss64.com/nt/robocopy.html)
*   什么是扩展文件属性：[http ://en.wikipedia.org/wiki/Extended_file_attributes](http://en.wikipedia.org/wiki/Extended_file_attributes)
*   Windows 修补程序（如果我不复制到 USB 硬盘驱动器会很棒）：http: [//support.microsoft.com/kb/329145/en-us](http://support.microsoft.com/kb/329145/en-us)

**编辑：** *哇，文件系统不是FAT，我错了。它的RAW。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:30:10.953

我发现使用 robocopy 复制目录时，我只收到 282 错误。所以我使用 xcopy 和 /T /E 来创建目录结构。然后我可以使用 robocpy 复制所有文件而不会出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-05-31T09:56:32.670

使用 convert 命令将 FAT USB 硬盘驱动器转换为 NTFS（按此方向转换不会删除数据）： [http ://technet.microsoft.com/en-us/library/bb456984.aspx](http://technet.microsoft.com/en-us/library/bb456984.aspx)

例如：

```
convert e: /fs:ntfs 
```

# sharepoint - 内容类型自定义文档信息面板

> ID：320077
> 
> 赞同：0
> 
> 时间：2008-11-26T08:44:23.253
> 
> 标签：sharepoint, infopath

我有一个带有自定义字段的自定义内容类型。我正在尝试使用 infopath 创建自定义文档信息面板。每当我尝试这样做时，信息路径都会给我这个错误

propertySchema0.xsd#/schema/element[1][@name = 'properties']/complexType[1]/sequence[1]/element[1][@name = 'documentManagement']/complexType[1]/all[ 1]/element[1] 引用未声明的命名空间前缀：'ns1'。

有人见过这个吗？内容类型中的字段没有什么异常，除了它们的名称是 unicode 字符，这可能是问题吗？

## 更新：

好的，所以显示名称中的 unicode 字符与错误无关。我使用的列是非常标准的列，主要是文本、整数和布尔类型的列。任何人都知道可能导致这种情况的原因是什么？

* * *

好的，所以显示名称中的 unicode 字符与错误无关。我使用的列是非常标准的列，主要是文本、整数和布尔类型的列。任何人都知道可能导致这种情况的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-12T15:23:30.953

我终于想通了这一点。SourceID 需要在功能清单中的字段类型定义中设置。将 SourceID 设置为与内置字段相同的值就可以了。像这样 SourceID="http://schemas.microsoft.com/Sharpeoint/v3"

# ios - 将“清除”按钮添加到 iPhone UITextField

> ID：320078
> 
> 赞同：188
> 
> 时间：2008-11-26T08:44:36.000
> 
> 标签：ios, cocoa-touch, uitextfield, uikit

如何在 UITextField 右侧添加那个小“X”按钮来清除文本？我在 iPhone OS 2.2 SDK 的 Interface Builder 中找不到用于添加此子控件的属性。

**注意：**在 Xcode 4.x 及更高版本（iPhone 3.0 SDK 及更高版本）中，您可以在 Interface Builder 中执行此操作。

* * *

## 回答 #1

> 赞同：359
> 
> 时间：2008-11-26T08:45:09.913

这个按钮是类提供的内置覆盖`UITextField`，但是从 iOS 2.2 SDK 开始，没有任何方法可以通过 Interface Builder 设置它。您必须以编程方式启用它。

在某处添加这行代码（`viewDidLoad`例如）：

**Objective-C**

```
myUITextField.clearButtonMode = UITextFieldViewModeWhileEditing; 
```

**斯威夫特 5.0**

```
myUITextField.clearButtonMode = .whileEditing 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2014-05-30T02:30:25.937

您也可以直接从 Attributes Inspector 下的 Interface Builder 进行设置。

![在此处输入图像描述](https://i.stack.imgur.com/gcEbm.png)

取自 XCode 5.1

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2015-10-06T20:38:59.180

斯威夫特 4+：

```
textField.clearButtonMode = UITextField.ViewMode.whileEditing 
```

甚至更短：

```
textField.clearButtonMode = .whileEditing 
```

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2013-08-06T10:47:35.267

您可以使用以下方法添加自定义清除按钮并控制大小和所有内容：

```
UIButton *clearButton = [UIButton buttonWithType:UIButtonTypeCustom];
[clearButton setImage:img forState:UIControlStateNormal];
[clearButton setFrame:frame];
[clearButton addTarget:self action:@selector(clearTextField:) forControlEvents:UIControlEventTouchUpInside];

textField.rightViewMode = UITextFieldViewModeAlways; //can be changed to UITextFieldViewModeNever,    UITextFieldViewModeWhileEditing,   UITextFieldViewModeUnlessEditing
[textField setRightView:clearButton]; 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-02-03T10:45:25.617

目标 C：

```
self.txtUserNameTextfield.myUITextField.clearButtonMode = UITextFieldViewModeWhileEditing; 
```

斯威夫特：

```
txtUserNameTextfield.clearButtonMode = UITextField.ViewMode.WhileEditing; 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-06-23T02:51:56.397

这不起作用，像我一样：

> 迅速：

```
customTextField.clearButtonMode = UITextField.ViewMode.Always

customTextField.clearsOnBeginEditing = true;

func textFieldShouldClear(textField: UITextField) -> Bool {
    return true
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-10-22T11:21:03.723

**Swift 4**（改编自 Kristopher Johnson 的回答）

```
textfield.clearButtonMode = .always

textfield.clearButtonMode = .whileEditing

textfield.clearButtonMode = .unlessEditing

textfield.clearButtonMode = .never 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2016-09-21T08:40:29.773

在 Xcode 8 (8A218a) 上：

迅速：

```
textField.clearButtonMode = UITextField.ViewMode.whileEditing; 
```

“W”从大写变为非大写“w”。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-05-28T04:13:41.470

```
 func clear_btn(box_is : UITextField){
    box_is.clearButtonMode = .always
    if let clearButton = box_is.value(forKey: "_clearButton") as? UIButton {
        let templateImage =  clearButton.imageView?.image?.withRenderingMode(.alwaysTemplate)

        clearButton.setImage(templateImage, for: .normal)
        clearButton.setImage(templateImage, for: .highlighted)

        clearButton.tintColor = .white

     }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-29T05:12:36.027

使用下面的代码行。如果 rightView 有没有显示清除按钮。

```
self.txtField.rightView = nil
self.txtField.rightViewMode = .never
self.txtField.clearButtonMode = UITextField.ViewMode.always 
```

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2016-11-05T14:14:28.623

在 Xcode 版本 8.1 (8B62) 上，它可以直接在 Attributes Inspector 中完成。选择 textField，然后从位于 Attributes Inspector 中的 Clear Button 下拉框中选择适当的选项。

# eclipse-plugin - 任何人都知道 Eclipse 的共享待办事项列表插件

> ID：320080
> 
> 赞同：4
> 
> 时间：2008-11-26T08:46:38.070
> 
> 标签：eclipse-plugin

有谁知道 Eclipse 的共享 TODO 列表插件，它允许开发团队中的用户查看和编辑相同的任务列表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-26T08:50:11.167

[Mylyn](http://www.eclipse.org/mylyn/)可用于将问题跟踪系统集成到 IDE 中。

> 它通过使任务成为 Eclipse 的一流部分，并为 Bugzilla、Trac 和 JIRA 等存储库集成丰富的离线编辑来实现这一点。

如果您不是在寻找轻量级的解决方案，那么您可以尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T16:13:02.617

除了已经内置的“任务”之外？它通过在源代码的注释中添加 TODO、XXX 或 FIXME（大写）来工作。我认为这很好用，我们一直在工作中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T16:05:59.993

我刚刚安装了一个名为[fasttrack](http://www.polarion.org/index.php?page=overview&project=fasttrack)的插件，这正是我正在寻找的东西。与 SVN 一起使用效果最好，但您也可以将它与 CVS 一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T09:11:42.123

如果您想在几个开发人员中跟踪 TODO 列表，您确实需要使用问题跟踪系统，例如 Bugzilla、Trac 或 Jira。一旦您开始向其中添加任务，您就会需要诸如按不同字段排序、不同类型的视图等功能。

也就是说，Mylyn 是将它集成到 Eclipse 中的最佳方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-26T08:50:29.403

我不知道这样的特定插件，但也许你可以看看[通信框架](http://www.eclipse.org/ecf/)或[Mylin 功能](http://www.eclipse.org/mylyn/)在协作工作方面为你提供了什么。

# c# - 如何将 WPF DataGrid 绑定到可变数量的列？

> ID：320089
> 
> 赞同：126
> 
> 时间：2008-11-26T08:52:26.407
> 
> 标签：c#, wpf, xaml, data-binding, datagrid

我的 WPF 应用程序生成的数据集每次可能具有不同的列数。输出中包含对将用于应用格式设置的每一列的描述。输出的简化版本可能类似于：

```
class Data
{
    IList<ColumnDescription> ColumnDescriptions { get; set; }
    string[][] Rows { get; set; }
} 
```

此类被设置为 WPF DataGrid 上的 DataContext 但我实际上以编程方式创建了列：

```
for (int i = 0; i < data.ColumnDescriptions.Count; i++)
{
    dataGrid.Columns.Add(new DataGridTextColumn
    {
        Header = data.ColumnDescriptions[i].Name,
        Binding = new Binding(string.Format("[{0}]", i))
    });
} 
```

有没有办法用 XAML 文件中的数据绑定替换此代码？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2010-12-07T18:01:44.477

这是在 DataGrid 中绑定列的解决方法。由于 Columns 属性是只读的，就像每个人都注意到的那样，我创建了一个名为 BindableColumns 的附加属性，每次通过 CollectionChanged 事件更改集合时，它都会更新 DataGrid 中的列。

如果我们有这个 DataGridColumn 的集合

```
public ObservableCollection<DataGridColumn> ColumnCollection
{
    get;
    private set;
} 
```

然后我们可以像这样将 BindableColumns 绑定到 ColumnCollection

```
<DataGrid Name="dataGrid"
          local:DataGridColumnsBehavior.BindableColumns="{Binding ColumnCollection}"
          AutoGenerateColumns="False"
          ...> 
```

附加属性 BindableColumns

```
public class DataGridColumnsBehavior
{
    public static readonly DependencyProperty BindableColumnsProperty =
        DependencyProperty.RegisterAttached("BindableColumns",
                                            typeof(ObservableCollection<DataGridColumn>),
                                            typeof(DataGridColumnsBehavior),
                                            new UIPropertyMetadata(null, BindableColumnsPropertyChanged));
    private static void BindableColumnsPropertyChanged(DependencyObject source, DependencyPropertyChangedEventArgs e)
    {
        DataGrid dataGrid = source as DataGrid;
        ObservableCollection<DataGridColumn> columns = e.NewValue as ObservableCollection<DataGridColumn>;
        dataGrid.Columns.Clear();
        if (columns == null)
        {
            return;
        }
        foreach (DataGridColumn column in columns)
        {
            dataGrid.Columns.Add(column);
        }
        columns.CollectionChanged += (sender, e2) =>
        {
            NotifyCollectionChangedEventArgs ne = e2 as NotifyCollectionChangedEventArgs;
            if (ne.Action == NotifyCollectionChangedAction.Reset)
            {
                dataGrid.Columns.Clear();
                foreach (DataGridColumn column in ne.NewItems)
                {
                    dataGrid.Columns.Add(column);
                }
            }
            else if (ne.Action == NotifyCollectionChangedAction.Add)
            {
                foreach (DataGridColumn column in ne.NewItems)
                {
                    dataGrid.Columns.Add(column);
                }
            }
            else if (ne.Action == NotifyCollectionChangedAction.Move)
            {
                dataGrid.Columns.Move(ne.OldStartingIndex, ne.NewStartingIndex);
            }
            else if (ne.Action == NotifyCollectionChangedAction.Remove)
            {
                foreach (DataGridColumn column in ne.OldItems)
                {
                    dataGrid.Columns.Remove(column);
                }
            }
            else if (ne.Action == NotifyCollectionChangedAction.Replace)
            {
                dataGrid.Columns[ne.NewStartingIndex] = ne.NewItems[0] as DataGridColumn;
            }
        };
    }
    public static void SetBindableColumns(DependencyObject element, ObservableCollection<DataGridColumn> value)
    {
        element.SetValue(BindableColumnsProperty, value);
    }
    public static ObservableCollection<DataGridColumn> GetBindableColumns(DependencyObject element)
    {
        return (ObservableCollection<DataGridColumn>)element.GetValue(BindableColumnsProperty);
    }
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-12-05T10:35:59.987

我继续我的研究，并没有找到任何合理的方法来做到这一点。DataGrid 上的 Columns 属性不是我可以绑定的，实际上它是只读的。

Bryan 建议可以用 AutoGenerateColumns 做一些事情，所以我看了一下。它使用简单的 .Net 反射来查看 ItemsSource 中对象的属性，并为每个对象生成一列。也许我可以动态生成一个类型，每个列都有一个属性，但这已经偏离了轨道。

由于这个问题很容易在代码中解决，我将坚持使用一个简单的扩展方法，只要数据上下文更新为新列：

```
public static void GenerateColumns(this DataGrid dataGrid, IEnumerable<ColumnSchema> columns)
{
    dataGrid.Columns.Clear();

    int index = 0;
    foreach (var column in columns)
    {
        dataGrid.Columns.Add(new DataGridTextColumn
        {
            Header = column.Name,
            Binding = new Binding(string.Format("[{0}]", index++))
        });
    }
}

// E.g. myGrid.GenerateColumns(schema); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2011-01-29T11:23:50.620

我发现了 Deborah Kurata 的一篇博客文章，其中有一个很好的技巧，如何在 DataGrid 中显示可变数量的列：

[使用 MVVM 在 Silverlight 应用程序中使用动态列填充 DataGrid](http://blogs.msmvps.com/deborahk/populating-a-datagrid-with-dynamic-columns-in-a-silverlight-application-using-mvvm/)

基本上，她创建了一个`DataGridTemplateColumn`并放入`ItemsControl`其中显示多个列。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-01-17T06:12:25.863

我设法使仅使用这样的一行代码就可以动态添加列：

```
MyItemsCollection.AddPropertyDescriptor(
    new DynamicPropertyDescriptor<User, int>("Age", x => x.Age)); 
```

关于这个问题，这不是一个基于 XAML 的解决方案（因为如上所述没有合理的方法来做到这一点），它也不是一个可以直接使用 DataGrid.Columns 操作的解决方案。它实际上与 DataGrid 绑定的 ItemsSource 一起操作，它实现了 ITypedList 并因此为 PropertyDescriptor 检索提供了自定义方法。在代码中的一处，您可以为网格定义“数据行”和“数据列”。

如果你有：

```
IList<string> ColumnNames { get; set; }
//dict.key is column name, dict.value is value
Dictionary<string, string> Rows { get; set; } 
```

你可以使用例如：

```
var descriptors= new List<PropertyDescriptor>();
//retrieve column name from preprepared list or retrieve from one of the items in dictionary
foreach(var columnName in ColumnNames)
    descriptors.Add(new DynamicPropertyDescriptor<Dictionary, string>(ColumnName, x => x[columnName]))
MyItemsCollection = new DynamicDataGridSource(Rows, descriptors) 
```

并且使用绑定到 MyItemsCollection 的网格将填充相应的列。这些列可以在运行时动态修改（新添加或现有删除），网格将自动刷新它的列集合。

上面提到的 DynamicPropertyDescriptor 只是对常规 PropertyDescriptor 的升级，并提供了带有一些附加选项的强类型列定义。否则，DynamicDataGridSource 将与基本 PropertyDescriptor 一起正常工作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-09T13:43:09.360

制作了一个处理取消订阅的已接受答案的版本。

```
public class DataGridColumnsBehavior
{
    public static readonly DependencyProperty BindableColumnsProperty =
        DependencyProperty.RegisterAttached("BindableColumns",
                                            typeof(ObservableCollection<DataGridColumn>),
                                            typeof(DataGridColumnsBehavior),
                                            new UIPropertyMetadata(null, BindableColumnsPropertyChanged));

    /// <summary>Collection to store collection change handlers - to be able to unsubscribe later.</summary>
    private static readonly Dictionary<DataGrid, NotifyCollectionChangedEventHandler> _handlers;

    static DataGridColumnsBehavior()
    {
        _handlers = new Dictionary<DataGrid, NotifyCollectionChangedEventHandler>();
    }

    private static void BindableColumnsPropertyChanged(DependencyObject source, DependencyPropertyChangedEventArgs e)
    {
        DataGrid dataGrid = source as DataGrid;

        ObservableCollection<DataGridColumn> oldColumns = e.OldValue as ObservableCollection<DataGridColumn>;
        if (oldColumns != null)
        {
            // Remove all columns.
            dataGrid.Columns.Clear();

            // Unsubscribe from old collection.
            NotifyCollectionChangedEventHandler h;
            if (_handlers.TryGetValue(dataGrid, out h))
            {
                oldColumns.CollectionChanged -= h;
                _handlers.Remove(dataGrid);
            }
        }

        ObservableCollection<DataGridColumn> newColumns = e.NewValue as ObservableCollection<DataGridColumn>;
        dataGrid.Columns.Clear();
        if (newColumns != null)
        {
            // Add columns from this source.
            foreach (DataGridColumn column in newColumns)
                dataGrid.Columns.Add(column);

            // Subscribe to future changes.
            NotifyCollectionChangedEventHandler h = (_, ne) => OnCollectionChanged(ne, dataGrid);
            _handlers[dataGrid] = h;
            newColumns.CollectionChanged += h;
        }
    }

    static void OnCollectionChanged(NotifyCollectionChangedEventArgs ne, DataGrid dataGrid)
    {
        switch (ne.Action)
        {
            case NotifyCollectionChangedAction.Reset:
                dataGrid.Columns.Clear();
                foreach (DataGridColumn column in ne.NewItems)
                    dataGrid.Columns.Add(column);
                break;
            case NotifyCollectionChangedAction.Add:
                foreach (DataGridColumn column in ne.NewItems)
                    dataGrid.Columns.Add(column);
                break;
            case NotifyCollectionChangedAction.Move:
                dataGrid.Columns.Move(ne.OldStartingIndex, ne.NewStartingIndex);
                break;
            case NotifyCollectionChangedAction.Remove:
                foreach (DataGridColumn column in ne.OldItems)
                    dataGrid.Columns.Remove(column);
                break;
            case NotifyCollectionChangedAction.Replace:
                dataGrid.Columns[ne.NewStartingIndex] = ne.NewItems[0] as DataGridColumn;
                break;
        }
    }

    public static void SetBindableColumns(DependencyObject element, ObservableCollection<DataGridColumn> value)
    {
        element.SetValue(BindableColumnsProperty, value);
    }

    public static ObservableCollection<DataGridColumn> GetBindableColumns(DependencyObject element)
    {
        return (ObservableCollection<DataGridColumn>)element.GetValue(BindableColumnsProperty);
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-09-11T14:43:54.280

您可以使用网格定义创建用户控件，并在 xaml 中使用不同的列定义定义“子”控件。父级需要列的依赖属性和加载列的方法：

家长：

* * *

```
public ObservableCollection<DataGridColumn> gridColumns
{
  get
  {
    return (ObservableCollection<DataGridColumn>)GetValue(ColumnsProperty);
  }
  set
  {
    SetValue(ColumnsProperty, value);
  }
}
public static readonly DependencyProperty ColumnsProperty =
  DependencyProperty.Register("gridColumns",
  typeof(ObservableCollection<DataGridColumn>),
  typeof(parentControl),
  new PropertyMetadata(new ObservableCollection<DataGridColumn>()));

public void LoadGrid()
{
  if (gridColumns.Count > 0)
    myGrid.Columns.Clear();

  foreach (DataGridColumn c in gridColumns)
  {
    myGrid.Columns.Add(c);
  }
} 
```

儿童 Xaml：

* * *

```
<local:parentControl x:Name="deGrid">           
  <local:parentControl.gridColumns>
    <toolkit:DataGridTextColumn Width="Auto" Header="1" Binding="{Binding Path=.}" />
    <toolkit:DataGridTextColumn Width="Auto" Header="2" Binding="{Binding Path=.}" />
  </local:parentControl.gridColumns>  
</local:parentControl> 
```

* * *

最后，棘手的部分是找到调用“LoadGrid”的位置。
我正在为此苦苦挣扎，但通过`InitalizeComponent`在我的窗口构造函数中调用 after 让事情得以解决（childGrid 是 window.xaml 中的 x:name）：

```
childGrid.deGrid.LoadGrid(); 
```

[相关博客条目](http://jvdveen.blogspot.com/2009/05/dependency-properties-and-collections.html?showComment=1252594381091#c7610999953020859416)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-26T15:37:35.697

您可能可以使用 AutoGenerateColumns 和 DataTemplate 来做到这一点。我不肯定它是否可以在没有大量工作的情况下工作，您将不得不玩弄它。老实说，如果您已经有了可行的解决方案，除非有很大的原因，否则我不会立即进行更改。DataGrid 控件变得非常好，但它仍然需要一些工作（我还有很多学习要做）才能轻松完成这样的动态任务。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-21T10:24:03.420

有一个我以编程方式执行的示例：

```
public partial class UserControlWithComboBoxColumnDataGrid : UserControl
{
    private Dictionary<int, string> _Dictionary;
    private ObservableCollection<MyItem> _MyItems;
    public UserControlWithComboBoxColumnDataGrid() {
      _Dictionary = new Dictionary<int, string>();
      _Dictionary.Add(1,"A");
      _Dictionary.Add(2,"B");
      _MyItems = new ObservableCollection<MyItem>();
      dataGridMyItems.AutoGeneratingColumn += DataGridMyItems_AutoGeneratingColumn;
      dataGridMyItems.ItemsSource = _MyItems;

    }
private void DataGridMyItems_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
        {
            var desc = e.PropertyDescriptor as PropertyDescriptor;
            var att = desc.Attributes[typeof(ColumnNameAttribute)] as ColumnNameAttribute;
            if (att != null)
            {
                if (att.Name == "My Combobox Item") {
                    var comboBoxColumn =  new DataGridComboBoxColumn {
                        DisplayMemberPath = "Value",
                        SelectedValuePath = "Key",
                        ItemsSource = _ApprovalTypes,
                        SelectedValueBinding =  new Binding( "Bazinga"),   
                    };
                    e.Column = comboBoxColumn;
                }

            }
        }

}
public class MyItem {
    public string Name{get;set;}
    [ColumnName("My Combobox Item")]
    public int Bazinga {get;set;}
}

  public class ColumnNameAttribute : Attribute
    {
        public string Name { get; set; }
        public ColumnNameAttribute(string name) { Name = name; }
} 
```

# junit - 需要一个在 Intellij Idea 中使用 Junit 的示例

> ID：320092
> 
> 赞同：7
> 
> 时间：2008-11-26T08:57:27.423
> 
> 标签：junit, intellij-idea

也许只有我一个人，但我无法理解 Intellij Idea 中有关 Junit 测试集成的文档。我正在寻找的是一个简单的教程示例，例如：这是一个计算 2+2 的方法，这是一个测试类，测试它为 4。这是您设置的复选框。如果网络上或 Intellij Idea 帮助中已经有这样的东西，请参考我。我使用 Idea 7.0.4，并希望使用 JUnit 3.8 或 4.*。TIA。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-26T19:57:53.737

这是我如何将 intellij 与 junit 一起使用的小示例

```
public class MathTest {  // Press Ctrl-Shift-F10 here to run all tests in class
    @Test
    public void twoPlusTwo() { // Press Ctrl-Shift-F10 here to run only twoPlusTwo test
        assertThat( 2+2, is( 4 ) );
    }

    @Test
    public void twoPlusThree() { // Press Ctrl-Shift-F10 here to run only twoPlusThree test
        assertThat( 2+3, is( 5 ) );
    }
} 
```

运行一次测试后，它将作为运行“配置”显示在屏幕顶部。然后您可以点击绿色三角形重新运行测试，或者使用调试三角形在启用断点的调试模式下运行。

# django - Django：如何防止同时修改数据库条目

> ID：320096
> 
> 赞同：84
> 
> 时间：2008-11-26T09:00:35.080
> 
> 标签：django, django-models, concurrency, transactions, atomic

是否有办法防止两个或多个用户同时修改同一数据库条目？

向执行第二次提交/保存操作的用户显示错误消息是可以接受的，但数据不应被静默覆盖。

我认为锁定条目不是一种选择，因为用户可能会使用“返回”按钮或简单地关闭他的浏览器，从而永远保持锁定状态。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2010-01-30T00:41:46.300

这就是我在 Django 中进行乐观锁定的方式：

```
updated = Entry.objects.filter(Q(id=e.id) && Q(version=e.version))\
          .update(updated_field=new_value, version=e.version+1)
if not updated:
    raise ConcurrentModificationException() 
```

上面列出的代码可以作为[自定义管理器](https://docs.djangoproject.com/en/1.7/topics/db/managers/#id2)中的方法来实现。

我做出以下假设：

*   filter().update() 将导致单个数据库查询，因为过滤器是惰性的
*   数据库查询是原子的

这些假设足以确保之前没有其他人更新过该条目。如果以这种方式更新多行，您应该使用事务。

**警告** [Django 文档](https://docs.djangoproject.com/en/1.7/topics/db/queries/#updating-multiple-objects-at-once)：

> 请注意，update() 方法直接转换为 SQL 语句。这是直接更新的批量操作。它不会在您的模型上运行任何 save() 方法，也不会发出 pre_save 或 post_save 信号

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-06-21T07:31:40.883

这个问题有点老了，我的回答有点晚了，但据我所知，这已**在 Django 1.4**中使用：

```
select_for_update(nowait=True) 
```

查看[文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-for-update)

> 返回一个查询集，它将锁定行直到事务结束，在支持的数据库上生成一个 SELECT ... FOR UPDATE SQL 语句。
> 
> 通常，如果另一个事务已经在其中一个选定的行上获得了锁，则查询将阻塞，直到锁被释放。如果这不是您想要的行为，请调用 select_for_update(nowait=True)。这将使呼叫非阻塞。如果另一个事务已经获取了冲突锁，则在评估查询集时将引发 DatabaseError。

当然，这仅在后端支持“选择更新”功能时才有效，例如 sqlite 不支持。不幸的是：`nowait=True`MySql 不支持，你必须使用：`nowait=False`，它只会阻塞直到锁被释放。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2008-11-26T10:16:51.680

实际上，事务在这里对你没有多大帮助......除非你想让事务在多个 HTTP 请求上运行（你很可能不想要）。

我们通常在这些情况下使用的是“乐观锁定”。据我所知，Django ORM 不支持这一点。但是已经有一些关于添加此功能的讨论。

所以你是靠你自己的。基本上，您应该做的是在模型中添加一个“版本”字段并将其作为隐藏字段传递给用户。更新的正常周期是：

1.  读取数据并将其显示给用户
2.  用户修改数据
3.  用户发布数据
4.  该应用程序将其保存回数据库中。

为了实现乐观锁，当你保存数据时，你检查你从用户那里得到的版本是否与数据库中的版本相同，然后更新数据库并增加版本。如果不是，则意味着自加载数据以来发生了变化。

您可以通过单个 SQL 调用来做到这一点，例如：

```
UPDATE ... WHERE version = 'version_from_user'; 
```

仅当版本仍然相同时，此调用才会更新数据库。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-05-18T10:20:53.703

Django 1.11 有[三个方便的选项](https://docs.djangoproject.com/en/1.11/ref/models/querysets/#select-for-update)来处理这种情况，具体取决于您的业务逻辑要求：

*   `Something.objects.select_for_update()`将阻塞直到模型空闲
*   `Something.objects.select_for_update(nowait=True)`并捕获`DatabaseError`模型当前是否被锁定以进行更新
*   `Something.objects.select_for_update(skip_locked=True)`不会返回当前锁定的对象

在我的应用程序中，它在各种模型上都有交互式和批处理工作流，我发现这三个选项可以解决我的大多数并发处理场景。

“等待”`select_for_update`在顺序批处理过程中非常方便 - 我希望它们全部执行，但让它们慢慢来。当`nowait`用户想要修改当前锁定更新的对象时使用 - 我只会告诉他们此时正在修改它。

这`skip_locked`对于另一种类型的更新很有用，当用户可以触发对象的重新扫描时——我不在乎是谁触发了它，只要它被触发了，所以`skip_locked`我可以默默地跳过重复的触发器。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2010-06-02T15:33:31.850

为了将来参考，请查看[https://github.com/RobCombs/django-locking](https://github.com/RobCombs/django-locking)。它确实以一种不会留下永久锁定的方式锁定，通过在用户离开页面时解锁 javascript 和锁定超时（例如，以防用户的浏览器崩溃）的混合。文档非常完整。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-09-18T10:42:44.197

您可能至少应该使用 django 事务中间件，即使不考虑这个问题。

至于让多个用户编辑相同数据的实际问题......是的，使用锁定。或者：

检查用户正在更新的版本（安全地执行此操作，因此用户不能简单地破解系统说他们正在更新最新的副本！），并且只有在该版本是最新的情况下才更新。否则，将用户返回一个新页面，其中包含他们正在编辑的原始版本、他们提交的版本以及其他人编写的新版本。要求他们将更改合并为一个完全最新的版本。您可能会尝试使用 diff+patch 之类的工具集自动合并它们，但无论如何您都需要手动合并方法来处理失败情况，所以从它开始。此外，您需要保留版本历史记录，并允许管理员恢复更改，以防有人无意或故意弄乱了合并。但无论如何，你可能应该拥有它。

很可能有一个 django 应用程序/库可以为您完成大部分工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-26T10:20:12.390

要寻找的另一件事是“原子”一词。原子操作意味着您的数据库更改要么成功发生，要么明显失败。快速搜索显示[此问题](https://stackoverflow.com/questions/280075/atomic-operations-in-django)询问 Django 中的原子操作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-07-31T22:40:21.440

上面的想法

```
updated = Entry.objects.filter(Q(id=e.id) && Q(version=e.version))\
      .update(updated_field=new_value, version=e.version+1)
if not updated:
      raise ConcurrentModificationException() 
```

看起来很棒，即使没有可序列化的事务也应该可以正常工作。

问题是如何增强默认的 .save() 行为，以便不必手动进行管道调用来调用 .update() 方法。

我查看了自定义管理器的想法。

我的计划是覆盖由 Model.save_base() 调用的 Manager _update 方法来执行更新。

这是 Django 1.3 中的当前代码

```
def _update(self, values, **kwargs):
   return self.get_query_set()._update(values, **kwargs) 
```

恕我直言，需要做的是：

```
def _update(self, values, **kwargs):
   #TODO Get version field value
   v = self.get_version_field_value(values[0])
   return self.get_query_set().filter(Q(version=v))._update(values, **kwargs) 
```

删除时需要发生类似的事情。但是删除有点困难，因为 Django 通过 django.db.models.deletion.Collector 在这个领域实现了相当多的巫术。

奇怪的是，像 Django 这样的 modren 工具缺乏对 Optimictic Concurency Control 的指导。

当我解决这个谜语时，我会更新这篇文章。希望解决方案采用一种不错的 Python 方式，不涉及大量编码、奇怪的视图、跳过 Django 的基本部分等。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2008-11-26T09:23:16.373

为了安全起见，数据库需要支持[事务](http://en.wikipedia.org/wiki/Database_transaction)。

如果字段是“自由格式”，例如文本等，并且您需要允许多个用户能够编辑相同的字段（您不能拥有数据的单个用户所有权），您可以将原始数据存储在多变的。用户提交时，检查输入数据是否与原始数据有变化（如果没有，则无需通过重写旧数据来打扰数据库），原始数据与数据库中的当前数据相比是否相同您可以保存，如果已更改，您可以向用户显示差异并询问用户该怎么做。

如果字段是数字，例如帐户余额，商店中的商品数量等，如果您计算原始值（在用户开始填写表单时存储）和新值之间的差异，您可以更自动地处理它，您可以开始事务读取当前值并添加差异，然后结束事务。如果你不能有负值，你应该在结果为负时中止事务，并告诉用户。

我不知道 django，所以我不能给你 cod3s .. ;)

* * *

## 回答 #10

> 赞同：-6
> 
> 时间：2009-12-09T15:52:14.677

从这里开始：
[如何防止覆盖其他人已修改的对象](https://stackoverflow.com/questions/467134/how-to-prevent-overwriting-an-object-someone-else-has-modified)

我假设时间戳将作为隐藏字段保存在您尝试保存其详细信息的表单中。

```
def save(self):
    if(self.id):
        foo = Foo.objects.get(pk=self.id)
        if(foo.timestamp > self.timestamp):
            raise Exception, "trying to save outdated Foo" 
    super(Foo, self).save() 
```

# web-services - 是否有任何网络服务可以获取世界各地城市的天气数据[在一段时间内，比如一年]？

> ID：320098
> 
> 赞同：-1
> 
> 时间：2008-11-26T09:01:22.893
> 
> 标签：web-services, data-mining, weather

有任何网络服务可以获取一段时间内城市的每月最低/最高温度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T09:58:30.000

另请参阅[https://stackoverflow.com/questions/202092/where-can-i-find-free-and-open-data](https://stackoverflow.com/questions/202092/where-can-i-find-free-and-open-data) - 它不是特定于*这个*问题，但可能会有所帮助:)

# facebook - Facebook REST API 是否允许您获取朋友的电话号码？

> ID：320103
> 
> 赞同：0
> 
> 时间：2008-11-26T09:02:17.570
> 
> 标签：facebook

使用 Facebook API，有没有办法获取朋友的电话/手机号码？我确定我不久前看到了一个可以将 Facebook 与您的 Mac 地址簿同步的应用程序，但我在 API 文档中没有找到任何可以让您获取朋友号码的内容。这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T09:39:58.773

根据 FQL 文档，没有。[用户表](http://wiki.developers.facebook.com/index.php/User_%28FQL%29 "用户表")和[标准用户信息表](http://wiki.developers.facebook.com/index.php/Standard_user_info_%28FQL%29 "标准用户信息")将是该信息的存储位置，但没有列出电话号码列。此外，[Users.getInfo()](http://wiki.developers.facebook.com/index.php/Users.getInfo "用户.getInfo")和[Users.getStandardInfo()](http://wiki.developers.facebook.com/index.php/Users.getStandardInfo "用户.getStandardInfo")显然也不包含电话号码信息。

也许您看到的应用程序严格管理电子邮件和实际邮寄地址？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-01-20T06:59:46.370

是的，上面的答案是正确的，我已经正确搜索使用 PHP SDK 3.1.1 的 Graph API 查找好友电话号码，但由于 facebook 不提供好友的任何电话号码和电子邮件但其他信息可以通过代码轻松获取而失败。

# rdf - 多语言 OpenCalais 之类的系统？

> ID：320117
> 
> 赞同：2
> 
> 时间：2008-11-26T09:13:02.853
> 
> 标签：rdf, semantic-web, multilingual, semantic-analysis, opencalais

OpenCalais 系统给我留下了深刻的印象。它是（是/拥有）一个网络服务，您可以在其中发送文本，他们对其进行分析，然后为您提供文档所属的一系列分类（启用 RDF）标签。

但是 - 目前 - 英语是唯一支持的语言。

您知道处理多语言文档的类似系统吗？（我对意大利语很感兴趣，但多语言当然是加分项）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:50:12.800

[Apache Stanbol](http://stanbol.apache.org/)可以分析许多不同语言的文本。到目前为止，支持以下语言（精度和召回值可能因语言而异）：

*   英语，
*   English (中文),
*   西班牙语（西班牙语），
*   Русский (俄语),
*   Português（葡萄牙语），
*   德语（德语），
*   **Italiano (意大利语)** ,
*   荷兰语（荷兰语），
*   斯文斯卡语（瑞典语），
*   丹斯克（丹麦），
*   العربية (阿拉伯语),
*   עברית（希伯来语），
*   日本语（日语）。

分析将返回发现的实体。分析输出格式可以是：

*   JSON-LD，
*   RDF/XML,
*   RDF/JSON,
*   海龟，
*   N-三元组。

可以根据系统配置进一步定制文本的实体或标记。理想情况下，任何自定义词汇都可以插入系统。

有几个演示端点：

*   [http://dev.iks-project.eu:8080/enhancer](http://dev.iks-project.eu:8080/enhancer)
*   [http://dev.iks-project.eu:8081/enhancer](http://dev.iks-project.eu:8081/enhancer)

不确定上述端点是否支持所有上述语言。

[RedLink GmbH](http://www.linkedin.com/company/redlink-gmbh)将提供基于 Apache Stanbol 和相关软件的云服务。

WordPress的[WordLift 插件](http://wordpress.org/extend/plugins/wordlift/)已经在 WordPress 中为**所有上述语言**提供了文本分析（目前处于测试阶段）。您可以尝试在 WordPress 中安装插件并在帖子正文中提交文本内容。

您还可以订阅并写入[Apache Stanbol 邮件列表](http://stanbol.apache.org/development/index.html#mailing_lists)以获取特定请求或信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-27T12:46:00.067

OpenCalais 支持实体的法语和西班牙语元数据标记。这组实体将在未来的版本中扩展。[请参阅我们在http://www.opencalais.com/documentation/calais-web-service-api](http://www.opencalais.com/documentation/calais-web-service-api)上的在线文档

# visual-studio-2008 - Visual Studio 热键在代码隐藏和源文件之间切换？

> ID：320119
> 
> 赞同：88
> 
> 时间：2008-11-26T09:13:48.967
> 
> 标签：visual-studio-2008

我经常使用`Shift`+`F7`在源视图和设计视图之间切换。

有谁知道在**源文件**及其**代码隐藏文件**之间切换的热键，例如在（Default.aspx 和 Default.aspx.cs）之间切换？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2008-11-26T09:19:33.387

`F7`

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2013-09-30T14:37:56.450

在*VS2010*中，以下工作：

1.  前往：*工具* `>` *选项* `>` *键盘*

2.  在“*显示包含的命令*”中搜索“ **View.ToggleDesigner** ”。

**   添加新的快捷方式到“**全局**”，使用`F7`.* 

 ** * *

## 回答 #3

> 赞同：44
> 
> 时间：2008-11-26T09:34:09.770

是的，只是`F7`

看看[这张](http://www.microsoft.com/downloads/details.aspx?familyid=e5f902a8-5bb5-4cc6-907e-472809749973&displaylang=en&tm)C# VS2008 快捷方式的海报

您还可以将其绑定到您喜欢的任何键组合，转到工具、选项（显示所有设置）环境、键盘、显示 View.ViewCode 的命令并更改为您喜欢的。

**由[Rob Cooper](https://stackoverflow.com/users/832/rob-cooper)添加：**

对于 2005 用户：[Visual C# 2005 键盘快捷键参考海报](http://www.microsoft.com/downloads/details.aspx?FamilyID=c15d210d-a926-46a8-a586-31f8a2e576fe&DisplayLang=en)

对于 2010 用户：[Visual C# 2010 键盘快捷键参考海报](http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=92ced922-d505-457a-8c9c-84036160639f)

**编辑 2014 年 9 月 8 日**

似乎没有 2010 年以后的海报，但有一个 VS2012、VS2013 和 VS14 的网站：[Visual Studio Shortcuts](http://visualstudioshortcuts.com/2013/)

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2013-12-03T04:38:20.117

对于那些试图在 VS2012 中执行此操作（*从*代码视图切换*到*标记视图）的人，我必须去`Tools > Options > Keyboard`，然后选择

*   键盘映射方案为“（默认）”
*   View.ToggleDesigner 作为命令
*   在“文本编辑器”中使用新的快捷方式
*   设置快捷键为`F7`

这导致`F7`两种方式从标记视图切换到代码视图，反之亦然。

在这样做之前，我必须使用`Shift`+`F7`两次才能从代码视图中获取标记。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-10-21T15:47:28.493

在 VS 2013 中是

1.  工具 > 选项 > 环境 > 键盘

2.  在`Show Commands Containing:`

3.  确保`Use new shortcut in:`设置为`Global`

4.  将光标放在`Press shortcut keys:`框中

5.  `F7`然后点击`Assign`按钮

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-02-26T22:20:21.103

如果`F7`对您不起作用，请转到“工具 - 导入和导出设置 - 重置所有设置”并选择“Web开发”模板进行重置。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-11-26T09:17:31.597

只需放下`shift`钥匙，就可以了`F7`。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-04-23T10:17:22.937

在代码视图中使用`shift`-`F7`到达设计器。在设计器中用于`F7`返回代码。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-11-26T14:27:31.393

尝试`Ctrl`+`PageUp`在设计视图和后面的代码之间切换。

# c++ - 在 Linux 中调试应用程序

> ID：320124
> 
> 赞同：1
> 
> 时间：2008-11-26T09:16:31.880
> 
> 标签：c++, linux, debugging, gdb

我想在 Linux 中调试应用程序。该应用程序是用 C++ 创建的。GUI 是使用 QT 创建的。GUI 与可被视为应用程序后端的静态库链接。

我想调试静态库，但不知道该怎么做。

我尝试使用 gdb

```
gdb GUI 
```

但是我怎样才能附加图书馆呢？

有没有人有在 linux 中调试库的经验？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-26T09:23:49.277

gdb 将在调用库中的函数时自动调试它们。就这样称呼它

```
gdb ./foo
run 
```

:) 。确保您使用调试标志构建 foo （`-g3`将为 gcc 启用所有调试内容 :)。调试时不应该优化（最多传递`-O1`给 gcc，不要进一步优化）。它可能会混淆调试器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-26T10:35:19.897

如果要调试库代码本身，则需要使用`-g`编译器标志构建库（以及使用 litb 指出的构建可执行`-g`文件[）](https://stackoverflow.com/questions/320124/debugging-application-in-linux#320136)。否则 gdb 将很好地单步执行您的代码，但每次您进行库调用时都会举手。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-26T10:18:53.267

你可以试试[KDbg](http://www.kdbg.org) , [DDD](http://www.gnu.org/software/ddd/) - 数据显示调试器, [Code::Blocks](http://www.codeblocks.org/)

与 DDD 不同，其他是集成了调试器的 IDE，但核心调试器 [gdb] 在这些 IDE 中保持不变。唯一的事情是您将在 GUI 中获得调试器视图的组织化视图。

也可以试试 Eclipse+CDT 插件。这也很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-26T11:28:40.537

一个鲜为人知的替代方案是[gdbtui](http://sourceware.org/gdb/current/onlinedocs/gdb_24.html#SEC252)，它使用基于 curses 的接口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-26T12:32:11.970

您也可以使用 Kdbg 或 ddd

# windows - 释放 Windows 文件共享锁

> ID：320128
> 
> 赞同：40
> 
> 时间：2008-11-26T09:18:13.843
> 
> 标签：windows, file, locking, share

这个问题在工作中时不时出现。我们的构建机器可以通过普通的 Windows 文件共享访问它的文件。如果有人在机器上远程浏览一个文件夹，并让窗口在一夜之间打开，那么构建就会失败（就像现在所做的那样）。资源管理器窗口在源树中的一个子文件夹中留下了打开的点。构建会删除源代码，并在构建之前进行干净的签出。删除失败。

现在，我想让构建工作。我是从家里登录的，我宁愿不重新启动构建机器。我无法找到机器正在查找的人员和文件，也无法远程重新启动他们的机器。

当windows共享有锁时，锁定过程是系统，所以我不认为我可以像普通锁一样杀死它。

有谁知道无需重新启动机器即可释放共享文件夹锁定的方法？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-04-18T06:35:26.747

如果您是通过网络共享文件的服务器的管理员，则可以使用 Windows 内置功能：

1.  开始 → 我的电脑 → 右键单击​​ → 管理将您带到计算机管理控制台
2.  在左侧导航中，导航到系统工具 → 共享文件夹
3.  您可以在此处查看共享、会话和打开的文件。这使您可以找出谁从哪些工作站打开了哪些文件。
4.  右键单击列表中的某个项目可以解除文件锁定。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2008-11-26T09:39:53.237

找到了解决方案。

1.  [使用Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx "来自 SysInternals 的流程资源管理器")查找进程：

    1.  下载并解压[procexp.exe](http://download.sysinternals.com/Files/ProcessExplorer.zip)
    2.  在 Process Explorer 中，使用“查找”菜单中的“查找句柄或 DLL...”命令
    3.  输入删除有问题的目录名称
    4.  应显示与该名称匹配的打开文件列表。进行一些猜测并找出哪个没有被删除。如果文件被 Windows 共享锁定，则持有该文件的进程将是 System
    5.  记下打开的目录
2.  下载并安装解锁器（**警告**：链接已删除，因为它包含恶意软件）

    1.  安装解锁器，禁用资源管理器扩展和其他垃圾的选项
3.  解锁目录

    1.  打开一个 cmd 窗口，然后导航到 C:\Program Files\Unlocker
    2.  在 cmd 窗口中，运行 Unlocker.exe “the-path-to-the-locked-folder”
    3.  将弹出一个对话框，确认锁定释放。使用解锁按钮解锁文件

现在该目录应该已解锁，现在可以删除了。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-22T22:18:33.577

尝试进程黑客： [https ://wj32.org/processhacker/](https://wj32.org/processhacker/)

进程黑客就像打了兴奋剂的进程资源管理器。

要*查找*有问题的进程，请按 CTRL+F 或单击“查找 DLL 句柄”按钮并搜索文件名。

在查找句柄对话框中找到文件后，只需右键单击该文件并选择“关闭”即可。（至少对于 v2.39.124）

旧版本在进程的上下文菜单中有一个“终结者”选项。右键单击有问题的进程 --> `Miscellaneous`--> `Terminator`-->*选择终止技术*。请注意，有些可能是危险的，并且可能会产生意想不到的后果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-03T16:50:37.937

我遇到过类似的问题，而且我在上面看到的这些建议都不适合自动化的夜间构建（正如原始海报所暗示的那样），因为它们都需要手动来寻找并杀死锁。

我尝试过的唯一似乎可靠的方法是删除共享本身，进行构建，然后重新添加共享。这是自动删除共享的一种方法：

D:\Projects>net share Projects /DELETE /Y

用户在项目上有打开的文件。继续操作将强制关闭文件。

项目已成功删除。

（注意：如果您需要为其授予的权限组很混乱，那么再次自动创建共享可能会很痛苦。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-14T08:50:27.950

我这样做的方法是同时使用[OpenFiles.exe](https://ss64.com/nt/openfiles.html)和[Handle.exe](https://docs.microsoft.com/en-us/sysinternals/downloads/handle) 您可以按任何顺序运行它们，您的资源将完全解锁。

OpenFiles：断开文件共享会话

Handle.exe：释放任何打开的句柄（不要试图关闭属于pid4的句柄，因为那是系统进程）

您可以使用 powershell、批处理或您选择的任何语言自动执行此操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-04T14:40:14.417

另一种选择是，从 Windows Vista 开始，使用系统内置的 Windows 工具：

监控资源：`perfmon.exe /res`

摘自：http: [//www.sysadmit.com/2017/06/windows-how-to-know-that-process-has-open-a-file.html](http://Http://www.sysadmit.com/2017/06/windows-how-to-know-that-process-has-open-a-file.html)

# jquery - ASP.NET MVC、JSON 和非 JavaScript 客户端

> ID：320135
> 
> 赞同：4
> 
> 时间：2008-11-26T09:23:33.457
> 
> 标签：jquery, asp.net-mvc

我需要确保我正在开发的应用程序是可访问的，并且在关闭 JavaScript 的情况下也可以工作。我只需要一个指针来帮助完成以下工作。

我有 3 个“链式”选择框，我希望启用 JavaScript 的客户端能够获得良好的 Ajax 体验。我可以使用带有 WCF 服务的 jQuery 和 JSON 轻松编写所需的功能来填充前面选择的更改事件上的链接框。但是非 JavaScript 客户端呢？

我会在选择旁边包装一个提交并将它们放在他们自己的表单中以使用某个操作或不同的查询字符串参数回发吗？同一个控制器能否给我一个部分 JSON 响应以及提供完整的 HTML 响应。谁能给我指出一个很好的演示，它利用 JSON 和普通 HTTP 帖子在 ASP.NET MVC 中产生相同的结果。我看到的所有 ASP.NET MVC 演示/示例都忘记了未启用 JavaScript 的客户端。

**更新**

但是，如果我正确地阅读了使用 Microsoft Ajax 客户端库的 Ajax 调用，情况并非如此——我想避免并只使用 jQuery——道歉应该提到这一点。

此外，我不希望在控制器中到处都出现这种噪音（这让我想起了来自 webforms 的 ispostback ......不寒而栗）。

很遗憾，没有可以在控制器上使用的属性，例如 [AcceptVerbs(HttpVerbs.Post)]，但对于内容类型，例如 [AcceptType(httpTypes.Json)]。

必须有比到处使用 if 语句更好的方法.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T17:16:54.220

您可以检查 IsMvcAjaxRequest 属性并在控制器中使用它，然后如果为 true，则返回部分视图（用户控件）或 JSON 结果，如果为 false，则返回完整视图。

像这样的东西：

```
public ActionResult List()
{
   if (!Request.IsMvcAjaxRequest())
   {
       // Non AJAX requests see the entire ViewPage.
       return View();
   }
   else
   {
       // AJAX requests just get a trimmed down UserControl.
       return Json(...);
   }
 } 
```

此处的更多信息：[优雅降级的 MVC AJAX 站点](http://www.singingeels.com/Articles/MVC_AJAX_Sites_That_Gracefully_Degrade.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-29T12:19:38.533

（参考您之前的回答）：您可以在 Request.Form 中传递一个值来表示这是一个启用或不启用 javascript 的浏览器，然后创建一个控制器工厂，该工厂将根据您在 Request 中获得的内容实例化适当的控制器。形式; 常规请求的默认控制器（启用 javascript 的浏览器）和仅返回完整视图的“后备控制器”。我不确定拥有两倍数量的控制器是否比围绕单个控制器的 if-else 语句更好，但我想这是个人喜好的问题。

不过，我*敢打赌*，有更简单的解决方案……我希望这个问题有更多的曝光率。

# design-patterns - 设计模式与框架

> ID：320142
> 
> 赞同：22
> 
> 时间：2008-11-26T09:27:24.243
> 
> 标签：design-patterns, frameworks

有人可以说明两者之间的真正区别吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-11-26T09:28:40.437

设计模式是一个概念，或者是如何完成特定问题的收据。

框架是可供使用的代码，通常以一种更容易创建应用程序的方式打包。

解释这些差异是没有意义的，因为它们是完全不同的两件事。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-11-26T09:46:53.410

尽管它们是两个非常不同的东西，但可以说它们**都解决了软件架构问题**

*   *设计模式通过不同的预定义设计*解决了许多软件架构问题（关于创建、行为、并发性……）。（设计是[架构主题的实现](https://stackoverflow.com/questions/268497)）

*   框架基于[**好莱坞原则**](http://en.wikipedia.org/wiki/Hollywood_Principle)（“不要打电话给我们，我们打电话给你”），您可以按照规定实现一些高级别的要求，然后让框架完成剩下的工作，调用您的实现。

一个关键的区别是**范围凝聚力**：

*   **设计模式的** **范围*****很窄*** ：

     ***   类设计模式（涉及类）
    *   业务设计模式（涉及业务工作流程）
    *   应用程序设计模式（涉及应用程序）** 
***   **框架的** **范围*****很大*** ： 例如，**[.NET 是一个](http://msdn.microsoft.com/en-us/netframework/default.aspx)**由以下组成的框架：

     ***   一种语言（C#）
    *   运行时环境 (CLR)
    *   一组库
        只需开发您需要的东西，然后让 .Net 框架调用您的类。**** 

 ***** * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-11-26T09:44:48.610

```
|------------------------|
|          (------)      |
|          (ClassA)      |
|          (------)      |
| (-----------)          |
| ((Singleton))          |
| (-----------)          |
|         (---------)    |     
|         ((Factory))    |
|         (---------)    |
|                        |
|                        |
|------------------------|

Legend:
  |---|  Framework
  (---)  Class
  ()     Design Pattern 
```

框架是一组执行特定任务的相关类。这些类可能实现也可能不实现某种设计模式。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-01-08T09:46:06.823

这是[GOF](https://rads.stackoverflow.com/amzn/click/com/0201633612)的回答：

> 因为模式和框架有一些相似之处，人们经常想知道它们是如何不同的，甚至是不同的。它们在三个主要方面有所不同：
> 
> *   设计模式比框架更抽象。框架可以体现在代码中，但只有模式的示例可以体现在代码中。框架的一个优点是它们可以用编程语言写下来，不仅可以研究，还可以直接执行和重用。相反，本书中的设计模式在每次使用时都必须实现。设计模式还解释了设计的意图、权衡和后果。
>     
>     
> *   设计模式是比框架更小的架构元素。一个典型的框架包含多种设计模式，但反之则不然。
>     
>     
> *   设计模式不如框架专业。框架总是有一个特定的应用领域。图形编辑器框架可能用于工厂模拟，但不会被误认为是模拟框架。相比之下，此目录中的设计模式几乎可以用于任何类型的应用程序。虽然比我们更专业的设计模式当然是可能的（例如，分布式系统或并发编程的设计模式），但即使这些也不会像框架那样决定应用程序架构。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-11-26T09:32:27.930

设计模式是用于解决问题的成熟设计。框架是您用来简化构建应用程序的实际代码包。请注意，框架可以并且可能会使用设计模式。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-11-26T09:45:25.813

来自*Xiaoping Jia*的**Object-Oriented Software Development Using Java**：

 *> 尽管设计模式和框架都是用于捕获可重用设计的机制，但它们是完全不同的。一方面，设计模式是可重用设计的示意图描述，它们不是具体的程序，并且与语言无关。另一方面，框架是用特定编程语言编写的可编译程序，通常包含抽象类和接口。设计模式是框架的架构构建块。它们有助于使框架可扩展和可重用。框架通常包含许多协作设计模式的实现。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-08-13T13:30:07.037

**模式支持软件架构和设计的重用** - 模式捕获静态和动态结构以及成功解决在特定领域中构建应用程序时出现的问题的协作

**框架支持详细设计和代码的重用** - 框架是一组集成的组件，它们协作为一系列相关应用程序提供可重用的架构

设计模式和框架一起有助于提高软件质量并缩短开发时间。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-11-26T09:53:13.070

设计模式是众所周知的（设计）问题的标准解决方案。例如，工厂模式和抽象工厂模式为实现设计以克服实例化对象的常见问题提供了蓝图。

另一方面，框架包含基础设施，您可以使用和扩展以开发自己的解决方案。例如，模型 2“Web 应用程序框架”将包含用于构建基于 Web 的应用程序的基础设施。它将包含控制器、一些 gui 元素和基类，我们可以扩展它们以创建我们的模型和业务逻辑。通常它包含我们从基类扩展时继承的管道代码和交互。框架的一些示例是 Struts、JSF、Swing 应用程序框架、JUnit 测试框架等......

更进一步，还有一些库，我们可以直接从我们的代码中使用它们。通常不扩展他们的类。Log4J 将是一个库的示例。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-26T14:32:52.333

框架更具体地针对问题定义。为了编写一个设计模式，可以在任何适用的地方设计或使用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-02T21:12:32.230

答案很简单： **框架**：系统的元素，如（组件、层、类……）必须或应该如何相互交互

**设计模式**：高频问题的解决方案。它可能是 MSSQL 源代码到 oracle 的转换，...​​..... 并且有 3 种类型：分析、设计和实现模式。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-10-02T09:25:29.993

**模式**：一组公会线，构建应用程序。

**框架**：遵循特定模式，一组预构建类和库来创建架构模式。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-10-23T20:04:35.737

尽管我认为缺少具体示例，但已通过几种不同方式回答了这个问题。

**设计模式：为解决***重复出现的问题*而组合在一起的一组规则。规则定义模式。没有代码可以复制粘贴来实现这一点。开发人员应该理解规则然后实施它们。

例子：

*   名称：测试驱动开发（TDD）
*   问题：它确保编写的单元测试涵盖足够的案例场景，让您对生产代码充满信心。
*   规则：它规定您应该先编写测试，然后再编写代码以通过这些测试。这样可以确保您不是编写测试来通过代码，而是编写代码来通过测试。

设计模式分为 3 类：

*   创意设计模式：
*   结构
*   行为的

我发现[这个链接](https://sourcemaking.com/design_patterns)有助于解释它们。

* * *

**框架**：框架，不要与库混淆，是系统底层的基本结构，允许开发人员以标准化的方式构建和部署软件应用程序。

示例：.Net Core 框架是一个包含一组库的工具，使开发人员能够使用 Microsoft 堆栈编写可部署在多个不同环境（Windows、Mac OS、Linux）中的软件应用程序

* * *

**库**：一组可重用的方法/类放在一个包中以提供功能。

示例：[System.Collections.dll](https://docs.microsoft.com/en-us/dotnet/api/system.collections?view=netframework-4.7.2)库使 .Net 开发人员能够使用诸如[Hashtable](https://docs.microsoft.com/en-us/dotnet/api/system.collections.hashtable?view=netframework-4.7.2)之类的东西。

* * *

看看其他答案也是值得的，因为有时它只是一个流行词，并且因环境而异。看[这里](https://stackoverflow.com/questions/148747/what-is-the-difference-between-a-framework-and-a-library)。

我希望这有帮助。

# xsd - 未排序且只有一个无界项的 XSD 验证

> ID：320148
> 
> 赞同：0
> 
> 时间：2008-11-26T09:30:40.493
> 
> 标签：xsd

我有一个这样的xml文件：

```
<customer>
  <field1 />
  <field2 />
  <field3>
    <item1 />
  </field3>
  <field3>
    <item1 />
  </field3>
</customer> 
```

field* 可以按任意顺序出现，只有 field3 可以出现多次。

如何创建 XSD 文件来验证这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T11:21:53.967

## 尝试这个

我不是大师，但这似乎有效。

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="customer" type="customerType"/>
  <xs:complexType name="customerType">
    <xs:sequence>
      <xs:element name="field1" minOccurs="1" maxOccurs="1">
      </xs:element>
      <xs:element name="field2" minOccurs="1" maxOccurs="1">
      </xs:element>
      <xs:element name="field3" type="field3Type"
                  minOccurs="1" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="field3Type">
    <xs:sequence>
      <xs:element name="item1">
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

## 工具

我使用了[XML Copy Editor](http://xml-copy-editor.sourceforge.net)，但是有很多编辑器可以验证 XML。

## 链接

您可能还对[这篇](http://sqlmusings.wordpress.com/2008/10/09/generating-xsd-from-an-xml-file/)关于从 XML 文件生成 XSD 的文章感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-27T14:33:18.090

嗯，这种工作 xsd 实在是不方便。无论如何，如果我没有犯错，这应该可以解决问题：

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.example.org/NewXMLSchema"
xmlns:tns="http://www.example.org/NewXMLSchema" elementFormDefault="qualified">

  <element name="customer" type="tns:customerType"/>
  <complexType name="customerType">
    <sequence>
      <element>
        <complexType>
          <all>
            <element>
              <complexType>
                <sequence>
                  <element ref="tns:field3" maxOccurs="unbounded"/>
                  <element ref="tns:field1" maxOccurs="1"/>
                </sequence>
              </complexType>
            </element>
            <element>
              <complexType>
                <sequence>
                  <element ref="tns:field3" maxOccurs="unbounded"/>
                  <element ref="tns:field2" maxOccurs="1"/>
                </sequence>
              </complexType>
            </element>
            <element>
              <complexType>
                <sequence>
                  <element ref="tns:field3" maxOccurs="unbounded"/>
                  <element ref="tns:field4" maxOccurs="1"/>
                </sequence>
              </complexType>
            </element>
          </all>
        </complexType>
      </element>
      <element ref="tns:field3" maxOccurs="unbounded" />
    </sequence>
  </complexType>
  <complexType name="field1Container"/>
  <complexType name="field2Container"/>
  <complexType name="field3Type">
    <sequence>
      <element name="item1"/>
    </sequence>
  </complexType>
  <complexType name="field4Container"/>
  <element name="field3" type="tns:field3Type"/>
  <element name="field1"/>
  <element name="field2"/>
  <element name="field4"/>
</schema> 
```

# c# - .NET 库来绘制避开障碍物的路线

> ID：320158
> 
> 赞同：4
> 
> 时间：2008-11-26T09:37:19.247
> 
> 标签：c#, gdi+, line, spline

我为某事创建了一个工作流/流程图样式设计器。目前它正在使用相对简单的贝塞尔曲线来连接工作流中“块”的各个端点。

但是，我希望对用户来说更直观一些。我希望线条能够避开障碍物，例如其他块（矩形）以及可能的其他线条。

我更喜欢贝塞尔样条曲线而不是折线，因为它们更漂亮，并且似乎更适合设计师。但如果它们更难完成，我愿意妥协。

我知道这背后有一大堆科学。我研究了诸如 Graphviz、微软的 GLEE 和他们的商业 AGL（自动图形布局）库之类的东西。

GLEE 似乎几乎没有生产价值。他们的商业替代品是，嗯，商业替代品……它相当昂贵。

Graphviz 似乎没有以任何方式移植到 .NET。

我已经看到了 Windows Workflow Foundation 为其“自由形式设计器”使用的折线实现。这行得通，只是，但它并不是真正的生产级外观。

我很惊讶这种类型的东西没有一些即插即用的 .NET 库？就像是：

Point[] RoutePolyline(Point begin, Point end, Rectangle[] rectObstacles, Point[] lineObstacles);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-27T19:24:51.153

Are you limited to managed code only?

I did not have this restriction and the past and effectively integrated GraphViz with .Net. What we did was call an external process containing the natively compiled "dot" and parse the result in a .Net object model. It worked perfectly and was fast enough for our needs.

I'm sure you could do better and easier with C++/CLI today.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T09:49:46.273

我还没有尝试过（虽然我是他们[甘特图](http://www.ilog.com/products/ganttnet/)产品的满意客户），但 ILOG 有一个类似的工具[在这里](http://www.ilog.com/products/diagramnet/)。

[引用](http://www.ilog.com/products/diagramnet/feature.cfm#4)：_

> .NET 算法的 ILOG 图共享通用目标，例如：
> 
> *   最小化重叠节点的数量
> *   最小化链接交叉的数量
> *   最小化绘图的总面积
> *   最小化折弯数量（在正交图中）
> *   最大化由连续入射链接形成的最小角度
> *   最大化显示对称性
> *   支持增量布局、部分布局、子图、intergraph 链接和嵌套布局

至少，也许值得一看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T10:09:47.810

Diagram.NET 是一个免费的开源 C# 图表库。它已经有一段时间没有更新了，但它确实值得一看——那里可能有一些你可以重复使用的东西。

[http://www.dalssoft.com/diagram/](http://www.dalssoft.com/diagram/)

# java - 如何使用 Java 同步共享文件夹中的文件访问（或：网络级别的 ReadWriteLock）

> ID：320159
> 
> 赞同：5
> 
> 时间：2008-11-26T09:38:47.683
> 
> 标签：java, synchronization, file-access

我有多个应用程序在一台虚拟机中运行。我有多个虚拟机在一台服务器上运行。我有多个服务器。他们都使用 linux 上的共享文件夹共享一个文件。该文件由所有应用程序读取和写入。在写入过程中，不允许任何应用程序读取此文件。写入也是如此：如果应用程序正在读取文件，则不允许应用程序写入文件。

**我如何设法同步应用程序，以便它们在读取之前等待写入过程完成，反之亦然？（虚拟机内的应用程序必须同步，跨服务器的应用程序也必须同步）**

**当前的实现**使用“文件信号量”。如果文件即将被写入，应用程序会尝试通过在共享文件夹中创建一个附加文件（让我们将其命名为“file.semaphore”）来“获取”信号量。如果“file.semaphore”文件已经存在，这意味着信号量已经被另一个应用程序锁定。这种方法的**问题**是我无法确保“文件存在”-测试和“创建文件”-操作是原子执行的。这样，两个应用程序可能会测试“file.semaphore”文件，发现它不存在并尝试同时创建该文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-26T09:56:17.150

您可以使用 NIO 锁定功能。请参阅[FileChannel#lock()](http://java.sun.com/javase/6/docs/api/java/nio/channels/FileChannel.html#lock())。

但是，这只有在底层文件系统支持网络锁定时才有效。最近的 NFS 应该支持它。可能 Samba 也支持它们，但不能肯定地说。

例如见[文章。](http://www.javabeat.net/tips/37-locking-files-using-java.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-23T12:15:55.077

查看[createNewFile()](http://java.sun.com/javase/6/docs/api/java/io/File.html#createNewFile())方法的 Javadocs - 它明确指出创建文件不是一种可靠的同步方法，并推荐使用[FileLock](http://java.sun.com/javase/6/docs/api/java/nio/channels/FileLock.html)类（它是 java.nio.channels 中的另一个包，因此与伊万杜布罗夫建议）。

这意味着您对问题的识别是准确的，使用传统的文件创建方法再多的尝试也无法解决这个问题。我的第一个想法是检查 createNewFile() 的返回代码，但如果 Javadocs 说它不合适，那么是时候继续了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-17T14:16:22.173

需要将用于保护 JVM 之间的文件锁定与给定 JVM 的线程内的同步结合起来。在此处查看[网络僧侣的答案](https://stackoverflow.com/a/11544765)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-14T11:34:17.080

我也在尝试确定在类似情况下解决此问题的最佳方法（参与过程较少，但仍然存在相同的潜在问题）。如果您无法使用 Ivan 建议的文件锁定方案（例如系统|语言|网络服务不支持它），也许您可​​以指定其中一位参与者作为裁判。所有参与者都编写独特的信号量，当他们想要文件时称他们为“participant#.request”。裁判轮询这些信号量的文件系统。当他看到一个时，他回写“participant#.lock”，并删除该请求。如果他碰巧在“同时”看到多个，他会随机选择一个（或首先按文件修改时间）并仅删除他们的请求。然后，发布锁的参与者知道他们可以安全地访问文件。当参与者完成文件后，他们会删除自己的锁。当有锁到位时，裁判不会发出其他锁。用户删除锁后出现的任何请求都可以在不发出新请求的情况下获得新锁，因此您可以让其他用户在发送请求后轮询他们的锁。无论如何，这可能是锁定机制正在做的事情，除了将锁定作为队列管理的能力，该队列伴随着请求的接收顺序被处理（即，如果裁判使用修改时间）。此外，由于您负责裁判，您可以设置锁定超时，允许他向占用文件的进程发出超时信号，然后删除锁定（当然希望如果该锁定的进程死亡，它做得很好）。

# python - 当电子邮件正文中包含中文字符时，email.retr 会检索奇怪的 =20 个字符

> ID：320166
> 
> 赞同：3
> 
> 时间：2008-11-26T09:41:42.920
> 
> 标签：python, email, fonts, jython, asianfonts

```
 self.logger.info(msg)
    popinstance=poplib.POP3(self.account[0])
    self.logger.info(popinstance.getwelcome())
    popinstance.user(self.account[1])
    popinstance.pass_(self.account[2])
    try:
        (numMsgs, totalSize)=popinstance.stat()
        self.logger.info("POP contains " + str(numMsgs) + " emails")
        for thisNum in xrange(1, numMsgs + 1):
            try:
                (server_msg, body, octets)=popinstance.retr(thisNum)
            except:
                self.logger.error("Could not download email")
                raise
            text="\n".join(body)
            mesg=StringIO.StringIO(text)
            msg=rfc822.Message(mesg)
            MessageID=email.Utils.parseaddr(msg["Message-ID"])[1]
            self.logger.info("downloading email " + MessageID)
            emailpath=os.path.join(self._emailpath + self._inboxfolder + "\\" + self._sanitize_string(MessageID  + ".eml"))
            emailpath=self._replace_whitespace(emailpath)
            try:
                self._dual_dump(text,emailpath)
            except:
                pass
            self.logger.info(popinstance.dele(thisNum))
    finally:
        self.logger.info(popinstance.quit()) 
```

(server_msg, body, octets)=popinstance.retr(thisNum) 当邮件中包含中文字符时，邮件正文中返回=20。

我该如何处理？

电子邮件的原始文本：

主题：（提单：4363-0192-809.015）SI FOR 15680XXXX436

=20

亲爱的

=20

SI 封闭式

请向我们发送 BL 草案和借记单

=20

TKS

=20

米里

----- 原始消息 -----=20

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-26T09:59:28.237

它可能是在[quoted-printable中编码的空格字符](http://en.wikipedia.org/wiki/Quoted-printable)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-15T23:13:38.673

使用[quopri](http://docs.python.org/library/quopri.html)模块对字符串进行解码。

# java - 如何将有序的整数列表划分为大小均匀的子列表？

> ID：320170
> 
> 赞同：4
> 
> 时间：2008-11-26T09:43:35.193
> 
> 标签：java, algorithm, sorting

有没有人有一个很好的算法来获取整数的有序列表，即：
[1, 3, 6, 7, 8, 10, 11, 13, 14, 17, 19, 23, 25, 27, 28]

到给定数量的均匀大小的有序子列表中，即 4 它将是：
[1, 3, 6] [7, 8, 10, 11] [13, 14, 17, 19] [23, 25, 27, 28 ]

要求是每个子列表都是有序的并且大小尽可能相似。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-26T09:56:39.490

平均拆分列表意味着您将拥有两种大小的列表 - 大小 S 和 S+1。

使用 N 个子列表和原始中的 X 个元素，您将获得：

floor(X/N) 较小子列表 (S) 中元素的数量，X % N 是较大子列表 (S+1) 的数量。

然后遍历原始数组，并（查看您的示例）首先创建小列表。

可能是这样的：

```
 private static List<Integer[]> splitOrderedDurationsIntoIntervals(Integer[] durations, int numberOfIntervals) {

    int sizeOfSmallSublists = durations.length / numberOfIntervals;
    int sizeOfLargeSublists = sizeOfSmallSublists + 1;
    int numberOfLargeSublists = durations.length % numberOfIntervals;
    int numberOfSmallSublists = numberOfIntervals - numberOfLargeSublists;

    List<Integer[]> sublists = new ArrayList(numberOfIntervals);
    int numberOfElementsHandled = 0;
    for (int i = 0; i < numberOfIntervals; i++) {
        int size = i < numberOfSmallSublists ? sizeOfSmallSublists : sizeOfLargeSublists;
        Integer[] sublist = new Integer[size];
        System.arraycopy(durations, numberOfElementsHandled, sublist, 0, size);
        sublists.add(sublist);
        numberOfElementsHandled += size;
    }
    return sublists;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T09:51:53.150

这是我自己的递归解决方案，灵感来自合并排序和广度优先树遍历：

```
private static void splitOrderedDurationsIntoIntervals(Integer[] durations, List<Integer[]> intervals, int numberOfInterals) {
    int middle = durations.length / 2;
    Integer[] lowerHalf = Arrays.copyOfRange(durations, 0, middle);
    Integer[] upperHalf = Arrays.copyOfRange(durations, middle, durations.length);
    if (lowerHalf.length > upperHalf.length) {
        intervals.add(lowerHalf);
        intervals.add(upperHalf);
    } else {
        intervals.add(upperHalf);
        intervals.add(lowerHalf);
    }
    if (intervals.size() < numberOfIntervals) {
        int largestElementLength = intervals.get(0).length;
        if (largestElementLength > 1) {
            Integer[] duration = intervals.remove(0);
            splitOrderedDurationsIntoIntervals(duration,  intervals);
        }
    }
} 
```

我希望有人可能对迭代解决方案提出建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T10:00:19.543

[这是](https://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks-in-python)Python 的解决方案。你可以把它翻译成Java，你需要一种方法来获取列表的一部分，然后返回它。虽然您不能使用生成器方法，但您可以将每个子列表附加到新列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T10:13:40.593

伪代码...

```
private static void splitOrderedDurationsIntoIntervals(Integer[] durations, List<Integer[]> intervals, int numberOfInterals) {

    int num_per_interval = Math.floor(durations.length / numberOfInterals);
    int i;
    int idx;

    // make sure you have somewhere to put the results
    for (i = 0; i < numberOfInterals; i++) intervals[i] = new Integer[];

    // run once through the list and put them in the right sub-list
    for (i = 0; i < durations.length; i++)
    {
        idx = Math.floor(i / num_per_interval);
        intervals[idx].add(durations[i]);
    }
} 
```

这段代码需要整理一下，但我相信你明白了。另外我怀疑大小不等的间隔列表将位于末尾而不是开头。如果你真的想要这样，你可以通过颠倒循环的顺序来做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-26T10:15:01.620

那应该是一个更迭代的答案。

```
public static void splitList(List<Integer> startList, List<List<Integer>> resultList, 
        int subListNumber) {
    final int subListSize = startList.size() / subListNumber;
    int index = 0;
    int stopIndex = subListSize;
    for (int i = subListNumber; i > 0; i--) {
        resultList.add(new ArrayList<Integer>(startList.subList(index, stopIndex)));
        index = stopIndex;
        stopIndex =
            (index + subListSize > startList.size()) ? startList.size() : index + subListSize;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-26T10:26:25.373

你可能会考虑这样的事情：

```
 public static int[][] divide(int[] initialList, int sublistCount)
    {
        if (initialList == null)
            throw new NullPointerException("initialList");
        if (sublistCount < 1)
            throw new IllegalArgumentException("sublistCount must be greater than 0.");

        // without remainder, length / # lists will always be the minimum 
        // number of items in a given subset
        int min = initialList.length / sublistCount;
        // without remainer, this algorithm determines the maximum number 
        // of items in a given subset.  example: in a 15-item sample, 
        // with 4 subsets, we get a min of 3 (15 / 4 = 3r3), and 
        // 15 + 3 - 1 = 17\.  17 / 4 = 4r1.
        // in a 16-item sample, min = 4, and 16 + 4 - 1 = 19\. 19 / 4 = 4r3.
        // The -1 is required in samples in which the max and min are the same.
        int max = (initialList.length + min - 1) / sublistCount;
        // this is the meat and potatoes of the algorithm.  here we determine
        // how many lists have the min count and the max count.  we start out 
        // with all at max and work our way down.
        int sublistsHandledByMax = sublistCount;
        int sublistsHandledByMin = 0;
        while ((sublistsHandledByMax * max) + (sublistsHandledByMin * min)
                    != initialList.length)
        {
            sublistsHandledByMax--;
            sublistsHandledByMin++;
        }

        // now we copy the items into their new sublists.
        int[][] items = new int[sublistCount][];
        int currentInputIndex = 0;
        for (int listIndex = 0; listIndex < sublistCount; listIndex++)
        {
            if (listIndex < sublistsHandledByMin)
                items[listIndex] = new int[min];
            else
                items[listIndex] = new int[max];

            // there's probably a better way to do array copies now.
            // it's been a while since I did Java :)
            System.arraycopy(initialList, currentInputIndex, items[listIndex], 0, items[listIndex].length);
            currentInputIndex += items[listIndex].length;
        }

        return items;
    } 
```

这不是很完美——当我尝试传递一个包含 10 个子列表的 18 项数组时，我陷入了一个无限循环（我认为）。我认为当 min == 1 时算法会崩溃。

这应该相当快。祝你好运 ：）

# java - Axis2 客户端的最小类路径是什么？

> ID：320178
> 
> 赞同：32
> 
> 时间：2008-11-26T09:51:11.093
> 
> 标签：java, maven-2, classpath, axis2

我想用 Maven2 构建一个 Axis2 客户端（我只是访问一个远程 Web 服务，我*没有*实现一个！），我不想在我的项目中添加 21MB 的 JAR。当我使用 ADB 转换 WSDL 时，我必须在 pom.xml 中放入什么来编译代码？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2010-08-27T03:27:20.663

客户端的最小罐子是：

*   激活-1.1.jar
*   axiom-api-1.2.8.jar
*   axiom-impl-1.2.8.jar
*   axis2-adb-1.5.1.jar
*   axis2-kernel-1.5.1.jar
*   axis2-transport-http-1.5.1.jar
*   axis2-transport-local-1.5.1.jar
*   commons-codec-1.3.jar
*   commons-httpclient-3.1.jar
*   commons-logging-1.1.1.jar
*   httpcore-4.0.jar
*   mail-1.4.jar
*   neethi-2.0.4.jar
*   wsdl4j-1.6.2.jar
*   XmlSchema-1.4.3.jar

下面的 STAX jar 不是 Axis2 1.5.1 版本的一部分，如果您的 JDK 版本低于 6，则需要：

*   stax-1.2.0.jar
*   stax-api-1.0.1.jar

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-11-26T18:01:59.917

（**注：**此回复由 Aaron Digulla 本人提供。以下是他自己回答的确切文本。）

在 maven2 中，使 ADB 客户端工作的最小依赖项（“ADB”，就像您从 WSDL 创建 Java 类的方式一样）是这样的：

```
 <dependency>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-kernel</artifactId>
            <version>1.4.1</version>
    </dependency>
    <dependency>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-adb</artifactId>
            <version>1.4.1</version>
    </dependency> 
```

嗯...似乎我无法将其标记为正确答案。有人可以复制这个，以便我可以标记他的帖子吗？

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2011-04-18T21:50:04.663

也必须添加运输工具

```
<dependency>
    <groupId>org.apache.axis2</groupId>
    <artifactId>axis2-adb</artifactId>
    <version>1.5.4</version>
</dependency>
<dependency>
    <groupId>org.apache.axis2</groupId>
    <artifactId>axis2-transport-local</artifactId>
    <version>1.5.4</version>
</dependency>
<dependency>
    <groupId>org.apache.axis2</groupId>
    <artifactId>axis2-transport-http</artifactId>
    <version>1.5.4</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-09-26T17:03:27.357

总结对工作客户的最小依赖

* * *

*   axiom-api-1.2.14.jar
*   axiom-impl-1.2.14.jar
*   axis2-adb-1.6.3.jar
*   axis2-kernel-1.6.3.jar
*   axis2-transport-http-1.6.3.jar
*   axis2-transport-local-1.6.3.jar
*   commons-codec-1.3.jar
*   commons-httpclient-3.1.jar
*   commons-logging-1.1.1.jar
*   httpcore-4.0.jar
*   mail-1.4.jar
*   neethi-3.0.2.jar
*   wsdl4j-1.6.2.jar
*   XmlSchema-1.4.7.jar

* * *

下面列出了带有详细信息的最小依赖项

客户端存根使用 %AXIS2_HOME%\bin\WSDL2Java 工具针对给定 WSDL 生成的 ServiceClient 类（要生成，您需要类路径上的所有轴 jar，通过设置 AXIS_HOME 最容易实现）

## 客户端存根在*编译*时所需的类

* * *

*   axiom-api-1.2.14.jar -- org.apache.axiom.om.OMElement、org.apache.axiom.soap.SOAPEnvelope、org.apache.axiom.soap.SOAPFactory、org 的客户端存根在编译时需要.apache.axiom.om.OMNamespace
*   axis2-adb-1.6.3.jar -- org.apache.axis2.databinding.ADBException 的客户端存根在编译时需要
*   axis2-kernel-1.6.3.jar -- org.apache.axis2.AxisFault 类的客户端存根在编译时需要

## *在运行*时成功调用客户端存根所需的类

*   axiom-impl-1.2.14.jar（没有这个 org.apache.axiom.om.OMException: No meta factory found for feature 'default'；这通常意味着 axiom-impl.jar 不在类路径中）
*   axis2-transport-http-1.6.3.jar（没有这个 org.apache.axis2.deployment.DeploymentException: org.apache.axis2.transport.http.CommonsHTTPTransportSender）
*   axis2-transport-local-1.6.3.jar（没有这个 org.apache.axis2.deployment.DeploymentException: org.apache.axis2.transport.local.LocalTransportSender）
*   commons-codec-1.3.jar（没有这个 java.lang.NoClassDefFoundError: org/apache/commons/codec/DecoderException）
*   commons-httpclient-3.1.jar（没有这个 org.apache.axis2.deployment.DeploymentException: org/apache/commons/httpclient/HttpException）
*   commons-logging-1.1.1.jar（没有这个 java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory）
*   httpcore-4.0.jar（没有这个 java.lang.NoClassDefFoundError: org/apache/http/HttpResponseFactory）
*   mail-1.4.jar（没有这个 java.lang.NoClassDefFoundError: javax/mail/internet/ParseException）
*   neethi-3.0.2.jar（没有这个 java.lang.NoClassDefFoundError: org/apache/neethi/PolicyComponent）
*   wsdl4j-1.6.2.jar（没有这个 java.lang.NoClassDefFoundError: javax/wsdl/WSDLException）
*   XmlSchema-1.4.7.jar（没有这个 java.lang.ClassNotFoundException: org/apache/ws/commons/schema/XmlSchema）

* * *

org.apache.axis2.AxisFault: Connection denied: connect -> ERROR ONLY if the web service is not up or access for some other reason

请注意确切的版本，但是行为将足够通用，受不同版本的打包更改的影响，因此，上面提到了 FQCN -

轴版本 - [1.6.3](http://www.eu.apache.org/dist//axis/axis2/java/core/1.6.3/axis2-1.6.3-bin.zip)

Tomcat 版本 - [Apache Tomcat/7.0.64](http://www.eu.apache.org/dist/tomcat/tomcat-7/v7.0.64/bin/apache-tomcat-7.0.64.zip)

Servlet 版本 - 3.0

java.runtime.version - 1.7.0_79-b15

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-06T17:09:50.837

**如果没有axis2-xmlbeans**，Axis2 1.6.2 版对我不起作用（尽管这可能与我也在使用*axis2-wsdl2code-maven-plugin*插件和xmlbeans 作为我的数据绑定框架这一事实有关）。我有以下POM：

```
 <dependency>
        <groupId>org.apache.axis2</groupId>
        <artifactId>axis2-kernel</artifactId>
        <version>1.6.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.axis2</groupId>
        <artifactId>axis2-adb</artifactId>
        <version>1.6.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.axis2</groupId>
        <artifactId>axis2-transport-http</artifactId>
        <version>1.6.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.axis2</groupId>
        <artifactId>axis2-transport-local</artifactId>
        <version>1.6.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.axis2</groupId>
        <artifactId>axis2-xmlbeans</artifactId>
        <version>1.6.2</version>
    </dependency> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-02T10:26:45.670

如果您的客户端在 Java 6 上运行，请考虑使用 JAX-WS 来使用 WS。JAX-WS 使用 JAXB 标准进行绑定，您不需要为客户端添加一个额外的 jar。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-12-30T18:27:03.643

实际上，您只需要**axis-abd**依赖项，因为**axis2-kernel是****axis-abd**的子依赖项。因此，您可以总结为：

```
<dependency>
    <groupId>org.apache.axis2</groupId>
    <artifactId>axis2-adb</artifactId>
    <version>1.5.1</version>
</dependency> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-04-02T00:17:23.640

在 Axis2 版本 1.5.1 中，maven 模块似乎已经过重组。

我的 Groovy 脚本（使用 ADB 绑定）具有以下依赖项：

```
@Grapes([
    @Grab(group='org.apache.axis2', module='axis2-kernel', version='1.5.1'),
    @Grab(group='org.apache.axis2', module='axis2-adb', version='1.5.1'),
    @Grab(group='org.apache.axis2', module='axis2-transport-local', version='1.5.1'),
    @Grab(group='org.apache.axis2', module='axis2-transport-http', version='1.5.1'),
]) 
```

这些都是有逻辑的。在生成我的存根时，我可以使用替代绑定框架，或者可以使用替代 HTTP 传输协议。

[此答案](https://stackoverflow.com/questions/2559074/steps-in-creating-a-web-service-using-axis2-the-client-code/2564323#2564323)中的示例代码

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-16T23:34:53.427

对于那些使用**Gradle**的人，这里我排除了不必要的库：

```
dependencies {

    ext.compileEx = { lib, exModules, exGroups ->
        compile (lib) {
            exModules.each { exclude module : "$it" }
            exGroups.each  { exclude group: "$it" }
        }
    }

    List axisExModules = [ 'axiom-compat', 'jaxen', 'apache-mime4j-core' ]
    List axisExGroups  = [ 'javax.servlet', 'commons-fileupload', 'org.apache.woden',
                           'javax.ws.rs', 'org.apache.geronimo.specs', 'org.codehaus.woodstox' ]
    compileEx ('org.apache.axis2:axis2-adb:1.6.3', axisExModules, axisExGroups)
    compileEx ('org.apache.axis2:axis2-transport-local:1.6.3', axisExModules, axisExGroups)
    compileEx ('org.apache.axis2:axis2-transport-http:1.6.3', axisExModules, axisExGroups)

} 
```

[这](https://discuss.gradle.org/t/multiple-excludes-for-multiple-dependencies/11573/6?u=ivanrf)是我在 Gradle 论坛上的原始帖子。

# css - 如何防止长词破坏我的div？

> ID：320184
> 
> 赞同：152
> 
> 时间：2008-11-26T09:53:45.907
> 
> 标签：css, layout, html

自从从 TABLE-layout 切换到 DIV-layout 后，一个常见的问题仍然存在：

**问题**：你用动态文本填充你的 DIV，不可避免地会有一个超长的词延伸到你的 div 列的边缘，使你的网站看起来不专业。

**RETRO-WHINING**：这在表格布局中*从未*发生过。表格单元格总是会很好地扩展到最长单词的宽度。

**严重性**：我什至在最主要的网站上也看到了这个问题，特别是在德国网站上，即使是“限速”等常用词也很长（“Geschwindigkeitsbegrenzung”）。

有没有人对此有可行的解决方案？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2008-11-26T10:20:49.237

## 软连字符

您可以通过插入软连字符 ( ) 告诉浏览器在哪里拆分长词`&shy;`：

```
averyvery&shy;longword 
```

可以呈现为

> 非常非常长的词

或者

> 非常
> 长词

一个好的正则表达式可以确保您不会插入它们，除非有必要：

```
/([^\s-]{5})([^\s-]{5})/ → $1&shy;$2 
```

浏览器和搜索引擎足够聪明，可以在搜索文本时忽略此字符，而 Chrome 和 Firefox（尚未测试其他人）在将文本复制到剪贴板时会忽略它。

## `<wbr>`元素

另一种选择是注入`<wbr>`，以前的[IE-ism](http://www.quirksmode.org/oddsandends/wbr.html)，现在[是 HTML5](http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-wbr-element)：

```
averyvery<wbr>longword 
```

没有连字符的中断：

> 非常
> 长的词

您可以使用零宽度空格字符`&#8203;`（或`&#x200B`）来实现相同的目的。

* * *

仅供参考，最新的 IE、Firefox 和 Safari（[但目前不支持 Chrome](http://caniuse.com/#feat=css-hyphens) ）也支持[CSS`hyphens: auto`](http://www.w3.org/TR/css3-text/#hyphenation)：

```
div.breaking {
  hyphens: auto;
} 
```

但是，这种连字符是基于连字符字典的，并且不能保证会打断长词。它可以使合理的文本更漂亮。

## 复古抱怨解决方案

`<table>`for 布局很糟糕，但`display:table`在其他元素上很好。它将像老式桌子一样古怪（和有弹性）：

```
div.breaking {
   display: table-cell;
} 
```

* * *

`overflow`下面的`white-space: pre-wrap`答案也很好。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2008-11-26T10:02:02.707

两个修复：

1.  `overflow:scroll`-- 这可以确保你的内容可以被看到，但代价是设计（滚动条很难看）
2.  `overflow:hidden`- 只是切断任何溢出。这意味着人们无法阅读内容。

如果（在 SO 示例中）您想阻止它与填充重叠，您可能必须在填充内创建另一个 div 来保存您的内容。

编辑：正如其他答案所述，有多种截断单词的方法，即在客户端计算渲染宽度（永远不要尝试在服务器端执行此操作，因为它永远不会可靠地工作，跨平台）通过JS 和插入中断字符，或使用非标准和/或完全不兼容的 CSS 标记（`word-wrap: break-word` [在 Firefox 中似乎不起作用](https://stackoverflow.com/questions/320184/who-has-solved-the-long-word-breaks-my-div-problem-hint-not-stackoverflow#320267)）。

不过，您总是需要一个溢出描述符。如果您的 div 包含另一个太宽的块类型内容（图像、表格等），您将需要溢出以使其不会破坏布局/设计。

因此，请务必使用另一种方法（或它们的组合），但请记住也要添加溢出，以便覆盖所有浏览器。

编辑2（以解决您在下面的评论）：

开始使用 CSS`overflow`属性并不完美，但它可以阻止设计中断。先申请`overflow:hidden`。请记住，溢出可能不会在填充上中断，因此可以使用 nest`div`或使用边框（无论哪种方式最适合您）。

这将隐藏溢出的内容，因此您可能会失去意义。您可以使用滚动条（使用`overflow:auto`或`overflow:scroll`代替`overflow:hidden`），但根据 div 的尺寸和您的设计，这可能看起来或效果不佳。

为了解决这个问题，我们可以使用 JS 将内容拉回来并进行某种形式的自动截断。我正在为您编写一些伪代码，但在中途它变得非常复杂。如果您需要尽可能多地显示，请在[hyphenator](http://code.google.com/p/hyphenator/)中查看（[如下所述](https://stackoverflow.com/questions/320184/who-has-solved-the-long-word-breaks-my-div-problem-hint-not-stackoverflow#320267)）。

请注意，这是以用户 CPU 为代价的。这可能导致页面需要很长时间才能加载和/或调整大小。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2009-03-31T23:03:58.063

正如我们所知，这是一个复杂的问题，并且在浏览器之间没有任何常见的方式支持。大多数浏览器根本不支持此功能。

在使用 HTML 电子邮件完成的一些工作中，使用了用户内容，但脚本不可用（甚至 CSS 也没有得到很好的支持），围绕未分隔内容块的包装器中的以下 CSS 位至少应该有所帮助：

```
.word-break {
  /* The following styles prevent unbroken strings from breaking the layout */
  width: 300px; /* set to whatever width you need */
  overflow: auto;
  white-space: -moz-pre-wrap; /* Mozilla */
  white-space: -hp-pre-wrap; /* HP printers */
  white-space: -o-pre-wrap; /* Opera 7 */
  white-space: -pre-wrap; /* Opera 4-6 */
  white-space: pre-wrap; /* CSS 2.1 */
  white-space: pre-line; /* CSS 3 (and 2.1 as well, actually) */
  word-wrap: break-word; /* IE */
  -moz-binding: url('xbl.xml#wordwrap'); /* Firefox (using XBL) */
} 
```

对于基于 Mozilla 的浏览器，上述 XBL 文件包含：

```
<?xml version="1.0" encoding="utf-8"?>
<bindings xmlns="http://www.mozilla.org/xbl" 
          xmlns:html="http://www.w3.org/1999/xhtml">
  <!--
  More information on XBL:
  http://developer.mozilla.org/en/docs/XBL:XBL_1.0_Reference

  Example of implementing the CSS 'word-wrap' feature:
  http://blog.stchur.com/2007/02/22/emulating-css-word-wrap-for-mozillafirefox/
  -->
  <binding id="wordwrap" applyauthorstyles="false">
    <implementation>
      <constructor>
        //<![CDATA[
        var elem = this;

        doWrap();
        elem.addEventListener('overflow', doWrap, false);

        function doWrap() {
          var walker = document.createTreeWalker(elem, NodeFilter.SHOW_TEXT, null, false);
          while (walker.nextNode()) {
            var node = walker.currentNode;
            node.nodeValue = node.nodeValue.split('').join(String.fromCharCode('8203'));
          }
        }
        //]]>
      </constructor>
    </implementation>
  </binding>
</bindings> 
```

不幸的是，Opera 8+ 似乎不喜欢上述任何解决方案，因此 JavaScript 必须成为这些浏览器（如 Mozilla/Firefox）的解决方案。另一个跨浏览器解决方案 (JavaScript) 包括更高版本的 Opera将使用在这里找到的 Hedger Wang 的脚本： [http ://www.hedgerwow.com/360/dhtml/css-word-break.html](http://www.hedgerwow.com/360/dhtml/css-word-break.html)

**其他有用的链接/想法：**

不连贯的 Babble » 博客存档 » 为 Mozilla/Firefox 模拟 CSS 自动换行
[http://blog.stchur.com/2007/02/22/emulating-css-word-wrap-for-mozillafirefox/](http://blog.stchur.com/2007/02/22/emulating-css-word-wrap-for-mozillafirefox/)

[OU] Opera 中没有自动换行，在 IE 中显示正常
[http://list.opera.com/pipermail/opera-users/2004-November/024467.html](http://list.opera.com/pipermail/opera-users/2004-November/024467.html)
[http://list.opera.com/pipermail/opera- users/2004-11月/024468.html](http://list.opera.com/pipermail/opera-users/2004-November/024468.html)

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2011-01-12T12:38:20.463

CSS 跨浏览器自动换行

```
.word_wrap
{
    white-space: pre-wrap; /* css-3 */
    white-space: -moz-pre-wrap; /* Mozilla, since 1999 */
    white-space: -pre-wrap; /* Opera 4-6 */
    white-space: -o-pre-wrap; /* Opera 7 */
    word-wrap: break-word; /* Internet Explorer 5.5+ */
} 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2010-08-09T18:06:14.543

使用风格`word-break:break-all;`。我知道它适用于桌子。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2008-11-26T10:02:07.747

你的意思是，在支持它的浏览器中，[`word-wrap: break-word`](http://www.w3.org/TR/css3-text/#word-wrap)不起作用？

如果[包含在样式表的正文定义中](http://css-discuss.incutio.com/?page=WordWrapLongText)，它应该适用于整个文档。

如果溢出不是一个好的解决方案，只有自定义的 javascript 可以人为地分解长单词。

注意：还有这个[`<wbr>`Word Break 标签](http://www.thefutureoftheweb.com/blog/breaking-long-urls)。这为浏览器提供了一个可以拆分队列的位置。不幸的是，该`<wbr>`标签不适用于所有浏览器，只有 Firefox 和 Internet Explorer（以及带有 CSS 技巧的 Opera）。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2010-08-24T21:23:41.987

刚刚检查了 IE 7、Firefox 3.6.8 Mac、Firefox 3.6.8 Windows 和 Safari：

```
word-wrap: break-word; 
```

适用于具有设定宽度且在 css 中声明没有溢出的 div 内的长链接：

```
#consumeralerts_leftcol{
    float:left;
    width: 250px;
    margin-bottom:10px;
    word-wrap: break-word;
} 
```

我没有看到任何不兼容问题

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2008-11-26T10:40:41.100

我刚刚从[这个问题](https://stackoverflow.com/questions/315845/should-i-avoid-using-text-align-justify)中发现了[连字符](http://code.google.com/p/hyphenator/)。那可能会解决问题。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2012-07-16T18:47:18.827

经过多次战斗，这对我有用：

```
.pre {
    font-weight: 500;
    font-family: Courier New, monospace;
    white-space: pre-wrap;
    word-wrap: break-word;
    word-break: break-all;
    -webkit-hyphens: auto;
    -moz-hyphens: auto;
    hyphens: auto;
} 
```

适用于最新版本的 Chrome、Firefox 和 Opera。

请注意，我排除`white-space`了其他人建议的许多属性——这实际上打破了`pre`我的缩进。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2013-03-06T08:45:05.280

对我来说，在没有固定大小和动态内容的 div 上，它使用：

```
display:table;
word-break:break-all; 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-11-26T11:24:01.060

对于这个问题，我通常使用的解决方案是为 IE 和其他浏览器设置 2 个不同的 css 规则：

```
word-wrap: break-word; 
```

在 IE 中很完美，但**自动换行**不是标准的 CSS 属性。这是 Microsoft 特有的属性，在 Firefox 中不起作用。

对于 Firefox，最好只使用 CSS 来设置规则

```
overflow: hidden; 
```

对于包含要换行的文本的元素。它不换行文本，而是**隐藏超出容器限制的文本部分**。`<a>`如果您不需要显示所有文本（即，如果文本在标签内），这可能是一个很好的解决方案

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2011-06-09T20:17:27.307

重新使用[此评论](https://stackoverflow.com/questions/320184/who-has-solved-the-long-word-breaks-my-div-problem-hint-not-stackoverflow/320196#320196 "这条评论")中的正则表达式，这很好，但它仅在 5 个非空白或连字符的组之间添加了连字符。这允许最后一组比预期的长得多，因为它后面没有匹配的组。

例如，这个：

```
'abcde12345678901234'.replace(/([^\s-]{5})([^\s-]{5})/g, '$1&shy;$2') 
```

...结果：

```
abcde&shy;12345678901234 
```

这是一个使用正向前瞻来避免该问题的版本：

```
.replace(/([^\s-]{5})(?=[^\s-])/g, '$1&shy;') 
```

...结果如下：

```
abcde&shy;12345&shy;67890&shy;1234 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2011-06-28T14:34:22.183

**更新：**在 CSS 中处理这个非常简单且开销很低，但是您无法控制中断发生的位置。如果您不在乎，那很好，或者您的数据有很长的字母数字运行而没有任何自然中断。我们有很多长文件路径、URL 和电话号码，所有这些都有比其他文件更容易破解的地方。

我们的解决方案是首先使用正则表达式替换，在每 15 个（比如说）不是空格的字符或我们希望中断的特殊字符之一之后放置一个零宽度空格（​）。然后我们再做一次替换，在这些特殊字符之后放置一个零宽度的空格。

零宽度空间很好，因为它们在屏幕上是不可见的；害羞的连字符在显示时会让人感到困惑，因为数据中有重要的连字符。从浏览器中复制文本时，也不包括零宽度空格。

我们目前使用的特殊中断字符是句点、正斜杠、反斜杠、逗号、下划线、@、| 和连字符。你不会认为你需要做任何事情来鼓励在连字符后中断，但 Firefox（至少 3.6 和 4）不会在由数字（如电话号码）包围的连字符处自行中断。

我们还想根据可用的布局空间来控制人为中断之间的字符数。这意味着匹配长时间不间断运行的正则表达式需要是动态的。这被调用了很多，出于性能原因，我们不想一遍又一遍地创建相同的正则表达式，所以我们使用了一个简单的正则表达式缓存，由正则表达式及其标志键控。

这是代码；您可能会命名实用程序包中的函数：

```
makeWrappable = function(str, position)
{
    if (!str)
        return '';
    position = position || 15; // default to breaking after 15 chars
    // matches every requested number of chars that's not whitespace or one of the special chars defined below
    var longRunsRegex = cachedRegex('([^\\s\\.\/\\,_@\\|-]{' + position + '})(?=[^\\s\\.\/\\,_@\\|-])', 'g');
    return str
                .replace(longRunsRegex, '$1&#8203;') // put a zero-width space every requested number of chars that's not whitespace or a special char
                .replace(makeWrappable.SPECIAL_CHARS_REGEX, '$1&#8203;'); // and one after special chars we want to allow breaking after
};
makeWrappable.SPECIAL_CHARS_REGEX = /([\.\/\\,_@\|-])/g; // period, forward slash, backslash, comma, underscore, @, |, hyphen

cachedRegex = function(reString, reFlags)
{
    var key = reString + (reFlags ? ':::' + reFlags : '');
    if (!cachedRegex.cache[key])
        cachedRegex.cache[key] = new RegExp(reString, reFlags);
    return cachedRegex.cache[key];
};
cachedRegex.cache = {}; 
```

像这样测试：

```
makeWrappable('12345678901234567890 12345678901234567890 1234567890/1234567890') 
```

**更新 2：**似乎零宽度空格实际上至少在某些情况下包含在复制的文本中，您只是看不到它们**。**显然，鼓励人们复制带有隐藏字符的文本是在邀请将此类数据输入其他程序或系统，甚至是您自己的程序或系统，这可能会导致问题。例如，如果它最终在数据库中，针对它的搜索可能会失败，并且像这样的搜索字符串也可能会失败。使用箭头键在这样的数据中移动需要（正确地）额外的按键来移动你看不到的字符，如果用户注意到的话，这对用户来说有点奇怪。

在封闭系统中，您可以在输入时过滤掉该字符以保护自己，但这对其他程序和系统没有帮助。

总而言之，这种技术效果很好，但我不确定什么是破坏角色的最佳选择。

**更新 3：**让这个字符最终出现在数据中不再是理论上的可能性，而是一个观察到的问题。用户提交从屏幕上复制的数据，它被保存在数据库中，搜索中断，事情排序奇怪等等。

我们做了两件事：

1.  编写了一个实用程序，将它们从该应用程序的所有数据源中所有表的所有列中删除。
2.  添加了过滤以将其删除到我们的标准字符串输入处理器中，因此在任何代码看到它时它就消失了。

这很有效，技术本身也很有效，但这是一个警示故事。

**更新 4：**我们在提供给它的数据可能是 HTML 转义的上下文中使用它。在适当的情况下，它可以在 HTML 实体的中间插入零宽度的空格，从而获得时髦的结果。

修复是在我们不中断的字符列表中添加＆符号，如下所示：

```
var longRunsRegex = cachedRegex('([^&\\s\\.\/\\,_@\\|-]{' + position + '})(?=[^&\\s\\.\/\\,_@\\|-])', 'g'); 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2010-08-11T14:36:51.553

需要设置“表格布局：固定”才能使自动换行工作

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-11-26T11:37:55.947

> HYPHENATOR 是正确的答案（如上所示）。您的问题背后的真正问题是网络浏览器（在 2008 年）仍然非常原始，它们没有连字符功能。看，我们仍处于计算机使用的早期阶段——我们必须要有耐心。只要设计师统治网络世界，我们将很难等待一些真正有用的新功能。

更新：截至 2011 年 12 月，我们现在有了另一种选择，即 FF 和 Safari 中对这些标签的新兴支持：

```
p {
    -webkit-hyphens: auto;
    -moz-hyphens: auto;
    hyphens: auto;
} 
```

我已经完成了一些基本测试，它似乎可以在最新版本的 Mobile Safari 和 Safari 5.1.1 上运行。

兼容性表：[https ://developer.mozilla.org/en/CSS/hyphens#AutoCompatibilityTable](https://developer.mozilla.org/en/CSS/hyphens#AutoCompatibilityTable)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2013-07-12T22:38:16.827

为了与 IE 8+ 兼容，请使用：

```
-ms-word-break: break-all;
     word-break: break-all;

     /* Non standard for webkit */
     word-break: break-word;

-webkit-hyphens: auto;
   -moz-hyphens: auto;
        hyphens: auto; 
```

在这里查看[http://css-tricks.com/snippets/css/prevent-long-urls-from-break-out-of-container/](http://css-tricks.com/snippets/css/prevent-long-urls-from-breaking-out-of-container/)

我所要做的就是将其应用于具有设定宽度的 div 容器的样式。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2014-11-20T16:19:44.903

```
p {
    overflow-wrap: break-word;
}

@-moz-document url-prefix() { 
    p {
        white-space: -moz-pre-wrap;
        word-wrap: break-word;
    }
} 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2016-01-07T09:10:51.407

**用这个**

```
word-wrap: break-word;
overflow-wrap: break-word;
word-break: break-all; 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-03-31T20:58:40.597

是的，如果可能的话，设置绝对宽度和设置`overflow : auto`效果很好。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2009-05-21T00:26:28.237

如果你有这个 -

```
 <style type="text/css">
      .cell {
            float: left;
            width: 100px;
            border: 1px solid;
            line-height: 1em;
      }
  </style>

  <div class="cell">TopLeft</div>
  <div class="cell">TopMiddlePlusSomeOtherTextWhichMakesItToLong</div>
  <div class="cell">TopRight</div>
  <br/>
  <div class="cell">BottomLeft</div>
  <div class="cell">BottomMiddle</div>
  <div class="cell">bottomRight</div> 
```

只需切换到包含 div 的垂直格式，并在 CSS 中使用 min-width 而不是 width -

```
 <style type="text/css">
      .column {
            float: left;
            min-width: 100px;
      }
      .cell2 {
            border: 1px solid;
            line-height: 1em;
      }
  </style>

  <div class="column">
      <div class="cell2">TopLeft</div>
      <div class="cell2">BottomLeft</div>
  </div>
  <div class="column">
      <div class="cell2">TopMiddlePlusSomeOtherTextWhichMakesItToLong</div>
      <div class="cell2">BottomMiddle</div>
  </div>
  <div class="column">
      <div class="cell2">TopRight</div>
      <div class="cell2">bottomRight</div>
  </div>
  <br/> 
```

当然，如果您要显示真正的表格数据，则可以使用真正的表格，因为它在语义上是正确的，并且会通知人们使用应该在表格中的屏幕阅读器。它正在将它们用于一般布局或图像切片，人们会为此而私刑。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2014-06-11T08:25:59.220

我必须执行以下操作，因为如果未按正确顺序声明属性，它会在错误的位置随机破坏单词并且不添加连字符。

```
 -moz-white-space: pre-wrap;
white-space: pre-wrap;        
    hyphens: auto;
    -ms-word-break: break-all;
    -ms-word-wrap: break-all;
    -webkit-word-break: break-word;
    -webkit-word-wrap: break-word;
word-break: break-word;
word-wrap: break-word;
    -webkit-hyphens: auto;
    -moz-hyphens: auto;
    -ms-hyphens: auto;
hyphens: auto; 
```

最初由 Enigmo 发布：[https ://stackoverflow.com/a/14191114](https://stackoverflow.com/a/14191114)

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2010-04-17T20:24:18.570

"word-wrap: break-word" 适用于 Firefox 3.5 [http://hacks.mozilla.org/2009/06/word-wrap/](http://hacks.mozilla.org/2009/06/word-wrap/)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2013-06-02T13:17:20.650

在所有的单词换行和中断之后，保留你的溢出，看看这是否能解决你的问题。只需将 div 的显示更改为：`display: inline;`

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2014-05-15T19:14:06.633

将此添加到`css`您的 div 中：`word-wrap: break-word;`

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2013-09-30T00:01:05.147

一个简单的函数（需要 underscore.js）——基于 @porneL 的回答

```
 String.prototype.shyBreakString = function(maxLength) {
        var shystring = [];
        _.each(this.split(' '), function(word){
            shystring.push(_.chop(word, maxLength).join('&shy;'));
        });
        return shystring.join(' ');
    }; 
```

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2017-11-15T17:08:42.787

我编写了一个很好用的函数，它可以`&shy;`在单词中插入 x 字母以实现良好的换行。这里的所有答案都不支持所有浏览器和设备，但使用 PHP 效果很好：

```
/**
 * Add line-break to text x characters in
 * @param  string  $text          
 * @param  integer $characters_in 
 * @return string                 
 */
function line_break_text($text, $characters_in = 10) {

    $split = explode(' ', $text);

    if ( ! empty($split)) {

        foreach ($split as $key => $var) {

            if ( strlen($var) > $characters_in ) {

                $split[$key] = substr_replace($var, '&shy;', $characters_in, 0);

            }

        }

    }

    return implode(' ', $split);

} 
```

# c# - 我们可以在 MonoRail 中的不同操作上使用带扩展名和不带扩展名吗？

> ID：320189
> 
> 赞同：3
> 
> 时间：2008-11-26T09:58:17.020
> 
> 标签：c#, url, castle-monorail

我想在 Castle MonoRail 上构建一个 Web 应用程序，我想知道我们如何使用一个带有扩展的动作和另一个没有扩展的动作？如何为我们提供 HTML 助手生成器 url？

前任：

*   [http://mysite.com/Products/list](http://mysite.com/Products/list)
*   [http://mysite.com/Products/abc.castle](http://mysite.com/Products/abc.castle)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T04:08:11.257

答案是**肯定**的，你可以，通过使用路由。使路由正常工作所需使用的确切方法取决于您使用的 Monorail 版本。但是，除非您小心，否则添加路由可能会对性能产生一些负面影响。

还值得注意的是，您不必使用扩展名“.castle”或“.rails”，以防这对您不利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-24T01:27:13.327

您可以尝试创建一个路由角色，例如

```
/<controller>/<action>.castle 
```

它会成功的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T18:34:02.033

我认为没有必要这样做。为什么要在不使用 .rails 或 .castle 的情况下访问操作？

# javascript - 如何将 IE 脚本调试器从 MS Script Debugger 更改为 VS 2005

> ID：320191
> 
> 赞同：0
> 
> 时间：2008-11-26T09:58:47.567
> 
> 标签：javascript, internet-explorer, visual-studio-2005, debugging

我安装了 Microsoft Script 调试器并选择（somwhere）作为 IE 的脚本调试器。我想让 VS 成为默认的脚本调试器。当我卸载 MS Script 调试器时，IE 不会在出现 javascript 错误时启动任何调试器。

那么如何回到 VS 作为我的默认 IE 脚本调试器呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-26T10:13:59.750

刚刚在[这篇博](http://www.west-wind.com/Weblog/posts/7403.aspx)文中找到了答案。

因此，要让 VS 恢复为您的默认调试器，您必须在 VS 中打开工具 -> 选项 -> 调试 -> 及时并检查“脚本”。

# mysql - 在 Rails 中支持外键约束

> ID：320194
> 
> 赞同：9
> 
> 时间：2008-11-26T10:00:48.920
> 
> 标签：mysql, ruby-on-rails, foreign-keys

在 Ruby on Rails 中，如何在迁移中添加外键约束？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-11-22T08:25:21.273

这是一个基于 gem 的解决方案，包括对添加和删除外键约束的支持，在 sqlite 上不会失败，并且可以与 schema.rb 文件一起正常工作：

[http://github.com/matthuhiggins/foreigner](http://github.com/matthuhiggins/foreigner)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-04-09T21:24:34.010

这是 matthuhiggins-foreigner gem 的更新：http: [//github.com/sparkfly/foreigner](http://github.com/sparkfly/foreigner)

特征：

*   rspec 覆盖率，针对 PostgreSQL 8.3.9 和 MySQL 5.0.90 进行测试
*   迁移支持
*   schema.rb 支持

未来的版本将包括 PostgreSQL 的 CHECK 约束，这是实现多表继承所必需的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-26T11:53:23.840

AFAIK，没有任何内置支持，但有[几个插件](http://agilewebdevelopment.com/plugins/search?q=foreign+keys)可以帮助你。您也可以手动将它们添加到您的迁移文件中，只需为此使用 execute 方法，例如（来自 Rails API 的示例）：

```
 class MakeJoinUnique < ActiveRecord::Migration
    def self.up
      execute "ALTER TABLE `pages_linked_pages` ADD UNIQUE `page_id_linked_page_id` (`page_id`,`linked_page_id`)"
    end

    def self.down
      execute "ALTER TABLE `pages_linked_pages` DROP INDEX `page_id_linked_page_id`"
    end
  end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-08-16T08:05:24.610

添加以下内容是否足够，例如使用`Products`和`User`模型？

`add_index :products, :user_id`

# nhibernate - Nhibernate ValueType 集合作为 DB 中的分隔字符串

> ID：320195
> 
> 赞同：2
> 
> 时间：2008-11-26T10:01:47.403
> 
> 标签：nhibernate, nhibernate-mapping

我有一个使用 Nhibernate 映射的遗留数据库。并且在几个位置，列表 och 字符串或域对象被映射为数据库中的分隔字符串。值类型案例中的“string|string|string”和引用类型案例中的“domainID|domainID|domainID”。

我知道我可以在类上创建一个虚拟属性并映射到该字段，但我想以一种更简洁的方式来完成它，例如使用[EnumStringType](http://codebetter.com/blogs/jeffrey.palermo/archive/2006/03/14/140949.aspx)类将 Enums 映射为其字符串表示形式时。

IUserType 是去这里的方式吗？

提前致谢/约翰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-27T13:28:00.890

I am using this:

```
public class DelimitedList : IUserType
{
    private const string delimiter = "|";

    public new bool Equals(object x, object y)
    {
        return object.Equals(x, y);
    }

    public int GetHashCode(object x)
    {
        return x.GetHashCode();
    }

    public object NullSafeGet(IDataReader rs, string[] names, object owner)
    {
        var r = rs[names[0]];
        return r == DBNull.Value 
            ? new List<string>()
            : ((string)r).SplitAndTrim(new [] { delimiter });
    }

    public void NullSafeSet(IDbCommand cmd, object value, int index)
    {
        object paramVal = DBNull.Value;
        if (value != null)
        {
            paramVal = ((IEnumerable<string>)value).Join(delimiter);
        }
        var parameter = (IDataParameter)cmd.Parameters[index];
        parameter.Value = paramVal;
    }

    public object DeepCopy(object value)
    {
        return value;
    }

    public object Replace(object original, object target, object owner)
    {
        return original;
    }

    public object Assemble(object cached, object owner)
    {
        return cached;
    }

    public object Disassemble(object value)
    {
        return value;
    }

    public SqlType[] SqlTypes
    {
        get { return new SqlType[] { new StringSqlType() }; }
    }

    public Type ReturnedType
    {
        get { return typeof(IList<string>); }
    }

    public bool IsMutable
    {
        get { return false; }
    }
} 
```

SplitAndTrim is my own extension of string. Then in the class (using ActiveRecord for mapping):

```
[Property(ColumnType = "My.Common.Repository.UserTypes.DelimitedList, My.Common.Repository")]
public virtual IList<string> FooBar { get; set; } 
```

# asp.net - 在数据库完整性方面需要帮助

> ID：320199
> 
> 赞同：-3
> 
> 时间：2008-11-26T10:04:59.583
> 
> 标签：asp.net, c++, sql-server

我需要帮助从 asp.net 2.0 和 c++ 执行一个 bat 文件。

如何将运行时 Sql Server2000 数据导入 Oracle 9i？

如何管理项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T17:35:44.837

Oracle 和 SQL 可以讨论复制/订阅。否则，您可以使用标准 SSIS/ETL 方法，例如 BCP、SQLLDR 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T10:09:48.137

这是一个真正的问题组合

尝试在不同的问题中更加具体和/或分开

# java - 如何访问 JFrame 中的多个 JPanel？

> ID：320204
> 
> 赞同：2
> 
> 时间：2008-11-26T10:08:01.400
> 
> 标签：java, design-patterns, swing, controller, jpanel

我有一个`JFrame`包含一个“显示”`JPanel`和`JTextField`一个“控件” `JPanel`，其中包含应该访问显示内容的按钮`JPanel`。我认为我的问题与如何使用观察者模式有关，原则上我理解。您需要放置侦听器并更新消息，但我不知道将这些放在哪里，如何从一个面板访问另一个面板，并且可能在必要时引入“数据模型”类。例如，我想`JTextField`从控制面板访问内容，并使用匿名操作侦听器，如下所示：

```
JButton openfile = new JButton("Convert file");
openfile.addActionListener(new ActionListener() { 
    public void actionPerformed(ActionEvent e) { 
        openButtonPressed();
    }           
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T11:30:53.153

如果您在一层中创建模型并在上面添加一两层来创建组件和布局，它确实会使代码更清晰。当然不要扩展 and 之类`JFrame`的`JPanel`。

不要觉得需要让模型层中的合成层次与显示完全匹配。然后只需从 中获取文本`Document`并执行相关操作即可。

好吧，也许没那么简单。摇摆模型有点乱。尤其是 ButtonModel 是脑残，控制器区域的代码可能不完全纯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-28T08:26:54.973

你需要减少这些对象之间的耦合。

您可以拥有一个拥有所有文本字段和按钮的主对象（面板无关紧要）

然后是该主对象中的一个单独的 actionlistener（我称它为中介者，见中介者模式）

该动作侦听器在中介上执行一个方法，该方法反过来从文本字段中获取值并可能创建一个传输对象。

通过这种方式，您可以减少面板、文本字段等之间的耦合，并将控件放在一个地方（中介），也就是说，您不会让它们彼此认识。

你可以看看这个问题中的代码： [https ://stackoverflow.com/questions/324554/#324559](https://stackoverflow.com/questions/324554/#324559)

它在运行代码中显示了这些概念。

顺便说一句，观察者模式已经在 J​​TextField、JButton、ActionListener 等中实现。您只需要添加钩子。

我希望这有帮助。

**编辑**将两个答案合二为一。

这是代码。

```
class App { // this is the mediator

    // GUI components.
    private JFrame frame;
    private JTextField name;
    private JTextField count;
    private JTextField date;
    // Result is displayed here.
    private JTextArea textArea;

    // Fired by this button.
    private JButton   go;

    private ActionListener actionListener;

    public App(){
        actionListener = new ActionListener(){
            public void actionPerformed( ActionEvent e ){
                okButtonPressed();
            }
        };
    }

    private void okButtonPressed(){
         // template is an object irrelevant to this code.
         template.setData( getData() );
         textArea.setText( template.getTransformedData() );
    }

    public void initialize(){

        frame     = new JFrame("Code challenge v0.1");
        frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );

        name     = new JTextField();
        count    = new JTextField();
        date     = new JTextField();
        textArea = new JTextArea();
        go       = new JButton("Go");
        go.addActionListener( actionListener ); // prepare the button.

        layoutComponents(); // a lot of panels are created here. Irrelevant.
    }
} 
```

可以在[此处检索完整且正在运行的代码：](https://stackoverflow.com/questions/324554/#324559)

在可能的情况下，优先考虑组合而不是继承是很重要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T12:13:22.787

我们有所谓的构建器，它将从子面板中构建父面板。在这个构建器中，您将可以访问您需要收听的所有子组件，因此可以在那里实现任何逻辑。

最后，构建器将返回具有完整逻辑的父面板。

一旦你有了父面板，到子组件并让他们做任何事情真的是一团糟。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T14:49:20.617

谢谢。我添加了一个数据模型层，它以某种方式处理面板之间的通信。

我还在 JTextField 上的 Listeners 上发现此链接很有用：

[链接文本](http://www.velocityreviews.com/forums/t136479-jtextfield-cant-listen-when-the-text-is-changed.html)

# wpf - WPF Office 2007 主题

> ID：320208
> 
> 赞同：2
> 
> 时间：2008-11-26T10:10:20.693
> 
> 标签：wpf, ms-office, themes

除了 PersentationFrameWork.Aero、PersentationFrameWork.Luna、PersentationFrameWork.Royale 和 PersentationFrameWork.Classic 中提供的默认主题之外，微软是否还有其他 WPF 主题

我对 Office 2007 蓝色主题特别感兴趣

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T10:28:19.783

如果您碰巧有[Infragistics NetAdvantage](http://www.infragistics.com/dotnet/netadvantage/wpf.aspx#Overview)：它有一些 Office 2007 主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-04T14:54:07.140

[此链接](http://dotnet.org.za/rudi/archive/2008/11/06/wpf-themes-released.aspx)中有一些主题是从 Silverlight 转换而来的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-16T09:15:38.107

您可能想试试 www.reuxables.com - 我们既有商业主题也有免费主题，它是 WPF 最大和最多样化的主题库。

# database - 是否有标准的电子商务数据库架构来将折扣/税收/礼券应用于产品？

> ID：320211
> 
> 赞同：27
> 
> 时间：2008-11-26T10:12:04.280
> 
> 标签：database, e-commerce

需要一个良好且灵活的数据库模式来说明电子商务产品及其费率管理。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2009-01-03T23:47:34.897

我同意 Chris Roberts 的观点，[OSCommerce和](http://www.oscommerce.com/community/contributions,3853/page,23)[DatabaseAnswers.org](http://www.databaseanswers.org/data_models/index.htm)都是一个很好的起点。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T10:20:29.630

我敢肯定有很多关于 - 尝试查看一些开源购物车工具的示例。

不过，总的来说，我认为产品定价和折扣/礼券系统*可以*通过多种方式发挥作用，因此不太可能找到适用于*所有*可能性的数据库模式！

也许您可以通过稍微改进需求来为自己节省一些心痛？

# c# - 运行时切换数据模板——刷新问题

> ID：320219
> 
> 赞同：4
> 
> 时间：2008-11-26T10:15:07.220
> 
> 标签：c#, wpf, datatemplate, skinning

我使用 MVVM 架构来解耦我的应用程序。也就是说，你经常看到类似的东西

```
var u = new UserControl();
u.Content = new MyCustomType(); // MyCustomType is not a control 
```

UI 是通过驻留在其自己的 XAML 文件中的资源字典中的数据模板定义的

```
<ResourceDictionary ...>
    <DataTemplate DataType="{x:Type local:MyCustomType}">
        ... 
```

我在应用程序启动时加载资源，应用程序很乐意显示我的 UI。但是如果我删除一个数据模板并添加一个新的（相同的键，相同的数据类型），UI 仍然使用旧的数据模板。当然，我可以重新设置容器的内容以强制刷新，但这似乎很愚蠢，因为我必须通知每个控件有关更改，就像这样

```
var tmp = control.Content;
control.Content = null;
control.Content = tmp; // New data template will be used 
```

还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-26T10:40:40.307

这是因为资源在您的字典中是静态的。一旦它们被使用，它们将不会被更新。您可以尝试重新加载字典，但这只会更新新控件，而不是旧控件..

如果您希望支持多个 DataTemplates，您可以考虑 DataTemplateSelector 类，它将根据您的条件选择一个模板：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)

如果您需要“即时”切换模板，您始终可以考虑使用 ControlTemplates 和控件的模板属性绑定...

```
{Binding Converter={StaticResource YourAwesomeTemplateSwitcherConverter}} 
```

高温高压

# java - 组合的通用边界是反模式吗？

> ID：320222
> 
> 赞同：2
> 
> 时间：2008-11-26T10:17:14.283
> 
> 标签：java, generics, interface, anti-patterns

[作为对我之前的问题](https://stackoverflow.com/questions/318208/cast-to-combined-generic)的跟进 具有组合通用边界的函数，例如：

```
<T extends Foo & Bar> void doStuff(T argument) {
  //do stuff wich should only be done if arguments is both foo and bar
} 
```

因为这不能从未指定的对象转换，所以您需要了解一些实际实现这些接口的对象。在我看来，需要知道要传递给的对象参数的具体类型`doStuff(T a)`违反了得墨忒耳定律。

该函数没有指定需要知道实际的类（可能有很多不同的类），我真的不想知道它，因为知道这个类会增加我代码库中的依赖性。

使用这些界限是一种反模式吗？如果是这样，一个人应该如何最好地避免它？

案例场景涉及一个指定对象的接口是持久的，而另一个指定的对象具有相关实体。这种情况下的`doStuff(T a)`函数在相关实体被持久化时会持久化。但是，非持久实体也可以有相关实体，但不应由`doStuff(T a)`函数处理

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-26T10:39:27.127

我不会认为组合的通用边界是反模式。至少我在我的代码中有一些用途。例如，以下示例代码使用 Comparable 接口中的 compareTo 查找集合中最大的 Number 实例：

```
<T extends Number & Comparable<T>> T max(Collection<T> numbers) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T11:06:08.413

> 在我看来，需要知道传递给 doStuff(T a) 的对象参数的具体类型违反了得墨忒耳定律

我不同意。我不明白如何

```
T<? extends Foo & Bar> void doStuff(T argument) 
```

需要更多的论据知识才能通过

```
T<? extends Foo> void doStuff(T argument) 
```

甚至更多

```
void doStuff(T argument) 
```

在所有情况下，您都需要对参数有所了解，我认为第一种情况不需要比其他情况更多的知识，因为它有两个标识符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T11:19:13.053

反模式是铸造。

然而，花哨的泛型步法可能会让非高级程序员感到困惑。这种类型和方法的使用应该比它们的实现容易得多。

# python - 确保子进程在退出 Python 程序时死亡

> ID：320232
> 
> 赞同：75
> 
> 时间：2008-11-26T10:21:21.467
> 
> 标签：python, subprocess, kill, zombie-process

有没有办法确保所有创建的子进程在 Python 程序退出时都死了？我所说的子进程是指用 subprocess.Popen() 创建的那些。

如果不是，我应该遍历所有发出的杀戮然后杀死-9吗？有什么更清洁的吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2008-11-26T13:36:39.857

您可以为此使用[**atexit**](http://docs.python.org/library/atexit.html)，并注册任何要在程序退出时运行的清理任务。

**atexit.register(func[, *args[, **kargs]])**

在您的清理过程中，您还可以实现自己的等待，并在发生所需的超时时将其终止。

```
>>> import atexit
>>> import sys
>>> import time
>>> 
>>> 
>>>
>>> def cleanup():
...     timeout_sec = 5
...     for p in all_processes: # list of your processes
...         p_sec = 0
...         for second in range(timeout_sec):
...             if p.poll() == None:
...                 time.sleep(1)
...                 p_sec += 1
...         if p_sec >= timeout_sec:
...             p.kill() # supported from python 2.6
...     print 'cleaned up!'
...
>>>
>>> atexit.register(cleanup)
>>>
>>> sys.exit()
cleaned up! 
```

**注意**——如果这个进程（父进程）被杀死，注册的函数将不会运行。

**python >= 2.6不再需要以下windows方法**

这是一种杀死windows中进程的方法。您的 Popen 对象具有 pid 属性，因此您可以通过**success = win_kill(p.pid)**调用它（需要安装[pywin32](http://sourceforge.net/projects/pywin32/)）：

```
 def win_kill(pid):
        '''kill a process by specified PID in windows'''
        import win32api
        import win32con

        hProc = None
        try:
            hProc = win32api.OpenProcess(win32con.PROCESS_TERMINATE, 0, pid)
            win32api.TerminateProcess(hProc, 0)
        except Exception:
            return False
        finally:
            if hProc != None:
                hProc.Close()

        return True 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2008-11-26T22:02:49.697

在 *nix 上，也许使用进程组可以帮助你——你也可以捕获由子进程产生的子进程。

```
if __name__ == "__main__":
  os.setpgrp() # create new process group, become its leader
  try:
    # some code
  finally:
    os.killpg(0, signal.SIGKILL) # kill all processes in my group 
```

另一个考虑因素是升级信号：从 SIGTERM（默认信号`kill`）到 SIGKILL（又名`kill -9`）。在信号之间稍等片刻，让进程有机会在你之前干净地退出`kill -9`。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2008-11-26T10:56:21.287

只有`subprocess.Popen.wait()`这样才能保证他们已经死了。事实上，POSIX 操作系统要求您等待您的孩子。许多*nix 将创建一个“僵尸”进程：父母没有等待的死去的孩子。

如果孩子写得相当好，它就会终止。通常，孩子们会从 PIPE 中阅读。关闭输入对孩子来说是一个很大的提示，它应该关闭商店并退出。

如果孩子有错误并且没有终止，您可能必须杀死它。你应该修复这个错误。

如果孩子是一个“永远服务”的循环，并且不是为了终止而设计的，你应该杀死它或者提供一些输入或消息来强制它终止。

* * *

编辑。

在标准操作系统中，您拥有`os.kill( PID, 9 )`. 顺便说一句，杀死 -9 很苛刻。如果您可以使用 SIGABRT (6?) 或 SIGTERM (15) 杀死它们，那就更有礼貌了。

在 Windows 操作系统中，你没有一个`os.kill`可以工作的。查看此[ActiveState Recipe](http://code.activestate.com/recipes/347462/)以终止 Windows 中的进程。

我们有作为 WSGI 服务器的子进程。为了终止它们，我们在一个特殊的 URL 上执行 GET；这会导致孩子清理并退出。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-04-01T03:23:26.857

找出linux的解决方案（不安装prctl）：

```
def _set_pdeathsig(sig=signal.SIGTERM):
    """help function to ensure once parent process exits, its childrent processes will automatically die
    """
    def callable():
        libc = ctypes.CDLL("libc.so.6")
        return libc.prctl(1, sig)
    return callable

subprocess.Popen(your_command, preexec_fn=_set_pdeathsig(signal.SIGTERM)) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-12-04T13:59:25.873

警告：仅限 Linux！您可以让您的孩子在父母去世时收到信号。

首先安装 python-prctl==1.5.0 然后更改您的父代码以启动您的子进程，如下所示

```
subprocess.Popen(["sleep", "100"], preexec_fn=lambda: prctl.set_pdeathsig(signal.SIGKILL)) 
```

这说明了什么：

*   启动子进程：sleep 100
*   在分叉和执行子进程之前，子进程注册“当我的父母终止时向我发送 SIGKILL”。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-03-22T19:46:18.043

我需要这个问题的一个小变化（清理子进程，但不退出 Python 程序本身），因为它没有在其他答案中提到：

```
p=subprocess.Popen(your_command, preexec_fn=os.setsid)
os.killpg(os.getpgid(p.pid), 15) 
```

`setsid`将在新会话中运行程序，从而为它及其子进程分配一个新进程组。因此调用`os.killpg`它也不会降低你自己的 python 进程。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-01-08T02:17:07.820

orip 的答案很有帮助，但缺点是它会杀死您的进程并返回您的父级错误代码。我避免这样：

```
class CleanChildProcesses:
  def __enter__(self):
    os.setpgrp() # create new process group, become its leader
  def __exit__(self, type, value, traceback):
    try:
      os.killpg(0, signal.SIGINT) # kill all processes in my group
    except KeyboardInterrupt:
      # SIGINT is delievered to this process as well as the child processes.
      # Ignore it so that the existing exception, if any, is returned. This
      # leaves us with a clean exit code if there was no exception.
      pass 
```

进而：

```
 with CleanChildProcesses():
    # Do your work here 
```

当然，您可以使用 try/except/finally 来执行此操作，但您必须分别处理异常和非异常情况。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-11-26T10:32:24.970

> 民意调查( )
> 
> 检查子进程是否已终止。返回返回码属性。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-02-22T22:17:02.460

Windows 的解决方案可能是使用 win32 作业 api，例如[如何在 Windows 中自动销毁子进程？](https://stackoverflow.com/questions/53208/how-do-i-automatically-destroy-child-processes-in-windows)

这是一个现有的python实现

[https://gist.github.com/ubershmekel/119697afba2eaecc6330](https://gist.github.com/ubershmekel/119697afba2eaecc6330)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-11-26T10:54:03.553

> 有没有办法确保所有创建的子进程在 Python 程序退出时都死了？我所说的子进程是指用 subprocess.Popen() 创建的那些。

您可能会违反封装并*测试*所有 Popen 进程是否已通过执行终止

```
subprocess._cleanup()
print subprocess._active == [] 
```

> 如果不是，我应该遍历所有发出的杀戮然后杀死-9吗？有什么更清洁的吗？

如果不出去杀死每个幸存者，就无法确保所有子进程都死了。但是如果你有这个问题，那很可能是因为你有更深层次的设计问题。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-12-29T14:39:15.580

我实际上需要这样做，但它涉及运行远程命令。我们希望能够通过关闭与服务器的连接来停止进程。此外，例如，如果您在 python repl 中运行，如果您希望能够使用 Ctrl-C 退出，则可以选择作为前台运行。

```
import os, signal, time

class CleanChildProcesses:
    """
    with CleanChildProcesses():
        Do work here
    """
    def __init__(self, time_to_die=5, foreground=False):
        self.time_to_die = time_to_die  # how long to give children to die before SIGKILL
        self.foreground = foreground  # If user wants to receive Ctrl-C
        self.is_foreground = False
        self.SIGNALS = (signal.SIGHUP, signal.SIGTERM, signal.SIGABRT, signal.SIGALRM, signal.SIGPIPE)
        self.is_stopped = True  # only call stop once (catch signal xor exiting 'with')

    def _run_as_foreground(self):
        if not self.foreground:
            return False
        try:
            fd = os.open(os.ctermid(), os.O_RDWR)
        except OSError:
            # Happens if process not run from terminal (tty, pty)
            return False

        os.close(fd)
        return True

    def _signal_hdlr(self, sig, framte):
        self.__exit__(None, None, None)

    def start(self):
        self.is_stopped = False
        """
        When running out of remote shell, SIGHUP is only sent to the session
        leader normally, the remote shell, so we need to make sure we are sent 
        SIGHUP. This also allows us not to kill ourselves with SIGKILL.
        - A process group is called orphaned when the parent of every member is 
            either in the process group or outside the session. In particular, 
            the process group of the session leader is always orphaned.
        - If termination of a process causes a process group to become orphaned, 
            and some member is stopped, then all are sent first SIGHUP and then 
            SIGCONT.
        consider: prctl.set_pdeathsig(signal.SIGTERM)
        """
        self.childpid = os.fork()  # return 0 in the child branch, and the childpid in the parent branch
        if self.childpid == 0:
            try:
                os.setpgrp()  # create new process group, become its leader
                os.kill(os.getpid(), signal.SIGSTOP)  # child fork stops itself
            finally:
                os._exit(0)  # shut down without going to __exit__

        os.waitpid(self.childpid, os.WUNTRACED)  # wait until child stopped after it created the process group
        os.setpgid(0, self.childpid)  # join child's group

        if self._run_as_foreground():
            hdlr = signal.signal(signal.SIGTTOU, signal.SIG_IGN)  # ignore since would cause this process to stop
            self.controlling_terminal = os.open(os.ctermid(), os.O_RDWR)
            self.orig_fore_pg = os.tcgetpgrp(self.controlling_terminal)  # sends SIGTTOU to this process
            os.tcsetpgrp(self.controlling_terminal, self.childpid)
            signal.signal(signal.SIGTTOU, hdlr)
            self.is_foreground = True

        self.exit_signals = dict((s, signal.signal(s, self._signal_hdlr))
                                 for s in self.SIGNALS)                                     

    def stop(self):
        try:
            for s in self.SIGNALS:
                #don't get interrupted while cleaning everything up
                signal.signal(s, signal.SIG_IGN)

            self.is_stopped = True

            if self.is_foreground:
                os.tcsetpgrp(self.controlling_terminal, self.orig_fore_pg)
                os.close(self.controlling_terminal)
                self.is_foreground = False

            try:
                os.kill(self.childpid, signal.SIGCONT)
            except OSError:
                """
                can occur if process finished and one of:
                - was reaped by another process
                - if parent explicitly ignored SIGCHLD
                    signal.signal(signal.SIGCHLD, signal.SIG_IGN)
                - parent has the SA_NOCLDWAIT flag set 
                """
                pass

            os.setpgrp()  # leave the child's process group so I won't get signals
            try:
                os.killpg(self.childpid, signal.SIGINT)
                time.sleep(self.time_to_die)  # let processes end gracefully
                os.killpg(self.childpid, signal.SIGKILL)  # In case process gets stuck while dying
                os.waitpid(self.childpid, 0)  # reap Zombie child process
            except OSError as e:
                pass
        finally:
            for s, hdlr in self.exit_signals.iteritems():
                signal.signal(s, hdlr)  # reset default handlers

    def __enter__(self):
        if self.is_stopped:
            self.start()

    def __exit__(self, exit_type, value, traceback):
        if not self.is_stopped:
            self.stop() 
```

感谢 Malcolm Handley 的初始设计。在linux上用python2.7完成。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-10-12T11:33:43.833

你可以试试`subalive`，我为类似问题写的一个包。它通过 RPC 使用周期性的存活 ping，当主进程由于某种原因停止存活 ping 时，从进程自动终止。

[https://github.com/waszil/subalive](https://github.com/waszil/subalive)

大师的例子：

```
from subalive import SubAliveMaster

# start subprocess with alive keeping
SubAliveMaster(<path to your slave script>)

# do your stuff
# ... 
```

从属子进程的示例：

```
from subalive import SubAliveSlave

# start alive checking
SubAliveSlave()

# do your stuff
# ... 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2008-11-26T11:39:11.123

这就是我为我的 posix 应用程序所做的：

当您的应用程序存在时，调用此类的 kill() 方法： [http ://www.pixelbeat.org/libs/subProcess.py](http://www.pixelbeat.org/libs/subProcess.py)

此处使用示例： [http ://code.google.com/p/fslint/source/browse/trunk/fslint-gui#608](http://code.google.com/p/fslint/source/browse/trunk/fslint-gui#608)

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2012-03-06T05:48:02.733

python代码帮助： http: [//docs.python.org/dev/library/subprocess.html#subprocess.Popen.wait](http://docs.python.org/dev/library/subprocess.html#subprocess.Popen.wait)

# testing - 当您到达迭代结束并且测试尚未完成时，您会怎么做？

> ID：320234
> 
> 赞同：3
> 
> 时间：2008-11-26T10:22:10.843
> 
> 标签：testing, agile

我们正在尝试遵循我工作的软件开发的敏捷方法。到目前为止它运行良好，但是，在迭代结束时，我们遇到了构建问题，并且花费了一天的时间来修复：应该专门用于测试的时间。

结果，我们的 QA 没有足够的时间在迭代结束之前完成测试。您如何处理这种情况——在迭代过程中不可预见的问题会影响任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T10:28:42.250

这取决于您的 QA 的安排——您是否可以让他们在开发人员已经在进行下一次迭代时继续测试？

如果是，我会让他们完成测试。
只需使用您已经拥有的数据继续下一次迭代。您真的不想因为一个瓶颈而阻止许多人。您可以在下一次迭代中增加一点额外的时间来修复尚未报告的错误，方法是为每个开发人员分配比完整迭代的价值略少的工作。

如果不是，只需像任何正常迭代一样计划下一次迭代，并像以前一样在迭代结束时进行测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T10:45:15.243

如果您无法以约定的方式测试迭代输出，我们通常会为 sprint 取零分（或任何可以测试的点）。当时感觉很艰难，但事实证明这是一件明智的事情。

（项目的最后一个 sprint 显然是不同的）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-26T11:04:32.427

通过在您的开发和 QA 之间进行一次切换，您已经在迭代中创建了一个单点故障。由于没有及时交付给 QA，您已经让这个迭代溜走了一天。通过匆忙进行质量检查来弥补时间并不是解决办法。

您可以通过更频繁地向 QA 交付来改善这种情况，理想情况下，您应该在每次完成功能时都这样做。如果最后一次构建失败，QA 可以只测试以前的构建，您必须将自那时以来实现的功能移动到下一次迭代。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-26T17:00:27.777

敏捷规范是您仅将那些已完成的故事/积压项目计为已完成 - 通常您对已完成的定义应包括“正在测试”。因此，您根本不会因为尚未测试的故事而受到赞誉。毕竟，下一次迭代也可能出现类似的问题。

您对质量检查如何集成到您的流程中的问题并不完全清楚。一般来说，您应该确保错误无法逃脱 sprint，否则您的速度会变得非常不可靠。

# biztalk - BizTalk 同时接收期间发现意外数据错误

> ID：320243
> 
> 赞同：3
> 
> 时间：2008-11-26T10:28:30.033
> 
> 标签：biztalk

我有一个接收端口，其中两个 FILE 接收位置轮询同一个网络共享。接收位置之间的唯一区别是它们使用不同的文件掩码。它们都使用带有单个平面文件反汇编器组件的自定义管道。我有一个订阅接收端口的发送端口。（这只是我可以重现问题的最小设置）。

在处理一组文件（最大 1mb 大小）时，管道偶尔会抛出错误。仅当一次将多个文件复制到接收位置文件共享并且不定期发生时，才会发生这种情况。该错误通常为：

> 解析传入文档时出现错误：“查找时发现意外数据：'\r\n'当前正在解析的定义是GIRMFile。发生错误的流偏移量是491540。发生错误的行号是2446 . 发生错误的列是199。”。

检查所示行号处的挂起消息，始终有 512 字节的数据与传入消息不同。这 512 字节的数据始终与同时使用的其他输入文件之一的数据相匹配！或者在极少数情况下，不正确的 512 字节数据是来自同时使用但在管道处理之后的文件的数据（即暂停的平面文件具有 512 字节的 xml 块！）。这 512 个字节在挂起的消息中从未处于一致的位置。

认为 BizTalk 数据库以某种方式损坏，我将其删除并重新配置。成功处理了几百个文件后，问题又回来了。

这只发生在我们的测试盒（VMWare vm）上，所以我怀疑机器在某种程度上是问题所在。但是机器没有在其他进程中报告其他错误似乎很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T21:14:01.743

有趣 - 我记得在 BizTalk 2004 中看到过类似的东西，但在 BT2006 中没有看到类似的东西。

听起来管道可能会遇到线程问题 - 可能是由于从同一文件位置接收文件。

您是否尝试过任何高级文件接收位置属性？

我特别在想“阅读时重命名文件”复选框。也许如果问题出在非线程安全的流读取上，那么创建重命名文件的过程（我认为它只使用标准 IO 库）将允许 BizTalk 获得干净的流。

只是猜测 - 如果您找到解决方案，请报告！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-03T00:34:50.137

> 这仅发生在我们的测试盒（VMWare vm）上

如果您无法在另一台具有相同配置的机器上成功复制它，我会将其标记为非问题或外部问题。同意前面提到的并发问题的*可能性很小*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-06T13:38:42.300

我不得不说我觉得这很奇怪，我很难相信进入 BizTalk 的 5 年（从 2004 年算起 :-)），文件适配器和标准反汇编程序有线程问题。，

文件是否通过网络进入提取位置？你使用什么文件掩码？接收位置之一是否有可能在文件传输完成之前拾取文件？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-06T02:38:48.683

您说接收位置网络是网络共享-也许是网络问题？你能在本地驱动器上重现这个吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-02-17T15:27:29.717

在访问共享的 VMWare VM 上运行的程序也存在类似问题。由于某种原因，文件似乎已损坏。

这与 BizTalk 无关，它发生在内部开发的应用程序中。

重新启动 VM 可以暂时解决我们的问题。在我们的案例中，我们能够重新配置我们的流程以不使用共享。我们从来没有努力找到真正问题的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-20T16:11:25.320

还有一些想法……共享是 DFS 共享吗？你能把接收位置放在不同的主机上，看看会发生什么吗？

# ruby-on-rails - 迁移文件

> ID：320247
> 
> 赞同：0
> 
> 时间：2008-11-26T10:31:12.650
> 
> 标签：ruby-on-rails, migration

我在哪里可以下载国家、州和城市表的 Rails 迁移文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T11:45:37.820

寻找[ISO 3166](http://en.wikipedia.org/wiki/ISO_3166)。ISO 列表在[这里](http://www.iso.org/iso/country_codes/iso_3166_code_lists.htm)。

为了回避政治问题（中国 - 台湾等），国家选择现在不在 Rails 核心范围内，因此您需要一个插件，例如这个插件，为[您](http://www.restafari.org/localized-country-select.html)提供功能。

我从未听说过会用这些数据填充表的迁移。

# sql - sql - 使用聚合函数（最小值/最大值）作为选择语句的一部分

> ID：320250
> 
> 赞同：1
> 
> 时间：2008-11-26T10:31:42.057
> 
> 标签：sql, aggregate-functions

我正在尝试返回别墅预订系统的最低和最高价格。我有一个查找表，存储每个别墅每周的价格。

我在选择中使用 min 和 max 函数来执行此操作，但我遇到了很多问题。谁能解释我哪里出错了？这里是sp

```
ALTER PROCEDURE spVillaGet 
-- Add the parameters for the stored procedure here
@accomodationTypeFK int = null,
@regionFK int = null,
@arrivalDate datetime = null,
@numberOfNights int = null,
@sleeps int = null,
@priceFloor money = null,
@priceCeil money = null 
```

AS BEGIN -- 添加了 SET NOCOUNT ON 以防止额外的结果集 -- 干扰 SELECT 语句。设置无计数；

```
-- Insert statements for procedure here
SELECT tblVillas.name, 
       tblVillas.introduction,
       tblVillas.italian_introduction,
       tblVillas.uk_content,
       tblVillas.italian_content,
       tblVillas.sleeps,
       tblVillas.postcode,
       tblLkUpRegions.regionName,
       tblLkUpAccomodationTypes.accomodationType,
       MIN(price) As MinPrice,
       MAX(price) As MaxPrice

FROM tblVillas

LEFT JOIN tblLkUpRegions on tblVillas.regionFK = tblLkUpRegions.regionID
LEFT JOIN tblLkUpAccomodationTypes on tblVillas.accomodationTypeFK = tblLkUpAccomodationTypes.accomodationId    
LEFT JOIN tblWeeklyPrices on tblWeeklyPrices.villaFK = tblVillas.villaId

WHERE

    ((@accomodationTypeFK is null OR accomodationTypeFK = @accomodationTypeFK)
     AND (@regionFK is null OR regionFK = @regionFK)
     AND (@sleeps is null OR sleeps = @sleeps) 
     AND tblVillas.deleted = 0)

GROUP BY tblVillas.name 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T10:34:30.443

您没有详细说明您遇到了*什么*问题，但这可能是一个问题：您需要在 GROUP BY 子句中指定**所有**非聚合列，即：

```
GROUP BY tblVillas.name, 
       tblVillas.introduction,
       tblVillas.italian_introduction,
       tblVillas.uk_content,
       tblVillas.italian_content,
       tblVillas.sleeps,
       tblVillas.postcode,
       tblLkUpRegions.regionName,
       tblLkUpAccomodationTypes.accomodationType 
```

从您的后续评论中可以看出，您的某些列属于不能在 GROUP BY 子句中使用的数据类型。试试这个：

```
SELECT tblVillas.name, 
           tblVillas.introduction,
           tblVillas.italian_introduction,
           tblVillas.uk_content,
           tblVillas.italian_content,
           tblVillas.sleeps,
           tblVillas.postcode,
           tblLkUpRegions.regionName,
           tblLkUpAccomodationTypes.accomodationType,
           (SELECT MIN(price) FROM tblWeeklyPrices where tblWeeklyPrices.villaFK = tblVillas.villaId) As MinPrice,
           (SELECT MAX(price) FROM tblWeeklyPrices where tblWeeklyPrices.villaFK = tblVillas.villaId) As MaxPrice
FROM tblVillas
LEFT JOIN tblLkUpRegions on tblVillas.regionFK = tblLkUpRegions.regionID
LEFT JOIN tblLkUpAccomodationTypes on tblVillas.accomodationTypeFK = tblLkUpAccomodationTypes.accomodationId    
WHERE
        ((@accomodationTypeFK is null OR accomodationTypeFK = @accomodationTypeFK)
         AND (@regionFK is null OR regionFK = @regionFK)
         AND (@sleeps is null OR sleeps = @sleeps) 
         AND tblVillas.deleted = 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T10:47:58.123

谢谢你的帮助

当我分组并包括选择中的所有列时，除了两个函数之外，我收到以下错误

```
Msg 306, Level 16, State 2, Procedure spVillaGet, Line 22 
```

text、ntext 和 image 数据类型不能进行比较或排序，除非使用 IS NULL 或 LIKE 运算符。消息 306，级别 16，状态 2，过程 spVillaGet，第 22 行 无法比较或排序 text、ntext 和 image 数据类型，除非使用 IS NULL 或 LIKE 运算符。

# c# - 使用 Odbc C# .Net 连接到 Pick 数据库

> ID：320258
> 
> 赞同：2
> 
> 时间：2008-11-26T10:35:54.667
> 
> 标签：c#, .net, oledb, multivalue-database, pick

如何使用 Ole db 驱动程序连接到 PickBasic 数据库。我非常需要它来帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-05-25T05:28:18.843

我们使用名为 Redback 的实用程序与 Pick Basic 数据库进行通信。我试图找到有关 Redback 的更多信息，但我没有任何运气。这个 Redback 插件与 Pick 位于同一台 unix 服务器上。Redback 有几个响应者正在监听请求。使用 .net，我们向 redback 发出 tcp 请求。redback 响应者挑选这些请求并处理它们（Pick 从这里接管，我会对细节有点模糊）。Redback 然后将响应发送回 xml，我们将其解析为数据集。

在 Pick 中，创建了一个通用子例程来处理这些 redback 请求。该子例程读取请求的详细信息并根据从.net 端发送的参数调用适当的子例程。该程序还处理 xml 格式，以确保从子例程返回的任何数据都被正确编码和格式化。

我有几个朋友在 Stack 该程序和 Pick 上，可能会更详细地了解 redback 如何处理来自 .net 的请求。如果您想了解更多信息，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-12-16T04:01:54.273

我最近加入了这家公司，我看到他们正在使用 UniObjects.Net dll 与这个数据库进行交互 检查它来自 IBM 不确定性能虽然

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T11:56:29.013

www.rainingdata.com 提供了一些工具。我看不到任何免费软件选项。

Rainingdata 现在是老虎逻辑。 [http://www.tigerlogic.com/tigerlogic/](http://www.tigerlogic.com/tigerlogic/)

我参加过他们的全球会议，但我不记得有任何免费软件。如果您可以使用转储终端或 Accuterm 之类的终端仿真，那么它很容易编程。Accuterm 将允许您使用 GUI 界面进行编程，但您仍然可以在查找必须使用的文件和程序时获得很多乐趣。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-22T08:29:08.437

您应该能够使用 ODBC 连接到 D3 Pick 数据库。连接到 Pick Basic 没有多大意义。这是 D3 ODBC 文档的链接。

[http://www.rainingdata.com/support/documentation/odbc/index.html](http://www.rainingdata.com/support/documentation/odbc/index.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-29T22:57:16.047

您没有指定您正在运行的 Pick OS 的哪个变体。所以这是一个通用的解决方案。

我有客户使用 Liberty ODBC，它与 Pick OS 配合得很好。我的客户正在运行 mvBase。如果你有 D3，我相信它已经内置了一个 .net 接口。

集成软件 604-682-8293 或传真 604-682-8499；[http://www.libertyodbc.com](http://www.libertyodbc.com)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-03-31T15:21:57.687

创建一个 ODBC DSN 数据源，然后像使用任何其他 ODBC 连接一样使用它

# c# - .NET 数据绑定忽略属性更改

> ID：320261
> 
> 赞同：1
> 
> 时间：2008-11-26T10:39:18.763
> 
> 标签：c#, data-binding

我用 C# 编写了一个派生自 System.Windows.Forms.Control 的控件。我添加了一个属性 Selected，我想使用 BindingSource 将其数据绑定到业务实体。

我通过添加一个在 Selected 属性更改时触发的 SelectedChanged 事件来实现 PropertyNameChanged 模式。

这是我的代码：

```
public partial class RateControl : Control
{
    [Category("Property Changed")]
    public event EventHandler SelectedChanged;

    public int Selected
    {
      get
      { return m_selected; }
      set
      {
        if (m_selected != value)
        {
          m_selected = value;
          OnSelectedChanged();
          Invalidate();
        }
      }
    }

    protected virtual void OnSelectedChanged()
    {
      if (this.SelectedChanged != null)
        this.SelectedChanged(this, new EventArgs());
    }
} 
```

当我绑定到 Selected 属性时，我看到该事件被订阅。属性更改时也会触发该事件。

但是，业务实体未更新。我什至没有看到被访问的 Selected 属性的 getter。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T10:56:58.183

您是否将绑定的更新模式设置为 DataSourceUpdateMode.OnPropertyChanged？要么通过`binding.DataSourceUpdateMode = DataSourceUpdateMode.OnPropertyChanged;`，要么使用`DataBindings.Add(...)`重载之一。

以下内容适用于我将值推送到业务对象......

```
using System;
using System.Diagnostics;
using System.Windows.Forms;

class MyForm : Form
{
    public MyForm()
    {
        MyBusinessObject obj = new MyBusinessObject();
        Button btn = new Button();
        btn.Click += delegate { Foo++; };
        DataBindings.Add("Foo", obj, "Bar", false, DataSourceUpdateMode.OnPropertyChanged);
        DataBindings.Add("Text", obj, "Bar");
        Controls.Add(btn);
    }

    private int foo;
    public event EventHandler FooChanged;
    public int Foo
    {
        get { return foo; }
        set
        {
            if (foo != value)
            {
                foo = value;
                Debug.WriteLine("Foo changed to " + foo);
                if (FooChanged != null) FooChanged(this, EventArgs.Empty);
            }
        }
    }
}

class MyBusinessObject
{
    private int bar;
    public event EventHandler BarChanged;
    public int Bar
    {
        get { return bar; }
        set
        {
            if (bar != value)
            {
                bar = value;
                Debug.WriteLine("Bar changed to " + bar);
                if (BarChanged != null) BarChanged(this, EventArgs.Empty);
            }
        }
    }
}

static class Program
{
    [STAThread]
    static void Main()
    {
        Application.Run(new MyForm());
    }
} 
```

# javascript - Javascript 目录

> ID：320264
> 
> 赞同：0
> 
> 时间：2008-11-26T10:40:17.077
> 
> 标签：javascript, path, directory

我有一些 javascript 菜单代码可以在单独的目录中正常工作。但是，当我尝试从同一目录中调用相同的 .js 文件时，它不会看到这些文件。

以下从另一个目录工作：

脚本类型="text/javascript"> var **vbImgPath="../00-Menu-Files/"**

但是，如果我在同一个文件夹中执行此操作，我该怎么做？

**解决方案（经过大量实验编辑）：**

我做了很多实验！！！只有一个解决方案最终奏效：

“../00-菜单-文件/”

与其他目录相同的东西！很奇怪，没有其他方法可以从它自己的目录中调用它。但我找不到另一个真正有效的替代方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-26T11:29:53.763

通常目录是这样的：

../ 一上来

/ 根目录

./ 当前目录。但是，不在前面添加任何内容应该意味着相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T11:22:36.320

我想出了一个解决方案，但更愿意将文件保存在同一目录中。我在同一目录中创建了一个子文件夹，其中包含名为“MenuPHP”的菜单的图像文件，然后执行以下操作：

脚本类型="text/javascript"> var vbImgPath="../00-Menu-Files/"

将其推送到一个目录并指定上述目录的名称。解决了问题，但在路径中添加了另一个目录。至少这些文件都在同一个附近，这就是我所追求的。

如果有人知道如何指定相同的目录，请告知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T10:44:08.863

也许你会使用：

```
script type="text/javascript"> var vbImgPath="00-Menu-Files/" 
```

您可能希望通过在开头使用带有 / 的绝对 url 和之后的完整路径来使这项工作在任何地方进行，即。

```
script type="text/javascript"> var vbImgPath="/00-Menu-Files/" 
```

这是否有效取决于您网站的目录结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T11:32:22.010

还尝试了另一种现在似乎可行的解决方案，但由于某种原因没有更早地工作：

脚本类型="text/javascript"> var vbImgPath="../00-Menu-Files/"

与其他目录相同的命令......哦，它工作！

# asp.net-mvc - Html.ActionLink 无法正确呈现 #

> ID：320268
> 
> 赞同：0
> 
> 时间：2008-11-26T10:42:37.477
> 
> 标签：asp.net-mvc

当使用 Html.ActionLink 传递一个包含 # 字符的字符串时，它会像它一样呈现，但如果你 UrlEncode 它呈现为 %2523。

我相信这是一个错误。MVC 测试版发布。

它真的是一个错误吗？

[http://example.com/test#](http://example.com/test#)呈现为

[http://examplee.com/test%2523](http://example.com/test%2523)而不是

[http://examplee.com/test%2523](http://examplee.com/test%2523)

# .net - 点网汇编查看器？

> ID：320272
> 
> 赞同：21
> 
> 时间：2008-11-26T10:45:50.153
> 
> 标签：.net

我有一个包含点网程序集的 dll - 通用中间语言。问题是它缺少文档，我需要弄清楚可用的类、属性和方法、要传递的正确参数等 api。

什么是最好的方法来做到这一点。我需要某种查看器/检查器，但我找不到。

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-11-26T10:47:26.033

试试反光板。[http://www.red-gate.com/products/reflector/](http://www.red-gate.com/products/reflector/)

免费 ：-）

**编辑**：
截至 2011 年 2 月，它不再是免费的 ...:(
[有](https://stackoverflow.com/questions/2646707/something-better-than-net-reflector)[ilspy](http://wiki.sharpdevelop.net/ilspy.ashx)或[JetBrains dotPeek](http://www.jetbrains.com/decompiler/)等替代品。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-09T12:07:23.997

请尝试[ILSpy](http://ilspy.net/)。这是查看程序集信息的好工具。 [Assembly Analyzer](https://asmanalyzer.codeplex.com/)是另一种用于分析 .NET 程序集中的元数据和资源以及反汇编非 CLI 可执行文件的工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-03T13:43:52.103

尝试了其中的一堆（CodeReflect、Dis#、JustDecompile、ILSpy、dotPeek）后，我意识到大多数反编译器不会以非常易读的方式向您显示代码。ILSpy 很好，只是一切看起来都那么混乱。班级成员之间几乎没有新的界限。

在这方面[JustDecompile](http://www.telerik.com/products/decompiler.aspx)和[dotPeek](http://www.jetbrains.com/decompiler/)脱颖而出。[JustDecompile](http://www.telerik.com/products/decompiler.aspx)看起来更精致，界面更好一些，除了它带有一个网络安装程序，你还必须在这个过程中注册。

他们都有长处和短处，但我的选择是[dotPeek](http://www.jetbrains.com/decompiler/)，它不会强迫你注册。它还带有方便的 Visual Studio 快捷方式，使整个体验变得熟悉（例如`F12`导航到定义）。使用它们中的任何一个，您都有一个不错的反编译器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-07T22:04:28.417

JetBrains dotPeek 效果很好，而且是免费的，强烈推荐。

# windows-mobile - 如何通过 ActiveSync 禁用 Internet 连接？

> ID：320274
> 
> 赞同：1
> 
> 时间：2008-11-26T10:46:29.000
> 
> 标签：windows-mobile, activesync

我正在使用标准 3G 连接进行视频流传输。“流媒体”应用程序运行良好。

但是，在我将 WinMo 6.1 设备连接到笔记本电脑后，它通过 ActiveSync 使用 Internet 连接。我的笔记本电脑位于防火墙等后面。视频流停止正常工作。但是我需要 ActiveSync 连接来进行调试、文件上传。

当 ActiveSync 连接打开时，如何强制我的 WinMo 6.1 (HTC) 对所有 Internet 流量使用 3G/HSDPA。

更新：“流媒体”应用程序配置为通过我的 3G 网络连接。

Update2：至少对于我的应用程序，调用 ConnMgrMapConRef 和 ConnMgrEstablishConnectionSync（选择所需的连接）解决了这个问题。

Update3：连接管理器 API 的一些有用[链接。](https://stackoverflow.com/questions/321531/how-to-open-a-network-connection-from-windows-mobile-with-c#321607)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-26T11:10:05.050

我自己没有尝试过，但看看[Connection Manager](http://msdn.microsoft.com/en-us/library/bb416435.aspx)。您似乎可以将应用程序配置为使用特定网络（[链接](http://msdn.microsoft.com/en-us/library/bb416500.aspx)）。

还可以查看[Microsoft.WindowsMo​​bile.Status 命名空间](http://msdn.microsoft.com/en-us/library/microsoft.windowsmobile.status.aspx)，它允许您在连接 ActiveSync 时获得通知。

如果只是为了调试，我会先尝试配置手机。尝试更改 Internet Explorer 的连接设置，而不是自动检测网络。

# c# - threadPool.SetMaxThreads 返回 false

> ID：320280
> 
> 赞同：0
> 
> 时间：2008-11-26T10:49:53.453
> 
> 标签：c#

我对 C# 中的 SetMaxThreads() 的理解是它不能设置为小于处理器的数量。

但是在我的代码中，我无法将数字设置为小于 8，我不知道这是为什么。

如果我将其设置为较低，则返回 false！

（运行英特尔酷睿 2）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T13:38:11.040

我想我现在已经解决了这个问题（有点！），如果首先将 SetMinThreads() 设置为最小数量，那么在我的情况 2 中，我们可以将最大线程数设置为小于 8 的值。

我知道这会将资源与空闲线程联系起来，但就我的目的而言，这是一个合适的解决方法。

# c# - 确定 PDF 文件中的页数

> ID：320281
> 
> 赞同：60
> 
> 时间：2008-11-26T10:50:14.140
> 
> 标签：c#, pdf, .net-2.0

我需要使用 C# 代码 (.NET 2.0) 确定指定 PDF 文件中的页数。PDF 文件将从文件系统中读取，而不是从 URL 中读取。有谁知道如何做到这一点？注意：Adobe Acrobat Reader 安装在将执行此检查的 PC 上。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2008-11-26T11:07:49.237

你需要一个用于 C# 的 PDF API。iTextSharp 是一种可能的 API，尽管可能存在更好的 API。

**iTextSharp 示例**

您必须安装 iTextSharp.dll 作为参考。从 SourceForge.net 下载 iTextsharp 这是一个使用控制台应用程序的完整工作程序。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using iTextSharp.text.pdf;
using iTextSharp.text.xml;
namespace GetPages_PDF
{
  class Program
{
    static void Main(string[] args)
      {
       // Right side of equation is location of YOUR pdf file
        string ppath = "C:\\aworking\\Hawkins.pdf";
        PdfReader pdfReader = new PdfReader(ppath);
        int numberOfPages = pdfReader.NumberOfPages;
        Console.WriteLine(numberOfPages);
        Console.ReadLine();
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2009-11-17T19:57:07.967

这应该可以解决问题：

```
public int getNumberOfPdfPages(string fileName)
{
    using (StreamReader sr = new StreamReader(File.OpenRead(fileName)))
    {
        Regex regex = new Regex(@"/Type\s*/Page[^s]");
        MatchCollection matches = regex.Matches(sr.ReadToEnd());

        return matches.Count;
    }
} 
```

从[瑞秋的回答](https://stackoverflow.com/questions/320281/determine-number-of-pages-in-a-pdf-file-using-c-net-2-0/595458#595458)和[这个](http://www.devasp.net/net/articles/display/726.html)也是。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-02-27T16:24:14.080

[在http://www.dotnetspider.com/resources/21866-Count-pages-PDF-file.aspx](http://www.dotnetspider.com/resources/21866-Count-pages-PDF-file.aspx)找到了一种方法， 这不需要购买 pdf 库

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-26T12:11:46.330

我为此使用了[pdflib](http://www.pdflib.com)。

```
 p = new pdflib();

    /* Open the input PDF */
    indoc = p.open_pdi_document("myTestFile.pdf", "");
    pageCount = (int) p.pcos_get_number(indoc, "length:pages"); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-24T07:56:35.030

一条线：

```
int pdfPageCount = System.IO.File.ReadAllText("example.pdf").Split(new string[] { "/Type /Page" }, StringSplitOptions.None).Count()-2; 
```

推荐： [ITEXTSHARP](https://sourceforge.net/projects/itextsharp/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-05-25T15:45:39.763

[Docotic.Pdf 库](https://bitmiracle.com/pdf-library/)可用于完成任务。

这是示例代码：

```
PdfDocument document = new PdfDocument();
document.Open("file.pdf");
int pageCount = document.PageCount; 
```

该库将尽可能少地解析，因此性能应该没问题。

免责声明：我为 Bit Miracle 工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-09T14:29:42.407

我在使用 CeTe Dynamic PDF 产品方面取得了很好的成功。它们不是免费的，但有据可查。他们为我完成了这项工作。

[http://www.dynamicpdf.com/](http://www.dynamicpdf.com/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-02-02T19:07:29.230

我已经使用上面的代码解决了使用正则表达式的问题并且它可以工作，但是它很慢。它读取整个文件以确定页数。

我在一个网络应用程序中使用它，页面有时会一次列出 20 或 30 个 PDF，在这种情况下，由于页面计数方法，页面的加载时间从几秒钟到近一分钟。

我不知道 3rd 方库是否更好，我希望它们更好，并且我已经在其他场景中成功使用了 pdflib。

# c# - 投票有什么问题？

> ID：320284
> 
> 赞同：40
> 
> 时间：2008-11-26T10:52:20.953
> 
> 标签：c#, .net, asp.net, polling

我最近听到一些开发人员说他们只是轮询一些东西（数据库、文件等）以确定什么时候发生了变化，然后运行一个任务，比如导入。

我真的反对这个想法，并认为利用可用的技术，如[Remoting](http://en.wikipedia.org/wiki/.NET_Remoting)、[WCF](http://en.wikipedia.org/wiki/Windows_Communication_Foundation)等会比轮询好得多。

但是，我想找出其他人更喜欢一种方法而不是另一种方法的原因，更重要的是，我怎样才能说服其他人在这个时代投票是错误的？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2008-11-26T10:59:38.020

轮询本身并不是“错误的”。

很大程度上取决于它的实施方式和目的。如果您真的关心立即通知更改，那将非常有效。您的代码处于紧密循环中，不断轮询（询问）资源是否已更改/更新。这意味着您会尽快收到通知，告知您有所不同。但是，您的代码没有做任何其他事情，并且在对相关对象的许多调用方面存在开销。

如果您不太关心即时通知，则可以增加轮询之间的间隔，这也可以很好地工作，但选择正确的间隔可能很困难。太长，您可能会错过关键更改，太短，您又回到第一种方法的问题。

在这些情况下，诸如中断或消息等替代方案可以提供更好的折衷方案。您会在实际可能的情况下尽快收到更改通知，但是这种延迟不是您可以控制的，它取决于组件本身是否及时传递状态更改。

投票有什么“错误”？

*   它可能会占用资源。
*   它可能会受到限制（特别是如果您有很多想了解/民意调查的事情）。
*   这可能是矫枉过正。

但...

*   它本身并没有错。
*   它可能非常有效。
*   这很简单。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-11-26T11:32:02.793

在这个时代使用轮询的例子：

*   电子邮件客户端轮询新消息（即使使用 IMAP）。
*   RSS 阅读器轮询提要的更改。
*   搜索引擎轮询他们索引的页面的更改。
*   StackOverflow 用户通过点击“刷新”来调查新问题；-)
*   Bittorrent 客户端轮询跟踪器（以及彼此，我认为，使用 DHT）以了解群体中的变化。
*   多核系统上的自旋锁可能是核之间最有效的同步，如果延迟太短而没有时间在该核上调度另一个线程，在另一个核执行我们正在等待的任何事情之前。

有时根本无法获得异步通知：例如，用推送系统替换 RSS，服务器必须了解阅读提要的每个人并有联系他们的方式。这是一个邮件列表——这正是 RSS 旨在避免的事情之一。因此，我的大多数示例都是网络应用程序，这很可能是一个问题。

其他时候，即使有异步通知，轮询也足够便宜。

对于本地文件，更改通知原则上可能是更好的选择。例如，如果您永远戳它，您可能（可能）阻止磁盘旋转，尽管操作系统可能会再次缓存。如果您每秒轮询一个每小时只更改一次的文件，您可能会不必要地占用机器处理能力的 0.001%（或其他）。这听起来很小，但是当您需要轮询 100,000 个文件时会发生什么？

但是，在实践中，无论您做什么，开销都可能可以忽略不计，因此很难对更改当前有效的代码感到兴奋。最好的办法是注意轮询在您要更改的系统上导致的特定问题 - 如果您发现任何问题，请提出这些问题，而不是试图提出反对所有轮询的一般论点。如果你没有找到任何东西，那么你就无法修复没有损坏的东西......

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2008-11-26T11:02:53.663

轮询原则上被认为是不好的原因有两个。

1.  这是对资源的浪费。您很可能会在未发生更改时检查更改。花费在此操作上的 CPU 周期/带宽不会导致更改，因此本可以更好地花费在其他方面。

2.  轮询是在一定的时间间隔内完成的。这意味着在下一次间隔过去之前，您不会知道发生了更改。

最好通知更改。这样，您就不会轮询尚未发生的更改，并且您会在收到通知后立即知道更改。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2008-11-26T11:00:46.863

轮询很容易做到，非常容易，就像任何程序代码一样简单。不轮询意味着您进入了异步编程的世界，这并不容易脑残，有时甚至可能变得具有挑战性。

与任何系统中的所有事物一样，通常更常采用阻力较小的路径，因此总会有程序员使用轮询，甚至是优秀的程序员，因为有时不需要使用异步模式使事情复杂化。

我总是喜欢避免轮询，但有时我还是会进行轮询，尤其是当异步处理的实际收益不是那么好时，例如在处理一些小的本地数据时（当然你会更快一点，但是用户在这种情况下不会注意到差异）。因此，恕我直言，这两种方法都有空间。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-04-09T17:39:18.877

客户端轮询的扩展性不如服务器通知。想象一下成千上万的客户向服务器询问“有什么新数据吗？” 每 5 秒。现在想象一下服务器保存一个客户端列表来通知新数据。服务器通知可以更好地扩展。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-11-26T12:01:16.070

我认为人们应该意识到，在大多数情况下，即使在事件或中断驱动的情况下，也会在某种程度上进行轮询，但是您与执行轮询的实际代码是隔离的。真的，这是最理想的情况……将自己与实施隔离开来，只处理事件。即使您必须自己实现轮询，也要编写代码以使其隔离，并且独立于实现来处理结果。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-11-26T11:03:48.230

关于投票的事情是它有效！它可靠且易于实施。

池化的成本可能很高——如果您在每天只有两次更改的情况下每分钟扫描数据库以查找更改，那么您将消耗大量资源以获得非常小的结果。

然而，任何通知技术的问题在于，它们的实现要复杂得多，而且它们不仅不可靠，而且（这是一个很大的问题）你无法轻易判断它们何时不工作。

因此，如果您确实放弃了对其他技术的轮询，请确保它可供普通程序员使用并且非常可靠。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-11-26T11:12:52.753

它的简单 - 轮询很糟糕 - 效率低下，浪费资源等。即使没有选择“轮询”，也总是存在某种形式的连接来监视某种事件。

那么，为什么要加倍努力并进行额外的投票。

回调是最好的选择 - 只需要担心将回调与您当前的流程联系起来。在底层，正在进行轮询以查看连接是否仍然存在。

如果你一直打电话/给你的女朋友打电话，而她从来没有接听，那为什么还要继续打电话呢？只需留言，等她“回电”；）

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-11-26T11:26:05.737

我偶尔会在某些情况下使用轮询（例如，在游戏中，我会每帧轮询键盘状态），但绝不会在仅进行轮询的循环中进行轮询，而是将轮询作为检查（资源 X 是否已更改？如果是的，做一些事情，否则处理其他事情并稍后再检查）。不过一般来说，我避免轮询支持异步通知。

原因是我不会花费资源（CPU 时间等）来等待某事发生（尤其是如果这些资源一开始就可以加速那件事的发生）。在我使用轮询的情况下，我不会闲着等待，我会在其他地方使用资源，所以这不是问题（至少对我而言）。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-11-26T11:01:55.990

如果您正在轮询对文件的更改，那么我同意您应该使用在发生这种情况时可用的文件系统通知，这些通知现在在大多数操作系统中都可用。

在数据库中，您可以触发更新/插入，然后调用您的外部代码来执行某些操作。但是，可能只是您不需要即时操作。例如，您可能只需要在 15 分钟内将数据从不同网络上的数据库 A 获取到数据库 B。数据库 B 可能无法从数据库 A 访问，因此您最终会从数据库 B 或作为在数据库 B 附近运行的独立程序进行轮询。

此外，轮询是一种非常简单的编程方式。它通常是在时间限制很短时完成的第一步实施，并且因为它运行得很好，所以它仍然存在。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-11-26T18:08:02.307

我在这里看到很多答案，但我认为最简单的答案是它自己的答案：

因为（通常）编写轮询循环比为回调创建基础结构要简单得多。

然后，您会得到更简单的代码，如果它后来成为瓶颈，可以很容易地理解并重新设计/重构为其他东西。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-11-26T11:01:08.313

这不是在回答你的问题。但实际上，尤其是在这个处理器周期很便宜、带宽很大的“时代”，轮询对于某些任务来说实际上是一个很好的解决方案。

好处是：

*   便宜的
*   可靠的
*   可测试
*   灵活的

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-11-26T11:15:36.867

我同意避免投票是一个好政策。但是，参考[Robert 的帖子](https://stackoverflow.com/questions/320284/what-is-wrong-with-polling#320304)，我想说的是，在此处提到的问题不是那么大的问题的情况下，轮询的简单性可以使其成为一种更好的方法，因为异步方法通常可读性差且难以维护，更不用说可能潜入其实施的错误。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-11-26T11:30:36.977

与所有事情一样，这取决于。我工作的一个大型高事务系统目前使用 SQL 通知（在 SQL Server 中加载的 DLL，由扩展 SP 从某些表上的触发器调用。DLL 然后通知其他应用程序有工作要做）。

然而，我们正在远离这一点，因为我们实际上可以保证会有工作持续进行。因此，为了降低复杂性并实际加快速度，应用程序将处理它们的工作并立即再次轮询数据库以获取新工作。如果没有，它会在一小段时间后重试。

这似乎工作得更快，也更简单。然而，应用程序的另一部分体积小得多，并不能从使用这种方法的速度提高中受益——除非轮询间隔非常小，这会导致性能问题。所以我们在这部分保持原样。所以合适的时候是好事，但是每个人的需求不一样。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-08-27T08:45:11.950

以下是推拉的相对优点的一个很好的总结： [https ://stpeter.im/index.php/2007/12/14/push-and-pull-in-application-architectures/](https://stpeter.im/index.php/2007/12/14/push-and-pull-in-application-architectures/)

我希望我可以将它进一步总结到这个答案中，但有些事情最好不要删节。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-07-03T10:29:58.733

在考虑 SQL 轮询时，在 VB6 时代，您曾经能够使用 WithEvents 关键字创建记录集，这是异步“侦听”的早期化身。

我个人总是会在轮询之前寻找一种使用事件驱动实现的方法。未能手动实施以下任何一项可能会有所帮助：

*   sql服务代理/依赖类
*   某种队列技术（RabbitMQ 或类似的）
*   UDP 广播 - 可以使用多个节点侦听器构建的有趣技术。但在某些网络上并不总是可行的。

其中一些可能需要对您的项目进行轻微的重新设计，但在企业世界中可能是比轮询服务更好的途径。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-02-05T18:23:53.760

同意异步/消息传递通常更好的大多数响应。我完全同意罗伯特古尔德的回答。但我想再补充一点。

一个补充是投票可以用一块石头杀死两只鸟。在一个特定的用例中，我参与的一个项目使用了数据库之间的消息队列，但从应用程序服务器轮询到其中一个数据库。由于从应用服务器到数据库的网络偶尔会出现故障，因此额外使用轮询来通知应用网络问题。

最后，考虑到可扩展性，使用对用例*最有意义的东西。*

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-06-25T00:54:34.160

我正在使用轮询来检查文件的更新，因为我在具有不同操作系统类型的异构系统中获取有关该文件的信息，其中一种非常旧。如果文件位于具有不同操作系统的远程系统上，Linux 的通知将不起作用，因为该信息不会传输，但轮询有效。这是一个低带宽检查，所以它不会伤害任何东西。

# c# - 如何设置设计师设置值的顺序？

> ID：320288
> 
> 赞同：2
> 
> 时间：2008-11-26T10:54:33.523
> 
> 标签：c#, winforms, designer

我制作了一个自定义控件，其中包含开始时间、当前时间和结束时间的值。当前时间必须介于开始时间和结束时间之间，否则会引发异常。

在设计器中，我想设置新的开始、当前和结束时间；并且新的当前时间对新的开始和结束有效，而不是默认的开始和结束。但是设计器先设置当前时间，所以抛出异常，用设计器异常消息替换设计器。

如何告诉设计师在设置当前时间之前设置开始和结束时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T12:36:12.897

这就是 ISupportInitialize 的用途。只要继承这个接口，设计器就会自动调用你控件的BeginInit()和EndInit()方法。在 EndInit() 之前不要使用分配的属性值。

# c# - 什么是 C# 中的 Delphi FillChar 等价物？

> ID：320289
> 
> 赞同：3
> 
> 时间：2008-11-26T10:55:42.333
> 
> 标签：c#, delphi

Delphi 的 C# 等价物是`FillChar`什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-26T13:01:47.337

我假设你想用零填充一个字节数组（因为这就是 FillChar 在 Delphi 中最常用的）。

.NET 保证在创建时将字节数组中的所有值初始化为零，因此通常不需要 .NET 中的 FillChar。

所以说：

```
byte[] buffer = new byte[1024]; 
```

将创建一个 1024 个零字节的缓冲区。

如果您需要在使用缓冲区后将字节归零，您可以考虑丢弃您的字节数组并声明一个新的（如果您不介意让 GC 在您之后更努力地清理工作）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-26T11:06:19.240

如果我正确理解 FillChar，它会将数组的所有元素设置为相同的值，是吗？

在这种情况下，除非值为 0，否则您可能必须循环：

```
for(int i = 0 ; i < arr.Length ; i++) {
    arr[i] = value;
} 
```

为了将值设置为类型的 0，有`Array.Clear`

显然，如果需要，可以使用循环答案将此代码粘贴到实用程序方法中......例如，作为扩展方法：

```
public static void FillChar<T>(this T[] arr, T value) {...} 
```

然后你可以使用：

```
int[] data = {1,2,3,4,5};
//...
data.FillChar(7); 
```

如果你*绝对*必须有块操作，那么`Buffer.BlockCopy`可以用来在数组位置之间blit数据——例如，你可以写第一个块，然后blit几次以填充数组的大部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T11:35:01.973

在 C# 中试试这个：

```
String text = "hello";
text.PadRight(10, 'h').ToCharArray(); 
```

# c# - 如何使用 JSON、jQuery 将一组复杂对象发布到 ASP.NET MVC 控制器？

> ID：320291
> 
> 赞同：92
> 
> 时间：2008-11-26T10:56:35.063
> 
> 标签：c#, javascript, jquery, asp.net-mvc, json

我当前的代码如下所示。如何将我的数组传递给控制器​​，我的控制器操作必须接受什么样的参数？

```
function getplaceholders() {
    var placeholders = $('.ui-sortable');
    var result = new Array();
    placeholders.each(function() {
        var ph = $(this).attr('id');
        var sections = $(this).find('.sort');
        var section;

        sections.each(function(i, item) {
            var sid = $(item).attr('id');

            result.push({ 'SectionId': sid, 'Placeholder': ph, 'Position': i });
        });
    });
    alert(result.toString());
    $.post(
        '/portal/Designer.mvc/SaveOrUpdate',
        result,
        function(data) {
            alert(data.Result);
        }, "json");
}; 
```

我的控制器操作方法看起来像

```
public JsonResult SaveOrUpdate(IList<PageDesignWidget> widgets) 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2008-11-26T13:11:42.013

我找到了解决方案。我使用 Steve Gentile、*[jQuery 和 ASP.NET MVC 的解决方案 - 将 JSON 发送到 Action - Revisited](http://blogger.forgottenskies.com/?p=252)*。

我的 ASP.NET MVC 视图代码如下所示：

```
function getplaceholders() {
        var placeholders = $('.ui-sortable');
        var results = new Array();
        placeholders.each(function() {
            var ph = $(this).attr('id');
            var sections = $(this).find('.sort');
            var section;

            sections.each(function(i, item) {
                var sid = $(item).attr('id');
                var o = { 'SectionId': sid, 'Placeholder': ph, 'Position': i };
                results.push(o);
            });
        });
        var postData = { widgets: results };
        var widgets = results;
        $.ajax({
            url: '/portal/Designer.mvc/SaveOrUpdate',
            type: 'POST',
            dataType: 'json',
            data: $.toJSON(widgets),
            contentType: 'application/json; charset=utf-8',
            success: function(result) {
                alert(result.Result);
            }
        });
    }; 
```

我的控制器动作用自定义属性装饰

```
[JsonFilter(Param = "widgets", JsonDataType = typeof(List<PageDesignWidget>))]
public JsonResult SaveOrUpdate(List<PageDesignWidget> widgets 
```

可以在[此处](http://www.forgottenskies.com/MvcJson.zip)找到自定义属性的代码（链接现已断开）。

因为链接已损坏，这是 JsonFilterAttribute 的代码

```
public class JsonFilter : ActionFilterAttribute
{
    public string Param { get; set; }
    public Type JsonDataType { get; set; }
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.HttpContext.Request.ContentType.Contains("application/json"))
        {
            string inputContent;
            using (var sr = new StreamReader(filterContext.HttpContext.Request.InputStream))
            {
                inputContent = sr.ReadToEnd();
            }
            var result = JsonConvert.DeserializeObject(inputContent, JsonDataType);
            filterContext.ActionParameters[Param] = result;
        }
    }
} 
```

JsonConvert.DeserializeObject 来自 Json.NET

链接：[使用 Json.NET 序列化和反序列化 JSON](http://james.newtonking.com/projects/json/help/index.html?topic=html/SerializingJSON.htm)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2011-09-08T21:06:59.883

动作过滤器、jquery stringify、bleh...

Peter，这个功能是 MVC 原生的。这是使 MVC 如此出色的原因之一。

```
$.post('SomeController/Batch', { 'ids': ['1', '2', '3']}, function (r) {
   ...
}); 
```

而在行动中，

```
[HttpPost]
public ActionResult Batch(string[] ids)
{
} 
```

奇迹般有效：

![在此处输入图像描述](https://i.stack.imgur.com/xdsGb.png)

如果您使用的是 jQuery 1.4+，那么您需要考虑设置传统模式：

```
jQuery.ajaxSettings.traditional = true; 
```

如此处所述：http: [//www.dovetailsoftware.com/blogs/kmiller/archive/2010/02/24/jquery-1-4-breaks-asp-net-mvc-actions-with-array-parameters](http://www.dovetailsoftware.com/blogs/kmiller/archive/2010/02/24/jquery-1-4-breaks-asp-net-mvc-actions-with-array-parameters)

这甚至适用于复杂的对象。如果您有兴趣，您应该查看有关模型绑定的 MVC 文档：http: [//msdn.microsoft.com/en-us/library/dd410405.aspx](http://msdn.microsoft.com/en-us/library/dd410405.aspx)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-01-15T12:15:17.497

在`.NET4.5`中，`MVC 5`不需要小部件。

**Javascript：**

JS中的对象： ![在此处输入图像描述](https://i.stack.imgur.com/5kTwZ.png)

确实发布的机制。

```
 $('.button-green-large').click(function() {
        $.ajax({
            url: 'Quote',
            type: "POST",
            dataType: "json",
            data: JSON.stringify(document.selectedProduct),
            contentType: 'application/json; charset=utf-8',
        });
    }); 
```

**C＃**

对象：

```
public class WillsQuoteViewModel
{
    public string Product { get; set; }

    public List<ClaimedFee> ClaimedFees { get; set; }
}

public partial class ClaimedFee //Generated by EF6
{
    public long Id { get; set; }
    public long JourneyId { get; set; }
    public string Title { get; set; }
    public decimal Net { get; set; }
    public decimal Vat { get; set; }
    public string Type { get; set; }

    public virtual Journey Journey { get; set; }
} 
```

控制器：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Quote(WillsQuoteViewModel data)
{
....
} 
```

收到的对象：

![在此处输入图像描述](https://i.stack.imgur.com/pgI2k.png)

希望这可以节省您一些时间。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-11-26T13:06:18.513

*[在使用 ASP.NET MVC 创建 REST API（使用 JSON 和纯 XML）创建 REST API](http://weblogs.asp.net/omarzabir/archive/2008/10/03/create-rest-api-using-asp-net-mvc-that-speaks-both-json-and-plain-xml.aspx)*的后半部分，引用：

> 现在我们需要接受通过 HTTP POST 传递的 JSON 和 XML 有效负载。有时您的客户可能希望一次性上传一组对象以进行批处理。因此，他们可以使用 JSON 或 XML 格式上传对象。ASP.NET MVC 中没有原生支持自动解析发布的 JSON 或 XML 并自动映射到 Action 参数。所以，我写了一个过滤器来做到这一点。”

然后，他实现了一个操作过滤器，将 JSON 映射到 C# 对象并显示代码。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2011-02-02T18:38:17.753

首先下载这个 JavaScript 代码[JSON2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)，它将帮助我们将对象序列化为字符串。

在我的示例中，我通过 Ajax发布[jqGrid的行：](http://www.trirand.com/jqgridwiki/doku.php?id=start)

```
 var commissions = new Array();
    // Do several row data and do some push. In this example is just one push.
    var rowData = $(GRID_AGENTS).getRowData(ids[i]);
    commissions.push(rowData);
    $.ajax({
        type: "POST",
        traditional: true,
        url: '<%= Url.Content("~/") %>' + AREA + CONTROLLER + 'SubmitCommissions',
        async: true,
        data: JSON.stringify(commissions),
        dataType: "json",
        contentType: 'application/json; charset=utf-8',
        success: function (data) {
            if (data.Result) {
                jQuery(GRID_AGENTS).trigger('reloadGrid');
            }
            else {
                jAlert("A problem ocurred during updating", "Commissions Report");
            }
        }
    }); 
```

现在在控制器上：

```
 [HttpPost]
    [JsonFilter(Param = "commissions", JsonDataType = typeof(List<CommissionsJs>))]
    public ActionResult SubmitCommissions(List<CommissionsJs> commissions)
    {
        var result = dosomething(commissions);
        var jsonData = new
        {
            Result = true,
            Message = "Success"
        };
        if (result < 1)
        {
            jsonData = new
            {
                Result = false,
                Message = "Problem"
            };
        }
        return Json(jsonData);
    } 
```

创建一个 JsonFilter 类（感谢 JSC 参考）。

```
 public class JsonFilter : ActionFilterAttribute
    {
        public string Param { get; set; }
        public Type JsonDataType { get; set; }
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            if (filterContext.HttpContext.Request.ContentType.Contains("application/json"))
            {
                string inputContent;
                using (var sr = new StreamReader(filterContext.HttpContext.Request.InputStream))
                {
                    inputContent = sr.ReadToEnd();
                }
                var result = JsonConvert.DeserializeObject(inputContent, JsonDataType);
                filterContext.ActionParameters[Param] = result;
            }
        }
    } 
```

创建另一个类，以便过滤器可以将 JSON 字符串解析为实际的可操作对象：这个类 comissionsJS 是我的 jqGrid 的所有行。

```
 public class CommissionsJs
    {
        public string Amount { get; set; }

        public string CheckNumber { get; set; }

        public string Contract { get; set; }
        public string DatePayed { get; set; }
        public string DealerName { get; set; }
        public string ID { get; set; }
        public string IdAgentPayment { get; set; }
        public string Notes { get; set; }
        public string PaymentMethodName { get; set; }
        public string RowNumber { get; set; }
        public string AgentId { get; set; }
    } 
```

我希望这个例子有助于说明如何发布一个复杂的对象。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-08-09T14:16:59.217

```
 [HttpPost]
    public bool parseAllDocs([FromBody] IList<docObject> data)
    {
        // do stuff

    } 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2019-02-27T06:36:06.257

不需要做任何特别的事情。仅在您的帖子部分执行以下操作：

```
 $.post(yourURL,{ '': results})(function(e){ ...} 
```

在服务器中使用这个：

```
 public ActionResult MethodName(List<yourViewModel> model){...} 
```

# .net - 复制本地如何工作？log4net.dll 没有被复制到 MyProject 输出目录

> ID：320295
> 
> 赞同：45
> 
> 时间：2008-11-26T10:57:16.730
> 
> 标签：.net, build, dependencies

我想知道引用的 copy-local=true 到底是做什么的。它是否将引用的程序集及其所有依赖项复制到输出目录？

我的场景如下：我有一个使用 log4net 的自定义日志包装器。我构建了一个 MyLogWrapper.dll 的发布程序集，其中 log4net.dll 引用设置为 copy-local true。从 MyProject 引用 MyLogWrapper.dll 并将本地复制设置为 true 应该会导致 log4net.dll 也被复制，对吗？我只在 MyProject 中引用 MyLogWrapper.dll 而没有它的依赖项。log4net.dll 没有被复制到 MyProject 输出目录，但 MyLogWrapper 的所有其他依赖项都是。可能是什么问题呢？

我做了更多的实验，似乎如果我从 GAC 中删除程序集（log4net.dll），它就会开始在本地复制。谁能确认这是问题所在？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-06-10T05:24:44.183

不幸的是，根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/ez524kew(VS.80).aspx)中的以下声明，对于 GAC 中已经存在的程序集，CopyLocal 功能似乎无法正常工作。

> 如果您部署的应用程序包含对在 GAC 中注册的自定义组件的引用，则无论 CopyLocal 设置如何，该组件都不会随应用程序一起部署。在 Visual Studio 的早期版本中，您可以在引用上设置 CopyLocal 属性以确保部署程序集。现在，您必须手动将程序集添加到 \Bin 文件夹。这使所有自定义代码都受到审查，从而降低了发布您不熟悉的自定义代码的风险。

更多信息可以在以下页面中找到，该页面解释了有关项目引用如何工作的详细信息。

[MSDN：项目参考](http://msdn.microsoft.com/en-us/library/ez524kew(VS.80).aspx)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-11-26T14:08:54.160

[在此处](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/deac9496-e7cc-410f-906e-192a4c1748a5)在 MSDN 上提出此问题后- 似乎这种行为是设计使然。“如果您部署/复制包含对在 GAC 中注册的自定义组件的引用的应用程序，则无论 Copy Local 设置如何，该组件都不会随应用程序一起部署/复制。”

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-08T10:32:30.947

有一个技巧：将引用 Copy Local 设置为 false，然后再设置为 true，Visual Studio 会自动为该引用添加 Private 元数据。至少 VS 2010 可以。我最近这样做是为了解决我们的 TFS 构建服务器的一个问题，由于某种奇怪的原因，在 GAC 中安装了许多企业库组件，因此在从 TFS Drop 文件夹部署我们的项目时遇到了重大问题。那个假/真把戏救了我们。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-11-26T12:30:30.833

你需要对本地复制有点警惕，因为它过去已经让我失望了！

只是偶尔，对于特定的 .dll，它会默默地无法将其复制到构建文件夹。通常这不会出现在开发机器上，因为 dll 通常也在 GAC 中（如果您安装了用于开发的开发工具/库），因此在分发/捆绑之前您不会注意到进入安装程序，并且客户端计算机上缺少所需的文件。

关于这个错误的信息不多，但这个线程为一个特定的库演示了它：[here](http://www.syncfusion.com/support/forums/Message.aspx?MessageID=59165)。

被这个抓住后，我认为（通常在任何情况下）确切地知道您的项目需要哪些程序集并拥有一个脚本或类似的自动化操作来确保所有必需的组件都存在是一个好主意，无论是在您构建时，或者更有可能在您制作安装程序或收集文件以进行分发时，

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-11-26T12:22:30.647

当 local copy 设置为 true 时，它​​会将属性 local copy = tue 的所有程序集复制到应用程序的 bin 目录中。

在您的情况下，dll 可能正在使用另一个 dll，因此它也需要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-18T08:27:21.483

我发现如果引用的项目依赖于 GAC 程序集，则在 Visual Studio 2015 中，项目引用不再尊重这一点。GAC 程序集总是被复制到根项目输出中，并且 copy local = false 仅在项目的输出中包含对 GAC dll 的引用时才受到尊重。

[连接反馈](https://connect.microsoft.com/VisualStudio/Feedback/Details/1804765)

# java - 如何在 JDBC 数据源级别限制从 Oracle 返回的行数？

> ID：320299
> 
> 赞同：4
> 
> 时间：2008-11-26T10:59:07.383
> 
> 标签：java, sql, oracle, jdbc, jndi

有没有办法限制在 Tomcat 应用程序中的 Oracle 数据源级别返回的行？

似乎`maxRows`只有在 Java 代码中的数据源上设置它才可用。放置`maxRows="2"`数据源不适用。

有没有其他方法限制返回的行？无需更改代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-26T11:21:21.347

它不是在配置级别可用的东西。您可能需要仔细检查它是否完成了您希望它执行的操作：[请参阅 setMaxRows 的 javadoc](http://java.sun.com/j2se/1.4.2/docs/api/java/sql/Statement.html#setMaxRows(int))。使用 Oracle，它仍然会为查询取回每一行，然后只删除范围之外的行。您确实需要使用 rownum 才能使其与 Oracle 一起正常工作，而在配置中您也不能这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-28T10:05:13.760

问题是为什么要限制返回的行数。这样做可能有很多原因。首先是限制数据库返回的数据。在我看来，这在大多数情况下是没有意义的，好像我只想获取某些数据然后我会使用不同的语句或添加过滤条件或其他东西。例如，如果您使用 Oracle 的 rownum，您并不完全知道哪些数据在您获得的行中，哪些数据不包括在内，因为您只是告诉数据库您想要行 x 到 y。
第二种方法是限制内存使用并提高性能，以便您从 JDBC 驱动程序获得的 ResultSet 不会包含所有数据。[您可以使用Statement.setFetchSize()](http://java.sun.com/j2se/1.4.2/docs/api/java/sql/Statement.html#setFetchSize(int))限制 ResultSet 保存的行数. 如果将 ResultSet 中的游标移动到超出获取的行数，则 JDBC 驱动程序将从数据库中获取丢失的数据。（在 Oracle 的情况下，数据库会将数据存储在 JDBC 驱动程序直接访问的引用游标中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-02-24T15:18:48.800

> **注意：下面的代码是作为纯示例提供的。它尚未经过测试 **因此可能会伤害您自己或您的计算机，甚至会打您的脸。

如果您想避免修改 SQL 查询但仍希望拥有干净的代码（这意味着您的代码保持可维护性），您可以使用包装器设计解决方案。也就是说，通过使用包装现有类的一小组类，您可以无缝地为应用程序的其余部分实现您想要的，这些应用程序仍然认为它正在使用真实的数据源、连接和语句。

1 - 实现 StatementWrapper 或 PreparedStatementWrapper 类，具体取决于您的应用程序已经使用的内容。这些类是普通 Statement 或 PreparedStatement 实例的包装器。它们被简单地实现为使用内部语句作为完成所有工作的委托，除非这是一个 QUERY 语句（Statement.executeQuery() 方法）。只有在那种精确的情况下，包装器才会用以下两个字符串包围查询：“SELECT * FROM (” and ") WHERE ROWNUM < "+maxRowLimit。有关基本代码包装器代码，请参阅下面的 DataSourceWrapper 查找方式。

2 - 再写一个包装器：ConnectionWrapper，它包装一个 Connection，它在 createStatement() 中返回 StatementWrapper，在 prepareStatement() 中返回 PreparedStatementWrapper。这些是以前编码的类，将 ConnectionWrapper 的 delegateConnection.createStatement()/prepareStatement() 作为构造参数。

3 - 使用 DataSourceWrapper 重复该步骤。这是一个简单的代码示例。

```
public class DataSourceWrapper implements DataSource
{
    private DataSource mDelegate;

    public DataSourceWrapper( DataSource delegate )
    {
        if( delegate == null ) { throw new NullPointerException( "Delegate cannot be null" );
        mDelegate = delegate;
    }

    public Connection getConnection(String username, String password)
    {
        return new ConnectionWrapper( mDelegate.getConnection( username, password ) );
    }

    public Connection getConnection()
    {
        ... <same as getConnection(String, String)> ...
    }
} 
```

4 - 最后，使用该 DataSourceWrapper 作为应用程序的 DataSource。如果您使用的是 JNDI (NamingContext)，则此更改应该是微不足道的。

编写所有这些代码非常快速且非常简单，尤其是如果您使用像 Eclipse 或 IntelliJ 这样的智能 IDE，它们将自动实现委派方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T20:43:05.627

如果您知道您将只处理一个表，则在 where 语句中定义一个带有 rownum 的视图以限制行数。通过这种方式，行数在 DB 中得到控制，不需要在客户端应用程序的任何查询中指定。如果要更改返回的行数，请在执行查询之前重新定义视图。

一种更动态的方法是开发一个过程并传入许多行，并让该过程向您的客户端返回一个 ref_cursor。这将具有避免对数据库进行硬解析并提高性能的优势。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-02T08:25:04.447

好的，然后必须进行代码更改。

该场景限制了临时报告工具，以便最终用户不会撤回太多记录并生成无法使用的报告。

我们已经使用了基于 Oracle 成本的资源管理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-20T14:55:28.203

请查看此[页面，其中描述](http://inttech.blogspot.com/2009/02/rows-returned-with-jdbc.html)了限制一次吸入 Java 应用程序的数量。正如另一篇文章指出的那样，数据库仍将提取所有数据，这更多是为了控制网络使用和 Java 端的内存。

# bash - echo "-e" 不打印任何内容

> ID：320313
> 
> 赞同：11
> 
> 时间：2008-11-26T11:03:22.287
> 
> 标签：bash

我正在使用 GNU bash，版本 3.00.15(1)-release (x86_64-redhat-linux-gnu)。这个命令：

```
echo "-e" 
```

不打印任何东西。我猜这是因为 "-e" 是 echo 命令的有效选项之一，因为 echo "-n" 和 echo "-E" （其他两个选项）也会产生空字符串。

问题是如何为 echo 转义序列“-e”以获得自然输出（“-e”）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2010-04-06T04:06:36.510

打印任意字符串的一种真正方法：

```
printf "%s" "$vars" 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-11-26T11:08:38.970

这是困难的一个 ;）

通常你会使用双破折号来告诉命令它应该停止解释选项，但 echo 只会输出那些：

```
$ echo -- -e
-- -e 
```

您可以使用 -e 本身来解决问题：

```
$ echo -e '\055e'
-e 
```

此外，正如其他人指出的那样，如果您不坚持使用 bash 内置`echo`，您的`/bin/echo`二进制文件可能是该工具的 GNU 版本（查看手册页），因此了解`POSIXLY_CORRECT`环境变量：

```
$ POSIXLY_CORRECT=1 /bin/echo -e
-e 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-26T11:12:11.567

可能有更好的方法，但这有效：

```
printf -- "-e\n" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-26T11:06:29.240

你可以通过做作弊

```
echo "-e " 
```

那将是破折号，e，空格。

或者，您可以使用更复杂但更精确的：

```
echo -e \\\\x2De 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-26T11:14:40.987

```

[root@scintia 邮件]# POSIXLY_CORRECT=1; 导出 POSIXLY_CORRECT
[root@scintia 邮件]# /bin/echo "-e"
-e
[root@scintia 邮件]#

```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-26T11:44:38.227

仔细注意手册页后:)

```
SYSV3=1 /usr/bin/echo -e 
```

至少在 Solaris 上有效

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-29T22:38:42.603

另一种选择：

```
echo x-e | sed 's/^x//' 
```

这是[autoconf 手册](http://www.gnu.org/software/autoconf/manual/html_node/Limitations-of-Builtins.html)推荐的方式：

> [...] 通常可以使用'echo "x$word"' 来避免这个问题，稍后在管道中将'x' 考虑在内。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-08T12:26:45.577

我喜欢使用herestring的那个：

```
cat <<<"-e" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-26T11:25:16.177

其他方式：

```
echo -e' '
echo -e " \b-e" 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2008-11-26T16:10:24.710

```
/bin/echo -e 
```

有效，但为什么呢？

```
[resin@nevada ~]$ which echo 
/bin/echo 
```

# .net - 有没有一种快速的方法来为用户控件生成 <%@Register...%> 行？

> ID：320326
> 
> 赞同：0
> 
> 时间：2008-11-26T11:08:31.153
> 
> 标签：.net, asp.net, visual-studio-2008, user-controls

*   我制作了一个用户控件，然后想将其包含在页面上
*   我必须始终在我的 .aspx 文件顶部手动键入 @Register 行，例如

    <%@ 注册 TagPrefix="edward" TagName="GetQuote" src="~/Controls/GetQuote.ascx" %>

*   有没有办法自动创建这些@Register 行？

（我尝试从解决方案资源管理器中拖入 .ascx 文件，但不起作用。）

**问题已解决**：我正在拖入我的源视图而不是设计视图。谢谢迪尔伯特戴夫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T11:15:44.900

我不明白这个问题 - 你是在源代码还是设计模式下拖到 aspx 上？

在设计模式下拖动会为我创建注册线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T11:14:55.540

尝试将您的控件添加到工具箱（通过工具 > 选择工具箱项），然后将其从工具箱拖到您的页面上？（您的控件需要位于单独的 dll 中）

# perl - 如何使 log4perl 输出更易于阅读？

> ID：320330
> 
> 赞同：4
> 
> 时间：2008-11-26T11:09:03.197
> 
> 标签：perl, logging, log4perl

使用[log4perl](http://log4perl.sourceforge.net/)时，我使用的调试日志布局是：

```
log4perl.appender.D10.layout=PatternLayout
log4perl.appender.D10.layout.ConversionPattern=%d [pid=%P] %p %F{1} (%L) %M %m%n
log4perl.appender.D10.Filter = DebugAndUp 
```

这会产生非常详细的调试日志，例如：

```
2008/11/26 11:57:28 [pid=25485] DEBUG SomeModule.pm (331) functions::SomeModule::Test Test XXX was successfull
2008/11/26 11:57:29 [pid=25485] ERROR SomeOtherUnrelatedModule.pm (99999) functions::SomeModule::AnotherTest AnotherTest YYY has faled 
```

这很好用，并提供了出色的调试数据。

但是，调试日志的每一行都包含不同的函数名称、pid 长度等。这使得每一行的布局不同，并且使得阅读调试日志比需要的要困难得多。

log4perl 中是否有办法格式化该行，以便调试元数据（直到实际日志消息的所有内容）在末尾用空格/制表符填充，并让实际消息从同一列文本开始？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-26T11:58:14.097

您可以填充构成条目的单个字段。例如 [pid=%5P] 将始终为您提供至少 5 个字符作为 PID。

Log::Log4perl::Layout 文档中的[“量化占位符”部分提供了更多详细信息。](http://search.cpan.org/~mschilli/Log-Log4perl-1.19/lib/Log/Log4perl/Layout/PatternLayout.pm#Quantify_placeholders)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-26T12:23:48.647

有几种方法可以解决这个问题，但您必须弄清楚哪一种更适合您的情况：

1.  如果您正在现场工作，请使用不同的附加程序。让该附加程序使用仅显示您想要的信息的模式。例如，如果您在单个进程中工作，则备用附加程序可能会省略 PID 和时间戳。您可能只需要文件名和行号。

2.  用于`%n`将换行符放在正确的位置。这使得它是多行输出，稍后解析稍微困难一些，但您可以为输入记录分隔符选择另一个序列（例如，文字“[EOL]”），以便逐个条目地阅读。

3.  记录到数据库而不是文件。对于您的报告，只选择您要检查的列。

4.  记录所有内容，但编写一个过滤器来临时检查日志文件以仅显示您想要查看的部分，例如仅调试消息、特定时间之间的条目、仅涉及文件的条目等.

# javascript - 脚本管理器 Asp.Net Mvc

> ID：320333
> 
> 赞同：17
> 
> 时间：2008-11-26T11:10:02.150
> 
> 标签：javascript, jquery, asp.net-mvc, performance, gzip

我想在新的 Asp.net MVC 模型中有一些 ScriptManager 功能：

1- 脚本组合
2- 解析外部 Javascript 文件的不同路径
3- 缩小和 Gzip 压缩

[这](http://www.codeproject.com/KB/aspnet/HttpCombine.aspx)是我发现的，但我不确定是 MVC 方法的最佳方式。一般来说，在 MVC 模型中处理 Javascript 代码的好方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-11-26T11:34:35.830

也许您可以创建一个新的“脚本”控制器，其中包含不同的操作，为不同的压缩 JS 文件组合提供服务。由于 MVC 是采用面向资源的方法设计的，即 URL 现在是您的编程模型的中心，为什么不也为您的 Javascript 定义简单的 URI 呢？

例如，在您的观点中，您可以像这样引用您的文件：

```
<script src="http://your_domain/scripts/all"/> 
```

这将调用您的“全部”操作，从而发送所有压缩的脚本文件。

当然，您现在需要编写组合和压缩代码，或者可能在内部重用 Scriptmanager，我不知道是否可能。

这只是一个想法，目前我直接在我的母版页中引用单个 javascript 文件。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-01-21T20:17:21.423

试试这个： http: [//www.codeplex.com/MvcScriptManager](http://www.codeplex.com/MvcScriptManager)

> MvcScriptManager 旨在将 AjaxControlToolkit 的 ToolkitScriptManager 中可用的某些关键功能移植到当前的 ASP.NET MVC 框架中。您将能够将其用作 ASP.NET MVC 应用程序中的控件。
> 
> ### 特征
> 
> 1.  脚本组合（或连接）。使用 MvcScriptManager 声明的脚本将在呈现页面时即时组合成单个脚本文件请求。
> 2.  发布模式下的脚本缩小（或处理）。缩小过程仅在引用特定脚本的第一个请求时执行一次。后续请求将使用缓存中经过处理的脚本内容（详见 #5）。可以为每个脚本启用/禁用处理。
> 3.  呈现独立脚本文件的本地化资源。如果指定，本地化字符串将附加到脚本中。
> 4.  输出脚本时支持可配置的 HTTP 压缩和过期设置。
> 5.  具有文件依赖性的脚本缓存。脚本文件内容被缓存，以便渲染组合脚本文件的性能更高。缓存依赖关系链接到物理文件，因此文件系统中的任何脚本更新都会立即反映在缓存中。
> 6.  支持根据运行环境以调试/发布模式渲染脚本。
> 7.  解析独立脚本文件的不同路径。
> 8.  在单个页面（或母版页）上支持多个 MvcScriptManager。支持 Master 和 Slave 两种渲染模式，以便使用一个 ScriptManager 声明的脚本可以滚动到另一个进行渲染。
> 9.  支持网络农场场景...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-02T16:52:33.727

或者将 ScriptManager 本身作为一个单独的、每页一次的唯一居民包括在内怎么样`<form runat="server">`？

像这样：-

```
 <form runat="server">
      <asp:ScriptManager ID="ScriptManager1" runat="server" EnableScriptGlobalization="true">
      </asp:ScriptManager>
    </form> 
```

为我工作。

PS 你需要确保这个表单标签永远不会嵌入到另一个表单中。嵌套表单不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-09T18:02:59.800

发现这个研究几乎相同的问题：[A Simple ScriptManager for ASP.NET MVC](http://pietschsoft.com/post/2009/08/13/Simple-ScriptManager-for-ASPNET-MVC.aspx) - 在回答这个问题后编写，因此添加以供参考。

在第一种情况下，我将使用蛮力解决方案，即将它全部粘贴在母版页中（尤其是现在可以从 Microsoft 的 CDN 中提取 jQuery）——然后我们将研究更优化解决方案的选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T18:23:39.277

MVC 4 现在包括捆绑和缩小助手。您定义了捆绑中的所有脚本，MVC 将负责捆绑、压缩、缓存清除等。

[http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

# email - HTML 电子邮件作为附件和正文交付？

> ID：320335
> 
> 赞同：2
> 
> 时间：2008-11-26T11:10:11.480
> 
> 标签：email

我有一段代码使用第三方电子邮件发送组件发送电子邮件。

发送电子邮件时，应该出现在电子邮件正文中的 HTML*也*被添加为文件名为 ATT00001 的附件。

我*怀疑*附件是由接收电子邮件服务器（在本例中为 Exchange 2007）创建的。

我的问题是——有人知道为什么会这样吗？我怀疑某种字符集问题，但我不太确定。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T11:24:56.723

当您转发电子邮件时，它可以是“内联” - 在新电子邮件的正文中，或作为“附件” - 作为文件附加到新电子邮件。

现在我不确定你的问题。你在标题中说“代替”，在主要内容中说“也”。但我怀疑您拥有的电子邮件组件有什么问题，而不是 Exchange。检查 API 以指定电子邮件的转发方式：内联、附加或两者兼而有之。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T11:44:30.147

查看收到的电子邮件的来源。如果有`Content-Type: multipart/mixed; boundary=----------whatever`，则为带有附件的文本电子邮件。如果有`Content-Type: multipart/alternative; boundary="----something"`，则它是正确设置为具有文本替代的 HTML 消息（对于不处理 HTML 或设置为忽略它的客户端）。

我怀疑服务器会改变这种东西（但谁知道？），我会看看你的组件。

有疑问，如果您没有其他工具可以查看发送的内容，您可以尝试使用 WireShark 捕获 SNMP 消息并查看它的外观。有点矫枉过正，但我​​不熟悉其他工具... :-) 我使用它的祖先 Ethereal 来调试和优化 IMAP 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T11:29:00.443

只有当我在某处设置 charset:unicode 而不是 charset:utf-8 时才得到这个，但它可能完全不相关。告诉我们更多关于外部组件的信息肯定会得到更好的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T11:30:28.863

这很可能是接收端 Outlook MUA 的工作。[这](http://support.microsoft.com/kb/290809)看起来很有趣。也许如果您可以将电子邮件发送到不同的接收 MTA 和 MUA，事情可能会缩小一点。

# php - 使用php制作博客

> ID：320339
> 
> 赞同：5
> 
> 时间：2008-11-26T11:13:39.663
> 
> 标签：php

我是php新手，想用php创建一个博客，每个人都可以看到网站上发布的内容，但应该有另一个管理员页面，可以编辑、添加或删除帖子

我怎样才能编写这样的页面？需要什么逻辑？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-26T11:20:47.667

no1：如果您只需要博客软件，请不要自己编写，有大量免费服务和应用程序可供您使用或改编

no2：如果你想这样做是因为你想学习 php，那就去吧！

no3：最好的方法是遵循教程！10 秒的谷歌搜索就足够了，而且比在这里发布这样的问题更有帮助：[http ://www.google.ee/search?q=tutorial+php+blog](http://www.google.ee/search?q=tutorial+php+blog)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-26T11:19:07.077

[互联网](http://www.google.com.au/search?hl=en&client=firefox-a&rls=org.mozilla%3Aen-GB%3Aofficial&hs=IGd&q=code+a+blog+in+php+tutorial&btnG=Search&meta=)上有[很多](http://nettuts.com/news/how-to-create-an-object-oriented-blog-using-php/) 此类冒险[的](http://www.visionmasterdesigns.com/2008/07/tutorial-creating-a-content-management-system-using-phpmysql/) [教程](http://www.ibm.com/developerworks/edu/os-dw-os-php-blog-i.html)。

我认为在这里写一个答案可能有点太多了。您最好选择其中一个教程或找到一本使用构建博客作为学习更多有关 PHP 的手段的书。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-26T11:21:13.657

在这个阶段，你有 2 个选择。

1.  学习一些基本的 PHP（包括数据库、Web 服务器管理、安全表单处理、html、javascript、css 等），然后实现一些适合您目的的非常基本的博客。

2.  使用预包装的产品，如 Wordpress、Drupal 或数百种可用产品中的一种。您也许可以稍微修改它以满足您的需要，并且您将在此过程中学习 PHP。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-26T12:27:44.223

您正在寻找的工作流程非常简单，只有 2 层。

*   创建/更新/删除项目
*   查看项目

我会指导您[阅读 nettut 关于该主题的出色演练，该演练](http://nettuts.com/news/how-to-create-an-object-oriented-blog-using-php/)贯穿实施的所有阶段（创建数据库对象、查询等）。它省略了美化过程（它没有风格），这只意味着你将拥有更大的自由度。它还试图符合面向对象的设计，同时保持简单以避免让人沮丧（博客站点*可能*是一个大项目）。

如果您感觉不那么冒险[，他们也有一篇关于制作简单的喊话箱的优秀文章](http://nettuts.com/php/create-a-basic-shoutbox-with-php-and-sql/)

快乐编码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-26T11:50:55.797

互联网教程很棒。您将需要考虑两个主要事项：

1.  你如何存储数据（人们写的帖子）
2.  您如何将其呈现给用户。

**资料**：

您可以考虑使用数据库，但这对于学习练习来说可能是多余的。可能是简单的文本文件，可能每个条目一个（具有唯一的命名方案），或者用于存储帖子信息的结构化 XML。您需要考虑以某种方式对每个条目进行索引，以便可以轻松地恢复它。您将需要考虑您选择的性能影响，例如文件读取等。这在小型测试站点中不会成为问题，但您应该考虑作为练习的一部分您有成千上万的用户会发生什么。

**介绍**

您将需要查看一些 css 和 html 以使显示内容易于配置。考虑一下您想要显示哪些组件，例如博客“条目”，然后您可以在为页面提供任意次数时以编程方式将其放入 html 中。

# java - 可以使用 WLST Offline 将 NovellAuthenticators (LDAP) 添加到 Weblogic 吗？

> ID：320355
> 
> 赞同：3
> 
> 时间：2008-11-26T11:19:26.983
> 
> 标签：java, ldap, weblogic, wlst

我想创建一个 WLST 脚本来创建我的 Weblogic 域。但是我在添加 LDAP 配置时遇到问题。

```
cd("/SecurityConfiguration/myDomain")
cmo.createRealm("myrealm")

cd("/SecurityConfiguration/myDomain/Realms/myrealm")
cmo.createAuthenticationProvider("myLDAP", "weblogic.security.providers.authentication.NovellAuthenticator") 
```

这目前正在失败，因为此时我似乎没有 SecurityConfiguration 对象

```
No SecurityConfiguration object with name myDomain 
```

这个配置必须在线完成吗？还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-28T10:35:44.543

根据我的发现，此配置必须使用 WLST Online 完成。

我创建的脚本看起来像这样

```
connect("username", "password", "t3://ip:port");

edit()
startEdit()

create_AuthenticationProvider_54("/SecurityConfiguration/myDomain/Realms/myrealm", "value")
cd("/SecurityConfiguration/myDomain/Realms/myrealm")
cmo.createAuthenticationProvider("myLDAP", "weblogic.security.providers.authentication.NovellAuthenticator")

cd("/SecurityConfiguration/myDomain/Realms/myrealm/AuthenticationProviders/myLDAP")
set("GroupBaseDN", "value")
set("UserNameAttribute", "value")
set("StaticGroupObjectClass", "value")
set("UserBaseDN", "value")
set("UserObjectClass", "value")
set("AllGroupsFilter", "value")
set("Principal", "value")
set("UseRetrievedUserNameAsPrincipal", "value")
set("Host", "value")
set("StaticGroupDNsfromMemberDNFilter", "value")
set("StaticMemberDNAttribute", "value")
set("ControlFlag", "value")
set("UserFromNameFilter", "value")
set("Credential", "value")
set("GroupFromNameFilter", "value")

startEdit()
save()
activate(block="true") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-12T22:29:31.590

我总是在线使用，但离线 WLST 将与 WebLogic 附带的安全提供程序一起使用，但不适用于自定义提供程序。当然，WebLogic 附带 NovelAuthenticator，所以它应该可以工作。

尝试

```
realm = cmo.getSecurityConfiguration().getDefaultRealm()
myProvider = realm.createAuthenticationProvider("weblogic.security.providers.authentication.NovellAuthenticator") 
```

# css - 打印网页的安全像素宽度？

> ID：320357
> 
> 赞同：87
> 
> 时间：2008-11-26T11:19:53.487
> 
> 标签：css, printing

打印网页的安全像素宽度是多少？

我的页面包含大图像，我想确保它们在打印时不会被剪切。

我知道不同的浏览器边距和 US Letter / DIN A4 纸张尺寸。所以我们得到了标准的字母大小和一些默认的 DPI 值。但是我可以将这些转换为**像素**值以在图像的`width`属性中指定吗？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-06-18T14:18:41.267

至于真正的“普遍答案”，我无法提供。但是，我可以为某些细节提供一个简单而明确的答案...

> > 670 像素

至少这对于微软产品来说似乎是一个安全的答案。我阅读了很多建议，包括 675，但在我自己测试后，我想出了 670。

除了所有 DPI、边距问题、硬件差异之外，这个答案是基于这样一个事实，即如果我在 IE9 中使用打印预览（具有标准边距） - 并将打印尺寸设置为 100% 而不是默认的“缩小以适应” ，所有内容都适合页面而不会在此宽度下被截断。

如果我向自己发送一封 HTML 电子邮件并使用 Windows Live Mail 2011（Outlook Express 变成了这样）接收它，然后我以 670 宽度打印页面 - 一切都适合。如果我将它发送到实际的硬拷贝或 MS XPS 文件（虚拟打印输出），这也是正确的。

在我进行实验之前，我使用的是 700 的任意宽度。在上面提到的所有场景中，页面的一部分都被截断了。当我减少到 670 时，一切都完美契合。

至于我是如何设置宽度的——我只是使用了一个原始的“包装器”html 表格并将其宽度定义为 670。

如果您可以指定最终用户的软件，那么这些事情就很简单了。如果你不能（当然通常是这种情况），你可以测试他们正在使用的浏览器等细节，并对重要的解决方案进行硬编码。在 IE 和 FF 之间，您将覆盖大约 90% 的网络用户。为“其他所有人”添加一些其他代码，这些代码通常似乎可以工作，就这样吧……

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2009-12-11T21:24:22.137

它不像看起来那么简单。我刚刚遇到了一个类似的问题，这就是我得到的：首先，关于[wikipedia](http://en.wikipedia.org/wiki/Dots_per_inch)的一些背景知识。

接下来，在 CSS 中，对于纸张，它们有`pt`，即点，或 1/72 英寸。因此，如果您想拥有与显示器上相同尺寸的图像，首先您必须知道显示器的 DPI/PPI（通常为 96，如维基百科文章中所述），然后将其转换为英寸，然后将其转换为点（除以 72）。

但是话又说回来，浏览器在可打印内容方面存在各种问题，例如，如果您尝试使用浮动 css 标签，基于 Gecko 的浏览器会在页面中间剪切您的图像，即使您使用 page-break-inside：避免; 在您的图像上（请参阅此处，在[Mozilla 错误跟踪系统中](http://bugzilla.mozilla.org/show_bug.cgi?id=104040)）。

[在A List Apart](http://www.alistapart.com/articles/goingtoprint/)上的这篇文章中，有（很多）关于从浏览器打印的内容。

此外，您必须在打印预览中处理“缩小以适应”宽度，以及各种纸张尺寸和方向。

因此，无论像素大小如何，您都只需找出一个以英寸为单位的好图像尺寸，我的意思是点（7.1" * 72 = 511.2 因此`width: 511pt;`适用于信纸大小的纸张），或者选择宽度百分比宽度，并根据您的图像宽度关于纸张尺寸。

祝你好运...

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-11-09T22:54:44.400

我发现的问题的一种解决方案是以英寸为单位设置宽度。到目前为止，我只测试/确认了它在 Chrome 中的工作。它适用于我使用它的用途（打印出 8.5 x 11 纸）

```
@media print {
    .printEl { 
        width: 8.5in;
        height: 11in;
    }
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2008-11-26T11:34:16.470

对于打印，我没有设置任何宽度并移除任何阻碍您的打印布局具有动态宽度的障碍。这意味着如果您使浏览器窗口越来越小，则不会剪切/隐藏任何内容，但文档只会变长。像这样，您可以确定其余的将由打印机/pdf-creator 处理。

> 具有固定宽度的元素（例如图像或表格）呢？

### 图片

我能想到的选项：

*   将您的打印 CSS 中的图像缩小到您可以假设在任何情况下都适合的宽度，使用 pt 而不是 px （但打印无论如何都需要更多的点/单位，所以这应该不是问题）
*   排除打印

### 表

*   移除固定宽度
*   如果您确实有包含大量信息的表格，请使用景观
*   不要将表格用于布局目的
*   排除打印
*   提取内容，将其打印为段落

[http://www.intensivstation.ch/en/css/print/](http://www.intensivstation.ch/en/css/print/)

或任何其他 google 结果的组合：CSS、打印、媒体、布局

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2011-02-23T14:24:59.620

确保在 Web 页面中打印时图像不会被剪切的解决方案是具有以下 CSS 规则：

```
@media print { 
  img { 
    max-width:100% !important;
  } 
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-11-26T11:55:32.057

打印机不理解像素，它理解点（CSS 中的 pt）。最好的解决方案是编写一个额外的 CSS 用于打印，其所有度量都以点为单位。

然后，在您的 HTML 代码中，在 head 部分中，输入：

```
<link href="style.css" rel="stylesheet" type="text/css" media="screen">
<link href="style_print.css" rel="stylesheet" type="text/css" media="print"> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-26T11:32:57.453

我怀疑有一个...它取决于浏览器，打印机（物理最大dpi）及其驱动程序，您指出的纸张尺寸（我可能也想在B5纸上打印...），设置（横向还是纵向？），而且您经常可以更改比例（百分比）等。
让用户调整他们的设置......

# c# - 是仅适用于数字类型的转换运算符.net

> ID：320358
> 
> 赞同：2
> 
> 时间：2008-11-26T11:20:06.467
> 
> 标签：c#, .net, vb.net

我想知道重写转换运算符是否仅适用于数字类型？如果不是在什么情况下，隐式或显式转换运算符适用于其他值类型或引用类型。一个例子会很棒。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T11:28:23.017

不 - 您可以使用任何类型。

例如，XAttribute 定义了一系列转换，使各种转换变得简单：

```
 XAttribute attrib = new XAttribute("Foo", "12345");
    int i = (int)attrib;
    string s = (string)attrib; 
```

另一个有用的例子是 Jon's [`NonNullable<T>`](http://msmvps.com/blogs/jon_skeet/archive/2008/10/06/non-nullable-reference-types.aspx)- 这是为了在不允许空值的同时巧妙地与类一起工作。转换运算符使其易于使用。

# internet-explorer - Internet Explorer 中的 Google 地图折线速度

> ID：320359
> 
> 赞同：2
> 
> 时间：2008-11-26T11:20:30.133
> 
> 标签：internet-explorer, google-maps

使用 Internet Explorer (7) 时，有没有一种方法可以加快谷歌地图中折线的渲染速度？我的地图在其他浏览器中加载速度很快。

我已经按照此处的描述对折线进行了编码 - [http://facstaff.unca.edu/mcmcclur/GoogleMaps/EncodePolyline/](http://facstaff.unca.edu/mcmcclur/GoogleMaps/EncodePolyline/)并且它们是从静态 JavaScript 文件加载的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T12:32:13.607

ie7 比 firefox3 慢（ie6 比 ie7 慢）用 Javascript 渲染大而复杂的折线。

可能有一些小技巧可以加快渲染速度（在渲染之前平滑线条，调整缩放级别等）。

一个技巧可能是创建一个 kml 并保留一个公共 URL 并在 Google 地图中使用它。一个更“企业”的技巧是使用地理服务器或地图服务器并创建叠加层。那真的会提高性能。（它们是真正的服务器端。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-08-10T15:06:55.130

汤姆，谷歌地图使用 VML 在 IE 中绘制线条。Firefox 使用 SVG。图像转换适用于不支持 SVG 或 VML 的浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T22:54:43.577

这可能是因为 ie 不支持 canvas 或 svg 或谷歌地图用来绘制线条的任何东西。为了解决这个问题，线路数据被发送到谷歌，谷歌将其转换为图像，然后下载并显示。

# visual-studio-2008 - 使用 Visual Studio 进行跨平台开发的最佳方法是什么？

> ID：320366
> 
> 赞同：2
> 
> 时间：2008-11-26T11:24:18.517
> 
> 标签：visual-studio-2008, visual-studio-2005, msbuild, build-process

我们正在多个平台（DS/Wii/Xbox 360/PS3/PC/PSP）上开发大量游戏。每个都有自己的编译器/链接器和调试器。我们希望使用 Visual Studio 作为 IDE 并管理构建过程，但使用特定于平台的编译器（和设置）来生成适当的输出。我们可以在 VS 之外管理构建过程（使用 jam 或 ant say），但这不是首选的解决方案。

在网上拖网，这似乎是一个普遍的问题，但没有人有好的解决方案。有没有人解决过这个问题？处理这个问题的最佳方法是什么。

一些解决方案浮现在脑海中 - 在预构建步骤中从 solition 自动生成 nant 脚本（可能工作最少但仍然不理想），用存根应用程序替换 cl.exe 和 link.exe，使用 msbuild（但这面向 .net 开发而不是本地代码），编写自定义 VS 插件（大量工作 - 任何指向现有的商业或开源的指针都会很好）。有人试过这些吗？对你有好处吗？;)

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-28T14:33:46.360

CMake 没有做我所追求的。需要明确的是 - 当我说“管理构建过程”时，我的意思是，任何人都可以从存储库中获取项目，然后在 VS 中选择平台、编译/运行、添加文件、更改设置等，这一切都是神奇的； ）所以要回答我自己的问题，经过一番挖掘，这就是我想出的。

这样做的“正确”方法是为 VS 编写一个插件，添加一个新平台，该平台将出现在配置管理器中（就像他们为 Xbox、Pocket PC 等所做的那样）。不幸的是，微软似乎以其无限的智慧决定不将这个特定功能的 API 暴露给未洗过的人。

但是，您可以编写一个加载项并同时将 cl.exe 和 link.exe 替换为存根程序，这些存根程序将实际编译分配给适当的编译器。似乎有一个开源项目[VSItanium](http://sourceforge.net/projects/vsextcomp/)（尽管只有 2003 年，并且必须针对自定义编译器进行修改）。SNSystems 也使用他们的 PSP 的[VSI](http://www.snsys.com/psp/ProDG.asp)包来做到这一点。

编写插件需要一些时间，因此同时一个快速的权宜之计解决方案是编写一个脚本来解析解决方案和项目文件并提取重要位并生成要包含在 nant （或 make , 或 jam 或其他) - 从每个构建步骤调用。要么，要么沿着整个makefile解决方案路线：/

MSBuild 确实应该是前进的方向。我玩得很快，你可以（几乎）做我想做的一切，但不知何故，它并没有完全凝固。一直认为这是一个 C# 项目 - 可能需要花更多时间来了解它，除非任何 MSBuild 专家都想指出我正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T11:36:25.577

你看过[CMake](http://www.cmake.org)吗？它可以从文本描述生成 Visual Studio 项目文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-05T20:04:57.903

Homebrew PSP SDK ( [MinPSPW](http://minpspw.sf.net) ) 上使用的另一个选项是使用 Makefile 项目。您使用 VS 中的代码编辑器，但最终当您调用编译器时，它将使用基于您的 makefile 的正确编译器。大多数输出​​错误将被 VS 捕获并在您的源代码中突出显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-28T11:02:45.813

借调 CMake 的建议，但需要注意的是，您将无法在 VS 中为*其他*平台管理项目。它只是不是为了管理当前项目/目标/平台以外的任何东西的库路径、定义等而编写的。您几乎肯定需要说“平台 X 的库就在这里”，而我只是看不到通过 VS 做到这一点的方法。

# audio - 您使用哪组构建声音？

> ID：320374
> 
> 赞同：5
> 
> 时间：2008-11-26T11:28:11.677
> 
> 标签：audio, build

像 CCTray 这样的应用程序允许指定一个声音片段来指示构建成功或构建失败。我很想听听不同团队使用的声音集。

这是我们使用的两组：

*   Homer Simpson：“d'oh”表示构建失败，“woohoo！” 为了成功
*   马里奥兄弟：构建失败时关闭声音，构建成功时加电，构建修复时 1-up

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T11:35:37.527

我为构建失败发出了轻柔的呻吟声。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T15:08:25.943

南方公园：

*   “天啊，他们杀了肯尼！” 构建失败。
*   “踢屁股！” （卡特曼）成功。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-28T04:38:44.387

对于构建失败：来自 Apollo 13 的 Tom Hanks，“休斯顿，我们遇到了问题。”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-01-29T17:33:28.217

*   成功构建：[马里奥获得一枚硬币！](http://www.mariomayhem.com/downloads/sounds/super_mario_bros_nes_sounds.php)
*   失败的构建：[DUN-dun-dun](http://www.freesound.org/samplesViewSingle.php?id=45654)或[悲伤的长号](http://www.freesound.org/samplesViewSingle.php?id=73581)（我还没有完全决定）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-28T03:58:43.407

在早期版本的 Microsoft C/C++ 编译器中，我使用了 Windows XP 和 Windows 95 Plus 附带的弹球游戏中的声音！盒。我使用了游戏用于成功构建事件的成功动作的声音；我使用了游戏用于失败事件（如丢球）的声音，用于构建失败或警告事件。我还将弹球声音用于调试器中的断点等事件。可悲的是，最新版本的 MS Visual Studio 不再向声音控制面板公开几乎一样多的事件。:-(

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-28T07:52:11.753

您的同事是否欣赏您的计算机一遍又一遍地产生相同的声音？每周有无数次？伙计，我什至不能在这里播放音乐而不会受到投诉。

# javascript - 使用 javascript 操作 css 层

> ID：320387
> 
> 赞同：1
> 
> 时间：2008-11-26T11:31:36.740
> 
> 标签：javascript, html, css

我想知道是否有可能有一种缩略图图像库，其中单击缩略图将显示图层中的完整图像。我想知道是否可以加载所有图层和相应的图像并使用 javascript 来更改 z 索引或类似的东西以避免重新加载或离开页面。我宁愿避免使用服务器端技术，但不知道这是否可能。

编辑：

我不追求“灯箱”解决方案或任何覆盖页面的东西，我更希望图像作为页面的一部分出现，并且在不重新加载页面的情况下进行更改，基本上就像下面链接的 PIctureSlide。但更重要的是，我想知道如果不使用框架这是否很容易编写，并且它是否会像我上面想象的那样工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T13:58:00.393

是的，你可以在没有框架的情况下做到这一点：

```
<div id='big' style='width:500px;height:500px'></div>
<a href="javascript://load big image" onclick="document.getElementById('big').style.backgroundImage='url(Big.gif)'"><img border="0" src="images/Thumb.gif" /></a> 
```

[下面是一个使用Prototype](http://www.prototypejs.org)库的简单示例：

```
<div id='big' style='width:500px;height:500px'></div>
<a href="javascript://load big image" onclick="$('big').style.backgroundImage='url(Big1.gif)'"><img border="0" src="thumb1.gif" /></a> 
```

此脚本假定大图像都是 500 x 500 像素。

这是另一种方法：

```
<div id='big'></div>
<a href="javascript://load big image" onclick="loadBig('Big1.gif')"><img border="0" src="thumb1.gif" /></a>
<script type="text/javascript">
function loadBig() {
    $('big').innerHTML = "<img src='Big1.gif'>"
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T11:41:44.300

除非您有特殊需要，否则周围有很多缩略图库可以让您自己编写一个。如

[http://www.huddletogether.com/projects/lightbox/](http://www.huddletogether.com/projects/lightbox/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T11:45:25.230

我会为此推荐[GreyBox](http://orangoo.com/labs/GreyBox/)，它非常小，并且与任何其他灯箱解决方案一样好用。

但是，如果您已经在同一页面上使用了 JS 框架（Mootools/jQuery/Prototype），那么您不妨寻找基于它的解决方案，有很多可以用 google 搜索的。如果您特别需要幻灯片功能（GreyBox 没有 AFAIK），我过去曾成功使用过[幻灯片灯箱](http://www.justinbarkhuff.com/lab/lightbox_slideshow/)（基于原型）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T11:35:45.467

[JQuery](http://jquery.com/)应该能够做出你想要的。

您使用它开发了多个缩略图，例如：

*   [图片幻灯片](http://www.robertnyman.com/picture-slides/)
*   [JQuery Popeye](http://herr-schuessler.de/blog/jquerypopeye-an-inline-lightbox-alternative/)（可能接近您正在寻找的内容）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-26T11:44:36.463

另一个可能比灯箱更完整（即使它还可以），如果您不使用 jquery 或任何其他库，我建议总体上： [http ://www.mjijackson.com/shadowbox/](http://www.mjijackson.com/shadowbox/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-26T11:52:22.627

这是可能的。您可以将所有图像放在自己的 div 中，创建一个隐藏内容的 CSS 类，以及另一个以您想要的任何其他设置显示图片的 CSS 类。当有人点击缩略图时，更改相应 div 上的类以显示正确的图像，并隐藏所有其他的。

也就是说，如果您不介意闪存要求，已经有几个闪存工具可以做到这一点。

如果您使用 JavaScript 执行此操作，请确保使用 jQuery 或 Scriptaculas 之类的库来帮助处理跨浏览器问题。我曾经使用直接的 JavaScript 做过类似的事情，那是一场噩梦。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-26T14:23:13.570

当然可能，尽管大多数框架都会为您提供您不想要的灯箱

我总是建议让 JS 更改对象类并让 CSS 处理它的表示方式，但是如果你需要，动画需要 JS

# c# - 迭代器中的副作用被认为是有害的？

> ID：320396
> 
> 赞同：5
> 
> 时间：2008-11-26T11:34:30.120
> 
> 标签：c#, oop, iterator

我今天写了我的第一个 C# 迭代器。呜呼。

有趣的是，它有副作用。我的迭代器从目录中过滤掉无效文件并返回一系列有效文件进行处理。当它遇到一个无效文件时，它会将其移动到另一个目录。

我尝试将其实现为 LINQ 查询，但真的不喜欢 where 子句的谓词具有副作用的事实。那是确定的气味。

我可以明确地实现它，循环遍历所有文件并依次处理好或坏，但这不是很优雅。更好的解决方案是将其拆分为两个列表（好的和坏的）并依次处理每个列表。

但后来我想起了迭代器。我现在有了一个迭代器，它产生有效文件并处理（移动）无效文件。

所以，我的问题是：迭代器有这样的副作用是个坏主意吗？我是否在迭代器中隐藏了太多功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-26T11:44:58.880

有副作用的迭代器不好？:)

如果你有包含所有文件的序列，你可以有一些[访问者](http://en.wikipedia.org/wiki/Visitor_pattern)-ish 访问所有项目并为每个案例调用一个函数。访问者中的歧视可以是您可以提供的谓词，也可以是访问者固有的。

所以，我不会说 C#，而是像这样的伪代码：

```
good_handler = new FileHandler() {
  handle(File f) { print "Yay!"; }
}

bad_handler = new FileHandler() {
  handle(File f) { print "Nay!"; }
}

files = YourFileSequence();
visitor = new Visitor(good_handler, bad_handler);
visitor.visit(files); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-26T11:39:31.107

我会说在迭代器中产生副作用*通常*是一个坏主意，但这并不是一个完全的禁忌。如果您有副作用，则调用者很难/不可能以纯粹的功能方式工作。这可能是也可能不是问题，具体取决于您的用例。

我建议您有两种获取迭代器的方法-一种具有副作用（基本上可能是一种优化），另一种没有（速度较慢，但​​推理起来更简单）。这可能只是通过将标志传递给方法，或者有两个不同命名的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T11:44:58.320

在逻辑上对集合进行枚举的迭代器不应该有副作用，不。特别是，当使用 IEnumerator.Reset() 方法重新启动时，它们不会是幂等的。

然而，迭代器实际上是一种协程，它们可以用于实现一些以其他方式难以实现的东西，例如[异步工作流中的步骤](http://tomasp.net/blog/csharp-async.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-02-14T02:36:52.150

另一个问题是该方法可能被“误用”，因为调用者可能会尝试使用它来移动文件，而不会对返回的结果真正感兴趣。

如果调用者从不迭代结果，那么（预期的）副作用不会由于迭代器的延迟执行而被调用。甚至可能存在用户仅迭代集合的一部分的情况，因此对某些项目而不是全部执行副作用。

这篇文章讨论了这个问题： http: [//codequota.com/archive/2012/02/13/iterator-blocks-and-side-effects.aspx](http://codequota.com/archive/2012/02/13/iterator-blocks-and-side-effects.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-26T13:56:13.110

谢谢大家 - 天哪！快速响应！

我不得不同意迭代器中的副作用是一个坏主意。我不得不问的事实表明有气味。应该听我的蜘蛛侠的感觉。

我认为我问的主要原因是因为我的副作用与主要任务完全隔离，因此巧妙地封装在迭代器中。但是，它仍然是隐藏的功能，这不是很好。

另外，我认为我将访问者的想法与迭代器混为一谈，这也不是一个好主意。

从那以后，我改变了我的实现，从所有文件的原始序列中生成了 2 个序列——一个好，一个坏。我现在可以以更明显和直观的方式处理它们。万岁。

所以，我还没有在现实世界中使用过迭代器。那好吧。

谢谢！马特

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-26T14:01:22.897

我会说副作用是一个坏主意，但无害。如果你有副作用，你基本上是在做两个操作。最好将这些操作分成两个函数，这样代码更易于维护，您可以单独执行它们。

在这种情况下，您要将坏文件移出文件夹，并将其他内容移到好文件中。分离这些操作可以让您移动坏文件而不选择好文件，或者让您对好文件进行操作（例如计数）而不移动坏文件。您的代码也将更加分隔，因此如果您需要，优化这些操作之一会更容易。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-26T18:53:17.190

我认为实际上比您的迭代器具有隐藏的副作用更直接的问题。也就是说：您正在更改它正在迭代的集合的成员资格。即使副作用没有难闻的代码气味，这也是您必须谨慎对待的事情。有一些方法可以实现这一点，这些方法看起来很明智（比如缓存文件列表并在重置迭代器时重用它），如果你从集合中删除东西就会中断。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-26T18:58:38.210

我不会对一般情况发表评论，但在你的情况下，我认为这很*危险*。衡量界面质量的一个很好的指标是正确使用界面的难易程度和错误使用的难易程度。

应用该指标，您的设计得分很低，因为它*非常*容易错误地使用它：只需对其进行两次迭代。

我实际上会比乔恩更进一步说：甚至不提供选项。这可能会有所帮助，但可能使用此错误的代价可能太高了。另一方面，可以说，如果用户故意做出选择，他必须处理后果。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-26T13:46:13.333

我的经验法则是，如果我正在迭代一个集合，不。但是在 Python 中，通常习惯性地使用 for 循环来执行代码一定次数，在这种情况下，我可以毫无问题地使用它并产生副作用。

# ssas - Analysis Services 2005 OLAP 多维数据集：我可以在 nvarchar 列上创建不同的计数度量吗？

> ID：320405
> 
> 赞同：2
> 
> 时间：2008-11-26T11:37:41.267
> 
> 标签：ssas, olap, cubes

我正在尝试使用单个度量创建一个多维数据集。此度量是“名称”列的不同计数。如果度量设置为“计数”类型，则多维数据集可以完美运行。但是，当我设置不同的计数时，我得到了这个错误：

“OLAP 存储引擎中的错误：为不同计数记录指定的排序顺序不正确”

我在一些博客中读到，您只能对数字列进行不同的计数。我看不出一个很好的理由，我在官方文档中找不到该信息。然而，这可能是真的。无论如何，我真的被这个问题困住了。我有哪些选择？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-10T15:21:47.597

我的回答对你来说可能为时已晚，但希望这可以帮助其他有同样问题的人。

1.  转到解决方案资源管理器中的数据源视图
2.  查找包含需要聚合的 GUID 列的表
3.  右键单击所选表的标题并选择“创建命名计算”
4.  给它一个名字
5.  在表达式字段中键入以下内容： **CAST(ColumnName as varchar(36))**

此解决方案来自此链接 [http://www.bi-dw.info/sql-server-tips/distinct_count-measure-on-uniqueidentifier.htm](http://www.bi-dw.info/sql-server-tips/distinct_count-measure-on-uniqueidentifier.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-03-14T20:27:24.917

谷歌，尤其是 Eggheadcafe 提供了一个解决方案：

*   从 SQL Server Management Studio 连接到 Analysis Services
*   右键单击 Analysis Services 服务器名称（即最顶部的 Analysis Services 链接）
*   选择属性
*   选中显示高级（全部）属性
*   找到以下设置
*   OLAP \ 处理 \ CheckDistinctRecordSortOrder
*   将此值设置为 0
*   点击确定
*   在 Visual Studio 或 BIDS 中打开 OLAP。
*   处理立方体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-09T01:28:04.623

我在尝试对 INT ID 列进行不同计数时遇到了这个问题。在花了很长时间查看未知成员设置和维度使用设置之后，我发现了另一个建议，即 Distinct Count 度量不喜欢 NULL 值。将 WHERE COLUMN IS NOT NULL 添加到此不同计数度量值组的分区查询中解决了我的问题。

这是建议：“OLAP 存储引擎中的错误：为不同计数记录指定的排序顺序不正确。

检查 distinctcount 列不包含空值。如果是这样，则可以通过分区定义中的查询从度量值组中省略这些（假设不同计数度量值在其自己的度量值组中）“

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T15:43:59.197

我会回答自己，也许这对其他人有帮助。

简短的回答是肯定的。

我创建了一些具有相同结构但只有几个测试行的测试表。多维数据集与这些数据完美配合。

所以，我猜原始表上有一些损坏的数据，或者可能是一些罕见的字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-02T05:29:31.133

你是对的，你可以对 nvarchar 列进行不同的计数。

这可能与奇怪的字符或您的排序规则设置有关。

您可以尝试处理度量值组的较小子集以尝试隔离问题行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-02T06:53:26.050

这可能是由于排序规则设置造成的。Sql server 默认有 SQL_Latin1_General_CP1_CI_AS，因为 SSAS 使用 Windows Collat​​ion Latin1_General。如果您更改正在执行不同计数的列上的排序规则，我认为将解决问题

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-02T18:48:28.693

德比在我的情况下提供了正确的答案。就我而言，我试图在 SSDT（VS 2012）中处理挖掘模型，但我遇到了错误。

在我对生成用作数据源的表的查询进行了一些更正后，错误开始了。我的猜测是，它在我对查询进行更正之前没有在某个地方引入了一些 NULLS，因此源表（挖掘模型在此之前处理得很好）。由于我的菜鸟名声，我无法投票支持德比。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-07T05:36:34.583

我遇到了同样的问题，我发现我的数据中有特殊字符/符号阻止处理多维数据集。很可能，多维数据集无法使用特殊字符对数据进行排序。

我能够通过使用以下函数将数据转换为哈希字节字符串来解决该问题：

```
SUBSTRING(master.dbo.fn_varbintohexstr(HashBytes('MD5', [column_name])), 3, 32) 
```

# delphi - 我在哪里可以找到 delphi 的文本到语音转换组件？

> ID：320415
> 
> 赞同：1
> 
> 时间：2008-11-26T11:40:57.017
> 
> 标签：delphi, components, text-to-speech

我想在我的应用程序中添加文本到语音用户指导指令。我在哪里可以找到一个文本到语音组件来做到这一点。我不想使用 Windows 功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T12:44:35.470

Chant SpeechKit 拥有您所需要的一切 [http://www.chant.net/Products/SpeechKit/Default.aspx](http://www.chant.net/Products/SpeechKit/Default.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T13:33:48.413

我读了 Brian Long 的文章

[http://www.blong.com/Conferences/DCon2002/Speech/Speech.htm](http://www.blong.com/Conferences/DCon2002/Speech/Speech.htm) [http://www.blong.com/Conferences/DCon2002/Speech/SAPI51/SAPI51.htm](http://www.blong.com/Conferences/DCon2002/Speech/SAPI51/SAPI51.htm)

并写了我自己的。我整天都用它来阅读新闻组、电子邮件和文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T11:53:28.117

如果你只想要一个“包装”Windows 语音 API 的 Delphi 组件，你可以试试这个：

[http://www.o2a.com/dtalk.htm](http://www.o2a.com/dtalk.htm)

但是，如果您想要一个完全独立于 Windows 系统的完整语音合成器，那就是另一个问题了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-26T12:53:15.827

在网上闲逛后的一些建议：

*   [MBROLA 内...](http://tcts.fpms.ac.be/synthesis/mbrola/mbrtts.html)
*   [AkaSig - 免费的文字转语音技术](http://www.akasig.org/2004/08/05/free-text-to-speech-technologies/)
*   [文本大声](http://www.nextup.com/index.html?source=GA&campaign=TTS&Adgroup=tts&ad=011&gclid=CI-x7MPwkpcCFQhJagodaAMq-w)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-02-11T04:06:21.590

[http://www.nuance.com/dragon/index.htm](http://www.nuance.com/dragon/index.htm) 是一个私有 API 帮助我们识别语音并将文本转换为语音

# c# - 指向 C# 中的指针（以及对引用的引用）的安全指针

> ID：320436
> 
> 赞同：3
> 
> 时间：2008-11-26T11:46:08.537
> 
> 标签：c#, .net

在我正在处理的 C# 应用程序中，我有一个很长的标识符，如下所示：-

```
foo.bar.bwah.blah.whatever.very.very.huge 
```

每当我引用这个对象时，这绝对是一场噩梦，不幸的是我确实需要大量引用它：-

```
var something = foo.bar.bwah.blah.whatever.very.very.huge.a;
var somethingElse = foo.bar.bwah.blah.whatever.very.very.huge.b;
foo.bar.bwah.blah.whatever.very.very.huge.c = 12; 
```

等等等等

我想使用某种更小的别名来更新此代码，但问题是我想更改底层引用，并且在*没有显式更新 alias 的情况下也更新别名*。

目前，如果我执行以下操作：-

```
foo.bar.bwah.blah.whatever.very.very.huge.a = "hello";
string shorter = foo.bar.bwah.blah.whatever.very.very.huge.a;
foo.bar.bwah.blah.whatever.very.very.huge.a = "world";
Console.WriteLine(shorter); 
```

它将输出“你好”。我想要实现的是以下内容： -

```
foo.bar.bwah.blah.whatever.very.very.huge.a = "hello";
string** shorterPointer = &foo.bar.bwah.blah.whatever.very.very.huge.a;
foo.bar.bwah.blah.whatever.very.very.huge.a = "world";
Console.WriteLine(**shorter); 
```

这将根据需要输出“世界”。

我相信您可以使用 C# 中的不安全代码来实现这样的目标，但是我*不能*这样做，我只能使用安全代码。

有人知道我如何实现这一目标吗？

**请注意：**这个问题不是关于字符串是不可变的，我知道它们是 - 事实上我认为它们是为了问题的目的。如果我使用其他类型可能会更简单......所以当我将“hello”分配给a然后将“world”分配给a时，我每次都*实例化不同的对象*，因此我存储的对a的引用在重新之后变得无效任务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-26T11:50:56.780

一种方法是使用一个或一对 lambdas。

例如：

```
Func<string> getter = () => blah_de_blah;
Action<string> setter = x => blah_de_blah = x; 
```

现在，您可以使用 getter 和 setter 来读取和写入长标识符。

但是，由于您的点是成员访问器，因此最简单的方法是引用直接父级，如下所示：

```
var myHuge = foo.bar.bwah.blah.whatever.very.very.huge;
// now access myHuge.a everywhere 
```

无论如何，这是一个很好的做法，因为像这样的长点表达式违反了[Demeter 定律](http://en.wikipedia.org/wiki/Law_of_Demeter)，这会抑制代码库的灵活性——它需要在太多地方提供太多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T12:49:28.207

我会使用命名空间别名。

```
using myAlias = foo.bar.bwah.blah.whatever.very.very 
```

然后在您的方法中，您只需键入：`myAlias.huge.a = "hello";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T12:01:04.480

第一件事。我会重新考虑你的架构。这似乎太复杂了！:)

无论如何，让我们开始做生意。

**字符串在 .NET 中是不可变的**，这就是您的问题。当您更改对象的属性时，您将在内存上创建一个新字符串并使用对象的属性指向那里。但是，这不会更改您的字符串变量（为什么要这样做？）。变量没有改变，所以它一直指向前一个字符串。

这就是问题所在，现在来解决。我建议创建对包含字符串的对象的引用，就在上一层，如下所示： foo.bar.bwah.blah.whatever.very.very.huge.a = "hello"; 巨大巨大 = foo.bar.bwah.blah.whatever.very.very.huge; 巨大的.a = "foo!";

希望能帮助到你！:)

# c# - 目录/文件权限问题

> ID：320443
> 
> 赞同：1
> 
> 时间：2008-11-26T11:48:23.117
> 
> 标签：c#, .net, .net-2.0, permissions, file-permissions

我编写了代码来设置文件夹的权限。我开发的功能是

```
public void SetPermission(string user,FileSystemRights rights)
{
    DirectoryInfo dInfo = new DirectoryInfo(folderPath);
    DirectorySecurity oDirectorySecurity = new DirectorySecurity();

    oDirectorySecurity.AddAccessRule(new FileSystemAccessRule(user, rights, AccessControlType.Allow));
    dInfo.SetAccessControl(oDirectorySecurity);
} 
```

此功能可以很好地为用户设置权限。但是当我检查文件夹 Properties -> Security 时，用户添加了。但是在复选框打开高级对话框中没有选中任何权限。在这个框中，我可以看到我为用户设置的权限。

所以我的问题是为什么在安全选项卡上没有选择复选框，但它在高级选项卡中？

请帮我！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T21:34:22.270

我也遇到了这个。这似乎是一个服务补丁的事情。

[您可以在http://jspot.jerryhanel.com/2009/01/08/c-filedirectory-permissions/](http://jspot.jerryhanel.com/2009/01/08/c-filedirectory-permissions/)阅读我如何修复它

简短版本：您必须为所有用户的所有 ACL 设置一个标志。是的……很丑。当您添加 Service Pack 3 时，复选标记会再次消失。如果有人有比这更清洁的解决方案，请告诉我。

我的网站上有相应的代码。

**更新**：URL 现在指向新站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-04T07:58:35.750

使用 dInfo.GetAccessControl 初始化 oDirectorySecurity 可能会有所帮助。您也可以尝试调用 oDirectorySecurity.SetOwner。

有时权限仅在未应用于正确对象时才会提前显示。尝试在 FileSystemAccessRule 对象上设置继承/传播标志。

# c# - 正则表达式中的重叠匹配

> ID：320448
> 
> 赞同：45
> 
> 时间：2008-11-26T11:50:44.080
> 
> 标签：c#, regex, overlap

我似乎找不到这个问题的答案，我想知道是否存在。简化示例：

考虑一个字符串“nnnn”，我想在其中找到“nn”的所有匹配项——但也包括那些相互重叠的匹配项。因此，正则表达式将提供以下 3 个匹配项：

1.  **嗯嗯**_
2.  n **n** n
3.  嗯嗯**_**

我意识到这并不完全是正则表达式的含义，但是手动遍历字符串并解析它似乎是很多代码，考虑到实际上必须使用模式而不是文字字符串来完成匹配。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-11-26T12:01:56.787

2016 年更新：

要获得`nn`, `nn`, `nn`, [SDJMcHattie](https://stackoverflow.com/users/772095/sdjmchattie)在[评论中建议](https://stackoverflow.com/questions/320448/overlapping-matches-in-regex/320478?noredirect=1#comment57488084_320478) [`(?=(nn))`（参见 regex101）](https://regex101.com/r/ET6Rvs/1/)。

```
(?=(nn)) 
```

* * *

原始答案（2008）

一个可能的解决方案可能是使用[正面的看法](http://www.regular-expressions.info/lookaround.html)：

```
(?<=n)n 
```

它会给你的最终位置：

1.  *n* **n** n  
2.  n *n* **n** n  
3.  n *n* **n**

* * *

正如 [Timothy Khouri](https://stackoverflow.com/users/11917/timothy-khouri)所提到的，**积极的前瞻**更直观（[参见示例](https://regex101.com/r/cLFqDC/1)）

我更喜欢他的提议`(?=nn)n`更简单的形式：

```
(n)(?=(n)) 
```

这将引用您想要的字符串的**第一个位置，****并将捕获 group(2) 中的第二个 n**。

之所以如此，是因为：

*   任何有效的正则表达式都可以在前瞻中使用。
*   如果它包含捕获括号，则**反向引用将被保存**。

因此 group(1) 和 group(2) 将捕获任何 'n' 表示的内容（即使它是一个复杂的正则表达式）。

* * *

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2008-11-26T16:52:39.230

对捕获组使用前瞻是可行的，但代价是使您的正则表达式变得更慢和更复杂。另一种解决方案是告诉 Regex.Match() 方法下一次匹配尝试应该从哪里开始。试试这个：

```
Regex regexObj = new Regex("nn");
Match matchObj = regexObj.Match(subjectString);
while (matchObj.Success) {
    matchObj = regexObj.Match(subjectString, matchObj.Index + 1); 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-26T11:57:56.343

AFAIK，没有纯粹的正则表达式方法可以立即执行此操作（即返回您请求的三个捕获而无需循环）。

现在，您可以找到一次模式，然后从偏移量（找到的位置 + 1）开始循环搜索。应该将正则表达式的使用与简单的代码结合起来。

[编辑] 太好了，当我基本上说出 Jan 所展示的内容时，我被否决了……
[编辑 2] 要明确：Jan 的答案更好。不是更精确，但肯定更详细，值得选择。我只是不明白为什么我的投票被否决了，因为我仍然没有看到任何不正确的地方。没什么大不了的，就是烦。

# sql - 用户为 SQL 字段提供的数据类型

> ID：320452
> 
> 赞同：1
> 
> 时间：2008-11-26T11:52:16.497
> 
> 标签：sql, sql-server, tsql, entity-attribute-value

我有一个包含多个字段的 SQL 表

身份证 | 价值 | 类型

典型的记录可能是：- 1000,10,[int]

第二行可能是：-

1001，富，[字符串]

第三行可能是：-

1002,10/12/2008,[日期时间]

目前，我被要求查看此内容，每次我们希望从该表中进行选择时，我们都必须将值转换为指定的类型。我能够对此进行数据库重新设计，并且想知道优化它的最佳途径。（SQL 2000）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T13:10:34.480

恐怖！这是可怕的[实体-属性-值 (EAV)](http://tonyandrews.blogspot.com/2004/10/otlt-and-eav-two-big-design-mistakes.html)模型！逃跑！

但说真的，假设有某种原因需要这种模型，也许为每种数据类型创建一个正确类型的列？

```
ID       Type      StringValue       DateValue      NumberValue
1001     String    Foo
1002     Date                        10/12/2008
1003     Number                                     123.46 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T13:21:27.003

通常，在设计表格时，您想知道其中实际包含什么。您是否需要支持不同数量的数据类型？你需要覆盖小数吗？一种可能的解决方案是这样的：

```
CREATE TABLE dbo.My_Table (
     id           INT NOT NULL,
     data_type    VARCHAR(10) NOT NULL,
     string_value VARCHAR(100) NULL,
     int_value    INT NULL,
     date_value   DATETIME NULL,
     CONSTRAINT CK_My_Table_data_type CHECK data_type IN ('int', 'string', 'datetime'),
     CONSTRAINT PK_My_Table PRIMARY KEY CLUSTERED (id)
)
GO 
```

然后，您可以使用数据类型来决定要选择或插入/更新的列。请记住，您在使用时可能会遇到问题：

```
SELECT
     id,
     CASE data_type
          WHEN 'string' THEN string_value
          WHEN 'int' THEN int_value
          WHEN 'datetime' THEN date_value
          ELSE NULL
     END 
```

SQL Server 要求所有数据类型都与要返回的列匹配。如果您一次只选择一个，它可能工作正常，但如果您想要选择数据集，那么您可能需要进行一些转换或只选择 data_type 值相等的行。不过，我还没有对所有场景进行测试，所以你应该尝试一下，看看哪些有效，哪些无效。

不过，我只想再说一遍，您应该再次查看应用程序的设计。您当然可能需要这种功能，但通常当我看到这种设计模式时，前端真正想要的是一个将在应用程序中显示的字符串。该字符串有时恰好看起来像一个数字或日期。如果您实际上要对数据执行数据类型特定的功能，那么可能需要一种不太“灵活”的设计，但在不了解您的所有要求的情况下我不能说。这只是我过去的经验。

编辑：看起来我打字太慢了，托尼打败了我。:)

# c - 为什么 main() 不能在 C 中声明为静态的？

> ID：320461
> 
> 赞同：9
> 
> 时间：2008-11-26T11:54:57.240
> 
> 标签：c, function, static, main

为什么 main 必须声明为好像它具有外部链接？

为什么它不应该是静态的？

外联是什么意思？？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-11-26T11:56:17.767

因为您将启动文件链接到您的程序，该程序包含（通常）调用您的 main 的汇编代码。如果 main 是静态的，那么该代码将无法调用 main。

`external linkage`意味着其他所谓的`translation-units`可以在自己的翻译单元中看到您声明的符号 extern。因此，您的 main 是 extern，它的翻译单元符号表中将有一个条目来说明其地址。然后，其他翻译单元将能够在他们想要调用 main 时跳转到该地址。

`static linkage`表示您的符号是严格的本地翻译单元。这意味着其他`translation units`人将无法看到该符号。因此，具有静态链接的符号可以多次出现在不同的翻译单元中，并且它们不会相互冲突，因为它们是本地的。

**编辑**：通常，编译器从翻译单元生成的文件特定于该特定编译器。对于 linux 上的 gcc，通常使用 ELF 对象格式。`readelf -sW <file>.o`您可以使用（下面的简单测试文件）查看其符号表：

*测试.c*

```
void bar(void);

static int foo(void) {
    return 1;
}

int main(void) {
    bar();
    return foo();
} 
```

这是 readelf 的输出：

```
Symbol table '.symtab' contains 10 entries:
   Num:    Value  Size Type    Bind   Vis      Ndx Name
     0: 00000000     0 NOTYPE  LOCAL  DEFAULT  UND
     1: 00000000     0 FILE    LOCAL  DEFAULT  ABS test.c
     2: 00000000     0 SECTION LOCAL  DEFAULT    1
     3: 00000000     0 SECTION LOCAL  DEFAULT    3
     4: 00000000     0 SECTION LOCAL  DEFAULT    4
     5: 00000000    10 FUNC    LOCAL  DEFAULT    1 foo
     6: 00000000     0 SECTION LOCAL  DEFAULT    6
     7: 00000000     0 SECTION LOCAL  DEFAULT    5
     8: 0000000a    36 FUNC    GLOBAL DEFAULT    1 main
     9: 00000000     0 NOTYPE  GLOBAL DEFAULT  UND bar 
```

您会看到 main 函数和一个由 main 调用的静态 foo 函数。还有一个函数被调用，它没有在文件中定义，但在另一个目标文件中定义。由于目标文件尚未最终链接，因此尚未为函数分配最终地址。在最终链接之后，这些将被安排到可执行文件中并分配地址。目标文件具有调用尚未定义的函数的条目，因此当文件被链接时，这些调用指令可以存储最终地址（`readelf -r <file>.o`）：

```
Relocation section '.rel.text' at offset 0x308 contains 1 entries:
 Offset     Info    Type            Sym.Value  Sym. Name
0000001c  00000902 R_386_PC32        00000000   bar 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-11-26T11:57:02.290

代码的真正起点隐藏在 C 运行时库中。此运行时库调用您的 main() 例程。为了让链接器将 C RTL 调用与您的 main() 函数连接起来，它需要在文件外部可见。

外部链接就是这样：这意味着所讨论的名称作为目标文件导出的一部分是可见的。链接器的工作是连接所有的导入和导出，这样就没有未完成的导入。

# c# - ASP.NET MVC 验证和视图

> ID：320466
> 
> 赞同：4
> 
> 时间：2008-11-26T11:57:05.660
> 
> 标签：c#, asp.net-mvc

我正在使用 MVC 验证页面上的一些 html 文本框，例如在我的控制器中有

```
 if (String.IsNullOrEmpty(name))
        {
            ModelState.AddModelError("name", "You must specify a name.");
        }

        if (ViewData.ModelState.IsValid)
        {
            return RedirectToAction("Index");
        } 
```

返回视图（）；

问题就在这里，如果验证失败，则返回 View("Add") 失败，原因是控制器在返回 view() 上不处理视图，一个选项是使用 RedirectToView("viewname"); 这会很好，除非它没有通过验证 AddModelError 的东西（“就像第一次加载页面一样”）。

我可以通过在 return View(); 之前重复填充 SelectList 框的代码来解决这个问题；

像这样

```
 ViewData["rooms"] = new SelectList(Villa.intList(10));
        ViewData["sleeps"] = new SelectList(Villa.intList(20));
        ViewData["accomodationType"] = new SelectList(accomodationList, "accomodationId", "accomodationType");
        ViewData["regionName"] = new SelectList(regionList, "regionId", "regionName");
        return View(); 
```

效果很好，但是，我认为有一种更好的方法，而不是重复该代码块，有没有人知道返回重定向视图并将模型错误传递给它的任何方法？

在此先感谢，希望它有某种意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-26T14:02:13.627

Take the code you have for initializing the ViewData in the (GET) Add action, and refactor it (extract method) into a standalone, private method. Call that method from your (GET) Add action. Now in the POST action (which is, I presume, what you're showing above; it isn't clear) you can call the same, private method to populate ViewData. Now you no longer have any duplicated code. Remember that ViewData is a property of the Controller type, so you can set it anywhere, not just in the action method itself.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T12:58:22.103

我必须承认，我对你的意思有些困惑，所以这是一个可能不准确的通用答案！

[http://weblogs.asp.net/scottgu/archive/2008/09/02/asp-net-mvc-preview-5-and-form-posting-scenarios.aspx](http://weblogs.asp.net/scottgu/archive/2008/09/02/asp-net-mvc-preview-5-and-form-posting-scenarios.aspx)

这是一本好书。

我可以想到两种方法。

要更改最少的代码，只需将您的 ViewData 放入 TempData 并在 Redirect 之后检索它。

The probably more accepted answer is to use the method described in the link above. Have your form post back to the same action. That action will have two implementations -- a Post and a Get. In the Post action, do all validation logic. If the validation works, do a redirect action to whatever view you display on success (Post-Redirect-Get pattern). If the validation fails, redisplay the same view of the form with the validation errors displayed.

If this isn't what you are asking, lemme know~

# java - 基于浏览器的文档签名（带数字签名）的最佳跨浏览器解决方案是什么？

> ID：320477
> 
> 赞同：2
> 
> 时间：2008-11-26T12:01:18.613
> 
> 标签：java, cryptography, digital-certificate, pki

我需要实现一个基于浏览器的组件（很可能是 java 小程序，因为它需要跨浏览器），它允许我们对 XadES 格式的数据进行数字签名和验证。有哪些可用选项以及最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T22:40:12.210

我认为最好的解决方案是构建一个 Web 服务，或者如果适用，将它直接构建到您的应用程序中。除非您想提供有关您计划如何实施它或任何其他平台/业务限制的更多详细信息，否则在这一点上找到最佳解决方案是一个未知数。

所以这就是我将如何开始

谷歌这个：**XadES jar library** 尝试一个链接，然后看看它是否能满足你的所有需求。

如果它不尝试下一个链接，看看是否效果更好。

确保它适用于所有浏览器的最佳方法是通过 Web 服务而不是小程序在服务器上执行工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-02T17:39:34.877

我找到了一个似乎可以工作，但仍在开发中并且有一些错误： [http ://projectestic.uji.es/pr/cryptoapplet/](http://projectestic.uji.es/pr/cryptoapplet/)

# c# - C# 线程，GetAvailableThreads()

> ID：320479
> 
> 赞同：1
> 
> 时间：2008-11-26T12:02:42.667
> 
> 标签：c#, multithreading

我有一个线程问题，

我设置`ThreadPool.SetMaxThreads(maxThreads, System.Environment.ProcessorCount)`为 10。

但是当我检查有多少可用`ThreadPool.GetAvailableThreads()`时，它说有 (maxThreads - 1) 所以 9，然后继续使用 10 个线程。

任何想法为什么会这样？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T15:07:31.530

您是否正在用类似的东西排队线程？

```
ThreadPool.QueueUserWorkItem(callback, obj) 
```

然后做类似的事情：

```
WaitHandle.WaitAll(WaitHandle) 
```

我的猜测是，您实际计算正在运行的线程的方式存在问题，但没有更具体地解释您在做什么，这只是一个猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T12:39:15.637

在理想的世界中，我们将有 1 个线程/物理内核。这样，我们将不再有上下文切换，这是相当昂贵的操作。但在我们拥有具有数百个内核的处理器之前，这是不切实际的。

无论如何，正如 Marc 所建议的那样，除非您真的知道自己在做什么，否则您不应该弄乱 ThreadPool 参数。.Net 实现 ThreadPool 背后的逻辑比较好，可以成功处理大部分场景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-27T18:44:03.513

One of the threadpool threads is monitoring the wait operations of the other threads in the thread pool. That should explain the maxthreads - 1 result.

I am not sure why it would appear to use all 10 threads then. It might be that it is using 9 for your work, 1 for monitoring and queuing the other.

# c# - 哪个更好地在嵌套的 If 中应用两个条件或在 And 中使用单个条件？

> ID：320480
> 
> 赞同：17
> 
> 时间：2008-11-26T12:04:13.023
> 
> 标签：c#, vb.net

嵌套 If 或单 if 与 And 运算符，哪种方法更好？
**单 If 和 A​​nd**

```
if (txtPackage.Text != string.Empty && txtPackage.Text == "abc")
{
   //
} 
```

**嵌套如果**

```
if (txtPackage.Text != string.Empty)
{ 
  if (txtPackage.Text == "abc")
  {
     //
  }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-26T12:16:06.167

我不打算插话，但看到这里的一些答案似乎是关于“我喜欢我的代码*看起来*像这样”......我觉得我应该说点什么:)

“更好”意味着代码将执行得更快，或者更具可读性/可扩展性。如果您可能有多个检查都具有共同的要求，您可能**希望嵌套您的 if。**

例子：

```
if (myThingy != null)
{
    if (myThingy.Text = "Hello") ...

    if (myThingy.SomethingElse = 123) ...
} 
```

编辑：还需要说嵌套你的 IF 比单个 IF 需要更多的 CPU 周期（因此“更慢”）。最重要的是，条件的顺序可以大大提高性能。

再举个例子：

```
if (somethingQuick() && somethingThatTakesASecondToCalculate()) ... 
```

比（当然）快很多

```
if (somethingThatTakesASecondToCalculate() && somethingQuick()) ... 
```

因为如果 IF 的第一部分失败，第二部分甚至不会被执行，从而节省了时间。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-26T12:08:13.780

如果实际上 txtPackage.Text 不为空但包含“abc”以外的内容，您是否要在“嵌套 if”示例中做一些不同的事情？

如果你不是，我会问你为什么要检查 string.empty 呢？

你可以写：

```
if (txtPackage.Text == "abc")
{

//

} 
```

并完成它。

完全取决于你最终想做什么。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-01-14T20:22:25.690

没有人提到维护该代码。哪个更容易调试？

如果失败：

```
if (thisIsTrue && thisIsTrueToo)
    doStuff(); 
```

你知道这两个语句中的一个失败了，但不知道是哪一个。

如果失败：

```
if (thisIsTrue) {
  if (thisIsTrueToo)
    doStuff();
} 
```

你的例外告诉你行号。我说要易于维护，因为您可能不会永远使用此代码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-26T12:11:11.013

您确实需要定义“更好”的含义。

我的风格是使用一个 if 和一个 AND if，就像在您的示例中一样，我正在为两个不同的值测试相同的东西。

如果这两个测试在概念上不同，我可能会嵌套它们

```
if (!user_option.work_offline) {
    if (no_current_connection) {
        start_connection()
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-26T13:20:00.890

这取决于您想要实现的目标。这是一个逻辑问题，而不是编程查询。如果你有一个依赖条件，即如果第一个是 TRUE，然后测试第二个条件；如果第二个 TRUE 然后做某事，如果 FALSE 做某事，在这种情况下你需要使用嵌套的 if。但是你需要两个条件的状态才能做某事，然后你可以和操作员一起去。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-26T12:25:41.780

我觉得最好避免嵌套ifs。

有时，我什至会复制简单的测试来避免嵌套级别。

示例（蟒蛇）：

```
# I prefer:
if a and b:
    foo()
elif a and not b:
    bar()
elif not a and b:
    foobar()
elif not a and not b:
    baz()

# Instead of:
if a:
    if b:
        foo()
    else:
        bar()
else:
    if b:
        foobar()
    else:
        baz()
```

有时将 else 子句作为最后一部分更为自然。在这些情况下，我通常断言 else 子句的条件。例子：

```
if a and b:
    foo()
elif a and not b:
    bar()
elif not a and b:
    foobar()
elif not a and not b:
    baz()
else:
    assert not a and not b
    baz()
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-26T12:12:20.840

+1 到它的马特

在最初的问题上，我个人尽可能避免嵌套 if，否则我会得到很多箭头代码。

然而，这条小规则也有例外。如果每个条件结果都有不同的行为，那么嵌套的 if*可能*是一个答案。您需要仔细考虑嵌套的影响，以免编写难以阅读（并因此维护）的代码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-26T12:16:20.923

我更喜欢在需要时使用条件 AND/OR 运算符，而不是嵌套 if。看起来不那么凌乱，代码行数也更少。

```
if (thisIsTrue) {
if (thisIsTrueToo) doStuff();
} 
```

本质上与：

```
if (thisIsTrue && thisIsTrueToo) doStuff(); 
```

如果 thisIsTrue 为假，则不评估第二个条件。也适用于 || 对于条件 OR。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-26T12:16:44.823

我认为这取决于你希望它如何流动，如果你只在真、真（或任何其他奇点）上执行，那么你只需要一个 if 语句。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-27T03:36:01.817

在我看来，您应该使用对您正在测试的内容最有意义的样式。如果两者紧密耦合，您可以在同一条线路上测试两者而不会失去清晰度。当程序允许“if x == (1 OR 2)”结构时特别容易。

另一方面，如果这两个测试是脱节的，我宁愿将它们分开以使逻辑更明确。

# wpf - 自定义文本 MenuItem.Header 中的 AccessKey/Hotkey 可能吗？

> ID：320481
> 
> 赞同：2
> 
> 时间：2008-11-26T12:04:23.383
> 
> 标签：wpf, xaml, header, menuitem

是否可以像任何其他标准菜单项一样访问以下格式化的菜单项（使用下划线方法，例如“_File”可以通过按“f”访问）？我想在这里使用“O”作为“访问密钥”。

不幸的是，`<AccessText>`似乎不能直接使用（我成像类似

```
<AccessText Visibility="Collapsed">_O2-Genion</AccessText> 
```

在 a 中`<StackPanel>`，但是很遗憾，这没有成功。）

```
<MenuItem>
  <MenuItem.Header>
    <TextBlock>
      O
      <Span BaselineAlignment="Subscript">
        <TextBlock Margin="-3,0,0,0" FontSize="8">
        2
        </TextBlock>
      </Span>
      -Genion
    </TextBlock>
  </MenuItem.Header>
</MenuItem> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T13:24:24.110

由于我需要下标，我无法避免自定义格式。我发现这是一个丑陋但显然可能的解决方案如下：

```
<MenuItem>
  <MenuItem.Header>
    <StackPanel Orientation="Horizontal">
      <AccessText>_O</AccessText>
      <TextBlock>
        <Span BaselineAlignment="Subscript" FontSize="8">2</Span>-Genion
      </TextBlock>
    </StackPanel>
  </MenuItem.Header>
</MenuItem> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T12:57:58.313

你甚至需要使用 AccessKey 吗？假设您不需要/想要 MenuItem 标题文本的自定义样式，您可以通过执行以下操作获得相同的效果：

```
<MenuItem HeaderText="_02" /> 
```

只是在 0 工作前加下划线吗？虽然我似乎记得 TextBlock 和 Label 之间的一个区别是 TextBlock 不支持访问键，但 Label 支持。如果是这种情况，也许在您的菜单项中使用标签而不是文本块？

# facebook - 从特定的 facebook 墙上获取消息的好方法是什么？

> ID：320482
> 
> 赞同：1
> 
> 时间：2008-11-26T12:04:24.723
> 
> 标签：facebook, api, facebook-wall

有一个群墙，我想下载其中的所有消息并将其存储在数据库中。在文档中，我找不到一个好的方法来做到这一点。我错过了什么？这样做的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-26T12:18:40.997

如果它们不能作为 rss 或 atom 供稿供下载，我会感到非常惊讶。（它不使用 API，但可能是最便宜的方式。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-01-26T13:45:15.907

使用 Graph API 来获取墙贴，它以漂亮的 JSON 格式返回项目。有关更多信息，请参阅[https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)。

# asp.net - WebResource Hell - 找不到资源

> ID：320484
> 
> 赞同：14
> 
> 时间：2008-11-26T12:07:10.333
> 
> 标签：asp.net, embedded-resource

将 javascript 文件标记为“嵌入的资源”
向我的 AssemblyInfo 类添加了 WebResource 属性

现在我正在尝试将嵌入的 javascript 输出到我的母版页。我得到的只是来自网络资源网址的“未找到网络资源”。

项目组合名称：

```
CompanyProduct 
```

项目默认命名空间：

```
Company.Product.Web 
```

Javascript 文件位于：
Library/navigation.js

装配信息：

```
[assembly: WebResource("CompanyProduct.Library.navigation.js", "text/javascript")] 
```

母版页中的代码：

```
Page.ClientScript.RegisterClientScriptInclude("NavigationScript", Page.ClientScript.GetWebResourceUrl(this.GetType(), "CompanyProduct.Library.navigation.js")); 
```

# “/”应用程序中的服务器错误。

## *无法找到该资源。*

**说明：** HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

**请求的 URL：** /WebResource.axd
**版本信息：**  Microsoft .NET Framework 版本：2.0.50727.1433；ASP.NET 版本：2.0.50727.1433

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-02-08T16:45:51.543

而不是`this.GetType()`，从包含资源的程序集中获取类型..即：

```
typeof(Company.Product.Web.Library.Class1) 
```

那样有用吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-08-09T13:06:38.383

今天遇到了同样的问题。问题似乎是 AssemblyResourceLoader 使用包含提供给`GetWebResourceUrl`方法（第一个参数）的类型的程序集，在您的情况下，该程序集是为母版页（.master）动态创建的程序集，并且不包含您正在寻找的资源。我假设您的资源文件包含在与基本母版页（.master.cs 文件）相同的程序集中，然后您可以使用它`typeof`来获取 Type 实例

```
Page.ClientScript.RegisterClientScriptInclude(
   "NavigationScript",
   Page.ClientScript.GetWebResourceUrl(
      typeof(MyMasterPage),
      "CompanyProduct.Library.navigation.js")); 
```

其中 MyMasterPage 是您的母版页的名称

看起来也可以使用在嵌入资源的同一程序集中声明的任何其他类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-26T13:36:37.580

我认为您希望完整路径基于命名空间，而不是程序集；因此，在您拥有“CompanyProduct.Library.navigation.js”的任何地方，将其替换为“Company.Product.Web.Library.navigation.js”。此外，还有一种方法 Page.ClientScript.RegisterClientScriptResource() 可以在一种方法中完成您需要的工作（而不是使用 RegisterClientScriptInclude(GetWebResourceUrl()）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-26T23:24:21.690

这有点抓住了稻草，但可能是您的 asp.net 没有设置为正确处理 webresource.axd 吗？如果出现问题，可能机器的 web.config 中缺少处理程序标记？

C:\Windows\Microsoft.NET\Framework\v2.0.50727\CONFIG\web.config 的 http 处理程序标记应该有一个 webresource.axd 条目，如下所示：

```
<httpHandlers>
    <add path="WebResource.axd" verb="GET" type="System.Web.Handlers.AssemblyResourceLoader" validate="True"/>
</httpHandlers> 
```

还要仔细检查项目的 web.config 中没有任何可能覆盖机器 web.config 设置的处理程序条目。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-12-14T20:29:40.493

这个博客已经有两年历史了……但我花了几天时间试图让它发挥作用。试图获得一个嵌入式 js 文件以实际给我一个可以工作的 WebResource.asx 查询字符串。似乎在这里被掩盖的最后一点是，您嵌入的文件必须与您从中调用的控件代码隐藏位于相同的物理目录结构中`GetWebResourceUrl()`。如果您将嵌入文件放在名为“scripts”的文件夹中，然后`GetWebResourceUrl()`从“scripts”中找不到的母版页调用，则返回的 ResourceURL 将指向错误的位置......因此总是返回 404。

如果您使用 MasterPage 作为第一个参数的类型，那么它将永远无法工作。 `GetWebResourceUrl(typeof(MasterPage)`,... 我想这里真正的关键是您必须将嵌入的资源放到您将用作 ResourceURL 的第一个参数的类型的相同位置。经过3天的努力，它终于找到了我的资源。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-02-21T21:43:31.883

对于碰巧使用 VB 的任何人 - VB 编译器和 C# 编译器之间的行为存在差异。

在 VB 中，嵌入式资源必须位于项目的根级别。当我使用 ILDASM 查看生成的程序集时，我发现嵌入资源的名称从不包含任何子文件夹的名称。这最终会导致 AssemblyLoader 在错误的位置查找嵌入的资源。

当您使用 C# 重复实验时，它确实包含子文件夹的名称。

编辑 - 更改以反映 VB 必须位于根级别的资源。

我成功的是将嵌入资源与使用它的代码放在同一个文件夹中（更好地进行源代码控制）。然后我在 Attribute 和 Page.ClientScript.GetWebResourceUrl 调用中撒谎，以说明 VB 编译器声称嵌入的资源没有路径。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-31T23:22:41.810

刚遇到这个问题，根据meandmycode的回复解决了；但是，也许需要更详细的解释。

当您使用该`ScriptManager.RegisterClientScriptInclude`方法注册脚本块时，“type”参数必须属于与 .js 脚本相同的项目中的类。如果您没有与脚本块关联的类，您将只需要选择另一个类。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-22T16:10:31.653

我遇到了类似的问题，就我而言，这是由于`Page.ClientScript.GetWebResourceUrl` **resourceName**参数**区分大小写**而引起的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-26T23:13:43.360

您的问题的答案完全取决于您在实际项目中拥有此文件的位置，以及默认命名空间是什么。正如 Chris 所提到的，您为注册脚本的方法提供的路径需要正确的路径来定位嵌入的资源。您不只是匹配您在 AssemblyInfo 中指定的字符串。该字符串必须是资源的正确路径。

<默认项目命名空间>/<文件所在的任何子文件夹>/<文件名>

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-27T00:37:21.613

转这个；

```
Page.ClientScript.RegisterClientScriptInclude("NavigationScript"... 
```

进入这个；

```
Page.ClientScript.RegisterClientScriptInclude("CompanyProduct.Library.navigation.js"... 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-27T07:24:49.743

您在不同程序集中添加的资源是否与您用于生成脚本标记的代码不同？如果是这种情况，我认为 this.GetType() 将返回对错误程序集中类型的引用，因此 Web 资源代码将没有正确的程序集来加载资源。

我不确定这会是一个问题，但在我看来，生成名称的代码需要知道资源所在的程序集，否则它无法映射回该程序集收到来自浏览器的请求。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-04-21T14:19:44.843

我也遇到过类似的情况，经过大约 4 个小时的研究和测试，我得到了最终的解决方案：**Default Namespace 必须与 Assembly Name 相同**。
（可以使用 Reflector 或使用下面的代码片段来获取嵌入资源的名称。

```
string[] embeddedResNames = Assembly.LoadFile("YourDll.dll").GetManifestResourceNames() 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2011-10-27T11:58:25.423

正如meandmycode已经提到的，传递给的类型`GetWebResourceUrl`是关键

我不喜欢在无关紧要的地方传递类型，我用这种辅助方法解决了它

```
static public string GetEmbeddedResourceLink(Page page, string assemblyName, string resource) {
    var assembly = Assembly.Load(assemblyName);
    var types = assembly.GetTypes();
    if (types.Length == 0) {
        throw new ArgumentException("assembly does not contain any type");
    }
    return page.ClientScript.GetWebResourceUrl(types[0], resource);
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-02-08T09:00:47.943

[assembly: ] 属性必须在 Properties\AssemblyInfo.cs 文件中。即使在程序集属性位于自定义控制文件中时编译项目，它们对 WebResource.axd 也是不可见的。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-10-20T16:58:09.120

在这里尝试了大多数解决方案之后，我遇到了[另一个有效的 StackOverflow 答案](https://stackoverflow.com/a/17738388)。

DLL 上标记的时间必须在当前时间之后，否则`WebResource.axd`将无法从中提供资源。

这种机制似乎完全不知道时区差异。如果您的 CI 服务器位于比您的目标 Web 服务器更东的时区，则区域之间的时差会导致资源不可用，直到 Web 服务器时间达到 DLL 上的时间。解决方案是使用构建脚本中的[Set-TimeZone](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/set-timezone?view=powershell-7)确保您的 CI 代理的时区设置为与您的目标服务器相同（或更西） 。

当然，理想的解决方案是将所有服务器设置为 UTC，但并非所有应用程序都被编码为与时区无关。

# iphone - 将 iPhone 可翻转首选项设置为看起来像系统设置

> ID：320485
> 
> 赞同：0
> 
> 时间：2008-11-26T12:07:10.507
> 
> 标签：iphone, cocoa-touch

当 iPhone 应用程序管理自己的首选项而不是使用捆绑包时，通常的做法是设置视图的样式以模仿系统首选项应用程序：字段由带有圆角的浅色矩形分组；标题和解释性文字被添加到它们之间的空白处。

最好使用什么来实现这种样式？我最初的想法是视图的背景图像，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-26T12:12:20.747

您需要使用具有“组”样式的 UITableView。我见过一些用图形“伪造”它的应用程序，但是用正确的组件来做这件事并不是非常棘手。主要的缺点是您不能在 Interface Builder 中完成所有操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T20:11:01.403

WordPress 应用程序执行此操作。查看 BlogDetail 控制器和 nib。当表格向控制器请求行/节数据时，您会看到许多返回的 UITableViewCell。

您可以在[Wordpress iPhone 网站](http://iphone.wordpress.org/contribute/)上找到代码。

# ms-access - 升级到 Access 2007，信任中心问题

> ID：320497
> 
> 赞同：0
> 
> 时间：2008-11-26T12:13:13.753
> 
> 标签：ms-access, ms-access-2007

升级到 Access 2007 时，有没有办法在网络环境中自动设置信任中心位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-26T19:02:04.897

您可以使用您的组策略工具来强制本地和网络位置。

[http://technet.microsoft.com/en-us/library/cc178948.aspx](http://technet.microsoft.com/en-us/library/cc178948.aspx)

请注意，如果此操作失败，通常是组策略分发错误。

# apache-flex - ActionScript 中的绑定如何工作？

> ID：320499
> 
> 赞同：12
> 
> 时间：2008-11-26T12:13:32.973
> 
> 标签：apache-flex, actionscript-3, data-binding, air

据我了解，绑定到 ActionScript 中的 var 是通过更改 var 时自动触发的事件来执行的。我对此有几个问题：

1.  如果类没有显式扩展 EventDispatcher 会发生什么？编译器中是否存在某种魔法，本质上使该类成为 EventDispatcher？
2.  绑定到静态变量如何工作？类中是否添加了某种隐式静态 addEventListener() 函数？
3.  我注意到您可以将 [Bindable] 放在静态变量上，但不能放在静态函数上，这是为什么呢？

编辑：

感谢 Christophe Herreman 的启发性回答。但是，我从上面的问题中得到了一些后续。我想知道是否有人可以为我填补空白（我试图将这些问题编号为 4、5、6，但由于某种原因它们出现了 1、2、3！）

4.  我在编译器中添加了 -keep 选项并查看了生成的绑定代码。谁能解释如何应用此代码？编译器似乎为每个类生成了一个名为 BindableProperty 的类，其中包含 getter 和 setter。这如何融入我写的课程中？该功能看起来有点像 C# 中的部分类 - 这是专门的幕后编译器功能，还是我可以自己使用的功能？

5.  BindableProperty类依然没有显式实现EventDispatcher，生成的类是如何实现事件调度的呢？

6.  在问题 3 中，我询问了绑定到静态函数的问题，但我实际上是指静态 getter 和 setter 函数。这似乎是不允许的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-11-26T19:11:29.433

绑定确实通过事件分派起作用。通过将 -keep 标志添加到编译器设置，您可以从生成的 Actionscript 代码中学到很多东西。

我会尽力回答你的问题。

1.  编译器将获取 [Bindable] 元数据标记，并为您标记为可绑定的每个属性创建一个 getter 和 setter。getter 只会返回属性的值。setter 将检查新值是否与原始值不同，如果不同，将调度 PropertyChange 事件。

2.  基本上与实例属性相同，只是现在创建了静态 getter 和 setter。此外，还创建了一个 mx.binding.StaticPropertyWatcher 来观察静态属性的变化。

3.  绑定到静态方法时，您会收到以下警告：“[Bindable] 在应用于不是 getter 或 setter 的函数时需要事件名称参数。” 描述几乎说明了一切。由于您没有专门为此方法触发的“propertyChange”事件，因此您必须自己调度一个自定义事件。那就是 [Bindable(event="customEvent")] ，然后从你的类中的某个地方分派那个事件。

# c# - 如何使用方法调用生成已编译的 lambda？

> ID：320500
> 
> 赞同：1
> 
> 时间：2008-11-26T12:14:44.173
> 
> 标签：c#, lambda, expression-trees

我在运行时为给定成员生成编译的 getter 方法。现在，我的代码只是假设 getter 方法的结果是一个字符串（适用于测试）。但是，我想使用我编写的自定义转换器类来完成这项工作，见下文，我添加的“ConverterBase”参考。

我不知道如何将对转换器类的调用添加到我的表达式树中。

```
 public Func<U, string> GetGetter<U>(MemberInfo info)
    {
        Type t = null;
        if (info is PropertyInfo) 
        {
            t = ((PropertyInfo)info).PropertyType;
        }
        else if (info is FieldInfo)
        {
            t = ((FieldInfo)info).FieldType;
        }
        else
        {
            throw new Exception("Unknown member type");
        }

        //TODO, replace with ability to specify in custom attribute
        ConverterBase typeConverter = new ConverterBase();

        ParameterExpression target = Expression.Parameter(typeof(U), "target");
        MemberExpression memberAccess = Expression.MakeMemberAccess(target, info);

        //TODO here, make the expression call "typeConverter.FieldToString(fieldValue)"

        LambdaExpression getter = Expression.Lambda(memberAccess, target);

        return (Func<U, string>)getter.Compile();
    } 
```

我正在寻找在第二个 TODO 区域中放置的内容（我可以处理第一个 :)）。

生成的编译 lambda 应该以 U 类型的实例作为参数，调用指定的成员访问函数，然后使用结果调用转换器的“FieldToString”方法，并返回结果字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-26T12:22:38.010

您能否说明您希望表达式评估什么（如果它是常规 C#）？我可以很容易地写出这个表达式 - 我只是不完全理解这个问题......

（编辑重新评论） - 在这种情况下，它会是这样的：

```
 ConverterBase typeConverter = new ConverterBase();
    var target = Expression.Parameter(typeof(U), "target");
    var getter = Expression.MakeMemberAccess(target, info);
    var converter = Expression.Constant(typeConverter, typeof(ConverterBase));

    return Expression.Lambda<Func<U, string>>(
    Expression.Call(converter, typeof(ConverterBase).GetMethod("FieldToString"),
        getter), target).Compile(); 
```

或者，如果类型拒绝绑定，则需要注入强制转换/转换：

```
 MethodInfo method = typeof(ConverterBase).GetMethod("FieldToString");
    return Expression.Lambda<Func<U, string>>(
        Expression.Call(converter, method,
            Expression.Convert(getter, method.GetParameters().Single().ParameterType)),
            target).Compile(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-26T12:17:51.763

您需要将对象包装在 ExpressionConstant 中，例如使用 Expression.Constant。这是一个例子：

```
class MyConverter
{
    public string MyToString(int x)
    {
        return x.ToString();
    }
}

static void Main()
{
    MyConverter c = new MyConverter();

    ParameterExpression p = Expression.Parameter(typeof(int), "p");
    LambdaExpression intToStr = Expression.Lambda(
        Expression.Call(
            Expression.Constant(c),
            c.GetType().GetMethod("MyToString"),
            p),
        p);

    Func<int,string> f = (Func<int,string>) intToStr.Compile();

    Console.WriteLine(f(42));
    Console.ReadLine();
} 
```

# macos - 如何在多台 Mac 上同步您的 MAMP 安装

> ID：320501
> 
> 赞同：8
> 
> 时间：2008-11-26T12:15:37.760
> 
> 标签：macos, synchronization, mamp, dropbox

我在 iMac 和 Macbook 上设置了 MAMP。我想使用[dropbox](http://www.getdropbox.com)保持两个安装同步。升级 MAMP 时，您需要传输的仅有 2 个文件夹是“db”和“htdocs”。我的理论是这些是我需要保持同步的仅有的 2 个文件夹。到目前为止你觉得对吗？

同步“htdocs”文件夹很容易，因为您可以将其放入保管箱并将 MAMP 首选项指向保管箱文件夹，但“db”文件夹没有这样的选项。

关于如何保持“db”文件夹同步的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-11-18T09:25:55.083

无需使用终端即可为 MAMP 的“db”文件夹创建符号链接的一种简单方法是使用名为 SymbolicLinker 的 Mac OS X 服务，如下所述：http: [//www.stucktogetherwithtape.com/blog/2009/12/sync -web-dev-with-mamp-and-dropbox/](http://www.stucktogetherwithtape.com/blog/2009/12/sync-web-dev-with-mamp-and-dropbox/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-21T02:33:03.287

我最终做的是将我的 hotdocs 文件夹放入我的保管箱并将 MAMP 中的路径更改为保管箱版本。我比请朋友为我设置了几个 mysql 远程数据库。这种组合效果很好。我必须使用 Sequel Pro 来访问数据库，这是一个不错的应用程序。我最初希望使用 phpmyadmin 或学习终端，但这些功能在我的 mates 服务器上不可用。希望这对其他人有帮助。

Dropbox 也有这么小的延迟，以至于我什至发现自己在一个 comp 上编码并在另一个 comp 上刷新。Dropbox 值得寻找用途。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-27T13:38:49.150

您是否必须保持数据库的二进制数据文件同步？

我认为这是为了开发，我建议使用“适当的”版本控制系统（如[git](https://stackoverflow.com/questions/315911)、[hg](http://www.selenic.com/mercurial/wiki/)、[darcs](http://darcs.net/)等），但这应该适用于使用 Dropbox 或任何其他文件同步工具。

只需像往常一样同步代码，但将您的数据库模式和一些测试数据导出到一个常规文件中（可能作为`.sql`MAMP 包含的 phpMyAdmin 工具的转储），并保持同步。由于它是常规文件，因此您应该没有任何问题。

您可以编写一个小脚本来擦除数据库并使用模式文件填充它，而另一个则相反（将数据库转储到文件中）。在开始工作之前，您运行`importdatabase`脚本。完成后，运行`dumpdatabase`脚本。

基本上，将您的数据库导出到 .sql 文件，然后进行同步。

其他选项只是同步整个 MAMP 文件夹（尽管它很大），或者将`db`文件夹移动到 DropBox 的文件夹，然后将其符号链接`/Applications/MAMP/db/`到此处（使用命令`ln -s /Applications/MAMP/db/ /Volumes/DropBoxFolder/db/`- 在 Finder 中创建别名似乎不起作用同样，烦人..）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-27T12:19:38.373

好的，所以我认为我的解决方案必须是 chronosync [http://www.econtechnologies.com/site/Pages/ChronoSync/chrono_overview.html](http://www.econtechnologies.com/site/Pages/ChronoSync/chrono_overview.html)和 dropbox 的组合。

在 macbook 和 iMac 上都有一份 cronosync 副本，然后在任何一台机器上开始工作之前手动运行 chronosync 以将 MAMP 'db' 文件夹与 dropbox 'db' 文件夹同步。

除非有人有更好的主意。谢谢。

# c++ - C++：如何在堆栈上创建对象数组？

> ID：320506
> 
> 赞同：5
> 
> 时间：2008-11-26T12:17:37.537
> 
> 标签：c++, arrays, stack, oop

考虑以下一段 Java 代码。

```
int N = 10;
Object obj[] = new Object[N];
for (int i = 0; i < N; i++) {
    int capacity = 1000 * i;
    obj[i] = new ArrayList(capacity);
} 
```

因为在 Java 中，所有对象都存在于堆上，数组不包含对象本身，而是对对象的引用。此外，数组本身也是一个对象，因此它存在于堆上。

C++ 中的等价物是什么，但将数组和对象保留在堆栈上，以尽可能避免需要 new 和 delete ？

编辑：更改代码以使用自定义构造函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-26T12:20:42.537

简单地声明

```
Object array_of_objects[10]; 
```

在 C++ 中，在堆栈上创建了 10 个默认构造的 Object 类型的对象。

如果您想使用非默认构造函数，这在 C++ 中并不容易。可能有一种放置新的方法，但我不能告诉你我的头顶。

**编辑：链接到 StackOverflow 上的其他问题** How to useplacement new for the array 在 StackOverflow 上对[这个问题](https://stackoverflow.com/questions/15254/can-placement-new-for-arrays-be-used-in-a-portable-way)的回答中进行了解释。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-26T12:21:27.730

在 C++ 中，堆栈上不可能有一个大小在运行时确定的数组。在这里，您使用 std::vector 来做到这一点：

```
int N = 10;
std::vector<Object> obj(N);
// non-default ctor: std::vector<Object> obj(N, Object(a1, a2));
// now they are all initialized and ready to be used 
```

如果在编译时知道大小，则可以继续使用普通数组：

```
int const N = 10;
Object obj[N];
// non-default ctor: Object obj[N] = 
//     { Object(a1, a2), Object(a2, a3), ... (up to N times) };
// now they are all initialized and ready to be used 
```

如果你被允许使用 boost，最好使用 boost::array ，因为它提供了像容器一样的迭代器，你可以使用 .size() 来获取它的大小：

```
int const N = 10;
boost::array<Object, N> obj;
// non-default ctor: boost::array<Object, N> obj = 
//     { { Object(a1, a2), Object(a2, a3), ... (up to N times) } };
// now they are all initialized and ready to be used 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-26T12:38:06.560

分配可以“静态”（在编译时知道大小）或“动态”（在运行时确定大小）完成。

静态分配是老生常谈

```
int myarray[10]; 
```

要在堆栈上分配，您需要`alloca`分配函数，它本质上只是增加堆栈指针。（或递减......无论如何）。释放是自动完成的。

```
int* myarray = (int*) alloca( n*sizeof(int) ); 
```

[所以你可以像Nils](https://stackoverflow.com/questions/320506/c-how-to-create-an-array-of-objects-on-the-stack#320536)展示的那样在堆栈上初始化一个数组。

`std::vector` *如果提供堆栈分配器（第二个，繁琐的模板参数`vector`） ，则*可以在堆栈上工作**

 *我的猜测是 Boost 就是这样做的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-26T12:22:05.297

对于 ArrayList 对象数组：

```
ArrayList obj[10]; 
```

对象将被默认初始化，这对于用户定义的类型很好，但可能不是您想要的内置类型。

还要考虑：

```
std::vector<ArrayList> obj(10, ArrayList()); 
```

这通过复制您作为第二个参数传递的任何内容来初始化对象。所以它们都是一样的，但不一定是默认的。正如 litb 指出的那样，向量中的“10”可以用非常量表达式替换，而数组声明中的“10”不能。

这实际上并没有将 ArrayList 对象放在堆栈上，而是将所有 10 个对象放在堆中的单个分配中。因此，如果您真的负担不起单个分配，则可能很少会出现性能问题。但是，std::vector 在堆栈上，它会在销毁时删除它使用的所有堆对象。因此，为了确保您的资源被释放，向量的行为“好像”它都在堆栈上。

请注意，将 Object 容器与 ArrayList 值混合，就像您在示例 Java 代码中所做的那样，在 C++ 中充满危险。基本上你不能这样做，即使 ArrayList 扩展了 Object，因为数组只包含 10 个对象的存储，而 ArrayList 可能需要比 Object 更多的字节来存储。结果是您尝试复制到数组中的任何 ArrayList 都会被“切片”：只有其表示的初始部分被放入数组中。

如果你想要一个类型的容器，说它包含 Objects，但实际上包含 ArrayLists，那么你需要一个指针容器。为了获得良好的资源处理，这可能意味着您需要一个智能指针容器。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-26T12:28:04.567

您甚至可以在堆栈上分配可变数量的对象。您必须混合使用 C 和 C++ 才能这样做。

```
// allocate storage for N objects on the stack
// you may have to call _alloca and include something to use this.
object * data = (object *) alloca (N * sizeof (object));

// initialize via placement new.
for (int i=0; i<N; i++)
  new (&data[i])(); 
```

代码未经测试，但原则上它是这样工作的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-03T19:09:03.173

如果你碰巧使用 Qt，你可以使用[QVarLengthArray](http://qt-project.org/doc/qt-5.1/qtcore/qvarlengtharray.html)

它将大小作为第二个模板参数，它将静态分配具有该大小的数组，并将其用作数组的支持，而不是像 std::vector 或 QVector 那样的堆。如果您添加的大小超过了模板指定的大小，它将改用堆分配。

例子：

```
//the following ints will all be stored on the stack,
//and a heap allocation is never performed to store the array
QVarLengthArray<int, 10> objArray;
for (int i = 0; i < 8; i++) {
    int capacity = 1000 * i;
    objArray.push_back(capacity);
}

//since it's a class and not a raw array, we can get the array's size
std::cout << objArray.size(); //result is 8

//a heap allocation will be performed if we add an eleventh item,
//since the template parameter of 10 says to only statically allocate 10 items
objArray.push_back(0); //9 items
objArray.push_back(0); //10 items
objArray.push_back(0); //11 items - heap allocation is performed 
```

如果您保持在模板参数大小以下，您将避免堆分配对性能的影响——您将有效地拥有一个动态分配的基于堆栈的数组。唯一的缺点是，如果您不使用模板参数指定的那么多项目，则会浪费内存：如果使用太少，则会浪费空白空间。如果你使用太多，那么整个堆栈分配区域都被浪费了。

有时用性能换取内存是值得的，有时则不然。我建议不要盲目地使用这个类——只有当你通过分析*知道*std::vector 的堆分配是你程序的瓶颈之一时才使用它。

# powershell - 是否可以从 PowerShell 打开 Windows 资源管理器窗口？

> ID：320509
> 
> 赞同：375
> 
> 时间：2008-11-26T12:19:08.250
> 
> 标签：powershell

我确信这一定是可能的，但我不知道该怎么做。

有什么线索吗？

* * *

## 回答 #1

> 赞同：800
> 
> 时间：2008-11-26T15:25:25.893

采用：

```
ii . 
```

这是缩写

```
Invoke-Item . 
```

这是我在 PowerShell 命令行中键入的最常见的内容之一。

* * *

## 回答 #2

> 赞同：168
> 
> 时间：2008-11-26T12:55:07.210

你有几个选择：

*   Powershell 会在您的路径中查找可执行文件，就像 cmd.exe 一样。因此，您只需在 powershell 提示符下键入 explorer 即可。使用此方法，您还可以传递命令行参数（请参阅[http://support.microsoft.com/kb/314853](http://support.microsoft.com/kb/314853)）
*   [Invoke-Item](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/invoke-item) [cmdlet](https://docs.microsoft.com/en-us/powershell/developer/cmdlet/cmdlet-overview)提供了一种在Windows PowerShell 中运行可执行文件或打开文件（或文件集）的方法。[别名](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_aliases)：二
*   使用[system.diagnostics.process](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.process)

例子：

```
PS C:\> explorer
PS C:\> explorer .
PS C:\> explorer /n
PS C:\> Invoke-Item c:\path\
PS C:\> ii c:\path\
PS C:\> Invoke-Item c:\windows\explorer.exe
PS C:\> ii c:\windows\explorer.exe
PS C:\> [diagnostics.process]::start("explorer.exe") 
```

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2017-04-07T02:40:27.373

使用以下任何一种：

1.  `start .`
2.  `explorer .`
3.  `start explorer .`
4.  `ii .`
5.  `invoke-item .`

您可以在 PowerShell 中应用这些命令中的任何一个。

以防万一您想从命令提示符打开资源管理器，最后两个命令不起作用，前三个命令正常工作。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2008-11-26T12:41:38.563

只需使用`Invoke-Item`cmdlet。例如，如果您想在当前目录上打开资源管理器窗口，您可以执行以下操作：

```
Invoke-Item . 
```

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2008-11-26T12:45:15.547

```
explorer . 
```

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2012-08-28T15:43:23.313

我遇到了这个问题，寻找一种从 PowerShell 打开资源管理器窗口并*选择*文件的方法。我正在添加这个答案，以防其他人出于同样的原因遇到它。

要启动资源管理器并选择一个文件，请使用`Invoke-Expression`：

```
Invoke-Expression "explorer '/select,$filePath'" 
```

可能还有其他方法可以做到这一点，但这对我有用。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2008-11-26T12:29:27.747

```
$startinfo = new-object System.Diagnostics.ProcessStartInfo 
$startinfo.FileName = "explorer.exe"
$startinfo.WorkingDirectory = 'D:\foldername'

[System.Diagnostics.Process]::Start($startinfo) 
```

希望这可以帮助

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2010-04-23T12:47:04.163

```
start explorer.exe 
```

简单的单行命令

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-08-26T02:53:52.397

我想写这个作为评论，但我没有 50 名声望。

该线程中的所有答案本质上都是使用 Invoke-Item 或直接使用 explorer.exe；但是，这并不完全与“打开包含文件夹”同义，因此就问题所述打开资源管理器窗口而言，如果我们想将答案应用于特定文件，问题仍然没有得到真正的回答。

例如，

```
Invoke-Item C:\Users\Foo\bar.txt
explorer.exe C:\Users\Foo\bar.html 
```

^ 这两个命令将导致分别在两个文件上调用 Notepad.exe 或 Firefox.exe，而不是 C:\Users\Foo\（包含目录）上的 explorer.exe 窗口。

然而，如果一个人从 powershell 发出这个命令，这没什么大不了的（反正打字少），如果一个人正在编写脚本并且需要在变量上“打开包含文件夹”，那么从字符串匹配中提取目录就变成了一个问题文件的完整路径。

是否没有简单的命令“Open-Containing-Folder”可以替换变量？

例如，

```
$foo = "C:\Users\Foo\foo.txt"    
[some code] $fooPath
# opens C:\Users\Foo\ and not the default program for .txt file extension 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-06-11T00:47:53.243

这是唯一符合我希望文件夹在任何现有资源管理器窗口中作为[Quizo 选项卡打开的独特限制的事情。](http://qttabbar.wikidot.com/)

```
$objShell = New-Object -ComObject "Shell.Application"
$objShell.Explore("path") 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-03T09:01:13.017

单行命令，这对我有用

`explorer .\`

# java - 查看 .jar 文件的内容

> ID：320510
> 
> 赞同：269
> 
> 时间：2008-11-26T12:19:42.697
> 
> 标签：java, jar, viewer

在 jar 文件中查看类、方法、属性等的最简单方法是什么？我正在寻找与非常有用的*Lutz Roeder .NET Reflector*等效的东西- 用于 Java

* * *

## 回答 #1

> 赞同：322
> 
> 时间：2008-11-26T15:09:11.090

使用 JDK，`jar -tf`将列出 jar 中的文件。`javap`将为您提供来自特定类文件的更多详细信息。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2008-11-26T12:24:24.700

我通常用 7-Zip 打开它们……它至少可以看到包、类和资源。
如果我需要查看方法或字段，我会使用 Jad，但当然，最好依赖（好的）JavaDoc ...

现在，SO 上的某处提到了一些 Eclipse 插件，以查找类所在的 jar 文件，也许他们可以做更多（即您要求的）。

[编辑] 参考 SO 线程。不是问什么，而是以某种方式相关，因此很有用：[Java：在给定类名的情况下，我如何知道要使用哪个 jar 文件？](https://stackoverflow.com/questions/275120/java-how-do-i-know-which-jar-file-to-use-given-a-class-name "Java：给定类名，我如何知道使用哪个 jar 文件？")

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2017-02-21T10:52:56.777

> 如果有人还不知道这一点，JAR 文件只是一个 ZIP 文件，其中包含程序的类、资源等以及一些元数据。您可以提取一个，看看它是如何组合在一起的。

因此，我使用`unzip`的是易于记忆和使用的命令。

`unzip -l <jar-file-name>.jar`

例如，如果您有一个带有名称的 jar 文件，`test.jar`那么`unzip -l test.jar`将列出 jar 文件的所有内容。

**虽然所有其他答案都很棒，但在大多数答案中，您将不得不使用一些软件，如`7 zip`or`JDK`或其他一些 Eclipse 工具，而这并不要求您拥有任何这些大软件，并且它默认在 linux 中提供和mac，所以它非常轻巧且易于使用**。

您也可以使用`zipinfo <your jar file>`. 如果您的操作系统支持这一点。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2012-09-14T12:53:41.363

我个人用的是JD-GUI。它是一个免费的“反编译器”，因为它允许您查看源代码、类和类中的对象，以及在左侧的树形菜单中查看文件结构。但是，它不允许您直接修改类。

JD-GUI官网：http: [//jd.benow.ca/](http://jd.benow.ca/)

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2009-06-13T17:49:47.393

### 方法名称、字段等

通过在 IDE 中将 jar 添加到项目中，您通常可以看到方法和字段名称，但看不到详细的实现。NetBeans 可以做到，Eclipse 可能，IntelliJ 可能等等。您可以直接在 IDE 中浏览 jar 结构。

### 只是内容

对于诸如查看内容之类的任何事情，您可以使用：

*   `jar tvf jarfile.jar`
*   winzip 或任何压缩工具

### 源代码

要访问源代码，您将使用诸如 JAD 之类的反编译器或其前端或其他反编译器。如果代码被混淆，那么......

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2018-12-20T09:11:37.433

```
jar -tvf file_name.jar 
```

上面只会**打印文件的名称**。

要查看文件的内容，您可以通过以下方式**提取文件夹中的文件**：

```
jar -xvf file_name.jar 
```

这将解压缩 jar 文件并将内容放在运行它的同一目录中。

或者在 Windows 中将 .jar 文件重命名为 .zip 然后您可以解压缩以提取和查看 jar 文件的内容。因为 jar 在内部是一个 zip 文件。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2015-07-29T11:00:36.663

扩展 Tom Hawtin 的答案，您可以通过管道将列表过滤掉所需的类或文件：

`jar tf my-fat-jar-file.jar | grep filename`

这应该适用于 bash/zsh 和类似的东西，或者 emacs 的 eshell。

附加信息：[https ://docs.oracle.com/javase/tutorial/deployment/jar/view.html](https://docs.oracle.com/javase/tutorial/deployment/jar/view.html)

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2008-11-26T12:27:01.993

**[使用 WinRar](http://www.rarlab.com)**。它将完整地为您打开文件夹结构。还允许在存档中编辑，同时保留路径。

毕竟，JAR 文件只是一个 ZIP 存档。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2015-11-13T10:39:01.330

If you like to see whats inside, simply rename as first option below..

1.  `F2 & Rename to jarfile.zip` //Use any unzipper...

2.  `jar tvf jarfile.jar`

3.  `jar tf jarfile.jar`

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2008-12-21T12:49:15.633

如果我理解正确，您不仅希望看到类，还希望看到方法、属性等。我知道的唯一可以做到这一点的工具是 Eclipse——如果你将一个 jar 添加到项目类路径中，你将能够使用通常的包资源管理器来浏览它的类以及方法和属性。

无论如何，这对于一个好的独立 Java 工具来说是个好主意

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-11-26T16:31:16.043

Jad 很笨拙，不再维护。我已经切换到[“Java Decompiler”](http://java.decompiler.free.fr/)，它有一个漂亮的 UI 并支持新的语言特性。

但是，我使用的每个反编译器都会遇到无法成功反编译的代码。对于那些，它有助于理解由标准 JDK 工具[javap](http://java.sun.com/javase/6/docs/technotes/tools/windows/javap.html)生成的反汇编 Java 字节码。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-10-17T17:39:01.187

如果您在 Windows 中并使用 powershell，并且您正在寻找 jar 中的文件，您可以执行以下操作：

```
jar -tf .\[JAR_NAME] | where {$_ -match "[FILENAME]"} 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2008-11-26T12:28:21.087

好吧，jar 文件只是一个 zip 文件，所以如果你解压缩它（使用你最喜欢的解压缩实用程序），你会得到里面的所有文件。

如果你想在类文件中查看方法，你需要一个工具。正如 PhiLho 所提到的，Eclipse 能够做到这一点（默认情况下），我认为大多数 Java IDE 都能够做到这一点。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2009-06-13T19:02:37.157

在 Eclipse 3.4 中做

1.  将有问题的 jar 文件拖到 Java 项目中。将出现 jar 文件的副本。
2.  右键单击 jar 文件，然后选择“构建路径”->“添加到构建路径”。
3.  Jar 文件被移动到“Referenced Libraries”节点，它可以在 Project Explorer 窗格中打开和导航。

如果查看源代码也是一个问题，请打开一个新问题。

对于 Jar 文件级别的导航（作为 zip 文件），我使用 7zip，它运行良好，并且允许查看和编辑条目，这对于排除故障很有帮助。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2012-11-07T18:12:35.493

一种方法是在“包资源管理器”中打开透视图。这样做你可以看到你的 jar 的结构和类的细节。为此，请使用包资源管理器检查项目中的库文件夹。

窗口>>显示视图>>其他>>Java>>包资源管理器

另一种方法是，您可以使用 JarPlug 作为 eclipse 插件。这适用于 eclipse/springsource

[http://jar-plug.sourceforge.net/](http://jar-plug.sourceforge.net/)

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2019-03-05T11:27:31.507

我的要求是查看 jar 中文件（如属性文件）的内容，而不实际提取 jar。如果有人像我一样到达这个线程，试试这个命令 -

```
unzip -p myjar.jar myfile.txt 
```

这对我来说效果很好！

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2020-03-10T21:56:21.513

您可以通过执行以下操作从 Windows 资源管理器查看 JAR 文件（如 ZIP 文件）：

*   以管理员身份运行命令提示符
*   从命令行输入：

    assoc .jar=压缩文件夹

*   当您使用它时，您也可以对 WAR 和 EAR 文件执行相同的操作：

    assoc .war=压缩文件夹

    assoc .ear=压缩文件夹

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2019-11-15T15:48:32.417

这个[Jar Explorer](http://dst.in.ua/jarexp/index.html?l=en)已经足够好了。
支持三种反编译器类型：JD、Procyon 和 Fernflower。
允许在任何 java 存档中搜索文件和重复项。
用户还可以通过 D&D 文件修改 jar 并编辑一些非类文件。 [![在此处输入图像描述](https://i.stack.imgur.com/y0Yxa.png)](https://i.stack.imgur.com/y0Yxa.png) [![在此处输入图像描述](https://i.stack.imgur.com/MSBPO.png)](https://i.stack.imgur.com/MSBPO.png)

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2008-11-26T16:44:02.927

你现在可以用大多数解压工具打开它们，然后如果你想查看源代码，只需获取[DJ Java Decompiler之类的东西。](http://www.neshkov.com/)

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2015-02-19T14:06:55.530

[Bndtools](http://bndtools.org/index.html)为 Eclipse 提供了一个免费的 JAR 查看器插件。

添加[Eclipse 更新站点](http://bndtools.org/installation.html#update-site)并仅安装查看器。

![在此处输入图像描述](https://i.stack.imgur.com/gNPrK.png)

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2016-01-30T13:24:58.687

我认为 Java Decomplier 是您可以从这里下载的最佳选择：http: [//jd.benow.ca/](http://jd.benow.ca/) [![预习](https://i.stack.imgur.com/wgTVN.png)](https://i.stack.imgur.com/wgTVN.png)

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2008-11-26T16:42:10.670

Eclipse 3.4 JDT

这不是最快的方法，因为你必须先把它拖到你的日食中。但是即使启用了反编译，您也将拥有完整的 java 类浏览。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2008-12-21T23:29:52.300

I've set the default action in windows to "Open with WinZip". This makes it easy to manage JARs as archives. You can even add/remove files manually.

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2008-11-26T15:14:10.863

我更喜欢[JAR Browser](http://jarbrowser.sourceforge.net/)，它有一个简单的界面，您可以在其中浏览多个 JAR，并同时跨多个 JAR 搜索特定类。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2021-03-24T07:23:49.620

查看 jar 文件中的类、方法、属性等的最简单方法是使用诸如“ [winrar](https://www.win-rar.com/start.html?&L=5) ”和“ [7-Zip](https://www.7-zip.org/download.html) ”之类的程序。

*   如果未安装，请下载 winrar 或 7-zip 程序
*   然后右键单击你的jar文件
*   点击使用winrar或7-zip打开

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2012-12-07T10:09:10.253

我使用 JarExplorer 或[JarVisualizer](http://code.google.com/p/jarvisualizer/)。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-11-26T12:32:05.650

你可以试试[JarSpy](http://sourceforge.net/project/showfiles.php?group_id=42094)。我使用了一个 IDEA 插件版本。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-11-26T18:17:37.387

您的 IDE 也应该支持这一点。我的 IDE (SlickeEdit) 将其称为“标签库”。只需为 jar 文件添加一个标签库，您应该能够以分层方式浏览类和方法。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2011-03-21T00:30:38.743

在 Mac 上有[Jarzilla](http://code.google.com/p/jarzilla/)

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2018-04-18T01:52:10.743

`java -xf some-j.jar`将解压缩一个 JAR 文件。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-05-05T21:16:06.400

如果您甚至不知道您的 jar 路径在哪里，或者您的 JDK 路径在每个主机上都不同，那么大多数人都已经正确回答了这里是 linux 的一种解决方案

```
$(find / -type f -name "jar" 2>&1 |grep '/JDK' |head -1 ) tf FULLY_QUALIFIED_NAME_TO_YOUR_FILE 
```

# asp.net - 为什么我的 App_Data/ASPNETDB.MDF 文件增长到 10MB？

> ID：320516
> 
> 赞同：0
> 
> 时间：2008-11-26T12:22:11.397
> 
> 标签：asp.net, sql-server-2008

*   我使用“ASP.NET 配置”工具在我的 ASP.NET 站点上创建了一个受保护的文件夹。
*   它创建了一个名为 App_Data/ASPNETDB.MDF 的数据库，其中存储一 (1) 个用户。
*   上传时我注意到现在数据库已增长到 10 MB，.ldf 文件为 5 MB。（！）
*   我尝试使用 SQL Server 2008 Management Studio 查看它，但在附加时显示“无法检索此请求的数据”。

这种 ASPNETDB.MDF 膨胀是否发生在其他人身上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-14T15:15:50.017

数据库的大小真的无关紧要。文件中可能只有 1-2KB 的数据，但是当 SQL Server 创建数据库文件时，它不知道您打算在其中放入多少数据，因此它增加了一些额外的空间。这样，当您添加更多数据时（就像大多数用户所做的那样），它们都是连续的，并且 SQL Server 在不断扩展文件时不必延迟应用程序的执行。创建数据库时，您可以指定较小的大小 - 也许您应该将其删除并重新创建为 1MB 数据库。

如果你想确定一下，[这篇文章](http://searchsqlserver.techtarget.com/tip/0,289483,sid87_gci1309027,00.html)有一个脚本，用于获取数据库中每个对象的大小，你可以查看是否有特定的违规对象，但我猜它们都会很小，而且休息将是空的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T12:26:18.860

我认为这只是 aspnetdb 的默认大小，至少在 sql 2005 express 我所有的 aspnetdb 数据库最初都是 10mb

# asp-classic - asp循环在运行时挂起网站

> ID：320523
> 
> 赞同：0
> 
> 时间：2008-11-26T12:24:45.260
> 
> 标签：asp-classic

我在页面上有一个循环来更新需要 15-20 秒才能完成的访问数据库。我最多每月只运行一次，但我注意到每次运行它时网站（IIS 6）都会停止提供页面。

循环结束后，页面再次开始打开。

这是我的代码：

```
For each Email in Emails
    if Trim(Email) <> "" then
        ' execute the update
        Set MM_editCmd = Server.CreateObject("ADODB.Command")
        MM_editCmd.ActiveConnection = MM_Customers_STRING
        MM_editCmd.CommandText = "UPDATE Customers SET MailingListUpdates=False WHERE Email='" & Trim(Email) & "'"
        MM_editCmd.Execute
        MM_editCmd.ActiveConnection.Close
        Response.Write "Email address " & Email & " successfully removed from the mailing list.<br>"
    end if
Next 
```

我能做些什么来避免这种情况吗？

上次更新的电子邮件大约有 700 条记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T12:55:39.380

您可能正在用完连接池中的所有可用连接。试试这个：

```
Set MM_editCmd = Server.CreateObject("ADODB.Command")
MM_editCmd.ActiveConnection = MM_Customers_STRING
For each Email in Emails
    if Trim(Email) <> "" then
        ' execute the update
        MM_editCmd.CommandText = "UPDATE Customers SET MailingListUpdates=False WHERE Email='" & Trim(Email) & "'"
        MM_editCmd.Execute
        Response.Write "Email address " & Email & " successfully removed from the mailing list.<br>"
    end if
Next
MM_editCmd.ActiveConnection.Close 
```

此外，作为更长期的事情，尝试升级到 SQL Server Express

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T12:56:36.863

MM_ ASP编程的祸根。创建命令对象并在每次迭代时打开和关闭连接对性能没有好处。每次连接字符串以创建新的命令字符串也不利于安全性。

试试这个：-

```
Dim con : Set con = Server.CreateObject("ADODB.Connection")
Dim cmd : Set cmd = Server.CreateObject("ADODB.Command")
con.Open MM_Customers_STRING
Set cmd.ActiveConnection = con
cmd.CommandType = 1 // adCmdText (note SO not good at detecting VB comment)
cmd.CommandText = "UPDATE Customers SET MailingListUpdates=False WHERE Email=?"
Dim param : Set param = cmd.CreateParameter("email", 200, 1, 50) // adVarChar, adParamInput, size: 50
cmd.Parameters.Append param
Dim Email
For Each Email in Emails
    Email = Trim(Email)
    If Email <> "" Then
        param.value = Email
        cmd.Execute
    End If
Next
con.Close 
```

电子邮件字段上的索引会很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T12:43:05.783

我建议从循环中创建/删除命令和设置并使用绑定变量（通过参数集合）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T12:40:00.033

“电子邮件”集合的来源是什么？如果它来自您的数据库，那么通过将其留在那里并加入它而不是以编程方式检索和迭代，您将获得更好的性能。另一个改进是仅在必要时执行更新——即，MailingListUpdates 属性尚未为假。

# web-services - Http Web 服务负载测试

> ID：320531
> 
> 赞同：0
> 
> 时间：2008-11-26T12:27:22.743
> 
> 标签：web-services, http, load-testing

我有一个正在尝试加载测试的网络服务。我创建了一个程序，它产生线程来模拟多个用户连接到服务并发出请求。每个线程在死亡之前都会发出“一些”请求。每个新请求在准备就绪后都会立即发出 - 在获得响应和发出下一个请求之间几乎没有延迟。被测 Web 服务调用同一服务器上的另一个 Web 服务。

对于最多 90 个模拟用户，此过程似乎可以正常工作。然而，一旦我尝试了 100 个模拟用户，程序会在大约 6 个总处理请求后挂起。他们似乎什么也没做。模拟客户端挂起等待响应，Web 服务未接收请求。需要重新启动服务器才能恢复。

这里发生了什么？我可以与服务器建立的连接数是否有限制？我是否应该尝试“增加”负载（现在我只是尽可能快地射击它们）？

我使用的服务器是 Java Caps 5.1.3 应用程序服务器，而我用来发出请求的库是 HttpUnit 1.6.2。

* * *

**后续问题** 加速时间有什么好处？为什么我不能在测试开始时将所有负载推送到服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T12:40:21.610

看到这种情况可能有多种原因，您可以尝试以下方法来找出原因。希望他们有所帮助：

**1\. 使用加速**

使用适当的加速，例如至少 1 个用户/2 秒左右。如果使用 Ramp-up 解决了您的问题，那么它肯定是连接计数问题。

**2\. 代码审查**

彻底检查您编写的负载注入代码，在某些情况下是否存在未退出的循环/线程。

您还可以使用分析实用程序，例如[**JENSOR**](http://jensor.sourceforge.net)来找出哪个方法进入死锁并导致服务器无响应。

* * *

此外，在您的网络服务器上检查这些参数并调整它们并进行测试

*   最大线程数
*   最大进程
*   最大会话计数

* * *

**[后续问题的答案](https://stackoverflow.com/questions/320531/http-web-service-load-test/320840#320840)**

加速模拟真实场景，同时为 Web 服务器提供喘息的空间。在进行负载测试时，模式应该与现实生活相似，以获得准确且可扩展的预测。

在此过程中起最重要作用的参数是：

*   斜坡上升
*   思考时间
*   调整黑白迭代
*   交易组合
*   并发用户数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T14:21:21.873

**后续问题的答案**

加速模拟真实场景，同时为 Web 服务器提供喘息的空间。在进行负载测试时，模式应该与现实生活相似，以获得准确且可扩展的预测。

在此过程中起最重要作用的参数是：

*   斜坡上升
*   思考时间
*   调整黑白迭代
*   交易组合
*   并发用户数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T12:57:34.570

我认为您应该尝试使用[JMeter](http://jakarta.apache.org/jmeter/)进行负载测试。它拥有所有加速的东西。 [这个PPT演示](http://www.servogrid.org/slide/GEM/JSUCourse/PortletTutorial/HttpUnitTests.ppt)比较了两者，所以你可以看看哪个更适合你。

# math - 如何简化基本算术表达式？

> ID：320532
> 
> 赞同：6
> 
> 时间：2008-11-26T12:27:36.643
> 
> 标签：math, haskell, algebra

如何简化基本算术表达式？

例如

```
module ExprOps where 

simplify :: Expr -> Expr
simplify (Plus(Var"x") (Const 0)) = Var "x" 
```

我需要做什么？

* * *

```
module Expr where

-- Variables are named by strings, assumed to be identifiers.
type Variable = String

-- Representation of expressions.
data Expr = Const Integer
          | Var Variable
          | Plus Expr Expr
          | Minus Expr Expr
          | Mult Expr Expr
          deriving (Eq, Show) 
```

我想到的简化是：

```
0*e = e*0 = 0
1*e = e*1 = 0+e = e+0 = e-0 = e 
```

并简化常量子表达式，例如 Plus (Const 1) (Const 2) 将变为 Const 3。我不希望变量（或变量和常量）被连接：Var "st" 与 Var "s" 不同。

我想要实现的是创建一个像上面那样的模块，它使用一个名为`simplify :: Expr->Expr`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-26T16:49:36.270

好吧，你有正确的通用模型。您只需要更多规则并递归地应用简化过程。

```
simplify :: Expr -> Expr 
simplify (Mult (Const 0) x) = Const 0 
simplify (Mult x (Const 0)) = Const 0
simplify (Plus (Const 0) x) = simplify x
simplify (Plus x (Const 0)) = simplify x 
simplify (Mult (Const 1) x) = simplify x 
simplify (Mult x (Const 1)) = simplify x 
simplify (Minus x (Const 0)) = simpify x
simplify (Plus (Const x) (Const y)) = Const (x + y)
simplify (Minus (Const x) (Const y)) = Const (x - y)
simplify (Mult (Const x) (Const y)) = Const (x * y)
simplify x = x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-27T16:02:19.797

几十年前，我在 AI 课程的项目中做过类似的事情。该类使用 LISP，所以我做的第一件事是将表达式从中缀表示法转换为 S-Expression。

然后是递归遍历“树”并在每个节点上应用一组规则的问题。例如，如果该节点包含一个操作数都是常量的操作，则现在执行该操作并用结果替换该节点。

一旦基本功能到位，就需要向系统添加新的简化规则。

最后，S-Expression 被转换回中缀表示法进行显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-21T23:19:29.070

举个例子，这里有一个函数可以简化你给出的表达式。这个想法是从上到下尝试简化的每个定义，直到等号左侧的一个模式匹配。最后一个定义的目的是在没有已知方法进一步简化的情况下打破递归。

```
simplify :: Expr -> Expr
simplify (Plus l         (Const 0)) = simplify l
simplify (Plus (Const 0) r        ) = simplify r
simplify x                          = x 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T12:43:02.243

我们在这里谈论的是理性，比如 GMP 的理性吗？如果是这样，那么可以通过将第二个参数变成它的倒数然后相乘来简化除法。

除此之外，乘法是多次加法，除法是多次减法。

正如米奇在评论中所说，我们可以提供更多关于您试图简化的信息。

# c# - 反序列化会为这段 C# 代码抛出异常

> ID：320535
> 
> 赞同：2
> 
> 时间：2008-11-26T12:27:45.753
> 
> 标签：c#, exception, serialization, memorystream

编辑：关闭这个是因为我找到了它出错的原因，但是我没有删除这个帖子..我生成了一个更新的帖子，里面有一个更精致的问题。

* * *

嗨伙计，

我有一些我读入的二进制数据。我希望将其转换为`System.Drawing.Image`，所以我创建了一个 的实例`Image object`，使用 a`memory stream`作为输入数据。

在我完成之后，我序列化然后反序列化图像（对于一些业务逻辑）。反序列化会引发异常。如果我`Image`使用文件名构造函数而不是内存流构造函数创建实例，则一切都可以 100% 工作。这表明`Image`对象可以通过网络进行序列化。

我做错了什么`memory stream`，我用过？

这是我用来制作 Image 对象的代码，在它被序列化之前：-

```
// Fake way of getting some binary (image) data.
byte[] data = File.ReadAllBytes("Chick.jpg");

using (Stream originalBinaryDataStream = new MemoryStream(data))
{
    // This works perfectly fine, if use this method (which i can't).
    //image = new Bitmap("Chick.jpg");

    // This throws an exception when it's deserialized.
    // It doesn't like the memory stream reference?
    image = new Bitmap(originalBinaryDataStream);     
} 
```

这是尝试反序列化图像的代码，它会引发异常（[这是异常的单独图像](http://img254.imageshack.us/img254/9748/step1zx3wk5.png)）

[替代文字 http://img254.imageshack.us/img254/9748/step1zx3wk5.png](http://img254.imageshack.us/img254/9748/step1zx3wk5.png)

是否有一些东西没有正确处理或无法序列化..因此抛出异常？

请帮忙 ：）

* * *

*编辑：在我的Image Debugger Visualizer*中调用了异常。

我在[这里](http://drop.io/lssibqa)上传了完整的 VS2008 解决方案（1.28MB 下载）。

其中有两个项目->**可视化器类**和**MS 测试类**。如果您运行唯一的单元测试，它将抛出通用（读取：无用）GDI + 异常，因为它无法反序列化通过线路传递到调试器即的 Image 实例。如果您将使用文件路径构造函数创建的 Image 实例传递给它，则反序列化将完美运行。

编辑 2：使用了不同的文件上传网站 - 干杯！

编辑 3：如何实际重现错误。

*   将项目更改为调试模式（不是发布模式）
*   删除所有断点。
*   打开 ImageDebuggerVisualizer.cs
*   在第 22 行添加断点。
*   现在*调试*UnitTest1 单元测试方法。将显示一个图像..关闭那个窗口..然后突然你将处于断点。跨过那个，砰！！！！碰撞！！砰。

编辑 4：这是异常的两个屏幕截图（如果您不想下载解决方案文件）。

*   [在我越过违规线之前](http://img254.imageshack.us/img254/9748/step1zx3wk5.png)
*   [在我越过](http://img383.imageshack.us/img383/1677/step2uj0.png)引发异常的违规行之后。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T12:39:15.247

我怀疑在您的真实代码中您正在写入 a`MemoryStream`而不是倒带它；如果是这种情况，请在尝试重新加载之前将 Position 设置为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T12:37:59.400

刚刚测试了你的代码，它工作正常，代码很好。一定是图片文件或路径有问题。这是我的测试：

```
private void Form1_Load(object sender, EventArgs e)     
       {
            byte[] data = File.ReadAllBytes("c:\\t.jpg");

            using (Stream originalBinaryDataStream = new MemoryStream(data))
            {
                // This works perfectly fine, if use this method (which i can't).
                //image = new Bitmap("Chick.jpg");

                // This throws an exception when it's deserialized.
                // It doesn't like the memory stream reference?
                originalBinaryDataStream.Seek(0, SeekOrigin.End);
                pictureBox1.Image=  new Bitmap(originalBinaryDataStream);
            }
        } 
```

我在 PictureBox 中看到了图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T13:10:21.657

我已经用整个 VS 解决方案的链接更新了最初的问题帖子（这是一个类和一个单元测试）。单元测试抛出失败失败失败异常。请检查一下。

# asp.net - 关于 jquery 和 .NET 的基本问题

> ID：320538
> 
> 赞同：0
> 
> 时间：2008-11-26T12:29:25.720
> 
> 标签：asp.net, jquery, listview, jqmodal

我想制作一个页面，以便可以在“jquery 弹出窗口”中选择过滤器，但我不知道如何接收结果。

假设我有一个带有 ListView 的页面，并且我想为它选择过滤器（可能从列表中进行多项选择），所以我制作了一个不同的 ASPX 并通过 ajax 使用 jquery （实际上是[jqModal](http://dev.iceburg.net/jquery/jqModal/)）打开它，用户选择过滤器，并接受。

如何让该选择重新绑定我的 ListView？

(...)

我刚刚在 jQuery 弹出窗口中选择了上面链接的 URL，这正是我想要做的......它是如何完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-26T14:24:03.193

我认为最简单的解决方案是使用 style="display:none" 的 asp 按钮。在关闭弹出窗口的 javascript 函数中，假点击该按钮。然后有一个常规的事件处理程序来重新绑定您的列表视图。

HTML：

```
<div class="jqmWindow" id="dialog">
    <asp:ListView runat="server" id="lvFilter" />
</div>
<asp:Button runat="server" id="btnFilter" OnClick="btnFilter_Click" style="disaply:none" /> 
```

Javascript：

```
$('#dialog').jqm({
    onHide:function() {
      $("#<%= btnFilter.ClientID %>").click();
    }
}); 
```

服务器端：

btnFilter_Click 做普通过滤。

# java - 如何获取正在运行的 JAR 文件的路径？

> ID：320542
> 
> 赞同：615
> 
> 时间：2008-11-26T12:30:38.180
> 
> 标签：java, path, jar, executable-jar

我的代码在一个 JAR 文件中运行，比如**foo.jar**，我需要在代码中知道正在运行的**foo.jar**在哪个文件夹中。

因此，如果**foo.jar**在 中`C:\FOO\`，无论我当前的工作目录是什么，我都想获取该路径。

* * *

## 回答 #1

> 赞同：579
> 
> 时间：2008-11-26T12:50:03.103

```
return new File(MyClass.class.getProtectionDomain().getCodeSource().getLocation()
    .toURI()).getPath(); 
```

将“MyClass”替换为您的班级名称。

显然，如果您的类是从非文件位置加载的，这会做一些奇怪的事情。

* * *

## 回答 #2

> 赞同：197
> 
> 时间：2011-07-27T18:22:41.537

对我来说最好的解决方案：

```
String path = Test.class.getProtectionDomain().getCodeSource().getLocation().getPath();
String decodedPath = URLDecoder.decode(path, "UTF-8"); 
```

这应该解决空格和特殊字符的问题。

* * *

## 回答 #3

> 赞同：167
> 
> 时间：2012-10-04T18:08:00.883

要获得`File`给定的`Class`，有两个步骤：

1.  将 转换`Class`为`URL`
2.  将 转换`URL`为`File`

重要的是要了解这两个步骤，而不是将它们混为一谈。

一旦你有了`File`，你可以调用`getParentFile`来获取包含的文件夹，如果这是你需要的。

## 第 1 步：`Class`到`URL`

正如其他答案中所讨论的，有两种主要方法可以找到与 a`URL`相关的 a `Class`。

1.  `URL url = Bar.class.getProtectionDomain().getCodeSource().getLocation();`

2.  `URL url = Bar.class.getResource(Bar.class.getSimpleName() + ".class");`

两者都有优点和缺点。

该`getProtectionDomain`方法产生类的基本位置（例如，包含 JAR 文件）。`SecurityException`但是，调用时可能会抛出 Java 运行时的安全策略`getProtectionDomain()`，因此如果您的应用程序需要在各种环境中运行，最好在所有环境中进行测试。

该`getResource`方法产生类的完整 URL 资源路径，您需要从中执行额外的字符串操作。它可能是一条`file:`路径，但也可能是`jar:file:`甚至更糟糕的东西，例如`bundleresource://346.fwk2106232034:4/foo/Bar.class`在 OSGi 框架中执行时。相反，该方法即使在 OSGi 中也能`getProtectionDomain`正确生成URL。`file:`

请注意，当类驻留在 JAR 文件中时，两者都失败了`getResource("")`；`getResource(".")`两个调用都返回 null。所以我推荐上面显示的#2 调用，因为它看起来更安全。

## 第 2 步：`URL`到`File`

无论哪种方式，一旦你有了`URL`，下一步就是转换为`File`。这是它自己的挑战；有关详细信息，请参阅[Kohsuke Kawaguchi 的博客文章](http://weblogs.java.net/blog/kohsuke/archive/2007/04/how_to_convert.html)`new File(url.toURI())`，但简而言之，只要 URL 格式完全正确，您就可以使用。

最后，我*强烈反对*使用`URLDecoder`. URL 的某些字符，`:`尤其`/`是无效的 URL 编码字符。从[URLDecoder](http://docs.oracle.com/javase/7/docs/api/java/net/URLDecoder.html) Javadoc：

> 假设编码字符串中的所有字符都是以下之一：“a”到“z”，“A”到“Z”，“0”到“9”，以及“-”、“_”、“ 。“， 和 ”*”。允许使用字符“%”，但将其解释为特殊转义序列的开始。
> 
> ...
> 
> 该解码器有两种可能的方式来处理非法字符串。它可以单独留下非法字符，也可以抛出 IllegalArgumentException。解码器采用哪种方法留给实现。

在实践中，`URLDecoder`一般不会`IllegalArgumentException`像上面所威胁的那样抛出。如果您的文件路径中有空格编码为`%20`，则此方法可能会起作用。但是，如果您的文件路径包含其他非字母数字字符，例如`+`您将无法`URLDecoder`修改文件路径。

## 工作代码

要实现这些步骤，您可能有如下方法：

```
/**
 * Gets the base location of the given class.
 * <p>
 * If the class is directly on the file system (e.g.,
 * "/path/to/my/package/MyClass.class") then it will return the base directory
 * (e.g., "file:/path/to").
 * </p>
 * <p>
 * If the class is within a JAR file (e.g.,
 * "/path/to/my-jar.jar!/my/package/MyClass.class") then it will return the
 * path to the JAR (e.g., "file:/path/to/my-jar.jar").
 * </p>
 *
 * @param c The class whose location is desired.
 * @see FileUtils#urlToFile(URL) to convert the result to a {@link File}.
 */
public static URL getLocation(final Class<?> c) {
    if (c == null) return null; // could not load the class

    // try the easy way first
    try {
        final URL codeSourceLocation =
            c.getProtectionDomain().getCodeSource().getLocation();
        if (codeSourceLocation != null) return codeSourceLocation;
    }
    catch (final SecurityException e) {
        // NB: Cannot access protection domain.
    }
    catch (final NullPointerException e) {
        // NB: Protection domain or code source is null.
    }

    // NB: The easy way failed, so we try the hard way. We ask for the class
    // itself as a resource, then strip the class's path from the URL string,
    // leaving the base path.

    // get the class's raw resource path
    final URL classResource = c.getResource(c.getSimpleName() + ".class");
    if (classResource == null) return null; // cannot find class resource

    final String url = classResource.toString();
    final String suffix = c.getCanonicalName().replace('.', '/') + ".class";
    if (!url.endsWith(suffix)) return null; // weird URL

    // strip the class's path from the URL string
    final String base = url.substring(0, url.length() - suffix.length());

    String path = base;

    // remove the "jar:" prefix and "!/" suffix, if present
    if (path.startsWith("jar:")) path = path.substring(4, path.length() - 2);

    try {
        return new URL(path);
    }
    catch (final MalformedURLException e) {
        e.printStackTrace();
        return null;
    }
} 

/**
 * Converts the given {@link URL} to its corresponding {@link File}.
 * <p>
 * This method is similar to calling {@code new File(url.toURI())} except that
 * it also handles "jar:file:" URLs, returning the path to the JAR file.
 * </p>
 * 
 * @param url The URL to convert.
 * @return A file path suitable for use with e.g. {@link FileInputStream}
 * @throws IllegalArgumentException if the URL does not correspond to a file.
 */
public static File urlToFile(final URL url) {
    return url == null ? null : urlToFile(url.toString());
}

/**
 * Converts the given URL string to its corresponding {@link File}.
 * 
 * @param url The URL to convert.
 * @return A file path suitable for use with e.g. {@link FileInputStream}
 * @throws IllegalArgumentException if the URL does not correspond to a file.
 */
public static File urlToFile(final String url) {
    String path = url;
    if (path.startsWith("jar:")) {
        // remove "jar:" prefix and "!/" suffix
        final int index = path.indexOf("!/");
        path = path.substring(4, index);
    }
    try {
        if (PlatformUtils.isWindows() && path.matches("file:[A-Za-z]:.*")) {
            path = "file:/" + path.substring(5);
        }
        return new File(new URL(path).toURI());
    }
    catch (final MalformedURLException e) {
        // NB: URL is not completely well-formed.
    }
    catch (final URISyntaxException e) {
        // NB: URL is not completely well-formed.
    }
    if (path.startsWith("file:")) {
        // pass through the URL as-is, minus "file:" prefix
        path = path.substring(5);
        return new File(path);
    }
    throw new IllegalArgumentException("Invalid URL: " + url);
} 
```

[您可以在SciJava 通用](https://github.com/scijava/scijava-common)库中找到这些方法：

*   [org.scijava.util.ClassUtils](https://github.com/scijava/scijava-common/blob/scijava-common-2.62.1/src/main/java/org/scijava/util/ClassUtils.java#L296-L355)
*   [org.scijava.util.FileUtils](https://github.com/scijava/scijava-common/blob/scijava-common-2.62.1/src/main/java/org/scijava/util/FileUtils.java#L221-L268)。

* * *

## 回答 #4

> 赞同：62
> 
> 时间：2011-08-14T23:33:22.787

您还可以使用：

```
CodeSource codeSource = YourMainClass.class.getProtectionDomain().getCodeSource();
File jarFile = new File(codeSource.getLocation().toURI().getPath());
String jarDir = jarFile.getParentFile().getPath(); 
```

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2008-11-26T12:34:31.247

使用 ClassLoader.getResource() 查找当前类的 URL。

例如：

```
package foo;

public class Test
{
    public static void main(String[] args)
    {
        ClassLoader loader = Test.class.getClassLoader();
        System.out.println(loader.getResource("foo/Test.class"));
    }
} 
```

（这个例子取自[一个类似的问题](https://stackoverflow.com/questions/227486/find-where-java-class-is-loaded-from)。）

要找到该目录，您需要手动拆分 URL。有关 jar URL 的格式，请参阅[JarClassLoader 教程](http://java.sun.com/docs/books/tutorial/deployment/jar/jarclassloader.html)。

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2013-08-28T08:04:04.460

我很惊讶地发现最近没有人提议使用[`Path`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html). 引用如下：“*该类`Path`包括各种方法，可用于获取有关路径的信息、访问路径的元素、将路径转换为其他形式或提取路径的一部分*”

因此，一个很好的选择是将对象获取`Path`为：

```
Path path = Paths.get(Test.class.getProtectionDomain().getCodeSource().getLocation().toURI()); 
```

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2013-08-20T17:41:55.937

唯一适用于 Linux、Mac 和 Windows 的解决方案：

```
public static String getJarContainingFolder(Class aclass) throws Exception {
  CodeSource codeSource = aclass.getProtectionDomain().getCodeSource();

  File jarFile;

  if (codeSource.getLocation() != null) {
    jarFile = new File(codeSource.getLocation().toURI());
  }
  else {
    String path = aclass.getResource(aclass.getSimpleName() + ".class").getPath();
    String jarFilePath = path.substring(path.indexOf(":") + 1, path.indexOf("!"));
    jarFilePath = URLDecoder.decode(jarFilePath, "UTF-8");
    jarFile = new File(jarFilePath);
  }
  return jarFile.getParentFile().getAbsolutePath();
} 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2012-03-29T11:27:28.613

这是对其他评论的升级，在我看来，这些评论的细节并不完整

> 使用 .jar 文件外部的相对“文件夹”（在 jar 的同一位置）：

```
String path = 
  YourMainClassName.class.getProtectionDomain().
  getCodeSource().getLocation().getPath();

path = 
  URLDecoder.decode(
    path, 
    "UTF-8");

BufferedImage img = 
  ImageIO.read(
    new File((
        new File(path).getParentFile().getPath()) +  
        File.separator + 
        "folder" + 
        File.separator + 
        "yourfile.jpg")); 
```

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2013-05-27T14:10:01.783

我有同样的问题，我是这样解决的：

```
File currentJavaJarFile = new File(Main.class.getProtectionDomain().getCodeSource().getLocation().getPath());   
String currentJavaJarFilePath = currentJavaJarFile.getAbsolutePath();
String currentRootDirectoryPath = currentJavaJarFilePath.replace(currentJavaJarFile.getName(), ""); 
```

我希望我对你有帮助。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2020-07-19T10:33:47.823

如果你真的在寻找一种简单的方法来获取 JAR 所在的文件夹，你应该使用这个实现。像这样的解决方案很难找到，许多解决方案不再受支持，许多其他解决方案提供文件的路径而不是实际目录。这比您将要找到的其他解决方案更容易，并且适用于 java 版本 1.12。

```
new File(".").getCanonicalPath() 
```

从其他答案中收集输入也是一个简单的方法：

```
String localPath=new File(getClass().getProtectionDomain().getCodeSource().getLocation().toURI()).getParentFile().getPath()+"\\"; 
```

两者都将返回具有以下格式的字符串：

```
"C:\Users\User\Desktop\Folder\" 
```

在一个简单而简洁的行中。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2015-11-02T08:13:09.343

为了获取运行jar文件的路径，我研究了上述解决方案并尝试了所有彼此存在一些差异的方法。如果这些代码在 Eclipse IDE 中运行，它们都应该能够找到包含指定类的文件的路径，并使用找到的路径打开或创建指定的文件。

但是比较棘手的是，直接或者通过命令行运行可运行的jar文件时，会失败，因为通过上述方法得到的jar文件的路径会在jar文件中给出一个内部路径，即它总是给出一个路径作为

rsrc:project-name（也许我应该说它是主类文件的包名——指示的类）

我无法将 rsrc:... 路径转换为外部路径，即在 Eclipse IDE 之外运行 jar 文件时无法获取 jar 文件的路径。

在 Eclipse IDE 之外获取运行 jar 文件路径的唯一可能方法是

```
System.getProperty("java.class.path") 
```

这行代码可能会返回运行jar文件的生存路径（包括文件名）（注意返回路径不是工作目录），如java文档和有人说会返回所有class文件的路径在同一个目录中，但是当我的测试在同一个目录中包含许多jar文件时，它只返回运行jar的路径（关于多路径问题确实发生在Eclipse中）。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2016-06-10T11:57:39.353

其他答案似乎指向不是目录的 Jar 文件位置的代码源。

采用

```
return new File(MyClass.class.getProtectionDomain().getCodeSource().getLocation().toURI().getPath()).getParentFile(); 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2011-09-28T07:26:48.177

如果您通过从 Gnome 桌面环境（而不是任何脚本或终端）单击来运行 jar，则上面选择的答案不起作用。

相反，我喜欢以下解决方案无处不在：

```
 try {
        return URLDecoder.decode(ClassLoader.getSystemClassLoader().getResource(".").getPath(), "UTF-8");
    } catch (UnsupportedEncodingException e) {
        return "";
    } 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2016-08-30T13:58:45.867

在我终于找到一个可行的（和简短的）解决方案之前，我不得不搞砸了很多。
可能`jarLocation`带有前缀`file:\`或`jar:file\`，可以使用删除`String#substring()`。

```
URL jarLocationUrl = MyClass.class.getProtectionDomain().getCodeSource().getLocation();
String jarLocation = new File(jarLocationUrl.toString()).getParent(); 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2011-04-15T14:30:48.803

实际上这是一个更好的版本 - 如果文件夹名称中有空格，旧版本会失败。

```
 private String getJarFolder() {
    // get name and path
    String name = getClass().getName().replace('.', '/');
    name = getClass().getResource("/" + name + ".class").toString();
    // remove junk
    name = name.substring(0, name.indexOf(".jar"));
    name = name.substring(name.lastIndexOf(':')-1, name.lastIndexOf('/')+1).replace('%', ' ');
    // remove escape characters
    String s = "";
    for (int k=0; k<name.length(); k++) {
      s += name.charAt(k);
      if (name.charAt(k) == ' ') k += 2;
    }
    // replace '/' with system separator char
    return s.replace('/', File.separatorChar);
  } 
```

至于小程序失败，您通常无论如何都无法访问本地文件。我对 JWS 了解不多，但要处理本地文件可能无法下载该应用程序。？

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2013-04-05T10:09:48.220

```
public static String dir() throws URISyntaxException
{
    URI path=Main.class.getProtectionDomain().getCodeSource().getLocation().toURI();
    String name= Main.class.getPackage().getName()+".jar";
    String path2 = path.getRawPath();
    path2=path2.substring(1);

    if (path2.contains(".jar"))
    {
        path2=path2.replace(name, "");
    }
    return path2;} 
```

在 Windows 上运行良好

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2014-02-21T15:23:28.580

我试图让jar运行路径使用

```
String folder = MyClassName.class.getProtectionDomain().getCodeSource().getLocation().getPath(); 
```

*c:\app>java -jar application.jar*

*在 Windows 上的文件夹“ c:\app* ”中运行名为“application.jar”的 jar 应用程序，字符串变量“folder”的值为“ *\c:\app\application.jar* ”，我在测试时遇到了问题路径的正确性

```
File test = new File(folder);
if(file.isDirectory() && file.canRead()) { //always false } 
```

所以我试图将“测试”定义为：

```
String fold= new File(folder).getParentFile().getPath()
File test = new File(fold); 
```

以正确的格式获取路径，例如“ *c:\app* ”而不是“ *\c:\app\application.jar* ”，我注意到它可以工作。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2015-10-20T16:57:15.263

最简单的解决方案是在运行 jar 时将路径作为参数传递。

您可以使用 shell 脚本（Windows 中的 .bat，其他任何地方的 .sh）自动执行此操作：

```
java -jar my-jar.jar . 
```

我曾经`.`传递当前工作目录。

**更新**

您可能希望将 jar 文件粘贴在子目录中，以免用户意外单击它。您的代码还应检查以确保已提供命令行参数，并在缺少参数时提供良好的错误消息。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2010-11-15T21:40:10.810

```
String path = getClass().getResource("").getPath(); 
```

路径始终引用 jar 文件中的资源。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2019-07-04T12:21:27.927

试试这个：

```
String path = new File("").getAbsolutePath(); 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2019-11-22T02:12:19.697

这段代码帮助我确定程序是否在 JAR 文件或 IDE 中执行：

```
private static boolean isRunningOverJar() {
    try {
        String pathJar = Application.class.getResource(Application.class.getSimpleName() + ".class").getFile();

        if (pathJar.toLowerCase().contains(".jar")) {
            return true;
        } else {
            return false;
        }
    } catch (Exception e) {
        return false;
    }
} 
```

如果我需要获取 JAR 文件的 Windows 完整路径，我正在使用这种方法：

```
 private static String getPathJar() {
        try {
            final URI jarUriPath =
                    Application.class.getResource(Application.class.getSimpleName() + ".class").toURI();
            String jarStringPath = jarUriPath.toString().replace("jar:", "");
            String jarCleanPath  = Paths.get(new URI(jarStringPath)).toString();

            if (jarCleanPath.toLowerCase().contains(".jar")) {
                return jarCleanPath.substring(0, jarCleanPath.lastIndexOf(".jar") + 4);
            } else {
                return null;
            }
        } catch (Exception e) {
            log.error("Error getting JAR path.", e);
            return null;
        }
    } 
```

我的完整代码与使用`CommandLineRunner`实现的 Spring Boot 应用程序一起使用，以确保应用程序始终在控制台视图中执行（在 JAR 文件名中错误地双击），我正在使用下一个代码：

```
@SpringBootApplication
public class Application implements CommandLineRunner {
    public static void main(String[] args) throws IOException {
        Console console = System.console();

        if (console == null && !GraphicsEnvironment.isHeadless() && isRunningOverJar()) {
            Runtime.getRuntime().exec(new String[]{"cmd", "/c", "start", "cmd", "/k",
                    "java -jar \"" + getPathJar() + "\""});
        } else {
            SpringApplication.run(Application.class, args);
        }
    }

    @Override
    public void run(String... args) {
        /*
        Additional code here...
        */
    }

    private static boolean isRunningOverJar() {
        try {
            String pathJar = Application.class.getResource(Application.class.getSimpleName() + ".class").getFile();

            if (pathJar.toLowerCase().contains(".jar")) {
                return true;
            } else {
                return false;
            }
        } catch (Exception e) {
            return false;
        }
    }

    private static String getPathJar() {
        try {
            final URI jarUriPath =
                    Application.class.getResource(Application.class.getSimpleName() + ".class").toURI();
            String jarStringPath = jarUriPath.toString().replace("jar:", "");
            String jarCleanPath  = Paths.get(new URI(jarStringPath)).toString();

            if (jarCleanPath.toLowerCase().contains(".jar")) {
                return jarCleanPath.substring(0, jarCleanPath.lastIndexOf(".jar") + 4);
            } else {
                return null;
            }
        } catch (Exception e) {
            return null;
        }
    }
} 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2015-12-14T06:34:54.003

令人沮丧的是，当您在 Eclipse 中进行开发时，`MyClass.class.getProtectionDomain().getCodeSource().getLocation()`返回的`/bin`目录很好，但是当您将其编译为 jar 时，该路径包含了`/myjarname.jar`为您提供非法文件名的部分。

为了让代码在 ide 和编译成 jar 后都能工作，我使用以下代码：

```
URL applicationRootPathURL = getClass().getProtectionDomain().getCodeSource().getLocation();
File applicationRootPath = new File(applicationRootPathURL.getPath());
File myFile;
if(applicationRootPath.isDirectory()){
    myFile = new File(applicationRootPath, "filename");
}
else{
    myFile = new File(applicationRootPath.getParentFile(), "filename");
} 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2016-06-21T15:57:17.680

不太确定其他人，但在我的情况下，它不适用于“可运行的 jar”，我通过将 phchen2 答案和来自此链接的另一个代码一起修复代码来使其工作：[如何获取正在运行的 JAR 文件的路径？](https://stackoverflow.com/questions/320542/how-to-get-the-path-of-a-running-jar-file?lq=1) 编码：

```
 String path=new java.io.File(Server.class.getProtectionDomain()
                .getCodeSource()
                .getLocation()
                .getPath())
          .getAbsolutePath();
       path=path.substring(0, path.lastIndexOf("."));
       path=path+System.getProperty("java.class.path"); 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2019-03-21T11:50:01.440

已经尝试了几种解决方案，但对于（可能是特殊的）可运行 jar 已在 Eclipse 中使用“打包外部库”导出的情况，都没有产生正确的结果。由于某种原因，在这种情况下，所有基于 ProtectionDomain 的解决方案都会导致 null。

通过结合上面的一些解决方案，我设法实现了以下工作代码：

```
String surroundingJar = null;

// gets the path to the jar file if it exists; or the "bin" directory if calling from Eclipse
String jarDir = new File(ClassLoader.getSystemClassLoader().getResource(".").getPath()).getAbsolutePath();

// gets the "bin" directory if calling from eclipse or the name of the .jar file alone (without its path)
String jarFileFromSys = System.getProperty("java.class.path").split(";")[0];

// If both are equal that means it is running from an IDE like Eclipse
if (jarFileFromSys.equals(jarDir))
{
    System.out.println("RUNNING FROM IDE!");
    // The path to the jar is the "bin" directory in that case because there is no actual .jar file.
    surroundingJar = jarDir;
}
else
{
    // Combining the path and the name of the .jar file to achieve the final result
    surroundingJar = jarDir + jarFileFromSys.substring(1);
}

System.out.println("JAR File: " + surroundingJar); 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2020-12-17T22:46:53.467

上述方法在我的 Spring 环境中对我不起作用，因为 Spring 将实际类隐藏到一个名为 BOOT-INF 的包中，因此不是运行文件的实际位置。我找到了另一种通过`Permissions`已授予运行文件的对象检索运行文件的方法：

```
 public static Path getEnclosingDirectory() {
    return Paths.get(FileUtils.class.getProtectionDomain().getPermissions()
            .elements().nextElement().getName()).getParent();
} 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2021-11-21T02:42:48.880

对于jar文件路径：

```
String jarPath = File(MyClass.class.getProtectionDomain().getCodeSource().getLocation()
    .toURI()).getPath(); 
```

要获取该 jar 文件的目录路径：

```
String dirPath = new File(MyClass.class.getProtectionDomain().getCodeSource().getLocation()
                        .toURI()).getParent(); 
```

上面两行的结果是这样的：

> /home/user/MyPrograms/myapp/myjar.jar（用于 jar 路径）

> /home/user/MyPrograms/myapp（用于目录路径）

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2017-05-19T13:12:36.630

**提到它只被签入，`Windows`但我认为它在其他操作系统上完美运行 [ `Linux,MacOs,Solaris`] :)。**

* * *

我在同一个目录中有**2 个文件。** `.jar`我想从一个`.jar`文件中启动`.jar`位于同一目录中的另一个文件。

问题是当你从`cmd`当前目录启动它时是`system32`.

* * *

> 警告！

*   以下似乎在我所做的所有测试中都运行良好，即使使用文件夹名称`;][[;'57f2g34g87-8+9-09!2#@!$%^^&()`或`()%&$%^@#` 运行良好。
*   我正在使用`ProcessBuilder`以下内容：

..

```
//The class from which i called this was the class `Main`
String path = getBasePathForClass(Main.class);
String applicationPath=  new File(path + "application.jar").getAbsolutePath();

System.out.println("Directory Path is : "+applicationPath);

//Your know try catch here
//Mention that sometimes it doesn't work for example with folder `;][[;'57f2g34g87-8+9-09!2#@!$%^^&()` 
ProcessBuilder builder = new ProcessBuilder("java", "-jar", applicationPath);
builder.redirectErrorStream(true);
Process process = builder.start();

//...code 
```

* * *

`getBasePathForClass(Class<?> classs)`：

```
 /**
     * Returns the absolute path of the current directory in which the given
     * class
     * file is.
     * 
     * @param classs
     * @return The absolute path of the current directory in which the class
     *         file is.
     * @author GOXR3PLUS[StackOverFlow user] + bachden [StackOverFlow user]
     */
    public static final String getBasePathForClass(Class<?> classs) {

        // Local variables
        File file;
        String basePath = "";
        boolean failed = false;

        // Let's give a first try
        try {
            file = new File(classs.getProtectionDomain().getCodeSource().getLocation().toURI().getPath());

            if (file.isFile() || file.getPath().endsWith(".jar") || file.getPath().endsWith(".zip")) {
                basePath = file.getParent();
            } else {
                basePath = file.getPath();
            }
        } catch (URISyntaxException ex) {
            failed = true;
            Logger.getLogger(classs.getName()).log(Level.WARNING,
                    "Cannot firgue out base path for class with way (1): ", ex);
        }

        // The above failed?
        if (failed) {
            try {
                file = new File(classs.getClassLoader().getResource("").toURI().getPath());
                basePath = file.getAbsolutePath();

                // the below is for testing purposes...
                // starts with File.separator?
                // String l = local.replaceFirst("[" + File.separator +
                // "/\\\\]", "")
            } catch (URISyntaxException ex) {
                Logger.getLogger(classs.getName()).log(Level.WARNING,
                        "Cannot firgue out base path for class with way (2): ", ex);
            }
        }

        // fix to run inside eclipse
        if (basePath.endsWith(File.separator + "lib") || basePath.endsWith(File.separator + "bin")
                || basePath.endsWith("bin" + File.separator) || basePath.endsWith("lib" + File.separator)) {
            basePath = basePath.substring(0, basePath.length() - 4);
        }
        // fix to run inside netbeans
        if (basePath.endsWith(File.separator + "build" + File.separator + "classes")) {
            basePath = basePath.substring(0, basePath.length() - 14);
        }
        // end fix
        if (!basePath.endsWith(File.separator)) {
            basePath = basePath + File.separator;
        }
        return basePath;
    } 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2017-09-08T11:58:34.743

这段代码对我有用：

```
private static String getJarPath() throws IOException, URISyntaxException {
    File f = new File(LicensingApp.class.getProtectionDomain().().getLocation().toURI());
    String jarPath = f.getCanonicalPath().toString();
    String jarDir = jarPath.substring( 0, jarPath.lastIndexOf( File.separator ));
    return jarDir;
  } 
```

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2011-04-14T18:09:18.963

此方法从存档中的代码调用，返回 .jar 文件所在的文件夹。它应该在 Windows 或 Unix 中工作。

```
 private String getJarFolder() {
    String name = this.getClass().getName().replace('.', '/');
    String s = this.getClass().getResource("/" + name + ".class").toString();
    s = s.replace('/', File.separatorChar);
    s = s.substring(0, s.indexOf(".jar")+4);
    s = s.substring(s.lastIndexOf(':')-1);
    return s.substring(0, s.lastIndexOf(File.separatorChar)+1);
  } 
```

源自代码：[确定是否从 JAR 运行](http://www.rgagnon.com/javadetails/java-0391.html)

* * *

## 回答 #30

> 赞同：-1
> 
> 时间：2015-05-14T18:02:19.523

该`getProtectionDomain`方法有时可能不起作用，例如，当您必须为某些核心 Java 类（例如，在我`StringBuilder`的 IBM JDK 中的案例类中）找到 jar 时，但以下工作无缝：

```
public static void main(String[] args) {
    System.out.println(findSource(MyClass.class));
    // OR
    System.out.println(findSource(String.class));
}

public static String findSource(Class<?> clazz) {
    String resourceToSearch = '/' + clazz.getName().replace(".", "/") + ".class";
    java.net.URL location = clazz.getResource(resourceToSearch);
    String sourcePath = location.getPath();
    // Optional, Remove junk
    return sourcePath.replace("file:", "").replace("!" + resourceToSearch, "");
} 
```

* * *

## 回答 #31

> 赞同：-1
> 
> 时间：2015-05-21T18:41:50.367

我有另一种方法来获取类的字符串位置。

```
URL path = Thread.currentThread().getContextClassLoader().getResource("");
Path p = Paths.get(path.toURI());
String location = p.toString(); 
```

输出字符串的形式为

```
C:\Users\Administrator\new Workspace\... 
```

空格和其他字符被处理，并且以不带 . 的形式处理`file:/`。所以会更容易使用。

* * *

## 回答 #32

> 赞同：-1
> 
> 时间：2021-04-08T08:56:12.700

对于一些愚蠢的简单事情，您只需要这一行：

对于 Windows 用户，将“pwd”更改为“cd”

```
runCommand("pwd"); 
```

只需将此方法放入类中：

```
public static String runCommand(String command) {
    StringBuilder sb = new StringBuilder();
    try {
        ProcessBuilder pb = new ProcessBuilder(command);
        final Process p = pb.start();
        BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));
        String line;
        sb.append(br.read());
        while ((line= br.readLine()) != null) sb.append(line).append("\n");
    }
    catch (IOException e) {e.printStackTrace();}
    return sb.toString();
} 
```

* * *

## 回答 #33

> 赞同：-2
> 
> 时间：2014-03-03T23:54:53.027

我使用 Java 7 编写，并在 Windows 7 中使用 Oracle 运行时进行测试，并在 Ubuntu 中使用开源运行时进行测试。这非常适合这些系统：

任何正在运行的 jar 文件的父目录的路径（假设调用此代码的类是 jar 归档本身的直接子目录）：

```
try {
    fooDir = new File(this.getClass().getClassLoader().getResource("").toURI());
} catch (URISyntaxException e) {
    //may be sloppy, but don't really need anything here
}
fooDirPath = fooDir.toString(); // converts abstract (absolute) path to a String 
```

因此， foo.jar 的路径将是：

```
fooPath = fooDirPath + File.separator + "foo.jar"; 
```

同样，这没有在任何 Mac 或旧版 Windows 上进行测试

# c# - 在 C# 中捕获 javascript 事件

> ID：320555
> 
> 赞同：1
> 
> 时间：2008-11-26T12:35:47.563
> 
> 标签：c#, javascript, events

我在嵌入在 ac# 应用程序中的网络浏览器中运行谷歌地球。我通过 javascript 捕获了一个事件，当用户右键单击地球时会触发该事件。我怎样才能冒泡一个事件从 javascript 到 c# 以便可以在那里处理它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T12:46:47.773

要从 Javascript 引发事件，您需要执行以下步骤：

1) 在您的 aspx 页面中创建一个隐藏的 asp:button。
2) 在 aspx 文件中编写以下 JS 代码：
     var btnHidden = document.getElementById(HiddenButtonClientId);
       if (btnHidden) { btnHidden.click(); }

现在，您的按钮单击事件将被触发，您可以在那里编写所需的代码。

# uml - 开始一个新项目的思考过程和步骤

> ID：320556
> 
> 赞同：0
> 
> 时间：2008-11-26T12:36:10.103
> 
> 标签：uml, srs

我只是想知道你们在开始一个新项目时遵循的步骤是什么？您是否曾经创建过 UML 图、SRS 或任何设计文档？我正在开始一个新项目，并希望就所有这些做法获得一些专家建议。我知道编码，但我从未尝试过 UML 和其他东西。

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T12:51:55.347

通常，我的进程运行如下：

*   我通常从一个逻辑模型开始——如果你愿意的话，一个混蛋的 UML——这样我就可以可视化我系统中的关键实体和关系。
*   然后我考虑一个底层数据模型（考虑围绕数据消费模式、性能等的潜在问题）
*   然后我选择合适的数据访问架构
*   然后我开始编码数据层和业务对象（根据需要重新设计逻辑模型）

我不认为在逻辑阶段“过度设计”有太多意义，因为从业务和技术/设计的角度来看，需求会随着项目的进展而变化，而这种变化是你无法总是提前预料到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T22:05:37.677

您可能希望在项目生命周期的早期考虑的一件事是创建领域模型。作为一名程序员，你会说计算机术语很舒服，但你可能不会说客户的专业术语。领域模型是您学习如何与客户交谈的一种方式，以便他们了解您并且您也了解他们。它可以采用 UML 类图的形式，也可以是 Word 文档中的词汇表，只要您觉得合适就行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T22:17:01.710

在概念阶段之后，我喜欢创建的第一件事是定义列表。这将通知我的变量、类和函数名称，并让我能够谈论它们。如果可以选择，我通常会选择 psudocode 类而不是 UML，因为在您编写时更容易调整。另一个我喜欢尽快做的想法是创建一个界面模型。这可能是一个 GUI、CLI 或 API，具体取决于项目，但让我对我的代码需要达到的水平有一个明确的认识。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T13:05:42.243

我从来没有真正关心过 UML（反正不是“真正的”UML）。当我开始一个项目时，我对一些事情感兴趣：

1.  我的软件将如何使用（以及由谁使用）
2.  软件需要做什么
3.  不同的功能/组件如何组合在一起

对于 1，您可以使用 UML 用例图。我通常使用自己的伪用例图。从中您可以确定谁将使用您的软件以及以何种方式使用您的软件。不同的用户会以不同的方式使用该软件。这很有用，因为它 a) 帮助您确定目标用户是谁，b) 帮助您确定 2 所需的功能。此外，如果您知道谁将使用您的软件以及如何使用，您可以专门为这些用户调整它。

对于 2，我通常只是列出一个大清单。有时将列表拆分为类别和/或优先级很有用。这通常会成为我的“TODO”列表。

对于 3，我画了一些类似于 UML 类图的东西，除了没有 UML 注释。基本上每个类/模块/组件都有自己的盒子，它们用线条链接在一起。这向我展示了系统中将存在哪些组件以及它们如何相关/通信等。我可能会为每个项目绘制不同的内容，并且有些会比其他项目获得更多细节，这取决于我当时觉得我需要什么。

在此之后，我喜欢通过编写简单的一次性模型/原型来原型化核心概念。这会给我一些关于它如何工作，如何实现它以及如何不实现它的想法（我经常以“错误的方式”做原型，如果我没有写一个我不会知道） . 这里重要的是代码没有在真实版本中使用。

# javascript - 修改 JavaScript 翻转脚本

> ID：320559
> 
> 赞同：0
> 
> 时间：2008-11-26T12:37:39.447
> 
> 标签：javascript, image, mouseover, rollover, onmouseover

我正在尝试在 blogspot 上实现这个 JavaScript 代码（它解析 XML 代码，有些代码比其他代码效果更好）

```
 </head><body>
<div class="navbar section" id="navbar"><div class="widget Navbar" id="Navbar1"><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener("load",
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script> 
```

该代码使用以下片段可以很好地翻转：

```
<img xsrc="/1.jpg" class="domroll /1flip.jpg" src="/1.jpg"> 
```

我想修改代码，以便它替换不同的图像，而不是当前鼠标悬停的图像，但到目前为止没有运气。（也许通过命名它们并将名称作为变量传递）

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-07T23:02:41.460

您发布的 JavaScript 片段与图像翻转没有任何关系，也不会产生第二个片段。

第一个片段允许您以跨浏览器的方式更改 DOM 节点 onLoad 的属性。您可能想要编辑您的问题以提供适当的代码段。

# sql - Hibernate 将 SQL 转换为 Criteria

> ID：320563
> 
> 赞同：0
> 
> 时间：2008-11-26T12:38:11.473
> 
> 标签：sql, hibernate, criteria, transform

我想为我的 SQL 查询使用 Criteria。我有 3 张表“家”、“人”和第三张表“liveIn”，用于家庭和人之间的对应关系。

我的 sql 查询是“选择 home.id from home, person, liveIn where home.country = 'Japan' and person.id = '15' and liveIn.Homeid = home.id and liveIn.PersonId = person.id”

一点帮助任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-15T13:56:12.987

如果您有人员对象的对象引用，则可以在条件查询中使用它，而不必搜索人员的 id。

例如：

```
public List<Home> getHomesForPerson(Person thePerson){

    List<Home> homes = session.createCriteria(Home.class)
                          .add(Restrictions.eq("country", "Japan")
                          .add(Restrictions.eq("person", thePerson)
                          .list();
    return homes;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-27T10:39:58.340

假设您将表映射为实体 Home、Person 和 LiveIn，那么这样的事情可能会起作用：

```
 session.createCriteria(Home.class)
                .add(Restrictions.eq("country", "Japan"))
                .createAlias("person", "p")
                .add(Restrictions.eq("p.id", "15"))
                .list(); 
```

# haskell - haskell中的代数类型

> ID：320567
> 
> 赞同：2
> 
> 时间：2008-11-26T12:39:37.570
> 
> 标签：haskell, functional-programming

如何使用基本算术简化表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T15:49:56.750

我不确定你的意思，但如果你有一个表达式数据类型，你可以定义一个递归评估函数。在这种情况下，eval 意味着简化。

例如，

```
data Exp = Lit Int
         | Plus Exp Exp
         | Times Exp Exp

eval :: Exp -> Int
eval (Lit x)     = x
eval (Plus x y)  = eval x + eval y
eval (Times x y) = eval x * eval y 
```

一旦向语言中添加变量，它就会变得非常有趣，但这是表达式求值器的最基本形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T12:48:36.040

您可以使用此处描述的技术：http: [//augustss.blogspot.com/2007/04/overloading-haskell-numbers-part-2.html](http://augustss.blogspot.com/2007/04/overloading-haskell-numbers-part-2.html)。使您的类型成为必需的类型类（Num、Fractional、Floating），以便 -、+、* 等适用于您的类型。然后如果表达式树最终构建完成，你可以对其进行操作，看看你可以简化什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T15:58:42.020

模块 Expr 其中

-- 变量由字符串命名，假定为标识符。类型变量 = 字符串

-- 表达式的表示。数据表达式 = 常量整数 | Var 变量 | 加 Expr Expr | 减 Expr Expr | Mult Expr Expr 推导 (Eq, Show)

诸如 0*e=e*0=0 和 1*e=e*1=0+e=e+0=e-0=e 之类的简化以及简化常量子表达式，例如 Plus (Const 1) (Const 2) 会变为 Const 3。我不希望变量（或变量和常量）被连接：Var“st”是与 Var“s”不同的变量。

它们需要像下面这样写 化简 (Plus (Var'x') (Const 0)) = Var"x"

# ajax - 如何强制我的 SharePoint AjaxSmartPart 使用较小的“发布”模式 javascript？

> ID：320571
> 
> 赞同：1
> 
> 时间：2008-11-26T12:40:34.603
> 
> 标签：ajax, sharepoint, wss-3.0, smartpart

我使用`ReturnOfSmartPart`on`WSS3`将`ASCX`in显示`Sharepoint`为 Web 部件。这很好用。

唯一的问题是`AjaxSmartPart`似乎使用的是调试模式javascript（脚本接近1MB！）

如何确保`AjaxSmartPart`只使用`Release`java 脚本模式？

**笔记：**

*   我已经发布了我`ASCX`的发布模式。
*   `Debug="false"`在我的`Sharepoint` `web.config`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-01T07:07:13.793

很简单，将您的 web.config 调试模式设置为 false。这应该已经起作用了。

如果您希望覆盖该行为，请将以下代码放入您的 ASCX 的 OnPreRender 方法中...

```
protected override void OnInit(EventArgs e)
{
    ScriptManager sm = ScriptManager.GetCurrent(this.Page);
    sm.ScriptMode = ScriptMode.Release;

    base.OnInit(e);
} 
```

# user-interface - 愚蠢和令人沮丧的跨浏览器用户界面问题

> ID：320575
> 
> 赞同：2
> 
> 时间：2008-11-26T12:42:58.360
> 
> 标签：user-interface, cross-browser, styles

有没有人花了几个小时来让他们的应用程序的 UI 在所有浏览器中正确呈现？

当简单的样式倾向于在一个浏览器中工作而不是在其他浏览器中工作时，您如何解决挫败感......并且在一天结束时您发明了处理它的黑客（在某些情况下也不会发生），只是在浪费您的时间之后？

我将等待所有浏览器都遵循相同标准的那一天，直到那时我（和其他人）可以从经常这样做的人的一些建议中学习。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-26T12:45:37.697

我在 Firefox 中设计，然后在 IE 中进行测试，而不是相反。FireFox 更严格，所以如果它在那里工作，它更有可能在 IE 中工作。省去了一点挫败感……

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-26T12:58:07.220

不要强调，它没用，而且我认为没有人会看到所有浏览器都遵循相同的标准。

我靠什么生存？

我在 Linux 中使用 Firefox 进行开发。我已经安装了 WebDev 插件（[https://addons.mozilla.org/es-ES/firefox/addon/60](https://addons.mozilla.org/es-ES/firefox/addon/60)）使CSS设计更容易。

当我的 Web 应用程序即将完成时，我在 IE6 和 IE7 中尝试它（在 Linux 中使用 wine）。然后，我为它们中的每一个创建一个新样式表，并使用 IE-conditional-comments 加载它（[http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)）并开始一个一个地进行更改，直到设计在两个浏览器中都可以。

对于其他浏览器（Opera、Safari、Galeon...），FF 下的设计可以正常工作。

最后，我有三个 CSS：一个用于 IE6，一个用于 IE7，一个（原始、有效和正确的一个）用于其他浏览器。

我认为这是一种比在正确的 CSS 中编写数十个 hack 更好的方法，并且对未来更加灵活（IE8 ...）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T13:11:15.010

今天你可以在标准模式下编码，只需要担心 IE6 的缺点，与 IE5 相比，这些缺点很少。当然，当 IE7 成为基准时，我们都会很高兴，但与昨天相比，创作很容易。没有更多的盒子模型黑客，对于一个......

奢华。在*我的*日子里，我们必须在 -30px 的空白处起床，用我们的纯文本编辑器清理 <​图层，每天花 20 个小时在服务器日志上嗅探 IE3，然后当我们回到家时到我们的盒子——我说“盒子”，它更像是一个嵌套在另外三个 <表> 中的 <表>——我们 Netscape 4 会通过崩溃来杀死我们的页面，并将我们发送到脚本 int'coal scuttle。

你试着告诉今天的网页设计师......他们不会相信你的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-26T12:45:37.090

我建议囤积瓷器（不太贵）并将其存放在您的工作站可以触及的地方。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-21T17:21:41.503

我总是使用 Safari 和 Firefox 进行开发，如果我想改变一下，偶尔也会使用 Opera。但我总是——**总是**！检查对 IE 的每个更改。所有这三个 - IE6、7 和 8。我为此使用[IETester](http://www.my-debugbar.com/wiki/IETester/HomePage)。

立即捕获那些讨厌的错误会让你的生活变得更好，而不是在你完成工作后才第一次打开 IE。然后，几乎不可能回溯并弄清楚到底哪里出了问题。

我使用条件注释为每个 IE 提供单独的 CSS（有时是 javascript）。是的，还有IE8。它仍然不存在。顺便说一句，不要盲目地期望 Opera 可以工作，即使它在 Firefox/WebKit 中很好用。

所以，永远不要在 IE 中设计。并为 Firefox[获取 Firebug](http://getfirebug.com/)。这是为网络开发人员制作的最好的插件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-21T17:24:59.923

我从 Yahoo 的[reset](http://developer.yahoo.com/yui/reset/) / [base](http://developer.yahoo.com/yui/base/) CSS 文件开始（它们很小）。从第一天起，它们就使浏览器之间的样式保持一致。然后，当我添加自定义样式时，它们通常在所有浏览器中都受到好评并且保持一致。

当然，你仍然需要偶尔的破解这个和那个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-26T14:21:43.307

去访问[www.quirksmode.org](http://www.quirksmode.org)，总是对我有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-26T12:50:15.100

你接受它，从中学习，并通过几年的实践知道什么时候该做什么。

除了 IE 之外，每一个现代浏览器都几乎毫无特色，除了最奇特的。因此，保持简单。使用 firebug 对 firefox 进行迭代构建。很好地概念化对象，坚持标准。当您准备好进行修复 IE 所需的黑客攻击时。永远不要从 IE 退步。

99% 的时间你应该能够修复 IE，只考虑盒子模型和浮动问题。不要犯回到桌子上的错误。

CSS 真的很禅。

# nntp - 最好的 nntp 到 Web 网关？

> ID：320580
> 
> 赞同：2
> 
> 时间：2008-11-26T12:44:52.490
> 
> 标签：nntp, usenet

我的公司在内部 nntp 服务器上使用 usenet 组，我想在其中添加一个 Web 服务器，以允许通常的浏览和搜索，但另外提供服务器上可能已过期的旧消息的存档。这主要用于搜索档案，因此发布的能力并不重要。

谁能推荐一款可以充当网关的软件？我在 Google 上找到的大部分内容似乎要么不再维护，要么不提供存档功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-29T18:25:21.307

Gmane看起来不错。您还可以查看 NNTP -> 电子邮件事物并使用任何可用的电子邮件网络存档软件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-05-08T03:48:01.063

FUD论坛怎么样？详情见[http:///fudforum.org/](http:///fudforum.org/)

# java - java中用于共享“常量”的静态字段接口

> ID：320588
> 
> 赞同：118
> 
> 时间：2008-11-26T12:48:12.717
> 
> 标签：java

我正在查看一些开源 Java 项目以进入 Java，并注意到其中很多都有某种“常量”接口。

例如，[processing.org](http://www.processing.org)有一个名为[PConstants.java](http://dev.processing.org/source/index.cgi/tags/processing-1.0/core/src/processing/core/PConstants.java?view=markup)的接口，大多数其他核心类都实现了这个接口。该接口充满了静态成员。这种方法是否有原因，或者这被认为是不好的做法？为什么不在*有意义*的地方使用枚举或静态类？

我觉得使用接口来允许某种伪“全局变量”很奇怪。

```
public interface PConstants {

  // LOTS OF static fields...

  static public final int SHINE = 31;

  // emissive (by default kept black)
  static public final int ER = 32;
  static public final int EG = 33;
  static public final int EB = 34;

  // has this vertex been lit yet
  static public final int BEEN_LIT = 35;

  static public final int VERTEX_FIELD_COUNT = 36;

  // renderers known to processing.core

  static final String P2D    = "processing.core.PGraphics2D";
  static final String P3D    = "processing.core.PGraphics3D";
  static final String JAVA2D = "processing.core.PGraphicsJava2D";
  static final String OPENGL = "processing.opengl.PGraphicsOpenGL";
  static final String PDF    = "processing.pdf.PGraphicsPDF";
  static final String DXF    = "processing.dxf.RawDXF";

  // platform IDs for PApplet.platform

  static final int OTHER   = 0;
  static final int WINDOWS = 1;
  static final int MACOSX  = 2;
  static final int LINUX   = 3;

  static final String[] platformNames = {
    "other", "windows", "macosx", "linux"
  };

  // and on and on

} 
```

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2008-11-26T13:05:24.367

这通常被认为是不好的做法。问题是常量是实现类的公共“接口”（为了更好的词）的一部分。这意味着实现类将所有这些值发布到外部类，即使它们仅在内部需要。常量在整个代码中激增。一个例子是 Swing 中的[SwingConstants接口，它由几十个类实现，所有这些类都将其](http://java.sun.com/javase/6/docs/api/javax/swing/SwingConstants.html)*所有*常量（甚至它们不使用的常量）作为自己的常量“重新导出” 。

但不要只相信我的话，[Josh Bloch 也说](https://rads.stackoverflow.com/amzn/click/com/0321356683)这很糟糕：

> **常量接口模式是接口使用不当。**一个类在内部使用一些常量是一个实现细节。实现一个常量接口会导致这个实现细节泄漏到类的导出 API 中。类实现一个常量接口对类的用户来说无关紧要。事实上，它甚至可能使他们感到困惑。更糟糕的是，它代表了一种承诺：如果在未来的版本中修改了类以使其不再需要使用常量，它仍然必须实现接口以确保二进制兼容性。如果一个非最终类实现了一个常量接口，那么它的所有子类的命名空间都会被接口中的常量污染。

枚举可能是更好的方法。或者您可以简单地将常量作为公共静态字段放在无法实例化的类中。这允许另一个类访问它们而不会污染它自己的 API。

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2008-11-26T12:55:07.680

在 Java 1.5+ 中，您可以使用静态导入从另一个类/接口导入常量/静态方法，而不是实现“常量接口”：

```
import static com.kittens.kittenpolisher.KittenConstants.*; 
```

这避免了让你的类实现没有功能的接口的丑陋。

至于有一个类只是为了存储常量的做法，我认为有时是必要的。有些常量在类中没有自然的位置，因此最好将它们放在“中立”的位置。

但是不要使用接口，而是使用带有私有构造函数的最终类。（使该类无法实例化或子类化，发送一个强烈的信息，表明它不包含非静态功能/数据。）

例如：

```
/** Set of constants needed for Kitten Polisher. */
public final class KittenConstants
{
    private KittenConstants() {}

    public static final String KITTEN_SOUND = "meow";
    public static final double KITTEN_CUTENESS_FACTOR = 1;
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-15T03:17:50.530

我不会假装正确，但让我们看看这个小例子：

```
public interface CarConstants {

      static final String ENGINE = "mechanical";
      static final String WHEEL  = "round";
      // ...

}

public interface ToyotaCar extends CarConstants //, ICar, ... {
      void produce();
}

public interface FordCar extends CarConstants //, ICar, ... {
      void produce();
}

// and this is implementation #1
public class CamryCar implements ToyotaCar {

      public void produce() {
           System.out.println("the engine is " + ENGINE );
           System.out.println("the wheel is " + WHEEL);
      }
}

// and this is implementation #2
public class MustangCar implements FordCar {

      public void produce() {
           System.out.println("the engine is " + ENGINE );
           System.out.println("the wheel is " + WHEEL);
      }
} 
```

丰田汽车对福特汽车一无所知，福特汽车对丰田汽车一无所知。原则 CarConstants 应该改变，但是......

常数不应该改变，因为轮子是圆的，egine是机械的，但是……未来丰田的研究工程师发明了电子发动机和平轮！让我们看看我们的新界面

```
public interface InnovativeCarConstants {

          static final String ENGINE = "electronic";
          static final String WHEEL  = "flat";
          // ...
} 
```

现在我们可以改变我们的抽象：

```
public interface ToyotaCar extends CarConstants 
```

到

```
public interface ToyotaCar extends InnovativeCarConstants 
```

现在，如果我们需要更改 ENGINE 或 WHEEL 的核心值，我们可以在抽象级别更改 ToyotaCar 接口，不要触及实现

它不安全，我知道，但我仍然想知道你是否考虑过这个问题

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-08-19T15:29:08.557

Java 中有很多人讨厌这种模式。但是，静态常量的接口有时确实有价值。您需要基本满足以下条件：

1.  这些概念是几个类的公共接口的一部分。

2.  它们的值可能会在未来的版本中发生变化。

3.  所有实现都使用相同的值至关重要。

例如，假设您正在编写假设查询语言的扩展。在此扩展中，您将使用索引支持的一些新操作来扩展语言语法。例如，您将拥有一个支持地理空间查询的 R-Tree。

因此，您使用静态常量编写了一个公共接口：

```
public interface SyntaxExtensions {
     // query type
     String NEAR_TO_QUERY = "nearTo";

     // params for query
     String POINT = "coordinate";
     String DISTANCE_KM = "distanceInKm";
} 
```

现在后来，一位新开发人员认为他需要构建一个更好的索引，所以他来构建一个 R* 实现。通过在他的新树中实现这个接口，他保证不同的索引在查询语言中具有相同的语法。此外，如果您后来认为“nearTo”是一个令人困惑的名称，您可以将其更改为“withinDistanceInKm”，并知道您的所有索引实现都会遵守新语法。

PS：这个例子的灵感来自于 Neo4j 空间代码。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-03-01T15:07:58.460

鉴于事后诸葛亮的优势，我们可以看到 Java 在很多方面都被破坏了。Java 的一个主要缺点是将接口限制为抽象方法和静态最终字段。更新、更复杂的 OO 语言（如 Scala）通过特征包含接口，这些特征可以（并且通常确实）包括具体方法，这些方法可能具有零值（常量！）。有关将特征作为可组合行为单位的说明，请参阅[http://scg.unibe.ch/archive/papers/Scha03aTraits.pdf](http://scg.unibe.ch/archive/papers/Scha03aTraits.pdf)。有关 Scala 中的特征如何与 Java 中的接口进行比较的简短描述，请参阅[http://www.codecommit.com/blog/scala/scala-for-java-refugees-part-5](https://web.archive.org/web/20170803142514if_/http://www.codecommit.com/blog/scala/scala-for-java-refugees-part-5). 在教授 OO 设计的上下文中，断言接口不应该包含静态字段之类的简单规则是愚蠢的。许多特性自然包含常量，这些常量是特性支持的公共“接口”的适当部分。在编写 Java 代码时，没有干净、优雅的方式来表示特征，但在接口中使用静态 final 字段通常是一种很好的解决方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-14T16:59:04.647

根据 JVM 规范，接口中的字段和方法只能有 Public、Static、Final 和 Abstract。[来自 Java VM 内部的参考](http://books.google.co.in/books?id=vNPW8Btqxk4C&lpg=PR22&dq=Chapter%206%20--%20%22The%20Java%20Class%20File%22.&pg=PA198#v=onepage&q&f=false)

默认情况下，接口中的所有方法都是抽象的，即使您没有明确提及它也是如此。

接口旨在仅提供规范。它不能包含任何实现。所以为了避免实现类来改变规范，它是最终的。由于接口无法实例化，因此它们被设为静态以使用接口名称访问字段。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-08T09:16:16.770

我没有足够的声誉对 Pleerock 发表评论，因此我必须创建一个答案。对此我很抱歉，但他付出了一些努力，我想回答他。

Pleerock，您创建了一个完美的示例来说明为什么这些常量应该独立于接口和独立于继承。对于应用程序的客户来说，这些汽车的实现之间存在技术差异并不重要。它们对客户来说是一样的，只是汽车。所以，客户想从那个角度来看待它们，这是一个像 I_Somecar 这样的接口。在整个应用程序中，客户将只使用一个视角，而不是针对每个不同的汽车品牌使用不同的视角。

如果客户想在购买前比较汽车，他可以采用以下方法：

```
public List<Decision> compareCars(List<I_Somecar> pCars); 
```

接口是关于行为的契约，从一个角度显示不同的对象。你设计它的方式，每个汽车品牌都会有自己的传承路线。虽然这在现实中是非常正确的，因为汽车可以有很大的不同，就像比较完全不同类型的物体一样，最终在不同的汽车之间存在选择。这就是所有品牌都必须共享的界面视角。常数的选择不应该使这成为不可能。请考虑 Zarkonnen 的回答。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-11-26T12:52:50.367

这来自于 Java 1.5 存在并将枚举带给我们之前的时间。在此之前，没有定义一组常量或约束值的好方法。

在很多项目中，这仍然被使用，大部分时间要么是为了向后兼容，要么是由于需要大量的重构来摆脱。

# regex - Elisp 中的正则表达式包含换行符

> ID：320590
> 
> 赞同：7
> 
> 时间：2008-11-26T12:48:48.393
> 
> 标签：regex, emacs, elisp

我正在尝试在 emacs（python 模式）中向 Python 文档字符串添加特殊标记。

目前我可以提取一行：

```
(font-lock-add-keywords
 'python-mode
 '(("\\(\"\\{3\\}\\.+\"\\{3\\}\\)"
    1 font-lock-doc-face prepend))) 
```

这现在有效：

```
"""Foo""" 
```

但是只要有一个换行符，例如：

```
"""
Foo

""" 
```

它不再起作用了。这是合乎逻辑的，因为`.`不包括换行符 ( `\n`)。我应该使用字符类吗？

如何更正此正则表达式以包含 之间的所有内容`""" """`？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T13:53:19.527

```
"\\(\"\\{3\\}\\(.*\n?\\)*?\"\\{3\\}\\)" 
```

这 ”*？” 构造是“*”的非贪婪版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T14:19:47.587

Emacs 正则表达式中的换行符由 Cq Cj 输入，因此只需粘贴一个包含 . 并将 Cq Cj 放入您的正则表达式中。当我使用 regexp-tool 构建它们时，我的没有完全引用为你的，但我希望这些变化是显而易见的。

`\("\{3\}\(.\|`C-qC-j`\)+"\{3\}\)`

抱歉，我无法更好地格式化它，stackoverflow 不同意我的观点。

它也可能会在 emacs 中显示为换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T15:24:30.543

这工作一半：

```
(font-lock-add-keywords
     'python-mode
      '(("\\(\"\\{3\\}\\(.\\|\n\\)*?\"\\{3\\}\\)" 
         1 font-lock-warning-face prepend))) 
```

但是当添加 RET 时，标记就消失了。

建议的正则表达式`"\\(\"\\{3\\}\\(.*\n?\\)*?\"\\{3\\}\\)"`使我的 emacs 在打开 .py 文件时挂起。

也许是时候访问 emacs 邮件列表了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-29T13:58:05.173

最好和最简单的方法是这个：

```
font-lock-add-keywords
 'python-mode
 '(("\\(\"\\{3\\}\\[^|]*?\"\\{3\\}\\)"
    1 font-lock-doc-face prepend))) 
```

您可以使用绝对不在 """ 和 """ 之间的任何字符来代替*|* .

# architecture - 在最纯粹的架构中，BPM 的目的是什么？

> ID：320593
> 
> 赞同：5
> 
> 时间：2008-11-26T12:49:08.893
> 
> 标签：architecture, business-process-management

我正在为一家想要引入 BPM（业务流程管理）工具的中型公司构建一个架构。我知道这会很有帮助，我想介绍它，但很难在架构中找到合适的位置。

我想知道何时以及如何使用 BPM 工具，如何区分业务流程和应用程序工作流？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-26T18:49:04.250

为什么要引入 BPM 工具？是流行语合规吗？如果您正在努力在架构中找到一席之地，那么我会怀疑该工具不会带来巨大的胜利（至少在您目前的理解下不会）。

应用程序工作流工具通常关注于对特定流程进行建模，并为半技术流程设计人员提供显示步骤和交互的能力，同时允许程序员使用实现各个部分的代码来充实骨架。就个人而言，我发现培训半技术流程主管的开销可以抵消在有效沟通和周转方面所承诺的收益，但在大型组织中，它可以确保流程“所有者”具有购买计划所需的控制错觉。我说错觉，因为归根结底是 IT 人员重新生成了实现流程的代码，并且由于技术方面的问题，建议的更改通常会被还原（此类工具通常使更改建议比实施更容易） ）。

一些业务流程管理工具只不过是价格更高的应用程序工作流工具。有些人采取更高的观点，并将手动流程和其他非 IT 流程合并到架构中（尽管显然这些步骤实际上只不过是用于退出和重新进入 IT 流程的存根或看门人）。我不知道您所说的中型公司是什么，但在一家拥有 160 名员工的航空航天工程公司，我们发现 BPM 工具被我们评估为矫枉过正。

可悲的是，这是即使有所有事实（不同的系统分析师会给出不同的意见）也只能给出经过验证的答案的问题之一。我希望快速概述至少会有所帮助。请注意销售炒作：我发现此类工具仅在具有特定流程的特定组织中有价值，并且在其他组织中存在障碍。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-27T00:03:55.957

如果一家公司有适当的流程来处理大多数情况下的事情应该如何通过，那么是时候引入 BPM 工具来检查当前流程了。从某种意义上说，这让我想起了“ [BPM 在你的脑海中吗？](https://stackoverflow.com/questions/214122/is-bpm-in-your-mind) ”不久前被问到的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-27T00:25:32.683

我发现在已经建立了一些正式业务流程的公司中引入 BPM 更有用和更有价值——

应用程序工作流更倾向于仅自动化用户交互（文档、授权、签名等）。但是当涉及到用户/系统交互时，BPM 非常方便。

最终用户不仅可以看到和理解应用程序的真实流程（因为他们不会动手指来进行任何更改就可以了），而且可以避免重复任务或系统之间的复杂交互。

当然，您可以在从 0 开始的应用程序中对此进行编码，但是当业务流程实际上可能用于其他流程即服务时，它没有意义或可扩展。BPM 套件可让您在几个小时内完成此操作（实际上是几次点击，但不要告诉客户）

所以回到你的问题，根据 BPM 工具的能力，如果已经有一个业务流程，并且该流程需要**不同**（这很重要）领域和不同系统的用户之间的交互，那么值得引入 BPM。

如果交互更“以人为本”（文档、批准等），App Workflow 就可以（如果他们已经拥有该工具，则将 BPM 用作工作流）

如果交互是同一区域的大量用户，或者数据相对容易消费并且没有人关心业务流程（即轮到谁去喝汽水），您可以从头开始创建一个 web/desk 应用程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T18:59:34.437

**“何时以及如何使用 BPM 工具”**

奥斯卡雷耶斯在他的帖子的第一句话中直接指出了这一点。你需要过程愿景。

BPM 工具（严格来说）是一种*用于*管理业务流程的工具。Godeke 上面帖子中的警告也是正确的。并非所有 BPM 工具都是一样的。事实上，我挑战你不能让任何人就 BPM 实际上是什么达成一致。该术语已被包括软件供应商、顾问、分析师和新闻机构（仅举几例）在内的各方篡夺。

但要直接回答，当企业想要自动化部分或全部业务流程时，BPM 工具是合适的。注意...*所有*企业都有业务流程。只是并非所有企业都由他们记录或管理。

“如何”实施 BPM 工具取决于上下文，因为 BPM 解决方案有不同的“类型”。从广义上讲（这是辩论的素材），您可以将 BPM 分解为事务和以人为中心的流程。事务性 BPM 旨在自动化系统级流程 - 主要是集成。您将在这里看到很多关于 SOA 的内容。以人为中心的 BPM（显然）针对涉及人机交互的流程——主要是文档或结构化/非结构化数据管理。

**“区分业务流程和应用程序工作流程”**

看上面。这是一个非常笼统的讨论。为了充分识别 BPM 项目，还需要提前做很多工作。

要问的第一个问题是，“我们公司目前是按流程管理业务还是希望这样做？”。这个问题的答案应该来自高层。我的经验是，如果没有执行层对以流程为中心的业务管理的承诺，BPM 项目可能无法实现其目标。并不是说您无法安装 BPM 工具并使用它来集成系统或管理电子文档，而是项目的 ROI 可能会丢失或丢失。

归根结底，BPM 项目将需要以流程为中心的业务愿景，这样，您将能够更好地定义适当的架构来支持该愿景。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-08T07:17:16.160

为什么要介绍业务流程管理工具？那里有许多软件/应用程序。如果您正在寻找使用业务流程管理的正确时间的答案，您可以从第一天开始使用它以数字方式组织事物。如果您想在创业后使用它，那也很好。但是，您将不得不经历将所有事情转移到软件的麻烦。

市场上有不同的软件，您可以通过它们管理业务流程、业务工作流程和重复任务。最好的软件之一是机器人过程自动化

# html - 非技术用户的最佳 html 编辑器

> ID：320599
> 
> 赞同：3
> 
> 时间：2008-11-26T12:52:13.597
> 
> 标签：html

我为家庭成员设置了一个简单的网页，现在他们希望能够自己编辑该页面。

我的主要网络创作工具是 gvim，这对于非技术人员来说显然是不可能的。

有没有人推荐一个简单有效的 WYSWYG html 编辑器

对 javascript、表单或任何花哨的东西没有要求——只是纯粹的演示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T12:53:31.350

KompoZer ( [http://kompozer.net/](http://kompozer.net/) )，免费、有用且简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T12:54:34.373

[Kompozer](http://kompozer.net)可能是一个不错的选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-26T13:40:56.230

[Nvu](http://net2.com/nvu/#)非常好，可以让您在 HTML 源代码和视图屏幕之间快速切换。它还支持 FTP 上传，这可能对您的家庭成员有用（假设这是他们需要发布更新页面的方式），但我猜您需要先为他们设置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-26T19:48:57.377

我认为 kompozer 是一个不错的选择。我把它给了我 10 岁的妹妹，她可以毫无问题地使用它。但是当她开始看到实际代码时，问题就开始了。当你直接编码时，kompozer 会搞砸很多......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-26T14:00:20.123

我发现 Mozilla Composer 在编辑基本 HTML 方面非常有效。它的输出大多是理智的。

但是，您是否考虑过为他们设置 CMS？从长远来看要容易得多。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-26T14:04:18.337

如果是在线应用程序，请查看[YUI 富文本编辑器](http://developer.yahoo.com/yui/editor/)。它很漂亮，不会像许多其他在线 HTML 编辑器那样为您提供无数未标记的小按钮。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-26T12:55:02.063

您是否尝试过 Contribute ( [http://en.wikipedia.org/wiki/Adobe_Contribute](http://en.wikipedia.org/wiki/Adobe_Contribute) | [http://www.adobe.com/products/contribute/](http://www.adobe.com/products/contribute/)。

它真的很*容易使用*，但**不是免费**的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-26T13:22:46.623

只是要把它扔在那里 - MS Visual Web Developer Express 是免费的，可用于基本的 HTML 编辑。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2008-11-26T13:50:57.550

微软字！另存为 HTML ;)

# c++ - 如何自动创建具有最新编译时间的文件并将其包含到库中？

> ID：320600
> 
> 赞同：3
> 
> 时间：2008-11-26T12:52:35.203
> 
> 标签：c++, c, build, makefile

我有一个包含大约 100 个源文件的库。如果已编译任何其他文件，我希望始终重新构建其中一个源，但我不希望每次运行 make/build 时都构建它。

基本上我希望这个文件有最后的构建日期/时间，所以任何链接到库的应用程序都可以检查最后的构建时间/日期。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-26T12:59:42.037

让包含构建时间戳的目标文件依赖于所有其他目标文件：

```
version.o: $(OBJECTS) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-26T13:32:42.143

稍微扩展 JesperE 的解决方案。

让目标文件依赖于可执行文件所依赖的所有目标（不包括自身）。

因此，如果所有可执行文件都依赖于对象，那么 JesperE 是完全正确的。

否则，您可以在不更新时间戳的情况下重建可执行文件，以防其他依赖项之一发生更改但您的目标文件都没有更改。因此，问题中提到的两件事，“具有最后的构建时间/日期”和“如果任何源代码已被编译，则重新构建”，实际上并不是一回事，所以这取决于你想要哪个。

示例可能包括您静态链接的库，或者一些用于进行链接并且更改很多的脚本，因此为了方便开发人员而将其作为依赖项。

如果您只是删除可执行文件并重新构建它，这仍然不会更新时间戳（可能是因为某些相关的内容发生了更改，但不是依赖项，例如因为您获取了最新版本的链接器或您已经更改环境中影响链接器和/或makefile的东西）。因此，最好的办法可能是将对象编译为构建可执行文件的规则的一部分，如下所示：

```
blah.exe : whatever
    rm -f version.o
    $(CC) $(CFLAGS) -c version.c
    $(CC) $(CFLAGS) $(OBJFILES) version.o -o blah.exe 
```

或其他任何东西（如果您使用make，可能不是.exe，但您永远不知道）。实际上那里的错误处理有点狡猾，因为如果最后一行失败，不会删除 version.o。

我还要补充一点，如果你要向用户发布一些东西（我的意思是基本上任何离你办公桌超过 10 英尺的人），无论如何从头开始构建而不是仅仅运行 make 来更新可能是一个想法，并运送它。否则很容易搞砸makefile，从而错过依赖项，意外构建“混合版本”，并且无法重现您发布的内容。

如果它是由开发人员构建的，我之前已经修改过makefile，因此版本号被故意破坏（设置为“0.0 private build”） - 只有构建服务器设置了用于启用正确版本号的选项。对于那个项目，在没有通过标签检查源代码控制并从那里构建的东西上加上一个数字是没有意义的。

# c++ - 使用 c 标头时如何解决名称冲突？

> ID：320618
> 
> 赞同：1
> 
> 时间：2008-11-26T12:58:03.210
> 
> 标签：c++, c, scope

我目前正在使用 C/C++ 进行一些套接字编程。为了能够使用更简洁的接口和更面向对象的结构，我决定围绕 C 套接字 API 的部分编写一些简单的包装类，但在这样做时我偶然发现了一个问题：

给定以下代码：

```
// Global method
int foo(int x)
{
    return x;
}

// Class that calls the global method
class FooBar
{
public:
    void foo() { return; };
    void baz() { foo(1); }
}; 
```

g++ 给出以下错误消息：

```
test.cpp: In member function ‘void FooBar::baz()’:
test.cpp:10: error: no matching function for call to ‘FooBar::foo(int)’
test.cpp:9: note: candidates are: void FooBar::foo() 
```

重命名类方法解决了这个问题。

为什么即使方法签名不同，也会存在某种命名冲突？解决此问题的最佳方法是什么？

谢谢/埃里克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-26T13:01:08.120

问题是它首先查看你的类的范围，然后找到一个 foo 函数。然后查找将停止，编译器会尝试匹配参数。由于它在您的类的该范围内只有一个 foo 函数，因此调用该函数会失败。

您需要明确声明要调用 free 函数：

```
::foo(1); 
```

另一种解决方案是在 baz 中声明函数：

```
void baz() { int foo(int); foo(1); } 
```

假定定义 foo 函数的范围是类的周围命名空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-26T13:00:35.687

您必须使用范围解析尝试：

::foo(1);

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-26T13:01:51.363

解决方案是：

```
void baz() { ::foo(1); } 
```

“为什么即使方法签名不同，也会有某种命名冲突？”

因为 C++ 总是首先查找名称。当它在相关范围内找到一个名称时，它会检查该范围内该名称可用的签名。因此，`foo()`成员函数将自由函数隐藏在`foo(int)`其范围内的任何位置（即，在类的其他成员函数中）。

出于同样的原因，以下代码将无法编译：

```
struct A {
    virtual void foo(int) = 0;
    // attempt to provide a useful helper
    virtual void foo() { foo(23); }
};

struct B : public A {
    void foo(int i) {
        std::cout << i << "\n";
    }
};

int main() {
    B b;
    b.foo(); // oops, can't find foo(), because class B hid it
    A &a = b;
    a.foo(); // that works. So much for Liskov's substitution principle.
} 
```

正如所写的那样，B 已损坏，因为它从其基类中删除了功能（尽管仅在称为 B 时，而不是在称为 A 时）。litb 在下面的评论中提供了一个链接，解释了如何解开它。

# javascript - 为什么 jquery 类选择器选择具有部分类名的项目？

> ID：320629
> 
> 赞同：1
> 
> 时间：2008-11-26T13:01:29.553
> 
> 标签：javascript, jquery

如果我有 ：

```
<div class="carBig"></div> 
```

和

```
<div class="car"></div> 
```

和 $(".car").size();

我得到 2 件物品..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-26T13:18:38.240

你用的是什么版本的jquery？

使用此代码：

```
<html><head><title>Testing</title>
<script type="text/javascript" src="/js/jquery/jquery-1.2.6.min.js">
</script>
<script type="text/javascript">
$(document).ready(function() {
    $(".car").each(function() {
        $("#carResults").append($(".car").size());
        $("#carResults").append($(this).text());
    });
});
</script>
</head><body>
<div class="carBig">Big Car</div>
<div class="car">Regular Car</div>
<div id="carResults"></div>
</body></html> 
```

我的输出文档如下所示：

```
Big Car
Regular Car
1Regular Car 
```

我的只找到了 1 个元素，即“汽车”类的那个......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T13:18:38.630

我想你可能有一些时髦的东西把它扔掉了。如果我运行这个非常简单的示例，它会按预期工作。

```
<html>
<head>
</head>
<script type="text/javascript" src="jquery-1.2.6.pack.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $(".car").hide();
    });
</script>
<body>
    <div id=container>
        <div class="carBig">Car Big</div>
        <div class="car">Car</div>
    </div>
</body>
</html> 
```

您可以尝试发布您的 html 的其余部分，看看我们是否能弄清楚。

# c# - 如何使用 ADO 在 C# 中获得高效的 Sql Server 死锁处理？

> ID：320636
> 
> 赞同：23
> 
> 时间：2008-11-26T13:03:43.467
> 
> 标签：c#, sql-server, ado.net, .net-2.0, deadlock

我有一个作为 ADO.net 包装器的“数据库”类。例如，当我需要执行一个过程时，我调用 Database.ExecuteProcedure(procedureName, parametersAndItsValues)。

我们在 SQL Server 2000 中遇到了死锁情况的严重问题。我们团队的一部分正在研究 sql 代码和事务以尽量减少这些事件，但我正在考虑使这个数据库类对死锁情况具有鲁棒性。

我们希望死锁受害者在延迟一段时间后重试，但我不知道这是否可能。这是我们使用的方法的代码：

```
public int ExecuteQuery(string query)
{
    int rows = 0;

    try
    {
        Command.Connection = Connection;
        Command.CommandType = CommandType.Text;

        if(DatabaseType != enumDatabaseType.ORACLE)
          Command.CommandText = query;
        else
          Command.CommandText ="BEGIN " +  query + " END;";

        if (DatabaseType != enumDatabaseType.SQLCOMPACT)
            Command.CommandTimeout = Connection.ConnectionTimeout;

        if (Connection.State == ConnectionState.Closed)
            Connection.Open();

        rows = Command.ExecuteNonQuery();
    }
    catch (Exception exp)
    {
        //Could I add here any code to handle it?
        throw new Exception(exp.Message);
    }
    finally
    {
        if (Command.Transaction == null)
        {
            Connection.Close();
            _connection.Dispose();
            _connection = null;
            Command.Dispose();
            Command = null;
        }
    }
    return rows;
} 
```

我可以在 catch 块内进行此处理吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2008-12-02T22:18:49.663

首先，我将查看我的 SQL 2000 代码并了解为什么会发生这种死锁。解决这个问题可能会隐藏一个更大的问题（例如，缺少索引或错误的查询）。

其次，我会检查我的架构，以确认确实需要频繁调用死锁语句（是否`select count(*) from bob`必须每秒调用 100 次？）。

但是，如果您确实需要一些死锁支持并且在您的 SQL 或体系结构中没有错误，请尝试以下几行。（注意：我不得不将这种技术用于每秒支持数千个查询的系统，并且很少会遇到死锁）

```
int retryCount = 3;
bool success = false;  
while (retryCount > 0 && !success) 
{
  try
  {
     // your sql here
     success = true; 
  } 
  catch (SqlException exception)
  {
     if (exception.Number != 1205)
     {
       // a sql exception that is not a deadlock 
       throw; 
     }
     // Add delay here if you wish. 
     retryCount--; 
     if (retryCount == 0) throw;
  }
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2011-07-14T11:13:50.490

基于@Sam 的回复，我提出了一个通用的重试包装方法：

```
private static T Retry<T>(Func<T> func)
{
    int count = 3;
    TimeSpan delay = TimeSpan.FromSeconds(5);
    while (true)
    {
        try
        {
            return func();
        }
        catch(SqlException e)
        {
            --count;
            if (count <= 0) throw;

            if (e.Number == 1205)
                _log.Debug("Deadlock, retrying", e);
            else if (e.Number == -2)
                _log.Debug("Timeout, retrying", e);
            else
                throw;

            Thread.Sleep(delay);
        }
    }
}

private static void Retry(Action action)
{
    Retry(() => { action(); return true; });
}

// Example usage
protected static void Execute(string connectionString, string commandString)
{
    _log.DebugFormat("SQL Execute \"{0}\" on {1}", commandString, connectionString);

    Retry(() => {
        using (SqlConnection connection = new SqlConnection(connectionString))
        using (SqlCommand command = new SqlCommand(commandString, connection))
            command.ExecuteNonQuery();
    });
}

protected static T GetValue<T>(string connectionString, string commandString)
{
    _log.DebugFormat("SQL Scalar Query \"{0}\" on {1}", commandString, connectionString);

    return Retry(() => { 
        using (SqlConnection connection = new SqlConnection(connectionString))
        using (SqlCommand command = new SqlCommand(commandString, connection))
        {
            object value = command.ExecuteScalar();
            if (value is DBNull) return default(T);
            return (T) value;
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-02T10:22:03.807

如果可以在数据层解决死锁，那肯定是要走的路。锁定提示，重新设计模块的工作方式等等。不过，NoLock 并不是万能药——有时由于事务完整性的原因无法使用，而且我曾遇到过使用 NoLock 的所有相关表读取直接（尽管很复杂）数据的情况，这些表仍然会导致其他查询阻塞。

无论如何-如果您出于某种原因无法在数据层解决它，那怎么样

```
bool OK = false;
Random Rnd = new Random();

while(!OK)
{
    try
    {
        rows = Command.ExecuteNonQuery();
        OK = true;
    }
    catch(Exception exDead)
    {
        if(exDead.Message.ToLower().Contains("deadlock"))
            System.Threading.Thread.Sleep(Rnd.Next(1000, 5000));
        else
            throw exDead;
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-26T13:15:20.790

如果遇到死锁问题，最好看看 SQL 代码在做什么。例如，如果您具有可序列化的隔离级别（或 rdbms 中的任何等效级别），那么锁升级死锁很容易创建 - 并且可以通过几种方式缓解，例如重新排序查询，或者（在 SQL Server至少）使用（UPDLOCK）更早地获得写锁（这样你就不会获得竞争读锁）。

重试将是混合的......例如，如果您在 TransactionScope 中，它可能已经中止。但就在纯粹主义者的层面上——如果我在与 db 交谈时遇到问题，我希望我的代码恐慌，并尽早恐慌......在这种特殊情况下，重试似乎有点 hacky。

# c# - 检查进程状态

> ID：320645
> 
> 赞同：9
> 
> 时间：2008-11-26T13:06:21.963
> 
> 标签：c#, .net

我想以编程方式验证应用程序的状态，以查看它是否已崩溃或停止。我知道如何查看该进程是否存在于 C# 中，但我也可以查看它是否“无响应”吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-26T13:20:10.983

您需要的一切都在 System.Diagnostics 中，例如：检查进程是否响应。

```
using System;
using System.Diagnostics;

namespace ProcessStatus
{
    class Program
    {
        static void Main(string[] args)
        {
            Process[] processes = Process.GetProcesses();

            foreach (Process process in processes)
            {
                Console.WriteLine("Process Name: {0}, Responding: {1}", process.ProcessName, process.Responding);
            }

            Console.Write("press enter");
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T13:14:21.620

请参阅Fog Creek Software[的 Windows 窗体应用程序中的“无响应”消息](http://discuss.fogcreek.com/dotnetquestions/default.asp?cmd=show&ixPost=6167)

# asp.net - 如何解决 synciwam.vbs 错误 1B6？

> ID：320654
> 
> 赞同：0
> 
> 时间：2008-11-26T13:12:08.957
> 
> 标签：asp.net, permissions, iis-6

我正在尝试使用 IIS 6 迁移工具将网站从 Windows 2000 迁移到 Win2k3。我在内容上收到了一堆 404。一个流行的理论是我的 IWAM 帐户与 IIS 元数据库不同步，并且运行 synciwam 来修复它。但是我收到了这个 1B6 错误，我没有在谷歌中追逐的唯一链接（这对我来说很明显）是专家交流......

这是运行该脚本的结果：

```
C:\Inetpub\AdminScripts>cscript synciwam.vbs -v
Microsoft (R) Windows Script Host Version 5.6
Copyright (C) Microsoft Corporation 1996-2001\. All rights reserved.

IIS Applications Defined:
Name, AppIsolated, Package ID
Root, 0,
Root, 0,
Root, 1, {27EE9424-034E-46C6-8635-433B8DF0293A}
PMA-Search, 2, {27EE9424-034E-46C6-8635-433B8DF0293A}
BCC, 2, {27EE9424-034E-46C6-8635-433B8DF0293A}
fmweb, 2, {27EE9424-034E-46C6-8635-433B8DF0293A}

Out of process applications defined:

Count: 28
{3D14228D-FBE1-11d0-995D-00C04FD919C1}
{27EE9424-034E-46C6-8635-433B8DF0293A}

Error: 1B6: Object doesn't support this property or method
C:\Inetpub\AdminScripts> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T15:35:13.503

我从来没有回答过这个问题，但我确实解决了我的问题。我什至不确定它是否与 IWAM 帐户有关。

设想：

从 Win2k/IIS5 迁移到 Win2k3/IIS6 一堆经典的 ASP 和 ASP.NET 1.1 应用程序 使用 IIS 6 迁移工具包

仅提供图像。不是htm文件，不是asp。

解决方案：我看到一堆帖子谈论动态内容并在 Web 扩展中启用它们（我就是这样做的）。还是没有骰子。

我认为我需要启用 SSI，因为我正在查看的一个 htm 文件正在使用包含。

在这样做时，我*可能已经*为 .htm 引入了一个新的文件映射到 ssi.dll

删除此映射，我开始提供 htm 页面。

问题 2 是没有显示 ASP 页面。原来（我认为）迁移工具的 asp.dll 路径为 WINNT\System32，这在 Windows 2003 上是无效路径，它应该是 WINDOWS\System32

# apache-flex - Flex mxml to as3，小班我错过了什么吗？

> ID：320659
> 
> 赞同：0
> 
> 时间：2008-11-26T13:14:26.830
> 
> 标签：apache-flex, mxml, degrafa

我使用的是 mxml 类，但由于我需要在构造时传递一些属性，为了更容易，我会将其转换为 as3 代码。

该类是 RectangleShape，它只绘制一个矩形。

**原始mxml工作**

```
<?xml version="1.0" encoding="utf-8"?>
<BaseShape name="rectangle"
    xmlns="org.edorado.edoboard.view.components.shapes.*" 
    xmlns:mx="http://www.adobe.com/2006/mxml" 
    xmlns:degrafa="http://www.degrafa.com/2007"
    xmlns:objecthandles="com.roguedevelopment.objecthandles.*">

    <mx:Script>
        <![CDATA[

            import org.edorado.edoboard.view.components.shapes.IShape;
            import mx.events.FlexEvent;

            override public function drag(movePt:Point):void {
                this.width = movePt.x - this.x; 
                this.height = movePt.y - this.y; 
            }

            override public function updateFillColor(color:int):void {
                solidFill.color = color;
            }

        ]]>
    </mx:Script>

    <degrafa:Surface >
        <degrafa:GeometryGroup id="geo">
            <degrafa:fills>
                <degrafa:SolidFill id="solidFill" color="white" alpha="0.3"/>
            </degrafa:fills>

            <degrafa:strokes>
                <degrafa:SolidStroke id="stroke1" color="white"/>
            </degrafa:strokes>

            <degrafa:RegularRectangle 
                id="rect" 
                fill = "{solidFill}"
                width="{width}" 
                height="{height}"
                stroke="{stroke1}" />
        </degrafa:GeometryGroup>        
    </degrafa:Surface>
</BaseShape> 
```

**我对 AS3 的尝试**

包 org.edorado.edoboard.view.components.shapes { 进口 com.degrafa.geometry.RegularRectangle; 导入 com.degrafa.paint.SolidFill；进口 com.degrafa.paint.SolidStroke；导入 com.degrafa.GeometryGroup；导入 com.degrafa.Surface；导入 flash.geom.Point；

```
public class RectangleShape extends BaseShape 
{
    public var surface:Surface = new Surface(); 
    public var geoGroup:GeometryGroup = new GeometryGroup();
    public var solidFill:SolidFill = new SolidFill("white");
    public var solidStroke:SolidStroke = new SolidStroke("black");
    public var rect:RegularRectangle = new RegularRectangle(); 

    public static const name:String = "rectangle";

    public function RectangleShape() {
        addChild(surface);
        //surface.addChild(geoGroup);
        surface.graphicsCollection.addItem(geoGroup); 

        solidFill.alpha = 0.3;
        rect.fill = solidFill;
        rect.stroke = solidStroke;
        rect.width = this.width;
        rect.height = this.height;
        geoGroup.geometry = [rect];
        geoGroup.draw(null, null); 
    }

    override public function drag(movePt:Point):void {

        this.width = movePt.x - this.x; 
        this.height = movePt.y - this.y; 
        trace('dragging ', this.width, this.height);
    }

    override public function updateFillColor(color:int):void {
        solidFill.color = color;
    }
} 
```

}

问题是形状不再绘制，BaseShape 容器在那里，我可以看到跟踪拖动工作，但不再是矩形。

我错过了什么明显的东西吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T19:16:03.777

尝试使用 BindingUtils 类设置绑定。

例如：

```
BindingUtils.bindProperty(component, "height", this, "height"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T14:08:16.457

我想我指出了问题所在。在我们之前的 mxml 版本中

宽度="{宽度}" 高度="{高度}"

degrafa 矩形将自动适合其父级。

但不是在 AS 版本中。我应该尝试在 As 中重现 {width} 和 {height}。任何将mxml转换为as的工具？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T15:25:00.793

您添加了您的 RectangleShape 吗？

# sql - SQL Server 2005 字符索引性能

> ID：320671
> 
> 赞同：0
> 
> 时间：2008-11-26T13:20:29.937
> 
> 标签：sql, sql-server, sql-server-2005

我正在尝试运行更新查询，该查询根据它在另一个表中找到的行更新一个表，其中特定值存在于远程表的列值之一中的任何位置。我正在使用的查询是：

```
update 
    c
set
    LastStep = @StepNumber,
    LastDate = pv.Created
from
    @Conversions c
        inner join PageViews pv on c.SessionID = pv.SessionID
where
    c.GoalName = @GoalName AND
    pv.Created > c.LastDate AND
    charindex(@MatchValue, pv.PageUrl) > 0; 
```

在 PageViews 表中有 50,000 行的测试数据库上，根据 SQL 分析器，这个单一查询会导致超过 100 万次读取，并且需要 1 分 14 秒。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T13:52:02.743

以下列是否有索引？pv.SessionID, pv.created

你看过生成的执行计划吗？

# c++ - 如何在 Visual Studio 2008 中为我的应用程序设置图标？

> ID：320677
> 
> 赞同：49
> 
> 时间：2008-11-26T13:22:38.310
> 
> 标签：c++, visual-studio, visual-studio-2008, icons

如何在 Visual Studio 2008 中为我的 C++ 应用程序设置可执行图标？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-02-20T17:39:45.657

这就是您在 Visual Studio 2010 中的操作方式。

因为它很挑剔，实际上这可能会非常痛苦，因为您正在尝试做一些*非常简单*的事情，但这并不简单，而且 Visual Studio 没有告诉您许多陷阱。如果您在任何时候感到生气或想咬牙切齿地咬牙切齿并尖叫，无论如何，请这样做。

陷阱：

*   您需要[使用 .ico 文件](http://www.convertico.com/images/1329756536.52/Cursor%20drag%20move.ico)。 ***您不能为可执行文件的图标使用 PNG 图像文件，它不起作用。您必须使用 .ico。*** [有一些网络实用程序](http://www.convertico.com/)可以将图像转换为 .ico 文件。
*   用于您的 exe 的 ico 将是具有最低资源 ID 的 ico。为了改变.ico

1) 打开**VIEW** > **RESOURCE VIEW**（在**VIEW**菜单中间），或按`Ctrl`+ `Shift`+`E`使其出现。

2) 在资源视图中，右键单击项目名称并说**添加**>**资源...**

3）假设您已经自己生成了一个 .ico 文件，从出现的废话列表中选择**Icon ，然后单击****IMPORT**。

4) 在此对话框`*.ico`中文件未列出，并且您**不能**使用常规 PNG 或 JPG 图像作为图标，因此将文件过滤器更改为**`*.ico`**使用下拉菜单。误导性的用户界面，我知道，我知道。

5) 如果您现在编译您的项目，它会**自动将****具有最低 ID**的 .ico （如 中所列`resource.h`）粘贴为您的 .exe 文件的图标。

6) 如果您出于某种原因将一堆 ICO 文件加载到项目中，请确保您希望 Visual Studio 使用的 .ico 在 .ico 中具有**最低**id `resource.h`。您可以毫无问题地手动编辑此文件

例如。

```
//resource.h
#define IDI_ICON1                       102
#define IDI_ICON2                       103 
```

使用 IDI_ICON1

```
//resource.h
#define IDI_ICON1                       106
#define IDI_ICON2                       103 
```

现在使用 IDI_ICON2。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2008-11-26T13:26:44.480

首先转到资源视图（从菜单：视图 --> 其他窗口 --> 资源视图）。然后在资源视图中浏览资源（如果有）。如果已经有 Visual Studio 添加的 Icon 类型的资源，则打开并编辑它。否则，右键单击并选择添加资源，然后添加一个新图标。

使用嵌入式图像编辑器来编辑现有或新图标。请注意，图标可以包括从图像菜单中选择的多种类型（大小）。

然后编译你的项目，看看效果。

请参阅：[http ://social.microsoft.com/Forums/en-US/vcgeneral/thread/87614e26-075c-4d5d-a45a-f462c79ab0a0](http://social.microsoft.com/Forums/en-US/vcgeneral/thread/87614e26-075c-4d5d-a45a-f462c79ab0a0)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-11-26T13:39:18.743

重要的是，您希望显示为应用程序图标的图标（在标题栏和任务栏中）必须是资源脚本文件中的第一个图标。

该文件位于 res 文件夹中，名为 (applicationName).rc

```
/////////////////////////////////////////////////////////////////////////////
//
// Icon
//

// Icon with lowest ID value placed first to ensure application icon
// remains consistent on all systems.
(icon ID )          ICON                    "res\\filename.ico" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-22T12:03:53.413

如 bobobobo 所说，您将 .ico 添加到资源中，然后在主对话框的构造函数中进行修改：

`m_hIcon = AfxGetApp()->LoadIcon(ICON_ID_FROM_RESOURCE.H);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-11T20:45:25.193

**如果您使用的是 .NET**，请在解决方案资源管理器中右键单击您的程序并选择属性。在资源部分下选择图标和清单，然后浏览到图标的位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-10T13:43:27.033

我不知道 VS 2008 中的 VB.net 是否有任何不同，但以上都不适用于我。在解决方案资源管理器中双击*我的项目*会打开如下所示的窗口。选择左侧的*应用程序*，然后使用组合框浏览您的图标。构建后，它应该显示在您的 exe 文件中。

![在此处输入图像描述](https://i.stack.imgur.com/yKkEz.jpg)

# java - 在让 Swing 组件被垃圾收集之前，我是否需要释放它们？

> ID：320682
> 
> 赞同：2
> 
> 时间：2008-11-26T13:23:58.137
> 
> 标签：java, swing

Wnen 我使用外部资源，例如文件或数据库连接，我需要在放开它们之前关闭它们。

我需要对 Swing 组件做同样的事情吗？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-26T14:16:39.463

通常，当你处理完对象后，你不需要处理它们（尽管将它们的引用设置为 null 可能允许它们更快地被 GC）。但是，AWT 和 Swing 对象分配了一些需要释放的本机资源。此外，AWT 线程将窗口视为顶级对象，防止它们被垃圾收集和 JVM 终止。

因此，当您完成您的窗口时，您需要处理它，这会释放它已分配的本机资源。一种方法是在其上调用[Window.dispose](http://java.sun.com/javase/6/docs/api/java/awt/Window.html#dispose()) ()。但是，更好的选择是在初始化每个根窗口时调用[JFrame.setDefaultCloseOperation ()。](http://java.sun.com/javase/6/docs/api/javax/swing/JFrame.html)如果您传递它 DISPOSE_ON_CLOSE 它会在用户关闭窗口时自行处理。当最后一个这样的窗口关闭时，AWT 线程将停止阻塞并允许 JVM 关闭（假设您没有任何其他异常线程在运行）。或者，您可以将它传递给 EXIT_ON_CLOSE，这将导致您的窗口调用 System.exit()，它告诉 JVM 您的应用程序已完成并正常终止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T13:31:34.923

曾经有人教导说，您必须断开所有侦听器的连接，否则它们将充当对 Swing 组件的引用。但我被告知这不再是一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T13:27:52.370

如果没有对它们的引用，对象将自动被垃圾收集。您不必像对待外部资源那样对待 Swing 组件。但是，如果您有一个以后不需要的组件，您可以将对该组件的任何引用设置为 null。

```
JPanel p = new JPanel();
p = null; 
```

将 p 设置为 null 不会删除对象，但会删除对该对象的任何引用，因此下次垃圾收集器通过时，它会被拾取。

尽管不存在对该组件的其他引用，但您必须小心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T15:03:39.790

Windows (including dialogs and frames) should be disposed. If you create (AWT) `Graphics` objects then they should be disposed of too (but usually locally within, say, a `paintComponent` method).

If you have a listener to update a short lived target from a long lived source, then you should remove it before discarding the target. There's a neat hack where the listener uses a `WeakReference` to the target, so that it can deregister when the reference goes away (and an event is fired).

# sql - 任何人都知道什么 是？

> ID：320689
> 
> 赞同：0
> 
> 时间：2008-11-26T13:27:26.180
> 
> 标签：sql, flags

有谁知道 Optional SQL Explain 标志是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T13:55:16.357

[您是在谈论Oracle SQLJ](http://download.oracle.com/docs/cd/B10500_01/java.920/a96655/transopt.htm#1004083)中的 -explain 标志吗？:-

> -解释
> 
> 请求“原因”和“操作”信息与翻译错误消息一起显示的标志。

# xml - XML Schema 中的属性/元素共现约束

> ID：320692
> 
> 赞同：8
> 
> 时间：2008-11-26T13:29:21.417
> 
> 标签：xml, schema, xsd

是否可以创建一个对属性/元素对施加共现约束的 XML 模式？

```
<primitive-list>
    <primitive name="P1">
        <definition><!-- primitive specification --></definition>
    </primitive>
    <primitive name="P2">
        <definition><!-- primitive specification --></definition>
    </primitive>

    <!-- other common primitives are specified here-->

<primitive-list>

<composite-list>
    <composite name="C1">
        <primitive ref="P1" />
        <primitive ref="P2" />
        <primitive>
            <definition><!-- inline primitive specification --></definition>
        </primitive>        
    </composite>

    <!-- Other compisites are specified here-->

</composite-list> 
```

架构应该暗示：

*   如果在**原始****列表**元素中指定了原始元素，则它应该包含**name**属性和嵌入的**定义**元素，但不包含**ref**属性。
*   如果在**复合**元素中指定了**原始**元素，则它应该包含**ref**属性或**定义**元素。在这两种情况下都不允许使用该**名称。**

 ******我很确定这是可能的，因为 XML Schema 中的**元素**元素本身的行为就是这样。所以任何拥有这种神圣知识的人请分享:-)

先感谢您。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-03T08:22:32.207

在互联网上搜索并挖掘了一些书籍后，我想出了如何实现它。

首先，我们需要定义一个泛型类型，它可以容纳来自两种**原始**元素的所有属性和元素。假设**定义**元素是在其他地方定义的。

```
<xs:complexType name="primitive" abstract="true">
    <xs:sequence>
        <xs:element ref="definition" minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
    <xs:attribute name="name" type="xs:Name" />
    <xs:attribute name="ref" type="xs:Name" />
</xs:complexType> 
```

然后我们定义两个**原始**子类型分别用于**原始列表**和 **复合**。

```
<xs:complexType name="public-primitive">
    <xs:complexContent>
        <xs:restriction base="primitive">
            <xs:sequence>
                <xs:element ref="definition" minOccurs="1" maxOccurs="unbounded" />
            </xs:sequence>
            <xs:attribute name="name" type="xs:Name" use="required" />
            <xs:attribute name="ref" use="prohibited" />
        </xs:restriction>
    </xs:complexContent>
</xs:complexType>

<xs:complexType name="private-primitive">
    <xs:complexContent>
        <xs:restriction base="primitive">
            <xs:sequence>
                <xs:element ref="definition" minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
            <xs:attribute name="name" use="prohibited" />
        </xs:restriction>
    </xs:complexContent>
</xs:complexType> 
```

现在我们可以根据这些复杂类型定义**原始列表**和**复合**元素，如下所示：

```
<xs:element name="primitive-list">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="primitive" type="public-primitive" maxOccurs="unbounded" />
        </xs:sequence>
    </xs:complexType>
</xs:element>

<xs:element name="composite">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="primitive" type="private-primitive" maxOccurs="unbounded">
                <xs:key name="definition-ref--co-occurrence--constraint">
                    <xs:selector xpath="." />
                    <xs:field xpath="definition|@ref" />
                </xs:key>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

让我们看一下原始模式要求，看看它们是如何执行的：

> *   如果在**原始****列表**元素中指定了原始元素，则它应该包含**name**属性和嵌入的**定义**元素，但不包含**ref**属性。

**此要求仅由public-primitive**类型的定义强制执行。

> *   如果在**复合**元素中指定了**原始**元素，则它应该包含**ref**属性或**定义**元素。在这两种情况下都不允许使用该**名称。**

 ******此要求由**私有原始**类型的定义和在**复合**元素内部定义的**原始**元素中指定的**xs:key**元素强制执行。**xs:key**保证**ref**或**定义**都存在，但不能同时存在。

 ******* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T13:47:21.083

是的，这是可能的。创建 XML Schema 时，您将为每个场景创建一个复杂类型，具体取决于元素在 XML 树中的定义位置。

如果稍后我有时间，我可以尝试在这里为您实际提供一个示例，我只是没有时间将其全部格式化以在此处发布。

我个人强烈建议您查看这个[w3schools 教程](http://www.w3schools.com/Schema/schema_howto.asp)，因为它应该可以满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-27T07:54:49.190

好的，这是一个示例，这可以让您接近，唯一没有处理的是复合材料上的原语和 ref 属性。看看我能找到什么，通过模式来做到这一点似乎几乎是不可能的。虽然我不是 100% 确定，但在我看到的所有情况下，这样的模式都用于高级验证，然后使用流程代码来验证各个项目。

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema targetNamespace="http://www.iowacomputergurus.com/stackoverflow/samples/xsdexample"
    elementFormDefault="qualified"
    xmlns="http://www.iowacomputergurus.com/stackoverflow/samples/xsdexample"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
>

  <xs:complexType name="PrimitiveType">
    <xs:sequence>
      <xs:element name="definition" type="xs:string" minOccurs="1" maxOccurs="1" />
    </xs:sequence>
    <xs:attribute name ="name" use="required" type="xs:string" />
  </xs:complexType>

  <xs:element name="root">
    <xs:complexType>
      <xs:sequence>
          <xs:element name="primitive-list" minOccurs="1" maxOccurs="1">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="primitive" type="PrimitiveType" minOccurs="1" maxOccurs="unbounded" />
              </xs:sequence>
            </xs:complexType>
          </xs:element>
          <xs:element name="composite-list" minOccurs="1" maxOccurs="1">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="composite">
                  <xs:complexType>
                    <xs:sequence>
                      <xs:element name="primitive" minOccurs="1" maxOccurs="unbounded">
                        <xs:complexType>
                          <xs:sequence>
                            <xs:element name="definition" minOccurs="0" maxOccurs="1" />
                          </xs:sequence>
                          <xs:attribute name="ref" use="optional" type="xs:string" />
                        </xs:complexType>
                      </xs:element>
                    </xs:sequence>
                    <xs:attribute name="name" type="xs:string" use="required" />
                  </xs:complexType>
                </xs:element>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>  
</xs:schema> 
```

# svn - 如何只签出在一系列 SVN 版本中修改的文件？

> ID：320693
> 
> 赞同：0
> 
> 时间：2008-11-26T13:30:35.033
> 
> 标签：svn, revision, svn-checkout

是否可以仅从 SVN 存储库中签出在修订版或修订版范围内修改的那些文件，而不签出任何未修改的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T14:07:07.753

现在有 afaik 直接获取更改的文件而不是全部的方法。

我的想法是：使用列表的详细输出（显示最后更改的版本），通过 awk 过滤它，然后检查其余部分。例如，要搜索版本 42 中更改的文件，我会使用它

```
VERSION=42
svn list -v -R -r $VERSION svn://... |  awk "/^[ ]*$VERSION/ {print \$7}" > files_to_checkout 
```

然后在 URL 上执行一个`svn update -r $VERSION 'cat files_to_checkout'`（或一个 co，具体取决于您将在何处运行命令）。

编辑：更短：使用 svn diff 命令，并用 -x 和 --diff-cmd 替换 svn co 的 diff 命令。这需要一些参数转移黑客（我不会在这里详细说明），但只需要一行而不需要中间文件（你也可以在上面保存，但这会增加可读性）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T14:17:09.573

我的建议与 flolo 建议的内容相同。但是，需要一个范围。您可以使用以下 shell 函数。

```
function checkout_files_in_revrange()
{
  svn_url=$1;
  start_rev=$2;
  end_rev=$3;
  for theCheckoutCanditate in `svn log -r $start_rev:$end_rev --verbose --incremental | grep "   M " | cut -f5 -d' ' | cut -f3- -d/`
  do
     svn co $svn_url/$theCheckoutCandidate -q;
  done
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T14:02:05.377

如果您使用带有 -v （详细选项）的 svn log：

```
svn log -r <revision> -v <path> 
```

您将获得包含更改文件的输出：

```
 r3 | ciaran | 2008-11-16 12:24:30 +0000 (Sun, 16 Nov 2008) | 1 line
Changed paths:
   A /trunk/apache/apache.conf
   A /trunk/application/controllers

Commit message goes here 
```

您应该能够通过一些 grepping 等操作来生成一系列 svn co 命令。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-26T14:38:38.593

我们在 MSBuild 脚本中执行此操作：

Step 1: - 使用 diff 命令获取修改文件列表，将输出重定向到目标目录中的临时文件 Step 2: - 将临时文件读入 itemGroup

```
<Exec command="$(svnExecutable) diff -r $(StartRevision):$(EndRevision) $(DOUBLE_QUOTES)$(SvnRepositoryPath)/$(DOUBLE_QUOTES) --no-diff-deleted --summarize &gt; $(TempFilePath)" WorkingDirectory="$(WorkDirectory)" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-26T13:35:20.327

我不完全确定这是否可能，但你也可以这样做：

```
svn checkout --revision <revisionNumber> 
```

得到一定的修改和

```
svn log --revision <revisionNumber> 
```

列出修订中更改的所有文件

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-26T15:14:23.623

另一个回答你的问题的方法：

假设您有一个现有的工作副本，您应该只在包含您正在查看的文件的目录的根目录上使用“svn update”，因为它可以准确地检索当前修订版和 HEAD 修订版之间的更改，并使用尽可能少的数据。

较旧的源代码管理系统（如 CVS 和 VSS）向服务器询问每个文件*，此文件是否已更改？*，而颠覆只是将树的更改作为单个操作发送。当您将文件列表传递给 svn update 时，您没有这个优势。

因此，传输已更改内容的最有效方式就是更新。与工作副本的基本版本相比，这只会传输 HEAD 中更改的二进制差异。

* * *

如果您要解决的问题是*svn update*太慢，那么我们正在尝试解决 Subversion 1.7 的问题。

此版本将引入一种新的工作副本数据存储格式，这将使必须锁定整个工作副本（如更新）的简单操作更快。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-20T09:18:52.360

在与大多数人建议的几乎相同的行中（但仅在具有 grep 和 awk 的系统中），您可以通过执行来获取列表

`svn log -v --revision <revision_number> | grep "^ " | awk '{print $2}'`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-05T23:25:14.457

svn diff -r starting_revision:ending_revision_or_HEAD --summarize

# .net - 现代的 VisualStudio .NET 项目是否仍然使用 Visual SourceSafe 或 SVN？

> ID：320694
> 
> 赞同：4
> 
> 时间：2008-11-26T13:30:57.280
> 
> 标签：.net, svn, visual-sourcesafe

*   在 PHP/MySQL 工作多年后，我重新回到 .NET
*   早在 2002 年的 Microsoft 项目中，我们一直使用 Visual SourceSafe，但每个人都讨厌它
*   在我所有的 PHP/MySQL 项目中，我们都使用了 SVN，每个人都喜欢它
*   在现代 .NET 项目中，团队是否仍在使用 Visual SourceSafe，它是否有所改进？

或者这些天（希望）SVN 已成为 .NET 项目中的标准？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-11-26T13:40:18.960

我们将 SVN 用于我们的 .Net 项目，使用[Tortoise SVN](http://tortoisesvn.tigris.org/)客户端。还有一些工具可以与 Visual Studio 集成，例如[Ankhsvn](http://ankhsvn.open.collab.net/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-26T13:39:14.690

Subversion 非常流行，Visual Studio 有一个很好的插件，叫做 Ankh SVN，它可以让你直接使用 subversion。所以 subversion 至少是 .NET 开发的一个不错的选择。

话虽如此，Team Foundation Server 非常棒，它具有一些超越常规源代码控制的出色功能。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-26T14:14:23.027

绝对，是的，他们使用 SVN（和 SourceSafe）。

如果您需要，两者都具有 IDE 集成。（或者任何一个都可以支持从 IDE 外部签入）。

某些免费/付费项目管理网站非常适合现代小型项目（例如[http://www.unfuddle.com](http://www.unfuddle.com)或[http://code.google.com/](http://code.google.com/)），并且内置了对 SVN 的支持。

IDE 与 SVN 的集成： [VisualSVN](http://www.visualsvn.com/) / [AnkhSVN](http://ankhsvn.open.collab.net/)

IDE 与 VSS 的集成：内置于 Visual Studio。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-26T14:57:28.697

我的公司使用 Subversion 和 TortoseSVN（Explorer 集成）和 AnkhSVN（IDE 集成）。

除此之外，我们还使用 Bitvise WinSSHD 和 Putty/Pageant 通过 SSH 保护我们的源存储库。

此外，在将代码提交到存储库后，我们使用 CruiseControl.Net、Nant 和 MSBuild 进行持续集成。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-26T13:33:03.470

SourceSafe 多年来有了一些改进，但我的团队都使用 Team Foundation Server 进行源代码控制。它还为您提供工作项、错误跟踪、生产力报告、应用程序生命周期管理（在一定程度上）等。

我相信他们甚至可能为小型团队提供免费或廉价的工作组版本。

——杰森

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-26T13:36:02.853

我不认为真的有一个标准。大型机构或 MS 合作伙伴可能正在使用 Team Foundation Server。您更有可能在较小的商店中找到 Subversion 或类似产品。我现在在一家大型零售银行，他们在这里使用 Merant PVCS。在我之前的 IBank 中，他们使用非常古老的 CVS。我还看到在一个作为 MS 合作伙伴的客户中使用 Borland Starteam - 它很好地集成到 VS 中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-26T14:03:44.063

> *   在 PHP/MySQL 工作多年后，我重新回到 .NET

做得好。

> *   早在 2002 年的 Microsoft 项目中，我们一直使用 Visual SourceSafe，但每个人都讨厌它

那里没有太大变化

> *   在现代 .NET 项目中，团队是否仍在使用 Visual SourceSafe，它是否有所改进？

是的，没有。我在个人项目中使用 SVN，但在工作中我不得不同时使用 SVN 和 VSS2005。如前所述，没有标准，我发现这在很大程度上取决于您的团队/公司标准。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-11-26T14:10:37.543

[源代码控制：除 SourceSafe 之外的任何东西](http://www.codinghorror.com/blog/archives/000660.html)

我们使用 CVS，但希望迁移到 SVN。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-11-26T15:32:27.503

我不能将其称为标准，但我认为越来越多的 .NET 开发人员使用 SVN。

现在有了很棒的工具，例如：

*   Visual SVN 插件（开源项目免费）
*   Tortoise SVN（暂时）
*   和 Visual SVN 服务器（安装程序免费）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-02T20:25:11.560

SourceSafe 已经死了，微软似乎已经放弃了它。

如果你在微软商店工作（比如我），那么他们要么..

*仍在使用 SourceSafe 并考虑在不久的将来迁移到 SVN 或 TFS *使用 SVN，已经使用了多年，而且效果很好。可能使用 TortoiseSVN 等 *使用 TFS (Team Foundation Server) Microsofts SVN Killer，包括所有内容。

TFS 的价格很高，与 SVN 相比，它可以说是未经证实的。如果您是一家小商店，那么 SVN 可能是默认设置。

如果您是中型/大型 Microsoft 商店，那么 TFS 可能是默认设置。

Windows 系统工程师喜欢它只是另一个要备份的 SQLServer 数据库这一事实。他们会喜欢所有内置的报告元素。WorkItems 和错误跟踪都内置了。虽然在我有限的经验中有点笨拙（我们仍然使用第 3 方错误跟踪器）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-11-26T13:43:13.277

与其他人一样，我不认为它是标准，但我确实看到 VSS 使用得更多，至少在我工作的环境中。我个人更喜欢 SourceGear 的 Vault 产品。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-11-26T14:16:34.973

我在一个大项目（>500 名开发人员）中工作，我们正在使用 ClearCase。它不是免费的，正如我在 www 资源繁重中所读到的那样。但既然我在这里，我只遇到了可以在几分钟内解决的小问题。以前与 SVN 合作要困难得多（可能是因为没有人有丰富的 SVN 经验）。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-11-26T14:25:43.503

自 2003 年以来，在我工作的 3 家使用 .net 的公司中，所有人都使用了 VSS，而且这些公司中似乎没有人愿意改变，其中一个人积极反对 SVN。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-11-26T14:53:39.297

我们使用SVN。它比sourseSafe 好得多。Source Safe 的一件坏事是，如果您将文件添加到项目中，它会检出整个项目，如果用户没有检入项目（大多数情况下都是如此），项目就会被锁定并且然后你必须找出是谁锁定了它。Source Safe 不适合多人开发环境，因为它专门检查文件。另一方面，svn 允许用户同时在同一个文件上工作（无排他锁定），然后用户合并更改。我一直在使用 svn，没有任何抱怨。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-11-27T19:31:42.027

我的大部分工作都是使用 SourceSafe 完成的，尽管其他部门的一些工作是使用 SVN 完成的。我可能更喜欢 SVN 而不是 SourceSafe，但我不是决定使用哪个版本控制系统。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2008-11-26T14:06:33.167

VSS 在 VSS 2005 的发布中进行了改进，随后进行了一些修复以使其与 VS2008 兼容，但是 Visual Studio 2005 和 2008 的黄金标准是 Team Foundation Server。MS 品牌 Team Foundation Server (TFS)，作为 Visual Studio 产品套件的服务器后端。

不利的一面是它可能会有点贵。我个人从未使用过 SVN，但如果它与 Visual Studio 直接集成，（我不想离开我的 IDE 来签入/签出文件），那么它和任何源代码控制系统一样好.

TFS 不仅仅是源代码控制，因为它具有错误跟踪、报告、源代码控制、协作工具（通过 SharePoint）和自动构建（仅举几例）。

# asp.net - ASP.NET DLL 地狱

> ID：320719
> 
> 赞同：1
> 
> 时间：2008-11-26T13:39:10.587
> 
> 标签：asp.net, assemblies, dll, captaris

我有第三方工作流软件（Captaris Teamplate），它从我的项目中引用一个程序集，它通过[GAC](http://en.wikipedia.org/wiki/Global_Assembly_Cache)从我们的项目解决方案中引用其他程序集。

当我们的应用程序执行时，它会调用 Captaris Teamplate 方法来创建一个工作流过程，该过程又使用 GAC 中的项目程序集将数据存储到数据库中。

问题是当我编译我的项目并从 GAC 中删除程序集并用新版本替换它们时，但是当我运行整个项目时，Captaris Teamplate 会引发错误：

> 异常类型：System.IO.FileNotFoundException
> 消息：找不到文件或程序集名称 VBAssembly 或其依赖项之一。
> FileName: VBAssembly
> FusionLog: === 预绑定状态信息 ===
> LOG: DisplayName = VBAssembly, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null

也就是说，它不会给我程序集 DLL 文件的名称。它试图找到它正在寻找的版本。此类问题的故障排除就像在黑暗中射击，它可以杀死保存在 ASP.NET 临时文件夹、项目文件夹和网站文件夹 (inetpub) 中的旧程序集、重新启动等、测试错误、出现错误，搜索其他一些旧程序集等。

所以我的问题是：

1.  是否有一种技术可以让我提取有关此异常的更多信息，例如缺少的程序集名称和版本？
2.  有没有一种简单的方法可以在编译时从系统中清除所有旧的程序集版本？
3.  在处理这个[DLL Hell](http://en.wikipedia.org/wiki/DLL_Hell)和/或 Captaris Teamplate 时还有其他建议吗？

我们将 ASP.NET 1.1 版与带有 Captaris Workflow 5.0 的 Visual Studio 2003 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T16:36:55.047

或者您可以使用[.NET Reflector](http://en.wikipedia.org/wiki/.NET_Reflector)。

但是，您也可能只想致电供应商并向他们寻求帮助。大多数时候，这些人对他们的产品感到非常自豪，所以他们会花时间通过电子邮件或聊天来引导您解决问题。我刚刚在使用的第三方电子表格组件中遇到了类似的问题，即使该公司在德国，我也能够通过让他们重新编译组件并在他们发送给我时快速解决问题新的 DLL 它工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T15:57:06.813

如果可能，请避开 GAC。它适用于 DLL Hell。VBAssembly 实际上可能是非托管的，并且可能已从`WINDOWS/system32`目录中删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T16:03:35.257

您可以做的另一件事是“强制”通过 web.config 引用您想要的程序集版本。这是我的 web.config 中的一个示例，以确保我在我的 Web 应用程序中访问正确版本的 Crystal Reports...

```
<assemblies>       
   <add assembly="CrystalDecisions.Web, Version=11.5.3700.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
   <add assembly="CrystalDecisions.Shared, Version=11.5.3700.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
   <add assembly="CrystalDecisions.ReportSource, Version=11.5.3700.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
   <add assembly="CrystalDecisions.Enterprise.Framework, Version=11.5.3300.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>            
</assemblies> 
```

我相信你可以做同样的事情来引用你的库，你只需要确保它们有一个强大的命名键，以便有一个 PublicKeyToken 可以引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-26T16:09:39.267

也许您可以创建一个绑定策略，将您从 XXX 删除到 GAC 的程序集的任何请求重定向到新位置。请参阅*[绑定策略](http://msdn.microsoft.com/en-us/library/aa309359(VS.71).aspx)*。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-09T12:55:36.877

可能最有效的方法是运行`FusLogVW.exe`（.NET Framework SDK 的一部分，请参阅*[Assembly Binding Log Viewer (Fuslogvw.exe)](http://msdn.microsoft.com/en-us/library/e74a18c4(VS.71).aspx)*），它将记录发生的每个绑定失败。这样，您可以列出应用程序中失败的绑定尝试。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-26T16:26:37.517

使用[Dependency Walker](http://en.wikipedia.org/wiki/Dependency_Walker)找出缺少的依赖项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-26T13:46:02.913

一个起点是尝试使用[“清洁解决方案”](https://stackoverflow.com/questions/221803/visual-studio-2008-clean-solution-option)选项，然后构建解决方案。

# algorithm - 如何找到通过 DAG 中一组给定节点的所有路径？

> ID：320721
> 
> 赞同：12
> 
> 时间：2008-11-26T13:39:15.797
> 
> 标签：algorithm, data-structures, directed-graph

我有一个由我的应用程序用户分类的项目列表（下面的蓝色节点）。类别本身可以被分组和分类。

生成的结构可以表示为有向无[环图 (DAG)](http://en.wikipedia.org/wiki/Directed_acyclic_graph)，其中项目是图拓扑底部的汇，顶部类别是源。请注意，虽然某些类别可能定义明确，但很多类别将由用户定义并且可能非常混乱。

例子：

[![示例数据](https://i.stack.imgur.com/j2MOp.png)](https://i.stack.imgur.com/j2MOp.png)
[（来源：[theuprightape.net](http://theuprightape.net/dag.png)）]

在该结构上，我想执行以下操作：

*   查找特定节点下的所有项目（汇）（欧洲的所有项目）
*   查找通过所有一组 n 个节点的所有路径（如果有）（所有通过 SMTP 从 example.com 发送的项目）
*   找到位于所有节点集下方的所有节点（交叉点：goyish brown foods）

第一个似乎很简单：从节点开始，沿着所有可能的路径到底部并在那里收集项目。但是，有没有更快的方法？记住我已经通过的节点可能有助于避免不必要的重复，但是还有更多的优化吗？

我该如何处理第二个？第一步似乎是确定集合中每个节点的高度，以确定从哪个（s）开始，然后找到低于该集合其余部分的所有路径。但这是最好的（甚至是好的）方法吗？

维基百科上列出的[图遍历算法](http://en.wikipedia.org/wiki/Graph_traversal)似乎都与寻找特定节点或两个节点之间最短或最有效的路线有关。我认为两者都不是我想要的，还是我只是看不到这如何适用于我的问题？我还应该在哪里阅读？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T20:54:26.260

尽管您的图是非循环的，但您引用的操作让我想起了控制流图分析的类似方面。有一套丰富的基于[优势](http://en.wikipedia.org/wiki/Dominator_(node))的算法可能适用。例如，您的第三次操作让我想起了计算优势前沿；我相信如果您暂时引入“入口”和“出口”节点，该算法将直接起作用。入口节点连接“给定的节点集”，出口节点连接汇点。

另请参阅[Robert Tarjan 的](http://en.wikipedia.org/wiki/Tarjan)基本算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-02T18:29:59.000

在我看来，对于所有 3 个问题，它基本上都是相同的操作。您总是在问“在节点 Y 下查找所有 X，其中 X 属于 Z 类型”。您所需要的只是“定位节点下的所有节点”的通用机制（解决 Q3），然后您可以过滤“nodetype=sink”的结果（解决 Q1）。对于 Q2，您有起点（您的节点集）和终点（起点下方的任何接收器），因此您的解决方案集是从指定的起始节点到接收器的所有路径。所以我建议你基本上拥有的是一棵树，基本的树遍历算法将是要走的路。

# c++ - Visual C++“强制包含”选项

> ID：320723
> 
> 赞同：8
> 
> 时间：2008-11-26T13:40:13.907
> 
> 标签：c++, visual-c++

我刚刚遇到一个 Visual C++ 选项，它允许您强制包含文件 - 这是在我查看`#include "StdAfx.h"`每个 .cpp 文件中缺少的一些代码时发生的，但实际上是通过此选项这样做的.

该选项可在**高级 C/C++ 配置属性**页面上找到，相当于**/FI**编译器选项。

这个选项可能真的很有用，但在我匆忙开始使用它之前，我想我会问是否有任何陷阱？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-11-26T14:01:46.047

如果您使用的是预编译头文件，我会说与上面的 litb 相反。如果你使用“stdafx.h”作为你的预编译头文件并且有这样的代码：

```
#include "afile.h"
#include "stdafx.h" 
```

那么您将花费很长时间来弄清楚为什么不包含“afile.h”。使用预编译头文件时，所有包含和#defines 都被忽略，直到“stdafx.h”。因此，如果您强制包含“stdafx.h”，那么上述情况将永远不会发生，您将获得一个有效使用预编译选项的项目。

至于 litb 关于查找宏的评论，好的 IDE 通常可以选择跳转到符号的定义，无论是#define、函数、类等。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-11-26T13:47:51.613

我不鼓励 /FI （[MSDN](http://msdn.microsoft.com/en-us/library/8c5ztk84.aspx)说它被称为 /FI 。不确定我是否查看了正确的页面），仅仅是因为阅读文件的人或您自己不会注意到标题被神奇地包含在内。

`#include`您可以肯定，即使文件顶部没有行，对于想要找出特定宏来自何处的人来说，这也会导致大量调试时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-28T15:35:42.537

强制包含对于自动生成的源文件也很有帮助。我们的系统使用了一个生成许多源文件的工具，但它们不包括我们的预编译头文件。使用“强制包含”这些文件的编译现在更快。

或者，可以编写脚本在生成之后和编译之前在这些文件中插入#include 行。但是为什么要这么麻烦呢？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-26T14:12:49.440

我支持 litb：不要强制包含。明确代码可以更容易地了解新用户的情况。如果您需要将代码移植到新平台，它还可以让您更轻松地了解正在发生的事情。

请注意，如果代码使用模板，Visual Studio 通常无法正确跟踪定义。也许 2010 年会更好，但即使 VS 2008 在这方面也存在问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-26T19:03:32.617

我不会经常使用它，但它有它的用途。我已经使用它添加了一个标题，该标题抑制了对所有 cpp 文件的一些警告，以便我可以为项目打开 /W4 或 /Wall 而不必编辑所有 cpp 文件以首先包含警告抑制标题。一旦一切正常，我确实返回并编辑所有 cpp 文件，但对于概念证明 /FI 很有用。

同样，您可以在某些构建配置中使用它来强制将预编译头文件放入 cpp 文件中，但不是全部（如果您想要一个不使用预编译头文件的构建配置，并确保每个 cpp 只包含它需要的内容）。但是，恕我直言，使用#pragma hdrstop 是实现此目的的更好方法。

我已经在我的博客上讨论了所有这些：http: [//www.lenholgate.com/blog/2004/07/fi-stlport-precompiled-headers-warning-level-4-and-pragma-hdrstop.html](http://www.lenholgate.com/blog/2004/07/fi-stlport-precompiled-headers-warning-level-4-and-pragma-hdrstop.html)更详细一点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-26T18:16:47.467

保存这个函数，以备出现奇怪的事情时使用——比如如果你想在生成的源文件中包含一个标题。即使那样，也可能有更好的方法。

# database - Oracle 用户管理

> ID：320725
> 
> 赞同：0
> 
> 时间：2008-11-26T13:40:23.157
> 
> 标签：database, oracle, oracleinternetdirectory

有人有使用 Oracle 用户管理的经验吗？知道它是否可以轻松用于将用户和角色注册到 Oracle OID 中吗？以及如何在我的应用程序中使用定义的角色（即我应该对它们进行硬编码）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T19:39:11.000

我已经就这个话题提出了几个[问题](https://stackoverflow.com/questions/192609/what-is-the-current-state-of-oracle-internet-directory)，但几乎没有得到回应。

[我认为这里](http://forums.oracle.com/forums/main.jspa)的社区并没有为此做好准备，您最好在 Oracle 论坛上过得更好。

# apache2 - Apache httpd 模块在版本之间是否二进制向后兼容？

> ID：320732
> 
> 赞同：0
> 
> 时间：2008-11-26T13:43:03.417
> 
> 标签：apache2

我可以（例如）在 Windows 下使用 2.2.10 版本的 mod_proxy 和其他未更改的 2.2.8 apache 发行版吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-01T03:28:52.910

我认为 Apache 模块 ABI 在 2.2 版本中是稳定的，但我不会发誓。如果你尝试会发生什么？

# flash - 在非 IE 浏览器上的 Flash 9 中声音消失

> ID：320743
> 
> 赞同：0
> 
> 时间：2008-11-26T13:47:14.377
> 
> 标签：flash, actionscript-3, audio

我正在一个网站 ( [http://easy2speak.com](http://easy2speak.com) ) 上工作，每页大约有 10 个 Flash SWF。单击时，每个 SWF 都会播放声音。加载声音并在没有任何延迟的情况下播放它工作正常，但在除 IE 之外的所有主要浏览器上的 Flash 播放器版本 9 中，声音突然消失。它通常适用于前 10-20 次点击，然后 SWF 将完全静默，直到下一次机器/浏览器重新启动。

在 Flash player v10（完全相同的代码）中，它可以完美运行。它也可以在 Internet Explorer 的 Flash player v9 中完美运行。

有任何想法吗 ？

我也很想听听一些关于如何解决这个问题的头脑风暴，因为我开始怀疑我无法在代码中进行简单的修复。

顺便说一句，该网站在 MP3 中有 1000 多种声音，因此任何解决方案都不能涉及嵌入声音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-01T16:40:02.920

听起来声音的加载是您问题的原因。假设 Flash 从同一个 url 加载文件，可能非 IE 浏览器无法在一个浏览器会话中处理同一个 mp3 文件的多个请求。

即使加载了相同的文件，您也可以尝试将 as3 代码中的加载对象 url 更改为唯一的 url，以便在每次新请求时浏览器都认为它是一个新文件并且不会让您失望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-10T17:45:08.107

我不知道您的代码是什么样的，但通常情况下，某些东西工作，然后在多次重复后停止工作，这意味着您在不需要对象后不会从内存中清除它们。因此，只需确保删除未使用对象的事件侦听器，删除对象，然后将它们设置为 null。

-JB

# svn - 将代码与两个 subversion 存储库同步

> ID：320759
> 
> 赞同：9
> 
> 时间：2008-11-26T13:55:58.850
> 
> 标签：svn, version-control, synchronization

先说一点背景：

*   我正在使用来自远程 SVN 存储库的“基本”代码，而不是在我的控制之下。代码没有被标记（还），所以我总是需要跟上主干。

*   由于多种原因（最重要的是我们对代码的本地扩展具有“利基”性质，旨在解决使用该代码的项目的特定问题）我无法使用远程存储库对我在本地进行的任何修改进行版本控制。

*   我有一个本地 SVN 存储库，我目前正在其中进行“本地”版本控制。

我面临的问题：我不知道是否有一种好方法可以让代码同时与两个存储库同步。也就是说，我想保留“远程”版本信息（以便我可以在将来的更改中合并），但我也想同时拥有“本地”版本信息（即，在同一个目录结构中） .

目前我正在使用两个不同的目录执行此操作，它们都包含相同的代码，但每个目录都包含不同的版本信息。显然这是相当大的开销，尤其是因为两个目录中的代码需要独立同步。

有没有办法在颠覆中做到这一点？或者您对解决此问题的替代方法有建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-26T14:19:43.047

我使用 git svn 完成了这项工作，我的开发是在 git 存储库中完成的。远程开发是在颠覆中完成的。我制作了 subversion 存储库的 git svn 克隆，并将其推送到真正的 git 存储库。一个 cronjob 不时地运行“git svn rebase && git push”来创建一个颠覆 repo 的 git 镜像。

为了合并颠覆更改，我在本地 git 副本中有 2 个遥控器 - “本地开发”来源和“来自颠覆镜像”的来源。每当我觉得需要时，我可以将颠覆镜像中的更改合并到我们的开发树中。本地更改不受影响，它们分开并且不会弄乱 svn 镜像。

我使用[gitosis](http://scie.nti.st/2007/11/14/hosting-git-repositories-the-easy-and-secure-way)来设置和管理 git 存储库。步骤将是这样的（根据记忆，可能是错误的）：

```
# set up the mirror
git svn clone -s $SVN
git remote add origin git@$MACHINE:svnmirror.git
git push
# + cron job to do git svn rebase && git push every N hours/minutes

# set up the local working copy for development
git clone git://$MACHINE/svnmirror.git
# that's an anonymous, read only clone 
# no push to the svn mirror for developers - only cronjob user can push there
git remote add newproject git@$MACHINE:myproject.git
git push newproject
# now do the real deal
git clone git://$MACHINE/myproject.git
# hack hack hack
git push # origin master not needed
git remote add svnmirror git://$MACHINE/svnmirror.git
git merge svnmirror/master
git push 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-26T14:01:18.340

您可以在本地存储库中提交更改，就像您已经完成的那样。此外，您将定期从基本存储库进行合并，以便将在基本主干中完成的更改合并到您的本地存储库中。

唯一困难的是您需要跟踪已从基础存储库中合并的修订版本。

这可能看起来像这样：

```
svn merge -r X:Y baseRepositoryURL // merge from base repo
svn commit                         // commit the changes to local repo
svn merge -r Y:Z baseRepositoryURL // merge from base repo
svn commit                         // commit the changes to local repo 
```

其中 X 是您初始结帐的版本，Y 是第一次合并时的头版本，Z 是第二次合并时的头版本。你看到了模式。此外，在发出命令时，您必须位于本地结帐的基本目录中，这一点很重要。

# c# - Windows 2003、IIS6 Webservice登录疑难解答

> ID：320761
> 
> 赞同：1
> 
> 时间：2008-11-26T13:57:04.480
> 
> 标签：c#, iis-6, windows-server-2003

环境：

> win2003 运行IIS6 服务于调用delphi 代码的asp 页面。

Delphi 代码联系一个需要登录的**c# web**`login.asmx`服务 ( )。Web服务日志显示登录成功。调试结果表明`Context.User.Identity.IsAuthenticated returns true`。

登录后，delphi 代码会再次检查它是否仍然经过身份验证。Web 服务返回 false -> `Context.User.Identity.IsAuthenticated returns false`。

**我们的猜测：运行在IIS6**凭据（网络服务？）下的 delphi 代码收到的身份验证 cookie没有保存到磁盘，因此登录丢失。

Filemon 显示`'C:\WINDOWS\Temp\Temporary Internet Files'`拒绝访问。**授予 IIS6**用户对该文件夹的管理员权限可以解决问题，但这是不可接受的，因为默认情况下 cookie 应该可以工作。

在**IIS5**兼容模式下运行**IIS6**可以解决问题，但也不是首选

 **想要的解决方案：问题的确切原因和配置中可能的最小修改（授予 IUSR 管理员权限不是一个选项）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-26T14:03:01.100

默认情况下，Cookie 确实有效，但您必须有地方存储它们。如果您不想授予对存储它们的正常位置的访问权限，那么您将需要设置另一个您可以授予权限的目录，并将其设置为 IIS6 用户的 Internet 缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-08-26T03:45:32.323

考虑到对于此类问题，您有相当多的潜在问题，一些可能会有所帮助的快速资源，请参阅[此](http://classicasp.aspfaq.com/general/why-won-t-my-session-variables-stick.html)。

**IIS5**和**IIS6**之间的一个重要区别是*Windows 2003在**SP1*更新中经历了重大的安全锁定。有很多适用于*Windows 2000的东西在**2003 年*将不再适用（而且不应该 - 它们为各种恶作剧打开了大门）。**试图追踪IIS6**锁定的所有地方可能具有挑战性，相反，我将使用上述资源来追踪人们在使用**IIS6**时遇到的常见问题。

# javascript - 将 Elmah 与 jQuery 一起使用？

> ID：320765
> 
> 赞同：3
> 
> 时间：2008-11-26T13:59:07.457
> 
> 标签：javascript, jquery, elmah

我正在使用 jQuery 为使用 $.Ajax 的 AJAX 调用调用页面方法。这很好用，而且非常轻量级。但是，我注意到，当从 .NET 代码中引发异常时，Elmah 只会将其记录为 File Not Found 异常，或者根本不会记录任何内容，而不是记录引发的实际异常。有没有办法让 Elmah 处理这些异常？他们需要被抓住/重新抛出吗？我确定这与 JavaScript 文件中的错误处理有关，但我不知道从那里去哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T14:13:28.253

我很确定如果 ELMAH 在不进行一些修改的情况下无法正确登录此场景。

可能值得在这里问这个问题。

[链接文本](http://groups.google.com/group/elmah?pli=1)

Atif Aziz 通常会很快回答问题

# c# - 如何在 C# 中从进程中捕获异常

> ID：320767
> 
> 赞同：5
> 
> 时间：2008-11-26T13:59:41.060
> 
> 标签：c#, exception-handling, process

我在这里有一个验收运行程序，看起来像这样：

```
public Result Run(CommandParser parser)
{
    var result = new Result();
    var watch = new Stopwatch();

    watch.Start();

    try
    {
        _testConsole.Start();

        parser.ForEachInput(input =>
        {
            _testConsole.StandardInput.WriteLine(input);
            return _testConsole.TotalProcessorTime.TotalSeconds < parser.TimeLimit;
        });

        if (TimeLimitExceeded(parser.TimeLimit))
        {
            watch.Stop();
            _testConsole.Kill();
            ReportThatTestTimedOut(result);
        }
        else
        {
            result.Status = GetProgramOutput() == parser.Expected ? ResultStatus.Passed : ResultStatus.Failed;
            watch.Stop();
        }
    }
    catch (Exception)
    {
        result.Status = ResultStatus.Exception;
    }

    result.Elapsed = watch.Elapsed;
    return result;
} 
```

_testConsole 是一个进程适配器，它将常规的 .net 进程包装成更可行的东西。但是，我确实很难从启动的过程中捕获任何异常（即，catch 语句在这里毫无意义）我正在使用类似的东西：

```
_process = new Process
                           {
                               StartInfo =
                                   {
                                       FileName = pathToProcess,
                                       UseShellExecute = false,
                                       CreateNoWindow = true,
                                       RedirectStandardInput = true,
                                       RedirectStandardOutput = true,
                                       RedirectStandardError = true,
                                       Arguments = arguments
                                   }
                           }; 
```

设置过程。有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-11-26T14:02:52.630

异常不会从一个进程流向另一个进程。您可以做的最好的事情是监视进程的退出代码 - 通常，退出代码 0 表示成功，任何其他退出代码都表示错误。

当然，您要启动的流程是否属于这种情况是另一回事。

# apache-flex - Actionscript - 强制转换或创建新变量更好吗？还是根本不重要？

> ID：320782
> 
> 赞同：1
> 
> 时间：2008-11-26T14:03:52.487
> 
> 标签：apache-flex, flash, actionscript-3

我发现在我日常的 Flex/Flash 工作中，我经常做这个数字：

```
//Calling a function...
MyCustomObject(container.getChildAt(i)).mySpecialFunction(); 
```

问题是 - 这是最好的方法吗？我应该这样做：

```
//Calling a function
var tempItem:MyCustomObject = container.getChildAt(i) as MyCustomObject;
tempItem.mySpecialFunction(); 
```

这可能是偶然的，但我只是想知道是否有“接受”的方式或首选方式来做到这一点。第二个选项似乎更具可读性，但我想知道创建一个新变量是否需要更多的性能影响。或者这一切都归结为风格和偏好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-30T22:26:38.713

重要的是要记住显式转换和使用`as`关键字之间存在差异。强制转换失败时会抛出错误，而`as`关键字不会（它只是返回 null）。

```
// a casting error
try {
    var number:int = 666;
    var urlreq:URLRequest = URLRequest( number );
} catch(e:TypeError) {
    // TypeError: Error #1034: Type Coercion failed: cannot 
    //            convert 666 to flash.net.URLRequest.
    trace(e); 
} 
```

而`as`关键字静默失败：

```
var number:int = 666;
var urlreq:URLRequest = number as URLRequest;
trace(urlreq); // prints null to the debug pane 
```

就个人而言，我在决定使用方法时会牢记这些行为。一般来说，我建议明确地进行投射，因为你会确切地知道投射失败的方式/时间。但是，通常，您可能希望默默地失败并继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T16:03:58.157

一般没关系。创建一个 var 只是创建一个指向对象的指针，所以它不会使用更多的内存或类似的东西。

第二个示例肯定更具可读性和可调试性，因此应该是首选。

创建临时变量的风险是您可能会延迟或阻止该对象的垃圾收集。当它只是函数中的局部变量时，这通常不是问题；当您创建变量并传递它们时，请记住范围。

如需深入了解该主题，请阅读 Grant Skinner 的 AVM2 资源管理系列： [http ://www.gskinner.com/blog/archives/2006/06/as3_resource_ma.html](http://www.gskinner.com/blog/archives/2006/06/as3_resource_ma.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-30T22:55:07.970

对于第二个示例，您可能希望在调用“mySpecialFunction”时测试无效性以避免 NullPointerException，例如

```
var tempItem:MyCustomObject = container.getChildAt(i) as MyCustomObject;

if ( tempItem )
{
   tempItem.mySpecialFunction();
} 
```

我通常更喜欢第二种方法，但您必须记住，您只能使用 as 运算符来转换“日期”和“数组”类型。

# facelets - 好的facelets资源？

> ID：320796
> 
> 赞同：1
> 
> 时间：2008-11-26T14:09:00.230
> 
> 标签：facelets

我使用 JSF 已经有一段时间了，并且一直在使用 Apache-Trinidad 标签。我非常喜欢使用它进行开发，但我不断听到关于 facelets 的好消息。有没有人在使用它，它到底能给你带来什么？

我查看了 facelets 站点（[https://facelets.dev.java.net/](https://facelets.dev.java.net/)），但它并没有很好地解释有关 facelets 的优点或任何教程。我查了谷歌，但一切似乎都是从 2005 年或 2006 年开始的，从那以后肯定发生了很多变化。

有人想发表他们对 facelets 的看法或向我指出一些好的资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-15T07:01:40.057

facelets真的是一件很棒的事情。他们第一次就做对了，所以我想没有必要升级它。看起来像 facelets 之类的东西正在进入 JSF 2.0 规范。( [http://jcp.org/en/jsr/detail?id=314](http://jcp.org/en/jsr/detail?id=314) )

在我工作的一个地方，我刚刚将一个项目从 JSF 1.1 转换为带有 facelets 的 JSF 1.2，我非常喜欢它。我从中得到的是：

*   模板（不需要瓷砖）
*   更好的调试（调试视图而不仅仅是堆栈跟踪）
*   ui:repeat 和 c:if 等
*   可以使用与标签混合的 html，如果我想要的话，允许我使用带有 colspans 的普通 html 表，而无需额外的 taglib。
*   语法与jsp几乎相同，因此很容易转换页面。
*   滚动您自己的组件现在非常简单。

至于资源，我猜旧的仍然有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T20:21:14.843

Facelets并没有真正改变。这是一个非常简单的模板引擎，作为 JSF 视图处理程序运行并替换了 jsp。

旧资源仍然有效。

*   使用 xml 作为模板。
*   您可以在任何地方使用 EL。
*   标签很少。
*   很简单
*   ...

在我看来，创建接口的方法比 JSP 好得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-04-22T12:45:28.790

我也刚刚开始使用 facelets，到目前为止，我发现的最好的资源是 Apress 的“Apache MyFaces 和 Facelets 权威指南”一书。虽然您可能不需要其他章节，但由于您已经使用过 Trinadad 标签，我发现他们用来解释 facelets 的示例提供了一个很好的具体基础。我不断地参考文本来提取一些代码。

PS 这是来自[Google Books](http://books.google.com/books?id=FPxif81mgYoC&printsec=frontcover&dq=myfaces+and+facelets&cd=1#v=onepage&q&f=false)的链接，它至少可以让你领略一下里面的内容。

# vba - 根据单元格中的值对单元格进行颜色

> ID：320797
> 
> 赞同：1
> 
> 时间：2008-11-26T14:09:34.487
> 
> 标签：vba, excel

使用宏，我将几个工作簿中的信息合并到新工作簿中的一张表中。

在一个专栏中，我创建了一个名为 ColRange 的命名范围。该列的数字范围从 -350 到 500。

如何根据单元格中文本的值更改单元格的颜色。
红色(0-500) 黄色(-5-0) 绿色(-350--5)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T14:30:51.307

看看[条件格式](http://www.wikihow.com/Apply-Conditional-Formatting-in-Excel)。您甚至可能不需要 VBA 来执行此操作。

话虽如此，VBA 代码看起来像这样：

```
Public Sub colorit()
    Dim colRange As Range
    Dim rowNum As Integer
    Dim rnum As Integer

    rnum = 20
    Set colRange = Range(Cells(2, 9), Cells(rnum, 9))

    For rowNum = 1 To colRange.Rows.Count
        If colRange.Cells(rowNum, 1).Value <= -5 Then
            colRange.Cells(rowNum, 1).Interior.Color = RGB(0, 255, 0)
        ElseIf colRange.Cells(rowNum, 1).Value <= 0 Then
            colRange.Cells(rowNum, 1).Interior.Color = RGB(255, 255, 0)
        ElseIf colRange.Cells(rowNum, 1).Value <= 500 Then
            colRange.Cells(rowNum, 1).Interior.Color = RGB(255, 0, 0)
        End If
    Next rowNum
End Sub
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-09T13:19:32.040

这是对原始问题的回应，是对文森特回应的简单修改：

如果是命名范围（使用 UI：插入、名称、定义）：

```
Dim c As Range

For Each c In Range("ColRange").Cells
    If c.Value >= 0 And c.Value <= 500 Then
        c.Interior.Color = RGB(255, 0, 0)
    ElseIf c.Value >= -5 Then
        c.Interior.Color = RGB(255, 255, 200)
    Else
        c.Interior.Color = RGB(0, 255, 0)
    End If

Next c 
```

如果是范围对象，在代码中定义：

```
Dim c as Range

For Each c In colRange.Cells

    If c.Value >= 0 And c.Value <= 500 Then
        c.Interior.Color = RGB(255, 0, 0)
    ElseIf c.Value >= -5 Then
        c.Interior.Color = RGB(255, 255, 200)
    Else
        c.Interior.Color = RGB(0, 255, 0)
    End If

Next c 
```

我认为文森特的响应不太有效，因为它试图在 If Then 内的整个 ColRange 范围内进行操作，而不是一次对每个单元格进行操作。（出于这个原因，您可能还想用 Application.ScreenUpdating = False 包装它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T14:24:13.147

假设该值是存储在列中的数字，则：

```
If value >= 0 AND value <= 500 Then
    ColRange.Interior.Color = RGB(255,0,0)
ElseIf  value >= -5 Then
    ColRange.Interior.Color = RGB(255,255,200)
Else
    ColRange.Interior.Color = RGB(0,255,0)
End If 
```

并假设大于 500 或小于 -350 的值是不可能的，或者您的脚本无法验证。此外，您的范围有点重叠，0 应该是什么颜色？红色还是黄色？

# c++ - 将类型添加到 std 命名空间

> ID：320798
> 
> 赞同：18
> 
> 时间：2008-11-26T14:09:43.830
> 
> 标签：c++, stl, namespaces

将类型添加到`std`命名空间是否可以接受。例如，我想要一个对 TCHAR 友好的字符串，那么以下是否可以接受？

```
#include <string>

namespace std
{
    typedef basic_string<TCHAR> tstring;
} 
```

还是我应该使用自己的命名空间？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-11-26T15:12:00.693

只允许专业化。因此，例如，您可以专门`std::numeric_limits`针对您的类型。这当然必须发生在 namespace `std::`。但是您的 typedef 不是专业化的，因此会导致未定义的行为。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-11-26T14:14:10.953

不......命名空间的一部分是为了防止升级时的名称冲突。

如果您将内容添加到 std 命名空间，那么如果他们决定添加具有相同名称的内容，您的代码可能会在库的下一个版本中中断。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-02-05T13:00:24.703

> `[C++11: 17.6.4.2.1/1]:``std`如果 C++ 程序将声明或定义添加到命名空间或命名空间内的命名空间，则 C++ 程序的行为是未定义的，`std`除非另有说明。只有当声明依赖于用户定义的类型并且特化满足原始模板的标准库要求并且没有明确禁止时，程序才能将任何标准库模板的模板特化添加到命名空间 std。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-26T14:11:57.243

您应该使用自己的命名空间，因为将代码添加到标准库只会使那些在线查找有关该添加的信息的用户感到困惑。

std 中的所有内容应该只是标准库，没有别的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-26T14:28:15.120

正式地，该标准说这是“未定义的行为”，并且可能会发生各种令人讨厌的事情。

在实践中，它会正常工作，但你仍然不应该这样做。除了让人们认为编译器提供了某些东西之外，它还能给你带来什么？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-04-23T05:53:36.207

这是一个有趣的问题，因为它完全取决于项目和工程师接受的编码标准。

对于一个程序员来说，为什么不……小心点。

对于团队，制定标准...

对于跨平台项目，地狱是的。

否则，nawdawg。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-26T15:13:47.087

我完全同意其他答案，即您应该将类​​型放在自己的命名空间中以避免不幸的名称冲突。

但是，我想明确指出，*有时*您可以（并且应该！）在 std 命名空间中添加内容。例如 std::swap 方法的模板特化就是这种情况，它用于提供交换对象的统一方式。有关此问题的更多信息，您可以阅读有关[非抛出交换习语的](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Non-throwing_swap)信息。

# asp.net - 在另一个网站中重用一个网站的页面的最佳方法是什么？

> ID：320801
> 
> 赞同：3
> 
> 时间：2008-11-26T14:10:33.173
> 
> 标签：asp.net

我正在开发一个新的 ASP .NET 网站，它实际上是我们刚刚发布的另一个网站中页面的子集。其中两三个页面需要稍作调整，但没什么大不了的。

显而易见的答案是简单地将所有代码和标记文件复制到新项目中，进行上述调整，然后考虑完成工作。但是，由于它会创建大量重复代码，我根本不热衷于此。

我的下一个想法是将页面代码（即代码隐藏文件）移动到一个单独的程序集中，然后可以从两个站点引用该程序集。这有点尴尬，但是如果你不带设计器文件，你会得到很多与缺少控件相关的构建错误。我不认为移动设计器文件是一个好主意，因为每次更改标记时都需要重新生成它。

有没有人对这个问题的干净解决方案有任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T15:14:53.433

您可能想看看 MVP 模式。由于您可能正在使用 WebForms，因此很难迁移到 ASP.Net MVC，但您可以很容易地将 MVP 实现到现有应用程序中。

在基本层面上，您会将所有业务逻辑移动到一个 Presenter 类中，该类具有一个表示某种接口的 View：

```
public class SomePresenter
{
    public ISomeView View{get; set;}

    public void InitializeView()
    {
        //Setup all the stuff on the view the first time

        View.Name = //Load from database
        View.Orders = //Load from database
    }

    public void LoadView()
    {
        //Handle all the stuff that happens each time the view loads
    }

    public Int32 AddOrder(Order newOrder)
    {
        //Code to update orders and then update the view
    }
} 
```

你可以定义你的接口来保存你想要显示的原子类型：

```
public interface ISomeView
{
    String Name {get; set;}
    IList<Order> Orders{get; set;}
} 
```

一旦定义了这些，您现在可以简单地在表单中实现接口：

```
public partial class SomeConcreteView : System.Web.UI.Page, ISomeView
{
    public SomePresenter Presenter{get; set;}

    public SomeConcreteView()
    {
        Presenter = new SomePresenter();

        //Use the current page as the view instance
        Presenter.View = this; 
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        if(!IsPostBack)
        {
            Presenter.InitializeView();     
        }

        Presenter.LoadView();
    }

    //Implement your members to bind to actual UI elements
    public String Name
    {
        get{ return lblName.Text; }
        set{ lblName.Text = value; }
    }

    public IList<Order> Orders
    {
        get{ return (IList<Order>)ordersGrid.DataSource; }
        set
        {
            ordersGrid.DataSource = value;
            ordersGrid.DataBind();
        }
    }

    //Respond to UI events and forward them to the presenter
    protected virtual void addOrderButton_OnClick(object sender, EventArgs e)
    {
        Order newOrder = //Get order from UI
        Presenter.AddOrder(newOrder);
    }
} 
```

如您所见，您的代码现在非常简单，因此代码重复不是什么大问题。由于核心业务逻辑都封装在某个 DLL 中，因此您不必担心功能不同步。Presenter 可以在多个视图中使用，因此您具有很高的重用性，并且您可以在不影响业务逻辑的情况下自由更改 UI，只要您遵守合同即可。

同样的模式也可以应用于用户控件，因此您可以根据需要获得模块化。此模式还为您提供了无需运行浏览器即可对逻辑进行单元测试的可能性:)

[模式和实践](http://msdn.microsoft.com/en-us/practices/default.aspx)组对此有一个很好的实现：[WCSF](http://www.codeplex.com/websf)

但是，您不必使用他们的框架来实现此模式。我知道这起初可能看起来有点令人生畏，但它会解决你遇到的许多问题（在我看来）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T14:15:37.657

创建用户控件（小部件）或模板来调整您想要实现的目标。

也可以使用 CSS 样式或 JavaScript 实现相同的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T14:13:18.520

为什么不从您希望共享的页面创建用户控件（或自定义控件）？然后，您可以在两个站点上重复使用这些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T14:43:19.410

我们在项目中使用的（JSP，不是 ASP，但在构建和文件方面肯定不是问题？）是有一个通用文件的基本文件夹，然后是另一个（“实例”）文件夹文件和覆盖，我们的构建脚本（在 ANT 中，Maven 也应该没问题）将首先复制基本文件夹，然后根据提供的参数选择要复制的实例文件。

因此，我们可以更改基础中的文件，并将其应用于所有实例。

一个问题是更改基本文件不会更新任何覆盖它的实例文件，但至少您可以为这些更新制定流程。假设您也可以使用 SVN (etc) 修订来标记构建错误，即实例文件比基本文件旧，但我们还没有实现任何聪明的东西。

此外，您的后端代码（在我们的案例中为 Struts 操作）最终将处理所有案例，而不是仅处理任何特定实例的案例。但至少所有代码都在一个地方，并且逻辑应该是清晰的（“if (instance == FooInstance) { doFooInstanceStuff(...); }”）。

# mysql - SQLite 是否适合在生产网站中使用？

> ID：320803
> 
> 赞同：5
> 
> 时间：2008-11-26T14:11:54.763
> 
> 标签：mysql, sqlite

我正在使用 Django 重写一个 PHP+MySQL 站点，该站点平均每天点击 40-50 次。

SQLite 是否适合在这里使用？它们之间有什么优点/缺点吗？

我只是使用数据库来存储博客和可以编辑它的用户。我正在使用全文搜索进行博客搜索，但在任何地方都没有复杂的连接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-26T14:18:12.877

每天 40-50 次点击非常少，可以毫无问题地使用 SQLLite。

一旦您受到更多打击，MySql 可能会更好，因为它以更好的方式处理多个连接（锁定与 MySql 和 SqlLite 不同）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-26T14:17:58.543

sqlite 的主要问题是并发性。如果您预计每天有 40-50 次点击，那可能不是问题。但是，如果负载增加，您应该准备好迁移到 MySQL 等数据库守护程序 - 更好地抽象您的数据库特定代码，以尽可能轻松地进行此类切换。

SQLite wiki的[性能部分](http://www.sqlite.org/cvstrac/wiki?p=PerformanceConsiderations)可能对您有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-26T14:26:01.147

由于您已经在使用足够的数据库，因此我认为没有理由迁移到较小的数据库。

虽然 sqlite 可能也完全足够了 - 从功能更强大的平台更改为功能更弱的平台似乎不是最佳选择:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-26T14:53:09.923

SQLite 会为你工作得很好。听起来好像您主要将数据库用作只读（偶尔写入以更新内容）。SQLite 擅长这种访问模式。SQLite 阻塞的唯一地方是当您对数据库进行大量写入时，因为一旦进程尝试写入文件，文件就会被锁定，直到写入完成。此外，如果您进行大量写入（例如在循环中更新行），您应该考虑将所有这些写入放入事务中 - 当事务遇到写入查询时文件被锁定时，更新本身花费的时间要少得多，因为它们' 一次写入文件，而不是单独写入。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-26T14:19:09.477

对于这种级别的流量，SQLite 会很好。它实际上执行得很好，唯一缺少的是数据和查询的缓存，因为每次访问您的页面时都需要启动它。也就是说，它仍然非常快，如果需要，以后迁移到 MySQL 应该不会太难。

# .net - Windows 脚本主机的 DotNet 版本

> ID：320814
> 
> 赞同：2
> 
> 时间：2008-11-26T14:15:47.017
> 
> 标签：.net, vbscript, wsh

早上好，

我在一家小商店工作（只有我们两个人），我们目前管理更多我们想要的 .vbs 脚本（我们想要管理零）。这些脚本的优点之一是可以快速进行更改（根据需要）并返回我们的日常工作。

这一切都很好，直到我们决定需要大幅改变工作，然后使用 PITA 来开发和调试，主要是因为感觉就像我在用棒球棒打台球。

有没有更多的 DotNet 方式来做人们已经使用和喜欢的类似 Windows 脚本主机的东西？自然，我更喜欢免费/便宜的工具。

问候，

-艾伦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-26T14:19:51.190

[PowerShell](http://www.microsoft.com/windowsserver2003/technologies/management/powershell/default.mspx)是 Microsoft 的“下一代、基于 .NET 的脚本平台”。我没有详细研究过它，但据我所知，它试图将 Unix 风格管道的简单性与丰富对象模型的强大功能结合起来。

当然，它是否完全符合您想要实现的目标，我真的不能说 - 但它当然值得一看。

还有其他可以编写脚本的 .NET 语言 - 有[IronRuby](http://www.ironruby.net/)和[IronPython](http://www.codeplex.com/IronPython)等动态语言，还有[Boo](http://boo.codehaus.org/)（大部分是静态的，但在你想要的地方有鸭子类型）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-26T14:37:36.600

我只是偶然发现了[http://www.csscript.net](http://www.csscript.net)，它可以让你执行小 c# 脚本（不编译）。它是开源的。

“CS-Script 将 C# 和 FCL 的强大功能和丰富性与脚本系统的灵活性相结合。CS-Script 对系统和网络管理员、开发人员和测试人员非常有用。对于任何需要自动化解决各种编程任务的人来说。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T14:37:25.977

试图修复 VBScript 的未来是有问题的。微软已经表示他们[致力于保持它的发展](https://web.archive.org/web/20060511012208/http://www.visualbasicscript.com/m_26652/mpage_1/key_/tm.htm#26652)（第二个条目）。然而，虽然有[JScript.NET](http://en.wikipedia.org/wiki/JScript_.NET)，但还没有 VBScript.NET 的迹象。

除了 JScript.NET 之外，还有多种方法可以解决此问题，例如[DOTNET Scripting Host (DSH)](http://www.dotnetframework.de/scripting/dotnetscripting/dsh.en.asp)。

所以 VBScript 似乎或多或少地活得很好。不久前，甚至有一篇 CodeProject 文章[使用 VBScript 编写 .NET 应用程序脚本](http://www.codeproject.com/KB/system/mScriptable.aspx)。

这最终是你的选择；对我来说，学习 PowerShell 在我要做的事情清单上并不重要，所以我将继续使用 VBScript，正如 Fozzie Bear 所建议的那样，“希望有更好的东西出现。”

# asp.net - 绑定到asp.net中的linq继承类型

> ID：320818
> 
> 赞同：0
> 
> 时间：2008-11-26T14:15:57.173
> 
> 标签：asp.net, vb.net, linq, .net-3.5

我有一个 Linq-to-SQL 数据模型，其中包含一个类型，该类型`Party`为`Company`和子分类两次`Individual`。我正在尝试将两个转发器绑定到 Linq-to-SQL 查询，如下所示

```
 Dim oComp As IEnumerable(Of Company)
    Dim oInd As IEnumerable(Of Individual)

        oComp = From oP As Company In ERM.Parties _
                 Where TypeOf (oP) Is Company And _
                 oP.Name.StartsWith(sSearchString)

        oInd = From oP As Individual In ERM.Parties _
                Where TypeOf (oP) Is Individual And _
                (oP.FirstName.StartsWith(sSearchString) Or _
                oP.LastName.StartsWith(sSearchString))

        rptIndividuals.DataSource = oInd
        rptCompanies.DataSource = oComp

        rptCompanies.DataBind()
        rptIndividuals.DataBind() 
```

当我单步执行代码`oComp`并按`oInd`预期执行时`IEnumerable<Company>`，但在第一次调用`IEnumerable<Individual>`时出现以下异常`DataBind`

> System.MissingMethodException 未由 System.Data.Linq.DataQuery`1[[DataModel.Party, DataModel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]' not found." Source="mscorlib" StackTrace: at System.RuntimeType.CreateInstanceImpl(BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes) at System.Activator.CreateInstance(Type type, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes) at System.Data.Linq.Provider.BindingList.Create[T](DataContext context, IEnumerable`处的用户代码 Message="Constructor on type 'System.Data.Linq.Provider.DataBindingList 1 sequence)`1.GetNewBindingList() at System.Data.Linq.DataQuery`1.System.ComponentModel.IListSource.GetList() 在 System.Web.UI.DataSourceHelper.GetResolvedDataSource(Object dataSource, String dataMember) 在 System.Web.UI.WebControls.ReadOnlyDataSource.System.Web.UI.IDataSource.GetView(String viewName) 在 System.Web.UI.WebControls.Repeater.ConnectToDataSourceView() 在 System.Web.UI.WebControls.Repeater.GetData() 在 System.Web.UI.WebControls.Repeater.CreateControlHierarchy(Boolean useDataSource) 在 System.Web .UI.WebControls.Repeater.OnDataBinding(EventArgs e) 在 System.Web.UI.WebControls.Repeater.DataBind() 在partys.lbHiddenPostback_Click(Object sender, EventArgs e) 在 \parties.aspx.vb:line 491 在系统。 Web.UI.WebControls.LinkBut​​ton.OnClick(EventArgs e) 在 System.Web.UI.WebControls.LinkBut​​ton。在 System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl，String eventArgument) 在 System.Web 的 System.Web.UI.WebControls.LinkBut​​ton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) 的 RaisePostBackEvent(String eventArgument) System.Web.UI.Page.ProcessRequestMain 处的 .UI.Page.RaisePostBackEvent(NameValueCollection postData)（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）InnerException：Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) InnerException:Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) InnerException:

如果我然后按如下方式选择所有内容作为聚会，则一切正常

```
 Dim oComp As IEnumerable(Of Party)
    Dim oInd As IEnumerable(Of Party)

        oComp = From oP In ERM.Parties _
                Where TypeOf (oP) Is Company And _
                CType(oP, Company).Name.StartsWith(sSearchString)

        oInd = From oP In ERM.Parties _
                Where TypeOf (oP) Is Individual And _
                (CType(oP, Individual).FirstName.StartsWith(sSearchString) Or _
                CType(oP, Individual).LastName.StartsWith(sSearchString))

        rptIndividuals.DataSource = oInd
        rptCompanies.DataSource = oComp

        rptCompanies.DataBind()
        rptIndividuals.DataBind() 
```

两个转发器中都没有与返回的数据相关的任何内容，只是项目模板中的一个标签，显示每个查询返回了多少条记录。

必须绑定到父类型对我来说没有意义，如果不先转换为这种类型，我将无法访问与个人和公司关联的属性！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-27T14:28:22.560

`.ToArray ()`您可以在设置`DataSource`中继器的属性时使用来解决此问题...

```
rptCompanies.DataSource = oComp.ToArray ()
```

我不相信我知道它*为什么*会起作用 - 但我试过了，它似乎解决了问题！

# python - Python类型错误问题

> ID：320827
> 
> 赞同：3
> 
> 时间：2008-11-26T14:18:33.970
> 
> 标签：python, typeerror

我正在编写一个简单的程序来帮助为我参与的游戏生成订单。它属于我实际上并不需要的程序类别。但现在我已经开始了，我希望它能够工作。这一切都运行得很顺利，但我不知道如何阻止在中途发生的类型错误。这是代码；

```
status = 1

print "[b][u]magic[/u][/b]"

while status == 1:
    print " "
    print "would you like to:"
    print " "
    print "1) add another spell"
    print "2) end"
    print " "
    choice = input("Choose your option: ")
    print " "
    if choice == 1:
        name = raw_input("What is the spell called?")
        level = raw_input("What level of the spell are you trying to research?")
        print "What tier is the spell: "
        print " "
        print "1) low"
        print "2) mid"
        print "3) high"
        print " "
        tier = input("Choose your option: ")
        if tier == 1:
            materials = 1 + (level * 1)
            rp = 10 + (level * 5)
        elif tier == 2:
            materials = 2 + (level * 1.5)
            rp = 10 + (level * 15)
        elif tier == 3:
            materials = 5 + (level * 2)
            rp = 60 + (level * 40)
        print "research ", name, "to level ", level, "--- material cost = ",
                materials, "and research point cost =", rp
    elif choice == 2:
        status = 0 
```

任何人都可以帮忙吗？

*编辑*

我得到的错误是；

```
Traceback (most recent call last):
  File "C:\Users\Mike\Documents\python\magic orders", line 27, in <module>
    materials = 1 + (level * 1)
TypeError: unsupported operand type(s) for +: 'int' and 'str' 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-26T14:26:57.197

堆栈跟踪会有所帮助，但大概错误是：

```
materials = 1 + (level * 1) 
```

'level' 是一个字符串，你不能对字符串进行算术运算。Python 是一种动态类型语言，但不是弱类型语言。

```
level= raw_input('blah')
try:
    level= int(level)
except ValueError:
    # user put something non-numeric in, tell them off 
```

在程序的其他部分中，您正在使用 input()，它会将输入的字符串评估为 Python，因此“1”将为您提供数字 1。

但！这是非常危险的——想象一下如果用户输入“os.remove(filename)”而不是数字会发生什么。除非用户只是你并且你不在乎，否则永远不要使用 input()。它将在 Python 3.0 中消失（raw_input 的行为将被重命名为输入）。

# html - css：我应该限制使用通用选择器（*.classname vs a.classname）吗？

> ID：320841
> 
> 赞同：2
> 
> 时间：2008-11-26T14:21:23.823
> 
> 标签：html, css-selectors, css

我有一个关于 CSS 选择器的问题。

说我有以下html

```
<div class="message">
  <div class="messageheader">
    <div class='name'>A news story</div>
  </div>
</div> 
```

在css中，我可以像这样引用被`class`调用的`name`

```
div.message div.messageheader div.name {} 
```

或者

```
.name {} /* ie *.name{} */ 
```

**一种方式比另一种更好吗？**

我知道，如果我有一个名为 的类的附加“实例” `name`，即

```
<div class="message">
   <div class="messageheader">
      <div class='name'>A news story</div>
   </div>
</div>

<a class='name'>A news story</div> 
```

我可以`div.message div.messageheader div.name {}`用来引用第一个实例和`a.name {}`第二个实例，但我只对初始场景感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T14:26:23.407

如果您只对使用 .name 的初始场景感兴趣，就可以了。事实上，使用 CSS 的最佳实践是始终从更通用的开始，并在进行时集中注意力。

此外，除非您在不同的元素上有相同的类并希望使它们不同，否则不需要执行 div.* 之类的操作。如果你是嵌套类，那就更没必要了。.messageheader .name 将提供相同的定位。

记住 CSS 确实意味着级联。如果你让一切都变得如此有针对性，你将不得不重新定义每一个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T14:27:38.117

在我看来，这真的取决于你。一种方法更短，但另一种更精确，尽管依赖于标记保持大致相同。如果这是一个复杂的项目，那么也许更具体是正确的方法。否则，要放松一点。试着找到一个平衡点。

但请记住，在 CSS 中使用*级联是很重要的。*为什么要为不需要的东西添加类和 id？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-27T15:37:22.610

我同意 Jeremy B 的回答，但我想补充一点。

在您的示例中，您可以像这样引用名为 name 的类

```
div.message div.messageheader div.name {} 
```

或者

```
.name {} 
```

或者

```
div.name 
```

仅当您想**覆盖不太具体的规则**时，第一个才有意义。第二个是通用的。如您所说，第三个很好，如果您想**使用相同的类将不同的样式应用于不同的元素**（但在最后一种情况下，您很可能在分配类时做错了）。

我知道这只是一个例子，但在你的代码中我看到了太多的类。请记住，尽可能使用元素选择器是一件好事。也就是说，如果你想给那个 div 或者给一个 div 中的所有具有“messagehader”类的 div 赋予一些样式，你应该使用这个选择器：

```
div.messageheader div 
```

您还可以删除类消息头，并选择该 div：

```
div.message div 
```

等等。

显然，您将需要在您的页面中使用一些类，但不要给所有东西一个类。在很多情况下是没有必要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-26T14:32:50.587

一般来说，特异性是有利的，但在层级层次上比在单位层次上要多。我的意思是这`'div'`是多余的，并且可能具有破坏性（见下一段），但这`#foo .bar .baz`是一种很好的做法。

一般来说，我试图让人们从 OO 的角度来思考 CSS。如果您将样式定义为一个类，请确保它的行为类似于一个类。在这种情况下，断言`div.foo`而不是仅仅`.foo`有点像定义了一个子类。*如果那是你想要的，那*很好。始终考虑未来加价的潜在问题。理想情况下，您希望未来的代码能够准确地自动继承它所需要的东西，既不会被模糊的 CSS 断言污染，也不会因为过于具体的断言而丢失某些东西。

在实践中，我发现您通常喜欢以下形式：

```
#foo .bar {} 
```

仅为最通用的样式保留根级别类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-27T15:11:12.490

我发现同时使用这两种方法可以帮助你的 CSS 的逻辑组织。对要应用于该类的所有项目的属性使用通用的“.class”，对类的特定类型对象使用更具体的“p.class”。例如：

```
<style>
div.product {
float: left;
padding: 1em;
border: 1px solid blue;
}
.price { 
color: #009900;
}
p.price {
text-align: right;
}
</style>

<div class="product">
    <p>Lorem ipsum <span class="price">&pound;8.99</span> dolor sit amet.</p>
    <p class="price">&pound;5.99</p>
</div> 
```

您的问题的答案是，两种方法都不是更好，它们只是做不同的事情。一定要同时使用！利用不同选择器类型的强大功能是优秀 CSS 的一个重要方面，也是避免冗余的好方法。其他有用的方法是在一个对象上使用多个类（例如 <p class="someClass someOtherClass">），在对象上组合类和 id（它们不是互斥的）并使用 HTML 的父/子关系来避免尽可能“过度分类”（例如 ul.someClass li {} 而不是 ul li.someClass {}）。快乐编码！

# msbuild - 使用 nant 脚本运行 msbuild 来注册程序集有什么问题？

> ID：320845
> 
> 赞同：2
> 
> 时间：2008-11-26T14:21:59.313
> 
> 标签：msbuild, nant, com-interop, regasm

我正在从 NAnt 脚本运行 MSBuild。当它尝试为 注册我的一个程序集时`com interop`，脚本会像卡住一样停止。

如果我`regasm.exe`在程序集上运行，它会成功。即使我使用完全相同的参数从命令行运行 MSBuild 本身，它也会成功构建。

使用 NAnt 脚本运行 MSBuild 来注册程序集有什么问题？会不会是权限？

# ajax - 任何人都可以解释这个 Struts 2 AJAX 奇怪的刷新行为吗？

> ID：320852
> 
> 赞同：0
> 
> 时间：2008-11-26T14:25:38.963
> 
> 标签：ajax, dojo, struts2

我们的 JSP 中有以下代码（如下所列）。我们看到在`href`div中配置的操作`id=pwcercontainer`被调用了两次。无法弄清楚究竟是为什么。`sx:div label="Admin Record Deployment"`用普通的非 struts div替换包含会导致该操作仅被调用一次。我们在文档中看不到任何`sx:div`解释此行为的内容。

有谁知道这方面的事情或有类似的经历吗？

谢谢。NCF

```
<%@ page language="java" %>
<%@ taglib uri="/WEB-INF/tags/c.tld" prefix="c" %>
<%@ taglib prefix="s" uri="/struts-tags" %>
<%@ taglib uri="http://tiles.apache.org/tags-tiles" prefix="tiles" %>
<%@ taglib uri="/WEB-INF/tags/arcade.tld" prefix="arcade" %>
<%@ taglib prefix="sx" uri="/struts-dojo-tags" %>

<s:url id="pwcerAjax" action="pwcerajax" method="start" includeParams="none"/>
<s:url id="pwAjax" action="pwajax" method="start" includeParams="none"/>
<s:url id="listPendingDeploymentsLink" action="listPendingDeployments" namespace="/"/>
<s:url id="record" action="recordDeploymentFragment" method="showAdminRecord" namespace="/"/>

    <sx:div label="Admin Record Deployment" >

        <!-- Div where content will be displayed --> 
        <sx:div id="pwcercontainer" href="%{pwcerAjax}" showLoadingText="false" indicator="recordImage" preload="true">
        </sx:div>

        <div id="loadingContainer"><img id="recordImage" src="images/ajaxLoadingAnimation.gif" style="display:none" alt="loading animation"/></div>

    </sx:div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-07T10:58:28.010

我现在已经多次遇到这个问题，而且总是归结为我的错误。返回包含调用代码的片段：

```
<s:url id="getDeployQueue" action="deploymentQueue"  />

<sx:div href="%{#getDeployQueue}" formId="queueForm" executeScripts="true" autoStart="true" updateFreq="3000" preload="false" showLoadingText="false" listenTopics="refreshqueue" id="deploymentQueue" >

    THE CODE RETURNED in HERE CONTAINS THE s:url id="getDeployQueue" duplicating it and resulting in double calls

</sx:div> 
```

或者我一直在将另一个 ajax 标记的目标属性设置为 sx:div，而我确实应该使用 dojo 主题对其进行更新。

希望这可以帮助某人

尼尔

# .net - .net：线程调试

> ID：320856
> 
> 赞同：2
> 
> 时间：2008-11-26T14:26:06.387
> 
> 标签：.net, multithreading

有哪些技术可用于在 .net 环境中调试多线程问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T14:47:47.030

多线程代码的调试和单元测试是出了名的困难，我不相信有任何经过验证的、真正的解决方案来调试多线程。

但是，通过从函数式编程语言中记下一些笔记，您可以更轻松地编写多线程代码：

**使用不可变数据结构：**

用 F#、Haskell、Erlang、OCaml 等编写多线程代码非常容易，因为这些语言中的数据结构和值是不可变的，这意味着一旦分配了变量，就无法修改它。本质上，这意味着每个变量都被声明为常量，并且没有像 List.Add 或 Dictionary.Add 这样的方法来改变集合。

不可变性意味着在声明后没有任何内容可以改变，因此您永远不必担心一个线程改变另一个线程使用的共享状态。既然如此，您就不必在代码中使用锁或互斥锁，并且您已经消除了与竞争条件和死锁相关的一整类线程错误。

**依靠消息传递在进程之间共享数据** 阅读这些博客文章：

*   [http://www.defmacro.org/ramblings/concurrency.html](http://www.defmacro.org/ramblings/concurrency.html)
*   [http://en.wikipedia.org/wiki/Erlang_(programming_language)#Concurrency_and_distribution_orientation_language](http://en.wikipedia.org/wiki/Erlang_(programming_language)#Concurrency_and_distribution_oriented_language)

Erlang 是一门非凡的语言，特别是因为它的并发模型可以扩展到 1000 和 1000 台计算机。它不是让线程访问共享状态，而是依靠消息传递将信息从一个线程发送到另一个线程。

**依靠频道同步线程** 这是一个关于 Newsqueak 语言的精彩视频：http: [//video.google.com/videoplay ?docid=810232012617965344](http://video.google.com/videoplay?docid=810232012617965344)

它描述了 Newsqueak 有趣的并发方法。它使用称为“通道”的对象将数据从一个线程传送到另一个线程。很容易找到通道的 C# 实现。

请记住，通过研究如何用其他语言解决相同的问题，您可以学到很多关于在 .NET 中解决问题的知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-11-15T16:14:23.267

多线程错误的来源之一是未能锁定来自多个线程的数据。对您的应用程序进行压力测试是揭示其中一些问题的一种技术。与更高频率的数据竞争的线程越多，发现问题的机会就越大。

发现您的数据已因未受保护的访问而损坏可能很棘手。在出现生病症状之前，您的应用程序可能会跛行一段时间。断言可以帮助解决这个问题。它们使您有更好的机会在腐败发生后很快发现它。

另一种主要类型的多线程错误是死锁。您可以用来查看您的应用程序是否存在死锁的一种技术是使用锁级别检查。锁定级别检查不会等待发现死锁。它会在运行时提醒您存在死锁的可能性。

锁级别检查的工作方式如下：假设您有 3 个锁 - A、B 和 C。您分别为它们指定级别 1、2 和 3。如果一个线程总是在一个更高级别的锁之前声明一个较低级别的锁，那么您将永远不会遇到一个线程可以声明 A 然后 B 而另一个声明 B 然后 A 的情况。要实现锁定级别检查，请给每个锁对象一个级别。使用线程本地存储，以便线程知道它上次要求的锁定级别。实际上在线程本地存储中有一个堆栈对象，这样当一个锁被释放时，你就知道前一个锁的级别。一些应用程序声称他们已经拥有锁。那是安全的。为了在线程锁检查器中实现这一点，您需要扫描锁堆栈以查看它是否已被声明。

所有这些锁定级别检查都会造成性能损失。因此，它可能仅适用于调试或特殊构建。

# c# - System.Web.httpApplicationFactory 类是什么？我在我的调用堆栈中看到它，但在框架中找不到它

> ID：320861
> 
> 赞同：2
> 
> 时间：2008-11-26T14:26:35.013
> 
> 标签：c#, asp.net, events, global-asax

我有一个`Application`我的 global.asax 继承自的类。该类有这个方法：

```
protected void Application_Start(object sender, EventArgs e)
{
    // ...
} 
```

据我了解，这基本上是一个自动添加到事件中的事件处理程序（基于方法名称 [*]）。我试图找出究竟是什么事件，所以我在方法中放置了一个断点并检查了调用堆栈：

> Foo.DLL!Foo.Application.Application_Start（对象发送者 = {System.Web.HttpApplicationFactory}，System.EventArgs e = {System.EventArgs}）

发件人是`System.Web.HttpApplicationFactory`，但我无法使用 Visual Studio 2008 中的对象浏览器或 MSDN 库网站找到该类。

我在哪里可以找到有关此课程的更多信息？

谢谢！

* * *

[*] 将其与`Application_BeginRequest(object sender, EventArgs e)`作为处理程序添加到类的`BeginRequest`事件的方法进行比较`System.Web.HttpApplication`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-26T14:42:41.377

HttpApplicationFactory 是 System.Web.dll 中定义的内部类。如果您有兴趣，可以在 .NET Reflector 中查看。

内部意味着它在定义它的dll之外通常不可见，因此您不能在自己的代码中使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T15:06:06.697

就像 Rune 说的，`HttpApplicationFactory`是在 System.Web.dll 中定义的一个内部类。

它所做的是创建应用程序并启动它，基本上是管理 Web 应用程序的运行时。

# monitoring - 跟踪或通知数据库更改 - 主要是插入和更新

> ID：320864
> 
> 赞同：0
> 
> 时间：2008-11-26T14:27:00.240
> 
> 标签：monitoring, rdbms, real-time

每当在数据库中插入或更新记录时，我如何跟踪或获得通知？每当数据库发生此类更改时，我想以近乎实时的方式通知外部应用程序更改。是否有独立于 DBMS 和独立于应用程序编程语言的方法来做到这一点？如果不是，那么特别是 MS Access 和 MS SQL Server 是否有可能？我当然希望避免对 DB 进行连续轮询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T14:43:40.283

我认为最新版本的 Microsoft SQL Server 允许您根据服务器条件和事件在 .NET 代码中引发事件。我没有尝试过，也没有听说过任何“独立于 DBMS”的方式（无需每 X 毫秒轮询一次 DB）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T14:45:24.680

使用 SQL Server，可以在 SQL Server 本身中加载一个 DLL，并使用扩展存储过程从中调用方法。然后，DLL 可以通知其他应用程序——通常是通过 TCP 套接字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-06T18:59:25.227

使用 MS-Access，我使用主表中的字段来跟踪记录更改或记录添加，这些字段存储用户名和创建或更新记录的日期。

您需要使用windows API 来记录用户名，通常在打开总机窗体时运行。

我正在挖掘寻找跟踪特定变化的方法。我的数据库用于项目管理。我想跟踪具体更改的内容，而不仅仅是我现在拥有的人员和时间。

我认为这符合原始问题的要求。稍后我可以添加读取用户名的 Windows API。

Private Sub Form_BeforeInsert(Cancel As Integer) Me!UserCreated = UCase(CurrentUser()) Me!DateCreated = Now() End Sub

Private Sub Form_BeforeUpdate(Cancel As Integer) Me!DateModified = Now() Me!UserModified = UCase(CurrentUser()) End Sub

——迈克

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-24T13:41:00.897

要使用 SQL Server 执行此操作，您可以使用通知服务 - 编写一个 dll 订阅来自数据库的通知以获取您可以通过某种方式处理的数据更新。

但是，MS 表示他们正在[从 SQL Server 2008 中删除它](http://blog.desktopalert.net/blogs/da_blog/archive/2008/02/16/25.aspx)。

Oracle 也有类似的东西（尽管他们倾向于保留他们的技术），但我还没有看到任何与数据库无关的东西。

# objective-c - 如何为 Interface Builder 插件指定绑定？

> ID：320871
> 
> 赞同：3
> 
> 时间：2008-11-26T14:27:40.567
> 
> 标签：objective-c, cocoa, macos, interface-builder

我正在为 NSView 子类创建一个 Interface Builder 插件。我一直在关注[Interface Builder Plug-in Programming Guide](http://developer.apple.com/documentation/DeveloperTools/Conceptual/IBPlugInGuide/Introduction/chapter_1_section_1.html)，但它并没有回答我所有的问题。我的班级有一个 NSString 属性和 4 个 NSColor 属性，我想在设计时为其创建绑定。

我无法弄清楚插件项目中在哪里指定了绑定。文档指出 Inspector Object 仅用于创建 Attribute Inspector。类描述文件 (.classdescription) 列出了出口和动作，但不列出绑定。

我在哪里为我的班级指定绑定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-26T14:38:23.260

在您的类初始化程序中，调用`+ (void)exposeBinding:(NSString *)binding`如下：

```
+ (void)initialize
{
    [self exposeBinding:@"someProperty"];
}
```

您可能还想按如下方式指定值类：

```
- (Class)valueClassForBinding:(NSString *)binding
{
    if ([binding isEqual:@"someProperty"])
    {
        return [NSNumber class];
    }
    else
    {
        return [super valueClassForBinding:binding];
    }
}
```

看看[这篇 CocoaDev 文章](http://www.cocoadev.com/index.pl?NSObjectsDefaultBindImplementation)和 Apple 的[NSKeyValueBindingCreation 协议参考](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Protocols/NSKeyValueBindingCreation_Protocol/Reference/Reference.html)

# visual-sourcesafe - VSS 项目，它们是否必须设置为“只读”或者我可以使文件可写？

> ID：320883
> 
> 赞同：2
> 
> 时间：2008-11-26T14:30:31.590
> 
> 标签：visual-sourcesafe

在我的 VSS 项目的工作文件夹中，是否可以将所有文件/文件夹设为可写？即不是只读的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T14:33:10.523

没关系，但你为什么要这样做？

只读状态是一种保障，因此您无法更改未锁定的代码。避免在不久的将来可能出现的合并问题。

**编辑：**好的，您在评论中说构建失败是因为文件不可写。如果是这样，那就很奇怪了。特别是如果错误消息说明无法访问该文件。它可能仍被另一个进程锁定，并且更改只读标志删除了锁定（或者它只需要延迟）。但据我所知，编译器在只读源文件方面确实表现出色。

可能出现的问题：

*   网络驱动器上的文件。如果网络很慢，编译器可能无法访问该文件。
*   文件仍然在（另一个）编辑器中打开。通常这不应该是一个问题，但你可能永远不会知道。
*   在构建过程中会生成一些代码文件。在这种情况下，它们不属于版本系统，它们的源（如果有的话）属于。

# c# - C#编译时将日期放入程序中

> ID：320887
> 
> 赞同：6
> 
> 时间：2008-11-26T14:32:11.447
> 
> 标签：c#

我正在考虑如何创建一个仅在 X 时间内有效的程序（在 C# 应用程序中）。

我在想的是，您将在程序中将当前日期作为常量，它会检查它是否比该日期大 X 天。自然，我不想将日期或 X 存储在程序之外，因为它可以被篡改。

我也不想定期手动更改它并重新编译和部署它。那么有没有办法将变量设置为编译时的当前日期？

我可以有一个批处理文件来编译它并将新的 exe 部署到分发服务器。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-26T14:35:38.133

预编译指令是您的关键。您可以在应用程序中创建一个常量并在编译时设置它。

但是，请确保您混淆了您的代码。有人可以轻松拆卸它并篡改常数。另一种解决方案是让您的软件“打电话回家”进行自我注册。这样，注册信息就会存储在您的服务器上，而不是他们的机器上。也有第三方软件包可以执行与您正在寻找的相同的安全性，但它们很**昂贵**！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-26T14:38:45.253

查看项目中 Properties 文件夹中的 AssemblyInfo.cs 文件：

```
// You can specify all the values or you can default the Build and Revision Numbers 
// by using the '*' as shown below:
// [assembly: AssemblyVersion("1.0.*")]
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")] 
```

将其更改为：

```
[assembly: AssemblyVersion("1.0.*")]
[assembly: AssemblyFileVersion("1.0.0.0")] 
```

然后，在程序集的其他地方，使用这个：

```
System.Version MyVersion = System.Reflection.Assembly.GetExecutingAssembly().GetName().Version;

// MyVersion.Build = days after 2000-01-01
// MyVersion.Revision*2 = seconds after 0-hour  (NEVER daylight saving time)
DateTime MyTime = new DateTime(2000, 1, 1).AddDays(MyVersion.Build).AddSeconds(MyVersion.Revision * 2);
return string.Format("Version:{0}  Compiled:{1:s}", MyVersion, MyTime); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-26T14:53:31.997

我会选择“电话回家”的变体。并让这个电话变得重要。;) 我的意思是，您的程序中的一些重要功能（可能是一些计算？）将在服务器上进行。因此，如果用户反编译程序并删除该“回电”，它将使程序无用。

我知道并非所有程序都具有使这成为可能的规范，但通常比您想象的要多。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-26T14:42:33.593

在您的自动构建过程中（您确实使用了自动构建过程，对吗？），有一个简单的应用程序，它生成一个单行 C# 类

```
 public struct TimeLimit { public DateTime Date = new DateTime(2009,1,1); } 
```

自动更改日期并编译。

然后只需在您的应用程序中参考 TimeLimit.Date 即可。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-07-19T14:32:09.903

我知道这是一个 3 岁的问题，但只是为了增加我的 2 美分。我们使用 James Curran 建议的结构中硬编码的“DateLimit”。

但我们也使用相同的“日期”作为“加密”和“解密”（更多代码和解码）所有字符串、标签、消息的简单密钥。如果有些人（我们称他们为作弊者）想要更改过期日期，他们将不得不通过整个程序集重新正确输入所有这些字符串以适应新的过期日期。这并不完美，但我们的成本现在接近于零，而作弊者的成本很高。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-12-02T20:05:45.200

我建议你将日期放在一个单独的、强命名的程序集中——至少恶意用户会发现很难反汇编、编辑和让你的程序使用它。有没有办法让两个程序集根据强名称相互验证？

我们将其用作我们其中一个组件的许可控制的第一步。如果调用程序集与受许可证控制的程序集具有相同的指纹，我们假设它正在我们自己的软件中使用并且许可被绕过。如果调用程序集有不同的指纹或根本没有打印，则执行正常的许可证检查。当我想到它时，我们的用户可能可以在没有强命名和绕过许可的情况下反汇编、编译。但是话又说回来，我们所有的程序集都是作为 x86 而不是 CIL 交付的——这会改变什么吗？

我们的经验是，如果您与企业客户打交道，没有人可以承担篡改您的东西的麻烦，尤其是因为存在被抓的风险。有一点很长的路要走，我们当前的许可解决方案已经过时了（该软件包包括 VC5 的示例！）但到目前为止已经是一个足够高的障碍。另一方面，对于消费者，我可以想象这是一个更大的威胁。

我最初的建议似乎产生了更多可以回答的问题——毕竟也许没有那么有用。:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-26T14:35:22.500

.Net 的问题在于它很容易反编译和更改您想要使用的日期是恒定的。您可能需要考虑其他事情。

您可以将其写入注册表，但随后人们将编辑此值。

它们不是一个完美的解决方案，但拥有一个通过外部（Web）服务器验证的帐户是个好主意。

# winapi - WinAPI 中的 HANDLE 和 HFILE 有什么区别？

> ID：320893
> 
> 赞同：5
> 
> 时间：2008-11-26T14:33:43.207
> 
> 标签：winapi, file

WinAPI OpenFile 函数返回 HFILE，GetFileTime 实例需要 HANDLE。当我用 (HANDLE)some_hFile 喂它时，它似乎工作正常。这种类型有什么区别，还是其中一种只是初级的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-26T14:39:10.323

OpenFile 是一个 16 位 Windows 向后兼容函数。CreateFile 是打开文件的函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-26T14:40:09.137

如果函数成功，则 HFILE 是文件句柄。如果不是，那么它是一个 HFILE_ERROR 常量（大概是 -1）。关键是它不能是错误的 HANDLE，因此它们返回的东西可以是 HANDLE 或错误值。

另请参阅@Barry 的建议。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-26T14:52:56.973

为了回答您的问题，HANDLE 只是一个定义为 PVOID 的无符号 32 位数字。这是一个通用句柄。HFILE 是一个专门的句柄，虽然定义为有符号的 32 位数字以便能够获得值 -1。
还有其他专门的句柄，如 HACCEL、HBITMAP、HINSTANCE 等，都定义为对 HANDLE 的依赖。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-26T14:54:06.143

几年前，`HANDLES`是 16 位`int`的。Windows 中所有的句柄都是`HANDLES`. 然后有人意识到一个文件`HANDLE`和一个窗口并不完全一样`HANDLE`，如果它们的定义不同，比如`HFILE`和`HWND`，那么开发人员可能不会不小心互换它们。（但是他们都被编入了`typedef`'ed to `int`）。

再后来，有人意识到，如果它们被完全不同地定义……比如说：

```
typedef struct _hfile {} * HFILE;
typedef struct _hwnd {} * HWND; 
```

那么如果您使用一个代替另一个，编译器本身就会抱怨，即使实际上每个只是一个普通的旧 16 位（最终是 32 位）`int`值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-26T14:40:32.177

OpenFile 如果成功则返回一个文件句柄，如果失败则返回一个 HFILE_ERROR。

# ms-access - 在 Access 2007 中链接 ODBC 表

> ID：320894
> 
> 赞同：1
> 
> 时间：2008-11-26T14:33:56.137
> 
> 标签：ms-access, odbc, ms-access-2007

我有一个 Access 2002 应用程序，它通过 ODBC 将 Oracle 表与以下代码链接：

```
Set HRSWsp = CreateWorkspace("CONNODBC", "", "", dbUseODBC)
Set HRSConn = HRSWsp.OpenConnection("HRSCONN", dbDriverPrompt, , "ODBC;")
DoCmd.TransferDatabase acLink, "Database ODBC", HRSConn.Connect, acTable, "SCHEMA.TABLE", "TABLE", False, True 
```

不幸的是，Access 2007 不再接受这种语法，说不再支持 ODBCDirect（运行时错误 3847）并建议使用 ADO 而不是 DAO。有人可以告诉我如何修改此代码以满足 Access 2007 的要求吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-27T08:26:29.203

我发现我可以通过删除前两个语句并以这种方式修改第三个语句以非常简单的方式解决我的问题：

```
DoCmd.TransferDatabase acLink, "ODBC Database", "ODBC;DRIVER=Microsoft ODBC for Oracle;SERVER=myserver;UID=myuser;PWD=mypassword", acTable, "SCHEMA.TABLE", "TABLE", False, True 
```

这样，表格将被链接而无需提示任何内容。相反，如果我将连接字符串保留为简单的“ODBC”，Access 将要求指定 odbc 连接和其他缺少的参数，从而获得我尝试使用前面的语句执行的相同操作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2008-11-27T02:37:09.190

试试这个：

```
Dim tbl As New ADOX.Table
Dim cat As New ADOX.Catalog

cat.ActiveConnection = _
    "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=[x:\your_access_db.mdb];Jet OLEDB:Engine Type=4"

tbl.NAME = "[Access_table_name]"

Set tbl.ParentCatalog = cat

tbl.Properties("Jet OLEDB:Create Link") = True
tbl.Properties("Jet OLEDB:Link Provider String") = "ODBC;Driver={Microsoft ODBC For Oracle};Server=OracleServerName;Uid=[user];Pwd=[password];"
tbl.Properties("Jet OLEDB:Cache Link Name/Password") = True
tbl.Properties("Jet OLEDB:Remote Table Name") = "[Oracle_Schema].[Table]"

cat.Tables.Append tbl
cat.ActiveConnection.Close 
```

将括号 ( `[]`) 中的文本替换为您的信息。

# linq - 使用 Linq 创建交叉表结果

> ID：320895
> 
> 赞同：9
> 
> 时间：2008-11-26T14:34:29.897
> 
> 标签：linq, crosstab

> **可能重复：**
> [是否可以使用 LINQ 透视数据？](https://stackoverflow.com/questions/167304/is-it-possible-to-pivot-data-using-linq)

我想知道是否可以使用 Linq 创建交叉表样式结果。我有一些如下所示的数据：

```
 var list = new[]
    {
        new {GroupId = 1, Country = "UK", Value = 10},
        new {GroupId = 1, Country = "FR", Value = 12},
        new {GroupId = 1, Country = "US", Value = 18},
        new {GroupId = 2, Country = "UK", Value = 54},
        new {GroupId = 2, Country = "FR", Value = 55},
        new {GroupId = 2, Country = "UK", Value = 56}
    }; 
```

我正在尝试输出到中继器控件，如下所示：

```
GroupId.....UK.....FR.....US
1...........10.....12.....18
2...........54.....55.....56 
```

它是导致我的问题的动态列。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-26T15:09:52.337

您需要一个运行时类来保存这些运行时结果。xml呢？

```
XElement result = new XElement("result",
  list.GroupBy(i => i.GroupId)
  .Select(g =>
    new XElement("Group", new XAttribute("GroupID", g.Key),
      g.Select(i => new XAttribute(i.Country, i.Value))
    )
  )
); 
```

您是否期望每个结果单元格有多个记录？如果是这样，则需要在其中进行一些求和（以及更多分组）。

（这个答案是概念证明，而不是最终结果。有几个问题需要解决，例如：列的排序、缺少的单元格等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T14:59:41.563

快速搜索后，您可能想查看 System.Reflection.Emit 中的 ModuleBuilder、TypeBuilder 和 FieldBuilder 类。它们允许您在运行时动态创建一个类。除此之外，您需要对对象进行分组，然后对从 LINQ 获得的分层结果进行一些处理。我不确定在运行时动态创建匿名类型字段的方法，这听起来像是需要发生的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T18:33:12.857

您可以尝试使用 MS 提供的动态 linq 库。它们有许多以字符串为参数的扩展方法的重载。他们还有一个表达式解析器，它接受一个字符串并发出一个 lambda 表达式。您应该能够使用它们创建动态选择。

不过，请注意，您最终会得到一个非泛型 IQueryable 而不是泛型 IQueryable，因此您对结果的处理方式有些限制，并且您放弃了一点类型安全性，但这可能是在您的应用程序中确定...

动态 linq 的链接是

[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

有一个链接，您可以在其中下载动态库的源代码，以及如何使用它的一些很好的说明。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-10-07T09:05:49.763

```
var labResults = from lab in CoreLabResults
                 where lab.Patient == 8
                 group lab by new { lab.Patient, lab.TestNo, lab.CollectedDate }
                     into labtests
                     select new
                     {
                         labtests.Key.Patient,
                         labtests.Key.TestNo,
                         labtests.Key.CollectedDate,
                         MCHC = labtests.Where(lab => lab.TestVar == "MCHC").FirstOrDefault().Result,
                         LYABS = labtests.Where(lab => lab.TestVar == "LYABS").FirstOrDefault().Result,
                         TotalTests = labtests.Count()
                     } 
```

# asp.net-mvc - ASP.NET MVC Beta 1 - 我现有的用户控件会在我的视图中按原样工作吗？

> ID：320900
> 
> 赞同：0
> 
> 时间：2008-11-26T14:36:23.263
> 
> 标签：asp.net-mvc, view, user-controls, pageload

我知道您现在可以创建特定于 MVC 的用户控件，但是我现有的标准 ASCX 用户控件是否可以在 MVC 视图中工作？

我知道 MVC 页面具有完全不同的生命周期，但是例如，当控件位于视图中时，会正常调用 Page_Load 方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T14:58:38.990

如果您的标准 ASCX 控件没有控件事件。MVC 中没有视图状态，因此必须更改。

正常的页面生命周期仍在执行。例如页面加载、初始化、预渲染等。主要的是视图状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T16:54:04.483

您可以实例化预构建的控件并调用它们的 RenderControl() 方法，以便在 MVC 视图中使用它们。

Stackoverflow 为 reCAPTCHA 控件渲染执行此操作。

此外，验证部分映射到路由 /captcha/post ，在该路由中实例化控件并调用 Validate() 方法。

所以，基本上是的，你可以重用你的控件，但你必须适应 MVC 的架构。

# mysql - MySQL 数据库大小

> ID：320902
> 
> 赞同：3
> 
> 时间：2008-11-26T14:36:29.423
> 
> 标签：mysql, database

Microsoft SQL Server 有一个很好的特性，它允许数据库在满时自动扩展。在 MySQL 中，我理解数据库其实就是一个目录，里面有一堆文件，对应着各种对象。这是否意味着数据库大小的概念不适用，并且 MySQL 数据库可以在可用磁盘空间允许的情况下尽可能大，而无需任何额外的关注？如果是，这种行为在不同的存储引擎中是否相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-26T16:00:45.743

这取决于您使用的引擎。可以在[此处](http://dev.mysql.com/doc/refman/5.0/en/storage-engines.html)找到 MySQL 附带的列表。

MyISAM 表每个表都有一个文件。此文件可以增长到您的文件系统的限制。随着表变大，您必须对其进行调整，因为存在限制默认大小的索引和数据大小优化。此外，这个[MyISAM 文档](http://dev.mysql.com/doc/refman/5.0/en/myisam-storage-engine.html)页面说：

> MyISAM 表中有 2^32 (~4.295E+09) 行的限制。如果您使用 --with-big-tables 选项构建 MySQL，则行限制将增加到 (2^32)^2 (1.844E+19) 行。请参见第 2.16.2 节，“典型配置选项”。Unix 和 Linux 的二进制发行版是使用此选项构建的。

InnoDB 可以在 3 种不同的模式下运行：使用 innodb 表文件、使用整个磁盘作为表文件或使用`innodb_file_per_table`.

*   表文件是根据您的 MySQL 实例预先创建的。您通常会创建大量空间并对其进行监控。当它开始填满时，您需要配置另一个文件并重新启动服务器。您也可以将其设置为`autoextend`，这样当它开始填满时，它将为最后一个表文件添加一块空间。我通常不使用此功能，因为您永远不知道何时会因扩展表格而受到性能影响。[此页面](http://dev.mysql.com/doc/refman/5.0/en/innodb-configuration.html)讨论配置它。
*   我从来没有将整个磁盘用作表文件，但可以做到。我相信您不是指向文件，而是将 InnoDB 表文件指向未格式化、未安装的设备。
*   `innodb_file_per_table`使 InnoDB 表的行为类似于 MyISAM 表。每个表都有自己的表文件。上次我使用它时，如果您从中删除行，表文件不会缩小。删除或更改表时，文件会调整大小。

存档引擎是一个 gzip 压缩的 MyISAM 表。

内存表根本不使用磁盘。实际上，当服务器重新启动时，所有数据都会丢失。

合并表就像一个穷人对 MyISAM 表的分区。它会导致查询一堆相同的表，就好像有一个表一样。除了 FRM 表定义之外，除了 MyISAM 文件之外，不存在任何文件。

CSV 表是 CSV 文件的包装器。通常的文件系统限制适用于此。它们并不太快，因为它们不能有索引。

我认为没有人再使用 BDB 了。至少，我从未使用过它。它使用 Berkly 数据库作为后端。我不熟悉它的限制。

联合表用于连接和查询其他数据库服务器上的表。同样，只有一个 FRM 文件。

Blackhole 引擎不会在本地存储任何内容。它主要用于创建复制日志而不是实际的数据存储，因为没有数据存储:)

[MySQL Cluster](http://dev.mysql.com/doc/refman/5.0/en/mysql-cluster.html)完全不同：它将几乎所有内容都存储在内存中（最近的版本允许磁盘存储）并且与所有其他引擎非常不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T14:44:15.243

您所描述的对于 MyISAM 表来说大致是正确的。对于 InnoDB 表，情况有所不同，并且更类似于其他 DBMS 所做的：一个（或几个）具有复杂内部结构的大文件，用于整个服务器。要对其进行优化，您可以将整个磁盘（或分区）用作文件。（至少在类unix系统中，一切都是文件）

# html - 伪类和文本装饰的问题：IE6 中的下划线

> ID：320906
> 
> 赞同：0
> 
> 时间：2008-11-26T14:37:40.187
> 
> 标签：html, css, browser, internet-explorer-6

我正在使用类似于以下内容的一段 html：-

```
<a class="somePseudoClass" title="Blablabla">Something</a> 
```

我在导入的文件中有以下 css。

```
a.somePseudoClass:hover     {color: #000000; text-decoration: underline;} 
```

这在 Firefox 2.0 中完美运行，但在 IE6 中下划线无法显示。

有谁知道解决方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-26T14:42:02.237

看起来你需要一个 href 属性才能使其工作......

```
a.somePseudoClass         {text-decoration: none;}
a.somePseudoClass:hover   {color: #000000; text-decoration: underline;}
<a class="somePseudoClass" title="Blablabla" href="#" onclick="return false;">Something</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-09-11T09:07:34.230

在 IE 6 中：

```
div#nav a {
   text-decoration:none;
} 
```

`a:link`在 IE 6 中没有定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-14T07:55:48.337

我刚刚用 ie6 得到了这个，并通过谷歌搜索在这里找到了这个 mssage。我的问题是行高设置为与字体高度相同。FF、Chrome、Safari 和 ie8 都显示了下划线，但 ie6 将其截断，因此无需搜索覆盖的 css 元素或任何会找到它的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T14:40:41.740

这应该可行，但这取决于您拥有的其他 CSS 声明（之前和之后）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-26T14:44:08.567

您如何首先禁用下划线？也许那是压倒一切的。

如果您仅从页面上的示例开始，并使用`text-decoration: underline`，它似乎工作正常。这不是 IE，而是您页面上的其他内容。

# sql - 重构“极端”SQL 查询

> ID：320919
> 
> 赞同：3
> 
> 时间：2008-11-26T14:41:31.083
> 
> 标签：sql, sql-server-2005, refactoring

我有一个业务用户尝试编写自己的 SQL 查询以获取项目统计报告（例如任务数、里程碑等）。查询开始声明一个包含 80 多列的临时表。然后有近 70 条 UPDATE 语句对临时表超过近 500 行代码，每行都包含自己的少量业务规则。它以临时表中的 SELECT * 结束。

由于时间限制和“其他因素”，它被匆忙投入生产，现在我的团队坚持支持它。性能令人震惊，尽管由于进行了一些整理，它相当容易阅读和理解（尽管代码味道很讨厌）。

我们应该关注哪些关键领域以加快速度并遵循良好做法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-26T16:34:05.817

首先，如果这不会导致业务问题，那么就让它直到成为问题为止。等到它成为一个问题，然后解决一切。

当您决定修复它时，请检查是否有一个语句导致您的大部分速度问题......隔离并修复它。

如果速度问题出现在所有语句上，并且您可以将它们全部组合到一个 SELECT 中，这可能会节省您的时间。我曾经将这样的 proc（没有那么多更新）转换为 SELECT，运行它的时间从 3 多分钟缩短到 3 秒以下（不，我简直不敢相信）。顺便说一句，如果某些数据来自链接服务器，请不要尝试这样做。

如果您出于某种原因不想或不能这样做，那么您可能需要调整现有的过程。这里有一些我会看的东西：

1.  如果要在临时表上创建索引，请等到初始 INSERT 之后填充它。

2.  调整您的初始 INSERT 以插入尽可能多的列。可能有一些更新可以通过这样做来消除。

3.  在运行更新之前索引临时表。在更新语句之前，不要在更新语句所针对的任何列上创建索引。

4.  如果您的表格和分组允许，则对您的更新进行分组。70 次更新对于 80 列来说是相当多的，听起来可能有机会这样做。

祝你好运

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-26T14:51:03.747

我要做的第一件事是检查以确保定期运行活动的索引维护作业。如果没有，请重建所有现有索引，或者如果不可能，至少更新统计信息。

我要做的第二件事是设置跟踪（如此[处](https://stackoverflow.com/questions/257906/ms-sql-server-2008-how-can-i-log-and-find-the-most-expensive-queries#257944)所述）并找出导致读取次数最多的语句。

然后我会在 SSMS 中运行“显示实际执行计划”，并用跟踪记录结果。由此您应该能够确定是否缺少可以提高性能的索引。

编辑：如果您要投反对票，请留言说明原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-26T15:04:39.010

就像任何重构一样，确保您有一种自动化的方式来在每次更改后验证您的重构（您可以使用查询来自己编写此代码，该查询根据已知的良好基线检查开发输出）。这样，您始终匹配已知的良好数据。当您进入决定是否切换到流程的新版本并希望并行运行几次迭代以确保正确性的阶段时，这将使您对方法的正确性有高度的信心。

我还喜欢记录所有测试批次和批次中进程的运行时间，这样我就可以判断批次中的某个特定进程是否在某个时间点受到了不利影响。我可以获得流程的平均时间，并查看改进趋势或发现潜在问题。这也让我可以确定批次中可以做出最大改进的低垂果实。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-22T18:57:20.133

> 然后有近 70 条 UPDATE 语句对临时表超过近 500 行代码，每行都包含自己的少量业务规则。它以临时表中的 SELECT * 结束。

实际上，这听起来可以很好地遵循和理解，每个更新语句都对具有特定目的和一组业务规则的表执行一件事。我认为维护 500 行代码的过程，其中包含一个或几个执行“一切”的选择语句，使用 15 个左右的连接构建，以及散布在各处的案例语句等，维护起来要困难得多。虽然它会带来更好的性能..

SQL 有点进退两难，编写清晰简洁的代码（使用多次更新、创建函数等）似乎总是会对性能产生很大的负面影响。试图一次完成所有事情，这在其他编程语言中被认为是不好的做法，这似乎是面向集合的语言的核心。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-26T14:45:34.540

好吧，既然你告诉我们的关于这个存储过程的唯一事情是它有一个 80+ 列的临时表，我唯一可以推荐的是删除那个表，然后重写其余的表以消除对它的需要。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-26T14:52:51.997

如果这是一个生成报告的存储过程，它的运行频率是多少？如果只需要每天运行一次并且在夜间运行，那么性能有多大问题？

如果不是，我建议您在选择重写它时要小心，因为您可能会弄乱您的数字。

此外，这听起来像是应该被拉出到 SSIS 包中的那种东西，它会用结果建立一个新的永久表，因此它只需要运行一次。

希望这是有道理的

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-26T16:15:47.417

您可以尝试的一件事是用表变量替换临时表。有时这会更快，有时则不是，您将不得不尝试一下。

查看 70 条更新语句。有可能将它们中的任何一个结合起来吗？如果写作者不使用 CASE 语句，则可能会使用更少的语句。

其他显而易见的事情 - 消除任何游标，将任何子查询更改为连接到表或派生表。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-07-10T20:07:45.763

也许重写。一种硬件解决方案是确保您的数据库临时表位于“快速”驱动器上，可能是固态磁盘 (SSD)，或者可以全部在内存中进行管理。

我的猜测是这个“解决方案”是由一个掌握并依赖电子表格的人开发的，一个可能对“规范化”数据库不太了解的人——如何构建和填充表格以保留用于报告目的的数据，这也许 BI 商业智能软件可以在复杂的情况下使用并且具有适应性。

您没有说“在哪里”运行更新过程。更新过程是否作为 SQL 脚本从单独的计算机（桌面）针对数据所在的服务器运行？这种方法可能会产生重大的瓶颈和开销。如果是这样，请考虑将整个更新过程作为本地作业直接在服务器上运行，作为编译的存储过程，绕过网络和（多个）游标管理开销。它可以有一个预定的运行时间和一个受控的优先级，在非高峰业务数据使用时间完成。

评估更新语句序列真正需要“提交”语句的频率......节省一堆提交行可以显着提高整体更新时间。数据库客户端驱动程序软件中可能有一些设置可以产生显着差异。

是否可以将用于更新条件的查询分解为静态“视图”，进而可以在多个更新语句之间共享？视图可以将频繁访问的数据/查询行保存在内存中。在确定提交最佳之前可以挂起多少更新数据时，可能会进行性能调整。

It might be worth evaluating whether Triggers could be used to replace the batch job update sequence. You don't say from how many tables the data used comes from...that might help with decision making. I don't know if you have the option of adding triggers to the database tables from which the data is gathered. If so, adding a few triggers to a number of tables wouldn't really degrade overall system performance much, but might save a big wad of time on that update process. You could try replacing the update statements one at a time with triggers and see if the results are the same as before. Create a similar temp table, based on the same update process, then carefully test whether triggers feeding updates to the temp table could replace individual update statements. Perhaps you may have a sort of 'Data Warehouse' application. It might be useful to review how to set up a 'star' schema of tables to retain summarized business data for reporting.

Creating a comprehensive and cached 'view' which updates via the queries once per day, reflecting the updates might be another approach to explore.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-26T14:46:01.450

您应该获得一个工具，该工具可以让您获得应用程序将运行的所有查询的解释计划。对于 SQL 繁重的应用程序来说，这是提高性能的最佳选择。如果您阅读解释计划告诉您的内容并做出反应。如果您在 Oracle 上，我们过去使用的是 Qwest 的 TOAD（？）我想。这是一个很棒的工具。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-26T14:58:38.537

我建议查看所涉及的表、最终结果，并从头开始查看是否可以以更有效的方式完成查询。保留查询以验证新查询是否与旧查询完全相同，但请尝试忘记用于获取最终结果的所有方法。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2008-11-26T15:10:17.237

我会从头开始重写它。

你说你明白它应该做什么，所以它不应该那么困难。而且我敢打赌，对那段代码的要求会不断变化，所以如果你现在不重写它，你最终可能会维护一些丑陋的怪物

# wix - 如何添加仅在卸载时发生的 WiX 自定义操作（通过 MSI）？

> ID：320921
> 
> 赞同：175
> 
> 时间：2008-11-26T14:41:52.160
> 
> 标签：wix, windows-installer, custom-action

我想修改 MSI 安装程序（通过[WiX](http://en.wikipedia.org/wiki/WiX)创建）以在卸载时删除整个目录。

我了解 WiX 中的`RemoveFile`和`RemoveFolder`选项，但这些选项不够强大，无法递归删除具有安装后创建的内容的整个文件夹。

我注意到类似的 Stack Overflow 问题*[Removing files when uninstalling WiX](https://stackoverflow.com/questions/195919)*，但我想知道这是否可以更简单地使用调用批处理脚本来删除文件夹来完成。

这是我第一次使用 WiX，我仍然掌握[自定义操作](http://wix.sourceforge.net/manual-wix2/authoring_custom_actions.htm)的窍门。将在卸载时运行批处理脚本的自定义操作的基本示例是什么？

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2009-04-08T20:34:43.577

**EDIT**: Perhaps look at the answer [currently immediately below](https://stackoverflow.com/a/17608049/286021).

* * *

This topic has been a headache for long time. I finally figured it out. There are some solutions online, but none of them really works. And of course there is no documentation. So in the chart below there are several properties that are suggested to use and the values they have for various installation scenarios:

![alt text](https://i.stack.imgur.com/UcVjO.png)

So in my case I wanted a CA that will run only on uninstalls - not upgrades, not repairs or modifies. According to the table above I had to use

```
<Custom Action='CA_ID' Before='other_CA_ID'>
        (NOT UPGRADINGPRODUCTCODE) AND (REMOVE="ALL")</Custom> 
```

And it worked!

* * *

## 回答 #2

> 赞同：157
> 
> 时间：2013-07-12T05:36:25.227

[yaluna 的回答](https://stackoverflow.com/a/731700/1671066)存在多个问题，属性名称也区分大小写，`Installed`拼写是否正确（`INSTALLED`不起作用）。上表应该是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/rlvV7.png)

还假设完全修复和卸载属性的实际值可能是：

![在此处输入图像描述](https://i.stack.imgur.com/ugXG4.png)

WiX[表达式语法](https://www.firegiant.com/wix/tutorial/com-expression-syntax-miscellanea/expression-syntax/)文档说：

> 在这些表达式中，您可以使用属性名称（请记住它们区分大小写）。

Windows Installer Guide 中记录了这些属性（例如[Installed](https://msdn.microsoft.com/en-us/library/windows/desktop/aa369297%28v=vs.85%29.aspx)）

编辑：对第一张表的小修正；显然，“卸载”也可能发生`REMOVE`在`True`.

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2008-11-26T18:44:32.170

您可以使用自定义操作来执行此操作。您可以在下面为您的自定义操作添加引用`<InstallExecuteSequence>`：

```
<InstallExecuteSequence>
...
  <Custom Action="FileCleaner" After='InstallFinalize'>
          Installed AND NOT UPGRADINGPRODUCTCODE</Custom> 
```

然后你还必须在下面定义你的动作`<Product>`：

```
<Product> 
...
  <CustomAction Id='FileCleaner' BinaryKey='FileCleanerEXE' 
                ExeCommand='' Return='asyncNoWait'  /> 
```

其中 FileCleanerEXE 是一个二进制文件（在我的例子中是一个执行自定义操作的小 c++ 程序），它也定义在`<Product>`：

```
<Product> 
...
  <Binary Id="FileCleanerEXE" SourceFile="path\to\fileCleaner.exe" /> 
```

真正的诀窍是`Installed AND NOT UPGRADINGPRODUCTCODE`自定义操作的条件，而您的操作将在每次升级时运行（因为升级实际上是卸载然后重新安装）。如果您要删除文件，升级过程中可能不希望这样做。

附带说明：我建议您使用诸如 C++ 程序之类的东西来执行操作，而不是使用批处理脚本，因为它提供了强大的功能和控制——并且您可以防止“cmd 提示”窗口在闪烁时闪烁您的安装程序运行。

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2008-11-26T19:29:19.863

批处理脚本的最大问题是在用户单击取消（或安装过程中出现问题）时处理回滚。处理这种情况的正确方法是创建一个将临时行添加到 RemoveFiles 表的 CustomAction。这样，Windows 安装程序会为您处理回滚情况。当您看到解决方案时，它变得非常简单。

无论如何，要仅在卸载期间执行操作，请添加一个 Condition 元素：

```
REMOVE ~= "ALL" 
```

~= 表示比较不区分大小写（即使我认为 ALL 总是大写）。有关详细信息，请参阅[有关条件语法的 MSI SDK 文档](http://msdn.microsoft.com/en-us/library/aa368012(v=vs.85).aspx)。

PS：我从来没有坐下来想，“哦，批处理文件在安装包中会是一个很好的解决方案。” 实际上，找到一个包含批处理文件的安装包只会鼓励我退回产品以获得退款。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2018-07-06T17:31:25.657

这是我制作的一组属性，使用起来比内置的东西更直观。这些条件基于上面由 ahmd0 提供的真值表。

```
<!-- truth table for installer varables (install vs uninstall vs repair vs upgrade) https://stackoverflow.com/a/17608049/1721136 -->
 <SetProperty Id="_INSTALL"   After="FindRelatedProducts" Value="1"><![CDATA[Installed="" AND PREVIOUSVERSIONSINSTALLED=""]]></SetProperty>
 <SetProperty Id="_UNINSTALL" After="FindRelatedProducts" Value="1"><![CDATA[PREVIOUSVERSIONSINSTALLED="" AND REMOVE="ALL"]]></SetProperty>
 <SetProperty Id="_CHANGE"    After="FindRelatedProducts" Value="1"><![CDATA[Installed<>"" AND REINSTALL="" AND PREVIOUSVERSIONSINSTALLED<>"" AND REMOVE=""]]></SetProperty>
 <SetProperty Id="_REPAIR"    After="FindRelatedProducts" Value="1"><![CDATA[REINSTALL<>""]]></SetProperty>
 <SetProperty Id="_UPGRADE"   After="FindRelatedProducts" Value="1"><![CDATA[PREVIOUSVERSIONSINSTALLED<>"" ]]></SetProperty> 
```

以下是一些示例用法：

```
 <Custom Action="CaptureExistingLocalSettingsValues" After="InstallInitialize">NOT _UNINSTALL</Custom>
  <Custom Action="GetConfigXmlToPersistFromCmdLineArgs" After="InstallInitialize">_INSTALL OR _UPGRADE</Custom>
  <Custom Action="ForgetProperties" Before="InstallFinalize">_UNINSTALL OR _UPGRADE</Custom>
  <Custom Action="SetInstallCustomConfigSettingsArgs" Before="InstallCustomConfigSettings">NOT _UNINSTALL</Custom>
  <Custom Action="InstallCustomConfigSettings" Before="InstallFinalize">NOT _UNINSTALL</Custom> 
```

问题：

*   UPGRADINGPRODUCTCODE 在 RemoveExistingProducts 操作期间设置，因此您之前运行的任何自定义操作都不会知道这是升级[https://docs.microsoft.com/en-us/windows/desktop/Msi/upgradingproductcode](https://docs.microsoft.com/en-us/windows/desktop/Msi/upgradingproductcode)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-25T12:51:30.270

我使用了在 C++ DLL 中单独编码的自定义操作，并使用 DLL 使用以下语法在卸载时调用适当的函数：

```
<CustomAction Id="Uninstall" BinaryKey="Dll_Name" 
              DllEntry="Function_Name" Execute="deferred" /> 
```

使用上面的代码块，我能够在卸载时运行 C++ DLL 中定义的任何函数。仅供参考，我的卸载功能有关于清除当前用户数据和注册表项的代码。

# sql-server - 加密sql server数据库的工具

> ID：320923
> 
> 赞同：4
> 
> 时间：2008-11-26T14:42:13.797
> 
> 标签：sql-server, encryption

我不希望客户能够备份我的 sql server 数据库并访问表数据等。

我知道有一些产品会加密表中的数据，并且他们的产品会在我的应用程序中显示时对其进行解密。

大家都知道哪些产品？我有什么选择？

（这是一项业务需求，但在某些人看来可能很愚蠢，呵呵）。

**更新**

这是用于 sql server 2008 express

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-29T00:50:11.280

加密数据库中的数据的问题在于，只要数据库存在于客户端的机器上（如您所说，它们运行的​​是 SQL 2008 Express，所以我打赌它存在于客户端的台式机或笔记本电脑上），那么它们就可以进入数据。他们可以在实例上设置安全性，以便他们拥有 SA 权限，然后他们可以从那里获取数据。没有办法解决这个问题。

您需要做的是在数据到达数据库之前对其进行加密：在您的应用程序中对其进行加密。在应用程序内部，加密要存储在每个敏感字段中的数据。正如另一张海报所指出的，您不想加密 ID 字段，因为它们用于索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-27T11:00:17.287

有第 3 方[xp_crypt](http://www.xpcrypt.com)。它已经存在多年了。它是一个扩展的存储过程（即 DLL）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T15:01:56.317

SQL Server 2008 本机支持数据库加密。检查[透明数据加密 (TDE)](http://msdn.microsoft.com/en-us/library/bb934049.aspx)的文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T17:31:37.653

您可以加密存储过程，这可以保护您的逻辑。

TDE 仅适用于企业版。

我找不到它是否支持本机 sql 加密 - 但你可以通过一些搜索找到它。但如果是这样，您可能会在您的应用程序中设置数据库主密钥，并将所有解密/加密代码保留在您的应用程序中。

如果它不支持本机加密，您可能希望在您的应用程序语言中创建/查找您自己的加密函数并锁定代码中的密钥。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-27T13:11:45.743

透明数据加密将加密磁盘上的数据库，但在内存中未加密，因此还需要适当的安全性以确保未经授权的用户无法访问表。由于它是企业独有的功能，您可以安全地离开它。

SQL Server 2005 及更高版本具有内置加密功能 - 请查看联机丛书，尤其是第 5 章 - Adam Machanic 的专家 SQL Server 2005 开发书籍的加密（技术上，Lara Rubbelke 写了第 5 章）。

请注意，您只想加密某些列 - 那些您永远不会尝试查找的列，因为加密的列对于索引几乎没有用处。Adam Machanic 的书提出了解决这个问题的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-23T15:07:34.890

透明 SQL Server 加密的另一个解决方案是 DbDefence Free，适用于小于 77 MB 的数据库。

# python - Python中的货币格式

> ID：320929
> 
> 赞同：187
> 
> 时间：2008-11-26T14:43:33.123
> 
> 标签：python, formatting, currency

我希望使用 Python 将 188518982.18 等数字格式化为 188,518,982.18 英镑。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：252
> 
> 时间：2008-11-26T14:50:59.287

请参阅[语言环境](https://docs.python.org/3/library/locale.html)模块。

这会进行货币（和日期）格式化。

```
>>> import locale
>>> locale.setlocale( locale.LC_ALL, '' )
'English_United States.1252'
>>> locale.currency( 188518982.18 )
'$188518982.18'
>>> locale.currency( 188518982.18, grouping=True )
'$188,518,982.18' 
```

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2010-08-03T05:20:21.993

## 2.7 中的新功能

```
>>> '{:20,.2f}'.format(18446744073709551616.0)
'18,446,744,073,709,551,616.00' 
```

[http://docs.python.org/dev/whatsnew/2.7.html#pep-0378](http://docs.python.org/dev/whatsnew/2.7.html#pep-0378)

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2012-01-13T13:17:00.440

不太清楚为什么它没有在网上（或在这个线程上）被更多地提及，但是来自 Edgewall 家伙的[Babel包（和 Django 实用程序）对于货币格式化（以及许多其他 i18n 任务）来说非常棒。](http://babel.pocoo.org/)这很好，因为它不需要像核心 Python 语言环境模块那样在全局范围内执行所有操作。

OP给出的例子只是：

```
>>> import babel.numbers
>>> import decimal
>>> babel.numbers.format_currency( decimal.Decimal( "188518982.18" ), "GBP" )
£188,518,982.18 
```

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2017-03-12T21:49:31.907

这是一篇古老的帖子，但我刚刚实施了以下解决方案：

*   不需要外部模块
*   不需要创建新功能
*   可以在线完成
*   处理多个变量
*   处理负美元金额

代码：

```
num1 = 4153.53
num2 = -23159.398598

print 'This: ${:0,.0f} and this: ${:0,.2f}'.format(num1, num2).replace('$-','-$') 
```

输出：

```
This: $4,154 and this: -$23,159.40 
```

而对于原始海报，显然，只需切换`$`为`£`

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2019-08-04T16:59:32.977

`"{:0,.2f}".format(float(your_numeric_value))`在 Python 3 中完成这项工作；它给出了类似于以下几行之一的内容：

```
10,938.29
10,899.00
10,898.99
2,328.99 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2009-07-04T16:41:31.043

我的语言环境设置似乎不完整，所以我也超越了这个 SO 答案并发现：

[http://docs.python.org/library/decimal.html#recipes](http://docs.python.org/library/decimal.html#recipes)

独立于操作系统

只是想在这里分享。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2010-10-05T17:08:55.250

如果您使用的是 OSX 并且尚未设置您的语言环境模块设置，则此第一个答案将不起作用，您将收到以下错误：

```
Traceback (most recent call last):File "<stdin>", line 1, in <module> File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/locale.py", line 221, in currency
raise ValueError("Currency formatting is not possible using "ValueError: Currency formatting is not possible using the 'C' locale. 
```

要解决此问题，您必须使用以下方法：

```
locale.setlocale(locale.LC_ALL, 'en_US') 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2018-02-22T22:14:13.447

如果我是你，我会使用 BABEL：[http ://babel.pocoo.org/en/latest/index.html](http://babel.pocoo.org/en/latest/index.html)

```
from babel.numbers import format_decimal

format_decimal(188518982.18, locale='en_US') 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-11-26T15:06:36.620

哦，那是一只有趣的野兽。

我花了相当多的时间来做到这一点，有三个主要问题因地区而异： - 货币符号和方向 - 千位分隔符 - 小数点

我已经编写了自己的相当广泛的实现，它是 kiwi python 框架的一部分，请在此处查看 LGPL:ed 源代码：

[http://svn.async.com.br/cgi-bin/viewvc.cgi/kiwi/trunk/kiwi/currency.py?view=markup](http://svn.async.com.br/cgi-bin/viewvc.cgi/kiwi/trunk/kiwi/currency.py?view=markup)

该代码略微特定于 Linux/Glibc，但在 Windows 或其他 unix 上采用应该不会太难。

安装完成后，您可以执行以下操作：

```
>>> from kiwi.datatypes import currency
>>> v = currency('10.5').format() 
```

然后会给你：

```
'$10.50' 
```

或者

```
'10,50 kr' 
```

取决于当前选择的语言环境。

这篇文章相对于另一篇文章的主要观点是它将适用于旧版本的 python。locale.currency 是在 python 2.5 中引入的。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-11-21T17:16:28.297

#以类似“9,348.237”的格式打印变量“总计：”

```
print ('Total:',   '{:7,.3f}'.format(zum1)) 
```

其中 '{:7,.3f}' 是在这种情况下格式化数字的空格数是一百万，带 3 个小数点。然后添加'.format(zum1)。zum1 是我的特定程序中所有数字的总和的大数字。变量可以是您决定使用的任何内容。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-05-12T19:56:42.187

这里已经有十几种解决方案，但我相信下面的一个是**最好的**，因为：

*   很简单
*   遵守操作系统区域设置
*   不需要外部库
*   你可以让它简洁

使用语言环境`currency`：

```
import locale
# this sets locale to the current Operating System value
locale.setlocale(locale.LC_ALL, '') 
print(locale.currency(1346896.67444, grouping=True, symbol=True) 
```

*将在我配置为巴西葡萄牙语*的 Windows 10 中输出：

```
R$ 1.346.896,67 
```

它有点冗长，所以如果你会经常使用它，也许最好预先定义一些参数并有一个更短的名称并在 f-string 中使用它：

```
fmt = lambda x: locale.currency(x, grouping=True, symbol=True)
print(f"Value: {fmt(1346896.67444)}" 
```

您可以为该`setlocale`方法传递一个语言环境值，但它的值取决于操作系统，所以要小心。如果您在 *nix 服务器中，您还需要检查语言环境是否正确安装在操作系统中。

您也可以关闭符号传递`symbol=False`。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-06-25T14:27:28.757

受上面代码的启发：D

```
def money_format(value):
    value = str(value).split('.')
    money = ''
    count = 1

    for digit in value[0][::-1]:
        if count != 3:
            money += digit
            count += 1
        else:
            money += f'{digit},'
            count = 1

    if len(value) == 1:
        money = ('$' + money[::-1]).replace('$-','-$')
    else:
        money = ('$' + money[::-1] + '.' + value[1]).replace('$-','-$')

    return money 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-06-04T12:16:00.503

我来看看同样的东西，发现[python-money](http://code.google.com/p/python-money/)还没有真正使用它，但也许两者的混合会很好

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-11-06T04:18:24.170

一个用于在函数内部计算它的 lambda，在[@Nate 的回答的帮助下](https://stackoverflow.com/a/3393776/1860929)

```
converter = lambda amount, currency: "%s%s%s" %(
    "-" if amount < 0 else "", 
    currency, 
    ('{:%d,.2f}'%(len(str(amount))+3)).format(abs(amount)).lstrip()) 
```

进而，

```
>>> converter(123132132.13, "$")
'$123,132,132.13'

>>> converter(-123132132.13, "$")
'-$123,132,132.13' 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-04-08T12:41:06.347

**简单的python代码！**

```
def format_us_currency(value):
    value=str(value)
    if value.count(',')==0:
        b,n,v='',1,value
        value=value[:value.rfind('.')]
        for i in value[::-1]:
            b=','+i+b if n==3 else i+b
            n=1 if n==3 else n+1
        b=b[1:] if b[0]==',' else b
        value=b+v[v.rfind('.'):]
    return '$'+(value.rstrip('0').rstrip('.') if '.' in value else value) 
```

# ide - 您专业使用什么构建工具？

> ID：320940
> 
> 赞同：4
> 
> 时间：2008-11-26T14:45:48.797
> 
> 标签：ide, ant, build-automation

在家里，我使用 CTRL+SHIFT+B 或 F7 或任何键序列来启动我的构建工具的构建。在工作中，这并没有完全削减它。

在我的第一份工作（实习）中，我们使用了一个名为 Visual Build 的产品，我非常喜欢它。这是我用过的最好的构建工具。这里的缺点是它不是免费的。

在我最近的工作中，我对 Ant 一无所知。现在，不幸的是，我已经深入参与了我们的构建过程，无法自拔。它可以工作，是的，但是在从 Visual 构建之后，它似乎每一步都在与我作斗争。是的，它是免费的，但我们并不是想成为一家只提供免费软件的开发公司或任何东西。

我从来没有看过`make`或任何其他构建工具，所以我真的不知道那里还有什么。

有没有人见过或有过使用 Visual Build 的经验？大多数情况下，我喜欢一些关键的东西：

1.  它有一个图形用户界面
2.  它运行任意 VBScript 而无需编译类
3.  您可以逐步完成构建过程，或从中间的任何位置开始。

有没有免费的构建工具有这个？有什么方法可以让人们相信继续前进是值得的？现在是 2008 年。我们使用 IDE 进行开发，为什么不使用（IBE）进行构建？

**编辑：**我主要是在寻找我最后一个问题的答案；有没有可以免费使用的内置 GUI 的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-26T14:49:40.723

不是很复杂，但我们使用了一组批处理文件。这很好用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-26T16:28:59.307

我们使用 FinalBuilder - 我认为它与 VisualBuild 非常相似，尽管我没有使用过后者。

它确实从命令行运行，如果需要，您可以将其与 CC.Net 集成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-26T14:53:33.617

对于 Java 项目，我们使用 Teamcity，类似于巡航控制，但您也可以进行远程运行，即您将更改发送到服务器，它会构建并进行单元测试，如果一切正常，那么您签入，非常好的构建工具并免费提供多达 20 种构建配置。

对于我们的 Visual Studio 2005 项目，包括使用 InstallShield 打包最终的 exe 和 dll 并将它们放在我们使用 Final Builder 的共享服务器上，它不是免费的，但它非常易于使用和开始使用。

我们还远程登录（从 FinalBuilder）到许多其他平台（Unix/Linux/OpenVMS），并通过在那里运行 makefile 来启动远程构建。

我们不使用连续构建，但有一个 FinalBuilder Server 可以处理这个问题，并免费提供 FinalBuilder Professional 许可证。

我们对 FinalBuilder 非常满意，它很容易上手，而且功能强大，可以解决大多数问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-26T14:54:37.860

[制作](http://cmake.org)。为 KDevelop、Eclipse、Makefiles 和 Visual Studio（和 XCode）生成构建文件，它确实有效。您可以使用宏轻松扩展它，尽管编程能力相当有限。它很容易学习，并且将现有应用程序从 Visual Studio 移植到它非常容易。但是，您仅限于 C++/C 和 IIRC Fortran 代码。

KDE 现在也在使用 CMake，因此它似乎可以很好地扩展（即项目/依赖检查的生成时间还不错）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-26T14:48:31.880

我不确定这是否正是您正在寻找的，但我喜欢 CruiseControl.NET。我让它使用 MSBuild 任务构建我的项目。它没有确切的 GUI，但有一个 Web 界面可以查看您的构建结果和一个系统托盘常驻程序，它将提醒您构建状态。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-16T19:29:12.223

上勾拳。免费。

UppercuT 使用 NAnt 来构建，它是非常容易使用的构建框架。

自动化构建就像 (1) 解决方案名称，(2) 源代码控制路径，(3) 大多数项目的公司名称一样简单！！！

[http://code.google.com/p/uppercut/](http://code.google.com/p/uppercut/)

这里有一些很好的解释：[Uppercut](http://ferventcoder.com/category/uppercut.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-26T14:56:59.803

回到击键的事情上，我找到了 CTO 喜欢的[Hoekey 。](http://www.bcheck.net/apps/#hoekey)我自己不使用它，但作为一种为事物分配击键的方式，它非常好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-26T15:00:45.477

我对 Visual Build 一无所知，但从您的描述来看，它听起来像是与 Windows 相关联并且不能从命令行运行。

如果您正在构建 Java 软件（我假设您是因为您使用的是 Ant），那么最好有一个跨平台工具。如果您可以从命令行运行该工具，那么它是可编写脚本的，这对于自动化非常重要。

Ant 也是可扩展的并且是事实上的标准。您可能使用的许多工具（Cobertura、TestNG 等）都提供了 Ant 任务，以便它们可以轻松地与您的构建集成。

我将 Ant 用于所有 Java 项目。有些人更喜欢[Maven](http://maven.apache.org/)，但我不是其中之一。Ant 远非完美（XML 语法有点笨拙），但它有[很好的文档记录](http://ant.apache.org/manual/)，非常稳定且非常简单。

如果您使用标准工具，例如 Ant 或 Maven，您将能够利用任意数量的[持续集成](http://martinfowler.com/articles/continuousIntegration.html)产品。我怀疑你会发现许多与 Visual Build 一起工作的东西。

大多数 IDE 都支持 Ant，因此它们为您提供了各种 GUI，而您的 CI 服务器将为您提供用于构建的 Web 界面。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-26T15:02:11.760

[NAnt](http://nant.sourceforge.net/)（Ant 的 .NET 端口）。效果很好，很容易扩展。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-26T15:34:58.167

对于小型项目，我确实使用构建后脚本，并且在 7z、Nsis 和类似 CLI 工具的支持下，它为我完成了完美的工作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-11-26T16:20:43.037

TeamCity 和 CuriseControl 适用于任何项目，但这就是您选择 TeamCity 的原因：-

易于设置：在设置过程中，我们发现 TeamCity 更易于设置和使用，尤其是与 CruiseControl 相比。我们不需要编辑 XML 文件或大规模配置像 CruiseControl 这样的单个构建机器。

易于扩展性：TeamCity 也因其易于扩展性而脱颖而出。如果我们发现构建在队列中等待的时间过长，我们可以添加更多计算机作为代理。我们唯一的额外工作是向 TeamCity 服务器注册新计算机并安装 msbuild 和 subversion。

与 Subversion 的交互：可以检查自上次构建以来向 subversion 提交了多少和哪些更改，谁开始了构建等。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-11-26T16:24:18.647

我非常喜欢[scons](http://www.scons.org/)来构建 C++ 文件。它非常简单，并且构建脚本是用 Python 编写的（这比一些一起破解的 DSL IMO 好得多）。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-11-26T17:08:57.870

[Ant](http://ant.apache.org/)或[Maven](http://maven.apache.org/)是很棒的小型构建工具。

如果你想自动化构建过程，还有一些很棒的工具，比如[TeamCity](http://www.jetbrains.com/teamcity/)和[Bamboo](http://www.atlassian.com/software/bamboo/)。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-11-26T19:16:56.100

就我个人而言，我几乎所有事情都使用 Makefile，因为它们非常简单。但在我的工作中，我不得不使用 ant。

我反对 ant 的主要问题是 XML 使它难以阅读和理解，即使使用正确的缩进也是如此。另一方面，XML 的冗长在读取别人的 ant 文件时会有所帮助，但当文件超过几十行时，它仍然会成为 PITA。

至于有一个GUI来构建......我一直觉得这是一个减号而不是一个加号。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-21T10:09:08.023

[Maven](http://maven.apache.org/)对我来说是最好的，因为它可以处理项目依赖项

# java - 用查询替换 Temp

> ID：320946
> 
> 赞同：14
> 
> 时间：2008-11-26T14:48:51.570
> 
> 标签：java, refactoring

Replace Temp with Query 重构方法现在被广泛推荐，但似乎效率很低，收益很少。

Martin Fowler 网站上的方法给出了以下示例：

将表达式提取到方法中。用表达式替换所有对 temp 的引用。然后可以在其他方法中使用新方法。

```
 double basePrice = _quantity * _itemPrice;
    if (basePrice > 1000)
        return basePrice * 0.95;
    else
        return basePrice * 0.98; 
```

变成

```
 if (basePrice() > 1000)
        return basePrice() * 0.95;
    else
        return basePrice() * 0.98;

double basePrice() {
    return _quantity * _itemPrice;
} 
```

为什么这是个好主意？当然这意味着计算是不必要的重复，你有调用函数的开销。我知道 CPU 周期很便宜，但像这样扔掉它们似乎很粗心？

我错过了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-13T00:33:13.537

这是一个重要的重构，因为它是对单一职责的重构，它是 DRY 失败的解决方案！

temps 的主要问题（尤其是在使用长方法的幼稚代码中，数百行长！）是它们是可变的本地状态。明显的风险（正如 Fowler 所讨论的那样？）是有人可能会在一个长方法的中途做出改变，并在最后破坏某些东西。（已看到此费用产生）

没有测试，这个方法有无数的依赖 - 真是一团糟！:)

删除 temp 是关于向单一职责重构。

示例 - 今天我发现了一个错误，它与将*错误的临时变量*传递给服务有关。如果我删除临时文件（有几个，所有字符串），那个错误（疏忽）就不会发生。

我的方法持有一个临时变量的原因是它正在做它不应该做的工作......并且类似的类重复了这个逻辑......这一切都是一致的吗？不！

通过删除 temp，我还将代码重构为具有适当职责的类，通过一些简单的测试可以覆盖 110%。

没有巨大的夹具来测试微不足道的东西

如果我调用昂贵的东西，我会将结果作为值对象/聚合返回。“临时代码”可能应该被聚合内部化。

因此，删除 temp 会将您推入集中（单一）责任 - > SOLID！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-27T10:07:32.720

我现在正在重新阅读 Refactoring，原因之一是`Extract Method`p.116 末尾的以下引用。

背景：他描述了`Extract Method`如果要提取的代码使用局部变量是很困难的。

> 临时变量通常如此之多，以至于它们使提取变得非常尴尬。在这些情况下，我尝试使用 Replace Temp with Query (120) 来减少临时工。...

因此，一次重构可能取决于首先进行另一次重构，而这本身并不明显。另一个例子是`Inline Method`在 Replace 之前`Method with Method Object`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-03-16T00:27:16.703

我认为这种重构的大部分效用不是来自于它本身的应用，而是作为向提取方法迈出的一步，这种方法非常普遍和有用。在局部变量阻碍提取方法或通过附加参数使其复杂化的情况下，“用查询替换临时帮助”以使提取方法更容易。同样在这些情况下，生成的查询方法会被两种不同的方法重用，这些方法是提取方法的结果。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-11-26T15:02:28.187

阅读了 Fowler 的[网页后](http://www.refactoring.com/catalog/replaceTempWithQuery.html)，我看不出这样做有什么好处。唯一可能的收获是将可能经常使用的表达式隔离到一个地方，但最好通过以下方式处理：

```
 double basePrice = basePrice();
    if (basePrice > 1000)
            return basePrice * 0.95;
    else
            return basePrice * 0.98; 
```

Fowler 没有解释为什么他的修改后的代码比原来的代码更好，只是为了阅读他的书。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2011-06-29T13:37:17.793

在 Refactoring 书中有更多关于 Replace Temp with Query 的内容，它是：

> 在这种情况下，您可能会担心性能。与其他性能问题一样，暂时让它滑动。十有八九，没关系。当它确实重要时，您将在优化期间解决问题。随着您的代码得到更好的分解，您通常会发现更强大的优化，而如果不进行重构，您可能会错过这些优化。如果情况变得更糟，很容易恢复温度。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-11-26T14:59:37.880

它旨在更多地揭示代码的意图。在某些情况下，它可能会被滥用，但不太可能。例如，您可以使用查询更新 5% 和 2% 折扣的查询，但您可以在折扣的名称原因中描述方法的名称。请记住，今天可能很明显，但在 6 个月后可能就不那么明显了——正如我所说的——这不是我忘记的问题，而是我忘记的时候。

```
 if (basePrice() > 1000)
     return bigTicketDiscount()
  else
     return regularDiscount()

double bigTicketDiscount(){
  return basePrice() * 0.95;
}

double regularDiscount(){
  return basePrice() * 0.98
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-01-13T12:44:35.763

您（最初的提问者和 James Curran）都错过了在这个特定的例子中，计算没有重复。要么代码沿着 , 的一个分支`if`，然后调用`basePrice()`，它执行计算。或者代码进入另一个分支，`if`并且计算也在那里执行。

无论如何，乘法都会完成，但仍然只有一次。就像在临时版本中一样。

是的，很高兴知道查询默认情况下是不缓存的，并且 temps 本质上是一种缓存形式。在这个特殊的例子中，区别并不重要。缓存（例如 temps）的优点是它可以节省 CPU 周期（在这种情况下并不是真的，就乘法本身而言，我的意思是——在调用、堆栈跳转等方面，那么当然……取决于编译器）。缓存的缺点是，如果您马虎，它可能会给您提供过时或错误的数据。除了 Fowler 提到的 temps 的特定缺点之外（它们是本地的，无论是在时间上还是在词汇上）。

我通常做的是我大部分时间都在查询中编码，当我看到我*确实*多次调用特定查询时（与这个示例不同，它位于单独的条件分支中），如果它是本地的或引入，我可以使用临时如果我需要在更广泛、更少的本地范围内访问它，可以使用 memoization 或其他类型的缓存系统（例如简单的全局变量或类成员）。

那时，与此重构相反的“用 Temp 替换查询”就派上用场了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-26T15:02:18.967

在我看来，这样做确实有助于使您的原始方法达到一个单一的目的；它不再负责计算 basePrice 和折扣价（或它正在计算的任何东西）。这是一个牺牲一些 CPU 周期以使代码更易于维护的示例。“浪费”的 cpu 周期可能不是您会注意到的，而且编译器也有可能对其进行优化（也许注意到该方法相对简单，而不是调用该方法，而是插入实际代码（更像是宏）无论如何，这些类型的优化最好留给机器，让人们有更干净的代码来工作。

# c# - 可以在 c# 中获取别名类型的类型吗？

> ID：320948
> 
> 赞同：8
> 
> 时间：2008-11-26T14:49:25.390
> 
> 标签：c#, c#-3.0

```
Type.GetType("System.String") 
```

是否可以在某处查找可用的别名？

```
Type.GetType("string") 
```

返回`null`。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-11-26T14:52:30.470

这在编程上是不可能的，因为“别名”实际上是 C# 中引入的关键字，并且`Type.GetType`（与其他所有框架方法一样）是独立于语言的框架的一部分。

您可以创建具有以下值的字典：

```
 bool      System.Boolean
    byte      System.Byte
    sbyte     System.SByte
    char      System.Char
    decimal   System.Decimal
    double    System.Double
    float     System.Single
    int       System.Int32
    uint      System.UInt32
    long      System.Int64
    ulong     System.UInt64
    object    System.Object
    short     System.Int16
    ushort    System.UInt16
    string    System.String 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T14:51:56.803

“别名”是语言定义的一部分。[您需要在相关语言规范](http://msdn.microsoft.com/en-us/vcsharp/aa336809.aspx)中查找它们。它们被编译掉，并且在运行时不存在 - string 变为 System.String，int 变为 System.Int32，等等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-26T14:56:28.743

CLS 中未定义别名（int、bool 等）。它们只是编译时常量，在运行时被替换。这意味着当您的程序运行时，您可以“以编程方式执行操作，别名已经消失。您只能执行以下操作：

```
Type.GetType(typeof (string).ToString()) 
```

# c# - 这 ';' 字符，十六进制值 0x3B，不能包含在名称中

> ID：320950
> 
> 赞同：0
> 
> 时间：2008-11-26T14:50:30.833
> 
> 标签：c#, asp.net

我看到了错误“';' 字符，十六进制值 0x3B，不能包含在名称中。” 在我的 ASP.NET Web 应用程序的日志文件中。记录的 url 如下所示：

```
mypage.aspx?paramone=one+two&amp;paramtwo=zero+1 
```

所以我的第一个问题是什么类型的系统/浏览器正在编码原始查询字符串？（这种情况很少发生）

我尝试使用 Page_Load() 事件中的以下代码片段来解决此问题：

```
string rawUrl = Request.RawUrl;
if (rawUrl.Contains(amp))
{
    rawUrl = rawUrl.Replace("&amp;", "&");
    Server.Transfer(rawUrl, false);
    return;
} 
```

但是，当它转回此页面时，它又回到`&amp;`了查询字符串中。所以我猜测 .Transfer() 函数对第一个参数进行编码。

关于解决这个问题的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T15:41:28.297

1.  您的 Web 服务器应该能够从 HTTP 请求中记录“用户代理”字段，这应该使您能够识别罪魁祸首。

2.  不要修复它 - URI 参数有一组非常明确的合法语法，而这不是其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-02-01T06:47:21.820

当您尝试将 Microsoft 目录导出到 XML 时，无法导入生成的文件，并且您会收到以下错误消息“XML 文件路径/文件名在行中包含错误。”“名称包含无效字符。”

如果您使用 Microsoft Visual Studio .NET 验证 XML 目录，您会收到以下错误消息：

“'(' 字符，十六进制值 0x28，不能以名称开头。行号，位置号”

出现此问题的原因是 Commerce Server 导出未对以下特殊字符进行编码：

```
The range 0x0021 – 0x002F includes ! “ # $ % & ‘ ( ) * + , - . /
The range 0x03A – 0x0040 includes : ; < = > ? @
The range 0x007B – 0x007E includes { | } ~
The range 0x005B – 0x005E [ \ ] ^** 
```

# http - 在 Apache Tomcat 6.0 中禁用 PUT TRACE DELETE 请求

> ID：320959
> 
> 赞同：11
> 
> 时间：2008-11-26T14:52:58.377
> 
> 标签：http, tomcat, application-server, security-constraint

我需要在我的应用服务器 Apache Tomcat 6.0 上**禁用 PUT、DELETE 和 TRACE HTTP 请求。**

到目前为止，我搜索过的所有其他来源都将我引向了*httpd.conf*中的 limit 参数，因此我事先说明我没有使用 Apache Web Server，并且请求直接由 Tomcat 处理，并且所以图片中没有*httpd.conf*。

请建议我应该如何在Tomcat上做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-11-26T15:19:33.190

在您的 WEBINF 中，添加您可以添加安全约束：

```
<security-constraint>
     <web-resource-collection>
          <web-resource-name>Forbidden</web-resource-name>
          <url-pattern>/blah/*</url-pattern>
          <http-method>PUT</http-method>
          <http-method>DELETE</http-method>
          <http-method>TRACE</http-method>
     </web-resource-collection>
     <auth-constraint>
          <role-name>empty_role</role-name>
     </auth-constraint>
</security-constraint> 
```

或者，您可以执行以下两项操作：

在 server.xml 中，编辑`<connector>`元素，添加一个属性：`allowTrace="false"`。然后编辑 DefaultServlet：$CATALINA_HOME/conf/web.xml

```
<servlet>
    <servlet-name>default</servlet-name>
    <servlet-class>
        org.apache.catalina.servlets.DefaultServlet
    </servlet-class>
    <!-- blah blah blah -->
    <init-param>
        <param-name>readonly</param-name>
        <param-value>true</param-value>
    </init-param>
</servlet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T15:23:27.113

答案在于 servlet 规范。在查看 servlet 的 API 时：http: [//java.sun.com/products/servlet/2.5/docs/servlet-2_5-mr2/javax/servlet/http/HttpServlet.html](http://java.sun.com/products/servlet/2.5/docs/servlet-2_5-mr2/javax/servlet/http/HttpServlet.html)你会看到不同的方法处理不同类型的 HTTP 请求。此外，还有一个很棒的特性叫做过滤器，它可以用来围绕 servlet 和过滤器包装一些代码。

所以解决方案是：

*   修改servlet只支持do和get；或者
*   创建一个过滤器来清除那些其他类型的请求。

# user-interface - 重新设计复杂 UI 的技术

> ID：320961
> 
> 赞同：2
> 
> 时间：2008-11-26T14:53:11.077
> 
> 标签：user-interface, usability

相信大家都见过。具有以下逻辑的业务线 UI：“选择 ComboA 时，根据该选择查询值，并填充文本框 B”，或“按下按钮 C 时，禁用文本框 C 和 D”，等等。 . 当您可以对上述逻辑进行多种排列时，情况会变得特别糟糕。

如果有机会重新设计这些可​​爱的屏幕之一，您会如何处理它？你会在 UI 前面放一个向导吗？你会保留单屏范式但使用其他模式来使 UI 状态的逻辑可维护吗？您将使用什么过程来确定理想情况下如何呈现和实施？

并不是说我认为这对响应很重要，但我目前只看到了这个“机会”，它是一个 ASP.NET 网页，它使用 javascript 来响应用户的选择、禁用控件并进行 ajax 调用以获取更多信息数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-26T15:05:11.567

您可能想要查看的是，这些依赖项中的某些是否并不意味着在看起来相似并提供相同功能的同时，这些元素应该被拆分到多个相似但实际上不同的页面上。有人可能会将这些分组到页面上，因为有足够的相似之处。

如果您可以尝试将问题视为根本没有实现，如果您现在必须实现它，您将如何构建用户界面。如果它完全不同并且现有用户会遇到重大问题，您可能不得不妥协。但正如埃利所说，从用户的角度来看。他们是必须与您的产品一起工作的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T15:06:36.603

I would model the state of the whole UI on one object. That object should keep track of the state in which each UI object should be in, including the list of options of a combo box (and which option is selected of course).

That means that having one state object you can correctly re-draw the whole screen and not end up in broken states on the UI. Of course, refreshing all the components each time anything changes is not the way to go, so I would refresh them on callbacks from each of the setters in the state object. This would also allow you to have two UIs over the same state if you ever want that.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-26T15:02:31.633

从 KISS 原则开始，然后从那里开始工作。不要过度设计解决方案，并尝试从用户的 POV 考虑问题。您对如何构成良好布局的第一印象可能与您应该构建的内容接近，因为良好的 UI 是直观的。

话虽如此，单屏与多屏、JavaScript 或 AJAX 并不重要。如果它看起来不错，易于理解，并且在幕后有很好的注释和清晰的代码编写，那么它就可以工作。它应该是可维护的，因此目标是具有清晰功能的模块化代码块。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-26T15:05:32.347

我认为最重要的是用户体验，其次是代码的可维护性。在网络上，我尝试尽可能减少往返次数，所以我不确定我是否会采用向导方法，因为这会引导用户浏览多个页面或需要通过 AJAX 替换几乎整个页面（这似乎是错误的） . 我通常与客户合作以获取他们需要的功能，尽管我的目标是功能，而不是实现。我可能会模拟一些示例来向他们展示替代方案，或者只是将它们手绘在白板上给他们一些想法。如果结果是大大改进了用户界面，我不介意在应用程序中做“困难”或“复杂”的事情。当然，我尽可能简单，并且绝对使用良好的做法，即使在 Javascript 中也是如此。

# string - 修剪 JSTL 表达式中的字符串

> ID：320968
> 
> 赞同：0
> 
> 时间：2008-11-26T14:55:51.553
> 
> 标签：string, jstl, trim

我在 JSP 页面中有以下行：

```
<c:if test="${postAuditBean.postAudit.authority == authority.value}"> 
```

我想将此比较更改为在比较之前首先修剪左右表达式的前导和尾随空格......就像这样：

```
<c:if test="${trim(postAuditBean.postAudit.authority) == trim(authority.value)}"> 
```

我试过这个：

```
<c:if test="${fn:trim(postAuditBean.postAudit.authority) == fn:trim(authority.value)}"> 
```

这在 JSP 页面中生成了解析错误。

谁能告诉我如何从 JSTL 子表达式中修剪空白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T08:43:11.923

参考：[JSTL fn:trim() 函数](http://www.tutorialspoint.com/jsp/jstl_function_trim.htm)

# php - 如何在 Python 驱动的 Plone 站点中包含 PHP 脚本的输出？

> ID：320979
> 
> 赞同：2
> 
> 时间：2008-11-26T14:58:46.463
> 
> 标签：php, python, plone

我需要在 Plone 站点中输出 PHP 片段。它被交付为一个小型库，在 PHP 中具有一个 display() 函数，用于输出一行文本。但我需要把它放在一个克隆网站上。你有什么建议？

我一直在想有一个 display.php，它只运行 display() 并从 Plone 模板下载该 URL 并输出内容。你认为它可能有效吗？我可以从 Plone 模板中使用哪些点击 URL、检索内容和输出的方法？

一个重要且关键的约束是输出应该直接在 HTML 上，而不是 iframe。这是来自外部的约束，没有任何技术性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T16:18:46.957

那么，使用 AJAX 调用 PHP 脚本（是的，您将需要 apache）并显示输出。将自定义 JS 添加到 plone 是微不足道的，这抽象了技术问题。

请确保这不是关键功能。一些用户仍然停用 JS，因此网页应该很好地降级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-28T06:12:56.133

另一种选择是使用 os.popen 在服务器上运行 PHP 脚本，然后只打印输出。快速而肮脏的例子：

```
import os
print os.popen('php YourScript.php').read()
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T15:37:08.273

可能是最简单的方法：在您的站点中安装[windowz 。](http://plone.org/products/windowz "窗口z")这样你就可以在你的 plone 布局中获得一个带有 iframe 的页面。确保 php 脚本输出一个常规的 html 页面并使用该 url 配置您的 windowz 页面。完毕。

适用于现有的公司内部电话簿应用程序等。

# java - Java 对象的内存分配过程中的步骤

> ID：320980
> 
> 赞同：13
> 
> 时间：2008-11-26T14:59:02.250
> 
> 标签：java, object, memory, heap-memory

**当一个类实例化以下对象时，内存中会发生什么？**

```
public class SomeObject{

    private String strSomeProperty;

    public SomeObject(String strSomeProperty){
        this.strSomeProperty = strSomeProperty;
    }
    public void setSomeProperty(String strSomeProperty){
        this.strSomeProperty = strSomeProperty;
    }
    public String getSomeProperty(){
        return this.strSomeProperty;
    }
} 
```

在课堂上`SomeClass1`：

```
SomeObject so1 = new SomeObject("some property value"); 
```

在课堂上`SomeClass2`：

```
SomeObject so2 = new SomeObject("another property value"); 
```

**如何为新实例化的对象及其属性分配内存？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-26T15:17:24.770

让我们一步一步来：

```
SomeObject so1 = new SomeObject("some property value"); 
```

...实际上比看起来更复杂，因为您正在创建一个新字符串。可能更容易想到：

```
String tmp = new String("some property value");
SomeObject so1 = new SomeObject(tmp);
// Not that you would normally write it in this way. 
```

（绝对准确 - 这些并不是真正等效的。在原始版本中，“新字符串”是在编译时创建的，并且是 .class 图像的一部分。您可以将其视为性能黑客。）

因此，首先 JVM 为字符串分配空间。您通常不知道或不关心 String 实现的内部结构，因此请相信一块内存正在用于表示“某些属性值”。此外，您还临时分配了一些内存，其中包含对字符串的引用。在第二种形式中，它被显式调用`tmp`；在您的原始形式中，Java 处理它而不命名它。

接下来，JVM 为新的 SomeObject 分配空间。这是 Java 内部簿记的一点空间，也是每个对象字段的空间。在这种情况下，只有一个字段`strSomeProperty`.

请记住，这`strSomeProperty`只是对字符串的引用。现在，它将被初始化为 null。

接下来，执行构造函数。

```
this.strSomeProperty = strSomeProperty; 
```

*所有这一切都是将对字符串的引用*复制到您的`strSomeProperty`字段中。

最后，为对象引用分配空间`so1`。这是通过对 SomeObject 的引用设置的。

`so2`以完全相同的方式工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-26T17:07:54.253

[Heinz M. Kabutz 博士的 Determining Memory Usage in Java](http://www.javaspecialists.eu/archive/Issue029.html)给出了一个精确的答案，以及一个计算内存使用量的程序。相关部分：

> 1.  该类至少占用 8 个字节。所以，如果你说 new Object(); 您将在堆上分配 8 个字节。
> 2.  每个数据成员占用 4 个字节，除了 long 和 double 占用 8 个字节。即使数据成员是一个字节，它仍然会占用4个字节！此外，使用的内存量以 8 字节块的形式增加。因此，如果您有一个包含一个字节的类，它将占用该类的 8 个字节和用于数据的 8 个字节，总共 16 个字节（呻吟！）。
> 3.  数组更聪明一点。基元被打包在数组中，所以如果你有一个字节数组，它们每个都会占用一个字节（哇！）。当然，内存使用量仍以 8 字节块的形式增加。

正如人们在评论中指出的那样，字符串是一种特殊情况，因为它们可以被实习。您可以以相同的方式推断它们占用的空间，但请记住，看起来同一个 String 的多个副本实际上可能指向同一个引用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T09:38:59.753

要记住的要点：

1.  调用方法时，会在堆栈顶部创建一个框架。
2.  一旦方法完成执行，控制流将返回到调用方法，并刷新其相应的堆栈帧。
3.  局部变量在堆栈中创建。
4.  实例变量是在堆中创建的，并且是它们所属对象的一部分。
5.  引用变量在堆栈中创建。

参考：[http ://www.javatutorialhub.com/java-stack-heap.html](http://www.javatutorialhub.com/java-stack-heap.html)

# linq-to-sql - 针对 Sql Server 2000 的 TransactionScope 错误 - 合作伙伴事务管理器已禁用其对远程/网络事务的支持

> ID：320986
> 
> 赞同：5
> 
> 时间：2008-11-26T15:00:33.277
> 
> 标签：linq-to-sql, transactions, transactionscope, msdtc

我正在尝试针对我的 Sql 2000 数据库为我的 Linq-to-Sql 操作设置一个简单的事务。使用 TransactionScope 它看起来像这样：

```
using (TransactionScope transaction = new TransactionScope())
{
    try
        {
        Store.DBDataContext dc = new Store.DBDataContext();
        Store.Product product = GetProduct("foo");
        dc.InsertOnSubmit(product);
        dc.SubmitChanges();
        transaction.Complete();
    }
    catch (Exception ex)
    {                
        throw ex;
    }
} 
```

但是，我不断收到以下错误：

*合作伙伴事务管理器已禁用其对远程/网络事务的支持。（来自 HRESULT 的异常：0x8004D025）*

但是，如果我使用传统交易设置交易，它可以正常工作。所以这很好用：

```
Store.DBDataContext dc = new Store.DBDataContext();
try
{
    dc.Connection.Open();
    dc.Transaction = dc.Connection.BeginTransaction();
    Store.Product product = GetProduct("foo");
    dc.InsertOnSubmit(product);
    dc.SubmitChanges(); 
    dc.Transaction.Commit();
}
catch (Exception ex)
{
    dc.Transaction.Rollback();
    throw ex;
}
finally
{
    dc.Connection.Close();      
    dc.Transaction = null;
} 
```

我想知道 TransactionScope 的幕后工作是否与我的第二个实现不同。如果没有，我不使用 TransactionScope 会失去什么？此外，有关导致错误的原因的任何指导也很好。我已经确认 MSDTC 正在 sql server 和我的客户端计算机上运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-26T15:24:44.553

看看这里：

System.Transactions 和 Microsoft SQL Server 2000 的快速事务 [http://blogs.msdn.com/florinlazar/archive/2005/09/29/475546.aspx](http://blogs.msdn.com/florinlazar/archive/2005/09/29/475546.aspx)

在这里：
[http ://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=230390&SiteID=1](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=230390&SiteID=1)

> 首先验证“Distribute Transaction Coordinator”服务在数据库服务器计算机和客户端计算机上都在运行
> 1\. 转到“管理工具 > 服务”
> 2\. 如果“Distribute Transaction Coordinator”服务没有运行，请打开它
> 
> 如果它正在运行并且客户端应用程序与数据库服务器不在同一台计算机上，则在运行数据库服务器的计算机上
> 1\. 转到“管理工具 > 组件服务”
> 2\. 在左侧导航树上，转到“组件服务 > 计算机” > 我的电脑”（您可能需要双击并等待，因为某些节点需要时间展开）
> 3.右键单击“我的电脑”，选择“属性”
> 4.选择“MSDTC”选项卡
> 5.单击“安全配置”
> 6 . 确保选中“网络 DTC 访问”、“允许远程客户端”、“允许入站/出站”、“启用 TIP”（某些选项可能不是必需的，尝试获取您的配置）
> 7\. 服务将重新启动
> 8.但是如果仍然无法正常工作，您可能需要重新启动您的服务器（这是之前让我发疯的事情）
> 
> 在您的客户端计算机上使用与上述相同的过程打开“安全配置”设置，确保选中“网络 DTC 访问”、“允许入站/出站”选项，必要时重新启动服务和计算机。
> 
> 在您的 SQL Server 服务管理器上，单击“服务”下拉菜单，选择“分发事务协调器”，它应该也在您的服务器计算机上运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-26T15:52:21.520

Keith Sirmons 向我指出的 Florin Lazar 帖子中的 DatabaseTransactionAdapter 实现似乎可以解决问题。这是我的代码调用它：

```
Store.DBDataContext dc = new Store.DBDataContext();
using (TransactionScope transaction = new TransactionScope())
{
    try
    {
        var dbAdapter = new DatabaseTransactionAdapter(dc.Connection);
        dc.Connection.Open();
        dbAdapter.Begin();
        dc.Transaction = (SqlTransaction)dbAdapter.Transaction;
        Store.Product product = GetProduct("foo");
        dc.InsertOnSubmit(product);
        dc.SubmitChanges();
        transaction.Complete();
    }
    catch (Exception ex)
    {                
        throw ex;
    }
} 
```

唯一让我感到不安的是，即使它没有在“使用”语句中声明，我也没有明确关闭连接。

但根据弗洛林拉扎尔的说法，这是故意的。

> 而且你也不能关闭连接，因为连接应该保持打开直到事务完成，这发生在“using”语句结束之后。适配器将拥有连接生命周期的所有权，并在完成后将其关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-26T17:39:13.963

在 Windows 2008 或更高版本上启用此功能的步骤是：

> 首先验证“Distribute Transaction Coordinator”服务是否在数据库服务器计算机和客户端计算机上运行
> 
> 1.  转到“管理工具 > 服务”
> 2.  如果“分发事务协调器”服务未运行，请打开它
> 
> 如果它正在运行并且客户端应用程序与数据库服务器不在同一台计算机上，则在运行数据库服务器的计算机上
> 
> 1.  转到“管理工具 > 组件服务”
> 2.  在左侧导航树中，进入“组件服务 > 计算机 > 我的电脑 > 分布式事务协调器”（可能需要双击等待，因为有些节点需要时间展开）
> 3.  右键单击“本地 DTC”，选择“属性”
> 4.  选择“安全”选项卡
> 5.  确保选中“网络 DTC 访问”、“允许远程客户端”、“允许入站/出站”
> 6.  服务将重新启动
> 7.  但是如果仍然无法正常工作，您可能需要重新启动您的服务器（这是之前让我发疯的事情）
> 
> 在您的客户端计算机上使用与上述相同的过程打开“安全配置”设置，确保选中“网络 DTC 访问”、“允许入站/出站”选项，必要时重新启动服务和计算机。
> 
> 在您的 SQL Server 服务管理器上，单击“服务”下拉菜单，选择“分发事务协调器”，它应该也在您的服务器计算机上运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-10T16:47:45.110

我在这里发布了以下解决方案，因为经过一番搜索，这是我登陆的地方，所以其他人也可以。我试图使用 EF 6 调用存储过程，但由于存储过程使用了**链接服务器**，因此出现了类似的错误。

**无法执行操作，因为链接服务器的 OLE DB 提供程序 _ 无法开始分布式事务**

**合作伙伴事务管理器已禁用对远程/网络事务的支持**

跳转到**SQL 客户端**确实解决了我的问题，这也向我证实了这是一个 EF 问题。

EF 模型生成基于方法的尝试：

```
db.SomeStoredProcedure(); 
```

基于 ExecuteSqlCommand 的尝试：

```
db.Database.ExecuteSqlCommand("exec [SomeDB].[dbo].[SomeStoredProcedure]"); 
```

和：

```
var connectionString = db.Database.Connection.ConnectionString;
var connection = new System.Data.SqlClient.SqlConnection(connectionString);    
var cmd = connection.CreateCommand();
cmd.CommandText = "exec [SomeDB].[dbo].[SomeStoredProcedure]";

connection.Open();
var result = cmd.ExecuteNonQuery(); 
```

该代码可以缩短，但我认为该版本更便于调试和单步执行。

我不认为 Sql Client 一定是首选，但我觉得如果有类似问题的其他人被谷歌登陆这里，至少值得分享。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-26T07:01:02.740

更多注意： - 服务器配置指南 启用网络 COM+ 访问 (Windows Server 2003) 开始 ==> 控制面板 ==> 添加或删除程序 ==> 添加/删除 Windows 组件，选择应用程序服务器，然后单击详细信息。单击启用网络 COM+ 访问，然后单击确定。单击下一步，然后单击完成。
- 如果两台服务器之间有防火墙，请在此范围端口上为输入/输出打开防火墙：单击开始 ==> 控制面板 ==> 管理工具 ==> 组件服务。展开组件服务，展开计算机，右键单击我的电脑并选择属性。在我的电脑属性窗口中，单击选项卡默认协议，单击面向连接的 TCP/IP 并选择属性。在新窗口中，单击添加并键入新的 DTC 端口范围。单击确定以应用这些更改。必须重新启动服务器才能使新更改生效

# dll - 如何在经典 ASP 中使用 .NET 2.0 dll？

> ID：320989
> 
> 赞同：2
> 
> 时间：2008-11-26T15:01:49.217
> 
> 标签：dll, asp-classic, .net-2.0

我有针对 .NET 2.0 框架编译的 ac# .NET DLL。

客户使用经典 ASP，但需要 .NET DLL 的功能。有没有办法让他们使用 DLL？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-26T15:05:46.777

您需要将 .NET dll 用作[COM 可调用包装器](http://msdn.microsoft.com/en-us/library/ms973802.aspx)。这通常涉及将其标记为 COM 可见（通过属性），并将其注册为 COM 组件（regasm？）。

有关更多信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/zsfww439(VS.80).aspx)。

服务器当然需要 .NET 框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-26T15:05:13.487

我认为将其暴露给 COM 是您唯一的选择（可能是错误的）

# javascript - js水平滑动效果

> ID：320997
> 
> 赞同：1
> 
> 时间：2008-11-26T15:03:03.287
> 
> 标签：javascript, jquery, css, user-interface

我目前正在使用 jQuery，并且正在寻找一种将图像向左滑动的方法，因为新图像向左滑动到它的位置。

具体来说，我有一个 iphone 的静态图像。当我单击一个链接时，我需要在 iphone 的图像查看器上显示的当前图像向左滑出，因为新图像从右侧滑入。通常这些图像及其名称和路径将即时生成，因此无法事先存在于 DOM 中。

我更喜欢可以不显眼地应用的解决方案。

我知道jquery 有slideUp 和slideDown。为什么他们没有左右？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-26T15:13:54.153

jQuery 提供了一个 animate() 方法，允许您创建自定义动画。它需要四个参数：

1.  样式属性和值的映射
2.  可选速度
3.  可选的缓动类型
4.  可选的回调函数

因此，要将某些东西向左移动，您可以这样做：

```
$('#pic').animate({left:500}, 'slow'); 
```

当然 pic 会将其 CSS 位置设置为绝对或相对，以便新值生效。

```
#pic
{
    position:absolute;
    left:100px;
    top:10px;
} 
```

# c# - 在没有 Ajax 的 asp.net 回发后执行 javascript 函数

> ID：320999
> 
> 赞同：25
> 
> 时间：2008-11-26T15:03:58.620
> 
> 标签：c#, asp.net, .net-2.0

我希望在不使用 ajax 的情况下在 asp.net 回发后执行 javascript 函数。

我在我的偶数方法中尝试了以下方法，但没有运气：

```
Page.ClientScript.RegisterStartupScript(GetType(), "ShowPopup", "showCheckOutPopIn('Livraison',556);"); 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2010-04-22T09:35:40.210

您应该使用 ScriptManager 类，因为不推荐使用 Page.ClientScript 属性...

> ClientScriptManager 类是 ASP.NET 2.0 中的新类，它取代了用于管理现已弃用的脚本的 Page 类方法。
> [参考：MSDN - Page.ClientScript 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.page.clientscript.aspx)

ScriptManager 的优点是它适用于异步回发，因此如果您使用 AJAX，它将不适用于 ClientScriptManager。

您的代码如下所示：

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "ShowPopup", "showCheckOutPopIn('Livraison',556);", true); 
```

另请注意，如果您使用 AJAX 并且有一段 javascript 代码，您希望在多个回发中执行，那么您应该在第一个参数中引用您的 UpdatePanel，例如：

```
ScriptManager.RegisterStartupScript(MainUpdatePanel, typeof(string), "ShowPopup", "showCheckOutPopIn('Livraison',556);", true); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-26T15:08:59.763

**解决方案**

我需要使用以下重载添加脚本标签。

```
Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "script", "alert('Success!');", true); 
```

发现：[Re：回发后执行javascript](http://forums.asp.net/p/1314545/2605856.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T15:08:43.977

我不记得 Page.ClientScript 东西的确切语法/用法是什么......看起来它应该立即工作。但是如果推到了紧要关头，只需有一个简单的用户控件，您可以动态启用/禁用它，它将在回发后在脚本块中写出一个 javascript 方法。当页面加载时，此脚本会执行您希望执行的任何功能。

当然，问题是，这个 javascript 应该做什么，而你不能通过一些属性或其他会反映在标记中的设置在服务器端做什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-16T21:57:26.580

我认为这个人有同样的问题，他的解决方案也对我有用：

[http://forums.asp.net/t/1121450.aspx?HOW+TO+run+javascript+on+each+partial+postback+](http://forums.asp.net/t/1121450.aspx?HOW+TO+run+javascript+on+each+partial+postback+)

解决方案是简单地使用 ScriptManager 类函数： `ScriptManager.RegisterStartupScript(this, typeof(Sections), "Initialize", "initialize();", true);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-23T17:37:27.323

也许晚了，但你可以这样使用

**母版页：**

```
 ScriptManager.RegisterStartupScript(this, typeof(Page),
            "ShowRegister", string.Format(@"$( document ).ready(function() {{ShowErrorMessage('{0}');}});", message), true);true); 
```

**网络表格：**

```
 Page.ClientScript.RegisterClientScriptBlock(GetType(), "MEssage",
                          "$( document ).ready(function() {
ShowMessage('{0}');", true); 
```***************************