# StackOverflow 问答 11689000-11689999

# java - 在 JDO 中为拥有的关系设置 fetchSize

> ID：11689000
> 
> 赞同：0
> 
> 时间：2012-07-27T13:42:06.397
> 
> 标签：java, google-app-engine, jdo

有没有办法控制用于拥有关系的获取大小？

例子 ：

```
@PersistenceCapable
public class Employee {

  /** The contact info sets. */
  @Persistent(defaultFetchGroup = "true")
  @Element(dependent = "true")
  private Collection<ContactInfo> contactInfoSets;

  /** The key. */
  @PrimaryKey
  @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
  private Key key;

  public Collection<ContactInfo> getContactInfo() {
    return contactInfoSets;
  }

}

@PersistenceCapable
public class ContactInfo {

  /** The key. */
  @PrimaryKey
  @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
  private Key key;

} 
```

在上面的示例中，如果我这样做：

```
Employee e = pm.getObjectById(Employee.class, "1");
e.getContactInfoSets(); 
```

它将获取 20 组中的每个拥有的联系人。如何告诉 jdo 在单个查询中获取所有联系人？

PS：我尝试设置`pm.getFetchPlan().setFetchSize(FetchPlan.FETCH_SIZE_GREEDY);`但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:23:12.710

FetchPlan.setFetchSize 显然是供查询使用的（根据规范）。使用 GAE JDO 插件的 v2 应该加载所有关系对象，而不需要对数据库进行任何额外的调用（因为相关对象的 id 存储在拥有对象中）。该日志会告诉您进行了哪些数据存储调用

# c++ - 为什么智能指针不能在其构造函数中为我调用 new()？

> ID：11689004
> 
> 赞同：11
> 
> 时间：2012-07-27T13:42:17.893
> 
> 标签：c++, memory-management, smart-pointers

是否可以编写一个智能指针，在其构造函数中分配对象本身 - 而不是开发人员必须调用`new`？换句话说，而不是写：

`std::unique_ptr<myClass> my_ptr(new myClass(arg1, arg2))`

...可以写：

`std::smarter_ptr<myClass> my_ptr(arg1, arg2)`

语言语法是否能够表达这一点？这是可取的吗？可怕？我特别考虑防止这个错误（当然是我自己犯的）：

`myFunction(std::unique_ptr<myClass>(new myClass()), std::unique_ptr<myClass>(new myClass()))`

...如果第二次分配发生并在第一个对象安全地嵌入其智能指针之前抛出，则可能会泄漏首先分配的任何对象。但是更智能的指针真的可以保证安全吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-27T13:44:09.493

看[`make_shared()`](http://en.cppreference.com/w/cpp/memory/shared_ptr/make_shared). 它这样做会分配一个新对象并从中创建一个[`shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-27T13:57:42.510

一般来说，这不能用智能指针的构造函数来完成。对于是否应该使用指针参数来初始化智能指针或转发以创建新对象，将会存在歧义。

可以使用工厂函数来完成，例如：

```
template <typename T, typename... Args>
std::unique_ptr<T> make_unique(Args&&... args) {
    return std::unique_ptr<T>(new T(std::forward<Args>(args)...));
} 
```

如果您正在使用`std::shared_ptr`，那么您可以使用`std::make_shared`. 这也带来了只需要一个内存分配的优点，其中`std::shared_ptr<T>(new T)`对象需要一个，共享引用计数需要第二个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T13:50:35.020

这本质上是相同的问题，需要`std::find`和`std::find_if`。您无法将此 ctor 与`shared_ptr`案例中的现有 ctor 区分开来`new myClass(arg1)`。参数的数量相等，并且`arg1`可以具有任何类型。

因此，你需要另一个名字，那就是`make_shared`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-27T13:48:19.943

这在 C++11 中是新的可能，它添加了[完美的转发](http://www.justsoftwaresolutions.co.uk/cplusplus/rvalue_references_and_perfect_forwarding.html)和可变参数模板。

# gridview - ImageButton 事件在 GridView 中给出无效的回发

> ID：11689006
> 
> 赞同：-1
> 
> 时间：2012-07-27T13:42:26.643
> 
> 标签：gridview, postback, imagebutton, argumentexception

Gridview 回发问题：经过大量时间和挫折后，我正在为其他在相同情况下苦苦挣扎的人发布解决方案......

在 pageLoad 上，我绑定了 gridview 以进行数据的初始显示。一列有一个图像按钮（模板字段）。单击 ImageButton 导致错误：“无效回发”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:42:26.643

原因：我无意中未能在绑定周围的页面加载中放置（！IsPostback）条件。当 ImageButton 的 click 事件触发时，它会导致某种双重绑定；因此，产生了冲突。

# java - Oracle ADF、Oracle 富客户端用户界面、Fusion FX - 这些术语之间的联系？

> ID：11689016
> 
> 赞同：0
> 
> 时间：2012-07-27T13:42:40.533
> 
> 标签：java, oracle-adf

在以下网站上找到有关以下术语的信息确实不容易

**条款**：

*   甲骨文 ADF
*   Oracle 富客户端用户界面
*   融合外汇

**网站**：
[http ://www.oracle.com/webfolder/ux/middleware/richclient/index.html](http://www.oracle.com/webfolder/ux/middleware/richclient/index.html)

这些术语之间的定义/联系是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:31:03.513

Oracle ADF 是一个应用程序开发框架。Oracle ADF 是互连框架层（ADFm、ADFc、ADFv 等）的总称。

Oracle 富客户端基本上是 ADFv 层。在最基本的层面上，ADFv 是 JSF 组件的集合，尽管 Rich Client 肯定不止于此。

Fusion FX 是富客户端默认外观和感觉（例如皮肤）的名称。如果我没记错的话，过去还有其他默认皮肤（blaf？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:02:16.520

ADF 使用“丰富的组件”（如丰富的输入文本）。如果我没记错的话，Fusion FX 是默认样式/皮肤类型。

# c++ - 使变量即使在程序终止后仍然存在

> ID：11689019
> 
> 赞同：4
> 
> 时间：2012-07-27T13:42:58.473
> 
> 标签：c++, persist

即使在程序终止后，我也希望有一个变量持续存在。换句话说，即使在应用程序退出主函数后，我也希望变量保留在内存中。因此，如果我的应用程序再次启动，它可以直接从内存中访问该变量。这甚至可能吗？动态分配，例如`array=new int[size]`，会成功吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:45:58.220

这是不可能的。您必须将数据存储在文件或系统首选项中，以便在下次启动时访问它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T13:45:18.623

不，所有内存都由进程终止时的操作系统回收。你必须将你想要的东西保存到一个文件中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T14:20:16.773

**免责声明：** *将值存储到文件或使用某些框架功能（如[QSettings）](http://doc.qt.nokia.com/4.7-snapshot/qsettings.html)应该优于以下方法。*

如果您真的希望您的变量保留在内存中，并且您可能会冒险在重新启动时丢失这些值，那么请向操作系统请求**共享内存**。

如果您有 POSIX 兼容平台，如 Linux 或 Windows，请使用[POSIX 函数](http://linux.die.net/man/7/shm_overview)。引用手册：

> POSIX 共享内存对象具有内核持久性：共享内存对象将一直存在，直到系统关闭，或者直到所有进程都取消映射该对象并使用`shm_unlink`.

请注意，这会引入一种内存泄漏：即使在应用程序终止后，您的变量也会消耗内存。

# php - CodeIgniter URL 安全性

> ID：11689020
> 
> 赞同：0
> 
> 时间：2012-07-27T13:43:05.103
> 
> 标签：php, security, codeigniter, url-encoding

像这样使用时，是否在 CI 中转义了 URI/URL？

```
function foo($url_arg)
$this->input->get('foo'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:26:32.923

您的示例包含 2 种不同类型的输入 - 一个 URI 段（传递给 的参数`foo()`）和一个名为 的 GET 数组项`foo`。

[URI 类](http://codeigniter.com/user_guide/libraries/uri.html)包含一个名为的私有方法，`_filter_uri`正如您可能已经猜到的，它负责过滤 URI。首先，它将检查`$config['permitted_uri_chars']`位于其中的项目`config.php`并删除其中未定义的任何字符。然而，无论那里定义了什么，它也会执行以下操作：

```
// Convert programatic characters to entities
$bad = array('$', '(', ')', '%28', '%29');
$good = array('&#36;', '&#40;', '&#41;', '&#40;', '&#41;');
return str_replace($bad, $good, $str); 
```

[查看 URI 类源](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/URI.php)以获取更多信息。

关于 GET 数组项，如果`$config['allow_get_array']`（再次位于 中`config.php`）设置为`FALSE`，则 GET 数组将被完全销毁。`$this->input->get('foo')`，默认情况下，允许“仅字母数字（和一些其他）字符”。如果包含第二个参数`TRUE`，CodeIgniter 将通过其 XSS 过滤器运行值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-30T10:48:09.543

您可以通过打开 application/config/config.php 文件并设置以下内容来启用 csrf 保护：

$config['csrf_protection'] = 真；

# powershell - 删除 W2K3 回收站的内容

> ID：11689023
> 
> 赞同：0
> 
> 时间：2012-07-27T13:43:14.220
> 
> 标签：powershell, scripting, code-cleanup, recycle-bin

编写一个 Powershell 脚本，从虚拟服务器的回收站中删除所有内容。出于某种原因，我在查找 Windows 2003 回收站的路径时遇到错误，并且无法找到 bin 以删除其中的所有内容。想知道这里是否有人可以就我在这段代码片段中做错了什么给我一些建议：

```
if($serverVersion.name -like '*2003*'){
$dir = "\\$server" + '\C$\recycled'
}
elseif($serverVersion.name -like '*2008*'){
$dir = "\\$server" + '\C$\$recycle.bin'
}

$recycleArray = @()
foreach ($item in get-childitem -path $dir){
    $recycleArray += $item
}

for ($i = 0; $i -le $recycleArray.length; $i++){
    $removal = $dir + "\" + $recycleArray[$i]
    remove-item $removal -force -recurse 
    } 
```

我能够正确地从 W2K8 回收站中删除所有内容，因此一旦我能够找到到回收站的路径，代码应该可以正常工作。这是我收到的错误消息的图片，供那些好奇的人看：

![在此处输入图像描述](../Images/a9d6d8936b5e62a464011d85d1168297.png)

另外，出于好奇，有没有办法减少所有这些代码并为 2003 年和 2008 年制作 2 个单行代码？我意识到我写出的当前方式并没有利用 Powershell 的 cmdlet，并且一旦我弄清楚 W2K3 回收站有什么问题，就想对其进行改进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:24:36.523

问题是在 widows server 2003 c:\recycler not c:\recycled 的这个位置找到了回收站，所以只需更改您的代码，它应该可以工作。

试试这个代码，看看它是否能解决问题

```
if($serverVersion.name -like '*2003*'){
$dir = "\\$server" + '\C$\recycled'
}
elseif($serverVersion.name -like '*2008*'){
$dir = "\\$server" + '\C$\$recycle.bin'
}

foreach ($item in get-childitem -path $dir){
     remove-item $item.FullName -Force -Recurse
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T11:04:50.827

因此，我通过诸如 Invoke-Command 之类的 powershell 远程处理或本地计划任务来运行我的，而不是使用 UNC 路径，并且我只检查所有驱动器是否有 2003/2008 样式的回收站，因为该文件夹将出现在从中删除数据的任何驱动器上.这可能完全符合您的要求，也可能不完全符合您的要求，但也许会有所帮助。

```
$local_drives = Get-WmiObject Win32_LogicalDisk | Where-Object {$_.DriveType -eq 3}
foreach ($drive in $local_drives)
{
    $drive_letter = $drive.DeviceID
    $recycle_bins_03 = $drive_letter + '\RECYCLER'
    if (Test-Path $recycle_bins_03)
    {
        Get-ChildItem $recycle_bins_03 -Force | Remove-Item -Force -Recurse
    }
    $recycle_bins_08 = $drive_letter + '\$RECYCLE.BIN'
    if (Test-Path $recycle_bins_08)
    {
        Get-ChildItem $recycle_bins_08 -Force | Remove-Item -Force -Recurse
    }
} 
```

# c# - WPF中拖放按钮的控件

> ID：11689024
> 
> 赞同：-1
> 
> 时间：2012-07-27T13:43:16.850
> 
> 标签：c#, wpf, drag-and-drop

我只想知道哪个控件（wrapPanel、listView 等）可以使项目可拖动？当我说项目时，我的意思是按钮 - 想要控制 x 按钮并改变它们的位置，所以如果我拖动按钮 1 并放入索引 10 我希望其余按钮改变它们的位置（从 2 到 10，id/位置 - 1）。如果这在两种控制中都可能，那么哪一种更容易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:48:34.030

本文有一个拖动画布示例。[在画布中拖动元素](http://www.codeproject.com/Articles/15354/Dragging-Elements-in-a-Canvas)

对于位置，您可以将每个元素的位置保存在一个属性中，然后当您放下一个元素时，您会得到他的位置，计算它的边界。然后，您将遍历所有元素并根据需要修改它们的位置

# macos - clang 是否允许预处理器 ==？

> ID：11689025
> 
> 赞同：1
> 
> 时间：2012-07-27T13:43:17.023
> 
> 标签：macos, clang, osx-mountain-lion

我正在尝试在我的 Mac OS X 10.8 上编译 PHP，但遇到以下问题：

```
In file included from /Users/ryan/Downloads/php-5.4.5/ext/phar/util.c:23:
ext/phar/phar_internal.h:223:19: error: invalid token at start of a preprocessor
      expression
# if SIZEOF_SHORT == 2
                  ^ 
```

我不确定为什么会发生此错误，因为这对我来说看起来不错。我已经打开了头文件，如果没有，可以进行更改，或者将 if 全部删除，因为我知道我的系统应该是什么，但我想知道这是否是解决这个问题的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:34:10.483

我并没有真正找到解决这个问题的方法，但是我删除了 if 并留下了无论如何都会被处理的行并且程序编译得很好。我真的不知道这个文件有什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:57:49.727

它看起来像`SIZEOF_SHORT`扩展到没有令牌。您应该调查 d 的位置`SIZEOF_SHORT`（`#define`这可能在命令行上`-DSIZEOF_SHORT=`）并修复它以提供正确的值。

或者，你可以使用这个：

```
#include "limits.h"
/* ... */
#if SHRT_BIT == CHAR_BIT * 2 
```

# php - jquery自动完成 - 返回和格式化多个元素

> ID：11689028
> 
> 赞同：0
> 
> 时间：2012-07-27T13:43:19.253
> 
> 标签：php, jquery, jquery-ui, codeigniter, jquery-ui-autocomplete

那里描述使用 jquery/ui 自动完成的完全不同方法的教程数量惊人。找出正确的方法来做这件事，为什么要这样做，以及如何改进它是极其困难的。

我只需要 1 个元素就能使其正常工作，但现在需要更多。

为简单起见，我只从 mySQL 返回 2 个元素（group_list.name 和 group_list.description）。我想以某种方式通过自动完成将它们显示在一起！我希望这很容易！

HTML：

```
<form method="POST" url="<?php echo base_url() ?>/blurb/main/search" action="welcome/find_group">
    <input type="text" id="find_group" name="find_group" placeholder=" Find Group"></input>
    <input type="image" id="image" src="<?php echo base_url() ?>img/board/icons/add.jpg" id="homeSubmit" value="X"></input>
</form> 
```

JS：

```
$(function() {
$( "#find_group" ).autocomplete({
        source: function(request, response) {
            $.ajax({
            url: "welcome/search/",
            data: { term: $("#find_group").val()},
            dataType: "json",
            type: "POST",
            success: function(data){
               var resp = $.map(data,function(obj){
                    return obj.name;
               }); 
               response(resp);
            }
        });
    },
    minLength: 1
    });
}); 
```

PHP：

控制器（欢迎/搜索）

```
 public function search()
    {
        $term = $this->input->post('term', TRUE);
        $this->nav_model->autocomplete($term);
    } 
```

模型->自动完成：

```
public function autocomplete($term)
{
    $term = $this->page_model->trimfilter($term);
    $query = $this->db->query("SELECT g.name, g.description FROM group_list g
                                WHERE g.name LIKE '".$term."%'
                                GROUP BY g.name
                                LIMIT 0, 5");
    echo json_encode($query->result_array());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:14:19.310

在你的 ajax 的成功函数中尝试这样的事情：

```
success: function(data) {
        response($.map(data, function(obj) {
            return {
            label: obj.description,
            value: obj.name,
            id: obj.name
            };
        }));
    } 
```

# php - PHP使用换行符显示文本

> ID：11689031
> 
> 赞同：1
> 
> 时间：2012-07-27T13:43:28.443
> 
> 标签：php, sql, line, multiline, break

我用了

```
<textarea name="question" class="input" width="250"></textarea> 
```

在sql中添加数据。我使用了多行，在数据库中数据也只存储在多行中。

然后我用

```
$question=$row['1'];
echo "<tr><td colspan='5'>",$row[1],"</td></tr> 
```

显示数据，但数据以单行显示。如何使它像在数据库中一样出现在多行中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T13:47:29.227

正确的

```
echo "<tr><td colspan='5'>",$row[1],"</td></tr> 
```

至

```
echo "<tr><td colspan='5'>".nl2br($row[1])."</td></tr>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T13:46:32.800

您需要将换行符转换为 HTML 换行符。尝试 PHP 的`nl2br`：

```
echo "<tr><td colspan='5'>".nl2br($row[1])."</td></tr> 
```

# c++ - 学习C++如何从初级阶段突破

> ID：11689050
> 
> 赞同：2
> 
> 时间：2012-07-27T13:44:19.643
> 
> 标签：c++, c

在我进入大学生活的阶段之前，我拿起一本书开始学习 C++（阅读和写作，当然还有实验），我设法应付了我在第一学期学习的计算机编程科目uni 的生活（我正在接受它）。

我什至写了一个名为[Cellular Automata Conway's Game of Life](http://www.mediafire.com/?cotc1cd0k9uokc5)的程序，这是我的讲师给我的标题。

### 问题：

1.  我一直在想的问题是，我怎样才能真正开始做一些现实世界的项目？我觉得我能掌握这门语言的语法、规则和逻辑，但我不能真正善用它。我觉得有很多事情是使用 C++ 标准库无法完成的。

2.  如果我真的想突破这个，我是否需要开始下载 SDK、框架或 API 并开始使用它来创建软件？或者程序员可以从 C++ 的标准库中创建一个完整的软件？

3.  我有一个使用 C++ 创建浏览器的想法，问题是我什至找不到如何去做的方法（如何使它请求网页并取回内容，如何将 Flash 播放器连接到我的浏览器等)，我们可以使用标准库来实现所有这些，还是需要一些外部代理来实现？

感谢您花时间阅读我的情况。

# jquery - 需要与 jquery 版本 1.7.1 或 2 一起使用的最新版本的 jscrollpane.js

> ID：11689052
> 
> 赞同：-3
> 
> 时间：2012-07-27T13:44:25.400
> 
> 标签：jquery, jscrollpane

由于某些安全设置，我无法访问 githup。任何机构都可以共享适用于 jquery 版本 1.7.1 或 2 的最新版本的 jscrollpane.js。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:09:22.987

我不会把它搁置太久，因为我不会尝试充当其他人文件的次要主机。但我以前也曾在类似的船上，所以我感到你的痛苦，所以尽管如此，我还是会破例这个网站的真实意图适得其反，这一次我会这样做。

这里是文件[下载](http://rdpgroup.com/vitch-jScrollPane-2.0.0beta11-6-gf3143b0.zip)

或网站本身的完整缩小版

```
/*
 * jScrollPane - v2.0.0beta12 - 2012-07-24
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2010 Kelvin Luck
 * Dual licensed under the MIT and GPL licenses.
 */
(function(b,a,c){b.fn.jScrollPane=function(e){function d(D,O){var ay,Q=this,Y,aj,v,al,T,Z,y,q,az,aE,au,i,I,h,j,aa,U,ap,X,t,A,aq,af,am,G,l,at,ax,x,av,aH,f,L,ai=true,P=true,aG=false,k=false,ao=D.clone(false,false).empty(),ac=b.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";aH=D.css("paddingTop")+" "+D.css("paddingRight")+" "+D.css("paddingBottom")+" "+D.css("paddingLeft");f=(parseInt(D.css("paddingLeft"),10)||0)+(parseInt(D.css("paddingRight"),10)||0);function ar(aQ){var aL,aN,aM,aJ,aI,aP,aO=false,aK=false;ay=aQ;if(Y===c){aI=D.scrollTop();aP=D.scrollLeft();D.css({overflow:"hidden",padding:0});aj=D.innerWidth()+f;v=D.innerHeight();D.width(aj);Y=b('<div class="jspPane" />').css("padding",aH).append(D.children());al=b('<div class="jspContainer" />').css({width:aj+"px",height:v+"px"}).append(Y).appendTo(D)}else{D.css("width","");aO=ay.stickToBottom&&K();aK=ay.stickToRight&&B();aJ=D.innerWidth()+f!=aj||D.outerHeight()!=v;if(aJ){aj=D.innerWidth()+f;v=D.innerHeight();al.css({width:aj+"px",height:v+"px"})}if(!aJ&&L==T&&Y.outerHeight()==Z){D.width(aj);return}L=T;Y.css("width","");D.width(aj);al.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}Y.css("overflow","auto");if(aQ.contentWidth){T=aQ.contentWidth}else{T=Y[0].scrollWidth}Z=Y[0].scrollHeight;Y.css("overflow","");y=T/aj;q=Z/v;az=q>1;aE=y>1;if(!(aE||az)){D.removeClass("jspScrollable");Y.css({top:0,width:al.width()-f});n();E();R();w()}else{D.addClass("jspScrollable");aL=ay.maintainPosition&&(I||aa);if(aL){aN=aC();aM=aA()}aF();z();F();if(aL){N(aK?(T-aj):aN,false);M(aO?(Z-v):aM,false)}J();ag();an();if(ay.enableKeyboardNavigation){S()}if(ay.clickOnTrack){p()}C();if(ay.hijackInternalLinks){m()}}if(ay.autoReinitialise&&!av){av=setInterval(function(){ar(ay)},ay.autoReinitialiseDelay)}else{if(!ay.autoReinitialise&&av){clearInterval(av)}}aI&&D.scrollTop(0)&&M(aI,false);aP&&D.scrollLeft(0)&&N(aP,false);D.trigger("jsp-initialised",[aE||az])}function aF(){if(az){al.append(b('<div class="jspVerticalBar" />').append(b('<div class="jspCap jspCapTop" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragTop" />'),b('<div class="jspDragBottom" />'))),b('<div class="jspCap jspCapBottom" />')));U=al.find(">.jspVerticalBar");ap=U.find(">.jspTrack");au=ap.find(">.jspDrag");if(ay.showArrows){aq=b('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",aD(0,-1)).bind("click.jsp",aB);af=b('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",aD(0,1)).bind("click.jsp",aB);if(ay.arrowScrollOnHover){aq.bind("mouseover.jsp",aD(0,-1,aq));af.bind("mouseover.jsp",aD(0,1,af))}ak(ap,ay.verticalArrowPositions,aq,af)}t=v;al.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){t-=b(this).outerHeight()});au.hover(function(){au.addClass("jspHover")},function(){au.removeClass("jspHover")}).bind("mousedown.jsp",function(aI){b("html").bind("dragstart.jsp selectstart.jsp",aB);au.addClass("jspActive");var s=aI.pageY-au.position().top;b("html").bind("mousemove.jsp",function(aJ){V(aJ.pageY-s,false)}).bind("mouseup.jsp mouseleave.jsp",aw);return false});o()}}function o(){ap.height(t+"px");I=0;X=ay.verticalGutter+ap.outerWidth();Y.width(aj-X-f);try{if(U.position().left===0){Y.css("margin-left",X+"px")}}catch(s){}}function z(){if(aE){al.append(b('<div class="jspHorizontalBar" />').append(b('<div class="jspCap jspCapLeft" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragLeft" />'),b('<div class="jspDragRight" />'))),b('<div class="jspCap jspCapRight" />')));am=al.find(">.jspHorizontalBar");G=am.find(">.jspTrack");h=G.find(">.jspDrag");if(ay.showArrows){ax=b('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",aD(-1,0)).bind("click.jsp",aB);x=b('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",aD(1,0)).bind("click.jsp",aB);
if(ay.arrowScrollOnHover){ax.bind("mouseover.jsp",aD(-1,0,ax));x.bind("mouseover.jsp",aD(1,0,x))}ak(G,ay.horizontalArrowPositions,ax,x)}h.hover(function(){h.addClass("jspHover")},function(){h.removeClass("jspHover")}).bind("mousedown.jsp",function(aI){b("html").bind("dragstart.jsp selectstart.jsp",aB);h.addClass("jspActive");var s=aI.pageX-h.position().left;b("html").bind("mousemove.jsp",function(aJ){W(aJ.pageX-s,false)}).bind("mouseup.jsp mouseleave.jsp",aw);return false});l=al.innerWidth();ah()}}function ah(){al.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){l-=b(this).outerWidth()});G.width(l+"px");aa=0}function F(){if(aE&&az){var aI=G.outerHeight(),s=ap.outerWidth();t-=aI;b(am).find(">.jspCap:visible,>.jspArrow").each(function(){l+=b(this).outerWidth()});l-=s;v-=s;aj-=aI;G.parent().append(b('<div class="jspCorner" />').css("width",aI+"px"));o();ah()}if(aE){Y.width((al.outerWidth()-f)+"px")}Z=Y.outerHeight();q=Z/v;if(aE){at=Math.ceil(1/y*l);if(at>ay.horizontalDragMaxWidth){at=ay.horizontalDragMaxWidth}else{if(at<ay.horizontalDragMinWidth){at=ay.horizontalDragMinWidth}}h.width(at+"px");j=l-at;ae(aa)}if(az){A=Math.ceil(1/q*t);if(A>ay.verticalDragMaxHeight){A=ay.verticalDragMaxHeight}else{if(A<ay.verticalDragMinHeight){A=ay.verticalDragMinHeight}}au.height(A+"px");i=t-A;ad(I)}}function ak(aJ,aL,aI,s){var aN="before",aK="after",aM;if(aL=="os"){aL=/Mac/.test(navigator.platform)?"after":"split"}if(aL==aN){aK=aL}else{if(aL==aK){aN=aL;aM=aI;aI=s;s=aM}}aJ[aN](aI)[aK](s)}function aD(aI,s,aJ){return function(){H(aI,s,this,aJ);this.blur();return false}}function H(aL,aK,aO,aN){aO=b(aO).addClass("jspActive");var aM,aJ,aI=true,s=function(){if(aL!==0){Q.scrollByX(aL*ay.arrowButtonSpeed)}if(aK!==0){Q.scrollByY(aK*ay.arrowButtonSpeed)}aJ=setTimeout(s,aI?ay.initialDelay:ay.arrowRepeatFreq);aI=false};s();aM=aN?"mouseout.jsp":"mouseup.jsp";aN=aN||b("html");aN.bind(aM,function(){aO.removeClass("jspActive");aJ&&clearTimeout(aJ);aJ=null;aN.unbind(aM)})}function p(){w();if(az){ap.bind("mousedown.jsp",function(aN){if(aN.originalTarget===c||aN.originalTarget==aN.currentTarget){var aL=b(this),aO=aL.offset(),aM=aN.pageY-aO.top-I,aJ,aI=true,s=function(){var aR=aL.offset(),aS=aN.pageY-aR.top-A/2,aP=v*ay.scrollPagePercent,aQ=i*aP/(Z-v);if(aM<0){if(I-aQ>aS){Q.scrollByY(-aP)}else{V(aS)}}else{if(aM>0){if(I+aQ<aS){Q.scrollByY(aP)}else{V(aS)}}else{aK();return}}aJ=setTimeout(s,aI?ay.initialDelay:ay.trackClickRepeatFreq);aI=false},aK=function(){aJ&&clearTimeout(aJ);aJ=null;b(document).unbind("mouseup.jsp",aK)};s();b(document).bind("mouseup.jsp",aK);return false}})}if(aE){G.bind("mousedown.jsp",function(aN){if(aN.originalTarget===c||aN.originalTarget==aN.currentTarget){var aL=b(this),aO=aL.offset(),aM=aN.pageX-aO.left-aa,aJ,aI=true,s=function(){var aR=aL.offset(),aS=aN.pageX-aR.left-at/2,aP=aj*ay.scrollPagePercent,aQ=j*aP/(T-aj);if(aM<0){if(aa-aQ>aS){Q.scrollByX(-aP)}else{W(aS)}}else{if(aM>0){if(aa+aQ<aS){Q.scrollByX(aP)}else{W(aS)}}else{aK();return}}aJ=setTimeout(s,aI?ay.initialDelay:ay.trackClickRepeatFreq);aI=false},aK=function(){aJ&&clearTimeout(aJ);aJ=null;b(document).unbind("mouseup.jsp",aK)};s();b(document).bind("mouseup.jsp",aK);return false}})}}function w(){if(G){G.unbind("mousedown.jsp")}if(ap){ap.unbind("mousedown.jsp")}}function aw(){b("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");if(au){au.removeClass("jspActive")}if(h){h.removeClass("jspActive")}}function V(s,aI){if(!az){return}if(s<0){s=0}else{if(s>i){s=i}}if(aI===c){aI=ay.animateScroll}if(aI){Q.animate(au,"top",s,ad)}else{au.css("top",s);ad(s)}}function ad(aI){if(aI===c){aI=au.position().top}al.scrollTop(0);I=aI;var aL=I===0,aJ=I==i,aK=aI/i,s=-aK*(Z-v);if(ai!=aL||aG!=aJ){ai=aL;aG=aJ;D.trigger("jsp-arrow-change",[ai,aG,P,k])}u(aL,aJ);Y.css("top",s);D.trigger("jsp-scroll-y",[-s,aL,aJ]).trigger("scroll")}function W(aI,s){if(!aE){return}if(aI<0){aI=0}else{if(aI>j){aI=j}}if(s===c){s=ay.animateScroll}if(s){Q.animate(h,"left",aI,ae)
}else{h.css("left",aI);ae(aI)}}function ae(aI){if(aI===c){aI=h.position().left}al.scrollTop(0);aa=aI;var aL=aa===0,aK=aa==j,aJ=aI/j,s=-aJ*(T-aj);if(P!=aL||k!=aK){P=aL;k=aK;D.trigger("jsp-arrow-change",[ai,aG,P,k])}r(aL,aK);Y.css("left",s);D.trigger("jsp-scroll-x",[-s,aL,aK]).trigger("scroll")}function u(aI,s){if(ay.showArrows){aq[aI?"addClass":"removeClass"]("jspDisabled");af[s?"addClass":"removeClass"]("jspDisabled")}}function r(aI,s){if(ay.showArrows){ax[aI?"addClass":"removeClass"]("jspDisabled");x[s?"addClass":"removeClass"]("jspDisabled")}}function M(s,aI){var aJ=s/(Z-v);V(aJ*i,aI)}function N(aI,s){var aJ=aI/(T-aj);W(aJ*j,s)}function ab(aV,aQ,aJ){var aN,aK,aL,s=0,aU=0,aI,aP,aO,aS,aR,aT;try{aN=b(aV)}catch(aM){return}aK=aN.outerHeight();aL=aN.outerWidth();al.scrollTop(0);al.scrollLeft(0);while(!aN.is(".jspPane")){s+=aN.position().top;aU+=aN.position().left;aN=aN.offsetParent();if(/^body|html$/i.test(aN[0].nodeName)){return}}aI=aA();aO=aI+v;if(s<aI||aQ){aR=s-ay.verticalGutter}else{if(s+aK>aO){aR=s-v+aK+ay.verticalGutter}}if(aR){M(aR,aJ)}aP=aC();aS=aP+aj;if(aU<aP||aQ){aT=aU-ay.horizontalGutter}else{if(aU+aL>aS){aT=aU-aj+aL+ay.horizontalGutter}}if(aT){N(aT,aJ)}}function aC(){return -Y.position().left}function aA(){return -Y.position().top}function K(){var s=Z-v;return(s>20)&&(s-aA()<10)}function B(){var s=T-aj;return(s>20)&&(s-aC()<10)}function ag(){al.unbind(ac).bind(ac,function(aL,aM,aK,aI){var aJ=aa,s=I;Q.scrollBy(aK*ay.mouseWheelSpeed,-aI*ay.mouseWheelSpeed,false);return aJ==aa&&s==I})}function n(){al.unbind(ac)}function aB(){return false}function J(){Y.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(s){ab(s.target,false)})}function E(){Y.find(":input,a").unbind("focus.jsp")}function S(){var s,aI,aK=[];aE&&aK.push(am[0]);az&&aK.push(U[0]);Y.focus(function(){D.focus()});D.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(aN){if(aN.target!==this&&!(aK.length&&b(aN.target).closest(aK).length)){return}var aM=aa,aL=I;switch(aN.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:s=aN.keyCode;aJ();break;case 35:M(Z-v);s=null;break;case 36:M(0);s=null;break}aI=aN.keyCode==s&&aM!=aa||aL!=I;return !aI}).bind("keypress.jsp",function(aL){if(aL.keyCode==s){aJ()}return !aI});if(ay.hideFocus){D.css("outline","none");if("hideFocus" in al[0]){D.attr("hideFocus",true)}}else{D.css("outline","");if("hideFocus" in al[0]){D.attr("hideFocus",false)}}function aJ(){var aM=aa,aL=I;switch(s){case 40:Q.scrollByY(ay.keyboardSpeed,false);break;case 38:Q.scrollByY(-ay.keyboardSpeed,false);break;case 34:case 32:Q.scrollByY(v*ay.scrollPagePercent,false);break;case 33:Q.scrollByY(-v*ay.scrollPagePercent,false);break;case 39:Q.scrollByX(ay.keyboardSpeed,false);break;case 37:Q.scrollByX(-ay.keyboardSpeed,false);break}aI=aM!=aa||aL!=I;return aI}}function R(){D.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function C(){if(location.hash&&location.hash.length>1){var aK,aI,aJ=escape(location.hash.substr(1));try{aK=b("#"+aJ+', a[name="'+aJ+'"]')}catch(s){return}if(aK.length&&Y.find(aJ)){if(al.scrollTop()===0){aI=setInterval(function(){if(al.scrollTop()>0){ab(aK,true);b(document).scrollTop(al.position().top);clearInterval(aI)}},50)}else{ab(aK,true);b(document).scrollTop(al.position().top)}}}}function m(){if(b(document.body).data("jspHijack")){return}b(document.body).data("jspHijack",true);b(document.body).delegate("a[href*=#]","click",function(s){var aI=this.href.substr(0,this.href.indexOf("#")),aK=location.href,aO,aP,aJ,aM,aL,aN;if(location.href.indexOf("#")!==-1){aK=location.href.substr(0,location.href.indexOf("#"))}if(aI!==aK){return}aO=escape(this.href.substr(this.href.indexOf("#")+1));aP;try{aP=b("#"+aO+', a[name="'+aO+'"]')}catch(aQ){return}if(!aP.length){return}aJ=aP.closest(".jspScrollable");aM=aJ.data("jsp");aM.scrollToElement(aP,true);if(aJ[0].scrollIntoView){aL=b(a).scrollTop();aN=aP.offset().top;if(aN<aL||aN>aL+b(a).height()){aJ[0].scrollIntoView()}}s.preventDefault()
})}function an(){var aJ,aI,aL,aK,aM,s=false;al.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(aN){var aO=aN.originalEvent.touches[0];aJ=aC();aI=aA();aL=aO.pageX;aK=aO.pageY;aM=false;s=true}).bind("touchmove.jsp",function(aQ){if(!s){return}var aP=aQ.originalEvent.touches[0],aO=aa,aN=I;Q.scrollTo(aJ+aL-aP.pageX,aI+aK-aP.pageY);aM=aM||Math.abs(aL-aP.pageX)>5||Math.abs(aK-aP.pageY)>5;return aO==aa&&aN==I}).bind("touchend.jsp",function(aN){s=false}).bind("click.jsp-touchclick",function(aN){if(aM){aM=false;return false}})}function g(){var s=aA(),aI=aC();D.removeClass("jspScrollable").unbind(".jsp");D.replaceWith(ao.append(Y.children()));ao.scrollTop(s);ao.scrollLeft(aI);if(av){clearInterval(av)}}b.extend(Q,{reinitialise:function(aI){aI=b.extend({},ay,aI);ar(aI)},scrollToElement:function(aJ,aI,s){ab(aJ,aI,s)},scrollTo:function(aJ,s,aI){N(aJ,aI);M(s,aI)},scrollToX:function(aI,s){N(aI,s)},scrollToY:function(s,aI){M(s,aI)},scrollToPercentX:function(aI,s){N(aI*(T-aj),s)},scrollToPercentY:function(aI,s){M(aI*(Z-v),s)},scrollBy:function(aI,s,aJ){Q.scrollByX(aI,aJ);Q.scrollByY(s,aJ)},scrollByX:function(s,aJ){var aI=aC()+Math[s<0?"floor":"ceil"](s),aK=aI/(T-aj);W(aK*j,aJ)},scrollByY:function(s,aJ){var aI=aA()+Math[s<0?"floor":"ceil"](s),aK=aI/(Z-v);V(aK*i,aJ)},positionDragX:function(s,aI){W(s,aI)},positionDragY:function(aI,s){V(aI,s)},animate:function(aI,aL,s,aK){var aJ={};aJ[aL]=s;aI.animate(aJ,{duration:ay.animateDuration,easing:ay.animateEase,queue:false,step:aK})},getContentPositionX:function(){return aC()},getContentPositionY:function(){return aA()},getContentWidth:function(){return T},getContentHeight:function(){return Z},getPercentScrolledX:function(){return aC()/(T-aj)},getPercentScrolledY:function(){return aA()/(Z-v)},getIsScrollableH:function(){return aE},getIsScrollableV:function(){return az},getContentPane:function(){return Y},scrollToBottom:function(s){V(i,s)},hijackInternalLinks:b.noop,destroy:function(){g()}});ar(O)}e=b.extend({},b.fn.jScrollPane.defaults,e);b.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){e[this]=e[this]||e.speed});return this.each(function(){var f=b(this),g=f.data("jsp");if(g){g.reinitialise(e)}else{b("script",f).filter('[type="text/javascript"],not([type])').remove();g=new d(f,e);f.data("jsp",g)}})};b.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,stickToBottom:false,stickToRight:false,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:c,animateScroll:false,animateDuration:300,animateEase:"linear",hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(jQuery,this); 
```

# visual-studio - 无法在 VS 2012 RC 中正确添加服务参考

> ID：11689076
> 
> 赞同：10
> 
> 时间：2012-07-27T13:45:19.373
> 
> 标签：visual-studio, visual-studio-2012, add-references-dialog

我只是添加服务的地址，按 GO 并确定。之后生成的 Reference.svcmap 看起来正确，但 Reference.cs 是空的！

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.17626
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------ 
```

就这样。无法使用 ServiceClient 对象！
PS：在 VS2010 中添加相同的服务引用可以正常工作，并且 reference.cs 已完全生成。
问题是：生成ClientObject是否有问题，为什么VS没有给我任何警告信息。另外，如果有人遇到过这样的问题，我该如何解决？

**版本信息：**
*Microsoft Visual Studio Ultimate 2012 RC
版本 11.0.50706.0 QRELRC 2012 年 7 月
Microsoft .NET Framework
版本 4.5.50501*

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-17T13:15:30.057

我遇到了完全相同的问题。我在此页面上未选中 3:rd 方 dll:s： [链接](http://uliasz.com/2011/06/wcf-custom-tool-error-failed-to-generate-code-for-the-service-reference/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T13:06:21.733

11.0.50727.1 RTMREL 中的相同问题

// 运行时版本：4.0.30319.17929

取消选中“配置服务引用”对话框中的“在引用的程序集中重用类型”复选框。

为我工作： [链接](https://stackoverflow.com/questions/11112960/visual-studio-2012-error-reference-svcmap-throwing-error)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T19:29:49.743

检查您是否有任何警告。
我曾经遇到过这个问题，并发现了有关锁定 dll 的警告。
修复警告后，再次创建了 reference.cs。

# php - 页面重新加载时标题中随机出现中断

> ID：11689077
> 
> 赞同：0
> 
> 时间：2012-07-27T13:45:26.553
> 
> 标签：php, javascript, html, css

所以我做了一个网站，偶尔在加载或刷新网站时，标题和导航菜单之间会出现一个断点。有谁知道为什么会发生这种情况？链接是[http://tomekc.com/rich](http://tomekc.com/rich)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:12:15.110

通过切换标题中“p”标签上的位置，我能够重现您的错误。但是智浩是正确的，边距和填充确实需要一个内联块（或块）才能正确渲染。此外，“p”标签确实不应该是内联的，因此您可能想要更改该标签（或者如果您要覆盖本机显示，则添加一些空白以不换行）。

```
p {
    white-space: nowrap;
}
span {
    display: inline-block;
} 
```

现在，在此更改之后填充可能会稍微关闭，但它会解决您的刷新问题。另请注意，inline-block 确实是 ie8+ 功能，因此如果您只针对更现代的浏览器，此解决方案是可以的，但如果您针对更大的受众（企业喜欢旧浏览器），您可能应该稍微重构 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:24:53.467

所以，我实际上可以通过将我的`<link>`标签移动到页面更高的位置来修复它......非常简单的修复，哈哈。不过，谢谢你们的帮助，伙计们。

# sql - SQL 选择字段总和小于 N 的元素

> ID：11689080
> 
> 赞同：9
> 
> 时间：2012-07-27T13:45:30.860
> 
> 标签：sql, sqlite, postgresql, aggregate-functions, sql-limit

鉴于我有一个包含以下内容的表格，非常简单：

```
# select * from messages;
  id | verbosity 
 ----+-----------
   1 |        20
   2 |        20
   3 |        20
   4 |        30
   5 |       100
 (5 rows) 
```

我想选择 N 条消息，其详细程度之和低于 Y（出于测试目的，假设它应该是 70，那么正确的结果将是 id 为 1、2、3 的消息）。对我来说真的很重要，该解决方案应该独立于数据库（它至少应该在 Postgres 和 SQLite 上工作）。

我正在尝试类似的东西：

```
SELECT * FROM messages GROUP BY id HAVING SUM(verbosity) < 70; 
```

但是它似乎没有按预期工作，因为它实际上并没有对详细度列中的所有值求和。

我将非常感谢任何提示/帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-27T13:52:34.597

```
SELECT m.id, sum(m1.verbosity) AS total
FROM   messages m
JOIN   messages m1 ON m1.id <= m.id
WHERE  m.verbosity < 70    -- optional, to avoid pointless evaluation
GROUP  BY m.id
HAVING SUM(m1.verbosity) < 70
ORDER  BY total DESC
LIMIT  1; 
```

这假设一个独特的、上升的，`id`就像你在你的例子中一样。

* * *

在现代 Postgres 中 - 或者通常使用**现代标准 SQL**（但*不在*SQLite 中）：

### 简单 CTE

```
WITH cte AS (
   SELECT *, sum(verbosity) OVER (ORDER BY id) AS total
   FROM   messages
   )
SELECT *
FROM   cte
WHERE  total < 70
ORDER  BY id; 
```

### 递归 CTE

对于只检索小集合的大表应该更快。

```
WITH RECURSIVE cte AS (
   (  -- parentheses required
   SELECT id, verbosity, verbosity AS total
   FROM   messages
   ORDER  BY id
   LIMIT  1
   )

   UNION ALL 
   SELECT c1.id, c1.verbosity, c.total + c1.verbosity 
   FROM   cte c
   JOIN   LATERAL (
      SELECT *
      FROM   messages
      WHERE  id > c.id
      ORDER  BY id
      LIMIT  1
      ) c1 ON  c1.verbosity < 70 - c.total
   WHERE c.total < 70
   )
SELECT *
FROM   cte
ORDER  BY id; 
```

所有标准 SQL，除了**`LIMIT`**.

严格来说，不存在“独立于数据库”之类的东西。有各种 SQL 标准，但没有一个 RDBMS 完全符合。`LIMIT`适用于 PostgreSQL 和 SQLite（以及其他一些）。用于`TOP 1`SQL Server，`rownum`用于 Oracle。这是[Wikipedia 上的完整列表。](https://en.wikipedia.org/wiki/Select_%28SQL%29#Result_limits)

[SQL:2008 标准](https://en.wikipedia.org/wiki/Select_%28SQL%29#FETCH_FIRST_clause)将是：

```
...
FETCH  FIRST 1 ROWS ONLY 
```

... PostgreSQL 支持 - 但几乎没有任何其他 RDBMS。

与更多系统一起使用的纯粹替代方法是将其包装在子查询中并

```
SELECT max(total) FROM <subquery> 
```

但这是缓慢且笨拙的。

*db<>fiddle [here](https://dbfiddle.uk/?rdbms=postgres_14&fiddle=de6f85ed00d257f65ffb5d97b9512a2f)*
[旧[sqlfiddle](https://www.sqlfiddle.com/#!15/1953ec/230)]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:51:21.550

这将工作...

```
select * 
from messages
where id<=
(
    select MAX(id) from
    (
        select m2.id, SUM(m1.verbosity) sv 
        from messages m1
        inner join messages m2 on m1.id <=m2.id
        group by m2.id
    ) v
    where sv<70
) 
```

但是，您应该了解 SQL 被设计为一种基于集合的语言，而不是一种迭代语言，因此它旨在将数据视为一个集合，而不是逐行处理。

# ruby-on-rails - 何时设计模型可以具有三种不同类型？

> ID：11689081
> 
> 赞同：0
> 
> 时间：2012-07-27T13:45:31.263
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

如果我有一个`Dog`模型，您可以将其选择为`Types`小、中和大的 3 个中的 1 个。如果我要在其中添加逻辑，这些类型本身应该是模型吗？模型设计是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:00:08.957

如果 Small、Medium 和 Large 各有独特的方法但共享共同的属性，你可以有一个基本的 Dog 模型，然后对每个大小进行子类化，如`class SmallDog < Dog`. `type`通过添加一个接受“SmallDog”等值的列，在 dogs 表上使用单表继承。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T14:06:56.037

所有不同的类型都会有一个共同的接口，但它们的逻辑不同吗？

如果接口是相同的（即它们都具有相同的函数定义），那么我只需为每种不同类型的狗创建子类，这些子类扩展原始 Dog 模型并拥有某种处理 Dog 创建的工厂类模型并根据 Dog 的类型自动选择适当的类。通过使用具有 Dog 类型通用接口的工厂类，应用程序的其余部分不需要关心 Dog 的类型，您可以通过简单地修改工厂类来自由添加/删除新类型。

# java - 显示来自 Android 应用程序对象的对话框（或需要可用于多个活动的例程）

> ID：11689082
> 
> 赞同：1
> 
> 时间：2012-07-27T13:45:45.077
> 
> 标签：java, android, android-activity

片段对我的问题不是必不可少的（所以不要离开大声笑），但我提到它是为了解释我为什么要这样做。

我正在使用片段，因此根据布局，不同的活动将是容器。因此，我需要此例程可用于多项活动。我有一个通用例程，无论使用哪个活动都需要运行，因此为了不重复代码，我将例程设置为从应用程序对象运行。

如果该代码包含在活动中，则该代码可以工作，但是当放入应用程序对象（并根据需要进行修改）时，它会失败。当我尝试 .show() 对话框时，我收到错误“无法添加窗口 - 令牌 null 不适用于应用程序”。

这是来自需要调用失败例程的活动之一的调用例程：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
     switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpTo(this, new Intent(this, ChecklistListActivity.class));
            return true;
        case R.id.mnuDelete:
            ((KnowUrStuffApp)getApplication()).deleteChecklist(this);//<--This is the call!!!
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }

} 
```

这是我的应用程序子类中包含的例程：

```
public void deleteChecklist(final FragmentActivity sender){
    Checklist cl = getDbHelper().getCurrentChecklist();
    if (cl == null)
        Toast.makeText(this, getString(R.string.strSelectAChecklistToDelete), Toast.LENGTH_SHORT).show();
    else {
        try {
            new AlertDialog.Builder(this)
               .setMessage(cl.getChecklistTitle() + " " + getString(R.string.strConfirmDelete))
               .setCancelable(true)
               .setPositiveButton(android.R.string.ok,
                  new DialogInterface.OnClickListener() {
                      public void onClick(DialogInterface dialog, int whichButton){
                          performDeleteChecklist();
                          if (sender instanceof ChecklistDetailActivity)
                              NavUtils.navigateUpTo(sender, new Intent(sender, ChecklistListActivity.class));
                      }
                  })
               .setNegativeButton(android.R.string.cancel, null)
               .show();//<--This causes exception!

        } catch (Exception e) {
            Log.e(TAG,e.getLocalizedMessage());
            Toast.makeText(this, e.getLocalizedMessage(), Toast.LENGTH_LONG * 4).show();
        }
    }
} 
```

我怎样才能让它工作，或者如果这是让这个例程可用于多个活动的完全错误的方法，我怎么能使它可用？

我可以在每个活动中复制代码以使其工作，但是我必须记住在我进行更改时更新两者。此外，我将需要更多的例程，我需要为这些例程做同样的事情，所以我真的需要弄清楚如何让我的例程可用于多项活动。

非常感谢你们！:-D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:47:41.437

试试这个。更改此行：

```
new AlertDialog.Builder(this) 
```

到：

```
new AlertDialog.Builder(sender) 
```

# android - 数据库查询比较

> ID：11689083
> 
> 赞同：-1
> 
> 时间：2012-07-27T13:45:46.220
> 
> 标签：android, database

嗨，请任何人帮助我提供一些链接，该链接将提供有关比较 sqlite 表中 2 列的详细信息。实际上，我的要求是我必须比较 2 个不同表中的 2 列，并且我必须检索该特定行。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:31:55.847

如果您正在寻找有关执行 INNER JOIN 的资源，请看这里：[如何在我的 Android 应用程序中连接两个 SQLite 表？](https://stackoverflow.com/questions/4957009/how-do-i-join-two-sqlite-tables-in-my-android-application)

如果这不正确，请提供更多信息。你的问题很难解释。

# node.js - 如何在 Jade 之上的 Handlebars.js 模板中使用 Ember.js {{action}}

> ID：11689085
> 
> 赞同：2
> 
> 时间：2012-07-27T13:45:46.200
> 
> 标签：node.js, express, ember.js, pug, handlebars.js

我正在将 Ember.js 和 Handlebars.js 用于我目前正在进行的项目。服务器端是 Node.js + express，我使用 Jade 模板引擎。

现在，每当我想将动作绑定到 DOM 元素时，我都会使用 Ember.js 的 {{action}} 属性。目前，这是我的代码在 Jade 中的外观：

```
script(type='text/x-handlebars', data-template-name='frontpage')
  div.logo(''='{{action goToFrontpage}}') 
```

以上*确实*有效，但是，这`''='{{action goToFrontpage}}'`部分似乎有些骇人听闻。

有没有其他方法可以做到这一点？将 Ember.js、Handlebars.js 和 Jade 结合起来可能是最佳实践？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T12:38:54.477

有时在 Jade 中使用 html 会更好。

```
<div {{action GoToFrontpage}} class="logo"></div> 
```

我经常看到的另一个例子是强标签。

```
 .stuff
   | This is an
   strong important
   | message. 
```

你可以写这个

```
 .stuff This is an <strong>important</strong> message. 
```

我发现第二个更具可读性和简洁性。

# java - 是否可以在 HTMLunit 中使用 HTTPS 代理？

> ID：11689087
> 
> 赞同：5
> 
> 时间：2012-07-27T13:45:55.057
> 
> 标签：java, proxy, htmlunit

我是 HTMLunit 的新手，正在尝试为 HTMLunit 设置 HTTPS 代理。我尝试在主机 IP 之前使用**https:// ，但出现异常。**

任何人都可以帮我解决这个问题吗？

* * *

更新：我的代码是：

```
 WebClient webClient = new  WebClient(BrowserVersion.FIREFOX_3_6,"https://199.127.100.13", 11888); 
```

* * *

更新2：我问了开发团队，说是框架的bug。他们会修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-25T01:12:27.553

您不应将 http:// 或 https:// 放在代理服务器的 IP 地址后面。

如果您的 http 代理服务器支持 https，那么 htmlunit 会自动使用它。这是一个如何在 htmlunit 中使用代理的示例

对于 HTTP 代理

```
 ProxyConfig pc = new ProxyConfig();
                pc.setSocksProxy(false); //Set to false if it is a http server
                pc.setProxyHost("192.168.1.200"); //your proxy IP
                pc.setProxyPort(proxyPort);
                webClient.getOptions().setProxyConfig(pc); 
```

当然，如果您使用的是 socks 代理，则将 setSocksProxy 设置为 true。

# java - 错误：类“test2”已映射，但不包含在任何

> ID：11689090
> 
> 赞同：1
> 
> 时间：2012-07-27T13:46:00.053
> 
> 标签：java, eclipse, jpa, persistence

我在 Eclipse 中收到错误“类“test2”已映射，但未包含在任何内容中”，但是该类包含在持久性 xml 中。

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="test1">
        <class>com.test.domains.test1</class>
        <properties>
                  <!-- properties for schema1 here -->
        </properties>
    </persistence-unit>
    <persistence-unit name="test2">
        <class>com.test.test2</class>
        <properties>
                  <!-- properties for schema 2 here -->
        </properties>
    </persistence-unit>
</persistence> 
```

为什么会出现这个错误。我必须为 2 个数据库模式配置不同的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:55:42.780

Eclipse（或更具体地说是 Dali）确实有限制，它不支持两个持久性单元。[他们的页面](http://www.eclipse.org/webtools/dali/gettingstarted.php)中也提到了这一点：

> 目前 Dali 每个项目只支持一个 Persistence Unit 和一个 Persistence XML 文件。JPA 项目中可以存在其他配置，但是当使用多个持久性单元时，验证和默认处理可能不正确。

至于 JPA 本身，persistence.xml 似乎是正确的。无需将相同的类添加到两个持久性单元。

# wso2 - WSO2 ESB TryIt 工具不显示西里尔字母

> ID：11689097
> 
> 赞同：2
> 
> 时间：2012-07-27T13:46:25.137
> 
> 标签：wso2, wso2esb, esb, wso2dss

我有一个 WSO2 数据服务器服务，我通过 WSO2 ESB 进行映射。数据服务器服务返回一些西里尔文字段（utf-8 编码）。

当我在 ESB 中使用“tryIt”功能时，服务工作得很好，但是响应的编码被破坏了。我确信问题**不**在于数据库的编码。

这是一个错误吗？最重要的是“tryIt”功能的问题吗？

![在此处输入图像描述](../Images/b4ad8974f7646c41ce42de47d3ef8b4a.png)

PS对不起，小图，但你仍然可以看到“？？？？？？？？？” 应该是西里尔字母的符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:16:03.803

如果有人需要这个，我发现问题出在 tryIt 工具中。当我从 SOAP UI 或生成的存根调用服务时，文本编码是可以的。

# php - 花式网址的工作

> ID：11689098
> 
> 赞同：1
> 
> 时间：2012-07-27T13:46:26.977
> 
> 标签：php, database, mod-rewrite

在我看到的一些网站中，网址很花哨，而且只包含文字。没有ID（数字）或任何东西。

示例：在 stackoverflow 中，问题的示例 url 是：`http://stackoverflow.com/questions/3740229/how-can-i-rewrite-url-to-fancy-url` 这里`3740229`是问题 ID。因此，使用 mod 重写规则，我们可以获取问题 id 并将其传递到我们的 php 页面以获取该问题的详细信息。但是在某些站点中，这将不存在。例子：`http://anothersite.com/questions/how-can-i-rewrite-url-to-fancy-url`

那么我们如何获取详细信息呢？那是如何使用 this`how-can-i-rewrite-url-to-fancy-url`而不是 question id 来识别问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:48:49.890

这通常称为*URL slug*，它确实用作它检索的内容的唯一 ID。数据库存储该唯一值`how-can-i-rewrite-url-to-fancy-url`并检索其内容，而不是基于数字 id 进行检索。

请注意，在幕后，数据库很可能仍然为每条记录提供唯一的数字 id，但该值不会暴露给最终用户，这通过模糊性提供了一点安全性，并防止爬网脚本简单地增加值抓取网站的所有内容。

存储新内容时，相应地处理标题（用连字符替换空格，转换为小写），并确保创建的值在您的数据库中是唯一的。如果不是，则需要在其上附加一个数字或随机字符串以确保唯一性。然后使用该值而不是 URL 中的数字 id。

# html - 如何嵌入谷歌计算器

> ID：11689103
> 
> 赞同：1
> 
> 时间：2012-07-27T13:46:41.973
> 
> 标签：html, embed

前段时间，谷歌在他们的网络搜索中添加了一个计算器。有没有办法嵌入它？或复制代码以将其添加到您的网站？它用于与 google 相关的东西，因此允许嵌入它。

这就是我所说的：[https ://www.google.com/search?q=calculator](https://www.google.com/search?q=calculator)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:08:59.557

好吧，我不确定是否要嵌入他们的计算器，但是您可以使用谷歌计算器 API，它允许您请求计算并将其作为 json 返回。

[http://www.google.com/ig/calculator?hl=en&q=1USD=?EUR](http://www.google.com/ig/calculator?hl=en&q=1USD=?EUR) 例如，请求将 1 美元转换为欧元，返回以下结果

```
{lhs: "1 U.S. dollar",rhs: "0.811951932 Euros",error: "",icc: true} 
```

您也许可以找到有关 API 的其他一些信息，这些信息可能允许进行其他计算，但据我所知，该计算器没有官方 API。

# .net - 扩展方法还是继承？

> ID：11689105
> 
> 赞同：0
> 
> 时间：2012-07-27T13:46:51.253
> 
> 标签：.net, wpf, observablecollection

我在我的应用程序中使用`ObservableCollection`了**DataBinding**`WPF` ，我将集合绑定到`DataGrids`和`ComboBoxes`。由于需要，我需要根据条件从集合中删除对象，因此我实现了`RemoveAll`功能，例如`List`，使用`Extension method`.

[这篇](https://stackoverflow.com/questions/1132262/extension-methods-versus-inheritance)文章指定了`Inheritance`over的一些优点，`Extension methods`但对我的情况不是很具体，因为这是我需要添加的唯一方法，我不打算`Extension method`为 Collection 添加另一个方法。

我想知道按`Extension method`原样实现它对我来说是否更好，或者我应该考虑继承该类并将其添加为`Instance method`？

另外，我想知道两者之间是否有任何性能差异，因为在提到的帖子中没有讨论过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:51:10.347

如果您计划仅增强 ObservableCollection 而不仅仅是 RemoveAll()，则将其子类化并添加您的功能。如果您想将 RemoveAll() 添加到不止一个 ObservableCollection，那么您可以创建一个扩展方法来处理不仅仅是 ObservableCollections，而是通过在层次结构中定位 IEnumerable 或另一个通用父级。在该方法中，您可以测试该集合是否支持 CollectionChanged，并对其进行适当处理。

这里没有正确或错误的答案，只要适合您的需求即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T13:54:13.560

为了一种方法，我会使用扩展方法。在这种情况下，这意味着您的代码可以继续使用`ObservableCollection<T>`而无需维护自定义类型。

扩展方法在编译时简单地归结为静态方法调用，所以我无法想象性能比继承更差。如果有的话，它应该是相同的或更好的。

个人偏好通常是驱动选择扩展方法的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T13:52:16.743

使用 Extensionmethod，您可以扩展接口，从而扩展该接口的每个实现者。

我会用`System.Collections.IList`. `System.Collections.IList`到处都在使用...

```
public class static Extension
{
   public static void RemoveAll(this System.Collections.IList list)
   {
      ...
   }
} 
```

这将扩展几乎所有集合实现。

# jquery - 判断一个元素是否为表单域

> ID：11689111
> 
> 赞同：9
> 
> 时间：2012-07-27T13:47:25.750
> 
> 标签：jquery, dom

确定所选元素是否为表单字段（即输入、选择、复选框等）的任何便捷方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-27T13:49:28.087

您可以使用`.is(':input')`它来测试它是否是任何类型的表单元素。

文档参考：

*   [http://api.jquery.com/is/](http://api.jquery.com/is/) -*根据选择器检查当前匹配的元素集...*
*   [http://api.jquery.com/input-selector/](http://api.jquery.com/input-selector/) -*选择所有输入、文本区域、选择和按钮元素。”*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T13:50:22.313

使用纯 JavaScript：

```
$("#someelement")[0].tagName // will return name of tag (div, p, input, select, etc...) 
```

任何 jQuery 对象的第一个索引`[0]`都将返回其 DOM 对象。完全在 javascript 中完成：

```
document.getElementById("someelement").tagName; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-02T07:27:16.490

在纯**JavaScript 中**，您可以执行类似[Sizzle Engine的操作](https://github.com/jquery/sizzle)

```
/^(?:input|select|textarea|button)$/i.test(el.nodeName) 
```

例子

```
/**
 * Test is form action element
 * @param {Object} el 
 * @return {Boolean} true if a form action element
 */
const isInput = el => /^(?:input|select|textarea|button)$/i.test(el.nodeName);

// DEMO:
document.querySelectorAll('.foo').forEach(el => console.log(isInput(el)));
```

```
<textarea class="foo">test</textarea>
<button class="foo">test</button>
<input class="foo" type="text">
<div class="foo">test</div>
<p class="foo">test</p>
```

[https://github.com/jquery/sizzle/blob/master/src/sizzle.js#L139](https://github.com/jquery/sizzle/blob/master/src/sizzle.js#L139)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-27T13:52:36.313

$('#formid').find('id_element');

[jQuery 查找](http://api.jquery.com/find/)

希望这有帮助

# c# - C# Mysql UTF8 编码

> ID：11689129
> 
> 赞同：21
> 
> 时间：2012-07-27T13:48:21.987
> 
> 标签：c#, mysql, utf-8, character-encoding

我有一个带有 utf8_general_ci 编码的 mysql 数据库，

我正在使用 utf-8 页面和文件编码使用 php 连接到同一个数据库，没有问题，但是当使用 C# 连接 mysql 时，我有这样的字母ØºØ²Ø©

我将连接字符串编辑为这​​样

```
server=localhost;password=root;User Id=root;Persist Security Info=True;database=mydatabase;Character Set=utf8 
```

但同样的问题。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-27T13:54:30.467

```
Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword; CharSet=utf8; 
```

笔记！使用小写值 utf8 而不是大写 UTF8，因为这将失败。

见[http://www.connectionstrings.com/mysql](http://www.connectionstrings.com/mysql)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T15:07:28.940

你能试试：

```
Server=localhost;Port=3306;Database=xxx;Uid=x xx;Pwd=xxxx;charset=utf8;" 
```

编辑：我有一个新想法：

```
//To encode a string to UTF8 encoding
string source = "hello world";
byte [] UTF8encodes = UTF8Encoding.UTF8.GetBytes(source);

//get the string from UTF8 encoding
string plainText = UTF8Encoding.UTF8.GetString(UTF8encodes); 
```

祝你好运

有关此技术的更多信息[http://social.msdn.microsoft.com/forums/en-us/csharpgeneral/thread/BF68DDD8-3D95-4478-B84A-6570A2E20AE5](http://social.msdn.microsoft.com/forums/en-us/csharpgeneral/thread/BF68DDD8-3D95-4478-B84A-6570A2E20AE5)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-19T21:51:26.813

您可能需要为该列使用“utf8mb4”字符集以支持这样的 4 字节字符：“λ”

utf8 字符集仅支持每个字符 1-3 个字节，因此不能支持所有 unicode 字符。

有关详细信息，请参阅[http://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8mb4.html 。](http://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8mb4.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-27T11:00:18.440

CHARSET 应该是大写的

```
Server=localhost;Port=3306;Database=xxx;Uid=x xx;Pwd=xxxx;CHARSET=utf8; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-26T17:45:10.580

Just in case some come here later.

I needed to create a Seed method using Mysql with EF6, to load a SQL file. After running it I got weird characters on database like ? replacing é, ó, á

**SOLUTION:** Make sure I read the file using the right charset: UTF8 on my case.

```
 var path = System.AppDomain.CurrentDomain.BaseDirectory;
     var sql = System.IO.File.ReadAllText(path + "../../Migrations/SeedData/scripts/sectores.sql", Encoding.UTF8); 
```

And then M.Shakeri reminder:

CHARSET=utf8 on cxn string in web.config. Using CHARSET as uppercase and utf8 lowercase.

Hope it helps.

R.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T15:32:09.980

我发现但没有机会真正浏览的一件事是这里提供的整理图表：http: [//www.collat​​ion-charts.org/mysql60/](http://www.collation-charts.org/mysql60/)

这将向您显示哪些字符是给定 MySQL 排序规则的一部分，因此您可以为数据集选择最佳选项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-08T19:19:35.247

在连接字符串中设置字符集是指发送到服务器的查询的字符集。它不影响从服务器返回的*结果。*

[https://dev.mysql.com/doc/connectors/en/connector-net-connection-options.html](https://dev.mysql.com/doc/connectors/en/connector-net-connection-options.html)

我发现从客户端指定字符集的一种方法是在打开连接后运行它。

`set character_set_results='utf8';`

# xcode - XCode：CoreData.Framework id 的奇怪行为

> ID：11689131
> 
> 赞同：4
> 
> 时间：2012-07-27T13:48:27.347
> 
> 标签：xcode, cocoa, frameworks

我发现了一条奇怪的线，例如：

`id *_optimizationHints;` `<- in NSManagedObjectModel.h`

`id* _cd_snapshots;` `<- in NSManagedObject.h`

`id** _kvcPropertyAccessors;` `<- in NSEntityDescription`

`id* _debuggingRecords;` `<- in NSManagedObjectContext.h` `id *_cachedObsInfoByEntity;` `<- in NSManagedObjectContext.h`

当我尝试使用**ARC**选项编译项目时，我看到如下错误：*Pointer to non-const type 'id' with no explicit Ownership*

怎么了？当我阅读类似的问题时，我需要替换`id *`->`id`

但这是主要的 CoreDate.Framework！

我无法理解这一点。

谁能解释这个“笑话”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T08:22:36.287

我今天早上遇到了类似的问题。似乎问题是由于以某种方式内置了核心数据。当我们导入CD框架时，我必须去Building Phases添加依赖框架，而不是直接从Finder中拖放。希望这会有所帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-26T16:13:33.923

我今天遇到了同样的问题，同时将我想要拆分的现有项目转换为静态库和公共代码部分。我按照这里的说明进行操作：[https ://github.com/jverkoey/iOS-Framework](https://github.com/jverkoey/iOS-Framework)

确实，我通过从我之前的项目中拖放来添加 CoreData.framework。但是，我删除了它并像您指出的那样重新添加了它（多次），但我仍然收到您报告的相同错误。

编辑：这是我的问题：我删除了框架并从 Xcode 中读取它们。我的问题是我的项目目录中实际上有一个“CoreData”子目录没有被删除。

解决方案：在 Finder 中将其删除，并将其重新添加到“Link Binary with Libraries”后，问题就消失了

# javascript - 如何重新加载?

> ID：11689132
> 
> 赞同：2
> 
> 时间：2012-07-27T13:48:31.667
> 
> 标签：javascript, jquery, html, webbrowser-control

我在 WPF 页面上有一个 WebBrowser 控件。加载到 WebBrowser 控件中的 HTML 页面显示 WPF 应用程序的图像。我有一个从 WPF 页面到 HTML 页面的 JavaScript 回调，告诉页面图像已更改并重新加载图像。我似乎找不到任何方法告诉浏览器标签中的基础文件已更改。

如何重新加载img？

我试过只是改变 src 属性，我也厌倦了这样的事情：

```
 $("#img1").attr("src", "");
            $("#img2").attr("src", "");

            $("#img1").attr("src", image1);
            $("#img2").attr("src", image2); 
```

第一次调用该函数时，将显示图像。当图像被更改并再次调用该函数时，原始图像仍然存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T13:51:41.173

使用随机查询部分设置源新。例如 img.png?0001 等等

有了这个技巧，每个调用都有一个新的 url，浏览器控件不会因为缓存的东西而烦扰你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T13:54:45.773

传递一个唯一的查询字符串参数将强制图像重新加载。许多站点和图书馆（[示例](https://stackoverflow.com/questions/4377000/weird-jquery-query-string-appended)）使用此技术来确保显示资源的新副本：

```
$("#img1").attr("src", image1 + '?_=' + new Date().getTime());
$("#img2").attr("src", image2 + '?_=' + new Date().getTime()); 
```

`image1`如果您的或`image2`链接已经有查询字符串，您将需要添加额外的逻辑。

# c - 在 lua 和 C 之间共享数组

> ID：11689135
> 
> 赞同：7
> 
> 时间：2012-07-27T13:48:41.973
> 
> 标签：c, lua, lua-table

我真的用谷歌搜索过这个问题，但我从来没有真正得到解决方案。

我想在 C 和 Lua 之间共享一个数组，为了性能，我将避免在 Lua 之间复制数组。

所以我想将指向数组的指针从 C 传递给 Lua。然后从 Lua 我想直接设置/修改这个数组中的值。

* * *

**C 代码中的示例**

我想定义我的数组

```
int mydata[] = {1,2,3,4} 
```

将其设置为全局以从 Lua 访问它，名称为`mydata`。

* * *

**在 Lua 中**

我想改变这样的值

```
mydata[3] = 9 
```

当我返回 C 时，`mydata[3]`是 9，因为它是指向数组的指针。

这怎么可能？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-27T17:28:55.980

你可以通过 . 向 Lua 公开任意数据`userdata`。如果你给你的 userdata 值一个*metatable*，你可以为这些 userdata 上的各种操作符/操作定义行为。在这种情况下，我们想向 Lua 公开一个数组，并定义在`array[index]`and的情况下要做什么`array[index] = value`。

我们通过创建一个足够大的用户数据缓冲区来将数组公开给 Lua，以保存数组的地址。`__index`我们通过使用and`__newindex`方法创建一个元表来定义索引/赋值行为。

下面是一个完整的工作示例，它向 Lua 公开了一个静态数组。你的程序可能会有一些其他的调用来将数组返回到 Lua。请注意，根本没有边界检查；如果您尝试在数组边界之外进行索引，则会崩溃。为了使其更加健壮，您需要将 userdata 更改为具有数组指针和数组大小的结构，以便您可以进行边界检查。

```
#include "lauxlib.h"

// metatable method for handling "array[index]"
static int array_index (lua_State* L) { 
   int** parray = luaL_checkudata(L, 1, "array");
   int index = luaL_checkint(L, 2);
   lua_pushnumber(L, (*parray)[index-1]);
   return 1; 
}

// metatable method for handle "array[index] = value"
static int array_newindex (lua_State* L) { 
   int** parray = luaL_checkudata(L, 1, "array");
   int index = luaL_checkint(L, 2);
   int value = luaL_checkint(L, 3);
   (*parray)[index-1] = value;
   return 0; 
}

// create a metatable for our array type
static void create_array_type(lua_State* L) {
   static const struct luaL_reg array[] = {
      { "__index",  array_index  },
      { "__newindex",  array_newindex  },
      NULL, NULL
   };
   luaL_newmetatable(L, "array");
   luaL_openlib(L, NULL, array, 0);
}

// expose an array to lua, by storing it in a userdata with the array metatable
static int expose_array(lua_State* L, int array[]) {
   int** parray = lua_newuserdata(L, sizeof(int**));
   *parray = array;
   luaL_getmetatable(L, "array");
   lua_setmetatable(L, -2);
   return 1;
}

// test data
int mydata[] = { 1, 2, 3, 4 };

// test routine which exposes our test array to Lua 
static int getarray (lua_State* L) { 
   return expose_array( L, mydata ); 
}

int __declspec(dllexport) __cdecl luaopen_array (lua_State* L) {
   create_array_type(L);

   // make our test routine available to Lua
   lua_register(L, "array", getarray);
   return 0;
} 
```

用法：

```
require 'array'

foo = array()
print(foo) -- userdata

-- initial values set in C
print(foo[1])
print(foo[2])
print(foo[3])
print(foo[4])

-- change some values
foo[1] = 2112
foo[2] = 5150
foo[4] = 777

-- see changes
print(foo[1])
print(foo[2])
print(foo[3])
print(foo[4]) 
```

# python - django 提要阅读器

> ID：11689140
> 
> 赞同：1
> 
> 时间：2012-07-27T13:49:07.007
> 
> 标签：python, django, feed

我想在 django 中创建一些接近 feed 阅读器的东西。它应该下载 xml 数据，将其解析为 python 对象，将其保存在数据库中，如果提要更新，则更新这些对象。

如果有可能对我有帮助的应用程序？如果是这样，它在开发时是否适用于 Windows？

请张贴我如何处理这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T13:54:30.710

也许这个项目会有所帮助

*   tghw / django-feedreader / 概述 — Bitbucket -> [https://bitbucket.org/tghw/django-feedreader/](https://bitbucket.org/tghw/django-feedreader/)

是的，你可以在 Windows 中使用 django 项目

*   在 15 分钟内使用 Apache 和 MySQL 在 Windows 上设置 Django - Venky 的博客 -> [http://www.venkysblog.com/setup-django-on-windows-with-apache-and-mysql](http://www.venkysblog.com/setup-django-on-windows-with-apache-and-mysql)
*   howto:django_on_windows [Thinkhole Labs Wiki] -> [http://wiki.thinkhole.org/howto:django_on_windows](http://wiki.thinkhole.org/howto:django_on_windows)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:10:15.323

NewsBlur 是一个全功能的开源新闻阅读器：[https ://github.com/samuelclay/NewsBlur](https://github.com/samuelclay/NewsBlur)

应该可以让它在 Windows 上运行。

作为一个完整的解决方案，它看起来相当重量级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T13:41:55.783

您可以查看项目[TNB](http://sourceforge.net/projects/thenewsbook/)，但它是用`C#`.

# html - 阿拉伯语字符在谷歌浏览器中单独显示

> ID：11689144
> 
> 赞同：2
> 
> 时间：2012-07-27T13:49:17.273
> 
> 标签：html, jquery-ui, google-chrome, arabic

我正在开发一个网络应用程序，我在 jquery ui 组合框中显示阿拉伯语单词，它在 IE 和 firefox 中完美运行，但 chrome 以不同的方式显示单词！

![谷歌浏览器的屏幕截图](../Images/96aad65f151f58c511bd9a03dd872f2d.png)

你可以在组合框和下拉列表中看到两个sony的区别

这是我的元数据

```
<meta http-equiv="content-type" content="text/html";charset="utf-8" /> 
```

并且数据使用 collat​​e 存储在 sql server 中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T17:01:22.110

查看您在评论中提到的页面，[http://jqueryui.com/demos/autocomplete/#combobox](http://jqueryui.com/demos/autocomplete/#combobox)在 Chrome F12 编辑器中，似乎在这个浏览器中，出现了一个 jQuery 生成的下拉列表元素`foo`，这样每个字符都是在一个单独的`strong`元素内：`<strong>f</strong><strong>o</strong><strong>o</strong>`. 在 Firefox 中，我看到的是一个生成的`select`元素，带有`<option>foo</option>`. 我想这取决于 jQuery，它试图适应浏览器的差异。

在任何情况下，标记 like `<strong>f</strong><strong>o</strong><strong>o</strong>`，虽然对拉丁字母中的文本大多无害，但可能会严重混淆阿拉伯文本，因为它可能会使浏览器将每个字母视为独立的并为其使用独立的字形形式。参照。到问题[Partially coloured arabic word in HTML](https://stackoverflow.com/questions/11155849/partially-colored-arabic-word-in-html)。

我希望熟悉 jQuery 的人可以提出解决此问题的建议。所需要的只是避免将字母分隔为`<strong>f</strong><strong>o</strong><strong>o</strong>`，使用 just `<strong>foo</strong>`（如果简单`foo`不会这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T12:11:14.920

我没有；）在jquery ui组合框javascript中，您将拥有此功能

```
if (this.value && (!request.term || matcher.test(text))) return {
                                        label: text.replace(
                                        new RegExp("(?![^&;]+;)(?!<[^<>]*)(" +       $.ui.autocomplete.escapeRegex(request.term) + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<span></span>"),
                                        value: text,
                                        option: this
                                    }; 
```

我刚刚删除了“gi”所以代码是

```
if (this.value && (!request.term || matcher.test(text))) return {
                                        label: text.replace(
                                        new RegExp("(?![^&;]+;)(?!<[^<>]*)(" +       $.ui.autocomplete.escapeRegex(request.term) + ")(?![^<>]*>)(?![^&;]+;)", ""), "<span></span>"),
                                        value: text,
                                        option: this
                                    }; 
```

它现在工作得很好：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:59:47.027

这取决于使用的字体，而不是字符集。

从您的屏幕截图中可以看出，即使“索尼”的拉丁变体也略有不同（注意 Y）。尝试在这两种情况下使用相同的字体。

# excel - Visual Basic Excel For 在多个单元格中循环如何使用范围内的计数器（“”）

> ID：11689150
> 
> 赞同：0
> 
> 时间：2012-07-27T13:49:32.717
> 
> 标签：excel, vba, loops, for-loop

这就是我所拥有的，所以 H 后面需要跟单元格的编号，我想在这里使用计数器 i，但是它不起作用。我究竟做错了什么？:)

```
For i = 60 To 63

    Range("Hi").AddComment
    Range("Hi").Comment.Visible = False
    Range("Hi").Comment.Text Text:=""
    i = i + 1
    Range("Hi").Select
    i = i - 1
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:53:18.503

用这个：

```
Range("H" & i) 
```

正如你写的那样，`"Hi"`不使用变量 i 因为你把它放在引号中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:53:18.317

你需要这样做：

```
For i = 60 To 63

    Range("H" & i).AddComment
    Range("H" & i).Comment.Visible = False
    Range("H" & i).Comment.Text Text:=""
    i = i + 1
    Range("H" & i).Select
    i = i - 1
    Next
End Sub 
```

`&`运算符在 VBA 中进行连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:53:38.383

你应该像这样格式化它：

```
 For i = 60 To 63

        Range("H" & i).AddComment
        Range("H" & i).Comment.Visible = False
        Range("H" & i).Comment.Text Text:=""
        i = i + 1
        Range("H" & i).Select
        i = i - 1
    Next i
End Sub 
```

原因是字母`H`是一个字符，`i`是一个变量。像 Excel 这样的双引号内的任何内容都`"Hi"`将读取为一串文本。

当 Excel 读取引号之外的单词或字母时`i`，它将假定它是一个变量。该`&`字符将两者作为文本连接在一起。

这意味着每次循环运行时，Excel 都会读取它`"H" and i`并将其转换为“H1”、“H2”、“H3”、....“H60”，然后将其输入到`Range()`您要查找的内容中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T14:17:41.510

这对你会更好吗？当 i 的值在循环代码中开始变化时，我总是遇到问题

```
For i = 60 To 63      
    With Range("H" & i)
        .Select 
        .AddComment     
        .Comment.Visible = False     
        .Comment.Text Text:=""  
    end with
Next 
End Sub 
```

# css - 3d 对角翻转不起作用

> ID：11689151
> 
> 赞同：3
> 
> 时间：2012-07-27T13:49:36.310
> 
> 标签：css, css-transforms

我有一个页面，上面有一堆盒子。有四种类型的盒子。我想要 4 种不同的 css3 过渡。

框 1 - 悬停时在 Y 轴上翻转 <- 完美工作
框 2 - 悬停时在 X 轴上翻转 <- 完美工作
框 3 - 悬停时的淡入淡出效果 <- 完美工作
框 4 - 对角翻转 X 和 Y 轴在悬停时<-这种排序首先起作用，然后不起作用

每个盒子都有相同的标记：

```
<div class="box box-4">
    <div class="inner-container">
        <div class="front"><img src="some_pic.jpg"></div>
        <div class="back">
            <div class="tools"><!-- some links and stuff --></div>
        </div>
    </div>
</div> 
```

所以当box-4开始时，它看起来很完美，前面是正确的，后面是隐藏的，应该是这样。当您将鼠标悬停在它上面时，动画从右侧开始，它在对角轴上翻转（左上角到右下角），但是当动画结束时，前面（应该在后面可见但反转）是垂直于背部！

![在此处输入图像描述](../Images/69609fe8d66fed7a411a806d89dcacca.png)

我已经以所有可以想象的方式调整了 CSS 值，我看过大量的演示，有什么问题？！

CSS：

```
.box-4 { -webkit-perspective:1200px; }
.box-4 .inner-container { 
       width:100%; height:100%; position:relative; 
       -webkit-ransition:all 0.4s ease-in-out; 
       -webkit-transform-style:preserve-3d; 
}
.box-4 .back { 
    width:100%; height:100%; position:absolute; top:0; left:0; 
    background-color:rgba(0,0,0,.6); 
    -webkit-backface-visibility:hidden; 
    -webkit-transform-style:preserve-3d; 
 }
.box-4:hover .inner-container { -webkit-transform:rotate3d(45,45,0,180deg); }
.box-4 .back { -webkit-transform:rotate3d(45,45,0,-180deg); } 
```

注意：为了简单起见，我在这里只显示 -webkit- 样式，但在我的实际 CSS 中，我有 -moz-、-o-、-ms- 以及常规的无前缀变体......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:33:07.707

嗯，嗯...我通过切换正面和背面的 CSS，同时保持这两个颜色的颜色，以及删除曾经是背面和现在正面的变换来让它工作。（变换是我想到的第一件事，因为在您的原始文件中，背面的变换只是被悬停变换撤消，按照通常的方式定向它（水平对齐），但是一旦我删除了颜色出于某种原因切换了。）

[http://jsfiddle.net/6KLYs/4/](http://jsfiddle.net/6KLYs/4/)

不过，不确定它是否适用于使用`-webkit-`（Safari 和 Chrome，我相信？）而不是`-moz-`.

* * *

随着关于你想要最终方向的澄清，我认为现在应该按照你想要的方式工作。我只是稍微改变了一下，添加了透明度，并在悬停变换中包含了缩放操作以配合旋转。

[http://jsfiddle.net/6KLYs/6/](http://jsfiddle.net/6KLYs/6/)

在 z 轴上额外旋转 90 度也可以（[http://jsfiddle.net/6KLYs/7/](http://jsfiddle.net/6KLYs/7/)），但我认为缩放看起来更好。

# objective-c - iPad 应用程序偏移 20 像素

> ID：11689152
> 
> 赞同：3
> 
> 时间：2012-07-27T13:49:38.813
> 
> 标签：objective-c, ios, uiview

我正在使用下面的代码来创建启动画面图像。我遇到的唯一问题是视图随后出现在屏幕顶部下方 20 像素处。检查 appFrame 的属性后，我可以看到原点和高度不正确。当我加载下一个视图时，它增加了 20 像素，变成了 40 像素！我在这里做错了什么？是什么导致了 20 像素的差距？

```
CGRect appFrame = [[UIScreen mainScreen] applicationFrame];
UIView *view = [[UIView alloc] initWithFrame:appFrame];
view.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
self.view = view;

splashImageView_ = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"splashpage.png"]]; 
```

![在此处输入图像描述](../Images/534c32b36722560010cf8dad1167adf3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T13:52:20.160

主屏幕的框架是相对于它的父视图的，所以它包含一个 20px 的状态栏偏移量。当您将其设置为框架时，您是在说您的视图应该在其父视图顶部下方 20px 处具有原点

您应该将视图的框架设置为屏幕的边界

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:08:09.930

您可以在应用程序的 Info.plist 文件中将“状态栏最初隐藏”属性设置为“是”。

iOS 会为你取下它并重新调整你的屏幕尺寸

# outlook - 在 Outlook 中设置两个帐户时的发件人电子邮件地址

> ID：11689153
> 
> 赞同：-1
> 
> 时间：2012-07-27T13:49:40.333
> 
> 标签：outlook, outlook-2007

我的 Outlook 中有两个电子邮件帐户，在回复电子邮件时，我不想一直选择要发送的帐户。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:53:53.437

对于 Outlook 2007

```
Select Tools | Account Settings... from the menu.
Highlight the desired account.
Click Set as Default.
Now click Close. 
```

参考：[http ://email.about.com/od/outlooktips/qt/How_to_Set_the_Default_Account_in_Outlook.htm](http://email.about.com/od/outlooktips/qt/How_to_Set_the_Default_Account_in_Outlook.htm)

# php - 基本 MVC (PHP) 结构

> ID：11689155
> 
> 赞同：9
> 
> 时间：2012-07-27T13:49:51.160
> 
> 标签：php, model-view-controller

我有一个简单的登录表单的以下数据流。

用户访问控制器 PHP 文件。控制器包括model.php和view.php

用户提交表单，控制器将 POST 数据发送到模型方法，并返回结果。

用户已登录，并由控制器转发到不同的视图（登录成功消息）。

目前我的观点是静态 HTML（没有 PHP），所以这是我的问题。然后向用户传递欢迎消息的正确方法是什么，例如“你好，克雷格！”？

视图是否允许 PHP 片段，例如

```
<?php echo $username; ?> 
```

因为模型是在控制器文件之前加载的？

谢谢！

**编辑：**然后允许视图访问特定的类方法是不是更好的做法，例如

```
<?php $user->getUsername(); ?> 
```

而不仅仅是变量？

* * *

根据其他答案，我找到了一篇非常有用的文章，您可能也对此感兴趣。

[http://www.nathandavison.com/posts/view/7/custom-php-mvc-tutorial-part-5-views](http://www.nathandavison.com/posts/view/7/custom-php-mvc-tutorial-part-5-views)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-27T15:38:29.513

以下是您必须考虑的几件事：

*   你不能在 PHP 中做经典的 MVC。相反，我们有*受 MVC 启发的*模式
*   为 Web 实现时，视图和控制器实例之间存在 1:1 的关系
*   MVC 中的模型不是一个类。它是一个层，包含许多不同的类
*   View 不是一个愚蠢的模板，而是一个类的实例，它处理表示逻辑

## 在基于 Web 的 MVC 中查看

如上所述， MVC 和受 MVC 启发的模式中的*视图*负责表示逻辑。这包括显示错误消息和分页等内容。为此，每个视图可以处理多个模板。

View 从模型层接收信息，并采取相应的行动。来自模型层的信息如何最终出现在视图中的方式是 MVC 模式中最显着的差异之一：

*   **经典的 MVC**模式

    当模型状态改变时，模型层的结构将信息发送到视图。这是通过[观察者模式](http://sourcemaking.com/design_patterns/observer)完成的。

*   **Model2 MVC**和**HMVC**模式

    View 可以直接访问模型层，并能够从中请求信息。这是最接近原始模式的。

*   **MVVM**和**MVP**模式

    View 通过控制器接收信息，控制器又从模型层请求它。模式的进一步差异源于在将数据传递给视图之前对数据的处理方式。

您现在似乎拥有的实际上只是一个模板。[与本文](http://codeangel.org/articles/simple-php-template-engine.html)中描述的一个类似。你最终得到一个结构，它没有地方包含表示逻辑。从长远来看，这将导致表示逻辑被推入控制器。

## 那么那个“欢迎”信息呢？

为了显示欢迎信息，您的视图应该从模型层请求当前用户的名称。如果模型层返回某种错误状态，查看选择错误消息模板并插入到布局中。

如果从模型层检索到用户名没有问题，请查看选择包含问候语的模板，在模板中设置值并呈现它。

## 应按什么顺序装载零件？

> [控制器应该初始化模型和视图的想法来自对 Web 的 MVC 的非常原始的解释。模式称为[页面控制器](http://martinfowler.com/eaaCatalog/pageController.html)，它试图将 MVC 直接嫁接到静态网页上。]

在我看来，这应该是顺序：

1.  **模型**

    您初始化结构，通过它您将处理模型层。它很可能是某种服务工厂，它可以让您构建诸如`Authentication`登录`Library`服务和处理文档服务之类的东西。像这样的东西。我之前对模型层的结构写了有点长[的评论](https://stackoverflow.com/a/5864000/727208)。你可能会发现它很有用。

2.  **看法**

    您根据从路由机制收集的信息创建视图实例。如果您正在实现*Model2*或*HMVC*，那么您的视图将需要构造函数中的*Service Factory实例。*

    如果您正在实现*MVVM*或*MVP*，那么视图的构造函数没有特殊要求。

3.  **控制器**

    这是您创建的最后一个结构，因为控制器负责将命令发送到视图层和模型层，然后更改然后更改两者的状态。因此控制器应该期望在构造函数中同时接收视图和服务工厂。

在初始化 MVC 的基本元素之后，调用控制器上的方法，并渲染当前视图。

请记住，这是非常简化的描述。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-27T13:53:47.197

你真的可以把任何东西放在你想要的视图中，但为了更好地遵守 MVC 做事方式，你应该将视图中的 PHP 限制为简单`echo`的 s 或`print`s （也可能是非常小的循环，尽管即使是那些也可以是在控制器/模型中预先计算）。由于这是获取动态内容的唯一方法，因此说它们不被允许有点愚蠢。

视图的想法是让它具有更多的 HTML 外观，以便前端开发人员或不了解 PHP 的人可以轻松地处理文件而不会感到困惑。

**更新**

要了解有关 MVC 的更多信息，您可以查看其中任何一个（那里有大量教程）：

[http://blog.iandavis.com/2008/12/09/what-are-the-benefits-of-mvc/](http://blog.iandavis.com/2008/12/09/what-are-the-benefits-of-mvc/)

[http://php-html.net/tutorials/model-view-controller-in-php/](http://php-html.net/tutorials/model-view-controller-in-php/)

[http://www.tonymarston.net/php-mysql/model-view-controller.html](http://www.tonymarston.net/php-mysql/model-view-controller.html)

要查看使用 MVC 的 PHP 的具体示例，我建议下载一些更流行的框架（例如[CodeIgniter](http://codeigniter.com/)、[Symfony](http://www.symfony-project.org/)或[Drupal](http://www.drupal.org/)）并查看代码。试着弄清楚它是如何工作的，然后为一个简单的基于文章的系统重新创建功能。

# jakarta-ee - 如何在 servlet 中获取用户 ID 或电子邮件输入并进行验证

> ID：11689156
> 
> 赞同：1
> 
> 时间：2012-07-27T13:49:53.467
> 
> 标签：jakarta-ee, servlets, login

我的问题很简单。在某些网站中，可以看到提供他/她的电子邮件 ID 或用户 ID 和密码（即已经在该网站注册）的人可以进入该网站。现在在 MVC 结构中，我们使用 servlet 作为**DECISION CONTROLLER**。因此，在 servlet 中获取输入后，我们可以将它们与表的`userid`或`email-id`列进行比较`user`。因此，要获取输入，我们可以在 servlet 中编写：

```
String input=request.getParameter("inputfield"); 
```

接受输入后，应该以什么方式检查，如果给定的输入是`email-id`或`userid`？我们应该将字符串与表的列和列的`input`每个值进行比较吗？如果这是唯一的方法，程序质量将非常低并且可以利用安全性。`userid``emailid``user`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:54:15.357

电子邮件 ID 具有特定的语法...

所以使用正则表达式来检测电子邮件模式。

如果模式匹配（意味着电子邮件 ID 有效）触发

```
SELECT email FROM user 
```

别的

```
SELECT username FROM user 
```

简单的 ：）

# javascript - 旋转文本生成器

> ID：11689159
> 
> 赞同：8
> 
> 时间：2012-07-27T13:50:05.360
> 
> 标签：javascript, jquery, arrays

我正在构建一个旋转文本生成器。生成器组合来自多个数组的句子（文本），在视觉上“循环”它们并附加它们。我认为最好使用[生成器的基本版本](http://jsfiddle.net/c_kick/nS8Mr/)创建一个小提琴，因为我现在已经构建了它：

**解释**

基本工作如下：

1.  句子在单独的数组中定义（`Array1`,`Array2`和`Array3`小提琴）
2.  定义了第二组数组，包含可以组合的数组（`combo0`在`combo1`小提琴中）
3.  按下“生成”按钮时，`Generate`调用该函数，该函数在视觉上从一组句子中循环句子（`combo0[0]`在小提琴中）
4.  这个函数循环自己直到句子循环了 8 次（`var times = 8`在小提琴中）
5.  完成后，该函数调用提供的回调函数。在这个回调中，它`Generate`再次运行，这次使用第二个数组（`combo0[1]`在小提琴中）

回调的原因是我需要“等待”循环效果完成，然后继续。

**问题**

虽然这正是我所需要的（而且我非常怀疑这是否是这样做的方法；我在编写一个自身循环的函数时总是觉得有点奇怪），但我有以下问题：

在`combo`数组中，我定义了哪些“句子”数组可以是可能的组合。**如果有两种组合**，这很好用，但如果有两种以上，我有一个问题：

```
Generate(combo0[0], i, function(i) { //generate from first array element of combo0, callback to generating from second array of combo0
    Generate(combo0[1], i, function(i) {
        $('div#status').html('Done!'); //show status
        $('input#generate').removeAttr("disabled"); //enable button
    });
}) 
```

我将不得不递归地重写它以适应`combo`由 3 个甚至 4 个选项组成的数组的可能性。如果一个`combo`数组只包含 2 个（或 1 个）数组，这可能会破坏脚本。

这就是我卡住的地方。主要问题是，如果我循环遍历`combo`数组，例如使用 .each();，该`generate`函数会被同步调用多次，因此整个“循环”效果都会丢失。

我尝试编写各种循环，其中考虑到给定`combo`数组的数组长度，但我今天崩溃的浏览器比以往任何时候都多，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:21:14.477

这应该可以解决问题：

```
var Array1 = new Array("Sentence 1 - A ", "Sentence 1 - B ", "Sentence 1 - C ", "Sentence 1 - D ", "Sentence 1 - E ", "Sentence 1 - F ", "Sentence 1 - G ");
var Array2 = new Array("Sentence 2 - A", "Sentence 2 - B", "Sentence 2 - C", "Sentence 2 - D", "Sentence 2 - E", "Sentence 2 - F", "Sentence 2 - G");
var Array3 = new Array("Sentence 3 - A", "Sentence 3 - B", "Sentence 3 - C", "Sentence 3 - D", "Sentence 3 - E", "Sentence 3 - F", "Sentence 3 - G");

//define acceptable combinations of arrays
var combo0 = new Array(Array1, Array2);
var combo1 = new Array(Array1, Array2, Array3);

//define global vars
var speed = 140;
var content = '';

//write sentence to box. If counter is a multiple of the 'times' var: append instead of write
function showMessage(list, i, e) {
    $('div#generated').html(content + list[i]);
    if ((i + 1) % (e + 1) == 0) content += list[i];
}

//Generate from array 'list', simulating a 'slot machine
function Generate(lists, end, l, i, e) {
    if (l == undefined) l = 0;
    if (i == undefined) i = 0;
    if (e == undefined) e = Math.floor(Math.random() * lists[l].length);
    setTimeout(function() {
        showMessage(lists[l], i, e);
        if ((i + 1) % (e + 1) != 0)
            Generate(lists, end, l, i+1, e);
        else if (lists.length - 1 > l)
            Generate(lists, end, l + 1);
        else end();
    }, speed);
}

$(document).ready(function() {
    $('input#generate').click(function() {
        $(this).attr("disabled", true); //disable button
        content = ''; //reset content
        $('div#status').html('Running..'); //show status
        Generate(combo0, function() {
            $('div#status').html('Done!'); //show status
            $('input#generate').removeAttr("disabled"); //enable button});
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:15:57.907

我已经设法修复它。离开屏幕一段时间是件好事。

我所做的是添加一个“n”计数器，如果`times`达到变量的倍数，该计数器会增加，导致函数继续迭代，但从下一个数组 ( ) 输出（参见倒数第三行`lists[n]`）。最后，检查剩下多少数组将确定我们是否完成了。如果完成，最后写一个句子，运行可选的回调并返回 false。这样，该函数将接受整个数组，而不仅仅是子数组（`combo`而不是`combo[0]`）：

```
//Generate from array 'lists', simulating a 'slot machine
function Generate(lists, n, i, callbackFnk) {
    if (!(i >= 0)) { i= 0; }
    setTimeout((function(msg){
        i++;
        return function(){
            if (i % times != 0){
                //We haven't reached a multiple of the times variable yet, keep going.
                Generate(lists, n, i, callbackFnk);
            } else if (i % times === 0 && i != 0 && n < (lists.length-1)) {
                //Multiple reached, increase n
                n++;
                Generate(lists, n, i, callbackFnk);
            } else if (n == (lists.length-1)) {
                //we are done as there are no more arrays to go over
                showMessage(msg, i);
                if (callbackFnk) callbackFnk.call(this, i);
                return false;
            }
            showMessage(msg, i);
        }
    })(
        //output using the given n value
        lists[n][Math.floor(Math.random() * lists[n].length)]
    ), speed);
} 
```

在这里查看工作小提琴：http: [//jsfiddle.net/c_kick/kuNrA/1/](http://jsfiddle.net/c_kick/kuNrA/1/)

我希望这对其他人有帮助！

# java - 将单个字节转换为字符串？

> ID：11689167
> 
> 赞同：6
> 
> 时间：2012-07-27T13:50:31.807
> 
> 标签：java, android, type-conversion

这只是为了错误检查我的代码，但我想将字节数组中的单个字节转换为字符串。有谁知道如何做到这一点？这是我到目前为止所拥有的：

```
recBuf = read( 5 );
Log.i( TAG,  (String)recBuf[0] ); 
```

但这当然行不通。

我用谷歌搜索了一下，但只找到了将整个 byte[] 数组转换为字符串的方法......

```
new String( recBuf ); 
```

我知道我可以这样做，然后筛选字符串，但如果我知道如何操作，这将使我的任务更容易。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T13:53:15.523

您可以使用单个字节创建一个新的字节数组：

```
new String(new byte[] { recBuf[0] }) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-27T13:57:26.257

的使用`toString`方法`Byte`

```
String s=Byte.toString(recBuf[0] ); 
```

尝试上面，它的工作原理。

**例子：**

```
 byte b=14;
String s=Byte.toString(b );
System.out.println("String value="+  s); 
```

**输出：**

```
String value=14 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T14:00:35.757

有一个`String`表单的构造函数`String(byte[] bytes, int offset, int length)`。您始终可以将其用于转换。

因此，例如：

```
 byte[] bite = new byte[]{65,67,68};

    for(int index = 0; index < bite.length; index++)
        System.out.println(new String(bite, index,1)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T13:54:18.913

编辑：怎么样

```
""+ recBuf[0];//Hacky... not sure if would work
((Byte)recBuf[0]).toString(); 
```

很确定这会奏效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T13:55:19.117

将其转换为char怎么样？或者干脆

```
 new String(buffer[0]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T13:57:10.407

public static String toString（字节值）

自：API 级别 1 返回一个字符串，其中包含对指定字节值的简明、人类可读的描述。

参数值要转换为字符串的字节。返回值的可打印表示。] [1](http://developer.android.com/reference/java/lang/Byte.html#toString%28byte%29) 这是根据您的要求将单字节转换为字符串尝试代码的方法

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-27T14:02:34.727

另一个替代方案可能正在转换`byte`为`char`最终`string`

```
Log.i(TAG, Character.toString((char) recBuf[0])); 
```

或者

```
Log.i(TAG, String.valueOf((char) recBuf[0])); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-27T14:09:03.057

您假设您使用的是 8 位字符编码（如 ASCII），这对许多其他人来说是错误的。

但是根据您的假设，您也可以使用简单的角色转换为

```
char yourChar = (char) yourByte; 
```

或者如果真的需要字符串：

```
String string = String.valueOf((char)yourByte); 
```

# mobile - Tabris，Eclipse RAP：是否有公共 API 可以了解哪个客户端请求了该页面？

> ID：11689168
> 
> 赞同：0
> 
> 时间：2012-07-27T13:50:32.753
> 
> 标签：mobile, eclipse-rap

我正在使用 Eclipse RAP 编写 RAP 应用程序。客户端可以是任何浏览器、iPad 或安卓平板电脑（使用 Tabris）。有没有机会找出哪个客户端发送了请求？

我的问题的背景是：Tabris 直到现在才支持 SashForms。出于这个原因，我想渲染一个 SashFrom 以防我为 Web 客户端提供服务，但如果为 android 客户端提供服务，我不想创建一个 SashForm。我可以做这样的事情：

```
public static boolean isAndroid() {
    return getUserAgent().contains(Constants.ID_ANDROID);
}

private static String getUserAgent() {
    return RWT.getRequest().getHeader(Constants.USER_AGENT);
}

public static boolean isIos() {
    return getUserAgent().contains(Constants.ID_IOS);
}

public static boolean isWeb() {
    return !isAndroid() && !isIos();    
} 
```

但我想避免这种方法，因为它使用内部 API，并且由于我使用的是独立 RAP，我需要将 servlet-api.jar 添加到 WEB-INF/lib 文件夹以使其运行，这也不是很好的。

提前感谢您的帮助和信息，托拜厄斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:01:10.553

我认为这会有所帮助：[https ://github.com/eclipsesource/tabris/blob/master/com.eclipsesource.tabris/src/com/eclipsesource/tabris/ClientDevice.java](https://github.com/eclipsesource/tabris/blob/master/com.eclipsesource.tabris/src/com/eclipsesource/tabris/ClientDevice.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T06:50:59.603

一种替代使用 ClientDevice 的方法是使用 RWT.getClient()。

if( RWT.getClient() instanceof WebClient ) { .... }

这有时很有用，因为如果 Web 客户端访问应用程序，ClientDevice 可以为空。这是一项仅对移动客户端 atm 有效的客户端服务。

# javascript - 动画嵌套列表

> ID：11689171
> 
> 赞同：2
> 
> 时间：2012-07-27T13:50:37.400
> 
> 标签：javascript, jquery

在我的一个页面上，我使用`Isotope`插件。我以前不知道这一点，但`Chrome`在`z-order`使用`css3 transforms`. 因此，最初我的嵌套菜单通过不透明度更改和适当的 z-index 看起来好多了。问题是嵌套`ul`在内容 div 下。

然后我认为应用调整大小（通过嵌套）并在悬停时`ul`更改父背景会很酷。`ul`所以最后我得到了这个：

[http://jsfiddle.net/challenge/xARgS/101/](http://jsfiddle.net/challenger/xARgS/101/)

*   我如何在这里改进脚本？是否可以对其进行优化？
*   看着它`IE8`就像一场自然灾害！为什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:02:21.437

更改 css 类以更改背景颜色的悬停事件有点笨拙：只需使用 css :hover

您还可以通过添加动画来改进它：http: [//jsfiddle.net/xARgS/102/](http://jsfiddle.net/xARgS/102/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:01:59.970

部分问题可能是每次您将鼠标悬停在导航项上时，您都必须在视觉上调整主导航栏的大小。尝试从该栏中删除视觉样式并添加具有相对或绝对定位的包装 div，并使用其 z-index 将其放置在导航元素后面。

# c - C多线程环境中的浮点损坏

> ID：11689172
> 
> 赞同：2
> 
> 时间：2012-07-27T13:50:37.603
> 
> 标签：c, multithreading, floating-point

我遇到了从最终无效的加法和乘法返回的浮点值的问题。

**背景**：我在 Visual Studio 多线程环境中使用 Speex。而在某个时刻，通常在音频编码和解码 1 或 2 分钟后，我的解码信号完全变成了 Nan。我认为我的问题与该线程中讨论的相同（[Speex on windows, audio cut out](http://lists.xiph.org/pipermail/speex-dev/2009-February/007113.html)），但我在这个问题上挖得更深一些。

**情况**：我修改了 libspeex 的一部分以放置一些调试代码，这就是我所拥有的（我在这里扩展了一些宏，我知道有些部分是多余的）。

```
float *mem, *den;     // Arrays of finite float values
float nyi;      // finite float value.
float a1, a2;   // debug test variables.

...

if (!_finite(mem[j]) || !_finite(mem[j+1]))
    printf("Nan\n");       // Does not reach this

a1     = ((mem[j+1])+(float)(den[j])*(float)(nyi));   // a1 == expected value
mem[j] = ((mem[j+1])+(float)(den[j])*(float)(nyi));   // mem[j] == -1.#IND
a2     = ((mem[j+1])+(float)(den[j])*(float)(nyi));   // a2 == expected value

if (!_finite(mem[j]) || !_finite(mem[j+1]))
    printf("Nan\n");          // Program reach this and stops at breakpoint 
```

第一个奇怪的行为是*a1*和*a2*计算正确的值，而*mem[j]*没有。第二个奇怪的事情：如果我尝试重新执行对*mem[j]*语句的影响（我知道这可能会导致意外结果，但它仍然为调试目的提供了提示），那么影响到*mem[j]*的值是期望值：同a1和a2。

我确实检查了明显的：

*   此代码部分受互斥锁保护：其他线程不可能损坏内存。
*   所有浮点值都是有效的、有限的，加法和乘法的结果应该在浮点数的范围内。
*   所有数组索引都在其各自数组的范围内。

如果没有其他线程在运行，问题似乎不会出现。

*   本线程：音频解码线程。
*   音频编码线程。
*   一些网络套接字线程...

它是大型软件的一部分，但解码部分确实受到适当互斥锁的保护，不受其他部分的影响。

所以看起来好像在浮点计算中间发生了上下文切换，并且之后它无法恢复上下文。但很难相信会发生如此糟糕的事情。

我听说在多线程中使用浮点不一致，但它应该只影响最不重要的部分，不会产生 Nan 值。

有没有人见过这样的行为？你是怎么解决的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:24:03.913

问题：

*   所有多余的演员是怎么回事？
*   `den[j]`和的值是`nyi`多少？

除此之外，一个合理的可能性是同一线程上的另一个计算溢出了浮点堆栈，或者使用了 MMX 指令但未能`emms`在产生控制权之前发出指令（这些条件中的任何一个都会导致在其他情况下无异议的浮点计算产生 NaN 结果）。首先检查故障状态下的 x87 状态字，以确认或排除这些可能性。

没有多个线程就不会发生问题的事实使得这种解释不太可能，但损坏的 x87 状态是迄今为止“否则无法解释”的 NaN 的最常见来源，应该首先排除。

# xtk - NRRD 体积切片方向的 2D 渲染反转？

> ID：11689174
> 
> 赞同：0
> 
> 时间：2012-07-27T13:50:42.763
> 
> 标签：xtk

在[http://jsfiddle.net/gh/get/library/pure/xtk/lessons/tree/gh-pages/13/#run](http://jsfiddle.net/gh/get/library/pure/xtk/lessons/tree/gh-pages/13/#run)给出的示例中，Z 方向显示 3D 视图的镜像视图。有没有办法让它们朝着同一个方向发展？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:00:19.040

红色视图是一样的，可能黄色不？

我认为它来自相机“位置”（0,0,-100）。这足以让您将渲染器的相机旋转 180°，即使用***myrenderer.camera.rotate([900,0]);*** 或***myrenderer.camera.rotate([0,900])***（我不记得哪个好）？

问题是相机在物体后面，而不是在前面。

# asp.net-mvc-4 - MVC 4 Web API 可以像传统的 MVC 控制器一样映射值吗？

> ID：11689176
> 
> 赞同：2
> 
> 时间：2012-07-27T13:50:51.223
> 
> 标签：asp.net-mvc-4, asp.net-web-api

Web API 是否可以将消息正文中的值映射到参数列表？例如，如果我有这个：

```
public HttpResponseMessage Post(int id, string value1, string value2) {} 
```

而不是这个：

```
public HttpResponseMessage Post(MyCustomClass message) {} 
```

我通过提琴手发布 JSON，只能让后者工作。虽然我更喜欢后者，但我只是好奇是否可以让第一个示例工作。我可以使用查询字符串参数让它工作，但我无法让它工作发布表单值或 json。只是好奇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:03:53.350

不，这是不可能的。Mike Stall 有一篇很棒的帖子详细解释了这一点 - [http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)

简而言之，在 MVC 中，您只有模型绑定器，整个请求体被缓冲并馈送到绑定器中。

在 Web API 中，您同时拥有模型绑定器和格式化程序。

经验法则是 Web API 使用模型绑定器来读取查询字符串参数和格式化程序来读取正文。并且请求正文没有被缓冲——它是一个只读的、单向的、异步的流。因此**，您只能从正文中读取一件事**——无论是简单类型（即字符串、int）还是复杂类型，都没有关系——它只能是一件事。

# web-services - 每次调用 Web 服务时重复用户名/密码验证

> ID：11689179
> 
> 赞同：3
> 
> 时间：2012-07-27T13:50:58.123
> 
> 标签：web-services, authentication

我正在创建一个 Web 服务以向我的移动应用程序公开。我目前正在实施基于令牌的身份验证解决方案（因为我过去所做的）；但是，我在这种情况下很难理解为什么我不只是每次都简单地传递用户名和密码？我可以在运行移动应用程序时将密码保存在 RAM 中（如果我们想变得过于复杂，则在两次使用之间进行加密），然后在每次连接到服务器时传递它并每次都重复哈希验证。当然，一切都是 SSL，所以在网络传输方面，每次都做而不是一次做就没有更多的风险？我看到的唯一缺点是哈希验证过程可能比令牌验证更昂贵 - 也许。我在这里还缺少其他缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:51:40.437

不这样做有几个原因：

1.  每次传输信息时，都会面临被拦截的风险。（即使通过使用诸如 SSL 之类的加密系统可以大大减轻这种风险）。
2.  在每个请求上传递用户名/密码组合意味着您将在每个请求的服务器端检查它们的组合。这通常需要额外的数据库命中和一些不必要的逻辑。
3.  如果您在每个请求上都传递这样的证书，您将需要为每个请求使用 SSL - 这是昂贵的开销。以纯文本来回发送加密的身份验证令牌要便宜得多 - 只有服务器端可以读取。

这似乎是最近几天在 SO 上的一个热门话题，因为我已经回答了几个关于 RESTful auth 等的问题。我在下面提供了一些指向这些答案的链接——这些链接更深入。也许如果您看一下我提出的身份验证方案 - 您会看到它如何保护您，而不仅仅是在每个请求上发送用户名/密码。

[RESTful Web 服务中的身份验证](https://stackoverflow.com/questions/13186455/authentication-in-restful-web-services/13187135#13187135)

[面向公众的 REST 身份验证机制](https://stackoverflow.com/questions/12361017/public-facing-authentication-mechanisms-for-rest/13199099#13199099)

# iphone - 如何在拍摄照片的那一刻暂停视频？

> ID：11689197
> 
> 赞同：8
> 
> 时间：2012-07-27T13:52:11.767
> 
> 标签：iphone, ios, avfoundation, avcapture

我`AVFoundation`正在`UIView`通过`AVCaptureVideoPreviewOverlay`. 然后我使用captureStillImageAsynchronouslyFromConnection从带有预设`AVStillImageOutput`的视频中捕获静止图像 。`-``:``AVCaptureSessionPresetPhoto`

我正在使用前面提到的 captureStillImageAsynchronouslyFromConnection 完成块中`AVCaptureSession`的`-`stopRunning来冻结视频。`-`但是，为时已晚，并且在拍摄静止图像时视频继续运行，因此冻结在一两秒后。当我显示图像时，会有一个跳跃。

**如何在拍摄照片的那一刻冻结视频？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T03:06:47.630

差不多一年后……你的方法全错了。与其尝试在捕获图像的精确时刻暂停视频，不如暂停视频然后捕获暂停的图像。对于用户而言，这没有什么区别，对于开发人员而言，您不必担心精确度。

重申我的想法，如果您暂停视频并闪烁白色视觉效果并播放点击，用户会认为您刚刚捕获了该帧，无论您是否是。实际上，您可以考虑暂停视频，就像在不保存图像的情况下捕获图像一样。

# c# - 单击通知图标后显示窗口

> ID：11689201
> 
> 赞同：1
> 
> 时间：2012-07-27T13:52:19.397
> 
> 标签：c#, winforms, .net-4.0

在表单最小化到系统托盘后，当用户单击我的通知图标时，我试图显示我的表单。但是，在调用 Show() 时，表单会重新出现但总是最小化，我必须单击任务栏图标才能取消最小化。这是我的代码。

```
 private void Form1_Resize(object sender, EventArgs e)
        {
            if (WindowState == FormWindowState.Minimized)
            {
                Hide();
            }
        }

        private void notifyIcon1_Click(object sender, EventArgs e)
        {
            Show();
            //BringToFront();
        } 
```

我也尝试添加 BringToFront() 但无济于事。

我需要 noifyIcon click 来显示表单，但之后不会将其最小化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:54:18.940

将`WindowState`属性设置为`Normal`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T13:54:33.700

将窗口状态设置回未最小化。例如 ：

```
this.WindowState = FormWindowState.Maximized; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T13:55:36.557

尝试添加

```
this.WindowState = FormWindowState.Normal; 
```

# ruby-on-rails - 从逗号分隔的 ID 一次创建多个记录

> ID：11689204
> 
> 赞同：0
> 
> 时间：2012-07-27T13:52:32.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3

所以我有一个文本字段，用户可以在其中放置逗号分隔的卡 ID，例如 1、2、3。当这个用户提交表单时，我想为他提交的每个 ID 创建一个新记录。所以一加一，一加二，一加三。

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:56:22.997

尝试

```
ModelName.create(input_string.split(',').map{ |i| { :field => i.strip } }) 
```

`split`将以逗号分隔输入，map 将生成模型文本字段`{ :field => i }`在哪里的数组。`:field`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:56:35.607

您必须从控制器中的文本字段解析输入值。例如：

```
def update
   ids_input=params[:ids]
   ids_input.split(',').each { |id|
      Card.create(:some_id=>id,:other_column=>'some_value',:related_user=>current_user)
   }
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:00:59.580

有几种方法可以实现这一点，具体取决于您的具体需求。一种方法是遍历控制器中的所有条目，就像@rogal111 在他的回答中建议的那样。

如果您的用户和卡片之间存在一对多的关系，无论如何这很可能是要走的路，我建议您通过嵌套表单来完成它。瑞安·贝茨（Ryan Bates）对此做了一些出色的[截屏视频](http://railscasts.com/episodes?utf8=%E2%9C%93&search=nested%20form)。

# jsp - Struts2Url 隐藏

> ID：11689205
> 
> 赞同：0
> 
> 时间：2012-07-27T13:52:33.377
> 
> 标签：jsp, url, struts2

我想隐藏 strut2 url....我正在访问 ip:port/contextRoot/HideUrl.jsp。在这个 Jsp 中有一个按钮，点击这个 step1 动作类的功能正在调用，并且 url 更改为 ip:port/contextRoot/step1Struts2 ....我可以保留原始 url ip:port/contextRoot/HideUrl.jsp。 .....我不想在 url 中显示 'step1Struts2' ......我能做到这一点吗？如何实现？

隐藏网址.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags" %>

<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
    <script type="text/javascript">
       function callStep1()
       {
           document.struts2Form.action="step1Struts2";
           document.struts2Form.submit();
       }

    </script>
</head>
<body>
      <s:form name="struts2Form">
        <input type="button" value="CallStep1" onclick="callStep1()"></input>

    </s:form>

</body>
</html> 
```

struts.xml

```
<?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

 <struts>

<constant name="struts.devMode" value="true" />

<package name="struts2" extends="struts-default" namespace="/">
    <action name="*Struts2" class="example.HideUrl" method="{1}">
        <result name="input">HideUrl.jsp</result>
    </action>

</package>

<constant name="struts.action.excludePattern" value="/*.servlet"/>

   </struts> 
```

HideUrl.java

```
package example;

import com.opensymphony.xwork2.ActionContext;
 import com.opensymphony.xwork2.ActionSupport;
 import java.util.Map;

 public class HideUrl extends ActionSupport {

 public String step1() throws Exception
{
    Map session = (Map)ActionContext.getContext().getSession();
    System.out.print("[HideUrl] step1 ");
    session.put("step1", "step1");
    return "input";
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:08:42.397

您可以使用 Ajax 请求并使用呈现的操作结果更新 DOM。

不过，通常您不想*直接*在 MVC 应用程序中访问 JSP 页面。

另一种选择是向一个简单地转发到“真实”动作的动作发出请求，本质上是在 MVC 系统中创建一个 MVC 系统。

我不明白你为什么要隐藏 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T20:49:19.600

在我看来，您要求重写 URL 以隐藏丑陋的 URL。

这可以通过多种方式完成

1.  通过 Apache configs [为初学者重写 URL](http://www.addedbytes.com/for-beginners/url-rewriting-for-beginners/)

2.  Tomcat URL 重写，虽然我没怎么尝试过这个 [UrlRewriteFilter](http://tuckey.org/urlrewrite/)

或者通过一个 rest 类型的 URL 配置：

1.  通过STRUTS2 Rest Support（不是真正重写） [REST Plugin](http://struts.apache.org/2.x/docs/rest-plugin.html)

我一般使用 REST 插件，您只需要了解您使用的操作方法名称即可。如果您不希望它成为 step1Struts2，请不要将方法命名为 step1Struts2，将其命名为 process() 或其他不那么...丑陋的东西。

# google-chrome - 如何防止在 chrome 扩展中缓存资源？

> ID：11689211
> 
> 赞同：6
> 
> 时间：2012-07-27T13:52:43.817
> 
> 标签：google-chrome, google-chrome-extension

使用“加载解压扩展”时。我必须将查询字符串（例如？v=\d+）传递给后台页面中包含的脚本来破坏缓存。

有没有办法禁用这种缓存行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:08:50.410

也许尝试保留一个带有更新号的文件，当您的用户打开扩展程序时，它会检测到新的更新并清除缓存？您可以在扩展清单中添加缓存权限，如下所示：

```
"permissions": [
  "browsingData",
], 
```

然后在您的扩展中清除缓存，如下所示：

```
var callback = function () {
  // Do something clever here once data has been removed.
};

var millisecondsPerWeek = 1000 * 60 * 60 * 24 * 7;
var oneWeekAgo = (new Date()).getTime() - millisecondsPerWeek;
chrome.browsingData.remove({
  "since": oneWeekAgo
}, {
  "appcache": true,
  "cache": true,
  "cookies": true,
  "downloads": true,
  "fileSystems": true,
  "formData": true,
  "history": true,
  "indexedDB": true,
  "localStorage": true,
  "pluginData": true,
  "passwords": true,
  "webSQL": true
}, callback); 
```

# c# - Telerik GridViewMaskedTextBoxColumn 与 MaskType="Numeric" 为数字输入抛出验证错误

> ID：11689219
> 
> 赞同：1
> 
> 时间：2012-07-27T13:53:16.493
> 
> 标签：c#, wpf, telerik

我在我的 xaml 代码中定义了以下列

```
<telerik:GridViewMaskedTextBoxColumn Mask="P1" MaskType="Numeric" 
DataMemberBinding="{Binding CurrentAllocationWeight}" 
DisplayIndex="1" IsReadOnly="True" DataFormatString="{}{0:P1}"  
Header="% Of Total" ColumnGroupName="CurrentAllocation"/> 
```

bound 属性是一个可以为 null 的十进制值。我在代码隐藏中没有其他验证。当我尝试在单元格中输入值时，出现验证错误：“DecimalConverter 无法从 System.Double 转换”。

我应该如何解决这个问题，以便用户可以输入 5.5，它会在单元格中将该值显示为“5.5%”？

哈萨宁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:52:24.577

解决方案是创建一个双精度到十进制值转换器。在值转换器 ConvertBack 方法中，只需将双精度数转换为小数。

# python - Python、UTF-8 文件系统、iso-8859-1 文件

> ID：11689223
> 
> 赞同：0
> 
> 时间：2012-07-27T13:53:32.747
> 
> 标签：python, unicode, utf-8, filesystems, iso-8859-1

我有一个用 Python 2.7 编写的应用程序，它使用 os.walk 从硬盘驱动器读取用户文件。

该应用程序需要 UTF-8 系统语言环境（我们在启动之前检查 env 变量），因为我们处理带有 Unicode 字符的文件（例如，其中包含艺术家姓名的音频文件），并希望确保我们可以保存这些文件文件系统的正确文件名。

我们的一些用户有 UTF-8 语言环境（因此是 UTF-8 fs），但仍然设法将 ISO-8859-1 文件存储在他们的驱动器上。当我们的代码尝试 os.walk() 这些目录时，这会导致问题，因为 Python 在尝试使用 UTF-8 解码此 ISO-8859-1 字节序列时会抛出异常。

所以我的问题是，我如何让 python 忽略这个文件并继续下一个而不是中止*整个*os.walk()。我应该滚动自己的 os.walk() 函数吗？

编辑：到目前为止，我们一直在告诉我们的用户使用 convmv linux 命令来更正他们的文件名，但是许多用户有各种不同类型的编码（8859-1、8859-2 等），并且使用 convmv 需要用户在单独对每个文件运行 convmv 之前，对哪些文件具有什么编码进行有根据的猜测。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:01:28.487

请阅读[Unicode 文件名](http://docs.python.org/howto/unicode.html#unicode-filenames)，这是 Python Unicode how-to 的一部分。最重要的是，文件系统编码不一定与终端中当前的 LANG 设置相同。

具体来说，`os.walk`它是基于`os.listdir`.

改为传递一个 8 位路径，您的代码将正常工作，然后根据需要从 UTF-8 或 ISO 8859-1 解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T21:10:19.283

使用字符编码检测，python 的 chardet 模块可以很好地确定实际编码有一定的信心。“酌情”——您要么知道编码，要么必须猜测它。如果使用 chardet 你猜错了，至少你试过了。

# ruby-on-rails - 如何在不使用 RVM 的情况下指定 Ruby for Rails 的版本？

> ID：11689224
> 
> 赞同：1
> 
> 时间：2012-07-27T13:53:35.057
> 
> 标签：ruby-on-rails, ruby, xubuntu

如何在**不使用 RVM**的情况下指定 Ruby for Rails 的版本？

我使用的是 Ruby 1.8 附带的 Xubuntu 11.10。我已经安装了 Ruby 1.9 包，并更新了替代品，所以`ruby -version`返回`ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-linux]`. 然而，Rails 似乎仍在使用 1.8，那么我怎样才能告诉它使用 Ruby 1.9 呢？我不想卸载 Ruby 1.8，因为这也会删除一堆其他的东西。

我知道“使用 RVM”已经回答了类似的 SO 问题。我不能这样做 - 它依赖于 包，它与依赖于哪个`libreadline-gplv2-dev`冲突。`libreadline-dev``r-base-dev`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:15:02.020

看来我需要更新 gem 命令以使用 1.9 版本以及 ruby​​，然后我可以通过它安装 rails。但是要安装 rails，我需要 ruby​​ 的开发头文件。以下命令应该适用于其他人：

```
sudo apt-get install ruby1.9.1 ruby1.9.1-dev
sudo update-alternatives --config ruby
sudo update-alternatives --config gem
sudo gem install rails 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T14:25:48.437

如果您处理多个项目，更改 ruby​​ 的版本是例行公事。如果您不能使用 rvm，请尝试[rbenv](https://github.com/sstephenson/rbenv/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T14:24:59.053

看来您的 ruby​​gems 环境正在使用 ruby​​ 1.8，而您希望您的 rails 应用程序在 1.9 中运行。您可以通过以下方式找到：

```
$ ruby -version
ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-linux]

$ gem env | grep 'RUBY VERSION'
   - RUBY VERSION: 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux] 
```

确保运行 rails 的 ruby​​gems 环境正在运行您想要的版本。

# php - 使用 Doctrine2 和 Symfony2 删除表

> ID：11689226
> 
> 赞同：5
> 
> 时间：2012-07-27T13:53:39.410
> 
> 标签：php, symfony, doctrine-orm

如何使用 Doctrine2 和 Symfony2 删除表？我已经生成了实体并更新了架构，现在我想删除这个结构。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-27T14:51:56.487

不确定我是否正确理解了您的问题。您删除了一个实体并想从数据库中删除其生成的表？如果是这样的话：

你不能这样做，因为 Doctrine2 只关心它知道的表 - 这意味着由实体表示的表。由于您从应用程序中删除了一些实体，Doctrine 不再认为该表属于您的应用程序。在同一个数据库中存在不同应用程序的不同表的情况。如果 Doctrine 仅仅因为它对它们一无所知而删除它们，那是没有意义的。这将是种族主义......但反对桌子。

如果您只想以编程方式删除表，则可以使用原始查询。据我所知，Doctrine 没有任何删除表格的方法。或者作为替代方案，您可以手动完成。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-13T14:08:08.383

你可以做一个原始的sql。

例如在 Symfony2 控制器中：

```
$em = $this->getDoctrine()->getManager();
$sql = 'DROP TABLE hereYourTableName;';
$connection = $em->getConnection();
$stmt = $connection->prepare($sql);
$stmt->execute();
$stmt->closeCursor(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T14:19:30.757

只需删除您不再手动使用的表...Doctrine 完全忽略未映射的表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-16T13:46:16.520

在 Doctrine 2.6.2 中，您可以通过删除实体类来 DROP 表，在 migrations:diff 之后，您将使用 DROP TABLE 查询获得新文件，migrations:migrate 将执行删除所需表的命令。即将被删除的类与其他实体有关系，所以我不得不粗暴地（手动）删除其他实体中对旧实体类的所有提及。刚测试过。

# cocoa - CIImage 绘图 EXC_BAD_ACCESS

> ID：11689233
> 
> 赞同：2
> 
> 时间：2012-07-27T13:54:12.843
> 
> 标签：cocoa, core-image, osx-mountain-lion, quartz-core, ciimage

所以，我有一个`CIImage`我试图用`NSView`'s`-drawRect`方法绘制的东西。

这是我用来绘制图像的代码行：

```
[outputCoreImage drawInRect: [self bounds]
                   fromRect: originalBounds
                  operation: NSCompositeSourceOver
                   fraction: 1]; 
```

`outputCoreImage`, `originalBounds`, 和`[self bounds]`都是非`nil`, 并且确实是它们各自的期望值。在 Lion (OS X 10.7) 上，这工作得很好，但是在 Mountain Lion (OS X 10.8) 上，我收到了`EXC_BAD_ACCESS`这条线路。如果我走上堆栈，我会发现中断的内部函数调用是 on `CGLGetPixelFormat`。

```
frame #0: 0x00007fff99c3b26d OpenGL`CGLGetPixelFormat + 27
frame #1: 0x00007fff8fa98978 CoreImage`-[CIOpenGLContextImpl createAccelContext] + 335
frame #2: 0x00007fff8fa98d30 CoreImage`-[CIOpenGLContextImpl updateContext] + 111
frame #3: 0x00007fff8fa9a865 CoreImage`-[CIOpenGLContextImpl _lockfeContext] + 25
frame #4: 0x00007fff8fa7e4ac CoreImage`-[CIContextImpl setObject:forKey:] + 120
frame #5: 0x00007fff8fa9881c CoreImage`-[CIOpenGLContextImpl setObject:forKey:] + 259
frame #6: 0x00007fff90db93e3 libCGXCoreImage.A.dylib`cgxcoreimage_instance_render + 1477
frame #7: 0x00007fff97074ac6 CoreGraphics`CGSCoreImageInstanceRender + 32
frame #8: 0x00007fff947c89cc libRIP.A.dylib`ripc_AcquireCoreImage + 1344
frame #9: 0x00007fff947b8a00 libRIP.A.dylib`ripc_DrawShading + 9680
frame #10: 0x00007fff96cb2b2b CoreGraphics`CGContextDrawShading + 51
frame #11: 0x00007fff8fa78237 CoreImage`-[CICGContextImpl render:] + 918
frame #12: 0x00007fff8fa7d76a CoreImage`-[CIContext drawImage:inRect:fromRect:] + 1855
frame #13: 0x00007fff9897b8f3 AppKit`-[CIImage(NSAppKitAdditions) drawInRect:fromRect:operation:fraction:] + 243 
```

我打开了僵尸、守卫 malloc 和日志异常，但它们都没有返回任何有用的信息。

**其他 OpenGL 测试：**

我添加了这个块：

```
CIImage *anImage  = [[CIImage alloc] init];
[[[self window] contentView] lockFocus];
{
    [anImage drawInRect: [[self window] frame]
               fromRect: [[self window] frame]
              operation: NSCompositeSourceOver
               fraction: 1];
}
[[[self window] contentView] unlockFocus]; 
```

到`-windowDidLoad`我的方法`NSWindowController`。它运行没有问题。

我添加了这个块：

```
NSData *data = [NSData dataWithContentsOfURL: [NSURL URLWithString: @"http://cache.virtualtourist.com/14/684723-Red_Square_Moscow.jpg"]];

CIImage *anImage  = [[CIImage alloc] initWithData: data];
[self lockFocus];
{
    [anImage drawInRect: [self bounds]
               fromRect: [anImage extent]
              operation: NSCompositeSourceOver
               fraction: 1];
}
[self unlockFocus]; 
```

给别人`NSView`的`-drawRect`。我收到了同样的错误`CGLGetPixelFormat`。

**雷达：**

#macdev 的人们似乎认为这是操作系统问题，我不倾向于不同意。我已经提交了一个雷达（rdar://11980704）来解释问题并链接回这个问题。

**解决方法：**

```
CGContextRef contextReference = [[NSGraphicsContext currentContext] graphicsPort];
CIContext *coreImageContext = [CIContext contextWithCGContext: contextReference
                                                      options: @{kCIContextUseSoftwareRenderer : @YES}];

[coreImageContext drawImage: outputCoreImage
                     inRect: [self bounds]
                   fromRect: originalBounds]; 
```

看起来强制使用软件渲染器绘制图像“解决”了这个问题。它有点模糊和缓慢，但它不会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:29:55.390

### 在 10.8.1 中解决

#macdev 的人们似乎认为这是操作系统问题，我不倾向于不同意。我已经提交了一个雷达（rdar://11980704）来解释问题并链接回这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:10:34.360

这可能是您的应用程序第一次调用任何可能正在执行一些首次运行初始化或检查的 OpenGL 例程。

对于实验，请尝试在您的应用程序的早期添加一点 OpenGL 代码，看看是否也会崩溃。试着想想为什么调用 OpenGL 会导致崩溃。

# javascript - 我有一个字符串，想使用 javascript 在其特定部分删除特殊字符

> ID：11689234
> 
> 赞同：2
> 
> 时间：2012-07-27T13:54:12.987
> 
> 标签：javascript, jquery, ajax, json, string

我有一个字符串看起来像：

```
var myString= '{"key1":"value1", "key2":"value2", "key3":"value3"}'; 
```

我想要的是仅从 value3 中删除双引号和其他特殊字符 ...例如，有时我们的字符串如下所示：

```
var myString= '{"key1":"value1", "key2":"value2", "key3":"This is "value" with some special chars etc"}'; 
```

请注意，我不想在冒号之后和之前删除双引号，同样我也不想删除最后一个双引号。我只想修改字符串，使其变为：

```
var myString = '{"key1":"value1", "key2":"value2", "key3":"This is value with some special chars etc"}'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:02:16.967

简单的...

```
var myNewString = eval( '('+ myString +')');

var toBeEscaped = myNewString.key3;

var escapedString = doYourCleanUpStuff(toBeEscaped);

myNewString.key3 = escapedString;

myNewString = JSON.stringify(myNewString); 
```

================

我做了什么？

1) 您的字符串看起来像有效的 JSON。

2) 将其转换为 JSON 对象。（使用`eval()`）

3）检索值`key3`并将其捕获到某个临时变量中。

4）用这个临时变量做清理工作。

5) 将清理后的临时变量分配回 key3。

6) 将 JSON 字符串化。

不要用数组操作和拆分函数到处打架，尤其是当有更简单的方法时:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:56:27.833

您可能希望将 Array`map`函数与 string`replace`函数结合使用。

要使用该`replace`函数，您可能需要使用正则表达式。例如，以下正则表达式将不立即删除冒号后的双引号：`[^:]"`.

要替换字符串数组中不紧跟冒号的每个引号，您可以这样写：

```
var myString= '{"key1":"value1", "key2":"value2", "key3":"value3"}';
var modified = myString.map(function(s) { return s.replace(/[^:]"/g, ''); }); 
```

对正则表达式进行自己的修改以匹配要删除的字符。

请参阅[http://www.addedbytes.com/cheat-sheets/regular-expressions-cheat-sheet/](http://www.addedbytes.com/cheat-sheets/regular-expressions-cheat-sheet/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:02:35.367

我想到的第一件事就是隔离你想要的价值。

你可以`.Split()`为你想要的价值

> var myString = '{"key1":"value1", "key2":"value2", "key3":"value3"}';var n=str.split(" ");
> var key3Value = str.split(//根据你的值);
> 
> //在你的 key3Value 上运行 .replace() 来替换你的双引号等。
> 
> //重新声明myString以包含更新后的key3Value

抱歉，目前没有时间完成代码，我相信他们的答案比我的更好/更短。只是想将此作为一个选项。

# dojo - 将 dojo/dom 库包含到 Spring Roo

> ID：11689239
> 
> 赞同：2
> 
> 时间：2012-07-27T13:54:24.887
> 
> 标签：dojo, javascript, spring-roo

如何在 Spring roo 中包含和使用**dojo/dom**库。

这：

```
 <script type="text/javascript">
                      dojo.require('dojo/dom');
                      dojo.ready(function remAttr(){
                          dojo.removeAttr('theId', 'value');
                        }
                     );
</script> 
```

结果是：

```
"NetworkError: 404 Introuvable - http://localhost:8131/suivitrc/resources/dojo/dom.js"
dom.js
Could not load 'dojo/dom'; last tried '../dojo/dom.js' 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T03:38:36.817

我认为roo中dojo的版本目前低于1.7。这意味着您可以从代码中删除以下行，因为 remoteAttr 函数是 dojo.js 的一部分：

```
dojo.require('dojo/dom'); 
```

见这里：[http ://dojotoolkit.org/reference-guide/1.7/dojo/removeAttr.html](http://dojotoolkit.org/reference-guide/1.7/dojo/removeAttr.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T17:43:34.887

命名空间 => 到模块路径是通过替换句点 (.) 来检索的，简而言之 - 您需要用点替换斜杠。你的要求应该是

```
 dojo.require('dojo.dom'); // blocking call? djConfig.async must be false 
```

由于错误与 dojo.require 指定的路径有关，这意味着您的 dojo.js 已找到并已加载（dojo.require 未定义）- baseUrl 与 dojo 模块无关。

问题是，您正在使用旧版加载程序来拉入 AMD 模块，在 1.7+ 中，require 语句的外观有所不同。

```
 // AMD loader form is
  function callbackFunctionOnComplete(dojoDom) { }
  require([ "dojo/dom" ], callbackFunctionOnComplete); // non-blocking 
```

因此，`dojo.require`工作原理如下，假设我们作为字符串传递的参数称为 'module;

```
dojo.require = function(module) {
   var parts = module.split('.'); 
```

### 1 - 获取顶级命名空间（全局）

```
 var packageName = parts.shift(); // first part is the package name 
```

### 2 - 获取文件名（减去 .js）

```
 var id = parts.pop(); // the last bit 
```

### 3 - 将中间的所有内容转换为路径（相对于 packagelocation）

```
 var mid = parts.join("/"); 
```

### 4 - 查找包（从顶层）位置

```
 var fullpath = // in pseudo
       foreach dojoconfig.packages 
         iff obj.name == packageName 
            set to obj.location 
```

### 5 附加其余部分并开始下载模块

```
 fullpath += mid + id + '.js'
   transport.get(..... fullpath .....) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T11:17:24.427

您需要使用 dojo config 配置 dojo。我更喜欢这里解释的表格：

[http://dojotoolkit.org/reference-guide/1.7/dojo/_base/config.html#explicitly-creating-a-dojoconfig-object-before-包括-the-dojo-core](http://dojotoolkit.org/reference-guide/1.7/dojo/_base/config.html#explicitly-creating-a-dojoconfig-object-before-including-the-dojo-core)。

你需要告诉道场在哪里可以找到它的东西。一个例子：

```
 var dojoConfig =
  {
     baseUrl : "/yourApp/js",  // defines the js folder in your webapp
     tlmSiblingOfDojo: false,
     async: true,
     parseOnLoad:true,
     packages: [
        { name: "app", location: "app"}, // where it is in the js folder

        { name: "dojo", location: "lib/dojo" }, // where it is in the js folder
        { name: "dijit", location: "lib/dijit" },
        { name: "dojox", location: "lib/dojox" }
     ]
  }; 
```

您使用的要求表单也已弃用。见[http://livedocs.dojotoolkit.org/dojo/require](http://livedocs.dojotoolkit.org/dojo/require)

# c# - LINQ：元组列表到列表元组

> ID：11689240
> 
> 赞同：11
> 
> 时间：2012-07-27T13:54:24.870
> 
> 标签：c#, linq

我有一个`List<Tuple<A,B>>`并且想知道 LINQ 是否有办法返回`Tuple<List<A>,List<B>>`

这类似于以下 Python 问题：[Unpacking a list / tuple of pairs into two lists / tuples](https://stackoverflow.com/questions/7558908/unpacking-a-list-tuple-of-pairs-into-two-lists-tuples)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-27T13:59:23.510

使用单个 LINQ 调用是不可能的，但是您可以使用代码很容易地做到这一点：

```
Tuple<List<A>, List<B>> Unpack<A, B>(List<Tuple<A, B>> list)
{
  var listA = new List<A>(list.Count);
  var listB = new List<B>(list.Count);
  foreach (var t in list)
  {
    listA.Add(t.Item1);
    listB.Add(t.Item2);
  }

  return Tuple.Create(listA, listB);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T18:46:48.890

您可以使用[聚合](http://msdn.microsoft.com/en-us/library/bb549218.aspx)：

```
Tuple<List<A>, List<B>> Unpack<A, B>(List<Tuple<A, B>> list)
{
    return list.Aggregate(Tuple.Create(new List<A>(list.Count), new List<B>(list.Count)),
                          (unpacked, tuple) =>
                          {
                              unpacked.Item1.Add(tuple.Item1);
                              unpacked.Item2.Add(tuple.Item2);
                              return unpacked;
                          });
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T14:38:43.163

```
Tuple<List<A>, List<B>> Unpack<A, B>(List<Tuple<A, B>> list) {
            return Tuple.Create(list.Select(e => e.Item1).ToList(),list.Select(e => e.Item2).ToList());
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-27T14:06:30.607

```
public Tuple<List<int>,List<int>> Convert(List<Tuple<int, int>> BaseList)
{
    return new Tuple<List<int>,List<int>>((from tuple in BaseList
                                                        select tuple.Item1).ToList(),
                                                        (from tuple in BaseList
                                                        select tuple.Item2).ToList());
} 
```

我认为它是一个整数列表

# iphone - iPhone iOS UITabBar 如何释放控制器并稍后重新初始化？

> ID：11689246
> 
> 赞同：0
> 
> 时间：2012-07-27T13:54:34.810
> 
> 标签：iphone, objective-c, ios, memory-management, uitabbarcontroller

我正在考虑一种方法来响应 iOS 生成的内存警告。我有一个“昂贵”的标签栏控制器，它是响应内存警告的取消分配的良好候选者。

**我将如何将由 UITabBar 管理的控制器标记为“可删除”，但如果用户重新选择正确的 UITabBar 选项卡，则允许用户重新初始化控制器？**

UITabBar 会负责重新初始化被释放的控制器，还是会涉及某种延迟初始化？

我是否需要为选择选项卡且控制器为零时发生的情况编写自定义代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:14:28.980

UITabBarController 自动管理其分配和释放。

例如，当您向其中添加 UIViewController 时，tabbarcontroller 将不会加载您的视图（调用 viewDidLoad），它只会加载您的类（init 方法）。然后你可以在 viewDidLoad 上做所有繁重的工作。

当它收到警告通知时，TabbarController 将释放除当前视图之外的所有视图，并在用户返回已释放的选项卡时重新加载。

- 抱歉那里的英语不好。

# java - Java 内存泄漏：WDialogPeer 是唯一的强引用 - 为什么它不 GC？

> ID：11689247
> 
> 赞同：1
> 
> 时间：2012-07-27T13:54:37.163
> 
> 标签：java, swing, memory-leaks, awt, yourkit

我正在对遗留 Java 产品进行一些分析，并使用 YourKit 查找内存泄漏。我插了很多 - 但我一直遇到一个我无法解决的问题。

我有很多窗口/对话框，当我关闭它们时（并在它们从 JDialog 派生的情况下调用 dispose）它们只是没有被 GC 处理。YourKit 报告说 GC 的唯一根是**"target of sun.awt.windows.WDialogPeer [JNI Global]"**。还有一些弱引用似乎主要来自 MetalToolBarUI。大概这些只是因为来自 WDialogPeer 的这一强有力的参考而存在。

有没有人见过这个 - 或者任何人都可以告诉我WDialogPeer如何和或/为什么坚持我的JDialogs / JFrames？我怎样才能清理它？

# c# - 比较忽略换行符和空格的两个字符串

> ID：11689248
> 
> 赞同：8
> 
> 时间：2012-07-27T13:54:42.827
> 
> 标签：c#, .net, string

我需要比较两个忽略空格和换行符的字符串，因此以下字符串应该相等：

```
"Initial directory structure.\r\n    \r\n    The directory tree has been changed"
"Initial directory structure.\n\nThe directory tree has been changed" 
```

我该如何实施？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T13:59:28.767

怎么样：

```
string stringOne = "ThE    OlYmpics 2012!";
string stringTwo = "THe\r\n        OlympiCs 2012!";

string fixedStringOne = Regex.Replace(stringOne, @"\s+", String.Empty);
string fixedStringTwo = Regex.Replace(stringTwo, @"\s+", String.Empty);

bool isEqual = String.Equals(fixedStringOne, fixedStringTwo,
                              StringComparison.OrdinalIgnoreCase);

Console.WriteLine(isEqual);
Console.Read(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-08-20T15:47:37.333

另一种方法是使用 String.Compare 的 CompareOptions。

CompareOptions.IgnoreSymbols

指示字符串比较必须忽略符号，例如空格字符、标点符号、货币符号、百分号、数学符号、和号等。

```
String.Compare("foo\r\n   ", "foo", CompareOptions.IgnoreSymbols); 
```

[https://docs.microsoft.com/en-us/dotnet/api/system.globalization.compareoptions](https://docs.microsoft.com/en-us/dotnet/api/system.globalization.compareoptions)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T13:57:38.380

然后复制字符串

```
xyz.Replace(" ", string.Empty);
xyz.Replace("\n", string.Empty); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T13:57:27.223

怎么样：

```
string compareA = a.Replace(Environment.NewLine, "").Replace(" ", "");
string compareB = b.Replace(Environment.NewLine, "").Replace(" ", ""); 
```

然后你可以比较两者。

也许把它扔到一个辅助函数中：

```
public bool SpacelessCompare(string a, string b){
    string compareA = a.Replace(Environment.NewLine, "").Replace(" ", "");
    string compareB = b.Replace(Environment.NewLine, "").Replace(" ", "");

    return compareA == compareB;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T13:58:30.420

```
myString = myString.Replace("", "Initial directory structure.\r\n    \r\n    The directory tree has been changed"); 
```

现在只需检查它们是否相等。

```
String.Compare(myString, "Initial directory structure.The directory tree has been changed") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-06T10:26:05.510

另一种变体，灵活（添加任何跳过字符），无需修改原始字符串或创建新字符串。

```
string str = "Hel lo world!";
string rts = "Hello\n   world!";
char[] skips = { ' ', '\n' };

if (CompareExcept(str, rts, skips))
    Console.WriteLine("The strings are equal.");
else
    Console.WriteLine("The strings are not equal.");

static bool CompareExcept(string str, string rts, char[] skips)
{
    if (str == null && rts == null) return true;
    if (str == null || rts == null) return false;

    var strReader = new StringReader(str);
    var rtsReader = new StringReader(rts);
    char nonchar = char.MaxValue;

    Predicate<char> skiper = delegate (char chr)
    {
        foreach (var skp in skips)
        {
            if (skp == chr) return true;
        }
        return false;
    };

    while (true)
    {
        char a = strReader.GetCharExcept(skiper);
        char b = rtsReader.GetCharExcept(skiper);

        if (a == b)
        {
            if (a == nonchar) return true;
            else continue;
        }
        else return false;
    }
}

class StringReader : System.IO.StringReader
{
    public StringReader(string str) : base(str) { }

    public char GetCharExcept(Predicate<char> compare)
    {
        char ch;

        while (compare(ch = (char)Read())) { }

        return ch;
    }
} 
```

# php - OO php 直接访问类方法？

> ID：11689251
> 
> 赞同：-1
> 
> 时间：2012-07-27T13:54:46.163
> 
> 标签：php, typo3

我以为我可以直接调用一个方法，`classname::method`但它没有用。这怎么可能？我用 xdebug 跟踪了函数调用，但它给了我一个错误。当方法需要一些类变量时会不会有问题？

这有效：

```
 $a = new export_csv();
    $a->dl_csv(); 
```

这不：`export_csv::dl_csv();`

我在我的方法中添加了公共静态无济于事。我在日志文件中没有得到任何东西，并且 xdebug 停止工作而没有错误消息？这是正常的吗？我的课程包括一些课程并连接到我的数据库并提取和回显一些行？

```
 require_once(PATH_t3lib.'class.t3lib_db.php');
 require_once(PATH_t3lib.'class.t3lib_div.php');
 require_once(PATH_t3lib.'utility/class.t3lib_utility_math.php');

 class export_csv 
 {
     var $filename = 'meinname.csv';

     public static function dl_csv()
     {
        // bitte nicht ändern muß zur laufzeit geladen werden
        include(PATH_typo3conf.'localconf.php');

        $GLOBALS['TYPO3_DB'] = t3lib_div::makeInstance('t3lib_DB');
        $GLOBALS['TYPO3_DB']->connectDB($typo_db_host, $typo_db_username,   
            $typo_db_password, $typo_db);

        session_start();
            $targetCat = mysql_real_escape_string($_SESSION['targetCat']);

            // calculate the number of rows for the query. We need this for paging the 
            result
            $res = $GLOBALS['TYPO3_DB']->exec_SELECTquery(  'V.title VT, V.uid VU,  
            S.title ST, S.uid SU, S1.uid S1U, S1.title S1T',
                                                    'tx_category V
                                                    INNER JOIN tx_category S ON  

                                                    V.parent_category=S.uid
                                                    INNER JOIN tx_category S1 ON 
                                                    S.parent_category=S1.uid',
                                                    'V.uid='.$targetCat.' OR S.uid='.
                                                     $targetCat.' OR S1.uid='.
                                                     $targetCat.
                                                    ' AND V.deleted=0 AND V.hidden=0',
                                                    '',
                                                    '',
                                                    ''
                            );                      
    $arrcount=0;
    while ( $row = $GLOBALS['TYPO3_DB']->sql_fetch_assoc($res) )
    {
        $categories[] = mysql_real_escape_string($row["VU"]);
        ++$arrcount;
    }

    header("Pragma: public");
    header("Expires: 0");
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Cache-Control: public");
    header("Content-Description: File Transfer");
    header("Content-Type:text/comma-separated-values");
    header("Content-Transfer-Encoding: binary");
    header("Content-Disposition: attachment; filename=$this->filename");

    if ( $arrcount )
    {
        $res = $GLOBALS['TYPO3_DB']->exec_SELECTquery('*',
                                                      'tx_download',
                                                      'category IN('.implode(",",
                                                      $categories).")",
                                                      '',
                                                      "",
     ""                                                  
                                                    );
        while ($row = mysql_fetch_assoc($res) )
        {
            $s = array ();
            $s[] = $row['1'];
            $s[] = $row['2'];
            $s[] = $row['3'];
            $s[] = $row['4'];
            $s[] = $row['5'];

            echo '"'. substr ( implode ( '","', $s ),0,strlen ( implode ( '","', $s) ) - 2  ) . "\r\n";

        }       
    }
  }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:56:09.063

定义为 的方法`static`，因此不能使用实例属性/方法（通过`$this`），可以通过以下方式静态调用：

```
ClassName::methodname();

// Static method definition:
public static function methodname() {
  echo "I'm the method, I don't use \$this in any way!";
  // Any attempt to use $this in here would result in error.
} 
```

查看有关[`static`方法和属性的 PHP 文档](http://php.net/manual/en/language.oop5.static.php)

### 看到模式代码后更新：

您的`dl_csv()`函数`$this->filename`在输出标头中访问，这在静态调用中是无效的。

```
// Can't do this!
header("Content-Disposition: attachment; filename=$this->filename"); 
```

相反，您还需要将 定义`$filename`为静态属性并通过以下方式调用`self::`：

```
// Top of the class:
// Instead of the old PHP4 var keyword, define $filename as a public static property
public static $filename = 'meinname.csv';

// Later...
// Inside your method header() call:
header("Content-Disposition: attachment; filename=" . self::$filename); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:57:37.183

它是`Class::method();`，但是我真的很好奇为什么你认为你需要它在整个应用程序中都可以访问（`global`ly）。

您可能对[依赖注入](http://misko.hevery.com/2008/11/11/clean-code-talks-dependency-injection/)感兴趣。

# excel - Excel图表：将Y轴值转换为Y轴类别

> ID：11689255
> 
> 赞同：2
> 
> 时间：2012-07-27T13:55:00.320
> 
> 标签：excel

我有一些法语等级的学生成绩数据（双值，范围从 0 到 20）。目前，在允许将日期作为 X 轴的散点图（用线连接点）上，我的 Y 轴上的成绩是双倍的，而 X 轴上是一系列学期结束日期。

使用以下间隔映射：

```
A = [16;20]
B = [12;16[
C = [8;12[
D = [4;8[
E = [0;4[ 
```

我想将这些字母作为 Y 轴来表示成绩...如何在 Excel/VBA 中进行设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:28:10.143

我不知道你的情况 - 但我认为最简单的方法（从我在网上看到的 - 这个问题之前已经提出过没有合理的解决方案）可能只是制作你的图表，然后放置包含“ A” “B” “C” “D” “E” 在沿 y 轴的适当点。- 我知道有点愚蠢 - 一个假轴 - 但它会完成工作。

否则，您可能会使用更专业的绘图程序。

# .net - 由索引上的页面锁定导致的 sql server compact 死锁

> ID：11689259
> 
> 赞同：3
> 
> 时间：2012-07-27T13:55:28.150
> 
> 标签：.net, nhibernate, sql-server-ce, database-deadlocks, rowlocking

我正在使用 **NHibernate**作为数据访问层和**SQL Server compact**开发 ac# 桌面应用程序。该应用程序使用多个线程来执行数据的选择和更新。

一般来说，它工作正常，但有时会出现**死锁**情况。

> 15:28:16,750 55 WARN：System.Data.SqlServerCe.SqlCeLockTimeoutException (0x80004005)：超时..... [会话 id = 28，线程 id = 14576，进程 id = 12960，表名 = PatientOrder，冲突类型 = x锁定（x 块），资源 = PAG（idx）：1035]

如果两个事务尝试更新相同的行，我可以理解死锁问题。但是在这种情况下，两个事务都在**不同的行**上工作。死锁似乎是由索引 ( )上的**页面锁定引起的。**`Resource = PAG (idx): 1035`

所以我的问题是：***可以做些什么来防止这些死锁？***

我已经研究了以下选项：

*   禁用索引的页面锁定。这对于“完整”SQL 服务器是可能的，但精简版似乎不支持

*   配置休眠以生成`with(rowlock)`sql 语句，这将（希望）防止问题

*   尝试使用`session.lock(...)`以对所有事务执行相同顺序的资源访问。然而，这似乎没有帮助，因为死锁事务无论如何都在不同的行上工作

*   序列化所有数据库事务，以便一次只有一个处于活动状态。这确实有效，但会对性能产生重大影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T21:52:29.177

@Wolfgang 您如何管理您的 ISession？ISession 不是线程安全的，如果您使用单个实例并在线程之间共享，这应该是您的问题。如果您使用的是 IoC，请验证 ISession 的范围，为每个线程更改一个。

# c++ - 标头中的 C++ 交叉指针

> ID：11689263
> 
> 赞同：3
> 
> 时间：2012-07-27T13:55:45.327
> 
> 标签：c++, c

我有两个简单的类，非常简单的一个类似于主表，包含指向类二的指针列表，类二包含一个指向类一的指针。在每个类中都有通过指针调用方法的函数，但我收到 **错误 C2027: use of undefined type**

```
---- class One.h"
#include "Two.h"

class One {
public:
list<Two*> something;
void t(){pointer on Two call methods}
}; 
```

和

```
---------class Two.h 
 class One;
class Two {
public:
One* something;
void t(){pointer on One call methods}
}; 
```

如何解决这个问题呢 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T13:56:45.030

将您的方法定义移动到`.cpp`类型定义中并包含所需的标题。

```
Two.h
class One;
class Two {
public:
    One* something;
    void t();
};

Two.cpp:
void Two::t() {...} 
```

这是必需的，因为编译器无法生成用于调用未定义类型的方法的代码

# ios - NSOutputStream 没有正确写入数据

> ID：11689264
> 
> 赞同：1
> 
> 时间：2012-07-27T13:55:50.253
> 
> 标签：ios, objective-c, cocoa-touch, stream, nsoutputstream

使用 NSStreamEventHasSpace 可用事件，我试图将一个简单的 NSString 写入 NSOutputStream。以下是该活动的内容：

```
uint8_t *readBytes = (uint8_t *)[data mutableBytes];
readBytes += byteIndex; // instance variable to move pointer
int data_len = [data length];
unsigned int len = ((data_len - byteIndex >= 12) ?
                            12 : (data_len-byteIndex));
uint8_t buf[len];
(void)memcpy(buf, readBytes, len);
len = [output write:(const uint8_t *)buf maxLength:len];
NSLog(@"wrote: %s", buf);
byteIndex += len; 
```

我几乎是从苹果那里得到的。数据在我的 viewDidLoad 方法中初始化

```
data = [NSMutableData dataWithData:[@"test message" dataUsingEncoding:NSUTF8StringEncoding]];
[data retain]; 
```

HasSpaceAvailable 事件被调用两次。在第一个中，整个消息都写有字符“N”。附加到它。第二次，NSLog 报告写入了一条空白消息（非空）。然后，发生 EndEncountered 事件。在那种情况下，我有

```
NSLog(@"event: end encountered");
assert([stream isEqual:output]);
NSData *newData = [output propertyForKey: NSStreamDataWrittenToMemoryStreamKey];
if (!newData) {
    NSLog(@"No data written to memory!");
} else {
    NSLog(@"finished writing: %@", newData);
}
[stream close];
[stream removeFromRunLoop:[NSRunLoop currentRunLoop]
                  forMode:NSDefaultRunLoopMode];
[stream release];
output = nil;
break; 
```

我也从苹果那里得到了这个。但是，“没有数据写入内存！” 已记录。任何时候都不会发生错误，而且另一端似乎没有收到任何数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:06:58.433

我似乎通过使用低级核心基础方法而不是高级 NSStream 方法解决了这个问题。我以这篇文章为起点：

[http://oreilly.com/iphone/excerpts/iphone-sdk/network-programming.html](http://oreilly.com/iphone/excerpts/iphone-sdk/network-programming.html)

它涵盖了很长的输入和输出流，并有代码示例。

希望这可以帮助。

# android - 裁剪应用程序在 Android 中的可用性？

> ID：11689269
> 
> 赞同：0
> 
> 时间：2012-07-27T13:56:12.593
> 
> 标签：android, image, android-intent, android-activity, crop

我必须裁剪图像。我正在使用与[此处](https://github.com/lorensiuswlt/AndroidImageCrop/blob/master/src/net/londatiga/android/MainActivity.java)类似的代码。它启动了一个响应此操作的活动：

```
"com.android.camera.action.CROP" 
```

它在我测试过的所有设备上都运行良好——它总是找到 1 个活动并启动它。工作正常。

但我可以依赖它吗？或者将是没有任何裁剪可能性的设备（在这种情况下，我必须在我的应用程序中实现裁剪功能）？

编辑：忘了提：动态裁剪 - 用户将选择区域（使用具有固定尺寸的矩形）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:00:58.860

> 但我可以依赖它吗？

不。

> 或者将是没有任何作物可能性的设备

是的。这已经出现了。这是一个相机应用程序的未记录、不受支持的功能，设备上可能存在也可能不存在，在未来的某些 Android 版本中可能不再导出等。

> 在这种情况下，我必须在我的应用程序中实现裁剪功能

这当然是我会推荐的。请注意，如果您希望与自己的私有实现具有相同的基本功能，则可以考虑在 GitHub 周围的某个地方使用来自 Gallery 应用程序的裁剪活动端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:07:43.883

如果您只想从中心裁剪而不是这里的代码。

这是在 XML 布局中执行此操作的示例：

```
<ImageView  android:id="@+id/title_logo"
            android:src="@drawable/logo"
            android:scaleType="centerCrop" android:padding="4dip"/> 
```

但是，如果您希望以更详细的方式以编程方式进行，请参阅此链接。

[如何在android中裁剪图像？](https://stackoverflow.com/questions/3846338/how-to-crop-an-image-in-android)

谢谢 ：）

# ios - 从标签栏控制器注销到根视图控制器

> ID：11689282
> 
> 赞同：0
> 
> 时间：2012-07-27T13:56:55.710
> 
> 标签：ios, uiviewcontroller, uitabbarcontroller

当应用程序启动时，我在验证它被重定向到标签栏控制器的字段后放置了一个视图控制器（登录）。问题是我必须放置注销按钮，当单击注销按钮时，它应该转到根视图控制器（登录页面）。我尝试从标签栏控制器推送到根视图控制器，它被推送但在继续进行时仍然面临一些标签栏问题。如何从标签栏项目弹出/推送到根视图控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T03:25:46.433

我想在您的 AppDelegate.m 中，您已经创建了一个导航控制器，其中 LoginUIViewController 作为 RootViewController。

你可以这样解决问题：

例如，您的**TabBarController中有一个****FirstTabUIViewController**，您想从 FirstTabUIViewController 返回到您的**LoginUIViewController**（您的 RootViewController）。

 ****1.  在 FirstTabUIViewController.h 和 .m 中创建对 TabBarController 的引用

    @property (strong, nonatomic) IBOutlet UITabBarController *tabBarController;

    @synthesize tabBarController = _tabBarController;

2.  创建方法处理“LogOut”按钮单击.m

    -(IBAction)logoutBtnTapped:(UIBarButtonItem *)sender{

    [self.tabBarController.navigationController popToRootViewControllerAnimated:YES];

    }

这是！希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:18:23.227

也许您可以将 UINavigationController 用于根视图控制器[http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

有一些关于自定义后退按钮的示例。如果你想使用默认的后退按钮，你可以重命名为注销并对其进行操作。

只是一个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-21T03:28:57.663

当您单击注销按钮时，您只需要再次将登录屏幕放置在 appdelegate 窗口中。

```
LoginViewController *loginVC = [[LoginViewController alloc]init]; 
AppDelegate *appDelegate = [UIApplication sharedApplication].delegate;
[appDelegate.window setRootViewController:loginVC];// This will initiate the login screen again 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-10T06:58:08.847

在同样的情况下，这对我来说很好，

```
ChooseStateViewController *loginVC = [[ChooseStateViewController alloc]initWithNibName:@"ChooseStateViewController" bundle:nil]; 

UINavigationController *nc = [[UINavigationController alloc] initWithRootViewController:loginVC];
[nc.navigationBar setTintColor:[UIColor blackColor]];
AppDelegate *appDelegate = (AppDelegate*)[UIApplication sharedApplication].delegate;
[appDelegate.window setRootViewController:nc]; 
```****

# sql - SQL Server 使用命名空间从行数据中分配 XML 变量

> ID：11689283
> 
> 赞同：0
> 
> 时间：2012-07-27T13:57:05.140
> 
> 标签：sql, sql-server, xml, variables, namespaces

因此，我将整个 XML 文件存储在表的单行/列中。我需要将它分配给一个变量并指定 WITH NAMESPACES。我想不出任何有效的语法。

```
DECLARE @xmlText xml

 set  @xmlText = (select rowdata    
 FROM dbo.Staging with (nolock)    
 WHERE     
  FileId = @FileID AND    
  ClientID = @ClientID) 
```

我会以某种方式设计一个 sql 语句来执行吗？但是，如果我这样做，我不确定如何将其分配回局部变量，因为它将位于另一个 spid 上。我难住了！

* * *

我将使用 xquery :)

这通过了语法检查...

```
;WITH XMLNAMESPACES('http://xxx' AS p) 
(select @xmlText = rowdata    
 FROM dbo.Staging with (nolock)    
 WHERE     
  FileId = @FileID AND    
  ClientID = @ClientID) 

SELECT      
MFRRequestID = Y.i.value('(@id)[1]', 'int'),     
RequestStatus = Y.i.value('Status[1]', 'varchar(10)') ,     
AccountNumber = Y.i.value('p:AccountNumber[1]', 'varchar(10)'),    
ReferralDate = CIF.value('(ReferralDate)[1]', 'datetime'),     
SuspenseBalance = CIF.value('(SuspenseBalance)[1]', 'varchar(25)') 
FROM      @xmltext.nodes('/p:OrderRequest/p:RequestItems/p:MFRRequest') 
AS Y(i) CROSS APPLY     i.nodes('p:CaseInformation') AS Tbl(CIF) 
```

但我得到了错误......

> XQuery [nodes()]：名称“p”不表示名称空间。

这与我昨天问的一个问题有关。我基本上得到了这个确切的东西，但是我没有从表中分配 @xmltext 变量（这是我需要为最终生产代码做的），我复制并粘贴了 xml 并将其分配为硬编码字符串，这样我就可以制定 xquery 语法。很抱歉造成混乱，这对我来说都是新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:06:39.750

这是您需要的第二个查询`WITH XMLNAMESPACES`。

```
DECLARE @xmlText xml;

SELECT @xmlText = rowdata    
FROM dbo.Staging
WHERE     
  FileId = @FileID AND    
  ClientID = @ClientID; 

WITH XMLNAMESPACES('http://xxx' AS p)
SELECT      
MFRRequestID = Y.i.value('(@id)[1]', 'int'),     
RequestStatus = Y.i.value('Status[1]', 'varchar(10)') ,     
AccountNumber = Y.i.value('p:AccountNumber[1]', 'varchar(10)'),    
ReferralDate = CIF.value('(ReferralDate)[1]', 'datetime'),     
SuspenseBalance = CIF.value('(SuspenseBalance)[1]', 'varchar(25)') 
FROM      @xmltext.nodes('/p:OrderRequest/p:RequestItems/p:MFRRequest') 
AS Y(i) CROSS APPLY     i.nodes('p:CaseInformation') AS Tbl(CIF); 
```

# iphone - UIView自定义绘图代码完成后如何执行一些代码？

> ID：11689284
> 
> 赞同：1
> 
> 时间：2012-07-27T13:57:06.660
> 
> 标签：iphone, ios, ipad, xamarin.ios

我是 uiview 的子类，并且我在 Draw 子中实现了一些自定义绘图代码。我想要做的是在执行draw sub中的代码并且uiview自己绘制之后，执行一些其他代码。

我正在考虑在自定义绘图代码的末尾激活一个计时器，以便 uiview 自己绘制，并且我的代码也会在几毫秒后执行。这是实现它的好方法吗？

这是我正在尝试做的图表：

调用 UIView.SetNeedsDisplay() ---> 调用 UIView.Draw ---> 自定义绘图代码执行 ---> UIView 绘制自身并出现在屏幕上 ---> 此处执行一些代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:07:20.980

您可以在 drawInRect 中发布通知（使用`NSNotificationCenter`）并在其他地方注册此通知。通过这种方式，它更加松散耦合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T20:56:09.677

此外，您可以只在视图的 drawRect 方法中运行代码。

# python - 数流统计

> ID：11689287
> 
> 赞同：0
> 
> 时间：2012-07-27T13:57:12.313
> 
> 标签：python, perl, bash

我有一个包含几行的文件，每行包含大约 30,000 个整数。我有兴趣计算每行的各种统计量，例如平均值/媒体/方差/等。

例如，给定一个文件，其内容为

```
1 2 3 4 5
6 8 9 0 10 11 12 
```

我想要一个类似于的输出

```
(std = 1.4142135623730951, mean = 3.0, median = 3.0)
(std = 3.7416573867739413, mean = 8.0, median = 9.0) 
```

除了自己写东西（通过数字获得幸福）之外，我还有什么选择？有没有针对此的单行代码？

一个 bash/python/perl/等。解决方案是首选，因为它很简单。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T14:05:48.033

不是一个 1-liner，但很简单（前提是你已经安装了 numpy）。

```
import numpy as np
with open(filename) as f:
    for line in f:
        a=np.array(line.split(),dtype=int)
        print(a.std(),a.mean(),np.median(a))  #standard-deviation, mean, median 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T04:25:22.837

如果您安装该[`Statistics::Basic`](https://metacpan.org/module/Statistics%3a%3aBasic)模块，它在 Perl 中看起来像这样。大部分命令是格式字符串！

```
perl -MStatistics::Basic=:all -lane 'printf "(std = %.16f, mean = %.1f, median = %.1f)\n",stddev(@F),mean(@F),median(@F)' datafile 
```

**输出**

```
(std = 1.4142135623730951, mean = 3.0, median = 3.0)
(std = 3.7416573867739413, mean = 8.0, median = 9.0) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T14:05:38.343

我认为[这](https://stackoverflow.com/questions/5119034/using-perl-to-find-median-mode-standard-deviation)直接解决了您在 Perl 中的问题。我认为您能否将其归结为单线有点怀疑。

[这是使用PDL](http://pdl.perl.org/)的示例：

```
#!/usr/bin/env perl

use Modern::Perl;
use PDL;

open my $FILE, '<', './numbers.txt';

my @numbers = <$FILE>;

foreach my $number_set ( @numbers ) {
    my $piddle = pdl $number_set;
    my ($mean,$prms,$median,$min,$max,$adev,$rms) = statsover $piddle;
    printf "(std = %f, mean = %3.1f, median = %3.1f)\n", $rms, $mean, $median;
} 
```

Numbers.txt 包含：

```
1 2 3 4 5
6 8 9 0 10 11 12 
```

* * *

**编辑**

作为一个单行 shell 命令，这看起来像

```
perl -MPDL -lne 'printf "(std = %7\$.16f, mean = %1\$.1f, median = %3\$.1f)\n", statsover pdl $_' numbers.txt 
```

# vb.net - Visual Studio 的 VB 智能缩进和格式化文档很疯狂——如何修复或变通？

> ID：11689288
> 
> 赞同：5
> 
> 时间：2012-07-27T13:57:13.190
> 
> 标签：vb.net, visual-studio-2010

我在这里做了一些搜索，我很惊讶没有人问过这个问题。Visual Studio 2010 的 VB 智能缩进对于多行语句是否严重损坏？还是我做/设置不正确？我将其设置为 4 个字符的缩进并带有制表符。在 VB 中键入具有自然返回的多行语句会产生以下结果（更改了属性名称以保护无辜者）。

```
Public Sub Sub1()
    Dim foo As New MyClassA With {.FileName = "test", 
                                  .Format = MyEnumForImageFormat.jpg,
                                            .IsReallySpecial = False,
                                                        .Name = "testN",
                                                                    .SourceId = Guid.NewGuid(),
                                                                    .VariantName = "TestV",
                                                                    .Width = 800,
                                                                    .Height = 600}
End Sub 
```

怎么会有人想以这种方式格式化他们的代码？我想，也许我需要重新格式化（Ctrl+K Ctrl+D）：

```
Public Sub Sub1()
    Dim foo As New ImageBase With {.FileName = "test",
              .Format = MyEnumForImageFormat.jpg,
                 .IsReallySpecial = False,
                    .Name = "testN",
                       .SourceId = Guid.NewGuid(),
                       .VariantName = "TestV",
                       .Width = 800,
                       .Height = 600}
End Sub 
```

为了更好地衡量，我再次尝试重新格式化。瞧，它把它推得更远了。我又推了一下，它又动了一些。最后，经过四次重新格式化，我的代码如下所示：

```
Public Sub Sub1()
    Dim foo As New ImageBase With {.FileName = "test",
     .Format = MyEnumForImageFormat.jpg,
     .IsReallySpecial = False,
     .Name = "testN",
     .SourceId = Guid.NewGuid(),
     .VariantName = "TestV",
     .Width = 800,
     .Height = 600}
End Sub 
```

更好，但我们真的想要只缩进一个空格的连续行吗？为什么我必须重新格式化四次才能得到我想要的？最重要的是，尝试在上面再添加一个属性定义**不会**保持任何对齐 - 默认缩进是通过随机确定数量的空格和制表符将偏移量级联到右侧。

使用旧式延续字符没有帮助。**我怎样才能有任何程度的理智的智能缩进？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T21:41:07.687

您会发现自动缩进会更好或更差，具体取决于您选择分割行的确切位置。在您的示例中，我的风格是将左大括号和第一项带到下一行，之后缩进会表现得更好。

```
Public Sub Sub1()
    Dim foo As New MyClassA With
        {.FileName = "test",
         .Format = MyEnumForImageFormat.jpg,
         .IsReallySpecial = False,
         .Name = "testN",
         .SourceId = Guid.NewGuid(),
         .VariantName = "TestV",
         .Width = 800,
         .Height = 600}
End Sub 
```

不想假设太多，我相信多行语句中每一行的缩进是由前一行控制的。但是，通过这种样式选择，您会发现使用自然返回来添加项目以正确定位自己。将任何粘贴片段复制到不同缩进级别的目标时，这仍然会导致缩进问题，但由于返回位置本身正确，因此手动重置每一行（重复向下、结束、删除、进入。）

类似的解决方案对多行 lambda 函数很有用，但是这些函数比直接的多行语句表现得更好。正确定位开头调用会自动更正整个例程的缩进。

这不太好，缩进浮动：

```
Public Sub Sub1()
    Dim a As New Action(Sub()
                            Dim b As Double = 4.0
                            Dim c As Double = 5.0
                            Dim d As Double = b * c
                        End Sub)
End Sub 
```

这与压头表现得很好：

```
Public Sub Sub1()
    Dim a As New Action(
        Sub()
            Dim b As Double = 4.0
            Dim c As Double = 5.0
            Dim d As Double = b * c
        End Sub)
End Sub 
```

就像个人风格我更喜欢这些，其他人可能会以不同的外观得到相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:14:47.990

我也觉得这很烦人。可以关闭 Vb.Net 的漂亮列表 - 看看这个问题：[在 Visual Studio 中关闭自动格式化](https://stackoverflow.com/questions/737222/turn-off-auto-formatting-in-visual-studio)

在我看来，它走得太远了，但它应该停止你正在谈论的问题。

编辑：您可能还想使用自动缩进设置；我认为默认设置为“智能”。

# java - Robot.java 中的 KeyPress 和 KeyRelease

> ID：11689291
> 
> 赞同：2
> 
> 时间：2012-07-27T13:57:30.997
> 
> 标签：java, keyevent, awtrobot

在按钮操作中，我尝试添加按键。

```
try{
    Robot robot=new Robot();

    robot.keyPress(KeyEvent.VK_A);
    robot.keyRelease(KeyEvent.VK_A);

    robot.mousePress(KeyEvent.BUTTON1_MASK);
    robot.mouseRelease(KeyEvent.BUTTON1_MASK);
}catch(Exception e){} 
```

现在我想要“A-Key”保持，在这种情况下，我注释掉了第三行
robots.keyRelease(KeyEvent.VK_A);
但是按键不需要keyRelease。所以我没有得到“A-Key”保持。在另一种情况下，按下 mousePress 直到 mouseRelease 不执行。谁能给我解决方案或解释发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:10:49.120

看到一个类似的问题，其答案用于`Thread.sleep()`保持按下键：[模拟在 Java 中按住的键](https://stackoverflow.com/questions/784414/simulate-a-key-held-down-in-java)和这个问题：[如何让机器人按住鼠标按钮一段时间？](https://stackoverflow.com/questions/6401467/how-can-i-make-robot-press-and-hold-a-mouse-button-for-a-certain-period-of-time)

# java - java中的同步（this）更安全吗？

> ID：11689293
> 
> 赞同：0
> 
> 时间：2012-07-27T13:57:35.353
> 
> 标签：java, synchronized

我的一本教科书提到 synchronized() 的论点必须是这样的……我知道这是错误的。但我听说由于 synchronized(this) 更安全，因此应该始终使用它。真的吗 ？谢谢：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T14:01:36.330

不，它不必总是这样。在静态方法的情况下也根本不可能，因为没有 this。

此外，有时认为与此同步是错误的，因为此时锁定对象在外部可见。

```
public class Example {
    private final Object lock = new Object();

    // does not compile, there is no 'this' in static context.
    public static void staticMethod() {
        synchronized (this) {
        }
    }

    public void method() {
        int x = 3;
        //there is risk that someone else outside our code
        //uses same lock
        synchronized (this) {

        }
        //this lock is private
        synchronized (lock) {
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:04:06.450

> 我的一本教科书提到 synchronized() 的论点必须是这样的……我知道这是错误的。

这是不正确的。要么教科书不正确，要么你误解了它。Java 语言允许您在*任何*（非空）对象引用上进行同步。

> 但我听说由于 synchronized(this) 更安全，因此应该始终使用它。真的吗？

不，这也不是真的。它并不安全，您当然不应该总是锁定`this`.

事实上，如果您正在编写一个需要锁定“自身”的通用库类，通常最好声明一个私有锁定字段；例如

```
 private final Object myLock = new Object(); 
```

...并锁定*该*对象而不是`this`. 这消除了可能发生的问题，即某些外部代码出于某种原因决定锁定库对象，从而导致不必要的争用，以及库类方法和外部代码之间可能出现的死锁。

* * *

我怀疑教科书试图提出的观点是，所有使用原始锁在数据结构上提供互斥和同步的方法都必须使用*正确*的对象作为锁。这不一定是数据结构对象本身，但它确实需要表示该对象......在某种意义上。（如果您不锁定表示数据结构的对象，则可能有一个线程在使用/更新数据结构时不排除其他线程。）

* * *

这是私有锁旨在避免的问题的草图。

```
/** This class implements thread-safe getting / setting by synchronizing on 'this' */
public class IntHolder {
    private int value;
    public int getValue() {
        synchronized(this) { return value; }
    }
    public void setValue(int value)
        synchronized(this) { this.value = value; }
}

/* Somewhere else, some other code (the "external code") used a holder instance
   as the lock for some larger-scale synchronization. */
IntHolder h = ...
synchronized (h) {
    /* Do something that takes a long time ... */
} 
```

问题是，当外部代码保持锁定时`h`，其他线程将无法读取或更改持有者的值。如果这是有意的……那很​​好。但是，如果该`IntHolder`类型的线程安全旨在“只是一个实现细节”，那么您现在可能会遇到意外的失败情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:02:34.390

如果您不确定 synchronized(this) 在该特定位置是否是一个好主意，IMO 最好在字段和方法上使用“volatile”和“synchronized”。

简而言之， volatile 将一个内在互斥锁放在一个变量上；synchronized 在函数调用上放置一个内在互斥锁；同步块在由参数锁定的那段代码周围放置一个内在互斥锁。

通常你会锁定一个对象，但有时你想锁定实例本身......不过，如果你只需要访问其中一个成员，我建议谨慎锁定整个类实例/fields（一开始你可以使用 synchronized 和 volatile 解决的问题）

您可能想要（或不想）锁定它的真正原因是锁定的范围，如果您锁定它，您可以看到锁。如果你初始化一个私有对象，锁就会被隐藏起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T14:02:49.970

synchronized 的参数只是将要放置在哪个对象上。这取决于您要在同步块中执行的操作，这将确定参数应该是什么。使用`this`会保留当前对象。

作为个人轶事，在我目前正在进行的项目中，我所有的同步保持都在 COM 端口上，因此发送和接收数据包之间没有冲突

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T14:02:55.693

您使用哪种锁并不重要。每个 java.lang.Object 都可以充当锁。您必须确保在相同可变状态下工作的所有操作都使用相同的锁。

所以`synchronized(this)`完全一样安全

`private final Object lock = new Object();` `synchronized(lock)`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T14:05:41.400

如果您将非静态方法声明为`synchronized`：

```
public synchronized void doSomething()
{
    ...
} 
```

然后就同步了`this`。因此，如果您的目标是让`synchronized`块*与上述同步的非静态方法同步*，那么您确实需要使用`synchronized(this)`.

但你是对的：你也可以写`synchronized(someOtherObject)`，只要你知道这将锁定同步方法 of`someOtherObject`而不是 of `this`。

（顺便说一下，对于*静态*方法，在表示包含类的实例`synchronized`上同步。）`Class`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-27T14:06:31.683

**不**，这不是你应该使用`this`的。即使你对任何其他不是实例的对象应用锁`this`。

```
 synchronized(obj1){
 -------
 }

 synchronized(obj2){
 -------
 } 
```

在单个方法中，您可以编写类似上面的内容，首先获取某个对象的锁`obj1`，然后执行工作并释放，然后获取 obj2 上的锁。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-27T14:13:07.467

啊，臭名昭著的[避免 Java 中的同步（this）？](https://stackoverflow.com/questions/442564/avoid-synchronizedthis-in-java).

其实没有区别

```
public synchronized void doThis() {

} 
```

和

```
public void doThis() {
    synchronized (this) {

    }
} 
```

除了[字节码级别](https://stackoverflow.com/questions/4394976/what-is-the-difference-between-synchronizedthis-and-synchronized-method)。两者都解决线程安全问题。它们都会带来问题，因为如果（例如，您在其同步块中设置同一类的锁）可能会引入死锁。

如果您担心死锁，那么`lock`应该使用专用的，如下所示：

```
public class MyClass {
    private final Object lock = new Object();   //Must be final

    public void doThis() {
        synchronized (lock) {

        }
    }
} 
```

或者，使用 Java`java.util.concurrent.Lock`接口和`java.util.concurrent.locks.ReentrantLock`实现来做基本上锁..

# hibernate - 休眠（HQL）中的内部连接问题

> ID：11689301
> 
> 赞同：0
> 
> 时间：2012-07-27T13:58:03.250
> 
> 标签：hibernate, struts, hql

我正在使用 Struts+Spring+Hibernate，我无法让我的 HQL 正确执行。

我有四个对象，objectA、objectB、objectC 和 objectD。对象 A 与对象 B 具有一对多关系，并且它们是相关的，因为 ObjectB 具有 FK ObjectA.Id。这种模式在对象中继续存在，即对象 B 与对象 C 等具有一对多的关系。

我现在一直在做的是调用“FROM ObjectXVO WHERE objectXId =？” 获取对象列表。我的应用程序变得越来越复杂，所以我需要做一些更复杂的 HQL。

基本上我需要的是，给定 ObjectBVO.objectBId 我需要返回具有给定 ObjectB 的 ObjectA 的某些列，作为给定 ObjectB 一部分的 ObjectC 的某些列，以及作为 ObjectC 一部分的 ObjectD 的所有列它们是给定 ObjectB 的一部分。

这是我在 Microsoft SQL Server 中使用的 SQL 语句。它正在工作，希望能展示我的模型。

```
SELECT ObjectB.ObjectBID, ObjectB.ObjectBName, ObjectC.ObjectCDescription, 
ObjectD.*, ObjectA.ObjectAID
FROM ObjectB, ObjectC, ObjectD, ObjectA
WHERE ObjectB.ObjectBID = 2 
AND ObjectA.ObjectAID = ObjectB.ObjectAID
AND ObjectB.ObjectBID = ObjectC.ObjectBID
AND ObjectD.ObjectCID = ObjectC.ObjectCID 
```

这是我试图用来返回 List< ObjectDVO > 的 DAOimpl 对象中的代码

```
List<ObjectDVO> objectDs;
try{
String hql = "SELECT ObjectBVO.objectBId, ObjectBVO.objectBName,
    ObjectCVO.objectCDescription, ObjectCVO.objectCId,"
+" ObjectAVO.objectAId, ObjectAVO.objectAName, ObjectDVO"
    +" FROM ObjectBVO, ObjectAVO, ObjectCVO, ObjectDVO"
    +" WHERE ObjectBVO.objectBId = ?"
+" AND ObjectAVO.objectAId = ObjectBVO.objectAId"
+" AND ObjectBVO.objectBId = ObjectCVO.objectBId"
+" AND ObjectDVO.objectCId = ObjectCVO.objectCId";
objectDs = getHibernateTemplate().find(hql, objectBID);
} 
```

这只是抛出一个错误，说 null。我查看了 HQL 文档和一些教程，但还不清楚如何执行更多多个 VO 对象。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:30:28.503

您必须为您的实体分配别名，并返回/使用这些别名。

此外，根据您的描述，您的实体之间应该有 OneToMany/ManyToOne 关联，但您没有任何此类关联。您所拥有的只是指向其他实体的 ID。

像这样返回多个字段的查询不会返回 ObjectDVO 的实例。它将返回 a `List<Object[]>`，其中每个`Object[]`都包含查询返回的值之一：索引 0 处的 objectBId、索引 1 处的 objectBName 等。

最后，VO 并不是一个实体。您的实体不应命名为 VO。这基本上就像`Fruit`在 Animals 上附加一个后缀。

无论如何，如果您保持实体如图所示（您不应该这样做，而是引入关联），您的查询应该如下所示：

```
select b.objectBId, b.objectBName, c.objectCDescription, c.objectCId,
       a.objectAId, a.objectAName, d
from ObjectBVO b, ObjectAVO a, ObjectCVO c, ObjectDVO d
where b.objectBId = ?
and a.objectAId = b.objectAId
and b.objectBId = c.objectBId
and d.objectCId = c.objectCId 
```

使用 ManyToOne 关联，您可以简单地做

```
select d from D d
inner join fetch d.c c
inner join fetch c.b b
inner join fetch b.a a 
```

你会得到一个`List<D>`. 在每个 D 实例上，你可以做

```
String nameOfA = d.getC().getB().getA().getName(); 
```

最后一点：属性是类的一部分。所以命名`objectAId`的ID`ObjectA`是多余的。命名它`id`：`objectA.getId()`比`objectA.getObjectAId()`.

# javascript - 使用 jsrender 模板嵌入脚本

> ID：11689304
> 
> 赞同：12
> 
> 时间：2012-07-27T13:58:19.523
> 
> 标签：javascript, jsrender

我想使用我的 jsrender 模板中的一个变量来生成一段 javascript，但我不知道如何`<script type="text/javascript">`在我的`<script id="data-item-tpl" type="text/x-jsrender">`

希望下面的内容相当清楚。下面的代码产生一个`Uncaught SyntaxError`. 如果我从嵌入脚本中删除标签，那么它只是作为文本打印到页面上。

在下面的代码中，我试图生成一个 id 为“chartId”的 div，然后是一个脚本，它将通过 MyChart 对象填充该 div 的内容。

```
<script id="data-item-tpl" type="text/x-jsrender">
    <div class="item">
        <div class="graphs">
            <ul class="thumbnails">
                {{for graphs}}
                <li><div class="thumbnail"><img src="{{html:url}}" width="190" height="120" /><p>{{html:graphTitle}}<br />{{html:value}}</p></div></li>
                {{/for}}
                <!-- Here we insert both the placeholder for, and the javascript to populate charts -->
                <li><div id="{{html:chartId}}" style="width:120;height:190px;"></div></li>
                <script type="text/javascript">
                    var chartObj = new MyChart("{{html:chartId}}");
                    chartObj.render();
                </script>
            </ul>                           
        </div>
        ...
</script> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-27T16:23:38.833

我只是玩了一下，就让它像这样工作：

```
{{:"<scr" + "ipt type=&quot;text/javascript&quot;>"}}
    var chartObj = new MyChart("{{html:chartId}}");
    chartObj.render();
{{:"</scr" + "ipt>"}} 
```

也许不是最优雅的解决方案，但是当我把它`alert`放在那里时，它就被解雇了。

# php - Mod_rewrite 和不同顺序的多个变量

> ID：11689307
> 
> 赞同：0
> 
> 时间：2012-07-27T13:58:27.073
> 
> 标签：php, .htaccess, mod-rewrite, redirect, seo

我是 StackOverflow 的新手，所以我会尽力做到尽可能清楚。我正在重写我的 URL 以对 SEO 更友好，所以我研究了 mod_rewrite 并认为这可能是最好的方法。我正在开发一个电子商务网站（这个细节稍后会很重要）。所以当涉及到简单的页面时`/about_us.php`，很容易重定向。

```
RewriteEngine on 
RewriteBase /

RewriteRule ^about-us/$ /about_us.php 
```

我想我们都同意这一点。当我尝试在过滤器页面上重写 URL 时出现问题。所以在像这样的页面上

```
example.com/examplefile.php?filter1=a&filterb=2&filterc=3 
```

重定向仍然很容易。（注意：我选择在值前写“filter1”）

```
RewriteRule ^/products/filter1-([-a-zA-Z0-9]+)/filter2-([-a-zA-Z0-9]+)/filter3-([-a-zA-Z0-9]+)/$ /examplefile.php?filter1=$1&filterb=$2&filterc=$3 
```

这是我偶然发现的部分：过滤器的顺序可能不同，比如说

```
example.com/examplefile.php?filterb=2&filter1=a&filterc=3 
```

我不可能在 中写下所有的可能性`.htaccess`，因为我有 6 个不同的过滤器，而且你可以使用 1,2,3... 到 6 个过滤器，无论是否有序，它是......很多可能性（我会让你做数学;））。

你有任何关于 mod_rewrite 的解决方案，或者还有其他的解决方案吗？我正在考虑 301 重定向，但我担心的是链接将如何出现在搜索引擎中。我正在着手 SEO，但有些部分对我来说仍然是一个谜（我想这就是 Google 想要的向导！ )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:39:09.333

从 SEO 的角度来看，您不应该有多个具有相同内容的 URL，因此如果它们给出相同的结果，则不应在网站上创建类似`/filter1-42/filter2-42/`和的链接（[规范的 url](http://support.google.com/webmasters/bin/answer.py?hl=hu&answer=139394)链接标签可能有助于链接到您网站的外部资源）。`/filter2-42/filter1-42/`

***编辑：***从模式中删除“过滤器”，使其更通用。

我会将问题分成两半，如下`RewriteRule`：

```
RewriteRule ^/products/((?:[a-zA-Z0-9]+-[-a-zA-Z0-9]+/?)*) /products.php?filterstr=$1 
```

并`filterstr`像这样处理php中的解析：

```
$filters = array();
$filterparts = explode('/', trim(isset($_GET['filterstr']) ? $_GET['filterstr'] : '', '/'));
foreach ($filterparts as $filter) {
    if (preg_match('/(?<key>\w+)-(?<value>[-a-z0-9]+)/i', $filter, $m)) {
        $filters[$m['key']] = $m['value'];
    }
} 
```

这应该使这个网址：

```
http://example.com/products/language-france-and-stuff/filtera-42/filter1-42/filterb-42/
```

输出：

```
array(4) { 'language' => string(6) "france" 'filtera' => string(2) "42" 'filter1' => string(2) "42" 'filterb' => string(2) "42" } 
```

这个想法是，第一个之后的每个 url 段都是一`/<name>-<value>/`对，其中 a`<name>`不能包含`-`and `/`，并且`<value>`不能包含 a`/`

将该模式复制到您需要的每个地方，如果您需要它说 10 个地方，它将创建一个维护地狱，所以在这一点上，我将尝试为整个参数处理引入一些结构并创建一个[前端控制器](http://martinfowler.com/eaaCatalog/frontController.html)，它将解析整个`$_SERVER['REQUEST_URI']`和选择控制器并以某种标准方式将参数传递给它，因此您`RewriteRule`的`.htaccess`.

# c# - 如何使用文本框输入过滤 linq to sql 查询

> ID：11689309
> 
> 赞同：0
> 
> 时间：2012-07-27T13:58:34.633
> 
> 标签：c#, winforms, linq-to-sql, filter

这是我的代码：

```
 private void textBox1_TextChanged(object sender, EventArgs e)
    {
        //**************************************
        int aa = textBox1.Text.Length;

        var qry = (from p in dc.Products
                   where p.ProductName.Substring(aa) == textBox1.Text.Trim()
                   select p).ToList();
        productDataGridView.DataSource = qry;
    } 
```

当我在文本框中输入一个字母时，数据网格变为空

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:08:20.480

```
private void textBox1_TextChanged(object sender, EventArgs e)
    {
        var searchValue = textBox1.Text.Trim();//you can add a ToUpper();
        var qry = (from p in dc.Products
                   where p.ProductName.StartsWith(searchValue);//you can add a ToUpper() to p.ProductName
                   select p).ToList();
        productDataGridView.DataSource = qry;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:13:30.243

从不，我说从不使用 == 比较 2 个字符串总是使用 equals() 或 contains() 如果你正在比较 2 个字符串，你很可能会得到一个错误，即使 2 个字符串看起来完全一样。不同之处在于每个字符串指向不同的对象。基本上每次你创建一个字符串时，它都会创建一个 String 类的新对象。

# com - WIX：将 COM dll 安装到另一个文件夹时 COM 注册失败

> ID：11689313
> 
> 赞同：0
> 
> 时间：2012-07-27T13:58:47.943
> 
> 标签：com, wix, dllregistration

我正在使用热量来收集 COM dll 和 tlb 文件（我们称它们为 MyLib.*，在 VB.NET 中开发）来进行 COM 注册。当我将 MyLib.dll 和 MyLib.tlb 安装到应用程序的安装文件夹（即 INSTALLDIR）中时，一切正常。但是，由于我们想让我们的软件的不同版本可以安装在同一台机器上，并且如果他们使用相同版本的 COM 组件，那么只有一个 dll 副本（我认为我们的每个版本的 SW 应该有自己的tlb，如果我错了，请纠正我）应该安装，我们现在想将 MyLib.dll 安装到另一个文件夹中，特别是 PROGRAM_FILES\Common Files\SHARED_FOLDER_NAME，所以现在如果我们的一个版本的软件被卸载，MyLib.dll 将不会被删除，仍然可以被其他版本使用。

但是问题来了：在我将此dll安装到另一个文件夹后，我的COM注册根本无法工作，并且它一直说在我调用COM函数时找不到指定的文件，这表明注册失败。在 WIX 安装程序项目中，除了 MyLib.dll 的这个文件夹之外，一切都相同。

这是安装后的注册表结构：

首先我有 HKCR\CLSID{MYCLSIDs}，它们中的每一个都代表我的一个 COM 类。在名为“InprocServer32”的子项中，我有 Assembly、Class、CodeBase、RuntimeVersion、threadingModel。CodeBase要么是普通文件夹（不工作）要么是MyApp的安装文件夹（工作），这是我放置dll的不同位置。我认为 {MYCLSIDs} 下会有另一个子键 TypeLib，因为 Access 只看到 TypeLib，我认为应该有一些从 TypeLib 到实际 dll 的链接，但是，在这两种情况下，这个子键都丢失了，但在第二种情况它仍然有效。它有问题吗？

其次我有 HKLM\Software\Classes\CLSID{MYCLSIDs}，这些键的结构当然和上面描述的一样。

第三，HKCR{MYPROGIDs}，这些只是我班级的 ProgID

第四，HKCR\Typelib{LibID}，包含来自tlb文件的信息，这个ID来自COM组件项目的Assembly GUID。

最后是 HKEY_CLASSES_ROOT\Interface{InterfaceID}，有一个名为 ProxyStubClsid32 的子键，其值为 {00020424-0000-0000-C000-000000000046}，一个名为 TypeLib 的子键，其值为我的 LibID。

正如我所提到的，唯一的区别是 CodeBase，它存储了 MyLib.dll 所在的位置。为了验证这一点，我做了两个测试：将 MyLib.dll 安装到共享文件夹后，COM 调用失败。但是，如果我将 SHARED_FOLDER\MyLib.dll 的所有 CodeBase 值替换为 INSTALLDIR\MyLib.dll，并将 MyLib.dll 复制到 INSTALLDIR，它实际上可以工作。反之亦然，在我将 MyLib.dll 安装到 INSTALLDIR 后（在这种情况下 COM 正在工作），我将 CodeBase 值从 INSTALLDIR\MyLib.dll 更改为 SHARED_FOLDER\MyLib.dll，并复制到 SHARED_FOLDER，这次它失败了。所以看来，正是安装位置的问题，和我对COM的理解相反。而且我认为 SHARED_FOLDER 没有权限问题（我可能是错的），因为它位于我的安装程序创建的文件夹中。

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:11:07.713

原来，MyLib.dll 正在使用一些其他的库，这些库仍然安装在 MyApp 安装文件夹中。因此，如果 MyLib.dll 安装在共享文件夹中，它会尝试在相同的库中查找这些库，这当然会失败。当我也将这些库安装在共享文件夹中时，它正在工作。

顺便说一句，我发现 fulogvw.exe 在跟踪程序集加载问题时非常有用。例如，在我的失败日志中，它说无法在 SHARED_FOLDER 中加载文件 xxx.dll，xxx.dll 是 MyLib.dll 正在使用的某个库，我不知道 MyLib.dll 需要它，直到我看到日志。

# php - 包含文件时出现奇怪的错误

> ID：11689315
> 
> 赞同：-1
> 
> 时间：2012-07-27T13:58:53.697
> 
> 标签：php, linux, apache, include, include-path

我正在尝试在 ubuntu 上包含文件，但我遇到了一个奇怪的问题。包含文件位于此路径中 - /var/www/cms-dev/corefiles/classes/config.hp 我要包含的文件是此文件 - /var/www/cms-dev/corefiles/lang.php

出于某种原因，在尝试包含它时，它说该文件不存在 -

```
Warning: require_once(../lang.php) [function.require-once]: failed to open stream: No such file or directory in /var/www/cms-dev/corefiles/classes/config.php on line 9 
```

所以为了寻找解决方案，我使用 scandir 扫描当前目录和上层目录。

对于当前目录，我使用 scandir("./") -

> 数组 ( [0] => . [1] => .. [2] => .htaccess [3] => admin [4] => ckeditor [5] => corefiles [6] => index.php [7 ] => install.php [8] => log.txt)

对于使用 scandir("/") 的当前目录，我得到了这个 -

> 数组 ( [0] => . [1] => .. [2] => bin [3] => boot [4] => cdrom [5] => dev [6] => etc [7] => home [8] => 主机 [9] => initrd.img [10] => initrd.img.old [11] => lib [12] => lib64 [13] => lost+found [14] => media [15] => mnt [16] => opt [17] => proc [18] => root [19] => run [20] => sbin [21] => selinux [22] => srv [ 23] => sys [24] => tmp [25] => usr [26] => var [27] => vmlinuz [28] => vmlinuz.old)

为了使用 scandir("../") 扫描上层目录，我得到了这个 -

> 数组 ( [0] => . [1] => .. [2] => cms-dev [3] => index.html [4] => info.php [5] => test.txt [6] => test.txt~)

但是 config.php 存在于 /var/www/cms-dev/corefiles/classes/config.php 我在这里包含它 - index.php 和这里 urlHandler.php ，但是 config.php 不应该包含相对于他自己的文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:02:01.967

你的答案一清二楚。当您使用 scandir("../") 扫描上层目录时，您会得到：

```
Array ( [0] => . [1] => .. [2] => cms-dev [3] => index.html [4] => info.php [5] => test.txt [6] => test.txt~ ) 
```

*lang.php*不在您认为它所在的目录中，与调用它的文件相关。尝试绝对路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T14:33:16.507

你需要`config.php`in`index.php`和`urlHandler.php`吗？如果是这样，请记住“嵌套 require_once() 的路径总是相对于被调用/包含 require_once() 的第一个文件进行评估”。

换句话说，不，`config.php`不应该包含相对于自身的文件，而是相对于`index.php`（因此`urlHandler.php`，如果它们位于同一目录中）。

有关详细信息，请参阅[http://www.php.net/manual/en/function.require-once.php](http://www.php.net/manual/en/function.require-once.php)。

# java - 如何在不同的线程中运行监听器或在不同的线程中进行计算

> ID：11689316
> 
> 赞同：3
> 
> 时间：2012-07-27T13:58:53.260
> 
> 标签：java, multithreading, guava

我正在尝试使用 Google Guava 构建缓存，并希望对过期对象进行一些计算。如果某个对象被删除，removingListener 会通知我。

如何在与主应用程序不同的线程中运行removingListener，或将过期对象（在下面的简单示例中，即整数3）传递给处理计算的不同线程？

编辑：由于计算相当短，但经常发生，我宁愿不每次都创建一个新线程（将是数千个线程），而是让一个（或可能两个）计算所有对象。

简单的例子：

```
Cache<String, Integer> cache = CacheBuilder.newBuilder().maximumSize(100)
        .expireAfterAccess(100, TimeUnit.NANOSECONDS)
        .removalListener(new RemovalListener<String, Integer>() {
            public void onRemoval(final RemovalNotification notification) {
                if (notification.getCause() == RemovalCause.EXPIRED) {
                    System.out.println("removed " + notification.getValue());
                    // do calculation=> this should be in another thread
                }
            }
        })
        .build();
 cache.put("test1", 3);
 cache.cleanUp(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T14:37:00.893

要在执行程序中运行您的侦听器，请将其包装为[RemovalListeners.asynchronous](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/RemovalListeners.html#asynchronous%28com.google.common.cache.RemovalListener,%20java.util.concurrent.Executor%29)。

.removalListener(**异步**(new RemovalListener() { ... }, executor))

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-27T14:06:04.563

[使用Executors](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html)工厂方法之一创建一个 ExecutorService ，并在每次需要时向该 executor 提交一个新的 Runnable：

```
private ExecutorService executor = Executors.newSingleThreadExecutor();

...

public void onRemoval(final RemovalNotification notification) {
    if (notification.getCause() == RemovalCause.EXPIRED) {
        System.out.println("removed " + notification.getValue());
        submitCalculation(notification.getValue());
    }
}

private void submitCalculation(final Integer value) {
    Runnable task = new Runnable() {
        @Override
        public void run() {
            // call your calculation here
        }
    };
    executor.submit(task);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T14:03:50.280

您可以创建一个新类，并`java.utils.Runnable`像这样实现接口；

```
public class MyWorkerThread implements Runnable {

    public MyWorkerThread(/*params*/) {
        //set your instance variables here
        //then start the thread
        (new Thread(this)).start();
    }

    public void run() {
        //do useful things
    }
} 
```

当您`MyWorkerThread`通过调用构造函数创建一个 new 时，一旦构造函数完成，执行就会返回到调用代码，并启动一个单独的线程来运行`run()`方法内的代码。

如果您可能想创建`MyWorkerThread`对象而不立即启动它们，您可以`Thread.start()`从构造函数中删除代码，然后像这样从实例中手动调用线程；

```
MyWorkerThread t = new MyWorkerThread();
//later
(new Thread(t)).start(); 
```

或者，如果您想保留对该`Thread`对象的引用，以便您可以做一些常规的事情，例如**中断**和**加入**，请这样做；

```
Thread myThread = new Thread(t);
myThread.start();
//some other time
myThread.interrupt(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T14:04:20.227

您可以简单地为过期实体创建中间队列（过期监听器只会将过期对象添加到此队列中） - 比如说某种阻塞的内存队列 - ArrayBlockingQueue，LinkedBlockingDeque。

然后，您可以设置线程池和处理程序（具有可配置的大小），它们将使用 poll()**方法**消耗对象。

对于高性能队列 - 如果需要，我可以建议更高级的非阻塞队列实现。您还可以在此处阅读有关高性能非阻塞队列的更多信息，[将第一个元素原子地添加到 ConcurrentLinkedQueue](https://stackoverflow.com/questions/11654794/add-the-first-element-to-a-concurrentlinkedqueue-atomically/11661586#11661586)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T14:42:21.787

使用执行器服务将您的任务分派到不同的线程。ExecutorService 有一个内部阻塞队列，用于安全发布生产者和消费者线程之间的引用。工厂类[Executors](http://docs.oracle.com/javase/1.6.0/docs/api/java/util/concurrent/Executors.html)可以用来创建不同`ExecutorService`的具有不同的线程管理策略。

```
private ExecutorService cleanupExecutor = Executors.newFixedThreadPool(CLEANUP_THREADPOOL_SIZE); 
...
public void onRemoval(final RemovalNotification notification) {
    if (notification.getCause() == RemovalCause.EXPIRED) {
        System.out.println("removed " + notification.getValue());
        doAsyncCalculation(notification.getValue());
    }
}

private void doAsyncCalculation(final Object obj) {
    cleanupExecutor.submit(new Runnable() {
        public void run() {
            expensiveOperation(obj);
        }
    }
} 
```

在`doAsyncCalculation`您创建要运行的新任务而不是新线程时。执行器服务负责将任务分派到 executorService 的关联线程池中的线程。

# c# - 在 c# 中将整数列表附加到 SQL Server 查询。我怎样才能做到这一点？

> ID：11689317
> 
> 赞同：1
> 
> 时间：2012-07-27T13:58:56.123
> 
> 标签：c#, sql, sql-server, tsql, sqldatareader

这是我的问题的细分版本：

我有一个方法。参数是整数列表。我希望创建一个优化的 SQL 查询，该查询在该行的 id 等于参数列表中的整数之一的所有行上返回一个特定值。很简单，对吧？

我有一种感觉，我让它变得比需要的更困难：

```
private List<string> ReturnValue(List<int> ids)
        {
            List<string> ValuesIWantToReturn = new List<string>();
            StringBuilder sb = new StringBuilder("SELECT ValueIWantToReturnfrom table WHERE ");
            foreach (int id in ids)
            {
                sb.Append( string.Format("ID = {0} OR ", id) );
            }
            sb.Remove(sb.Length - 3, 3); //remove trailing "OR"
                           sb.Append(";");
            SqlDataReader reader =  RunSelectQuery( sb.ToString() );
            while (reader.Read())
            {
                ValuesIWantToReturn.Add(reader.GetString(0));
            }

            return ValuesIWantToReturn;
        } 
```

任何关于我的代码的一般可读性和结构的反馈也将不胜感激。改进总是很好的:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T14:00:36.660

您可以使用`IN`语法而不是`OR`

```
 WHERE id IN (1,2,3,4) 
```

将 ID 列表作为表值参数传递给存储过程，然后将其连接到您的表中可能会更有效，但这可能会过度设计解决方案 - 取决于您的数字列表有多长。

而不是你的循环，你可以`string.Join`用来构建你的列表

```
string query = "SELECT ValueIWantToReturn from table WHERE ID IN ("
    + string.Join(",", ids)
    + ")"; 
```

（假设列表中总是至少有一个数字）

# javascript - JavaScript - 维护对使用 getElementsByTagName 找到的元素的全局引用

> ID：11689322
> 
> 赞同：0
> 
> 时间：2012-07-27T13:59:14.327
> 
> 标签：javascript, global, getelementsbytagname

假设我想找到页面上的最后一个 div 并使用`getElementsByTagName`以下方法：

```
var divs = document.getElementsByTagName('div');
var div = divs[divs-1]; 
```

这一切都很好，除非我想在函数中访问所说的 div：

```
function a() {
 alert(div);
} 
```

这会导致警报显示“未定义”。但是，如果我知道 div 的 ID 并找到它`getElementById`，那么上面的函数会按我的预期工作。

[jsFiddle 来说明我的意思。](http://jsfiddle.net/8T4CM/ "jsFiddle 来说明我的意思。")

谁能告诉我如何在使用时维护对元素的全局引用`getElementsByTagName`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:01:14.133

你错过`.length`了`[]`. 尝试：

```
var div = divs[divs.length-1];
                     //^-----------------total amount of divs 
```

代替：

```
var div = divs[divs-1]; 
```

# hibernate - 具有租户 ID 的多租户数据库：插入时出现休眠外键映射问题

> ID：11689324
> 
> 赞同：1
> 
> 时间：2012-07-27T13:59:24.023
> 
> 标签：hibernate, database-design

我将 Hibernate 用于我的 Web 应用程序，并使用逆向工程来创建我的映射、模型和 DAO 类。

在我的数据库中，所有表都有tenantId 和一个额外的关键字段作为复合PK。我有一些 FK 关系。因此，所有外键关系都映射到两个字段（即复合键）上。

生成的结果映射文件具有以下多对一映射

```
<hibernate-mapping> 
<class name="table1" table="table1" catalog="x"> 
<composite-id name="id" class="tbl1Id"> 
    <key-property name="prop1Id" type="int"> 
        <column name="prop1Id" /> 
    </key-property> 
    <key-property name="tenantId" type="int"> 
        <column name="tenantId" /> 
    </key-property> 
</composite-id> 
<many-to-one name="table2" class="table2" update="false" insert="false" fetch="select"> 
    <column name="propXId" /> 
    <column name="tentantId" not-null="true" /> 
</many-to-one> 
.... 
```

propXId 和 TenantId 是 table2 的主键。

如您所见，update 和 insert 设置为 false，因此当我尝试将数据插入 table1 时，propXId 不会插入 table1。

当我尝试将更新和插入属性更改为“真”时，休眠会引发映射错误，并显示以下消息

```
..Repeated column in mapping for entity: table1 column: TenantId (should be mapped with insert="false" update="false") .. 
```

据我了解，由于 TenantId 已经是 table1 PK 的一部分，因此无法再次添加。但正因为如此，它也没有插入 propXid。在我看来，这是不对的。

TenantId 只是为了处理 Multitancy，但真正的关系在 propXid 上。但是添加tenantId 似乎会导致Insert 出现这个问题。

请让我知道是否有解决此映射的方法。否则我能想到的唯一其他方法是从 PK 中删除 TenantId，这意味着我的所有 prop1Id 和 propXid 在所有租户中都必须是唯一的。这对我来说不是一个好的解决方案。

或者我可以在通过代码检查 FK 之后通过 HQL/SQL 强制插入，这也不是理想的情况。就这里的正确方法寻求您的建议。

# excel - 运行宏后隐藏行“取消隐藏”

> ID：11689327
> 
> 赞同：2
> 
> 时间：2012-07-27T13:59:31.483
> 
> 标签：excel, excel-2003, vba

我有一个工作表，其中第 2 行被隐藏。一个宏粘贴到这一行。每当我运行这个宏时，隐藏的行就会重新出现。

有没有办法防止该行再次出现？

这是我的代码，它仍然没有隐藏第 2 行

子更新2029()

```
Dim LSearchRow As Integer
Dim LCopyToRow As Integer
Dim LSearchValue As String

On Error GoTo Err_Execute
Application.ScreenUpdating = False

LSearchValue = InputBox("Please enter a serial number to search for.", "Enter value")

'Start search in row 5
LSearchRow = 5

'Start copying data to row 2 in "Master" (row counter variable)
LCopyToRow = 2

While Len(Range("A" & CStr(LSearchRow)).Value) > 0

    'If value in column A = LSearchValue, copy entire row to "Master"
    If Range("A" & CStr(LSearchRow)).Value = LSearchValue Then

        'Select row in "Master" to copy
        Rows(CStr(LSearchRow) & ":" & CStr(LSearchRow)).Select
        Selection.Copy

        'Paste row into "Master" in row 2
        Sheets("Master").Select
        Rows(CStr(LCopyToRow) & ":" & CStr(LCopyToRow)).Select
        ActiveSheet.PasteSpecial

    End If

    LSearchRow = LSearchRow + 1

Wend

'Position on cell A3
Application.CutCopyMode = False
Range("A3").Select

MsgBox "All matching data has been copied to 2029."

Exit Sub 
```

Err_Execute: MsgBox "发生错误。" Sheets("Master").Rows("2:2").EntireRowHidden = True ApplicationScreenUpdating = True

```
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:06:23.433

这取决于您在该行中粘贴的方式。

如果你这样做

```
 Sheet1.Rows(2).Copy Sheet2.Rows(5) 
```

如果第 5 行被隐藏，那么它将在粘贴后取消隐藏。这样做的原因是第 5 行继承了第 2 行的属性。

如果您使用特殊粘贴，则不会。看这个例子

```
 Sheet1.Rows(2).Copy
 Sheet2.Rows(5).PasteSpecial xlValues 
```

如果您想做 PasteAll（场景 1），那么您将不得不再次隐藏该行，否则继续执行第二段代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T14:08:55.987

假设您要隐藏的行位于名为“Sheet1”的工作表上，以下代码行将隐藏该行：

```
Sheets("Sheet1").Rows("2:2").EntireRow.Hidden = True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T14:22:23.943

如果没有看到您的代码，我们无法判断是什么让 Row2 显示。但是，如果您想让它在没有实际解决原因的情况下不显示，您可以执行以下操作：

`Application.ScreenUpdating = false`在宏的开头插入。

然后在宏的末尾插入此替换 [SheetName] 作为工作表的实际名称：

```
Sheets("[SheetName]").Rows("2:2").EntireRow.Hidden = True
Application.ScreenUpdating = true 
```

这样，该行将在更新屏幕之前再次隐藏，就像从未发生过一样。

# .net - Visual Basic 2008 中的 SQL 注入

> ID：11689328
> 
> 赞同：0
> 
> 时间：2012-07-27T13:59:44.890
> 
> 标签：.net, sql-injection

好吧，我正在阅读有关 SQL 注入的信息，但我没有意识到它可能发生在 Visual Basic .NET 中-我正在使用 2008-因为我刚刚在 PHP 中阅读过它，我的问题是：我怎样才能避免这种情况？因为一个朋友在几分钟前做了它，那是我的桌面应用程序安全性的问题。

-谢谢-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:03:14.833

这适用于所有语言：

1.  当您可以使用准备好的语句访问数据库时。通过将用户输入连接到查询中来避免构建数据库查询。
2.  认真验证您打算在数据库语句中使用的任何数据。如果字段应该是整数，请在数据库中使用它之前检查它是否为整数。
3.  如果存在某种形式的 ORM，它可能会为您执行 #1 和 #2（至少在某种程度上在 #2 上）。LINQ 应该为您解决这个问题。如果您选择使用 Linq，请使用 SqlParameter 来构建查询。
4.  如果可能，请使用存储过程。
5.  小心用户输入，即使它已被存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:04:05.270

**SQL 注入攻击不是特定于语言的。**如果您接受用户输入并将其直接插入到您的 SQL 查询中而不对其进行清理，那么您的应用程序很容易受到 SQL 注入的攻击。

查看[此答案](https://stackoverflow.com/a/305076/1405830)，了解有关如何避免 SQL 注入攻击的更多详细信息。

您应该摆脱的一般想法是**永远不要相信用户输入**。

# ruby-on-rails - 使用 eclipse 搜索 ssh

> ID：11689329
> 
> 赞同：0
> 
> 时间：2012-07-27T13:59:45.070
> 
> 标签：ruby-on-rails, eclipse, ssh

我有一个托管在 vm 上的 rails 应用程序的工作环境。我在 ubuntu 上使用 Eclipse + Remote System Explorer 来编辑文件。

问题是我无法使用远程搜索选项（搜索按钮似乎是灰色的）。它非常有用，我需要它来提高生产力......

我现在做的是： - 在 fstab 上添加 ssh 路由 - 使用本地搜索选项搜索文件

这种方法对我不好，因为我正在使用虚拟机，所以我需要重新做一遍，它只适用于一个特定的网络......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:40:11.557

我通过使用 kvm 而不是 virtualbox 解决了 VM 问题

# c# - Asp.Net MVC @helper 模板位于与 App_Code 不同的文件夹中

> ID：11689333
> 
> 赞同：2
> 
> 时间：2012-07-27T13:59:56.090
> 
> 标签：c#, asp.net-mvc-3, templates, html-helper

就像我在问题标题中所说的那样，是否可以将 cshtml 文件的 @helper 模板放在 App_Code 以外的文件夹中，以便我的视图可见？

我[从 ScottGu 发现了一篇非常好的文章，](http://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor.aspx)但我没有找到任何解决我问题的方法。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:36:33.450

你可以，如果你把它们写成扩展方法（静态类的静态方法）。就像是：

```
public static string AMethod(this HtmlHelper html, int arg)
... 
```

允许您将 cshtml 文件中的方法调用为

```
@Html.AMethod(5) 
```

# php - 如何在 jquery 的另一个 ajax 中使用 ajax？

> ID：11689334
> 
> 赞同：0
> 
> 时间：2012-07-27T13:59:57.737
> 
> 标签：php, jquery, ajax

我做了一个jQuery代码，如：

```
$('button').click(function(event) {

}); 
```

在里面; 我将`$.post`数据放入并发送到 php 文件并返回表行。在每一行中，都有一个“添加”按钮。

然后我为这些按钮制作了另一个 jquery 代码，例如：

```
$('.row_button').click(function(event) {

}); 
```

同样，我放置`$.post`并尝试发送有关该行的数据，并希望通过 ajax 请求获取信息。但它没有用。什么也没发生。我看了代码，没有错误。

难道不能在另一个ajax中使用ajax吗？还是有其他方法？谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T14:02:50.267

那是因为那些新注入的元素不知道你已经拥有的点击事件绑定。

**解决方案**：在函数上使用[jquery 。](http://api.jquery.com/on/)

改变

```
$('.row_button').click(function(event) {

}); 
```

至

```
$(document).on("click",".row_button'",function(event) {

}); 
```

**jQuery`on`适用于当前和未来的元素**`ajax`（通过/ 使用 javascript 动态添加新元素新注入的元素）。它在 jQuery 1.7+ 版本中可用。如果您使用的是早期版本的 jQuery，请考虑使用 jquery [`live`](http://api.jquery.com/live/) （从 jQuery 1.7 开始，不推荐使用 .live() 方法）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T14:02:33.830

尝试使用此代码代替第二个代码：

```
$('.row_button').live('click',function(event) {
  ...
}); 
```

[Jquery .live](http://api.jquery.com/live/)为现在和将来匹配当前选择器的所有元素附加一个事件处理程序。

* * *

**编辑**

**.live 现在已弃用**，因此请使用[.on insted](http://api.jquery.com/on/)：

```
$(document).on("click",".row_button'",function(event) {

}); 
```

来自 Jquery 文档：

```
$(selector).live(events, data, handler);                // jQuery 1.3+
$(document).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(document).on(events, selector, data, handler);        // jQuery 1.7+ 
```

# .net - .NET File.WriteAllLines 在文件末尾留下空行

> ID：11689337
> 
> 赞同：14
> 
> 时间：2012-07-27T14:00:16.663
> 
> 标签：.net, arrays, line

当我使用 System.IO.File.WriteAllLines 保存 String[] 数组的内容时，文件末尾总是留有一个空行。例如：

```
System.IO.File.WriteAllLines(Application.dataPath + "/test.txt",["a", "b", "c"]); 
```

生成文件（不带下划线）：

```
a
b
c
_ 
```

已经有这样的话题：[.Net File.WriteAllLines 中的空行，是错误吗？](https://stackoverflow.com/questions/8893361/empty-line-in-net-file-writealllines-is-a-bug)，但作者说“我认为我的数据有问题，这是我的问题，但不是 WritAllLines”，它被关闭为“过于本地化”（？！？）。

这是一个错误？我怎样才能轻松摆脱它（现在我只是在再次读取文件时忽略它）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T14:14:56.960

正如其他人指出的那样，这就是它的工作原理。这是一种无需额外换行符的方法：

```
public static class FileExt
{
    public static void WriteAllLinesBetter(string path, params string[] lines)
    {
        if (path == null)
            throw new ArgumentNullException("path");
        if (lines == null)
            throw new ArgumentNullException("lines");

        using (var stream = File.OpenWrite(path))
        using (StreamWriter writer = new StreamWriter(stream))
        {
            if (lines.Length > 0)
            {
                for (int i = 0; i < lines.Length - 1; i++)
                {
                    writer.WriteLine(lines[i]);
                }
                writer.Write(lines[lines.Length - 1]);
            }
        }
    }
} 
```

用法：

```
FileExt.WriteAllLinesBetter("test.txt", "a", "b", "c"); 
```

写道：

```
一个enter
_enter
C

```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-27T14:08:58.653

该`WriteAllLines`方法将写出数组中的每一行，然后是换行符。这意味着您将始终在文件中获得此“空行”。

您链接的帖子中的要点是，在运行时`ReadAllLines`认为一行是由换行符终止的字符。因此，当您对刚刚编写的文件使用 read 方法时，您应该得到完全相同的行。

如果您以不同的方式读取文件，那么您将不得不自己处理换行符。

本质上，您所看到的是预期行为。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-09-25T07:12:14.170

您还可以使用 WriteAllText 保存文件并手动加入行数组，例如：

```
File.WriteAllText(file, String.Join("\r\n",correctedLines)); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-03T22:46:09.187

@Virtlink 解决方案*几乎*是完美的。事实上，有一种情况会在文件末尾出现垃圾 - 当文件存在并且其内容大于新内容时。在写入新文件内容之前，只需将文件长度重置为零。

```
 public static void WriteAllLinesBetter(string path, params string[] lines)
    {
        if (path == null)
            throw new ArgumentNullException("path");
        if (lines == null)
            throw new ArgumentNullException("lines");

        using (var stream = File.OpenWrite(path))
        {
            stream.SetLength(0);
            using (var writer = new StreamWriter(stream))
            {
                if (lines.Length > 0)
                {
                    for (var i = 0; i < lines.Length - 1; i++)
                    {
                        writer.WriteLine(lines[i]);
                    }
                    writer.Write(lines[lines.Length - 1]);
                }
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-27T14:08:42.493

WriteAllLines 写入数组中的每个条目并附加一个换行符。
如您所见，每个字符串都在其自己的行上，这意味着您的最后一个条目以换行符终止，并且您在文件中看到多行。您可以通过文件的十六进制转储来证明这一点

查看 WriteAllLines 的源代码可以证实这一点。
在内部，它使用[TextWriter.WriteLine(string)](http://msdn.microsoft.com/en-us/library/7ack4zyt.aspx)方法。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-08-13T18:16:19.850

有一个更简单的解决方法：

```
// 1\. Convert the items on the array to single string with the separator "\n" between the items
string AllItemsInOneString= string.Join("\n", StringArrayToSave);

// 2\. Save with WriteAllText instead
File.WriteAllText(FilePath, AllItemsInOneString); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-20T03:59:26.210

我做了同样的事情，只是添加了一行：3，希望对某人有所帮助

```
 for(int i = 0; i < Length; i++)
    {
        line = getLocation(i).X.ToString("0.0", nfi) + ',' + getLocation(i).Y.ToString("0.000", nfi) + ',' + getColorRaw(i).R.ToString("0.000", nfi) + ',' + getColorRaw(i).G.ToString("0.000", nfi) + ',' + getColorRaw(i).B.ToString("0.000", nfi);
        writer.Write(line);
        if( i < Length - 1) writer.Write("\n"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-13T22:53:32.733

为了摆脱尾随的换行符，最好的解决方案是，当您阅读它时`.ReadAllLines()`，实际上消除了字符串数组中的最后一个元素。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-13T10:08:12.020

我最简单的方法是在最后一行使用 AppendAllText：

```
if ($i -ne $lines.Count - 1){
     $newLines += $lines[$i]
    } else {
     $lastLine = $lines[$i]
}

[IO.File]::WriteAllLines($file.FullName, $newLines);
[IO.File]::AppendAllText($file.FullName, $lastLine); 
```

# django - 对多个视图使用相同的 Django 模板

> ID：11689339
> 
> 赞同：0
> 
> 时间：2012-07-27T14:00:27.863
> 
> 标签：django, django-templates, django-views

想象一下，您有一个模板，其中**有一个按钮**，单击它，您将被**重定向**到另一个模板以选择一个项目，然后**返回到上一个模板**。像这样的方案：

```
(Template 1)
|
|
|
*------------------ > (Template 2, with some items)
                      |
                      |
                      |
                (Select an Item)
                      |
                      |
<---------------------*
|
|    
(Template 1 , again) 
```

但是当我重定向到我以前的模板时，我似乎丢失了我之前填写的所有项目。我只需要**覆盖**原始模板中的一部分而不是全部。

不用说，我有**两个视图函数**：一个创建 Template-1，另一个用于将所选项目传递给原始模板！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:19:17.973

您不能被定向到另一个模板，您只能被定向到另一个视图。（模板与整个请求/响应周期几乎无关；它只是 Django 产生响应的方式之一，但不是它的必要部分，甚至可以在它之外使用，例如发送电子邮件.)

在视图之间保留状态的方法是使用[会话](https://docs.djangoproject.com/en/1.4/topics/http/sessions/)。

# mongoose - Mongoose 嵌入式文档需求检查/验证不会冒泡

> ID：11689344
> 
> 赞同：0
> 
> 时间：2012-07-27T14:00:36.553
> 
> 标签：mongoose

我有一个简单的用例，我想在嵌入文档缺少必填字段的情况下取消保存。

这是一个带有一些伪代码的简单示例：

```
var Post = new Schema({
    title: { type: String, required: true },
    tags: [Tag]
})

var Tag = new Schema({
    title: { type: String, required: true }
}); 
```

当我保存没有标题的帖子时，我确实收到了错误。当我保存带有标题和标签的帖子，但标签没有标题时，我没有收到任何错误，我认为我应该根据 Mongoose 文档： http: [//mongoosejs.com/docs/embedded-documents。 html](http://mongoosejs.com/docs/embedded-documents.html)

以下模型不会产生任何错误：

```
{"title": "new post", "tags": [ {"author":"me"} ] 
```

我希望它确实如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:41:05.917

我认为`Tag`架构必须在`Post`架构之前定义。

想法来自：[https ://github.com/LearnBoost/mongoose/issues/722](https://github.com/LearnBoost/mongoose/issues/722)

我们还可以在这里看到`Comments`模式在模式之前声明：http `BlogPost`: [//mongoosejs.com/docs/embedded-documents.html](http://mongoosejs.com/docs/embedded-documents.html)

# html - 在移动网络上禁用捏缩放

> ID：11689353
> 
> 赞同：85
> 
> 时间：2012-07-27T14:01:05.680
> 
> 标签：html, css, mobile-website, viewport

我想在移动设备上禁用捏合和缩放。

我应该向视口添加什么配置？

链接： http: [//play.mink7.com/n/dawn/](http://play.mink7.com/n/dawn/)

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2012-07-27T14:06:10.187

**编辑：**因为这不断得到评论，我们都知道我们不应该这样做。问题是我该**怎么**做，而不是我**应该**这样做。

将此添加到您的移动设备中。然后用百分比来做你的宽度，你会没事的：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

为不能使用视口的设备添加这个：

```
<meta name="HandheldFriendly" content="true" /> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-09-06T10:23:56.413

这将阻止用户在 ios Safari 中进行任何缩放操作，并阻止“缩放到标签”功能：

```
document.addEventListener('gesturestart', function(e) {
    e.preventDefault();
    // special hack to prevent zoom-to-tabs gesture in safari
    document.body.style.zoom = 0.99;
});

document.addEventListener('gesturechange', function(e) {
    e.preventDefault();
    // special hack to prevent zoom-to-tabs gesture in safari
    document.body.style.zoom = 0.99;
});

document.addEventListener('gestureend', function(e) {
    e.preventDefault();
    // special hack to prevent zoom-to-tabs gesture in safari
    document.body.style.zoom = 0.99;
}); 
```

jsfiddle：[https ://jsfiddle.net/vo0aqj4y/11/](https://jsfiddle.net/vo0aqj4y/11/)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-01-29T03:29:37.357

这就是我所需要的：

```
<meta name="viewport" content="user-scalable=no"/> 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-10-22T08:07:04.060

对于所有说这是一个坏主意的人，我想说这并不总是一个坏主意。有时不得不缩小才能看到所有内容非常无聊。例如，当您在 iOS 上输入输入时，它会缩放以使其位于屏幕中央。之后您必须缩小，因为关闭键盘不起作用。我也同意，当您花费大量时间制作出色的布局和用户体验时，您不希望它被缩放弄乱。

但另一个论点对于有视力问题的人也很有价值。但是，在我看来，如果您的眼睛有问题，您已经在使用系统的缩放功能，因此无需打扰内容。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-12-18T10:46:49.450

不幸的是，所提供的解决方案在 Safari 10+ 中不起作用，因为 Apple 决定忽略`user-scalable=no`. 这个线程有更多细节和一些 JS 黑客：[禁用视口缩放 iOS 10+ safari?](https://stackoverflow.com/questions/37808180/disable-viewport-zooming-ios-10-safari)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-08-30T08:12:56.247

[在这里](https://www.html5rocks.com/en/mobile/touch/#disqus_thread)找到你可以使用`user-scalable=no`：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"> 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-04-03T09:35:16.730

我想你可能会追求的是 CSS 属性**touch-action**。你只需要这样的 CSS 规则：

```
html, body {touch-action: none;} 
```

你会看到它有很好的支持 ( [https://caniuse.com/#feat=mdn-css_properties_touch-action_none](https://caniuse.com/#feat=mdn-css_properties_touch-action_none) )，包括 Safari，以及回到 IE10。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-06-18T09:10:08.067

IE有它自己的方式：一个css属性，-ms-content-zooming。在身体上将其设置为 none 或其他东西应该禁用它。

[禁用捏合放大IE10](https://stackoverflow.com/questions/15181601/disable-pinch-to-zoom-in-ie10)

[http://msdn.microsoft.com/en-us/library/ie/hh771891(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh771891(v=vs.85).aspx)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-08T12:48:40.187

尝试使用 min-width 属性。让我给你解释一下。假设屏幕宽度为 400px 的设备（例如）。放大时，字体会变得越来越大。但是 box 和 div 的宽度保持不变。如果你使用最小宽度，你可以避免减少你的 div 和 box。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-09-29T11:26:25.787

不确定这是否有帮助，但我使用角锤模块解决了捏/缩放问题（我想避免用户在我的 webapp 上进行缩放）：

在我的 app.component.html 中，我添加了：

```
<div id="app" (pinchin)="pinchin();"> 
```

在我的 app.component.ts 中：

```
 pinchin() {
      //console.log('pinch in');
  } 
```

# c - 字符类型 int

> ID：11689357
> 
> 赞同：5
> 
> 时间：2012-07-27T14:01:19.937
> 
> 标签：c, character-encoding

字符常量`int`在 C 中具有类型。

现在假设我的机器的本地字符集是 Windows Latin-1 ( [http://www.ascii-code.com/](http://www.ascii-code.com/) )，它是一个 256 个字符集，因此`char`单引号之间的每个，比如`'x'`，都映射到`int`0 到 255 之间的值。 ?

假设 plain`char`在`signed`我的机器上并考虑以下代码：

```
char ch = 'â'

if(ch == 'â')  
{
    printf("ok");
} 
```

由于整数提升`ch`将被提升为类型的负数`int`（因为它有前导零）并且`â`映射到正数`ok`不会被打印。

但我确定我错过了一些东西，你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:11:18.610

实际上，初始分配不会按预期工作：

```
char ch = 'â'; 
```

这里有一个溢出，gcc 会警告它。从技术上讲，这是未定义的行为，尽管对于非常常见的单字节`char`类型，行为是可以预测的——它是一个简单的整数溢出。根据您的默认字符集，这是一个多字节字符；如果我在我的机器上将它打印为整数，我会得到十进制 50082。

此外，比较是无效的，同样`char`是因为太小而无法容纳被比较的值，而且好的编译器会再次警告它。

ISO C 定义`wchar_t`了一个足以容纳扩展（即非 ASCII）字符的类型，以及许多库函数的宽字符版本。必须处理非 ASCII 文本的代码当然应该使用这种宽字符类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:12:22.650

您的 C 实现具有*执行字符集*的概念。此外，如果您的程序源代码是从文件中读取的（一如既往），编译器具有（或应该具有）*源字符集*的概念。例如，在 GCC 中，您可以在命令行上调整这些参数。这两个设置的组合决定了分配给您的文字的整数值 `â`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:34:47.690

`char`在签署的情况下：

处理`char ch = 'â'`时，编译器会将â转换为0xFFFFFFE2，并将0xE2存入ch。没有溢出，因为该值已签名。

在处理`if(ch == 'â')`时，编译器会将 ch (0xE2) 扩展为整数 (0xFFFFFFE2) 并将其与 'â' (0xFFFFFFE2 也是) 进行比较，因此条件为真。

# c - 关于将 CLI Parser 链接到我的应用程序

> ID：11689358
> 
> 赞同：0
> 
> 时间：2012-07-27T14:01:21.467
> 
> 标签：c, command-line-interface

我正在使用开源 CLI 解析器（这个 -> [http://sourceforge.net/projects/cliparser/](http://sourceforge.net/projects/cliparser/)）将命令行界面添加到我的应用程序中，它本身非常整洁，但我无法添加它到我的应用程序。提供的文档非常少，而且我对 makefile 的经验有限。如果有人以前使用过这个解析器，你能帮我解决一下吗？

具体来说，如何使解析器在我的程序中运行？该文件说“将您的解析器与 libparser.a 链接”这是什么意思？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:10:38.720

编译程序时，需要链接库。如果使用 GCC，可以通过两种方式完成：

1.  您可以指定库的路径：

    ```
    gcc myapp.c /somepath/libparser.a 
    ```

2.  或者，如果它在您的标准库目录中，您应该能够：

    ```
    gcc myapp.c -l parser 
    ```

# iphone - 在孩子的 -onExit 方法中停止声音？

> ID：11689361
> 
> 赞同：0
> 
> 时间：2012-07-27T14:01:31.183
> 
> 标签：iphone, objective-c, ipad, audio, cocos2d-iphone

我有三个类，我们称它们为 A、B 和 C。A 类添加了一个 CCLayer 类，称为 B。B 也添加了一个 CCLayer 子类，称为 C。现在，C 播放声音效果，我想在场景时停止A 被替换。我假设如果场景 A 被调用 -replaceScene 替换，它的所有子节点也会被移除和清理。所以我试图将我的一段应该停止声音的代码放入 C 类的 -onExit 方法中。但是 -onExit 永远不会在被替换场景的任何孩子上调用。为什么会这样，我该如何解决？

所有方法（停止声音等）都有效，我只是不知道在哪里调用它们。情况基本上如下：我在我的主场景中，如果我点击“主菜单”按钮，我希望它的孩子停止播放任何声音。孩子们怎么知道他们的父母被释放了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:36:13.603

如果没有为节点调用 onExit，则意味着它没有从场景层次结构中删除。这指向内存泄漏，特别是保留周期。您可以通过在 CCScene 的 dealloc 方法中设置断点来确认这一点。如果在更改场景时它没有被击中，那么你就是在泄漏场景。

# php - 实时更新收件箱消息

> ID：11689364
> 
> 赞同：0
> 
> 时间：2012-07-27T14:01:36.007
> 
> 标签：php, javascript, jquery, ajax

我需要有关实时更新消息的建议，这是我的代码：

```
<script>
    function fetch_messages(){
        var user_id = "1" // example id

        $.ajax({
            url: "do_fetch.php",
            type: "POST",
            data: { user_id : user_id },
            dataType: "json",
            success: function(data) {
                for (var i = 0; i < data.length; i++) {
                    $("#messages_list").append('<div id="'+data.id+'">'+data.message+'</div>');
                }
                setTimeout("fetch_messages()", 3000);
            }
        });
    }
    $(function(){
        fetch_messages();
    });
</script> 
```

并且有 div 消息：

```
<div id="messages">
</div> 
```

php代码：

```
<?php
    include('connection.php')

    $user_id = $_POST['user_id'];
    $my_id = $_SESSION['user_id'];

    $sql = 'SELECT * FROM messages WHERE user_id = '.mysql_real_escape_string($user_id).' AND my_id = '.mysql_real_escape_string($my_id);
    $result = mysql_query($sql, $connection);

    echo json_encode($result);
?> 
```

此代码有效，但我不想阅读所有消息并显示它们，我只需要加载新消息，那么我应该怎么做呢？我是否需要放置一个带有时间戳的隐藏字段并使用 ajax 来检查比这更晚的时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:06:23.847

保存发送的最后一条消息的 id，然后通过 ajax 发送该 id，并查询比该 id 新的所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T14:15:26.650

首先，您在 ul 中仅使用 ajax 加载 20 条消息

```
<ul>
  <li>message 1</li>
  <li>message 2</li>
  <li>message 3</li>
  <li>message 4</li>
  <li>message 5</li>
  <li id="{{message_date}}">message 6</li>
</ul> 
```

然后获取最后一条消息 id 以获取日期。

```
$('li').last().attr('id') 
```

你可以有一个点击按钮来加载更多。

```
var message_date = $('li').last().attr('id');
$.ajax({
    url: "do_fetch.php",
    type: "POST",
    data: { date : message_date },
    dataType: "json",
    success: function(data) {
        for (var i = 0; i < data.length; i++) {
            $("ul").append('<liid="'+ data.date+'">'+data.message+'</li>');
        }
    }
}); 
```

在 php 文件中，您选择日期 > message_date 限制为 30 的消息。

您也可以传递用户 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T14:07:18.293

您需要在表中添加一个“读取”布尔字段。它应该默认为 false，然后每当查看消息时，您应该更新所有查看的消息以进行阅读。

```
SELECT * FROM `messages` WHERE user_id=? AND my_id=? AND `read`=0;
UPDATE `messages` SET `read`=1 WHERE user_id=? AND my_id=?; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T14:13:36.307

例如，您可以使用 next: setInterval(fetch_messages,5000) 。每五秒发送一次请求。比在服务器上保存会话当前时间（第一次）。在第二次请求中，上次从会话获取，而不是获取当前时间并获取当前和上次之间的所有行。

# android - ArrayList 自然排序

> ID：11689368
> 
> 赞同：1
> 
> 时间：2012-07-27T14:01:52.903
> 
> 标签：android, sqlite, collections, sorting, comparable

我有一个使用放入 ArrayList 的 sqlite DB 的应用程序。我试图让条目以字母顺序或我理解的“自然顺序”显示。我已经实现了可比较并添加了我的 collections.sort 语句，但数组列表保持非字母顺序或自然顺序。请指教

```
public class LoginList extends Activity implements OnClickListener, OnItemClickListener {

private ListView loginList;
private Button webLogin;
private ListAdapter loginListAdapter;
private ArrayList<LoginDetails> loginArrayList;

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login_listview);

    loginList = (ListView)
    findViewById(R.id.loginlist);
    loginList.setOnItemClickListener(this);

    webLogin = (Button)
    findViewById(R.id.button3);
    webLogin.setOnClickListener(this);

    loginArrayList = new ArrayList<xxxxxxxx>();
    loginListAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
    loginList.setAdapter(LAdapter);
    Collections.sort(AList );

    }

@Override
public void onClick (View v) {
    Intent webLoginIntent = new Intent (this, LoginPlusActivity.class);
    startActivity(webLoginIntent);

}

public List<String> populateList (){

    List<String> webNameList = new ArrayList<String>();

    dataStore openHelperClass = new dataStore (this);

    SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase("xxxxxxxx");

    Cursor cursor = sqliteDatabase.query(dataStore.TABLE_NAME_INFOTABLE, null, null, null, null, null, null);

    startManagingCursor(cursor);

    while (cursor.moveToNext()){

    String sName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_SITE));
    String wUrl = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_ADDRESS));
    String uName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_USERNAME));
    String pWord = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_PASSWORD));

    LoginDetails lpDetails = new LoginDetails();

        lpDetails.setsName(sName);
        lpDetails.setwUrl(wUrl);
        lpDetails.setuName(uName);
        lpDetails.setpWord(pWord);

        loginArrayList.add(lpDetails);
        webNameList.add(sName); 
}
sqliteDatabase.close();
return webNameList;
}

@Override
protected void onResume() {
    super.onResume();
loginListAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
loginList.setAdapter(loginListAdapter);
    }

@Override
public void onItemClick(AdapterView<?> arg0 , View arg1, int arg2, long arg3) {
    Toast.makeText(getApplicationContext(), "Selected ID :" + arg2, Toast.LENGTH_SHORT).show();

    Intent updateDeleteLoginInfo = new Intent (this, UpdateDeleteLoginList.class);

    LoginDetails clickedObject = loginArrayList.get(arg2);

        Bundle loginBundle = new Bundle();
    loginBundle.putString("clickedWebSite",clickedObject.getsName());
    loginBundle.putString("clickedWebAddress",clickedObject.getwUrl());
    loginBundle.putString("clickedUserName",clickedObject.getuName());
    loginBundle.putString("clickedPassWord",clickedObject.getpWord());  

    updateDeleteLoginInfo.putExtras(loginBundle);   
    startActivity(updateDeleteLoginInfo);
}
    } 
```

SQLite：

```
 String sqlDataStore = "create table if not exists " + TABLE_NAME_XXXXXXXXX + " ("+ BaseColumns._ID + "integer primary key autoincrement "

                    + COLUMN_NAME_XXXX + " text not null,"
                    + COLUMN_NAME_XXXXXXX + " text not null,"
                    + COLUMN_NAME_XXXXXXXX + " text not null,"
                    + COLUMN_NAME_XXXXXXXX + " text not null);" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:04:26.093

替换这一行：

```
 Cursor cursor = sqliteDatabase.query(dataStore.TABLE_NAME_INFOTABLE, null, null, null, null, null, null); 
```

有了这个：

```
 Cursor cursor = sqliteDatabase.query(dataStore.TABLE_NAME_INFOTABLE, null, null, null, null, dataStore.COLUMN_NAME_SITE, null); 
```

按 COLUMN_NAME_SITE 对结果进行排序。

这样，当您完成查询时，您的光标将被预先排序，并且您不需要可比较的界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:07:02.600

您也可以在 sqlite 查询中编辑 WHERE 子句。你会想要添加这样的东西

```
ORDER BY TITLE COLLATE NOCASE ASC 
```

注意“TITLE”是您要排序的任何列。

这将在忽略大小写的情况下将所有内容按 ABC 顺序排列。导致 AaBcD 而不是 ABDac

使用 SQLite，您根本不需要进行比较:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:09:31.900

```
Cursor cursor = db.rawQuery("select * from TABLENAME_HERE order by COLUMN_NAME_HERE", null); 
```

替换而不是

```
Cursor cursor = sqliteDatabase.query(dataStore.TABLE_NAME_INFOTABLE, null, null, null, null, null, null); 
```

# winforms - 为什么调用 CreateGraphics() 会改变表单的外观？

> ID：11689370
> 
> 赞同：1
> 
> 时间：2012-07-27T14:01:59.437
> 
> 标签：winforms, look-and-feel

在我的 C# winforms 应用程序中，我使用 Graphics 对象来获取当前 DPI 值，以使我的代码能够缩放某些组件。这很好用，只是一旦我调用 CreateGraphics()，我的 winforms 应用程序的外观和感觉就会发生变化。风格从熟悉的“圆形”按钮到看起来更古老的“锐边”按钮。

为什么会发生这种情况，我能做些什么来防止它发生？

我的代码如下所示：

```
 Graphics g = this.CreateGraphics();
        try
        {
            if (g.DpiX == 120.0f)
            {
                // scale the components appropriately
            }
        }
        finally
        {
            g.Dispose();
        } 
```

事实上，我可以通过调用 CreateGraphics 然后立即处理它来重现问题。

非常感谢任何帮助或见解！

另一个问题是：有没有在不创建图形对象的情况下获得 DPI 设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-10T16:50:17.420

前段时间我正在研究 DPI 问题，当时一位同事开始使用高 DPI 显示器。

我的方法是询问桌面，而不是 Dpi 的特定窗口。当我遇到一些麻烦时，我想出了这段代码（不是很漂亮，但对我来说效果很好）：

```
 /// <summary>
    /// Assesses the Systems Primary Monitor's DPI value
    /// </summary>
    public static double DPI {
        get {
            Graphics g = Graphics.FromHwnd(IntPtr.Zero);
            IntPtr desktop = g.GetHdc();
            int LogicalScreenHeight = GetDeviceCaps(desktop, (int)DeviceCap.VERTRES);
            int PhysicalScreenHeight = GetDeviceCaps(desktop, (int)DeviceCap.DESKTOPVERTRES);

            float ScreenScalingFactor = (float)PhysicalScreenHeight / (float)LogicalScreenHeight;

            // dpi1 answers correctly if application is "dpiaware=false"
            int dpi1 = (int)(96.0 * ScreenScalingFactor);
            // dpi2 answers correctly if application is "dpiaware=true"
            int dpi2 = GetDeviceCaps(desktop, (int)DeviceCap.LOGPIXELSX);

            return Math.Max(dpi1, dpi2);
        }
    }

    [DllImport("gdi32.dll")]
    static private extern int GetDeviceCaps(IntPtr hdc, int nIndex);

    private enum DeviceCap {
        VERTRES = 10,
        DESKTOPVERTRES = 117,
        LOGPIXELSX = 88,

        // http://pinvoke.net/default.aspx/gdi32/GetDeviceCaps.html
    } 
```

我特别不喜欢使用 hack 的方法`Math.Max(dpi1, dpi2)`，但目前我没有找到更好的解决方案。

至于你原来的问题，在 Win10 上我看不到视觉效果的变化。抱歉，这里不知道。

# c# - 将用户名从登录保存到另一个表单

> ID：11689373
> 
> 赞同：0
> 
> 时间：2012-07-27T14:02:02.723
> 
> 标签：c#, asp.net, sql-server-2005, authentication

我需要将用户名保存在 sql 表中，例如：用户将其用户名和密码放在登录名中，然后，以其他形式必须将文本框中的一些数据发送给另一个用户，我该如何保存用户名？我正在使用 Visual Studio 2008、c sharp 和 sql server 2005 的网站工作，
在此先感谢。

这是我的登录代码，我必须将用户名传递给第二种形式

```
protected void btnLogin_Click(object sender, EventArgs e)

{
    ClPersona login = new ClPersona();
    bool isAuthenticated = login.sqlLogin1((txtUsuario.Text), (txtPassword.Text));
    if (isAuthenticated)
    {
        //prueba para sesion
        Session["sesionicontrol"] = login.NombreUsuario;
        Response.Redirect("../MENU/menu1.aspx");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:26:27.293

在您的目标表单上放置一个标签，如下所示：

```
<asp:label ID="Label1" runat="server" text="Label"></asp:label> 
```

转到目标页面查找方法后面的`Page_Load`代码并添加以下代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Label1.Text = (string) Session["sesionicontrol"];
    } 
```

这将读取`login.NombreUsuario`先前保存的 hich的值`Session["sesionicontrol"]`并将其显示在标签中。

我的假设是：

1.  `login.NombreUsuario`- 包含您作为用户名引用的数据 - 这就是您要传递的数据。
2.  它是类型`string`。

* * *

通常`Session`提供一个字典来保存任何命名对象。它们在当前会话内的所有页面之间共享。您可以使用 session 跨页面传递一些数据，如下所示：

**WebForm1.aspx**

```
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" /> 
```

**WebForm1.aspx.cs**

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        Session["SomeKey"] = TextBox1.Text;
        Response.Redirect("WebForm2.aspx"); 
    } 
```

这会将您刚刚输入的值保存`TextBox`到会话中。

**WebForm2.aspx**

```
<asp:label ID="Label1" runat="server" text="Label"></asp:label> 
```

**WebForm2.sapx.cs**

```
public partial class WebForm2 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Label1.Text = (string) Session["someKey"];
    }
} 
```

这会获取您存储在上一页 uner 键中的值`SomeKey`，并将其设置为`Label`在页面呈现之前。您会在 forst 页面上看到您输入的文本。

# c# - Ninject 与 InRequestScope 绑定在每次调用时返回一个唯一项

> ID：11689374
> 
> 赞同：2
> 
> 时间：2012-07-27T14:02:04.820
> 
> 标签：c#, ninject, webforms

我在 WebForms 应用程序中使用 Ninject。我有适用于应用程序不同部分的 NinjectConfiguration 模块。

所有绑定都设置为“InRequestScope”绑定。但是，在运行应用程序时，每次调用`Kernel.Get<T>()`都会返回一个新实例。

我在 Global.asax 中使用以下代码：

```
public class Global : NinjectHttpApplication
{
   public static IKernel SharedKernel { get; private set; }

   protected override Ninject.IKernel CreateKernel()
   {
       SharedKernel = new StandardKernel();

       // I have added these two lines to resolve an exception about IntPtr
       SharedKernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
       SharedKernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

       SharedKernel.Load(new NinjectDataLayerConfiguration());

      return SharedKernel;
   }
} 
```

我的忍者模块：

```
public class NinjectDataLayerConfiguration : NinjectModule
{
    public override void Load()
    {
        Bind<EFContext>().ToSelf().InRequestScope();
        Bind<IProjectRepository>().To<ProjectRepository>().InRequestScope();

        /* other repositories */
    }
} 
```

在 Web.Config 中，我添加了一个 HttpModule 以确保在请求结束时处理这些项目：

```
<add name="OnePerRequestModule" type="Ninject.OnePerRequestModule" /> 
```

但是当我运行以下代码时：

```
 var ProjectRepository1 = SharedKernel.Get<IProjectRepository>();
 var ProjectRepository2 = SharedKernel.Get<IProjectRepository>(); 
```

我得到了两个不同的实例，这导致了各种错误（因为我使用的是实体框架并且我的 ObjectContext 应该通过请求共享）。

关于我做错了什么的任何指示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T07:47:06.217

您很可能不使用其中一种网络扩展。例如，对于 WebForms，Ninject.Web（除了 Ninject.Web.Common）

# java - AES加密后的UDP数据包字节数组大小

> ID：11689384
> 
> 赞同：1
> 
> 时间：2012-07-27T14:02:32.900
> 
> 标签：java, udp, bytearray, aes, encryption

所以基本上我已经使用 UDP 套接字在服务器和客户端之间创建了一个简单的聊天应用程序。消息在发送之前使用 AES 加密。但是，现在我对用于包含已发送消息的字节数组的大小有疑问。现在我的字节数组的大小为 16。

```
byte[] buffer = new byte[16];
DatagramPacket packet = new DatagramPacket(buffer, buffer.length); 
```

但现在我被这个字节大小困住了。如果我尝试发送超过 16 个字节的消息，它会给我一个 BadPaddingException: Given final block not proper padding，之后我发送的任何大小的消息都会给我同样的错误。

如果我尝试增加字节数组的大小，我发送的任何消息都会立即给我一个 BadPaddingException: Given final block not proper padding。

有人对如何发送和接收大于 16 字节的消息有任何想法吗？

这是我的加密代码：

```
 Cipher encryptor = Cipher.getInstance("AES/CBC/PKCS5Padding");
    Cipher decryptor = Cipher.getInstance("AES/CBC/PKCS5Padding");

    encryptor.init(Cipher.ENCRYPT_MODE, secret);
    byte[] IV = encryptor.getIV();

    packet.setData(IV);
    socket.send(packet);

    IvParameterSpec ips = new IvParameterSpec(IV);

    decryptor.init(Cipher.DECRYPT_MODE, secret, ips); 
```

我发送数据包的代码：

```
String message = input.next();
buffer = encryptor.doFinal(message.getBytes());
packet = new DatagramPacket(buffer, buffer.length, clientIP, port);
System.out.println("Sent: " + message);
socket.send(packet); 
```

我接收数据包的代码：

```
buffer = new byte[16];
packet = new DatagramPacket(buffer, buffer.length);
socket.receive(packet);
buffer = decryptor.doFinal(buffer);
String reply =  new String(buffer);
System.out.println("Received: "+ reply); 
```

# html - 如何编写表格单元格以在 IE8 中包装内容？

> ID：11689386
> 
> 赞同：0
> 
> 时间：2012-07-27T14:02:37.080
> 
> 标签：html, html-table

我正在尝试在 HTML 中创建表格视图。如果表格太宽，溢出的内容应该隐藏，但单元格的宽度不应该自动压缩。某些单元格包含多个项目，例如示例中具有类 'btn' 的 div。

以下代码在 Chrome 中有效，但在 IE 8 中，带有 div 的单元格被包装成两行。

```
<html>

<head>
  <style>
    #container {
      width: 100%;
      overflow: hidden;
      background-color: aqua;
    }

    .btn {
      width: 18px;
      height: 18px;
      background-color: red;
    }

    .tbl td {
      white-space: nowrap;
    }

    .tbl input {
      float: left;
    }

    .tbl div {
      float: left;
    }
  </style>
</head>

<body>
  <div id='container'>
    <table class='tbl'>
      <tr>
        <td>Item Name</td>
        <td><input style='width:100px' /></td>
        <td>Barcode</td>
        <td class='td2'><input style='width:80px' />
        </td>
        <td>Item code</td>
        <td><input style='width:50px' /></td>
      </tr>
      <tr>
        <td>Units</td>
        <td><input style='width:100px' /></td>
        <td>Item type</td>
        <td class='td2'><input style='width:80px' />
          <div class='btn'></div>
          <!-- this is causing a wrap to 2 lines -->
        </td>
        <td>ID</td>
        <td><input style='width:50px' /></td>
      </tr>
    </table>
  </div>
</body>
```

Chrome 中的屏幕截图：

[![](../Images/5e8a760db8d99ab5ab1901d840f6aea3.png)](https://i.stack.imgur.com/BCwxm.png)

IE8 中的截图：

[![](../Images/340693d1b908ef2466b14b2b27f43840.png)](https://i.stack.imgur.com/O974c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:21:02.133

A`DIV`是块元素，这意味着它不是内联元素。您使用的 CSS 可防止自动换行，但 a`DIV`不是单词，因此不适用。简单的解决方案是使用内联等效的 a `DIV`: a `SPAN`。

# sql-server-2008 - SQL回滚事务

> ID：11689387
> 
> 赞同：2
> 
> 时间：2012-07-27T14:02:39.960
> 
> 标签：sql-server-2008, tsql

我正在尝试删除表中的数据

```
BEGIN TRAN 

DELETE FROM TABLEA
DELETE FROM TABLEB

ROLLBACK TRAN 
```

但是当我检查表中的数据时，数据确实存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T14:05:38.687

如果您正在回滚事务，则您正在取消未提交的更改。如果你打开一个事务，删除和回滚，数据就会存在。

如果你想提交交易（删除信息），然后做

```
BEGIN TRAN 

DELETE FROM TABLEA
DELETE FROM TABLEB

COMMIT TRAN 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T14:34:20.577

`TRANSACTION`以下是关于SQL Server中的一些解释

事务是单个工作单元。如果事务成功，则事务期间所做的所有数据修改都将提交并成为数据库的永久部分。如果事务遇到错误并且必须取消或回滚，则所有数据修改都将被删除。

还要记住，使用`TRANSACTION`临时锁定表，所以你必须小心。

```
 BEGIN TRAN 
    Statement1
    Statement2
 COMMIT TRAN 
```

如果其中一个语句失败或有错误，`transaction`将`rollback`忽略所有语句，不会有任何更改

当您使用它时，请`ROLLBACK TRAN`删除从使用开始时所做的所有数据`transaction`修改`COMMIT TRAN`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T14:06:51.430

代替

```
ROLLBACK TRAN 
```

和

```
COMMIT TRAN 
```

并且数据将被删除。`rollback tran`意味着取消在事务中所做的所有更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T14:52:24.177

```
BEGIN TRY
BEGIN TRAN   

DELETE FROM TABLEA 

DELETE FROM TABLEB  

COMMIT TRAN  
END TRY

BEGIN CATCH
 SELECT 
        ERROR_NUMBER() AS ErrorNumber
        ,ERROR_SEVERITY() AS ErrorSeverity
        ,ERROR_STATE() AS ErrorState
        ,ERROR_PROCEDURE() AS ErrorProcedure
        ,ERROR_LINE() AS ErrorLine
        ,ERROR_MESSAGE() AS ErrorMessage

 IF @@TRANCOUNT > 0
        ROLLBACK TRANSACTION
END CATCH 
```

如果您在事务中有多个操作，则应始终使用 try-catch 块来回滚事务的一部分失败的所有内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-11T06:34:17.880

——作为总结

```
BEGIN TRAN 

DELETE FROM TABLEA
DELETE FROM TABLEB

ROLLBACK/COMMIT TRAN 
```

--ROLLBACK：在名称中回滚，它会取消进程。

--COMMIT：在名称commit中，会确认进程。

# html - 表单定位 iframe

> ID：11689401
> 
> 赞同：0
> 
> 时间：2012-07-27T14:03:27.567
> 
> 标签：html, forms, iframe, target

我有一个带有两个 iframe 的 index.html 页面：

```
<html><head><title>DOM KPI</title></head>
<body bgcolor='oldlace'>
<iframe src="main.cgi" id=main width=40% height=100% frameborder=0 ></iframe>
<iframe src="graphs2.cgi" id=graph  frameborder=0 width=60% height=100%></iframe>
</body>
</html> 
```

主页是一个 cgi，它将向图形 iframe 发送输出。现在，当我单击它时，它会在其他选项卡中打开 grap2.cgi。

main.cgi 程序的窗体行。

`<form name="domformula" action="graphs2.cgi" method="post" target="graph" >`

有人能帮我吗？？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:10:30.077

我能做到！

我只需要在 index.html 上添加 iframe 的名称

```
<iframe src="main.cgi" id=main name=main width=420px height=100% frameborder=0 ></iframe>
<iframe src="graphs2.cgi" id=graph name=graph frameborder=0  width=650px height=100%></iframe> 
```

在 main.cgi 我添加以下内容：

```
<script>
        parent.graph.document.location="graphs2.cgi";
    </script> 
```

非常感谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:10:03.770

这里的问题是您有一个带有两个子 iframe 页面的父页面。一个孩子试图在没有先通过父页面的情况下给另一个孩子打电话。

您可以使用 JavaScript 执行此操作，以便通过父页面对其进行路由。

```
parent.graph.document.location="http://yoururl.cgi" 
```

# mysql - MySQL：在 where 子句中命名标量值子查询

> ID：11689402
> 
> 赞同：1
> 
> 时间：2012-07-27T14:03:34.593
> 
> 标签：mysql, sql, subquery

我有一个这样的查询：

`WHERE (scalar-subquery1) > (scalar-subquery2)`

它工作正常。这里可以有任何运算符，而不是查询之间的“大于”（>“）。

现在我想为这些查询命名，以便我可以在 select 子句中引用它们，所以我尝试了：

`SELECT q1,q2 ... WHERE (scalar-subquery1) as q1 > (scalar-subquery2) as q2`

`as q1`但是and运算符之间会报语法错误`>`。有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:12:07.877

您可以将其作为子查询执行：

```
select q1, q2
from (select (scalar-subquery1) as q1, (scalar-subquery2) as q2
     ) t
where q1 < q2 
```

或作为交叉连接：

```
select q1.val, q2.val
from(scalar-subquery1) as q1 cross join
    (scalar-subquery2) q2
where q1.val < q2.val 
```

第三个选项是第一个选项的变体：

```
select t.*
from (select <current select>
             (scalar-subquery1) as q1, (scalar-subquery2) as q2
      from <current from>
     ) t
where q1 < q2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:05:30.763

听起来像你想要的：

```
SELECT (scalar-subquery1) as q1, (scalar-subquery2) as q2 ... WHERE (scalar-subquery1) > (scalar-subquery2) 
```

我认为 MySql 不允许您从 SELECT 引用 where 子句中的项目

# ios - 在 OSX 上查看文档集

> ID：11689404
> 
> 赞同：5
> 
> 时间：2012-07-27T14:03:47.177
> 
> 标签：ios, objective-c, xcode, macos

通过 AppleDoc 项目，我设法为我的 IOS 4.0 项目生成了一个 DocSet。

但是，当我在资源管理器中单击新创建的文档集时，我看到的只是一个包含四本书的窗口，旁边是项目的名称、文档集的大小以及上次修改的时间。

我想不出一种浏览文档的方法。它一定很简单，但我找不到任何文档来告诉我如何操作。

起初我认为构建文档可能是一个错误，并搜索了 XCode 附带的一些 Apple DocSet（用于比较）。他们也这样做。那么如何查看和阅读 DocSet？我试过用 XCode 打开，仍然没有乐趣。

我对 DocSets 缺少什么，是否有一个简单的、没有废话的在线指南？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-05-03T00:13:53.557

1.  在 Finder 中，右键单击 docset 文件以显示上下文菜单。
2.  选择“显示包内容”。
3.  导航到“内容/资源/文档”。
4.  用浏览器打开“index.html”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:05:22.853

显示包装内容

内容\资源\文档\index.html

例子：

文件：//localhost/Users/user_name/Library/Developer/Shared/Documentation/DocSets/com.samplecompany.sample.docset/Resources/Documents/index.html

# yii - yii：使用查询生成器选择总和

> ID：11689406
> 
> 赞同：3
> 
> 时间：2012-07-27T14:03:50.420
> 
> 标签：yii

我尝试执行这样的简单查询：

```
$tot = Yii::app()->db->createCommand()
                ->select('sum(field)')
                ->from('products')
                ->where('id = ' . $id)
                ->queryRow(); 
```

但是 $tot 给我返回空值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T16:49:48.420

我认为您需要在总和中添加一个别名，所以这样的事情可能会起作用：

```
$tot = Yii::app()->db->createCommand()
    ->select('sum(field) as mySum')
    ->from('products')
    ->where('id = ' . $id)
    ->queryRow(); 
```

# xcode - 在“GameData”类型的对象上找不到属性“isMarkedAsAnswered”

> ID：11689408
> 
> 赞同：0
> 
> 时间：2012-07-27T14:03:55.397
> 
> 标签：xcode, methods, parameters, autocomplete

我是 obj C 的新手，并且来自非常好的 C++ 背景。我启动了 iOS 开发，并制作了一个我在视图中使用的自定义对象。这个自定义对象是

```
 @interface GameData : NSObject{
    @private
        int Lives;
        ...
        bool isAnswered[5];
    };

    -(int)getLives;
    -(void)LivesPlusOne;
    ...
    -(void)increasePoints:(int)howManyPoints ;
    -(int)getMult;
    ...
    -(void)markAsAnswered:(int)idToRemove; //idToRemove is marked as answered
    -(bool)isMarkedAsAnswered:(int)idToCheck;
    @end 
```

我的问题是，尽管 XCode 可以识别并自动完成诸如 gameData.getLives 之类的方法；并编译它们就好了（我使用 #import "GameData.h" ），它不适用于带有参数的方法，例如：

```
 -(bool)isMarkedAsAnswered:(int)idToCheck; 
```

这可能是问题所在？（我已经尝试删除派生数据（窗口->组织者->项目->派生数据->删除）并且没有任何改变。

额外信息：我在视图中使用 gameData 对象，我通过访问器和突变器（getter/setter）操纵“int Lives”等，并且工作得很好。当我开始使用

```
 [gameData.isMarkedAsAnswered:someInt] 
```

我收到构建错误。

我输入时它甚至不会自动完成

```
 [gamedata.i 
```

提前致谢， 乔治斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:12:13.817

```
[gameData.isMarkedAsAnswered:someInt] 
```

您正在混淆 C++ 和 Objective-C 语法。您使用点访问器来引用声明的属性，而不是方法。使用以下内容：

```
[gameData isMarkedAsAnswered:someInt]; 
```

由于实现问题，当方法没有参数时，您可以使用点访问器调用它，但这不是它的设计目的，您应该立即停止这样做。

# php - 在 cibonfire codeigniter 中使用全局变量

> ID：11689411
> 
> 赞同：0
> 
> 时间：2012-07-27T14:04:02.660
> 
> 标签：php, codeigniter

我正在为我的项目使用篝火。

我必须`userid`根据`username`并在每个视图中使用该用户标识从数据库中获取。

现在我正在做的是我有一个模型函数，并且在每个控制器函数中调用该函数来获取它`userid`，然后`userid`设置为查看页面。

我必须为每个控制器功能重复那段代码，我的问题是有没有办法`userid`在控制器中只使用一次并将其`userid`用于每个视图。

我的控制器功能：-

```
class asd extends Admin_Controller {
protected $role;   
public function _construct(){
    parent::_construct();
     $this->load->library('users/auth');
     $this->load->model('helpdesk_model');
     $role = $this->helpdesk_model->getRole($this->auth->username());
}
} 
```

我`Template::set('role',$role);`在我的控制器功能中使用我的视图：-

`<?php echo Template::get('role); ?>`

它显示未定义的变量角色:(

我的模型：-

```
function getRole($username) {
        $this->db->select('role_id');
        $this->db->where('username',$username);
        return $this->db->get('tbl_users')->row();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:08:41.973

向控制器添加一个变量并在构造函数中对其进行初始化：

```
class Some_controller extends CI_Controller {
    protected $data;

public function __construct() {
       parent::__construct();
       $this->load->model('some_model');
       $this->data['user_id'] = $this->some_model->get_user_id();
    }

    public function index() {
        $this->load->view('my_view', $this->data);
    }
} 
```

在视图中，您可以像这样访问它：

```
echo $user_id; 
```

# c - 通过 C 中的 pipe/dup2 向子进程发送命令

> ID：11689421
> 
> 赞同：1
> 
> 时间：2012-07-27T14:04:23.910
> 
> 标签：c, pipe, dup2

我正在尝试在我的树莓派上为 omxplayer 编写远程控制程序

我可以让 omxplayer 在子进程中正常运行，但我似乎无法让管道正常工作以实际向子进程发送命令。

```
int fd_pipe[2];
pipe (fd_pipe);

while(1) {  // main accept() loop

    printf("server: got connection from %s\n", s);

    /* Attempt to fork and check for errors */
    if( (pid=fork()) == -1){
        fprintf(stderr,"Fork error. Exiting.\n");  /* something went wrong */
        exit(1);
    }

    if (pid==0) 
    { // this is the child process
        dup2(0, fd_pipe[0]);
        close(fd_pipe[1]);

        if(execl("/usr/bin/top","top",NULL) == -1){
            fprintf(stderr,"execl Error!");
            exit(1);
        }

        //try and send command here
        write(fd_pipe[0], "q", 1);

        exit(0);

    } else {

        close(new_fd);  // parent doesn't need this
        dup2(1, fd_pipe[1]);

        //try and send here too
        write(fd_pipe[0], "q", 1);
    }
} 
```

当我使用 top 进行测试并运行程序时，我可以看到 top 输出出现在终端窗口中，并且我可以在窗口中看到 q 命令，但它看起来像是进入父进程而不是子进程。我是在管道上做错了什么，还是无法向生成的子进程发送命令？

我尝试将子 dup2 语句更改为从管道复制到标准输入

```
 { // this is the child process
        dup2(fd_pipe[0], 0); 
```

但随后 top 无法以失败的 tty get 消息开始

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:49:28.820

要与期望能够操作终端的程序进行交互，您应该使用伪 tty。这将避免`failed tty get`错误。

```
/*...*/
#include <pty.h>

void do_child () {
    if (execlp("top", "top", (const char *)0) < 0) {
        perror("exec top");
        exit(EXIT_FAILURE);
    }
    /* NOTREACHED */
}

void do_parent (int fd, pid_t p) {
    sleep(5);
    char r;
    write(fd, "q", 1);
    while (read(fd, &r, 1) > 0) { write(1, &r, 1); }
    waitpid(p, 0, 0);
    close(fd);
}

int main () {
    int fd;
    pid_t p = forkpty(&fd, 0, 0, 0);
    switch (p) {
    case 0:  do_child();
             /* NOTREACHED */
    case -1: perror("forkpty");
             exit(EXIT_FAILURE);
    default: break;
    }
    do_parent(fd, p);
    return 0;
} 
```

请注意，这`forkpty`不是 POSIX，而是在 UNIX 的 BSD 和 Linux 风格上可用的接口。

您可以`top`在批处理模式下执行，但不能使用命令退出。你必须杀了它。

```
void do_child () {
    if (execlp("top", "top", "-b", (const char *)0) < 0) {
        perror("exec top");
        exit(EXIT_FAILURE);
    }
    /* NOT REACHED */
}

void do_parent (pid_t p) {
    sleep(5);
    if (kill(p, SIGINT) < 0) {
        perror("kill");
        exit(EXIT_FAILURE);
    }
    waitpid(p, 0, 0);
}

int main () {
    pid_t p;
    switch ((p = fork())) {
    case 0:  do_child();
    case -1: perror("fork"); exit(EXIT_FAILURE);
    default: break;
    }
    do_parent(p);
    return 0;
} 
```

尽管以批处理模式运行将允许您通过更简单的调用（例如`popen`mux 建议）打开进程，但除非该调用返回子进程的进程 ID，否则您将无法杀死它（不执行 a `pkill`, 或挖掘进程表以找到要杀死的正确子进程）。

我认为您对如何使用`dup2`. 手册页使用术语`oldfd`and `newfd`，这意味着`oldfd`它将变为`newfd`。为了说明，这里有一个简单的程序，它将 stdout 和 stderr 重定向到一个日志文件，调用一个函数，然后恢复 stdout 和 stderr。

```
void do_something () {
    fputs("Error message\n", stderr);
    puts("This is regular output.");
    fputs("Error message\n", stderr);
    puts("This is regular output.");
}

int main () {
    int fd = creat("/tmp/output.log", 0664);
    int outfd = dup(fileno(stdout));
    int errfd = dup(fileno(stderr));
    fflush(stdout);
    fflush(stderr);
    dup2(fd, fileno(stdout));
    dup2(fd, fileno(stderr));
    setlinebuf(stdout);

    do_something();

    fflush(stdout);
    fflush(stderr);
    dup2(outfd, fileno(stdout));
    dup2(errfd, fileno(stderr));
    close(outfd);
    close(errfd);

    fputs("Error to the screen\n", stderr);
    puts("Regular output to screen");
    fputs("Error to the screen\n", stderr);
    puts("Regular output to screen");

    return 0;
} 
```

正如 mux 指出的那样，您的程序正在写入管道的错误端。该`pipe`命令返回一对单向文件描述符，其中写入的内容`fd_pipe[1]`可以从`fd_pipe[0]`.

# html - 调整按钮大小

> ID：11689427
> 
> 赞同：17
> 
> 时间：2012-07-27T14:04:46.177
> 
> 标签：html, css, button, size

我有一个“按钮”，我希望在整个站点中都使用它，但是根据站点的`button`位置，我希望它以不同的大小显示。

在我的 HTML 中，我尝试过（但它不起作用）：

```
<div class="button" width="60" height="100">This is a button</div> 
```

和匹配的CSS：

```
.button {
  background-color: #000000;
  color: #FFFFFF;
  float: right;
  padding: 10px;
  border-radius: 10px;
  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;
} 
```

我假设如果每次我打电话给这个`class`我都可以传入一个大小和嘿-presto！......但不是......

通过添加我所说的宽度和高度`button` `class`似乎对它的大小没有任何作用。有谁知道我该怎么做？如果我把宽度和高度放在里面，`CSS`那么`button`到处都是相同的大小。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-27T14:07:05.003

你不应该直接使用“width”和“height”属性，`style="some css here"`如果你想使用内联样式，请使用 style 属性：

`<div class="button" style="width:60px;height:30px;">This is a button</div>`

但是请注意，**通常应避免使用内联样式**，因为它使维护和样式更新成为一场噩梦。就个人而言，如果我有一个像你这样的按钮样式但也想应用不同的大小，我会使用多个 css 类来调整大小，如下所示：

```
 .button {
        background-color: #000000;
        color: #FFFFFF;
        padding: 10px;
        border-radius: 10px;
        -moz-border-radius: 10px;
        -webkit-border-radius: 10px;
        margin:10px
    }

    .small-btn {
        width: 50px;
        height: 25px;
    }

    .medium-btn {
        width: 70px;
        height: 30px;
    }

    .big-btn {
        width: 90px;
        height: 40px;
    }
```

```
 <div class="button big-btn">This is a big button</div>
    <div class="button medium-btn">This is a medium button</div>
    <div class="button small-btn">This is a small button</div> 
```

[jsFiddle 示例](http://jsfiddle.net/dzb8d/3/)

使用这种定义样式的方式会从您的 HTML 标记中删除所有样式信息，如果您想更改所有小按钮的大小，这将更容易 - 您只需在 CSS 中更改一次。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T14:10:47.607

如果您想为内联按钮调用不同的大小，您可能会这样做：

```
<div class="button" style="width:60px;height:100px;">This is a button</div> 
```

或者，具有不同尺寸的更好方法（例如按钮将有 3 种标准尺寸）是只为尺寸设置类。

例如，你会这样调用你的按钮：

```
<div class="button small">This is a button</div> 
```

在你的 CSS

```
.button.small { width: 60px; height: 100px; } 
```

并为您希望拥有的每种尺寸创建类。这样，如果您想一次更改所有小按钮的大小，您仍然可以使用样式表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T14:06:37.160

使用内联样式：

```
<div class="button" style="width:60px;height:100px;">This is a button</div> 
```

[小提琴](http://jsfiddle.net/rCzQG/1/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-27T14:12:06.717

另一种选择是允许您在标签中包含多个类。考虑：

```
 <div class="button big">This is a big button</div>
 <div class="button small">This is a small button</div> 
```

和CSS：

```
 .button {
     /* all your common button styles */
 }

 .big {
     height: 60px;
     width: 100px;
 }
 .small {
     height: 40px;
     width: 70px;
 } 
```

等等。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2014-08-07T08:35:39.070

试试这个可调整大小的按钮

```
<button type="submit me" style="height: 25px; width: 100px">submit me</button> 
```

# c# - WMI deviceID 版本 win API 设备ID

> ID：11689428
> 
> 赞同：3
> 
> 时间：2012-07-27T14:04:48.190
> 
> 标签：c#, windows, winapi, wmi

我想知道如何将 WMI 中的 deviceID（例如 select * from WIN32_PnPEntity where service='monitor'）转换为 win API 设备 ID（例如调用 EnumDisplayDevices）。

WMI 给出了一个设备 ID，例如“DISPLAY\DELA008\5&2F6B978F&0&UID16777488”，而 EnumDisplayDevices 给了我一个设备 ID，例如“MONITOR\DELA008{4d36e96e-e325-11ce-bfc1-08002be10318}\0001”。如何使用 WMI 中的 deviceID 来调用 win API 函数？

# winforms - VS2010 表单大小和屏幕分辨率问题

> ID：11689430
> 
> 赞同：2
> 
> 时间：2012-07-27T14:04:51.210
> 
> 标签：winforms, visual-studio-2010, screen-resolution

我使用 Visual Studio 2010，我希望表单大小为 1280*1024，但我只能有 1280*768。它接缝 VS2010 不允许我有一个比我支持的屏幕分辨率（1366*768）更大的表格，因此我不能制作一个大于 1366*768 的表格。

问题是：VS2010 有没有办法让表格的尺寸大于我的屏幕分辨率？（我知道我们可以在 VS2008 上实现，但是 VS2010 有办法吗？）

*   请不要让我更改我的车载涂鸦卡
*   请不要让我卸载 VS2010 并安装 VS2008

欢迎使用除此之外的任何其他解决方案。

编辑：

问题是我无法更换组件并将其放置在正确的位置，因为我看不到 Form1.cs [Design] 上的所有空间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T22:58:18.393

如果您需要更多空间，可以使用它。这将创建带有滚动条的大面板。您不能将窗口大小设置为大于屏幕。

```
public Form1()
{
    InitializeComponent();
    this.AutoScroll = true;
    this.AutoSize = true;
    this.Controls.Add(new Panel() { Width = 2300, Height = 2000 });
    //this one will only set window size to size of screen
    this.ClientSize = new System.Drawing.Size(2300, 2000);
} 
```

编辑：

你可以在设计中做同样的事情。只需将表单自动滚动设置为 true，拖放面板并将其大小设置为巨大。这将让您使用滚动条设计您的巨大面板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:44:42.240

Winforms 不会让您创建比显示器大的窗口。也没有办法覆盖它。这是完全合理的，这样的窗口是不可用的，因为用户没有合适的方法来访问监视器显示区域之外的窗口部分。特别是垂直，通过拖动标题栏移动窗口不起作用。

当您需要 1280*1024 时，唯一的方法是将表单的 AutoSize 属性设置为 True。将 AutoScrollMinSize 属性设置为您需要的大小，Winforms 会自动在窗体上显示一个垂直滚动条，以便用户可以轻松滚动到窗口中看不见的部分。

如果这是一个特定的设计时问题，换句话说，当您被迫在笔记本电脑上设计表单但*知道*用户有更大的显示器时，您可以通过在代码中强制大小来解决它。在构造函数（而不是 Load 事件）中这样做，如下所示：

```
 public Form1() {
        InitializeComponent();
        this.Size = new Size(1280, 1024);
    } 
```

但是你永远不会真正*知道*所以不要吝啬使用 AutoScroll + AutoScrollMinSize。

# sql - 如何使用休眠记录最终的 SQL 查询

> ID：11689432
> 
> 赞同：2
> 
> 时间：2012-07-27T14:04:55.973
> 
> 标签：sql, hibernate, log4j

使用休眠时是否可以记录不是 HQL 查询而是最终查询。我的意思是，发送到数据库的那个。我尝试了不同的日志级别，但我没有看到它。在我看来，调试一些问题会很有用。

非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T14:12:15.470

是的，这是可能的。这就是[`hibernate.show_sql`物业](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#configuration-optional-properties)的作用。您还可以使用[日志记录配置](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#configuration-logging)进行更好的控制：

```
org.hibernate.SQL           Log all SQL DML statements as they are executed
org.hibernate.type          Log all JDBC parameters
org.hibernate.tool.hbm2ddl  Log all SQL DDL statements as they are executed 
```

# jquery - 如何在准备好 css/jquery 之前停止显示网页内容？

> ID：11689434
> 
> 赞同：2
> 
> 时间：2012-07-27T14:05:20.837
> 
> 标签：jquery, html, css

我有一个巨大的网络（许多图像，许多行 javascript，复杂的样式表）。当浏览器加载所有内容时，在加载 css/jquery 之前，它显示的是纯 html 数据，没有样式，看起来不太好。

奇怪的是，Firefox 似乎做得最多。其他浏览器似乎做得很好。

我该如何解决这个问题？我考虑过使用一些 css/javascript 指令启动索引，这会导致浏览器不显示任何内容（显示：无？），直到内容准备好（如何？）。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:42:56.627

我认为您可能需要更仔细地查看问题发生的原因，但是，我可以帮助您解决它！

您可以使用首先加载的不同样式表显示任何或所有 DOM 元素，然后在加载 doc 时使用 jQuery 删除该样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:32:14.570

将所有脚本和样式表放在页眉中，不管人们怎么说将 JS 始终放在页脚中然后发挥作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-11T20:18:07.023

就我而言。我仅在加载 css 时才使用 css onload 加载 html 内容

```
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head runat="server">    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript">      
        function insertContentAtEnd(u, id_script_pre_html, id_script_post_html) {var xhr = new XMLHttpRequest();xhr.open('GET', u, true);xhr.onreadystatechange = function () {if (this.readyState !== 4) {return;}; if (this.status !== 200) { return; } else { var el = document.createElement('div');document.body.appendChild(el); /* to place at end of document*/ el.innerHTML = this.responseText; if(s1){ eval(document.getElementById(s1).innerHTML);}if(s2){ eval(document.getElementById(s2).innerHTML);}  }; }; xhr.send();}
    </script>
    <link rel="stylesheet" href="/inc/css/default.css" onload="insertContentAtEnd('/lay/u/l/default.html','scr_u_l_pre','scr_u_l_post');"/>

</head>
<body></body>
</html> 
```

# php - 使用 PHP 将字符串插入 MySQL 表和 HTML 页面的安全性

> ID：11689438
> 
> 赞同：0
> 
> 时间：2012-07-27T14:05:38.050
> 
> 标签：php, mysql, html, string, xss

现在我正在使用以下函数来保护我的字符串：

```
 function secure($data)
  {
    $data = trim($data);
    $data = htmlspecialchars($data);
    $data = str_replace("'", '"', $data);
    $search = array(chr(0xC2).chr(0xA0),chr(0xC2).chr(0x90),
                              chr(0xC2).chr(0x9D),chr(0xC2).chr(0x81),
                              chr(0xC2).chr(0x8D),chr(0xC2).chr(0x8F),
                              chr(0xC2).chr(0xAD),chr(0xAD));
    $data = str_replace($search, "", $data);
    return $data;
  } 
```

这个函数是否足以保护字符串？

**您将使用哪些方法来保护要插入的字符串`MySQL`并防止诸如`XSS`in之类的错误`HTML page`？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:07:34.237

您只需要 PDO！[准备好的语句和存储过程](http://www.php.net/manual/en/pdo.prepared-statements.php)。

如果您想从代码中删除 javascript

*   看看[htmlpurifier](http://htmlpurifier.org/)。

*   使用正则表达式：`$html = preg_replace('#<script(.*?)>(.*?)</script>#is', '', $html);`

*   或使用[DOMDocument](http://php.net/manual/de/class.domdocument.php)

    ```
    $doc = new DOMDocument();
    $doc->loadHTML($html); // load the HTML string we want to strip

    $script_tags = $doc->getElementsByTagName('script'); // get all the script tags

    $length = $script_tags->length;

    for ($i = 0; $i < $length; $i++) {
      $script_tags->item(0)->parentNode->removeChild($script_tags->item(0)); // for each tag, remove it from the DOM

    }

    $no_script_html_string = $doc->saveHTML(); // get the HTML string back 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T14:12:57.513

您正在使用两种不同的技术，它们都需要单独的消毒方法。

MySQL 需要保护免受 SQL 注入，最常见的是打破引号并将非数字类型放在数字字段中。在这种情况下，字符串变量可以通过许多东西来保护。使用[准备好的语句](http://www.php.net/manual/en/pdo.prepared-statements.php)肯定会有所帮助；方法如[`mysql_real_escape_string()`](http://php.net/mysql_real_escape_string), 或[`mysqli_real_escape_string()`](http://php.net/mysqli_real_escape_string)可以清理单个字符串变量，其中[`is_numeric()`](http://php.net/is_numeric)和的组合[`intval()`](http://php.net/intval)可以帮助处理整数。如果您想在每个变量级别上进行清理，这一切都取决于您的输入；准备好的声明将通过在声明/变量级别上为您提供更多的宽大处理。

另一方面，XSS 完全是另一种野兽。诸如[`htmlentities()`](http://php.net/htmlentities)和之类的方法[`htmlspecialchars()`](http://php.net/htmlspecialchars)可以在输出数据时有所帮助，但它也高度依赖于输出数据的上下文。如果您要输出诸如 之类的数据`<span><?=$variable;?></span>`，这些函数中的任何一个都会有所帮助。但是，类似的东西`<a href="<?=$variable;?>">`不会。

有关 XSS 预防的更多详细信息，请从 OWASP 的[XSS（跨站点脚本）预防备忘单开始](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T14:12:03.957

防止 SQL 注入的最佳方法是使用参数化查询。针对 XSS，您可以使用一个非常好的库 (PHP)，称为 HTML Purifier [http://htmlpurifier.org/](http://htmlpurifier.org/) 希望对您有所帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T14:14:12.587

通过说“保护我的字符串”，我假设您的意思是输出？

对于 DB 输出（包括 SELECT 查询中使用的变量），使用 *_escape_string 函数，甚至更好地使用带有 PDO 对象的[预处理语句。](http://php.net/manual/en/pdo.prepared-statements.php)

对于 html 输出，您应该使用[htmlentities](http://php.net/manual/en/function.htmlentities.php)而不是[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)

此外，如果从输入运行 shell 命令，请使用[escapeshellarg](http://php.net/manual/en/function.escapeshellarg.php)和[escapeshellcmd](http://php.net/manual/en/function.escapeshellcmd.php)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-27T14:06:26.843

您必须知道的唯一方法是: `addslashes`:)

# javascript - 定位道场 dijit.form.DropDownButton 的内容？

> ID：11689443
> 
> 赞同：0
> 
> 时间：2012-07-27T14:05:53.133
> 
> 标签：javascript, html, css, dojo

我有这个[jsfiddle](http://jsfiddle.net/62V7p/)，右上角有三个按钮。

一直向右的两个按钮“底图”和“图例”的内容按预期向左打开，因此它们不会超出浏览器窗口。左侧按钮的内容“地图叠加层”会向右打开，因为它有这样做的空间。

是否可以更改这些 DropDownButtons 的内容，以便默认情况下它们都将自己定位为内容的右侧与按钮的右侧对齐？

IE，我希望左按钮（“地图叠加”）的打开内容与其他按钮的打开内容相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:41:18.637

[修复了具有所需功能的 jsfiddle。](http://jsfiddle.net/62V7p/3/)

我已经通过为DropDownButton`dojo.connect`的事件添加一个来解决这个问题。`onMouseDown`我根据 DropDownButton 的 x 位置和宽度计算 ContentPane 的新 x 位置。然后我找到 ContentPane 的 DOM 节点的父节点节点，并将其`left`样式参数设置为那个新的 x 位置。

```
dojo.connect(dijit.byId("mapOverlayDropdown"), 'onMouseDown', function() {
    console.log("shown");

    var button = dijit.byId("mapOverlayDropdown").domNode;
    var gallery = dijit.byId("mapOverlayGallery").domNode.parentNode;

    var buttonPos = dojo.position(button, true);
    var galleryPos = dojo.position(gallery, true);

    var newX = buttonPos.x + buttonPos.w - galleryPos.w;

    gallery.style.left = newX.toString() + "px";
}); 
```

# php - mod_rewrite 添加斜杠并传递给 index.php

> ID：11689447
> 
> 赞同：0
> 
> 时间：2012-07-27T14:06:03.837
> 
> 标签：php, mod-rewrite

当我请求我的网站时，我试图在 URL 中添加斜杠，然后使用 mod_rewrite 将其作为参数传递给 index.php。

我的*.htaccess*文件如下所示：

```
RewriteEngine On    

#Add trailing slash
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ /$1/ [R]

#Pass to index.php
RewriteRule ^(.*)/$ index.php?p=$1 
```

在我的*index.php*文件中只输出参数：

```
<?php echo $_GET["p"]; ?> 
```

但是当我在地址栏输入除*http://mydomain.com/*之外的任何内容时，例如*http://mydomain.com/contact*，**php**总是输出`http://mydomain.com/index.php`。所以`http://mydomain.com/index.php`以某种方式作为参数而不是请求的页面传递`contact`，但我不知道为什么......

另外，当我编辑

```
RewriteRule ^(.*)/$ index.php?p=$1 
```

至

```
RewriteRule ^(.*)/$ /index.php?p=$1 
```

我输入 URL，例如`mydomain.com/contact`Apache 给了我 302 Found 和一个指向它被移动的位置的链接，但它链接到同一个页面......

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:15:12.163

Apache 对此有一篇很好的长篇文章。

**斜线问题**

每个网站管理员都可以为引用目录的 URL 的尾部斜线问题唱一首歌。如果它们丢失，服务器会转储一个错误，因为如果你说 /~quux/foo 而不是 /~quux/foo/ 那么服务器会搜索一个名为 foo 的文件。而且因为这个文件是一个它抱怨的目录。实际上，在大多数情况下，它会尝试自行修复，但有时您需要模拟这种机制。例如，在您对 CGI 脚本等进行了大量复杂的 URL 重写之后。解决方案：

这个微妙问题的解决方案是让服务器自动添加尾部斜杠。要正确执行此操作，我们必须使用外部重定向，以便浏览器正确请求后续图像等。如果我们只进行内部重写，这仅适用于目录页面，但当任何图像包含在此页面中时会出错使用相对 URL，因为浏览器会请求内联对象。例如，在 /~quux/foo/index.html 中对 image.gif 的请求将变成 /~quux/image.gif 而没有外部重定向！

```
So, to do this trick we write:

RewriteEngine  on
RewriteBase    /~quux/
RewriteRule    ^foo$  foo/  [R] 
```

疯狂和懒惰的人甚至可以在其 homedir 的顶级 .htaccess 文件中执行以下操作。但请注意，这会产生一些处理开销。

```
RewriteEngine  on
RewriteBase    /~quux/
RewriteCond    %{REQUEST_FILENAME}  -d
RewriteRule    ^(.+[^/])$           $1/  [R] 
```

在这里能找到它：

[http://httpd.apache.org/docs/2.0/misc/rewriteguide.html](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

# javascript - Jquery mobile listview图标未正确显示

> ID：11689453
> 
> 赞同：1
> 
> 时间：2012-07-27T14:06:26.393
> 
> 标签：javascript, jquery, jquery-mobile, icons

我对 jquery mobile listview 中的图标有疑问。正如您在下图中看到的，在我更新到最新版本的 jquery mobile 后，会显示一个问号。

[图标无法正常工作 http://jeflussenburg.nl/img/iconnotshowing.png](http://jeflussenburg.nl/img/iconnotshowing.png)

在我更新之前，问号就像向右的箭头`>`。

我的 HTML：

```
<div data-role="content" data-theme="c">  
    <div id="status"></div>
    <ul id="linksList" data-role="listview" data-inset="true" data-theme="d" ></ul>
</div> 
```

每行的Javascript函数：

```
function renderEntries(entries) {
    var s = '';
    $.each(entries, function(i, v) {
        s += '<li><a href="#contentPage"  class="contentLink" data-entryid="'+i+'">' +                    v.title + '</a></li>';
    });
    $("#linksList").html(s);
    $("#linksList").listview("refresh");       
} 
```

我已经尝试添加`data-icon="arrow-r"`到`<li`项目，但没有奏效。我还将图像映射更新为最新版本。

**更新：** 我从 JQM 文档中复制了这段代码：

```
<ul data-role="listview" data-inset="true" data-theme="b">
    <li data-role="list-divider">Divider</li>
    <li data-icon="home"><a href="#">data-icon="home"</a></li>
    <li data-icon="delete"><a href="#">data-icon="delete"</a></li>
    <li data-icon="plus"><a href="#">data-icon="plus"</a></li>
    <li data-icon="arrow-u"><a href="#">data-icon="arrow-u"</a></li>
    <li data-icon="arrow-d"><a href="#">data-icon="arrow-d"</a></li>
    <li data-icon="check"><a href="#">data-icon="check"</a></li>
</ul> 
```

测试后，我看到图标实际上正在显示，但上面显示了一个问号图标。这个问号图标是从哪里来的？最重要的是我该如何摆脱它？

非常感谢任何帮助！

**解决了：**

似乎这是一个错误。更新到最新的 JQM 版本 1.1.1 后，这些问号消失了，一切都像以前一样工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-27T06:34:40.400

现在有点老了，但这可能会对某人有所帮助，因为我最近遇到了同样的问题。看起来您缺少 www/css 中的图像目录 应该有一个 www/css/images 文件夹，其中包含以下 5 张图像：

```
ajax-loader.gif     icons-18-white.png  icons-36-white.png icons-18-black.png   icons-36-black.png 
```

jquery 完整包 zip（JavaScript、CSS 和图像）包含它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:56:51.903

您应该根据[文档](http://jquerymobile.com/test/docs/buttons/buttons-icons.html)`data-icon="arrow-r"`添加到项目中。`<a>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T14:18:39.797

似乎这是一个错误。更新到最新的 JQM 版本 1.1.1 后，这些问号消失了，一切都像以前一样工作。

# android - 现在如何实现 Android 推送通知？

> ID：11689456
> 
> 赞同：-1
> 
> 时间：2012-07-27T14:06:27.177
> 
> 标签：android

我需要在我的应用程序中实现推送通知。为此，当我打开谷歌端时，这里会显示此消息：-

```
Important: 
```

C2DM 已于 2012 年 6 月 26 日正式弃用。这意味着 C2DM 已停止接受新用户和配额请求。不会向 C2DM 添加任何新功能。但是，使用 C2DM 的应用程序将继续工作。鼓励现有 C2DM 开发人员迁移到新版本的 C2DM，称为 Android 版 Google Cloud Messaging (GCM)。有关更多信息，请参阅 C2DM 到 GCM 迁移文档。开发人员必须使用 GCM 进行新的开发。

请任何人建议我如何提前在我的 app.thanx 中实现推送通知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:07:08.573

您需要的一切都在这里：http: [//developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)带有示例，无需添加更多内容

# javascript - 在 HTML5 Metro 应用程序中从 page2 返回到 Page1 时无法再次导航到 page2？

> ID：11689460
> 
> 赞同：0
> 
> 时间：2012-07-27T14:06:30.757
> 
> 标签：javascript, html, microsoft-metro, windows-runtime

我使用下面的语句从 page1 的 Next 按钮导航到 page2。

document.location.pathname = "page2.html";

我单击主页按钮 FROM PAGE2 返回到 Page1（document.location.pathname = "PAGE1.html";）。它加载了 page1（我的主页）。但是当我再次单击 FROM PAGE1 的下一步按钮时，我是无法再次导航到 page2。

# c++ - 如何从 QMap 中删除值？

> ID：11689465
> 
> 赞同：11
> 
> 时间：2012-07-27T14:06:43.847
> 
> 标签：c++, qt, iterator

假设我想根据一些标准删除项目。比方说：

```
QMap<int, int> map; 
```

我想删除所有值为奇数的项目。如果我使用迭代器：

```
for (auto it = map.begin(); it != map.end(); ++it)
    if (it.value() % 2 == 1)
        map.remove(it.key()); 
```

这段代码可能是错误的，因为调用

```
map.remove(it.key()) 
```

使迭代器无效。如何在每次删除后不重置迭代器的情况下做到这一点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-27T14:11:00.993

改用`QMap::erase`它，它会返回一个迭代器，指向您刚刚删除的元素之后的元素：

```
for (auto it = map.begin(); it != map.end();)
    if (it.value() % 2 == 1)
        it = map.erase(it);
    else
        ++it; 
```

另一种方法是在迭代器上使用*后缀增量运算符：*

```
for (auto it = map.begin(); it != map.end();)
    if (it.value() % 2 == 1)
        map.erase(it++);
    else
        ++it; 
```

另一种方法（可能效率较低）是使用 STL`remove_copy_if`算法，然后是`swap`：

```
bool valueIsOdd(int value) {return value % 2 == 1;}

QMap<int,int> b;
std::remove_copy_if(a.begin(), a.end(),
                    std::inserter(b, b.end()),
                    &valueIsOdd);
a.swap(b); 
```

我目前无法测试最后一个示例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T14:13:11.637

你最好使用更像 STL 的[`erase`](http://doc-snapshot.qt-project.org/5.0/qmap.html#erase)函数：

*   它将迭代器作为参数，因此当您已经知道它在哪里时，不会浪费时间通过它的键搜索元素；
*   它返回一个指向下一个元素的迭代器，因此您可以在之后继续迭代。

使用它，您可以正确实现循环：

```
for (auto it = map.begin(); it != map.end(); /* don't increment here */) {
    if (it.value() % 2 == 1) {
        it = map.erase(it);
    } else {
        ++it;
    }
} 
```

我认为您可以从 中获得相同的结果`map.remove((it++).key())`，但这会比`erase`.

# django - Django 教程，后退按钮混淆

> ID：11689466
> 
> 赞同：2
> 
> 时间：2012-07-27T14:06:48.793
> 
> 标签：django

我在[Django 教程第四页](https://docs.djangoproject.com/en/1.4/intro/tutorial04/#write-a-simple-form)的开头附近，正在`vote`查看视图，最后是这样的：

```
# Always return an HttpResponseRedirect after successfully dealing
# with POST data. This prevents data from being posted twice if a
# user hits the Back button. 
```

在尝试`vote`使用 normal`HttpResponse`而不是的视图`HttpResponseRedirect`后，我可以看到在 POST 之后应该向浏览器返回重定向，以便如果用户点击刷新按钮，则不太可能重复提交。（我注意到 Opera 没有发出“你将要重新提交数据”警告！）。

但那是刷新按钮 - 我看不出后退按钮的问题。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T14:23:24.990

如果您前进到另一个页面然后返回，则 POST 请求将在历史记录中。前进然后后退实际上与刷新相同。

如果没有重定向，应该发出的请求列表（存储在历史记录中）将是这样的：

*   获取/民意调查/1/
*   发布/投票/1/投票/
*   获取/其他/

使用重定向，POST 请求被省略，它被重定向到的内容取而代之：

*   获取/民意调查/1/
*   获取 /poll/1/results/
*   获取/其他/

# c# - 在运行时构建时如何在 web.config 中引用程序集？

> ID：11689472
> 
> 赞同：1
> 
> 时间：2012-07-27T14:07:03.350
> 
> 标签：c#, asp.net, iis, iis-7, .net-3.5

我有一个 WCF 服务，我需要一个用于客户端证书的自定义 SSL 验证器。但是，当我试图告诉我的服务使用什么类时，我会`TypeLoadException`说：

> 无法从程序集“ConnectorExtras”加载类型“ConnectorExtras.Validator”。

这是引用该类的 Web.Config 部分。

```
 <serviceCredentials>
    <clientCertificate>
      <authentication certificateValidationMode="Custom" 
                      customCertificateValidatorType="ConnectorExtras.Validator, ConnectorExtras" />
    </clientCertificate>
  </serviceCredentials> 
```

我知道该部分是问题，因为如果我`, ConnectorExtras`在配置文件中省略程序集名称，错误将更改为

> 无法从程序集“System.ServiceModel，Version=3.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”加载类型“ConnectorExtras.Validator”。

这是我的验证器课程。该代码位于`~\App_Code\Validator.cs`网站上。

```
using System.IdentityModel.Selectors;
using System.IdentityModel.Tokens;
using System.Security.Cryptography.X509Certificates;
using ConnectorExtras.App_GlobalResources;

namespace ConnectorExtras
{
    public class Validator : X509CertificateValidator
    {
        public Validator()
        {
            _certToCompare = new X509Certificate(ValidatorResources.TestCert, "a");
        }

        private readonly X509Certificate _certToCompare;

        public override void Validate(X509Certificate2 certificate)
        {
            if(certificate.Equals(_certToCompare) == false)
                throw new SecurityTokenValidationException();
        }
    }
} 
```

但是，如果我在构造函数中放置一个断点，它将永远不会被击中。

我需要做什么才能使用我的验证器进行自定义证书验证？

# c# - 如何使用 asp.net 在 sharepoint 中创建文件

> ID：11689474
> 
> 赞同：0
> 
> 时间：2012-07-27T14:07:10.180
> 
> 标签：c#, asp.net, sharepoint, sharepoint-2010

我正在编写代码来制作弹出窗口，一旦用户完成内容和标题的写入，它将制作一个 .aspx 文件并上传到文档库。

但我该怎么做呢？我用谷歌搜索，但没有很多材料！

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:15:54.853

您需要使用“客户端对象模型”。您可以查看（http://www.codeproject.com/Articles/268193/SharePoint-2010-Client-Object-Model-Part-1）对客户端对象模型的基本了解。您需要在库中创建文件的代码是：

```
 String fileToUpload = @"C:\YourFile.txt";
        String sharePointSite = "http://yoursite.com/sites/Research/";
        String documentLibraryName = "Shared Documents";

        using (SPSite oSite = new SPSite(sharePointSite))
        {
            using (SPWeb oWeb = oSite.OpenWeb())
            {
                if (!System.IO.File.Exists(fileToUpload))
                    throw new FileNotFoundException("File not found.", fileToUpload);                    

                SPFolder myLibrary = oWeb.Folders[documentLibraryName];

                // Prepare to upload
                Boolean replaceExistingFiles = true;
                String fileName = System.IO.Path.GetFileName(fileToUpload);
                FileStream fileStream = File.OpenRead(fileToUpload);

                // Upload document
                SPFile spfile = myLibrary.Files.Add(fileName, fileStream, replaceExistingFiles);

                // Commit 
                myLibrary.Update();
            }
        } 
```

# dsl - 您将如何应用 Parsec 从 DSL 生成代码？

> ID：11689476
> 
> 赞同：2
> 
> 时间：2012-07-27T14:07:16.903
> 
> 标签：dsl, parsec, haskell

我[在 Parsec 上阅读了 Real World Haskell 的第 16 章](http://book.realworldhaskell.org/read/using-parsec.html)。本章中的示例展示了如何使用 Parsec 从字符串中提取数据结构。

我想知道如何应用 Parsec 来创建一个命令式的 DSL，它可以接受用 DSL 编写的输入并将其转换为可以执行的 Haskell、SQL 或 Ruby 代码。

如果这是一个一般性问题，我很抱歉，但任何线索或示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:37:58.237

有关解析最小语言的帮助，请查看该`Expr`模块。

编写方案教程还演示了通过 Parsec 从解析到评估语言：[http ://en.wikibooks.org/wiki/Write_Yourself_a_Scheme_in_48_Hours](http://en.wikibooks.org/wiki/Write_Yourself_a_Scheme_in_48_Hours)

# html - 是否禁用了Flex HTML 组件工具提示？

> ID：11689482
> 
> 赞同：1
> 
> 时间：2012-07-27T14:07:35.640
> 
> 标签：html, apache-flex, air

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:33:28.807

我在几年前发现[了这个帖子，其中提到了 AIR 内部的 title 属性不起作用，这是一个已知错误。](http://forums.adobe.com/message/3277151)[我在 Adob​​e 的错误报告系统（此处](https://bugs.adobe.com/jira/secure/IssueNavigator.jspa)）中找不到提到的错误。

StackOverflow 上有一个[类似的问题](https://stackoverflow.com/questions/854182/air-applications-using-html-dont-pick-up-alt-and-title-tags)。唯一的建议是使用 Javascript 来模拟标题属性工具提示。这可能值得探索。

# c++ - 如何以编程方式访问 c/c++ a-la-rdtsc 中的性能计数器？

> ID：11689483
> 
> 赞同：3
> 
> 时间：2012-07-27T14:07:41.197
> 
> 标签：c++, performance, intel, performancecounter

我经常使用 rdtsc 测量代码片段，这让我了解读取时间戳计数器所花费的周期，但我知道处理器（特别是我的处理器是英特尔至强）具有性能计数器来测量分支未命中和所有其他好东西。我怎么读？是否可以使用与 rdtsc ( [http://en.wikipedia.org/wiki/Rdtsc](http://en.wikipedia.org/wiki/Rdtsc) ) 类似的代码？另外，我知道有一个名为 perfmon 的产品可以做到这一点，但我想自己以一种简单的编程方式来做这件事，以了解更多信息。我该如何开始呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:22:33.717

看看[PAPI](http://icl.cs.utk.edu/papi/)。它为此提供了一个 API。

# go - 函数/结构/接口名称中允许使用哪些字符？

> ID：11689485
> 
> 赞同：2
> 
> 时间：2012-07-27T14:07:53.477
> 
> 标签：go

我是新手，已经开始玩[A Tour of Go 了](http://tour.golang.org/)。我注意到一个特点，即我可以命名一个函数`_`，但不能调用该函数：

```
import "fmt"

type sel struct {
    s string
}

func _(s string) sel {
    return sel{s}
}

func main() {
    fmt.Println("Hello")
    _("foo") // <-- does not compile
} 
```

如果我评论整`_("foo")`行，那么程序就会编译。

我的问题是函数名中允许使用哪些字符？它只是字母数字字符还是我可以使用`$`？

命名其他事物（例如结构、接口等）的规则是否与函数的命名规则相同？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T16:22:15.357

从[规格](http://golang.org/ref/spec)

> 由下划线字符 _ 表示的空白标识符可以像任何其他标识符一样在声明中使用，但该声明不会引入新的绑定。

这解释了为什么代码有效但您无法调用调用的函数`_`

`_`当你想分配一个变量但忽略它时，在 Go 中使用。调用函数 _ 也是一样的——你定义了它，但编译器会忽略它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T14:26:45.600

[规范](http://golang.org/ref/spec)规定 func、var 或 const 名称必须*以*`unicode_letter`(或)开头`_`，并且*可以*以任何 (`unicode_letter`或`unicode_digit`)结尾`_`。

`unicode_letter`如果您愿意，可以是中文或希伯来文字母。

# c# - 如何使用正则表达式拆分 HTML？

> ID：11689493
> 
> 赞同：0
> 
> 时间：2012-07-27T14:08:29.903
> 
> 标签：c#, regex, parsing

**概述**

我目前正在尝试为可以[在此页面](http://www.dac.unicamp.br/sistemas/catalogos/grad/catalogo2011/cursos/sug25.html)中找到的站点编写一个解析器。

我已经尝试过 XPath（我非常擅长），但我在尝试达到预期结果时失败了，所以我从昨天开始就一直在尝试使用正则表达式。

**我的目标**

我的目标是将这个 html 拆分为多个片段，每个片段都包含一个课程的数据。

例如：`"AF - Bacharelado em Artes Visuais"`是课程名称，科目可以在蓝色表格中找到，直到`08º Semestre: 24 Créditos`。

之后，您可以看到`"AG - Licenciatura em Artes - Artes Visuais"`，这是一个新课程的开始，等等。

这个页面只有两门课程，但是[这个](http://www.dac.unicamp.br/sistemas/catalogos/grad/catalogo2011/cursos/sug22.html)可以有两个以上。

**正则表达式问题**

我的一个朋友帮了我一个忙，发现使用这种模式和选项可以达到课程的名称。这是一些代码：

```
// Creating Regular Expression to find name of courses
Regex regex = new Regex ("<p><br><b><font face=\"Arial,Helvetica\"><font color=\"#000099\"><font size=-1>(.+?)</font></font></font></b>", RegexOptions.Singleline);

int startIndex = 0;
while (regex.IsMatch (auxHtml, startIndex))
    {
        // Checking name of the course and saving it's offset
        int index         = regex.Match(auxHtml, startIndex).Groups[1].Index;
        string courseName = regex.Match(auxHtml, startIndex).Groups[1].Value;
    } 
```

**问题**

由于我可以找到课程的名称和偏移量（索引），理论上，我可以将 Html 拆分为多个片段，其中每个片段仅包含与单个课程相关的数据。

这是我用来尝试的代码。

*   htmlPages 是一个字符串列表
*   auxHtml 是 WebRequest 检索到的 HtmlPage

**代码**

```
// Creating Regular Expression to find name of courses
Regex regex = new Regex ("<p><br><b><font face=\"Arial,Helvetica\"><font color=\"#000099\"><font size=-1>(.+?)</font></font></font></b>", RegexOptions.Singleline);

int startIndex = 0;
while (regex.IsMatch (auxHtml, startIndex))
{
    // Checking name of the course and saving it's offset
    int index         = regex.Match(auxHtml, startIndex).Groups[1].Index;
    string courseName = regex.Match(auxHtml, startIndex).Groups[1].Value;

    // Adding name of the course and offset to dictionary
    courseIndex.Add (courseName,index);
    startIndex        = regex.Match(auxHtml, startIndex).Groups[1].Index;

    // Splitting HTML Page
    if (regex.IsMatch(auxHtml, startIndex))
    {
        int endIndex = regex.Match (auxHtml, startIndex).Groups[1].Index;
        endIndex  = endIndex - startIndex;
        htmlPiece = auxHtml.Remove(startIndex, endIndex);
    }

    htmlPages.Add(auxHtml);
} 
```

我不知道为什么，但是索引有点乱。

第二个课程名称的索引是 8022，但是，如果我尝试：

```
auxHtml.Substring(0,8022) 
```

它为我提供了在下一门课程名称之前结束的 html 的一部分。

我在这里想念什么？

这不就是一个Group的“Index”属性，是html页面中pattern开始的索引吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T14:11:17.670

虽然您可能*几乎*可以使用 RegEx 实现您正在寻找的东西，但它肯定会很困难。

正则表达式*不是*这项工作的正确工具。使用 XML 解析器解析 HTML 会好很多。那是因为 HTML（和一般的 XML）标记不是常规语言 - 因此正则表达式在这种情况下不是很有用。

您应该查看 System.Xml.XmlDocument 类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T14:11:53.707

您不应该使用正则表达式来解析 HTML。真正的正则表达式是无能为力的，扩展的正则表达式也不适合它。您应该使用现有的解析库来处理 HTML，如果您必须自己进行处理，您应该将您的解决方案基于上下文无关语言，而不是常规语言。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T14:12:08.857

不要对 HTML 使用 Regex，使用[Html Agility Pack](http://htmlagilitypack.codeplex.com/)以允许您在 Html 上使用 XPath。

问题是 HTML 不是一种行为良好的语言，Regex 解析的规则有太多例外。Html Agility Pack 等库专门用于解决此问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T19:10:35.353

即使没有为这种情况指定正则表达式，我也使用了它，并且可以解决我的问题。

我不会复制任何代码，因为代码很大，但我会解释我做了什么。

我使用这个正则表达式来查找课程名称

```
Regex regex = new Regex ("<p><br><b><font face=\"Arial,Helvetica\"><font   color=\"#000099\"><font size=-1>(.+?)</font></font></font></b>", RegexOptions.Singleline);` 
```

之后我设法找到每个课程名称的偏移量

获取每个课程名称的偏移量后，我将 Html 拆分为段，其中段的开头是课程名称之前的偏移量，结尾是 NEXT 课程名称之前的偏移量，或文件的结尾该课程的案例是html中的最后一个。

对于那些感兴趣的人，[这是我的实现代码](http://pastebin.com/XDN6dQRw)

我希望这可以帮助像我这样尝试解析非格式良好的 html 的人。

现在，对于那些说正则表达式无法执行此任务的人，请花点时间阅读我的代码，它可能会改变您的想法。

# php - 正则表达式中的字符集在正面向后看，有可能吗？

> ID：11689496
> 
> 赞同：3
> 
> 时间：2012-07-26T21:14:00.737
> 
> 标签：php, regex, directory-structure, url

我只需要在“listing”之后匹配“name”，当然这些词可以是任何 url 目录或页面。

mydomain.com/listing/name

所以我唯一可以“REGuest”（请求）的就是那里有一些父目录。换句话说，我想匹配“位置”，即域之后的第二个。

我正在尝试类似的东西

```
(?<=mydomain\.com/[^/\?&]+/)[^/\?&]+(?:/)? 
```

但是字符集在正向后视中不起作用，至少它被设置为只匹配一个字符。一旦我尝试匹配一个以外的内容（例如用 +、? 或 * 修改它），它就会停止工作。

我显然错过了积极的lookbehind语法，它似乎不适合我正在尝试的东西。

如何匹配第二级文件名？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:13:31.707

[正则表达式.info](http://www.regular-expressions.info/lookaround.html#limitbehind)指出

> 坏消息是大多数正则表达式风格不允许您在后视中使用任何正则表达式，因为它们不能向后应用正则表达式。因此，正则表达式引擎需要能够计算出在检查lookbehind之前要退后多少步......

（进一步阅读，他们甚至提到了 Perl、Python 和 Java。）

我认为量词可能是问题所在。我在 stackoverflow 上找到[了这个](https://stackoverflow.com/questions/9030305/regular-expression-lookbehind-doesnt-work-with-quantifiers-or)并短暂地飞过它。

难道不可能只匹配整个路径，并使用一个组作为二级文件名：

```
mydomain\.com\/[^\/\?&]+\/([^\/\?&]+)(?:\/)? 
```

（注意：我不得不为我的测试逃避 / ......）

结果将是这样的：

```
Array
(
    [0] => mydomain.com/listing/name
    [1] => name
) 
```

现在，因为我不知道您的问题的上下文，我只是假设您能够对结果进行后处理并从结果中获取组 1（索引 1）。如果没有，我很遗憾不知道......

# php - PHP GD：使粉红色透明（base64）

> ID：11689506
> 
> 赞同：0
> 
> 时间：2012-07-27T14:08:59.730
> 
> 标签：php, image, colors, base64, transparent

好的。我的脚本允许人们通过 JavaScript 在 base64 中上传图像。一切都很顺利，除了一件事。图像可以有粉红色 (255,0,255) 粉红色背景。该粉红色背景应转换为透明（在插入数据库之前）。但是当我将它保存在我的数据库中（在 base64 中）时，背景仍然是粉红色的。

$tile 是图像的 base64（显然）。

```
function imagetobase64 ($img)
{
    if (!is_resource($img))
        return "";

    ob_start();
    imagepng($img);
    $content = ob_get_contents();
    ob_end_clean();
    return base64_encode($content);
}

$tile = str_replace(' ', '+', $tile); // Because spaces in the JavaScript should be + in PHP

$img = imagecreatefromstring(base64_decode($tile));
imagesavealpha($img, true);
$pink = imagecolorallocate($img, 255, 0, 255);
imagecolortransparent($img, $pink);
$tile = imagetobase64($img);
imagedestroy($img);
// Here the query etc. 
```

如果需要，请随时询问更多详细信息。

# apache - 子域指向某些文件夹

> ID：11689509
> 
> 赞同：0
> 
> 时间：2012-07-27T14:09:03.100
> 
> 标签：apache, subdomain, vhosts

我的域名将所有子域指向服务器：

domain.com 客户端.domain.com

我正在尝试考虑一个虚拟主机配置，它会自动获取子域的第一部分并将此文件夹设置为文档根目录，例如：

client.domain.com => /path/to/vhost/domain.com/client

client2.domain.com => /path/to/vhost/domain.com/client2

等等

有谁知道这是否可能？

谢谢，

伊恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:33:23.967

查看[http://httpd.apache.org/docs/2.0/misc/rewriteguide.html](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html) - 特别是虚拟用户主机示例。

# django - 如何使用 django 在模板中显示默认值？

> ID：11689510
> 
> 赞同：1
> 
> 时间：2012-07-27T14:09:02.430
> 
> 标签：django, templates, view, model

我正在使用模型表单来扩展用户的个人资料。我希望以前保存的数据在用户决定重写之前显示在表单中。如何使用 django 在模板中执行此操作？

# 模型

```
class UserProfile(models.Model):
    user = models.ForeignKey(User, primary_key=True)
    quote = models.CharField('About', max_length =  200, null=True, blank=True)
    website = models.URLField('Personal website/blog', null=True, blank=True)

class UserProfileForm(ModelForm):
    class Meta:
        model = UserProfile
        fields = ('quote', 'website')
        widgets = {
            'quote': Textarea(attrs={'cols': 18, 'rows': 7, 'style': "width: 300px;"}),
        } 
```

# 看法

```
@login_required 
def user_profile(request):
    user = User.objects.get(pk=request.user.id)
    if request.method == 'POST':
        upform = UserProfileForm(request.POST)
        if upform.is_valid():
            up = upform.save(commit=False)
            up.user = request.user
            up.save()
            return HttpResponseRedirect('/accounts/profile')
    else:
        upform = UserProfileForm()
    return render_to_response('reserve/templates/edit_profile.html', locals(), context_instance=RequestContext(request)) 
```

# 模板

```
{{ upform.as_p}} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T14:26:31.150

当你实例化它时传递`instance=user.get_profile()`给它。`UserProfileForm`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:57:46.253

如果您传递一个，则表单需要一个 UserProfile 实例，而不是用户实例。

您有两个（或更多）选项可以将 UserProfile 实例传递给您的表单。

**选项 1 get_or_create**

您可以使用 get_or_create。它获取配置文件，如果它不存在，它会创建并保存一个。 [https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.get_or_create](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.get_or_create)

```
userprofile=UserProfile.objects.get_or_create(user=request.user) 
```

然后将 userprofile 传递给 UserProfileForm 的两个调用

```
upform = UserProfileForm(request.POST, instance=userprofile)
upform = UserProfileForm(instance=userprofile) 
```

**选项 2 get_profile()**

有几件事要检查，如果你想使用 user.get_profile() 你需要确保你的用户配置文件设置正确，如下所示： [https ://docs.djangoproject.com/en/dev/topics/auth/ #storing-additional-information-about-users](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)

主要是在您设置的 settings.py 中：

```
AUTH_PROFILE_MODULE = "account.UserProfile" 
```

这假设 UserProfile 是在名为“ *account* ”的应用程序中定义的，如果它在 MyApp 中：

```
AUTH_PROFILE_MODULE = "MyApp.UserProfile" 
```

那么你可以使用（如前所述）：

```
upform = UserProfileForm(request.POST, instance=request.user.get_profile())
upform = UserProfileForm(instance= instance=request.user.get_profile()) 
```

尽管您需要处理用户尚未创建配置文件的实例，但这里的 get_profile() 会失败，UserProfile.objects.get 也会失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T22:36:36.737

传入`instance=profile`您实例化表单的两个地方。为了使这更容易一点，您可以创建一个 dict 并使用`**`关键字扩展运算符：

```
@login_required 
def user_profile(request):
    user = User.objects.get(pk=request.user.id)
    form_kwargs = {}
    try:
        form_kwargs['instance'] = user.get_profile()
    except Profile.DoesNotExist(): # change Profile to whatever your profile model is named
        pass

    if request.method == 'POST':
        upform = UserProfileForm(request.POST, **form_kwargs)
        if upform.is_valid():
            up = upform.save(commit=False)
            up.user = request.user
            up.save()
            return HttpResponseRedirect('/accounts/profile')
    else:
        upform = UserProfileForm(**form_kwargs)
    return render_to_response('reserve/templates/edit_profile.html', locals(), context_instance=RequestContext(request)) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-30T17:58:59.543

我认为您只是将用户作为实例传递给表单：

```
@login_required 
...
    else:
        upform = UserProfileForm(instance=user)
... 
```

然后，您可能需要手动构建您的模板：

所以

```
Quote: {{ upform.quote }} 
```

应该输出已经“保存”的报价。

# android - 通过 ADB shell 传输二进制数据（即使用 tar 进行快速文件传输）

> ID：11689511
> 
> 赞同：15
> 
> 时间：2012-07-27T14:09:03.803
> 
> 标签：android, adb

我一直在尝试使用类似的东西将文件从我的 android 设备移动到我的 osx 机器：`adb shell tar -c directory_to_copy | tar -x`. 似乎远程 tar 正在工作，但文件在某处被损坏。在玩了一些之后，我发现：

*   似乎 adb shell 命令将 LF 转换为 CRLF：

    ```
    % adb shell 'cd /mnt/sdcard;echo hi>a.bin'
    % adb shell 'cd /mnt/sdcard;cat a.bin' | hexdump -C
    00000000  68 69 0d 0a                                       |hi..|
    00000004
    % adb pull /mnt/sdcard/a.bin
    0 KB/s (3 bytes in 0.457s)
    % hexdump -C a.bin
    00000000  68 69 0a                                          |hi.|
    00000003 
    ```

*   它看起来是服务器或守护进程导致的，而不是客户端（参见 len=4）：

    ```
    % ADB_TRACE=1 adb shell 'cd /mnt/sdcard;cat a.bin'
    [... snip ...]
    system/core/adb/commandline.c::read_and_dump():read_and_dump(): post adb_read(fd=3): len=4
    [... snip ...] 
    ```

我猜这个守护进程正在为 Windows 用户在 shell 命令中进行这种翻译。

我的问题是：

1.  什么？（这是为了什么目的？）
2.  有没有办法告诉它（adbd？）不要那样做？
3.  谁能想到任何创造性的方法来规避它（我考虑过base64编码数据，但我更愿意避免这种开销。此外，创建本地文件不是一种选择，因为我的文件系统已经很满了）

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-30T09:28:05.413

adb 不是故意这样做的，但是当你给它一个运行命令时，它还不够聪明地避免分配一个终端；android 端的终端正在处理字节。代替

```
adb shell 'cd /mnt/sdcard;cat a.bin' | hexdump -C 
```

尝试做

```
adb shell 'stty raw; cd /mnt/sdcard;cat a.bin' | hexdump -C 
```

这指示终端设备根本不要破坏字节，而是让它们通过。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-07-10T13:30:35.983

使用`adb exec-out <command>`而不是`adb shell`.

例子`adb exec-out cat /data/myfile.txt > localfile.txt`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-09-10T18:19:54.623

第一个答案中提到的“stty”技巧通常不起作用。

对于将输出通过管道传输到主机端的 hexdump 命令可能没问题。但是，对于 tar （如原始问题的主题中所述）和许多其他可以接受二进制流输入的命令，这不起作用。正如 Fabian Zeindl 正确指出的那样，使用 'adb exec-out ...' 是正确的方法。

通过 ADB 传输 tar 输出的一些示例：

1.  这里假设 tar 可执行文件位于您在 Android 上的路径中：

    *   `adb exec-out 'cd /sdcard; tar -cf - DCIM/' > DCIM.tar`
    *   `adb exec-out 'cd /sdcard; tar -cf - DCIM/' | tar -tvf -`
2.  一些更复杂的例子涉及压缩和busybox的使用：

    *   `adb exec-out 'cd /sdcard; /system/xbin/extras/busybox tar -czf - DCIM/' > DCIM.tgz`
    *   `adb exec-out 'cd /sdcard; GZIP="-9" /system/xbin/extras/busybox tar -czf - DCIM/' | tar -tvzf -`
    *   `adb exec-out 'cd /sdcard; BGZIP2="-9" /system/xbin/extras/busybox tar -cjf - DCIM/' > DCIM.tar.bz2`

# javascript - 被列出的不可枚举的属性所遮蔽的属性？

> ID：11689514
> 
> 赞同：0
> 
> 时间：2012-07-27T14:09:16.297
> 
> 标签：javascript, inheritance, prototype

我想知道以下内容。给出此代码：

```
function displayprops(obj, name) {
    console.log(name+":");
    for(var prop in obj)
        console.log(prop + ": " + obj[prop]);
}

var first = {prop: {}};
displayprops(first, "first"); // "prop: [object Object]"

var second = Object.create(first);
Object.defineProperty(second,"prop",{
     enumerable:false
});
displayprops(second, "second"); // "prop: undefined" 
```

（[在 jsbin 演示](http://jsbin.com/oqevam/4/edit)）

创建的所有对象`first`显然都应该继承该 `prop`属性。

但是为什么创建的对象在迭代它时`second`仍然显示在他的属性中，请注意它的值是. `prop``undefined`

我希望在将可枚举描述符设置为 false 时，从该原型继承的对象不应再显示这些属性

**编辑**：当我使用方法扩展 Object.prototype （无论出于何种原因）并将方法可枚举描述符设置为 false 时，它​​的行为符合预期

有人可以解释一下吗，也许我想错了方向

谢谢你的答案=）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:18:03.800

这是 V8 JavaScript 引擎中的一个错误。我以前遇到过。即使被不可枚举的属性遮蔽，原型链中的可枚举属性也包括在内。

已经有一个错误报告。~~如果我能再找到它，我会在这里发布。~~这里是...

[问题 705：不可枚举属性无法从 for-in 隐藏继承的可枚举属性](http://code.google.com/p/v8/issues/detail?id=705)

在 Firefox 中测试它，你会得到预期的结果。

# objective-c - 如何为 UIImageView 随机器实现滑动手势

> ID：11689519
> 
> 赞同：3
> 
> 时间：2012-07-27T14:09:33.337
> 
> 标签：objective-c, uiimageview, swipe-gesture

我一直在浏览大量关于此的教程和问题，但似乎找不到我要找的东西，我觉得我只是错过了一个简单的步骤。我还在学习绳索所以忍耐和我一起做这个..

我正在 xcode 4.3.3 上制作图像随机化器，并且我已经能够使用按钮来随机化图像，但我希望它能够响应滑动手势。整个窗口都被 UIImageView 对象覆盖，所以我只想要一个通过滑动随机化图像的应用程序，所以我希望能够滑动 UIImageview。这就是我所拥有的：

在我的 .h 文件中：

```
@interface ViewController : UIViewController <UIGestureRecognizerDelegate> {
IBOutlet UIImageView *quotePage;

}

-(IBAction)random;
-(void)screenWasSwiped;

@end 
```

在我的 .m 文件中：

```
@interface ViewController ()

@end

@implementation ViewController

-(IBAction)random {
int image = rand() % 4;
switch (image) {
    case 0:
        quotePage.image = [UIImage imageNamed:@"Quote1.png"];
        break;
    case 1:
        quotePage.image = [UIImage imageNamed:@"Quote2.png"];
        break;
    case 2:
        quotePage.image = [UIImage imageNamed:@"Quote3.png"];
        break;
    case 3:
        quotePage.image = [UIImage imageNamed:@"Quote4.png"];
        break;
    default:
        break;
}
}

-(void)viewDidLoad {
UISwipeGestureRecognizer *swipeLeft = [[UISwipeGestureRecognizer alloc]         initWithTarget:self action:@selector(screenWasSwiped)];
swipeLeft.numberOfTouchesRequired = 1;
swipeLeft.direction=UISwipeGestureRecognizerDirectionLeft;
[self.view addGestureRecognizer:swipeLeft];
quotePage.userInteractionEnabled = YES;

}

@end 
```

我认为可以将“随机”动作与情节提要中的滑动手势联系起来，但它没有奏效。线程 1 消息是：

2012-07-27 15:04:32.012 QuoteRandom[1057:c07]-[ViewController screenWasSwiped]：无法识别的选择器发送到实例 0x6868210

所以我认为我必须将“screenWasSwiped”连接到图像随机化器，并将滑动手势应用于 UIImageView，但我很难弄清楚。我将不胜感激任何指导！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:20:16.563

您可以`-(IBAction)random`在`UISwipeGestureRecognizer`将它的方法更改为时调用您的方法`init`：

```
UISwipeGestureRecognizer *swipeLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(random)]; 
```

这样，每次滑动都会得到一个新的随机图像。

# javascript - 我应该如何对这个简单的 javascript 动画进行逆向工程？

> ID：11689521
> 
> 赞同：0
> 
> 时间：2012-07-27T14:09:33.943
> 
> 标签：javascript, jquery, jquery-ui, graph, decompiling

我遇到了[这篇 Slate 文章](http://www.slate.com/articles/sports/fivering_circus/2012/07/olympics_interactive_how_would_the_champs_of_bygone_olympics_fare_against_today_s_best_sprinters_jumpers_throwers_and_swimmers_.html?fb_action_ids=10101816136988733&fb_source=other_multiline&action_object_map=%7B%2210101816136988733%22:10151043648722767%7D&action_type_map=%7B%2210101816136988733%22%3a%22og.likes%22%7D&action_ref_map=%5B%5D)，它以一种新颖有趣的方式呈现数据。我如何对网站进行逆向工程，以便我可以学习并可能自己模仿该技术。

为了保持对未来网站的建设性，请描述一般步骤以及我需要哪些工具来有效地将代码分解为可管理的块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:13:44.143

我不知道除了网络浏览器和查看源代码之外，您还需要很多工具。您可能希望将其中的一些提取到您自己的 html/javascript 文件中进行测试，以确保您拥有所有相关代码 - 不确定您可能还需要什么。我认为这是很多试验和错误。

在这种特殊情况下，查看源代码会很容易地为您提供答案——它根本不会被混淆。查看源代码并查找

```
<!--**********************PASTE THIS INTO RENDER HTML************* --> 
```

就在其下方，它们包含与比赛相关的[javascript 文件](http://img.slate.com/features/2012/athleteRace/race.js)，并且它们具有其 javascript 使用的 html 结构。

# jquery - jquery 可以告诉我 .cycle 停止时显示哪个图像吗？

> ID：11689522
> 
> 赞同：1
> 
> 时间：2012-07-27T14:09:37.517
> 
> 标签：jquery

我在一个 div 中有 5 个图像，我正在使用 jquery 的 .cycle 插件循环浏览它们。jquery 有没有办法告诉我循环停止在哪个图像上？

这是我的html...

```
 <div id="slot1">
        <li id="reel1a"><img src="reel1a.jpg" /></li>
        <li id="reel1b"><img src="reel1b.jpg" /></li>
        <li id="reel1c"><img src="reel1c.jpg" /></li>
        <li id="reel1d"><img src="reel1d.jpg" /></li>
        <li id="reel1e"><img src="reel1e.jpg" /></li>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:09:27.307

你可以通过[jQuery 的 ":visible" 选择器](http://api.jquery.com/visible-selector/)找到答案。文档说：

> 在隐藏元素的动画期间，该元素被认为是可见的，直到动画结束。在显示元素的动画期间，该元素被认为在动画开始时可见。

对于您的示例 HTML，您希望使用 Torr3nt 评论中的函数调用：

```
$('#slot1').index($(this).children().is(':visible')); 
```

这将返回当前可见元素的位置（参见index() 文档[的“返回值”部分](http://api.jquery.com/index/)）。

# printing - 在 GW Basic 中打印到除 LPT1 之外的其他内容

> ID：11689523
> 
> 赞同：1
> 
> 时间：2012-07-27T14:09:41.653
> 
> 标签：printing, gw-basic

我有一个用 GWBASIC 编写的软件，目前设置为仅在本地打印到 LPT1。有人要求将这个软件打印到一些网络打印机上。

我对 GWBASIC 没有经验（但对其他 BASIC 方言有一些经验），但我想我可能能够将网络打印机欺骗*为*LPT1，因此 GW 应用程序可以保持不变，我只需要编写外部部分.

这如何实现（最好在 C# 中）？

或者，更好的是，如何在 GWBASIC 中对非本地打印机进行打印作业？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:19:15.223

我一直在寻找在 GWBASIC 中执行此操作的方法，但将执行以下操作：

*   GWBASIC 应用程序将写入文本文件而不是写入 LPT1
*   然后，GWBASIC 应用程序将使用 SHELL 命令调用*可以*执行网络打印作业的 C# 应用程序，并将在上一步中构建的文本文件作为其参数

# php - PHP中的小数点

> ID：11689525
> 
> 赞同：0
> 
> 时间：2012-07-27T14:09:58.173
> 
> 标签：php, localization

> **可能重复：**
> [php 如何获取给定语言环境的当前小数/千位分隔符](https://stackoverflow.com/questions/4944245/php-how-to-get-the-current-decimal-thousand-separator-for-a-given-locale)

如果我知道语言/国家代码，我可以在 PHP 中获得小数点吗？

或者是否有包含此信息的公共数据库/csv/规范？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:13:39.323

看看[localeconv()](http://us2.php.net/manual/en/function.localeconv.php)。你可以这样做：

```
$locale_info = localeconv();
echo $locale_info['decimal_point']; 
```

# html - 两个单选按钮同时选择

> ID：11689530
> 
> 赞同：1
> 
> 时间：2012-07-27T14:10:17.780
> 
> 标签：html, jsp, struts

我在`div`jsp 页面中添加了一个单选按钮。但是新添加的单选按钮总是选择，当我点击第二个单选按钮时，它也会选择。是否有任何脚本可以写入。

```
<div style="padding-left:15px">
        <div>
             Entry Mode Code was:
        </div>
        <div style="padding-left:30px">
            <div>
                <html:radio name="caseForm" property="questionnaire.RP0062.posEntryModeCd" value="A" styleId="posEntryModeCda"> 05 - Chip Card read (data is reliable)</html:radio>  
            </div>          
            <div>
                <html:radio name="caseForm" property="questionnaire.RP2462.posEntryModeCd" value="B"> 90 - Magnetic Stripe Terminal and the full unaltered contents of the selected track is included</html:radio>
            </div>
            <div>
                <html:radio name="caseForm" property="questionnaire.RP2462.posEntryModeCd" value="C" > Not Applicable</html:radio>
            </div>          
        </div>
    </div> 
```

附上图片： ![在此处输入图像描述](../Images/ddc91d9beb5619a3a0719b8941f145e7.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T14:58:34.277

`property`您应该对所有三个单选按钮的属性具有相同的值，即`property="questionnaire.RP2462.posEntryModeCd"`所有三个：

```
<div>
    <html:radio name="caseForm" property="questionnaire.RP2462.posEntryModeCd" value="A" styleId="posEntryModeCda"> 05 - Chip Card read (data is reliable)</html:radio>  
</div>          
<div>
    <html:radio name="caseForm" property="questionnaire.RP2462.posEntryModeCd" value="B"> 90 - Magnetic Stripe Terminal and the full unaltered contents of the selected track is included</html:radio>
</div>
<div>
    <html:radio name="caseForm" property="questionnaire.RP2462.posEntryModeCd" value="C" > Not Applicable</html:radio>
</div> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:56:15.197

我输入了错误的名称，而不是下面给出的..

`<html:radio name="caseForm" property="questionnaire.RP0062.posEntryModeCd" value="A" styleId="posEntryModeCda"> 05 - Chip Card read (data is reliable)</html:radio> </div>`

在上面我应该给`questionnaire.RP2462.posEntryModeCd`下面的单选按钮也有。然后只有它在工作。

谢谢..

# iphone - Caanimation“位置”打破了自动调整大小

> ID：11689536
> 
> 赞同：0
> 
> 时间：2012-07-27T14:10:48.123
> 
> 标签：iphone, objective-c, ios, core-animation, core-graphics

我对 CAAnimation 和 AutoresizingMask 有疑问。有一个带有 autoresizingMask 的视图

```
contentView.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleRightMargin; 
```

当我旋转设备时，它总是在它的 parentView 的中心。但是如果我将一些 CoreAnimation 应用到它的位置，它就会停止自动调整大小。如果我为其他属性（alpha 或比例）设置动画，则自动旋转效果很好。

“位置”键动画有什么问题？

# c++ - 使用 std::min_element 编译错误

> ID：11689544
> 
> 赞同：0
> 
> 时间：2012-07-27T14:11:09.287
> 
> 标签：c++, stl

当我使用 std::min_element 时，我一直在努力解决 C2440 编译错误：

```
struct compare_x_coordinate 
{
  bool operator() (Geocoordinatefloat i,Geocoordinatefloat j) { return i.x_<j.x_; }
} mycompare;

vector<Geocoordinatefloat>::iterator it_min;
vector<Geocoordinatefloat> ptArray;
ptArray.push_back(...)
ptArray.push_back(...)
...

it_min = std::min_element(ptArray.begin(),ptArray.end(),mycompare); // Line 475 Compiling error C2440

std::min_element(ptArray.begin(),ptArray.end(),mycompare);           // Right 
```

VC2010的编译错误是：

```
Error   19  error C2440: '=' : cannot convert from 'const geometric::Geocoordinate<T> ' to 'geometric::Geocoordinate<T> *'  c:\research\projectivecorrection\code\iris\geometriccorrection\src\correspondingpoints\cp_hybrid.cpp    475 
```

Geocoordinatefloat 确实是一个复杂的类，如果我用一种非常简单的方式重新定义类 Geocoordinatefloat：</p>

```
class Geocoordinatefloat
{
public:
  int x;
  int y;
  float Func()
  {
      return 1;
  };
  virtual void Fun2()
  {
      cout<<"hello"<<endl;
  };

}; 
```

它会起作用的。但是对于我的程序来说，改变 Geocoordinatefloat 类的定义是不可能的。我想知道 Geocoordinatefloat 中的哪个元素导致编译错误。抱歉，我不能给出 Geocoordinatefloat 的定义，因为它是一个非常大的类。感谢您的任何建议。

编辑：根据请求，我制作了一个简单的程序来重复错误：

```
#include <iostream>
#include <vld.h> 
#include <map>
#include <set>
#include <iostream>
#include <algorithm>
#include <vector>

using namespace std;

template <typename T>
class  Geocoordinate 
{
public:
    Geocoordinate() {};
    ~Geocoordinate() {};
     T x_;
     T y_;
 };

typedef Geocoordinate<float> Geocoordinatefloat;
typedef vector<Geocoordinatefloat> PointArray;

struct compare_x_coordinate 
{
    bool operator() (const Geocoordinatefloat &i,const Geocoordinatefloat &j) { return i.x_<j.x_; }
} mycompare;

void find_left_right_eignpoints(const PointArray &ptArray, 
        Geocoordinatefloat &left)
{
        vector<float> x_cord;
        PointArray::iterator it_min;
        std::min_element(ptArray.begin(),ptArray.end(),mycompare); 

        /******************************************************************************************
        // Error    1   error C2440: '=' : cannot convert from 'const Geocoordinate<T> 
        // ' to 'Geocoordinate<T> *'    c:\main.cpp 41
        */
        it_min = std::min_element(ptArray.begin(),ptArray.end(),mycompare);  // error code is here

        int index_min = it_min-ptArray.begin();
        left    = ptArray[index_min];

}

int  main(int argc, char* argv[])
{

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T15:12:11.850

问题`ptArray`是`const`。这意味着`begin()`and `end()`return `const_iterator`; 其专业化`min_element`也将它们作为论据。

A`const_iterator`不能分配给 type 的变量`iterator`，因此您需要将类型更改为`it_min`to `PointArray::const_iterator`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:41:35.300

您不需要类，并且需要使参数可绑定到 const 引用。像这样的东西：

```
template <typename T>
bool compare_x(Geocoordinate<T> const & a, Geocoordinate<T> const & b)
{
    return a.x_ < b.x_;
} 
```

用法：

```
std::vector<Geocoordinatefloat>::iterator it_min =
    std::min_element(ptArray.begin(), ptArray.end(), compare_x<float>); 
```

# domain-driven-design - 领域驱动设计：聚合对其成员的禁止引用

> ID：11689546
> 
> 赞同：0
> 
> 时间：2012-07-27T14:11:16.267
> 
> 标签：domain-driven-design, aggregate

遵循 DDD 规则，聚合不应允许外部对象保存对其成员的引用。

如果聚合“发票”正在封装发票及其详细信息。汇总发票应如何提供信息，以便我可以显示详细信息或生成报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:10:00.310

在 DDD 的上下文中，持有引用意味着某种数据库引用。这并不意味着一旦从数据库中加载了聚合，就没有任何东西可以获取对其任何成员的运行时引用。这个想法是与聚合成员的所有交互都经过聚合，从而实现其作为一致性和完整性边界的作用。然而，出于显示和查询的目的，我更喜欢[读取模型模式](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)，其中查询特定的类用于表示查询数据，并且与用于表示聚合的类不同。这允许聚合专注于它的行为，而不用关心它可能是如何查询的。如果使用 CQRS +[事件溯源](http://codebetter.com/gregyoung/2010/02/20/why-use-event-sourcing/)，那么你聚合没有公共数据成员，只有行为方法。在这种情况下，查询被实现为基于聚合生成的事件的预测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T01:53:42.633

我允许客户持有对值对象的引用。我无所畏惧地返回 VO。我还将 VO 传递给聚合根上的公共方法。值对象是不可变的，因此不存在违反聚合一致性边界的外部状态更改的危险。

# java - java中字符的范围

> ID：11689549
> 
> 赞同：4
> 
> 时间：2012-07-27T14:11:23.927
> 
> 标签：java

以下 Java 代码行产生错误。
即使java中的数据类型是签名的？

```
 char c = -128; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-27T14:13:07.940

Char 是一种未在 java 中签名的数据类型。它是一个 16 位无符号整数。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-27T14:13:36.707

[直接来自Java 数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)的 Oracle 教程。

> `char`：`char`数据类型是单个 16 位 Unicode 字符。它的最小值为 `'\u0000'`（或 0），最大值为`'\uffff'`（或 65,535，包括在内）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-27T14:14:27.327

这是因为 -128 是整数。你需要转换为char。请注意 char 是无符号类型，所以在

```
 char c = (char) -1;
    System.out.print(Integer.valueOf(c).toString()); 
```

你会得到 **65535**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T14:14:02.433

它的最小值为`'\u0000' (or 0)`，最大值为`'\uffff' (or 65,535 inclusive)`。

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-15T19:10:12.213

根据 Oracle Java[文档](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

> char：char 数据类型是单个 16 位 Unicode 字符。它的最小值为“\u0000”（或 0），最大值为“\uffff”（或 65,535，包括在内）。

因此，您不能真正将负值分配给`char`并将`char c = -128`导致错误。
当您尝试将负值分配给 char 并对其进行类型转换时，它将将该值旋转到另一个（最大）端。

```
char c;
c = (char) 65;    // 'A'
c = (char) -100;  // 'ﾜ' and it results in 65,535(inclusive) - 100 = (char) 65,436
c = (char) 65436; // 'ﾜ'

int i;
i = (char) 65;    // 65
i = (char) -1;    // 65535 : notice how the char value cycles through the other end
i = (char) -100;  // 65436 : same as (char) -100\. Here, int returns 65,436. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T16:39:49.070

如果您发现自己对基元的最小值或最大值感到困惑，请找到它们的等效对象并查找 MIN_VALUE 或 MAX_VALUE 常量。例如：

[http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#MIN_VALUE](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#MIN_VALUE)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-27T14:14:39.903

投射它：

```
char c = (char) -128; 
```

尽管这可能不会像您期望的那样表现。也许一个字节会更好？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-19T23:21:52.030

char 保存 16 位无符号值。我们可以将整数分配给 char，但正数最多为 2 的 16 次方，即 65536-1，因为我们从 0 开始。

如果我们需要分配-ve 值，那么一些位将是松散的，我们将需要进行类型转换。在这种情况下，编译器会将符号位与实际值一起存储，最后一位将被丢弃。char c=(char) -128 不会给出编译错误但你会得到荒谬的结果

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-06T04:54:09.290

您还可以使用以下方法检查 int 值是否作为字符代码有效`Character.isValidCodePoint(int codePoint)`：

```
boolean isValid = Character.isValidCodePoint(-128); // false 
```

# asp-classic - 使用记录集批量插入数据并快速返回新 ID

> ID：11689550
> 
> 赞同：0
> 
> 时间：2012-07-27T14:11:25.207
> 
> 标签：asp-classic, ado, adodb, recordset

如何批量插入多条记录并快速获取每条记录的最后插入 ID（经典 asp/ado）？

我试过这个，但它每秒只能运行大约 3 行，这是个笑话。

```
rs.Open "myTable", cn,adOpenKeyset, adLockOptimistic
do while NOT rs.EOF   
    rs.AddNew        
    rs("text") = myFunction() ' returns some text.
    rs.update
    lastid = rs("id") ' get new id and so something
loop 
```

使用普通的 adOpenForwardOnly（不返回最后插入的 ID），它的运行速度提高了大约 1000 倍。

任何人都可以建议解决上述问题或替代解决方案吗？我必须在代码中执行此操作，而不是直接将 sql insert into ... select() 等，因为我需要对文本运行处理函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:17:21.230

快速执行此操作的方法是在存储过程中使用批量插入。您最终会运行查询以取回所有 ID，但它减少了主要瓶颈：访问数据库的次数。

# java - 等价于 Java 中用于比较字节数组的 strcmp()

> ID：11689553
> 
> 赞同：2
> 
> 时间：2012-07-27T14:11:34.207
> 
> 标签：java, android

我使用一个字节数组来适应 1024 个字节。问题是，在我的代码中的不同时间，我只需要使用其中的一些位。在 C 语言中，我使用了...

```
byte buff[] = read();
strcmp( buff, "CMD\r\n" ); 
```

这将忽略数组中所有后面的字节，只比较前 5 个字节。有没有一种简单的方法可以在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T14:15:11.180

您可以将字节数组与[Arrays.equals(byte[], byte[])](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#equals%28byte%5B%5D,%20byte%5B%5D%29)进行比较。

```
byte[] buff = ...;
boolean isEqual = Arrays.equals( buff, 
                    "CMD\r\n".getBytes( Charset.forName( "US-ASCII" ))); 
```

**编辑**：我错过了你的字节数组是 1024 字节。

一种选择是比较字节数组的一部分：

```
byte[] buff = ...;
final byte[] CMD_BYTES = "CMD\r\n".getBytes( Charset.forName( "US-ASCII" ));
boolean isEqual = Arrays.equals( Arrays.copyOf( buff, CND_BYTES.length()),
                    CMD_BYTES ); 
```

另一种选择是将字节数组转换为字符串，允许使用类似于 C++ 的表达式。

```
byte[] buff = ...;
int buffLen = ...;
String command = new String( buff, 0, buffLen, Charset.forName("US-ASCII"));
int cmp = command.compareTo( "CMD\r\n"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T14:15:54.040

好吧，自己写很简单：

```
public static boolean truncatedEquals(byte[] x, byte[] y) {
    int upperBound = Math.min(x.length, y.length);
    for (int i = 0; i < upperBound; i++) {
        if (x[i] != y[i]) {
            return false;
        }
    }
    return true;
} 
```

我不相信Java为此内置了任何东西。

请注意，我将输入设为两个`byte[]`- 字节和字符串非常不同，应该区别对待。

# javascript - smarty和谷歌地图

> ID：11689555
> 
> 赞同：0
> 
> 时间：2012-07-27T14:11:41.507
> 
> 标签：javascript, foreach, smarty

我正在使用 Smarty，我想使用谷歌地图，并在其上动态放置标记，我得到了以下 cod

```
{literal}

 <script type="text/javascript">
    //<![CDATA[

    if (GBrowserIsCompatible()) {
      // ==== first part of the select box ===
      var select_html = '<select onChange="handleSelected(this)">' +
                        '<option selected> - Select a location - <\/option>';
      // =====================================
      var gmarkers = [];
      var htmls = [];
      var i = 0;
      var rozmiar = new google.maps.Size(12,20);  
                 var punkt_startowy = new google.maps.Point(0,0);  
                var punkt_zaczepienia = new google.maps.Point(0,0);  
                 var map;
      var n=0;
      var side_bar_html = "";

      var icon = new GIcon();
      icon.image = "http://labs.google.com/ridefinder/images/mm_20_red.png";
      icon.shadow = "http://labs.google.com/ridefinder/images/mm_20_shadow.png";
      icon.iconSize = new GSize(12, 20);
      icon.shadowSize = new GSize(22, 20);
      icon.iconAnchor = new GPoint(6, 20);
      icon.infoWindowAnchor = new GPoint(5, 1);      

      var ikona1 = new GIcon(icon,"http://labs.google.com/ridefinder/images/mm_20_blue.png"); 

      // A function to create the marker and set up the event window
      function createMarker(point,name,html,ikon) {
            var options = { 
draggable: true,
title: name,
icon: ikon,
clickable:true}
        var marker = new GMarker(point,options);
        GEvent.addListener(marker, "click", function() {
          marker.openInfoWindowHtml(html);
        });
        gmarkers[i] = marker;
        htmls[i] = html;

        // ======= Add the entry to the select box =====
        select_html += '<option> ' + name + '<\/option>';
        // ==========================================================

        i++;
        map.addOverlay(marker);
        return marker;
      }

      // ======= This function handles selections from the select box ====
      // === If the dummy entry is selected, the info window is closed ==
      function handleSelected(opt) {
        var i = opt.selectedIndex - 1; 
        if (i > -1) {
          GEvent.trigger(gmarkers[i],"click");
        }
        else {
          map.closeInfoWindow();
        }
      }

        var wspolrzedne = new google.maps.LatLng(51.730430542940184,19.62158203125);

      // create the map
      var map = new GMap2(document.getElementById("map"));
      map.addControl(new GLargeMapControl());
      map.addControl(new GMapTypeControl());
      map.setCenter(new GLatLng(51.730430542940184,19.62158203125), 6);

    {/literal}
    {foreach from=$znacznik key=key item=item}
    {foreach from=$item key=k item=v}
    //here
            createMarker(new GLatLng(51.730430542940184,19.62158203125),'{if $k == 'nazwa_obiektu'}{$v}{/if}','<div class="dymek"><div style="border-bottom:2px solid red;margin-bottom:6px;text-align:left;"><a href="http://nocleg-i.pl/{if $k == 'id'}{$v}{/if}/google_maps/" style="color:#2A86C7;font-size:13px;font-family:Verdana;font-weight:bold;">{if $k == 'nazwa_obiektu'}{$v}{/if}</a></div></strong><div style="float:left;width:125px;"><strong><a href="http://nocleg-i.pl/{if $k == 'id'}{$v}{/if}/google_maps/"><img src="http://nocleg-i.pl/uzytkownicy/miroslawa/mini_0.jpg" alt="" border="0" /></a></div>Miasto: {if $k == 'miasto'}{$v}{/if}</div></div><div style="clear:both;"></div>',ikona1);
    //here
    {/foreach}
    {/foreach}
    {literal}
            }else {
      alert("Sorry, the Google Maps API is not compatible with this browser");
    }

    // This Javascript is based on code provided by the
    // Community Church Javascript Team
    // http://www.bisphamchurch.org.uk/   
    // http://econym.org.uk/gmap/

    //]]>
    </script>   
    {/literal} 
```

标签之间（//这里）这些代码是问题

```
createMarker(new GLatLng(51.730430542940184,19.62158203125),'{if $k == 'nazwa_obiektu'}{$v}{/if}','<div class="dymek"><div style="border-bottom:2px solid red;margin-bottom:6px;text-align:left;"><a href="http://nocleg-i.pl/{if $k == 'id'}{$v}{/if}/google_maps/" style="color:#2A86C7;font-size:13px;font-family:Verdana;font-weight:bold;">{if $k == 'nazwa_obiektu'}{$v}{/if}</a></div></strong><div style="float:left;width:125px;"><strong><a href="http://nocleg-i.pl/{if $k == 'id'}{$v}{/if}/google_maps/"><img src="http://nocleg-i.pl/uzytkownicy/miroslawa/mini_0.jpg" alt="" border="0" /></a></div>Miasto: {if $k == 'miasto'}{$v}{/if}</div></div><div style="clear:both;"></div>',ikona1); 
```

它没有显示 ex 的变量。{if $k == 'nazwa_obiektu'}{$v}{/if} 什么也没显示，当我在其他地方执行 foreach 函数时，它会显示变量，但是如果我手动输入它会显示它有人知道如何解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:19:16.713

检查撇号的结构。试试这个或查看[{assign}](http://www.smarty.net/docs/en/language.function.assign.tpl)以预先设置 javascript 的值，并避免撇号混淆

```
createMarker(
    new GLatLng(51.730430542940184,19.62158203125),
    '{if $k == "nazwa_obiektu"}{$v}{/if}',
    '<div class="dymek"><div style="border-bottom:2px solid red;margin-bottom:6px;text-align:left;"><a href=\"http://nocleg-i.pl/{if $k == "id"}{$v}{/if}/google_maps/\" style=\"color:#2A86C7;font-size:13px;font-family:Verdana;font-weight:bold;\">{if $k == "nazwa_obiektu"}{$v}{/if}</a></div></strong><div style=\"float:left;width:125px;\"><strong><a href=\"http://nocleg-i.pl/{if $k == "id"}{$v}{/if}/google_maps/\"><img src=\"http://nocleg-i.pl/uzytkownicy/miroslawa/mini_0.jpg\" alt=\"\" border=\"0\" /></a></div>Miasto: {if $k == "miasto"}{$v}{/if}</div></div><div style=\"clear:both;\"></div>',
    ikona1
); 
```

或与 {assign}

```
{if $k == "nazwa_obiektu"}
    {assign var="nazwa_obiektu" value=$v}
{/if}

{if $k == "id"}
    {assign var="id" value=$v}
{/if}

{if $k == "miasto"}
    {assign var="miasto" value=$v}
{/if}

    createMarker(
        new GLatLng(51.730430542940184,19.62158203125),
        '{$nazwa_obiektu|default}',
        '<div class="dymek"><div style="border-bottom:2px solid red;margin-bottom:6px;text-align:left;"><a href=\"http://nocleg-i.pl/{$id|default}/google_maps/\" style=\"color:#2A86C7;font-size:13px;font-family:Verdana;font-weight:bold;\">{$nazwa_obiektu|default}</a></div></strong><div style=\"float:left;width:125px;\"><strong><a href=\"http://nocleg-i.pl/{$id|default}/google_maps/\"><img src=\"http://nocleg-i.pl/uzytkownicy/miroslawa/mini_0.jpg\" alt=\"\" border=\"0\" /></a></div>Miasto: {$miasto|default}</div></div><div style=\"clear:both;\"></div>',
        ikona1
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:15:31.530

你的问题是引号：

```
 "{if $k == 'nazwa_obiektu'}{$v}{/if}"
//^----------use double quotes--------^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:16:23.400

您需要转义引号，或使用不同的引号：

```
'{if $k == 'nazwa_obiektu'...}' 
```

应该

```
'{if $k == \'nazwa_obiektu\'...}' 
```

或者

```
'{if $k == "nazwa_obiektu"...}' 
```

# asp.net-mvc - 在 MVC 中创建特殊的 SEO 路由

> ID：11689556
> 
> 赞同：1
> 
> 时间：2012-07-27T14:11:41.027
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, asp.net-mvc-routing

我有以下实体：

> 公司 -> 博客 -> 文章 -> 评论

每个公司都有一个博客（或多个博客），里面有文章和评论。

URL 是这样创建的：

> {controller}/{Action}/{id}
> 
> 博客/编辑/1

我想把公司放在它前面，出于 SEO 的目的，它更合乎逻辑：

> SampleCo/博客/编辑

SampleCo 也可能有一个网站，其页面如下：

> SampleCo/myPage.vbhtml

解决这个问题的最佳方法是什么？谢谢您的帮助。

注意：我已经看到多租户的链接，但我不认为这将是必需的。我不需要单独的实例，因为一切都是外键（公司到博客，博客到文章，文章到评论）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:52:20.400

在 global.asax.cs 中，您应该能够将默认路由替换为：

```
 routes.MapRoute(
            "Default", // Route name
            "{company}/{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

唯一的问题是这适用于所有请求，因此如果您使用/需要站点其他部分的默认路由，则必须找到另一个解决方案。

在您的控制器中，您将拥有：

```
public class BlogController : Controller {
    public ActionResult Edit(String company, int id) {
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:15:16.317

相信我，您不想弄乱默认路由，这会让您头疼，您可以保留默认路由，并创建一个辅助路由，例如：

```
 routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            );

    routes.MapRoute(
                "SEORoute1", // Route name
                "{company}/{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            ); 
```

当您需要使用路线时，只需使用此助手：

```
@Html.RouteLink("LinkText","SEORoute1",new { action = "Index", controller = "Home", company = item.Name, id = item.Code }) 
```

# sql - 从 Sql Server 中删除所有视图

> ID：11689557
> 
> 赞同：35
> 
> 时间：2012-07-27T14:11:42.227
> 
> 标签：sql, sql-server-2008, sp-msforeachtable

通过在 SQL Server 中使用此语句：

```
EXEC sp_msforeachtable 'DROP TABLE ?' 
```

我知道可以一次删除所有表。

是否有类似的观点声明？我试过这个希望幸运：EXEC sp_msforeachview 'DROP VIEW ?' 但它不起作用！

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-07-27T14:16:38.720

在这里，不需要光标：

```
DECLARE @sql VARCHAR(MAX) = ''
        , @crlf VARCHAR(2) = CHAR(13) + CHAR(10) ;

SELECT @sql = @sql + 'DROP VIEW ' + QUOTENAME(SCHEMA_NAME(schema_id)) + '.' + QUOTENAME(v.name) +';' + @crlf
FROM   sys.views v

PRINT @sql;
EXEC(@sql); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-27T14:17:06.373

```
declare @SQL nvarchar(max)

set @SQL = 
  (
  select 'drop view '+name+'; '
  from sys.views
  for xml path('')
  )

exec (@SQL) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-11T14:25:14.310

我想要一个脚本以正确的依赖顺序删除模式绑定视图，并且我希望它在`sys.dm_sql_referencing_entities`不可用的 sql azure 上运行。我还希望能够在我实际运行它之前查看正在运行的 sql - 你不能用@RicNet 的答案中的脚本来做到这一点。所以我写了这个递归查询，它使用这里的其他答案作为基础

```
DECLARE @sql VARCHAR(MAX) = ''
DECLARE @crlf VARCHAR(2) = CHAR(13) + CHAR(10);

;WITH allviews as
( --just combining schema and name
SELECT
    object_id,
    '[' + SCHEMA_NAME(schema_id) + '].[' + name + ']' AS viewname
FROM sys.views
),
dependents AS
( 
SELECT
    referencing.viewname dependentname,
    referenced.viewname dependenton
FROM sys.sql_expression_dependencies r
    INNER JOIN allviews referencing
        ON referencing.object_id = r.referencing_id
    INNER JOIN allviews referenced
        ON referenced.object_id = r.referenced_id
)
,
nodependents 
AS
( 
SELECT
    viewname name
FROM allviews v
    LEFT JOIN dependents d
        ON d.dependentname = viewname
WHERE d.dependentname IS NULL
)
,hierarchy AS
( --the hierarchy recurses the dependencies
SELECT
    d.dependenton,
    d.dependentname,
    1 tier
FROM dependents d UNION ALL SELECT
    d.dependenton,
    d.dependentname,
    h.tier + 1
FROM dependents d
    INNER JOIN hierarchy h
        ON h.dependenton = d.dependentname
--best thing I could think to stop the recursion was to 
--stop when we reached an item with no dependents       
WHERE h.dependenton NOT IN (SELECT
    name
FROM nodependents)
    ),
combined as
( --need to add item with no dependents back in
SELECT
    0 tier,
    name
FROM nodependents UNION SELECT
    tier,
    dependentname
FROM hierarchy  
)
SELECT
    @sql = @sql + 'DROP VIEW ' + name + ';' + @crlf
FROM combined
GROUP BY name --need to group because of multiple dependency paths
ORDER BY MAX(tier) desc

PRINT @sql;

--commented out until I'm confident I want to run it
--EXEC(@sql) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-11-07T09:17:45.227

所有答案都没有考虑视图之间的约束。该脚本将考虑到这一点：

```
SET @schemeName = 'dbo'

SELECT @name = 
(SELECT TOP 1 o.[name] 
 FROM sysobjects o
 inner join sys.views v ON o.id = v.object_id
 WHERE SCHEMA_NAME(v.schema_id) =@schemeName AND o.[type] = 'V' AND o.category = 0 AND o.[name] NOT IN
 (
    SELECT  referenced_entity_name
    FROM sys.sql_expression_dependencies AS sed
    INNER JOIN sys.objects AS o ON sed.referencing_id = o.object_id
    WHERE referenced_schema_name = @schemeName
 )
 ORDER BY [name])

 WHILE @name IS NOT NULL
BEGIN
    SELECT @SQL = 'DROP VIEW [' + @schemeName + '].[' + RTRIM(@name) +']'
    EXEC (@SQL)
    PRINT 'Dropped View: ' + @name
SELECT @name = 
(SELECT TOP 1 o.[name] 
 FROM sysobjects o
 inner join sys.views v ON o.id = v.object_id
 WHERE SCHEMA_NAME(v.schema_id) = @schemeName AND o.[type] = 'V' AND o.category = 0 AND o.[name] NOT IN
 (
    SELECT  referenced_entity_name
    FROM sys.sql_expression_dependencies AS sed
    INNER JOIN sys.objects AS o ON sed.referencing_id = o.object_id
    WHERE referenced_schema_name = @schemeName
 )
 ORDER BY [name])
END
GO 
```

这将循环到所有视图并选择引用 systable 中不存在的 TOP 1 视图。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-20T06:55:33.307

但是模式呢？
如果视图是架构的一部分，以下脚本将为您提供帮助

```
DECLARE @sql VARCHAR(MAX)='';
SELECT @sql=@sql+'DROP VIEW '+name +';' FROM 
(
SELECT Name=[s].name  + '.' + [v].name FROM sys.views [v]
LEFT OUTER JOIN sys.schemas [s]
ON
(
    [v].[schema_id]=[s].[schema_id]
)
)
X
EXEC(@sql) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-27T14:15:23.230

试试这个脚本

```
DECLARE @viewName varchar(500)
DECLARE cur CURSOR
      FOR SELECT [name] FROM sys.objects WHERE type = 'v'
      OPEN cur

      FETCH NEXT FROM cur INTO @viewName
      WHILE @@fetch_status = 0
      BEGIN
            EXEC('DROP VIEW ' + @viewName)
            FETCH NEXT FROM cur INTO @viewName
      END
      CLOSE cur
      DEALLOCATE cur 
```

[请参阅此处了解更多信息](http://ctrlf5.net/?p=166)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-01-18T15:57:42.883

由于我从答案中尝试的任何一个脚本都没有在多个模式的情况下正常工作，因此我包括一个工作模式。

`--DBNAME, PUT YOU OWN ONE use SIPE_ISU`

 `DECLARE @viewName varchar(500) DECLARE cur CURSOR FOR SELECT sk.name + '.'+so.name FROM sys.objects so inner join sys.schemas sk on sk.schema_id = so.schema_id WHERE type = 'v' OPEN cur FETCH NEXT FROM cur INTO @viewName WHILE @@fetch_status = 0 BEGIN EXEC('DROP VIEW ' + @viewName) FETCH NEXT FROM cur INTO @viewName END CLOSE cur DEALLOCATE cur`  `* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2018-05-02T12:55:59.973

```
DECLARE @sql VARCHAR(MAX) = ''
        , @crlf VARCHAR(2) = CHAR(13) + CHAR(10) ;

SELECT @sql = @sql + 'DROP VIEW ' + QUOTENAME(SCHEMA_NAME(schema_id)) + '.' + QUOTENAME(v.name) +';' + @crlf
FROM   sys.views v

PRINT @sql;
EXEC(@sql); 
````

# django - 无法在 Django 和 Nginx 上进行文件共享库

> ID：11689558
> 
> 赞同：1
> 
> 时间：2012-07-27T14:11:44.643
> 
> 标签：django, nginx, ctypes, shared

我对调用共享库的项目 django + nginx 有疑问。我不知道要调用的库文件的路径。我已经尝试过所有案例。我不知道我必须将库文件放在服务器上的哪个位置才能正确调用。

这个错误在这里：

```
OSError at /list/

media/documents/lib.so: cannot open shared object file: No such file or directory
Request Method: POST
Request URL:    http : / /127 .0.0.1:8000/list/
Django Version: 1.4
Exception Type: OSError
Exception Value:    

media/documents/lib.so: cannot open shared object file: No such file or directory
Exception Location: /usr/lib/python2.7/ctypes/__init__.py in __init__, line 365
Python Executable:  /usr/bin/python2.7
Python Version: 2.7.3
Python Path:    

['/home/ht/workspace/myproject/src',
 '/home/ht/workspace/myproject/src',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-linux2',
 '/usr/lib/python2.7/lib-tk',
 '/usr/lib/python2.7/lib-old',
 '/usr/lib/python2.7/lib-dynload',
 '/usr/local/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages/PIL',
 '/usr/lib/python2.7/dist-packages/gst-0.10',
 '/usr/lib/python2.7/dist-packages/gtk-2.0',
 '/usr/lib/python2.7/dist-packages/ubuntu-sso-client',
 '/usr/lib/python2.7/dist-packages/ubuntuone-client',
 '/usr/lib/python2.7/dist-packages/ubuntuone-control-panel',
 '/usr/lib/python2.7/dist-packages/ubuntuone-couch',
 '/usr/lib/python2.7/dist-packages/ubuntuone-installer',
 '/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol']
Server time:    Fri, 27 Jul 2012 08:49:53 -0500 
```

# sql-server-2008 - 将页眉和页脚附加到 csv 数据

> ID：11689562
> 
> 赞同：2
> 
> 时间：2012-07-27T14:11:54.660
> 
> 标签：sql-server-2008, csv

我需要使用存储过程将数据导出到 CSV。我正在使用该`bcp.exe`实用程序导出数据

```
select @sql = 'bcp dbo.Customers out c:\bcp\customers.txt -c -t, -T -S'+ @@servername
exec master..xp_cmdshell @sql 
```

我需要`File Ended`在 CSV 的末尾添加一个带有列名和文本的标题。

表结构是这样的

```
ID    Name
 1    'joe'
 2    'jon' 
```

在 CSV 中应该是这样的

```
ID,Name
1,joe
2,jon
END_OF_FILE 
```

我创建了一个包含列标题和数据的视图

```
select 'ID' as ID , 'Name' as Name 
union all 
select ID, Name from Customer 
```

我需要`File Ended`在 CSV 末尾附加

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:21:46.370

```
select 'ID' as ID , 'Name' as Name 
union all 
select cast(ID as varchar(max)), Name from Customer
union all
select 'End of file', '' 
```

甚至更好：

```
SELECT 'ID, Name' as line
UNION ALL
SELECT cast(ID as varchar(max))+', '+Name FROM Customer
UNION ALL
SELECT 'End of file' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:18:04.677

你需要更多的处理。例如，这些 DOS 命令将创建一个`customers2.txt`带有页眉和页脚的文件：

```
echo Header Line > c:\bcp\customers2.txt
type c:\bcp\customers.txt >> c:\bcp\customers2.txt
echo Footer Line >> c:\bcp\customers2.txt 
```

# actionscript-3 - 来自套接字多个事件的 HTTP GET？

> ID：11689576
> 
> 赞同：0
> 
> 时间：2012-07-27T14:12:27.280
> 
> 标签：actionscript-3, http, sockets, air

使用 ProgressEvent.SOCKET_DATA 时，如何知道套接字服务器或 Web 服务器是否完成了 HTTP GET 请求的传输？我用 socket.writeUTFBytes('GET /index.php HTTP/1.1\r\n'); 做我的套接字请求 但是“答案”是如此之大，以至于我得到了多个 ProgressEvent.SOCKET_DATA。我怎么知道它应该向我传输多少数据？或者当它完成传输时？甚至我会从这个请求中得到多少个progressEvents？到目前为止，我正在使用一个计时器来检查服务器是否仍在传输，但这不是一种非常干净的做事方式..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:16:00.790

> 我怎么知道它应该向我传输多少数据？或者当它完成传输时？

如果是由服务器发送的，则通过读取`Content-length`标头，或者等待服务器关闭连接，或者`0<CRLF><CRLF>`如果启用了分块传输编码，则通过读取直到遇到最后一个块（），或者[任何其他指示已收到完整的答复](https://www.rfc-editor.org/rfc/rfc2616#section-4.4)。

为简单起见，请使用[HTTPService](https://stackoverflow.com/a/5475920/266143)，或者如果这不符合您的需要，请使用[实现 HTTP 客户端的库](http://code.google.com/p/as3httpclientlib/)。

> 甚至我会从这个请求中得到多少个progressEvents？

没有办法说。

# android - Activity中onCreate的不同操作

> ID：11689578
> 
> 赞同：0
> 
> 时间：2012-07-27T14:12:32.817
> 
> 标签：android, android-intent, oncreate

我想根据我来自的活动在 onCreate() 中执行不同的操作。

我这样做是为了：

```
Activity A: 
   intent to activity B; 
   intent.putBoolean("name",boolean=false); 
   startActivity B.

Activity B: 
onCreate(){
   Boolean.getBoolean("name"); 
   if(boolean){
   }else{**make this**} 
on the other hand if click on a Button 
   onClick {starts activity C}.

Activity C: 
do things... 
-> if click on a Button -> 
onClick { 
   intent.putBoolean(boolean=true);
   starts ActivityB}

Activity B onCreate(){ 
   if(boolean){**make this**
   } else{} 
```

我的问题：我可以用更好的方式做同样的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:22:00.093

您可以使用 Intent 的 putExtra 属性来传递正在启动当前活动的活动的名称。例如，如果活动 A 正在调用 C，那么您将在调用活动中执行此操作：

```
 Intent intent = new Intent(this, C.class);
    intent.putExtra("activity","A");
    startActivity(intent); 
```

在活动 C 中：

```
 Intent intent = getIntent();
    String activity = intent.getStringExtra("activity"); 
```

现在在字符串活动中，您将获得 A，并且您将知道您来自 A。如果您对 B 执行相同操作，那么您的活动字符串将显示为 B。

如果 C 只能通过 A 或 B 启动，那么您无需再处理任何事情，但如果它可以从 HOME 启动，那么您可能需要在 C 中进行额外检查。

# mysql - 使用 JOIN/WHERE 子句将列值插入其他表

> ID：11689582
> 
> 赞同：0
> 
> 时间：2012-07-27T14:02:26.890
> 
> 标签：mysql, insert

我有一个简单的业余问题。

`Table A(login_count)`包含所有现有的用户 ID 及其登录计数。

`Table B(login4buy)`包含特定的用户 ID 和其他信息。

我希望 SQL 将表 A 中的特定登录计数添加到表 B 中的特定用户 ID。

这是我的尝试：

```
INSERT INTO orders_subset    
SELECT login_count    
FROM login4buy    
WHERE login4buy.userid=orders_subset.userid 
```

如何将表 A 中的计数放入表 B 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:15:37.943

我想你想要一个`UPDATE`而不是一个`INSERT`

```
UPDATE lb
SET lb.orders_subset = lc.login_count
FROM login4buy lb
INNER JOIN  login_count lc
    ON lb.userid = lc.userid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:16:48.943

我认为您需要`UPDATE`，而不是`INSERT`：

```
UPDATE 
    orders_subset
  JOIN
    login4buy
      ON login4buy.userid = orders_subset.userid
SET
    login4buy.login_count = orders_subset.login_count ; 
```

# jquery - 复选框不起作用，并且始终未选中

> ID：11689589
> 
> 赞同：0
> 
> 时间：2012-07-27T14:13:13.400
> 
> 标签：jquery

当我单击其他复选框之一时，我习惯 `$('#checkbox_all').attr('checked', false);`取消 选中。`$('#checkbox_all')`它工作正常，但是当我单击`$('#checkbox_all')`它时不会被检查。

**所以`$('#checkbox_all')`不知何故不能正常工作，它总是未经检查。**

我错过了什么？如何解决？

谢谢！

```
$(document).ready(function () {

        $('#checkbox_all').attr('checked', true);

        $('input[id^="checkbox_"]').click(function () {
            $('#checkbox_all').attr('checked', false);
        });

        $('#checkbox_all').click(function () {
            alert("!!!");
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:15:48.323

使用`prop`代替`attr`：

```
$('#checkbox_all').prop('checked', true); 
```

`prop`处理 DOM 的属性，而属性处理属性及其值。要使用 attr，它会改变属性而不是 DOM 的`checked`变量，你可以这样做：

```
$('#checkbox_all').attr('checked', "checked"); 
```

然后，您可以使用 jQuery 找到所有选中的复选框`.is( condition )`，如下所示：

```
$('#someCheckBox').is(":checked"); // returns true false 
```

或者：

```
$('#someCheckBox').prop("checked"); // returns true false 
```

此外，在单击时，您正在更改 的属性`#checkbox_all`，您不想更改所有其他复选框的属性吗？像这样：

```
$("input[type=checkbox]") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T14:17:09.407

`#checkbox_all`包含在`$('input[id^="checkbox_"]')`选择器中，因此被告知取消选中 onclick。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T14:17:17.863

单击任何复选框时，即使它是 checkbox_all，您也将 checkbox_all 设置为 false。此外，如果您使用的是 jQuery 1.7，则应该使用[prop()](http://api.jquery.com/prop/)而不是[attr()](http://api.jquery.com/attr/)。试试这个：

```
$(document).ready(function () {
    $('#checkbox_all').prop('checked', true);

    $('input[id^="checkbox_"][id!=checkbox_all]').click(function () {
        $('#checkbox_all').prop('checked', false);
    });

    $('#checkbox_all').click(function () {
        alert("!!!");
    });
}); 
```

# android - 到达 ListView 的所有条目

> ID：11689591
> 
> 赞同：0
> 
> 时间：2012-07-27T14:13:24.977
> 
> 标签：android

我正在使用 ListView 来显示数据库中的所有记录。列表的每一行都有一个额外的复选框。我想制作一个按钮，按下该按钮将删除所有已检查的记录。但是，当我遍历列表并尝试使用 getChildAt(index) 获取对行的引用时，我只能到达 3 个初始条目，因为其余条目是隐藏的，并且在应用程序中我必须为它们使用滚动条.

我怎样才能让他们知道这样的东西很好用：

```
for( int i = 0; i < taskList.size(); i++ ){
   View row = list.getChildAt(i);
   CheckBox checkBox = (CheckBox)row.findViewById(R.id.checkbox)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:36:00.017

与其遍历视图，不如让支持适配器的数据在其中包含一个字段/变量，以跟踪检查状态。然后，只需遍历您的集合并删除所有已检查的集合。然后通知数据集已更改

# asp.net - ASP.NET - 链接按钮显示

> ID：11689594
> 
> 赞同：-1
> 
> 时间：2012-07-27T14:13:33.000
> 
> 标签：asp.net

我有以下内容：

```
 <asp:LinkButton ID="View7" runat="server" CommandArgument="View7" CssClass="TopTitle" OnCommand="GotolnkView" Width="108px">Manages Supervisor Manager Information</asp:LinkButton> 
```

我怎样才能让它像链接按钮一样显示：

```
 Manages Supervisor
  Manager Information 
```

请注意管理主管如何显示在顶部，经理信息如何显示在底部

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:17:26.787

尝试使用此代码

```
<asp:LinkButton ID="test" runat="server" text="Manages Supervisor<br/>Manager Information"></asp:LinkButton> 
```

# r - 将伽马分布曲线叠加到绘图上

> ID：11689595
> 
> 赞同：1
> 
> 时间：2012-07-27T14:13:34.643
> 
> 标签：r

我必须将伽玛分布曲线叠加到其他类似幂律曲线的图中。我首先以对数刻度绘制直方图的点

```
 plot(log(pp$mids),log(pp$density)) 
```

然后我想叠加我的伽玛分布曲线调用一个外部函数 gamma()

```
 gamma <- function(X)
  {
  n <- length(X)
  theta<-var(hh2$V1)/mean(hh2$V1)
  kappa<-mean(hh2$V1)/theta
  y<-rgamma(n,kappa,theta)
  xx<-hist(y,plot=F)
  curve(log(xx$density),add=T,col='violet',type='l')
  return( c(kappa) ) 
  } 
```

但这会给我一个错误，因为 curve() 需要一条真正的曲线来绘制。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:06:11.087

这是您的代码的一个有点工作的变体：

生成一个结构为（我猜）您的数据的示例：

```
library(rmutil)  ## for rpareto
set.seed(101)
hh2 <- data.frame(V1=rpareto(1000, m=1, s=1.5)) 
```

初始直方图计算：

```
pp <- hist(hh2$V1,plot=FALSE) 
```

函数（最好不要调用它`gamma`，因为它掩盖了内置函数）：

```
ghistfun <- function(x) {
    n <- length(x)
    scalepar <- var(x)/mean(x)
    shapepar <- mean(x)^2/var(x)
    y <- rgamma(n,shape=shapepar,scale=scalepar)
    xx <- hist(y,plot=FALSE)
    lines(log(xx$mids),log(xx$density),col="red")
    curve(dgamma(exp(x),shape=shapepar,scale=scalepar,log=TRUE),
        add=TRUE,col="blue")

    shapepar
} 
```

使用一个非常大的数字而不是仅仅使用数据的长度可能会更好`n`，除非您对查看完全相同大小的数据集中的随机波动特别感兴趣。或者，您可以只使用`curve(dgamma(x,...))`，如图所示（我最初认为您必须允许将密度从 缩放`x`到`log(x)`，但是由于您在原始（未记录）比例上计算直方图然后转换的方式bin 中点，您不必...）

```
plot(log(pp$mids),log(pp$density))
ghistfun(hh2$V1) 
```

![在此处输入图像描述](../Images/510e616664513d1353ea174ef55d292f.png)

# wpf - WPF Thumb DragDelta 跨显示器移动

> ID：11689596
> 
> 赞同：4
> 
> 时间：2012-07-27T14:13:35.567
> 
> 标签：wpf, drag-and-drop, slider

我有一个 Popup 控件，我在其中添加了一个拇指，以便可以在屏幕上拖动它。拇指的 DragDelta 事件被重载：

```
private static void Thumb_DragDelta(object sender, DragDeltaEventArgs e)
    {
        Thumb thumb = (Thumb)sender;
        Popup popup = thumb.Tag as Popup;

        if (popup != null)
        {
            popup.HorizontalOffset += e.HorizontalChange;
            popup.VerticalOffset += e.VerticalChange;
        }
    } 
```

拖动效果很好（我使用了这里的拖动示例：http: [//www.codeproject.com/Articles/43636/WPF-A-search](http://www.codeproject.com/Articles/43636/WPF-A-search)），除了当弹出窗口到达监视器的末端并跨越到其他（双显示器设置）。例如，如果我在左侧显示器上打开弹出窗口并开始向右拖动它，当它的右边框接触显示器的边缘时，它的移动是不稳定的并开始四处移动，直到我进一步向右移动并显示在另一个监视器。

我通过这个场景进行了调试，这是一个基本上发生了什么的数字示例：

```
At edge of screen:
HorizontalOffset = 600
HorizontalChange = 1

Move Right:
HorizontalOffset = 601
HorizontalChange = -800

HorizontalOffset = -199
HorizontalChange = 401

HorizontalOffset = 200
HorizontalChange = -150 
```

当它移动到另一台显示器时，这会产生这种奇怪的频闪效果；我需要做些什么来让它在显示器之间平稳过渡吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:41:04.017

我还没有弄清楚如何将弹出窗口取消绑定到屏幕，但我能够通过使用 Window 控件来完成我需要的操作。我这样做了`WindowStyle.None`，所以没有边框，并`MouseLeftButtonDown`用方法的委托重载了事件，`DragMove()`以便可以在屏幕上拖动它们。这让我拥有与弹出窗口非常相似的外观和感觉，但能够在屏幕上拖动它而不会闪烁。

# c# - c# 类图生成器集成在应用程序中

> ID：11689606
> 
> 赞同：0
> 
> 时间：2012-07-27T14:13:48.153
> 
> 标签：c#, class, diagram

c# 中是否有库或简单的控制台或其他应用程序可以包含在我的项目中以从 .cs 文件生成类图？我在谈论*诸如*视觉工作室类生成器之类的东西；）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:31:31.313

假设您正在寻找应用程序中的集成解决方案：[AutoDiagrammer](http://www.codeproject.com/Articles/17823/100-Reflective-Class-Diagram-Creation-Tool)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:16:09.230

[http://office.microsoft.com/en-us/visio-help/about-reverse-engineering-code-to-the-uml-HP081550745.aspx](http://office.microsoft.com/en-us/visio-help/about-reverse-engineering-code-to-the-uml-HP081550745.aspx) .. 也许

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-27T14:23:36.183

VisualStudio - 查看类图

# javascript - 淘汰嵌套绑定

> ID：11689607
> 
> 赞同：2
> 
> 时间：2012-07-27T14:13:50.337
> 
> 标签：javascript, html, knockout.js

我在使用敲除和表单并在不引发错误的情况下应用绑定时遇到问题。

我想将表单的逻辑拆分为几个视图模型，但是当我尝试绑定 foobar 时，我遇到了 bar 中的绑定错误和 foos 未找到

我试图在下面的示例中显示这一点。

有没有办法实现所需的行为？有没有办法说组合来自三个视图模型的所有绑定，然后将它们分配给 foobar？

bar_observable 是在 barViewModel 的构造器中创建的 ko.observable。

```
<div id="foobar">
    <form data-bind="with: newFooBar, submit: submitFooBar">
        <section id="bars">
            <div data-bind="text: bars_observable"></div>
        </section>

        <section id="foos">
            foo stuff
        </section>
    </form>
</div>
<script type="text/javascript">
    $(function () {
        var foobarViewModel, fooViewModel, barViewModel;

        foobarViewModel = new ViewModels.FoobarViewModel({
            fooViewModel: new ViewModels.FooViewModel({}),
            barViewModel: new ViewModels.BarViewModel({})
        });

        ko.applyBindings(foobarViewModel, document.getElementById("foobar"));
    });  
</script> 
```

错误是

```
"Uncaught Error: Unable to parse bindings. Message: ReferenceError: bars_observable is not defined;" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:24:50.223

我建议将 fooViewModel 和 barViewModel 对象放入 FoobarViewModel。在这种情况下，您只需调用 ko.applyBindings 一次。

```
<div id="foobar">
    <form data-bind="with: newFooBar, submit: submitFooBar">
        <section id="bars" data-bind="with: barViewModel">
            <div data-bind="text: bars_observable"></div>
        </section>

        <section id="foos" data-bind="with: forViewModel">
            foo stuff
        </section>
    </form>
</div>

<script type="text/javascript">
    $(function () {
        var foobarViewModel = new ViewModels.FoobarViewModel({});
        ko.applyBindings(foobarViewModel, document.getElementById("foobar"));
    });  

    function ViewModels.FoobarViewModel() {
         var self = this;
         self.fooViewModel = new ViewModels.FooViewModel({});
         self.barViewModel = new ViewModels.BarViewModel({});
         ...
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-13T09:01:57.933

If you are writing a modular system, creating a top level view model may not be possible. In knockout 2.0 you can tell knockout to stop parsing bindings at a certain point. Then you can call `applyBindings` again for the container. Here is an article which explains how to do it.

[http://www.knockmeout.net/2012/05/quick-tip-skip-binding.html](http://www.knockmeout.net/2012/05/quick-tip-skip-binding.html)

# php - 单击按钮创建网页的图像/pdf/屏幕截图

> ID：11689611
> 
> 赞同：0
> 
> 时间：2012-07-27T14:14:03.737
> 
> 标签：php, javascript, jquery, html, ajax

我已经寻找一种允许用户单击按钮的方法，该按钮将允许他们保存当前页面的图像或 pdf。页面总是改变并依赖于用户输入，基于此，返回序列，以不同的方式着色。因此，任何允许用户通过按钮或链接截取屏幕截图并下载或将页面保存为图像的方式。有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:15:48.230

这不像“添加按钮”，`server-side`如果你决定自己做的话，你需要很多代码行。

如果您真的只想添加按钮，我建议您使用[AddThis](http://www.addthis.com)来完成此任务，它提供了数百种可能性，还提供在线 PDF 生成、通过电子邮件共享、支持社交网站等

# jquery - div 内容到函数 arg

> ID：11689612
> 
> 赞同：0
> 
> 时间：2012-07-27T14:14:05.747
> 
> 标签：jquery

我对 jquery 很陌生...我正在使用 ToastMessge 插件（[演示并在此处下载](http://akquinet.github.com/jquery-toastmessage-plugin/)）..

我想通过引用另一个函数的参数来传递 Toastmessage 函数的名称，但以下方法不起作用：

```
$(document).ready(function() {
        function switchMsgType(fref) 
            {
             var fname = null;  
             fref(fname);
            }
            var alfa = $("#msgtype").html();

            switchMsgType(alfa);
         }); 
```

html:

```
<body>

    <div id="msgtype"><?php echo $_GET['msgtype']; ?></div>
    <div id="msg">bla bla ....</div>  <!-- txt of the message -->
    ... 
```

我拥有的唯一工作版本是：

```
...
switchMsgType(showStickySuccessToast);
... 
```

但我必须在页面中保留我的 PHP $_GET msgtype....所以我可以从“警告”切换到“成功”等...我已经尝试过：

```
$.trim($("#msgtype").text());  or...    $.trim($("#msgtype").html()); 
```

和其他人......但没有......提前谢谢...... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:10:07.403

根据您提供的链接，您似乎只是想根据“msgtype”的内容调用不同的“Toast Message” `div`，我不明白为什么需要为此使用函数指针，您应该是能够简单地传入 toastMsg 类型的名称并使用它来显示适当的 toast 消息，

例如

```
function callToastMsg(msgType, msg) {
      $().toastmessage('show' + msgType + 'Toast', msg);
}

$(function() {
    var msgType = $('#msgtype').text();
    var msg = $('#msg').text();
    callToastMsg(msgType, msg);
}); 
```

HTML

```
<div id="msgtype"><?php echo $_GET['msgtype']; ?></div> //say $_GET['msgtype'] == "Success"
<div id="msg">bla bla ....</div>  <!-- txt of the message --> 
```

如果您尝试执行与您在评论中发布的[链接](https://stackoverflow.com/questions/6022578/invoke-javascript-function-with-argument-via-pointer)类似的操作，那么您需要确保这些功能存在，但我真的不确定您为什么要这样做。

例如

```
function success(msg) {
    $().toastmessage('showSuccessToast', msg);
}

function warning(msg) {
    $().toastmessage('showWarningToast', msg);
}
function callOtherFunction(nameOfFunction, msg) {
    window[nameOfFunction](msg);
}

$(function() {
    var nameOfFunction = $('#msgtype').text();
    var msg = $('#msg').text();
    callOtherFunction(nameOfFunction, msg);
}); 
```

# python - 用python生成器实现图像分割

> ID：11689620
> 
> 赞同：1
> 
> 时间：2012-07-27T14:14:26.890
> 
> 标签：python, image-processing, python-2.7

在最后一个问题之后：[在python中将大图像文件作为数组读取](https://stackoverflow.com/questions/11585699/read-big-image-file-as-an-array-in-python)

由于我笔记本电脑的内存限制，我想用 python 生成器实现图像分割算法，它可以一次读取每个像素，而不是整个图像。

我的笔记本电脑是 Window 7（64 位操作系统），配备 4G 内存和 Intel(R) Core (TM) i7-2860 QM CPU，我正在处理的图像超过 2G。我要应用的算法是分水岭分割：[http ://scikits-image.org/docs/dev/auto_examples/plot_watershed.html](http://scikits-image.org/docs/dev/auto_examples/plot_watershed.html)

我能找到的唯一类似示例是[http://vkedco.blogspot.com/2012/04/rgb-to-gray-level-to-binary-python.html](http://vkedco.blogspot.com/2012/04/rgb-to-gray-level-to-binary-python.html)，但我需要的不仅仅是将像素值转换为一次。我需要考虑近像素之间的关系。我能怎么做？

对我有什么想法或提示吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T14:40:06.610

由于 RGB 到灰度级的转换操作是纯本地的，因此流式处理方法是微不足道的；像素的位置无关紧要。分水岭是一项全球业务。一个像素可以显着改变输出。你有几个选择：

1.  编写一个分水岭的实现，它适用于瓦片并在图像的许多通道上进行迭代。这对我来说听起来很难。
2.  使用本地方法进行分割（即阈值化）。
3.  买一台内存更大的电脑。RAM 很便宜，您可以将大量内存放入桌面系统。

# eclipse - Eclipse + JBossAS 工具不显示 JBoss 社区服务器适配器

> ID：11689622
> 
> 赞同：0
> 
> 时间：2012-07-27T14:14:37.473
> 
> 标签：eclipse, jboss

在意外丢失了我成功安装 JBoss 社区服务器适配器的唯一 Eclipse 安装（它需要非常特定版本的 JBoss 工具）后，我正在尝试重建一个 Eclipse 安装，以显示讨厌的 Eclipse JBoss 社区服务器适配器。

我尝试了 Eclipse Indigo + JBoss Tools 3.3 和 Eclipse Juno + JBoss Tools 3.3。我安装了 Java EE 版本，转到“下载其他服务器适配器”，安装 JBossAS 工具，但适配器仍然没有出现在“新服务器”列表中。我即将放弃并为自己购买一个 IntelliJ IDEA 许可证，但我认为询问附近是否有人知道正确的安装路径可以让 JBoss 社区适配器“神奇地”出现......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:52:33.023

在安装“JBossAS Tools”之前，您必须安装 eclipse 插件“JST Server Adapter”

参看。错误：[https ://issues.jboss.org/browse/JBIDE-10469](https://issues.jboss.org/browse/JBIDE-10469)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:41:53.920

我想到了。如果有人想知道为什么适配器在升级后消失了，JBoss Tools 在 Java 5 上不能很好地工作。使用 Java 6，问题就消失了。

# java - ARM 上的 OpenJDK 和 Cacao：未知陷阱指令

> ID：11689624
> 
> 赞同：0
> 
> 时间：2012-07-27T14:14:42.073
> 
> 标签：java, arm, ubuntu-10.04, openjdk

我正在尝试在运行 Ubuntu 10.04 的 ARM 平台上启动 java 应用程序。使用普通`java`命令时，它运行良好。尝试使用 cacao vm 时`java -cacao`出现以下错误：

```
LOG: [0x2aac4540] trap_handle: Unknown trap instruction at 0x2efa793c
LOG: [0x2aac4540] PC=0x2efa793c
LOG: [0x2aac4540] Aborting...
LOG: [0x2aac4540] Backtrace (4 stack frames):
LOG: [0x2aac4540] /usr/lib/jvm/java-6-openjdk/jre/lib/arm/cacao/libjvm.so(+0x36244) [0x2ac58244]
LOG: [0x2aac4540] /usr/lib/jvm/java-6-openjdk/jre/lib/arm/cacao/libjvm.so(+0x363da) [0x2ac583da]
LOG: [0x2aac4540] /usr/lib/jvm/java-6-openjdk/jre/lib/arm/cacao/libjvm.so(+0x3e11e) [0x2ac6011e]
LOG: [0x2aac4540] /usr/lib/jvm/java-6-openjdk/jre/lib/arm/cacao/libjvm.so(+0x47248) [0x2ac69248] 
```

我使用的java版本：

```
$ java -cacao -version
java version "1.6.0_18"
IcedTea Runtime Environment (1.8.13) (6b18-1.8.13-0ubuntu1~10.04.1)
CACAO (build 1.1.0pre2, compiled mode) 
```

*   我的申请有问题吗？
*   有没有办法判断哪条指令实际上导致了错误？
*   我是否错过了使用 caco vm 所需的其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:14:21.073

根据 CACAO 开发人员的说法，这个 CACAO 版本以及 IcedTea 版本已经完全过时了。arm 上的 Ubuntu 10.04 OpenJDK 似乎没有得到积极维护。

要让 CACAO VM 工作，需要从源代码编译。CACAO wiki 中有一些关于[如何使用 IcedTea 构建 CACAO 的操作指南](http://c1.complang.tuwien.ac.at/cacaowiki/IcedTea)。

# asp.net - 如何缓存和压缩响应？

> ID：11689625
> 
> 赞同：2
> 
> 时间：2012-07-27T14:14:41.257
> 
> 标签：asp.net, asp.net-mvc-3, caching, compression

我的一些回复，无论是`GET`页面还是`POST`回复，都`[OutputCache]`在短时间内实施。

我还使用以下功能启用了站点范围的压缩：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    // Implement HTTP compression
    var app = (HttpApplication) sender;

    // Retrieve accepted encodings
    var encodings = app.Request.Headers.Get("Accept-Encoding");
    if (encodings == null)
        return;
    encodings = encodings.ToLower();

    if (encodings.Contains("gzip"))
    {
        app.Response.Filter = new GZipStream(app.Response.Filter, CompressionMode.Compress);
        app.Response.AppendHeader("Content-Encoding", "gzip");
    }
    else if (encodings.Contains("deflate"))
    {
        app.Response.Filter = new DeflateStream(app.Response.Filter, CompressionMode.Compress);
        app.Response.AppendHeader("Content-Encoding", "deflate");
    }
} 
```

问题是它试图重新压缩缓存的文件。这意味着每当我发送缓存响应时，它都会被压缩成垃圾。

我考虑尝试查看`app.Response.Headers["Content-Encoding"]`现有的压缩，但我得到了一个`PlatformNotSupported`例外。如何在不删除缓存响应的情况下启用压缩？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T02:36:27.427

对于初学者，我会将该逻辑移至`Application_PostRequestHandlerExecute`，仅当页面实际执行时才会执行。在这种情况下，压缩输出连同 Content-Encoding 标头将被缓存并作为响应发送。随后的缓存命中将在没有分配过滤器的情况下提供压缩的内容和标题。

其次，您要让缓存知道此 URL 因内容编码而异。您需要在其中添加此行（在短路之前）：

```
app.Response.Cache.SetVaryByCustom("encoding"); 
```

以及 override `HttpApplication.GetVaryByCustomString`，大致如下：

```
protected override GetVaryByCustomString(HttpContext ctx, string custom) {
    if (custom != "encoding") return base.GetVaryByCustomString(ctx, custom);

    var acceptEncodings = ctx.Request.Headers["Accept-Encoding"];
    if (acceptEncodings.Contains("gzip")) return "gzip";
    if (acceptEncodings.Contains("deflate")) return "deflate";
    return "unencoded";
} 
```

最后，您应该告诉客户端他们需要在同一个标​​头上改变缓存。在接受编码的情况下，用户代理不太可能改变这一点，但这是正确的做法。唉，[有些浏览器](https://code.google.com/p/chromium/issues/detail?id=94369)无论如何都会忽略这一点。

```
app.Response.Cache.VaryByHeaders["Accept-Encoding"] = true; 
```

# url - 获取 url 直到上下文路径

> ID：11689634
> 
> 赞同：3
> 
> 时间：2012-07-27T14:15:08.573
> 
> 标签：url, jsf

我使用 Icefaces 和 JSF，但我遇到了这个问题：我有以下网址： `http://myMappedServer/myApp/followingThings`

我想在我的 xHtml 页面中获取值`http://myMappedServer/myApp` 如何在不使用托管 bean 的情况下实现这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T14:19:14.490

使用 EL: `#{request.contextPath}`。

它对于创建导航链接非常有用，在主模板中设置一个 Facelets 变量:)

```
<ui:param name="root" value="#{request.contextPath}/" /> 
```

**更新：**[不建议使用应用服务器中可用的完整路径，](https://stackoverflow.com/a/675903/149872)因为不能保证与用户用于访问您的应用的 URL 相同，因此请注意这一点。

但是，如果你真的想要，你[可以这样做，使用](https://stackoverflow.com/a/1629133/149872)[HttpServletRequest](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletRequest.html)中可用的一些方法来创建这样的字符串：

```
#{request.scheme}://#{request.serverName}:#{request.serverPort}#{request.contextPath} 
```

# oracle - 访问 ID 列表时的前 N 个查询性能

> ID：11689650
> 
> 赞同：2
> 
> 时间：2012-07-27T14:15:58.337
> 
> 标签：oracle, top-n

我有一个前 N 个查询给我带来了问题。

首先，我有如下查询：

```
select /*+ gather_plan_statistics */ * from 
(
  select rowid
  from payer_subscription ps
  where  ps.subscription_status = :i_subscription_status 
  and ps.merchant_id           = :merchant_id2
  order by transaction_date desc
) where rownum <= :i_rowcount; 
```

此查询运行良好。它可以非常有效地为我找到海量数据集的前 10 行，使用关于 Mercer_id、subscription_status、transaction_date 的索引。

```
-------------------------------------------------------------------------------------------------------
| Id  | Operation                     | Name        | Starts | E-Rows | A-Rows |   A-Time   | Buffers |
-------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT              |             |      1 |        |     10 |00:00:00.01 |       4 |
|*  1 |  COUNT STOPKEY                |             |      1 |        |     10 |00:00:00.01 |       4 |
|   2 |   VIEW                        |             |      1 |     11 |     10 |00:00:00.01 |       4 |
|*  3 |    INDEX RANGE SCAN DESCENDING| SODTEST2_IX |      1 |    100 |     10 |00:00:00.01 |       4 |
------------------------------------------------------------------------------------------------------- 
```

如您所见，每个阶段的估计实际行数为 10，这是正确的。

现在，我需要获取一组商家 ID 的前 N ​​条记录，因此如果我将查询更改为包含两个商家 ID，则性能坦克：

```
select /*+ gather_plan_statistics */ * from 
(
  select  rowid
  from payer_subscription ps
  where  ps.subscription_status = :i_subscription_status 
      and (ps.merchant_id = :merchant_id or 
           ps.merchant_id = :merchant_id2 )
  order by transaction_date desc
) where rownum <= :i_rowcount; 

    ----------------------------------------------------------------------------------------------------------------------------
| Id  | Operation               | Name        | Starts | E-Rows | A-Rows |   A-Time   | Buffers |  OMem |  1Mem | Used-Mem |
----------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT        |             |      1 |        |     10 |00:00:00.17 |     178 |       |       |          |
|*  1 |  COUNT STOPKEY          |             |      1 |        |     10 |00:00:00.17 |     178 |       |       |          |
|   2 |   VIEW                  |             |      1 |    200 |     10 |00:00:00.17 |     178 |       |       |          |
|*  3 |    SORT ORDER BY STOPKEY|             |      1 |    200 |     10 |00:00:00.17 |     178 |  2048 |  2048 | 2048  (0)|
|   4 |     INLIST ITERATOR     |             |      1 |        |  42385 |00:00:00.10 |     178 |       |       |          |
|*  5 |      INDEX RANGE SCAN   | SODTEST2_IX |      2 |    200 |  42385 |00:00:00.06 |     178 |       |       |          |
---------------------------------------------------------------------------------------------------------------------------- 
```

现在请注意，有 42K 行来自两次索引范围扫描——当索引范围扫描达到 10 行时，Oracle 不再中止索引范围扫描。我认为会发生的是，Oracle 最多会为每个 Mercer_id 获取 10 行，因为知道查询最多将返回 10 行。然后它会根据交易日期对 10 + 10 行进行排序并输出前 10 行，但它拒绝这样做。

当我需要将商家列表传递到查询中时，有谁知道如何获得第一个查询的性能？我可能可以使用 union all 获得性能，但商家列表是可变的，可能介于 1 或 2 到几百个之间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:22:21.763

您可以使用`--+ use_concat`提示使 Oracle 像 UNION ALL 一样执行查询。

从[文档](http://docs.oracle.com/cd/B28359_01/server.111/b28286/sql_elements006.htm#BABIAFIB)：

> USE_CONCAT 提示指示优化器使用 UNION ALL 集合运算符将查询的 WHERE 子句中的组合 OR 条件转换为复合查询。如果没有这个提示，只有当使用连接的查询成本比没有它们的成本低时才会发生这种转换。USE_CONCAT 提示覆盖了成本考虑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T06:09:53.550

在很多情况下 use_concat 会被忽略。请参阅：MOS 注意：不同版本的 USE_CONCAT 提示（文档 ID 259741.1）

我在 10.2.0.4、11.2.0.1 中使用 OR_EXPAND 取得了成功，其中 USE_CONCAT 不起作用。/*+ OR_EXPAND(别名列名) */

记录在这里： [http ://www.hellodba.com/reader.php?ID=199&lang=EN](http://www.hellodba.com/reader.php?ID=199&lang=EN)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:24:48.500

我不确定这是否有帮助，但你可以尝试用 IN 替换 OR 运算符：

```
and ps.merchant_id IN (:merchant_id, :merchant_id2) 
```

# java - 过滤惰性初始化集合

> ID：11689652
> 
> 赞同：0
> 
> 时间：2012-07-27T14:16:02.507
> 
> 标签：java, hibernate, hql, cartesian-product

由于一些 HQL 查询导致大型笛卡尔积，我遇到了一些性能问题。为了解决这个问题，我试图延迟获取集合，尽管我找不到将 where 子句应用于结果集合的好方法。

原始 HQL 查询的简化版本

```
SELECT TPR 
FROM TacticalPriceRule
INNER JOIN FETCH TPR.tacticalPriceRuleDurations TPRD
LEFT JOIN FETCH TPR.tacticalPriceRuleCountryOfOrigins as TPRCOO  
LEFT JOIN FETCH TPR.tacticalPriceRuleType as TPRT  
LEFT JOIN FETCH TPR.tacticalPriceRuleCars as TPRC  
WHERE
     TPRD.duration.min <= :duration and TPRD.duration.max >= :duration
     .... more conditions on other joins 
```

这导致几个小表有近 100 万行。不理想。

如果我尝试使用延迟初始化来执行此操作，则任何“where”或“with”子句都将被忽略，并且与战术价格规则匹配的整个集合都包含在集合中。

同样适用于子选择提取类型。

谢谢，

担

# progress-4gl - 创建 32 位数据库的 64 位版本

> ID：11689654
> 
> 赞同：0
> 
> 时间：2012-07-27T14:16:09.307
> 
> 标签：progress-4gl, openedge

我正在使用 Linux 并运行 102b06。我必须创建一个 32 位数据库的 64 位版本。这里最好的方法是什么？很难找到此任务的文档。我尝试过转储和加载，但您似乎无法用一个命令转储所有表。我的数据库有数千张表！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:10:29.057

您的 db 是 10.2 db，因此它已经具有 64 位 rowid。为什么你认为它是“32位”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:01:13.130

Progress 数据库没有“位大小”——严格来说，这是一个程序问题，因此您可以使用 32 位或 64 位二进制文​​件连接并使用数据库。

# windows - 模拟点击而不点击

> ID：11689662
> 
> 赞同：5
> 
> 时间：2012-07-27T14:16:38.200
> 
> 标签：windows, winapi, click, mouse

是否可以`Click`在不实际单击的情况下模拟一个过程？

例如，我想`Click`在鼠标静止的情况下运行计算器。这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T15:55:53.353

如果您只是想在一个相当典型的标签、字段和按钮应用程序中单击一个按钮，您可以使用一点 P/Invoke 来使用`FindWindow`和`SendMessage`控制。

如果您还不熟悉 Spy++，现在是时候开始了！

它与 Visual Studio 2012 RC 一起打包在：`C:\Program Files\Microsoft Visual Studio 11.0\Common7\Tools`. 其他版本也应该类似地找到它。

试试这个作为控制台 C# 应用程序：

```
class Program
{
    [DllImport("user32.dll", SetLastError = true)]
    static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

    [DllImport("user32.dll")]
    static extern IntPtr FindWindowEx(IntPtr hwndParent, IntPtr hwndChildAfter, string lpszClass, string lpszWindow);

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    public static extern IntPtr SendMessage(IntPtr hWnd, uint msg, int wParam, int lParam);

    private const uint BM_CLICK = 0x00F5;

    static void Main(string[] args)
    {
        // Get the handle of the window
        var windowHandle = FindWindow((string)null, "Form1");

        // Get button handle
        var buttonHandle = FindWindowEx(windowHandle, IntPtr.Zero, (string)null, "A Huge Button");

        // Send click to the button
        SendMessage(buttonHandle, BM_CLICK, 0, 0); 
    }
} 
```

这将获得标题为“Form1”的窗口的句柄。使用该句柄，它可以获取 Window 中 Button 的句柄。然后向按钮控件发送一条没有有用参数的“BM_CLICK”类型的消息。

我使用了一个测试 WinForms 应用程序作为我的目标。一个按钮和一些后面的代码来增加一个计数器。

![一个测试 WinForms 应用程序](../Images/ba45b3fb3d33dfda8ccd0493d9e4ec39.png)

当您运行 P/Invoke 控制台应用程序时，您应该会看到计数器增量。但是，您**不会**看到按钮动画。

您还可以使用 Spy++ 消息记录器功能。我向 BM_CLICK 和 WM_LBUTTONDOWN/WM_LBUTTONUP 推荐一个过滤器（手动点击会给你什么）。

希望有帮助！

# jquery - 类似于 Flash 网站的精美 Jquery 动画

> ID：11689664
> 
> 赞同：1
> 
> 时间：2012-07-27T14:16:44.673
> 
> 标签：jquery

我正在尝试重新创建此站点上使用的动画。

[http://www.altinhomes.com/](http://www.altinhomes.com/)

它最初是用 Flash 构建的，但我想做一个在黑色子标题上使用非常相似的动画风格的网站。

我想知道是否有任何 Jquery 插件或可以被黑客入侵以在子部分显示类似动画的插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:21:59.403

在 jQuery 甚至标准 javascript 中完全可能，尽管授予 jQuery 的`.animate()`功能可能更容易。

子菜单所做的只是将其宽度更改为与内容相同的宽度，并使内容的左侧与按钮的左侧相同。

然后这一切都会随着时间逐渐改变，这可以通过在 jQuery animate 函数中设置时间来完成。

我建议阅读文档[jQuery animate](http://api.jquery.com/animate/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:24:20.280

这个例子是可能的

```
$("#element").animate(
{
    top:'20px'
}, 1000); 
```

这会`element`在 1000 毫秒内向下移动 20 个像素

有关更多信息，请参阅[jQuery 动画](http://api.jquery.com/animate/)

# unix - 使用 procmail 通过在“收件人”中包含我的姓名来过滤电子邮件

> ID：11689667
> 
> 赞同：2
> 
> 时间：2012-07-27T14:16:47.880
> 
> 标签：unix, spam, spam-prevention, procmail

使用 procmail，我想将“收件人”字段中不包含我的姓名（“John Doe”）的任何传入邮件移动到“垃圾”文件夹。

但是，以下规则似乎没有任何效果，即使我已经在在线测试应用程序中彻底测试了正则表达式以确保它与应有的匹配：

```
# Filter spam if the name "John Doe" is not in "To"
:0:
* ^(?!To:.*John\sDoe).*
.Junk/ 
```

如果有兴趣，我的整个 procmail 规则文件是：

```
# Filter mail using SpamAssassin
:0fw: spamassassin.lock
* < 256000
| /usr/bin/spamassassin

# Filter spam based on "Spam-Level"
:0:
* ^X-Spam-Level: \*\*
.Junk/

# Filter spam if the name "John Doe" is not in "To"
:0:
* ^(?!To:.*John\sDoe).*
.Junk/ 
```

为什么我的规则不起作用？

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T14:43:57.090

因为 Perl 前瞻不是 Procmail 正则表达式的一部分。

试试这个。

```
:0
* ! ^To:.*John[  ]+Doe
.Junk/ 
```

[ ] 里面的空格应该是空格和制表符；也不支持`\s`Perlism。

您最好使用您的电子邮件地址作为过滤标准，并可能使用`^TO_`特殊宏来覆盖抄送：等。当然，您仍然无法处理密件抄送：到您的帐户。

# pandas - NaN 列在 pandas 中被绘制为全 0 列

> ID：11689668
> 
> 赞同：0
> 
> 时间：2012-07-27T14:16:50.540
> 
> 标签：pandas

我在绘制一个`DataFrame`充满 NaN 的整个列的切片时遇到了一些问题。

怎么会：

```
pandas.DataFrame(
    dict(
        A=pandas.Series([np.NaN]*32),
        B=pd.Series(range(-1,32))
    )
).plot() 
```

不同于：

```
#Ugly fix
pandas.DataFrame(
    dict(
        A=pandas.Series( [0] + [numpy.NaN]*32),
        B=pd.Series(range(-1,32))
    )
).plot() 
```

通过绘制一条 0 线，就好像该列用零填充一样。第一个代码不应该像这样工作：

```
pylab.plot(
    range(0,33),
    range(-1,32),
    range(0,32),
    [numpy.NaN]*32
) 
```

并且仅绘制一个充满 NaN 的系列也可以正常工作：

```
pandas.Series([numpy.NaN]*32).plot() 
```

我错过了什么？有没有正确的方法来绘制一个包含所有 NaN 的列，或者它是一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:18:18.887

这看起来像`pandas`. 查看源代码，[`pandas.tools.plotting`第 554:556 行](https://github.com/pydata/pandas/blob/v0.8.1/pandas/tools/plotting.py#L554)：

```
empty = df[col].count() == 0                                       
# is this right?                                                   
values = df[col].values if not empty else np.zeros(len(df)) 
```

如果该列仅包含 NaN，则空为 True，并且值设置为 np.zeros()。

注意：我没有添加“是这样吗？” 评论：它在源代码中！（熊猫 v.0.8.1）。

我提出了一个关于它的错误：[https ://github.com/pydata/pandas/issues/1696](https://github.com/pydata/pandas/issues/1696)

# c# - 如何在 UML 中表示 .NET 字典类型？

> ID：11689672
> 
> 赞同：3
> 
> 时间：2012-07-27T14:17:05.380
> 
> 标签：c#, dictionary, uml

我正在创建一个 uml 类图，我想知道是否有人可以帮助我。我想知道如何使用 UML 表示法表示字典类型。例如，我如何`Dictionary<FileType,StorageType>`在 UML 中表示以下字典（）类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:59:32.947

我曾经用一个[合格的协会来代表它](http://etutorials.org/Programming/UML/Chapter+6.+Class+Diagrams+Advanced+Concepts/Qualified+Associations/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T14:40:13.460

这取决于您试图在图表中传达的信息。但是你可以：

1.  将刻板​​印象附加到您的关系中
2.  使用关联类
3.  使用三元关联
4.  确定集合类型是实现细节而不显示它
5.  发现有关协会的一些额外行为并促进

# javascript - 任何使用 Uploadifive 和 Django 的经验？

> ID：11689679
> 
> 赞同：1
> 
> 时间：2012-07-27T14:17:26.107
> 
> 标签：javascript, jquery, django, uploadify

我正在尝试将 Uploadifive 实现到 Django 中。这对我来说很困难，因为我对 Django 不是很好。一点儿都没有。这当然*应该*告诉我，我应该等待并首先学习更多 Django，但是.. 是的，我将无法远离它..

据我了解，我需要看一下 Uploadifive 包附带的 PHP 脚本，并在 Django 视图中编写等效的脚本。至少这是我的猜测。问题是，我似乎无法在网上找到任何指南，或任何有关如何操作的提示。有没有人有这方面的例子，我可以看看？或者关于我应该去哪里的任何提示？

到目前为止，我已经在 urls.py 中创建了一个模式，它将浏览器定向到 view.py def，将用户发送到正确的网页。JavaScript 在现场初始化（我可以看到“选择文件”按钮），但是当我选择图像时，什么也没有发生。我尝试根据我找到的基于 Flash 的 Uploadify 指南在视图中构建一个脚本，但这不起作用。

编辑：有人指出，自然有必要看看 PHP 代码实际上做了什么。它确实是一个付费软件，但我无法想象这里的 PHP 代码会成为代码中如此重要的一部分，以至于它会“放弃”任何东西。无论如何，真正的工作在于 javascript 文件。

PHP上传收件人脚本：

```
<?php
/*
UploadiFive
Copyright (c) 2012 Reactive Apps, Ronnie Garcia
*/

// Set the uplaod directory
$uploadDir = '/uploads/';

// Set the allowed file extensions
$fileTypes = array('jpg', 'jpeg', 'gif', 'png'); // Allowed file extensions

if (!empty($_FILES)) {
    $tempFile   = $_FILES['Filedata']['tmp_name'];
    $uploadDir  = $_SERVER['DOCUMENT_ROOT'] . $uploadDir;
    $targetFile = $uploadDir . $_FILES['Filedata']['name'];

    // Validate the filetype
    $fileParts = pathinfo($_FILES['Filedata']['name']);
    if (in_array(strtolower($fileParts['extension']), $fileTypes)) {

        // Save the file
        move_uploaded_file($tempFile,$targetFile);
        echo 1;
    } else {
        // The file type wasn't allowed
        echo 'Invalid file type.';
    }
}
?> 
```

模板：

```
 {% extends 'base/index.html' %}
    {% block stylesheet %}
      <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}uploadifive/uploadifive.css">
      <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
      <script type="text/javascript" src="{{ STATIC_URL }}uploadifive/jquery.uploadifive.js"></script>
      <script type="text/javascript">
      $(document).ready(function(){
        $('#file_upload').uploadifive({
          'debug': true,
          'formData':{'test':'something'},
          'uploadScript': '/upload/',
          'queueID': 'queue',
          'cancelImage': '{{ STATIC_URL }}uploadifive/uploadifive-cancel.png',
          'auto': true
        });
      });
      </script>
    {% endblock %}

    {% block content %}
      <form>
        <input type="file" name="file_upload" id="file_upload" />
      </form>
    {% endblock %} 
```

视图.py

```
 from django.shortcuts import render
    from gallery.models import Pic,Comment,Tag
    from django.conf import settings
    from django.http import HttpResponse
    from django.shortcuts import render

    def upload(request):
        if request.method == 'POST':
            for field_name in request.FILES:
                uploaded_file = request.FILES[field_name]

                #write the file into destination
                destination_path = '<absolute path to project>/media/gallery/pictures/%s' % (uploaded_file.name)
                destination = open(destination_path, 'wb+')
                for chunk in uploaded_file.chunks():
                    destination.write(chunk)
                destination.close()

            #indicate that everything is OK
            return HttpResponse("ok", mimetype="text/plain")
        else:
            #show the upload UI
            return render(request, 'gallery/upload.html') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:04:05.547

这是我对 PHP 文件的 Python 翻译：

```
# Set the uplaod directory
upload_dir = '/absolute/path/to/upload/dir/'

# Set the allowed file extensions
file_types = ['jpg', 'jpeg', 'gif', 'png'] # Allowed file extensions

if len(request.FILES):
    target_file = upload_dir + request.FILES['field_name'].name

    # Validate the filetype
    filename, ext = os.path.splitext(request.FILES['field_name'].name)
    if ext.lower() in file_types:

        # Save the file
        with open(target_file, 'wb+') as destination:
            for chunk in request.FILES['field_name'].chunks():
                destination.write(chunk)
    else:
        # The file type wasn't allowed
        print 'Invalid file type.' 
```

如果一次发送多个文件，最好将代码包装在 forloop 中：

```
for file in request.FILES.values():
    target_file = upload_dir + file.name
    ... 
```

然后，您显然希望返回正确的响应对象并更好地处理错误，但您应该能够自己处理。

# sql - 多行的 SQL Case When 语句

> ID：11689681
> 
> 赞同：1
> 
> 时间：2012-07-27T14:17:30.630
> 
> 标签：sql, sql-server-2005, case-when

有没有办法让这个 SQL 更小？

```
CASE
                    WHEN @contentType = 'PrimaryBannerItem' THEN
                        [dbo].[DeathStar_GetContentLink]         (@contentId, c.content_id, @pageCollectionId, ISNULL(l.filename, ''))

                    ELSE

                        [dbo].[DeathStar_GetContentImagePath](ISNULL(a.mimetype, ''), ISNULL(c.image, ''), ISNULL(l.filename, ''))
                END AS [Image],

                CASE
                    WHEN @contentType = 'PrimaryBannerItem' THEN
                         dbo.DeathStar_GetMetadataValue(c.content_id, @urlMetadataId)

                    ELSE

                        [dbo].[DeathStar_GetContentLink](@contentId, c.content_id, @pageCollectionId, ISNULL(l.filename, ''))
                END AS Link, 
```

让它看起来更像

```
CASE
    WHEN @contentType = 'PrimaryBannerItem' THEN
        [dbo].[DeathStar_GetContentLink](@contentId, c.content_id, @pageCollectionId, ISNULL(l.filename, '')) as [Image]
        dbo.DeathStar_GetMetadataValue(c.content_id, @urlMetadataId) as [Link]
    ELSE
        [dbo].[DeathStar_GetContentImagePath](ISNULL(a.mimetype, ''), ISNULL(c.image, ''), ISNULL(l.filename, '')) as [Image]
        [dbo].[DeathStar_GetContentLink](@contentId, c.content_id, @pageCollectionId, ISNULL(l.filename, '')) as [Link]
END 
```

因为如您所见，它使代码更具可读性，减少了使用的行数并避免了冗余。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T13:50:10.570

如果两种情况下返回的结果集相同，或许你可以玩个小把戏：

```
-- This query will return data only when @contentId = 'PrimaryBannerItem'
SELECT
  [dbo].[DeathStar_GetContentLink](@contentId, c.content_id, @pageCollectionId, ISNULL(l.filename, '')) as [Image]
  ,dbo.DeathStar_GetMetadataValue(c.content_id, @urlMetadataId) as [Link]
  ,OtherFields
FROM
  YourTables
WHERE
  (@contentId = 'PrimaryBannerItem')
  -- Other WHERE clauses here

UNION ALL

-- This query will return data only when @contentId <> 'PrimaryBannerItem'
SELECT
  [dbo].[DeathStar_GetContentImagePath](ISNULL(a.mimetype, ''), ISNULL(c.image, ''), ISNULL(l.filename, '')) as [Image]
  ,[dbo].[DeathStar_GetContentLink](@contentId, c.content_id, @pageCollectionId, ISNULL(l.filename, '')) as [Link]
  ,OtherFields
FROM
  YourTables
WHERE
  (@contentId <> 'PrimaryBannerItem')
  -- Other WHERE clauses 
```

这样，您不需要使用任何 IF、CASE 等。

**注意**：如果您开始有更复杂的条件，例如依赖于其他参数组合的值，这可能不是最有效的方法，无论是在性能方面，更重要的是在维护方面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:01:05.640

可能不是。

您在第二个代码块中建议的方式将不起作用。`CASE`是一个语句，只能用于返回单个列的值。这就是为什么您将结果定义`CASE`为列，但不能在 case 语句中定义列。这是一个解释这一点[的SO 。](https://stackoverflow.com/questions/2072721/how-can-i-select-multiple-columns-within-a-case-when-on-sql-server?rq=1)

我能想到的唯一可能性是更新您的存储过程/函数以允许空值，这样您就可以摆脱所有`ISNULL`s. [这是一个](http://sqlserver2000.databases.aspfaq.com/can-i-have-optional-parameters-to-my-stored-procedures.html)解释存储过程的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T17:29:22.737

不确定这是否会更好，但可能没有其他选择，而不必重复整个查询或`CASE ... WHEN ... ELSE ...`对每一列使用重复的表达式，就像在你的例子中一样：

```
SELECT
  …
  COALESCE(choice1.Image, choice2.Image) AS Image,
  COALESCE(choice1.Link , choice2.Link ) AS Link,
  …
FROM
  …
OUTER APPLY (
  SELECT
    [dbo].[DeathStar_GetContentLink](@contentId, c.content_id, @pageCollectionId, ISNULL(l.filename, '')) as [Image],
    dbo.DeathStar_GetMetadataValue(c.content_id, @urlMetadataId) as [Link]
  WHERE @contentType = 'PrimaryBannerItem'
) AS choice1
OUTER APPLY (
  SELECT
    [dbo].[DeathStar_GetContentImagePath](ISNULL(a.mimetype, ''), ISNULL(c.image, ''), ISNULL(l.filename, '')) as [Image],
    [dbo].[DeathStar_GetContentLink](@contentId, c.content_id, @pageCollectionId, ISNULL(l.filename, '')) as [Link]
  WHERE @contentType <> 'PrimaryBannerItem'
    /* or, perhaps, "WHERE @contentType = 'something else'" */
) AS choice2
WHERE
  … 
```

在两个 OUTER APPLY 之间，只有一个可以返回一行，另一个将始终返回一个空行集，并且其列将相应地评估为 NULL。这意味着您可以使用 COALESCE 返回“正确”的结果：只需按必要的顺序指定相应的列，然后将返回第一个非 NULL 列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T17:33:26.387

这个解决方案可能吗？

```
-- First case
IF @contentType = 'PrimaryBannerItem' BEGIN
    SELECT [dbo].[DeathStar_GetContentLink](@contentId, c.content_id, @pageCollectionId, ISNULL(l.filename, '')) as [Image],
    dbo.DeathStar_GetMetadataValue(c.content_id, @urlMetadataId) as [Link]

-- Second case
END ELSE BEGIN
    SELECT [dbo].[DeathStar_GetContentImagePath](ISNULL(a.mimetype, ''), ISNULL(c.image, ''), ISNULL(l.filename, '')) as [Image],
    [dbo].[DeathStar_GetContentLink](@contentId, c.content_id, @pageCollectionId, ISNULL(l.filename, '')) as [Link]
END 
```

如果这些是您选择的唯一字段，它肯定会看起来更干净。但是我很确定我没有看到你的整个代码，所以这可能不会给你你想要的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T21:34:32.863

不，CASE 表达式返回一个标量，一个单一的值。它不能返回两个值；它不能返回两列的值。

# iphone - self.view 在窗口上未正确对齐

> ID：11689683
> 
> 赞同：0
> 
> 时间：2012-07-27T14:17:37.330
> 
> 标签：iphone, uiwindow

所以我真正在做的是......我有一个登录页面，当正确的登录会话发生时，它导航到另一个视图。它包含标签栏。所以我所做的是，我创建了一个单独的类来自定义“UITabbarController”。现在我在顶部看到一个白色的屏幕，下面是该类的视图。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:43:14.300

你在继承 UITTabBarController 吗？这不是您通常想做的事情。

更好的选择是创建第二个视图控制器并将普通的 UITabBarController 添加到该视图控制器的视图上。

# java - Java - 用鼠标更改 JPanel 图像

> ID：11689688
> 
> 赞同：0
> 
> 时间：2012-07-27T14:17:47.900
> 
> 标签：java, swing, jpanel, imageicon, mouse-listeners

我正在尝试创建一个带有用鼠标更改的图片的面板。我有 10 张图片（0.png 到 9.png）。我的问题是，我想移动图像，我目前正在查看第二张图片。我用`JScrollPane`滚动回第一张图像，但只有第一张图像在移动。如何刷新我的面板并能够移动所有图像？

这是我的代码：

```
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.AffineTransform;
import java.awt.image.BufferedImage;
import java.io.File;

import javax.imageio.ImageIO;
import javax.swing.*;

class MapFrame extends JPanel {
    /**
     * 
     */
    private static final long serialVersionUID = (long) 1.0;
    private static Image image;
    private static JLabel label = new JLabel();
    private static int ind =0;
    private static JFrame frame;
    private static String str;
   //----------------------------------------------------------------- 
    public MapFrame(){      }

   //----------------------------------------------------------------- 

    public MapFrame(String pathe) {
        super(new BorderLayout());
          image = new ImageIcon(getClass().getResource(pathe)).getImage();
          label = new JLabel(new ImageIcon(image));  
          JScrollPane scroll = new JScrollPane(label,JScrollPane.VERTICAL_SCROLLBAR_NEVER,JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
          add(scroll);

          HandLcalss hand = new HandLcalss(label);
          JViewport v = scroll.getViewport();
          v.addMouseListener(hand);
          v.addMouseMotionListener(hand);
          v.addMouseWheelListener(hand);
    }

   //----------------------------------------------------------------- 

    public static void ShowGUI(String pathe) {
        frame = new JFrame("Bladi_map");
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        frame.getContentPane().add(new MapFrame(pathe));
        frame.setSize(500,400);  
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

   //----------------------------------------------------------------- 

    public static void ChangImage(String pathe){
        frame.getContentPane().add(new MapFrame(pathe));        
        label.revalidate();
        frame.setVisible(true);     
    }

    //----------------------------------------------------------------- 
class HandLcalss implements MouseListener,MouseMotionListener,MouseWheelListener{
    private static final int DELAY = 10;
    private  Cursor hc = Cursor.getPredefinedCursor(Cursor.HAND_CURSOR);
    private  Timer scroller;
    private  JComponent label;
    private  Point startPt = new Point();
    private  Point move    = new Point();
    //----------------------------------------------------------------- 
    public HandLcalss(JComponent comp) {
        this.label = comp;
        comp.getCursor();
        this.scroller = new Timer(DELAY, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {               
            }
        });
    }
    //----------------------------------------------------------------- 

    @Override public void mouseDragged(MouseEvent e) {
        JViewport vport = (JViewport)e.getSource();
        Point pt = e.getPoint();
        int dx = startPt.x - pt.x;
        int dy = startPt.y - pt.y;
        Point vp = vport.getViewPosition();
        vp.translate(dx, dy);
        label.scrollRectToVisible(new Rectangle(vp, vport.getSize()));
        startPt.setLocation(pt);
    }
    @Override
    public void mousePressed(MouseEvent e) {
        ((JComponent)e.getSource()).setCursor(hc);
        startPt.setLocation(e.getPoint());
        move.setLocation(0, 0);
        scroller.stop();
    }
    @Override
    public void mouseWheelMoved(MouseWheelEvent e) {
        int notches = e.getWheelRotation();

        if (notches < 0) {
            ind++;
            if(ind <0){ind=0;}
            if(ind<=9){
            str="/resources/"+ind+".png";       
             ChangImage(str);
            System.out.println("indink"+str);
            }
        } else {
            ind--;
            if(ind >9){ind=8;}
            if(ind>=0){
            str="/resources/"+ind+".png";
            ChangImage(str);
            System.out.println("ind"+ind);
            }             
        }   
      }
    @Override
    public void mouseClicked(MouseEvent e) {
        // TODO Auto-generated method stub          
    }

    @Override
    public void mouseMoved(MouseEvent arg0) {
        // TODO Auto-generated method stub
    }
    @Override
    public void mouseEntered(MouseEvent arg0) {
        // TODO Auto-generated method stub      
    }
    @Override
    public void mouseExited(MouseEvent arg0) {
        // TODO Auto-generated method stub      
    }
    @Override
    public void mouseReleased(MouseEvent arg0) {
        // TODO Auto-generated method stub      
    }
}

//----------------------------------------------------------------- 
} 
```

这是主要课程：

```
public class main { 
    public static void main(String[] args) {
        MapFrame.ShowGUI("/resources/0.png");       
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:26:15.853

您的代码中有两个问题：

首先：

```
public static void ChangImage(String pathe){
    frame.getContentPane().add(new MapFrame(pathe));        
    label.revalidate();
    frame.setVisible(true);     
} 
```

当您更改图像（在鼠标滚轮事件上调用）时，您只需将带有图像的**新**面板（`MapFrame`）添加到现有容器：（`Container pane = frame.getContentPane()`）。旧的仍然存在并与新面板重叠。上面的方法应该是：

```
public static void ChangImage(String pathe) {
    frame.getContentPane().removeAll();
    frame.getContentPane().add(new MapFrame(pathe));
    label.revalidate();
    frame.setVisible(true);
} 
```

第二件事：

为什么复杂？（在 0 值上也有错误`ind`）：

```
@Override
    public void mouseWheelMoved(MouseWheelEvent e) {
        int notches = e.getWheelRotation() * -1;
        ind += notches;
        if(ind < 0) {
            ind = 0;
        }
        else if(ind > 9) {
            ind = 9;
        }
        str = "/resources/" + ind + ".png";
        ChangImage(str);
    } 
```

最后一件事：

如果您正在实现所有鼠标接口 - 您可以扩展`MouseAdapter`. 现在你不需要重写你不想要的方法。

# windows - 批量删除文本文件中的重复行

> ID：11689689
> 
> 赞同：11
> 
> 时间：2012-07-27T14:17:55.273
> 
> 标签：windows, batch-file, cmd

是否可以从文本文件中删除重复的行？如果是，如何？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-27T16:33:31.627

当然可以，但是像大多数使用批处理的文本文件处理一样，它不是很漂亮，而且不是特别快。

此解决方案在查找重复项时忽略大小写，并对行进行排序。文件名作为第一个也是唯一的参数传入批处理脚本。

```
@echo off
setlocal disableDelayedExpansion
set "file=%~1"
set "sorted=%file%.sorted"
set "deduped=%file%.deduped"
::Define a variable containing a linefeed character
set LF=^

::The 2 blank lines above are critical, do not remove
sort "%file%" >"%sorted%"
>"%deduped%" (
  set "prev="
  for /f usebackq^ eol^=^%LF%%LF%^ delims^= %%A in ("%sorted%") do (
    set "ln=%%A"
    setlocal enableDelayedExpansion
    if /i "!ln!" neq "!prev!" (
      endlocal
      (echo %%A)
      set "prev=%%A"
    ) else endlocal
  )
)
>nul move /y "%deduped%" "%file%"
del "%sorted%" 
```

此解决方案区分大小写，并且以原始顺序保留行（当然重复项除外）。文件名再次作为第一个也是唯一的参数传入。

```
@echo off
setlocal disableDelayedExpansion
set "file=%~1"
set "line=%file%.line"
set "deduped=%file%.deduped"
::Define a variable containing a linefeed character
set LF=^

::The 2 blank lines above are critical, do not remove
>"%deduped%" (
  for /f usebackq^ eol^=^%LF%%LF%^ delims^= %%A in ("%file%") do (
    set "ln=%%A"
    setlocal enableDelayedExpansion
    >"%line%" (echo !ln:\=\\!)
    >nul findstr /xlg:"%line%" "%deduped%" || (echo !ln!)
    endlocal
  )
)
>nul move /y "%deduped%" "%file%"
2>nul del "%line%" 
```

***编辑***

以上两种解决方案都去除了空白行。在谈论不同的值时，我认为空白行不值得保留。

我已经修改了两种解决方案以禁用 FOR /F "EOL" 选项，以便保留所有非空行，无论第一个字符是什么。修改后的代码将 EOL 选项设置为换行符。

***新解决方案 2016-04-13：JSORT.BAT***

您可以使用我的[JSORT.BAT 混合 JScript/batch 实用程序](http://www.dostips.com/forum/viewtopic.php?f=3&t=5595)通过一个简单的衬线有效地排序和删除重复行（加上一个 MOVE 以用最终结果覆盖原始文件）。JSORT 是纯脚本，可​​以在从 XP 开始的任何 Windows 机器上本地运行。

```
@jsort file.txt /u >file.txt.new
@move /y file.txt.new file.txt >nul 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-29T07:52:23.077

您可以使用来自**UnxUtils** [http://sourceforge.net/projects/unxutils/的](http://sourceforge.net/projects/unxutils/)[http://en.wikipedia.org/wiki/Uniq](http://en.wikipedia.org/wiki/Uniq)**`uniq`**

 *** * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-06T00:28:26.837

```
set "file=%CD%\%1"
sort "%file%">"%file%.sorted"
del /q "%file%"
FOR /F "tokens=*" %%A IN (%file%.sorted) DO (
SETLOCAL EnableDelayedExpansion
if not [%%A]==[!LN!] (
set "ln=%%A"
echo %%A>>"%file%"
)
)
ENDLOCAL
del /q "%file%.sorted" 
```

This should work exactly the same. That dbenham example seemed way too hardcore for me, so, tested my own solution. usage ex.: filedup.cmd filename.ext

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-11T14:09:47.453

下面的批处理文件做你想做的事：

```
@echo off
setlocal EnableDelayedExpansion
set "prevLine="
for /F "delims=" %%a in (theFile.txt) do (
   if "%%a" neq "!prevLine!" (
      echo %%a
      set "prevLine=%%a"
   )
) 
```

如果你需要更高效的方法，试试这个作为*过滤器*开发的 Batch-JScript 混合脚本，也就是类似于 Unix`uniq`程序。使用 .bat 扩展名保存它，例如`uniq.bat`：

```
@if (@CodeSection == @Batch) @then

@CScript //nologo //E:JScript "%~F0" & goto :EOF

@end

var line, prevLine = "";
while ( ! WScript.Stdin.AtEndOfStream ) {
   line = WScript.Stdin.ReadLine();
   if ( line != prevLine ) {
      WScript.Stdout.WriteLine(line);
      prevLine = line;
   }
} 
```

[这两个程序都是从这篇文章](https://stackoverflow.com/questions/19816914/how-to-join-two-text-files-removing-duplicates-in-windows/19818934#19818934)中复制而来的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-14T22:59:21.447

前段时间我发现了一个出乎意料的简单解决方案，但不幸的是，这只适用于 Windows 10：该[`sort`命令](https://ss64.com/nt/sort.html "种类")具有一些可以采用的未记录选项：

*   `/UNIQ[UE]`只输出唯一的行；
*   `/C[ASE_SENSITIVE]`区分大小写；

因此，使用以下代码行删除重复行（删除`/C`以不区分大小写的方式执行此操作）：

```
sort /C /UNIQUE "incoming.txt" /O "outgoing.txt" 
```

这会从 in 中的文本中删除重复的行，`incoming.txt`并在 中提供结果`outgoing.txt`。原来的顺序当然不会被保留（因为，嗯，这是 的主要目的`sort`）。

但是，您应该谨慎使用这些选项，因为它们可能存在一些（未知）问题，因为可能有充分的理由不记录它们（到目前为止）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-12-11T14:27:11.227

纯批次 - 3 条有效线。

```
@ECHO OFF
SETLOCAL
:: remove variables starting $
FOR  /F "delims==" %%a In ('set $ 2^>Nul') DO SET "%%a="

FOR /f "delims=" %%a IN (q34223624.txt) DO SET $%%a=Y
(FOR  /F "delims=$=" %%a In ('set $ 2^>Nul') DO ECHO %%a)>u:\resultfile.txt

GOTO :EOF 
```

如果数据不包含批次对其敏感的字符，则可以正常工作。

“q34223624.txt”，因为问题 34223624 包含此数据

```
1.1.1.1
1.1.1.1
1.1.1.1
1.2.1.2
1.2.1.2
1.2.1.2
1.3.1.3
1.3.1.3
1.3.1.3 
```

它完美地工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-09T05:55:08.950

确实遇到了这个问题并且不得不自己解决它，因为它的使用是我需要的。我需要找到重复的 URL，并且行的顺序是相关的，因此需要保留。文本行不应该包含任何双引号，不应该很长并且不能使用排序。

因此我这样做了：

```
setlocal enabledelayedexpansion
type nul>unique.txt
for /F "tokens=*" %%i in (list.txt) do (
    find "%%i" unique.txt 1>nul
    if !errorlevel! NEQ 0 (
        echo %%i>>unique.txt
    )
) 
```

辅助：如果文本确实包含双引号，则 FIND 需要使用经过过滤的集合变量，如本文所述：[Escape double quotes in parameter](https://stackoverflow.com/questions/7760545/cmd-escape-double-quotes-in-parameter#15262019)

所以而不是：

```
find "%%i" unique.txt 1>nul 
```

它会更像：

```
set test=%%i
set test=!test:"=""!
find "!test!" unique.txt 1>nul 
```

因此 find 看起来像 find """what""" 文件并且 %%i 将保持不变。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-01-10T07:08:07.630

我使用了一个假的“数组”来完成这个

```
@echo off
:: filter out all duplicate ip addresses
REM you file would take place of %1
set file=%1%
if [%1]==[] goto :EOF
setlocal EnableDelayedExpansion
set size=0
set cond=false
set max=0
for /F %%a IN ('type %file%') do (   
      if [!size!]==[0] (
          set cond=true
          set /a size="size+1"
          set arr[!size!]=%%a

      ) ELSE (
                 call :inner
                 if [!cond!]==[true] (
                     set /a size="size+1" 
                     set arr[!size!]=%%a&& ECHO > NUL                      
                 ) 
      )
)
break> %file%
:: destroys old output
for /L %%b in (1,1,!size!) do echo !arr[%%b]!>> %file%
endlocal
goto :eof
:inner
for /L %%b in (1,1,!size!) do (  
          if "%%a" neq "!arr[%%b]!" (set cond=true) ELSE (set cond=false&&goto :break)                                
)
:break 
```

内部循环标签的使用是 cmd.exe 特有的，并且是我成功地将 for 循环嵌套在彼此中的唯一方法。基本上，这会比较作为分隔符传递的每个新值，如果没有匹配，则程序会将值添加到内存中。完成后，它将破坏目标文件的内容并用唯一的字符串替换它们**

# sql-server - SP_executeSQL 错误 - 组合语句时出错

> ID：11689691
> 
> 赞同：1
> 
> 时间：2012-07-27T14:18:00.700
> 
> 标签：sql-server, stored-procedures, execute

我写了这个游标

```
DECLARE IMGPATH CURSOR FAST_FORWARD FOR
    select ImageFileName from tempImageFiles
OPEN IMGPATH

FETCH NEXT FROM IMGPATH INTO @ImageFileName
WHILE @@FETCH_STATUS = 0
 BEGIN
    --SELECT @ImageFileName = LEFT(@ImageFileName, (6-4))
        SET @strSQLtoExecute = N'INSERT tempImage (imageData) SELECT BulkColumn FROM OPENROWSET(BULK ''C:\Temp\Images\' + @ImageFileName + ''', SINGLE_BLOB ) AS x'
        PRINT @strSQLtoExecute 
        EXEC SP_executeSQL @strSQLtoExecute, @ImageFileName

FETCH NEXT FROM IMGPATH INTO @ImageFileName
 END

CLOSE IMGPATH
DEALLOCATE IMGPATH 
```

执行时出现以下错误

```
INSERT tempImage (imageData) 
    SELECT BulkColumn 
    FROM OPENROWSET(BULK 'C:\Temp\Images\1.jpg', SINGLE_BLOB ) AS x 
```

> 消息 102，级别 15，状态 1，第 1 行
> '1.' 附近的语法不正确。

```
INSERT tempImage (imageData) 
    SELECT BulkColumn 
    FROM OPENROWSET(BULK 'C:\Temp\Images\10.jpg', SINGLE_BLOB ) AS x 
```

> 消息 102，级别 15，状态 1，第 1 行
> '10.' 附近的语法不正确。

```
INSERT tempImage (imageData) 
    SELECT BulkColumn 
    FROM OPENROWSET(BULK 'C:\Temp\Images\11.jpg', SINGLE_BLOB ) AS x 
```

> 消息 102，级别 15，状态 1，第 1 行
> '11.' 附近的语法不正确。

但是，如果我单独执行每个语句，它就可以正常工作。

现在很迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:27:04.613

参数语句应如下所示：

```
EXEC SP_executeSQL @strSQLtoExecute, @ImageFileName=@ImageFileName 
```

我认为这将解决您的问题。

或者，完全省略参数，并更改执行字符串：

```
 SET @strSQLtoExecute = N'INSERT tempImage (imageData) SELECT BulkColumn FROM OPENROWSET(BULK ''C:\Temp\Images\'' + @ImageFileName + '''', SINGLE_BLOB ) AS x' 
```

# c# - 处理 @@Identity 时的无效演员表

> ID：11689696
> 
> 赞同：2
> 
> 时间：2012-07-27T14:18:22.837
> 
> 标签：c#, sql, winforms

我有一个包含以下类方法的 winforms 应用程序：

```
public aSqlQuery(SqlCommand pSqlCom, string pMode = "object", bool pGetID = false)
    {
        try
        {
            string strConnection = aSystem.ConnectionString;
            SqlConnection linkToDB = new SqlConnection(strConnection);
            pSqlCom.Connection = linkToDB;

            switch (pMode)
            {
                case "non query":
                    {
                        linkToDB.Open();
                        pSqlCom.ExecuteNonQuery();
                        if (pGetID == true)
                        {
                            SqlCommand sqlCom = new SqlCommand("SELECT @@IDENTITY;", linkToDB);
                            this.LastID = (int)sqlCom.ExecuteScalar();
                        }
                        linkToDB.Close();
                    }
                    break; 
```

加上其他开关

pSqlCom (SqlCommand) 执行得很好，因为我可以看到写入数据库的数据。但是随后的“SELECT @@IDENTITY”语句给出了无效的强制转换错误我做错了什么，如何在我的类方法中检索 SQL 创建的新 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:27:07.353

插入行并获取它给出的 Id [`SCOPE_IDENTIY()`](http://msdn.microsoft.com/en-us/library/ms190315.aspx)，不要使用`@@IDENTITY`.

您需要`SCOPE_IDENTITY()`在相同的连接和范围上使用，就在`INSERT`.

* * *

~~在您的示例中，没有`INSERT`在您的连接上执行，因此您不能期望获得最后生成的 Id。~~

在您的示例中，不清楚`pSqlCom`执行一个`INSERT`，如果它不执行任何 indentity 函数将返回`NULL`，该函数无法转换为`int`

* * *

**编辑**

您想要使用`SCOPE_IDENTITY()`并且想要以`Command`与`INSERT`.

所以，你的陈述应该是这样的

```
var sql =
@"INSERT <Your Data> <Your Table>;
SELECT SCOPE_IDENTIY();"

using (SqlConnection connection = new SqlConnection(strConnection))
{
    using (SqlCommand command = new SqlCommand(sql, connection))
    {
        connection.Open();
        object result = command.ExecuteScalar();
    }
}

int? id = (int?)(!Convert.IsDBNull(result) ? result : null); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T20:33:10.573

事实证明，正确的答案是 SELECT SCOPE_IDENTITY() 语句必须与之前的 INSERT 语句构成相同的 SqlCommand 的一部分，但我包含在前面的 SqlCommand 'pSqlCom' 中。一旦将 SELECT SCOPE_IDENTITY() 作为 pSqlCom 的一部分包含在内，代码就会正确返回标识。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-27T14:22:54.757

您对命令的调用应该返回不是标量类型的东西。事实上，你需要使用 Int32 来代替。MSDN 上的Chek [ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)。

另外，我建议您使用`SCOPE_IDENTITY()`而不是`@@Identity`. 检查[以下链接](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)以获取详细说明。

# ios - 用于生成唯一 ID 的 iOS 硬件参数

> ID：11689702
> 
> 赞同：3
> 
> 时间：2012-07-27T14:18:44.880
> 
> 标签：ios

您好我想使用任何设备硬件参数为 iOS 设备生成一个唯一 ID。我不想使用 MAC 地址，因为 MAC 地址也有可能被更改。那么请告诉我是否有任何其他唯一的硬件参数可以用来生成唯一的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:22:39.250

我相信与[此类](https://stackoverflow.com/questions/8210705/how-to-save-cfuuid-in-keychain)似的东西是 UUID 的普遍接受的替代品。

简而言之，您需要创建一个 CFUUID，然后将其存储在 iOS 设备上的 Keychain 中，即使您卸载该应用程序也仍然存在。按照这些思路编写了我自己的实现（显然不是我链接到的那个），我还没有遇到任何真正的问题。它甚至可以在您制作的其他应用程序中访问，只要您在超然于您的应用程序中使用相同的安全参数访问它。

# eclipse - 无法确定属性 dfc.data.dir (Documentum) 的值

> ID：11689703
> 
> 赞同：1
> 
> 时间：2012-07-27T14:18:44.570
> 
> 标签：eclipse, documentum

我正在尝试在我的新 Windows 7 64 位机器上设置 Eclipse 以进行 Documentum DFC 开发。我从旧机器上复制了我能想到的所有内容，但在尝试连接到我的文档库时仍然出现此错误：

无法确定属性 dfc.data.dir 的值

![在此处输入图像描述](../Images/df31273477e5588891162d7bdb4f37c2.png)

我的项目指向了正确的目录：

![在此处输入图像描述](../Images/5491c45d8bd4168c3d5a7da7c0871e5f.png)

![在此处输入图像描述](../Images/74473b4700b8af59f67f0ddfa264da94.png)

![在此处输入图像描述](../Images/cd831c08fcca4f953da15a8e5ea2dc5f.png)

有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:08:05.543

尝试将 dfc.properties 放在项目源文件夹的根目录下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:50:27.567

您是否将 eclipse dfc.properties 指向您的 c:\Documentum\config\dfc.properties？

我不知道您是如何配置 Eclipse 安装的，但相对于 composer 的路径应该是：

..\Composer\plugins\com.emc.ide.external.dfc_1.0.0\documentum.config

# asp.net - 在 ASP.net (vb.net) 页面中运行一系列 VBScript？

> ID：11689704
> 
> 赞同：2
> 
> 时间：2012-07-27T14:18:45.647
> 
> 标签：asp.net, vb.net, vbscript

当用户单击特定排列的单选按钮以运行一系列 vbscript（以及很快的 Perl 脚本）时，我有一个要求。

我将所有的 vbscripts 存储在服务器端，它们不需要在远程系统上运行。哦，是的，这些脚本正在我们的 Intranet 中收集有关远程系统的信息。

最好的方法是什么。目前我有这个只运行一个脚本，而不是多个......我应该保留这个还是放弃这个想法。

```
Protected Sub windowsScript(ByVal COMPUTERNAME As String)
    ' Create an array to store VBScript results
    Dim winVariables(1) As String
    Dim filePath As String = COMPUTERNAME & "\C$\Windows\somefile.txt"
    'Execute PsExec on script
    runPsExec(COMPUTERNAME, "systemInfo.vbs", 1)
    'Import data from text file into variables
    textRead(filePath, winVariables)
    System.Threading.Thread.Sleep(1000)
    'Delete the file on server - we don't need it anymore
    runPsExec(COMPUTERNAME, "systemInfo.vbs", 2)
    MsgBox("Windows OS: " & winVariables(0).ToString())
    MsgBox("Service Pack: " & winVariables(1).ToString())

End Sub 
```

此外，在这里很难看到，因为我确实有另一个函数“textRead”，但正在发生的事情是这个特定的脚本存储在客户端，它输出到文本文件的 vbscript。textRead 将读取变量并将文本文件发送回服务器以读取它。

这绝对不是我想做的。我想变得更有活力，再加上我的新脚本……它们根本不需要在客户端上。

任何帮助，将不胜感激 ：）

我正在考虑制作某种类型的 While 循环，不确定这是否可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:49:43.320

通过浏览器执行此操作有点奇怪。在我的公司，我们在登录时使用 vbscript logonscript 收集系统信息，并将结果添加到日志文件中，我们可以通过 webapp 访问该文件以进行研究。有时，当需要时，我们会运行特定的脚本来收集更多数据或通过 windows SCCM 更改某些系统设置。

如果目标是为用户提供有关他的系统的信息，那么有一些很好的实用程序可以在本地运行（但从服务器共享的某个位置）。

编辑

启动多个进程的简单方法

```
dim scripts_to_run, script
const COMPUTERNAME = 0, SCRIPTNAME = 1, EXTRA_PARAMS = 2
scripts_to_run = Array(_
  Array("computer1","script1.vbs",1),_
  Array("computer2","script1.vbs",0),_
  Array("computer3","script3.vbs",3)_
)
for each script in scripts_to_run
  runPsExec script(COMPUTERNAME), script(SCRIPTNAME), script(EXTRA_PARAMS)
  runPsExec join(script,",")
next

sub runPsExec(p1, p2, p3)
  'here coms your code shat runs the script
  wscript.echo p1 & p2 & p3
end sub 
```

或更短的版本

```
dim scripts_to_run, aArgs
scripts_to_run = Array(_
  Array("computer1","script1.vbs",1),_
  Array("computer2","script1.vbs",0),_
  Array("computer3","script3.vbs",3)_
)
for each aArgs in scripts_to_run
  runPsExec aArgs
next

sub runPsExec(aArgs)
  'here coms your code shat runs the script
  wscript.echo aArgs(0) & aArgs(1) & aArgs(2)
end sub 
```

# objective-c - 贴在墙上的 iOS 自定义控件

> ID：11689705
> 
> 赞同：-2
> 
> 时间：2012-07-27T14:18:46.020
> 
> 标签：objective-c, ios, facebook, custom-controls, vk

我正在尝试找到一个具有类似**Facebook**或**VK** Post on the Wall **Control**的外观和功能的控件。它看起来像这样：

![在此处输入图像描述](../Images/93162f9f37cb4b4b1a500803df4eaaae.png)

![在此处输入图像描述](../Images/7b954b10f50dcb404d6aef8aece653fe.png)

**我不需要**将我的**应用程序**与**Facebook**或**VK**集成。我只需要**类似**的外观和**功能**就可以在我的**应用程序**中使用它。我尝试在**CocoaControls**上搜索类似的东西。但是我什么也找不到，而且很遗憾我没有时间编写自己的控件。

**有任何想法吗？我在哪里可以找到类似的东西？**

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:15:44.347

您是指带有控件的栏，即位于键盘上方的栏吗？

如果是这样，请查看[在 uikeyboard 顶部添加工具栏](https://stackoverflow.com/questions/8998134/adding-tool-bar-on-top-of-the-uikeyboard)

# android - 基于某个微调器选择填充另一个微调器

> ID：11689709
> 
> 赞同：3
> 
> 时间：2012-07-27T14:18:55.657
> 
> 标签：android, spinner

我目前在尝试根据第一个选择填充第二个微调器时遇到问题。

我的第一个微调器将在下拉列表中显示如下内容：

选项1 选项2 选项3

然后下面还有另一个微调器：

我只希望 Option1 是特殊的，也就是说，当用户选择 Options1 时，

第二个微调器将显示：

规格1

如果用户选择 Option2 或 Option3，那么他们会显示：

规格 1 规格 2 规格 3。

你可能明白我在说什么。只有选择了 Option1，第二个微调器中才会有唯一的选择。

到目前为止，这是我的 onCreate 代码：

```
// creating adapters for both spinners
 ArrayAdapter<Grid> dataAdapter = new ArrayAdapter<Grid>(this,
            android.R.layout.simple_spinner_item, gridArrayList);

    //first drop down spinner here
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    gridSpinner.setAdapter(dataAdapter);

    regions = getResources().getStringArray(R.array.regions_array);

    defaultRegions = getResources().getStringArray(R.array.default_array);

     final ArrayAdapter<String> regionAdapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, regions);

     final ArrayAdapter<String> defaultAdapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, defaultRegions); //what should appear if user selected Option2 or Option3. 
```

这是我处理第一个微调器选择的代码：

```
 gridSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parent, View v,
                    int position, long rowId) 
            {
                 gridSelect = gridSpinner.getItemAtPosition(position).toString();
                Toast.makeText(LoginActivity.this, gridSelect, Toast.LENGTH_SHORT)
                        .show();

                gridInteger = (int) gridSpinner.getItemIdAtPosition(position);

                switch(gridInteger)
                {
                case 0:
                    regionSpinner.setAdapter(regionAdapter); //hint region adapter has spec1.
                    regionAdapter.notifyDataSetChanged();

                    break;
                default:
                    regionSpinner.setAdapter(defaultAdapter);
                    regionAdapter.notifyDataSetChanged();
                    break;

                }

            } 
```

如果有人能指出我正确的方向或可能告诉我哪里出错了，我将非常感激。再次感谢你！

# php - Magento - 继续检查主题中的按钮位置

> ID：11689711
> 
> 赞同：6
> 
> 时间：2012-07-27T14:19:08.760
> 
> 标签：php, magento, file-location

我正在寻找在 Magento 购物车中生成“继续结帐”按钮的文件（及其位置）。

尝试将产品添加到购物车，然后继续购物。“继续结帐”按钮位于购物车的右侧。

我正在使用空白主题的黑客变体，如果这有什么不同的话。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T14:28:30.423

生成 Proceed to Checkout 链接的代码位于 templates/checkout/onepage/link.phtml

默认情况下，它的块在 checkout.xml 中；

```
 <block type="core/text_list" name="checkout.cart.methods" as="methods" translate="label">
                <label>Payment Methods After Checkout Button</label>
                <block type="checkout/onepage_link" name="checkout.cart.methods.onepage" template="checkout/onepage/link.phtml"/>
                <block type="checkout/multishipping_link" name="checkout.cart.methods.multishipping" template="checkout/multishipping/link.phtml"/>
            </block> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T14:29:24.410

```
app/design/frontend/your_package/your_theme/template/checkout/onepage/link.phtml 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T14:29:18.313

导致单页结帐的“继续结帐”按钮是使用此模板生成的：`checkout/onepage/link.phtml`。

通过查看布局文件的`checkout_cart_index`句柄，您应该能够知道哪些按钮与哪些模板一起添加。`checkout.xml`命名的块`checkout.cart.methods`包含所有按钮，两个基本结帐按钮应直接添加到同一文件中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-27T14:33:30.330

转到*系统*->*配置*->*开发人员*将*当前配置范围*更改为您的某些网站或商店，而不是转到*调试*部分 - 并将*模板路径提示*设置更改为“是”。现在，在前端，您将在文件系统上为每个渲染的块看到模板文件的完整路径，因此现在您可以看到模板（渲染链接）存在的位置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-27T07:54:19.833

在根目录中打开此路径

```
/app/design/frontend/base/default/template/checkout/onepage/link.phtml 
```

找到这个代码

```
<?php if ($this->isPossibleOnepageCheckout()):?>
    <button type="button" title="<?php echo Mage::helper('core')->quoteEscape($this->__('Proceed to Checkout')) ?>" class="button btn-proceed-checkout btn-checkout<?php if ($this->isDisabled()):?> no-checkout<?php endif; ?>"<?php if ($this->isDisabled()):?> disabled="disabled"<?php endif; ?> onclick="window.location='<?php echo $this->getCheckoutUrl() ?>';"><span><span><?php echo $this->__('Proceed to Checkout') ?></span></span></button>
<?php endif?> 
```

# xml - XSLT 删除 SOAP 信封但保留名称空间

> ID：11689719
> 
> 赞同：1
> 
> 时间：2012-07-27T14:19:35.410
> 
> 标签：xml, xslt

我需要从肥皂信息中删除肥皂信封。为此，我想使用 XSLT，而不是 java。操作这种类型的 xml 将是更合适的解决方案。

例如，我有一条肥皂信息：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
                  xmlns:tar="namespace" 
                  xmlns:tar1="namespace">
    <soapenv:Header/>
    <soapenv:Body>
        <tar:RegisterUser>
            <tar1:Source>?</tar1:Source>
            <tar1:Profile>
                <tar1:EmailAddress>?</tar1:EmailAddress>

            </tar1:Profile>
        </tar:RegisterUser>
    </soapenv:Body>
</soapenv:Envelope> 
```

我希望我的输出是这样的：

```
<tar:RegisterUser xmlns:tar="namespace" xmlns:tar1="namespace">
    <tar1:Source>?</tar1:Source>
    <tar1:Profile>
        <tar1:EmailAddress>?</tar1:EmailAddress>

    </tar1:Profile>
</tar:RegisterUser> 
```

有人可以为我提供一些关于如何做到这一点的想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T15:54:58.233

这摆脱了`soapenv:`元素*和*命名空间声明。

```
<xsl:stylesheet 
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
>
  <xsl:output indent="yes" />

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="soapenv:*">
    <xsl:apply-templates select="@* | node()" />
  </xsl:template>
</xsl:stylesheet> 
```

结果：

```
<tar:RegisterUser xmlns:tar="namespace">
  <tar1:Source xmlns:tar1="namespace">?</tar1:Source>
  <tar1:Profile xmlns:tar1="namespace">
    <tar1:EmailAddress>?</tar1:EmailAddress>
  </tar1:Profile>
</tar:RegisterUser> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T15:37:56.440

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
    version="1.0">

    <xsl:output method="xml" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/">
        <xsl:copy-of select="/soapenv:Envelope/soapenv:Body/*"/>
    </xsl:template>
</xsl:stylesheet> 
```

**输出：**

```
<?xml version="1.0" encoding="utf-8"?>
<tar:RegisterUser xmlns:tar="namespace" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tar1="namespace">
    <tar1:Source>?</tar1:Source>
    <tar1:Profile>
        <tar1:EmailAddress>?</tar1:EmailAddress>
    </tar1:Profile>
</tar:RegisterUser> 
```

不幸的是，我找不到任何简单的方法来删除该`xmlns:soapenv`属性。

# sql - 如何在rails中添加条件where子句

> ID：11689720
> 
> 赞同：10
> 
> 时间：2012-07-27T14:19:37.407
> 
> 标签：sql, ruby-on-rails, ruby, conditional, rails-activerecord

我是 Rails 新手，正在尝试使用 Rails 对表执行搜索，而我只是使用我的 sql 知识来执行此操作。但这看起来甚至不像铁轨或红宝石......

有没有更好的方法来做我在下面做的事情？（基本上，只有在填写日期参数时才将日期参数传递给 sql）

```
def search(begin_date=nil, end_date=nil)

    subject = " and created_at "

    if !(begin_date.nil? || end_date.nil?)
      where_part = subject + "BETWEEN :begin_date AND :end_date"
    else if (begin_date.nil? && end_date.nil?) 
      where_part = ""
    else if(begin_date.nil?)
      where_part = subject + " <= :end_date"
    else if (end_date.nil?)
      where_part = subject + " >= :begin_date"
    end
    end
    end
    end

    User.joins(places: {containers: {label: :user}}).where("users.id= :user_id "+where_part, user_id: self.id, begin_date:begin_date, end_date:end_date).group(...).select(...)
end 
```

**编辑**

用户.rb

```
has_many :containers
has_many :user_places
has_many :places, through: :user_places
has_many :labels 
```

地点.rb

```
has_many :containers
has_many :user_places
has_many :users, through: :user_places 
```

容器.rb

```
belongs_to :label
belongs_to :place
belongs_to :user 
```

标签.rb

```
belongs_to :user
has_many :containers 
```

基本上，我想计算给定用户标签内或具有直接关系的容器数量，每个位置，并希望能够按开始和结束日期对其进行过滤。

这两个日期中的任何一个都可能为零，所以我需要在我的“查询”中解决这个问题。

我的问题是：我怎样才能做到这一点？我看了一下[http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)，也许我可以在这里的某个地方使用except命令......但是这个关系模型似乎有点复杂，用ActiveRecord做到这一点......怎么可能我？，我真的认为我应该使用 ActiveRecord，但是如何？

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-27T18:24:43.783

您可以对查询应用多个`where`调用，以便构建基本查询：

```
query = User.joins(...)
            .group(...)
            .select(...)
            .where('users.id = :user_id', :user_id => self.id) 
```

然后`where`根据您的日期间隔添加另一个呼叫：

```
if(begin_date && end_date)
  query = query.where(:created_at => begin_date .. end_date)
  # or where('created_at between :begin_date and :end_date', :begin_date => begin_date, :end_date => end_date)
elsif(begin_date)
  query = query.where('created_at >= :begin_date', :begin_date => begin_date)
elsif(end_date)
  query = query.where('created_at <= :end_date', :end_date => end_date)
end 
```

每次`where`调用都会使用 AND 为您的整体 WHERE 子句添加另一部分，例如：

```
q = M.where(a).where(b).where(c) 
```

是一样的说法`WHERE a AND b AND c`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:34:54.280

我想不出为什么你真的想在你的代码中生成 SQL 的一个很好的理由。活动记录似乎是满足您需求的更有效的解决方案，除非您有理由不能使用它。

[链接解释如何将表与活动记录连接起来](https://stackoverflow.com/questions/764538/ruby-on-rails-how-to-join-two-tables)

# java - 一种在Android应用程序中使用循环解码二维码的方法

> ID：11689722
> 
> 赞同：0
> 
> 时间：2012-07-27T14:19:37.423
> 
> 标签：java, android, qr-code, zxing

我正在实现一种方法来解码 QR 码并返回 Android 应用程序代码中包含的字符。我想运行此方法，直到成功解码 QR 码并且不返回空值。

它在第一个循环中正确运行。但是，当它在第 1 次循环中读取失败时，它很少从第 2 次循环中解码代码。有时它也会进入无限循环。

如果您有一些提示，请告诉我。

```
public String readQRCode(Bitmap file) {
    Reader reader = new MultiFormatReader();
    Result result = null;
    do {
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(intent, REQUEST_IMAGE);
        Toast.makeText(this, "Please try again", Toast.LENGTH_LONG).show();

        LuminanceSource source = new RGBLuminanceSource(file);
        BinaryBitmap binaryBitmap = new BinaryBitmap(new HybridBinarizer(
                source));
        // Decode
        try {
            result = reader.decode(binaryBitmap);
        } catch (NotFoundException e) {
            Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(intent, REQUEST_IMAGE);
            Toast.makeText(this, "Please try again", Toast.LENGTH_LONG).show();
            e.printStackTrace();
        } catch (ChecksumException e) {
            e.printStackTrace();
        } catch (FormatException e) {
            e.printStackTrace();
        }
    } while (result == null || result.getText() == null);

    return result.getText();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:26:14.060

您已经创建了一个看起来很忙的等待循环。您需要完全重写逻辑。

startActivityForResult 不返回值，因此您永远不应该在调用活动时以相同的方法处理结果。您应该在 onActivityResult 中进行处理。

请参阅此处的文档：http: [//developer.android.com/reference/android/app/Activity.html#StartingActivities](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)

在你的情况下：

*   删除循环，不要对 readQRCode 中的“结果”做任何事情
*   添加一个 onActivityResult 方法并在那里执行 startActivityForResult 之后的所有操作
*   如果要循环，请从 startActivityForResult 调用 readQRCode

最终结果不应该有任何类型的循环。

顺便说一句：如果您希望我们更正代码，我们还需要查看您当前的 startActivityForResult 中的内容。

# objective-c - UITableView 具有不同数组设置的多个部分

> ID：11689724
> 
> 赞同：3
> 
> 时间：2012-07-27T14:19:47.970
> 
> 标签：objective-c, ios, xcode, uitableview

我想在uitableview中有7个不同行的部分，我不知道我应该如何编写不同的数组并将其设置在不同的部分中，我只写一个，但每个部分都有相同的数组！

你能帮帮我吗！

提前致谢！

我的意思是像下面的图片，但使用不同的数组：例如，我不想在每个部分都有测试和嘿

这是我的代码：

```
@synthesize monthTitle;

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super init];
if (self) {
    monthTitle = [[NSMutableArray alloc] init];
}
return self;

}

- (void)didReceiveMemoryWarning
{
// Releases the view if it doesn't have a superview.
[super didReceiveMemoryWarning];

// Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
[super viewDidLoad];
 arry = [[NSMutableArray alloc] init];
[arry addObject:@"test"];
[arry addObject:@"hey"];

// Uncomment the following line to preserve selection between presentations.
// self.clearsSelectionOnViewWillAppear = NO;

// Uncomment the following line to display an Edit button in the navigation bar for this view controller.
self.navigationItem.leftBarButtonItem = self.editButtonItem;
UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd 
 target:self action:@selector(addNewItem)];
self.navigationItem.rightBarButtonItem = rightButton;
}

-(void)addNewItem{
[arry addObject:@"New Day"];
    [self.tableView reloadData];
}
//- (IBAction)DeleteButtonAction:(id)sender
//
//{
//    
//    [arry removeLastObject];
//    
//    [self.tableView reloadData];
//    
//}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
[super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
[super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
[super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
[super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
// Return the number of sections.
return 7;
//_week.days.count;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
return [arry count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell = [self.tableView 
                         dequeueReusableCellWithIdentifier:@"Cell"];

cell.textLabel.text = [arry objectAtIndex:indexPath.row];
return cell;

}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

if(section == 0)
    return @"Monday";
else if(section == 1){
    return @"Tuesday";
}else if(section == 2){
    return @"Wednesday";
} else if(section == 3){
    return @"Thuesday";
} else if(section == 4){
    return @"Friday";
} else if(section == 5){
    return @"Saturday";
}else
    return @"Sunday";

}

// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
// Return NO if you do not want the specified item to be editable.
return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle 
  forRowAtIndexPath:(NSIndexPath *)indexPath
{
if (editingStyle == UITableViewCellEditingStyleDelete)  
{
    [arry removeObjectAtIndex:indexPath.row];
    //[self.monthTitle removeObjectAtIndex:indexPath.row];

    [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:
     UITableViewRowAnimationFade];

//    }else if (editingStyle==UITableViewCellEditingStyleInsert) {

} 
```

// [self.tableView reloadData]; }

```
#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
// Navigation logic may go here. Create and push another view controller.
/*
 <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib
  name#>" bundle:nil];
 // ...
 // Pass the selected object to the new view controller.
 [self.navigationController pushViewController:detailViewController animated:YES];
 */
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:29:20.310

我认为以下文档中的数组部分将指导您： [http ://briterideas.blogspot.com/2012/07/uitableview-how-to-part-3-multiple.html](http://briterideas.blogspot.com/2012/07/uitableview-how-to-part-3-multiple.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T14:33:55.240

在 cellForRowAtIndexPath 函数中，放置这样的条件。

```
if(indexpath.section == 0)
{
   cell.textlabel.text = [array1 objectAtIndex:indexpath.row];
}
else if(indexpath.section == 1)
{
   cell.textlabel.text = [array2 objectAtIndex:indexpath.row];
}
..
..
..
etc 
```

# ruby-on-rails - 创建或更新记录

> ID：11689727
> 
> 赞同：1
> 
> 时间：2012-07-27T14:19:56.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想通过唯一 ID 检查是否已创建记录。如果是，我想在金额属性上加 1。如果不是，我想创建它并将金额属性设置为 1。

我已经有了这个：`#@have = current_user.haves.create_or_update_by_id(params[:have])`但我不太确定如何设置正确的金额。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:01:05.000

使用 ActiveRecord 的`increment`方法（[文档](http://apidock.com/rails/ActiveRecord/Persistence/increment)）：

```
@have = current_user.haves.find_or_initialize_by_id(params[:have])
@have.increment(:amount)
@have.save 
```

如果为 nil，它会将 amount 属性初始化为零，并添加作为 by 传递的值（默认为 1）。如果不是 nil，它只是增加属性值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:56:05.510

我可能会将其分为两个操作。

```
@have = current_user.haves.find_or_initialize_by_id(params[:have]) do |h|
  h.amount = 0
end

@have.amount += 1
@have.save 
```

第一个语句将通过其唯一 ID 查找记录，或使用提供的 ID 和数量设置为 0 初始化新记录。该块仅在初始化时运行，而不是在查找时运行。然后无论最初的状态是什么，我们都会增加数量并将记录保存回数据库。

# html - 可以在运行时添加到无序列表

> ID：11689730
> 
> 赞同：3
> 
> 时间：2012-07-27T14:20:01.073
> 
> 标签：html, css, forms

我有一个带有无序列表的简单 HTML 页面。是否可以有一个输入字段，您可以在其中向列表添加更多内容，并在您提交后保存。我想添加的是`<li>`标签内的内容以及`<li>`标签本身。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:34:01.013

这是一个 jsfiddle，其中包含我认为您想要实现的演示：http: [//jsfiddle.net/mvJNq/25/](http://jsfiddle.net/mvJNq/25/)

请注意，我无法回答您应该如何在服务器上执行此操作，因为这取决于您的服务器端代码、数据库等的设置方式。但是，如果您只想将其显示为 HTML，而不是在用户导航离开时将其保存，则根本不需要提交按钮 - 那么您只需要“添加”功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:28:58.370

是的，这是可能的——不，它不会很漂亮。这是你要做的：

1.  使用任何默认列表项/输入创建基本表单
2.  使用 jQuery/JavaScript 将事件处理程序绑定到要添加另一个项目时单击的按钮（或者，您可以跳过此步骤并默认显示另一个项目）
3.  在您的事件上（检查所有输入框是否有用户输入的文本，或第二步中的单击事件）使用 jQuery.append(...) 添加另一个列表项
4.  确保您有一个隐藏的输入字段用作“计数器”，以跟踪列表项的总数并在每次添加新列表项时增加此计数器的值（注意：您可能需要使用ParseInt() 方法，取决于您如何设计该字段的代码）
5.  接收表单输入的页面应首先读取隐藏字段，以便知道要添加多少项目，然后您应该循环遍历项目（for 或 while 循环）以正确添加它们

注意：我不知道您使用哪种服务器端语言来处理接收表单，因此第 5 步是一个相当通用且普遍可行的选项

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T14:23:37.510

当然，这是可能的。

当您想要“保存”这些项目时，就会出现这种情况的复杂性。如果用户离开页面并稍后返回，该数据是否可用？如果是这样，您将需要一个类似 mySQL 或类似的数据库。li 标签也可以存储，但为什么呢？

如果您只需要该会话中可用的信息，您可以将其存储在 JavaScript 变量中并让它循环通过变量并将它们作为`<li>`'s吐出

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T14:39:25.630

如果您确实想使用添加按钮而不是提交：

```
$('#addButton').click(function(){
    var savedContent = $('#input').val();
} 
```

要创建 + 插入，`<li>`您可以使用 javascript 创建元素并将其附加到 ul。如果您有多个 ul 更改索引：

```
var content = document.createElement('li');
content.innerText = savedContent;
document.getElementsByTagName('ul')[0].appendChild(content); 
```

# xml - 获取所有节点的集合，这些节点被后代引用，但本身不是后代

> ID：11689732
> 
> 赞同：0
> 
> 时间：2012-07-27T14:20:08.667
> 
> 标签：xml, xslt, xslt-1.0

我正在寻找一种*可重用*的方法来从 xml 文档中获取所有节点，这些节点是从给定节点的后代引用（通过 id），但不是给定节点本身的后代。例如：

```
<root>
  <somenode>
     <a id="a1"/>
     <aref ref="a1"/>
  </somenode>
  <somenode>
     <a id="a2"/>
     <aref ref="a1"/>
     <aref ref="a2"/>
  </somenode>
</root> 
```

如果给定节点是 /root/somenode[1]，则结果节点集应该是空的。每个引用的 a 都是 /root/somenode[1] 的子节点。另一方面，如果给定的节点是 /root/somenode[2]，则生成的节点集应该包含 /root/somenode[1]/a[1] 而没有其他内容。

重要的是生成的节点集始终以相同的方式排序。此外，解决方案应该只使用 xslt-1.0 并且 exlst 扩展构建到 xsltproc 中（库的确切版本：“使用 libxml 20708、libxslt 10126 和 libexslt 815”）

在此先感谢， 约斯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:35:08.420

根据[http://www.exslt.org/set/functions/difference/index.html](http://www.exslt.org/set/functions/difference/index.html)，libxslt 支持该功能

```
<xsl:key name="el-by-id" match="*" use="id"/> 
```

和

```
<xsl:variable name="refs" select="set:difference(key('el-by-id', descendant::*/@ref), descendant::*)"/> 
```

应该在您的节点作为上下文节点的模板中执行 (with `xmlns:set="http://exslt.org/sets"`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:33:06.783

此处提供的解决方案**不使用任何扩展功能**，并且在任何 XSLT 处理器上都是 100% 可移植的。

**使用 xslt 函数`generate-id()`：**

```
//*[@id = /*/somenode[1]/aref/@ref 
  and 
    not(generate-id(ancestor::somenode) = generate-id(/*/somenode[1]))
   ] 
```

使用密钥可能会带来更高的效率，

**这也可以使用节点集交集的 Kayessian 公式**表示为单个 XPath 1.0 表达式：****

 **```
$ns1[count(.|$ns2) = count($ns2)] 
```

**在纯 XPath 2.0 中，将使用`is`运算符而不是`generate-id()`.**

**这是一个完整的演示**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
  "<xsl:copy-of select=
   "//*[@id = /*/somenode[1]/aref/@ref
      and
        not(generate-id(ancestor::somenode) = generate-id(/*/somenode[1]))
       ]"/>"
============
  "<xsl:copy-of select=
   "//*[@id = /*/somenode[2]/aref/@ref
      and
        not(generate-id(ancestor::somenode) = generate-id(/*/somenode[2]))
        ]"/>"
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root>
  <somenode>
     <a id="a1"/>
     <aref ref="a1"/>
  </somenode>
  <somenode>
     <a id="a2"/>
     <aref ref="a1"/>
     <aref ref="a2"/>
  </somenode>
</root> 
```

**计算 XPath 表达式并将所选节点复制到输出：**

```
 ""
============
  "<a id="a1" />" 
```**

# c# - 最佳登录实践

> ID：11689740
> 
> 赞同：1
> 
> 时间：2012-07-27T14:20:27.793
> 
> 标签：c#, sql, sql-server, winforms, login

我正在构建一个具有登录表单的本地应用程序。
我正在从数据库中检索用户名和密码。

从这里开始最安全的方法是什么，因为我可以做很多事情，我想知道一种方法是否比另一种更好。

我可以`SELECT`直接从我的文本框中：

`SELECT UserId, Password FROM Users_Table WHERE UserId = '" + userIdTextBox.Text + "' AND Password = '" + passwordTextBox.Text + "'"`.

我可以`SELECT`从该表中获取所有内容，然后将 a`SqlDataReader`与文本框进行比较。

```
SELECT UserId, Password FROM Users_Table`<br>
While (myReader.Read())
{
   If (myReader["UserId"] == UserIdTextBox.Text && ...password)
   {
   }  
} 
```

还有很多其他方法可以做到这一点。最好/最安全的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T14:26:31.900

1.  使用[参数化查询](http://msdn.microsoft.com/en-us/library/bb738521.aspx)，而不是[连接文本](http://msdn.microsoft.com/en-us/magazine/cc163917.aspx)作为 SQL 命令。
2.  [散列](http://crackstation.net/hashing-security.htm)您的密码并[存储](http://www.codinghorror.com/blog/2007/09/youre-probably-storing-passwords-incorrectly.html)散列值。加盐[调味](http://www.theregister.co.uk/2012/06/07/linkedin_admits_data_breach/)。
3.  尝试登录时，将用户输入的哈希值与哈希密码进行比较。

基本上，在任何情况下，您都不希望任何人（包括系统管理员）知道密码本身的值。如果你在设计和编码时牢记这条规则，并且尽量不要重新发明轮子，你会没事的。如果您手动创建密码，那么您可能应该为首次登录启用“必须更改密码”选项（感谢[Chris Shain](https://stackoverflow.com/users/571563/chris-shain)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T14:35:18.563

## 1.只返回你需要的（性能部分。1）

您正在寻找登录单个用户，因此`SELECT`任何其他信息都是多余的。当子句满足时，使用`SELECT TOP 1`关键字将允许您仅选择一个条目。`WHERE`

## 2\. 存储过程（性能部分。2）

尽管是可选的，但[存储过程](http://msdn.microsoft.com/en-us/library/ms190669%28v=sql.105%29.aspx)非常适合优化 SQL。从本质上讲，它们是编译好的 SQL，非常适合需要执行很多且可能会变得相当复杂的 SQL。此外，存储过程使用参数，这引出了我的下一点。

## 3\. SQL参数（安全部分。1）

[使用参数](http://www.codeproject.com/Articles/8180/Using-SQLParameters-with-VB-NET-C)。对 SQL 进行参数化有助于防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)，如果被忽视，可能会造成伤害。它使用起来简单直接，在与任何数据库通信时绝对必须！

## 4\. 对您的密码进行加盐和哈希处理（安全部分。2）

将密码存储为纯文本，而不是我暗示你是，是非常不安全的。您最强大的选择是对您的密码进行[加盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)，然后对其进行[哈希](http://en.wikipedia.org/wiki/Cryptographic_hash_function)处理。然后在尝试登录时，应用盐和哈希。这就是你要比较的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:37:43.523

人们提到了 SQL 注入漏洞和哈希/盐，所以我不会在这里讨论它们。

然而，一般的经验法则是在尽可能靠近数据库的地方做尽可能多的工作。这意味着不要从数据库加载到内存中超过必要的内容。

因此，SQL 数据读取器或将整个表加载到内存中的东西将是一个低效的选择。最好的选择是查询与用户输入匹配的用户名/密码（散列密码）组合。然后检查以确保这些记录的 count() 等于 1。如果小于 1，则登录失败。如果大于 1，则说明您的数据库有问题。如果正好为 1，则登录成功。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T14:47:46.540

最好的办法是在您的数据库上有一个存储过程。这样，您也永远不会在客户端公开密码。

要在您的服务器上创建存储过程，请尝试以下操作：

```
 CREATE PROCEDURE AuthenticateUser
(@username VarChar(25),
            @password VarChar(25)) AS
SELECT
COUNT(*)
FROM COMPANY
WHERE Login = @username
AND Password = @password
RETURN @@Rowcount 
```

访问此存储过程的代码如下：

```
 //Open a connection to the database using your connection string
        using (SqlConnection con = new SqlConnection("My Configuration string"))
        {
            //Open the connection
            con.Open();
            //Create a new command for the stored proc, using the existing connection just opened
            using(SqlCommand cmd = new SqlCommand("AuthenticateUser", con))
            {
            cmd.CommandType = CommandType.StoredProcedure;

                //Add the username and password to the command, as paramaters (Prevents a lot of security issues, such as SQL Injection)
            cmd.Parameters.Add("@username", SqlDbType.VarChar, 25).Value = UserIdTextBox.Text;
            cmd.Parameters.Add("@password", SqlDbType.VarChar, 25).Value = "Password";
                //A paramater for the return value, which will be a bool (Only 0 or 1 should be returned from the database/stored proc)
            SqlParameter ret = new SqlParameter("ret", SqlDbType.Int);
            ret.Direction = ParameterDirection.ReturnValue;
            cmd.Parameters.Add(ret);
                //Execute the query
            cmd.ExecuteNonQuery();
            if (Convert.ToBoolean(ret.Value) == true)
            {
                //Login Successful
            }
            else
            {
                //Login Failed
            }
        }
    } 
```

SQLParamaters 有助于减少用户可以与您的数据库进行的交互量，因为它会清理输入而不是盲目地接受他们输入的任何内容（这可能导致他们删除您的整个数据库）。

但请记住。您还应该使用哈希和盐密码。如果你想看这个，[有一个关于堆栈溢出的问题。](https://stackoverflow.com/questions/2138429/hash-and-salt-passwords-in-c-sharp)不这样做是非常糟糕的做法。

# java - 从 PHP 向 Web 服务发送 HashMap 参数

> ID：11689741
> 
> 赞同：5
> 
> 时间：2012-07-27T14:20:30.203
> 
> 标签：java, php, web-services, hashmap, nusoap

实际上，问题*不*在于如何去做，而在于是否是设计错误。我很担心，因为我已经阅读了很多关于在 WS 中仅使用标准数据类型的内容。但是，我在实现一个接收 HashMap 并使用 nuSoap 从 PHP 填充该参数时没有问题。

我有一个带有这个成员的*ParameterBean*类（当然还有 getter 和 setter），其中包括一个 HashMap。

```
private int ID;
private String value;
private String name;
private HashMap<Integer, String> map = new HashMap<Integer, String>(); 
```

以及从此类接收实例的服务。然后从我调用的 PHP 客户端：

```
$map = array(1 => 'Foo', 2 => 'Bar');
$paramsp = array(
    'ID' => '1',
    'value' => 'Some Value',
    'name' => 'A Name',
    'map' => $map
);
$params = array($paramsp);
$resp = $client->call('test',$params);
print_r($client->response); 
```

它就像一个魅力！问题是：这是否令人不悦？这会在未来以某种方式导致头痛吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T00:59:01.490

HashMap 是一种非常标准的数据类型，在 Web 服务中使用时应该不会出现问题。

如您所见，PHP 和 Java 处理哈希映射都没有问题。 [JSON](http://json.org/)支持它们（尽管它们被称为“对象”，并且没有 Java 的显式类型）。

虽然真正深奥的数据类型可能会导致预期可广泛互操作的 Web 服务出现问题，但哈希映射不属于该类别，应该放心使用。

# css - 调整图像大小作为视口调整大小而不切断边

> ID：11689745
> 
> 赞同：0
> 
> 时间：2012-07-27T14:20:50.767
> 
> 标签：css, browser, viewport, image-resizing

我有一个 CSS 问题。我有一个 1024x500 像素的图像。现在的问题是，每当浏览器窗口/视口的宽度更改为低于图像宽度（1024 像素）时，图像就会开始被截断。现在如您所见，当视口大小低于 1024 像素时，我将容器宽度设置为 100%，并且它会按比例调整大小，但随着浏览器调整大小（更小），我的图像的边会越来越被切断。

谁能帮我让我的图像动态调整像素大小（不会丢失任何原始图片 - 没有截断）？

查看我的[网页](http://lamininbeauty.co.za/index2.html)并调整浏览器窗口的大小以了解我的意思。注意图像的侧面被切掉......

HTML：请注意我的原始图像是 1024x500

```
 <div class="ei-slider">
 <ul class="ei-slider-large">
   <li>
   <img src="http://lamininbeauty.co.za/images/large/makeup.jpg" alt="Vertical Sunbed TanCan"/>
   </li>
 </ul>
 </div> 
```

CSS：

大屏幕的普通 CSS

```
.ei-slider{
    position: relative;
    width: 1024px;
    height: 500px;
    margin: 0 auto;
}
.ei-slider-large{
    height: 100%;
    width: 100%;
    position:relative;
    overflow: hidden;
}
.ei-slider-large li{
    position: absolute;
    top: 0px;
    left: 0px;
    overflow: hidden;
    height: 100%;
    width: 100%;
}
.ei-slider-large li img{
    width: 100%;
} 
```

当浏览器窗口低于图像宽度时：1024px：

```
@media screen and (max-width : 1023px){
    .ei-slider{
        width: 100%;
    }   
} 
```

当我的图像被截断时，对于较小的屏幕：注意我的原始图像是 1024x500

```
@media screen and (max-width: 930px) and (min-width : 831px){
    .ei-slider{
        width: 100%;
    }   
    .ei-slider-thumbs li a{
        font-size: 11px;
    }
.ei-slider-large li{
    position: absolute;
    top: 0px;
    left: 0px;
    overflow: visible;
    height: 100%;
    width: 100%;
    }
    .ei-slider-large li img{    /*HERE IS MY PROBLEM*/
        width: 930px;
        height: 454px;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T15:23:25.073

你用：

```
max-width: 100%;
height: auto;
width: auto; /* for ie9 */ 
```

这将使您根据 max-width: 100% 语句动态调整 css 的大小以适应其容器。如果您想要不同，请相应地更改最大宽度语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-11T07:27:45.413

我有一个简单的解决方案。只需根据视口百分比给出宽度参数。

句法 ：

```
width: <Percentage>vw; 
```

例子 ：

```
<img src="Resources/Head.png" alt="" style="width: 100vw; height: 85px"> 
```

在这里，图像的高度是固定的，但宽度将调整为视口的 100%，无论其大小如何。

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T08:45:05.253

我遇到了同样的问题，因为我使用的是相同的 jquery 插件（即滑块）。我发现图像是从 Javascript 代码中传递的附加（内联）样式，实际上它只是向左移动并没有真正被切断。代码将动态值传递给标签，这些值是在重新/加载特定视口宽度时从图像本身获得的。作者在 .js 文件中使用了这个。

```
var $img = $(this);
imgDim = _self._getImageDim( $img.attr('src'));  //gets the dimensions from the image 
```

然后他给图像一个margin-left，像这样

```
$img.css({marginLeft: imgDim.left}); //assigns a new margin-left, overrides any value set for this property in the .css file because it's inline 
```

当视口宽度变小时，这总是一个负值。解决方法是设置

```
$img.css({marginLeft: 0}); 
```

之后对我来说效果很好，没有因更改而出现问题。祝你好运。

# java - 在 varchar 列中存储 snappy 编码数据

> ID：11689749
> 
> 赞同：0
> 
> 时间：2012-07-27T14:21:09.943
> 
> 标签：java, database, encoding, compression, varchar

我正在使用 Snappy-java 对 JSON 数据进行编码，并且我想将结果存储在数据库中的 varchar 列中。
该数据库是一个采用 ISO-8859-1 编码的 oracle 数据库。
插入数据时遇到编码问题。Oracle 似乎无法识别某些字符。

我找到了一种解决方法，方法是在插入压缩数据之前对压缩数据使用 Base64 编码。然后我可以很好地检索它:)

问题在于 Base64 编码增加了我随后存储的数据的长度，从而减少了使用 Snappy 获得的节省......

所以我的问题是：如何在不使用 Base64 编码的情况下存储这些数据？我想使用 varchar 的原因是因为我希望能够使用 oracle 索引访问表而无需访问表（性能绝对是一个问题）。

我也尝试过其他压缩算法，但它们似乎都有同样的问题。我也看过 yEnc 但我找不到任何 java 编码器。此外，我不确定我是否理解 yEnc 列出的所有问题，所以我有点不愿意使用它。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:24:49.623

您正在压缩数据。压缩的结果几乎*总是*二进制数据，而不是文本......我认为 Snappy 也是如此。

要将二进制数据准确地存储为文本，您*应该*使用 Base64 之类的东西。你没有*字符*- 你有字节。

为了有效地存储压缩文本，您应该将数据库列更改为面向二进制的类型而不是面向文本的类型（基本上是 BLOB 而不是 CLOB）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:18:03.280

谢谢大家的帮助！

我终于找到了解决方法。由于我存储的是字节而不是字符，因此我将使用 BLOB 来存储数据。BLOB 的问题是它不能被索引。另一种方法是使用 RAW 类型的列。它存储字节并且是可索引的。不幸的是它太小了（2000 字节）。因此，在我的情况下，答案在于将数据存储在 BLOB 中，并通过两种 RAW 类型的索引访问它，因为数据永远不会超过 4000 字节。

索引如下所示：

```
CREATE INDEX blob_to_raw_prd_ix 
ON product (product_id, 
            substr_dt(blob_summary,2000,1), 
            substr_dt(blob_summary,2000,2001)); 
```

在哪里

*   blob_summary 是我存储数据的 BLOB 列
*   substr_dt 是用户定义的确定性函数（定义如下）

    创建或替换函数 substr_dt(str BLOB, buffer_size int, offset int) RETURN RAW DETERMINISTIC IS BEGIN RETURN dbms_lob.substr(str,buffer_size,offset); 结尾;

要访问数据，我只需要使用别名查询 product_id 和字段，例如

```
SELECT     /*+ index(blob_to_raw_prd_ix) */ product_id, 
                                            substr_dt(blob_summary, 2000, 1) AS summary1, 
                                            substr_dt(blob_summary, 2000, 2001) AS summary2
FROM       product
WHERE      (product_id = ?); 
```

在这种情况下，summary_1 表示 blob 的前 2000 个字节，summary 2 表示最后 2000 个字节。在两个数组summary1 和summary2 上使用串联，我得到了blob 的内容。

这适用于 Jdbc，但我无法使其适用于 Hibernate（还）。这不是最好的解决方案，因为数据在被解释之前需要重新处理。但是，它在没有编码空间开销的情况下解决了数据访问问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:14:30.820

Jon Skeet 简单地使用二进制字段而不是文本字段的答案是显而易见的解决方案。

如果您确实需要使用文本字段，那么首先尝试看看您可以在其中存储什么。我的猜测是您可以存储除零字节之外的任何字节，后者用于终止可变长度字符串。您可以简单地存储一个长度为 255 的字符串，其中包含字节 0x01..0xff，然后检索它以查看您是否准确地获得了这些字节。如果你这样做了，那么唯一要避免的字节是零。

如果我的理论是正确的，那么有几种简单的方法可以在数据扩展有限的情况下摆脱零。最简单的是当你到达 0 时，发送 0x80、0x01。当你得到一个 0x80 时，发送一个 0x80、0x81。然后在解码时，如果看到 0x80，只需获取下一个字节并减去 1。这将使流平均扩展不到 1%（0.78%）。

如果绝对最小化扩展很重要，您可以使用更复杂的编码方案做得更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T14:24:57.267

有问题的字符可能是 Oracle 数据库的控制字符。在任何情况下，您都可能需要考虑将数据保存为“文本”或“clob”而不是 varchar。

除此之外，您可能需要在插入数据之前对数据使用 zip 或 huffman 类型的压缩器。你玩过这样的东西：[如何在 Java 中压缩字符串？](https://stackoverflow.com/questions/3649485/how-to-compress-a-string)?

# eclipse - 是否可以使用相对路径和 Eclipse 变量将 JRE 添加到 Eclipse 中已安装的 JRE？

> ID：11689750
> 
> 赞同：0
> 
> 时间：2012-07-27T14:21:13.150
> 
> 标签：eclipse, eclipse-plugin, eclipse-pde, eclipse-jdt

是否可以在 Eclipse 首选项中使用 Eclipse 变量`${workspace_loc}`或`${eclipse_home}`将 JRE 添加到已安装的 JRE？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:01:01.430

不，您不能为此使用变量，无论是在 JRE 首选项还是执行环境规范中。并且不要按照评论中的建议查看 eclipse.ini，运行 IDE 的 JVM 与用于编译项目的 JRE 无关。

也就是说，还有另一个简单的解决方案（我们在公司中使用）：只需在开发人员已知的固定位置安装最终用户 JVM 的第二个副本，这样您就可以在 JRE 首选项页面中使用该固定路径。

如果您担心两个 JRE 副本（在您的项目中和在固定位置）随着时间的推移变得不同步，那么您可以在您的 Eclipse 项目中使用基于 Ant 的构建器，它有条件地将 JRE 从工作区复制到外部已知在构建期间固定位置。但老实说，这两个副本是否不同步并不重要。如果您的代码是使用 32 位 JRE 编译的，那么它将在您客户部署的另一个 32 位 JRE 上运行，只要它们与字节码兼容。您可以在 Java 项目的 Java 编译器设置中显式设置它。

# php - PHP 和 VB.net - 同一个数据库

> ID：11689754
> 
> 赞同：0
> 
> 时间：2012-07-27T14:21:22.697
> 
> 标签：php, mysql, vb.net, visual-studio

我有一个 PHP 网站，我希望有一个 Windows 应用程序，以便在网站上注册的用户可以轻松地在 Windows 应用程序（Visual Basic .net）中登录

您建议以何种方式让 PHP 和 VB.net 都可以轻松连接到一个数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:25:20.943

您可以在 MYSQL（或其他）中拥有一个数据库，并为您的 VB 应用程序创建一个 Web 服务（[示例 SOAP WS ）。](http://php.net/manual/fr/book.soap.php)

一个用于 php 和 VB 应用程序的数据库 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T14:24:36.370

我会在两者之间创建一个网络服务层。您永远不应该允许用户的应用程序直接连接到您的数据库，因为这使得恶意用户很容易对您的数据库进行任意查询。

我要做的是提供一个接受用户名/密码的 post 参数的 web 服务，然后返回客户端在后续请求中使用的身份验证令牌。然后，我将开发各种其他服务来处理客户端的交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:24:36.813

任何严肃的数据库。

如果您遇到喜欢某种语言的数据库，请继续下一个。

举几个流行的选择：mySQL、Postgres、MSSQL、SQLite。避免访问。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-27T14:26:58.380

我建议使用 MYSQL 数据库。使用 PHP 很容易连接到 MYSQL 数据库。使用 VB.net，您可以连接到 PHP 使用的同一数据库。使用 ADO 一定不会很困难。

# meteor - meteorjs 图像上传/转换

> ID：11689755
> 
> 赞同：4
> 
> 时间：2012-07-27T14:21:24.547
> 
> 标签：meteor

我需要将文件上传到流星，对其进行一些图像处理（必要时进行图像转换，从图像生成缩略图），然后将其存储在外部图像存储服务器（s3）中。这应该尽可能快。您对 nodejs 图像处理库有什么建议吗？还有我如何将文件上传到meteorjs？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T15:04:16.543

我最终得到了以下解决方案：

1) 自定义上传 url 的流星服务器端路由

```
__meteor_bootstrap__.app.stack.splice (0, 0, {
    route: '/upload',
    handle: function (req,res, next) {
        //handle upload
    }.future ()
}); 
```

2）在函数内部使用强大的nodejs模块进行文件上传

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T23:12:02.867

我发现的最简单的解决方案是使用 FilePicker.io。集成到您的 Meteor 应用程序并直接插入 S3 非常容易。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-18T20:40:53.790

在我的启动 (hausor.com) 中，我使用[https://github.com/CollectionFS/Meteor-CollectionFS](https://github.com/CollectionFS/Meteor-CollectionFS)并使用其他插件支持亚马逊 S3 文件上传和图像缩放/裁剪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T07:52:25.510

我认为 Meteor 不支持上传。也许将来有什么计划。与此同时，我要么（假设你可以用 FileReader 或其他东西读取文件）：

a）将文件插入mongo，然后在保存到S3时将其删除

b）将其从客户端保存到 S3（不确定是否有“安全”的方法来执行此操作..即不泄露您的凭据，但可能值得探索）。

c）[如果你不能使用 FileReader] 使用 iframe 或其他东西发布到外部服务器，你可以控制它处理上传，然后从流星服务器与其通信。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-03T14:26:12.487

请在此处查看我的答案之一：[使用流星进行文件上传和下载](https://stackoverflow.com/questions/38727043/file-upload-and-download-using-meteor/41756806#41756806)

我正在使用busboy进行文件上传，仅`fs = Npm.require("fs")`用于文件写入：只需将这些放在busboy中：，保存到是您上传的路径，简单的我们APACHE或文件托管并在其上使用其他端口..

`file.pipe(fs.createWriteStream(saveTo))`

# doctrine-orm - 有没有办法从 Doctrine 2.2 实体中获取 FK 列值？

> ID：11689772
> 
> 赞同：0
> 
> 时间：2012-07-27T14:22:15.910
> 
> 标签：doctrine-orm, foreign-keys, associations

我最近一直在想这个主题。当然，我总是可以创建一个选择 IDENTITY(entity.associated_entity) 的自定义查询。我只是想知道我是否可以在没有这样的额外步骤的情况下做同样的事情。并加入。 **编辑：**当然，没有在实体字段中声明 FK 列的变态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:51:05.473

免责声明：不能保证这实际上是解决此问题的指定方法。

我所做的是为 FK 列添加另一个显式定义。

```
/**
 * @Column(type="integer", length=11, nullable=false)
 */
protected $fktable_id; 
```

即使这可能是一种变态:) 整个教义是

# authentication - Grails Spring Security Core 创建新用户

> ID：11689776
> 
> 赞同：4
> 
> 时间：2012-07-27T14:22:28.623
> 
> 标签：authentication, grails, spring-security, grails-plugin

为 grails 2.1.0 安装最新的 spring-security-core 插件，启动 s2-quickstart com.myapp 用户角色，它创建用户角色和用户角色域，然后生成所有 com.myapp.User 和 com.myapp.Role 来构建基本的 CRUD。现在我正在尝试使用 User create() 方法创建一个“注册”按钮以允许新用户登录，问题是在创建新用户时，这个没有角色，我正在尝试自动- 将“ROLE_USER”分配给通过“注册”按钮和表单注册的每个新用户。

非常欢迎任何帮助或建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T14:40:31.290

检查用户创建成功后，在控制器操作中添加：

```
def roleUser = Role.findByName('ROLE_USER')
UserRole.create user, roleUser, true 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T09:14:25.097

我一直在我的一个应用程序中做这样的事情。我用过

> 生成所有 mypackage.User

User 是扩展 SecUser 的类（由 Spring Security Core 创建的域对象）。我将此代码添加到 UserController：

```
def springSecurityService // injection of Spring Security

def create() {
    def user = springSecurityService.getPrincipal() 
    [userInstance: new User(params)]
}

def save() {
    def map=params
    def userInstance = new User(params)
    if (!userInstance.save(flush: true)) {
        render(view: "create", model: [userInstance: userInstance])
        return
    }

    if (!userInstance.authorities.contains(SecRole.findByAuthority(params.role))) {
        SecUserSecRole.create userInstance, SecRole.findByAuthority(params.role)
    }

    flash.message = message(code: 'default.created.message', args: [message(code: 'user.label', default: 'User'), userInstance.id])
    redirect(action: "show", id: userInstance.id)
} 
```

在 BootStrap 类中，我做了一些角色：

```
def springSecurityService

def init = { servletContext ->

    def userRole = SecRole.findByAuthority('ROLE_USER') ?: new SecRole(authority: 'ROLE_USER').save(failOnError: true)
    def adminRole = SecRole.findByAuthority('ROLE_ADMIN') ?: new SecRole(authority: 'ROLE_ADMIN').save(failOnError: true)
    def moderatorRole = SecRole.findByAuthority('ROLE_MODERATOR') ?: new SecRole(authority: 'ROLE_MODERATOR').save(failOnError: true)
} 
```

在 user/_form.gsp 模板中，我添加了这个选择来选择角色并将其发送到**params**

```
<sec:ifAllGranted roles="ROLE_ADMIN">
<g:select name="role" from="${['ROLE_USER', 'ROLE_MODERATOR', 'ROLE_ADMIN']}" value='ROLE_MODERATOR'/>
</sec:ifAllGranted>

<sec:ifNotLoggedIn>
<div class="hidden"><g:textField name="role" value="ROLE_USER"/></div>
</sec:ifNotLoggedIn> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-20T13:53:51.083

您可以使用此代码：
在检查用户创建成功后将其添加到控制器操作中：

```
def userr = user.save flush:true

UserRole.create userr, roleUser.findByAuthority('ROLE_USER'), true 
```

# c# - 在 NavigationWindow 应用程序中将按钮控件设置为最小化/最大化/关闭按钮？

> ID：11689780
> 
> 赞同：1
> 
> 时间：2012-07-27T14:22:40.363
> 
> 标签：c#, wpf, navigationwindow

我是 WPF 和 C# 的新手，但我开始开发 WPF NavigationWindow 应用程序。我希望它是带有自定义最大化/最小化控件的无边框窗口。但是当我为按钮设置事件时，它们不会影响窗口。

这是我的 XAML：

```
<NavigationWindow x:Class="app.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="app title" Height="600" Width="800" MinHeight="600" MinWidth="800" WindowStyle="None" ResizeMode="NoResize" WindowStartupLocation="CenterScreen" Icon="appIcon.ico" Source="starting.xaml">
</NavigationWindow> 
```

这是我的按钮点击事件：

```
private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            MainWindow window = new MainWindow();
            window.WindowState = WindowState.Minimized;
        } 
```

请原谅我，如果我在重复问题，并且请记住，我是这种编程的新手 :) 所以请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:25:59.250

不要创建新窗口，尝试使用您正在使用的窗口。

试试这个：

```
// MainWindow window = new MainWindow();
this.WindowState = WindowState.Minimized; 
```

# xslt - 使用 XSLT 2.0 添加图形边/引用

> ID：11689786
> 
> 赞同：1
> 
> 时间：2012-07-27T14:23:13.907
> 
> 标签：xslt, xpath, xslt-2.0

我的问题如下：在包含节点和边的结构中，我想添加边以访问所有节点。输入可能是这样的：

```
<graph>
    <item id="1" type="entry">
    </item>
    <item id="2" type="incoming">
    </item>
    <item id="3" type="incoming">
    </item>
    <item id="4" type="body">
        <connection>6</connection>
    </item>
    <item id="5" type="declaration"></item>
    <item id="6" type="contents">
        <connection>7</connection>
    </item>
    <item id="7" type="contents">
        <connection>8</connection>
    </item>
    <item id="8" type="contents"></item>
</graph> 
```

如您所见，所有元素都没有完整的“连接”路径。路径应该通过访问（按给定顺序）所有@type='incoming'、所有@type='declaration'和最后@type='body'来完成，让所有其他连接保持原样。像：

```
<graph>
    <item id="1" type="entry">
        <connection>2</connection>
    </item>
    <item id="2" type="incoming">
        <connection>3</connection>
    </item>
    <item id="3" type="incoming">
        <connection>5</connection>
    </item>
    <item id="4" type="body">
        <connection>6</connection>
    </item>
    <item id="5" type="declaration">
        <connection>4</connection>
    </item>
    <item id="6" type="contents">
        <connection>7</connection>
    </item>
    <item id="7" type="contents">
        <connection>8</connection>
    </item>
    <item id="8" type="contents"></item>
</graph> 
```

我不知道如何实现这一点，因为我必须“记住”我访问过哪些节点。使用 XSLT-2.0 可以实现类似的功能吗？谢谢你的帮助！

ps项目不一定按上面的id排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:30:36.373

通过使用递归模板调用并传递一个累积已访问节点的节点集（或序列）的参数来“记住”哪些节点已经被访问过。XSLT 2.0 使用序列和集合操作使这更容易，但 XSLT 1.0 可以做得很好。

有关示例实现，请参阅[xslt 以跳过已“访问过”的节点](https://stackoverflow.com/questions/4205865/xslt-to-skip-already-visited-nodes)。

# c# - 基于纯文本“文件夹”属性在 TreeView 中显示 TFS 测试用例

> ID：11689787
> 
> 赞同：0
> 
> 时间：2012-07-27T14:23:22.180
> 
> 标签：c#, tfs, treeview

我们部门使用的测试用例是从 SpiraTeam 迁移到 TFS 中的。SpiraTeam 允许将测试用例存储在文件夹层次结构中，例如

Ordering/Order & Stock/发送订单/测试一：发送普通订单

TFS 不支持此层次结构，因此在迁移过程中，我们将每个测试的文件夹层次结构复制为纯文本，现在将其存储在 TFS 工作项中名为“文件夹”的纯文本字段中。

我正在开发一个小型 C# 应用程序，该应用程序将允许在此层次结构中查看测试用例并从中进行编辑。

我计划从层次结构中构建一个 TreeView 来显示测试用例。

我拥有检索测试用例的所有功能，并且目前将它们存储在应用程序内的 WorkItemStore 中，但我有两个问题：

1.  如何在 TreeView 中呈现这些信息？我知道我将不得不使用递归算法，但是关于这个主题的任何研究都会带回有关如何从实际 Windows 目录构建 TreeView 的说明，而不是我需要使用的纯文本字段。我首先使用 .Split 方法将“文件夹”字段拆分为字符串数组。

2.  一旦我将信息输入到 TreeView 中，我将如何根据来自 TreeView 的选择导航到 WorkItemStore 中的正确测试用例，因为 TreeView 节点似乎是基于字符串的？以上面的路径为例，我想要一个比从商店选择工作项更优雅的解决方案 WHERE [Title] = 'Test 1: Send a normal order'。

也许我的第二个问题的解决方案将决定我如何实现这一点，而我的第一个问题可能无关紧要。

对此的一些指示将不胜感激。

谢谢，

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:21:44.023

这是一个可以在 LinqPad 中运行的示例程序。它需要一个 WorkItem （在这种情况下是我创建的一个类）并在将其拆分后沿 Path 遍历，`/`沿行创建节点，如果它在同一集合中找到具有相同文本的节点，则使用该节点反而。

```
void Main()
{
    //Create a treeview with a root node.
    TreeView tv = new TreeView();
    tv.ShowNodeToolTips = true; //Turn on tooltips for this demo.
    tv.Nodes.Add(new TreeNode("Root"));

    //These may need ordering by path before you start.
    var tfsTestCases = new[]
    {
        new WorkItem { Path = "Module/Feature1/SubFeature1/Test1", WorkItemId = 1, },
        new WorkItem { Path = "Module/Feature1/SubFeature1/Test2", WorkItemId = 2, },
        new WorkItem { Path = "Module/Feature1/SubFeature2/Test1", WorkItemId = 3, },
        new WorkItem { Path = "Module/Feature1/SubFeature2/Test2", WorkItemId = 4, },
        new WorkItem { Path = "Module/Feature2/SubFeature1/Test1", WorkItemId = 5, },
        new WorkItem { Path = "Module/Feature2/SubFeature1/Test2", WorkItemId = 6, },
    };

    //Looping through the test cases...
    foreach (var testCase in tfsTestCases)
    {
        //Start at the root of the tree for each work item.
        TreeNode lastNode = tv.Nodes[0];

        //Loop through each part of the path and create a new node.
        //Use the NodeCollection from the one we just created each time through the loop.
        //This allows the next iteration to "walk down" as it goes.
        foreach (var part in testCase.Path.Split('/'))
            lastNode = AddTreeNode(lastNode.Nodes, part);

        //Set the Tag on the last node in the loop, this is the one with the actual Test Case.
        //You can reference the Tag property of "tv.SelectedNode" to get access to the Work Item. If the Tag is null, then it's not a Test Case.
        lastNode.Tag = testCase;
        lastNode.ToolTipText = testCase.WorkItemId.ToString();  //Set for this DEMO.
    }
    //Display the tree.
    tv.Dump();
}

TreeNode AddTreeNode(TreeNodeCollection nodes, String path)
{
    //Try and find a node in the collection matching the specified pathPath.
    var node = nodes.Cast<TreeNode>().Where(node => node.Text == path).SingleOrDefault();
    //If it's not found, create it and add it to the collection of nodes we just searched.
    if (node == null)
    {
        node = new TreeNode(path);
        nodes.Add(parentNode);
    }
    //We need this later, so pass it back.
    return node;
}

class WorkItem
{
    public String Path { get; set; }
    public Int32 WorkItemId { get; set; }
    //etc.
} 
```

# java - 在应用程序中存储 IP 地址的最佳方式是什么？

> ID：11689789
> 
> 赞同：4
> 
> 时间：2012-07-27T14:23:24.133
> 
> 标签：java, spring, jsf-2

我正在开发一个基于 Spring 和 JSF 2.0 的应用程序。需要记住在过去 3 分钟内来自特定 IP 地址的客户端尝试提交表单的次数。如果在 3 分钟内记录了超过 3 次提交尝试，则应显示验证码。

我正在考虑使用在队列（）中`ConcurrentMap<String, ConcurrentLinkedQueue<Long>>`存储 ip 地址（`String`）和提交时间（milis `ConcurrentLinkedQueue<Long>`）。Quartz 将每隔 3 分钟清理一次队列（超过 3 分钟的 milis 将被删除）。要检查是否显示验证码，我将检查队列大小是否 > 3。

这是正确的方法吗？你有更好的想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T14:29:08.413

Java 提供了一个特殊的类来存储 IP 地址：[`java.net.InetAddress`](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html). 与 不同`Long`的是，除了 32 位地址之外，它还能够处理 128 位地址，并且就`String`它使用的内存而言，它不像 a 那样浪费，这在非常大容量的情况下可能变得很重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T14:25:43.450

就个人而言，我将我的 IP 存储为 Longs 而不是 Strings。

您将看到性能提升。

# asp.net-mvc - 命名空间更改 - 找到与名为“Home”的控制器匹配的多种类型

> ID：11689793
> 
> 赞同：34
> 
> 时间：2012-07-27T14:23:26.203
> 
> 标签：asp.net-mvc, namespaces, controller, visual-studio-2012

在更改我的 mvc 项目的命名空间后，我遇到了以下问题：

> 找到了与名为“Home”的控制器匹配的多种类型。如果服务此请求的路由 ('{controller}/{action}/{id}') 未指定命名空间来搜索与请求匹配的控制器，则可能会发生这种情况。如果是这种情况，请通过调用采用“namespaces”参数的“MapRoute”方法的重载来注册此路由。
> 
> 'Home' 的请求找到了以下匹配的控制器：
> 
> **oldns** .Controllers.HomeController
> 
> **newns** .Controllers.HomeController

关于此错误还有其他已回答的问题，但涵盖其他原因：

*   [多个项目](https://stackoverflow.com/questions/7842293/multiple-types-were-found-that-match-the-controller-named-home)
*   [领域](https://stackoverflow.com/questions/8788014/multiple-types-were-found-that-match-the-controller-named-home-in-two-differ)

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-07-27T14:23:26.203

经过一番研究，我发现原因是 bin 文件夹（bin\oldns.dll）中残留的旧 mvc app dll。清洁并没有清除它。我手动删除了 bin 目录的内容，然后一切正常。

# html - gmail客户端的html电子邮件中表格之间的额外空白

> ID：11689800
> 
> 赞同：14
> 
> 时间：2012-07-27T14:23:37.830
> 
> 标签：html, css, html-email

我的代码在

[http://jsfiddle.net/user1212/G86KE/4/](http://jsfiddle.net/user1212/G86KE/4/)

问题出在 gmail 中，它在同一个单元格内的 2 个表格之间留下了额外的空白。我试过了`display:block; margin:0; padding:0; line-height:0;`

但是，它似乎并没有消失。

![在此处输入图像描述](../Images/f551eaec357dd20afa7d58e309d6babc.png)

有解决办法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-07T21:20:04.117

在图像标签中使用 style="display:block" 应该可以。另外，如果您正在使用它，*请不要忘记*将其添加到间隔图像中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T16:52:41.603

样式化 HTML 邮件是可怕的。

一些提示：

`border-spacing:0; /*this should fix the spacing problem*/`

您需要将此应用于您正在使用的所有表，因此您应该将其包含`<style>`在顶部的块中，如下所示：

```
<head>
  <style>
    table {border-spacing: 0;}
  </style>
</head> 
```

（抱歉格式错误，不知何故代码拒绝在多行上正确显示）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-20T08:10:50.210

我知道这不是您可能正在寻找的，但是，...
松开间隔 (spacer.gif)，为了松开响应式电子邮件图像中的大空间，每行必须嵌入一个单元格，而不是显示所有图像都被阻止了。
希望它有所帮助，这是我在我的案例中使用的解决方案。
每行一个单元格：

```
<table border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td>
            <img src="image.jpg" width="600" height="300" />
        </td>
    </tr>
</table> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-08T08:39:35.083

只需添加`style="line-height:50%"`到`<table>`. 您会注意到，如果您的邮件中有文本，这将影响文本行高。要解决此问题，您必须`style="line-height:100%"`在`<td>`with 文本中添加：

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-20T18:38:55.380

所以我知道这可能看起来有点疯狂，但我遇到了完全相同的问题，结果是我的代码中的 brs。是的，我通过嵌套我的 tds 来格式化我的 HTML 的事实导致 gmail 在里面添加了带有 br 标签的新 tds。

我花了一些时间才意识到我们正在将电子邮件页眉和页脚代码转换为文本，然后再将其附加到我们的电子邮件中。

如果您使用类似的方法，我建议“缩小”您的 HTML。

代替：

```
<table>
    <tr>
        <td>
            Content
        </td>
    </tr>
</table> 
```

尝试：

```
<table><tr><td>Content</td></tr></table> 
```

尽管看起来很可怕。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-17T19:06:52.027

`display:block`对我的正文和页脚之间的间隙问题很有用，但它对我的页眉没有任何作用；其他修复也没有。我知道这是一个旧线程，但如果有人偶然发现它并且上面没有帮助，这对我来说是这样的：

添加`style="line-height:1px; font-size:0.0em;"`到`<td>`包含您的标题表的标签。

您可能必须尝试几个不同的标签才能找到正确的标签，但这是另一种尝试的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-01T07:00:15.653

好吧，我注意到标题和正文的内容实际上是另一个单元格中的表格。为什么不尝试将标题和正文分开并将它们移动到分开的行上？

像这样的东西：

```
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td>
       <!-- Header table -->
    </td>
  </tr>

  <tr>
    <td>
       <!-- Body table -->
    </td>
  </tr>
</table> 
```

另外，只是一个提示，不要使用`<center>`标签来居中。如果您在表格单元格中，只需使用`align="center"`. 这也适用于整个表格，因此为了使表格居中，只需将`align`属性设置为`center`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-28T12:19:11.423

除了添加`display:block`到您的`img`还添加`cellpadding="0" cellspacing="0" border="0"`到您的`table`（重要：不要忘记将其应用于您的包装`table`）

干杯

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2014-03-25T11:59:07.233

只需添加

```
table{ 
font-size:0em;
border-collapse: collapse;
} 
```

它会解决你的问题

# animation - 在关键帧动画之间暂停

> ID：11689802
> 
> 赞同：10
> 
> 时间：2012-07-27T14:21:31.100
> 
> 标签：animation, css

得到一个带有关键帧的简单动画。

```
 @-webkit-keyframes rotation {
    0%   { -webkit-transform: rotate(10deg); }
    25%  { -webkit-transform: rotate(5deg); }
    50%  { -webkit-transform: rotate(10deg); }
    75%   { -webkit-transform: rotate(5deg); }
    100% { -webkit-transform: rotate(10deg); }

} 
```

和

```
.class { -webkit-animation: rotation 1s infinite; } 
```

是否可以在此关键帧动画之间添加暂停？比如5秒？我知道有一个*-webkit-animation-delay*但这只会延迟动画的开始。

PS我知道它只有webkit前缀......最后我通过prefixr得到它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-19T10:29:54.730

在我自己解决这个问题并在 Denny Mueller 的帮助下，我发现关键是在 100% 之前停止。

您可以使用延迟以延迟开始，在第一次迭代之后，延迟将是动画完成后剩余的时间量。

这是我用于实现的内容：

```
@-webkit-keyframes spincube {
    from,to      {                                                    }
    8%,14%       { -webkit-transform: rotateY(-90deg);                }
    24%,30%      { -webkit-transform: rotateY(-90deg) rotateZ(90deg); }
    40%,46%      { -webkit-transform: rotateY(180deg) rotateZ(90deg); }
    56%,62%      { -webkit-transform: rotateY(90deg) rotateX(90deg);  }
    72%,78%      { -webkit-transform: rotateX(90deg);                 }
    88%,94%      { -webkit-transform: rotateX(0deg);                  }
} 
```

如您所见，我在 94% 处停止，剩余的 6% 用于在第一帧暂停。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-25T13:22:26.317

有一个解决方法，但看起来有点脏

```
@-webkit-keyframes rotation {
        0%   { -webkit-transform: rotate(10deg); }
        5%  { -webkit-transform: rotate(5deg); }
        10%  { -webkit-transform: rotate(10deg); }
        15%   { -webkit-transform: rotate(5deg); }
        20% { -webkit-transform: rotate(10deg); }
        100% { -webkit-transform: rotate(10deg); }

    }
.class { -webkit-animation: rotation 5s infinite; } 
```

# javascript - 如何检查对象链中任何地方的“未定义”？

> ID：11689809
> 
> 赞同：4
> 
> 时间：2012-07-27T14:24:21.050
> 
> 标签：javascript, undefined

我想检查复杂对象链中是否缺少任何对象。我想出了以下解决方案，有没有更好的方法来完成同样的事情？

```
var lg = console.log;
var t = { a:{a1: 33, a12:{ aa1d: 444, cc:3 } }, b:00};
var isDefined = function(topObj, propertyPath) {
    if (typeof topObj !== 'object') {
        throw new Error('First argument must be of type \'object\'!');
    }
    if (typeof propertyPath === 'string') {
        throw new Error('Second argument must be of type \'string\'!');
    }
    var props = propertyPath.split('.');
    for(var i=0; i< props.length; i++) {
        var prp = props[i];
        lg('checking property: ' + prp); 
        if (typeof topObj[prp] === 'undefined') {
            lg(prp + ' undefined!');
            return false;
        } else {
           topObj = topObj[prp];
        }        
    }
    return true;
}
isDefined(t, 'a.a12.cc'); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T23:28:26.713

你可以像这样更简单地定义你的函数：

```
var isDefined = function(value, path) {
  path.split('.').forEach(function(key) { value = value && value[key]; });
  return (typeof value != 'undefined' && value !== null);
}; 
```

[jsfiddle](http://jsfiddle.net/mgMFy/)上的工作示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T14:38:06.227

你的概念是好的，但代码必须改变。当一个属性有`null`值时，它不能有任何属性。尝试访问属性`null`会导致错误。要解决此问题，请使用：

```
for (var i=0; i<props.length; i++) {
    var prp = props[i],
        val = topObj[prp];
    lg('checking property: ' + prp); 
    if (typeof val === 'undefined') {
        lg(prp + ' undefined!');
        return false;
    } else if (val === null) {
        return i === props.length-1; // True if last, false otherwise
    } else {
        topObj = val;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-09T12:53:47.547

保持简单，就像你在理论中学到的一样。尝试/捕获自定义函数中引发的异常。

```
let obj1 = {
    x: {
        y: 10
    }
};

export function def(chain){
    try{
        let lookup = eval(chain);
        return true;
    } catch (e){
        return false;
    }
}

//true
document.write(def('obj1.x.y'));
//false (at any moment in the given chain)
document.write(def('obj1.k.v')); 
```

# web-services - 无错误的Web服务部署

> ID：11689818
> 
> 赞同：0
> 
> 时间：2012-07-27T14:24:50.543
> 
> 标签：web-services, deployment, weblogic

我正在尝试将我编写的 Web 服务部署到我的本地 weblogic 服务器。

我在这里部署了其他 Web 服务，但从未遇到任何问题。

当我将以下代码行添加到我的应用程序时，就是我收到错误消息的时候。

**代码行**：

```
@WebService(endpointInterface = "--------------------SessionEJB") 
```

**错误**：

```
[09:17:44 AM] Deploying 2 profiles...
[09:17:44 AM] Wrote EJB Module to C:\JDeveloper\mywork\MyApp\------EJB\deploy\MyAppEJB.jar
[09:17:44 AM] Wrote Enterprise Application Module to C:\JDeveloper\mywork\MyApp\deploy\MyApp.ear
[09:17:44 AM] Redeploying Application...
[09:17:45 AM] [Deployer:149192]Operation 'deploy' on application 'MyApp' is in progress on 'DefaultServer'
[09:17:45 AM] [Deployer:149193]Operation 'deploy' on application 'MyApp' has failed on 'DefaultServer'
[09:17:46 AM] ####  Deployment incomplete.  ####
[09:17:46 AM] Remote deployment failed 
```

没有那行代码，它部署得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:35:09.280

手动部署 EAR，而不是尝试从 Jdeveloper 部署到 weblogic 服务器。

Weblogic 告诉我我的错误。

# mysql - 扭曲的 adbapi 错误和 log.err

> ID：11689820
> 
> 赞同：0
> 
> 时间：2012-07-27T14:24:52.627
> 
> 标签：mysql, twisted, trial

我正在调试“MySQL 服务器已消失”错误。有一个建议的解决方案，或多或少有效：

```
from twisted.enterprise import adbapi
from twisted.python import log
import MySQLdb

class ReconnectingConnectionPool(adbapi.ConnectionPool):
    """Reconnecting adbapi connection pool for MySQL.

    This class improves on the solution posted at
    http://www.gelens.org/2008/09/12/reinitializing-twisted-connectionpool/
    by checking exceptions by error code and only disconnecting the current
    connection instead of all of them.

    Also see:
    http://twistedmatrix.com/pipermail/twisted-python/2009-July/020007.html

    """
    def _runInteraction(self, interaction, *args, **kw):
        try:
            return adbapi.ConnectionPool._runInteraction(self, interaction, *args, **kw)
        except MySQLdb.OperationalError, e:
            if e[0] not in (2006, 2013):
                raise
            log.msg("RCP: got error %s, retrying operation" %(e))
            conn = self.connections.get(self.threadID())
            self.disconnect(conn)
            # try the interaction again
            return adbapi.ConnectionPool._runInteraction(self, interaction, *args, **kw) 
```

取自这里： [http ://www.gelens.org/2009/09/13/twisted-connectionpool-revisited/](http://www.gelens.org/2009/09/13/twisted-connectionpool-revisited/)

但是，异常不仅在我们的 ReconnectingConnectionPool 中被捕获，而且在 _runInteraction 本身中也被捕获。它会触发 log.err，它（显然）做了两件事：

*   打印错误 - 虽然我们的应用程序工作正常
*   更糟糕的是，它使试验失败，因此测试失败。我不确定这是 log.err 问题，但它仍然会发生。

我可以破解 adbapi，但这可能不是最好的主意。有没有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T00:06:35.560

您是否在问即使记录了错误，如何使单元测试通过？尝试[flushLoggedErrors](http://twistedmatrix.com/documents/current/api/twisted.trial.unittest.TestCase.html#flushLoggedErrors)。如果您要问其他问题，请澄清。

# django - Django South 迁移到不同的数据库

> ID：11689821
> 
> 赞同：14
> 
> 时间：2012-07-27T14:24:53.547
> 
> 标签：django, django-south

South 是否尊重数据库路由器？我设置路由器将某些应用程序路由到一个数据库，并将所有其他应用程序路由到默认数据库。我什至确保 South migrationhistory 表在两个数据库中。但是我不能让 South 只在适当的数据库中应用迁移。即，即使我使用 --database 向南运行，它也会将所有迁移应用到我指定的数据库，而不仅仅是从应用程序迁移到该数据库。

帮助！谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-02T08:34:07.330

## “South 尊重数据库路由器吗？” 不，不是的。

问题是 Django 的 DB 路由器基于 Apps/Models 将查询路由到数据库，而 south 基于 Tables。South 真的不知道表对应于哪个模型（尤其是在历史上）。[Andrew Godwin](https://twitter.com/andrewgodwin)目前[正在为 django 开发一个 contrib 模块，](http://www.youtube.com/watch?v=gwP7zLDDdPA)该模块将取代 south 并修复许多此类问题，但现在您必须使用 hacky 方法 ( `--database`, `.using()`) 手动完成大量工作。

为了自动化，我建议让所有表都存在于所有数据库中，并针对所有这些数据库运行所有迁移。只是为了确保所有约束在所有数据库中始终如一地工作。

# c - 如何将具有数组的宏字符串化为#define a_macro {5,7,7,97}？

> ID：11689825
> 
> 赞同：0
> 
> 时间：2012-07-27T14:24:59.297
> 
> 标签：c, macros, embedded

请通过。

```
#define _VERSION_ 1.4
#define DEFAULT_NETWORK_TOKEN_KEY { 3, 6, 5, 100} 
```

// 我不能改变上面的宏但是下面

```
#define STR_VALUE(arg)      #arg
#define FUNCTION_NAME(name) STR_VALUE(name\r)
#define TEST_FUNC      #AP started v _VERSION_
#define TEST_FUNC_NAME FUNCTION_NAME(TEST_FUNC)

#define QUOTE_X(t)#t
#define QUOTE(t)QUOTE_X(t)
#define ABC 100 //{ 3, 6, 5, 100}
#define MYSTR "The value of ABC is"     

const uint8 startMsg[] =  MYSTR " " QUOTE(ABC); 
```

结果：**ABC的值为100**

```
const uint8 startMsg[] =  TEST_FUNC_NAME; 
```

results: **#AP started v 1.4** (Carriage return) // 我也想去掉 v 和 1.4 之间的空格

我想

```
const uint8 startMsg[] = ?? ; 
```

应该导致**#AP started [3.6.5.100] v1.4**（回车）或**#AP started [3,6,5,100] v1.4** （回车）或类似结果。

我正在开发 SOC 芯片，需要在启动时展示它。紧迫的。:)

------ 问题的答案是 ------

```
#define NETTOKENKEY(a,b,c,d)  "[" #a "." #b "." #c "." #d "]"
#define GENNETTOKENKEY(z)    NETTOKENKEY(z) 

#define STRINGIZER(arg)     #arg
#define STR_VALUE(arg)      STRINGIZER(arg)
#define AP_VERSION_STR      "#AP started v" STR_VALUE(_VERSION_)

#define AP_NETVERSION_STR   "#AP started " \
                            GENNETTOKENKEY(DEFAULT_NETWORK_TOKEN_KEY_VALUES) \
                            " v" STR_VALUE(_VERSION_) **"\r"**

const uint8 startMsg[] = AP_NETVERSION_STR ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:04:23.473

*C 预处理器是一个相当简单的文本替换程序，如果*绝对不可能更改`DEFAULT_NETWORK_TOKEN_KEY`宏，我认为它无法完成您需要的操作并生成编译时常量字符串。

转换“数组”表示法特别困难——事实上，不改变数组定义宏的前提可能意味着它是不可能的。

如果可以定义新的宏并重新定义`DEFAULT_NETWORK_TOKEN_KEY`，使其产生与以往相同的值，那么您可以获得所需的结果。

为了说明，请注意您可以编写：

```
#define x             { 3, 45, 5, 49}
#define f4(a,b,c,d)   #a " - " #b ":" #c "/" #d
#define y(z)          f4(z)

y(x) 
```

预处理后，会产生：

```
"{ 3" " - " "45" ":" "5" "/" "49}" 
```

请注意，大括号是参数字符串的一部分。现在，如果你能做到：

```
#define DEFAULT_NETWORK_TOKEN_KEY_VALUES 3, 6, 5, 100
#define DEFAULT_NETWORK_TOKEN_KEY { DEFAULT_NETWORK_TOKEN_KEY_VALUES} 
```

（我保留你的不对称间距，虽然我认为这不是真的必要），那么你可以使用：

```
#define NETTOKENKEY(a,b,c,d)  "[" #a "." #b "." #c "." #d "]"
#define GENNETTOKENKEY(z)    NETTOKENKEY(z)

GENNETTOKENKEY(DEFAULT_NETWORK_TOKEN_KEY_VALUES) 
```

获取字符串“[3.6.5.100]”（对于我的示例中的值）。

摆脱 the`v`和 the之间的空间`1.4`相对容易：

```
#define STRINGIZER(arg)     #arg
#define STR_VALUE(arg)      STRINGIZER(arg)
#define AP_VERSION_STR      "#AP started v" STR_VALUE(_VERSION_)

AP_VERSION_STR 
```

将这些拼凑在一起产生：

```
#define AP_NETVERSION_STR   "#AP started " \
                            GENNETTOKENKEY(DEFAULT_NETWORK_TOKEN_KEY_VALUES) \
                            " v" STR_VALUE(_VERSION_)

static const char version[] = AP_NETVERSION_STR; 
```

如果你想要一个`'\r'`放在末尾，添加`"\r"`到 AP_NETVERSION_STR 宏定义的末尾。字符串连接*非常*有用！

但是，这是基于能够“更改”的定义，`DEFAULT_NETWORK_TOKEN_KEY`以便可以像这样格式化。没有这种改变，我认为你做不到。

* * *

测试是必要的！

```
#define _VERSION_ 1.4
#define DEFAULT_NETWORK_TOKEN_KEY_VALUES 3, 6, 5, 100
#define DEFAULT_NETWORK_TOKEN_KEY { DEFAULT_NETWORK_TOKEN_KEY_VALUES}

#define NETTOKENKEY(a,b,c,d)  "[" #a "." #b "." #c "." #d "]"
#define GENNETTOKENKEY(z)    NETTOKENKEY(z)

GENNETTOKENKEY(DEFAULT_NETWORK_TOKEN_KEY_VALUES)

#define STRINGIZER(arg)     #arg
#define STR_VALUE(arg)      STRINGIZER(arg)
#define AP_VERSION_STR      "#AP started v" STR_VALUE(_VERSION_)

AP_VERSION_STR

#define AP_NETVERSION_STR   "#AP started " \
                            GENNETTOKENKEY(DEFAULT_NETWORK_TOKEN_KEY_VALUES) \
                            " v" STR_VALUE(_VERSION_)

AP_NETVERSION_STR 
```

运行时，我们需要的是经过`gcc -E`轻微清理的输出（删除了空白行和控件）：`#line`

```
"[" "3" "." "6" "." "5" "." "100" "]"

"#AP started v" "1.4"

"#AP started " "[" "3" "." "6" "." "5" "." "100" "]" " v" "1.4" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:49:27.420

您最好使用[Boost.Preprocessor](http://www.boost.org/doc/libs/1_50_0/libs/preprocessor/doc/index.html)提供的 Preprocessor Data 结构。那里的所有宏都在标准 C89 中工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T14:52:44.967

如果可以，为什么要使用宏：

```
uint arr[] = DEFAULT_NETWORK_TOKEN_KEY;
float v = VERSION;

sprintf(buffer, "#AP started [%u.%u.%u.%u] v%f", arr[0], arr[1], arr[2], arr[3], v); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T14:59:28.497

阅读 C 预处理器中的 # 和 ##。你在一些很简单的东西上放了很多包装

[http://gcc.gnu.org/onlinedocs/cpp/Stringification.html](http://gcc.gnu.org/onlinedocs/cpp/Stringification.html)

顺便说一句，AFAIK 您将无法使用预处理器将您的 {} 变成 []

# c# - XmlNode.SelectNodes 返回 0 个节点

> ID：11689829
> 
> 赞同：5
> 
> 时间：2012-07-27T14:25:32.380
> 
> 标签：c#, xml, xpath

我有一个这样的xml：

```
 <?xml version="1.0" encoding="utf-8" ?>
 <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
    <reflection-optimizer use="false"/>
    <session-factory>
           <property name="XX">XX</property>
           <property name="XX">XX</property>
    </session-factory>  
  </hibernate-configuration> 
```

我正在尝试使用 SelectNodes 选择属性节点，并且尝试了以下操作：

```
root.SelectNodes("property");
root.SelectNodes("//property");
root.SelectNodes("/session-factory/property");
root.SelectNodes("descendant::property");
root.LastChild.SelectNodes("child::property"); 
```

但它们都返回 0 个节点。谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T14:42:16.080

看看这个长答案：

[为什么需要 XmlNamespaceManager？](https://stackoverflow.com/questions/7178111/why-is-xmlnamespacemanager-necessary)

它与根节点上的命名空间有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-18T13:22:44.373

```
var nsmgr = new XmlNamespaceManager(root.NameTable);
nsmgr.AddNamespace("x", "urn:nhibernate-configuration-2.2");

var nodes1 = root.SelectNodes("x:property", nsmgr);
var nodes2 = root.SelectNodes("/x:session-factory/x:property", nsmgr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:50:01.223

我建议您使用 LINQ to XML

```
 var xml = XDocument.Parse(
    @"<?xml version=""1.0"" encoding=""utf-8"" ?>
    <hibernate-configuration xmlns=""urn:nhibernate-configuration-2.2"">
    <reflection-optimizer use=""false""/>
    <session-factory>
    <property name=""XX"">XX</property>
    <property name=""XX"">XX</property>
    </session-factory>  
    </hibernate-configuration>");
    var properties = xml.Descendants().Where(p=>p.Name.LocalName.Equals("property")).ToList(); 
```

在此处查看 msdn 以获取更多信息：http: [//msdn.microsoft.com/en-us/library/bb943906.aspx](http://msdn.microsoft.com/en-us/library/bb943906.aspx)

# iphone - 如何在 iOS 上为 NSNetService 找到合适的端口？

> ID：11689830
> 
> 赞同：3
> 
> 时间：2012-07-27T14:25:37.957
> 
> 标签：iphone, macos, networking, bonjour, nssocketport

我正在制作一个包含两个组件的应用程序，一个 iPhone 组件和一个 Mac 组件。他们应该通过 bonjour 相互交流。我在 Mac 端使用以下代码来查找服务的端口：

```
NSSocketPort *socket = [[NSSocketPort alloc] init];
struct sockaddr *addr = (struct sockaddr *)[[socket address] bytes];
int port = 9876;
if(addr->sa_family == AF_INET) {
    port = ntohs(((struct sockaddr_in *)addr)->sin_port);
} else if(addr->sa_family == AF_INET6) {
    port = ntohs(((struct sockaddr_in6 *)addr)->sin6_port);
} else {
    [socket release];
    socket = nil;
    NSLog(@"The family is neither IPv4 nor IPv6\. Can't handle!!!");
} 
```

我也可以在 iPhone 端使用这段代码，在模拟器中运行应用，连接正常。但是，当我尝试在实际的 iPhone 上运行此代码时，我发现 NSSocketPort 在 iPhone 上不可用。当我尝试使用端口 9876 启动服务时，Mac 应用程序在我尝试连接时显示连接被拒绝错误。那么如何在不使用 NSSocketPort 的情况下找到要使用的端口呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T14:04:04.990

好的，我查看了 Apple 的 WiTap 代码并对其稍作修改，为自己编写了一个获取端口的方法：

```
- (int) getPort {
CFSocketContext socketCtxt = {0, self, NULL, NULL, NULL};   

// Start by trying to do everything with IPv6\.  This will work for both IPv4 and IPv6 clients 
// via the miracle of mapped IPv4 addresses.    

CFSocketRef witap_socket = CFSocketCreate(kCFAllocatorDefault, PF_INET6, SOCK_STREAM, IPPROTO_TCP, kCFSocketAcceptCallBack, nil, &socketCtxt);
uint32_t protocolFamily;

if (witap_socket != NULL)   // the socket was created successfully
{
    protocolFamily = PF_INET6;
} else // there was an error creating the IPv6 socket - could be running under iOS 3.x
{
    witap_socket = CFSocketCreate(kCFAllocatorDefault, PF_INET, SOCK_STREAM, IPPROTO_TCP, kCFSocketAcceptCallBack, nil, &socketCtxt);
    if (witap_socket != NULL)
    {
        protocolFamily = PF_INET;
    }
}

/*if (NULL == witap_socket) {
    if (error) *error = [[NSError alloc] initWithDomain:TCPServerErrorDomain code:kTCPServerNoSocketsAvailable userInfo:nil];
    if (witap_socket) CFRelease(witap_socket);
    witap_socket = NULL;
    return NO;
}*/

int yes = 1;
setsockopt(CFSocketGetNative(witap_socket), SOL_SOCKET, SO_REUSEADDR, (void *)&yes, sizeof(yes));

// set up the IP endpoint; use port 0, so the kernel will choose an arbitrary port for us, which will be advertised using Bonjour
if (protocolFamily == PF_INET6)
{
    struct sockaddr_in6 addr6;
    memset(&addr6, 0, sizeof(addr6));
    addr6.sin6_len = sizeof(addr6);
    addr6.sin6_family = AF_INET6;
    addr6.sin6_port = 0;
    addr6.sin6_flowinfo = 0;
    addr6.sin6_addr = in6addr_any;
    NSData *address6 = [NSData dataWithBytes:&addr6 length:sizeof(addr6)];

    CFSocketSetAddress(witap_socket, (CFDataRef)address6);
    /*if (kCFSocketSuccess != CFSocketSetAddress(witap_socket, (CFDataRef)address6)) {
        if (error) *error = [[NSError alloc] initWithDomain:TCPServerErrorDomain code:kTCPServerCouldNotBindToIPv6Address userInfo:nil];
        if (witap_socket) CFRelease(witap_socket);
        witap_socket = NULL;
        return NO;
    }*/

    // now that the binding was successful, we get the port number 
    // -- we will need it for the NSNetService
    NSData *addr = [(NSData *)CFSocketCopyAddress(witap_socket) autorelease];
    memcpy(&addr6, [addr bytes], [addr length]);
    return ntohs(addr6.sin6_port);

} else {
    struct sockaddr_in addr4;
    memset(&addr4, 0, sizeof(addr4));
    addr4.sin_len = sizeof(addr4);
    addr4.sin_family = AF_INET;
    addr4.sin_port = 0;
    addr4.sin_addr.s_addr = htonl(INADDR_ANY);
    NSData *address4 = [NSData dataWithBytes:&addr4 length:sizeof(addr4)];

    CFSocketSetAddress(witap_socket, (CFDataRef)address4);
    /*if (kCFSocketSuccess != CFSocketSetAddress(witap_socket, (CFDataRef)address4)) {
        if (error) *error = [[NSError alloc] initWithDomain:TCPServerErrorDomain code:kTCPServerCouldNotBindToIPv4Address userInfo:nil];
        if (witap_socket) CFRelease(witap_socket);
        witap_socket = NULL;
        return NO;
    }*/

    // now that the binding was successful, we get the port number 
    // -- we will need it for the NSNetService
    NSData *addr = [(NSData *)CFSocketCopyAddress(witap_socket) autorelease];
    memcpy(&addr4, [addr bytes], [addr length]);
    return ntohs(addr4.sin_port);
}

} 
```

我取出了很多错误的东西，所以它可能不是最佳的，但它确实有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-02T23:15:39.503

从 iOS 7 开始，NSNetService 可以为您创建和绑定套接字。如果用端口 0 初始化，它将选择一个随机端口：

```
NSNetService *service = [[NSNetService alloc] initWithDomain:@"local." type:@"_test._tcp." name:@"Test Service" port:0];
[service publishWithOptions:NSNetServiceListenForConnections]; 
```

建立连接后，服务将发送`netService:didAcceptConnectionWithInputStream:outputStream:`给它的委托。

# asp.net - 按下浏览器的后退按钮时出现“索引超出范围”异常。设置断点没有做任何事情

> ID：11689831
> 
> 赞同：1
> 
> 时间：2012-07-27T14:25:41.347
> 
> 标签：asp.net, vb.net

我的项目中有一个特别的页面让我很头疼。

当我直接或通过链接导航到页面时..一切正常。如果我单击该页面上的链接，然后单击返回按钮，我会在第 391 行 `IndexOutOfRangeException`的自定义方法中获得一个（从 Page_Load 调用）。*第 391 行是注释*。如果我添加一堆额外的行来偏移第 391 行，它不会改变。它总是说错误在第 391 行。如果我在方法上设置断点，当我点击后退按钮时它甚至不会捕获它，错误只是再次出现。当我点击后退按钮时，Page_Load 甚至都不会触发。我不知道我应该如何调试它。`LoadInitialData`*`LoadInitialData`*

 *我已经尝试重建项目，尝试启用视图状态，尝试禁用该页面的缓存，我已经注释掉了我可以在第 391 行附近的每一行。我找不到这个错误发生的位置。

在点击后退按钮会导致奇怪的问题之前，我遇到过一些问题。但这是我见过的最奇怪的。

我发现这个页面似乎描述了一个类似的问题，但他们的解决方案没有帮助。 [http://www.codeguru.com/csharp/.net/net_debugging/debugging/article.php/c12891/Getting-Rid-of-the-Back-Button-Problem.htm](http://www.codeguru.com/csharp/.net/net_debugging/debugging/article.php/c12891/Getting-Rid-of-the-Back-Button-Problem.htm)

有人知道我可以在这里做什么吗？*

# silverlight - MEF - 如何编写 WCF RIA DomainService？

> ID：11689833
> 
> 赞同：0
> 
> 时间：2012-07-27T14:25:46.097
> 
> 标签：silverlight, mef, ria

是否可以使用 MEF 编写 WCF RIA 域服务？

假设我在域服务中有以下属性：

```
[Import(RequiredCreationPolicy = CreationPolicy.Shared)]
public TestClass Dependency{ get; set; } 
```

和TestClass..

```
[Export]
public class TestClass
{
    public void Do()
    {

    }
} 
```

我有一个 DomainServiceFactory 类：

```
public class DomainServiceFactory : IDomainServiceFactory
{
    private readonly ComposablePartCatalog _catalog;
    private readonly CompositionContainer _container;

    public DomainServiceFactory()
    {
        _catalog = new TypeCatalog(typeof(DomainService1), typeof(DomainService2));

        _container = new CompositionContainer(_catalog);
        //What should I call here? _container.SatisfyImportsOnce(this);
    }

    #region Implementation of IDomainServiceFactory

    public DomainService CreateDomainService(Type domainServiceType, DomainServiceContext context)
    {
        DomainService domainService;
        var export = _container.GetExports(domainServiceType, null, null).FirstOrDefault();
        if(export != null)
        {
            domainService = (DomainService) export.Value;
        }
        else
        {
            domainService = (DomainService)Activator.CreateInstance(domainServiceType);
        }

        domainService.Initialize(context);

        return domainService;

    }

    public void ReleaseDomainService(DomainService domainService)
    {
        domainService.Dispose();
    }

    #endregion
} 
```

SatisfyImportsOnce 是构建容器的方法吗？输入参数是一个ComposablePart，我应该传入什么？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:38:53.397

当您调用时，您已经在构建容器：

```
_container = new CompositionContainer(_catalog); 
```

而且由于您没有任何进口商品，`DomainServiceFactory`因此没有什么意义`_container.SatisfyImportsOnce(this);`

当您调用`export.Value`时，它将自动满足您的域服务类型的任何导入。你错过/试图实现什么？

# javascript - 返回元素类型

> ID：11689835
> 
> 赞同：1
> 
> 时间：2012-07-27T14:25:47.540
> 
> 标签：javascript, jquery, css, html

是否可以返回元素类型？我想将类的样式添加到没有类属性的 HTML5 对象中。

```
 <!DOCTYPE>
    <html>
        <head>
            <title>My page</title>
        </head>
        <body>
            <header>
                Hello World
            </header>
            <section>
                Another object
            </section>
        </body>
        <!-- jQuery if need be -->
        <script>
            $("body>*").each(function(){
                alert($(this).object());
                // Would alert "header" and "section"
            });
        </section>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:28:16.870

您可以使用[.tagName](https://developer.mozilla.org/en/DOM/element.tagName)：

```
$("body>*").each(function(){
     alert(this.tagName);                
}); 
```

[现场演示](http://jsfiddle.net/MLc8w/)

# actionscript-3 - 在 AS3 中使用可变参数时将数字转换为 int

> ID：11689840
> 
> 赞同：2
> 
> 时间：2012-07-27T14:26:20.810
> 
> 标签：actionscript-3, reflection, variadic-functions

我正在尝试使用 Actionscript 3 进行一些反思，但发现了一个问题。

下面的函数接收变量类型（int、Number、Boolean）的数据。然后它将数据及其类型传递给将根据类型执行某些操作的方法。

```
function aFuncWithVarAgs(... data):void
{
    for(var i:uint=0; i < data.length; i++)
    {
        var typeName:String = describeType(data[i]).@name;

        doSomethingAccordingToType(typeName, data[i]);
    }
} 
```

问题是当我这样做时：

```
var aNumber:Number = 11.0;
var anInt:int = 11;

aFuncWithVarArgs(aNumber, anInt); 
```

所以，*describeType*说*aNumber*和*anInt*都是*int*类型。像这样：

```
<type name="int" base="Object" isDynamic="false" isFinal="true" isStatic="false">
    <extendsClass type="Object"/>
    <constructor>
       <parameter index="1" type="*" optional="true"/>
    </constructor>
</type> 
```

**编辑：**我正在尝试根据类型将字节写入 ByteArray。这是我上面提到的应该向您展示的功能：

```
function doSomethingAccordingToType(typeName:String, data:Object):void
{
    switch (typeName)
    {
        case "Number":
             bytes.writeDouble(data);
             break;
        case "int":
             bytes.writeInt(data); 
             break;
        ...
    }
} 
```

**编辑：**所以，再一次，问题是当我有 9.0 或任何整数浮点数时，我会写一个整数而不是双精度或浮点数，而不是在我收到的任何地方读取数据时都会遇到问题，因为我希望 9.0 写成双精度而不是整数。

**编辑：**有一种方法可以在将参数传递给使用 varargs 声明的函数时强制执行类型，或者在不使用 lib 的情况下执行此操作的更好方法？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:38:29.063

如果您只需要类名，您可以使用`getQualifiedClassName`而不是`describeType`

```
var n:Number = 11.1;
var i:int = 11;
trace(getQualifiedClassName(n));
trace(getQualifiedClassName(i)); 
```

# python - Pyramid 的 add_static_view 是如何工作的？

> ID：11689841
> 
> 赞同：6
> 
> 时间：2012-07-27T14:26:23.913
> 
> 标签：python, web-applications, pyramid

Pyramid 中的 add_static_view(name, path) 是如何工作的？

从文档字符串：

> “`name`参数是一个字符串，表示应用程序相关的本地 URL 前缀。它也可以是完整的 URL。`path`参数是静态文件所在的磁盘路径。这可以是绝对路径、包相对路径或资产规格。”

不知何故，我觉得这个描述不是很准确。

如果我添加一些代码

```
config.add_static_view("static", "/path/to/resource/on/filesystem") 
```

我访问

```
http://localhost:PORT/static/logo.png 
```

我看到了 logo.png，因为它可以在

```
/path/to/resource/on/filesystem/ 
```

现在，如果我有如下代码

```
config.add_static_view("http://myfilehoster.com/images", "myproject:images") 
```

“`path`参数是静态文件所在磁盘上的路径”的描述似乎不再准确，因为实际文件驻留在 myfilehoster 的磁盘上。在我看来，我只是在注册某种标识符（myproject:images），我可以在我的程序代码中使用它来引用“真实”位置“http://myfilehoster.com/images”。例如

```
request.static_url("myproject:images/logo.png") 
```

将被解析为“http://myfilehoster.com/images/logo.png”。

那么这里的文档不准确还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T14:58:39.947

你错过了一些东西。在[关于静态资产的叙述性文档中，](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/assets.html#serving-static-assets)它指出：

> 除了表示 URL 前缀，`name`调用的参数`add_static_view()`也可以是*URL*。到目前为止，我们看到的每个示例都显示了`name`参数作为 URL 前缀的用法。但是，当`name`是*URL*时，可以从外部网络服务器提供静态资产。在此模式下，`name`使用 . 生成 URL 时，将 用作 URL 前缀`pyramid.request.Request.static_url()`。

在[API 文档](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/config.html#pyramid.config.Configurator.add_static_view)中使用了类似的措辞：

> 当使用表示 URL 前缀`add_static_view`的`name`参数调用时，如上所示，后续调用以传递给`pyramid.request.Request.static_url()`的参数开头的路径将生成类似于 的 URL ，这将导致包的 images 子目录中的文件为服务。`path``add_static_view``http://<Pyramid app URL>/images/logo.png``logo.png``mypackage`

使用 URL 会`add_static_view`完全切换 的行为，并且该`path`参数仅被解释为该`.static_url()`方法的符号路径。后面的细节可能没有在文档中明确描述，如果您对此有强烈的感觉，可以在[金字塔问题跟踪器中提出问题。](https://github.com/Pylons/pyramid/issues)

# java - 通过覆盖 ResourceBundle 重用属性文件中的键值

> ID：11689843
> 
> 赞同：0
> 
> 时间：2012-07-27T14:26:29.623
> 
> 标签：java, jsf-2, resourcebundle

我们可以像下面这样重用属性文件中的键值吗？

```
key1=hello
key2=#{key1} world! 
```

谢谢，

* * *

**更新：**下面是覆盖 ResourceBundle 的代码，它可以重用键值，

```
public class Messages extends ResourceBundle {

    public Messages() {
       setParent(getBundle("resources.test", FacesContext.getCurrentInstance().getViewRoot().getLocale()));
           }

    @Override
    public Enumeration<String> getKeys() {
         return parent.getKeys();
    }

    @Override
    protected Object handleGetObject(String key) {

        try {
               return replaceKey(parent, key, 3);
        } catch (Exception e) {        }
    try { return parent.getObject(key);
    } catch (MissingResourceException e) {
        return key;
    }
    catch (Exception e) {
        return key;
    }
}
    private Pattern Pattern = Pattern.compile("\\$\\{([\\w\\.\\-]+)\\}");

    private String replaceKey(ResourceBundle bundle, String key, int iteration) {
    String message = bundle.getString(key);
    if (message != null) {
      StringBuffer sb = new StringBuffer();
      Matcher matcher = Pattern.matcher(message);
      while (matcher.find() && iteration > 0) {
        // the magic
        matcher.appendReplacement(sb, replaceKey(bundle, matcher.group(1), iteration - 1));
      }
      matcher.appendTail(sb);
      return sb.toString();
    }
    return null;
  }

} 
```

请参阅下面的参考

[基本实现](https://stackoverflow.com/questions/6451215/jsf-how-to-remove-the-surrounding-if-message-not-found-in-messagebundle/6452047#6452047)

[手工制作](https://code.google.com/p/reflectiveresourcebundle/source/browse/trunk/net/brockmatt/util/ResourceBundleUtil.java)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:34:02.887

这只有在自定义时才有可能，[`ResourceBundle`](http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html)其中您覆盖该[`handleGetObject()`](http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html#handleGetObject%28java.lang.String%29)方法以检查检索到的捆绑值是否不包含一些特定的语法，这些语法应该相应地替换为另一个捆绑值。

最后只需`ResourceBundle`在`<resource-bundle>`or中注册自定义`<f:loadBundle>`。

# node.js - 节点中 app.js 的范围是什么？

> ID：11689847
> 
> 赞同：0
> 
> 时间：2012-07-27T14:26:45.707
> 
> 标签：node.js, global-variables

在节点应用程序中使用 App.js 中的关键字定义的变量不会像您在网页`var`中使用过的那样（在函数范围之外）放入全局命名空间中。`var`

在 app.js 中使用 var 定义的变量的范围究竟是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:30:33.933

顶级范围是模块（即文件）。变量不能超出此范围。好吧，有一个黑客，但我不推荐它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:32:46.367

每个文件都是最高范围`global`

其实你可以使用

```
process.env.USER_DEFINED_VAR 
```

用于文件之间的全局可访问变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:42:08.553

使用声明的变量的范围`var`是函数的局部变量。

因为 javascript 的唯一作用域是函数作用域。

# mysql - 禁用 MySQL 错误消息

> ID：11689850
> 
> 赞同：0
> 
> 时间：2012-07-27T14:26:56.517
> 
> 标签：mysql, database, x-cart, mcafee

我的网络服务器上安装了 McAfee Secure。我在上面运行 Xcart。MCAfee 向我显示以下消息

> 在我们分析您的 Web 应用程序期间，我们检测到特定于数据库的错误。通过使系统输出诸如此类的错误，通常可以确定数据库版本并注入允许我们提取数据的数据库命令语法。
> 
> 此漏洞可能造成的损害程度因环境和配置而异。虽然通过 Web 应用程序的输入验证可能会导致数据库“抛出”错误，但数据库配置在确定可以更改的程度方面也将发挥重要作用。远程攻击者可能能够访问非常敏感的信息，或获得管理访问权限（完全控制整个数据库功能）。例如，SQL 服务器的某些配置将允许创建用户帐户，并能够控制托管数据库的 Windows 服务器。
> 
> ## >
> 
> **解决方案**是关闭向用户显示数据库错误消息。这也不是最优的，并且可能导致盲 SQL 注入。SQL 盲注仍然是攻击者和驱动蠕虫的目标。如果您需要进一步说明，请联系 McAfee Secure Support。

我的问题是从哪里可以禁用此错误消息？在哪里可以选择

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:28:22.780

一个更好的解决方案是首先修复错误。当然，没有任何代码我无法告诉你如何做到这一点，但修复错误总是比把它们扫到地毯下更好的主意。

# json - SammyJS 从 http 加载 json

> ID：11689851
> 
> 赞同：3
> 
> 时间：2012-07-27T14:26:57.147
> 
> 标签：json, sammy.js

我不清楚我应该如何使用 sammyjs 从外部 API 加载 json。

这段代码很好用：

```
this.get('#/contact', function(context) {
       this.load('somefile.json')
      .then(function(items) {
            $.each(items, function(i, item) {
              context.log(item);
            });
        });

    }); 
```

但是，通过 http 加载的相同 json 失败：

```
this.get('#/contact', function(context) {
       this.load('http://samedomain/api/getdata')
      .then(function(items) {
            $.each(items, function(i, item) {
              context.log(item);
            });
        });

    }); 
```

通过 http 加载时，sammy 不再将 json 视为对象，并且似乎将数据解析为文本。

只是让每个人都清楚这不是域访问的问题。

```
 header('Access-Control-Allow-Origin: *'); 
```

我也不认为这是我的 json 格式的问题，因为它在作为本地文件加载时似乎工作正常。

我的rest api也在使用：

```
"Content-Type: application/json; 
```

**更新：** 我把它放在 wordpress 中使用，并在此处列出它，以防它帮助其他人

```
(function($) {    
var app = $.sammy('#main', function() {
    this.use('Template');

     this.helpers({
            loadJSON: function(location, options, callback) {
                options = $.extend(options, {json: true});
                return new Sammy.RenderContext(this).load(location, options, callback);
            }
        });

    this.get('#/', function(context) {
        this.loadJSON('http://localhost/wp-somesite/wp-admin/admin-ajax.php?action=get_all_cases')
            .then(function(items) {
                $.each(items, function(i, item) {
                  context.log(item);
                });
            });
      });

    });

$(function() {
    app.run('#/');
}); 
```

})(jQuery);

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T16:15:52.867

除了 VoDurden 所说的，您还可以传递显式设置 dataType 的加载选项。如果您查看[Github 上的 Sammy Load 函数](https://github.com/quirkey/sammy/blob/master/lib/sammy.js#L1507)，您会发现它只是 ajax 调用的包装器。

尝试这样的事情：

```
loadOptions =   {
                type: 'get', 
                dataType: 'json',
                data: {query: variable},
            };

context.load("http://path.com/api/", loadOptions); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T08:41:26.957

问题在于 sammy.js 如何确定它正在检索的数据类型。当您加载“mydata.json”时，.json 告诉 sammy.js 这是 JSON 数据，但是在加载“'http://samedomain/api/getdata'”时它假定它只是纯文本数据。

我不知道最好的方法是什么，但两种可能的解决方案是更改路由或使用 this.json(...) 将加载的项目转换为 JSON，如下所示：

```
this.get('#/contact', function(context) {
   this.load('http://samedomain/api/getdata')
  .then(function(items) {
        $.each(this.json(items), function(i, item) {
          context.log(item);
        });
    });

}); 
```

确保您的应用程序已使用 this.use(Sammy.JSON) 加载 JSON 库，并且 JSON 插件已加载到您的脚本定义中。

**编辑：** 另一种选择是您可以编写一个知道加载 JSON 的自定义函数，这是您可以使用的示例插件：

Sammy.JSON.LoadJSON.js：

```
(function($) {
    Sammy.JSON.LoadJSON = function(app) {
        app.helpers({
            loadJSON: function(location, options, callback) {
                options = $.extend(options, {json: true});
                return new Sammy.RenderContext(this).load(location, options, callback);
            }
        });
    }
})(jQuery); 
```

应用程序.js：

```
this.use(Sammy.JSON.LoadJSON);

var app = $.sammy('#mytag', function() {
    this.get('#/contact', function(context) {
        this.loadJSON('http://samedomain/api/getdata')
        .then(function(items) {
            $.each(items, function(i, item) {
                context.log(item);
            });
        });
    });
}); 
```

# java - 我应该在这个系统上为 eclipse 使用什么内存设置？

> ID：11689854
> 
> 赞同：0
> 
> 时间：2012-07-27T14:27:03.007
> 
> 标签：java, eclipse, performance, memory, jvm

我需要在 eclipse 中运行我的程序，我希望通过增加 eclipse 的内存大小来加快这个过程，但我对使用哪些设置感到困惑。

这是我的系统：

```
 Model Name:   MacBook Air
  Model Identifier: MacBookAir3,2
  Processor Name:   Intel Core 2 Duo
  Processor Speed:  1.86 GHz
  Number of Processors: 1
  Total Number of Cores:    2
  L2 Cache: 6 MB
  Memory:   4 GB
  Bus Speed:    1.07 GHz 
```

这是我当前的 eclipse .ini：

```
-startup
../../../plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
../../../plugins/org.eclipse.equinox.launcher.cocoa.macosx_1.1.101.v20120109-1504
-product
org.eclipse.epp.package.java.product
--launcher.defaultAction
openFile
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-XstartOnFirstThread
-Dorg.eclipse.swt.internal.carbon.smallFonts
-XX:MaxPermSize=512m
-Xms1536m
-Xmx1536m
-Xdock:icon=../Resources/Eclipse.icns
-XstartOnFirstThread
-Dorg.eclipse.swt.internal.carbon.smallFonts 
```

我应该在 XX、Xms 和 Xmx 使用什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:39:10.720

使用那些

-server -Xms3g -Xmx3g -Xmn1g -XX:MaxPermSize=256M -XX:ReservedCodeCacheSize=256m -XX:ThreadStackSize=2048 -XX:+HeapDumpOnOutOfMemoryError -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+UseFastAccessorMethods -XX:CMSInitiatingOccupancyFraction =85 -XX:+UseCMSInitiatingOccupancyOnly -XX:+CMSClassUnloadingEnabled -XX:+CMSParallelRemarkEnabled -XX:+UseNUMA -XX:-UseBiasedLocking -XX:+UseTLAB -XX:+DoEscapeAnalysis -XX:+UseCompressedOops -XX:+TieredCompilation -XX: +OptimizeStringConcat -XX:+AlwaysPreTouch

就是这样）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:32:33.963

这些内存设置用于运行 Eclipse IDE，不一定是您在上面编写的程序。

为此，您可以在程序的运行配置中设置特定的 -Xms 和 -Xmx 值。

至于价值......它完全取决于你的程序，所以没有“一刀切”。

关于 Eclipse 参数，您的 Xmx 可能没问题，但我会将 Xms 降低很多，到 256m 左右。

Xms 基本上是程序运行时分配的起始内存大小，Xmx 是最大值。从 1.5gigs 开始似乎有点过分。

# php - 在第一级和第二级之后没有保存递归帮助更改

> ID：11689858
> 
> 赞同：3
> 
> 时间：2012-07-27T14:27:07.457
> 
> 标签：php, recursion, tree

我正在尝试将扁平的 mysql 行转换为树结构。

```
$categories = array(
            array(
                'id' => '1',
                'name' => 'root',
                'parent' => '0',
            ),  
            array(
                'id' => '2',
                'name' => 'first',
                'parent' => '1',
            ),  
            array(
                'id' => '3',
                'name' => 'first',
                'parent' => '1',
            ),  
            array(
                'id' => '4',
                'name' => 'second',
                'parent' => '3',
            ),  
        ); 
```

我首先初始化所有第一级节点，然后调用`build_tree`每个节点。

```
 $hierarchy = array();
    // loop through and get each root node
    foreach($categories as $key => $category) {
        if ($category['parent'] == 0) {

            // initialize this root
            $hierarchy[$category['id']] = $category;
            $hierarchy[$category['id']]['children'] = array();

            // remove this from categories
            unset($categories[$key]);

            $this->build_tree($hierarchy[$category['id']], $categories);

        }   
    }   

    return $hierarchy;

}   

function build_tree(&$node, &$categories) {

    foreach ($categories as $key => $category) {

        // check if this node is the parent
        if ($node['id']  === $category['parent']) {

            $node['children'][$category['id']] = $category;
            $node['children'][$category['id']]['children'] = array();
            unset($categories[$key]);

            $this->build_tree($category, $categories);

        }   
    }   

} 
```

这只返回树的第一层和第二层。

```
array
  1 => 
    array
      'id' => string '1' (length=1)
      'name' => string 'root' (length=4)
      'parent' => string '0' (length=1)
      'children' => 
        array
          2 => 
            array
              'id' => string '2' (length=1)
              'name' => string 'first' (length=5)
              'parent' => string '1' (length=1)
              'children' => 
                array
                  empty
          3 => 
            array
              'id' => string '3' (length=1)
              'name' => string 'first' (length=5)
              'parent' => string '1' (length=1)
              'children' => 
                array
                  empty 
```

`build_tree`当它到达内部时，`id=2`它正在成功地创造孩子。（发现有一个 id=2 的孩子并将其正确附加到 'children' ）

它只是不保存它！谁能看到我做错了什么？当我`var_dump`分层时，它只是第一层和第二层，而不是第三层，即使第三层是在`build_tree`. 任何帮助将不胜感激。泰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:38:30.450

为了性能起见，在递归解决方案之前考虑非递归解决方案通常是一个好习惯。我整理了一些代码，希望可以帮助您解决类别树问题：

```
$dbh->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);
$sth = $dbh->prepare('SELECT * FROM categories');
$sth->execute();
$categories = $sth->fetchAll();

function buildCategoryTree(&$categories)
{

    $tree = array(0=>array('children'=>array()));

    foreach($categories as &$c)
    {
        $tree[$c['id']] = &$c;
    }

    foreach($categories as &$c)
    {
        $parent_id = $c['parent'] ?: 0;
        if(!isset($tree[$parent_id])) $tree[$parent_id]['children'] = array();
        $tree[$parent_id]['children'][] = &$c;
    }

    return $tree[0]['children'];
}

$tree = buildCategoryTree($categories); 
```

如果您在数据库中有以下内容：

```
mysql> SELECT * FROM categories;
+----+------+--------+
| id | name | parent |
+----+------+--------+
|  1 | A    |      0 |
|  2 | B    |      0 |
|  3 | C    |      0 |
|  4 | A1   |      1 |
|  5 | A2   |      1 |
|  6 | B1   |      2 |
|  7 | B2   |      2 |
|  8 | C1   |      3 |
|  9 | A3   |      1 |
| 10 | B2i  |      7 |
| 11 | A1ii |      4 |
| 12 | A1i  |      4 |
+----+------+--------+ 
```

那么代码将产生`$tree`：

```
Array
(
    [0] => Array
        (
            [id] => 1
            [name] => A
            [parent] => 0
            [children] => Array
                (
                    [0] => Array
                        (
                            [id] => 4
                            [name] => A1
                            [parent] => 1
                            [children] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 11
                                            [name] => A1ii
                                            [parent] => 4
                                        )

                                    [1] => Array
                                        (
                                            [id] => 12
                                            [name] => A1i
                                            [parent] => 4
                                        )

                                )

                        )

                    [1] => Array
                        (
                            [id] => 5
                            [name] => A2
                            [parent] => 1
                        )

                    [2] => Array
                        (
                            [id] => 9
                            [name] => A3
                            [parent] => 1
                        )

                )

        )

    [1] => Array
        (
            [id] => 2
            [name] => B
            [parent] => 0
            [children] => Array
                (
                    [0] => Array
                        (
                            [id] => 6
                            [name] => B1
                            [parent] => 2
                        )

                    [1] => Array
                        (
                            [id] => 7
                            [name] => B2
                            [parent] => 2
                            [children] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 10
                                            [name] => B2i
                                            [parent] => 7
                                        )

                                )

                        )

                )

        )

    [2] => Array
        (
            [id] => 3
            [name] => C
            [parent] => 0
            [children] => Array
                (
                    [0] => Array
                        (
                            [id] => 8
                            [name] => C1
                            [parent] => 3
                        )

                )

        )

) 
```

# c# - Ajax 调用删除数据后模型未更新

> ID：11689859
> 
> 赞同：0
> 
> 时间：2012-07-27T14:27:11.043
> 
> 标签：c#, asp.net, ajax, asp.net-mvc-3

我有一个小 POC 网络应用程序，我正在组装，我的一个页面称为“ViewAds”（你可以想象它的作用）。无论如何，对于网站管理员来说，每个广告都有一个删除按钮，该按钮调用一个控制器操作 DeleteAd 的 ajax 调用，该操作只需点击 DAL 即可删除该项目并返回。没有重定向，没有刷新，什么都没有。

Ajax 回调是我负责刷新的地方：

```
success: function(){
url = '@Url.Action("ViewAds","Ad",new{OtherOptionsForDisplayingAdsGo=here})';
window.location.href = url;
} 
```

哪个广告再次命中数据库，并且应该在没有删除广告的情况下返回我的视图。

但是，在我手动刷新之前，该页面仍然显示广告。我还注意到，如果我在 ViewAds 上设置断点，让它有时间更新（我猜），它也可以正常工作。有人知道这里发生了什么吗？

如果你想看的话，这是我的 ViewAds：

```
public ActionResult ViewAds(string getAllAds = "false")
        {
            bool GetAllAds = bool.Parse(getAllAds);
            List<PostedAD> results;
            if (Session["Location"] == null || GetAllAds)
            {
                DataManager _dataProvider = new DataManager();
                results = _dataProvider.FetchAds();
                ViewData["ViewAllAds"] = "True";
                return View("ViewAds", results);
            }
            else
            {
                string Location = Session["Location"].ToString();
                DataManager _dataProvider = new DataManager();
                results = _dataProvider.FetchAdsByLocation(Location);
                ViewData["ViewAllAds"] = "False";
                return View("ViewAds", results);
            }
        } 
```

删除非常直观。`DataManager.Delete()` 它只是在特定广告上调用我。（它工作正常）

那么任何人都可以帮助解决这个问题吗？我不确定发生了什么，尽管我认为这与 ajax 有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:28:15.953

好吧，事实证明我不小心在这个特定函数的 DAL 代码中打开了连接对象。添加：

```
finally
{
    if(conn!=null) conn.Close();
} 
```

在我的方法结束时`FetchAds()`解决了我的问题。

如果有人想准确解释为什么会导致所描述的问题，我很乐意接受这个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:30:13.537

可能是缓存问题。尝试通过附加一个随机查询字符串参数来破坏缓存：

```
window.location.href = "@Url.Action("ViewAds", "Ad", new { OtherOptionsForDisplayingAdsGo = here, _ = DateTime.Now.Ticks.ToString() })"; 
```

# jquery - 使用 jquery 切换音频播放器的播放/暂停按钮

> ID：11689860
> 
> 赞同：0
> 
> 时间：2012-07-27T14:27:14.747
> 
> 标签：jquery, html5-audio

我正在尝试使用 jquery 制作音频播放器，但这样做似乎有一些问题。我可以停止音乐，但似乎无法再次播放。

HTML：

```
 <footer>
        <nav>
            <div id="buttons">
                <buttons type="button" id="playbutton">Stop Music</button>
            </div>
        </nav>
  </footer>
  <audio id="Theme" autoplay>
      <source src="BillaTheme.mp3"/>
  </audio> 
```

查询：

```
$("document").ready(function(){                    
        $("#playbutton").click(function() {
                    if (!$("#Theme").paused)
                    {
                        $("#Theme")[0].pause();           
                        $("#playbutton").text("Play Music");
                    }
                    else
                        {
                            $("#Theme")[0].play();           
                            $("#playbutton").text("Stop Music");
                        }
                });
}); 
```

不确定错误在哪里..需要一些指导...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:28:12.733

`$("#Theme").paused`需要`$("#Theme")[0].paused`- 否则您访问的 jQuery 对象的属性将不起作用。

为了提高可读性，添加`var player = $("#Theme")[0];`然后使用`player.paused`等`player.play()`。

# python - TypeError：*后的函数（）参数必须是序列，而不是生成器

> ID：11689862
> 
> 赞同：6
> 
> 时间：2012-07-27T14:27:25.990
> 
> 标签：python, typeerror

在尝试编写一个微小的混淆类型检查器时，发现了一个不可接受的代码模式。但是，它始终无法正常工作。这是最初为测试它而编写的代码。

```
def statictypes(a):
    def b(a, b, c):
        if b in a and not isinstance(c, a[b]): raise TypeError('{} should be {}, not {}'.format(b, a[b], type(c)))
        return c
    return __import__('functools').wraps(a)(lambda *c: b(a.__annotations__, 'return', a(*(b(a.__annotations__, *d) for d in zip(a.__code__.co_varnames, c)))))

@statictypes
def isallinstance(iterable: object, class_or_type_or_tuple: (type, tuple)) -> bool:
    """isallinstance(iterable, class_or_type_or_tuple) -> bool

    Return whether all items in an iterable are instances of a class or of a
    subclass thereof. With a type as second argument, return whether that is
    all items' type. The form using a tuple, isallinstance(x, (A, B, ...)),
    is a shortcut for any(isallinstance(x, y) for y in (A, B, ...)).
    """
    return all(isinstance(item, class_or_type_or_tuple) for item in iterable) 
```

下面显示了与 Python 解释器的对话，并突出显示了出现的错误。生成了A `TypeError`，但不是预期的。虽然生成器很好，但现在它们失败了。

```
>>> isallinstance(range(1000000), int)
True
>>> isallinstance(range(1000000), (int, float))
True
>>> isallinstance(range(1000000), [int, float])
Traceback (most recent call last):
  File "<pyshell#26>", line 1, in <module>
    isallinstance(range(1000000), [int, float])
  File "C:\Users\schappell\Downloads\test.py", line 5, in <lambda>
    return __import__('functools').wraps(a)(lambda *c: b(a.__annotations__, 'return', a(*(b(a.__annotations__, *d) for d in zip(a.__code__.co_varnames, c)))))
TypeError: isallinstance() argument after * must be a sequence, not generator 
```

`statictypes`函数可以重写，函数可以重新`isallinstance`定义和包装。最简单的解决方案是将生成器重写`statictypes`为列表理解。

```
def statictypes(a):
    def b(a, b, c):
        if b in a and not isinstance(c, a[b]): raise TypeError('{} should be {}, not {}'.format(b, a[b], type(c)))
        return c
    return __import__('functools').wraps(a)(lambda *c: b(a.__annotations__, 'return', a(*[b(a.__annotations__, *d) for d in zip(a.__code__.co_varnames, c)]))) 
```

之后，`isallinstance`一旦从头开始重新创建，将开始按预期工作。说明第二个参数有什么问题是根据`TypeError`需要正确生成的。

```
>>> isallinstance(range(1000000), int)
True
>>> isallinstance(range(1000000), (int, float))
True
>>> isallinstance(range(1000000), [int, float])
Traceback (most recent call last):
  File "<pyshell#29>", line 1, in <module>
    isallinstance(range(1000000), [int, float])
  File "C:\Users\schappell\Downloads\test.py", line 5, in <lambda>
    return __import__('functools').wraps(a)(lambda *c: b(a.__annotations__, 'return', a(*[b(a.__annotations__, *d) for d in zip(a.__code__.co_varnames, c)])))
  File "C:\Users\schappell\Downloads\test.py", line 5, in <listcomp>
    return __import__('functools').wraps(a)(lambda *c: b(a.__annotations__, 'return', a(*[b(a.__annotations__, *d) for d in zip(a.__code__.co_varnames, c)])))
  File "C:\Users\schappell\Downloads\test.py", line 3, in b
    if b in a and not isinstance(c, a[b]): raise TypeError('{} should be {}, not {}'.format(b, a[b], type(c)))
TypeError: class_or_type_or_tuple should be (<class 'type'>, <class 'tuple'>), not <class 'list'> 
```

**问题：**

1.  为什么生成器的第一个功能有时会工作而其他时候会失败？
2.  为什么生成器不被视为序列（因为它生成序列）？
3.  当生成器在某些时候明显工作时，为什么需要一个序列？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T14:32:34.260

1.  因为`isinstance`，就像其他几个古怪的标准库函数一样，当你给它一个元组时，它的作用与其他序列不同。也就是说，它可以工作，并检查类型是否为给定的类型。
2.  因为它不是。请参阅[序列协议定义](http://docs.python.org/library/collections.html#collections-abstract-base-classes)。它需要实现`__getitem__`成为一个。
3.  一个[尚未合并](http://bugs.python.org/issue4806)的错误，它告诉您生成器已损坏，但错误消息不正确。

另外，请不要为了任何正当理由而用这样的类型检查来玷污我们可爱的语言:)。

# schema - XOM 默认命名空间问题

> ID：11689863
> 
> 赞同：0
> 
> 时间：2012-07-27T14:27:29.177
> 
> 标签：schema, xom

我正在尝试将默认命名空间添加到位于不同命名空间中的根元素，但 XOM 不喜欢这样！

例如

```
<env:contentEnvelope 
xmlns:env="http://data.com/Envelope/2008-05-01/" 
xmlns:inv="http://Patents.data.com/2012-01-01/" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
```

我希望通过添加例如 inv 命名空间也成为默认命名空间

```
xmlns="http://Patents.data.com/2012-01-01/" 
```

但 XOM 不会拥有它！

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:18:21.463

是多种因素阻止我添加默认命名空间。与 IT 中的大多数事情一样，解决方案是直截了当的，但并不容易实现：

这里的关键是使用 .addNamespaceDeclaration(“”, namespace) 并将第一个参数设置为“” 这不直观我使用的 .setNamespace() 不起作用。

我也没有意识到使用以下方法创建元素：

```
new Element("env:CEnvelope", IConstants.ENV_NAMESPACE); 
```

自动在根元素中创建命名空间 xmlns:env；我又明确地这样做了；这不会导致问题，但如果您在此之后使用 .addNamespaceDeclaration(“”, namespace) 它将不起作用。

带有 ** 的行就是您所需要的：

```
private void setRoot(){

  Element root = new Element("env:CEnvelope", IConstants.ENV_NAMESPACE);    

  //Add root Element to the Document
  this.doc = new Document(root);

  root.addNamespaceDeclaration("xsi", IConstants.XSI_NAMESPACE);
  **root.addNamespaceDeclaration("", IConstants.PAT_NAMESPACE);
  //root.setNamespaceURI(IConstants.PAT_NAMESPACE);
  //root.addNamespaceDeclaration("env", IConstants.ENV_NAMESPACE); 
```

哦，是的，我不需要 inv 命名空间，因为这与默认命名空间相同！

干杯:-)

# sql - 如何从多个表中为一个目标选择参数，使用 SQL 使它们与同一个目标匹配？

> ID：11689864
> 
> 赞同：0
> 
> 时间：2012-07-27T14:27:26.213
> 
> 标签：sql

这是我的代码：

```
SELECT t.obsid, t.seq_nbr, t.charge_ao_str
    , t.approved_exposure_time, t.status, t.uninterrupt
    , t.phase_constraint_flag, t.multitelescope
    , t.multitelescope_interval, t.constr_in_remarks
    , t.remarks, t.window_flag, t.roll_flag, t.monitor_flag
    , t.pre_id, t.pre_min_lead, t.pre_max_lead, r.roll_constraint
    , r.roll_180, r.roll, r.roll_tolerance, w.window_constraint
    , w.tstart, w.tstop, p.phase_period, p.phase_epoch
    , p.phase_start, p.phase_end, p.phase_start_margin, p.phase_end_margin 
FROM target t, rollreq r, timereq w, phasereq p 

WHERE t.obsid=r.obsid 
    AND t.obsid=w.obsid 
    AND t.obsid=p.obsid 
    AND t.charge_ao_str='13' 
    AND (t.status <> 'canceled' OR t.status <> 'untriggered') 
    AND 
    (
        (t.uninterrupt='Y' OR t.uninterrupt='P') OR 
        (t.phase_constraint_flag='Y' OR t.phase_constraint_flag='P') OR 
        (t.multitelescope='Y' OR t.multitelescope='P') OR 
        (t.constr_in_remarks='Y' OR t.constr_in_remarks='P') OR 
        (t.window_flag='Y' OR t.window_flag='P') OR 
        (t.roll_flag='Y' OR t.roll_flag='P') OR 
        (t.monitor_flag='Y' OR t.monitor_flag='P')
    ) 
```

它似乎只识别语句`t.charge_ao_str='13'`中的`WHERE`，而没有别的。我怎样才能使`WHERE`语句的其余部分起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:40:51.900

尝试使用`JOIN` 看看是否有效

```
SELECT t.obsid, t.seq_nbr, t.charge_ao_str
    , t.approved_exposure_time, t.status, t.uninterrupt
    , t.phase_constraint_flag, t.multitelescope
    , t.multitelescope_interval, t.constr_in_remarks
    , t.remarks, t.window_flag, t.roll_flag, t.monitor_flag
    , t.pre_id, t.pre_min_lead, t.pre_max_lead, r.roll_constraint
    , r.roll_180, r.roll, r.roll_tolerance, w.window_constraint
    , w.tstart, w.tstop, p.phase_period, p.phase_epoch
    , p.phase_start, p.phase_end, p.phase_start_margin, p.phase_end_margin 
FROM target t 
INNER JOIN rollreg r ON t.obsid=r.obsid 
INNER JOIN timereq w ON t.obsid=p.obsid 
INNER JOIN phasereq p ON t.obsid=p.obsid 
WHERE  
    AND t.charge_ao_str='13' 
    AND (t.status <> 'canceled' OR t.status <> 'untriggered') 
    AND 
    (
        (t.uninterrupt='Y' OR t.uninterrupt='P') OR 
        (t.phase_constraint_flag='Y' OR t.phase_constraint_flag='P') OR 
        (t.multitelescope='Y' OR t.multitelescope='P') OR 
        (t.constr_in_remarks='Y' OR t.constr_in_remarks='P') OR 
        (t.window_flag='Y' OR t.window_flag='P') OR 
        (t.roll_flag='Y' OR t.roll_flag='P') OR 
        (t.monitor_flag='Y' OR t.monitor_flag='P')
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:38:58.780

首先，我会考虑使用`JOIN`语法而不是逗号。请参阅下面的更新查询和`JOIN`语法。

第二，你确定你有符合所有`WHERE`条件的记录吗？

```
SELECT t.obsid, t.seq_nbr, t.charge_ao_str
    , t.approved_exposure_time, t.status, t.uninterrupt
    , t.phase_constraint_flag, t.multitelescope
    , t.multitelescope_interval, t.constr_in_remarks
    , t.remarks, t.window_flag, t.roll_flag, t.monitor_flag
    , t.pre_id, t.pre_min_lead, t.pre_max_lead, r.roll_constraint
    , r.roll_180, r.roll, r.roll_tolerance, w.window_constraint
    , w.tstart, w.tstop, p.phase_period, p.phase_epoch
    , p.phase_start, p.phase_end, p.phase_start_margin, p.phase_end_margin 
FROM target t
INNER JOIN rollreq r
    ON t.obsid=r.obsid 
INNER JOIN timereq w
    ON t.obsid=w.obsid 
INNER JOIN phasereq p 
    ON t.obsid=p.obsid 
WHERE t.charge_ao_str='13' 
    AND t.status NOT IN ('canceled', 'untriggered') 
    AND 
    (
        t.uninterrupt IN ('Y', 'P') OR 
        t.phase_constraint_flag IN ('Y','P') OR 
        t.multitelescope IN ('Y','P') OR 
        t.constr_in_remarks IN ('Y', 'P') OR 
        t.window_flag IN ('Y', 'P') OR 
        t.roll_flag IN ('Y', 'P') OR 
        t.monitor_flag IN ('Y', 'P')
    ) 
```

# matlab - Matlab：热图的一些问题

> ID：11689865
> 
> 赞同：0
> 
> 时间：2012-07-27T14:27:35.057
> 
> 标签：matlab, plot, heatmap

请在下面找到我使用 Matlab 生成的 HeatMap 的副本。我有两个问题想解决：

1) 如您所见，HeatMap 仅显示三个不同的值。

```
Red   = 500
Green = 0
Black = 250 
```

不幸的是，颜色栏显示了大约 10 个不同的值，即使是热图中未使用的颜色也是如此。我看不到如何改变这一点。有谁知道我可以如何自定义这个颜色栏/标签，以便它只覆盖实际使用的三个值？

2) 当我尝试绘制此热图时，我收到以下错误消息：

```
hmo = HeatMap(data)
HeatMap object with 20 rows and 20 columns.
plot(hmo);
Error using ==> figure
Invalid property found.
Object Name :  figure
Property Name :  'PagePosition'.
Error in ==> HeatMap.plot at 42
hFig = figure('Renderer',     'ZBuffer',... 
```

非常感谢您的帮助！帕特里克

![Matlab 热图](../Images/ca2624893b76723a4cba035dc7690818.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:28:15.980

从[文档](http://www.mathworks.com/help/toolbox/bioinfo/ref/heatmap.html)中，您可以告诉`HeatMap`使用自定义颜色图：

```
HeatMap(Data, ...'Colormap', ColormapValue, ...) 
```

您只需要 3 个值，因此使用 3 行制作颜色图：

```
cmap = [0 1 0; %# green
        0 0 0; %# black
        1 0 0;]%# red 
```

然后，当您调用 时`HeatMap`，包括名称-值对；

```
hmo = HeatMap(data,'colormap',cmap); 
```

注意：您可能需要手动设置`clim`轴属性。`[0 500]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:09:33.983

该`HeatMap`函数看起来不是内置函数，因此很难说出其中发生了什么。但是，您的颜色条问题更容易解决。

问题是您的颜色图不仅由这三种颜色组成。如果需要，下面的这个示例应该足以向您展示如何手动更改它。

```
% Create some sample data and plot it
p = peaks;
surf(p)
colorbar 
```

这将显示图形：

![使用默认颜色图的图](../Images/f551356762f232dab72ab212fbcf93e7.png)

现在，如果你想让你的自定义`colormap`只显示绿色、黑色和红色（按从下到上的顺序）：

```
yourColorMap = [0 1 0; 0 0 0; 1 0 0]; % green, black red RGB code. One per row
colormap(yourColorMap) 
```

将使您的图像看起来像这样：

![图与您的自定义颜色图](../Images/c07b173b509ff097bfa88ae9f5212c21.png)

# c# - 如何通过定时 Windows 窗体更新实现线程安全？

> ID：11689866
> 
> 赞同：1
> 
> 时间：2012-07-27T14:27:35.103
> 
> 标签：c#

在我的 C# 程序中，我试图让面板每秒调用一次 OnPaint() 以根据当前设置进行一些图形绘制。主窗体使用 System.Timers.Timer 调用 Panel 类的更新方法，该方法以 Refresh() 调用结束。但是当我运行它时，我总是得到一个引用 Refresh 行的 InvalidOperationExcetpion 并说“跨线程操作无效：控制''从创建它的线程以外的线程访问”。它还让我参考这个 MSDN 页面：http: [//msdn.microsoft.com/en-us/library/ms171728.aspx](http://msdn.microsoft.com/en-us/library/ms171728.aspx)

但是该页面上的所有示例似乎都建议将新线程绑定到特定的表单事件。我正在根据计时器进行更新，而不是鼠标单击或类似事件。在单独的线程上运行刷新对我来说听起来不错，但我不确定我会怎么做（我很擅长 Java，但是是 C# 新手）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T14:30:27.877

> 主窗体使用 System.Timers.Timer 调用 Panel 类的更新方法

两种选择：

*   设置[`Timer.SynchronizationObject`](http://msdn.microsoft.com/en-us/library/system.timers.timer.synchronizingobject.aspx)为面板，因此它将触发 UI 线程中的刻度
*   首先使用[`System.Windows.Forms.Timer`](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)，即使在 UI 线程中也总是会提高滴答声

`Control.Invoke`基本上，您不应该从不同的线程访问 UI 元素 - 您可以通过or编组到正确的线程，但是如果您除了更新 UI*之外*`Control.BeginInvoke`没有任何重要的工作要做，您还不如强制计时器在 UI 线程中引发事件。

# regex - 正则表达式在 Shell 中查找和替换多行

> ID：11689868
> 
> 赞同：4
> 
> 时间：2012-07-27T14:27:41.543
> 
> 标签：regex, shell, sed

我的问题与[shell 脚本类似：搜索和替换多行](https://stackoverflow.com/questions/7820503/shell-script-search-and-replace-over-multiple-lines)，但有一个小例外。

在链接的问题中，用户想要这样做：

```
source:
[stuff before]
<!--WIERD_SPECIAL_COMMENT_BEGIN-->
  [stuff here, possibly multiple lines.
<!--WIERD_SPECIAL_COMMENT_END-->
[stuff after]    

target:
[stuff before]
[new content]
[stuff after] 
```

我的问题类似，我想这样做：

```
source:
[stuff before]
<!--WIERD_SPECIAL_COMMENT_BEGIN-->
  [this]
<!--WIERD_SPECIAL_COMMENT_END-->
<!--WIERD_SPECIAL_COMMENT_BEGIN-->
  [not this]
<!--WIERD_SPECIAL_COMMENT_END-->
[stuff after]    

target:
[stuff before]
[new content]
<!--WIERD_SPECIAL_COMMENT_BEGIN-->
  [not this]
<!--WIERD_SPECIAL_COMMENT_END-->
[stuff after] 
```

在适当的多行正则表达式中，这很容易做到：

```
/<!--WIERD_SPECIAL_COMMENT_BEGIN-->.*[this].*<!--WIERD_SPECIAL_COMMENT_END-->/m 
```

但是链接问题中建议的答案使用正则表达式作为不允许检查两个外围边界之间的线的范围。

有没有办法将一个范围内的所有行添加到模式缓冲区，以便我可以一次对所有行进行正则表达式？例如：

```
sed '
    #range between comment beginning and comment end
    /<!--WIERD_SPECIAL_COMMENT_BEGIN-->/,/<!--WIERD_SPECIAL_COMMENT_END-->/
    #Do something to add the lines in this range to pattern buffer
    /.*[this].*/d
    #Delete all the lines if [this] is in the pattern buffer
' <in.txt >out.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T16:29:49.497

使用 Perl，它相对简单。

```
perl -0777pe 's/<!--BEGIN-->\n(?:(?!<!--END-->\n).)*?\[this\].*?\n<!--END-->\n/[new content]\n/s' in.txt 
```

Perl 提供的好处是（a）`-0777`“slurp 模式”，它一次性拉入整个输入文件，而不是一次`sed`一行的处理；(b)`/s`允许点匹配换行符的正则表达式标志；(c) 吝啬的重复运算符`*?`和朋友，这导致重复匹配尽可能少而不是尽可能多；最后是 (d) 否定前瞻`(?!...)`，它允许您在否定前瞻表达式匹配的地方禁止匹配。（没有这个，如果“stuff before”文本中有一个“假”的起始分隔符，即使是吝啬的匹配也会匹配结束分隔符。）......当然，（e）一种通用编程语言，其中`sed`只有适用于相对简单的文本处理任务。

（我使用了更简单的开始和结束分隔符。我希望“奇怪”是故意拼写错误。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:56:26.313

**免责声明：**我是初学者。这肯定不是最好的方法。

* * *

我分三步做了类似的事情。假设您在 Linux 上运行，您可以执行以下操作：

1）用特殊字符替换文件中所有出现的换行符：

```
cat originalText.txt | tr '\n' '~' > temp 
```

2）使用您最喜欢的方法（我使用perl）执行您的正则表达式，在您期望换行符的每个位置放置一个特殊字符的实例。确保保持特殊换行符不变。

3）这次以相反的方式执行第一个命令：

```
cat temp | tr '~' '\n' > modText.txt 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:35:06.557

**有没有办法将一个范围内的所有行添加到模式缓冲区，以便我可以一次对所有行进行正则表达式？**

当然，使用保持空间。例如：

```
sed -n '/begin/,/end/{ /begin/{h;d};H}; /end/{g;s/\n/<newline>/gp}' 
```

将用文本替换匹配“开始”和“结束”的行之间的换行符`<newline>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T06:31:44.780

这可能对您有用（GNU sed）：

```
sed ':a;$!N;/^<!--WIERD_SPECIAL_COMMENT_BEGIN-->/!{P;D};/<!--WIERD_SPECIAL_COMMENT_END-->$/!ba;s/\[this\]/[new content]/;p;d' file 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-27T15:47:07.043

你可以这样做`sed`：

*解析.sed*

```
/BEGIN/ {               # If we encounter BEGIN
  :a                    # Read all until END
  N                     # into pattern space
  /END/!ba              # /
  /\[this\]/d           # If the block contains [this], delete it
  s/^/[new content]\n/  # Insert [new content] before the block
} 
```

像这样运行它：

```
sed -f parse.sed infile 
```

输出：

```
[stuff before]
[new content]
<!--WIERD_SPECIAL_COMMENT_BEGIN-->
  [not this]
<!--WIERD_SPECIAL_COMMENT_END-->
[stuff after] 
```

# c# - 如何使用 SqlDataReader 读取行数

> ID：11689875
> 
> 赞同：2
> 
> 时间：2012-07-27T14:28:26.990
> 
> 标签：c#, sql, stored-procedures

我遇到了一个返回行数的存储过程，但不确定如何在这里读取行数，

存储过程是：

```
CREATE PROCEDURE [dbo].[Document_Exists]
(
    @Url varchar(255)
)
AS
    SET NOCOUNT ON;

    SELECT COUNT(*) AS Rows 
    FROM Document_Instances 
    WHERE Url = @Url 
```

执行为

```
EXEC @return_value = [dbo].[Document_Exists]
     @SourceSiteUrl = N'https://cc23.dev.com/portal'

SELECT 'Return Value' = @return_value 
```

试图用这段代码阅读它

```
SqlCommand cmd1 = new SqlCommand("Document_Exists", conn);
cmd1.CommandType = CommandType.StoredProcedure;
cmd1.Parameters.Add(new SqlParameter("@Url", url));
SqlDataReader rdr1 = cmd.ExecuteReader();

while (rdr1.Read())
{ 
```

不知道下一步该做什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T14:38:16.473

当您从 proc 返回单个值时，使用 SqlDataReader 的意义何在？

```
SqlCommand cmd1 = new SqlCommand("Document_Exists", conn); 
cmd1.CommandType = CommandType.StoredProcedure; 
cmd1.Parameters.Add(new SqlParameter("@Url", url)); 
int rows = Convert.ToInt32(cmd.ExecuteScalar()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T14:31:06.957

尝试

```
int rows = 0;
if(rdr1.Read()) {
    rows = (int) rdr1["Rows"];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T14:35:29.580

```
int totalRows=0;
if(rdr1.Read())
{
    totalRows=  rdr1.GetInt32(rdr1.GetOrdinal("Rows"));
} 
```

如果您只重新调整一个值，我建议您使用[`ExecuteScalar`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-19T10:14:38.767

```
int rowCount = dataReader.Cast<object>().Count(); 
```

# c# - REST - 发布一个 JSON 列表，还是多个帖子？

> ID：11689879
> 
> 赞同：1
> 
> 时间：2012-07-27T14:28:52.170
> 
> 标签：c#, json, entity-framework, rest, asp.net-web-api

给定两个模型： a `Person`，它有任意数量的`Jobs`，用他的工作列表提交一个新的 Person 最符合 REST 的方式是什么？

我想到的两个明显的选择是用他的 Jobs 列表对 Person 对象进行 JSON 化。

```
"{"name":"ngmiceli",
  "jobs":[
      {"info":"foobar"},
      {"info":"lorem ipsum"},
      {"info":"ni!"}]}" 
```

将其粘贴在正文中，发送 Post 请求，然后继续前进。

第二个明显的模型将更加分散。

*   发布一个新人`"name"="ngmiceli"`
*   向该人发布新工作。（重复 3 次）

这两个动作都会有一个 API 控制器，但是如果这个应用程序的目的是工作，并且一个人没有工作是相当无意义的（甚至是无效的），那么提交模型是否有意义？ peron*与*他/她的工作？

最后，我读到了批量更新，您可以在其中发送构成第二个选项的 Post 请求列表，但在单个批处理 Post 中。

如果重要的话，请求将由 javascript 生成并在 C# web-api 中处理，并通过实体框架与数据库进行通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:02:21.610

数字 1 没有什么不符合 RESTful 的。即使应用程序不是以人为中心的，Person 也是应用程序中的有效资源。

寻求更简单的解决方案。

# javascript - 我的 javascript 按钮覆盖了 a 中的文本字段 当我在标签内创建一个新的文本字段时标签

> ID：11689884
> 
> 赞同：0
> 
> 时间：2012-07-27T14:29:02.000
> 
> 标签：javascript, html

我有这个问题有一段时间了，它一直让我发疯！它不会使我的网站崩溃或使其无法使用，但仍然令人愤怒。我有一个标签，因此用户可以为表单内的任何给定答案创建最多十个问题，还有一个 javascript 按钮，以便他们可以添加另一个答案。我遇到的麻烦是，如果他们使用按钮添加一些答案文本字段并填写它们，当他们使用按钮添加另一个答案时，它会覆盖他们刚刚提交的所有答案！到 jsfiddle 的链接是[http://jsfiddle.net/EkUmG/](http://jsfiddle.net/EkUmG/)，这是我的实际 html 文档中相关的代码（我会包含整个文件，但上面有 php，所以你不能只是拖放它无论如何进入浏览器）

*   提前感谢您的帮助

这是html

```
<div id='buttons'></div> 
```

（是的，我意识到该 div 的名称不合适，对此感到抱歉）

这是javascript

```
<script type="text/javascript">
    var answers = 0;
    var inHTML = "";
    function addAnswer()
    {
       if(answers < 10){
       write = document.getElementById('buttons');
       write.innerHTML = write.innerHTML + "answer: <input type=\"text\" name=\"answer"    + answers + "\" /> <br>";
       answers = answers + 1;}
    }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:34:40.577

通过写入[`innerHTML`属性](https://developer.mozilla.org/en/DOM/element.innerHTML)，您可以使浏览器重新解析所有内容，然后重置输入字段的值。

相反，使用[`insertAdjacentHTML`](https://developer.mozilla.org/en/DOM/element.insertAdjacentHTML)（[演示](http://jsfiddle.net/EkUmG/2/)）。

请注意，FF 仅从版本 8 开始支持此方法。如果您需要支持较低版本，您可以使用[此 polyfill或使用@Stano 的解决方案。](https://gist.github.com/1276030)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T14:42:12.930

您可以使用替代的 DOM 方法而不是 innerHTML：

```
function addAnswer() {
    if (answers < 10) {
        write = document.getElementById('buttons');
        var answer = document.createElement('input');
        answer.type = "text";
        answer.name = "answer" + answers;
        write.appendChild(document.createTextNode('answer: '));
        write.appendChild(answer);
        write.appendChild(document.createElement('br'));
        answers = answers + 1;
    }
} 
```

[小提琴](http://jsfiddle.net/EkUmG/9/)

# internet-explorer - “事件 = 事件 || window.event” 未找到成员。必填字段验证器

> ID：11689892
> 
> 赞同：0
> 
> 时间：2012-07-27T14:29:23.327
> 
> 标签：internet-explorer, javascript-events

最近，我们将网站从 .NET 3.5 升级到了 4.0。这样做之后，我们注意到旧版 IE 中发生了一些非常奇怪的事情。标准视图中的 IE9 按设计工作，但是，任何其他版本的 IE 在使用RequiredFieldValidator 输入asp 文本框时都会给我们一个奇怪的错误。在找到的 .NET 匿名函数中，我们得到“未找到成员”。此行的脚本错误：`event = event || window.event;` 我到处搜索，但没有找到解决方案。这仅在我们输入文本框时发生，并且仅在此页面上发生。任何帮助，将不胜感激。这只*发生*在旧版本的 IE 中，其他浏览器和 IE9 似乎可以很好地处理它。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T08:00:19.460

您是否正在访问活动 || setTimeout 函数中的 window.event ？如果是这样，到那时，甚至可能已经丢失并且访问该事件会给您“找不到成员”错误..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T07:51:30.683

由于您尚未发布代码，我们只能猜测发生了什么。

行抛出错误很好（假设`event`在函数参数中），可能错误是由下一行引起的。`Member not found`当您尝试检索对象的不存在属性时，IE 会抛出错误消息`event`。

我想你的脚本中有`keyup`或处理程序，有这样的一行：`keydown`

```
if (event.which == 13){ ... } 
```

但是，在较旧的 IE 中，对象中没有`which`属性，对应的属性是. 所以你需要同时检查：`event``keyCode`

```
var key=event.which || event.keyCode;
if (key == 13){ ... } 
```

# tomcat - IntelliJ Idea 11 - 如何扩展Tomcat Server Stacktrace

> ID：11689895
> 
> 赞同：2
> 
> 时间：2012-07-27T14:29:36.540
> 
> 标签：tomcat, intellij-idea, tomcat7

在调试 Java EE 应用程序时，我看不到完整的堆栈跟踪，我只看到一个通用异常日志；我正在从 Chrome 开发人员工具或 Firebug 中查看详细信息。

如何在 IntelliJ Idea 11 的调试器面板上查看完整的堆栈跟踪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:00:40.897

您需要检查是否在任何 Tomcat 日志文件中记录了异常。请注意，IDEA 运行 Tomcat 时修改了 CATALINA_BASE，因此您应该在`%SYSTEM%\tomcat\tomcat_SEMIRANDOM_PART\logs\`目录下查找日志，其中`%SYSTEM%`IDEA 系统目录[取决于 OS 和 IDEA 版本](http://devnet.jetbrains.net/docs/DOC-181)。

[如果您看到那里记录了您的异常，请在 IDEA 运行配置的日志选项卡](http://www.jetbrains.com/idea/webhelp/setting-log-options.html)中配置此日志文件。您将在 IDEA 中看到一个单独的选项卡，其中包含配置的服务器日志的内容。

如果那里没有记录，则需要调整Tomcat 服务器或 Web 应用程序[的默认记录。](http://wiki.apache.org/tomcat/FAQ/Logging)后者将取决于特定的日志记录框架。

如果您的应用程序使用自定义日志记录，则默认日志记录模式很可能不包含完整的堆栈跟踪。您的应用也可能没有完全记录异常，只记录错误文本。在这种情况下，您需要更改应用程序的代码，以便记录异常堆栈跟踪。

# asp.net-mvc - 控制对网页的访问asp mvc 4

> ID：11689896
> 
> 赞同：0
> 
> 时间：2012-07-27T14:29:39.533
> 
> 标签：asp.net-mvc, database, entity-framework, razor, user-controls

我正在开发一个**asp .net mvc 4**应用程序。我**为用户和角色创建了一个数据库**（一个表用于用户，另一个表用于他们的角色）。我想控制对某些页面的访问。你知道我的桌子上有**很多角色**（如果只有两个角色，这很容易做到）。我怎样才能做到这一点？我应该对 web.config 进行任何修改吗？- 是否可以为某些用户隐藏按钮（例如）（不隐藏所有视图）还是必须隐藏所有视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:36:20.293

有几个这样的问题，请看：[ASP.NET MVC Authorization](https://stackoverflow.com/questions/329658/asp-net-mvc-authorization)

Authorize 属性仍然有效，并且与 UserProvider 和 RoleProvider 配合良好。 [http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)

# c# - 如何编写asp.net 在sharepoint 中创建文件？

> ID：11689909
> 
> 赞同：0
> 
> 时间：2012-07-27T14:30:28.787
> 
> 标签：c#, asp.net, sharepoint

放弃java脚本后，我正在编写asp.net来制作一个弹出窗口，一旦用户写完内容和标题，它就会制作一个.aspx文件并上传到文档库。

但我该怎么做呢？我用谷歌搜索，但没有多少材料！

任何人都可以帮忙吗？

# macos - Mac OSX 阿帕奇。虚拟主机映射到“计算机网站”，而不是 DocumentRoot 作为设置

> ID：11689911
> 
> 赞同：1
> 
> 时间：2012-07-27T14:30:36.270
> 
> 标签：macos, apache

我正在尝试在 Mac OSX 10.7.4 上设置 Apache 虚拟主机

我的 /etc/apache/extra/httpd-vhosts.conf 中有这个

```
<VirtualHost *:80>
   DocumentRoot "/Users/jason/Sites/testsite/site"
   ServerName dev.testsite.com
   ServerAlias dev.testsite.com
</VirtualHost> 
```

这是在 /etc/hosts

```
127.0.0.1    dev.testsite.com 
```

位于 /Users/jason/Sites/testsite/site/ 这是一个 index.html 文件，其中包含“这是我的测试站点”。

当我在浏览器中访问 dev.testsite.com 时，我希望看到 /Users/jason/Sites/testsite/site/ 的页面，但我在 /Library/ 的“计算机网站文件夹”中看到了一个页面网络服务器/文档/

我无法弄清楚这是如何或为什么会这样，任何建议或指示将不胜感激。

提前谢谢了。

杰森

*** *更新

我发现如果我将 /etc/apache/httpd.conf 中的 DocumentRoot 设置替换为我希望流量到达的路径，它确实会去那里，所以看起来 httpd-vhosts.conf 中的 DocumentRoot 设置是不替换 httpd.conf 中的 DocumentRoot 设置。我正在将我的 httpd-vhosts.config 设置与我已经成功运行虚拟主机几年的另一台 Mac 的设置进行比较，从我所看到的情况来看它们看起来一样，所以我猜我有一些设置需要打开或关闭（？）

再次感谢您的任何指点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T03:35:18.937

找到了。

httpd-vhosts.conf 未包含在 httpd.conf 中

我需要在 /etc/apache/httpd.conf 中取消注释以下行

```
# Virtual hosts
Include /private/etc/apache2/extra/httpd-vhosts.conf 
```

一旦我这样做了，一切都很好。

# c - 标签不会减少为整数常量

> ID：11689912
> 
> 赞同：2
> 
> 时间：2012-07-27T14:30:41.857
> 
> 标签：c, switch-statement

运行此 c 程序时出错。我收到一个错误，例如“case label does not reduce to an integer constant”。帮助我找出我的错误。我是c的新手，几周前就开始了。在此先感谢

```
 #include<stdio.h>
 main()  
  { int a,b,c;
  scanf("%d",&c);
   if (c<5) {
    c==a  ;
   }
   else { c==b;
   }
    switch (c)
   {
    case a:
       printf ("statement1");
       break;
    case b :
       printf(" statement2");
     break;
    }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T14:31:55.183

在您似乎`c#`出于某种原因而调用的 C 中，**`case`标签必须是整数常量**。

> 6.8.4.2-3
> 
> 每个 case 标签的表达式应为整数常量表达式，并且同一 switch 语句中的任何两个 case 常量表达式在转换后都不应具有相同的值。

不确定这是否是您想要的，但您可以尝试：

```
switch (c) {
case 'a':
    break;
case 'b':
    break;
} 
```

否则，也许你想要

```
if (c == a)
    /* ... */
else if (c == b)
    /* ... */
else
    /* ... */ 
```

作为旁注，您可能想要`c=a`而不是`c==a`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T14:41:31.790

我更正了你的代码。请尝试并给我反馈：

```
#include <stdio.h>
using namespace std;
int main()
{
    int a,b,c;
    scanf("%d",&c);
    if (c<5)
    {
        a = c; //here you will use "=" because you want to a became c
     }
    else
    {
        b = c; //here you will use "=" because you want to b became c
    }
    /*--------IF-------------*/
    if(c==a) //here is a condition. you will use "=="
    {
        printf("statement1");
    }
    if(c==b) //here is a condition. you will use "=="
    {
        printf ("statement2");
    }
    /*--------SWITCH-------------*/
    switch (c)
    {
    case 1: //if c is 1
    case 2: //if c is 2
    case 3: //if c is 3
    case 4: //if c is 4
    printf("statement1"); //"statement1" will appear
    break;
    default: printf("statement2"); //if c >= 5 "statement2" will appear
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T14:32:03.133

2个问题：

*   您的案例标签的值需要解析（即最终）为整数值，以使`case`-statement 起作用。如果您想`case`根据变量的值驱动语句`c`并将其与`a`and进行比较`b`，您可能需要考虑使用`if`- 语句。

*   您需要在这里进行分配`=`而不是布尔比较`==`

    ```
    c==a 
    ```

    可能想要

    ```
    c = a 
    ```

    （同样适用于`c==b`）- *实际上*，您确定这是正确的顺序，并且您不想要相反的顺序`a = c`吗？这似乎更有可能查看您的代码段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T14:32:17.850

您是将整数 c 分配给 a 还是 b？您应该使用 = 而不是 == 并将 a 或 b 放在作业的左侧，而不是右侧。像这样：

```
if (c<5) {
    a=c;
} 
```

否则，如果 a 和 b 是**具有赋值**的整数，则可以将一个或另一个值赋给 c，例如：

```
if (c<5) {
    c=a;
} 
```

请记住，C 中的 switch..case 语句只能在（比较）整数值（案例）之间切换，这就是您收到错误的原因。

# java - 在 DHT 中模拟节点故障

> ID：11689920
> 
> 赞同：2
> 
> 时间：2012-07-27T14:31:20.017
> 
> 标签：java, performance-testing, dht, fault-tolerance

我目前正在使用免费的糕点 DHT 进行一些性能测试。Freepastry 是一个用 Java 完成的开源 DHT。

目标是监控一定数量的节点宕机时对 DHT 的影响。我的问题是我不确定消除节点的最佳方法。目前每个节点都在我机器上的不同端口上运行。我正在使用 Pastry API [http://www.freepastry.org/FreePastry/javadoc21a3/rice/pastry/PastryNode.html#destroy](http://www.freepastry.org/FreePastry/javadoc21a3/rice/pastry/PastryNode.html#destroy) ()中的 destroy() 方法销毁这些节点

我担心这在模拟节点故障时可能是不现实的，我是否应该以不同的方式杀死节点，例如使用 tcpkill？

我正在运行 Mac OS X 雪豹，有兴趣听听任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:39:56.420

有不同形式的节点故障。

最常见的一种是节点离线，因为运行 DHT 的应用程序已关闭。

国内互联网连接的动态 IP 的更改本质上具有微妙的不同效果，因为它会使所有现有的路由表条目无效，但总节点数不会下降。你失去一个，你得到一个新的。

另一个常见问题是由于 NAT 导致的可达性问题。该节点的可见性可能取决于 NAT 类型以及您最近是否接触过它。

流失的结果实际上可能非常复杂。首先，单个节点的正常运行时间通常遵循指数分布。许多只能在短时间内使用，很少有人能稳定几天或几个月。

假设你有一个稳定的核心，由中等到长寿命的节点组成，实际上构成了网络的 90%。10% 的相同节点不断出现和消失会导致一些开销流量，但它们不会对网络造成太大损害。你有很多流失但影响很小。

如果 10% 的节点群在 10 分钟后脱机并被非活动池中的一组全新节点替换，那么您实际上每 10 分钟就会失去 10% 的冗余。如果节点之间的数据复制跟不上或者甚至不存在，您的数据将呈指数衰减。你也有很多流失，但影响很大。

我什至不确定哪种模拟能最好地反映现实。我想最现实的限制就是拥有一个固定的*潜在*节点池。那是安装了 DHT 实现的计算机。

然后每个节点都会有一个时间概况，它平均保持多长时间以及平均下降多长时间（这两个参数彼此部分相关。长时间正常运行的节点通常不会有很长的停机时间因为他们可能永远在线）。并且每个节点独立地作用于这些参数。实际上，一天中的时间也起着重要作用，在这里可以很容易地看出：http: [//dsn.tm.uni-karlsruhe.de/english/2936.php](http://dsn.tm.uni-karlsruhe.de/english/2936.php)

所以......长话短说，只是随机运行和杀死几个节点不会给你一个关于 DHT 弹性的现实结果，因为影响会千差万别。

至于技术部分，您可能希望在同一个 java VM 中运行所有这些，并使用多线程或非阻塞 IO 来减少在单独的 VM 中运行每个实例的开销。这也将允许您以更现实的方式安排他们的运行和停机时间。

由于您可以将多个 IP 分配给单台计算机，因此您应该能够仅根据 IP/端口数在计算机上运行数十万个节点。但是，即使是最快的系统，该过程的资源消耗最终也会陷入困境，因为实际上很少有 DHT 实现能够很好​​地扩展。

因此，您可能需要在每台计算机有几千个节点的网络上运行它，以获得接近现实的任何东西。

要么，要么你求助于更多的数学模拟，而不是运行实际的实现。

# algorithm - 与 3d 应用程序的渲染器相比，为什么游戏渲染器如此之快？

> ID：11689921
> 
> 赞同：9
> 
> 时间：2012-07-27T14:31:20.463
> 
> 标签：algorithm, graphics, rendering, game-engine

在过去的几年里，我一直在 Blender 中制作一些 3D 图形，并且我也尝试过制作 3D 游戏（在 Unity 3D 中）。我也非常喜欢玩电脑游戏，我对一件事感到惊讶：

**为什么 3D 应用程序的渲染器与游戏渲染器相比如此“慢”？**

这不是一个冒犯性的问题。我只是好奇。例如，我可以无缝播放 Crysis 或 NFS: The Run，但如果我在 Blender 中创建类似的场景，我相信一帧的渲染将花费很长时间。

我在互联网上找到了一些信息（例如“因为游戏渲染器使用了许多假货和黑客”），但我不是图形程序员，我非常感谢专家的回答。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T15:08:19.153

Blender、Maya 和 3D Studio Max 等系统通常为帧渲染进行多重反射光线追踪。他们的引擎允许您执行逼真的玻璃和烟雾效果以及环境照明等操作。游戏引擎有这些东西的漂亮但不太逼真的版本。

此外，Hassan 的评论是正确的：Blender 不使用您的显卡进行渲染，它都是 CPU 驱动的（默认情况下）。GPU 在渲染场景中常见的并行处理类型方面要好得多，而且显卡供应商已经投入大量资金来开发快速运行游戏的技术。即使这样，一些用于非常高质量的逼真效果的算法也很难在 GPU 上有效地实现。人们谈论实时光线追踪已经有 10 年了，并且有一些候选者（Nvidia 的[OptiX](http://www.nvidia.com/object/optix.html)，英特尔的[MIC 架构](http://blogs.intel.com/research/2011/09/13/wolfenstein_gets_ray_traced_-_2/)）

# facebook - 如何创建具有特定个人资料详细信息的 Facebook 测试用户？

> ID：11689924
> 
> 赞同：3
> 
> 时间：2012-07-27T14:31:29.363
> 
> 标签：facebook, facebook-graph-api

如果我调用 Facebook API 来创建一个新的测试用户，如下所示：

```
https://graph.facebook.com/APP_ID/accounts/test-users?
installed=true
&name=FULL_NAME
&locale=en_US
&permissions=read_stream
&method=post
&access_token=APP_ACCESS_TOKEN 
```

用户已创建，但个人资料详细信息仅包含一些基本信息，例如性别/姓名/生日：

```
{
"id":"someID",
"name":"deleteme",
"first_name":"deleteme",
"last_name":"deleteme",
"link":"http:\/\/www.facebook.com\/profile.php?id=someID",
"birthday":"08\/08\/1980",
"gender":"female",
"email":"deleteme\u0040email.net",
"timezone":0,
"locale":"cs_CZ",
"updated_time":"2012-07-27T13:41:38+0000"
} 
```

有没有办法创建一个具有更丰富的个人资料详细信息（例如“middle_name”、“bio”）的 Facebook 测试用户？

我试过这样称呼：

```
https://graph.facebook.com/APP_ID/accounts/test-users?
access_token=APP_ACCESS_TOKEN
&permissions=read_stream
&method=post
&name=deleteme
&installed=true
&gender=male
&middle_name=jantar
&bio=mojebio
&political=sharks 
```

但它仍然会像第一次调用一样创建一个具有配置文件的测试用户（缺少“middle_name”和“bio”）。这是 Facebook API 的限制还是我遗漏了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T15:03:27.473

您可以使用应用仪表板@https [://developers.facebook.com/apps/APP_ID/roles](https://developers.facebook.com/apps/APP_ID/roles) - 在底行中，您可以创建新的测试用户并以测试用户身份登录。这使您可以像普通帐户一样编辑测试用户配置文件中的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-05T05:18:31.597

[fb-zombie](https://github.com/gepolv/fb-zombie)（NodeJS 包）将为您解决问题。免责声明：我是 fb-zombie 的作者。

# virtualbox - Virtualbox：不支持英特尔适配器类型

> ID：11689938
> 
> 赞同：1
> 
> 时间：2012-07-27T14:32:16.517
> 
> 标签：virtualbox

我在尝试使用英特尔类型的适配器启动 virtualbox 时遇到此错误

```
Failed to open a session for the virtual machine BackTrack.

Configuration error: Failed to get the "MAC"; value (VERR_CFGM_VALUE_NOT_FOUND).

Result Code: NS_ERROR_FAILURE (0x80004005)
Component: Console
Interface: IConsole {1968b7d3-e3bf-4ceb-99e0-cb7c913317bb} 
```

其他适配器 (PCNet) 没有启动问题，但随后网络无法正常工作。我在macosx 6上使用最新版本的vbox。来宾是linux。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-05T17:23:04.433

试试这个 - 使用控制台和下面的命令查找您设置的附加数据：

> VBoxManage getextradata“您的虚拟机的名称”枚举

通常它以“Key：VBoxInternal/”开头......

使用以下方法删除这些自定义设置：

> VBoxManage setextradata "你的虚拟机的名字" "VBoxInternal/Whatever/Custom/Setting/You/Did/Yourself"

例如，我的问题通过以下方式解决：

> VBoxManage setextradata "你的虚拟机的名字" "VBoxInternal/Devices/pcnet/0/LUN#0/Config/DNSProxy"

感谢这篇文章[http://myblogisinbeta.blogspot.com/2011/10/virtualbox-un-fuck-installation.html](http://myblogisinbeta.blogspot.com/2011/10/virtualbox-un-fuck-installation.html)

# c# - 通过 signalR 向跨平台客户端发送自定义对象

> ID：11689941
> 
> 赞同：0
> 
> 时间：2012-07-27T14:32:24.760
> 
> 标签：c#, wpf, chat, signalr

假设我有一个使用 SignalR 的 Instant Messenger 服务器。我想向所有连接的客户端广播一个`ContactList`包含自定义对象集合的`User`自定义对象，这些客户端可能位于各种平台上。

如何在服务器端打包这些自定义对象，以允许 java、objective c 和 .net 客户端映射回这些类的副本？我假设某种序列化，但不想为每种客户端语言编写一个“解析器”来重构我可能想要使用的每个不同的自定义对象。我有更好的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T17:51:15.097

如果您使用 SignalR，则格式为 JSON。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T17:53:06.557

SignalR 现在在其架构（即[`IJsonSerializer`](https://github.com/SignalR/SignalR/blob/master/SignalR/Json/IJsonSerializer.cs)和[`IJsonValue`](https://github.com/SignalR/SignalR/blob/master/SignalR/Json/IJsonValue.cs)）中在技术上与 JSON 相关联，并且默认使用[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)进行序列化。因此，只要您的对象可以通过 JSON.NET 序列化，并且只要其他平台支持以某种方式解析 JSON（即使它是简单的文本解析），那么您就可以开始了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:39:50.953

以 RESTful 方式公开您的对象将允许其他语言使用它们。只要您公开的所有对象都是可序列化的，调用语言是什么并不重要，只要它们自己可以执行 REST 请求即可。WCF / Web API 很好地处理了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-07T02:18:58.573

我想补充一点，如果您希望通过网络传入的 JSON 自动反序列化为各种平台中的对象，您可以使用 Xamarin 创建一个 PCL（可移植类库）以在任何地方运行 C#。看看[http://xamarin.com/csharp](http://xamarin.com/csharp)。

# ruby-on-rails-3.1 - 尝试在 Heroku 上设置应用程序时出错

> ID：11689942
> 
> 赞同：0
> 
> 时间：2012-07-27T14:32:30.507
> 
> 标签：ruby-on-rails-3.1, heroku

我正在尝试将我的应用程序部署到 Heroku。我已经安装了[Heroku Toolbelt](https://toolbelt.heroku.com/)，但是当我尝试在我的 mac 上登录时，出现以下错误。我怎样才能解决这个问题？

我在 rails 3.2.0 和 ruby​​ 1.9.3p0（2011-10-30 修订版 33570）[x86_64-darwin11.2.0]

```
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon/ssl_socket.rb:84: [BUG] Segmentation fault
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-darwin11.2.0]

-- Control frame information -----------------------------------------------
c:0023 p:---- s:0115 b:0115 l:000114 d:000114 CFUNC  :connect
c:0022 p:0650 s:0112 b:0112 l:000111 d:000111 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon/ssl_socket.rb:84
c:0021 p:---- s:0102 b:0102 l:000101 d:000101 FINISH
c:0020 p:---- s:0100 b:0100 l:000099 d:000099 CFUNC  :new
c:0019 p:0064 s:0095 b:0092 l:000091 d:000091 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon/connection.rb:348
c:0018 p:0036 s:0089 b:0089 l:000088 d:000088 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon/connection.rb:179
c:0017 p:0366 s:0080 b:0080 l:000079 d:000079 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon/connection.rb:105
c:0016 p:0019 s:0071 b:0071 l:000070 d:000070 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api.rb:60
c:0015 p:0037 s:0062 b:0062 l:000061 d:000061 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/login.rb:9
c:0014 p:0080 s:0057 b:0057 l:000056 d:000056 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/auth.rb:76
c:0013 p:0093 s:0051 b:0050 l:000049 d:000049 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/auth.rb:185
c:0012 p:0025 s:0045 b:0045 l:000044 d:000044 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/auth.rb:217
c:0011 p:0038 s:0041 b:0041 l:000040 d:000040 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/auth.rb:80
c:0010 p:0021 s:0038 b:0038 l:000037 d:000037 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/auth.rb:41
c:0009 p:0029 s:0035 b:0035 l:000034 d:000034 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/auth.rb:22
c:0008 p:0046 s:0032 b:0032 l:000031 d:000031 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command.rb:179
c:0007 p:0112 s:0022 b:0022 l:000021 d:000021 METHOD /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/cli.rb:25
c:0006 p:0133 s:0016 b:0016 l:000015 d:000015 TOP    /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/bin/heroku:16
c:0005 p:---- s:0013 b:0013 l:000012 d:000012 FINISH
c:0004 p:---- s:0011 b:0011 l:000010 d:000010 CFUNC  :load
c:0003 p:0127 s:0007 b:0007 l:002048 d:000330 EVAL   /Users/dave/.rvm/gems/ruby-1.9.3-p0/bin/heroku:19
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH
c:0001 p:0000 s:0002 b:0002 l:002048 d:002048 TOP   

-- Ruby level backtrace information ----------------------------------------
/Users/dave/.rvm/gems/ruby-1.9.3-p0/bin/heroku:19:in `<main>'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/bin/heroku:19:in `load'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/bin/heroku:16:in `<top (required)>'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/cli.rb:25:in `start'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command.rb:179:in `run'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/auth.rb:22:in `login'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/auth.rb:41:in `login'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/auth.rb:80:in `get_credentials'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/auth.rb:217:in `ask_for_and_save_credentials'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/auth.rb:185:in `ask_for_credentials'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/auth.rb:76:in `api_key'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/login.rb:9:in `post_login'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api.rb:60:in `request'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon/connection.rb:105:in `request'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon/connection.rb:179:in `request_kernel'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon/connection.rb:348:in `socket'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon/connection.rb:348:in `new'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon/ssl_socket.rb:84:in `initialize'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon/ssl_socket.rb:84:in `connect'

-- C level backtrace information -------------------------------------------

   See Crash Report log file under ~/Library/Logs/CrashReporter or
   /Library/Logs/CrashReporter, for the more detail of.

-- Other runtime information -----------------------------------------------

* Loaded script: /Users/dave/.rvm/gems/ruby-1.9.3-p0/bin/heroku

* Loaded features:

    0 enumerator.so
    1 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/enc/encdb.bundle
    2 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/enc/trans/transdb.bundle
    3 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/defaults.rb
    4 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/rbconfig.rb
    5 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/deprecate.rb
    6 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/exceptions.rb
    7 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb
    8 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems.rb
    9 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/version.rb
   10 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/requirement.rb
   11 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb
   12 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/platform.rb
   13 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb
   14 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/path_support.rb
   15 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/pathname.bundle
   16 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/pathname.rb
   17 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/stringio.bundle
   18 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/vendor/heroku/okjson.rb
   19 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/helpers.rb
   20 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/updater.rb
   21 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parseexception.rb
   22 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/formatters/default.rb
   23 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/formatters/pretty.rb
   24 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/node.rb
   25 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/child.rb
   26 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parent.rb
   27 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/xmltokens.rb
   28 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/namespace.rb
   29 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/encoding.rb
   30 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/source.rb
   31 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/entity.rb
   32 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/attlistdecl.rb
   33 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/doctype.rb
   34 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb
   35 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/attribute.rb
   36 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/cdata.rb
   37 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/functions.rb
   38 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/syncenumerator.rb
   39 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/xpathparser.rb
   40 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/xpath_parser.rb
   41 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/xpath.rb
   42 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/element.rb
   43 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/xmldecl.rb
   44 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/comment.rb
   45 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/instruction.rb
   46 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/rexml.rb
   47 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/output.rb
   48 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/undefinednamespaceexception.rb
   49 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/set.rb
   50 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/baseparser.rb
   51 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/streamparser.rb
   52 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/validation/validationexception.rb
   53 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb
   54 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb
   55 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/uri/common.rb
   56 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/uri/generic.rb
   57 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/uri/ftp.rb
   58 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/uri/http.rb
   59 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/uri/https.rb
   60 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/uri/ldap.rb
   61 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/uri/ldaps.rb
   62 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/uri/mailto.rb
   63 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/uri.rb
   64 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/date_core.bundle
   65 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/date/format.rb
   66 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/date.rb
   67 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/time.rb
   68 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/cgi/core.rb
   69 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/cgi/cookie.rb
   70 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/cgi/util.rb
   71 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/cgi.rb
   72 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/netrc-0.7.5/lib/netrc.rb
   73 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/auth.rb
   74 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/plugin.rb
   75 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/builtin_plugin.rb
   76 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/version.rb
   77 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/optparse.rb
   78 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command.rb
   79 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/client/ssl_endpoint.rb
   80 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/client.rb
   81 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku.rb
   82 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/cli.rb
   83 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/etc.bundle
   84 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/fileutils.rb
   85 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/timeout.rb
   86 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/socket.bundle
   87 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/socket.rb
   88 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/client/rendezvous.rb
   89 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/base.rb
   90 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/account.rb
   91 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/accounts.rb
   92 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/helpers/heroku_postgresql.rb
   93 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/addons.rb
   94 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/apps.rb
   95 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/auth.rb
   96 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/certs.rb
   97 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/config.rb
   98 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/db.rb
   99 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/domains.rb
  100 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/drains.rb
  101 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/git.rb
  102 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/deprecated.rb
  103 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/deprecated/help.rb
  104 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/help.rb
  105 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/keys.rb
  106 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/labs.rb
  107 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/logs.rb
  108 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/maintenance.rb
  109 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/digest.bundle
  110 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/digest.rb
  111 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/digest/sha2.bundle
  112 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/digest/sha2.rb
  113 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/client/heroku_postgresql.rb
  114 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/pg.rb
  115 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/client/pgbackups.rb
  116 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/pgbackups.rb
  117 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/plugins.rb
  118 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/ps.rb
  119 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/releases.rb
  120 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/readline.bundle
  121 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/run.rb
  122 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/sharing.rb
  123 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/ssl.rb
  124 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/stack.rb
  125 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/status.rb
  126 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/update.rb
  127 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-2.30.1/lib/heroku/command/version.rb
  128 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/base64.rb
  129 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/forwardable.rb
  130 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/openssl.bundle
  131 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/openssl/bn.rb
  132 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/openssl/cipher.rb
  133 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/openssl/config.rb
  134 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/openssl/digest.rb
  135 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/openssl/buffering.rb
  136 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/fcntl.bundle
  137 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/openssl/ssl-internal.rb
  138 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/openssl/x509-internal.rb
  139 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/openssl.rb
  140 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon/constants.rb
  141 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon/connection.rb
  142 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon/errors.rb
  143 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon/response.rb
  144 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon/socket.rb
  145 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon/ssl_socket.rb
  146 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon/standard_instrumentor.rb
  147 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/excon-0.15.4/lib/excon.rb
  148 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/securerandom.rb
  149 /Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/zlib.bundle
  150 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/vendor/okjson.rb
  151 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/errors.rb
  152 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/mock/addons.rb
  153 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/mock/apps.rb
  154 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/mock/collaborators.rb
  155 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/mock/config_vars.rb
  156 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/mock/domains.rb
  157 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/mock/features.rb
  158 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/mock/keys.rb
  159 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/mock/login.rb
  160 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/mock/logs.rb
  161 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/mock/processes.rb
  162 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/mock/releases.rb
  163 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/mock/stacks.rb
  164 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/mock/user.rb
  165 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/mock.rb
  166 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/version.rb
  167 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/addons.rb
  168 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/apps.rb
  169 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/collaborators.rb
  170 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/config_vars.rb
  171 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/domains.rb
  172 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/features.rb
  173 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/keys.rb
  174 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/login.rb
  175 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/logs.rb
  176 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/processes.rb
  177 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/releases.rb
  178 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/stacks.rb
  179 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api/user.rb
  180 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku/api.rb
  181 /Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/heroku-api-0.3.1/lib/heroku-api.rb

[NOTE]
You may have encountered a bug in the Ruby interpreter or extension libraries.
Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

Abort trap: 6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:32:29.373

我必须做两件事

*   heroku 键：添加 ~/.ssh/id_rsa.pub
*   $gem 卸载 heroku

在我这样做之后它起作用了

# scala - 在迷你服务器上玩 2.0 (pogoplug)

> ID：11689946
> 
> 赞同：0
> 
> 时间：2012-07-27T14:32:38.987
> 
> 标签：scala, playframework-2.0

我有一个 pogoplug 想要在这个设备上运行一个 play2.0 应用程序。Pogoplug 有 128mb 内存和双核处理器。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:15:18.317

这是一个相当广泛的问题，但您应该考虑以下几点：

*   删除您并非绝对需要的任何服务。理想情况下，您将只运行 sshd 和 Web 应用程序本身。大多数 linux 发行版都安装了很多不必要的东西。
*   调整您的 jvm 内存设置。
*   配置大量交换空间。
*   使用进程内数据库，例如 h2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:44:05.877

操作系统和连接选项是什么？

我认为最简单的方法是使用`dist`命令准备压缩应用程序，将其推送到服务器并从那里开始。`start`和`stage`命令从源代码构建应用程序，您可能不希望在 128m 内存上这样做。

当然，您需要在那里安装 JRE 和 play 以及前面的 HTTP 服务器。

# emacs - 以编程方式选择区域

> ID：11689948
> 
> 赞同：13
> 
> 时间：2012-07-27T14:32:43.217
> 
> 标签：emacs, elisp

我想通过点击`C-Space`+ 移动箭头键执行相同的操作，但在 elisp 中。

未能找到正确的函数（如果它们只是按逻辑分组在命名空间中或以某种方式标记......）。哪一个？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-27T14:55:32.557

您可以使用 将击键转换为 elisp 。`C-h k *key*`

您会注意到用于设置 mark 的 elisp 函数`set-mark-command`采用一个非可选参数。Emacs 使用特殊[`interactive`](https://www.gnu.org/software/emacs/manual/html_node/elisp/Using-Interactive.html)函数允许使用参数自然地编写 elisp 函数。这允许它们是通用的并且易于在其他 elisp 程序中重用，同时仍然可以直接从按键调用。它还`C-u`内置了一些前缀逻辑。

在 的情况下`set-mark-command`，它的第一个函数是`(interactive "P")`，这意味着从键盘调用时前缀作为参数传入。你可以直接在 elisp 中模拟这个：

```
(set-mark-command nil) 
```

例如，在 elisp 中选择当前行：

```
(defun my-select-current-line ()
  (interactive)
  (move-beginning-of-line nil)
  (set-mark-command nil)
  (move-end-of-line nil)
  (setq deactivate-mark nil)) 
```

请注意，您必须告诉 emacs 在最后保持标记处于活动状态，否则该区域将不会保持突出显示（尽管点和标记将是您离开它们的位置）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T15:34:56.600

您应该在 emacs lisp 代码中使用 push-mark，如下所示：

```
(defun mark-n (n)
  "Programmtically mark the next N lines"   
  (interactive "nNum lines to mark: ")
  (push-mark)  
  (next-line n)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-27T20:26:07.457

以防万一此附加信息对其他人有用，我发现以下内容：

*   至于程序化移动，请参阅[移动点](http://www.gnu.org/software/emacs/manual/html_node/emacs/Moving-Point.html)
*   `(point)`并`(mark)`检索它们各自的位置，`(set-mark (+ 5 (mark)))`例如，可以这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T14:50:34.307

该区域是 和 之间的缓冲区的`point`一部分`mark`。

# maven - Maven使用错误的存储库下载

> ID：11689953
> 
> 赞同：19
> 
> 时间：2012-07-27T14:33:06.430
> 
> 标签：maven

我使用的是 com.sun.jersey-server/json/client 的旧版本（1.5），它必须是这个版本，所以请不要建议使用更新的版本。

在我的 pom.xml 中，我引用它：

```
 <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-server</artifactId>
        <version>1.5</version>
        <type>jar</type>
        <scope>compile</scope>
        <exclusions>
            <exclusion>
                <!-- version conflicts with explicit direct dependency -->
                <groupId>org.codehaus.jettison</groupId>
                <artifactId>jettison</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

编译给出此输出，但有错误：

```
 [INFO] Scanning for projects...
    [INFO]------------------------------------------------------------------------
    [INFO] Building MediaAssistantWebService
    [INFO]    task-segment: [clean, install]
    [INFO]------------------------------------------------------------------------
     [...]
    [INFO] Using 'UTF-8' encoding to copy filtered resources.
    [INFO] Copying 1 resource
    Downloading: http://repositories.dai-labor.de/extern/content/repositories/dai-open/com/sun/jersey/jersey-server/1.5/jersey-server-1.5.pom
    [INFO] Unable to find resource 'com.sun.jersey:jersey-server:pom:1.5' in repository dai-open (http://repositories.dai-labor.de/extern/content/repositories/dai-open)
    Downloading: http://download.java.net/maven/2//com/sun/jersey/jersey-server/1.5/jersey-server-1.5.pom 10K downloaded  (jersey-server-1.5.pom)
    Downloading: http://maven.glassfish.org/content/groups/glassfish/com/sun/jersey/jersey-project/1.5/jersey-project-1.5.pom 185b downloaded  (jersey-project-1.5.pom)
    [WARNING] *** CHECKSUM FAILED - Checksum failed on download: local = '6c9fd3d150b8a5f0ca676f49b8ed603793cabebb'; remote = '<html><head><title>301' - RETRYING
    Downloading: http://maven.glassfish.org/content/groups/glassfish/com/sun/jersey/jersey-project/1.5/jersey-project-1.5.pom185b downloaded  (jersey-project-1.5.pom)
    [WARNING] *** CHECKSUM FAILED - Checksum failed on download: local '6c9fd3d150b8a5f0ca676f49b8ed603793cabebb'; remote = '<html><head><title>301' - IGNORING
    [INFO] ------------------------------------------------------------------------
    [ERROR] BUILD ERROR
    [INFO] ------------------------------------------------------------------------
    [INFO] Error building POM (may not be this project's POM).

    Project ID: null:jersey-server:bundle:null

    Reason: Cannot find parent: com.sun.jersey:jersey-project for project: null:jersey-server:bundle:null for project null:jersey-server:bundle:null 
```

在寻找解决方案后，我将此存储库添加到我的 pom 中，因此 maven 会首先查看：

```
<repository>
  <id>maven2-repository.dev.java.net</id>
  <name>Java.net Repository for Maven</name>
  <url>http://download.java.net/maven/2/</url>
  <layout>default</layout>
</repository> 
```

但这并没有做任何事情。我删除了`.m2/jersey`文件夹并`mvn clean compile`再次尝试。它仍然尝试从 glassfish-404 存储库下载它。

有谁知道我必须更改什么才能正确下载？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-27T15:11:00.670

尝试在其他人之前添加 Maven 中心的存储库：

```
<repositories>
    <repository>
        <id>maven-central</id>
        <url>http://repo1.maven.org/maven2</url>
    </repository>
    ...
</repositories> 
```

更好的选择是设置 nexus 服务器并删除 pom 文件中的存储库部分：http: [//www.sonatype.com/people/2009/02/why-putting-repositories-in-your-poms-is-一个坏主意/](http://www.sonatype.com/people/2009/02/why-putting-repositories-in-your-poms-is-a-bad-idea/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T15:11:49.867

如果您查看 jersey 引用的 pom，它包含来自 glassfish.org 的一些 repo。 [http://download.java.net/maven/2//com/sun/jersey/jersey-server/1.5/jersey-server-1.5.pom](http://download.java.net/maven/2//com/sun/jersey/jersey-server/1.5/jersey-server-1.5.pom)

```
<repositories>
    <repository>
        <id>glassfish-repository</id>
        <name>Repository for Glassfish</name>
        <url>http://maven.glassfish.org/content/groups/glassfish</url>
    </repository>
</repositories> 
```

当尝试下载传递依赖项时，服务器会发送重定向响应，因此您会在您提供的日志中看到校验和错误。

在浏览器中试试这个： [http ://maven.glassfish.org/content/groups/glassfish/com/sun/jersey/jersey-project/1.5/jersey-project-1.5.pom](http://maven.glassfish.org/content/groups/glassfish/com/sun/jersey/jersey-project/1.5/jersey-project-1.5.pom)

我知道这不能解决您的问题（而且太麻烦），但是您可以尝试`mvn install`在本地尝试 jerser-server 1.5 所需的依赖项，以便它不会尝试下载这些依赖项吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-02T11:33:46.853

唯一对我有用的解决方案是在 glassfish 存储库的 settings.xml 中添加一个镜像：

```
<mirror>
    <id>glassfish-mirror</id>
    <name>glassfish mirror</name>
    <url>http://maven.nuxeo.org/nexus/content/repositories/public-releases</url>
    <mirrorOf>glassfish-repository</mirrorOf>
</mirror> 
```

正如[这里所解释的](http://answers.nuxeo.com/questions/2195/cant-build-nuxeo-source-nuxeo-webengine-jax-rs-jersey-server-error)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T18:46:10.100

我想认为在下载中包含所有依赖项是明智的，这将是一种幻想。当然最好让maven下载它们。花几个小时追踪找不到哪个愚蠢的回购或不必要的膨胀罐，真是太有趣了！我知道我必须在这一点上站在大多数人的一边，因为没有其他人敢于提出相反的建议。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-05T12:09:50.063

只需添加：

```
<repository>
    <id>maven-central</id>
    <url>http://repo1.maven.org/maven2</url>
</repository> 
```

我的 POM.xml 工作正常

# email - 将电子邮件发送到列表：循环遍历每个或密件抄送？

> ID：11689956
> 
> 赞同：0
> 
> 时间：2012-07-27T14:33:08.087
> 
> 标签：email

循环浏览每封电子邮件或发送一封电子邮件并将列表添加到密件抄送是否更有意义？我听到了不同的答案，我不确定为什么一个比另一个更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:02:19.890

如果您希望电子邮件的“收件人”字段包含收件人电子邮件地址，请发送单独的电子邮件，否则如果您不发送给数百个收件人，则密件抄送应该没问题。

这个[网站](http://www.brilliantthinking.net/2006/04/29/is-it-ok-to-use-bcc-for-a-mailing-list/)有更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:06:37.717

惯例是在每个收件人域内发送一条消息，并在该域内有效地密件抄送：该域内的所有用户。

除非您有非常特殊的需求，否则只需密件抄送：所有人并使用您的 ISP 的智能主机来处理实际工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-06T14:38:53.327

当用户向收件人或抄送字段中的一组收件人发送敏感电子邮件时，会出现一个非常常见的问题。当电子邮件到达时，它会向彼此披露所有收件人的电子邮件地址（可能还有姓名）。

这发生在伦敦一家艾滋病毒诊所的一个非常引人注目的案例中，导致他们被罚款 180,000 英镑[https://www.theguardian.com/technology/2016/may/09/london-hiv-clinic-fined-180000-for -revealing-service-users-names](https://www.theguardian.com/technology/2016/may/09/london-hiv-clinic-fined-180000-for-revealing-service-users-names)。

为防止这种情况发生，您应该考虑安装此软件[https://www.sendingshield.com](https://www.sendingshield.com)，因为它会通过警告用户此类数据泄露可能发生并允许他们纠正它来提供保护。

[ ![发送盾牌中的警告框图片](../Images/6865820f2f54efb39aaa8da68a33e176.png)]

# asp.net - SOLID原理和网页类

> ID：11689959
> 
> 赞同：2
> 
> 时间：2012-07-27T14:33:19.140
> 
> 标签：asp.net, .net, vb.net, design-patterns, solid-principles

在编写新类和代码时，我试图遵循 SOLID 原则。

我的问题是关于扩展 Page 类的 ASP.NET 类，即 ASPX 文件。如果我有一个页面类，它有一个 page_load 事件，它创建多个对象的实例，例如 Person 类、Sport 类等，那么我相信这个页面类与这些类紧密耦合。是这种情况还是我遗漏了一些明显的东西？是不是所有的类都应该公开接口，而客户端（aspx 页面）应该使用接口而不是直接实例化类。

如果涉及多态性，我发现接口很有用，例如使用学生接口在运行时创建研究生或本科生的实例。所有类都应该有接口吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:38:26.017

如果您在`Page`类（表示层）中创建实体，则显然违反了单一职责原则，因为页面类将有多种更改原因。

相反，将此逻辑移至业务层并创建处理此逻辑的服务。

您的页面将需要与服务接口对话，而不是与实现 (DIP) 对话，并且此服务接口需要窄化 (ISP)；可能只有一种方法。

如果您将服务的所有参数打包到一个对象中，从而分离数据和行为，并为您的服务使用通用接口（即`ICommandHandler<TCommand>`），您甚至可以遵守 OCP，因为您现在可以添加行为（例如验证、事务、死锁检测、异步处理、排队）到服务，而对应用程序没有任何更改。

最后一点，不要为实体创建接口。这是相当无用的，并且模糊了您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:17:23.467

我不会在后面的代码中实例化对象。我所做的是调用一个实例化获取对象的服务——它用数据库中的数据实例化它们。我还在母版页中公开了该服务，并像这样引用它：

```
IUser _user = (Page.Master as MasterBase).RegistrationService.GetPersonFromEmailAddress(txtUser.text); 
```

当然，您应该检查以确保 (Page.Master as MasterBase) 不为空......

* * *

## 按要求编辑

我创建了一个基础母版页，所有其他站点母版页都必须继承自该母版页。在这个基本母版页的构造函数中，我实例化了所有必要的服务。当然，如果服务没有在整个站点中使用，它们可以在不同的、更合适的部分通用母版页上实例化。

```
public readonly IRegistration RegistrationService;
public readonly IEventService EventService;
public readonly IEmailSendingService EmailService;
private readonly IMenuService _menuService;

public MasterBase()
{
    RegistrationService = new BusinessLogic.Registration(DatabaseConnectionString);
    EventService = new EventService(DatabaseConnectionString);

    var fromAddress = ConfigurationManager.AppSettings["Webmaster"];
    var defaultToEmailAddress = ConfigurationManager.AppSettings["toEmail"];
    EmailService = new EmailSendingService(BaseUrl, fromAddress, defaultEmailAddress);
    _menuService = new MenuService(DatabaseConnectionString);
} 
```

如上所述，网站上使用的任何母版页都将从基础继承：

```
public partial class MasterContent : MasterBase 
```

任何引用母版页的 UI 页面（在我的例子中几乎全部）

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="activities.aspx.cs" Inherits="activities" MasterPageFile="~/MasterContent.Master" %> 
```

现在可以访问后面代码中的不同服务：

```
IUser _user = (Page.Master as MasterBase).RegistrationService.GetPersonFromEmailAddress(txtUser.text); 
```

正如下面评论中提到的，不同的 UI 页面确实与基本母版页紧密耦合，但我不知道在一般的 ASP.NET Web 表单应用程序中有什么更好的方法来做到这一点。它减少了在每个 UI 页面上实例化服务的需要，并且从特定于项目的角度来看，使所有母版页都继承自该基本页面是可以接受的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:59:35.777

您可以这样做的一种方法是在 Global.asax 中配置您的依赖项

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.MapPageRoute("",
        "Create/{Service}",
        "~/categoriespage.aspx",{"Service", new WhatEverSErvice()} );
} 
```

您需要在哪里适应 URL 模式和文件路径以适应您的网站。这将通过 Service 路由值为您提供服务对象的句柄

然后，您可以声明一个基页类

```
public abstract class BasePage<TService> : Page where TService : IService {

   protected TService Service{
       get {
           return Page.RouteData.Values["Service"] as TService;
       }
   }
} 
```

这`IService`是您必须定义的接口，它是您的服务的基础（如果这样的接口有意义，否则只需省略 where 子句）

然后让你的所有页面都从这个类派生，当你需要你的特定服务时，你只需编写类似的东西

```
var myFoo = Service.CreateFoo(); 
```

当用户在 / 之后提供一个字符串时，这种方法在错误情况下确实有点奇怪。您可以通过扩展属性来处理这个问题，因为它基本上是一个未找到的文件（提供的 URL 无效）您可以返回 404 FNF 响应

# asp.net-mvc - 修改多个项目的webconfig文件

> ID：11689963
> 
> 赞同：0
> 
> 时间：2012-07-27T14:33:36.053
> 
> 标签：asp.net-mvc

我想通过在 web config 中添加新行来修改特定文件夹中所有项目的 web config 文件？任何人都可以建议如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:45:50.650

一个小型控制台应用程序，类似这样：

```
var path = <YourDirectory>;
var newValue = <a new Value in the new line>;
var files = Directory.GetFiles(path, "web.config", SearchOption.AllDirectories);

foreach (var file in files)
{
   var doc = XDocument.Load(file);
   var parentElement = doc.Element("blabla");//get the right parent Node
   parentElement.Add(new XElement("new name"), newValue);//well put what you want in it : attributes, values...
   doc.Save(file);
} 
```

**编辑**

对于您的情况，只需将其放在主要位置

```
var path = @"C:\Tools";
var newAssembly = @"System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35";
var files = Directory.GetFiles(path, "Web.config", SearchOption.AllDirectories);

foreach (var file in files)
{
      var doc = XDocument.Load(file);
      var parentElement = doc.Descendants("assemblies").FirstOrDefault();
      if (parentElement != null)
      {
           var newNode = new XElement("add", new XAttribute("assembly", newAssembly));
           parentElement.Add(newNode);
      }
                doc.Save(file);
 } 
```

# mysql - 与 MySQL 存储 INT 的方式不一致？

> ID：11689965
> 
> 赞同：0
> 
> 时间：2012-07-27T14:33:38.910
> 
> 标签：mysql, timestamp, numeric, sqldatatypes

在我的许多 MySQL 数据库表中，我一直在字段中存储时间戳（来自 php `time()`） 。`int UNSIGNED`但是，`time()`如果我没记错的话，它会返回 13 位值，并`INT UNSIGNED`存储最多`2147483647`只有 10 位长度的值。因此，返回的任何值`time()`都将是一个太大的数字，无法存储在`int`字段中。

但是，我的时间戳都没有被截断，那么它如何能够存储这么大的值呢？是数据库不一致还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:37:36.817

自 epoch (1970) 以来，目前已经过去了 1343399732 秒，这可以很好地存储在有符号的 int 中。

它处理的是与[2038](http://en.wikipedia.org/wiki/Year_2038_problem)年左右相关的秒数，当您将秒数存储在有符号的 32 位 int 中时，这会开始给您带来麻烦。

# python - 如何将python数组转换为cython数组？

> ID：11689967
> 
> 赞同：9
> 
> 时间：2012-07-27T14:33:56.210
> 
> 标签：python, arrays, cython

我有一个在常规 Python 中创建的浮点值数组，我想将其传递给一个面向底层 C 函数的 cython 函数。C 函数要求将数组作为浮动指针传递，如下所示：

```
void setOverlays(const float * verts); 
```

cython 包装器看起来像这样：

```
def set_overlays(verts):
    setOverlays(verts) 
```

如何将 verts 制作成 cython 数组？我认为这可能有效：

```
cdef float * cVerts = [v for v in verts] 
```

但不幸的是，生成的值是一个 Python 对象，在这种情况下自动转换不起作用。

ctypes 中的等效表达式（有效）是：

```
cVerts = (c_float * len(verts))()
for i in range(len(verts)):
    cVerts[i] = verts[i]
setOverlays(cast(byteref(cVerts), POINTER(c_float))) 
```

我正在尝试实现相同的目标，但是在 cython

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T14:41:30.887

我相信您可以通过迭代 python 浮点列表并将它们放入 C 数组中来做到这一点。

```
cimport cython
from libc.stdlib cimport malloc, free

cdef:
    float * cfloats
    int i

cfloats = <float *> malloc(len(pyfloats)*cython.sizeof(float))
if cfloats is NULL:
  raise MemoryError()
for i in xrange(len(pyfloats)):
  cfloats[i] = pyfloats[i]
setOverlays(cfloats)
free(cfloats) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-06T21:42:40.513

接受的答案是错误的并导致分段错误，因为`float *`从未分配过内存。

@JAB 的答案显示了要走的路，但我想详细说明。

**传递一个数组：**

问题是如何将 python 数组转换为 c 样式的数组。Python `array`（来自[`array`模块](http://cython.readthedocs.io/en/latest/src/tutorial/array.html)）是连续内存的包装器，因此无需复制内存 - 我们只需将指针传递给 c 函数：

```
from cpython cimport array
import array

def set_overlays(array.array verts):
    setOverlays(verts.data.as_floats) 
```

使用`array`模块比`numpy`因为它是标准库的一部分要好 - 不需要安装一些东西。这个解决方案简短而好，但有一个问题：有人可以将它与 an 一起使用`int-array`并且不会出现错误 - 内存只是被重新解释。有时这是一个人想要的，但大多数时候情况并非如此。

为了确保传递的数组对象具有正确的数据类型，可以使用内存视图：

```
from cpython cimport array #still needed

def set_overlays_memview(float[::1] verts):
    setOverlays(&verts[0]) 
```

`[::1]` [确保](http://docs.cython.org/en/latest/src/userguide/memoryviews.html#c-and-fortran-contiguous-memoryviews)内存视图环绕连续内存。但是，如果内存视图中没有元素，则此代码存在问题，因为 out-of-bounds-access `verts[0]`。处理它的正确方法取决于功能`setOverlays`，而不是此答案的一部分。

**传递一个列表：**

如果我们必须将 python 列表传递给 c 函数，我们必须将值复制到连续内存中。最好使用以下功能`array`- 无需重新发明轮子：

```
from cpython cimport array
import array

def set_overlays_list(list verts):
    cdef array.array a =  array.array('f', verts)
    setOverlays(a.data.as_floats) #we already know they are floats 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T14:41:02.273

查看[http://docs.cython.org/src/userguide/memoryviews.html](http://docs.cython.org/src/userguide/memoryviews.html)。看起来它还提供了有关如何利用 Python 的内置`array`模块以及`numpy`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-14T08:38:49.227

这是我用来准备数组以传递给 Cython 或带有 SWIG 的 C/CPP。

```
import numpy as np    
def make_c_array(a):
    """
    Take an input numpy array and convert to being ready for use in C.
    """
    b = []
    for i in range(len(a)):
        b.append(a[i])
    a = np.array(b,dtype=np.dtype('d'),order='C')
    return a 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-06T02:24:15.200

我找到了 Cython 的特定方式：

```
cdef float* cVerts = []
    for i in xrange(len(verts)):
        cVerts[i] = verts[i]
setOverlays(cVerts) 
```

有趣的是，上述两种解决方案都被 cython 编译器拒绝了。

# hadoop - 在 Hadoop 中自定义 InputFormat

> ID：11689972
> 
> 赞同：0
> 
> 时间：2012-07-27T14:34:08.523
> 
> 标签：hadoop, customization, key-value

我正在尝试从一个非常大的数据库中读取，该数据库由地理参考的时间序列数据组成。所以我有以下格式的文件：

纬度，经度，值@time1，值@time2，....值@timeN。

所以这是整个地球的数据。现在，对于我的工作，我需要将纬度、经度作为键，将时间序列值作为值。据我所知，Hadoop 有 KeyValueInputFormat，但它认为第一个选项卡是分隔符。有没有办法自定义它？我需要一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:56:29.853

玩弄

```
key.value.separator.in.input.line 
```

在作业配置中。

# javascript - Chrome 扩展 - 当我包含 jQuery 库时，为什么 JS 会抱怨？

> ID：11689975
> 
> 赞同：0
> 
> 时间：2012-07-27T14:34:19.923
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

当我尝试在我的扩展中包含 jQuery 库时，JS 引擎给了我一个错误。这是代码：

```
chrome.tabs.executeScript(null,{code:"
    if (typeof jQuery == 'undefined') { 
        var script = document.createElement('script');
        script.setAttribute('type') = 'text/javascript';
        script.setAttribute('src') = 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'; 
        document.getElementsByTagName('head')[0].appendChild(script);
    };
"}); 
```

这是结果：

`Uncaught ReferenceError: Invalid left-hand side in assignment (anonymous function)`

这段代码写在 popup.js 文件中，包含在 popup.html 中。

即使我做这样的事情：

`chrome.tabs.executeScript(null, {file: "browser.js", allFrames: true}, window.close());`

而且，在 browser.js 中，我指定了上面编写的代码（其中包含 jQuery 库），它发生了同样的事情。最奇怪的是，jQuery 似乎根本没有定义，即使执行代码的选项卡已经取消了它（例如 Flickr）。事实上，jQuery 的 typeof 总是设置为 'undefined'。我很困惑...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:37:40.830

```
script.setAttribute('type') = 'text/javascript'; 
```

您正在尝试将字符串分配给方法。您的语法无效。该错误与 JQuery 无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:37:44.340

您使用`setAttribute`不正确。您需要将值作为第二个参数传递，而不是使用分配`=`

例如，

```
script.setAttribute('type', 'text/javascript'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:38:35.347

```
script.setAttribute('type') = 'text/javascript'; 
```

那是无效的。你要：

```
script.setAttribute('type', 'text/javascript'); 
```

`src`属性也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T14:39:36.800

因为它在语法上是无效的 JavaScript，正如错误消息告诉你的那样。函数调用返回的值不能是赋值的左侧。

# ios - iOS在prepareSegue之前做按钮的动作

> ID：11689985
> 
> 赞同：1
> 
> 时间：2012-07-27T14:35:08.567
> 
> 标签：ios, xcode, xcode-storyboard

基本上，我有一个按钮，当您按下它时，它会运行它的操作方法（更改我的 Data 类中的一个字段）并进入另一个显示该字段的视图。经过一些调试后，我意识到 prepareSegue 以及其他相关方法可能在我的按钮操作之前运行，因此显示旧字段值而不是新字段值。有没有办法解决。我在想也许不是在按钮按下时继续，我会为我的第一个场景创建一个segue，并在我的按钮操作方法结束时对其进行segue，但我不确定如何设置以编程方式制作的segue的目的地。或者有没有更好的方法在 segueing 之前更新字段？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:01:00.923

如果 segue 是自动发生的，您可以在`prepareForSegue:`. 您在该方法中给出的 segue 可以提供对新控制器的引用，并且 sender 参数应该是您的按钮。

# facebook - 是什么导致 xd_arbiter.php 淹没我的访问日志？

> ID：11689987
> 
> 赞同：1
> 
> 时间：2012-07-27T14:35:10.970
> 
> 标签：facebook

触发了 AWS 警报手表，当我查看访问日志时，这就是不断发生的事情：

```
14.140.146.5 - - [27/Jul/2012:10:30:18 -0400] "GET /2009/08/05/asynchronous-procedure-execution/?fb_xd_fragment HTTP/1.1" 200 65182 "http://static.ak.facebook.com/connect/xd_arbiter.php?version=9" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; InfoPath.2; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)"
14.140.146.5 - - [27/Jul/2012:10:30:20 -0400] "GET /2009/08/05/asynchronous-procedure-execution/?fb_xd_fragment HTTP/1.1" 200 65182 "http://static.ak.facebook.com/connect/xd_arbiter.php?version=9" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; InfoPath.2; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)"
14.140.146.5 - - [27/Jul/2012:10:30:20 -0400] "GET /2009/08/05/asynchronous-procedure-execution/?fb_xd_fragment HTTP/1.1" 200 65182 "http://static.ak.facebook.com/connect/xd_arbiter.php?version=9" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; InfoPath.2; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)"
14.140.146.5 - - [27/Jul/2012:10:30:22 -0400] "GET /2009/08/05/asynchronous-procedure-execution/?fb_xd_fragment HTTP/1.1" 200 65182 "http://static.ak.facebook.com/connect/xd_arbiter.php?version=9" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; InfoPath.2; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)"
14.140.146.5 - - [27/Jul/2012:10:30:22 -0400] "GET /2009/08/05/asynchronous-procedure-execution/?fb_xd_fragment HTTP/1.1" 200 65182 "http://static.ak.facebook.com/connect/xd_arbiter.php?version=9" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; InfoPath.2; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)"
14.140.146.5 - - [27/Jul/2012:10:30:24 -0400] "GET /2009/08/05/asynchronous-procedure-execution/?fb_xd_fragment HTTP/1.1" 200 65182 "http://static.ak.facebook.com/connect/xd_arbiter.php?version=9" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; InfoPath.2; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)"
14.140.146.5 - - [27/Jul/2012:10:30:24 -0400] "GET /2009/08/05/asynchronous-procedure-execution/?fb_xd_fragment HTTP/1.1" 200 65182 "http://static.ak.facebook.com/connect/xd_arbiter.php?version=9" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; InfoPath.2; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)"
... 
```

知道是什么导致 Facebook 像这样猛烈抨击我的服务器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T19:06:22.033

您所看到的是基于散列的跨域消息传递，这种情况仅发生在不支持 postMessage 且未安装 Flash 的旧浏览器中（从日志中您可以看到这是 IE6）。

好消息是您可以通过设置和传递路径来避免这些请求到达您的服务器，并在`channelUrl`执行时传递`FB.init`.

[这篇博文](https://developers.facebook.com/blog/post/530/)为您提供了一些有关如何执行此操作的见解。

希望这可以帮助！

# jquery - Dynatree 和 qtip2——第一个子节点上没有（悬停）事件

> ID：11689990
> 
> 赞同：1
> 
> 时间：2012-07-27T14:35:21.720
> 
> 标签：jquery, qtip2, dynatree

我有一个自定义 qtip，当您将鼠标悬停在我的 Dynatree 中的一个节点上时，我想显示它。

我遇到的问题是我似乎没有在父母的第一个孩子上获得任何子节点悬停事件。

我正在创造这样的孩子：

```
var tipKey = uuid();
var childNode = parent.addChild({
            title: field.Description,
            isFolder: false,
            icon: icon,
            key: tipKey,
            addClass: tipKey,
        });
        $("." + tipKey).qtip({
            content: {
                text: '   ',
                title: {
                    text: '   '
                }
            },
            style: {
                classes: 'ui-tooltip-shadow ui-tooltip-yellow'
            },
            events: {
                show: function (event, api) {
                    var node = $.ui.dynatree.getNode($(api.elements.target));
                    var field = _workingFieldList[node.data.key];
                    //code to set qtip content omitted.
                }
            }
        }); 
```

除了每个父母的第一个孩子外，所有提示看起来都很好。这要么是一个错误，要么是我没有看到的一些奇怪问题。如果我为 $('#tree a').hover() 添加一个处理程序，我会在每个 mousein/out 上获得事件；我试图用它来显示 qtip，但这也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T21:06:02.170

Dynatree 仅在第一次展开时才呈现节点，因此您的代码可能绑定得太早。尝试在“onCreate”回调中绑定。

# android - 检测视图是否要占用更多空间

> ID：11689992
> 
> 赞同：1
> 
> 时间：2012-07-27T14:24:09.903
> 
> 标签：android, android-layout

我有一个视图/布局，其中包含其他布局。

这些布局的内容是动态生成的。有时会发生视图被截断/调整大小（就像许多按钮一样）并且布局内的按钮被调整大小。

有没有办法找出布局要求的尺寸是否比实际给出的更大？

我尝试使用 hit rect(s)进行`getMeasuredHeight()`拦截，`onMeasure`但它似乎不是正确的解决方案。

# ios - 文本随机不会自动换行 iOS

> ID：11689998
> 
> 赞同：1
> 
> 时间：2012-07-27T14:35:39.487
> 
> 标签：ios, uitableview, word-wrap

我有一个表格，其中单元格单词中的标签会自动换行，并且单元格的高度会相应地动态设置。一些看似随机的单元格会被截断。这些流氓细胞仍然是应该存在的额外线条所需的扩展高度。

我试图以编程方式并通过 Interface Builder 来做到这一点。两次结果相同。

这是一个完美的例子。至少有两个单元格是文字包装的。红色圈出的是我的一个流氓细胞的一个例子。

![在此处输入图像描述](../Images/c808be57fa5bdfc151669b2abc6634ba.png)

我什至想要一个指向问题所在的指针，因为我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:40:14.403

每行是一个单独的 UILabel 吗？UILabels 不能很好地自动处理换行符（根据我的经验）。为此，我建议你试试 UITextView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:11:03.550

要使 UILabel 自动换行，请尝试将 numberOfLines 属性设置为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T00:54:14.083

当我查看您的屏幕快照时（由于缩小了有点难以辨认），我注意到您的表格视图单元格的高度不同，这让我假设您是否正在做一些`sizeWithFont`计算来计算高度的单元格并确定框架`UILabel`。你确定你在那里正确地指定了你的自定义字体吗？`CGSize`你用的是什么`constrain`参数？如果你不这样做`sizeWithFont`，你如何获得不同高度的细胞？

我原以为问题不在于`UILabel`vs `UITextView`（后者只能引入额外的问题），而在于为标签设置框架并设置表格视图单元格高度的代码。