# StackOverflow 问答 12425000-12425999

# saml - PicketLnkSTS 和sender vouches 确认方法

> ID：12425013
> 
> 赞同：1
> 
> 时间：2012-09-14T12:54:07.833
> 
> 标签：saml

我需要一些关于如何在 Picketlink STS 服务中使用 sender-vouches 主题确认方法颁发安全令牌的信息。我搜索了信息和示例，但没有找到任何有用的东西，我什至不知道 picketlink（令牌提供程序和登录模块）是否支持此类令牌！

对于我正在处理的项目，我需要这种身份验证/授权系统，在该项目中，主题登录到 Web 应用程序，并且生成的身份必须传播到部署在其他服务器上的 SOAP Web 服务。

我想在这种情况下使用标准解决方案，避免实施专有解决方案，“SAML STS 配置文件”似乎可以解决问题，还有其他想法吗？

谢谢你们

# three.js - 用 Three.js 创建一个凹半球

> ID：12425014
> 
> 赞同：2
> 
> 时间：2012-09-14T12:54:12.000
> 
> 标签：three.js

我是一名拥有良好 JavaScript 经验的 Web 开发人员，我目前正在探索[Three.js 的](https://en.wikipedia.org/wiki/Three.js)可能性。但是，我对 3D 形状和词汇不是很熟悉，也不知道如何构建我需要的形状。

我想创建一个半球，并能够在这个球*内投影视频。*我有一个全景球面视频，我需要对其进行扭曲以使其看起来像“平面”。

感谢 Paul 的教程，我绘制了一个球体并将我的视频投影在上面。但是外球面是凸的，我需要一个凹的！我怎样才能做到这一点？从我最初的球体中挤出一个较小的球体？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-14T13:19:59.800

`SphereGeometry`您可以通过设置附加参数来创建半球体：

```
SphereGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) 
```

试验直到你得到你想要的。

您还必须将`side`用于球体的材料的属性设置为`THREE.BackSide`或`THREE.DoubleSide`。

```
material.side = THREE.DoubleSide; 
```

`SphereBufferGeometry`，它在内存方面更有效，现在也可用。它的构造函数具有相同的参数。

（三.js r.82）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-20T21:53:28.273

您可以使用 SphereBufferGeometry，来创建一个半球体（hemisphere）。最后一个论点做到了：`0.5 * Math.PI`. 为了能够看到某些东西，您需要使用`THREE.DoubleSide`for *material*。

```
var geometry = new THREE.SphereBufferGeometry(5, 8, 6, 0, 2*Math.PI, 0, 0.5 * Math.PI);
...
material.side = THREE.DoubleSide; 
```

# javascript - 按图片上传器表单样式搜索 Google 图片

> ID：12425016
> 
> 赞同：-1
> 
> 时间：2012-09-14T12:54:13.063
> 
> 标签：javascript, html

我正在尝试在我的网站上实现一个图像上传工具，类似于谷歌如何完成他们的图像上传搜索。这需要能够将图像放入其中；将网址粘贴到其中；或让用户从自己的计算机上传。

另一个相关问题，当您点击“粘贴 URL”或“上传文件”时，Google 如何更改选择方法？

images.google.com 用于创意来源。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:25:37.750

我相信谷歌花了几年的时间来开发使用其他图像搜索图像的算法，所以如果这是一个你为自己开发的网站，我会探索其他选择。否则，告诉你的老板这是不切实际的。

至于方法更改，我想（不用看得太仔细）它们将相机图标覆盖在输入上，并在单击时`<div>`在输入字段上显示一个或其他容器元素，然后可以包含替代输入方法。

当用户单击粘贴或上传时，它会使用 jQuery 或他们使用的任何 JavaScript 库将子容器的内容替换为相关的 HTML。

# string - 如何在bash中传递包含2个函数之间空格的字母数字变量？

> ID：12425018
> 
> 赞同：2
> 
> 时间：2012-09-14T12:54:17.993
> 
> 标签：string, bash, variables, space

脚本：

```
function insertMessage {
   $1 > log.txt
}

function checkResult {
  if [ $1 -eq 0 ]; then
    insertMessage "$2"
  else
    insertMessage "$3"
  fi
} 
```

但是当我尝试时：

```
 rm $DIR
 checkResult $? 'Directory deleted ok' 'Cannot delete directory' 
```

`Directory`我只在 log.txt 中收到。似乎 bash 也考虑了字符串中的空格 - 所以`$2`只作为 word `Directory`。

如何解决？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T12:56:20.300

使用引号：

```
function checkResult {
   if [ "$1" -eq 0 ]; then
     insertMessage "$2"
    else
     insertMessage "$3"
    fi
} 
```

你的`insertMessage`功能看起来很奇怪：

```
function insertMessage {
    echo "$1" >> log.txt
} 
```

会更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:13:41.000

您正在传递 $2 和 $3 参数而没有像 Mat 提到的那样引用，因此该`insertMessage`函数在您的示例中收到以下参数以表示成功：

```
$1 = Directory
$2 = deleted
$3 = ok 
```

因此，`echo $1 > log.txt`您只会在输出中获得“目录”。

要回显整个参数列表，而不引用您传入的参数，`checkResult`您可以执行以下操作：

```
function insertMessage {
    echo $@ > log.txt
} 
```

where`$@`是传递给函数的所有参数的数组。

# jquery - 为什么 insertBefore，在这种情况下，删除我的元素？

> ID：12425020
> 
> 赞同：0
> 
> 时间：2012-09-14T12:54:21.860
> 
> 标签：jquery, html

[代码](http://jsfiddle.net/yp9LT/2/)：

# HTML

```
<div class="try" id="try1">1</div>
<div class="try" id="try2">2</div>
<div class="try" id="try3">3</div> 
```

# jQuery

```
var ImmagineDrag=$('#try3');
var ImmagineDrop=$('#try2');

var swap1 = ImmagineDrag.index();
var swap2 = ImmagineDrop.index();

ImmagineDrag.insertBefore($('.try').eq(swap2));
ImmagineDrop.insertBefore($('.try').eq(swap1)); 
```

为什么 div`try2`会从 DOM 中移除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:04:34.200

如果您只想交换项目 2 和 3，您可以这样做：

```
$('#try3').insertBefore($('#try2')); 
```

这里没有理由变得更复杂。如果你想交换项目 1 和 3，你可以这样做

```
$('#try3').insertBefore($('#try1'));
$('#try1').insertAfter($('#try2')); 
```

您只需将项目放在您想要的位置。

**编辑 ：**

我制作了这个函数，它交换了同一个元素的两个子元素（我们可以概括，但这需要更多测试：最后一个孩子，唯一的孩子等）：

```
function swap($a, $b) { // a and b are (different) $jquery elements
    if ($b.index()<$a.index()) {
       var t = $a;
       $a = $b; $b = t;        
    }
    if ($b.index()==$a.index()+1) {
        $b.insertBefore($a);
    } else {
        var $c = $a.next();
        $a.insertBefore($b);
        $b.insertBefore($c);
    }
} 
```

可以在这里测试：http: [//jsfiddle.net/ferJR/](http://jsfiddle.net/ferJR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:11:46.617

`ImmagineDrop.insertBefore($('.try').eq(swap1));` 这时，`$('.try').eq(swap1)`是`ImmagineDrop`自己。

所以它与`ImmagineDrop.insertBefore(ImmagineDrop);`.

当您在元素本身之前插入一个元素时，它会导致它与文档分离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:49:48.173

这是为什么：

```
var ImmagineDrag=$('#try3');
var ImmagineDrop=$('#try2');

var swap1 = ImmagineDrag.index();
var swap2 = ImmagineDrop.index();
//at this point:
//  swap1 contains the value: 2
//  swap2 contains the value: 1

// $('.try').eq(swap2)  selects  $('#try2')
ImmagineDrag.insertBefore($('.try').eq(swap2));
// now $('#try3') has been inserted before '#try2'
// the order is now: try1, try3, try2

// the order of the nodes have changed :
//    swap1 is still 2,
//    so $('.try').eq(swap1) selects the third element
//    which is now '#try2'
// this action tries to insert '#try2' before itself !
ImmagineDrop.insertBefore($('.try').eq(swap1));
// hence your problem... 
```

至于如何解决它：您可以使用占位符

```
function swap(node1, node2){ //2 nodes
     $placeHolder = $('<span>').insertBefore(node1);
     $(node1).insertBefore(node2);
     $(node2).insertBefore($placeHolder);
     $placeHolder.remove();
} 
```

但请注意，如果 node1 == node2 或 node1 是 node2 的后代，则此类函数无法正常工作。

# python - 在进行 LPTHW 练习 47 时出现断言错误

> ID：12425024
> 
> 赞同：0
> 
> 时间：2012-09-14T12:54:32.937
> 
> 标签：python, debugging, assertion

我正在以艰难的方式学习 Python 的第 47 项练习，我收到一条错误消息：

```
Traceback (most recent call last):
File "c:\python26\lib\site-packages\nose-1.2.0-py2.6.egg\nose
97, in runTest
self.test(*self.arg)
File "E:\project\ex47\tests\ex47_tests.py", line 27, in test_
assert_equal(start.go('down').go('up'),start)
AssertionError: None != <ex47.game.Room object at 0x0191BFD0>

#while executing the below code: 

from nose.tools import *
from ex47.game import Room

def test_room():
    gold=Room("GoldRoom",
                """This room has gold in it you can grab. There's a
                door to the north.""")
    assert_equal(gold.name,"GoldRoom")
    assert_equal(gold.paths,{})

def test_room_paths():
    center = Room("Center","Test room in the center.")
    north = Room("North","Test room in the north.")
    south = Room("South", "Test room in the south.")
    center.add_paths({'north':north,'south': south})
    assert_equal(center.go('north'),north)
    assert_equal(center.go('south'),south)

def test_map():
    start = Room("start", "You can go west and down a hole.")
    west = Room("Trees","There are trees here, you can go east.")
    down = Room("Dungeon","It's dark down here, you can go up.")
    start.add_paths({'west':west,'down':down})
    west.add_paths({'east':start})
    assert_equal(start.go('west'),west)
    assert_equal(start.go('west').go('east'),start)
    assert_equal(start.go('down').go('up'),start) 
```

我在谷歌上搜索，发现它是在我们调试时引发的，但也可能是我的 game.py 文件位于 bin 文件夹中的原因

整体结构是这样的

项目/ex47/bins/
                              /docs
                               /tests/ex47_tests.py，_ _ init_ _ .py
                              /ex47/game.py

谁能帮助我并告诉我为什么会出现此错误？

这是 game.py 文件。

```
class Room(object):
    def __init__(self,name,description):
        self.name = name
        self.description = description
        self.paths={}

    def go(self,direction):
        return self.paths.get(direction,None)

    def add_paths(self,paths):
        self.paths.update(paths) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:20:04.933

你从来没有为你的房间添加`up`路径。`down`

```
down = Room("Dungeon","It's dark down here, you can go up.") 
```

所以你的失败就在这条线上

```
assert_equal(start.go('down').go('up'),start) 
```

`start.go('down')`返回`down Room`没有路径的对象`up`。它`None`从您的`get()`调用中返回，并再次比较`start`对象。提出断言是因为`None != start`

看起来你需要这条线：

```
down.add_paths({'up', start}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:10:46.133

您没有显示您正在测试的实际代码，但某处可能缺少`return`声明。

# c - 如何在 c 编程中检查空指针，得到这个编译错误：在需要标量的地方使用了结构类型值，

> ID：12425028
> 
> 赞同：0
> 
> 时间：2012-09-14T12:54:42.660
> 
> 标签：c, pointers, null, structure

```
struct s_client *cur_client(void){
    return (struct s_client *) pthread_getspecific(getclient);
}

int32_t chk_process (int32_t) {
...
struct s_client *ptr = cur_client();

//FIXME
// how could i check in this line , just when the value of 
// ptr is not zero , then it goes to it's next line?`

send_data (ptr, index);
...
...
} 
```

我想检查一下，只有在 ptr 的值不为零时，它才会转到下一行，我尝试了这行代码

```
if (*ptr != 0) 
```

但正如预期的那样，这是不正确的，因为它不是检查值！

Edit2：嗯，我自己找到了原因，因为 ptr 从 pthread_getspecific 填充。如果在其线程特定数据被破坏的键上调用 pthread_getspecific，则返回值 NULL。有关更多信息，您可以查看手册页...故事结束

编辑1：

好吧，这是结构名称 cur_client() ，在上面的代码中使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T12:56:46.960

您可能想测试指针是否不为空。如果是这样，则在进行比较时不应取消引用它：

```
if (ptr != 0) 
```

或者：

```
if (ptr != NULL) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T12:56:36.713

`ptr`是指向 的指针`struct s_client`，而`*ptr`是`struct s_client`自身。

您不是在将指针与 0 进行比较，而是在尝试将结构与 0 进行比较，这是无法完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:17:51.350

您似乎想检查指针指向的结构是否仅包含零。你可以这样做：

```
int i, isNonzero = 0;
for (i = 0; i < sizeof(*ptr); i++) {
    if (((char *)ptr)[i] != 0) {
        isNonzero = 1;
        break;
    }
}
if (isNonzero) {
    /* etc. */
} 
```

编辑：不， ptr 不是指针的地址，它是指针本身。如果您想检查它，请将其与 NULL 进行比较。指针只是一个普通变量本身，它包含一个表示内存地址的整数。指针类型变量（ptr 是）本身有一个地址，当您使用 != 运算符时，您似乎认为该地址会被比较。不，它没有 - 你必须写

```
if (&ptr != NULL) {
} 
```

这样做。不用担心，其他答案的建议也不错。

请努力阅读有关 C 指针的教程。这是在 StackOverflow 上问的太基本的东西。

# php - 如何在 Smarty 中检查 file_exists

> ID：12425029
> 
> 赞同：3
> 
> 时间：2012-09-14T12:54:43.180
> 
> 标签：php, html, smarty

我们正在尝试使用此功能，但没有得到正确的解决方案。如何在 Smarty 中检查 file_exists 的图像。

像

```
[{$oSelection->getName()}] = name of images.

[{assign var="filename" val="<img src="[{$oViewConf->getImageUrl()}]Productimg/selectlists/color/[{$oSelection->getName()}].gif" alt="">[{$oSelection->getName()}].gif"}]
[{if $filename|file_exists}]
success
[{else}]
no success
[{/if}] 
```

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T12:57:38.970

尝试使用

```
{if file_exists($filename)}..{/if} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T12:57:32.510

尝试`{if file_exists($filename)}`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-14T13:01:13.933

你可以检查这个

```
if (file_exists($file)) 
{
    $path = $filename;
}else{
    $path = 'demo.jpg';
} 
```

# arrays - 需要视觉 fortran 6.6a 的帮助我想在文本文件中查看 100*80 数组

> ID：12425031
> 
> 赞同：0
> 
> 时间：2012-09-14T12:54:49.083
> 
> 标签：arrays, fortran

嗨，我正在尝试解决一个简单的问题，并以 100*80 形式查看整个数组，但只要我尝试过，我就失败了。我可以为 5*5 阵列做，但不能为 100*80 或更大的阵列做。这是我的代码：

```
 PROGRAM Arr

REAL:: I,J,ITER,K
DIMENSION :: A(200,200)

A(1,1)=500
A(1,80)=300
A(100,1)=50
A(100,80)=40

READ(*,*) ITER

  DO K=1,ITER
  DO I=2,99
    DO J=2,89

 A(I,J)=(A(I+1,J)+A(I-1,J)+A(I,J+1)+A(I,J-1))/4

    END DO
  END DO
  END DO

 DO J=1,80
OPEN (UNIT=9, FILE='ARR.TXT', STATUS='REPLACE')

WRITE(9,*) (A(I,J),I=1,100)

 END DO

 END PROGRAM 
```

* * *

任何评论都会有所帮助。请详细告诉我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:12:29.257

不要使用简单的列表定向格式，而是直接指定它。尝试

写(9,'(200F12.5,x)') (A(I,J),I=1,100)

您可以使用这些数字并查看差异或查看一些参考[Fortran Formats](http://www.cs.mtu.edu/~shene/COURSES/cs201/NOTES/chap05/format.html)。

请注意，最大记录（行）长度可能是您无法克服的问题。

# c# - Unity3d：从磁盘加载带有 WWW 的流式音频剪辑

> ID：12425035
> 
> 赞同：1
> 
> 时间：2012-09-14T12:54:59.467
> 
> 标签：c#, memory-leaks, unity3d, audio-streaming

我使用 WWW 从磁盘加载 ogg 文件。

```
 var www = new WWW (@ "file://C:/myfile.ogg");
    yield return www;
    // Next line hangs
    var clip = www. audioClip; 
```

正如我所见，将 ogg 文件加载到内存时，Unity 会挂起 1000 毫秒。我尝试在其他线程中执行此操作，但 Unity 不允许这样做。

为什么我不预加载所有的音乐？因为在下载这些文件时，10-15 (3-5 MB) UnityEngine 需要 1.5 GB 的 RAM。

在音频导入检查器中，我可以配置 StreamFromDisk 选项。然后，音频将直接从磁盘流式传输，不会占用内存。

如何像在检查器中那样使用 WWW 从磁盘读取的文件流式传输？

你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:56:54.467

也许如果您将导入的 AudioClip 放入资产包中，并按原样加载它 - 将保留来自磁盘的流选项。我没有测试过这个，但我怀疑它可以工作。

# data-extraction - 自动填写网络查询表单并返回数据（对于新手）

> ID：12425040
> 
> 赞同：2
> 
> 时间：2012-09-14T12:55:27.007
> 
> 标签：data-extraction

我是编程中的“新手”之前的任何东西。我在 VBA 中为 Excel 编写了宏，并且在我年轻的时候也使用过 Visual Studio，但仅此而已。

**我的问题**：为了生成我在工作中需要的报告，我必须提取存储在我公司 Intranet 上用户友好查询表单后面的数据。除了这个，我已经自动化了报告的所有其他部分。我想编写一个程序来访问这个网页并用预设值为我填写查询表，然后返回输出的数据。我与我的一位计算机科学家朋友进行了讨论，他说使用 Haskell（他选择的语言）很容易做到这一点。但是我不是老手，所以我想学习一种更接近我水平的语言...... Python 似乎是一个不错的选择。

**我的问题**：是否可以使用 Python 进行这种类型的数据提取？这会有多难，什么是自学的好资源？

我做了一些研究并提出了 Scrapy，但我不知道它是否可以填写表格。此外，如果有其他更适合此的语言，我会很高兴听到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:02:23.543

我将从阅读一些关于 HTTP 的基本教程开始。表单基本上只是一种收集数据的可视化方式。表单的核心是您的浏览器对该表单数据发出的请求。

所以“填写表格”真的没有必要（虽然可能是这样，但希望不是因为它会变得复杂）。必要的是了解该表单实际向浏览器发出的请求并模拟它。一个超级简单的方法是使用 chrome 开发者工具或名为 firebug 的 firefox 扩展。其中的每一个都为您提供了一种查看所有网络流量（包括表单）的方法。

例如，如果您有一个必须提交数据和报告类型的表单，则实际的 Web 请求可能如下所示

`?date=2012-09-12&type=overview`

所以基本上你只需要找到一种方法来使用该数据向 url 发出 http 请求。这是一项微不足道的任务，几乎所有语言都有办法做到这一点。

用python很可能做到这一点。那里有大量的教程。Python 在标准库中内置了 url 库，可以帮助 [http://docs.python.org/library/urllib.html](http://docs.python.org/library/urllib.html)

每次我使用 urllib2 时，我通常都会访问[http://www.voidspace.org.uk/python/articles/urllib2.shtml](http://www.voidspace.org.uk/python/articles/urllib2.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:05:43.857

最简单的方法就是使用 urllib2。通常，表单的参数会传输到服务器，以便您可以在 URL 中将它们视为`?foo=bar&bla=blah`. 您可以使用 urllib2.urlencode 为表单生成参数：

[Python 和 urllib2：如何使用参数发出 GET 请求](https://stackoverflow.com/questions/2814898/python-and-urllib2-how-to-make-a-get-request-with-parameters)。

作为一个新手，你的想法很清晰，恭喜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-31T08:14:19.227

结合`loginform`和`scrapy`，您可以自动填写表格和抓取网页。这是一个关于它的教程。[http://blog.scrapinghub.com/2012/10/26/filling-login-forms-automatically/](http://blog.scrapinghub.com/2012/10/26/filling-login-forms-automatically/)

# python-3.x - Python Gmail Checker：授权的 Base64 问题

> ID：12425047
> 
> 赞同：0
> 
> 时间：2012-09-14T12:55:44.040
> 
> 标签：python-3.x, gmail, base64

我有一个我拼凑在一起的 python 脚本，它通过 rss 提要检查我的 gmail 并将文本输出到屏幕上。它在 python 2.6.6 上工作，但我没有成功让它在 python 3.2.3 下工作。我用 2to3 来转换它。代码在这里：https://www.dropbox.com/s/b1277mi7vc7hv3f/gmailcheckparseconky.py3

问题出现在ObtainEmailFeed 函数中。

使用时出现可怕的“ `TypeError("expected bytes, not %s" % s.__class__.__name__)`”错误

`b64auth = base64.encodestring("%s:%s" % (user, password))`

但是当我使用

```
string = bytes("%s:%s" % (user,password), 'utf-8')
string2=str(string,'utf-8')
b64auth = base64.encodestring( string) 
```

我明白了

```
auth = "Basic " + b64auth
TypeError: Can't convert 'bytes' object to str implicitly 
```

这似乎使整个问题又回到了原点。

我已经尝试将密码硬编码为文本，但这不起作用。当我 `urllib.error.HTTPError: HTTP Error 401: Unauthorized`设置 `auth = "Basic user:password"

正如我所说，我将代码拼凑在一起。我不完全理解 gmail 需要我授权什么。继续这种思路，我更愿意帮助修复此代码，以便我可以学习并更好地理解 python，而不是指向网络上的另一个脚本，该脚本与我正在做的事情相同/相似.

在此先感谢，尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:09:50.320

由于 python3 存在字节和字符串之间的区别。该错误来自`base64.encodestring`现在已弃用别名的事实`encodebytes`（另请参见：[http](http://docs.python.org/py3k/library/base64.html#module-base64) ://docs.python.org/py3k/library/base64.html#module-base64 ），因此它希望您提供字节，并且它会给你字节。

你可能想做：

```
string = bytes("%s:%s" % (user,password), 'utf-8')
b64bytes = base64.encodebytes(string)
b64auth = b64bytes.decode('ascii') 
```

然后 b64auth 将是一个字符串，您将能够在其余代码中将其用作字符串。

# titanium - 钛属性 API 使用

> ID：12425051
> 
> 赞同：0
> 
> 时间：2012-09-14T12:55:53.593
> 
> 标签：titanium, appcelerator, titanium-mobile, appcelerator-mobile

我是 Titanium Properties API 的新手。使用 setObject() 方法时出现奇怪的错误。以下是我的代码。

```
Titanium.App.Properties.setObject(view.idAttr, view); 
```

其中 view.idAttr 是充当此属性的键的字符串，而 view 是 View 类型的对象。调用上述方法后，我收到以下消息。

```
2012-09-14 17:47:25.947 SumMeUp[14033:4a03] *** -[NSUserDefaults setObject:forKey:]: Attempt to insert non-property value '[object TiUIView]' of class 'TiUIViewProxy'.  Note that dictionaries and arrays in property lists must also contain only property values. 
```

我无法理解这种行为。如果有人知道解决方法，请回复。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T15:00:36.370

`setObject()`仅适用于对象，不适用于视图。

对象是你自己用 JavaScript 编写的东西。

即使可以，将其存储在属性中也是应用程序的不良行为。请记住，该属性是跨会话存储的。因此，如果您想要存储某些内容，请将数据存储在那里以便稍后再次生成视图，而不是视图本身。还可以节省很多内存！

# android - 无法使用序列化android发送现有对象

> ID：12425054
> 
> 赞同：1
> 
> 时间：2012-09-14T12:55:56.883
> 
> 标签：android, android-intent, android-activity, serializable

我正在尝试使用意图和序列化 android 将对象从一个活动转移到另一个活动。在这里，我无法发送已经存在的对象（接收为 null），但是在发送新对象时它可以正常工作。

这是片段：

```
private void someMethod(TPackage tpackageObj) {
Intent intent = new Intent(obj, my.tatasky.ChannelActivity.class);      
intent.putExtra("parcel", new TPackage()); // it works
intent.putExtra("parcel", tpackageObj); // doesn't work
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:13:19.543

您的自定义类实现 Serializable 接口，然后您可以使用 Intent#putExtra() 方法的 putExtra(Serializable..) 变体在 Intent 中传递对象实例。

伪代码：

//传递：intent.putExtra("MyClass", obj);

// 在第二个 Activity 中检索对象 getIntent().getSerializableExtra("MyClass");

# android - Twitter 用户时间线活动不适用于 Android 4 及更高版本

> ID：12425057
> 
> 赞同：1
> 
> 时间：2012-09-14T12:56:06.710
> 
> 标签：android, listview, twitter, android-listview, compatibility

我创建了一个 Activity 以在 Android 姜饼的 ListView 中显示用户时间轴，它工作正常，但是当我在 android 4 设备上启动它时，列表为空白，logcat 输出为：

```
E/log_tag(5083): Error in parsing data org.json.JSONException: End of input at character 0 of 
```

我已经发布了下面的代码：

```
package nl.safan.e_app;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.Locale;

import eu.erikw.PullToRefreshListView.OnRefreshListener;
import eu.erikw.PullToRefreshListView;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;

import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class TwitterParseHandler extends SherlockActivity {
ArrayList<TwitterFeed> arrayOfWebData = new ArrayList<TwitterFeed>();

class TwitterFeed {
    public String text;
    public String created_at;
}

FancyAdapter aa=null;

static ArrayList<String> resultRow;
private PullToRefreshListView listView;

public void onCreate(Bundle savedInstanceState) {
    try
    {
        setTheme(TabActivity.THEME);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_twitter_parse_handler);
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        String result = "";

        try
        {
            HttpClient httpclient = new DefaultHttpClient();
            HttpGet httppost = new HttpGet("https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=safanbv&count=20&exclude_replies=True&lang=en");
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            InputStream webs = entity.getContent();

            try
            {
                BufferedReader reader = new BufferedReader(new InputStreamReader(webs, "iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "/n");
                }

                webs.close();
                result=sb.toString();
            }catch(Exception e){
                Log.e("log_tag", "Error in converting result "+e.toString());
            }
        }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
        }

        try
        {
            JSONArray jArray = new JSONArray(result);
            for (int i=0;i<jArray.length();i++)
            {
                JSONObject json_data = jArray.getJSONObject(i);
                TwitterFeed resultRow = new TwitterFeed();
                  String date = json_data.getString("created_at");
                  final String TWITTER="EEE MMM dd HH:mm:ss ZZZZZ yyyy";
                  SimpleDateFormat sf = new SimpleDateFormat(TWITTER,Locale.ENGLISH);
                  sf.setLenient(true);
                  Date created_at = sf.parse(date);
                resultRow.text = json_data.getString("text");
                resultRow.created_at = DateFormat.getDateInstance().format(created_at);;

                arrayOfWebData.add(resultRow);
            }
        }catch(JSONException e){
            Log.e("log_tag", "Error in parsing data "+e.toString());
        }

        ListView myListView = (ListView)findViewById(R.id.list);

        aa=new FancyAdapter();

        myListView.setAdapter(aa);

        listView = (PullToRefreshListView)findViewById(R.id.list);
        listView.setOnRefreshListener(new OnRefreshListener() {

            @Override
            public void onRefresh() {
                listView.postDelayed(new Runnable() {

                    @Override
                    public void run() {
                        String result = "";
                        try
                        {
                            HttpClient httpclient = new DefaultHttpClient();
                            HttpGet httppost = new HttpGet("https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=safanbv&count=20&exclude_replies=True");
                            HttpResponse response = httpclient.execute(httppost);
                            HttpEntity entity = response.getEntity();
                            InputStream webs = entity.getContent();

                            try
                            {
                                BufferedReader reader = new BufferedReader(new InputStreamReader(webs, "iso-8859-1"),8);
                                StringBuilder sb = new StringBuilder();
                                String line = null;
                                while ((line = reader.readLine()) != null) {
                                    sb.append(line + "/n");
                                }

                                webs.close();
                                result=sb.toString();
                            }catch(Exception e){
                                Log.e("log_tag", "Error in converting result "+e.toString());
                            }
                        }catch(Exception e){
                            Log.e("log_tag", "Error in http connection "+e.toString());
                        }

                        try
                        {
                            JSONArray jArray = new JSONArray(result);
                            for (int i=0;i<jArray.length();i++)
                            {
                                JSONObject json_data = jArray.getJSONObject(i);
                                TwitterFeed resultRow = new TwitterFeed();
                                  String date = json_data.getString("created_at");
                                  final String TWITTER="EEE MMM dd HH:mm:ss ZZZZZ yyyy";
                                  SimpleDateFormat sf = new SimpleDateFormat(TWITTER,Locale.ENGLISH);
                                  sf.setLenient(true);
                                  Date created_at = sf.parse(date);
                                resultRow.text = json_data.getString("text");
                                resultRow.created_at = DateFormat.getDateInstance().format(created_at);;

                                arrayOfWebData.add(resultRow);
                            }
                        }catch(JSONException e){
                            Log.e("log_tag", "Error in parsing data "+e.toString());
                        } catch (ParseException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        listView.onRefreshComplete();
                    }
                }, 2000);
            }
        });

    }
    catch(Exception e){
        Log.e("ERROR", "ERROR IN CODE: "+e.toString());
        e.printStackTrace();
    }

}

class FancyAdapter extends ArrayAdapter<TwitterFeed> {
    FancyAdapter() {
        super(TwitterParseHandler.this, android.R.layout.simple_list_item_1, arrayOfWebData);
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;

        if (convertView==null) {
            LayoutInflater inflater=getLayoutInflater();
            convertView=inflater.inflate(R.layout.twitterlist, null);

            holder=new ViewHolder(convertView);
            convertView.setTag(holder);
        }
        else
        {
            holder=(ViewHolder)convertView.getTag();
        }
        holder.populateFrom(arrayOfWebData.get(position));

        return(convertView);
    }
}

class ViewHolder {
    public TextView name=null;
    public TextView birthday=null;

    ViewHolder(View row) {
        name=(TextView)row.findViewById(R.id.TwitterText);
        birthday=(TextView)row.findViewById(R.id.TwitterDatum);
    }

    void populateFrom(TwitterFeed r) {
        name.setText(r.text);
        birthday.setText(r.created_at);
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    /*menu.add("refresh")
    .setIcon(R.drawable.ic_menu_refresh)
    .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);*/
return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item)
{

    switch (item.getItemId())
    {
    case android.R.id.home:
        finish();
        return true;

    case Menu.FIRST:
        //examineJSONdata();
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }
   }
   } 
```

我希望有人能找到问题所在。提前致谢！

# c# - ExecuteNonQuery 的问题

> ID：12425059
> 
> 赞同：2
> 
> 时间：2012-09-14T12:56:12.280
> 
> 标签：c#, sql-server-2008

我的代码在下面的 ExecuteNonQuery 行中超时。我不知道为什么。我已将超时时间增加到 900，但它仍然超时。

```
using (var conn = new SqlConnection(localConnection))

        {
            var command = String.Format(@"UPDATE dbo.Documents SET DocFile = {0} WHERE ID = '{1}'", @"BulkColumn from Openrowset(Bulk 'C:\Work\Document.docx', Single_Blob) AS DocFile", projID);
            using (var sqlWrite = new SqlCommand(command, conn))
            {
                conn.Open();
                sqlWrite.Parameters.Add("@File", SqlDbType.VarBinary, file.Length).Value = file;
                sqlWrite.ExecuteNonQuery();
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T12:59:27.367

由于这是一项批量活动，我想它会更新许多行，因此可能需要花费这么长时间。尝试将超时设置`0`为“无超时”，看看它是否会完成。

*   [SqlConnection.ConnectionTimeout](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectiontimeout.aspx)

# c# - 从 IEnumerable 获取键和值 >

> ID：12425060
> 
> 赞同：5
> 
> 时间：2012-09-14T12:56:11.423
> 
> 标签：c#, linq, .net-4.0, dictionary, system.reflection

我有一个 `IEnumerable < Dictionary < string, object > >` 对象。

我想在数组中获取“aaavalue”“bbbvalue”“cccvalue”“dddvalue”。

样本数据：

```
IEnumerable<Dictionary<string, object>> testData = new IEnumerable<Dictionary<string, object>>();

/* Values in testData will be like
   [0] - 
         aaa - aaaValue   (Key, Value)
         bbb - bbbValue
         ccc - cccValue
         ddd - dddValue  
   [1] - 
         aaa - aaaValue   (Key, Value)
         bbb - bbbValue
         ccc - cccValue
         ddd - dddValue  

    and so on */ 
```

我知道可以使用反射或 LINQ。但我无法弥补。

请帮忙..

**回答：**

```
IEnumerable<Dictionary<string, object>> enumerable = testData as List<Dictionary<string, object>> ?? testData .ToList();
foreach (Dictionary<string, object> objects in enumerable)
{
    IEnumerable<object> values = objects.Select(x => x.Value); // To get the values.
    IEnumerable<string> keys = objects.Select(x => x.Key); // To get the keys.
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T12:57:33.507

尝试：

```
IEnumerable<object> values = testData.SelectMany(x => x.Values); 
```

# objective-c - 更改 uiorientation 后获取相同的帧

> ID：12425064
> 
> 赞同：1
> 
> 时间：2012-09-14T12:56:33.933
> 
> 标签：objective-c, ios

您好，我一直在尝试通过使用百分比计算不同组件的高度和宽度来为所有方向编写一个代码。我在纵向时得到 320 x 460 帧，这没问题，但是当我更改为横向模式时出现问题，即使现在我得到相同的尺寸，但实际上我应该得到 460 x 320。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{

    NSLog(@"%f-%f",self.view.frame.size.width,self.view.frame.size.height);
} 
```

我也尝试了其他功能但仍然没有成功

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation{

 NSLog(@"%f-%f",self.view.frame.size.width,self.view.frame.size.height);

} 
```

# c - 独立进程之间的套接字句柄传输

> ID：12425067
> 
> 赞同：6
> 
> 时间：2012-09-14T12:56:40.043
> 
> 标签：c, linux, sockets

我正在做一些套接字编程实验（在 unix 环境中）。我正在尝试的是

1.  客户端向服务器发送请求。
2.  服务器应将客户端套接字发送给 Worker（一个独立进程）
3.  工人应该回复客户。

这可能吗？

如果 Worker 是 Server 的子级，则此方案适用。

如果 Server 和 Worker 是独立的进程，这行得通吗？如果是的话，有人可以给我一些想法吗？是否有可用于此类场景的示例？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-15T02:39:31.537

[Linux Programming Interface](http://www.man7.org/tlpi/)这本书提供了使用 Unix 域套接字在不相关进程之间[发送](http://man7.org/tlpi/code/online/dist/sockets/scm_rights_send.c.html)和[接收](http://man7.org/tlpi/code/online/dist/sockets/scm_rights_recv.c.html)文件描述符的示例。

为了好玩，我从头开始编写了自己的示例。`server.c`：

```
#include <unistd.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/un.h>
#include <netdb.h>
#include <signal.h>
#include <string.h>
#include <stdio.h>
#include <errno.h>

/* How many concurrent pending connections are allowed */
#define  LISTEN_BACKLOG     32

/* Unix domain socket path length (including NUL byte) */
#ifndef  UNIX_PATH_LEN
#define  UNIX_PATH_LEN    108
#endif

/* Flag to indicate we have received a shutdown request. */
volatile sig_atomic_t     done = 0;

/* Shutdown request signal handler, of the basic type. */
void handle_done_signal(int signum)
{
    if (!done)
        done = signum;

    return;
}

/* Install shutdown request signal handler on signal signum. */
int set_done_signal(const int signum)
{
    struct sigaction act;

    sigemptyset(&act.sa_mask);
    act.sa_handler = handle_done_signal;
    act.sa_flags = 0;

    if (sigaction(signum, &act, NULL) == -1)
        return errno;
    else
        return 0;
}

/* Return empty, -, and * as NULL, so users can use that
 * to bind the server to the wildcard address.
*/
char *wildcard(char *address)
{
    /* NULL? */
    if (!address)
        return NULL;

    /* Empty? */
    if (!address[0])
        return NULL;

    /* - or ? or * or : */
    if (address[0] == '-' || address[0] == '?' ||
        address[0] == '*' || address[0] == ':')
        return NULL;

    return address;
}

int main(int argc, char *argv[])
{
    struct addrinfo         hints;
    struct addrinfo        *list, *curr;

    int             listenfd, failure;

    struct sockaddr_un     worker;
    int             workerfd, workerpathlen;

    struct sockaddr_in6     conn;
    socklen_t         connlen;
    struct msghdr         connhdr;
    struct iovec         conniov;
    struct cmsghdr        *connmsg;
    char             conndata[1];
    char             connbuf[CMSG_SPACE(sizeof (int))];
    int             connfd;

    int             result;
    ssize_t             written;

    if (argc != 4) {
        fprintf(stderr, "\n");
        fprintf(stderr, "Usage: %s ADDRESS PORT WORKER\n", argv[0]);
        fprintf(stderr, "This creates a server that binds to ADDRESS and PORT,\n");
        fprintf(stderr, "and passes each connection to a separate unrelated\n");
        fprintf(stderr, "process using an Unix domain socket at WORKER.\n");
        fprintf(stderr, "\n");
        return (argc == 1) ? 0 : 1;
    }

    /* Handle HUP, INT, PIPE, and TERM signals,
     * so when the user presses Ctrl-C, the worker process cannot be contacted,
     * or the user sends a HUP or TERM signal, this server closes down cleanly. */
    if (set_done_signal(SIGINT) ||
        set_done_signal(SIGHUP) ||
        set_done_signal(SIGPIPE) ||
        set_done_signal(SIGTERM)) {
        fprintf(stderr, "Error: Cannot install signal handlers.\n");
        return 1;
    }

    /* Unix domain socket to the worker */
    memset(&worker, 0, sizeof worker);
    worker.sun_family = AF_UNIX;

    workerpathlen = strlen(argv[3]);
    if (workerpathlen < 1) {
        fprintf(stderr, "Worker Unix domain socket path cannot be empty.\n");
        return 1;
    } else
    if (workerpathlen >= UNIX_PATH_LEN) {
        fprintf(stderr, "%s: Worker Unix domain socket path is too long.\n", argv[3]);
        return 1;
    }

    memcpy(&worker.sun_path, argv[3], workerpathlen);
    /* Note: the terminating NUL byte was set by memset(&worker, 0, sizeof worker) above. */

    workerfd = socket(AF_UNIX, SOCK_STREAM, 0);
    if (workerfd == -1) {
        fprintf(stderr, "Cannot create an Unix domain socket: %s.\n", strerror(errno));
        return 1;
    }
    if (connect(workerfd, (const struct sockaddr *)(&worker), (socklen_t)sizeof worker) == -1) {
        fprintf(stderr, "Cannot connect to %s: %s.\n", argv[3], strerror(errno));
        close(workerfd);
        return 1;
    }

    /* Initialize the address info hints */
    memset(&hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC;        /* IPv4 or IPv6 */
    hints.ai_socktype = SOCK_STREAM;    /* Stream socket */
    hints.ai_flags = AI_PASSIVE        /* Wildcard ADDRESS */
                   | AI_ADDRCONFIG          /* Only return IPv4/IPv6 if available locally */
                   | AI_NUMERICSERV        /* Port must be a number */
                   ;
    hints.ai_protocol = 0;            /* Any protocol */

    /* Obtain the chain of possible addresses and ports to bind to */
    result = getaddrinfo(wildcard(argv[1]), argv[2], &hints, &list);
    if (result) {
        fprintf(stderr, "%s %s: %s.\n", argv[1], argv[2], gai_strerror(result));
        close(workerfd);
        return 1;
    }

    /* Bind to the first working entry in the chain */
    listenfd = -1;
    failure = EINVAL;
    for (curr = list; curr != NULL; curr = curr->ai_next) {
        listenfd = socket(curr->ai_family, curr->ai_socktype, curr->ai_protocol);
        if (listenfd == -1)
            continue;

        if (bind(listenfd, curr->ai_addr, curr->ai_addrlen) == -1) {
            if (!failure)
                failure = errno;
            close(listenfd);
            listenfd = -1;
            continue;
        }

        /* Bind successfully */
        break;
    }

    /* Discard the chain, as we don't need it anymore.
     * Note: curr is no longer valid after this. */
    freeaddrinfo(list);

    /* Failed to bind? */
    if (listenfd == -1) {
        fprintf(stderr, "Cannot bind to %s port %s: %s.\n", argv[1], argv[2], strerror(failure));
        close(workerfd);
        return 1;
    }

    if (listen(listenfd, LISTEN_BACKLOG) == -1) {
        fprintf(stderr, "Cannot listen for incoming connections to %s port %s: %s.\n", argv[1], argv[2], strerror(errno));
        close(listenfd);
        close(workerfd);
        return 1;
    }

    printf("Now waiting for incoming connections to %s port %s\n", argv[1], argv[2]);
    fflush(stdout);

    while (!done) {

        memset(&conn, 0, sizeof conn);
        connlen = sizeof conn;

        connfd = accept(listenfd, (struct sockaddr *)&conn, &connlen);
        if (connfd == -1) {

            /* Did we just receive a signal? */
            if (errno == EINTR)
                continue;

            /* Report a connection failure. */
            printf("Failed to accept a connection: %s\n", strerror(errno));
            fflush(stdout);

            continue;
        }

        /* Construct the message to the worker process. */
        memset(&connhdr, 0, sizeof connhdr);
        memset(&conniov, 0, sizeof conniov);
        memset(&connbuf, 0, sizeof connbuf);

        conniov.iov_base = conndata;    /* Data payload to send */
        conniov.iov_len  = 1;        /* We send just one (dummy) byte, */
        conndata[0] = 0;        /* a zero. */

        /* Construct the message (header) */
        connhdr.msg_name       = NULL;        /* No optional address */
        connhdr.msg_namelen    = 0;        /* No optional address */
        connhdr.msg_iov        = &conniov;    /* Normal payload - at least one byte */
        connhdr.msg_iovlen     = 1;        /* Only one vector in conniov */
        connhdr.msg_control    = connbuf;    /* Ancillary data */
        connhdr.msg_controllen = sizeof connbuf;

        /* Construct the ancillary data needed to pass one descriptor. */
        connmsg = CMSG_FIRSTHDR(&connhdr);
        connmsg->cmsg_level = SOL_SOCKET;
        connmsg->cmsg_type = SCM_RIGHTS;
        connmsg->cmsg_len = CMSG_LEN(sizeof (int));
        /* Copy the descriptor to the ancillary data. */
        memcpy(CMSG_DATA(connmsg), &connfd, sizeof (int));

        /* Update the message to reflect the ancillary data length */
        connhdr.msg_controllen = connmsg->cmsg_len;

        do {
            written = sendmsg(workerfd, &connhdr, MSG_NOSIGNAL);
        } while (written == (ssize_t)-1 && errno == EINTR);
        if (written == (ssize_t)-1) {
            const char *const errmsg = strerror(errno);

            /* Lost connection to the other end? */
            if (!done) {
                if (errno == EPIPE)
                    done = SIGPIPE;
                else
                    done = -1;
            }

            printf("Cannot pass connection to worker: %s.\n", errmsg);
            fflush(stdout);

            close(connfd);

            /* Break main loop. */
            break;
        }

        /* Since the descriptor has been transferred to the other process,
         * we can close our end. */
        do {
            result = close(connfd);
        } while (result == -1 && errno == EINTR);
        if (result == -1)
            printf("Error closing leftover connection descriptor: %s.\n", strerror(errno));

        printf("Connection transferred to the worker process.\n");
        fflush(stdout);
    }

    /* Shutdown. */

    close(listenfd);
    close(workerfd);

    switch (done) {
    case SIGTERM:
        printf("Terminated.\n");
        break;

    case SIGPIPE:
        printf("Lost connection.\n");
        break;

    case SIGHUP:
        printf("Hanging up.\n");
        break;

    case SIGINT:
        printf("Interrupted; exiting.\n");
        break;

    default:
        printf("Exiting.\n");
    }

    return 0;
} 
```

和`worker.c`：

```
#include <unistd.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/un.h>
#include <netdb.h>
#include <signal.h>
#include <string.h>
#include <stdio.h>
#include <errno.h>

/* How many concurrent pending connections are allowed */
#define  LISTEN_BACKLOG     32

/* Unix domain socket path length (including NUL byte) */
#ifndef  UNIX_PATH_LEN
#define  UNIX_PATH_LEN    108
#endif

/* Flag to indicate we have received a shutdown request. */
volatile sig_atomic_t     done = 0;

/* Shutdown request signal handler, of the basic type. */
void handle_done_signal(int signum)
{
    if (!done)
        done = signum;

    return;
}

/* Install shutdown request signal handler on signal signum. */
int set_done_signal(const int signum)
{
    struct sigaction act;

    sigemptyset(&act.sa_mask);
    act.sa_handler = handle_done_signal;
    act.sa_flags = 0;

    if (sigaction(signum, &act, NULL) == -1)
        return errno;
    else
        return 0;
}

/* Helper function to duplicate file descriptors.
 * Returns 0 if success, errno error code otherwise.
*/
static int copy_fd(const int fromfd, const int tofd)
{
    int result;

    if (fromfd == tofd)
        return 0;

    if (fromfd == -1 || tofd == -1)
        return errno = EINVAL;

    do {
        result = dup2(fromfd, tofd);
    } while (result == -1 && errno == EINTR);
    if (result == -1)
        return errno;

    return 0;
}

int main(int argc, char *argv[])
{
    struct sockaddr_un     worker;
    int             workerfd, workerpathlen;
    int             serverfd, clientfd;

    pid_t             child;

    struct msghdr         msghdr;
    struct iovec         msgiov;
    struct cmsghdr        *cmsg;
    char             data[1];
    char             ancillary[CMSG_SPACE(sizeof (int))];
    ssize_t             received;

    if (argc < 3) {
        fprintf(stderr, "\n");
        fprintf(stderr, "Usage: %s WORKER COMMAND [ ARGS .. ]\n", argv[0]);
        fprintf(stderr, "This creates a worker that receives connections\n");
        fprintf(stderr, "from Unix domain socket WORKER.\n");
        fprintf(stderr, "Each connection is served by COMMAND, with the\n");
        fprintf(stderr, "connection connected to its standard input and output.\n");
        fprintf(stderr, "\n");
        return (argc == 1) ? 0 : 1;
    }

    /* Handle HUP, INT, PIPE, and TERM signals,
     * so when the user presses Ctrl-C, the worker process cannot be contacted,
     * or the user sends a HUP or TERM signal, this server closes down cleanly. */
    if (set_done_signal(SIGINT) ||
        set_done_signal(SIGHUP) ||
        set_done_signal(SIGPIPE) ||
        set_done_signal(SIGTERM)) {
        fprintf(stderr, "Error: Cannot install signal handlers.\n");
        return 1;
    }

    /* Unix domain socket */
    memset(&worker, 0, sizeof worker);
    worker.sun_family = AF_UNIX;

    workerpathlen = strlen(argv[1]);
    if (workerpathlen < 1) {
        fprintf(stderr, "Worker Unix domain socket path cannot be empty.\n");
        return 1;
    } else
    if (workerpathlen >= UNIX_PATH_LEN) {
        fprintf(stderr, "%s: Worker Unix domain socket path is too long.\n", argv[1]);
        return 1;
    }

    memcpy(&worker.sun_path, argv[1], workerpathlen);
    /* Note: the terminating NUL byte was set by memset(&worker, 0, sizeof worker) above. */

    workerfd = socket(AF_UNIX, SOCK_STREAM, 0);
    if (workerfd == -1) {
        fprintf(stderr, "Cannot create an Unix domain socket: %s.\n", strerror(errno));
        return 1;
    }
    if (bind(workerfd, (const struct sockaddr *)(&worker), (socklen_t)sizeof worker) == -1) {
        fprintf(stderr, "%s: %s.\n", argv[1], strerror(errno));
        close(workerfd);
        return 1;
    }
    if (listen(workerfd, LISTEN_BACKLOG) == -1) {
        fprintf(stderr, "%s: Cannot listen for messages: %s.\n", argv[1], strerror(errno));
        close(workerfd);
        return 1;
    }

    printf("Listening for descriptors on %s.\n", argv[1]);
    fflush(stdout);

    while (!done) {

        serverfd = accept(workerfd, NULL, NULL);
        if (serverfd == -1) {

            if (errno == EINTR)
                continue;

            printf("Failed to accept a connection from the server: %s.\n", strerror(errno));
            fflush(stdout);
            continue;
        }

        printf("Connection from the server.\n");
        fflush(stdout);

        while (!done && serverfd != -1) {

            memset(&msghdr, 0, sizeof msghdr);
            memset(&msgiov, 0, sizeof msgiov);

            msghdr.msg_name       = NULL;
            msghdr.msg_namelen    = 0;
            msghdr.msg_control    = &ancillary;
            msghdr.msg_controllen = sizeof ancillary;

            cmsg = CMSG_FIRSTHDR(&msghdr);
            cmsg->cmsg_level = SOL_SOCKET;
            cmsg->cmsg_type = SCM_RIGHTS;
            cmsg->cmsg_len = CMSG_LEN(sizeof (int));

            msghdr.msg_iov    = &msgiov;
            msghdr.msg_iovlen = 1;

            msgiov.iov_base    = &data;
            msgiov.iov_len = 1; /* Just one byte */

            received = recvmsg(serverfd, &msghdr, 0);

            if (received == (ssize_t)-1) {
                if (errno == EINTR)
                    continue;

                printf("Error receiving a message from server: %s.\n", strerror(errno));
                fflush(stdout);
                break;
            }

            cmsg = CMSG_FIRSTHDR(&msghdr);
            if (!cmsg || cmsg->cmsg_len != CMSG_LEN(sizeof (int))) {
                printf("Received a bad message from server.\n");
                fflush(stdout);
                break;
            }

            memcpy(&clientfd, CMSG_DATA(cmsg), sizeof (int));

            printf("Executing command with descriptor %d: ", clientfd);
            fflush(stdout);

            child = fork();
            if (child == (pid_t)-1) {
                printf("Fork failed: %s.\n", strerror(errno));
                fflush(stdout);
                close(clientfd);
                break;
            }

            if (!child) {
                /* This is the child process. */

                close(workerfd);
                close(serverfd);

                if (copy_fd(clientfd, STDIN_FILENO) ||
                    copy_fd(clientfd, STDOUT_FILENO) ||
                    copy_fd(clientfd, STDERR_FILENO))
                    return 126; /* Exits the client */

                if (clientfd != STDIN_FILENO &&
                    clientfd != STDOUT_FILENO &&
                    clientfd != STDERR_FILENO)
                    close(clientfd);

                execvp(argv[2], argv + 2);

                return 127; /* Exits the client */
            }

            printf("Done.\n");
            fflush(stdout);

            close(clientfd);
        }

        close(serverfd);

        printf("Closed connection to server.\n");
        fflush(stdout);        
    }

    /* Shutdown. */
    close(workerfd);

    switch (done) {
    case SIGTERM:
        printf("Terminated.\n");
        break;

    case SIGPIPE:
        printf("Lost connection.\n");
        break;

    case SIGHUP:
        printf("Hanging up.\n");
        break;

    case SIGINT:
        printf("Interrupted; exiting.\n");
        break;

    default:
        printf("Exiting.\n");
    }

    return 0;
} 
```

您可以使用编译它们

```
gcc -W -Wall -O3 worker.c -o worker
gcc -W -Wall -O3 server.c -o server 
```

并使用例如运行

```
rm -f connection
./worker connection  /bin/date &
./server 127.0.0.1 8000 connection & 
```

如您所见，`./worker`和`./server`进程是完全分开的。我建议从不同的窗口启动它们（省略`&`命令行末尾的 ，否则会在后台运行命令）。`connection`是用于传输网络连接文件描述符的 Unix 域套接字的路径或名称。这`/bin/date`是一个命令（不是 shell 命令，一个可执行文件），它将为每个连接执行，标准输入、输出和错误直接连接到网络客户端——非常像`inetd`或`xinetd`确实如此，只是简单的框架。

您可以通过例如测试连接

```
nc 127.0.0.1 8000 
```

或者

```
telnet 127.0.0.1 8000 
```

上面的`/bin/date`命令只会将当前日期输出到标准输出，但如果你使用更聪明的工作命令，比如

```
rm -f connection
./worker connection printf 'HTTP/1.0 200 Ok\r\nConnection: close\r\nContent-Type: text/html; charset=UTF-8\r\nContent-Length: 67\r\n\r\n<html><head><title>Works</title></head><body>Works!</body></html>\r\n' 
```

您可以使用浏览器 ( `http://127.0.0.1:8000/`) 进行测试。

该设计是这样的，它`worker.c`监听一个 Unix 域套接字（`connection`在所有上述示例命令的当前工作目录中）。它首先接受一个连接（来自单个服务器），然后期望每个传入字节与`SCM_RIGHTS`包含引用客户端连接的文件描述符的辅助数据相关联。如果出现问题，或者连接断开，它会返回等待来自服务器的新连接。如果它接收到客户端描述符，它会派生一个子进程，将其标准输入、输出和错误重定向到客户端描述符，并执行`./worker`命令行中指定的命令。父进程关闭它的客户端描述符副本，然后返回等待新的。

`server.c`侦听到在其命令行上指定的 IPv4 或 IPv6 地址和端口的传入连接。`worker.c`当它获得连接时，它通过命令行（ ）上指定的 Unix 域套接字将连接的文件描述符传输到上述进程`connection`，关闭自己的副本，然后返回等待新连接。请注意，如果服务器失去与工作人员的连接，它会中止；你会想`./worker`总是在`./server`.

两者都`server.c`安装`worker.c`简单的信号处理程序，以便您可以通过向它们发送 HUP 或 INT 信号来告诉它们退出（Ctrl-C，如果您在单独的终端或 shell 中在前台运行命令）。他们也有合理的错误检查，所以当他们退出时，他们会告诉你确切的原因。老实说，我这样做是因为这样你偶尔会收到 EINTR 错误，除非你正确对待它们（重试相关的系统调用，除非被要求退出），你的进程将是脆弱的，并且由于条件的最轻微变化而崩溃。健壮；这并不难，而且结果对用户/系统管理员更友好。

我希望你觉得代码很有趣。如果您对细节有任何疑问，我很乐意详细说明。请记住，我是在很短的时间内从头开始编写的，它只是一个简单的例子。有**很大**的改进空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T13:01:10.080

UNIX 套接字用于在进程之间传递文件描述符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T13:09:30.097

根据[这篇文章](https://stackoverflow.com/a/1139425/1480324)应该是可能的。您需要某种方式（想到管道或套接字）让您的工作进程知道套接字句柄。

不幸的是，我对 unix 编程没有经验，所以我不能给你更具体的信息。

# codeigniter - 在codeigniter中调整图像大小

> ID：12425069
> 
> 赞同：1
> 
> 时间：2012-09-14T12:56:45.493
> 
> 标签：codeigniter

我想在 CodeIgniter 的表单 (100 * 100) 上显示图像时调整图像大小，方法是使用以下函数：

```
echo img('imagepath'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:11:20.300

这会做到的。。

```
$image_properties = array(
      'src' => 'imagepath',
      'alt' => 'Me, demonstrating how to eat 4 slices of pizza at one time',
      'class' => 'post_images',
      'width' => '100',
      'height' => '100',
      'title' => 'That was quite a night'
);

echo img($image_properties); 
```

**资料来源：** [Codeigniter](http://codeigniter.com/user_guide/helpers/html_helper.html#img)

# android - 带有剪辑到填充的过度滚动滚动指示器

> ID：12425071
> 
> 赞同：9
> 
> 时间：2012-09-14T12:56:58.867
> 
> 标签：android, listview, clip, overscroll

我有这个问题，我无法摆脱 froyo 和姜饼。我使用 clipToPadding="false" 属性在 listView 周围没有顶部和底部填充，除非它的结尾。但是在 2.2 和 2.3 上，使用 clipToPadding 会导致过度滚动指示器或我应该如何调用它，忽略我的 clipToPadding 设置并使这些白线出现在我的图像上而不是屏幕边缘。

![在此处输入图像描述](../Images/4f4e7f6a2e77defd7bc5de7338beb009.png)

然而，这在 ICS 上不存在

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-14T13:05:47.723

我相信你看到的那些白线`fadingEdge`是`ListView`. `ListView`您可以通过将此属性添加到您的in xml来摆脱它们：

```
android:fadingEdge="none" 
```

或在代码中：

```
listview.setVerticalFadingEdgeEnabled(false); 
```

在 ICS 和 forward 中，默认情况下会禁用淡入淡出的边缘，这就是您看不到它们的原因。

# c++ - C++ 原始指针和 std::shared_ptr

> ID：12425073
> 
> 赞同：18
> 
> 时间：2012-09-14T12:57:02.407
> 
> 标签：c++, pointers, shared

在我`std::shared_ptr`的软件开发过程中，我遇到了几个让我怀疑内存管理的案例。我有一个第三方库，它总是给我来自函数的原始指针，并且在我的代码中我将它们转换为`std::shared_ptr`（来自 std 而不是来自 boost。顺便说一下，两者之间有什么区别？）。所以假设我有以下代码：

```
ClassA* raw = new ClassA;
std::shared_ptr<ClassA> shared(raw); 
```

当共享指针超出范围时会发生什么（假设它是在函数中本地声明的，现在我正在退出函数）。该`ClassA`对象是否仍然存在，因为原始指针指向它？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-14T12:58:48.950

不，不会的。通过将原始指针指向`shared_ptr`，您`shared_ptr`将负责删除它。`shared_ptr`当引用您的`ClassA`实例的最后一个对象不再存在时，它将执行此操作。原始指针不算数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-14T13:01:26.337

不。共享指针将删除它。

如果您有第三方库为您提供指针，则需要确保以正确的方式删除它。例如，如果第 3 方库使用“malloc”分配它，那么您需要使用该库使用的“免费”实现。您需要确定它是如何分配的。

该库是否提供了一种方法来销毁它为您提供的对象？在这种情况下，您应该使用该函数来销毁它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T13:00:03.977

不，`ClassA`对象将被销毁。除非您没有复制`shared_ptr`超出范围的某个位置，否则它的引用计数器 > 1。

# sql - SQL SERVER 2008 R2 与 SQL SERVER 2012

> ID：12425075
> 
> 赞同：0
> 
> 时间：2012-09-14T12:57:05.870
> 
> 标签：sql, sql-server-2008-r2, sql-server-2012

SQL Server 2008 r2 的交叉连接查询执行速度很慢。它在我们的系统中造成了太多问题。Sql server 2012 上的迁移可以解决交叉连接问题。早些时候我们使用的是 sql 2005，我们没有这样的问题。但我们现在不能搬回去。我不知道这是否解决了我的问题。在执行交叉连接查询方面，2012 年的性能优于 2008 年 r2 吗？

```
select '37' as orddate,brand from maindb1.dbo.contract_report where jobnumber in (select      distinct [Job Number] from maindb1.dbo.v_alltype_st where [day] like '%2012' and DATEPART(WEEK,CONVERT(datetime,[DAY],103))='37') and brand<>'' and brand<>'N/A' 
```

以上运行约 7 分钟，以下运行约 32 秒

```
select brand from maindb1.dbo.contract_report where jobnumber in (select distinct [Job Number] from maindb1.dbo.v_alltype_st where [day] like '%2012' and DATEPART(WEEK,CONVERT(datetime,[DAY],103))='37') and brand<>'' and brand<>'N/A' 
```

唯一的区别是上面有一个额外的字段。

一个是表，一个是视图。这不是唯一的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:59:31.250

如果您在 2008 R2 上看到您在 2005 年没有看到的性能问题，并且此数据库是直接升级或通过备份/恢复或分离/附加迁移的，您应该确保：

(a) 手动[更新](http://msdn.microsoft.com/en-us/library/ms187348%28v=sql.105%29.aspx)所有相关表格的统计数据

(b) 确保[将兼容性级别设置为 100](http://msdn.microsoft.com/en-us/library/bb510680%28v=sql.105%29.aspx)

一般来说，SQL Server 2012 应该提供底层性能增强，主要是由于优化器的改进。我不相信交叉连接有任何特定的增强，但我也不知道源代码，所以无论如何都很难知道。

# grid - 将 extjs 4.0.7 迁移到 4.1.1 的问题

> ID：12425078
> 
> 赞同：0
> 
> 时间：2012-09-14T12:57:13.417
> 
> 标签：grid, extjs4, scrollbar, extjs4.1, treepanel

我在尝试从 extjs 4.0.7 切换到 4.1.1 时遇到了一些问题。

第一个问题如下：

我有两个在列布局中的树形面板。一个紧挨着另一个。我的应用程序将一堆节点加载到左侧面板中，然后您可以选择将其中一些节点移动到另一个面板中。但是，带有所有节点的面板没有显示滚动条，因此我突然看不到大约 1/3 的节点。我在 4.0.7 中遇到了一个半相似的问题，如果面板已满，我无法看到最后一个节点移动，直到我移动另一个节点。我用以下几行修复了这个问题：

```
treePanel1.invalidateScroller();
treePanel2.invalidateScroller(); 
```

这些行在 4.1.1 中已弃用，问题似乎变得更糟。有没有人有类似的问题，我如何让我的滚动条回来。

与我的 UI 相关的第二个主要问题：

我在其他地方有两个彼此相邻的网格，其布局类似于树形面板。我已经在两个网格之间设置了拖放。同样，所有节点都从左侧网格开始，可以选择将一些节点拖到右侧网格中。但是，右侧网格现在没有以全尺寸显示，它默认为条子。因此，如果您知道将节点拖到那个小条子上，那么 DD 功能仍然存在。之后，sliver 膨胀到足以容纳单个节点，依此类推。那么，我如何让它恢复到默认的全尺寸。为什么 extjs 4.1.1 会导致这些问题？我必须在任何代码中增加手指，但如果绝对必要的话可以。但是，如果有人根据我的描述熟悉此类问题，那就太好了。

**编辑：**另外，我在网格的最右边一列有一个组合框。当我单击以更改其中一个组合框时，会弹出一个迷你滚动条，以阻止下拉按钮。他们对这个版本做了什么？

这是布局定义，我遇到的第一个问题是滚动条在需要时没有显示在面板上：

```
{
    xtype: 'panel',
    title: 'Select fields',
    defaults: {
        border: false,
        height: '100%'
    },
    layout: 'column',
    items: [

        {
        xtype: 'treepanel',
        itemID: 'choicesTreePanel',
        title: 'Choose from below fields',
        height: '100%',
        multiSelect: true,
        store: choicesTree,
        rootVisible: false,
        columnWidth: .44},

    {
        xtype: 'panel',
        columnWidth: .06,
        layout: {
            type: 'vbox',
            align: 'center'
        },
        defaults: {
            margins: "15 0 0 0"
        },
        items: [
            {
            xtype: 'button',
            text: '==>'},
        {
            xtype: 'button',
            text: '<=='},
        {
            xtype: 'button',
            text: 'RST'}

             ]},
    {
        xtype: 'treepanel',
        itemId: 'chosenTreePanel',
        title: 'Fields',
        border: true,
        store: chosenFields,
        rootVisible: false,
        columnWidth: .44,
        viewConfig: {
            plugins: {
                ptype: 'treeviewdragdrop,
        dragText:'
                dragginggggg '
        },
        ddGroup: '
                fieldsDD '        
        }
        },
        {xtype:'
                panel ',
        columnWidth:.06,
        layout:{
        type:'
                vbox ',
        align:'
                center '
        },
        items: [
            {
            xtype: '
                button ',
            text: '
                UP '},
        {
            xtype: '
                button ',
            text: '
                DOWN '}

             ]
        }

        ]
 } 
```

编辑：在左侧面板上，如果我将高度设置为设定值，并且自动滚动为真，我有一个滚动条。如果我将高度设置为“100%”并且自动滚动为真，则没有滚动条。所以一个解决方案可能是找出如何让面板适合父级的高度，同时保持滚动条

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:14:32.123

（也许最好将您的问题分成多个单独的问题）

关于面板高度和滚动条的第一个问题：

在您的示例中，我会问自己一个问题“我希望树形面板具有与什么相关的 100% 高度？”。

当您不关心与其父元素相关的子元素的高度时，通常使用列布局：子元素的高度之和定义列的高度，如您在此处看到的：[http://docs .sencha.com/ext-js/4-1/extjs-build/examples/layout/column.html](http://docs.sencha.com/ext-js/4-1/extjs-build/examples/layout/column.html)。

您没有在列上定义任何高度，因此它使用子元素的高度（在您的示例中没有高度）。我不知道 Ext 在这种情况下做了什么，但基于此，它不能做任何聪明的事情。

如果您希望树形面板使用包含面板的整个高度，您可以使用将 align 属性设置为**stretch的****hbox**布局。这也可能修复滚动条，因为高度计算可以正确完成。不要忘记删除“height: 100%”和“autoscroll”属性，因为它们混淆了。

 **最后，将树形面板的布局更改为“适合”可能会给您想要的结果。

你的代码可能会变成这样：

```
{
    xtype: 'panel',
    layout: {
        type: 'hbox',
        align: 'stretch'
    },
    items: [{
        xtype: 'treepanel',
        layout: 'fit',
        flex: 44,
        ...
    }, {
        flex: 6,
        ...
    },{
        flex: 44,
        ...
    }]
} 
```

我没有在你的代码上测试这个答案。请提供完整的工作代码示例（带有虚拟商店），我将对其进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:53:27.150

尽管您正在寻找基于百分比的高度解决方案，但您也可以使用恒定值高度。在许多情况下，这将避免您的问题。例如，将面板设置为 600 高度，这应该可以解决滚动问题。

这不能解决您在基于百分比的布局中的问题。希望其他人可以提供帮助。**

# php - javascript：从 javascript 传递到 php 的变量值

> ID：12425087
> 
> 赞同：0
> 
> 时间：2012-09-14T12:57:41.623
> 
> 标签：php, javascript

我有一个`javascript`文件`pet.js`。我想在`test.php`. 但我不能。

我`pet.js`的就像

```
$('#pmWorkOrderDetailsPage').live('pageshow', function(event) {
var id = getUrlVars()["id"];
$.get("test.php", { test1: id } );
$.getJSON('pmworkorderdetails.php?id='+id, displaypmWODetails);
});

function displaypmWODetails(data) {
 ..............code..........
 } 
```

我`test.php`的就像

```
<?php
$ms = $_GET["test1"];
echo $ms;
?> 
```

但它不起作用。我尝试了`Ajax`和`post`方法。

如果我可以将变量值存储在 test.php 中的会话中，那将是最好的。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:14:43.623

1 不使用 `getUrlVars()`它会使网站易受xss攻击

```
$('#pmWorkOrderDetailsPage').live('click', function(event) {
var id;// get id
$.get("test.php?id="+id,function(data){

var result=$.parseJSON(data);
 alert(result["content"])
 });

 }) 
```

测试.php

```
<?php

 $id=$_GET['id'];
 $data=array();
  $data=array("content"=>$id);
 echo json_encode($data);
?> 
```

# python - PyDev 使用 PyQt4 自动导入

> ID：12425095
> 
> 赞同：2
> 
> 时间：2012-09-14T12:58:03.357
> 
> 标签：python, eclipse, pyqt, pydev

在 PyDev 中，我可以键入一个类名，按 Control + 1 并从下拉菜单中选择“import XY”条目，Pydev 将自动为我添加一个导入语句。这适用于来自任何 .py 模块的类。但它不适用于 PyQt4，尽管我将 PyQt4 添加到强制内置函数中。有人让这个工作吗？

以相反的方式进行操作：

```
from PyQt4 import QtCore
QtCore.[autocomplete works!] 
```

在 Windows XP 64 SP 2 上使用 Python 2.6.8、PyQt 4.8.3、Eclipse 3.7 和 Pydev 2.6。所有软件包都使用标准分发安装程序安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T08:20:55.343

这与此问题中的问题相同，插件作者已回答：

[PyDev 组织导入 PyQt4](https://stackoverflow.com/questions/18639522/pydev-organize-imports-pyqt4)

# sql - 执行 msdb.dbo.sp_send_dbmail 失败

> ID：12425096
> 
> 赞同：21
> 
> 时间：2012-09-14T12:58:04.137
> 
> 标签：sql, sql-server

我收到此错误：

> 消息 229，级别 14，状态 5，过程 sp_send_dbmail，第 1 行
> 对象“sp_send_dbmail”、数据库“msdb”、架构“dbo”的 EXECUTE 权限被拒绝。

代码的相关部分：

```
/****** Object:  StoredProcedure [dbo].[dbo.STATUSCHANGE_EMAILALERT] ******/

EXEC msdb.dbo.sp_send_dbmail
  @recipients = 'Test@gmail.com', -- Group Email
  @subject = 'Employee Status Update',
  @profile_name ='Test@gmail.com', -- Setup the profile name group
  @body = @body,
  @body_format = 'HTML'; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2016-12-16T01:41:41.487

[在这里](http://www.urtech.ca/2013/05/solved-cannot-send-email-from-sql-database-mail-even-though-the-account-is-setup/)找到了对我有用的好而简单的修复：

如果您的 SQL 应用程序无法使用数据库邮件发送电子邮件（我假设您已经设置了 DBMail 帐户和配置文件），则需要设置两件事：

1.  SQL MANAGEMENT STUDIO > MANAGEMENT > DATABASE MAIL > 右键单击​​并选择 CONFIGURE... > 选择 MANAGE PROFILE SECURITY > SQL MANAGEMENT
2.  检查 PUBLIC 选项
3.  单击默认配置文件并将其设置为是
4.  STUDIO > DATABASES > SYSTEM DATABASES > 右键单击​​ MSDB 并选择 NEW QUERY > 然后输入 > 将 sp_send_dbmail 上的执行权限授予 public 并单击 OK

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-14T13:02:17.207

要发送数据库邮件，用户必须是 msdb 数据库中的用户和 msdb 数据库中`DatabaseMailUserRole`数据库角色的成员。要将 msdb 用户或组添加到此角色，请使用 SQL Server Management Studio 或为需要发送数据库邮件的用户或角色执行以下语句：

```
EXEC msdb.dbo.sp_addrolemember @rolename = 'DatabaseMailUserRole'
    ,@membername = '<user or role name>';
GO 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T13:00:27.187

向执行存储过程的用户授予执行权限`sp_send_dbmail`，或将其添加到角色`msdb.DatabaseMailUser`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-21T20:18:31.530

好的，只是添加到这个主题，因为这是非常好的信息，但仍然没有完全解决我的问题。如果**我**在 SSMS 中运行查询，一旦我被授予在 msdb 中执行 sp_send_dbmail 过程的权限，它就会起作用。但是，当作业以我的用户身份运行时，它*仍然*会失败。

通读大量资料以得出结论，您需要确保数据库中所有者的 sid 与主数据库中的所有者 sid 匹配：

```
--To get owner SID recorded in the master database for the current database
SELECT owner_sid FROM sys.databases WHERE database_id=DB_ID()
--To get the owner SID recorded for the current database owner
SELECT sid FROM sys.database_principals WHERE name=N'dbo' 
```

即使我已经授予了对 msdb 的访问权限并在 sp_send_dbmail 上执行了权限，但它仍然存在与数据库不可信和所有者 sid 不匹配有关的问题。因此，我必须对正在运行的数据库启用 Trustworthy 并修复所有权问题：

```
ALTER DATABASE my_db SET TRUSTWORTHY ON;

ALTER AUTHORIZATION ON Database::my_db TO [domain\user]; 
```

我不得不经过大量的搜寻才能最终找到这篇[更具](http://blog.strictly-software.com/2009/09/database-owner-sid-recorded-in-master.html)启发性的文章。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-04T21:02:09.020

我不小心更改了 SQL 代理作业的“运行方式”选项 - 从“[用户]”步骤到“（未指定）”。这导致我的工作开始工作。

# apache - Tomcat 持久性管理器终止会话登录

> ID：12425097
> 
> 赞同：3
> 
> 时间：2012-09-14T12:58:12.087
> 
> 标签：apache, session, tomcat, tomcat7, persistence-manager

对于我的 Web 应用程序，我使用 tomcat 声明式安全将登录凭据绑定到公司 Active Directory。在我们的两台服务器上，一分钟不活动后登录超时。在另外两台服务器上，有三十分钟的超时（这是我想要的）。

昨天，我找到了问题的原因。具有一分钟超时的两台服务器启用了 tomcat Persistence Manager 以将会话信息写入磁盘。我们的 IT 人员本周外出，所以我不知道他试图用这个完成什么的确切细节，但他在 context.xml 中像这样设置了 PersistenceManager：

```
<Manager sessionIdLength="64" className="org.apache.catalina.session.PersistentManager"
   maxIdleBackup="10" maxIdleSwap="30">
 <Store className="org.apache.catalina.session.JDBCStore" dataSourceName="jdbc/Auth"
    sessionTable="sessions" sessionAppCol="app_name" sessionDataCol="session_data" sessionIdCol="session_id"
    sessionLastAccessedCol="last_access" sessionMaxInactiveCol="max_inactive" sessionValidCol="valid_session" />
</Manager> 
```

我做了一些研究，发现空闲数字以秒为单位。认为这可能是罪魁祸首，我将 Manager 部分更改为：

```
<Manager sessionIdLength="16" className="org.apache.catalina.session.PersistentManager"
       maxIdleBackup="600" maxIdleSwap="3600" minIdleSwap="1800"> 
```

这解决了我的问题。因此，在 30 秒不活动后强制持久性管理器将会话写入磁盘似乎会杀死我的会话登录。我跟踪了 JSESSIONID cookie，发现即使用户被迫返回登录屏幕，cookie 仍然保持不变。仅当您重新登录时才会更改。这是您所期望的，因为将会话持久保存到磁盘不可能更改会话 ID。但是，它确实会导致我的声明式安全模型强制用户再次登录。

我确实在手册中发现 maxIdleSwap 变量不仅控制持久会话到磁盘，而且还导致“会话钝化超出服务器内存”。这对我来说听起来有点可疑。

有没有人有这个问题的经验？为什么 Persistence Manager 在将会话持久保存到磁盘时会终止我的 Web 应用程序登录？有没有办法在不改变交换控制变量的情况下解决这个问题？

# unix - 用于在日志和文件中搜索并提取行的 UNIX 脚本

> ID：12425098
> 
> 赞同：1
> 
> 时间：2012-09-14T12:58:18.053
> 
> 标签：unix, find

我正在尝试编写一个脚本，该脚本可以在日志文件中搜索特定文本并在 txt 文件中写下该行。日志文件每 2 天存档一次，因此我还需要在存档文件中进行搜索。

就像是：

```
-bash-3.2$ ssh server.com
-bash-3.2$ cd test/log/
less server.log.2012-06-19.gz | grep "text" -> ~/test.txt 
```

我是 UNIX 的新手 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:00:12.107

像这样？

```
zgrep text server.log* >~/test.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:04:02.153

```
gzcat <your_gz_file>|grep string >output_file 
```

# php - AMFPHP gameway.php 502 错误

> ID：12425099
> 
> 赞同：0
> 
> 时间：2012-09-14T12:58:33.353
> 
> 标签：php, apache-flex, nginx, fastcgi, amfphp

我正在开发一个使用 Flex 和 AMFPHP 构建的应用程序。一切正常，但是，在某些情况下，例如如果我以 5 秒的间隔调用相同的函数，或者当我在短时间内调用 2 个不同的函数时，我会收到错误提示

```
RPC Fault faultString="error" faultCode="Channel.Call.Failed" faultDetail="NetConnection.Call.Failed: HTTP: Status 502 
```

在 nginx error.log 中，我收到

```
recv() failed (104: Connection reset by peer) while reading response header from upstream, .... 
request: "POST /amfphp/gateway.php HTTP/1.1", upstream: "fastcgi://127.0.0.1:9000", host: 
```

使用 nginx，php5-fpm。

我该如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:01:22.917

看起来 PHP 代码执行中出现了一些错误（不是异常）。要查看真正的服务器答案（通常 - 这是带有错误描述的 HTML 文本），您可以使用任何流量调试器（我使用 FireBug、Opera Dragonfly、Service Capture 或 Charles）

# grails - Grails starting with a database error has anyone seen this

> ID：12425104
> 
> 赞同：6
> 
> 时间：2012-09-14T12:59:10.467
> 
> 标签：grails, ddl

I started my application today and when it starts I get this error

> | Error 2012-09-14 13:54:17,608 [pool-7-thread-1] ERROR hbm2ddl.SchemaExport - Unsuccessful: create table order (id bigint generated by default as identity, version bigint not null, date_created timestamp not null, order varchar(255) not null, picture_id bigint not null, posts_id bigint not null, primary key (id))
> 
> | Error 2012-09-14 13:54:17,609 [pool-7-thread-1] ERROR hbm2ddl.SchemaExport - Syntax error in SQL statement "CREATE TABLE ORDER[*] (ID BIGINT GENERATED BY DEFAULT AS IDENTITY, VERSION BIGINT NOT NULL, DATE_CREATED TIMESTAMP NOT NULL, ORDER VARCHAR(255) NOT NULL, PICTURE_ID BIGINT NOT NULL, POSTS_ID BIGINT NOT NULL, PRIMARY KEY (ID)) "; expected "identifier"; SQL statement: create table order (id bigint generated by default as identity, version bigint not null, date_created timestamp not null, order varchar(255) not null, picture_id bigint not null, posts_id bigint not null, primary key (id)) [42001-164]
> 
> | Error 2012-09-14 13:54:17,621 [pool-7-thread-1] ERROR hbm2ddl.SchemaExport - Unsuccessful: alter table order add constraint FK651874E9A8021F6 foreign key (posts_id) references post
> 
> | Error 2012-09-14 13:54:17,621 [pool-7-thread-1] ERROR hbm2ddl.SchemaExport - Syntax error in SQL statement "ALTER TABLE ORDER[*] ADD CONSTRAINT FK651874E9A8021F6 FOREIGN KEY (POSTS_ID) REFERENCES POST "; expected "identifier"; SQL statement: alter table order add constraint FK651874E9A8021F6 foreign key (posts_id) references post [42001-164]
> 
> | Error 2012-09-14 13:54:17,621 [pool-7-thread-1] ERROR hbm2ddl.SchemaExport - Unsuccessful: alter table order add constraint FK651874ED45FCA4B foreign key (picture_id) references picture
> 
> | Error 2012-09-14 13:54:17,621 [pool-7-thread-1] ERROR hbm2ddl.SchemaExport - Syntax error in SQL statement "ALTER TABLE ORDER[*] ADD CONSTRAINT FK651874ED45FCA4B FOREIGN KEY (PICTURE_ID) REFERENCES PICTURE "; expected "identifier"; SQL statement: alter table order add constraint FK651874ED45FCA4B foreign key (picture_id) references picture [42001-164]

Has anyone seen this before?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-14T13:48:43.090

There are some keys are not allowed in GORM: order, group or any other SQL keyword; also you can't name domain class User, Group(PostgreSQL).
To fix it read [mapping](http://grails.org/doc/latest/ref/Domain%20Classes/mapping.html) and change table names and columns.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-14T13:12:11.637

I have found out you cannot have field or domain with the name: order, group or any other SQL keyword.

# html - 创造 基于 HTML5 的文本编辑器

> ID：12425111
> 
> 赞同：7
> 
> 时间：2012-09-14T12:59:31.387
> 
> 标签：html, html5-canvas, wysiwyg

我正在使用 HTML5 画布制作一个文本编辑器，通过它我可以更新文本、更改字体、移动字体和移动背景图像。

我需要有关在画布中移动文本的帮助 - 如何使用带有鼠标移动事件的上下文来完成？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T12:13:02.990

画布本身的 w3c 草案建议不要这样做。您可以在[画布最佳实践中阅读此内容](http://www.w3.org/TR/2dcontext/#best-practices)

> ```
> Authors should avoid implementing text editing controls using the canvas 
> element. Doing so has a large number of disadvantages
> 
> [...]
> 
> This is a huge amount of work, and authors are most strongly encouraged 
> to avoid doing any of it by instead using the input element, the textarea 
> element, or the contenteditable attribute. 
> ```

如果您需要文本编辑器，您可以查看其他免费计划，例如[CodeMirror](http://codemirror.net/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T10:50:06.120

**Edit**: This answer was written in 2012\. Modern web browsers have come long way since then and the answer no longer holds true. Google Docs and Visual Studio Code both use `<canvas>` based editing. Leaving this answer here just for the sake of the historical purpose. [Here is a good thread on Hacker News on the topic](https://news.ycombinator.com/item?id=27129858).

Using HTML5 `<canvas>` for text edit is not recommended approach (see the answer above fom jbalsas). Mozilla Bespin (Skywriter) was an attempt until it was closed down and the development moved to non-`<canvas>` based ACE editor:

[https://mozillalabs.com/en-US/skywriter/](https://mozillalabs.com/en-US/skywriter/)

[http://ace.ajax.org/](http://ace.ajax.org/)

Atom editor choose non-canvas approach, ultimately settling on React.js to speed up DOM update process:

[http://blog.atom.io/2014/07/02/moving-atom-to-react.html](http://blog.atom.io/2014/07/02/moving-atom-to-react.html)

However `<canvas>` based editing is possible even if not recommended, see the comments below and the comment from jeromeyers:

[http://earwicker.com/carota/](http://earwicker.com/carota/)

... [also this blog post contains some ideas when DOM based text editing might not work](http://smellegantcode.wordpress.com/2013/11/04/rich-text-editor-in-the-html-canvas-part-1-introducing-carota/).

# sql - 设置我的查询的超时长度

> ID：12425112
> 
> 赞同：0
> 
> 时间：2012-09-14T12:59:36.553
> 
> 标签：sql, sql-server, tsql

如何在查询中设置超时长度？

我从我的数据库生成脚本，但由于超时长度而失败。

我尝试在“连接到服务器”窗口上进行设置，按下“选项”按钮，然后有一个“执行超时”选项。那是0。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:13:33.937

如果要在 SQL Management Studio 中配置查询超时期限，请执行以下操作：

```
> Open SQL Management Studio
> Click Tools > Options
> Expand Query Execution
> Expand SQL Server
> Select General
> Adjust Execution time-out 
```

希望能帮助到你。

# batch-file - 地理服务器准备好后如何打开网页

> ID：12425113
> 
> 赞同：0
> 
> 时间：2012-09-14T12:59:38.877
> 
> 标签：batch-file, geoserver

我有 Geoserver startup.bat 文件，如下所示：

```
@echo off
rem -----------------------------------------------------------------------------
rem Startup Script for GeoServer
rem -----------------------------------------------------------------------------

cls
echo Welcome to GeoServer!
echo.
set error=0

rem JAVA_HOME not defined
if "%JAVA_HOME%" == "" goto noJava

rem JAVA_HOME defined incorrectly
if not exist "%JAVA_HOME%\bin\java.exe" goto badJava

echo JAVA_HOME: %JAVA_HOME%
echo.

rem GEOSERVER_HOME not defined
if "%GEOSERVER_HOME%" == "" goto noHome

rem GEOSERVER_HOME defined incorrectly
if not exist "%GEOSERVER_HOME%\bin\startup.bat" goto badHome

goto checkDataDir

:noJava
  echo The JAVA_HOME environment variable is not defined.
goto JavaFail

:badJava
  echo The JAVA_HOME environment variable is not defined correctly.
goto JavaFail

:JavaFail
  echo This environment variable is needed to run this program.
  echo.
  echo Set this environment variable via the following command:
  echo    set JAVA_HOME=[path to Java]
  echo Example:
  echo    set JAVA_HOME=C:\Program Files\Java\jdk6
  echo.
  set error=1
goto end

:noHome
  if exist ..\start.jar goto noHomeOK
  echo The GEOSERVER_HOME environment variable is not defined.
goto HomeFail

:badHome
  if exist ..\start.jar goto badHomeOK
  echo The GEOSERVER_HOME environment variable is not defined correctly.
goto HomeFail

:HomeFail
  echo This environment variable is needed to run this program.
  echo.
  echo Set this environment variable via the following command:
  echo    set GEOSERVER_HOME=[path to GeoServer]
  echo Example:
  echo    set GEOSERVER_HOME=C:\Program Files\GeoServer
  echo.
  set error=1
goto end

:noHomeOK
  echo The GEOSERVER_HOME environment variable is not defined.
goto setHome

:badHomeOK
  echo The GEOSERVER_HOME environment variable is not defined correctly.
goto setHome

:setHome
  echo Temporarily setting GEOSERVER_HOME to the following directory:
  cd ..
  set GEOSERVER_HOME=%CD%
  echo %GEOSERVER_HOME%
  echo.
goto checkDataDir

:checkDataDir
  rem GEOSERVER_DATA_DIR not defined
  if "%GEOSERVER_DATA_DIR%" == "" goto noDataDir
  goto run

:noDataDir
  rem if GEOSERVER_DATA_DIR is not defined then use GEOSERVER_HOME/data_dir/
  if exist "%GEOSERVER_HOME%\data_dir" goto setDataDir
  echo No valid GeoServer data directory could be located.
  echo Please set the GEOSERVER_DATA_DIR environment variable.
  echo.
  echo Set this environment variable via the following command:
  echo    set GEOSERVER_DATA_DIR=[path to data_dir]
  echo Example:
  echo    set GEOSERVER_DATA_DIR=C:\Program Files\GeoServer\data_dir
  echo.
  set error=1
goto end

:setDataDir
  set GEOSERVER_DATA_DIR=%GEOSERVER_HOME%\data_dir
  echo The GEOSERVER_DATA_DIR environment variable is not defined correctly.
  echo Temporarily setting GEOSERVER_DATA_DIR to the following directory:
  echo %GEOSERVER_DATA_DIR%
  echo.
goto run

:run
  set RUN_JAVA=%JAVA_HOME%\bin\java
  cd %GEOSERVER_HOME%
  echo Please wait while loading GeoServer...
  echo.
  "%RUN_JAVA%" -DGEOSERVER_DATA_DIR="%GEOSERVER_DATA_DIR%" -Djava.awt.headless=true -DSTOP.PORT=8079 -DSTOP.KEY=geoserver -jar start.jar
  cd bin
goto end

:end
  if %error% == 1 echo Startup of GeoServer was unsuccessful. 
  echo.
  pause 
```

地理服务器启动并运行后，我需要打开一个网页。我不熟悉批处理脚本，到目前为止我所有的尝试都失败了。我知道我需要调用开始“www”“网页地址”，但不知道我应该把这段代码放在哪里。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:04:36.920

我不太确定你想要做什么，但也许这就是你想要的？

```
:run
  set RUN_JAVA=%JAVA_HOME%\bin\java
  cd %GEOSERVER_HOME%
  echo Please wait while loading GeoServer...
  echo.
  start /wait "%RUN_JAVA%" -DGEOSERVER_DATA_DIR="%GEOSERVER_DATA_DIR%" -Djava.awt.headless=true -DSTOP.PORT=8079 -DSTOP.KEY=geoserver -jar start.jar
  start www.website.com
  cd bin
goto end 
```

这将启动 Java 文件并等待它完成，然后启动网页，如果它到达那个点，大概服务器将准备好，所以当 jar 完成执行网站时会出现。

# c# - 为什么我应该在每个 aspx 页面中包含命名空间？

> ID：12425114
> 
> 赞同：2
> 
> 时间：2012-09-14T12:59:49.093
> 
> 标签：c#, asp.net, namespaces, code-behind

我通常包括我的命名空间，例如

```
using myProject.Model; 
```

到我的 .cs 文件，但是当我想在我的 .aspx 文件中迭代从 myProject.Model 派生的对象时，我必须始终包含该指令

```
<%@ Import Namespace="myProject.Model" %> 
```

这是为什么？我的意思是如果它是在 default.aspx 的文件（在 default.aspx.cs 中）的代码中声明的，我为什么要再次添加它？为什么它不可用？

只是想知道，但我想知道为什么会这样。

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T13:04:13.383

您可以将[命名空间元素](http://msdn.microsoft.com/en-us/library/ms164642(v=vs.80).aspx)添加到 web.config 以指定您希望自动导入的命名空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T13:01:42.260

因为 ASPX 页面是使用不同的“WebPage”编译器编译的，所以您必须为每个页面指定名称空间，您需要从该名称空间中获得某些功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T13:02:08.513

因为该`@Import`指令允许您为 Asp.Net 页面或用户控件`import`指定要导入的命名空间，而关键字用于指定要为代码隐藏导入的命名空间。

# html - 如何动态更改按钮文本

> ID：12425120
> 
> 赞同：0
> 
> 时间：2012-09-14T13:00:17.610
> 
> 标签：html, jquery-mobile

我正在尝试使用 Select 下拉菜单解决 Android 设备上的 webview 问题，而是使用弹出窗口中的单选按钮来进行用户选择

我需要的是根据用户所做的选择来更改按钮文本。我已经把我认为可行的小提琴放在一起，但这不是玩球，我想知道是否有更聪明的头脑可以提供一些建议。

在这里拉小提琴； [http://jsfiddle.net/vinomarky/gEXhD/](http://jsfiddle.net/vinomarky/gEXhD/)

注意：我目前在 javascripts 触发时添加了一些警报，但它们没有触发，我不确定为什么不触发。

问题1：如何更改按钮文本以匹配用户选择

问题 2：如何在用户做出选择后立即使收音机选择最小化，而无需单击关闭收音机

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:45:16.150

*   您可以使用 jquery`click`事件而不是使用`onclick`属性
*   因为您使用 jquery mobile ui，所以要更改按钮文本，您应该更改按钮文本容器值而不是`pressure_cands`本身
*   并在项目选择div 的调用`click`事件时隐藏弹出屏幕`popupBasic-screen`

    ```
    $('#updown1').click(function(){
        // to change button label
        $('#pressure_cands .ui-btn-text').html('THP');
        // call popupBasic-screen click event to hide popup menu
        $('#popupBasic-screen').click();
    });
    $('#updown2').click(function(){
        // to change button label
        $('#pressure_cands .ui-btn-text').html('FBHP');
        // call popupBasic-screen click event to hide popup menu
        $('#popupBasic-screen').click();
    });​ 
    ```

# iphone - 在 iOS 中显示带有超链接的 PDF（如 PDF 摘要中的经典重定向）

> ID：12425127
> 
> 赞同：0
> 
> 时间：2012-09-14T13:00:39.140
> 
> 标签：iphone, ios, xcode, ipad, pdf

> **可能重复：**
> [在 iOS 上使用 Quartz 获取 PDF 超链接](https://stackoverflow.com/questions/4080373/get-pdf-hyperlinks-on-ios-with-quartz)

都在标题中。

我想在 iPad 中显示带有超链接的 PDF。此时我有一个带有CoreGraphic但没有超链接的PDF（逐页显示，带有2个按钮，增加或减少PDF中的当前页数），我搜索了一个示例，因为我真的不明白指定 CGPDFDictionary 和其他类似的功能。

提前感谢您的回答。

PS：对不起，我的英语不好，我现在不太熟悉这种语言，但学习补救。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:56:11.733

根据您要完成的任务，使用 UIWebView 呈现 PDF 可能是更好的选择，因为链接呈现将是自动的。请记住，使用 UIWebView 将强制加载整个 PDF，并且它将垂直滚动而不是按页面水平滚动。

# google-maps - Google Maps API v3 和为叠加层生成 KML 坐标的简单方法？

> ID：12425128
> 
> 赞同：0
> 
> 时间：2012-09-14T13:00:45.210
> 
> 标签：google-maps, google-maps-api-3

我一直在查看谷歌地图文档和示例，想知道是否有一种简单的方法可以为州或国家等生成坐标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:07:42.700

如果您正在为各种特征寻找各种格式的形状文件，您可以查看[Natural earth data](http://www.naturalearthdata.com/) dataset。它也可以[在不同格式的 Google Fusion Tables 上](http://blog.thematicmapping.org/2011/02/natural-earth-vectors-in-cloud.html)找到。

# ios - 使用 MonoTouch 中的子视图从 Nib 加载 UIView

> ID：12425140
> 
> 赞同：0
> 
> 时间：2012-09-14T13:01:34.910
> 
> 标签：ios, xamarin.ios

目前我正在加载具有该 `NSBundle.MainBundle.LoadNib("NibName", this, null)`功能的一些子视图的视图，但我手动添加加载视图的子视图 `this.AddSubviews(this.subview1)`。

如何从 Nib 加载视图，这样我就不需要手动将子视图添加到当前视图？

编辑：现在我试图得到 LoadNib 函数的结果：

`var res = NSBundle.MainBundle.LoadNib("ViewX",this,null);`

`var betterRes = Runtime.GetNSObject(res.ValueAt(0)) as Viewx;`

现在“this”已经初始化了子元素的属性，但他的视图是空的。并且“betterRes”具有视图中的所有子视图，但子元素的所有属性均为空。只是为了澄清......每个子元素都是按钮或标签，并且有自己的看法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T11:12:58.013

如果我正确理解你想要什么：从 nib 文件加载带有插座或动作的视图到主视图，这里是一个尝试：

```
//Load the view
var res = NSBundle.MainBundle.LoadNib("ViewX",this,null); 
// init your view with IntPtr
var betterRes = new Viewx(res.ValueAt(0)); 
//then use this view as main view
 this.View = betterRes;  //Or add subview: this.View.AddSubView(betterRes); 
```

现在，您视图中的某些属性应该可以工作了。
希望这有帮助！

# c# - 欢迎 C# 查找优化建议

> ID：12425146
> 
> 赞同：-5
> 
> 时间：2012-09-14T13:02:03.137
> 
> 标签：c#, linq, ilookup

我有下面的代码，它可以满足我的需要，但我有一个想法，它可以做得更快。请让我知道是否可以以任何方式改进此代码...

主要问题是我需要多次查询“数据”。我只需要确保没有我可以使用的快捷方式。

```
data= GetData()// this return ILookup<Tuple(string, string, string),string>
foreach (var v0 in data)
{
    if (v0.Key.Item3 == string.Empty)
    {
        //Get all related data
        var tr_line = data[v0.Key];
        sb.AppendLine(tr_line.First());

        foreach (var v1 in data)
        {
            if (v1.Key.Item2 == string.Empty && v1.Key.Item1 == v0.Key.Item1)
            {
                var hh_line = data[v1.Key];
                sb.AppendLine(hh_line.First());

                foreach (var v2 in data)
                {
                    if (v2.Key.Item1 == v0.Key.Item1 && v2.Key.Item2 != string.Empty && v2.Key.Item3 != string.Empty)
                    {
                        var hl_sl_lines = data[v2.Key].OrderByDescending(r => r);
                        foreach (var v3 in hl_sl_lines)
                        {
                            sb.AppendLine(v3);
                        }
                    }
                }
            }
        }
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:10:44.057

首先，尽量避免在这种代码中使用元组，因为即使对你来说，几个月后，这段代码也会变得难以理解。使用正确的属性名称创建一个类，甚至更好的不可变结构。如果无法维护，即使是最快的代码也毫无价值。

也就是说，您有三个迭代同一集合的嵌套循环。排序后的集合执行得更快是合理的，因为您只需要与相邻的项目进行比较。

请尝试解释您要完成的工作，以便有人会尝试提供更具体的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:16:48.237

更整洁，更多 linq：

```
 var data = GetData();

        foreach (var v0 in data)
        {
            if (v0.Key.Item3 != string.Empty) continue;

            //Get all related data 
            var tr_line = data[v0.Key];
            sb.AppendLine(tr_line.First());

            var hhLines = from v1 in data
                          where v1.Key.Item2 == string.Empty &&
                                v1.Key.Item1 == v0.Key.Item1
                          select data[v1.Key];

            foreach (var hh_line in hhLines)
            {
                sb.AppendLine(hh_line.First());

                var grouping = v0;
                var enumerable = from v2 in data
                                 where v2.Key.Item1 == grouping.Key.Item1 &&
                                       v2.Key.Item2 != string.Empty &&
                                       v2.Key.Item3 != string.Empty
                                 select data[v2.Key].OrderByDescending(r => r)
                                 into hl_sl_lines from v3 in hl_sl_lines select v3;

                foreach (var v3 in enumerable)
                {
                    sb.AppendLine(v3);
                }
            }
        } 
```

# ios - 启动应用程序被杀死IOS后调用什么方法？

> ID：12425149
> 
> 赞同：0
> 
> 时间：2012-09-14T13:02:11.307
> 
> 标签：ios, ios5, ios4

我有一个接收 NSLocalNotifications 的应用程序。没关系，但是当我触发通知并从应用程序列表中删除应用程序时，双击主页按钮后，它会收到本地通知就可以了。问题是启动这个被杀死的应用程序时调用了哪个方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T05:53:47.887

本地通知不会启动您的应用程序（请参阅文档引用），您可以在启动应用程序时期待通常的委托调用

> 应用程序可以创建和安排本地通知，然后操作系统在安排的日期和时间发送它。**如果它在应用程序未在前台处于活动状态时传递它，它会显示警报、标记应用程序图标或播放声音——无论 UILocalNotification 对象中指定什么**。如果应用程序在前台运行，则没有警报、标记或声音；相反，如果委托实现它，则调用 application:didReceiveLocalNotification: 方法。

# java - Java - SpringMVC - 在控制器中获取参数

> ID：12425154
> 
> 赞同：0
> 
> 时间：2012-09-14T13:02:38.327
> 
> 标签：java, spring, spring-mvc

我无法将对象持久保存到我的数据库中。我有一个与 Profil 具有多对一关系的用户。

我的 JSP 只是添加了一个新用户。因此，JSP 包含字段和一个带有所需配置文件的组合框。问题是，当我运行程序时，即使我在comboxBox 中选择了一个配置文件，控制器中的属性user.profil 也是NULL。

这是用户对象：

```
package com.app.model;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.Table;

@Entity
@Table(name="user")
public class User {

    private long id;
    private String firstname;
    private String lastname;
    private String login;
    private String password;
    private Profil profil;

    public User() {
    }

    /**
     * @param firstname
     * @param lastname
     * @param login
     * @param password
     * @param profil
     */
    public User(String firstname, String lastname, String login,
            String password, Profil profil) {
        this.firstname = firstname;
        this.lastname = lastname;
        this.login = login;
        this.password = password;
        this.profil = profil;
    }

    /**
     * Get User Id
     * 
     * @return long - User Id
     */
    @Id
    @Column(name="id", unique = true, nullable = false)
    public long getId() {
        return id;
    }

    /**
     * Set User Id
     * 
     * @param long - User Id
     */
    public void setId(long id) {
        this.id = id;
    }

    /**
     * Get User Firstname
     * 
     * @return String - User Firstname
     */
    @Column(name="firstname", unique = false, nullable = false)
    public String getFirstname() {
        return firstname;
    }

    /**
     * Set User Firstname
     * 
     * @param String - User Firstname
     */
    public void setFirstname(String firstname) {
        this.firstname = firstname;
    }

    /**
     * Get User Lastname
     * 
     * @return String - User Lastname
     */
    @Column(name="lastname", unique = false, nullable = false)
    public String getLastname() {
        return lastname;
    }

    /**
     * Set User Lastname
     * 
     * @param String - User Lastname
     */
    public void setLastname(String lastname) {
        this.lastname = lastname;
    }

    /**
     * @return the login
     */
    @Column(name="login", unique = true, nullable = false)
    public String getLogin() {
        return login;
    }

    /**
     * @param login the login to set
     */
    public void setLogin(String login) {
        this.login = login;
    }

    /**
     * @return the password
     */
    @Column(name="password", unique = false, nullable = false)
    public String getPassword() {
        return password;
    }

    /**
     * @param password the password to set
     */
    public void setPassword(String password) {
        this.password = password;
    }

    /**
     * @return the profil
     */
    @ManyToOne( cascade = CascadeType.REFRESH, fetch = FetchType.EAGER )
    @JoinColumn( name = "fk_profil_id", nullable = false )
    public Profil getProfil() {
        return profil;
    }

    /**
     * @param profil the profil to set
     */
    public void setProfil(Profil profil) {
        this.profil = profil;
    }

    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "User [id=" + id + ", firstname=" + firstname + ", lastname="
                + lastname + ", login=" + login + ", password=" + password
                + "]";
    }
} 
```

这是 Profile 对象：

```
package com.app.model;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="profil")
public class Profil {

    private long id;
    private String name;

    public Profil() {
    }

    /**
     * @param id
     * @param name
     */
    public Profil(long id, String name) {
        this.id = id;
        this.name = name;
    }   

    /**
     * @return the id
     */
    @Id
    @Column(name="id", unique = true, nullable = false)
    public long getId() {
        return id;
    }

    /**
     * @param id the id to set
     */
    public void setId(long id) {
        this.id = id;
    }

    /**
     * @return the name
     */
    @Column(name="name", unique = true, nullable = false)
    public String getName() {
        return name;
    }

    /**
     * @param name the name to set
     */
    public void setName(String name) {
        this.name = name;
    }

    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "Profil [id=" + id + "]";
    }
} 
```

这是控制器：

```
package com.app.web;

import java.util.HashMap;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;

import com.app.model.User;
import com.app.service.impl.ProfilService;
import com.app.service.impl.UserService;

@Controller
@RequestMapping("/users")
public class UserController {

    @Autowired
    private UserService userService;

    @Autowired
    private ProfilService profilService;

    @ModelAttribute("userForm")
    public User createForm()
    {
        return new User();
    }

    @RequestMapping(value = "/save", method = RequestMethod.POST)
    public ModelAndView saveUser ( @ModelAttribute("userForm") User user, BindingResult result ) {

        userService.addUser( user );

        return new ModelAndView ( "redirect:/users.html" );
    }

    @RequestMapping(method = RequestMethod.GET)
    public ModelAndView viewUsers() {
        Map model = new HashMap();
        model.put ( "users", userService.getUsers() );

        return new ModelAndView ( "usersView", model );
    }

    @RequestMapping(value = "/add", method = RequestMethod.GET)
    public ModelAndView addUser() {
        Map model = new HashMap();
        model.put ( "profils", profilService.getProfils() );

        return new ModelAndView ( "userAdd", model );
    }
} 
```

这是 JSP 页面：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Add User</title>

</head>

<body>
<h1>Add User</h1>
<c:url var="viewUsersUrl" value="/users.html" />
<a href="${viewUsersUrl}">View Existing Users</a>

<br /><br />
<c:url var="saveUserUrl" value="/users/save.html" />
<form:form modelAttribute="userForm" method="POST" action="${saveUserUrl}">
    <form:label path="firstname">Firstname:</form:label>
    <form:input path="firstname"/><br />
    <form:label path="lastname">Lastname:</form:label>
    <form:input path="lastname"/><br />
    <form:label path="login">Login:</form:label>
    <form:input path="login"/><br />
    <form:label path="password">Password:</form:label>
    <form:input path="password"/><br />
    <form:select path="profil">  
        <form:option value="0" label="---- Select ----" />
        <form:options items="${profils}" itemValue="id" itemLabel="name" />   
    </form:select> 
    <input type="submit" value="Save User" />
</form:form>

</body>
</html> 
```

例外：

```
SEVERE: Servlet.service() for servlet [spring] in context with path [/app] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: Column 'fk_profil_id' cannot be null; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: Column 'fk_profil_id' cannot be null] with root cause
com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Column 'fk_profil_id' cannot be null
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
...
...
... 
```

发生此异常是因为 user.profil 在控制器中为 NULL。

如果您需要更多信息，请随时询问。顺便说一句，如果您发现有问题或有更好的方法，请告诉我，我是 spring 和 spring-mvc 的新手。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:31:19.110

在您的 JSP 页面组合框中应该有如下路径

```
<form:select path="profil.id">  
    <form:option value="0" label="---- Select ----" />
    <form:options items="${profils}" itemValue="id" itemLabel="name" />   
</form:select> 
```

这将要求 spring 转换创建新的配置文件实例并附加到用户。

# php - 组中的复选框？

> ID：12425157
> 
> 赞同：0
> 
> 时间：2012-09-14T13:02:52.450
> 
> 标签：php, jquery

我需要用我的复选框制作“组”或其他东西。我想点击一个复选框，只有那些复选框处于活动状态，然后可用。就像在汽车配置中一样。如果您购买电动镜，则不能选择手动镜。在我的情况下，我有产品 1A 1B 1C 和 2A 2B 2C，如果我选择产品一，我只能选择产品 1A、1B、1C。

```
<input type="checkbox" value="">1A</label>
<input type="checkbox" value="">1B</label>
<input type="checkbox" value="">1C</label>
<input type="checkbox" value="">2A</label>
<input type="checkbox" value="">2B</label>
<input type="checkbox" value="">2C</label> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:09:59.377

HTML

```
<input type="checkbox" class='product' value=""/>1A
<input type="checkbox" class='product' value=""/>1B
<input type="checkbox" class='product' value=""/>1C
<input type="checkbox" class='product' value=""/>2A
<input type="checkbox" class='product' value=""/>2B
<input type="checkbox"class='product'  value=""/>2C 
```

jQuery

```
$(function(){
 var $product = $('input.product');
$product.click(function() {
    $product.filter(':checked').not(this).removeAttr('checked');
});

}) 
```

**[小提琴](http://jsfiddle.net/GBGRJ/)**

## *在OP评论后添加*

**这是注释后的代码，*如果我选择 1A，我也可以点击 1B 和 1C，但不能点击 2A、2B、2C* ***

HTML

```
<input type="checkbox" class='one' value=""/>1A
<input type="checkbox" class='one' value=""/>1B
<input type="checkbox" class='one' value=""/>1C<br/>
<input type="checkbox" class='two' value=""/>2A
<input type="checkbox" class='two' value=""/>2B
<input type="checkbox" class='two'  value=""/>2C 
```

jQuery

```
$(function(){
 var $one= $('input.one');
$one.click(function() {
    $one.filter(':checked').not(this).removeAttr('checked');
    if($one.filter(':checked').length>0) {
       $two.attr("disabled","disabled");
    }
    else {
        $two.removeAttr("disabled");
    }
});

var $two= $('input.two');
$two.click(function() {
    $two.filter(':checked').not(this).removeAttr('checked');
    if($two.filter(':checked').length>0) {
       $one.attr("disabled","disabled");
    }
    else {
        $one.removeAttr("disabled");
    }
});

}); 
```

[小提琴](http://jsfiddle.net/GBGRJ/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:06:14.853

我认为您可能想查看[单选按钮](https://developer.mozilla.org/en-US/docs/XUL/radio)类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:06:31.313

如果你使用复选框，你应该在你的 PHP 代码中将它们作为一个数组来处理，并给它们一个`name`属性（这是 PHP 看到它们的方式）：

```
<input type="checkbox" name ="checkbox1" value="">1A</label> 
```

在您的 PHP 代码中：

```
$checkArray=$_REQUEST['checkbox1'];
foreach($checkArray as $val)
{
    echo $val;// Value is echo'ed.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T13:44:44.343

html

```
<input type="checkbox" class='group1' value=""/>1A

<input type="checkbox" class='group1' value=""/>1B

<input type="checkbox" class='group1' value=""/>1C

<input type="checkbox" class='group2' value=""/>2A

<input type="checkbox" class='group2' value=""/>2B

<input type="checkbox" class='group2'  value=""/>2C

<br/> 
```

jQuery

```
<br />
    <script>
    $(function(){
      var $product=$('input:checkbox');
      $product.click(function() {
        $product.attr('checked',false);
        var classname=$(this).attr('class');
        $('.'+classname).attr('checked','checked');
      });    
    });
    </script> 
```

# security - 密码强度与加密有何关系？

> ID：12425158
> 
> 赞同：0
> 
> 时间：2012-09-14T13:02:52.523
> 
> 标签：security, pdf, encryption

我有一个 128 位加密的 PDF 文档。

用户坚持使用全数字的四字符密码，例如 1558 或 6977 或 4793。

128 位加密很强 - 这种强度是否被密码弱点所抵消？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T13:05:45.457

对于 4 个字符的全数字密码，总共有 10000 个密码。你的加密有多“强”并不重要。蛮力甚至不是“蛮力”。我的袖珍计算器可以做到这一点。

注意：这适用于 ATM 或 SIM 卡的原因是因为您没有机会进行暴力破解。ATM 会在 3 次尝试失败后吃掉您的卡，SIM 卡也会锁定，直到您输入另一个 8 位代码，如果您在 10 次尝试中没有正确输入，这将“永久”锁定该卡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T13:09:14.573

加密的强度与密钥生成的强度不同。正如 Slabks 所说，人们可以实现一种安全的现代密钥生成机制，例如 PBKDF2，但与更强的密码（如 128 位 AES）相比，使用相对较弱的加密密码（如 128 位 RC4）。

然而，正如 Christian 所说，一个 4 位数的 PIN 最多有 10000 个密码，生成密钥的熵并不多。如果存在某种形式的哈希或其他篡改检测，则使用专用的现代系统暴力破解加密文档将相对容易。正如您所说，是的，密码弱点会降低加密强度。

为了补充克里斯蒂安的上述评论，您现在可以在一些手机和平板电脑应用程序（如 DropBox）上看到 PIN 码，因为正如克里斯蒂安所说，它们正在由服务器进行身份验证，并在输入太多不正确的 PIN 码时将您锁定。由于 ATM、手机和平板电脑的输入能力有限，ATM 卡和这些应用程序可以接受，但对于具有全键盘的系统来说，这是不可接受的借口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T13:04:24.010

这取决于它是如何实现的。

理想情况下，加密密钥将使用 PBKDFv2 等安全方案从密码中派生。如果是这样，弱密码对加密的安全性没有影响。

但是，如果攻击者知道密钥是使用 PBKDFv2 派生的，那么弱密码将更容易受到用于派生密钥的暴力/字典攻击。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T13:05:56.263

是的，如果攻击者知道用于派生密钥的密码只有四位数字，它会大大减少他在暴力攻击中必须尝试的密钥空间。

0000 到 9999 只是一万个组合。

如果是十个区分大小写的字母数字，您将有 62^10（约 8 * 10^17）个组合。太多了，无法全部尝试。

即使攻击者不知道您的用户的“要求”，他也可能会开始使用短密码进行暴力破解，因此他很快也会偶然发现一个四位数的组合。

# css - 在 WP 上隐藏 css 文件

> ID：12425160
> 
> 赞同：-3
> 
> 时间：2012-09-14T13:03:00.480
> 
> 标签：css, wordpress

有什么办法可以隐藏 WP 上的 css 文件吗？我需要隐藏 style.css 文件和文件路径。

不仅样式，还需要隐藏其他 css 文件及其路由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:13:30.203

事实上，任何和所有样式规则都需要直接写入文档本身，或者以链接标签的形式在 head 元素中引用。

样式没有什么大秘密，所以我不完全确定您为什么要“隐藏”您的样式表以防窥探。即使您要创建数百个诱饵 CSS 文件并使用巧妙放置的 @import 规则来“迷惑”试图找到实际文件路径的人，如何阻止他们使用 Web Inspector 并查看活动规则和他们所在的样式表'被包含？

很抱歉，但您几乎将不得不处理 Style 规则可以被任何人访问的事实。

# java - 窗口右上角的感叹号 - 在关闭按钮上方

> ID：12425162
> 
> 赞同：5
> 
> 时间：2012-09-14T13:03:18.703
> 
> 标签：java, swing, security, java-web-start

当我打开一些 Java 应用程序时，尤其是从 Java Web Start 启动的示例时，我经常会在关闭按钮旁边/覆盖一个感叹号，这取决于窗口大小。其实有点担心。

它是什么意思，它的作用是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T22:35:12.917

这意味着应用程序。是沙盒的。它的功能是通知用户一个应用程序。正在运行的是沙盒。

![窗口 w。 感叹号](../Images/dc4617cffa5835e4589ffcc43751a74c.png)

有关更多详细信息，请参阅[探索安全警告功能](http://java.sun.com/developer/technicalArticles/GUI/SecurityWarning/AppletWarning.html)。

其实应该有点担心。不要将您的银行帐户详细信息输入那些看起来“类似于”您的银行登录信息的浮动窗口之一。;)

# android - 适用于 Android 的订阅谷歌市场计费 API

> ID：12425163
> 
> 赞同：0
> 
> 时间：2012-09-14T13:03:42.777
> 
> 标签：android

在我的 android 应用程序内部使用一些交易来达到这个目的，我想使用 * *Subscriptions Google market billing **。

我在谷歌上找到了一些应用内计费和订阅的网站，现在想要使用基于订阅的 api，但没有找到任何与此 api 相关的代码。我只找到了应用内计费代码。请发送基于订阅的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:49:03.567

没有一个特定的 API。它是应用内计费的扩展，具有新参数和 API 中的一些修改。例如，在 BillingService.java 中的 RequestPurchase 调用中，项目类型现在需要为“subs”。你真的需要阅读文档：

[http://developer.android.com/guide/google/play/billing/billing_subscriptions.html](http://developer.android.com/guide/google/play/billing/billing_subscriptions.html)

以及从 SDK 管理器的“Extras”下载“Google play billing Rev 2”，因为这是一个执行订阅的示例应用程序。它的整个代码库太大而无法提供给您，但示例应用程序是一个好的开始。我怀疑这样一个模糊的问题，你不会得到更多的细节。

# ios - 强制文件在 iOS 的预定义应用程序中打开

> ID：12425165
> 
> 赞同：0
> 
> 时间：2012-09-14T13:03:50.703
> 
> 标签：ios, file

我正在尝试一个简单的网络应用程序，它从互联网下载文件并保存在 iPad 上。这些文件是 .pdf、.xls、.doc 等格式。现在，我想分配一个默认应用程序来打开特定的文件类型。（比如 pdf 文件的 Adode 阅读器、图像文件的一些图像查看器应用程序等）。我不希望我的应用程序/操作系统决定文件应该在哪个应用程序中打开。相反，如果分配的应用程序不存在，那么它应该给我一条消息，指出找不到这样的应用程序。有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:29:14.797

使用 Web 应用程序，您无法执行此类操作。

如果您使用本机，则可以使用自定义 URL 方案（请参阅[http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)）

但是使用自定义 URL 方案，您只能传递视图参数。如果你想要更多，推荐使用 UIPasteboard。

应用程序是沙盒的。您无法访问其他应用程序，也无法访问他们的数据！！！
但是在本机应用程序上，您可以使用粘贴板传递数据，调用自定义 url 处理程序，传递一些参数以使其他应用程序处理您的数据。

**像 camera+ 这样的应用程序开发人员通常会提供有关使用他们的自定义 url 方案（[Camera+ URL Schemes API](http://api.camerapl.us/app-api)）的文档**

# asp.net-mvc-3 - 如何在 MVC3 中使用 ajax 返回 IEnumerable 值？

> ID：12425180
> 
> 赞同：0
> 
> 时间：2012-09-14T13:04:44.723
> 
> 标签：asp.net-mvc-3

如何使用 ajax 返回 IEnumerable 的值。这是我的脚本：

```
$.ajax({
         type: "get", url: "street", data: { a: value2 },
         success: function (data) {

          alert(data);

                              } 
```

这是我的控制器方法：

```
 [HttpGet]   
        public string street(string a)
        {

            EmlakServicesClient client = new EmlakServicesClient();
            client.ClientCredentials.UserName.UserName = "service_test";
            client.ClientCredentials.UserName.Password = "..";
            client.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = System.ServiceModel.Security.X509CertificateValidationMode.None;
            Street[] list =client.GetStreet(Convert.ToInt32(a));

                   return ("" + list.FirstOrDefault().StreetName);

        } 
```

正如您在顶部看到的那样，我得到了价值，但有了第一个价值，那么我怎样才能从 IEnumarable 获得这些所有值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T13:06:35.757

您应该使用 JSON：

```
return Json(list, JsonRequestBehavior.AllowGet); 
```

您需要将您的操作方法更改为 return `ActionResult`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T16:58:58.920

我在谷歌搜索如何使用 ASP.NET Web API 2 返回 JSON 结果时遇到了这个问题。如果其他人正在寻找相同的解决方案，这里是对我有用的解决方案：

```
// GET: api/Users
public HttpResponseMessage Get()
{
    var users = UserManager.Get(); // returns IEnumerable
    return Request.CreateResponse(HttpStatusCode.OK, users);
} 
```

[您可以在此处](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/action-results)了解有关 HttpResponseMessage的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:06:35.953

将集合返回为`JSON`

```
public ActionResult GetsomeItems(int someId)
{
  var someCollection=GetListOfItemsFromSomeWhere(someId)
  return Json(someCollection,JsonRequestBehaviour.AllowGet);
} 
```

# asp.net-mvc-3 - TinyMCE NetAdvImage 虚拟路径

> ID：12425186
> 
> 赞同：3
> 
> 时间：2012-09-14T13:05:02.537
> 
> 标签：asp.net-mvc-3, tinymce

我试图在我的网站之外有一个虚拟目录，我通过 TinyMCE 上传文件以获取公司营销数据等...对于图像，我使用的是 netadvimage 图像上传器。

为了进行设置，我删除了物理目录 /content/images/upload 并在 IIS7 中的 /content/images/ 下创建了一个“已上传”虚拟目录。

当图像上传器/选择器出现时，它会将物理路径附加到文件名。该窗口将显示断开的链接，并为图像提供类似的内容。src="https://dev.mysite.comC:/MyUploaded/myimages/1-200X200.jpeg" C:/MyUploaded 是我的虚拟目录所在的位置。既然是这种情况，它就把它代替 /content/images/uploaded （虚拟目录路径）有没有办法告诉它使用虚拟路径而不是物理路径？

该站点托管在 IIS 7 中，并使用 Microsoft MVC3/c#。

提前致谢。这让我很难过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:20:02.213

看起来该插件使用 valums ajax 上传器。您需要像这样指定路径：

端点：'/upload/endpoint' 或尝试：'../../upload/endpoint'

# aloha-editor - Aloha Editor 未从 db 文件中读取数据

> ID：12425193
> 
> 赞同：0
> 
> 时间：2012-09-14T13:05:41.010
> 
> 标签：aloha-editor

我设法让 [Aloha 编辑器][1] 在一个网站上毫无问题地使用 SQLite 数据库文件，所以我想我会复制所有文件以使另一个网站也能正常工作，但我发现了我自己无法解决的问题。问题可能会相互影响，不确定。

问题 1：我看到使用“单击以编辑我”来编辑文本区域。无论我在那里输入什么，都会转到 db.sqlite 文件，因为我可以通过 sqlitebrowser.exe 查看数据。但是，如果我刷新页面，我仍然会看到“单击以编辑我”。

问题 2：当我编辑页面并按 F5（刷新）时，页面照常显示，但无法再编辑（没有黄色高亮显示）但是当我按 Ctl+F5 时，我可以编辑页面（当然根据问题 1 仍然只是“点击编辑我。”）

这就是我加载 JS 的方式（相同的顺序）：

```
<script type="text/javascript" src="alohaeditor/aloha/lib/require.js"></script>
<script type="text/javascript" src="aloha-config.js"></script>

<?php if ($login->isLoggedIn() && !empty($_SESSION['settings_users_name'])){?>
   <script type="text/javascript" src="alohaeditor/aloha/lib/aloha.js" data-aloha-plugins="common/ui,common/format,common/highlighteditables,common/link,common/characterpicker,common/undo"></script>
   <script type="text/javascript" src="aloha-save.js"></script>
   <script type="text/javascript">
        Aloha.ready( function() {
          Aloha.jQuery('.editable').aloha();
        });
   </script>
<?}?> 
```

已经 5 小时了，我正在努力解决这个问题。有人可以指出我如何检查有什么问题吗？（也许在这种情况下如何使用萤火虫来追踪问题？）[1]：[http ://aloha-editor.org/](http://aloha-editor.org/)

# c# - 类型初始化异常

> ID：12425199
> 
> 赞同：13
> 
> 时间：2012-09-14T13:05:48.447
> 
> 标签：c#, .net, opencv, constructor, emgucv

我创建了 imageHolder 类：

```
public class ImageHolder : Image<Bgr, Byte>
{   
    private String imagePath;

    public ImageHolder(String path):base(path)
    {
       this.imagePath = path;                     
    }   
    public String imgPathProperty
    {
        get
        { return imagePath; }
        set
        { imagePath = value; }
    }
} 
```

我创建类的实例并对其进行初始化，如下所示：

```
private ImageHolder originalImageHolder;
originalImageHolder = new ImageHolder(openFileDialog.FileName); 
```

在运行时我得到这个异常：

**'Emgu.CV.CvInvoke' 的类型初始化程序引发了异常。**

![在此处输入图像描述](../Images/73934258bb1305814ed6c5313cd45e2c.png)

这是解决方案资源管理器窗口：

![在此处输入图像描述](../Images/21db860c914216f39021b4a609c86c16.png)

知道为什么我会得到这个异常，我该如何解决？

先感谢您。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-14T13:16:37.723

每当静态构造函数抛出异常，或者当您尝试访问静态构造函数抛出异常的类时，都会抛出[TypeInitializationException](http://msdn.microsoft.com/en-us/library/system.typeinitializationexception.aspx)（您看到的异常） - 它的[InnerException](http://msdn.microsoft.com/en-us/library/system.exception.innerexception.aspx)属性是包含异常详细信息的属性实际上被抛出 - 这是您需要调查的异常。

在这种情况下，从您的屏幕截图来看，问题似乎是找不到 DLL“opencv_core240.dll”。这可能有多种原因

*   找不到 DLL
*   找不到 DLL 的依赖项之一
*   DLL 的图像格式不正确（32 位而不是 64 位）

我建议你看看[这个问题](https://stackoverflow.com/questions/10930610/opencv-unmanaged-dlls-not-found-asp-net)，看看那里的任何建议是否对你有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-08T02:42:11.640

![VS 项目属性页](../Images/10ae17f73d7c9f93e616fb0e7acc8dcf.png)

检查这个字段对我有用。在**项目**→属性→构建（主/启动项目）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T22:08:35.737

[我通过重新安装MSVCRT 9.0 SP1 x86](http://www.microsoft.com/en-us/download/details.aspx?id=8328)解决了这个问题

# algorithm - 尽可能考虑几个因素的算法

> ID：12425202
> 
> 赞同：6
> 
> 时间：2012-09-14T13:05:56.980
> 
> 标签：algorithm

是否有一种已知的算法可以将整数分解为尽可能少的因子（不一定是素数），其中每个因子都小于某个给定的常数 N？

我不关心素数大于 N 的数字。此外，我不处理大于几百万的数字，并且因式分解是处理初始化的一部分，所以我并不特别担心计算复杂性。

编辑：只是为了清楚。我已经有代码找到了主要因素。我正在寻找一种方法将这些因素组合成尽可能少的复合因素，同时保持每个因素小于 N。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T13:16:15.907

您可以通过将其分为两部分来解决您的问题：

1.  [使用任何标准技术](http://en.wikipedia.org/wiki/Integer_factorization#Factoring_algorithms)将您的数分解为质数。对于只有几百万的数量，审判分工是完全可以的。

2.  取每个因子的对数，并将[它们打包到](http://en.wikipedia.org/wiki/Bin_packing_problem)大小为 log *N*的箱中。

现在，装箱是[NP 难的](http://en.wikipedia.org/wiki/NP-hard)，但在实践中，可以使用简单的技术找到好的近似解：首次拟合算法装箱不超过最佳箱数的 11/9 倍（加上一个箱）。

这是 Python 中的一个实现：

```
from math import exp, log, sqrt
import operator

def factorize(n):
    """
    Factorize n by trial division and yield the prime factors.

    >>> list(factorize(24))
    [2, 2, 2, 3]
    >>> list(factorize(91))
    [7, 13]
    >>> list(factorize(999983))
    [999983]
    """
    for p in xrange(2, int(sqrt(n)) + 1):
        while n % p == 0:
            yield p
            n //= p
        if n == 1:
            return
    yield n

def product(s):
    """
    Return the product of the items in the sequence `s`.

    >>> from math import factorial
    >>> product(xrange(1,10)) == factorial(9)
    True
    """
    return reduce(operator.mul, s, 1)

def pack(objects, bin_size, cost=sum):
    """
    Pack the numbers in `objects` into a small number of bins of size
    `bin_size` using the first-fit decreasing algorithm. The optional
    argument `cost` is a function that computes the cost of a bin.

    >>> pack([2, 5, 4, 7, 1, 3, 8], 10)
    [[8, 2], [7, 3], [5, 4, 1]]
    >>> len(pack([6,6,5,5,5,4,4,4,4,2,2,2,2,3,3,7,7,5,5,8,8,4,4,5], 10))
    11
    """
    bins = []
    for o in sorted(objects, reverse=True):
        if o > bin_size:
            raise ValueError("Object {0} is bigger than bin {1}"
                             .format(o, bin_size))
        for b in bins:
            new_cost = cost([b[0], o])
            if new_cost <= bin_size:
                b[0] = new_cost
                b[1].append(o)
                break
        else:
            b = [o]
            bins.append([cost(b), b])
    return [b[1] for b in bins]

def small_factorization(n, m):
    """
    Factorize `n` into a small number of factors, subject to the
    constraint that each factor is less than or equal to `m`.

    >>> small_factorization(2400, 40)
    [25, 24, 4]
    >>> small_factorization(2400, 50)
    [50, 48]
    """
    return [product(b) for b in pack(factorize(n), m, cost=product)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:12:02.113

我不知道是否有既定的算法，但我会尝试以下

```
public static List<Integer> getFactors(int myNumber, int N) {
    int temp=N;
    int origNumber=myNumber;        
    List<Integer> results=new ArrayList<Integer>();
    System.out.println("Factors of "+myNumber+" not greater than "+N);
    while (temp>1) {            
        if (myNumber % temp == 0) {
            results.add(temp);
            myNumber/=temp;                                
        } else {
            if (myNumber<temp) {
                temp= myNumber;                    
            } else {
                temp--;
            }
        }
    }
    for (int div : results) {
        origNumber/=div;
    }
    if (origNumber>1) {
        results.clear();
    }        
    return(results);
} 
```

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:09:47.413

那么，如果你能找到一个因素，你就完成了，因为第二个因素就是你的数字除以第一个因素。为了让它更快，只需使用一个素数筛。如果您的最大数量在数百万范围内，我想筛子不是很大。

# iis-7 - 多重身份验证模式 - Episerver 站点

> ID：12425210
> 
> 赞同：0
> 
> 时间：2012-09-14T13:06:26.080
> 
> 标签：iis-7, windows-authentication, episerver

我们基于单个组件设置多个网站。所有站点都使用表单身份验证模式，在单个 Web.config 文件上设置。现在我们需要基于相同的 assembley（以及相同的 Web.config 文件）设置一个 Intranet 站点，但这次它应该使用 Windows 身份验证模式对用户进行身份验证。

任何人都可以为此提供一些指导吗？如果我们可以在不调整 Web.config 文件的情况下使用 IIS7 模块来做到这一点，那将是理想的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T21:02:04.200

听起来不可能。您需要将“Windows 身份验证”站点放在它自己的目录中。Web.config（和链接的配置）和 License.config 对于该站点需要是唯一的。但是其余的应用程序文件可以是另一个目录的精确副本。

# c# - EntityFramework 异常：不允许新事务，因为会话中正在运行其他线程

> ID：12425212
> 
> 赞同：1
> 
> 时间：2012-09-14T13:06:33.367
> 
> 标签：c#, wpf, sql-server, entity-framework, exception

我正在使用从[CodeProject](http://www.codeproject.com/KB/database/autorefresh_ef_ssb.aspx)获得的 ServiceBrokerClass 。但是现在当我尝试使用 EnityFramework 和 .Net WPF 将任何记录保存到数据库中时。我收到以下错误。

ServiceBrokerUtility 类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.Objects;
using System.Collections;
using System.Data.SqlClient;
using System.Runtime.Remoting.Messaging;
using System.Collections.Specialized;

namespace JIMS.UtilityClasses
{
    // see http://www.codeproject.com/KB/database/autorefresh_ef_ssb.aspx
    public static class ServiceBrokerUtility
    {
        private static readonly List<string> connectionStrings = new List<string>();
        private const string sqlDependencyCookie = "MS.SqlDependencyCookie";
        private static ObjectContext objectContext;
        private static RefreshMode refreshMode;
        private static readonly Dictionary<string, IEnumerable> collections = new Dictionary<string, IEnumerable>();        

        static public void AutoRefresh(this ObjectContext objectContext, RefreshMode refreshMode, IEnumerable collection)
        {                        
            string efConnStr=System.Configuration.ConfigurationManager.ConnectionStrings[objectContext.Connection.ConnectionString.Replace("name=", "").Trim()].ConnectionString;
            string dbConnectionString = new System.Data.EntityClient.EntityConnectionStringBuilder(efConnStr).ProviderConnectionString;
            if (!connectionStrings.Contains(dbConnectionString))
            {
                connectionStrings.Add(dbConnectionString);
                SqlDependency.Start(dbConnectionString);
            }
            ServiceBrokerUtility.objectContext = objectContext;
            ServiceBrokerUtility.refreshMode = refreshMode;
            AutoRefresh(collection);
        }

        /// <summary>
        /// Stops the auto refresh.
        /// </summary>
        /// <param name="collection">The collection.</param>
        static public void StopAutoRefresh(IEnumerable collection)
        {
            var kvp = collections.FirstOrDefault(x => x.Value == collection);
            if (!kvp.Equals(new KeyValuePair<string, IEnumerable>()))
                collections.Remove(kvp.Key);
        }

        static private void AutoRefresh(IEnumerable collection)
        {
            var oldCookie = CallContext.GetData(sqlDependencyCookie);
            try
            {
                var dependency = new SqlDependency();
                collections.Add(dependency.Id, collection);
                CallContext.SetData(sqlDependencyCookie, dependency.Id);
                dependency.OnChange += dependency_OnChange;
                objectContext.Refresh(refreshMode, collection);
            }
            finally
            {
                CallContext.SetData(sqlDependencyCookie, oldCookie);
            }
        }

        static void dependency_OnChange(object sender, SqlNotificationEventArgs e)
        {
            if (e.Info == SqlNotificationInfo.Invalid)
            {                
                return;
            }
            try
            {
                var id = ((SqlDependency)sender).Id;
                IEnumerable collection;
                if (collections.TryGetValue(id, out collection))
                {
                    collections.Remove(id);
                    AutoRefresh(collection);
                    var notifyRefresh = collection as INotifyRefresh;
                    if (notifyRefresh != null)
                        System.Windows.Application.Current.Dispatcher.BeginInvoke(
                         (Action)(notifyRefresh.OnRefresh));
                }
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.Print("Error in OnChange: {0}", ex.Message);
            }
        }
    }
    public interface INotifyRefresh : INotifyCollectionChanged
    {
        void OnRefresh();
    }
} 
```

AutoRefreshCollection 类：

```
namespace JIMS.UtilityClasses
{
    public class AutoRefreshCollection<T> : IEnumerable<T>, INotifyRefresh
        where T : EntityObject
    {
        public IEnumerable<T> objectQuery;
        public AutoRefreshCollection(ObjectQuery<T> objectQuery, RefreshMode refreshMode)
        {
            this.objectQuery = objectQuery;
            objectQuery.Context.AutoRefresh(refreshMode, this);
        }

        public void StopAutoRefresh()
        {
            ServiceBrokerUtility.StopAutoRefresh(this);
        }

        public IEnumerator<T> GetEnumerator()
        {
            return objectQuery.GetEnumerator();
        }

        IEnumerator IEnumerable.GetEnumerator()
        {
            return this.GetEnumerator();
        }

        public void OnRefresh()
        {
            try
            {
                if (this.CollectionChanged != null)
                    CollectionChanged(this,
                      new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));

            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.Print("Error in OnRefresh: {0}", ex.Message);
            }
        }

        public event NotifyCollectionChangedEventHandler CollectionChanged;
    }
} 
```

我的代码：

```
public void Create()
{
    try
    {
        dbContext.AddToLedgers(
            new JIMSDAL.Ledger
            {
                LedgerName = LedgerName,
                Group = LedgerGroup,
                Street = Street,
                City = City,
                PinCode = PinCode,
                State = State,
                Phone = Phone,
                TIN = TIN,
                Balance = Balance
            }
        );                
        dbContext.SaveChanges();
        JIMSMessage.Show("Ledger Created Successfully.");
        Clear();
    }
} 
```

谁可以帮我这个事。

内部异常堆栈跟踪：

```
 at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel, Int32 timeout, SqlInternalTransaction transaction, TdsParserStateObject stateObj, Boolean isDelegateControlRequest)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransactionYukon(TransactionRequest transactionRequest, String transactionName, IsolationLevel iso, SqlInternalTransaction internalTransaction, Boolean isDelegateControlRequest)
   at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransaction(TransactionRequest transactionRequest, String name, IsolationLevel iso, SqlInternalTransaction internalTransaction, Boolean isDelegateControlRequest)
   at System.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName)
   at System.Data.SqlClient.SqlInternalConnection.BeginTransaction(IsolationLevel iso)
   at System.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
   at System.Data.Common.DbConnection.BeginTransaction(IsolationLevel isolationLevel)
   at System.Data.EntityClient.EntityConnection.BeginDbTransaction(IsolationLevel isolationLevel) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T13:42:35.313

看这个 。如果类似，这应该可以解决您的问题。

[实体框架异常](https://stackoverflow.com/questions/2113498/sqlexception-from-entity-framework-new-transaction-is-not-allowed-because-ther)

# javascript - 在 Jquery 中使用自定义编码和 Twitter 的警报插件的错误

> ID：12425213
> 
> 赞同：1
> 
> 时间：2012-09-14T13:06:34.147
> 
> 标签：javascript, jquery, twitter-bootstrap, filtering

我有一个基于 Twitter 的 Alert、Collapse 和 Modal Plugin 的过滤器。冲突来自使用警报插件和我的自定义代码来让它发挥应有的作用。

过滤器的功能类似于排序，当单击选择时，它会在其标题下方的排序菜单中创建一个字段（在 BCN 和 Account 过滤器是我的问题子项的情况下）。

EX：单击帐户会从那里拉出一个模式窗口，用户选择一个帐户名称。该名称显示在模式窗口之外和帐户下方的过滤器部分中。单击旁边的 X 可以取消选择，也可以通过单击底部的重置按钮取消所有选择。

这是发生错误的地方：

1.  选择一个帐户名称后，每次后续选择都需要双击。它应该只需要单击一下

2.  单击帐户选择（多个）时，通过 X 将其关闭，然后重新单击先前选择的相同选项会导致所有已关闭的选择出现在过滤器部分中。

我的问题是如何篡改错误。我愿意使用另一种不是警报插件的方法，只要它正常工作。

代码链接：http: [//jsfiddle.net/rsxavior/ccvEw/2/](http://jsfiddle.net/rsxavior/ccvEw/2/)

# visual-studio-2010 - 用于 Visual Studio 性能测试的新浏览器

> ID：12425217
> 
> 赞同：3
> 
> 时间：2012-09-14T13:06:40.637
> 
> 标签：visual-studio-2010, testing, load-testing

有人知道是否有更新为 Visual Studio 2010 负载测试安装新的“浏览器”吗？2010 默认只有 IE 7、8 和旧版本的 chrome、safari 和 firefox。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T19:02:21.517

在视觉工作室 2012 中？

以下是所有可用浏览器的列表：http: [//msdn.microsoft.com/en-us/library/dd997561.aspx](http://msdn.microsoft.com/en-us/library/dd997561.aspx)

您可以通过创建新的 .browser 文件来添加其他浏览器。有关更多信息，请参见此处[http://davefancher.com/2011/05/18/vsts-2010-load-test-browser-definitions/](http://davefancher.com/2011/05/18/vsts-2010-load-test-browser-definitions/)

# javascript - 在 Flot jQuery-plugin 问题中将 javascript 刻度转换为日期

> ID：12425220
> 
> 赞同：2
> 
> 时间：2012-09-14T13:06:52.227
> 
> 标签：javascript, jquery, datetime, flot

我有一个动态 Flot 图，x 轴上是日期，y 轴上是数字。为了让 Flot 插件正确读取日期对象，我必须将日期转换为刻度（使用`getTime()`）。我的问题是我无法在我的工具提示悬停在图表上时将刻度恢复到正常日期。 ![在此处输入图像描述](../Images/6b5c77921d6ba24496eddd8fe21176dd.png)

我试图用这个来扭转它：

```
dateTimeObject = new Date((jsTicks - 621355968000000000) / 10000); 
```

无论 jsTicks 是什么，我得到的都是“Jan 02 0001 hh:mm:ss (almost current time)”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T15:36:03.033

这在某种程度上取决于您在创建数据时是否考虑了浏览器的时区。`plotclick`在or`plothover`事件中处理此问题的简单方法如下：

```
$("#placeholder").bind("plotclick", function(event, pos, item) {
    var x = item.datapoint[0],
    y = item.datapoint[1].toFixed(2);
    var dt = new Date(x);
    var label = 'At '+dt.toLocaleTimeString()+' ';
    //now display this label
} 
```

如果您在数据中考虑时区，则需要一个看起来更像这样的时区：

```
$("#placeholder").bind("plotclick", function(event, pos, item) {
    var x = item.datapoint[0],
    y = item.datapoint[1].toFixed(2);
    var userTZ = new Date();
    userTZ = userTZ.getTimezoneOffset()*60*1000;
    var dt = new Date(x+userTZ);
    var label = 'At '+dt.toLocaleTimeString()+' ';
    //now display this label
} 
```

一个有时区的例子：http: [//jsfiddle.net/ryleyb/utNaJ/](http://jsfiddle.net/ryleyb/utNaJ/)

# jquery - jquery-ui自动完成：通过回调函数设置源不起作用

> ID：12425224
> 
> 赞同：7
> 
> 时间：2012-09-14T13:07:00.113
> 
> 标签：jquery, jquery-ui, autocomplete

链接到小提琴： http: [//jsfiddle.net/nEapJ/](http://jsfiddle.net/nEapJ/)（工作）

```
var items = [{
   label : 'a',
   value : 'a',
},{
   label : 'b',
   value : 'b',
},{
   label : 'c',
   value : 'c',
}];

$('input').autocomplete({
    source : items
});​ 
```

此代码有效，但是当我想通过回调函数设置源时，它不起作用

链接到小提琴： http: [//jsfiddle.net/B3RWj/](http://jsfiddle.net/B3RWj/)（不工作）

```
$('input').autocomplete({
    source : function(request, response){
            response(items);
          }
});​ 
```

当我输入“a”时，它会给出 a,b,c 作为结果。

那么，我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:10:42.253

在回调函数中，由您来进行过滤。

[从文档](http://jqueryui.com/demos/autocomplete/)中提取：

> 第三种变体，回调，提供了最大的灵活性，可用于将任何数据源连接到自动完成。回调有两个参数：
> 
> 一个请求对象，具有一个名为“term”的属性，它指的是文本输入中当前的值。例如，当用户在城市字段中输入“new yo”时，自动完成项将等于“new yo”。响应回调，它期望单个参数包含要向用户建议的数据。**此数据应根据提供的 term 进行过滤**，并且可以采用上述任何简单本地数据的格式（字符串数组或带有标签/值/两个属性的对象数组）。在请求期间提供自定义源回调以处理错误时，这一点很重要。即使遇到错误，您也必须始终调用响应回调。这确保了小部件始终具有正确的状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-13T14:38:27.367

看代码：

```
$('input').autocomplete({
    source : function(request, response){
        var term = request.term;
        var result = [];

        //make your code here to filter the item by term. 
        //put them into the result array such as.

        response(result);//this will show in the selection box.
    }
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-26T17:37:21.753

如果要使用回调函数而不是源数组或字符串，则必须添加 `response($.ui.autocomplete.filter(items, request.term));`

在您的功能中：

`source : function(request, response){}`

当您将源定义为数组或字符串时，这就是自动完成功能，但对于回调，您必须添加它。

# eclipse - Myface CODI 不会在 Eclipse 中抛出异常

> ID：12425225
> 
> 赞同：0
> 
> 时间：2012-09-14T13:07:07.910
> 
> 标签：eclipse, tomcat7, myfaces, codi

我在 Eclipse IDE 中使用 Myfaces、Primefaces、Tomcat 进行 JSF 开发。通过测试时，我曾经在 Eclipse 控制台中得到 Myfaces/Primefaces 抛出的异常。

最近，我通过添加 MyFaces CODI 和 OpenWebBeans 来增强我的开发环境。自从我这样做后，我就不再在我的 Eclipse 控制台中收到任何错误消息。我不知道为什么。

甚至不会抛出 nullpointerexception、找不到方法/变量等基本错误。我已将 Myface CODI 阶段设置为开发。我收到与对话开始和停止相关的 MyFace CODI 消息，但从未抛出所有异常和错误。

调试 myfaces/primefaces/bean 代码来发现这些简单的错误是令人沮丧的。

有人可以建议我该怎么做才能在 Eclipse 环境中再次获取异常。需要一些紧急帮助，因为这个问题已经大大减慢了开发速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:21:41.960

那是你设置的问题。我们也在使用所有这些库，它们都不会导致这样的事情。

# java - 正则表达式模式不起作用，为什么？

> ID：12425231
> 
> 赞同：-1
> 
> 时间：2012-09-14T13:07:48.603
> 
> 标签：java, regex

我正在尝试匹配如下字符串：

```
"§{characters.characters}"
"§{characters_characters}"
"§{characters_characters.characters}" 
```

ETC

我这样做了：

```
Pattern.compile("\\§\\{[a-zA-Z]+([_\\.][a-zA-Z]+)*\\}") 
```

但它根本不起作用。任何人都知道为什么？

如果我`Pattern.compile("\\§\\{([a-zA-Z]+)([_\\.][a-zA-Z]+)*\\}")`只输入“字符”之类的字符串就可以了。但是也不明白为什么...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T13:13:34.247

匹配您的测试字符串

```
[a-zA-Z]+([_\\.][a-zA-Z]+)* 
```

工作得很好，`\\§\\{`并且`\\}`不是您的测试字符串中的字符，所以它们不匹配，您的正则表达式正在寻找类似的东西

```
\§\{characters_characters.characters\} 
```

`[a-zA-Z]+([_\\.][a-zA-Z]+)*`在[http://regexr.com?325e8](http://regexr.com?325e8)上查看实际操作

`\\§\\{([a-zA-Z]+)([_\\.][a-zA-Z]+)*\\}`在[http://regexr.com?325ee](http://regexr.com?325ee) _

* * *

**编辑**

根据您的评论，`§{([a-zA-Z]+)([_\\.][a-zA-Z]+)*}`应该这样做[http://regexr.com?325gp](http://regexr.com?325gp)

# css - CSS3 和 html5 * 特殊字符的含义

> ID：12425232
> 
> 赞同：1
> 
> 时间：2012-09-14T13:07:49.727
> 
> 标签：css, css-selectors, special-characters, wildcard

> **可能的重复：**
> [css：*标记的含义](https://stackoverflow.com/questions/3359201/css-the-meaning-of-mark)

CSS3中的符号是什么`*`意思。在代码中使用；

```
*{
margin: 0;
padding:0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:09:50.320

*   this 指的是所有元素，这个特定的代码将使所有元素的边距和填充为 0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:10:46.543

它基本上是一种**重置风格**。消除用户代理/浏览器样式的差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T14:14:14.817

[`*`是一个通用的 CSS 通配符](https://developer.mozilla.org/en-US/docs/CSS/Universal_selectors)，上面显示的选择器选择 HTML 文档中的所有元素。它通常用于[重置样式表](http://www.cssreset.com/)，有时也称为通用选择器。

# java - 查询未在 HSQLDB 中运行

> ID：12425234
> 
> 赞同：2
> 
> 时间：2012-09-14T13:07:53.673
> 
> 标签：java, spring, jdbc, hsqldb

我正在使用 HSQLDB 进行 JUNIT 测试。

有一个查询不在 HSQL 中执行，而是使用 Sybase 驱动程序执行。我正在使用 Spring JDBC 为 HSQLDB 运行查询和 hsqldb.1.8.1.jar 文件。

以下是代码：

```
public static final String ORG_CODE_QUERY = "SELECT ORG_CODE = org.name " +
         "  FROM " + ORGANIZATION  + " org " +
         " WHERE org.id   = ? " +
         "   AND org.industry = ?  ";

public List<String> getOrgCode(RequestPayload rqstPayload) {
        return getJdbcTemplate().query(ORG_CODE_QUERY, new Object[]{rqstPayload.getId(),rqstPayload.getIndustry()}, new ResultSetExtractor<List<String>>() {
            public List<String> extractData(ResultSet rs) throws SQLException {
                List<String> list = new ArrayList<String>();
                while(rs.next()) {
                    list.add(rs.getString("ORG_CODE"));
                }
                return list;
            }
        });
    } 
```

弹簧配置：

```
 <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
        <property name="driverClass" value="org.hsqldb.jdbcDriver" />
        <property name="jdbcUrl" value="jdbc:hsqldb:mem:test" />
        <property name="user" value="sa" />
        <property name="password" value="" />
        <property name="minPoolSize" value="5" />
        <property name="maxPoolSize" value="10" />
    </bean> 
```

此查询在将 Sybase 数据源传递给 JDBCTemplate 时运行良好，但在传递 HSQLDB 数据源时失败。

如果我如下更改字符串，它也会在 HSQL 中运行

```
public static final String ORG_CODE_QUERY = "SELECT org.name as ORG_CODE" +
         "  FROM " + ORGANIZATION  + " org " +
         " WHERE org.id   = ? " +
         "   AND org.industry = ?  "; 
```

不幸的是无法更改生产代码。

我收到以下错误：

```
Caused by: java.sql.SQLException: Column not found: ORG_CODE in statement 
```

如果这个问题有好转，请告诉我。

谢谢 Avnish

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:25:12.663

[HSQL 不支持](http://hsqldb.org/doc/2.0/guide/dataaccess-chapt.html#dac_sql_select_statement)`SELECT <alias> = <column definition>`您在 Sybase SQL 查询中使用的语法。

您需要找到适用于两个数据库系统的查询版本，或者在您的类中包含某种开关，让您在使用 Sybase 时执行 Sybase 语法，在使用 HSQL 时执行 HSQL 语法。

# php - 作曲家中命名空间自动加载的问题

> ID：12425235
> 
> 赞同：4
> 
> 时间：2012-09-14T13:07:56.977
> 
> 标签：php, namespaces, autoload, composer-php

这是一个更美观的问题......

我在现有项目中使用 composer.phar 来自动加载我的类。

`composer.json`这是我名为**Acme**的项目的示例片段：

```
{
    "autoload": {
         "psr-0": {
            "Acme\\Mail": "modules/mail/src/",
         }
    }
} 
```

我的文件结构的一个部分是这样的：

```
app.php
composer.phar
vendor/
modules/
    mail/
        src/
            Acme/
                Mail.php (contains Acme\Mail\Mail.php) 
```

在我的情况下，我必须坚持使用文件夹“模块/邮件”并且不能重命名它们。

**基本上这是可行**的，但我必须在`Acme`下面创建一个额外的文件夹，`src`它有点难看。

如果我想在我的邮件文件夹中省略最高的命名空间部分，那么必须如何定义自动加载，`Acme`所以它看起来像这样：

```
app.php
composer.phar
vendor/
modules/
    mail/
        src/
            Mail.php (contains Acme\Mail\Mail.php) 
```

我仍然可以在 php 文件中使用它：

```
use Acme\Mail;
$mail = new Mail(); 
```

或者那不可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-25T15:26:46.433

PSR4 将允许这成为可能。请参阅：[https](https://github.com/php-fig/fig-standards/blob/master/proposed/psr-4-autoloader/psr-4-autoloader.md) ://github.com/php-fig/fig-standards/blob/master/proposed/psr-4-autoloader/psr-4-autoloader.md和[http://www.sitepoint.com/battle-自动加载器-psr-0-vs-psr-4/](http://www.sitepoint.com/battle-autoloaders-psr-0-vs-psr-4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T15:52:56.257

如果您不想遵循 PSR-0 标准（您真的应该重新考虑这样做），您可以使用类映射生成。请参阅[http://getcomposer.org/doc/04-schema.md#autoload上的参考资料](http://getcomposer.org/doc/04-schema.md#autoload)

# javascript - 在处理程序中执行函数

> ID：12425240
> 
> 赞同：0
> 
> 时间：2012-09-14T13:08:51.493
> 
> 标签：javascript

它有什么区别：

```
function a(){
//...
}

setInterval(a, 1000); 
```

对比

```
setInterval(function(){
a();
}, 1000); 
```

除了很明显我可以在第二种情况下传递参数。

它不一定是 setInterval。任何可以接受函数处理程序的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:10:46.570

传递匿名函数还允许您调用`someObject.a()`和保存`this`.

如果你写`setTimeout(someObject.a, 300)`，该`a()`方法将在全局对象的上下文中被调用，所以它`this`就是`window`. 如果它期望`this`是`someObject`，它将打破。

如果您编写`setTimeout(function() { someObject.a(); }, 300)`,`a()`将在正确的上下文中调用。

# ios - 您可以使用为带有情节提要的 xib 创建的视图控制器吗？

> ID：12425242
> 
> 赞同：0
> 
> 时间：2012-09-14T13:08:56.293
> 
> 标签：ios, controller, storyboard, xib

我们有一个框架，通常用于我们的 iOS 项目，其中包括我们所有的登录信息和类似的东西。它是在 iOS5 之前创建的，因此不使用情节提要。我们现在正计划进入故事板。我创建了初始视图控制器，与另一个项目中的 xib 完全一样。然后我在 Identity Inspector 中设置视图控制器，并连接到 Connections Inspector 的所有出口和操作。但是，当我运行该项目时，出现以下错误：

```
2012-09-14 08:46:15.366 Mixable[3923:f803] Unknown class LoginViewController in Interface Builder file.
2012-09-14 08:46:15.460 Mixable[3923:f803] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<UIViewController 0x6851200> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key loginBtnFacebook.'
*** First throw call stack:
(0x14b1022 0xeb1cd6 0x14b0ee1 0x9c2022 0x933f6b 0x933edb 0x94ed50 0x23671a 0x14b2dea 0x141c7f1 0x23526e 0xdb1fc 0xdb779 0xdb99b 0x3a401 0x3a670 0x3a836 0x4172a 0x12596 0x13274 0x22183 0x22c38 0x16634 0x139bef5 0x1485195 0x13e9ff2 0x13e88da 0x13e7d84 0x13e7c9b 0x12c65 0x14626 0x201d 0x1f85 0x1)
terminate called throwing an exception 
```

如果我删除与 loginBtnFacebook 的连接，我只需将它用于我已连接的下一个插座，并一直持续到我删除所有插座。

是否可以使用相同的视图控制器，还是我们需要重写所有的视图控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:07:35.530

在回答您的问题时，视图控制器大致相同（除了使用了哪些 init 方法，例如您显然不使用`initWithNibNamed`情节提要，但这似乎与您的问题无关）。

因此，有几个与您的错误相关的问题，这是插座链接问题的典型症状：

1.  您是否配置了场景的视图控制器类？单击场景底部的视图控制器按钮，单击右侧面板顶部的“身份检查器”选项卡按钮，并确保指定视图控制器类。

2.  您的 IBOutlet 连接正确吗？当您单击工具栏右侧的“Assistant Editor”时，您应该会看到您的班级的 .h 文件显示在底部。定义旁边是否有实心黑点以`IBOutlet`确保所有内容都已连接？

    ![IBOutlet 联动确认画面截图](../Images/db44109aebd3e64047e78420eec0ead8.png)

3.  这不太可能是问题，但是您是否将视图控制器的 .m 文件包含在“构建阶段”的“编译源”部分中？

    ![编译源](../Images/fc7b99aa293ba6d4eb4a68dc6d5e3d82.png)

# javascript - 是否存在用于模拟元素的键盘操作的跨浏览器 JavaScript 库？

> ID：12425246
> 
> 赞同：1
> 
> 时间：2012-09-14T13:09:03.393
> 
> 标签：javascript, dom-events, ui-automation

我非常了解浏览器的标准事件触发机制，但我需要一个 JavaScript 库来模拟通过键盘进行光标和插入点导航。特别是，我需要一个库，它允许我移动插入点，但如果在使用虚拟箭头键导航时“按下”虚拟 shift 键，也可以处理扩展或折叠文本选择范围。这样的跨浏览器 JavaScript 库是否存在？

这旨在用于浏览器自动化库，因此像 Selenium 这样的建议是不合适的。此外，如果可能的话，我想避免依赖于大型 JavaScript 框架（如 jQuery）的库。最后，这需要在页面中注入，因此非 JavaScript 解决方案无法满足我的要求。

假设我有一个看起来像这样的 HTML 页面：

```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>keyboard</title>
</head>
<body>
  <input id="editor" value="hello world" />
</body>
</html> 
```

我希望能够在 JavaScript 中调用如下内容：

```
function moveCursor() {
  var editor = document.getElementById("editor");
  editor.focus();

  // Hypothetical API here. This would need to be
  // adjusted to be used with the actual library.
  // Assume the pressKey() is defined as:
  //
  //   pressKey(element, keyCode, isShiftPressed)
  //
  keyboardSimulator.pressKey(editor, keys.END);
  keyboardSimulator.pressKey(editor, keys.LEFT, true);
  keyboardSimulator.pressKey(editor, keys.LEFT, true); 
} 
```

调用此 JavaScript 函数后，我希望页面中的焦点位于编辑器元素上，并且选择“hello world”值中的“ld”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-15T14:02:18.063

实际上有*一些*图书馆可以做这些事情。

其中之一称为 Syn，并包含在 bitovi FuncUnit 中：

[http://funcunit.com](http://funcunit.com)

[https://github.com/bitovi/syn](https://github.com/bitovi/syn)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:21:22.860

不存在这样的库。如果真的允许，这将是一个巨大的安全漏洞。您唯一能做的就是捕获击键并对其进行操作，例如创建特殊热键，当捕获时触发您在 javascript 中创建的某些特殊功能。

（顺便说一句：一些扩展，如 Lastpass 和 Lazarus 似乎将击键发送到控件，实际上只是设置了 text 属性。）

# ios - UIBarButtonItem 自定义背景图像的奇怪问题

> ID：12425261
> 
> 赞同：2
> 
> 时间：2012-09-14T13:09:54.173
> 
> 标签：ios, ios5, ios6, uikit

我正在尝试自定义 iOS 5 中的后退按钮。这是我要使用的背景图像：

![背景图片](../Images/ee6abfad47caefc55332be6e67cce7a6.png)

它是 23 x 30 点。

我要自定义的代码是：

```
UIImage *buttonBackground = [[UIImage imageNamed:@"navbar-backbutton.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 11, 0, 11) resizingMode:UIImageResizingModeStretch]; 
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Geri" style:UIBarButtonItemStylePlain target:nil action:nil];
[backButton setBackButtonBackgroundImage:buttonBackground forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
[self.navigationItem setBackBarButtonItem:backButton]; 
```

这应该可以解决问题，图像的宽度为 23 点，我将左右偏移设置为 11 点。但这就是结果（“Geri”在土耳其语中的意思是“返回”）：

![返回键](../Images/2c0a12a92712829a79d0a0985e23c605.png)

我不明白的是最后的大小差异。我不确定我做错了什么。关于这个有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-14T19:49:19.483

## 你的代码有什么问题？

您`UIEdgeInsets`使用的图像不正确，您是在告诉 UI 过早地开始拉伸图像。您应该更改 left 的值`UIEdgeInsets`以开始向右拉伸几个点。

## 什么是边缘插图？

我注意到您评论了另一个您不了解边缘插图如何工作的答案。所以我为你画了这个。

![在此处输入图像描述](../Images/bcb0e3182367ef42280f23e7b8e62bff.png)

黑线代表图像的边界。橙色线代表您希望图像可拉伸的区域。请注意，当按钮的圆形部分结束时，会出现左帽。右帽出现在右边缘的圆角之前。

您可以使用`UIEdgeInsets`.

`UIEdgeInsets`定义如下（[见文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitDataTypesReference/Reference/reference.html)）：

```
typedef struct {
    CGFloat top, left, bottom, right;
} UIEdgeInsets; 
```

## 解决方案

在您的情况下，我下载了您尝试使用的按钮，我发现左帽应该从 14 像素开始。右帽应为 18 像素（距右边缘 5 像素）。

因此，您应该使用以下边缘插图来正确调整图像大小：

```
UIEdgeInsets correctInsets = UIEdgeInsetsMake(0.0, 14.0, 0.0, 5.0); 
```

## 兼容性（iOS 5 和 6）

另请注意，`UIImage`您使用的调整大小方法仅适用于 iOS 6：

```
-resizableImageWithCapInsets:resizingMode: 
```

你应该使用这个方法来让它在 iOS 5 中正常工作：

```
-resizableImageWithCapInsets: 
```

参见[UIImage 文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:37:31.197

试试这个代码

```
 NSString *ver = [[UIDevice currentDevice] systemVersion];
    IosVersion = [ver floatValue];

    UIButton * backButton ;
    backButton = [[UIButton alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 23, 19)];
    if(IosVersion >= 5.0)

        [backButton setBackgroundImage:[[UIImage imageNamed:@"navbar-backbutton"] resizableImageWithCapInsets:UIEdgeInsetsMake(0.0f, 15.0f, 0.0f, 15.0f)]forState:UIControlStateNormal];

    else

        [backButton setBackgroundImage:[[UIImage imageNamed:@"navbar-backbutton"]stretchableImageWithLeftCapWidth:15 topCapHeight:15]forState:UIControlStateNormal];

    [backButton.titleLabel setText:@"Geri"];
    [backButton setFrame: CGRectMake(0, 0, 23, 19)];

    [backButton addTarget:self action:@selector(goToHome) forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem *HomeButton = [[UIBarButtonItem alloc] initWithCustomView: backButton];
    [self.navigationItem setLeftBarButtonItem:HomeButton]; 
```

# actionscript-3 - 来自同一已发布 NetStream 的 Flex P2P 多个接收器

> ID：12425263
> 
> 赞同：0
> 
> 时间：2012-09-14T13:10:00.630
> 
> 标签：actionscript-3, apache-flex, air, p2p, netstream

我正在为我的聊天室做 P2P。我可以使用 Cirrus 并将音频和视频从一个用户传输到另一个用户。这是一对一的转移。

然而，现在，情况有点不同了。我需要进行一对多的传输。

User1 发布了一个 NetStream，其中包含他自己的实时网络摄像头视频。User2, User3,... 想要查看 User1 的网络摄像头。

```
User1_Stream = new NetStream(...);
User1_Stream.publish("user1-stream");

//only 1 of these users below can see the webcam of User1
User2_Stream = new NetStream(...,User1_Connection.nearID);
User2_Stream.play("user1-stream");

User3_Stream = new NetStream(...,User1_Connection.nearID);
User3_Stream.play("user1-stream");

User4_Stream = new NetStream(...,User1_Connection.nearID);
User5_Stream.play("user1-stream");
... 
```

如何让所有用户都能看到 User1 的网络摄像头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T06:20:24.420

无法将发送流打开为 NetStream.DIRECT_CONNECTIONS 然后发送到多个接收器。必须进行多播：

[http://www.flashrealtime.com/multicast-explained-flash-101-p2p/](http://www.flashrealtime.com/multicast-explained-flash-101-p2p/)

请注意，在创建发送流或接收流之后，不允许直接调用“发布”和“播放”。在调用这些方法之前等待“NetStream.Connect.Success”。

# android - 比较预先填充的 SQLite DB 中解析的 JSON，如果不相似则更新

> ID：12425266
> 
> 赞同：0
> 
> 时间：2012-09-14T13:10:15.993
> 
> 标签：android, json, sqlite, parsing

我在这个问题上被困了一段时间`Android`。

`SQLite`是否可以从解析的对象中比较本地数据库`JSON`并更新表（如果它不相似）？

例如，我有一个预先填充的`SQLite`数据库，有人更新了服务器数据库。因此，它不会删除以前的数据库并重新填充应用程序的本地`SQLite`数据库，它只会进行后台`JSON`解析并比较`SQLite`数据库的内容。

如果它发现有更改的行，它只会拉出该`JSON`对象并更新本地`SQLite`数据库上的对应对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:03:03.110

如果表架构包含反映插入或更新时间的时间戳列，您可以下载带有时间戳的行列表并与您的本地数据库进行比较，然后只需下载并用本地较旧的时间戳替换这些记录上的完整行数据库。

您需要考虑服务器上已删除的记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:47:10.100

我不确定在后台进程中检查服务器数据库的每一行有多昂贵，但这里有一个建议。为什么不从服务器创建一个有点通知表，然后必须在此表中发布与本地 sqlite 数据库有关的服务器数据库中的任何相关更改。您的后台进程现在只是检查通知表并创建将相应地更新您的本地数据库的代码。

# c# - 如何处理在运行时创建的 Windows 窗体控件？

> ID：12425269
> 
> 赞同：0
> 
> 时间：2012-09-14T13:10:29.987
> 
> 标签：c#, winforms, runtime, controls

我有 a `Form`，上面有两个控件， a`Button`和 a `TextBox`。
这些控件是在运行时创建的。

当我单击 时`Button`，我想对该`TextBox.Text`属性进行一些操作。
但是，使用此代码我不能：

```
 private void Form1_Load(object sender, EventArgs e)
 {
     TextBox txb = new TextBox();
     this.Controls.Add(txb);
     Button btn = new Button();
     this.Controls.Add(btn);
     btn.Click += new EventHandler(btn_Click);
 } 
```

在这里我试图找到它：

```
public void btn_Click(object sender, EventArgs e)
{
    foreach (var item in this.Controls)
    {
        if (item is TextBox)
        {
            if (((TextBox)item).Name=="txb")
            {
                MessageBox.Show("xxx");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:21:07.460

我会保存对您的`TextBox`.

```
TextBox txb;
private void Form1_Load(object sender, EventArgs e)
 {
     txb = new TextBox();
     this.Controls.Add(txb);
     Button btn = new Button();
     this.Controls.Add(btn);
     btn.Click += new EventHandler(btn_Click);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:15:19.580

您没有名称为“txb”的文本框。所以，这个表达式永远是假的：`if(((TextBox)item).Name=="txb")`

试试这个代码：

```
private void Form1_Load(object sender, EventArgs e)
 {
     TextBox txb = new TextBox();
     txb.Name = "txb";
     this.Controls.Add(txb);
     Button btn = new Button();
     this.Controls.Add(btn);
     btn.Click += new EventHandler(btn_Click);
 } 
```

# solr - 如何将 solrnet 中的 solrSuggester 与外部源位置集成？

> ID：12425279
> 
> 赞同：0
> 
> 时间：2012-09-14T13:10:55.433
> 
> 标签：solr, solrnet

我已参考[此](http://code.google.com/p/solrnet/wiki/SpellChecking) 链接并尝试实施并收到错误“错误请求”。可能是什么原因？或者那里有任何有助于实现它的教程吗？或
如何将 solrnet 中的 solr 建议器与外部源位置集成？

这是 SolrConfig.xml：

```
 <searchComponent class="solr.SpellCheckComponent" name="suggest">
<lst name="spellchecker">
  <str name="name">suggest</str>
  <str name="classname">org.apache.solr.spelling.suggest.Suggester</str>
  <str name="lookupImpl">org.apache.solr.spelling.suggest.tst.TSTLookup</str>
  <!-- Alternatives to lookupImpl: 
       org.apache.solr.spelling.suggest.fst.FSTLookup   [finite state automaton]
       org.apache.solr.spelling.suggest.fst.WFSTLookupFactory [weighted finite state automaton]
       org.apache.solr.spelling.suggest.jaspell.JaspellLookup [default, jaspell-based]
       org.apache.solr.spelling.suggest.tst.TSTLookup   [ternary trees]
  -->
  <str name="field">Name</str>  <!-- the indexed field to derive suggestions from -->
  <str name="field">ManufacturerName</str>
  <str name="field">CategoryName</str>
  <str name="field">ShortDescription</str>
  <float name="threshold">0.005</float>
  <str name="buildOnCommit">true</str>
<bool name="exactMatchFirst">true</bool>
  <str name="sourceLocation">source.txt</str>

</lst> 
```

真建议真 5真建议

这是代码：

`private static ISolrOperations<SolrCustomProduct> solrCustomWorker;`

`ISolrQueryResults<SolrCustomProduct> results;`

```
//Check connection instance invoked or not
if (solrCustomWorker == null)
{
    Startup.Init<SolrCustomProduct>(solrURL);
    solrCustomWorker = ServiceLocator.Current.GetInstance<ISolrOperations<SolrCustomProduct>>();
} 
```

`results = solrCustomWorker.Query("ac", new QueryOptions { SpellCheck = new SpellCheckingParameters { Collate=true}, });`

这是日志：

```
 Sep 15, 2012 10:13:59 AM org.apache.solr.common.SolrException log
SEVERE: org.apache.solr.common.SolrException: undefined field text
    at org.apache.solr.schema.IndexSchema.getDynamicFieldType(IndexSchema.java:1330)
    at org.apache.solr.schema.IndexSchema$SolrQueryAnalyzer.getAnalyzer(IndexSchema.java:408)
    at org.apache.solr.schema.IndexSchema$SolrIndexAnalyzer.reusableTokenStream(IndexSchema.java:383)
    at org.apache.lucene.queryParser.QueryParser.getFieldQuery(QueryParser.java:574)
    at org.apache.solr.search.SolrQueryParser.getFieldQuery(SolrQueryParser.java:206)
    at org.apache.lucene.queryParser.QueryParser.Term(QueryParser.java:1429)
    at org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:1317)
    at org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:1245)
    at org.apache.lucene.queryParser.QueryParser.TopLevelQuery(QueryParser.java:1234)
    at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:206)
    at org.apache.solr.search.LuceneQParser.parse(LuceneQParserPlugin.java:79)
    at org.apache.solr.search.QParser.getQuery(QParser.java:143)
    at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:105)
    at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:165)
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)
    at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:365)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:260)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1812)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

Sep 15, 2012 10:13:59 AM org.apache.solr.core.SolrCore execute
INFO: [core-live] webapp=/solr path=/select params={spellcheck=true&q=ac&?=&spellcheck.collate=true&rows=100000000} status=400 QTime=1 
Sep 15, 2012 10:14:08 AM org.apache.solr.common.SolrException log
SEVERE: org.apache.solr.common.SolrException: undefined field text
    at org.apache.solr.schema.IndexSchema.getDynamicFieldType(IndexSchema.java:1330)
    at org.apache.solr.schema.IndexSchema$SolrQueryAnalyzer.getAnalyzer(IndexSchema.java:408)
    at org.apache.solr.schema.IndexSchema$SolrIndexAnalyzer.reusableTokenStream(IndexSchema.java:383)
    at org.apache.lucene.queryParser.QueryParser.getFieldQuery(QueryParser.java:574)
    at org.apache.solr.search.SolrQueryParser.getFieldQuery(SolrQueryParser.java:206)
    at org.apache.lucene.queryParser.QueryParser.Term(QueryParser.java:1429)
    at org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:1317)
    at org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:1245)
    at org.apache.lucene.queryParser.QueryParser.TopLevelQuery(QueryParser.java:1234)
    at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:206)
    at org.apache.solr.search.LuceneQParser.parse(LuceneQParserPlugin.java:79)
    at org.apache.solr.search.QParser.getQuery(QParser.java:143)
    at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:105)
    at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:165)
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)
    at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:365)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:260)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1812)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

Sep 15, 2012 10:14:08 AM org.apache.solr.core.SolrCore execute
INFO: [core-live] webapp=/solr path=/select params={spellcheck=true&q=ac&?=&spellcheck.collate=true&rows=100000000} status=400 QTime=1 
Sep 15, 2012 10:14:10 AM org.apache.solr.common.SolrException log
SEVERE: org.apache.solr.common.SolrException: undefined field text
    at org.apache.solr.schema.IndexSchema.getDynamicFieldType(IndexSchema.java:1330)
    at org.apache.solr.schema.IndexSchema$SolrQueryAnalyzer.getAnalyzer(IndexSchema.java:408)
    at org.apache.solr.schema.IndexSchema$SolrIndexAnalyzer.reusableTokenStream(IndexSchema.java:383)
    at org.apache.lucene.queryParser.QueryParser.getFieldQuery(QueryParser.java:574)
    at org.apache.solr.search.SolrQueryParser.getFieldQuery(SolrQueryParser.java:206)
    at org.apache.lucene.queryParser.QueryParser.Term(QueryParser.java:1429)
    at org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:1317)
    at org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:1245)
    at org.apache.lucene.queryParser.QueryParser.TopLevelQuery(QueryParser.java:1234)
    at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:206)
    at org.apache.solr.search.LuceneQParser.parse(LuceneQParserPlugin.java:79)
    at org.apache.solr.search.QParser.getQuery(QParser.java:143)
    at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:105)
    at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:165)
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)
    at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:365)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:260)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1812)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

Sep 15, 2012 10:14:10 AM org.apache.solr.core.SolrCore execute
INFO: [core-live] webapp=/solr path=/select params={spellcheck=true&q=ac&?=&spellcheck.collate=true&rows=100000000} status=400 QTime=1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:50:54.333

`text`我相信您在配置中的某个位置定义了一个默认搜索字段。最有可能在`/select`请求处理程序中，如下所示。见`<str name="df">text</str>`条目。

```
<requestHandler name="/select" class="solr.SearchHandler">
  <!-- default values for query parameters can be specified, these
       will be overridden by parameters in the request
    -->
   <lst name="defaults">
     <str name="echoParams">explicit</str>
     <int name="rows">10</int>
     <str name="df">text</str>
   </lst>

   ....
</requestHandler> 
```

由于您没有`text`在 schema.xml 中定义名为的字段，这就是您看到此错误的原因。很可能，您以前没有看到此错误，因为您要么明确指定要搜索的字段，要么使用不同的请求处理程序。但是现在当您搜索拼写检查器时，它正在使用`/select`请求处理程序。

将条目更新`<str name="df">text</str>`为架构的有效默认字段或将其完全删除并指定要在查询中搜索的字段。Solr Wiki 中有关[df](http://wiki.apache.org/solr/SearchHandler#df)参数的更多信息。

# android - Android 配置 UI 表格视图

> ID：12425280
> 
> 赞同：1
> 
> 时间：2012-09-14T13:10:59.290
> 
> 标签：android

我已经从[这里](https://github.com/thiagolocatelli/android-uitableview)集成了 TableView 。该控件写得很好，除了它的 wrap_content 不起作用的问题。要么你必须硬编码它的高度，它需要父级的全部高度。有没有人处理过这个？

亲切的问候，

# android - ArrayAdapter、ListView、创建和更新内容

> ID：12425282
> 
> 赞同：1
> 
> 时间：2012-09-14T13:11:03.563
> 
> 标签：android, arraylist, android-listview, android-arrayadapter

我再次发布这个，试图让问题/问题更清楚：

```
ListView lv;
List<Item> items;
Localstorage ls;
RemoteStorage rs;
ItemArrayAdapter adapter;

...

getShoppingList();  // <--- this method populates the items ArrayList
adapter = new ItemArrayAdapter(getApplicationContext(), R.layout.item_listitem, 
                               items);  // <--- Create an ArrayAdapter and insert the 
                                        //      ArrayList...
lv.setAdapter(adapter); 
```

到目前为止的代码填充了 ArrayList 项目，创建了一个适配器并向其中添加项目，然后在 ListView lv 中显示它。到目前为止，一切都很好。

但是，getShoppingList() 方法会运行多次，更新 ArrayList 项。而不是每次发生这种情况时都重新创建适配器，我只想更新它并在 ListView lv 中显示更新的内容。

我正在尝试的是：

“更新”按钮的 OnClick 方法：

```
public void onClick(View v) {
    if (((Button)v).getText().equals("Update")) {
        try {
            tmpitems = rs.getNewEntries(cdate, latestitem);
            if (tmpitems.size() > 0) {
                updateFooter(tmpitems.size() + " new items found on server!");
                ls.UpdateLocalList(tmpitems);
                getShoppingList();               
                updateLatestItem(); 
                adapter.setNotifyOnChange(true);    //
                adapter.notifyDataSetChanged();     // THIS IS WHAT ISN'T WORKING
                lv.setAdapter(adapter);             //
            } else {
                updateFooter("No new items found on server.");
            }
        } catch (NullPointerException npe) {
            Log.e(DEBUG_TAG, "NPException i onClick(): " + npe.toString());
            updateFooter("No new items found on server.");
        } 
```

但是，用于更新适配器的行（在更新项目之后）绝对没有任何作用。我知道项目已更新，因为它也已写入文件，所以问题不存在。此外，如果我用重新创建适配器的行替换更新适配器的行，它会很好地工作。

更新（2012 年 9 月 16 日）：

```
private void getShoppingList () {
    items = ls.getShoppingList(SHOPPINGLIST_FILE, cdate);
} 
```

ls.getShoppingList() 方法：

```
public List<Item> getShoppingList (String filename, String date) {
    String next[] = {};
    List<Item> nlist = new ArrayList<Item>();

    try {
        InputStream in = ctx.openFileInput("shoppinglists.csv");
        InputStreamReader isr = new InputStreamReader(in);
        CSVReader reader = new CSVReader(isr);

        for(;;) {
            next = reader.readNext();
            if(next != null) {
                if (next[0].equals(date)) {
                    nlist.add(new Item(next[0], next[1], next[2], 
                    next[3], next[4], next[5]));
                }
            } else {
                break;
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
        Log.e(DEBUG_TAG, "IOException in List(): " + e.toString());
    }

    return nlist;
} 
```

---------- 原帖 ------------------

我有一个带有 ArrayAdapter 的 ListView lv，用于显示项目行。

```
List<Item> items;
ItemArrayAdapter adapter;
adapter = new ItemArrayAdapter(getApplicationContext(), R.layout.item_listitem, 
                               items);

lv.setAdapter(adapter); 
```

这很好用。items arraylist 被填充，适配器在 ListView 中显示内容。

但是，然后我做了一些更新 ArrayList 项目的事情。然后我想更新适配器和 ListView。但是这段代码，

```
adapter.setNotifyOnChange(true);
adapter.notifyDataSetChanged(); 
```

显然不这样做。那么，如何使用更新后的项 ArrayList 更新适配器和 ListView？无需重新初始化适配器，即？

编辑：

项目 ArrayList 因此更新：

```
if (((Button)v).getText().equals("Update")) {
    try {
        tmpitems = rs.getNewEntries(cdate, latestitem);
            if (tmpitems.size() > 0) {
                ls.UpdateLocalList(tmpitems);
                getShoppingList();
                refreshList();
           } else {
           updateFooter("No new items found on server.");
       }
    } catch (NullPointerException npe) {
        Log.e(DEBUG_TAG, "NPException i onClick(): " + npe.toString());
        updateFooter("No new items found on server.");
    }
}

refreshList() {
    adapter.setNotifyOnChange(true);
    adapter.notifyDataSetChanged();
} 
```

- 新项目被读入 tmpitems ArrayList。- 如果新项目的数量 > 0，则使用 tmpitems 更新本地文件。- 然后从本地文件更新项目 ArrayList（使用 getShoppingList() 方法，它添加新条目） - 然后我尝试运行 refreshList() 方法，该方法应该更新适配器，如上所述。

更新了 ArrayList 项，并更新了本地文件。这只是我无法工作的适配器上的更新方法。初始化适配器时，项目显示在 ListView 中 - 更新它时，新内容不显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:58:13.887

使用`((ItemArrayAdapter)lv.getAdapter()).notifyDataSetChanged()`代替`adapter.notifyDataSetChanged()`

**更新：** 事情是`notifyDataSetChanged()`只有当适配器*内*的数据发生变化时才有效，并且它会重新呈现列表。在您的情况下，您从*外部*更改数据，因此您必须更改适配器*内部的数据。*

您将需要替换适配器的`nlist.add(...)`和`insert()`方法：[官方参考](http://developer.android.com/reference/android/widget/ArrayAdapter.html#insert%28T,%20int%29)`remove()`

**关于它如何工作的一些说明：**当您初始化适配器时，它只是将您传递给它的 items 数组粘贴到它自己的数组中。它不再知道对您的 items 数组所做的更改。

# android - Jelly Bean 的 Android 兼容性测试套件 (CTS)：INSTALL_FAILED_DEXOPT

> ID：12425283
> 
> 赞同：1
> 
> 时间：2012-09-14T13:11:09.743
> 
> 标签：android, apk, android-source, cts

我正在尝试为 Jelly Bean 运行 Android 兼容性测试。我目前正在执行以下操作来构建我的 Android 源代码，然后构建 CTS：

```
cd "my-android-source-root"
source build/envsetup.sh
lunch 1
make
make cts 
```

然后我使用以下命令运行 C​​TS：

```
cts-tradefed 
```

到目前为止一切似乎都很好，然后我启动了我的模拟器，并看到它被我的 CTS 实例拾取。

不幸的是，当我尝试运行测试时，当测试尝试安装 .apk 包时出现错误。

```
run cts -p android.os 
```

这很快就会返回错误：

```
E/CtsTest: Failed to install CtsTestStubs.apk. Reason: INSTALL_FAILED_DEXOPT 
```

我是否错过了任何步骤或我做错了什么。如果有人有来自 AOSP 的有效 CTS，我将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-05T09:43:30.833

按确切顺序运行以下命令以解决此问题：

```
$cd "my-android-source-root"
$source build/envsetup.sh
$lunch 1
$export DISABLE_DEXPREOPT=true
$make -j cts showcommands dist TARGET_PRODUCT=full WITH_DEXPREOPT=false
$make cts 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T23:49:35.677

对我来说，我发现禁用 dexpreopt 会导致可安装的 apk 文件：

在运行“make cts”之前，请执行以下操作：

导出 DISABLE_DEXPREOPT=true

# mysql - 导入大型 sql 文件时 MySQL 服务器已消失

> ID：12425287
> 
> 赞同：288
> 
> 时间：2012-09-14T13:11:23.530
> 
> 标签：mysql, phpmyadmin

我试图通过 phpMyAdmin 导入一个大的 sql 文件...但它一直显示错误

> 'MySql 服务器已经消失'

该怎么办？

* * *

## 回答 #1

> 赞同：415
> 
> 时间：2012-09-14T13:25:16.083

[如此处](http://forums.oscommerce.com/topic/330387-2006-mysql-server-has-gone-away/)所述：

> MySQL 服务器消失（错误 2006）的两个最常见原因（和修复）是：
> 
> 服务器超时并关闭连接。怎么修：
> 
> 1.  检查 mysqld 的 my.cnf 配置文件中的 wait_timeout 变量是否足够大。在 Debian:`sudo nano /etc/mysql/my.cnf`上，设置`wait_timeout = 600`秒（当错误 2006 消失时，您可以调整/减小此值），然后`sudo /etc/init.d/mysql restart`. 我没有检查，但是 wait_timeout 的默认值可能在 28800 秒（8 小时）左右。
>     
>     
> 2.  服务器丢弃了不正确或太大的数据包。如果 mysqld 收到一个太大或不正确的数据包，它会假定客户端出现问题并关闭连接。您可以通过增加 my.cnf 文件中的 max_allowed_pa​​cket 的值来增加最大数据包大小限制。在 Debian:`sudo nano /etc/mysql/my.cnf`上，设置`max_allowed_packet = 64M`（当错误 2006 消失时，您可以调整/减小此值），然后`sudo /etc/init.d/mysql restart`.

**编辑：**

请注意，MySQL 选项文件没有它们的命令已经作为注释可用（例如在 php.ini 中）。因此，您必须在`my.cnf`或中键入任何更改/调整，`my.ini`并将它们放在`mysql/data`目录或任何其他路径中，在适当的选项组下，例如`[client]`,`[myslqd]`等。例如：

```
[mysqld]
wait_timeout = 600
max_allowed_packet = 64M 
```

然后重新启动服务器。要获取它们的值，请输入 mysql 客户端：

```
> select @@wait_timeout;
> select @@max_allowed_packet; 
```

* * *

## 回答 #2

> 赞同：107
> 
> 时间：2014-11-12T10:09:41.907

对我来说，这个解决方案没有奏效，所以我执行了

```
SET GLOBAL max_allowed_packet=1073741824; 
```

在我的 SQL 客户端中。

如果在运行 MYSql 服务时无法更改此设置，则应停止服务并更改“my.ini”文件中的变量。

例如：

```
max_allowed_packet=20M 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2015-09-30T09:42:14.307

**如果您正在使用 XAMPP，那么您可以通过以下更改修复 MySQL 服务器已消失的问题。**

打开你的 my.ini 文件 my.ini 位置是 (D:\xampp\mysql\bin\my.ini)

更改以下变量值

```
max_allowed_packet = 64M
innodb_lock_wait_timeout = 500 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-09-14T13:24:46.023

如果您使用默认值运行，那么您有很大的空间来优化您的 mysql 配置。

我建议的第一步是将 max_allowed_pa​​cket 增加到 128M。

然后下载[MySQL Tuning Primer 脚本](https://launchpad.net/mysql-tuning-primer)并运行它。它将为您的配置的多个方面提供建议，以获得更好的性能。

还要考虑在 MySQL 和 PHP 中调整你的超时值。

您要导入的文件有多大（文件大小），您是否能够使用 mysql 命令行客户端而不是 PHPMyAdmin 导入文件？

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-03-19T12:06:38.303

如果您在 OS X 上使用 MAMP，则需要更改`max_allowed_packet`MySQL 模板中的值。

1.  您可以在以下位置找到它：*文件 > 编辑模板 > MySQL my.cnf*

2.  然后只需搜索`max_allowed_packet`，更改值并保存。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-02-18T07:52:46.797

我用这个简短的 /etc/mysql/my.cnf 文件解决了我的问题：

```
[mysqld]
wait_timeout = 600
max_allowed_packet = 100M 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-06-18T19:09:33.503

当我以 16 GB 的 SQL 文件导入时，我遇到了这个错误和其他相关错误。对我来说，编辑 my.ini 并在 [mysqld] 部分设置以下内容（基于几个不同的帖子）：

```
max_allowed_packet      = 110M
innodb_buffer_pool_size=511M
innodb_log_file_size=500M
innodb_log_buffer_size = 800M
net_read_timeout        = 600
net_write_timeout       = 600 
```

如果您在 Windows 下运行，请转到控制面板、服务，然后查看 MySQL 的详细信息，您将看到 my.ini 的位置。然后在你编辑保存my.ini之后，重启mysql服务（或者重启电脑）。

如果您使用的是 HeidiSQL，您也可以使用它设置部分或全部这些。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-06-30T03:32:21.393

发生这种情况的另一个原因是内存不足。检查 /var/log/messages 并确保您的 my.cnf 未设置为导致 mysqld 分配比您的机器更多的内存。

您的 mysqld 进程实际上可以被内核杀死，然后在您没有意识到的情况下由“safe_mysqld”进程重新启动。

使用 top 并在它运行时观察内存分配，看看你的余量是多少。

在更改之前备份 my.cnf。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-06-13T06:10:15.860

我有同样的问题

```
$image_base64 = base64_encode(file_get_contents($_FILES['file']['tmp_name']) );
$image = 'data:image/jpeg;base64,'.$image_base64;
$query = "insert into images(image) values('".$image."')";
mysqli_query($con,$query); 
```

在 phpmyadmin 的 \xampp\mysql\bin\my.ini 文件中，我们只得到

```
[mysqldump]
max_allowed_packet=110M 
```

这仅适用于 mysqldump -u root -p dbname 。我通过替换上面的代码解决了我的问题

```
max_allowed_packet=110M
[mysqldump]
max_allowed_packet=110M 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-06-11T03:02:52.347

我将“max_allowed_pa​​cket”更新为 1024M，但仍然无法正常工作。原来我的部署脚本正在运行：

```
mysql --max_allowed_packet=512M --database=mydb -u root < .\db\db.sql 
```

如果您以这种方式进行操作，请务必从命令行明确指定更大的数字。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-12-28T00:04:12.557

**如果您的数据包含`BLOB`数据：**

请注意，从命令行导入数据似乎会阻塞 BLOB 数据，从而导致“MySQL 服务器已消失”错误。

为避免这种情况，请重新创建 mysqldump 但使用以下`--hex-blob`标志：

[http://dev.mysql.com/doc/refman/5.7/en/mysqldump.html#option_mysqldump_hex-blob](http://dev.mysql.com/doc/refman/5.7/en/mysqldump.html#option_mysqldump_hex-blob)

这将用十六进制值而不是其他文本中的二进制写出数据文件。

PhpMyAdmin 还具有“以十六进制表示法转储二进制列（例如，“abc”变为 0x616263）”的选项，效果很好。

请注意，存在一个长期存在的错误（截至 2015 年 12 月），这意味着`GEOM`未转换列： [Back up a table with a GEOMETRY column using mysqldump?](https://stackoverflow.com/questions/17480559/back-up-a-table-with-a-geometry-column-using-mysqldump) 所以使用像 PhpMyAdmin 这样的程序似乎是唯一的解决方法（上面提到的选项确实可以正确转换 GEOM 列）。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-07-14T18:59:31.917

如果需要很长时间才能失败，则扩大`wait_timeout`变量。

如果立即失败，则扩大`max_allowed_packet`变量；它仍然不起作用，请确保该命令是有效的 SQL。我的有未转义的报价，这把一切都搞砸了。

此外，如果可行，请考虑将单个 SQL 命令的插入次数限制为 1000 次。您可以创建一个脚本，通过在每 n 次插入时重新引入 INSERT... 部分来从单个语句中创建多个语句。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-08-27T13:36:42.777

我遇到了类似的错误..要解决这个问题，只需打开 my.ini 文件..在第 36 行更改最大允许数据包大小的值，即。max_allowed_pa​​cket = 20M

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-03-28T12:26:21.893

确保 mysqld 进程不会因为 systemd 等服务管理器而重新启动。

我在使用 centos 7 的 vagrant 中遇到了这个问题。配置调整没有帮助。原来是systemd每次占用太多内存时都会杀死mysqld服务。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-09-29T13:07:42.167

我今天在复制数据库时遇到了类似的错误（MySQL 服务器已经消失...），但是当我尝试重新启动 mysql.server restart 时出现错误

```
ERROR! The server quit without updating PID ... 
```

这就是我解决它的方法：我打开 Applications/Utilities/ 并运行 Activity Monitor

```
 quit mysqld 
```

然后能够解决错误问题

```
mysql.server restart 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-02-21T08:25:04.983

我正在做一些大型计算，其中涉及 mysql 连接以保持很长时间和大量数据。我正面临这个“Mysql go away issue”。所以我尝试优化查询，但这对我没有帮助，然后我增加了默认设置为较低值的 mysql 变量限制。

**wait_timeout max_allowed_pa​​cket**

最适合您的应该是任意数字 * 1024（字节）。**您可以使用“ mysql -u username -p** ”命令登录到终端，并可以检查和更改这些变量限制。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-02-06T03:04:02.910

## 对于 GoDaddy 共享主机

在 GoDaddy 共享主机帐户上，调整 PHP.ini 等文件很棘手。但是，还有另一种方法，它对我来说非常有效。（我刚刚成功上传了一个 3.8Mb 的 .sql 文本文件，包含 3100 行和 145 列。在 phpMyAdmin 中使用 IMPORT 命令，我得到了可怕的*MySQL server has gone away*错误，没有更多信息。）

我发现 Matt Butcher 的答案是正确的。像马特一样，我尝试了各种技巧，从以一口大小的块导出 MySQL 数据库，到编写将大型导入分解为较小导入的脚本。但这是有效的：

(1) CPANEL ---> FILES (group) ---> BACKUP

(2a) 在“部分备份”标题下...
(2b) 在“下载 MySQL 数据库备份”下
(2c) 选择您的数据库并下载备份（此步骤可选，但明智）

(3a) 直接在 2b 的右侧，在“恢复 MySQL 数据库备份”标题下
(3b) 从本地驱动器中选择 .SQL 导入文件
(3c) 真正的幸福将属于你（很快......）我的5秒

> 我能够使用此方法导入单个表。我的数据库中没有其他任何东西受到影响——但这就是上面的步骤 (2) 旨在防止的。

备注：
一。如果您不确定如何创建 .SQL 导入文件，请使用 phpMyAdmin 导出表并修改该文件结构。

资料来源： [Matt Butcher 2010 年文章](http://technosophos.com/2010/02/15/large-mysql-imports-godaddy-how-get-your-database-imported.html)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-07-19T23:03:30.833

### 如果增加`max_allowed_packet`没有帮助。

`.sql`通过 Sequel Pro 将文件导入我的数据库时，我遇到了与您相同的错误。

`max_allowed_packet`升级到后错误仍然存​​在，`512M`所以我在命令行中运行导入，而不是：

```
mysql --verbose -u root -p DatabaseName < MySQL.sql 
```

它给出了以下错误：

```
ASCII '\0' appeared in the statement, but this is not allowed unless option --binary-mode is enabled 
```

我发现了几个有用的 StackOverflow 问题：

*   [从 SQL 转储还原数据库时启用二进制模式](https://stackoverflow.com/questions/17158367/enable-binary-mode-while-restoring-a-database-from-an-sql-dump)
*   [Mysql ERROR: ASCII '\0' while importing sql file on linux server](https://stackoverflow.com/questions/38383975/mysql-error-ascii-0-while-importing-sql-file-on-linux-server)

就我而言，我的`.sql`文件有点损坏或什么的。我们得到的 MySQL 转储包含两个 zip 文件，需要将它们连接在一起然后解压缩。我认为解压缩最初被中断，使文件带有一些奇怪的字符和编码。获取一个新的 MySQL 转储并解压缩它对我有用。

只是想在这里添加它，以防其他人发现增加`max_allowed_packet`变量没有帮助。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-04-23T19:34:03.493

关于数据包大小或超时的解决方案都没有对我产生任何影响。我需要禁用 ssl

```
mysql -u -p -hmyhost.com --disable-ssl db < file.sql 
```

[https://dev.mysql.com/doc/refman/5.7/en/encrypted-connections.html](https://dev.mysql.com/doc/refman/5.7/en/encrypted-connections.html)

# c# - 服务从 wcfTestClient 工作，但在控制台应用程序中失败

> ID：12425288
> 
> 赞同：1
> 
> 时间：2012-09-14T13:11:26.537
> 
> 标签：c#, .net, wcf

我有服务。当我使用 wcfTestClient 进行测试时，该服务运行良好。当我从控制台应用程序客户端调用时，它会引发以下错误：

> 在 ServiceModel 客户端配置部分中找不到引用合同“ICalculationService”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。

服务跟踪：

> 说明：查找接收传入消息的通道失败。未找到端点或 SOAP 操作。来源：System.ServiceModel.Activation.HostedHttpTransportManager/28072850

可能的问题是什么？

参考：[没有频道可以接受带有动作的消息](https://stackoverflow.com/questions/8725353/there-was-no-channel-that-could-accept-the-message-with-action)

* * *

**服务配置**

```
<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior name="MyServiceTypeBehaviors" >
      <serviceMetadata httpGetEnabled="true" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_CalculationServiceInterface"
        closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00"
        sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false"
        hostNameComparisonMode="StrongWildcard" maxBufferSize="65536"
        maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
        messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
        useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
          maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
            realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<services>
  <service name="CalculationService.CalculationService" behaviorConfiguration="MyServiceTypeBehaviors">
    <endpoint address="CalculationService" behaviorConfiguration=""
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_CalculationServiceInterface"
        contract="ICalculationService" />
  </service>
  </services>
  </system.serviceModel> 
```

**客户端配置**

```
 <system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_CalculationServiceInterface"
                closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00"
                sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false"
                hostNameComparisonMode="StrongWildcard" maxBufferSize="65536"
                maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="true">
                <readerQuotas maxDepth="524288" maxStringContentLength="524288" maxArrayLength="524288"
                    maxBytesPerRead="524288" maxNameTableCharCount="524288" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost:2724/CalculationService.svc/CalculationService" binding="basicHttpBinding"
            bindingConfiguration="BasicHttpBinding_CalculationServiceInterface"
            contract="ICalculationService" name="CalculationServicePort" />
    </client>
    </system.serviceModel> 
```

**WSDL**

```
 <definitions xmlns:import0="urn:lijo:demos:multiplyservice:messages:v1" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:import1="urn:lijo:demos:multiplyservice:data:v1" xmlns:tns="urn:lijo:demos:multiplyservice:calculation:v1" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" name="CalculationService" targetNamespace="urn:lijo:demos:multiplyservice:calculation:v1" xmlns="http://schemas.xmlsoap.org/wsdl/">
  <wsdl:documentation xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" />

  <types>
  <xsd:schema>
  <xsd:import schemaLocation="C:\toolbox\LijosServiceApp\NewService\RestaurantMessages.xsd" namespace="urn:lijo:demos:multiplyservice:messages:v1" />
  <xsd:import schemaLocation="C:\toolbox\LijosServiceApp\NewService\RestaurantData.xsd" namespace="urn:lijo:demos:multiplyservice:data:v1" />
  </xsd:schema>
  </types>

  <message name="getMultiplied">
  <wsdl:documentation xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" />
  <part name="parameters" element="import0:getMultiplied" />
  </message>

  <message name="getMultipliedResponse">
  <wsdl:documentation xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" />
  <part name="parameters" element="import0:getMultipliedResponse" />
  </message>

  <portType name="CalculationServiceInterface">
  <wsdl:documentation xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" />

  <operation name="getMultiplied">
  <wsdl:documentation xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" />
  <input message="tns:getMultiplied" />
  <output message="tns:getMultipliedResponse" />
  </operation>

  </portType>

  <binding name="BasicHttpBinding_CalculationServiceInterface" type="tns:CalculationServiceInterface">
  <soap:binding transport="http://schemas.xmlsoap.org/soap/http" />
  <operation name="getMultiplied">
  <soap:operation soapAction="urn:lijo:demos:multiplyservice:calculation:v1:getMultiplied" style="document" />
  <input>
    <soap:body use="literal" />
  </input>
  <output>
    <soap:body use="literal" />
  </output>
  </operation>
  </binding>
  <service name="CalculationServicePort">
  <port name="CalculationServicePort" binding="tns:BasicHttpBinding_CalculationServiceInterface">
  <soap:address location="http://localhost/CalculationService" />
  </port>
  </service>
  </definitions> 
```

XSD 文件：

所需的 XSD 可以在[一个 WCF 服务 - 两个客户端中找到；一个客户端不工作](https://stackoverflow.com/questions/12420314/one-wcf-service-two-clients-one-client-does-not-work)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:30:51.707

让我承认这是我的一个错误。我将客户端配置保存在 output.config 文件中（由 WCSF Blue 工具生成）。当我将它复制到 app.config 时，它运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:15:38.537

您的问题可能在您的客户端配置中。

```
<endpoint address="http://localhost:2724/CalculationService.svc/CalculationService" 
```

您是否已将本地 IIS 配置为在端口**2724**托管服务？

首先仔细检查一下。

**编辑：**如果您正在使用 Visual Studio 进行测试，[请参阅本文](http://codeblitz.wordpress.com/2009/05/27/tip-use-specific-port-when-hosting-wcf-service-in-cassini-web-server/)以获取有关配置特定端口号的建议。

# c# - 获取最近的 javascript 警报的文本

> ID：12425289
> 
> 赞同：-3
> 
> 时间：2012-09-14T13:11:28.667
> 
> 标签：c#, javascript, text, alert, mshtml

我正在使用 mshtml 编写一个 IE 扩展。有没有办法从显示给用户的最近警报中获取文本（通过 C# 或 javascript）？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:50:05.753

如果您可以在您的网站中劫持/注入/执行任何 JS，您可以用自定义的方法覆盖 alert 方法，该方法调用内部的原始方法 :) 像这样：

```
// let's save the alert first
var _super_original_alert = window.alert;
// and now we overwrite it
window.alert = function(s){
  // do something with the received string
  // i will just log it, but you might want to send the string via
  // ajax/jsonp to a remote server
  console.log(s)

  // call the original intended alert
  _super_original_alert(s)
} 
```

这不是很好，但可以做到这一点。

# html - 如何从选择选项值中获取 .load 函数中的变量？

> ID：12425291
> 
> 赞同：0
> 
> 时间：2012-09-14T13:11:34.823
> 
> 标签：html, function, html-select

我需要从选择选项中获取一个值并将其传递给一个`load`函数。

```
function example_ajax_request2() {
    $('#example-placeholder').html('<p><img src="LINK_TO_IMAGE" width="220" height="19" /></p>');
    $('#example-placeholder').load("LINK_TO_HTML_FILE $('select#example1').val();");
} 
```

这是我的选择器：

```
<select id="example1" class="selectorM" size="4">
    <option value="#video1" onclick="example_ajax_request2()">1</option>
    <option value="#video2" onclick="example_ajax_request2()">2</option>
</select> 
```

这里将加载视频：

```
<div id="example-placeholder">
    <p>Placeholding text</p>
</div> 
```

为什么这不起作用？
我需要将 #video1 或 #video2 的值传递给 .load 函数

我尝试使用此代码获取 select example1 值

```
$('select#example1').val(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:21:20.610

正确答案！

```
"LINK_TO_HTML_FILE " + $('select#example1').val(); 
```

安装的

```
"LINK_TO_HTML_FILE" + $('select#example1').val(); 
```

不管怎么说，还是要谢谢你！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:12:52.967

> `""LINK_TO_HTML_FILE $('select#example1').val();"`

这是包含实际文本的文字字符串`$('select#example1').val();`。
您需要使用串联：

```
"LINK_TO_HTML_FILE" + $('select#example1').val(); 
```

# objective-c - 如何区分 NSData 对象中的内容类型？

> ID：12425292
> 
> 赞同：0
> 
> 时间：2012-09-14T13:11:39.893
> 
> 标签：objective-c

我有一个 NSData 对象，我想区分它有 JSON 字符串还是 UIImage 或 zip 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:33:58.720

如果这是您必须经常在代码中检查的内容，您可以继续进行自己的 NSData 实现。

```
static NSString *const MyJSONDataType = @"JSONDataType";
static NSString *const MyUIImageDataType = @"MyUIImageDataType";
// and so on...

@interface MyData : NSData
@property (strong, nonatomic) NSString* contentType;
@end

@implementation MyData
@synthesize contentType;
@end 
```

您还可以添加适当的初始化方法来动态指定 contentType。

# php - 使用 imagejpeg 将图像写入数据库

> ID：12425296
> 
> 赞同：0
> 
> 时间：2012-09-14T13:11:46.400
> 
> 标签：php, image, gd

基本上我要做的就是将图像写入数据库。

据我了解 imagejpeg 函数 - 如果“字符串 $filename”未设置或为 NULL，则输出应该是纯图像数据。但事实并非如此，唯一的输出是“1”（真）......

如何在不先将图像存储在文件系统中并重新加载的情况下获取图像数据？

这是我的代码示例：

```
// If it is the right filetype.
if ($_FILES[$dom_element]['type'] == 'image/jpeg' || $_FILES[$dom_element]['type'] == 'image/pjpeg') {

    // Create the image recource.
    $image_image = imagecreatefromjpeg($_FILES[$dom_element]['tmp_name']);
}

// Resize the image.
imagecopyresampled($image_image_p, $image_image, 0, 0, 0, 0, $image_new_width, $image_new_height, $image_width, $image_height);

// Write the image in the database (does not work this way -> output = "1")
mysql_select_db("$db_announcement");
$sql = "UPDATE announcement
SET announcement_guest_image_data = '" . addslashes(imagejpeg($image_image_p, NULL, $settings_image_quality)) . "',
announcement_guest_image_exists = 'yes'
WHERE announcement_timestamp = '$timestamp' AND announcement_guest_mail = '$global_mail'";
$sql = mysql_query($sql);

// Delete the image recources.
imagedestroy($image_image);
imagedestroy($image_image_p); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:16:57.243

文档说明了`$filename`参数：

> 如果不设置或为NULL，将直接***输出***原始图像流。

关于*返回值*：

> 成功时返回 TRUE，失败时返回 FALSE。

该函数将图像输出到标准输出。它没有*`return`*。

您可以像这样从标准输出中捕获它：

```
ob_start();
imagejpeg(...);
$imageData = ob_get_clean(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:36:09.233

我强烈建议您避免在数据库中存储二进制数据，例如图像。您可以简单地在表格上记录所有内容，包括图像名称、创建日期等，然后将该文件放入文件系统中。

我知道这不是您要寻找的答案，但我认为它可能会有所帮助。

# php - Doctrine2 试图将 DateTime("now") 插入 mysql datetime 列

> ID：12425297
> 
> 赞同：2
> 
> 时间：2012-09-14T13:11:54.620
> 
> 标签：php, doctrine-orm

我正在尝试使用以下代码在 mysql datetime 列中插入日期时间，但它没有被插入。而 isDelete 工作正常。

```
/*
 * 
 * @ORM\Column (type="datetime")
 */
protected $created;   

 /** 
 * @ORM\PrePersist
 */
public function prePersist(){
    $this->created = new \DateTime("now"); 
    $this->isDelete = 0;        
} 
```

生成的架构：

```
+-----------+------------+------+-----+---------+----------------+
| Field     | Type       | Null | Key | Default | Extra          |
+-----------+------------+------+-----+---------+----------------+
| id        | int(11)    | NO   | PRI |         | auto_increment |
| isDeleted | tinyint(4) | YES  |     | 0       |                |
| created   | datetime   | YES  |     |         |                |
+-----------+------------+------+-----+---------+----------------+ 
```

任何想法？

[参考](https://stackoverflow.com/questions/6097107/doctrine-2-0-one-to-many-many-to-one)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T15:33:12.810

您在上面的属性`*`之后缺少 a ，因此它不是 docblock 注释，并且 ergo 不会被解析为注释。因此，该领域没有被 Doctrine 认可。`/*``protected $created`

它应该是：

```
/**
 * 
 * @ORM\Column (type="datetime")
 */
protected $created; 
```

修复此问题后，运行 Doctrine 架构更新工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T16:55:12.327

你有没有`* @ORM\HasLifecycleCallbacks()`在你的班上名列前茅？

可能删除似乎有效，但您只能看到整数字段的默认值 (0)

# jquery - 使用带有 jquery 的 ajax 检查 Twitter 用户名是否存在

> ID：12425302
> 
> 赞同：0
> 
> 时间：2012-09-14T13:12:22.453
> 
> 标签：jquery, ajax, twitter

我正在编写一段代码，使用 jQuery 和 Ajax 检查您在文本框中输入的内容是否是有效的用户名，然后查看该页面是否存在 - [http://api.twitter.com/1/users/显示/值.xml](http://api.twitter.com/1/users/show/value.xml) - 如果它不存在，我会写一些类似“这个 twitter 帐户不存在”的东西。

这是代码：

```
function checkname (name) {
 $.ajax({
 url: "http://api.twitter.com/1/users/show/" + name + ".xml",
 statusCode: {
 404: function() {
 $("#divOfInterest").html("Sorry, " + name + " is not a valid twitter account");}
 }
 });
} 
```

但它不起作用，我真的不知道为什么，这是我的[小提琴](http://jsfiddle.net/Scanu/Mx4PS/)，所以你可以看到自己。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:16:20.593

查看错误控制台，例如在 Chrome 中：

```
XMLHttpRequest cannot load http://api.twitter.com/1/users/show/dummy.xml. Origin http://fiddle.jshell.net is not allowed by Access-Control-Allow-Origin. 
```

但是，您可以在您的服务器上构建一个包装脚本并尝试从那里调用 Twitter API 并在您的 AJAX 调用中使用您的脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:23:39.523

您可以在您的服务器上创建一个 php 页面，并使用他们的方法向 api 发出请求。

[https://dev.twitter.com/docs/api/1/get/users/lookup](https://dev.twitter.com/docs/api/1/get/users/lookup)

**PHP页面：（check.php）**

```
if (isset($_POST['name'])) {
    $url = "https://api.twitter.com/1/users/lookup.json?screen_name=" . $_POST['name'];
    $content = @file_get_contents($url);

    if (($json_data = json_decode($content, 1)) == NULL) {
        echo 0;
    } else {
        //print_r($json_data);
        if (!empty($json_data[0]['screen_name'])) {
            // user exists
            echo 1;
        }   
    }

    exit;
} 
```

**然后从ajax调用它**

```
<script type="text/javascript">
var dataString = 'name=<?php echo $_GET['name'];?>';
$.ajax({
    type: "POST",
    url: "check.php",
    data: dataString,
    cache: false,
    datatype: 'html',
    success: function(data){
    if (data == '1') {
        alert('user exists');
    } else {
        alert('user does not exist');
    }
    //alert(result);    
    }
});
</script> 
```

**要向同一页面发出请求，请以这种方式修改它。**

将 php 脚本放在文档顶部，然后放在其他所有内容之前。

```
if (isset($_POST['ajax']) && isset($_POST['name'])) {

    PHP code

    exit; // <---- this is very important
} 
```

在 javascript 添加新变量`ajax=1`

```
var dataString = 'name=<?php echo $_GET['name'];?>&ajax=1'; 
```

和网址

```
url: "currentpage.php", 
```

# javascript - Stack Overflow 如何在不重新加载页面的情况下通知服务器端事件？我在 Firebug 中没有看到任何请求

> ID：12425304
> 
> 赞同：18
> 
> 时间：2012-09-14T13:12:24.917
> 
> 标签：javascript, html, ajax, http, web

Stack Overflow 如何在不重新加载页面的情况下显示答案添加/编辑的消息？

![在此处输入图像描述](../Images/2f6cc330d5f5eaa26e7333f08aecba89.png)

是的，我知道 Ajax 会发生这种情况。所以我在浏览器中打开了 Firebug 来检查它，看看是否有任何请求在特定的时间间隔内到来。但我没有看到 Firebug 中有任何请求。

我们可以在不显示在 Firebug 中的情况下执行请求吗？这背后是否还有其他想法，或者我的概念完全错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-14T13:40:38.870

它似乎正在使用 HTML 5 [Web Sockets](http://www.w3.org/TR/websockets/)。它们基本上保持服务器和客户端之间的开放连接，除此之外，还允许客户端定义事件处理程序以在从服务器接收到新数据时对其进行处理。

在这里，您将找到一些有关 WebSockets 的基本示例和概念：WebSockets[简介：将套接字引入网络](http://www.html5rocks.com/en/tutorials/websockets/basics/)。

> WebSocket 规范定义了一个在 Web 浏览器和服务器之间建立“套接字”连接的 API。简单来说：客户端和服务器之间存在持久连接，双方可以随时开始发送数据。

还有一个带有服务器和客户端[源代码的](http://github.com/remy/html5demos/tree/master/server/)[现场演示](http://html5demos.com/web-socket)。

您可能还会发现以下问题很有用：[实时更新如何工作？](https://stackoverflow.com/q/10808924/851811)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T14:12:00.210

添加到[Xavi 的答案](https://stackoverflow.com/a/12425783/105570)中，如果您想在不必了解所有内部结构的情况下开始使用 Web 套接字，您可以尝试[Pusher](http://pusher.com/)，这是一个适用于多个平台（包括 PHP）的库，它使 Web 上的推送通知非常简单。

我不为 Pusher 工作；这只是我过去发现非常有用的产品。我一直将免费版本用于小型个人项目，但如果我曾经在更大的应用程序上使用它，我可能会付费。

# iphone - 在低于 5.1.1 的 ios 版本的 iphone 应用中播放 youtube 视频？

> ID：12425307
> 
> 赞同：4
> 
> 时间：2012-09-14T13:12:29.813
> 
> 标签：iphone, webview, youtube

我想使用 youtube 视频 url 播放 youtube 视频。

我在 iOS 5.1.1 版本中成功播放了视频，但在 iOS 5.0.1 和 4.0 或更低版本中无法播放视频。我正在使用 webview 播放视频。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:44:25.123

对于低于 5 的 IOS，您需要使用 iframe ：

```
NSString *youTubeVideoHTML = @"<iframe id=\"yt\"    class=\"youtube-player\" type=\"text/html\" width=\"280\" height=\"186\" src=\"http://www.youtube.com/embed/xxxxxx\" frameborder=\"0\">";
and for ios 5 above we can use embed :  
   NSString *youTubeVideoHTML = @"<html><head>\
    <body style=\"margin:0\">\
    <embed id=\"yt\" src=\"http://www.youtube.com/watch?v=xxxxxx?autoplay=1\" type=\"application/x-shockwave-flash\" \
    width=\"%0.0f\" height=\"%0.0f\"></embed>\
    </body></html>"; 
```

注意：在 IOS 6 中，我发现 url 仅在我们将 youtube url 传递为：[http ://www.youtube.com/v/xxxxxx?autoplay=1 时才有效](http://www.youtube.com/v/xxxxxx?autoplay=1)

希望这行得通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T10:40:55.697

从您的评论看来，您使用了错误的嵌入代码，youtube 嵌入现在看起来像

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/Cw2RzvK13F4" frameborder="0" allowfullscreen></iframe> 
```

如前所述，flash 不会在 iPhone 上播放，所以它需要使用 HTML5 版本，不幸的是我不认为 100% 的 youtube 视频已经转换，但大多数应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T16:29:31.693

您需要确保为嵌入式视频使用正确的 URL 格式。他们最近有所改变。

[Youtube 嵌入式播放器和播放器参数 - YouTube - Google Developers](https://developers.google.com/youtube/player_parameters)

它看起来像这样：

```
http://www.youtube.com/embed/VIDEO_ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T16:48:44.800

这是我的代码，它在所有以前的 iOS 5 版本中都运行良好。试试这个代码。我相信这将解决您的问题。

```
// Over here Just replace this url with your one's.
NSString *pdfString = @"http://www.youtube.com/watch?v=qe39vPFabuA";

NSString *htmlString = @"<html><head>\n"
"<meta name = \"viewport\" content = \"initial-scale = 1.0, user-scalable = no, width = 320\"/></head>\n"
"<body style=\"background:FFF;margin-top:0px;margin-left:0px\">\n"
"<div><object width=\"320\" height=\"416\">\n"
"<param name=\"movie\" value=\"%@\"></param>\n"
"<param name=\"wmode\" value=\"transparent\"></param>\n"
"<embed src=\"%@\"\n"
"type=\"application/x-shockwave-flash\" wmode=\"transparent\" width=\"320\" height=\"416\"></embed>\n"
"</object></div></body></html>\n";

[webView loadHTMLString:[NSString stringWithFormat:htmlString,[pdfString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]],[pdfString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]] baseURL:nil]; 
```

此外，**请确保仅在 Device 中测试代码**。在模拟器上测试不会播放视频。

# windows - Windows 脚本 - 编辑文本文件

> ID：12425322
> 
> 赞同：0
> 
> 时间：2012-09-14T13:13:24.997
> 
> 标签：windows, scripting, batch-file, cmd

***C:\传入\records.txt***

```
11 record(s) received

5021462426325

5021462426325

5021462426325

5021462426325

5021462426325

8901090213511

8901090213511

8901090213511

8901090213511

0080432400708

0080432400708 
```

文件内容的所需格式

```
5021462426325,5021462426325,5021462426325,5021462426325,5021462426325,8901090213511,8901090213511,8901090213511,8901090213511,0080432400708,0080432400708 
```

然后将其复制`C:\Incoming`到`C:\Outgoing`并将旧文件放入`C:\Stored`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:44:15.627

```
for /f "tokens=* skip=1" %%i in (C:\Incoming\records.txt) do echo|set /p="%%i,">>C:\Outgoing\records.txt
move C:\Incoming\records.txt C:\Stored\records.txt 
```

# javascript - 带有提交操作的jquery自动完成

> ID：12425323
> 
> 赞同：-1
> 
> 时间：2012-09-14T13:13:25.577
> 
> 标签：javascript, jquery, jquery-ui, autocomplete

我有一个带有一个输入自动完成的表单，我只会发送操作，用户在我的输入中选择一行。我已经写了这段代码，但没有工作提交。

```
<script type="text/javascript">
 $(document).ready(function(){
     $("#q").autocomplete({
    source: "tagSearch.php",
    minLength: 2,
    delay: 0,
    select: function(event, ui) { 
            $("#q").val(ui.item.label);

    $('#my-form').submit(function() {
        if($("#q").val() == "" || $("#q").val() == "no result" ){
           alert("Message Cannot be empty");
           return false;
        }
            return true;
    });

    }
  });                   
});     

<form id="my-form" action="search.php" method="GET">
    <input name="q" id="q" />
    <input type="submit" name="GO" value="GO" />        
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T13:18:58.297

您没有调用`submit`您的 select 方法，而是将处理程序附加到表单。试试这个

```
$(document).ready(function(){
    $("#q").autocomplete({
        source: "tagSearch.php",
        minLength: 2,
        delay: 0,
        select: function(event, ui) { 
            $("#q").val(ui.item.label);
            $('#my-form').submit();
    });

    $('#my-form').submit(function() {
        if($("#q").val() == "" || $("#q").val() == "Nessun risultato" ){
           alert("Message Cannot be empty");
           return false;
        }
        return true;
    });
}); 
```

我将提交处理程序移到了 select 方法之外。现在，在 select 中，只需调用 submit 并执行正确的处理程序

```
$('#my-form').submit(); 
```

# java - 如何在浏览器退出时终止 javafx 应用程序

> ID：12425324
> 
> 赞同：0
> 
> 时间：2012-09-14T13:13:28.087
> 
> 标签：java, process, browser, javafx

您好，我在 JavaFX 应用程序中遇到了一个小问题，当所有浏览器窗口都关闭时终止 Java 进程。我试图处理 Stage.setOnHiding 或 .setOnCloseRequest 并终止所有正在运行的线程并在处理程序主体中执行 Platform.exit ，但没有运气。首先，当我关闭浏览器时，不会调用任何处理程序 setOnHiding 和 setOnCloseRequest。同样设置 Platform.setImplicitExit(true) 不会导致 java 进程在浏览器关闭时终止 - 这仅在有时有效。某事可以防止 javafx 进程在 Web 浏览器关闭后被杀死。我怎样才能检测到什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:08:36.017

对我来说，浏览器中托管的 JavaFX 应用程序总是在浏览器关闭时自动终止。

您应该实现[Application.stop()](http://docs.oracle.com/javafx/2/api/javafx/application/Application.html#stop%28%29)来检测应用程序关闭事件。

阶段级方法 setOnCloseRequest 和 setOnHiding 不是检测应用程序级关闭事件的正确方法。

# titanium-mobile - 钛聊天实现

> ID：12425327
> 
> 赞同：2
> 
> 时间：2012-09-14T13:13:39.070
> 
> 标签：titanium-mobile

我的任务是实现一个基于聊天的应用程序，以使用 Web 服务 api 调用访问服务器上可用的私有数据。显示来自 Web 服务器的所有可用用户并与这些人聊天。钛开发不可能支持 iPhone/Android聊天应用程序。如果可能的话，让我指导实施相同的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:29:56.177

是的，当然有可能。有一百万种方法可以做到这一点，你的问题不是很清楚。

如果它完全基于 Web 服务，[那么就使用它。](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.Network.HTTPClient)

下面是发布到 Web 服务并发送 JSON 对象的快速示例：

```
 var getChatMessages = Ti.Network.createHTTPClient({
        onload : function(e) {
             var doSomethignWithThis = this.responseText;
        },
        onerror : function(e) {
            Ti.API.info(this.responseText);
            Ti.API.info('SelectActivityStepsByKeyList webservice failed with message : ' + e.error);
        }
    });
    getChatMessages.open('POST', 'http://yourchatserver/GetChats');
    getChatMessages.setRequestHeader("Content-Type", "application/json");
    getChatMessages.send({"message" : "How is everyone today?", "user" : "me@me.com}); 
```

这对钛来说并不难，难的部分在服务器端。 [这是一个通过使用 socket.io 库完成聊天的示例项目。](http://roguesynaptics.com/post/7056128461/chatsocks)这对您来说可能是更好的方法。该链接包含有关其工作原理的视频以及完整的源代码。

# android - android xml解析器问题

> ID：12425330
> 
> 赞同：-1
> 
> 时间：2012-09-14T13:13:45.633
> 
> 标签：android, xml-parsing

我正在尝试解析以下 xml 数据，但我没有使用 dom 解析器获取案例内容请告诉我我该怎么做。提前致谢。xml数据

```
<result>
<options id="1">
<question>who will win</question>
<case text="A" total="23" vote="17" percent="73.91"/>
<case text="B" total="23" vote="3" percent="13.04"/>
<case text="c" total="23" vote="1" percent="4.35"/>
<case text="d" total="23" vote="2" percent="8.7"/>
</options>
</result> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:18:14.667

请参阅下面我对使用 DOM Parser 进行 XML 解析的答案的 SO 链接。

[DOM 解析示例](https://stackoverflow.com/questions/12313488/reading-xml-response-in-android/12313676#12313676)

# c# - 每个文件或文件夹中的唯一信息 NTFS

> ID：12425331
> 
> 赞同：1
> 
> 时间：2012-09-14T13:13:46.153
> 
> 标签：c#, .net, file-io, uniqueidentifier, ntfs

我正在做一个项目，我需要从服务器填充一些文件并将它们显示在网络浏览器中给用户。允许用户对文件执行基本 CRUD 操作的地方问题是我无法指定文件/文件夹的名称，`unique id`以防用户删除/重命名文件，我应该能够稍后识别文件。

我的问题是，任何文件/文件夹有什么独特之处，`NTFS`它们是独一无二的并且可以使用吗？以及如何使用`.NET c#`.

遇到了[BY_HANDLE_FILE_INFORMATION 结构](http://msdn.microsoft.com/en-us/library/aa363788%28VS.85%29.aspx) ，但它可能需要我`pinvoke`。

**更新 1** - 尝试查看使用 nFileIndexHigh 和 nFileIndexLow 的可行性，但他们需要我做一个 pinvoke 并且当他们提到文件夹时，这种方法不能用于文件夹一个链接[唯一文件夹标识符](https://stackoverflow.com/questions/10132686/unique-folder-identifier)告诉我这是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:09:56.223

我认为[FILE_INTERNAL_INFORMATION](http://msdn.microsoft.com/en-us/library/ff540318.aspx)结构，用于查询文件系统的 8 字节文件参考号，是您所需要的。`IndexNumber`是唯一标识文件的数字。您应该使用 P/invoke 来查询此信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:17:50.243

忽略您似乎不想 P/Invoke 其他方法的事实可能是使用[Windows Shell](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773177%28v=vs.85%29.aspx) API。此 API 具有[PIDL](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144089%28v=vs.85%29.aspx#ID_Lists_PIDL)的概念，它标识外壳命名空间中的文件夹（或“类似”项）。即使用户重命名文件夹，PIDL 也不会更改。缺点是Shell API 暴露了您在Windows 资源管理器中看到的内容，例如`Desktop`位于层次结构的根部，即使它在物理上是磁盘上某处的子文件夹。

# entity-framework-4 - 在多个项目中共享相同（.edmx 模型）

> ID：12425336
> 
> 赞同：1
> 
> 时间：2012-09-14T13:14:19.500
> 
> 标签：entity-framework-4, ado.net, model, entity, data-sharing

我在我的一个 ASP.NET 示例项目中创建了一个数据库并在 edmx/model 中转换了它。现在我正在创建另一个项目，我想在其中使用相同的 .edmx/model。我尝试在第二个项目中复制 edmx 模型，然后添加（添加现有项目），但 .edmx 文件未显示在选项中，但我得到了 Designer.cs。我在这里遗漏了什么吗？是否可以在多个项目中使用相同的 .edmx？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:34:17.073

您应该简单地放置您的 edmx 模型和所有生成的类来分离程序集并共享程序集。

*如果您在“添加现有项目*”对话框中没有看到 .EDMX，请确保您没有启用代码文件过滤器。您需要显示所有文件或数据文件才能看到 .EDMX 文件。

# c++ - c ++简单程序不起作用

> ID：12425337
> 
> 赞同：0
> 
> 时间：2012-09-14T13:14:21.470
> 
> 标签：c++

这是我的程序不工作的代码。这个程序必须计算第二个数字的第一个数字的结果。问题出在哪里？

```
#include <iostream>
    int main()
    {
        std::cout << "iveskite betkoki skaiciu" << std::endl;
        // "enter number:"
        int v1;
        std::cin >> v1;
        std::cout << "iveskite skaiciu kiek kartu jus norit pakelti pirmaji skaiciu" << std::endl;
        // "Enter the number of times you want to raise the first number"
        int v2;
        std::cin >> v2;
        int rez;
        // result
        for (int cnt = 0; cnt != v2; ++cnt)
            rez *= v1;  //  rez = rez * v1;
        std::cout << v1
                  << " pakeltas "
                  << v2 << " kartu ,yra: /t"
                  << rez << std::endl;
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T13:15:46.383

您没有初始化`rez`，因此行为未定义。

你应该有`int rez = 1;`和治疗的情况`v1 == 0`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T13:15:43.577

你没有初始化`rez`；C++ 不会为您这样做，`rez`很可能仍会包含一些随机数，因此您的程序很可能会输出一个随机数（但实际上它是未定义的行为）；您应该将其初始化为 1，例如

```
int rez = 1; 
```

或者，在您的简单情况下，您可以使用`v1`' 值对其进行初始化：

```
int rez = v1; 
```

# silverlight - ListPicker 内的按钮

> ID：12425341
> 
> 赞同：4
> 
> 时间：2012-09-14T13:14:31.853
> 
> 标签：silverlight, windows-phone-7, toolkit

我有 ListPicker，其中每个项目都是乐器。只能同时选择一项。在乐器名称旁边的每个项目中，还有一个播放预览样本的按钮。

ListPicker 模板：

```
<DataTemplate x:Name="ListFullModeItemTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <c4f:RoundButton Grid.Column="0" Tag="{Binding Id}" ImageSource="/Content/AppBarIcons/play.png" Click="instrumentPreview_Click" />
            <TextBlock Grid.Column="1" toolkit:TiltEffect.IsTiltEnabled="True" Text="{Binding Name}" VerticalAlignment="Center" FontSize="35"/>
        </Grid>
</DataTemplate> 
```

不幸的是，单击按钮会自动关闭 ListPicker 对话框，这不是我想要的。我考虑过将 instrumentPreview_Click 事件标记为已处理，但 RoutedEventArgs 在 WP7 中没有这样的属性（与 WPF 不同）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T13:58:28.647

`Click`使用事件而不是`Tap`事件：您将获得一个带有[Handled](http://msdn.microsoft.com/en-us/library/system.windows.input.gestureeventargs.handled%28v=vs.95%29.aspx)属性的[GestureEventArgs](http://msdn.microsoft.com/en-us/library/system.windows.input.gestureeventargs%28v=vs.95%29.aspx)实例，您可以将其设置为!`true`

# c# - process.startinfo.RedirectStandardOutput 给出异常并且 process.waitforexit() 挂起 C# 应用程序

> ID：12425343
> 
> 赞同：0
> 
> 时间：2012-09-14T13:14:40.503
> 
> 标签：c#, process, processstartinfo, waitforexit

使用进程我在使用 process.StartInfo.RedirectStandardOutput = true 时遇到异常；例外情况在“StandardOut 尚未重定向或进程尚未开始”下方。

我正在使用 process.WaitForExit 挂起我的应用程序 gui 所以我使用了 process.StandardOutput.ReadToEnd(); 根据 MSDN，在 WaitForExit 之前，但现在我的进程运行了无限时间，并在日志文件中给出了上述异常，并且 GUI 也挂起。

```
 Process process = new Process();
                process.StartInfo.WorkingDirectory = Path.GetDirectoryName(Application.ExecutablePath);

                string strArguments = ""; 

                process.StartInfo.FileName = @"appname.bat";
                process.StartInfo.Arguments = strArguments;
                process.StartInfo.CreateNoWindow = true;
                process.StartInfo.UseShellExecute = false;
                process.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
                process.StartInfo.RedirectStandardOutput = true;
                process.StartInfo.RedirectStandardError = true;

                process.Start();

                string output = process.StandardOutput.ReadToEnd();
                process.WaitForExit();
                process.Close(); 
```

我没有得到我缺少的地方或代码中的错误在哪里......即使我也尝试过在 waitforexit 中超时但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:40:45.257

尝试这个

```
 process.StartInfo.RedirectStandardOutput = true;
    process.OutputDataReceived += (sender, args) => Console.WriteLine("received output: {0}", args.Data);
    process.Start();
    process.BeginOutputReadLine(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T07:13:33.457

进程.WaitForExit(); 字符串输出 = process.StandardOutput.ReadToEnd();

你应该试试这个。更改代码顺序。

# asp.net-mvc - ASP.NET MVC Actionlink 返回空链接

> ID：12425350
> 
> 赞同：1
> 
> 时间：2012-09-14T13:14:59.267
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, actionlink

我遇到了这个问题，已经搜索了 Google 和 StackOverflow，但似乎找不到解决方案。

我在 Global.asax.cs 中映射了以下路线

```
 routes.MapRoute(
       "posRoute", // Route name
       "pos/{guid}", // URL with parameters
       new { controller = "Pos", action = "Index", guid = UrlParameter.Optional } // Parameter defaults
 );

 routes.MapRoute(
       "foxRoute", // Route name
       "fox/{guid}", // URL with parameters
       new { controller = "Fox", action = "Index", guid = UrlParameter.Optional } // Parameter defaults
        ); 
```

我想用 HTML 帮助器 Actionlink 建立一个链接，但它一直返回一个空链接。

```
@Html.ActionLink("Proceed", "device") 
```

返回

```
<a href="">Proceed</a>

@Html.ActionLink("Proceed", "device", "Fox" , new { guid = "test" }) 
```

返回

```
<a href="" guid="test">Proceed</a> 
```

因为预期的结果如下：

```
<a href="/fox/index/test">Proceed</a> 
```

或更好

```
<a href="/fox/test">Proceed</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:20:08.397

试试[这个](http://msdn.microsoft.com/en-us/library/dd504972%28v=vs.108%29.aspx)超载。

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    string controllerName,
    Object routeValues,
    Object htmlAttributes
) 
```

所以你的代码将是

```
@Html.ActionLink("Proceed", "device", "Fox" , new { guid = "test" },null) 
```

如果您想传递任何 HTML 属性，如**CSS 类/元素 ID**，您可以用它替换最后一个参数 calue（在我们的例子中为 null）。

还要确保您在特定路线下方有通用路线定义

```
routes.MapRoute(
            "posRoute", 
            "pos/{guid}", 
            new { controller = "Pos", action = "Index", 
            guid = UrlParameter.Optional } // Parameter defaults
        );

routes.MapRoute(
            "foxRoute", // Route name
            "fox/{guid}", // URL with parameters
            new { controller = "Fox", action = "Index",
            guid = UrlParameter.Optional } // Parameter defaults
        );

routes.MapRoute("Default","{controller}/{action}/{id}",
          new { controller = "Home", action = "Index",
                    id = UrlParameter.Optional }) 
```

# mysql - MySQL UTF8 Windows 导出 - Linux 导入

> ID：12425355
> 
> 赞同：2
> 
> 时间：2012-09-14T13:15:14.827
> 
> 标签：mysql, windows, linux, utf-8

我有 MySQL 数据库版本 5.1.36，随 WAMP 安装一起提供。我在 Windows XP SP3 上将其用于开发目的，其中包含一些数据，即**cyrillic**，并且所有这些表/列的排序规则都设置为`utf8_general_ci`.

现在是时候将该数据库迁移到 Debian Lenny 上的伪生产环境了。这里的 MySQL 版本是 5.0.51a。

我尝试了以下方法：

1.  我在 Windows 上使用来自*phpmyadmin*的数据导出了数据库，并将`.sql`文件保存为 UTF8。
2.  然后，我通过 WinSCP（具有默认和二进制传输设置）将其传输到 Linux 机器。
3.  我通过命令行创建了数据库：`mysqladmin -u root -p create nbs`
4.  最后，我尝试创建表并填充数据：

    `mysql -u root -p --default-character-set=utf8 nbs < NBS_utf8_1.sql`

但是，这是我收到错误的地方，例如：

> 第 1 行的 ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以``history_members` ( `id``在第 1 行的 'ï»¿ CREATE TABLE IF NOT EXISTS int(11) NOT NULL AUTO_'附近使用正确的语法

我想有些东西编码混乱了......但不知道如何以及在哪里。我想我在类似的问题中读到了 SO 文本传输的二进制模式只会将换行符 CRLF 更改为 LF（不知道这是否正确......）。我在这里想念什么？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T16:13:54.263

对于这种特殊情况，通过以下修改解决了该问题：

1）我在创建目标数据库时将初始排序规则设置为`utf8_general_ci`，
2）我通过WinSCP以文本模式传输文件，
3）我添加`SET NAMES 'utf8' COLLATE 'utf8_general_ci';`到sql转储的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-23T23:18:13.780

这是我使用 PhpMyAdmin 使用远程 shell 进行粗略 SQL 导入时发现的：

```
 /*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
 /*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
 /*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
 /*!40101 SET NAMES utf8mb4 */; 
```

# xmpp - ejabberd pubsub 退订问题

> ID：12425362
> 
> 赞同：1
> 
> 时间：2012-09-14T13:15:33.340
> 
> 标签：xmpp, publish-subscribe, ejabberd

当我尝试从 pubsub 节点退订时遇到问题。

我正在用 js 编写一个 BOSH 客户端。

这就是我订阅的方式（使用完整的 JID）：

```
<body rid='1023502710' xmlns='http://jabber.org/protocol/httpbind' sid='2ded0255fc6e8bf912a2871d415173faadecfea6'>
<presence xmlns='jabber:client'/>
<presence from='sav1@my.server.com/my_resource' to='amd.my.server.com/sav' xmlns='jabber:client'/>
<iq to='pubsub.my.server.com' type='set' xmlns='jabber:client' id='5007:sendIQ'>
    <pubsub xmlns='http://jabber.org/protocol/pubsub'>
        <subscribe node='/home/monitoring/sav' jid='sav1@my.server.com/my_resource'/>
    </pubsub>
</iq>
</body> 
```

在我的下一个绑定请求中，我收到以下节（因为我已经订阅了节点属性）：

[http://xmpp.org/extensions/xep-0060.html#example-24](http://xmpp.org/extensions/xep-0060.html#example-24)：一个实体也可以通过包含一个“节点”来请求其在特定节点的所有订阅（例如，如果它有多个 SubID 的订阅）元素上的属性。

```
<body xmlns='http://jabber.org/protocol/httpbind'>
<message xmlns='jabber:client' from='pubsub.my.server.com' to='sav1@my.server.com/my_resource'>
    <event xmlns='http://jabber.org/protocol/pubsub#event'>
        <items node='/home/monitoring/sav'>
            <item id='monitor'>
                <!-- some pubsub information -->
            </item>
        </items>
    </event>
    <delay xmlns='urn:xmpp:delay' from='amd.my.server.com' stamp='2012-09-14T12:36:28Z'/>
</message>
<iq xmlns='jabber:client' from='pubsub.my.server.com' to='sav1@my.server.com/my_resource' id='5007:sendIQ' type='result'>
    <pubsub xmlns='http://jabber.org/protocol/pubsub'>
        <subscription jid='sav1@my.server.com/my_resource' subscription='subscribed' subid='543990DD8E6E6' node='/home/monitoring/sav'/>
    </pubsub>
</iq>
<message xmlns='jabber:client' from='pubsub.my.server.com' to='sav1@my.server.com/my_resource' type='headline'>
    <event xmlns='http://jabber.org/protocol/pubsub#event'>
        <items node='/home/monitoring/sav'>
            <item id='monitor'>
                <!-- some pubsub information -->
            </item>
        </items>
    </event>
    <headers xmlns='http://jabber.org/protocol/shim'>
        <header name='Collection'>/home/monitoring/sav</header>
        <header name='SubID'>5435B7F0CA392</header>
        <!-- a lot of other SubIDs -->
    </headers>
</message>
</body> 
```

在标题部分，我收到了很多 SubID。我想这是因为退订不好。

当我结束会话时，我取消订阅每个 SubID ：

```
<body rid='1023502724' xmlns='http://jabber.org/protocol/httpbind' sid='2ded0255fc6e8bf912a2871d415173faadecfea6'>
<iq to='pubsub.my.server.com' type='set' xmlns='jabber:client' id='5008:sendIQ'>
    <pubsub xmlns='http://jabber.org/protocol/pubsub'>
        <unsubscribe node='/home/monitoring/sav' jid='sav1@my.server.com' subid='5435B7F0CA392'/>
    </pubsub>
</iq>
<!-- a lot of other unsubscribed iqs -->
</body> 
```

答案是立竿见影的：

```
<body xmlns='http://jabber.org/protocol/httpbind'>
<iq xmlns='jabber:client' from='pubsub.my.server.com' to='sav1@my.server.com/my_resource' type='error' id='5008:sendIQ'>
    <pubsub xmlns='http://jabber.org/protocol/pubsub'>
        <unsubscribe node='/home/monitoring/sav' jid='sav1@my.server.com' subid='5435B7F0CA392'/>
    </pubsub>
    <error code='401' type='cancel'>
        <unexpected-request xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/>
        <not-subscribed xmlns='http://jabber.org/protocol/pubsub#errors'/>
    </error>
</iq>
</body> 
```

除了我最初收到的第一个子 ID 外，没有提到其他子 ID。

我究竟做错了什么 ？

我正在运行 ejabberd 2.1.10。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:13:33.663

尝试使用与订阅关联的完整 JID 而不是您当前使用的基本 JID 来取消订阅。

您可以从对当前订阅请求的响应中获取 JID。jid 属性包含与订阅关联的完整 jid。

```
<iq xmlns='jabber:client' from='pubsub.my.server.com' to='sav1@my.server.com/my_resource' id='5007:sendIQ' type='result'>
    <pubsub xmlns='http://jabber.org/protocol/pubsub'>
        <subscription jid='sav1@my.server.com/my_resource' subscription='subscribed' subid='543990DD8E6E6' node='/home/monitoring/sav'/>
    </pubsub>
</iq> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T23:18:43.370

我认为资源不应该与订阅的 jid 一起传递。我不知道这是否只是示例中剩下的内容，但这可能会使事情变得混乱。

# sql-server-2008 - 如何限制一个 sql 帐户对一个数据库的访问？

> ID：12425377
> 
> 赞同：0
> 
> 时间：2012-09-14T13:16:00.877
> 
> 标签：sql-server-2008

我正在使用 SQL Server Express 2008 SP1 (10.0.2531)，并希望将 SQL 帐户的访问权限限制为一个数据库。我已经创建了 SQL 帐户。如何授予此用户对数据库的访问权限但拒绝其他用户访问？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:25:36.357

您创建一个用户。

1 - 使用安全/登录。在此处添加您的用户（新登录）

2 - 用户映射

3 - 映射到此登录的用户。

4-选择您的用户可以访问的数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:29:22.263

如果您在 security/logins 节点中创建服务器角色为 public 的用户，则默认情况下，他们将无法访问任何数据库。

其次，在数据库基础的安全/用户节点下添加一个新用户，然后根据需要设置角色。

最后，返回安全/登录节点，您可能希望将默认数据库更改为他们作为用户的特定数据库。

希望有帮助

# mysql - mybatis 3中集合和关联映射的区别

> ID：12425384
> 
> 赞同：15
> 
> 时间：2012-09-14T13:16:40.520
> 
> 标签：mysql, associations, mybatis

我正在从 mybatis3 执行 mysql 查询。我是新来的。mybatis 3中的collection和association mapping有什么区别？

具体例子如下。

```
SELECT e.empid AS empid,e.empname AS empname,
       e.empsalary AS empsalary,p.proname AS proname,p.proid AS proid 
FROM projects p,employees e,projectassigns pa 
WHERE pa.empid=e.empid AND pa.proid=p.proid; 
```

我需要员工和项目的所有详细信息。

我给出的结果图如下。

```
<resultMap id="resultProjects" type="com.pratap.model.ProjAssigns"> 
  <association property="employee" javaType="com.pratap.model.Employee"
               resultMap="resultEmployees" />
  <association property="project" javaType="com.pratap.model.Project"     
               resultMap="resultProjects" />  
</resultMap> 
```

任何人都可以以我的例子或你自己的例子来解释区别吗？

我对此感到困惑..

谢谢你。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-16T14:32:18.743

我将假设您在项目和员工之间存在多对多关系，这就是您创建项目分配表的原因。此项目分配表/对象可能只有两个字段/列：项目 ID 到员工 ID 的映射 - 经典的“桥接表”（又名“连接”或“连接”表）。

当您将此模型映射到对象图时，您有三个选项：

1.  一个 Project 对象可以有一个分配给它的所有员工的列表
2.  一个 Employee 对象可以有一个他/她被分配到的项目列表
3.  创建一个项目分配对象，该对象具有每个项目到其员工的映射以及每个员工到他/她的项目的映射。

在您的示例中，您选择了最后一个选项。

### 协会

关联是“有一个”关系的单个映射。

假设员工一次只能分配到一个项目。一些模型将此称为“拥有”或“属于”关系。如果您想让 Employee 成为对象图中的“主要”焦点，那么您可以将其与他/她的项目关联映射：

```
<resultMap id="employeeResultMap" type="Employee">
  <constructor>
    <idArg column="employee_id" javaType="_integer"/>
  </constructor>
  <result property="firstName"  column="first_name"/>
  <result property="lastName" column="last_name"/>
  <!-- etc. for other simple properties of Employee -->

  <!-- Project is a "complex property" of Employee, so we use an -->
  <!-- association to grab all of the Projects properties also -->
  <association property="assignedProject" resultMap="projectResultMap"/>
</resultMap> 
```

在这种情况下，您的对象将如下所示：

```
public Employee {
  int id;
  String firstName;
  String lastName
  Project assignedProject;
}

public Project {
  int id;
  String name;
  String abc;
} 
```

### 收藏

集合是关联的“列表”或“集合”。

现在逆向建模——我们将项目作为主要焦点。一个 Project 与 Employee 有一个“has-many”的关系，所以它会有一个列表或集合，所以我们使用一个“collection”映射：

```
<resultMap id="projectResultMap" type="Project">
  <constructor>
    <idArg column="project_id" javaType="_integer"/>
    <arg column="name" javaType="String"/>
  </constructor>
  <result property="abc" column="abc"/>

  <!-- This tells mybatis that there can be multiple Employees -->
  <!-- to look up and get their properties -->
  <collection property="employees" ofType="Employee">
    <constructor>
      <idArg column="employee_id" javaType="_integer"/>
    </constructor>
    <result property="firstName"  column="first_name"/>
    <result property="lastName" column="last_name"/>
  </collection>
</resultMap> 
```

现在您的对象将如下所示：

```
public Employee {
  int id;
  String firstName;
  String lastName
}

public Project {
  int id;
  String name;
  String abc;
  List<Employee> employees;
} 
```

### 项目协会

要拥有 Project Association 对象，您需要：

1.  将所有项目映射到员工的单个项目关联对象，反之亦然
2.  每个项目一个项目关联对象，将项目映射到其员工
3.  每个员工一个项目关联对象，将员工映射到他/她的项目

第一个选项相当复杂和混乱 - 您将尝试使用对象图（最有可能是哈希表）进行关系映射。

我会选择将其中一个实体（项目或员工）作为主要关注点，然后如上所示对其进行建模。我没有涵盖的一个案例是，如果员工是您的主要关注点，并且员工可以参与多个项目，那么使用 a`collection`而不是`association`我上面使用的关系来建立“多多”关系。

**最后说明**：如果查看使用“has-one”`association`和“has-many”的示例会有所帮助，请`collection`参阅我创建的 MyBatis Koans：[https](https://github.com/midpeter444/mybatis-koans) ://github.com/midpeter444/mybatis-koans 。Koans 10 和 11 证明了这一点。

# c# - 生成随机数：计算随机生成 x 数的次数

> ID：12425388
> 
> 赞同：1
> 
> 时间：2012-09-14T13:16:52.037
> 
> 标签：c#

我目前正在生成一个随机数（1-20）并计算每个数字随机生成的次数。在`textBox1`我选择我想要生成的数字数量。我在多行中显示最终结果`textBox2`。我遇到的问题是，每次我再次单击按钮时，它都会重置随机生成数字的次数。

有没有我可以点击按钮x次并计算一个数字随机生成的次数而不重置计数？我正在尝试在数组的帮助下专门解决这个问题。

**代码**

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        Random r = new Random();

        private void button1_Click(object sender, EventArgs e)
        {

            var n = int.Parse(this.textBox1.Text);

            var y =
                Enumerable
                    .Range(0, n)
                    .Select(x => r.Next(20) + 1)
                    .ToArray();

            var sum = y.Sum();
            var avg = (double)sum / (double)n;
            var frequency = y.ToLookup(x => x);

            textBox2.Text = String.Join(Environment.NewLine, new[]
        {
            "Number of times an integer was randomly generated",
            String.Format("{0} {1}", sum, avg),
        }.Concat(Enumerable
                .Range(1, 20)
                .Select(x => String.Format("{0} ({1})", x, frequency[x].Count()))));

        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T13:22:31.980

变量的范围仅存在于`button1_Click`方法内部。您需要将其作为私有类变量移出，以便在单击时保持它。它需要对您的代码进行一些小的重构才能到达那里。

```
public partial class Form1 : Form
{
    private Random r = new Random();

    private int[] counts = new int[20];

    private static string newLine = Environment.NewLine;

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        int n = 0;
        if (int.TryParse(this.textBox1.Text, out n))
        {
            // Clear the box
            this.textBox2.Text = string.Empty;

            var generatedList = new int[n];
            for (int i = 0; i < n; i++)
            {
                // Upper bound is EXCLUSIVE
                var gen = r.Next(1, 21);
                counts[gen - 1]++;
                generatedList[i] = gen;
            }

            this.textBox2.Text += PrintNumbers(generatedList);
            this.textBox2.Text += PrintCounts(this.counts);
        }
        else
        {
            this.textBox2.Text = "Invalid input! Cannot generate numbers.";
        }
    }

    private static string PrintNumbers(int[] numbers)
    {
        if (numbers == null)
        {
            return "No numbers generated" + newLine;
        }

        string result = "Generated sequence: {";
        for (int i = 0; i < numbers.Length; i++)
        {
            result += numbers[i];

            if (i < numbers.Length - 1)
            {
                result += ", ";
            }
        }

        return result + "}" + newLine;
    }

    private static string PrintCounts(int[] counts)
    {
        if (counts == null)
        {
            return string.Empty;
        }

        string result = string.Empty;
        for (int i = 0; i < counts.Length; i++)
        {
            result += "Number " + (i + 1) + " generated " + counts[i] + " times." + newLine;
        }

        return result;
    }
} 
```

请注意，该方法的上限`rand.next(min,max)`是独占的，这意味着要生成从 1 到 20 的数字，您需要将其传递 1 到 21。不知道为什么会出现不一致——这有点令人困惑。

n = 10 的输出

```
Generated sequence: {12, 5, 12, 15, 8, 20, 6, 5, 16, 6}
Number 1 generated 0 times.
Number 2 generated 0 times.
Number 3 generated 0 times.
Number 4 generated 0 times.
Number 5 generated 2 times.
Number 6 generated 2 times.
Number 7 generated 0 times.
Number 8 generated 1 times.    
Number 9 generated 0 times.
Number 10 generated 0 times.
Number 11 generated 0 times.
Number 12 generated 2 times.
Number 13 generated 0 times.
Number 14 generated 0 times.
Number 15 generated 1 times.
Number 16 generated 1 times.
Number 17 generated 0 times.
Number 18 generated 0 times.
Number 19 generated 0 times.
Number 20 generated 1 times. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:21:12.443

您需要记住实例字段中的一些数据。之前在列表中生成的所有数字（这将引入很少的代码更改）或直方图本身作为`Dictionary<int, int>`.

当局部变量丢失时，实例字段在对事件处理程序的调用中被保留。

# c# - 每月 13 日及之后的错误；从字符串转换日期和/或时间时

> ID：12425389
> 
> 赞同：0
> 
> 时间：2012-09-14T13:16:54.933
> 
> 标签：c#, asp.net, sql

下面的代码工作正常；每月1日至12日；但是，一旦我单击第 13 天或更大的日期，我就会收到此错误

```
Conversion failed when converting date and/or time from character string. 
```

这是我的代码

```
 DateTime dt = Convert.ToDateTime(Calendar1.SelectedDate.ToString("yyyy-MM-dd"));

    myConnection.Open();
    string cmdStr1 = "SELECT COUNT(*) FROM Payment WHERE PaymentDate = '" + dt + "'";
    SqlCommand PIDexist1 = new SqlCommand(cmdStr1, myConnection);
    int temp1 = Convert.ToInt32(PIDexist1.ExecuteScalar().ToString());
    myConnection.Close(); 
```

感谢您的帮助

这是日期如何保存在我的数据库中`2012-01-13`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T13:19:21.187

不，永远不要像那样绑定日期。让 .NET 数据提供程序为您处理这个问题 - 应用程序和 Sql Server 上的语言环境存在太多陷阱，您无法将字符串用作日期。

```
myConnection.Open();
string cmdStr1 = "SELECT COUNT(*) FROM Payment WHERE PaymentDate = @dt'";
SqlCommand PIDexist1 = new SqlCommand(cmdStr1, myConnection);
SqlParameter parameter = PIDexist1.Parameters.Add("@dt", System.Data.SqlDbType.DateTime);
parameter.Value = dt;
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T13:18:25.993

因为它试图将 13 转换为月份。

尝试使用`DateTime.Parse("...", [Culture])`和指定适当的文化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:19:49.520

您很可能遇到了`DD-MM-YY`vs`MM-DD-YY`情况。太巧合了，它一直工作到有 12 个月的第 12 天。尝试更明确地使用日期；也许使用三个字母的月份代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T13:20:42.403

无需转换日期 .ToString()。只需使用 SelectedDate DateTime 值作为 SqlCommand 查询的命名参数。如果您只需要一天，请使用 DateTime.Date 属性

# java - jaxb 解组返回 null

> ID：12425392
> 
> 赞同：1
> 
> 时间：2012-09-14T13:16:57.553
> 
> 标签：java, web-services, soap, jaxb2

我正在解组对肥皂消息的响应，如下所示

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <SOAP-ENV:Body>
      <m:soResponse SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:m="urn:tec">
         <Error/>
         <Order>
            <Number>6</Number>
         </Order>
      </m:soResponse>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我将 jaxb 注释绑定为

```
 @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = {
        "body"
    })
    @XmlRootElement(name = "Envelope")
    public class Envelope {
    @XmlElement(name = "Body", namespace = "http://schemas.xmlsoap.org/soap/envelope/", required = true)
        protected Body body;
    //......
    }

    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = {
        "soResponse"
    })
    @XmlRootElement(name = "Body")
    public class Body {

        @XmlElement(namespace = "http://schemas.xmlsoap.org/soap/envelope/", required = true)
        protected soResponse;
    //-----------
    }
XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "error",
    "order"
})
@XmlRootElement(name = "soResponse")
public class soResponse{

    @XmlElement(name = "Error", required = true)
    protected soResponse.Error error;
    @XmlElement(name = "Order", required = true)
    protected soResponse.Order order;
    @XmlAttribute(name = "encodingStyle", namespace = "http://schemas.xmlsoap.org/soap/envelope/", required = true)
    @XmlSchemaType(name = "anyURI")
    protected String encodingStyle;
//-----------------------
} 
```

问题是，我得到 soResponse 总是 null !!？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T13:40:56.000

看起来你的命名空间有误

```
@XmlElement(namespace = "http://schemas.xmlsoap.org/soap/envelope/", required = true)
protected soResponse; 
```

这将寻找 a `<SOAP-ENV:soResponse>`，而不是 a `<m:soResponse xmlns:m="urn:tec">`。

# perl - Perl - 解析 URL 以获取 GET 参数值

> ID：12425393
> 
> 赞同：8
> 
> 时间：2012-09-14T13:17:02.030
> 
> 标签：perl, parsing, url, uri

如何`code`使用`URI::URL`Perl 模块获取参数的值？

从这个链接：

> [http://www.someaddress.com/index.html?test=value&code=INT_12345](http://www.someaddress.com/index.html?test=value&code=INT_12345)

可以使用`URI::URL`or来完成`URI`（我知道第一个已经过时了）。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-14T13:33:31.450

创建一个`URI`对象并使用该`query_form`方法获取查询的键/值对。如果你知道 code 参数只指定一次，你可以这样做：

```
my $uri   = URI->new("http://www.someaddress.com/index.html?test=value&code=INT_12345");
my %query = $uri->query_form;

print $query{code}; 
```

或者，您可以使用 URI::QueryParam 将一些附加方法添加到 URI 对象：

```
my $uri = URI->new("http://www.someaddress.com/index.html?test=value&code=INT_12345");
print $uri->query_param("code"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-08T15:34:59.950

```
use URI;
my $uri   = URI->new("http://someaddr.com/index.html?test=FIRST&test=SECOND&code=INT_12345");
my %query = $uri->query_form;
use Data::Dumper;
print Dumper \%query; 
```

我们可以看到：

```
 $VAR1 = {
              'test' => 'SECOND',
              'code' => 'INT_12345'
            }; 
```

不幸的是，这个结果是错误的。

有可能的解决方案：

```
use URI::Escape;

sub parse_query {
   my ( $query, $params ) = @_;
   $params ||= {};
   foreach $var ( split( /&/, $query ) ){
     my ( $k, $v ) = split( /=/, $var );
     $k = uri_unescape $k;
     $v = uri_unescape $v;
     if( exists $params->{$k} ) {
        if( 'ARRAY' eq ref $params->{$k} ) {
           push @{ $params->{$k} }, $v;
        } else {
           $params->{$k} = [ $params->{$k}, $v ];
        }
     } else {
        $params->{$k} = $v;
     }
   }
   return $params;
} 
```

# php - 快速发布相同数据时缺少发布数据

> ID：12425394
> 
> 赞同：1
> 
> 时间：2012-09-14T13:17:08.820
> 
> 标签：php, forms, post, submit

我制作了一个包含几个字段（名称、标题等）的表单，包括一个将字段存储在我的 mysql 数据库中的图像上传。

当我第一次提交表单时，我收到了所有的帖子数据，并且能够使用帖子数据来构建我的数据库查询。

帖子数据如下所示：

```
["option"]=>
  string(9) "com_jimmo"
  ["jform"]=>
  array(6) {
    ["id"]=>
    string(0) ""
    ["lang_code"]=>
    string(5) "nl-NL"
    ["title"]=>
    string(0) ""
    ["jimmo_id"]=>
    string(3) "141"
    ["path"]=>
    string(0) ""
    ["featured"]=>
    string(1) "0"
  }
  ["task"]=>
  string(11) "image.apply"
  ["controller"]=>
  string(5) "image"
  ["244dd7871d511949f4cf87df21403258"]=>
  string(1) "1" 
```

当我再次发布完全相同的表格时，紧接在前一张之后。很多 Post 数据丢失了，我只收到了这个（jform['featured'] 之后的所有 post 变量都丢失了）：

```
["option"]=>
  string(9) "com_jimmo"
  ["jform"]=>
  array(6) {
    ["id"]=>
    string(0) ""
    ["lang_code"]=>
    string(5) "nl-NL"
    ["title"]=>
    string(0) ""
    ["jimmo_id"]=>
    string(3) "141"
    ["path"]=>
    string(0) ""
    ["featured"]=>
    string(1) "0"
  } 
```

如果我一遍又一遍地重新发布相同的表格，那么数据就会丢失。但是当我等待一分钟再试一次时，所有的帖子数据都回来了。

这对我来说似乎是一个记忆问题，但我无法确定它。我发布的图像只有 700KB 大，对于网络服务器上的以下 php 设置，其他变量和图像组合不应太大：

*   最大执行时间 60
*   max_file_uploads 20
*   最大输入时间 60
*   最大输入变量 1000
*   memory_limit 128MB
*   post_max_size 8MB
*   上传最大文件大小 8MB

有没有人知道在连续发布时可能导致发布数据丢失的原因？

根据要求我的html：

```
 <form action="/administrator/index.php?option=com_jimmo" method="post" name="adminForm" id="jimmo-form" enctype="multipart/form-data">
        <fieldset class="adminform">
        <legend>afbeeldingen</legend>
        <ul class="adminformlist">
            <li><input type="hidden" name="jform[id]" id="jform_id" value=""></li>
            <li><label id="jform_lang_code-lbl" for="jform_lang_code" class="">selecteer een taal</label><select id="jform_lang_code" name="jform[lang_code]">
    <option value="0">default</option>
    <option value="nl-NL" selected="selected">Dutch</option>
    <option value="en-GB">English (UK)</option>
</select>
</li>
            <li><label id="jform_title-lbl" for="jform_title" class="hasTip" title="">title</label><input type="text" name="jform[title]" id="jform_title" value="" class="inputbox" size="40"></li>
            <li><label id="jform_jimmo_id-lbl" for="jform_jimmo_id" class="">pand</label><select id="jform_jimmo_id" name="jform[jimmo_id]">
    <option value="125">Uitstekend gelegen app met twee slaapkamers </option>
    <option value="156">test webmamba 2</option>
</select>
</li>
            <li><label id="jform_path-lbl" for="jform_path" class="">afbeelding</label><select id="jform_path" name="jform[path]">
    <option value="-1">- Niets geselecteerd -</option>
    <option value="" selected="selected">- Gebruik standaard -</option>
    <option value="141_1346935067.jpg">141_1346935067.jpg</option>
    <option value="141_1347022237.jpg">141_1347022237.jpg</option>
</select>
</li>
            <li><label id="jform_featured-lbl" for="jform_featured" class="">toon afbeelding als voorvertoning</label><select id="jform_featured" name="jform[featured]">
    <option value="0" selected="selected">No</option>
    <option value="1">Yes</option>
</select>
</li>
            <li>
                <label id="jform_jimmo_image-lbl" for="jform_jimmo_image" class="">Upload new Image</label>
                <input type="file" name="jform_jimmo_image">
            </li>
            <li>
                <label id="jform_jimmo_preview-lbl" for="jform_jimmo_preview" class="">Current Image</label>
                <img name="jform_jimmo_preview" src="http://immo-outlook.be/images/jimmo/">
            </li>
        </ul>
    </fieldset>
    <div>
                <input type="hidden" name="task" value="image.edit">
        <input type="hidden" name="controller" value="image">
        <input type="hidden" name="a059e7116c95f234bdac9458883d7b93" value="1"> </div>
</form> 
```

动作的php代码只是`var_dump($_REQUEST);`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T08:34:08.287

我找到了解决我的问题的方法。我在文件上传中收到错误“3”，这意味着连续文件仅被部分上传。

我用谷歌搜索了可能导致这种情况发生的原因，并在这里找到了答案：http: [//www.bizzeh.com/739/php-problem-with-upload_err_partial-file-upload-error-code-3](http://www.bizzeh.com/739/php-problem-with-upload_err_partial-file-upload-error-code-3)

> 我刚刚花了 3 个小时试图弄清楚为什么只有第 3 个文件会上传（然后文件只会随机上传）并且我继续得到 UPLOAD_ERR_PARTIAL。事实证明 UPLOAD_ERR_PARTIAL 可能是由标头 Connection: Keep-Alive 引起的。如果您正在开发需要大量文件上传的网络应用程序，请确保在您的上传器脚本中使用：header("Connection: close"); 这将强制关闭连接，并打开新连接以上传文件，从而正确上传文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:48:56.050

代码对我来说似乎工作正常。我认为您应该在其他中间 PHP 文件上查找问题。

你`administrator/index.php`也可以包括来源吗？我想看看你如何处理表格。`var_dump($_REQUEST);`开了吗`index.php`？

# matplotlib - matplotlib imshow 编辑 x 轴

> ID：12425395
> 
> 赞同：2
> 
> 时间：2012-09-14T13:17:13.017
> 
> 标签：matplotlib, label, fft, axes

我想显示图像的幅度谱。我可以使用以下代码来做到这一点：

```
import numpy as np
import matplotlib.pyplot as plt
import pylab

pylab.gray()
pic = pylab.imread("C:/pic.png")[::-1,:]
amp_pic = pylab.subplot(1,4,1)
amp_pic.xaxis.set_ticks_position('top')
pylab.imshow(np.abs(np.fft.fftshift(np.fft.fft2(pic))),\
         interpolation='nearest')
pylab.show() 
```

但是轴的标记方式与幅度谱的标记方式不同。在一维函数的情况下，重新标记要容易一些：

```
import math
import numpy as np
import matplotlib.pyplot as plt

array = np.arange(149)
frequency_scale = np.fft.fftfreq(array.shape[0])
function = np.cos(2*math.pi*array/10)
fft = np.fft.fft(function)
amp_fft = np.abs(fft)
plt.subplot(1,4,1)
plt.plot(fkt,'r')
plt.show() 
```

在 imshow 图的情况下，我希望我的 xaxis 具有相同的标签。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T18:25:53.403

```
figure()
im = imshow(rand(500,500))
im.set_extent([0,1,0,1]) 
```

`set_extent`设置 x 和 y 轴的最大值和最小值。文档如下：

```
 |  set_extent(self, extent)
 |      extent is data axes (left, right, bottom, top) for making image plots
 |      
 |      This updates ax.dataLim, and, if autoscaling, sets viewLim
 |      to tightly fit the image, regardless of dataLim.  Autoscaling
 |      state is not changed, so following this with ax.autoscale_view
 |      will redo the autoscaling in accord with dataLim. 
```

# vba - 在 powerpoint_transparancy 困难中将文本框另存为图片

> ID：12425396
> 
> 赞同：1
> 
> 时间：2012-09-14T13:17:17.943
> 
> 标签：vba, textbox, transparency, powerpoint

在 powerpoint 2010 中，我想将插入的文本框另存为图片，只需右键单击文本框并保存即可。**然而**，保存的图像将在文本周围包含大量透明度。我想知道是否可以在不使用照片编辑程序的情况下减少文本周围的这种丰富的透明度。

我知道 powerpoint 不是将精美创建的文本用于除办公室本身之外的其他目的的正确工具，但是对于我的一些同事来说，这会使事情变得容易十倍。

我希望有人可以帮助我，如果这意味着使用 VBA 或其他（复杂）代码/语言。

谢谢你的时间。

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:19:23.437

在文本框中输入文本后，

1.  复制文本框，右键粘贴为图片
2.  现在您有了文本框的图像，正如您在将该文本框保存为图像时所获得的那样 - 使用 save_as_image 选项
3.  选择此图像并单击格式选项卡
4.  您可以选择裁剪图像
5.  裁剪图像并将其另存为图片

# android - FQL 查询按生日对好友列表进行排序

> ID：12425400
> 
> 赞同：0
> 
> 时间：2012-09-14T13:17:29.053
> 
> 标签：android, facebook-fql

我正在尝试根据生日对朋友列表进行排序。目前我可以通过以下 fql 查询获取好友列表（按名称排序）：

```
select name, current_location, uid, pic_square from user where uid in (select uid2 from friend where uid1=me()) order by name 
```

然后我试图按生日获取排序列表

```
SELECT uid, birthday, pic_square, name FROM user WHERE uid IN (SELECT uid2 from friend where uid1=me()) ORDER BY birthday 
```

但我无法按生日获得排序的好友列表。

请告诉我一个有效的 FQL 查询，用于按生日对好友列表进行排序...

# java - 嵌套元素的 XML 映射属性

> ID：12425401
> 
> 赞同：7
> 
> 时间：2012-09-14T13:17:32.217
> 
> 标签：java, xml, parsing, xstream

我正在使用 XStream，并且有一个 XML 示例：

```
<person>
    <firstname>Joe</firstname>
    <lastname>Walnes</lastname>
    <phone value="1234-456" />
    <fax value="9999-999" />
</person> 
```

我想把它映射到课堂上

```
public class Person {

    private String firstname;
    private String lastname;
    private String phone;
    private String fax;

} 
```

所以想法是将嵌套元素的属性映射到当前对象。我试图找到任何现成的转换器，但没有成功。我相信通过实施新的转换器可以做到这一点，但可能有人已经这样做了。或者有一个我还没有找到的解决方案。

**更新：**

我试图实现的想法是省略不必要的创建和映射实体。我根本不需要电话和传真实体，我只需要模型中的属性。我试图解析的 XML 模式对我来说是第三方的，我无法更改它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T10:10:17.890

I don't know of a ready-to-use converter that will do it, but it's pretty trivial to write one

```
import com.thoughtworks.xstream.converters.*;
import com.thoughtworks.xstream.io.*;

public class ValueAttributeConverter implements Converter {
  public boolean canConvert(Class cls) {
    return (cls == String.class);
  }

  public void marshal(Object source, HierarchicalStreamWriter w, MarshallingContext ctx) {
    w.addAttribute("value", (String)source);
  }

  public Object unmarshal(HierarchicalStreamReader r, UnmarshallingContext ctx) {
    return r.getAttribute("value");
  }
} 
```

You can attach the converter to the relevant fields using annotations

```
import com.thoughtworks.xstream.annotations.*;

@XStreamAlias("person")
public class Person {

    private String firstname;
    private String lastname;

    @XStreamConverter(ValueAttributeConverter.class)
    private String phone;

    @XStreamConverter(ValueAttributeConverter.class)
    private String fax;

    // add appropriate constructor(s)

    /** For testing purposes - not required by XStream itself */
    public String toString() {
      return "fn: " + firstname + ", ln: " + lastname +
             ", p: " + phone + ", f: " + fax;
    }
} 
```

To make this work, all you need to do is instruct XStream to read the annotations:

```
XStream xs = new XStream();
xs.processAnnotations(Person.class);
Person p = (Person)xs.fromXML(
  "<person>\n" +
  "  <firstname>Joe</firstname>\n" +
  "  <lastname>Walnes</lastname>\n" +
  "  <phone value='1234-456' />\n" +
  "  <fax value='9999-999' />\n" +
  "</person>");
System.out.println(p);
// prints fn: Joe, ln: Walnes, p: 1234-456, f: 9999-999 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T20:56:29.463

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

如果您愿意使用 XStream 以外的库，以下是如何利用**EclipseLink JAXB (MOXy)**`@XmlPath`中的扩展。

 ****人**

注释允许您通过 XPath将`@XmlPath`您的字段/属性映射到 XML 文档中的某个位置（请参阅：[http](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html) ://blog.bdoughan.com/2010/07/xpath-based-mapping.html ）。

```
package forum12425401;

import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Person {

    private String firstname;
    private String lastname;

    @XmlPath("phone/@value")
    private String phone;

    @XmlPath("fax/@value")
    private String fax;

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅：[http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -你的.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)）：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

下面的代码会将 XML 转换为您的域模型，然后将域模型写回 XML。

```
package forum12425401;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Person.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum12425401/input.xml");
        Person person = (Person) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(person, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<person>
   <firstname>Joe</firstname>
   <lastname>Walnes</lastname>
   <phone value="1234-456"/>
   <fax value="9999-999"/>
</person> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:35:47.557

请参阅 XStream Alias 教程的“属性别名”部分：http: [//x-stream.github.io/alias-tutorial.html](http://x-stream.github.io/alias-tutorial.html)。**

# r - 根据条件从r中的多列中删除重复的行

> ID：12425402
> 
> 赞同：6
> 
> 时间：2012-09-14T13:17:36.833
> 
> 标签：r, select, duplicates, conditional-statements

我有一个数据集，我想删除在 4 个不同列中具有重复信息的数据行。

```
foo<- data.frame(g1 = c("1","0","0","1","1"), v1 = c("7","5","4","4","3"), v2 = c("a","b","x","x","e"), y1 = c("y","c","f","f","w"), y2= c("y","y","y","f","c"), y3 = c("y","c","c","f","w"), y4= c("y","y","f","f","c"), y5=c("y","w","f","f","w"), y6=c("y","c","f","f","w")) 
```

foo 然后看起来像：

```
 g1 v1 v2 y1 y2 y3 y4 y5 y6
1  1  7  a  y  y  y  y  y  y
2  0  5  b  c  y  c  y  w  c
3  0  4  x  f  y  c  f  f  f
4  1  4  x  f  f  f  f  f  f
5  1  3  e  w  c  w  c  w  w 
```

现在，我想根据 Y1-6 列删除任何具有重复数据的行。因此，如果操作正确，则仅会删除第 4 行和第 1 行，因为所有 Y 变量都完全相同。它是一个多列条件。

我相信我很接近，但它只是无法正常工作。

我已经尝试过：`new = foo[!(duplicated(foo[,1:6]))]` 考虑使用它会搜索的重复命令并且只找到那些完全匹配的命令？

我考虑过使用带有 & 的条件语句，但也不知道该怎么做。
`new = foo[foo$y1==foo$y2|foo$y3|foo$y4|foo$y5|foo$y6]`

我想过哪个，但我现在不知所措，迷失了方向。我希望 foo 看起来像：

```
 g1 v1 v2 y1 y2 y3 y4 y5 y6
2  0  5  b  c  y  c  y  w  c
3  0  4  x  f  y  c  f  f  f
5  1  3  e  w  c  w  c  w  w 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-14T13:34:45.707

```
> foo[apply(foo[ , paste("y", 1:6, sep = "")], 1,
            FUN = function(x) length(unique(x)) > 1 ), ]
  g1 v1 v2 y1 y2 y3 y4 y5 y6
2  0  5  b  c  y  c  y  w  c
3  0  4  x  f  y  c  f  f  f
5  1  3  e  w  c  w  c  w  w 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T13:27:51.603

```
foo[apply(foo, 1, function(x) any(x != x[1])),] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T13:29:14.830

```
> foo[ !rowSums( apply( foo[2:6], 2, "!=", foo[1] ) )==0, ]
  y1 y2 y3 y4 y5 y6
2  c  y  c  y  w  c
3  f  y  c  f  f  f
5  w  c  w  c  w  w

> foo[ ! colSums( apply( foo, 1, duplicated, foo[1] ) ) == 5, ]
  y1 y2 y3 y4 y5 y6
2  c  y  c  y  w  c
3  f  y  c  f  f  f
5  w  c  w  c  w  w 
```

# python - python项目的开发环境

> ID：12425407
> 
> 赞同：0
> 
> 时间：2012-09-14T13:17:59.943
> 
> 标签：python, ide, text-editor

我在 linux 上运行 python，目前我的单文件程序使用 vim，多文件程序使用 gedit。我见过像eclipse这样的开发环境，基本上想知道在为python设计的ubuntu上是否有类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T13:24:05.407

好问题！

我个人只使用 VIM，但是，我可以想到 2 个很棒的 IDE，用于在 Ubuntu（和许多其他 Linux 发行版）上进行 Python 开发，其中一个是 Eclipse。

(1) 所以，Eclipse 有一个 Python 开发套件插件，叫做 PyDev。要在 Ubuntu 机器上安装 Eclipse，您只需键入：

```
sudo apt-get install eclipse 
```

进入终端，或使用软件中心。拥有 Eclipse 后，您需要添加 PyDev 插件。本[教程](http://pydev.org/manual_101_install.html)可以帮助您，但基本上它所包含的只是进入“安装新软件”菜单，然后链接 PyDev 存储库。

(2) 另一个不错的选择是使用 MonoDevelop！Monodev 有一个 Python 开发套件，只需输入即可下载

```
sudo apt-get install monodevelop-python 
```

我建议尝试这两种方法，以找到最适合您作为 Python 开发人员的需求和期望的方法。

有关这些 IDE 的更多信息和更多信息，这里有一个非常[全面的、比较支持 Python 的 IDE 列表](http://wiki.python.org/moin/IntegratedDevelopmentEnvironments)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T13:20:31.313

Python 的 Eclipse 版本称为[PyDev](http://pydev.org/)。有关 Python IDE 的完整列表，请参阅[此页面](http://wiki.python.org/moin/IntegratedDevelopmentEnvironments)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:20:38.627

Komodo 是一个很好的商业 IDE。而 Eric 是一个免费的 python IDE，它是用 python 编写的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T13:23:01.053

特别是对于 Python，[PyCharm](http://www.jetbrains.com/pycharm/)是一个不错的选择。还有[Intellij IDEA Ultimate](http://www.jetbrains.com/idea/)，它具有与 PyCharm 同等级别的 Python 支持（但成本更高）。两者都使用 Java，因此它可以在任何带有 Java 的平台上运行。

# ruby-on-rails - 通过 Nginx 在 root 中运行的应用程序的子目录中部署 rails 应用程序

> ID：12425416
> 
> 赞同：0
> 
> 时间：2012-09-14T13:18:43.773
> 
> 标签：ruby-on-rails, nginx

我正在目录中运行一个 rails 应用程序。

这是我的服务器块配置。

```
server_name  IP;
passenger_enabled on;
root   /var/www/abc/current/public;
passenger_base_uri /new; 
```

IP 上已经有一个 Rails 应用程序在运行。所以我想在 IP/new 上运行另一个 rails 应用程序。

我做了这个配置。但它给了我 404 not found 错误。这是

```
[error] 13576#0: *103 "/var/www/abc/current/public/new/index.html" is not found (2: No such file or directory) 
```

任何帮助表示赞赏。

谢谢，格索尼

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-14T13:34:54.800

删除passenger_base_uri 后尝试，请参阅[文档](http://www.modrails.com/documentation/Users%20guide%20Nginx.html)以获取更多信息。

# mysql - mysql查找表

> ID：12425417
> 
> 赞同：0
> 
> 时间：2012-09-14T13:18:46.460
> 
> 标签：mysql, phpmyadmin, inner-join, lookup, multiple-columns

### 查找表 - 唯一行标识

其他查找表只是没有意义，因为从我所看到的给一行一个 ID 然后将该 id 放在另一个也有一个 id 的表中，然后将这些 id 添加到一些可能引用它们并仍然创建查找表的表中有更多的id（这就是我能找到的所有例子的样子）我所做的是：

```
product_item - table
------------------------------------------
id | title   | supplier   | price 
1  | title11 | suuplier1  | price1 
```

等等然后它继续包含更多项目（确保你明白了）

```
product_feature - table
--------------------------
id | title    | iskeyfeature 
1  | feature1 | true

feature_desc - table
-----------------------------
id | title | desc
1  | desc1 | text description

 product_lookup - table
    item_id | feature_id | feature_desc
    1       | 1          | 1
    1       | 2          | 2
    1       | 3          | 3
    1       |64          | 15 
```

（因为这些只需要在查找中引用，id 可以是每个项目的倍数或每个功能的多个项目）

**如果不将 item_id 添加到每个功能行或描述行，**我想要做的是仅从多个表中检索其 id 在查找表的同一行中引用的列。如果我只知道 item_id 例如，我想知道是否可以从查找行中选择所有引用的列。`Item_id = 1`返回`item_id = 1`在同一行中引用的列的所有行。每个项目都可以有多个特征，而且每个特征都可以附加到多个项目，如果我能正确地从单个已知值构造这个查询的模式，这将无关紧要。

任何帮助或只是一些方向将不胜感激。我正在使用 phpmyadmin，并且使用一些 php voodoo 肯定会更容易我正在从教程等中学习 mysql，并且想知道如何直接使用 sql 来做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:07:18.620

在列中具有 NULL 值并不是导致这种设计的主要问题 - 这是将来*添加*新属性列的问题，MySQL 在这方面做得非常糟糕。

如果要进行查询以在一行中返回有关项目的所有信息，则需要将 LEFT OUTER JOIN 返回到每个 feature_id 的 product_lookup 表。这大约是 Stack Overflow 上每 10 个 mysql 问题，因此您应该能够找到大量示例。

# php - cakephp 将数组记录为 var_dump

> ID：12425423
> 
> 赞同：10
> 
> 时间：2012-09-14T13:19:12.153
> 
> 标签：php, cakephp, logging, var-dump

我需要跳转到服务器端代码。它在那里使用 cakephp。我想看一个变量，我认为它是一个模型，但我不确定，让我们成为一个变量。

```
CakeLog::write('debug', 'myArray'.var_export($myArray) ); 
```

它会有输出

```
myArray: Array 
```

我希望看到与 var_dump 可以对输出产生类似的输出。

那可能吗？如果是，比如何？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-14T13:26:09.153

只需使用[print_r](http://php.net/manual/en/function.print-r.php)，它接受第二个参数不输出结果。

```
CakeLog::write('debug', 'myArray'.print_r($myArray, true) ); 
```

如果您不想在日志文件中出现新行、制表符或双空格：

```
$log = print_r($myArray, true);
$log = str_replace(array("\n","\t"), " ", $log);
$log = preg_replace('/\s+/', ' ',$log);
CakeLog::write('debug', 'myArray' . $log); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T13:22:57.787

尝试：

```
CakeLog::write('debug', 'myArray'.print_r($myArray, true)); 
```

该`true`参数使 print_r 返回值而不是在屏幕上打印，因此您可以保存它。

[http://br2.php.net/manual/en/function.print-r.php](http://br2.php.net/manual/en/function.print-r.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:32:42.593

有人得到了[这里](http://www.nolte-schamm.za.net/2011/05/php-var_dump-into-error-log/)介绍的重定向方法。

这个我曾经看过我那里有什么，它显示得很清楚。

# c++ - 位图图像未显示在 CListCtrl 报告视图中

> ID：12425427
> 
> 赞同：0
> 
> 时间：2012-09-14T13:19:33.677
> 
> 标签：c++, mfc, bitmap, shell-extensions, clistctrl

我正在尝试在 MFC 中创建一个包含 CListCtrl 的对话框，以显示带有关联图像的项目列表。但是，图像显示为空白的白色方块。他们在那里，或者至少，他们应该在的地方有一个空间。

我正在尝试从文件加载位图（尽管我也尝试从具有相同效果的资源 ID 加载）并将其存储在 CImageList 中。然后将该图像列表提供给 CListCtrl。我相当确定位图已正确加载，因为我已设法使用相同的代码在项目的其他地方成功加载了相同的位图。

我不确定这是否重要，但这是上下文菜单外壳扩展的一部分，当用户单击资源管理器上下文菜单中的一项时会引发对话框。另外，我对 MFC 比较陌生，所以如果我错过了一些非常明显的东西，我深表歉意。

以下是我在报告视图中初始化 CListCtrl 的代码，其中包含两列和一个项目，该项目应在第一列中包含图像，在第二列中包含一些文本：

```
// Get reference to list control
CListCtrl m_list_control = (CListCtrl*)GetDlgItem(IDC_LISTCONTROL);

// Create image list
CImageList image_list;
image_list.Create(32, 32, ILC_COLOR4, 0, 3);

HANDLE hBitMap = ::LoadImage(0, L"E:\pathtomybitmap\bitmap1.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE); 
CBitmap bitmap; 
bitmap.Attach((HBITMAP)hBitMap); 

image_list.Add(&bitmap, RGB(255, 0, 255));

// Add the image list to the list control 
// (LVSIL_NORMAL didn't seem to show anything at all)
m_list_control->SetImageList(&image_list, LVSIL_SMALL);

// Add columns
LVCOLUMN column;
column.mask = LVCF_FMT | LVCF_WIDTH | LVCF_TEXT | LVCF_IMAGE;
column.fmt = LVCFMT_LEFT | LVCFMT_IMAGE;
column.cx = 100;
column.pszText = (LPWSTR)&L"Image";
column.iImage = 0;

m_list_control->InsertColumn(0, &column);

m_list_control->InsertColumn(1, _T("Text"), LVCFMT_LEFT, 100);

int index = m_list_control->InsertItem(0, _T(""), 0);
m_list_control->SetItemText(0, 1, _T("My text")); 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:54:15.330

尝试更改 create 语句，使您放置的大小小于图像大小

```
image_list.Create(31, 31, ILC_COLOR4, 0, 3); 
```

尝试将插入项的掩码参数设置为：

```
InsertItem(LVIF_TEXT | LVIF_IMAGE,... 
```

# java - 在 Java 中使用 .jar 文件中的方法

> ID：12425428
> 
> 赞同：2
> 
> 时间：2012-09-14T13:19:38.393
> 
> 标签：java, methods, import, jar

关于Java的问题。我正在使用 Eclipse，并且创建了一个名为 Main 的简单项目。在这个项目中有一个名为 MainClass 的类。

```
public class MainClass
{
} 
```

我有另一个名为 Math 的项目。它只有一个名为 Functions 的类，并且有一个名为 add 的方法：

```
public class Functions
{
    public int add(int a, int b)
    {
        return a+b;
    }
} 
```

我已将这个名为 Math 的项目导出到 .jar 文件中。我想在 Main 项目中使用 .jar 文件中的 add 方法，例如：

```
public class MainClass
{
    int x = add(1, 2);
} 
```

我需要做什么？谢谢你的时间。

编辑：好的，我已经在 lib 文件夹中添加了 jar，但是现在，我该如何使用 add(int a, int b)？它说它是“未定义的”。

第二次编辑：我创建了类函数的一个实例，所以现在我可以使用这些方法了。感谢您的回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T13:23:41.560

创建文件夹`lib`将您的 jar 添加到其中。转到`Project->Properties->Java Build Path-> Libraries->Add Jar`，你就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:23:42.840

您应该在 .classpath 文件中包含 .jar。完成此步骤后，您可以使用该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:24:39.797

您需要在 Main 的类路径中包含 .jar 文件。

右键单击Eclipse中的Main项目，单击属性，单击“Java Build Path”，单击“库”，单击添加jar或添加外部jar并找到.jar文件。而已！

# android - 具有可变宽度和高度的 ListView 元素

> ID：12425429
> 
> 赞同：1
> 
> 时间：2012-09-14T13:19:41.047
> 
> 标签：android, android-layout, android-listview

My`ListView`包含一个自定义元素。它是我从 Android View 类扩展而来的一个视图。在该方法中`onMeasure()`，我设置了视图的宽度和高度，到目前为止，包括填充在内都可以正常工作。

现在我尝试在 中使用它，但`ListView`出现了问题。如果列表第一次加载，到目前为止一切看起来都很好。如果我向下滚动，那么它应该不再是什么了。高度是错误的，宽度是错误的，甚至它们的填充也是错误的。

我的猜测：它重用了视图并且不再调用`onMeasure`。

所以我想在用新内容填充视图后自己调用它（在适配器方法中`getView`）

它也不起作用。

我的视图最多包含 3 个元素 top:Text, mid:Image(s), bottom:Text 这两个文本都是可选的，并且图像的数量最小为 1。并且图像的高度是固定的。

所以我的观点如下：

```
This is my Text
|IMAGE1|IMAGE2|
This is my second text 
```

有什么建议么？

# html - css规则名称的最佳方式是什么？

> ID：12425431
> 
> 赞同：0
> 
> 时间：2012-09-14T13:19:56.630
> 
> 标签：html, css, stylesheet

许多 ajax 调用意味着您正在从不同的模板视图中获取内容。在这种情况下，一些 id 可能会重复。所以我想知道如何命名样式规则的最佳逻辑。我目前正在两个选项之间做出决定：

*   为每个 id 添加前缀。每个选择器看起来像#templateName-idName
*   将每个模板包装到一个带有模板名称 id 的 div。所以每个选择器都会以 #templateName #idName 开头

您对此有何看法。用一些前缀绝对分隔每个 id 是个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:29:58.450

使用某种形式的伪命名空间（如 id 前缀）是防止冲突的好主意。从 CSS 的角度来看，您应该尝试创建更多可重用/一致的样式规则，因此通常避免将 id 用于站点结构元素和一次性修复之外的任何内容。显式类/id 标记和组合选择器的组合应该导致更清晰和更可维护的样式表。就 id 而言，这将使组合的 #container-child 约定更可取，因为最初的命名空间原因，同时也强调和利用了 id 的唯一性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:33:54.373

通常，当我做繁重的 AJAX 时，我有以下规则：

大多数情况下，我只会更新“内容”的一个位置。如果我有需要更新小部件等的子 Ajax 调用，这些不必是独特的想法。您可以利用其他 DOM 元素，例如 append 或 insert after 等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:48:24.697

如何同时使用 ID 和类？就像是：

HTML：

```
<div id="templateOne" class="content">
    <!-- content -->
</div>
<div id="templateTwo" class="content">
    <!-- content -->
</div> 
```

CSS：

```
#templateOne.content { /* styles */ }
#templateTwo.content { /* styles */ } 
```

# python - 无法识别导入 - jsonpickle

> ID：12425433
> 
> 赞同：0
> 
> 时间：2012-09-14T13:20:03.553
> 
> 标签：python, jsonpickle

我通过 eclipse 使用 PyDev 并使用 easy_install 来获取 jsonpickle。无论我做什么，我似乎都无法让导入工作。

到目前为止我所尝试的：

*   我已将它从 easy_install.pth 中删除并删除了 egg 并再次安装。
*   将我的 python lib、dll 等文件夹添加到 PYTHONPATH 系统变量
*   重启日食

其他进口工作正常。不知道我做错了什么？

**编辑：**

抱歉应该包括 OS / Python 版本。操作系统：Windows 7 Python：2.7

任何建议都非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:58:14.040

操作系统和python版本？

1.  请使用点子。总是。
2.  pydev 似乎忽略了你的包。它应该在 /usr/share/pythonX.Y/site-packages/jsonpickle，或者，如果在 Windows 上，c:\pythonxx[...]。
3.  如果使用 Linux，请尝试查找 jsonpickle 的发行包。

# php - 翻转关联数组并将新值存储在子数组中以防止丢失重复值

> ID：12425449
> 
> 赞同：4
> 
> 时间：2012-09-14T13:21:14.010
> 
> 标签：php, arrays, associative-array, merging-data, array-flip

我有一个可能包含重复值的平面关联数组。

```
Array (
    [for-juniors] => product_category 
    [for-men] => product_category
    [coats] => product_category
    [for-women] => product_category
    [7-diamonds] => brand
) 
```

我需要重组数据以将原始值存储为新键，并将原始键推入与新键关联的子数组中。

```
array(
    'product_category' => array(
        'for-juniors',
        'for-men',
        'coats',
        'for-women'
    ),
    'brand' => array(
        '7-diamonds'
    )
); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T13:23:14.993

```
$grouped = array();
foreach ($input as $choice => $group) {
    $grouped[$group][] = $choice;
}

var_dump($grouped); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-21T12:57:45.813

这会做：

```
function array_flip_safe(array $array) : array
{
    return array_reduce(array_keys($array), function ($carry, $key) use (&$array) {
        $carry[$array[$key]] ??= []; // PHP 7.0 - ^7.3: $carry[$array[$key]] = $carry[$array[$key]] ?? [];
        $carry[$array[$key]][] = $key;
        return $carry;
    }, []);
} 
```

如果数组不存在，回调将创建一个空数组。然后它将当前迭代的`$key`( `$value`of `array_keys($array)`) 附加到该数组。

这是一个更好理解的示例：

```
$businessHours = [
    'mo' => '13:00 - 16:00',
    'tu' => '8:00 - 12:00',
    'we' => '13:00 - 16:00',
    'th' => '8:00 - 12:00',
    'fr' => '13:00 - 16:00',
    'sa' => '',
    'su' => '',
];

$flipped = array_flip_safe($businessHours); 
```

`ray($flipped);`（或`var_dump`,`var_export`等）输出：

```
array:3 [▼
  "13:00 - 16:00" => array:3 [▼
    0 => "mo"
    1 => "we"
    2 => "fr"
  ]
  "8:00 - 12:00" => array:2 [▼
    0 => "tu"
    1 => "th"
  ]
  "" => array:2 [▼
    0 => "sa"
    1 => "su"
  ]
] 
```

请注意，内部数组值的顺序与原始数组键的顺序相同。

# c++ - 在 CppUnit 中断言迭代器相等

> ID：12425452
> 
> 赞同：0
> 
> 时间：2012-09-14T13:21:28.173
> 
> 标签：c++, cppunit

我已经开始使用 CppUnit 库了。一切正常，但现在，我被使用断言迭代器卡住了`CPPUNIT_ASSERT_EQUAL`。所以有我的代码：

```
void TestingClass::test_adjacent_find()
{
    // Set up
    int a [5] = {1,2,3,3,5};
    int b [5] = {1,2,3,4,5};
    int c [1] = {1};

    std::list<int> lst;
    lst.push_back(1);
    lst.push_back(1);
    lst.push_back(5);

    // Check
    CPPUNIT_ASSERT_EQUAL(a+2, my_adjacent_find(a , a+5, pred_eq<int>));
    CPPUNIT_ASSERT_EQUAL(b+5, my_adjacent_find(b, b+5, pred_eq<int>));
    CPPUNIT_ASSERT_EQUAL(c+1, my_adjacent_find(c, c+1, pred_eq<int>));
    CPPUNIT_ASSERT_EQUAL(lst.begin(), lst.end()); // problem is here
} 
```

当我运行此测试时，我收到以下错误。

```
/opt/local/include/cppunit/TestAssert.h:49:13: 
Invalid operands to binary expression 
('OStringStream' (aka 'basic_ostringstream<char>') 
and 'const std::_List_iterator<int>') 
```

如果我用迭代器注释该行，那么它编译没有任何问题。那么我做错了什么？我应该如何断言两个迭代器的相等性？顺便说一句，我使用 xcode 4.4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T13:37:35.783

请参阅以下`CPPUNIT_ASSERT_EQUAL`宏文档`TestAssert.h`：

`#define CPPUNIT_ASSERT_EQUAL(expected,actual)`

要求`expected`及`actual`参数：

*   它们是完全相同的类型
*   **它们可以使用运算符 << 序列化为 std::strstream**
*   它们可以使用运算符 == 进行比较。

最后两个要求（序列化和比较）可以通过专门化`CppUnit::assertion_traits`.

所以问题的根本原因是`std::list::iterator`无法序列化为`std::strstream`. `CppUnit::assertion_traits`您需要按照文档描述为它编写自己的专业化，或者只是避免`CPPUNIT_ASSERT_EQUAL`和使用`CPPUNIT_ASSERT`：

```
CPPUNIT_ASSERT(lst.begin() == lst.end()); 
```

# android - 在 SlidingDrawer 中布置 2 行 3 个按钮

> ID：12425453
> 
> 赞同：-1
> 
> 时间：2012-09-14T13:21:30.780
> 
> 标签：android, android-linearlayout, android-relativelayout, slidingdrawer

这是我进行 Android 开发的第五天，所以要温柔！

我正在尝试将两排三个按钮放入我的`SlidingDrawer`，这是我到目前为止所拥有的，但我不明白为什么第二排按钮不可见？

```
<SlidingDrawer
    android:id="@+id/SlidingDrawer"
    android:layout_width="fill_parent"
    android:layout_height="200dip"
    android:content="@+id/drawerButtons"
    android:handle="@+id/slideHandleButton" >

    <Button
        android:id="@+id/slideHandleButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/closearrow" />

    <RelativeLayout
        android:id="@+id/drawerButtons"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#80000000" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/Button01"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Test1" >
            </Button>

            <Button
                android:id="@+id/Button02"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Test2" >
            </Button>

            <Button
                android:id="@+id/Button03"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Test3" >
            </Button>
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/Button04"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Test4" >
            </Button>

            <Button
                android:id="@+id/Button05"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Test5" >
            </Button>

            <Button
                android:id="@+id/Button06"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Test6" >
            </Button>
        </LinearLayout>
    </RelativeLayout>

</SlidingDrawer> 
```

第一行按钮按预期显示，但我没有看到第二行？只是空旷的地方。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:32:51.030

您已经将两个 LinearLayouts 都放在了 RelativeLayout 中，而没有给布局任何提示它应该如何放置其元素。因此，默认情况下，两个 LinearLayout 将在 RelativeLayout 内的 (0,0) 处相互叠加。

一种解决方案是给顶部 LinearLayout 一个 id

```
android:id="@+id/topRow" 
```

然后给 LinearLayout 一个提示，将自身放置在 RelativeLayout 中

```
android:layout_below="@id/topRow" 
```

除此之外，您必须将两个 LinearLayouts 的 layout_height 设置为 wrap_content。否则，第一个 LinearLayout 仍会填充整个 RelativeLayout，而另一个位于屏幕外部下方。

其他解决方案：将 LinearLayouts 包装在具有垂直方向的 LinearLayout 中或使用 GridLayout（>= API 级别 14）。您还可以尝试减少视图树并仅使用一个 RelativeLayout 并使用 layout_below, layout_leftOf, ... 将元素放置在布局内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:36:53.430

```
try this below code : 

<LinearLayout
     android:layout_width="fill_parent"
     android:id="@+id/drawerButtons"
     android:orientation="vertical"
     <LinearLayout>
        // your buttons
     </LinearLayout>
     <LinearLayout>
        // your buttons
     </LinearLayout>
</LinearLayout> 
```

# wpf - WPF tabcontrol tabitem 标题

> ID：12425457
> 
> 赞同：1
> 
> 时间：2012-09-14T13:21:56.360
> 
> 标签：wpf, tabcontrol

我已经在 tabcontrol 中设置了 tabitem 的样式

```
<Style x:Key="TabHeaderStyle" TargetType="{x:Type TabItem}">
        <Setter Property="HeaderTemplate">
            <Setter.Value>
                <DataTemplate >
                    <Grid HorizontalAlignment="Stretch" Height="22">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="20" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="2"  ></RowDefinition>
                            <RowDefinition Height="Auto" ></RowDefinition>
                        </Grid.RowDefinitions>
                        <Rectangle Fill="{Binding  RelativeSource={RelativeSource AncestorType={x:Type TabItem} }, Path=Content.DataContext.HeaderColor}" Grid.ColumnSpan="2"></Rectangle>
                        <TextBlock Grid.Row="1" Text="{Binding RelativeSource={RelativeSource AncestorType={x:Type TabItem} }, Path=Content.DataContext.HeaderInfo}"
                                       VerticalAlignment="Bottom" Margin="4,0,8,0"/>
                        <Button Grid.Row="1" Grid.Column="1" Content="x" ToolTipService.ToolTip="Close this view." BorderBrush="{x:Null}" Background="{x:Null}" Foreground="#FF224A71" VerticalAlignment="Center" Padding="3,0">
                            <Button.OpacityMask>
                                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                    <GradientStop Color="Black" Offset="0"/>
                                    <GradientStop Color="#4BFFFFFF" Offset="1"/>
                                </LinearGradientBrush>
                            </Button.OpacityMask>
                            <ei:Interaction.Triggers>
                                <ei:EventTrigger EventName="Click">
                                    <Controls:CloseTabbedViewAction />
                                </ei:EventTrigger>
                            </ei:Interaction.Triggers>
                        </Button>
                    </Grid>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

当我像这样打开几个标签时，tabitem 看起来不错

![在此处输入图像描述](../Images/078b5b03b75a753aa18cb74ef89ad1b4.png)

这个看起来不错，“x”，右对齐的近视图。我的问题是，当我打开更多选项卡时，标准选项卡控件功能是在选项卡空间很小时添加一行。发生这种情况时，tabitems 会调整大小，但它们似乎没有通知子控件，因为选项卡看起来像这样

![在此处输入图像描述](../Images/0d53c37d8383eb388db17ff53b8e9f22.png)

请注意，“x”没有像以前那样右对齐。我试图将数据模板基于不同样式的网格和堆栈面板，但无济于事。任何人都知道即使我有多行选项卡，我将如何使“x”按钮右对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:32:43.603

你`Grid`的`ColumnDefinitions`会限制它们的宽度（`Auto`意味着*自动调整到内容的大小*）

而是尝试：

```
<Grid.ColumnDefinitions>
   <ColumnDefinition Width="*" />
   <ColumnDefinition Width="20" />
</Grid.ColumnDefinitions> 
```

（另外，我不知道是否会有所作为，但在我的`TabItem`风格中，我通常`Template`使用 a来设置`ControlTemplate`，而不是像你正在做的那样`HeaderTemplate`使用 a来设置）`DataTemplate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:26:05.673

在您的 TabItem 模板中尝试此操作...

```
 <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
 <Setter Property="VerticalContentAlignment" Value="Stretch"/> 
```

让我知道它是否能解决您的问题。我不能在这里测试你的代码。

# c# - 如何在c#中的2个日期之间获取给定“日期名称”的所有日期

> ID：12425458
> 
> 赞同：0
> 
> 时间：2012-09-14T13:21:56.633
> 
> 标签：c#, asp.net, .net, datetime

给定“日期名称”，如何获取给定两个日期之间的所有日期？
例如：**Start_Date** = **2011 年 1 月 1 日**
      **End_Date** = 2011 年**1 月 20 日**
      **日期名称**=**星期日**

在这里，我们需要获取所有日期名称为“SUNDAY”的日期
例如：

```
Jan 02, 2011
Jan 09, 2011
Jan 16, 2011 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-14T13:28:54.023

我喜欢`Enumerable.Range`用于这样的任务：

```
DateTime start = new DateTime(2011,1,1);
DateTime end = new DateTime(2011,1,20);

var datesThatAreSundays = Enumerable
    .Range(start.DayOfYear, end.Subtract(start).Days + 1)
    .Select(n => start.AddDays(n - start.DayOfYear))
    .Where(d => d.DayOfWeek == DayOfWeek.Sunday); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T13:26:29.517

像这样的东西怎么样

```
DateTime startDate = new DateTime(2011, 01, 01);
DateTime endDate = new DateTime(2011, 01, 20);
string dayName = "sunday";

List<DateTime> list = new List<DateTime>();
for (DateTime runDate = startDate; runDate <= endDate; runDate = runDate.AddDays(1))
{
    if (runDate.DayOfWeek.ToString().ToLower() == dayName)
        list.Add(runDate);
} 
```

甚至使用[Enum.TryParse](http://msdn.microsoft.com/en-us/library/dd991317.aspx)

```
DateTime startDate = new DateTime(2011, 01, 01);
DateTime endDate = new DateTime(2011, 01, 20);
string dayName = "sunday";
DayOfWeek dow;
Enum.TryParse(dayName, true, out dow);

List<DateTime> list = new List<DateTime>();
for (DateTime runDate = startDate; runDate <= endDate; runDate = runDate.AddDays(1))
{
    if (runDate.DayOfWeek == dow)
        list.Add(runDate);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T13:23:34.620

```
DateTime startDate = new DateTime(2011, 1, 1);
DateTime endDate = new DateTime(2011, 1, 20);

while (startDate < endDate)
{
   if (startDate.DayOfWeek == DayOfWeek.Sunday)
   {
      // Do something
   }

   startDate = startDate.AddDays(1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T13:26:34.583

未经测试：

```
DateTime start = x;
DateTime end = y;

while (start.DayOfWeek != z)
    start = start.AddDays(1);

while (start <= end)
{
    //DoStuff

    start = start.AddDays(7);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T13:33:00.983

你可以试试这个

```
 var firstDate = new DateTime(2011, 1, 1);
 var lastDate = new DateTime(2011, 1, 20);

 var result = (from el in Enumerable.Range(0, (lastDate - firstDate).Days)
                      let date = firstDate.AddDays(el)
                      where date.DayOfWeek == DayOfWeek.Sunday
                      select date).ToArray(); 
```

# android - 使用光流查找相机支架和墙壁之间的距离

> ID：12425459
> 
> 赞同：2
> 
> 时间：2012-09-14T13:21:57.190
> 
> 标签：android, opencv, distance, opticalflow

是否可以准确地确定墙壁与以正常速度行走的持智能卡的人之间的距离？智能手机中只有一个摄像头。可以通过光流来完成吗？我问这个是因为在谷歌搜索中我发现计算距离可能会产生误导。[在此处](http://www.linkedin.com/groups/How-get-distance-information-from-37629.S.46330803)阅读 Peter Meijer 的评论。

另外，我想知道是否有任何其他选项可以计算步行者行进的距离，因为我拥有的唯一资源是带摄像头和加速度计的智能手机。只需提及算法或提供链接就足够了。

我提供的信息：-

1.  摄像头与墙壁的最大距离

2.  来自 Android 加速度计的加速度以找出用户的大致速度

如果我在问我的问题时不清楚，请发表评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T16:44:36.290

我可以想到两种3种方式：

1.  如果您知道该人所持物体的大小，则可以估计该人与相机的距离，并且无需移动手机即可跟踪该人并获得预计的行进距离。在这里，您需要对人持有的物体进行初始校准，并且您还需要手机中相机的焦距。此外，人走过的线应该与手机的图像平面平行。我在这里认为你的结果对于手机的相机来说是非常不准确的。
2.  第二种方法是使用您拿着手机的高度并指向人的脚。使用可以从加速度计获得的角度来计算与人的距离并进行与上述相同的跟踪（适用相同的条件）。
3.  您可以使用指南针计算经过的角度，并通过方法#2 计算三角形两侧的长度。然后得到另一边，这样更准确，也更简单。

# ruby - Ruby 在调用方法之前检查是否为 nil

> ID：12425465
> 
> 赞同：61
> 
> 时间：2012-09-14T13:22:42.350
> 
> 标签：ruby, null

我在 Ruby 中有一个字符串，我在其上调用 strip 方法来删​​除前导和尾随空格。例如

```
s = "12345 "
s.strip 
```

但是，如果字符串为~~空~~ `nil`，我会收到以下错误。

```
NoMethodError: undefined method `strip' for nil:NilClass 
```

我正在使用 Ruby 1.9 那么`nil`在调用 strip 方法之前检查值是否是最简单的方法是什么？

**更新：**

我在数组中的一个元素上尝试了这个，但遇到了同样的问题：

```
data[2][1][6].nil? ? data[2][1][6] : data[2][1][6].split(":")[1].strip 
```

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2016-01-06T05:22:28.840

[Ruby 2.3.0](https://www.ruby-lang.org/en/news/2015/12/25/ruby-2-3-0-released/)添加了一个*安全导航运算符*( `&.`)，它在调用方法之前检查 nil。

```
s&.strip 
```

如果`s`是`nil`，则此表达式返回`nil`而不是 raise `NoMethodError`。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-14T14:27:07.290

您可以使用`try`ActiveSupport（Rails 库）中的方法

```
gem install activesupport

require 'active_support/core_ext/object/try'
s.try(:strip) 
```

或者您可以使用我的 gem [tryit](https://github.com/sevenmaxis/tryit)，它提供了额外的功能：

```
gem install tryit

s.try { strip } 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-14T16:39:21.020

如果您不介意创建额外的对象，则可以使用以下任一方法：

```
"#{s}".strip
s.to_s.strip 
```

没有额外的对象：

```
s && s.strip
s.strip if s 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-09-14T13:25:38.330

我想最简单的方法如下：

```
s.strip if s 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-09-22T23:47:24.067

我会选择一个`s`永远不可能`nil`开始的解决方案。

如果返回虚假值，您可以使用`||`运算符传递默认值：`some_method`

```
s = some_method || '' # default to an empty string on falsy return value
s.strip 
```

或者，如果`s`已经分配，​​您可以使用`||=`which 做同样的事情：

```
s ||= '' # set s to an empty string if s is falsy
s.strip 
```

为缺少参数或变量提供默认方案是保持代码干净的好方法，因为您不必将逻辑与变量检查混为一谈。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-14T15:35:07.730

如果您想避免问题中出现的错误：

```
s.to_s.strip 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-14T14:29:14.597

`ActiveSupport`附带了一个方法：`try`。例如，如果为 nil`an_object.try :strip`则返回，否则将继续。语法与. 参见 active_support_core_extensions.html [#try](http://guides.rubyonrails.org/active_support_core_extensions.html#try)。`nil``an_object``send`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-09-14T14:17:52.710

适合我的方法（我知道，我不应该污染原始`Object`空间，但它非常方便，我会冒险）：

```
class Object
  def unless_nil(default = nil, &block)
    nil? ? default : block[self]
  end
end

p "123".unless_nil(&:length) #=> 3
p nil.unless_nil("-", &:length) #=> "-" 
```

在您的特定情况下，它可能是：

`data[2][1][6].unless_nil { |x| x.split(":")[1].unless_nil(&:strip) }`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-05-25T20:57:43.810

要完成此处显示的选项，请[使用 Ruby Style Guide 中推荐](https://rubystyle.guide/#double-amper-preprocess)的“Existence Check Shorthand” ：

> 用于`&&=`预处理可能存在或不存在的变量。Using`&&=`将仅在值存在时更改值 [意味着，不是`nil`]，从而无需使用 . 检查其存在性`if`。

所以在你的情况下，你会这样做：

```
s = "12345 "
s &&= s.strip 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-14T13:25:21.160

简单的说：

```
s = s.nil? ? s : s.strip 
```

Tl;dr 检查 s 是否为 nil，然后返回 s，否则，剥离它。

# android - 设备未收到推送通知，而模拟器中的相同代码正在使用 GCM 获取推送通知

> ID：12425466
> 
> 赞同：0
> 
> 时间：2012-09-14T13:22:48.967
> 
> 标签：android, android-emulator, google-cloud-messaging

我准备的应用程序正在使用 GCM 从服务器获取推送通知。

模拟器正在收到推送通知，但当我在设备上安装相同的应用程序时，我的设备没有收到推送通知。

我已向服务器提供了 SENDER_ID 和 API 密钥。注册 ID 和设备 ID 通过代码发送。

我正在使用以下代码获取设备 ID：

```
TelephonyManager telephonyManager1 =(TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
device_id = telephonyManager1.getDeviceId(); 
```

自过去 2 天以来，我一直遇到这个问题，但直到现在都无法解决。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:27:24.943

您是否在 GCM 中注册了设备？要获取注册 ID，您必须执行以下代码：

在 onCreate() 方法中，添加以下代码：

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);
final String regId = GCMRegistrar.getRegistrationId(this);
if (regId.equals("")) {
  GCMRegistrar.register(this, SENDER_ID);
} else {
  Log.v(TAG, "Already registered");
} 
```

在这里，您将获得 regId，您必须将其发送到服务器，以便服务器可以向具有上述 regId 的设备发送推送通知。

如需更多帮助，请参阅[此处](http://developer.android.com/guide/google/gcm/gs.html)

**已编辑**

您也可以在[此处参考此链接](https://stackoverflow.com/questions/11627428/emulator-only-got-gcm-messages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:36:17.273

问题已解决，因为问题来自服务器端。

在 GCM 中，我们不需要提供设备 ID。但只需要发送者 ID、注册 ID 和 API 密钥。

# android - 如何在 Libgdx（非 UI？）线程中运行意图

> ID：12425470
> 
> 赞同：2
> 
> 时间：2012-09-14T13:22:54.457
> 
> 标签：android, libgdx

我用谷歌搜索了一些解释，但没有确切的例子我不明白。我想从 Libgdx touchdown() 线程运行以下代码。

```
 public void goToTheMarket() {
              Intent goToMarket = new Intent(Intent.ACTION_VIEW)
              .setData(Uri.parse("market://details?id=com.myapp"));
       startActivity(goToMarket);
       } 
```

该代码仅在我的“MyActivity 类扩展 AndroidApplication”中没有编译错误。

它在 Libgdx 线程中作为 MyActivity.GoToTheMarket 仅作为静态可见。但我收到错误，无法从非静态运行静态

如果我创建一个类并将其运行为

```
 GoToTheMarket goToTheMarket=new GoToTheMarket() 
```

然后我得到 looper.prepare 运行时错误。

请编写完整的代码如何运行我的代码。非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:21:29.423

您可以参加[IntegratingAndroidNativeUiElements3TierProjectSetup](http://code.google.com/p/libgdx-users/wiki/IntegratingAndroidNativeUiElements3TierProjectSetup)

这是帮助集成 android 原生 ui 和 libgdx 的绝佳指南。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-14T13:31:59.063

试试下面的代码。

context.startActivity();

# android - 无法在数据更改时刷新 ViewPager

> ID：12425482
> 
> 赞同：2
> 
> 时间：2012-09-14T13:23:17.073
> 
> 标签：android, android-viewpager, viewpagerindicator

我正在使用杰克的 ViewPagerIndicator [https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

我正在使用存储在我的 SD 卡中的所有文件名填充 TestFragmentAdapter 上的 string[] CONTENT。

我的问题是，在我的应用程序中使用另一个活动时，当我删除一些文件然后返回 ViewPager 活动（通过某个按钮）时，它不会刷新其内容数据，而是显示空白数据，因为文件不是不再在 SDcard 上（我在 viewpager 上显示的数据实际上是从 sdcard 上的 txt 文件中读取所有数据）。

请帮助我！！！..这是一个很棒的 ViewPager 指示器，我真的很想使用它

这就是我填充它的方式

```
private static File path = new       File(Environment.getExternalStorageDirectory()+File.separator+"Shikhatxt");
private static File[] files = path.listFiles();
private static String[] CONTENT = new String[files.length];

private int mCount = CONTENT.length; 
```

每次单击 ViewPager 按钮时，我都无法弄清楚如何刷新此数据...

谢谢

# performance - Joomla html 页面加载速度慢（不是 js、图像、css）

> ID：12425483
> 
> 赞同：3
> 
> 时间：2012-09-14T13:23:17.287
> 
> 标签：performance, joomla, latency

**我的Joomla**网站（已删除）上任何页面的**基本 html**的加载时间约为 2 秒。

 ***   没有过多的模块（即使是几乎没有内容的页面也需要大约 2 秒的时间来加载：（已删除）
*   没有太多文章（或任何其他会使任何数据库查询过于费力的文章）
*   加载一个小文件需要 <10 毫秒（robots.txt 或图像）
*   基本 html 页面的文件大小在 30-40kb 范围内

是什么导致加载初始 html 页面的速度变慢？我怎样才能找出导致减速的原因（并修复它）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T13:38:02.823

在全局配置中打开调试，看看它是否显示任何慢查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T01:50:50.743

您可以使用许多工具来检查它，我将介绍其中的一些：

*   [http://www.webpagetest.org](http://www.webpagetest.org)
*   [http://tools.pingdom.com](http://tools.pingdom.com)（显示页面大小为**3.6MB**！！！）
*   [*YSlow*](https://addons.mozilla.org/en-US/firefox/addon/yslow/)（ *Firefox*插件）
*   [*PageSpeed*](https://developers.google.com/speed/pagespeed/)（ *Chrome*和*FF*的插件）

使用第一个工具提供的分析，您会发现网站运行缓慢的主要原因是：

1.  您没有[启用压缩](http://www.mydigitallife.info/configure-and-enable-gzip-compression-with-mod_deflate-to-speed-up-apache-and-save-bandwidth/)（可以在`httpd.conf`和下配置`.htaccess`）
2.  您没有利用浏览器缓存（可以在我上面提到的文件以及 Joomla 插件中进行配置）。
3.  您的图像未优化，这意味着您拍摄大图像（KB 大小较大）并以较低尺寸显示它们。

解决这三个问题，您的网站将加载更快！**

# java - 学习 Java - 导入和打包基础知识

> ID：12425488
> 
> 赞同：0
> 
> 时间：2012-09-14T13:23:29.220
> 
> 标签：java

我正在阅读我能找到的每一个教程以及一本书，仍然琐碎的概念让我提出问题：

1.  `CLASSPATH`是一个在 JVM 中注册的变量，它告诉 java 开始查找 classes/jars/etc 的根目录？

2.  `import`类似于 include (C/C++) 但通过包提供命名空间？我刚刚阅读了如何在不使用 import 的情况下为每个类（使用 FQCN）显式声明包/命名空间，例如 java.util.String （可能是无效的借口），因为使用 import java.util 将允许我在其他任何地方代码简单地将类称为字符串。

让我对导入感到困惑的是一些使用导入的示例，例如：

```
import java.util.*;  // import all public classes from java.util package
import java.util.Hashtable;  // import only Hashtable class (not all classes in java.util   package) 
```

是的，这篇文章也跟进了：

请注意，我们可以调用存储在包级别的公共类，我们只进行导入。我们不能使用任何属于我们导入包的子包的类。例如，如果我们导入包`world`，我们可以只使用`HelloWorld`类，但不能使用`HelloMoon`类。

那么，当我在导入中使用 * 时，是不是递归地导入所有子包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:34:18.810

你是对的。

与 C/C++ 包含不同，Java 的导入是可选的，因为 Java 会加载它在 CLASSPATH 中找到的所有类。

Java 的 import 语句允许您为常用类起别名，因此您不必每次都完全限定它们。

假设您定义了以下类：

```
package com.foo.bar;

public class Bazz {
    public static final int ONE = 1;
    public static final int TWO = 2;
    public static final int THREE = 3;

    ... some methods ...
} 
```

有几种使用导入的方法：

```
import com.foo.bar.*;  // import all classes belonging to package com.foo.bar, and com.foo.bar only.
import com.foo.bar.Bazz;  // import class com.foo.bar.Bazz only
import static com.foo.bar.Bazz.*;  // import all static constants in class com.foo.bar.Bazz
import static com.foo.bar.Bazz.ONE;  // import static constant com.foo.bar.Bazz.ONE only 
```

正如您所说，没有办法递归导入包。

顺便说一句，大多数 IDE 会为您自动导入类。例如，当您按 CTRL+SHIFT+O 时，Eclipse 会执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:27:25.257

[7.5.2\. 按需类型导入声明](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html)

```
import java.util.*; 
```

> **使包 java.util 中声明的所有公共类型的简单名称在编译单元的类和接口声明中可用**。因此，简单名称 Vector 指的是包 java.util 中的类型 Vector 在编译单元中该类型声明未被遮蔽（第 6.4.1 节）或隐藏（第 6.4.2 节）的所有位置。
> 
> 该声明可能会被简单名称为 Vector 的类型的单一类型导入声明所遮蔽；由一个名为 Vector 的类型，并在编译单元所属的包中声明；或任何嵌套的类或接口。
> 
> 声明可能会被名为 Vector 的字段、参数或局部变量的声明所掩盖。
> 
> （发生任何这些情况都是不寻常的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:35:12.373

是的。这就是它的作用。
但最好在`import`语句中提供绝对路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T13:29:01.120

正如您在问题中提供的示例一样，当您指定

```
import java.util.*; 
```

您导入 java.util 包中的所有公共类。您不导入驻留在 java.util 包之外的任何公共类。

像 Eclipse 这样的集成开发环境 (IDE) 将为您创建单独的类导入。没有太多理由再编写全局导入（带有星号）了。

# php - 如何为 c、c++、java 开发 Web 编译器

> ID：12425489
> 
> 赞同：1
> 
> 时间：2012-09-14T13:23:29.680
> 
> 标签：php, compiler-construction, evaluation, online-compilation

谁能告诉我我应该如何开发基于 Web 的远程编译界面，基于像 InterviewStreet 或 Codeacademy for c, c++ 这样的编译器？

我想开发使用 PHP （语言无关紧要）

是否有任何用于此类任务的开源 API？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:26:42.257

您可以使用`shell_exec()`和`gcc`。

即基本上使用常用编译器（g++、javac 等）从命令行编译。

始终要注意安全性，限制用户编译和运行已编译程序的权限。

# git - git：如何同步到最新版本

> ID：12425500
> 
> 赞同：5
> 
> 时间：2012-09-14T13:23:45.827
> 
> 标签：git

警告：这里是 git 新手。

我已经使用 git ( ) 下载了一个开源项目（确切地说是 ffmpeg）的源代码`git clone`。我检查了一个较旧的版本以便对其进行测试（`git checkout [version number]`），并且 git 告诉我我现在处于分离的 HEAD 状态。现在我想再次重新同步到最新的远程版本，但我不知道如何。

我不想创建任何本地分支机构。我没有进行任何我想保留的本地更改。当你是一个认真的开发人员（我不是）时，我不想做 git 可以做的任何花哨的事情。我只希望我的本地源代码树与最新的远程版本相同。

`git checkout .`不做任何事情。`git pull`告诉我我目前不在分支上。除了擦除所有内容并`git clone`再次执行之外，我还能做什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-14T13:30:25.727

> 我不想创建任何本地分支机构。

你当然知道。你只需要一个“本地跟踪分支”，它是一个跟踪远程分支的分支，可以很容易地与项目保持同步。

试试这个：

```
git checkout master ;# you should have a 'master' branch by default
git pull ;# to get the newest changes from the remote repo 
```

随时在该分支上发布`git pull`您想要与遥控器保持最新的问题。您可以使用 来查看本地跟踪分支是如何配置的，即使您不想做花哨的 git 东西`git remote show origin`，我也强烈建议您花一点时间在[git-scm 文档中。](http://git-scm.com/documentation)一点背景知识将帮助您以几乎任何您想要的方式导航该源代码树。

# php - 用于从 html 获取属性的库

> ID：12425502
> 
> 赞同：0
> 
> 时间：2012-09-14T13:23:57.350
> 
> 标签：php, html

我正在寻找一个库、类、函数等，我可以向它提供一个 html 字符串并找到诸如 src 或 href 之类的东西。我知道我可以为特定情况找到一个正则表达式，但我正在寻找一个可以轻松获取东西而无需每次都找出新的正则表达式的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:26:00.810

[在这种情况下， SimpleHTMLDOM](http://simplehtmldom.sourceforge.net/)是您的朋友。REGEX 从来都不是最好的方法（对于 HTML 标签）。

**例子：**

```
$html = file_get_html('http://www.google.com/');

// Find all images 
foreach($html->find('img') as $element) {
       echo $element->src . '<br>'; # givs you the image 'src' attribute for each image on that page.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:47:58.983

假设您使用的是 PHP5，它已经在 DOMDocument 类中提供给您：

[http://docs.php.net/manual/en/domdocument.loadhtml.php](http://docs.php.net/manual/en/domdocument.loadhtml.php)

# operators - 运算符 '<<' 和 '>>' 有什么作用？

> ID：12425507
> 
> 赞同：3
> 
> 时间：2012-09-14T13:24:21.780
> 
> 标签：operators, go

[我在http://tour.golang.org](http://tour.golang.org)上关注“GO 之旅” 。表 15 有一些我无法理解的代码。它使用以下语法定义了两个常量：

```
const (
    Big = 1<<100
    Small = Big>>99
) 
```

我根本不清楚这意味着什么。我尝试修改代码并使用不同的值运行它，以记录更改，但我无法理解那里发生了什么。

然后，它在表 24 上再次使用该运算符。它使用以下语法定义了一个变量：

`MaxInt uint64 = 1<<64 - 1`

当它打印变量时，它会打印：

`uint64(18446744073709551615)`

类型在哪里`uint64`。但我不明白`18446744073709551615`从哪里来。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T13:30:15.750

它们是[Go 的按位移位运算符](http://golang.org/ref/spec#Arithmetic_operators)。

[这](http://www.cprogramming.com/tutorial/bitwise_operators.html)是对它们如何在 C 中工作的一个很好的解释（它们在多种语言中以相同的方式工作）。基本上`1<<64 - 1`对应2^64 -1, = 18446744073709551615。

这样想吧。在十进制中，如果你从 001（即 10^0）开始，然后将 1 向左移动，你最终会得到 010，即 10^1。如果你再次移动它，你会以 100 结束，即 10^2。因此，向左移动相当于将移动次数乘以 10。

在二进制中它是一样的，但在基数 2 中，所以 1<<64 表示乘以 2 64 次（即 2 ^ 64）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-14T13:29:09.250

这与 C 系列的所有语言中的相同：有点转变。

请参阅[http://en.wikipedia.org/wiki/Bitwise_operation#Bit_shifts](http://en.wikipedia.org/wiki/Bitwise_operation#Bit_shifts)

此操作通常用于将无符号整数乘以或除以 2 的幂：

```
b := a >> 1 // divides by 2 
```

`1<<100`很简单`2^100`（就是大）。

`1<<64-1`是 2⁶⁴-1，这是您可以用 64 位表示的最大整数（顺便说一下，您不能表示`1<<64`为 64 位 int，表 15 的要点是证明您可以在 Go 中以数字常量的形式使用它） ）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T13:33:25.487

>> 和 << 是逻辑移位操作。你可以在这里看到更多关于这些的信息：

[http://en.wikipedia.org/wiki/Logical_shift](http://en.wikipedia.org/wiki/Logical_shift)

[此外，您可以在其网页](http://golang.org/ref/spec#Operators)中查看所有 Go 运算符

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T13:30:34.597

这是一个[合乎逻辑的转变](http://en.wikipedia.org/wiki/Logical_shift)：

> 操作数中的每个位都简单地移动给定数量的位位置，并且空位位置被填充，通常用零

[围棋运算符](http://golang.org/ref/spec#Operators)：

```
<<   left shift             integer << unsigned integer
>>   right shift            integer >> unsigned integer 
```

# git - 使用 Git 的耐心差异算法进行交互式添加

> ID：12425511
> 
> 赞同：21
> 
> 时间：2012-09-14T13:24:24.913
> 
> 标签：git, git-diff, git-add, git-patch

我想`git diff`在`--patience`. `git add -p`我怎样才能做到这一点？

背景：我正在处理一些 XML 文件，并且由于“未对齐”的进入/退出标签，其`git diff`正常算法[会产生非常差的差异](https://stackoverflow.com/a/4045087/220155)。如果我运行`git diff --patience`，我会得到更多有用的差异，但是没有明显的方法可以在`git add -p`.

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-11T07:45:53.227

`git add -p`当前拒绝 diff 标志，但您可以使用`diff.algorithm`config 选项：

```
git config --global diff.algorithm patience 
```

[Git 1.8.2](https://git-htmldocs.googlecode.com/git/RelNotes/1.8.2.txt "发布时间：2013-03-13")中的新功能。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-09-10T16:13:59.030

这对我有用：

```
git -c diff.algorithm=patience add -p [...] 
```

我在 Cygwin 中运行最新的 git v2.1.0。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-14T13:37:47.080

嗯...您可以做的一件事是将输出管道`git diff`传输到一个临时位置，然后将其读回`git apply`：

```
git diff --patience <commitA> <commitB> > /tmp/patch.out
# checkout a new branch or otherwise do what you need to prep
git apply < /tmp/patch.out 
```

这会将 diff 的输出应用到工作目录，但不会提交或暂存更改。然后您可以`git add -p`像往常一样运行，`--patience`差异将是您以交互方式添加的更改。

如果它更适合您的工作流程，您没有理由不能直接通过管道`diff`传输。`apply`这是我在重建自己的本地分支机构以进行生产集成时经常做的事情。

看起来您也可以将其用作[合并策略，](https://stackoverflow.com/a/8668051/877115)因此可能不是以交互方式添加差异，而是可以简单地创建一个包含所需内容的分支，然后将其合并。

# opencv - 重建opencv 2.1 debian包

> ID：12425515
> 
> 赞同：0
> 
> 时间：2012-09-14T13:24:42.743
> 
> 标签：opencv, package, debian

我正在尝试为 opencv 2.1 重建 debian 包，为支持硬浮点的 armel 创建一个包。我正在遵循[本指南](http://raphaelhertzog.com/2010/12/15/howto-to-rebuild-debian-packages/)，但是当我使用命令*debuild -us -uc -aarmel*时，出现以下错误试图读取 CMakeLists.txt 文件：

```
CMake Error: Error in cmake code at
/home/rodrigo/tmp/opencv-2.1.0/CMakeLists.txt:1214:
Parse error.  Function missing ending ")".  Instead found unterminated string with text ")

#----------------------------------------------------------------------------
#   Generate the OpenCVConfig.cmake file for unix
#      installation in CMAKE_INSTALL_PREFIX
#----------------------------------------------------------------------------
".
-- Configuring incomplete, errors occurred! 
```

它在文件末尾给了我一个奇怪的错误，好像我在函数末尾缺少一个“）”，事实并非如此，正如您在完整的[CMakeLists.txt 文件](http://pastebin.com/aeNzK4Tr)中看到的那样。

我没有太多从源代码重建软件包的经验。以前有人见过这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-03T21:38:17.623

I had the same problem and it turned out to be mismatched quote characters. I had been editing the CMakeLists file using textEdit on the Mac and it inserted a right double quotation mark rather than a neutral double quotation mark, which is what was at the other end of the string.

As a result the string had quotes at each end but the quotes didn't match, hence the error.

# python - Python：模式检测和规则生成

> ID：12425520
> 
> 赞同：0
> 
> 时间：2012-09-14T13:25:08.557
> 
> 标签：python, regex, pattern-matching, yacc, rule-engine

我需要一个模式解释和规则生成系统。基本上它的工作原理是它应该解析文本并从中解释模式，并且基于这些解释，我需要输出一组规则。这是一个例子。假设我有一个看起来像的 HTTP 标头

```
GET https://website.com/api/1.0/download/8hqcdzt9oaq8llapjai1bpp2q27p14ah/2139379149 HTTP/1.1
Host: website.com
User-Agent: net.me.me/2.7.1;OS/iOS-5.0.1;Apple/iPad 2 (GSM)
Accept: */*
Accept-Language: en-us
Accept-Encoding: gzip, deflate 
```

解析器将运行并输出

```
req-hdr-pattern: "^GET[ ].*/api/1\\.0/download/{STRING:auth_token}/{STRING:id}[].*website\\.com" 
```

上述规则包含正则表达式的修改版本。每个变量，例如 STRING:auth_token 或 STRING:id 都将被提取。

为了解析文本（在这种情况下为标题），我必须告诉解析器它需要提取“下载”之后的任何内容。所以基本上有一组规则的定义，这个解析器将使用这些规则来解析文本并最终输出最终规则。

现在的问题是，python 中有没有这样的模块可用于模式匹配、检测、生成可以帮助我解决这个问题？这有点像编译器的解析器部分。在深入尝试自己制作一个之前，我想问一下。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:32:26.180

我认为这已经在以下方面得到了回答：

[解析器生成](https://stackoverflow.com/questions/3976665/parser-generation)

[Python解析器模块教程](https://stackoverflow.com/questions/5359260/python-parser-module-tutorial)

我可以保证你想要的很容易使用 pyparsing 模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:37:24.993

你最好自己做这个。这不是很多工作。

正如您所说，您必须将正则表达式定义为规则。然后，您的程序将找到匹配的正则表达式并将匹配转换为输出规则。

** 编辑 ** 我认为没有图书馆可以做到这一点。如果我对您的理解正确，您想指定一组像这样的规则：

下载后提取

这将输出如下文本：

```
req-hdr-pattern: "^GET[ ].*/api/1\\.0/download/{STRING:auth_token}/{STRING:id}[].*website\\.com" 
```

为此，您必须创建一个解析器来解析您的规则。根据规则语法的复杂性，您可以使用 pyparsing、使用正则表达式或手动操作。我的经验法则是，如果你的语法是递归的（比如 html），那么使用 pyparsing 是有意义的，否则就不值得了。

根据这些解析的规则，您的程序必须创建新的正则表达式来匹配输入文本。基本上，您的程序会将规则转换为正则表达式。

使用这些正则表达式，您将匹配从输入文本中提取数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T14:12:31.677

抱歉，如果这不是您想要的，但我有点赶时间。Python 的 re 模块文档[包含有关编写标记器的部分](http://docs.python.org/py3k/library/re.html#writing-a-tokenizer)。
它的文档不足，但可能会帮助您使某些东西可行。
当然比自己标记事物更容易，尽管可能无法提供您所追求的灵活性。

# c# - 强制 AutoFixture 使用最贪婪的构造函数

> ID：12425521
> 
> 赞同：24
> 
> 时间：2012-09-14T13:25:08.297
> 
> 标签：c#, autofixture

我有一个具有多个构造函数的数据类型，我需要 AutoFixture 来选择最贪婪的（一个参数最多的）。默认行为是选择编号最小的构造函数。

作者的博客文章[http://blog.ploeh.dk/2009/03/24/HowAutoFixtureCreatesObjects.aspx](http://blog.ploeh.dk/2009/03/24/HowAutoFixtureCreatesObjects.aspx)似乎并没有暗示有一种方法可以覆盖这种行为，所以有可能吗？如果有，怎么做？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-14T13:50:28.347

[这当然是可能的](http://blog.ploeh.dk/2011/04/19/ConstructorStrategiesForAutoFixture.aspx)。

要更改单个类型 ( `MyClass`) 的策略：

```
fixture.Customize<MyClass>(c => c.FromFactory(
    new MethodInvoker(
        new GreedyConstructorQuery()))); 
```

全面改变战略：

```
fixture.Customizations.Add(
    new MethodInvoker(
        new GreedyConstructorQuery())); 
```

* * *

然而，事实证明，如以下代码片段所示，全面使用 GreedyConstructorQuery 很可能存在问题。想象一个带有这个构造函数的类：

```
public Foo(string name)
{
    this.name = name;
} 
```

此测试将引发异常：

```
[Test]
public void GreedyConstructor()
{
    Fixture fixture = new Fixture();
    fixture.Customizations.Add(new MethodInvoker(new GreedyConstructorQuery()));

    Foo foo = fixture.CreateAnonymous<Foo>();
} 
```

抛出的异常是：

> Ploeh.AutoFixture.ObjectCreationException ：AutoFixture 无法从 System.SByte* 创建实例，很可能是因为它没有公共构造函数，是抽象或非公共类型。

那么 SByte* 是怎么回事？Foo 中没有 SByte* ...

嗯，是的。通过将 MethodInvoker 置于 Customization 中，它会覆盖*所有*默认创建策略，包括用于字符串的策略。相反，它会寻找最贪婪的字符串构造函数，即：

```
public String(sbyte* value, int startIndex, int length, Encoding enc); 
```

还有 sbyte*...

* * *

仍然可以用贪心算法*替换*适度的构造函数选择算法，它只是比我最初意识到的要复杂一点。

你可以做的是：

写一个像这样的小类：

```
public class GreedyEngineParts : DefaultEngineParts
{
    public override IEnumerator<ISpecimenBuilder> GetEnumerator()
    {
        var iter = base.GetEnumerator();
        while (iter.MoveNext())
        {
            if (iter.Current is MethodInvoker)
                yield return new MethodInvoker(
                    new CompositeMethodQuery(
                        new GreedyConstructorQuery(),
                        new FactoryMethodQuery()));
            else
                yield return iter.Current;
        }
    }
} 
```

并像这样创建 Fixture 实例：

```
Fixture fixture = new Fixture(new GreedyEngineParts()); 
```

那应该行得通。

# algorithm - MATLAB 中的波峰和波谷（但有相应的波峰和波谷定义）

> ID：12425527
> 
> 赞同：0
> 
> 时间：2012-09-14T13:25:15.690
> 
> 标签：algorithm, matlab, while-loop

我想在给定的数据向量中寻找峰值和谷值，定义如下。

“峰”是比前一个波谷至少高 x% 的局部最大值，而“波谷”是比前一个波峰低至少 x% 的局部最小值。这里的 x 称为截止值。在我正在写的论文中，截止值被称为数据的标准偏差。

我想写一个函数来让我找到一个高峰和一个低谷。我写的函数就是这个。我将从主要数据中调用它。

```
function [vectpeak,vecttrough]=peaktrough(cutoff,x,lastobs,t)

% This function gives you two outputs: a vector of ones and zeros that locate PEAKS and     
% a vector of ones and zeros that locate TROUGHS. 
% To be able to get a vector of peaks and troughs, we have to give 
% four inputs.
% CUTOFF: This is what Chang and Osler [1999] use to identify if a data
% point is a peak or a trough. A PEAK is defined as "a local maximum that is
% x percent higher than the preceding trough." (Chang and Osler, 1999) 
% and a TROUGH is defined as "a local minimum that is x percent lower 
% than the preceding peak." This is a scalar.
% VECTOR: This is the vector of data that will be used for the purposes of
% the identification.
% LASTOBS: This is the last observation of the data.
% t: This specifies the time.

% Pre-allocations.
vectpeak=zeros(lastobs,1); % This is the vector of peaks.
vecttrough=zeros(lastobs,1); % This is the vector of troughs.

% Computing for the troughid's and peakid's.
temptroughid=troughid(cutoff,x,lastobs,t);
temppeakid=peakid(cutoff,x,lastobs,t);

 % Determining whether a function is a peak or a trough.
 while t<lastobs
    t=t+1;
    if x(t)>=temptroughid(t);
        vecttrough(t)=1;
        vectpeak(t)=0;
        maximum=x(t);
    elseif x(t)<=temppeakid(t);
            vecttrough(t)=0;
            vectpeak(t)=1;
            minimum=x(t);
    else
            vecttrough(t)=0;
            vectpeak(t)=0;
    end
end

function findtrough=troughid(cutoff,y,lastobs,t)
% This function computes for the TROUGHID which will be used in
% determining whether we have a trough or a peak.

% Initializations. 
findtrough=zeros(lastobs,1);
tempmin=zeros(lastobs,1);
minimum=y(1);

% This is how the function works.
while t<lastobs;
    t=t+1;
    if y(t)<minimum;
       tempmin(t)=y(t);
       minimum=y(t);
    else tempmin(t)=minimum;
    end
    findtrough(t)=tempmin(t)*(1+cutoff);
end
end

function findpeak=peakid(cutoff,y,lastobs,t)
% This function computes for the PEAKID which will be used in
% determining whether we have a peak.

% Initializations.
findpeak=zeros(lastobs,1);
tempmax=zeros(lastobs,1);
maximum=y(1);

% This is how the function works.
while t<lastobs;
     t=t+1;
     if y(t)>maximum;
       tempmax(t)=y(t);
       maximum=y(t);
    else tempmax(t)=maximum;
    end
    findpeak(t)=tempmax(t)*(1-cutoff);
end
end
end 
```

我得到的问题是我得到了奇怪的结果。例如，我得到一个向量，其中所有都是波峰，没有波谷，这是没有意义的，因为如果我使用`findpeaks`MATLAB 的命令，我能够识别波峰和波谷，并且它们不是连续的。

有没有办法可以调整我的代码，或者如果没有，可以使用 findpeaks 或其算法根据我的定义找到峰值和谷值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:40:56.040

事实上，您的代码实际上并没有识别峰值或谷值。我认为您可能应该从 findpeaks 开始获取候选峰和谷的列表。然后，逐步浏览此列表以测试是否每个都满足条件。

# symfony - How to make a macro in Twig?

> ID：12425530
> 
> 赞同：1
> 
> 时间：2012-09-14T13:25:29.210
> 
> 标签：symfony, twig

I use a big piece of code for displaying friends and I use it in several templates, so I wanted to make it a macro, but the syntax is a way unusal and I don't know if there is a way this to be done.

The part of the code, which I want to seperate is:

```
 {% if(fr.email != null) %}
            <p>
                <span class ="label">Email Address: </span> 
                <a  class="email" href="{{ path('friend_email', {'id': fr.id}) }}">
                    {{ fr.email }}
                </a>
            </p>
        {% endif %}

        {% if(fr.phone != null) %}
            <p>
                <span class="label">Phone: </span>
        {{ fr.phone }}
            </p>
        {% endif %} 
```

and so on for about 10 variables. In another template I use this, but instead of fr.email, fr.phone and so on, I need friend.email, friend.phone...

I tried this but without success:

```
{% macro display_friend(fr) %}

    {% if({{ fr }}.email != null) %}
            <p>
                <span class ="label">Email Address: </span> 
                <a  class="email" href="{{ path('friend_email', {'id': {{ fr }}.id}) }}">
                    {{ {{ fr }}.email }}
                </a>
            </p>
        {% endif %}

        {% if({{ fr }}.phone != null) %}
            <p>
                <span class="label">Phone: </span>
        {{ {{ fr }}.phone }}
            </p>
        {% endif %}
{% endmacro %} 
```

If necessary, I can use fr.email, fr.phone, fr.* ... in each template, so maybe inheritance will work?

So my question is: is there a way to make this part of code macro and if yes will it be better or inheritance will be better?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T13:42:42.540

In your situation, rather than a using a macro I would just include a twig file, using the with option. For example, you can do:

```
{% include 'AcmeDemoBundle:Demo:showFriend.html.twig' with {'fr': friend} %} 
```

and showFriend.html.twig will be:

```
 {% if(fr.email != null) %}
        <p>
            <span class ="label">Email Address: </span> 
            <a  class="email" href="{{ path('friend_email', {'id': fr.id}) }}">
                {{ fr.email }}
            </a>
        </p>
    {% endif %}

    {% if(fr.phone != null) %}
        <p>
            <span class="label">Phone: </span>
    {{ fr.phone }}
        </p>
    {% endif %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:34:55.400

Within the [macro](http://twig.sensiolabs.org/doc/tags/macro.html) you can just use `fr.var` so

```
{% if({{ fr }}.email != null) %} 
```

will become

```
{% if fr.email %} 
```

As you can see, specifying `!= null` is not required (I even doubt if it'll work, it probably should be `fr.email not is null` )

# ruby-on-rails-3 - 弃用警告：无法加载 Heroku 应用程序

> ID：12425533
> 
> 赞同：0
> 
> 时间：2012-09-14T13:25:35.013
> 
> 标签：ruby-on-rails-3, heroku

我的 Rails 应用程序使用的是 3.2.3 版本，我想部署到 Heroku 进行测试（跨浏览器）。我以前从未遇到过问题，但现在我在尝试加载页面时收到“抱歉出现问题”消息。

运行后我在终端中收到此错误消息`heroku run rake db:migrate`：

> 弃用警告：您在供应商/插件中有 Rails 2.3 风格的插件！Rails 4.0 将删除对这些插件的支持。将它们移出并将它们捆绑到您的 Gemfile 中，或者将它们作为 lib/myplugin/* 和 config/initializers/myplugin.rb 折叠到您的应用程序中。有关更多信息，请参阅发行说明：[http](http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released) ://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released 。（从 /app/config/environment.rb:5 调用）

当我查看我的插件文件夹时，只有一个空的 gitkeep 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T13:28:46.967

这只是一个警告，不会导致异常/500 错误（“抱歉，出了点问题”）。通过 检查日志`heroku logs`，其他原因导致此异常，您应该能够在其中看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:42:40.543

发现问题，是菜鸟错误。我不得不设置

```
 config.assets.compress = true 
```

“真实”是重要的部分。

# javascript - 在 window.onload 上运行两个函数（一个在外部文件中，一个在内联 Javascript 中）

> ID：12425545
> 
> 赞同：1
> 
> 时间：2012-09-14T13:26:14.460
> 
> 标签：javascript, javascript-events

我正在开发一个网站，并且我有一个外部 JavaScript 文件，该文件链接到该网站的每个页面，该页面在 window.onload 事件被触发时执行。JavaScript 在所有不包含任何内联 JavaScript 的页面上都可以正常执行。

任何包含内联 JavaScript 的页面还包含一个 JavaScript 函数，该函数在 window.onload 事件被触发时执行。

我遇到的问题是，当 window.onload 被触发时，外部 JavaScript 不会执行，只有内部 JavaScript 会执行。看起来好像内联 JavaScript 函数覆盖了外部 JavaScript 文件中的函数。

我知道我的外部 JavaScript 文件首先被执行，然后内联 JavaScript 被执行。无论如何我可以在window.onload上执行这两个功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:34:30.230

如何将第二个执行的脚本更改为如下内容：

```
var onload = function () {
    // Do something
    alert('Hello');
};

if(window.onload) {
    // If a function is already bound to the onload event, execute that too.
    var fn = window.onload;
    window.onload = function () {
        fn();
        onload();
    };
} else {
    window.onload = onload;
} 
```

或者使用像[jQuery](http://api.jquery.com/ready/)这样的库，它可以让你做到：

```
$(document).ready(function() {
    alert('Hello');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:31:24.177

这可能比适当的修复更能解决问题，但是您可以将内联 JS 放在 html 页面的底部，以便在页面加载后自动调用它。这意味着您不必实际使用`window.onload()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:31:53.110

两种方式：

1 - 使用 addEventListener。

```
window.addEventListener("load", function(){ /*code*/ }, false); 
```

2 - 使用这样的黑客：

```
var func = window.onload;
window.onload = function() {
    if ( func ) func();
    /* code */
}; 
```

# java - 用于类型列表和类型集合的 Java 数据结构

> ID：12425546
> 
> 赞同：1
> 
> 时间：2012-09-14T13:26:17.817
> 
> 标签：java, data-structures

我有一个集合，其中每个节点要么是 A 类，要么是 A 类的集合。

这也是递归的，因为 A 类集合中的每个节点都可以是 A 类或 A 类的集合。

我目前只是使用 List，然后检查 Object 以查看它是 Class A 还是 Class A List，但这似乎违背了使用泛型的目的。我想我需要一个更像树的结构。想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T13:29:17.580

看看[复合](http://en.wikipedia.org/wiki/Composite_pattern)设计模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T13:31:28.947

当您实例化一个泛型类型时，您仍然会在集合中存储同质类型。在现实世界中，您这样做的方式是建立一个将 A 类和 B 类绑定在一起的通用介质、容器或接口。您使用界面来操作这些对象。

或者，默认情况下，您可以将对象视为列表。明白了吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T13:34:38.870

考虑创建一个类 ( `Wrapper<ClassA>`)，它可以包含 的实例`ClassA`或`List`. 然后让你`Lists`和内在`Lists`成为`List<Wrapper<ClassA>>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T13:34:14.770

您应该定义类节点，如下所示

```
 public class Node {
       List<Node> children = new ArrayList<Node>();
    } 
```

# java - 当在 GEF 上打开同一个文件的不同视角时，如何打开不同的插件

> ID：12425552
> 
> 赞同：0
> 
> 时间：2012-09-14T13:26:36.257
> 
> 标签：java, eclipse-rcp, eclipse-gef

我正在使用**RCP + GEF**开发一个项目，该项目基于**GEF Logic 示例**创建一个文件 。

我有两个插件：

*   一种用于设计和编辑网络
*   一种用于实时可视化网络操作..

当我选择透视打开正确的插件时，我该怎么办？

当我和他一起打开文件时，每个插件都能正常工作，但我不知道当我选择透视图时如何自动完成。

我的观点是这样的：

```
public class DesignPerspective implements IPerspectiveFactory {

public static final String ID = "mailteste.DesignPerspective";

public void createInitialLayout(IPageLayout layout) {
    layout.setFixed(true);
    @SuppressWarnings("unused")
    String editorArea = layout.getEditorArea();
    layout.setEditorAreaVisible(true);
    addFastViews(layout);
    layout.addView("org.eclipse.ui.navigator.ProjectExplorer", IPageLayout.LEFT, 0.18f, IPageLayout.ID_EDITOR_AREA);
    layout.addView("org.eclipse.ui.views.ContentOutline", IPageLayout.RIGHT, 0.8f, IPageLayout.ID_EDITOR_AREA);     
    layout.addView("org.eclipse.ui.views.PropertySheet", IPageLayout.BOTTOM, 0.5f, "org.eclipse.ui.views.ContentOutline");
    //layout.addStandaloneView(IPageLayout.ID_OUTLINE, true, IPageLayout.RIGHT, 0.76f,IPageLayout.ID_EDITOR_AREA);  
}

private void addFastViews(IPageLayout layout) {
} 
```

最好的问候亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:53:37.263

你能清楚你在找什么吗？我了解您有两个插件，并且您有固定的视角（在哪个插件中？）

# integration-testing - 在 SONAR 中使用 Jacoco 的 IT 测试覆盖率为 0%

> ID：12425564
> 
> 赞同：6
> 
> 时间：2012-09-14T13:27:43.877
> 
> 标签：integration-testing, code-coverage, sonarqube, jacoco

我在用：

SONAR v.3.2（它有 jacoco）

Maven 3.0.4

按照“ [http://johndobie.blogspot.in/2012/05/easy-unit-and-integration-code-coverage.html#comment-form](http://johndobie.blogspot.in/2012/05/easy-unit-and-integration-code-coverage.html#comment-form) ”获取单元和 IT 测试的单独代码覆盖率。但 IT 测试覆盖率显示为 0%。它正在生成单独的 jacoco-unit.exec (44kb) 和 jacoco-it.exec (14kb)，但仅针对 SONAR 上的单元测试显示覆盖率。

日志显示为：

```
[INFO] [13:10:23.515] Sensor SquidSensor done: 9437 ms
[INFO] [13:10:23.515] Sensor JaCoCoSensor...
[INFO] [13:10:23.578] Analysing ...\target\coverage-reports\jacoco-unit.exec
[INFO] [13:10:30.390] Sensor JaCoCoSensor done: 6875 ms
[INFO] [13:10:30.390] Sensor JaCoCoItSensor...
[INFO] [13:10:30.390] Analysing ...\target\coverage-reports\jacoco-it.exec
[INFO] [13:10:30.469] Sensor JaCoCoItSensor done: 79 ms
[INFO] [13:10:30.484] Sensor SurefireSensor...
[INFO] [13:10:30.484] parsing ...\target\surefire-reports
[INFO] [13:10:30.828] Sensor SurefireSensor done: 344 ms
[INFO] [13:10:30.828] Sensor CpdSensor...
[INFO] [13:10:30.828] SonarEngine is used
[INFO] [13:10:30.844] Cross-project analysis disabled
[INFO] [13:10:32.312] Sensor CpdSensor done: 1484 ms
[INFO] [13:10:32.312] Sensor CheckstyleSensor... 
```

POM 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>com.csr.lts</groupId>
    <artifactId>lts-webapp</artifactId>
    <packaging>war</packaging>
    <name>LTS Webapp</name>
    <url>http://maven.apache.org</url>
    <parent>
        <groupId>com.csr</groupId>
        <artifactId>lts</artifactId>
        <version>0.1-SNAPSHOT</version>
    </parent>

    <properties>
        <coverage.reports.dir>${basedir}/target/coverage-reports</coverage.reports.dir>
        <sonar.jacoco.reportPath>${coverage.reports.dir}/jacoco-unit.exec</sonar.jacoco.reportPath>
        <sonar.jacoco.itReportPath>${coverage.reports.dir}/jacoco-it.exec</sonar.jacoco.itReportPath>
        <sonar.dynamicAnalysis>reuseReports</sonar.dynamicAnalysis>
        <sonar.jacoco.jar>${basedir}/lib/org.jacoco.agent-0.5.10.201208310627-runtime.jar</sonar.jacoco.jar>
    </properties>

    <build>
        <finalName>lts</finalName>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.12.3</version>
                <dependencies>
                    <dependency>
                        <groupId>org.apache.maven.surefire</groupId>
                        <artifactId>surefire-junit47</artifactId>
                        <version>2.12</version>
                    </dependency>
                </dependencies>
                <configuration>

                    <argLine>
                        -javaagent:${sonar.jacoco.jar}=destfile=${sonar.jacoco.reportPath},append=false,includes=com.*
                    </argLine>
                    <includes>
                        <include>**/*Test.java</include>
                        <include>**/Test*.java</include>
                    </includes>
                    <excludes>
                        <exclude>**/IT*.java</exclude>
                    </excludes>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-failsafe-plugin</artifactId>
                <version>2.12.3</version>
                <dependencies>
                    <dependency>
                        <groupId>org.apache.maven.surefire</groupId>
                        <artifactId>surefire-junit47</artifactId>
                        <version>2.12</version>
                    </dependency>
                </dependencies>

                <executions>
                    <execution>
                        <goals>
                            <goal>integration-test</goal>
                        </goals>
                        <configuration>
                            <argLine>
                                -javaagent:${sonar.jacoco.jar}=destfile=${sonar.jacoco.itReportPath},append=false,includes=com.*
                            </argLine>
                            <includes>
                                <include>**/IT*.java</include>
                            </includes>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:16:12.723

您可以在此处查看我们的示例项目：[https ://github.com/SonarSource/sonar-examples/tree/master/projects/languages/java/code-coverage/combined%20ut-it](https://github.com/SonarSource/sonar-examples/tree/master/projects/languages/java/code-coverage/combined%20ut-it)

由于 JaCoCo，您将找到同时报告单元和集成测试覆盖率的项目示例。

# string - LabVIEW - 向字符串控件添加文本而不是重写它

> ID：12425565
> 
> 赞同：1
> 
> 时间：2012-09-14T13:27:48.217
> 
> 标签：string, controls, labview

我设法在我的字符串指示器中放置了文本，但我想知道的是如何在不删除先前文本的情况下向其中添加文本。我尝试在网上搜索，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T13:45:31.387

您可以通过使用局部变量重用其值，然后输入`concatenate strings`.

![在此处输入图像描述](../Images/13e15910c8229326cf121bee78145f0d.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T13:34:37.390

您可以使用`Concatenate Strings`将两个不同的字符串添加到一个字符串中。然后您仍然可以使用第一个字符串而无需任何更改。

[来自 NI 帮助的示例](http://zone.ni.com/reference/en-XX/help/371361D-01/glang/concatenate_strings/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-02T00:11:31.030

对于指标或控件，您还可以使用`Append String`如下函数： [![在此处输入图像描述](../Images/00bb1c3c160a9a8cfd7a0f84b3690eb4.png)](https://i.stack.imgur.com/z2QRV.png)

...然后将要附加的字符串连接到该函数的输入：

[![在此处输入图像描述](../Images/34c3aa9cd11fe1ac31d98867d1463984.png)](https://i.stack.imgur.com/TRAXQ.png)

最终结果与使用`Concatenate Strings`其他人提到的相同，但可能更优雅，因为不需要在框图上连接原始值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-28T21:26:34.907

连接字符串允许您连接多个字符串和字符串数组。

Append String 方法似乎只允许您将单个字符串连接到字符串控件。我猜它更有效，并且在循环中使用更好。

# iphone - 如何声明此应用的设备功能？

> ID：12425570
> 
> 赞同：1
> 
> 时间：2012-09-14T13:28:02.947
> 
> 标签：iphone, objective-c, ios, xcode, requirements

我为 iPhone 4S 创建了一个 iOS 5.1 或更高版本的应用程序，它需要一个磁力计、一个加速度计，并且还使用 Core Location 框架

在声明设备所需的功能时，Apple 的文档有点混乱（对数组或字典选择感到困惑，输入 YES/NO 值等），我想确保我已经正确添加了所有内容。

这就是我的相关部分`info.plist`现在的样子：

```
Required Device Capabilities      Array    (4 items)
          item 0                  String   magnetometer
          item 1                  String   accelerometer
          item 2                  String   location-services
          item 3                  String   armv7 // was already added by default 
```

*（我还在相应的字段中添加了应用程序的名称和一个 appIcon）*

以上信息是否正确，还是我需要添加更多内容或更改某些内容？

此外，该应用程序是为在 iPhone 4S 上运行而创建的。但是上述要求是否也让它在我应该包含的其他 iPhone 版本上运行，或者 iOS 5.1 限制是否限制我的应用程序只能在 iPhone 4S 上运行？

我是否还应该包括可以在某些版本的 iPod Touch 上运行的地方，还是不能在某个版本的 iPod Touch 上运行？

谢谢你的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:33:37.737

目的是提供所需的功能，而不是特定的硬件（iPhone 4、iPod Touch 等）。只要设备实现了所需的功能并具有您所针对的最低操作系统版本，它就能够运行您的应用程序。

# c# - SerialPort 有时会在关闭时挂起

> ID：12425571
> 
> 赞同：4
> 
> 时间：2012-09-14T13:28:07.080
> 
> 标签：c#, .net, serial-port

我正在用 C# 开发一个 .NET 4.0 WPF 应用程序，它通过 RS232 控制电机。退出我的应用程序时遇到问题，应用程序在关闭 comport 时有时会死锁。

在互联网上进行一些研究后，我注意到这是一个常见问题，在 DataReceivedEvent 中使用 BeginInvoke 或在不同的线程中关闭串行端口应该可以解决问题。这些变通办法的问题在于。1\. 我不使用 DataReceiveEvent。2.在另一个线程中关闭串口没有任何区别。发生的情况是 GUI 关闭，但您可以在 TaskManager 中看到该进程仍在运行。

我尝试过的其他事情是：

*   不关闭串口，只退出应用程序。这成功关闭了应用程序和进程，但串口仍然被阻塞，要解除对串口的阻塞，我需要重新启动计算机。
*   在我关闭串行端口之前和之后睡了几秒钟。
*   让应用程序成为 WinForms 应用程序。而不是 WPF。两者的僵局没有区别。

我运行该程序的计算机使用安装在主板上并具有 Microsoft 驱动程序的 com 端口。

现在看一些代码：

Window_Closing 事件如下所示：

```
private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e)
{
    window.Closing -= Window_Closing;            
    Thread CloseDown = new Thread(new ThreadStart(server.Dispose)); //Closes serialport everything in another thread to avoid hang on serialport close.
    CloseDown.Start();
} 
```

`server`管理串口的对象在哪里。并`Dispose`调用串口关闭函数。

串口关闭功能：

```
public void Close()
{
    DebugLog.Write(3, "-->MacCommSerialPort.Close");
    _com.Close();                        
    DebugLog.Write(3, "<--MacCommSerialPort.Close");
} 
```

串口设置：

```
_com = new SerialPort(portNumber);
_com.BaudRate = 19200;
_com.Parity = Parity.None;
_com.DataBits = 8;
_com.Encoding = Encoding.GetEncoding("Windows-1252");
_com.StopBits = StopBits.One;
_com.RtsEnable = false;
_com.DtrEnable = false;
_com.WriteTimeout = 400;
_com.ReadTimeout = 1000; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T05:56:27.787

我只是碰巧查看了您的代码，并猜测您应该在关闭 GUI 之前使用 AutoThreadRest 事件。

```
private static AutoResetEvent PortClosedEvent = new AutoResetEvent(false);

private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e) 
    { 
        window.Closing -= Window_Closing;             
        Thread CloseDown = new Thread(new ThreadStart(server.Dispose));
        CloseDown.Start(); 
        PortClosedEvent.WaitOne(); 
    } 
```

在你完成连接处理后，在 server.Dispose 方法中添加下面的代码行。

```
PortClosedEvent.Set(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T20:59:06.050

我会检查以确保您的应用程序和电机（即发送器和接收器）之间的握手协议匹配。

# c# - 如何使用 ServiceStack JsonSerializer 序列化 Hashtable？

> ID：12425572
> 
> 赞同：2
> 
> 时间：2012-09-14T13:28:08.457
> 
> 标签：c#, json, hashtable, servicestack

我正在尝试`Hashtable`用 ServiceStack序列化一个`JsonSerializer`。然而，与 Json.Net 和 built-in 不同`JavaScriptSerializer`，它返回类型名称`DictionaryEntry`而不是值。

这段代码：

```
Hashtable h = new Hashtable(){ { "A", 1 }, { "B", 2 } };

Console.WriteLine(JsonConvert.SerializeObject(h));
Console.WriteLine(new JavaScriptSerializer().Serialize(h));
Console.WriteLine(ServiceStack.Text.JsonSerializer.SerializeToString(h, typeof(Hashtable))); 
```

返回这个：

```
{"A":1,"B":2}
{"A":1,"B":2}
["System.Collections.DictionaryEntry","System.Collections.DictionaryEntry"] 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T11:39:07.367

NuGet 上最新版本的[ServiceStack.Text](https://nuget.org/packages/ServiceStack.Text) (v3.9.11+) 现在包括对 Hashtable 的支持。

# .htaccess - htaccess 301 从旧站点到新站点

> ID：12425575
> 
> 赞同：2
> 
> 时间：2012-09-14T13:28:18.183
> 
> 标签：.htaccess

我有一个客户域，其中有数千个页面正在移动到一个新域。.html 的命名约定已经改变，我知道 htaccess 可以以某种方式处理这个问题。

这是一个例子：

旧网站： http: [//oldsite.com/state/cityname-index.html](http://oldsite.com/state/cityname-index.html)

新网站： http: [//newsite.com/state/computer-support-cityname-index.html](http://newsite.com/state/computer-support-cityname-index.html)

这超出了我目前的理解。我会很感激一点帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:01:09.707

如果要将旧网站页面重定向到新页面，可以使用这样的重写：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^oldsite.com$ [NC]
RewriteRule ^([^/]+)/(.+)-index\.html$ http://newsite.com/$1/computer-support-$2-index.html [QSA,R=301] 
```

第一行激活 htaccess 中的重写。

第二个检查当前请求是否针对旧网站。

如果是，则激活第三行，其中包含一个正则表达式和一个新链接，如果该正则表达式匹配，则重定向到，`[QSA,R=301]`最后是影响重写规则的标志。

我写给您的这条规则捕获了州（第一个括号）和城市名称（第二个括号），然后它重定向到新网站，用捕获的内容替换 $n（其中 n 是之前括号的编号）。

*QSA*标志（查询字符串附加）会将旧站点请求中的任何参数添加到新生成的请求中。

*R=301*标志将生成带有代码 301（永久重定向）的浏览器重定向。

有关 mod_rewrite 的更多信息，请参阅[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# jquery - 选择左侧的内容

> ID：12425576
> 
> 赞同：1
> 
> 时间：2012-09-14T13:28:19.823
> 
> 标签：jquery, css, position

有点奇怪的问题。

有什么方法可以选择（通过 jQuery、JS 或 CSS）容器左侧的 div？

我正在这里的网站[http://goo.gl/2NlTH](http://goo.gl/2NlTH)上工作，该网站的 div 设置在砖石中，因此使用 nth-child 作为左侧的 div 没有奇数、偶数或每 X 个 div 变化基于内容高度。我需要选择 div 在触摸容器的左侧以更改它们的宽度并适当地填充以适应布局。

干杯...对不起这个令人费解的问题-希望该网站有所帮助。

-R

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:41:10.293

当然有可能！

这是 jquery 的选择器代码：

```
$('.masonry-brick[style*="left: 0px"]'); 
```

这个选择左边的砌体div。你可以像这样对他们做任何你想做的事情：

```
$('.masonry-brick[style*="left: 0px"]').css('background-color','red'); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-14T13:32:49.683

**左边**是一个抽象概念，CSS 无法识别它。您可以将所有这些元素分配给某个类，并在该类上应用 CSS。

# solr - Solr 跨多个数据库的增量导入

> ID：12425579
> 
> 赞同：1
> 
> 时间：2012-09-14T13:28:32.057
> 
> 标签：solr, indexing, cross-database, delta-index

我创建了一个 Solr 索引，其文档由两个数据库 db1 和 db2 组成。我可以成功地进行完全导入，如下所示：

```
 <entity name="ent1" dataSource="db1" query="select ID_DB1 from table1">  
       <field column="ID_DB1" name="ID_DB1"/>  

       <entity name="ent2" dataSource="db2" query="select ID_DB2 from table2 where ID_DB2='${ent1.ID_DB1}'">  
       <field column="ID_DB2" name="ID_DB2"/>  
       </entity>    

    </entity> 
```

但是增量导入会抛出 NullPointerException。
如何为这种情况编写 delta-query、parent-delta-query 和 delta-import-query？
任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T04:34:54.463

在 Solr DIH 中可以有多个数据源。看看[这个](http://wiki.apache.org/solr/DataImportHandler#Multiple_DataSources)。您应该为每个指定一个数据源`<entity>`。

# bash - 在 bash shell 中追加运算符

> ID：12425581
> 
> 赞同：0
> 
> 时间：2012-09-14T13:28:44.250
> 
> 标签：bash, shell, ubuntu, ubuntu-12.04

在运行包含此命令的 bash shell 脚本时：

```
iperf -c $server_ip -p $iperf_port -t $iperf_duration >> outputfile 
```

输出多次显示在控制台上，而不是附加到输出文件中。有相同的解决方案吗？我做错什么了吗？我正在使用 Ubuntu 12.04

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T13:30:40.460

我不熟悉`iperf`，但大概它正在将其部分或全部输出写入标准错误而不是标准输出。要将标准错误与标准输出合并并将它们都发送到您的文件，您可以添加`2>&1`到末尾：

```
iperf -c $server_ip -p $iperf_port -t $iperf_duration >> outputfile 2>&1 
```

# java - HQL 按条件排序

> ID：12425587
> 
> 赞同：1
> 
> 时间：2012-09-14T13:29:02.910
> 
> 标签：java, sql, hibernate

我遇到了一个 SQL 问题。

假设这是我的原生 SQL：

```
SELECT * FROM products 
ORDER BY balance <= bottleneck DESC, product_code ASC 
```

这是在 postgressql 工作的。但它不适用于 HQL。我的 HQL 如下：

```
from Products as p order by  p.balance < p.bottleneck desc, p.productCode asc 
```

我遇到了以下异常：

```
Exception in thread "main" org.hibernate.hql.ast.QuerySyntaxException: unexpected AST node: < near line 1, column 67 [from com.inventory.inventory.vo.Products as p order by  p.balance < p.bottleneck]
    at org.hibernate.hql.ast.QuerySyntaxException.convert(QuerySyntaxException.java:54)
    at org.hibernate.hql.ast.QuerySyntaxException.convert(QuerySyntaxException.java:47)
    at org.hibernate.hql.ast.ErrorCounter.throwQueryException(ErrorCounter.java:82)
    at org.hibernate.hql.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:261)
    at org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:185)
    at org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
    at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:101)
    at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:80)
    at org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:98)
    at org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:156)
    at org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:135)
    at org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1760)
    at com.inventory.inventory.dao.impl.ProductsDAOImpl.getProducts(ProductsDAOImpl.java:72)
    at Main.main(Main.java:43) 
```

有什么办法可以解决这个查询吗？

非常感谢您的帮助。

谢谢，最好的 rgds，A1ucard

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:34:06.177

我现在还没有安装 Hibernate，但这应该可以：

```
from Products as p where p.balance < p.bottleneck order by p.bottlenec desc, p.productCode asc 
```

这是一种更“标准”的 SQL 编写方式，因为您在 where 子句*之后放置了顺序。*

**编辑：**

似乎没有办法做你想做的事，至少不使用 HQL。Postgres 有一个比 HQL 更强大的 ORDER BY 子句。

[关于 select 子句](http://www.postgresql.org/docs/9.2/static/sql-select.html)的Postgres文档有“ORDER BY***表达式***”，其中表达式有[它自己的文档页面](http://www.postgresql.org/docs/9.2/static/sql-expressions.html)。

另一方面，Hibernate 的[order by 子句](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch16.html#queryhql-ordering)非常有限。它允许您对列进行排序并使用常规或聚合函数。

交易杀手是这句话：

> group by 子句和 order by 子句都不能包含算术表达式。

因此，您似乎不走运，如果您想获得所需的结果集，则必须使用本机 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:36:12.117

我对 PostreSQL 语法不是很熟悉，但是

```
balance <= b 
```

部分应该在靠近的地方。在 HQL 中，您不能应用 Postgre SQL 特定的语法。

# java - 必须在 EDT 中调用 AWT 类中的所有方法，即非 Swing 方法吗？

> ID：12425588
> 
> 赞同：1
> 
> 时间：2012-09-14T13:29:04.013
> 
> 标签：java, swing, awt, event-dispatch-thread

我最近了解到 Sun 的/Oracle 的最新指南说，任何 Swing 对象（包括构造函数）的任何 Swing 方法都必须在 EDT 之外调用。

相同的严格标准是否也适用于所有“视觉”AWT 类？如果不是，那么 ** 对他们的规则是什么？

***之后***

关于 Swing 和 EDT：2009 年的讨论。

[http://www.velocityreviews.com/forums/t707173-why-does-jdk-1-6-recommend-creating-swing-components-on-the-edt.html](http://www.velocityreviews.com/forums/t707173-why-does-jdk-1-6-recommend-creating-swing-components-on-the-edt.html)

引用：“除了实际的线程安全以及可见性和同步等相关问题之外，我认为还有一个软件问题。Swing 组件通常具有某种类型的“侦听器”，这些侦听器旨在在 EDT 上执行。

由于这些侦听器是异步的并响应事件（如属性更改），因此可以在构建 GUI 时触发这些侦听器。结果是当您在主线程中构建时，一些侦听器正在 EDT 上执行，并且一些侦听器也可能在其他线程上运行（因为侦听器被混淆并在错误的线程上触发）。结果是一个不可预测的巨大混乱。”

也许他们不知道他们在说什么......但目前我正在采取“比抱歉更安全”的方法。Potochkin，在[http://weblogs.java.net/blog/alexfromsun/archive/2006/02/debugging_swing.html](http://weblogs.java.net/blog/alexfromsun/archive/2006/02/debugging_swing.html)似乎认为我们熟悉后来更严格的规则

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T16:47:21.197

多线程 Java 程序中的正确同步取决于*发生前的*关系，总结在[*内存一致性属性*](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility)中。AWT 组件*旨在*实现线程安全，在`java.awt.Component`. 请参阅评论以了解一些历史观点：

```
private transient Object objectLock = new Object(); 
```

虽然这对于简单的程序来说可能已经足够了，但更复杂的程序需要依赖于这个实现细节的知识来验证正确的同步。这是可能的，但谁愿意接受脆弱的 AWT GUI？

一些额外的点：

*   @Hovercraft 引用的[文章](http://java.sun.com/products/jfc/tsc/articles/threads/threads1.html)可以追溯到 1998 年，但它已反复更新以解决您引用的 usenet[线程中提到的](http://www.velocityreviews.com/forums/t707173-why-does-jdk-1-6-recommend-creating-swing-components-on-the-edt.html)[新内存模型](http://en.wikipedia.org/wiki/Java_Memory_Model)等问题。

*   的演变`javax.swing`已经远离 GUI API 承诺，正如[这里](https://stackoverflow.com/a/8437172/230513)所提到的，并且朝着更灵活的[并发编程工具](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)发展。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T14:21:01.567

你说：

> 为什么选择 AWT？好问题。我现在正在重写所有 Swing 调用必须在 EDT 中完成的基础上......如果 AWT 稍微宽松一点，这可能对一些简单的 GUI 目的有用......

我的回答是：
这是错误的推理。Swing 更加强大和灵活，就像在购买之前折断小狗的腿一样，这样您就不必走路了。使用 Swing，遵循几乎不可能比 AWT 更繁重的线程规则，并享受。线程规则是有意义的并且不难遵循。同样，[这篇文章](http://java.sun.com/products/jfc/tsc/articles/threads/threads1.html)是一个很好的参考。

# php - 为什么我的 PHP 表单无法正确发送电子邮件？

> ID：12425598
> 
> 赞同：0
> 
> 时间：2012-09-14T13:29:22.543
> 
> 标签：php, html, scripting

它发送电子邮件，但没有正文、主题或任何内容。这就是我得到的：

![在此处输入图像描述](../Images/4fd2f280fa03d913305f361514453a07.png)

HTML：

```
<div class="contact-form">
            <form action="mail.php" method="post">
                <label for="name">Name:<input type="text" id="name" class="text" /></label>
                <label for="email">Email:<input type="text" id="email" class="text" /></label>
                <label for="message">Message:<textarea id="message"></textarea></label>
                <input type="submit" class="submit" value="Send Message" />
            </form>
        </div> 
```

PHP（邮件.php）：

```
<?php

    $name = $_POST['name'];
    $email = $_POST['email'];
    $message = $_POST['message'];

    $recipient = "me@christianselig.com";
    $subject = "Message From Website";
    $headers = "From: " . $email;

    mail($recipient, $subject, $message, $headers);
    echo "Thanks! The message was sent. :)";

?> 
```

有什么见解吗？非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T13:32:28.097

表单字段基于它们的名称而不是它们的 ID。

替换你的：

```
id="(...)" 
```

经过

```
id="(...)" name="(...)" 
```

你应该看看[Swift Mailer](http://swiftmailer.org/docs/sending.html)，它比你当前的方法更安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:34:04.933

您需要在 HTML 输入字段上有一个名称属性。这就是表单用来在`$_POST`数组中创建索引的方式。更正的 HTML 如下

```
<div class="contact-form">
        <form action="mail.php" method="post">
            <label for="name">Name:<input type="text" id="name" name="name" class="text" /></label>
            <label for="email">Email:<input type="text" id="email" name="email" class="text" /></label>
            <label for="message">Message:<textarea id="message" name="message"></textarea></label>
            <input type="submit" class="submit" value="Send Message" />
        </form>
    </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:33:19.247

进入我的服务器工作，你确定在 $_POST 中设置了吗？如果您不能发送电子邮件 assicure 您可以尝试设置 SMTP 来发送您的电子邮件 尝试使用类似 phpmailer 的东西来发送电子邮件。

在您必须输入的每个字段的表单中： - id="example_id" - name="example_name"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T13:33:53.100

您需要为每个 html 元素提供 name 属性。使用下面的 html 代码：

```
<div class="contact-form">
            <form action="mail.php" method="post">
                <label for="name">Name:<input type="text" id="name" name="name" class="text" /></label>
                <label for="email">Email:<input type="text" id="email" name="email" class="text" /></label>
                <label for="message">Message:<textarea id="message" name="message"></textarea></label>
                <input type="submit" class="submit" value="Send Message" />
            </form>
        </div> 
```

# python - 用于数据分析和学习的Python包推荐

> ID：12425602
> 
> 赞同：2
> 
> 时间：2012-09-14T13:29:30.750
> 
> 标签：python, olap, pandas, pytables, cubes

我想在文章发布平台之上构建一个分析引擎。更具体地说，我想跟踪用户的阅读行为（例如文章的浏览次数、打开文章所花费的时间、评分等），以及文章本身的统计信息（例如段落数、作者等） ）。

这将有两个目的：

1.  提供有关用户和文章的见解
2.  向用户提供建议

对于数据分析部分，我一直在研究[cubes](http://packages.python.org/cubes/)、[pandas](http://pandas.pydata.org/)和[pytables](http://www.pytables.org/moin)。数据很多，存储在 MySQL 表中；我不确定这些软件包中的哪一个会更好地处理这样的后端。

对于推荐部分，我只是考虑将数据从数据分析引擎提供给聚类模型。

关于如何将所有这些放在一起的任何建议，以及可以帮助我的很酷的 python 项目？如果我应该提供更多信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T14:37:24.347

[Scikit-learn](http://scikit-learn.org/stable/)应该让您对数据处理（聚类）部分感到满意​​。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-30T13:43:05.400

对于分析和可视化方面，你有你提到的[Cubes ，对于我来说，我使用我编写的](http://cubes.databrewery.org/)[CubesViewer](http://jjmontesl.github.io/cubesviewer/)。

# razor - MVC3 到 MVC4 RTM 手动升级问题：@ 在这个关键字前面抛出错误

> ID：12425604
> 
> 赞同：4
> 
> 时间：2012-09-14T13:29:53.717
> 
> 标签：razor, asp.net-mvc-4

我有一个 MVC3 项目，它具有以下代码行，效果很好：

```
@if (this.Model.ShowAddButton)
{ 
    @this.Html.ActionLink("Add", "Add")
} 
```

我们的团队有一个编码指南，所有本地方法调用都需要以`this`. 到目前为止，这在 MVC3 中运行良好。

[我已使用此处](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)的指南手动将项目升级到 MVC4 。现在上面的代码出现错误并显示以下消息：

```
Unexpected "this" keyword after "@" character.  Once inside code, you do not need to prefix constructs like "this" with "@". 
```

我认为错误信息具有误导性。这意味着这样做是合法的，但不是必需的。即使我知道不需要遵守编码准则，我也是故意这样做的。解析器失败的事实，消息应该表明`Once inside code, you cannot prefix....` 我理解你不能`@`在嵌套代码块中使用，问题不在于`@`符号，而是使用`this`. 添加`this`到语句中不会影响调用的结果，所以我不明白为什么它会抛出异常。我可以通过删除来解决这个问题`this`：

```
@if (this.Model.ShowAddButton)
{ 
    @Html.ActionLink("Add", "Add")
} 
```

但是这样做会与我们的编码指南相冲突。所以我的问题是，这是否是在 MVC4 中故意改变的（因为它在 MVC3 中工作得很好）。或者这是 MVC4 中的错误？如果我删除`if`块，我仍然可以使用`this`关键字。

```
@this.Html.ActionLink("Add", "Add") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T12:55:05.837

这实际上是MVC4 中的一个[错误](https://twitter.com/anurse/status/250612012357390338)。提交了一份[报告](http://aspnetwebstack.codeplex.com/workitem/458)。

两种解决方法是：

```
@if (this.Model.ShowAddButton)
{ 
    @Html.ActionLink("Add", "Add")
} 
```

或者

```
@if (this.Model.ShowAddButton)
{ 
    @(this.Html.ActionLink("Add", "Add"))
} 
```

# database-design - 两张表几乎一模一样

> ID：12425606
> 
> 赞同：1
> 
> 时间：2012-09-14T13:30:13.760
> 
> 标签：database-design

我正在开发一个 Android 应用程序和 JSON Web 服务。双方都将拥有一个数据库，并且它们都将具有相同的数据库架构。

在客户端，**Order**、 QAP 和 Defect 是来自服务器端数据库的副本。我无法向这些表添加更多行。

用户将有一个带有缺陷名称和四列的表单：`CRS`、`CRF`和。在这四列上，用户将插入一些值。缺陷名称为，CRS、CRF、MA 和 MI 值将成为当前**电子报告**的一部分。`MA``MI``Defect.description`

 **为了存储这些值（CRS、CRF、MA 和 MI），我使用**eReportDefect**。

我的问题是用户可以添加更多缺陷。**如果我可以在缺陷**表上添加更多行，我不会有问题，但我不能。为了解决这个问题，我添加了**UserDefect**表，但我不确定这是否是一个好方法，因为我有两个表**eReportDefect**和**UserDefect**几乎相同。

对于 EReport 中填写的每个缺陷，我都有“另一个问题”，我可以有零个、一个或多个图像（表**eReportDefImg**和**UserDefImg**）。

这个设计“OK”还是可以改进？

![在此处输入图像描述](../Images/74a86408c63d3dc3d7f7856db0d42ba9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:02:18.703

我可以在主键定义中看到一些“老派”的方法。;-) 关于表`eReportDefect`，您的键是多余的，因为据我了解“ `defectId`”已经是唯一的，所以“ `qapId`”和“ `eReportId`”只会导致索引更大，因此更慢 - 在这种情况下，列位置也不是最好的. 在`Defect`和`DefectImg`表中是正确的，而在`eReportDefImg`.

好的，回到正题，如果您无法修改`eReportDefect`表，则没有其他方法可以创建另一个表。

还有一点，图片。如果我理解正确，您可以修改 table `eReportDefImg`，因此不需要`UserDefImg`table 甚至 Image 表。除了这三个表，您还可以使用一个`DefectImg`具有以下功能的表：

```
PK image_id
FK userDefectId
FK defectId 
```

如果`userDefectId`IS NULL，则`defectId`IS NOT NULL 并指向`eReportDefect`，反之亦然。这将为您节省存储空间和耗时的连接`UserDefectImg`和`eReportDefImg`表。如果一张图像可以适应多个缺陷，那么这些实际上是需要的。**

# continuous-integration - 在没有 Web 部署项目的情况下，如何在 VS 2012 中处理 Web 应用程序项目的构建？

> ID：12425608
> 
> 赞同：2
> 
> 时间：2012-09-14T13:30:15.753
> 
> 标签：continuous-integration, teamcity, visual-studio-2012, web-deployment-project

我的团队使用 Team City 来持续构建和部署我们的 Web 应用程序项目。为了进行部署构建，我们使用 Web 部署项目，[这在 Visual Studio 2012 中不可用](https://stackoverflow.com/questions/11229582/will-web-deployment-projects-still-be-available-in-visual-studio-2012)。我们并没有真正使用 WDP 的任何高级功能，例如 .config 转换，但我们使用它们的主要原因是因为当它们构建时，它们只将部署所需的文件放入构建文件夹 - 实质上，删除所有.cs 文件，只留下“xcopy 部署”所需的内容。然后我们将结果同步到我们的测试/生产环境。

所以，我的问题是：现在 Visual Studio 2012 不再支持 WDP，我如何进行自动部署构建，只减少 VS2012 中部署所需的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T09:00:23.397

Web 部署项目已被 VS2012 中的发布配置文件取代。

他们可以做 WDP 可以做的所有事情，另外还有一个好处是不需要安装额外的软件或创建单独的`.WDP`项目文件。

Doug Rathbone 写了一篇关于从 WDP 迁移到 Publishing Profiles 的精彩博文： [http ://www.diaryofaninja.com/blog/2012/08/26/visual-studio-2012-web-deployment-projects-are-dead- ndash-long-live-publishing-profiles](http://www.diaryofaninja.com/blog/2012/08/26/visual-studio-2012-web-deployment-projects-are-dead-ndash-long-live-publishing-profiles)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:39:05.667

你应该看看 Octopus，它为你提供了各种部署选项。 [http://octopusdeploy.com/](http://octopusdeploy.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T06:58:48.137

从 .net 4.0 开始，Web 应用程序项目就提供了打包和发布支持。你所需要的只是打电话`msbuild /t:Package`——它会做所有的事情。

我建议阅读本教程，这里有你需要的一切。[http://www.asp.net/web-forms/tutorials/deployment/deploying-web-applications-in-enterprise-scenarios/deploying-web-applications-in-enterprise-scenarios](http://www.asp.net/web-forms/tutorials/deployment/deploying-web-applications-in-enterprise-scenarios/deploying-web-applications-in-enterprise-scenarios)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T11:08:23.987

我们将 Jenkins 与 SVN 结合用于我们的 CI 环境。在 VS 2012 中，我们将代码（使用 Ankh）签入到 SVN，我们将 Jenkins 配置为每 15 分钟轮询一次 SVN：

[詹金斯 CI](http://jenkins-ci.org/)

这是我写的关于使用 IIS7 和 Web Deploy 2.0 设置 CI 服务器的帖子：

[使用 IIS7 和 Web Deploy 2.0 设置 CI 服务器](http://codenodes.wordpress.com/2012/09/01/setup-continuous-integration-server-with-iis7-and-web-deploy-2-0/)

# asp.net-mvc - AssertionException：参数值不匹配

> ID：12425610
> 
> 赞同：0
> 
> 时间：2012-09-14T13:30:24.843
> 
> 标签：asp.net-mvc, asp.net-mvc-3, mvccontrib

我以前没有使用 MvcContrib 进行单元测试，并且在运行一些测试时遇到了一些麻烦。

我有以下测试方法：

```
[TestMethod]
public void Create_GET_Route_Maps_To_Action()
{
    RouteData getRouteData = "~/Interface/Pages/Create".WithMethod(HttpVerbs.Get);
    getRouteData.DataTokens.Add("Popup", "true");
    getRouteData.DataTokens.Add("WebDirectoryId", "99");
    getRouteData.DataTokens.Add("LocaleId", "88");
    getRouteData.DataTokens.Add("LayoutId", "77");

    getRouteData.ShouldMapTo<PagesController>(c => c.Create(true, 99, 88, 77));
} 
```

与我的控制器中的以下方法匹配

```
 [HttpGet]
    [Popup]
    public ViewResult Create(bool? popup, int? webDirectoryId, int? localeId, int? layoutId)
    {
        PageCreateViewModel pageCreateViewModel = new PageCreateViewModel
            {
                WebDirectories = GetChildDirectories(pageService.GetAllDirectories().Where(d => d.IsActive).Where(d => d.ParentId == null), ""),
                Layouts = Mapper.Map<List<SelectListItem>>(pageService.GetAllLayouts().OrderBy(l => l.Filename)),
                Locales = localizationService.GetAllLocales().Where(l => l.IsActive).OrderBy(l => l.LocaleName).Select(l => new SelectListItem { Text = string.Format("{0} ({1})", l.LocaleName, l.IETFLanguageTag), Value = l.LocaleId.ToString() })
            };

        return View(pageCreateViewModel);
    } 
```

我收到以下错误，我不知道为什么。

`MvcContrib.TestHelper.AssertionException: Value for parameter 'popup' did not match: expected 'True' but was ''; no value found in the route context action parameter named 'popup' - does your matching route contain a token called 'popup'?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:36:05.213

**令牌名称区分大小写**，应与您的操作参数的名称匹配，您需要使用`Values`集合而不是`DataTokens`：

因此，因为您的操作如下所示：

```
Create(bool? popup, int? webDirectoryId, int? localeId, int? layoutId) 
```

您需要使用相同的小写标记名称和`Values`集合：

```
getRouteData.Values.Add("popup", "true");
getRouteData.Values.Add("webDirectoryId", "99");
getRouteData.Values.Add("localeId", "88");
getRouteData.Values.Add("layoutId", "77"); 
```

# java - JVM 无法使用字体“Arial”

> ID：12425612
> 
> 赞同：7
> 
> 时间：2012-09-14T13:30:27.300
> 
> 标签：java, jboss, jvm, jasper-reports

我正在开发一个使用 Jasperreports 的 Java 项目。我曾多次在其他项目中使用相同的技术，在尝试在 Unix 环境中打印报告时遇到了同样的问题。

我的项目使用：

*   JBoss 4.2.3.GA
*   Java 1.6
*   碧玉报告 4.7.0

抛出的异常是：

```
net.sf.jasperreports.engine.util.JRFontNotFoundException: Font 'Arial' is not available to the JVM. See the Javadoc for more details. 
```

我找到了解决此问题的通用解决方案，并且确实有效：

```
sudo apt-get install msttcorefonts 
```

但是，我想了解 Jasper 如何使用字体，以及它如何搜索安装在 Unix 环境中的字体。也许更好的问题是：JVM 如何处理原生字体？谁能给我关于这个问题的详细解释？如何在运行时为 JVM 提供系统字体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T13:53:20.690

Java 要求操作系统提供字体。它的工作方式取决于操作系统。

[http://en.wikipedia.org/wiki/Arial](http://en.wikipedia.org/wiki/Arial)声明它安装在 MS-Windows 和 MAC OSX 上

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-20T03:31:08.490

如果你不想经历下载 jars 的麻烦等等，只需转到软件中心并单击安装**Ubuntu 受限附加功能**。该软件包不仅会安装 MS 字体，还会安装其他对版权受限的应用程序的支持。

这适用于 Ubuntu 系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T04:28:53.460

我在 Jasper 5.0 上也面临同样的问题。我已按照以下步骤操作：

1.  放置`jasper-fonts.jar`;
2.  在linux中安装缺少的字体；
3.  重新启动 JBoss 服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-26T15:16:52.153

2015年更新：

将此添加到（或取消注释）/etc/apt/sources.list

```
deb http://us.archive.ubuntu.com/ubuntu/ trusty multiverse
deb-src http://us.archive.ubuntu.com/ubuntu/ trusty multiverse
deb http://us.archive.ubuntu.com/ubuntu/ trusty-updates multiverse
deb-src http://us.archive.ubuntu.com/ubuntu/ trusty-updates multiverse 
```

然后运行这个：

```
sudo apt-get update
sudo apt-get install msttcorefonts 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-24T20:23:30.943

对于 OpenSuse

验证字体在 SO fc-list 上不可用 grep "宋体"

安装以下 rpm sudo rpm -ivh msttcore-fonts-2.0-3.noarch.rpm

或从页面下载：

[http://www.mjmwired.net/resources/mjm-fedora-f11.html#ttf](http://www.mjmwired.net/resources/mjm-fedora-f11.html#ttf)

安装 rpm

再次验证 fc-list | grep "宋体"

重启你的应用服务器

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-19T17:32:25.433

这拯救了我的一天！

[http://jasperstarter.cenote.de/usage.html#Reports_with_custom_fonts](http://jasperstarter.cenote.de/usage.html#Reports_with_custom_fonts)

**带有自定义字体的报告**

*Jaspersoft Studio 可以选择创建字体的 jar 文件。把这个jar文件放到JasperStarter的jdbc文件夹中即可。*

# c++ - C++：编译翻译单元独立和老winsock2.h类型重定义错误

> ID：12425616
> 
> 赞同：0
> 
> 时间：2012-09-14T13:30:49.167
> 
> 标签：c++, windows, winsock

据我所知，翻译单元在编译阶段彼此之间没有任何关系。你能解释一下为什么我会出现这种奇怪的行为：在一个 A.cpp 中包含 windows.h 之后（实际上不使用套接字 api 并且不包含 winsock2.h）我在编译另一个 B.cpp 时出错winsock2.h winsock.h 冲突。这个 B.cpp 根本没有改变。提前致谢。

编辑：这实际上是一个编译而不是链接错误。我已将 msvc 编译器置于详细模式，此处标头包含树：

```
2>perfomancemeter.cpp
2>Note: including file: C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\numeric
2>Note: including file:  C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\iterator
2>Note: including file:   C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\xutility
2>Note: including file:    C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\climits
2>Note: including file:     C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\yvals.h
2>Note: including file:      C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\crtdefs.h
2>Note: including file:       C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\sal.h
2>Note: including file:       C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\crtassem.h
2>Note: including file:       C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\vadefs.h
2>Note: including file:      C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\use_ansi.h
2>Note: including file:     C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\limits.h
2>Note: including file:      C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\crtdefs.h
2>Note: including file:    C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\utility
2>Note: including file:     C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\iosfwd
2>Note: including file:      C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\cstdio
2>Note: including file:       C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\stdio.h
2>Note: including file:        C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\crtdefs.h
2>Note: including file:        C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\swprintf.inl
2>Note: including file:      C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\cstring
2>Note: including file:       C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\string.h
2>Note: including file:        C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\crtdefs.h
2>Note: including file:      C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\cwchar
2>Note: including file:       C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\wchar.h
2>Note: including file:        C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\crtdefs.h
2>Note: including file:        C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\wtime.inl
2>Note: including file:      C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\xstddef
2>Note: including file:       C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\cstddef
2>Note: including file:        C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\stddef.h
2>Note: including file:         C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\crtdefs.h
2>Note: including file:      C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\crtdbg.h
2>Note: including file:       C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\crtdefs.h
2>Note: including file: C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\algorithm
2>Note: including file:  C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\memory
2>Note: including file:   C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\xmemory
2>Note: including file:    C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\cstdlib
2>Note: including file:     C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\stdlib.h
2>Note: including file:      C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\crtdefs.h
2>Note: including file:    C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\exception
2>Note: including file:     C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\eh.h
2>Note: including file:      C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\crtdefs.h
2>Note: including file:     C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\malloc.h
2>Note: including file:      C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\crtdefs.h
2>Note: including file:    C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\new
2>Note: including file: d:\repos\cbs\billing\common\perfomancemeter.h
2>Note: including file:  C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\vector
2>Note: including file:   C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\stdexcept
2>Note: including file:    C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\xstring
2>Note: including file: d:\repos\cbs\billing\common\util.h
2>Note: including file:  d:\repos\cbs\billing\common\framework\include\types/types.h
2>Note: including file:  C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\string
2>Note: including file:   C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\istream
2>Note: including file:    C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\ostream
2>Note: including file:     C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\ios
2>Note: including file:      C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\xlocnum
2>Note: including file:       C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\streambuf
2>Note: including file:        C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\xiosbase
2>Note: including file:         C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\xlocale
2>Note: including file:          C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\typeinfo
2>Note: including file:          C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\xdebug
2>Note: including file:          C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\xlocinfo
2>Note: including file:           C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\xlocinfo.h
2>Note: including file:            C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\ctype.h
2>Note: including file:             C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\crtdefs.h
2>Note: including file:            C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\locale.h
2>Note: including file:             C:\Program Files (x86)\Microsoft Visual Studio 8\VC\include\crtdefs.h
1>c:\program files (x86)\microsoft visual studio 8\vc\platformsdk\include\winsock2.h(112) : error C2011: 'fd_set' : 'struct' type redefinition
1>        c:\program files (x86)\microsoft visual studio 8\vc\platformsdk\include\winsock.h(54) : see declaration of 'fd_set' 
```

我之前遇到过这个问题，并且知道在包含 Windows 标头之前 #define WIN32_LEAN_AND_MEAN 可以修复它。但是为什么会在这种情况下发生呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:20:14.780

Windows.h 包括 winsock。因此，即使您不直接包含也不使用它，它也会被包含在内。#define WIN32_LEAN_AND_MEAN 解决了​​这个问题，因为这会强制只包含必要的标头。

可能性：

*   您以某种方式最终包含了 winsock/winsock2 两次：尝试删除 winsock 直接包含并仅包含 windows.h

*   您已将 windows/winsock 添加到一个公共头文件中：检查包含层次结构。用于测试删除通用标题并尝试将它们直接包含在源文件中

*   您是否打开了预编译的标头？试试关掉

请参阅此内容： http: [//social.msdn.microsoft.com/Forums/en/vcgeneral/thread/6177f9bc-db75-4317-9904-02ef55b527d0](http://social.msdn.microsoft.com/Forums/en/vcgeneral/thread/6177f9bc-db75-4317-9904-02ef55b527d0)

# java - Executors.newFixedThreadPool 挂线程

> ID：12425620
> 
> 赞同：4
> 
> 时间：2012-09-14T13:30:54.970
> 
> 标签：java, multithreading, tomcat

正如它在javadoc中所说

> 池中的线程将一直存在，直到它被显式关闭`ExecutorService#shutdown()`

如果我在 Tomcat 上有一个 Web 应用程序。在启动时它会创建一个固定的线程池。我也调查过

```
 public  static void main(String ... strings)  {
            ExecutorService s = Executors.newFixedThreadPool(2);
            s.submit(new Runnable() {
                public void run() {
                        System.out.println("zzz");
                }
            });
      } 
```

上面示例中的线程在我将它们提交给 ExecutorService 之前不存在。当`main`方法结束时，我`javaw.exe`在任务管理器（win 7 os）的进程列表中看到一个。所以我假设运行该示例的 jvm 实例仍然存在。当我添加时`s.shutdown()`- 进程列表中没有任何 java 进程。

**问题1**：当tomcat由于一些错误突然停止时，java进程是否会在内存中挂起（如果之前有一些任务被提交到上面提到的线程池中）；

**问题 2**：如果对上一个问题的回答是肯定的，是否有一些方法可以使池中的线程成为守护进程，或者是否有一些方法可以处理此类 tomcat/myapp 停止调用`ExecutorService#shutdown()`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T13:34:01.323

> 问题1：当tomcat由于一些错误突然停止时，java进程是否会在内存中挂起（如果之前有一些任务被提交到上面提到的线程池中）；

如果它没有关闭，`ExecutorService`那么是的，它将挂起。

> 问题2：如果上一个问题的答案是肯定的，是否有一些方法可以使池中的线程成为守护进程......

就在这里。你可以提供一个线程工厂。

```
ExecutorService threadPool = newFixedThreadPool(numThreads,
    new ThreadFactory() {
        public Thread newThread(Runnable runnable) {
            Thread thread = Executors.defaultThreadFactory().newThread(runnable);
            thread.setDaemon(true);
            return thread;
        }
    }); 
```

正如@matt b 提到的，确保线程池关闭的另一种机制是[在 Tomcat 中定义一个关闭挂钩/侦听](https://stackoverflow.com/questions/1549924/shutdown-hook-for-java-web-application)器。

# c# - 有没有办法区分网页的自定义错误页面和默认错误页面？

> ID：12425623
> 
> 赞同：4
> 
> 时间：2012-09-14T13:31:05.150
> 
> 标签：c#, http-status-code-404

我只是想知道是否有一种方法可以测试从服务器返回的 404 错误页面是否是该服务器的默认错误页面（我主要考虑从 IIS 返回的默认 404 页面）和自定义的已创建为特定于站点？

当我向服务器发出请求时，会返回 404 错误。有时标头中的内容长度为 0（通常由浏览器处理），否则返回错误页面。这意味着内容长度现在不再是 0，因此我无法轻松地区分自定义页面和普通的旧默认页面。

我考虑了一些内容分析方法，其中大部分都占用大量内存（尤其是对于较大的页面），我想知道是否有人找到了一个巧妙的技巧来比较这样的两个网页。

任何帮助/指针将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T00:39:36.013

只需比较返回页面的 HTML。很可能，您收到的页面是一个简单的字符串。只需将您收到的字符串与您存储在代码中的字符串进行比较，就像我在下面列出的代码一样。

IIS7默认404页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<title>404 - File or directory not found.</title>
<style type="text/css">
<!--
body{margin:0;font-size:.7em;font-family:Verdana, Arial, Helvetica, sans-serif;background:#EEEEEE;}
fieldset{padding:0 15px 10px 15px;} 
h1{font-size:2.4em;margin:0;color:#FFF;}
h2{font-size:1.7em;margin:0;color:#CC0000;} 
h3{font-size:1.2em;margin:10px 0 0 0;color:#000000;} 
#header{width:96%;margin:0 0 0 0;padding:6px 2% 6px 2%;font-family:"trebuchet MS", Verdana, sans-serif;color:#FFF;
background-color:#555555;}
#content{margin:0 0 0 2%;position:relative;}
.content-container{background:#FFF;width:96%;margin-top:8px;padding:10px;position:relative;}
-->
</style>
</head>
<body>
<div id="header"><h1>Server Error</h1></div>
<div id="content">
 <div class="content-container"><fieldset>
  <h2>404 - File or directory not found.</h2>
  <h3>The resource you are looking for might have been removed, had its name changed, or is temporarily unavailable.</h3>
 </fieldset></div>
</div>
</body>
</html> 
```

# android - 高效访问配置文件中的多个字符串之一

> ID：12425624
> 
> 赞同：1
> 
> 时间：2012-09-14T13:31:07.603
> 
> 标签：android, string, casting, resources

在我的应用程序中，我有许多用于标识区域和位置的字符串。：

```
<string name="r1s1">Seattle</string>
<string name="r1s2">Des Moines</string>
<string name="r1s3">Bremerton</string>
<string name="r2s1">Tacoma</string>
<string name="r2s2">Burton</string> etc, etc. 
```

我可以使用长 switch 语句通过字符串名称轻松访问这些字符串：

```
switch(regionCode
{   case 1: sN=getString(R.string.r1s1);break;
    case 2: sN=getString(R.string.r2s1);break;  etc etc 
```

我想计算这个字符串名称并用它来更直接地访问字符串：

```
stationNameKey="r"+regionCode+"s"+stationCode;// e. g. r1s1
stationName=getString(R.string.stationNameKey); 
```

这第二条语句不正确，不会在这里编译是消息：

```
! compiler error:: stationNameKey cannot be resolved or is not a field. 
```

我假设从 String 到 Resource Name Identifier 的转换可以工作但找不到它。

问：如何转换字符串以使我的第二个语句正常工作。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:53:18.267

你不能那样做。资源名称在编译时用于生成资源编号。`R.string.xxx`实际上是一个数字。

您可以做的是使用在 res/values/strings.xml 中创建的并行字符串数组资源，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="region_keys">
        <item>r1s1</item>
        <item>r1s2</item>
        <item>r1s3</item>
        <item>r2s1</item>
        <item>...</item>
    </string-array>

    <string-array name="region_values">
        <item>Seattle</item>
        <item>Des Moines</item>
        <item>Bremerton</item>
        <item>Tacoma</item>
        <item>...</item>
    </string-array>
</resources> 
```

在代码中，执行以下操作：

```
Resources res = getResources();
String[] regionKeys = res.getStringArray(R.array.region_keys);
String[] regionValues = res.getStringArray(R.array.region_values);

// Create a hash map of key/value pairs
HashMap<String, String> regions = new HashMap<String, String>();
for (int i = 0; i < regionKeys.length; i++) {
    regions.put(regionKeys[i], regionValues[i]);
} 
```

现在您可以从 map 引用您的字符串`regions`，如下所示：

```
String key = 'r1s1';
String regionString = regions.get(key); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:53:46.050

你应该使用 Resources.getIdentifier() 看到[这个](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)和[这个](http://www.anddev.org/tinytut_-_get_resources_by_name__getidentifier_-t460.html)

```
int resId = getResources().getIdentifier(stationNameKey,"string",null); 
```

应该努力获得你需要的身份证

# python - pexpect：从通过 ssh 隧道运行的命令检索日志

> ID：12425627
> 
> 赞同：3
> 
> 时间：2012-09-14T13:31:21.770
> 
> 标签：python, linux, expect, pexpect

我正在尝试使用 pexpect 库编写 python 脚本。

我想做的是如下：

```
ID = 'User1'
cmdrun = 'A LINUX COMMAND'
sshChild = pexpect.spawn('ssh root@192.168.0.1')
sshOut = file('sshLog.txt','w')
sshChild.logfile = sshOut
sshChild.expect('Last login:*')
sshChild.expect('Please enter your login Id')
sshChild.sendline(ID + '\r')
sshChild.sendline('ssh 192.168.21.1\r')
sshChild.expect('Last login:*')
sshChild.expect('Please enter your login Id')
sshChild.sendline(ID + '\r')
sshChild.sendline(cmdrun + '\r') 
```

一切都按预期工作，直到最后一行，我在其中为 cmdrun 执行 sendline。此命令是自定义 tcpdump 命令，我希望该命令无限期运行，直到我执行 sendctrl('C') 来杀死它，然后逃离 ssh 隧道。

但是，除非我在 sendline(cmdrun + '\r') 之后放置一个 interact()，否则不会打印 tcpdump 的输出。

无论如何我可以在没有交互的情况下做到这一点，因为我不想要交互式终端控制。我想要的是能够等待一段时间，捕获 tcpdump 输出，然后将 tcpdump 与 ssh 隧道一起杀死。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T16:40:16.100

我从未将 pexpect 用于长时间运行的命令。但您可以尝试以下方法：

Pexpect 等待命令完成并为您提供输出。

```
sshChild.sendline(cmdrun + '\r') 
```

由于这是长时间运行的命令，除非您运行，否则它永远不会给您输出

```
child.interact() 
```

您是否可以在以适当的超时时间执行命令后尝试这样做，以便在一定时间后终止长时间运行的命令并捕获直到那时获得的输出。

```
sshChild.sendline(cmdrun + '\r')
child.expect(pexpect.EOF, timeout=20)
print child.before, child.after 
```

# android - 在android中建立两个模拟器之间的通信

> ID：12425631
> 
> 赞同：2
> 
> 时间：2012-09-14T13:31:40.423
> 
> 标签：android, console, emulation

[如何连接同一台机器上的两个模拟器实例并在它们之间传输数据（一个文件）？](https://stackoverflow.com/questions/8261036/how-to-connect-two-emulator-instances-on-the-same-machine-and-transfer-dataa-fi)

我正在尝试在同一台机器上运行的两个仿真器之间建立通信，并研究了上面的问题。但我找不到从本地主机重定向的方法，即 A:localhost 到第二个模拟器（即 B）。我也不知道如何在模拟器中打开控制台。任何帮助都会有好处。

# jquery - 如何检查函数的返回值是真还是假

> ID：12425632
> 
> 赞同：17
> 
> 时间：2012-09-14T13:31:41.253
> 
> 标签：jquery, forms, if-statement

我在这里有一个函数可以验证表单中的字段是否为空。

```
function ValidateForm()
{
    jQuery('span.error_msg').hide();
   var success = true;
    jQuery("#shippingF input").each(function()
        {
            if(jQuery(this).val()=="")
            {
                jQuery(this).next().show();
                success = false;
            }
    });
    return success;
} 
```

现在我想在这里使用该功能：

```
function post(url,formId) {
      jQuery("#process").html('<img src="<?php echo get_bloginfo('wpurl').'/wp-content/plugins/'.basename(dirname(__FILE__)).'/images/co/ajax-loader.gif'; ?>" alt="loading" title="ajax-loader" width="16" height="16" class="alignnone size-full wp-image-134">');
     jQuery.post(url, jQuery('#' + formId).serialize(), function(d) {
        jQuery('html,body').animate({scrollTop: jQuery("#scrollhere").offset().top},'slow');
        jQuery("#response").html('<center><p style="height:820px"><span style="color:black;font-weight:bold;font: 11px arial,verdana,sans-serif;"><b>Loading available payment getaways..</b></span><br/><img src="<?php echo get_bloginfo('wpurl').'/wp-content/plugins/'.basename(dirname(__FILE__)).'/images/co/8-1.gif'; ?>" width="220" height="19" /></p></center>');
        jQuery("#response").load("<?php echo get_bloginfo('wpurl').'/wp-content/plugins/'.basename(dirname(__FILE__)).'/checkout_payment.php'; ?>", function() { Cufon.refresh(); });
        jQuery("#response").attr("style","height:1030px");
    });
} 
```

我试过了，我想出了这个。

```
function post(url,formId) {
 ValidateForm();
 if(ValidateForm() == 'false') {
   jQuery('html,body').animate({scrollTop: jQuery("#shippingF").offset().top},'slow');
 } else {
      jQuery("#process").html('<img src="<?php echo get_bloginfo('wpurl').'/wp-content/plugins/'.basename(dirname(__FILE__)).'/images/co/ajax-loader.gif'; ?>" alt="loading" title="ajax-loader" width="16" height="16" class="alignnone size-full wp-image-134">');
     jQuery.post(url, jQuery('#' + formId).serialize(), function(d) {
        jQuery('html,body').animate({scrollTop: jQuery("#scrollhere").offset().top},'slow');
        jQuery("#response").html('<center><p style="height:820px"><span style="color:black;font-weight:bold;font: 11px arial,verdana,sans-serif;"><b>Loading available payment getaways..</b></span><br/><img src="<?php echo get_bloginfo('wpurl').'/wp-content/plugins/'.basename(dirname(__FILE__)).'/images/co/8-1.gif'; ?>" width="220" height="19" /></p></center>');
        jQuery("#response").load("<?php echo get_bloginfo('wpurl').'/wp-content/plugins/'.basename(dirname(__FILE__)).'/checkout_payment.php'; ?>", function() { Cufon.refresh(); });
        jQuery("#response").attr("style","height:1030px");
    });
 }
} 
```

问题是，验证正在工作。但是，`.post()`即使有空字段，函数也会运行。我猜它在 if/else 条件下..有没有更好的方法来完成这个？

谢谢你。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-14T13:38:02.290

```
false != 'false' 
```

对于好的措施，将 validate 的结果放入一个变量中以避免双重验证，并在 IF 语句中使用它。像这样：

```
var result = ValidateForm();
if(result == false) {
...
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-14T13:40:01.557

你不需要打电话`ValidateForm()`两次，就像你在上面一样。你可以做

```
if(!ValidateForm()){
..
} else ... 
```

我认为这将解决上述问题，看起来您与`true/false`字符串等效项进行比较`'false'`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-14T13:37:05.540

您正在将结果与字符串 ('false') 进行比较，而不是内置的负常数 (false)

只需使用

```
if(ValidateForm() == false) { 
```

或者更好

```
if(!ValidateForm()) { 
```

还有你为什么要调用 validateForm 两次？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T13:37:52.540

语法错误。您不能将布尔值与“false”或“true”之类的字符串进行比较。在你的情况下，只需测试它的逆：

```
if(!ValidateForm()) { ... 
```

您*可以*针对常量 false 进行测试，但它相当丑陋并且通常不受欢迎：

```
if(ValidateForm() == false) { ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T13:37:28.283

`ValidateForm`返回`boolean`，而不是`string`.
当你这样做时`if(ValidateForm() == 'false')`，是相同的`if(false == 'false')`，这是不正确的。

```
function post(url, formId) {
    if(!ValidateForm()) {
        // False
    } else {
        // True
    }
} 
```

# javascript - 是否“......使用超出范围”。KSLint 中的错误导致“[1] 为空或不是对象”错误？

> ID：12425633
> 
> 赞同：1
> 
> 时间：2012-09-14T13:31:43.983
> 
> 标签：javascript

我正在尝试使用 JavaScript 填充下拉列表，并在 IE8 中收到以下错误：

消息：“1”为空或不是对象行：59 字符：3 代码：0

当我通过调试器（在本例中为 JSBin）推送代码时，我在代码中看到以下错误：

第 59 行： var $selected_view = $( '#ai1ec-view-' + matches[1] ); --- 'matches' 使用超出范围。

JSBin 中的这个错误是否与 IE8 中的错误相关？当代码在 Chrome、FF 或 IE9 上运行时，不会出现任何错误。

这是有问题的代码片段。

```
// Make current view actively selected in view dropdown button.
    var classes = $('body').attr( 'class' ).split( ' ' );
    for ( i in classes ) {
        // Extract current view from the body class.
        var matches = /ai1ec-action-([\w]+)/.exec( classes[i] );
        if ( matches != null ) break;
    }
    // Get the dropdown menu link of the active view.
    var $selected_view = $( '#ai1ec-view-' + matches[1] );
    // Replace contents of dropdown button with menu link, plus the caret.
    $( '#ai1ec-current-view' )
        .contents()
            .remove()
            .end()
        .prepend( $selected_view.contents().clone() )
        .append( '<span class="caret"></span>' );
    // Deactivate all dropdown menu items.
    $( '#ai1ec-view-dropdown .dropdown-menu li' ).removeClass( 'active' );
    // Activate only currently selected dropdown menu item.
    $selected_view.parent().addClass( 'active' ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:43:05.100

不。超出范围的 linter 提示/错误/消息可能是因为该变量是在该 for-in-loop 的主体块中声明的；这应该有效。

然而，`matches`似乎是`null`- 导致异常。只要`matches`不为空，您就会中断循环，但这并不能保证真正匹配的内容 - 循环可能刚刚结束，并且`matches`仍然为空。

顺便说一句：您不应该使用 for-in-loop 来枚举由返回的数组的属性`split`，您希望使用普通的 for 循环来迭代项目。

# c - 向文件发出写入结构

> ID：12425634
> 
> 赞同：0
> 
> 时间：2012-09-14T13:31:45.933
> 
> 标签：c

我正在使用 C 语言开发 Linux，并且正在尝试将结构写入文件。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct stud{
    char name[20];
    char dept[20];  
    int id;
};

int main()
{
    FILE *fptr;
    int fwrt;
    struct stud s;

    printf("enter student name\n");
    scanf("%s",s.name);

    printf("enter student department\n");
    scanf("%s",s.dept);

    printf("enter student ID\n");
    scanf("%d",&s.id);

        fptr = fopen("tiger","wb");
        if(fptr == NULL){
            perror("error openning file :");
            exit(EXIT_FAILURE);
        }

        fwrt = fwrite(&s,sizeof(struct stud),1,fptr);
        if(fwrt == 0){
            perror("error writing file :");
            exit(EXIT_FAILURE);
        }

        // fprintf(fptr, "%d", s1->mark);

        if(fclose(fptr) == EOF){
            perror("error closing file :");
            exit(EXIT_FAILURE);
        }

} 
```

**输出：** 当我打开文件检查我得到：

*   **名称**但带有附加字符
*   **部门**，但有额外的字符
*   **id** 我得到了一些垃圾值。

请让我知道解决此问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:49:21.747

> 输出：当我打开文件检查我得到：
> 
> *   我得到的名字，但有额外的字符
> *   我得到了部门，但有额外的字符
> *   我得到了一些垃圾值。

将字节`fwrite`写入`sizeof(struct stud)`文件，它不关心这些字节包含什么。由于您尚未初始化`s`，`name`and`dept`数组包含未指定的数据，并且那些未被输入覆盖的字节（包括 0 终止符）保留它们的垃圾值，这些也被写入文件，因此和之后的附加`name`字符`dept`. 以`id`二进制表示形式写入文件，当它（试图）被编辑器解释为文本时，看起来像垃圾。

但是，您应该防止输入写入数组边界之外，因此您应该限制`scanf`格式中字符串的长度，`%19s`而不是`%s`确保最多 19 个字符被扫描到 20 字节数组中，为 0 终止符留出位置.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:48:59.207

你必须序列化你的数据，在你的 char[] 末尾添加 '\0'。

但是二进制模式下的 fwrite 对于动态结构不方便，最好静态声明结构的字段，所以在你的情况下它很好。

如果你使用这样的 fgets 而不是 scanf 会更好：

```
 #define MAX
    if (fgets(s.name, MAX, stdin) == NULL)
    {
         //do what you want here
    }
    if (fgets(s.dept, MAX, stdin) == NULL)
    {
         //do what you want here
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:49:56.637

利用

```
memset(&s, 0, sizeof(stud)); 
```

在写入字符串之前先对数据进行消毒，这样当您尝试打印它时它就不会显示出来。

id 是完全垃圾的原因是因为即使它被 scanf 存储为文本，您也以二进制形式写入文件。它也应该是一个字符串。

另请注意，由于缓冲区如此短，如果有人键入的名称或部门长度超过 20 个字符，您很可能会出现缓冲区溢出。

# android - AndEngine：用户界面未在 onAreaTouched 调用中更新

> ID：12425636
> 
> 赞同：3
> 
> 时间：2012-09-14T13:31:54.037
> 
> 标签：android, andengine

我正在使用 AndEngine，并且我的自定义单选按钮有以下代码：

```
 blackRadioNotSelected = new Sprite(0, 0, blackRadio, vertexBufferObjectManager) {
        @Override
        public boolean onAreaTouched(TouchEvent pSceneTouchEvent, float pTouchAreaLocalX, float pTouchAreaLocalY) {
            if (pSceneTouchEvent.isActionUp()) {
                activity.runOnUpdateThread(new Runnable() {
                    @Override
                    public void run() {
                        Log.d(TAG,"touch");
                        unregisterTouchArea(blackRadio);
                        detachChild(whiteRadio);
                        detachChild(blackRadio);
                        whiteRadio = whiteRadioNotSelected;
                        blackRadio = blackRadioSelected;
                        registerTouchArea(whiteRadio);
                        attachChild(whiteRadio);
                        attachChild(blackRadio);
                    }
                });

                isWhiteSelected = !isWhiteSelected;
            }
            return false;
        }
    }; 
```

当我触摸单选按钮时，我可以看到“触摸”消息，并且在第二次触摸后它不会显示 - 所以，`unregisterTouchArea(blackRadio);`被执行了。但 UI 还是一样：whiteRadio 看起来像是选中的，而 blackRadio - 未选中。会是什么呢？

**UPD：**我尝试将此代码放入其他方法中，一切正常。这就是它现在的样子：

```
 blackRadioNotSelected = new Sprite(0, 0, blackRadio, vertexBufferObjectManager) {
        @Override
        public boolean onAreaTouched(TouchEvent pSceneTouchEvent, float pTouchAreaLocalX, float pTouchAreaLocalY) {
            if (pSceneTouchEvent.isActionUp()) {
                swapColor();
            }
            return false;
        }
    }; 
```

和`swapColor();`：

```
private void swapColor() {
    if (isWhiteSelected) {
        activity.runOnUpdateThread(new Runnable() {
            @Override
            public void run() {
                Log.d(TAG,"blackNotSelected");
                unregisterTouchArea(blackRadio);
                detachChild(whiteRadio);
                detachChild(blackRadio);
                whiteRadio = whiteRadioNotSelected;
                blackRadio = blackRadioSelected;
                registerTouchArea(whiteRadio);
                attachChild(whiteRadio);
                attachChild(blackRadio);
            }
        });
    } else {
        [...]
    }

    isWhiteSelected = !isWhiteSelected;
} 
```

但我仍然不知道出了什么问题，因为以前的版本在其他项目中工作。有人可以向我解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T05:05:41.117

我认为您尚未将精灵触摸区域注册到主场景中。简单地做这个。getEngine().getScene().registerTouchArea(blackRadioNotSelected);

# vba - 引用嵌入式 PDF 的更简单方法？

> ID：12425637
> 
> 赞同：0
> 
> 时间：2012-09-14T13:31:55.430
> 
> 标签：vba, pdf, embed, ms-word

我正在处理带有一堆嵌入式 PDF 的 word doc，我需要能够使用 VBA 宏激活它们。所以这就是我一直在做的事情：

```
ThisDocument.InlineShapes(appropriate_number).OLEFormat.Activate 
```

但问题是，必须通过一些任意索引号来引用每个 pdf 意味着如果我在几个预先存在的 PDF 之间插入另一个嵌入式 PDF，那么我的所有代码都可能会中断（因为索引号引用某些嵌入式 pdf会转移）。

有没有更有效的方法来引用我的代码中的嵌入式 PDF？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T04:22:41.447

您可以使用该`AlternativeText`属性来引用内联形状。如果 PDF 以编程方式嵌入，请捕获每个 pdf 的文件名并将文件名分配给`AlternativeText`.

```
 NewShapeIndex = ActiveDocument.InlineShapes.Count + 1
 'Code to embed shape and capture filename of PDF
 ActiveDocument.InlineShapes(NewShapeIndex).AlternativeText = CapturedFilename 
```

（如果手动嵌入 PDF，右键单击嵌入的 PDF 图标，选择“设置对象格式”，然后在每个文件的“替代文本”选项卡上的框中输入文件名。）

然后使用`InlineShapes`集合根据文件名启动文件：

```
Public Sub PDFindex(PDFname As String)

Dim Myshape As InlineShape
Dim IndexCount As Integer
IndexCount = 1

For Each Myshape In ActiveDocument.InlineShapes

    If Myshape.AlternativeText = PDFname Then
        ActiveDocument.InlineShapes(IndexCount).OLEFormat.Activate
    End If
    IndexCount = IndexCount + 1

Next

End Sub 
```

这样，只要您知道文件的名称，就可以使用以下命令启动任何文件

```
 PDFindex filename 
```

# php - 从 PHP 中的日历视图中过滤数据

> ID：12425639
> 
> 赞同：1
> 
> 时间：2012-09-14T13:32:09.043
> 
> 标签：php

我想根据用户的选择从 Mysql 中过滤一些数据。例如：我想显示一个表格，并在其旁边显示一个日历，用户可以在其中单击日期，并且应该根据用户选择的日期更新表格。

我知道我可以使用文本框并使用 Javascript onclick 打开日期时间选择器，但这将是我的最后一个选择：S。

有关更多信息，您可以查看此链接我的意思： [http ://www.forexfactory.com/calendar.php](http://www.forexfactory.com/calendar.php)

我已经实现了表格并显示了数据，我现在需要的只是使用日历按天过滤数据。

任何知道任何例子或可以向我提出建议的人都会非常有帮助。

谢谢

# paypal - Prestashop - 默认 Paypal 选项卡

> ID：12425640
> 
> 赞同：1
> 
> 时间：2012-09-14T13:32:10.443
> 
> 标签：paypal, prestashop

我的 Prestashop 1.4 中有 Paypal 模块，我将它用于 Paypal + CB；但是当用户结帐时，他被重定向到“我有一个 Paypal 帐户”选项卡。我想将其直接重定向到“我没有 Paypal 帐户”选项卡

请问你有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T12:44:56.730

对不起，我没有更快地回答；我终于自己找到了解决方案，不记得确切的文件位置，但这是我的想法：

您需要修改 Paypal 插件并找到 LANDINGPAGE 参数；只需将其修改为“计费”

更多信息：[https ://cms.paypal.com/fr/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_SetExpressCheckout](https://cms.paypal.com/fr/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_SetExpressCheckout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-28T11:11:21.607

要默认通过卡选项卡付款（没有贝宝帐户），您必须从后台选择贝宝模块中的快速付款。完成此操作后，在“/modules/paypal/express_checkout”中查找文件“process.php”并编辑第 147 行（在 Prestashop 的 1.5.2 版中），其中显示：

```
$ Fields ['LANDINGPAGE'] = 'Login'; 
```

你改变它：

```
$ Fields ['LANDINGPAGE'] = 'Billing'; 
```

我希望你为他们服务。问候。

# android - 等到后台任务完成

> ID：12425649
> 
> 赞同：0
> 
> 时间：2012-09-14T13:32:44.820
> 
> 标签：android, multithreading, view

我有一个活动课程如下。

```
public class LoginActivity extends Activity implements OnClickListener {
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
      button1 = (ImageView) findViewById(R.id.button1);
      button1.setOnClickListener(this);
   }
   @Override
   public void onClick(View v) {
       BackgroundRunner bgRunner = new BackgroundRunner(this);
       String[] params = new String[]{url};
       bgRunner.execute(params);
   }

} 
```

AsyncTask 是：

```
 public class BackgroundRunner extends AsyncTask<String, Void, Boolean>  {

@Override
protected Boolean doInBackground(String... params) {
    ServiceCaller serviceCaller = new ServiceCaller();
    boolean status = serviceCaller.checkLogin(params[0]);
    return status;
}

@Override
public void onPreExecute(){
    progressBar = (ProgressBar) currentContext.findViewById(R.id.loader);
    progressBar.setVisibility(View.VISIBLE);
     }

@Override
public void onPostExecute(final Boolean status){
    progressBar.setVisibility(View.INVISIBLE);
} 
```

}

这是场景。主活动类在单击时创建一个线程。然后创建的线程从服务器获取一些数据。这是一项耗时的任务。因此，UI 上会显示一个进度条。目前我正在使用 AsyncTask 来完成服务器数据检索。但真正的挑战是等待后台任务完成并从中获取价值。我正在寻找的是：

等到服务器调用并获得结果。同时显示进度条。我认为 Handler 将是一个选择。我对此不太清楚。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:38:16.443

我的解决方案是创建自己的 asynctask 类：

```
 import android.app.Activity;
import android.app.ProgressDialog;
import android.content.DialogInterface;
import android.content.DialogInterface.OnCancelListener;
import android.os.Handler;
import br.com.zcr.ezcrm.R;

public class AsyncTask implements Runnable {

    private Activity activity;
    private Handler handler;
    private Action action;
    private boolean showDialog = true;
    private boolean running = false;
    private boolean canceled = false;

    private Thread t;

    private ProgressDialog progress;

    public AsyncTask(Activity activity) {
        this.activity = activity;
        handler = new Handler();
    }

    public AsyncTask(Activity activity, Action action) {
        this.activity = activity;
        this.action = action;
        handler = new Handler();
    }

    private ProgressDialog getDialog() {
        if (progress != null)
            return progress;
        progress = ProgressDialog.show(activity, null, activity.getString(R.string.carregando), true, false);
        progress.setOnCancelListener(new OnCancelListener() {
            public void onCancel(DialogInterface dialog) {
                setCanceled(true);
            }
        });
        return progress;
    }

    private void showDialog() {
        if (showDialog)
            getDialog().show();
    }

    private void hideDialog() {
        if (showDialog)
            getDialog().dismiss();
    }

    public void execute(boolean showDialog) {

        this.showDialog = showDialog;
        execute();
    }

    public void execute() {

        if (running || action == null)
            return;

        running = true;

        // Utils.setFixedOrientation(activity);
        showDialog();
        t = new Thread(AsyncTask.this);
        t.start();
    }

    @Override
    public void run() {

        try {

            final Object o = action.run();

            if (canceled)
                return;

            handler.post(new Runnable() {
                public void run() {
                    action.onFinnish(o);
                }
            });

        } catch (final Exception e) {

            if (canceled)
                return;

            handler.post(new Runnable() {
                public void run() {
                    action.onError(e);
                }
            });

        } finally {

            canceled = false;
            hideDialog();
            // Utils.setUnfixedOrientation(activity);
            running = false;
        }

    }

    /*
     * public void stop() { running = false; }
     */
    public void setAction(Action a) {
        action = a;
    }

    public void setCanceled(boolean canceled) {
        if (canceled)
            t = null;
        this.canceled = canceled;
    }

    public interface Action {
        /** Acao a ser executada */
        public Object run() throws Exception;

        /** Chamado no fim de todas as execucoes */
        public void onFinnish(Object result);

        /** Para qualquer execucao e retorna o erro */
        public void onError(Exception e);
    }

} 
```

这是实现：

```
 AsyncTask task = new AsyncTask(this, new Action() {
        public Object run() throws Exception {
            return WebService.autenticate(login, pass);
        }
        public void onFinnish(Object result) {
//result was returned in run method
            verifyLogin((String) result);
        }
        public void onError(Exception e) {
            //error
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:38:03.820

在此代码之前显示进度对话框：

```
dialog.show()
bgRunner.execute(params); 
```

在 AsyncTask 中：

```
onPostExecute((final Boolean status){
    dialog.cancel() // MAKE DIALOG CANCEL
} 
```

希望它会帮助你。

# c++ - 递归不会停止

> ID：12425656
> 
> 赞同：0
> 
> 时间：2012-09-14T13:33:04.580
> 
> 标签：c++, recursion, depth-first-search, directed-acyclic-graphs

我正在编写代码以使用 DFS 算法在图中查找循环。但是，当我去打印循环的路径时，发生了一些非常奇怪的事情。在评论中阅读我的担忧。

```
#include <iostream> 
#include "graph.h" 
#include <stdio.h>

using namespace std;

int discovered[MAXV+1];
int parent[MAXV+1];

//Printing path that contains the cycle 

void find_path(int start, int end)
{
    int s = start;
    int e = end;

    while(s != e)
    {
        cout<<s<<" ";
        s = parent[s];
    }

/*The loop above does not stops ; 
  which means the condition parent[s] == e ;
  does not meet . However , on printing out the 
  values of s , parent[s] , and e , on successive iteration 
  I can see that the value of parent[s] and e becomes
  equal after a certain time , even though the loop does not 
  terminate.

*/
}

void dfs(graph *g , int start)
{    
    int dis = 1;
    int u = 0 ;
    edgenode *p;

    p = g->edges[start]; 
    discovered[start] = dis;

    while(p!= NULL)
    {
        u = p->y;
        parent[u] = start;

        if(discovered[u]== 1){ cout<<"Cycle"<<start<<u<<endl; find_path(start,u);}
        else dfs(g,u);

        p = p->next;
    }

    discovered[start] = dis +1;
    printf("\n");   
}

int main()
{
    for(int i= 1; i<=MAXV+1; i++)
    {
        discovered[i] = false;
        parent[i] = -1;
    }

    graph *g = new graph();
    read_graph(g,true);

    dfs(g,1);
} 
```

那么，在调用上述递归时我的逻辑是否存在缺陷，或者我的 g++ 编译器行为怪异。对我的代码的任何细读将不胜感激。谢谢 。

PS：您可以假设我已经实现了一个图形结构，我在编译时将其合并。我假设您对 BFS 算法的实现有一个很好的了解。如果您对理解代码有任何疑虑，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:20:33.697

里面的算法`dfs`坏了。当它检查节点 1 的边时，它找到了从节点 1 到节点 2 的边，并将 1 标记为 2 的父节点。随后，它找到了从节点 5 到节点 2 的边，并将 5 标记为父节点2，替换`parent`数组中的前一个条目。

稍后，当它确定存在从 1 到 5（到 1）的循环时，它调用`find_path(5, 1)`. 但是，`find_path`永远找不到节点 1，因为跟随父节点从 5 到 4、3、2，然后返回到 5。

# android - 在android中动态绘制箭头

> ID：12425657
> 
> 赞同：2
> 
> 时间：2012-09-14T13:33:05.413
> 
> 标签：android

我正在开发一个应用程序，在其中我想在手指触摸时动态制作箭头、矩形、线条、自由绘制等不同的形状，我能够绘制线条、自由绘制、矩形，但我没有得到箭头。我也在谷歌上搜索了很多，但没有找到任何相关的东西。如果有人有解决方案，请提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:39:42.053

[使用moveTo](http://developer.android.com/reference/android/graphics/Path.html#moveTo%28float,%20float%29)和[lineTo](http://developer.android.com/reference/android/graphics/Path.html#lineTo%28float,%20float%29)方法创建箭头形状的[路径对象。](http://developer.android.com/reference/android/graphics/Path.html)

# java - 在 tabris 中创建应用程序

> ID：12425658
> 
> 赞同：1
> 
> 时间：2012-09-14T13:33:14.060
> 
> 标签：java, android, eclipse, mobile

我是 tabris 的新手，我正在尝试创建一个简单的原型：

> 登录表单 --> 可能的操作列表 --> 操作

在 EntryPoint 中，我实现了 createUI() 方法，创建了一个 shell 并在 shell 中插入了我的 3 个登录字段和登录按钮。假设登录正确，我想切换到另一个“屏幕”，显示可用操作列表（例如：显示状态、我的帐户……）。

如何做到这一点？

如何在会话中存储一些数据？（用户名，用户名，...）

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:44:28.833

要将数据存储在 Session 中，您可以使用 SessionStore。请参阅 RWT.getSessionStore

关于登录屏幕：我建议在全屏合成上创建它。当用户成功登录时，释放组合并使用您的应用程序创建一个。请参阅 Widgets 类以了解如何为新组合设置动画。

希望这可以帮助，

干杯霍尔格

# javascript - ASP.NET WebForms：如何在通过 UpdatePanel 使其可见后以不可见、非渲染的方式访问 Javascript？

> ID：12425664
> 
> 赞同：1
> 
> 时间：2012-09-14T13:33:32.710
> 
> 标签：javascript, asp.net, webforms, updatepanel, visible

我知道这似乎不切实际，但我真的更喜欢这样做，因为我正在重新设计这个 WebForms 页面以满足紧急的、最后一刻的业务需求。

我有一个自定义用户控件。在这个用户控件中是一个 Javascript 块，其中包含连接到各种控件`onclick`和`onchange`事件的函数。之前，控件的`.Visible`属性是`True`，所以它的 HTML 和 Javascript 会在页面上呈现。

现在我需要将控件的`.Visible`属性设置为`false`并在其周围包裹一个 UpdatePanel。这样做可以防止控件的 HTML 在初始页面加载期间呈现。要显示控件的内容，用户必须单击一个按钮，该按钮会点击一个服务器端方法，该方法将控件的`.Visible`属性设置为`true`. 由于它现在位于 UpdatePanel 中，因此该控件以一种 Ajaxy 方式出现在页面上。但是，控件中的 Javascript 似乎不可访问，因此子控件`onclick`和`onchange`事件都不起作用，因为它们的关联 Javascript 函数是`undefined`.

为了简洁起见，由于过于复杂而无法进入的原因，我不想使用的解决方案：

*   JSON/AJAX（在这么短的时间内涉及太多的重构）
*   CSS display:none/visibility:visible（我需要尽可能多地保留服务器端功能以最小化重新架构）
*   将 Javascript 放在父页面或 .js 文件中（我会认为这是最后的手段，但我使用 . 引用服务器控件`<#%=ControlId.ClientID %>`。如果 Javascript 不包含在 UserControl 中并且我不想将控件设置`ClientIdMode`为`static`.)

我真的很想找到一种方法将 Javascript 保留在我的 UserControl 中，这样当 UpdatePanel 使用 UpdatePanel 将控件的`.Visible`属性设置为时，客户端可以访问它`true`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:00:37.930

最简单的方法是将javascript作为一个大字符串包含在后面的代码中并在加载时注册它：

```
 protected void Page_Load(object sender, EventArgs e)
        {
            string javasriptToRegister = @"
  function MyAwesomeJavaScriptFunction() {
     alert( document.getElementById('" + this.txtCatName.ClientID + @"').value );
  }";
            ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "MyControlsJavaScript", javasriptToRegister, true);
        } 
```

这绝不是完成它的最干净的方法，但它会起作用。

如果你想让它更简洁一点，你可能想要包含一个外部 javascript 文件，其中包含一个单例或一个代表你的控件的原型对象（取决于你的用例）。然后，您可以在包含的较小脚本中将对象/单例的属性设置为您的客户端 ID，就像我们在上面所做的那样。例如：

Javascript：

```
function MyControlScriptModel() {
  this.txtCatNameClientId = '';
  this.othercontainedValue = 0;
  this.anothercontainedValue = 0;
}

MyControlScriptModel.prototype.DoSomethingWithCatName = function () {
  alert( document.getElementById( this.txtCatNameClientId ).value );
} 
```

后面的代码：

```
 protected void Page_Load(object sender, EventArgs e)
        {
            string javasriptToRegister = string.Format(@"var obj = new MyControlScriptModel();
                                                         obj.txtCatNameClientId = '{0}';", this.txtCatNameClientId);
            ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "MyControlsJavaScript", javasriptToRegister, true);
        } 
```

# php - 处理本地化错误和异常消息的推荐方法是什么？

> ID：12425677
> 
> 赞同：0
> 
> 时间：2012-09-14T13:34:08.273
> 
> 标签：php, localization

**第 1 部分：**
假设我做了一些引发异常的事情，例如：

```
function do_something($somepar)
{
    if (inexistent())
        return TRUE;
    else
        return FALSE;
}
if (do_something("SMART"))
    echo "Everything went right";
else
    echo "Something failed"; 
```

我有

```
Fatal error: Call to undefined function inexistent() in xyz.php on line 123 
```

是否可以本地化此消息？我希望

```
setlocale(LC_ALL,'it_IT'); 
```

可以这样做，但它没有。

**第 2 部分：**
这是您处理本地化错误的建议。假设我想创建一个通用函数以在网络上公开它，并且可以供希望它使用自己的语言的人使用。

```
function do_something($somepar)
{
    if (whatever())
    {
        return TRUE;
    }
    else
    {
        $error_message = localizeThis("How to translate this?");
        trigger_error($error_message, E_USER_ERROR);
        return FALSE;
    }
}
if (do_something("SMART"))
    echo "Everything went right";
else
    echo "Something failed"; 
```

另外如何设置正确的输出语言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T13:51:16.540

您需要区分错误处理、调试/错误消息和用户可见的输出。PHP 触发的标准错误消息没有被 PHP 本地化。专供开发者看，帮助开发者调试应用程序，开发者要求会说英语。无论如何，PHP 语言的其余部分都是英文的。

由引发的异常或由引发的异常触发的消息`trigger_error`并不适合最终用户使用，因为大多数最终用户无论如何都不会理解它们。您需要在内部捕获这些错误，并在必要时通过任何类型的本地化系统通知用户发生了不好的事情。技术错误消息还可能包含不应向公众披露的敏感信息。所以：

```
set_error_handler(function ($errno, $errstr) {
    logErrorToFile($errstr);

    switch ($errno) {
        case E_ERROR :
            die(_('Sorry, something bad happened. Please read this comforting localized error instead'));
        case E_NOTICE :
            // decide what you want to do here
        ...
    }
}); 
```

和：

```
try {
    somethingThatThrowsExceptions();
} catch (Exception $e) {
    logErrorToFile($e->getMessage());
    die(_('Sorry, something bad happened. Please read this comforting localized error instead'));
} 
```

# php - 使用 PHP/DOM 删除“Nth”li 元素？

> ID：12425683
> 
> 赞同：0
> 
> 时间：2012-09-14T13:34:18.007
> 
> 标签：php, parsing, dom

我有一个与 php 文件 (action.php) 通信的 HTML 表单 (form.html)。来自表单的输入将 li 元素添加到单独的静态 HTML 文件 (content.html) 的顶部。但是，我还想删除 content.html 中的最后一个 li 元素。似乎有比正则表达式更好、更可靠的方法，所以我一直在尝试 DOM 解析。有没有办法使用 PHP 和 DOM 删除 content.html 中的最后一个 li 元素？

HTML (form.html):

```
<form action="action.php" method="post">
  Year: <input type="text" name="year" size="3" /><br />
  URL: <input type="text" name="url" size="3" /><br />
  Description: <input type="text" name="description" size="3" /><br />
  <input type="submit" name="preview" value="Preview" /> 
  <input type="submit" name="update" value="Update" />
</form> 
```

PHP（动作.php）：

```
else if ($_POST['update']) {

$item = <<<MYTAG

  <li><h2><a href="$url">$year</a></h2><span class="desctext">$description</span></li>

MYTAG;

$doc = new DOMDocument;
$doc->load('content.html');

$file = $doc->documentElement;

$removethis = $file->getElementsByTagName("li")->item(0);
$old = $file->removeChild($removethis);

echo $doc->saveXML();

$file_data = "$item\n";
$file_data .= file_get_contents('file.html');
file_put_contents('file.html', $file_data);

    } 
```

# haskell - F# 有 Haskell 的“新类型”吗？

> ID：12425685
> 
> 赞同：6
> 
> 时间：2012-09-14T13:34:24.060
> 
> 标签：haskell, types, f#, parsec, newtype

### 新库：[XParsec](http://corsis.github.com/XParsec/)

这个问题导致了 F# 3.0 中与流类型无关的 parsec 实现 - 受 FParsec 启发，从 CharStreams 中解放出来并简化了：[http ://corsis.github.com/XParsec/](http://corsis.github.com/XParsec/)

* * *

在受 FParsec 启发的独立于流类型的简单 parsec 实现中，我想知道如何在类型级别区分以下内容：

*   消耗一段流的解析器
*   在当前位置工作而不在流中前进的解析器

具体来说，我如何在 F# 中进行限制

*   `many1?`
*   `skipMany1?'?`

仅使用类型声明为使用流的解析器？

F# 是否提供与 Haskell 类似的构造`newtype`？

有没有更具体的 F# 方法来解决这个问题？

## 代码

```
// Copyright (c) Cetin Sert 2012
// License: Simplified BSD.

#if INTERACTIVE
#else
module XParsec
#endif

  open System
  open System.Collections.Generic

  module Streams =

    type 'a ArrayEnumerator (a : 'a [], ?i : int) as e =
      let         l = a.Length
      let mutable s = -1 |> defaultArg i
      member e.Current           = a.[s]
      member e.Reset          () = s <- -1 |> defaultArg i
      member e.MoveNext       () = let i = s + 1 in if i <  l then s <- i; true else false
      member e.MoveBack       () = let i = s - 1 in if i > -1 then s <- i; true else false
      member e.State with get () = s and   set i =  if i <  l then s <- i       else raise <| ArgumentOutOfRangeException()
      member e.Copy           ()           = new ArrayEnumerator<_>(a, s)
      static member inline New (a : 'a []) = new ArrayEnumerator<_>(a)
      interface 'a IEnumerator with
        member i.Current     = e.Current
      interface Collections.IEnumerator with
        member i.Current     = e.Current :> obj
        member i.MoveNext () = e.MoveNext ()
        member i.Reset    () = e.Reset    ()
      interface IDisposable with
        member i.Dispose  () = ()

    type 'a IEnumerator with
      member inline e.Copy     () = (e :?> 'a ArrayEnumerator).Copy     ()
      member inline e.MoveBack () = (e :?> 'a ArrayEnumerator).MoveBack ()

    type 'a  E = 'a     IEnumerator
    type 'a AE = 'a ArrayEnumerator
    type 'a  S = 'a      E

  open Streams

  type 'a Reply      = S of 'a | F
  type 'a Reply with
    member inline r.Value   = match r with S x -> x | F -> raise <| new InvalidOperationException()
    member inline r.IsMatch = match r with F -> false | S _ -> true 
    static member inline FromBool b = if b then S () else F
    static member inline Negate   r = match r with F -> S () | S _ -> F
    static member inline Map    f r = match r with F -> F    | S x -> S <| f x
    static member inline Put    x r = match r with F -> F    | S _ -> S x
    static member inline Choose f r = match r with F -> F    | S x -> match f x with Some v -> S v | None -> F

  type 'a R = 'a Reply

  type Parser<'a,'b> = 'a S -> 'b R

  module Primitives =

    open Operators

    let inline attempt (p : Parser<_,_>) (s : _ S) = s.Copy() |> p

    let inline Δ<'a> = Unchecked.defaultof<'a>
    let inline pzero     (_ : _ S) = S Δ
    let inline preturn x (_ : _ S) = S x

    let inline current   (e : _ S) = e.Current |> S
    let inline one       (e : _ S) = if e.MoveNext() then e |> current else F

    let inline (?->) b x = if b then Some x else None
    let inline (!!>) (p : Parser<_,_>)   e = e |> p |> Reply<_>.Negate
    let inline (|->) (p : Parser<_,_>) f e = e |> p |> Reply<_>.Map    f
    let inline (|?>) (p : Parser<_,_>) f e = e |> p |> Reply<_>.Choose f
    let inline (>.)  (p : Parser<_,_>) (q : Parser<_,_>) e = match p e with F -> F   | S _ -> q e
    let inline (.>)  (p : Parser<_,_>) (q : Parser<_,_>) e = match p e with F -> F   | S p -> q e |> Reply<_>.Put p
    let inline (.>.) (p : Parser<_,_>) (q : Parser<_,_>) e = match p e with F -> F   | S p -> q e |> Reply<_>.Map (fun q -> (p,q))
    let inline (</>) (p : Parser<_,_>) (q : Parser<_,_>) e = match p e with F -> q e | s   -> s

    let inline private back              (s : _ S) = s.MoveBack() |> ignore
    let inline many    (p : Parser<_,_>) (s : _ S) = let r = ref Δ in let q = Seq.toList <| seq { while (r := p s; (!r).IsMatch) do yield (!r).Value } in back s; S q
    let inline many1   (p : Parser<_,_>) (s : _ S) = s |> many p |> Reply<_>.Choose (function _::_ as l -> Some l | _ -> None)
    let inline array n (p : Parser<_,_>) (s : _ S) = s |> many p |> Reply<_>.Choose (function l -> let a = l |> List.toArray in (a.Length = n) ?-> a)

    let inline skipMany'  (p : Parser<_,_>) (s : _ S) = let c = ref 0 in (while (p s).IsMatch do c := !c + 1); back s; S !c
    let inline skipMany   (p : Parser<_,_>) (s : _ S) = s |> skipMany'  p |> Reply<_>.Put ()
    let inline skipMany1' (p : Parser<_,_>) (s : _ S) = s |> skipMany'  p |> Reply<_>.Choose (fun n -> if n > 0 then Some n  else None)
    let inline skipMany1  (p : Parser<_,_>) (s : _ S) = s |> skipMany1' p |> Reply<_>.Put ()
    let inline skipN   i   p                 s        = s |> skipMany'  p |> Reply<_>.Choose (fun n -> if n = i then Some () else None)

    let inline (!*) p s = skipMany  p s
    let inline (!+) p s = skipMany1 p s 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-14T13:57:42.390

不，F# 没有类似`newtype`.

如果要声明一个新类型（类型检查器将其视为不同的类型），则必须将其定义为包装器，例如使用单例区分联合：

```
type NewParser = NP of OldParser 
```

区分一个类型的多个变体的另一种方法是使用幻像类型。这是一种非常微妙的技术，并且不经常使用（更多的是一个研究主题），但我写[了一篇关于将它与 F# async 一起使用的文章](http://tomasp.net/blog/safe-gui-async.aspx)，它非常强大。

F#中的一般设计原则是保持简单，所以这可能太多了，但这里有一个例子：（顺便说一句：我还建议使用更少的运算符和更容易理解的命名函数）

```
// Interfaces that do not implement anything, just represent different parser kinds
type ParserBehaviour = 
  interface end
type ConstParser = 
  inherit ParserBehaviour
type ForwardParser = 
  inherit ParserBehaviour 
```

在解析器的定义中，您现在可以添加一个未使用且必须是以下接口之一的类型参数：

```
type Parser<'T, 'F when 'F :> ParserBehaviour> = 
  P of (IEnumerator<char> -> 'T) 
```

现在，您可以使用解析器的行为注释它们：

```
let current : Parser<_, ConstParser> = P (fun c -> c.Current)
let next : Parser<_, ForwardParser> = P (fun c -> c.MoveNext; c.Current) 
```

如果你想编写一个只能在不改变 的解析器上工作的函数`Ienumerator`，你可以 require `Parser<'T, ConstParser>`。对于可以对所有这些都起作用的功能，您可以采用`Parser<'T, 'B>`.

...但正如我所说，这是相当先进的，有些人会认为这是 F# 中的黑魔法。F# 的编程方法与 Haskell 完全不同。创建简单易用的库比在每种情况下都完全类型安全更重要。

# iphone - iOS 评论列表视图组件

> ID：12425690
> 
> 赞同：-1
> 
> 时间：2012-09-14T13:34:42.200
> 
> 标签：iphone, ios, uitableview, open-source, comments

我想实现这样的评论视图：

![在此处输入图像描述](../Images/402d75f2014e18c9b1346a24a421c0ab.png)

有没有这样做的开源项目？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:45:26.933

您可以使用源代码的[GitHub 链接](https://github.com/funkyboy/Building-a-Jabber-client-for-iOS)。

教程[参考这个](http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-custom-chat-view-and-emoticons/)

# java - Guava 中 Maps.filterKeys 和 Maps.filterValues 的区别

> ID：12425692
> 
> 赞同：-1
> 
> 时间：2012-09-14T13:34:45.090
> 
> 标签：java, maps, guava

试图理解为什么我们有单独的方法 Maps.filterKeys 和 Maps.filterValues。

如果您将相同的谓词传递给任一方法，结果是否会不同 - 因为谓词决定了过滤的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T14:28:20.567

除非你有一个`Map<K, V>`where K 和 V 是相同的类，否则你不能传递相同的谓词：

```
Maps.filterKeys(Map<K, V> unfiltered, Predicate<? super K> keyPredicate);
Maps.filterValues(Map<K, V> unfiltered, Predicate<? super V> valuePredicate); 
```

顾名思义，`filterKeys`过滤键，`filterValues`过滤值。

# android - Android 应用程序在 404 上崩溃，无法处理 InputStreamReader 上的异常

> ID：12425694
> 
> 赞同：0
> 
> 时间：2012-09-14T13:34:48.500
> 
> 标签：android, android-networking, inputstreamreader

所以在我的 android 应用程序中，它使用 GET 来拉网页并下载文本，我执行：

```
private InputStream OpenHttpConnection(String urlString) throws IOException {
    Log.d("Networking", "InputStream called");
    InputStream in = null;
    int response = -1;

    URL url = new URL(urlString);
    URLConnection conn = url.openConnection();

    if(!(conn instanceof HttpURLConnection))
        throw new IOException("Not an HTTP connection");
    try {
        HttpURLConnection httpConn = (HttpURLConnection) conn;

        httpConn.setConnectTimeout(10000);
        httpConn.setReadTimeout(10000);
        httpConn.setAllowUserInteraction(false);
        httpConn.setInstanceFollowRedirects(true);
        httpConn.setRequestMethod("GET");
        httpConn.connect();
        response = httpConn.getResponseCode();
        if (response == HttpURLConnection.HTTP_OK) {
            in = httpConn.getInputStream();
        }
    }
    catch (Exception ex) {
            Log.d("Networking", "" + ex.getLocalizedMessage());
            throw new IOException("Error connecting");
        }
    return in;
}

private String DownloadText(String URL) {
    int BUFFER_SIZE = 2000;
    InputStream in = null;
    try {
        in = OpenHttpConnection(URL);
        } 
    catch (IOException e) {
        Log.d("Networking", "" + e.getLocalizedMessage());
        return "";
    }
    InputStreamReader isr = new InputStreamReader(in);
    int charRead;
    String str = "";
    char[] inputBuffer = new char[BUFFER_SIZE];
    try {
        while ((charRead = isr.read(inputBuffer))>0) {
            //---convert the chars to a String---
            String readString = String.copyValueOf(inputBuffer, 0, charRead);
            str += readString;
            inputBuffer = new char[BUFFER_SIZE]; }
        in.close();
    }
    catch (IOException e) {
        Log.d("Networking", "" + e.getLocalizedMessage());
        return "";
    }
    return str;
} 
```

如果我调用 stringx = DownloadText("http://hello.com/whatever.txt")，这将非常有效，只要 what.txt 存在。

但是，如果它是 404s，它就会崩溃。这让我感到惊讶——404 仍在返回内容，确定吗？我已经进行了很多调试，它似乎执行了这一行：

```
 InputStreamReader isr = new InputStreamReader(in); 
```

崩溃前。此行执行后没有任何内容。我试过使用 try {} catch (IOException) {} 来解决这个问题，但它说该行不会引发异常。

有没有人知道为什么这条线会导致这样的问题？我的应用程序几乎完成了，但是错误处理给我带来了问题！

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T13:43:50.677

您的这段代码：

```
 if (response == HttpURLConnection.HTTP_OK) {
        in = httpConn.getInputStream();
    } 
```

防止`in`在您获得 404 时被分配。如果您获得除 HTTP_OK (200) 之外的任何内容，`in`则将为 null 并且您的 InputStreamReader 分配将失败。

要处理此错误，您可以使用以下模式：

```
class HTTPException extends IOException {
    private int responseCode;

    public HTTPException( final int responseCode ) {
        super();
        this.responseCode = responseCode;
    }

    public int getResponseCode() {
        return this.responseCode;
    }
} 
```

然后按如下方式更改您的代码：

```
private InputStream OpenHttpConnection(String urlString) throws IOException {
    Log.d("Networking", "InputStream called");
    InputStream in = null;
    int response = -1;

    URL url = new URL(urlString);
    URLConnection conn = url.openConnection();

    if(!(conn instanceof HttpURLConnection))
        throw new IOException("Not an HTTP connection");
    try {
        HttpURLConnection httpConn = (HttpURLConnection) conn;

        httpConn.setConnectTimeout(10000);
        httpConn.setReadTimeout(10000);
        httpConn.setAllowUserInteraction(false);
        httpConn.setInstanceFollowRedirects(true);
        httpConn.setRequestMethod("GET");
        httpConn.connect();
        response = httpConn.getResponseCode();
        if (response == HttpURLConnection.HTTP_OK) {
            in = httpConn.getInputStream();
        } else { // this is new
            throw new HTTPException( response );
        }

    }
    catch (Exception ex) {
            Log.d("Networking", "" + ex.getLocalizedMessage());
            throw new IOException("Error connecting");
        }
    return in;
}

private String DownloadText(String URL) {
    int BUFFER_SIZE = 2000;
    InputStream in = null;
    try {
        in = OpenHttpConnection(URL);
        } 
    catch (IOException e) {
        Log.d("Networking", "" + e.getLocalizedMessage());
        return "";
    }
    InputStreamReader isr = new InputStreamReader(in);
    int charRead;
    String str = "";
    char[] inputBuffer = new char[BUFFER_SIZE];
    try {
        while ((charRead = isr.read(inputBuffer))>0) {
            //---convert the chars to a String---
            String readString = String.copyValueOf(inputBuffer, 0, charRead);
            str += readString;
            inputBuffer = new char[BUFFER_SIZE]; }
        in.close();
    }
    catch( HTTPException e ) {
        Log.d( String.format( "HTTP Response not ok: %d", e.getResponseCode() ) );
        // handle whatever else you need to handle here.
    }
    catch (IOException e) {
        Log.d("Networking", "" + e.getLocalizedMessage());
        return "";
    }
    return str;
} 
```

# jquery - 在滚动时更改 div 不透明度

> ID：12425702
> 
> 赞同：7
> 
> 时间：2012-09-14T13:35:20.447
> 
> 标签：jquery, scroll, opacity

我怎样才能使当您向下滚动页面时，下一个 DIV 会在上一个 DIV 之上淡入淡出？

我已经设置了这个小提琴来更好地说明它：http: [//jsfiddle.net/meEf4/176/](http://jsfiddle.net/meEf4/176/)
例如，如果你在页面的中间，背景是蓝色的。

编辑：这是 jsFiddle 的内容，以防万一发生爆炸并且有人遇到类似问题。

```
<style>
html, body, #red, #green, #blue { height: 100%}
#container { height: 300%}
#red, #green, #blue { 
    position: fixed; 
    top: 0; 
    width: 100%;
}
#red { background:red; z-index: 5}
#blue { background:blue; z-index: 4}
#green { background:green; z-index: 3}​    
</style>

<div id="container">
    <div id="red"></div>
    <div id="blue"></div>
    <div id="green"></div>
</div>​ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T14:29:37.300

你可以这样做：

```
var target = $('div.background');
var targetHeight = target.height();
var containerHeight = $('#container').outerHeight();

var maxScroll = containerHeight - targetHeight;
var scrollRange = maxScroll/(target.length-1);

$(document).scroll(function(e){
    var scrollY = $(window).scrollTop();
    var scrollPercent = (scrollRange - scrollY%scrollRange)/scrollRange;
    var divIndex = Math.floor(scrollY/scrollRange);

    target.has(':lt(' + divIndex + ')').css('opacity', 0);
    target.eq(divIndex).css('opacity', scrollPercent);
    target.has(':gt(' + divIndex + ')').css('opacity', 1);
});​ 
```

**[工作演示小提琴](http://jsfiddle.net/meEf4/222/)**

您将滚动值映射到您需要使用`maxScroll value`除以定位的背景 div `the number of background divs - 1`。这个数字是一个背景 div 必须覆盖的滚动范围。`scroll value`然后，您使用模数计算该 div 的滚动百分比`the scroll range`，这样您就可以得到目标 div 的 1 到 0 之间的值。

然后将目标 div 设置为计算值，下面的 div 的不透明度为 1，上面的 div 的不透明度为 0（因为它们之前经历了 1 到 0 的范围）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:36:16.623

可以改进此解决方案以使其更通用，但这是一个开始

```
$(document).ready(function() {

      var colordivs = $('#container div');

      $(document).scroll(function(e) {
          var scrollPercent = ($(window).scrollTop() / $('#container').outerHeight()) * 100;

          if (scrollPercent > 0) {
              if (scrollPercent < 33) {
                  var opacity = 1 - (scrollPercent / 33);
                  $(colordivs[0]).css('opacity', opacity);
              }
              else if (scrollPercent > 66) {
                  var opacity = 1 - (scrollPercent / 100);
                  $(colordivs[0]).css('opacity', 0);
                  $(colordivs[1]).css('opacity', 0);
                  $(colordivs[2]).css('opacity', opacity);
              }
              else if (scrollPercent > 33) {
                  var opacity = 1 - (scrollPercent / 66);
                  $(colordivs[0]).css('opacity', 0);
                  $(colordivs[1]).css('opacity', opacity);
              }
          }
      });

  }); 
```

# sharepoint - 将查询字符串参数从 SharePoint 传递到 ADFS

> ID：12425703
> 
> 赞同：1
> 
> 时间：2012-09-14T13:35:24.573
> 
> 标签：sharepoint, single-sign-on, adfs

用于对 SharePoint 应用程序的访问者进行身份验证的 Idp 需要用于控制内容的自定义查询字符串参数。我可以在参数进入 SharePoint 的 STS 之前使用 http 模块附加参数，然后在进入 adfs 之前将其删除。在 Fiddler 中，它看起来像这样：

这是 SharePoint 中 /_trust 的最后一个 GET，并且有查询字符串参数

```
GET /_trust/default.aspx?trust=ADFS01&ReturnUrl=/abc/_layouts/Authenticate.aspx?Source=%2Fabc&Source=/abc&whr=https%3A%2F%2Fwww.customidp.com%2FBrandedSTS%2F&parametercode=abc HTTP/1.1

trust       ADFS01
ReturnUrl   /abc/_layouts/Authenticate.aspx?Source=/abc
Source      /abc
whr     https://www.customidp.com/BrandedSTS/
parametercode   abc 
```

但是 GET 到 ADFS 最终放弃了它。

```
GET /adfs/ls/?wa=wsignin1.0&wtrealm=urn%3awww%3aportal%3acom&wctx=https%3a%2f%2fwww.portal.com%2fabc%2f_layouts%2fAuthenticate.aspx%3fSource%3d%2fabc&whr=https%3a%2f%2fwww.customidp.com%2fBrandedSTS%2f HTTP/1.1

wa  wsignin1.0
wtrealm urn:www:portal:com
wctx    https://www.portal.com/abc/_layouts/Authenticate.aspx?Source=/abc
whr https://www.customidp.com/BrandedSTS/ 
```

我想知道是否有人知道让 SharePoint 的 STS 传递任何查询字符串参数的方法，或者是否可以将 Http 模块添加到 STS 来完成此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:49:21.817

因此，由于代码“abc”包含在 wctx 参数中，我们最终使用 RegEx 在 Global.asax 中将其从那里抓取出来，并将其附加到我们 STS 的 url 中。

# asp.net - Azure Web 角色 - 最大出站 http 连接数

> ID：12425705
> 
> 赞同：2
> 
> 时间：2012-09-14T13:35:29.770
> 
> 标签：asp.net, asp.net-mvc, azure, azure-web-roles, azure-configuration

我正在构建一个需要调用大量外部 Web 服务的 Azure Web 角色。

我记得对于 ASP.Net 1.1，有一个默认的最大连接限制为 2，如果您的应用程序需要更多，您可以调整该限制（说实话，这是相当低的）。在 ASP.Net 2.0 上，我相信他们提出了这一点，并且建议是核心数的 12 倍。

Azure Web 角色的限制和调整方法是什么？我将同时处理数百或数千个并发出站请求。这是否意味着我需要更大的实例（更多核心），或者我可以通过使用更多“超小”实例并正确配置它们来做到这一点（即使这意味着每台服务器 12 个）？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:57:38.490

您的实例的大小将仅决定为您的实例保留的带宽（XS 为 5 Mbps，更多信息请[点击此处](http://technet.microsoft.com/en-us/cloud/gg663909.aspx)）。您需要做的只是将 DefaultConnectionLimit 更改为 2 以上：

```
 <system.net>
    <connectionManagement>
      <add address="*" maxconnection="12"/>
    </connectionManagement>
  </system.net> 
```

如果您想在您的 Web 应用程序中允许这样做，请将其添加到您的 web.config 中。例如，如果您想在启动实例之前调用服务，请将以下内容添加到您的 WebRole.cs：

```
 public override bool OnStart()
    {
        ServicePointManager.DefaultConnectionLimit = 12;
        return base.OnStart();
    } 
```

请记住，即使请求排队，如果您以异步方式调用 Web 服务，您将获得更好的整体性能。这是一个非常基本的示例（假设您调用一个简单的 REST 服务，WCF 客户端代理对异步请求有更好的支持）：

```
<%@ Page Async="true" ... %>

public partial class AsyncPage : System.Web.UI.Page
{
    private WebRequest req;

    void Page_Load (object sender, EventArgs e)
    {
        AddOnPreRenderCompleteAsync (
            new BeginEventHandler(BeginWebServiceCall),
            new EndEventHandler (EndWebServiceCall)
        );
    }

    IAsyncResult BeginWebServiceCall (object sender, EventArgs e, 
        AsyncCallback cb, object state)
    {
        req = WebRequest.Create("http://some.webs.service/rest/api");
        return req.BeginGetResponse (cb, state);
    }
    void EndWebServiceCall (IAsyncResult ar)
    {
        using (var response = req.EndGetResponse(ar))
        {
            using var reader = 
                new StreamReader(response.GetResponseStream()))
            {
                var text = reader.ReadToEnd();
        ...
            }
        }
    }
} 
```

# android - 用于推送通知的 GCM（Google 云消息传递）令牌 ID

> ID：12425707
> 
> 赞同：1
> 
> 时间：2012-09-14T13:35:34.990
> 
> 标签：android

是否有任何令牌 ID，应提供给服务器端。

制作 api url 应该提供给服务器端的东西是什么。

在谷歌控制台注册后，我得到了这个..

服务器应用程序的密钥（带 IP 锁定）API 密钥：

* * *

IP：
允许的任何 IP

和

浏览器应用程序的密钥（带有引用）API 密钥：

* * *

推荐人：
允许任何推荐人

是否足够，或者我必须做其他事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:39:05.393

您将使用参数 authorization 设置请求的标头：key="api access key" 当您为 GCM 保存项目时由谷歌控制台给出。

# c# - 如何从 SimpleMembership Provider 中引用用户信息

> ID：12425708
> 
> 赞同：0
> 
> 时间：2012-09-14T13:35:34.910
> 
> 标签：c#, asp.net, entity-framework, ef-code-first, asp.net-membership

使用 EF-Code-First 我想设置一个与 ASP.Net 4.0+ OOTB 附带的内置简单成员资格提供程序相关（1-1）的数据库表

AccountModels.cs 中的 UserProfile 类是一个简单的 2 字段类：

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
} 
```

我的班级与我想分开的其他用户信息具有以下格式：

```
[Table("UserInfo")]
public class UserInfo
{
    [Key]
    public int ID { get; set; }
    <user info fields here...>
    public virtual UserProfile UserProfile { get; set; }
} 
```

上下文是：

```
public class UsersContext : DbContext
{
    public UsersContext()
        : base("DefaultConnection")
    {
    }
    public DbSet<UserProfile> UserProfiles { get; set; }
    public DbSet<UserInfo> UsersInfo { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<UserInfo>()
                    .HasRequired(u => u.UserProfile)
                    .WithRequiredPrincipal();
    }
} 
```

现在，无需更改任何其他内容，当我运行应用程序时，模型构建良好，但`WebSecurity.CreateUserAndAccount(model.UserName, model.Password);`运行时出现错误（Acct Controller Line 82）。`The INSERT statement conflicted with the FOREIGN KEY constraint "UserInfo_UserProfile".`

存储我希望以后能够直接从数据库中引用的用户信息的（假定的）首选方法是什么（即，根据旧的配置文件提供程序，不在 blob 中）

如何使用 EF-CodeFirst 进行设置，而不是通过存储库层运行所有内容？我应该去存储库路线吗？

当我测试该方法时，我无法让 azureSQL 在 UserProfile 表中包含更多列，因此希望将 userInfo 内容排除在 UserProfile 之外。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:18:54.797

```
 modelBuilder.Entity<UserInfo>()
                    .HasRequired(u => u.UserProfile)
                    .WithRequiredPrincipal(); 
```

意味着您的 UserProfile 类又需要 UserInfo。由于 SimpleMembership 将插入 UserProfile 而不是 UserInfo，因此会引发异常。

我认为您不需要考虑这个问题，因为您的关系是可选的 - UserProfile 将在 UserInfo 之前存在，因为 simplemembership 将在您创建 UserInfo 之前创建它。

[http://social.msdn.microsoft.com/Forums/en/adonetefx/thread/257f33d2-9870-46ce-9b0b-147935162a0c](http://social.msdn.microsoft.com/Forums/en/adonetefx/thread/257f33d2-9870-46ce-9b0b-147935162a0c)

# c - win32 COORD 结构的编译器错误？

> ID：12425710
> 
> 赞同：1
> 
> 时间：2012-09-14T13:35:54.630
> 
> 标签：c, winapi

我正在尝试使用 Win32 控制台 API 在 Windows 中实现控制台应用程序的进度条。我的问题是编译器给出了错误，`error C2059: syntax error : 'constant'`. 相关代码如下。

```
void updateBar(PBAR * pbr, float ratio){
    COORD pos;
    pos.X = 0;
    pos.Y = 25;

    SetConsoleCursorPosition(hConOut, pos);
} 
```

`COORD`是用于表示坐标对的 Win32 结构。`hConOut`是一个全局变量，`PBAR`是一个结构。对于两个分配（pos.X = 0 an pox.Y = 25），上述错误给出了两次。如果我使用以下内容，它将完美编译。

```
void updateBar(PBAR * pbr, float ratio){
    COORD pos = {0, 25};
    SetConsoleCursorPosition(hConOut, pos);
} 
```

我真的无法理解这其中的原因。我的意思是这只是对结构成员的分配，对吗？？如果我做类似的事情`POINT pt; pt.x = 0; pt.y = 25`，它会完美编译。`POINT`只是另一种结构。

我在 Windows 7 上使用 Visual Studio 2010，编译器是：

Microsoft (R) 32 位 C/C++ 优化编译器版本 16.00.30319.01 用于 80x86

有什么想法吗 ？？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T13:50:25.883

我编译了这个，它工作正常。

但是，如果我将 X 或 Y 定义为宏，例如

```
#define X 2
#define Y 15 
```

然后我得到与你完全相同的错误。你有这些宏吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:49:04.600

错误 C2059 是一个解析错误，该常量是意外的。您可能在某处有一些垃圾字符，文件中前面有一个不匹配的大括号，或者其他什么。

请参阅[文档](http://msdn.microsoft.com/en-us/library/t8xe60cf%28v=vs.71%29.aspx)：

> 语法错误：'令牌'
> 
> 令牌导致语法错误。
> 
> 要确定原因，不仅要检查错误消息中列出的行，还要检查它上面的行。

# android - 使用 Hashmap 从已经膨胀的布局中填充文本视图

> ID：12425711
> 
> 赞同：1
> 
> 时间：2012-09-14T13:35:54.323
> 
> 标签：android

美好的一天，希望标题不会令人困惑，我可以在这里说清楚。我有一个带有 TextViews 和 ImageViews 的自定义 ArrayAdapter。现在我希望其中一个 TextView 由 HashMap 中的值填充，其中第二列作为键。结构是这样的。。

image1 店铺 text2

image2 汽车 text2

image3 房子 text2

image4 船 text2

在此示例中，第 1 列和第 2 列已在 ArrayAdapter 中填充了数组。所以我希望 text2 填充一个 HashMap 值，其中 column2 是键。一个例子是，如果有 30 家商店，我们将有

image1 店铺 30

代码是：

```
 Resources rsc = getActivity().getResources();
        String[] options = rsc.getStringArray(R.array.item_title);
        TypedArray icons = rsc.obtainTypedArray(R.array.item_title_color);
  HashMap<String,String> map = new HashMap<String,String>();

    MyAdapter adapter = new MyAdapter(getActivity(), R.layout.listview_custom_item, options, icons, map);
        list.setAdapter(adapter); 
```

我的适配器类：

```
class MyAccountsAdapter extends ArrayAdapter<Object> {
        private LayoutInflater mInflater;
        private int ViewResourceId; 
        private String[] mstring;
        TypedArray icons;
        HashMap<String, String> infomap = new HashMap<String,String>();

    public MyAdapter(Context context, int textViewResourceId, String[] string, TypedArray icons, HashMap<String, String> map) {
            super(context, textViewResourceId, string);

      mInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
              mstring = string;
              this.icons = icons;
              ViewResourceId = textViewResourceId;
              infomap.putAll(map);  //another hashmap here
        }

    @Override
        public int getCount(){
            return mstring.length;
        }

            @Override
        public View getView(int position, View convertView, ViewGroup parent){
            convertView = mInflater.inflate(ViewResourceId, null);

            ImageView imageview = (ImageView)convertView.findViewById(R.id.list_image_id);
            TextView text_title = (TextView)convertView.findViewById(R.id.list_text_id);
            TextView text_info = (TextView)convertView.findViewById(R.id.list_textinfo_id);

            imageview.setImageDrawable(icons.getDrawable(position));
            text_title.setText(mstring[position]);
            Log.d(TAG, "strings are" + text_title.getText().toString());

// so how do i populate text_info here to correspond with text_title;

            return convertView;
        } 
```

有任何想法吗？还是有更好的方法来做到这一点，比如将它们全部合二为一？...任何帮助都非常感谢。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:50:41.433

试试下面的代码：

```
 text_info.setText(infomap.get(mstring[position])); 
```

# architecture - 在站点和提供商之间没有秘密的单点登录

> ID：12425713
> 
> 赞同：2
> 
> 时间：2012-09-14T13:35:58.513
> 
> 标签：architecture, single-sign-on

我有一个客户想要单点登录到我的应用程序，我正在尝试弄清楚如何实现它。

似乎在理论上，您的站点和 SSO 提供商之间必须共享一个秘密，以便消息可以附加防篡改哈希，或者您的站点必须生成一个 SSO 和用户都可以独立运行的令牌.

我有机会告诉 SSO 提供商我想如何与他们交互，我真的不想处理消息散列和存储秘密，所以我想出了以下方法，在我看来它会起作用。

![没有秘密的 SSO](../Images/e4202904e1b9b2bc1aaba42d1f7fde31.png)

这是不安全的吗？有另一种/更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:45:03.380

这个想法很好，它与众所周知的生产就绪的[Jasig](http://www.jasig.org/cas) [Central Authentication Service](http://www.jasig.org/cas)协议及其 java 服务器实现[jcas](http://jcas.sourceforge.net/)非常相似。

CAS 还处理[Single Sign Out](https://wiki.jasig.org/display/CASUM/Single+Sign+Out)（不是很明显）、[代理](https://wiki.jasig.org/display/CAS/Proxy+CAS+Walkthrough)、[OAuth 集成](https://wiki.jasig.org/display/CASUM/OAuth)等。

# iphone - 一种向 iPhone 上的应用程序发送内存不足警告的方法

> ID：12425720
> 
> 赞同：1
> 
> 时间：2012-09-14T13:36:27.840
> 
> 标签：iphone, cydia, tweak, low-memory

我正在寻找一些可以在 iPhone（越狱）上生成内存不足警告的工具/应用程序/调整。或者，作为替代变体 - 模拟高内存使用的调整。

我需要它来测试我的应用程序在内存不足警告时的行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T13:42:05.223

*   *您可以通过“模拟内存警告*”菜单项（来自“*硬件*”菜单）在模拟器上进行测试
*   在您的设备上，您可以调用私有方法`_performMemoryWarning`

    ```
    #if DEBUG
    [[UIApplication sharedApplication] performSelector:@selector(_performMemoryWarning)];
    #endif 
    ```

*   另一种解决方案是手动发送通知：

    ```
    CFNotificationCenterPostNotification(CFNotificationCenterGetDarwinNotifyCenter(), (CFStringRef)@"UISimulatedMemoryWarningNotification", NULL, NULL, true); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:43:32.317

当您在模拟器上运行应用程序时，您可以通过以下方式执行此操作：

> 硬件（在顶部菜单上）-> 模拟内存警告

对于真实设备，您可以使用私有方法：

```
[[UIApplication sharedApplication] performSelector:@selector(_performMemoryWarning)]; 
```

# asp.net - ASPxGridView 的 GetDataRow 方法不返回任何内容

> ID：12425724
> 
> 赞同：1
> 
> 时间：2012-09-14T13:36:41.750
> 
> 标签：asp.net, vb.net, devexpress, aspxgridview

我的页面中有一个 DevExpress 的 ASPxGridView，其中包含一些数据。

我想根据索引获取行的值。

这是我在`RowUpdating`活动中所做的：

```
Dim index As Integer = grdxFornecedor.FindVisibleIndexByKeyValue(e.Keys("IdFornecedor"))
Dim row As System.Data.DataRow = grdxFornecedor.GetDataRow(index) 
```

第二行正在返回`Nothing`，即使网格中存在索引。

任何人？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:50:19.480

请改用[ASPxGridView.GetRow](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_GetRowtopic)方法并将检索到的数据项转换为所需的目标类型：

```
'Dim row As System.Data.DataRow = grdxFornecedor.GetDataRow(index)
Dim row As Object = grdxFornecedor.GetRow(index) 
```

# logging - python相当于idl的日志功能？

> ID：12425725
> 
> 赞同：1
> 
> 时间：2012-09-14T13:36:44.527
> 
> 标签：logging, ipython, idl, idl-programming-language, journal

我正在尝试在python（或ipython）中找到idl's journal的等效功能。我知道 ipython 有 %logstart 函数，但它只记录 ipython 中的输入/输出，所以如果我运行我的脚本并要求我输入值，这些不会进入日志。当我运行 EELTnoM6.py 脚本时，这里是我的终端：

```
In [11]: run EELTnoM6

################################################################
##             STOKES vector after the system                 ##
################################################################ 

== Demodulation matrix ==
Automatic:                A
ZIMPOL/EELT:              Z
EELT IF                   Eif
Custom                    C
Demodulation matrix?: C
Efficiency of the detector?: 1.
Demodulation matrix? (e.g. [ [1.,0.],[0.,1.] ]): [[1/6.,1/6.,1/6.,1/6.,1/6.,1/6.],     [0.5,-0.5,0.,0.,0.,0.],[0.,0.,-0.5,0.5,0.,0.],[0.,0.,0.,0.,-0.5,0.5]]
ModelStokesMeasurement time =  65.6509261131
Simulation time =  151.731481075 
```

这是我在日志中得到的：

```
# IPython log file
%logstart -o -r EELTnoM6_log rotate
ls
%logstop
run EELTnoM6
%logoff 
```

我想将脚本询问时给出的输入存储在日志中，即

```
Demodulation matrix?: C 
Efficiency of the detector?: 1.
Demodulation matrix? (e.g. [ [1.,0.],[0.,1.] ]): [[1/6.,1/6.,1/6.,1/6.,1/6.,1/6.],[0.5,-0.5,0.,0.,0.,0.],[0.,0.,-0.5,0.5,0.,0.],[0.,0.,0.,0.,-0.5,0.5]] 
```

所以 C, 1\. 和矩阵能够以相同的值再次运行它。这在 IDl 中非常容易，所以当我找不到 ipython 的相同内容时，我感到非常惊讶......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-17T20:11:10.403

我认为您只想使用[日志记录](https://docs.python.org/2/howto/logging.html)功能。它非常棒，并且可以很好地处理多线程。

```
import logging

log_file = 'journal.log' # Specify path to your log file

log_format = '[%(asctime)s] %(levelname)s: %(message)s'  # How the output is displayed
log_date_fmt = '%m/%d/%Y %I:%M:%S %p'  # How the asctime is displayed

logging.basicConfig(filename=log_file, level='DEBUG', filemode='w', format=log_format, datefmt=log_date_fmt)  # Fire up the logger
logging.info('Logger initialized')  # There are DEBUG, INFO, WARNING, ERROR levels

def journal(msg):
    ans = raw_input(msg)  # Get your user input
    logging.debug(msg + ans)  # Choosing to put it as DEBUG category
    return ans

ans = journal('Demodulation matrix?: ')  # From your example 
```

给出输出（包含在`./journal.log`：

> [09/17/2014 04:11:49 PM] 信息：记录器已初始化
> 
> [09/17/2014 04:11:51PM] 调试：解调矩阵？：C

# android - 将列表视图数据发送到另一个列表视图和活动

> ID：12425731
> 
> 赞同：1
> 
> 时间：2012-09-14T13:37:22.590
> 
> 标签：android, listview, android-activity

我的 android 应用程序有问题。

我需要显示用户从列表视图中“选择”的文件夹中的所有文件。如果我在一项活动中这样做效果很好，但我需要让它在其他活动列表视图中显示所选文件夹中的文件。

例如：

我们在活动 A 的列表视图中查看文件夹列表

*   文件夹：
*   测试
*   测试文件夹
*   ...以及更多文件夹

例如文件夹“testfolder”包含文本文件，所以当我点击“testfolder”时，我需要在活动 B 的列表视图中显示文本文件

```
public class FolderActivity extends Activity {

EditText folderName;
ListView listView;
String CURRENT_FOLDER = Environment.getExternalStorageDirectory().toString()+"/AppicationTest";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_folder);

    Button button = (Button)findViewById(R.id.go);  

    createFolderOnStart();

    refreshDirectory();

    listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        public void onItemClick(AdapterView<?> lista, View arg1, int position, long arg3) {
            Intent intent = new Intent(getApplicationContext(), ShowFiles.class);

            File file = new File(CURRENT_FOLDER + "/" + lista.getItemAtPosition(position));                                     

            if(file.canRead()){
                if(file.isDirectory()){
                    String[] list = file.list();

                    CURRENT_FOLDER += "/" + lista.getItemAtPosition(position);

                    listView.setAdapter(new ArrayAdapter<String>(getBaseContext(), android.R.layout.simple_list_item_1, list)); 

                    intent.putExtra("files", list);

                }
            }
            startActivity(intent);
        }
    });
} 
```

这是第一个活动的代码。

我应该怎么做才能使文件显示在第二个活动的列表视图中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:42:40.747

通过 Intent 将当前选定文件夹的完整路径传递给活动 B。在 B 活动中解析相同的内容并显示文件

# c# - Interlocked.Exchange 和 Volatile.Write 之间的区别？

> ID：12425738
> 
> 赞同：28
> 
> 时间：2012-09-14T13:37:39.220
> 
> 标签：c#, thread-safety, volatile, thread-synchronization, interlocked

`Interlocked.Exchange`和 和有什么不一样`Volatile.Write`？

这两种方法都会更新某些变量的值。有人可以总结一下何时使用它们吗？

*   [`Interlocked.Exchange`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.interlocked.exchange)
*   [`Volatile.Write`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.volatile.write)

特别是我需要更新`double`我的数组的项目，我希望另一个线程看到最新的值。什么是首选？`Interlocked.Exchange(ref arr[3], myValue)`或`Volatile.Write(ref arr[3], info);`在哪里`arr`声明为`double`？

* * *

真实的例子，我这`double`​​样声明数组：

```
private double[] _cachedProduct; 
```

在一个线程中，我像这样更新它：

```
_cachedProduct[instrumentId] = calcValue;
//...
are.Set(); 
```

在另一个线程中，我像这样读取了这个数组：

```
while(true)
{
    are.WaitOne();
    //...
    result += _cachedProduct[instrumentId];
    //...
} 
```

对我来说，它按原样工作得很好。但是，为了确保“它始终有效”，无论我应该添加什么`Volatile.Write`或`Interlocked.Exchange`. 因为[不保证双重更新是原子](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/variables#96-atomicity-of-variable-references "9.6 变量引用的原子性")的。

在回答这个问题时，我想查看`Volatile`和`Interlocked`类的详细比较。为什么我们需要 2 个类？哪一个以及何时使用？

* * *

[另一个例子，来自生产项目中](https://stackoverflow.com/questions/70906823/is-it-safe-to-replace-volatile-write-with-simple-assignment-in-a-method-that-c "在仅包含该语句的方法中用简单赋值替换 Volatile.Write() 是否安全？")锁定机制的实现：

```
private int _guard = 0;

public bool Acquire() => Interlocked.CompareExchange(ref _guard, 1, 0) == 0;

public void Release1() => Interlocked.Exchange(ref _guard, 0);
public void Release2() => Volatile.Write(ref _guard, 0); 
```

`Release1`如果此 API 的用户调用或方法，是否有任何实际区别`Release2`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T11:59:51.627

Interlocked.Exchange 使用保证原子操作的处理器指令。

Volatile.Write 做同样的事情，但它还包括一个内存屏障操作。我认为微软在 DotNet 4.5 上添加了 Volatile.Write，因为 Windows 8 上支持 ARM 处理器。英特尔和 ARM 处理器在内存操作重新排序方面有所不同。

在 Intel 上，您可以保证内存访问操作将按照它们发出的相同顺序执行，或者至少不会重新排序写入操作。

来自英特尔® 64 和 IA-32 架构软件开发人员手册，第 8 章：

> 8.2.2 P6 和更多最新处理器系列中的内存排序 Intel Core 2 Duo、Intel Atom、Intel Core Duo、Pentium 4 和 P6 系列处理器也使用处理器排序的内存排序模型，该模型可以进一步定义为“写通过存储缓冲区转发订购。” 该模型可以表征如下。

在 ARM 上，您没有这种保证，因此需要内存屏障。可以在此处找到解释此问题的 ARM 博客：http: [//blogs.arm.com/software-enablement/594-memory-access-ordering-part-3-memory-access-ordering-in-the-arm-architecture/](http://blogs.arm.com/software-enablement/594-memory-access-ordering-part-3-memory-access-ordering-in-the-arm-architecture/)

在您的示例中，由于不能保证使用 double 的操作是原子的，我建议使用锁来访问它。请记住，在读取和设置值时，您必须对代码的两个部分都使用锁。

一个更完整的示例会更好地回答您的问题，因为不清楚设置这些值后会发生什么。对于矢量，如果您的读者多于作家，请考虑使用 ReaderWriterLockSlim 对象：http: [//msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)

线程数和读/写频率会极大地改变您的锁定策略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2022-02-05T21:27:27.523

如果您不关心旧值，并且不需要*完整*的内存屏障（[包括昂贵的 StoreLoad](https://preshing.com/20120710/memory-barriers-are-like-source-control-operations/)，即在以后加载之前耗尽存储缓冲区），请始终使用`Volatile.Write`.

#### `Volatile.Write` - 原子发布商店

**`Volatile.Write`是一个具有[“发布”语义](https://preshing.com/20120913/acquire-and-release-semantics/)**的存储，AArch64 可以廉价地完成，而 x86 可以免费完成（嗯，与非原子存储相同的成本，当然除了与其他内核争用也试图写线）。它基本上等同于 C++ `std::atomic<T>` `store(value, memory_order_release)`。

例如，在 a 的情况下`double`，`Volatile.Write`对于 x86（包括 32 位和 x86-64）可以直接从 XMM 寄存器编译为 SSE2 8 字节存储，例如`movsd [mem], xmm0`，因为 x86 存储[已经具有与](https://stackoverflow.com/questions/60314179/c-how-is-release-and-acquire-achieved-on-x86-only-using-mov)[MS 文档指定的`Volatile.Write`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.volatile.write?view=net-6.0)一样多的排序[为](https://docs.microsoft.com/en-us/dotnet/api/system.threading.volatile.write?view=net-6.0). 并且假设它`double`是自然对齐的（任何 C# 运行时都会这样做，对吗？）它[也保证是 atomic](https://stackoverflow.com/questions/36624881/why-is-integer-assignment-on-a-naturally-aligned-variable-atomic-on-x86)。（在所有 x86-64 CPU 上，以及自 P5 Pentium 以来的 32 位。）

实际上，较旧的`Thread.VolatileWrite`方法[使用完整的屏障](https://stackoverflow.com/questions/6581848/memory-barrier-generators/6585367#6585367)，而不仅仅是可以在一个方向上重新排序的释放操作。这使得它不比 Interlocked.Exchange 便宜，或者在非 x86 上也不便宜。但是`Volatile.Write`/`Read`不存在某些软件可能依赖的过于强大的实现的问题。他们不必耗尽存储缓冲区，只需确保在此之前所有早期存储（和加载）都可见。

* * *

#### `Interlocked.Exchange`- 原子 RMW 加全屏障（至少 acq/rel）

这是 x86 指令的包装器，即使机器代码省略了`xchg`它，它也好像它有一个前缀。`lock`这意味着原子 RMW，以及作为其中一部分的“完整”屏障（[例如 x86`mfence`](https://stackoverflow.com/questions/40409297/does-lock-xchg-have-the-same-behavior-as-mfence)）。

一般来说，我认为 Interlocked 类方法起源于带有`lock`前缀的 x86 指令的包装器；在 x86 上，不可能做一个*不是*完全屏障的原子 RMW。也有具有这些名称的 MS C++ 函数，因此这段历史早于 C#。

MS 网站上的 Interlocked 方法（MemoryBarrier 除外）的当前文档甚至没有提及这些方法是一个完整的障碍，即使在原子 RMW 操作不需要的非 x86 ISA 上也是如此。

**我不确定完整的障碍是否是实现细节而不是语言规范的一部分**，但目前确实如此。`Intelocked.Exchange`如果您不需要它，那么这对于效率来说是一个糟糕的选择。

[这个答案](https://stackoverflow.com/questions/1581718/does-interlocked-compareexchange-use-a-memory-barrier/45346866#45346866)引用了 ECMA-335 规范，说互锁操作**执行隐式获取/释放操作。** 如果这就像 C++ `acq_rel`，那是相当强的排序，因为它是一个原子 RMW，负载和存储有点捆绑在一起，并且每个都防止在一个方向上重新排序。（但请参阅[为了排序，原子读取-修改-写入一个或两个操作？](https://stackoverflow.com/questions/65568185/for-purposes-of-ordering-is-atomic-read-modify-write-one-operation-or-two) -在 C++ 语义允许的范围内，可以观察到`seq_cst`RMW 重新排序以及`relaxed`AArch64 上的后续操作。不过，它仍然是原子 RMW .)

@Theodor Zoulias 在网上找到了多个消息来源，称 C# 互锁方法意味着完整的栅栏/屏障。例如，Joseph Albahari 的[在线书籍](http://www.albahari.com/threading/part4.aspx#_Interlocked)：“以下隐式生成完整的围栏：[...]`Interlocked`类上的所有方法”。在 Stack Overflow 上，[内存屏障生成器](https://stackoverflow.com/questions/6581848/memory-barrier-generators)在其列表中包含*所有`Interlocked`类方法。*这两者可能只是对当前的实际行为进行编目，而不是语言规范所要求的。

我假设现在有很多代码依赖于它，如果 Interlocked 方法从像 C++`std::memory_order_seq_cst`变为`relaxed`像文档所暗示的那样，对内存排序只字不提，就会中断。到周围的代码。（除非文档中的其他地方对此进行了介绍。）

我自己不使用 C#，所以我不能轻易地在 SharpLab 上用 JITted asm 编写一个示例来检查，但是[MSVC 编译](https://godbolt.org/z/c95shc9Yc)它的`_InterlockedIncrement`内在函数以包含`dmb ish`AArch64。（[评论线程](https://stackoverflow.com/questions/1581718/does-interlocked-compareexchange-use-a-memory-barrier#comment110417484_1716587)。）因此，如果 MS 编译器对 C# 代码做同样的事情，似乎 MS 编译器甚至超出了 ECMA 语言规范所保证的获取/发布，并添加了一个完整的障碍。

顺便说一句，有些人根本只使用术语“原子”来描述 RMW 操作，而不是原子加载或原子存储。MS 的文档说`Interlocked`该类“为多个线程共享的变量提供原子操作”。但是该类不提供纯存储或纯加载，这很奇怪。

（除了`Read([U]Int64)`，大概是打算用 desired=expected 公开 32 位 x86 `lock cmpxchg8b`，因此您要么用自己替换一个值，要么加载旧值。无论哪种方式，它都会弄脏缓存行（因此与其他线程的读取竞争，就像任何其他 Interlocked RMW 操作）并且是一个完整的障碍，因此您通常不会在 32 位 asm 中以这种方式读取 64 位整数。现代 32 位代码只能使用 SSE2 `movq xmm0, [mem]`/ movd eax, xmm0 `/`pextrd edx, xmm0, 1 `or similar, [like G++ and MSVC do][11] for`std ::atomic<uint64_t>`；这要好得多，并且可以扩展到多个线程并行读取相同的值而不会相互竞争。）

（ISO C++ 做到了这一点，其中`std::atomic<T>`有 load 和 store 方法，以及 exchange、fetch_add 等。但是 ISO C++ 从字面上没有定义普通非原子对象的非同步读+写或写+写会发生什么。A像 C# 这样的内存安全语言必须定义更多。）

* * *

### 线程间延迟

> Volatile.Write 是否有可能存在一些隐藏的缺点，例如更新内存“不那么即时”（如果这有意义的话）而不是 Interlocked.Exchange？

我不希望有任何区别。 **额外的内存排序只会使当前线程中的后续内容等到存储提交到 L1d 缓存之后。** 它不会让这种情况更快发生，因为 CPU 已经尽可能快地做到了。（在存储缓冲区中为以后的存储腾出空间。）请参阅[硬件内存屏障除了提供必要的保证之外，还能更快地看到原子操作吗？](https://stackoverflow.com/q/61591287)更多。

当然不是在 x86 上；IDK 如果在弱排序 ISA 上情况可能有所不同，其中放松的原子 RMW 可以加载+存储而无需等待存储缓冲区耗尽，并且可能“跳队列”。但是 Interlocked.Exchange 并没有做一个轻松的 RMW，它更像是 C++ `memory_order_seq_cst`。

* * *

#### 问题中的示例：

在第一个示例中，使用`.Set()`和`.WaitOne()`在单独的变量上，它已经提供了足够的同步，从而保证对 a 的普通非原子分配`double`对该读者完全可见。 `Volatile.Write`并且`Interlocked.Exchange`两者都完全没有意义。

对于释放锁，是的，您只需要一个纯存储，尤其是在 x86 上，它不需要任何屏障指令。如果要检测双重解锁（解锁已经解锁的锁），请先加载 spinlock 变量，然后再存储。（与原子交换不同，这可能会错过双重解锁，但应该足以找到错误的用法，除非它们*总是*仅在两个解锁器之间的时间紧迫时才会发生。）

# facebook - 如何使用 FB.ui 提要定位多人？

> ID：12425744
> 
> 赞同：0
> 
> 时间：2012-09-14T13:37:54.027
> 
> 标签：facebook, facebook-javascript-sdk

`FB.ui`如何使用（[http://developers.facebook.com/docs/reference/javascript/FB.ui/](http://developers.facebook.com/docs/reference/javascript/FB.ui/) ）定位多人？我尝试添加一个数组作为`to`参数，但这会产生以下错误。

![在此处输入图像描述](../Images/e0d77bbf6fc10baf99bd5fe857a77981.png)

# c# - 如何使用 c# 在屏幕上查找文本并获取其坐标？

> ID：12425745
> 
> 赞同：0
> 
> 时间：2012-09-14T13:38:00.603
> 
> 标签：c#, visual-studio-2010, automation, ui-automation, autoit-c#-wrapper

我想自动化安装在我机器上的软件。我正在使用 AutoIt，但在一个屏幕上我无法获取控件 ID 或标题，因此我可以访问该控件，然后在其中查找文本。我想点击那个文本，所以我需要那个文本的坐标。我如何使用 c# 代码或任何其他第三方工具来协调该文本？我在谷歌上查过，但我找不到任何有趣或有用的东西。任何与此问题相关的事情将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-29T14:53:54.237

正如其他人所说，你问的问题有点模糊。您希望自动化哪种软件？你想更精确地自动化什么？（鼠标动作？点击？软件上有什么特别的东西？..）

例如，关于鼠标点击，有 2 种主要方法可以自动执行流程：基于屏幕坐标的点击或基于窗口坐标的点击。下面，您可以找到一个示例，以从**“Web 平台安装程序 5.0”**（您可以从 Microsoft 网站 @https [://azure.microsoft.com/en-us/tools/](https://azure.microsoft.com/en-us/tools/)下载）自动安装特定应用程序—— >视觉工作室 2015)

```
;Gives Admin rights to autoIT
#RequireAdmin
;launches the program in the same directory as the installer
Run(@ScriptDir & '\azure.exe')
;Sets the coordinates as window coordinates with "0" (VS screen coordinates) 
AutoItSetOption('MouseCoordMode',0)
;Waits for the program to open and to display a text like "Microsoft Web Platform Installer"
WinWait("Web Platform Installer 5.0","Microsoft Web Platform Installer")

;wait 1.5 seconds
sleep(1500)
;When the window is visible, le cursor is set as active ont that window (IMPORTANT)

WinActivate("Web Platform Installer 5.0")
;the following commands are mouseclicks on specific boxes of the program to automate specific installs on the installer
;MouseClick('primary', x, y, 1, speed (1 to 10))
; You will find those coordinates in the "AU3info.exe file" after you've installed autoIT ( Au3info allows to find coordinates
; by targeting specific places on a window)
MouseClick('primary', 155, 60, 1, 10)
sleep(1500)
;selects 4 apps to be installed (4 installs), clics INSTALL and waits 1.5 sec
MouseClick('primary', 817, 122, 1, 10)
MouseClick('primary', 821, 163, 1, 10)
MouseClick('primary', 815, 401, 1, 10)
MouseClick('primary', 828, 519, 1, 10)
MouseClick('primary', 692, 587, 1, 10)
sleep(1500)
;Prepaing the install and waiting till a text like "Review the following list" apprears
WinWait("Web Platform Installer 5.0","Review the following list")
WinActivate("Web Platform Installer 5.0")
sleep(1500)
MouseClick('primary', 43, 350, 1, 10)
MouseClick('primary', 603, 433, 1, 10)
;starts the installation and waits till the installation is finished (when "The following"..programm has installed ..blabla
WinWait("Web Platform Installer 5.0","The following")
MouseClick('primary', 612, 434, 1, 2)
;gets rid of some issues stemming from microsoft edge (the send functions allows to send keyboard keys (like ESC, SPACE, ALT, etc..))
sleep(1000)
Send("{ENTER}")
MouseClick('primary', 612, 434, 1, 2)
sleep(1000)
Send("{ENTER}")
;quits all the windows with ALT + F4
WinWait("Web Platform Installer 5.0")
WinActivate("Web Platform Installer 5.0")
Sleep(1000)
Send("{ALT down}{F4 down}{F4 up}{ALT up}")
Sleep(1000)
Send("{ALT down}{F4 down}{F4 up}{ALT up}") 
```

# c# - 试图将多张工作表添加到excel

> ID：12425746
> 
> 赞同：4
> 
> 时间：2012-09-14T13:38:01.480
> 
> 标签：c#, excel, worksheet

我正在尝试以编程方式将工作表添加到新的 Excel 文档中。

我的预期输出是名为“test1-20”的工作表，但我得到的是“Sheet1-19，test20”。

为什么这不起作用？

```
Workbook workbook;
Application objExcel;

objExcel = new Application();
objExcel.Visible = false;
objExcel.DisplayAlerts = false;

for (var i = 0; i < worksheets.Count; i++)
{
    workbook= objExcel.Workbooks.Add(Missing.Value);
    var worksheet = (Worksheet)workbook.Worksheets.get_Item(i + 1);
    worksheet.Name = string.Format("test{0}", i + 1);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T14:02:59.233

试试这个：

```
using System;
using System.Runtime.InteropServices;
using Excel = Microsoft.Office.Interop.Excel;

void MyMethod()
{
    try
    {
        var _excel = new Excel();

        var wb = _excel.Workbooks.Add();
        var collection = new Microsoft.Office.Interop.Excel.Worksheet[20];

        for (var i = 19; i >= 0; i--)
        {
            collection[i] = wb.Worksheets.Add();
            collection[i].Name = String.Format("test{0}", i + 1);
        }

        for (var i = 0; i < 3; i++)
        {
            wb.Worksheets[21].Delete();
        }

        //collection is an array of worksheet objects,
        //the worksheet objects in your workbook.
        //You can access each individual worksheet and
        //work with it in the same way you access any object in an array

        var thisWorksheet = collection[9];
        var thisRange = thisWorksheet.Range["A1"];
        thisRange.Value = "Hello World";

        wb.SaveAs(@"c:\test\whatever.xlsx");
        wb.Close();
    }
    finally
    {
        Marshal.ReleaseComObject(_excel);
    }
} 
```

默认情况下，您的 visible 属性设置为 false，因此无需显式执行此操作，上述代码中未显示任何警报，因此也不需要这样做。我已经测试了上面的代码并且可以确认它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:14:56.370

这是我的代码：

```
' first worksheet
If oExcel.Application.Sheets.Count() < 1 Then
    oSheet = CType(oBook.Worksheets.Add(), Excel.Worksheet)
Else
    oSheet = oExcel.Worksheets(1)
End If
oSheet.Name = "one"
oSheet.Range("B1").Value = "First One"

' second
If oExcel.Application.Sheets.Count() < 2 Then
    oSheet = CType(oBook.Worksheets.Add(), Excel.Worksheet)
Else
    oSheet = oExcel.Worksheets(2)
End If
oSheet.Name = "two"
oSheet.Range("B1").Value = "Second one"

' third
If oExcel.Application.Sheets.Count() < 3 Then
    oSheet = CType(oBook.Worksheets.Add(), Excel.Worksheet)
Else
    oSheet = oExcel.Worksheets(3)
End If
oSheet.Name = "three"
oSheet.Range("B1").Value = "Thrid"

' next
If oExcel.Application.Sheets.Count() < 4 Then
    oSheet = CType(oBook.Worksheets.Add(), Excel.Worksheet)
Else
    oSheet = oExcel.Worksheets(4)
End If
oSheet.Name = "four"
oSheet.Range("B1").Value = "Four" 
```

# javascript - Ember.js - 接口状态应该存储在哪里？

> ID：12425753
> 
> 赞同：7
> 
> 时间：2012-09-14T13:38:16.143
> 
> 标签：javascript, ember.js, ember-old-router

是否有关于接口状态（而不是持久模型状态）应该存在于 Ember.js 应用程序中的官方故事？

[在路由器文档](http://docs.emberjs.com/#doc=Ember.Router&src=false)的“响应用户发起的事件”部分中，有一个将点击事件委托给照片的“showPhoto”方法的示例，但是让模型“显示”本身似乎是不合需要的关注点混合。

我知道在许多情况下，状态应该存储在路由器中，以便接口状态在 URL 中表示，并且如果您刷新页面或将 url 发送给某人，则会恢复。但是非分层状态，例如页面上选择的项目列表呢？

理想情况下，该类型的状态将被序列化为查询/哈希参数（例如：[http ://www.hipmunk.com/flights/QSF-to-NYC#!dates=Sep15,Sep16p1;kind=flight&locations=QSF,YYZ&dates=Sep15 ,Sep23~tab=1](http://www.hipmunk.com/flights/QSF-to-NYC#!dates=Sep15,Sep16p1;kind=flight&locations=QSF,YYZ&dates=Sep15,Sep23~tab=1) ) 但据我所知，路由器不提供该功能，是吗？

在 BackboneConf，Jeremy Ashkenas 说，在 Backbone 中做到这一点的正确方法是将状态也存储在模型上（他有一个带有“选定”字段的模型示例）。但我相信 Tom Dale 说他认为这不是一个好主意，而不是在 Ember 中应该如何做。不幸的是，我不记得他提到*应该*怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T16:56:15.190

如果您希望状态是可路由的（即可通过 url 访问），那么它需要可通过 ember 的路由器进行序列化和反序列化。如果状态是瞬态且不可路由的，那么最好将其保存在控制器上。

如果您需要跨多个模型表示复杂的接口状态（例如，用于选择列表中的项目），请考虑维护包装底层数据模型的特定于控制器的对象数组。我认为直接在模型上表示视图状态是不合时宜的，尤其是当这些模型用于多个视图时。

对于您提供的示例，您可能会执行以下操作来连接复杂的路由：

```
Ember.Route.extend({
  route: "flights/:cities/dates/:dates",

  serialize: function(router, context){
    return {cities: context.get('cities'),
            dates:  context.get('dates')};
  },

  deserialize: function(router, params){
    // return a context object that will be passed into connectOutlets()
    return {cities: params.cities,
            dates:  params.dates};
  },

  connectOutlets: function(router, context) {
    // pass the context from deserialize() in as the content of a FlightController
    router.get('applicationController').connectOutlet('flight', context);
  }
}) 
```

请注意，您也可以使用诸如“flights?cities=:cities&dates=:dates”之类的路线，但上面的路线可能更干净，对 SEO 更友好。

* * *

*在 Gabriel 的评论之后进行了扩展：*如果您想维护一个搜索数组，每个搜索都驻留在自己的选项卡中，我建议将这些搜索的数据保存在应用程序级数组中（例如 App.currentUser.activeSearches）。我的理由是，您不希望每次用户切换选项卡时都必须重新创建这些数据。相反，路由器将检索此数据，`deserialize()`然后将其作为上下文传递给`connectOutlets()`. 在切换选项卡时，应基于此对象快速重新构建表示此数据的视图和控制器。让我从上面扩展我的例子：

```
Ember.Route.extend({
  route: "flights/:cities/dates/:dates",

  serialize: function(router, context){
    return {cities: context.get('cities'),
            dates:  context.get('dates')};
  },

  deserialize: function(router, params){
    // find or create a "Search" object that contains the filters and results,
    // which will be passed into connectOutlets()
    return App.currentUser.findOrCreateSearch({cities: params.cities,
                                               dates:  params.dates});
  },

  connectOutlets: function(router, context) {
    // pass the context (a search object) from deserialize() in as the content of a FlightController
    router.get('applicationController').connectOutlet('flight', context);
  }
}) 
```

# wordpress - wordpress 子菜单的不同类别

> ID：12425755
> 
> 赞同：1
> 
> 时间：2012-09-14T13:38:18.623
> 
> 标签：wordpress, submenu, depth

我正在使用 Wordpress[`wp_nav_menu`](http://codex.wordpress.org/Function_Reference/wp_nav_menu)来显示我的主导航。然而，尝试在 wordpress 中重新创建以下 HTML 似乎相当复杂。

![前端菜单](../Images/22818bb11b548013f055cd0508b5cefb.png)

这是 HTML 版本（wordpress 样式表中的类已调整为针对 wordpress 使用的类）：

```
<ul class="nav">
<li class="home"><a href="#">Home</a></li>
<li><a href="#">Store</a>
    <div class="subnav">
        <div class="holder">
            <ul class="child">
                <li><a href="#">Category 1</a>
                    <ul class="grandchild">
                        <li><a href="#">Sub-category 1</a></li>
                    </ul>
                </li>
                <li><a href="#">Category 2</a>
                    <ul class="grandchild">
                        <li><a href="#">Sub-category 1</a></li>
                        <li><a href="#">Sub-category 2</a></li>
                    </ul> <!-- Grandchild -->
                </li>
            </ul> <!-- Child nav -->
        </div> <!-- Holder -->
    </div> <!-- Subnav -->
</li></ul><!-- nav --> 
```

wordpress 中的问题是我使用步行器在我的第一个子菜单周围添加了 div，以保持所有内容。但是，这种方式会将 2 个 div（subnav 和 holder）添加到后面的每个子菜单中。

如何编辑下一个深度级别 - 不添加 2 个 div - 编辑子菜单的类名

```
function start_lvl( &$output, $depth = 0, $args = array() ) {
$indent = str_repeat("\t", $depth);
$output .= "\n$indent<div class=\"subnav\" ><div class=\"holder\"><ul class=\"sub-menu\">\n";

function end_lvl( &$output, $depth = 0, $args = array() ) {
$indent = str_repeat("\t", $depth);
$output .= "$indent</ul></div></div>\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:20:17.800

为什么需要向子菜单添加类以使用 CSS 定位它们？你不能做这样的事情：

```
#nav > li a {
    /* Target first level */
}

#nav > li > ul > li a {
    /* Target second level */
}

#nav > li > ul > li > ul > li a {
    /* Target third level */
}​ 
```

这是一个说明这个概念的 jsfiddle：http: [//jsfiddle.net/3XtkE/](http://jsfiddle.net/3XtkE/)

# android - 如何在 BroadcastReceiver 中获取传入的蓝牙文件或其路径

> ID：12425756
> 
> 赞同：3
> 
> 时间：2012-09-14T13:38:25.160
> 
> 标签：android, bluetooth, broadcastreceiver

BroadcastReceiver 获取蓝牙传入文件的意图过滤器是什么？

实际上我想检查收到的 XML 文件，然后想用它们将一些数据导入我的应用程序。

# c# - 如何对齐 html 表单上的单选按钮？

> ID：12425758
> 
> 赞同：0
> 
> 时间：2012-09-14T13:38:34.850
> 
> 标签：c#, html, css

我试图让这些单选按钮对齐，以便它们在包含的 div 中并排。我怎样才能做到这一点。

```
 <div class="form-field">
      @Html.Label("Gender")
      <span>Male @Html.RadioButton("gender", "Male")</span>
      <span>Female @Html.RadioButton("gender", "Female")</span>
      <span>Unkown @Html.RadioButton("gender", "Unknown")</span>
 </div> 
```

输出应该是内联的，而不是相互堆叠。即8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:53:23.587

我在其中创建了一个 div 和一个表，这使我可以将单选按钮指示为表数据之一。以下是其示例代码，您可以尝试：

```
 <div>
    <table class="textfont" style="width:100%">
    <tr>
    <td>&nbsp;</td>
    <td><asp:RadioButton ID="" runat="server" Text="" AutoPostBack="True" /></td>
    <td><asp:RadioButton ID="" runat="server" Text="" AutoPostBack="True" /></td>
    </tr> 
    </table>
    </div> 
```

告诉我是否有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:43:34.960

您需要将项目组合在并排的 div 中，或者添加额外的间距以对齐第二个项目。

以下链接将对您有用

[在另一个下方对齐单选按钮](https://stackoverflow.com/questions/11315570/align-radio-button-one-below-the-other)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T14:01:39.887

我对 C# 不太熟悉，但使用 CSS 很简单：

`.form-field span { display:inline-block; margin-right:10px; }`

这是我的[**JSFiddle 示例**](http://jsfiddle.net/josh_max/ZpPTP/)。

**//编辑**

由于我不熟悉 C#，因此我不确定您的代码最终是否会这样，但最好将单选按钮放在标签*之前。*在这种情况下，

     **Ο**男     **Ο**女     **Ο**未知

不过，正如我所说，我对 C# 还不够熟悉，但我认为我至少会为 UI 提供建议:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T15:32:38.800

我认为人们在这里过度复杂化了答案。如果您想要排列一系列单选按钮，只需将您的输入包装在标签元素中：

```
<div class="form-field">
<label><input type="radio" name="lump">Lump</label>
<label><input type="radio" name="stump">Stump</label>
<label><input type="radio" name="bump">Bump</label>
</div> 
```

这将使单选按钮并排排列。如果您希望它们在您的 CSS 中直接上下运行，请将 display:block 添加到您的标签元素中。这适用于 IE7。这是 HTML 规范的相关部分：http: [//dev.w3.org/html5/spec/single-page.html#the-label-element](http://dev.w3.org/html5/spec/single-page.html#the-label-element)。

因此，对于您的代码，这应该有效：

```
<div class="form-field">
      @Html.Label("Gender")
      <label>Male @Html.RadioButton("gender", "Male")</label>
      <label>Female @Html.RadioButton("gender", "Female")</label>
      <label>Unkown @Html.RadioButton("gender", "Unknown")</label>
 </div> 
```

还有小提琴：http: [//jsfiddle.net/kdUAS/](http://jsfiddle.net/kdUAS/)

# jquery - 2组下一个/上一个按钮jquery循环

> ID：12425762
> 
> 赞同：0
> 
> 时间：2012-09-14T13:38:55.297
> 
> 标签：jquery, jquery-plugins, jquery-cycle

如何在 jquery 周期中有两组下一个/上一个我目前在这里有一组

```
$('#s10').cycle({
    fx:    'fade',
    delay: -1000,
    next:   '#nexttop', 
    prev:   '#prevtop'
}); 
```

但似乎无法弄清楚如何将第二组添加到下一个：和上一个：行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:40:48.637

`#nexttop`不要使用像and之类的 ID `#prevtop`，而是使用由两个不同元素共享的类：

```
$('#s10').cycle({
    fx:    'fade',
    delay: -1000,
    next:   '.next', 
    prev:   '.prev'
});​ 
```

[http://jsfiddle.net/mblase75/yThgx/](http://jsfiddle.net/mblase75/yThgx/)

# c# - FTP 下载，可以看到文件但不能下载，可能是 uri 映射问题

> ID：12425767
> 
> 赞同：0
> 
> 时间：2012-09-14T13:39:29.983
> 
> 标签：c#, .net, ftp

我刚刚将应用程序从 net 3.5 升级到 4.0

我使用 ftp 读取和传输文件。一切都很好，除了我连接的一台服务器。该服务器一开始很奇怪，因为我必须返回一个目录并进入另一个目录：

“ftp.server.com”实际上让我进入 ftp.server.com/up，我需要从 ftp.server.com/out 读取

我使用这个 url 得到一个文件列表：

```
ftp://ftp.server.com/%2fout 
```

Web 请求是这样创建的：

```
var request = (FtpWebRequest) WebRequest.Create("ftp://ftp.server.com/%2fout"); 
```

我得到了文件列表 - 没问题，所以该方法适用于连接到目录，但是当我尝试读取其中一个文件时，我现在得到一个错误。

我以这种方式创建该请求：

```
 var request = (FtpWebRequest)WebRequest.Create("ftp://ftp.server.com/%2fout/" + filename); 
```

我已将请求的 URI 记录为：

```
ftp://ftp.server.com//out/ORDER25260.xml_XL1014254ORDER25260_response.xml 
```

我得到这个堆栈跟踪：

```
The remote server returned an error: (550) File unavailable (e.g., file not found, no access).   at System.Net.FtpWebRequest.CheckError()
   at System.Net.FtpWebRequest.SyncRequestCallback(Object obj)
   at System.IO.Stream.Close()
   at System.Net.ConnectionPool.Destroy(PooledStream pooledStream)
   at System.Net.ConnectionPool.PutConnection(PooledStream pooledStream, Object owningObject, Int32 creationTimeout, Boolean canReuse)
   at System.Net.FtpWebRequest.FinishRequestStage(RequestStage stage)
   at System.Net.FtpWebRequest.SyncRequestCallback(Object obj)
   at System.Net.CommandStream.Abort(Exception e)
   at System.Net.CommandStream.CheckContinuePipeline()
   at System.Net.FtpDataStream.System.Net.ICloseEx.CloseEx(CloseExState closeState)
   at System.Net.FtpDataStream.Dispose(Boolean disposing)
   at System.IO.Stream.Close()
   at CustomModules.CustomModules.SupplierFunctions.FtpMethods.GetFile(SynsamSupplierSetting setting, String filename, Boolean deleteAfterLoad) in D:\WORK\dynamicweb\Source\CustomModules\SupplierFunctions\FtpMethods.cs:line 295 
```

我使用相同的凭据通过 FileZilla 下载没有问题

任何的想法？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:41:44.470

使用此线程上的信息解决了这个问题：

[550 文件不可用错误与 FtpWebRequest 类文件上传。在 FileZilla 中运行良好](https://stackoverflow.com/questions/9621755/550-file-unavailable-error-with-ftpwebrequest-class-file-upload-works-fine-in-f)

用户 SteveCalPoly 写道：

> 显然 CWD 命令行为在从 .NET 3.5 到 4.0 的移动中发生了变化。
> 
> 您必须首先调用此链接中的方法。
> 
> [http://support.microsoft.com/kb/2134299](http://support.microsoft.com/kb/2134299)

这个问题与上传有关，所以我在我的第一个谷歌中错过了它的答案

# git - 无法从用户存储库推送到位于 NAS 上的主存储库

> ID：12425774
> 
> 赞同：4
> 
> 时间：2012-09-14T13:39:55.563
> 
> 标签：git, git-push, nas

我在使用 git 时遇到了一些问题。希望有人有一些建议。
我有一个位于 NAS 驱动器上的主存储库。然后我在 linux（ubuntu 12.04 服务器）上有用户存储库。NAS 驱动器使用 CIFS 安装在 linux 服务器上，因此在从/向远程存储库传输文件时不需要 HTTP 或 SSH。

当我尝试从用户存储库推送到 NAS 上的主存储库时，我总是收到与无法在 NAS 上设置权限位相关的错误。在过去的几天里，我对此进行了很多研究，尽管所有用户都对 NAS 具有读/写文件权限，但由于 NAS 的工作方式，您无法通过 chmod 更改权限位。在 NAS 上创建的文件的权限位由挂载命令参数（file_mode、dir_mode 等）设置。

这是我尝试从用户存储库推送到 NAS 上的主存储库时遇到的错误：

```
dba@clp01:~/slave_repository.git$ git push master_git
Counting objects: 6, done.
Delta compression using up to 12 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (5/5), 2.52 KiB, done.
Total 5 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (5/5), done.
error: cannot fix permission bits on refs/heads/master.lock
fatal: Unable to create
'/mnt/nassource/master_repository.git/.git/refs/heads/master.lock': 
Operation not permitted
fatal: The remote end hung up unexpectedly
fatal: The remote end hung up unexpectedly
dba@clp01:~/slave_repository.git$ git config --global --list
user.name=DBA
user.email=dba@cont.com
core.editor=emacs
core.filemode=false
merge.tool=diff 
```

任何建议将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T23:06:23.953

几分钟前我遇到了这个问题。我尝试`touch`在远程服务器上创建一个新文件，但失败了。所以我用`sudo git push theRemote`了它，它奏效了。可能不是最聪明的事情，但在我的情况下，它被挂在一个 .lock 文件上，没有其他人推送到这个 repo，所以很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T17:05:53.740

你的 NAS 支持 NFS 吗？对你来说可能是一个更好的选择。

# magento - Magento 中付款方式的名称

> ID：12425776
> 
> 赞同：3
> 
> 时间：2012-09-14T13:40:03.597
> 
> 标签：magento

如何在 magento 中获取付款方式的标题？我也有一些相关的问题：

*   如何添加在评论订单页面上选择的付款方式（我覆盖了页面，但我不知道如何调用当前 qoute 的付款方式。我使用过

    Mage::getSingleton('checkout/session')->getQuote()->getPayment()->getData()

    但它只是为我提供付款方式代码而不是标题

*   如何通过代码获取付款方式名称？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-03T10:00:20.680

你可以这样做：

```
$mcode = Mage::getSingleton('checkout/session')
    ->getQuote()
    ->getPayment()
    ->getMethodInstance()
    ->getTitle();

echo Mage::getStoreConfig('payment/' . $mcode . '/title'); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-15T14:21:03.817

`Mage::getSingleton('checkout/session')->getQuote()->getPayment()->getMethodInstance()->getTitle();`

通过代码获取付款方式：

`Mage::helper('payment')->getMethodInstance($payment_code);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-14T05:47:11.560

你可以这样做

```
$payments = Mage::getSingleton('payment/config')->getActiveMethods();
$methods = array(array(
    'value'=>'',
    'label'=>Mage::helper('adminhtml')->__('--Please Select--')
));

foreach ($payments as $paymentCode=>$paymentModel) {
    $paymentTitle = Mage::getStoreConfig('payment/'.$paymentCode.'/title');
    $methods[$paymentCode] = array(
        'label'   => $paymentTitle,
        'value' => $paymentCode,
    );
}

echo "<xmp>";
print_r($methods);
echo "</xmp>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-23T17:13:58.557

这对我来说是使用付款代码获取实际付款方式标题的诀窍：

`Mage::helper('payment')->getMethodInstance([payment_code])->getTitle();`

参考：建立在@Lucas Moeskops 的回答（+1'ed you）

# asp.net - RadGrid 页脚模板添加记录

> ID：12425778
> 
> 赞同：0
> 
> 时间：2012-09-14T13:40:11.193
> 
> 标签：asp.net, ajax, telerik, telerik-grid

我正在使用 RadGrid 向特定推销员显示分配的客户名称。在项目模板中，我将客户名称与删除按钮绑定，以从该推销员的列表中删除该客户名称。我在 Grid 的页脚模板中有一个 RadComboBox。我想要做的是，在需要数据源中，我能够将 RadGrid 与分配的客户记录绑定到该推销员，但我也想在带有分配按钮的页脚模板的组合框中显示未分配的客户，当我按下分配按钮时，选定的客户将是分配给该销售人员，并将显示在网格和组合框中，该客户将被删除。单击指定客户名称旁边的删除按钮，将从网格中删除客户记录并添加到组合框中。我不 不知道要使用哪些事件，因为我无法在 NeedDataSource 事件中找到页脚模板的 RadComboBox。有人可以帮忙吗？

谢谢你，开发

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:11:51.153

要检索您的`RadComboBox`，请查看`GridFooterItem`. 为此，请使用`ItemDataBound`事件：

```
protected void RadGrid1_ItemDataBound(object sender, GridItemEventArgs e)
{
    if (e.Item is GridFooterItem)
    {
        GridFooterItem item = (GridFooterItem)e.Item;
        RadComboBox yourComboBox = (item.FindControl("yourRadComboBoxID") as RadComboBox);
    }
} 
```

不要忘记将属性添加到您的 aspx 文件中：

```
OnItemDataBound="RadGrid1_ItemDataBound" 
```

# html - Facebook Like Button 弹出对话框在点击后立即关闭

> ID：12425782
> 
> 赞同：2
> 
> 时间：2012-09-14T13:40:34.553
> 
> 标签：html, facebook, facebook-javascript-sdk, fbml

我只是想在测试页面上测试一些类似的功能并且得到意外的行为。当我单击“赞”按钮时，对话框（您可以在其中添加文本并张贴到墙上的对话框）会弹出大约半秒钟，然后自行关闭。点赞按钮本身会变成一个链接，上面写着“确认”。我真的在这里有骨气，不知道可能出了什么问题。我正在使用 FBML。这是我的测试页面的完整代码：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Facebook Like Test</title>
  </head>

  <body>
    <div id="fb-root"></div>

    <script>
         window.fbAsyncInit = function () {
            FB.init({
                appId: 'myid',
                status: true, // check login status
                cookie: true, // enable cookies to allow the server to access the session
                xfbml: true  // parse XFBML
            });
        };

        // Load the SDK Asynchronously
        (function (d) {
            var js, id = 'facebook-jssdk'; if (d.getElementById(id)) { return; }
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/en_US/all.js";
            d.getElementsByTagName('head')[0].appendChild(js);
        } (document));

    </script>

    <h1>Facebook Like Testing</h1>
    <div>
        <fb:like href = "http://www.example.com?id=1"></fb:like>
    </div>
    <div>
        <fb:like href = "http://www.example.com?id=2"></fb:like>
    </div>
    <div>
        <fb:like href = "http://www.example.com?id=3"></fb:like>
    </div>
    <div>
        <fb:like href = "http://www.example.com?id=4"></fb:like>
    </div>  
  </body>
</html> 
```

我只是附加了一个任意的查询字符串以使 href 唯一。这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:46:30.970

控制台输出怎么样？有什么错误什么的吗？

我想，您应该检查您的应用程序和本地环境的域设置。你的例子非常适合我。

我想到的最后一件事是，如果您使用的是 Chrome，它有时会阻止跨域 js 请求，所以我也会寻找它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T16:03:45.507

好吧，我将回答我自己的问题，因为我发现了问题，并希望其他任何遇到此错误的人都能得到答案。

事实证明，问题不在于我的代码，而在于我指定的 href。[我在这里](https://stackoverflow.com/questions/7405485/facebook-like-without-confirm)找到了答案 。这与我正在实施此操作的网站有关，因为它不够知名或被标记为“可疑”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T18:20:49.003

我遇到了同样的问题，事实证明，问题是我在 chrome 上禁用了 cookie。一旦我启用它们，它就会再次开始工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-25T16:10:20.340

如果您提到的测试页面位于临时服务器上或使用的 URL 不是点赞实际用于的站点，则由于用户尝试点赞时执行的域匹配检查，它将导致点赞对话框关闭这页纸。

我过去发现，在实时服务器上的隐藏页面上执行测试会给你想要的结果。

如果您在第一次测试 Like 按钮后对页面进行了更改，请务必使用页面上的 Facebook 开发人员调试工具重新构建 Facebook 存储的缓存页面。 [https://developers.facebook.com/tools/debug/](https://developers.facebook.com/tools/debug/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-17T10:48:44.883

仔细检查您共享的 URL 的开放图声明：在 og:image 声明中缺少域名的一个简单错误将导致共享对话框弹出窗口关闭，而没有任何控制台或错误消息。（只需执行 control-u 即可查看 HTML 页面的源代码，查看 og:image、og:url 等的标题区域。）

# android - 不在textview中设置文本粗体

> ID：12425785
> 
> 赞同：1
> 
> 时间：2012-09-14T13:40:43.737
> 
> 标签：android, textview, bold

我通过以下方式在 xml 中设置了一些 TextViews 文本粗体： android:textStyle="bold" 未在 xml 中设置文本并且来自代码的绑定的 textviews 显示为正确的粗体，但由 xml 设置的文本的 textviews 不显示粗体。请帮我修复这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-06T09:51:16.507

您不能同时从 XML 和以编程方式设置文本。如果您在 textview 中设置 XML 中的文本，那么它将被设置为以编程方式设置的文本覆盖。因此，如果您想在 textview 中设置文本，您应该以编程方式设置它。

# jquery - 单击图标上的可扩展帮助文本容器

> ID：12425787
> 
> 赞同：0
> 
> 时间：2012-09-14T13:40:47.347
> 
> 标签：jquery, containers

我想知道是否有人可以帮助我。

首先，我很抱歉，因为这个问题与我遇到的具体问题无关，而是希望得到一些指导。

我正在尝试创建“帮助文本”内容，这些内容将出现在我目前正在从事的项目的某些页面上。我希望帮助文本出现在点击合适的“帮助”图标时。

我一直在尝试完成[本](http://pupunzi.open-lab.com/mb-jquery-components/mb-containerplus/)教程，但发现它有些麻烦，所以我试图搜索类似的工具，遗憾的是，没有任何运气。

我只是想知道是否有人可以请我指出我可以使用的工具的方向，或者告诉我这是否是我想要实现的技术术语，以便我可以改进我的“谷歌” ' 搜索条件。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:51:39.747

技术术语可能是 - “工具提示”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:57:16.550

我不确定您是要弹出一个新区域还是只是扩展当前区域，但如果我理解正确，这可能会有所帮助..?? [http://jqueryui.com/demos/dialog/#animated](http://jqueryui.com/demos/dialog/#animated)

还有一个用于更少或更多切换效果的..我现在找不到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:52:24.727

我将 colorbox 用于这样的东西（不确定您是否有设计想法，但 colorbox 是一个通用的模态叠加插件）。 [http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

如果你查看它的演示页面，你可以查看“inline HTML”链接、“ouside HTML (Ajax)”链接或“Outside Webpage (iframe)”链接，我敢打赌其中一个会遇到您对帮助框的需求。

# asp.net-mvc - 实体框架 - 绑定一个 -> 多关系的最佳方式

> ID：12425789
> 
> 赞同：0
> 
> 时间：2012-09-14T13:40:55.223
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first, asp.net-mvc-4, poco

我想使用 POCO 方法将图像添加到我的项目中。为了让一切正常工作，我需要修改我的视图/控制器。

## 物品

```
namespace POCOExample.Models
{
    public class Item
    {
        public int ID { get; set; }
        public string Name { get; set; }
        public string Info { get; set; }
        public List<Image> Images { get; set; }
    }
} 
```

图片

```
namespace POCOExample.Models
{
    public class Image
    {
        public int ID { get; set; }
        public int ItemID { get; set; }
        public Item Item { get; set; }
        public string FileName { get; set; }
    }
} 
```

## 控制器创建（POST）操作

```
[HttpPost]
public ActionResult Create(Item item, List<HttpPostedFileBase> iamges)
{
    if (ModelState.IsValid)
    {
        // Added code START
        foreach (var image in images)
        {
            item.Images.Add(new Image {
                FileName = Infrastructure.Image.Upload(image) // Returns file name, just what I need
            });
        }
        // Added code END

        db.Items.Add(item);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    return View(item);
} 
```

## 问题

此代码有效，但是我想知道我这样做是否是最佳/正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:00:38.610

是的，你的做法是正确的。

既然没有更正的地方，我想给你一个哲学建议：甚至不要问自己它是否是最优的。对这个问题的回答是 99% 否，但甚至不要想对此大惊小怪，把你简单、正确和可维护的代码变成一些“最佳”的混乱，没有数字，证明这个特定的部分的代码导致现实世界的性能问题:)

# coldfusion - 调用名称中带有变量的变量-coldfusion？

> ID：12425794
> 
> 赞同：2
> 
> 时间：2012-09-14T13:41:06.660
> 
> 标签：coldfusion, bluedragon

尝试使用方括号表示法来引用动态变量。（如果您对应用程序有疑问，我正在遍历由查询创建的一组产品，为每个与其唯一 SKU 相关联的字段创建字段）

我已将其缩小到这段代码，当我尝试运行它时会引发“无效表达式”错误。

```
<cfif FORM["QTY_" & SKU] NEQ ''>
    <div class="sopQty"><input type="number" min="0" name="QTY_#SKU#" value = "#FORM['QTY_' & SKU]#" /></div>
<cfelse>
    <div class="sopQty"><input type="number" name="QTY_#SKU#" /></div>
</cfif> 
```

目标是传递上一页中的值（如果有），否则将该字段留空。我认为在这种情况下，我无法弄清楚语法的一些怪癖。以下块中的错误：

> 类型：模板
> 
> 消息：无效的表达式
> 
> 标签： CFIF
> 
> 位置线=62；列=17
> 
> 详细错误表达 [#FORM['QTY_' & SKU])#]
> 
> 资源
> 
> ```
> 60:                 <div class="sopSearch"><p>#SearchAlias#</p></div> 
> 61:                 <div class="sopPrice"><p>#ISBNupc#</p></div>
> 62:                  <cfif FORM["QTY_" & SKU] NEQ ''>
> 63:                     <div class="sopQty"><input type="number" min="0" name="QTY_#SKU#" value = "#FORM['QTY_' & SKU])#" /></div>
> 64:         <cfelse> 
> ```
> 
> ^ 来自底层 CFML 源代码的片段

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T14:17:02.033

这只是一个示例，因为我不知道您在哪里设置变量，但请在您的操作页面上尝试以下操作：

```
<cfset SKU = "123">
<cfset dynamic_Var = "QTY_" & variables.SKU>
<cfif IsDefined("form[dynamic_Var]")>
  <cfoutput>#form[dynamic_Var]#</cfoutput>
<cfelse>
  fail
</cfif> 
```

这是提交表格：

```
<form name="test" action="test.cfm">
    <input type="text" name="QTY_123" value="test">
    <input type="submit" name="submit" value="submit">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:51:36.163

以下也是可能的（如果未定义密钥，则不会导致错误）。

```
<cfset key = "QTY_" & sku/>
<cfif structKeyExists(form, key) && len(form[key])>
  <!--- do something --->
</cfif> 
```

# ios - 是否可以使用仪器在自动化测试中检索图像名称？

> ID：12425795
> 
> 赞同：0
> 
> 时间：2012-09-14T13:41:07.470
> 
> 标签：ios, automated-tests, instruments

我正在使用仪器运行许多自动化测试，并针对许多文本字段进行断言，但是我希望能够检索图像（文件）名称以断言已根据页面上的信息填充了正确的图像， 这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:18:09.507

经过这个周末的反复试验，我设法找到了答案`window.mainWindow().images()[0].name()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T04:01:42.090

您是否尝试过 iOS 测试工作室（http://www.telerik.com/automated-testing-tools/ios-testing/ios-application-testing.aspx）？我认为它可以帮助您解决 iOS 中各种与自动化相关的问题。

# javascript - 从 javascript 调用 asp.net 代码隐藏函数

> ID：12425797
> 
> 赞同：0
> 
> 时间：2012-09-14T13:41:10.683
> 
> 标签：javascript, webforms, code-behind

我有一个名为 LinkControl 的自定义控件：

```
<asp:Panel runat="server">
<script language="javascript" type="text/javascript">
    function CheckImage() {
        var str = document.getElementById('<%=lblBookmarkId.ClientID%>').firstChild.nodeValue;
        PageMethods.CodebehindCheckImage(str);
        return false;
    }
</script>
<asp:Label runat="server" ID="lblBookmarkId" Style="visibility: hidden;" />
<asp:Button runat="server" ID="btnCheck" Text="Check" OnClientClick="return CheckImage();"                                        CausesValidation="false""/>
</asp:Panel> 
```

该控件用于转发器内的页面书签，放置在转发器内的每个控件具有不同的 lblBookmarkId.Text 值。

代码隐藏页面书签具有以下功能：

```
[System.Web.Services.WebMethod]
[System.Web.Script.Services.ScriptMethod]
public static bool CodebehindCheckImage(string str)
{
   return true;
} 
```

问题是当我为Repeater中的任何控件按下按钮btnCheck时，当我在函数CodebehindCheckImage中调试时，我总是得到字符串lblBookmarkId.Text包含在Repeater中存在的最后一个控件中。

欢迎大家提出意见。

问候沃伊切赫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:54:33.503

你可以修改你的javascript函数，如下所示；

```
 function CheckImage(str) {
        PageMethods.CodebehindCheckImage(str);
        return false;

    } 
```

& 更改中继器中的代码以附加 onclientClick，如下所示

```
<asp:Button runat="server" ID="btnCheck" Text="Check" 
 OnClientClick='<%# Eval("BookMarkText", "return CheckImage(\"{0}\");") > 
```

其中“BookMarkText”与您与书签标签绑定的内容相同。所以也不需要使用隐藏的书签标签。

# sql - sql where针对两列

> ID：12425803
> 
> 赞同：2
> 
> 时间：2012-09-14T13:41:25.100
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我创建了一个 SP 来为一家公司返回一些客户数据。我将公司 ID 和客户 ID 传递给 SP。我正在查询的表中有两种类型的客户 ID。这两种类型保存在不同的列中。

例如，我的表中有以下列。

ID、评论、CustomerTypeAId、CustomerTypeBId

任一客户 ID 可以在一行中为空。我传递给 SP 的客户 ID 可能是 A 类客户或 B 类客户。因此，在我的 WHERE 子句中，我需要指定 CustomerTypeAId 是否为空，然后查询 CustomerTypeBId。

```
@CusId int=0
SELECT * FROM TEST
WHERE (How to put this part?) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:43:09.477

您可以`OR`在`where`子句中使用，因为它可以是两列中的任何一列。

```
SELECT * 
FROM   TEST
WHERE  CustomerTypeAId = @id OR
       CustomerTypeBId = @id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:44:05.560

我认为以下内容可以满足您的要求：

```
select *
from test
where CustomerTypeAid = @CustId or CustomerTypeBid = @CustId 
```

NULL 通常是布尔语句中的问题；但是，它适用于 OR。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:42:58.953

```
WHERE @CusId IN (CustomerTypeAId, CustomerTypeBId); 
```

但是，为什么要将这些值存储在单独的列中？介绍 Type C 的时候还要加一栏吗？相反，您应该只有一个类型列和一个 CustomerID 列。这样，当您不关心它们是什么类型时，您只需匹配 CustomerID 列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T13:47:32.220

听起来你需要类似的东西：

```
SELECT * 
FROM TEST 
WHERE CustomerTypeAId = @id 
      OR (CustomerTypeAId IS NULL AND CustomerTypeBId = @id) 
```

# javascript - 访问json数组中的对象

> ID：12425804
> 
> 赞同：-3
> 
> 时间：2012-09-14T13:41:33.097
> 
> 标签：javascript, jquery, json

我有个问题。我需要访问 jQuery 数组中的对象。

我的json：

```
{"employ": [
{
    "id": 46846,
    "name": "some name",
    "schedule": "main",
    "hours": {
        "11.09.2012": 5,
        "12.09.2012": 8
    }
}
,
{
    "id": 3543,
    "name": "another name",
    "schedule": "main",
    "hours": {
        "11.09.2012": 9,
        "12.09.2012": 7
    }
}
]} 
```

还有我的jQuery：

```
$(document).ready(function(){
      $("#click").click(function(){
          $.getJSON('employ.json', {}, function(json){
              $("#userid").append(json.employ[0].hours.????);
          });
      })
  }); 
```

我需要什么代码在“？？？”的地方 访问名称为“11.09.2012”的元素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T13:42:52.097

只需使用`["key"]`“索引”它，例如：

```
json.employ[0].hours["11.09.2012"] 
```

JavaScript 对象允许通过两种方式访问​​其项目；使用点表示法 ( `.name`) 或括号表示法 ( `["name"]`)。显然，`["name"]`用于多种场合，例如您的（其中项目包含无效标识符）。无论哪种方式都是允许的，只是取决于偏好和情况。

当不直接使用 JSON 时，JavaScript 对象不需要将每个项目声明为字符串，因此您可以：

```
var json = {asdf: "fdsa", aaa: "fff"}; 
```

这是完全有效的。但是在这种类型的声明中，您只能使用用于命名普通变量的有效字符（作为有效标识符）。因此，对于这种情况，您应该始终能够使用点表示法。

在使用实际 JSON 通信时，所有键（项）都存储为字符串，因此允许使用“无效”字符。但如果密钥包含无效字符，则必须使用括号表示法 ( `[]`)。`[]`是获取和设置项目的最安全方式，尤其是动态的。通过动态，我的意思是做类似的事情：

```
for (var i = 0; i < 10; i++) {
    if (("test"+i) in json && json["test"+i] > 10) {
        // do something
    }
} 
```

在上面，您不能执行以下操作：

```
json.test+i 
```

让它做你想做的事。

# java - 从另一个类访问 Swing 组件

> ID：12425806
> 
> 赞同：2
> 
> 时间：2012-09-14T13:41:34.990
> 
> 标签：java, swing, components

我有一个结构如下的 Java-Swing-GUI：
JFrame
-- JPanel1
-----jButton1
-----jLabel1

我的目标是，当按下 jButton1 时，我想更改 jLabel1 的颜色或在其上设置一些文本，但这应该在外部类中完成（我们称之为 externalClass）。

所以在 GUI 类的构造函数中，我将自己传递给我的外部类：

```
public class GUIclass extends javax.swing.JFrame {  
    private externalClass e;
    public GUIclass() {
        initComponents();
        e = new externalClass(GUIclass.this);
} 
```

在我的外部课程中，我无法访问例如标签：

```
private GUIclass g;
public externalClass(GUIclass g) {
    this.g = g;
    System.out.println(g.getComponentCount());
        // --> only 1, is this the JFrame (?)
    System.out.println(g.getComponent(0).getName());
        // always "null"
} 
```

任何人都可以向我解释如何访问标签吗？我也担心为什么组件的名称总是“空”。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T13:52:03.467

在 JPanel 中使 JLabel 的实例成为全局的，并在 JPanel 中为 JLabel 提供一个 getter。

您通过构造函数将 JPanel 的实例传递给您的外部类。

在您的外部类中的某处，您使用 JPanel 实例来获取 JLabel 实例。

```
JLabel label = panel.getJLabel(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T14:28:49.200

只有一个组件直接连接`JFrame`到`JRootPane`.

要访问`JLabel`from `ExternalClass`，您可以从框架的内容窗格中获取组件：

```
JPanel panel = (JPanel) g.getContentPane().getComponent(0);
JLabel label = (JLabel) panel.getComponent(1); 
```

还

```
g.getComponent(0).getName() 
```

将`null`默认返回，因为这是设置为`JRootPane`.

有关更多信息，请参阅[如何使用根窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)。

# c# - Azure 上的 Exchange 托管 API：连接尝试失败，因为连接方未正确响应

> ID：12425808
> 
> 赞同：0
> 
> 时间：2012-09-14T13:41:51.040
> 
> 标签：c#, azure, exchangewebservices

我的 Windows Azure 项目 (c#) 中有一个奇怪的问题

我的 C# Azure 应用程序使用 Exchange 托管 API 通过 Web 与 Exchange 2010 服务器进行通信。

Exchange 2010 本身在 Azure VM 中运行。我已经打开了防火墙，以便 Exchange EWS 网络服务在端口 443 上可用。

在 Azure 模拟器中本地运行时，我的应用程序运行良好。我可以看到我帐户中的所有文件夹和电子邮件。它可以通过 Web 与 Exchange VM 完美通信。

但是，一旦我将我的应用程序发布到我的暂存环境，该应用程序就无法正常工作。

对服务器的第一次调用有效，但之后，我收到此消息：

**“连接尝试失败，因为连接方在一段时间后没有正确响应，或者建立连接失败，因为连接的主机没有响应 [IPADDRESS]:443”**

正如我所说，它第一次工作（我的索引页面出现了我需要的内容）但是如果我刷新那个页面，它就会给我那个错误。

因此，我不认为这是一个防火墙问题，否则它不会在第一次工作。

这让我感到绝望——我看不出有什么问题！

希望你能帮忙，

西蒙。

[编辑] 这是堆栈跟踪：

```
[SocketException (0x274c): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond]
   System.Net.Sockets.NetworkStream.EndRead(IAsyncResult asyncResult) +136

[IOException: Unable to read data from the transport connection: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.]
   System.Net.Security._SslStream.EndRead(IAsyncResult asyncResult) +7911429
   System.Net.TlsStream.EndRead(IAsyncResult asyncResult) +2691856
   System.Net.Connection.ReadCallback(IAsyncResult asyncResult) +79

[WebException: The underlying connection was closed: A connection that was expected to be kept alive was closed by the server.]
   System.Net.HttpWebRequest.GetResponse() +7864676
   Microsoft.Exchange.WebServices.Data.ServiceRequestBase.GetEwsHttpWebResponse(HttpWebRequest request) +130

[ServiceRequestException: The request failed. The underlying connection was closed: A connection that was expected to be kept alive was closed by the server.]
   Microsoft.Exchange.WebServices.Data.ServiceRequestBase.GetEwsHttpWebResponse(HttpWebRequest request) +447
   Microsoft.Exchange.WebServices.Data.ServiceRequestBase.ValidateAndEmitRequest(HttpWebRequest& request) +647
   Microsoft.Exchange.WebServices.Data.MultiResponseServiceRequest`1.Execute() +72
   Microsoft.Exchange.WebServices.Data.ExchangeService.BindToFolder(FolderId folderId, PropertySet propertySet) +201
   Microsoft.Exchange.WebServices.Data.CalendarFolder.Bind(ExchangeService service, WellKnownFolderName name) +83 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T22:47:48.737

我创建了第二个云服务并将我的应用程序部署到生产环境和暂存环境。该应用程序可以完美运行！

所以我的理论是，出于某种原因，Exchange Web 服务基于 IP 地址阻止了我的暂存应用程序。但是没有防火墙规则！

好的，所以，这并不能真正回答“为什么”或“发生了什么”，但这是我要使用的解决方案：

从 Azure 中删除云应用并重新完全部署！

这具有生成新 IP 地址的效果，突然我的暂存区再次工作。

抱歉，我想不出更好的办法，但解决方案就是解决方案。

# android - 卡在日志标记上

> ID：12425815
> 
> 赞同：0
> 
> 时间：2012-09-14T13:42:13.753
> 
> 标签：android

我是 Android 新手，所以只研究示例来学习和玩东西。目前我正在研究一个通过定时器任务生成图像的示例，但我被困在一个点上，我真的需要专家的建议。下面是代码以及它在哪里使用 Log.i("MARKER", " ***** **** ")..... 有人可以告诉我为什么我在行的最后一部分出现错误吗？？？？

```
 @Override
    public void run() {
        // TODO Auto-generated method stub
        Log.i(“MARKER”,”******************************************”);

        //int numViews = container.getChildCount(); 

        ImageView toAdd = new ImageView(ImagePlayActivity.this);        
        Drawable imgContent = ImagePlayActivity.this.getResources().getDrawable(R.drawable.icon);
        toAdd.setImageDrawable(imgContent);
        toAdd.setTag(“img”+counter++);

        Random rndGen = new Random();

      LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,rndGen.nextInt(300),rndGen.nextInt(300));
        toAdd.setLayoutParams(lp);
        toAdd.setBackgroundColor(Color.TRANSPARENT);

        AlphaAnimation anim = new AlphaAnimation(0, 1);
        anim.setDuration(1000);
        container.addView(toAdd);
        //container.invalidate(); 
        toAdd.startAnimation(anim);

    }
}; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:09:07.610

# .htaccess - htaccess 用于文件夹中的多个子域

> ID：12425816
> 
> 赞同：0
> 
> 时间：2012-09-14T13:42:20.713
> 
> 标签：.htaccess, routing

我正在处理以下问题：

我有一个主域“example.com”和多个子域：

```
one.example.com
two.example.com
three.example.com 
```

等在服务器上。

我在文件夹中有此子域的内容：

```
./one/    -> one.example.com
./two/    -> two.example.com
./three/  -> three.example.com 
```

等等

因此，要将这些文件夹中的内容提供给子域，我使用以下 htaccess 文件：

```
RewriteCond %{HTTP_HOST}   ^one.example.com [NC]
RewriteCond %{REQUEST_URI} !^/one/.*
RewriteRule   ^(.*)  /one/$1  [L] 
```

它工作正常，但我的子域内容也可以从 URL 访问：

```
one.example.com/one/my-content 
```

如

```
one.example.com/my-content 
```

等等。所以它是重复的。

这是我需要解决的一个问题。

其次，example.com 的内容可以从

```
whatever.example.com
(a.example.com, b.example.com etc.) 
```

所以再次重复。

所以我的问题是：如何重定向/禁用创建重复的 URL？

非常感谢，我尝试了很多版本的代码，但没有效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:46:26.403

我通过将所有对子域的请求重定向到该文件夹​​并将对基域的所有请求重定向到另一个来解决这个问题，如下所示：

```
RewriteCond %{HTTP_HOST} ^one\. [NC]
RewriteRule (.*) /one$1 [L]

RewriteCond %{HTTP_HOST} ^two\. [NC]
RewriteRule (.*) /two$1 [L]

RewriteRule (.*) /zero$1 
```

它似乎有效，但我也在浏览器上修改了我的 URL。我该如何避免这种情况发生？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:28:51.257

对于您的第一个问题，您可以添加一个规则，将任何请求重定向到该文件夹​​并将该目录重定向到不存在的页面（以便它抛出 404 错误）

```
RewriteCond %{HTTP_HOST} ^one\.example\.com$ [NC]
RewriteCond %{REQUEST_FILENAME} ^one/
RewriteRule . /notexists.html [L] 
```

对于您的第二个问题，这不应该发生，因为当您要求 a.example.com/folder/file.html 它在内部被重定向到 a.example.com/a/folder/file.html （没有办法得到'a' 的父目录中的内容）

# java - 为什么 Hibernate3 被导入到我的项目中？

> ID：12425818
> 
> 赞同：0
> 
> 时间：2012-09-14T13:42:23.320
> 
> 标签：java, spring, hibernate, maven

为什么 Hibernate3 被导入到我的项目中？我正在尝试使用 Hibernate4，但 Maven 也正在导入 Hibernate3？

这是我的 POM.XML

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.uftwf.schoolvisit</groupId>
    <artifactId>SchoolVisit</artifactId>
    <name>School Visit</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>

    <properties>
        <java-version>1.5</java-version>
        <springframework-version>3.1.1.RELEASE</springframework-version>
        <springwebflow-version>2.3.1.BUILD-SNAPSHOT</springwebflow-version>
        <springsecurity-version>3.1.1.RELEASE</springsecurity-version>
        <org.slf4j-version>1.5.10</org.slf4j-version>
        <hibernate.version>4.1.1.Final</hibernate.version>
    </properties>

    <dependencies>

        <!-- Spring -->

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${springframework-version}</version>
            <!-- will come with all needed Spring dependencies such as spring-core 
                and spring-beans -->
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>${springframework-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${springframework-version}</version>
            <exclusions>
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework.webflow</groupId>
            <artifactId>spring-faces</artifactId>
            <version>${springwebflow-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-ldap</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-cas</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-cas-client</artifactId>
            <version>3.0.7.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>javax.transaction</groupId>
            <artifactId>jta</artifactId>
            <version>1.1</version>
        </dependency>

        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4.5</version>
        </dependency>

        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency>

        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>

        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpcore</artifactId>
            <version>4.2.1</version>
        </dependency>

        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpclient</artifactId>
            <version>4.2.1</version>
            <exclusions>
                <exclusion>
                    <artifactId>commons-logging</artifactId>
                    <groupId>commons-logging</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjtools</artifactId>
            <version>1.6.2</version>
        </dependency>

        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Logging -->

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-ext</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>

        </dependency>
        <!-- JSF-303 Dependency Injection -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>
        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <!-- Sun Mojarra JSF 2 runtime -->
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.7</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.7</version>
        </dependency>

        <!-- JSR 303 validation -->
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
        </dependency>

        <!-- ********************************************************************** 
            ** HIBERNATE DEPENDENCIES ** ********************************************************************** -->

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernate.version}</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.0.2.GA</version>
        </dependency>

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <repositories>
        <!-- For testing against latest Spring snapshots -->
        <repository>
            <id>org.springframework.maven.snapshot</id>
            <name>Spring Maven Snapshot Repository</name>
            <url>http://maven.springframework.org/snapshot</url>
            <releases>
                <enabled>false</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </repository>
        <!-- For developing against latest Spring milestones -->
        <repository>
            <id>org.springframework.maven.milestone</id>
            <name>Spring Maven Milestone Repository</name>
            <url>http://maven.springframework.org/milestone</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
        <!-- For Hibernate Validator -->
        <repository>
            <id>org.jboss.repository.releases</id>
            <name>JBoss Maven Release Repository</name>
            <url>https://repository.jboss.org/nexus/content/repositories/releases</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
        <!-- For Sun Mojarra JSF 2 implementation -->
        <repository>
            <id>maven2-repository.dev.java.net</id>
            <name>Java.net Repository for Maven</name>
            <url>http://download.java.net/maven/2/</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
        <!-- For PrimeFaces JSF component library -->

    </repositories>

    <build>
        <finalName>SchoolVisit</finalName>
    </build>
</project> 
```

这是 maven 添加到我的项目中的文件列表：

```
activation-1.1.jar
antlr-2.7.6.jar
antlr-2.7.7.jar
aopalliance-1.0.jar
asm-3.1.jar
asm-3.3.1.jar
asm-attrs-1.5.3.jar
aspectjrt-1.6.8.jar
aspectjtools-1.6.2.jar
aspectjweaver-1.6.8.jar
c3p0-0.9.1.2.jar
c3p0-0.9.2-pre4.jar
cal10n-api-0.7.2.jar
cas-client-core-3.1.10.jar
cas-client-core-3.1.12.jar
cas-client-core-3.2.1.jar
cglib-2.2.2.jar
cglib-2.2.jar
commons-beanutils-1.8.0.jar
commons-codec-1.4.jar
commons-codec-1.6.jar
commons-collections-3.1.jar
commons-dbcp.jar
commons-digester-1.8.1.jar
commons-email-1.0.jar
commons-fileupload-1.1.1.jar
commons-io-1.1.jar
commons-lang-2.5.jar
commons-logging-1.1.1.jar
commons-pool.jar
dom4j-1.6.1.jar
dumbster-1.6.jar
ehcache-1.2.3.jar
files.txt
hibernate-annotations-3.5.0-Final.jar
hibernate-commons-annotations-3.2.0.Final.jar
hibernate-commons-annotations-4.0.1.Final.jar
hibernate-core-3.5.0-Final.jar
hibernate-core-4.1.1.Final.jar
hibernate-entitymanager-3.5.0-Final.jar
hibernate-entitymanager-4.1.1.Final.jar
hibernate-jpa-2.0-api-1.0.0.Final.jar
hibernate-jpa-2.0-api-1.0.1.Final.jar
hibernate-search-3.0.0.GA.jar
hibernate-validator-4.0.2.GA.jar
hsqldb-1.8.0.10.jar
httpclient-4.1.2.jar
httpclient-4.2.1.jar
httpclient-cache-4.1.2.jar
httpcore-4.1.2.jar
httpcore-4.2.1.jar
httpmime-4.1.2.jar
icu4j-2.6.1.jar
jackson-core-asl-1.5.3.jar
jackson-mapper-asl-1.5.3.jar
javassist-3.15.0-GA.jar
javassist-3.9.0.GA.jar
javax.inject-1.jar
javax.servlet-jstl-1.2.jar
jaxb-api-2.1.jar
jaxb-impl-2.1.3.jar
jaxen-1.1.1.jar
jboss-logging-3.1.0.GA.jar
jboss-transaction-api_1.1_spec-1.0.0.Final.jar
jcl-over-slf4j-1.5.10.jar
jdom-1.0.jar
joda-time-1.6.jar
joda-time-jsptags-1.0.2.jar
jsf-api-2.1.7.jar
jsf-impl-2.1.7.jar
jstl-1.2.jar
jstl-jstl-1.2.jar
jta-1.1.jar
log4j-1.2.14.jar
log4j-1.2.15.jar
log4j-1.2.16.jar
lucene-core-2.3.2.jar
lucene-highlighter-2.0.0.jar
mail-1.4.5.jar
mail-1.4.jar
mailapi.jar
mail.jar
mchange-commons-java-0.2.2.jar
mysql-connector-java-5.0.5.jar
mysql-connector-java-5.1.21.jar
org.springframework.aop-3.1.1.RELEASE.jar
org.springframework.asm-3.1.1.RELEASE.jar
org.springframework.aspects-3.1.1.RELEASE.jar
org.springframework.beans-3.1.1.RELEASE.jar
org.springframework.binding-2.3.1.RELEASE.jar
org.springframework.context-3.1.1.RELEASE.jar
org.springframework.context.support-3.1.1.RELEASE.jar
org.springframework.core-3.1.1.RELEASE.jar
org.springframework.expression-3.1.1.RELEASE.jar
org.springframework.faces-2.3.1.RELEASE.jar
org.springframework.instrument-3.1.1.RELEASE.jar
org.springframework.instrument.tomcat-3.1.1.RELEASE.jar
org.springframework.jdbc-3.1.1.RELEASE.jar
org.springframework.jms-3.1.1.RELEASE.jar
org.springframework.js-2.3.1.RELEASE.jar
org.springframework.js.resources-2.3.1.RELEASE.jar
org.springframework.orm-3.1.1.RELEASE.jar
org.springframework.oxm-3.1.1.RELEASE.jar
org.springframework.test-3.1.1.RELEASE.jar
org.springframework.transaction-3.1.1.RELEASE.jar
org.springframework.web-3.1.1.RELEASE.jar
org.springframework.webflow-2.3.1.RELEASE.jar
org.springframework.web.portlet-3.1.1.RELEASE.jar
org.springframework.web.servlet-3.1.1.RELEASE.jar
org.springframework.web.struts-3.1.1.RELEASE.jar
persistence-api-1.0.jar
quartz-1.5.2.jar
slf4j-api-1.5.10.jar
slf4j-ext-1.5.10.jar
slf4j-log4j12-1.5.10.jar
smtp.jar
spring-aop-3.0.7.RELEASE.jar
spring-asm-3.1.1.RELEASE.jar
spring-aspects-3.1.1.RELEASE.jar
spring-beans-3.1.1.RELEASE.jar
spring-binding-2.3.1.BUILD-20120326.222602-13.jar
spring-context-3.1.1.RELEASE.jar
spring-context-support-3.1.1.RELEASE.jar
spring-core-3.1.1.RELEASE.jar
spring-expression-3.1.1.RELEASE.jar
spring-faces-2.3.1.BUILD-20120326.222626-13.jar
spring-jdbc-3.1.1.RELEASE.jar
spring-js-2.3.1.BUILD-20120326.222614-13.jar
spring-js-resources-2.3.1.BUILD-20120326.222607-13.jar
spring-ldap-1.3.1.RELEASE-all.jar
spring-ldap-core-1.3.1.RELEASE.jar
spring-orm-3.1.1.RELEASE.jar
spring-security-cas-3.1.0.RELEASE.jar
spring-security-cas-3.1.1.RELEASE.jar
spring-security-cas-client-3.0.7.RELEASE.jar
spring-security-config-3.1.0.RELEASE.jar
spring-security-config-3.1.1.RELEASE.jar
spring-security-core-3.1.0.RELEASE.jar
spring-security-core-3.1.1.RELEASE.jar
spring-security-crypto-3.1.0.RELEASE.jar
spring-security-ldap-3.1.0.RELEASE.jar
spring-security-ldap-3.1.1.RELEASE.jar
spring-security-openid-3.1.0.RELEASE.jar
spring-security-remoting-3.1.0.RELEASE.jar
spring-security-taglibs-3.1.0.RELEASE.jar
spring-security-web-3.1.0.RELEASE.jar
spring-security-web-3.1.1.RELEASE.jar
spring-tx-3.0.5.RELEASE.jar
spring-tx-3.1.1.RELEASE.jar
spring-web-3.1.1.RELEASE.jar
spring-webflow-2.3.1.BUILD-20120326.222621-13.jar
spring-webmvc-3.1.1.RELEASE.jar
stax-api-1.0-2.jar
tiles-api-2.1.3.jar
tiles-core-2.1.3.jar
tiles-jsp-2.1.3.jar
tiles-servlet-2.1.3.jar
urlrewritefilter-3.1.0.jar
validation-api-1.0.0.GA.jar
xalan-2.6.0.jar
xml-apis-1.0.b2.jar
xml-apis-1.3.02.jar
xmlParserAPIs-2.6.2.jar
xom-1.0.jar 
```

你可以看到 maven 正在加载我需要的很多差异版本。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T13:47:03.133

如果你跑

```
mvn dependency:tree 
```

你会看到所有的依赖。

它们将显示在树视图中（如命令所示）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-14T15:07:18.383

我不知道问题是什么，但我创建了一个新的 web 应用程序并复制到我的源代码和 pom.xml 中，一切都很好

# c++ - 调用 TerminateThread 时线程何时真正终止？

> ID：12425821
> 
> 赞同：0
> 
> 时间：2012-09-14T13:42:28.237
> 
> 标签：c++, c, multithreading, winapi

如果我使用该函数在 Windows 上终止一个线程[`TerminateThread`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686717%28v=vs.85%29.aspx)，该线程是在函数返回后实际终止还是终止异步？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T13:49:07.003

定义“实际终止”。文档说该线程不能再执行任何用户模式代码，如此有效：是的，它已终止，您的代码将不再由该线程执行。

如果您在终止后立即对其“WaitForSingleObject”，我想由于 Windows 正在进行的清理工作，仍然可能会有一些轻微的延迟。

顺便说一句： TerminateThread 是结束线程的最糟糕的方式。尝试使用其他一些同步方式，例如告诉线程停止的全局变量或事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T13:55:55.257

终止一个线程类似于杀死一个进程，只是在每个线程级别上。它实际上可以通过在目标线程中引发（无法捕获的）信号来实现。

结果基本上是一样的：你的程序没有处于任何特定的、可预测的状态。对于死线程，您无能为力。程序的控制流通常变得不确定，因此在线程终止的情况下很难推断程序的行为。

基本上，除非您的线程正在做一些极其狭窄、特定和受限制的事情（例如，每秒增加一次原子计数器），否则对于终止线程的需要以及线程终止后的程序状态没有好的模型。

不要这样做。设计您的线程，以便您可以与它们进行通信，并且它们的入口函数可以返回。设计您的程序，以便您始终可以最终加入所有线程并解决所有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T15:14:05.587

这是一个同步调用。这并不意味着它一定会快速返回 - 如果操作系统必须诉诸于使用其内核间驱动程序来停止线程，则可能会涉及一些阻塞（即，它实际上运行在与请求终止的线程不同的内核上） ）。

正如其他人明确发布的那样，在应用程序运行期间从用户代码调用 TerminateThread 存在问题（与在应用程序/进程终止期间使用它的内核不同）。

在应用程序运行期间，我非常努力地从不终止线程，使用 TerminateThread 或任何其他方式。在应用程序关闭时操作系统销毁它们之前，应用程序生命周期线程和线程池通常不需要任何显式终止。

# jasper-reports - 如何使用 Group By 创建 Jasper Report Table 组件？

> ID：12425823
> 
> 赞同：-1
> 
> 时间：2012-09-14T13:42:36.280
> 
> 标签：jasper-reports

标准的列布局可以用来实现这一点。如何为表格组件布局做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T14:06:18.047

这很容易。*您应该为Table*组件添加新的数据源，然后在该组件中使用它（数据源）。

示例*jrxml*：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ... whenNoDataType="AllSectionsNoDetail" ...>
    <style name="table">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <subDataset name="tableDataset">
        <queryString language="SQL">
            <![CDATA[SELECT id, city, street FROM address ORDER BY city]]>
        </queryString>
        <field name="ID" class="java.lang.Integer"/>
        <field name="CITY" class="java.lang.String"/>
        <field name="STREET" class="java.lang.String"/>
        <group name="CITY">
            <groupExpression><![CDATA[$F{CITY}]]></groupExpression>
        </group>
    </subDataset>
    <title>
        <band height="58" splitType="Stretch">
            <componentElement>
                <reportElement key="table" style="table" x="0" y="0" width="299" height="46"/>
                <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                    <datasetRun subDataset="tableDataset">
                        <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                    </datasetRun>
                    <jr:column width="90">
                        <jr:groupHeader groupName="CITY">
                            <jr:cell height="30" rowSpan="1">
                                <textField>
                                    <reportElement x="0" y="0" width="90" height="30"/>
                                    <textElement/>
                                    <textFieldExpression><![CDATA[$F{CITY}]]></textFieldExpression>
                                </textField>
                            </jr:cell>
                        </jr:groupHeader>
                        <jr:columnHeader style="table_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement x="0" y="0" width="90" height="30"/>
                                <textElement/>
                                <text><![CDATA[Id]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement x="0" y="0" width="90" height="20"/>
                                <textElement/>
                                <textFieldExpression><![CDATA[$F{ID}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column width="90">
                        <jr:columnHeader style="table_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement x="0" y="0" width="90" height="30"/>
                                <textElement/>
                                <text><![CDATA[Street]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement x="0" y="0" width="90" height="20"/>
                                <textElement/>
                                <textFieldExpression><![CDATA[$F{STREET}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                </jr:table>
            </componentElement>
        </band>
    </title>
</jasperReport> 
```

*iReport*中的设计如下所示：

*   主要报告视图：

![在此处输入图像描述](../Images/7b85d2f32ee380d797a49e1474d14f5d.png)

*   *表格*组件视图：

![在此处输入图像描述](../Images/74f87b5bee448de082f489066ad1d3a6.png)

在此示例中，我删除了主要数据源并将*Table*组件放入*Title*带。我设置***了 whenNoDataType="AllSectionsNoDetail"***属性来显示报告。

报告中的数据按***城市***字段分组。

# wpf - 从 WPF 中的后台工作线程读取控制值

> ID：12425827
> 
> 赞同：0
> 
> 时间：2012-09-14T13:42:48.093
> 
> 标签：wpf, wpf-controls

我正在尝试从后台工作人员读取控件的值。

有很多关于如何从后台线程更新控件的示例，但我无法找到一个如何从中读取的示例。

目前我已经创建了一个结构来传递给后台工作人员，但它似乎不是很优雅。

结构：

```
public struct Arguments
    {
        public string version;
        public bool isChecked;

        public Arguments(string Version, bool IsChecked)
        {
            version = Version;
            isChecked = IsChecked;
        }

    } 
```

按钮点击事件

```
 Arguments pass = new Arguments(Version.Text.Trim(), (bool)Credentials.IsChecked);

 export.RunWorkerAsync(pass); 
```

工作活动

```
ExportSolution export = new ExportSolution(this, messageBox);

Arguments pass = (Arguments)e.Argument;

export.Export(pass.version, pass.isChecked); 
```

这工作正常，但我想做以下或类似的事情

DoWork 事件

```
 ExportSolution export = new ExportSolution(this, messageBox);             

 export.Export(Access Version.Text.Trim() from here, ditto (bool)Credentials.IsChecked); 
```

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:49:02.600

这就是我最终做的事情：

```
 string version;
    bool isChecked;

    public MainWindow()
    {
        InitializeComponent();

        this.DataContext = validator;

        //export.DoWork +=new DoWorkEventHandler(export_DoWork);

        export.DoWork += (sender, args) =>
        {
            ExportSolution exports = new ExportSolution(this, messageBox);

            Dispatcher.Invoke((Action)(() => version = Version.Text.Trim()));
            Dispatcher.Invoke((Action)(() => isChecked = (bool)Credentials.IsChecked));

            exports.Export(version, isChecked);
        };
    } 
```

其中 Version 是一个文本框，Credentials 是一个复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:56:12.307

如果您正在处理 Code Behind，您可以将 DoWork 事件作为 Lambda 表达式执行，

例如。

```
DoWork+=(_,_)=>{...} 
```

然后在labda 表达式中你可以看到外部范围，你可以看到windows 控件的名称和按钮。

# mysql - 带有子分区的 MySQL ALTER TABLE 失败

> ID：12425831
> 
> 赞同：2
> 
> 时间：2012-09-14T13:43:03.380
> 
> 标签：mysql, partitioning, database-partitioning

我正在尝试更改现有表以添加年和周子分区，如下所示：

```
CREATE TABLE test_table(
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    dtime DATETIME NOT NULL);

ALTER TABLE test_table
PARTITION BY RANGE ( YEAR(dtime) )
SUBPARTITION BY RANGE( WEEK(dtime) ) ( 
    PARTITION y0 VALUES LESS THAN (2013) (
        SUBPARTITION w0 VALUES LESS THAN (2),
        ...
        SUBPARTITION w52 VALUES LESS THAN (54)
    ),
    PARTITION y1 VALUES LESS THAN (2014) (
        SUBPARTITION w0 VALUES LESS THAN (2),
        ...
        SUBPARTITION w52 VALUES LESS THAN (54)
    ),
    PARTITION y2 VALUES LESS THAN (2015) (
        SUBPARTITION w0 VALUES LESS THAN (2),
        ...
        SUBPARTITION w52 VALUES LESS THAN (54)
    ),
    PARTITION y3 VALUES LESS THAN (2016) (
        SUBPARTITION w0 VALUES LESS THAN (2),
        ...
        SUBPARTITION w52 VALUES LESS THAN (54)
    )
); 
```

但是，这给了我以下模糊且无益的回应：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that     corresponds to your MySQL server version for the right syntax to use near 'RANGE(     WEEK(DTIME) ) (
            PARTITION y0 VALUES LESS THAN (2013) (
                    SUBPARTITION ' at line 3 
```

我检查了文档：[MySQL ALTER TABLE Partition operations](http://dev.mysql.com/doc/refman/5.1/en/alter-table-partition-operations.html)和[MySQL RANGE and LIST Partitions](http://dev.mysql.com/doc/refman/5.1/en/partitioning-management-range-list.html)。但是，这些都没有描述如何更改表以创建子分区。

我的问题的第二部分是关于这个分区方案的反馈。进入这里的数据是每分钟记录的传感器读数，最常见的查询操作是上周的数据。我认为这应该会大大加快我的查询速度，因为“WHERE dtime > date”非常常见，而无需定期手动将数据从表中移出到存档表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-23T12:46:59.557

如果要将分区添加`BY LIST`到已存在的表中，请删除主键并创建复合主键：

```
alter table test_table drop primary key, add primary key (id,<some other key>);
alter table orders partition by list(<some other key>) (
    partition p0 values IN (1),
    partition p1 values IN (2),
    partition p2 values IN (3),
    partition p3 values IN (4),
    partition p4 values IN (5),
    partition p5 values IN (6),
    partition p6 values IN (7),
    partition p7 values IN (8),
    partition p8 values IN (9),
    partition p9 values IN (10)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:43:18.320

经过进一步调查，我发现这种方法存在几个问题。

1.  不可能在 DATETIME 值（示例中的 dtime ）上进行分区。 [http://dev.mysql.com/doc/refman/5.1/en/partitioning-limitations-functions.html](http://dev.mysql.com/doc/refman/5.1/en/partitioning-limitations-functions.html)

2.  我正在分区的表在自动增量 id 列上有一个主键，如果有不同的主键，你不能在索引上分区。

    错误 1503 (HY000)：主键必须包括表的分区函数中的所有列 另请参阅[http://blog.mclaughlinsoftware.com/2011/05/09/mysqls-real-partition-key/](http://blog.mclaughlinsoftware.com/2011/05/09/mysqls-real-partition-key/) [http://dev。 mysql.com/doc/refman/5.1/en/partitioning-limitations-partitioning-keys-unique-keys.html](http://dev.mysql.com/doc/refman/5.1/en/partitioning-limitations-partitioning-keys-unique-keys.html)

3.  WEEK() 不允许作为分区函数。[http://dev.mysql.com/doc/refman/5.1/en/partitioning-limitations-functions.html](http://dev.mysql.com/doc/refman/5.1/en/partitioning-limitations-functions.html)

据我所知，如果你有一个 UNIQUE AUTO_INCREMENT id 作为主键，那么除了那个值之外，不可能对任何东西进行分区。

我的查询都使用 WHERE 条件中的 dtime 列，所以似乎除非我仍然可以在 dtime 上以某种方式分区，否则分区该表没有任何好处（从性能角度来看）。

# jquery - jqGrid 传值到表单编辑

> ID：12425834
> 
> 赞同：2
> 
> 时间：2012-09-14T13:43:10.367
> 
> 标签：jquery, jqgrid

我有一个 jqGrid 字段，我设置如下：

```
colModel: [
    ....,
    {name:'Enabled',index:'Enabled',width:45,editable:true,edittype:'checkbox',
        editoptions:{value:"1:0"},
        formatter: function (cellvalue, options, rowdata) {
            if (cellvalue == 0) return "<span class='ui-icon ui-icon-close hidden-align' style='text-align: center'></span>"; 
            else return "<span class='ui-icon ui-icon-check hidden-align' style='text-align: center'></span>";
        },align:'center',formatoptions:{disabled:false}},
], 
```

问题是因为我将图像放在单元格值中，如何将值传递给表单编辑值，以便当单元格值为真时复选框可以处于选中状态？

在此先感谢大家！干杯，路易吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:04:39.710

您可以使用

```
formatter: function (cellvalue, options, rowdata) {
    if (cellvalue == 0) {
        return "<span class=\"ui-icon ui-icon-close\"></span>";
    } else {
        return "<span class=\"ui-icon ui-icon-check\"></span>";
    }
},
edittype: 'checkbox', editoptions: {value:
    "<span class=\"ui-icon ui-icon-check\"></span>:<span class=\"ui-icon ui-icon-close\"></span>"} 
```

或更好地使用**no`editoptions: { value: ...`**，但使用`formatter`在内部具有以下值之一：`false`, `0`, `no`, `off`, `undefined`. 查看jqGrid 代码[行](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.formedit.js#L607)

```
if(tmp.search(/(false|0|no|off|undefined)/i)<0 && tmp!=="") {
    $("#"+nm,"#"+fmid)[$t.p.useProp ? 'prop': 'attr']("checked",true);
    $("#"+nm,"#"+fmid)[$t.p.useProp ? 'prop': 'attr']("defaultChecked",true); //ie
} else {
    $("#"+nm,"#"+fmid)[$t.p.useProp ? 'prop': 'attr']("checked", false);
    $("#"+nm,"#"+fmid)[$t.p.useProp ? 'prop': 'attr']("defaultChecked", false); //ie
} 
```

为解释。例如格式化程序

```
formatter: function (cellvalue, options, rowdata) {
    if (cellvalue == 0) {
        return "<span class=\"ui-icon ui-icon-close\">0</span>";
    } else {
        return "<span class=\"ui-icon ui-icon-check\">1</span>";
    }
} 
```

（没有`editoptions: { value: ...`）应该可以解决您的问题。

# java - JPQL 多对多选择

> ID：12425835
> 
> 赞同：13
> 
> 时间：2012-09-14T13:43:12.757
> 
> 标签：java, database, jakarta-ee, jpa, jpql

我有两个实体之间的多对多关系，称为：汽车和经销商。

在本机 MySQL 中，我有：

```
car (id and other values)
dealership (id and other values)
car_dealership  (car_id and dealership_id) 
```

我想在 JPQL 中进行的查询是：

```
#Select List of cars in multiple dealerships
SELECT car_id FROM car_dealership WHERE dealership_id IN(1,2,3,56,78,999); 
```

使 JPQL 等效的正确方法是什么？

我的 Java 方法签名是：

```
public List<Car> findByDealership(List<Dealership> dealerships); 
```

我努力了

```
 //TOTALLY WRONG QUERY CALL!!!     
    Query query = em.createQuery("SELECT c FROM Car c WHERE :dealer_ids IN c.dealerships");
    List<Long> dealerIds = new ArrayList<Long>();
    for(Dealership d : dealerships) {
        dealerIds.add(d.getId());
    }
    query.setParameter(":dealer_ids", dealerIds); 
    List<Dealership> result = (List<Dealership>) query.getResultList();
    return result;
} 
```

这是我在 Java 中对这种关系的 JPA 注释：

```
@Entity
@Table(name = "car")
public class Car implements Serializable {

     //Setup of values and whatnot....
     @ManyToMany
     @JoinTable(name = "car_dealership", joinColumns =
     @JoinColumn(name = "car_id", referencedColumnName = "id"),
     inverseJoinColumns = @JoinColumn(name = "dealership_id", referencedColumnName = "id"))
     private List<Dealership> dealerships;

     ... other stuff (getters/setters)

}

@Entity
@Table(name = "property")
public class Dealership implements Serializable {

    //Setting of values and whatnot

    @ManyToMany(mappedBy = "dealerships")
    private List<Car> cars;

    .... other stuff(getters/setters)

} 
```

**编辑**

我也试过：

```
 Query query = em.createQuery("SELECT c FROM Car c INNER JOIN c.dealerships d WHERE d IN (:deals)");
 query.setParameter("deals", dealerships); 
```

这引发了错误：

```
org.eclipse.persistence.exceptions.QueryException

Exception Description: Object comparisons can only use the equal() or notEqual() operators.  
Other comparisons must be done through query keys or direct attribute level comparisons. 

Expression: [
Relation operator [ IN ]
Query Key dealerships
  Base stackoverflow.question.Car
Constant [
Parameter deals]] 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-14T14:29:39.713

```
select car from Car car 
inner join car.dealerships dealership
where dealership in :dealerships 
```

该参数必须是 Dealership 实例的集合。

如果要使用经销商 ID 的集合，请使用

```
select car from Car car 
inner join car.dealerships dealership
where dealership.id in :dealershipIds 
```

请记住 JPQL 总是使用实体、映射属性和关联。永远不要使用表名和列名。

# php - 通过php存储特殊字符（德语）SqlServer

> ID：12425838
> 
> 赞同：0
> 
> 时间：2012-09-14T13:43:23.033
> 
> 标签：php, sql-server, encoding, utf-8, pdo

我有一台 Fedora 机器作为服务器，运行 php 5.3 的 apache

脚本充当向我发送“消息”的各种来源的入口页面。

php 脚本的调用如下：`serverAddress/phpScript.php?message=MyMessage`然后通过 PDO 保存消息以连接到 SqlServer 2008 db。

如果消息包含任何特殊字符（例如德语），例如：üäöß 那么在数据库中我会得到一些乱码而不是正确的字符串：Ã¼Ã¤Ã¶ÃŸ

db 完全支持 UTF-8 - 我可以连接和发送/检索德语字符，而其他工具没有任何问题（不是通过 php）。

php脚本内部：

*   如果我回显输入字符串，我会得到正确的字符串 üäöß
*   如果我将它保存到文件中（记录输入），我会看到乱码：Ã¼Ã¤Ã¶ÃŸ

**是什么导致了这种行为？我该如何解决？**

*   启用多字节（yum install php-mbstring，然后重新启动 apache）

*   在我的 php 脚本开始时，我有：

```
    mb_internal_encoding('UTF-8');
    mb_http_output('UTF-8');
    mb_http_input('UTF-8');
    mb_language('uni');
    mb_regex_encoding('UTF-8');
    ob_start('mb_output_handler');
```

*   据我了解，通过 PDO 处理 mssql 时的默认编码类型是 UTF-8

**新发展：**

一位同事将我指向我看到的[PDO_DBLIB 页面](http://www.google.ro/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCAQFjAA&url=http://php.net/manual/it/ref.pdo-dblib.php&ei=STVTUIS9DdHAtAbf8YD4Bw&usg=AFQjCNF4haeRz8gPq-1MKfB4OppngnqhNg&sig2=RaWBzaRJFg0J2UrNpUBZHQ&cad=rja)（此时仅从缓存中可见）`$res->bindValue(':value', iconv('UTF-8', 'ISO8859-1', $value);`

我用我的所有替换 `$res->bindParam(':text',$text);`， `$res->bindParam(':text',iconv('UTF-8', 'ISO8859-1',$text));`一切正常:)。

不再需要 mb_internal_encoding.... 和所有其他行。

**为什么使用 ISO8859-1 编码时它会起作用？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T15:31:21.307

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:28:10.940

看看[这篇](http://kunststube.net/frontback/)关于“在 Web 应用程序中从前到后处理 Unicode”的文章。到目前为止，我在这个主题上看到的最好的文章之一。如果您遵循指南并且问题仍然存在，那么您肯定知道这不是您的错。

# sql - 仅从一张表中选择 *

> ID：12425839
> 
> 赞同：-5
> 
> 时间：2012-09-14T13:43:22.707
> 
> 标签：sql, sql-server, database, sql-server-2008

更新的问题：

```
ALTER PROC Proc_Test
(
    @GrpBy as varchar(20) 
)
AS
Declare @TableTax table(
Taxid int,
TaxRange nvarchar(20),
MinLimit int,
MaxLimit int
)

SELECT t1.*     
FROM 
(
    SELECT  
        GroupBy = CASE @GrpBy 
                    WHEN 'JobGrade' THEN Employee.Grade                 
                    WHEN 'Tax Slab' THEN tblTax.TaxRange
                  END, (20 more calculated columns)
    FROM @TableTax AS tblTax, Employee
        LEFT JOIN Grade on Grade.Grade = Employee.Grade     
    WHERE
    Employee.Salary between tblTax.MinLimit and tblTax.Maxlimit     
    GROUP BY    
        CASE @GrpBy
                    WHEN 'JobGrade' THEN Employee.Grade                 
                    WHEN 'Tax Slab' THEN tblTax.TaxRange
                  END   
) AS t1
ORDER BY GroupBy 
```

我想按 TaxId 订购结果。此 order by 仅适用于在前端选择 Tax Slab 的情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T14:04:02.750

试试这个：

```
SELECT t1.* FROM t1
INNER JOIN t2
ON t1.JoinColumn = t2.JoinColumn
ORDER BY t2.SortColumn 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T13:49:31.777

您应该添加“where”子句

```
Select t1.* from t1, t2 where t1.somefield = t2.otherfield order by t2.sortfield
```

# sql - SQL Query - 如何根据需要设置查询结果标题

> ID：12425842
> 
> 赞同：1
> 
> 时间：2012-09-14T13:43:32.057
> 
> 标签：sql, sql-server, sql-server-2008

请查看下面的查询及其结果。

**询问：**

```
Select T.TestTypeCode   
       T.Num1 As 'Friday - 09/14/2012'  
       T.Num2 As 'Saturday - 09/15/2012'    
       T.Num3 As 'Sunday 09/16/2012'    
       T.Num4 As 'Monday 09/17/2012'  
From Table T 
```

**结果：**

```
TestTypeCode    Friday - 09/14/2012 Saturday - 09/15/2012   Sunday 09/16/2012   Monday 09/17/2012
    Open        60                  60                      60                  0
    Open        48                  48                      48                  0
    Open        28                  28                      28                  0 
```

如果你看到上面的查询和结果，列名' **Friday - 09/14/2012** '、' **Saturday - 09/15/2012** '、' **Sunday** 09/16/2012 '和' **Monday** 09/17/2012 '是手动提到的，

**但是，如果客户在 ' Tuesday 09/18/2012** '执行查询，那么他必须看到列名称为 ' **Tuesday-09/18/2012** '、' **Wednesday-09/19/2012** '、' **Thursday-09/ 2012**年 2 月 20 日和**2012 年 9 月 21 日**星期五

因此，无论何时客户端运行查询，列名都应在接下来的四天内自动生成。
我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:40:31.583

您正在做的事情需要在前端而不是 SQL 中完成。

SSRS、Crystal Reports 或其他一些报告软件是您可以创建所需列名的地方。

我假设星期几是给客户而不是给你的，这意味着这应该在前端的报告软件上完成。

客户端不应该执行 SQL，他们应该运行报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:53:25.773

你有没有试过做类似的事情

```
SELECT T.TestTypeCode, T.Num1 AS DATEADD(day, 1, GETDATE()), ... 
```

# deployment - 部署 JavaFX 应用程序时出现运行时错误

> ID：12425843
> 
> 赞同：9
> 
> 时间：2012-09-14T13:43:32.490
> 
> 标签：deployment, javafx-2, runtime-error

我正在尝试部署 JavaFX 应用程序。我一直在开发的应用程序相当复杂，包括几个库。当我创建一个 jnlp 并尝试运行它时，我总是收到“运行时错误。单击以获取详细信息”消息。有人建议我尝试只做一个简单的 Hello World 应用程序，看看它是否是包含的库的问题。我试过了，但我仍然收到“运行时错误”。

这是我正在尝试使用的 build.xml。

```
 <project name="App" default="default" basedir="." xmlns:fx="javafx:com.sun.javafx.tools.ant">
        <taskdef resource="com/sun/javafx/tools/ant/antlib.xml"
             uri="javafx:com.sun.javafx.tools.ant"
             classpath="C:\Program Files\Java\jdk7\lib\ant-javafx.jar" />

        <target name="default">
        <fx:deploy width="600" height="400" outdir="${basedir}/dist" outfile="App">
            <fx:application name="App" mainClass="${javafx.main.class}"/>

            <fx:resources>
                <!-- include application jars -->
                <fx:fileset dir="${basedir}" includes="*.jar"/>
                <fx:fileset dir="${basedir}/lib" includes="*.jar"/> 
                <fx:fileset dir="${basedir}" includes="app.ini" />
                <fx:fileset dir="${basedir}/template" includes="*.template" />
            </fx:resources>

            <!-- request user level installation -->
            <fx:preferences install="false"/>
        </fx:deploy>
        </target>
    </project> 
```

对于 Hello World 版本，我刚刚删除了该`<fx:resources>`部分。我从 Eclipse 内部将它们都作为 ant 任务运行。他们都在我的项目中使用 .jnlp 和 .html 文件创建了一个 dist 文件夹。然后我单击 jnlp 运行应用程序并看到一个小窗口，其中包含文本“运行时错误。单击以获取详细信息。” 我单击它并得到一个错误窗口，上面写着“应用程序无法运行。执行应用程序时出错。单击“详细信息”以获取更多信息。”我单击“详细信息”按钮并看到带有以下信息的 Java 控制台（HelloWorld 版本）：

```
Java Plug-in 10.7.2.11
Using JRE version 1.7.0_07-b11 Java HotSpot(TM) 64-Bit Server VM
User home directory = C:\Users\user
----------------------------------------------------
c:   clear console window
f:   finalize objects on finalization queue
g:   garbage collect
h:   display this help message
l:   dump classloader list
m:   print memory usage
o:   trigger logging
q:   hide console
r:   reload policy configuration
s:   dump system and deployment properties
t:   dump thread list
v:   dump thread stack
x:   clear classloader cache
0-5: set trace level to <n>
----------------------------------------------------
Match: beginTraversal
Match: digest selected JREDesc: JREDesc[version 1.6+, heap=-1--1, args=null,         href=http://java.sun.com/products/autodl/j2se, sel=false, null, null], JREInfo: JREInfo for index 0:
platform is: 1.7
product is: 1.7.0_07
location is: http://java.sun.com/products/autodl/j2se
path is: C:\Program Files\Java\jre7\bin\javaw.exe
args is: null
native platform is: Windows, amd64 [ x86_64, 64bit ]
JavaFX runtime is: JavaFX 2.2.1 found at C:\Program Files\Java\jre7\
enabled is: true
registered is: true
system is: true

Match: ignoring maxHeap: -1
Match: ignoring InitHeap: -1
Match: digesting vmargs: null
Match: digested vmargs: [JVMParameters: isSecure: true, args: ]
Match: JVM args after accumulation: [JVMParameters: isSecure: true, args: ]
Match: digest LaunchDesc: file:/G:/workspaces/JavaProjects/JavaFXHelloWorld/dist/HelloWorld.jnlp
Match: digest properties: []
Match: JVM args: [JVMParameters: isSecure: true, args: ]
Match: endTraversal ..
Match: JVM args final: 
Match: Running JREInfo Version    match: 1.7.0.07 == 1.7.0.07
Match: Running JVM args match: have:<>  satisfy want:<>
CacheEntry[file:/G:/workspaces/JavaProjects/JavaFXHelloWorld/dist/HelloWorld.jnlp]:    updateAvailable=false,lastModified=Fri Sep 14 07:13:28 MDT 2012,length=915 
```

当我运行我正在处理的应用程序时，我得到一个几乎相同的错误。我刚刚卸载了java，然后重新安装了最新的SDK。除了可能应用程序使用 64 位 JVM 而不是我安装的 32 位 JVM 之外，这并没有做任何事情。错误消息保持不变。

有谁知道我做错了什么？我的构建脚本不正确吗？有没有更好的部署方式？我不必拥有 jnlp，因此我对任何部署方法都持开放态度。我只需要可以在 Windows 机器上运行的东西，也可能是在 Mac 上运行的东西。

我试过用谷歌搜索我的问题，我搜索了 StackOverflow，似乎找不到任何相关的东西。我可能只是使用了错误的搜索词。

任何帮助将不胜感激。

谢谢，哈代

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:28:20.143

如果您使用的是 netbeans，则右键单击项目并转到项目属性，然后转到库，然后单击管理平台，然后选择默认 Javafx 平台，然后转到 JAVAFX 选项卡，然后将 JAVAFX SDK 位置更改为您的 Java fx 2 sdk 所在的位置并同样更改 JAVAFX JRE。希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T20:26:54.220

我最终发现，就我而言，这个问题是由 jar 签名过程中的错误引起的。清空 Java 缓存可以避免该问题（在 Windows 上，这可以通过 Java 控制面板完成）。这样做并重建后，我的情况不再发生错误。

不过，我不确定这是否会解决您的问题，因为您似乎没有进行任何签名。

# javascript - 以块的形式呈现大型 HTML 表格

> ID：12425846
> 
> 赞同：1
> 
> 时间：2012-09-14T13:43:44.803
> 
> 标签：javascript, html

我正在编写一个基于 Javascript 的表格小部件，我希望它能够基本上处理无限量的数据。为此，该表将仅在需要时（滚动到视图中时）对数据进行 Ajax 请求。我有基本的想法，但我正在努力解决的一个问题是调整表格列的大小。

由于在任何时候实际上只渲染了所有行的一部分，因此随着列的最大宽度的变化，表格往往会重新排列。

我考虑过每次渲染表格时迭代表格单元格，并记住每列的“最大宽度”。仍然会有一些回流，但是一旦你看到最宽的 td，它应该停止。问题是这似乎是一种笨拙的解决方案，而且我发现自己编写的代码比我想处理的要多。

有没有人遇到过这个问题，或者对如何处理它有任何更简单的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:45:54.140

为了保持一致性，我会将列宽锁定为表格第一个视图上的宽度。这样一来，根本就没有变通。

您还应该为开发人员提供一种为列指定静态列宽的方法，以便他们在知道宽度后可以根据数据调整它们的大小。

# visual-studio - Node.js - 我真的需要 Visual Studio 吗？Python 2.X 还是 3.X？

> ID：12425850
> 
> 赞同：6
> 
> 时间：2012-09-14T13:44:11.947
> 
> 标签：visual-studio, html, node.js, compiler-construction, websocket

试图在 Windows Node.js 上安装 websockets。

我得到的本机扩展需要 Visual Studio 和 Python。

我的问题是：是否可以采用另一个编译器？或者我真的需要 VS (3,6GB) 下载还是有其他选择，因为我不想下载那么多。我想 Linux 有 GGC 。我需要 Python 2.X 还是 Python 3.X。

![节点.js](../Images/f588afe7cf35fbe35f828e899c3397ba.png)

感谢您的回复。祝你今天过得愉快。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T14:15:51.977

您需要 Visual Studio 才能获得 C++ 编译器。[您可以在此处](http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express)下载Visual Studio 2010 Express ，它的下载量要小得多 (694MB)。对于 python，您需要 2.6 或 2.7，如github上的[node.js wiki 所述。](https://github.com/joyent/node/wiki/Installation)

另一种选择是简单地使用node.js 团队已经[提供的二进制文件。](http://nodejs.org/download/)如果你走这条路，你就不必自己编译源代码。据我所知，node 应该已经支持 websockets。[在此处](http://cosmi.nu/html5-websockets-node-js-and-socket-io-on-windows/62/)查看有关如何使用 websockets 设置服务器的教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T15:09:38.587

有很多 ws 兼容的仅 JS 模块不需要 C++ 运行时/节点/V8 头文件/Waf/Python

[从预构建的包](https://nodejs.org/en/download/)（约 5mb 下载，包括 npm）安装 node.js ，然后执行`npm install sockjs`（sockjs 将 websockets 服务器实现为可用传输之一）。然后使用 HTML5 webscockets 客户端或使用[sockjs-client 库](https://github.com/sockjs/sockjs-client)进行连接。

[Node.js wiki 上的其他模块列表](https://github.com/joyent/node/wiki/Modules#wiki-ws-ajax)

# sql - PostgreSQL：与日期时间之间

> ID：12425853
> 
> 赞同：18
> 
> 时间：2012-09-14T13:44:17.297
> 
> 标签：sql, postgresql, datetime, postgresql-8.4

我使用 PostgreSQL 8.4.11 并发现奇怪的错误。当我查询时：

```
SELECT "documents_document"."given_on" 
FROM "documents_document" 
WHERE (EXTRACT('month' FROM "documents_document"."given_on") = 1
       AND "documents_document"."given_on" 
       BETWEEN '1-01-01 00:00:00' and '1-12-31 23:59:59.999999') 
ORDER BY "documents_document"."created_on" DESC 
```

我得到结果：

```
 given_on  
------------
 2002-01-16
 2011-01-25
 2012-01-12
 2012-01-12
 2012-01-12
 2012-01-20
 2012-01-19
 2012-01-13
 2012-01-31
 2012-01-16
 2012-01-31
 2012-01-12
 ... 
```

为什么？

我希望日期间隔为 1-01-01 ... 1-12-31。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-14T14:44:48.010

您期望`1-01-01 ... 1-12-31`...但是 PostgreSQL 应该如何知道您的意思？

输入字符串文字根据您当前会话的设置进行解释（`postgressql.conf`除非被否决，否则默认为常规设置）。特别是[`datestyle`](https://www.postgresql.org/docs/current/runtime-config-client.html#GUC-DATESTYLE)：

> `DateStyle`( `string`)
> 
> 设置日期和时间值的显示格式，以及解释模糊日期输入值的规则。由于历史原因，此变量包含两个独立的组件：输出格式规范（`ISO`、`Postgres`、`SQL`或`German`）和年/月/日排序的输入/输出规范（`DMY`、`MDY`或`YMD`）。这些可以单独设置或一起设置。关键字 `Euro`和`European`是`DMY`;的同义词 关键字`US`, `NonEuro`和`NonEuropean`是 的同义词`MDY`。有关详细信息，请参阅[**第 8.5 节**](https://www.postgresql.org/docs/current/datatype-datetime.html)。内置默认值为`ISO, MDY`，但 initdb 将使用与所选行为相对应的设置初始化配置文件`lc_time`语言环境。

（虽然输出格式主要由[`lc_time`](https://www.postgresql.org/docs/current/runtime-config-client.html#GUC-LC-TIME).）

在您的情况下，残缺的时间戳文字`1-12-31 23:59:59`显然被解释为：

```
D-MM-YY h24:mi:ss 
```

虽然您希望：

```
Y-MM-DD h24:mi:ss 
```

### 3个选项

1.  设置`datestyle`以便它以与您相同的方式解释文字。也许`ISO, YMD`？

2.  用于[`to_timestamp()`](https://www.postgresql.org/docs/current/functions-formatting.html)以明确定义的方式解释字符串文字 - 独立于其他设置。好多了。

    ```
     SELECT to_timestamp('1-12-31 23:59:59', 'Y-MM-DD h24:mi:ss'); 
    ```

3.  更好的是，对所有日期时间文字使用**ISO 8601 格式**( `YYYY-MM-DD`)。这是[**明确的并且独立于任何设置**](https://www.postgresql.org/docs/current/datatype-datetime.html#DATATYPE-DATETIME-DATE-TABLE)。

    ```
     SELECT '2001-12-31 23:59:59'::timestamp; 
    ```

### 重写查询

您的查询一开始就有问题。以不同方式处理范围查询。像：

```
SELECT d.given_on 
FROM   documents_document d
WHERE  EXTRACT('month' FROM d.given_on) = 1
AND    d.given_on >= '2001-01-01 0:0'
AND    d.given_on <  '2002-01-01 0:0'
ORDER  BY d.created_on DESC; 
```

或者，更简单：

```
SELECT d.given_on 
FROM   documents_document d
WHERE  d.given_on >= '2001-01-01 0:0'
AND    d.given_on <  '2001-02-01 0:0'
ORDER  BY d.created_on DESC; 
```

[PostgreSQL 9.2 或更新版本中的范围类型](https://www.postgresql.org/docs/current/rangetypes.html)可能很有趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T13:48:49.187

`SELECT '1-12-31 23:59:59.999999'::timestamp;`return `2031-01-12 23:59:59.999999`，显然 Postgres 不认为 year-without-century 作为日期中的第一个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T13:52:40.653

你没有说你想要什么格式。所以它返回了本机格式。也许你甚至认为每个人都像你一样表示时间？看看可能的格式。[http://www.postgresql.org/docs/8.2/static/functions-formatting.html](http://www.postgresql.org/docs/8.2/static/functions-formatting.html)

# algorithm - 对知道其先前的项目进行排序

> ID：12425856
> 
> 赞同：0
> 
> 时间：2012-09-14T13:44:33.833
> 
> 标签：algorithm

我有一套物品。每个项目都有一个 ID 和一个 PREVIOUS_ID 字段。如何有效地对它们进行排序并检测任何循环（错误情况）？

更复杂的是，我需要按单个序列对它们进行排序，但多个项目可能具有相同的 PREVIOUS_ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:48:33.823

随机选择一个，按照之前的ID路径，直到没有之前的项目。此时，如果没有剩余项目，则重新开始，选择以前未选择的项目开始。

始终维护一组已访问的项目，以便您可以检测周期。

# mysql - 在单个 SELECT 中使用多个 SUM，例如 foreach 循环或 CASE

> ID：12425858
> 
> 赞同：-1
> 
> 时间：2012-09-14T13:44:39.163
> 
> 标签：mysql

我有这个 MySQL 查询，它返回某个 Product_ID 的销售细分。

我想扩展此查询以包含多个 Product_ID。

继承人我有什么给我 1 Product_ID：

```
SELECT
o.Customer_ID, o.CompanyName, cg.Category, o.Order_ID,
SUM(old.LineTotal) as TOTAL,
SUM(old.qty) as PID,
COUNT(o.Order_ID) as OIDs

FROM Orders o
LEFT JOIN Order_LineDetails old ON old.Order_ID = o.Order_ID
LEFT JOIN CustomerDetails cd ON o.Customer_ID = cd.Customer_ID
LEFT JOIN _CustomerCategory cg ON cg.Category_ID = cd.Category_ID

WHERE o.IsPENDING = 0
AND o.OrderPlaceServerTime >= '2012-1-1'
AND o.OrderPlaceServerTime <= '2012-9-1'
AND o.IsVOID = 0
AND old.Product_ID = '56789' 

GROUP BY o.Customer_ID
ORDER BY TOTAL DESC
LIMIT 10 
```

我正在尝试添加一些东西来做超过 1 个 Product_ID 并获取它们的 SUM。

这是我正在考虑的想法，但显然这不起作用。

```
(CASE WHEN old.Product_ID = '56789' 
        SUM(old.LineTotal) as TOTAL_56789,
        SUM(old.qty) as PID_56789) 
```

这将根据我追求的产品数量重复。

希望这是有道理的。

有什么建议么？

编辑：：

这是我想要返回的示例。

![在此处输入图像描述](../Images/c0ca5057d8b803aeeccffec62e02c4a9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:18:45.347

看看[这个](https://stackoverflow.com/questions/7674786/mysql-pivot-table)

基本上你想要数据透视表，但 mysql 不支持它。您可以在某种程度上强制它[在您的客户端应用程序中动态地编写您的查询](http://www.artfulsoftware.com/infotree/queries.php#78)。如果您对存储过程有更多经验，可以尝试[自动版本](http://www.artfulsoftware.com/infotree/queries.php#523)。

# php - XOR 编码多字节字符串并保存到 MySQL 字段而不会丢失

> ID：12425860
> 
> 赞同：1
> 
> 时间：2012-09-14T13:44:43.767
> 
> 标签：php, mysql, varchar, xor, multibyte

我目前正在使用[这个函数](https://stackoverflow.com/a/7548861/266561)来混淆 MySQL 中的字段值并保护它不被直接转储。一切正常，值存储正确，但是当我尝试**存储多字节字符串**时会发生什么？

这是一个示例，让我们尝试对字符串*álex*进行编码：

```
<?
$v = xorencode('álex');
// step 1 - encode
echo $v."\n";
// step 2 - decode
echo xorencode($v);
?> 
```

效果很好，我第一次看到一些混淆的字符串，然后我又看到了*álex*。现在，如果我尝试将其保存在 MySQL 表的**VARCHAR**字段中，然后选择它 - 我不再有 utf 字符串，而是以*gllex*的形式返回。

注意，MySQL 表和字段排序规则是 utf8_general_ci，文件是 UTF-8，`SET NAMES utf8`连接后是 i。有什么解决方法吗？

谢谢

# amazon-mws - 亚马逊 MWS API - 我如何获取 detailpageurl、产品评论、总结果数

> ID：12425862
> 
> 赞同：2
> 
> 时间：2012-09-14T13:44:46.590
> 
> 标签：amazon-mws

我已经集成了亚马逊 MWS api。为了从亚马逊搜索匹配的产品，我使用 ListMatchingProducts 作为操作。我收到了 XML 格式的响应，但采用 XML 格式 亚马逊 MWS API 未提供某些信息，还有其他方法可以获取吗？以下信息无法从 api 响应 xml 中获取。

1.  我们如何在第一页之外获得更多页面的结果？现在我们只得到第一个。

2.  我们找不到产品的大图，只能获取小图

3.  我们找不到产品的 detailpageurl。

4.  我们从哪里得到描述？我们现在唯一能够提取的是产品“功能”，但没有描述。

5.  你如何按亚马逊节点搜索？我们看到的只是按关键字搜索，但我们在旧的 Amazon PA-API 中一直使用节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T12:11:55.183

对于较大的图像，您可以将图像名称中“_SL”后面的数字替换为所需的宽度。即：对于 400 像素宽度的图像， *SL160* .jpg 变为*SL400* .jpg。

可以通过将 ASIN 附加到 [http://www.amazon.com/dp/来构建详细信息页面 URL 的快速版本](http://www.amazon.com/dp/)

我认为您想要的其他功能无法通过 MWS 产品 API 获得。

# mysql - Mysql 版本 (0.3.11) 不附带 Activerecord

> ID：12425863
> 
> 赞同：0
> 
> 时间：2012-09-14T13:44:52.663
> 
> 标签：mysql, ruby-on-rails-3

我有一个使用 rails 3.0.9 的旧 rails 项目，我正在尝试使用 rails s 运行它。看来，当我这样做时，会出现以下错误：

![命令提示符](../Images/f0ef2d1ac10888b1eac5bb3450c53cca.png)

你会看到它说我安装的当前适配器不受foregner支持。我已将我的 gemfile 更新为如下所示：

```
gem 'rake', '0.9.2.2'
gem 'mysql2'
gem 'rails', '3.0.9'
gem "acl9"
gem 'foreigner'
gem 'devise'
gem 'will_paginate', '3.0.pre2'
gem 'jquery-rails'
gem 'lazy_high_charts'
gem 'client_side_validations'
gem 'carrierwave'
gem 'tiny_mce'
#gem 'devise_security_extension'
#gem 'rails_email_validator'
#gem 'easy_captcha'

group :development do
  gem 'rspec-rails', '2.6.1'
  gem 'jspec'
  gem 'faker', '0.3.1'
  gem 'rspec'
  gem 'annotate'
end

group :test do
  gem 'rspec-rails', '2.6.1'
  gem 'spork', '0.9.0.rc8'
  gem 'webrat'
  gem 'autotest-growl'
  gem 'autotest-rails'
  gem 'autotest', '4.4.6'
  gem 'autotest-rails-pure', '4.1.2'
  gem 'factory_girl_rails'
  gem 'ZenTest'
  gem 'test-unit'
end 
```

我似乎不明白为什么它会在命令提示符下说 gem 丢失了，当它存在时我需要将它添加到我的 gemfile 中。解决这个问题的最佳解决方案是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:35:29.220

它不起作用，因为您正在尝试安装最新版本的 mysql2，它不适用于 rails 3.0.X。您可以通过以这种方式指定版本来解决此问题

gem 'mysql2', '< 0.3' 或 gem "mysql2", "~> 0.2.7"

但是要绕过外国人的依赖，这可能是这里的主要问题：

您可以将您的 rails 版本升级到 3.1.x 或更高版本，然后升级 gem 文件中的 mysql2。我看到你有一个最新版本的 ruby​​。

更新 gemfile 中的 gem 后，请确保在命令行中运行 bundle install ...在尝试启动服务器之前。此外，请确保在 config 文件夹中的 database.yml 文件中设置数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T07:51:29.827

从以下位置编辑您的 config/database.yml 文件：

```
adapter: mysql 
```

到

```
adapter: mysql2 
```

# php - 在 php 或 javascript 中将浏览器置于所有窗口/应用程序的前面

> ID：12425872
> 
> 赞同：0
> 
> 时间：2012-09-14T13:45:32.697
> 
> 标签：php, javascript, jquery

我正在用 php 和 javascript 开发一个页面，如果他们没有在 10 分钟内提交页面，我需要能够通知用户，为此我需要将浏览器放在运行在所有其他应用程序前面机器。

有没有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:46:23.643

幸运的是，您通常不能这样做。:)

PHP 是一种服务器端语言，因此出于显而易见的原因它不能做这样的事情。

你*所*能做的就是调用`window.focus();`JavaScript 并希望它不会在用户的浏览器中被禁用 - 例如，在 Firefox 中它默认是禁用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:50:39.347

如果您是愿意安装脚本的用户，您可以尝试[growl](http://ajaxian.com/archives/growls-for-windows-and-a-web-notification-api)。然后，您可以使用 javascript api 创建一些通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T14:02:33.583

好的，没有 html5 并且用户也确认了安全弹出窗口，不可能将窗口放在前面，至少在 IE 上它曾经在有弹出窗口时显示闪烁，但在 chrome 中，每个都在单独的进程上运行，你不会甚至注意到眨眼。

而且它不是移动设备，您可以在其中使用来自服务器的推送通知来恢复您的应用程序

# extjs - 如何在 ExtJS TreeStore 中重新加载具有不同参数的节点？

> ID：12425874
> 
> 赞同：1
> 
> 时间：2012-09-14T13:45:48.757
> 
> 标签：extjs, extjs4.1

我试过这样的事情：

```
oStore.load( {
  node  : oRecord.parentNode,
  limit : 20,
  page  : nPage,
  start : 20 * nPage,
  params: {
    parent: strNodeId
  }
} ); 
```

但是即使在我删除了`oRecord.parentNodes`.

只是`beforeload`事件被触发，`load`事件永远不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:44:08.223

您应该检查是否有任何`beforeload`回调返回`false`。这将导致加载操作停止。

# android - 如何设置 ListView 选择颜色直到下一次选择？

> ID：12425879
> 
> 赞同：0
> 
> 时间：2012-09-14T13:46:03.207
> 
> 标签：android, listview, select, background, background-color

我有这个`Selector`作为`listSelector`一个`ListView`。此外，在 ListView 中，我设置了

```
android:choiceMode="singleChoice"
android:listSelector="@drawable/list_selector"
android:background="@android:color/transparent"
android:cacheColorHint="@android:color/transparent" 
```

当用户触摸 的任何项目时，它会呈现正确的蓝色`ListView`，但一旦用户移开手指，它就会变回黑色。我希望所选项目保持蓝色，直到并且除非用户触摸任何其他项目。

```
<?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item 
     android:state_selected="false"
        android:state_pressed="false" 
        android:drawable="@color/grey" />
    <item android:state_pressed="true" 
        android:drawable="@color/blue" />
    <item android:state_selected="true"
     android:state_pressed="false" 
        android:drawable="@color/blue" />
    </selector> 
```

我需要做什么改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:50:52.217

您必须`android:choiceMode`设置`ListView`to `singleChoice`。此外，您应该设置`android:listSelector`为您已经实现的选择器，并`android:background`从 的项目中删除该选择器（或任何其他可绘制对象），`ListView`以便它们的背景是透明的。

除此之外，您应该扩展您的选择器以响应`android:state_checked`并注册`OnItemClickListener`这样的：

```
listView.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        listView.setItemChecked(position, true);
    }

}); 
```

您用于列表项的顶级视图组件需要实现 interface `Checkable`。请参阅[http://developer.android.com/reference/android/widget/Checkable.html](http://developer.android.com/reference/android/widget/Checkable.html)以获取已开箱即用的类列表。如果你只想显示文本`CheckedTextView`应该为你做。否则，如果使用自定义视图，您必须自己实现此接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T06:55:37.587

在这种情况下，我认为您需要从`ArrayAdapter`课堂上进行管理。在那里你必须记住最后点击的项目视图和位置。

基本思想是`onListItemClick`将点击的位置和项目视图传递给适配器，我们将使用您喜欢的颜色设置它的背景，并将最后选择的查看背景颜色更改为默认颜色。

```
 public class SampleAdapter extends ArrayAdapter<Object> {

    private int mSelection = 0;

    public SampleAdapter(Context context, int resource, int textViewResourceId,
            List<Object> objects) {
        super(context, resource, textViewResourceId, objects);
    }

    public void setSelection(int mSelection, View selectedItemView) {
        this.mSelection = mSelection;

        if (selectedItemView!= null && lastSelectedRow != null
                && selectedItemView!= lastSelectedRow) {
            lastSelectedRow
                    .setBackgroundResource(R.drawable.bg_normal);
            selectedItemView
                    .setBackgroundResource(R.drawable.bg_selected);
        }

        this.lastSelectedRow = selectedItemView;

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        //Usual code logic here....

        if (mSelection == position) {
            mViewHolder.mRootView
                    .setBackgroundResource(R.drawable.bg_selected);
            lastSelectedRow = mViewHolder.mRootView; 
        } else {
            mViewHolder.mRootView
                    .setBackgroundResource(R.drawable.bg_normal);
        }

        return view;
    }

    private static class ViewHolder {
        TextView name;
        View mRootView;
    }
} 
```

在列表项单击上，您需要将单击的项目和位置传递给适配器。

```
public void onItemClick(AdapterView<?> arg0, View listItemView,
        int position, long id) {

    if(myAdapter != null )
    {
        myAdapter.setSelection(position,listItemView);
    }
} 
```

如果你想从其他点调用这个集合选择，你可以这样调用它。

```
myAdapter.setSelection(position,mListViwe.getChildAt(pos));
mListViwe.setSelectionFromTop(position, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:56:45.053

在你的代码中试试这个

```
StateListDrawable states = new StateListDrawable();
    states.addState(new int[] {android.R.attr.state_pressed},
        getResources().getDrawable(R.drawable.pressed));
    states.addState(new int[] {android.R.attr.state_focused},
        getResources().getDrawable(R.drawable.focused));
    states.addState(new int[] { },
        getResources().getDrawable(R.drawable.normal));
    imageView.setImageDrawable(states); 
```

它可以帮助你....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T13:50:16.800

在 中`onListItemClick`，强制查看状态：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
        v.setSelected(true);
} 
```

# java - 如何使用 AdapterView.INVALID_ROW_ID？

> ID：12425882
> 
> 赞同：1
> 
> 时间：2012-09-14T13:46:26.207
> 
> 标签：java, android

对不起，这个愚蠢的问题......

但我不明白我应该如何正确写作。这是我想要的：

```
long selectedCartId = cartsSpinner.getSelectedItemId();
if (selectedCartId !=  AdapterView.INVALID_ROW_ID)
     CartDataSource.insertProduct(selectedCartId, prodId, count); 
```

但是eclipse为if条件生成错误：

> 不兼容的操作数类型 long 和 Class<INVALID_ROW_ID>

* * *

[**INVALID_ROW_ID**](http://developer.android.com/reference/android/widget/AdapterView.html#INVALID_ROW_ID)声明如下：

```
public abstract class android.widget.AdapterView extends android.view.ViewGroup {

// <Skipped>

    public static final long INVALID_ROW_ID = -9223372036854775808L;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:03:34.363

因此，问题出在未清除的项目中。

# asp.net-mvc-3 - Razor：隐藏密码控制（2页注册）

> ID：12425886
> 
> 赞同：4
> 
> 时间：2012-09-14T13:46:40.383
> 
> 标签：asp.net-mvc-3, razor

我正在 razor 中创建一个 2 页的注册过程。这里的困难是在第一页上收集数据（用户名、密码等）并使用隐藏的输入变量将第一页的数据存储在第二页上。

这是我的隐藏代码：

```
<div id="hidden vals" style="display:none;">
    @Html.HiddenFor(model => model.userRegisterModel.UserName)
    @Html.HiddenFor(model => model.userRegisterModel.studentFirstName)
    @Html.HiddenFor(model => model.userRegisterModel.studentlastName)
    @Html.HiddenFor(model => model.userRegisterModel.Email)
    @Html.PasswordFor(model => model.userRegisterModel.Password)
    @Html.PasswordFor(model => model.userRegisterModel.ConfirmPassword)

</div> 
```

挑战在于密码和确认密码。我不想使用密码类型的隐藏字段，但我希望我的密码保留但不在页面源中显示。但是“PasswordFor”有一个附带问题，它会“减少”值并使用户重新填充。

所以要重新声明，我需要我的密码并确认持久，最好不要向用户显示。重要的是，我需要我的密码并确认未从“查看源代码”中隐藏的值

我的替代策略是使用会话变量来存储所有“第 1 页值”，但这还有其他一些我希望避免的陷阱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:58:19.463

我可以建议一种不同的方法吗？而不是两页，使用两个DIV。

您仍然可以利用验证（客户端和远程）之类的东西，并确保用户在没有有效表单的情况下无法前进。如果需要为第二个页面加载和/或创建某些内容，您可以使用 Ajax 执行此操作，并且您的表单仍然可以存在于页面上，而无需使用隐藏字段或会话变量/超时。

```
<form ...>
  <div id="part-one">
    <!-- content... -->
  </div>

  <div id="part-two" style="display:none;">
    <!-- content... -->
  </div>

  <div>
     <button type="button" id="prev-div">Previous</button>
     <button type="button" id="next-div">Next</button>
     <button disabled="disabled" id="next-div">Submit</button>
  </div>
</form> 
```

按钮保持可见，您可以使用 jQuery 切换它们的状态，如果您的需求更改了对模型类和视图的更新（如果您正在使用模型绑定）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:51:03.077

是的。将它们保留在 Session 中并在第二页/操作方法中访问它。

并***确保在***读取该特定 Session 变量以进行持久存储后清除该变量。

# vb.net - 不支持许多 VB 方法的可移植类库

> ID：12425887
> 
> 赞同：1
> 
> 时间：2012-09-14T13:46:40.643
> 
> 标签：vb.net, dll, portable-class-library

我正在使用 VB.Net DLL 并将其转换为可移植类库。一旦我把所有的类都移到了 PCL 的新项目中，Visual Studio 就开始为许多我认为仍然可以正常工作的常见 VB 语法抛出错误。一些例子：

*   LCase
*   InStr
*   剩下
*   中
*   错误转到 0
*   呃

是否有可能只有一些选项或包括我需要让这些工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T14:05:29.603

您必须使用[可移植类库](http://msdn.microsoft.com/en-us/library/gg597391%28v=vs.100%29.aspx)支持的程序集方法（请参阅程序集部分）。您将能够找到不适合您的方法的等价物（例如 = SubString、ToUpper、ToLower、IndexOf 等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T15:42:59.413

您可以创建这些方法，这样您就不必更新大量遗留代码。其中大部分非常简单，最大的区别在于字符串函数，其中旧版 VB 函数使用基于 1 的索引，而 .Net 使用 0 索引。举个例子，这里是重新创建的 Mid 函数，其行为类似于 VB（在此处创建为扩展方法）：

```
 ''' <summary>
    ''' Simulates the same functionality provide by the traditional 1 based index Mid function.
    ''' </summary>
    ''' <param name="str"></param>
    ''' <param name="startPos"></param>
    ''' <param name="length"></param>
    ''' <returns></returns>
    ''' <remarks></remarks>
    <Extension()> _
    Public Function Mid(ByVal str As String, ByVal startPos As Integer, ByVal length As Integer) As String
        Return str.Substring(startPos - 1, length)
    End Function 
```

以下是您的列表和/或常用列表中的更多内容：

```
 ''' <summary>
    ''' Extension to the Visual Basic Left function
    ''' </summary>
    ''' <param name="str"></param>
    ''' <param name="length"></param>
    ''' <returns></returns>
    ''' <remarks></remarks>
    <Extension()> _
    Public Function [Left](ByVal str As String, ByVal length As Integer) As String
        Return str.Substring(0, length)
    End Function

    ''' <summary>
    ''' Extension to the Visual Basic Right function
    ''' </summary>
    ''' <param name="str"></param>
    ''' <param name="length"></param>
    ''' <returns></returns>
    ''' <remarks></remarks>
    <Extension()> _
    Public Function [Right](ByVal str As String, ByVal length As Integer) As String
        Return str.Substring(str.Length - length, length)
    End Function

    ''' <summary>
    ''' Determines whether a string is a numeric value.  This implementation uses Decimal.TryParse to produce it's value.
    ''' </summary>
    ''' <param name="str"></param>
    ''' <returns></returns>
    ''' <remarks></remarks>
    <Extension()> _
    Public Function [IsNumeric](str As String) As Boolean
        Dim result As Decimal = 0
        Return Decimal.TryParse(str, result)
    End Function

    <Extension()> _
    Public Function LCase(str As String) As String
        Return str.ToLower
    End Function 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T19:41:27.580

当使用可移植面向下级平台（.NET 4.0、Silverlight、Windows Phone、Xbox）时，我们不支持 Microsoft.VisualBasic.dll 中公开的大部分功能。

相反，我们使用嵌入式运行时功能。这会将传统上在 Microsoft.VisualBasic.dll 中找到的某些功能嵌入到生成的二进制文件本身中。此页面上的**/vbruntime***部分下列出了受支持的功能：http: [//msdn.microsoft.com/en-us/library/bb531259.aspx](http://msdn.microsoft.com/en-us/library/bb531259.aspx)。

仅针对 .NET 4.5 和 Windows 应用商店应用程序时，您*可以*访问传统的 Microsoft.VisualBasic.dll。

作为一种解决方法，为了帮助您迁移到可移植性，您可以定义自己的模块，将旧的 VB 函数连接到它们的 .NET 等效项：

```
Public Module VisualBasicBridge
    Public Function LCase(value As String) As String

        Return value.ToLower()
    End Function
End Module 
```

至于 On Error，我不知道在不提供您自己的 Microsoft.VisualBasic 实现并通过 /vbruntime switch/msbuild 属性传递它的情况下桥接该问题的好方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T13:51:16.627

所有人都认为这些方法位于 Microsoft.VisualBasic 命名空间中。您可以将它们替换为标准的：

LCase => string.ToLower() InStr => string.IndexOf() ....

用常规的 try/catch 替换“on error”

此致

# asp.net - 哪个 Membership Provider 实现了存储在 web.config 中的用户？

> ID：12425890
> 
> 赞同：11
> 
> 时间：2012-09-14T13:47:31.110
> 
> 标签：asp.net, membership-provider

有一个代码盲时刻。

ASP.NET 4.0。

网络配置：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <authentication mode="Forms">
      <forms name="DataViewer" loginUrl="login.aspx">
        <credentials passwordFormat="Clear">
          <user name="devuser" password="test" />
        </credentials>
      </forms>
    </authentication>
    <authorization>
      <deny users="?" />
    </authorization>
  </system.web> 
```

和一个登录控件：

```
 <asp:Login ID="login" runat="server" /> 
```

如果我输入用户名和密码，然后单击登录，它会挂起。

如果我中断，我可以在 call`login.AuthenticateUsingMembershipProvider()`中间的调用堆栈中看到`SqlMembershipProvider.ValidateUser()`。这个项目根本没有定义或涉及数据库，我也没有指定应该使用 SqlMembershipProvider。

所以我的问题是，我应该使用什么成员资格提供程序来让 ASP.NET 使用`<credentials>`元素中的用户名和密码`web.config`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-14T14:07:27.100

我很惊讶考虑到框架设计者是如何费尽心思定义一个`<credentials />`他们没有实现任何代码来使用它的元素。

[我在这里](http://leastprivilege.com/2005/07/27/asp-net-membershipprovider-for-web-config/)找到了一种可行的实现，我已经修复并包含在下面。`MembershipProvider`throw的所有其他成员`NotImplementedException`。

```
using System.Configuration;
using System.Web.Configuration;
using System.Web.Security;

public class WebConfigMembershipProvider : MembershipProvider
{
    private FormsAuthenticationUserCollection _users = null;
    private FormsAuthPasswordFormat _passwordFormat;

    public override void Initialize(string name,
      System.Collections.Specialized.NameValueCollection config)
    {
        base.Initialize(name, config);
        _passwordFormat = getPasswordFormat();
    }

    public override bool ValidateUser(string username, string password)
    {
        var user = getUsers()[username];
        if (user == null) return false;

        if (_passwordFormat == FormsAuthPasswordFormat.Clear)
        {
            if (user.Password == password)
            {
                return true;
            }
        }
        else
        {
            if (user.Password == FormsAuthentication.HashPasswordForStoringInConfigFile(password,
                _passwordFormat.ToString()))
            {
                return true;
            }
        }

        return false;
    }

    protected FormsAuthenticationUserCollection getUsers()
    {
        if (_users == null)
        {
            AuthenticationSection section = getAuthenticationSection();
            FormsAuthenticationCredentials creds = section.Forms.Credentials;
            _users = section.Forms.Credentials.Users;
        }
        return _users;
    }

    protected AuthenticationSection getAuthenticationSection()
    {
        Configuration config = WebConfigurationManager.OpenWebConfiguration("~");
        return (AuthenticationSection)config.GetSection("system.web/authentication");
    }

    protected FormsAuthPasswordFormat getPasswordFormat()
    {
        return getAuthenticationSection().Forms.Credentials.PasswordFormat;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T14:27:25.320

我不确定你是否尝试过，但是......

[FormsAuthentication.Authenticate](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.authenticate.aspx)负责为您执行此操作（尽管它现在已被弃用，因为推荐的行为是使用 Membership 对象）

来自 MSDN：

> Authenticate 方法验证存储在应用程序配置文件的凭据部分中的用户凭据。或者，您可以使用 ASP.NET 成员资格来存储用户凭据并调用 ValidateUser 来验证凭据。

您还可以删除成员资格提供程序（因为即使您没有在 web.config 上声明它们，它们也是从 machine.config 文件继承的）

```
 <membership>
    <providers>
      <remove name="AspNetSqlMembershipProvider"/>
    </providers>
  </membership> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T13:59:56.737

您将需要为此编写自己的提供程序。[获取MSDN 文档](http://msdn.microsoft.com/en-us/library/aa479021.aspx#aspnetprovmodvb_prt1_topic5)`ReadOnlyXmlMembershipProvider`中的示例并将其更改为从而不是外部 XML 文件读取用户和凭据应该相对简单。`web.config`

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-14T13:55:04.710

尝试使用此方法。我希望它有所帮助。[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.onauthenticate.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.onauthenticate.aspx)

# php - 使用 iframe 将表单发送到 php

> ID：12425893
> 
> 赞同：0
> 
> 时间：2012-09-14T13:47:35.863
> 
> 标签：php, javascript, ajax, forms, iframe

我正在编写一个表单，用户可以在其中发送信息并附加一个文件，该文件通过电子邮件发送给某些用户。

我已经构建了一个 HTML 表单，并且因为我不想刷新页面，所以我通过隐藏的 iframe 发送了它。

一切正常，直到我在表单中添加了验证码。现在我有一个问题。我将生成的验证码字符串存储在主表单页面的会话中。但是因为表单是从 iframe 发送的，所以我认为 PHP 正在创建一个新的会话，它是空的。

谁能建议我如何将 iframe 和我的表单页面连接到相同的会话？我想提一下，当用户点击发送表单时，iframe 是由 JavaScript 动态创建的。

谢谢你的建议！

**编辑：** 我的代码 HTML 表单页面：

```
<input type="text" name="name"/><br />
<input type="text" name="email"/><br />
<textarea name="message"></textarea><br />
<input type="file" name="file"/><img id="captchaimg" src="http://xxx/mailsend.php?application=xxx&image=get"/><input type="text" name="captcha"/>
<input type="button" id="send" value="send"/> 
```

我的 JS 文件：

```
function sendFromIframe() {
    if ($('#hiddeniframe').length == 0) {
        var iframe = ('<iframe name="hiddeniframe" id="hiddeniframe" src="" border="0" height="0" width="0" style="display:none"></iframe>');
        $("body").append(iframe);
    }
    setTimeout(function() {
        var form = $('#feedback');
        form.attr('target', 'hiddeniframe');
        form.attr('method', 'POST');
        form.attr('action', 'http://xxx/mailsend.php');
        form.attr("enctype", "multipart/form-data");
        form.attr("encoding", "multipart/form-data");
        form.submit();
        wait4refresh();
    }, 550);
}
function wait4refresh(counter){
    var counter = counter || 0;
    var bolean = false;
    var request = $.ajax({
        async: false,
        url: 'http://xxx/mailsend.php',
        type: 'GET',
        data: 'application=' + $('input[name="application"]').val() + '&issend'
    });
    request.done(function(msg){
        if (msg == 'true'){
            bolean = true;
        }
    });
    if (bolean){
        refreshCaptcha();
    }
    else if (counter > 10){
        return false;
    }
    else{
        setTimeout(function(){
            counter++
            wait4refresh(counter);
        },500);
    }
}
function refreshCaptcha() {
    var application = $('input[name="application"]').val();
    d = Math.round(Math.random() * 100);
    $('#captchaimg').attr('src', 'http://xxx/mailsend.php?application=' + application + '&image=get' + '&' + d);
} 
```

和 PHP 文件：

**当我尝试在此处添加我的 PHP 代码时，我收到错误“由对等方重置连接”。我能做些什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:54:13.883

您不能只创建一个`<div id='htmlform'> </div>`并使用 jquery 使其可见/不可见吗？

# objective-c - 核心数学 API

> ID：12425899
> 
> 赞同：0
> 
> 时间：2012-09-14T13:48:01.500
> 
> 标签：objective-c, libraries

在此处的 Apple 开发人员参考 (https://developer.apple.com/library/ios/navigation/) 网站上，我正在寻找可用的核心数学函数集的 api（以及如何调用它们），即只是诸如 sin、cos、pow(a,b) 等之类的东西。

我在文档中找不到全部列出的页面。

有人可以帮忙吗。抱歉，如果这是一个愚蠢的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:50:01.167

这些只是很好的旧 C 数学函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:17:16.573

我收到的最佳答案来自 Cyrille。我不知道如何归因它，所以我把它粘贴在这里。也许主持人可以改善这种情况。

您可以尝试使用 AppleDoc 编译一些文档。– 西里尔 9 月 15 日 22:42

# javascript - 如何以正确的方式获取广告的 javascript 错误？（堆栈跟踪）

> ID：12425901
> 
> 赞同：0
> 
> 时间：2012-09-14T13:48:13.187
> 
> 标签：javascript, logging, error-handling, trace, ads

我们正在运行一个网站，目前通过将它们推送到日志数据库来跟踪所有出现的 javascript 错误，如下所示：

```
window.onerror = function(errorMessage, url, line) {
      var loggerUrl = logger,
          parameters = "?description=" + escape(errorMessage)
          + "&amp;url=" + escape(url)
          + "&amp;line=" + escape(line)
          + "&amp;parent_url=" + escape(document.location.href)
}); 
```

这对于我们自己造成的 javascript 错误很有效，但我们似乎不可能更好地了解所有（我每天谈论 100k+ 次）错误，这些错误是由一些以肮脏方式编写的广告引起的。

我尝试了 tracekit.js 和 stacktrace.js，但我无法让它正常运行以提供有关错误的更多信息。

广告以正常方式实施（从广告服务器重定向到广告服务器 1-3 次，直到我们最终显示广告）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:48:10.210

如果您已经在记录错误，但想要更多详细信息，您可以尝试[Muscula](http://muscula.com)，它会自动插入 try catch，这通常会为错误提供真正的调用堆栈等。（不是每次）

披露：我是Muscula的创造者。

# symfony - 多个实体管理器

> ID：12425906
> 
> 赞同：0
> 
> 时间：2012-09-14T13:48:41.853
> 
> 标签：symfony, doctrine

我之前也发布过这个问题，我再次发布它，因为它还没有解决。

我在我的应用程序中使用 Symfony2，我需要创建两个数据库连接，即读取和写入，我搜索并轻松发现我们可以创建不同的实体管理器，我已经创建了这样的：

在控制器中制作对象

```
$emWrite = $this->getDoctrine()->getEntityManager('write');
$em = $this->getDoctrine()->getEntityManager(); 
```

当我坚持实体时，它给了我以下错误：

```
A new entity was found through the relationship &#039;
AppBundle\Entity\Follower#user&#039; that was not configured to cascade persist
operations for entity: adeel. Explicitly persist the new entity or configure
cascading persist operations on the relationship. If you cannot find out which
entity causes the problem implement AppBundle\Entity\User#__toString()
to get a clue. (500 Internal Server Error) 
```

我已经尝试过很多事情，比如在所涉及的实体的双方都提供持久属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:52:34.537

您的问题与多个实体管理器无关，而是与您出于关系目的而未在班级中设置的选项有关。

我对您的实体没有太多详细信息，但我可以建议您以这种方式修改关系

```
<?php
class User
{
    //...
    /**
     * Bidirectional - One-To-Many (INVERSE SIDE)
     *
     * @OneToMany(targetEntity="Comment", mappedBy="author", 
                  cascade={"persist","remove"})
     */
    private $commentsAuthored;
    //...
} 
```

`cascade={"persist","remove"}`你要找的东西在哪里。

# soap - Magento SOAP 2 API 致命错误：程序“登录”不存在

> ID：12425909
> 
> 赞同：5
> 
> 时间：2012-09-14T13:48:52.517
> 
> 标签：soap, magento-1.7

我收到：致命错误：第 832 行的 /chroot/home/mystore/mystore.com/html/lib/Zend/Soap/Server.php 中不存在过程“登录”

这是错误的来源

```
$soap = $this->_getSoap();

    ob_start();
    if($setRequestException instanceof Exception) {
        // Send SOAP fault message if we've catched exception
        $soap->fault("Sender", $setRequestException->getMessage());
    } else {
        try {
            $soap->handle($request);
        } catch (Exception $e) {
            $fault = $this->fault($e);
            $soap->fault($fault->faultcode, $fault->faultstring); 
```

关于如何修复错误的任何想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T21:57:23.350

我遇到了同样的问题，我解决它的方法是转到 System/Configuration/Magento Core API 并将值 WS-I Compliance 设置为“No”。
我正在使用使用 Magento V2 API 的 WebService，我不记得是否使用此值生成 Web 引用作为“是”；我正在使用 VS 2010 使用 WS C#。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-24T22:20:45.830

我有类似的问题，我不想更改 API 版本。删除 WSDL 缓存对我有帮助。

运行此命令以获取 WSDL 缓存文件夹：

```
php -i | grep soap 
```

从结果中您可以看到 WDSL 缓存已启用并存储在 /tmp 中：

```
soap
soap.wsdl_cache => 1 => 1
soap.wsdl_cache_dir => /tmp => /tmp
soap.wsdl_cache_enabled => 1 => 1
soap.wsdl_cache_limit => 5 => 5
soap.wsdl_cache_ttl => 86400 => 86400 
```

删除缓存并再次运行：

```
sudo rm -rf /tmp/* 
```

我在这篇文章中找到了线索 - [http://artur.ejsmont.org/blog/content/php-soap-error-procedure-xxx-not-present](http://artur.ejsmont.org/blog/content/php-soap-error-procedure-xxx-not-present)

# php - 将图像链接重定向到 php 文件？

> ID：12425911
> 
> 赞同：1
> 
> 时间：2012-09-14T13:48:53.993
> 
> 标签：php, .htaccess, mod-rewrite

如何重新编写直接链接的图像链接以指向 php 文件？

从 http://...../picture.jpg 到 http://....../load.php?file=picture.jpg

可以使用 mod_rewrite 完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:50:42.277

是的，它可以做到。就像是：

```
RewriteRule ^(.*)\.jpg$ /load.php?file=$1 [L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T14:04:00.237

是的，这条规则：

```
RewriteRule ^(.+\.jpg)$ /load.php?file=$1 [L] 
```

如果要重定向所有图像，可以添加其他扩展：

```
RewriteRule ^(.+\.(jpe?g|png|gif|bmp))$ /load.php?file=$1 [L] 
```

# ios - iOS 缩放我的网页

> ID：12425918
> 
> 赞同：2
> 
> 时间：2012-09-14T13:49:06.847
> 
> 标签：ios, mobile-safari

这令人沮丧，我已经看到并尝试了很多答案，但当我在 iOS 上查看时，我的网页仍然会出现缩放效果。我已经尝试了各种视口设置，但初始视图始终是缩放的。

这是实验链接。该页面有一个固定的页眉和页脚，在网络浏览器中看起来和功能都很好，但在 iOS 中它看起来被放大了。如果我双击，它会恢复所需的视图。

[http://jbrubaker.fatcow.com/dealer/index2.html](http://jbrubaker.fatcow.com/dealer/index2.html)

视口设置：

是 CSS 问题吗？

固定元素问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:13:54.890

假设您正在使用 UIWebView 查看站点。

将 UIWebView 的 BOOLEAN [scalesPageToFit](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instp/UIWebView/scalesPageToFit)属性设置为**YES**。

这有望解决您的问题。如果没有，请回复您的评论

# r - Predict 无法显示预测的标准误，其中 se.fit=TRUE

> ID：12425920
> 
> 赞同：2
> 
> 时间：2012-09-14T13:49:10.940
> 
> 标签：r, nls, predict

如帮助（predict.nls）中所说，当se.fit = TRUE时，应计算预测的标准误差。但是，我在下面的代码没有显示，而只是预测。

```
alloy <- data.frame(x=c(10,30,51,101,203,405,608,810,1013,2026,4052,6078,
                        8104,10130),
                    y=c(0.3561333,0.3453,0.3355,0.327453,0.3065299,0.2839316,
                        0.2675214,0.2552821,0.2455726,0.2264957,0.2049573,
                        0.1886496,0.1755897,0.1651624))
model <- nls(y ~ a * x^(-b), data=alloy, start=list(a=.5, b=.1))
predict(model, se=TRUE) 
```

我的代码有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T13:53:48.770

没有。`Description`部分的最后一行`?predict.nls`说：

```
At present ‘se.fit’ and ‘interval’ are ignored. 
```

也许包`deltaMethod`中的功能`car`会有所帮助。（`library("sos"); findFn("{delta method} nls")`...的结果）

**更新**：我第一次尝试时没有使用它`car::deltaMethod`。这是尝试使用包中的`deltavar`功能`emdbook`。这些`attach()/detach()`东西是一个可怕的黑客，但这是我可以快速开始工作的东西（`with`由于非标准评估，基于 - 的解决方案不起作用）。欢迎改进。）

```
 attach(alloy)
> deltavar(a*x^(-b),meanval=coef(model),Sigma=vcov(model))
 [1] 1.445018e-04 6.956934e-05 4.897363e-05 3.287949e-05 2.527709e-05
 [6] 2.379668e-05 2.487129e-05 2.626029e-05 2.762930e-05 3.300235e-05
[11] 3.933191e-05 4.317493e-05 4.588509e-05 4.795406e-05
> detach(alloy) 
```

注意事项：

*   这些是差异，而不是标准误差；
*   这是一个 delta 方法近似，在强非线性或强非高斯误差的情况下可能不准确（我相信 Brian Ripley 过去曾说过，他认为 delta 方法近似对于一般用途来说不够可靠，但是他是个纯粹主义者）
*   我还没有检查这是一个明智的答案

# iphone - 如何将值从 NSMutableDictionary 分配给 NSArray

> ID：12425923
> 
> 赞同：-1
> 
> 时间：2012-09-14T13:49:21.547
> 
> 标签：iphone, objective-c, nsmutablearray, nsmutabledictionary

我正在做 JSON 解析，我想在`UITableView`.

为此，我试图将解析后的数据分配给`NSMutableDictionary`to`NSArray`以显示在表格视图中，但数组返回`null`.

这里我的数组返回`null`值；

```
NSMutableDictionary *tempDict1;
NSArray *arr = [[tempDict1 valueForKey:@"rates"]  componentsSeparatedByString:@";"]; 
```

代码

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
{
    [connection release];

    NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    self.responseData = nil;

    //    NSArray *latestrates = [[responseString JSONValue] objectForKey:@"rates"];
    [responseString release];

    values = [responseString JSONValue];
    array = [[NSMutableArray alloc] init];
    array = [values valueForKey:@"rates"];
    NSLog(@"array values:--> %@",array);

    tempDict1 = (NSMutableDictionary *)array;  
    arr = [[tempDict1 valueForKey:@"rates"]  componentsSeparatedByString:@";"];
    NSString *subStar = @"=";
    NSMutableArray *arrTitle = [[NSMutableArray alloc] init];
    NSMutableArray *arrValues = [[NSMutableArray alloc] init];
    [arrTitle removeAllObjects];
    [arrValues removeAllObjects];
    for (int i=0; i<[arr count]-1; i++)
    {
        [arrTitle addObject:[[arr objectAtIndex:i] substringToIndex:NSMaxRange([[arr objectAtIndex:i] rangeOfString:subStar])-1]];
        [arrValues addObject:[[arr objectAtIndex:i] substringFromIndex:NSMaxRange([[arr objectAtIndex:i] rangeOfString:subStar])]];
        NSLog(@"arrTitle is:--> %@",arrTitle);
    }

    tempDict1 = (NSMutableDictionary*)[array objectAtIndex:0];
    array = [values valueForKey:@"rates"];
    NSLog(@"tempDict--%@",tempDict1);

    [arr retain];
    [tbl_withData reloadData];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:53:10.547

尝试将 connectionDidFinishLoading 中的第四行编辑为

```
values = [responseString JSONFragments]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:11:04.963

```
NSError *error = nil;
NSArray *array = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&error];
NSLog(@"Your data - %@",array); 
```

现在您可以根据数据格式获取它。

**编辑**

我想你也不知道如何获得`webResponse`.
所以这是一种获取方法`webResponse`- 首先`XML`在你的类中设置委托`ViewController.h`并声明一个`NSMutableData`全局

```
@interface ViewController : UIViewController<NSXMLParserDelegate>
@property(nonatomic, retain)NSMutableData  *responseData;
@end 
```

现在`responseData`在你的`ViewController.m`课上合成了这个

```
@synthesize responseData = _responseData; 
```

现在您可以`request`在服务器上发送`viewDidLoad:`方法，这取决于您要发送的方法。

```
-(void)viewDidLoad
{

    NSString *urlString = [NSString stringWithFormat:@"http://EnterYourURLHere"];

    NSURL *URL = [NSURL URLWithString:urlString];
    NSMutableURLRequest *urlRequest = [[NSMutableURLRequest alloc]init];
    [urlRequest setURL:URL];
    [urlRequest setHTTPMethod:@"POST"];
    [urlRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-type"];

    NSURLConnection *urlConnection = [[NSURLConnection alloc]initWithRequest:urlRequest delegate:self];
    if(!urlConnection)
    {
        [[[UIAlertView alloc]initWithTitle:@"OOoopppssS !!" message:@"There is an error occured. Please check your internet connection or try again." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil] show];
    }

}

#pragma mark - Parsing delegate methods

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    self.responseData = [[NSMutableData alloc]init];
    [self.responseData setLength:0];
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [self.responseData appendData:data];
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    //Now parse your data here -
    NSError *error = nil;
    NSArray *array = [NSJSONSerialization JSONObjectWithData:self.responseData options:NSJSONReadingMutableContainers error:&error];
    NSLog(@"Your data - %@",array);
} 
```

# ruby-on-rails - 在不知道密码的情况下更新配置文件

> ID：12425929
> 
> 赞同：1
> 
> 时间：2012-09-14T13:49:49.640
> 
> 标签：ruby-on-rails

使用 rails 3.2.8，我有一个应用程序，用户可以在其中登录和注销，并修改他们的个人资料。我正在使用 has_secure_password。

但是，管理员需要能够更改其个人资料的某些部分。显然，管理员不知道用户密码。

如何在不更改密码的情况下保存修改后的用户配置文件？只有管​​理员具有此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:54:02.680

尝试使用“ActiveAdmin”。

这是一个 Railscast 解释细节[http://railscasts.com/episodes/284-active-admin](http://railscasts.com/episodes/284-active-admin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:18:57.450

我假设您已经创建了 current_user 方法。

users_controller

```
before_filter :authorize!, only: [:edit, :update]

def edit

end

def update

end

private
def authorize!
  @user = User.find(params[:id])
  redirect_to root_url(status: :unauthorized) unless current_user && (current_user.eql?(@user) || current_user.role.eql?("admin"))
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T20:46:41.090

我最终解决了这个问题。我最终做的是在显示表单时将密码和确认设置为某个值（guid）。保存时，如果这些字段与该 guid 匹配，则控制器会从参数中删除这些字段。然后，模型仅在字段存在时验证（并保存）password_digest

# android - 带有圆角的 Android Sherlock 主题对话框

> ID：12425930
> 
> 赞同：1
> 
> 时间：2012-09-14T13:49:55.100
> 
> 标签：android, actionbarsherlock

我创建了一个具有自定义布局的活动，在清单文件中我将主题声明为

```
 android:theme="@style/Theme.Sherlock.Dialog" 
```

这使得活动弹出像一个对话框。我想要的是有圆角的对话框。

我有什么办法吗？

亲切的问候

# php - 分页和排序无法正常工作

> ID：12425940
> 
> 赞同：-1
> 
> 时间：2012-09-14T13:50:16.943
> 
> 标签：php, mysql

我对从数据库中检索的数据进行了分页。当我尝试分别对每个页面进行排序时，它不起作用。这就像它正在对整个数据块进行排序并将其分布在两个页面上。我需要分别对每一页的内容进行排序...

Q1：

```
SELECT `firstName`, `lastName`, `creationDate`, `applicationStatus` 
FROM student 
ORDER BY firstName ASC LIMIT 0 , 25 
```

Q2：

```
SELECT `firstName`, `lastName`, `creationDate`, `applicationStatus` 
FROM student 
ORDER BY firstName DESC LIMIT 25 , 25 
```

Q2 给了我一大块 Q1 的数据，但与 Q1 的顺序相反。我需要的是与 Q2 相同的输出，但以两种方式排序......而且它没有发生！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:52:30.347

那是因为你正在反转你的`ORDER BY`. 保持与 相同`Q1`。

```
SELECT `firstName`, `lastName`, `creationDate`, `applicationStatus` 
FROM student 
ORDER BY firstName ASC LIMIT 25 , 25 
```

您希望保持`ORDER BY`不变，因为这将确保您的偏移量 25 从您的 LIMIT 25 结束的地方开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T13:53:06.160

这就是 ORDER BY 子句的工作方式。如果您想对每个页面独立排序，您需要将其选择到一个临时表中并按其排序，或者在您的程序中对其进行排序。

# asp.net - 使用 ASP.NET 将空字符串（来自文本框）转换为 null

> ID：12425943
> 
> 赞同：1
> 
> 时间：2012-09-14T13:50:34.303
> 
> 标签：asp.net, ado.net, textbox, webforms, string

如果我没有在其中一个文本框中输入任何内容，ASP.NET 无法告诉一个空文本框并将其视为 null ...所以请任何人帮助我如何检测一个空文本框并将其设置为 null

我知道这段代码很好用

```
If MUSIC_TITLE.Text.Trim() = "" Then

MUSIC_TITLE.Text = Nothing

End If 
```

但我不能使用，因为我的应用程序中有很多表单，所以我需要一些东西或 ASP.NET 中存在可以处理这个的任何函数

这就是在请求中插入 sql server

```
"insert into Reunion values(" & Convert.ToInt32(ID_Reunion.Text) & ",'" & d.ToString("MM/dd/yyyy") & "'," & Convert.ToInt32(ID_Membre.Text) & ",'" & Type_Reunion.Text & "','" & Session("Nom_GIAC") & "')" 
```

和 tnks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:58:01.747

这听起来像是您正在尝试将文本框值直接存储在数据库中。

请**不要这样做**。如果您还没有，请了解**[SQL 注入](http://de.wikipedia.org/wiki/SQL-Injection)**的高风险安全威胁并参数化您的 INSERTS 和 UPDATES。

在设置参数之前，您可以`Nothing`根据需要将空字符串转换为。

```
Dim musicTitle as String = _
    If(String.IsNullOrWhiteSpace(MUSIC_TITLE.Text), Nothing, MUSIC_TITLE.Text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:58:26.473

在你的插入 sp 应该是这样的：

```
create procedure Insert(@test varchar(50)=NULL)
as
    begin
        update foo set testCol=@test
    end 
```

在 c# 中，在调用 sp 并添加参数时使用以下代码：

```
if(txt.Text!=String.Empty)
{
    cmd.Parameters.Add("@test",SqlDBType.Varchar,20).Value=txt.Text;
} 
```

# android - 如何使列表视图的某些项目不可点击？

> ID：12425949
> 
> 赞同：5
> 
> 时间：2012-09-14T13:50:46.803
> 
> 标签：android, android-listview

我有以下很容易理解的代码。我希望此列表视图的某些特定子项不可点击。

```
 ArrayAdapter<String> adapter =
      new ArrayAdapter<String>(this,R.layout.list_item,R.id.module_name_item, testdata);

    m_listview.setAdapter(adapter);

    Log.i("check","1");
    if(sectionAttempts.get(0).equals("0"))
    {

        m_listview.getChildAt(2).setEnabled(false);
        m_listview.getChildAt(3).setEnabled(false);
    }
    else
    {

        if(sectionAttempts.get(2).equals("0"))
        {

            m_listview.getChildAt(3).setEnabled(false);
        }

    } 
```

我收到错误

```
 m_listview.getChildAt(2).setEnabled(false); 
```

作为 java.lang.NullpointerException。我试图找到错误并使用 Log.i("check",m_listview.getChildCount()); 它显示0。所以我猜listview还没有创建！这怎么可能。

似乎是什么问题？感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-14T13:56:11.183

覆盖`areAllItemsSelectable()`方法。返回 false 表示所有项目都不可点击。

```
@Override
public boolean areAllItemsSelectable() {
    return false;
} 
```

然后覆盖下面的方法以返回不可点击的项目

```
@Override
public boolean isEnabled(int position) {
    if(position == your_item_pos) {
        return false;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-28T09:12:19.760

分享我的经验，以下是诀窍（视图指的是列表项视图）：

```
view.setEnabled(false);
view.setOnClickListener(null); 
```

*   通过覆盖该方法启用不起作用，因为该方法从未被调用过。
*   将 focusable 设置为 false 也不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T17:40:38.583

好像你没有初始化你的 ListView。如果您使用 ListActivity 或使用常规活动，则In `onCreate` Use 。`m_listview=getListView()``m_listview=findViewById(R.id...)`

# python - 无法让 ErrorResponse 在 Django Rest Framework 上工作

> ID：12425953
> 
> 赞同：2
> 
> 时间：2012-09-14T13:51:07.160
> 
> 标签：python, django, django-rest-framework

这有效：

```
class Right(ResponseMixin, View):
    """Right"""
    renderers = (JSONRenderer, XMLRenderer)

    def get(self, request, right_id):
        if not right_id:
            return self.render(
                Response(status.HTTP_400_BAD_REQUEST,
                         {"successful": False})
            ) 
```

这不会：

```
class Right(ResponseMixin, View):
    """Right"""
    renderers = (JSONRenderer, XMLRenderer)

    # @default_json
    def get(self, request, right_id):
        if not right_id:
            raise ErrorResponse(status.HTTP_400_BAD_REQUEST,
                                {"successful": False}) 
```

我收到一条错误消息，上面写着：

/v1/right/ 处的 ErrorResponse 未提供异常

或者：

```
Environment:
Request Method: GET
Request URL: http://127.0.0.1:8000/v1/right/

Django Version: 1.4.1
Python Version: 2.7.2
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles')
Installed Middleware:
('api.disable.DisableCSRF',
 'django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/Users/agoodattitude/Envs/locker-proxy/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/agoodattitude/Envs/locker-proxy/lib/python2.7/site-packages/django/views/generic/base.py" in view
  48\.             return self.dispatch(request, *args, **kwargs)
File "/Users/agoodattitude/Envs/locker-proxy/lib/python2.7/site-packages/django/views/generic/base.py" in dispatch
  69\.         return handler(request, *args, **kwargs)
File "/Users/agoodattitude/saff-py/locker-proxy/locker_proxy/api/resources.py" in get
  125\.                                                          error_message="right_id was not passed."))

Exception Type: ErrorResponse at /v1/right/
Exception Value: 
```

有人知道“不提供例外”是什么意思吗？

（注意，我稍微更改了代码以降低复杂性，但问题仍然存在......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:42:18.163

使用[http://django-rest-framework.org/api-guide/exceptions.html](http://django-rest-framework.org/api-guide/exceptions.html)，我将创建一个自定义异常，该异常将从 APIException 继承并引发该异常。这至少对我有用！

我知道我指的是新 2.x 版本的文档，而您指的是 0.4.x 版本，但它允许其他查看者关注该主题和文档，并且 APIException 类从那时起变化不大以前的版本。

# java - 将一类不同的项目导入我的项目

> ID：12425960
> 
> 赞同：4
> 
> 时间：2012-09-14T13:51:28.863
> 
> 标签：java, android

我有一个名为 A 的演示项目，具有 AA 类。我有另一个名为 B 的演示项目，它有一个 BB 类。我的问题是如何在 AA 类中导入 ClassBB??????

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T13:55:41.873

您要做的就是将项目 A 添加到项目 B 的构建路径中。如果您正在使用 eclipse，请检查此线程： [import from another java project in eclipse](https://stackoverflow.com/questions/3487585/import-from-another-java-project-in-eclipse)

在eclipse中右键单击项目b的文件夹->属性->构建路径->项目->添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:56:16.693

在 A 的构建路径中添加项目 B。如果您使用的是 Eclipse。`Right Click on Project->Java Build Paht->Projects->Add`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T13:56:31.200

您必须定义从项目 A 到项目 B 的依赖关系。

在eclipse中，右键单击项目A并选择“Propeties”。然后，在“Java build Path”中，选择“Project”选项卡。单击“添加”按钮并选择项目B。验证，您将能够在AA类中导入BB类

# android - Android - 为什么对话框不会在 dialog.dismiss() 时关闭

> ID：12425963
> 
> 赞同：4
> 
> 时间：2012-09-14T13:51:48.783
> 
> 标签：android, android-layout

我有一个奇怪的问题。当活动开始时，我会显示一个对话框，说明某些项目正在加载，如下所示：

```
Dialog dialog;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);        
    setContentView(R.layout.topic_edit);

    dialog = new Dialog (this);

    dialog.setContentView(R.layout.please_wait);
    dialog.setTitle("Loading The Comment.");

    TextView text = (TextView) dialog.findViewById(R.id.please_wait_text);
    text.setText("Please wait while the comment loads...");
    dialog.show(); 
```

我在类声明之前声明了 Dialog 对话框，然后每当我尝试用`dialog.dismiss();`它关闭它时都不会关闭。

这是please_wait.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<TextView
    android:id="@+id/please_wait_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>
</RelativeLayout> 
```

有人知道为什么对话框没有关闭`dialog.dismiss()`...我在调用返回后尝试在异步调用中关闭。但是我确实检查了，并且该行`dialog.dismiss()`已执行，只是由于某种原因没有关闭对话框。

这就是我尝试关闭对话框的方式：

```
@Override
protected void onPostExecute(String result) 
{
    dialog.dismiss();
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-14T14:30:10.663

确保在执行 dialog.dismiss 时它指向您创建的对话框。您将对话框作为类变量，并且很有可能在解雇时分配了另一个对话框。我有这个，结果发现关闭时的对话框变量不再指向我的实际对话框。

放置一个断点并查看创建/执行时的对话框变量是否仍然相同可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:26:03.613

尝试

```
Context mContext = getApplicationContext();
Dialog dialog = new Dialog(mContext); 
```

根据文档，它应该是声明对话框的正确方法。

# java - android应用程序中的终结器抛出未捕获的异常

> ID：12425964
> 
> 赞同：2
> 
> 时间：2012-09-14T13:51:51.280
> 
> 标签：java, android, listview, exception

再会。我尝试使用地图视图和列表视图创建活动。我做了什么

```
public class EnrouteActivity extends MapActivity {

    private ListView pointsListView;

    @Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.enroute_work_layout);
         this.pointsListView = (ListView)findViewById(R.id.listViewPoints);

         String[] items = new String[] {"Пункт А", "Пункт Б", "Пункт В"};
         //String[] items = this.GetAdapter();
         ArrayAdapter<String> adapter =
                  new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, items);
         this.pointsListView.setAdapter(adapter);
         this.pointsListView.setItemsCanFocus(false);
         this.pointsListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

     }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    private String[] GetAdapter(){

        Routes routes = new Routes();
        String[] items = new String[routes.points.size()];
        for(int i = 0; i<routes.points.size(); i++){
            items[i] = routes.points.get(i).name;
        }
        return items;

    } 
```

此布局的一部分

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="2.81"
    android:orientation="vertical" >

    <CalendarView
        android:id="@+id/calendar"

        android:layout_width="360dp"
        android:layout_height="234dp" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Список точек по маршруту"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ListView
        android:id="@+id/listViewPoints"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:choiceMode="multipleChoice" >
    </ListView>

</LinearLayout>

<LinearLayout
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"

    android:orientation="vertical" >

    <com.google.android.maps.MapView
        android:id="@+id/mapView"
        android:layout_width="604dp"
        android:layout_height="match_parent"
        android:layout_above="@+id/linearLayout1"
        android:layout_below="@+id/editText"
        android:apiKey="0FLRiHvfPXL2mqzQihPemczCJMUjk3TTD8umAPw"
        android:clickable="true"
        android:enabled="true" />

</LinearLayout> 
```

这是例外

```
09-14 13:39:02.331: E/MapActivity(9606): Couldn't get connection factory client
09-14 13:39:02.464: D/dalvikvm(9606): GC_CONCURRENT freed 783K, 6% free 15328K/16199K, paused 2ms+3ms
09-14 13:39:02.464: E/System(9606): Uncaught exception thrown by finalizer
09-14 13:39:02.464: E/System(9606): java.lang.IllegalStateException: Binder has been finalized!
09-14 13:39:02.464: E/System(9606):     at android.os.BinderProxy.transact(Native Method)
09-14 13:39:02.464: E/System(9606):     at android.database.BulkCursorProxy.close(BulkCursorNative.java:288)
09-14 13:39:02.464: E/System(9606):     at android.database.BulkCursorToCursorAdaptor.close(BulkCursorToCursorAdaptor.java:133)
09-14 13:39:02.464: E/System(9606):     at android.database.CursorWrapper.close(CursorWrapper.java:49)
09-14 13:39:02.464: E/System(9606):     at android.content.ContentResolver$CursorWrapperInner.close(ContentResolver.java:1591)
09-14 13:39:02.464: E/System(9606):     at android.content.ContentResolver$CursorWrapperInner.finalize(ContentResolver.java:1604)
09-14 13:39:02.464: E/System(9606):     at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:182)
09-14 13:39:02.464: E/System(9606):     at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
09-14 13:39:02.464: E/System(9606):     at java.lang.Thread.run(Thread.java:856) 
```

我找到[了这个](https://stackoverflow.com/questions/7265793/android-list-view-with-simplecursor-adapter-crashes-application-no-anr-shown)话题，但我不明白他们说什么语言=（（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:29:23.123

```
 Make sure that you are using proper "MD5 Fingerprint" of your current system   
      where you are developing app. Have look at below link,

      https://developers.google.com/maps/documentation/android/v1/mapkey 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T13:55:31.810

```
09-14 13:39:02.464: E/System(9606): java.lang.IllegalStateException: Binder has been finalized
android.database.BulkCursorToCursorAdaptor.close(BulkCursorToCursorAdaptor.java:133) 
```

在提交到列表视图之前，您的光标适配器似乎已关闭。仔细检查代码是否有任何`close()`调用。

# asp.net - 插入页面模板上的动态数据实体 Web 应用程序中的实体键属性验证

> ID：12425971
> 
> 赞同：1
> 
> 时间：2012-09-14T13:52:18.473
> 
> 标签：asp.net

我正在开发带有脚手架的 ASP.NET 动态数据实体 Web 应用程序。脚手架，页面模板，即。插入。编辑、详细信息、列表、实体模板 Web 用户控件都工作正常。

但我的问题是，我想在插入操作期间验证主键。现在说如果我将主键字段留空，它将使用必填字段验证器进行验证，我想以同样的方式验证主键字段中的重复条目。

我什至在数据模型中尝试了自定义验证器，但找不到合适的解决方案。

谁能帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:41:54.097

正如您告诉我您正在使用 MVC，我们在 MVC 中有一个**远程**验证，我们可以在我们的**模型类属性**中应用它。

让我来告诉你怎么做：

```
[Required]
[Remote("IsUserIDExist", "Account", ErrorMessage = "User ID Already Exist")]
[Display(Name = "Enter User ID")]
public string User_username { get; set; } 
```

这是我在**Account.cs**模型类中的属性。

**IsUserIDExist**是 **帐户**控制器中的操作。

现在让我向您展示**IsUserIDExist**操作。

```
public ActionResult IsDomainIDExist(string User_username)
{
    var users = from s in db.CreateUsers
                where s.User_username == User_username
                select s;
       if (users != null)
       {
         if (users.Count() != 0)
         {
            return Json(false, JsonRequestBehavior.AllowGet);
         }
         else
         {
           return Json(true, JsonRequestBehavior.AllowGet);
          }
       }
       else
        {
          return Json(true, JsonRequestBehavior.AllowGet);
        }
    } 
```

本准则自言自语。我想不需要任何解释。

最后但并非最不重要的。

您需要添加这些 javascript 文件才能使用远程验证

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript">    </script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-1.4.4.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.json-2.2.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script> 
```

希望这就是你要找的。

# php - Javascript和PHP上传系统

> ID：12425985
> 
> 赞同：3
> 
> 时间：2012-09-14T13:53:12.787
> 
> 标签：php, javascript, mysql, forms, file-upload

提前感谢您的帮助，我希望我对我的请求的解释是可以理解的。

我有一个网站，我在其中上传各种带有脚本、网站等的 HTML 页面，随着时间的推移，我发现这些页面很有用……目的是 1）为自己提供参考，以及 2）与他人分享我发现的内容。

该网站由2个部分组成。用于查找脚本的搜索页面和用于上传脚本的管理页面。上传的 HTML 文件被放置在我服务器上的“docs/”目录中，详细信息被添加到搜索页面的 MySQL 数据库中。

表格如下所示：

```
<form name="upload" enctype="multipart/form-data" action="includes/add.php" 
method="post" onsubmit="return validateForm();"> 

<label for="scriptname">Script Name</label><input class="inputarea" type="text" 
name="scriptname"><br> 
<label for="category">Category</label><input class="inputarea" type="text" 
name="category"><br> 
<label for="keywords">Keywords</label><input class="inputarea" type="text" 
name="keywords"><br>
<label for="content">HTML File</label><input class="inputarea" type="file" 
name="content"><br> 
<input class="submit" type="submit" value="Add"> 
</form> 
```

我的问题是... JavaScript 或 PHP 有什么方法可以执行以下操作：

1.  为上传的文件生成一个自动文件名（几个随机数字就可以了）
2.  在“脚本名称”输入字段中，在提交时添加文本，以便将脚本名称和文件名作为文本添加到数据库中的超链接......例如。当按下提交按钮时，将以下内容添加到数据库中：

    <a href="docs/automatic_file_name.html **">** " *scriptname_input* "</a>

粗体部分取自生成的文件名，斜体部分取自输入字段...

这样做的目的是为了在搜索结果中，当出现带有脚本名称的数据库列时，脚本名称是指向实际文件的链接。我已经准备好搜索功能，它可以从数据库条目中创建链接，但我只需要简化上传过程。

如果这是不可能的，是否有不同的方法来实现这一目标？

- -编辑 - -

感谢大家的帮助！非常感谢，我结合了一些建议来解决这个问题。但是，我将功劳归功于 Ibere，因为他的解决方案是最接近的。

这是我用于处理上传和数据库添加的“add.php”文件的最终代码，以防它再次出现（我对此表示怀疑）：P

```
<?php

$filename = md5($_FILES['content']['name']);
$labelForUrl = $_POST['scriptname'];
$url = "<a href=\"docs/$filename\">$labelForUrl</a>";
$target = "../docs/";

//This gets all the other information from the form
$name=$_POST['scriptname'];
$cat=$_POST['category'];
$key=$_POST['keywords'];
$link=$_POST['link'];
$file=($_FILES['content']['scriptname']);

// Connects to your Database
mysql_connect("localhost", "username", "password") or
die(mysql_error()) ;
mysql_select_db("scripts") or die(mysql_error()) ;

//Writes the information to the database
mysql_query("INSERT INTO scripttable (scriptname,category,keywords,link,content)
VALUES ('$url', '$cat', '$key', '$link', '$file')") ;

if(move_uploaded_file($_FILES['content']['tmp_name'], $target . $filename)) {
echo "The file ".  $labelForUrl. 
" has been uploaded";
}
else {
    echo "There was an error uploading the file, please try again!";
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:04:26.487

我建议使用 uploadify 进行上传。但是，按照你的要求做：

```
$randomFileName = rand(1000, 9999);
if (file_exists("upload/" . $_FILES["file"]["name"]))
  {
  echo $_FILES["file"]["name"] . " already exists. ";
  }
else
  {
  move_uploaded_file($_FILES["file"]["tmp_name"],
  "upload/" . $randomFileName . $_FILES["file"]["type"]);
  // update your db with the location
  $loc = "upload/" . $randomFileName . $_FILES["file"]["type"];    
  mysqli_query("insert into `myTable` (`loc`) values ('$loc')");
  echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
  }
} 
```

有关文件上传帮助，请查看[http://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T14:07:48.490

您可以对文件名执行类似的操作。

```
$filename = md5($_FILES['content']['name']);

$labelForUrl = $_POST['scriptname']; 
```

md5 不是随机的，但足以为文件名生成不可读的字符串。
然后你可以创建一个这样的网址

```
<a href="docs/<?php echo $filename; ?>" ><?php echo $labelForUrl; ?></a> 
```

希望这可以帮助。

编辑：我忘记将扩展名添加到文件名。所以正确的代码应该是这样的：

```
$filename = md5($_FILES['content']['name']).$_FILES['content']['type'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T14:01:17.617

如果您知道 codeigniter（PHP 框架），这很容易。

您可以使用[上传类](http://codeigniter.com/user_guide/libraries/file_uploading.html)

您可以轻松创建表单并提交它们并显示它们。

我会那样做。如果你熟悉 MVC，你可以在 10-15 分钟内完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T14:13:56.443

1.  要生成随机文件名，我通常会发现这可以很好地完成工作：`md5( rand( 0, 100000 ) );`. 如果你想限制文件名的大小，你可以使用[substr](http://php.net/manual/en/function.substr.php)函数。
2.  （假设是 MySQL 数据库），[建立连接](http://php.net/manual/en/function.mysql-connect.php)，然后使用[INSERT 命令](http://www.tizag.com/mysqlTutorial/mysqlinsert.php)[查询数据库](http://php.net/manual/en/function.mysql-query.php)。[此链接](http://www.tizag.com/mysqlTutorial/mysqlinsert.php)显示了如何执行所有这些操作。

# java - 如果提供了不正确的登录凭据，如何避免 Android 中的 httpsURLConnection.getInputStream() 挂起？

> ID：12425997
> 
> 赞同：7
> 
> 时间：2012-09-14T13:53:48.033
> 
> 标签：java, android, httpurlconnection

此处设置了身份验证凭据，如果提供的用户/密码正确，则一切正常，但如果它们不正确，则会挂起。这不是服务器问题，我检查了 Curl 和 Browser，不正确的凭据立即返回 401。：

```
 Authenticator.setDefault(new Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(user, password.toCharArray());
        }
    }); 
```

挂起的代码在这里，它挂在这一行： in = new BufferedReader(new InputStreamReader(httpURLConn.getInputStream())); （也不例外，就停留在这条线上）

```
 try {
        URL url = new URL(resourceUrl);
        HttpURLConnection httpURLConn = (HttpURLConnection) url.openConnection();
        String rawData = "";
        String currentLine = null;
        BufferedReader in = null;

        in = new BufferedReader(new InputStreamReader(httpURLConn.getInputStream()));
        while ((currentLine = in.readLine()) != null) {
            rawData = rawData.concat(currentLine);
        }
        in.close();
    } catch (UnknownHostException e) {
        Log.i(CLASS_NAME + "::" + METHOD_NAME
                , "An exception occured while reading data from remote host. httpURLConn.responseCode = " + httpURLConn.getResponseCode()
                + " / httpURLConn.responseMessage = " + httpURLConn.getResponseMessage(), e);
        throw new UnknownHostException();
    } catch (IOException e) {
        Log.i(CLASS_NAME + "::" + METHOD_NAME
                , "An exception occured while reading data from remote host. httpURLConn.responseCode = " + httpURLConn.getResponseCode()
                + " / httpURLConn.responseMessage = " + httpURLConn.getResponseMessage(), e);
        throw new IOException();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:09:20.027

可能是服务器使连接保持活动状态（Keep-Alive 标头）？

# java - 如何在 Eclipse 4 RCP 中将 Part 插入另一个插件的 PartStack？

> ID：12425998
> 
> 赞同：0
> 
> 时间：2012-09-14T13:53:51.557
> 
> 标签：java, swt, eclipse-rcp, eclipse-gef

我想练习 Eclipse 4 RCP 应用程序开发，我目前的目标是图形建模应用程序。据我所知，GEF（图形编辑框架）是最可靠的图形框架，但它只是 Eclipse 3.x。所以我决定只为编辑器创建一个插件，但我不知道如何将图形编辑器的部分插入到主插件的应用程序模型中。更何况，两个插件如何相互通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:59:26.427

插件通过扩展点进行通信，插件定义了某些扩展点以允许扩展现有功能。所以我建议你阅读这些东西。然后找出您感兴趣的插件是否提供了哪些扩展点并扩展它。您可以在 plugin.xml 或文档中找到扩展点定义。