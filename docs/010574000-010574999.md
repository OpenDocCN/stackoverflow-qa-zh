# StackOverflow 问答 10574000-10574999

# excel - 删除 VBA excel 中的空格

> ID：10574000
> 
> 赞同：4
> 
> 时间：2012-05-13T18:03:05.410
> 
> 标签：excel, vba

我有一些将文本从一个单元格移动到另一个单元格的代码

```
Dim startIndex As Integer
Dim toIndex As Integer
Dim f As String
Dim g As String

For startIndex = 50 To 60 Step 2
toIndex = Str(startIndex + 1)
f = "F" & Str(toIndex)
g = "G" & Str(startIndex)
Range(f).Value = Range(g).Value
Range(g).Value = ""
Next startIndex 
```

但是变量 f 的值是“F 51”而不是“F51”。

如何解决这个问题？ps 这是我在 vba 上的第一个代码。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-14T00:12:10.263

你应该不
`CStr`
使用
`Str`

然后不需要解决方法来删除不必要的空间

IE

```
 f = "F" & CStr(toIndex)
 g = "G" & CStr(startIndex) 
```

从 Excel 帮助`Str`

> 将数字转换为字符串时，始终为数字的符号保留前导空格。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-13T18:08:10.533

您可以`TRIM()`在最终结果中使用`toIndex`or`REPLACE`空格，即

```
Replace ("alphabet", "a", "e")  'would return "elphebet" 
```

从这里举起的例子：[http ://www.techonthenet.com/excel/formulas/replace.php](http://www.techonthenet.com/excel/formulas/replace.php)

所以...

```
f = Replace (f, " ", "") 
```

# android - 在 android 上禁用 setMovementMethod(LinkMovementMethod.getInstance())

> ID：10574005
> 
> 赞同：3
> 
> 时间：2012-05-13T18:03:55.377
> 
> 标签：android, android-edittext, hyperlink

我`setMovementMethod(LinkMovementMethod.getInstance())`在我的 android 应用程序中使用 EditText 视图。EditText 中的链接工作正常，但在某些情况下，我需要通过程序禁用此方法（因为在 longClick 菜单中启用复制项）。怎么做？我需要像“removeMovementMethod()”这样的东西。

你能帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-01-08T17:54:30.333

在遇到同样的问题后，请考虑一下，设置方法似乎有一定的顺序。

1.  获取“文本视图”

```
final TextView tv = new TextView(getContext()); 
```

2.  设置所有必要的布局参数

```
tv.setLayoutParams(lp_tv); 
```

3.  设置将`Linkify`文本中的所有链接标记为`Link`

```
tv.setAutoLinkMask(Linkify.ALL); 
```

4.  设置`TextView`（后`setAutoLinkMask`）的内容

```
tv.setText("MyText")
tv.setText(Html.fromHtml("<big>MyText</big>"); 
```

5.  现在您可以附加`LinkMovementMethod`. 如果之前附加了该方法，它将调用默认行为并打开系统浏览器。我使用一个`TextViewLinkHandler`类来完成这项工作作为个人行为。标准行为是：

```
tv.setLinkMovementMethod(new LinkMovementMethod.getInstance()); 
```

如果用户点击一个链接（例如打开一个单独的 Intent 来处理 URL），我会使用它`TextViewLinkHandler`来做一些其他的事情

```
 tv.setMovementMethod(new TextViewLinkHandler() {
// do my stuff ... 
// if left blank, nothing will happen on click at the link, so leave it blank to do nothing
}); 
```

与提到的`TextViewLinkHandler()`

```
public abstract class TextViewLinkHandler extends LinkMovementMethod {

        public boolean onTouchEvent(TextView widget, Spannable buffer, MotionEvent event) {
            if (event.getAction() != MotionEvent.ACTION_UP)
                return super.onTouchEvent(widget, buffer, event);

            int x = (int) event.getX();
            int y = (int) event.getY();

            x -= widget.getTotalPaddingLeft();
            y -= widget.getTotalPaddingTop();

            x += widget.getScrollX();
            y += widget.getScrollY();

            Layout layout = widget.getLayout();
            int line = layout.getLineForVertical(y);
            int off = layout.getOffsetForHorizontal(line, x);

            URLSpan[] link = buffer.getSpans(off, off, URLSpan.class);
            if (link.length != 0) {
                onLinkClick(link[0].getURL());
            }
            return true;
        }

        abstract public void onLinkClick(String url);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T18:35:21.627

长按菜单后`setMovementMethod(null)`会禁用。因此最好使用这种方法：

```
setMovementMethod(ArrowKeyMovementMethod.getInstance()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T18:15:18.410

```
setMovementMethod(null) 
```

会将 textview 的移动方法设置为 null。如果您的代码想要以某种方式处理 MovementMethod，这当然会导致 NullPointerException。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-12T11:04:37.867

就像@lubart 在其中一个答案中评论的那样，设置 setMovementMethod(null) 将不起作用。您需要在设置 LinkMovementMethod 之前保存之前的 MovementMethod，并在您不想使用 LinkMovementMethod 时再次恢复它。

我要强调的一件重要的事情是，当恢复到以前的 MovementMethod 时，您必须设置 AutoLinkMask=0，否则链接不会消失，插入符号不会显示，复制/粘贴上下文菜单也不会出现。

此外，在使用 setMovementMethod 后，在 EditText/TextView 中再次设置文本以应用移动方法。

算法（不是代码）：

设置链接移动方法 -

```
previousMovementMethod = editText.MovementMethod;

editText.autoLinkMask = All;
editText.MovementMethod = LinkMovementMethod.GetInstance();
editText.SetText(editText.GetText()); 
```

删除链接移动方法 -

```
editText.autoLinkMask = 0;
editText.MovementMethod = previousMovementMethod;
editText.SetText(editText.GetText()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-30T12:38:56.050

正如 user5211136 所说，您可以使用自定义 ArrowKeyMovementMethod。然后文本将是可选的，超链接也将起作用。但是 user5211136 类的使用称为错误

> “未找到意图的活动，意图 { act=android.intent.action.VIEW dat= https://...（有附加功能）}”

为了我。

这就是我使用这个类的原因：

```
public class CustomArrowKeyMovementMethod extends ArrowKeyMovementMethod {

    public static MovementMethod getInstance(){
        return new CustomArrowKeyMovementMethod();
    }

    public boolean onTouchEvent(TextView widget, Spannable buffer, MotionEvent event){

        int action = event.getAction();

        if(action == MotionEvent.ACTION_UP || action == MotionEvent.ACTION_DOWN) {
            int x = (int) event.getX();
            int y = (int) event.getY();
            x -= widget.getTotalPaddingLeft();
            y -= widget.getTotalPaddingTop();
            x += widget.getScrollX();
            y += widget.getScrollY();

            Layout layout = widget.getLayout();
            int line = layout.getLineForVertical(y);
            int off = layout.getOffsetForHorizontal(line, x);

            URLSpan[] link = buffer.getSpans(off, off, URLSpan.class);

            if (link.length != 0) {
                if (action == MotionEvent.ACTION_UP) {
                    String url = link[0].getURL().trim();
                    if(url.startsWith("www")) {
                        url = "http://" + url;
                    }
                    if (url.startsWith("https://") || url.startsWith("http://") || url.startsWith("tel:") || url.startsWith("mailto:")) {
                        try {
                            Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
                            widget.getContext().startActivity(browserIntent);
                        } catch (Exception e) {
                            Toast.makeText(widget.getContext(), "Couldn't open url", Toast.LENGTH_LONG).show();
                        }
                    }
                } else {
                    Selection.setSelection(buffer, buffer.getSpanStart(link[0]), buffer.getSpanEnd(link[0]));
                }
                return true;
            }
        }
        return super.onTouchEvent(widget, buffer, event);
    }
} 
```

并将其称为：

```
textView.setMovementMethod(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-20T20:18:04.367

试试看：- 在你的项目中添加这个类

```
import android.text.Layout;
import android.text.Selection;
import android.text.Spannable;
import android.text.method.ArrowKeyMovementMethod;
import android.text.method.MovementMethod;
import android.text.style.ClickableSpan;
import android.view.MotionEvent;
import android.widget.TextView;

/**
 * Created by Nishu on 20-08-2015.
 */
public class MyMovementMethod extends ArrowKeyMovementMethod {

private static MyMovementMethod sInstance;

public static MovementMethod getInstance() {
if (sInstance == null) {
    sInstance = new MyMovementMethod ();
    }
     return sInstance;
    }

@Override
public boolean onTouchEvent(TextView widget, Spannable buffer, MotionEvent    event) {
int action = event.getAction();

if (action == MotionEvent.ACTION_UP ||
        action == MotionEvent.ACTION_DOWN) {
    int x = (int) event.getX();
    int y = (int) event.getY();

    x -= widget.getTotalPaddingLeft();
    y -= widget.getTotalPaddingTop();

    x += widget.getScrollX();
    y += widget.getScrollY();

    Layout layout = widget.getLayout();
    int line = layout.getLineForVertical(y);
    int off = layout.getOffsetForHorizontal(line, x);

    ClickableSpan[] link = buffer.getSpans(off, off,  ClickableSpan.class);

    if (link.length != 0) {
        if (action == MotionEvent.ACTION_UP) {
            link[0].onClick(widget);
        }
        else if (action == MotionEvent.ACTION_DOWN) {
            Selection.setSelection(buffer, buffer.getSpanStart(link[0]),   buffer.getSpanEnd(link[0]));
        }

        return true;
    }
    /*else {
        that's the line we need to remove
        Selection.removeSelection(buffer);
    }*/
  }

  return super.onTouchEvent(widget, buffer, event);
 }

} 
```

现在用你的 EditText 添加下面的代码行

```
YourEditText.setMovementMethod(MyMovementMethod.getInstance()); 
```

并从 editText 中删除所有类型的 setMovementMethods 就是这样:)

# ruby-on-rails-3 - 使用thoughtbot高压从静态托管页面生成PDF的gem/方法

> ID：10574008
> 
> 赞同：1
> 
> 时间：2012-05-13T18:04:27.573
> 
> 标签：ruby-on-rails-3, rubygems, pdf-generation, ruby-on-rails-plugins

我有一组静态的帮助页面，我在 Rails 3.2 应用程序中使用了 Thoughbots 高压 gem。我只是以“香草”的方式使用它，而不通过控制器提供 html 页面。

*背景*

我最初尝试自己调整 Michael Hartl 关于静态页面的教程 - 即我有一组带有自己控制器的静态页面，我试图在静态页面视图下创建一个子目录，但无法获得我的路由上班，所以谷歌搜索显示了Thoughtbots High-Voltage gem。

***愿望***

我想要的是推荐使用 Thoughtbots High-Voltage gem 生成 PDF 文件的最佳 gem 或方法。

有人做过吗？

我希望能够在 heroku 上托管这个，所以如果有任何`gotacha's`我想预先了解这些。

我当前的实现是一个基本的 Rails 3.2 应用程序，安装了 High-Voltage gem 并在 pages 子目录下有许多视图。

*   页面/帮助/用户
*   页面/帮助/产品
*   页面/帮助/订单

我的 html 页面中有图像，不确定这是否会导致并发症。

***编辑：***根据提供的答案添加控制器，因为 Rails 3.2.3 上的 wicked_pdf 和 Lion 上的 ruby​​ 1.9.3-p125 仍然存在问题

```
class PagesController < HighVoltage::PagesController
def show
  respond_to do |format|
    format.html do
      super
    end
    format.pdf do
      #render :pdf => "pdf_file" # wicked_pdf syntax here
      render :pdf => :id,
             :layout => 'application',
             #:template => 'help/products/product_tolerance.html.erb',
             :template => 'pages/#{:id}.html.erb',
             :show_as_html => params[:debug],
             :footer => {
                :left => "Generated on @now",
                :centre => "Centre",
                :right => "Page # of page(s)"
             }        
      end
    end
  end
end 
```

路由文件包含：

`match "/pages/*id" => 'pages#show', :as => :page, :via => :get, :format => false`

:format 应该是真的吗？在控制器和高电压中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:17:13.557

如此处所述覆盖高压页面控制器： [https ://github.com/thoughtbot/high_voltage#override](https://github.com/thoughtbot/high_voltage#override)

然后安装[pdfkit](https://github.com/jdpace/PDFKit/)或[wicked_pdf](https://github.com/mileszs/wicked_pdf)（html 到 pdf 转换器）并将它们连接到该控制器以创建 PDF 版本：

```
class PagesController < HighVoltage::PagesController
  def show
    respond_to do |format|
      format.html do
        super
      end
      format.pdf do
        render :pdf => "pdf_file" # wicked_pdf syntax here
      end
    end
  end
end 
```

# c - 使用 C 中的简单字节协议读取/写入大整数或浮点数

> ID：10574010
> 
> 赞同：3
> 
> 时间：2012-05-13T18:04:59.717
> 
> 标签：c, erlang, byte, stdin

*免责声明：该问题的作者对 Erlang 有一般的了解，并且对 C 有基本的（但不断增加的）知识。*

我正在使用该`read()`函数来读取我的程序从[互操作性教程用户指南](http://www.erlang.org/doc/tutorial/users_guide.html)`port.c`中提供的 Erlang 端口示例中获取的字节（它也在“Erlang 编程”一书的第 12 章中进行了描述）。

但我倾向于认为这个问题根本与 Erlang 无关，因为我得到的错误值（例如 231 而不是 999）来自 C 端。

问题是该协议不适用于超过 255 的参数（否则效果很好）。我想它与`byte`类型和`read_exact()`实现有关，但我不知道如何修复它或使其可以在`float`其中传递值。

为了理解这段代码，我已经阅读了一半的 K&R 书，但我仍然卡住了。

这是代码：

实际的 C 函数：

```
/* complex.c */

int foo(int x) {
  return x+1;
}

int bar(int y) {
  return y*2;
} 
```

C 端口：

/* 端口.c */

```
typedef unsigned char byte;

int main() {
  int fn, arg, res;
  byte buf[100];

  while (read_cmd(buf) > 0) {
    fn = buf[0];
    arg = buf[1];

    if (fn == 1) {
      res = foo(arg);
    } else if (fn == 2) {
      res = bar(arg);
    }

    buf[0] = res;
    write_cmd(buf, 1);
  }
} 
```

缓冲区管理：

```
/* erl_comm.c */

typedef unsigned char byte;

read_cmd(byte *buf)
{
  int len;

  if (read_exact(buf, 2) != 2)
    return(-1);
  len = (buf[0] << 8) | buf[1];
  return read_exact(buf, len);
}

write_cmd(byte *buf, int len)
{
  byte li;

  li = (len >> 8) & 0xff;
  write_exact(&li, 1);

  li = len & 0xff;
  write_exact(&li, 1);

  return write_exact(buf, len);
}

read_exact(byte *buf, int len)
{
  int i, got=0;

  do {
    if ((i = read(0, buf+got, len-got)) <= 0)
      return(i);
    got += i;
  } while (got<len);

  return(len);
}

write_exact(byte *buf, int len)
{
  int i, wrote = 0;

  do {
    if ((i = write(1, buf+wrote, len-wrote)) <= 0)
      return (i);
    wrote += i;
  } while (wrote<len);

  return (len);
} 
```

二郎端口：

```
-module(complex1).
-export([start/1, stop/0, init/1]).
-export([foo/1, bar/1]).

start(ExtPrg) ->
    spawn(?MODULE, init, [ExtPrg]).
stop() ->
    complex ! stop.

foo(X) ->
    call_port({foo, X}).
bar(Y) ->
    call_port({bar, Y}).

call_port(Msg) ->
    complex ! {call, self(), Msg},
    receive
    {complex, Result} ->
        Result
    end.

init(ExtPrg) ->
    register(complex, self()),
    process_flag(trap_exit, true),
    Port = open_port({spawn, ExtPrg}, [{packet, 2}]),
    loop(Port).

loop(Port) ->
    receive
    {call, Caller, Msg} ->
        Port ! {self(), {command, encode(Msg)}},
        receive
        {Port, {data, Data}} ->
            Caller ! {complex, decode(Data)}
        end,
        loop(Port);
    stop ->
        Port ! {self(), close},
        receive
        {Port, closed} ->
            exit(normal)
        end;
    {'EXIT', Port, Reason} ->
        exit(port_terminated)
    end.

encode({foo, X}) -> [1, X];
encode({bar, Y}) -> [2, Y].

decode([Int]) -> Int. 
```

我做了一个愚蠢的改变尝试

```
typedef unsigned char byte; 
```

至

```
typedef int byte; 
```

但它没有用。

其实有两个问题：

*   如果我们使用大于 255 的参数调用端口（例如`foo(256)`来自 Erlang 端口），则执行将在 read_cmd() 中的 read() 处终止，其中 i = 0;
*   如果我们使用小于 255 的参数调用端口，但函数的结果大于 255（例如`int foo(int x) { return x+1000; }`，程序不会终止，但我们的 Erlang 端口会得到一些意外的值；

所以，问题是：我应该怎么做才能使协议使用更大的数字甚至浮点数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:05:06.787

将 s编组为更大结构的示例`byte`已经出现在`read_cmd`.

```
...
  int len;

  if (read_exact(buf, 2) != 2)
    return(-1);
  len = (buf[0] << 8) | buf[1];
... 
```

这将前两个`byte`s 取出`buf`并将它们视为`int`（一个四`byte`结构）。据此[，](http://www.lix.polytechnique.fr/~liberti/public/computing/prog/c/C/CONCEPT/data_types.html#double) a`double`是 8 个字节，因此理论上，您应该能够应用相同的方法。你想做一些类似的事情（未经测试，几乎可以保证不起作用，仅用于说明目的等）：

```
double marshall_eight(byte *buff) {
  int i;
  double tmp, res;
  for(i=0; i<8;i++) {
    tmp = buff[i] << 8*i;
    res += tmp;
  }
  return res;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T18:17:05.973

您可能遇到的任何机器上的字节只能保存从 -128 到 127（有符号）或 0 到 255（无符号）的值；其他任何事情都需要在两者之间编组数据。 [http://www.erlang.org/documentation/doc-5.6/pdf/tutorial.pdf](http://www.erlang.org/documentation/doc-5.6/pdf/tutorial.pdf)是官方的 Erlang 教程，用于在 Erlang 和其他语言之间编组数据，并包含 C 中的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T18:38:39.177

假设从 Erlang 转换为字节数组而不是字符数组。

代码有点松散，最简单的答案......

```
while (read_cmd(buf) > 0) { 
 fn = buf[0];
    arg = buf[1]; 
```

本来应该：

```
while (arg=read_cmd(buf) > 0) {
 fn = buf[0]; 
```

您的代码将只处理字节和整数，它不能处理浮点数和双精度数。

您的写入 cmd 中还有其他错误。

---------编辑----------------- 这是您尝试在c中实现的示例：

```
 #include <stdio.h>
 #include <math.h>

 /*
  * With certain compilers  __attribute__((transparent_union)) 
  * can be used to ease handling of an unknown type.
  */
 union  u_unionalue
 {
     char                char_union;
     unsigned char       u_char_union;
     short               s_int_union;
     unsigned short      us_int_union;
     int                 int_union;
     unsigned int        u_int_union;
     long                l_int_union;
     unsigned long       ul_int_union;
     long long           ll_int_union;
     unsigned long long  ull_int_union;
     float               float_union;
     double              double_union;
     long double         l_double_union;
 };

 enum e_type
 {
     char_enum    ,
     u_char_enum  ,
     s_int_enum   ,
     us_int_enum  ,
     int_enum     ,
     u_int_enum   ,
     l_int_enum   ,
     ul_int_enum  ,
     ll_int_enum  ,
     ull_int_enum ,
     float_enum   ,
     double_enum  ,
     l_double_enum,
     last_type
 };

 struct s_type
 {
     int  type;
     char *name;
     union u_unionalue value;
     int   size;
     char *stringFormat;

 } as_typeList[]=
 /**
  * This is a quick example of how convoluted type handling can be in C. The 
  * non portable  __attribute__((transparent_union)) can be useful if the 
  * complier supports it. This helps to 
  * reduce the amount of casting, but these are the convoluted tricks that 
  * occur behind the scenes. C++ has to handle this in the compiler as well
  * as a result .. sometimes what you get is not what you expect.
  */
 {
     { char_enum    ,  "char"              ,  {.char_union=(1 << (-1 + sizeof( char ) * 8  ))}, sizeof( char ),"%+d" },
     { u_char_enum  ,  "unsigned char"     ,  {.u_char_union=-1} , sizeof( unsigned char ) ,"%+d" },
     { s_int_enum   ,  "short"             ,  {.s_int_union=((short)1 << (-1 + sizeof( short ) * 8))}  , sizeof( short ),"%+d" },
     { us_int_enum  ,  "unsigned short"    ,  {.us_int_union=-1}, sizeof( unsigned short ),"%+u"  },
     { int_enum     ,  "int"               ,  {.int_union = ((int)1<< (-1 + sizeof( int) * 8  ))}, sizeof( int), "%+i"  },
     { u_int_enum   ,  "unsigned int"      ,  {.u_int_union=-1}, sizeof( unsigned int ), "%+u"  },
     { l_int_enum   ,  "long"              ,  {.l_int_union=((long)1<< (-1 + sizeof( long) * 8  ))}, sizeof( long ), "%+li" },
     { ul_int_enum  ,  "unsigned long"     ,  {.ul_int_union=(long)-1}, sizeof( unsigned long ), "%+lu" },
     { ll_int_enum  ,  "long long"         ,  {.ll_int_union=(long long)-1 }, sizeof( long long ), "%+lli"},
     { ull_int_enum ,  "unsigned long long",  {.ull_int_union=((unsigned long long)1<< (-1 + sizeof( unsigned long long) * 8  ))}, sizeof( unsigned long long  ), "%+llu"},
     { float_enum   ,  "float"             ,  {.float_union=1e+37L}, sizeof( float ), "%+f"  },
     { double_enum  ,  "double"            ,  {.double_union=1e+37L}, sizeof( double ), "%+lf"  },
     { l_double_enum,  "long double"       ,  {.l_double_union=1e+37L}, sizeof( long double), "%+lle"}
 };

 /**
  * This is how your foo and bar functions should be organized this would 
  * allow handling for all your types. but the type is needed.
  */
 void sprintVal(struct s_type *typeVal, char*buf)
 {
     switch(typeVal->type)
     {
     case char_enum     :
         sprintf(buf, typeVal->stringFormat, typeVal->value.char_union);
         break;
     case u_char_enum   :
         sprintf(buf, typeVal->stringFormat, typeVal->value.u_char_union);
         break;
     case s_int_enum    :
         sprintf(buf, typeVal->stringFormat, typeVal->value.s_int_union);
         break;
     case us_int_enum   :
         sprintf(buf, typeVal->stringFormat, typeVal->value.us_int_union);
         break;
     case int_enum      :
         sprintf(buf, typeVal->stringFormat, typeVal->value.int_union);
         break;
     case u_int_enum    :
         sprintf(buf, typeVal->stringFormat, typeVal->value.u_int_union);
         break;
     case l_int_enum    :
         sprintf(buf, typeVal->stringFormat, typeVal->value.l_int_union);
         break;
     case ul_int_enum   :
         sprintf(buf, typeVal->stringFormat, typeVal->value.ul_int_union);
         break;
     case ll_int_enum   :
         sprintf(buf, typeVal->stringFormat, typeVal->value.ll_int_union);
         break;
     case ull_int_enum  :
         sprintf(buf, typeVal->stringFormat, typeVal->value.ull_int_union);
         break;
     case float_enum    :
         sprintf(buf, typeVal->stringFormat, typeVal->value.float_union);
         break;
     case double_enum   :
         sprintf(buf, typeVal->stringFormat, typeVal->value.double_union);
         break;
     case l_double_enum :
         sprintf(buf, typeVal->stringFormat, typeVal->value.l_double_union);
         break;
     }
 }

 void print_types()
 {
     int i=0;
     char buf[100];

     while(i < last_type )
     {
         sprintVal( &as_typeList[i], buf);
         printf( "Type: %-18s value=%-30s size=  %-dBytes \n", as_typeList[i].name, buf, as_typeList[i].size );
         i++;
     };
 }

 int main(int argc, char** argv)
 {

     print_types();
     return(0);
 } 
```

您的问题中最大的问题是您在 erlang 和 c 之间的消息传递。您当前的格式是 /CMD/VALUE/ 至少应该是 /CMD/TYPE/VALUE/，尽管消息头和校验和页脚的长度很常见。应该提升类型，以便可以返回更大的结果值。所以需要知道你正在传递什么。

哦，如果您将数据作为字符串传递，您可以在一定程度上适当地调整您的类型。如果管道两端之间存在差异，它还可以防止字节序问题。

# java - 访问内部对象类变量

> ID：10574013
> 
> 赞同：3
> 
> 时间：2012-05-13T18:05:25.360
> 
> 标签：java, inner-classes, setter, getter

在我的主类中，我有一个名为 Shape 的内部类，它扩展了 JButton。这个内部类有一个名为 CUBE 的私有 char 变量。

我为它写了getter和setter。我注意到在 main 方法中，而不是使用：

```
(instance of Shape).getCUBE(); 
```

我可以通过以下方式访问它：

```
(instance of Shape).CUBE 
```

发生这种情况是因为 CUBE 最终与 main 属于同一类吗？

java编程约定是否有必要为这样的内部类编写getter和setter？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T18:10:01.987

> 发生这种情况是因为 CUBE 最终与 main 属于同一类吗？

不，它有效，因为语言规范说它有效。就 JVM 而言，它将最终成为一个单独的类，但将创建额外的包级方法以允许外部类看起来违反正常规则。

语言规范的相关部分在[6.6.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6.1)中：

> 否则，如果成员或构造函数被声明为私有，则当且仅当它发生在包含成员或构造函数声明的**顶级类**（第 7.6 节）的主体内时，才允许访问。

（强调我的。）

所以实际上，即使*对等*嵌套类也可以访问私有成员。示例代码：

```
public class Test {

    public static void main(String[] args) {
        First first = new First(10);
        Second second = new Second(first);
        System.out.println(second.getValueFromFirst());
    }

    private static class First {        
        private final int value;

        private First(int value) {
            this.value = value;
        }
    }

    private static class Second {
        private final First first;

        private Second(First first) {
            this.first = first;
        }

        private int getValueFromFirst() {
            return first.value;
        }
    }
} 
```

如果您查看生成的类（使用`javap -c Test$First`并且`javap -c Test$Second`您将看到编译器生成的*合成方法。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:08:43.983

这是一个模仿您的描述的类：

```
import javax.swing.JButton;

class Main
{
   public class Shape extends JButton
   {
      private char CUBE = 'I';

      public char getCUBE()
      {
             return CUBE;
      }
      public void setCUBE(char CUBE){this.CUBE = CUBE;}
   }

   public static void main(String[] args) 
   {
      Shape sp = new Main().new Shape();
      System.out.println(sp.CUBE);
      System.out.println(sp.getCUBE());
   }
}

public class TestMain
{
    public static void main(String[] args) 
    {
     Main.Shape sp = new Main().new Shape();
     //System.out.println(sp.CUBE);
     System.out.println(sp.getCUBE());
    }
} 
```

如果您删除评论，它将无法编译。因此，如果要在 Main 之外访问 CUBE，仍然需要 getter 和 setter。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-13T18:06:47.453

之所以有效，是因为您忘记添加 `private`关键字。

# ruby - Ruby-在数组中查找包含字母的字符串

> ID：10574014
> 
> 赞同：4
> 
> 时间：2012-05-13T18:05:41.517
> 
> 标签：ruby, arrays

我到处搜索，似乎找不到我正在寻找的示例。我正在尝试学习 ruby​​，并且正在编写一个简单的脚本。提示用户输入加载到数组中的字母。然后，脚本会遍历一个包含一堆单词的文件，并提取出包含数组中内容的单词。我的问题是，如果它们按数组的顺序排列，它只会将单词拉出来。例如...

```
characterArray = Array.new;
puts "Enter characters that the password contains";
characters = gets.chomp;
puts "Searching words containing #{characters}...";

characterArray = characters.scan(/./);
searchCharacters=characterArray[0..characterArray.size].join;

File.open("dictionary.txt").each { |line| 
    if line.include?(searchCharacters)
        puts line;
    end
 } 
```

如果我要使用此代码并输入“dog”脚本将返回 dog doggie

但我需要输出来返回单词，即使它们的顺序不同。像... dog dogge rodge

对不起，草率的代码。就像我说的还在学习。谢谢你的帮助。

PS。这个我也试过...

```
File.open("dictionary.txt").each { |line| 
    if line =~ /[characterArray[0..characterArray.size]]/
        puts line;
    end
} 
```

但这会返回包含用户输入的任何字母的所有单词

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T18:25:14.537

首先，您不需要创建`characterArray`自己。当您将函数的结果分配给新变量时，没有它也可以工作。

例如，在您的代码`characters`中将是“asd”。`characterArray`那么将是[“a”，“s”，“d”]。并且`searchCharacters`将再次成为“asd”。看来您不需要这种转换。

`characterArray[0..characterArray.size]`正好等于`characterArray`。

您可以使用`each_char`迭代器来遍历字符串的字符。我建议这样做：

```
puts "Enter characters that the password contains";
characters = gets.chomp;

File.open("dictionary.txt").each { |line| 
  unless characters.each_char.map  { |c| line.include?(c) }.include? false
    puts line;
  end
} 
```

我已经检查过它工作正常。在我的代码中，我创建了一个数组：

```
characters.each_char.map  { |c| line.include?(c) } 
```

该数组的值将指示：`true`- 在 中找到字符`line`，`false`- 未找到字符。此数组的长度等于 中的字符数`characters`。`line`如果没有`false`值，我们会认为是好的。

# objective-c - Cocoa Objective-C 主循环

> ID：10574016
> 
> 赞同：1
> 
> 时间：2012-05-13T18:05:46.173
> 
> 标签：objective-c, c, cocoa, sockets, libcurl

我正在用 C 语言构建一个应用程序，它是一个客户端/服务器共享应用程序。这个应用程序是基于命令行的，它使用 TCP 套接字、libcurl 和一些 fork()。它应该在没有任何输入的情况下无限循环运行。

我在大学的教授说我们必须实现一个 GUI，因为我在 Mac 上，所以我学习了 Object-C，并且我在 cocoa 中完成了它。

现在我问自己是否可以合并两个应用程序，可可 GUI 和用 C 编写的真实应用程序。当然，我需要两个“应用程序”并行运行。

我可以将它添加到我的可可应用程序中吗？我必须把代码放在哪里才能让它一直运行？不在 awakeFromNib 中，对吗？我知道这个问题有点含糊。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:14:31.283

您可以将命令行应用程序作为 NSTask 运行并编写适当的代码，以便它们可以通过管道进行通信。这样它们将异步运行。

或者，您绝对可以“合并”它们，因为 c 代码可以在 ObjC 程序中正常运行。无限循环可能存在于不同的线程中。尽管此解决方案可能需要比以前的解决方案更多的重写。

# matlab - 从 PPI（蛋白质-蛋白质相互作用）excel 文件制作无向图

> ID：10574018
> 
> 赞同：0
> 
> 时间：2012-05-13T18:06:06.730
> 
> 标签：matlab, graph

我是 MatLAB 的新手，所以我为幼稚的问题道歉。我想通过 MATLAB 从 PPI 网络（蛋白质-蛋白质相互作用）Excel 文件制作无向图并计算节点的最短路径长度。

我将 Excel 文件导入 MATLAB，现在我有一个 2*1 矩阵（行 = 2312）作为元胞数组。第一列是源蛋白，下一个是目标蛋白。现在，我在稀疏数据和制作邻接矩阵方面遇到了问题。事实上，我找不到任何命令来稀疏单元格数组或制作邻接矩阵。对于解决问题的任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:51:37.637

如果我理解正确，您可以使用此方法从稀疏数组构建邻接矩阵。

例如：

```
N=10;
Matrix=zeros(N);
Sparse=[1 7;3 5;2 6];

S=N.*(Sparse(:,1)-1)+Sparse(:,2);
Matrix=Matrix(:);
Matrix(S)=1;

Matrix=reshape(Matrix,[N N])'; 
```

# jquery - 填充基于输入选项的选择

> ID：10574020
> 
> 赞同：-1
> 
> 时间：2012-05-13T18:06:16.743
> 
> 标签：jquery, html, input

我试图找到创建许多输入菜单的最佳方法，这些输入菜单将根据那里的选择自动填充。我遇到的问题是有很多选择。将有 4 个下拉菜单。每个下拉菜单将有 2 个选项。

我在看下面的例子。虽然这种方法有效，但代码量会很大>> [http://devingredients.com/2011/05/populate-a-select-dropdown-list-with-jquery/](http://devingredients.com/2011/05/populate-a-select-dropdown-list-with-jquery/)

有谁知道实现这一目标的最佳方法？

谢谢，

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-13T18:41:12.040

这可以通过一些通用的辅助函数轻松完成。

例如，您可以编写一个函数来`<select>`根据传递的单个值清除和填充元素，而不是手动为每个值提供原始 HTML。

在准备过程中，您需要创建一个对象，其中包含 first 的值`<select>`作为 second 列表的索引`<select>`。像这样的东西-

```
var beverages = {
 'wine' : ['Red','White'],
 'beer' : ['dark','pale'],
 'juice': ['mango','grapefruit']
}; 
```

现在我们知道这`beverages['beer'][0]`会给我们带来一瓶冷啤酒。

从这里我们可以编写一个更通用的函数来帮助我们进行 HTML 操作......

```
function populateSelect(category){
  // remove all existing options.
  $("#secondSelection").find('option').remove(); 
  $.each(beverages[category],function(index,elem){
    // for each item in beverages[category],
    // we add an option to the <select>.
     $("#secondSelection").append('<option>'+elem+'</option>');
  });
} 
```

你会这样调用这个函数 -

```
populateSelect($("#firstSelection").val()); 
```

您必须拥有的标记将是这样的 -

```
<select id="firstSelection">
  <option value='beer'>Beer</option>
  <option value='wine'>Wine</option>
  <option value='juice'>Juice</option>
</select>
<select id="secondSelection">
  <option>Choose a Category</option>
</select> 
```

* * *

对于您描述的更复杂的结构，您可以在原始对象中嵌套更多选项，它是数组......

# android - 每次在 Android 中打开应用程序时监控互联网连接

> ID：10574021
> 
> 赞同：1
> 
> 时间：2012-05-13T18:06:38.303
> 
> 标签：android, connectivity

我正在使用以下代码检查[此问题中建议的设备的连接性：](https://stackoverflow.com/questions/2326767/how-do-you-check-the-internet-connection-in-android)

```
final ConnectivityManager conMgr =  (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
final NetworkInfo activeNetwork = conMgr.getActiveNetworkInfo();
if (activeNetwork != null && activeNetwork.getState() == NetworkInfo.State.CONNECTED) {
    //notify user you are online
} else {
    //notify user you are not online
} 
```

我在我的主要活动中有这个，它工作正常，但我现在想做的是每次应用程序启动时检查互联网连接，有时应用程序处于某种状态，然后互联网断开连接，所以当它再次打开它没有经过主要活动，因此没有检查任何内容。

正如[这个问题](https://stackoverflow.com/questions/7140061/broadcast-receiver-and-internet-connection)中所建议的那样，我已经按照[本教程](http://thiranjith.com/2011/03/31/how-to-monitor-network-connectivity-in-android/)使用 BroadcastReceiver 监控互联网活动，并且我试图在 noConnectivity 为真时显示和 AlertDialog ，但没有任何反应。

这是我的代码，使用上面提到的教程：

```
public class MyActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.welcome);

    registerReceivers() ;
         (..my activity code goes here...)

}   

    private void noInternet()
    {
        Intent myIntent = new Intent(this, NoInternetActivity.class);
        startActivity(myIntent);
    }

    /*
     * method to be invoked to register the receiver
     */
    private void registerReceivers() {    
        registerReceiver(mConnReceiver, 
            new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));
    }

    private void alert()
    {
        AlertDialog alertDialog = new AlertDialog.Builder(this).create();
        alertDialog.setTitle("internet connection");
        alertDialog.setMessage("To use this app you need intenet connection");
        alertDialog.setButton("ok", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int which) {
              // here you can add functions
           }
        });
        alertDialog.show();
    }

    private BroadcastReceiver mConnReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            boolean noConnectivity = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);
            String reason = intent.getStringExtra(ConnectivityManager.EXTRA_REASON);
                        boolean isFailover = intent.getBooleanExtra(ConnectivityManager.EXTRA_IS_FAILOVER, false);

            NetworkInfo currentNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
            NetworkInfo otherNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_OTHER_NETWORK_INFO);

            // do application-specific task(s) based on the current network state, such 
            // as enabling queuing of HTTP requests when currentNetworkInfo is connected etc.

            if(noConnectivity)
            {
                alert();
                noInternet();
            }

        }
    };
} 
```

但两者都没有`alert()`或被`noInternet()`解雇。

希望你能帮助我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:27:50.387

如果您想在每次活动恢复时运行一些代码，即使它已经打开，然后覆盖并将您的检查代码放在`onResume()`. 每次活动打开时都会调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T01:34:40.290

在您的情况下，您将 registerReceivers 移动到 onStart 或 onResume 方法。

现在，如果您想在每个活动中使用它，请创建一个扩展活动的基础活动 [BaseActivity]，并将此方法放在该基类中的 onStart 或 onResume 上。现在从该 BaseActivity 扩展您的每个活动。

请注意不要将它们放入 Fragment 生命周期方法中，以防您使用 Fragments

# eclipse - 如何在 Eclipse PDE 中创建可停靠的“类透视”视图？

> ID：10574025
> 
> 赞同：1
> 
> 时间：2012-05-13T18:07:02.300
> 
> 标签：eclipse, eclipse-plugin, eclipse-pde

我一直在通过谷歌搜索这些信息，但似乎无法得到满意的答案。

我希望在 Eclipse 中创建一个可停靠视图（类似于“[透视](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.user/concepts/concepts-21.htm)”选择工具栏项），但不知道哪个是合适的扩展点。

这样做的目的是在激活某个透视图时在工具栏的左上角创建一些按钮。“透视”类型的视图与我希望看到的行为相匹配。

所以我的问题是：

*   这种类型的视图是否*仅*用于切换视角？
*   如果是这样，我应该看什么扩展点，如果不是，我应该看哪个扩展点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:34:34.750

您可以使用 .将带有您自己的命令的工具栏添加到主工具栏`org.eclipse.ui.menus`。`visibleWhen`如果您希望它仅在某个透视图打开时可见，您可以在命令元素上放置一个元素。

```
<visibleWhen>
   <with variable="activeWorkbenchWindow.activePerspective">
      <equals value="the.perspective.id"/>
   </with>
</visibleWhen> 
```

有关扩展点的示例，请参阅[工具栏示例，有关命令的一些基础知识，请参阅](https://github.com/paulweb515/eclipseExamples/blob/master/org.eclipse.example.commands.toolbar/plugin.xml#L38)[插入工作台](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/workbench_cmd.htm)。`org.eclipse.ui.menus`

# objective-c - 用于编写分布在多行上的字符串的语法

> ID：10574028
> 
> 赞同：1
> 
> 时间：2012-05-13T18:07:14.733
> 
> 标签：objective-c, string-literals

我的代码中有一个字符串，我希望它看起来像这样：

```
NSString *string = @"The string
                          other part of the string is bellow
                          the last part is in the third line"; 
```

也就是说，为了使代码更具可读性，我想将文本放置在几行上。我想我必须在换行后写一些符号，但不记得是哪些。这些是什么？我已经搜索了很多，但我找不到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:09:44.450

```
NSString *string = @"The string"
                      "other part of the string is bellow"
                      "the last part is in the third line"; 
```

# android - 单选按钮布局

> ID：10574037
> 
> 赞同：0
> 
> 时间：2012-05-13T18:08:22.003
> 
> 标签：android

我正在尝试用几个 RadioButtons 制作一个 RadioGroup。第一个 RadioButton 在 xml 文件中定义：

```
<RadioGroup
        android:id="@+id/radioGroup1"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" >

        <RadioButton
            android:id="@+id/radioButtonFirst"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginRight="20dp"
            android:gravity="center" />

    </RadioGroup> 
```

其余的只能在运行时添加，因为所需的 RadioButtons 的数量可能会有所不同。

```
RadioButton rbNext = new RadioButton(this);
        RelativeLayout.LayoutParams paramsRb = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
        paramsRb.addRule(RelativeLayout.BELOW, rbFirst.getId());
        paramsRb.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
        paramsRb.addRule(RelativeLayout.ALIGN_BOTTOM, ivNext.getId());
        paramsRb.setMargins(0, 0, 20, 0);

        rbNext.setLayoutParams(paramsRb);
        rbNext.setGravity(Gravity.CENTER);

        rbNext.setId(i*10+1); 
```

创建和添加 RadioButtons 效果很好，但是如何将 RadioButtons 分布在 RadioGroup 的整个宽度上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:39:43.603

通过 Id 获取您的 RadioGroup 并将您的按钮添加为子项。

```
(RadioGroup) radioGroup = (RadioGroup) findByViewId(radioGroup1);
radioGroup.addView(yourRadioButton); 
```

# iphone - 从详细视图返回时突出显示 tableViewCell

> ID：10574045
> 
> 赞同：0
> 
> 时间：2012-05-13T18:10:05.983
> 
> 标签：iphone, ios, uitableview

众所周知，在“钻入”应用程序中，可以突出显示选定的表格单元格并在详细视图中钻取。当触摸“返回”按钮从详细视图返回时，选定的表格单元格可能会突出显示或不突出显示。例如在 Apple 的示例代码中：**CoreDataBooks.app**和**TheElements.app**。我注意到这种现象，但不知道原因。是的，这是我的问题，如何控制这种现象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:12:40.723

在 masterViewController 的 ViewDidLoad 方法中添加这行代码。

```
self.clearsSelectionOnViewWillAppear = NO; 
```

PS：确保你的 masterViewController 是 UITableViewController 的子类。

# ruby - 根据给定的顺序对数字数组进行排序

> ID：10574046
> 
> 赞同：5
> 
> 时间：2012-05-13T18:10:14.560
> 
> 标签：ruby

我有两个数组。第一个数组包含排序顺序。第二个数组包含任意数量的元素。

我有一个属性，即第二个数组中的所有元素（按值）都保证在第一个数组中，并且我只使用数字。

```
A = [1,3,4,4,4,5,2,1,1,1,3,3]
Order = [3,1,2,4,5] 
```

当我排序时`A`，我希望元素按以下指定的顺序出现`Order`：

```
[3, 3, 3, 1, 1, 1, 1, 2, 4, 4, 4, 5] 
```

请注意，重复是公平的游戏。A 中的元素不应更改，只能重新排序。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-13T18:18:25.890

```
>> source = [1,3,4,4,4,5,2,1,1,1,3,3]
=> [1, 3, 4, 4, 4, 5, 2, 1, 1, 1, 3, 3]
>> target = [3,1,2,4,5]
=> [3, 1, 2, 4, 5]
>> source.sort_by { |i| target.index(i) }
=> [3, 3, 3, 1, 1, 1, 1, 2, 4, 4, 4, 5] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T18:41:16.780

如果（且仅当！）@Gareth 的回答太慢，请改为：

```
# Pre-create a hash mapping value to index once only…
index = Hash[ Order.map.with_index.to_a ] #=> {3=>0,1=>1,2=>2,4=>3,5=>4}

# …and then sort using this constant-lookup-time
sorted = A.sort_by{ |o| index[o] } 
```

* * *

基准测试：

```
require 'benchmark'

order = (1..50).to_a.shuffle
items = 1000.times.map{ order.sample }
index = Hash[ order.map.with_index.to_a ]

Benchmark.bmbm do |x|
  N = 10_000
  x.report("Array#index"){ N.times{
    items.sort_by{ |n| order.index(n) }
  }}
  x.report("Premade Hash"){ N.times{
    items.sort_by{ |n| index[n] }
  }}
  x.report("Hash on Demand"){ N.times{
    index = Hash[ order.map.with_index.to_a ]
    items.sort_by{ |n| index[n] }
  }}
end

#=>                      user     system      total        real
#=> Array#index     12.690000   0.010000  12.700000 ( 12.704664)
#=> Premade Hash     4.140000   0.000000   4.140000 (  4.141629)
#=> Hash on Demand   4.320000   0.000000   4.320000 (  4.323060) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T14:05:57.260

另一种没有显式排序的可能解决方案：

```
source = [1,3,4,4,4,5,2,1,1,1,3,3]
target = [3,1,2,4,5]
source.group_by(&lambda{ |x| x }).values_at(*target).flatten(1) 
```

# asp.net-mvc - 没有剃刀的 ASP MVC 强类型 html

> ID：10574049
> 
> 赞同：0
> 
> 时间：2012-05-13T18:10:35.197
> 
> 标签：asp.net-mvc

我希望能够执行以下操作：

```
<input name=@Model.SomeProperty (as the actual property name and not its value)  value=@Model.SomeProperty type="text/> 
```

所以模型绑定仍然有效，但我不需要使用 Razor 助手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:24:04.383

您可以添加返回您的 DisplayName 的 Helper 方法：

```
public static MvcHtmlString GetPropertyName<TModel, TProperty>( this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression )
        {
            var metaData = ModelMetadata.FromLambdaExpression<TModel, TProperty>(expression, htmlHelper.ViewData);
            string value = metaData.PropertyName ?? expressionHelper.GetExpressionText(expression);
            return MvcHtmlString.Create(value);
        } 
```

然后你只需使用：@Html.GetPropertyName(m => m.SomeProperty)

# php - PHP PDO Module 不提交事务，不上报原因

> ID：10574050
> 
> 赞同：1
> 
> 时间：2012-05-13T18:10:36.183
> 
> 标签：php, mysql, jquery, transactions, pdo

我有两个网页，一个用于填写信息，另一个用于处理信息。我的第一页是带有 jQ​​uery 和 AJAX 的简单 HTML，只要用户单击一个按钮，它就会执行以下代码：

```
$("#registrar-tienda").click(function() {
    var categoria = $("#categoria").val();
    var nombre = $("#nombre").val();
    var direccion = $("#direccion").val();
    var codigo_postal = $("#codigo").val();
    var poblacion = $("#poblacion").val();
    var provincia = $("#provincia").val();
    var latitud = $("#latitud").val();
    var longitud = $("#longitud").val();
    var telefono = $("#telefono").val();
    var categoria = $("#categoria").val();
    var email = $("#email").val();
    var web = $("#web").val();
    var eco_punto = $("#eco-punto").val();
    var compra_minima = $("#compra-minima").val();
    var maximo_acumulable = $("#maximo-acumulable").val();
    var cliente_hash = $("#cliente-hash").val();
    alert(nombre+direccion+codigo_postal+poblacion+provincia+latitud+longitud+telefono+email+web+eco_punto+compra_minima+maximo_acumulable+cliente_hash);
    $.ajax({
        type:"POST",
        url:"modulos/tiendas/operaciones.php",
        data:{categoria:categoria,nombre:nombre,direccion:direccion,codigo_postal:codigo_postal,poblacion:poblacion,provincia:provincia,latitud:latitud,longitud:longitud,telefono:telefono,categoria:categoria,email:email,web:web,eco_punto:eco_punto,compra_minima:compra_minima,maximo_acumulable:maximo_acumulable,cliente_hash:cliente_hash}
        }).done(function(msg) {
        if(msg == "Tienda agregada") {
            document.location.reload(true);
        } else {
            document.getElementById("errores").innerHTML = msg;
            }
        });
}); 
```

我对网页的特定部分没有任何问题，它会发送变量，如果注意到我正在通过警报对话框确认，并且所有信息都是有效且正确的。

问题出在 PHP 网页上，我的 HTML 中有一个 span 标签，如果有错误，它会报告错误。当我点击提交时，它只显示：

错误：数组（）

如果事务没有执行，我会输入那个错误字符串，但我不确定为什么它没有执行，并且 errorInfo() 方法只报告： Array()

我的PHP代码如下：

```
<?php
require('../../includes/etc/connection.php');
isset($_POST['categoria']) or die ("No hay categoria definida");
isset($_POST['nombre']) or die("No hay nombre de negocio");
isset($_POST['direccion']) or die("No hay direccion de negocio");
isset($_POST['poblacion']) or die ("No hay poblacion de negocio");
isset($_POST['codigo_postal']) or die("No hay codigo postal de negocio");
isset($_POST['provincia']) or die("No hay provincia");
isset($_POST['latitud']) or die("No hay latitud");
isset($_POST['longitud']) or die("No hay longitud");
isset($_POST['telefono']) or die("Sin telefono");
isset($_POST['categoria']) or die("No hay categoria");
isset($_POST['eco_punto']) or die("No hay valor del ecopunto");
isset($_POST['maximo_acumulable']) or die("No hay maximo acumulable");
isset($_POST['compra_minima']) or die("No hay compra minima");
isset($_POST['cliente_hash']) or die("Se tiene que seleccionar un cliente");

if($_POST['nombre'] == "Nombre del establecimiento"): die(0); endif;
if($_POST['direccion'] == "Direccion"): die(0); endif;
if($_POST['poblacion'] == "Poblacion"): die(0); endif;
if($_POST['codigo_postal'] == "Codigo Postal"): die(0); endif;
if($_POST['provincia'] == "Provinicia"): die(0); endif;
if($_POST['telefono'] == "Telefono"): die(0); endif;
if($_POST['email'] == "E-mail"): die(0); endif;

$hash = md5($_POST['nombre'].$_POST['latitud'].$_POST['longitud'].date("Y-m-d H:M:s"));
$fecha_registro = date("Y-m-d");
$strSQL = "INSERT INTO `negocios`(`hash`,`cliente_hash`,`fecha_registro`,`nombre`,`apellido`,`direccion`,`codigo_postal`, `poblacion`, `provincia`, `latitud`,`longitud`,`telefono`, `email`, `web`,`categoria`,`valor_ecopunto`,`maximo_acumulable`,`compra_minima`) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)"; 
if(!($sth = $dbh->prepare($strSQL))) {
    die("Statement not prepared:".$dbh->errorInfo());
}

if(!$dbh->beginTransaction()){
    die ("Transaction didn't begin: ".$dbh->errorInfo());
}

$sth->bindParam(1,$hash,PDO::PARAM_STR,32) or die("Not binded");
$sth->bindParam(2,$_POST['cliente_hash'],PDO::PARAM_STR,32) or die("Not binded");
$sth->bindParam(3,$_POST['fecha_registro'],PDO::PARAM_STR,15) or die("Not binded");;
$sth->bindParam(4,$_POST['nombre'],PDO::PARAM_STR,150) or die("Not binded");;
$sth->bindParam(5,$_POST['direccion'],PDO::PARAM_STR,150) or die("Not binded");;
$sth->bindParam(6,$_POST['codigo_postal'],PDO::PARAM_INT,9) or die("Not binded");;
$sth->bindParam(7,$_POST['poblacion'],PDO::PARAM_STR,50) or die("Not binded");;
$sth->bindParam(8,$_POST['provincia'],PDO::PARAM_STR,50) or die("Not binded");;
$sth->bindParam(9,$_POST['latitud'],PDO::PARAM_STR,10) or die("Not binded");;
$sth->bindParam(10,$_POST['longitud'],PDO::PARAM_STR,10) or die("Not binded");;
$sth->bindParam(11,$_POST['telefono'],PDO::PARAM_STR,20) or die("Not binded");;
$sth->bindParam(12,$_POST['email'],PDO::PARAM_STR,100) or die("Not binded");;
$sth->bindParam(13,$_POST['web'],PDO::PARAM_STR,100) or die("Not binded");;
$sth->bindParam(14,$_POST['categoria'],PDO::PARAM_INT,2) or die("Not binded");;
$sth->bindParam(15,$_POST['eco_punto'],PDO::PARAM_INT,4) or die("Not binded");;
$sth->bindParam(16,$_POST['maximo_acumulable'],PDO::PARAM_INT,4) or die("Not binded");;
$sth->bindParam(17,$_POST['compra_minima'],PDO::PARAM_INT,5) or die("Not binded");;
if(!$sth->execute()){
    die("Error: ".$sth->errorInfo());  // Error reported in the HTML webpage
}
$dbh->commit();
echo "Tienda Agregada";
?> 
```

一开始我以为我没有收到 POST 变量，但是如果我添加：

`print_r($_POST);`

它使用所有正确的值打印 POST 数组

它似乎没有抱怨任何事情，但事务没有提交到数据库。

另一方面，我有其他网页遵循相同的逻辑、相同的代码，并且这些页面按预期工作。

我也是第一次用PDO，平时用的是MySQLi

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T18:27:35.440

PDO`errorInfo`返回一个数组，而不是一个字符串。使用[`var_export`](http://us.php.net/var_export)or[`print_r`](http://us.php.net/print_r)把它变成一个字符串。

* * *

此外，在我看来，最好[将 PDO 的错误模式设置为](http://us.php.net/manual/en/pdo.error-handling.php)在无法执行查询时抛出异常，而不是检查每个查询的结果。然后，您可以将整个事务包装在 try/catch 中，并在出现问题时回滚事务。

# c# - c# 中的闭包会导致代码膨胀吗？

> ID：10574054
> 
> 赞同：4
> 
> 时间：2012-05-13T18:11:36.167
> 
> 标签：c#, clr

c# 中的闭包会导致生成的 il 中的代码膨胀吗？我被告知要避免使用带有闭包变量的 lambda，因为它们会在可以存储 lambda 上下文的目标文件中生成隐藏类。每个具有封闭变量的 lambda 的类。这是真的？或者编译器是否重用了一个现有的类，比如 Tuple 或一些内部类？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-13T18:20:32.940

额外的类仅在需要时生成——当您捕获除`this`. 但是，在大多数情况下，这并不是真正的代码膨胀——为了使委托按照您需要的方式工作，这是*必要的。*

在*某些*情况下，您可以自己编写更高效的代码，但通常要获得具有相同效果的委托，您最终会编写与编译器为您生成的代码相似的代码……但阅读难度要大得多。

大多数时候你不应该担心这种“膨胀”——从一开始就避免对性能进行微优化——优化可读性，并*测量*性能而不是猜测它。然后，您可以攻击*真正*重要的代码位，并且当您证明这是值得的时，可能会牺牲一些可读性来提高性能。

（编写现代 C# 并故意避免使用 lambda 表达式就像试图用一只手绑在背后编码。如果建议您的人担心闭包的“膨胀”，您可能会通过向他展示状态来让他心脏病发作在 C# 5 中为 async/await 生成的机器...）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T18:13:37.363

是的，这是真的。

需要存在一个跟踪变量的类。一个`Tuple`或内部类将无法对所有可能的代码路径执行此操作，因此需要在 IL 中专门为每个 lambda/closure 生成这样的状态机。

这是否是您的应用程序的问题由您确定。

# jquery - jquery仅在存在文本时添加类

> ID：10574057
> 
> 赞同：0
> 
> 时间：2012-05-13T18:12:25.537
> 
> 标签：jquery

这个有点复杂？
我有一堆类“.product-grid .item-box”

**我只想**为那些文本在描述中存在“NEWprod”的人添加一个类，描述类名称是“.product-grid.product-item.description”

为什么要用jquery来做呢？

我试过了

```
$(document).ready(function () {

if ($(' div.description:contains("חדש1")').length > 0) {
    $(".product-grid .item-box").addClass("newprod");
}

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:15:10.677

您需要定位特定的项目框，您共享的示例将它们全部定位。尝试这个：

```
$(document).ready(function () {

  $('div.description:contains("חדש1")').each(function(){
    $(this).closest(".product-grid").find(".item-box").addClass("newprod");
  });

}); 
```

我假设以下 HTML，因为我不得不猜测：

```
<div class="product-grid">
  <div class="item-box">...</div>
  <div class="description">....</div>
</div> 
```

* * *

更新：想了想，HTML大概是这样的：

```
<div class="product-grid">
  <div class="item-box">
      <div class="description">....</div>
  </div>
</div> 
```

如果是这种情况，请使用以下代码：

```
$(document).ready(function () {

  $('div.description:contains("חדש1")').each(function(){
    $(this).closest(".item-box").addClass("newprod");
  });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T18:15:39.833

你的问题不是很清楚，但我认为这可以帮助你。

```
if ($(' div.description').hasClass('חדש')) {
    $(".product-grid .item-box").addClass("newprod");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T18:18:22.933

```
$(' div.description:contains("חדש1")').each(function() {
    $(this).parent().find(".item-box").addClass("newprod");
}); 
```

# r - 在 data.frame 中显示带有 NA 的列

> ID：10574061
> 
> 赞同：20
> 
> 时间：2012-05-13T18:13:00.537
> 
> 标签：r, dataframe

我想在包含缺失值的大型数据框中显示列的名称。基本上，我想要等价于 complete.cases(df) 但对于列，而不是行。有些列是非数字的，所以像

```
names(df[is.na(colMeans(df))]) 
```

返回“colMeans(df) 中的错误：‘x’必须是数字。” 所以，我目前的解决方案是转置数据帧并运行 complete.cases，但我猜应用的一些变体（或 plyr 中的某些东西）效率更高。

```
nacols <- function(df) {
  names(df[,!complete.cases(t(df))])
} 

w <- c("hello","goodbye","stuff")
x <- c(1,2,3)
y <- c(1,NA,0)
z <- c(1,0, NA)
tmp <- data.frame(w,x,y,z)

nacols(tmp)
[1] "y" "z" 
```

有人可以向我展示一个更有效的功能来识别具有 NA 的列吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-13T18:42:07.520

这是我所知道的最快的方法：

```
unlist(lapply(df, function(x) any(is.na(x)))) 
```

**编辑：**

我猜其他人都把它写完了，所以在这里它是完整的：

```
nacols <- function(df) {
    colnames(df)[unlist(lapply(df, function(x) any(is.na(x))))]
} 
```

如果您在 WIN 7 机器上对 4 个解决方案进行微基准测试：

```
Unit: microseconds
    expr     min      lq  median      uq        max
1 ANDRIE  85.380  91.911 106.375 116.639    863.124
2 MANOEL  87.712  93.778 105.908 118.971   8426.886
3  MOIRA 764.215 798.273 817.402 876.188 143039.632
4  TYLER  51.321  57.853  62.518  72.316   1365.136 
```

这是一个视觉效果： ![在此处输入图像描述](../Images/209f2f16f977702283745d8ff50141d3.png)

**编辑**在我写这个的`anyNA`时候不存在或者我不知道它。这可能会加快速度……根据帮助手册`?anyNA`：

> 通用函数以可能更快的方式`anyNA`实现（尤其是对于原子向量）。`any(is.na(x))`

```
nacols <- function(df) {
    colnames(df)[unlist(lapply(df, function(x) anyNA(x)))]
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-13T18:42:32.967

这是一种方法：

```
colnames(tmp)[colSums(is.na(tmp)) > 0] 
```

希望能帮助到你，

马诺埃尔

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-13T18:43:51.640

单程...

```
nacols <- function(x){
  y <- sapply(x, function(xx)any(is.na(xx)))
  names(y[y])
}  

nacols(tmp)
[1] "y" "z" 
```

* * *

说明：由于结果`y`是一个逻辑向量，因此仅在为 TRUE`names(y[y])`的情况下返回 y 的名称。`y`

# jquery - 如何知道图像加载何时完成

> ID：10574064
> 
> 赞同：-1
> 
> 时间：2012-05-13T18:13:27.697
> 
> 标签：jquery

> **可能重复：**
> [JavaScript：知道图像何时完全加载](https://stackoverflow.com/questions/1257385/javascript-know-when-an-image-is-fully-loaded)

我有这个代码：

```
$("#imageOnPage").attr("src", urlString); 
```

在图像在屏幕上可见后，我需要以某种方式触发一个事件。换句话说，我需要图像的 onLoad 事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T18:15:52.597

实际上有一个事件：

```
$('#imageOnPage').load(function()
{
/* your code */
}); 
```

当您的图像加载时，它会被触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T18:16:09.270

您应该能够绑定到`load`图像的事件。

```
$('#imageOnPage').load(function() {
    alert('image loaded');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T18:19:25.740

```
$('#imageOnPage').load(function(){
  $(this).attr('src', urlString);
}); 
```

# lpeg - lpeg 语法来解析可能有内部组的逗号分隔组

> ID：10574067
> 
> 赞同：0
> 
> 时间：2012-05-13T18:13:51.953
> 
> 标签：lpeg

我需要解析可能在组内具有内部组的逗号分隔组（括在括号中）。它应该只分隔外部组。

我有一个功能可以做到这一点：

```
function lpeg.commaSplit(arg)
    local P,C,V,sep = lpeg.P, lpeg.C, lpeg.V, lpeg.P(",")
    local p = P{
        "S";
        S = lpeg.T_WSpace * C(V"Element") * (lpeg.T_WSpace * sep * lpeg.T_WSpace * C(V"Element"))^0 * lpeg.T_WSpace,
        Element = (V"Group")^0 * (1 - lpeg.T_Group - sep)^0 * (V"Group" * (1 - lpeg.T_Group - sep)^0)^0 * (1 - sep)^0,
        Group = lpeg.T_LGroup * ((1 - lpeg.T_Group) + V"Group")^0 * lpeg.T_RGroup
    }^-1
    return lpeg.match(lpeg.Ct(p), arg)

end 
```

但问题是删除可能包含该组的额外括号。

这是一个测试字符串：

```
[[a,b,[c,d]],[e,[f,g]]] 
```

应该解析为

```
[a,b,[c,d] & [e,[f,g]] 
```

请注意，内部组是单独的。简单地删除末尾多余的括号是行不通的，因为你最终会得到一个像`a,b,[c,d]],[e,[f,g]`.

任何想法如何修改 lpeg 语法以允许外部组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T17:00:00.113

由于我不是在 LPeg 中制作语法的专家，所以我发现这个练习很有趣......

我无法使用你的语法，所以我继续制作自己的语法，更小的块更容易理解，我可以在哪里放置我需要的捕获。

我想我得到了一个不错的经验结果。它适用于您的测试用例，我不知道组是否可以更深入地嵌套等。捕获的后处理有点临时......

```
require"lpeg"

-- Guesswork...
lpeg.T_WSpace = lpeg.P" "^0
lpeg.T_LGroup = lpeg.P"["
lpeg.T_RGroup = lpeg.P"]"
lpeg.T_Group = lpeg.S"[]"

function lpeg.commaSplit(arg)
  local P, C, Ct, V, sep = lpeg.P, lpeg.C, lpeg.Ct, lpeg.V, lpeg.P","
  local grammar =
  {
    "S";
    S = lpeg.T_WSpace * V"Group" * lpeg.T_WSpace,
    Group = Ct(lpeg.T_LGroup * C(V"Units") * lpeg.T_RGroup),
    Units = V"Unit" *
        (lpeg.T_WSpace * sep * lpeg.T_WSpace * V"Unit")^0,
    Unit = V"Element" + V"Group",
    Element = (1 - sep - lpeg.T_Group)^1,
  }
  return lpeg.match(Ct(P(grammar)^-1), arg)
end

local test = "[[a,b,[c,d]],[e,[f,g]]]"
local res = lpeg.commaSplit(test)
print(dumpObject(res))
print(res[1], res[1][1], res[1][2])
local groups = res[1]
local finalResult = {}
for n, v in ipairs(groups) do
  if type(v) == 'table' then
    finalResult[#finalResult+1] = "[" .. v[1] .. "]"
  end
end
print(dumpObject(finalResult)) 
```

dumpObject 只是我自己的一个表转储。这段代码的输出如下：

```
local T =
{
  {
    "[a,b,[c,d]],[e,[f,g]]",
    {
      "a,b,[c,d]",
      {
        "c,d"
      }
    },
    {
      "e,[f,g]",
      {
        "f,g"
      }
    }
  }
}

table: 0037ED48 [a,b,[c,d]],[e,[f,g]]   table: 0037ED70

local T =
{
  "[a,b,[c,d]]",
  "[e,[f,g]]"
} 
```

就个人而言，我不会用我的东西污染 lpeg 表，但我保留了你的风格。

我希望这将是有用的（或将成为使您前进的起点）。

# xcode - XCode 4.3 字体和颜色导出

> ID：10574070
> 
> 赞同：10
> 
> 时间：2012-05-13T18:14:16.807
> 
> 标签：xcode, xcode4.3

我在我的笔记本电脑上为 XCode 4.3 中的代码编辑创建了一个字体和颜色主题，我对此特别满意，我想将其导出，然后将其重新导入我的桌面。

自从使用了这个新的 XCode 应用版本后，我似乎再也无法在 ~\L​​ibrary 中找到任何与用户偏好相关的内容了。有谁知道字体和颜色设置现在存储在哪里，或者如何导出/导入 XCode 颜色主题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-31T10:17:48.657

该文件夹仍然存在，它只是隐藏在 Lion 中。您需要使用终端复制文件或通过键入终端“默认写入 com.apple.finder AppleShowAllFiles TRUE”来显示隐藏文件

路径是：~/Library/Developer/Xcode/UserData/FontAndColorThemes

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-27T05:01:56.430

您实际上不必使用终端，您可以使用Finder 菜单栏中*“前往”*菜单中的“前往*文件夹...”来访问该文件夹。*键盘快捷键是+ + 。*`shift``command``G`*

 *[![这](../Images/9a8b16fe93c69c792cf26efb51cea4a0.png)](https://i.stack.imgur.com/lhKZH.png)

粘贴 `~/Library/Developer/Xcode/UserData/FontAndColorThemes`到结果对话框中。

[![单击指示的菜单项产生的对话框。](../Images/94395ae6e381e3030eb108dba9e600ab.png)](https://i.stack.imgur.com/9urqH.png)

**注意：**此文件夹仅在您添加或复制主题后才存在。*

# objective-c - 随机化单词

> ID：10574073
> 
> 赞同：0
> 
> 时间：2012-05-13T18:14:54.620
> 
> 标签：objective-c, ios, xcode

我正在制作我的第一个 iOS 应用程序，需要一些帮助。以下是它的工作原理：

用户在文本字段中输入单词，按下按钮，在标签中它应该是这样的： `[Users word] [Randomly picked word]`.

所以我认为我应该用随机单词制作一个数组，然后在按下按钮时以某种方式随机化它们，以在用户在文本字段中输入的单词之后显示一个随机单词。

但它应该如何工作？这是我的想法：

随机化这个（虽然不知道如何）：

```
NSArray *words = [NSArray arrayWithObjects: @"Blue", @"Green", @"Red", nil ]; 
```

这是显示文本字段中文本的代码：

```
NSString *labeltext = [NSString stringWithFormat:@"%@", [textField text]]; 
```

如果我放`label.text = labeltext;`，那么它会显示用户输入的单词，但我被困在“显示数组中的随机单词”部分。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T18:19:59.353

```
 NSArray *words = [NSArray arrayWithObjects: @"Blue", @"Green", @"Red", nil ];
    NSString *str=[words objectAtIndex:arc4random()%[words count]];
    // using arc4random(int) will give you a random number between 0 and int.
    // in your case, you can get a string at a random index from your words array 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:58:43.290

到 OP。要使随机答案不重复，请将您的数组设置为视图控制器的 viewDidLoad 中的实例变量。还要创建一个属性剩余单词：

@property (nonatomic, 保留) NSMutableArray *remainingWords;

您的 viewDidLoad 代码如下所示：

```
-(void) viewDidLoad;
{
  //Create your original array of words.
  self.words = [NSArray arrayWithObjects: @"Blue", @"Green", @"Red", nil ];

  //Create a mutable copy so you can remove words after choosing them.
  self.remainingWords = [self.words mutableCopy];
} 
```

然后你可以写一个这样的方法来从你的数组中获取一个唯一的单词：

```
- (NSString *) randomWord;
{
  //This code will reset the array and start over fetching another set of unique words.
  if ([remainingWords count] == 0)
    self.remainingWords = [self.words MutableCopy];

  //alternately use this code:
  if ([remainingWords count] == 0)
    return @""; //No more words; return a blank.
  NSUInteger index = arc4random_uniform([[remainingWords count])
  NSString *result = [[[remainingWords index] retain] autorelease];
  [remainingWords removeObjectAtindex: index]; //remove the word from the array.
} 
```

# gnuplot - Gnuplot 无法创建 jpeg

> ID：10574074
> 
> 赞同：0
> 
> 时间：2012-05-13T18:14:55.523
> 
> 标签：gnuplot

我试图将图形保存为 jpeg，但由于某种原因我无法让它工作。我按照 Manning Gnuplot in action 中的示例进行操作，但重新绘制时似乎没有创建 jpeg。下面是代码，如果有人能指出我哪里出错了，我将不胜感激。

```
gnuplot> plot sin(x)
gnuplot> set terminal jpeg
Terminal type set to 'jpeg'
Options are 'nocrop font "arial,12" fontscale 1.0 size 640,480 '

gnuplot> set output "c:\Users\*****\Desktop\sinxplot.jpeg"
gnuplot> replot
gnuplot> set terminal wxt enhanced
Terminal type set to 'wxt'
Options are '0 enhanced'
gnuplot> set output
gnuplot> 
```

仅供参考，我使用的是 4.6 版补丁级别 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:41:30.540

`gnuplot`用作`\`字符串中的转义字符，因此可能会弄乱您的路径。尝试使用单引号而不是双引号，或`\\`用作路径分隔符。

（哦，顺便说一句：jpeg 并不适合绘图，因为它的压缩算法会导致伪影，png 在这里要好得多。）

# core-data - EXC_BAD_ACCESS 取决于 Core Data 中的字符串长度

> ID：10574087
> 
> 赞同：1
> 
> 时间：2012-05-13T18:16:58.800
> 
> 标签：core-data, nsstring, nsmutablearray, exc-bad-access

这是我遇到过的最奇怪/最烦人的错误！我有一个带有 NSMutableArray selectedObjects 的模态表视图。使用 selectedObjects，我将数据源中的 NSStrings 与 containsObject 进行比较，以查看是否需要突出显示某行。

好的，这是奇怪的部分！我的 selectedObjects 来自我的 Core Data sqlite 数据库中的字符串。当 selectedObjects 中的每个 NSStrings =< 4 个字符时，我没有得到 exc_bad_access。但是，如果其中一个 selectedObjects 的字符串 > 4 个字符，一旦模态表视图显示，我会得到一个 exc_bad_access！

其他奇怪的是，当我手动分配 selectedObjects 数组时（即 [NSMutableArray arrayWithObjects:@"selected 1", @"selected 2", nil]; ），我没有得到 exc_bad_access。我什至可以做 [NSMutableArray arrayWithObject:[NSString stringWithFormat:@"%@", @"selected 1"];。

它似乎都依赖于我的核心数据对象图中的 selectedObject 字符串。例如，如果我在 xcdatamodel 中为我选择的字符串设置了 4 个字符的默认值，我不会得到 exc_bad_access（例如，@"asdf"），但是如果我将它设置为 @"asdfg"，那么它会导致错误。我真的很困惑为什么它会有所作为！

有没有人遇到过/听说过类似的错误？

非常感谢你的帮助！

# sql - 如何用 ruby 打开 .sql 文件？

> ID：10574093
> 
> 赞同：0
> 
> 时间：2012-05-13T18:17:54.797
> 
> 标签：sql, ruby

```
 f = File.open("alice.sql").readlines 
```

但我认为我需要某种 SQL-Library 和 RubyGem 才能工作和操作文件。

有什么图书馆可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:30:18.813

如果你想执行它，你可以使用[ActiveRecord](http://www.rabbitcreative.com/2007/06/08/executing-raw-sql-in-rails)或[DataMapper](http://www.mail-archive.com/datamapper@googlegroups.com/msg00759.html)例如。

# java - 使用 Java 和 Hibernate 从存储过程中获取返回值（标量），而不是结果表

> ID：10574095
> 
> 赞同：1
> 
> 时间：2012-05-13T18:18:03.547
> 
> 标签：java, sql-server, hibernate, stored-procedures, return-value

我很难从使用 Hibernate 和 Java 的存储过程中获取返回值（整数）。

我的存储过程如下：

```
create proc dbo.CheckEquipmentAuthorization
    @ReplicaId int
as
    declare @IDAuthType int
    select @IDAuthType = AuthorizationType.IDAuthorizationType from AuthorizationType
    inner join ReplicaAuthorization on ReplicaAuthorization.RefIDAuthorizationType = AuthorizationType.IDAuthorizationType
    inner join Replica_ReplicaAuthorization on Replica_ReplicaAuthorization.RefIDAuthorization = ReplicaAuthorization.IDAuthorization
    inner join Replica on Replica.IDReplica = Replica_ReplicaAuthorization.RefIDReplica
    where Replica.IDReplica = @ReplicaId
    and GETDATE() between ReplicaAuthorization.AuthBegin and ReplicaAuthorization.AuthEnd

    declare @AuthIntValue int
    set @AuthIntValue = 10
    if (@IDAuthType is not null)
    begin
        select @AuthIntValue = AuthorizationType.IntValue from AuthorizationType
        where AuthorizationType.IDAuthorizationType = @IDAuthType
    end
    print @AuthIntValue
    return @AuthIntValue 
```

我正在尝试使用以下方法获取返回值：

```
 query = session.createSQLQuery(
    "exec CheckEquipmentAuthorization(:replicaId)")
    .setParameter("replicaId", replicaId); 
```

但似乎我只能使用它获得一个结果表，并且由于我的过程没有生成结果表，我也不希望生成一个结果表，所以它失败了。

**有没有办法使用 createSQLQuery() 方法获取*返回值？***

我正在使用 Hibernate、Java 和 SQL Server。存储过程工作正常（我已经使用 sql 客户端对其进行了测试）。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:33:22.540

这似乎是[this](https://stackoverflow.com/questions/5405830/hibernate-and-stored-procedure)的副本。您是否映射了存储过程的标量返回类型？你翻译成那个返回类型了吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T21:46:24.663

在存储过程中，我替换了

```
return @AuthIntValue 
```

和

```
select @AuthIntValue as RetVat 
```

我调用存储过程并将结果转换为我创建的对象的方式。

```
StoredProcResult o = (StoredProcResult)session.createSQLQuery("exec CheckEquipmentAuthorization :replicaId")
.addScalar("retVal", Hibernate.INTEGER)
.setParameter("replicaId", replicaId)
.setResultTransformer(Transformers.aliasToBean(StoredProcResult.class))
.setCacheMode(CacheMode.GET)
.uniqueResult();

int xpto = o.getRetVal(); 
```

StoredProcResult 对象：

```
public class StoredProcResult {
    public int retVal;

    public int getRetVal() {
        return retVal;
    }

    public void setRetVal(int retVal) {
        this.retVal = retVal;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-26T03:59:43.123

我知道这已经很老了，但我发现自己遇到了同样的问题，并在使用 MS SQL Server 时找到了一个简单的解决方案。修改您的原始查询如下：

```
query = session.createSQLQuery(
    "declare @result int; exec @result = CheckEquipmentAuthorization(:replicaId); select @result")
    .setParameter("replicaId", replicaId); 
```

现在您`query.uniqueResult()`无需修改​​原始存储过程即可获得返回码。当您不能（或不想）修改原始存储过程时，这会很方便。

# javascript - 使用 jQuery attr 操作后，Dom 字符串不会改变

> ID：10574098
> 
> 赞同：0
> 
> 时间：2012-05-13T18:18:27.777
> 
> 标签：javascript, jquery, epub

我正在制作一个基于 js 的 epub 阅读器作为周末项目，我正在尝试将每本书页面上图像的 src 属性从图像 url 更改为从 epub zip 加载的数据 URI。这是我的功能：

```
//page contents is just an html string of the book's page
pageContents = GlobalZipLoader.load('epub.zip://' + pageLocation);
pageContents = replaceImages(pageContents)

...

function replaceImages(pageContents){
  $(pageContents).find('img').each(function(){
    var domImage = $(this);

    //this is something like ".../Images/img.jpg"
    var imageLocation = domImage.attr('src'); 

    //this returns the proper data-uri representation of the image
    var dataUri = GlobalZipLoader.loadImage('epub.zip://' + imageLocation);

    //this doesn't seem to "stick"
    domImage.attr('src', dataUri);
  });
  return pageContents;
} 
```

replaceImages 函数返回的 pageContents 仍然具有旧的 src 属性。如果需要，我可以提供更多细节，但非常感谢任何帮助。

感谢 The System Restart 和 Ilia G 的正确答案：

```
function replaceImages(pageContents) {
    newContent = $(pageContent);
    ... manip ...
    return newContent;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:44:31.703

你不需要克隆它。只需设置`pageContents = $(pageContents);`，然后执行图像替换`pageContents`，然后`return pageContents.html();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T18:54:24.527

由于 pageContents 只是一个字符串，因此您需要返回它的修改版本。尝试这个：

```
function replaceImages(pageContents){
  // save jQuery object
  var $pageContents = $(pageContents);

  $pageContents.find('img').each(function(){
    var domImage = $(this);

    //this is something like ".../Images/img.jpg"
    var imageLocation = domImage.attr('src'); 

    //this returns the proper data-uri representation of the image
    var dataUri = GlobalZipLoader.loadImage('epub.zip://' + imageLocation);

    //this doesn't seem to "stick"
    domImage.attr('src', dataUri);
  });

  // return contents of the modified jQuery object
  return $pageContents.html();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T18:21:12.463

`src`您应该在图像加载完成后尝试更改图像；

我认为这是在`loadImage`功能上发生的。

根据您的更新问题：

你不需要任何`clone()`，我想。只需存储`pageContents`在一个`tempContents`变量中并使用该变量

# java - Eclipse + 断点 = 没有任何反应

> ID：10574101
> 
> 赞同：-1
> 
> 时间：2012-05-13T18:18:56.673
> 
> 标签：java, eclipse

我正在尝试在 Eclipse 中使用断点，但是当我设置它们时 - 没有任何反应。真的。例如，在 MVS 中，当程序到达断点时它会停止并且我可以看到变量。

如何以同样的方式在 Eclipse 中使用断点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T18:20:21.510

你需要*调试*程序，点击运行按钮旁边的小bug而不是说运行按钮

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T18:21:51.173

首先选择**Debug**透视图为：

![在此处输入图像描述](../Images/66475dbe20c11afdee58ccea9b9c516a.png)

然后在你想要的地方设置**断点：**

![在此处输入图像描述](../Images/bc6add546581ec13343137baff7b6146.png)

之后通过**Debug As->Debug Configurations...**创建一个 Debug 配置，然后 Debug as **Android Application**如下所示： ![在此处输入图像描述](../Images/73cb7769d7e09ce83714183c71f3b954.png)

**然后在 Debug 透视图中，您可以通过按F8**来跟踪/观察所需变量的值： ![在此处输入图像描述](../Images/97549558d18c4d98bbd468f9faaf6133.png) 就是这样，您还可以通过**Expressions**视图评估表达式。如果未启用，请从以下位置选择它： **Window->Show View->Other->Debug->Expressions**。

# twitterizer - Newtonsoft.Json.dll 中的 Twitterizer Hometimeline 异常

> ID：10574104
> 
> 赞同：1
> 
> 时间：2012-05-13T18:19:40.657
> 
> 标签：twitterizer

试图获取用户`HomeTimeLine`，但我得到以下异常

> Newtonsoft.Json.dll 中发生“System.NullReferenceException”

我的代码看起来像：

```
 **OAuthTokens tokens = new OAuthTokens();
        TimelineOptions properties = new TimelineOptions();

        tokens.AccessToken = "myaccessToke";
        tokens.AccessTokenSecret = "my secret accss token";
        tokens.ConsumerKey = "my consumer key";
        tokens.ConsumerSecret = "my consomer secret";
        properties.UseSSL = true;
        properties.IncludeRetweets = true;

        //Pas besoin de parser avec Twitterizer

        try
        {
            TwitterResponse<TwitterStatusCollection> timelineResponse =   TwitterTimeline.HomeTimeline(tokens, properties);
            foreach (var item in timelineResponse.ResponseObject)
            {
                String textStatus = item.Text;
            }
        }
        catch (Exception e)
        {
            Debug.WriteLine("Error message :"+e.Message);
        }** 
```

当我尝试使用相同的代码来获取朋友时间线时，它可以正常工作，例如：

```
TwitterResponse<TwitterStatusCollection> timelineResponse =
TwitterTimeline.FriendTimeline(tokens); 
```

请大家帮忙，谢谢

# asp.net - HTTPHandler 和 IsReusable 与 WebHandler

> ID：10574106
> 
> 赞同：6
> 
> 时间：2012-05-13T18:19:59.047
> 
> 标签：asp.net, httphandler

我有可重用的 HTTPHandlers 的问题。我想检查该`IsReusable`属性是如何工作的。所以我创建了两个处理程序：

可重复使用的：

```
public class ReusableHandler : IHttpHandler
{
    public bool IsReusable
    {
        get { return true; }
    }

    private int _counter;

    public ReusableHandler()
    {
        _counter = 0;
    }

    public void ProcessRequest(HttpContext context)
    {
        context.Response.Write("Reusable: " + _counter++);
    }

} 
```

并且不可重复使用：

```
public class NonReusableHandler : IHttpHandler
{
    public bool IsReusable
    {
        get { return false; }
    }

    private int _counter;

    public NonReusableHandler()
    {
        _counter = 0;
    }

    public void ProcessRequest(HttpContext context)
    {
        context.Response.Write("NonReusable: " + _counter++);
    }

} 
```

它们都按预期工作：Reusable 每次返回递增值，而 NonReusable 每次返回 0。但是当我将我的处理程序用作 WebHandlers (*.ashx) 时，它们每次都返回 0（代码完全相同）。这是否意味着当我使用 WebHandlers 时该`IsReusable`属性被忽略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:41:20.877

默认的 .NET 配置是使用该类型`System.Web.UI.SimpleHandlerFactory`来处理对 .NET 的请求`*.ashx`。您可以通过查看 IIS 管理器中的 Http Handlers 部分来验证这一点。

如果你查看这个工厂的源代码，你会发现它根本不检查`IsReusable`属性。它也是无状态的——它不缓存创建的实例。要查看使用此属性的工厂类，请查看`System.Web.Configuration.HandlerFactoryWrapper`.

现在，如果您看一下，`System.Web.HttpApplication.RecycleHandlers()`您会发现它只是间接调用`System.Web.IHttpHandlerFactory.ReleaseHandler()`方法（下一段中提到的工厂缓存本身没有处理程序实例缓存）。应用程序本身忽略了`IsReusable`属性（工厂应该这样做），并且正如之前发现的那样，`.ashx`文件使用不重用实例的工厂。

还值得注意的是，它`System.Web.HttpApplication.GetFactory()`似乎正在使用缓存，但该缓存将仅存储工厂本身的实例（如果已指定）。如果未指定显式工厂，则该方法将创建`HandlerFactoryWrapper`上述工厂（这反过来将缓存处理程序实例）。

据我所见，.NET 框架中没有可以使用的工厂类来代替`SimpleHandlerFactory`（`HandlerFactoryWrapper`没有无参数构造函数），尽管您可以创建自己的。

# .htaccess - 使用 htaccess 将除一个文件外的所有文件重定向到安全站点

> ID：10574110
> 
> 赞同：0
> 
> 时间：2012-05-13T18:20:53.233
> 
> 标签：.htaccess

我有一个安全站点，如果访问者通过不安全的 http:// 访问，他们目前正在将其重定向到该站点。我这样做是这样的：

```
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

我需要一个文件 domain.com/example.php 永远不会被重定向到安全站点，而只是将用户留在那里。任何人都可以建议这样做的方法吗？我看过类似的代码，但我无法弄清楚需要更改什么才能完全正常工作

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T18:26:11.600

只需使用额外的 RewriteCond 过滤掉您的 URI：

```
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} !/example.php
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

请参阅[mod_rewrite 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T18:24:53.567

这个先前的 SO 答案将有所帮助： [.htaccess mod_rewrite - 如何从重写规则中排除目录](https://stackoverflow.com/questions/1848500/htaccess-mod-rewrite-how-to-exclude-directory-from-rewrite-rule)

基本上，您需要一个高于现有规则的重写规则，将您想要的 URL “重写”给自己。

# jquery - 手风琴菜单动画问题

> ID：10574113
> 
> 赞同：1
> 
> 时间：2012-05-13T18:21:39.263
> 
> 标签：jquery

我根据一个找到的 jquery ui 创建了简单的手风琴菜单。我在为元素设置动画时遇到问题，单击时我无法正确使用向上或向下滑动动画，并且如果使用它，还会出现许多其他问题。因此，任何帮助都将有助于获得动画。

JS 小提琴：http: [//jsfiddle.net/cZbr6/](http://jsfiddle.net/cZbr6/)

脚本

```
 $(document).ready(function() {

                var notfContainer = $('#notifications');

                notfContainer.find("a").each(function() {
                    var e = $(this);
                    if(!e.hasClass('active')) {         
                                e.next().css({
                                    'display':'none'
                                });     //hide all other div's and set height as 0px

                    }       
                });

                notfContainer.on('click' , function(event) {
                    var target = $(event.target);       //Used to find the element on which the click event has happened.

                    if(target.is("a")) {                //If the click event occurred on <a>
                        var self = $(target);           //Select the element
                        if(self.hasClass('active')) {   //If is is already expanded .. has active class
                            return;                     //just .. return 
                        }else {

                        notfContainer.find("a").each(function() {
                            var e = $(this);
                            if(e.hasClass('active')) {  
                                        e.removeClass('active');
                                        e.next().css('display','none');     //hide all other div's
                                        return false;   //break the loop    
                            }   

                        });
                            self.addClass('active');    
                            self.next().css({
                                'display':'block',
                                'height':'160px'
                            });

                        }

                    }
                });

            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T20:04:06.347

### *[jsBin 演示](http://jsbin.com/uzihef/edit#javascript,html,live)*

jQuery：

```
$(document).ready(function() {

    $('#notifications a.active').next('div').siblings('div').hide();

    $('#notifications a').click(function() {
        $(this).addClass('active').siblings('a').removeClass('active');
        var el = $(this).next('div');
        check = (el.is(':visible')) ? el.slideUp() : function(){ $('#notifications div').slideUp(); el.slideDown(); }();
    });

}); 
```

# android - 在 ViewPager 中引用片段

> ID：10574114
> 
> 赞同：10
> 
> 时间：2012-05-13T18:21:39.453
> 
> 标签：android, android-fragments

我在 ViewPager 中引用我的片段时遇到问题。我想这样做是因为从我的活动中我想刷新指定位置的片段（例如当前显示的片段）。

目前我有这样的事情：

```
public static class MyPagerAdapter extends FragmentPagerAdapter {

    private static final String TAG = "MyPagerAdapter";
    private static HashMap<Integer, EventListFragment> mPageReferenceMap = new HashMap<Integer, EventListFragment>();

    public MyPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {
        return NUM_ITEMS;
    }

    @Override
    public Fragment getItem(int position) {
        Log.i(TAG, "getItem: "+position);
        int dateOffset = position-1;
        EventListFragment mFragment = EventListFragment.newInstance(dateOffset);
        mPageReferenceMap.put(position, mFragment);
        return mFragment;
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        Log.i(TAG, "destroyItem: "+position);
        mPageReferenceMap.remove(position);
        super.destroyItem(container, position, object);
    }

    public EventListFragment getFragment(int key) {
        Log.i(TAG, "Size of pager references: "+mPageReferenceMap.size());
        return mPageReferenceMap.get(key);
    }
} 
```

问题是`destroyItem()`调用的频率比调用的多`getItem()`，所以我留下了空引用。如果我不使用`destroyItem()`清除对已破坏片段的引用......那么我引用不存在的片段。

有什么好的方法来引用创建的片段`EventListFragment mFragment = EventListFragment.newInstance(dateOffset);`吗？或者我应该怎么做才能从我的活动中刷新 ViewPager 中的片段（准确地说是从选项菜单）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T18:30:37.430

我设法解决了它。诀窍是在 Activity 中创建参考列表，而不是 PagerAdapter。它是这样的：

```
List<WeakReference<EventListFragment>> fragList = new ArrayList<WeakReference<EventListFragment>>();

@Override
public void onAttachFragment (Fragment fragment) {
    Log.i(TAG, "onAttachFragment: "+fragment);
    if(fragment.getClass()==EventListFragment.class){
        fragList.add(new WeakReference<EventListFragment>((EventListFragment)fragment));
    }
}
public EventListFragment getFragmentByPosition(int position) {

    EventListFragment ret = null;
    for(WeakReference<EventListFragment> ref : fragList) {
        EventListFragment f = ref.get();
        if(f != null) {
            if(f.getPosition()==position){
                ret = f;
            }
        } else { //delete from list
            fragList.remove(f);
        }
    }
    return ret;

} 
```

当然，您的片段必须实现一个`getPosition()`功能，但无论如何我都需要这样的东西，所以这不是问题。

感谢亚历克斯洛克伍德的建议`WeakReference`！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T19:10:30.503

两件事情：

1.  `onCreate`在 Activity 的方法（或初始化 ViewPager 的任何位置）中添加以下行：

    ```
    mPager.setOffscreenPageLimit(NUM_ITEMS-1); 
    ```

    这会将额外的屏幕外页面保留在内存中（即防止它们被破坏），即使它们当前没有显示在屏幕上。

2.  您可能会考虑实施 your`HashMap`以便它拥有`WeakReference<Fragment>`s 而不是`Fragment`s 本身。请注意，这将要求您`getFragment`按如下方式更改您的方法：

    ```
    WeakReference<Fragment> weakRef = mPageReferenceMap.get(position);
    return (weakRef != null) ? weakRef.get() : null; 
    ```

    这与您的问题无关......这只是我注意到并认为我会引起您注意的事情。保持`WeakReferences`你`Fragment`的 s 将允许你利用垃圾收集器的能力来确定你的可达性，所以你不必自己做。

# c++ - 从 c++ 应用程序执行的外部程序中的有限 CPU 负载

> ID：10574115
> 
> 赞同：0
> 
> 时间：2012-05-13T18:21:41.913
> 
> 标签：c++, visual-c++, shellexecute

`system`我用 Visual C++ 编写的应用程序通过函数调用执行外部程序。系统命令是对[立体播放器](http://3dtv.at)实例的调用，其中某些立体 3D 视频文件和全屏模式作为参数传递。

问题是从 C++ 应用程序调用的立体播放器播放视频的速度非常慢。从 Windows cmd 执行相同的命令不会导致这种行为。

当我运行内置的 Windows CPU 负载分析器时，我得到以下结果（如果需要，我可以附上屏幕截图）：

*   从 cmd 执行的立体播放器实例同时加载所有可用内核，每个内核分别加载 40-50%（我尝试在不同的机器上使用 2 个和 4 个内核）。
*   从 C++ 应用程序执行的立体播放器实例将第一个内核加载 90-100%，并且不加载其他内核。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:49:08.567

尝试对您正在生成的进程使用 SetProcessAffinityMask

# ajax - jQueryMobile - Phonegap - 调用 $.ajax 时闪烁的过渡

> ID：10574119
> 
> 赞同：1
> 
> 时间：2012-05-13T18:21:59.107
> 
> 标签：ajax, jquery-mobile, cordova, transitions

我正在使用 PhoneGap (Corduva 1.7.0) 和 jQueryMobile 1.1.0 编写应用程序。我对 jQuery Mobile 的正常转换有疑问。如果我使用 AJAX($.ajax) 的东西，过渡会“闪烁”，而且效果很差。但如果我不使用 AJAX($.ajax)，则转换效果很好。我尝试了一切，我需要解决这个问题。我粘贴了一个非常简单的代码来模拟它。

```
<!DOCTYPE html> 
```

```
 <title></title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
    <meta charset="utf-8">

    <link rel="stylesheet" href="Themes_48Horascontelefonica/jquery.mobile-1.1.0.css" />

    <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="js/jquery.mobile-1.1.0.min.js"></script>

    <!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->
    <script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
    <script type="text/javascript">
        // If you want to prevent dragging, uncomment this section
        /*
         function preventBehavior(e)
         {
         e.preventDefault();
         };
         document.addEventListener("touchmove", preventBehavior, false);*/

        /* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
         see http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
         for more details -jm */
        /*
         function handleOpenURL(url)
         {
         // TODO: do something with the url passed in.
         }
         */

        function onBodyLoad() {
            document.addEventListener("deviceready", onDeviceReady, false);
        }

        /* When this function is called, Cordova has been initialized and is ready to roll */
        /* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
         see http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
         for more details -jm */
        function onDeviceReady() {
            // do your thing!
            //navigator.notification.alert("Cordova is working")
            //$.mobile.showPageLoadingMsg("a", "Loading theme a...");

        }

    </script>

    <script type="text/javascript">
        function OnSuccess(data, status) {
            $.mobile.hidePageLoadingMsg();
            $.mobile.changePage($("#bar"), {
                transition : "slide"
            });
        }

        function OnError(request, status, error) {
            $.mobile.hidePageLoadingMsg();
            navigator.notification.alert("Error.", null, "¡Error!", "Ok");
        }

        $('#pressme1').live('vclick', function(event, o) {

            event.preventDefault();

            var valueTest = "valueTest";

            $.mobile.showPageLoadingMsg();

            $.ajax({
                type : "GET",
                url : "http://localhost/Service1/Connect",
                data : {
                    valueTest : valueTest
                },
                timeout : 10000,
                cache : true,
                dataType : "JSON",
                success : OnSuccess,
                error : OnError
            });

        })

    </script>

</head>

<body>

    <!-- Start of first page -->
    <div data-role="page" id="foo">

        <div data-role="header">
            <h1>Foo</h1>
        </div><!-- /header -->

        <div data-role="content">
            <p>
                I'm first in the source order so I'm shown as the page.
            </p>
            <p>
                <a href="#" id="pressme1" data-role="button"> <label class="aLabelEnter">Press Me 1</label> </a>
            </p>
        </div><!-- /content -->

        <div data-role="footer">
            <h4>Page Footer</h4>
        </div><!-- /footer -->
    </div><!-- /page -->

    <!-- Start of second page -->
    <div data-role="page" id="bar">

        <div data-role="header">
            <h1>Bar</h1>
        </div><!-- /header -->

        <div data-role="content">
            <p>
                I'm the second in the source order so I'm hidden when the page loads. I'm just shown if a link that references my ID is beeing clicked.
            </p>
            <p>
                <a href="#foo" data-role="button"> <label class="aLabelEnter">Press Me 2</label> </a>

            </p>
        </div><!-- /content -->

        <div data-role="footer">
            <h4>Page Footer</h4>
        </div><!-- /footer -->
    </div><!-- /page -->
</body> 
```

# c++ - 使用 waf 构建系统将程序与 Boost.Asio 链接

> ID：10574121
> 
> 赞同：1
> 
> 时间：2012-05-13T18:22:10.297
> 
> 标签：c++, python, gcc, boost, waf

我正在尝试在 Debian 挤压、python 2.6.6 上使用 waf 构建[最简单的 Boost.Asio 教程示例“timer1”](http://www.boost.org/doc/libs/1_40_0/doc/html/boost_asio/tutorial/tuttimer1/src.html)（它在 timer.cpp 中）。

> root@ds:/var/timer# ls
> 
> timer.cpp 脚本

wscript 这里是 waf 的配置：

```
#! /usr/bin/env python
top = '.'
out = '.'

def options(opt):
    opt.load('compiler_cxx')

def configure(conf):
    conf.load('compiler_cxx')
    conf.env['LINKFLAGS'] = '--verbose -L/usr/local/lib -lboost_system'

def build(bld):
    tgen = bld.new_task_gen()
    tgen.features = 'cxx cxxprogram'
    tgen.source = 'timer.cpp'
    tgen.target = 'timer'
    tgen.includes = '.'
    tgen.update_outputs = True 
```

`waf configure`是成功的。

但`waf --verbose build`以错误结束（我在下面插入`<*>`以标记一行）

```
Waf: Entering directory `/var/timer'
[1/2] cxx: timer.cpp -> timer.cpp.1.o
[2/2] cxxprogram: timer.cpp.1.o -> timer
timer.cpp.1.o: In function `__static_initialization_and_destruction_0(int, int)':
timer.cpp:(.text+0x103): undefined reference to `boost::system::generic_category()'
timer.cpp:(.text+0x10f): undefined reference to `boost::system::generic_category()'
...
Build failed
-> task in 'timer' failed (exit status 1): 
{task 38446736: cxxprogram timer.cpp.1.o -> timer}
<*>
['/usr/bin/g++', '--verbose -L/usr/local/lib -lboost_system', 'timer.cpp.1.o', '-o', '/var/timer/timer', '-Wl,-Bstatic', '-Wl,-Bdynamic'] 
```

似乎 waf 调用的 gcc 在链接期间没有找到 boost_system 库。

但是，如果我在没有 waf 的情况下通过 gcc 构建示例，一切正常。

```
root@ds:/var/timer# /usr/bin/g++ --verbose -I/var/flake/lib/boost timer.cpp -c -o timer.cpp.1.o
...
<**>
root@ds:/var/timer# /usr/bin/g++ --verbose -L/usr/local/lib -lboost_system timer.cpp.1.o -o timer -Wl,-Bstatic -Wl,-Bdynamic   
...
root@ds:/var/timer# ls
timer.cpp  timer.cpp.1.o  timer  wscript 
```

如您所见，waf 使用的命令行（由 标记`<*>`）与由 标记的命令行相同`<**>`。但结果完全不同。为什么？我怎么能强迫 waf 建造那个东西？[这里](https://stackoverflow.com/questions/9151304/waf-cannot-find-an-existing-library)的解决方案对我也不起作用。也试过

```
...
opt.tool_options('boost')
...
conf.load('compiler_cxx boost')
conf.check_boost()
...
tgen.uselib = 'BOOST'
... 
```

但没有任何影响

还有一个问题。的输出`gcc --verbose`比 的输出广泛得多`waf --verbose`。在我看来，该`verbose`选项必须强制 waf 显示所有此类信息。为什么那不是真的？waf 选项 -vvv 也不显示此信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:23:06.667

如果你使用 boost 工具，你应该检查 playground/boost 中的 waf boost 示例，你会看到 check_boost 接受参数。它将解决您的问题。

或者，如果您不使用该工具，并且使用在可访问文件夹中设置库的真实操作系统，您可以执行以下操作：

```
conf.env.LIB_BOOST = ['boost_system']

...

bld(
 ...,
 use='BOOST',
 ...,
) 
```

未来脚本的注意事项：

*   避免使用 CFLAGS、CXXFLAGS、LINKFLAGS，因为它不可移植。
*   不要设置='。' 如果可能的话
*   使用 bld(...) 与旧语法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:06:39.640

原因是与 Debian 捆绑在一起的旧 Boost 1.42 二进制文件位于 /usr/lib 中。当我发现我试图使 /usr/local/lib 更优先时（由 b2 构建的最新 Boost 二进制文件驻留在那里）。但我不能让 waf 这样做，而不仅仅是完全卸载 Boost 1.42 二进制文件，之后一切正常

# cocoa-touch - 触摸没有boundingBox的精灵

> ID：10574124
> 
> 赞同：0
> 
> 时间：2012-05-13T18:22:34.127
> 
> 标签：cocoa-touch, cocos2d-iphone

所以我试图同时在屏幕上移动多个精灵。问题是，如果两个精灵彼此靠近，则位置变得相同（因此边界框相同）并且我似乎无法将它们分开。

我正在使用“标准” `CGRectContainsPoint(sprite1.boundingBox,location)`。

我需要的是让精灵在顶部，而不管boundingBox。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:29:40.697

一种方法是使用`CCNode`'s`-(void) addChild: (CCNode*)node z:(NSInteger)z`方法开始为您添加的精灵分配显式 z 值。

然后，当您从边界测试中返回多个精灵时，只移动具有最大 z 值的精灵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T18:37:19.967

hah..i fixed in the easiest way possible :\

```
 if (CGRectContainsPoint (sprite1.boundingBox,location)){
 sprite1.position=location;
 }else if (CGRectContainsPoint (sprite2.boundingBox,location)){
 sprite2.position=location;
 } 
```

the way this behaves is that if the bounding boxes are the same..it only takes one..not the 2nd one

# html - 圆角周围的盒子阴影？

> ID：10574126
> 
> 赞同：20
> 
> 时间：2012-05-13T18:22:40.310
> 
> 标签：html, css, less

我正在使用 Twitter 的 Bootstrap 库快速拼凑出一个原型。

这是我的布局在 HTML 中的样子：

```
<div class="navbar-messages container">
    <div class="alert alert-info fade in">
        <button class="close" data-dismiss="alert">&times;</button>
        <strong>Awesomeness!</strong> You're pretty cool.
    </div>
    <div class="alert alert-error fade in">
        <button class="close" data-dismiss="alert">&times;</button>
        <strong>Awesomeness!</strong> You're pretty cool.
    </div>
</div> 
```

这是我的 LESS 的样子：

```
div.navbar div.navbar-messages {
    .drop-shadow(1px 1px 10px 1px rgba(0, 0, 0, 0.2));

    div.alert {
        -webkit-border-radius: 0px;
        -moz-border-radius: 0px;
        border-radius: 0px;

        margin-bottom: 0px;

        &:last-child {
            -webkit-border-bottom-right-radius: 4px;
            -webkit-border-bottom-left-radius: 4px;
            -moz-border-radius-bottomright: 4px;
            -moz-border-radius-bottomleft: 4px;
            border-bottom-right-radius: 4px;
            border-bottom-left-radius: 4px;
        }
    }
}

.drop-shadow(@params) {
    -moz-box-shadow: @params;
    -webkit-box-shadow: @params;
    box-shadow: @params;
} 
```

真正奇怪的是，阴影没有围绕子元素的弯角弯曲：

![在此处输入图像描述](../Images/d22d557fbffebdfe1a921e161e822d75.png)

我怎样才能使它在拐角处正确弯曲？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-13T19:24:39.187

您的`div.navbar div.navbar-messages`元素缺少圆角，因此阴影看起来是方形的。正如它的名字所描述的，在元素的*box*`box-shadow`周围绘制一个阴影，而不是在元素的*contents*周围，所以如果盒子本身没有圆角，那么它的阴影也不会。

 **你也可以尝试应用相同的`border-radius`样式`div.navbar div.navbar-messages`，所以它的阴影会在拐角处弯曲：

```
div.navbar div.navbar-messages {
    .drop-shadow(1px 1px 10px 1px rgba(0, 0, 0, 0.2));
    .rounded-bottom-corners(4px);

    div.alert {
        -webkit-border-radius: 0px;
        -moz-border-radius: 0px;
        border-radius: 0px;

        margin-bottom: 0px;

        &:last-child {
            .rounded-bottom-corners(4px);
        }
    }
}

.drop-shadow(@params) {
    -moz-box-shadow: @params;
    -webkit-box-shadow: @params;
    box-shadow: @params;
}

.rounded-bottom-corners(@params) {
    -webkit-border-bottom-right-radius: @params;
    -webkit-border-bottom-left-radius: @params;
    -moz-border-radius-bottomright: @params;
    -moz-border-radius-bottomleft: @params;
    border-bottom-right-radius: @params;
    border-bottom-left-radius: @params;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-11T14:25:39.580

我有这个：

```
blockquote {
    border: none;
    font-style: italic;
    font-size: 20px;
    line-height: 40px;
    font-weight: 300;
    padding: 0;
    margin: 30px 0;
    text-shadow: 0 1px 1px #666666; 
    background: rgba(255,255, 255, 0.4);
    box-shadow: 0px 0.5px 1px #888888;
    padding-left: 10px;
    -webkit-border-radius: 6px;
    -moz-border-radius: 6px;
    border-radius: 6px;
} 
```

所以：

```
-webkit-border-radius: 6px;
        -moz-border-radius: 6px;
        border-radius: 6px; 
```

这对我很有效！非常感谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-22T20:24:57.673

是的...只需在有阴影的 div 上放置一个边界半径。确保边界半径值与 div 内对象的值匹配，并且它们将正确匹配。**

# apache-flex - 为 flex 应用程序增加计算能力

> ID：10574128
> 
> 赞同：0
> 
> 时间：2012-05-13T18:22:48.870
> 
> 标签：apache-flex, excel, math

我的任务是为巨大的 excel 电子表格制作几个 flex 驱动的可视化。客户希望成品尽可能独立。问题是 flex 不能提供所需的计算能力。有没有一种简单（或不容易）的方法来实现这一点。我只是在寻找指针。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:33:02.673

我想到的第一件事 - 构建一个能够完成艰苦工作的 Web 服务。但这不是一个独立的产品。

除此之外 - 看看`apparat`- [http://code.google.com/p/apparat](http://code.google.com/p/apparat)，它允许各种优化，访问低级 AVM2 代码 - [http://code.google.com/p/apparat /wiki/AsmExpansion](http://code.google.com/p/apparat/wiki/AsmExpansion)等等。我不认为 as3 和 flex 编译器对数学如此不利。尝试编写示例数学函数并使用不同的语言对其进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T21:57:19.583

如果您不介意以艰难的方式进行操作，我有两种选择：

1.  [Pixel Bender](http://www.adobe.com/devnet/pixelbender.html)：最初设计用于创建复杂且 CPU 密集型图形过滤器并将这些计算卸载到硬件的工具。但它也可以用于数字运算。这是一篇涵盖该主题的文章：[将 Pixel Bender 与 Flash Builder 4 一起用作数字运算引擎](http://www.adobe.com/devnet/flex/articles/flashbuilder4_pixelbender.html)。该语言可能与您习惯的任何语言都不一样。我很难把头绕过去。
2.  [Alchemy](http://labs.adobe.com/technologies/alchemy/)：一种编译 C 或 C++ 代码的工具，以便可以在 Flash VM 中执行。我不确定简单的数字运算可以获得多少性能，但如果你知道 C，这可能是一条研究路径。

# javascript - jQuery：如何将 UTC 中的服务器时间转换为 Web 浏览器的本地时间？

> ID：10574132
> 
> 赞同：1
> 
> 时间：2012-05-13T18:23:16.567
> 
> 标签：javascript, jquery, mongodb

我有一个服务器时间（美国东部成本），无论他身在何处，我都想将其转换为用户的当地时间。我不知道用户的时区。

这是存储在 MongoDB 中的示例日期（UTC 时间）：

```
ISODate("2012-05-03T09:40:34.764Z") which becomes 5/3/2012 5:40:34 AM 
```

我想将其转换为用户的本地时间。

有没有我可以查看的插件，或者有人在没有插件的情况下完成了它？

这是我的代码不起作用：

```
var svrDate = new Date('5/3/2012 5:40:34 AM');
var tzo = ((new Date()).getTimezoneOffset() / 60) * (-1);
var userTime = new Date(svrDate.setHours(svrDate.getHours() + tzo)).toLocaleString()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T18:28:33.943

简单的：

```
var d = new Date("2012-05-03T09:40:34.764Z");
alert(d); 
```

就我而言，这会打印：

```
Thu May 03 2012 02:40:34 GMT-0700 (PDT) 
```

因为我在加利福尼亚。

字符串末尾的 Z 表示日期字符串为 UTC。JavaScript 已经知道如何处理它。如果您想要当地时间，只需调用通常的 getTime()、getMonth()、getDay() 方法。如果您想要 UTC 时间，请调用它们的 UTC 变体：getUTCTime()、getUTCMonth()、getUTCDay() 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T09:51:06.450

查看[https://github.com/GregDThomas/jquery-localtime](https://github.com/GregDThomas/jquery-localtime)上的 jquery-localtime 插件- 它将 UTC 时间转换为本地时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-02T07:25:00.963

```
`//Covert datetime by GMT offset 
//If toUTC is true then return UTC time other wise return local time
function convertLocalDateToUTCDate(date, toUTC) {
    date = new Date(date);
    //Local time converted to UTC
    console.log("Time :" + date);
    var localOffset = date.getTimezoneOffset() * 60000;
    var localTime = date.getTime();
    if (toUTC)
    {
        date = localTime + localOffset;
    }
    else
    {
        date = localTime - localOffset;
    }
    date = new Date(date);
    console.log("Converted time" + date);
    return date;
}
` 
```

# c++ - 野牛：如果结构不好

> ID：10574135
> 
> 赞同：1
> 
> 时间：2012-05-13T18:24:05.940
> 
> 标签：c++, parsing, bison, yacc, lex

我已经在 bison 中制作了一个完整的解析器（当然还有在 flex 中完成的词法分析器），我昨天才注意到我的解析器有问题。实际上在If结构中。

这是我在解析器中的规则：http: [//pastebin.com/TneESwUx](http://pastebin.com/TneESwUx)

此处无法识别单个 IF，如果我将“%prec IFX”替换为“END”，则通过添加新标记“END”（`"end" return END;`在 flex 中），它可以工作。但我不想有一个新的“end”关键字，这就是我不使用这个解决方案的原因。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:34:22.457

'The correct way to handle this kind of rule is not precedence, it is refactoring to use an optional else-part so that the parser can use token lookahead to decide how to parse. I would design it something like this:

```
stmt      : IF '(' expression ')' stmts else_part
          | /* other statement productions here */

else_part : /* optional */
          | ELSE stmts

stmts     : stmt
          | '{' stmt_list '}'
          | '{' '}'

stmt_list : stmt
          | stmt_list ';' stmt 
```

(This method of special-casing `stmts` instead of allowing `stmt` to include a block may not be optimal in terms of productions, and may introduce oddities in your language, but without more details it's hard to say for certain. `bison` can produce a report showing you how the parser it generated works; you may want to study it. Also beware of unexpected shift/reduce conflicts and especially of any reduce/reduce conflicts.)

Note that shift/reduce conflicts are entirely normal in this kind of grammar; the point of an LALR(1) parser is to use these conflicts as a feature, looking ahead by a single token to resolve the conflict. They are reported specifically so that you can more easily detect the ones you *don't* want, that you introduce by incorrectly factoring your grammar.

Your `IfExpression` also needs to be refactored to match; the trick is that `else_part` should produce a conditional expression of some kind to `$$`, and in the production for `IF` you test `$6` (corresponding to `else_part`) and invoke the appropriate `IfExpression` constructor.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T00:01:36.560

您的语法模棱两可，因此您必须忍受 shift/reduce 冲突。记号通过`END`确保`IF`语句始终正确闭合来消除歧义，就像一对括号一样。

括号在这里做了一个很好的类比。假设你有这样的语法：

```
maybe_closed_parens : '(' stuff
                    | '(' stuff ')'
                    ; 
```

`stuff`本身会产生一些语法符号，其中之一是`maybe_closed_parens`.

因此，如果您输入 like `((((((whatever`，那是正确的。括号不必闭合。但是，如果添加`)`呢？哪个`(`关门了？

这很像无法分辨哪个`IF`匹配`ELSE`.

如果您添加`END`到`IF`（无论是否有`ELSE`）的语法，那么这就像有一个右括号。`IF`和和`END`一样。`(``)`

当然，从风格上来说，你不想`END`在你的语言中使用这个词是正确的，因为你已经有了花括号块，它们基本上是 Pascal's`BEGIN`和`END`. 你`}`已经是一个`END`关键字。

所以你可以做的是强加一个`IF`只接受复合语句的规则（即完全支撑）：

```
if_statement : IF condition compound_statement
             | IF condition compound_statement ELSE compound_statement 
```

现在不可能有​​像 if x if yw else z 这样的歧义，因为大括号必须存在：`if x { if y { w } else { z } } or if x { if y { w } } else { z }`。

我似乎记得 Perl 是做出这种选择的语言的一个例子。这不是一个坏主意，因为它不仅消除了您的歧义，更重要的是它消除了程序中的歧义。

我看到您的语法中没有`compound_statement`短语结构规则，因为您的语句会直接生成一个包含在其中的`{`短语`}`。如果你采用这种方法，你将不得不破解它。

# c++ - 为什么 SetupDiGetDeviceProperty 函数不起作用？

> ID：10574137
> 
> 赞同：0
> 
> 时间：2012-05-13T18:24:32.070
> 
> 标签：c++, device, wdk

我正在尝试使用 SetupDiGetDeviceProperty，但显然它在 setupapi.h 中找不到此类功能。我查看了文档并包含了所有头文件和库文件，但它只是不让我使用该功能......这是怎么回事？我做错了什么？继承人的代码：

```
//Mainframe.cpp file
#include"DeviceManager.h"

int main()
{
    int iQuit;
    DeviceManager deviceManager;

    deviceManager.ListAllDevices();

    std::cin >> iQuit;

    return 0;
}

//DeviceManager.h file
#include <windows.h>
#include <setupapi.h>
#include <iostream>
#include <cfgmgr32.h>
#include <tchar.h>
#include <devpkey.h>

//#pragma comment (lib, "setupapi.lib")

class DeviceManager
{
public:
    DeviceManager();
    ~DeviceManager();

    void ListAllDevices();
};

//DeviceManager.cpp file
#include"DeviceManager.h"

DeviceManager::DeviceManager()
{
}

DeviceManager::~DeviceManager()
{
}

void DeviceManager::ListAllDevices()
{
    HDEVINFO deviceInfoSet;             //A list of all the devices
    SP_DEVINFO_DATA deviceInfoData;     //A device from deviceInfoSet
    DEVPROPTYPE devicePropertyType;
    //CONFIGRET device;
    DWORD deviceIndex = 0;
    DWORD size;
    TCHAR description[1024];
    bool foundAllDevices = false;

    deviceInfoSet = SetupDiGetClassDevs(NULL, TEXT("USB"), NULL, DIGCF_PRESENT|DIGCF_ALLCLASSES); //Gets all Devices

    deviceInfoData.cbSize = sizeof(deviceInfoData);

    while(SetupDiEnumDeviceInfo(deviceInfoSet, deviceIndex, &deviceInfoData))
    {
        deviceInfoData.cbSize = sizeof(deviceInfoData);

        ULONG tcharSize;
        CM_Get_Device_ID_Size(&tcharSize, deviceInfoData.DevInst, 0);
        TCHAR* deviceIDbuffer = new TCHAR[tcharSize];   //the device ID will be stored in this array, so the tcharSize needs to be big enough to hold all the info.
                                                        //Or we can use MAX_DEVICE_ID_LEN, which is 200

        CM_Get_Device_ID(deviceInfoData.DevInst, deviceIDbuffer, MAX_PATH, 0); //gets the devices ID - a long string that looks like a file path.

        SetupDiGetDeviceProperty(deviceInfoSet, deviceInfoData, DEVPKEY_NAME, devicePropertyType, description, sizeof(description), size, 0);

        std::cout << deviceIDbuffer << std::endl;

        deviceIndex++;
    }
} 
```

SetupDiGetDeviceProperty 函数在 ListAllDevices 函数的底部调用。

谢谢

编辑：抱歉，忘记说明错误：IntelliSense：标识符“SetupDiGetDeviceProperty”未定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:33:40.033

[`SetupDiGetDeviceProperty`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551963.aspx) requires Vista or later, as described in the documentation. You must therefore defined `WINVER` and `_WIN32_WINNT` accordingly.

```
#define WINVER 0x0600
#define _WIN32_WINNT 0x0600 
```

My guess is that your project targets an earlier version of Windows.

Alternatively you can define them in the project options, or on the command line. More details [here](http://msdn.microsoft.com/en-us/library/aa383745.aspx).

If that is not the answer then is it possible that you are using an out-of-date version of the SDK that pre-dates Vista?

# php - 我应该即时使用剥离标签还是存储在已经剥离的服务器上

> ID：10574138
> 
> 赞同：0
> 
> 时间：2012-05-13T18:24:41.727
> 
> 标签：php, javascript, htmlpurifier, wmd

我正在使用类似 stackoverflow 的 WMD。我已经阅读了有关该主题的投票帖子，这些帖子都建议在服务器上存储 markdown 和 html_purified 版本。这样做的原因是用户编辑他的帖子需要降价，而动态净化对于服务器来说太昂贵了，所以最好将其转换并存储在服务器上。

[https://stackoverflow.com/a/519322/1240324](https://stackoverflow.com/a/519322/1240324)

但是，当我在索引页面上显示每个问题时，我不想要降价或 html 版本。我想在每个问题摘录上调用 strip_tags。但这对于服务器来说会很重吗？我应该为剥离的标记版本存储第三个字段吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:39:52.013

strip_tags() isnt particularly expensive. I wouldn't worry about it.

# html - 内容消失在标题的高度后面？

> ID：10574139
> 
> 赞同：0
> 
> 时间：2012-05-13T18:24:48.573
> 
> 标签：html, css, css-position

你好再次:)！

谁能不小心帮我解决这个问题。我以前看到的网站很少，但从未为其中任何一个添加书签。

如果我有正文背景、固定标题和内部背景，内容在哪里......如果我想向下滚动以查看更多内容/内部背景，我的图像在标题上方，我不知道如何制作消失在标题上边距后面。任何人都可以帮我解决这个问题，好吗？

图片：正常的正文背景、固定的标题和标题下方的内部背景 [http://screensnapr.com/v/HbcNXA.png](http://screensnapr.com/v/HbcNXA.png)

正文背景，固定标题和标题下方的滚动内部背景，高于标题的位置。 [http://screensnapr.com/v/TKVVuy.png](http://screensnapr.com/v/TKVVuy.png)

我知道我的英语不足以解释这一点......但是让我们说。

“嘿，我是内容背景，我站在标题下方，当有人滚动我时，我消失在标题位置的开头。” :)

谢谢！

编辑：http: [//jsfiddle.net/WbtQd/](http://jsfiddle.net/WbtQd/)

滚动，你会注意到我想要什么。

编辑 2：好像有人在玩小提琴......无论如何，这里是网站示例： [http ://www.monofactor.com/portfolio/mcfc-auctions/](http://www.monofactor.com/portfolio/mcfc-auctions/)

除了我的标题让我们说：top：50px; 因此，如果我们在他的网站顶部添加：50px；即使他和我有同样的问题:)

[http://snpr.cm/OrXCWa.png](http://snpr.cm/OrXCWa.png)

编辑 3： [http ://snpr.cm/GNZaGd.png](http://snpr.cm/GNZaGd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:35:06.393

I; not sure if I understood you completely. You mean that whenever you scroll your page, the main body passes under the header. probably this is because the header is fixed. You can try to make your main body div scrollable. This way, whenever you scroll down, only this specific div will scroll.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:15:59.447

我已经创建了一个 jsfiddle，说明您应该如何标记您的固定标头和与它一起使用的 css。

[http://jsfiddle.net/LYT6V/](http://jsfiddle.net/LYT6V/)

我假设这是您正在寻找的结果？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T18:51:45.993

我不确定你想要达到什么目的，但是 css 中的 zindex 可以使项目出现在其他项目之上。将此添加到标题 css 代码中：

```
#yourheaderid {
  z-index:10;
} 
```

# c# - 我有 List 的功能 那得到字符串，int我如何使用它来工作？

> ID：10574142
> 
> 赞同：-1
> 
> 时间：2012-05-13T18:25:00.900
> 
> 标签：c#

编辑：我试图进行递归：在 Form1 的顶部，我有：

```
List<string> webSites = new List<string>();
        List<string> csFiles = new List<string>(); 
```

在构造函数中，我有：

```
webCrawler(url, 2); 
```

然后我有函数getLinks：

```
private void getLinks()
        {
            foreach (HtmlNode link in doc.DocumentNode.SelectNodes("//a[@href]"))
            {
                var href = link.Attributes["href"].Value;
                richTextBox1.Text += href + Environment.NewLine;
                webSites.Add(href);
            }
        }

private List<string> test(string url, int levels)
            {
                doc = hw.Load(url);
                getLinks();
                if (levels == 0)
                {
                    return csFiles;
                }
                else
                {
                    for (i = 0; i < webSites.Count(); i++)
                    {

                        string t = webSites[i];
                        var f = levels * test(url, levels - 1);

                    }
                }
                return csFiles;
            } 
```

webSites 和 csFiles 都是 List，levels 是 int。问题在于：`var f = levels * test(url, levels - 1);` 在右侧我得到错误：错误运算符'*'不能应用于'int'和'System.Collections.Generic.List类型的操作数

我该如何解决？

* * *

在函数测试中，我还调用函数 getLinks() 我还需要为 cs 文件创建一个函数，该函数将从每个站点仅取出 .cs 文件，最后在测试函数中我需要返回 csFiles 列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:29:55.297

在行中：“var f = levels * test(url, levels - 1);”

f 设置为等于 "levels" an int 的结果，以及方法 "test(url, levels -1)" 的结果。

方法“test(url,levels - 1)”的结果是一个字符串类型的列表。

这意味着您正在尝试将整数和列表相乘。

您可以简单地使用 .Count 或 .Length ...

该行应为：“var f = levels * test(url, levels - 1).Count();”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T03:12:25.937

感觉就像是 100 级 CS 课程的作业，但暂时假设不是，我将把它作为一种方法来介绍：

```
public static List<string> CrawlWithDepth(string url, int depth)
{
    var ret = new List<string>();
    var linksFromPage = GetLinks(url);
    ret.AddRange(linksFromPage);
    if (depth > 0)
    {
        foreach (var childLink in linksFromPage)
        {
            var childCrawlResults = CrawlWithDepth(childLink, depth - 1);
            ret.AddRange(childCrawlResults);
        }
    }
}

private static List<string> GetLinks(string url)
{
    var ret = new List<string>();
    foreach (HtmlNode link in doc.DocumentNode.SelectNodes("//a[@href]"))
    {
        var href = link.Attributes["href"].Value;
        ret.Add(href);
    }
    return ret;
} 
```

# cordova - 如何以编程方式导航回上一个视图

> ID：10574145
> 
> 赞同：1
> 
> 时间：2012-05-13T18:25:38.223
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我需要以编程方式`back`从一个视图中走出来。我用过`navigationView.pop();`，但没有任何反应。该视图不会以`back`编程方式进行。

我的代码；

```
success: function (response) {
    var tx = response.responseText;

    setTimeout(function () {
               Ext.Msg.hide();
               }, 2000);

    setTimeout(function () {
               Ext.Msg.alert('Ok', 'got it right');
               }, 3000);

    navigationView.pop(); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:15:12.990

您需要在组件上调用`pop()`函数。`Ext.navigation.View`

像这样做，

```
// Assuming the id for navigationview - navigateId

.....
.....
setTimeout(function () {
    Ext.Msg.alert('Ok', 'got it right');
}, 3000);

Ext.getCmp('navigateId').pop(); 
```

# android - 如何在 android 的音频播放器中添加来自 res/raw 的歌曲列表

> ID：10574147
> 
> 赞同：1
> 
> 时间：2012-05-13T18:25:43.630
> 
> 标签：android, audio

我正在创建音频播放器。我已将音频文件存储在 raw 文件夹中。我为此创建了列表视图。但我只是不知道如何在列表视图中列出这些音频文件。我将在音频播放器中播放一首歌曲。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:26:09.773

要创建列表视图，最好读取文件的元数据，您可以获得足够的详细信息以显示在列表中。有一些 java 库可以操作 mp3 标签，我的选择是[javamusictag](http://javamusictag.sourceforge.net/docs.htm)

您可以从这个现有的 SO [question中获得更多详细信息](https://stackoverflow.com/questions/1527169/whats-the-easiest-way-to-extract-the-jpg-data-from-an-mp3-header-in-java)

要读取原始资源文件，试试这个

```
try {
    Resources res = getResources();
    InputStream inStream = res.openRawResource(R.raw.file);

    byte[] buff = new byte[inStream.available()];
    inStream.read(buff);

} catch (Exception e) {
    e.printStackTrace();            
} 
```

但通常音频播放器程序所做的是从 SD 卡中读取文件。[在这里](http://kunalmaemo.blogspot.com/2012/01/playing-audio-file-and-fetching.html)，您可以找到有关这种方法的一些有用信息。

# java - 值没有存储在数组中？

> ID：10574150
> 
> 赞同：1
> 
> 时间：2012-05-13T18:26:22.163
> 
> 标签：java, arrays, for-loop, nullpointerexception

我有四节课。项目类、学生类、ProjectFile 类和 ProjectFrame JFrame。

ProjectFrame 仅适用于 GUI，我还没有触及它。

Student 和 Project Class 是构造函数，我已经对它们进行了编码。

现在我试图通过从文本文件中读取然后存储要读取的数据来实现 ProjectFile 类。我遇到了麻烦，因为我不确定为什么项目类的实例不存储数据。我查看了我的循环，并且确实打印了变量以确保循环确实发生了。它第一次工作，但是当我尝试调用第二个数组时，它给了我一个 NullPointerException。所以我假设它将值存储为 null 但事实并非如此。

这是我的 ProjectFile 类

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package DecelAssignment;

import java.io.*;

/**
 *
 * @author Zane
 */
public class ProjectFile {

    private static Project[] pJect;
    private static Student[] sDent;
    private static Project ja;
    private static BufferedReader br;

    public static void readData() {
        File inputFile = new File("projects.txt");

        try {
            br = new BufferedReader(new FileReader(inputFile));
            String s = br.readLine();
            pJect = null;
            pJect = new Project[Integer.parseInt(s)];
            //System.out.println(s);
            for (int i = 0; i < pJect.length; i++) {
                s = br.readLine();
                if (s == null) {
                    break;
                } else {
                    String sLine[] = s.split(",");
                    int count = 3;
//                    for (int i2 = 0; i2 < Integer.parseInt(sLine[3]); i2++) {
//                        sDent[i2] = new Student(sLine[count+1], sLine[count+2], sLine[count+3], sLine[count+4]);
//                        count += 4;
//                    }
                    pJect[i] = new Project(sLine[0], sLine[1], sLine[2], sDent);
                    System.out.println(pJect[1].getTitle());
                    System.out.println(sLine[0]);
                    System.out.println(i);
                }
            }

        } catch (IOException e) {

            System.out.println("I caught an IO Exception1");
        }
//        } catch (NullPointerException e) {
//            e.printStackTrace();
//            System.out.println("I caught a Null Pointer Exception!");
//
//        }
    }

//    public Project[] getProjectInfo() {
//        
//        
//        return;
//    }
    public static void main(String[] args) {    
        readData();
    }
} 
```

这是我正在读取的文本文件

```
3
iPhone App,EEE,John Tan,1,P109520,Kelvin Tay,DBIT,M
iPad App,DMIT,Mark Goh,3,P106286,Felicia Wong,DIT,F,P101803,Rachel Chang,DIT,F,P100036,Lewis Poh,DBIT,M
Green Living,DMIT,Audrey Lim,2,P101234,Peter Chua,DIT,M,P103287,Ng Ming Shu,DISM,F 
```

有人可以向我解释我在哪里编码错误吗？我想不通。

**编辑：**

这是项目类

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package DecelAssignment;

/**
 *
 * @author Zane
 */
public class Project {
    private String title, school, supervisor;
    private Student[] stDent;

    public Project() {
        title = "";
        school = "";
        supervisor = "";
        stDent = new Student[0];
    }

    public Student[] getStDent() {
        return stDent;
    }

    public Project(String title, String school, String supervisor, Student[] stDent) {
        this.title = title;
        this.school = school;
        this.supervisor = supervisor;
        this.stDent = stDent;
    }

    public String getSchool() {
        return school;
    }

    public void setSchool(String school) {
        this.school = school;
    }

    public String getSupervisor() {
        return supervisor;
    }

    public void setSupervisor(String supervisor) {
        this.supervisor = supervisor;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T18:31:22.693

I guess your code crashes here

```
 System.out.println(pJect[1].getTitle()); 
```

In the first loop pJect[1] will contain null which causes a crash

You probably intend

```
 System.out.println(pJect[i].getTitle()); 
```

# ios - 在 Xcode 4.3 和 iOS 5.1 开发环境上测试 iOS 4.3

> ID：10574151
> 
> 赞同：1
> 
> 时间：2012-05-13T18:26:22.850
> 
> 标签：ios, ios5.1

我一直在尝试在 iOS 4.3 模拟器上测试我为 iOS 5.1 开发的应用程序，但不知何故它抱怨 iOS 4.3 缺少框架文件。我已经通过管理器安装了 iPhone 4.3 模拟器，但无济于事。我还尝试了将 UIKit 框架设置为可选的其他选项，但没有奏效。

我需要重新安装以前版本的 SDK 来测试这个还是有一些简单的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:19:13.657

在 Xcode 中，打开模拟器菜单。有一个名为“更多模拟器”的菜单项

![更多模拟器](../Images/64b28007d6606f72d413e224eeac1c1d.png)

选择该菜单项会打开另一个窗口，您可以在其中选择下载和安装其他 Xcode 内容。

![安装选项](../Images/1e8becbf7e94adcfff5316b126855cfa.png)

# javascript - 用单个图块填充谷歌地图视口

> ID：10574152
> 
> 赞同：1
> 
> 时间：2012-05-13T18:26:26.390
> 
> 标签：javascript, google-maps-api-3, gis, wms

基本上我想要做的是找到一种方法来仅加载一个将填充视口而不加载任何周围图块的图像/图块。看来这就是 Weather Underground 的好人正在使用他们的[Wundermap](http://www.wunderground.com/wundermap/ "奇妙地图")所做的方法。

我试过挖掘他们的代码，但无济于事。我尝试简单地使用更大的图块 - 比实际视口大 - 但这有几个不利的副作用。[WMS 中有一个与 Google Maps v3 中的单个图块图像](https://stackoverflow.com/questions/6425389/wms-as-a-single-tile-image-in-google-maps-v3)类似的问题，但这更多是关于使用更大的图块而不是使用单个图块。

提前致谢。

**更新：**

这是他们网站上的页面/地图的链接，该链接加载了跨越整个视口的单个图块/图像：

[http://wxug.us/o4ia](http://wxug.us/o4ia)

如果您在 firebug 中打开了 Net 选项卡，您可以看到有一个磁贴请求。此外，如果您保持打开并平移地图 - 同时按住鼠标 - 在您松开鼠标之前数据不会填充。对于我见过的所有平铺地图，只要您平移，它就会开始填充新的平铺。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:06:43.603

他们正在使用自定义叠加层。您需要设置一种服务器端方式，根据视口提供您自己的图像叠加层以显示在 Google 地图上（假设您要提供显示在整个视口上的 1 张图像）。[http://goo.gl/zgEKB](http://goo.gl/zgEKB)

# algorithm - 最轻的路径树

> ID：10574153
> 
> 赞同：1
> 
> 时间：2012-05-13T18:26:34.147
> 
> 标签：algorithm

我需要编写算法在有向和加权图中找到最轻的路径树。（应该尽可能高效）我得到一个顶点 S 并且需要构建一个从 S 到可以从 S 接近的所有顶点的路径树，因此树中的路径是最轻的（路径权重是没有末端的路径)

我考虑过首先计算到 S 的所有距离然后对于每条路径都会有一个新的权重：权重减去端点然后在带有新权重的图表上运行 dijkstra ...

它会起作用吗？是否足够高效？如何计算距离？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T18:44:23.963

您的评论表明您实际上是在寻找从单一来源到所有顶点的最短路径。

看看[Dijkstra 的算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)是如何工作的。该算法从大小为 1 的树（仅源）开始，并迭代地将顶点添加到树中。最后，由 dijkstra 算法创建的树表示从源到图中每个节点的最短路径。

请注意，dijkstra 的算法需要边缘上的权重函数，而您的权重函数在顶点上。它可以通过定义一个新的权重函数来轻松解决`w':E->R`：（`w'(u,v) = w(u)`它可以工作，因为你不想计算结束）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T18:29:33.720

听起来您要的是[最小生成树](http://en.wikipedia.org/wiki/Minimum_spanning_tree)。维基百科页面讨论算法。

# javascript - 除了 jQuery，还有哪个 Javascript 库使用 $？

> ID：10574156
> 
> 赞同：0
> 
> 时间：2012-05-13T18:27:00.807
> 
> 标签：javascript, jquery, drupal-7

`$ is not a function`是新手在 Drupal 7 中尝试使用 JQuery 时遇到的常见错误消息。

解释是在 Drupal 中禁用了 $ 的使用，以避免与其他库发生冲突。但是哪个其他库正在使用 $？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T18:29:13.847

至少有两个主要的：

*   [原型JS](http://www.prototypejs.org/learn)，
*   [穆工具](http://mootools.net/blog/2010/06/10/setting-up-elements/)，

这可能是因为对最常用的函数使用一个字符可以节省大量时间。[由于 JavaScript 中对变量名中字符的一些限制，](https://stackoverflow.com/a/9337047/548696)实际上这种单字符名有两个候选者：`$`和`_`(`_`经常用于例如 gettext 函数或丢弃变量)。因此，我宁愿期望如果某个框架具有一些具有一个字符名称的快捷功能，它可能是`$`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T18:29:01.540

常见问题之一是 JQuery 本身的几个不同版本，尽管我不确定这是否是 Drupal 中的原因。另一种可能性是[Mootools](http://mootools.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T18:35:09.647

zepto 也使用 $，并且是 jQuery 的轻量级替代品：

[http://zeptojs.com/](http://zeptojs.com/)

此外，它匹配大多数 jQuery API。

# heroku - Facebooker2 返回用户 UID 但不是名称

> ID：10574157
> 
> 赞同：0
> 
> 时间：2012-05-13T18:27:04.593
> 
> 标签：heroku, ruby-on-rails-3.2, facebooker2

我只是使用标准的 Facebooker2 设置。

```
 <%= fb_connect_async_js %>
            <% if current_facebook_user %>
              <%= "Hello #{fb_name(current_facebook_user, :useyou => false)}!" %>
              <%= fb_logout_link("Logout", request.url) %><br />
            <% else %>
              <%= fb_login_and_redirect('/login', :scope => 'user_about_me') %>
            <% end %> 
```

页面上显示的是：

```
Hello <fb:name uid="73648576" useyou="false"></fb:name> 
```

我确信这里有一些非常基本的错误，但我已经按照说明进行操作，完成了教程，wetc。并继续得到这个结果。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T07:12:45.173

不确定为什么 fb_name 不起作用，但您可以使用自述文件中指定的其他方法。在这种情况下，您需要先调用 current_facebook_user 上的 fetch 方法：

```
<% if current_facebook_user %>
  <% current_facebook_user.fetch %>
  <%= "Welcome #{current_facebook_user.first_name} #{current_facebook_user.last_name}!" %> 
```

参考：[http](http://www.engineyard.com/video/21045039) : //www.engineyard.com/video/21045039（9:36左右）

# ruby-on-rails - Rails 3.1.4、capybara-webkit 0.11.0、unicorn 4.3.1 和共享数据库黑客的验收规范出现问题

> ID：10574158
> 
> 赞同：2
> 
> 时间：2012-05-13T18:27:05.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, capybara, unicorn, capybara-webkit

我们最近尝试将应用程序从 Rails 3.0.12 升级到 3.1.4，现在许多使用 capybara-webkit 进行 JS 测试的验收规范被挂起或显示暂时失败以及各种数据库错误。

我们在 spec_helper.rb 中有一个相当常见的 hack，它在规范本身和 capybara-webkit 生成的服务器之间共享一个数据库连接。我怀疑我们可能在这些线程之间存在某种死锁和/或竞争条件。

谷歌搜索表明 Unicorn 不能很好地使用这个 hack（虽然它曾经很好），所以我尝试依次切换到瘦和 WEBrick：这两个都刚刚被锁定。

Gemfile.lock 如下：

```
GEM
  remote: http://rubygems.org/
  specs:
    abstract (1.0.0)
    actionmailer (3.0.12)
      actionpack (= 3.0.12)
      mail (~> 2.2.19)
    actionpack (3.0.12)
      activemodel (= 3.0.12)
      activesupport (= 3.0.12)
      builder (~> 2.1.2)
      erubis (~> 2.6.6)
      i18n (~> 0.5.0)
      rack (~> 1.2.5)
      rack-mount (~> 0.6.14)
      rack-test (~> 0.5.7)
      tzinfo (~> 0.3.23)
    activemodel (3.0.12)
      activesupport (= 3.0.12)
      builder (~> 2.1.2)
      i18n (~> 0.5.0)
    activerecord (3.0.12)
      activemodel (= 3.0.12)
      activesupport (= 3.0.12)
      arel (~> 2.0.10)
      tzinfo (~> 0.3.23)
    activeresource (3.0.12)
      activemodel (= 3.0.12)
      activesupport (= 3.0.12)
    activesupport (3.0.12)
    addressable (2.2.8)
    airbrake (3.0.9)
      activesupport
      builder
    archive-tar-minitar (0.5.2)
    arel (2.0.10)
    aws-s3 (0.6.2)
      builder
      mime-types
      xml-simple
    aws-sdk (1.4.1)
      httparty (~> 0.7)
      json (~> 1.4)
      nokogiri (>= 1.4.4)
      uuidtools (~> 2.1)
    bourne (1.1.2)
      mocha (= 0.10.5)
    bson (1.6.2)
    bson_ext (1.6.2)
      bson (~> 1.6.2)
    builder (2.1.2)
    capybara (1.1.2)
      mime-types (>= 1.16)
      nokogiri (>= 1.3.3)
      rack (>= 1.0.0)
      rack-test (>= 0.5.4)
      selenium-webdriver (~> 2.0)
      xpath (~> 0.1.4)
    capybara-webkit (0.11.0)
      capybara (>= 1.0.0, < 1.2)
      json
    childprocess (0.3.2)
      ffi (~> 1.0.6)
    chronic (0.6.7)
    clearance (0.16.1)
      diesel (~> 0.1.5)
      rails (>= 3.0)
    cocaine (0.2.1)
    coderay (1.0.6)
    columnize (0.3.6)
    cucumber (1.2.0)
      builder (>= 2.1.2)
      diff-lcs (>= 1.1.3)
      gherkin (~> 2.10.0)
      json (>= 1.4.6)
    cucumber-rails (1.3.0)
      capybara (>= 1.1.2)
      cucumber (>= 1.1.8)
      nokogiri (>= 1.5.0)
    database_cleaner (0.7.2)
    debugger (1.1.3)
      columnize (>= 0.3.1)
      debugger-linecache (~> 1.1.1)
      debugger-ruby_core_source (~> 1.1.2)
    debugger-linecache (1.1.1)
      debugger-ruby_core_source (>= 1.1.1)
    debugger-ruby_core_source (1.1.2)
    delayed_job (3.0.2)
      activesupport (~> 3.0)
    delayed_job_active_record (0.3.2)
      activerecord (> 2.1.0)
      delayed_job (~> 3.0.0)
    diesel (0.1.5)
      railties
    diff-lcs (1.1.3)
    dynamic_form (1.1.4)
    email_spec (1.2.1)
      mail (~> 2.2)
      rspec (~> 2.0)
    erubis (2.6.6)
      abstract (>= 1.0.0)
    escape (0.0.4)
    excon (0.13.4)
    factory_girl (3.2.0)
      activesupport (>= 3.0.0)
    factory_girl_rails (3.2.0)
      factory_girl (~> 3.2.0)
      railties (>= 3.0.0)
    fakeweb (1.3.0)
    ffi (1.0.11)
    flay (1.4.3)
      ruby_parser (~> 2.0)
      sexp_processor (~> 3.0)
    flog (2.5.3)
      ruby_parser (~> 2.0)
      sexp_processor (~> 3.0)
    flutie (1.3.3)
    formtastic (1.2.2)
      actionpack (>= 2.3.7)
      activesupport (>= 2.3.7)
      i18n (>= 0.4.0)
    gherkin (2.10.0)
      json (>= 1.4.6)
    haml (3.1.5)
    haml-rails (0.3.4)
      actionpack (~> 3.0)
      activesupport (~> 3.0)
      haml (~> 3.0)
      railties (~> 3.0)
    heroku (2.25.0)
      launchy (>= 0.3.2)
      netrc (~> 0.7.1)
      rest-client (~> 1.6.1)
      rubyzip
    heroku-api (0.1.3)
      excon (~> 0.13.3)
    heroku_san (2.2.2)
      heroku (>= 2)
      heroku-api (>= 0.1.2)
      rake
    high_voltage (1.1.1)
    httparty (0.8.3)
      multi_json (~> 1.0)
      multi_xml
    i18n (0.5.0)
    json (1.7.1)
    jwt (0.1.4)
      json (>= 1.2.4)
    kgio (2.7.4)
    launchy (2.1.0)
      addressable (~> 2.2.6)
    libwebsocket (0.1.3)
      addressable
    linecache (0.46)
      rbx-require-relative (> 0.0.4)
    linecache19 (0.5.12)
      ruby_core_source (>= 0.1.4)
    mail (2.2.19)
      activesupport (>= 2.3.6)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    metaclass (0.0.1)
    method_source (0.7.1)
    mime-types (1.18)
    mixpanel (1.1.3)
      escape
      json
      rack
    mixpanel_client (2.2.1)
      json (~> 1.6)
    mocha (0.10.5)
      metaclass (~> 0.0.1)
    mongo (1.6.2)
      bson (~> 1.6.2)
    mongoid (2.2.6)
      activemodel (~> 3.0.0)
      mongo (~> 1.3)
      tzinfo (~> 0.3.22)
    multi_json (1.3.4)
    multi_xml (0.5.0)
    netrc (0.7.1)
    newrelic_rpm (3.3.4.1)
    nokogiri (1.5.2)
    paperclip (3.0.3)
      activemodel (>= 3.0.0)
      activerecord (>= 3.0.0)
      activesupport (>= 3.0.0)
      cocaine (>= 0.0.2)
      mime-types
    parallel (0.5.16)
    parallel_tests (0.8.1)
      parallel
    pg (0.13.2)
    polyglot (0.3.3)
    pry (0.9.9.4)
      coderay (~> 1.0.5)
      method_source (~> 0.7.1)
      slop (>= 2.4.4, < 3)
    pry-doc (0.4.1)
      pry (>= 0.9.0)
      yard (~> 0.7.4)
    pry_debug (0.0.1)
      pry (~> 0.9.0)
    rack (1.2.5)
    rack-mount (0.6.14)
      rack (>= 1.0.0)
    rack-test (0.5.7)
      rack (>= 1.0)
    rails (3.0.12)
      actionmailer (= 3.0.12)
      actionpack (= 3.0.12)
      activerecord (= 3.0.12)
      activeresource (= 3.0.12)
      activesupport (= 3.0.12)
      bundler (~> 1.0)
      railties (= 3.0.12)
    railties (3.0.12)
      actionpack (= 3.0.12)
      activesupport (= 3.0.12)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (~> 0.14.4)
    raindrops (0.8.0)
    rake (0.9.2.2)
    rbx-require-relative (0.0.9)
    rdoc (3.12)
      json (~> 1.4)
    reek (1.2.8)
      ruby2ruby (~> 1.2)
      ruby_parser (~> 2.0)
      sexp_processor (~> 3.0)
    rest-client (1.6.7)
      mime-types (>= 1.16)
    rspec (2.10.0)
      rspec-core (~> 2.10.0)
      rspec-expectations (~> 2.10.0)
      rspec-mocks (~> 2.10.0)
    rspec-core (2.10.0)
    rspec-expectations (2.10.0)
      diff-lcs (~> 1.1.3)
    rspec-mocks (2.10.1)
    rspec-rails (2.10.1)
      actionpack (>= 3.0)
      activesupport (>= 3.0)
      railties (>= 3.0)
      rspec (~> 2.10.0)
    ruby-debug (0.10.4)
      columnize (>= 0.1)
      ruby-debug-base (~> 0.10.4.0)
    ruby-debug-base (0.10.4)
      linecache (>= 0.3)
    ruby2ruby (1.3.1)
      ruby_parser (~> 2.0)
      sexp_processor (~> 3.0)
    ruby_core_source (0.1.5)
      archive-tar-minitar (>= 0.5.2)
    ruby_parser (2.3.1)
      sexp_processor (~> 3.0)
    rubyzip (0.9.8)
    sass (3.1.17)
    selenium-webdriver (2.21.2)
      childprocess (>= 0.2.5)
      ffi (~> 1.0)
      libwebsocket (~> 0.1.3)
      multi_json (~> 1.0)
      rubyzip
    sexp_processor (3.2.0)
    sham_rack (1.3.4)
      rack
    shoulda (2.11.3)
    shoulda-matchers (1.1.0)
      activesupport (>= 3.0.0)
    show_me_the_cookies (1.1.0)
      capybara (~> 1.0)
    sinatra (1.2.8)
      rack (~> 1.1)
      tilt (>= 1.2.2, < 2.0)
    slop (2.4.4)
    steak (2.0.0)
      capybara (>= 1.0.0)
      rspec-rails (>= 2.5.0)
    thor (0.14.6)
    tilt (1.3.3)
    timecop (0.3.5)
    treetop (1.4.10)
      polyglot
      polyglot (>= 0.3.1)
    twilio-rb (2.2.0)
      activesupport (>= 3.0.0)
      builder (>= 2.1.2)
      httparty (>= 0.6.1)
      i18n (~> 0.5)
      jwt (>= 0.1.3)
    tzinfo (0.3.33)
    unicorn (4.3.1)
      kgio (~> 2.6)
      rack
      raindrops (~> 0.7)
    uuidtools (2.1.2)
    validation_reflection (1.0.0)
    will_paginate (3.0.3)
    xml-simple (1.1.1)
    xpath (0.1.4)
      nokogiri (~> 1.3)
    yard (0.7.5)

PLATFORMS
  ruby

DEPENDENCIES
  airbrake
  aws-s3
  aws-sdk
  bourne
  bson_ext
  capybara
  capybara-webkit
  chronic
  clearance
  cucumber-rails
  database_cleaner
  debugger
  delayed_job
  delayed_job_active_record
  dynamic_form
  email_spec (~> 1.1)
  factory_girl_rails
  fakeweb
  flay
  flog
  flutie
  formtastic (= 1.2.2)
  haml-rails
  heroku_san
  high_voltage
  linecache
  linecache19
  mixpanel
  mixpanel_client
  mongoid
  newrelic_rpm
  nokogiri
  paperclip
  parallel_tests
  pg
  pry
  pry-doc
  pry_debug
  rack
  rails (~> 3.0.12)
  reek
  rspec-rails
  ruby-debug
  sass
  sham_rack
  shoulda
  shoulda-matchers
  show_me_the_cookies
  sinatra
  steak
  timecop
  twilio-rb
  unicorn
  validation_reflection
  will_paginate 
```

而spec_helper.rb如下：

```
# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'clearance/testing'
require 'rspec/autorun'

# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  # == Mock Framework
  #
  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
  #
  # config.mock_with :mocha
  # config.mock_with :flexmock
  # config.mock_with :rr
  config.mock_with :mocha

  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  config.fixture_path = "#{::Rails.root}/spec/fixtures"

  # If you're not using ActiveRecord, or you'd prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  config.use_transactional_fixtures = true

  config.before(:each) do
    Mixpanel::Tracker.stubs(:new).with(MIXPANEL_TOKEN, Mocha::ParameterMatchers::KindOf.new(Hash)).returns(FakeMixpanelTracker)
    FakeMixpanelTracker.clear_tracked_events
  end

  config.before(:each) do
    User::SegmentationData.delete_all
    User::SegmentationResults.delete_all
  end
end

# Big Fat Hack (TM) so the ActiveRecord connections are shared across threads.
# This is a variation of a hack you can find all over the web to make
# capybara usable without having to switch to non transactional
# fixtures.
# http://groups.google.com/group/ruby-capybara/browse_thread/thread/248e89ae2acbf603/e5da9e9bfac733e0
Thread.main[:activerecord_connection] = ActiveRecord::Base.retrieve_connection

def (ActiveRecord::Base).connection
  Thread.main[:activerecord_connection]
end

require 'capybara-webkit'
Capybara.javascript_driver = :webkit

# Hack to allow us to use regular controller tests to test SmsController 
# (which is an ActionController::Metal).

def metal_testing_hack(klass)
  klass.class_eval do
    include ActionController::UrlFor
    include ActionController::Testing
    include Rails.application.routes.url_helpers
    include ActionController::Compatibility    
  end
end

require 'ruby-debug'
Rails.logger.level = 4 
```

任何建议将不胜感激。

# xcode - Xcode 4.3 在视图之间传递变量

> ID：10574163
> 
> 赞同：0
> 
> 时间：2012-05-13T18:27:43.243
> 
> 标签：xcode, variables

Xcode 4.3 故事板查询

嗨，我对 Xcode 比较陌生，并且对这个无害问题的各种解决方案感到完全困惑，在 Storyboard 设置中没有一个对我有用。在大多数非 Obj C 语言中，这是一个三行解决方案。

如果我在视图 A 中有变量 X，我如何将 X 完整地传递给视图 B？

有人可以指出我使用 Storyboards 为 Xcode 4.3 中有限数量的变量提供强大的解决方案。

我在频谱的另一端有另一个类似的查询，我需要将数百条数据传递给其他视图。然后我写到一个临时文件...

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:39:55.830

HY，您需要在发送者视图控制器中实现：

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
 //...//
} 
```

函数，您可以在函数体中传递数据，例如：

```
(ImageController *)( segue.destinationViewController).property=passed_data; 
```

# php - 我如何通过 ajax 在此功能上发送 2 个或更多 id

> ID：10574167
> 
> 赞同：0
> 
> 时间：2012-05-13T18:28:17.113
> 
> 标签：php, ajax, jquery

我如何通过 ajax 在此功能上发送 2 个或更多 id

```
function advcust(id) {                      
    $.ajax ({
           url: "php_filter.php?cust=advcust",
           type: "GET",
           data: {CustStatus:id},
           success: function(data){
                    $("#return").html(data)
                    }
        })
} 
```

在这里我只能发送一个 id 但我需要发送 2 个或更多 id

我有两种输入类型来搜索两个单词我可以在 ajax 上发送 2 个 id

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:30:23.037

```
function advcust(id, anotherID)
{
  $.ajax ({
       url: "php_filter.php?cust=advcust",
       type: "GET",
       data: {CustStatus:id,SomeOverVar:anotherID},
       success: function(data){
                $("#return").html(data)
                }
    })
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T18:34:47.717

```
function advcust(ids) {
    $.ajax ({
        url: "php_filter.php?cust=advcust",
        type: "GET",
        data: {CustStatus: ids},
        success: function(data){
            $("#return").html(data);
        }
    });
}

var ids = [];
ids.push(id1);
ids.push(id2);
advcust(ids); 
```

然后，您可以在 PHP 中以数组的形式访问客户 ID：

```
<?php

$customerIds = $_GET['CustStatus'];

foreach ($customerIds as $customerId) {
    // do something...
} 
```

# javascript - ieTester IE8 或以下错误中的对象不支持此属性或方法

> ID：10574171
> 
> 赞同：-3
> 
> 时间：2012-05-13T18:28:43.503
> 
> 标签：javascript, jquery, internet-explorer, ietester

我的页面页脚中有 2 个小脚本，在 IE8 中产生脚本错误。IEtester 说这个脚本错误是从准备好的文档中创建的（但我相信这只是因为它是开始）。我使用了 jQuery，因此它是跨浏览器兼容的。:(

```
<script type="text/javascript">
$(document).ready(function(){

    //flexslider
   $(".flexslider").flexslider({
   animation : "slide",
    slideshow : true,
   animationDuration: "750",
   slideshowSpeed: 5000,
   pauseOnAction: true, 

  }); 

  //text slider overer
    $("#videos li").on({

  mouseenter: function() {
     $(this).animate({"padding-left": "50px"}, "normal");
  },

  mouseleave: function() {
       $(this).stop(true).animate({"padding-left": "0px"}, "slow");

  }});
  }); 
```

![在此处输入图像描述](../Images/1ad943322ed938cbe4bcf343fe27965b.png) 有谁知道如何纠正这个脚本错误？如果是这样，您能否解释为什么首先会创建此错误？

第一个脚本 html 页面： [http](http://designobvio.us/fonts/) ://designobvio.us/fonts/ 第二个脚本 html 页面：[http ://designobvio.us/fonts/middle.php](http://designobvio.us/fonts/middle.php)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T21:02:16.897

这是一个肯定会绊倒 IE8 的问题：

```
$(".flexslider").flexslider({
   animation : "slide",
    slideshow : true,
   animationDuration: "750",
   slideshowSpeed: 5000,
   pauseOnAction: true, // <-- Trailing comma
}); 
```

IE8 和更低的讨厌尾随逗号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T21:02:30.250

从此行中删除 ,： pauseOnAction: true,

IE 不支持数组或对象中最后一行末尾的逗号。

# cakephp - 在测试用例内的 cakephp 会话中写入 Auth 数据

> ID：10574173
> 
> 赞同：2
> 
> 时间：2012-05-13T18:29:02.533
> 
> 标签：cakephp

我正在尝试在 cakephp 中为我的控制器编写测试用例，所有控制器功能都需要来自 Auth 组件的一些信息。

所以在执行测试用例之前，我想在会话中手动插入登录用户的数据，看起来

```
$this->Session->write('Auth.User', array('id' => 1,'username' => 'myUsername',)); 
```

没有做这项工作，我阅读了许多关于此的标记故事教程，但似乎它适用于 cakephp 1.3 ..

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T00:25:53.127

使用[模拟对象](http://www.phpunit.de/manual/3.0/en/mock-objects.html)。还有一个由 Mark Story 编写的[2.0 的优秀 cakephp 教程，将涵盖这个主题。](http://mark-story.com/posts/view/getting-familiar-with-phpunit-mocks)

您可以也应该始终查看 cakephp 核心测试，它们通常会为您提供很好的示例并向您展示如何做事。[这](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Test/Case/Controller/Component/AuthComponentTest.php#L392)是 AuthComponent 本身的测试。

# php - 在 Symfony 1.4 中加载列表页面在新服务器上需要大约 10 秒

> ID：10574176
> 
> 赞同：1
> 
> 时间：2012-05-13T18:29:12.317
> 
> 标签：php, symfony-1.4, mysql5

我从在托管主机上运行 centOS 的旧服务器转移到在 AWS 中运行 Ubuntu 的新服务器。

发布动作我注意到加载项目列表的页面现在需要大约 10-12 秒来呈现（有时甚至长达 74 秒）。在旧服务器上从未注意到这一点。我使用 newrelic 来查看花费了这么长时间的原因，发现 sfPHPView->render() 占用了 99% 的时间。从 nerelic 大约有 500 次调用 DB 来呈现页面。

该页面是一个想法列表，每个想法一行。我使用 Doctrine 1.2 的 $idea->getAccounts()->getSlug() 能力。帐户是另一个表，该表与作为外来关系的想法相关联。对每个创意行调用多次。部分当前不用于保存每个行元素的代码。

1.  对行元素使用部分是否有性能优势？（暂时忽略代码可维护性的好处）
2.  引用通过外部关系连接的数据的最佳做法是什么？我很惊讶每次调用 $idea->getAccounts()->getSlug() 都会调用数据库。
3.  在 ubuntu 中是否有任何明显的东西会使 sfPHPView->render() 运行速度比 centOS 慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:28:58.520

我会给你我的想法

*   当对行元素使用局部时，将其放入缓存中更容易，因为您可以通过局部仿射缓存。

*   因为您在进行查询时没有*明确*定义关系，所以 Doctrine 不会将所有元素与关系结合起来。对于这一点，您可以手动定义要水合的关系。然后，您的呼叫`$idea->getAccounts()->getSlug()`不会每次都执行新查询。

```
$q = $this->createQuery();
$q->leftJoin('Idea.Account'); 
```

*   不知道第3点。

* * *

**PS**：对于第 2 点，当您想要显示关系中的信息（在列表视图中）时，在管理 gen 中有很多查询是很常见的。解决方案是定义检索数据的方法：

在您的 generator.yml 中：

```
list:
  table_method: retrieveForBackendList 
```

在 IdeaTable 中：

```
public function retrieveForBackendList(Doctrine_Query $q)
{
  $rootAlias = $q->getRootAlias();
  $q->leftJoin($rootAlias . '.Account');

  return $q;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:55:28.130

尽管除了 jOk 的建议之外，我还会添加我为提高页面加载速度所做的其他事情。

除了显式连接之外，我还执行了以下操作：

1.  切换到返回一个 DQL 查询对象，然后将其传递给 Doctrine 的[`paginator`](http://docs.doctrine-project.org/projects/doctrine1/en/latest/en/manual/utilities.html#pagination)
2.  从使用更改`include_partial()`为 PHP 的`include()`，这减少了对象创建时间`include_partial()`
3.  [将数据库中的数据水化为](http://docs.doctrine-project.org/projects/doctrine1/en/latest/en/manual/data-hydrators.html)数组而不是对象
4.  通过在数据库中执行更多 leftJoins 删除了一些 foreach 循环
5.  使用结果和查询缓存来减少数据库调用的数量
6.  使用视图缓存来减少 PHP 模板生成时间

有趣的是，通过执行 1 到 4，它使 5 和 6 更有效且更易于实施。我认为在使用缓存之前改进你的代码有一些话要说。

# objective-c - 自动通过蓝牙连接 2 个 iDevices

> ID：10574183
> 
> 赞同：-1
> 
> 时间：2012-05-13T18:30:08.857
> 
> 标签：objective-c, ios, xcode

所以我不喜欢如何将两部iPhone与游戏套件连接，因为您必须选择要连接的iPhone，另一部iPhone必须接受......我认为这种方式很糟糕。我想在我的两个 iDevice 上打开蓝牙，并且希望它们在它们之间*自动*连接。有没有办法做到这一点，还是苹果不赞成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:37:46.863

我相信是蓝牙不会让这种情况发生。查看此处提供的选项： [http ://en.wikipedia.org/wiki/Bluetooth#Pairing.2FBonding](http://en.wikipedia.org/wiki/Bluetooth#Pairing.2FBonding)

您可以看到，只有第一个 SSP 选项可能允许未经确认的配对，而这不适用于具有安全功能的设备。

# java - AffineTransform 旋转使保存的图像为空

> ID：10574188
> 
> 赞同：0
> 
> 时间：2012-05-13T18:30:31.307
> 
> 标签：java, image-processing, rotation, save, affinetransform

好的，我的问题很简单，在执行 AffineTransform 之后，我的图像没有正确保存（但是它正确地绘制在 JPanel 上！）。这真的很奇怪，所以任何提示都非常感谢......

看一下代码：

```
 public BufferedImage performRotation(BufferedImage bi){

    if (angle!=180){
        at.translate(0.5*bi.getHeight(), 0.5*bi.getWidth());
        if(clockwise){
            at.rotate(Math.toRadians(angle));
        }else{
            at.rotate(Math.toRadians(-angle));
        }            
        at.translate(-0.5*bi.getWidth(), -0.5*bi.getHeight());
    }
    else if(angle==180){
        at.translate(0.5*bi.getWidth(), 0.5*bi.getHeight());
        at.rotate(Math.toRadians(angle));
        at.translate(-0.5*bi.getWidth(), -0.5*bi.getHeight());
    }

    AffineTransformOp op = new AffineTransformOp(at, AffineTransformOp.TYPE_BILINEAR);
    BufferedImage bi2 = op.filter(bi, null);

    try {                  
    ImageIO.write(bi, "bmp", new File("BEFORE filterORIG.bmp"));
    ImageIO.write(bi2, "bmp", new File("AFTER filterNEW.bmp"));
    } catch (IOException ex) {
        Logger.getLogger(DrawingField.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

正确保存 filterORIG 之前的文件 -> 有一个图像，但它已预先旋转。

File AFTER... 保存为空白文件。

真正有趣的是，前面提到的事实是，这种转换在我用作显示器的 JPanel 上被普遍显示（我可以观察到所需转换的效果）

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:09:44.077

尝试编写`png`图像，即：

```
ImageIO.write(bi, "png", new File("BEFORE filterORIG.png"));
ImageIO.write(bi2, "png", new File("AFTER filterNEW.png")); 
```

生成的图像 (bi2) 可能具有 aplha 通道，并且`ImageIO`可能不允许将带有 aplha 的图像编码为`bmp`.

或者，使用颜色模型创建目标图像`TYPE_INT_RGB`并将其用作`filter()`方法中的第二个参数。

# php - Zend 框架 PHP -> realpath()

> ID：10574192
> 
> 赞同：0
> 
> 时间：2012-05-13T18:31:20.823
> 
> 标签：php, zend-framework, realpath

我试图创建一个 Zend Framework 自定义提供程序，在这里：

```
 if($module == 'default'){
        $modelsPath = dirname(__FILE__) . '/../application/models';
        $filePath = realpath($modelsPath) . '/' . $name . '.php';
    } else
    if(!$module == ''){
        $modelsPath = dirname(__FILE__) . '/../application/' . $module . '/models';
        $filePath = realpath($modelsPath) . '/' . $name . '.php';
    } else {
        die('Please enter a module!');
    } 
```

当我试图创建文件的路径并且它的默认模块一切正常时，但对于 ex。无论真实路径返回什么，模块都是另一个词？！错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T01:26:14.037

尝试使用**APPLICATION_PATH** 常量。

```
if($module == 'default'){
        $modelsPath = APPLICATION_PATH . '/models';
        $filePath = realpath($modelsPath) . '/' . $name . '.php';
    } else
    if(!$module == ''){
        $modelsPath = APPLICATION_PATH . '/' . $module . '/models';
        $filePath = realpath($modelsPath) . '/' . $name . '.php';
    } else {
        die('Please enter a module!');
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:38:51.840

[从php手册](http://php.net/manual/en/function.realpath.php)中取出：

> realpath() 在失败时返回 FALSE，例如如果文件不存在。

**笔记：**

正在运行的脚本必须对层次结构中的所有目录具有可执行权限，否则 realpath() 将返回 FALSE。

所以问题很可能是文件夹权限或路径错误！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T15:02:58.150

通过简单的回显 $filePath 来仔细检查路径是否存在。如果这检查没问题，那么请确保“用户”（例如 apache、www-data）具有足够的权限。如果您不确定您的服务器在运行谁，您可以简单地通过回显进行调试`whoami`

# c++ - 开源网络摄像头库

> ID：10574203
> 
> 赞同：1
> 
> 时间：2012-05-13T18:33:21.540
> 
> 标签：c++, windows, video-streaming, webcam, frame-rate

是否有任何开源库可用于降低 Windows 平台上网络摄像头的帧速率或分辨率？我需要限制连接到 USB 端口的高分辨率网络摄像头使用的带宽。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:42:24.593

我认为[OpenCV](http://opencv.willowgarage.com/wiki/)可以满足您的要求。

[请参阅此处](https://stackoverflow.com/questions/8339077/decrease-image-resolution-in-opencv)关于降低分辨率的线程并阅读[OpenCV](http://opencv.willowgarage.com/wiki/)文档。

# javascript - 使用淡入淡出或预加载的图像自动重新加载？

> ID：10574215
> 
> 赞同：0
> 
> 时间：2012-05-13T18:35:10.377
> 
> 标签：javascript, jquery

所以我设置了一个基本系统来定期重新加载网络摄像头 jpg，但是看到文件加载很奇怪。我宁愿让一个淡入另一个，或者至少等待整个图像加载，然后再将另一个换出。

```
 $(document).ready(function() {
        setInterval('updateCamera()',1000);
});

function updateCamera() {
        $('#camera').attr('src','cam_1.jpg?'+ new Date().getTime());
        } 
```

这是网站，点击“Live Feed” www.graysonearle.com/frogutopia 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:03:02.753

你可以试试这样的

```
 $(document).ready(function() {
     setTimeout('updateCamera()',1000); // Just call one time on dom ready using setTimeout()
 });

function updateCamera() {
     $('#camera').attr('src','cam_1.jpg?'+ new Date().getTime()).load(function() {
        updateCamera(); // then call updateCamera() each time after image load complete
     });
} 
```

# php - 带有 JavaScript 异常的 ajax：输入意外结束

> ID：10574217
> 
> 赞同：0
> 
> 时间：2012-05-13T18:35:21.817
> 
> 标签：php, javascript, jquery, css, ajax

我有一个概念的输入字段，当用户填写它时，他必须检查该概念是否存在。所以我做了一个检查按钮，它使用 ajax 和 JavaScript 检查数据库以查看该概念是否存在。我的问题是使用 ajax 和 JavaScript 时出现此异常：

> 输入意外结束

**JS：**

```
var concept = document.getElementById('acConceptName').value;
    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange=function(){
        if(xmlhttp.readyState==4 && xmlhttp.status==200){
            var isexisted = JSON.parse(xmlhttp.responseText);
            if(isexisted[0]==true){
                var errorMessage = document.getElementById('acSuggesConcepts');
                var p = document.createElement('p');
                p.innerHTML="this concept is already existed";
                errorMessage.appendChild(p);
                errorMessage.style.display="block";            
            }
        }
    }
    xmlhttp.open("GET","http://localhost/Mar7ba/Ontology/isExistedConcept/"+concept+"/TRUE",true);
    xmlhttp.send(); 
```

有什么例外，我该如何解决？

**PHP：**检查数据库的函数，我总是在其中返回 true

```
public function isExistedConcept($concpetName,$Ajax){
        if($Ajax==true){
            $results=true
             $d=array($results);
            return json_encode($d);
        }
 } 
```

演示：http: [//jsfiddle.net/Wiliam_Kinaan/s7Srx/2/](http://jsfiddle.net/Wiliam_Kinaan/s7Srx/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:40:26.360

在查看了一段时间的代码之后，可能会怀疑的一件事是您的 PHP。

您在 php 中的函数以`return`命令结尾。AJAX 调用实际上等待的是一些要发回的数据。return 命令只是将该值传递回最初调用该函数的实体。

尝试将您的函数更改`echo`为结果，而不是返回它。当您需要将结果输入另一个 PHP 函数时保存您的返回值，而不是在您向客户端返回数据时。
我只是把这个返回命令放在这里是为了便于阅读。

```
public function isExistedConcept($concpetName,$Ajax){
  if($Ajax==true){
    $results=true
    $d=array($results);
    echo json_encode($d);
  }
  return;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T18:41:57.510

试试这个：

```
public function isExistedConcept($concpetName,$Ajax) {
    if( $Ajax) return "1";
}
// This is a simplified version of what you're doing, but it returns "1" instead of "[true]"
// Now for the JS:

if( xmlhttp.readyState == 4 && xmlhttp.status == 200) {
    var isexisted = xmlhttp.responseText == "1";
    if( isexisted) {...} 
```

如果这不起作用，请尝试添加`alert(xmlhttp.responseText)`并查看您是否得到了除应有的内容之外的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T18:49:12.080

试试这个 ：

```
var concept = document.getElementById('acConceptName').value;
    xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET","http://localhost/Mar7ba/Ontology/isExistedConcept/"+concept+"/TRUE",true);
    xmlhttp.onreadystatechange=function(){
        if(xmlhttp.readyState==4){
            if(xmlhttp.status==200){
                var isexisted = JSON.parse(xmlhttp.responseText);
                if(isexisted[0]==true){
                    var errorMessage = document.getElementById('acSuggesConcepts');
                    var p = document.createElement('p');
                    p.innerHTML="this concept is already existed";
                    errorMessage.appendChild(p);
                    errorMessage.style.display="block";            
                }
                    else{ 
                        console.log('error');
                    }
            }
        }
    }
    xmlhttp.send(null); 
```

# django - 在 Django 中创建添加用户表单

> ID：10574218
> 
> 赞同：8
> 
> 时间：2012-05-13T18:35:31.703
> 
> 标签：django, profile

我想创建一个***单一***的表单，让管理员能够创建一个具有扩展配置文件的新用户。请注意，我不想使用管理和注册应用程序。我已经使用 UserProfile 模型扩展了用户。我已阅读所有与扩展用户配置文件相关的文档。但是，我真的不知道如何保存这些信息。我为此问题编写了以下 django 表单：

```
class CreateUserForm(forms.Form):
username = forms.CharField(max_length=30)
first_name = forms.CharField()
last_name = forms.CharField()
password1=forms.CharField(max_length=30,widget=forms.PasswordInput()) #render_value=False
password2=forms.CharField(max_length=30,widget=forms.PasswordInput())
email=forms.EmailField(required=False)

title = forms.ChoiceField(choices=TITLE_CHOICES)

def clean_username(self): # check if username dos not exist before
    try:
        User.objects.get(username=self.cleaned_data['username']) #get user from user model
    except User.DoesNotExist :
        return self.cleaned_data['username']

    raise forms.ValidationError("this user exist already")

def clean(self): # check if password 1 and password2 match each other
    if 'password1' in self.cleaned_data and 'password2' in self.cleaned_data:#check if both pass first validation
        if self.cleaned_data['password1'] != self.cleaned_data['password2']: # check if they match each other
            raise forms.ValidationError("passwords dont match each other")

    return self.cleaned_data

def save(self): # create new user
    new_user=User.objects.create_user(username=self.cleaned_data['username'],
                                    first_name=self.cleaned_data['first_name'],
                                    last_name=self.cleaned_data['last_name'],
                                    password=self.cleaned_data['password1'],
                                    email=self.cleaned_data['email'],
                                        )

    return new_user 
```

可以吗？但是它给了我一个名字和姓氏的错误。说 django 在 save() 方法中不期望 first_name 和 last_name 。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-13T21:27:07.743

create_user 仅支持用户名、电子邮件和密码参数。首先调用 create_user，然后将额外的值添加到保存的对象中。

```
new_user=User.objects.create_user(self.cleaned_data['username'],
                                  self.cleaned_data['email'],
                                  self.cleaned_data['password1'])
new_user.first_name = self.cleaned_data['first_name']
new_user.last_name = self.cleaned_data['last_name']
new_user.save() 
```

# android - Image arrays and updating them Android

> ID：10574222
> 
> 赞同：0
> 
> 时间：2012-05-13T18:35:43.903
> 
> 标签：android, image

I am trying to program a game of Ludo in Android. I have the general progression and internal tables in mind, but I cannot find a way to make an x by y table of images (squares).

tab[x][y] is defined by the resolution of the device, x being the number of rows and y the muber of columns. My problem is that I only can't a way to implement this table into my view in a way that allows me to change the images (as new pieces are added to the board and move around the board)

I've been searching for an answer to this, but I only found examples for image arrays which are NOT meant to be interchangable or are about standalone images. I am green in android and I currently get easily lost in the online libraries and I thank anyone for a response.

Added (what little I've written about this so far (I am willing not to use bitmaps if a better solution presents itself)):

```
public class Game extends View{
public Game(Context context) {
    super(context);

    Button new_game_button = (Button) findViewById (R.id.button1);
    View game_board = (View) findViewById (R.id.view1);

    new_game_button.setOnClickListener (new OnClickListener() {
        public void onClick (View view) {

        }
    });

    Resources res=getResources();
    Bitmap empty = BitmapFactory.decodeResource(res, R.drawable.empty);
    Bitmap redpl = BitmapFactory.decodeResource(res, R.drawable.red);
    Bitmap yellowpl = BitmapFactory.decodeResource(res, R.drawable.yellow);
    Bitmap bluepl = BitmapFactory.decodeResource(res, R.drawable.blue);
    Bitmap greenpl = BitmapFactory.decodeResource(res, R.drawable.green);
    Bitmap redhome = BitmapFactory.decodeResource(res, R.drawable.redhome);
    Bitmap yellowhome = BitmapFactory.decodeResource(res, R.drawable.yellowhome);
    Bitmap bluehome = BitmapFactory.decodeResource(res, R.drawable.bluehome);
    Bitmap greenhome = BitmapFactory.decodeResource(res, R.drawable.greenhome);

    game_board.setOnClickListener (new OnClickListener() {
        public void onClick (View view) {

        }
    });

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:58:44.017

我可能会考虑使用[TableLayout](http://developer.android.com/reference/android/widget/TableLayout.html)。如果您有固定的网格大小，那么您最好使用 XML 进行布局，并可能以编程方式将[ImageView](http://developer.android.com/reference/android/widget/ImageView.html)设置到表中的每个单元格中。对于每个 ImageView，您可以附加一个 onTouch 回调以允许移动等。

# macos - 如何为 MacOS X 创建拖放式安装程序？

> ID：10574223
> 
> 赞同：5
> 
> 时间：2012-05-13T18:35:57.587
> 
> 标签：macos, installation, osx-snow-leopard

使用什么工具来创建这样的安装程序：

![在此处输入图像描述](../Images/e8da2dd89b9240b5d841bbd973fd7451.png)

编辑：这是一个完整的教程：[http ://chromasoft.blogspot.com/2010/02/building-dmg-installer-for-mac-simple.html](http://chromasoft.blogspot.com/2010/02/building-dmg-installer-for-mac-simple.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T18:45:18.630

它只是一个带有自定义背景图像的文件夹（右键单击文件夹背景并选择“显示视图选项”；Firefox 还设置了更大的图标大小并调整网格以匹配，也在同一个地方）。到的链接`/Applications`是通过`Control`-拖动创建的。设置好原始文件夹后，您可以使用[`hdiutil`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/hdiutil.1.html)该文件夹创建 DMG 磁盘映像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-01T16:54:19.677

进入**磁盘工具**

```
File>New Image>Blank Image 
```

*   选择设置（大小必须大于要存储的文件）
*   打开DMG挂载镜像
*   拖入应用程序的图像文件夹和应用程序文件夹别名。
*   右键单击图像文件夹>显示视图选项。

然后您可以自定义背景等。

# python - Python: wrapping recursive functions

> ID：10574227
> 
> 赞同：9
> 
> 时间：2012-05-13T18:37:25.777
> 
> 标签：python, higher-order-functions

How can I wrap a recursive function, recursive calls included? For example, given `foo` and `wrap`:

```
def foo(x):
    return foo(x - 1) if x > 0 else 1

def wrap(f):
    def wrapped(*args, **kwargs):
        print "f was called"
        return f(*args, **kwargs)

    return wrapped 
```

`wrap(foo)(x)` will only output `"f was called"` with the first call. Recursive calls still address `foo()`.

I don't mind monkey patching, or poking around internals. I'm not planning to add this code to the next nuclear warhead handling program, so even if it's a bad idea, I'd like to achieve the effect.

**Edit**: for example, would patching `foo.func_globals` to override `foo.__name__` work? If it always does, any side-effects I should be minding?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-13T18:45:52.487

如果您将包装函数用作装饰器，它会起作用。

```
def wrap(f):
    def wrapped(*args, **kwargs):
        print "f was called"
        return f(*args, **kwargs)

    return wrapped

@wrap
def foo(x):
    return foo(x - 1) if x > 0 else 1 
```

原因是在您的示例中，您只调用了`wrap`一次函数的结果。如果您将其用作装饰器，它实际上将`foo`模块命名空间中的定义替换为装饰函数，因此其内部调用解析为包装版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T18:48:50.873

用类而不是函数包装函数：

```
>>> def foo(x):
...     return foo(x-1) if x > 0 else 1
...
>>> class Wrap(object):
...     def __init__(self, f): self.f = f
...     def __call__(self, *args, **kwargs):
...         print "f called"
...         return self.f(*args, **kwargs)
...
>>> foo = Wrap(foo)
>>> foo(4)
f called
1 
```

# javascript - Javascript / jQuery - Tap outside an element on an iPhone

> ID：10574228
> 
> 赞同：4
> 
> 时间：2012-05-13T18:37:33.603
> 
> 标签：javascript, jquery, iphone, ios

I found a great answer on detecting a click outside a div from this question: [How do I detect a click outside an element?](https://stackoverflow.com/questions/152975/how-to-detect-a-click-outside-an-element), which works fantastically.

But I've noticed that it doesn't work on the iPhone when testing my site, if I tap outside the element.

Here is the code (taken directly from that answer)

```
$('html').click(function() {
    //Hide the menus if visible
});

$('#menucontainer').click(function(event){
    event.stopPropagation();
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T15:03:24.063

这对我有用:)

```
$('html').on('touchstart', function(e) {
    $('.navbar-flyout').hide();
})
$(".navbar-flyout").on('touchstart',function(e) {
    e.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-31T20:40:04.357

```
var doc = document.documentElement;
doc.addEventListener('click', function (e) { //TODO();}); 
```

诀窍：

```
/*Add this line into only mobile css*/
body{cursor:pointer} 
```

# xml - parse xml url in iphone

> ID：10574234
> 
> 赞同：-1
> 
> 时间：2012-05-13T18:38:46.610
> 
> 标签：xml, parsing

I am quite new to xml parse by iPhone..

please help me how can i get all image string of all deals. please see xml:

< DealXml>

< DealId>254 < /DealId>

< Image>

< string> http//offchi.com/Content/Images/Deals/634720181245941250634662123899446563prp01.jpg < /string>

< string> http//offchi.com/Content/Images/Deals/634720181245941250634662123899446563prp02.jpg < /string>

< string> http//offchi.com/Content/Images/Deals/634720181245941250634662123899446563prp03.jpg < /string>

< /Image>

< /DealXml>

< DealXml>

....

< /DealXml>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T23:23:26.667

First you need to decide on a parsing library, this article might help you: [http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)

I would recommend using one that supports xpath which will allow you to retrieve your images using an expression such as:

```
//Image/string 
```

More info about xpath here [Xpath W3C](http://www.w3.org/TR/xpath20/)

Hope this helps

# matlab - Matlab / Octave and Compass with no arrows and changing line style

> ID：10574236
> 
> 赞同：0
> 
> 时间：2012-05-13T18:39:19.117
> 
> 标签：matlab, plot, octave

I have code that will plot a compass plot in octave (3.2.4) /matlab but how do I get rid of the arrows / change color

```
[x,y]=pol2cart(90*pi/180,1);
compass(x,y) 
```

I tried

```
[x,y]=pol2cart(90*pi/180,1);
compass(x,y,'*') 
```

and

```
[x,y]=pol2cart(90*pi/180,1);
compass(x,y,'--r') 
```

along with several combinations any idea?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:11:39.647

要删除箭头，您需要删除绘图的`xdata`和`ydata`字段中的前两个条目以外的所有条目。颜色可以通过设置`color`属性来改变。请在下面找到带有任意数量箭头的指南针图的解决方案。

```
[x,y]=pol2cart([45 90]*pi/180,1);

h = compass(x,y);

for k = 1:length(h)
    a = get(h(k), 'xdata'); 
    b = get(h(k), 'ydata'); 

    set(h(k), 'xdata', a(1:2), 'ydata', b(1:2), 'color', 'r')
end 
```

# c++ - GraphicsMagick code freeze in node addon (OSX)

> ID：10574241
> 
> 赞同：0
> 
> 时间：2012-05-13T18:39:50.523
> 
> 标签：c++, node.js, v8, graphicsmagick

I'm trying to make this simple GraphicsMagick example as a node binding/addon. This code works as expected in OSX 10.6.7 with GraphicsMagick 1.3.15

```
#include <Magick++.h>
#include <iostream>
using namespace std;

int main(int argc,char **argv)
{
  Magick::InitializeMagick(0);
  Magick::Image image;

  try {
    image.read( "snow.jpg" );
    image.scale("320");
    image.write( "snow-scaled.jpg" );
  }
  catch( Magick::Exception &error_ ) {
      cout << "Caught exception: " << error_.what() << endl;
      return 1;
    }
  cout << "Image scaled!" << endl;
  return 0;
}

Compiling:
g++ scale.cpp `GraphicsMagick++-config --cppflags --cxxflags --ldflags --libs`

Running:
./a.out
Image scaled! 
```

But making this code a node binding (0.6.14) just freezes ([see full gist](https://gist.github.com/2689667)):

```
void AsyncWork(uv_work_t* req) {
    std::cout << "AsyncWork..." << std::endl;
    Baton* baton = static_cast<Baton*>(req->data);
    baton->result = 12345;  // Just a test

    Magick::Image image;   // <--- Freezes here!
    image.read("snow.jpg");
    std::cout << "Scaling..." << std::endl;
    image.scale("200");
    std::cout << "Done!" << std::endl;
    image.write("snow-scaled.jpg");
    // and baton->error to true.
} 
```

Output when calling it from javascript:

```
AsyncWork... 
```

Any ideas what's wrong? On a side note, this actually works when compiled/run under Ubuntu!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:14:30.173

您是否尝试过使用`Magick::InitializeMagick(0);`in进行初始化`AsyncWork`？异步函数在池线程上运行。

[你总是可以在这里](http://aheckmann.github.com/gm/)git 完成 GM 插件。

# python - 将 float 转换为 int 会导致值不正确

> ID：10574246
> 
> 赞同：2
> 
> 时间：2012-05-13T18:40:20.327
> 
> 标签：python

结果变量将保存值 9.0。那么为什么当我使用“%d”打印时打印返回 8 呢？

```
result = (((1.7526 % 0.3048) / 0.3048) * 12)
print(result)        #prints 9.0
print("%f" % result) #prints 9.0
print("%d" % result) #prints 8 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T18:44:31.150

浮点运算本质上是不精确的。在 Python 中，计算通常以双精度执行。您的数字不能精确地表示为双精度，因此会出现舍入误差。在我的机器上，`result`是`8.9999999999999929`.

```
>>> result = (((1.7526 % 0.3048) / 0.3048) * 12)
>>> result
8.9999999999999929
>>> print result
9.0
>>> int(result)
8 
```

当您打印它的值时，它会四舍五入`9.0`，但实际存储的值`result`小于`9.0`. 因此，当您转换`result`为整数时，它会被截断为`8`.

关键问题是价值的可表示性。正如在 Python 解释器中很容易看到的那样，两者都`1.7526`不能以双精度精确表示。`0.3048`

```
>>> 1.7526
1.7525999999999999
>>> 0.3048
0.30480000000000002 
```

这个故事的寓意是，在使用浮点值时，您不应该期望精确的算术。该主题的开创性讨论是：[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T18:43:59.440

截断您的`%d`值，这就是您得到 8 的原因。

二进制系统中的浮点表示是一种近似值，这意味着在 9.0 处显示的值在内部小于 9，因此被截断为 8。

例如，所有这些都产生 3。

```
In [19]: i = 3.1
In [20]: print '%d' %i
3

In [21]: i = 3.4
In [22]: print '%d' %i
3

In [23]: i = 3.7
In [24]: print '%d' %i
3

In [25]: i = 3.9999
In [26]: print '%d' %i
3 
```

[这篇维基百科](http://en.wikipedia.org/wiki/Floating_point)文章提供了一些关于浮点表示的额外背景。

# jquery - AJAX 中的迭代函数调用

> ID：10574247
> 
> 赞同：0
> 
> 时间：2012-05-13T18:40:27.230
> 
> 标签：jquery, ajax

我需要每 x 秒进行一次 Ajax 调用，从 xml 读取数据并使用 xml 数据作为变量在 x 秒后调用相同的函数

这是代码：

```
<script type="text/javascript">

function fetchAjaxContent(msg,time) {

        setTimeout(function(){
        $.ajax({
            type: "GET",
            url: "ajax.php?msg="+msg+"&p="+Math.random(),
            dataType: "xml",
            success: function(xml) {
                $(xml).find('msgs').each(function(){
                    var content = $(this).find('content').text();
                    var ftime = $(this).find('time').text();
                    $("#page-wrap").html(content);

                });
            }           

        });

        msg=msg+1;
        if(msg=4)
        msg=1;
        ftime=parseInt(ftime)*1000;
        fetchAjaxContent(msg,ftime);    
    },time);

}

fetchAjaxContent(1,0); 
```

它在第一次迭代中工作，第二次失败。

函数以 msg id =1 和 time =0 开始，以启动页面加载的第一个循环。在第二个循环中，在 x 秒后调用 settimeout。

我在做什么错，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:44:26.117

拿这些代码

```
 msg=msg+1;
    if(msg=4)
    msg=1;
    ftime=parseInt(ftime)*1000;
    alert(ftime);
    fetchAjaxContent(msg,ftime); 
```

我在这里发现了一个问题：

```
if(msg=4) should be if(msg == 4) 
```

另一个问题：

`error`是一个函数，所以它应该

```
error: function() {
  alert('Error');
} 
```

在整个尝试以下：

```
 function fetchAjaxContent(msg, time) {
     setTimeout(function() {
        $.ajax({
            type: "GET",
            url: "ajax.php",
            dataType: "xml",
            success: function(xml) {
                $(xml).find('msgs').each(function() {
                    var content = $(this).find('content').text();
                    var ftime = $(this).find('time').text();
                    $("#page-wrap").html(content);
                });
                msg = msg + 1;
                if (msg == 4) msg = 1;
                ftime = parseInt(ftime) * 1000;
                alert(ftime);
                fetchAjaxContent(msg, ftime);
            },
            error: function() {
                alert("error");
            }
        });
    }, time);
 }
fetchAjaxContent(1,0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:06:53.610

您`ftime`在 succes 函数中定义，这意味着它在 succes 函数之外不可用，

在应该解决您的问题的主要功能中定义`ftime`。

```
function fetchAjaxContent(msg,time) {
        var ftime;
        setTimeout(function(){
        $.ajax({
            type: "GET",
            url: "ajax.php?msg="+msg+"&p="+Math.random(),
            dataType: "xml",
            success: function(xml) {
                $(xml).find('msgs').each(function(){
                    var content = $(this).find('content').text();
                    ftime = $(this).find('time').text();
                    $("#page-wrap").html(content);

                });
            }           

        });

        msg=msg+1;
        if(msg=4)
        msg=1;
        ftime=parseInt(ftime)*1000;
        fetchAjaxContent(msg,ftime);    
    },time);

} 
```

**更新：**

您的代码中还有一个问题，

`jQuery.ajax()`执行**异步**HTTP (Ajax) 请求。所以`ftime`不会立即设置，并且`fetchAjaxContent`会以相同的方式连续调用`ftime`，您应该将所有代码放入ajax成功函数中。

```
function fetchAjaxContent(msg,time) {
        setTimeout(function(){
        $.ajax({
            type: "GET",
            url: "ajax.php?msg="+msg+"&p="+Math.random(),
            dataType: "xml",
            success: function(xml) {
                $(xml).find('msgs').each(function(){
                    var content = $(this).find('content').text();
                    var ftime = $(this).find('time').text();
                    $("#page-wrap").html(content);

                    msg=msg+1;
                    if(msg=4)
                      msg=1;
                    ftime=parseInt(ftime)*1000;
                    fetchAjaxContent(msg,ftime);    
                });
            }           

        });
    },time);

} 
```

# iphone - 在 iOS 中将日期格式化为 dd-MMM

> ID：10574248
> 
> 赞同：2
> 
> 时间：2012-05-13T18:40:41.287
> 
> 标签：iphone, objective-c, ios, nsdate, nsdateformatter

我一直在寻找这个，并不能完全找到它。我在包含 NSDate 的 NSDictionary 中有一个对象。现在标准的 NSDate 对象已经很长了。我想以 dd-MMM 格式向用户展示。

例如：原始日期可能是`2012-04-23 00:00:00 +0000`，我希望日期显示为`23 Apr`

我尝试使用 NSDateComponents 和 NSDateFormatter 但效果不佳。可能我没有弄清楚所需格式的正确用法。

这是更好理解的代码：

```
 NSLog(@"From Dictionary, Date = %@",[tmpDict objectForKey:@"eventDate"]);
            NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
            [dateFormatter setDateFormat: @"yyyy-MM-dd HH:mm:ss Z"]; 
            NSString *dateString = [tmpDict objectForKey: @"eventDate"];
            NSDate *date = [dateFormatter dateFromString: dateString];

            NSLog(@"MY DATE: %@",date);
            NSDateFormatter *dateFormatter2 = [[NSDateFormatter alloc] init];
            [dateFormatter2 setDateFormat:@"dd-MMM"];
            NSString *formattedDateString = [dateFormatter2 stringFromDate:date];
            NSLog(@"Formatted Date: %@",formattedDateString); 
```

`From Dictionary, Date`对于格式化日期和我的日期，输出为 2012-05-19 07:30:56，为空。并且`tmpDict`是我正在使用的字典对象。

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T20:36:08.533

根据[Duncan C](https://stackoverflow.com/users/205185/duncan-c)的回答。

如果将日期表示为字符串，则先将其转为日期，然后在其上使用 NSDateFormatter。假设格式将保持不变

```
[dateFormatter setDateFormat: @"yyyy-MM-dd HH:mm:ss Z"]; 
NSString *dateString = [dictionaryObject objectForKey: @"eventDate"];
NSDate *date = [dateFormatter dateFromString: dateString]; 
```

然后你可以对对象做你现在正在做的事情`date`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T18:47:16.187

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd-MMM"];
NSString *formattedDateString = [dateFormatter stringFromDate:myDate];
[dateFormatter release]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T19:30:08.780

听起来您使用键 eventDate 从字典中获取的对象是字符串，而不是日期。

试试这个代码：

```
NSDate *myDate=[tmpDict objectForKey:@"eventDate"]; 
NSLog(@"myDate class = %@", [myDate class]); 
```

我敢打赌它显示了一个 NSString 类或其子类，而不是 NSDate。

# javascript - DataTables API，fnUpdate 不从变量中获取值

> ID：10574249
> 
> 赞同：2
> 
> 时间：2012-05-13T18:40:56.210
> 
> 标签：javascript, jquery, variables, jquery-datatables

以下是使用函数更新单行的两个单元格的代码片段`fnUpdate`：（参考：[数据表](http://datatables.net/api)）

```
var oTable = $('#depGridView').dataTable();
oTable.fnUpdate( 'First', 4, 1 );
oTable.fnUpdate( 'Last', 4, 2 ); 
```

上面的代码成功更新了第五行的第二列和第三列（:index=4）。为了获得索引值运行时间，我做了以下更改

```
var oTable = $('#depGridView').dataTable();
var getIndex = document.getElementById("indexDepRow").value;
oTable.fnUpdate( 'First', getIndex , 1 );
oTable.fnUpdate( 'Last', getIndex , 2 ); 
```

但这不起作用，它不会更新我的行。为了检查变量**getIndex**是否存储了正确的索引值，我在脚本中使用了**alert(getIndex) 。**当我点击第五行时，它会提醒我**4 。**

我们怎样才能克服这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T21:54:35.140

使用`parseInt(getIndex)`而不是直接使用行。

**[演示](http://jsfiddle.net/dhirajbodicherla/sThGk/1/)**

希望这可以帮助

# sockets - 没有 IPv6 的 IPv6 网络编程？

> ID：10574255
> 
> 赞同：0
> 
> 时间：2012-05-13T18:41:18.193
> 
> 标签：sockets, network-programming, winsock, ipv6, winsock2

好的，所以我已经开始做一些套接字编程，我正在尝试同时学习如何使用标准 BSD 实现以及如何将其转换为 Windows 上的 Winsock API。我正在为自己设置一个 Winsock 实用程序库头文件，它可以包含在未来的包含网络的项目中。我希望我的库与 IPv4/6 无关，因为它具有适用于 IPv4 和 IPv6 的功能。

我遇到的问题是我无法在任何地方访问互联网服务，显然无法连接到任何 IPv6 互联网。我知道世界 IPv6 日将在 6 月到来，所以也许这会改变。不过我对此表示怀疑。无论如何，我无法测试我编写的任何功能，特别是在 IPv6 地址或主机上。

这是一个例子：

我有这个函数，它应该将主机名作为字符串，解析它，然后将可呈现的 IP 地址作为字符串返回。我有一个版本 [ip_string()]，它返回它可以在地址系列 AF_INET 或 AF_INET6 中获得的第一个好的 IP 地址。第二个版本 [ip4_string()] 将只返回一个 IPv6 地址，与 [ip6_string()] 返回一个 IPv6 地址相同。

```
char *ip_string(const char hostname[])
{
    char *buffer = new char[INET6_ADDRSTRLEN];
    struct addrinfo hints, *res, *ptr;
    void *addr = NULL;  // void pointer to be set to sin_addr or sin6_addr

    /** Initialize hints structure */
    ZeroMemory(&hints, sizeof(hints));
    hints.ai_family = AF_UNSPEC; // ipv4 or ipv6 address family
    hints.ai_socktype = SOCK_STREAM;

    /** Function getaddrinfo returns non-zero if there's a problem */
    if (getaddrinfo(hostname, "http", &hints, &res) != 0)
        throw WinsockException("getaddrinfo()");

    /** Loop through list of address structures till we find a valid IP */
    const int MAX_ATTEMPTS = 15;
    int i = 0;
    for (ptr = res; (ptr != NULL); ptr = ptr->ai_next)
    {
        if (i++ <= MAX_ATTEMPTS)
        {
            if (ptr->ai_family == AF_INET)
            {       // Cast appropriately for ipv4
                addr = &(((struct sockaddr_in *)ptr->ai_addr)->sin_addr);
                inet_ntop(ptr->ai_family, (in_addr*) addr, buffer, INET_ADDRSTRLEN);
            }
            else if (ptr->ai_family == AF_INET6)
            {       // Cast appropraitely for ipv6
                addr = &(((struct sockaddr_in6 *)ptr->ai_addr)->sin6_addr);
                inet_ntop(ptr->ai_family, (in6_addr*) addr, buffer, INET6_ADDRSTRLEN);
            }
        }
    }

    freeaddrinfo(res);  // free list of address structures
    if (addr == NULL)
    {
        delete [] buffer;
        return NULL;
    }

    return buffer;
} 
```

我遇到的问题（我假设）是因为我没有可用的 IPv6 连接（我使用[test-ipv6.com](http://test-ipv6.com)确认），任何时候这些函数中的任何一个在 ipv6 主机上调用 getaddrinfo()函数似乎根本不返回。

这是正常的吗？无论如何检查连接以查看是否通过 Winsock API 启用了 ipv6？我有什么好方法可以在非 ipv6 连接上测试启用 ipv6 的代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T21:13:26.783

您可以设置自己的小型 IPv6 互联网来测试它，但让自己获得 IPv6 隧道会容易得多。

即使您的提供商不提供 IPv6 访问（您应该为此大喊大叫！），您仍然可以获得可用的 IPv6 连接。以[飓风电气](http://tunnelbroker.net/)为例。

你眼前的问题可能就像卡罗利所说的那样简单。只需去掉 for 循环内的第一个 if() 语句。无论如何它都是多余的（除了额外的 i++ 会破坏事情！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T03:43:43.983

要回答有关检查 IPv6 可用性的问题，您可以使用`WSAEnumProtocols()`查看操作系统是否安装了 IPv6，但这只会告诉您是否可以在代码中使用 IPv6 套接字和函数，而不是您是否能够建立 IPv6 连接网络。如果您的网络不支持 IPv6，那么您无能为力。我建议您为自己准备一个支持 IPv6 的路由器并创建一个专用 LAN 进行测试。

# multithreading - 使用 UDP 和 netty 时，服务器只能向客户端返回一个答案

> ID：10574256
> 
> 赞同：1
> 
> 时间：2012-05-13T18:41:18.613
> 
> 标签：multithreading, udp, threadpool, nio, netty

我有一台服务器正在侦听 UDP 端口上的数据，并且我正在使用 netty。我的服务器有自己的帧解码器、执行处理程序和业务特定处理程序。我的测试客户端是用java DatagramSocket（不使用netty）制作的，只是在监听回复之前发送数据。请参阅下面的示例。

在我的第一个版本中，我没有在我的服务器中发回任何回复，并且我能够运行数千个并发客户端重复发送请求而没有任何问题。我的服务器完美地处理了数十万个请求。

然后，我必须在我的业务特定处理程序中为服务器端收到的每个请求添加回复。我只是按照netty 端提供的示例进行操作，即将我的数据写入事件缓冲区。在客户端，我重用了发送数据的同一个 udp 套接字来接收响应。该机制非常适用于一个客户端向我的服务器发送数百个连续请求，每个请求都正确回复。但是，在我的客户端关闭（而不是关闭套接字）的那一刻，我的服务器停止接受任何其他请求。我必须重新启动服务器才能再次运行该过程。当然，当运行多个并发客户端时，只有一个运行良好，只有一次。

我使用wireshark分析发送和接收的数据。所有数据都正确发送到服务器，服务器在客户端第一次运行时正确返回回复。但是在我停止客户端尝试重新运行它的那一刻，我的服务器停止处理数据。使用wireshark，我可以看到数据确实被发送到服务器，实际上是服务器本身停止处理数据。

有人可以告诉我在那个例子中我做错了什么吗？

**这是我的客户端的简单版本：**

```
public class UDPClientTester
{

    public void sendAndReceiveClientTester() throws IOException
    {
        final InetAddress lIpAddress = InetAddress.getByName( "localhost" );
        int lPort = 50000;
        int lNbrRepeat = 1;

        byte[] lDataToSendAsBytes = {1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0}; //new byte[20];
        byte[] lReceivedData = new byte[22];

        final DatagramSocket udpSocket = new DatagramSocket();

        DatagramPacket lSendPacket = new DatagramPacket( lDataToSendAsBytes, lDataToSendAsBytes.length, lIpAddress, lPort );
        DatagramPacket lReceivePacket = new DatagramPacket( lReceivedData, 22 );

        // No metter the number of repeats, the server will accept all requests and return a reply for each one.
        for ( byte k = 0; k < lNbrRepeat; k++ )
        {
            // Send data...
            udpSocket.send( lSendPacket );

            // Receive response... Block here until a response is received.
            udpSocket.receive( lReceivePacket );            
        }

        udpSocket.close();

        // At the moment I close the socket, the server stop to accept anymore requests. 
        // I cannot run this example again until I restart the server!
    }
} 
```

**这是我的服务器的一个简单版本，仅显示 main() 和处理程序（不显示解码器）：**

```
public class TesterChannelHandler extends SimpleChannelHandler
{
    public  void main(final String[] args) throws Exception
    {
       DatagramChannelFactory f = new NioDatagramChannelFactory( Executors.newCachedThreadPool() );

       ConnectionlessBootstrap b = new ConnectionlessBootstrap(f);

       // Configure the pipeline factory.
       b.setPipelineFactory(new ChannelPipelineFactory() {

           ExecutionHandler executionHandler = new ExecutionHandler( new OrderedMemoryAwareThreadPoolExecutor(16, 1048576, 1048576) )

           public ChannelPipeline getPipeline() throws Exception {
              return Channels.pipeline(
                      new OuterFrameDecoder( null ),
                      executionHandler,
                      new TesterChannelHandler() );
          }
      });

      // Enable broadcast
      b.setOption( "broadcast", "false" );
      b.setOption( "receiveBufferSizePredictorFactory",
                   new FixedReceiveBufferSizePredictorFactory(1024) );

      // Bind to the port and start the service.
      b.bind( new InetSocketAddress(50000) );

    }

    public void messageReceived(final ChannelHandlerContext ctx, final MessageEvent e)
    {            
        Channel lChannel = e.getChannel();
        SocketAddress lRemoteAddress = e.getRemoteAddress();

        byte[] replyFrame = {0,9,8,7,6,5,4,3,2,1};

        ChannelBuffer lReceivedBuffer = (ChannelBuffer) e.getMessage();
        ChannelBuffer lReplyBuffer = ChannelBuffers.wrappedBuffer( replyFrame );

        if ( lChannel != null && lChannel.isWritable()  && lRemoteAddress != null )
        {
            // OK, I FOUND THE ERROR!! I DO NOT NEED TO CONNECT THE CHANNEL! I MUST USE THE REMOTE SOCKET ADDRESS ATTACHED TO THE EVENT AND PASS IT TO THE WRITE METHOD BELOW.
            if ( !e.getChannel().isConnected() ) e.getChannel().connect( e.getRemoteAddress() );

            // BELOW I SHOULD PASS THE REMOTE SOCKET ADDRESS ATTACHED TO THE EVENT AS THE SECOND ARGUMENT OF THE WRITE METHOD.
            e.getChannel().write( lReplyBuffer );
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:29:22.443

我怀疑您的解码器存在问题，因此它将接收到的数据存储到其内部缓冲区中而没有完成解码。为了确认这一点，我将在管道的开头添加一个 LoggingHandler 以记录真正收到（或未收到）的内容。如果 LoggingHandler 记录已收到某些内容但 TesterChannelHandler 没有收到消息，则解码器可能有问题。

另外，请注意您的解码器不需要是 FrameDecoder，因为 UDP 是面向消息的协议。

# javascript - 如何正确连接 mongodb 和 Node.js？

> ID：10574257
> 
> 赞同：0
> 
> 时间：2012-05-13T18:41:25.920
> 
> 标签：javascript, node.js, mongodb

嗨，我一直试图让这段代码工作，但我无法弄清楚我的代码有什么问题。如果连接打开，它应该打印“here...”。另外，我查看了“mongod”的控制台，它显示有一个连接打开，但没有打印出来。

```
 var Db = require('mongodb').Db;
var Server = require('mongodb').Server;
var client = new Db('test1', new Server('127.0.0.1', 27017, {}));

var Vocabulary = function() {

    function get(german_vocab) {
        client.open(function(err, pClient) {
            console.log("here...")
            client.collection('test1', function(err, collection) {
                collection.insert({name:"myself"});
            });

            client.collection.find().toArray(function(err, results) {
                console.log(results);
            });
        });

    }

    return {
        get : get
    };
}

module.exports = Vocabulary;

var vocab = Vocabulary();
vocab.get("Ich"); // Nothing shows in this line. 

```

此外，当我检查没有创建数据库时。我认为一旦插入了一些东西，mongodb 数据库就会被懒惰地创建？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:58:13.097

In the [docs](http://mongodb.github.com/node-mongodb-native/markdown-docs/collections.html) they describe a function called `db.createCollection([[name[, options]], callback)`, have you tried that? And maybe you should think about using something like [mongoose](https://github.com/LearnBoost/mongoose), which is a nice 3rd party lib for working with mongodb.

I hope I could help! :)

# c# - 当表格 X 关闭时，我如何让表格 Y 发生一些事情

> ID：10574258
> 
> 赞同：1
> 
> 时间：2012-05-13T18:41:29.350
> 
> 标签：c#, winforms

单击该按钮时，将显示第二个表单“uxDGVdatabase”，并且调用表单中的控件被禁用。当用户关闭 uxDGVdatabase 时，我希望 uxRevisionHelperForm 中的控件再次启用。

所以我假设我需要使用委托来执行此操作？在 uxRevisionHelperForm 我有以下内容：

```
 public delegate void myDelegate(); 

    private void updateDataButton_Click(object sender, EventArgs e)
    {

        myDelegate letsTryThis = new myDelegate(activateGroupBorder);

        uxRevisionHelperGroupBox.Enabled = false;
        uxDGVdatabase myNewDisplay = new uxDGVdatabase();
        myNewDisplay.Show();
    }

    public void activateGroupBorder() {
        uxRevisionHelperGroupBox.Enabled = true;
    } 
```

在 uxDGVdatabase 我有以下内容 - 这里需要输入什么代码？

```
 private void uxDGVdatabase_closed(object sender, FormClosedEventArgs e)
    {

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T18:44:38.440

您将事件处理程序放在错误的类中。你会想要这样的：

```
 uxRevisionHelperGroupBox.Enabled = false;
    uxDGVdatabase myNewDisplay = new uxDGVdatabase();
    myNewDisplay.FormClosed += delegate { uxRevisionHelperGroupBox.Enabled = true; }
    myNewDisplay.Show(); 
```

请记住，事件对于在*另一个*类中编写代码很有用。

# joomla - Joomla + K2 + SIGpro 给出奇怪的错误

> ID：10574260
> 
> 赞同：0
> 
> 时间：2012-05-13T18:41:31.657
> 
> 标签：joomla, joomla-extensions, joomla-k2

我刚刚安装了我的 Joomla 2.5.4、K2 2.5.6 和 SIG pro 2.5.3，一切看起来都很好，除了当我上传一个包含一些图像用作图片库的 zip 文件时，我在 K2 项目中收到此错误编辑界面：

**转换源图像时出现问题。渲染您的图库时出现问题。请确保您在 Simple Image Gallery PRO 插件标签中使用的文件夹存在并且包含有效的图像文件。插件找不到文件夹：media/k2/galleries/27**

有趣的是，我可以在“media/k2/gallery/27”中看到我上传的图片，但在管理员界面和前端项目视图中，我都有“{gallery}27{/gallery}”。

我到处搜索，遇到这个问题的人错误地访问了媒体文件夹或压缩了包含图像（而不是图像）的文件夹。

我已经进行了这些设置，但问题仍然存在：

*   访问媒体文件夹和其中的所有文件夹都是 777
*   对所有其他文件夹的访问权限为 775
*   我确定我正在上传的 zip 文件。它仅包含JPEG图像，所有图像均小于80K

我有 Ubuntu 服务器并且我正在使用 NginX 网络服务器，但我在 Apache 中遇到了同样的错误。

***PS：**当然我知道这里不是问这些工具问题的好地方，但我的处境很糟糕，我需要帮助！*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:38:38.957

从后端激活 Simple Image Gallery PRO 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:42:19.633

这是一个网络服务器和 FTP 创建的文件访问问题。

我在这里描述它：[https ://stackoverflow.com/a/10978268/893111](https://stackoverflow.com/a/10978268/893111)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-08-16T14:55:37.413

呈现您的图片库时出现问题，请确保您在**Simple Image Gallery Pro**插件标签中使用的文件夹存在并且包含有效的图片文件。插件找不到文件夹

# php - 对 Web 应用程序使用单点登录 (sso) 时的数据库检查（用于凭据），提示？

> ID：10574263
> 
> 赞同：1
> 
> 时间：2012-05-13T18:41:54.680
> 
> 标签：php, database, login, single-sign-on, match

我想在我们拥有的管理应用程序中实现单点登录 (sso)，但我想得到一两个提示。在我们当前的应用程序中，客户端使用典型的用户+密码组合登录我们的应用程序（验证码是可选功能）。

据我了解（如果我做得正确的话），您对 sso 所做的是“信任”身份提供者（即...... Google、Facebook、Yahoo!、Windows Live 等），因此客户端正在执行在外部页面中实际登录，然后它向我返回一个值，所以我知道客户端已由身份提供者验证。

在我看来，我想做这样的事情（zwibbler FTW！）：

![预期的身份验证机制](../Images/a034410d1c9cb13134cdacc2f0c6e2ed.png)

但是在我们当前的应用程序中，我们根据我们的数据库检查用户名和他/她的密码，这就是我对 SSO 的理解失败的地方......我如何将身份提供者返回的信息与我的用户数据相匹配？

或者更好地表达......我可以在我的用户帐户数据中使用哪些字段（如“典型”ala 用户、通行证、电子邮件等）来匹配外部身份验证？我担心这是一个商业应用程序，所以我想为用户提供使用他们自己的登录数据的能力，但我必须以某种方式将它与我们的数据相匹配才能让（或不）他/她登录，所以... 我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:47:47.380

作为一般设计，您将拥有以下表格

*   用户
*   角色
*   auth_OpenID
*   auth_Google
*   auth_Facebook
*   auth_Windows_Live

（将任何共享相同结构的身份验证表滚动到一个表中）。

users 表将识别系统上的所有帐户。角色表将识别您需要处理的所有权限集。然后 auth_* 表将包含远程登录所需的信息（例如 Google 帐户 ID 和身份验证令牌）。

然后，您在 users 表和其他每个表之间建立了多对多的关系。

如果有人使用未知的第三方身份验证系统登录，您会提示他们将其链接到现有帐户（在这种情况下，他们必须使用一组公认的凭据再次登录）或创建一个新帐户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T12:50:27.437

你有几个选择：

*   推出自己的解决方案（不好玩）。
*   使用[HybridAuth 之](http://hybridauth.sourceforge.net/)类的解决方案。您需要几个额外的字段或一个额外的表来将每个提供者 + ID 映射到本地用户 ID。
*   稍微改变策略，让一个完全独立的系统管理您的登录和权限分配（即标签），例如： [单点登录服务器/客户端](http://barebonescms.com/documentation/sso/)

我非常偏爱最后一种方法。特别是如果您有多个不同的登录系统需要相互通信，或者您甚至预见到这种需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T19:33:06.923

如果您使用电子邮件地址作为用户名，则可以这样匹配。不过，您可能仍然需要构建一个系统，通过该系统，经过身份验证的用户可以将他的用户帐户与其他身份验证提供者关联（同时仍处于登录状态）。如果你这样做，关系将是隐含的。

# git - 连接到 Github 时“无法生成 ssh”，但 ssh -T git@github.com 有效吗？

> ID：10574267
> 
> 赞同：28
> 
> 时间：2012-05-13T18:42:13.763
> 
> 标签：git, version-control, ssh, github

我很难让 Github（+Netbeans 工作）。

我想将 ssh 与 git（在 Windows 7 上）一起使用，例如，提交或克隆项目，但我不断收到此错误消息：

```
$ git clone git@github.com:USER/PROJECTNAME.git
error: cannot spawn C:\Program Files (x86)\Git\bin\ssh.exe: No such file or directory
fatal: unable to fork 
```

*注意*：目前，我的`GIT_SSH`环境变量指向`C:\Program Files (x86)\Git\bin\ssh.exe`，但我也尝试过`C:\Program Files (x86)\Git\bin`，完全擦除它，指向 putty/plink 的文件夹，并指向它们的可执行文件，但仍然是相同的消息。

当我测试连接时，一切正常：

```
$ ssh -T git@github.com
Hi USER! You've successfully authenticated, but GitHub does not provide shell access. 
```

我究竟做错了什么？如果我`git init`首先在目录中执行它会有所不同吗？

**编辑**：

这没有帮助：

[设置`GIT_SSH`并`plink.exe`添加 plink 的路径`PATH`](http://code.google.com/p/msysgit/issues/detail?can=2&start=0&num=100&q=&colspec=ID&groupby=&sort=&id=313)

**编辑 2 **

命令的结果`GIT_TRACE=2`

```
$ GIT_TRACE=2 git clone git@github.com:XXX/AffableBean
trace: built-in: git 'clone' 'git@github.com:XXX/AffableBean'
Cloning into 'AffableBean'...
trace: run_command: 'Plink.exe' '-batch' 'git@github.com' 'git-upload-pack '\''XXX/AffableBean'\'''
error: cannot spawn Plink.exe: No such file or directory
fatal: unable to fork 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-09-01T22:28:31.237

到目前为止，没有一个答案对我有用。最终为我解决了这个问题的是从我的`GIT_SSH`变量中删除引号并且根本不转义任何字符，没有 MSYS 路径样式（例如。`/c/path\ to\ putty/plink.exe`）。只需正常输入路径，Git 处理引用。

```
set GIT_SSH=C:\path to putty\plink.exe 
```

而已。使用 GIT_TRACE 时，您可以看到变量在结果命令中被引用，因此：

1.  添加的双引号会更改传递给命令的字符串，并且

2.  路径用单引号括起来，所以空格没问题。

希望对某人有所帮助。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-08T05:28:36.320

在我的情况下，将 GIT_SSH 设置为：

> GIT_SSH=/c/Program\ Files\ (x86)/Git/bin/ssh.exe

在 git bash 中工作。

编辑：这应该不再需要了。而是使用 Windows 凭据管理器。谢谢@breakpoint

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-19T13:44:09.673

您是否尝试将 ssh.exe 安装到不包含空格的路径？您是否测试过引用反斜杠是否有效（`\\`）？

您也可以尝试`GIT_TRACE=2 git clone <...>`，它应该向您显示 git 尝试运行以进行连接的命令和参数。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-04-09T05:32:53.330

就我而言，我能够通过在 CMD 终端中创建目录连接并重置 GIT_SSH 来解决该问题。

通过在 Git Bash 终端中运行此 Windows CMD 命令来查找 ssh 命令的路径。

```
$ where ssh
C:\Program Files\Git\usr\bin\ssh.exe 
```

在 CMD 终端中为原始 Git 目录创建一个没有空格的连接。

```
mklink /J \git "\Program Files\Git" 
```

然后编辑 GIT_SSH 环境变量以使用联结。对于 Windows 7，控制面板 > 系统和安全 > 系统 > 高级系统设置。

```
C:\git\usr\bin\ssh.exe 
```

在将 PuTTY 使用切换到 OpenSSH 后，我以某种方式遇到了这个问题。git 版本是 2.21.0.windows.1。我希望这有帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-09-16T10:44:20.673

多么史诗般的跋涉！以上没有对我有用，但这是我的解决方案。在那次手术之前，我总是得到：

> 错误无法生成 ssh：权限被拒绝。

先决条件：Git for Windows，安装在例如`C:\Program Files\Git`

*   窗口键
*   输入“env”+回车
*   `[Environment Variables]`按钮，系统变量部分
*   编辑或添加`GIT_SSH=ssh`
*   当您在该对话框中时，现在编辑`Path`同一部分
*   添加 value `C:\Program Files\Git\usr\bin`，或者您的 Git ssh.exe 二进制文件所在的任何位置。
*   我坚持使用您的**git ssh.exe 二进制文件**，而**不是**您的*OpenSSH*二进制文件，这些文件现在随 Windows 10 一起提供，在`%SYSTEMROOT%\System32\OpenSSH\`
*   现在是**关键**步骤：使用`Move up`让**Git ssh.exe**优先于 OpenSSH。（见下图）
*   确定一切，然后重新加载您的工作控制台

`git push`现在应该可以工作了。 [![在此处输入图像描述](../Images/b02a4e87dff365a4bd40990fdbc2767f.png)](https://i.stack.imgur.com/956Qq.jpg)

注意：

*   不需要符号链接或连接
*   没有更改任何 Windows 权限
*   没有逃脱任何空间或任何东西
*   不使用双引号

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-27T10:28:30.350

i think a path (ex: C:\Program Files (x86)\Git) having blank space so it cannot recognise.

to resolve it

*   make a simple link to shorten path

    mklink /d "C:/Git" "C:\Program Files (x86)\Git"

it works for me and also for Jenkins (if you use it with Git plugin)

*   set GIT_SSH=C:\Git
*   Finally, set PATH to `%GIT_SSH%\bin`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-18T22:08:16.133

这真的很尴尬，但真正的问题是我的防火墙`Comodo Firewall`以某种方式阻止了 ssh 连接被`git`.

我可以毫无问题地通过 ssh 连接，例如使用命令行或 Putty，但不知何故`Comodo`导致了这个奇怪的问题。

感谢大家的支持！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-17T13:20:03.587

除非您有一些模糊的防病毒交互，否则看到此错误消息的唯一其他情况（除了您所指的[问题 313 ）是：](http://code.google.com/p/msysgit/issues/detail?id=313)

“[错误：无法生成 git：没有这样的文件或目录](https://groups.google.com/forum/?fromgroups#!topic/msysgit/6bFAPUQDQLI)”

> 如果您遇到此错误“ `error: cannot spawn git: No such file or directory`”，这是一个非常讨厌的问题。
> 我花了一天的时间来追踪它，但归结为如果你在存储库中有超过 500 个标签，它必须破坏一些内部命令行限制。
> TLDR：如果您收到此错误，请删除一堆标签。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-03-30T12:19:51.687

对于找到此帖子但有类似以下错误消息的任何人（**权限被拒绝**）：

```
error: cannot spawn C:\Program Files\OpenSSH\: Permission denied
fatal: unable to fork 
```

就我而言，错误是 GIT_SSH 指向目录**C:\Program Files\OpenSSH\**而不是文件**C:\Program Files\OpenSSH\ssh.exe**。修复此问题后，git 在 PowerShell 和 bash 中都可以工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-08-24T08:48:21.217

在我的 Windows 7 默认 ms git bash 安装中，我需要将 GIT_SSH 设置为：

```
"C:\\Program Files (x86)\\Git\\bin\\ssh.exe" 
```

因此，只需找到 Git 安装提供的 ssh.exe 并使用正确的目录更新上述内容。

要使每次运行 git bash 时都保持不变，只需在 .bashrc 文件中添加主目录：

```
export GIT_SSH="C:\\Program Files (x86)\\Git\\bin\\ssh.exe" 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-03T09:21:49.253

如果您使用的是 Windows PowerShell，请尝试将正确的路径设置为`GIT_SSH`. 就我而言：

```
PS C:\some\path> $env:GIT_SSH="C:\Program Files\PuTTY\plink.exe" 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-06-14T10:05:28.997

我不断收到错误

> 错误：无法生成“C:\Plink.exe”：没有这样的文件或目录致命：无法分叉

当做`git push`和`git pull`。我通过进入 .git/config 文件并更改来解决它

`url = git@github.com:<USER>/<REPO>.git`

至

`url = https://github.com/<USER>/<REPO>`

希望这可以帮助！

# javascript - 重新加载时保持 JavaScript 切换打开

> ID：10574269
> 
> 赞同：2
> 
> 时间：2012-05-13T18:42:46.053
> 
> 标签：javascript, toggle

我有一个 JavaScript 函数，允许我切换联系表单的可见性。提交表单后，我希望表单保持打开状态。是否有某种方法可以创建 cookie 来告诉脚本在提交后重新加载页面时显示表单。

**HTML**

```
<a href="#" onClick="toggle_visibility('toggle');">Contact</a> 
```

**CSS**

```
#toggle{
    display:none;
} 
```

**JS**

```
function toggle_visibility(id) {
    var e = document.getElementById(id);
    if(e.style.display == 'block'){
        e.style.display = 'none';
    }else{
        e.style.display = 'block';
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:13:14.353

您可以使用您使用的任何服务器端技术重定向到 /ThePage?toggle=1 并使用以下内容读取 url 参数：

```
function onload() {
    var toggle = getUrlParams()["toggle"];
    if (toggle == "1") toggle_visibility('toggle');
}

function getUrlParams() {
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T19:16:53.847

您可以使用本地 javascript 将状态保存在 cookie 中（不涉及服务器）：

```
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function toggle_visibility(id, cookieName) {
   var e = document.getElementById(id);
   var visible;
   if(e.style.display == 'block') {
      e.style.display = 'none';
      visible = false;
   } else {
      e.style.display = 'block';
      visible = true;
   }
   if (cookieName) {
       createCookie(cookieName, visible, 1);
   }
} 
```

然后，当你的页面被加载时，你可以在 DOM 加载完成后调用这个函数来恢复之前的状态：

```
function restore_visibility(id, cookieName) {
    var visibility = readCookie(cookieName);
    if (visibility == null) return;    // no cookie
    var e = document.getElementById(id);
    if (visibility) {
        e.style.display = 'block';
    } else {
        e.style.display = 'none';
    }
} 
```

您可以使用类似`"contactFormVisible"`cookieName 的字符串。

# php - 从 php 和 mysql 如何在 html 文件中加载和插入数百万条记录

> ID：10574271
> 
> 赞同：0
> 
> 时间：2012-05-13T18:43:01.297
> 
> 标签：php, mysql

我有最大 1GB 的 html 文件。我想在数据库中上传这个 html 文件的内容。文件（html）包含`<table><tr><td></td></tr></table>`标签。如果文件大小约为 5MB 或 6MB，则此工作完成，但大文件大小给我 OUT OF MEMORY（xxxxx 字节）试图分配（xxxxxxx 字节）的错误。

我如何在数据库中上传大文件大小的数据..

我使用 DOMDocument -> LoadHTMLfile 函数.... 和 getElementByTagName("tr")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:51:32.033

当 PHP 在尝试为数组、变量等分配内存时耗尽内存时会触发此错误。最大内存量在 php.ini 中使用指令指定

```
memory_limit = 128M 
```

（或类似的）。尝试增加值，看看它是否有帮助。但是，如果您超过了非常大的内存分配（例如，256 MB 或更大），那么您的设计肯定存在缺陷，因为您不应该一次在内存中保留那么多数据。

如果您正在处理一个文件，您应该分块读取文件，将数据插入数据库并读取更多块。对于 HTML 处理，SAX 解析器可能是一个好主意，可能是[这样](http://www.phpclasses.org/package/2140-PHP-Parse-HTML-documents-using-regular-expressions.html)的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T18:49:36.957

使用 XMLReader

[http://www.php.net/manual/en/book.xmlreader.php](http://www.php.net/manual/en/book.xmlreader.php)

它不会一次将整个文档读入内存。

# c# - C# Open/SaveFileDialog 使用不同的文件系统

> ID：10574272
> 
> 赞同：0
> 
> 时间：2012-05-13T18:43:07.100
> 
> 标签：c#, winforms, filesystems, openfiledialog, savefiledialog

我希望打开标准窗口并保存文件对话框，但是，我使用它的特定应用程序是一个远程文件系统（基本上，我很想以某种方式为 SaveFileDialog 提供一个 IFileSystem 接口并让它神奇地改变我提供它们时看到的文件）。有谁知道支持此功能的那些对话框的完整实现？有没有办法用标准的 C#/windows 对话框来做到这一点？

如果没有，我将自己实施对话。我仍然会喜欢任何资源来实现这些对话框，即使它们不支持此功能，这样我就可以将它们拆开并自己添加该功能。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T21:02:39.127

唯一的选择是实现您自己的 Shell 命名空间扩展。它可能被注册为“我的电脑”子项，因此它看起来像另一个驱动器。注意：这是一项乏味的工作，并且由于 .NET 框架的限制（<4.0），它必须用 C/C++ 编写。

[这](http://www.codeproject.com/Articles/7973/An-almost-complete-Namespace-Extension-Sample)是示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T18:59:23.923

这些类是对本地 Windows shell api 函数调用的非常薄的包装器。GetOpenFileName() 用于 XP 及更早版本，IFileOpenDialog COM 接口用于 Vista 及更高版本。如果您在资源管理器中看不到文件系统，那么这些包装器将毫无用处。

# java - 如何在 Jess 中将 java gui 作为小程序制作？

> ID：10574273
> 
> 赞同：0
> 
> 时间：2012-05-13T18:43:09.403
> 
> 标签：java, user-interface, applet, jess

我有一个用 Jess（Java 库之一）编写的界面，它有一个面板和一个组合框

我想让它作为小程序运行。所以我可以将它嵌入到网络上！

这是我的applet.java，

```
package uges.applets;

import java.applet.Applet;
import jess.*;
Applet applet = new Applet();
public class JessApplet extends Applet
{
public void init()
{
Rete engine = new Rete(applet);
try
{
    engine.batch("ug-pro.clp");
    engine.reset();

} catch (JessException e)
{
    // TODO Auto-generated catch block
    e.printStackTrace();
}
}
} 
```

错误是无法打开文件 ug-pro.clp .. 我应该将它放在特定文件夹中吗？我可以在 jess 中将我的 GUI 制作为小程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T22:51:00.457

> 我可以在 jess 中将我的 GUI 制作为小程序吗？

从[信息。Jess 上的页面](https://stackoverflow.com/tags/jess/info)。

> Jess 可用于构建 Java servlet、EJB、**applet**和完整的应用程序，这些应用程序使用声明性规则形式的知识来得出结论并进行推理。

```
Rete engine = new Rete(); 
```

特别注意构造函数[new Rete(Applet)](http://www.jessrules.com/jess/docs/71/api/jess/Rete.html#Rete%28java.applet.Applet%29)。

# jquery - 比较和验证两个数字

> ID：10574276
> 
> 赞同：0
> 
> 时间：2012-05-13T18:43:54.887
> 
> 标签：jquery, asp.net, asp.net-mvc-3

我有这些代码：

```
<%= html.editorFor(x=>x.SalaryForm) %>
<%= html.editorFor(x=>x.salaryTo)   %> 
```

我想比较和验证（salaryTo >=salaryFrom）。

非常感谢所有支持者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:29:31.877

我相信您要研究的是 IValidatableObject。只需在您的 ViewModel 中实现此接口并实现如下所示：

```
 public class YourViewModel : IValidatableObject
{
    public decimal SalaryFrom { get; set; }
    public decimal SalaryFrom { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (SalaryTo < SalaryFrom)
        {
            yield return new ValidationResult("Salary To must be greater than Salary From", new string[]{"SalaryTo"});
        }
    }
} 
```

# javascript - 如果在jqgrid中单击图像，如何显示大图像

> ID：10574277
> 
> 赞同：-1
> 
> 时间：2012-05-13T18:43:58.913
> 
> 标签：javascript, jqgrid

jqgrid 图像列使用下面的 colmodel 定义。在表单编辑模式下，如果鼠标悬停在图像上，光标变为手形，但在图像中单击将被忽略。

如果单击图像，如何在单独的窗口中显示大图像？大图由 url`'http://localhost/Grid/GetImage?id=' + options.rowId`获取（没有 size 参数）。

```
{"label":"Logo","name":"_image_Logo","edittype":"image",
    "editoptions":{"src":""},
    "editable":true,
    "formatter":function(cell,options,row) {
      return '<img src="http://localhost/Grid/GetImage?size=150&id=' +
               options.rowId +'" />';
} ,
"search":false,"title":false,"width":150},    

{"edittype":"file","label":"","name":"Logo","search":false,
"title":false,"width":150,"hidden":true,
"editrules":{"edithidden":true},"editable":true} 
```

**更新**

我在下面使用 colmodel 尝试了 Oleg 和 Michael 的建议。我需要将行 ID 传递给图像控制器。在网格中单击图像工作正常，打开大图像。`options.rowId`返回图像 ID。

在编辑表单中，不传递行 ID。如何通过`options.rowId`而不是`e.target.id`点击事件？

```
{"name":"Image",
"edittype":"image",

  "editoptions":{
    "src":"",  
    "dataEvents":[{"type":"click","fn":function(e) {
      window.open('GetImage?id=' + e.target.id, e.target.id )
  }
}]},

  "editable":true,
   "formatter":function(cell,options,row) {
    return '<a href="GetImage?id=' + options.rowId+'"><img src="GetImage?size=54&id=' + 
         options.rowId +'" /></a>';
} 
,"search":false,"title":false,"width":54}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:49:43.543

例如，您可以使用`onCellSelect`或`beforeSelectRow`捕捉`click`图像并实现您需要的任何自定义操作（例如显示大图像）。

如果您`click`只需要在编辑模式下对图像执行一些操作，您可以使用[editoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acommon_rules#editoptions)`dataEvents`的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T23:59:08.993

如果您将格式化程序更改为类似的东西`<a href="LARGE_IMAGE_URL"><img src="IMAGE_URL" /></a>`怎么办？这是你想要的吗？

# ios - 多线程很慢？

> ID：10574279
> 
> 赞同：0
> 
> 时间：2012-05-13T18:44:00.483
> 
> 标签：ios, multithreading, nsthread

我是新的 ios，我不知道 NSThread 在 IOS 上的多线程性能。我有一个功能

```
-(void) writeBlock:(NSString *)srcPath toPath:(NSString *)destPath fromIndex:(int)fIndex toIndex:(int)tIndex
{
    //create file handle for srcPath and destPath
    for(int i=fIndex;i<=tIndex;i++){
       //read from source filehandle
       //write to dest filehandle
    }
    //close filehandle.
} 
```

如果我为上述函数创建一个线程，则执行此函数的时间为 1 秒。但是当我创建时：

```
for(int i=0;i<20;i++)
{
    [NSThread detachNewThreadSelector: @selector(writeBlock:) toTarget:self withObject:myObject];
    //for each thread, tIndex-fIndex is the same with tIndex-fIndex of single above thread
} 
```

执行 20 个线程的时间为 13-16 秒。我认为时间将是 1-5 秒。多线程很慢？任何人都可以帮助我吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:51:03.443

那是因为您尝试在磁盘上读写文件。只有一张磁盘。因此，如果您尝试一次读取和写入一个磁盘 20 次。它很慢。例如，如果您将 20 个文件复制到 USB 记忆棒，它会非常快。但是如果你尝试一个一个地复制20个（一个一个地拖到U盘上，而之前的文件还没有复制）会很慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T18:51:49.923

单核智能手机处理器只能处理这么多。在 iPhone 上创建 20 个线程会大大降低性能 - 创建线程的成本很高。创建低级别的另一个选项`NSThread`是使用`NSOperation`或`NSOperationQueue`- 另请参阅StackOverflow 上的[这个](https://stackoverflow.com/questions/3041837/nsthread-vs-nsoperationqueue-vs-on-the-iphone)线程。

此外，一次只能由一个线程完成对内存的写入/读取。

# c++ - Priority_queue 和输入流迭代器

> ID：10574285
> 
> 赞同：0
> 
> 时间：2012-05-13T18:45:02.027
> 
> 标签：c++, istream-iterator

```
int main()
{
    list<char> letters;
    priority_queue<char, vector<char>, less<char>>letters_trans;

    cout << "Enter some sentence: " << endl << endl;

    std::istream_iterator<char> input(cin), input_end;

    copy(input, input_end, back_inserter<list<char>>(letters));

    for each(char letter in letters)
    {
        letters_trans.push(letter);
    }

    while(!letters_trans.empty())
    {
        cout << letters_trans.top();
        letters_trans.pop();
    }
    cout << endl;
    getch();
    return 0;
} 
```

如您所见，我有一个将 cin 转移到优先队列的学校项目。好吧，我“有点做到了……我所做的是输入**istream_iterator**以列出

然后到priority_queue，从长远来看，我想这是非常低效的。所以有没有办法在没有中间人的情况下直接将cin转移到priority_queue。我试过这样做，但复制功能不会让我有priority_queue作为争论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T19:07:31.737

您可以从一对 iterator 构造`priority_queue`（或任何标准容器）`[first, last)`。来自[cpp 参考](http://www.cplusplus.com/reference/stl/priority_queue/priority_queue/)：

```
template <class InputIterator>
         priority_queue ( InputIterator first, InputIterator last,
                          const Compare& x = Compare(),
                          const Container& y = Container() ); 
```

> 第一，最后
> 
> 将迭代器输入到序列中的初始位置和最终位置。使用的范围是[first,last)，它包括first和last之间的所有元素，包括first指向的元素但不包括last指向的元素。函数模板类型可以是任何类型的输入迭代器。

代码：

```
#include <iostream>
#include <iterator>
#include <queue>
#include <vector>

int main()
{
  std::istream_iterator<char, std::vector<char> > input(std::cin), input_end;
  std::priority_queue<char> q(input, input_end);

  while (!q.empty())
  {
    std::cout << q.top() << std::endl;
    q.pop();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T18:48:36.933

在 C++11 中，这应该有效：

```
std::priority_queue<char> q(std::istream_iterator<char>(std::cin), std::istream_iterator<char>()); 
```

完整示例：

```
#include <iostream>
#include <iterator>
#include <vector>
#include <queue>

int main()
{
    std::priority_queue<char> q(std::istream_iterator<char>(std::cin), std::istream_iterator<char>());

    while (!q.empty())
    {
        std::cout << q.top() << '\n';
        q.pop();
    }
} 
```

# java - 从 Java 中的 String 中删除非 ASCII 字符

> ID：10574289
> 
> 赞同：19
> 
> 时间：2012-05-13T18:45:45.403
> 
> 标签：java

我有一个包含非 ASCII 字符的 URI，例如：

[http://www.abc.de/qq/qq.ww?MIval=typo3_bsl_int_Smtliste&p_smtbez=Schmalbl](http://www.abc.de/qq/qq.ww?MIval=typo3_bsl_int_Smtliste&p_smtbez=Schmalbl) ttrigeSomerzischeruchtanb

如何从此 URI 中删除“�”

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-13T18:49:44.200

我猜 URL 的来源有更多的错误。也许您正在解决错误的问题？从 URI 中删除“奇怪”字符可能会赋予它完全不同的含义。

话虽如此，您可以通过简单的字符串替换来删除所有非 ASCII 字符：

```
String fixed = original.replaceAll("[^\\x20-\\x7e]", ""); 
```

或者，如果不涵盖“�”字符，您可以将其扩展到所有非四字节 UTF-8 字符：

```
String fixed = original.replaceAll("[^\\u0000-\\uFFFF]", ""); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-12-08T12:34:08.070

```
yourstring=yourstring.replaceAll("[^\\p{ASCII}]", ""); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-19T08:39:50.497

不不不不不，这不是ASCII ... `[^\x20-\x7E]`

这是真正的ASCII：`[^\x00-\x7F]`

否则，它将删除作为 ascii 表一部分的换行符和其他特殊字符！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-08-08T14:09:33.447

要从字符串中删除非 ASCII 字符，下面的代码对我有用。

```
String str="<UPC>616043287409ÂÂÂÂ</UPC>";

str = str.replaceAll("[^\\p{ASCII}]", ""); 
```

输出：

```
<UPC>616043287409</UPC> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-11-02T17:32:03.313

使用 Guava [CharMatcher](https://google.github.io/guava/releases/19.0/api/docs/com/google/common/base/CharMatcher.html)

```
String onlyAscii = CharMatcher.ascii().retainFrom(original) 
```

# python - 生成指向 Youtube 音频的链接

> ID：10574290
> 
> 赞同：6
> 
> 时间：2012-05-13T18:45:47.130
> 
> 标签：python, audio, hyperlink, youtube

作为一个更大项目的一部分，我已经有一段时间了，试图找到一种方法将 Youtube AUDIO 流式传输到应用程序中，而无需下载相应的文件。

我现在拥有的是一个使用网络服务（例如[saveyoutube.com](http://saveyoutube.com/) ）下载视频的程序。然而，这不是很有效。视频本身的下载需要5分钟左右，客户端可能会厌倦等待，直接使用Youtube界面。此外，假设该程序的用户希望访问一个 4 小时长的专辑。但是，他们只想听其中的特定部分，为了解释起见，假设用户希望从 2 小时开始观看视频（例如，拍摄[此](https://developers.google.com/youtube/)视频）。

毫无疑问，我的程序也适用于此，但音乐开始播放大约需要 20 分钟（因为下载 2 小时的音频需要很长时间）。另外，到那时我已经用掉了用户计算机上大约 400 兆字节的空间。当然，我可以将文件存储在临时文件夹中，并在他们关闭程序后将其删除，但这会导致更多问题：

1.  如果程序在下载完成前 1 分钟因为空间不足而崩溃（谁知道客户端计算机上有什么），客户端将白白浪费大约 20 分钟的时间。

2.  说下次他们加载程序时，他们希望做同样的事情。然后他们必须再等 20 分钟。这可以通过在界面中添加一个“保存音频”按钮来解决，这可以防止程序在关闭时删除文件。然而，第一个僵局仍然存在。

所以这是我的问题：有没有办法生成指向 Youtube 视频音频的链接？有没有办法获得像[http://www.youtube.com/watch?v=AOARzA8nGu4.(AUDIOEXTENSION](http://www.youtube.com/watch?v=AOARzA8nGu4.(AUDIOEXTENSION) ) 这样的网址？这样跳到配乐中的一部分会更容易，并且不需要下载。我已经研究了很长一段时间，到目前为止，最接近答案的是 saveyoutube：一个 mp3 下载器。

这甚至可能吗？如果没有，是否有替代 Youtube 的方法可以做到这一点？我研究了[Youtube API](https://developers.google.com/youtube/)，但这又是不利的，就像大多数 Google 服务一样，它的 API 是有限的。

编程语言不是限制，因为大多数代码都可以翻译。但是，Python 或 C/C++ 解决方案将是理想的。

提前致谢！

PS 我有一个可用的服务器，但我非常不愿意将所有 Youtube 视频下载到服务器上。但是，如果有另一种解决方案涉及不涉及窃取整个 Youtube 的服务器，那就太好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T16:27:03.757

经过大量研究后，我找到了解决方案。虽然没有获得音频的链接，但我创建了一个程序，可以无形地播放 YouTube 视频，因此可以播放“音频”，这是我的意图。

我编写的程序使用了很多已经可用的 Python 模块来实现目标。

我找到[了这个链接，它解释了如何通过 wxPython（在](http://www.daniweb.com/software-development/python/threads/64949/write-a-flash-player-by-python)[此处](http://www.wxpython.org)找到）将 Flash 嵌入到 Python 应用程序中。它有一个 activexwrapper 模块，我用它来播放 Flash。

代码：

```
import  wx

if wx.Platform == '__WXMSW__':
    from wx.lib.flashwin import FlashWindow

class MyPanel(wx.Panel):
    def __init__(self, parent, id):
        wx.Panel.__init__(self, parent, -1)
        self.pdf = None

        sizer = wx.BoxSizer(wx.VERTICAL)
        btnSizer = wx.BoxSizer(wx.HORIZONTAL)

        self.flash = FlashWindow(self, style=wx.SUNKEN_BORDER)
        sizer.Add(self.flash, proportion=1, flag=wx.EXPAND)
        #sizer.Hide(0)

        self.SetSizer(sizer)
        self.SetAutoLayout(True)
        print "Importing Flash..."
        self.flash.LoadMovie(0, raw_input('Copy link for flash: '))
        #Used to load a flash file. You may also give a location of a specific file on disk.
        print "Done."

app = wx.PySimpleApp()
# create window/frame, no parent, -1 is default ID, title, size
# change size as needed
frame = wx.Frame(None, -1, "Flash Stream", size = (500, 400))
# make instance of class, -1 is default ID
MyPanel(frame, -1)
# show frame
frame.Show(True)
#comment if you don't want to see the ui
print "Started"
# start event loop
app.MainLoop() 
```

播放视频。就我而言，我不想拥有 GUI，所以我删除了 ' `frame.Show(True)`' 行。如果您想对其进行测试，请尝试使用“ [http://www.youtube.com/v/cP6lppXT-9U?version=3&hl=en_US](http://www.youtube.com/v/cP6lppXT-9U?version=3&hl=en_US) ”之类的链接，我稍后会解释。

但是，这不允许暂停等。因此，必须使用其他方法。

要开始自动播放：`&autoplay=1`在 URL 中添加“”

以下是暂停的方法：

[您可以使用youtube-dl](http://rg3.github.com/youtube-dl/download.html)模块生成视频长度，并在用户暂停线程时终止线程。但是，您将存储已播放的时间，下次您将添加一个“ `&start=SECONDSPLAYED`”，这将有效地“恢复”视频。[可在此处](http://www.mydigitallife.info/youtube-allows-you-to-start-playing-embed-video-at-specific-start-time/)找到有关此的详细信息。

此外，您必须使用 YouTube 嵌入网址，这是唯一有效的网址。一个例子看起来像' `http://www.youtube.com/v/cP6lppXT-9U?version=3&hl=en_US`'

**优点**

*   合法的*
*   快速闪存加载时间（0.01 秒基准测试）
*   不浪费空间
*   可以跳到结尾而不下载整个文件
*   由于不使用 YouTube API，因此可以无限使用

*根据[YouTube 的服务条款](http://www.youtube.com/static?gl=US&template=terms)，第 4 节：服务的一般使用 - 权限和限制，第 3 小节。

> 您同意不通过服务本身的视频播放页面、嵌入式播放器或 YouTube 可能指定的其他明确授权方式以外的任何技术或方式访问内容。

由于该程序使用了一个主要使用可嵌入播放器的替代界面，并且没有做任何完全非法的事情（比如下载文件[我的第一个想法]）。

**缺点**

*   由于对 ActiveX 的依赖，此应用程序将无法在**Windows**以外的任何操作系统上运行。
*   据我所知，很少有人使用 Internet Explorer。唉，这个程序需要安装 INTERNET EXPLORER Flash；不是 Mozzila Flash，Chrome Flash。它绝对必须是 IE。否则，应用程序将加载，但视频不会出现。
*   wx 需要很长时间才能加载（大约 10 秒）。

**依赖项**

*   出于显而易见的原因，必须使用 wxPython。
*   必须安装Python comtypes（在[此处找到）。](http://pypi.python.org/pypi/comtypes)否则，wxPython 无法与 ActiveX 通信。

**有用的功能**

我还创建了一些函数来加快任何做同样事情的人的进程。

都是不错的单线 lambdas。

generate_link：返回 YouTube 嵌入 URL，给定一个普通的 YouTube URL。

```
generate_link = lambda link: 'http://www.youtube.com/v/'+re.compile(r'watch\?v=(.*?)(?:&|$)').search(link).group(1)+'?version=3&amp;hl=en_US' 
```

start_from：接受开始视频的小时、分钟和秒，并返回一个链接。

```
start_from = lambda hours, minutes, seconds, link: link + '&start=' + str((hours*60*60)+(minutes*60)+seconds) 
```

autoplay：可能是最简单的，将 autoplay 设置为 true，并返回一个链接。它接受一个链接。

```
autoplay = lambda link: link + '&autoplay=1' 
```

video_length：返回视频的长度。有用，接受 YouTube 链接。

```
video_length = lambda video: re.compile(r'length_seconds=(.*?)\\', re.S).search(urllib2.urlopen(video).read()).group(1).strip() 
```

这意味着作为许可视频将返回错误的解决方法

```
status=fail&errorcode=150&reason=This+video+contains+content+from+WMG.+It+is+restricted+from+playback+on+certain+sites.%3Cbr%2F%3E%3Cu%3E%3Ca+href%3D%27http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DVALbSjayAgw%26feature%3Dplayer_embedded%27+target%3D%27_blank%27%3EWatch+on+YouTube%3C%2Fa%3E%3C%2Fu%3E 
```

因此，我解析了实际的视频页面以获取长度。有点慢，但不会失败。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T19:03:17.247

YouTube 使用带有 AAC 立体声[的 H.264/MPEG-4 编码。](http://en.wikipedia.org/wiki/H.264/MPEG-4_AVC)声音嵌入在视频文件中；您几乎必须下载整个视频才能恢复音轨。

# java - 文件标记器错误

> ID：10574291
> 
> 赞同：0
> 
> 时间：2012-05-13T18:45:49.500
> 
> 标签：java, tokenize

所以我编写了这个程序来标记一个包含代码的文件，并将每个标识符、关键字、数字和符号分隔成一个数字标记。我遇到的问题是，虽然它会为每行中的第一个单词分配正确的标记。后面的行中的每个标记都被认为是一个标识符。这是我的标记器功能，我认为问题出在：

```
 public class cmmLex {

    public static boolean isLetter(char b){        
        char[] letters_ = {'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','A','B','C','D',
            'E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','_'};
        for (int i = 0; i < letters_.length; i++) {
            if(b == letters_[i])
                return true;
        }
        return false;
    }

    public static boolean isNumber(char b){        
        char[] numbers = {'0','1','2','3','4','5','6','7','8','9'};
        for (int i = 0; i < numbers.length; i++) {
            if(b == numbers[i])
                return true;
        }
        return false;
    }

    public static boolean isKeyword(StringBuffer str){
        String[] keywords = {"int", "double", "if", "while","return","void","else"};
        for (int i = 0; i < keywords.length; i++) {
            if (keywords[i].equals(str.toString()))
                return true;
        }

        return false;
    }

    public static boolean isSymbol(char a){
        char[] symbols = {'+','-','*','/','<','>','!','=',',','.','(',')','[',']','{','}'};
        for (int i = 0; i < symbols.length; i++) {
            if(a == symbols[i])
                return true;
        }

        return false;
    }

    public static void lexMe(StringBuffer string)
    {   

        if(isKeyword(string)){
            switch(string.toString()){
                case "double":
                    System.out.print("0 ");
                    break;
                case "else":
                    System.out.print("1 ");
                    break;
                case "if":
                    System.out.print("2 ");
                    break;
                case "int":
                    System.out.print("3 ");
                    break;
                case "return":
                    System.out.print("4 ");
                    break;
                case "void":
                    System.out.print("5 ");
                    break;
                case "while":
                    System.out.print("6 ");
                    break;
            }  
        }else{
            System.out.print("27 ");
        }
    }

    public static void tokenize(String line){
        StringBuffer consumed = new StringBuffer();
        outerloop:
        for (int i = 0; i < line.length(); i++) {
            char ch = line.charAt(i);
            if(isLetter(ch) && consumed.length() == 0){
                consumed.append(line.charAt(i));
                for (int j = i+1; j < line.length(); j++) {
                    ch = line.charAt(j);
                    if(isLetter(ch) || isNumber(ch)){
                        consumed.append(ch);
                    }else{
                        //call lexme to tokenize string

                        lexMe(consumed);

                        //consumed.setLength(0);
                        i = j;
                    }

                }
            }else if(isNumber(ch) && consumed.length() == 0){
                consumed.append(line.charAt(i) );
                for (int j = i+1; j < line.length(); j++) {
                    ch = line.charAt(j);
                    if(isNumber(ch) || line.charAt(j) == '.'){
                        consumed.append(ch);
                    }else{
                        System.out.print("28 ");
                        i = j;
                    }
                }
            }else if (isSymbol(ch)){
                switch(ch){
                    case '+':
                        System.out.print("7 ");
                        break;
                    case '-':
                        System.out.print("8 ");
                        break;
                    case '*':
                        if(line.charAt(i-1) == '/'){
                            break outerloop;
                        }else{
                            System.out.println("9 ");
                        }                       
                        break;
                    case '/':
                        if(line.charAt(i+1) == '/')
                            break outerloop;
                        else if((ch = line.charAt(i+1)) == '*'){
                            consumed.append(ch);
                            for (int j = i; j < line.length(); j++) {
                                ch = line.charAt(j);
                                if(ch == '*'){
                                    if(ch == '/'){
                                        break outerloop;
                                    }
                                }else{
                                    consumed.append(ch);
                                }        

                            }
                        }else{
                            System.out.println("10 ");

                        } 
                        break;
                    case '<':
                        if(line.charAt(i+1) == '='){
                            System.out.print("12 ");
                            break;
                        }
                        System.out.print("11 ");
                        break;                 
                    case '>':
                        if(line.charAt(i+1) == '='){
                            System.out.print("14 ");
                            break;
                        }
                        System.out.print("13 ");
                        break;
                    case '!':
                        if(line.charAt(i+1) == '='){
                            System.out.print("16 ");
                            break;
                        }
                        break;
                    case '=':
                        System.out.print("15 ");
                        break;
                    case ';':
                        System.out.print("18 ");
                        break;
                    case ',':
                        System.out.print("19 ");
                        break;
                    case '.':
                        System.out.print("20 ");
                        break;
                    case '(':
                        System.out.print("21 ");
                        break;
                    case ')':
                        System.out.print("22 ");
                        break;
                    case '[':
                        System.out.print("23 ");
                        break;
                    case ']':
                        System.out.print("24 ");
                        break;
                    case '{':
                        System.out.print("25 ");
                        break;
                    case '}':
                        System.out.print("26 ");
                        break;
                }
            }
        }
        System.out.println("");
    }

    public static void main(String[] args) throws FileNotFoundException, IOException {
        File file = new File("src\\testCode.txt");
        String testCode;

        try {

            Scanner scanner = new Scanner(file);

            while (scanner.hasNextLine()) {
                String line = scanner.nextLine();
                tokenize(line);
            }
            scanner.close();
        }catch (FileNotFoundException e) {

        }

    }
} 
```

我遇到的另一个问题是我无法纠正忽略评论块。当我使用“/ *”并中断循环时，我尝试设置一个注释块布尔标志，该标志仍​​然设置我想扫描其余的行，直到我看到“* /”，然后将标志设置为错误的。然而这并没有奏效。有任何想法吗？

这是我文件的第一行：

> 诠释事实（诠释 x）{

它应该打印出这一行：

> 3 27 21 3 27 22 25

这就是它目前的表现：

> 3 27 27 27 27 27

也许我没有正确处理空格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:25:39.237

您的`lexMe`方法的开关正在检查一个字符串，该字符串在您超过第一个单词后收集的内容比应有的要多。

使用调试器查看它，或者将该值的调试打印出来，您就会看到问题所在。

这个问题似乎是因为这条线

```
 consumed.setLength(0); 
```

在您发布的代码中被注释掉了。

放回去后，仍然存在问题，因为在处理“事实”字符串之后，它会继续一个基于检查的条件内部的 for 循环，`if(isLetter(ch) && consumed.length() == 0)`当它真的应该重新检查该条件时。

我建议使用调试器来了解您的代码当前正在做什么，然后进行一些重大的重构。

**笔记**

我现在查看了另一个答案，它通过添加中断来解决这些问题（我假设没有实际运行）。

但我强烈建议重新考虑整个事情，因为嵌套循环和条件以及使用`break`会使代码非常混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T20:26:14.630

您在 tokenize() 中的循环中有问题。这是您的代码的更正版本：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Scanner;

public class cmmLex {

    public static boolean isLetter(char b){        
        char[] letters_ = {'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','A','B','C','D',
            'E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','_'};
        for (int i = 0; i < letters_.length; i++) {
            if(b == letters_[i])
                return true;
        }
        return false;
    }

    public static boolean isNumber(char b){        
        char[] numbers = {'0','1','2','3','4','5','6','7','8','9'};
        for (int i = 0; i < numbers.length; i++) {
            if(b == numbers[i])
                return true;
        }
        return false;
    }

    public static boolean isKeyword(StringBuffer str){
        String[] keywords = {"int", "double", "if", "while","return","void","else"};
        for (int i = 0; i < keywords.length; i++) {
            if (keywords[i].equals(str.toString()))
                return true;
        }

        return false;
    }

    public static boolean isSymbol(char a){
        char[] symbols = {'+','-','*','/','<','>','!','=',',','.','(',')','[',']','{','}'};
        for (int i = 0; i < symbols.length; i++) {
            if(a == symbols[i])
                return true;
        }

        return false;
    }

    public static void lexMe(StringBuffer string)
    {   

        if(isKeyword(string)){
            switch(string.toString()){
                case "double":
                    System.out.print("0 ");
                    break;
                case "else":
                    System.out.print("1 ");
                    break;
                case "if":
                    System.out.print("2 ");
                    break;
                case "int":
                    System.out.print("3 ");
                    break;
                case "return":
                    System.out.print("4 ");
                    break;
                case "void":
                    System.out.print("5 ");
                    break;
                case "while":
                    System.out.print("6 ");
                    break;
            }  
        }else{
            System.out.print("27 ");
        }
    }

    public static void tokenize(String line){
        StringBuffer consumed = new StringBuffer();
        outerloop:
        for (int i = 0; i < line.length(); i++) {
            char ch = line.charAt(i);
            if(isLetter(ch) && consumed.length() == 0){
                consumed.append(line.charAt(i));
                for (int j = i+1; j < line.length(); j++) {
                    ch = line.charAt(j);
                    if(isLetter(ch) || isNumber(ch)){
                        consumed.append(ch);
                    }else{
                        //call lexme to tokenize string

                        lexMe(consumed);

                        consumed.setLength(0);
                        i = j - 1;
                        break;
                    }

                }
            }else if(isNumber(ch) && consumed.length() == 0){
                consumed.append(line.charAt(i) );
                for (int j = i+1; j < line.length(); j++) {
                    ch = line.charAt(j);
                    if(isNumber(ch) || line.charAt(j) == '.'){
                        consumed.append(ch);
                    }else{
                        System.out.print("28 ");
                        consumed.setLength(0);
                        i = j - 1;
                        break;
                    }
                }
            }else if (isSymbol(ch)){
                switch(ch){
                    case '+':
                        System.out.print("7 ");
                        break;
                    case '-':
                        System.out.print("8 ");
                        break;
                    case '*':
                        if(line.charAt(i-1) == '/'){
                            break outerloop;
                        }else{
                            System.out.println("9 ");
                        }                       
                        break;
                    case '/':
                        if(line.charAt(i+1) == '/')
                            break outerloop;
                        else if((ch = line.charAt(i+1)) == '*'){
                            consumed.append(ch);
                            for (int j = i; j < line.length(); j++) {
                                ch = line.charAt(j);
                                if(ch == '*'){
                                    if(ch == '/'){
                                        break outerloop;
                                    }
                                }else{
                                    consumed.append(ch);
                                }        

                            }
                        }else{
                            System.out.println("10 ");

                        } 
                        break;
                    case '<':
                        if(line.charAt(i+1) == '='){
                            System.out.print("12 ");
                            break;
                        }
                        System.out.print("11 ");
                        break;                 
                    case '>':
                        if(line.charAt(i+1) == '='){
                            System.out.print("14 ");
                            break;
                        }
                        System.out.print("13 ");
                        break;
                    case '!':
                        if(line.charAt(i+1) == '='){
                            System.out.print("16 ");
                            break;
                        }
                        break;
                    case '=':
                        System.out.print("15 ");
                        break;
                    case ';':
                        System.out.print("18 ");
                        break;
                    case ',':
                        System.out.print("19 ");
                        break;
                    case '.':
                        System.out.print("20 ");
                        break;
                    case '(':
                        System.out.print("21 ");
                        break;
                    case ')':
                        System.out.print("22 ");
                        break;
                    case '[':
                        System.out.print("23 ");
                        break;
                    case ']':
                        System.out.print("24 ");
                        break;
                    case '{':
                        System.out.print("25 ");
                        break;
                    case '}':
                        System.out.print("26 ");
                        break;
                }
            }
        }
        System.out.println("");
    }

    public static void main(String[] args) throws FileNotFoundException, IOException {
        File file = new File("src\\testCode.txt");
        String testCode;

        try {

            Scanner scanner = new Scanner(file);

            while (scanner.hasNextLine()) {
                String line = scanner.nextLine();
                tokenize(line);
            }
            scanner.close();
        } catch (FileNotFoundException e) {

        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T20:56:16.090

Handwritten lexical analyzers are always a pain to write and debug. May I suggest that you use a higher level tool to do this, eg: JLex, or JFlex. This will save you a lot of pain.

# image - 使用 Ruby on Rails 从自定义图库添加 TinyMCE 图像

> ID：10574294
> 
> 赞同：2
> 
> 时间：2012-05-13T18:46:11.347
> 
> 标签：image, tinymce, wysiwyg

我在我的 Ruby on Rails 项目中使用 TinyMCE textarea 编辑器。我有上传图片的数据库表。我有文章部分，所以我需要在文章中添加一些图片。

我糟糕的快速解决方案：我有“画廊”，直到带有 TinyMCE 的 textarea，当我单击来自画廊 JS 复制图像链接的图像并将此链接添加到 textarea 的末尾时。但是这个解决方案不是很好。

您对“将图片添加到文章”有什么好的建议/解决方案吗？Wordpress 有一个很好的“引擎”来解决我的问题。（对不起我的英语不好）

我不必使用 TineMce，我可以使用任何所见即所得的编辑器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:53:29.560

看起来您正在为 tinymce 寻找图像上传工具：http: [//pascal.vanhecke.info/2005/08/25/image-upload-plugin-for-tinymce/](http://pascal.vanhecke.info/2005/08/25/image-upload-plugin-for-tinymce/)

# php - Lithium & phpActiveRecord - 我的 ACL 关联是否正确？

> ID：10574295
> 
> 赞同：0
> 
> 时间：2012-05-13T18:46:31.310
> 
> 标签：php, associations, acl, lithium, phpactiverecord

我使用 li3_activerecord 将 Lithium 与 phpActiveRecord 一起使用。自从我回到 ORM 和协会已经有几年了，我对我当前的 ACL 设置有点困惑。

这是我的表格及其关联，为简洁起见进行了简化：

```
USERS - $belongs_to role
-----
id
role_id
email

ROLES - $has_many permissions, resources through permissions, users
-----
id
title (eg: Admin, Member, Guest)

RESOURCES - $has_many roles, permissions
---------
id
controller (eg: Members, Products, Categories)
action (eg: Index, Delete, Edit)
procedure (eg: Email, Publish, PrivateMessage)

PERMISSIONS - $belongs_to role, resource
-----------
id
role_id
resource_id
allowed 
```

我得到了一些意想不到的结果，所以我首先要确定关联是否正确。基本上，一个用户只能拥有一个角色。资源由控制器、动作和可以在动作中执行的任何特定过程的组合定义。通过权限表向用户授予对资源的权限。

你觉得我写 ORM 关联的方式有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:34:32.210

基本上，您的模型是正确的。这是一个非常简单的 RBAC 架构，可以满足您的需求。实际上，您可能想在这里查看这个插件：[https](https://github.com/tmaiaroto/li3_access) ://github.com/tmaiaroto/li3_access它提供了一个开箱即用的 RBAC-Adapter 和一些其他不错的插件。

如果您向我们提供有关您当前问题的更多详细信息和/或代码，我们可能会更好地帮助您。

# c# - 将 DLL 程序集从 C# 中的文件加载到自定义 AppDomain

> ID：10574300
> 
> 赞同：0
> 
> 时间：2012-05-13T18:47:59.863
> 
> 标签：c#, reflection, dll, assemblies

我尝试了下一个代码：

```
AppDomain ad = AppDomain.CreateDomain("Test");      
_Assembly = parDomain.Load(AssemblyName.GetAssemblyName(@"C:\SomeDLLPath\PhysicsTest.dll"));
// Some work with assembly
AppDomain.Unload(ad); 
```

它提高`FileNotFoundException that cannot load file or assembly "TestClass, Version=1.0.0.0, ..."`

如果我将程序集加载到该域一切正常：

```
_Assembly = Assembly.LoadFile(@"C:\SomeDLLPath\PhysicsTest.dll"); 
```

但我也需要卸载这个。

我看到很多关于它的线程，但无法理解它们......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:32:42.760

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms173101%28v=vs.100%29.aspx)

> 块引用
> 
> 如果不卸载包含它的所有应用程序域，就无法卸载单个程序集。即使程序集超出范围，实际的程序集文件仍将保持加载，直到包含它的所有应用程序域都被卸载。

这是卸载 AppDomain [MSDN的方法](http://msdn.microsoft.com/en-us/library/c5b8a8f9.aspx#Y0)

```
using System;
using System.Reflection;

class AppDomain2
{
    public static void Main()
    {
        Console.WriteLine("Creating new AppDomain.");
        AppDomain domain = AppDomain.CreateDomain("MyDomain", null);

        Console.WriteLine("Host domain: " + AppDomain.CurrentDomain.FriendlyName);
        Console.WriteLine("child domain: " + domain.FriendlyName);
        AppDomain.Unload(domain);
        try
        {
            Console.WriteLine();
            Console.WriteLine("Host domain: " + AppDomain.CurrentDomain.FriendlyName);
            // The following statement creates an exception because the domain no longer exists.
            Console.WriteLine("child domain: " + domain.FriendlyName);
        }
        catch (AppDomainUnloadedException e)
        {
            Console.WriteLine(e.GetType().FullName);
            Console.WriteLine("The appdomain MyDomain does not exist.");
        }
    }
} 
```

# ios - 显示通话状态栏时，UITableview 不会滚动到 ViewDidLoad 上的内容偏移量

> ID：10574302
> 
> 赞同：2
> 
> 时间：2012-05-13T18:48:10.833
> 
> 标签：ios, uitableview, uiscrollview, autosize

我创建了一个包含 UITableView 的视图控制器，它需要在显示视图之前滚动到底部。我确实喜欢这样：

```
- (void)viewDidLoad {
     [self scrollToBottom];
}

-(void)scrollToBottom {
    [self.mytable setContentOffset:CGPointMake(0, 100000)];
} 
```

这工作正常......除非正在显示通话状态栏（由于视图高度上的自动调整掩码，它会调整相关表格视图的大小。

# php - PHP XML 创建器不支持波斯语/阿拉伯语编码 (UTF-8)

> ID：10574306
> 
> 赞同：0
> 
> 时间：2012-05-13T18:48:40.890
> 
> 标签：php, xml, encoding

我的 php XML 生成器类有问题；我使用了 XML Creator 类：

```
class _XmlWriter {

var $xml;
var $indent;
var $stack = array();

function _XmlWriter($indent = '  ') {
    $this->indent = $indent;
    $this->xml = '<?xml version="1.0" encoding="UTF-8"?>' . "\n";
}

function _indent() {
    for ($i = 0, $j = count($this->stack); $i < $j; $i++) {
        $this->xml .= $this->indent;
    }
}

function push($element, $attributes = array()) {
    $this->_indent();
    $this->xml .= '<' . $element;
    foreach ($attributes as $key => $value) {
        $this->xml .= ' ' . $key . '="' . htmlentities($value) . '"';
    }
    $this->xml .= ">\n";
    $this->stack[] = $element;
}

function element($element, $content, $attributes = array()) {
    $this->_indent();
    $this->xml .= '<' . $element;
    foreach ($attributes as $key => $value) {
        $this->xml .= ' ' . $key . '="' . htmlentities($value) . '"';
    }
    $this->xml .= '>' . htmlentities($content) . '</' . $element . '>' . "\n";
}

function emptyelement($element, $attributes = array()) {
    $this->_indent();
    $this->xml .= '<' . $element;
    foreach ($attributes as $key => $value) {
        $this->xml .= ' ' . $key . '="' . htmlentities($value) . '"';
    }
    $this->xml .= " />\n";
}

function pop() {
    $element = array_pop($this->stack);
    $this->_indent();
    $this->xml .= "</$element>\n";
}

function getXml() {
    return $this->xml;
}

function create($root, $array) {
    $xml = new _XmlWriter();
    $xml->push($root);
    foreach ($array as $record) {
        $xml->push('music', array('name' => $record[0],
            'artist' => $record[1],
            'album' => $record[2]));
        $xml->pop();
    }
    $xml->pop();
    return $xml->getXml();
}
}
?> 
```

它生成 XML 文件，但不支持波斯语或阿拉伯语编码。

```
XML Parsing Error: not well-formed
Line Number 3, Column 98:  
<music name="name1" artist="&Ugrave;&Oslash;&sect;&Uacute;&copy;" album="album1"> 
```

当我在记事本中更改 XML 文件时，它也适用于波斯语，但我的 php 类生成了不正确的编码。tnx 为您提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T22:39:41.253

我使用自己编写的函数而不是 xml_writer 类：

```
function xml_generator($root, $tag_array, $att_array, $val_array) {
    $xml_str = '<?xml version="1.0" encoding="UTF-8"?>' . "\n";
    $xml_str .= '<' . $root . '>' . "\n";
    for ($i = 0; $i < sizeof($val_array); $i++) {
        $xml_str .= '<' . $tag_array[$i] . ' ';
        for ($j = 0; $j < sizeof($att_array); $j++) {
            $xml_str .= $att_array[$j] . '="' . $val_array[$i][$j] . '" ';
        }
        $xml_str .= '>' . '</' . $tag_array[$i] . '>' . "\n";
    }
    $xml_str .= '</' . $root . '>';
    return $xml_str;
} 
```

现在它支持 Unicode(UTF-8)。

# javascript - ASP 复选框和 JS

> ID：10574307
> 
> 赞同：0
> 
> 时间：2012-05-13T18:48:43.593
> 
> 标签：javascript, asp.net

我正在尝试检查是否在 js 中检查了 aspbox。我可以为 listItems 设置一个 ID 号并一一检查吗？

```
 <asp:CheckBoxList ID="CheckBoxList1" runat="server">
         <asp:ListItem Text="Asset Classes" value="Asset Classes"></asp:ListItem>
         <asp:ListItem Text="Asset Types" Value="Asset Types"></asp:ListItem>
         <asp:ListItem Text="Asset Manufactuerer" value="Asset Manufactuerer"></asp:ListItem>
         <asp:ListItem Text="Asset Voltage Class" Value="Asset Voltage Class"></asp:ListItem>
             </asp:CheckBoxList> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:16:14.807

不，你不能。CheckBoxList 的 ListItem 没有 id 属性。

但是您可以按索引访问每个项目。

```
function MyFunction() {
    var CheckBoxList1 = document.getElementById('CheckBoxList1');
    var checkBoxItems = CheckBoxList1.getElementsByTagName("input");

    for (var i = 0; i < checkBoxItems.length; i++) {
        if (checkBoxItems[i].checked) {
            alert(checkBoxItems[i].value);
        }
    }
} 
```

# php - 任何人都知道为什么 ReCaptcha 可能样式错误

> ID：10574314
> 
> 赞同：2
> 
> 时间：2012-05-13T18:49:16.730
> 
> 标签：php, css, styles, recaptcha

这是我的页面，ReCaptcha 错误很明显

[http://www.bookiebashers.org/register.php](http://www.bookiebashers.org/register.php)

关于为什么它可能会被拉伸的任何建议。我完全不明白为什么会发生这种情况。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T18:51:40.283

在styles.css 中，您有以下几行：

```
#content img {
    padding: 8px;
    border: 1px #888 solid;
    margin: 8px;
    height: 200px;
    width: 150px;
} 
```

这些规则也适用于验证码中的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T18:51:53.900

`#content img`具有将宽度和高度设置为不自然值的规则。你应该解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T18:54:23.637

[我在https://stackoverflow.com/questions/10574177/recapcha-styling-messing-up/10574304#10574304](https://stackoverflow.com/questions/10574177/recapcha-styling-messing-up/10574304#10574304)上回答了你同样的问题

又来了。

这将解决您的问题，将以下内容添加到您的 css

```
#content .recaptchatable img {
    width: auto;
    height: auto;
    } 
```

出于某种原因，您的 css 中有以下内容

```
#content img {
    padding: : 8px;
    border: 1px #888 solid;
    margin: 8px;
    height: 200px;
    width: 150px;
    } 
```

这会为#content 容器中的每个图像设置高度和宽度。我提供的 css 将覆盖它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-25T14:55:45.603

`line-height`我的财产有问题。这修复了它：

```
.recaptchatable, #recaptcha_area tr, #recaptcha_area td, #recaptcha_area th {
    line-height: 0;
} 
```

# android - 当我尝试编辑 EditText 的文本时，如何防止 ArrayAdapter getView() 重复调用？

> ID：10574320
> 
> 赞同：2
> 
> 时间：2012-05-13T18:49:52.607
> 
> 标签：android, android-layout, android-widget

我使用 ArrayAdapter 实现了一个 ListView。每个 listItem（行）都包含 EditText。
当我尝试编辑 EditText 的文本时，我无法做到这一点，因为每当键盘出现时，都会调用 getView() 方法并且我无法编辑文本。
谁能帮我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T05:41:07.657

如果这是您在编辑 EditText 时遇到的唯一问题，您可以通过将以下属性添加到清单中的 Activity 来消除它。

```
android:windowSoftInputMode="adjustPan" 
```

像这样的东西，

```
 <activity
            android:name=".ListEditActivity"
            android:label="@string/app_name" 
            android:windowSoftInputMode="adjustPan">

   </activity> 
```

现在您将无法面对两次单击 Edittext 来编辑它的问题。但是，如果您遇到一些问题，例如在滚动时在 EditText 中获取错误的值，我实际上正在处理它，一旦我得到解决方案，我将在此处更新我的答案。

# android - 带有 settext 的 Android StringArray

> ID：10574321
> 
> 赞同：0
> 
> 时间：2012-05-13T18:50:05.973
> 
> 标签：android, arrays

我正在开发一个为用户显示一些文本视图的应用程序，我认为我会将文本存储在一个数组中并相应地加载信息以从列表视图中选择项目

每个 StringArray 都有一个名称和 4 个项目。我正在使用 if 语句来知道要使用哪个数组，然后相应地设置文本。

但是我似乎无法正确处理。LogCat 给了我 FATALEXCEPTION 并且当我尝试访问该活动时程序立即关闭。

使用代码

```
if (s.equals("A_DuGamla")) {
    String[] banan_arr = getResources().getStringArray(R.array.hello);
    songname.setText(banan_arr[0]);
    lyricsby.setText(banan_arr[1]);
    melody.setText(banan_arr[2]);
    lyrics.setText(banan_arr[3]);
} else if (s.equals("A_Kungs")) { 
// And so on.. 
```

和字符串数组

```
<string-array name="hello">
    <item>Visa</item>
    <item>Text</item>
    <item>Melodi</item>
    <item>Text</item>
</string-array> 
```

提前致谢

更新错误日志

```
05-13 21:05:20.771: E/AndroidRuntime(25903): FATAL EXCEPTION: main
05-13 21:05:20.771: E/AndroidRuntime(25903): java.lang.RuntimeException: Unable toinstantiate activity ComponentInfo{se.noxious.visboken/se.noxious.visboken.R1_TradVisor}: java.lang.NullPointerException
05-13 21:05:20.771: E/AndroidRuntime(25903):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1743)
05-13 21:05:20.771: E/AndroidRuntime(25903):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1851)
05-13 21:05:20.771: E/AndroidRuntime(25903):    at android.app.ActivityThread.access$1500(ActivityThread.java:132)
05-13 21:05:20.771: E/AndroidRuntime(25903):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
05-13 21:05:20.771: E/AndroidRuntime(25903):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-13 21:05:20.771: E/AndroidRuntime(25903):    at android.os.Looper.loop(Looper.java:150)
05-13 21:05:20.771: E/AndroidRuntime(25903):    at android.app.ActivityThread.main(ActivityThread.java:4277)
05-13 21:05:20.771: E/AndroidRuntime(25903):    at java.lang.reflect.Method.invokeNative(Native Method)
05-13 21:05:20.771: E/AndroidRuntime(25903):    at java.lang.reflect.Method.invoke(Method.java:507)
05-13 21:05:20.771: E/AndroidRuntime(25903):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-13 21:05:20.771: E/AndroidRuntime(25903):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-13 21:05:20.771: E/AndroidRuntime(25903):    at dalvik.system.NativeStart.main(Native Method)
05-13 21:05:20.771: E/AndroidRuntime(25903): Caused by: java.lang.NullPointerException
05-13 21:05:20.771: E/AndroidRuntime(25903):    at android.preference.PreferenceManager.getDefaultSharedPreferencesName(PreferenceManager.java:356)
05-13 21:05:20.771: E/AndroidRuntime(25903):    at android.preference.PreferenceManager.getDefaultSharedPreferences(PreferenceManager.java:351)
05-13 21:05:20.771: E/AndroidRuntime(25903):    at se.noxious.visboken.R1_TradVisor.<init>(R1_TradVisor.java:19)
05-13 21:05:20.771: E/AndroidRuntime(25903):    at java.lang.Class.newInstanceImpl(Native Method)
05-13 21:05:20.771: E/AndroidRuntime(25903):    at java.lang.Class.newInstance(Class.java:1409)
05-13 21:05:20.771: E/AndroidRuntime(25903):    at android.app.Instrumentation.newActivity(Instrumentation.java:1040)
05-13 21:05:20.771: E/AndroidRuntime(25903):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1735)
05-13 21:05:20.771: E/AndroidRuntime(25903):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:29:47.693

logcat 中的关键行是

```
at se.noxious.visboken.R1_TradVisor.<init>(R1_TradVisor.java:19) 
```

检查文件 R1_TradVisor.java 中的第 19 行 - 这就是错误所在。无论您在那条线上处理的任何对象都是`null`( `NullPointerException`)。

# php - sql更新语句不起作用

> ID：10574322
> 
> 赞同：-2
> 
> 时间：2012-05-13T18:50:23.153
> 
> 标签：php, sql

每次执行此语句时，我都必须在数据库中增加一个字段：

```
$sql="UPDATE `product` SET buyCount = buyCount+1 WHERE id=".$productID; 
```

但它不起作用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T18:54:16.580

我最好的猜测是 BuyCount 被初始化为 NULL 而不是 0。试试：

```
set BuyCount = coalesce(BuyCount, 0) + 1 
```

或者，您的 where 子句失败了。您可以尝试在另一列中设置一个值以查看它是否有效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-13T21:05:52.747

尝试这个

```
$sql="UPDATE product SET buyCount = buyCount+1 WHERE id= $productID"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-13T19:03:16.450

将您的结束 " 移动到查询的末尾并将变量括在单引号中。

```
$sql="UPDATE product SET buyCount = buyCount+1 WHERE id='$productID'"; 
```

# android - Android：在RelativeLayout右侧添加复选框

> ID：10574325
> 
> 赞同：0
> 
> 时间：2012-05-13T18:51:11.970
> 
> 标签：android, android-layout, checkbox, android-relativelayout

我有一个RelativeLayout 的问题。我尝试使用 Java 代码创建以下内容：

```
<RelativeLayout
android:id="@+id/RelativeLayout01"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<CheckBox
    android:id="@+id/CheckBox01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:clickable="false" />

<TextView
    android:id="@+id/TextView03"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:text="TEXT here"
    android:textAppearance="?android:attr/textAppearanceMedium" />
</RelativeLayout> 
```

上面的 XML 创建了我想要的外观。现在我正在尝试使用 Java 代码来做到这一点：

```
// First Child: TextView
text = new TextView(context);
text.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
text.setText(contentText);
text.setTextSize(20);

// Layout-Info for text
RelativeLayout.LayoutParams text_relativeParams = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
text_relativeParams.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
text_relativeParams.addRule(RelativeLayout.ALIGN_PARENT_TOP);

// Add text to layout:
this.addView(text, text_relativeParams);
// Checkbox
checkbox = new CheckBox(context);
checkbox.setClickable(false);
checkbox.setChecked(reachable);
checkbox.setBackgroundColor(Color.BLUE);
checkbox.setText("");
checkbox.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

// Layout-Info for Checkbox
RelativeLayout.LayoutParams checkbox_relativeParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
checkbox_relativeParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
checkbox_relativeParams.addRule(RelativeLayout.ALIGN_PARENT_TOP);

// Adding Checkbox to layout:
this.addView(checkbox); 
```

上面的 Java 代码应该和 XML 一样。但是应该和做之间有一点区别。复选框出现在左侧。如何将复选框向右移动？（这是RelativeLayout的派生类，代码在Constructor中）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:10:53.263

去掉这行代码

```
checkbox.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); 
```

使用 checkbox_relativeParams 设置复选框的布局参数

```
RelativeLayout.LayoutParams checkbox_relativeParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
checkbox_relativeParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
checkbox_relativeParams.addRule(RelativeLayout.ALIGN_PARENT_TOP);
this.addView(checkbox, checkbox_relativeParams); 
```

# mongodb - MongoDB/mongoose 查询和 $in 运算符

> ID：10574328
> 
> 赞同：5
> 
> 时间：2012-05-13T18:51:34.077
> 
> 标签：mongodb, mongoose, nosql

关于使用 $in 进行 MongoDB/mongoose 查询的问题[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24in](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24in)

如果我在目标字段和 $in 字段都有多个值的情况下进行查询，有没有办法知道在返回的参数中匹配了哪些 target/$in 字段元素？

例如，如果我有一堆这样的文件

```
doc1 = { name : Abe, children : [Betty, Claire, Donald, Eamon] } 
```

我设置了一个查询

```
Model.find( { children : { $in : [Ann, Betty, Clive] } }) 
```

如果我得到上面的结果 doc1，有什么方法可以知道（无需手动遍历数组）哪个目标元素和哪个 $in 元素匹配？所以在上面的例子中，我怎样才能访问到 doc1 被选中的事实，因为它与“Betty”匹配？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T18:03:51.970

您必须手动检查 mongoose 文档。

# regex - Ant：如何在 replaceregexp 中使用属性值作为替换

> ID：10574333
> 
> 赞同：0
> 
> 时间：2012-05-13T18:52:00.543
> 
> 标签：regex, ant, properties

我需要用属性文件中的值替换正则表达式匹配。

它看起来像：

```
<replaceregexp 
        file="test.txt"
        match="blabla" 
        replace="some.property"
        >
</replaceregexp> 
```

（那行不通，只是为了显示我需要的东西）

some.property 在名为 test.properties 的文件中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:36:37.420

我认为问题在于您使用的是 some.property 而不是 ${some.property}。这就是我让它工作的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:32:47.317

使用[loadproperties](http://ant.apache.org/manual/Tasks/loadproperties.html)任务从文件加载属性。

# java - 在文件中搜索字符串并将某些行值添加到 ArrayList

> ID：10574336
> 
> 赞同：1
> 
> 时间：2012-05-13T18:52:15.770
> 
> 标签：java, regex, java.util.scanner, delimiter, filereader

我正在尝试编写一个从file1读取列表的方法，在file2中搜索列表值并将包含列表值的部分行添加到arraylist，直到达到字符串“Total”。

这是示例文件1：

```
AAA00020
AAA00021
AAA00022
AAA00023
AAA00024
AAA00025
AAA00026 
```

文件2：

```
ABC BANK
                                  ATM TRANSACTION SUMMARY

Institution: ABC BANK                          
Time 13:30:46     
Date: 13/05/2012      

1000 ATM AAA00022 01             10000.00/    0.00/      10000.00    100         289.00      1           0.00      0           0.00      0
2000 ATM AAB00023 02             20000.00/    0.00/      20000.00    200           0.00      0           0.00      0           0.00      0
3000 ATM AAC00024 03             30000.00/    0.00/      30000.00    300           0.00      0           0.00      0           0.00      0  ________________________________________________________________________________________________________________________________________ 
Total                            60000.00/    0.00/      60000.00    600         289.00      1           0.00      0           0.00      0 
```

这是我的代码：

```
import java.io.*;
import java.util.*;

public class atmTotals 
{       
    ArrayList <String> atmList = new ArrayList <String>();
    ArrayList <Atm> atmUs = new ArrayList <Atm>();

    public void getAtmList()
    {       
        try
        {
            FileReader in = new FileReader("ATMList.txt");              
            Scanner listIn = new Scanner(in);
            while (listIn.hasNextLine())
            {
                atmList.add(new String (listIn.next()));
            }
            for (String list : atmList)
            {
                //System.out.println(list);
            }
        }

        catch( FileNotFoundException fileNotFound)
        {
            System.err.println( "Error opening file.");
            System.exit(1);
        }           
        catch ( NoSuchElementException elementEx)
        {
            System.err.println( "Incorrect file format.");
            System.exit(1);
        }
        catch ( IllegalStateException stateEx )
        {
            System.err.println( "Error reading from file.");
            System.exit(1);
        }

    }
    public void getAtmTotals()      
    {                       
        try
        {
            FileReader file = new FileReader ("ATMTOTAL.rep");
            Scanner in = new Scanner (file).useDelimiter("\\s+|/");
            for (String list : atmList)                         
            {                   
                while (in.hasNext() && !(in.next().contains("Total")))  
                {
                    String currentLine = in.next();
                    if (currentLine.contains(list))
                    {
                        System.out.println("Found String " + currentLine);
                        atmUs.add ( new Atm (in.next(), in.next(), in.nextFloat()));                            
                    }
                }
            }
            //System.out.print(atmUs);

            for ( Atm list : atmUs)
            {
                System.out.printf("%-15s%-3s%10.2f\n", list.getAtmID(), list.getBranchID(), list.getTotalAmt());
            }

        }
        catch( FileNotFoundException fileNotFound)
        {
            System.err.println( "Error opening file.");
            System.exit(1);
        }           
        catch ( NoSuchElementException elementEx)
        {
            System.err.println( "Incorrect file format.");
            System.exit(1);
        }
        catch ( IllegalStateException stateEx )
        {
            System.err.println( "Error reading from file.");
            System.exit(1);
        }
    }               
} 
```

构造函数：

```
public class Atm 
{
private String AtmID;
private String branchID;    
private float TotalAmt;

public Atm ( String AtmID, String branchID, float TotalAmt )
{
    this.AtmID = AtmID;
    this.branchID = branchID;
    this.TotalAmt = TotalAmt;
..... 
```

我得到输出：

```
Found String AAA00022
Incorrect file format. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:43:41.417

决定全力以赴，我想出了以下几点。完美运行。

```
public void getAtmTotals(File file)     
    {

        Scanner rf = null;            
        for (String list : atmList)                         
        {               
        try
        {
            FileReader atmFile = new FileReader(file);
            Pattern p = Pattern.compile ("[\\s/\\s]+");
            rf = new Scanner (atmFile);                                        
            while (rf.hasNextLine())    
            {   
                if (rf.nextLine().contains("Total")) break;
                if (rf.nextLine().contains(list))
                {
                Scanner in = new Scanner(rf.nextLine()).useDelimiter(p);
                while (in.hasNext())                    
                    {                       
                        atmUs.add ( new Atm (in.next(), in.next(), in.next(), in.next(), in.nextFloat(), 
                                in.nextFloat(), in.nextFloat(), in.nextInt(), in.nextFloat(), in.nextInt(), 
                                in.nextFloat(), in.nextInt(), in.nextFloat(), in.nextInt() ) );                                                 
                    }               
                }
            }
        rf.close();
        }

        catch( FileNotFoundException fileNotFound)
        {
            System.err.println( "Error opening  " + file.getName());
            System.exit(1);
        }           

        catch ( NoSuchElementException elementEx)
        {
            System.err.println( "Incorrect " + file.getName() + " format");
            System.exit(1);
        }
        catch ( IllegalStateException stateEx )
        {
            System.err.println( "Error reading from " + file.getName());
            System.exit(1);
        }
        }

        System.out.print(atmUs);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:01:31.403

目前尚不清楚确切的问题是什么，但是当您`\r\n`在最后一行添加 a 时会出现错误，因为它需要在它之后再添加一行。

不太清楚为什么必须转换它 - Java 应该接受两者......

# android - LinearLayout中的Android ImageView位置

> ID：10574337
> 
> 赞同：0
> 
> 时间：2012-05-13T18:52:18.630
> 
> 标签：android, imageview, android-linearlayout

我希望一个小图像出现在我的 ListView 的右侧，但是当我尝试我的 TextViews 时，它会将它推出“应用程序”，因此它不可见。我尝试过研究重力，但我似乎无法正确处理。是否可以根据需要放置它，还是必须在 RelativeLauoyt 中放置？谢谢

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#FFFFFF"
>

<ImageView
    android:id="@+id/img"
    android:layout_width="80dip"
    android:layout_height="80dip" 
    android:layout_marginLeft="5dp" 
    android:layout_marginTop="5dp" 
    android:layout_marginBottom="5dp" 
    android:scaleType="centerCrop"/>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:paddingLeft="10dp"
    android:layout_width="fill_parent"
    android:layout_height="80dip">
    <TextView
        android:layout_width="fill_parent"
        android:id="@+id/title"
        android:layout_height="wrap_content"
        android:textStyle="bold"
        android:textColor="#004b23"
        android:textSize="16sp"
        android:maxLines="2"
        android:ellipsize="end"
        android:layout_marginRight="30sp"/>
    <TextView
        android:layout_width="fill_parent"
        android:id="@+id/detail"
        android:textColor="#cfae78"
        android:layout_height="wrap_content"/>
    <TextView
        android:layout_width="fill_parent"
        android:textColor="#cfae78"
        android:id="@+id/footer"
        android:layout_height="wrap_content"/>
</LinearLayout> 
```

这是我想放在 ListView 右侧的 ImageView。

```
<ImageView
    android:id="@drawable/day"
    android:layout_width="40dip"
    android:layout_height="40dip"
    android:layout_marginBottom="5dp"
    android:layout_marginRight="5dp"
    android:layout_marginTop="5dp"
    android:scaleType="centerCrop" 
    android:layout_gravity="right|center_vertical"/>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:03:38.757

我总是推荐使用RelativeLayout（但这只是个人喜好）。

使用 RelativeLayout 您需要：

Listview: (Align Parent Left, to Left of ImageView) ImageView: (Align Parent Right, Width: wrap content)

那应该达到你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:14:40.583

您的“内部”线性布局有一个属性`layout_width="fill_parent"`，这将导致您的内部线性布局占用所有剩余的水平空间。为了让它工作，将线性布局的 layout_width 属性更改为较小的值，比如 150dip。

那是，`layout_width="150dip"`

此外，不是你的 textView 推出了你的图像，而是你的线性布局的 layout_width 属性

PS我还建议您使用相对布局。

# android - 应用程序意外停止。请再试一次

> ID：10574339
> 
> 赞同：-1
> 
> 时间：2012-05-13T18:52:27.567
> 
> 标签：android

我正在用android开发我的项目。其基于位置的服务。在这里，我尝试在单个项目下结合三个活动。所以我在布局中创建了三个 xml 文件。并且还包括 Manifest 中的三个活动。但是当我尝试执行我的项目时，它显示应用程序已意外停止。请再试一次。我认为这个错误在 R.java 中。但我不知道确切的错误。请帮助我。

我的 logcat 显示像

```
05-14 00:00:34.096: W/dalvikvm(356): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
05-14 00:00:34.118: E/AndroidRuntime(356): Uncaught handler: thread main exiting due to uncaught exception
05-14 00:00:34.206: E/AndroidRuntime(356): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.android.google.apis/com.androd.speech.TtsActivity}: java.lang.ClassNotFoundException: com.androd.speech.TtsActivity in loader dalvik.system.PathClassLoader@44e84190
05-14 00:00:34.206: E/AndroidRuntime(356):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417)
05-14 00:00:34.206: E/AndroidRuntime(356):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
05-14 00:00:34.206: E/AndroidRuntime(356):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
05-14 00:00:34.206: E/AndroidRuntime(356):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
05-14 00:00:34.206: E/AndroidRuntime(356):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-14 00:00:34.206: E/AndroidRuntime(356):  at android.os.Looper.loop(Looper.java:123)
05-14 00:00:34.206: E/AndroidRuntime(356):  at android.app.ActivityThread.main(ActivityThread.java:4363)
05-14 00:00:34.206: E/AndroidRuntime(356):  at java.lang.reflect.Method.invokeNative(Native Method)
05-14 00:00:34.206: E/AndroidRuntime(356):  at java.lang.reflect.Method.invoke(Method.java:521)
05-14 00:00:34.206: E/AndroidRuntime(356):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-14 00:00:34.206: E/AndroidRuntime(356):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-14 00:00:34.206: E/AndroidRuntime(356):  at dalvik.system.NativeStart.main(Native Method)
05-14 00:00:34.206: E/AndroidRuntime(356): Caused by: java.lang.ClassNotFoundException: com.androd.speech.TtsActivity in loader dalvik.system.PathClassLoader@44e84190
05-14 00:00:34.206: E/AndroidRuntime(356):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
05-14 00:00:34.206: E/AndroidRuntime(356):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
05-14 00:00:34.206: E/AndroidRuntime(356):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
05-14 00:00:34.206: E/AndroidRuntime(356):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-14 00:00:34.206: E/AndroidRuntime(356):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409)
05-14 00:00:34.206: E/AndroidRuntime(356):  ... 11 more
05-14 00:00:34.266: I/dalvikvm(356): threadid=7: reacting to signal 3
05-14 00:00:34.368: I/dalvikvm(356): Wrote stack trace to '/data/anr/traces.txt'
05-14 00:05:20.357: I/Process(356): Sending signal. PID: 356 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:55:59.900

你在使用文字转语音吗？从 logcat 看起来你是。要使用 TTS，您必须首先检查设备上是否安装了 TTS。

这个答案显示了如何检查它是否已安装：

[SpeechToText 并运行 ACTION_CHECK_TTS_DATA 意图](https://stackoverflow.com/questions/3895371/speechtotext-and-running-the-action-check-tts-data-intent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:41:25.527

这可能与这里的问题相同

[无法实例化服务：ClassNotFoundException](https://stackoverflow.com/questions/10569015/unable-to-instantiate-service-classnotfoundexception)

由于最近的 ADT 更新，只需要将“lib”文件夹更改为“libs”...

# asp.net - 参数具有 webrequest 之后的所有属性

> ID：10574343
> 
> 赞同：0
> 
> 时间：2012-05-13T18:52:53.880
> 
> 标签：asp.net, json, asp.net-web-api

我有一个非常简单的 ASP.NET Api 控制器，只有一种方法。

```
public HttpResponseMessage<User> Post(User user)
{
    return new HttpResponseMessage<User>(new User() { Name = "New User at Server" });
} 
```

我的调试器说该方法已被调用，但问题是参数“user”的所有内容都设置为 null；我正在使用 Fiddler 来查看请求和响应.. 一切看起来都很好。

这是我在客户端的服务代码。

```
 public void AddUser(Models.User user, Action<Models.User> ShowResult)
    {
        var uiThreadScheduler = TaskScheduler.FromCurrentSynchronizationContext();
        string url = "http://localhost:4921/User";
        Uri uri = new Uri(url, UriKind.Absolute);
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(uri);
        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";

        var sendWebPost = Task.Factory.FromAsync<Stream>(request.BeginGetRequestStream, request.EndGetRequestStream, null)
        .ContinueWith(task =>
            {
                Tuple<string, string>[] stringToSend = { Tuple.Create<string, string>("user", ObjectToJson<Models.User>(user)) };
                var bytesToSend = GetRequestBytes(stringToSend);   
                using (var stream = task.Result)
                    stream.Write(bytesToSend, 0, bytesToSend.Length);
            }
        ).ContinueWith(task => 
            {
                Task.Factory.FromAsync<WebResponse>(request.BeginGetResponse, request.EndGetResponse, null)
                    .ContinueWith<WebResponse>(task2 => { ValidateResponse(task2); return task2.Result; })
                    .ContinueWith<Models.User>(task3 => {return JsonToObject<Models.User>(task3);})
                    .ContinueWith(task4 => { TryClearWorking(); ShowResult(task4.Result); }, uiThreadScheduler);
            });;

    }

    public static string ObjectToJson<T>(T obj) where T : class
    {
        DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(T));
        MemoryStream stream = new MemoryStream();

        StreamReader sr = new StreamReader(stream);

        serializer.WriteObject(stream, obj);
        sr.BaseStream.Position = 0;
        string jsonString = sr.ReadToEnd(); 
        return jsonString;
    }

    protected static byte[] GetRequestBytes(Tuple<string, string>[] postParameters)
    {
        if (postParameters == null || postParameters.Length == 0)
            return new byte[0];
        var sb = new StringBuilder();
        foreach (var key in postParameters)
            sb.Append(key.Item1 + "=" + key.Item2 + "&");
        sb.Length = sb.Length - 1;

        return Encoding.UTF8.GetBytes(sb.ToString());
    } 
```

谁能给我一些想法，从哪里开始寻找错误.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:41:28.873

您需要设置 Content-Length 标头。

# gwt - 如何应用 SerializationStreamWriter 进行存储

> ID：10574344
> 
> 赞同：3
> 
> 时间：2012-05-13T18:53:04.417
> 
> 标签：gwt, serialization

有没有一种**简单的方法**可以在不编写自己的生成器的情况下将 SerializationStreamWriter 用于自定义目的？

（例如 html5 存储）

GWT 的 javadoc 说明的很少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:41:51.823

**我们正在为我们当前的项目编写一个实现，它完全符合您的要求：将自定义对象序列化为字符串并将其保存到本地存储中，将字符串反序列化为对象......**

所以，对我来说，可以在客户端使用**SerializationStreamWriter**进行序列化，并使用 SerializationStreamReader 进行反序列化。

**要实现这一点**，

您不需要 SerializationStreamWriter/SerializationStreamReader 的生成器，而是**TypeSerializer 的生成器**（实现 com.google.gwt.user.client.rpc.impl.SerializerBase）。这很简单，看看 com.google.gwt.user.rebind.rpc.TypeSerializerCreator，并在你的生成器中使用它。或者，如果您的所有自定义对象都在一个 RPC 服务中引用，您可以只使用生成的 rpc 服务的 TypeSerializer。

而且您必须编写**SerializationStreamWriter 或 SerializationStreamReader 的正确实现**。因为有两种序列化字符串格式（请求使用格式和响应使用格式）：

在 GWT 中，您有 ClientSerializationStreamWriter、ClientSerializationStreamReader 用于客户端序列化/反序列化；ServerSerializationStreamWriter, ServerSerializationStreamReader 用于服务器端序列化/反序列化；

**Client** SerializationStream **Writer**将对象序列化为**FORMAT_1**，只有**Server** SerializationStream **Reader**可以读取它（将其反序列化为对象）。

**Server** SerializationStream **Writer**会将对象序列化为**FORMAT_2**，只有**Client** SerializationStream **Reader**可以读取（反序列化为对象）。

所以你需要做什么，如果你想使用 ClientSerializationStreamWriter 来序列化你的对象，那么为客户端编写一个类似的 ServerSerializationStreamReader 实现。或者如果你想使用 ClientSerializationStreamWriter 来反序列化字符串，那么在客户端编写一个类似的 ServerSerializationStreamWriter 实现。这并不难，因为**FORMAT_1**和**FORMAT_2**的区别只是顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:01:35.727

不。

因为GWT-RPC序列化是非对称的，所以不能用于本地存储：服务器知道客户端发送了什么，客户端知道服务器发送了什么，但是他们不会理解自己写的内容。

# c# - Foo之间的区别 其中 T : BaseObject 和 Foo

> ID：10574347
> 
> 赞同：3
> 
> 时间：2012-05-13T18:53:22.513
> 
> 标签：c#, generics

和有什么区别

```
Foo<T> where T : BaseObject 
```

和

```
Foo<BaseObject> 
```

这个说法不一样吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T18:55:27.187

不，不一样。

和：

```
Foo<T> where T : BaseObject 
```

`T`可以是任何`BaseObject`类型及其继承者。

和：

```
Foo<BaseObject> 
```

`T` *必须*完全`BaseObject`正确（假设没有`Foo`为泛型类型参数声明方差修饰符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:19:14.987

考虑一下：

```
var list = new List<object>();
list.Add("Hello");
Console.WriteLine(list[0].Length); // doesn't compile 
```

同样，使用`Foo<BaseObject>`Foo 的消费者将只能从 Foo 的成员访问 BaseObject`T`成员。 `With Foo<T> where T : BaseObject`, Foo 的消费者将可以访问实际上为类型参数传递的任何派生类型的所有成员。

# python - 使用 Python urllib2 时出现奇怪的 ImportError

> ID：10574349
> 
> 赞同：2
> 
> 时间：2012-05-13T18:53:56.307
> 
> 标签：python, urllib2

我已经这样做了一百万次，但由于某种原因，我在尝试使用 urllib2 时遇到了一些奇怪的错误。我最近从 Ubuntu 11.10 升级到 12.04。

代码：

```
from urllib2 import urlopen
urlopen('http://www.google.com').read() 
```

结果：

```
Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    urlopen('http://www.google.com').read()
  File "/usr/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/usr/lib/python2.7/urllib2.py", line 400, in open
    response = self._open(req, data)
  File "/usr/lib/python2.7/urllib2.py", line 418, in _open
    '_open', req)
  File "/usr/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.7/urllib2.py", line 1207, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "/usr/lib/python2.7/urllib2.py", line 1146, in do_open
    h = http_class(host, timeout=req.timeout) # will parse host:port
  File "/home/nate/httplib.py", line 362, in __init__
ImportError: No module named appengine.api 
```

使用 urllib 时出现类似的错误。关于可能导致此问题以及如何解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T18:59:07.160

看起来您有一个覆盖标准模块 httplib 的 httplib.py。它正在尝试导入不存在的 Google App Engine 相关库。您需要将 httplib.py 重命名为其他名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T18:57:42.990

> 文件“/home/nate/httplib.py”，第 362 行，

您的`sys.path`调用`httplib.py`中有一个文件正在尝试导入 appengine.api。

重命名您的`/home/nate/httplib.py`其他内容，因为它隐藏了同名的标准库模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T19:01:54.423

我强烈建议您查看[requests 库](http://docs.python-requests.org/en/latest/index.html)。它使使用 HTTP 变得轻而易举。

“Python 的标准 urllib2 模块提供了您需要的大部分 HTTP 功能，但 API 被彻底破坏了。它是为不同的时间和不同的网络构建的。它需要大量的工作（甚至方法覆盖）来执行最简单的的任务。”

# web-services - 与 Spring Web 服务的 HTTP/XML 绑定

> ID：10574352
> 
> 赞同：0
> 
> 时间：2012-05-13T18:54:24.527
> 
> 标签：web-services, http, spring-ws

我正在研究 Web 服务 POC。我需要开发一个基于 Spring 的 Web 服务，它使用 XML/HTTP 即[HTTP 绑定](http://www.w3.org/TR/wsdl#_http)（不是 SOAP/HTTP），以便我可以使用 URL 参数调用 Web 服务，例如 WSDL[规范](http://www.w3.org/TR/wsdl#_http-e)中描述的一个示例，尤其是 GET 与查询参数。

我无法将 URL 的查询参数映射到端点的 (@EndPoint) 方法参数。

是否可以使用 spring-ws 开发这样的 Web 服务（XML/HTTP 绑定）？是否可以使用 GET 请求 + 查询字符串调用这样的服务？

让我知道任何此类示例/教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T01:57:15.800

请查看此页面（[http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch18s02.html](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch18s02.html)）。假设您使用的是 spring 3，我相信您应该在那里找到一些解脱。

根据您的问题，我假设您已经在 web.xml 中声明和映射了 DispatcherServlet。那么，诀窍就是拉出论点。该页面指示如何从 URL（我相信这是您的目标）和请求正文中提取参数。

祝你好运，如果有任何不清楚的地方，请回信。

# matlab - Matlab - save(int2str(i), x) 不起作用 - 参数必须包含一个字符串

> ID：10574355
> 
> 赞同：9
> 
> 时间：2012-05-13T18:54:30.090
> 
> 标签：matlab, octave

我有一个循环正在生成一些数据，在某些情况下我想保存数据。因此我有：

```
save(int2str(i), x); 
```

这不起作用并出现以下消息：

```
??? Error using ==> save
Argument must contain a string. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T18:59:25.800

x 必须是“x”：

```
 save(int2str(i), 'x'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T19:58:14.637

文件名（在您的情况下，您正确地将我猜的循环索引`i`转换为字符串）和要保存的变量的名称都必须是字符串。您可以通过用逗号分隔变量名称将多个变量保存到同一个 mat 文件。Matlab 文档给出了以下示例。. .

```
savefile = 'pqfile.mat';
p = rand(1, 10);
q = ones(10);
save(savefile, 'p', 'q') 
```

# wordpress - 将带有 Headway 的 Wordpress 移动到新域会破坏网站

> ID：10574356
> 
> 赞同：0
> 
> 时间：2012-05-13T18:54:37.053
> 
> 标签：wordpress

我有一个使用 Wordpress 和 Headway 构建的客户的 wordpress 网站。我需要将它移动到新共享服务器上的新域（具有相同硬件配置的相同主机提供商）。

我之前已经移动了许多这样的 wordpress 设置，包括 Wordpress / Headway 组合。在调试过程中，我还使用了 Headway 的文档和视频来仔细检查我做的一切是否正确。

我移动了数据库并用新域替换了所有出现的旧域，并更新了所有文件路径。然后我将`public_html`文件夹复制到新服务器。该站点此时应该可以正常工作。

`No Content to Display`相反，我在一个空的 html 页面上收到了 Headway 错误消息。我已经将问题追溯到`wp-config`Headway 为其块存储序列化数据的表。除了表中的这些 Headway 条目之外，我可以将整个数据库中的数据更新到新域`wp-config`。一旦我更新了这些，网站就开始崩溃，如果我全部更新，网站就会加载 Headway 错误消息`No Content to Display`。底层的 Wordpress 系统似乎仍在工作，因为我可以加载`/wp-admin`控制台并且我的所有内容都存在并且看起来正确。

如果我更深入地跟踪问题，则似乎 Wordpress 功能`get_options()`在 Headway 文件中失败`data-layout-options.php`。我无法进一步调试。

该站点在原始域上完美运行，理论上，我正在直接复制所有数据，然后简单地用新域替换旧域。

任何人都可以帮助解决类似的问题吗？感觉就像我在追逐代码中的错误，而实际上它是某种简单的疏忽或配置设置已被修改。请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:53:38.150

我确实接近问题所在。

Wordpress 表中的序列化 Headway 数据`wp-config`包含字符串长度。自己迁移数据库，然后用新的域和旧的 Web 文件夹文件路径 grepping 并将旧域替换为新的 Web 文件夹文件路径会导致反序列化在 Wordpress 系统中失败（例如 get_options() Wordpress 函数）。

我没有编写自定义脚本来处理字符串长度，而是测试了一些数据库迁移插件。 [WP Migrate DB](http://wordpress.org/extend/plugins/wp-migrate-db/)是赢家并解决了问题。

**迁移数据库**

在原始域上安装插件（原始 Wordpress 安装）。它将要求您输入新域和您的 web 目录的新文件路径（web 目录文件路径也很重要）。例如，在我的例子中，web 目录的文件路径已从 /home2/old_username 更改为 /home6/new_username。

然后，该插件将转储整个 Wordpress 数据库，并将所有出现的旧域和旧文件路径替换为 Web 目录的新域和文件路径。然后，.sql 转储将保存在您的计算机上。

然而，这并不完美，我仍然需要自己做一些 grep 和替换。此外，我必须小心这一点，因为有一些遗漏的数据位于 Headway 序列化数据中，我必须执行 MySQL 查询以确保正确更新了字符串长度。

错过了这几个更新，因为有些数据库条目有`http://www.olddomain.com`，有些有`http://olddomain.com`。该插件并没有全部捕获，但可以手动替换。

最后，我必须将这个更新的 .sql 转储导入新域上的空 Wordpress 数据库。

**故事的寓意是，Headway V3 迁移到新域并不容易。** 你必须非常细致。

[另一种选择是BackupBuddy](http://pluginbuddy.com/purchase/backupbuddy/)，但我没有尝试，因为它的成本 > 75美元。BackupBuddy 很可能仍然会错过一些域和文件路径更新，所以要小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-23T12:59:26.923

我找到了 T. Brian Jones 的解决方案，并且刚刚将其应用于带有 HEADWAY 3.6.2 的 WordPress 3.8.1。

一切正常。像我这样的新手的一个技巧：如果您不知道要移动数据库的服务器上的文件路径，那么在进行数据库转储之前，请在此服务器上安装 WP Migrate DB，运行插件（工具）并从中获取路径那里...

谢谢 TBJ

马切伊

# ios - 将摇动手势事件传递给应用程序委托

> ID：10574362
> 
> 赞同：0
> 
> 时间：2012-05-13T18:55:42.073
> 
> 标签：ios, events, motion-detection, uiresponder

我将 motionBegan:withEvent: 方法放在我的视图控制器中以查看它是否可以工作，但它没有被调用。在`viewWillAppear`中，我使视图控制器成为第一响应者，并从`canBecomeFirstResponder`.

此视图控制器位于拆分视图的主窗格中，因此在我摇动设备之前，第一响应者可能已更改。

但我真正的问题是如何将所有运动事件传递给我的应用程序委托中的处理程序？我真的必须在所有视图控制器中使用 motionBegan:withEvent: 方法或委托给所有第一响应者吗？难道没有办法让这样的事件在不向每个 UIResponder 中插入代码的情况下沿响应者链向上流动吗？似乎会有，但我还没有指出如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:18:34.400

最简单的方法是覆盖`-sendEvent:`，`UIApplication`然后您将控制所有事件

你可以使用这个类

```
int retVal = UIApplicationMain(argc, argv, @"myApplication", @"myAppDelegate"); 
```

另一种解决方案是制作类别或扩展`-viewWillAppear:` [更多信息](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T20:08:44.673

我在pass中所做的是创建一个实现motionBegan方法的UIWindow类别。在那个 motionBegan 方法中，我广播了一个自定义的 NSNotification。然后，在应用程序中任何需要运动事件的地方，只需为您的运动通知添加一个观察者。

由于类别将方法添加到对象的每个实例，即使是系统创建的窗口也会获取您的 motionBegan 方法，并做正确的事情。它工作得很好。

# android - 适合所有设备的 Android 初始屏幕图像大小

> ID：10574363
> 
> 赞同：224
> 
> 时间：2012-05-13T18:55:50.463
> 
> 标签：android, png, screen, drawable, splash-screen

我有一个全屏 PNG，我想在启动画面上显示。只有一个错误，我不知道在每个可绘制文件夹（、、、和）中放置`ldpi`什么大小。我的应用程序应该在所有手机和平板电脑上运行良好且美观。我应该创建什么尺寸（以像素为单位）才能使启动画面在所有屏幕上都显示得很好？`mdpi``hdpi``xhdpi`

* * *

## 回答 #1

> 赞同：406
> 
> 时间：2013-04-01T13:27:39.093

# 免责声明

这个答案来自 2013 年，并且已经严重过时。从 Android 3.2 开始，现在有 6 组屏幕密度。这个答案会尽快更新，但没有预计到达时间。目前所有密度请参阅[官方文档](http://developer.android.com/guide/practices/screens_support.html)（尽管始终难以找到有关特定像素大小的信息）。

# 这是 tl/dr 版本

*   创建 4 个图像，每个屏幕密度一个：

    *   超大（xhdpi）：640x960
    *   大（hdpi）：480x800
    *   中等（mdpi）：320x480
    *   小（ldpi）：240x320
*   阅读Android 开发者指南中的[9-patch 图片介绍](http://developer.android.com/training/multiscreen/screensizes.html#TaskUse9Patch)

*   设计具有可以安全拉伸而不影响最终结果的区域的图像

这样，Android 会根据设备的图像密度选择合适的文件，然后根据 9-patch 标准拉伸图像。

# tl结束；博士。前面有完整的帖子

我正在回答与设计相关的问题。我不是开发人员，因此我无法提供代码来实现所提供的许多解决方案。唉，我的目的是帮助那些像我帮助开发我的第一个 Android 应用程序时一样迷失的设计师。

## 适合所有尺寸

借助 Android，公司可以开发几乎任何尺寸、几乎任何分辨率的手机和桌子。因此，启动画面没有“正确的图像大小”，因为没有固定的屏幕分辨率。这给想要实现闪屏的人带来了问题。

### 您的用户真的想看到闪屏吗？

（附带说明一下，在可用性方面，启动屏幕有点不鼓励。有人认为用户已经知道他点击了哪个应用程序，并且没有必要用启动屏幕标记您的图像，因为它只会中断用户体验一个“广告”。然而，它应该用在初始化时（5s+）需要大量加载的应用程序中，包括游戏等，这样用户就不会想知道应用程序是否崩溃了）

## 屏幕密度；4班

因此，鉴于市场上手机的屏幕分辨率如此之多，谷歌实施了一些可以提供帮助的替代方案和巧妙的解决方案。您必须知道的第一件事是，Android 将*所有*屏幕分成 4 种不同的屏幕密度：

1.  低密度 (ldpi ~ 120dpi)
2.  中等密度 (mdpi ~ 160dpi)
3.  高密度 (hdpi ~ 240dpi)
4.  超高密度（xhdpi ~ 320dpi）（这些 dpi 值是近似值，因为定制设备会有不同的 dpi 值）

您（如果您是设计师）需要知道的是，Android 基本上会根据设备从 4 个图像中选择显示。因此，您基本上必须设计 4 种不同的图像（尽管可以为不同的格式开发更多图像，例如宽屏、纵向/横向模式等）。

记住这一点：除非您为 Android 中使用的每个分辨率设计一个屏幕，否则您的图像将拉伸以适应屏幕尺寸。除非您的图像基本上是渐变或模糊，否则拉伸会产生一些不希望的失真。所以你基本上有两个选择：为每个屏幕尺寸/密度组合创建一个图像，或者创建四个 9-patch 图像。

最难的解决方案是为每个分辨率设计不同的启动画面。[您可以按照本页](http://developer.android.com/guide/practices/screens_support.html#testing)末尾表格中的分辨率开始（还有更多。示例：960 x 720 未在此处列出）。并且假设您在图像中有一些小细节，例如小文本，您必须为每个分辨率设计多个屏幕。例如，在中等屏幕上显示 480x800 图像可能看起来不错，但在较小的屏幕（具有更高的密度/dpi）上，徽标可能会变得太小，或者某些文本可能变得不可读。

## 9 补丁图像

另一种解决方案是[创建一个 9-patch 图像](http://developer.android.com/tools/help/draw9patch.html)。它基本上是图像周围的 1 像素透明边框，通过在该边框的顶部和左侧区域绘制黑色像素，您可以定义允许拉伸图像的哪些部分。我不会详细介绍 9-patch 图像的工作原理，但简而言之，与顶部和左侧区域中的标记对齐的像素是重复拉伸图像的像素。

### 一些基本规则

1.  您可以在 Photoshop（或任何可以准确创建透明 png 的图像编辑软件）中制作这些图像。
2.  1 像素边框必须是完全透明的。
3.  1 像素透明边框必须在您的图像周围，而不仅仅是顶部和左侧。
4.  您只能在该区域绘制黑色 (#000000) 像素。
5.  顶部和左侧边框（定义图像拉伸）只能有一个点（1px x 1px）、两个点（均为 1px x 1px）或一条连续线（宽度 x 1px 或 1px x 高度）。
6.  如果您选择使用 2 个点，则图像将按比例放大（因此每个点将轮流扩展，直到达到最终的宽度/高度）
7.  1px 边框必须在预期的基本文件尺寸之外。所以一个 100x100 的 9-patch 图像实际上必须有 102x102（100x100 +1px 在顶部、底部、左侧和右侧）
8.  9-patch 图片必须以 *.9.png 结尾

因此，您可以在徽标的任一侧（上边框）放置 1 个点，在其上方和下方（左边框）放置 1 个点，这些标记的行和列将是唯一要拉伸的像素。

## 例子

这是一个 9 补丁图像，102x102 像素（最终尺寸为 100x100，用于应用目的）：

![9 补丁图像，102x102 像素](../Images/53b6ff3f8f9ac186e14e5771e1f04093.png)

这是同一图像的 200% 缩放：

![相同的图像，为清晰起见放大了 2 倍](../Images/5b73755e9e9a21d08eee760e7ca6552b.png)

注意顶部和左侧的 1px 标记表示哪些行/列将扩展。

以下是应用内 100x100 的图像：

![渲染成 100x100](../Images/e16f056a58e190db521d9c8bc6fd1271.png)

如果扩展到 460x140，这就是它想要的效果：

![渲染成 460x140](../Images/ae80c4eeeaccffebf9ed85b61a2a06e5.png)

最后一件事要考虑。这些图像在您的显示器屏幕和大多数手机上可能看起来不错，但如果设备具有非常高的图像密度 (dpi)，则图像看起来会太小。可能仍然清晰可辨，但在分辨率为 1920x1200 的平板电脑上，图像会在中间显示为一个非常小的正方形。那么解决方案是什么？设计 4 个不同的 9-patch 启动器图像，每个图像用于不同的密度集。为确保不会发生收缩，您应该为每个密度类别设计最低通用分辨率。在这里收缩是不可取的，因为 9-patch 仅考虑拉伸，因此在收缩过程中，小文本和其他元素可能会失去可读性。

以下是每个密度类别的最小、最常见分辨率的列表：

*   超大（xhdpi）：640x960
*   大（hdpi）：480x800
*   中等（mdpi）：320x480
*   小（ldpi）：240x320

所以设计四个上述分辨率的启动画面，展开图像，在画布周围放置一个 1px 的透明边框，并标记哪些行/列将是可拉伸的。请记住，这些图像将用于密度类别中的*任何*设备，因此您的 ldpi 图像 (240 x 320) 可能会在具有小图像密度 (~120 dpi) 的超大平板电脑上拉伸到 1024x600。因此，9-patch 是拉伸的最佳解决方案，只要您不想要用于启动画面的照片或复杂图形（在创建设计时请记住这些限制）。

同样，不发生这种拉伸的唯一方法是为每个分辨率设计一个屏幕（或者为每个分辨率密度组合设计一个屏幕，如果您想避免图像在高/低密度设备上变得太小/太大），或者告诉图像不拉伸，并且在发生拉伸的任何地方都会出现背景颜色（还请记住，由于颜色配置文件，Android 引擎呈现的特定颜色可能看起来与 Photoshop 呈现的相同特定颜色不同）。

我希望这有任何意义。祝你好运！

* * *

## 回答 #2

> 赞同：125
> 
> 时间：2016-01-11T16:18:50.263

## 肖像模式

MDPI 为 320x480 dp = 320x480px (1x)

LDPI 为 0.75 x MDPI = 240x360px

HDPI 为 1.5 x MDPI = 480x720px

XHDPI 是 2 x MDPI = 640x960px

XXHDPI 是 3 x MDPI = 960x1440px

XXXHDPI 是 4 x MDPI = 1280x1920px

## 风景模式

MDPI 为 480x320 dp = 480x320px (1x)

LDPI 为 0.75 x MDPI = 360x240px

HDPI 是 1.5 x MDPI = 720x480px

XHDPI 是 2 x MDPI = 960x640px

XXHDPI 是 3 x MDPI = 1440x960px

XXXHDPI 是 4 x MDPI = 1920x1280px

编辑：

如果您在 2019 年以上阅读本文，我建议您使用[Lottie作为启动画面](https://github.com/airbnb/lottie-android)

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2014-04-23T02:51:22.460

**肖像**

低密度脂蛋白：200x320 像素

MDPI：320x480像素

HDPI：480x800 像素

XHDPI：720px1280px

**景观**

低密度脂蛋白：320x200 像素

MDPI：480x320像素

HDPI：800x480像素

XHDPI：1280x720像素

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-01-20T10:34:14.517

我已经搜索了制作 9-patch 图像的最佳和最简单的答案。现在制作 9 个补丁图像是最简单的任务。

从[***https://romannurik.github.io/AndroidAssetStudio/index.html***](https://romannurik.github.io/AndroidAssetStudio/index.html)，您可以一键制作所有分辨率的 9 补丁图像 - XHDPI、HDPI、MDPI、LDPI。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-12-05T06:56:56.253

使用 PNG 并不是一个好主意。实际上，就性能而言，它的成本很高。您可以使用可绘制的 XML 文件，例如[Facebook 的 background](http://nishantcshah.blogspot.in/2013/12/facebook-android-app-splash-screen.html)。

这将帮助您平滑和加快您的性能，并为徽标使用 0.9 补丁图像。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-09-03T15:59:07.540

```
Density buckets

LDPI    120dpi    .75x
MDPI    160dpi    1x
HDPI    240dpi    1.5x
XHDPI   320dpi    2x
XXHDPI  480dpi    3x
XXXHDPI 640dpi    4x

px / dp = dpi / 160 dpi 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-10-27T10:51:54.380

就我而言，我在 style.xml 中使用了可绘制列表。使用可绘制图层列表，您只需要一个适用于所有屏幕尺寸的 png。

```
<resources xmlns:tools="http://schemas.android.com/tools">
<!-- Base application theme. -->
<style name="AppTheme" parent="android:Theme.Holo.Light.DarkActionBar">
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowBackground">@drawable/flash_screen</item>
    <item name="android:windowTranslucentStatus" tools:ignore="NewApi">true</item>
</style> 
```

和可绘制文件夹中的 flash_screen.xml。

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@android:color/white"></item>
    <item>
        <bitmap android:src="@drawable/background_noizi" android:gravity="center"></bitmap>
    </item>
</layer-list> 
```

“background_noizi”是drawable文件夹中的一个png文件。我希望这有帮助。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-10-04T03:47:46.370

前段时间我创建了一个支持尺寸的excel文件
希望这对某人有帮助

老实说，我失去了这个想法，但它将另一个屏幕功能称为尺寸（不仅仅是密度）
[https://developer.android.com/guide/practices/screens_support.html](https://developer.android.com/guide/practices/screens_support.html)
如有错误请告知

[![](../Images/8dcf4b14a3fe614c88be89f2fe297aa8.png)](https://i.stack.imgur.com/cxZbX.png)

[链接1：尺寸.xlsx](http://my-files.ru/zs2m5b)

[链接2：尺寸.xlsx](http://www.fayloobmennik.net/6610416)

[![](../Images/51ca7b32d45e7441f5d107575422000b.png)](https://i.stack.imgur.com/3PWLV.png)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-03-06T05:21:36.980

**编辑的解决方案将使您的 SplashScreen 在所有 API（包括 API21 到 API23）上看起来都很棒**

如果您只针对 APIs24+，您可以直接在其 xml 文件中按比例缩小矢量可绘制对象，如下所示：

```
<vector xmlns:android="http://schemas.android.com/apk/res/android" xmlns:aapt="http://schemas.android.com/aapt"
android:viewportWidth="640"
android:viewportHeight="640"
android:width="240dp"
android:height="240dp">
<path
    android:pathData="M320.96 55.9L477.14 345L161.67 345L320.96 55.9Z"
    android:strokeColor="#292929"
    android:strokeWidth="24" />
</vector> 
```

在上面的代码中，我将在 640x640 画布上绘制的可绘制对象重新缩放为 240x240。然后我就像这样把它放在我的启动画面中，效果很好：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" android:opacity="opaque"
android:paddingBottom="20dp" android:paddingRight="20dp" android:paddingLeft="20dp" android:paddingTop="20dp">

<!-- The background color, preferably the same as your normal theme -->
<item>
    <shape>
        <size android:height="120dp" android:width="120dp"/>
        <solid android:color="@android:color/white"/>
    </shape>
</item>

<!-- Your product logo - 144dp color version of your app icon -->
<item
    android:drawable="@drawable/logo_vect"
    android:gravity="center">

</item>
</layer-list> 
```

我的代码实际上只是在底部的图片中绘制三角形，但在这里你可以看到你可以用它来实现什么。与使用位图时得到的像素化边缘相比，分辨率终于很好了。所以一定要使用可绘制的矢量（有一个名为 vectr 的网站，我用它来创建我的网站，而无需下载专门的软件）。

**编辑以使其也适用于 API21-22-23**

虽然上述解决方案适用于运行 API24+ 的设备，但在将我的应用程序安装到运行 API22 的设备后，我感到非常失望。我注意到启动画面再次试图填满整个视图并且看起来像狗屎。撕了半天的眉毛后，我终于凭借纯粹的意志力强行解决了。

您需要创建第二个文件，其名称与 splashscreen xml 完全相同（比如说 splash_screen.xml），并将其放入您将在 res/ 文件夹中创建的 2 个名为 drawable-v22 和 drawable-v21 的文件夹中（以便您查看它们必须将您的项目视图从 Android 更改为 Project）。这用于告诉您的手机在相关设备运行与可绘制文件夹中的 -vXX 后缀相对应的 API 时重定向到放置在这些文件夹中的文件，[请参阅此链接](https://developer.android.com/guide/topics/manifest/uses-sdk-element?hl=de#ApiLevels)。将以下代码放在您在这些文件夹中创建的 splash_screen.xml 文件的图层列表中：

```
<item>
<shape>
    <size android:height="120dp" android:width="120dp"/>
    <solid android:color="@android:color/white"/>
</shape>
</item>

<!-- Your product logo - 144dp color version of your app icon -->
<item android:gravity="center">
    <bitmap android:gravity="center"
        android:src="logo_vect"/>

</item> 
```

[![这些是文件夹的外观](../Images/1e8aa205e6077eb1afb4f112b836212b.png)](https://i.stack.imgur.com/hJPNc.png)

由于这些 API 的某些原因，您必须将您的可绘制对象包装在位图中以使其工作并喷射最终结果看起来相同。问题是您必须使用带有附加可绘制文件夹的方法，因为 splash_screen.xml 文件的第二个版本将导致您的启动屏幕在运行 API 高于 23 的设备上根本不显示。您可能还必须放置splash_screen.xml 的第一个版本到 drawable-v24 中，因为 android 默认为它可以找到资源的最近的 drawable-vXX 文件夹。希望这可以帮助

[![我的闪屏](../Images/9fb4ef5a792caf12c994ff0b4e00eefb.png)](https://i.stack.imgur.com/sSNX0.png)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-06-29T06:57:21.653

[![](../Images/b2c326bb006716b5194cb58d2c43677e.png)](https://i.stack.imgur.com/zulhT.png)

** 如果您正在寻找各种主要设备的屏幕详细信息 **

[去material.io](https://material.io/devices/)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-11-21T19:44:16.533

根据[Lucas Cerro 的这个答案，我使用](https://stackoverflow.com/a/15744389/9494020)[Android 文档](https://developer.android.com/training/multiscreen/screendensities.html#TaskProvideAltBmp)中的比率计算尺寸，使用答案中的基线。我希望这可以帮助其他人来这篇文章！

*   xxxlarge (xxxhdpi): 1280x1920 (4.0x)
*   xxlarge (xxhdpi)：960x1440 (3.0x)
*   xlarge (xhdpi): 640x960 (2.0x)
*   大 (hdpi)：480x800 (1.5x)
*   中 (mdpi)：320x480（1.0x 基线）
*   小 (ldpi)：240x320 (0.75x)

# jquery - 使用 wrap="hard" 序列化 textarea 不会换行

> ID：10574365
> 
> 赞同：2
> 
> 时间：2012-05-13T18:56:01.153
> 
> 标签：jquery, serialization, textarea, word-wrap

我有一个带有“硬”包装的文本区域：

```
<textarea name="text" cols=5 wrap="hard">a b c d e f</textarea> 
```

当我用 jquery 序列化这个 textarea 时，我得到：

```
text="a+b+c+d+e+f" 
```

[这是一个小提琴。](http://jsfiddle.net/gTWhC/)问题是我想从 textarea 中获取换行符。

如果我真的提交了表单，那么在服务器上我会看到表单带有正确的换行符。但我希望能够在无需重新加载页面的情况下获得换行符。我已经尝试过使用[jquery 表单插件](http://jquery.malsup.com/form/)，但没有成功。而且我尝试过让我的表单[以 iframe 为目标](https://stackoverflow.com/questions/10568876/html-get-wrapped-text-from-textarea)，但这有其自身的问题。

**是否可以在不重新加载页面的情况下从文本区域获取换行符？**

# node.js - 在 Express (node.js) 中动态限制上传文件大小

> ID：10574368
> 
> 赞同：1
> 
> 时间：2012-05-13T18:56:46.077
> 
> 标签：node.js, upload, express

我正在开发一个简单的应用程序，允许用户上传他们的内容。我想限制 Express 接受的文件大小。我知道我可以使用

```
app.use(express.limit('2mb')); 
```

但我想**动态更改限制**。某些用户会有更高的限制。

最好的解决方案是首先检查`content-length`标题，然后如果文件大小低于限制，则开始解析上传，但 Express 会自动将文件上传保存到磁盘（/tmp 目录）。因此，如果有人发送 1GB 文件，即使我不想允许，该文件也会被解析并保存到磁盘。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T19:30:16.443

在添加bodyParser()之前添加limit()，例如：

```
app.use(express.limit(100000));
app.use(express.bodyParser({uploadDir: '/tmp', keepExtensions:true})); 
```

这样上传的文件太大时不会保存在 /tmp 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T03:13:38.257

Express 基本上使用 connect 的 limit() 中间件。

因此，您可能想编写自己的中间件，而不是使用默认的 limit()。

[您可以从这里https://github.com/senchalabs/connect/blob/2.24.2/lib/middleware/limit.js#L40](https://github.com/senchalabs/connect/blob/2.24.2/lib/middleware/limit.js#L40)查看 limit() 的源代码开始

# ruby-on-rails - RoR + Redis Master - 从属

> ID：10574369
> 
> 赞同：1
> 
> 时间：2012-05-13T18:57:08.983
> 
> 标签：ruby-on-rails, redis, high-availability

我正在使用 RoR 和 Redis 破解应用程序。

Redis 基础架构将有一个主 (Writer) 和 3 个从属 (Readers)，并使用 HAProxy 作为从属的负载均衡器。

你们在这种情况下使用什么方法？

我应该有两个 Redis Client，一个到 MASTER，另一个到 SLAVE（负载均衡器）？

最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:53:51.173

我建议在 redis 连接之上使用包装器。这样，您可以透明地实现实现写入器/读取器的逻辑并使用您想要的任何场景（这可能是特定于环境的）。

这样你就可以直接调用它

```
RedisWrapper.hget(key, field) 
```

或在其上构建一个层（想想类似的东西`remodel`）。

# ruby-on-rails - 如何将文本字段视为 URL？

> ID：10574370
> 
> 赞同：0
> 
> 时间：2012-05-13T18:57:27.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个名为`Store`表列的模型`website`，它假设链接到外部网站。用户在商店网站（例如 www.newegg.com 或[http://www.newegg.com](http://www.newegg.com)）中键入内容，然后可以点击它以将其他用户发送到它。

我试过做：

```
<%= link_to store.website %> 
```

但这显然只是链接回同一页面。

如何将 text_field 或 string 列作为 URL 读取？这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T19:02:07.650

也许：

```
<%= link_to store.website, store.website %> 
```

# qt - Qt中的OpenGL glDrawBuffers()？

> ID：10574372
> 
> 赞同：4
> 
> 时间：2012-05-13T18:57:59.383
> 
> 标签：qt, opengl

Qt 中有 OpenGL 函数 glDrawBuffers(GLsizei n, const GLenum *bufs) 吗？我正在尝试将多个渲染目标传递给我的片段着色器，QtCreator 说该函数未在此范围内声明。这个想法是有一个带有两个颜色缓冲区的帧缓冲区对象，并使用片段着色器绘制到这两个缓冲区。

修复：只需将#define GL_GLEXT_PROTOTYPES 1 添加到有问题的文件中:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:52:00.867

Qt 仅提供对 OpenGL 函数的基本访问。加载着色器和纹理就是其中之一。渲染目标不是。只需使用适当的扩展加载程序库，如 GLEW。GLEW 将与 Qt 的功能很好地共存。

从 QGLWidget 派生并`glInit`在调用`glewInit`后覆盖调用`initializeGL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T13:12:48.780

我们只是花了一些时间来解决这个问题。我们在**OSX 10.8**和**Ubuntu 14.04**（抱歉没有**WINDOWS**经验）上运行 Qt 5.2.1，并使用 QGLFormat 创建了一个**OpenGL3.2**上下文。

在**OSX**中没有问题，因为所有 OpenGL3.2 函数（设置制服、绘制缓冲区等）都定义在：

```
#include "OpenGL/gl3.h" ///< already included by Qt.. so nothing to do 
```

另一方面，在**Linux**上，我们必须同时包含这**两个**：

```
#include "GL/gl.h"
#include "GL/glext.h" ///< not included by Qt!!! manually include it 
```

我们还*尝试*让我们的 QGLWidget 类从**QGLFunctions_3_2_Core**继承（这个类定义了它自己的 glDrawBuffer 等副本），但这没有用，只是导致了一个*段错误*：

```
Program received signal SIGSEGV, Segmentation fault. 0x0000000000407068 
in glGetUniformLocation (this=0xbc5820, name=0x407cd0 "view_projection", program=1) 
at /usr/include/qt5/QtGui/qopenglfunctions_3_2_core.h:1075 1075     
return d_2_0_Core->GetUniformLocation(program, name); 
```

我们还研究了上面的“#define GL_GLEXT_PROTOTYPES 1”，但这仅在我们使用*glcorearb.h*时有用（您可以在线下载此标头）。

# c# - 检查枚举标志的最佳实践

> ID：10574373
> 
> 赞同：10
> 
> 时间：2012-05-13T18:58:24.837
> 
> 标签：c#, .net, enums, enum-flags

我注意到这两种检查枚举标志的模式：

```
[Flags]
public enum PurchaseType
{
    None = 0,
    SalePrice = 2,
    RegularPrice = 4,
    Clearance = 8,
    CreditCard = 16
}

public void Test()
{
    PurchaseType type = PurchaseType.Clearance;
    type |= PurchaseType.CreditCard;

    // Practice 1
    if ((type & PurchaseType.Clearance) == PurchaseType.Clearance)
    {
        // Clearance item handling
    }

    // Practice 2
    if ((type & PurchaseType.CreditCard) != 0)
    {
        // Credit card item handling   
    }
} 
```

在检查枚举标志的两种方法中，哪一种在性能、可读性、代码健康以及我应该考虑的任何其他方面更好？

谢谢，穆罕默德

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-13T19:04:00.740

.Net 4 引入了一种[`HasFlag`](http://msdn.microsoft.com/en-us/library/system.enum.hasflag.aspx)方法来确定当前实例中是否设置了一个或多个位字段，这是迄今为止的最佳实践：

```
type.HasFlag(PurchaseType.CreditCard);  // true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T19:03:12.583

我会选择第一个：

```
if ((type & PurchaseType.Clearance) == PurchaseType.Clearance)
{
    // Clearance item item handling
} 
```

因为它清楚地表明您正在检查`Clearance`类型是否存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T19:59:14.493

我个人总是更喜欢`HasFlag`.

但是，在问题的两个选项中，我认为`!=0`更安全，因为它没有重复。如果您使用您的替代方案，那么在维护编码时更改其中一个标志而忘记更改另一个标志就太容易了。然后你最终得到这个

```
if ((type & PurchaseType.Clearance) == PurchaseType.CreditCard) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T20:45:15.107

我更喜欢`(type & PurchaseType.CreditCard) != 0`，因为如果你想检查不止一位，那么右手边就会变得很麻烦。我相信位操作只有当且仅当位被设置时，上述内容才会成立。

# node.js - 如何检索我在服务器端 (node.js) 的 jQuery.ajax() 的 `data` 属性中传递的对象？

> ID：10574374
> 
> 赞同：2
> 
> 时间：2012-05-13T18:58:42.907
> 
> 标签：node.js, jquery, express

我做了一个调用 jQuery`ajax`方法的 chrome 扩展：

**内容脚本.js**

```
[...]
$.ajax({
    "url": "http://localhost:5000/",
    "type": "PUT",
    "contentType": "application/json",
    "data": { "name": "random object" },
    "dataType": "json"
});
[...] 
```

在服务器端，我正在尝试获取`data`属性中传递的信息：

**网页.js**

```
[...]
app.put('/', function(request, response) {
    console.log(request.data);
});
[...] 
```

但我得到`undefined`了。`data`应该在服务器端（[Node.js](http://nodejs.org/) + [express.js](http://expressjs.com/) ）检索的属性中传递的对象如何？

我也尝试并在那里得到了很多东西，但没有任何东西看起来像我在属性`console.log(request)`中传递的信息......`data`

**编辑**

我最近的尝试（基于 graydsl 的回答）对上面的代码进行了以下更改：

*   `app.use(express.bodyParser());`之前添加的`app.put...`。
*   到处都变`put`了`post`
*   改为`request.data`_`request.body.data`

现在，代码在响应这样的表单时执行我想要的操作：

```
<form method="post" action="/">
    <input name="data" type="text" value="WOO HA" />
    <input type="submit" name="submit" value="submit" />
</form> 
```

但是，如果我恢复使用`post`而不是它仍然会失败`put`（并且浏览器`http://localhost:5000/?data=WOO+HA&submit=submit`由于某种原因而结束）

使用 ajax进行`put`ting（或ing）时也会失败（参见上面的代码）。`post`当我尝试使用 ajax 时，我在服务器上得到了这个：

```
SyntaxError: Unexpected token ILLEGAL
    at Object.parse (native)
    at IncomingMessage.<anonymous> (/home/shawn/.node_libraries/.npm/connect/1.8.7/package/lib/middleware/bodyParser.js:135:16)
    at IncomingMessage.emit (events.js:61:17)
    at HTTPParser.onMessageComplete (http.js:133:23)
    at Socket.ondata (http.js:1019:22)
    at Socket._onReadable (net.js:683:27)
    at IOWatcher.onReadable [as callback] (net.js:177:10) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T08:13:01.817

1.  正如其他人提到的，你现在正在做的，你需要使用 bodyParser` 中间件。

2.  如果请求正文的内容类型为“application/json”，`bodyParser`则将其解析为一个对象，该对象位于`request.body`. 因此，在您的情况下`request.body.name`应该是“随机对象”。

我认为你（和之前的几个响应者）在精神上挂断了这样一个事实，即 jQuery 的`ajax`方法使用键名“数据”作为请求正文中要发送的对象（序列化为 JSON），并神奇地滑向假设服务器端处理请求的任何东西也将通过“数据”的名称调用该对象。两者之间没有任何联系。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T20:47:59.070

你必须使用`req.body.data`. 像这样的东西应该工作：

```
app.post('/', function(req, res) {
  console.log(req.body.data);
  res.redirect('/');
}); 
```

看看这个链接：[bodyParser](http://www.senchalabs.org/connect/bodyParser.html)

我希望我能帮助你！:)

**编辑：**刚刚找到了一个很好的使用 $.ajax 的库，它被称为：[superagent](https://github.com/visionmedia/superagent)。你可以考虑试一试。看起来很有希望。:)

# 更新

问题在于您的 jquery 代码而不是 node.js 代码。您不能在对象的`data`属性中发送`settings`对象，您必须先将数据对象*字符串化。*您可以使用`json2.js`从令人敬畏的*D 到 - ouglas Crockford*：[json2.js](https://github.com/douglascrockford/JSON-js "json2链接")

包含该库后，以下代码应为您提供所需的结果：

```
$().ready(function() {

    var data = {
        data: "My name is",
        name: "Slim Shady"
    };

    stringifiedData = JSON.stringify(data);

    $.ajax({
        "url": "http://127.0.0.1:3000/",
        "type": "PUT",
        "contentType": "application/json",
        "data": stringifiedData,
        "dataType": "json"
    });
}); 
```

在 app.js 中：

```
app.put('/', function(req, res) {
    console.log(req.body.data + "... " + req.body.name);
    res.redirect('/');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T19:01:49.670

jquery 数据属性在发送到服务器之前被转换为查询字符串或发布数据。要检索它，请使用 node.js 解码 GET 和 POST 参数。

你说你使用 express.js。在 express.js 中，如果您`data`像这样传递：`{ EmployeeName : "George" }`那么，在 express.js 中，`request.params.EmployeeName`将包含“George”。

# macos - 如何在Mail.app中运行的applescript中使用钥匙串中的密码？

> ID：10574381
> 
> 赞同：6
> 
> 时间：2012-05-13T19:00:50.200
> 
> 标签：macos, applescript, keychain, apple-mail

我正在尝试设置一个applescript，对我的gmail帐户执行（通过python imaplib ...）某些操作（在Mail.app中没有配置IMAP，只有POP）。

为此，脚本需要使用我的密码登录。如果不是出于安全考虑，我可以简单地将我的密码硬编码到 python 脚本中......

有没有一种方法可以让 Mail.app 内部触发的这样一个 applescript（例如通过规则）可以使用我存储在钥匙串中的密码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T20:33:16.427

以下是从我的脚本库中的脚本中复制出来的...

-- 如果您需要在脚本中使用密码，您可以使用钥匙串来存储密码并让脚本检索它。这样您的密码就会受到保护，因为您不需要在脚本中以明文形式存储密码。

-- 创建密码项- 打开 Keychain Access 应用程序并选择左侧栏中的钥匙串。然后单击文件>新密码项...，为其命名，将您的帐户短名称输入帐户，然后输入密码。在密码列表中突出显示它并获取有关它的信息。在 Attributes 按钮下输入它的种类作为通用键。之所以选择它，是因为它们的数量不多，而且搜索速度要快得多。

-- 注意：在 10.7 中，苹果删除了钥匙串脚本，因此我们现在使用安全命令行工具

```
getPW("name of keychain item")

on getPW(keychainItemName)
    do shell script "security 2>&1 >/dev/null find-generic-password -gl " & quoted form of keychainItemName & " | awk '{print $2}'"
    return (text 2 thru -2 of result)
end getPW 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T20:40:03.343

有这样一种方法，称为*Keychain Access Scripting*，Apple 在 OS X 10.7 中弃用了它，从 AppleScript 中删除了必要的扩展。**但是**，您可以使用[TextMate 博客上详述](http://blog.macromates.com/2006/keychain-access-from-shell/)`security`的shell 实用程序（请务必阅读评论——其中有一些问题），或者，我建议您使用第三方替代 Apple 的组件， Daniel Jalkut 出色的*[可用钥匙串脚本](http://www.red-sweater.com/blog/2035/usable-keychain-scripting-for-lion)*应用程序。安装后，AppleScript 的以下部分将检索您的密码（假设帐户名称为“GMail”）：

```
tell application "Usable Keychain Scripting" to get password of first generic item of current keychain whose account is "GMail" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-16T16:22:03.193

我用这个

```
# Replace %ACCOUNT_NAME% with account name of Keychain item
get_pw () {
  security 2>&1 >/dev/null find-generic-password -ga "%ACCOUNT_NAME%" \
  | sed 's/password: "\(.*\)"/\1/'
}
PASS=$(get_pw) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-14T13:34:33.797

一个更新的答案，因为我认为这是以前不可用的。`security`现在有一个`-w`选项，只输出密码而不需要解析输出。

这在 python 中为我们提供了这个解决方案：

```
pw = subprocess.check_output(["security", "find-generic-password", "-wl", "MY_KEYCHAIN_ID"]) 
```

这仍然会触发输入用户密码的提示，与其他解决方案相同。

# windows - 我在哪里可以获得 dll 来在 Windows 上的 Qt 中部署应用程序？

> ID：10574384
> 
> 赞同：1
> 
> 时间：2012-05-13T19:01:06.123
> 
> 标签：windows, qt, dll, runtime

我的应用程序从 Qt Creator 成功运行，但在资源管理器中它会警告缺少 dll 等等。我在包含目录的 .exe 中复制了 QtCore4.dll、QtGui4.dll，但它滥用了与 vs 运行时相关的内容！ [截屏](http://i.stack.imgur.com/sEjh6.png)

（这也是QtCore4.dll、QtGui4.dll合适的问题，因为有些版本的大小不同，我认为它们的组合可能会导致错误）

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:15:51.140

找出 Qt 应用程序需要哪些 DLL 文件的一种方法如下：

1.  从 Qt Creator 启动应用程序。
2.  打开[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653)（由 Microsoft 提供）并从列表中选择您的应用程序进程。
3.  单击 View->Lower pane view->DLLs 以查看您的应用程序正在使用哪些 DLL。

DLL 视图还显示 DLL 的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:28:56.930

此问题与应用程序的依赖关系无关。看起来您的应用程序正在静态嵌入（包含）C 运行时库，而（同时）此应用程序的某些依赖项使用另一种类型的与 C 运行时库的绑定。

# python - 重定向后检索 cookie

> ID：10574391
> 
> 赞同：1
> 
> 时间：2012-05-13T19:01:57.430
> 
> 标签：python, cookies

```
class ...
self.response.headers.add_header('Set-Cookie','user_id = %s'% id_and_hash)
        self.redirect("/app/login")

class ThanksHandler(webapp2.RequestHandler):
    def get(self):
        if 'user_id' in self.request.cookies:
            self.response.out.write('user_id')
        else:
            self.response.out.write("wrong") // what i am getting 
```

我有这个 cookie（我在一个 cookie 管理器中看到）

```
name: user_id
content: 30|a9bdc98e952c0e787aaf0e5466809eea71635d38446d30a9f71f2d15e99fa701 
```

好吧，基本上问题是我无法检索已初始化的cookie。有什么理由吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T05:13:40.067

当直接使用“Set-Cookie”HTTP 标头设置 cookie 时，您还必须注意 cookie 属性（取决于您希望如何使用 cookie）。

在这种情况下，例如在路径中设置 cookie，`/app/auth`然后重定向到`/app/login`. 如果您没有明确指定浏览器假定的 cookie 路径`/app/auth`，因此在请求时不会发送 cookie `/app/login`。此行为在[RFC 6265](https://www.rfc-editor.org/rfc/rfc6265)中指定（这比我在评论中引用的更新，但现在确切的算法包含在第 5.1.4 节中）。

要设置路径（或任何其他 cookie 属性），您可以附加以分号分隔的名称=值对的列表。在这种情况下，您希望将路径设置为`/`（可能与 不同`/app`）：

```
self.response.headers.add_header('Set-Cookie','user_id=%s; Path=/'% id_and_hash) 
```

当然，大多数库/框架已经为“Set-Cookie”标头提供了一个包装器。在“webapp2”的情况下，您可以设置 cookie [`response.set_cookie`](http://webapp-improved.appspot.com/guide/response.html#setting-cookies)：

```
self.response.set_cookie('user_id', id_and_hash) 
```

它会自动设置路径，`/`因此您不必担心它（它也可以正确转义值）。

# php - facebook apprequests：发生错误。请稍后再试

> ID：10574395
> 
> 赞同：0
> 
> 时间：2012-05-13T19:03:06.327
> 
> 标签：php, javascript, jquery, facebook, facebook-graph-api

我正在使用此代码向我的 Facebook 应用程序中的用户发送应用程序请求

```
<script src="https://connect.facebook.net/en_US/all.js"></script>

    <script type="text/javascript">

     window.fbAsyncInit = function() {
     FB.init({
         appId: '39764546513545342',
         status: true,
         cookie: true,
         oauth: true
     });
 };

           function invitetoevent(rid)
               {
              FB.ui({
                   method: 'apprequests',
                   message: 'i\'ll see you in this event.',
            title: 'Lets Go!.',
            filters: ['app_users'],
            max_recipients: 25,
                },
                 function (response) {
                        if (response.request && response.to) 
                            {
                //actions
                            } 
                        else 
                        {
                            //alert('canceled');
                        }
});

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T21:20:34.037

看起来您使用过滤器的方式是错误的。

**[演示](http://www.fbrell.com/saved/f2a665342d3c1dfd4882ca4c003415b9)**

PS：假设你的回调函数是正确的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T05:33:39.413

好吧，这没有任何意义，但是这段代码可以正常工作。

我从上一页删除了 facebook 脚本加载并使用了此代码。

```
window.fbAsyncInit = function() {
FB.init({
  appId      : '397334655643214', // App ID
  channelUrl : '//www.itradegame.com/channel.html', // Channel File
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true  // parse XFBML
}); 
```

# boost - 在 Boost.Test 中，如何获取当前测试的名称？

> ID：10574400
> 
> 赞同：11
> 
> 时间：2012-05-13T19:03:31.397
> 
> 标签：boost, boost-test

中`Boost.Test`，如何获取当前自动测试用例的名称？

例子：

```
#include <boost/test/unit_test.hpp>
BOOST_AUTO_TEST_CASE(MyTest)
{
  std::cerr << "Starting " << test_name << std::endl;
  // lots of code here
  std::cerr << "Ending " << test_name << std::endl;
} 
```

在示例中，我希望变量`test_name`包含“MyTest”。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-23T09:23:38.783

为此目的可以调用一个未记录的*函数。以下行会将当前测试的名称刷新为`cerr`：

```
#include <boost/test/framework.hpp>

...

std::cerr << boost::unit_test::framework::current_test_case().p_name 
          << std::endl; 
```

但是请注意，在参数化测试的情况下，使用此 API 不会刷新参数。

您可能还对[测试检查点](http://www.boost.org/doc/libs/1_60_0/libs/test/doc/html/boost_test/test_output/checkpoints.html)感兴趣**（这似乎是您想要做的。）

```
#include <boost/test/included/unit_test.hpp>

...

BOOST_AUTO_TEST_CASE(MyTest)
{
  BOOST_TEST_CHECKPOINT("Starting");
  // lots of code here
  BOOST_TEST_CHECKPOINT("Ending");
} 
```

**编辑**

* 该`current_test_case()`功能现已记录在案，请参阅[官方 Boost 文档](http://www.boost.org/doc/libs/1_60_0/libs/test/doc/html/boost/unit_test/framework/current_test_case.html)。

**`BOOST_TEST_CHECKPOINT`以前称为`BOOST_CHECKPOINT`. 请参阅[Boost 更改日志 (1.35.0)](http://www.boost.org/doc/libs/1_35_0/libs/test/doc/components/test_tools/reference/deprecated.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-04T20:43:30.553

[关于套件名称的另一个问题](https://stackoverflow.com/questions/18491113/get-boost-test-test-suite-name-inside-a-test-case)提供了一种提取名称的方法，而不仅仅是打印它：

```
auto test_name = std::string(boost::unit_test::framework::current_test_case().p_name) 
```

# python - 基于 Python 树的聊天机器人

> ID：10574403
> 
> 赞同：4
> 
> 时间：2012-05-13T19:03:44.613
> 
> 标签：python, artificial-intelligence

我正在使用 Python 开发基于文本的 RPG，但我被 NPC 困住了。我需要一些有点像树的东西。例如：

```
博特：你好。
1\. 你好，你叫什么名字？
2\. 你好，你住在哪里？
> 2
玩家：你住在哪里？
Bot：这是一个令人毛骨悚然的问题。你为什么要问？
1\. 我只是好奇。
2\. 没关系。
3.隐藏你的孩子，隐藏你的妻子
> 1
玩家：我只是好奇。
博特：好的。
1\. 你喜欢奶酪吗？
2.再见。
> 1
玩家：你喜欢奶酪吗？
博特：是的！我爱奶酪。

```

您所做的每个选择都会分支到其他选择，也就是如果用户对第一个问题回答“1”，机器人会回答“我的名字是 Bob。你的名字是什么？”

我的游戏的设计方式使得关卡编辑器不是不可能的前景（您可以访问的每个地方都作为键存储在字典中，然后是一个包含所有内容的元组[我有一个商店类，一个敌人类，一个“门户”类，很快又是一个 NPC 类]）。所以我希望以某种方式创建它，这样我就可以将它全部保存在我的 NPC 类存储的变量中（而不是一堆“if”语句）

澄清一下，我并不是要别人为我写代码，我只是不确定如何解决这个问题。

* * *

### 对我所需要的内容的*简短*描述：

树状结构，以一个字符串开头，并带有许多从它“分支”的字符串

这些字符串中的每一个都有更多的“分支”

与此元组和元组元组的区别在于，它们需要一个字符串来分支，而不是立即拆分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T19:22:41.600

这与[决策树](https://en.wikipedia.org/wiki/Decision_tree)密切相关，但玩家是做出选择的人，因此在 AI 意义上它并不完全是一个。不过，您可以自己定义具有这些属性的数据结构

```
class TreeNode:
    def __init__(self,parent,children,overview_text,direction_text):
        #... set the variables ...
        # question_text is a string

    def print_question(self):

        print overview_text
        for child in children:
            print direction_text

    # add some accessor methods
    def add_child(self,child): 
        ... 
```

然后，您的 NPC 可以通过特定的 TreeNode 跟踪他们的状态 - 称之为 current_question - 并且整个对话都在 TreeNodes 树中 - 称之为对话。

```
class NPC:
     def __init__(self,dialogue):
         #... set the variables ...
         self.current_question = None

     def converse(self):
         #.... do some stuff....
         self.current_question = users_choice; 
```

这样，您可以根据需要中断对话。

请注意，TreeNode 可能用词不当，因为您可能希望对话代表一个图形，而不仅仅是一棵树。例如，许多 RPG 将具有可以循环重复信息的对话路径。上面的数据结构不能这样做，因为overview_text（概念上是节点的一部分）和direction_text（概念上是边的一部分）被视为一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:52:43.617

您需要一个有向图，其中机器人语句是节点，玩家响应是弧线。

您可能还希望弧具有一些内置智能 - 根据玩家状态启用/禁用自身（即，如果玩家没有蓝色钥匙，则“解锁蓝色门”不是可用选项）。

要遵循的示例代码。

# android - 我找不到安卓主页图标

> ID：10574404
> 
> 赞同：4
> 
> 时间：2012-05-13T19:03:52.020
> 
> 标签：android, xml, icons, png

我从官方 Android 开发者网站下载了图标包。我想放入我的菜单标准主页图标，但我找不到它 Oo

我在哪里可以在 .png 中找到这个图标？[http://i.stack.imgur.com/Pa1TS.png](http://i.stack.imgur.com/Pa1TS.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T19:12:21.240

它在 SDK 中，例如：

`platforms/android-8/data/res/drawable-hdpi/ic_menu_home.png`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-31T13:50:50.330

您需要使用**剪贴画在****Drawables**中创建一个新图像（在剪贴画库中，您可以找到 2 个房子图标）

 **然后像使用任何其他可绘制对象一样使用该可绘制对象：

```
R.drawable.ic_home 
```**

# ruby-on-rails - Gemfile 中的错误，并且 Bundler 无法继续

> ID：10574405
> 
> 赞同：18
> 
> 时间：2012-05-13T19:03:53.897
> 
> 标签：ruby-on-rails

我刚刚设置了我的 mac 进行开发，并且之前使用了这个确切的 gemfile，它工作得很好。我不确定我做错了什么。

```
Victorias-MacBook-Pro:sample_app Victoria$  bundle --without production
/Users/Victoria/Sites/sample_app/Gemfile:38:in `evaluate': compile error
/Users/Victoria/Sites/sample_app/Gemfile:28: syntax error, unexpected ':', expecting kEND
  gem 'cucumber-rails', '1.2.1', require: false
                                         ^ (SyntaxError)
       /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/definition.rb:18:in `build'
       /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler.rb:135:in `definition'
       /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/cli.rb:220:in `install'
       /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/vendor/thor/task.rb:22:in `send'
       /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/vendor/thor/task.rb:22:in `run'
       /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/vendor/thor/invocation.rb:118:in `invoke_task'
       /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/vendor/thor.rb:263:in `dispatch'
       /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/lib/bundler/vendor/thor/base.rb:386:in `start'
       /Library/Ruby/Gems/1.8/gems/bundler-1.1.3/bin/bundle:13
       /usr/bin/bundle:19:in `load'
       /usr/bin/bundle:19
There was an error in your Gemfile, and Bundler cannot continue. 
```

这是宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem 'jquery-rails', '2.0.0'
gem 'bootstrap-sass', '2.0.0'
gem 'bcrypt-ruby', '3.0.1'
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.5'

group :development, :test do
  gem 'mysql2'
  gem 'rspec-rails', '2.9.0'
  gem 'guard-rspec', '0.5.5'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

group :test do
  gem 'capybara', '1.1.2'
  gem 'factory_girl_rails', '1.4.0'
  gem 'cucumber-rails', '1.2.1', require: false
  gem 'database_cleaner', '0.7.0'
  gem 'guard-spork', '0.3.2'  
  gem 'spork', '0.9.0'
  # gem 'rb-fsevent', '0.4.3.1', require: false
  # gem 'growl', '1.0.3'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-13T19:10:05.137

您正在运行 Ruby 1.8，并且语法`attribute:`需要 ruby​​ 1.9。你需要改变

```
gem 'cucumber-rails', '1.2.1', require: false 
```

至

```
gem 'cucumber-rails', '1.2.1', :require => false 
```

或者安装 Ruby 1.9（可能使用 RVM 或 rbenv）并`bundle install`再次运行。如果它是一个新项目，这将是一个更好的选择。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-05-29T17:32:23.400

更新我的 Ruby/Rails 环境后，我遇到了同样的错误。

`gem update bundler`解决它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-17T18:47:37.673

我在使用 rvm 时遇到了类似的问题。这对我有用：

检查您在 rvm 中使用的 Rails 版本（在终端中）： ruby​​ -v （在我的情况下，打开了一个新终端，版本设置为 ruby​​ 1.8.7，您的可能不是）

切换到正确的 ruby​​ 版本（在我的情况下应该是 ruby​​ 2.1.1，你的可能不是）：rvm 2.1.1（这会将 ruby​​ 版本设置为 2.1.1，替换为你项目的 ruby​​ xxx）

尝试重新运行捆绑检查：捆绑检查

你应该得到：Gemfile 的依赖得到满足

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-19T15:58:42.383

上面提到的答案对我不起作用，但在 Gemfile 中注释掉 capistrano gems 可以。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-20T21:32:12.420

如果您使用的是 RVM，请检查您使用的是哪个 gemset `rvm current`：.

例如，如果它显示`system`，您可能需要选择正确的 gemset（我做了）。`rvm list gemsets`如果您不记得它叫什么，请使用，然后使用`rvm use [correct gemset]`.

# android - 消息活动的最佳实践

> ID：10574410
> 
> 赞同：0
> 
> 时间：2012-05-13T19:05:02.743
> 
> 标签：android

消息视图是否有一些android活动，例如whatsapp和android SMS如何显示消息（甚至是谈话盒节目）？

我的意思是我的消息在左侧，而我伙伴的消息在屏幕的右侧？

![在此处输入图像描述](../Images/47d0bda4cfa8d10cf3fc7eb80b034896.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:12:40.710

你会做的是一个列表视图，它的项目提供不同的布局。

例如消息的额外布局：

1.  是你写的，
2.  别人写的，
3.  条目中包含有关对话的信息

如果您知道如何处理 listview 和 listadapter，那么构建起来真的不难。

也是好习惯！

# css - 页面顶部和页面上的第一个 div 之间的气隙

> ID：10574414
> 
> 赞同：2
> 
> 时间：2012-05-13T19:05:23.797
> 
> 标签：css, html, gaps-in-visuals

这是示例html：

```
<style type="text/css">
.column
{
float: left;
width:33.3%;
}

#container
{
text-align: center; 
width:100%;
}

.clearfix 
{
display: inline-block; 
}
</style>
<div id="container" class="clearfix">
      <div class="column">left</div>
      <div class="column">middle</div>
      <div class="column">right</div>
</div> 
```

我想知道为什么在这种情况和类似的情况下，大多数（所有？）浏览器的页面顶部和包含文本的 div 之间存在间隙。我知道我可以做一个“顶部：-y px”，但我知道我做错了什么......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T19:10:29.163

一些（大多数）浏览器会添加默认的内边距、边距和边框，除非您另外指定。确保通过执行以下操作来防止这种情况：

> html, body { 边距: 0px; 填充：0px；边框：0px；}

然后按照你的条件从那里拿走它。这 [是默认浏览器行为的解释](http://webdesign.about.com/od/css/a/master_stylesht.htm)。

# jquery - 隐藏全屏 HTML5 jQuery 幻灯片的缩略图（用于初始化幻灯片的纯文本链接）

> ID：10574416
> 
> 赞同：1
> 
> 时间：2012-05-13T19:05:49.900
> 
> 标签：jquery, html, lightbox, fullscreen, slideshow

我已经成长为非常喜欢这个全屏 HTML5/jQuery 幻灯片：

[http://eikes.github.com/jquery.fullscreen.js/](http://eikes.github.com/jquery.fullscreen.js/)

与大多数灯箱/画廊幻灯片一样，会显示一组缩略图，用户可以单击其中任何一个来开始幻灯片放映。缩略图集等于幻灯片中将显示的图像数量。

是否可以***根本不***显示缩略图？我可以只显示一个***开始***幻灯片的文本链接吗？

[Lightbox 2](http://lokeshdhakar.com/projects/lightbox2/)的标记如下所示：

```
<a href="images/image-1.jpg" rel="lightbox[roadtrip]">image #1</a>
<a href="images/image-2.jpg" rel="lightbox[roadtrip]">image #2</a>
<a href="images/image-3.jpg" rel="lightbox[roadtrip]">image #3</a> 
```

它类似于我前面提到的“ [jQuery HTML5 全屏幻灯片”。](http://eikes.github.com/jquery.fullscreen.js/)看起来我只需将文本放在锚标签内，而不是`img`显示缩略图的常用标签，就可以轻松地拥有纯文本链接。

***现在是真正的问题：***我可以隐藏其他两个链接并只显示一个吗？这样会显示一个链接，但幻灯片仍然会拉出三个图像。我曾想过通过`display:none`添加链接来使用 css，但这似乎不是正确的做法。还有其他用css在视觉上隐藏它的方法，但我想也许用javascript会有更好的方法。不幸的是，我对 javascript 没有那么丰富的经验。

这是我运行[jQuery HTML5 Fullscreen Slideshow的](http://eikes.github.com/jquery.fullscreen.js/)[测试站点](http://test.davewhitley.com/not-wp/html5fullscreen/)。出于某种原因，它需要在锚标签内初始化幻灯片。`img`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:43:45.710

你已经有了 jQuery，为什么不使用它的`hide()`功能：[http](http://api.jquery.com/hide/) ://api.jquery.com/hide/ 看起来你可以挂钩开始和停止显示事件，所以如果不让它们可见是个问题，你可以分别取消隐藏和隐藏。

但是，没有理由`display: none`不能通过内联 css 或 css 文件在锚点上使用。这似乎完全合理。

# postgresql - PostgreSQL 查询不使用索引

> ID：10574417
> 
> 赞同：6
> 
> 时间：2012-05-13T19:06:31.553
> 
> 标签：postgresql, indexing

我有一个非常简单的数据库模式，它在以下列上有一个多列 b 树索引：

```
PersonId, Amount, Commission 
```

现在，如果我尝试使用以下查询选择表：

```
explain select * from "Order" where "PersonId" = 2 AND "Commission" > 3 
```

pg 正在扫描索引并且查询非常快，但是如果我尝试以下查询：

```
explain select * from "Order" where "PersonId" > 2 AND "Commission" > 3 
```

即使存在索引，它也会进行顺序扫描。甚至这个查询

```
explain select * from "Order" where "Commission" > 3 
```

进行顺序扫描。有人愿意解释为什么吗？:-)

非常感谢。

**更新**

该表包含 1 亿行。我创建它只是为了测试 PostgreSQL 针对 MS SQL 的性能。该表已经 VACUUMED。我正在运行 Core I5 2500k 四核 cpu 和 8 GB 内存。

这是该查询的解释分析结果：

```
explain ANALYZE select * from "Order" where "Commission" BETWEEN 3000000 AND 3000010  LIMIT 20 

Limit  (cost=0.00..2218328.00 rows=1 width=24) (actual time=28043.249..28043.249 rows=0 loops=1)
  ->  Seq Scan on "Order"  (cost=0.00..2218328.00 rows=1 width=24) (actual time=28043.247..28043.247 rows=0 loops=1)
        Filter: (("Commission" >= 3000000::numeric) AND ("Commission" <= 3000010::numeric))
Total runtime: 28043.278 ms 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T19:43:15.763

简短的回答是，在比较各种可用计划时，根据您配置的成本计算因素和可用的最新统计数据，预计顺序扫描速度最快。从您提供的少量信息来看，计划者似乎很可能做出了正确的选择。如果您有三个单列索引，它可能能够使用位图索引扫描，特别是当要选择的行少于表中行的 10% 时。

请注意，使用您描述的索引，需要从所有行扫描整个索引，其中`"PersonId" > 2`; 除非您有很多负值，否则`"PersonId"`很可能是表格的大部分。

还要注意，如果你有一个很小的表——比如说几千行或更少，通过索引访问这些行很少会比只扫描那几行更快。计划对数据量很敏感，您获得的包含少量行的计划不太可能与您获得的包含大量行的计划相同。

事实上，如果不是选择最快的计划，那么您很有可能需要调整成本因素以更好地模拟您机器上的成本。另一种可能性是您需要在您的 autovacuum 设置中更加积极，以确保最新的统计信息可用，或者您可能需要配置更细粒度的统计信息的收集。

`EXPLAIN ANALYZE`如果您显示表描述（包括索引）、查询输出和硬件描述，人们将能够提供更具体的建议。

# git - 使用 GIT 的多层 Web 项目

> ID：10574418
> 
> 赞同：0
> 
> 时间：2012-05-13T19:06:34.827
> 
> 标签：git, multi-layer

我有许多有两层的网络基础项目。前端层和后端层。两个图层文件混合在一起。为了渲染，我无法将它们分开。所有项目的前端文件都适用于每个项目，但需要 git。所有项目的基本布局必须始终同步在一起。

```
app/
    cntrl/
        basefile.php [base]
    view/
        baseview.phtml [base]
        thisprojectfile.phtml [front] 
```

![在此处输入图像描述](../Images/87f9533d0e15cfd05a762d75388f2be5.png)

*   如果我忽略某些层 git 不适用于与当前层的开发人员进行跟踪修改。
*   如果我为每一层使用分支，则其他文件不可见以使用它们。

那么这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T22:49:15.190

你有三个选择：

1.  将所有代码保存在一个存储库中。你还没有定义你不能这样做的任何理由。
2.  使用[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)链接单独的存储库。
3.  使用[子树合并](http://git-scm.com/book/ch6-7.html)来同步单独的存储库。

选项 #2 和 #3 肯定需要更多的开发人员努力。除非您有充分的理由不这样做，否则请对所有内容使用相同的存储库。

如果您选择选项 #1，您仍然可以轻松地单独查看历史记录。例如，您可以用*“FE: foo”*标记前端提交，用*“BE: bar”*标记后端提交以识别它们。只要您始终如一地包含正确的前缀，您就可以运行：

```
git log --grep='^FE:' 
```

仅查看对前端代码的更改。

# mysql - mysql插入值，如果它不存在

> ID：10574426
> 
> 赞同：3
> 
> 时间：2012-05-13T19:08:08.820
> 
> 标签：mysql, insertion

如果不存在，我正在尝试将成分插入成分表。我正在使用以下语法：

```
INSERT INTO ingredient(Name) 
(
 SELECT 'ingName' FROM dummytable WHERE 
(SELECT count(*) FROM ingredient WHERE Name = 'ingName')=0) 
```

这似乎不起作用（0 行受影响），即使 SELECT 查询似乎返回了所需的结果（包含“ingName”的条目）。

“成分”表有 2 列：名称、id（id 自动递增）

谢谢，李

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T19:20:55.303

最好在`name`列上添加唯一索引：

```
ALTER TABLE `ingredient` ADD UNIQUE(`Name`) 
```

之后，您可以使用`INSERT IGNORE`：

```
INSERT IGNORE INTO `ingredient` ... /* anything */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T19:14:40.080

那是因为您的内部查询`SELECT count(*) FROM ingredient WHERE Name = 'ingName'`返回的值 > 0，因此上层查询`SELECT 'ingName' FROM dummytable WHERE`没有选择任何行，因此没有发生插入。

我对具有 2 列的测试表进行了相同的尝试，`name|value`并且效果很好

```
 INSERT INTO test1(name) (
    SELECT 'name' FROM test2 WHERE  
   (
      SELECT count(*) FROM test2 WHERE name = 'bilboa'
     )
   =0
   ) 
```

插入了 2 行，`name`因为这就是我在选择查询和我的测试表 2 行中选择的内容。

# facebook - 在 Facebook 页面选项卡中运行的 Facebook 应用程序中的 window.CavalryLogger 错误

> ID：10574427
> 
> 赞同：4
> 
> 时间：2012-05-13T19:08:09.023
> 
> 标签：facebook, tabs

我的应用程序在 Facebook 页面中显示为选项卡，这些应用程序运行良好。他们突然开始在选项卡中显示此输出：

/ *1336720089,176820405* /

```
if (window.CavalryLogger) { CavalryLogger.start_js(["EgxV3"]); }

__d("UFIUpdate", 
```

任何想法是怎么回事？？？

这是其中之一的链接：http: [//www.facebook.com/TweakShoes/app_132692060112327](http://www.facebook.com/TweakShoes/app_132692060112327)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T16:57:52.420

A temporary solution is to add https:// to facebook itself. This doesn't solve the problem, but it'll allow you to see your page on a per client basis.

The best fix in the longer term until facebook fixes this issue is to go to your account settings > Security > Enable secure browsing. This will enforce HTTPS wherever it can and should resolve the issue for a lot of pages you're trying to access.

Good Luck!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T17:16:13.777

昨天遇到这个问题后，我发现它与 HTML5 Boilerplate 的 script.js 文件中包含的 JS 日志包装器存在明显冲突。特别是“确保始终安全地使用 console.log”片段。将其注释掉后，FB lib 错误消失了，我的应用程序正常显示。

我没有深入研究冲突是什么，但这里是片段。如果您在页面上使用类似的东西，那么可能值得研究。

```
/* make it safe to use console.log always */
(function(b){function c(){}for(var d="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,timeStamp,profile,profileEnd,time,timeEnd,trace,warn".split(","),a;a=d.pop();){b[a]=b[a]||c}})((function(){try
{console.log();return window.console;}catch(err){return window.console={};}})()); 
```

FB 自己的记录器出现此问题可能不是巧合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T17:58:15.193

Facebook[已针对此问题打开了一个错误](http://developers.facebook.com/bugs/362855400443900)，最近将其分类为中等优先级 - 没有关于何时解决此问题的消息。

# javascript - 使用 getElementById 动态读取数组

> ID：10574431
> 
> 赞同：0
> 
> 时间：2012-05-13T19:09:04.767
> 
> 标签：javascript

我正在尝试从用户动态创建的表单中读取值并将它们插入到二维数组中。任何字段的 ID 都是动态创建的，它的值是 11、12、13 等，具体取决于表的行和列。我尝试使用 getElementByID 阅读它，但它似乎不起作用。功能如下：

```
 function readMatrix () {
        for (i = 0; i < k; i++) {
            for (j = 0; j < k; j++)
            A[i][j]=parseFloat(getElementById(ij).value, 10);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:12:26.717

首先，它是`document.getElementById(...)`- 那部分很重要，否则它找不到`getElementById`功能。

接下来，您要让它查找一个名为 的变量`ij`，这不是您想要的。您希望将两个数字连接起来，因此可以是`i*10+j`或`""+i+j`，无论您喜欢哪个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T19:13:10.037

你有`getElementById`调用和参数的问题。试试这个：

```
function readMatrix() {
    for (var i = 0; i < k; i++) {
        for (var j = 0; j < k; j++) {
            var id = "" + (i + 1) + (j + 1);
            A[i][j] = parseFloat(document.getElementById(id).value);
        }
    }
}​ 
```

请注意，您的 ID 是从`11`but not开始的`00`，因此`(i + 1) + (j + 1)`添加了部分。

**演示：http:** [//jsfiddle.net/VnvM2/](http://jsfiddle.net/VnvM2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T19:14:21.767

我猜，元素 id 是 and 的串联`i`，`j`而不是加法。

所以，它应该工作，

```
 function readMatrix () {
        for (i = 0; i < k; i++) {
            for (j = 0; j < k; j++)
            A[i][j]=parseFloat(document.getElementById(i + '' + j).value, 10);
        }
    } 
```

# algorithm - 修改后的 MST

> ID：10574435
> 
> 赞同：4
> 
> 时间：2012-05-13T19:10:01.817
> 
> 标签：algorithm, graph-algorithm, minimum-spanning-tree, kruskals-algorithm

谁能想出一种方法来修改 Kruskal 的最小生成树算法，使其必须包含某个边（u，v）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T19:28:00.700

我可能会感到困惑，但据我记得，kruskal 可以处理负权重，所以你可以给这个边缘`-infinity`权重。

*   当然它实际上不会是`-infinity`，而是一个足够低的数字，足够重要以至于它不能被忽略，就像`-1 * sigma(|weight(e)|)`E 中的每个 e一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T19:53:07.067

如果您可以修改图形结构，您可以删除顶点`u`和`v`，并用具有边 u 和 v 的新顶点 w 替换它们。在重复边的情况下，选择权重最小的边。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T02:26:19.120

假设我们知道 (u,v) 的边权重，我们也可以简单地将其添加到边权重排序列表的前面（因为 Kruskal 以升序对边权重进行排序）。在这种情况下，边 (u,v) 将是我们树中包含的第一条边，并且 Kruskal 将正常运行，找到具有 (u,v) 的最小权重的生成树。

# php - 在 php 中编写干净的 url

> ID：10574437
> 
> 赞同：1
> 
> 时间：2012-05-13T19:10:13.673
> 
> 标签：php, .htaccess

我想用这种格式的字符串写我的网址： [http](http://www.mysite.com/news/2012/10/04/article-title) : //www.mysite.com/news/2012/10/04/article-title 但是当我在 htaccess 文件中使用 RewriteRule 时，网站样式不能正常工作。我有这个问题：在 php 中执行此操作的最佳方法是什么？以前我在 asp.net whit rewrite 模块中这样做，但现在我不能这样做，我已经搜索了很多次并阅读了很多文章，但仍然有这个问题....非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T19:14:46.523

使用单一入口点：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?route=$1 [L] 
```

这样，所有请求都将被路由到索引页面，其中包含所需地址的 GET 变量。现在，您可以决定如何在 PHP 内部进行路由（使用包含），这样更容易控制。

此外，您应该使用绝对路径来指向您的样式，或者使用 PHP 变量来包含样式的绝对路径。

以上`.htaccess`确保如果文件存在，它不会重写 URL。（第 2-3 行）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T19:14:16.043

就个人而言，我在放入样式表和脚本时使用绝对 URL（或至少相对于根）：

```
<link rel="stylesheet" href="/css/styles.css" /> 
```

如果这对您不起作用，那么您可能也在重写您的 CSS 路径。根据需要排除文件（最好通过检查它是否以某些扩展名结尾来完成）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T19:15:59.280

我使用的解决方案是基本的 html 标记，用于整理图像和样式表。

请务必使用：`RewriteCond %{REQUEST_FILENAME} !-f`至少 - 可能会使它更安全，因此直接路径仍然有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T19:15:14.413

如果您的规则设置正确，但之后您的 CSS 格式消失了，这意味着您的 CSS 文件的相对路径现在不正确。

你现在可能正在使用这样的东西：

```
<link rel="stylesheet" href="css/styles.css" /> 
```

将其更改为：

```
<link rel="stylesheet" href="/css/styles.css" /> 
```

# rest - 不同 ESB 产品上的安全 HTTP 代理

> ID：10574440
> 
> 赞同：0
> 
> 时间：2012-05-13T19:10:29.213
> 
> 标签：rest, authentication, wso2, mule, wso2esb

我目前正在评估不同的 ESB 产品（实际上我现在专注于 mule）。用例是代理一个简单的 HTTP 服务，一个 OpenGIS Web Mapping Service WMS。

这是一个免费发布的 WMS 服务的示例：

*   它以有关“GetCapablities”请求的服务的 XML 元数据响应 (http://www.wms.nrw.de/wms/uebersicht_nrw2?REQUEST=GetCapabilities&VERSION=1.1.1&SERVICE=WMS)
*   它以包含“GetMap”请​​求的地图的图像数据进行响应（http://www.wms.nrw.de/wms/uebersicht_nrw2?REQUEST=GetMap&VERSION=1.1.1&SERVICE=WMS&LAYERS=Uebersicht&SRS=EPSG:31466&FORMAT=image/png&BBOX =2538900,5656400,2619500,5777000&WIDTH=200&HEIGHT=200&STYLES=&)

两者都将其数据作为字节数组返回，这可能是我正在处理的问题。

在我可以通过 Mule ESB 代理它之后，我想添加如下安全功能：

*   HTTP 基本和摘要式身份验证
*   通过 TLS 客户端证书进行身份验证
*   实施 XACML 策略执行点
*   提供一些关于审计服务的使用统计信息，并在其上实施一些 QoS 和 Throttling。

但基本上代理本身并没有像我想要的那样工作。这是我到目前为止得到的。首先，我尝试使用流代理它以在入站地址上添加安全提供程序。但是请求似乎没有到达出站地址，并且响应是空的。

```
<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" xmlns:mulexml="http://www.mulesoft.org/schema/mule/xml" xmlns:pattern="http://www.mulesoft.org/schema/mule/pattern" xmlns:core="http://www.mulesoft.org/schema/mule/core" xmlns:file="http://www.mulesoft.org/schema/mule/file" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mule-ss="http://www.mulesoft.org/schema/mule/spring-security" xmlns:ss="http://www.springframework.org/schema/security" version="CE-3.2.1" xsi:schemaLocation="...cut..."
<mule-ss:security-manager>  
    <mule-ss:delegate-security-provider name="memory-provider" delegate-ref="authenticationManager"/> 
</mule-ss:security-manager>
<spring:beans>
    <ss:authentication-manager alias="authenticationManager">  
        <ss:authentication-provider> 
            <ss:user-service id="userService"> 
                <ss:user name="ross" password="ross" authorities="ROLE_ADMIN"/>  
                <ss:user name="anon" password="anon" authorities="ROLE_ANON"/> 
            </ss:user-service> 
        </ss:authentication-provider> 
    </ss:authentication-manager>
</spring:beans>
<http:connector name="NoSessionConnector">
    <service-overrides sessionHandler="org.mule.session.NullSessionHandler" />
</http:connector>
<flow name="wfsFlow1" doc:name="wfsFlow1" processingStrategy="synchronous">
    <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" path="wms" responseTimeout="10000000" doc:name="Geoserver OWS">
        <mule-ss:http-security-filter realm="mule-realm"/>
    </http:inbound-endpoint>
    <http:outbound-endpoint exchange-pattern="request-response" method="GET" address="http://www.wms.nrw.de/wms#[header:INBOUND:http.request]" encoding="UTF-8" disableTransportTransformer="true" responseTimeout="1000000" doc:name="Geoserver OWS"/>
</flow>
</mule> 
```

我认为问题在于 WMS 服务作为字节数组的响应。我尝试了不同的响应转换器来从字节数组转换为字符串或 html 响应，但它不起作用。

我也尝试了桥接模式，但它没有像我预期的那样通过 GET 操作提供参数，而是通过 POST 提供参数，底层 WMS 服务不接受这种方式。

我认为我的用例非常简单，但我从四个星期开始就尝试实施它。我完成了这些供应商提供的每个示例教程，但我无法使用任何类型的身份验证设置简单的 HTTP 参数服务。

有没有人对这些产品有任何经验，或者很高兴回答我一些关于如何在任何这些产品上设置具有身份验证的 HTTP 代理的具体问题。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T18:41:08.333

大卫，你的要求很长。让我澄清关于 WSO2 ESB 的一些要点，以便您开始。

1.  WSO2 ESB 不仅支持 SOAP，还支持多种传输和内容类型。您可能对 REST 和 JSON 支持最感兴趣。[此处](http://techfeast-hiranya.blogspot.com/2012/04/wso2-esb-tips-tricks-09-introduction-to.html)和[此处](http://wso2.org/library/webinars/2011/11/rest-amp-api-management-wso2-esb)的链接可能会有所帮助。

2.  所有 WSO2 服务器都可以插入外部目录服务。[单击此处获取说明](http://docs.wso2.org/display/ESB403/Using+External+User+Stores+%28LDAP+AD%29)。

3.  可以满足您的所有要求。您可以浏览[此位置](http://docs.wso2.org/display/ESB/Running+ESB+Samples)的综合示例，以了解 ESB 的功能。让我也向您指出[此处](http://docs.wso2.org/display/ESB/Exposing+a+Non-secured+Service+with+Security+Using+ESB)、[此处](http://wso2.org/library/articles/2011/06/securing-web-service-integration)、[此处](http://wso2.org/library/articles/2010/10/using-xacml-fine-grained-authorization-wso2-platform)、[此处](http://docs.wso2.org/display/ESB/Statistics)和[此处](http://docs.wso2.org/display/ESB/Throttling)的文章，这些文章将帮助您满足您的要求。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T16:14:22.583

Mule 在对人员进行身份验证和授权时依赖于 Spring Security。

[配置安全](http://www.mulesoft.org/documentation/display/MULE3USER/Configuring+Security)性是在 Mule 中处理安全性的文档入口点。您将在那里找到有关配置 Spring Security、保护组件（如 HTTP 桥）和 LDAP 身份验证的信息。

默认情况下，Mule 在执行出站请求时会将其会话序列化为 HTTP 标头。如果远程站点不受信任，这不仅可能是一个安全问题，而且还可能导致错误请求问题，因为序列化会话产生的 HTTP 标头太大。

知道当存在安全上下文时，Mule 会话变得非常大，这可能会导致问题。事实上，使用您的配置，我从远程测试站点收到了错误的请求错误！所以我添加了以下内容以确保 Mule 不会通过 HTTP 发送请求：

```
<http:connector name="NoSessionConnector">
    <service-overrides sessionHandler="org.mule.session.NullSessionHandler" />
</http:connector> 
```

我也`disableTransportTransformer="true"`从您的配置中删除了，因为这也可能导致问题。

# ajax - 对同一节点上的 Jetty 服务器的 Ajax 请求

> ID：10574442
> 
> 赞同：0
> 
> 时间：2012-05-13T19:10:45.587
> 
> 标签：ajax, jetty, same-origin-policy

我想使用 html/js 作为我的 Java 应用程序的图形界面，为此我有一个在 port 上运行的 Jetty http 服务器`8040`。

`8080`客户端脚本使用 jQuery AJAX`get()`方法在端口上的 Mongoose 服务器上完成。

执行 AJAX 请求时，我得到

```
XMLHttpRequest cannot load http://localhost:8040/. Origin http://localhost:8080 is not  allowed by Access-Control-Allow-Origin. 
```

我做了一点谷歌：发现这被称为[同源策略](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)，如果我理解这一点，脚本不能向同一地址上的另一个端口发出请求吗？那么我该如何进行这项工作，即。在同一台机器上同时运行 java 服务器和 javascript 客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T16:48:33.687

看看这个维基页面：

[http://wiki.eclipse.org/Jetty/Feature/Cross_Origin_Filter](http://wiki.eclipse.org/Jetty/Feature/Cross_Origin_Filter)

# javascript - 在 JS 中将 GET 转换为 POST

> ID：10574445
> 
> 赞同：3
> 
> 时间：2012-05-13T19:11:07.700
> 
> 标签：javascript, jquery, ajax, json, datatables

使用数据表。尝试使用 POST 获得工作功能（目前仅适用于 GET）。

基于[这个讨论](http://datatables.net/forums/discussion/691/pipeline-post/p1)，我修改了[这个函数](http://datatables.net/release-datatables/examples/server_side/pipeline.html)并得到了类似下面的东西。现在收到错误消息：

json.aaData 未定义@第 99 行

[完整代码在这里](http://pastebin.com/UcM8N17L)

```
 jQuery.post( sSource, aoData, function (data) { 
            /* Callback processing */
            oCache.lastJson = jQuery.extend(true, {}, data);

            if ( oCache.iCacheLower != oCache.iDisplayStart )
            {
                data.aaData.splice( 0, oCache.iDisplayStart-oCache.iCacheLower );
            }
            data.aaData.splice( oCache.iDisplayLength, data.aaData.length );

            fnCallback(data)
        },"json" );
    }
    else
    {
        json = jQuery.extend(true, {}, oCache.lastJson);
        json.sEcho = sEcho; /* Update the echo for each response */
        json.aaData.splice( 0, iRequestStart-oCache.iCacheLower ); // <- this line
        json.aaData.splice( iRequestLength, json.aaData.length );
        fnCallback(json);
        return;
    }
} 
```

我错过了什么？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:23:03.903

是`jQuery.post( sSource, aoData, function (data) {`。你有`aoData`，但在你引用的代码中`aaData`。这可能是一个错字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:25:40.760

因此，您提供的完整代码示例不可能是完整代码，因为它只有 75 行长，并且您收到一个错误，提示您在第 99 行有一个未定义的属性。

但是，您确实说过这一行：

```
json.aaData.splice( 0, iRequestStart-oCache.iCacheLower ); 
```

给你未定义的错误。发生的事情是您试图访问由于某种原因在您的 json 对象上不存在的属性 aaData 的拼接函数。

因此，如果您打开 JavaScript 控制台并输入 json.aaData，您将看到它返回 undefined。所以任何应该设置 json 变量的 aaData 属性的东西都没有这样做。我希望这可以帮助您找出错误。

# javascript - 使用 JavaScript 从 URL 解析 JSON

> ID：10574446
> 
> 赞同：0
> 
> 时间：2012-05-13T19:11:15.763
> 
> 标签：javascript, json, tumblr

我无法从这个 JSON URL 中获取变量：

```
{
"meta":{
    "status":200,
    "msg":"OK"
    },      
"response":{
    "blog":{
        "title":"GideonPARANOID",
        "posts":5018,
        "name":"gideonparanoid",
        "url":"http:\/\/gideonparanoid.tumblr.com\/",
        "updated":1336919325,
        "description":"I study computer science at Aberystwyth, though I call Manchester home. I'm vegetarian, & take an interest in photography, gaming & cycling.",
        "ask":true,
        "ask_anon":true
        }
    }
} 
```

我已经成功地使用了[此处](https://stackoverflow.com/questions/10352636/pull-and-use-json-data-from-a-url-with-javascript)第一个答案中给出[的 JavaScript 的修改版本](http://jsfiddle.net/6ZeJ8/3/)。我对 JSON 相当不熟悉，所以我不确定如何正确应用它——我已经用谷歌搜索了两个小时，但无济于事。

[我最近的尝试](http://jsfiddle.net/6ZeJ8/10/)仍然没有提供任何东西。

我正在使用[此处](http://www.tumblr.com/docs/en/api/v2)给出的 Tumblr API 中的示例 API 密钥。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:17:26.417

也许，`var result = JSON.parse(jsonString)`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T19:20:46.557

试试`JSON.parse(json_string)`。

例子：

```
var json_string = '{ "meta" : { "msg":"OK"} }';
var o = JSON.parse(json_string);
o.meta // {msg:'OK'}
o.meta.msg // 'OK' 
```

这不是 URL，而是 JSON 数据。

# java - Android 程序在几次使用后停止工作

> ID：10574448
> 
> 赞同：0
> 
> 时间：2012-05-13T19:11:30.533
> 
> 标签：java, android

我制作了我的第一个 Android Java 程序，在摄氏度和华氏度之间进行转换。这起初效果很好，但经过几次转换后它不会转换它们。如果我更改值并按下按钮，它不会更新字段。

这是代码。

```
package fi.peltoset.mikko.celfahr;

import java.text.DecimalFormat;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class Celfahr extends Activity {
  private double celsius = 0.0;
  private double fahrenheit = 0.0;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button celsiusasteiksi = (Button) findViewById(R.id.celsiusasteiksi);
    Button fahrenheiteiksi = (Button) findViewById(R.id.fahrenheitasteiksi);

    celsiusasteiksi.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
          fahrenheit = Double.parseDouble(((EditText)
                    findViewById(R.id.fahrenheitkentta)).getText().toString());         
          ((EditText) findViewById(R.id.celciuskentta)).setText(
                   String.valueOf(pyorista((fahrenheit - 32) / 1.8)));
        }
     });

     fahrenheiteiksi.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {
           celsius = Double.parseDouble(((EditText) findViewById(R.id.celciuskentta))  
                    .getText().toString());     
           ((EditText) findViewById(R.id.fahrenheitkentta))
                    .setText(String.valueOf(pyorista(celsius * 1.8 + 32)));
         }
    });
  }    

  double pyorista(double d) {
    DecimalFormat df = new DecimalFormat("#.#");
    return Double.valueOf(df.format(d));
  }
} 
```

抱歉那里的语言不好（芬兰语，嘿......）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:22:49.223

我和其他人建议初学者这样做：

```
public class Celfahr extends Activity {
    private double celsius = 0.0;
    private double fahrenheit = 0.0;
    private EditText celsiuskentta;
    private EditText fahrenheitkentta;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button celsiusasteiksi = (Button) findViewById(R.id.celsiusasteiksi);
        Button fahrenheiteiksi = (Button) findViewById(R.id.fahrenheitasteiksi);
        celsiuskentta = (EditText) findViewById(R.id.celciuskentta);
        fahrenheitkentta = (EditText) findViewById(R.id.fahrenheitkentta)

        celsiusasteiksi.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                fahrenheit = Double.parseDouble(fahrenheitkentta.getText().toString());         
                celsiuskentta.setText(String.valueOf(pyorista((fahrenheit - 32) / 1.8)));
            }
        });

        fahrenheiteiksi.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                celsius = Double.parseDouble(celsiuskentta.getText().toString());   
                fahrenheitkentta.setText(String.valueOf(pyorista(celsius * 1.8 + 32)));
            }
        });
    }    
... 
```

此外，DecimalFormat 返回格式化的字符串，因此您无需将结果从`pyorista()`双精度数转换回字符串。对不起，如果我拼错了任何芬兰语单词，希望这会有所帮助。

# cordova - 将值传递给视图

> ID：10574449
> 
> 赞同：0
> 
> 时间：2012-05-13T19:11:37.390
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我正在尝试将一些值`View`从`Controller`. 到目前为止我的代码；

```
success: function (response) {                            
    var text = response.responseText;
    if (result.status == "OK") {
        Ext.getCmp('mainpanel').push({
            title: 'Hello World ',
            html: ['<div>', '<b>HELLO PEOPLE</b>: ', '</div>'].join('')
        });
    }
} 
```

上面的代码`html`在另一个视图中显示。

在我的项目结构中，我有一个名为的视图`AnotherView.JS`，我需要调用它`View`，并将值传递给那个`view`（`AnotherView.JS`）。如何修改代码以进行这些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T23:35:56.070

假设您有两个视图 FirstView 和 SecondView (xtype:'secondview')，并且您在 FirstViewController 中，您需要像这样添加对第​​二个视图的引用：

```
config: {
  refs: {
    first: 'firstview',
    second:'secondview'
  }
} 
```

然后，你可以得到第二个视图`this.getSecond()`并用它做任何你想做的事情

希望这可以帮助

# c# - ListBox 问题无法从自定义类获取 ItemsSource 以在 MainPage 中输出

> ID：10574451
> 
> 赞同：0
> 
> 时间：2012-05-13T19:11:44.807
> 
> 标签：c#, windows-phone-7, listbox

我创建了一个名为 MedinetParse 的自定义类来解析 web 请求。解析后的数据应显示在我的 MainPage 中名为 mittSchemaListBox 的列表框中。我现在面临的问题是，如果我在名为 MedinetParse 的自定义类中编写解析方法，则列表框什么也没有显示。尽管当我在 parse 方法内的最后一行代码处放置断点时，我可以看到 mittSchemaListBox.ItemsSource 具有所有已解析的项目。同时，如果我将解析方法移动到我的 MainPage.xaml.cs 中，那么我将在我的列表框中看到所有已解析的项目。

这是我的 MedinetParsing 课程

```
namespace WindowsPhonePanoramaApplication1
{
public class MedinetParsing : MainPage
{
    //Defining class properties
    public string Placering { get; set; }
    public string Datum { get; set; }
    //Defining class methods
    public void parseResults(string myresponse)
    {
        if (string.IsNullOrEmpty(myresponse))
        {
            return;
        }

        //Initiating a listbox and add item to it
        List<ItemViewModel> mittSchemaList = new List<ItemViewModel>();
        //Using HtmlAgilityPack to parse the HTMLcode from the response
        HtmlDocument htdoc = new HtmlDocument();
        htdoc.LoadHtml(myresponse);
        foreach (HtmlNode table in htdoc.DocumentNode.SelectNodes("//table[@class='list-medium']/tbody[1]/tr[@class]"))
        {
            //Removing ChildNode
            table.ChildNodes.RemoveAt(3);
            string itemValue = table.InnerText;
            //Changing the parsed date into a DateTime
            string d;
            DateTime datum = DateTime.Parse(itemValue.Remove(11));
            d = datum.ToString("D");
            //Adding items to the listbox
            mittSchemaList.Add(new ItemViewModel() { Datum = d, Placering = itemValue.Remove(0, 15) });
        }
        mittSchemaListBox.ItemsSource = mittSchemaList;

    }
}
} 
```

这是启动解析的代码：-

```
 public void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        if (!App.ViewModel.IsDataLoaded)
        {
            App.ViewModel.LoadData();
        }
        MedinetWebRequest mittschema = new MedinetWebRequest();
        MedinetParsing mittparse = new MedinetParsing();
        mittschema.url = "https://medinet.se/cgi-bin/doctor.pl?action=login&customer=******&language=se";
        Action callback = () => Dispatcher.BeginInvoke(() => mittparse.parseResults(mittschema.myresponse));
        mittschema.getrequest(callback); 
    } 
```

最后这是我的列表框：-

```
<ListBox Margin="0,0,-12,0" Name="mittSchemaListBox" DataContext="{Binding}" ItemsSource="{Binding Path=Items}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,17">
                            <!--Replace rectangle with image-->
                            <Canvas Height="100" Width="100" Margin="12,0,9,0" Background="#FFE5001B">
                                <TextBlock Text="{Binding Datum}" TextWrapping="Wrap" Height="100" Margin="0" HorizontalAlignment="Right" Width="100" />
                            </Canvas>
                            <StackPanel Width="311">
                                <TextBlock Text="{Binding Placering}" TextWrapping="Wrap" Margin="0,10" Style="{StaticResource PhoneTextExtraLargeStyle}" FontSize="36" TextAlignment="Center" FontWeight="Normal" />
                            </StackPanel>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

在过去的几个小时里一直试图解决这个问题并且没有得到任何地方，我决定在这里问。希望有人能告诉我是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:22:20.430

好的，根据你的评论，你做错了。试试这个：

1.  您不需要新的 MedinetParing 类，只需将方法直接移动到 MainPage 代码隐藏
2.  更新 MainPage_Loaded 方法如下：

（或考虑将此代码移动到 ViewModel ，因为您在这里以某种方式使用它）

```
public void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    if (!App.ViewModel.IsDataLoaded)
    {
        App.ViewModel.LoadData();
    }

    MedinetWebRequest mittschema = new MedinetWebRequest();
    mittschema.url = "https://medinet.se/cgi-bin/doctor.pl?action=login&customer=******&language=se";
    Action callback = () => Dispatcher.BeginInvoke(() => this.parseResults(mittschema.myresponse));
    mittschema.getrequest(callback); 
} 
```

**编辑**

```
public class MedinetParsing //  : MainPage -- we don't need this inheritance
{
    private readonly MainPage _mainPage;

    public MadinetParsing(MainPage mainPage)
    {
        _mainPage = mainPage;
    }

    // your code here

    // use the next line instead of commented one
    // mittSchemaListBox.ItemsSource = mittSchemaList;
    _mainPage.mittSchemaListBox.ItemsSource = mittSchemaList;
} 
```

但是，正如我之前所说，最好的解决方案是在 ViewModel 中进行解析并使用绑定来填充 ListBox。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:05:49.413

昨晚无法回答我的问题，所以这里是答案。

在反复使用我的代码几个小时后，我再次找到了适合我的应用程序的解决方案。解决方案是我在 MedinetParsing 类中更改了这行代码

```
mittSchemaList.Add(new ItemViewModel() { Datum = d, Placering = itemValue.Remove(0, 15) }); 
```

有了这个：-

```
App.ViewModel.Items.Add(new ItemViewModel() {Datum=d,Placering=itemValue.Remove(0,15)}); 
```

摆脱了这行代码：-

```
mittSchemaListBox.ItemsSource = mittSchemaList; 
```

现在它正在正常工作，我很高兴；）。如果他们面临这样的问题，希望这将对其他人有所帮助。

你的

# c# - 选择索引上的列表框错误

> ID：10574457
> 
> 赞同：0
> 
> 时间：2012-05-13T19:12:33.847
> 
> 标签：c#, visual-studio

我在 winform 上有一个列表框控件，同样是单项选择模式或单项选择模式。我正在尝试从**form_KeyDown**事件中滚动它，如下所示

```
if ((Keys)e.KeyCode == Keys.Down)
{
     if (listBox2.Items.Count >= listBox2.SelectedIndex) 
     {
           listBox2.SelectedIndex++;

     }

 } 
```

但它会抛出一个错误，如**“ArgumentOutOfRangeException was unhandled” Invalid argument of value =23 is not valid for selection index.**

如何摆脱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:16:07.483

试试这个：

```
if ((Keys)e.KeyCode == Keys.Down)
{
     if ((listBox2.Items.Count-1) > listBox2.SelectedIndex) 
     {
           listBox2.SelectedIndex++;

     }

 } 
```

请记住，如果您有 23 个项目，`SelectedIndex`则从 0 到 22...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T19:17:53.947

根据[MSDN 的](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selectedindex.aspx)文档`ListBox.SelectedIndex`：

> 当前选定项的**从零开始的**索引。如果未选择任何项目，则返回负一 (-1) 值。

所以，我相信你需要改变

```
if (listBox2.Items.Count >= listBox2.SelectedIndex) 
```

到

```
if (listBox2.Items.Count-1 > listBox2.SelectedIndex) 
```

**请投票 Marco 的回答为正确，因为他向我指出了这一点！**

因为如果列表框中有 23 项，则第 23 项实际上是第 22 项，第 1 项实际上是第 0 项，依此类推。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T19:22:11.400

ListBox.SelectedIndex 是一个从零开始的数组，即索引中的第一项将为 0，而 Items.Count 将始终返回一个从 1 开始的值。

有关详细信息，请参阅以下内容：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selectedindex.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selectedindex.aspx)

亲切的问候，韦恩

# c++ - 使用 stxxl 队列时“未分配指针”

> ID：10574460
> 
> 赞同：3
> 
> 时间：2012-05-13T19:12:45.923
> 
> 标签：c++, stxxl

我的代码似乎有效（由于上述错误，我没有尝试过使用大型数据集）。

代码：

```
#include <iostream>
#include <queue>
#include <stxxl/queue>

int main()
{
   //queue<int> q; //this works
   stxxl::queue<int> q; //does not work
   for (int i = 0; i<100; i++) {
       q.push(i);
   }
   std::cout << "done copying" << std::endl;
   while (q.empty() == false) {
       std::cout << q.front() << std::endl;
       q.pop();
   }
   std::cout << "done poping" << std::endl;
   return 0;
} 
```

我的简单`.stxxl`很简单：`disk=./testfile,0,syscall`

但我的错误是：

```
stackexchangeexample(3884) malloc: *** error for object 0x101c04000: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
The program has unexpectedly finished. 
```

我不确定如何解决它，在这种情况下我需要释放内存吗？如果这真的很基础，我还在学习 c++ 很抱歉（这只发生在我使用 stxxl 队列时）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T15:06:43.503

我以前从未使用过 stxxl，但由于它是一个模板，您可以在这里查看代码：http: [//algo2.iti.kit.edu/stxxl/trunk/queue_8h_source.html](http://algo2.iti.kit.edu/stxxl/trunk/queue_8h_source.html)。既然你是新手，我会解释一些事情。这个愚蠢的队列维护着一个指针队列。行 00054 显示`typedef ValTp value_type`，所以现在你`int`是`value_type`. Line 的 00072 和 00073 表明您的前后元素属于`value_type`. 您是否看到它们将如何作为指针进行维护。最后，如果您查看任何构造函数，第`pool_type* pool`00069 行定义的将被“新建”（这是您的元素的基础），并且`init`始终调用该函数。内`init`,`pool->steal()`被称为，如果您想了解更多信息，请单击它。

简而言之，您需要将新的整数推送到您的队列中。界面不好，不是你的错。

# matlab - MATLAB：凸优化算法的缓慢收敛

> ID：10574464
> 
> 赞同：1
> 
> 时间：2012-05-13T19:13:28.940
> 
> 标签：matlab, mathematical-optimization, convex-optimization

我想加快 MATLAB 中凸优化问题的收敛速度。

我的目标函数是具有三个参数的凸函数，并且我正在使用梯度上升来最大化。

现在我正在手动编写迭代，终止条件是新参数值和旧参数值之间的差异非常小（大约 0.0000001）。我不能根据迭代次数终止，因为它不能保证它已经收敛到最佳解决方案。

所以，收敛需要很多时间——差不多 2 天！有什么办法可以加快这个速度吗？

实际上我的目标函数只有三个参数。我知道我的第一个参数的值应该大于第二个参数的值。

所以从初始条件开始，第二个参数的值开始迅速增加。达到某一点后，第一个参数的值开始快速增加。当第一个参数的值开始增加时，第二个参数的值开始缓慢下降。最终，我的第一个参数的值大于第二个参数的值。

有什么方法可以加快这个过程吗？2天是很长的时间。此外，计算梯度也很耗时。它需要大量的矩阵计算。

我不想从定义的参数值开始，比如 parameter1 的值大于秒的值。此外，第一个参数不必总是大于第二个参数。我只知道哪个参数值应该更大。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:36:06.117

如果梯度的计算非常慢并且您仍然想手动实现，您可以尝试这个，它需要更多的步骤但可能会更快，因为步骤非常简单：

定义步长

尝试变量在步长方向上移动 -1、0 或 1 次的所有点（3^3 = 27 种可能性）

选择最好的

如果最好的一个是你以前的一个，将步长乘以因子 0.5

当然这个过程的成功取决于你的函数的属性。此外应该注意，一个更简单的解决方案可能是将所需的差异设置为 0.0001

# iphone - 使用 UINavigationController 传递数据

> ID：10574473
> 
> 赞同：0
> 
> 时间：2012-05-13T19:14:45.187
> 
> 标签：iphone, ios, uiviewcontroller, uinavigationcontroller

*[我有这个工作，但我不明白为什么我的“修复”让它工作。]*

作为学习练习的一部分，我正在创建一个简单的表格。当用户在表格中选择一个单元格时，我希望它进入第二个 UIViewController。第二个 UIViewController 有一个标签，显示所选单元格中的文本。

“父”类有这个方法来创建子和设置文本：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  child = [[WDRViewControllerFirstChild alloc] initWithNibName:nil bundle:nil];
  child.title = [colors objectAtIndex:indexPath.row];
  child.labelText = [colors objectAtIndex:indexPath.row];
  [self.navigationController pushViewController:child animated:YES];  
} 
```

然后在 WDRViewControllerFirstChild 中，我有两种方法。如果我以这种方式处理它，那么一切正常。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
      label = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 100, 50)];
      colorMap = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:[UIColor redColor], [UIColor greenColor], [UIColor blueColor], nil] forKeys:[NSArray arrayWithObjects:@"red", @"green", @"blue", nil]];
//      Adding the subview here won't work.  Why?
//      [self.view addSubview:label];
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
  [self.view addSubview:label];
  label.text = labelText;
  label.textAlignment = UITextAlignmentCenter;
  label.backgroundColor = [UIColor whiteColor];
  self.view.backgroundColor = [colorMap objectForKey:labelText];
} 
```

最初，我在 init 调用中将孩子分配给了子视图，但这不起作用。也就是说，文本的标签不会正确显示已选择项目的文本。（它将是空白的。）

我添加了一些 NSLog 调用，另外发现如果我将 addSubview 调用从 viewDidLoad 移动到 init，labelText 的值为 null。但是，在上面的表格中，它已正确设置。

我很高兴它正在工作，但我不明白为什么一个工作而另一个工作。特别是，我真的很困惑为什么根据我调用 addSubview 的位置设置 labelText 起作用。

有什么见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:24:43.000

`-addSubview`仅当视图实际上完全从 XIB 中加载时才会起作用，否则它将调用 nil 并产生 nil。到`-initWithNibName:bundle:`调用时，操作系统很可能正在解冻（字面意思）您指定的 XIB 并对其进行设置，因此 view 属性为 nil。在`-viewDidLoad`您可以合理地确定视图的存在，因此大多数设置工作都在此处完成。至于（NULL）标签文本，无论 iVar`labelText`是什么，您都没有实例化它。删除该行。

# cookies - DWR Cookie (DWRSESSIONID) 及其使用

> ID：10574482
> 
> 赞同：2
> 
> 时间：2012-05-13T19:15:55.103
> 
> 标签：cookies, session-state, session-cookies, dwr, httpsession

想知道`DWRSESSIONID`由浏览器生成`DWR`并发送到浏览器的用途是什么？它与 HTTPSession 相关联吗？`JSESSIONID`当用于维护状态时，没有看到创建此 cookie 的任何实际原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T16:48:53.747

DWRSESSIONID cookie 在 DWR 3.0 中添加以防止[CSRF 攻击](http://en.wikipedia.org/wiki/Cross-site_request_forgery)。它在服务器端 DWR 类第一次进行调用时设置`Batch.java`。在随后的调用中，它用于`BaseDwrpHandler.java`检查 CSRF 攻击。即使没有 HttpSession 也可用，因此没有 JSESSIONID。[Mike Wilson 在 DWR-Users 邮件列表中](http://dwr.2114559.n2.nabble.com/CSRF-Protection-Am-I-doing-something-wrong-or-is-DWR-easy-to-attack-td7054463.html)解释道：

> 在 DWR 3.0 模型中，我们创建了自己的会话 cookie（“DWRSESSIONID”），因此即使应用程序不使用 HttpSession，也总会有一个会话 cookie 来检查 CSRF。

# xml - 为什么google api天气延迟

> ID：10574488
> 
> 赞同：1
> 
> 时间：2012-05-13T19:16:36.530
> 
> 标签：xml

例如对于

`http://www.google.com/ig/api?weather=Moscow&hl=en`

我有

```
<current_conditions>
  <condition data="Clear"/>
  <temp_f data="50"/>
  <temp_c data="10"/>
  <humidity data="Humidity: 76%"/>
  <icon data="/ig/images/weather/sunny.gif"/>
  <wind_condition data="Wind: N at 11 mph"/>
</current_conditions>
<forecast_conditions>
  <day_of_week data="Sun"/>
  <low data="43"/>
  <high data="57"/>
  <icon data="/ig/images/weather/rain.gif"/>
  <condition data="Rain"/>
</forecast_conditions> 
```

星期天到了，`forecast_conditions`但星期天就是今天。星期六也是如此`current_conditions`。为什么延迟1天？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:19:50.767

预测可能是针对今天*剩下*的时间，而不是从明天开始。

我注意到，此时此刻，莫斯科还不到午夜。再等 35 分钟看看会发生什么，这可能会很有趣。

# cordova - sencha-touch 中的条码阅读器

> ID：10574490
> 
> 赞同：2
> 
> 时间：2012-05-13T19:17:01.537
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我被要求拍摄条形码图像并阅读其内容。

到目前为止，我知道如何访问相机并拍摄图像。我不知道如何读取条形码。有人可以给我看一个例子/教程，我可以很容易地做到这一点。或者如果有一个我可以使用的 javascript 库？

2.）由于 Sencha-Touch 是 Javasript，并且如果 barcodr 阅读器库也在 javascript 中，我可以从手机中识别条形码（无需将图像上传到服务器，以便服务器读取内容） ?

我在网上找到了这个，[但不知道如何使用它](https://stackoverflow.com/questions/6869445/reading-barcode-from-an-image-using-javascript)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:27:57.380

从您的页面加载此脚本：http: [//tobeytailor.s3.amazonaws.com/get_barcode_from_image/get_barcode_from_image.js](http://tobeytailor.s3.amazonaws.com/get_barcode_from_image/get_barcode_from_image.js) （即：）

然后，如果您的图像由 camrea 在您的页面中带有 id-attribute 的标签中捕获，请使用该标签的 id-attribute 调用函数 getBarcodeFromImage(..)。[如此处http://tobeytailor.s3.amazonaws.com/get_barcode_from_image/index.html](http://tobeytailor.s3.amazonaws.com/get_barcode_from_image/index.html)中的示例所示 。

一些示例 JavaScript：

var imgId = '条形码'; var 条码 = getBarcodeFromImage(imgId); alert('扫描的条码为：' + 条码);

希望这可以帮助。

PS 该脚本是在 MIT 许可下发布的。您可以自由使用 barscanner-code，但必须包含版权文本。

# drupal - Drupal：“目录不可写”

> ID：10574491
> 
> 赞同：3
> 
> 时间：2012-05-13T19:17:06.243
> 
> 标签：drupal, drupal-6

我最近将我的 Drupal 核心从 6.15 升级到了 6.26。在更新过程中，我被要求备份我的所有文件，然后从我的服务器上删除整个 Drupal 安装，并使用提供的文件重建它。然后，我将所有相关的备份文件从本地计算机复制回服务器。我现在遇到的问题是，每当我以管理员身份执行任何操作时，都会收到“目录不可写”通知。最初，我收到“站点/默认/文件”不可写的错误，但我修复了该错误，并将安装中每个文件的权限更改为 755。为什么会出现此错误，我该如何修复它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T01:07:22.593

尽管权限可能设置为 755，但很可能目录所有权设置为错误的用户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T17:57:33.827

只是想添加这种可能性，在尝试了很多事情后为我解决了这个问题：

如果您正在运行 SELinux（如 Fedora），您可能在 /sites/default 或 /sites/default/files 上遇到“安全上下文”问题。因此，即使您使用 chmod 777（不是一个好主意）打开它，您仍然会遇到权限问题。

修复是（首先 cd 到站点目录）：

```
restorecon -rv default/ 
```

我以 root 身份在本地运行它。

我绝不会假装自己是安全上下文方面的专家，但 Fedora 文档在[这里](https://fedoraproject.org/wiki/Security_context?rd=SELinux/SecurityContext)。

希望能帮助别人避免我的头痛！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T14:48:31.243

找到权限问题后，为了安全起见，您可能希望返回并 chmod 644 对所有文件，对目录（除了上传文件夹）使用 755。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T14:35:14.787

Drupal 有时会创建一些目录，因此请检查 sites/default/files 子目录是否具有正确的权限

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-16T14:24:30.153

您可以使用两种可能的选项来做到这一点：
1\. 将文件目录的所有者和其中的所有文件更改为 apache 用户
2\. 以递归方式授予文件目录 777 权限

# php - PHP 电子邮件订阅验证并检查现有

> ID：10574492
> 
> 赞同：0
> 
> 时间：2012-05-13T19:17:16.173
> 
> 标签：php, validation, email

我正在 PHP 中创建一个电子邮件订阅表单，并希望检查有效地址以及电子邮件是否已存在于我的数据库中。

我的代码正在连接到我的数据库并插入，但验证以及检查现有电子邮件不起作用。

无论我在表单中输入什么内容，即使我没有输入任何内容，它也会将其插入到我的数据库中。

这是我的所有代码：

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">

<fieldset>

<legend>Subscribe to Our Newsletter &nbsp;</legend>

<?php if ($feedback!='')
echo('<p>'.$feedback.'</p>'); ?>

<label>Name: <input name="name" type="text" value="<?php echo $name; ?>" /></label>

<label>Email: <input name="email" type="text" value="<?php echo $email; ?>" /></label> 

<label><input type="submit" value="Sign Up!" /></label>

</fieldset>
</form>

<?php

$feedback='';
if (!$email) {

$feedback .= '<strong>Please enter your email address</strong><br />';

}

if (!$name) {

$feedback .= '<strong>Please enter your name</strong><br />';
}

list($username, $mailDomain) = explode("@", $email);

if (!@checkdnsrr($mailDomain, "MX")) {

$feedback .= '<strong>Invalid email domain</strong><br />';
}

if(!preg_match("/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/", $email)) {

$feedback .= '<strong>Your email address doesn\'t appear to be valid - please check and try again';

}

function cleaninput($value, $DB) {
    if (get_magic_quotes_gpc()) {
        $value = stripslashes( $value );
}
return mysql_real_escape_string( $value, $DB );

}

$name=$_POST['name'];
$email=$_POST['email'];

include_once "connect.php";

$sql = mysql_query("SELECT * FROM subscribers WHERE email='$email'");
$numRows = mysql_num_rows($sql);
    if ($numRows>0) {

$feedback = '<strong>That email address is already subscribed.</strong>';

}

$insertresult = mysql_query("INSERT INTO subscribers (name, email) VALUES('$name', '$email')") or die (mysql_error());

    if ($insertresult) {
        $completed = true;
    }

if($competed=false) {
?>

<form action="<?php echo $_SERVER['PHP_SELF']; ?> method="post">
        <fieldset>
    <legend>Subscribe to OUr Newsletter &nbsp;</legend>
<?php 

if ($feedback!='')
    echo('<p>'.$feedback.'</p>'); ?>
<label>Name: <input name="name" type="text" value="<?php echo $name; ?>" /></label>

<label>Email: <input name="email" type="text" value="<?php echo $email; ?>" /></label>

<label><input type="submit" value="Sign Up!" /></label>

        </fieldset>
</form>

<?php

}
else {

echo('Thanks - you have subscribed to our newsletter successfully. You can unsubscribe at any time by clicking the link at the bottom of each email we send.');

}

?> 
```

我脚本中的最后一个回声也总是在那里。它总是显示在我的表单下。不知道为什么会这样。也许我把它放在我的代码中的错误位置。

```
else {

echo('Thanks - you have subscribed to our newsletter successfully. You can unsubscribe at any time by clicking the link at the bottom of each email we send.');

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:56:13.607

老实说，这段代码有点乱 :) 读起来有点困难，但我至少可以看到两个问题：你写`$competed`而不是`$completed`在你的一个`if`语句中，而且你实际上没有`INSERT`查询`if`块：它将始终执行。尝试将其放在检查地址是否已在数据库中的`else`块之后的块中，如下所示：`if`

```
$sql = mysql_query("SELECT * FROM subscribers WHERE email='$email'");
$numRows = mysql_num_rows($sql);

if ($numRows>0) {
  $feedback = '<strong>That email address is already subscribed.</strong>';
}
else { 
  $insertresult = mysql_query("INSERT INTO subscribers (name, email) VALUES('$name',   '$email')") or die (mysql_error());
} 
```

您也不需要同时使用`addslashes`and `mysql_real_escape_string`; 只有后者会做。而且我不确定为什么您的代码中有两次相同的形式。肯定一次应该做吗？:)

# objective-c - 从子类调用方法查看控制器混乱

> ID：10574493
> 
> 赞同：1
> 
> 时间：2012-05-13T19:17:19.767
> 
> 标签：objective-c

我的 ViewController 中有一个添加图像视图的方法。图像视图又被子类化为可拖动的。触摸时，子类会触发 ViewController 中的方法 (spawnImage) 以生成新图像。如果我从 ViewController 中的任何其他位置调用此方法，则正确绘制图像，但是如果调用源自子类，则调用该方法，NSLog 工作但图像不显示。

似乎我正在子类中创建 ViewController 的另一个实例，并最终将图像添加到该实例而不是实际显示的实例中。

我怎么能解决这个问题？

UIImageView 的子类：

```
- (void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {
…
ViewController *viewController = [[ViewController alloc] init];
[viewController checkIfImageIsInOriginalPosition:selfCenter letterIndex: imgTag];
} 
```

视图控制器.m：

```
-(void)checkIfImageIsInOriginalPosition:selfCenter letterIndex: imgTag {
…
else {
[self spawnImage];
}
}

-(void)spawnImage {
…
NSLog(@"Received");
SubClass *subClass = [[SubClass alloc] initWithFrame:frame];
[subClass setImage:image];
[self.view addSubview:subClass];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:25:24.850

这段代码：

```
- (void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {
ViewController *viewController = [[ViewController alloc] init];
[viewController checkIfImageIsInOriginalPosition:selfCenter letterIndex: imgTag];
} 
```

..是错的。

大概这是子类中的代码，您的 UIImageView 的子类，并在用户点击它时被调用。

你不应该分配/初始化一个新的视图控制器。相反，您应该在您的 SubClass UIImageView 子类中设置一个“owningViewController”属性，并在创建 SubClass 的实例时设置该属性：

```
-(void)spawnImage 
{
  …
  NSLog(@"Received");
  SubClass *subClass = [[SubClass alloc] initWithFrame:frame];
  owningViewController = self;
  [subClass setImage:image];
  [self.view addSubview:subClass];
} 
```

然后您的 SubClass 类的 touchesBegan 方法将如下所示：

```
- (void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event 
{
  …
  [self.owningViewController checkIfImageIsInOriginalPosition:selfCenter 
    letterIndex: imgTag];
} 
```

# javascript - 如何使滚动条出现？

> ID：10574499
> 
> 赞同：3
> 
> 时间：2012-05-13T19:18:43.790
> 
> 标签：javascript, jquery, html, css, scrollbar

这就是我想要做的。我想要一个显示为固定尺寸框的 div，随着时间的推移，各种 javascript 函数将在其中放置文本。当文本的行数超过框的高度时，我希望在框的旁边出现一个滚动条，这样您就可以在框本身保持固定高度的同时滚动浏览其中的文本。

这怎么可能实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T19:20:36.973

使用 css 你可以这样做：

```
div{
   overflow-y: scroll
} 
```

你也可以 `overflow-y: auto`@tw16

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T19:24:06.443

正如您所说，滚动条只应在文本过多时出现，我会使用：

```
div{
    overflow-y: auto
} 
```

现场示例：http: [//jsfiddle.net/RMpFu/](http://jsfiddle.net/RMpFu/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-13T19:26:15.513

`overflow`在 CSS 中使用：

```
document.querySelector("div").style.overflowY = "scroll";  //For Y
document.querySelector("div").style.overflowX = "scroll";  //For X

document.querySelector("div").style.overflow = "scroll";   //For both ;) 
```

## 附言

如果您希望它仅在必要时显示滚动条，您可以这样做：

```
document.querySelector("div").style.overflow = "auto";    //JavaScript

//-or-

div{
    overflow: auto;                       /*CSS*/
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T12:03:58.137

```
<script type="text/javascript">
$(function() { 
   $('.holeEvent').hover(function() {
      $(this).removeClass('holeEvent').addClass('holeEvent2');
   },
   function(){
      $(this).removeClass('holeEvent2').addClass('holeEvent');
   });
});
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T12:07:55.127

```
<style type="text/css">
.holeEvent {
   height: 50px;
   overflow-y: hidden;
}
.holeEvent2 {
   height: 50px;
   overflow-y: scroll;
}
</style>

<div class="holeEvent2"></div> 
```

# java - 逐字节读取流

> ID：10574501
> 
> 赞同：0
> 
> 时间：2012-05-13T19:19:10.097
> 
> 标签：java, http

这是我的心理挑战，当我在**HttpRequest**或任何输入流中设置字节范围时，选择下载的时间间隔是多少？！闭区间 [start, end] 还是左闭右开 [start, end) ?!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:23:00.587

查看[HTTP 规范，第 14 章：标头字段定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)：

> ## 14.35 范围
> 
> ### 14.35.1 字节范围
> 
> byte-range-spec 中的 first-byte-pos 值给出了范围内第一个字节的字节偏移量。last-byte-pos 值给出了范围内最后一个字节的字节偏移量；也就是说，指定的字节位置包括在内。字节偏移量从零开始。

那里的例子非常具有描述性：

> 字节范围说明符值的示例（假设实体主体的长度`10000`）：
> 
> *   前 500 个字节（字节偏移量 0-499，含）：bytes=0-499
> *   第二个500字节（字节偏移量500-999，含）：bytes=500-999
> *   最后 500 个字节（字节偏移量 9500-9999，包括）：bytes=-500
> *   或字节=9500-

简而言之：间隔关闭（包括）并且要下载的字节数为`last - first + 1`.

# android - adb连接报错：现有连接被远程主机强行关闭

> ID：10574503
> 
> 赞同：2
> 
> 时间：2012-05-13T19:19:28.910
> 
> 标签：android, eclipse, debugging, adb

我正在尝试连接我的 HTC Wildfire，我已激活（USB 调试）并将其连接到 pc，但 Eclipse 无法识别它

还有那个错误：Adb connection Error:An existing connection was forcefully closed by the remote host

我重置了 adb 但发生了同样的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:37:15.133

使用[这个](http://code.google.com/p/android/issues/detail?id=12141)修补过的 adb 版本希望它对你有用，我得到了与我的 htc 愿望相似的东西，并且补丁对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T02:05:09.193

安装 HTC Windows 驱动后，它工作正常！

# c# - 如何使用 .TryParse 在通用方法中，而 T 为 double 或 Int

> ID：10574504
> 
> 赞同：24
> 
> 时间：2012-05-13T19:19:31.210
> 
> 标签：c#, generics

在我的一个项目中，我使用了以下两种方法。1\. GetDoubleValue 和 2\. GetIntValue。GetDoubleValue 使用 double.TryParse 参数 str 字符串，如果失败则返回 0，而 GetIntValue 尝试 int.TryParse 参数 str 字符串，如果失败则返回 0。我想要的是将这两种方法组合成一个通用方法，该方法与字符串 str 一起接收参数 T ，这样如果我想使用 GetDoubleValue 方法，我可以使用 double 作为参数 T ，如果我想使用 GetIntValue 方法，我可以使用参数 T 的 Int

```
public double GetDoubleValue(string str)
{
    double d;
    double.TryParse(str, out d);
    return d;
}
public int GetIntValue(string str)
{
    int i;
    int.TryParse(str, out i);
    return i;
} 
```

注意：我尝试过这样的事情；

```
private T GetDoubleOrIntValue<T>(string str) where T : struct 
{
    T t;
    t.TryParse(str, out t);
    return t;
} 
```

**编辑**

在我的数据库中，我在具有数字数据类型的不同表中有 30 多个列。如果用户没有在文本框中键入任何内容，即他将所有或部分文本框留空，我想在每列中插入 0。如果我不使用 GetIntValue 方法，我将不得不使用方法体超过 30 次。这就是为什么我通过方法方法来做到这一点。例如，我正在写三十多个示例中的三个

```
cmd.Parameters.Add("@AddmissionFee", SqlDbType.Decimal).Value = GetIntValue(tbadmissionfee.Text);
cmd.Parameters.Add("@ComputerFee", SqlDbType.Decimal).Value = GetIntValue(tbcomputerfee.Text);
cmd.Parameters.Add("@NotesCharges", SqlDbType.Decimal).Value = GetDoubleValue(tbnotescharges.Text); 
```

我想将上述两种方法结合起来，因为今天我有两种这样的方法，如果结合起来不会给编程带来任何更好的改进，但明天我可能会有数十种这样的方法，它们会更好地组合成一个通用方法。例如，我可能有 GetInt32Value、GetShortValue 等。希望现在清楚我为什么要这个？？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-13T19:41:38.073

我会考虑编写一个扩展或静态方法：

```
delegate bool TryParse<T>(string str, out T value);

public static T GetValue<T>(this string str, TryParse<T> parseFunc)
{
    T val;
    parseFunc(str, out val);
    return val;
} 
```

然后，您必须提供`TryParse`要使用的实现：

```
int i = "1234".GetValue<int>(int.TryParse); 
```

请注意，如果解析失败，此函数会静默返回默认值。`default(T)`如果`TryParse`委托返回 false ，您可能希望返回。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-13T19:40:57.280

我同意马克拜尔斯的观点。尝试使此方法通用可能不是一个好主意。一点点代码重复不会有什么坏处（只要它真的只是一点点）。您可以将任何与您的通用版本一起使用的事实`struct`也不会使它看起来对我来说是一个好主意。

如果你真的想这样做，你可以尝试使用反射（就像 Minusar 建议的那样），但这既丑陋又慢。

相反，您可以使用[`Convert.ChangeType()`](http://msdn.microsoft.com/en-us/library/dtb69x08.aspx)：

```
private T GetValue<T>(string str) where T : struct 
{
    return (T)Convert.ChangeType(str, typeof(T));
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-13T19:31:40.233

所以不要写：

```
double d = GetDoubleValue(str); 
```

你想写这个吗？

```
double d = GetValue<double>(str); 
```

即使你可以让它工作，有什么好处？我个人认为这对客户来说并不是一个巨大的进步。唯一的优点是不必两次实施相同的方法。但是考虑到方法的简单性和实现这种代码重用的难度，这里只复制那几行代码似乎是合理的。

你不是一个人遇到这个问题。看看 .NET 框架中适用于不同类型的其他方法，看看它们是如何解决它的。以下是`BinaryReader`允许您阅读不同类型的方法：

*   [BinaryReader.ReadBoolean](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.readboolean)
*   [BinaryReader.ReadByte](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.readbyte)
*   [BinaryReader.ReadChar](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.readchar)
*   [BinaryReader.ReadInt32](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.readint32)
*   ETC..

这并不漂亮，但通常就是这样做的。

* * *

关于你的更新，我还有两点要说。

您提到您可能有两种以上的类型，这可能导致相同代码的更多重复。鉴于该方法非常简洁和简单，复制和粘贴代码似乎没有问题。在我看来，你不应该复制和粘贴代码是一个合理的例外。[这里](http://geekswithblogs.net/michelotti/archive/2008/10/05/tryparse-extension-methods.aspx)的方法减少了重复的数量，尽管您仍然需要在公共接口中使用许多类似命名的方法。

但是，我认为重要的是要提到在您的情况下静默使用默认值似乎是错误的，正如 Lee 在评论中已经提到的那样。如果用户在输入数据时出错，他们应该会收到一条错误消息。您应该使用某种验证框架来确保字符串有效，并在它们无效时通知您的用户问题出在哪里。一旦您验证了所有内容，它就可以安全使用`int.Parse`，而不是`int.TryParse`因为您知道解析会成功。如果解析确实失败，那是一种特殊情况（验证中的错误），因此应用程序因异常而退出并记录堆栈跟踪似乎是公平的。这将帮助您找到并修复错误。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-13T20:34:54.807

你可以这样做：

```
 public static T GetDoubleOrIntValue<T>(this string str) where T : IConvertible
{
    var thisType = default(T);
    var typeCode = thisType.GetTypeCode();
    if (typeCode == TypeCode.Double)
    {
        double d;
        double.TryParse(str, out d);
        return (T)Convert.ChangeType(d,typeCode) ;
    }
    else if (typeCode == TypeCode.Int32)
    {
        int i;
        int.TryParse(str, out i);
        return (T)Convert.ChangeType(i, typeCode);
    }
    return thisType;
} 
```

然后当你调用它时：

```
string d = "1.1";
string i = "3";

double doubleValue = d.GetDoubleOrIntValue<double>();
int intValue = i.GetDoubleOrIntValue<int>(); 
```

但整件事对我来说似乎有点傻。

编辑：看到其他人使用 Convert.ChangeType... 它提供了一个通用的返回类型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-13T19:31:19.483

您可以尝试使用反射：首先，尝试在由 <T> 替换的类型上找到“TryParse”方法。

```
T t;
var typeInfo = typeof(T);
var method = typeInfo.GetMethod("TryParse", BindingFlags.Public | BindingFlags.Static);
var result = (bool)method.Invoke(null, new object[] { str, t });

if (result)
    return t; 
```

此代码未经测试；在性能方面也不是最佳的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-13T19:39:57.873

我做了一个简单的示例。该代码不是最佳的，但可以按预期工作。

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine(GetValue<int>("123"));
        Console.WriteLine(GetValue<double>("123.123"));
        Console.WriteLine(GetValue<DateTime>("2001-01-01 01:01:01"));
    }

    static T GetValue<T>(string s)
    {
        var tryParse = typeof (T).GetMethod(
            "TryParse", new [] {typeof(string), typeof(T).MakeByRefType()});
        if (tryParse == null)
            throw new InvalidOperationException();

        T t = default (T);
        var parameters = new object[] {s, t};
        var success = tryParse.Invoke(null, parameters);
        if ((bool) success) t = (T)parameters[1];
        return t;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-13T19:40:41.937

如您所见，您不能限制`where T`为`Double`or `Int32`，这就是为什么您可能`struct`在那个地方有（int 和 double 不是结构）。值类型不能用作泛型的限制。

所以你不能键入安全的确保`TryParse`方法存在。您应该对 T 进行类型检查，如果它是 double 或 int 则抛出异常，就像@ie 的回答一样。

我的建议是使用不同的签名：

```
private static bool GetValue(string str, out double result)
{
...    
}

private static bool GetValue(string str, out int result)
{
...    
} 
```

或者，您可以引入一个接口`IParsable`。将结果框`double`或`int`结果放入其中并实现隐式转换为双精度或整数。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-05T12:20:16.343

扩展方法呢？

```
public static class Extensions
{    
    public static Nullable<T> TryParse<T>(this String str) where T:struct
    {
        try
        {
            T parsedValue = (T)Convert.ChangeType(str, typeof(T));
            return parsedValue;
        }
        catch { return null; }
    }
} 
```

用法 ：

```
int i = "123".TryParse<int>() ?? 0; 
```

# playframework - 播放框架 2.0 - 意外异常 - 未找到密钥：来源

> ID：10574514
> 
> 赞同：15
> 
> 时间：2012-05-13T19:22:07.603
> 
> 标签：playframework

我在尝试启动 Play 2.0 应用程序时收到未找到密钥的错误消息。我实际上认为我没有改变任何东西，这个错误只是弹出来。其实我做了一件事。我打开文件夹 target/scala-2.9.1/src_managed/main 中的文件并关闭它（我没有更改任何内容，也没有保存或删除文件）。但是在重新加载应用程序后，我收到了这个错误。知道我能做什么吗？

> [info] play - 在端口 9000 上侦听 HTTP...
> 
> （服务器已启动，使用 Ctrl+D 停止并返回控制台...）
> 
> [错误] {file:/Volumes/INPROG/03_Projects/06_Play_Applications/Space-for-Art/}Space-for-Art/compile:sources: java.util.NoSuchElementException: key not found: SOURCE [error] application -
> 
> ！内部服务器错误，请求 [GET /] ->
> 
> play.api.UnexpectedException: sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2$$anonfun$apply$11.apply(PlayReloader.scala:228) 出现意外异常 [NoSuchElementException: key not found: SOURCE] ~[na:na] at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2$$anonfun$apply$11.apply(PlayReloader.scala:221) ~[na:na] at scala.Option。地图（Option.scala:133）~[scala-library.jar:0.11.2] at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2.apply（PlayReloader.scala:221）~[na :na] at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2.apply(PlayReloader.scala:219) ~[na:na] at scala.Either$LeftProjection.map(Either.scala:183 ) ~[scala-library.jar:0.11.2] java.util.NoSuchElementException: key not found: SOURCE at scala.collection.MapLike$class.default(MapLike.scala:224) ~[scala-library.jar:0.11 .2] 在 scala.collection.immutable.Map$EmptyMap$.default(Map.scala:87) ~[scala-library.jar:0.11.2] 在 scala.collection.MapLike$class.apply(MapLike.scala:135 ) ~[scala-library.jar:0.11.2] at scala.collection.immutable.Map$EmptyMap$.apply(Map.scala:87) ~[scala-library.jar:0.11.2] at play.templates。 GeneratedSource.source(ScalaTemplates.scala:145) ~[templates_2.9.1.jar:2.0] at play.templates.GeneratedSource.sync(ScalaTemplates.scala:154) ~[templates_2.9.1.jar:2.0]145) ~[templates_2.9.1.jar:2.0] at play.templates.GeneratedSource.sync(ScalaTemplates.scala:154) ~[templates_2.9.1.jar:2.0]145) ~[templates_2.9.1.jar:2.0] at play.templates.GeneratedSource.sync(ScalaTemplates.scala:154) ~[templates_2.9.1.jar:2.0]

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-14T14:55:17.977

执行

```
play clean update 
```

刷新编译的文件。然后运行：

```
play run 
```

那应该解决它

# wcf - 关于 wcf 属性和客户端/服务器通信

> ID：10574516
> 
> 赞同：0
> 
> 时间：2012-05-13T19:22:15.923
> 
> 标签：wcf

我不知道 wcf，但很快我就必须学会它。所以我浏览了一些在线教程和小示例代码。所以我想到了一些问题，比如

1）为什么服务必须有一个接口？

2）为什么服务接口需要像服务契约这样的属性来装饰？

3）为什么所有的接口方法签名都必须用操作契约来修饰。

4）服务合同和运营合同是什么意思。这些属性实际上做了什么。

5) 什么是数据合约？当一种方法应该用数据契约之类的属性进行修饰时。

6）我熟悉网络服务。我看到 web 服务与任何端口都不相关，但 wcf 总是与端口相关....为什么？

7）当我在控制台应用程序中托管一个小型 hello world wcf 服务应用程序并在远程计算机上启动时，我的客户端无法连接它。原因可能是端口未转发。有时我们可以托管 wcf，但我们不能进入路由器，所以在这种情况下我们不能转发端口。只是告诉我在那种情况下 wcf 客户端如何连接到服务器？

8) 当我们在任何远程机器上托管 wcf 时，我们可以创建端口并以编程方式转发它吗？

如果可能的话，请在这里详细讨论我的观点。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:15:44.920

WCF 是一种在客户端和服务器之间传输数据的技术。

你点1到5，都是为了告诉WCF要传输什么，以便WCF可以在一侧序列化信息并在另一侧反序列化它，

对于您的第 6 点：WCF 涵盖了包括 Web 服务在内的多种技术。默认 WCF 配置与基本 Web 服务相同。Web 服务默认使用端口 80。

对于您的第 7 点，两者都没有暂停控制台应用程序，因此当您尝试连接它时它没有运行。或者您正在使用的端口被防火墙阻止。

关于您的第 8 点，WCF 4 支持路由。

# google-app-engine - google eclipse 3.7 插件 2.6.0.v201205021203-rel-r37 jpa 问题

> ID：10574518
> 
> 赞同：1
> 
> 时间：2012-05-13T19:22:43.207
> 
> 标签：google-app-engine, jpa, eclipse-plugin

我在部署 appengine 时遇到问题。在应用程序部署结束时，我收到以下错误

```
An internal error occurred during: "Deploying My GWT AppEngine to Google".
org/eclipse/jpt/jpa/core/JpaProject 
```

应用程序已部署，但如果我运行该版本，我的数据会出现问题，会出现以下错误日志。

```
The class "The class "com.example.mygwt.engine.bean.Bean" is not persistable. 
This means that it either hasnt been enhanced, or that the enhanced version 
of the file is not in the CLASSPATH (or is hidden by an unenhanced version), 
or the Meta-Data/annotations for the class are not found." is not persistable. 
```

在更新 google eclipse 插件之前我没有这个问题。

**日食崩溃日志**

```
eclipse.buildId=M20120208-0800
java.version=1.6.0_15
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Command-line arguments:  -os win32 -ws win32 -arch x86_64

Error
Wed May 16 13:03:13 EDT 2012
An error occurred while automatically activating bundle org.eclipse.jpt.jpa.core (295).

org.osgi.framework.BundleException: The activator org.eclipse.jpt.jpa.core.JptJpaCorePlugin for bundle org.eclipse.jpt.jpa.core is invalid
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:171)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:679)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:299)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:268)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:463)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:476)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:345)
    at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1207)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.core.internal.content.ContentType.getDescriber(ContentType.java:271)
    at org.eclipse.core.internal.content.ContentTypeCatalog.collectMatchingByContents(ContentTypeCatalog.java:184)
    at org.eclipse.core.internal.content.ContentTypeCatalog.internalFindContentTypesFor(ContentTypeCatalog.java:403)
    at org.eclipse.core.internal.content.ContentTypeCatalog.internalFindContentTypesFor(ContentTypeCatalog.java:450)
    at org.eclipse.core.internal.content.ContentTypeCatalog.getDescriptionFor(ContentTypeCatalog.java:346)
    at org.eclipse.core.internal.content.ContentTypeCatalog.getDescriptionFor(ContentTypeCatalog.java:360)
    at org.eclipse.core.internal.content.ContentTypeMatcher.getDescriptionFor(ContentTypeMatcher.java:86)
    at org.eclipse.core.internal.resources.ContentDescriptionManager.readDescription(ContentDescriptionManager.java:445)
    at org.eclipse.core.internal.resources.ContentDescriptionManager.getDescriptionFor(ContentDescriptionManager.java:355)
    at org.eclipse.core.internal.resources.File.internalGetCharset(File.java:246)
    at org.eclipse.core.internal.resources.File.getCharset(File.java:207)
    at org.eclipse.core.internal.resources.File.getCharset(File.java:194)
    at org.eclipse.core.internal.filebuffers.ResourceTextFileBuffer.cacheEncodingState(ResourceTextFileBuffer.java:479)
    at org.eclipse.core.internal.filebuffers.ResourceTextFileBuffer.initializeFileBufferContent(ResourceTextFileBuffer.java:281)
    at org.eclipse.core.internal.filebuffers.ResourceFileBuffer.create(ResourceFileBuffer.java:245)
    at org.eclipse.core.internal.filebuffers.TextFileBufferManager.connect(TextFileBufferManager.java:112)
    at org.eclipse.wst.sse.core.internal.FileBufferModelManager.getModel(FileBufferModelManager.java:660)
    at org.eclipse.wst.sse.core.internal.model.ModelManagerImpl._doCommonGetModel(ModelManagerImpl.java:544)
    at org.eclipse.wst.sse.core.internal.model.ModelManagerImpl._commonGetModel(ModelManagerImpl.java:508)
    at org.eclipse.wst.sse.core.internal.model.ModelManagerImpl._commonGetModel(ModelManagerImpl.java:481)
    at org.eclipse.wst.sse.core.internal.model.ModelManagerImpl.getModelForRead(ModelManagerImpl.java:1419)
    at com.google.gdt.eclipse.core.SseUtilities.getModelForRead(SseUtilities.java:142)
    at com.google.gwt.eclipse.core.uibinder.validators.UiBinderJavaValidator$UiBinderSubtypeVisitor.parseAndValidateUiXml(UiBinderJavaValidator.java:291)
    at com.google.gwt.eclipse.core.uibinder.validators.UiBinderJavaValidator$UiBinderSubtypeVisitor.visit(UiBinderJavaValidator.java:257)
    at org.eclipse.jdt.core.dom.TypeDeclaration.accept0(TypeDeclaration.java:467)
    at org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2514)
    at org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2585)
    at org.eclipse.jdt.core.dom.TypeDeclaration.accept0(TypeDeclaration.java:484)
    at org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2514)
    at org.eclipse.jdt.core.dom.ASTNode.acceptChildren(ASTNode.java:2585)
    at org.eclipse.jdt.core.dom.CompilationUnit.accept0(CompilationUnit.java:219)
    at org.eclipse.jdt.core.dom.ASTNode.accept(ASTNode.java:2514)
    at com.google.gwt.eclipse.core.uibinder.validators.UiBinderJavaValidator.validate(UiBinderJavaValidator.java:519)
    at com.google.gwt.eclipse.core.validators.java.JavaCompilationParticipant$2.acceptAST(JavaCompilationParticipant.java:393)
    at org.eclipse.jdt.core.dom.CompilationUnitResolver.resolve(CompilationUnitResolver.java:883)
    at org.eclipse.jdt.core.dom.CompilationUnitResolver.resolve(CompilationUnitResolver.java:577)
    at org.eclipse.jdt.core.dom.ASTParser.createASTs(ASTParser.java:894)
    at org.eclipse.jdt.internal.corext.dom.ASTBatchParser.createASTs(ASTBatchParser.java:100)
    at com.google.gwt.eclipse.core.validators.java.JavaCompilationParticipant.handleBuildStarting(JavaCompilationParticipant.java:326)
    at com.google.gwt.eclipse.core.validators.java.JavaCompilationParticipant.access$0(JavaCompilationParticipant.java:307)
    at com.google.gwt.eclipse.core.validators.java.JavaCompilationParticipant$1.run(JavaCompilationParticipant.java:191)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: java.lang.ExceptionInInitializerError
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:166)
    ... 63 more
Caused by: java.lang.IllegalArgumentException: Project facet jst.web has not been defined.
    at org.eclipse.wst.common.project.facet.core.internal.FacetedProjectFrameworkImpl.getProjectFacet(FacetedProjectFrameworkImpl.java:234)
    at org.eclipse.wst.common.project.facet.core.ProjectFacetsManager.getProjectFacet(ProjectFacetsManager.java:75)
    at org.eclipse.jpt.jpa.core.JptJpaCorePlugin.<clinit>(JptJpaCorePlugin.java:210)
    ... 70 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:35:54.697

不是想要的修复。我已经下载了新的 eclipse 3.7.2 并重新安装了插件。

# javascript - 从文本中提取 JSON

> ID：10574520
> 
> 赞同：13
> 
> 时间：2012-05-13T19:22:57.220
> 
> 标签：javascript, regex, json

AJAX 调用正在返回包含 JSON 字符串的响应文本。我需要：

1.  提取 JSON 字符串
2.  修改它
3.  然后重新插入它以更新原始字符串

我不太担心第 2 步和第 3 步，但我不知道如何执行第 1 步。我正在考虑使用正则表达式，但我不知道我的 JSON 可能有多级嵌套对象或数组。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-13T19:26:50.573

您不能使用正则表达式从任意文本中提取 JSON。由于正则表达式通常[不足以验证 JSON](https://stackoverflow.com/a/2583491/298479)（除非您可以使用 PCRE），因此它们也无法匹配它 - 如果可以，它们也可以验证 JSON。

但是，如果您知道 JSON 的顶级元素始终是对象或数组，则可以采用以下方法：

*   找到字符串中的第一个开始（`{`或`[`）和最后一个结束（`}`或`]`）大括号。
*   尝试使用 . 解析该文本块（包括大括号）`JSON.parse()`。如果成功，则完成并返回解析结果。
*   取前一个右括号并尝试解析该字符串。如果成功，您将再次完成。
*   重复此操作，直到您没有大括号或当前开口大括号之前的大括号。
*   找到第 1 步中的第一个左大括号。如果没有找到，则字符串不包含 JSON 对象/数组，您可以停止。
*   转到第 2 步。

这是一个提取 JSON 对象并返回对象及其位置的函数。如果您也确实需要顶级数组，则应该扩展：

```
function extractJSON(str) {
    var firstOpen, firstClose, candidate;
    firstOpen = str.indexOf('{', firstOpen + 1);
    do {
        firstClose = str.lastIndexOf('}');
        console.log('firstOpen: ' + firstOpen, 'firstClose: ' + firstClose);
        if(firstClose <= firstOpen) {
            return null;
        }
        do {
            candidate = str.substring(firstOpen, firstClose + 1);
            console.log('candidate: ' + candidate);
            try {
                var res = JSON.parse(candidate);
                console.log('...found');
                return [res, firstOpen, firstClose + 1];
            }
            catch(e) {
                console.log('...failed');
            }
            firstClose = str.substr(0, firstClose).lastIndexOf('}');
        } while(firstClose > firstOpen);
        firstOpen = str.indexOf('{', firstOpen + 1);
    } while(firstOpen != -1);
}

var obj = {'foo': 'bar', xxx: '} me[ow]'};
var str = 'blah blah { not {json but here is json: ' + JSON.stringify(obj) + ' and here we have stuff that is } really } not ] json }} at all';
var result = extractJSON(str);
console.log('extracted object:', result[0]);
console.log('expected object :', obj);
console.log('did it work     ?', JSON.stringify(result[0]) == JSON.stringify(obj) ? 'yes!' : 'no');
console.log('surrounding str :', str.substr(0, result[1]) + '<JSON>' + str.substr(result[2])); 
```

演示（在 nodejs 环境中执行，但也应该在浏览器中工作）：[https ://paste.aeum.net/show/81/](https://paste.aeum.net/show/81/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-29T06:44:58.450

对于其他正在寻找（就像我一样）从一般文本中提取 JSON 字符串（即使它们无效）的人，您可以查看这个 Gulp 插件[https://www.npmjs.com/package/gulp -extract-json-like](https://www.npmjs.com/package/gulp-extract-json-like)。它搜索所有看起来像 JSON 字符串一样格式化的字符串。

创建一个文件夹并安装软件包。

```
mkdir project && cd project
npm install gulp gulp-extract-json-like 
```

创建一个文件`./gulpfile.js`并将以下内容放入其中：

```
var gulp = require('gulp');
var extractJsonLike = require('gulp-extract-json-like');

gulp.task('default', function () {
  return gulp.src('file.txt')
    .pipe(extractJsonLike())
    .pipe(gulp.dest('dist'));
}); 
```

创建一个名为的文件`./file.txt`，其中包含您的文本并运行以下命令。

```
gulp 
```

找到的 JSON 字符串将在`./dist/file.txt`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T19:38:38.187

如果 JSON 作为 ajax 响应的一部分返回，为什么不使用浏览器的原生 JSON 解析（小心[陷阱](http://dbj.org/dbj/?p=470)）？还是[jQuery JSON 解析](http://api.jquery.com/jQuery.parseJSON/)？

如果 JSON 完全与文本混淆，那真的是设计问题恕我直言 - 如果您可以更改它，我强烈建议您这样做（即返回单个 JSON 对象作为响应，文本作为属性物体）。

如果没有，那么使用 RegEx 将是一场绝对的噩梦。JSON 天生就非常灵活，确保准确解析不仅费时，而且浪费。我可能会在开始/结束时放置内容标记，并希望最好。但是您将对验证错误等持开放态度。

# ruby-on-rails - 如何使用 Formtastic 和 ActiveAdmin 显示具有一对多关系的链接

> ID：10574524
> 
> 赞同：2
> 
> 时间：2012-05-13T19:23:12.967
> 
> 标签：ruby-on-rails, activeadmin, formtastic

我有一对多的关系（故事有很多调查）。如何使“索引”和“显示”页面显示调查链接而不是文本（如它们当前显示的那样）？

```
ActiveAdmin.register Story do
  actions :all

  form do |f|
    f.inputs
    f.buttons
  end

  index do
    column :surveys
    default_actions
  end

  show do
    attributes_table do
      row :surveys
    end
    active_admin_comments
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T00:33:22.170

你可以这样做：

```
...
column 'Surveys' do |story|
  story.surveys.map { |survey|
    link_to survey.name, admin_survey_path(survey)
  }.join("<br/>").html_safe
end

...
row 'Surveys' do |story|
  story.surveys.map { |survey| 
    link_to survey.name, admin_survey_path(survey)
  }.join("<br/>").html_safe
end 
```

# java - 在Java中返回多个值

> ID：10574526
> 
> 赞同：5
> 
> 时间：2012-05-13T19:23:21.143
> 
> 标签：java, return-value

序言：我知道使用列表或其他集合来返回结果，但是我必须通过列表来提取结果：参见第二个示例

序言 2：我正在寻找“Java 不支持此功能......”之外的答案

* * *

我正在寻找一种方便的方法来从 Java 方法调用中返回多个对象。

有点像在 PHP 中：

```
list ($obj1, $obj2, ...) foobar(); 
```

我真的厌倦了在参数中传递持有者对象，例如：

```
class Holder {
   int value;
}

Holder h1=new Holder();
Holder h2=new Holder(); 
```

进而：

```
o.foobar(h1,h2); 
```

...如果有人想出一种优雅的方式来解决这个问题，将会非常感兴趣。

* * *

使用列表

```
List<String> = foobar(); 
```

这样做有两个缺点：

我必须首先在房子的被叫方打包列表：

```
// this is on the callee side of the house
ArrayList<String> result = new ArrayList<String>
result.add("foo");
result.add("bar"); 
```

然后在调用方我必须提取结果：

```
// This is on the caller side
List<String> result = foobar();
String result1 = result.get(0);
String result2 = result.get(1); // this is not as elegant as the PHP equivalent 
```

此外，假设我想返回不同类型的对象，比如 String、Integer，我将不得不返回一个对象列表，然后强制转换每个对象......不漂亮

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T22:13:32.473

使用通用元组类是我能想象的最接近的。给出一个想法，用于三个返回值的通用类可能看起来像这样：

```
public class T3<A, B, C> {
    A _1;
    B _2;
    C _3;
    T3(A _1, B _2, C _3) {
        this._1 = _1;
        this._2 = _2;
        this._3 = _3;
    }
} 
```

这允许在被调用方的单语句构造函数，例如：

```
public T3<String, Integer, Character> getValues() {
    return new T3<String, Integer, Character>("string", 0, 'c');
} 
```

但是被调用者不进行任何持有者实例构造。

每个返回值的数量都需要一个自己的元组类。[功能 Java 库](http://code.google.com/p/functionaljava/)中可能提供了类似的东西。作为参考，这里有一个[N-Tuple implementation](https://stackoverflow.com/a/3642623)。

对于二值情况 java.util.AbstractMap.SimpleEntry 会做：

```
return new SimpleEntry<String, Integer>("string", 0); 
```

无论如何，我看到多个返回值需要考虑的两个要点：

1.  键入的返回值
2.  指出每个返回值的含义

尽管很无聊，但我建议创建一个单独的类来保存所有响应值并将其声明为方法返回类型。这样可以突出显示每个值的含义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-13T19:26:26.743

您可以使用带有这样签名的方法：

```
List<Holder> foobar(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-13T19:25:49.153

你能返回一个[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html), [`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html), 或[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-13T20:10:49.730

返回一个扩展的 Holder 似乎比返回一个 List 更好：

```
class Holder {
    int value1;
    String value2;
    Holder(int value1, String value2) {}
}

Holder foobar() {
    return new Holder(1, "bar");
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-13T20:59:18.720

如果您需要返回多个相同类型的值，则 List 或 Set 是合适的。例如，将可变长度的用户名列表作为列表返回是完全有效的。如果你知道你总是要返回固定数量的值，我会使用一个数组。例如，在一个将某种用户 ID 作为三个不同整数返回的方法中，我会使用：

```
public int[] getUserId(){
    int[] returnArray = new int[3];
    returnArray[0] = getFirstPart();
    returnArray[1] = getSecondPart();
    returnArray[2] = getThirdPart();

    return returnArray;
} 
```

在调用者代码中，获取值就像`array[0]`,`array[1]`和一样简单`array[2]`。这比 Collection 容易得多，而且您不会破坏任何东西，因为用户 ID 被定义为三个整数。

如果你真的需要返回多个不同的值，那么持有者类是最好的选择，没有其他办法。Java 不支持多个返回值。但我宁愿从设计的角度来看解决方案。如果一个类需要返回多个不同的值，那么它可能会做很多事情，其中​​一些与其他无关。一段代码（一个类、一个方法）应该总是有一个明确的目的和明确定义的职责。与其返回多个不同的值，我会考虑将方法拆分为多个较短的方法或定义一个接口来外部化所有功能。如果这些返回值以任何方式相关并且如果分开就没有意义，那么我认为它们应该单独上一堂课。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-13T19:37:23.897

为此，您可以使用任何[Collection类。](http://www.falkhausen.de/en/diagram/html/java.util.Collection.html)本[课程](http://docs.oracle.com/javase/tutorial/collections/implementations/index.html)可能会帮助您确定最适合您的方法。

# java - 如果（）不工作

> ID：10574534
> 
> 赞同：1
> 
> 时间：2012-05-13T19:24:48.720
> 
> 标签：java, android

这是我的代码：

```
Log.d("inf", loader);
if (loader == "Klasse"){
    Log.d("inf", "Klasse yes");
    OPTS = new String[] { //Something };
} else {
    Log.d("inf", "Klasse no");
    OPTS = new String[] { //Something };
} 
```

在第一行中，输出正好是“Klasse”，但下一个输出每次都是“Klasse no”。loader String 设置如下：

```
String loader = "";
Bundle exta = getIntent().getExtras();
    if(exta !=null) {
        try {
            json = new JSONObject(exta.getString("json"));
            loader = exta.getString("order");
        } catch (JSONException e) {
            e.printStackTrace();
        }
    } 
```

你们有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-13T19:26:18.383

`==`比较运算符比较引用而不是值。您需要比较这些值，因此需要使用该`equals()`方法。

```
if (loader.equals("Klasse")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:27:39.013

`==`恒等式 ( ) 和等式 ( )是有区别的`equals()`。身份测试对象指针是否相同，因此几乎永远不会是正确的。平等测试对象“值”是否相同，所以它几乎总是你需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T19:29:12.540

字符串比较应始终使用 equals 方法进行。

```
if(loader.equals("Klasse")) { .... } 
```

这是因为 String 是一个类，通过使用 '==' 你可以检查它们是否是同一个对象，它们不是。Equals 检查您正在比较的字符串是否相等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T23:28:14.700

如果 == 或 === 不起作用，请使用 .equals

# python - 我需要在管理器中使用模型中的字段值构建自定义函数

> ID：10574545
> 
> 赞同：0
> 
> 时间：2012-05-13T19:26:37.140
> 
> 标签：python, django, function, django-models

我正在尝试在模型管理器中创建自定义函数：

```
class MessageManager(models.Manager):
    # Return body from last child message
    def get_last_child_body(self):
        if self.has_childs:
            last_child = self.filter(parent_msg=self.id).order_by('-send_at')[0]
            return last_child.body 
```

我想在模板中使用这个函数（“get_last_child_body”）

```
{% message.get_last_child_body %} 
```

从插入到表消息中的最后一条子消息中检索正文。

消息模型：

```
class Message(models.Model):
    sender = models.ForeignKey(User, related_name='sent_messages')
    recipient = models.ForeignKey(User, related_name='received_messages')
    parent_msg = models.ForeignKey('self', related_name='next_messages', null=True, blank=True)
    has_childs = models.BooleanField()
    subject = models.CharField(max_length=120)
    body = models.TextField()
    send_at = models.DateTimeField()
    read_at = models.DateTimeField(null=True, blank=True)
    replied_at = models.DateTimeField(null=True, blank=True)
    sender_deleted_at = models.DateTimeField(null=True, blank=True)
    recipient_deleted_at = models.DateTimeField(null=True, blank=True)

    objects = MessageManager()

    def get_last_child(self):
        if not self.has_childs:
            return None

    class Meta:
        get_latest_by = 'send_at'
        ordering = ['-send_at'] 
```

好吧，我猜问题出在管理器中自定义函数的“id”中。我必须传递父消息 ID，但我不知道该怎么做。

它不报告任何错误，只是在模板中不显示任何内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T22:49:58.180

管理器应用于特定于模型的运算符。但是，在这里您正在执行特定于实例的操作，因此`get_last_child_body`应该在您的`Message`类中。

在您提到的评论中，您试图移动它。它应该工作，其他可能是错误的。您应该验证：

1.  消息在模板中定义（例如使用 if 模板标签来记录结果）
2.  get_last_child_body 被调用（例如使用打印语句）
3.  继续深入调试仍然没有结果（如果对您来说最简单，打印语句可以工作）

# c# - C# 使用按位运算比较字节

> ID：10574548
> 
> 赞同：0
> 
> 时间：2012-05-13T19:27:05.490
> 
> 标签：c#, compare, bytearray, byte, bitwise-operators

我正在尝试在 C# 中编写一个方法，该方法将通过比较数组中的每个字节并返回第二个字节（如果它与第一个不同）来返回两个字节数组之间的差异。到目前为止我有这个：

```
 byte[] b1 = 111;
        byte[] b2 = 105;

        int j = input.Length;

        byte[] differenceByte = new byte[j];

        int diffIndex = 0;

        for (int i = 0; i < j; i++)
        {
            if (originalByte[i] != comparisonByte[i])
                differenceByte[diffIndex++] = comparisonByte[i];
        } 
```

但我希望找到一种方法来替换比较第一个字节和第二个字节的 if 语句，用一些按位的巫术魔法......有没有办法做到这一点？

第二个问题是否有任何其他方法可以优化此代码以使其尽可能快地运行？

我最终希望通过将字符串转换为字节数组和从字节数组转换来使用此代码来比较两个字符串，因此，如果在这方面我应该知道一些事情，那也会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:31:05.290

等式运算符对位进行操作。
没有可以改进相等运算符的按位巫术魔法。

# r - 使用 knitr 将图彼此相邻对齐

> ID：10574552
> 
> 赞同：22
> 
> 时间：2012-05-13T19:27:48.077
> 
> 标签：r, latex, knitr

我已经使用 knitr 几天了，非常棒！:)

目前，我正在努力在输出文件（PDF）中对齐两个相邻的图。据我了解，这应该通过`out.width='.4\\linewidth'`在块选项中设置或类似的东西来实现。

生成的地块非常小，2 很容易彼此相邻，但不知何故，所有地块都放在彼此下方。

我也无法将乳胶表（`xtable`-output 与`results='asis'`-option）对齐到文档的左侧。写在旁边就好了。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-13T20:59:23.010

由于您还没有提供，我会为您提供：

```
\documentclass{article}
\begin{document}

Side by side images:

\begin{figure}[htpb]
<<myChunk, fig.width=3, fig.height=2.5, out.width='.49\\linewidth', fig.show='hold'>>=
par(mar=c(4,4,.1,.1),cex.lab=.95,cex.axis=.9,mgp=c(2,.7,0),tcl=-.3)
plot(cars)
boxplot(cars$dist,xlab='dist')
@
\end{figure}

Ta da!

\end{document} 
```

**当我运行knitr**时，这导致我看起来大致像这样：

![在此处输入图像描述](../Images/cbe513866907e11a178279df9ee944c7.png)

请注意摆弄`par`设置以确保一切看起来都不错。你*将*不得不修补。

这个最小的可重现示例来自**knitr**网站上的非常详细的[示例。](http://yihui.name/knitr/demo/graphics/)

 ****编辑**

要回答你的第二个问题，即使它更像是一个纯 LaTeX 问题，这里是一个最小的例子：

```
\documentclass{article}
\usepackage{wrapfig,lipsum}
%------------------------------------------
\begin{document}
This is where the table goes with text wrapping around it. You may 
embed tabular environment inside wraptable environment and customize as you like.
%------------------------------------------
\begin{wraptable}{l}{5.5cm}
\caption{A wrapped table going nicely inside the text.}\label{wrap-tab:1}
<<mychunk,results = asis,echo = FALSE>>=
library(xtable)
print(xtable(head(cars)),floating = FALSE)
@
\end{wraptable} 
%------------------------------------------
\lipsum[2] 
\par
Table~\ref{wrap-tab:1} is a wrapped table.
%------------------------------------------
\end{document} 
```

再一次，我简单地修改了我在这个问题中找到的代码，[这个](https://tex.stackexchange.com/a/49323/6180)问题在*非常*有用的 tex.stackexchange.com 站点上。**

# java - 在 Android 中转到 Intent/Activity 的相同“实例”

> ID：10574556
> 
> 赞同：0
> 
> 时间：2012-05-13T19:28:26.800
> 
> 标签：java, android, android-activity, android-intent, instance

我在 Android 应用程序中有一个菜单，当我单击其中一个按钮启动一个新活动时，我希望实例变量保持它们的值，即使我返回菜单并重新启动它。这是我尝试过的：

```
public void onClick(View v) {

            Bundle b = new Bundle();
            b.putBoolean("isFav",false);
            centralsIntent = new Intent("kth.blod.CENTRALS");
            centralsIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);
            centralsIntent.putExtras(b);

            startActivity(centralsIntent);
        } 
```

在清单中：

```
android:launchMode="singleTop" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:54:07.220

我认为共享首选项是跟踪您在应用程序的一个部分中设置的值的最简单方法，这些值要保存并可能在从应用程序的另一部分返回时进行修改。[有关共享首选项](http://developer.android.com/reference/android/content/SharedPreferences.html)，请参阅此链接。请参阅[此链接](http://developer.android.com/guide/topics/data/data-storage.html#pref)以了解如何实现它们。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:49:33.400

我对你的问题感到困惑。当您说“我有菜单”时，您的意思是主要活动（或第一个活动）是菜单吗？如果是这种情况，用户可以从菜单中进行选择，然后您可以开始一个新的活动，然后该活动将出现在菜单活动**的顶部。**只要您不调用`finish()`菜单活动，它就不会消失（在正常情况下），并且当用户返回到它时，所有实例变量仍将包含用户启动新活动时所拥有的任何内容。此外，您不需要**launchMode='singleTop'**因为这是标准的默认行为。

或者也许我不完全明白你的问题是什么......

# objective-c - Xcode4 中的变量值

> ID：10574557
> 
> 赞同：2
> 
> 时间：2012-05-13T19:28:33.540
> 
> 标签：objective-c, xcode, xcode4

我想看变量`[UIScreen mainScreen].brightness`。

所以我在监视窗口中单击rmb，选择添加表达式并输入`[UIScreen mainScreen].brightness`作为我要监视的表达式。Xcode 评估它但不显示该值。

如何正确观看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T19:34:11.587

我不认为你可以看财产。你必须观察一个实例变量。（观察点实际上使用硬件支持来监视内存地址的变化。属性实际上是方法调用的专用语法，并且方法调用的结果没有内存地址。）

由于您正在尝试查看系统类中的属性，因此您可能不走运。相反，您可能需要编写代码来为主屏幕的亮度值添加 KVO 观察器，并在观察器代码中设置断点。

# graph - Neo4J 想知道如何设置域结构。分裂的关系

> ID：10574558
> 
> 赞同：2
> 
> 时间：2012-05-13T19:28:38.880
> 
> 标签：graph, neo4j, spring-data-neo4j

我有一个使用 MySQL 作为 DB 和 hibernate 和 struts 的应用程序。我正在努力将其转换为使用 Neo4J 而不是 Hibernate 和 MySQL。结构有点不同，是一种新的关系思考方式——它们更栩栩如生。无论如何，我有一个与公司节点有关系的人员节点，并且使用了这种关系。所以一个人受雇于一家公司。一个人也有技能，这些技能可以在受雇于公司时获得。所以我需要以某种方式从雇佣关系转变为技能。

我知道你不能从一个关系转到一个关系，因为它们只是从一个节点到一个节点（一条边）的关系。所以我确定我只需要想办法更好地关联这些对象。我正在考虑以某种方式将雇佣关系拆分为一个节点作为经验。所以一个人是有经验的。他们通过受雇于一家公司获得了这种经验。他们从这次经历中获得了这些技能。这是有道理的，但我认为节点是“具体的”信息，我可以从那里开始并返回其他“具体”信息，并且在节点中拥有经验似乎并不正确。它似乎含糊不清，似乎应该存储在一段关系中，这就是我现在的方式，所以我回到了原点。

我正在努力解决的另一件事是将体验拆分为一个节点可能会对此有所帮助，那就是一个人可以从同一家公司获得多种类型的体验——可以说是沿着食物链向上发展。因此，我需要一个与不同经历有多重关系的人，这些经历指向同一家公司。这很好 - 拥有多种关系以拥有多种体验是有意义的。对于一家公司来说，要看看他们雇佣了谁，似乎还有很长的路要走。

也许这种经历更像是一个职位。一家公司有一个职位，并且该职位具有与他们相关的这些技能。该职位由一个人担任，该人可以将技能添加到已经与该职位相关联的内容。但是他们添加的那些技能不需要默认添加，因此需要在从位置到技能的关系中添加一些标志。

嗯，这可能行得通。其他任何人都在为 Neo4J 或任何图形数据库的此类域构建问题而苦苦挣扎。这绝对是一种新的数据结构思维方式。几乎最好忘记你学到的所有 rdbms 知识和“规则”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T04:22:24.680

是的，你遇到了超边缘。看看[http://docs.neo4j.org/chunked/stable/cypher-cookbook-hyperedges.html](http://docs.neo4j.org/chunked/stable/cypher-cookbook-hyperedges.html)

您的案例中的等价物之一可能是与经验/职位节点相关的人员。Experience 节点有两种类型的关系——一种是 EmployedAt，一种是 AquiredSkill。示例：（人员）-[:has]->（经验）（经验）-[:EmployedAt]->（公司）（经验）-[:AquiredSkill]->（技能）

而且你对一个人有多种经验，对一个经验/职位有多种技能。这样，您可以通过他的经验来追踪一个人在公司的技能/一生，如果您也分享该技能，那么您可以跨公司追踪技能集。

觉得有道理吗？

# macos - 使用 XAMPP 在 Mac 上更改 phpMyAdmin 中的密码，现在无法访问 localhost/phpmyadmin

> ID：10574568
> 
> 赞同：2
> 
> 时间：2012-05-13T19:30:29.347
> 
> 标签：macos, passwords, phpmyadmin, xampp, change-password

我已经阅读了所有我能找到的关于此的帖子，但没有任何帮助。我已经从我的计算机中删除了 XAMPP 文件夹并从 DMG 文件中重新安装它，这当然解决了问题，但我想知道将来如何解决它。

这一切是如何开始的：我在我的 Macbook（运行 Mac OS X v10.7.4）上登录了 phpMyAdmin。我看到提示我更改root密码的消息，默认情况下没有密码。我转到管理权限选项卡并更改了 localhost、webdev 和 127.0.0.1 上的 root 密码。在每种情况下，我都输入了相同的短密码并单击“生成密码”，这会创建三个不同的哈希值。

你知道接下来会发生什么：当我再次尝试访问 localhost/phpmyadmin 时，我被以下消息锁定：

```
Error

MySQL said: 

#1045 - Access denied for user 'root'@'localhost' (using password: NO) 

phpMyAdmin tried to connect to the MySQL server, and the server rejected the connection.  You should check the host, username and password in your configuration and make sure that  they correspond to the information given by the administrator of the MySQL server. 
```

所以我查看了stackoverflow，它建议我在命令行设置root密码。我在我的用户目录中创建了一个“.profile”文件，其中包含“export PATH=/opt/local/bin:/opt/local/sbin:/Applications/xampp/xamppfiles/bin:$PATH”。这使我能够启动一个 mysql 会话，但是（作为一个菜鸟）我不知道在那之后该怎么做。

Stackoverflow 还建议我可以更改 config.inc.php 中的密码。我在 phpmyadmin/setup/frames/config.inc.php 找到了这个文件，但是这一行

```
$cfg['Servers'][$i]['password'] = ''; 
```

不在那里。我确实在 phpmyadmin/libraries/config.default.php 中找到了该行，但该文件包含对编辑它的可怕警告。我发现了另一个可能的文件，phpmyadmin/setup/lib/common.inc.php，以及 phpmyadmin/scripts/signon.php，但在所有情况下，我的计算机都阻止我进行任何更改，说我没有权限. 所以这很令人沮丧。

我确定这是一个新手错误，或者其中几个错误，但我很好奇地发现我在 stackoverflow 上查找的所有内容都没有帮助我。我还希望 Mac OS 能够更轻松地创建系统文件（例如，.profile）和编辑 XAMPP 文件（例如，common.inc.php）。但你能做什么呢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T13:33:48.553

在 phpMyAdmin 的主安装文件夹中，您必须创建一个*config.inc.php*文件，这是您应该更改的文件。如果您没有该文件，请创建它：

在主安装文件夹（pMA）中，您已经有一个名为：*config.sample.inc.php*的文件，其中包含默认配置。制作此文件的副本并将其重命名为*config.inc.php*，您可以使用`cp`命令直接执行此操作（导航到上述文件夹后）：

```
cp ./config.sample.inc.php ./config.inc.php 
```

现在对这个新文件进行一些更改：

1.  将条目更改`$cfg['Servers'][$i]['host'] = 'localhost';`为`$cfg['Servers'][$i]['host'] = '127.0.0.1';`（因为它在某些地方不起作用）
2.  编写/更改此行：`$cfg['Servers'][$i]['AllowNoPassword'] = false;`

注意：phpMyAdmin 的主安装文件夹是指安装 phpMyAdmin 的根文件夹，即`/<abc>/<xyz>/phpMyAdmin/`.
同样先进行第二次更改，只有在找不到主机时才进行第一次更改

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-18T10:05:39.710

虽然，@bool dev 在上面提供了答案。我想分享我如何使用终端解决这个问题的版本。我正在使用 10.12.5 (OS Serria)

首先，你需要有root权限

```
sudo su 
```

然后转到根文件夹

```
cd / 
```

从那里您需要导航到 phpMyAdmin 文件夹

```
cd Applications/XAMPP/xamppfiles/phpmyadmin/ 
```

然后使用任何编辑器打开 config.inc.php 文件。（我用过vi）

```
vi config.inc.php 
```

转到文件中的以下部分

```
/* Authentication type */
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = ''; // This is empty, set your password here 
```

然后只需重新启动您的 MySql 服务器。和中提琴它现在应该可以工作了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T15:52:38.977

里面`\xampp\phpmyadmin\config_inc.php`

添加或更改如下代码。
`$cfg['Servers'][$i]['auth_type'] = 'cookie';`

之后尝试清除浏览数据。然后重启mysql。
这个对我有用。希望它可以帮助你。

# php - Wordpress MySQL 查询失败

> ID：10574577
> 
> 赞同：2
> 
> 时间：2012-05-13T19:32:09.857
> 
> 标签：php, mysql, wordpress

```
$query2 = "SELECT * FROM wp_posts WHERE post_status = 'publish'";
$result2 = mysql_query($query2);
if (!$result2) {
  die('Invalid query: ' . mysql_error());
}

if (mysql_numrows($result2) == 0) {
    echo("zero");
} else {
    echo(mysql_numrows($result2));
} 
```

..花了一个小时，它应该工作，但它没有，不知道我哪里出错了。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:47:23.737

回覆。您的评论：调用未定义函数 Â die()

看起来您的 die() 语句之前的空格中可能有一些非 ASCII 字符。尝试删除那个空格并重新插入它，也许你会发现数据库错误是什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:41:36.653

你应该使用这样的查询

```
 $querystr = "SELECT $wpdb->posts.* FROM $wpdb->posts WHERE $wpdb->posts.post_status = 'publish'";
 $pageposts = $wpdb->get_results($querystr, OBJECT); 
```

应该使用 wpdb 类与数据库进行通信...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-14T18:12:22.360

尝试这个：

```
$query2 = "SELECT * FROM wp_posts WHERE post_status = 'publish'";
$result2 = mysql_query("$query2"); 
```

查询中的双引号。

如果查询中没有双引号，查询将如下所示：

```
$result2 = mysql_query(SELECT * FROM wp_posts WHERE post_status = 'publish'); 
```

代替：

```
$result2 = mysql_query("SELECT * FROM wp_posts WHERE post_status = 'publish'"); 
```

# python - 使用命名空间构建结构项目

> ID：10574580
> 
> 赞同：1
> 
> 时间：2012-05-13T19:32:27.907
> 
> 标签：python, namespaces, fabric

我现在越来越频繁地使用织物，我喜欢它。到目前为止，我的结构脚本往往相对较短且临时。它完成了工作，这很好。与那里更复杂的工具相比，这就是我喜欢它的地方。

我现在正在尝试将一组脚本组合在一起，并希望使它们更易于访问和使用。[命名空间](http://docs.fabfile.org/en/1.4.1/usage/tasks.html#namespaces)似乎是要走的路，它看起来简单而优雅。

目前，对我来说缺少的难题是在哪里放置不同结构任务需要（并且有些可能共享）的各种**模板和配置文件**，以及如何在子模块之间**共享功能或任务**。

我是否需要设置一些`PYTHONPATH`或修改系统的路径以使所有子模块都可以访问这些路径？是否有构建此类织物项目的推荐结构（或最佳实践指南）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:02:47.223

我主要使用常规的 python 导入来完成此操作。

例如，如果您的目录结构是这样的：

```
mytoplevel/
├── __init__.py
├── mydeploymenttasks.py
└── templates
    ├── __init__.py
    └── mytemplate.mak 
```

您的模板可以使用以下方式获得：

```
import pkg_resources
pkg_resources.resource_filename('mytoplevel.templates',mytemplate.mak) 
```

但由于任务存在于常规 python 模块中，您可以使用包的结构简单地导入它们：

```
from mytoplevel.mydeploymenttasks import installApplicationTask 
```

至于如何构建你的包，这取决于它的域。如果您发现代码中出现了某个主题，请将其拆分为自己的模块。

# python - 重新路由 Django 的“handle_uncaught_exception”

> ID：10574581
> 
> 赞同：2
> 
> 时间：2012-05-13T19:32:29.323
> 
> 标签：python, django, exception-handling

有没有办法捕捉 Django`handle_uncaught_exception`并以某种方式通过视图重新路由错误？

我们为 Django 使用我们自己的数据库后端。后端的两个重要特性是我们使用数据库来引发我们希望渗透到前端的异常，并且我们使用 namedtuples 提供了一个惰性行获取器。

当我使用惰性 rowgetter 时，我无法捕获自定义异常，而我在执行标准查询时可以做到这一点。一个示例回溯如下：

```
ERROR Internal Server Error: /api/b-r-o-k-e-n--t-o-k-e-n/
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/django/core/handlers/base.py", line 136, in get_response
    response = response.render()
  ...lines removed...
  File "/usr/lib/python2.7/dist-packages/django/template/defaulttags.py", line 144, in render
    values = list(values)
  File "../xmlapi/model/model.py", line 80, in xmlapi_get_location_rota
    for i in self.foldquery(query, args, slices):
  File "../xmlapi/model/db.py", line 168, in foldquery
    self.query(querystring, args)
  File "../xmlapi/model/db.py", line 44, in wrapped_fn
    raise DBException(e.message.strip())
DBException
Traceback (most recent call last):
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 85, in run
    self.result = application(self.environ, self.start_response)
  File "/usr/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 241, in __call__
    response = self.get_response(request)
  File "/usr/lib/python2.7/dist-packages/django/core/handlers/base.py", line 179, in get_response
    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
 ...lines removed... 
```

惰性 rowgetter 的优点是它仅在模板开始渲染时才被调用（我认为）。缺点似乎是我无法在视图中捕获异常以引发，比如`420: rate limit exceeded`错误。

由于评估较晚，因此未调用错误处理程序：

```
 try:
        rota = self.model.xmlapi_get_location_rota (**kwargs)
    except DBException, e:
        code, message = [epart.strip() for epart in e.msg.split(':')]
        return HttpResponse(message, status=code,
                            content_type="text/plain") 
```

如果您有任何关于尝试早点抛出此异常而不必加载整个结果集的想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:53:53.367

由于这是在渲染模板时引发的异常，因此当前无法在 Django 1.3/1.4 中处理该异常。

在 django-developers 列表中建议，应将捕获 TemplateResponse 异常的能力添加为 django 功能请求。

有关更多详细信息，请参阅[Django-developers google groups 电子邮件线程](http://groups.google.com/group/django-developers/tree/browse_frm/thread/7500ddc2106817fb/79189085e1eba778?rnum=1&_done=/group/django-developers/browse_frm/thread/7500ddc2106817fb/79189085e1eba778?tvc=1&)。

# redirect - Lighttpd 将 url 重定向到小写版本

> ID：10574588
> 
> 赞同：2
> 
> 时间：2012-05-13T19:33:13.083
> 
> 标签：redirect, rewrite, lighttpd

我正在使用 lighttpd，我想将大写 url 重定向到小写。

例如，如果我有以下网址： [http ://test.com/info/code/BDAY](http://test.com/info/code/BDAY)

我想将其重定向到： [http ://test.com/info/code/bday](http://test.com/info/code/bday)

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T20:10:07.503

Lighttpd 内部的 mod_rewrite 和 mod_redirect 只能处理模式匹配和替换，它们无法进行字符转换。

您可以有一个匹配任何大写字符并将 URL 传递给执行重写并返回重定向的脚本的模式

**lighttpd.conf：**

```
url.rewrite-once += ( "(.*[A-Z].*)" => "lower.php?url=$1" ) 
```

**较低的.php：**

```
<?php header("Location: " + strtolower($_GET['url'])); 
```

# css - CSS使文本区域闪烁

> ID：10574589
> 
> 赞同：0
> 
> 时间：2012-05-13T19:33:15.803
> 
> 标签：css

我得到了一些价格表并添加了一个“div 叠加层”以使 3 个价格表可点击，但这搞砸了一切。它在表格上方添加了一个水平框架（见链接），当您将鼠标移到水平框架上时，价格表开始快速闪烁（框架/框首先不应位于价格表上方）。

灰色的悬停颜色只是调试的原因；）

有什么建议可能导致这种情况吗？

网址：[http ://www.loveftp.com](http://www.loveftp.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:39:47.470

尝试制作三个 div `position:absolute`。他们互相争夺百分比宽度。

# php - 如何在php中不显示隐藏的表单

> ID：10574590
> 
> 赞同：0
> 
> 时间：2012-05-13T19:33:24.070
> 
> 标签：php, html, forms

我的问题是，默认情况下如何*不在*页面上显示表单？例如，我有一个带有选项的代理，问题是，我*不想*默认显示选项，但我想有一个指向选项表单的链接。如果您不明白我的意思，这是我正在处理的页面：[带选项的代理](http://n1x.co.uk/p)。

另外，这是我目前在页面上的代码：

```
<form action="includes/process.php?action=update" method="post" onsubmit="return updateLocation(this);" class="form">
        <input type="text" name="u" id="input" size="40" class="textbox">
        <input type="submit" value="Go" class="button"> &nbsp; [<a style="cursor:pointer;" onclick="document.getElementById('options').style.display=(document.getElementById('options').style.display=='none'?'':'none')">options</a>]
        <ul id="options">
            <?php foreach ($toShow as $option) echo '<li><input type="checkbox" name="'.$option['name'].'" id="'.$option['name'].'"'.$option['checked'].'><label for="'.$option['name'].'" class="tooltip" onmouseover="tooltip(\''.$option['escaped_desc'].'\')" onmouseout="exit();">'.$option['title'].'</label></li>';?>
        </ul>
        <br style="clear: both;">
    </form>
    <div class="navigation">
        <!--[glype:error]--> 
    <?php ## Display error messge if applicable
if ( isset($_SESSION['msg']) ) {
    echo '<div id="error">',$_SESSION['msg'],'</div>';
    unset($_SESSION['msg']);
} ?> 
```

**编辑：**另外，有什么方法可以将复选框与文本对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:35:54.117

您可以将表单放在`<div>`带有 style 属性的 a 中，然后在需要显示表单时`display:none`更改它。`display:block`

**编辑：**现在代码已正确格式化，我可以进一步扩展。您只需要在您的选项 ul 上设置一个样式为 display:none。这意味着默认情况下这些选项是不可见的。

如果用户犯了错误并且他们选择了一个选项，我想你会想默认显示这些选项吗？如果是这样，创建一个名为 $show_options 的变量，默认情况下为 false，但如果在提交时选择了任何选项，则为 true。然后在选项框的 html 中使用以下代码：

`<ul id="options" style="<?php echo (($show_options)?(''):('display:none')); ?>">`

# c# - 是否可以将多行 HTML 作为字符串参数传递给 HTML 帮助程序？

> ID：10574594
> 
> 赞同：0
> 
> 时间：2012-05-13T19:34:27.527
> 
> 标签：c#, asp.net-mvc-3, razor, html-helper

我的用例是我有一个 html 模板，我希望编译服务器端但在 RAZOR 视图中定义。

使用 RAZOR 语法渲染此模板是不可能的，因为该值只是客户端。像jQuery模板之类的。

理想情况下，它会从 tje 视图中传入：

```
@Html.Template(<this somehow indicates it's the start of my string>
    <div>Hello {{= NameOfHomePlanet }}</div>
    <div>And welcome to a second line!</div>
</this somehow indicates it's the end of my string>); 
```

现在在助手中：

```
public static Template(this Html html, string template) 
{
    // tmplate == "    <div>Hello {{= NameOfHomePlanet }}</div>\n"
    // + "<div>And welcome to a second line!</div>";
} 
```

这将导致最外层虚构标签之间的 HTML 作为名为 Template 的 Html 帮助程序的第一个参数传入。

在玩的过程中，我无法弄清楚语法。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:39:18.480

我不建议这样做，但你当然可以

```
@{
  string someHtml = "<div>" + model.NameOfHomePlanet + "</div>";
}

@Html.CustomHelperTemplate(someHtml) 
```

除此之外很难说，因为您的问题非常模糊。

# java - Java中的OutputStream是否阻塞？（插座）

> ID：10574596
> 
> 赞同：15
> 
> 时间：2012-05-13T19:34:33.770
> 
> 标签：java, sockets, implementation, blocking, outputstream

我目前正在为一个项目编写幼稚的网络代码，一位伙伴向我暗示，当我以迭代方式从服务器向所有客户端发送一包信息时，当其中一个客户端没有正确响应时，我可能会出现严重的延迟.

他以拖钓而闻名，所以我在实现一个辅助线程时持怀疑态度，该线程现在负责将数据发送到客户端，有一个队列，服务器只需将包添加到该队列上，然后由线程读取以发送数据。

我现在思考后的问题是天气与否 Java Socket 的 OutputStream 实际上将他想要发送的内容排入队列，从而预先消除了对队列的需要。仅当服务器阻塞时，只要他没有从客户端收到已收到发送对象的响应，就会出现严重问题的可能性。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-13T19:44:00.953

您的朋友是对的，但它更多地与[tcpip](/questions/tagged/tcpip "显示标记为“tcpip”的问题")协议的工作方式有关。大大简化了发送到客户端的数据包需要确认。如果客户端没有响应（无法读取传入的数据，计算机负载过重等），服务器将不会收到确认并停止发送数据。TCP/IP 中内置的这一机制可防止通信的一端发送大量数据，而无需确保另一端接收到这些数据。反过来，这避免了重新发送大量数据的要求。

在 Java 中，这表现为阻塞写入`OutputStream`. 在客户端准备好接收数据之前，底层 TCP/IP 堆栈/操作系统不允许发送更多数据。

你可以很容易地测试这个！我实现了接受连接但无法读取传入数据的简单服务器：

```
new Thread(new Runnable() {
    @Override
    public void run() {
        try {
            final ServerSocket serverSocket = new ServerSocket(4444);
            final Socket clientSocket = serverSocket.accept();
            final InputStream inputStream = clientSocket.getInputStream();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
}).start(); 
```

还有一个简单的客户端，它只以 4K 批次发送尽可能多的数据：

```
final Socket client = new Socket("localhost", 4444);
final OutputStream outputStream = client.getOutputStream();
int packet = 0;
while(true) {
    System.out.println(++packet);
    outputStream.write(new byte[1024 * 4]);
} 
```

客户端循环在 95 次迭代后挂在我的计算机上（您的里程可能会有所不同）。但是，如果我从`inputStream`服务器线程中读取-循环继续进行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T19:54:48.517

当然，当您写入套接字时，此写入会被缓冲。Socket 对象具有`setSendBufferSize()`设置此缓冲区大小的方法。如果您的写入可以缓存在此缓冲区中，那么当然，您可以立即在以下套接字上进行迭代。否则这个缓冲区需要立即刷新到客户端。因此，在冲洗期间，您将被阻塞。如果要避免在刷新缓冲区时被阻塞，则必须`SocketChannel`在非阻塞 I/O 中使用。无论如何，并发写入多个套接字的最佳选择是使用不同的线程管理每个套接字，以便可以同时执行所有写入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T19:49:09.710

OutputStream 正在阻塞。它可能有一些缓冲，但是如果服务器从不消耗字节（任何固定缓冲区最终都会填满），这对您没有多大帮助。所以你的朋友是对的，你需要在单独的线程中编写，或者使用更高级的东西，比如 nio。

在阅读方面，您可以使用 available() 来避免阻塞。写入端不存在匹配的调用。我希望有。

# android - 如何让 webview Android 应用不显示 adsense 广告？

> ID：10574600
> 
> 赞同：3
> 
> 时间：2012-05-13T19:36:24.303
> 
> 标签：android, webview, adsense

我制作了一个 android 应用程序，在 webview 中显示我的网页的一部分。问题是该网页有一些 AdSense 广告，并且不允许在应用程序中显示它们。所以问题是：有没有办法让它们在应用程序中不显示？

编码 ：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.loadUrl("http://androidomedia.com/angry-birds-space-walkthrough/");
    mWebView.setWebViewClient(new HelloWebViewClient());

}

   private class HelloWebViewClient extends WebViewClient {
       @Override
       public boolean shouldOverrideUrlLoading(WebView webview, String url)
       {
           webview.loadUrl(url);
           return true;
       }
       }
   @Override
   public boolean onKeyDown(int keyCode, KeyEvent event)
   {
       if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack())
       {
           mWebView.goBack();
           return true;            
       }
       return super.onKeyDown(keyCode, event);

   } 
```

}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T20:36:47.420

假设内容是动态生成的，您可以在服务器端处理此问题。如果请求来自您的 Android 应用，只需让网络服务器不显示广告单元即可。Explicity 在 android 端设置用户代理并在构建模板时检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T02:49:01.107

首先，您需要将您的用户代理字符串设置为您可以轻松检测到的内容，如下所示：

```
mWebView.getSettings().setUserAgentString("AndroidWebView"); 
```

其次，在托管您网站的服务器上，您需要动态生成 Google 提供给您的脚本。如果您使用 ASP.NET 来托管您的网站，您可以执行以下操作：

```
protected void Page_Load(object sender, EventArgs e)
{

                //Ensure that the Adsense ad isn't loaded if the calling user is using a WebView
                if (Request.UserAgent.Contains("AndroidWebView"))
                {
                    return;
                }

                //Create the Google Adsense ad dynamically
                var sb = new StringBuilder();
                sb.AppendLine("google_ad_client = \"ca-pub-123456789\";");
                sb.AppendLine("/* Ad Name Here */");
                sb.AppendLine("google_ad_slot = \"123456785\";");
                sb.AppendLine("google_ad_width = 728;");
                sb.AppendLine("google_ad_height = 90;");
                sb.Append("//-->");

                var scriptTag = new HtmlGenericControl("script");
                scriptTag.Attributes.Add("type", "text/javascript");
                scriptTag.InnerHtml = sb.ToString();

                var scriptTag2 = new HtmlGenericControl("script");
                scriptTag2.Attributes.Add("type", "text/javascript");
                scriptTag2.Attributes.Add("src", "http://pagead2.googlesyndication.com/pagead/show_ads.js");

                phBigAd.Controls.Add(scriptTag);
                phBigAd.Controls.Add(scriptTag2);

    } 
```

之后，将 PlaceHolder 添加到名为 phBigAd 的 ASPX 标记页面中，只要您希望广告出现在网站上：

```
<asp:PlaceHolder ID="phBigAd" runat="server" /> 
```

当然，在附加到 StringBuilder 时，您需要将 Adsense 代码替换为您自己的代码，但以上是您将采用的一般格式。

# c++ - 展开 gtkmm GtkTreeView 列

> ID：10574608
> 
> 赞同：1
> 
> 时间：2012-05-13T19:36:55.423
> 
> 标签：c++, gtkmm, gtktreeview

我期待着扩展我的 gtkmm 树视图列之一，这样它就可以使用所有剩余的空间，并缩小其他列......有什么办法可以做到这一点？

```
m_ScrolledWindow.add(m_TreeView);
m_ScrolledWindow.set_policy(Gtk::POLICY_AUTOMATIC, Gtk::POLICY_AUTOMATIC);

m_refTreeModel = Gtk::ListStore::create(m_Columns);
m_TreeView.set_model(m_refTreeModel);

m_TreeView.append_column("ID", m_Columns.m_col_id);
m_TreeView.append_column("Task", m_Columns.m_col_task);
/// I WANT TO EXPAND TASK COLUMN
m_TreeView.append_column("Time", m_Columns.m_col_time);
m_TreeView.append_column("Date", m_Columns.m_col_date); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T03:22:34.843

[是的](http://developer.gnome.org/gtkmm/stable/classGtk_1_1TreeView.html#a7e948adaeeafd9884ba5ca7d639f9ea7)

编辑：我错了，请参阅下面的正确方法（在我的代码中有效）

你需要这样做：

```
m_TreeView.get_column(1)->set_expand(true); 
```

（用从0和左到右计数的实际位置替换'1'）

注意：这只会使“n”列占用所有可用空间。它不会隐藏任何其他列。

# ios - 落砂粒子物理

> ID：10574612
> 
> 赞同：3
> 
> 时间：2012-05-13T19:37:36.813
> 
> 标签：ios, opengl-es, cocos2d-iphone, game-physics, particles

我正在开发带有沙粒模拟的 iOS 应用程序。这是一个 alpha 版本的视频，显示了它的逻辑[http://www.youtube.com/watch?v=cYgw6jHx6QE](http://www.youtube.com/watch?v=cYgw6jHx6QE)

但是我对粒子算法的性能有疑问。

现在我按照下面的方式来做（app是在cocos2d上做的，不过没关系）：

每 0.03 秒我得到屏幕像素数据

```
glReadPixels(0,0,WindowSize.width,WindowSize.height,GL_RGBA,GL_UNSIGNED_BYTE,&ScreenBuffer); 
```

我还有一个比较像素颜色和背景颜色的功能

```
- (BOOL) GetColorAtPoint: (int) GetX : (int)GetY
{
    int YSize = (int)WindowSize.width*4;

    Byte R = ScreenBuffer[(YSize*GetY) + 0 + (4 * GetX)];
    Byte G = ScreenBuffer[(YSize*GetY) + 1 + (4 * GetX)];
    Byte B = ScreenBuffer[(YSize*GetY) + 2 + (4 * GetX)];
    Byte A = ScreenBuffer[(YSize*GetY) + 3 + (4 * GetX)];

    return (R==255 && G == 0 && B == 0 && A == 255);
} 
```

我为粒子定义结构并为它们设置数组

```
struct SandParticle
{
    CGPoint Position;

    BOOL CMTop;
    BOOL CMBottom;
    BOOL CMLeft;
    BOOL CMRight;
};

struct SandParticle SandMatrix[5000];

int ParticlesCounter; 
```

所以，我的逻辑如下。每 0.03 秒，我使用 SandParticle 结构创建新粒子并将其添加到 SandMatrix 数组并增加 ParticlesCounter。然后我遍历 SandMatrix 数组，对于每个粒子，我在底部位置 Y-1、左侧位置 Y-1 X-1、右侧位置 Y-1 X+1 上获得背景颜色（使用上面提到的 GetColorAtPoint 方法）。如果背景颜色为红色，则粒子可以向下、向左或向右移动。

完整的代码在这里[https://gist.github.com/8e6c4710950d17ed3d3c#L122](https://gist.github.com/8e6c4710950d17ed3d3c#L122)（不要严格判断，这是一个草稿版本）

主要问题是，对于超过 ±800 的粒子数量，我在 iOS 设备（模拟器中一切正常）上的帧率下降。问题是一个迭代周期（[UpdateParticles 方法](https://gist.github.com/8e6c4710950d17ed3d3c#L122)）。但我不知道如何以另一种方式做到这一点。有什么我可以在这里做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:52:44.740

我不确切知道算法，但通常好的随机生成器相当慢；也许您可以避免该调用，在初始化阶段执行此操作，填充数组并通过索引获取值，例如

```
 int Randomized = precomputed_arc4rand_unif2[CPLoop]; 
```

假设优化处于最佳状态，我认为重新排列代码不应该在性能方面带来重要的好处，除非你可以在复制到 CurrentParticle*之前*检查是否继续，一般来说，如果你想要更短的，你可以避免这样的复制编写它的方法，使用定义或通过指针（但也许优化也保存了这一点），即

```
 struct SandParticle *CurrentParticle = &SandMatrix[CPLoop]; 
```

然后你做`CurrentParticle->`而不是`CurrentParticle.`删除 CurrentParticle 的最终“复制回”，这是不需要的。

但我不知道它是否会使性能变得更好。

# android - 谷歌图表工具在 Android WebView 中不起作用

> ID：10574613
> 
> 赞同：1
> 
> 时间：2012-05-13T19:37:51.010
> 
> 标签：android, webview, android-webview, google-visualization

我正在使用 Google Chart Tools 来显示图表。图表不工作，`WebView`也没有加载。我使用 URL [https://developers.google.com/chart/interactive/docs/gallery/barchart](https://developers.google.com/chart/interactive/docs/gallery/barchart)进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:19:23.280

Google Chart Tools 使用 SVG 来呈现图表，虽然 WebKit 确实支持 SVG，但它确实使用了大量内存，因此它没有编译到 Android 的早期版本中。应该支持Android 4.0（应该支持，我没有测试过）。

如果您需要对早期型号的支持，您可以使用[Google Image Charts](https://developers.google.com/chart/image/)，这是一种 Google 已弃用的纯图像版本。

# php - PHP：获取文件扩展名不适用于上传到 S3

> ID：10574614
> 
> 赞同：9
> 
> 时间：2012-05-13T19:38:29.497
> 
> 标签：php, file-upload, amazon-s3, file-extension

我正在使用 Amazon S3 API 上传文件，并且每次上传时都会更改文件的名称。

例如：

狗.png > 3Sf5f.png

现在我得到了这样的随机部分：

```
function rand_string( $length ) {
            $chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";  

            $size = strlen( $chars );
            for( $i = 0; $i < $length; $i++ ) {
                $str .= $chars[ rand( 0, $size - 1 ) ];
            }

            return $str;
        } 
```

所以我将 random_string 设置为 name 参数，如下所示：

```
$params->key = rand_string(5); 
```

现在我的问题是这不会显示任何扩展名。所以文件将上传为`3Sf5f`而不是`3Sf5f.png`.

变量 $filename 为我提供了文件的全名及其扩展名。

如果我使用`$params->key = rand_string(5).'${filename}';`我得到：

```
3Sf5fDog.png 
```

所以我试图检索 $filename 扩展名并应用它。我尝试了 30 多种方法，但没有任何积极的方法。

例如我尝试了 $path_info()，我尝试了 substr(strrchr($file_name,'.'),1); 还有更多。他们都给我一个`3Sf5fDog.png`或一个`3Sf5f`。

我尝试过的一个例子：

```
// As @jcinacio pointed out. Change this to: 
//
//   $file_name = "${filename}";
//
$file_name = '${filename}'  // Is is wrong, since '..' does not evaluate 

$params->key = rand_string(5).$file_name;
=
3Sf5fDog.png 
```

.

```
$file_name = substr(strrchr('${filename}', '.'), 1);

$params->key = rand_string(5).$file_name;
=
3Sf5f 
```

.

```
$filename = "example.png"   // If I declare my own the filename it works.
$file_name = substr(strrchr('${filename}', '.'), 1);

$params->key = rand_string(5).$file_name;
=
3Sf5f.png 
```

整个类文件： http: [//pastebin.com/QAwJphmW](http://pastebin.com/QAwJphmW)（整个脚本没有其他文件）。

**我做错了什么？**这真是令人沮丧。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T03:02:45.547

变量 $filename（因此“${filename}”）不在代码第 1053 行的范围内（行号基于 pastebin 中的原始粘贴）。

所以，无论你做什么，你永远不会找到一个不存在的变量的扩展。

* * *

我终于弄清楚了你在做什么。我认为这是[PHP 的扩展：上传前重命名文件](https://stackoverflow.com/questions/10289723/php-rename-file-before-upload/10320884#10320884)

简单的答案：你不能按照你的设想去做。为什么 - 在创建 URL 时没有解析“$filename”，但变量被传递给 Amazon S3 并在那里处理。

**解决方案**

所以，我能想到的唯一选择是使用“successRedirect”参数指向另一个 URL。该 URL 将从 Amazon ( [http://doc.s3.amazonaws.com/proposals/post.html#Dealing_with_Success](http://doc.s3.amazonaws.com/proposals/post.html#Dealing_with_Success) ) 接收“bucket”和“key”作为查询参数。将其指向一个 PHP 脚本，该脚本重命名 Amazon S3 上的文件（复制 + 删除），然后将用户重定向到另一个成功屏幕。

所以，

在您的代码中，第 34 行，

1.  将完全限定的 URL 添加到您要编写的新 php 脚本文件中。
2.  php 脚本将获取传递给它的存储桶和密钥
3.  从“密钥”创建新文件名
4.  使用函数“public static function copyObject($srcBucket, $srcUri, $bucket, $uri)”将上传的文件复制到新名称
5.  然后删除原始文件（使用 deleteObject($bucket, $uri)）
6.  然后将用户重定向到您要发送的位置

这将完全符合您的要求。

* * *

回应您的评论“这是唯一的方法吗？亚马逊对每个请求收取的费用如何？”

删除请求是免费的。在同一个桶（甚至在同一个区域）上移动时没有数据传输成本。因此，此解决方案（这是您无需转移到中间服务器、重命名和上传的唯一方法）它将上传成本从每 1000 次上传 1c 增加到每 1000 次上传 2c 的成本加倍。我花了 10 分钟 @ 200 美元/小时才发现并回复 = 33 美元 = 1,666,666 次上传！当你做数学时，成本有点苍白:)

与其他解决方案相比：向网络服务器发布帖子，重命名文件，然后从网络服务器上传：您将所有带宽从客户端直接转移到您自己 - 两次。这也带来了风险并增加了可能的故障点。

* * *

回应“不起作用。我上传文件然后旧文件被删除”

我认为这不是问题，因为您上传文件然后在一两秒钟内重命名它。但是，如果您想保证每个文件都被上传，那么您需要做的不仅仅是创建一个随机文件名：

1.  拥有你的“最终”桶
2.  对于每次上传，创建一个临时存储桶（如果您担心成本，则每 1000 个存储桶 1c）
3.  上传到临时存储桶
4.  创建随机名称，检查最终存储桶中是否不存在（每 1000 次检查 1c）
5.  将文件复制到最终存储桶（使用新名称）
6.  删除上传的文件以及存储桶。
7.  定期清理文件上传未完成的存储桶。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T19:43:42.190

```
$fileSplit = explode('.',$filename);
$extension = '.'.$fileSplit[count($fileSplit) - 1]; 
```

这个explode() 将文件名分成一个以句点作为分隔符的数组，然后抓取数组的最后一部分（如果文件名是foo.bar.jpg），并在其前面放置一个句点。这应该会为您提供所需的扩展名，以将其附加到 rand_string(5)。

```
$params->key = rand_string(5).$extension; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T14:51:34.823

如果你上传图片试试这个

```
$dim = getimagesize($file);
$type = $dim[2];
if( $type == IMAGETYPE_JPEG ) $ext=".jpg"; 
if( $type == IMAGETYPE_GIF ) $ext=".gif"; 
if( $type == IMAGETYPE_PNG ) $ext=".png";

$params->key = rand_string(5).$ext; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-21T07:58:17.240

我认为像下面这样简单的东西应该可以从文件名中提取文件扩展名：

```
function getFileExtension($fileName)
{
    $ext = '';
    if(strpos($fileName, ".") !== false)
    {
        $ext = end(explode(".", $fileName));
    }
    return $ext;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T21:53:27.747

看起来实际发生的事情不是现在完全生成文件名，实际上您通过接口传递了一个非常小的“程序”，因此它可以稍后生成文件名（当变量 $filename 存在并且在范围内时）。界面的另一端最终会执行您传入的“程序”，从而生成修改后的文件名。（当然，将“程序”传递给其他东西以便稍后执行并不会使调试变得真正容易:-)

（当然，您是要“使这项工作”还是“以不同的方式进行”取决于您。“不同的方式”通常涉及在您尝试调用上传界面之前自己重命名或复制文件，并进行了描述在其他答案中。）

如果您决定要“让它工作”，那么*整个*文件名参数需要是一个程序，而不仅仅是它的一部分。这种有些不常见的功能通常涉及将*整个*字符串括在*单*引号中。（您还需要对字符串中现有的单引号做一些事情，这样它们就不会过早终止引用的字符串。一种方法是用反斜杠引用它们中的每一个。另一种看起来更清晰且通常有效的方法是用双引号替换它们。）换句话说，我相信下面的代码对你有用（我没有合适的环境来测试它，所以我不确定）。

```
$file_extension = 'substr(strrchr(${filename}, "."), 1)';

$params->key = rand_string(5).$file_extension; 
```

（一旦你得到它的工作，你可能想重新审视你的命名方案。也许名称需要更长一点。或者它可能应该包含一些可识别的信息{如今天的日期，或文件的原始名称}。你可以碰到类似 $file_base.rand_string(7).$file_extension 的东西。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-21T19:37:47.570

好的，这是我在服务器端获取扩展时遇到问题时使用的另一种尝试。我所做的是，我使用 javascript 提取文件扩展名并通过邮寄方式发送。

```
<script type="text/javascript" >
function fileinfo() {
var file = document.form.file.value;
document.getElementById("ext").value = file.split('.').pop();
document.myform.submit();   
}
</script>
<form name="myform" enctype="multipart/form-data" onsubmit="fileinfo();">
<input type="file" name="file">
<input type="hidden" name="ext">
//rest of the form
</form> 
```

在下一个 php 文件中，您可以直接使用 $_POST['ext'] 作为扩展名。希望有帮助。如果您在执行此操作时遇到任何问题，请告诉我

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-22T06:35:40.337

我在我的网站中使用它（并且工作多年）：

```
$file = 'yourOriginalfile.png';

//get the file extension
$fileExt = substr(strrchr($file, '.'), 1);

//create a random name and add the original extension
$fileUniqueName = md5(uniqid(mktime())) . '.' . $fileExt;

rename($file,$fileUniqueName); 
```

您的函数生成的文件名太短（5 个字符），这样会创建更长的文件名，避免文件名冲突。

示例输出：aff5a25e84311485d4eedea7e5f24a4f.png

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-20T14:46:21.747

您需要首先找出原始扩展名是什么，而不是重命名整个文件。所以保留扩展名并重命名文件名。

假设您在 $image_name 中有图像名称：

```
$image_name = "image.png";
$random_string = "random";

list($filename,$fileext) = explode(".",$image_name);
$new_name = $random_string.'.'.$fileext;
rename($image_name,$new_name); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-17T19:39:54.327

如果您：

```
$filename = "${filename}";
echo $filename;
die(); 
```

你得到像“Dog.png”这样的东西吗？如果您没有获取文件名的方式有问题。如果你确实得到了类似“Dog.png”的东西，这里就是我用来获取文件扩展名的东西。

```
$pieces = explode('.',trim($filename));
$extension = end($pieces); 
```

然后你应该能够做到这一点：

```
$params->key = rand_string(5).'.'.$extension; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-13T19:45:30.300

**重命名文件并计算扩展名的简单解决**方案：

```
$fileName = 'myRandomFile.jpg';

// separate the '.'-separated parts of the file name
$parts = explode( '.', $fileName );

// Solution will not work, if no extension is present
assert( 1 < count( $parts ) );

// keep the extension and drop the last part
$extension = $parts[ count( $parts ) - 1 ];
unset( $parts[ count( $parts ) - 1 ] );

// finally, form the new file name
$newFileName = md5( 'someSeedHere' + implode( '.', $parts )) . '.' . $extension;

echo $extension             // outputs jpg
   . ' - ' 
   . $newFileName           // outputs cfcd208495d565ef66e7dff9f98764da.jpg
   ; 
```

请注意，[md5()](http://php.net/manual/en/function.md5.php)始终为 32 字节长，并且**对于计算值而言是非唯一的**。对于许多实际情况，它已经*足够独特了*。

**附录**

此外，您可以使用此解决方案来**跟踪变量更改**：

```
abstract class CSTReportDelegate {

    abstract public function emitVariableChange( $variableName, $oldValue, $newValue );
    abstract public function emitVariableSetNew( $variableName, $newValue );

}

class CSTSimpleReportDelegate extends CSTReportDelegate {

    public function emitVariableChange( $variableName, $oldValue, $newValue ) {
        echo '<br />[global/change] '. $variableName . ' : ' . print_r( $oldValue, true ) . ' &rarr; ' . print_r( $newValue, true );
    }

    public function emitVariableSetNew( $variableName, $newValue ) {
        echo '<br />[global/init] '. $variableName . '   &rarr; ' . print_r( $newValue, TRUE );
    }

}

class CSysTracer {

    static protected 
        $reportDelegate;

    static private 
        $globalState = array();

    static private  
        $traceableGlobals = array();

    static private 
        $globalTraceEnabled = FALSE;

    const 
        DEFAULT_TICK_AMOUNT = 1;

    static public 
    function setReportDelegate( CSTReportDelegate $aDelegate ) {
        self::$reportDelegate = $aDelegate;
    }

    static public 
    function start( $tickAmount = self::DEFAULT_TICK_AMOUNT ) {

        register_tick_function ( array( 'CSysTracer', 'handleTick' ) );

    }

    static public 
    function stop() {

        unregister_tick_function( array( 'CSysTracer', 'handleTick' ) );

    }

    static public 
    function evalAndTrace( $someStatement ) {

        declare( ticks = 1 ); {
            self::start();
            eval( $someStatement );
            self::stop();
        }
    }

    static public 
    function addTraceableGlobal( $varName ) {

        if ( is_array( $varName )) {
            foreach( $varName as $singleName ) {
                self::addTraceableGlobal( $singleName ); 
            }
            return;
        }

        self::$traceableGlobals[ $varName ] = $varName;

    }

    static public 
    function removeTraceableGlobal( $varName ) {
        unset( self::$traceableGlobals[ $varName ] );   
    }

    /**
     * Main function called at each tick. Calls those functions, which
     * really perform the checks.
     * 
     */
    static public 
    function handleTick( ) {

        if ( TRUE === self::$globalTraceEnabled ) { 
            self::traceGlobalVariable();
        }

    }

    static public 
    function enableGlobalsTrace() {
        self::$globalTraceEnabled = TRUE;   
    }

    static public 
    function disableGlobalsTrace() {
        self::$globalTraceEnabled = FALSE;  
    }

    static public 
    function traceGlobalVariable( ) {

        foreach( self::$traceableGlobals as $aVarname ) {

            if ( ! isset( $GLOBALS[ $aVarname ] )) {
                continue;
            }

            if ( ! isset( self::$globalState[ $aVarname ] ) ) {

                self::$reportDelegate->emitVariableSetNew( $aVarname, $GLOBALS[ $aVarname ] );
                self::$globalState[ $aVarname ] = $GLOBALS[ $aVarname ];
                continue;
            }

           if ( self::$globalState[ $aVarname ] !== $GLOBALS[ $aVarname ]) {

             self::$reportDelegate->emitVariableChange( $aVarname, self::$globalState[ $aVarname ], $GLOBALS[ $aVarname ] );

           }

           self::$globalState[ $aVarname ] = $GLOBALS[ $aVarname ];

        }

    }

} 
```

**一个示例用例：**

```
ini_set("display_errors", TRUE);
error_reporting(E_ALL);

require_once( dirname( __FILE__ ) . '/CStatementTracer.inc.php' );

/* Ticks make it easy to have a function called for every line of PHP
 *  code. We can use this to track the state of a variable throughout
 * the execution of a script.
 */

CSysTracer::addTraceableGlobal( array( 'foo', 'bar' ));

CSysTracer::setReportDelegate( new CSTSimpleReportDelegate() ); 
CSysTracer::enableGlobalsTrace();

CSysTracer::start(); 
declare( ticks = 1 );

   //
   // At this point, tracing is enabled. 
   // Add your code or call your functions/methods here
   //

CSysTracer::stop(); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-13T19:47:44.970

未经测试，但足够简单，可以工作：

```
$ext = pathinfo($filename, PATHINFO_EXTENSION); 
```

将返回扩展部分（不带“。”）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-05-19T20:40:10.177

这个怎么样？

```
$temp = rand_string(5).'${filename}';         //should be 3Sf5fDog.png
$ext = pathinfo($temp, PATHINFO_EXTENSION); //should be .png
$temp2 = rand_string(5) . $ext;             //should be 4D47a.png 
```

# objective-c - CATiledLayer 基础知识：为什么在渲染 PDF 时经常调用 CATiledLayer 的 drawLayer:inContext:？

> ID：10574617
> 
> 赞同：1
> 
> 时间：2012-05-13T19:39:07.233
> 
> 标签：objective-c, ios, core-graphics, catiledlayer

我试图了解`CATiledLayer`使用`CGContextDrawPDFPage()`.

我的理解是，`drawLayer:inContext:`每个图块和细节级别调用一次。那是对的吗？

在我的平铺层的代表中，我调用了`CGContextDrawPDFPage().` 但是我注意到（通过将日志放入 中`drawLayer:inContext:`）`drawLayer:inContext:`如果我使平铺层的平铺尺寸更小，则调用的频率更高。这让我想知道：

*   我的 PDF 页面是否被绘制/渲染了 x 次？
*   还是 CGContextDrawPDFPage() 神奇地知道要绘制页面的哪个部分？
*   渲染PDF页面时，CATiledLayer是不是很浪费资源？它的优势是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T20:14:41.943

> 我注意到`drawLayer:inContext:`如果我将平铺层的平铺尺寸变小，它会更频繁地被调用。

是的当然。假设您的图层大小相同，那么如果您告诉它使用较小的图块，它将需要更多的图块来覆盖该区域。

> 我的 PDF 页面是否被绘制/渲染了 x 次？

由于您对每个图块调用一次 CGContextDrawPDFPage() ，因此可以。

但是，这可能不是问题，因为：

> CGContextDrawPDFPage() 是否神奇地知道要绘制页面的哪个部分？

它可能，但它不需要任何魔法。

在 CATiledLayer 调用之前`-drawLayer:inContext:`，它将 CGContext 的剪辑设置为仅包含该图块的区域。PDF 绘图代码可以获取剪辑边界（通过[`CGContextGetClipBoundingBox`](https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CGContext/Reference/reference.html#//apple_ref/c/func/CGContextGetClipBoundingBox)），然后选择仅呈现该矩形内的内容。

也就是说，有两个警告：

1.  `CGContextDrawPDFPage()`是一个黑匣子，所以它实际上可能不会做那个优化。这似乎很明显，但您必须检查性能数据以查看它是否真的发生了。
2.  解析和布局 PDF 内容仍有相当大的开销。您可能仍然会在每次调用时产生一些成本`CGContextDrawPDFPage`——这实际上取决于 CG 的智能程度，以及它是否在内部缓存内容。

> 渲染PDF页面时，CATiledLayer是不是很浪费资源？它的优势是什么？

CATiledLayer 的优势主要在于节省内存：存储渲染内容的位图非常大，因此仅渲染和保留当前在屏幕上可见的内容是值得的。它还提供了一种机制，用于缓存最近可见或可能很快再次可见的区域，具体取决于用户缩放和滚动的方式。

权衡是：您必须将您的绘图分离到每个图块的单独调用中，并且您可能需要比其他方式更频繁地渲染到图块中。

根据视图的大小、放大/缩小的程度、绘制 PDF 的成本以及应用程序中发生的其他情况，使用 CATiledLayer 可能有意义，也可能没有意义。您可以查看性能数据并做出决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T19:57:13.913

因为食人魔......啊哼，PDF就像洋葱。QuartzCore 大量*基于*PDF 渲染方法（以至于它的早期文档甚至提到了这一事实），并且 CATiledLayer 使用特定的“平铺”渲染方法，该方法指定要重复绘制的对象。因此，当图块被移动或更新或其他任何事情时，图层需要更多数据，因此在一个或多个后台线程中调用 drawLayer:inContext:。

CATiledLayers 也非常高效，因为它们大量使用缓存并且只加载可见层。

# windows-phone-7 - 如何在 WP7 中显示 PNG 图像？

> ID：10574620
> 
> 赞同：-1
> 
> 时间：2012-05-13T19:39:35.987
> 
> 标签：windows-phone-7, xna

如何在 WP7 中从坐标 (X,Y) 开始并使用 XNA 显示 PNG 图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:52:50.880

将图像添加到 XNA 内容项目（拖放文件）。

在游戏类中添加一个保存纹理引用的变量：

```
Texture2D tex; 
```

在 LoadContent() 方法中加载纹理：

```
tex = Content.Load<Texture2D>("texturename"); 
```

texturename 必须是纹理的资产名称。默认情况下，这是不带扩展名的文件名。

在 Draw() 方法中，在给定位置 x、y 处绘制纹理：

```
spriteBatch.Begin();
spriteBatch.Draw(tex, new Vector2(x, y), Color.White);
spriteBatch.End(); 
```

这是 XNA 中最基本的任务之一。在问别人之前，您应该尝试自己找到解决方案。在互联网上找到答案大约需要半分钟。

# css - 绝对/固定位置：防止项目滚动

> ID：10574627
> 
> 赞同：1
> 
> 时间：2012-05-13T19:40:14.603
> 
> 标签：css, css-position

我正在尝试找出 CSS 中的绝对/固定定位，以将徽标放在网页的右下角并让它留在那里，即使页面内容滚动也是如此。我已经完成了一半，但是如果浏览器窗口很小，现在需要停止徽标在页面上移动得太高。

我创建了一张图纸和简要说明，说明我希望它如何工作，并将它们以 pdf 格式放在以下链接中：

[点击这里](http://www.garywood.me.uk/test/Logo_problem.pdf "点击这里")

任何人都可以帮助我吗？

加里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T20:02:48.150

因此，徽标应该是`position: fixed`，但前提*是*视口高度大于预定义的最小值。您可以通过媒体查询来实现：

```
@media screen and (min-height: 300px) {
    #logo {
        position: fixed;
        /* your other styles */
    }    
} 
```

**现场演示： http:** [//jsfiddle.net/KC3UU/show/light/](http://jsfiddle.net/KC3UU/show/light/)（降低浏览器窗口高度，直到图像与灰色DIV碰撞）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:55:59.143

我认为仅使用纯 CSS 是不可能的。（至少没有使用一些疯狂的 CSS hack）。但是使用 jquery 应该是可能的：http: [//jquery.com/](http://jquery.com/) 那里有一些用于 jQuery 的粘性/固定位置插件，例如[http://www.orangecoat.com/stickyscroll](http://www.orangecoat.com/stickyscroll) 但我不知道它们如何或是否它们正在解决您面临的问题。最坏的情况是您必须自己编写脚本。即使我无法提供一些代码，也希望这能有所帮助。
PS这里基本上是同一个问题：[http ://answers.yahoo.com/question/index?qid=20120302190313AAJhUIp](http://answers.yahoo.com/question/index?qid=20120302190313AAJhUIp)

# java - 简洁的 DNG 标头信息？

> ID：10574633
> 
> 赞同：0
> 
> 时间：2012-05-13T19:41:03.003
> 
> 标签：java, import, converter, dng

我想编写自己的 DNG 文件导入器和转换器（我需要基本上能够证明它以某种方式工作，所以我最好自己做），但我很难找到关于标题的任何细节文件。我认为 DNG 的目的是公开记录？

我需要的基本信息是元数据每个字段的字节偏移量和原始数据本身的字节偏移量。与[此](http://mathmatrix.narod.ru/Wavefmt.html)类似。不幸的是，到目前为止，我发现的只是官方的 adobe 文档，它是一个 90 多页的 PDF，主要关注最佳实践以及已发布的读者应该或不应该做什么，这并不是很有帮助。

这是最好的资源还是有更简洁的版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T20:52:34.137

如[DNG 规范](https://www.adobe.com/content/dam/acom/en/products/photoshop/pdfs/dng_spec.pdf)第 11 页第 2 章“DNG 格式概述”中所述：

> 本节介绍 DNG 格式。作为 TIFF 6.0 格式的扩展，DNG 应遵循 TIFF 6.0 的所有格式规则。有关详细信息，请参阅 TIFF 6.0 规范。

所以这里是您可以阅读的[TIFF 6.0 规范](http://partners.adobe.com/public/developer/en/tiff/TIFF6.pdf)，第 13 页，“第 2 节：TIFF 结构”，对 TIFF 标头的描述。

# android - Android解析JSON多个数组

> ID：10574634
> 
> 赞同：0
> 
> 时间：2012-05-13T19:41:03.463
> 
> 标签：android, json

```
[{"name":"Mark","Surname":"Gaux"}]
[{"Job":"2","Type":"Office"}] 
```

我有这个 JSON 由服务器上的 PHP 文件回显，然后由我的 Android 应用程序接收。

由于我没有设法将两者合并为一个数组 []，因此您注意到我有两个数组 [] []。

当我有一个数组时，我使用这个循环在我的 Android 应用程序中解析它：

```
try{

    JSONArray jArray = new JSONArray(response);

            for(int i=0;i<jArray.length();i++){
                JSONObject json_data = jArray.getJSONObject(i);
                jname = json_data.getString("name");
                jsurname = json_data.getString("Surname");
...
} 
```

*只是一个简单的例子。*

我对 JSONArray 和 JSONObject 有点困惑。JSONArray 是 [] 之间的任何东西， JSONObject 是 {} 之间的任何东西？

那么现在我有两个数组，我如何从一个循环到另一个？

还是我最好将它们从 PHP 合并到一个数组中并使用我现在使用的技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:53:23.510

如果您尝试在一个响应中发送两个数组，您可以这样做：

```
[                                         
    [{"name":"Mark","Surname":"Gaux"}],
    [{"Job":"2","Type":"Office"}]
] 
```

整个 JSON 字符串是一个`JSONArray`:
`getJSONArray(0)`contains `JSONObject`s with `name`and `Surname`
`getJSONArray(1)`contains `JSONObject`s with `Job`and`Type`

# ios - 使用预定义数据填充核心数据？

> ID：10574635
> 
> 赞同：1
> 
> 时间：2012-05-13T19:41:13.453
> 
> 标签：ios, core-data

我正在制作一个在地图上显示几个预定位置的应用程序。我选择使用核心数据来存储位置。我将如何在应用程序首次启动时将预定义数据加载到核心数据中？我也不希望这些数据是用户可编辑的。我确信有一个简单的方法可以做到这一点，我似乎无法弄清楚。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:32:01.873

如果数据是恒定的，并且永远不会改变，只需使用单独的数据库。在你的 mac 上创建你的只读数据库（最好使用模拟器）。然后，只需将该文件复制到您的 xcode 资源中，并将其内置到应用程序包中。

您还可以使用完全相同的模型提供用户数据库。这样，您始终在捆绑包中拥有“种子”只读数据，并且您可以拥有一个用于用户数据的可变数据库。

# c++ - 这会泄漏内存吗？

> ID：10574641
> 
> 赞同：2
> 
> 时间：2012-05-13T19:42:02.490
> 
> 标签：c++, memory

addStudent 函数和 mainMenu 函数是重要的两个。

```
#include <iostream>
#include <string>

using namespace std;

struct Student
{
   string name;
   string major;
   Student *p_next;
};

Student *addStudent(Student *p_students)
{
   Student *p_new_student = new Student;
   cout << "Student name: \n";
   cin >> p_new_student->name;
   cout << p_new_student->name << "'s major: \n";
   cin >> p_new_student->major;

   Student *p_place_holder = new Student;
   Student *p_all_students = new Student;
   p_all_students = p_students;
   p_place_holder = NULL;

   if (p_students == NULL) // Adds the first element to the linked list which was initialized to NULL
   {
      p_new_student->p_next = p_students;
      delete p_place_holder;
      delete p_all_students;
      return p_new_student;
   }

   else // Adds elements beyond the first element to the linked list
   {
      while (p_all_students != NULL)
      {
         if (p_new_student->name.compare(p_all_students->name) <= 0)
         {
            if (p_place_holder == NULL) /* if p_new_student->name is before
            p_all_students->name and p_all_students is still the first element in the list*/
            {
               p_new_student->p_next = p_all_students;
               p_all_students = p_new_student;
               delete p_place_holder;
               return p_all_students;
            }

            else
            {
               p_new_student->p_next = p_all_students;
               p_place_holder->p_next = p_new_student;
               return p_students;
            }

         }

         else if (p_new_student->name.compare(p_all_students->name) > 0)
         {
            p_place_holder = p_all_students;
            p_all_students = p_all_students->p_next;
         }
      }
   }
}

void mainMenu(Student *p_students)
{
   int response = 0;
   cout << "1\. Add Student\n";
   cout << "2\. View Students\n";
   cin >> response;

   if (response == 1) // calls addStudent 4 times and then mainMenu
   {
      p_students = addStudent(p_students);
      p_students = addStudent(p_students);
      p_students = addStudent(p_students);
      p_students = addStudent(p_students);
      mainMenu(p_students);
   }

   else if (response == 2) // lists the students and their majors and then exits
   {
      while (p_students != NULL)
      {
         cout << p_students->name << '\n';
         cout << p_students->major << "\n\n";
         p_students = p_students->p_next;
      }
   }

   delete p_students; // hopefully deletes all allocated memory
}

int main()
{
   Student *p_students = new Student;
   p_students = NULL;

   mainMenu(p_students);
} 
```

基本上想知道是否“删除p_students;” 在 mainMenu 函数中将正确删除所有分配的内存，以便程序不会泄漏内存。任何帮助表示赞赏，非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T19:44:12.983

这些行将泄漏 Student 的一个实例：

```
Student *p_place_holder = new Student;
Student *p_all_students = new Student;
p_all_students = p_students;
p_place_holder = NULL; 
```

您分配一个 Student，将其分配给`p_place_holder`，然后在不删除实例的情况下用 NULL 覆盖指针。

你还有：

```
p_students = addStudent(p_students);
p_students = addStudent(p_students);
p_students = addStudent(p_students);
p_students = addStudent(p_students); 
```

这将覆盖`p_students`三次，而不会尝试释放旧值中的内存。

更大的问题是您以 结尾`delete p_students`，但这不会`Student`像您希望的那样递归地检查结构以在其中找到指针、删除它等。您几乎泄漏了您分配的所有内存。

我认为您误解了 new 和 delete 如何配对在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:47:54.933

您必须使用强制所有权指针来避免内存泄漏——例如，`unique_ptr`和`shared_ptr`. 您永远无法有效地防止泄漏`delete`。

# cocoa - NSAutoreleasePool 可以排空两次或多次吗？

> ID：10574643
> 
> 赞同：0
> 
> 时间：2012-05-13T19:42:17.577
> 
> 标签：cocoa, nsautoreleasepool

在我正在阅读的书中，它谈到了强制`NSAutoreleasePool`排水。这是否意味着创建一个本地`NSAutoreleasePool`然后排空它，而不是排空已经存在的那个？也就是说，我可以不排水`NSAutoreleasePool`两次或多次吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:50:31.020

不，您不能多次耗尽自动释放池。

> 这是否意味着创建一个本地 NSAutoreleasePool 然后将其耗尽

是的。要么制作一个新池并将其排干，要么（甚至更好）使用`@autoreleasepool`.

> 我们不能两次或多次耗尽 NSAutoreleasePool 吗？

正确的。 [状态的文档`drain`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSAutoreleasePool_Class/Reference/Reference.html#//apple_ref/doc/uid/20000051-SW1)：

> 在引用计数环境中，此方法的行为与发布相同。由于无法保留自动释放池（请参阅[保留](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSAutoreleasePool_Class/Reference/Reference.html#//apple_ref/occ/instm/NSAutoreleasePool/retain)），因此这会导致接收器被释放。

由于自动释放池在第一次调用后被释放`drain`，因此在之后调用**任何**方法都是无效的，`drain`包括在内。

# c# - 检查一个类型是否是 blittable 的最快方法？

> ID：10574645
> 
> 赞同：20
> 
> 时间：2012-05-13T19:42:21.000
> 
> 标签：c#, serialization, marshalling, value-type, blit

在我的序列化器/反序列化器中，我有以下片段：

```
 if (element_type.IsValueType && collection_type.IsArray)
    {
        try
        {
            GCHandle h = GCHandle.Alloc(array_object, GCHandleType.Pinned);
            int arrayDataSize = Marshal.SizeOf(element_type) * c.Count;
            var array_data = new byte[arrayDataSize];
            Marshal.Copy(h.AddrOfPinnedObject(), array_data, 0, arrayDataSize);
            h.Free();
            WriteByteArray(array_data);

            return;
        }
        catch (ArgumentException)
        {
            //if the value type is not blittable, then we need to serialise each array item one at a time
        }
    } 
```

其目的是尝试以最有效的方式将值类型数组写入流（即，仅将内容作为一串字节）。

当类型是值类型但不是 blittable 并且 Alloc() 失败时，就会出现问题。目前，异常被捕获并将控制传递给处理数组的代码，就好像它由引用类型组成一样。

然而，由于我的应用程序中遇到的值类型的数量，这种检查（由于我理解的异常的抛出和捕获非常慢）被证明是一个严重的瓶颈。所以我想知道，**检查一个类型是否是 blittable 的最快方法是什么？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-07-17T21:52:08.900

当前答案适用于提问者的情况，但根据规范，可位值类型数组本身也是可位类型。稍微扩展了 Ondřej 的方法，因此它考虑到了这一点，并且也适用于引用类型：

```
public static bool IsBlittable<T>()
{
    return IsBlittableCache<T>.Value;
}

public static bool IsBlittable(Type type)
{
    if(type.IsArray)
    {
        var elem = type.GetElementType();
        return elem.IsValueType && IsBlittable(elem);
    }
    try{
        object instance = FormatterServices.GetUninitializedObject(type);
        GCHandle.Alloc(instance, GCHandleType.Pinned).Free();
        return true;
    }catch{
        return false;
    }
}

private static class IsBlittableCache<T>
{
    public static readonly bool Value = IsBlittable(typeof(T));
} 
```

作为副作用，这会返回（尽管正确）`false`for `string`，因为`GetUninitializedObject`无法创建它。假设`Alloc`真的检查 blittability（除了`string`），这应该是可靠的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-15T22:22:06.970

我正在使用泛型类来缓存结果。测试以相同的方式完成（尝试分配固定句柄）。

```
public static class BlittableHelper<T>
{
    public static readonly bool IsBlittable;

    static BlittableHelper()
    {
        try
        {
            // Class test
            if (default(T) != null)
            {
                // Non-blittable types cannot allocate pinned handle
                GCHandle.Alloc(default(T), GCHandleType.Pinned).Free();
                IsBlittable = true;
            }
        }
        catch { }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-02-07T09:18:51.067

@IllidanS4 在此页面上的出色代码错误地返回`false`了元素为 blittable [formatted type](https://msdn.microsoft.com/en-us/library/zah6xy75(v=vs.110).aspx#Anchor_3)的数组，这意味着该数组也是 blittable。从那个例子开始，我解决了这个问题并增加了对一些处理不当的情况的处理，例如：

*   `T[]`其中`T`：格式化类型（刚刚提到）
*   锯齿状阵列`int[][][]...`
*   枚举（但不是`System.Enum`它本身）
*   接口，抽象类型
*   泛型类型（从不 blittable）。

我还添加了避免昂贵`Exception`块的案例更加详尽，并对我能想到的所有不同类型的类型进行了单元测试。

```
public static bool IsBlittable(this Type T)
{
    while (T.IsArray)
        T = T.GetElementType();

    bool b;
    if (!((b = T.IsPrimitive || T.IsEnum) || T.IsAbstract || T.IsAutoLayout || T.IsGenericType))
        try
        {
            GCHandle.Alloc(FormatterServices.GetUninitializedObject(T), GCHandleType.Pinned).Free();
            b = true;
        }
        catch { }
    return b;
} 
```

应该按原样使用来自另一个答案的好的缓存机制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-15T09:56:18.200

我没有足够的声誉来添加评论，所以我会写我的评论作为答案：

我已经测试了@IS4 提出的代码，他的函数说字符串不是 blittable，这是正确的。但是，当在 Unity 中使用 Mono 后端时，他的实现还说带有字符串字段的结构是 blittable（这是不正确的）。

我还测试了 Unity 的`UnsafeUtility.IsBlittable()`函数，它为这些结构返回了正确的值，所以如果我们想实现一个`IsBlittable()`在 Mono 上正常工作的函数，我认为我们别无选择，只能使用反射来确保结构中的所有字段都是也可以blittable。

我已经使用 Mono 脚本后端在 Unity 2017.4 和 Unity 2018.4 中测试了这个实现，它似乎与我迄今为止尝试过的所有类型都能正常工作：

```
using System;
using System.Reflection;
using System.Runtime.Serialization;
using System.Runtime.InteropServices;

public static class BlittableHelper
{
#if UNITY_2018_1_OR_NEWER || UNITY_2019_1_OR_NEWER || UNITY_2020_1_OR_NEWER
    // If we're using Unity, the simplest solution is using
    // the built-in function
    public static bool IsBlittableType(Type type)
    {
        return Unity.Collections.LowLevel.Unsafe.UnsafeUtility.IsBlittable(
            type
        );
    }
#else
    // NOTE: static properties are not taken into account when
    // deciding whether a type is blittable, so we only need
    // to check the instance fields and properties.
    private static BindingFlags Flags =
    BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance;

    public static bool IsBlittableType(Type type)
    {
        // According to the MSDN, one-dimensional arrays of blittable
        // primitive types are blittable.
        if (type.IsArray)
        {
            // NOTE: we need to check if elem.IsValueType because
            // multi-dimensional (jagged) arrays are not blittable.
            var elem = type.GetElementType();
            return elem.IsValueType && IsBlittableType(elem);
        }

        // These are the cases which the MSDN states explicitly
        // as blittable.
        if
        (
            type.IsEnum
            || type == typeof(Byte)
            || type == typeof(SByte)
            || type == typeof(Int16)
            || type == typeof(UInt16)
            || type == typeof(Int32)
            || type == typeof(UInt32)
            || type == typeof(Int64)
            || type == typeof(UInt64)
            || type == typeof(IntPtr)
            || type == typeof(UIntPtr)
            || type == typeof(Single)
            || type == typeof(Double)
        )
        {
            return true;
        }

        // These are the cases which the MSDN states explicitly
        // as not blittable.
        if
        (
            type.IsAbstract
            || type.IsAutoLayout
            || type.IsGenericType
            || type == typeof(Array)
            || type == typeof(Boolean)
            || type == typeof(Char)
            //|| type == typeof(System.Class)
            || type == typeof(Object)
            //|| type == typeof(System.Mdarray)
            || type == typeof(String)
            || type == typeof(ValueType)
            || type == typeof(Array)
            //|| type == typeof(System.Szarray)
        )
        {
            return false;
        }

        // If we've reached this point, we're dealing with a complex type
        // which is potentially blittable.
        try
        {
            // Non-blittable types are supposed to throw an exception,
            // but that doesn't happen on Mono.
            GCHandle.Alloc(
                FormatterServices.GetUninitializedObject(type),
                GCHandleType.Pinned
            ).Free();

            // So we need to examine the instance properties and fields
            // to check if the type contains any not blittable member.
            foreach (var f in type.GetFields(Flags))
            {
                if (!IsBlittableTypeInStruct(f.FieldType))
                {
                    return false;
                }
            }

            foreach (var p in type.GetProperties(Flags))
            {
                if (!IsBlittableTypeInStruct(p.PropertyType))
                {
                    return false;
                }
            }

            return true;
        }
        catch
        {
            return false;
        }
    }

    private static bool IsBlittableTypeInStruct(Type type)
    {
        if (type.IsArray)
        {
            // NOTE: we need to check if elem.IsValueType because
            // multi-dimensional (jagged) arrays are not blittable.
            var elem = type.GetElementType();
            if (!elem.IsValueType || !IsBlittableTypeInStruct(elem))
            {
                return false;
            }

            // According to the MSDN, a type that contains a variable array
            // of blittable types is not itself blittable. In other words:
            // the array of blittable types must have a fixed size.
            var property = type.GetProperty("IsFixedSize", Flags);
            if (property == null || !(bool)property.GetValue(type))
            {
                return false;
            }
        }
        else if (!type.IsValueType || !IsBlittableType(type))
        {
            // A type can be blittable only if all its instance fields and
            // properties are also blittable.
            return false;
        }

        return true;
    }
#endif
}

// This class is used as a caching mechanism to improve performance.
public static class BlittableHelper<T>
{
    public static readonly bool IsBlittable;

    static BlittableHelper()
    {
        IsBlittable = BlittableHelper.IsBlittableType(typeof(T));
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-03T11:30:04.903

从`netcore2.0`那里开始[`System.Runtime.CompilerServices.RuntimeHelpers.IsReferenceOrContainsReferences<T>`](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.runtimehelpers.isreferenceorcontainsreferences)，允许您检查类型是否是 blittable

```
static bool IsBlittable<T>()
   => !RuntimeHelpers.IsReferenceOrContainsReferences<T>();

static bool IsBlittable(Type type)
{
    return (bool)typeof(RuntimeHelpers)
               .GetMethod(nameof(RuntimeHelpers.IsReferenceOrContainsReferences))
               .MakeGenericMethod(type)
               .Invoke(null, null);
} 
```

我使用这个实现通过网络发送数组

```
ValueTask SendAsync<T>(T[] array, CancellationToken token) where T : unmanaged
{
     // zero allocations, no <AllowUnsafeBlocks> required
     return _stream.WriteAsync(MemoryMarshal.AsBytes((ReadOnlySpan<T>)array, token);
} 
```

`Unmanaged`约束强制使用*blittable*类型。[参考](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/generics/constraints-on-type-parameters#unmanaged-constraint)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-13T22:34:02.033

使用[http://msdn.microsoft.com/en-us/library/system.type.islayoutsequential.aspx](http://msdn.microsoft.com/en-us/library/system.type.islayoutsequential.aspx)和[http://msdn.microsoft.com/en-us/library/system.type.isexplicitlayout.aspx](http://msdn.microsoft.com/en-us/library/system.type.isexplicitlayout.aspx)：

```
element_type.IsValueType && collection_type.IsArray && (element_type.IsLayoutSequential || element_type.IsExplicitLayout) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-10T08:41:17.843

最快的方法不是分配而是重用现有的 GCHandle，例如：

```
var gch = GCHandle.Alloc(null, GCHandleType.Pinned);
gch.Target = new byte[0];
gch.Target = ""; 
```

`GCHandle.Alloc`每次都分配或重用现有的插槽并获取锁，这是相对昂贵的操作。静态只读原始类型在 jitting 时变为常量，但不要将 GCHandle 存储在泛型类型中，因为每个泛型实例化都会获取自己的副本。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-13T05:57:35.290

这对我有用：

```
static bool IsBlittable(Type t)
{
  if (t.IsPrimitive) return true; if (!t.IsValueType) return false;
  var a = t.GetFields(BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic);
  for (int i = 0; i < a.Length; i++) if (!IsBlittable(a[i].FieldType)) return false;
  return true;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-28T01:32:21.537

这是一个替代方案，它只是[Microsoft 文档](https://docs.microsoft.com/en-us/dotnet/framework/interop/blittable-and-non-blittable-types)所说的直接表示。它不短，但它比这里的其他解决方案正确处理了更多的案例。如果您担心反射调用的性能，可以将其包装在一个简单的缓存中。

```
static bool IsBlittable(Type type)
    => IsBlittablePrimitive(type)
    || IsBlittableArray(type)
    || IsBlittableStruct(type)
    || IsBlittableClass(type);
static bool IsBlittablePrimitive(Type type)
    => type == typeof(byte)
    || type == typeof(sbyte)
    || type == typeof(short)
    || type == typeof(ushort)
    || type == typeof(int)
    || type == typeof(uint)
    || type == typeof(long)
    || type == typeof(ulong)
    || type == typeof(System.IntPtr)
    || type == typeof(System.UIntPtr)
    || type == typeof(float)
    || type == typeof(double)
    ;
static bool IsBlittableArray(Type type)
    => type.IsArray
    && type.GetArrayRank() == 1
    && IsBlittablePrimitive(type.GetElementType())
    ;
static bool IsBlittableStruct(Type type)
    => type.IsValueType
    && !type.IsPrimitive
    && type.IsLayoutSequential
    && type.GetFields(BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public).All(IsBlittableField);
static bool IsBlittableClass(Type type)
    => !type.IsValueType
    && !type.IsPrimitive
    && type.IsLayoutSequential
    && type.GetFields(BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public).All(IsBlittableField);
static bool IsBlittableField(FieldInfo field)
    => IsBlittablePrimitive(field.FieldType) 
    || IsBlittableStruct(field.FieldType); 
```

测试用例：

```
Is blittable?
- Int32: True
- Int32[]: True
- Int32[,]: False
- Int32[][]: False
- String: False
- String[]: False
- Boolean: False
- String: False
- Byte[]: True
- struct X { public int x; }: True
- struct Y { public int[] Foo { get; set; } }: False
- class CAuto { public int X { get; set; } }: False
- [StructLayout(LayoutKind.Sequential)]class CSeq { public int X { get; set; } }: True 
```

注意：这会将 Span 报告为 blittable，这对我来说似乎不太可能，但我不确定。

# css - 移动网站背景图片的 CSS

> ID：10574649
> 
> 赞同：0
> 
> 时间：2012-05-13T19:42:56.840
> 
> 标签：css, image, mobile, jquery-mobile, background

我正在使用 jQuery 移动工具包构建网站的移动版本。

页面将具有垂直布局（仅垂直滚动）。

我想在主页上显示背景图像，即使用户滚动到底部。

该图像是一个大图像，以无重复模式显示。图像必须在页面的左上角显示它的左上角，并尽可能地显示它的宽度和高度（图像应该调整大小以免被裁剪或最小化裁剪）。

是否可以为任何（或所有）不同的屏幕尺寸和方面提供图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:52:29.117

您可以使用[`width`](http://www.browsersupport.net/CSS/%40media_%28width%29)和[`height`](http://www.browsersupport.net/CSS/%40media_%28height%29)CSS 媒体查询来根据用户视口的宽度和高度提供不同的背景图像。

如果您在`<body>`元素上设置背景图像，并将其`background-attachment`属性设置为`fixed`，那么即使用户滚动页面，背景图像也将保持在相对于视口的相同位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:55:52.077

在下面的媒体查询中进行您需要的 CSS 更改：

```
@media screen and (max-width: 480px) {
} 
```

# java - Blackberry Java Sqlite 多记录插入

> ID：10574651
> 
> 赞同：0
> 
> 时间：2012-05-13T19:43:15.043
> 
> 标签：java, sqlite, blackberry

如何在黑莓 java 应用程序的 sqlite 数据库上插入多行（~100k）？我试过这段代码：

```
Database d1; Statement st;

URI dbURI1 = URI.create("file:///SDCard/xxx.db")  if (DatabaseFactory.exists(dbURI1)) {
    d1 = DatabaseFactory.open(dbURI1); } else {
    d1 = DatabaseFactory.create(dbURI1);
    st = d1.createStatement("Insert into..................(for 100 k rows)");

    st.prepare();
    st.execute();
    st.close(); } 
```

我也试过这个

st = d1.createStatement("插入......");

```
 st.prepare();
    st.execute();
    st.close(); 
```

st = d1.createStatement("插入......");

```
 st.prepare();
    st.execute();
    st.close(); 
```

. . . 100k 行。

Eclipse 开始变得非常慢，我无法调试它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:02:03.757

尝试这个

```
Public void InsertData ()
{
Database d;
try
{
URI myURI = URI.create("file:///SDCard/Databases/" +"Test.db"); 
d = DatabaseFactory.open(myURI);

Statement st = d.createStatement("INSERT INTO testtable(id,name) " + "VALUES (1,’Arun’)");
st.prepare();
st.execute();
st.close();
d.close();
add(new RichTextField("Values Inserted"));
}
catch ( Exception e ) 
{ 
System.out.println( e.getMessage() );
e.printStackTrace();
add(new RichTextField("Error: "+e.toString()));
}

} 
```

# asp.net-mvc-3 - 为什么在 asp.net mvc 中参数没有从一个控制器动作传递到另一个控制器动作？

> ID：10574654
> 
> 赞同：3
> 
> 时间：2012-05-13T19:43:47.473
> 
> 标签：asp.net-mvc-3, controller, action

我有这个方法 AddSection

```
public ActionResult AddSection(string code, ArrayList added)
    {
        ArrayList list = added;
        if (list == null) list = new ArrayList();
        list.Add(Request["selected_section"]);
        return RedirectToAction("Details", new { code = code, added = list });
    } 
```

重定向到详细信息：

```
public ActionResult Details(string code, ArrayList added)
    {
        if (added == null) added = new ArrayList();
        return View(added);
    } 
```

现在在 Details 操作中（如果它是从 AddSection 呈现的），“添加”的 ArrayList 永远不应为空，因为它无论如何都在 AddSection 中初始化并传递给 Details。当我在详细信息中调试程序“添加”的 ArrayList 时，即使在 AddSection 之后呈现的操作也是空的。

有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:44:21.127

就像 LukeP 说的那样，它看起来像一个 dup，因为作为其他问题/答案状态，只能传递原始类型，而不是复杂类型。

要修改您的代码，您可以这样做

```
public ActionResult AddSection(string code, ArrayList added) {
    ArrayList list = added;
    if (list == null) list = new ArrayList();
    list.Add(Request["selected_section"]);
    TempData["ListOfValues"] = list;
    return RedirectToAction("Details", new { code = code});
}

public ActionResult Details(string code) {
    var added = (ArrayList)TempData["ListOfValues"];
    if (added == null) added = new ArrayList();
    return View(added);
} 
```

# xamarin.ios - 设计器文件与主类文件分开列出

> ID：10574655
> 
> 赞同：0
> 
> 时间：2012-05-13T19:43:48.620
> 
> 标签：xamarin.ios, monodevelop, solution, filetree

我有一个 UIViewController 类，它有自己的设计器文件，但设计器文件未显示为解决方案面板（GameScreen）中的子树元素。另一方面，第二个 UIViewController (SettingsScreen) 设计器文件显示为主类的子类。

通常设计器文件应显示为子对象。出了什么问题，我该如何解决？

代码编译正确。

![在此处输入图像描述](../Images/0e096cb1a22470c84e6e7b16d68a7c16.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:50:25.120

MonoDevelop 目前没有拖放方式来更改文件分组，但还有其他两种方式可以做到这一点：

a) 从项目中删除文件并将它们添加回来。对于某些文件，例如 MonoTouch 设计器文件，MD 会在添加时自动对它们进行分组。

b) 编辑 csproj 文件，并将元数据添加到子文件。您可以使用它来创建任意分组。

如果您能回忆起设计器是如何在未分组的情况下添加的，并且可以重现该问题，请[提交错误。](https://bugzilla.xamarin.com)

# jquery - jQuery 循环 fx 中的 Exlpode 效果

> ID：10574658
> 
> 赞同：0
> 
> 时间：2012-05-13T19:44:07.583
> 
> 标签：jquery, jquery-cycle

您好，谁能告诉我在 Jquery 循环过渡中设置爆炸/内爆类型效果[http://jqueryui.com/demos/effect/的方法](http://jqueryui.com/demos/effect/)

我要说的是如何在 jquery 循环中添加自定义 FX？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:58:47.540

您将需要移植爆炸效果并重写它，以便 jquery 循环可以使用它。

爆炸代码：http: [//jqueryui.com/ui/jquery.effects.explode.js](http://jqueryui.com/ui/jquery.effects.explode.js) 依赖：http: [//jqueryui.com/ui/jquery.effects.core.js](http://jqueryui.com/ui/jquery.effects.core.js)

```
$.fn.cycle.transitions.explode = function($cont, $slides, opts) { 
    var $el = $($slides[0]); 
    // your code here
};

$('#slide').cycle({fx: 'explode'}); 
```

插件页面上的参考示例：http: [//jquery.malsup.com/cycle/adv2.html](http://jquery.malsup.com/cycle/adv2.html)

# sql - 按字段分组的 SQL TOP 结果

> ID：10574662
> 
> 赞同：3
> 
> 时间：2012-05-13T19:44:24.373
> 
> 标签：sql, ms-access

我遇到了一个 SQL 查询问题。我有一个包含 145 个站点名称的列表。在每个地点都发现了某些物种。我计算了每个物种在每个地点出现的次数。我想找到在每个站点看到的 5 个最常见的物种。目前我有：

```
SELECT TOP 5 Count([bird point counts bound query].[Group size]) AS [CountOfGroup size], [bird point counts bound query].site, [bird point counts bound query].Species
FROM [bird point counts bound query]
GROUP BY [bird point counts bound query].site, [bird point counts bound query].Species
ORDER BY Count([bird point counts bound query].[Group size]) DESC; 
```

这仅返回所有站点中最常见的 5 个物种。澄清一下，每个站点和 145 个站点的前 5 个结果，结果表应该包含 725 条记录。我现在在 Access 工作。

任何帮助表示赞赏，因为 SQL 不是我的强项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:05:29.330

据我所知，您只能使用 Access 中的临时表完成此操作。

这些方面的东西？

```
CREATE TABLE ##SiteSpecies (
  id            int IDENTITY (1,1),
  Site          <whatever>,
  Species       <whatever>,
  Observations  int
)

INSERT INTO ##SiteSpecies
SELECT   [bird point counts bound query].site, [bird point counts bound query].Species, Count([bird point counts bound query].[Group size])
FROM     [bird point counts bound query]
GROUP BY [bird point counts bound query].site, [bird point counts bound query].Species
ORDER BY [bird point counts bound query].site, [bird point counts bound query].Species, Count([bird point counts bound query].[Group size])

SELECT
  results.*
FROM
  ##SiteSpecies        AS results
INNER JOIN
(
  SELECT Site, MIN(id) AS FirstID FROM ##SiteSpecies GROUP BY Site
)
  AS SiteMarkers
    ON  results.Site  = SiteMarkers.Site
    AND results.id   <= SiteMarkers.FirstID + 4 
```

# jquery - iPad 表单禁用 [上一页 | 下一步] 按钮

> ID：10574663
> 
> 赞同：5
> 
> 时间：2012-05-13T19:44:35.217
> 
> 标签：jquery, ios, ipad, html, mobile-safari

所以我有一个存在于滑块中的表单向导。整个想法是根据人们的决定对他们进行门禁。问题是ipad。在 iPad 上，它允许您点击 [previous|next] 来移动表单上的字段，这打破了门控策略。

在桌面浏览器上，我`TAB`通过在门控字段的按键上返回 false 来抑制按键。但在 iPad 上，我看不到任何解决方案。

我试过tabindex并将门控输入设置为-1。这里的问题是，在他们穿过大门后，[上一个|下一个]按钮反应并搞砸了一切。

有没有办法可以一起删除这些按钮？或者将它们捕获为 js 事件？

（注意这是一个移动网页，不是应用程序）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:01:08.033

我解决这个问题的方法是设置`disable`并设置`visibility: hidden`用户不应该能够标签到的任何表单元素。这很让人头疼，但它在 iOS 5 上运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T00:27:13.837

您可以使用[touch-input-nav.js](https://github.com/ChrisWren/touch-input-nav)自动禁用与当前具有焦点的控件不包含在同一表单中的输入字段。这本质上是一种实现 Ben 解决方案的自动化方式。通过[这个答案](https://stackoverflow.com/a/20943185/71262)找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T16:49:12.520

您可以捕获各种元素的 onfocus 和 onblur 事件，并根据您的需要有一些逻辑决定是否允许。结果将是按下“下一步”并保持原位。

# jquery - .submit() 的 jQuery 问题

> ID：10574664
> 
> 赞同：0
> 
> 时间：2012-05-13T19:44:49.020
> 
> 标签：jquery, submit

在下面的代码中，“clicked”被注销，但“submitted”从未被记录。有谁知道为什么？ID 是正确的。

```
$('#submitModal').click(function(){
    console.log("clicked");
    $('#createEvent').submit(function() {
        console.log('submitted');
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T19:47:04.217

此代码绑定一个处理程序。它不会触发一个。

```
$('#createEvent').submit(function() {
    console.log('submitted');
    return false;
}); 
```

您需要先绑定它，然后在需要时触发它。

```
 // bind the click
$('#submitModal').click(function(){
    console.log("clicked");
    $('#createEvent').submit(); // trigger the pre-bound submit handler
});

  // bind the submit
$('#createEvent').submit(function() {
    console.log('submitted');
    return false;
}); 
```

如果`$('#submitModal')`是`form`元素的提交按钮，您也可能会遇到一些问题。没有把握。

# mysql - 五表连接？

> ID：10574669
> 
> 赞同：0
> 
> 时间：2012-05-13T19:45:40.813
> 
> 标签：mysql, sql

我正在尝试加入 5 个表格，以便为我的客户创建发票。5个表被命名；`Customer`, `Employee`,和. `Sale`_ 和表通过一对多关系链接到。然后将该表链接到具有一对多关系的表，然后以相同的方式链接。`Sale_product``Product``Customer``Employee``Sale``Sale``Sale_product``sale_product`

这是我的`from`陈述，它给我带来了问题。

```
from
INNER JOIN Sale_Product 
ON product.prod# = Sale_Product.prod#
INNER JOIN Sale 
ON sale.inv# = sale_product.inv#
INNER JOIN customer
ON customer.cust# = sale.cust#
INNER join employee
ON employee.emp# = sale.emp# 
```

我真的很感激一些帮助理解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:50:39.547

在“from”之后添加一个表，或者在 Sale_Product 之前删除“inner join”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:03:44.230

看起来好像您忘记在查询中命名产品表，它属于 FROM 子句：

```
FROM product 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T20:00:19.663

你想要类似的东西

```
Select * From ATable Join BTable on ATable.ID = BTable.ID 
```

即，您将五张桌子中的一张放在 from 之后，然后加入其他四张。

# asp.net - 需要的想法 - jqGrid 双重回发会杀死视图状态。如何保存它们？

> ID：10574676
> 
> 赞同：1
> 
> 时间：2012-05-13T19:47:10.033
> 
> 标签：asp.net, jqgrid, postback

我有一个用于 .Net 表单的 jqGrid，相关人员希望这样做，因此许可证已经到位。

在将数据放入 ViewState 的页面中还发生了其他事情。由于双重回发，视图状态将在第二次回发中消失。我们不能将信息放入会话中，因为有一个选项可以让用户“在新窗口中打开”，因此会话信息不会像在特定于页面的 ViewState 中那样“分开”。

我试图想办法在双重回发中以某种方式保留视图状态并使其对页面独一无二。

我在考虑可能有一个与 GUID 关联的会话，但这会通过页面进行，如果我必须更新会话中的视图状态，它可能会变得很难看。

我希望如果我在这里问，可能会有一些我可以使用的想法。谢谢

# java - JMF with Processing - 音频可视化器

> ID：10574678
> 
> 赞同：2
> 
> 时间：2012-05-13T19:47:29.957
> 
> 标签：java, fft, processing, jmf, minim

我有这个很棒的音频可视化工具，它是用 Processing 2.0a5 和 minim 库创建的，它使用 fft 来分析音频数据。

```
import ddf.minim.*;
import ddf.minim.analysis.*;

Minim minim;
AudioPlayer song;
FFT fft;

int col=0; // color, oscillates over time.

void setup()
{
size(498, 89);

// always start Minim first!
minim = new Minim(this);

// specify 512 for the length of the sample buffers
// the default buffer size is 1024
song = minim.loadFile("obedear.mp3", 2048);

song.play();

// an FFT needs to know how
// long the audio buffers it will be analyzing are
// and also needs to know
// the sample rate of the audio it is analyzing
fft = new FFT(song.bufferSize(), song.sampleRate());

}

void draw()
{
colorMode(HSB);  
background(0);
// first perform a forward fft on one of song's buffers
// I'm using the mix buffer
// but you can use any one you like
fft.forward(song.mix);
col++;
if (255<col){col=0;} // loops the color
strokeWeight(8);
stroke(col, 255, 255);

// draw the spectrum as a series of vertical lines
// I multiple the value of getBand by 4
// so that we can see the lines better
for(int i = 0; i < fft.specSize(); i++)
{
line(i-160, height, i-160, height - fft.getBand(i)*2);
}

}

void stop()
{
song.close();
minim.stop();

super.stop();
} 
```

所以现在我想做的是通过一个 url 导入歌曲源，比如从 soundcloud 中说。url 可能看起来像这样 - [http://api.soundcloud.com/tracks/46893/stream?client_id=759a08f9fd8515cf34695bf3e714f74b](http://api.soundcloud.com/tracks/46893/stream?client_id=759a08f9fd8515cf34695bf3e714f74b)返回 128 kbps mp3 流。我知道 JMF 2.1 支持用于流式音频的 URLDataSource，但我不确定 JMF 和 processing/minim/fft 是否能很好地一起播放。我对Java真的很陌生，但仍然不完全熟悉来龙去脉。我真的习惯了 php 和 html。我还看到 Soundcloud 在其 javascript SDK 中集成了 Soundmanager2 流媒体。不确定这是否会提供任何可能的集成解决方案。

理想情况下，我想用 php 和 html 向用户提供一份 soundcloud 歌曲列表，点击后，我想用我自己的可视化器播放歌曲，最好是我在处理过程中创建的。我很难让它发挥作用，而且我对 java 的无知绝对无济于事。如果可能的话，有什么关于实现这一点的最佳方法的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:22:18.420

神圣的嘘@t！Minim 的 loadFile 接受直接 url，就像我在上面发布的文件名参数一样！我在这里找到了答案：[code.compartmental.net/tools/minim/manual-minim](http://code.compartmental.net/tools/minim/manual-minim)有很多不同的文档链接，我想我错过了“手册”。无论如何，这太棒了。如果有人想要一个很酷的基于 Java 的音频播放器和可视化器，请随意窃取我的（无论如何大部分都是公开可用的代码）。

# ruby-on-rails - rails自动包含库问题

> ID：10574679
> 
> 赞同：0
> 
> 时间：2012-05-13T19:47:30.350
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我希望 Rails 在我的 lib 目录中自动包含所有库。

这是我在 config/application.rb 中的当前配置：

```
config.autoload_paths += %W(#{config.root}/lib) 
```

但是，Rails 只会包含一些库而不是全部。

是否可能是因为库在模块名称（例如 ModuleName）中有 2 个大写字母？

如果不是，那还能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:50:15.560

尝试这个

```
config.autoload_paths += Dir["#{config.root}/lib/**/"] 
```

# ruby-on-rails - ROR - 一个模型的两个场关系 [ORM]

> ID：10574683
> 
> 赞同：0
> 
> 时间：2012-05-13T19:47:57.880
> 
> 标签：ruby-on-rails, ruby, orm, model, ruby-on-rails-3.2

**案例：**
我
在ride_request 中有一个模型（“ride_request”）有两个字段（pickup_location，dropoff_location）
两个字段（pickup 和 dropoff）都是一个模型（*location*） 的实例

这是我的迁移

```
create_table :ride_requests do |t|
  t.integer :pickup_location
  t.integer :dropoff_location 
```

**问题：**
当您通常使用 location_id 时，如何在拾取/丢弃字段中创建与位置的关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T20:10:11.057

您可以使用 :class_name 和 :foreign_key 来指示差异

```
Class RideRequest
  belongs_to :pickup, :class_name => "location", :foreign_key => "pickup_location"
  belongs_to :dropoff, :class_name => "location", :foreign_key => "dropoff_location" 
```

# macos - 在 zsh 中哪里放置 $PATH 变量断言？

> ID：10574684
> 
> 赞同：160
> 
> 时间：2012-05-13T19:48:22.420
> 
> 标签：macos, shell, zsh

我喜欢`zsh`，但我不确定在哪里放置我的`$PATH`和其他变量断言？我发现它们分散在文件之间`.zshrc` `.zprofile` `.bashrc` `.bash_profile`，有时会加倍。

我意识到在`bash`文件中包含任何内容并没有多大意义，因为我正在使用`zsh`，但是**我应该将我`rvm`的 ,`python`等`node`添加到我的`$PATH`?**

是否有我应该使用的特定文件（即我的安装中当前`.zshenv`不*存在*的文件），我当前正在使用的文件之一，或者它甚至重要吗？

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2012-05-14T12:27:05.557

tl；博士版本：使用`~/.zshrc`

并[阅读手册页](http://linux.die.net/man/1/zshall)以了解以下之间的区别：

> `~/.zshrc`,`~/.zshenv`和`~/.zprofile`.

* * *

## 关于我的评论

[在我对kev给出](https://stackoverflow.com/a/10576306/1084945)的答案的评论中，我说：

> 这似乎是不正确的 - /etc/profile 没有在我能找到的任何 zsh 文档中列出。

事实证明这部分不正确：`/etc/profile` *可能*来自`zsh`. **但是**，这仅在`zsh`“调用为`sh`或`ksh`”时才会发生；在这些兼容模式下：

> 不执行通常的 zsh 启动/关闭脚本。登录 shell 源 /etc/profile 后跟 $HOME/.profile。如果在调用时设置了 ENV 环境变量，则 $ENV 源自配置文件脚本。ENV 的值在被解释为路径名之前经过参数扩展、命令替换和算术扩展。[ [man zshall，“兼容性”](http://linux.die.net/man/1/zshall) ]。

[ArchWiki ZSH 链接](https://wiki.archlinux.org/index.php/Zsh)说：

> 登录时，Zsh 按以下顺序获取以下文件：
> /etc/profile
> 该文件由所有 Bourne 兼容的 shell 在登录时获取

这意味着登录`/etc/profile`时*总是会读到*- 我对`zsh`Arch Linux 项目没有任何经验；wiki 可能对那个发行版是正确的，但它通常*不*正确。与 zsh 手册页相比，该信息**不**正确，并且似乎不适用于 OS X 上的 zsh（`$PATH`设置中的路径`/etc/profile`不会进入我的 zsh 会话）。

* * *

## 要解决这个问题：

> 我应该将我的 rvm、python、node 等添加到我的 $PATH 的确切位置？

一般来说，我会导出我`$PATH`的 from `~/.zshrc`，但值得阅读[zshall](http://linux.die.net/man/1/zshall)手册页，特别是“启动/关闭文件”部分 -`~/.zshrc`用于*交互式*shell，它可能适合也可能不适合您的需求 - 如果您想要`$PATH`for您调用的每个`zsh`shell（两者`interactive`都不是，两者`login`都不是，等等），然后`~/.zshenv`是一个更好的选择。

> 是否有我应该使用的特定文件（即我的安装中当前不存在的 .zshenv），我当前正在使用的文件之一，或者它是否重要？

启动时读取了一堆文件（检查链接`man`页面），这是有原因的 - 每个文件都有其特定的位置（每个用户的设置，用户特定的设置，登录 shell 的设置，每个 shell 的设置， ETC）。
不用担心`~/.zshenv`不存在——如果你需要它，制作它，它会被阅读。

`.bashrc`并且**不会**`.bash_profile`被阅读，除非您明确地从或类似来源获得它们；和之间的语法*并不*总是兼容的。两者和都是为设置而设计的，而不是设置。**`zsh``~/.zshrc``bash``zsh`*`.bashrc``.bash_profile``bash``zsh`***

 **** * *

## 回答 #2

> 赞同：40
> 
> 时间：2015-01-02T13:01:19.227

这是 STARTUP/SHUTDOWN FILES 部分下 zsh 手册页中的文档。

```
 Commands  are  first  read from /etc/zshenv this cannot be overridden.
   Subsequent behaviour is modified by the RCS and GLOBAL_RCS options; the
   former  affects all startup files, while the second only affects global
   startup files (those shown here with an path starting with  a  /).   If
   one  of  the  options  is  unset  at  any point, any subsequent startup
   file(s) of the corresponding type will not be read.  It is also  possi-
   ble  for  a  file  in  $ZDOTDIR  to  re-enable GLOBAL_RCS. Both RCS and
   GLOBAL_RCS are set by default.

   Commands are then read from $ZDOTDIR/.zshenv.  If the shell is a  login
   shell,  commands  are  read from /etc/zprofile and then $ZDOTDIR/.zpro-
   file.  Then, if the  shell  is  interactive,  commands  are  read  from
   /etc/zshrc  and then $ZDOTDIR/.zshrc.  Finally, if the shell is a login
   shell, /etc/zlogin and $ZDOTDIR/.zlogin are read. 
```

从这里我们可以看到读取的订单文件是：

```
/etc/zshenv    # Read for every shell
~/.zshenv      # Read for every shell except ones started with -f
/etc/zprofile  # Global config for login shells, read before zshrc
~/.zprofile    # User config for login shells
/etc/zshrc     # Global config for interactive shells
~/.zshrc       # User config for interactive shells
/etc/zlogin    # Global config for login shells, read after zshrc
~/.zlogin      # User config for login shells
~/.zlogout     # User config for login shells, read upon logout
/etc/zlogout   # Global config for login shells, read after user logout file 
```

[您可以在此处](http://zshwiki.org/home/config/files "http://zshwiki.org/home/config/files")获得更多信息。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-03-22T04:36:11.507

我有类似的问题（在 bash 终端命令工作正常但 zsh 显示命令未找到错误）

## 解决方案：

**只需将您之前在 ~/.bashrc 中粘贴的内容粘贴到：**

```
~/.zshrc 
```***

# objective-c - 管理控制器之间数据的最佳对象架构

> ID：10574685
> 
> 赞同：2
> 
> 时间：2012-05-13T19:48:24.013
> 
> 标签：objective-c, xcode, cocoa

我想开发一个应用程序，其中主窗口有`NSTabView`几个`NSTabViewItems`，并且在每个项目中都有不同的`NSTableView`.

您将如何组织类架构以便能够从每个选项卡 tableview 控制器访问其他控制器？最好的方法是什么？

我已经阅读了很多关于[使用委托](https://stackoverflow.com/questions/5210535/passing-data-between-view-controllers)等在控制器之间传递数据的内容，但我认为必须有另一种更清晰的方法来解决这个问题。

有下一个示例场景：

**TabOneController.h**

```
@interface TabOneController : NSControl {
    NSMutableArray *listOne;
        ...
} 
```

**TabTwoController.h**

```
@interface TabTwoController : NSControl {
    NSMutableArray *listTwo;
        ...
} 
```

这两个控制器使用它的列表实现`NSTableView`dataSource 和委托方法。`NSMutableArray`我想要一个合适的场景，两个控制器可以相互访问（类方法、视图控制器、另一个控制器管理所有或任何适合这里的好主意）。你认为最好的方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T12:18:16.737

如果要在控制器之间共享数据，一个好的解决方案是向所有控制器传递相同的数据对象实例。如果有更多数据要共享，或者数据附加了一些额外的功能，请将其包装在模型类中并让控制器共享指向同一模型的指针。

如果您希望控制器相互调用，则有许多具有不同含义的可能性并且没有确定的答案，一切都取决于情况。重要的问题是：*为什么所有选项卡控制器都想访问其他选项卡控制器？*通常，您应该保持控制器隔离。这称为松散耦合，它对您的设计非常有利。

如果控制器需要相互调用，请尝试重新考虑设计。也许某些行为应该改为模型？例如，您可以将删除代码移动到模型中，而不是调用另一个控制器从列表中删除项目，其他感兴趣的控制器可以通过观察模型来了解模型的变化。

无论你做什么，[都不要使用单例](http://zmotula.tumblr.com/post/1390385240/why-singletons-suck):) 我[在 GitHub 上放了一些示例代码](https://github.com/zoul/Singletons-Suck)，展示了如何在不（错误）使用单例的情况下连接项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T13:57:26.137

第一个选项：为每个控制器声明指向其他控制器的实例变量？例如，假设您`anotherController`在`CustomController1`and 中创建了一个属性：

```
CustomController1 *controller1 = [[CustomController1 alloc] init];
CustomController2 *controller2 = [[CustomController2 alloc] init];
controller1.anotherController = controller2; 
```

这样，`controller1`就可以访问`controller2`. 然后对其他控制器做类似的事情。你甚至可以在那里应用一些继承。

第二种选择：从特定控制器执行：

```
CustomController *customController =
(CustomController *)[self.tabBarController.viewControllers objectAtIndex:x] 
```

假设 CustomController 是您要访问的控制器的类，x 是它在标签栏控制器维护的数组中的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T11:55:57.667

我将创建一个单例类来存储数据并处理所有数据操作......您可以将数据存储在 NSUserDefaults 作为最简单的做法。

如果您只想使用一些共享变量，我会使用 AppDelegate。

# mysql - 用mysql中另一个表的值更新表中的值

> ID：10574687
> 
> 赞同：0
> 
> 时间：2012-05-13T19:48:38.353
> 
> 标签：mysql

我有`tbltransfer`哪个包含`location`和`eq_id`。我想将`location`in`tblequipments`的值更改为`location`from `tbltransfer`where `eq_id`in的值`tblequipments`等于`eq_id`in `tbltransfer`。这是我提出的查询：

```
UPDATE tblequipments 
    SET LocationName = (
        SELECT t.Location from tbltransfer as t 
        join tblequipments as e on t.eq_ID = e.eq_ID 
        WHERE t.transactionID=%s
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:52:51.667

mysql 将为更新语句中的每一行运行子查询。最好在这里使用 join ：

```
UPDATE
    tblequipments,
    tbltransfer
SET
    tblequipments.location = tbltransfer.location
WHERE
    tblequipments.eq_id = tbltransfer.eq_id
AND
    tbltransfer.transactionID = %s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T19:53:43.033

```
UPDATE tblequipments
INNER JOIN tbltransfer ON tblequipments.eq_ID = tbltransfer.eq_ID 
SET tblequipments.LocationName=tbltransfer.Location
WHERE tbltransfer.transactionID=%s 
```

# c# - 多态性：从基类中的受保护成员派生？

> ID：10574692
> 
> 赞同：7
> 
> 时间：2012-05-13T19:49:24.790
> 
> 标签：c#, polymorphism

我正在编写一个基本的媒体播放器，我在编写多态代码时遇到了一些麻烦，这是我研究过的，但以前从未真正实现过。

有四个相关的类：MediaInfo、MovieInfo、Media 和 Movie。

MediaInfo 是一个抽象基类，包含与所有媒体文件相关的信息。MovieInfo 继承自 MediaInfo 并添加一些特定于视频文件的信息。

媒体是代表所有媒体文件的抽象基类。电影继承自媒体。

现在，Media 包含以下代码行：

```
protected MediaInfo info; 
```

在 Media 内部，我有从 MediaInfo 中提取信息的访问器。但是，在 Movie 中，我希望访问器也可以从 MovieInfo 中提取信息。

所以我在电影里面做的是：

```
protected MovieInfo info; 
```

在构造函数内部：

```
this.info = new MovieInfo(path); 
```

但是，现在我有一个访问器：

```
/// <summary>
/// Gets the frame height of the movie file.
/// </summary>
public string FrameHeight
{
    get
    {
        return this.info.FrameHeight;
    }
} 
```

问题是，FrameHeight 是仅在 MovieInfo 中可用的访问器。this.info 被视为 MediaInfo，尽管我将其声明为 MovieInfo，因此代码会生成错误。

因此，将我的问题总结为一个更通用的问题：在派生类中，如何从基类中的受保护基变量派生？

抱歉，如果这有点令人困惑，我很乐意澄清任何不清楚的细节。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T19:57:06.273

`MediaInfo`您可以在它包含的类型中使基类泛型：

```
public abstract class Media<T> where T : MediaInfo
{
    protected T info;
} 
```

然后您可以指定`Movie`处理`MovieInfo`类型：

```
public class Movie : Media<MovieInfo>
{
    public string FrameHeight
    {
        get { return this.info.FrameHeight; }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T20:53:29.087

这是一个非通用的替代方案：

```
protected MovieInfo info { get { return (MovieInfo)base.info; } } 
```

根据情况，这可能会或可能不会比李的解决方案更好。我个人更喜欢他的，只是一般地思考。

# wordpress - Wordpress：自定义分类法的共同标签是什么？

> ID：10574695
> 
> 赞同：0
> 
> 时间：2012-05-13T19:49:50.317
> 
> 标签：wordpress

我正在学习wordpress。

在我的 archive.php 中，我有几个条件标签，例如：

```
if ( is_category() ) {
 ...
} elseif ( is_tag ) {
 ...
} elseif ( is_month) {
 ...
} 
```

等等

问题

我找不到识别自定义分类法的条件标签。名为“区域”的自定义分类法的条件标签是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:45:50.530

Archive.php 根据[模板层次结构](http://codex.wordpress.org/images/1/18/Template_Hierarchy.png)基本上是一个包罗万象的东西。您的分类页面应该是`taxonomy-zones.php`. 你问的功能是[`is_tax()`](http://codex.wordpress.org/Function_Reference/is_tax).

# math - 计算数据增量

> ID：10574705
> 
> 赞同：1
> 
> 时间：2012-05-13T19:50:40.177
> 
> 标签：math, interpolation, delta

我正在编写一个服务器，它每 300 毫秒向客户端发送一个游戏对象的“坐标缓冲区”。但我不想每次都发送完整的数据。例如，假设我有一个包含随时间变化的元素的数组：

```
0 0 100 50 -100 -50 在时间*t*   
0 10 100 51 -101 -50 在时间*t* + 300ms

```

您可以看到只有 2 ^(nd)、 4 ^(th)和 5 ^(th)元素发生了变化。

不发送所有元素而只发送增量的正确方法是什么？理想情况下，我想要一个第一次返回完整数据并在没有更改时返回空数据的函数。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:08:33.427

您是否希望优化效率，或者这是一个学习练习？一些想法：

*   除非有*很多*数据，否则每次都发送所有数据可能是最简单的，而且效率也不是很低。

*   如果您每次都发送所有数据点的增量，则通过为未更改的点发送零而不是重新发送以前的值，您不会节省太多。

*   如果您只为那些发生变化的点发送数据，则需要为每个值提供一个索引。例如，如果点 3 增加 5，点 8 减少 2，那么您可以发送`3 5 8 -2`. 但是现在，由于您要为每个更改的点发送*两个*值，因此只有少于一半的点更改时您才会获胜。

*   如果与传输更新的速率相比，值的变化相对较慢，您可以通过传输每个数据点的增量来提高效率，但只使用几个位。例如，使用 4 位，您可以传输从 -8 到 +7 的值。只要增量永远不会大于该值，或者可以在它们“赶上”实际值之前传输几个增量，这将起作用。

*   有两种不同的机制可能不值得：一种发送初始值，另一种发送增量。如果您可以容忍滞后，则为每个点假设一些恒定的初始值可能更有意义，然后仅传输增量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:55:26.807

有很多选择。如果大多数数据没有变化，只需发送已更改元素的 (index,value) 对。如果大多数值发生变化但变化很小，则计算增量和 gzip（或运行长度编码，或许多其他可能性）结果。

# actionscript-3 - 如何获取使用我的应用程序的朋友列表？

> ID：10574706
> 
> 赞同：0
> 
> 时间：2012-05-13T19:50:43.173
> 
> 标签：actionscript-3, facebook-actionscript-api

所以，

我正在尝试 Facebook.api("/me/friends?fields=installed",handleFunc); 没有高兴，我在 Firebug 中收到一个错误的请求错误。

但是，我只获取朋友列表没有问题： Facebook.api("/me/friends", handleFriendsLoad);

我知道有一种 FQL 方法可以做到这一点。但是，为什么以上对我不起作用？如果 FQL 是这样做的唯一方法，那么需要什么代码？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T20:18:26.527

`/me/friends?fields=installed` **不使用该应用程序获取朋友。**

但它会获取您所有的朋友以及他们的额外字段`installed`。

FQL的方式，
`SELECT uid FROM user WHERE uid IN(SELECT uid2 FROM friend WHERE uid1 = me()) AND is_app_user = 1`

是正确的方法。

如果你被迫使用graph api，你可以通过所有好友进行交互并检查好友是否有字段named `installed`。

`/me/friends?fields=installed`下面给出了一个输出片段。它将帮助您理解我的回答。

```
{
  "id": "504726424"
},
{
  "id": "524806999"
},

{
  "installed": true,
  "id": "672755276"
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T02:14:02.653

尝试使用如下参数：

```
FacebookMobile.api("me/friends", handleFriendsList, {fields:"installed,name"}); 
```

# android - 使用 mediarecorder 输入以字符串形式发音的音频

> ID：10574709
> 
> 赞同：0
> 
> 时间：2012-05-13T19:51:22.483
> 
> 标签：android, android-mediarecorder

有人帮助我提供一个通过媒体记录器获取音频输入并将其转换为字符串的代码示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T20:53:50.507

这里有两个关于使用 MediaRecorder 录音的不错的教程：

* * *

[教程 1](http://www.vogella.com/articles/AndroidMedia/article.html)

[教程 2](http://www.benmccann.com/blog/android-audio-recording-tutorial/)

* * *

但我认为您正在谈论**Speech-to-Text**或**Voice Recognition**，它将音频语音转换为字符串。如果是这样，这里有一些不错的教程：

* * *

[语音识别](http://www.jameselsey.co.uk/blogs/techblog/android-how-to-implement-voice-recognition-a-nice-easy-tutorial/)

[语音识别 API 演示](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/VoiceRecognition.html)

# java - JGraphT - UndirectedGraph - addEdge 方法不起作用

> ID：10574711
> 
> 赞同：0
> 
> 时间：2012-05-13T19:51:50.460
> 
> 标签：java, graph, jgrapht

我对 UndirectedGraph 的使用有疑问。我的代码：

```
UndirectedGraph<String, DefaultEdge> graph =
            new SimpleGraph<String, DefaultEdge>(DefaultEdge.class);

 String v1 = "v1";
 String v2 = "v2";
 String v3 = "v3";
 String v4 = "v4";

 graph.addVertex(v1);
 graph.addVertex(v2);
 graph.addVertex(v3);
 graph.addVertex(v4);

 graph.addEdge(v1, v2);
 graph.addEdge(v2, v3);
 graph.addEdge(v3, v4);
 graph.addEdge(v4, v1); 
```

每个顶点都已成功添加到图形中。但是， addEdge 方法无法正常工作。当我调试这段代码时，首先 addEdge 行抛出类未找到异常。

我希望，你会帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:57:07.167

With jgrapht-0.8.3, the following works as expected:

```
import org.jgrapht.UndirectedGraph;
import org.jgrapht.graph.DefaultEdge;
import org.jgrapht.graph.SimpleGraph;

public class GraphTest {

  public static void main(String[] args) {
    UndirectedGraph<String, DefaultEdge> graph =
      new SimpleGraph<String, DefaultEdge>(DefaultEdge.class);

    String v1 = "v1";
    String v2 = "v2";
    String v3 = "v3";
    String v4 = "v4";

    graph.addVertex(v1);
    graph.addVertex(v2);
    graph.addVertex(v3);
    graph.addVertex(v4);

    graph.addEdge(v1, v2);
    graph.addEdge(v2, v3);
    graph.addEdge(v3, v4);
    graph.addEdge(v4, v1);

    if( graph.getEdge(v1, v2) != null) { System.out.println("SUCCESS"); }
    if (graph.getEdge(v2,v4) == null)  { System.out.println("SUCCESS"); }
  }
} 
```

I get

> SUCCESS
> 
> SUCCESS

Can you clarify what problem you're having?

# html - 将未知宽度的 div 居中，同时在内部保持左对齐

> ID：10574713
> 
> 赞同：0
> 
> 时间：2012-05-13T19:51:55.273
> 
> 标签：html, css, text-align

这是我的 html/css 代码。请水平移动边框，直到最后一行包含的元素少于上面的行。

[http://jsfiddle.net/wb5kT/](http://jsfiddle.net/wb5kT/)

问题从这里开始。我确实想将整个东西水平居中，所以从页面边框到文本的左右距离是相同的。但是，最后一个可见行应该左对齐。我事先不知道视口的宽度或元素总数。

将“text-align: left”添加到 .images 将最后一行中的元素向左对齐，但会破坏整个“中心对齐”的东西。示例：http: [//jsfiddle.net/dgLQC/1/](http://jsfiddle.net/dgLQC/1/)

可以不使用表格来完成吗？

IE 8 或更低以及其他浏览器的旧版本可以忽略。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:54:41.317

我认为即使使用表格也无法做到这一点；一旦您的内容对于容器来说太宽，容器将采用其父级的宽度，即使内容恰好被包装以适应较小的宽度。

顺便说一句，要确保最后一行（假设不止一行）元素不完整，请选择素数的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T20:06:49.340

放入。`float:left`_`.thumb`

看到这个，[http://jsfiddle.net/C5Pev/](http://jsfiddle.net/C5Pev/)

**更新：**

我不好，上面的代码没有按预期工作。一个可能的解决方法是，

[http://jsfiddle.net/C5Pev/7/](http://jsfiddle.net/C5Pev/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T20:11:03.150

不确定我是否正确理解了您的问题，但似乎您需要将最后一行（两个 div）内的文本向左对齐，同时保持所有其他文本居中：

**您可以为此申请一个课程：**

```
.alignLeft {
    text-align: left;
} 
```

并将该课程分配给最后两个 div。

这是[小提琴的例子！](http://jsfiddle.net/zuul/wb5kT/2/)

* * *

## 编辑：

你的问题应该改写，它会导致你的目标是错误的结论，但这是你正在寻找的：

请参阅此[小提琴示例！](http://jsfiddle.net/zuul/wb5kT/5/)

相关 CSS 更新：

```
.thumb {
  float: left;              // align divs to the left of each other
  text-align: center;       // center text inside the div
  position: relative;
  border: 1px solid #D9D9D9; // view the blocks, not needed
  margin: 1px;               // get some distance between blocks, not needed
  font-size: 10px;           // small text to view that's centered, not needed
} 
```

**提示：** 水平收缩，直到你得到 3 个块的行，因此有两个 div 与文本*我在最后一行！*一个人在最后一排。

# c++ - valgrind 报告无效的免费/删除/重新分配

> ID：10574714
> 
> 赞同：1
> 
> 时间：2012-05-13T19:51:57.837
> 
> 标签：c++, valgrind

Valgrind memcheck 报告无效的释放/删除/重新分配。

有没有办法找出这个免费/删除的来源？我怀疑这正在发生一些析构函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:11:03.783

以下是我使用的 valgrind 选项：

valgrind --track-origins=yes --leak-check=full --show-reachable=yes

Track Origins 会告诉您免费的来源。

# facebook - 禁止“喜欢”在用户的墙上发帖

> ID：10574715
> 
> 赞同：1
> 
> 时间：2012-05-13T19:52:03.487
> 
> 标签：facebook, facebook-like, facebook-wall

我想阻止“喜欢”动作发布到用户的墙上。我已经对其进行了修改，因此“评论”框不会出现，我只是希望用户能够“喜欢”我网站上的帖子，而无需将其发布到他们的墙上。我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T04:16:55.577

不; 如果用户在他们的 Facebook 个人资料上不可见（取决于他们的隐私设置），您就不能让用户在您的页面上发布点赞——这几乎是点赞按钮的全部意义所在

# extjs - JSONP Extjs4 问题

> ID：10574720
> 
> 赞同：1
> 
> 时间：2012-05-13T19:52:49.453
> 
> 标签：extjs, extjs4, jsonp

我正在尝试使用从搜索服务器 (Solr) 检索的数据加载 JSON 存储。在 Firebug 中，我可以看到响应（Solr 返回数据），但我无法让商店加载传入的数据。

请注意，我在本地工作（solr 的地址：localhost:8080/blah/blah 和我的应用程序的地址：localhost:8500/blah/blah）。

**我的店铺代码：**

```
Ext.define('Ledger.store.Searchstore', {
    extend: 'Ext.data.Store',

    requires: ['Ledger.model.Searchmodel'],

    model: 'Ledger.model.Searchmodel',

    fields: [
        {name:'id', mapping:'id'},
        {name: 'model', mapping: 'title'},
        {name: 'firstname', mapping: 'firstname'},
        {name: 'lastname', mapping: 'lastname'},
        {name: 'title', mapping: 'title'},
        {name: 'biog', mapping: 'biog'}
        ],

    autoLoad: true,

    proxy: {
        type:'jsonp',
        url: 'http://127.0.0.1:8080/solr/select/?q=*:*&fq=model:book&wt=json',
        //noCache: false,
        //actionMethods:{create: "POST", read: "POST", update: "POST", destroy: "POST"},
        //callbackKey: 'myCallback',
        reader:{
            type: 'json',
            root: 'response.docs'
        }
    } 

}); 
```

**我的型号代码：**

```
Ext.define('Ledger.model.Searchmodel',{
    extend:'Ext.data.Model',

    fields:[
        {name:'id', mapping:'id'},
        {name: 'model', mapping: 'title'},
        {name: 'firstname', mapping: 'firstname'},
        {name: 'lastname', mapping: 'lastname'},
        {name: 'title', mapping: 'title'},
        {name: 'biog', mapping: 'biog'}
    ]

}); 
```

来自搜索服务器的传入 JSON（有效）：

```
{
  "responseHeader":{
    "status":0,
    "QTime":1,
    "params":{
      "indent":"on",
      "q":"*:*",
      "wt":"json",
      "fq":"model:book"}},
  "response":{"numFound":8,"start":0,"docs":[
      {
        "id":"1",
        "last_modified":"2012-05-12 15:33:07.0",
        "model":"book",
        "title":"The Art of Fielding: A Novel",
        "fake_id":"b_1",
        "biog":"At Westish College, a small school on the shore of Lake Michigan, baseball star Henry Skrimshander seems destined for big league stardom. But when a routine throw goes disastrously off course, the fates of five people are upended.\nHenry's fight against self-doubt threatens to ruin his future. College president Guert Affenlight, a longtime bachelor, has fallen unexpectedly and helplessly in love. Owen Dunne, Henry's gay roommate and teammate, becomes caught up in a dangerous affair. Mike Schwartz, the Harpooners' team captain and Henry's best friend, realizes he has guided Henry's career at the expense of his own. And Pella Affenlight, Guert's daughter, returns to Westish after escaping an ill-fated marriage, determined to start a new life.\nAs the season counts down to its climactic final game, these five are forced to confront their deepest hopes, anxieties, and secrets. In the process they forge new bonds, and help one another find their true paths. Written with boundless intelligence and filled with the tenderness of youth, The Art of Fielding is an expansive, warmhearted novel about ambition and its limits, about family and friendship and love, and about commitment--to oneself and to others.\t\t\t\t\t"},
      {
        "id":"2",
        "last_modified":"2012-05-12 15:33:55.0",
        "model":"book",
        "title":"The Tiger's Wife",
        "fake_id":"b_2",
        "biog":"Starred Review. The sometimes crushing power of myth, story, and memory is explored in the brilliant debut of Obreht, the youngest of the New Yorker's 20-under-40\. Natalia Stefanovi, a doctor living (and, in between suspensions, practicing) in an unnamed country that's a ringer for Obreht's native Croatia, crosses the border in search of answers about the death of her beloved grandfather, who raised her on tales from the village he grew up in, and where, following German bombardment in 1941, a tiger escaped from the zoo in a nearby city and befriended a mysterious deaf-mute woman. The evolving story of the tiger's wife, as the deaf-mute becomes known, forms one of three strands that sustain the novel, the other two being Natalia's efforts to care for orphans and a wayward family who, to lift a curse, are searching for the bones of a long-dead relative; and several of her grandfather's stories about Gavran Gailé, the deathless man, whose appearances coincide with catastrophe and who may hold the key to all the stories that ensnare Natalia. Obreht is an expert at depicting history through aftermath, people through the love they inspire, and place through the stories that endure; the reflected world she creates is both immediately recognizable and a legend in its own right. Obreht is talented far beyond her years, and her unsentimental faith in language, dream, and memory is a pleasure."},
      {
        "id":"3",
        "last_modified":"2012-05-12 15:34:00.0",
        "model":"book",
        "title":"State of Wonder",
        "fake_id":"b_3",
        "biog":"In State of Wonder, pharmaceutical researcher Dr. Marina Singh sets off into the Amazon jungle to find the remains and effects of a colleague who recently died under somewhat mysterious circumstances. But first she must locate Dr. Anneck Swenson, a renowned gynecologist who has spent years looking at the reproductive habits of a local tribe where women can conceive well into their middle ages and beyond. Eccentric and notoriously tough, Swenson is paid to find the key to this longstanding childbearing ability by the same company for which Dr. Singh works. Yet that isn’t their only connection: both have an overlapping professional past that Dr. Singh has long tried to forget. In finding her former mentor, Dr. Singh must face her own disappointments and regrets, along with the jungle’s unforgiving humidity and insects, making State of Wonder a multi-layered atmospheric novel that is hard to put down. Indeed, Patchett solidifies her well-deserved place as one of today’s master storytellers. Emotional, vivid, and a work of literature that will surely resonate with readers in the weeks and months to come, State of Wonder truly is a thing of beauty and mystery, much like the Amazon jungle itself."},
      {
        "id":"4",
        "last_modified":"2012-05-12 15:34:05.0",
        "model":"book",
        "title":"The Marriage Plot",
        "fake_id":"b_4",
        "biog":"A stunning novel—erudite, compassionate and penetrating in its analysis of love relationships. Eugenides focuses primarily on three characters, who all graduate from Brown in 1982\. One of the pieces of this triangle is Madeleine Hanna, who finds herself somewhat embarrassed to have emerged from a “normal” household in New Jersey (though we later find out the normality of her upbringing is only relative). She becomes enamored with Leonard, a brilliant but moody student, in their Semiotics course, one of the texts being, ironically, Roland Barthes’ A Lover’s Discourse, which Madeleine finds disturbingly problematic in helping her figure out her own love relationship. We discover that Leonard had been diagnosed with bipolar disorder during his first year at Brown, and his struggle with mood swings throughout the novel is both titanic and tender. The third major player is Mitchell, a Religious Studies major who is also attracted to Madeleine but whose reticence she finds both disturbing and incomprehensible. On graduation day, Leonard has a breakdown and is hospitalized in a mental-health ward, and Madeleine shows her commitment by skipping the festivities and seeking him out. After graduation, Leonard and Madeleine live together when Leonard gets an internship at a biology lab on Cape Cod, and the spring after graduation they marry, when Leonard is able to get his mood swings under temporary control. Meanwhile Mitchell, who takes his major seriously, travels to India seeking a path—and briefly finds one when he volunteers to work with the dying in Calcutta. But Mitchell’s road to self-discovery eventually returns him to the States—and opens another opportunity for love that complicates Madeleine’s life. "},
      {
        "id":"5",
        "last_modified":"2012-05-12 15:34:07.0",
        "model":"book",
        "title":"Steve Jobs",
        "fake_id":"b_5",
        "biog":"Based on more than forty interviews with Jobs conducted over two years—as well as interviews with more than a hundred family members, friends, adversaries, competitors, and colleagues—Walter Isaacson has written a riveting story of the roller-coaster life and searingly intense personality of a creative entrepreneur whose passion for perfection and ferocious drive revolutionized six industries: personal computers, animated movies, music, phones, tablet computing, and digital publishing.\r\nAt a time when America is seeking ways to sustain its innovative edge, and when societies around the world are trying to build digital-age economies, Jobs stands as the ultimate icon of inventiveness and applied imagination. He knew that the best way to create value in the twenty-first century was to connect creativity with technology. He built a company where leaps of the imagination were combined with remarkable feats of engineering.\nAlthough Jobs cooperated with this book, he asked for no control over what was written nor even the right to read it before it was published. He put nothing off-limits. He encouraged the people he knew to speak honestly. And Jobs speaks candidly, sometimes brutally so, about the people he worked with and competed against. His friends, foes, and colleagues provide an unvarnished view of the passions, perfectionism, obsessions, artistry, devilry, and compulsion for control that shaped his approach to business and the innovative products that resulted.\nDriven by demons, Jobs could drive those around him to fury and despair. But his personality and products were interrelated, just as Apple’s hardware and software tended to be, as if part of an integrated system. His tale is instructive and cautionary, filled with lessons about innovation, character, leadership, and values."},
      {
        "id":"6",
        "last_modified":"2012-05-12 15:34:10.0",
        "model":"book",
        "title":"The Mill River Recluse",
        "fake_id":"b_6",
        "biog":"Having been loaned a Kindle from a friend, I immediately went in search of books that were inexpensive. I stumbled on The Mill River Recluse and the reviews were what made me really want to read this book. Having never written a review before, when I completed this book I felt I HAD to write a review. I was so wonderfully surprised to the depth of characters, storylines and twists and turns along the way. I stayed up all night just to finish it!! I found myself chuckling at times and caught myself off guard with tears rolling down my face. You became part of Mill River and its community almost from the first page. I really didn't want the story to end.\nIf you have only one chance to read a good Kindle book - this is by far the one! I enjoyed it so much, that when I someday purchase my own Kindle, I will be adding (and most likely reading) this book again....one I DEFINATELY want to add to a 'forever' collection!"},
      {
        "id":"7",
        "last_modified":"2012-05-12 15:34:13.0",
        "model":"book",
        "title":"Chasing Amanda",
        "fake_id":"b_7",
        "biog":"In \"Chasing Amanda\" Melissa Foster guides us in helping Molly; wife, mother to a teenage son, search for a missing girl. The young girl has disappeared from their quiet, rural community; a place where things like this simply don't happen. For Molly, it's deja vu. Several years earlier, while living in Philadelphia, she witnessed a similar event. She did nothing at that time, and has been tormented by her inaction ever since.\nMolly's special gift, or curse, is her clairvoyance. She can sometimes 'see' things that others cannot. In Philadelphia, she failed the little girl, whose body was found shortly after. Now, she promised herself that she would not make that mistake again. Molly persists, using her clairvoyance and sheer stubbornness in an effort to find the child. In doing so, Molly exposes her town's shameful secrets, presenting a conclusion to this story, that I never saw coming!\nMelissa Foster's skill with her characters, drew me into the story immediately. The suspense that followed made this book a definite page-turner!"},
      {
        "id":"13",
        "last_modified":"2012-05-12 16:08:48.0",
        "model":"book",
        "title":"Kodokan Judo",
        "fake_id":"b_13",
        "biog":"Judo, or the Way of Gentleness, an ideal form of physical exercise and a reliable system, of self-defense, was specially created from traditional Japanese martial arts. This book by the creator of Kodokan judo is uniquely comprehensive and the most authoritative guide to this martial art ever published.\r\nOver a hundred years ago Jigoro Kano mastered swordsmanship and hand-to-hand combat. Failing to discover any underlying principle, he set about designing a new martial art to reflect the concept of maximum efficiency in the use of physical and mental energy. Today, the concepts and techniques of judo taught at the Kodokan are the ones originally devised by their creator and collected together in this book. Covering everything from the fundamental techniques to prearranged formal exercises for both men and women, the book offers detailed explanations of how techniques are combined in two types of practice: randori (free practice) and kata (the practice of forms). In addition to a discussion of traditional methods of resuscitation, the book concludes with a useful appendix of information on the founder and the Kodokan International Judo Center, and a glossary of judo terminology. Fully illustrated throughout, Kodokan Judo will help students and instructors everywhere to discover the principles, techniques, and spirit of this popular martial art."}]
  }} 
```

在某处我有一个按钮来“console.log”存储，但是当我调用时（注意我在存储定义中将 autoload 属性设置为 true）它是空的。当我通过 AJAX 代理加载上述 JSON（将服务器的响应复制到 JSON 文件中）时，存储会加载数据。

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:46:01.820

试试这几件事。

第一个将代理设置为模型而不是存储。很长一段时间我都有同样的问题。然后尝试重新加载您的应用程序。

第二个直接设置根“文档”。

第三个设置一个 Ledger.store.Searchstore.load();

最后我使用了一个像这样的代理，我把如何读取远程文件留给我的 php 文件：

```
proxy: {
type: 'ajax',
api: {
    read: 'scripts/receive.php',
    create: 'scripts/create.php?action=create',
    update: 'scripts/create.php?action=update',
    destroy:'scripts/destroy.php?action=destroy'
}, 
```

# command-line - 使用 Visual Studio 命令将文件复制到 outdir

> ID：10574728
> 
> 赞同：1
> 
> 时间：2012-05-13T19:53:47.523
> 
> 标签：command-line, copy, vcproj

在“资源文件”下的项目中，我有一些我想复制到输出目录的属性文件。这个想法是我可以将我的输出目录提供给其他人，他们会自动读取 bin/output 目录中的属性文件。

我相信我这样做的方法是添加一个构建事件命令行命令并使用 XCOPY 或 COPY commannds。在查看了 XCOPY 的帮助之后，命令只是

> XCOPY src 目标

我使用了命令：`XCOPY $(InputDir)/properties.conf $(OutDir)/properties.conf`

但它说它找不到文件。所以我试图找出 $(InputDir) 指向什么，因为其他人让它工作，但是 VS 命令行工具中的“set”命令只显示系统环境。变量而不是 vcprojects 可用的变量。

关于如何让它发挥作用的任何想法？也许有不同的方法可以做到这一点？

SOLN：刚刚使用“COPY properties.conf $(OutDir)\properties.conf”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:11:32.353

刚刚使用“COPY properties.conf $(OutDir)\properties.conf”

# android - Android 记录计数 Toast 消息？

> ID：10574730
> 
> 赞同：0
> 
> 时间：2012-05-13T19:53:58.580
> 
> 标签：android, android-intent

我有一个应用程序，我想通过在执行查询时只显示 5 条记录来削弱它。以下是我在 DataBaseHelper.java 中为此使用的代码，它非常适合我需要的东西。 .......它只返回 KEY_RECORD1 以 DESC 顺序排列的 5 条记录

我的问题是，当达到 5 条记录限制时，我想以 Toast 的形式实现警告消息.....

因此，当您添加第六条记录时，您会得到....示例 Toast：已达到 5 条记录的限制！

```
public Cursor fetchAllNotes() {
    return mDb.query(DATABASE_TABLE,
            new String[] { KEY_ROWID, KEY_RECORD1, KEY_RECORD2,
                    KEY_RECORD3}, null,
            null, null, null, KEY_RECORD1 + " DESC", "5");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:01:34.087

```
if (fetchAllNotes().getCount() >= 5){
   //Toast.makeText...
} 
```

为了避免额外的请求并提高性能，您可以这样做一次，以检索记录数，并在每次插入时增加该计数器。

# asp.net-mvc-3 - 迭代时使用 Html.HiddenFor

> ID：10574731
> 
> 赞同：2
> 
> 时间：2012-05-13T19:54:04.123
> 
> 标签：asp.net-mvc-3, html.hiddenfor

ViewModel 看起来像这样：

```
public W { get; set; }
public WC WC { get; set; }
public List<TC> TCs { get; set; } 
```

WC有一组相关的TC。它们的关系由包含外键的 TC 映射`WCId`。

在视图中，我有一个表格。在表单中，有 WC 的输入字段。然后，有一组 TC 取决于最大为 4 的计数。每个 TC 都有一个相关的 T，因为 TC 有一个外键`TCId`。我正在尝试确保在发布表单时 TC 具有相关的`TId`. `TId`保存在 W 中的 T 列表中（即）`@Model.W.T.ElementAt(someindex).TId`。

如何利用 lambda 表达式来使用帮助程序在视图中生成这种关系，以便相关控制器可以在 httppost 操作中使用它？

这是我现在正在做的事情：

```
<input type="hidden" value="@(Model.W.T.ElementAt(i).TId)"
 name="TCs[@(i)].TId" 
 id="TCs_@(i)__TId" data-val="true"/> 
```

我想做的是使用`@Html.HiddenFor`帮助器，但似乎无法让它工作，所以我只是使用了上面稍微动态但仍然硬编码的方法。注意：这可行，但是，我希望它更清洁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T20:06:19.953

你现在正在做的是——据我所知——唯一的方法。我不知道更简单的 @Htm.HiddenFor(...) 版本的方法。我也一直在处理类似的问题。尽管如此，如果您认为可以重用上述模式，您仍然可以创建自己的显示/编辑器模板或其他更抽象的方式。当然，它们会比你的“丑陋”但直接的方法更冗长和复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T21:47:54.823

我把它做成了一个助手，并决定分享它以防其他人遇到这个问题。

帮手：

```
 public static MvcHtmlString CustomHiddenFor(
        this HtmlHelper html, object ListValue,
        string ListName, int ListIndex, string ListItem)
    {
        return MvcHtmlString.Create(
            string.Format("<input type=\"hidden\" value=\"{0}\" name=\"{1}[{2}].{3}\" id=\"{1}_{2}__{3}\" data-val=\"true\"/>", 
                ListValue.ToString(),
                ListName,
                ListIndex,
                ListItem
                ));
    } 
```

使用（请注意，这是从 i 是迭代器的循环中完成的，任何值都将在第一个位置到期）：

```
@Html.CustomHiddenFor(Model.W.T.ElementAt(i).TId, "TCs", i, "TId") 
```

# iphone - 在 setToolbarHidden:animated 中更改导航控制器的工具栏动画：

> ID：10574736
> 
> 赞同：0
> 
> 时间：2012-05-13T19:55:06.820
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uikit

我想更改在调用 setToolbarHidden 方法时出现在 navigationControllers 工具栏上的动画。默认情况下，当您将隐藏设置为 YES 并将动画设置为 YES 时，工具栏会从屏幕上消失。我希望它从左到右滑出屏幕（就像您点击导航栏上的后退按钮并且前一个视图控制器在屏幕上重新声明自身时一样）。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T21:33:36.697

这不会是完美的，但可能有这样的事情：

```
 self.navigationController.toolbarHidden = NO;    
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:1.0];
        [UIView setAnimationDelegate:self];
        [UIView setAnimationDidStopSelector:@selector(animationFinished:finished:context:)];

        CGRect frame = self.navigationController.toolbar.frame;
        frame.origin.x = -1*frame.size.width;
        self.navigationController.toolbar.frame = frame;

        [UIView commitAnimations];

- (void)animationFinished:(NSString *)animationID finished:(BOOL)finished context:(void *)context {
    self.navigationController.toolbarHidden = YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T09:53:20.377

我提交了一份错误报告，不幸的是，在苹果自己添加该功能之前，没有办法做到这一点。

# c# - 返回一个实例

> ID：10574737
> 
> 赞同：1
> 
> 时间：2012-05-13T19:55:22.727
> 
> 标签：c#, xna

可能看起来是一个愚蠢的问题，但我可以返回一个实例吗？例子：

```
public class EcranJeu : AffichageJeu
{

    public EcranJeu(string choixecran)
    {
        if (choixecran == "0")
        {
            KystExtract décor = new KystExtract();
        }
        if (choixecran == "1")
        {
            KystExtraction décor = new KystExtraction();
        }
    }

    public override void  LoadContent()
    {
        décor.LoadContent(content);
    }
} 
```

`décor`据说不存在。我怎样才能将它传递给`LoadContent`,`Update`和`Draw`所有班级？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T20:36:05.520

如果我理解正确，您只想在构造函数中创建一个实例成员并在 LoadContent、Update 和 Draw 中访问它？

```
public class EcranJeu : AffichageJeu
{
    private KystExtract décor;
    public EcranJeu(string choixecran)
    {
        if (choixecran == "0")
        {
            décor = new KystExtract();
        }
        if (choixecran == "1")
        {
            décor = new KystExtraction();
        }
    }

    public override void  LoadContent()
    {
        décor.LoadContent(content);
    }
} 
```

如果您想从其他实例访问属性，而不是创建 getter 和 setter 或将属性声明为 public。

```
private KystExtract _décor;
public public string décor
{
    //set the person name
    set { this._décor = value; }
    //get the person name 
    get { return this._décor; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T15:01:07.933

正如您发现的那样，另一个答案只是部分正确。

**问题：**您正在创建两个不同类之一的对象，然后想要在所选对象上调用`LoadContent()`、`Draw()`或方法。`Update()`

我必须假设这两个类`KystExtract`并`KystExtraction`有一个共同的基类或共享一个接口。如果没有，您将需要创建/添加一个（例如`KrystBase`或 IKryst）来定义该`LoadContent()`方法。

然后，您存储的属性属于基类类型/接口，因此它可以包含`KystExtract`对象或`KystExtraction`对象。

## 您的代码将如下所示（假设您没有公共基类并使用接口）：

```
public class EcranJeu : AffichageJeu
{
    private IKystObject décor;  // for example
    public EcranJeu(string choixecran)
    {
        if (choixecran == "0")
        {
            décor = new KystExtract();
        }
        if (choixecran == "1")
        {
            décor = new KystExtraction();
        }
    }

    public override void  LoadContent()
    {
        décor.LoadContent(content);
    }
}

// Common interface for classes requiring shared behavior
public interface IKystObject
{
    public override void LoadContent();
    public override void Update();
    public override void Draw();
}

// Both classes implement your common interface
public class KystExtract : IKrystObject
{
    ... Implementation of LoadContent, Update and Draw
}

// Both classes implement your common interface
public class KystExtraction : IKrystObject
{
    ... Implementation of LoadContent, Update and Draw
} 
```

# internationalization - 操作系统的语言？

> ID：10574739
> 
> 赞同：1
> 
> 时间：2012-05-13T19:55:44.013
> 
> 标签：internationalization, lua

有没有办法获得正在运行的操作系统的语言？我希望能够在程序启动时更改程序的语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:59:38.787

这是特定于平台的，超出了 Lua 标准库的处理范围。在*某些*情况下，您可能能够从中找出`getenv`答案，但您不能以跨平台的方式依赖它。

您可以编写一个小扩展模块，将其移植到您需要支持的各种平台，从而为您提供特定操作系统的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T20:01:34.863

也许

```
 print(os.setlocale(nil)); 
```

可以为您提供所需的信息，尽管您可能需要对其进行一些解析。或者您可以访问正确的环境变量，例如

```
 print(os.getenv("LANG")); 
```

在我的系统上给出 en_GB.utf8，所以你可以推断出我的系统“谈话”英语。

# ios - iOS 部署是否需要 Flash CS5.5

> ID：10574744
> 
> 赞同：0
> 
> 时间：2012-05-13T19:56:39.590
> 
> 标签：ios, deployment, app-store, flash-cs5

我正在研究一个 iOS 应用程序部署（需要帮助一位朋友使用他的 iOS 指定的 Flash 制作游戏），问题是，Flash Professional CS5 是否足以成功提交到 AppStore？与 Flash CS5.5 相比，是否缺少一些与 iOS 相关的功能？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:23:07.333

我认为您需要为此使用 Flash CS5.5。也许 FlashBuilder 4.5 也可以。但我现在没有你的项目设置。

如果游戏是用 Flash 开发和编译的，那就别无选择，只能使用 CS5.5 或 CS6。

如果您刚开始开发，您可以使用 Flash Builder 并创建一个 AS3 项目。我更喜欢最后一个选项，但我会使用 intelliJ IDEA 作为开发环境。

# grails - 使用 Grails 避免 HQL 中的子查询

> ID：10574749
> 
> 赞同：0
> 
> 时间：2012-05-13T19:57:30.813
> 
> 标签：grails, hql, grails-orm

我有两个对象，一个房间类型和一个预订。简化为：

```
class Room {
  String description
  int quantity
}

class Reservation {
  String who
  Room room
} 
```

我想查询所有房间以及每种类型的可用房间数量。在 SQL 中，这可以满足我的要求：

```
select id, quantity, occupied, quantity-coalesce(occupied, 0) as available
from room left join(select room_id, count(room_id) as occupied from reservation) 
on id = room_id; 
```

我没有任何地方试图弄清楚如何用 HQL 做到这一点。

我会很感激任何指针，因为我似乎在 HQL 或 GORM 中缺少一些相当基本的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:23:00.270

**这里的问题是您试图表示不是您的域类的字段，**例如`available`和`occupied`。试图让 HQL\GORM 做到这一点可能有点令人沮丧，但并非不可能。我想你在这里有几个选择......

1.）**构建您的域类，以便更易于使用。** 也许您的 Room 需要通过映射表了解它的 Reservations，或者，**也许编写您希望代码看起来的样子，然后调整设计。**

例如。也许你希望你的代码看起来像这样......

```
RoomReservation.queryAllByRoomAndDateBetween(room, arrivalDate, departureDate); 
```

然后你会像这样实现它......

```
 class RoomReservation{
        ...
        def queryAllByRoomAndDateBetween(def room, Date arrivalDate, Date departureDate){
           return RoomReservation.withCriteria {
             eq('room', room)
             and {
               between('departureDate', arrivalDate, departureDate)
             }
        }
    } 
```

2.）我的第二个想法是...... **可以将数据库用于它的好处**。有时在你的代码中使用 sql 只是做某事的最有效方式。 **只需适度进行，并保持集中化和单元测试。** 我不建议您使用这种方法，因为您的查询并不复杂，但它是一种选择。我将存储过程用于查询数百万个对象以获取摘要数据的“仪表板视图”之类的东西。

```
class Room{
    ...
  def queryReservations(){
      def sql = new Sql(dataSoruce);
      return sql.call("{call GetReservations(?)}", [this.id]) //<-- stored procedure.
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:13:31.613

我不确定如何用 HQL 中的子查询来描述左连接。在任何情况下，如果 HQL 不够表达，您也可以轻松地在 grails 中执行原始 SQL：

在您的服务中，注入 dataSource 并创建一个 groovy.sql.Sql 实例

```
def dataSource

[...]    

def sql= new Sql(dataSource)
sql.eachRow("...."){row->
    [...]
} 
```

我知道当人们在你提出问题时试图光顾你而不是回答你的问题或只是闭嘴时，这很烦人，但在我看来，这个问题非常复杂，我会为此创建一个概念我的数据结构中的数字，可能是与 Room 关联的可用性表，它不仅可以计算数量，还可以计算占用的值。

这不是每次需要时都计算它。

只是我的 .02 美元，如果它惹恼了你，请忽略它。

# jsf-2 - 在我到达页面之前执行的 preRenderView 方法

> ID：10574750
> 
> 赞同：0
> 
> 时间：2012-05-13T19:57:45.857
> 
> 标签：jsf-2

我在用来编辑“事件”的页面中有这个

```
<f:metadata>
    <f:viewParam id="event_id" name="eventId" value="#{eventController.eventId}"/>
    <f:event type="preRenderView" listener="#{eventController.loadEvent}" />
</f:metadata> 
```

...以及我的“ViewScoped”bean 中的相应 loadEvent 方法。

在用户可以选择要编辑的事件的“列表事件”页面中，我建立了这样的链接

```
<h:link value="Full details" outcome="/calendar/viewEvent" includeViewParams="true">
    <f:param name="eventId" value="#{calendarController.event.eventId}" />
</h:link> 
```

在单击链接之前，我不希望调用 loadEvent 方法，但是当我访问“列表事件”页面时，它会被调用一次，并且仅调用一次。

当然，这以某种方式归结为 JSF 生命周期……但是为什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T12:28:05.143

我也在 Mojarra 2.1.10 上遇到过这种情况（我假设你也在 Mojarra 上？）。该错误已作为[JAVASERVERFACES-2158](http://java.net/jira/browse/JAVASERVERFACES-2158)提交，在撰写本文时没有修复或解决方法。问题是这样的：在渲染`UIOutcomeTarget`组件（例如*包含视图参数*`h:link`）时完成抢先导航期间，目标视图被编译为从其元素中提取/组件。此编译的副作用是还基于*当前设置了事件订阅*`h:button` *`f:viewParam``UIViewParameter``h:metadata` *`UIViewRoot``f:event`元素。在正常情况下——即在响应中返回给用户的视图正在编译时——这一切都很好。但是，当编译另一个视图以获取其视图参数时，在*当前*视图根（如 中`FacesContext.getViewRoot()`）上注册事件订阅根本不合适。**

# sql-server - 图像表的数据库设计

> ID：10574752
> 
> 赞同：1
> 
> 时间：2012-05-13T19:57:52.107
> 
> 标签：sql-server, database, database-design

如果在数据库设计方面可以做得更好，我正在尝试锻炼。任何关于为什么它是错误/正确的建议将不胜感激。

我有 3 张桌子

```
Person
Car
Image 
```

Cars 和 Persons 都可以有图像，所有对图像的引用都存储在图像表中。

```
Person has > Images
Car has > Images 
```

图像表最终看起来像这样..

```
Image
ID   NAME    CAR_ID   PERSON_ ID
1    img1    10       NULL
2    img2    NUll     8 
```

现在看来我的表中有很多 NULL，但我需要知道图像是用于汽车还是人。

那么，如果有的话，如何才能做得更好呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T20:10:02.647

如果您将图像的引用存储在 Car 和 Person 表中（如果存在一对一关系），您最终会得到更少的空值。如果你有多个图像，你最好有一个只存储关系的表。

该表如下所示：

```
DATATYPE    DATAID    IMAGEID
 1           10         1
 2            8         2 
```

在第一列中，1 表示汽车，2 表示图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T20:09:16.497

您*不需要*图像表中的这两个字段。您可以查询 person 和 car 表以查看是否存在与图像 ID 匹配的条目。

但是，您可能会发现它们的存在既方便又高效。

# python - 如何为此函数编写生成器

> ID：10574760
> 
> 赞同：0
> 
> 时间：2012-05-13T19:58:57.467
> 
> 标签：python

出于某种奇怪的原因，我很难理解 Python 中使用的迭代器/生成器（我在 C++ 中编写/使用它们没有问题 - 但不知何故，我似乎无法理解如何使用 Python 编写一个）。

我有一个形式的数学函数：

`f(a,b) = ( v1(a) - v1(b) ) / ( v2(a) - v2(b) )`

其中 v1 和 v2 是等长的一维向量。

我想编写一个函数（实际上是一个生成器），它生成上面定义的 f() 的输出。

任何人都可以帮忙吗？

**[[编辑]]**

我的符号可能令人困惑。我希望澄清这一点。上述函数返回一**组**值。随着参数 b 取值，在区间`(a,b]`

因此，例如，如果我们调用`f(1,5)`，该函数将返回以下**值**（不是函数 - 以防我在下面的说明引起进一步的混乱）：

```
f(1,1)
f(1,2)
f(1,3)
f(1,4)
f(1,5) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:29:21.460

您可以使用生成器表达式：

```
def f(a, b):
  return ((v1[a] - v1[i]) / (v2[a] - v2[i]) for i in xrange(a, b+1)) 
```

或者生成器函数

```
def f(a, b):
  for i in xrange(a, b+1)
    yield (v1[a] - v1[i]) / (v2[a] - v2[i]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T20:05:14.410

生成器可能看起来像这样，因为没有迭代（如[正确指出](https://stackoverflow.com/questions/10574760/how-to-write-a-generator-for-this-function#comment13692021_10574760)的那样）。

```
def f(a, b):
    yield (v1[a] - v1[b]) / (v2[a] - v2[b])  # be careful about division! 
```

情侣笔记：

*   没有什么可以迭代的，生成器一般用在迭代中，
*   小心除法：在 Python 2.x 中，`a / b`如果`a`和`b`都是整数，则返回整数（所以）——你可以通过使用s 或 by`4 / 3 == 1`来避免这种情况，`float``from __future__ import division`

# php - PHPExcel PDF 布局

> ID：10574761
> 
> 赞同：4
> 
> 时间：2012-05-13T19:59:02.073
> 
> 标签：php, symfony, phpexcel

因此，我将使用 PHPExcel 创建的 Excel 文件导出为 PDF。我唯一的问题是当内容超出页面的宽度（而不是长度）时，内容就会消失。仅在该内容所在的位置创建一个空白页面。我已经尝试在文档中使用类似此示例的行插入分栏符，但似乎只有换行符适用于 PDF：

```
$objPHPExcel->getActiveSheet()->setBreak( 'D10' , \PHPExcel_Worksheet::BREAK_COLUMN ); 
```

值得一提的是，我在 Symfony2 控制器中工作，因此 PHPExcel 枚举前面的斜线。

我理想的解决方案是让任何额外的内容运行到第二页，该第二页可以放在第一页旁边，以显示整个表格，就像它出现在真实的 Excel 文档中一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:59:28.953

这是 PHPExcel 用于将 html 输出呈现为 PDF（即 tcPDF）的外部库的限制。

虽然我知道有许多其他库可以从 HTML 生成 PDF（例如 domPdf 和 mPdf），而 PHPExcel 的未来版本将允许您选择要使用的这些库中的哪一个，但它们似乎都不能生成多个页面以显示工作表全宽的数据。

除非有人能提出替代方案，否则恐怕在可预见的未来这仍将是一个限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-14T12:57:37.840

我在垂直方向遇到了类似的问题，我找到的解决方案是使用这个

```
$highestRow = $objPHPExcel->setActiveSheetIndex(0)
    ->getHighestRow();

$objPHPExcel->setActiveSheetIndex(0)
    ->getPageSetup()
    ->setPrintArea("A1:I" . $highestRow )
    ->setFitToHeight(255); 
```

我建议尝试与宽度类似的东西。例如 ：

```
 $highestColumn= $objPHPExcel->setActiveSheetIndex(0)
        ->getHighestColumn();

    $objPHPExcel->setActiveSheetIndex(0)
        ->getPageSetup()
        ->setPrintArea("A1:" . $highestColumn . "10" )
        ->setFitToWidth(255); 
```

# iphone - UIImageView _isResizable：无法识别的选择器

> ID：10574762
> 
> 赞同：0
> 
> 时间：2012-05-13T19:59:03.237
> 
> 标签：iphone, objective-c, ios, uiimageview, compiler-errors

我有以下代码在品牌上显示图像，但出现 UIImageView 错误。我调整了大小为 800x600 的图像以适合 iPhone 屏幕的大小。

```
NSURL * url = [NSURL URLWithString:@"http://www.portallzc.com/galerias/galeria_Portal%20de%20Lazaro%20Cardenas/Club%2033/800/p16jklq9uj1f7a1c6tckkjrg1i8015.JPG"];
NSData * urlData = [NSData dataWithContentsOfURL: url];
UIImage * image = [UIImage imageWithData: urlData];
CGRect rect = CGRectMake (0.0f, 40.0f, image.size.width, image.size.height);

image = [[UIImageView alloc] initWithFrame: rect];
[setImage image: image]; 
```

> 错误：由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“- [UIImageView _isResizable]：无法识别的选择器实例 stmt 为 0x6b8bb70”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-02T09:51:23.347

发生错误是因为您尝试将 UIImageView 视为 UIImage。

```
myImageView = [[UIImageView alloc] initWithFrame: rect];
[myImageView setImage: image]; 
```

如果错误消失，请尝试检查

```
[self.view addsubview:myImageView]; 
```

使您的 imageview 链接到显示屏幕。

如果它仍然没有出现，请尝试检查图像视图的图层。

```
[self.view bringSubviewToFront:myImageView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T20:23:26.010

您的变量命名有误。你要做的是：

```
 [imagen setImage: imagen] 
```

你想要做的是：

```
 [imagen setImage: image]; 
```

我在您问题的评论中从我们的对话中提取了这一点。这没有反映在您的问题中。也许您的问题代码与您在程序中编写的内容不同步。看看你自己的评论来理解我的意思。

# iphone - UIView 出现黑屏，修复？

> ID：10574764
> 
> 赞同：1
> 
> 时间：2012-05-13T19:59:32.347
> 
> 标签：iphone, ios, xcode, cocoa-touch, cocoa

我调用一个视图来显示以下代码：

```
#import "infoView.h"
...
infoView *viewInfo = [[infoView alloc] initWithNibName:nil bundle:nil];
viewInfo.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:viewInfo animated:YES]; 
```

但是当它在运行时呈现时，加载的视图变成黑色。目前我正在使用情节提要，但我需要使用这段代码，因为它在我的情况下效率更高，因为我正在处理多个视图！

如果我通过 StoryBoard 连接它，它工作正常。

我应该看到 2 个标签、1 个 UITextView 和 2 个 UIButton。

该视图是使用 StoryBoard 创建的，当创建视图的 .m 和 .h 文件时，我没有为其添加 .xib。它还通过 StoryBoard 中的“自定义类”部分链接。

谢谢，希望有人可以帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T23:51:26.750

嘲笑那些花时间和精力帮助你的人通常是一种非常糟糕的形式。

命名很重要，它使您的代码更易于使用并允许其他人使用它。不遵循您正在使用的语言的约定是危险的，并且意味着您的代码与其他开发人员不兼容，因为事情的解释不同。

如果您查看[UIViewController](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html)的文档，您将在`initWithNibName:bundle:`方法描述中看到此注释

> 如果您的应用程序使用情节提要来定义视图控制器及其关联视图，则您的应用程序永远不会直接初始化该类的对象。相反，视图控制器要么由故事板实例化——要么在触发 segue 时由 iOS 自动实例化，要么在您的应用程序调用故事板对象的 instantiateViewControllerWithIdentifier: 方法时以编程方式实例化。当从故事板实例化视图控制器时，iOS 通过调用它的 initWithCoder: 方法来初始化新的视图控制器。iOS 自动将 nibName 属性设置为存储在故事板中的 nib 文件。

因此，您错误地实例化了控制器，故事板应该实例化它。像这样完成的（命名更正）

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle bundleForClass:[self class]]];
InfoViewController *infoViewController = [storyboard instantiateViewControllerWithIdentifier:@"InfoViewController"];
infoViewController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self infoViewController animated:YES]; 
```

## 边注

`infoView`对班级来说是一个坏名字，不仅因为你没有以大写开头，而且因为它完全是骗人的。任何阅读本文的人都会认为它`InfoView`是`UIView`not的子类`UIViewController`。

# c++ - 错误 C2228：“.values”左侧必须有类/结构/联合

> ID：10574766
> 
> 赞同：1
> 
> 时间：2012-05-13T19:59:44.017
> 
> 标签：c++, sum, overloading, operator-keyword

我试图在 C++ 上学习一些运算符重载方法，然后我遇到了这个错误：

错误 7 错误 C2228: '.values' 的左侧必须有类/结构/联合

还有另一个错误说：

错误 4 错误 C2065：“总和”：未声明的标识符

```
Matrix<type> Matrix<type>::operator+(const Matrix& m){

    if(num_of_rows != m.num_of_rows || num_of_cols != m.num_of_cols) // Checking if they don't have the same size.

    Matrix<type> *sum;
    sum = new Matrix<type>(num_of_rows, num_of_cols);

    for(int i = 0; i < num_of_rows; i++)
        for(int j = 0; j < num_of_cols; j++)
            sum.values[i][j] =  values[i][j] + m.values[i][j];

    return *sum;
} 
```

有人能告诉我哪里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T20:01:22.620

在您发布的代码中，`sum`是一个指针。因此，要访问对象的成员，您需要使用`->`：

```
sum->values[i][j] = ... 
```

您似乎在声明后还缺少分号`Matrix<type> *sum;`，但尚不清楚这是否是转录错误，或者您的代码是否真的看起来像那样。

最后，您的内存管理泄漏了一个对象。您使用 分配一个对象`new`，但返回该对象的*副本*，并且从不释放它。也许你想要类似的东西：

```
Matrix<type> sum(num_of_rows, num_of_cols);

for ( ... )
    sum.values[i][j] = ..

return sum; 
```

# c# - 从 File.ReadAllBytes 拆分结果

> ID：10574769
> 
> 赞同：1
> 
> 时间：2012-05-13T20:00:46.553
> 
> 标签：c#, arrays

我的代码在这里读取图像的所有字节并将其存储在字节数组中。有没有办法将这些字节转换为 ascii，然后将它们拆分为 512-char(ascii char) 长片段？就像您尝试根据长度拆分字符串一样，您可以这样做。你能做一些类似于把它分成512个长度的事情吗？这是发送到服务器。

```
byte[] imagesize; 
imagesize = File.ReadAllBytes(@"C:\image.jpeg");
Console.Write(imagesize[1].ToString()); 
```

我*真正*想要的是将这些字节转换为纯 ASCII 格式（在 C# 中将是 Encoding.ASCII），然后将长 ASCII 行从将所有字节转换为 512-char(?) 长块拆分为字节数组（字节[] 块）。所以当我发送数据包时，我可以做

```
 for(i=0; i<AmountOfChunks; i++)
 {
      Packet.payload = chunks[i];
      //The "chunks" is the ASCII formated array.
 } 
```

如果有人知道如何做到这一点，那将有很大帮助。谢谢，如果还有什么，如果可以的话，我会尝试更详细地解释它。如果这是错误的，因为我知道每个字节是 8 位。然后以某种方式能够做到这一点，也许将字节放入列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T20:09:11.833

不清楚你*为什么*需要这个，但你可能正在寻找[`Convert.ToBase64String()`](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)一个字符串表示。对于分块，您可以遍历结果字符串并在适当的索引处拆分：

```
byte[] imagesize = File.ReadAllBytes(@"C:\image.jpeg");
string base64String = Convert.ToBase64String(imagesize);

List<string> chunks = new List<string>();
for (int i = 0; i < base64String.Length; i+=512)
{
    chunks.Add(base64String.Substring(i, Math.Min(512, base64String.Length - i)));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T20:51:52.083

试着做这个

```
int i=0;  
do
{
     sendBytes = imagesize.Skip(512*i).Take(512).ToArray();
     //Your function of send
     i++;
}
while(imagesize.Count()-512*i>0) 
```

# android - Andengine 的退出按钮

> ID：10574777
> 
> 赞同：3
> 
> 时间：2012-05-13T20:01:50.583
> 
> 标签：android, andengine

我的游戏从 SplashActivity 开始。3 秒后 MenuActivity 会自动启动。MenuActivity 中有一个用于退出的按钮。当我按下它时，finish() 正在运行，并且游戏正在返回 SplashActivity 而不是从完整游戏中退出。我想：当我按下按钮时，游戏完全退出。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T22:17:15.837

当您通过调用 MenuActivity 离开 SplashActivity 时，请确保在调用 MenuActivity 后调用 finish()

# domain-driven-design - 用 DDD 连接点

> ID：10574779
> 
> 赞同：5
> 
> 时间：2012-05-13T20:02:38.770
> 
> 标签：domain-driven-design, ddd-repositories, ddd-service

我读过 Evans、Nilsson 和 McCarthy 等书，了解领域驱动设计背后的概念和推理；但是，我发现很难将所有这些放在一个真实世界的应用程序中。缺乏完整的例子让我摸不着头脑。我找到了很多框架和简单的示例，但到目前为止还没有真正展示如何在 DDD 之后构建真正的业务应用程序。

以典型的订单管理系统为例，以订单取消为例。在我的设计中，我可以看到一个带有 CancelOrder 方法的 OrderCancellationService，它接受订单 # 和一个原因作为参数。然后它必须执行以下“步骤”：

1.  验证当前用户是否具有取消订单的必要权限
2.  从 OrderRepository 中检索具有指定订单 # 的订单实体
3.  验证订单是否可能被取消（服务是否应该询问订单的状态以评估规则，或者订单是否应该具有封装规则的 CanCancel 属性？）
4.  通过调用 Order.Cancel(reason) 更新 Order 实体的状态
5.  将更新的订单保存到数据存储中
6.  联系 CreditCardService 以恢复已处理的任何信用卡费用
7.  为操作添加审核条目

当然，所有这些都应该发生在一个事务中，并且不应该允许任何操作独立发生。我的意思是，如果我取消订单，我必须恢复信用卡交易，我无法取消并且不执行此步骤。这，imo，建议更好的封装，但我不想在我的域对象（订单）中依赖 CreditCardService，所以这似乎是域服务的责任。

我正在寻找有人向我展示如何/应该如何“组装”的代码示例。代码背后的思考过程将有助于让我为自己连接所有的点。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T15:41:56.437

您的域服务可能如下所示。请注意，我们希望在实体中保留尽可能多的逻辑，从而使域服务保持精简。另请注意，没有直接依赖于信用卡或审计员实施 ( [DIP](http://en.wikipedia.org/wiki/Dependency_inversion_principle) )。我们只依赖于在我们的域代码中定义的接口。稍后可以将实现注入应用程序层。应用层还将负责按数字查找订单，更重要的是，负责将“取消”调用包装在事务中（回滚异常）。

```
 class OrderCancellationService {

    private readonly ICreditCardGateway _creditCardGateway;
    private readonly IAuditor _auditor;

    public OrderCancellationService(
        ICreditCardGateway creditCardGateway, 
        IAuditor auditor) {
        if (creditCardGateway == null) {
            throw new ArgumentNullException("creditCardGateway");
        }
        if (auditor == null) {
            throw new ArgumentNullException("auditor");
        }
        _creditCardGateway = creditCardGateway;
        _auditor = auditor;
    }

    public void Cancel(Order order) {
        if (order == null) {
            throw new ArgumentNullException("order");
        }
        // get current user through Ambient Context:
        // http://blogs.msdn.com/b/ploeh/archive/2007/07/23/ambientcontext.aspx
        if (!CurrentUser.CanCancelOrders()) {
            throw new InvalidOperationException(
              "Not enough permissions to cancel order. Use 'CanCancelOrders' to check.");
        }
        // try to keep as much domain logic in entities as possible
        if(!order.CanBeCancelled()) {
            throw new ArgumentException(
              "Order can not be cancelled. Use 'CanBeCancelled' to check.");
        }
        order.Cancel();

        // this can throw GatewayException that would be caught by the 
        // 'Cancel' caller and rollback the transaction
        _creditCardGateway.RevertChargesFor(order);

        _auditor.AuditCancellationFor(order);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T09:34:29.970

对此略有不同的看法：

```
//UI
public class OrderController
{
    private readonly IApplicationService _applicationService;

    [HttpPost]
    public ActionResult CancelOrder(CancelOrderViewModel viewModel)
    {
        _applicationService.CancelOrder(new CancelOrderCommand
        {
            OrderId = viewModel.OrderId,
            UserChangedTheirMind = viewModel.UserChangedTheirMind,
            UserFoundItemCheaperElsewhere = viewModel.UserFoundItemCheaperElsewhere
        });

        return RedirectToAction("CancelledSucessfully");
    }
}

//App Service
public class ApplicationService : IApplicationService
{
    private readonly IOrderRepository _orderRepository;
    private readonly IPaymentGateway _paymentGateway;

    //provided by DI
    public ApplicationService(IOrderRepository orderRepository, IPaymentGateway paymentGateway)
    {
        _orderRepository = orderRepository;
        _paymentGateway = paymentGateway;
    }

    [RequiredPermission(PermissionNames.CancelOrder)]
    public void CancelOrder(CancelOrderCommand command)
    {
        using (IUnitOfWork unitOfWork = UnitOfWorkFactory.Create())
        {
            Order order = _orderRepository.GetById(command.OrderId);

            if (!order.CanBeCancelled())
                throw new InvalidOperationException("The order cannot be cancelled");

            if (command.UserChangedTheirMind)
                order.Cancel(CancellationReason.UserChangeTheirMind);
            if (command.UserFoundItemCheaperElsewhere)
                order.Cancel(CancellationReason.UserFoundItemCheaperElsewhere);

            _orderRepository.Save(order);

            _paymentGateway.RevertCharges(order.PaymentAuthorisationCode, order.Amount);
        }
    }
} 
```

笔记：

*   一般来说，当命令/用例涉及多个聚合的状态更改时，我只看到对**域服务的需求。**例如，如果我需要调用 Customer 聚合和 Order 上的方法，那么我将创建域服务 OrderCancellationService 来调用这两个聚合上的方法。
*   应用层在基础设施（支付网关）和域之间进行协调。与领域对象一样，领域服务应该只关心领域逻辑，而忽略支付网关等基础设施；即使您已经使用自己的适配器对其进行了抽象。
*   关于权限，我会使用[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)将其从逻辑本身中提取出来。正如您在我的示例中看到的，我已向 CancelOrder 方法添加了一个属性。您可以在该方法上使用拦截器来查看当前用户（我将在**Thread.CurrentPrincipal**上设置）是否具有该权限。
*   关于审计，您只是说“审计操作”。如果您只是指一般的审计（即所有应用程序服务调用），我将再次在方法上使用拦截器，记录用户、调用了哪个方法以及使用什么参数。但是，如果您的意思是专门针对取消订单/付款进行审核，那么请执行类似于 Dmitry 示例的操作。

# html - 垂直对齐文本和图像在浏览器中不一致

> ID：10574780
> 
> 赞同：0
> 
> 时间：2012-05-13T20:02:46.697
> 
> 标签：html, google-chrome, alignment

我正在尝试垂直对齐表格单元格内的文本和图像元素。我正在使用`align="absmiddle"`它，它在 IE 中有效，但在 Chrome 中无效。

如何在 Chrome 和 IE 上垂直对齐中间的文本和图像？

这是代码：

```
<tr>
    <td height="17" bgcolor="#550000">
        <div align="center">
            <strong><font color="#000000" size="3">Text</font></strong>
            <img src="Image.jpg" alt="US Image" width="30" height="15" border="0" align="absmiddle">
        </div>
    </td>
</tr>​ 
```

演示：http: [//jsfiddle.net/8xTta/](http://jsfiddle.net/8xTta/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:25:12.670

using`absmiddle`不仅是一个[常见的 HTML 错误](http://www.csulb.edu/divisions/students/dss/accessibility/web/webaim-12comm.html)，而且在以这种方式使用时也被认为是不好的做法，即您应该始终将样式与内容分开，并使用外部样式表而不是嵌入在标记中的内联样式。

为了解决这个问题并实现跨浏览器兼容性，请替换`align:absmiddle;`规则并`vertical-align: middle;`改为使用。

这是您可能感兴趣的[垂直对齐](http://phrogz.net/css/vertical-align/index.html)的不错参考。

# matlab - 在 Octave/Matlab 中将 Hann 窗口函数应用于图像

> ID：10574782
> 
> 赞同：0
> 
> 时间：2012-05-13T20:02:56.583
> 
> 标签：matlab, image-processing, signal-processing, octave, windowing

如果我正确理解了这个概念，我们将窗口函数应用于信号的 FFT 以消除不需要的频率/噪声。

由于它们是二维矩阵，如何将其应用于图像？

```
img = imread('file.png');
w = hann(512);
y = fft2(img); 
```

一个人从这里去哪里？例如，我如何使用 hann 函数对图像进行 FFT？

我在想也许是 pwelch 方法，但它不起作用，因为 y 不是向量

```
[spectra, freq] = pwelch(y, w, 0.5, 512, 512); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:00:04.320

通常汉宁窗不应用于 FFT 的结果，而是应用于 FFT*之前*的数据。对于二维情况，您需要先创建一个二维汉宁窗。有关更多详细信息，请参阅[matlab 中心](http://www.mathworks.com/matlabcentral/newsreader/view_thread/35512)的此线程。

# wordpress - 由于 .htaccess 文件，wordpress 安装不起作用

> ID：10574783
> 
> 赞同：-1
> 
> 时间：2012-05-13T20:03:04.583
> 
> 标签：wordpress, .htaccess

我的服务器上运行了一个站点，这是 .htaccees 文件的内容

```
RewriteEngine on
RewriteCond $1 !^(index\.php|img|public|robots\.txt) [NC]
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

几天前，我将 Wordpress 安装在一个文件夹中：example.com/my-blog/ 作为独立应用程序，但我无法访问它。如果我删除 .htaccess 文件，它确实可以正常工作，但这会使网站崩溃，无论如何我都买不起。请帮忙。

请帮忙，我是这方面的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T22:21:32.797

您可以通过将这两行添加到您的 htaccesfile 中，在您的重写之前排除您的子文件夹：

```
RewriteCond %{REQUEST_URI} !^/my-blog/ [NC]
RewriteCond %{REQUEST_URI}!=/my-blog [NC] 
```

顺便说一句，Ansari 没有设置 $1 是正确的，因此从不重写任何东西。

# jquery - 如何对齐 div 底部的按钮？

> ID：10574786
> 
> 赞同：2
> 
> 时间：2012-05-13T20:03:13.333
> 
> 标签：jquery, html, css

我有一个名为 block_inside 的 div。其中，有两个 div，text_block 和 text_block_button.Button 类在 text_block_button 显示和隐藏类（段落）使用 jquery.text_block 和 text_block_button div 是内联的。当我单击按钮时，div 展开并显示“关于”类。在显示和隐藏关于类时，如何将按钮类对齐到 block_inside div 的底部。这是html代码：

```
<div class="block_inside">
  <div class="text_block">                   
    <p>Here is paragraph.  </p>
    <p class="about">Here is hidden paragraph.(more than 500 words.) </p>
  </div>
  <div class="text_block_button">
     <a class="button">About</a>
  </div>
</div> 
```

这是CSS代码：

```
.block_inside {
   display:block;
   border:1px solid #FFFFFF;
   overflow:auto;
   padding-left: 10px;
}
.text_block {
   float:left;
   width:600px;
   margin-left:30px;
   padding: 0px;
}
.text_block_button {
   float: right;
   padding-right: 15px;
   padding-bottom: 5px;
   padding-left: 5px;
}
a.button {
   padding:5px 10px 5px 10px;
   color: #ffffff;
   text-decoration: none;
   border:1px solid #32312f;
   text-transform:uppercase;
   font-size:9px;
   line-height:25px;    
} 
```

这是jQuery代码：

```
<script>
$(document).ready(function() {
$('p.about').hide();    
$('a.button').click(function() {
    $('p.about').toggle();
});

});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T20:09:46.390

### *[演示 jsBin](http://jsbin.com/odotig/2/edit)*

```
.block_inside {
    position:relative; /*added*/
    /* ... */
}

.text_block_button {
    position:absolute;    /*added*/
    bottom:10px;          /*added*/
    right:10px;           /*added*/
    /* ... */
} 
```

# javascript - 如何使用 JQuery UI 在模态对话框中显示 javascript 图？

> ID：10574787
> 
> 赞同：2
> 
> 时间：2012-05-13T20:03:17.903
> 
> 标签：javascript, jquery-ui, graph, modal-dialog

我有一个 javascript 函数 graph() ，它绘制了一个动态图，我想把它放在一个模态对话框中。我写了这个：

```
function drawGraphinDialog(){
    $("body").append('<div id="graphdialog"></div>');
    $(document).ready(function(){
         $("#graphdialog").dialog({
                    modal: true,
                    open: function{
                                      graph();
                                 },        
                    height: 600,
                    width: 400,
                    title: 'This is your graph'
                    });
        return false;
    });
} 
```

但模态对话框是空的。我应该把函数 graph() 放在哪里才能正确地在图中绘制它？谢谢您的帮助！

编辑：该图是用这个库制作的[http://www.graphdracula.net/](http://www.graphdracula.net/) ...所以如果我在 html 正文页面中调用这个函数 graph() 它会绘制这个图，我实际上可以看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:35:41.000

```
function drawGraphinDialog(){
    $("body").append('<div id="graphdialog"></div>');
    call graph() function and set its content to graphdialog div
    $("#graphdialog").html(graph_content)

$('#graphdialog').dialog({
        modal: true,
        height: 600,
                    width: 400,
                    title: 'This is your graph'
    });
} 
```

# matlab - Matlab - 关系矩阵？

> ID：10574789
> 
> 赞同：0
> 
> 时间：2012-05-13T20:03:24.207
> 
> 标签：matlab, octave

我有一个名为 x 的坐标向量。我想获取具有最小 y 坐标的元素：

```
a = find(x(:,2)==min(x(:,2))); % Contains indices 
```

这将返回 y 坐标最小的元素的索引。我说 element* *s* * 因为有时这会返回超过 1 个值（例如 (10,2) 和 (24,2) 都有 2 作为 y 坐标，如果 2 是最小 y 坐标...）。

无论如何，我的下一步是根据 x 坐标对具有最小 y 坐标的元素进行排序（升序）。首先我这样做：

```
b = sort(x(a,1)); 
```

上述操作可能会重新排列具有最小 y 坐标的元素，因此我也想将此重新排列应用于 a 。所以我这样做：

```
[v i] = ismember(b, x(:, 1)); 
```

不幸的是，如果存在具有相同 x 值但不同 y 值的元素，并且其中一个元素结果是 a（即 b）的成员，则上述矩阵选择它。例如，如果 (10,2) 和 (24,2) 是 y 坐标最小的元素，并且有第三个元素 (24, 13)，那么它将搞砸上述操作。有没有更好的办法？我使用循环编写了我的脚本，一切都很好，但根据 Matlab 的方法我重写了它，我担心我对 matlab 的不熟悉会导致这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:19:56.730

抱歉，我可能误解了您的问题，但请重新表述一下我认为您想要的内容：您有一组 2D 坐标：

```
x = [24,2; 10,2; 24,13]; 
```

您希望坐标对保持在一起 (24,2) (10,2) 和 (24,13)。并且您想找到具有最小 y 坐标的坐标对，如果有多个，那么您想按 x 坐标对它们进行排序。并且您想要这些坐标对在原始矩阵中的行索引`x`。所以换句话说，你想要一个最终的答案：

```
v = [10,2; 24,2];
i = [2,1]; 
```

如果我理解正确，那么您可以这样做：

（注：我把 x 改成多了一对 (40,13) 来说明 idx(i) 和 i 的区别）

```
>> x = [40,13; 24,2; 10,2; 24,13];
>> idx = find(x(:,2)==min(x(:,2))) %Same as what you've done before.

idx =

     2
     3

>> [v,i] = sortrows(x(idx,:)) %Use sortrows to sort by x-coord while preserving pairings

v =

    10     2
    24     2

i = % The indices in x(idx,:)

     2
     1

>> idx(i) %The row indices in the original matrix x

ans =

     3
     2 
```

最后，如果这不是您想要的，您能否在您给出的示例中指出您认为您的答案 [v,i] 应该是什么？

# android - 使用 Fragments 切换活动

> ID：10574790
> 
> 赞同：0
> 
> 时间：2012-05-13T20:03:26.877
> 
> 标签：android, android-fragments, footer

我正在尝试创建一个具有固定页脚的布局，其中包含在其后面滑动的活动。我被告知要使用片段，但这意味着我必须将我已经存在的活动转换为片段 - 对吗？这是我想要实现的图表：http: [//i.imgur.com/K8Iao.jpg](http://i.imgur.com/K8Iao.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T00:16:06.423

我认为@TarunMaheshwari 想说的是，与其拥有 3 个活动（例如，带有 的类`extends activity`），不如将其替换为`extends fragment`（显然您可能需要对代码进行其他小的更改才能使代码正常工作），然后创建一个主要活动(with `extends FragmentActivity`) 具有您想要的静态页脚，可以调用 3 个不同的片段。

推荐读物：

[http://developer.android.com/guide/topics/fundamentals/fragments.html](http://developer.android.com/guide/topics/fundamentals/fragments.html)

[http://android-developers.blogspot.ca/2011/02/android-30-fragments-api.html](http://android-developers.blogspot.ca/2011/02/android-30-fragments-api.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T00:51:26.850

我相信使用 Fragments 是您的应用程序的正确解决方案。但是，根据我从您的问题和评论中了解到的情况，您确实希望避免使用它们。[要使用活动而不是片段，请按照本教程](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html)中的说明实现具有选项卡主机和选项卡小部件的选项卡布局。此解决方案允许您使用选项卡在活动之间切换。

要将 Tab Host 与屏幕底部对齐，请查看本[教程](http://envyandroid.com/archives/326/align-tabhost-at-bottom)。

# bash - 如何仅列出文件而不是目录 Bash 的目录？

> ID：10574794
> 
> 赞同：117
> 
> 时间：2012-05-13T20:04:37.250
> 
> 标签：bash, file-listing

如何列出一个文件夹的所有文件，但不列出其文件夹或子文件。换句话说：我怎样才能只列出文件？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-05-13T20:06:35.503

使用`find`：

```
find . -maxdepth 1 -type f 
```

使用该`-maxdepth 1`选项可确保您仅查看当前目录（或者，如果您将 替换为`.`某个路径，则该目录）。如果您想要该目录和子目录中所有文件的完整递归列表，只需删除该选项即可。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2017-09-09T22:03:13.280

```
ls -p | grep -v / 
```

ls -p 让您在文件夹名称之后显示 /，它充当您删除的标签。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-03T11:35:56.197

*   [carlpett 的`find`基于答案](https://stackoverflow.com/a/10574806/45375)( `find . -maxdepth 1 -type f`) 原则上有效，但**与使用不完全相同`ls`：您会得到一个可能*未排序*的文件名列表，所有*前缀都是`./`*，并且您失去了应用`ls`许多*选项***的能力；
    也`find` ***总是会*找到*隐藏*的项目**，而`ls`' 的行为取决于`-a`or`-A`选项的存在与否。

    *   [Alex Hall](https://stackoverflow.com/users/1397555/alex-hall)在对该问题的评论中建议的一项**改进是****将*****shell globbing*****与**：***`find`***

         *```
         find * -maxdepth 0 -type f  # find -L * ... includes symlinks to files 
        ```

        *   然而，虽然这**解决了前缀问题并为您提供按字母顺序排序的输出**，但您仍然无法（内联）控制隐藏项的包含，也无法访问`ls`的许多其他排序/输出格式选项。* 

**   [Hans Roggeman 的**`ls`+`grep`答案**](https://stackoverflow.com/a/21259116/45375)是务实的，但**会锁定您使用 long ( `-l`) 输出格式**。* 

 ** * *

为了解决这些限制，我编写了[**`fls`**( **filtering** ls ) 实用**程序**](https://github.com/mklement0/fls)，

*   **提供*输出灵活性`ls`*同时还提供*类型过滤功能***的实用程序，
*   只需在参数列表之前放置**类型过滤字符**，例如**`f`文件、`d`目录和`l`符号链接**`ls`（运行`fls --help`或`fls --man`了解更多信息）。

**例子：**

```
fls f        # list all files in current dir.
fls d -tA ~  #  list dirs. in home dir., including hidden ones, most recent first
fls f^l /usr/local/bin/c* # List matches that are files, but not (^) symlinks (l) 
```

* * *

## 安装

**支持的平台**

*   从**npm 注册表**安装时：**Linux**和**macOS**
*   **手动**安装时：任何带有**Bash****的类 Unix**平台

 **### 从[npm 注册表](https://www.npmjs.com/package/fls)

^(注意：即使你不使用 Node.js，它的包管理器`npm`也可以跨平台工作并且易于安装；尝试
[`curl -L https://git.io/n-install | bash`](https://github.com/mklement0/n-install))

[安装Node.js](http://nodejs.org/)后，按如下方式安装：

```
[sudo] npm install fls -g 
```

**注意**：

*   是否需要`sudo`取决于你如何安装 Node.js/io.js 以及你[后来是否更改了权限](https://docs.npmjs.com/getting-started/fixing-npm-permissions)；如果出现`EACCES`错误，请使用 重试`sudo`。

*   `-g`确保[*全局*安装](https://docs.npmjs.com/getting-started/installing-npm-packages-globally)，并且需要放入`fls`系统的`$PATH`.

### 手动安装

*   [将此`bash`脚本](https://raw.githubusercontent.com/mklement0/fls/stable/bin/fls)下载为`fls`.
*   使其可执行`chmod +x fls`。
*   将其移动或符号链接到您的文件夹中`$PATH`，例如`/usr/local/bin`(macOS) 或`/usr/bin`(Linux)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-04-22T06:21:12.117

## 列出某个目录的内容，不包括子目录

我喜欢使用`ls`选项，例如：

> *   `-l` 使用长列表格式
> *   `-t` 按修改时间排序，最新的在前
> *   `-r` 排序时倒序
> *   `-F`,`--classify` 将指示符（*/=>@| 之一）附加到条目
> *   `-h`，`--human-readable` 使用 -l 和 -s，打印尺寸，如 1K 234M 2G 等...

有时`--color`和所有其他人。（见`ls --help`）

### 列出除文件夹以外的所有内容

这将显示文件、符号链接、设备、管道、套接字等。

所以

```
find /some/path -maxdepth 1 ! -type d 
```

可以很容易地按日期排序：

```
find /some/path -maxdepth 1 ! -type d -exec ls -hltrF {} + 
```

### 仅列出*文件*：

或者

```
find /some/path -maxdepth 1 -type f 
```

按大小排序：

```
find /some/path -maxdepth 1 -type f -exec ls -lSF --color {} + 
```

### 防止列出*隐藏条目*：

要不显示名称以点开头的隐藏条目，您可以添加`! -name '.*'`：

```
find /some/path -maxdepth 1 ! -type d ! -name '.*' -exec ls -hltrF {} + 
```

然后

您可以替换`/some/path`为`.`列出*当前目录*或*父*目录`..`。

 ** * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-27T22:49:41.290

查找文件：ls -l /home | grep "^-" | tr -s ' ' | 剪切-d''-f 9

查找目录： ls -l /home | grep "^d" | tr -s ' ' | 剪切-d''-f 9

查找链接： ls -l /home | grep "^l" | tr -s ' ' | 剪切-d''-f 9

tr -s ' ' 将输出转换为以空格分隔的文件 cut 命令表示分隔符是空格，并返回第 9 个字段（始终是文件名/目录名/链接名）。

我经常用这个！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-21T13:10:46.163

您还可以使用`ls`with `grep`or`egrep`并将其作为别名放入您的个人资料中：

```
ls -l | egrep -v '^d'
ls -l | grep -v '^d' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-19T10:52:19.640

```
{ find . -maxdepth 1 -type f | xargs ls -1t | less; } 
```

添加`xargs`以使其正常工作，并用于`-1`代替`-l`仅显示文件名而没有其他`ls`信息

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-10T12:38:10.867

## 不客气！

```
ls -l | grep '^-' 
```

## 只是寻找名称，管道到`cut`or `awk`。

```
ls -l | grep '^-' | awk '{print $9}'

ls -l | grep '^-' | cut -d " " -f 13 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-13T15:02:39.850

您可以选择以下之一：

```
echo *.* | cut -d ' ' -f 1- --output-delimiter=$'\n'
echo *.* | tr ' ' '\n'
echo *.* | sed 's/\s\+/\n/g'
ls -Ap | sort | grep -v / 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2015-03-04T03:58:49.080

只是添加到carlpett的答案。要获得非常有用的文件视图，您可以将输出通过管道传输到 ls。

```
find . -maxdepth 1 -type f|ls -lt|less 
```

以列表格式显示最近修改的文件，当您下载了大量文件并希望查看最近文件的整洁版本时非常有用。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2016-10-12T13:40:47.080

“find '-maxdepth'” 不适用于我的旧版本 bash，因此我使用：

对于 $(ls) 中的 f ；如果 [ -f $f ] ; 然后回显 $f ; 菲; 完毕****

# wpf - 每个 ListView 行的多绑定工具提示

> ID：10574795
> 
> 赞同：0
> 
> 时间：2012-05-13T20:04:47.357
> 
> 标签：wpf, listview, data-binding, tooltip, multibinding

我希望在工具提示中显示来自多列单元格的信息（还需要一些计算）。

此代码仅显示如何为列表框的每一行制作工具提示，我需要更改什么？

```
<ListView>
<ListView.ItemContainerStyle>
    <Style TargetType="{x:Type ListViewItem}">
        <Setter Property="ToolTip" Value="{Binding Path=Name}" />
    </Style>
</ListView.ItemContainerStyle>
<!--alle the columns and stuff-->
</ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:12:32.507

您可以使用[MultiValueConverter](http://www.codeproject.com/Articles/298950/Using-ValueConverter-and-MultiValueConverter-in-WP)进行绑定并传递所需的列。

或者，您可以向提供计算值的每一行添加一个额外的属性并绑定到该属性。

**编辑**

```
<Setter Property="ToolTip">
    <Setter.Value>
        <MultiBinding Converter="{local:ThingsToTooltipConverter}" Mode="OneWay">
            <Binding Path="Column1"/>
            <Binding Path="Column2" />
            <Binding Path="Column3" />
        </MultiBinding>
    </Setter.Value>
</Setter> 
```

# xml - 如何在json中调用以前的项目？像 xml 的 &lable; 符号

> ID：10574796
> 
> 赞同：0
> 
> 时间：2012-05-13T20:04:57.943
> 
> 标签：xml, json, syntax, yaml, dry

XML 中的示例：

```
<"someLable">the value within that lable</"someLable">
....
<"relativeLable">&someLable;</"relativeLable"> 
```

YAML 中的示例：

```
config: &defaults
  database: "myBD"
    address: locatlhost

developement: 
  <<*defaults 
```

在 JSON 中 [我不知道]：

```
{listOfPeople":{
    {"parent1":{"name":"value1","otherName":"otherValue1"},
    {"parent2":{"name":listOfPeople.parent2.name,"otherName":"otherValue1"}
}; 
```

我会为 listOfPeople.parent1.name 输入什么我已经尝试包装所有这些版本，但找不到正确的版本，或者即使它存在于 json 中：

*   eval（我试过 self.parent2.name）
*   self.parent1.name
*   this.parent1.name
*   parent1.name
*   ＆父母名字;
*   “＆父母名字”;
*   ＆“父母名字”;
*   “＆父母名字;”
*   以及以前的各种其他迭代

请帮我解决这个问题，如果可能的话，请在 JSON 中发布这些类型的保留函数的参考

这是 rdf:RDF 定义中的一个用法

```
<!DOCTYPE rdf:RDF [

<!ENTITY location "http://www.w3.org/2002/07/owl" >
<!ENTITY rdf "http://www.w3.org/1999/02/22-rdf-syntax-ns#" >
<!ENTITY rdfs "http://www.w3.org/2000/01/rdf-schema#" >
<!ENTITY xsd "http://www.w3.org/2001/XMLSchema#" >
<!ENTITY dc "http://purl.org/dc/elements/1.1/" >
<!ENTITY grddl "http://www.w3.org/2003/g/data-view#" >
<!ENTITY owl "&location;#" >

]> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:16:54.810

JSON 无法自动引用以前的值。您可以向自己的 JSON 结构添加符号，然后编写自己的代码以在解码的 JSON 中解释该符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T20:12:45.520

JSON 不支持这一点。
对不起。

# c++ - 有没有办法检查外部数据是否通过管道传输到程序或程序是否自行运行？

> ID：10574797
> 
> 赞同：2
> 
> 时间：2012-05-13T20:05:00.383
> 
> 标签：c++, windows, console

即数据已经由另一个程序提供，或者用户必须手动输入。我的意思是这两种状态：

```
dir /b /s *.* | myprogram 
```

和

```
myprogram 
```

在第二种情况下，程序将等待用户输入。有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T20:18:53.250

POSIX 有`isatty()`，而 Visual C++ 有`_isatty()`，如果文件描述符是终端或命令行（例如`isatty(fileno(stdin))`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T20:08:32.847

是的。用于`GetStdHandle`获取，然后通过调用它来`STD_INPUT_HANDLE`检查句柄是否属于`FILE_TYPE_PIPE`第一种情况或 第二种情况。`FILE_TYPE_CHAR``GetFileType`

# c# - C#：将负整数转换为字节的结果

> ID：10574799
> 
> 赞同：11
> 
> 时间：2012-05-13T20:05:14.750
> 
> 标签：c#

我正在查看[一个项目](https://github.com/Zyphrax/pixelcryptor)的源代码，我注意到以下[语句](https://github.com/Zyphrax/pixelcryptor/blob/master/PixelCryptor.Core/Coding/CoderSeal.cs)（keyByte 和 codedByte 都是 type `byte`）：

```
return (byte)(keyByte - codedByte); 
```

我现在试图了解在 keyByte 小于 codedByte 的情况下会产生什么结果，这会导致负整数。

经过一些实验以了解强制转换具有 [-255 : -1] 范围内的值的负整数的结果，我得到以下结果：

```
byte result = (byte) (-6);  // result = 250
byte result = (byte) (-50); // result = 206
byte result = (byte) (-17); // result = 239
byte result = (byte) (-20); // result = 236 
```

因此，只要`-256 < a < 0`，我能够通过以下方式确定结果：

```
result = 256 + a; 
```

我的问题是：我应该总是期望这种情况吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T20:08:54.737

是的。请记住，.Net“字节”的域中没有“-”这样的东西：

> [http://msdn.microsoft.com/en-us/library/e2ayt412.aspx](http://msdn.microsoft.com/en-us/library/e2ayt412.aspx)
> 
> 因为 Byte 是无符号类型，所以不能表示负数。如果在计算结果为 Byte 类型的表达式上使用一元减号 (-) 运算符，Visual Basic 首先将表达式转换为 Short。（注意：用任何 CLR/.Net 语言替换“Visual Basic”）

附录：这是一个示例应用程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace TestByte
{
    class Program
    {
        static void Main(string[] args)
        {
            for (int i = -255; i < 256; i++)
            {
                byte b = (byte)i;
                System.Console.WriteLine("i={0}, b={1}", i, b);
            }
        }
    }
} 
```

这是结果输出：

```
testbyte|more
i=-255, b=1
i=-254, b=2
i=-253, b=3
i=-252, b=4
i=-251, b=5
...
i=-2, b=254
i=-1, b=255
i=0, b=0
i=1, b=1
...
i=254, b=254
i=255, b=255 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-13T20:33:53.230

是的，情况总是如此（即它不仅仅取决于您的环境或编译器，而是被定义为 C# 语言规范的一部分）。请参阅[http://msdn.microsoft.com/en-us/library/aa691349(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa691349(v=vs.71).aspx)：

> 在`unchecked`上下文中，通过丢弃任何不适合目标类型的高位位来截断结果。

下一个问题是，如果你拿掉 -256 和 -1 之间的负数的高位`int`，并将其作为一个字节读取，你会得到什么？这就是你已经通过实验发现的：它是 256 + x。

请注意，字节序无关紧要，因为我们要丢弃高阶（或最高有效）位，而不是“第一个”24 位。因此，无论我们从哪一端获取它，我们都会留下构成该 int 的最低有效字节。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-13T20:22:09.520

这是一个执行与转换为字节相同的逻辑的算法，以帮助您理解它：

对于阳性：

```
byte bNum = iNum % 256; 
```

对于底片：

```
byte bNum = 256 + (iNum % 256); 
```

这就像搜索任何`k`导致`x + 255k`在范围内的东西`0 ... 255`。只能有一个`k`产生具有该范围的结果，结果将是转换为字节的结果。

另一种看待它的方式就像它“围绕字节值范围循环”：

让我们`iNum = -712`再次使用，并定义一个`bNum = 0`.

我们将这样做`iNum++; bNum--;`直到`iNum == 0`：

```
iNum = -712;
bNum = 0;

iNum++; // -711
bNum--; // 255 (cycles to the maximum value)

iNum++; // -710
bNum--; // 254

... // And so on, as if the iNum value is being *consumed* within the byte value range cycle. 
```

当然，这只是一个说明，看看它是如何运作的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T20:20:18.647

这就是在`unchecked`上下文中发生的事情。您可以说运行时（或编译器，如果您在编译时`Int32`知道您转换的那个`Byte`）根据需要多次添加或减去 256，直到找到可表示的值。

在`checked`上下文中，会导致异常（或编译时错误）。请参阅[http://msdn.microsoft.com/en-us/library/khy08726.aspx](http://msdn.microsoft.com/en-us/library/khy08726.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T20:20:32.743

是的 - 除非你得到一个例外。

.NET 仅对 4 字节和更大的数据类型定义所有算术运算。所以唯一不明显的一点是如何将 a 转换`int`为 a `byte`。

对于从一个整数类型到另一个整数类型的转换，转换的结果取决于溢出检查上下文（如 ECMA 334 标准，第 13.2.1 节）。

因此，在以下上下文中

```
checked
{
    return (byte)(keyByte - codedByte);
} 
```

你会看到一个`System.OverflowException`. 而在以下情况下：

```
unchecked
{
    return (byte)(keyByte - codedByte);
} 
```

无论您是否将 256 的倍数添加到差异中，您都可以确保始终看到您期望的结果；例如，2 - 255 = 3。

无论**硬件如何** [表示有符号值](http://en.wikipedia.org/wiki/Signed_number_representations)，这都是正确的。CLR 标准 (ECMA 335) 在第 12.1 节中指定`Int32`类型是“32 位二进制补码有符号值”。（嗯，这也匹配所有当前可用 .NET 或 mono 的平台，所以几乎可以猜到它无论如何都会工作，但很高兴知道这种做法受到语言标准的支持并且可移植。）

一些团队不想明确指定溢出检查上下文，因为他们有一个在开发周期早期检查溢出的策略，而不是在发布的代码中。在这些情况下，您可以像这样安全地进行字节算术：

```
return (byte)((keyByte - codedByte) % 256); 
```

# cocoa - main() 创建一个 NSAutoreleasePool 并在退出前将其排空是否重要？

> ID：10574801
> 
> 赞同：3
> 
> 时间：2012-05-13T20:05:35.693
> 
> 标签：cocoa, memory-management, nsautoreleasepool

因为如果`main()`创建一个`NSAutoreleasePool`, 并在程序退出之前清空它，那么即使它可以防止内存泄漏，整个进程的内存空间无论如何都会被释放——如果我们释放小块，如果整个块下一个被释放？事实上，如果它继续在小块上工作，会不会导致程序退出速度变慢？

（`drain`可以调用`release`，然后调用`dealloc`，但如果`dealloc`只是释放内存而不是其他（例如关闭文件），那么`drain`将无助于释放内存）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T20:10:07.373

在可能的情况下自己清理被认为是一种很好的做法，而不是依赖环境来为你清理。如果您担心的只是内存使用情况，那么不，最顶层的池并不是绝对必要的——但这*不是*您需要考虑的唯一事情。对象可能会在其方法中执行除释放内存之外的其他`-dealloc`操作（例如，将文件刷新到磁盘、释放稀有的操作系​​统资源或释放在进程退出时不会返回给系统的资源。）

当对象在没有池的情况下自动释放时，更不用说控制台垃圾邮件了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T20:15:57.903

在 GUI 程序的程序终止期间，`dealloc`不调用。它作为一种特殊情况被绕过，以避免减慢关机速度。这在您依赖`dealloc`被调用的情况下很重要，因为没有保证会这样。

存在顶级自动释放池，因此系统可以可靠地向您发出缺少自动释放池的线程的警告（乔纳森指出）。它永远不会在 GUI 程序中真正耗尽。它会在命令行程序中耗尽，并且可能会减慢程序的完成速度，但这通常不是一个大问题。如果它在您的命令行应用程序中，您可以移动`exit()`自动释放池耗尽的优先级。

# java - 是否在最终确定最佳实践中关闭连接？

> ID：10574802
> 
> 赞同：8
> 
> 时间：2012-05-13T20:05:59.033
> 
> 标签：java, database-connection, finalizer

> **可能重复：**
> [为什么要实现 finalize()？](https://stackoverflow.com/questions/158174/why-would-you-ever-implement-finalize)

我看到了一些带有以下代码的java文件：

```
public void finalize() {
    if (conn != null) {
        try {
            conn.close();
        } catch (SQLException e) {
        }
    }
} 
```

*   关闭方法`Connection`中的`finalize`最佳实践吗？
*   是否足以关闭`Connection`或是否还需要关闭其他对象，例如`PreparedStatement`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T20:32:44.347

从 Java 7 开始，关闭资源的最佳实践是使用 try-with-resource ：

[http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-13T20:32:05.813

不，那不是“最佳实践”，甚至不是“可以通过的实践”。您无法保证何时调用终结器，因此它不起作用。

相反，您应该将资源范围限定为一个块，如下所示：

```
try {
  acquire resource
}
finally {
  if (resource was acquired)
    release it
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T20:39:32.980

不，如果有的话，不太可能及时调用终结器。明确且肯定地清理您的资源。

```
/* Acquire resource. */
try {
  /* Use resource. */
}
finally {
  /* Release resource. */
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-13T20:40:03.223

获得 Connection 对象后，使用它来执行 PreparedStatement/Statement/CallableStatement，这些语句放在 try 块中，然后执行诸如关闭 statment 和 conn 之类的清扫工作。

例如：

```
 try{

    Connection conn = DriverManager.getConnection(url,username,password);

    PreparedStatement pStat = conn.prepareStatement("Drop table info");

    pStat.executeUpdate();
      }
       catch(Exception ex){
        }

   finally(){

     pStat.close();
     conn.close();
 } 
```

# python - 从字典中排序的键 => 值创建命令 args 字符串的 Pythonic 方法

> ID：10574805
> 
> 赞同：2
> 
> 时间：2012-05-13T20:06:25.360
> 
> 标签：python

我有一本字典，我想使用项目 (key,value) 生成单个字符串，我将在命令行上将参数传递给另一个脚本。

片段进一步说明：

```
args = { 'arg1': 100, 'arg2': 234 } 
```

我想创建字符串：

```
--arg1=100 --arg2=234 
```

从字典。

这样做的天真（昂贵）的方法是遍历字典中的项目，在我进行的过程中构建字符串。

有没有更蟒蛇的方式来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T20:09:25.360

你需要一个循环，但你可以简洁地做到这一点：

```
" ".join("--%s=%s" % item for item in args.iteritems()) 
```

（对于 Python 2。对于 Python 3，更改`iteritems`为`items`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T20:09:05.690

```
' '.join('--%s=%s' % (k, v) for (k, v) in args.items()) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T20:12:43.280

由于您打算将它传递给另一个脚本并且可能使用`subprocess`模块这样做：根本不要创建字符串！

```
args = ['/path/to/your/script'] + ['--%s=%s' % item for item in args.iteritems()] 
```

您可以将此数组传递给`subprocess.call()`（或`.Popen()`等），并且通过不使用参数字符串，您可以确保即使是空格、引号等也不会导致任何问题。

# c++ - 如何清除通用 C++ 代码中的“double”？

> ID：10574815
> 
> 赞同：2
> 
> 时间：2012-05-13T20:07:57.707
> 
> 标签：c++, generics, smart-pointers, generic-programming

我正在编写一个函数，该函数对 100 个单位向量的每 10 个单位进行平均。我必须在每 10 次迭代后清除一个临时总和。通常，我会写`ave=0.0`，但如果`ave`不是 double 而是 some type `T`，我会遇到问题。例如，如果我用 xyz 坐标对点进行平均，我不能这样做`{x,y,z} = 0.0`

为了解决这个问题，我尝试创建一个智能指针，然后将其重置。这给了我段错误。清除没有指定类型的对象的最佳方法是什么？

```
template <class T>
vector<T> average(const vector<T> &v, const int n) {
  vector<T> ave_vec;
  int iave = 0;
  shared_ptr<T> ave(new T);
  for (int i = 0; i < v.size(); i++) {
    *ave += v[i];
    iave++;
    if (iave == n) {
      ave_vec.push_back(*ave/n);
      ave.reset(); ///> gives seg fault
      iave=0;
    }
  }
  return ave_vec;
} 
```

如果我替换`ave.reset()`为`ave = 0.0`，则代码有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T20:14:49.027

初始化它：

```
T ave = T(); 
```

并重置它：

```
ave = T(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T20:13:48.920

如果`ave`是 a `shared_ptr<T>`，请尝试将其重置`ave`为默认初始化`T`：

```
*ave = T(); 
```

# python - 基于串行数据动态更新 Tkinter 窗口

> ID：10574821
> 
> 赞同：5
> 
> 时间：2012-05-13T20:08:47.577
> 
> 标签：python, tkinter

我正在尝试编写一个从串行端口连接获取数据并根据该数据实时自动更新 Tkinter 窗口的程序。

我尝试为窗口创建一个单独的线程，定期从主线程获取当前数据并更新窗口，如下所示：

```
serialdata = []
data = True

class SensorThread(threading.Thread):
    def run(self):
        serial = serial.Serial('dev/tty.usbmodem1d11', 9600)
        try:
            while True:
                serialdata.append(serial.readline())
        except KeyboardInterrupt:
            serial.close()
            exit()

class GuiThread(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)
        self.root = Tk()
        self.lbl = Label(self.root, text="")

    def run(self):
        self.lbl(pack)
        self.lbl.after(1000, self.updateGUI)
        self.root.mainloop()

    def updateGUI(self):
        msg = "Data is True" if data else "Data is False"
        self.lbl["text"] = msg
        self.root.update()
        self.lbl.after(1000, self.updateGUI)

if __name == "__main__":
    SensorThread().start()
    GuiThread().start()

    try:
        while True:
            # A bunch of analysis that sets either data = True or data = False based on serialdata
    except KeyboardInterrupt:
        exit() 
```

运行它会给我这个错误：

> 线程 Thread-2 中的异常：回溯（最后一次调用）：文件“/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/threading.py”，第 522 行，在 __bootstrap_inner self. run() 文件“analysis.py”，第 52 行，在运行 self.lbl1.pack() 文件“/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/lib-tk/Tkinter .py"，第 1764 行，在 pack_configure + self._options(cnf, kw)) RuntimeError：主线程不在主循环中

当我在谷歌上搜索这个错误时，我大多会收到人们试图从两个不同的线程与窗口交互的帖子，但我认为我没有这样做。有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T20:52:02.333

不要从线程运行 TK gui - 从主进程运行它。我将您的示例捣碎成演示原理的东西

```
from time import sleep
import threading
from Tkinter import *

serialdata = []
data = True

class SensorThread(threading.Thread):
    def run(self):
        try:
            i = 0
            while True:
                serialdata.append("Hello %d" % i)
                i += 1
                sleep(1)
        except KeyboardInterrupt:
            exit()

class Gui(object):
    def __init__(self):
        self.root = Tk()
        self.lbl = Label(self.root, text="")
        self.updateGUI()
        self.readSensor()

    def run(self):
        self.lbl.pack()
        self.lbl.after(1000, self.updateGUI)
        self.root.mainloop()

    def updateGUI(self):
        msg = "Data is True" if data else "Data is False"
        self.lbl["text"] = msg
        self.root.update()
        self.lbl.after(1000, self.updateGUI)

    def readSensor(self):
        self.lbl["text"] = serialdata[-1]
        self.root.update()
        self.root.after(527, self.readSensor)

if __name__ == "__main__":
    SensorThread().start()
    Gui().run() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T21:33:40.440

您需要将 GUI 放在主线程中，并使用单独的线程来轮询串口。当您从串行端口读取数据时，您可以将其推送到 Queue 对象上。

在主 GUI 线程中，您可以设置轮询以定期检查队列，通过使用`after`来安排轮询。调用一个排空队列的函数，然后调用自身`after`以有效地模拟无限循环。

如果来自传感器的数据传输速度相当慢，并且您可以在不阻塞的情况下轮询串行端口，那么您可以在主线程中完成所有操作——而不是从队列中推拉，您的主线程可以看看是否有可用的数据，如果有，请阅读。只有在可以不阻塞地读取的情况下才能执行此操作，否则您的 GUI 将在等待数据时冻结。

例如，你可以让它像这样工作：

```
def poll_serial_port(self):
    if serial.has_data():
        data = serial.readline()
        self.lbl.configure(text=data)
    self.after(100, self.poll_serial_port) 
```

以上将每秒检查串行端口 10 次，一次拉出一项。当然，您必须根据实际数据条件进行调整。这假设`has_data`当且仅当读取不会阻塞时，您有一些类似的方法可以返回 True 。

# ruby-on-rails - 为新表单渲染嵌套部分

> ID：10574823
> 
> 赞同：1
> 
> 时间：2012-05-13T20:08:58.150
> 
> 标签：ruby-on-rails, nested-forms, renderpartial

我正在尝试从帖子控制器内的评论控制器呈现 _new.html.erb 部分。

我的评论资源嵌套在我的帖子资源中

路线.rb

```
 resources :users, :only => [:show, :create, :new]

  resources :posts do
    resources :comments
    resources :memorybooks
  end

  root to: 'static_pages#home'

  match '/channel',    to: 'static_pages#channel'
  match 'login', to: 'static_pages#login'
  match '/posts', to: 'posts#new'
  match '/users', to: 'users#new' 
```

我的评论控制器中的 _new.html.erb 部分：

```
 <%= form_for([@post, @comment]) do |f| %>

      <%= f.label :comment %>
      <%= f.text_field :comment %>

      <p>
      <center>
      <%= f.submit "Submit", class: "btn btn-large btn-primary" %>
      </center>
    <% end %> 
```

我的评论控制器方法：

```
def create
@post = Post.find_by_id(params[:id])
@comment = @post.comments.build(params[:comment])
    if @comment.save
    redirect_to @current_post
else
    render '/'
end
end 
```

在我的 show.html.erb 文件中，当我使用以下内容时：

```
<%= render 'comments/new' %> 
```

_new 部分表单出现，但是当我发布时，我收到错误：

```
No route matches [POST] "/comments" 
```

如果我在 show.html.erb 中使用以下行

```
<%= render new_post_comment %> 
```

我得到错误：

```
undefined local variable or method `new_post_comment' 
```

以下是我的 rake 路线

```
 users POST   /users(.:format)                               users#create
            new_user GET    /users/new(.:format)                           users#new
                user GET    /users/:id(.:format)                           users#show
       post_comments GET    /posts/:post_id/comments(.:format)             comments#index
                     POST   /posts/:post_id/comments(.:format)             comments#create
    new_post_comment GET    /posts/:post_id/comments/new(.:format)         comments#new
   edit_post_comment GET    /posts/:post_id/comments/:id/edit(.:format)    comments#edit
        post_comment GET    /posts/:post_id/comments/:id(.:format)         comments#show
                     PUT    /posts/:post_id/comments/:id(.:format)         comments#update
                     DELETE /posts/:post_id/comments/:id(.:format)         comments#destroy
    post_memorybooks GET    /posts/:post_id/memorybooks(.:format)          memorybooks#index
                     POST   /posts/:post_id/memorybooks(.:format)          memorybooks#create
 new_post_memorybook GET    /posts/:post_id/memorybooks/new(.:format)      memorybooks#new
edit_post_memorybook GET    /posts/:post_id/memorybooks/:id/edit(.:format) memorybooks#edit
     post_memorybook GET    /posts/:post_id/memorybooks/:id(.:format)      memorybooks#show
                     PUT    /posts/:post_id/memorybooks/:id(.:format)      memorybooks#update
                     DELETE /posts/:post_id/memorybooks/:id(.:format)      memorybooks#destroy
               posts GET    /posts(.:format)                               posts#index
                     POST   /posts(.:format)                               posts#create
            new_post GET    /posts/new(.:format)                           posts#new
           edit_post GET    /posts/:id/edit(.:format)                      posts#edit
                post GET    /posts/:id(.:format)                           posts#show
                     PUT    /posts/:id(.:format)                           posts#update
                     DELETE /posts/:id(.:format)                           posts#destroy
                root        /                                              static_pages#home
             channel        /channel(.:format)                             static_pages#channel
               login        /login(.:format)                               static_pages#login
                            /posts(.:format)                               posts#new
                            /users(.:format)                               users#new 
```

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:51:06.723

尝试这个

```
<%= render new_post_comment(@post, @comment) %> 
```

我希望这可以帮助你。

# javascript - 由于 over_query_limit 导致 Google 地理编码器失败

> ID：10574824
> 
> 赞同：4
> 
> 时间：2012-05-13T20:09:02.027
> 
> 标签：javascript, google-maps-api-3

我正在使用反向地理编码填写四个表单字段。表单填写正确，但随后我收到一条错误消息，指出 OVER_QUERY_LIMIT。在检查 chrome 的 JS 控制台时，我看到在收到错误消息之前已经进行了五个相同的调用。我不确定为什么我的代码会发出多个请求。有人可以指出我应该在 codeLatLng 函数的循环中更改什么。这很可能是问题所在。

```
var geocoder;

function getCity() {
    geocoder = new google.maps.Geocoder();  
  }

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(successFunction, errorFunction);
} 
//Get the latitude and the longitude;
function successFunction(position) {
    var lat = position.coords.latitude;
    var lng = position.coords.longitude;
    //alert("Success funciton" + lat + " " + lng);
    codeLatLng(lat, lng)    
}

function errorFunction(){
    AppMobi.notification.alert("For the best user experience, please ensure your device GPS and geolocation settings are enabled.","Geolocation disabled","OK");
}

    function codeLatLng(lat, lng) {
    //alert("codeLatLng fn started");
    var latlng = new google.maps.LatLng(lat, lng);
    geocoder.geocode({'latLng': latlng}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
      console.log(results)
        if (results[1]) {
         //formatted address
     //alert(results[0].formatted_address) //Complete address
    $("#address1").val(results[0].formatted_address);
    } else {
      alert("No results found. Please enter the data manually.");
    }
  } else {
    alert("Geocoder failed due to: " + status +".  Please enter the data manually." );
  }
}); 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T20:23:32.877

使用 Google Maps API 网络服务受每天允许的请求数量的特定限制。

OVER_QUERY_LIMIT 就是由这个限制引起的。

在这里您可以找到更多信息：

[https://developers.google.com/maps/documentation/business/articles/usage_limits](https://developers.google.com/maps/documentation/business/articles/usage_limits)

当 google 响应此错误时，您可以尝试等待超过 2 秒，例如，使用 setTimeout。

结果[0].address_components[i] 可能是对函数调用的引用。

# ruby-on-rails - rails 应用程序设计：静态方法

> ID：10574826
> 
> 赞同：1
> 
> 时间：2012-05-13T20:09:09.967
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

定义从不同库调用的静态方法（例如“generate_random_string”、“generate_random_user_agent”）最优雅的方式是什么？

最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T20:23:27.057

我见过的最佳实践包括：

*   把它们放在`module`一个`/lib/`
*   将它们作为*mixins*包含在您的应用程序代码的其余部分中。
*   确保使用他们自己的 rspecs（或您使用的任何测试工具）*对它们进行彻底测试。*

计划它们，就好像您可能在某个时候想要将它们分离到自己的 gem 中，或者可能在某个时候将它们作为服务提供。这并不意味着从一开始就将它们设计为单独的服务，但*一定*要确保它们不依赖于应用程序中的任何其他代码。

一些基本代码可能类似于：

```
module App::Services

  def generate_random_string
    #  ...
  end   
  def generate_random_user_agent
    #  ...
  end   
end 
```

然后在您的模型或控制器代码（或任何地方）中，您可以像这样包含它们：

```
class MyModelClass < ActiveRecord::Base
  include App::Services

  def do_something_here
    foo = random_string
    # whatever...
  end

  def random_string
    generate_random_string
  end

end 
```

请注意，我将调用隔离`generate_random_string`在它自己的方法中，因此它可以在模型类中使用，但可能很容易被其他方法切换出来。（这可能比您想要的多一步。）

# php - htaccess 拒绝所有和 cron'd 文件

> ID：10574827
> 
> 赞同：1
> 
> 时间：2012-05-13T20:09:11.180
> 
> 标签：php, .htaccess

因此，如果我在给定文件夹上设置了 htaccess deny all，但我们希望每隔几个小时执行一次 cron 的文件夹中的文件，我是否需要做额外的考虑，或者拒绝所有不适用于这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T20:13:13.217

如果 cron 作业直接通过 php 解释器执行 php 文件，那么不，它永远不会通过网络服务器，并且任何网络服务器设置或配置都是无关紧要的。

但是，如果 cron 作业执行 web 浏览器或类似 wget 的东西，通过 web 服务器发出 http 请求，那么是的，你会遇到问题。您可以让网络服务器允许来自本地 IP 的请求。

# django - 错误“无法加载 Boto 的 S3 绑定。”

> ID：10574834
> 
> 赞同：18
> 
> 时间：2012-05-13T20:09:47.200
> 
> 标签：django, boto, django-storage

我遵循了为[django-storages](http://django-storages.readthedocs.org/en/latest/backends/amazon-S3.html)提供的非常简洁的指南，从本地文件存储过渡，并且遇到了这个异常：

> 无法加载 Boto 的 S3 绑定。

设置.py

```
DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
AWS_ACCESS_KEY_ID = "xxxxxx"
AWS_SECRET_ACCESS_KEY = "xxxxxxxxx"
AWS_STORAGE_BUCKET_NAME = "images" 
```

模型.py

```
class CameraImage(models.Model):
...
image = models.ImageField(upload_to='images')#get_image_path) 
```

这个例外是什么意思？我如何解决它？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-13T20:21:08.147

从[查看源代码](https://bitbucket.org/david/django-storages/src/83fa2f0ba20c/storages/backends/s3boto.py#cl-24)看来，您需要安装[python-boto](http://pypi.python.org/pypi/boto)库。您链接到的文档中也提到了这一点。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-04-22T12:11:40.993

有一个更新，现在是“pip install boto”

# android - android在公共类的onClickListener中从Intent启动Activity返回错误

> ID：10574842
> 
> 赞同：1
> 
> 时间：2012-05-13T20:10:45.623
> 
> 标签：android, android-intent, onclicklistener

我在每个类中都有一个导航按钮，并希望在包含所有公共代码的类中设置它的 onClickListener。但是我得到一个

```
"The method startActivity(Intent) is undefined for the type new View.OnClickListener(){}" 
```

startActivity(i) 中的错误。

相关代码为：

```
 public static void initiateNavigationButton(Context context, View view, int layoutResource) {
    final Context classContext = context;

    LayoutInflater inflater = LayoutInflater.from(classContext);
    View layout = inflater.inflate(layoutResource, (ViewGroup) view);

    Button navigationButton = (Button) layout.findViewById(R.id.navigation_button);

    navigationButton.setOnClickListener(new View.OnClickListener() { 
        @Override
        public void onClick(View v) { 
            Intent i = new Intent(classContext, HomeActivity.class);

            startActivity(i); 
        }
    });
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T20:17:45.087

您在一个实现`View.OnClickListener`.

该类没有`startActivity`您可以调用的方法，因此您需要包装它才能访问父活动的方法。假设您的班级名称是“MyActivity”，请将行更改`startActivity(i);`为

```
MyActivity.this.startActivity(i); 
```

# ruby-on-rails - 对 Rails has_and_belongs_to_many 关联感到困惑

> ID：10574844
> 
> 赞同：4
> 
> 时间：2012-05-13T20:11:01.557
> 
> 标签：ruby-on-rails, ruby, associations, has-and-belongs-to-many

我有两个模型、项目和类别，它们使用 has_and_belongs_to_many 关联具有多对多关系。

在我的模型中，我有

```
class Item < ActiveRecord::Base
    has_and_belongs_to_many :categories
end 
```

和

```
class Category < ActiveRecord::Base
    has_and_belongs_to_many :items
end 
```

我创建了一个连接表“categories_items”：

```
create_table "categories_items", :id => false, :force => true do |t|
    t.integer "category_id"
    t.integer "item_id"
end 
```

我没有收到任何错误，但我对关联到底允许什么感到有点困惑。现在，如果我有某个类别@category，我可以通过以下方式找到其中的所有项目

```
@category.items 
```

我假设我可以通过以下方式找到与给定 Item @item 关联的类别

```
@item.categories 
```

但是我收到一条错误消息，提示 ActiveModel::MissingAttributeError: missing attribute: category

我是否误解了 has_and_belongs_to_many 关联的功能，还是我的代码中缺少某些内容？谢谢！

编辑 - 附加信息：

我认为困惑在于我应该如何分配项目/类别。目前，我正在独立创建它们：

```
@item = Item.new
... add attributes ... 
@item.save 
```

和

```
@category = Category.new
... add attributes ... 
@category.save 
```

然后将它们与

```
@category.items << @item
@item.categories << @category 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-13T04:27:58.690

我想我以前经历过你所经历的一次。我相信困惑在于如何通过其他表进行连接。在下文中，一个用户可以拥有多种技能。一项技能也与许多用户相关联。类似的东西可能对你有用^_^

```
class User < ActiveRecord::Base
  has_many :skills_users
  has_many :skills, through: :skills_users

class SkillsUser < ActiveRecord::Base
  belongs_to :user
  belongs_to :skill

class Skill < ActiveRecord::Base
  has_many :skills_users
  has_many :users, through: :skills_users 
```

# c++ - 简单的跨平台 TCP IP API？

> ID：10574857
> 
> 赞同：17
> 
> 时间：2012-05-13T20:12:50.007
> 
> 标签：c++, c, api, tcp

我不想使用像 QT 或 wxWidgets 的 API 这样的大东西。我只想要可以在 Android、iOS、Windows、Mac、Linux 上运行的简单套接字。

我正在制作一个事件驱动的纸牌游戏，所以最好使用 TCP。

本质上，我只想连接和验证客户端。之后，我只需要能够向他们发送消息。我打算使用可靠的 UDP，但 TCP 似乎更合适。

如果有人也有类似 tcp 聊天应用程序的基本教程，我将不胜感激。

谢谢

我只想能够使用、send()、recv 等，而不用担心 WINSOCK 或 POSIX，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T20:15:51.783

也许试试 BOOST Asio

[http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio.html](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio.html)

重量够轻吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T20:22:18.287

我围绕 BSD Sockets API 制作了一个非常简单、轻量级的包装器。它仅使用服务器和客户端进行 TCP/IP 通信（服务器可以选择接受多个客户端连接）。

你可以在这里找到它：（不要介意 Objective-C 类，只使用 tcpconnect.h 和 tcpconnect.c）：http: [//github.com/H2CO3/TCPHelper](http://github.com/H2CO3/TCPHelper)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T13:29:56.633

Perharps Boost.Asio ( [http://boost.org](http://boost.org) ) 或这个基于 Asio 的[http://libunicomm.org可能对您有用。](http://libunicomm.org)

# javascript - 如何使用 razor 语法设置 javascript 变量或调用函数？

> ID：10574858
> 
> 赞同：0
> 
> 时间：2012-05-13T20:13:08.000
> 
> 标签：javascript, razor, visual-web-developer

这是一个关于网络编程的初学者问题。基本上，我有一个页面使用 Google Map API 显示默认地址。查找“221B Baker Street，London，United Kingdom”效果很好，但是有一个文本框，我希望能够在其中写一个地址然后查找它。这是一个 cshtml 页面，我知道剃刀语法

```
@{if(IsPost) { do something }} 
```

所以基本上我想`Request.Form["FindAddress"];`从文本框中获取并将其设置为 javascript myAddress 变量，以便显示用户地址。但我不知道如何进行内联编码。将 IsPost 条件放在 javascript 函数的 -tag 内时，它不断给我语法错误。这是完整的页面

```
<!DOCTYPE html>

<html>

<head id="head">
<title></title>
<link href="@Server.MapPath("~/Styles/Site.css")" rel="stylesheet" type="text/css" />
</head>
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=<YOUR_API_KEY>&sensor=false"
        type="text/javascript"></script>
<script type="text/javascript">

    var myAddress = "221B Baker Street, London, United Kingdom"; // how do I overwrite this if it is (isPost)?

    var map;
    var geocoder;
    function initialize() {
        if (GBrowserIsCompatible()) {
            map = new GMap2(document.getElementById("map"));
            map.setCenter(new GLatLng(51.5, -0.1), 10);
            map.setUIToDefault();

            geocoder = new GClientGeocoder();                   
            showAddress(myAddress);
        }
    }
    function showAddress(address) {
        geocoder.getLatLng(address, function (point) { if (!point) { alert(address + " not found"); } else { map.setCenter(point, 15); var marker = new GMarker(point); map.addOverlay(marker); marker.openInfoWindow(address); } });
    }
</script>

<body onload="initialize()" onunload="GUnload()">
    <form id="form1" runat="server">
        <div>
            <input type="text" id="FindAddress" name="FindAddress" />
        </div>
        <div id="map" style="width: 500px; height: 500px"></div>
    </form>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:29:37.480

我还没有尝试过下面的代码，但我希望它会起作用。基本上，我将条件检查逻辑放在脚本块之外，并将结果存储在一个变量中，并在 javascript 中引用。

```
@{
  var address = "221B Baker Street, London, United Kingdom";

  if (Request.HttpMethod == "POST")
  {
    address = Request.Form["FindAddress"];
  }  
}

  <script type="text/javascript">

    var myAddress = "@address"; // how do I overwrite this if it is (isPost)?

    var map;
    var geocoder;
    function initialize() {
      if (GBrowserIsCompatible()) {
        map = new GMap2(document.getElementById("map"));
        map.setCenter(new GLatLng(51.5, -0.1), 10);
        map.setUIToDefault();

        geocoder = new GClientGeocoder();
        showAddress(myAddress);
      }
    }
    function showAddress(address) {
      geocoder.getLatLng(address, function (point) { if (!point) { alert(address + " not found"); } else { map.setCenter(point, 15); var marker = new GMarker(point); map.addOverlay(marker); marker.openInfoWindow(address); } });
    }
  </script> 
```

# php - 从动态表单中检索数据

> ID：10574863
> 
> 赞同：2
> 
> 时间：2012-05-13T20:13:45.673
> 
> 标签：php, forms, dynamicform

我有一个根据用户输入动态生成的表单。

最初向用户显示 3 个字段可供选择（datefrom、dateto 和 pitchtype），他们选择选项，单击提交，脚本会生成一个表格，其中包含范围内每个日期的输入供他们编辑。

生成表单的示例如下：

```
<table id="avtable">

    <thead>
        <tr>
            <th>Date</th>
            <th>Current bookings</th>
            <th>Max bookings</th>
        </tr>
    </thead>

    <tbody>

        <form action="index.php?page=availability&amp;task=edit&amp;action=submit" method="post"></form>

            <input type="hidden" name="pitchtype" value="1" />

            <tr>
                <td>2012-05-13</td>
                <td>0</td>
                <td><input type="text" value="10" class="spinner" maxlength="3" name="max"></td>
            </tr>

            <tr>
                <td>2012-05-14</td>
                <td>0</td>
                <td><input type="text" value="10" class="spinner" maxlength="3" name="max"></td>
            </tr>

            <input type="submit" value="Save" name="Submit" />

        </form>

    </tbody>

</table> 
```

在接收 PHP 文件中，我需要能够处理每个日期的数据，并且不知道从哪里开始！通常，如果它是静态形式，我会使用类似的东西

```
$max = $_REQUEST['max']; 
```

获取已编辑的字段。

显然，我需要做的是将每个已编辑字段与其日期配对，以便我像往常一样处理数据。我想我需要某种带有表单数据数组的php循环，但我不太确定从哪里开始......有什么想法吗？

编辑 ：

我想我需要将我的输出表单编辑成这样的东西，所以每个输入的名称与日期列相同，所以我需要知道的是如何获取接收 php 文件中的所有日期：

```
<table id="avtable">

    <thead>
        <tr>
            <th>Date</th>
            <th>Current bookings</th>
            <th>Max bookings</th>
        </tr>
    </thead>

    <tbody>

        <form action="index.php?page=availability&amp;task=edit&amp;action=submit" method="post"></form>

            <input type="hidden" name="pitchtype" value="1" />

            <tr>
                <td>2012-05-13</td>
                <td>0</td>
                <td><input type="text" value="10" class="spinner" maxlength="3" name="2012-05-13"></td>
            </tr>

            <tr>
                <td>2012-05-14</td>
                <td>0</td>
                <td><input type="text" value="10" class="spinner" maxlength="3" name="2012-05-14"></td>
            </tr>

            <input type="submit" value="Save" name="Submit" />

        </form>

    </tbody>

</table> 
```

非常感谢！

凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:21:56.213

为了首先传递信息，您需要为文本输入提供不同的名称，例如：

```
<table id="avtable">

    <thead>
        <tr>
            <th>Date</th>
            <th>Current bookings</th>
            <th>Max bookings</th>
        </tr>
    </thead>

    <tbody>

        <form action="index.php?page=availability&amp;task=edit&amp;action=submit" method="post"></form>

            <tr>
                <td>2012-05-13</td>
                <td>0</td>
                <td><input type="text" value="10" class="spinner" maxlength="3" name="SpinMax"></td>
            </tr>

            <tr>
                <td>2012-05-14</td>
                <td>0</td>
                <td><input type="text" value="10" class="spinner" maxlength="3" name="SpinMax2"></td>
            </tr>

            <input type="submit" value="Save" name="Submit" />

        </form>

    </tbody>

</table> 
```

从那里开始，您的 PHP 脚本应该是这样的：

```
$SpinMax = $_POST["SpinMax"];
$SpinMax2 = $_POST["SpinMax2"]; 
```

通过使用 $_POST，您可以根据您在文本区域中提供的“名称”来分配 PHP 变量。

# c++ - 剪切文件中的单词并写入，同时保留 C++ 中的行号

> ID：10574867
> 
> 赞同：0
> 
> 时间：2012-05-13T20:14:07.447
> 
> 标签：c++, file, inputstream

```
 #include<fstream>
 #include<iostream>
 #include<string>
 #include<algorithm>
 using namespace std;

 int main(){
 ifstream infile;
 ofstream outfile;
 infile.open("oldfile.txt");
 outfile.open("newfile.txt");
 while(infile){
    string str,nstr;
    infile>>str;
    char charr[10];
    charr[0]='<';charr[1]='\0';
    nstr=str.substr(0,str.find_first_of(charr));

    outfile<<nstr<<' ';
 }
} 
```

该程序使用 substr(0, string.find_first-of(charcter array which is starting point to be substring))每个单词的不必要的子字符串，但在写入另一个文件时它不保留行号。你能修好它吗 。它按顺序逐字写入文件。代码没有逐行保留，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T23:18:43.880

字符串输入不关心行边界，它将 \n、\t、\v 和其他可能与空格相同。

```
#include <sstream>
#include <iostream>
#include <string>
using namespace std;

int main()
{
    string line,word;
    char foo[] = "<";
    while ( getline(cin,line) ) {
        string newline;
        for ( istringstream words(line)
            ; words >> word ; ) {
                newline+=word.substr(0,word.find_first_of(foo))+' ';
        }
        cout << newline << '\n';
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-13T20:29:06.290

改变

```
 outfile<<nstr<<' '; 
```

到

```
 outfile<<nstr<<endl; 
```

这将逐行写入，而不是与单个空白字符分开。

# android - 什么时候需要在应用程序中创建一个单独的进程？

> ID：10574868
> 
> 赞同：7
> 
> 时间：2012-05-13T20:14:15.253
> 
> 标签：android

我正在阅读 Android 开发人员博客[Process and Threads](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html)中的一篇文章，其中讨论了为应用程序的特定组件创建新进程。但我不明白什么时候在我的应用程序中创建一个新进程成为绝对需要。您能否帮助我理解以下我在这方面的疑问。

1.  作为一名开发人员，我什么时候应该觉得我需要为 Android 组件建立一个单独的进程？
2.  引入新流程是否会对应用程序的整体性能产生任何副作用？

非常感谢任何其他信息。

谢谢， SKU

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-10T18:56:27.437

如果您的应用程序的某些组件不一定需要同时运行才能对用户有用，并且后台任务对于应用程序“正确性”（现在或将来）至关重要，那么拥有一个单独的进程可能很有用。典型的例子是一个应用程序，它有一个服务，该服务保存或上传一些对您的应用程序至关重要的数据（关键意味着取回数据的唯一方法是让用户重新输入它！）。服务可能负责上传或保存数据等操作，而活动只是用户的界面。所以开发人员应该将这两个组件解耦，以防止我的下一点可能出现的问题..

Android 被设计为在资源（尤其是内存）受限的环境中运行，因此被认为不重要的进程会定期被“低内存杀手”（LMK）杀死以为重要的进程打开内存（如果你谷歌这个，你会得到很多有关该主题的信息）。可以理解的是，前台进程之类的东西由于当前正在使用而被赋予更高的优先级，但有时它们也会因消耗过多内存等原因而被终止。现在，假设您需要在用户在应用程序中执行某些操作后将一些数据保存到数据库中，并且您使用服务来执行此操作以确保即使用户离开应用程序也能完成。除非您在自己的进程中创建服务，否则包含活动和服务的进程可能会被终止，因为该进程属于非前台活动。然而，并不总是需要将服务放在自己的进程中，通常只需给服务自己的线程就足够了；这是非常特定于应用程序的。我只会将服务放在它自己的进程中，如果它需要超过几秒钟（足够长的时间让用户离开我的应用程序并让 LMK 介入）在后台执行一些任务并且与该任务相关我的应用程序的“正确性”（IE 保存数据以备后用）。对于像缓存这样的东西，坚持使用线程，因为如果进程被过早终止，您可以稍后重新创建该数据。然而，并不总是需要将服务放在自己的进程中，通常只需给服务自己的线程就足够了；这是非常特定于应用程序的。我只会将服务放在它自己的进程中，如果它需要超过几秒钟（足够长的时间让用户离开我的应用程序并让 LMK 介入）在后台执行一些任务并且与该任务相关我的应用程序的“正确性”（IE 保存数据以备后用）。对于像缓存这样的东西，坚持使用线程，因为如果进程被过早终止，您可以稍后重新创建该数据。然而，并不总是需要将服务放在自己的进程中，通常只需给服务自己的线程就足够了；这是非常特定于应用程序的。我只会将服务放在它自己的进程中，如果它需要超过几秒钟（足够长的时间让用户离开我的应用程序并让 LMK 介入）在后台执行一些任务并且与该任务相关我的应用程序的“正确性”（IE 保存数据以备后用）。对于像缓存这样的东西，坚持使用线程，因为如果进程被过早终止，您可以稍后重新创建该数据。我只会将服务放在它自己的进程中，如果它需要超过几秒钟（足够长的时间让用户离开我的应用程序并让 LMK 介入）在后台执行一些任务并且与该任务相关我的应用程序的“正确性”（IE 保存数据以备后用）。对于像缓存这样的东西，坚持使用线程，因为如果进程被过早终止，您可以稍后重新创建该数据。我只会将服务放在它自己的进程中，如果它需要超过几秒钟（足够长的时间让用户离开我的应用程序并让 LMK 介入）在后台执行一些任务并且与该任务相关我的应用程序的“正确性”（IE 保存数据以备后用）。对于像缓存这样的东西，坚持使用线程，因为如果进程被过早终止，您可以稍后重新创建该数据。

有一个单独的进程的另一个原因是，如果您正在运行一个全局服务（一个可以由您自己的应用程序以外的应用程序使用的服务），您可能通过一个 Activity 提供一个接口来进行配置。

至于性能问题，这样的事情肯定会对性能产生影响。进程间通信并不便宜，所以你真的应该只使用一个单独的进程，如果你适合一个特定的用例，就像上面提到的那样。此外，维护进程需要一定数量的内存开销，因此这是另一个性能损失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T20:31:30.233

1.)当您不希望您的应用程序运行缓慢时，您需要在单独的进程或线程上做一些事情。通过引入线程，您会强制您的应用程序不在 UI 线程上运行。从而使您的应用程序响应其他事件。例如：当您必须从 Web 服务获取一些数据时，您可以使用线程，以便它在后台发生并且不会影响您的应用程序。

2.）不应该使用线程..我们应该在android中使用AsyncTask或loaders。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T20:37:43.007

1.) 在 android 4.0（可能还有 3.0，但不确定）中，设备不允许您在主线程中使用 HTTP 代理，因为这会减慢 UI 速度。这是线程派上用场的时候。

同样使用需要大量 cpu 的函数，如果这些函数在 UI 线程中运行，UI 将滞后并且在函数完成之前不会响应。

2.) 如 1 所述，它实际上会提高应用程序的视觉性能；)

# c++ - OpenCV：NetBeans：未定义对 cvCreateSubdivDelaunay2D 的引用

> ID：10574871
> 
> 赞同：1
> 
> 时间：2012-05-13T20:14:44.300
> 
> 标签：c++, opencv, netbeans-7, ubuntu-11.10

我正在使用 NetBeans 7.0.1 在 Ubuntu 11.10 上使用 OpenCV 2.4.0 开发 C++ 应用程序。当我尝试构建应用程序时，我收到以下链接错误消息。

```
undefined reference to `cvCreateSubdivDelaunay2D(CvRect, CvMemStorage*)'
undefined reference to `cvSubdivDelaunay2DInsert(CvSubdiv2D*, cv::Point_<int>)' 
```

我已链接到以下库。

```
libopencv_calib3d_pch_dephelp.a
libopencv_calib3d.so
libopencv_calib3d.so.2.4
libopencv_calib3d.so.2.4.0
libopencv_contrib_pch_dephelp.a
libopencv_contrib.so
libopencv_contrib.so.2.4
libopencv_contrib.so.2.4.0
libopencv_core_pch_dephelp.a
libopencv_core.so
libopencv_core.so.2.4
libopencv_core.so.2.4.0
libopencv_features2d_pch_dephelp.a
libopencv_features2d.so
libopencv_features2d.so.2.4
libopencv_features2d.so.2.4.0
libopencv_flann_pch_dephelp.a
libopencv_flann.so
libopencv_flann.so.2.4
libopencv_flann.so.2.4.0
libopencv_gpu_pch_dephelp.a
libopencv_gpu.so
libopencv_gpu.so.2.4
libopencv_gpu.so.2.4.0
libopencv_haartraining_engine.a
libopencv_highgui_pch_dephelp.a
libopencv_highgui.so
libopencv_highgui.so.2.4
libopencv_highgui.so.2.4.0
libopencv_imgproc_pch_dephelp.a
libopencv_imgproc.so
libopencv_imgproc.so.2.4
libopencv_imgproc.so.2.4.0
libopencv_legacy_pch_dephelp.a
libopencv_legacy.so
libopencv_legacy.so.2.4
libopencv_legacy.so.2.4.0
libopencv_ml_pch_dephelp.a
libopencv_ml.so
libopencv_ml.so.2.4
libopencv_ml.so.2.4.0
libopencv_nonfree_pch_dephelp.a
libopencv_nonfree.so
libopencv_nonfree.so.2.4
libopencv_nonfree.so.2.4.0
libopencv_objdetect_pch_dephelp.a
libopencv_objdetect.so
libopencv_objdetect.so.2.4
libopencv_objdetect.so.2.4.0
libopencv_perf_calib3d_pch_dephelp.a
libopencv_perf_core_pch_dephelp.a
libopencv_perf_features2d_pch_dephelp.a
libopencv_perf_gpu_pch_dephelp.a
libopencv_perf_highgui_pch_dephelp.a
libopencv_perf_imgproc_pch_dephelp.a
libopencv_perf_nonfree_pch_dephelp.a
libopencv_perf_objdetect_pch_dephelp.a
libopencv_perf_photo_pch_dephelp.a
libopencv_perf_stitching_pch_dephelp.a
libopencv_perf_video_pch_dephelp.a
libopencv_photo_pch_dephelp.a
libopencv_photo.so
libopencv_photo.so.2.4
libopencv_photo.so.2.4.0
libopencv_stitching_pch_dephelp.a
libopencv_stitching.so
libopencv_stitching.so.2.4
libopencv_stitching.so.2.4.0
libopencv_test_calib3d_pch_dephelp.a
libopencv_test_contrib_pch_dephelp.a
libopencv_test_core_pch_dephelp.a
libopencv_test_features2d_pch_dephelp.a
libopencv_test_highgui_pch_dephelp.a
libopencv_test_imgproc_pch_dephelp.a
libopencv_test_legacy_pch_dephelp.a
libopencv_test_ml_pch_dephelp.a
libopencv_test_nonfree_pch_dephelp.a
libopencv_test_objdetect_pch_dephelp.a
libopencv_test_photo_pch_dephelp.a
libopencv_test_stitching_pch_dephelp.a
libopencv_test_video_pch_dephelp.a
libopencv_ts_pch_dephelp.a
libopencv_ts.so
libopencv_ts.so.2.4
libopencv_ts.so.2.4.0
libopencv_video_pch_dephelp.a
libopencv_video.so
libopencv_video.so.2.4
libopencv_video.so.2.4.0
libopencv_videostab_pch_dephelp.a
libopencv_videostab.so
libopencv_videostab.so.2.4
libopencv_videostab.so.2.4.0
libraries.txt 
```

如果有人能告诉我如何解决此错误，我将不胜感激。

非常感谢，彼得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T01:06:43.040

在 2.4.0 中，`cvSubdivDelaunay2DInsert`在**libopencv_legacy.so**中，因此应该`cvCreateSubdivDelaunay2D`根据源代码，但在 Mac OS X 上编译的库中找不到最新的。

要验证此信息，请转到 OpenCV 库目录并执行`nm`. 如果结果在符号名称前出现字母 T，则表示这是实现该符号的库：

```
$ nm libopencv_legacy.so | grep cvSubdivDelaunay2DInsert    
00000000000b5200 T _cvSubdivDelaunay2DInsert 
```

如果您找不到`cvCreateSubdivDelaunay2D`使用此技巧，请考虑[提交](http://code.opencv.org/projects/opencv/issues)错误。

# android - Android XML解析器不解析

> ID：10574874
> 
> 赞同：1
> 
> 时间：2012-05-13T20:15:00.190
> 
> 标签：android, xml, xml-parsing, android-xml

我正在尝试使用 Android 自己的解析器解析 XML。执行此操作时，我使用[IBM 教程](http://www.ibm.com/developerworks/opensource/library/x-android/)作为指南。

**编码**

我正在测试的 XML 带有以下链接。我正在尝试从中解析 Number 和 Name 。

```
https://api.trafiklab.se/sl/realtid/GetSite?stationSearch=Slussen&key=7c4434c36d394e0c99396b8d1c69d9c4 
```

我设置了一个名为 AndroidSaxFeedParser 的解析器类，如下所示：

```
public class AndroidSaxFeedParser extends BaseFeedParser {

    static final String ROOT = "http://www1.sl.se/realtidws/";
    public AndroidSaxFeedParser(String feedUrl) {
        super(feedUrl);
    }

    public List<Message> parse() {
        final Message currentMessage = new Message();
        RootElement root = new RootElement(ROOT, "Hafas");
        final List<Message> messages = new ArrayList<Message>();
        Element sites = root.getChild(SITES);
        Element site = sites.getChild(SITE);

        site.setEndElementListener(new EndElementListener(){
            public void end() {
                messages.add(currentMessage.copy());
            }
        });

        site.getChild(NUMBER).setEndTextElementListener(new EndTextElementListener(){
            public void end(String body) {
                currentMessage.setNumber(body);
            }
        });

        site.getChild(NAME).setEndTextElementListener(new EndTextElementListener(){
            public void end(String body) {
                currentMessage.setName(body);
            }
        });

        try {
            Xml.parse(this.getInputStream(), Xml.Encoding.UTF_8, root.getContentHandler());
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
        return messages;
    }
} 
```

上述类扩展的 BaseFeedParser 如下所示：

```
public abstract class BaseFeedParser implements FeedParser {

    // names of the XML tags
    static final String SITES = "Sites";
    static final  String SITE = "Site";
    static final  String NUMBER = "Number";
    static final  String NAME = "Name";

    private final URL feedUrl;

    protected BaseFeedParser(String feedUrl){
        try {
            this.feedUrl = new URL(feedUrl);
        } catch (MalformedURLException e) {
            throw new RuntimeException(e);
        }
    }

    protected InputStream getInputStream() {
        try {
            return feedUrl.openConnection().getInputStream();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

我这样调用解析器：

```
AndroidSaxFeedParser parser = new AndroidSaxFeedParser("https://api.trafiklab.se/sl/realtid/GetSite?stationSearch=Slussen&key=7c4434c36d394e0c99396b8d1c69d9c4");
List<Message> messages = parser.parse(); 
```

（我不包括 Message 类，因为问题不应该存在，它永远没有机会处理消息）

**问题**

AndroidSaxFeedParser 中的所有侦听器都没有听到任何声音。当我在其中放置断点时，它们永远不会被触发。我看到 Elements 站点和站点被正确拾取（我可以在变量中看到相关数据）。它运行到最后的 Xml.parse() 行，该行正确执行但返回空白结果。

有什么想法我哪里出错了吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:33:18.200

我尝试按照 IBM 教程进行操作，但发现它是徒劳的。

最后，我找到了一个新示例并编写了本教程，它解析 RSS 提要，但相同的原则适用于任何 XML。

[http://droidapp.co.uk/?p=166](http://droidapp.co.uk/?p=166)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:33:22.653

好吧，我无法让它与 Android 的 SAX 解析器一起工作，所以我改用了 XmlPullFeedParser 类，同样根据[IBM 的示例](http://www.ibm.com/developerworks/opensource/library/x-android/)。这没有任何问题。便宜的解决方案，但它必须这样做。

I'd post the code, but while testing it I also switched to a different XML call so the parsing is different from the above.

# asp.net-mvc - 从控制器动态渲染动作 - MVC

> ID：10574875
> 
> 赞同：0
> 
> 时间：2012-05-13T20:15:03.503
> 
> 标签：asp.net-mvc, razor, controller, action, html-helper

我正在尝试在我的 MVC 控制器中编写一些代码，这些代码将动态调用另一个控制器操作并将其呈现为字符串。基本上我正在尝试使用可用于剃刀视图的 @Html.Action() 辅助方法。

然而，控制器中的 HtmlHelper 似乎无法访问 Action 方法来调用控制器操作并输出字符串。

有谁知道我如何将部分视图动态呈现为字符串，然后将该字符串添加到内容结果中？

我不想在 razor 视图中执行任何此类逻辑，因为它是完全动态的，并且 HTML 可以根据用户在数据库中设置的某些配置完全更改。这意味着我可能想要调用许多不同的控制器操作，获取字符串并将其附加到内容结果中。

人们可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:03:57.970

您可以使用以下方法（[取自此处](http://craftycodeblog.com/2010/05/15/asp-net-mvc-render-partial-view-to-string/)）：

```
protected string RenderPartialViewToString(string viewName, object model)
{
    if (string.IsNullOrEmpty(viewName))
        viewName = ControllerContext.RouteData.GetRequiredString("action");

    ViewData.Model = model;

    using (StringWriter sw = new StringWriter()) {
        ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
        ViewContext viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
        viewResult.View.Render(viewContext, sw);

        return sw.GetStringBuilder().ToString();
    }
} 
```

另一种可能性是呈现一个视图，您可以在其中调用自定义的 Html 辅助扩展方法，您可以在其中使用`Html.Action`：

```
public static IHtmlString MyMethod(this HtmlHelper html)
{
    // you could use html.Action("someAction", "someController") here
    ...
} 
```

# cakephp - CakePHP 2.x - 将数据重定向到其他视图

> ID：10574881
> 
> 赞同：0
> 
> 时间：2012-05-13T20:15:54.957
> 
> 标签：cakephp, cakephp-2.1

如何将数据从控制器发送到其他视图？

```
function index() 
{
    if(!empty($this->data))
    {
                $projects = $this->Hour->getProjectsByDate($this->data);
                **//here I have to redirect $projects to another view.** 
    }
    $this->set('projects', $this->Project->find('list', array('conditions' => 
            array('Project.active' => true)))); 
} 
```

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T20:41:25.243

尝试在你之后添加这个`$this->set('projects', $this->Project->find('list', array('conditions' => array('Project.active' => true))));`：

`$this->render('whatever view you want');`

在渲染不同的视图之前不要忘记设置变量：

```
function index() 
{
    if(!empty($this->data))
    {
                $projects = $this->Hour->getProjectsByDate($this->data);
                **//here I have to redirect $projects to another view.**
                  //You should set your variables first before you render a different view: 
              $this->set('projects', $this->Project->find('list', array('conditions' => 
            array('Project.active' => true)))); 

              //Then render a different view
              $this->render('some other view');

    }

} 
```

# objective-c - 如何在 iPhone 上增加 TCP“接收窗口”

> ID：10574887
> 
> 赞同：0
> 
> 时间：2012-05-13T20:16:23.203
> 
> 标签：objective-c, c, sockets, tcp

我似乎只能接收 8k 字节的最大流大小。在那之后就废了。我怎样才能放大这个？谢谢

```
 host = gethostbyname("xxx"); 

    memcpy(&(sin.sin_addr), host->h_addr, host->h_length);
    sin.sin_family = host->h_addrtype;
    sin.sin_port = htons(4000);

    s = socket(AF_INET, SOCK_STREAM, 0);
    hConnect = connect(s, (struct sockaddr*)&sin, sizeof(sin));

    char buffer[8000];// tried setting higher,  doesn't change anything
    memset(buffer, '\0', 8000);
    recv(s, buffer, sizeof(buffer), 0); // <------8k max,  need 64k 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:39:15.910

这是读取 64KiB 的代码：

```
char* buffer = malloc(65536);
int len = 0;
while (len < 65536)
{
    int rc = recv(s, buffer + len, 65536 - len, 0);
    if (rc == 0)
        break; // connection closed
    else if (rc > 0)
        len += rc;
    else if (errno != EINTR)
    {
        // handle error
        break;
    }
} 
```

# php - 在 js 脚本末尾调用 php 脚本

> ID：10574889
> 
> 赞同：-6
> 
> 时间：2012-05-13T20:16:58.670
> 
> 标签：php, javascript, ajax

我想知道如何从 javascript 调用 php 脚本，我知道您打算使用 AJAX，但我无法让它工作。

我有一个 html 中的联系我表单，onClick 会激活一个 JavaScript 脚本，该脚本验证输入到不同字段中的值。

如果一切都有效，我希望它调用一个名为 mail.php 的 php 脚本，该脚本会发送一封电子邮件。

html、javascript 和 php 脚本都可以工作，只是这一点我不确定。

形式：

```
 <form name="mail" id="mail" method="post">
        <textarea class="message" name="message" id="message">Input message to send here.</textarea>
          <div class ="type">
          <h2>Contact</h2><br /><br />
          <h3>Name</h3><br />
          <h3>Email</h3><br />
          <h3>Subject</h3><br />
          <div class="text-boxes">
             <input type="text" class="input-text" name="name" id="name"/><br /><br />
             <input type="text" class="input-text" name="email" id="email"/><br /><br />
             <input type="text" class="input-text" name="subject" id="subject"/><br /><br />
          </div>
          <div class="submit">
             <input type="image" src="images/submit.gif" alt="Submit button" onClick="validate(this.form)"/>
          </div>
     </form> 
```

提交时，表单调用 js 脚本。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T20:18:59.833

你应该`submit`表格。（或使用 JavaScript 验证表单*然后*提交）

```
<form id="email_form">
    <input name="name">
    <input type="submit" id="submit_btn">
</form> 
```

然后`mail.php`会得到信息，你可以在那里做任何你想做的事情。

## 添加

`form`在 JavaScript 中提交：

```
document.querySelector("#submit_btn").addEventListener("click",function(e){
    var form = document.querySelector("#email_form");  //Select the form
    form.submit();                            //Submit it (very self-explanatory)
    e.preventDefault();
},false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T20:41:52.373

您的表单标签缺少 action 属性：

```
<form name="mail" id="mail" method="post" action="mail.php"> 
```

没有它，表单将不会提交到任何地方！

请注意，`mail.php`应该与您的`html`文件位于同一文件夹中。

* * *

此外，要使用 JavaScript 提交，在您验证所有字段后，您可以：

```
document.forms["mail"].submit(); 
```

**笔记：**

如果您发布您的 javascript 和 PHP，可以提供更好的帮助！

# css - 引导下拉问题

> ID：10574891
> 
> 赞同：-4
> 
> 时间：2012-05-13T20:17:07.763
> 
> 标签：css, twitter-bootstrap

嘿，我正在尝试在此处的文本导航栏中实现引导下拉菜单[http://22twenty.com/V2](http://22twenty.com/V2) 下拉菜单并非应有的“下降”

我也喜欢让下划线不在插入符号下方，只是不知道如何阻止它。

我希望有人能帮帮忙

谢谢

丹佛

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T20:27:48.967

更改这些行的顺序：

```
<script src="js/dropdown.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

到：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="js/dropdown.js" type="text/javascript"></script> 
```

jquery 文件应该在引导 javascript 文件之前加载。

# c++ - 内存访问冲突

> ID：10574892
> 
> 赞同：0
> 
> 时间：2012-05-13T20:17:19.003
> 
> 标签：c++

我想知道这段代码是如何产生内存访问冲突的？

```
{
   Vector3f *a = new Vector3f [10];
   Vector3f *b = a;
   b[9] = Vector3f (2,3,4);
   delete[] a;
   a = new Vector3f [10];
   b[4] = Vector3f (1,2,3);
   delete[] a;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T20:19:18.433

因为仍然指向与调用时`b`相同的数组，然后您尝试将该内存与.`a``delete[] a``b[4]`

```
Vector3f *a = new Vector3f [10]; // a initialised to a memory block x
Vector3f *b = a;                 // b initialised to point to x also
b[9] = Vector3f (2,3,4);         // x[9] is assigned a new vector
delete[] a;                      // x is deallocated
a = new Vector3f [10];           // a is assigned a new memory block y
b[4] = Vector3f (1,2,3);         // x is used (b still points to x)
                                 // x was deallocated and this causes segfault
delete[] a;                      // y is deallocated 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T20:19:32.517

这行：

```
b[4] = Vector3f (1,2,3); 
```

`b`依然指着旧的，解脱了`a`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-13T20:19:48.833

`b`指向第一个删除的`a`（即`b`不指向*新分配* `a`的），因此当您`b`在删除它指向的内存后尝试再次使用时，您正在调用未定义的行为，在这种情况下，它会给您一个内存访问冲突。

# android - Android - 如何在 ACRA 中判断错误是否发生在模拟器上？

> ID：10574895
> 
> 赞同：0
> 
> 时间：2012-05-13T20:17:47.620
> 
> 标签：android, acra

我收到一些关于错误的奇怪报告，我想知道它是否在测试期间发生。

我在哪里查看我的 ACRA 报告以查看设备是否是模拟器？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:31:38.437

查看 PHONE_MODEL 和 PRODUCT 列，应该为模拟器设置为“google_sdk”。检查构建列以获取更多详细信息。

# wordpress - 获取按多种分类类型过滤的分类链接

> ID：10574899
> 
> 赞同：0
> 
> 时间：2012-05-13T20:18:27.293
> 
> 标签：wordpress, taxonomy

我已经建立了一个有两个“部门”的网站，比如说*'shoes'*和*'caps'*。网站顶部有两个链接，通过这些链接人们可以切换部门，并且根据他们所在的部门，样式和内容有些不同，有些部分相同，有些则不同。对于帖子，这两个部门都是分类法，因此新帖子可以属于其中一个，也可以属于两者。

还有一个分类*“品牌”*。

我现在想要的是获取部门*“鞋子”中使用的所有**“品牌”*的列表。

 *我知道您可以使用`wp_list_categories`or`get_terms`之类`get_the_term_list`的函数来获取术语列表。但是有可能做我想做的事吗？

我希望我的问题足够清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:25:41.983

这是很有可能的。如果您有共同的品牌，您可能需要自定义查询。如果品牌之间没有重叠，我建议您将分类法分为 shoe_brands 和 cap_brands，以便您可以使用内置函数/查询。*

# javascript - 将函数应用于javascript中的对象

> ID：10574900
> 
> 赞同：3
> 
> 时间：2012-05-13T20:18:49.647
> 
> 标签：javascript, jquery, function, object

请原谅初学者的问题，但我很难解决这个问题。使用 jquery 我可以做这样的事情：

```
$.each(array, testF); 

function testF(){
    console.log(this.name);  
} 
```

使用 $.each 我可以将数组传递给函数 testF，并访问包含在数组每一行中的对象。但是当我尝试做类似的事情时：

```
array[0].testF() 
```

我收到一条错误消息，指出该对象没有方法“testF”。我想知道是否有人可以解释这里发生了什么......为什么 jQuery 一个有效，但第二个无效。再次，请原谅初学者的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T20:21:37.660

*   `$.each(array, testF)`调用绑定到`testF(i, elem)`的数组中的每个元素。`this``elem`
*   `array[0].testF()`尝试调用`testF()`存在于`array[0]`

相当于什么`$.each()`是`testF.call(array[0], 0, array[0])`或者因为你不使用你可以简单的参数`testF.call(array[0])`

有关. [_](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call) _[`.call()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T20:22:29.107

这样做：

```
testF.call( array[0] ); 
```

`call`函数方法使您能够设置函数调用的上下文（值`this`）。因此，每当您想调用具有自定义上下文的函数时`fn();`，请不要使用`fn.call( context );`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T20:24:15.307

这是因为对象数组 [0] 没有函数 testF，您需要先声明它。像这样：

```
array[0].testF = function testF()
{
    console.log(this.name);
}

array[0].testF(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T20:24:48.110

当你写 时`array[0].testF()`，这意味着：

*   查找变量`array`
*   取索引下的元素`"0"`
*   在*其中*，取索引下的元素`"testF"`
*   并将其作为函数执行（还将特殊变量分配`this`给`array[0]`）

但是，在大多数情况下，`array[0]`不会有一个属性`testF`定义。如果您要事先执行此操作：

```
array[0].testF = testF; 
```

那么它会起作用。

# ruby-on-rails-3 - 基于 Rails jQuery + Coffeescript 的资产管道与 XHR 请求

> ID：10574903
> 
> 赞同：0
> 
> 时间：2012-05-13T20:19:16.403
> 
> 标签：ruby-on-rails-3, coffeescript, asset-pipeline

获取最新的 Rails (3.2) 与 3.0 相比，我们有三个主要变化：

1.  jQuery 作为默认的 js 框架，**没有**用于控制器内 xhr 响应生成的 html-helpers

2.  我们有预编译资产的资产管道思想，其中生产环境默认**不**使用咖啡脚本和其他资产宝石

3.  由于 no.1，默认方式是将 XHR 响应提取到 js-views

所以，有一个问题 - 如果我想使用 Coffee（或另一个 JS 引擎），我不能按照上面 rails env 中的所有默认值在生产中使用它。

现在，我使用咖啡来保持代码清洁并在生产中为 XHR js-views 启用咖啡 gem，但我不确定这会如何减慢我的产品速度。

你能推荐另一种或优化的方法吗？

# c++ - 通过 SSE4 包装器比较字符串

> ID：10574905
> 
> 赞同：6
> 
> 时间：2012-05-13T20:19:18.357
> 
> 标签：c++, sse, sse4

我需要快速比较机器上支持 SSE4 的两个字符串。在不编写汇编程序插入的情况下如何做到这一点？

一些包装器就像`long long bitmask = strcmp(char* a, char* b)`是完美的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T21:07:04.883

您应该使用英特尔 SSE 内在函数，而不是使用内联汇编。

对于字符串比较，您需要 SSE4.2 内在函数：

文档在这里： http: [//software.intel.com/sites/products/documentation/doclib/stdxe/2013/composerxe/compiler/cpp-mac/GUID-6E9CFDF2-5DF6-42A4-B429-0E2CD441342E.htm](http://software.intel.com/sites/products/documentation/doclib/stdxe/2013/composerxe/compiler/cpp-mac/GUID-6E9CFDF2-5DF6-42A4-B429-0E2CD441342E.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-03T14:05:48.300

使用 Agner Fog 的 asmlib。 [http://www.agner.org/optimize/#asmlib](http://www.agner.org/optimize/#asmlib)

他已经不厌其烦地为您编写汇编代码，包括使用 SSE4.2 指令。使用他的功能`A_strcmp`（或不区分大小写的版本`A_stricmp`）。

有趣的是，使用内在函数的方法如何比较性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T07:42:01.437

这是一篇关于使用 SSE 4.2 提升字符串操作的好文章：http: [//www.strchr.com/strcmp_and_strlen_using_sse_4.2](http://www.strchr.com/strcmp_and_strlen_using_sse_4.2)

# java - 在 Java 中抛出自定义异常

> ID：10574906
> 
> 赞同：14
> 
> 时间：2012-05-13T20:19:19.050
> 
> 标签：java

为什么我在尝试抛出它们时需要用`try`/包装我抛出的自定义异常`catch`，但我不必为通用异常这样做？就像在示例中一样，我的`Exception`子类：

```
public class MyException extends Exception {
    public MyException(String msg) {
        super(msg);
    }
} 
```

抛出异常：

```
public class Exe {

    private static void testex(String test) {
        if (null!=test) {
            throw new UnsupportedAddressTypeException();
        } else {//Removing try/catch block results in compile failure
          try {
            throw new MyException("message");
          } catch (MyException e) {
            e.printStackTrace();
          }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-13T20:24:05.047

UnsupportedAddressTypeException 是 RuntimeException 的子类，来自 JavaDoc：

> RuntimeException 是可以在 Java 虚拟机正常运行期间抛出的那些异常的超类。
> 
> 方法不需要在其 throws 子句中声明任何可能在方法执行期间抛出但未被捕获的 RuntimeException 子类。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-13T20:22:11.423

如果您的异常扩展了 java.lang.Exception，您必须捕获它（或重新抛出）。如果它扩展了 java.lang.RuntimeException，则不需要这样做。您会发现所有标准异常也是如此。

**编辑**更改了单词**must not** to **not required to**

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-13T20:21:11.703

你的静态方法应该声明

```
private static void testex(String test) throws MyException 
```

如果您希望该方法将其抛出（而不是在内部捕获和处理它）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T20:40:08.477

来自[Java 教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/catchOrDeclare.html)：

> 有效的 Java 编程语言代码必须遵守 Catch 或 Specify Requirement。这意味着可能引发某些异常的代码必须包含在以下任一内容中：
> 
> *   捕获异常的 try 语句。try 必须为异常提供处理程序，如捕获和处理异常中所述。
>     
>     
> *   一种方法，指定它可以抛出异常。该方法必须提供列出异常的 throws 子句，如指定方法引发的异常中所述。
>     
>     
> 
> 未能遵守 Catch 或 Specify Requirement 的代码将无法编译。并非所有例外都受“捕获或指定要求”的约束。
> 
> [...]
> 
> 运行时异常不受捕获或指定要求的约束。运行时异常是由 RuntimeException 及其子类指示的异常。

# filesystems - 是否有与 Amazon S3 等效的开源软件？

> ID：10574909
> 
> 赞同：25
> 
> 时间：2012-05-13T20:19:40.363
> 
> 标签：filesystems, amazon-s3, storage, bucket

是否有与在 Linux 下运行的 Amazon S3 存储服务等效的开源软件？

例如基于存储桶的文件系统，例如：

*   存储文件 -> 获取唯一 ID
*   通过唯一 ID 访问文件
*   按唯一 ID 删除文件
*   按时间戳查询文件
*   ...

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-13T21:01:35.380

[Riak CS](http://basho.com/products/riakcs/)是一种新的 Amazon S3 API 兼容产品，适用于您自己的云。它不是开源的，但它可能是您考虑的可行替代方案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-13T20:26:37.580

OpenStack 也做[对象存储](https://www.openstack.org/software/releases/victoria/components/swift)。

还有[桉树](https://github.com/eucalyptus/eucalyptus)，但那似乎已经死了。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-14T08:39:06.527

感谢您的回答，很抱歉没有弄清楚我的问题。

目前我有大约 4TB 的图像文件分布在 3 台服务器上。我的应用程序随机传播这些文件。该文件位于哪个服务器上，存储在 mysql 数据库中（复制到这些服务器中的每一个）。图像文件由 nginx 和 php 直接从这些服务器（无代理）提供。当其中一台服务器崩溃时，我没有故障转移和冗余。当然我可以从备份中恢复任何东西，但是每台服务器上 1 到 1.5TB 的数据需要很长时间才能恢复。

经过一番研究，我发现[MogileFS](http://code.google.com/p/mogilefs/)是最佳解决方案。

# .net - 是否有在 AnyCPU 下工作的 .NET 视频播放器？

> ID：10574910
> 
> 赞同：2
> 
> 时间：2012-05-13T20:19:42.577
> 
> 标签：.net, video, com, media-player

WindowsMediaPlayer 必须作为 32 位 COM 对象或 64 位 COM 对象添加。似乎没有任何方法可以包含它，因此它可以在两种配置下运行。

有没有可以同时运行 32 位和 64 位的播放器？我们必须两者都做，因为我们是 Office 插件，而且 Office 2010 有 32 位和 64 位版本，所以我们在匹配位中调用。

谢谢 - 戴夫

# java - Java 基本时序

> ID：10574914
> 
> 赞同：1
> 
> 时间：2012-05-13T20:20:04.103
> 
> 标签：java, timing

目前我的项目没有时间安排并且令人满意，但如果我有时间安排会更干净。我想拥有它，所以在我宣布任何需要之后，我可以执行以下操作：

```
if (timer == 2000) {
    System.out.println("2 seconds have passed since "timer" was declared!");
} 
```

我还没有看到那么多关于这个的。抱歉，如果我遗漏了什么。我只是在寻找最好的方法来做到这一点。

**编辑**
我被问到为什么我需要这个的更多细节......顺便说一句，这是一个僵尸游戏

```
while(!Display.isCloseRequested()){
    if (whatever == 2 seconds){    //I obviously know a don't right the word seconds next the number 2
        for(int z = 0; z < 2; z++){
            SpawnaZombieAt(leftcorner,20,speed);
        }
     }
} 
```

如果我不够清楚，我正在尝试启动某种计时器。然后每 2 秒左右会再产生 2 个僵尸

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T20:30:12.063

您在寻找`System.currentTimeMillis()`或`System.nanoTime()`吗？第一个是对应于 UTC 的低精度计数器，而后者是一个高精度计时器，可用于确定经过的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T20:27:57.707

如果要在特定延迟后启动特定操作，可以使用[`ScheduledExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)- 例如：

```
ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
scheduler.schedule(new Runnable() {
    public void run() {
        System.out.println("2 seconds have passed since this action was scheduled!");
    }
}, 2, TimeUnit.SECONDS); 
```

它会在 2 秒后打印出你的句子。

如果您正在使用秒表，则[此问题的答案提出了几种选择](https://stackoverflow.com/questions/8255738/is-there-a-stopwatch-in-java)。

**编辑**

例如，在您进行编辑之后，该`ScheduledExecutorService`方法[`scheduleAtFixedRate`可以](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleAtFixedRate%28java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit%29)让您每 2 秒运行一次特定操作。

# mobile - 是否可以完全自定义 Sench 选项卡面板？

> ID：10574915
> 
> 赞同：1
> 
> 时间：2012-05-13T20:20:06.590
> 
> 标签：mobile, sencha-touch, themes, extjs, sencha-touch-2

我正在考虑使用 Sencha 2 为我的网站创建一个应用程序，并且我有一个漂亮的设计需要实现。

我可以看到如何使用 Sencha 简单地更改选项卡面板的背景颜色，但该设计需要比我发现的更多的自定义。

是否可以创建一个带有自定义属性的选项卡面板，例如这个顶部的箭头？

![在此处输入图像描述](../Images/b19e9501e24bf2526949498eb1825e77.png)

如果是这样，你怎么能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:35:28.900

我不认为你可以得到它`tabpanel`。

但是对于像`overlays`..这样的浮动面板，这种箭头是可能的

从 Sencha Docs 查看这个示例。

[http://docs.sencha.com/touch/2-0/#!/example/overlays](http://docs.sencha.com/touch/2-0/#!/example/overlays)

# jquery - 如何使用 authlogic 和 jQuery Validation 插件验证密码？

> ID：10574918
> 
> 赞同：1
> 
> 时间：2012-05-13T20:21:00.813
> 
> 标签：jquery, ruby-on-rails-3, jquery-plugins, authlogic

我使用 jQuery Validation 插件进行验证，`remote: "/valid_password.json"`用于检查服务器上提交的密码是否正确。问题是在服务器上密码是加密的（使用 Authlogic），所以当我将密码参数与存储的密码进行比较时，它们并不相同。如何使用 JQuery Validation 插件验证密码？

这是控制器中的代码：

```
def valid_password
    username = params[:user_session][:username]
    password = params[:user_session][:password]
    @user = User.find_by_username(username)
    if @user.password == password
      @password_ok = true
    end
    respond_to do |format|
      format.json { render :json => @password_ok ? "true" : "false"}
    end
end 
```

编辑：搜索和阅读后，我试过这个：（仍然没有成功）

```
def valid_password
    username = params[:username]
    password = params[:user_session][:password]
    @user = User.find_by_username(username)
    puts "TEST" + @user.crypted_password
    @password = Authlogic::CryptoProviders::Sha512.encrypt(password)
    puts "TEST"  + @password
    if @password == @user.crypted_password
      @password_ok = true
    end

    respond_to do |format|
      format.json { render :json => @password_ok ? "true" : "false"}
    end
end 
```

两种`puts`方法给出不同的结果。我想我应该使用存储的 password_salt 来正确加密，但我不知道怎么做。最初我为“用户名”使用了错误的参数，但现在已修复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:34:32.323

现在它起作用了！

在加密之前，我必须将 password_salt 添加到密码中：

```
def valid_password
  username = params[:username]
  password = params[:user_session][:password]
  @user = User.find_by_username(username)
  password = "#{password}#{@user.password_salt}"
  @password = Authlogic::CryptoProviders::Sha512.encrypt(password)
  if @password == @user.crypted_password
    @password_ok = true
  end

  respond_to do |format|
    format.json { render :json => @password_ok ? "true" : "false"}
  end
end 
```

# android - 使用 Restlet 库从 Android 调用 Drupal REST 服务时丢失用户

> ID：10574921
> 
> 赞同：1
> 
> 时间：2012-05-13T20:21:11.860
> 
> 标签：android, drupal, restlet, drupal-services

我正在从 Android 应用程序向 Drupal 站点进行 REST 调用。在 Drupal 站点上，我使用 Services 3.0 模块开发 REST 服务，在 Android 上，我使用 Java 库 Restlet 2.0。

首先我调用服务用户/登录，并使用收到的会话 ID 和会话名称将身份验证 cookie 注入到第二个 REST 调用。

但是，当我查看服务的 Drupal 日志时，REST 服务调用基本上有 4 个条目：

1.  服务器信息主要对象
2.  控制器
3.  传递的参数
4.  结果

条目 1-3 仍然使用登录用户捕获，但条目 4 已经作为匿名登录，并且服务实现也知道没有登录用户（即变量 $GLOBALS['user'] 没有值）。

“cookie 注入”是进行经过身份验证的调用的正确技术吗？如果是，如何将登录用户保留在 Drupal 端？

# php - 谷歌地图。通过坐标获取最近的

> ID：10574929
> 
> 赞同：2
> 
> 时间：2012-05-13T20:22:18.850
> 
> 标签：php, jquery, database, maps, coordinates

我有一个 MySQL 数据库，其中包含数千个带有坐标的条目。

条目如下所示：id、dt、img、long、lat

现在，我列出了 mysql 的前 20 名。但是如何获得最接近给定点的 20 个条目？给定点是下面代码中的“中心”。

图片

```
<script type="text/javascript">
  $(document).ready(function(){
    var myMarkers = {"markers": [   
    <?php 
      $query="SELECT id, dt, img, long, lat FROM places LIMIT 20";
      $result=mysql_query($query);
      $num=mysql_numrows($result);
      $i=0;
      while ($i < $num) {
        $row = mysql_fetch_array($result);
        $pl_id = $row[0];
        $pl_dt = $row[1];
        $pl_img = $row[2];
        $pl_longitud = $row[3];
        $pl_latitud = $row[4];
        $pres = "Text is coming.";
    ?>
    {"latitude": "<?php echo $pl_latitud ?>", "longitude":"<?php echo $pl_longitud ?>", "icon":"<?php echo $pl_img ?>", "baloon_text":"<?php echo $pres ?>"},
    <?php
        $i++;
      }
    ?>
    ]};
    $("#map").mapmarker({ zoom        : 10,
                          center      : '<?php echo $pl_latitud; ?>, <?php echo $pl_longitud; ?>',
                          markers : myMarkers
                        });
  });
</script> 
```

# c++ - 用 C++ 编译 SQlite3

> ID：10574933
> 
> 赞同：19
> 
> 时间：2012-05-13T20:22:49.897
> 
> 标签：c++, sqlite, compilation, g++

我这样编译代码：

```
g++ main.cpp -I sqlite3 
```

其中 sqlite3 是一个文件夹，其中包含我从 sqlite-amalgamation-3071100.zip 收到的源文件，-I 是包含源的标志。

该存档包含：shell.c、sqlite3.c、sqlite3.h、sqlite3ext.h。

这是我收到的：

```
undefined reference to `sqlite3_open' 
```

该程序仅包含#include 和函数 sqlite3_open(...); 的调用。

* * *

如果我制作“sudo apt-get install libsqlite3-dev”并使用命令编译程序，我可以编译一切正常

```
g++ main.cpp -lsqlite3
```

但我想解决这个问题，因为我不想在另一台计算机上安装一些库，我无权访问！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-21T02:57:25.160

*   Step1：通过gcc将sqlite3.c编译成**sqlite3.o**
*   第二步：用g++编译你的c++代码和**sqlite3.o**

我用于 sqlite shell 和 c++ api 测试的 makefile：

```
 1 CXX = g++
  2 cc = gcc
  3 
  4 LIB = -lpthread -ldl
  5 BIN = sqlite apiTest
  6 
  7 all : $(BIN)
  8 sqlite : sqlite3.c shell.c
  9     $(cc) -o $@ $^ $(LIB) 
 10 apiTest : apiTest.cpp sqlite3.o
 11     $(CXX) -o $@ $^ $(LIB) 
 12 sqlite3.o : sqlite3.c
 13     $(cc) -o $@ -c $^
 14 
 15 clean :
 16     rm -f $(BIN)
 17 
 18 .PHONY: all, clean 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T20:39:51.837

[从http://www.sqlite.org/download.html](http://www.sqlite.org/download.html)下载 sqlite 合并。

1.  包括对 sqlite 的任何引用作为 extern "C"，因为 sqlite 是用 C 编写的。

2.  使用“gcc -c sqlite3.c”创建 sqlite 库。

3.  使用“g++ main.c sqlite3.o”将您的程序链接到新创建的库

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T13:05:34.570

您*将*需要`sqlite3`使用`gcc`. 我试过`g++`了，结果是数百个错误和警告。

也许`sqlite3`应该以这样一种方式编写，它可以使用 C++ 编译器进行编译。C++ 编译器的选择和强制类型要好​​得多，而且比 C 编译器要好得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-02T05:30:50.467

以下在 Ubuntu 上对我有用：

gcc -o test test.c sqlite3.c -lpthread -idl

1.  我在源文件（test.c）中声明了#include“sqlite3.h”#include 不起作用。
2.  gcc -o test test.c sqlite3.c -lpthread -idl

参考如下：

[https://www.sqlite.org/draft/howtocompile.html](https://www.sqlite.org/draft/howtocompile.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-14T10:36:28.890

在带有 MinGW32 的 Windows 上，通过以下方式编译动态链接库：

```
gcc -shared sqlite3.c -o sqlite3.dll 
```

# c# - ebay FindingAPI 如何查找给定日期范围内指定的项目

> ID：10574936
> 
> 赞同：6
> 
> 时间：2012-05-13T20:22:59.803
> 
> 标签：c#, ebay-api

我正在使用此代码部分使用 ebay FindingAPI 查找拍卖类型的所有项目。现在我想过滤那些在指定日期（例如：2 天）内开始的项目。如何添加此首选项？

检查此[链接](http://www.ebay.com/sch/i.html?_nkw=gruen%20-sara%20-quartz%20-embassy%20-bob%20-robert%20-elephants%20-adidas&_sacat=0&_odkw=gruen%20-sara%20-quartz%20-embassy%20-bob%20-robert%20-elephants%20-adidas&LH_Auction=1&_ipg=50&_sadis=200&LH_SALE_CURRENCY=0&_ftrt=903&_oexkw=sara%20quartz%20embassy%20bob%20robert%20elephants%20adidas%5C&LH_Time=1&_ftrv=48&_LH_Time=1&_adv=1%5C%7C1&_sop=12&_osacat=0&_dmd=1&_okw=gruen%5C)和首选项类型。这是代码部分：

```
IPaginationInput pagination = new PaginationInput();

pagination.entriesPerPageSpecified = true;
pagination.entriesPerPage = 100;
pagination.pageNumberSpecified = true;
pagination.pageNumber = curPage;
request.paginationInput = pagination;

ItemFilter if1 = new ItemFilter();
ItemFilter if2 = new ItemFilter();
if1.name = ItemFilterType.ListingType;
if1.value = new string[] { "Auction" };

ItemFilter[] ifa = new ItemFilter[1];
ifa[0] = if1;
request.itemFilter = ifa;

FindItemsByKeywordsResponse response = client.findItemsByKeywords(request);

foreach (var item in response.searchResult.item)
{

    tw.WriteLine(item.viewItemURL.ToString());
    links.Add(item.viewItemURL.ToString());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:40:44.673

这应该可以让你大致得到你需要的东西。将用于比较的两个日期设置为您想要的任何日期。

```
IPaginationInput pagination = new PaginationInput();

                    pagination.entriesPerPageSpecified = true;
                    pagination.entriesPerPage = 100;
                    pagination.pageNumberSpecified = true;
                    pagination.pageNumber = curPage;
                    request.paginationInput = pagination;

                    ItemFilter if1 = new ItemFilter();
                    ItemFilter if2 = new ItemFilter();
                    if1.name = ItemFilterType.ListingType;
                    if1.value = new string[] { "Auction" };

                    ItemFilter[] ifa = new ItemFilter[1];
                    ifa[0] = if1;
                    request.itemFilter = ifa;

                    FindItemsByKeywordsResponse response = client.findItemsByKeywords(request);

                    foreach (var item in response.searchResult.item)
                    {
                         // EDIT
                         if (item.listingInfo.startTime.CompareTo(DateTime.UtcNow) > -1) // -1 is earlyer; 0 is same; +1 is later then
                         {
                           if (item.listingInfo.startTime.CompareTo(DateTime.UtcNow.AddDays(-2)) == -1 )
                           {
                               // You have an Item that was started between now and two days ago.
                               // Do something

                           }
                        }
                        // END EDIT

                        tw.WriteLine(item.viewItemURL.ToString());
                        links.Add(item.viewItemURL.ToString());
                    } 
```

# google-maps - Google maps api v3 报告关键错误

> ID：10574943
> 
> 赞同：2
> 
> 时间：2012-05-13T20:23:45.010
> 
> 标签：google-maps, google-maps-api-3

我一直在运营一个网站，为婚礼客人提供指导，帮助他们在接待处附近寻找酒店和 B&B。几个月来 API 没有问题，我的 homeowrk 和代码是可靠的并且可以正常工作。

今天晚上登录，我得到一个无效的密钥错误。我做了以下事情：

*   检查我没有超过每天 25.000 个请求的“宽限”限制。事实上，婚礼直到今年晚些时候才举行，自 2 月以来总共有 124 个请求。
*   刷新密钥并重新加载。没有喜悦。
*   尝试重新设置引荐来源网址，但怀疑这会产生任何影响，正如预期的那样，它没有！

其他人有类似的问题，如果是这样，你是如何克服的？试图想出新的想法来解决这个问题。很茫然，直到今晚它都工作得很好！

一切顺利，

-布伦丹

代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"  dir="ltr" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Accomodation</title>
<link rel='stylesheet' href='rsvp-load-styles.css' type='text/css' media='all' />
<link rel='stylesheet' id='colors-css'  href='rsvp-colors-fresh.css' type='text/css' media='all' />
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js'></script>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=...&sensor=true">
    </script>
    <script type="text/javascript">
    //<![CDATA[

    var customIcons = {
      Blue: {
        icon: 'Blue.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      },
      Red: {
        icon: 'Red.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      }
    };

      // arrays to hold copies of the markers and html used by the side_bar 
      // because the function closure trick doesnt work there 
      var gmarkers = []; 

    function load() {
            var dunbrody = new google.maps.LatLng(52.241808,-6.945248);
            var myOptions = {
                center: dunbrody,
                zoom: 10,
                mapTypeId: google.maps.MapTypeId.SATELLITE
            };

            var map = new google.maps.Map(document.getElementById("map_canvas"),
            myOptions);
             var infoWindow = new google.maps.InfoWindow;

        // Change this depending on the name of your PHP file       
        downloadUrl("markers.php", function(data) {
            var xml = data.responseXML;
            var markers = xml.documentElement.getElementsByTagName("marker");
            for (var i = 0; i < markers.length; i++) {
                var name = markers[i].getAttribute("name");
                var point = new google.maps.LatLng(
                    parseFloat(markers[i].getAttribute("lat")),
                    parseFloat(markers[i].getAttribute("lng")));
                var type = markers[i].getAttribute("type");
                var html = "<b>" + name + "</b> <br/>";
                var icon = customIcons[type] || {};
                var marker = new google.maps.Marker({
                map: map,
                position: point,
                icon: icon.icon,
                shadow: icon.shadow
            });
          bindInfoWindow(marker, map, infoWindow, html);
              // save the info we need to use later for the side_bar
            gmarkers.push(marker);
        }
      });
      }

          function bindInfoWindow(marker, map, infoWindow, html) {
            google.maps.event.addDomListener(marker, 'click', function() {
            infoWindow.setContent(html);
            infoWindow.open(map, marker);
            });
        }

            function downloadUrl(url, callback) {
                var request = window.ActiveXObject ?
                new ActiveXObject('Microsoft.XMLHTTP') :
                new XMLHttpRequest;

                request.onreadystatechange = function() {
                if (request.readyState == 4) {
                    request.onreadystatechange = doNothing;
                    callback(request, request.status);
                }
            };

                request.open('GET', url, true);
                request.send(null);
            }

            function myclick(i) {
                google.maps.event.trigger(gmarkers[i], "click");
            }

            function doNothing() {}

      //]]>
      </script>
</head>
<body class="wp-admin no-js  options-general-php" onload="load()" onUnload="GUnload()"><div id="map_canvas" style="width: 100%; height: 50%;"></div><div id="details" style="width: 100%; height: 50%;overflow:scroll;"><table><tr><th align="left" valign="top" colspan="2"><b>Dunbrody Country House Hotel</b></th></tr><tr><td  align="right" valign="top">Details:</td><td>The reception will be held here.</td></tr><tr><td  align="right" valign="top">Tel:</td><td>+353 (0)51 389 600</td></tr><tr><td  align="right" valign="top">Link:</td><td><a href="http://dunbrodyhouse.com/" target="_blank">http://dunbrodyhouse.com/</a></td></tr><tr><td  align="right" valign="top">Google Map:</td><td><a href="javascript:myclick(1-1)">[Show on Map]</a></td></tr><tr><th align="left" valign="top" colspan="2"><br></th></tr><tr><th align="left" valign="top" colspan="2"><b>Marsh Mere Lodge</b></th></tr><tr><td  align="right" valign="top">Details:</td><td></td></tr><tr><td  align="right" valign="top">Tel:</td><td>+353(0) 5138 9186</td></tr><tr><td  align="right" valign="top">Link:</td><td><a href="http://www.marshmerelodge.com/" target="_blank">http://www.marshmerelodge.com/</a></td></tr><tr><td  align="right" valign="top">Google Map:</td><td><a href="javascript:myclick(2-1)">[Show on Map]</a></td></tr><tr><th align="left" valign="top" colspan="2"><br></th></tr><tr><th align="left" valign="top" colspan="2"><b>Glendine Country House</b></th></tr><tr><td  align="right" valign="top">Details:</td><td>Also has a 2 bed cottage - sleeps 4</td></tr><tr><td  align="right" valign="top">Tel:</td><td>+353(0) 5138 9500</td></tr><tr><td  align="right" valign="top">Link:</td><td><a href="http://www.glendinehouse.com/" target="_blank">http://www.glendinehouse.com/</a></td></tr><tr><td  align="right" valign="top">Google Map:</td><td><a href="javascript:myclick(3-1)">[Show on Map]</a></td></tr><tr><th align="left" valign="top" colspan="2"><br></th></tr><tr><th align="left" valign="top" colspan="2"><b>Arthurs Rest</b></th></tr><tr><td  align="right" valign="top">Details:</td><td>Peggy Murphy arthursrest@eircom.net 
Immaculate and comfortable - ideal for families.</td></tr><tr><td  align="right" valign="top">Tel:</td><td>No: +353(0) 5138 9192</td></tr><tr><td  align="right" valign="top">Link:</td><td><a href="" target="_blank"></a></td></tr><tr><td  align="right" valign="top">Google Map:</td><td><a href="javascript:myclick(4-1)">[Show on Map]</a></td></tr><tr><th align="left" valign="top" colspan="2"><br></th></tr><tr><th align="left" valign="top" colspan="2"><b>Kilmokea House</b></th></tr><tr><td  align="right" valign="top">Details:</td><td>A member of Hidden Ireland, Kilmokea offers beautiful gardens, relaxing formal rooms and is ideal for those looking for quiet.</td></tr><tr><td  align="right" valign="top">Tel:</td><td>No: +353(0) 5138 8109</td></tr><tr><td  align="right" valign="top">Link:</td><td><a href="http://www.kilmokea.com" target="_blank">http://www.kilmokea.com</a></td></tr><tr><td  align="right" valign="top">Google Map:</td><td><a href="javascript:myclick(5-1)">[Show on Map]</a></td></tr><tr><th align="left" valign="top" colspan="2"><br></th></tr><tr><th align="left" valign="top" colspan="2"><b>The Loft Self Catering</b></th></tr><tr><td  align="right" valign="top">Details:</td><td>Peggy Murphy, Arthurstown.
Charming converted grain loft, sleeps 8 - perfect for younger groups. </td></tr><tr><td  align="right" valign="top">Tel:</td><td>No: +353 (0) 5138 9102</td></tr><tr><td  align="right" valign="top">Link:</td><td><a href="http://www.discoverireland.ie/Where-To-Stay/the-loft/60533" target="_blank">http://www.discoverireland.ie/Where-To-Stay/the-loft/60533</a></td></tr><tr><td  align="right" valign="top">Google Map:</td><td><a href="javascript:myclick(6-1)">[Show on Map]</a></td></tr><tr><th align="left" valign="top" colspan="2"><br></th></tr><tr><th align="left" valign="top" colspan="2"><b>Ann Walsh, Self Catering</b></th></tr><tr><td  align="right" valign="top">Details:</td><td>Ballytarsna, Ballycullane. From �130 4 bedroom farmhouse - sleeps 8.</td></tr><tr><td  align="right" valign="top">Tel:</td><td></td></tr><tr><td  align="right" valign="top">Link:</td><td><a href="" target="_blank"></a></td></tr><tr><td  align="right" valign="top">Google Map:</td><td><a href="javascript:myclick(7-1)">[Show on Map]</a></td></tr><tr><th align="left" valign="top" colspan="2"><br></th></tr><tr><th align="left" valign="top" colspan="2"><b>Duncannon Holiday Homes</b></th></tr><tr><td  align="right" valign="top">Details:</td><td>3 bedroom homes set in the heart of Duncannon village. Sleeps 6\. From �120 </td></tr><tr><td  align="right" valign="top">Tel:</td><td>No: +353 (0) 5138 9188</td></tr><tr><td  align="right" valign="top">Link:</td><td><a href="" target="_blank"></a></td></tr><tr><td  align="right" valign="top">Google Map:</td><td><a href="javascript:myclick(8-1)">[Show on Map]</a></td></tr><tr><th align="left" valign="top" colspan="2"><br></th></tr><tr><th align="left" valign="top" colspan="2"><b>Beachview Self Cateringeps </b></th></tr><tr><td  align="right" valign="top">Details:</td><td>Sleeps 6</td></tr><tr><td  align="right" valign="top">Tel:</td><td></td></tr><tr><td  align="right" valign="top">Link:</td><td><a href="http://www.selfcateringhomes.ie/index.php?route=showhome&pid=181#owner" target="_blank">http://www.selfcateringhomes.ie/index.php?route=showhome&pid=181#owner</a></td></tr><tr><td  align="right" valign="top">Google Map:</td><td><a href="javascript:myclick(9-1)">[Show on Map]</a></td></tr><tr><th align="left" valign="top" colspan="2"><br></th></tr><tr><th align="left" valign="top" colspan="2"><b>Coastguard Cove -3 bed</b></th></tr><tr><td  align="right" valign="top">Details:</td><td></td></tr><tr><td  align="right" valign="top">Tel:</td><td></td></tr><tr><td  align="right" valign="top">Link:</td><td><a href="http://www.daft.ie/searchshortterm.daft?id=18365" target="_blank">http://www.daft.ie/searchshortterm.daft?id=18365</a></td></tr><tr><td  align="right" valign="top">Google Map:</td><td><a href="javascript:myclick(10-1)">[Show on Map]</a></td></tr><tr><th align="left" valign="top" colspan="2"><br></th></tr><tr><th align="left" valign="top" colspan="2"><b>Rivervalley Farmhouse</b></th></tr><tr><td  align="right" valign="top">Details:</td><td>anne@rivervalleyfarmhouse.com</td></tr><tr><td  align="right" valign="top">Tel:</td><td>No: +353 (0) 5156 1354 </td></tr><tr><td  align="right" valign="top">Link:</td><td><a href="http://www.rivervalleyfarmhouse.com/" target="_blank">http://www.rivervalleyfarmhouse.com/</a></td></tr><tr><td  align="right" valign="top">Google Map:</td><td><a href="javascript:myclick(11-1)">[Show on Map]</a></td></tr><tr><th align="left" valign="top" colspan="2"><br></th></tr><tr><th align="left" valign="top" colspan="2"><b>The Haven Lodge </b></th></tr><tr><td  align="right" valign="top">Details:</td><td>ellencolfer@hotmail.com </td></tr><tr><td  align="right" valign="top">Tel:</td><td>No: +353 (0) 5156 1319</td></tr><tr><td  align="right" valign="top">Link:</td><td><a href="http://www.hooktourism.com/where_to_stay/detail/the_haven_lodge_bed_breakfast/ " target="_blank">http://www.hooktourism.com/where_to_stay/detail/the_haven_lodge_bed_breakfast/ </a></td></tr><tr><td  align="right" valign="top">Google Map:</td><td><a href="javascript:myclick(12-1)">[Show on Map]</a></td></tr><tr><th align="left" valign="top" colspan="2"><br></th></tr><tr><th align="left" valign="top" colspan="2"><b>Carrig House B&B</b></th></tr><tr><td  align="right" valign="top">Details:</td><td>Nicola & Nicholas Howlin nhowlin@eircom.net http://www.bandbwexford.com </td></tr><tr><td  align="right" valign="top">Tel:</td><td>No: +353 (0) 5156 1101</td></tr><tr><td  align="right" valign="top">Link:</td><td><a href="http://www.hooktourism.com/where_to_stay/detail/carraig_house_bb/" target="_blank">http://www.hooktourism.com/where_to_stay/detail/carraig_house_bb/</a></td></tr><tr><td  align="right" valign="top">Google Map:</td><td><a href="javascript:myclick(13-1)">[Show on Map]</a></td></tr><tr><th align="left" valign="top" colspan="2"><br></th></tr><tr><th align="left" valign="top" colspan="2"><b>Herrylock Cottage B&B</b></th></tr><tr><td  align="right" valign="top">Details:</td><td>harrylock@eircom.net  Prop: Anna and David Nash Hook Head Fethard-on-Sea Co. Wexford </td></tr><tr><td  align="right" valign="top">Tel:</td><td>No: +353 (0) 5139 7029</td></tr><tr><td  align="right" valign="top">Link:</td><td><a href="Co. Wexford http://www.hooktourism.com/where_to_stay/detail/herrylock_bb/" target="_blank">Co. Wexford http://www.hooktourism.com/where_to_stay/detail/herrylock_bb/</a></td></tr><tr><td  align="right" valign="top">Google Map:</td><td><a href="javascript:myclick(14-1)">[Show on Map]</a></td></tr><tr><th align="left" valign="top" colspan="2"><br></th></tr><tr><th align="left" valign="top" colspan="2"><b>Groveside Farm B&B</b></th></tr><tr><td  align="right" valign="top">Details:</td><td>Ballyharty, Kilmore, Co.Wexford. �&lt;/td></tr><tr><td  align="right" valign="top">Tel:</td><td>No: +353 (0) 5391 35305</td></tr><tr><td  align="right" valign="top">Link:</td><td><a href="http://www.grovesidefarm.com/" target="_blank">http://www.grovesidefarm.com/</a></td></tr><tr><td  align="right" valign="top">Google Map:</td><td><a href="javascript:myclick(15-1)">[Show on Map]</a></td></tr><tr><th align="left" valign="top" colspan="2"><br></th></tr><tr><th align="left" valign="top" colspan="2"><b>Crooke Church</b></th></tr><tr><td  align="right" valign="top">Details:</td><td>Tying the knot here.</td></tr><tr><td  align="right" valign="top">Tel:</td><td></td></tr><tr><td  align="right" valign="top">Link:</td><td><a href="" target="_blank"></a></td></tr><tr><td  align="right" valign="top">Google Map:</td><td><a href="javascript:myclick(16-1)">[Show on Map]</a></td></tr><tr><th align="left" valign="top" colspan="2"><br></th></tr></table>    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:37:26.017

尽管清除引荐来源网址可以解决问题，但这确实意味着您的密钥很容易被滥用（因为您没有指定可以在哪里使用它）。我已经将它编辑了，尽管它并没有完全隐藏。

您的引荐来源网址字符串必须与您的地图所在的 URL 相匹配——这意味着必须`/*`在域名末尾使用，以表明该域中的任何 URL 都是可以接受的。如果最后没有星号，则只有默认页面会匹配——如果有明确的重定向到另一个页面，即使这样也不会匹配。

`www.exampledomain.com/*`将匹配该域中的任何页面。
`www.exampledomain.com/`惯于。

如果您的页面可以使用`www.`或丢失该页面，或者如果您有其他子域，则需要使用`*.exampledomain.com/*`.

如果您的站点使用 HTTPS，则需要明确指定该协议。

# objective-c - 设置 TabBar 项目被选中

> ID：10574945
> 
> 赞同：1
> 
> 时间：2012-05-13T20:23:56.003
> 
> 标签：objective-c, xcode, ios5

当用户使用 Tabbar 打开视图控制器时，如何以编程方式“选择”设置 Tabbar 项（带有标记 0、1、2 或 3）？

`[tabBar setSelectedItem:[tabBar.items objectAtIndex:2]];`我在 viewdidload 中尝试过 -

```
(void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item { 
```

但它没有用，有谁知道我如何设置选中的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T23:18:58.383

I assume that tabBar is an outlet to a tab bar -- if that's the case, I think you need to use self.tabBar to have the change be propagated through to the UI (makes the change KVO compliant).

# html - 如何使用空白：nowrap 在元素中制作图像最大宽度 = 屏幕尺寸？

> ID：10574949
> 
> 赞同：0
> 
> 时间：2012-05-13T20:24:40.467
> 
> 标签：html, css

我正在为触摸屏制作照片滑块。基本上我有一个带有空格的元素： nowrap; 在不同数量的照片中，用户可以滚动 x 来滑动照片。

我希望每张照片不超过屏幕尺寸，但宽度 100% 不起作用，因为容器具有可变宽度。

```
<div style="white-space: nowrap; overflow-x: auto;">
  <img>
  <img>
  <img>
</div> 
```

如何才能做到这一点？

# jquery - 标题中链接的多个脚本

> ID：10574956
> 
> 赞同：0
> 
> 时间：2012-05-13T20:25:31.963
> 
> 标签：jquery, vbulletin

在我的论坛上，我在标题中链接了多个 jquery 版本。它们中的大多数来自我之前安装的插件，它们会自动插入。

我的问题是，这个不同版本的 jquery 是否会相互交互，并且可能会阻止某些脚本正常工作或根本无法工作？

不是只有 1 个 jquery 版本适用于所有这些插件和我自己的脚本吗？

问候，西弗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:30:49.327

加载多个 jQuery 库可能会导致意外行为。它更好用[`jQuery.noConflict()`](http://api.jquery.com/jQuery.noConflict/)。

# ruby-on-rails - ActiveModel::MassAssignmentSecurity::Error: 无法批量分配受保护的属性

> ID：10574957
> 
> 赞同：26
> 
> 时间：2012-05-13T20:25:37.743
> 
> 标签：ruby-on-rails, activemodel

如果我尝试执行以下代码：

```
hassle = rota.hassles.create(:sender => user1, :receiver => user2, :type => "sms") 
```

我得到以下错误：

```
Failure/Error: hassle = rota.hassles.create(:sender => user1, :receiver => user2, :type => "sms")
 ActiveModel::MassAssignmentSecurity::Error:
   Can't mass-assign protected attributes: type 
```

我不确定这意味着什么。我已将 :type 设为强制，所以如果我删除它，我会收到一个 sql 错误。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-05-13T20:38:21.920

几件事：

批量分配通常意味着将属性传递到创建对象的调用中，作为*属性散列*的一部分。也就是说，您将散列中的一堆属性传递给创建新对象的调用。例如：

```
@user = User.create({:name => "My name", :user_type => "nice_user"}) 
```

但是，Rails 包含一些基本的安全规则，这意味着*默认情况下并非所有属性都可以这样分配*。您必须事先指定哪些可以。你这样做：

```
class User < ActiveRecord::Base
  attr_accessible :name, :user_type
end 
```

如果您没有指定属性 is `attr_accessible`，并且您将其传入以创建对象，则会收到您发布的错误。

以下是更多详细信息：

[http://api.rubyonrails.org/v3.2.9/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html](http://api.rubyonrails.org/v3.2.9/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)

另一种方法是在您第一次创建记录时设置一些属性，然后再设置其他属性 - 如下所示：

```
# In this example `user_type` is not attr_accessible so it needs to be set specifically
@user = User.create({:name => "My name"})
@user.user_type = "nice_user"
@user.save 
```

此外，如果您在使用列名时遇到问题，`type`因为 rails 感到困惑并认为您想使用单表继承 (STI)，请查看此问题的答案以了解如何解决它：[http:// guides.rubyonrails.org/](http://guides.rubyonrails.org/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-19T16:43:41.190

您是否正在使用 Rails 3.2，同时遵循 3.1 教程，例如 Pragmatic Programmer 的“Agile Web Development with Rails”第 4 版？然后检查[http://guides.rubyonrails.org/3_2_release_notes.html](http://guides.rubyonrails.org/3_2_release_notes.html)。

您的问题是，从 Rails 3.1 到 3.2，Active Record 模型的批量分配保护检查默认设置为“严格”。注释掉这些文件中的相应行：

```
config/environments/development.rb
config/environments/test.rb 
```

......你很高兴继续学习。请记住在编写您的第一个生产应用程序时保持这一点：)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-11T03:31:01.720

1.  请尝试：打开`config/application.rb`

2.  找到线`config.active_record.whitelist_attributes = true`

3.  将真改为假

那你就没事了。

PS：记得重启rails控制台。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-11T03:58:10.163

你应该得到另一个错误，像这样：列'type'被保留用于在继承的情况下存储类。因为不应在活动记录数据库中使用列“类型”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-05T07:30:12.243

我不使用`whitelist_attributes`，因为我确实希望允许批量分配的用例用于我的内部逻辑，通常不直接在控制器中用于 CRUD 操作。我建议在这些情况下使用强参数。但是，当您想为特定模型启用批量分配时，您可以

```
class Foo < ActiveRecord::Base
  # disables mass-assigment
  attr_protected
end 
```

这基本上设置`attr_protected`为空数组（[]）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-13T20:31:03.790

[这里](http://guides.rubyonrails.org/security.html#mass-assignment)有一些关于 Rails 中的质量分配是什么以及为什么要进行保护的信息。当您确实想要分配受保护的属性时，这很容易解决，但它需要几行额外的代码。

```
hassle = rota.hassles.build(:sender => user1, :receiver => user2)
hassle.type = 'sms'
hassle.save 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-24T06:48:00.100

你需要`attr_accesible`在你的模型类中

```
class <model_name> < ActiveRecord::Base
    attr_accessible :<fields_name>
end 
```

# ruby - 块看不到方法（厨师资源）

> ID：10574959
> 
> 赞同：6
> 
> 时间：2012-05-13T20:25:50.547
> 
> 标签：ruby, closures, code-reuse, chef-infra, lexical-scope

假设我们有两个资源：

```
template 'template1' do
  owner 'root'
  group 'root'
end

template 'template2' do
  owner 'root'
  group 'root'
end 
```

我想在资源中重用代码。但是，如果我在配方中定义了一个 proc，你会得到一个 NoMethodError`owner`等`group`。为什么会这样？词法范围没有什么不同，是吗？结果我不得不使用`self.instance_eval &common_cfg`.

```
common_cfg = Proc.new {
  owner 'root'
  group 'root'
}

template 'template1' do
  common_cfg.call
end

template 'template2' do
  common_cfg.call
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:14:35.357

由于 chef 的实现方式（有很多反射），您需要将它放在库或 ruby​​ 块资源中以保护它。我认为红宝石块资源会起作用，因为它超出了范围。

[http://wiki.opscode.com/display/chef/Libraries](http://wiki.opscode.com/display/chef/Libraries)

通常出于这个原因，成语是

```
["file_one","file_two"].each do |file|
  template file do
    owner "root"
    group "root"
  end
end 
```

# iphone - -(bool) 不返回

> ID：10574963
> 
> 赞同：2
> 
> 时间：2012-05-13T20:26:33.767
> 
> 标签：iphone, objective-c, ios, xcode

我对 Xcode 和 iPhone 开发真的很陌生。我在我的`appDelegate.m`文件中编写了一个名为`getISlogged;`. 它是这样的：

```
- (BOOL) getISlogged {
    NSUserDefaults *usenow = [NSUserDefaults standardUserDefaults];
    NSNumber *islog = nil;
    if(usenow){
        islog = [usenow objectForKey:@"is_log"]; // should equal 1 or 0...
    }

    UIAlertView * alert1 = [[UIAlertView alloc] initWithTitle:@"works" message:@"test1" delegate:nil cancelButtonTitle:@"ok" otherButtonTitles: nil];
    [alert1 show];
    if (islog == [NSNumber numberWithInt:(1)]) {
       return YES;
    } else {
        return NO;
    }
} 
```

好的，现在我`viewController.m`这样称呼它：

```
SWGAppDelegate *appDelegate = (SWGAppDelegate *)[[UIApplication sharedApplication]delegate];
NSString *islog = @"no";
if(appDelegate.getISlogged){
   islog=@"yes";
} 
```

现在，当我运行它时，我总是得到`Thread 1: breakpoint 2.1`，我不知道该怎么办。我已尝试删除所有代码并仅保留`return YES;`在函数中，但仍然出现相同的错误 =\

任何帮助或提示都会对您有所帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T20:42:07.403

只需简单地返回`boolValue`实例`NSNumber`，而不是提取其整数值，将其与 1 进行比较，然后返回`YES`或`NO`基于此，例如，您的整个方法可以简化为：

```
- (BOOL) getISlogged {
    return [[[NSUserDefaults standardUserDefaults] objectForKey:@"is_log"] boolValue];
} 
```

如果用户默认值中不存在该键，则此方法的结果将为`NO`.

另一个“代码气味”是您将布尔值分配给字符串（使用`@"yes"`并被`@"no"`分配给`islog`）。如果您只是打算将字符串写入某处，例如写入日志，那没有任何问题，但是如果您打算使用此变量来确定是否写入日志，那么您应该改为将其设为`BOOL`. 字符串用于存储文本，仅此而已。

最后，请记住，在 Objective-C 中，`==`运算符比较对象身份（即，它确认两个引用指向同一个对象），它不比较对象相等性。您可以使用内置`isEqual:`方法`NSNumber`或“提取”装箱值并与另一个未装箱值进行比较，例如，这两种方法都可以解决问题：

```
if ([islog isEqualToNumber:[NSNumber numberWithInt:1]])
    // do something

// or

if ([islog intValue] == 1)
    // do something 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-13T20:32:31.913

```
if (islog == [NSNumber numberWithInt:(1)]) 
```

这是错误的。（它比较它们的地址而不是它们的值）。

采用：

```
if ([islog intValue] == 1) 
```

反而。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T20:43:49.750

将其称为方法而不是属性：

```
if([appDelegate getISlogged]){ 
```

（或将其声明为应用程序委托中的属性。）

# html - CSS：最小宽度和绝对定位

> ID：10574966
> 
> 赞同：1
> 
> 时间：2012-05-13T20:26:49.467
> 
> 标签：html, resize, css

```
<style type="text/css">
html, body {
margin: 0;
padding: 0
}

.column1
{
position:absolute;
left:0;
top:0;
width:100px;
background-color:black;
}
.column2
{
position:absolute;
left:100px;
right:100px;

background-color:gray;
}

.middle {

min-width:900px;
}

.column3
{
position:absolute;
right:0;
top:0;
width:100px;
background-color:black;
}

#container
{

text-align: center; 
width:100%;
}

.clearfix 
{
position:relative;
display: inline-block; 
}
</style>

<div id="container" class="clearfix">
  <div class="column1">left</div>
  <div class="column2">
  <div class="middle">
  middle
  </div>
  </div>
  <div class="column3">right</div>
</div> 
```

我想知道中心列的最小宽度是否有可能使右列像它一样粘在屏幕上，但直到中心列是 900px。如果小于该值，则水平调整窗口的大小只会切断右列。

这可能只用css吗？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T20:32:02.507

绝对定位的元素不受其邻居的影响，因此您不能影响具有中心宽度的右列。

但是，您可以轻松地通过简单地放置`min-width:1100px`您的`#container`div 来做到这一点。

# asp.net - 不确定我在 Ubuntu/Apache2/Mono 上做错了什么

> ID：10574967
> 
> 赞同：1
> 
> 时间：2012-05-13T20:26:55.120
> 
> 标签：asp.net, apache, mono, ubuntu-10.04

好吧，我已经花了很长时间试图解决这个问题，但我找不到解决方案。我要做的是让我的 Apache 服务器同时托管 PHP 和 ASP.NET 文件。所以我用谷歌搜索了一下，发现 Apache 的 mod_mono 是可行的方法。我使用[了这个](http://ubuntuforums.org/showthread.php?t=803743warnings)链接（但更改了版本）并且能够成功安装支持 .Net 4.0 的 Mono 版本 2.10.2（通过使用 mono -V 确认）。太好了，现在我需要配置我的 vHost（命名主机）以将 .NET 站点指向正确的文件夹。我使用单声道配置生成器来获取它并在 Apache 中添加/启用该站点（将在下面发布配置文件的淡化版本）。现在在这一点上，事情变得有点时髦。

1）我的虚拟主机不能再有 *:80 指令......我需要放置服务器 IP。这不是什么大问题，但我觉得这很有趣。如果我将站点的 VirtualHost 之一更改为 *:80，则所有站点都已关闭。此外，我必须将 NameVirtualHost XXX.XXX.XXX.XXX 行放入 apache2.conf 文件中才能使其正常工作。

2）我的 PHP 网站都运行良好，但我取决于我是使用[Mono Auto Configuration](https://stackoverflow.com/questions/7968015/mono-apache2-service-temporarily-unavailable-503)（答案）还是[“默认”](https://stackoverflow.com/questions/7635457/basic-mono-installation-wont-work)（类似于问题中的数据）配置，我要么得到“服务器暂时无法服务”由于维护停机或容量问题，您的请求。请稍后再试。” 错误或“内部服务器错误”。

所以，基本上，我非常确定我只是在某个地方搞砸了配置，我需要你的帮助来弄清楚这些东西在哪里滚动！我会为您提供您需要的任何东西，所以如果我错过了以下内容，请联系我。

**服务器统计：** Ubuntu 10.04 服务器版 Apache 2 PHP Mono 2.10.2

**example.com 配置（/etc/apache/sites-enabled）**

```
<VirtualHost XXX.XXX.XXX.XXX>
ServerName example.com
DocumentRoot /var/www/example
</VirtualHost> 
```

**mod_mono.conf (/etc/apache2/mods-enabled)**

```
<IfModule !mono_module>
    LoadModule mono_module "libexec/apache2/mod_mono.so"
</IfModule>

<IfModule mono_module>
    AddType application/x-asp-net .config .cs .csproj .dll .resources .resx .sln .vb .vbproj
    AddType application/x-asp-net .asax .ascx .ashx .asmx .aspx .axd .browser .licx .master .rem .sitemap .skin .soap .webinfo

    MonoAutoApplication enabled
    MonoDebug true
    MonoServerPath "/usr/bin/mod-mono-server4"
    MonoSetEnv LANG=en_US.UTF-8
    MonoUnixSocket "/tmp/.mod_mono"

    <IfModule dir_module>
        DirectoryIndex Default.aspx
    </IfModule>

    <DirectoryMatch "/(bin|App_Code|App_Data|App_GlobalResources|App_LocalResources)/">
        Order deny,allow
        Deny from all
    </DirectoryMatch>

    <Location "/Mono">
        Order deny,allow
        Deny from all
        Allow from 127.0.0.1 ::1
        SetHandler mono-ctrl
    </Location>
</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:48:42.383

今天早上我再次检查了这些日志，我看到一个隐藏在一堆“丢失的图标”错误中：'/usr/bin/mod-mono-server4 - 文件或文件夹不存在“。所以我做到了一个

```
find / -name mod-mono-server* 
```

果然，我唯一的问题是我列出的文件位置。

这里的解决方案是更改行：

```
MonoServerPath "/usr/bin/mod-mono-server4" 
```

到线

```
MonoServerPath "/usr/local/bin/mod-mono-server4" 
```

# html - Z-Index 未在顶部显示元素

> ID：10574968
> 
> 赞同：0
> 
> 时间：2012-05-13T20:27:26.600
> 
> 标签：html, css

在以下页面上：http: [//jsfiddle.net/3h7pL/](http://jsfiddle.net/3h7pL/)

我遇到了一个问题，无论我对 z-index 或定位做什么，子菜单都没有显示。当您将鼠标悬停在“Round Robins”上时，您应该会在其下方看到一个项目符号列表。您会在标记中看到它，但 CSS 不会显示它。我很难确定原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T20:34:17.577

尝试添加：

```
nav > ul:hover {z-index: 3} 
```

你`nav`的 at`z-index: 1`隐藏在`contentBody`of 下`z-index: 2`。

**更新：**但是，该解决方案（[请参阅 fiddle](http://jsfiddle.net/3h7pL/1/)）会弄乱您的阴影。如果从除此之外的`z-index`所有元素中删除所有元素：`nav`

```
nav > ul > li:hover ul {
         z-index: 3;
         display: block;
     } 
```

[然后它不会弄乱阴影](http://jsfiddle.net/3h7pL/3/)。

# bash - 如何在 Mac OS X 10.5.8 上安装 Bash >= 3.2.25？

> ID：10574969
> 
> 赞同：34
> 
> 时间：2012-05-13T20:27:38.083
> 
> 标签：bash, rvm, osx-leopard

我正在关注 Michael Hartl 的 Rails 教程，到目前为止我已经安装了 Git 1.7.5.4 x86_64（我正在运行 OSX 10.5.8）并且我正在尝试安装 rvm

在我运行以下命令后：

`$ curl -kL get.rvm.io | bash -s stable`

我得到：

```
BASH 3.2.25 required (you have 3.2.17(1)-release) 
```

我试过改变外壳，`chsh -s /opt/local/bin/bash`但我得到了`shell '/opt/local/bin/bash' does not exist`

不知道从这里去哪里，但我会很感激任何指导。谢谢！

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-07-28T20:00:52.143

Homebrew 通常比 MacPorts 好一点，因为它不需要很多`sudo`操作。这是一篇指导我升级 bash 安装的文章：http: [//concisionandconcinnity.blogspot.com/2009/03/upgrade-bash-to-40-in-mac-os-x.html](http://concisionandconcinnity.blogspot.com/2009/03/upgrade-bash-to-40-in-mac-os-x.html)

至于步骤：

1.  从他们主页上的文档安装[Homebrew](http://brew.sh/)
2.  使用 Homebrew 安装 Git（可选，但很高兴拥有更新的版本`git`）

    ```
    brew install git 
    ```

3.  现在安装`bash`：

    ```
    brew install bash 
    ```

4.  将此安装添加`bash`到允许的 shell 列表中：

    ```
    echo '/usr/local/bin/bash' | sudo tee -a /etc/shells; 
    ```

    *   Homebrew 默认安装东西到`/usr/local/Cellar/`，然后将任何二进制文件符号链接到`/usr/local/bin`，所以你现在有最新的`bash`坐在`/usr/local/bin/bash`
5.  最后，更改你的 shell 以使用这个新的：

    ```
    chsh -s /usr/local/bin/bash 
    ```

6.  打开一个新的终端窗口/选项卡，然后运行这些命令来仔细检查您的工作：

    ```
    $ echo $SHELL
    /usr/local/bin/bash
    $ echo $BASH_VERSION
    4.2.37(2)-release 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-06T21:22:14.797

mpapis 的说明很棒，但是当我尝试它们时并没有完全涵盖所有问题，所以这就是我必须做的。每次我在旧系统上安装 RVM 时，都是一次真正的试用。下面的内容*远非完美*，花了将近一个小时，但它让我在 10.5.8 上获得了 Ruby 1.9.3。

## 大局（并不总是解释的东西）：

1.  RVM 设计为在您的用户帐户下运行，而不是以 root 身份运行`sudo`，因此这些命令将在没有 的情况下输入`sudo`，如图所示。
2.  听从 mpapis 的警告，我发现 Ruby-1.9.3-p448 可以与 10.5.8 附带的 gcc 版本 4.0.1 一起使用，但其他 Ruby 可能不行。
3.  有些库 Ruby 需要启动 MacPorts 的安装，例如，如果这样做：`rvm pkg install zlib`，但`pkg`已被弃用，所以输入`rvm help autolibs`以阅读更多...</li>
4.  …你可能更喜欢 MacPorts 的其他东西，但是在`rvm pkg install zlib`我放弃它之后，我的 Ruby RVM 安装很好地使用了它。
5.  安装 Ruby 可能需要很长时间，而且似乎什么也没做（您可能会看到`Installing required packages: autoconf, automake, [etc.] gdbm, ncurses........`后面出现的 Ruby 行更缓慢地出现`..........`），但它*会*完成。
6.  在这些处理器密集型安装期间，您的计算机风扇可能会在一段时间内以最高速度旋转 :-)

## 获取 rvm-install 脚本（该`k`选项绕过 SSL 警告）：

```
curl -Lk get.rvm.io -o rvm-installer 
```

## 防止 BASH 版本检查

`bash`在“rvm-installer”脚本中手动注释掉检查您的版本（第 3-11 行）的行（原因：OS X 10.5.8 具有 BASH 3.2.17 并且脚本警告： `BASH 3.2.25 required (you have 3.2.17(1)-release)`.

## 运行安装程序

确保 rvm-installer 脚本是可执行的：

```
chmod +x rvm-installer 
```

只需运行以下脚本即可获取 RVM（建议的命令`/rvm-installer -s stable`可能只会显示`Usage`文档）：

```
./rvm-installer 
```

然后你应该看到：

```
Downloading RVM from wayneeseguin branch master 
```

如果你得到`SSL certificate problem`，允许`curl`进行“不安全”下载，然后再次运行脚本：

```
echo insecure >> ~/.curlrc
./rvm-installer 
```

## 开始使用 RVM 并安装 Ruby

要立即开始使用 RVM，请输入：

```
source /Users/your_user_name/.rvm/scripts/rvm 
```

要安装 Ruby 1.9.3（标准 10.5 库的最安全选项），您现在应该能够输入：

```
rvm install 1.9.3 
```

（这里的过程很长 - 见上面的第 5 点）。然后要使用新的 Ruby，请输入：

```
rvm use 1.9.3 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-13T22:56:49.653

您需要一种方法来安装正确版本的 Bash。一种方法是：

1.  [安装 MacPorts](https://trac.macports.org/wiki/InstallingMacPorts)
2.  安装 Bash 端口`sudo port install bash`
3.  [更改您的 shell](https://stackoverflow.com/questions/791227/unable-to-update-my-bash-in-mac-by-macports)以使用新版本的 Bash

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T00:49:12.977

您可以通过删除对 bash 版本的检查来运行安装程序。

### 安装 RVM

```
curl -L get.rvm.io -o rvm-installer # Download
sed -i"" '2,9 d' rvm-installer      # Remove the check
chmod +x rvm-installer              # Allow executing the script
./rvm-installer -s stable           # Run installer 
```

请务必阅读`rvm requirements`，我建议您安装支持`gcc-4.2`的 osx-installer 或 Xcode - GNU GCC 而不是 LLVM GCC，只有 Ruby 1.9.3-p194 与 LLVM 配合得很好。

### 安装红宝石

```
rvm pkg install zlib
rvm pkg install openssl
rvm pkg install libyaml
rvm install 1.8.7
rvm install 1.9.2
rvm install 1.9.3 
```

### 测试

```
git clone https://github.com/wayneeseguin/rvm-test.git
cd rvm-test
gem install dtf
dtf --text rvm-test/fast/* 2>&1 | tee test.log 
```

`test.log`将创建文件，请打开带有结果[的 RVM 票证](https://github.com/wayneeseguin/rvm/issues)- 如果运行良好，我将降级检查 - 如果没有，则应在降级检查之前进行修复。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-14T04:17:06.220

您使用的是 Power PC Mac 吗？如果您使用的是 Intel PC，为什么不升级到 Lion。Lion 附带 BASH 3.2.48。否则，您将不得不按照[CodeGnome 的](https://stackoverflow.com/a/10575874/368630)说明尝试使用 MacPorts。

# .net - 无法访问 VBA 中的 COM 公开方法

> ID：10574973
> 
> 赞同：8
> 
> 时间：2012-05-13T20:28:11.593
> 
> 标签：.net, visual-studio-2008, vba, com

我正在尝试访问 VBA 中的 COM 公开方法。

**问题：**我在 VBA 中看到了所有默认方法（如和） `GetHashCode`，但*不是*作为 COM 接口一部分且专门编写为 COM 可见的方法（如下所示）。`GetType``ToString`*`getStringValue()`*

 *设置详情：

*   视觉工作室 2008
*   视窗 7 x64
*   办公室 2007
*   .NET 3.5

## 接口“IGetMyString.cs”

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace SimpleCOMAssembly
{
    [ComVisible(true), GuidAttribute("4153A1AC-ECE9-4f66-B56C-1DDEB6514D5D")]
    [InterfaceType(ComInterfaceType.InterfaceIsDual)]
    interface IGetMyString
    {
        [DispId(1)]
        string getStringValue();
    }
} 
```

## 实施“GetMyString.cs”

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;
using System.ComponentModel;

namespace SimpleCOMAssembly
{
    [ComVisible(true), GuidAttribute("0A3D4D65-CF50-4020-BF13-77001F8AAABE")]
    [ProgId("SimpleCOMAssembly.GetMyString")]
    [ClassInterface(ClassInterfaceType.None)]
    public class GetMyString : IGetMyString
    {
        public GetMyString() { }

        [ComVisible(true), Description("Get my string")]
        public string getStringValue()
        {
            return "hello";
        }
    }
} 
```

在 Build 属性中，我选中了**“Make Assembly COM Visible”**（见下面的快照）

![在此处输入图像描述](../Images/736446e91189844ecee5f3d6e1183d78.png)

还要求 Visual Studio 2005 进行**“注册 COM 互操作”**（参见下面的快照）

![在此处输入图像描述](../Images/c5b482febfd6ca46c887440d4eabb1dd.png)

最后，作为构建后事件，我正在运行 regasm.exe 来注册 .DLL 以及 .TLB 到注册表，如下所示：

```
%SystemRoot%\Microsoft.NET\Framework\v2.0.50727\regasm /codebase "$(TargetPath)" /tlb:"$(TargetDir)$(TargetName).lib" 
```

在 Excel 对象资源管理器视图中，我启用了 COM 服务器（上面写的 SimpleCOMAssembly），现在在对象资源管理器中它没有列出 COM 接口方法（见下文） ![在此处输入图像描述](../Images/67cfc3c499c5f06478da0bc42ed0d596.png)

有人可以帮助我知道我缺少什么导致 COM 接口方法未在 VBA 中显示吗？

**编辑** 附加生成的 TLB 的 ITypeLib 视图 ![在此处输入图像描述](../Images/1ed792ee270ba66ce0684bc103af5d76.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T20:39:46.403

Excel 对象浏览器屏幕截图清楚地显示了一个问题。请注意 GetHashcode、GetType 和 ToString 方法是如何可见的。这些是从 System.Object 继承的方法。但是您的代码段明确（并且正确）使用 [ClassInterface(ClassInterfaceType.None)] 以便隐藏类实现。

它没有隐藏。不太清楚这是怎么发生的，早期尝试的旧类型库可以解释它。但是您的构建步骤非常可疑，您提供的帮助太多了。“使程序集类型 COM 可见”选项是强制构建系统公开 .NET 类型的一种非常粗略的方法。但是您的代码正在使用精炼的右上角-pinky-up-when-you-drink-tea 方式向 COM 公开类型。其中包括 [ComVisible(true)] 属性，复选框的作用和 [ClassInterface] 属性，这是复选框不做的。

所以问题是你要求构建系统实现*两个*接口。无论它从基类继承什么，在你的例子中是 _Object，加上它从声明中继承的，在你的例子中是 IMyGetString。这很好，并且与 COM 完全兼容，但 VBA 不是一个很好的 COM 使用者。它只喜欢 [Default] 界面，在您的情况下就是 _Object 。从截图中清晰可见。

所以关闭“使程序集 COM 可见”选项。

并在调用 Regasm 的构建后事件或“注册 COM 互操作”复选框之间进行选择。两种方式都这样做只会使您不知道为什么它不起作用的几率增加一倍。只有在需要为 64 位版本的 Office 注册程序集时才需要 postbuild。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T20:34:17.177

我遇到了同样的问题。我找到了这个链接。

[从 excel 调用 .net 库的指南](http://richnewman.wordpress.com/2007/04/15/a-beginner%E2%80%99s-guide-to-calling-a-net-library-from-excel/) 如果我引用一个名为“Foo.tlb”的 TLB 文件，该文件有一个名为“FooClass”的类，该类具有公共成员。您将无法看到这些成员，因为默认情况下它们仅使用后期绑定（运行时绑定）接口构建。

您可以将您的类更改为具有早期绑定，这将允许智能感知和类的成员在对象浏览器中公开。

C＃：

```
[ClassInterface(ClassInterfaceType.AutoDual)]
public class FooClass
{
    public FooClass()
    {
    }
    public string DoSomething()
    {
        return "I am printing....";
    }
} 
```

实现此更改后，您应该能够在对象浏览器中看到 DoSomething 方法。注意：您必须首先尊重 dll。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T14:57:30.867

作为记录 - 如果其他人需要这个答案 - 我只是遇到了与此完全相同的问题（OLEView 和所有内容），这让我发疯了。我不知道我做错了什么，因为我之前创建了几个 C# COM。我忘记将接口（在这篇文章中`IGetMyString`）声明为`public`.

希望这可以节省一些时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-22T21:16:07.580

此外，为了查看当前[解决方案](https://stackoverflow.com/a/10575040/10241377)的其他人，您可以在 Visual Studio 中使用其他一些方法来解决此问题。

首先，我检查了“使程序集 COM 可见”和“注册 COM 互操作”（在构建选项下）。

然后更进一步，我刚刚添加到我的**PUBLIC**界面：

```
[Guid("[some guid]")] 
```

刚刚去了我的**公共**课并添加了这个：

```
[Guid("[some other unique guid]")]
[ClassInterface(ClassInterfaceType.None)] 
```

这很有效。如果你做的一切都正确，那么你的编译中应该有一个 dll 和一个 tlb。从那里将它们导入您正在处理的项目中，VB6 将看到并显示所有对象的方法和任何其他公开的值/设置器/获取器，使用这种方法，枚举似乎也可以正常工作。

环境：

*   使用 .NET Framework 4.7.2 版
*   视窗 10*

# iphone - prepareForSegue 不会初始化新视图

> ID：10574974
> 
> 赞同：0
> 
> 时间：2012-05-13T20:28:25.273
> 
> 标签：iphone, ios, segue

我一直在看几个教程，如果他们将任何信息传递给下一个视图，他们都只用一行代码或更多代码来调用新视图。目前我想用这样的segue构建一个菜单：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {          
    NSIndexPath *path = [self.tableView indexPathForSelectedRow]; 
    if ([path row]==0) {
        MainViewController *mtvc = (MainViewController *)[segue destinationViewController];
    } else {
        SettingsViewController *svc = [segue destinationViewController];
    }       
} 
```

通常所有示例都使用“segue.identifier isEqualToString:@”“”。但是我无法将情节提要内的表格视图的单元格与多个其他视图连接起来。因此，我使用选定的行来确定我的哪些观点应该继续。

我不知道这是否会出现问题，但我以这种方式从我的splashview初始化了tableview：

```
-(void)turnNext {
    UIStoryboard *storyboard = self.storyboard;
    MenuTableViewController *mtvc = [storyboard instantiateViewControllerWithIdentifier:@"Menu"];
    [self presentViewController: mtvc animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:55:57.537

```
-(void)turnNext {
    UIStoryboard *storyboard = self.storyboard;
    MenuTableViewController *mtvc = [storyboard instantiateViewControllerWithIdentifier:@"Menu"];

    [self presentViewController: mtvc animated:YES completion:nil];
}
             ^^^^^^ 
```

change that to

```
[self.navigationController pushViewController:mtvc animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-20T09:57:16.857

为此，您应该使用 segues。

*   在 storyboard 的 Source 控制器上创建 2 个自定义 segue。
*   将它们的标识符设置为“segueToMainViewController”和“segueToSettingsViewController”

现在，在 tableView - 'didselectrowAtIndexPath' 方法使用以下。

```
//use your logic here

if(indexPath.row == 1) {
   [self performSegueWithIdentifier:@"segueToMainViewController" sender:nil];
}
else {
   [self performSegueWithIdentifier:@"segueToSettingsViewController" sender:nil]
} 
```

如果您需要向控制器发送任何内容，您可以将数据作为发送方传递。

# c++ - C++ - 我读了一个完整的文件（_这是一个由 2 个空格分隔的单词列表_），我如何快速分别获取单词？

> ID：10574977
> 
> 赞同：1
> 
> 时间：2012-05-13T20:29:31.450
> 
> 标签：c++, performance, file, buffer, multimap

我已经阅读了大约 120k 字的文件，所以我尝试快速完成。看过：

```
int x = setvbuf(fp, (char *)NULL, _IOFBF, BSZ);
assert( x == 0 && fp != NULL ); 
```

选项，但它需要超过一秒钟（1 mb 文件）所以现在我尝试了这种方法：

```
fopen_s (&pFile,DICT,"rb");
if (pFile==NULL) {fputs ("File error",stderr); exit (1);}

// obtain file size:
fseek (pFile , 0 , SEEK_END);
lSize = ftell (pFile);
rewind (pFile);

// allocate memory to contain the whole file:
buffer = (char*) malloc (sizeof(char)*lSize);

// copy the file into the buffer:
result = fread (buffer,1,lSize,pFile); 
```

我如何从这里继续？缓冲区包含一个单词列表，我想尽可能快地一个一个地获取它们，因为我用这些单词构建了一个多重映射。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T16:44:36.720

您的代码本质上是在实现`mmap()`. 它的美妙之`mmap()`处在于它会在需要时将实际页面加载到内存中。如果您的应用程序以非常快的速度顺序读取它们，则操作系统将尽可能快地映射页面。

```
#include <sys/mman.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

#define handle_error(msg) \
    { perror(msg); exit(EXIT_FAILURE); }

int
main(void)
{
    int fd = open("english-words.10", O_RDONLY);
    if (fd == -1)
        handle_error("open");

    struct stat sb;
    if (fstat(fd, &sb) == -1)
        handle_error("fstat");
    size_t lSize = sb.st_size;

    char* buffer = mmap(NULL, lSize, PROT_READ, MAP_PRIVATE, fd, 0);
    if (buffer == MAP_FAILED)
        handle_error("mmap");

    // insert your mapping to a map here

    munmap(buffer, lSize);

    return 0;
} 
```

请注意，我也使用`fstat()`而不是您的`fseek`/ `ftell`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T22:21:01.793

将单词分开不会成为瓶颈。任何合理的实现都将比 SSD 更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T22:29:17.567

我会像这样阅读所有单词：

```
#include <vector>
#include <string>
#include <fstream>

using namespace std;  // that's the way I like it... :-)

int main()
{
    vector<string> v;   // all the words
    string word;
    ifstream f("myfile.txt");  // open stream for input

    while (f) {
        f >> word;          // read word
        if (!f) break;
        v.push_back(word);  // push word into vector
    }

    // now v holds all the words in the file, and you can iterate them

    return 0;
} 
```

# javascript - Javascript阻塞等待

> ID：10574979
> 
> 赞同：2
> 
> 时间：2012-05-13T20:29:59.030
> 
> 标签：javascript, blocking, synchronous

我正在为在浏览器中运行的代码实现交互式调试工具。当我到达“断点”时，我需要调用调试器并等待所需的操作，其中当然可能包括“继续”命令以进一步执行脚本。

为此，我编写了一个小型 node.js 网络服务器，它使用长轮询技术处理那些“调试”请求。调试器界面在另一个浏览器窗口中运行，并与 node.js 网络服务器通信，因此命令可以有效地从另一个浏览器发送到正在调试的脚本。

正在调试的脚本中的“暂停”是使用同步请求实现的，该同步请求在一个`for(;;)`循环中最多需要 N 秒，当接收到命令时可以退出该循环`"cont"`。如果程序员没有在限制范围内使用调试器接口发送命令，服务器会自动发送“等待更多”答案，并且脚本保持在无限循环中。

一切都很好，除了浏览器（在这种情况下是 Chrome）一段时间后会弹出一个对话框，告诉正在调试的脚本被卡住并提供杀死它的选项。无论 N 的值是多少，都会发生这种情况。

有没有办法在不让浏览器杀死脚本的情况下等待命令？可以更改超时吗？

请注意，更改脚本以使用回调逻辑，就像在浏览器中编程时通常所做的那样是不可能的（除非您正在谈论对通用程序执行完整的[CPS 转换](http://en.wikipedia.org/wiki/Continuation-passing_style)，而我不想去那里）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T20:36:20.180

如果不使用浏览器扩展（例如 firebug）所使用的 JS 调试接口，您将无法正确停止脚本。

像您目前所做的那样使用主动等待进行阻塞是一个非常糟糕的主意，因为它会消耗大量 CPU 资源并阻塞**整个浏览器**（至少在 Firefox 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:15:23.007

没有可移植（跨浏览器）的方法来防止浏览器在认为执行花费过多并且无法启动嵌套事件循环来实现阻塞操作时终止脚本，就像它在 GUI 库中通常完成的那样。

适用于 Chrome 的解决方案只是使用该选项启动浏览器

```
--disable-hang-monitor 
```

# ruby-on-rails - 在用 ruby on rails 提交表单之前，如何在页面上显示开放图形协议的数据？

> ID：10574984
> 
> 赞同：1
> 
> 时间：2012-05-13T20:31:10.513
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, ruby-on-rails-3.2

我目前正在为微博发布实现一项功能，用户可以在其中链接到网站、视频、图像等，并在提交实际微博之前向他们预览信息。

**我正在使用：**

Ruby 开放图形协议 gem：

[https://github.com/intridea/opengraph](https://github.com/intridea/opengraph)

开放图协议：

[http://ogp.me](http://ogp.me)

我已经对其进行了测试，它非常易于使用并且可以按预期工作：

**控制器：**

```
 require 'opengraph'

  def new
    @movie = OpenGraph.fetch('http://www.youtube.com/watch?v=6ifSudReeuM')
  end 
```

**看法：**

```
<iframe src="<%= @movie.video %>"></iframe> 
```

这将按预期显示视频。好的，我需要在不手动提供控制器中的视频 URL 的情况下执行此操作，但允许我的用户这样做，但在提交微帖子表单之前。

微博表单中有一个文本字段用于粘贴链接。

在我的微帖子表单中粘贴链接或单击 div 按钮时，我想将 url 传递给控制器​​并作为参数传递给 OpenGraph.fetch()。

我想在不提交我的 micropost 表单的情况下执行此操作，这意味着不单击表单的主提交按钮。我意识到我可以编写一些 JQuery 来检测文本字段何时粘贴了文本，然后获取文本字段的值，即 URL。

**问题：**

我的问题是如何模拟我对当前控制器所做的事情。基本上我如何手动提供链接作为 OpenGraph.fetch() 的参数，但使用用户在文本字段中粘贴/键入的 URL。

我只想让我的用户看到他们粘贴的内容的预览，例如视频屏幕和我可以从对象中抓取的视频描述，但在他们提交微博之前。

1.  用户粘贴链接
2.  我使用开放图形协议 gem 获取信息
3.  显示它而不刷新页面

然后用户可以在微博表单的文本区域中输入他们的微博内容，或者直接提交。

所有数据都发送到数据库。例如，微博内容和视频的 URL。

我似乎无法找到实现这一点的方法。我会很感激一些帮助谢谢。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:35:39.110

设置一个单独的控制器操作，它只为传递的 url 参数获取 ogp 数据，然后在 url 输入的前端设置一个 onpaste 事件以触发该操作的 ajax 请求，并传回数据。当 ajax 请求收到响应时，它可以按预期填充预览。

# algorithm - Stooge Sort 的稳定实现？

> ID：10574985
> 
> 赞同：1
> 
> 时间：2012-05-13T20:31:12.183
> 
> 标签：algorithm

这真的可能吗？我在维基百科中找到了它，但我还不能完美地可视化这个过程，所以我不知道我必须改变什么才能使其稳定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T20:41:32.333

任何基于比较的排序算法都可以变得稳定。只需更改比较函数，如果两个元素相等，它就会比较它们的*原始*索引。由于 stooge 排序是基于比较的排序，因此也可以在此处应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:29:56.153

[首先，请注意， Stooge Sort](http://en.wikipedia.org/wiki/Stooge_sort)只有一个步骤实际上改变了元素的顺序：第一步。剩下的步骤都是递归步骤。更改任何递归步骤都会改变算法的基本特征，因此如果我们不以这种方式递归，它将不再是走狗（三个递归调用似乎是典型的“走狗”。）

第一步也很简单，改变它似乎也改变了算法的特性。但是我们可以对其进行调整：如果初始元素大于最终元素，则将与最终元素相等的第一个元素*A与**A*之前的最后一个元素与初始元素相等，我们可以通过 a 找到单程。令人惊讶的是，即使内部循环现在是 O( *n* ) 而不是 O(1)，[Master 定理告诉我们复杂度在 O(](http://en.wikipedia.org/wiki/Master_theorem) *n* ^2.71)处保持不变。同样，如果所有元素都是唯一的，则将发生与原始 Stooge Sort 相同的交换序列，这使该版本成为近亲。

为了快速概述为什么这个版本是稳定的，考虑重新排序两个相等的元素是一个“坏交换”。我们声称使用上述方法没有坏掉期。原因是对于任何交换，我们知道两个元素之间没有一个元素等于任何一个元素。由于相等的元素保持相同的顺序，算法是稳定的。

该算法正确的证明类似于原始 Stooge Sort 的正确性证明。这是一个常见的家庭作业问题，所以我不想放弃它，但它来自归纳假设。

如果调整的描述有点简洁，Java 实现如下。

```
import java.util.Arrays;
import java.util.Random;

public class StableStooge {
    public static class FooBar implements Comparable<FooBar> {
        public final int foo;
        public final int bar;

        public FooBar(int foo, int bar) {
            this.foo = foo;
            this.bar = bar;
        }

        @Override
        public int compareTo(FooBar arg0) {
            return foo - arg0.foo;
        }

        public String toString() {
            return foo +":"+bar;
        }
    }

    private static void sort(Comparable[] c, int start, int end) {
        if (start >= end) return;
        if (c[start].compareTo(c[end]) > 0) {
            // Find the first thing X equal to end and the last thing Y which is before X and equal to start
            int lastindex = end;
            int firstindex = start;
            for (int i = start + 1; i < end; i++) {
                if (c[end].compareTo(c[i]) == 0) {
                    lastindex = i;
                    break;
                } else if (c[start].compareTo(c[i]) == 0) {
                    firstindex = i;
                }
            }
            Comparable tmp = c[firstindex];
            c[firstindex] = c[lastindex];
            c[lastindex] = tmp;
        }
        // Recurse
        if (end - start + 1 >= 3) { 
            int third = (end - start + 1) / 3;
            sort(c, start, end-third);
            sort(c, start+third, end);
            sort(c, start, end-third);
        }
    }

    public static void sort(Comparable[] c) {
        sort(c, 0, c.length-1);
    }

    public static void main(String[] args) {
        FooBar[] test = new FooBar[100];
        FooBar[] testsav = new FooBar[100];
        Random r = new Random();
        for (int i = 0; i < 1000; i++) {
            for (int j = 0; j < test.length; j++) {
                test[j] = new FooBar(r.nextInt(10), j);
                testsav[j] = test[j];
            }
            sort(test);
            // verify
            for (int j = 1; j < test.length; j++) {
                if (test[j].foo < test[j-1].foo) {
                    throw new RuntimeException("Bad sort");
                }
                if (test[j].foo == test[j-1].foo && test[j].bar <= test[j-1].bar) {
                    throw new RuntimeException("Unstable sort: "+Arrays.toString(testsav)+" sorted improperly to "+Arrays.toString(test));
                }
            }
        }
    }
} 
```

# javascript - 我想要提交表单之前和之后的两个值

> ID：10574987
> 
> 赞同：-5
> 
> 时间：2012-05-13T20:31:24.980
> 
> 标签：javascript, jquery

我有一个简单的表单，里面有两个输入字段文本类型。例如，如果输入的初始值为“Hello”，后来我将其更改为“Hi”，然后我提交此表单。

我想看到这两个值，请任何人建议我

标记

```
 <form action="index_submit" method="get" name="anil" > 
        <label for="first_name">first name</label><input type="text" name="first_name" value="" id="first_name">
        <label for="last_name">last name</label><input type="text" name="last_name" value="" id="last_name">
        <label for="user_name">user name</label><input type="text" name="user_name" value="" id="user_name">
        <input type="submit" name="submit" value="submit" id="submit">
        <input type="reset" name="reset" value="reset" id="reset">
    </form> 
```

js

```
$(document).ready(function(){  
    $('form #submit').click(function(){
        var oldValue
        var newValue
    });   
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T20:37:17.170

您可以将初始值放在隐藏字段和可见字段中，例如：

```
<input type="text" name="greeting" value="Hello" />
<input type="hidden" name="greeting-original" value="Hello" /> 
```

然后，您可以随心所欲地`greeting`在`greeting-original`提交表单时进行操作。

# c++ - 删除指向存储在列表中的对象的空指针？

> ID：10574993
> 
> 赞同：1
> 
> 时间：2012-05-13T20:32:14.633
> 
> 标签：c++, visual-c++

想象一下我有这个结构

```
struct datalist {
    int index;
    int number;
}; 
```

使用我们正在使用的结构，我们将使用一个列表

```
while(Iter != m_SomeList.end());
{
    if(*Iter) 
    {
        //do something

        Iter++;
    }
    else   //Iterator is NULL so can we erase it from the list like so?
    {
        datalist* pAR = *Iter;
        Iter = m_SomeList.erase(Iter);
        delete  pAR;    pAR = NULL;
    }
} 
```

所以基本上问题是，如果它们是 NULL，我们可以从列表中删除和擦除空/无效的迭代器吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T20:42:40.340

如果您有一个指针列表，则可以更轻松地删除空指针：

```
std::list<datalist*> m_SomeList = /* ... */;
m_SomeList.remove(NULL); 
```

显然没有必要调用`delete`，因为指针已经没有指向任何地方。

另一方面，将擦除逻辑与将指针设置为 NULL 的程序的其他部分（您没有向我们展示）结合起来可能会更有成效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T20:42:44.223

假设`Iter`是 a `list<datalist *>::iterator`，那么是的，你可以。

你不需要 delete `pAR`，因为你知道它是空的，但是这样做是允许的（它没有效果）。您已经以正确的方式编写了循环来处理擦除。

`++Iter;`（尽管你不应该总是用`Iter++;`C++ 编写——它们通常是相同的，但有时前者效率更高。）

# c - 如果没有 IntelliSense 错误，为什么会有这么多编译错误？怎么修？

> ID：10574995
> 
> 赞同：0
> 
> 时间：2012-05-13T20:32:38.217
> 
> 标签：c, struct

我试图在 C 中模拟继承，所以我在 Visual Studio 中创建了一个 C 文件并编写了一些代码。我确保没有 IntelliSense 错误并编译了代码，然后它告诉我有超过 40 个错误。为什么之前没有提到他们？使代码工作的基本方法是什么？（我知道一些Java，但不太懂C。）

```
#include <stdio.h>
#include <string.h>

//Create a manager which should inherit from employee

int main(void)
{
    // construct a Manager object
    double d = 8000;
    char carl[] = "Carl";
    Manager boss= newManager(carl, d, 1987, 12, 15);
    setBonus(&boss, 5000);

    typedef union{ //typedef!?
       Employee e;
       Manager m;
      } Person;

    Person staff[3];    
    // fill the staff array with Manager and Employee objects
      staff[0].m = boss;    
      Employee harry; harry = newEmployee("Harry", 50000, 1989, 10, 1);
      staff[1].e=harry;    
      Employee tommy; tommy = newEmployee("Tommy", 40000, 1990, 3, 15); 
      staff[2].e = tommy;

      // print out information about all Employee objects
      int i;
      for (i=1;i<3;i++){
          //check if employee or manager
          Employee em; em = staff[i].e;
          printf ("%s\n", em.name); 
          printf("%s\n", 345);
      }     
}   

typedef struct {    
    char name[20]; 
    double salary;
    } Employee;

Employee newEmployee(char n[], double s, int year, int month, int day)
{
    Employee emp;
    strncpy(emp.name, n, 20);
    emp.salary=s;    
    return emp;  
}

//use pointer to change actual value
void raiseSalary(Employee (*emplo), double byPercent)  
{   
    double raise = (*emplo).salary * byPercent / 100;
    (*emplo).salary += raise;
}

//Manager struct inheriting from employee struct
typedef struct {
    Employee employee;   
    int bonus;
} Manager;      

Manager newManager(char n[], double s, int year, int month, int day)
{
    Manager man;    
    strncpy(man.employee.name, n, 20);
    man.employee.salary = s;
}

double getManagerSalary(Manager man)
{
    double basesalary = man.employee.salary;
    return basesalary + man.bonus;
}

void setBonus(Manager* man, int b)
{
    (*man).bonus = b;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T20:35:20.890

C++ 的 Intellisense 是出了名的不可靠，仅仅因为 Intellisense 报告或未报告错误并没有多大意义。

此外，每当您有错误时，您**必须向我们提供错误信息**，否则我们很可能无法为您提供帮助。

不过有一点很明显：移动`struct`s 的定义和上面函数的原型，`main`这样你就没有一堆未定义的函数和结构。

# android - 从我的应用程序中打开 Foursquare 应用程序

> ID：10574997
> 
> 赞同：1
> 
> 时间：2012-05-13T20:32:52.420
> 
> 标签：android, foursquare

从我的应用程序打开应用程序的简单方法是什么？我正在构建的应用程序我希望人们在有商店时打开 Foursquare 进行签到。我知道他们可以打开网页。但我想打开 Foursquare 应用程序...

```
 four.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            // TODO Auto-generated method stub
            Uri uriUrl = Uri.parse("https://m.foursquare.com/nationalcleaners");
            Intent launchBrowser = new Intent(Intent.ACTION_VIEW, uriUrl);
            startActivity(launchBrowser); 
        }
    }); 
```

用对我有用的方法更新了我的问题...如果用户单击按钮时将其安装在用户手机上，它将为用户提供使用浏览器或foursquare应用程序的选择...选择浏览器或应用程序后，它会在foursquare中进行搜索，您可以让它在下面代码的“放置您搜索的内容”部分中搜索您想要foursquare搜索的内容。

这就是我设置它的方式，它可以工作。

按钮四 = (Button) findViewById(R.id.foursq);

```
 four.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            // TODO Auto-generated method stub
            Uri uriUrl = Uri.parse("http://m.foursquare.com/search?q=Place what your searching for hear");
            Intent launchBrowser = new Intent(Intent.ACTION_VIEW, uriUrl);
            startActivity(launchBrowser); 
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T21:18:27.313

查看有关 Android 意图的[Foursquare 文档](https://developer.foursquare.com/resources/client.html)。似乎您可以使用 http URL 作为启动本机应用程序的意图 URI（如果未安装，浏览器将打开给定的 URL）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T21:09:37.270

用户必须在他们的设备上安装 Foursquare 应用程序，所以想想当他们不这样做时会发生什么。其次，Foursquare 应用程序必须侦听特定意图以捕获您的请求，如果 Foursquare 应用程序侦听 http 请求，那么这可能会起作用。但这真的取决于目标应用程序的实现是否可以处理您的请求。

我不确定是否可以直接使用意图中的正确值调用 Foursquare 的正确活动，首先我会检查他们的网站，如果他们有一些文档如何在 Android 上与他们的 Foursquare 应用程序通信。

# c# - 多行文本框根据文本量自动调整其高度

> ID：10574998
> 
> 赞同：7
> 
> 时间：2012-05-13T20:33:11.107
> 
> 标签：c#, winforms

我有一个文本框，它可以返回长度从 5 个字符到 1000 个字符不等的各种字符串。它具有以下属性：

*   多行=真
*   自动换行 = 真

我需要设置文本框的哪些其他属性才能使以下操作成为可能？

*   盒子的宽度应该是固定的
*   要根据返回的文本量自动调整框的高度，例如，如果文本运行到 3 行，则它会调整为 3 行的高度。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T21:06:01.543

试试下面的代码：

```
public partial class Form1 : Form
{
     private const int EM_GETLINECOUNT = 0xba;
     [DllImport("user32", EntryPoint = "SendMessageA", CharSet = CharSet.Ansi, SetLastError = true, ExactSpelling = true)]
     private static extern int SendMessage(int hwnd, int wMsg, int wParam, int lParam);

     public Form1()
     {
        InitializeComponent();
     }

     private void textBox1_TextChanged(object sender, EventArgs e)
     {
        var numberOfLines = SendMessage(textBox1.Handle.ToInt32(), EM_GETLINECOUNT, 0, 0);
        this.textBox1.Height = (textBox1.Font.Height + 2) * numberOfLines;
     }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T20:52:58.713

TextBox 类似乎没有内置任何功能来执行此操作，但 Font 类有一个[Height](http://msdn.microsoft.com/en-us/library/system.drawing.font.height.aspx)属性，该属性返回基线之间的像素数。

还可以找出 TextBox 中的文本占用了多少行，如[这篇](http://ryanfarley.com/blog/archive/2004/04/07/511.aspx)博文中所述（警告：它并不完全优雅）。

一旦您获得了这些信息，您应该能够使用一些简单的数学方法使 TextChanged 处理程序相应地设置 TextBox 的高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T20:52:35.593

您需要从代码中调整文本框的高度。计算行数（[本文可以帮助您做到这一点](http://ryanfarley.com/blog/archive/2004/04/07/511.aspx)），然后将 设置为`Textbox.Height`您需要的值（行数 * 8px 左右，取决于内部使用的字体`TextBox`）。

在链接文章中的解决方案是重写 TextBox 控件类以获取行数；可能还有其他方法可以获取行数，但文章中建议的解决方案对我来说看起来很优雅。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T10:13:12.343

```
private void tb_TextChanged(object sender, EventArgs e)
{
    tb.Height = (tb.Text.Split('\n').Length + 2 ) * tb.Font.Height;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-10T14:28:43.840

我不敢相信仍然没有真正优雅的方式。这是我不解的：

```
textBox.Height += textBox.GetPositionFromCharIndex(textBox.Text.Length - 1).Y 
    + 3 + textBox.Font.Height - textBox.ClientSize.Height; 
```

这通过确定文本最后一个字符的像素坐标来工作。

您可以在设置内容后执行此操作，即在`OnLoad`控件`Form`或控件`OnTextChanged`中`TextBox`。如果当用户调整表单大小时固定宽度发生变化，您还应该注意这一点，即`OnResize`或`OnClientSizeChanged`.

`TextBox`支持`AutoSize`属性。但是，它已`true`默认设置为，并且不会显示在属性编辑器或 IntelliSense 中。它仅用于字体高度更改，并且在使用时不起作用`MultiLine = true`:( - 这在[文档](https://msdn.microsoft.com/library/system.windows.forms.textboxbase.autosize.aspx)中没有提到。

其他选项可能包括使用不同的控件，例如`RichTextBox`或`Label`。我还没有尝试过，但似乎[Label 支持 AutoSize](https://stackoverflow.com/a/3680595)要好得多。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-17T07:00:07.517

在 TextBox 上添加 MaxHeight 属性，如下所示。

`<TextBox Name="txtSample" MaxHeight="1000" />`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-29T08:10:16.417

像这样的东西给出了文本的高度，就像它在文本框本身中的绘制方式一样：

```
SizeF MessageSize = MyTextBoxControl.CreateGraphics()
                                .MeasureString(MyTextBoxControl.Text,
                                                MyTextBoxControl.Font,
                                                MyTextBoxControl.Width, 
                                                new StringFormat(0)); 
```

我不确定`StringFormat`应该是什么，但这些值`StringFormatFlags`似乎不适用于默认`TextBox`化妆。

现在`MessageSize.Height`您知道文本框中文本的高度。