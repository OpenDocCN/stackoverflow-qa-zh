# StackOverflow 问答 10578000-10578999

# validation - SQL 服务器报告验证参数格式正确

> ID：10578001
> 
> 赞同：2
> 
> 时间：2012-05-14T05:46:19.603
> 
> 标签：validation, reportingservices-2005

在我使用 SSRS 2005 开发的报告应用程序中，我有一个字符串类型的参数，它接受时间。时间应采用“HH:mm:ss”格式 如何检查输入字符串的格式是否正确？

我尝试执行以下操作 IsDate(TimeValue(parametr!stime.Value)) 只要值在范围内，它就会返回 true。但如果该值为 24:00:00 或错误值，则会引发异常。

我还尝试在报告代码中创建一个函数，如下所示：

```
Public Function CheckNum(sNum as String) as Boolean
Dim msg as String
msg = ""
Try
If IsDate(TimeValue(sNum))=1 Then
Return True
Else
msg="Parameter must be a number"
End If
Catch ex as Exception
Return False
End Try
If msg <> "" Then 
MsgBox(msg, 16, "Parameter Validation Error")
Err.Raise(6,Report) 'Raise an overflow
End If
End Function 
```

当我输入一个值 24:00:00 我仍然得到一个错误

“ char 类型到 datetime 数据类型的转换导致日期时间值超出范围” 如何处理异常以免出现错误？

编辑：

```
public Function CheckNum(sNum as String) as Boolean

Dim REGEX_TIME = "^(([0-1]?[0-9])|([2][0-3])):([0-5]?[0-9])(:([0-5]?[0-9]))?$"       
If System.Text.RegularExpressions.Regex.IsMatch(sNum, REGEX_TIME) Then
Return True
Else
Return False
End If
End Function 
```

然后我将 parameter(validateTime) 值分配为 =Code.CheckNum(Parameters!sTime.Value)

但参数的值始终为真。当我指定一个大于 23 的值时，我仍然看到错误。请看图片![时间无效时出错](../Images/079f4749a64da0ef03f7dc1cf76844fe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:58:28.567

不要使用 IsDate 函数，而是使用 VB.NET 正则表达式。SSRS 允许充分利用 .NET 功能。[请参阅时间正则表达式](https://stackoverflow.com/questions/1360801/net-regular-expression-for-time-24-hr-format)的示例。 [一个很好的正则表达式教程](http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial)。

示例代码控制台应用程序

```
Imports System.Text.RegularExpressions

Module Module1

    Sub Main()

        Dim REGEX_TIME = "^(([0-1]?[0-9])|([2][0-3])):([0-5]?[0-9])(:([0-5]?[0-9]))?$"
        Dim InputList As List(Of String) = New List(Of String)
        InputList.Add("25:00:21")
        InputList.Add("22:00:21")
        InputList.Add("AA:00:21")
        InputList.Add("17:21:02")
        For Each input As String In InputList
            If Regex.IsMatch(input, REGEX_TIME) Then
                Console.WriteLine("TIME " + input + " IS OK")
            Else
                Console.WriteLine("TIME " + input + " IS NOT OK")
            End If
        Next
    End Sub
End Module 
```

输出是：

```
TIME 25:00:21 IS NOT OK
TIME 22:00:21 IS OK
TIME AA:00:21 IS NOT OK
TIME 17:21:02 IS OK 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:57:06.340

我认为，您可以捕获一个`InvalidCastException`.

# c# - 如何使此 Web 服务正常工作？

> ID：10578002
> 
> 赞同：-2
> 
> 时间：2012-05-14T05:46:40.097
> 
> 标签：c#, asp.net

我是一名新开发人员，并尝试按照[本教程](http://dotnetguts.blogspot.com/2007/09/all-about-web-service-in-net.html)在 C# 中开发 Web 服务。我按照该教程中的说明进行了所有操作，但是，我没有从 Northwind 数据库中获取任何数据，当我按下 Invoke 按钮时，我得到了以下页面： ![在此处输入图像描述](../Images/8d5fd0307d6d27119496f014d546d13e.png)

正如您将在本教程中看到的，我没有将 ConnectionString 添加到 web.config 文件中。我应该这样做吗？

我的代码：

```
public class WSGetCustomerCountryWise : System.Web.Services.WebService
{
    public WSGetCustomerCountryWise()
    {

        //Uncomment the following line if using designed components 
        //InitializeComponent(); 
    }

    [WebMethod(Description = "It will generate Customer List, CountryWise")]
    public System.Xml.XmlElement
        GetCustomerCountryWise(string sCountry)
    {
        string sConn = ConfigurationManager.ConnectionStrings["connStr"].ToString();
        string sSQL = "select CustomerId, CompanyName, ContactTitle, City from Customers where country = '"+sCountry+"'";
        SqlConnection connCustomer = new SqlConnection(sConn);
        DataSet dsCustomer = new DataSet();
        SqlDataAdapter sda = new SqlDataAdapter(sSQL, sConn);
        sda.Fill(dsCustomer);

        System.Xml.XmlDataDocument xdd = new System.Xml.XmlDataDocument(dsCustomer);
        System.Xml.XmlElement docElem = xdd.DocumentElement;
        return docElem;

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T05:50:53.330

您正在尝试使用 加载连接字符串`ConfigurationManager.ConnectionStrings["connStr"].ToString()`，但您没有将其添加到配置 (=web.config)，所以是的，您应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T05:51:00.617

对于初学者; 是的，您需要将连接字符串添加到您的 web.config。否则会抛出异常。你不能`ToString()`成为一个`null`对象。

找出你的代码在哪里中断：如果你在以 开头的行放置一个断点会发生什么`string sConn`？您应该能够通过“调试”找到错误...

# java - 如何在android中使用wifi/蓝牙连接打印图像

> ID：10578005
> 
> 赞同：0
> 
> 时间：2012-05-14T05:47:13.613
> 
> 标签：java, android, bluetooth, wifi

实际上我有一个问题，我必须使用 Wifi/蓝牙连接使用 android 应用程序打印图像或文本。

但我没有找到任何此类打印的资源。

我看到了应用程序 printshare。我必须这样做。

如果有人有任何解决方案，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:13:27.547

一些像 Woosim 这样的蓝牙打印机有自己的 Android 库和示例。请参阅[此链接](http://dl.dropbox.com/u/3635770/%28Android2.2_bt%29_Eng%20%5B12.03.07%5D.zip)。我已经将它用于我的项目并且很有用。

# android - 如何在低于 11 的 Api 中设置 View alpha？

> ID：10578010
> 
> 赞同：18
> 
> 时间：2012-05-14T05:47:50.737
> 
> 标签：android

我需要为视图设置 alpha。它是 ImageButton 并且在 Touch 事件中我想设置我可以看到它被按下的 alpha。也许有一些解决方法？它不适合我改变背景颜色。因为我的背景是图像，我不想更改此图像的 alpha。我也不想使用选择器，因为我的图像是动态创建的。

最后，如果没有办法做到这一点。那么我怎么能捕捉到它 setAlpha 不支持 Api 电话正在使用的异常呢？

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-09-10T19:00:32.197

前段时间我发现了这段代码。也许会有所帮助？

```
if (Build.VERSION.SDK_INT < 11) {
        final AlphaAnimation animation = new AlphaAnimation(alpha, alpha);
        animation.setDuration(duration);
        animation.setFillAfter(true);
        view.startAnimation(animation);
    } else
        view.setAlpha(alpha);
} 
```

# asp.net - 我的 IIS7 URL 重写规则不断消失

> ID：10578015
> 
> 赞同：15
> 
> 时间：2012-05-14T05:48:39.647
> 
> 标签：asp.net, iis-7, iis-7.5

我有常规的 IIS7 重写规则——SEO 规则（规范名称标签、尾部斜杠、小写字母）。他们工作正常。

但是一天后，甚至几个小时后，它们就消失了——就好像它们从一开始就不存在一样，所以我必须在 IIS7 中重新做一遍。

谁能告诉我为什么会这样，我应该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-14T06:00:16.353

检查是否有其他东西正在更新您的 web.config 文件。

不小心重新部署它可能会导致这种情况发生，因为 IIS 将重写规则存储在您的 web.config 文件中。

# c++ - MSVS 2010 和 C++ 标准的构建问题

> ID：10578017
> 
> 赞同：8
> 
> 时间：2012-05-14T05:48:54.743
> 
> 标签：c++, visual-c++, compiler-errors, standards

我正在尝试使用 msvs 2010 构建在以下 git 中找到的项目：

[https://github.com/Joonhwan/exprtk](https://github.com/Joonhwan/exprtk)

问题是当我在 exprtk.hpp 文件中注释掉第 48 行“#define exprtk_lean_and_mean”时，我收到以下编译器错误：

```
Error   1   error C1128: number of sections exceeded object file format limit : compile with /bigobj 
```

谷歌搜索错误，似乎表明已编译的翻译单元已编译为大于任意限制的内容，并且将“bigobj”添加到命令行应该可以解决问题（确实如此）。用 gcc (4.3) 编译代码，没有故障。

我的问题是：

1.  c++ 是否对翻译单元中可以拥有的类型数量进行了限制？

2.  这个项目中代码的布局方式是不好的做法吗？（谷歌搜索时，我注意到很多 boost 库都有同样的问题，例如：Boost.Sprit）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-14T05:56:19.787

**c++ 是否对翻译单元中可以拥有的类型数量进行了限制？**

请注意，这些参数的最大值对于特定的实现是开放的。该标准仅强制实施必须支持的最低要求。实现将记录它支持的最大值，在这种情况下，MSVC 实现会这样做。

这些是在 C++ 标准的一个特殊部分中定义的。

**附件 B - 实施数量**

> 1.  因为计算机是有限的，C++ 实现不可避免地受限于它们可以成功处理的程序的大小。**每个实施都应在已知的情况下记录这些限制。**本文档可能会引用存在的固定限制，说明如何根据可用资源计算可变限制，或者说固定限制不存在或未知。
>     
>     
> 2.  这些限制可能会限制包括以下描述的数量或其他数量。**建议将每个数量后面的括号中的数字作为该数量的最小值。**但是，这些数量仅作为指导，并不能确定合规性。
>     — 复合语句、迭代控制结构和选择控制结构的嵌套级别 [256]。
>     — 条件包含的嵌套级别 [256]。
>     — 指针、数组和函数声明符（任意组合）修改声明中的算术、结构、联合或不完整类型 [256]。
>     — 在完整表达式中嵌套括号表达式的级别 [256]。
>     — 内部标识符或宏名称中的字符数 [1 024]。
>     — 外部标识符中的字符数 [1 024]。
>     — 一个翻译单元中的外部标识符 [65 536]。
>     — 在一个块中声明的具有块范围的标识符 [1 024]。
>     — 在一个翻译单元中同时定义的宏标识符 [65 536]。
>     — 一个函数定义中的参数 [256]。
>     — 一个函数调用中的参数 [256]。**
>     — 一个宏定义中的参数 [256]。
>     — 一个宏调用中的参数 [256]。
>     — 一个逻辑源代码行中的字符 [65 536]。
>     — 字符串文字或宽字符串文字中的字符（连接后）[65 536]。
>     —**对象的大小 [262 144]**。
>     — #include 文件的嵌套级别 [256]。
>     — switch 语句的 case 标签（不包括任何嵌套 switch 语句的标签）[16 384]。
>     — 单个类、结构或联合中的数据成员 [16 384]。
>     — 单个枚举中的枚举常量 [4 096]。
>     — 单个 struct-declaration-list [256] 中的嵌套类、结构或联合定义的级别。
>     — atexit()[32] 注册的函数。
>     — 直接和间接基类 [16 384]。
>     — 单个类的直接基类 [1024]。
>     — 在单个类中声明的成员 [4 096]。
>     — 类中的最终覆盖虚函数，可访问或不可访问 [16 384]。
>     — 类的直接和间接虚基 [1 024]。
>     — 类的静态成员 [1 024]。
>     — 类中的友元声明 [4 096]。
>     — 类中的访问控制声明 [4 096]。
>     — 构造函数定义中的成员初始值设定项 [6 144]。
>     — 一个标识符的范围限定[256]。
>     — 嵌套的外部规范 [1 024]。
>     — 模板声明中的模板参数 [1 024]。
>     — 递归嵌套模板实例化 [17]。
>     — 每个尝试块的处理程序 [256]。
>     — 在单个函数声明中抛出规范 [256]。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-14T05:56:32.257

限制在于旧版本的 MSVC 和相应链接器使用的 OBJ 格式。因此，虽然这个限制是任意的，但它不能成为新版本编译器的默认行为。查看[/bigobj](http://msdn.microsoft.com/en-us/library/ms173499.aspx)选项的描述：

> 在 Visual C++ 2005 之前发布的链接器无法读取使用 /bigobj 生成的 .obj 文件。

# java - 从 Java 中的 COM 端口读取，在 ..\rxtx\src\termios.c(892) 处出现错误 0x5

> ID：10578021
> 
> 赞同：6
> 
> 时间：2012-05-14T05:49:22.973
> 
> 标签：java, serial-port, rxtx, termios

我正在用 Java 编写一个小应用程序来从[COM](http://en.wikipedia.org/wiki/COM_%28hardware_interface%29)端口读取，因为我们使用 64 位系统，所以我不得不使用 RXTX。问题是当我尝试运行我的应用程序时出现以下错误：

> “..\rxtx\src\termios.c(892) 处出现错误 0x5：访问被拒绝”

尝试了我的代码以及来自 RXTX 网站的[代码](https://web.archive.org/web/20121227101123/http://rxtx.qbang.org/wiki/index.php/Two_way_communcation_with_the_serial_port)，以前有人有过这方面的经验吗？

* * *

这是我的代码：

```
import gnu.io.CommPort;
import gnu.io.CommPortIdentifier;
import gnu.io.SerialPort;
import gnu.io.SerialPortEvent;
import gnu.io.SerialPortEventListener;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

/**
 * This version of the TwoWaySerialComm example makes use of the 
 * SerialPortEventListener to avoid polling.
 *
 */
public class TwoWaySerialComm
{
    public TwoWaySerialComm()
    {
        super();
    }

    void connect ( String portName ) throws Exception
    {
        CommPortIdentifier portIdentifier = CommPortIdentifier.getPortIdentifier(portName);
        if ( portIdentifier.isCurrentlyOwned() )
        {
            System.out.println("Error: Port is currently in use");
        }
        else
        {
            CommPort commPort = portIdentifier.open(this.getClass().getName(),2000);

            if ( commPort instanceof SerialPort )
            {
                SerialPort serialPort = (SerialPort) commPort;
                serialPort.setSerialPortParams(9600,SerialPort.DATABITS_8,SerialPort.STOPBITS_1,SerialPort.PARITY_NONE);

                InputStream in = serialPort.getInputStream();
//                OutputStream out = serialPort.getOutputStream();
//                               
//                (new Thread(new SerialWriter(out))).start();

                serialPort.addEventListener(new SerialReader(in));
                serialPort.notifyOnDataAvailable(true);

            }
            else
            {
                System.out.println("Not a serial port...");
            }
        }     
    }

    public static class SerialReader implements SerialPortEventListener 
    {
        private InputStream in;
        private byte[] buffer = new byte[1024];

        public SerialReader ( InputStream in )
        {
            this.in = in;
        }

        public void serialEvent(SerialPortEvent arg0) {
            int data;

            try
            {
                int len = 0;
                while ( ( data = in.read()) > -1 )
                {
                    if ( data == '\n' ) {
                        break;
                    }
                    buffer[len++] = (byte) data;
                }
                System.out.print("Result="+new String(buffer,0,len));
            }
            catch ( IOException e )
            {
                e.printStackTrace();
                System.exit(-1);
            }             
        }

    }

    public static void main ( String[] args )
    {
        try
        {
            (new TwoWaySerialComm()).connect("COM1");
        }
        catch ( Exception e )
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T15:21:24.917

我遇到了这个问题，因为该端口*实际上*正在使用中。以前的 javaw.exe 实例出现在 Windows 任务管理器中，它占用了端口。

java 进程在 CommPortIdentifier 中挂起的原因是硬件问题：将我碰巧使用的 USB-2 串行转换器插入 USB2 端口时，一切正常。当插入 USB-3 端口时，CommPortIdentifier 代码会挂起，然后 Java 的后续实例会收到 termios.c: Access Denied 错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-05T19:55:12.810

这个shell命令在Android中对我有帮助（stty需要busybox）：

```
su
chmod 666 /dev/ttyO2
stty -F /dev/ttyO2 speed 115200 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-05-14T06:02:39.810

我使用了 rxtx api，并且工作正常。

# c# - 以编程方式将访问控制列表 (ACL) 权限分配给“此文件夹、子文件夹和文件”

> ID：10578026
> 
> 赞同：13
> 
> 时间：2012-05-14T05:49:53.190
> 
> 标签：c#, .net, windows, winapi

我必须使用 C#.NET 以编程方式分配文件夹及其子文件夹和文件的权限。我这样做如下：

```
var rootDic = @"C:\ROOT";
var identity = "NETWORK SERVICE"; //The name of a user account.
try
{
    var accessRule = new FileSystemAccessRule(identity,
                         fileSystemRights: FileSystemRights.Modify,
                         inheritanceFlags: InheritanceFlags.ContainerInherit | InheritanceFlags.ObjectInherit,
                         propagationFlags: PropagationFlags.InheritOnly,
                         type: AccessControlType.Allow);

    var directoryInfo = new DirectoryInfo(rootDic);

    // Get a DirectorySecurity object that represents the current security settings.
    DirectorySecurity dSecurity = directoryInfo.GetAccessControl();

    // Add the FileSystemAccessRule to the security settings. 
    dSecurity.AddAccessRule(accessRule);

    // Set the new access settings.
    directoryInfo.SetAccessControl(dSecurity);
}
catch (Exception ex)
{
    //...
} 
```

它确实为我的“C:\ROOT”文件夹分配了权限。但它仅将权限分配给子文件夹和文件，而不是“ROOT”文件夹。 ![在此处输入图像描述](../Images/03029e1ade1cd68f66fd55db5129367b.png)

**问：如何定义`FileSystemAccessRule`实例以分配权限给 ROOT 文件夹、子文件夹和文件？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-14T06:24:15.420

您只需要删除`PropagationFlags.InheritOnly`标志。通过指定您声明 ACE 不应应用于目标文件夹。改为使用`PropagationFlags.None`。您可能会发现这篇[MSDN 文章](http://msdn.microsoft.com/en-us/magazine/cc163885.aspx)很有帮助。

# blackberry - 如何强制黑莓应用程序通过 wifi 工作？

> ID：10578027
> 
> 赞同：1
> 
> 时间：2012-05-14T05:49:58.183
> 
> 标签：blackberry

在使用黑莓应用程序（通过互联网工作）时，设备（BB Torch）连接到 Wifi 而不是网络提供商。该应用程序无法访问互联网，但设备已连接到 Wifi。

以前，我使用 Aerize Wifix 软件来强制应用程序通过 Wifi 工作。但是现在该软件无法在我的设备上运行。

有没有其他替代品！

如果有人知道背后的原因，请回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T08:33:09.963

```
 if ((WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED) && RadioInfo .areWAFsSupported(RadioInfo.WAF_WLAN)) { httpURL += ";interface=wifi"; } 
```

这行代码对我有用。

谢谢西纳雷。

# asp.net - 如何接收 RadGrid 中的 GridTemplate 列值？

> ID：10578029
> 
> 赞同：1
> 
> 时间：2012-05-14T05:50:18.683
> 
> 标签：asp.net, radgrid

我想在文本框中获取网格模板列值？示例：GridDarkhast.MasterTableView.Items[e.Item.ItemIndex]["TemplateColumn"].Text;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:43:27.153

取决于您的 ItemTemplate 中的控件。例子：

```
<ItemTemplate>
 <asp:TextBox ID="TextBox1" runat="server" Text="asdf" />
</ItemTemplate> 
```

* * *

```
GridDarkhast.MasterTableView.Items[e.Item.ItemIndex]["TemplateColumn"].FindControl("TextBox1") as TextBox... 
```

实际上，您可以忽略列并在行本身上使用 FindControl，因为第一个命名容器是行 (GridItem)。因此，您的代码可能如下所示：

```
TextBox tb = 
GridDarkhast.MasterTableView.Items[e.Item.ItemIndex].FindControl("TextBox1") as TextBox; 
```

还有另一种方法，但根据您的代码判断，这将是最适合您的方法。

祝你好运，丹尼尔

# mysql - WP Query 列出两个特定日期之间发布的帖子

> ID：10578032
> 
> 赞同：0
> 
> 时间：2012-05-14T05:50:43.363
> 
> 标签：mysql, wordpress

我只想列出两个特定日期之间发布的帖子

我在这里找到了一个解决方案[http://www.wprecipes.com/wordpress-loop-get-posts-published-between-two-particular-dates](http://www.wprecipes.com/wordpress-loop-get-posts-published-between-two-particular-dates)

我的代码在这里，不幸的是这不起作用！

```
<?php
          function filter_where($where = '') {
                $where .= " AND post_date >= '2012-05-09' AND post_date <= '2012-05-11'";
                //$where .= " AND post_date > '" . date('Y-m-d', strtotime('-30 days')) . "'";
            return $where;
          }
        add_filter('posts_where', 'filter_where');
        query_posts($query_string);
        ?>
               <?php while (have_posts()) : the_post(); ?>    
                    <h1><?php the_title(); ?></h1>
               <?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T06:55:10.493

### 首先，您不应该使用`query_posts()`它，因为它会破坏全局变量并弄乱条件等...

你没有提到这段代码在哪里运行。例如，如果它在页面模板上，您将不会收到任何帖子，因为当将 $query_string 传递给您的查询时，您使用的是全局 $wp_query 对象，它只会查询页面 post_types。

我使用新的 WP_Query 而不是 query_posts 测试了您的代码，它运行良好。

```
function filter_where( $where = '' ) {

$where .= " AND post_date >= '2012-05-01' AND post_date < '2012-05-14'";
return $where;
}

add_filter( 'posts_where', 'filter_where' );

$query = new WP_Query( array( 'post_type' => 'post' ) );

    echo '<div id="content" style="color: white!important;">';
    echo '<h1>And here are the posts……&lt;/h1>';
    while( $query->have_posts() ) : $query->the_post();

    echo '<h2>'. get_the_title() .'</h2>';

    endwhile;
    echo '</div>';

remove_filter( 'posts_where', 'filter_where' ); 
```

# c# - 抽象类中的“this”类型和重载方法解析顺序混淆

> ID：10578037
> 
> 赞同：2
> 
> 时间：2012-05-14T05:51:02.997
> 
> 标签：c#, java, overloading, method-resolution-order

这个非常简单的例子让我感到困惑：

```
public class X {
    public void XMethod(A a) {
        Console.WriteLine(a.GetType());
        Console.WriteLine("Got A");
    }

    public void XMethod(B b) {
        Console.WriteLine(b.GetType());
        Console.WriteLine("Got B");
    }
}

public abstract class A {
    public virtual void M(X x) {
        Console.WriteLine(this.GetType());
        x.XMethod(this);
    }
}

public class B : A {

}

class Program {
    static void Main(string[] args) {
        X x = new X();
        B b = new B();
        b.M(x);
    }
} 
```

这个的输出是

```
B
B
Got A 
```

直到'Got A'之前的一切都很好。我希望当我在 class 的实例上`X.XMethod(B)`调用方法时会调用该方法。`M``B`

这里发生了什么？当很明显提供的参数类型是而不是时，为什么会`XMethod(A)`调用而不是调用？`XMethod(B)``B``A`

PS：对于等效实现，我在 java 中得到了相同的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T05:57:07.173

**只有 on`A.M`方法**。不是一为`A`，一为`B`。

对于所有实例，IL 都是相同的`A.M`；在编译时，`A.M`只知道`this`是`A`（或`object`），因此它**总是**解析为`XMethod(A)`. 此方法解析在编译时生成的 IL 中，并且不会针对子类进行更改（实际上，子类可能位于编译器甚至不知道的单独程序集中）：

```
.method public hidebysig newslot virtual instance void M(class X x) cil managed
{
    .maxstack 8
    L_0000: ldarg.0 
    L_0001: call instance class [mscorlib]System.Type [mscorlib]System.Object::GetType()
    L_0006: call void [mscorlib]System.Console::WriteLine(object)
    L_000b: ldarg.1 
    L_000c: ldarg.0 
    L_000d: callvirt instance void X::XMethod(class A)
    L_0012: ret 
} 
```

要获得您想要的行为，您*可以*使用`dynamic`. 不过，并不是说你*应该*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T05:57:05.137

`this`总是引用正在调用操作的当前对象...在这种情况下，如果您想调用 B 方法，则需要覆盖虚拟操作，因为如果您不覆盖它，则仅引用方法父类..

```
public class B : A {  
public override void M(X x) {
         Console.WriteLine(this.GetType());
         x.XMethod(this);
     } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T05:58:14.437

我不是 100% 的舒尔，但我认为当使用具有两种可能类型匹配的方法重载时，总是使用“最低的”。

编辑：在hvd的评论之后，我检查了它，他是对的：
例如以下示例：

```
static void Main(string[] args)
{
    string str = "bla";
    object obj = str;

    DoIt(str);
    DoIt(obj);
}

public static void DoIt(object p) { Console.WriteLine("Object!"); }
public static void DoIt(string p) { Console.WriteLine("String!"); } 
```

印刷

> 细绳！
> 目的！

# javascript - 分配随机 ID 不起作用

> ID：10578042
> 
> 赞同：0
> 
> 时间：2012-05-14T05:51:35.010
> 
> 标签：javascript, canvas

我是 JS 新手，我需要帮助将随机生成的 ID 添加到当我们单击出现在 Canvas 上的图像上。这些出现在 Canvas 上的图像必须分配一个 ID。谁能给我建议？

在 HTML 上：

```
<FORM>
   <INPUT type="button" value="+"onClick="Add(new IMGid)"> 
   <input type="text" id="amount" value=0  maxlength="3" size="1" onKeyPress="return numeralsOnly(event)">
   <INPUT type="button" value="-" onClick="Remove()">
</FORM> 
```

在 Javascript 文件上：

```
function Add(new IMGid) {

    newIMG = document.createElement("IMG");
    newIMG.id = "IMG" + newIMGid;
    newIMG = document.getElementById("divIMG1").appendChild(newIMG);

    var uniqueNum = Math.floor(Math.random()*99999);
    var newIMGid  = newImg.attr('uniqueNum');

    if (document.getElementById('amount').value < 100){
        document.getElementById('amount').value++;
        newIMG = document.createElement("IMG");
        x = Math.random() * 200;
        y = Math.random() * 160;
        c5_context.drawImage(bluefish, x, y, 58, 100).value++;

        //added by Luke 
        a = document.createElement("IMG").setID;
        Element.attr('IMG', 'random');
        //--------------------

        document.getElementById("imagedest").appendChild(newIMG);

        c5_context.drawImage(anchovies, x, y, 58, 100).value++;

        document.write(newIMG);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:02:45.847

`function Add(new IMGid) {`- 语法错误，多余的空间？

`newIMG.setAttribute('id', "IMG" + newIMGid)`可能会更好一些...

```
var newIMGid  = newImg.attr('uniqueNum'); 
```

1.  变量名区分大小写。是`newIMG`吗？
2.  DOM 项目没有`attr`功能......你使用 jquery 还是什么？

这里有很多错误......它应该如何工作？

# java - 编译器如何识别存在已检查异常

> ID：10578043
> 
> 赞同：2
> 
> 时间：2012-05-14T05:51:43.500
> 
> 标签：java

在 Java 中，编译器如何识别存在已检查异常？我的意思是它是如何识别它的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T06:02:21.790

就在文档中：

> Java 编程语言的编译器在编译时检查程序是否包含已检查异常的处理程序，通过分析哪些已检查异常可能由方法或构造函数的执行引起。对于每个可能结果的检查异常，方法（第 8.4.6 节）或构造函数（第 8.8.5 节）的 throws 子句必须提及该异常的类或该异常类的超类之一。这种编译时检查是否存在异常处理程序旨在减少未正确处理的异常数量。
> 
> 未经检查的异常类是类 RuntimeException 及其子类，以及类 Error 及其子类。所有其他异常类都是检查异常类。Java API 定义了许多异常类，包括选中的和未选中的。程序员可以声明额外的异常类，包括已检查和未检查的。有关异常类层次结构和 Java API 和 Java 虚拟机定义的一些异常类的描述，请参见 §11.5。

所以基本上它会查看代码，如果遇到异常，则查找异常的继承层次结构以确定它是检查还是未检查。

[读](http://docs.oracle.com/javase/specs/jls/se5.0/html/exceptions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:00:06.183

所有检查的异常都有一个基类`Exception`，而非检查的异常扩展`RuntimeException`或`Error`。

# java - 处理所有未处理的异常

> ID：10578046
> 
> 赞同：3
> 
> 时间：2012-05-14T05:52:25.663
> 
> 标签：java, exception, exception-handling

是否可以处理（简单的日志写入）所有未处理的异常？

更详细地说，我需要记录代码中任何地方发生的任何异常，记录异常然后*继续*（这显然可能导致更多异常！）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T05:57:37.230

您可以使用[默认未捕获异常处理](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#setDefaultUncaughtExceptionHandler%28java.lang.Thread.UncaughtExceptionHandler%29)程序来捕获任何未处理的异常。

也可以为每个线程或线程组设置一个特定的处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:04:04.570

您可以为此使用 AOP（面向方面​​的编程）。具体来说，您可以创建一个记录所有异常的方面。

如果您使用的是 spring，则可以为此使用[AfterThrowing Advice Annotation](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/aop.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T06:09:26.800

这是一段可以帮助您的代码：

```
public class MyDefaultExceptionHandler extends DefaultExceptionHandler
  {

  private UncaughtExceptionHandler defaultUEH;

  public MyDefaultExceptionHandler() 
    {
    this.defaultUEH = Thread.getDefaultUncaughtExceptionHandler();
    }

  @Override
  public void uncaughtException(Thread t, Throwable e) 
    {
    //print anything you wish about the Throwable e :getStackTrace(), getCause(), getClass()...
    defaultUEH.uncaughtException(t, e); //this will call the default handling of the exception (crash...)
    }
  }
… 
//in the main app:
Thread.setDefaultUncaughtExceptionHandler(new MyDefaultExceptionHandler()); 
```

# iphone - 如何在短时间内解析包含大量数据的 xml

> ID：10578049
> 
> 赞同：0
> 
> 时间：2012-05-14T05:53:36.200
> 
> 标签：iphone

我正在开发一个应用程序。其中我解析了一个 xml 文件。其中包含 500 个问题，每个问题有 4 个不同的答案。如果我解析该数据，那么它将花费很多时间。首先我创建了一个具有该问题属性的类像问题内容、问题类型、答案、正确答案一样。我为该类创建了一个对象，每次解析该文件并保存每个问题信息。为此，它需要很多时间。但我需要得到问题信息非常快。请告诉我有没有其他方法可以用更少的时间或每次单独的问题快速地一次获得问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:01:49.887

*   使用 SAX 解析器。NSXMLParser 是一个 SAX 解析器

> SAX 解析器只需要在每个解析事件发生时报告它。因此它比 DOM 更快。

*   如果您认为解析会冻结您的 UI。把它放在一个背景线程中。`performSelectorInBackground:withObject:`
*   不要每次都解析xml。缓存问题对象。

# arrays - 在 Visual C++ 中使用 ^ 运算符

> ID：10578052
> 
> 赞同：8
> 
> 时间：2012-05-14T05:53:56.723
> 
> 标签：arrays, visual-c++, c++-cli

我正在做 Visual c++ 编程，我创建了一个 CLR 控制台应用程序。我注意到字符串数组应该声明为字符串 ^，而不是字符串 []。^ 有什么用？为什么用它代替 []？这种替代是否仅限于 CLR 应用程序？这是一行代码和错误：

```
array<String[]>[] abc; 
```

产生的错误是

错误 C2143：语法错误：缺少“；” 前 '['

错误 C2146：语法错误：缺少“；” 在标识符“abc”之前

错误 C2065：“abc”：未声明的标识符

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-14T06:03:28.660

抑扬符表示该对象是一个托管指针，它将由垃圾收集器自动收集 - 您不需要隐式执行此操作。请查看[本文](http://www.codeproject.com/Articles/7704/Arrays-in-C-CLI)以了解数组在 C++/CLI 中的工作原理。

在你的情况下：

```
array<String^> ^abc; 
```

*这种替代是否仅限于 CLR 应用程序？*

是的。

# asp.net - asp.net 站点无法访问某些复制的文件夹

> ID：10578053
> 
> 赞同：0
> 
> 时间：2012-05-14T05:54:06.677
> 
> 标签：asp.net, synchronization

我有一个简单的 ASP.NET 站点，它在两个不同的服务器上有两个正在运行的实例。当第一台服务器出现故障时，另一台服务器会提供服务，反之亦然。我有一些文件夹有一些文件可供用户下载，这些文件会根据用户上传不断更新。在此服务器切换过程中**，同步软件**可帮助将此文件夹复制到另一台服务器。当我将站点与第二台服务器一起使用时**，无法访问使用第一台服务器上传的文件，**但是它们存在于具有相同访问权限的所需位置的两台服务器上。

对此有任何想法吗？

# oracle - varchar2 到时间戳

> ID：10578054
> 
> 赞同：1
> 
> 时间：2012-05-14T05:54:11.367
> 
> 标签：oracle, oracle11g

我有以下数据

```
SELECT T.FEED_TIME from GLRS.FEED_TYPE T 

05:00:00 AM
06:00:00 AM 
```

WHERE FEED_TIME 是 VARCHAR2(20)

现在我必须添加 1 天来计算下一次运行时间并将其转换为时间戳值

```
SELECT to_timestamp(T.FEED_TIME,'dd-Mon-yyyy HH24:MI')+1 FROM FEED_TYPE T WHERE T.FEED_CODE = 'CREDIT'; 
```

但以上查询返回无效月份请建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:02:25.043

您的 varchar2 数据和日期格式字符串不匹配。

> 05:00:00 AM <> dd-Mon-yyyy HH24:MI

看起来您的数据仅包含时间，但由于您提到“添加一天”，我会大胆猜测并假设前两个字符是您的一天，其余的是时间。然后你需要像下面这样的东西：

```
SELECT to_char(to_date(T.FEED_TIME,'dd:HH:MI AM')+1, 'dd:HH:MI AM')
FROM FEED_TYPE T WHERE T.FEED_CODE = 'CREDIT'; 
```

# objective-c - NSFetchedResultsController 使用子属性排序

> ID：10578057
> 
> 赞同：3
> 
> 时间：2012-05-14T05:54:22.207
> 
> 标签：objective-c, core-data, nsfetchedresultscontroller, nssortdescriptor

我有一对多的父子实体书<->>借

书

*   姓名
*   借（关系）

借

*   借用日期
*   笔记
*   书（关系）

我想`NSFetchedResultsController`使用最大`NSDate`的子实体对 Book 实体进行排序，以显示最近借过的书。

我怎样才能做到这一点 ？我尝试使用我自己的方法，使用 Book 上的 Category

```
- (NSArray *)borrowSortedByborrowedDate
{
    NSSortDescriptor *sortByCreatedDate = [NSSortDescriptor sortDescriptorWithKey:@"borrowDate" ascending:NO];
    NSArray *sortedArray = [self.histories sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortByCreatedDate]];
    return sortedArray;
}

- (NSDate *)recentBorrowDate
{
    Borrow *borrow = [[self borrowSortedByborrowedDate] objectAtIndex:0];
    return borrow.borrowDate;
} 
```

并将其放入`sortDescriptor`

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"recentBorrowDate" ascending:YES]; 
```

但它没有用。

**这是我获取的请求（没有用）**

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

NSEntityDescription *entity = [NSEntityDescription entityForName:@"Book" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

[fetchRequest setFetchBatchSize:20];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"recentBorrowDate" ascending:YES];
NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

[fetchRequest setSortDescriptors:sortDescriptors]; 
```

我的预期结果是

*   书名1（借到今天）
*   书名2 (borrowDate昨天)
*   书名3（borrowDate很多天前）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:53:55.177

您可能会考虑向`lastBorrowedDate`Books 托管对象添加属性的可能性。如果您想对该字段进行排序和搜索，则有必要优化您的 MOM 以获得更好的效率。你也可以让代码更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:10:39.197

我有同样的问题，这是我目前实现所需输出的解决方法。（也许这是唯一的方法，但我仍在寻找......）

当创建一个新的 Borrow 时，只需同时更新 book.lastBorrowDate 属性。

```
// Create new Borrow and set Book
Borrow *newBorrow = (Borrow *)[NSEntityDescription insertNewObjectForEntityForName:@"Borrow" inManagedObjectContext:self.managedObjectContext];
newBorrow.book = theBook;
newBorrow.borrowDate = [NSDate date];
newBorrow.note = theNote;

// Now also update our book's lastBorrowDate tracking property
theBook.lastBorrowDate = [NSDate date];

// Save all our changes
NSError *error = nil;
if (![self.managedObjectContext save:&error]) {
    // Something went horribly wrong...
    NSLog(@"Unresolved error: %@, %@, %@", error, [error userInfo],[error localizedDescription]);
    abort(); // Fail
} 
```

现在，当稍后将它们拉出来时，这很容易......

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

NSEntityDescription *entity = [NSEntityDescription entityForName:@"Book" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

[fetchRequest setFetchBatchSize:20];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"lastBorrowDate" ascending:YES];
NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

[fetchRequest setSortDescriptors:sortDescriptors]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T21:54:27.673

我实际上在类似的情况下也有类似的问题。你可以在这里查看帖子：[Custom NSSortDescriptor on complex object](https://stackoverflow.com/questions/11182297/custom-nssortdescriptor-on-complex-object/11182443#comment14693272_11182443)

总而言之，我需要同时使用子属性和实体属性进行排序。找到的唯一解决方法是使用自定义排序描述符并在之后应用过滤器。这意味着您必须执行 fetch，获取 fetchResults，然后将它们排序到一个数组中。不过，我主要担心这种解决方法的性能问题。在您的情况下，自定义排序可能类似于：

```
@interface Book(category) {}
@end
@implementation Book(category) 
- (NSDate*)getMostRecentDate {
  NSDate* mostRecentDate = [NSDate dateWithTimeIntervalSince1970:0];
  for(Borrow* b in [self borrows]) {
    mostRecentDate = [mostRecentDate laterDate:[b borrowDate]];
  }
  return mostRecentDate;
}
@end

@interface SortDescriptor : NSSortDescriptor {}
@end
@implementation SortDescriptor
- (id)copyWithZone:(NSZone*)zone
{
    return [[[self class] alloc] initWithKey:[self key] ascending:[self ascending] selector:[self selector]];
}
- (NSComparisonResult)compareObject:(id)object1 toObject:(id)object2
{
    return [[(Book*)object1 getMostRecentDate] compare:[(Book*)object2 getMostRecentDate]];
}
@end 
```

让我知道您对此解决方案的看法。我正在开始测试以决定是更改排序以使其更简单还是使用 NSArray。

# android - 我正在实现重置表单字段的代码，请在这方面帮助我

> ID：10578058
> 
> 赞同：-5
> 
> 时间：2012-05-14T05:54:23.690
> 
> 标签：android

我的代码是：

```
Button button1=(Button)findViewById(R.id.button2);

OnClickListener onclick1 = new OnClickListener() {
        @Override
        public void onClick(View v) {
            et.setText("");
        }
    };
    button1.setOnClickListener(onclick1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:00:31.210

更具体地说明您的问题。但是，如果您只想清除`EditText`on 按钮单击，那么您可以这样做：

```
Button button1=(Button)findViewById(R.id.button2);

 button1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

et.setText("");

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:01:44.217

```
button2.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        spinner.setSelection(0); //if the field is spinner
        editText.setText("");  //if the field is EditText
    }
}); 
```

# json - 将用户名/密码从 sencha 传递到 restapi

> ID：10578060
> 
> 赞同：0
> 
> 时间：2012-05-14T05:54:46.667
> 
> 标签：json, extjs

我使用 sencha touch 2 作为我的一个手机应用程序的客户端，我使用 django-tastypie RESTFUL api 来处理客户端请求。现在我需要使用如下请求发送用户名/密码

> 域名/api/v1/entry/?format=jsonp&username=admin&password=admin&_dc=1336968929898&type=new&city=ABC&date=31-03-2012

下面是我的示例代码，

```
 handler: function() {
                        Ext.Ajax.request({
    url: 'http://domainaname/api/v1/entry/?format=jsonp&username=admin&password=admin',
    method: 'GET',
    withCredentials: true,
    useDefaultXhrHeader: false,
    params:{
        type: 'new',
        city: 'ABC',
        date: '31-03-2012',
    },

    callback: function(response, successful) {
        if (successful) {
            Ext.Msg.alert('Success', 'We got yours');
        } else {
            Ext.Msg.alert('Fail', 'It didnt work!');
        }
    } 
```

我不希望用户名/密码可见。

**类型、城市、日期是查询的过滤选项**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:40:20.433

只需更改`method`类型

```
'GET' -> 'POST' 
```

然后以下列方式发送您的`username`和`password`..

```
.....
params: {
   username: Ext.getCmp('userId').getValue(),
   password: Ext.getCmp('userPswdId').getValue()
},
..... 
```

# php - 如何在 Drupal 7 中通过 JS 或 Jquery 模拟“添加另一个项目”，

> ID：10578061
> 
> 赞同：0
> 
> 时间：2012-05-14T05:54:50.950
> 
> 标签：php, javascript, jquery, drupal

目前，我需要通过 JS 或 Jquery 方式动态添加项目（表单元素，更具体地说是字段集合项目）以形成表单。

任何人有想法如何做到这一点表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-05T08:04:24.767

由于您想通过 javascript 生成“添加另一个项目”，这意味着您需要执行“添加另一个项目”按钮的单击事件。

jQuery`.trigger()` 不执行按钮#ajax 的操作。所以你只需要使用：

```
 // Base id button 'add another item'.
 base='edit-field-etape-und-add-more';
 id= '#edit-field-etape-und-add-more';
 $(id).click();
 Drupal.ajax[base].eventResponse($(id), 'click'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:04:03.520

从您的问题中我了解到，您正在尝试从数据库中获取字段，并且根据这些字段想要将字段添加到 HTML。

一个可能的解决方案：

**第一步：**通过AJAX向php文件发送请求，获取字段列表[响应可能是HTML、JSON等]。

**第 2 步：**如果响应是 HTML，则将整个 HTML 设置为容器/如果 json，然后对它们进行循环并将它们添加到容器中

# ios - 将 Objective-C 的 Google API 客户端库添加到 Xcode 项目

> ID：10578063
> 
> 赞同：1
> 
> 时间：2012-05-14T05:55:00.903
> 
> 标签：ios, xcode, google-plus

我正在尝试制作一个使用 Google+ API 的 iPhone 应用程序。我找到了[http://code.google.com/p/google-api-objectivec-client](http://code.google.com/p/google-api-objectivec-client)

现在，我正在尝试通过将源文件夹拖放到 API 中来将此 API 添加到我的 Xcode 项目中。我还在目标的构建阶段链接了静态库。但是在构建项目之后，存在很多错误。

[此外，我从这里http://code.google.com/p/google-api-objectivec-client/wiki/BuildingTheLibrary](http://code.google.com/p/google-api-objectivec-client/wiki/BuildingTheLibrary)找到了将 API 添加到项目的文档。我遵循了相同的步骤，但仍然出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:58:57.970

为了回答您的最后一个问题，示例 Google+ Objective-C 应用程序位于此处： [http ://code.google.com/p/google-api-objectivec-client/source/browse/#svn%2Ftrunk%2FExamples%2FPlusSample](http://code.google.com/p/google-api-objectivec-client/source/browse/#svn%2Ftrunk%2FExamples%2FPlusSample)

# algorithm - 在未排序的列表中查找所有出现的最大值 - 具有恒定内存的单遍

> ID：10578066
> 
> 赞同：3
> 
> 时间：2012-05-14T05:55:09.983
> 
> 标签：algorithm, language-agnostic, time-complexity

这个问题是在一次采访中问我的。给定一个未排序的整数列表，如果可以在线性时间和常量内存中找到所有出现的最大值。

我当时无法回答，遇到了中位数算法的中位数。仍然不确定该算法是否适用于这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:26:55.607

您可以在 O(n) 中找到集合的最大值。只需浏览列表并更新最大值：

```
max = int_array[0]
for i = 1 to int_array.size():
    if int_array[i] > max:
        max = int_array[i] 
```

在下一轮中，您可以在每个此类元素上调用所需的功能。例如，如果你想打印出他们的位置，最后是他们的计数：

```
count = 0
for i = 0 to int_array.size():
    if int_array[i] == max:
        print "Index i"
        count += 1
print count 
```

您总是可以在第一遍中确定计数，只要当前元素等于最大值就增加它，并在每次*更改*当前最大值时将其重置为一个（例如，当前元素大于当前最大值）。以同样的方式，您可以记住第一遍中最大值的位置。因此，将它们整合为一个：

```
count = 1
max = int_array[0]
indexes = [0]
for i = 1 to int_array.size():
    if int_array[i] == max:
        count += 1
        indexes.insert(i)
    else if int_array[i] > max:
        count = 1
        indexes = [i]
        max = int_array[i]
print "There are " + count + " elements with maximal value of " + max
print "On positions: "
for int i = 0 to count:
    print indexes[i] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T07:57:33.903

这是一个单遍解决方案，它记录了所有最大值实例的位置：

```
set POS //where the maxima are, initially empty
max = A[1]//first element
add 1 to POS

for i = 2 to n
  if A[i] > max
    max = A[i]
    empty POS
    add i to POS
  if A[i] == max
    add i to POS

return POS 
```

内存使用量`O(n + count(max))`是`O(n)`，因为您必须存储所有出现最大值的位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T08:18:11.213

这是一种一次性解决方案，用于查找最大值并记录所有出现最大值的列表索引。

`O(n)`如果要记录列表索引，它会使用内存。如果您只想计算最大值出现的次数，请将列表替换为计数器并且您有`O(1)`记忆。*

```
numbers = [ ... list of numbers ... ]
largest_seen = - Infinity
positions_seen_at = [ empty list ]

for ( i = 0; i < len(numbers); i++ ):
    if numbers[i] > largest_seen:
        largest_seen = numbers[i]
        positions_seen_at = [ empty list ]

    if numbers[i] == largest_seen:
        positions_seen_at.append(i) 
```

*假设“合理”大小的输入。如果输入列表的大小非常大，您可能需要一个任意长的整数来保存计数器。那将是`O(log n)`记忆。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T01:40:34.867

谢谢大家这么详细的回答。经过一番思考，我想我有一个解决方案，它可以在未排序的列表中一次性为您提供最大项目的最大值和所有出现的最大值。唉！！我本可以在几天前想出它:)但迟到总比没有好......

这是我写的java代码片段：

```
public int getNumberOfOccurrencesOfMax(List<Integer> inputList){ 

if(this.inputList.size() == 0) 
     return 0;
Integer max = Integer.MIN_VALUE, max_occurances = 0;

for(int i=0; i < inputList.size(); i++){
        if(max < this.inputList.get(i)){
            max = this.inputList.get(i);
            max_occurances = 1;
        }
        else if(max > this.inputList.get(i)){
            max_occurances = (max_occurances > 0) ? max_occurances : 1; 
        }
        else{
            max_occurances += 1;
        }
    }
return max_occurances;
} // END_OF_METHOD 
```

我用（1,1,2,2,3,4,4,5,5,5）的示例列表尝试了代码。

随时建议对我的实施进行任何改进。

最好的，

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-14T06:58:41.483

最大值比中值容易得多

在Python中，如果数字列表是L，就这么简单

```
L.count(max(L)) 
```

L.count 是 O(n)
max(L) 也是 O(n)

这个简单的解决方案确实会检查每个元素两次，但算法总体上仍然是 O(n)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T06:53:01.163

我认为这也可以：

O(n) 算法

```
i = 0
highestStart = 0
size = array.size
for i < size -1 
     if array[i] > array[i+1]
          x = array[i]
          delete array[i] //remove higher value
          array[array.size] = x  // push higher value to the end
          highestStart = i
      else if array[i] < array[i+1]
          highestStart = i+1
     end if
  end if
  i = i+1
end for
return subarray[highestStart, array.size -1]

1*,5*,4 ,7 ,9 ,4 ,9   :0,1
1 ,5*,4*,7 ,9 ,4 ,9   :1,2
1 ,4 ,7*,9*,4 ,9 ,5   :2,3
1 ,4 ,7 ,9*,4*,9 ,5   :3,4
1 ,4 ,7 ,4 ,9*,5*,9   :4,5
1 ,4 ,7 ,4 ,5 ,9*,9*  :5,6 
```

# osgi - Bnd @Attribute 注解有什么用？

> ID：10578067
> 
> 赞同：1
> 
> 时间：2012-05-14T05:55:10.997
> 
> 标签：osgi, declarative-services, bnd

查看 bndlib-1.50.0 中的包中的注释时， [http](http://www.aqute.biz/Bnd/Components) ://www.aqute.biz/Blog/20091020或[http://www.aqute.biz/Bnd/Components](http://www.aqute.biz/Blog/20091020) :`aQute.bnd.annotation.component`中没有列出一个。它是干什么用的？`@Attribute`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:10:59.360

它没有当前功能...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T04:51:05.740

这对我来说似乎是一个错误。根据 git 历史（https://github.com/bndtools/bnd/commits/master/biz.aQute.bndlib/src/aQute/bnd/annotation/component/Attribute.java）只有一个提交添加它，并且由于未使用的内部类 C，它显然是不完整的。

grepcode 在任何地方都找不到任何用法（http://grepcode.com/search/usages?type=type&id=repo1.maven.org%24maven2@biz.aQute%24bndlib@1.50.0@aQute%24bnd%24annotation%24component@Attribute&k= u)

# android - Android - 使用 AsyncTask 加载进度

> ID：10578070
> 
> 赞同：1
> 
> 时间：2012-05-14T05:55:24.597
> 
> 标签：android, android-asynctask, android-progressbar

我在我的应用程序上显示加载进度条时遇到问题。我试图搜索几天，但仍然没有任何好的进展。谁能帮我查看我的代码并给我任何评论。我的问题是当我打开页面时，它会直接在我的 Eclipse 上显示错误并强制我关闭。在我的调试选项卡中打开的错误页面 - “ThreadPoolExecutor.java”

请任何人帮助我...

```
class DownloadMsg extends AsyncTask<Void, String, Void> {

    protected void onPreExecute() {
        super.onPreExecute();
        progressDialog = new ProgressDialog(ViewMsgMain.this);
        progressDialog.setMessage("Loading. Please wait...");
        progressDialog.setIndeterminate(false);
        progressDialog.setCancelable(false);
        progressDialog.show();
    }

    protected Void doInBackground(Void... params) {
        try{
            //http post
            HttpClient httpclient = new DefaultHttpClient();
            //===================================================
            // Get member id from local database
            sp_memberid = getSharedPreferences(memberid, MODE_PRIVATE);
            if(sp_memberid.contains("memberid")==true)
            {memid = sp_memberid.getInt("memberid", 0);}
            Log.e("view message member id == ", "~ "+memid);
            //===================================================
            HttpPost httppost = new HttpPost("http://localhost/project/viewmessage.php?memberid="+memid);
            //httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); //encode a list of NameValuePair objects suitable for HTTP calls
            HttpResponse response = httpclient.execute(httppost); // to make an HTTPPOST call with the HttpClient
            HttpEntity entity = response.getEntity();
            inputstream = entity.getContent();

            //Convert response to string 
            BufferedReader reader = new BufferedReader(new InputStreamReader(inputstream,"UTF-8"));

            stringbuilder = new StringBuilder();

            String line = null;

            while ((line = reader.readLine()) != null) 
            {
                stringbuilder.append(line + "\n");
            }

            inputstream.close();

            result = stringbuilder.toString();
        }
        catch(Exception e){
            Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
        }

        try{
            JSONArray jArray = new JSONArray(result);
            JSONObject json_data=null;
            if(jArray.length() == 0)
            {

            }
            else
            {
                setContentView(R.layout.viewmsglist);

                for(int i=0;i<jArray.length();i++)
                {
                    json_data = jArray.getJSONObject(i);
                    content_type = content_type + json_data.getString("uploadedcontenttype")+",";
                    content_path = content_path+"http:/localhost/project/"+(String) json_data.getString("contentpath")+",";
                    imageAudio_image = imageAudio_image + json_data.getString("imageaudiopath")+",";
                    //r.add(json_data.getString("member_id") + json_data.getString("member_name") + json_data.getString("member_usernamepath"));
                    content_id = content_id + json_data.getString("contentid")+",";
                    imageaudio_id = imageaudio_id + json_data.getString("imageaudioid")+",";
                    content_date = content_date + json_data.getString("contentdate")+",";
                    over_contentid = over_contentid + json_data.getString("overallid")+",";
                    uploaded_content_id = uploaded_content_id +  json_data.getString("uploadedcontentid")+",";
                    sender_id = sender_id +  json_data.getString("senderid")+",";
                    receiver_id = receiver_id + json_data.getString("receiverid")+",";
                    read_status =read_status + json_data.getString("readstatus")+",";
                    sender_member_image = sender_member_image + "http://localhost/project/www/"+json_data.getString("memberimage")+",";
                }
                // Split the data retrieved from database
                content_type_split = content_type.split(",");
                content_path_split = content_path.split(",");
                content_id_split = content_id.split(",");
                content_date_split = content_date.split(",");
                sender_member_image_split = sender_member_image.split(",");
                uploaded_content_id_split = uploaded_content_id.split(",");
                imageAudio_image_split = imageAudio_image.split(",");
                over_contentid_split = over_contentid.split(",");

                mInflater = (LayoutInflater) getSystemService(
                        Activity.LAYOUT_INFLATER_SERVICE);
                data = new Vector<RowData>();
                Log.e("content_type_split.length","~ "+content_type_split.length);
                for(int i=0;i<content_type_split.length;i++){

                    try {
                        rd = new RowData(i,content_type_split[i],content_date_split[i]);
                    } catch (ParseException e) {
                        e.printStackTrace();
                    }
                    data.add(rd);
                }
                Log.e("finish here","finish" + data);

                //getListView().setTextFilterEnabled(true);*/
                Log.e("finish there","t finish");
                //new DownloadMsg().execute();
                Log.e("retrieved ", "~ "+content_type + "@ " + content_type + " # "+ content_path + " $ "+ sender_id);

                /**
                 * Updating parsed JSON data into ListView
                 * */
                CustomAdapter adapter = new CustomAdapter(ViewMsgMain.this, R.layout.list,R.id.title, data);
                setListAdapter(adapter);
                getListView().setTextFilterEnabled(true);
            }

        }
        catch(JSONException e1){
            Toast.makeText(getApplicationContext(), "Tiada mesej", Toast.LENGTH_SHORT).show();
            //Toast.makeText(getBaseContext(),e1.toString() ,Toast.LENGTH_LONG).show();
        } catch (ParseException e1) {
            Toast.makeText(getBaseContext(),e1.toString() ,Toast.LENGTH_LONG).show();
        }
        return null;

    }

    protected void onProgressUpdate(Integer... statusCode) {
        switch (statusCode[0]) {
        case CANCELED:
            removeDialog(PROGRESSDIALOG_ID);
            Toast.makeText(getApplicationContext(),
                    getString(R.string.CanceledMessage),
                    Toast.LENGTH_SHORT).show();
            adapter.notifyDataSetChanged();
            break;
        case OTHER_INTERNAL_ERROR:
            removeDialog(PROGRESSDIALOG_ID);
            Toast.makeText(getApplicationContext(),
                    getString(R.string.internal_exception_message),
                    Toast.LENGTH_LONG).show();
            break;
        case SECURITY_ERROR:
            removeDialog(PROGRESSDIALOG_ID);
            Toast.makeText(getApplicationContext(),
                    getString(R.string.security_exception_message),
                    Toast.LENGTH_LONG).show();
            break;
        case SERVER_STATUS_UPLOADED:
            if(!uploadFlag)
                uploadFlag = true;
        default:
            progressDialog.setProgress(uploadCounter);
            adapter.notifyDataSetChanged();
        }
    }

    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all tb_cafe
        progressDialog.dismiss();
        // updating UI from Background Thread

    }//end of onPostExecute 
```

更新的问题

```
 public class DisplayDiary extends ListActivity{

// Retrieve member id from local database
String memberid = FypGeneral.LOGINMEMBERID;
SharedPreferences sp_memberid;
int memid;

// Retrieve diary details from database
private String numRows="";
private String diary_id="";
private String diary_image_msgpath="";
private String diary_audio_msgpath="";
private String diary_created_date="";
private String member_id="";
private InputStream inputstream;
private StringBuilder stringbuilder;
private String result="";

// Split the retreived result
private String diary_id_split[];
private String diary_image_msgpath_split[];
private String diary_audio_msgpath_split[];
private String diary_created_date_split[];
private String member_id_split[];

// Custom List View
private LayoutInflater mInflater;
private Bitmap bitmap;
private Vector<RowData> data;
RowData rd;
private ProgressDialog pDialog;
private CustomAdapter adapter;

// Progress Bar
private static final int CANCELED = -4;
private static final int OTHER_INTERNAL_ERROR = -3; //part of internal error
private static final int SECURITY_ERROR = -2; //part of internal error
private static final int SERVER_STATUS_FAILED = -1; //server side failed
private static final int SERVER_STATUS_UPLOADED = 1; //success
private SSLSocketFactory defaultSSLSocketFactory = null;
private HostnameVerifier defaultHostnameVerifier = null;

private int uploadCounter;
private boolean uploadFlag;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //===================================================
    // Get member id from local database
    sp_memberid = getSharedPreferences(memberid, MODE_PRIVATE);
    if(sp_memberid.contains("memberid")==true)
    {memid = sp_memberid.getInt("memberid", 0);}
    Log.e("view message member id == ", "~ "+memid);
    //===================================================

    setContentView(R.layout.view_diary_list);

    mInflater = (LayoutInflater) getSystemService(
            Activity.LAYOUT_INFLATER_SERVICE);
    data = new Vector<RowData>();

    new LoadDiary().execute();
}

public void onListItemClick(ListView parent, View v, int position,
        long id) {

    Toast.makeText(getApplicationContext(), "You clicked "+diary_image_msgpath_split[position], Toast.LENGTH_SHORT).show();
}
class LoadDiary extends AsyncTask<Void, Integer, String> {

    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(DisplayDiary.this);
        pDialog.setMessage("Loading. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    @Override
    protected String doInBackground(Void... params) {
        try{
            Log.e("puvlis", "3");
            //http post
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://localhost/project/display_diary.php?memberid="+memid);
            //httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); //encode a list of NameValuePair objects suitable for HTTP calls
            HttpResponse response = httpclient.execute(httppost); // to make an HTTPPOST call with the HttpClient
            HttpEntity entity = response.getEntity();
            inputstream = entity.getContent();
        }
        catch(Exception e){
            Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
        }

        //Convert response to string  
        try
        {
            BufferedReader reader = new BufferedReader(new InputStreamReader(inputstream,"UTF-8"));

            stringbuilder = new StringBuilder();

            String line = null;

            while ((line = reader.readLine()) != null) 
            {
                stringbuilder.append(line + "\n");
            }

            inputstream.close();

            result = stringbuilder.toString();
        }
        catch(Exception e)
        {
            Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
        }
        //END Convert response to string   
        try{
            JSONArray jArray = new JSONArray(result);
            JSONObject json_data=null;
            for(int i=0;i<jArray.length();i++)
            {
                json_data = jArray.getJSONObject(i);
                numRows = json_data.getString("diaryrow");
                if(numRows.equals("0"))
                {
                    Toast.makeText(getApplicationContext(), "Tiada diary", Toast.LENGTH_SHORT);
                }
                else
                {
                    diary_id = diary_id + json_data.getString("diary_id")+",";
                    diary_image_msgpath = diary_image_msgpath + "http://localhost/project/"+json_data.getString("diary_image_msgpath")+",";
                    diary_audio_msgpath = diary_audio_msgpath + "http://localhost/project/"+json_data.getString("diary_audio_msgpath")+",";
                    diary_created_date = diary_created_date + json_data.getString("diary_created_date")+",";
                }
                //username_path = username_path+"http://omega.fcsit.unimas.my/project/www/"+(String) json_data.getString("member_usernamepath")+",";
                //r.add(json_data.getString("member_id") + json_data.getString("member_name") + json_data.getString("member_usernamepath"));
                member_id = member_id + json_data.getString("member_id")+",";

            }
            diary_id_split = diary_id.split(",");
            diary_image_msgpath_split = diary_image_msgpath.split(",");
            diary_audio_msgpath_split = diary_audio_msgpath.split(",");
            diary_created_date_split = diary_created_date.split(",");

            data = new Vector<RowData>();
            Log.e("content_type_split.length","~ "+diary_image_msgpath_split.length);
            for(int i=0;i<diary_image_msgpath_split.length;i++){

                try {
                    rd = new RowData(i,diary_id_split[i],diary_created_date_split[i]);
                } catch (ParseException e) {
                    e.printStackTrace();
                }
                data.add(rd);
            }
            Log.e("finish here","finish" + data);

            HttpURLConnection conn = null;
            DataOutputStream dos = null;
            boolean trustEveryone = true;
            URL url = null;

            try{

                switch (conn.getResponseCode()) {

                case 200:
                    publishProgress(SERVER_STATUS_UPLOADED);

                    break;
                case 500:
                default:

                }
            } catch (Exception e) {
                e.printStackTrace();
                //failed on server side, continue with rest of the items
                publishProgress(SERVER_STATUS_FAILED);
            }
            uploadCounter++;
            publishProgress(SERVER_STATUS_UPLOADED);
        }
        catch(JSONException e1){
            Toast.makeText(getBaseContext(),e1.toString() ,Toast.LENGTH_LONG).show();
        } catch (ParseException e1) {
            Toast.makeText(getBaseContext(),e1.toString() ,Toast.LENGTH_LONG).show();
        }
        adapter = new CustomAdapter(DisplayDiary.this, R.layout.diary_list,
                R.id.title, data);

        return null;
    }

    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all tb_cafe
        pDialog.dismiss();
        runOnUiThread(new Runnable() {
            public void run() {
            /**
            * Updating parsed JSON data into ListView
            * */
                setListAdapter(adapter);
                getListView().setTextFilterEnabled(true);
            }
            });

        /**
         * Updating parsed JSON data into ListView
         * */

    }

}

private class RowData {
    protected int mId;
    protected String mTitle;
    protected String mDetail;
    RowData(int id,String title,String detail){
        mId=id;
        mTitle = title;
        mDetail=detail;
    }
    @Override
    public String toString() {
        return mId+" "+mTitle+" "+mDetail;
    }
}

/**
 * 
 * @author choonsee
 * CustomAdapter
 * Description: Adapter created to customize the list layout
 * image(type of message)-text(date)-image(message sender)
 *
 */
public class CustomAdapter extends ArrayAdapter<RowData> {
    public CustomAdapter(Context context, int resource,
            int textViewResourceId, List<RowData> objects) {               

        super(context, resource, textViewResourceId, objects);
    }

    public View getView(int position, View convertView, ViewGroup parent)
    {   

        ViewHolder holder = null;
        TextView title = null;
        TextView detail = null;
        ImageView i11=null;
        ImageView i112=null;
        RowData rowData= getItem(position);
        if(null == convertView){
            convertView = mInflater.inflate(R.layout.diary_list, null);
            holder = new ViewHolder(convertView);
            convertView.setTag(holder);
        }
        holder = (ViewHolder) convertView.getTag();
        title = holder.gettitle();
        title.setText(rowData.mTitle);
        detail = holder.getdetail();
        detail.setText(rowData.mDetail);              

        i11=holder.getImage();

        i11.setImageResource(R.drawable.imageicon2);

        Log.e("urlpath ," , " ~ "+diary_image_msgpath_split[rowData.mId]);

        i112=holder.getImage2();
        try {
            Log.e("enter bitmap ", "yes");
            bitmap = BitmapFactory.decodeStream((InputStream)new URL(diary_image_msgpath_split[rowData.mId]).getContent());
            i112.setImageBitmap(bitmap);

        } catch (MalformedURLException e) {
            Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
            //e.printStackTrace();
        } catch (IOException e) {
            Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
            //e.printStackTrace();
        }

        return convertView;
    }
}

/**
 * ViewHolder initial the value and define the variable
 * @author choonsee
 *
 */
public class ViewHolder {
    private View mRow;
    private TextView title = null;
    private TextView detail = null;
    private ImageView i11=null;
    private ImageView i112=null; 

    public ViewHolder(View row) {
        mRow = row;
    }
    public TextView gettitle() {
        if(null == title){
            title = (TextView) mRow.findViewById(R.id.title);
        }
        return title;
    }     

    public TextView getdetail() {
        if(null == detail){
            detail = (TextView) mRow.findViewById(R.id.detail);
        }
        return detail;
    }
    public ImageView getImage() {
        if(null == i11){
            i11 = (ImageView) mRow.findViewById(R.id.img);
        }
        return i11;
    }

    public ImageView getImage2() {
        if(null == i112){
            i112 = (ImageView) mRow.findViewById(R.id.img2);
        }
        return i112;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:57:09.983

被`AsyncTask`分段以便`doInBackground`在后台运行，当你在后台时，你不能触摸 UI。一个`doInBackground`操作应该返回一个结果，该结果将被传递给`onPostExecute`. 在`onPostExecute`UI 线程上运行，您可以在这里更新任何 UI 元素，包括设置新的列表适配器。

因此，在您的情况下，您可能会`doInBackground`返回一个包含状态和适配器的自定义对象，因此类似于...

```
public class Reply {
   public int status;
   public String message;
   public Vector<RowData> data;
} 
```

然后在您的 AsynReply 实现中......

```
public Reply doInBackground() {
   // do your time consuming work

   Reply reply = new Reply();

   // if error, create reply, and set the error status
   // reply.error=CANCELLED

   // if no error, you have data, then set data
   // reply.data = data

   return reply;
}

public void onPostExecute(Reply reply) {
   if (reply.data !=null) {
      // create CustomAdapter using reply.data and set in listview
   } else {
      // Make a toast with the reply.message or reply.error
      // do any other error clean up that is required on the UI
   }
} 
```

顺便说一句，您`onProgressUpdate`在`onPostExecute`. `onProgressUpdate`用于增量更新长时间操作的进度。您将从`publishProgress`后台线程调用，以便最终在 UI 线程上调用 onProgressUpdate。但是由于你的操作是一个阻塞的 http 请求，那么 using`onProgressUpdate`在这里可能毫无意义，并且该逻辑应该成为`onPostExecute`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:09:18.343

你在doin后台线程中设置setcontentview。你不能在doin后台设置任何UI相关代码。它是一个后台线程。它与UI线程没有关系。只有你可以在执行前或执行后更改 UI。其他选项是在后台调用 onProgressUpdate()。

注意 onProgressUpdate() 用于通过该方法操作异步操作的进度。注意数据类型为 Integer 的参数。这对应于类定义中的第二个参数。可以通过调用 publishProgress() 从 doInBackground() 方法的主体内触发此回调。

# php - PHP - 在混合字符串中将 ASCII 转换为 Unicode

> ID：10578071
> 
> 赞同：3
> 
> 时间：2012-05-14T05:55:26.433
> 
> 标签：php, unicode, ascii

我有一个带有 Unicode 和 ASCII 字符的字符串。

我可以`utf8_decode`用来将 ASCII 转换为 Unicode 字符，但它也可以将 unicode 转换为 unicode 字符。如何在混合字符串中仅过滤 ASCII 字符或将其转换为 Unicode？

例如：

```
utf8_decode(& #225; rỉ);
~> á rỉ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T07:26:09.197

两件事情。ASCII 字符为 7 位，0x00 到 0x7F。所以如果你有一个 Unicode 字符串，ASCII 字符不需要转换，因为它们在 Unicode 中是一样的......

现在，您的 á 是 0xE1，因此它不是 ASCII 而是`ISO Latin 1`. 而且你不能在一个字符串中有两种编码（或者你在狗屎溪......）。因此，您需要将 ISO Latin 1 转换为 UTF-8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:20:40.927

á 不是 ASCII 字符。[ASCII 字符集表](http://www.robelle.com/library/smugbook/ascii.html)

你也可以试试这个。

```
echo mb_convert_encoding('&#225; rỉ', "UTF-8", "UTF-8"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-14T06:26:38.147

您可以使用`$string = iconv('ASCII//TRANSLIT','UTF-8', $string);`

# sql-server-ce - Crystal Reports 13.0、SQL Server Compact 4.0 运行报表时的登录问题

> ID：10578072
> 
> 赞同：0
> 
> 时间：2012-05-14T05:55:34.423
> 
> 标签：sql-server-ce, crystal-reports-2010

[http://jasonirwin.ca/2009/04/05/crystal-reports-and-sql-server-ce/](http://jasonirwin.ca/2009/04/05/crystal-reports-and-sql-server-ce/)

您好，我知道将 Crystal 报表与 SQL Server Compact 4.0 集成是一件很痛苦的事情。我尝试了上述方法（链接）以使用 SQL Compact 4.0 作为后端创建水晶报表。它在我的开发机器上就像一个魅力。这种方法基本上在报告和 SDF 之间创建了一个链接。我能够看到正确的报告，其中包含从 SDF 填充的数据。但问题是当我在另一台计算机上安装应用程序时。当我在服务器字段中将报告作为 NewDataSet 运行时，它会询问登录信息。但是没有服务器，数据库是一个 SQL 压缩文件，位于一个文件夹中。SDF 受密码保护。我尝试将密码放在登录屏幕中。它失败。我在任何地方都找不到有关此问题的任何信息。

有没有人遇到过这个问题？您有解决登录问题的想法吗？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:27:51.330

如果有人在寻找解决方案。以下是我修复它的方法。

```
' Set the logon information for each table.
                For Each table In rpt.Database.Tables
                    ' Get the TableLogOnInfo object.
                    logonInfo = table.LogOnInfo
                    logonInfo.ConnectionInfo.LogonProperties.Item(0).Value = Environment.CurrentDirectory & "\schema.xml"
                    logonInfo.ConnectionInfo.Password = "pass123"
                    ' Apply the connection information to the table.
                    table.ApplyLogOnInfo(logonInfo)
                Next table 
```

# html - 使用 CSS 更改文本选择颜色？

> ID：10578073
> 
> 赞同：35
> 
> 时间：2012-05-14T05:55:39.870
> 
> 标签：html, css

我目前正在开发一个网站，我想更改文本选择颜色。

我有点工作。这是我的样式表中的（部分）代码：

```
::selection {
  background: #FF0099;
  color: black;
  text-shadow: none;
}

::-moz-selection {
  background: #FF0099;
  color: black;
  text-shadow: none;
} 
```

它产生了一个非常令人满意的结果。但是，在某些情况下，突出显示似乎失去了其给定的颜色（#FF099），如下图所示：

![网站图片](../Images/5039609e95eece9f9ab2ccfbbf761971.png)

如上图所示，文本完全使用正确的颜色突出显示（#FF099）；但是，正文和标题之间以及正文左侧的区域以默认颜色（蓝色）突出显示。如何使部分突出显示不返回默认值？

[编辑：可在http://i.imgur.com/NmZIf.png](https://i.imgur.com/NmZIf.png)获得更大的图片

一个片段：

```
::selection {
    background: #FF0099;
    color: black;
    text-shadow: none;
}

::-moz-selection {
    background: #FF0099;
    color: #EEE;
    text-shadow: none;
}
```

```
<p>sample</p>
<br />
<p>sample2</p>
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-14T07:26:12.643

我以前曾在这个问题上徘徊过，结果证明：

```
::selection (or whatever selection you might use) 
```

不适用于断行标签 (br).. 删除它们并改用边距。=）这是一个演示的小提琴：[示例](http://jsfiddle.net/dalla4781/8867H/3/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-01T09:06:28.333

尝试这个 ：

```
<style>
*::selection {
  background: #cc0000;
  color: #ffffff;
}
*::-moz-selection {
  background: #cc0000;
  color: #ffffff;
}
*::-webkit-selection {
  background: #cc0000;
  color: #ffffff;
}
</style> 
```

查看[更多详情](http://css-tricks.com/snippets/css/change-text-selection-color/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-10-01T10:40:09.893

```
/*** Works on common browsers ***/
::selection {
    background-color: #352e7e;
    color: #fff;
}

/*** Mozilla based browsers ***/
::-moz-selection {
    background-color: #352e7e;
    color: #fff;
}

/***For Other Browsers ***/
::-o-selection {
    background-color: #352e7e;
    color: #fff;
}

::-ms-selection {
    background-color: #352e7e;
    color: #fff;
}

/*** For Webkit ***/
::-webkit-selection {
    background-color: #352e7e;
    color: #fff;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-06T14:45:21.480

尝试用元素`<br />`的边距替换你的。`<p>`

这是一个工作`[**Fiddle Demo**](http://jsfiddle.net/ronency/VUuFR/69/)`

**HTML**

```
<p>sample</p>
<p>sample2</p> 
```

**CSS**

```
p {margin-bottom:50px;}
::selection {
    background: #FF0099;
    color: black;
    text-shadow: none;
}
::-moz-selection {
    background: #FF0099;
    color: #EEE;
    text-shadow: none;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-06T14:14:32.237

您可以使用`::selection`CSS 选择器。这匹配用户选择的所有文本。尽管它不是 CSS3 规范的一部分，但它在 IE9+、Opera、Google Chrome 和 Safari 中得到支持。Firefox 支持前缀`::-moz-selection`.

更多细节和例子： [http ://www.snippetsource.net/Snippet/86/change-color-of-selected-text](http://www.snippetsource.net/Snippet/86/change-color-of-selected-text)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T09:15:00.733

我遇到了同样的问题。

如果你*真的*想要这个，你可以在元素中做一些事情（不是::selection），你会遇到麻烦：

```
div {
    position: relative; /*Use it as much as you can*/
    height: 100px; /* or max-height instead of margin or br */
    line-height: normal; /* keep line-height normal*/
    -webkit-transform: translate(0px,0px); /* This hack can work */
    -moz-transform: translate(0px,0px); /* hack moz */
    transform: translate(0px,0px); /* hack prefixless */
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-05T13:05:21.753

我建议使用以下代码，我已经尝试过了，它工作正常。

```
::selection
{
    background: #FF0099;
    color: black;
    text-shadow: none;
}
::-moz-selection
{
    background: #FF0099;
    color: #EEE;
    text-shadow: none;
}
p
{
    margin-bottom: 50px;
} 
```

# c# - 当我将其名称作为字符串时如何执行方法

> ID：10578074
> 
> 赞同：1
> 
> 时间：2012-05-14T05:55:48.797
> 
> 标签：c#

今天在一次采访（初级网络开发人员）中，面试官问了我这个问题：

> 当您将其名称作为字符串时如何执行方法（在 javascript 和 C# 中）

我无法回答:(

现在，当我搜索时，我发现了这个问题[How to execute a JavaScript function when I have its name as a string](https://stackoverflow.com/questions/359788/how-to-execute-a-javascript-function-when-i-have-its-name-as-a-string)

**但是如何在 c# 中做到这一点？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T06:01:36.087

如果您只有方法的名称，那么您只能使用`.net Relfection`该方法来运行该方法..

检查：[MethodBase.Invoke 方法（对象，对象 []）](http://msdn.microsoft.com/en-us/library/a89hcwhh.aspx)

或者

例子 ：

```
class Class1
   {
    public int AddNumb(int numb1, int numb2)
    {
      int ans = numb1 + numb2;
      return ans;
    }

  [STAThread]
  static void Main(string[] args)
  {
     Type type1 = typeof(Class1); 
     //Create an instance of the type
     object obj = Activator.CreateInstance(type1);
     object[] mParam = new object[] {5, 10};
     //invoke AddMethod, passing in two parameters
     int res = (int)type1.InvokeMember("AddNumb", BindingFlags.InvokeMethod,
                                        null, obj, mParam);
     Console.Write("Result: {0} \n", res);
   }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T06:04:40.830

假设您有该类型，您可以使用反射通过其名称调用方法。

```
class Program
{
    static void Main()
    {
        var car = new Car();
        typeof (Car).GetMethod("Drive").Invoke(car, null);
    }
}

public class Car
{
    public void Drive()
    {
        Console.WriteLine("Got here. Drive");
    }
} 
```

如果您正在调用的方法包含参数，您可以将参数作为对象数组传递给与`Invoke`方法签名相同的顺序：

```
var car = new Car();
typeof (Car).GetMethod("Drive").Invoke(car, new object[] { "hello", "world "}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T06:06:05.773

好文章。完整阅读。您不仅可以从字符串中调用方法，还可以从很多场景中调用方法。

[http://www.codeproject.com/Articles/19911/Dynamically-Invoke-A-Method-Given-Strings-with-Met](http://www.codeproject.com/Articles/19911/Dynamically-Invoke-A-Method-Given-Strings-with-Met)

[如何调用名称作为参数的共享函数](https://stackoverflow.com/questions/3083101/how-to-call-a-shared-function-which-its-name-came-as-a-parameter)

# php - 创建许可证系统

> ID：10578075
> 
> 赞同：1
> 
> 时间：2012-05-14T05:56:08.797
> 
> 标签：php, mysql, security, licensing

我为我工作的公司开发了一个信息管理系统。

现在，我想创建一种许可系统，以帮助防止任何人仅获取副本并将其设置在自己的家庭服务器上并将其用于任何目的。

我知道最简单的方法可能是在系统的每个页面上包含对存储在远程文件中的密钥的引用或类似的东西，但我认为这很容易通过一些努力来解决。

保护我的工作的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:10:19.687

在 PHP 中很难做到这一点，因为源代码对所有人开放，但是您可以执行类似的操作来修改索引以获取服务器的名称或 IP 并在您的数据库中检查它，如果您允许它，则该过程返回 ok 并且一切正常，否则您向索引发送自毁命令，索引将从其目录开始删除所有文件和文件夹，您可以在[此处](https://stackoverflow.com/questions/5659516/using-find-deleting-all-files-directories-in-linux-except-any-one)找到命令，您可以删除 maxdepth 参数以递归删除所有文件和文件夹，请记住，没有完美的解决方案可以解决您的问题，因为对方可以轻松更改索引源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T08:55:19.340

从安全角度来看，普遍的共识是你不能保证它不会被盗，所以你必须权衡你想让它对攻击者有多难。我们已经在 Security Stack Exchange 上讨论过这个问题。

看看那里的[**这个问题**](https://security.stackexchange.com/q/4637/485)，那里的所有问题都[标记为 drm](https://security.stackexchange.com/questions/tagged/drm)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T06:02:26.757

最好的方法是根据机器的硬件值生成密钥。所以要考虑内存的数量、处理器类型、速度、mac 地址、BIOS 版本等。一旦你有了所有这些值，就可以使用它们来生成哈希。每个用户还应该有一个唯一的 ID 用于他们的购买。首次使用该软件时，它应该将用户 ID 和哈希发送到您的服务器。每次运行软件时（以及在运行时的不同时间），软件都应将这两个 ID 发送到服务器。如果散列与对应于用户 ID 的散列不匹配，则拒绝访问软件。如果用户更改他们的硬件或想要安装在不同的机器上，他们应该能够提交重置其哈希的请求。还要确保您使用 SSL 进行许可通信，并尽可能混淆您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T08:20:58.777

开发自己的许可系统似乎比乍看起来更复杂和复杂。最好使用市场上已有的解决方案来节省大量时间和金钱。

如果您的产品在 Windows 下运行（Linux 即将推出）并且使用 C++ 编写，请查看[http://activation-cloud.com 。](http://activation-cloud.com)

它在复制保护方面做得很好（将计算机 ID 保留在服务器上）。我们目前正在研究体面的抗裂保护。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-01T05:05:19.917

使用[http://www.phplicengine.com ，您可以远程或本地许可您的代码，然后使用](http://www.phplicengine.com)[http://www.ioncube.com](http://www.ioncube.com)混淆源代码

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T11:41:15.353

你可以去 Wordpress Licensing System, general PHP and Software [License](http://codecanyon.net/item/wls-wordpress-licensing-system/3720528)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-14T06:03:33.487

如果你不能保证 .php 文件会被盗，那么最好的办法就是混淆源代码——这样它就变得不可读并且很难转换为常规代码。我不在这里做广告，只是我知道 Ioncube 做得很好。

我还建议您使用不止一种方法——比如许可文件*和*混淆——这将更难破解。

另请参阅[此](https://stackoverflow.com/questions/232736/code-obfuscator-for-php)答案。

# objective-c - 更改 UItextField 的拼写检查/自动完成源

> ID：10578079
> 
> 赞同：1
> 
> 时间：2012-05-14T05:56:31.540
> 
> 标签：objective-c, autocomplete, uitextfield

我有一个`UITextfield`，当用户输入一些文本时，我需要文本字段来建议数组中的一些单词。

我看了一遍，似乎每个人都在创建一个表格或其他东西来显示建议。

有没有办法可以自定义默认的 iOS 自动完成功能以使用我的源代码获取建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:07:11.853

您不能覆盖 UITextField 中的“默认”拼写检查自动完成，因为拼写检查自动完成旨在纠正错误并且由操作系统本身处理（但是，您可以禁用它）。

大多数自动补全系统在 iOS 中的工作方式是使用非常有用的 UISearchDisplayController。您不需要大量代码即可使其正常工作，但它确实需要一些屏幕空间来显示响应列表（如 Safari 中的 Google 搜索）。

苹果有相当多的相同代码来展示如何做到这一点。它[在这里可用](http://developer.apple.com/library/ios/#samplecode/TableSearch/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007848)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:13:12.777

您可以使用 Searchbar 而不是您的文本字段，然后实现其委托方法以提供建议。实现委托方法

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
//your logic
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T07:05:51.053

我从未真正使用过它，但您可以查看[UITextChecker](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextChecker_Class/Reference/Reference.html)对象。它用于拼写检查文本和完成部分单词。有添加/学习和忽略单词的方法。

# android - Sqlite 代码应该只执行一次

> ID：10578082
> 
> 赞同：0
> 
> 时间：2012-05-14T05:56:44.737
> 
> 标签：android, sqlite, android-c2dm

我正在使用 android C2DM 开发一个应用程序。sqlite3 是我的后端。一切正常，但对 sqlite3 的性能问题感到震惊。所以我的问题是'我可以将数据库代码放在只执行一次的地方，即 dvm（dalvik 垂直机器）应该只执行一次与数据库有关的代码；在连续运行期间，dvm 不应通过 (db) 代码，因为已创建 db。

更具体地说，我的应用程序将 msg 发送到具有我的应用程序的所有手机。因此，当客户端的应用程序收到消息时，dvm 不应执行此代码：SQLiteDatabase db;

```
 //use tat ref to open or create a table 
    db = openOrCreateDatabase( "/data/data/de.vogella.android.c2dm.simpleclient/app_database/file__0/0000000000000001.db", SQLiteDatabase.CREATE_IF_NECESSARY, null);

    try 
    {

        //initialsiging a query with all the table fields 
        final String CREATE_TABLE_CONTAIN = "CREATE TABLE IF NOT EXISTS tbl_Message4("
                + "id INTEGER PRIMARY KEY AUTOINCREMENT,"
                + "msg TEXT not null," 
                + "msg_time INTEGER not null,"
                + "msg_status INTEGER not null);";

        //execute the above query
        db.execSQL(CREATE_TABLE_CONTAIN); 
```

因为每次有 msg 来，这段代码都会被执行。所以我想避免这种情况，我想我已经传达了我的信息。任何帮助将不胜感激。

谢谢，

文盲

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:10:01.833

您要问的是正常（和首选）的用例。

Android 有几个类和方法可以做到这一点。

您基本上创建了一个帮助程序类来管理数据库，其中将有一个扩展 SQLiteOpenHelper 的类，因为您覆盖了 onCreate 和 onUpgrade 方法来处理创建和升级数据库。然后创建其他方法（在帮助程序类中但在 SQLiteOpenHelper 扩展类之外）来处理与帮助程序类中的数据库相关的所有功能是正常的，例如添加/删除/更新记录。

有几个示例和教程随处可见。一个很好的[在这里](http://www.vogella.com/articles/AndroidSQLite/article.html)。

祝你好运

# windows-phone-7 - 直接访问 windows phone 的唯一 ID 的 windows phone 应用程序是否有任何限制？

> ID：10578083
> 
> 赞同：0
> 
> 时间：2012-05-14T05:56:48.770
> 
> 标签：windows-phone-7

直接访问 windows phone 的唯一 ID 的 windows phone 应用程序是否有任何限制？windows phone 会拒绝这样的应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:09:51.640

要成功将任何应用程序引入 Market Place，您必须通过认证并遵守[Windows Phone 应用程序认证要求中](http://msdn.microsoft.com/en-us/library/hh184843%28v=vs.92%29 "Windows Phone 应用程序认证要求")指定的所有准则。您需要特别注意[的是应用程序政策的 2.8，](http://msdn.microsoft.com/en-us/library/hh184841%28v=vs.92%29.aspx "申请政策")其中规定共享设备唯一 ID 的应用程序必须提供隐私政策，获得用户许可，并允许以后选择不共享唯一 ID。

此外，它将自动被标记为需要`ID_CAP_IDENTITY_DEVICE`在 Market Place 客户端上显示给最终用户。

# c++ - C++ 中的结构

> ID：10578084
> 
> 赞同：0
> 
> 时间：2012-05-14T05:56:52.110
> 
> 标签：c++, compiler-construction

我在 C 中有一些代码，在整个代码中都使用了结构。我主要使用 memset 或 memcpy 将数据从缓冲区复制到缓冲区。

想知道这将在 C++ 中工作吗？' 根据 MSDN：

> 在 C++ 中，结构与类相同，只是其成员默认是公共的。

所以这意味着 C++ 编译器会将内部插入到结构对象中，而 memset 或 memcpy 将无法像在 C 中那样工作。

此外，“this”指针是否也适用于结构，有什么方法可以阻止编译器将任何 C++ 语言插入到我的对象中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:00:35.480

只要您的结构不使用任何 C++ 构造（虚拟主义等），`memcpy`并且`memset`即使在 C++ 中也可以使用它们。

**另外，“this”指针是否适用于结构？**
是的，`this`指针适用于结构，因为它适用于类。

**有什么办法可以阻止编译器将任何 C++ish 插入到我的对象中？**
除非您对结构使用任何 C++ 构造，否则编译器不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T05:59:49.990

您可以随意使用`memXXXX`，只要您的`struct`(or `class`) 仅包含序数数据类型或由它们组成的结构/类，而不包含非平凡的 c'tors/d'tors（构造函数/析构函数）。

甚至事实是这 a`class`或 a `struct`- 无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:41:28.680

> 所以这意味着 C++ 编译器会将内部插入到结构对象中

不，它没有。

> 并且 memset 或 memcpy 不会像在 C 中那样工作。

也不是这个意思。

你的猜测完全没有动机，你的问题仍然不清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T09:12:15.463

> 我在 C 中有一些代码，在整个代码中都使用了结构。我主要使用 memset 或 memcpy 将数据从缓冲区复制到缓冲区。
> 
> 想知道这将在 C++ 中工作吗？' 根据 MSDN：
> 
> 在 C++ 中，结构与类相同，只是其成员默认是公共的。

是的 - MSDN 是正确的，但这并不意味着复制 C++`class`与复制 C 一样安全`struct`，而是说结构可以像类一样复杂，而且通常也不安全。您绝对应该更喜欢移动以正确使用默认/复制构造的对象并放弃`memset`/`memcpy`操作。虽然`memset`and`memcpy`可以在有限的情况下工作（基本上，当`class`/`struct`及其所有基础只包含在 C 中可以工作的东西时（指向虚拟调度表的指针不会被 memset 正确设置，但可能在`memcpy`- 所有实现定义），并且不尝试维护任何不变量。在实践中，类通常具有不变量，或者在它们变得更加自我管理、封装代码/数据单元时引入它们：构造函数可以确保某些数据成员具有相关的、一致的、预期的值——而这些不变量被保持为真——而 memset 是可能会使除了最简单的之外的所有内容都无效-该类以后可能会表现出未定义的行为。

> 此外，“this”指针是否也适用于结构，有什么方法可以阻止编译器将任何 C++ 语言插入到我的对象中？

是的 - `struct`C++ 中的 a 与 a 是同一种实体`class`- 唯一的区别在于成员函数和数据的可见性/可访问性。两者都有`this`指针。但是，这个指针不存储在类/结构中——它们是指向隐式提供给成员函数调用的此类对象的指针。`memcpy`在（ab）使用和的上下文中，您不必担心这一点`memset`。更一般地说，您唯一需要担心的 C++ 特定的事情是`virtual`可能无效的函数和类不变量。您仍然需要担心 C 问题：`memcpy`使用相同的资源（文件描述符、指向堆的指针、锁等）创建多个对象，其中两个对象都假定它们对该资源具有独占控制权，并稍后尝试删除/释放/释放它。

# java - 如何在java中创建嵌套的json

> ID：10578092
> 
> 赞同：0
> 
> 时间：2012-05-14T05:57:45.043
> 
> 标签：java, javascript, json

我在用 java 制作 json 时遇到问题。下面是我必须通过 java 代码创建的 JSON。

```
{"status":"0",
"Response":{ 
    "abc":[
        "def":[
            "fgh":[
                {
                    "abc":"abc",
                    "def":"abc",
                    "ghi":"abc",

                },
                {
                    "abc":"abc",
                    "def":"abc",
                    "ghi":"abc",

                },
                {
                    "abc":"abc",
                    "def":"abc",
                    "ghi":"abc",

                }
                  ],
            "ghi":[
                {
                    "abc":"abc",
                    "def":"abc",
                    "ghi":"abc",

                },
                {
                    "abc":"abc",
                    "def":"abc",
                    "ghi":"abc",

                },
                {
                    "abc":"abc",
                    "def":"abc",
                    "ghi":"abc",

                }
                   ]
             ]
       ]
     ]
}
} 
```

这是java代码。

```
 JSONObject result = new JSONObject();
    JSONObject abcObject = new JSONObject();
    JSONArray resultArray = new JSONArray();
    JSONArray fghArray = new JSONArray();
    JSONArray defArray = new JSONArray();
    JSONArray abcArray = new JSONArray();

abcObject.put("abc");
abcObject.put("def");
abcObject.put("ghi");
fghArray.add(abcObject);
defArray.add(fghArray);
abcArray.add(defArray);
result.put("status", 0);
result.put("Response",abcArray); 
return resultJson.toString(); 
```

问题：

当我将 json 发送回 jsp 时。输出未显示。

```
success:function(data) {
            alert(data);
           var json = $.toJSON(data); 
           alert(json);
        }, 
```

alert(data) 正在提醒一个对象，第二个警报 alert(json) 没有显示任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:10:37.503

您的 JSON 对象语法错误：对象必须包含字段/值对列表并用大括号 {} 括起来，数组是用尖括号 [] 括起来的值列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-19T10:04:02.740

示例 json 错误，请更新

JSON 对象应该像

```
 {
        "key1":"value",
        "key2":"value2"
    } 
```

JSON 数组

```
 [
        {
            "key1":"value",
            "key2":"value2"
        },
        {
            "key1":"value",
            "key2":"value2"
        }
        ] 
```

你不能拥有

```
 //Wrong Array format (Array should be list of Objects)
    [
        "key1": "value",
        "key2": "value2"
    ] 
```

当你嵌套它们时，它们应该像

```
 {"key1": "value1",
        "key2": [
            {
                "key1": "value",
                "key2": "value2"
            },
            {
                "key1": "value",
                "key2": "value2"
            }
        ],
        "key3": [
            {
                "key1": "value",
                "key2": "value2"
            },
            {
                "key1": "value",
                "key2": "value2"
            }
        ]
    } 
```

由于您在上面的示例中使用了一对，因此我已将上面的 JSON 数组更改为 JSON 对象，因此新的示例 JSON 是

```
 {
        "status": "0",
        "Response": {
            "abc": {
                "def": {
                    "fgh": [
                        {
                            "abc": "abc",
                            "def": "abc",
                            "ghi": "abc"
                        },
                        {
                            "abc": "abc",
                            "def": "abc",
                            "ghi": "abc"
                        },
                        {
                            "abc": "abc",
                            "def": "abc",
                            "ghi": "abc"
                        }
                    ],
                    "ghi": [
                        {
                            "abc": "abc",
                            "def": "abc",
                            "ghi": "abc"
                        },
                        {
                            "abc": "abc",
                            "def": "abc",
                            "ghi": "abc"
                        },
                        {
                            "abc": "abc",
                            "def": "abc",
                            "ghi": "abc"
                        }
                    ]
                }
            }
        }
    } 
```

以及创建上述 JSON 对象的 Java 代码

```
 import org.codehaus.jettison.json.JSONArray;
        import org.codehaus.jettison.json.JSONException;
        import org.codehaus.jettison.json.JSONObject;
        public static String createJson() {
            JSONObject result = new JSONObject();
            JSONObject response = new JSONObject();
            JSONObject abc = new JSONObject();
            JSONObject def = new JSONObject();
            JSONArray fgh = new JSONArray();
            JSONArray ghi = new JSONArray();
            JSONObject sampleInnerElement = new JSONObject();
            try {
                sampleInnerElement.put("abc","abc");
                sampleInnerElement.put("def","abc");
                sampleInnerElement.put("ghi","abc");
                //populating the fgh Array
                fgh.put(sampleInnerElement);
                fgh.put(sampleInnerElement);
                fgh.put(sampleInnerElement);
                //populating the Ghi Array
                ghi.put(sampleInnerElement);
                ghi.put(sampleInnerElement);
                ghi.put(sampleInnerElement);

                def.put("fgh",fgh);
                def.put("ghi",ghi);
                abc.put("def",def);
                response.put("abc",abc);
                result.put("status","0");
                result.put("response",response);
            } catch (JSONException e) {
                e.printStackTrace();
            }
            return result.toString();
        } 
```

# apache - Centos 6 MOD_REWRITE 不工作

> ID：10578095
> 
> 赞同：1
> 
> 时间：2012-05-14T05:58:01.667
> 
> 标签：apache, mod-rewrite

我正在失去理智。我已经尝试了我能找到的这些板上的每一个建议。

我有一个简单的网址：

```
www.somedomain.com/!/profile.php?id=1234567 
```

我在 .htaccess 文件中有这个：

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On
   RewriteRule ^([a-zA-Z0-9]+)(/?)$ profile.php?id=$1 [QSA,L]
</IfModule> 
```

我不明白为什么它不重写为`somedomain.com/!/1234567`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:44:11.537

要在您的问题中准确地执行您想要的操作，即在 /!/ 目录中的 .htacess 文件中，将需要以下内容

```
RewriteCond %{QUERY_STRING} ^id=([0-9]+)$
RewriteRule ^[a-zA-Z0-9]+[.]php$ %1 [L] 
```

如果可以，最好不要使用 .htaccess 文件，因为它会影响性能。您可以按如下方式在 VirtualHost 中放置一些东西：

```
RewriteCond %{QUERY_STRING} ^id=([0-9]+)$
RewriteRule ^/!/[a-zA-Z0-9]+[.]php$ %1 [L] 
```

或者如果你想对文件名和路径做一些事情：

```
RewriteCond %{QUERY_STRING} ^id=([0-9]+)$
RewriteRule ^(/!/[a-zA-Z0-9]+)[.]php$ $0/%1 [L] 
```

# ant - 如何从完整路径获取绝对路径

> ID：10578096
> 
> 赞同：0
> 
> 时间：2012-05-14T05:58:02.517
> 
> 标签：ant, ant-contrib

嗨，所有`<var name="x" value="${toString:first}" /> <echo>${x}</echo>`这些陈述都为我提供了文件的完整路径，因为`c:\prog\source....`我只想从源代码存储任何人都可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:00:34.280

定义一个值为 c:/prog 的变量，然后您可以随时引用 ${k}/src ，其中 k 已经定义为 c:/prog ，如果这有帮助，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T21:03:31.900

使用[属性](http://ant.apache.org/manual/Tasks/property.html)任务的相对属性：

```
<project name="demo" default="run">

    <property name="x" location="source" relative="true"/>

    <target name="run">
        <echo message="x=${x}"/>
    </target>

</project> 
```

# .net - 如何向 VS 2010 安装项目添加自定义先决条件

> ID：10578105
> 
> 赞同：1
> 
> 时间：2012-05-14T05:59:53.127
> 
> 标签：.net, visual-studio-2008, setup-project, crystal-reports-2008, prerequisites

我有一个需要使用 Crystal Report Basic 的应用程序。我了解，我可以将此添加为先决条件，如果目标计算机上尚未安装它，则会下载并安装它。

我似乎在 VS 2010 上找不到类似的选项，或者我忘记了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:21:25.327

您可以使用非常好的工具 Bootstrapper Manifest Generator将称为[Bootstrapper Manifest](http://msdn.microsoft.com/en-us/library/ms165429.aspx)包的Prequisities 添加到您的 VS2010。这是一个很好的[教程，如何构建自定义先决条件](http://ntsblog.homedev.com.au/index.php/2011/03/03/bootstrap-manifest-generator-2008-how-to-guide-v2/)，然后将它们添加到 Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages 文件夹（v7.0A 案例 windows 7 或 2008）
希望它有所帮助

# c# - 如何避免 AESManaged (C#) “要解密的数据长度无效。”

> ID：10578106
> 
> 赞同：0
> 
> 时间：2012-05-14T05:59:56.837
> 
> 标签：c#, c#-4.0, encryption, encryption-symmetric

我正在使用“AesManaged”对 Web 应用程序中的受保护数据进行加密和解密。在我的场景中，我在用户登录时基于“Email + CurrentDate”创建一个令牌，并以加密格式将其发送回用户（使用 AESManaged 类完成加密），并且当用户调用下一个服务器端方法时，例如“显示报告”，用户/客户端应用程序还将随请求发送该加密令牌。在服务器端我解密令牌，并在基于解密令牌执行条件逻辑之后，决定给定用户是否有权访问此方法（一种授权检查）。

用户提供从服务器获得的正确加密字符串或长度相同但用户替换加密字符串中的字符的基本流程表现良好（如预期）。

但是，当用户得到一个（例如）54 个字符的字符串但只向服务器发送 7 个字符时，问题就出现了。然后发生以下异常。

即使用户提供无效数据，我也想避免此异常。所以，基本上字符串应该总是被解密，如果它是无效的令牌，那么我可以限制对资源的访问。我怎样才能做到这一点？您的回答将不胜感激。

**异常详情：**

发生异常的特定代码块。

```
 // Create the streams used for decryption.
                using (MemoryStream msDecrypt = new MemoryStream(cipherText))
                {
                    using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
                    {
                        using (StreamReader srDecrypt = new StreamReader(csDecrypt))
                        {
                            plaintext = srDecrypt.ReadToEnd();
                        }
                    }
                } 
```

例外：“要解密的数据长度无效。”

**异常详情：**

目标站点：{Byte[] TransformFinalBlock(Byte[], Int32, Int32)}

声明类型：{Name = "RijndaelManagedTransform" FullName = "System.Security.Cryptography.RijndaelManagedTransform"}

**名称：** TransformFinalBlock

**注意：**我为加密和解密方法提供相同的密钥和 iv。

代码：

```
public string EncryptAuthenticationTokenAes(string plainText, byte[] Key, byte[] IV)
        {

            byte[] encrypted;
            // Create an AesManaged object
            // with the specified key and IV.
            using (AesManaged aesAlg = new AesManaged())
            {
                aesAlg.Key = Key;
                aesAlg.IV = IV;

                // Create a decrytor to perform the stream transform.
                ICryptoTransform encryptor = aesAlg.CreateEncryptor(aesAlg.Key, aesAlg.IV);

                // Create the streams used for encryption.
                using (MemoryStream msEncrypt = new MemoryStream())
                {
                    using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
                    {
                        using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
                        {

                            //Write all data to the stream.
                            swEncrypt.Write(plainText);
                        }
                        encrypted = msEncrypt.ToArray();
                    }
                }
            }
            // Return the encrypted bytes from the memory stream.
            return Convert.ToBase64String(encrypted);

        }

        public string DecryptPasswordAes(string encryptedString, byte[] Key, byte[] IV)
        {
            // becuase it is base64, if mod4>0 then it is consider as invalid token
            int mod4 = encryptedString.Length % 4;
            if (mod4 > 0)
            {
                return string.Empty;
            }
            byte[] cipherText = Convert.FromBase64String(encryptedString);
            // Declare the string used to hold
            // the decrypted text.
            string plaintext = null;

            // Create an AesManaged object
            // with the specified key and IV.
            using (AesManaged aesAlg = new AesManaged())
            {
                aesAlg.Key = Key;
                aesAlg.IV = IV;

                // Create a decrytor to perform the stream transform.
                ICryptoTransform decryptor = aesAlg.CreateDecryptor(aesAlg.Key, aesAlg.IV);

                // Create the streams used for decryption.
                using (MemoryStream msDecrypt = new MemoryStream(cipherText))
                {
                    using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
                    {
                        using (StreamReader srDecrypt = new StreamReader(csDecrypt))
                        {
                            plaintext = srDecrypt.ReadToEnd();
                        }
                    }
                }

            }

            return plaintext;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:41:41.550

它告诉您，它无法获取这 7 个字符并对它们执行*任何*有意义的转换 - 它*无法*使用它们执行任何类型的解密。

在尝试解密之前执行长度检查，或者捕获异常；在任何一种情况下，只需按照“收到无效令牌”的逻辑进行即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:11:27.073

试试这个

```
 // Create the streams used for decryption.
            using (MemoryStream msDecrypt = new MemoryStream(cipherText))
            {
                using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
                {
                    using (StreamReader srDecrypt = new StreamReader(csDecrypt))
                    {
                        if (encryptedString.Length != aesAlg.BlockSize)
                        {
                            // Handle invalid token here.
                        }
                        plaintext = srDecrypt.ReadToEnd();
                    }
                }
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T10:49:28.943

保存加密字符串的长度，然后检查长度是否相同。如果是，则继续调用解密方法。

# ruby-on-rails - 使用 selenium 时如何禁用 Firefox 中的附加组件

> ID：10578108
> 
> 赞同：9
> 
> 时间：2012-05-14T06:00:08.477
> 
> 标签：ruby-on-rails, selenium, capybara

我在我的 Rails 项目中使用 Capybara selenium（在 Ubuntu 10.04 系统上），我刚刚升级了 firefox，当时我正在运行我的测试 firefox 负载，但它现在已经安装了所有附加组件，它会等到我设置每个人都是第一次。

有没有办法在启动 selenium 时禁用所有这些附加组件？

或者

有没有办法设置我所有的附加组件并保存设置，以便每次运行测试时都不会提示我？

**更新**

如果我将其更改为使用 chrome，它可以正常工作。

```
 Capybara.register_driver :selenium do |app|
   Capybara::Selenium::Driver.new(app, :browser => :chrome)
 end

 Capybara.javascript_driver = :selenium 
```

不过我想用firefox做测试。我在 Firefox 下设置了一个“测试”配置文件，并尝试将其与以下内容一起使用：

```
Capybara.register_driver :selenium_firefox_custom do |app|
  Capybara::Selenium::Driver.new(app, :browser => :firefox, :profile => "test")
end

Capybara.default_driver = :selenium_firefox_custom 
```

哪个不起作用，它仍然试图加载我的默认配置文件。

我正在使用 git 版本的水豚；

```
capybara (1.1.2)
  mime-types (>= 1.16)
  nokogiri (>= 1.3.3)
  rack (>= 1.0.0)
  rack-test (>= 0.5.4)
  selenium-webdriver (~> 2.0)
  xpath (~> 0.1.4) 
```

我也尝试过使用 Capybara.javascript_driver = :selenium_firefox_custom

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:39:56.763

如果您不想创建必须维护的配置文件（例如：签入源代码管理等），您可以按如下方式动态创建配置文件：

```
Capybara.register_driver :selenium_firefox do |app|
  profile = Selenium::WebDriver::Firefox::Profile.new
  profile["extensions.update.enabled"] = false
  profile["app.update.enabled"] = false
  profile["app.update.auto"] = false
  Capybara::Selenium::Driver.new(app, :browser => :firefox, :profile => profile)
end

Capybara.default_driver = :selenium_firefox 
```

这将动态创建一个不会更新浏览器版本或扩展的配置文件。希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T21:32:18.553

尝试使用自定义配置文件，并根据您的喜好命名：

```
Capybara.register_driver :selenium_firefox_custom do |app|
  Capybara::Selenium::Driver.new(app, :browser => :firefox, :profile => "custom")
end

Capybara.default_driver = :selenium_firefox_custom 
```

根据您使用的版本，API 可能已更改，但这几乎是您必须做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T06:39:22.207

由于我不使用 Ubuntu，我只能建议我的 Windows 解决方法。我认为使用第二个没有插件的 Firefox 配置文件来运行 selenium 测试是一种正确的方法。

在 Windows 中，可以通过将“firefox.exe -ProfileManager -no-remote”提供给 Windows Run 来实现。

未经测试的 Ubuntu 方法是 [Alt]+[F2] 和 firefox -ProfileManager。关闭所有 Firefox Windows 并可能在之前杀死仍然存在的进程很重要

# php - cakePHP 表单不向数据库发送数据

> ID：10578117
> 
> 赞同：0
> 
> 时间：2012-05-14T06:00:51.760
> 
> 标签：php, mysql, database, cakephp

我正在为我的蛋糕代码而苦苦挣扎（对 cakephp 来说非常新）并且正在寻求一些帮助。我的代码的目的是从表单中获取数据，当人们点击注册时，它会将数据发送到我的数据库，但这没有发生，而是当我点击注册时页面正在重新加载。我目前正在使用 cake 2.0 和 wamp server 2.2

这是我的 individualcontroller.php 中的 add 函数的代码

```
function addIndividual(){
    if($this->request->is('individuals')){
    {if ($this->Individual->save($this->request->data)) {
            $this->Session->setFlash('The user has been saved');
            $this->redirect(array('action' => 'index'));
        } else {
$this->Session->setFlash('The user could not be saved. Please, try again.');
        }
    }
} 
```

代码在这里

这是我的 add_individual.ctp 中的代码，包括表格

```
 <h2>Please enter your details</h2>
<?php
echo $this->Form->create('individuals', array('action'=>'addIndividual'));
echo $this->Form->input('Title: ');
echo $this->Form->input('First Name: ');
echo $this->Form->input('Surname: ');
echo $this->Form->input('Street Address: ');
echo $this->Form->input('Suburb: ');
echo $this->Form->input('State: ');
echo $this->Form->input('Country: ');
echo $this->Form->input('Email: ');
echo $this->Form->input('Password: ');
echo $this->Form->end('Click here to Register');

?> 
```

编辑 - 我试图插入数据的表的名称被称为个人，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:24:36.417

我认为您的代码中的错误在下面给出的行中。

```
if($this->request->is('individuals')) 
```

此处`$this->request->is`检查请求类型，您已在此处分配`individuals`，这不是请求类型。请求类型有`post`'put'、'ajax'、'GET' 等。所以请检查您的表格的方法并将其放入`$this->request->is()`。请看这个网址：

[http://book.cakephp.org/2.0/en/controllers/request-response.html](http://book.cakephp.org/2.0/en/controllers/request-response.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:06:25.350

```
function addIndividual(){
if($this->request->is('individuals')){
if ($this->Individual->save($this->request->data)) {
        $this->Session->setFlash('The user has been saved');
        $this->redirect(array('action' => 'index'));
    } else {
$this->Session->setFlash('The user could not be saved. Please, try again.');
    }
}
} 
```

将此代码更改为

```
function addIndividual(){
if($this->request->is('post')){
{if ($this->Individual->save($this->request->data)) {
        $this->Session->setFlash('The user has been saved');
        $this->redirect(array('action' => 'index'));
    } else {
$this->Session->setFlash('The user could not be saved. Please, try again.');
    }
}
} 
```

另外请按如下方式更改您的视图文件。

```
<h2>Please enter your details</h2>
<?php
echo $this->Form->create('Individual', array('action'=>'addIndividual'));
echo $this->Form->input('FieldnameasinDB',array('label'=>'Title: '));
echo $this->Form->input('FieldnameasinDB',array('label'=>'First Name: '));
echo $this->Form->input('FieldnameasinDB',array('label'=>'Surname: '));
echo $this->Form->input('FieldnameasinDB',array('label'=>'Street Address: '));
echo $this->Form->input('FieldnameasinDB',array('label'=>'Suburb: '));
echo $this->Form->input('FieldnameasinDB',array('label'=>'State: '));
echo $this->Form->input('FieldnameasinDB',array('label'=>'Country: '));
echo $this->Form->input('FieldnameasinDB',array('label'=>'Email: '));
echo $this->Form->input('FieldnameasinDB',array('label'=>'Password: '));
echo $this->Form->end('Click here to Register');

?> 
```

像这样改变模型

```
<?php class Individual extends AppModel{ var $name='Individual'; 
    public $useTable = 'tableName';
    public $primaryKey = 'userid';} 
```

# parsing - AWK：递归下降 CSV 解析器

> ID：10578119
> 
> 赞同：2
> 
> 时间：2012-05-14T06:00:59.403
> 
> 标签：parsing, csv, awk, recursive-descent

为了响应**[BASH 中的递归下降 CSV 解析器](https://codereview.stackexchange.com/questions/11727/need-some-advice-or-help-with-translation-and-or-testing-csv-recursive-parser-i/11742#11742)**，我（两篇文章[的原作者](https://www.facebook.com/pc.wiz.tt)）尝试将其翻译成 AWK 脚本，以比较这些脚本语言的数据处理速度。由于一些缓解因素，翻译不是 1:1 翻译，但对于那些感兴趣的人来说，这种实现在字符串处理方面比其他实现更快。

最初，由于 Jonathan Leffler，我们有几个问题都被取消了。虽然标题是`CSV`，但我们已经更新了代码，`DSV`这意味着您可以将任何单个字符指定为字段分隔符，如果您认为有必要的话。

这段代码现在可以摊牌了。

**基本功能**

*   对输入长度、字段长度或字段计数没有强加限制
*   通过双引号的文字引用字段**`"`**
*   在第 1.1.2 ^([1][2][3]节中)[定义](http://www.acm.uiuc.edu/webmonkeys/book/c_guide/1.1.html)的ANSI C 转义序列
*   自定义输入分隔符：[UNIX 编程艺术](http://www.catb.org/%7Eesr/writings/taoup/html/ch05s02.html)(DSV) ^([4])
*   自定义输出分隔符^([5])
*   UCS-2 和 UCS-4 转义序列^([6])

^([1])引用的字段是文字内容，因此不会对引用的内容执行转义序列解释。然而，可以在单个字段中连接引号、纯文本和解释序列以实现所需的效果。例如：

```
一、二、三：\t“Little Endians”和一个 Big Endian Chief
```

是 CSV 的三字段行，其中第三字段相当于：

```
三：Little Endian 和一个 Big Endian Chief
```

^([2])参考资料中描述为“特定于实现”或具有“未定义行为”的示例将不受支持，因为它们在定义上不可移植，或者过于模棱两可而不可靠。如果此处或参考资料中未定义转义序列，则反斜杠将被忽略，最后面的单个字符将被视为纯文本值。不支持整数值字符转义序列，这是一种不可靠的方法，不能很好地跨多个平台扩展，并且不必要地增加了通过验证代理解析的复杂性。

^([3])八进制字符转义必须是 3 位八进制格式。如果它不是 3 位八进制转义序列，则它是单个数字空转义序列。十六进制转义序列必须采用 2 位十六进制格式。如果转义序列标识符后面的前两个字符无效，则不会进行任何解释，并且将在标准错误上打印一条消息。任何剩余的十六进制数字都将被忽略。

^([4])自定义输入分隔符`iDelimiter`必须是单个字符。不支持多行记录，并且应始终不赞成使用这种矛盾。这降低了数据记录的可移植性，使其特定于位置和来源（在该文件中）可能未知的文件。例如，`grep`为内容生成文件可能会返回不完整的记录，因为内容可能从任何前一行开始，从而将数据获取限制为对数据库进行完全自上而下的解析。

^([5])自定义输出分隔符`oDelimiter`可以是任何所需的字符串值。脚本输出总是由一个换行符终止。这是正确终端应用程序输出的一个特征。否则，您解析的 CSV 输出和终端提示将使用同一行，从而造成混乱的情况。此外，大多数解释器（如控制台）都是基于行的设备，它们希望换行符表示 I/O 记录的结束。如果您发现尾随换行符不受欢迎，请将其剪掉。

^([6]) 16 位 Unicode 转义序列可通过以下符号获得：

```
\uHHHH 十六进制值 HHHH 的 Unicode 字符（4 位）
```

和 32 位 Unicode 转义序列通过以下方式支持：

```
\UHHHHHHHH 十六进制值 HHHHHHHH 的 Unicode 字符（8 位）
```

* * *

特别感谢 SO 社区的所有成员，他们的经验、时间和投入使我创建了这样一个非常有用的信息处理工具。

**代码清单：dsv.awk**

```
#!/bin/awk -f
#
###############################################################
#
# ZERO LIABILITY OR WARRANTY LICENSE YOU MAY NOT OWN ANY
# COPYRIGHT TO THIS SOFTWARE OR DATA FORMAT IMPOSED HEREIN 
# THE AUTHOR PLACES IT IN THE PUBLIC DOMAIN FOR ALL USES 
# PUBLIC AND PRIVATE THE AUTHOR ASKS THAT YOU DO NOT REMOVE
# THE CREDIT OR LICENSE MATERIAL FROM THIS DOCUMENT.
#
###############################################################
#
# Special thanks to Jonathan Leffler, whose wisdom, and 
# knowledge defined the output logic of this script.
#
# Special thanks to GNU.org for the base conversion routines.
#
# Credits and recognition to the original Author:
# Triston J. Taylor whose countless hours of experience,
# research and rationalization have provided us with a
# more portable standard for parsing DSV records.
#
###############################################################
#
# This script accepts and parses a single line of DSV input
# from <STDIN>.
#
# Record fields are seperated by command line varibale
# 'iDelimiter' the default value is comma.
#
# Ouput is seperated by command line variable 'oDelimiter' 
# the default value is line feed.
#
# To learn more about this tool visit StackOverflow.com:
#
# http://stackoverflow.com/questions/10578119/
#
# You will find there a wealth of information on its
# standards and development track.
#
###############################################################

function NextSymbol() {

    strIndex++;
    symbol = substr(input, strIndex, 1);

    return (strIndex < parseExtent);

}

function Accept(query) {

    #print "query: " query " symbol: " symbol
    if ( symbol == query ) {
        #print "matched!"        
        return NextSymbol();         
    }

    return 0;

}

function Expect(query) {

    # special case: empty query && symbol...
    if ( query == nothing && symbol == nothing ) return 1;

    # case: else
    if ( Accept(query) ) return 1;

    msg = "dsv parse error: expected '" query "': found '" symbol "'";
    print msg > "/dev/stderr";

    return 0;

}

function PushData() {

    field[fieldIndex++] = fieldData;
    fieldData = nothing;

}

function Quote() {

    while ( symbol != quote && symbol != nothing ) {
        fieldData = fieldData symbol;
        NextSymbol();
    }

    Expect(quote);

}

function GetOctalChar() {

    qOctalValue = substr(input, strIndex+1, 3);

    # This isn't really correct but its the only way
    # to express 0-255\. On unicode systems it won't
    # matter anyway so we don't restrict the value
    # any further than length validation.

    if ( qOctalValue ~ /^[0-7]{3}$/ ) {

        # convert octal to decimal so we can print the
        # desired character in POSIX awks...

        n = length(qOctalValue)
        ret = 0
        for (i = 1; i <= n; i++) {
            c = substr(qOctalValue, i, 1)
            if ((k = index("01234567", c)) > 0)
            k-- # adjust for 1-basing in awk
            ret = ret * 8 + k
        }

        strIndex+=3;
        return sprintf("%c", ret);

        # and people ask why posix gets me all upset..
        # Special thanks to gnu.org for this contrib..

    }

    return sprintf("\0"); # if it wasn't 3 digit octal just use zero

}

function GetHexChar(qHexValue) {

    rHexValue = HexToDecimal(qHexValue);
    rHexLength = length(qHexValue);

    if ( rHexLength ) {

        strIndex += rHexLength;
        return sprintf("%c", rHexValue);

    }

    # accept no non-sense!
    printf("dsv parse error: expected " rHexLength) > "/dev/stderr";
    printf("-digit hex value: found '" qHexValue "'\n") > "/dev/stderr";

}

function HexToDecimal(hexValue) {

    if ( hexValue ~ /^[[:xdigit:]]+$/ ) {

        # convert hex to decimal so we can print the
        # desired character in POSIX awks...

        n = length(hexValue)
        ret = 0
        for (i = 1; i <= n; i++) {

            c = substr(hexValue, i, 1)
            c = tolower(c)

            if ((k = index("0123456789", c)) > 0)
                k-- # adjust for 1-basing in awk
            else if ((k = index("abcdef", c)) > 0)
                k += 9

            ret = ret * 16 + k
        }

        return ret;

        # and people ask why posix gets me all upset..
        # Special thanks to gnu.org for this contrib..

    }

    return nothing;

}

function BackSlash() {

    # This could be optimized with some constants.
    # but we generate the data here to assist in
    # translation to other programming languages.

    if (symbol == iDelimiter) { # separator precedes all sequences
        fieldData = fieldData symbol;
    } else if (symbol == "a") { # alert
        fieldData = sprintf("%s\a", fieldData);
    } else if (symbol == "b") { # backspace
        fieldData = sprintf("%s\b", fieldData);
    } else if (symbol == "f") { # form feed
        fieldData = sprintf("%s\f", fieldData);
    } else if (symbol == "n") { # line feed
        fieldData = sprintf("%s\n", fieldData);
    } else if (symbol == "r") { # carriage return
        fieldData = sprintf("%s\r", fieldData);
    } else if (symbol == "t") { # horizontal tab
        fieldData = sprintf("%s\t", fieldData);
    } else if (symbol == "v") { # vertical tab
        fieldData = sprintf("%s\v", fieldData);
    } else if (symbol == "0") { # null or 3-digit octal character
        fieldData = fieldData GetOctalChar();
    } else if (symbol == "x") { # 2-digit hexadecimal character 
        fieldData = fieldData GetHexChar( substr(input, strIndex+1, 2) );
    } else if (symbol == "u") { # 4-digit hexadecimal character 
        fieldData = fieldData GetHexChar( substr(input, strIndex+1, 4) );
    } else if (symbol == "U") { # 8-digit hexadecimal character 
        fieldData = fieldData GetHexChar( substr(input, strIndex+1, 8) );
    } else { # symbol didn't match the "interpreted escape scheme"
        fieldData = fieldData symbol; # just concatenate the symbol
    }

    NextSymbol();

}

function Line() {

    if ( Accept(quote) ) {
        Quote();
        Line();
    }

    if ( Accept(backslash) ) {
        BackSlash();
        Line();        
    }

    if ( Accept(iDelimiter) ) {
        PushData();
        Line();
    }

    if ( symbol != nothing ) {
        fieldData = fieldData symbol;
        NextSymbol();
        Line();
    } else if ( fieldData != nothing ) PushData();

}

BEGIN {

    # State Variables
    symbol = ""; fieldData = ""; strIndex = 0; fieldIndex = 0;

    # Output Variables
    field[itemIndex] = "";

    # Control Variables
    parseExtent = 0;

    # Formatting Variables (optionally set on invocation line)
    if ( iDelimiter != "" ) {
        # the algorithm in place does not support multi-character delimiter
        if ( length(iDelimiter) > 1 ) { # we have a problem
            msg = "dsv parse: init error: multi-character delimiter detected:";
            printf("%s '%s'", msg, iDelimiter);
            exit 1;
        }
    } else {
        iDelimiter = ",";
    }
    if ( oDelimiter == "" ) oDelimiter = "\n";

    # Symbol Classes
    nothing = "";
    quote = "\"";
    backslash = "\\";

    getline input;

    parseExtent = (length(input) + 2);

    # parseExtent exceeds length because the loop would terminate
    # before parsing was complete otherwise.

    NextSymbol();
    Line();
    Expect(nothing);

}

END {

    if (fieldIndex) {

        fieldIndex--;

        for (i = 0; i < fieldIndex; i++)
        {
             printf("%s", field[i] oDelimiter);
        }

        print field[i];

    } 

} 
```

* * *

**如何“像专业人士一样”运行脚本**

```
# Spit out some CSV "newline" delimited:
echo 'one,two,three,AWK,CSV!' | awk -f dsv.awk

# Spit out some CSV "tab" delimited:
echo 'one,two,three,AWK,CSV!' | awk -v oDelimiter=$'\t' -f dsv.awk

# Spit out some CSV "ASCII Group Separator" delimited:
echo 'one,two,three,AWK,CSV!' | awk -v oDelimiter=$'\29' -f dsv.awk 
```

如果您需要一些自定义输出控制分隔符但不确定使用什么，您可以参考**[这个方便的 ASCII 图表](http://www.asciitable.com/index/asciifull.gif)**

**未来的计划：**

*   C 库实现
*   C 控制台应用程序实现
*   向[互联网工程任务组](http://www.ietf.org)提交可能的标准化

* * *

**哲学**

转义序列应始终用于在基于行的数据库中创建多行字段数据，并且应始终使用引用来保留和连接记录字段内容。这是实现这种类型的记录解析器的最简单（因此也是最有效）的方法。我鼓励所有软件开发人员和教育机构接受并表明这一方向，以确保可移植性和精确获取基于行的分隔符分隔的记录。

CSV 没有除[RFC 4180](https://www.rfc-editor.org/rfc/rfc4180)之外的官方规范，也没有定义任何有用的可移植记录类型。作为一名拥有超过 15 年经验的开发人员，我希望这将成为官方认可的便携式 CSV/DSV 记录标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:32:26.137

原始代码中的空行太多，难以阅读。减少空行的修改后的代码更容易阅读；相关行位于可以一起阅读的块中。谢谢。

`awk`就像C；它将 0 视为假，将任何非零视为真。所以，任何大于 0 的东西都是正确的，但任何小于 0 的东西也是如此。

`stderr`在标准中没有直接的打印方式[`awk`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/awk.html)。GNU AWK 记录了`print "message" > "/dev/stderr"`(name as string!) 的使用，并暗示它甚至可以在没有实际设备的系统上工作。它也适用`awk`于带有该`/dev/stderr`设备的系统上的标准。

`awk`处理数组中每个索引的习惯用法是`for (i in array) { ... }`. 但是，由于您有一个索引，`itmIndex`告诉您数组中有多少项，您应该使用

```
for (i = 0; i < itmIndex; i++) { printf("%s%s", item[i], delim); } 
```

然后在最后输出一个换行符。这让我的思维方式太多了一个分隔符，但这是`bash`代码正在做什么的转录。我通常的技巧是：

```
pad = ""
for (i = 0; i < itmIndex; i++)
{
     printf("%s%s", pad, item[i])
     pad = delim
}
print ""; 
```

`-v var=value`您可以使用（或省略）将变量传递到脚本中`-v`。请参阅前面列出的 POSIX URL。

# c# - 比较文件内容和表格内容 - 编码问题？

> ID：10578121
> 
> 赞同：0
> 
> 时间：2012-05-14T06:01:11.763
> 
> 标签：c#, encoding, datatable, string-comparison

我使用以下方法将文件的内容读入数据表：

```
public static DataTable GetFileContents(string filePath, IEnumerable<string> columnNames)
        {
            using (var conn = new StreamReader(filePath,Encoding.Unicode))
            {
                string strLine;
                var dt = new DataTable();
                var columnCount = 0;
                const char delimiter = '\t';
                foreach (var columnName in columnNames)
                {
                    dt.Columns.Add(columnName, typeof(string));
                    columnCount++;
                }
                while ((strLine = conn.ReadLine()) != null)
                {
                    var columnData = strLine.Split(delimiter);
                    var j = 0;
                    var columns = new string[columnCount];
                    while (j < columnCount)
                    {
                        columns[j] = columnData[j];
                        j++;
                    }
                    dt.Rows.Add(columns);
                }
                return dt;
            }
        } 
```

然后我将表的内容检索到一个列表中，然后将列表中的值与数据表中的值进行比较，主要比较如下：

```
dataTable.AsEnumerable().Single(x=>x.ItemArray[0].ToString().Equals(tableRow[0].ToString())) 
```

我什至尝试过以下方法：

```
dataTable.AsEnumerable().Single(
                                x => Encoding.Unicode.GetBytes(x.ItemArray[0].ToString()).SequenceEqual(Encoding.Unicode.GetBytes(tableRow[0].ToString()))); 
```

虽然我看到值完全匹配，但上面的 Linq 查询仍然失败，没有找到结果。知道是什么原因吗？

该文件采用 Unicode 格式。

示例代码：

```
var tableList = session.CreateSQLQuery(sqlString).List<object>();
foreach (var row in tableList)
{
var tableRow= (IList)row;
//my comparison code as mentioned above
//other code
} 
```

从文件中检索到的值为 1233 的字节数组： ![来自文件的 1233 字节数组](../Images/390ffc350f90ef8eb4dd86c0efb9a276.png)

来自 db 的 1233 字节数组： ![来自 db 的 1233 字节数组](../Images/5d6e83f949ad7c08499ecb480ce3446f.png)

# asp.net-mvc - 如何将 Html.LabelFor 与动态表达式一起使用？

> ID：10578122
> 
> 赞同：1
> 
> 时间：2012-05-14T06:01:30.980
> 
> 标签：asp.net-mvc, reflection, lambda

我的问题很简单。

我想为所有对象的属性值运行。例如：

```
public class Product
{
    public int ProductId {get;set;}
    public string Name {get;set;}
    public string Content {get;set;}
}

var obj = new Product();
var props = obj.GetType().GetProperties();

foreach(var prop in props)
{
    @Html.LabelFor( ....... ) // Need to run for active property.
    // such as @Html.LabelFor( x => prop ) 
} 
```

我怎么能做我想做的事？这种方式或其他方式，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:46:04.723

我没有方便的开发环境，但无论如何尝试一下

```
@{ var emptyViewModel = new Product(); 
   var props = obj.GetType().GetProperties();

foreach(var prop in props)
{   
    @Html.LabelFor(model => emptyViewModel, prop.Name.ToString())  
}
} 
```

# linux - 精确的 gccgo

> ID：10578125
> 
> 赞同：8
> 
> 时间：2012-05-14T06:01:45.260
> 
> 标签：linux, go, ubuntu-12.04, ld, gccgo

尝试在 Precise 上与 gccgo 链接时，出现此链接错误：

```
matt@matt-1005P:~/src/gopath/src/meme$ gccgo cmd/meme/main.go -o meme
/usr/bin/ld: cannot find -lgcc_s
collect2: error: ld returned 1 exit status 
```

有关于此错误的报告，但没有干净的解决方案。我如何解决它？

> gccgo (Ubuntu/Linaro 4.7.0-0ubuntu4) 4.7.0
> 
> Linux matt-1005P 3.2.0-24-generic-pae #38-Ubuntu SMP Tue May 1 16:40:26 UTC 2012 i686 i686 i386 GNU/Linux

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T08:54:43.670

这是最近在 golang-nuts 小组中提出的：[使用 gccgo from packaged binaries 进行编译](https://groups.google.com/d/topic/golang-nuts/pytJAbzpZ1c/discussion)。

这是 Ubuntu 中的一个已知问题（[错误 #966570](https://bugs.launchpad.net/ubuntu/+source/gccgo-4.7/+bug/966570)）。要解决这个问题，您可以通过`-static-libgcc`在 gccgoflags 中指定来链接静态 libgcc。IE

```
go build -compiler gccgo -gccgoflags '-static-libgcc' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:05:47.190

据我所知，这是因为 gccgo 基于 GCC 4.7，但 Precise 默认使用 GCC 4.6。无论出于何种原因，库路径不正确，或者包不完整，因为它缺少`libgcc_s`.

我找到了可能的库`find / -name 'libgcc_s*'`并通过了库路径，如下所示：

```
go install -compiler=gccgo -gccgoflags -L/usr/lib/gcc/i686-linux-gnu/4.6 meme/cmd/meme 
```

请注意，这是针对 4.6 的链接`libgcc_s`，但似乎仍然有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T03:52:41.060

```
/usr/bin/ld: cannot find -lgcc_s (cannot find lgcc_s.so)

gccgo -v (we gcc version 4.7.0 (Ubuntu/Linaro 4.7.0-1ubuntu5) )

locate libgcc_s.so.1 

/lib/i386-linux-gnu/libgcc_s.so.1

ln -sf /lib/i386-linux-gnu/libgcc_s.so.1 /usr/lib/gcc/i686-linux-gnu/4.7.0/libgcc_s.so 
```

好的

# css - Internet Explorer 7 中的绝对位置问题

> ID：10578127
> 
> 赞同：-5
> 
> 时间：2012-05-14T06:02:00.650
> 
> 标签：css, internet-explorer-7

内部位置相对 div 我将位置绝对 div 放置在顶部和左侧值，但它在 Internet Explorer 7 中不起作用。请帮助

# CSS

```
.pagi_container {
background-color:#EEE;
border-bottom:1px solid #CCC;
border-top:1px solid #CCC;
height:30px;
margin:0;
width:620px;
position:relative;
}
.pagi_container  form{
position:absolute;
top:5px;
right:10px;
} 
```

# HTML

```
<div class="pagi_container">
<form>
<b>Select your time zone: </b>
<select>
<option  value="America/Los_Angeles">United States (GMT-07:00)</option>
</select>
</form>
</div>
<div class="sort-v3">
<ul>
<li class="first"> <strong>eCard Status</strong> </li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:08:15.490

以下内容在 Internet Explorer 7 中按预期工作。确保您的文档类型有效且标记或样式没有错误：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Absolutely Positioned Elements in IE7</title>
    <style type="text/css">
      .foo {
        position: relative;
        width: 100px; height: 100px;
        background: #f1f1f1;
      }
      .bar {
        position: absolute;
        width: 30px; height: 30px;
        top: 5px; left: 5px;
        background: #CCC;
      }
    </style>
  </head>
  <body>
    <div class="foo">
      <div class="bar">Bar</div>
    </div>
  </body>
</html> 
```

# c++ - 调试内存使用的工具？

> ID：10578133
> 
> 赞同：2
> 
> 时间：2012-05-14T06:02:35.627
> 
> 标签：c++, linux, debugging

是否有任何好的 Linux 工具可以调试 C/C++ 代码的内存使用情况？我发现在复杂的代码中很难弄清楚哪些对象负责主内存使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T06:04:56.943

您正在寻找的是[地块](http://www.valgrind.org/info/tools.html#massif)：

> Massif 是一个堆分析器。它通过定期拍摄程序堆的快照来执行详细的堆分析。它会生成一个图表，显示随时间的堆使用情况，包括有关程序的哪些部分负责最多内存分配的信息。该图由文本或 HTML 文件补充，其中包含用于确定分配最多内存的位置的更多信息。Massif 运行程序的速度比正常速度慢 20 倍。

# c++ - 如何在c ++中处理被调用函数中的异常

> ID：10578136
> 
> 赞同：0
> 
> 时间：2012-05-14T06:02:51.760
> 
> 标签：c++, exception, exception-handling

如果我必须调用一个发生除零的特定函数。我们不能修改被调用函数中的任何内容。防止的唯一方法是在调用函数中进行一些修改。怎么做？

例如：

```
//calling function

int func(5,1);

//called function

int func(int x,int y)
{
  y--;
 return(x/y); // here divide by zero will occur, but we cannot do any thing in 
              // called function
} 
```

如何保持我们的应用程序运行而不是这个异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:05:45.353

有两种方法可以处理这个问题：

## 强制参数检查：

在调用代码中，您应该检查除数。

```
if(y != 0)
    func(x,y);
else
  //Some log or error handling 
```

或者

## 抛出异常：

整数除以零不是标准 C++ 异常。所以你不能依赖隐式抛出的异常。特定的编译器可能会将除以零映射到某种异常（您需要为此检查编译器文档），如果是这样，您可以捕获该特定异常。但是，请注意，这不是可移植行为，并且不适用于所有编译器。

因此，鉴于上述情况，您可以做的最好的事情是自己检查错误条件（除数等于零）并明确抛出 type 的异常`std::runtime_error`。

* * *

无论哪种情况，您的代码都应该适当地记录行为，在第一种情况下，您的代码应该记录有效的支持值，而在第二种情况下，它应该指定可以引发哪些异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:19:41.373

在 Linux 下，您可以为 SIGFPE 安装信号处理函数（使用 signal(2)）并在其中抛出异常，然后使用 -fnon-call-exceptions 编译代码。

一旦完成，除以零将导致抛出异常。

对于 Windows，这里提到了一些东西：[Dealing with Floating Point exceptions](https://stackoverflow.com/questions/2219244/dealing-with-floating-point-exceptions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T06:12:20.187

您可以在调用函数中执行此操作：-

```
if(i == 0)
  cout<<" info::i is equal to zero";
else
  func(5,i); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T06:05:29.487

一般来说，您可以：

1.  在调用函数之前检查参数以确保它们是有效的。该函数应包括一些指定有效输入范围的文档。
2.  捕捉异常。（这[在这种情况下不适用](https://stackoverflow.com/questions/4747934/c-catch-a-divide-by-zero-error)，但通常是一种选择）。

# php - 文件所有者显示“0”是什么意思（没有所有者）

> ID：10578140
> 
> 赞同：0
> 
> 时间：2012-05-14T06:03:22.373
> 
> 标签：php, filesystems

当我运行以下代码时，出现错误“致命错误：调用未定义函数 posix_getpwuid()” `$owner = posix_getpwuid($uid);`。

1.  为什么？
2.  这是否意味着什么时候没有所有者`$uid=0`？

我知道`$uid=0`

```
$logfile = 'log.txt';
    echo substr(sprintf('%o', fileperms($logfile)), -4)."<br />";
    $uid = fileowner($logfile);
    if ($uid === false) die("Could not determine file owner!");
    $owner = posix_getpwuid($uid);
    echo "The file owner's name is " . $owner[name] . "\r\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:06:19.270

这只是意味着`posix`您的系统上没有安装或启用该扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:06:38.223

错误的意思正是它所说的：没有这样的功能`posix_getpwuid()`。

但是，由于[显然存在](http://php.net/posix-getpwuid)POSIX 功能，因此必须在您的服务器上禁用 POSIX 功能。请联系您的房东，了解是否是这种情况以及原因。

我相信 0 的 UID 表示 root 用户，但我对文件系统的了解还不够，无法确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T06:06:45.147

> 1.  为什么？

您的平台不支持它，或者它没有被编译。

> `2\. ...`

 `UID 0 是`root`.`

# php - 使用 jQuery 更改动态创建的 div 内容

> ID：10578141
> 
> 赞同：0
> 
> 时间：2012-05-14T06:03:23.247
> 
> 标签：php, javascript, jquery

我在这里变得非常沮丧。

我有一张记录表。每条记录旁边都有一个按钮。单击该记录旁边的按钮时，应执行 jquery AJAX 调用。

```
 <script language="JavaScript" type="text/javascript">
<!--
function swapContent(cv) {
    $("#myDiv").html('<div align="center"><img src="images/loader.gif"/></div>').show();
    var url = "process.php";
    $.post(url, {contentVar: cv} ,function(data) {
       $("#myDiv").html(data).show();
    });
}
//-->
</script> 
```

相关的 HTML：

```
<div id="myDiv" align="center"><a href="#" onClick="return false" onmousedown="javascript:swapContent('do_stuff');"><img src='images/icon.png' border='0'></a></div> 
```

当我单击 HTML 链接时，div“myDiv”的内容被更改为对 process.php 的 ajax 调用的输出。这一切都很好，但是我将拥有几十个这样的 div，并且我需要能够调用 swapContent 函数，不仅可以使用参数 cv，还需要传入一个参数，该 div 应该更改其内容。

我相信我的错误只是基于对 JS 语法的无知。例如，我已经这样做了：

```
 <script language="JavaScript" type="text/javascript">
<!--
function swapContent(thediv,cv) {
    $(thediv).html('<div align="center"><img src="images/loader.gif"/></div>').show();
    var url = "process.php";
    $.post(url, {contentVar: cv} ,function(data) {
       $(thediv).html(data).show();
    });
}
//-->
</script> 
```

但我不确定当变量 thediv 应该是一个对象或可能是什么问题时，它是否将其视为字符串。

我将不胜感激您可能提供的任何帮助！

```
<div id="div1" align="center"><a href="#" onClick="return false" onmousedown="javascript:swapContent('div1','do_stuff');"><img src='images/icon.png' border='0'></a></div>
...
<div id="div2" align="center"><a href="#" onClick="return false" onmousedown="javascript:swapContent('div2','do_stuff');"><img src='images/icon.png' border='0'></a></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:09:52.670

当您将 div 的 id 传递给函数时，代替`$(thediv)`-> `$("#"+thediv)`将起作用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T06:16:05.557

您已经完成了大部分工作:)。现在使用`this`对象。[http://jsbin.com/evirun/2/edit#source](http://jsbin.com/evirun/2/edit#source)（*创建一个示例来展示如何找出正确的调用 div 元素*）

```
<div id="div1" align="center"><a href="#" onClick="return false" onmousedown="javascript:swapContent(this,'do_stuff');"><img src='images/icon.png' border='0'></a></div>

<div id="div2" align="center"><a href="#" onClick="return false" onmousedown="javascript:swapContent(this,'do_stuff');"><img src='images/icon.png' border='0'></a></div> 
```

现在你的脚本：

```
<script language="JavaScript" type="text/javascript">
<!--
function swapContent(obj,cv) {
    $(obj).parent().html('<div align="center"><img src="images/loader.gif"/></div>').show();
    var url = "process.php";
    $.post(url, {contentVar: cv} ,function(data) {
       $(obj).parent().html(data).show();
    });
}
//-->
</script> 
```

`this`实际上将传递调用该​​方法的 DOM 元素。然后在您的脚本中使用此元素。

**编辑**

我错过了`anchor`标签在里面`div`。将脚本更改为使用`parent`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T06:29:28.860

不要将`onclick`and`onmousedown`处理程序内联。我建议您使用 (html5)`data-`属性来存储您当前放入`cv`参数的值：

```
<div id="div1" align="center"><a href="#" data-cv="do_stuff"><img src='images/icon.png' border='0'></a></div>
...
<div id="div2" align="center"><a href="#" data-cv="do_stuff"><img src='images/icon.png' border='0'></a></div> 
```

...然后将点击与 jQuery 绑定，如下所示：

```
$("a[data-cv]").click(function() {
   var thediv = $(this).parent(),
       cv = $(this).attr("data-cv");

   thediv.html('<div align="center"><img src="images/loader.gif"/></div>');

   var url = "process.php";
   $.post(url, {contentVar: cv} ,function(data) {
      thediv.html(data);
   });

   return false;
}); 
```

此代码使用[has 属性选择器](http://api.jquery.com/has-attribute-selector/)获取所有具有属性的锚元素`data-cv`并将点击处理程序绑定到这些元素。在处理程序中，`this`将是单击的特定锚点，因此在您的标记中给出关联的 div 元素实际上是锚点的父元素，您可以使用它`$(this).parent()`来获取对正确 div 的引用（对于其他 html 结构，您可以使用其他 DOM 遍历`.prev()`、 或`.closest()`等方法）。

`return false;`单击处理程序末尾的 停止默认的锚点单击行为。

另请注意，对于当前显示的代码，您不需要该`.show()`方法，因为 div 已经显示。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-14T06:08:14.430

在添加新 div 之前清除 div 的 html 之类的：

```
$('#myDiv').html(''); 
```

# facebook - 提交 facebook 打开图形操作时出现错误消息

> ID：10578145
> 
> 赞同：1
> 
> 时间：2012-05-14T06:03:57.053
> 
> 标签：facebook, facebook-opengraph

我已经向 facebook 提交了一个简单的“投票”开放图操作。但由于某种原因，它旁边有一条红色的“需要更改”消息，而不是绿色的“活动”消息。此外，当我单击该操作以检查其设置时，顶部会显示一条消息：

```
Status: Changes needed
Your submission is missing a preposition (ex: on, in, through). 
Please add the appropriate preposition and resubmit.
Please make changes below and resubmit for review. 
```

我的Action设置如下：

```
Define Action Type
Name : Vote
Connected object types: Photo

Configure Story Text
Tenses Supported:Stories for this action should be shown in: both past and present tenses.
Past Tense: Joe voted on [My-app-name]
Plural Past Tense: Joe and two other friends voted
Present Tense: Joe is voting
Plural Present Tense: Joe and two other friends are voting
Imperative Tense: Hey Joe, vote this 
```

我没有向此操作添加任何自定义属性。在提交我的开放图形操作时，我以前从未遇到过这个问题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:47:08.460

你的过去时有一个介词“投票”，但你的其他三个只是以投票这个词结尾。添加`on`，你应该很好。

# c# - 如何有一个超过 20 像素高的文本框？

> ID：10578149
> 
> 赞同：1
> 
> 时间：2012-05-14T06:04:18.953
> 
> 标签：c#, winforms

嗨，当我在 Windows 窗体应用程序的 Visual Studio 上创建一个文本框时，我可以得到超过 20 像素的宽度，但是我不能得到超过 20 像素的**高度。**

那么我将如何调整高度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T06:27:08.760

`Multiline`在设计器中将属性设置为`true`，然后您将能够调整文本框的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:32:14.257

您可以设置`Multiline = true`，我可以更改属性的`height`部分`Size`和更改棒。自动调整显示区域的`Textbox`大小以选择字体，因此您可以设置更高的字体大小来增加文本框的大小，但您不打算这样做。

**Multiline = true** 在这种模式下，文本框的高度可以是任意值，因此允许其中的行数不同。

参考：
[如何设置文本框的高度？](https://stackoverflow.com/questions/6711017/how-to-set-height-of-a-textbox)
[TextBox 无法调整高度大小](http://www.telerik.com/community/forums/winforms/editors/textbox-cannot-adjust-height-size.aspx)

编辑：您也可以[自定义文本框](https://stackoverflow.com/questions/8493843/how-to-override-the-preferred-size-of-a-winforms-textbox)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T06:09:33.023

更改[字体](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.font.aspx)大小。

如果您使用的是 WPF：

```
<TextBox Height="42"/> 
```

# c++ - 流行（）礼仪

> ID：10578150
> 
> 赞同：3
> 
> 时间：2012-05-14T06:04:36.730
> 
> 标签：c++, list, oop, copying

情况：我正在实现一个类似列表的容器，它支持一个 Pop() 函数，该函数应该向用户返回存储在容器前面的 const char*。但是，作为实现者，我不确定是否应该返回原始的 const char*（从容器中删除节点指针，但不对 const char* 本身调用 delete），或者是否应该分配新的内存和返回元素的副本。

在课堂和项目中，我遇到过那些始终支持复制的人，因此以前返回的引用（来自 getter 等）和指向 const char* 的指针都不会改变弹出的版本，但是由于这种方法需要额外的分配和strcpy，我想我会问是否只是简单地返回原始的、未删除的指向 const char 的指针而不删除它真的是一个问题。这是 WITH 分配和复制方法的代码片段（然后删除原始引用）：

```
const char* LinkedList::PopHeadString()
{
    node* deletehead = head_;
    char* output = NULL;

    if (head_ != NULL && GetHeadType() == STRING) {
        output = new char[strlen(head_->en.data.str) + 1];
        strcpy(output, head_->en.data.str);
        head_ = head_->next;
        delete deletehead->en.data.str;
        delete deletehead;
        --nEntries_;
    }
    return output;
} 
```

由于 Pop() 是一种常见的容器操作，我想我会问一般的方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T06:21:13.207

如果您在不复制的情况下返回指针，您必须决定谁拥有指针。拥有它的人有责任在不再需要它时将其删除。这可能是一个非常困难的问题，尤其是当您的代码变得更复杂时。复制语义更容易推理。

在您的具体示例中，首先要更改的是使用`std::string`而不是`const char *`表示字符串。如果您返回`std::string`按值，它将为您处理复制。

如果你真的想防止复制，但仍然优雅地管理生命周期，你应该考虑使用`std::shared_ptr<std::string>`（或者`boost::shared_ptr<std::string>`如果你没有 C++11 编译器）。A`shared_ptr`使用引用计数来确定它指向的对象应该何时被释放，从而从您那里承担手动内存管理的负担，这是一个好主意。

# ios - UITableView - 如何在滚动时不转储/重新加载单元格

> ID：10578152
> 
> 赞同：0
> 
> 时间：2012-05-14T06:04:52.817
> 
> 标签：ios, uitableview

在我的表格视图单元格中，我正在远程加载缩略图，所以当我滚动时，拇指会消失，并且每次加载时都会有一个空白点。我只想将它们全部加载一次，而不是让它们在我滚动时不断消失和重新出现。我总共只有 15-20 个单元格，所以我认为这应该不是问题。当它们滚出屏幕时，如何关闭单元格数据的卸载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:08:21.403

您必须保留对缩略图对象的引用（例如，在 NSArray 中），并重用它们。首先查询数组，如果不存在，则从远程位置加载它并将其放置在所需位置的数组中。如果确实存在，则从那里使用它。

# ios - 将 iOS 崩溃转储中的偏移量匹配到反汇编的二进制文件

> ID：10578155
> 
> 赞同：15
> 
> 时间：2012-05-14T06:05:11.373
> 
> 标签：ios, otool

我无法将 iOS 崩溃转储的堆栈跟踪中的偏移量与 otool 输出的二进制反汇编中的偏移量相匹配。

任何人都可以确认我原则上是如何匹配这些的。例如，如果我在故障转储中得到一行：

```
0 myapp  0x00005b0a  0x1000 + 19210 
```

我是否希望二进制文件中违规指令的偏移量为 0x5b0a、0x4b0a.... 或其他？

在对头信息的解码中，otool 还给出了例如该信息（实际代码从文件中的偏移量 0x0000224c 开始）：

```
Section
  sectname __text
   segname __TEXT
      addr 0x0000224c
      size 0x00063ad2
    offset 4684
     align 2^2 (4)
    reloff 0
    nreloc 0
      type S_REGULAR
attributes PURE_INSTRUCTIONS SOME_INSTRUCTIONS
 reserved1 0
 reserved2 0 
```

所以，我不是 100% 确定我是否正确解释了这一点，但似乎是在说文件中 +0x224c 处的代码在内存中的偏移量 0x124c 处结束，但后来我不确定这是怎么回事例如，安装位置 0x1000。

我遇到的问题是，假设偏移量为 0x5b0a，那里的指令、0x4b0a 或 0x6b0a 的指令都没有作为有问题的实际指令有意义（包括这样一个事实，即堆栈更下方的位置然后不指向分支指令）。

（我知道，至少在 ARM 的早期版本中，由于指令流水线，PC 的值与相应的内存地址之间存在差异。我*假设*在报告的偏移量中会考虑这种差异在故障转储中，或者无论如何，如果没有考虑到这种差异，我会看到有问题的分支指令，它的任一侧都指向了一些指令......）

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-30T20:11:39.123

将段的虚拟地址添加`__TEXT`到故障转储中给出的相对地址。结果是要在反汇编中查找的地址。以下是步骤：

1.  用于`otool -lv <application-binary>`从应用程序二进制文件中转储加载命令。查找段的加载命令`__TEXT` 以及 的相关值`vmaddr`，通常是`0x1000`。您不需要有关上面显示的`__text` *部分*的信息，只需要有关*段*的信息。

2.  在故障转储中，调用堆栈中的地址以 `0x00124ff4 0xf4000 + 200692`. *最后一部分是十进制*二进制中的偏移量。将此添加到步骤 1 中获得的值并转换为十六进制。在这个例子中，我们将计算`0x1000 + 200692`哪个是`0x31ff4`十六进制的。

3.  用于`otool -tV <application-binary>`转储应用程序二进制文件的反汇编。找到在步骤 2 中获得的地址（`0x31ff4`在此示例中）。对于调用堆栈的最顶层帧，这是应用程序崩溃的地方。对于所有其他级别，在计算的地址处应该是对应于堆栈中下一个更高级别的分支指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T21:41:26.120

前提是`myapp`没有去掉你可以使用的符号`atos`。

您可以随时`man atos`了解更多详细信息，但这应该足以解决您的问题：

```
-o symbol_file # debugging information output by the compiler this may be a dSYM or the binary itself depending on who you saved symbol information
-l load address # the base address in the process space at which your library is loaded into the springboard process (Looks like 0x1000)
Also a list of addresses you wish to symbolicate

Usage:
    atos -o myapp -l 0x1000 0x00005b0a 0x0005bca ... etc 
```

该输出应该是终端的符号名称列表。同样，这要求`myapp`没有删除符号。

# forms - 在 cq5 中添加 css 类以形成组件

> ID：10578156
> 
> 赞同：0
> 
> 时间：2012-05-14T06:05:14.307
> 
> 标签：forms, aem

我通过包含 parsys 在 cq5 中创建一个表单组件。我使用标签和文本字段向其中添加了文本字段。现在，要将 css 类添加到标签和文本字段，我使用文本字段的编辑对话框对其进行了编辑，但我在其中提供的 css 类不会反映在文本字段上。能否请您告诉我在表单的文本字段中添加 css 类时出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:05:40.943

要向组件添加 CSS 样式，您需要在组件节点下的组件层次结构中创建一个目录，并将其命名为“clientlibs”。在此目录中，您需要创建两个文件：“css.txt”和包含样式的文件。可以在这些链接中找到更多详细信息：

[CQ5 Clientlib 通过 Adob​​e](http://blogs.adobe.com/livecycle/2012/02/cq5-clientlib-explained-by-example.html)
[CQ 5 中的示例构建组件进行解释 - 第 1 部分：关于使用 jQuery UI 的客户端库的教程](http://blogs.adobe.com/mtg/2011/11/building-components-in-adobe-cq-5-part-1-a-tutorial-on-clientlibs-using-jquery-ui.html)

# iphone - 自定义键盘设置光标位置

> ID：10578162
> 
> 赞同：1
> 
> 时间：2012-05-14T06:05:58.547
> 
> 标签：iphone, objective-c, ios, ipad, uitextfield

我有一个文本字段，在该文本字段上出现一个自定义键盘，其中包含数字 0-9 和一个退格按钮。我可以在末尾以及字符串中间删除文本。但是当我从中间的某个地方删除文本时，光标会跳到结束位置。我希望光标在删除文本时保持在原来的位置。请尽快回复并提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T10:37:20.507

首先获取光标的初始位置（或所选范围的末尾）：

```
UITextRange *selectedRange = [textField selectedTextRange];
NSInteger offset = [textField offsetFromPosition:textField.endOfDocument toPosition:selectedRange.end]; 
```

修改 textField 的文本后，使用 UITextPosition 重置光标位置，如下所示：

```
UITextPosition *newPos = [textField positionFromPosition:textField.endOfDocument offset:offset];
textField.selectedTextRange = [textField textRangeFromPosition:newPos toPosition:newPos]; 
```

# php - 哪个在 PHP 中更有效，explode() 来自嵌套开关案例的数据库

> ID：10578163
> 
> 赞同：0
> 
> 时间：2012-05-14T06:05:59.157
> 
> 标签：php, database, function, webserver, switch-statement

我正在编写一个系统，该系统通过收集上传到系统的奖杯数据来记录用户在游戏中的成就，它可以正常工作，但我已经开始考虑系统的一部分，我可以用两种不同的方式完成

这部分系统收集奖杯的排名（铜、银、金、水晶、翡翠）和它的价值，每个用户作为游戏表中的记录，除了表的主键和 user_id 外键之外的每个字段表示可以按照它们列出的确切顺序获得的每个奖杯，这意味着它们不会以机器可以轻松搜索的任何方式进行排序

我的战斗方式是有另一个表，其中每条记录都包含游戏和一个字符串，其中列出了由 |'s 分隔的奖杯的排名顺序，所以当我使用 explode(STRING,"|") 时，我得到一个数组和数组的每个索引都是一个字符，它看起来像这样

b|b|s|g|c|g|s|j

这只是奖杯排名，积分值是通过我传递游戏ID和奖杯ID的函数完成的，switch case语句将首先检查我通过了什么游戏，而在每种情况下嵌套的switch case将检查id，在每个在这些情况下，他们返回奖杯的点值

当然我没有计划我的代码，上面的排名字符串最初没有| 而且我没有像那样做点值，因为与排名不同，得分值在 1 到 3 位之间，现在我知道我可以对点值做同样的事情，就像我对排名顺序所做的那样

我想知道哪种方法对 Web 服务器和浏览器更有效，从数据库中提取字符串并使用 explode(STRING,"|") （和 intval() 将点值从字符串转换为整数，需要它们像计算那样）或使用switch case语句调用函数（如查找表）或者如果我已经拥有的足够有效

我对尝试以完全不同的方式做我正在做的事情并不感兴趣，只是为了让它更高效，因为这些方法完全适合我在其中使用它们的嵌套循环

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:21:08.847

我认为最好使用[序列化 PHP 函数](http://ua.php.net/manual/en/function.serialize.php)：

```
public function setValues($values) {
    if (is_array($values)) {
        $this->setFieldValue('values', serialize($values)); // for db field
    } elseif (is_string($values)) {
        $this->setFieldValue('values', serialize(explode(",", $values)));  // for db field
    } else {
        throw new Exception("Invalid values data format");
    }
}

public function getValues() {
    $values = $this->getFieldValue('values'); // or something else getting field data from DB
    if ($values == "") {
        return array();
    } else {
        return unserialize($values);
    }
} 
```

在这种情况下，您可以快速简便地存储和恢复数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:36:19.710

尝试重建您的数据库，可能会有一个与用户、奖杯表..列用户 ID、奖杯 ID、总分和/或其他数据有很多关系的表格成就，您可以获得用户名、奖杯类型和积分

# google-chrome - Chrome 扩展中的全局变量

> ID：10578166
> 
> 赞同：1
> 
> 时间：2012-05-14T06:06:15.193
> 
> 标签：google-chrome, google-chrome-extension

有没有一种简单的方法可以通过 chrome 扩展中的内容脚本访问全局 javascript 变量？

[从 chrome 扩展中的内容脚本访问全局对象](https://stackoverflow.com/questions/10052259/accessing-global-object-from-content-script-in-chrome-extension)

我按照上面链接中提到的步骤进行操作，但对我没有用。任何帮助将非常感激。

谢谢，尚卡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-03-03T16:46:14.573

对于那些从未来寻找这个问题的答案的人，我是这样做的：

```
function getVariable(v) {
    var c = document.createElement("div");
    c.id = 'var-data';
    c.style.display = 'none';
    document.body.appendChild(c);
    var s = document.createElement('script');
    s.innerHTML = 'document.getElementById("var-data").innerText=JSON.stringify('+v+');';
    document.head.appendChild(s);
    var data = JSON.parse(c.innerText);
    c.remove();
    s.remove();
    return data;
} 
```

以及基本用法：

```
getVariable('globalVarIWantToAccess'); 
```

所有这些脚本都在内容脚本中，而不是主网页的代码，这意味着不需要网页本身的合作。基本上，该`getVariable`函数创建了一个脚本元素，该元素被注入到主页中。此脚本标记检索请求的全局变量并将数据放入新的 div。然后该函数从新 div 中获取此数据，删除新 div，删除新脚本元素并返回数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-15T05:15:35.210

我设法完成了它。谢谢您的帮助。我使用简单的消息传递将值从扩展脚本检索到内容脚本。我错过的地方是，扩展脚本的监听器需要在后台页面（我认为是这样）。一旦我改变了它，它就起作用了。

# c# - win7下的C#任务栏工具栏

> ID：10578170
> 
> 赞同：0
> 
> 时间：2012-05-14T06:06:30.870
> 
> 标签：c#, windows-7, toolbar, taskbar

只是一个快速的，希望非常简单的问题。我希望在任务栏上放置一个工具栏（一个常见的例子是语言栏），工具栏本身只需要显示直到下一辆公共汽车的时间。

我的问题是如何做到这一点，我似乎找不到有关如何创建任务栏工具栏的信息。我将用 C# 编写并将使用 Windows 7。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:34:23.467

要与任务栏互操作，您需要使用本机 Windows api。您可以检查 msdn 并阅读有关 windows api 的信息并使用 PInvoke 调用正确的 windows 方法，或者您可以使用用 c# 编写的库来包装该常见 windows api。[您可以在http://archive.msdn.microsoft.com/WindowsAPICodePack](http://archive.msdn.microsoft.com/WindowsAPICodePack)找到这样的库。

# ios - iOS 5.0 sendEvent 被调用了两次 [2] 次

> ID：10578171
> 
> 赞同：0
> 
> 时间：2012-05-14T06:06:31.437
> 
> 标签：ios, uiwindow

我对 UIWindow 进行了子类化，但由于某种原因， - (void)sendEvent:(UIEvent *)event 被调用 2 次以用于与屏幕的任何交互。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T00:33:46.177

出于调试目的，子类窗口（应用程序委托）并覆盖 sendEvent: 方法

```
-(void) sendEvent:(UIEvent *)event
{
    NSLog(@"%@",event);
    [super sendEvent:event];
} 
```

很可能，您会注意到负责 TouchesBegan 和 TouchesEnded（用于点击）的事件。这可以通过子类化 View 并覆盖与触摸相关的方法来测试。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"tocuhesBegan");
}
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"touchesMoved");
}
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"touchesEnded");
}
- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"touchesCancelled");
} 
```

**此外，尝试在视图上拖动/滑动以注意发送到视图的事件计数的变化：)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T00:15:46.717

为 fingerDown 和 allFingersUp 调用 sendEvent

# java - 缓存文件服务器

> ID：10578176
> 
> 赞同：3
> 
> 时间：2012-05-14T06:07:17.133
> 
> 标签：java, file, caching

我有一个通过 http 提供文件的 java 文件服务器。每个文件都可以通过 ID 进行唯一寻址，如下所示：

```
http://fileserver/id/123455555 
```

我希望为此添加一个缓存层，以便最常访问的文件保留在内存中。我还想控制缓存的总大小。我正在考虑为此使用 ehcache 或 oscache，但我之前只使用它们来缓存序列化对象。它们会是一个不错的选择吗？构建文件缓存是否还有其他注意事项？

**编辑**

感谢所有的答案。有关文件服务器的更多详细信息以简化（或复杂化）问题：

1.  一旦文件被保存，它就永远不会被修改。
2.  MD5 哈希以避免在保存时重复文件。（我知道可能的碰撞和安全问题）
3.  在 linux 机器上运行的文件服务器。

**编辑 2** 虽然服务器本身对其支持的文件类型没有任何限制，但文件大多是图像（jpg、gif、pgn）、Word、excel、不大于 10Mb 的 PDF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:19:31.273

番石榴缓存？[http://code.google.com/p/guava-libraries/wiki/CachesExplained](http://code.google.com/p/guava-libraries/wiki/CachesExplained)

*   不错的 API
*   基于时间的驱逐
*   基于大小的驱逐

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:34:56.290

Ehcache 也提供了进行网络缓存的能力。您可能想尝试[http://www.ehcache.org/documentation/user-guide/web-caching](http://www.ehcache.org/documentation/user-guide/web-caching)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T07:15:31.507

恕我直言，您最好使用 OS 磁盘缓存，因为这有几个优点。

*   它更简单，因为操作系统完成了所有实际工作。
*   操作系统可以使用所有可用的可用内存，这取决于系统的其他功能。
*   您不会加倍使用磁盘缓存（因为它是磁盘缓存）。

无论如何，操作系统都会将所有最近最少使用的文件保存在内存中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T07:59:49.737

### 利用 HTTP 协议

到目前为止，您最有效的缓存机制是将缓存移出您自己的服务器并尽可能靠近客户端（数据局部性；））。有效地使用 HTTP 协议以允许客户端和缓存代理在适当的时候进行缓存：

*   使用每个文件内容的某些功能（例如 MD5Sum）设置 ETag - 也缓存此信息，这样您就不会在每个服务上重新计算！
*   根据需要设置 Expires / Last-Modified / Cache-Control 标头

*编辑：您更新说文件永远不会被修改，所以我建议将 Expires 标头设置为遥远的未来日期。*

...现在更直接地回答这个问题...

### 缓存

我对 EhCache 的体验是一个不错的选择，可以满足您提到的要求。

您提到“最常访问的文件保留在内存中”，因此似乎有必要提及，根据我（几年前）所做的一些性能测试，LFU（最不常用）驱逐策略*比*LRU（最少最近使用）缓存写入 - 实际上慢了 30 倍。这是 LFU 与 LRU 的额外复杂性的产物。

检查您在生产中真正看到的数据使用模式以了解哪种驱逐策略最适合您，这将是一个好主意。在大多数情况下，我建议将 LRU 作为起点，因为它在缓存足够大并且没有大量异常数据访问的情况下接近 LFU。

### 操作系统缓存

我没有使用过 OSCache，所以不能在那里说什么。

### 其他注意事项

1.  在他的回答中，Peter Lawrey 建议使用操作系统缓存。虽然这意味着你要为从 java 到 native 的读取付出代价，但我认为这个想法有很大的优点，因为它避免了在 Java 堆中缓存的一个重大问题：垃圾收集器有额外的工作来拖网大堆。（另一种解决方案是使用堆外缓存，例如通过[BigMemory](http://ehcache.org/documentation/configuration/bigmemory)，但这有其自身的权衡）
2.  如果内容是可压缩的，您可能需要考虑缓存文件的压缩（gzip'd）版本（否则您最终将在每次提供它时重新压缩它！）。这是反对使用 OS 磁盘缓存的一个论点。当然，还有其他一些与压缩相关的注意事项（例如，内容足够大，可以保证压缩并且压缩得相当好），因此它确实取决于这些文件中的内容。

# android - 从android使用Web服务时出现运行时错误

> ID：10578178
> 
> 赞同：1
> 
> 时间：2012-05-14T06:07:43.477
> 
> 标签：android, eclipse, web-services, consuming

我将根据此链接[http://jatin4rise.wordpress.com/2010/10/03/webservicecallfromandroid/](http://jatin4rise.wordpress.com/2010/10/03/webservicecallfromandroid/)使用来自 android 的 Web 服务，但在运行时我的 android 应用程序 [AndroidFrontend] 显示为

对不起！。应用程序 AndroidFrontend(process.org.web.android.frontend) 意外停止。请稍后再试。

而logcat显示为

**LOGCAT**

```
05-14 11:13:55.133: E/dalvikvm(208): Could not find class 'org.ksoap2.serialization.SoapObject', referenced from method org.web.android.frontend.AndroidFrontendActivity.onCreate
05-14 11:13:55.133: W/dalvikvm(208): VFY: unable to resolve new-instance 25 (Lorg/ksoap2/serialization/SoapObject;) in Lorg/web/android/frontend/AndroidFrontendActivity;
05-14 11:13:55.133: D/dalvikvm(208): VFY: replacing opcode 0x22 at 0x0010
05-14 11:13:55.163: D/dalvikvm(208): VFY: dead code 0x0012-0081 in Lorg/web/android/frontend/AndroidFrontendActivity;.onCreate (Landroid/os/Bundle;)V
05-14 11:13:55.224: D/AndroidRuntime(208): Shutting down VM
05-14 11:13:55.224: W/dalvikvm(208): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-14 11:13:55.233: E/AndroidRuntime(208): FATAL EXCEPTION: main
05-14 11:13:55.233: E/AndroidRuntime(208): java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject
05-14 11:13:55.233: E/AndroidRuntime(208):  at org.web.android.frontend.AndroidFrontendActivity.onCreate(AndroidFrontendActivity.java:28)
05-14 11:13:55.233: E/AndroidRuntime(208):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-14 11:13:55.233: E/AndroidRuntime(208):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-14 11:13:55.233: E/AndroidRuntime(208):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-14 11:13:55.233: E/AndroidRuntime(208):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-14 11:13:55.233: E/AndroidRuntime(208):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-14 11:13:55.233: E/AndroidRuntime(208):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-14 11:13:55.233: E/AndroidRuntime(208):  at android.os.Looper.loop(Looper.java:123)
05-14 11:13:55.233: E/AndroidRuntime(208):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-14 11:13:55.233: E/AndroidRuntime(208):  at java.lang.reflect.Method.invokeNative(Native Method)
05-14 11:13:55.233: E/AndroidRuntime(208):  at java.lang.reflect.Method.invoke(Method.java:521)
05-14 11:13:55.233: E/AndroidRuntime(208):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-14 11:13:55.233: E/AndroidRuntime(208):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-14 11:13:55.233: E/AndroidRuntime(208):  at dalvik.system.NativeStart.main(Native Method) 
```

伙计们，据我所知，我已经用谷歌搜索了这些问题，但仍在寻找解决方案。如果你有，请告诉我解决方案。

感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:43:24.367

VM 无法找到该类`org.ksoap2.serialization.SoapObject`。

确保在构建项目时包含所需的库（JAR 文件）。

# regex - 在 perl 中解析特定类型的字符串

> ID：10578180
> 
> 赞同：2
> 
> 时间：2012-05-14T06:07:57.860
> 
> 标签：regex, string, perl, parsing

我有以下类型的字符串（引号表示它们都在一行上）：

“氨基-2,4,6-三碘苯甲酸 Hugo Holtermann, Baerum, Leif Gunnar Haugen, Oslo 和 Knut Wille, Baerum, Norway，Nye-5 的转让人”

“生产乙烯化合物的过程 Duncan Clark 和 Percy Hayden，Norton-on-Tees，Eng-5 土地，ImperiaI Chemical Industries Limited，伦敦，英国的转让人”

我想得到标题之后的所有内容（全部大写的部分）。所以我想得到：

“Hugo Holtermann, Baerum, Leif Gunnar Haugen, Oslo 和 Knut Wille, Baerum, 挪威，Nye-5 的转让人”

“Duncan Clark 和 Percy Hayden，Norton-on-Tees，Eng-5 土地，ImperiaI Chemical Industries Limited，伦敦，英国的转让人”

我有比这两个更多的字符串，但基本格式是发明的标题总是大写的字母和数字。

有没有办法用 perl 中的正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:48:58.527

好吧，如果它不需要 100% 准确，我只会查找第一个大写字母，然后是第一个小写字母，然后抓取该行的其余部分。

像这样的东西（我的 perl 有点生疏，请原谅任何语法错误）：

`$part_of_line = $full_line =~/([A-Z][a-z].*)/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T17:27:56.290

怎么样：

```
#!/usr/bin/perl
use strict;
use warnings;
use 5.014;

my $re = qr
    /^                # Start of string
    [\p{Lu}\pN, -]+   # one or more uppercase letter or number or comma or space or dash
    (                 # start group 1
      \p{Lu}[\pL.']   # one uppercase letter followed by any letter or dot or apostroph
    )                 # end group
    /x;
while(<DATA>) {
    chomp;
    s/$re/$1/g;       # replace match by group 1
    say;
}

__DATA__
AMINO-2,4,6-TRIIODOBENZOIC ACIDS Hugo Holtermann, Baerum, Leif Gunnar Haugen, Oslo, and Knut Wille, Baerum, Norway, assignors to Nye- 5
PROCESS FOR THE PRODUCTION OF ETHYLENIC COMPOUNDS Duncan Clark and Percy Hayden, Norton-on-Tees, Eng- 5 land, assignors to ImperiaI Chemical Industries Limited, London, England
PROCESS FOR THE PRODUCTION OF ETHYLENIC COMPOUNDS D.Clark
PROCESS FOR THE PRODUCTION OF ETHYLENIC COMPOUNDS O'Connors 
```

**输出：**

```
Hugo Holtermann, Baerum, Leif Gunnar Haugen, Oslo, and Knut Wille, Baerum, Norway, assignors to Nye- 5
Duncan Clark and Percy Hayden, Norton-on-Tees, Eng- 5 land, assignors to ImperiaI Chemical Industries Limited, London, England
D.Clark
O'Connors 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T06:53:52.803

我试过了，得到了你期望的输出

```
if($ip =~ m/([A-Z0-9,\- ]+)([A-Z]+[a-z]+.*)/)
{
      print "$2";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T10:51:48.117

标题总是以大写字母+空格结尾，所以这应该有效：

```
/^.+[A-Z]+ (.+)$/;
print $1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T06:48:23.103

尝试这个：

```
$text = "PROCESS FOR THE PRODUCTION OF ETHYLENIC COMPOUNDS Duncan Clark and Percy Hayden, Norton-on-Tees, Eng- 5 land, assignors to ImperiaI Chemical Industries Limited, London, England ";

if($text =~ m/(\b[A-Z0-9-, ]+)\b(.*)/) {
    print "$2";
} 
```

# javascript - jquery index() 带有一些特定的选择器...？

> ID：10578181
> 
> 赞同：5
> 
> 时间：2012-05-14T06:07:58.533
> 
> 标签：javascript, jquery, jquery-selectors, indexing, html-lists

我有一个有 li 的父母，并且给了指向 li 的指针，我想得到它作为孩子的位置。

为此，我使用了：

```
li.index() 
```

现在......我还有一个条件，它应该只在这些在 css 中具有 display:block 属性的孩子中找到一个索引。

我尝试了其他一些方法，但我无法解决它。有什么想法吗？

**编辑**： PS：或者，更确切地说，对于那些没有 display:none 属性的。

**编辑2**：好吧，我这些都需要对父ID或特定ID的引用，但是如果只有一个指向li的指针怎么办，例如：

```
<ul>
<li>Foo</li>
<li>Bar</li>
<li>Fiz</li>
<li>Buz</li>
</ul>

li=$('li:nth-child(n)'); 
```

现在，假设我只知道一个变量，并且我希望它是那些没有 css display: none 属性的变量中的索引...

**解决**了这是怎么回事：

```
li.add(li.siblings()).filter(':visible').index( li ); 
```

感谢您用伟大的想法和不同的方法帮助我。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T06:14:24.393

使用以下标记：

```
<ul>
  <li>Foo</li>
  <li>Bar</li>
  <li style="display:none">Fiz</li>
  <li>Buz</li>
</ul> 
```

我们可以确定最后一个`li`所有可见列表项的（从零开始的）索引：

```
// 2
$("li:last").index("li:visible"); 
```

如果我们要删除`:visible`选择器，并询问最后一个的索引：

```
// 3
$("li:last").index("li"); 
```

### 更新：使用变量

如果您有对特定列表项的变量引用：

```
var lastItem = $("#parent li:last"); 
```

您仍然可以在同一容器中的可见子项中获取其索引：

```
var index = $(lastItem).index("#parent li:visible"); 
```

### 更新 2：没有明确的父 ID

```
var index = lastItem.parent().find("li").index( lastItem ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:14:16.860

试试这个答案

```
 var listItem = document.getElementById('bar');
   alert('Index: ' + $('li').index(listItem)); 
```

小提琴链接 [http://jsfiddle.net/VqeHW/](http://jsfiddle.net/VqeHW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T06:21:33.580

给你的 display:none 元素一个类，然后使用 .class 选择器：

```
$('#theList .visible').each(function () {
  var index = $('#theList .visible').index(this);
}); 
```

# html - 使用css将按钮添加到标题

> ID：10578185
> 
> 赞同：0
> 
> 时间：2012-05-14T06:09:03.963
> 
> 标签：html, css

我想将按钮添加到以下标题。它应该有类似的布局

[http://www.fullstopinteractive.com/](http://www.fullstopinteractive.com/)

**标题 CSS：**

```
body {
    margin:0;
    padding:100px 0 50px 0;
}

div#header {
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:30px;
    background-color: #800080;
}

div#footer {
    position:absolute;
    bottom:0;
    left:0;
    width:100%;
    height:50px;
    background-color: #800080;
}

 @media screen {
    body>div#header {
        position:fixed;
    }

    body>div#footer {
        position:fixed;
    }
}

* html body {
    overflow:hidden;
}

* html div#content {
    height:100%;
    overflow:auto;
} 
```

**CSS：**

```
#nav {
    float: right;
    padding: 42px 0 0 30px;
}

#nav li {
    float: left;
    margin: 0 0 0 5px;
}

#nav li a {
    padding: 5px 15px;
    font-weight: bold;
    color: #ccc;
    color: rgba(255, 255, 255, 0.7);
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);
    -webkit-border-radius: 14px;
    -moz-border-radius: 14px;
    border-radius: 14px;
    -webkit-transition: all 0.3s ease-in-out;
    -moz-transition: all 0.3s ease-in-out;
    -o-transition: all 0.3s ease-in-out;
    transition: all 0.3s ease-in-out;
}

#nav li a:hover, #nav li a:focus {
    color: #fff;
    background: rgba(255, 255, 255, 0.15);
} 
```

**HTML：**

```
 <div id="header">  
  <ul id="nav">
  <li><a href="#">HOME</a></li>
  <li><a href="#">KPI</a></li>  
  </ul> </div> 
```

但是该按钮没有像在网站上那样出现。如何做到这一点？ ![在此处输入图像描述](../Images/768d1c212469e3d1635b620293000409.png)

**铬**：

![在此处输入图像描述](../Images/ce6afe8d2e5ba4f8da3e140576adaade.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:28:21.967

如果您的目标是使链接在“导航栏”中居中，则不应将它们浮动或绝对定位它们。这是一个显示它们居中的小提琴：

[http://jsfiddle.net/9vtB5/1/](http://jsfiddle.net/9vtB5/1/) ->**更新**

我改变的只是前两条规则`#nav`：

```
#nav {
    text-align:center;
}

#nav li {
    display:inline;
    margin: 0 0 0 5px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:37:39.493

```
#nav {
    text-align:center;

}

#nav li {display:inline-block;} 
```

# java - 奇怪的 Java 日历行为

> ID：10578189
> 
> 赞同：2
> 
> 时间：2012-05-14T06:09:13.650
> 
> 标签：java, calendar

有谁明白为什么输出中的年份是 2077 而不是 2011？

```
Integer yyyyMMdd = 20110830
Calendar day = Calendar.getInstance(TimeZone.DEFAULT);

Integer dd = yyyyMMdd % 100;
Integer yyyy = yyyyMMdd / 10000;

day.set(yyyy, MM-1, dd);

System.err.println(day.getTimeInMillis()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T06:19:33.330

修复了您的代码以使其实际编译后，我得到了预期的结果-因此可能是您*真正*运行但未显示的代码中的错误。这是我的代码：

```
import java.util.*;

class Test {
    public static void main(String[] args) {
        int yyyyMMdd = 20110830;
        Calendar day = Calendar.getInstance(TimeZone.getDefault());

        int dd = yyyyMMdd % 100;
        int MM = (yyyyMMdd % 10000) / 100;
        int yyyy = yyyyMMdd / 10000;

        day.set(yyyy, MM-1, dd);

        System.err.println(day.getTime());
    }
} 
```

我的机器上的结果：

```
Tue Aug 30 07:18:33 BST 2011 
```

# android - 从 Android 原生计算器获取结果

> ID：10578192
> 
> 赞同：1
> 
> 时间：2012-05-14T06:09:20.043
> 
> 标签：android, calculator

我正在从我的应用程序调用 android 本机计算器，我如何从中获取结果数据.. 意味着我像这样启动本机日历，完成计算后我按回 onActivityResult 被执行并且返回的数据为空，如何获取计算数据。 。 帮我

```
Intent i = new Intent();
i.setClassName("com.android.calculator2",
            "com.android.calculator2.Calculator");
startActivityForResult(i, 1); 

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
super.onActivityResult(requestCode, resultCode, data); 
if(requestCode == 1){
    Log.i("CALCULATOR", "Result Data is"+ data);
 }       
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:18:01.833

经过一些测试，我开始认为您无法从计算器中真正得到一些东西。调用某些东西`startActivityForResult`并不意味着它会返回其他东西`null`，因为除了按后退键之外没有其他方法可以退出计算器，我认为这是其中一种情况。

本机计算器似乎没有调用`setResult(RESULT_SUCESS,intent_with_data)`这是能够检索此结果所需的步骤。我能想到的最简单的事情是，因为您想做一些计算，所以实现您自己的计算器类并调用该类而不是本机类。

计算器很容易制作，网上有无数的例子。只需确保您有一个按钮，在您将附加内容添加到结果的意图后`OK`即可调用。`setResult(RESULT_SUCESS, intent_with_data)`

**警告**

请注意，您是在硬编码类名，而不是通过指定操作和 URI 来调用意图。这可能会调用模拟器和标准版本的 Android 上的原始计算器，但制造商会更改这些类型的东西，并且由于没有人应该按照您的意图调用它们，您最终可能会导致应用程序崩溃。

# java - 显示源代码的 appengine java 开发服务器

> ID：10578202
> 
> 赞同：7
> 
> 时间：2012-05-14T06:10:15.040
> 
> 标签：java, google-app-engine

当我在 appengine 开发服务器上访问这样的 jsp 页面时：

本地主机：8888/index.jsp/

它在浏览器中显示 index.jsp 的源代码。如果您访问时没有斜杠（即 index.jsp），那么它会呈现 jsp，但使用斜杠（即 index.jsp/）会显示源代码

知道这是为什么吗？以及如何解决？

它似乎只发生在开发服务器而不是生产服务器中。生产给出了 404 Not Found 错误，这很好。

我正在使用 SDK 1.6.4

# 网页.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaeehttp://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">

    <servlet>
        <servlet-name>RegisterPage</servlet-name>
        <jsp-file>/register.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>RegisterPage</servlet-name>
        <url-pattern>/signup</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

==========

所以...

index.jsp -> 呈现页面

index.jsp/ -> 返回源代码

register.jsp/ -> 返回源代码

register.jsp -> 渲染jsp

注册/ -> 呈现 register.jsp

注册 -> 呈现 register.jsp

所以似乎是带有 *.jsp/ 的网址有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:53:22.847

您应该将所有 *.jsp 文件移动到 /WEB-INF 目录中，并更新您的 web.xml。

这样 *.jsp 文件将无法直接访问，源代码将被隐藏。

```
<?xml version="1.0" encoding="utf-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaeehttp://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">
<servlet>
    <servlet-name>RegisterPage</servlet-name>
    <jsp-file>/WEB-INF/register.jsp</jsp-file>
</servlet>
<servlet-mapping>
    <servlet-name>RegisterPage</servlet-name>
    <url-pattern>/signup</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>IndexPage</servlet-name>
    <jsp-file>/WEB-INF/index.jsp</jsp-file>
</servlet>
<servlet-mapping>
    <servlet-name>IndexPage</servlet-name>
    <url-pattern>/index</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>/index</welcome-file>
</welcome-file-list> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:17:46.810

当我使用“重定向”和 apache tomcat 7 时，我遇到了一些问题，因为新版本的 apache 不支持重定向。为了解决您的问题，请在您的 apache 版本（如果您使用它）的更新日志中搜索您在页面中使用的标签，或者发布您的页面代码以便能够建议其他解决方案。可能是您使用了已弃用的标签。此外，请继续检查文件 localhost[DATE].log 以获取更多详细信息

# javascript - 自定义突出显示到 jqPlot 堆积条形图

> ID：10578204
> 
> 赞同：2
> 
> 时间：2012-05-14T06:10:22.680
> 
> 标签：javascript, jquery, jqplot

向 jqPlot 图表添加自定义突出显示时，我只需使用

```
$('#chart').bind('jqplotDataHighlight', function (ev, sIndex, pIndex, data) {
    var chart_top = $('#chart').offset().top,
        y = plot1.axes.yaxis.u2p(data[1]); // convert y axis units to pixels
    $('#tooltip').css({ top: chart_top + y });
} 
```

如这里的最后一个示例[所示](http://www.jqplot.com/tests/bubble-plots.php)。这在我的简单条形图上效果很好。然后我在堆积条形图上尝试相同的方法，并且 x 值关闭。有谁知道我如何获得这些值或我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T15:40:44.437

看看我是如何在堆积条形图上制作自定义工具提示的。

[jsfiddle 示例可在此处获得。](http://jsfiddle.net/Boro/RNPxQ/)

# android - java.lang.IndexOutOfBoundsException：索引 8 无效，大小为 8

> ID：10578207
> 
> 赞同：-3
> 
> 时间：2012-05-14T06:10:31.700
> 
> 标签：android

```
for(int j=0; j<ServiceProviderCal.ap_title_arr.size();j++)
{           
    if(ServiceProviderCal.ap_title_arr.get(position).isEmpty())
    {
         Holder.relative.setBackgroundColor(android.graphics.Color.rgb(255, 255,255));
    }
    else
    {
        Holder.txtNote1.setText(notes.get(position)+"  For:");
        Holder.txtNote2.setText(des.get(position));
        Holder.relative.setBackgroundColor(android.graphics.Color.rgb(255, 255,0));                 
        //Log.e("Notes...", ""+notes);  
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T06:12:10.167

这个：

```
for(int j=0; j<=ServiceProviderCal.ap_title_arr.size();j++) { 
```

应该：

```
for(int j=0; j<ServiceProviderCal.ap_title_arr.size();j++) { 
```

数组索引从 0 开始，所以当你有一个大小为 8 的数组时，其中的最大索引是 7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:48:51.360

在您的代码中，您正在使用

```
Holder.txtNote1.setText(notes.get(position)+"  For:");
        Holder.txtNote2.setText(des.get(position)); 
```

什么是**笔记**和**des**。我确信错误来自此代码。

`notes`和`des`数组列表值应该等于`ServiceProviderCal.ap_title_arr.size()`

所以通过记录数组的大小来调试你的代码`notes`。`des`

# wpf - 无边框窗口投影不透明度元素问题

> ID：10578211
> 
> 赞同：0
> 
> 时间：2012-05-14T06:11:02.043
> 
> 标签：wpf

我正在尝试在 WPF 中创建一个无边框窗口。我正在使用[链接](https://stackoverflow.com/questions/3372303/dropshadow-for-wpf-borderless-window)中提到的课程。

只要所有元素都启用（不透明度= 1），这工作正常。如果我将不透明度设置为 0.5，它几乎是不可见的。

如果我删除阴影的代码，不透明度可以正常工作。我不确定这是什么原因。

该课程与我使用的课程相同，如上面链接中所述。我的其余代码如下。

任何帮助表示赞赏：

*   吉里哈

XAML：

```
<Window x:Class="Sample.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Sample">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="70"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <TextBox Margin="2" Text="Something" Grid.Row="0"/>
    <Button Grid.Row="1" Content="Something" IsEnabled="False" Opacity="0.7"/>
</Grid> 
```

后面的代码：

```
/// <summary>
/// Interaction logic for Window1.xaml
/// </summary>
public partial class Window1 : Window
{

    public Window1()
    {
        InitializeComponent();

    }

    /// <summary>
    /// Raises the <see cref="E:System.Windows.FrameworkElement.Initialized"/> event. 
    /// This method is invoked whenever 
    /// <see cref="P:System.Windows.FrameworkElement.IsInitialized"/> is set to true internally.
    /// </summary>
    /// <param name="e">The <see cref="T:System.Windows.RoutedEventArgs"/> 
    /// that contains the event data.</param>
    protected override void OnInitialized(EventArgs e)
    {
        //AllowsTransparency = false;
        ResizeMode = ResizeMode.NoResize;

        WindowStartupLocation = WindowStartupLocation.CenterScreen;
        WindowStyle = WindowStyle.None;

        DwmDropShadow.DropShadowToWindow(this);

        base.OnInitialized(e);
    }
} 
```

从上面的链接中获取的帮助类：

```
class DwmDropShadow 
```

{

```
[DllImport("dwmapi.dll", PreserveSig = true)] 
private static extern int DwmSetWindowAttribute(IntPtr hwnd, int attr, ref int attrValue, int attrSize); 

[DllImport("dwmapi.dll")] 
private static extern int DwmExtendFrameIntoClientArea(IntPtr hWnd, ref Margins pMarInset); 

/// <summary> 
/// Drops a standard shadow to a WPF Window, even if the window isborderless. Only works with DWM (Vista and Seven). 
/// This method is much more efficient than setting AllowsTransparency to true and using the DropShadow effect, 
/// as AllowsTransparency involves a huge permormance issue (hardware acceleration is turned off for all the window). 
/// </summary> 
/// <param name="window">Window to which the shadow will be applied</param> 
public static void DropShadowToWindow(Window window) 
{ 
    if (!DropShadow(window)) 
    { 
        window.SourceInitialized += new EventHandler(window_SourceInitialized); 
    } 
} 

private static void window_SourceInitialized(object sender, EventArgs e) 
{ 
    Window window = (Window)sender; 

    DropShadow(window); 

    window.SourceInitialized -= new EventHandler(window_SourceInitialized); 
} 

/// <summary> 
/// The actual method that makes API calls to drop the shadow to the window 
/// </summary> 
/// <param name="window">Window to which the shadow will be applied</param> 
/// <returns>True if the method succeeded, false if not</returns> 
private static bool DropShadow(Window window) 
{ 
    try 
    { 
        WindowInteropHelper helper = new WindowInteropHelper(window); 
        int val = 2; 
        int ret1 = DwmSetWindowAttribute(helper.Handle, 2, ref val, 4); 

        if (ret1 == 0) 
        { 
            Margins m = new Margins { Bottom = 0, Left = 0, Right = 0, Top = 0 }; 
            int ret2 = DwmExtendFrameIntoClientArea(helper.Handle, ref m); 
            return ret2 == 0; 
        } 
        else 
        { 
            return false; 
        } 
    } 
    catch (Exception ex) 
    { 
        // Probably dwmapi.dll not found (incompatible OS) 
        return false; 
    } 
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:26:13.460

我不知道你为什么使用 dwmapi.dll 来使用阴影效果。为什么不使用 WPF Extended 工具包或presentationframework.Aero（来自Visual Studio 中的.NET 程序集）的硬件加速阴影效果？

```
 <ResourceDictionary Source="/presentationframework.Aero;V3.0.0.0;31bf3856ad364e35;component/themes/aero.normalcolor.xaml"/>

  <DropShadowEffect ShadowDepth="2"></DropShadowEffect> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:07:05.190

干得好 ：）

```
 <Window x:Class="Test.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    AllowsTransparency="True"
    Title="MainWindow"
    Background="Transparent"
    WindowStyle="None"
    Height="350"
    Width="500">
    <Border Background="#ffFEFEFE" CornerRadius="5" BorderThickness="2" Margin="10" BorderBrush="#ffaaaaaa">
    <Border.Effect>
        <DropShadowEffect Direction="270"
                          ShadowDepth="5"
                          Opacity="0.8"
                          BlurRadius="7" />
    </Border.Effect>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="70" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <TextBox Margin="2"
                 Text="Something"
                 Grid.Row="0" />
        <Button Grid.Row="1"
                Content="Something"
                IsEnabled="False"
                Opacity="0.5" />

    </Grid>

  </Border>
</Window> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T17:40:34.117

对边距之一使用非零值，例如。1, 0, 0, 0; 或 1、1、1、1；并使用您自己的边距：

```
 [StructLayout(LayoutKind.Sequential)]
    public struct Margins
    {
        public int Left;
        public int Right;
        public int Top;
        public int Bottom;
    } 
```

# android - Android：DeviceAdmin 应用程序：无法启动活动以添加设备管理员

> ID：10578217
> 
> 赞同：3
> 
> 时间：2012-05-14T06:11:48.253
> 
> 标签：android, admin

我正在关注设备管理应用程序的示例代码。我尝试启动使用户能够添加设备管理应用程序的活动失败。以下是我用来尝试启动它的代码。

```
public class DeviceAdminTestActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ComponentName deviceAdminReceiver = new ComponentName(this, TestAdminReceiver.class);
        Intent i = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
        i.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, deviceAdminReceiver);
        i.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION, "My Explanantion");

//        startActivityForResult(i, 1);
        try{
            startActivity(i);
        }catch(Exception ex){
            Toast.makeText(this, ex.getMessage(), Toast.LENGTH_LONG);
        }
    }
} 
```

以下是接收器的代码...

```
public class TestAdminReceiver extends DeviceAdminReceiver {
    @Override
    public void onEnabled(Context context, Intent intent) {
        Toast.makeText(context, "On Enabled", Toast.LENGTH_SHORT).show();
    }

    @Override
    public CharSequence onDisableRequested(Context context, Intent intent) {
        return ("You are about to disable device admin");
    }

    @Override
    public void onDisabled(Context context, Intent intent) {
        Toast.makeText(context, "On Disabled", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onPasswordChanged(Context context, Intent intent) {
        Toast.makeText(context, "On Password Changed", Toast.LENGTH_SHORT).show();
    }
} 
```

最后，这是清单……

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.zeezulander.admintest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="org.zeezulander.admintest.DeviceAdminTestActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name=".TestAdminReceiver" android:permission="android.permission.BIND_DEVICE_ADMIN" android:label="Test Admin">        
            <meta-data android:resource="@xml/admin_data" android:name="adminMetaData"/>
            <intent-filter >
                <action android:name="android.app.action.DEVICE_ADMIN_ENABLED"/>
            </intent-filter>
        </receiver>
    </application> 
```

我什至没有收到错误。我的活动开始了，但没有任何事情发生，甚至没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T08:21:28.173

也许布局有问题。如果您没有收到错误，那么它没有崩溃，如果它没有崩溃，那么唯一可能出错的是显示（布局）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-10-24T05:18:35.990

```
 final Intent intent = new Intent();
        intent.setComponent(new ComponentName("com.android.settings", "com.android.settings.DeviceAdminAdd"));
        intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, adminReceiver);
        intent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION, "To use all features activate it.");
        overridePendingTransition(R.anim.slide_in_right, R.anim.slide_out_left);
        startActivityForResult(intent, ACTIVATION_REQUEST); 
```

# objective-c - 如何在测试悬空指针后重新启动应用程序，因为它说可能另一个实例挂在调试器中？

> ID：10578219
> 
> 赞同：1
> 
> 时间：2012-05-14T06:12:07.307
> 
> 标签：objective-c, xcode, cocoa-touch

我正在尝试使用以下代码创建一个悬空指针：

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"I am touched!");

    // bar is an instance variable defined by  NSString *bar;  in the interface
    if (!bar) {
        NSLog(@"bar is being init");
        bar = [NSString stringWithFormat:@"Hello I am %i", arc4random() % 1000];
        NSLog(@"bar is now %@", bar);
    } else {
        NSLog(@"bar is %@", bar);
    }
} 
```

因此，我可以在 iPad 2 设备（不是模拟器）上第二次触摸时成功使程序崩溃，但是当我尝试`[bar retain];`在分配行之后添加 a`bar =`以查看不会有悬空指针时，应用程序无法启动并继续运行显示：

> 无法向引导服务器注册 com.mycompany.TryIOSAppLeak。错误：未知错误代码。
> 
> 这通常意味着该进程的另一个实例已经在运行或挂在调试器中。(lldb)

有没有办法让它重新开始？（除了重新启动 iPad 和 iMac 或重新启动 Xcode）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:30:32.517

啊，这种情况经常发生在我身上。在重新启动之前尝试在应用程序崩溃后强制终止应用程序，该应用程序已挂在设备上。但是一旦发生删除设备/模拟器上的应用程序，重新启动设备/模拟器并重新启动 XCode。很烦对吧！或者，您可以编辑您的方案并将调试器更改为 GDB。它与您的代码无关。

# python - 使用列表值作为字典键作为键值

> ID：10578232
> 
> 赞同：1
> 
> 时间：2012-05-14T06:13:46.377
> 
> 标签：python, python-3.x, python-2.7

我正在使用列表值作为键创建字典。现在我想以与列表值相同的顺序获取字典键。请在下面找到代码：

```
dict = {}

category_list = [u'Customer', u'Consumers', u'OpenERP Partners', u'Basic Partner', u'Retailers', u'Supplier']

for category in category_list:
    dict[category] = 0.0

print "dict--->", dict 
```

我得到的输出为：

```
dict--->{u'Customer': 0.0, u'Consumers': 0.0, u'Basic Partner': 0.0, u'Supplier': 0.0, u'Retailers': 0.0, u'OpenERP Partners': 0.0} 
```

但我希望字典键的顺序与定义列表的顺序相同。即输出应该是这样的：

```
 dict--->{u'Customer': 0.0, u'Consumers': 0.0, u'OpenERP Partners': 0.0, u'Basic Partner': 0.0,  u'Retailers': 0.0, u'Supplier': 0.0,} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T06:15:14.520

您需要使用[`OrderedDict`](http://docs.python.org/dev/library/collections.html#collections.OrderedDict). 例如：

```
>>> import collections
>>> d = collections.OrderedDict()
>>> category_list = [u'Customer', u'Consumers', u'OpenERP Partners', u'Basic Partner', u'Retailers', u'Supplier']
>>> for category in category_list:
...   d[category] = 0.0
... 
>>> print d
OrderedDict([(u'Customer', 0.0), (u'Consumers', 0.0), (u'OpenERP Partners', 0.0), (u'Basic Partner', 0.0), (u'Retailers', 0.0), (u'Supplier', 0.0)]) 
```

此外，`dict`在 python 中已经使用它来引用 dict 类，因此应避免将其用作变量名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:23:48.117

您总是可以使用原始列表以正确的顺序打印字典，尽管我不确定您最终打算如何处理字典。

```
for categ in category_list:
     print categ, dict[categ] 
```

# image - 如何在 BlackBerry 的 UiApplication 上显示图像？

> ID：10578235
> 
> 赞同：0
> 
> 时间：2012-05-14T06:14:01.823
> 
> 标签：image, blackberry, uiapplication

如何在 UiApplication 上显示图像？

我有一个显示按钮的代码，单击它时会转到 a `MainScreen`，但我想在该按钮下方显示一个图像。我找到了一种插入可**缩放**图像但不是**静态**图像的方法。

到目前为止，这是我的代码：

```
public class HelloWorldDemo extends UiApplication {
    private MainScreen _screen;
    private ButtonField _nextScreen;

    public static void main(String[] args) {
         HelloWorldDemo instance = new HelloWorldDemo();
         instance.enterEventDispatcher();
    }
    public HelloWorldDemo() {
        EncodedImage myImg = EncodedImage.getEncodedImageResource("k.jpg");

        ZoomScreen zoomableImg = new ZoomScreen(myImg);

         _screen = new MainScreen();
         _nextScreen = new ButtonField("Go to Next Screen",ButtonField.FIELD_HCENTER | ButtonField.CONSUME_CLICK);
         _nextScreen.setChangeListener(new FieldChangeListener() {
               public void fieldChanged(Field field,int context) {
                  pushScreen(new NextScreen());
               }
          });
          _screen.setTitle(new LabelField("Hello World Demo",LabelField.USE_ALL_WIDTH));
          _screen.add(new RichTextField("Hello to the BlackBerry World!",Field.NON_FOCUSABLE));
          _screen.add(_nextScreen);
          pushScreen(_screen);
          pushScreen(zoomableImg);

   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:55:48.850

```
//I'm confused about your question. But still I'm posting ans here hope it will help you.
public final class ZoomScreenDemo extends UiApplication
{
    public static void main(final String[] args)
    {
        UiApplication app = new ZoomScreenDemo();
        app.enterEventDispatcher();
    }

    public ZoomScreenDemo()
    {
        pushScreen(new ZoomScreenDemoScreen());
    }

    public final static class ZoomScreenDemoScreen extends MainScreen
    {    
        private EncodedImage _image;   
        private ButtonField _nextScreen;

        public ZoomScreenDemoScreen()
        {           
            setTitle("Zoom Screen Demo");          

            _nextScreen = new ButtonField("Go to next screen ",ButtonField.CONSUME_CLICK);
            _nextScreen.setChangeListener(new FieldChangeListener() {

                public void fieldChanged(Field field, int context) {
                     UiApplication.getUiApplication().pushScreen(new DemoZoomScreen(_image));
                }
            });

            add( _nextScreen );
            _image = EncodedImage.getEncodedImageResource("img/building.jpg");        
            BitmapField bitmapField = new BitmapField(_image.getBitmap(), FIELD_HCENTER | FOCUSABLE);
            add(bitmapField);            
        }       
    }    

    static class DemoZoomScreen extends ZoomScreen
    {    
        DemoZoomScreen(EncodedImage image)
        {
            super(image);
        }

        public void zoomedOutNearToFit()
        {            
            close();
        }    
    }
} 
```

# c# - 实体框架外键实例

> ID：10578236
> 
> 赞同：0
> 
> 时间：2012-05-14T06:14:11.323
> 
> 标签：c#, entity-framework-4.3

我有一个表，其中有两个外键字段指向颜色表。

> BookCover -> ForegroundColor 和
> 
> BookCover -> 背景颜色

当我首先执行逆向工程代码时，它会生成`Colour`并`Colour1`在`BookCover`类中。

```
public virtual Colour Colour { get; set; }
public virtual Colour Colour1 { get; set; } 
```

我已将外国名称设置为`ForegroundColour`and `BackgroundColour`。有没有一种简单的方法让实体框架生成`ForegroundColour`and`BackgroundColour`而不是`Colou`r and `Colour1`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:38:29.580

我遇到过类似的问题，但我相信问题的答案是您只需将 Navagation 属性重命名为您想要的。实体框架设计器将始终让您更改概念方面的属性名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:17:17.250

您可以在 EF 模型设计器中更改关联名称。一旦它们被更改，框架将记住新名称，即使您稍后更新模型。

# php - PHP：同一页面中的消息框

> ID：10578245
> 
> 赞同：-1
> 
> 时间：2012-05-14T06:15:28.483
> 
> 标签：php

我有一个名为 orderform 的表格。现在我想订购设备。我订购了东西后，详细信息存储在数据库中，邮件将发送到服务器。我得到了上述过程。但它转到另一页。我希望所有这些过程都应该在同一页面中完成。这意味着在我点击提交按钮后，邮件将发送到服务器并将数据存储在数据库中，并且将在同一页面中显示一个消息框，其中包含订单的详细信息。你能帮帮我吗？问候，维诺特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:20:10.137

您应该使用的技术称为 AJAX。只是谷歌它。有很多关于它的信息。有一个 jQuery 库可以很好地处理这些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:46:39.797

有两种方法可以做到。

1.Put`action of a form empty so it will be redirect to same PHP page` 并在该页面上，您可以执行数据库处理和邮件功能。然后在表单（HTML 代码）中 Put `value = "$_POST['fieldname']"`。请看下面的例子

```
<?php
     if(isset($_POST)){
            //Perform database insert operation
            //Mail Operation
            //Set message.
    }
?>
<?php if(isset($message) && !empty($message)) { echo $message; }?>
 <form name="frmname" id="frmname" action="" method="post">
       <input type="name" id = "name" value="<?php if(isset($_POST['name'])) { echo $_POST['name'];}" />
       <input type="submit" name="sbmt" id="sbmt" value="post" />
 </form> 
```

2.使用Jquery`jQuery.post()`方法。请在下面找到它的网址。

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

谢谢

# iphone - 我可以在 UITableviewCell 中使用 viewDidLoad 方法吗？

> ID：10578246
> 
> 赞同：53
> 
> 时间：2012-05-14T06:15:28.547
> 
> 标签：iphone, ios

我可以使用`viewDidLoad`方法`UITableviewCell`吗？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-05-14T06:20:31.617

不，您不会在自定义单元类子类 UITableViewCell(It;s part of UIViewController) 中编写 viewDidLoad 。您有一个名为

```
-(void)layoutSubviews
{
    [super layoutSubviews];
} 
```

您可以在哪里为自定义单元格的控件定义框架和所有内容。[请参阅 Apple 的 UITableviewCell 参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)

**但是请注意**，“viewDidLoad”在对象的生命周期中***只被调用一次***；它更像是一般 OO 编程中的初始化程序。但是，“layoutSubviews”***将在每个单元格上被调用多次***（取决于滚动等问题）。重要的是要意识到，对于这个原因，你在 viewDidLoad 中“通常做”的许多事情，你***不能***在 layoutSubviews 中做。

# 请注意， viewDidLoad 只调用*一次*： layoutSubviews*经常*调用。

如果您编写它，它将只是一个简单的功能。

[自定义单元教程](http://jainmarket.blogspot.in/2009/05/creating-custom-table-view-cell.html)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-08-07T12:41:59.497

如果您尝试初始化 UITableViewCell 的一些 IBOutlets，您可能需要调用 awakeFromNib()：

```
override func awakeFromNib() {
    super.awakeFromNib()
    // Do your stuff
    // myIBOutlet.text = "Hello" 
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-12-03T06:55:39.660

最好也打电话`super.layoutSubviews()`。斯威夫特语法：

```
override func layoutSubviews() {
    super.layoutSubviews()
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-02-08T12:29:59.980

An`awakeFromNib()`类似于 a `viewDidLoad()`，因此它运行的频率较低，并且必须为初始化命令调用。

A`layoutSubviews()`类似于 a `viewWillAppear()`，因此当您想要更改视图演示中的某些内容时应该调用它。例如，当用户更改手机方向并且应用程序需要更新某些视图的特定配置时，例如大小、颜色和位置。

Apple关于该`awakeFromNib()`方法的文档：

> **概括**
> 
> 从 Interface Builder 存档或 nib 文件加载接收器后，准备接收器进行服务。
> 
> 宣言
> 
> `func awakeFromNib()`
> 
> **讨论** nib 加载基础架构向从 nib 存档重新创建的每个对象发送 awakeFromNib 消息，但前提是存档中的所有对象都已加载和初始化。当一个对象收到一个 awakeFromNib 消息时，**它保证** **已经建立了它的所有出口和动作连接。**
> 
> 您必须调用 awakeFromNib 的超级实现，以使父类有机会执行它们需要的任何其他初始化。虽然这个方法的默认实现什么都不做，但是很多 UIKit 类都提供了非空的实现。您可以在您自己的 awakeFromNib 方法中的任何时候调用超级实现。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-14T06:18:17.990

UIKit 函数`viewDidLoad`是 UIViewController 的成员，UITableViewCell 不继承自它。您可以根据需要编写一个**命名** `viewDidLoad`的方法，但不会像在 UIViewController 子类中那样调用它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-03-15T23:39:22.413

我意识到这是一个旧线程，但我有时会使用一种模式（特别是如果我的自定义单元有一个基类）：

1.  添加一个 BOOL 属性，将其称为“cellAlreadyDidLoad”。我这样命名它是因为 BOOL 将默认为 NO，所以我不必担心在 init 方法中设置它。

2.  创建一个 cellDidLoad 方法，这样命名的目的是让它有点像我们都知道和喜爱的 viewDidLoad。

3.  覆盖 layoutSubviews 方法并添加：

    ```
    if (!self.cellAlreadyDidLoad)
    {
        [self cellDidLoad];
        self.cellAlreadyDidLoad = YES;
    } 
    ```

现在您有一个方法 cellDidLoad，它只会被调用一次，因为您知道 UI 元素（包括您的 IBOutlets）将存在。非常类似于视图控制器上的 viewDidLoad。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-07-26T13:02:51.443

如果您的 UITableViewCell 有一个变量，那么您可以像这样使用 didSet

```
var stickers:[Sticker]? {
    didSet {
        if let stickers = stickers {
            //do some initialisation 
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-14T06:22:17.323

`viewDidLoad`是的，您可以写入`UITableViewCell`但`viewDidLoad`不是委托方法，`UITableViewCell`因此它不会自动调用，因此您必须手动调用它 `[self viewDidLoad]`才能执行代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-25T11:49:08.333

您可以将 initWithFrame 用于 UITableViewCell 或 UICollectionViewCell 或 UIView 的任何子类。

```
- (instancetype)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
       // Initialisation code here
    }
    return self;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-08T09:54:26.777

如果您从 XIB 或 Storyboard 加载 UITableViewCell ，`initWithCoder()`则`awakeFromNib()`调用方法（以相同的顺序）。

如果您以编程方式初始化您的 UITableViewCell ，那么它们将不会被调用。

最后，`prepareForReuse()`将在将表视图单元格添加到单元格池时对其进行调用。在这种方法中，您应该将表格视图单元格重新设置为新的（例如清理文本字段、标签等）。

所以我建议你使用`awakeFromNib()`方法来设置你的 UITableViewCell。

例如：-

```
class YourTableViewCell: UITableViewCell {

    override func awakeFromNib() {
        super.awakeFromNib()

       //do some work here that needs to happen only once, you don’t wanna change them later.
    }
} 
```

# c# - 客场和主场比赛算法的平衡池

> ID：10578247
> 
> 赞同：2
> 
> 时间：2012-05-14T06:15:37.413
> 
> 标签：c#, algorithm, round-robin

我有一个算法，它使用平衡算法创建循环锦标赛，它为以下游戏创建了四个池大小。

```
1-2 Round 1
3-4 Round 1
1-3 Round 2
2-4 Round 2
1-4 Round 3
2-3 Round 3 
```

我希望比赛的主客场比赛数量尽可能平衡。从上面可以看出，1 始终是比赛中的第一支球队，即客队，但希望在比赛中平衡这一点，有时将其设为主队。你可以在下面看到我切换了 2 轮比赛，所以 1 可以打主场，4 可以打客场。在弄清楚游戏之后，是否有一个简单的算法来完成这个？

```
1-2 Round 1
3-4 Round 1
3-1 Round 2
4-2 Round 2
1-4 Round 3
2-3 Round 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T07:34:23.057

对于这个简单的案例（同一支球队之间没有重复的比赛，需要在不同的地点进行），您可以计算每一对：

```
X = (Team_Number_1 + Team_Number_2) % 2 
```

并交换 X = 0 的配对。假设人数较少的球队最初总是配对中的第一个（并且您这样描述列表），这应该会导致主客场比赛的最佳分配。

# node.js - 在 EC2 中托管 nodejs 应用程序

> ID：10578249
> 
> 赞同：28
> 
> 时间：2012-05-14T06:15:39.637
> 
> 标签：node.js, amazon-ec2, hosting

我对在云中托管 nodejs 应用程序很感兴趣，我正在寻找一个免费的云托管服务。我发现亚马逊有一个，但我有以下问题：是否有关于如何在 Amazon EC2 中设置和运行 nodejs 应用程序的教程？

**编辑**：你能为nodejs（heroku除外）提供任何好的托管服务吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-14T09:36:40.227

我已经将 Node.js 与 Amazon EC2 一起使用了一段时间，并且对它们都非常满意。目前，AWS 似乎是最便宜、最强大的云提供商，因此选择亚马逊不会是一个错误。在云中运行 Node.js 并没有什么特别之处——您可以像使用自己的 PC 一样使用它。以下是在 EC2 Ubuntu 服务器上运行的最简单的 Node.js 应用程序要遵循的一些一般步骤：

1.  创建[Amazon EC2 帐户](http://aws.amazon.com/)。

2.  `t1.micro`从带有任何 Ubuntu AMI 的AWS 控制台启动实例（[示例](https://whatiscomingtomyhead.wordpress.com/2010/11/24/absolute-first-step-tutorial-for-amazon-web-services/)）。

3.  通过 SSH 登录到您的实例。

4.  安装 node.js：`sudo apt-get install nodejs`

5.  创建`test_server.js`具有以下内容的新文件：

    ```
    require("http").createServer(function(request, response){
      response.writeHeader(200, {"Content-Type": "text/plain"});  
      response.write("Hello World!");  
      response.end();
    }).listen(8080); 
    ```

6.  启动服务器：`node test_server.js`

7.  检查它是否从另一个控制台工作：`curl http://localhost:8080`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-14T07:28:06.723

查看这些教程（2021 年更新）

1.  [如何在 AWS EC2 服务器上部署 Node.js 应用程序](https://ourcodeworld.com/articles/read/977/how-to-deploy-a-node-js-application-on-aws-ec2-server)
2.  [如何在 AWS EC2 中部署 Node.js 应用程序](https://aws.plainenglish.io/deploying-a-nodejs-application-in-aws-ec2-c1618b9b3874)
3.  [如何使用 NGINX 和 SSL 在 AWS 上部署 Node.js 应用程序](https://dev.to/shadid12/how-to-deploy-your-node-js-app-on-aws-with-nginx-and-ssl-3p5l)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-02-09T07:03:16.397

基于本[教程](https://youtu.be/WxhFq64FQzA)，这里是一步一步更新的：

[1) 在Amazon Web Services](https://aws.amazon.com/)上创建一个帐户。

2）创建EC2实例；我选择了 Ubuntu micro。

3）配置安全组（命名为“节点”）并添加端口：

> HTTP (80)、HTTPS (443) 和 Node 应用程序的自定义 TCP 端口（例如 3000）

4) 启动实例并保存 pem 文件（私钥），例如“node.pem”。

5) 在 Windows 上 - 安装[Cygwin](https://cygwin.com/setup-x86.exe) + OpenSSH 包。还建议安装[WinScp](https://winscp.net/eng/download.php)以“像浏览器一样”访问 linux。

6）以管理员身份打开 Cygwin 终端，并为“node.pem”文件设置正确的权限：

```
chown :Users node.pem
chmod 400 node.pem 
```

7) 在 EC2 仪表板中找到您的 EC2 实例公共 DNS 名称，并[使用 SSH 连接到它](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html)：

```
ssh -i node.pem ubuntu@{your EC2 public DNS name} 
```

8) 更新 Ubuntu 并[安装 NodeJS](https://nodejs.org/en/download/package-manager/)：

```
sudo apt-get update
curl -sL https://deb.nodesource.com/setup_7.x | sudo -E bash -
sudo apt-get install -y nodejs
sudo apt-get install -y build-essential 
```

9) 将您的 NodeJS 应用程序复制到 EC2 实例中（通过 Cygwin 或 Winscp）。

10) 安装所有 Node 应用程序所需的模块：

```
cd /home/ubuntu/My_Node_App
npm install --save 
```

*11) 使用IPtables*重新路由端口，以便可以在默认的 http 端口 80 上访问您的应用程序：

```
sudo iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 3000 
```

要查看 iptables 路由条目，请运行：

```
sudo iptables -t nat -L 
```

如果您需要删除路由条目（第一行），请运行：

```
sudo iptables -t nat -D PREROUTING 1 
```

12）将您的应用程序作为后台进程运行：

```
sudo nohup node app.js & 
```

要杀死您的应用程序进程：

```
ps -ef | grep app.js
sudo kill {proccess id number} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-01-07T00:21:37.523

我关于如何在 EC2 上部署基于节点的应用程序的博客文章：http: [//devblog.daniel.gs/2014/01/deploying-node-apps-on-aws-ec2-with.html](http://devblog.daniel.gs/2014/01/deploying-node-apps-on-aws-ec2-with.html)

解释：

*   从您的 github 存储库部署 Node 应用程序（私有+公共）
*   使用脚本自动化部署过程
*   使用 Nginx 的反向代理
*   并使用 Forever 实用程序。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-14T08:44:58.290

有相当多的[Node.js](http://nodejs.org/)托管解决方案可用，这里有几个：

## 乔伊恩特

[Joyent](http://joyent.com/)是 Node.js 的企业赞助商和商标所有者，并为许多事情提供了[Amazon EC2](http://aws.amazon.com/ec2/)的有吸引力的替代方案，当然不仅仅是 Node.js 托管，请参阅[Joyent 的 Node.js 开发环境](https://no.de/)（请查看[Node.js™开发 SmartMachine 服务条款](http://www.joyentcloud.com/about/policies/node-terms-of-service/)）。

显然，他们只是在重组这个开发产品：

> 在过去的一年里，Joyent Cloud 为 Node.js 的用户提供了一个免费的开发沙箱。随着时间的推移，社区已经明确表示他们需要更多的工具和更多的容量。为此，我们很高兴地宣布与[Nodejitsu](http://www.nodejitsu.com/)建立合作伙伴关系，在世界级的 Node.js 开发环境中提供这两者，并在 Joyent Cloud 的基础设施即服务平台上运行 Nodejitsu 的开发和管理工具。新服务将很快推出。

因此，目前还不完全清楚 Node.js 解决方案的生产托管的定价选项将如何结束，但鉴于 Joyent 具有[竞争力的定价](http://www.joyentcloud.com/products/pricing-comparison/smartos-linux/)，我预计至少会有类似的选项。

## 云铸造

[Cloud Foundry](http://cloudfoundry.org/) *开放平台即服务项目*也支持 Node.js，以及许多其他框架（这使得该平台如此令人兴奋），该平台最近获得了相当大的关注，同时被多个解决方案[平台即服务（PaaS )](http://en.wikipedia.org/wiki/Platform_as_a_service)提供者作为他们的后端 - 其中包括（没有特定的顺序，也不一定完整）：

*   [AppFog](http://appfog.com/) -*适用于 Java、Node、.Net、Ruby、PHP、MySQL、Mongo、PostgreSQL 等的简单 PaaS……在 IaaS 之间自由移动，价格最简单。*
*   [Cloud Foundry (VMware)](http://www.cloudfoundry.com/)（Cloud Foundry 的企业赞助商）-*在几秒钟内部署和扩展应用程序，而无需将自己锁定在单个云中。*
*   [Iron Foundry](http://www.ironfoundry.org/) - *Iron Foundry 是一个开源项目，它通过提供服务、安装程序和开发工具将 Cloud Foundry™ 扩展到 .NET 生态系统。*

其中大部分仍处于测试阶段，价格尚未确定，但考虑到竞争，我预计随着时间的推移会有一些有趣的选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T06:17:52.140

在 EC2 上免费运行 node.js 的最简单方法是 Heroku 上的恕我直言。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-04T12:31:22.277

[在这里](http://techprd.com/setup-node-js-web-server-on-amazon-ec2/)查看这个完整的教程。本教程展示了如何在 EC2 上安装 Node.js 并配置 HTTP 端口和 nginx 以进行端口转发，以及使用主管永远运行 Node.js，因为它通常会在关闭 SSH 控制台会话时停止。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-24T02:08:22.473

我刚刚浏览了 Heroku 注册和应用教程。再简单不过了。多么令人愉快的经历……

...直到您无法将 MongoDB 实例作为免费工具。最低费用（免费试用月除外）为每 GB 存储每月 18 美元。

老实说，更好的选择是 Openshift。它有三个免费齿轮，足以满足我正在做的很多初学者的工作。Heroku 和 Openshift 都在亚马逊的范围内，但它们的客户界面不同。我认为 Heroku 对初学者来说更容易上手，但正如我所提到的，在数据​​库方面没有免费的午餐。

# android - Android：录制音频 - 停止录制后获取结果

> ID：10578251
> 
> 赞同：0
> 
> 时间：2012-05-14T06:16:03.773
> 
> 标签：android, mediastore

我正在开发 Android 中的音频捕获。我已经提到

[如何制作客户记录查看仪表？](https://stackoverflow.com/questions/9442975/how-to-make-custome-record-view-meter)

从媒体出来后，我可以在这里得到结果。但我想要停止记录后的结果。有什么选择？？？

我的代码：

```
 MediaRecorder recorder;
    public static int RECORD_REOUEST = 0;

@Override

    public void onCreate(Bundle savedInstanceState)
    {
      super.onCreate(savedInstanceState);
      Intent intt = new Intent(Media.RECORD_SOUND_ACTION);
      startActivityForResult(intt, RECORD_REOUEST);
    }

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{   
     if (resultCode == RESULT_OK && requestCode == RECORD_REOUEST) 
     {
        Uri recordedAudioPath = data.getData();         
     }
} 
```

**注意：仅与设备有关。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:04:31.667

您可以使用 android.media.MediaRecorder 通过 start() 和 stop() 方法来完成此操作

```
import android.media.MediaRecorder;
final MediaRecorder recorder = new MediaRecorder();

public void start() {
  recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
  recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
  recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
  recorder.setOutputFile(path);
  recorder.prepare();
  recorder.start();
}
  public void stop() {
  recorder.stop();
  recorder.release();
} 
```

查看这篇类似的[Stackoverflow Record Audio](https://stackoverflow.com/questions/962172/how-do-i-record-audio-using-android-1-5)帖子以获取完整示例。它将录音保存到您停止录音时可以访问的外部存储中。

# java - Java String 匹配和replaceAll 匹配括号不同

> ID：10578254
> 
> 赞同：0
> 
> 时间：2012-05-14T06:16:18.497
> 
> 标签：java, regex

我有带括号的字符串和转义字符。我需要匹配这些字符并删除它们。在下面的代码中，我使用具有相同正则表达式的 match() 和 replaceAll()，但是 matches() 返回 false，而 replaceAll() 似乎匹配得很好，因为 replaceAll() 执行并删除了字符。有人可以解释吗？

```
String input = "(aaaa)\\b";

boolean matchResult = input.matches("\\(|\\)|\\\\[a-z]+");
System.out.printf("matchResult=%s\n", matchResult);

String output = input.replaceAll("\\(|\\)|\\\\[a-z]+", "");
System.out.printf("INPUT: %s --> OUTPUT: %s\n", input, output); 
```

打印出来：

```
matchResult=false
INPUT: (aaaa) --> OUTPUT: aaaa 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T06:17:38.230

`matches`匹配**整个**输入，而不是其中的一部分。

正则表达式`\(|\)|\\[a-z]+`不描述整个单词，而只描述它的一部分，所以在你的情况下它失败了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T06:42:59.687

[Binyamin Sharet 已经解释了](https://stackoverflow.com/a/10578267/626273)`matches` 正在做什么。我想扩展一下。

Java 没有“findall”或“g”修饰符，就像其他语言一样，它可以一次获取所有匹配项。

Java`Matcher`类只知道对字符串使用模式的两种方法（不替换它）

*   [`matches()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#matches%28%29): 将整个字符串与模式匹配

*   [`find()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29): 返回下一个匹配

如果你想得到所有符合你模式的东西，你需要`find()`在一个循环中使用，像这样：

```
Pattern p = Pattern
    .compile("\\(|\\)|\\\\[a-z]+");
Matcher m = p.matcher(text);
while(m.find()){
    System.out.println(m.group(0));
} 
```

或者如果您只对字符串中存在模式感兴趣

```
if (m.find()) {
    System.out.println(m.group());
} else {
    System.out.println("not found");
} 
```

# php - Javascript 不反映对文件的更改

> ID：10578256
> 
> 赞同：0
> 
> 时间：2012-05-14T06:16:39.527
> 
> 标签：php, javascript, file

所以，我在这里有点困惑。

我正在慢慢进入 ajax 或 HTML5 SSE，因为我列出了从长远来看，我想更新而无需用户刷新。但是，这里的小步骤，我从一个简单的函数开始，它应该告诉我列表从这里读取的文件何时发生变化，从另一台计算机插入条目。

代码：

```
<script type='text/javascript'>
function CheckForChange(){
    alert("<?echo (count($listArray)) . ' and ' . count(file($filename_noformat))?>");
}

setInterval("CheckForChange()", 7000);
</script> 
```

listArray 是 PHP 变量，它在页面刷新时保持页面上显示的列表，从文本文件中逐行读取（稍后我正在移动到数据库）因为 PHP 变量只能在页面加载时执行，PHP 只会反映 PHP 执行时文本文件中的内容。

但是使用 Javascript 和 setInterval 函数，它不应该能够在执行该函数时（每 7 秒）执行 PHP 来检查文本文件中的内容吗？因为它不是，我不明白为什么不。

我尝试在我的手机上将第 4 个帖子插入列表，手机的警报变为 4 和 4，但计算机仍然显示 3 和 3。我希望它显示 3 和 4。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:18:46.790

`setInterval()`在您的页面中执行本地 javascript，而不是基于服务器的 PHP。如果您希望它在不重新加载页面的情况下将某些内容发送到您的服务器，则必须使用 ajax 调用来实际将某些内容发送到服务器，这可能会导致某些 PHP 执行。

提示 - 查看浏览器中的视图/源代码并查看页面中的实际内容。您的页面中没有 PHP。PHP 在页面创建时在服务器上运行一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:19:07.797

不。

1.  PHP 在服务器上运行并输出一些文本。
2.  服务器将该文本发送到客户端（浏览器）。
3.  然后浏览器将该文本解释为 HTML 和 JavaScript。

PHP 只运行一次。然后它生成的 JavaScript 函数会重复运行，但从 JavaScript 的角度来看，该函数中有一个字符串文字，而不是可执行的服务器端代码。

如果要运行 PHP，则必须向服务器发出新的 HTTP 请求。这需要重新加载页面或使用 Ajax。

# .net - pex 再生测试

> ID：10578259
> 
> 赞同：1
> 
> 时间：2012-05-14T06:16:55.447
> 
> 标签：.net, pex

我已经为特定类生成了 pex 测试类。但是，由于重构和逻辑更改，我已经更改了此类，但我认为当前 pex 生成的测试类现在无法涵盖所有​​内容。

我如何强制 pex 为父母重新生成单独的测试类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:02:28.377

您可以进行如下操作：

1.  右键单击 Pex 测试类（假设它被称为`MyClass_Test`）并选择**Pex/Delete Generated Tests In Class**。这将从`MyClass_Test.g.cs`文件中删除所有测试。
2.  再次右键单击测试类并选择**Run Pex Explorations**。然后`MyClass_Test.g.cs`将使用生成的测试填充。

（理论上您不需要第 1 步，但它允许您验证测试在重新生成之前已被删除）。

# sql - jsp中以表格形式显示数据

> ID：10578260
> 
> 赞同：2
> 
> 时间：2012-05-14T06:16:56.290
> 
> 标签：sql, jsp, jstl, el

我正在尝试以下jsp代码。

```
 switch(ch)            
    {
    case 1 : 
        ResultSet rsid=stmt.executeQuery("select ID from BcTwo"); 
        while(rsid.next())
        {
        %>  
            <tr><td>
              <%out.println(rsid.getString(1)); %>
            </td></tr>
             <% 
         }
         rsid.close();
         break;
    case 2 : 
        ResultSet rs=stmt.executeQuery("select SERIES from BcTwo");  
        while(rs.next())
        {
        %>  
            <tr><td>
            <%out.println(rs.getString("SERIES")); %>
            </td></tr>
            <%  
        }
        rs.close();
        break;
    } 
```

使用此代码，我可以打印数据。但我希望以以下格式打印数据：

```
ID  Series
1   BE
2   EQ
3   BE
4   BE
5   EQ
6   EQ 
```

并使用上面的代码数据打印为：

```
ID
1
2
3
4
5
6
Series
BE
EQ
BE
BE
EQ
EQ 
```

我应该进行哪些更改以获得所需的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:15:34.527

我得到了答案。

```
switch(ch)            
{
    case 1 :
        String  ID=(String)session.getAttribute("ID");
          session.setAttribute("ID", ID); 
          if(null == session.getAttribute("ID"))
          { 
          out.println(rsid.getString("ID"));
          } 
          break;
    case 2 :
        String  SERIES=(String)session.getAttribute("SERIES");
        session.setAttribute("SERIES", SERIES); 
        if(null == session.getAttribute("SERIES"))
        { 
        out.println(rsid.getString("SERIES"));
        }  
         break;
} 
```

我不确定这是否是最好的解决方案，但它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:21:17.110

```
switch(ch)            
    {
 %>
 <tr>
 <%
    case 1 : 
        ResultSet rsid=stmt.executeQuery("select ID from BcTwo"); 
          while(rsid.next())
        {
        %>  
            <td>
              <%out.print(rsid.getString(1)); %>
            </td>
              <%    
          }
          rsid.close();
        break;
    case 2 : 
        ResultSet rs=stmt.executeQuery("select SERIES from BcTwo");  
          while(rs.next())
        {
        %>  
            <td>
            <%out.print(rs.getString("SERIES")); %>
            </td>
            <%  
          }
          rs.close();
        break;
    }
    %>
    </tr> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T00:36:24.593

首先，在 scriptlet 中包含 java 代码是一种不好的做法。你应该避免它。在 servlet 中执行必要的 java 代码并使用 EL 或 JSTL 在 JSP 中显示返回的数据

至于您的问题，每个结果都将有一个 TR，其中 ID 和 SERIES 将在 2 个 TD 中打印在该 TR 内

```
 <%
      ResultSet rsid=stmt.executeQuery("select ID,SERIES from BcTwo"); 
      while(rsid.next())
      {
    %>  
    <tr>
        <td>
          <%out.print(rsid.getString("ID")); %>
        </td>
        <td>
          <%out.print(rsid.getString("SERIES")); %>
        </td>
    </tr>
    <%    
      }
      rsid.close();
    %> 
```

希望这可以帮助..

# php - 如何使用 unix 命令检查特定的内存缓存键是否存在

> ID：10578263
> 
> 赞同：1
> 
> 时间：2012-05-14T06:17:11.587
> 
> 标签：php, unix, memcached, memcachedb

我是内存缓存的新手。Memcache 已用于一些查询。缓存有问题，memcache 似乎无法正常工作。我需要检查转储中是否存在特定的内存缓存键。我的项目在 php.ini 中。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:26:13.747

项目主页上有一个例子：

```
telnet localhost 11211
get foo 
```

您也可以尝试像[http://code.google.com/p/phpmemcacheadmin/这样的 PHP 客户端](http://code.google.com/p/phpmemcacheadmin/)

# android - 如何修复 Android 布局中视图的位置？

> ID：10578266
> 
> 赞同：-1
> 
> 时间：2012-05-14T06:17:27.000
> 
> 标签：android, android-layout

我设计了一个带有一些视图（列表视图、按钮等）的布局。当我将我的应用程序安装到 Android 手机中时，视图的位置与我设计的不同。某些按钮仅部分可见。谁能告诉我如何修复布局中视图的位置？这是我用来设计的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:background="@drawable/bg4" android:orientation="vertical"
    android:scrollbarAlwaysDrawVerticalTrack="true">

    <LinearLayout android:id="@+id/linearLayout1"
        android:layout_width="fill_parent" android:layout_height="10dp"
        android:orientation="horizontal">

        <TextView android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="3dp" android:text=" " />
    </LinearLayout>

    <LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:orientation="horizontal">

        <ImageView android:id="@+id/imageView1"
            android:layout_width="100dp" android:layout_height="60dp"
            android:src="@drawable/logo" />

        <TextView android:id="@+id/Loginas"
            android:layout_width="120dp" android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:layout_marginBottom="3dp"
            android:layout_marginLeft="3dp" android:gravity="center"
            android:text="Logged in as..." android:textColor="#802A2A"
            android:textSize="18dp" android:typeface="serif" />

        <Button android:id="@+id/btnlgout"
            android:layout_width="80dp" android:layout_height="30dp"
            android:layout_gravity="bottom"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp" android:background="@drawable/logout"
            android:onClick="logout" />
    </LinearLayout>

    <LinearLayout android:id="@+id/linearLayout2"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="20dp" android:orientation="horizontal">

        <TextView android:id="@+id/count"
            android:layout_width="90dp" android:layout_height="25dp"
            android:layout_marginLeft="5dp" android:layout_weight="1"
            android:text="Count : 4" android:textColor="#802A2A"
            android:textSize="15dp" />

        <Spinner android:id="@+id/refresh"
            android:layout_width="150dp" android:layout_height="25dp"
            android:background="@drawable/drop" />

        <Button android:id="@+id/btnpreferences"
            android:layout_width="90dp" android:layout_height="30dp"
            android:layout_marginLeft="10dp" android:background="@drawable/pref"
            android:onClick="getPreferences" />
    </LinearLayout>

    <LinearLayout android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="20dp" android:gravity="center_horizontal"
        android:orientation="vertical">

        <LinearLayout android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:orientation="horizontal">

            <TextView android:id="@+id/column1"
                android:layout_width="70dp" android:layout_height="wrap_content"
                android:text="column1" android:textStyle="bold" />

            <TextView android:id="@+id/column2"
                android:layout_width="70dp" android:layout_height="wrap_content"
                android:text="column2" android:textStyle="bold" />

            <TextView android:id="@+id/column3"
                android:layout_width="70dp" android:layout_height="wrap_content"
                android:text="column3" android:textStyle="bold" />

            <TextView android:id="@+id/column4"
                android:layout_width="70dp" android:layout_height="wrap_content"
                android:text="column4" android:textStyle="bold" />
        </LinearLayout>

        <ListView android:id="@+id/listViewTickets"
            android:layout_width="match_parent"
            android:layout_height="200dp" android:layout_gravity="center_horizontal"
            android:layout_marginTop="10dp">
        </ListView>
    </LinearLayout>

    <LinearLayout android:id="@+id/linearLayout1"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:layout_weight="1" android:orientation="horizontal">

        <TextView android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:text=" " />
    </LinearLayout>

    <LinearLayout android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_marginBottom="80dp" android:orientation="horizontal">

        <Button android:id="@+id/btnNew"
            android:layout_width="80dp" android:layout_height="30dp"
            android:background="@drawable/btnnew" />

        <Button android:id="@+id/btnUpdate"
            android:layout_width="80dp" android:layout_height="30dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp" android:background="@drawable/edit" />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-20T07:00:07.460

如果您使用 RelativeLayout 会更好，这样您就可以很好地安排视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:05:12.673

在您使用恒定宽度的视图中的线性布局内部。如果您使用相同的重量总和并按重量提供宽度会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T07:13:16.930

您应该阅读一些布局实践，例如[Romain Guy 的布局技巧](http://www.curious-creature.org/2009/02/22/android-layout-tricks-1/)，并考虑使用比`LinearLayout`.

您还应该将组件相对于彼此及其父组件定位，这是您可以实现在所有屏幕/分辨率上看起来都相同的正确布局的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T07:00:19.863

使用滚动视图：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/ScrollView1"
android:layout_width="fill_parent"
android:layout_height="wrap_content">

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/cherry"
    android:orientation="vertical" >

// your components

</RelativeLayout>

</ScrollView> 
```

# openerp - 无法在 Openerp 中翻译现有数据库中的模块数据

> ID：10578268
> 
> 赞同：1
> 
> 时间：2012-05-14T06:17:37.907
> 
> 标签：openerp, po

我有一个丹麦语/丹麦语的 .po 文件。当我在模块中使用此文件并创建一个新数据库时，它工作正常。但是当我将文件用于已经存在的数据库时，它不起作用。是否可以将现有数据库的数据翻译成丹麦语/丹麦语？如果是，如何实现？PO文件代码是否需要更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:19:15.990

您必须更新 .po 文件所在的模块，另一种选择是管理下的“加载官方翻译”选项并打开“覆盖现有条款”

# sql - 从 sql server 中的多个 LEFT JOIN 中删除 NULL 值

> ID：10578274
> 
> 赞同：6
> 
> 时间：2012-05-14T06:18:26.890
> 
> 标签：sql, sql-server-2005

我有以下表格

**项目1**

```
ID | NAME | GEARS | ITEM2_ID  |
-------------------------------
1  | Test | 56    | 4         |
2  | Test2| 12    | 2         | 
```

**项目3**

```
ID | NAME | DATA  | ITEM2_ID  |
-------------------------------
1  | Test | 1     | 1         |
2  | Test7| 22    | 3         | 
```

**项目2**

```
ID |   VALUE       |
--------------------
1  |   is simple   |  
2  |   is hard     | 
3  |   is different|
4  |   is good     |
5  |   very good   | 
```

我的查询

```
SELECT TOP(3) * FROM (
    SELECT ID, 
       rankTable.RANK as RANK_,
        TOTALROWS = COUNT(*) OVER() 
 FROM ITEM2
 INNER JOIN 
     CONTAINSTABLE(ITEM2, [VALUE], 'ISABOUT("good")') as rankTable
 ON ITEM2.ID = rankTable.[KEY]
) as ITEM2table

LEFT JOIN (
    SELECT ID, 
      NAME, 
      GEARS, 
      ITEM2_ID 
    FROM ITEM1
) as ITEM1table
ON ITEM1table.ITEM2_ID = ITEM2table.ID

LEFT JOIN (
    SELECT ID, 
        NAME, 
        DATA, 
        ITEM2_ID 
    FROM ITEM3
) as ITEM3table
ON ITEM3table.ITEM2_ID = ITEM2table.ID 
```

和结果

![在此处输入图像描述](../Images/47cc2f427f106ac539c63c5ec4693e7e.png)

如何使用上述 SQL 查询删除（如果可能）第一行（ID = 5）？我还想显示 TOTALROWS = 1，因为除了前 3 列之外，其他行包含 NULL。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T06:53:04.897

如果我理解正确，您只想保留第一个或第二个（或两者）外连接成功的行：

```
WHERE ITEM1table.ITEM2_ID IS NOT NULL 
   OR ITEM3table.ITEM2_ID IS NOT NULL 
```

可以对查询进行一些简化。不需要嵌套子查询：

```
SELECT TOP(3) 
    ITEM2table.ID, 
    rankTable.RANK as RANK_,
    TOTALROWS = COUNT(*) OVER(),
    ITEM1table.*,
    ITEM3table.*  

FROM 
        ITEM2 

    INNER JOIN 
        CONTAINSTABLE(ITEM2, [VALUE], 'ISABOUT("good")') as rankTable
    ON ITEM2.ID = rankTable.[KEY]

    LEFT JOIN 
        ITEM1  as ITEM1table
    ON ITEM1table.ITEM2_ID = ITEM2.ID

    LEFT JOIN 
        ITEM3  as ITEM3table
    ON ITEM3table.ITEM2_ID = ITEM2.ID

WHERE ITEM1table.ITEM2_ID IS NOT NULL 
   OR ITEM3table.ITEM2_ID IS NOT NULL 

ORDER BY  something                     --- you need to order by something
                                        --- if you use TOP. Unless you want 
                                        --- 3 (random) rows. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T06:21:19.137

也许有一个明显的原因，但如果你想消除第二个表没有匹配的行，为什么要使用左连接？似乎您的第一个连接应该是内部连接，而您的第二个连接应该是左连接 - 在这种情况下，这将为您提供您想要的结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T06:24:14.750

您可以使用`INNER JOIN`而不是`LEFT JOIN`，或将

```
WHERE ITEM1table.ID IS NOT NULL AND ITEM3table.ID IS NOT NULL 
```

在您的查询结束时

# iphone - UIWebView：图像未更新

> ID：10578275
> 
> 赞同：0
> 
> 时间：2012-05-14T06:18:42.240
> 
> 标签：iphone, objective-c, ipad, ios5

我正在使用 UIWebView 加载 HTML 页面。从那个 HTML 我生成了 PDF 文件。我的 PDF 文件内容会随着 HTML 数据的变化而变化。当我在应用程序中更改用户的签名（图像）时，相应的 PDF 不会更改为新签名。它显示了以前的签名。

如何重新加载该 UIWebView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:39:48.720

`[webView reload]`应该做的伎俩。

如果您使用的是新 URL，则可以使用`[webView loadRequest:[NSURLRequest requestWithURL:theURL]];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-13T14:17:52.303

如果您使用具有更新内容的相同 url，请使用此。

```
UIWebView*  webV=[[UIWebView alloc]init];

NSString* htmlString= @"Loading...";

[webV loadHTMLString:htmlString baseURL:nil];

[webV loadRequest:[NSURLRequest requestWithURL:mainURL]]; 
```

# objective-c - 如何捕捉蓝牙外设的命令

> ID：10578278
> 
> 赞同：0
> 
> 时间：2012-05-14T06:18:52.693
> 
> 标签：objective-c, bluetooth

我想从 iOS 中的蓝牙外围设备中捕获命令。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:00:43.143

在iOS上做蓝牙有几种方法，不同的有不同的方法：

*   属于 Made for iPhone 计划的配件（如果您想知道这意味着什么，请参阅[此问题的答案）](https://stackoverflow.com/questions/5734071/looking-for-experiences-on-the-apple-mfi-program-registration-process)
*   使用蓝牙 4.0 低功耗模式的设备
*   使用 GameKit 与另一部 iPhone 通话
*   使用 Apple 原生支持的蓝牙配置文件之一的设备：免提配置文件、耳机配置文件、A2DP、AVRCP 等。

要按顺序回答：

1.  如果您是 Made for iPhone 计划的一员，您就会知道在哪里可以找到这些信息，而且这些信息不公开：请向 Apple 的联系人寻求帮助。
2.  如果您的设备使用低功耗蓝牙 4.0，请查看[核心蓝牙框架](https://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/_index.html)。
3.  如果您想让两部 iPhone 一起通话，请查看[GameKit](https://developer.apple.com/library/ios/#documentation/GameKit/Reference/GameKit_Collection/Introduction/Introduction.html)。
4.  如果您正在使用使用 Apple 提供的配置文件的设备，则无需执行任何操作，它会正常工作。例如，A2DP 设备将流式传输从手机播放的音频，而无需程序员干预。您可以做一些事情来控制它：某处有一个 Core Audio 功能，可让您选择是否将音频发送到蓝牙设备。如果您尝试支持 AVRCP，请考虑处理[远程控制事件](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/RemoteControl/RemoteControl.html)。

如果您的设备不属于上述任何类别，则您可能不走运，无法在 iOS 上使用它。

# iphone - 如何将数据从详细视图控制器传递回uitableview？

> ID：10578281
> 
> 赞同：6
> 
> 时间：2012-05-14T06:19:23.783
> 
> 标签：iphone, objective-c, xcode, ios4, xcode4

在我的应用程序中，我利用 uitable 从我的列表中选择类别。我的任务是，当用户单击或选择一个单元格时，他应该能够在下一个视图（详细视图）中查看所选单元格的详细信息。当他在详细视图中选择项目时，他应该能够在表格视图中返回，并且应该能够在 rootivew 控制器中看到所选项目。

我能够从表格视图正确导航到详细视图，但我无法将详细视图中选择的项目显示给 rootviewcontroller。

请帮我解决这个问题。

![在此处输入图像描述](../Images/eb3c63c588db4f3585280efcc40b1907.png) 图一是我的 rootview 控制器页面。例如：如果用户选择@“make”，他将能够看到@“make”的所有相关类别。在下一页（其中 image2）。

![在此处输入图像描述](../Images/1beb8b2861c72b6be179024b85336bee.png) 图像是我的详细信息页面。

当用户选择 @"abarth" 时，它应该显示在 rootview 控制器页面（即第一页）中。

以下是我的 rootview 控制器页面代码：

```
- (void)viewDidLoad
{

    self.car = [[NSArray alloc]initWithObjects:@"Make",@"Model",@"Price Min",@"Price Max",@"State",nil];

    [super viewDidLoad];

}

-(NSInteger) numberOfSectionInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.car count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *TextCellIdentifier = @"Cell";

    UITableViewCell *cell =[tableView dequeueReusableCellWithIdentifier:TextCellIdentifier];
    if (cell==nil) 
    {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:TextCellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryNone;
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

        cell.textLabel.text = [self.car objectAtIndex:[indexPath row]];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

       return cell;
}

- (void)tableView:(UITableView *)tableView 
didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

        if (0 == indexPath.row)
    {
        NSLog(@"0");
       self.detailcontroller.title = @"Make";
    } 
    else if (1 == indexPath.row)
    {
        NSLog(@"1");
        self.detailcontroller.title = @"Model";
    }
    else if (2 == indexPath.row)
    {
        NSLog(@"2");
        self.detailcontroller.title = @"Price Min";
    }
    else if (3 == indexPath.row)
    {
        self.detailcontroller.title = @"Price Max";
    }
    else if (4 == indexPath.row)
    {
        NSLog(@"3");
        self.detailcontroller.title = @"State";
    }
    [self.navigationController 
     pushViewController:self.detailcontroller 
     animated:YES];
}

following is my detail view page code:

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    if ([self.title isEqualToString:@"Make"]) 
    {
        detail = [[NSArray alloc]initWithObjects:@"Any Make",@"Abarth",@"AC",@"ADAYER",@"Adelaide",@"ALFA ROMEO",@"ALLARD",@"ALPINE-RENAULT",@"ALVIS",@"ARMSTRONG",
                  @"ASTON MARTIN",@"AUDI",@"AUSTIN",@"AUSTIN HEALEY",@"Barossa",@"BEDFORD",
                  @"BENTLEY",@"BERTONE",@"BMW",@"BOLWELL",@"BRISTOL",@"BUICK",@"BULLET",
                  @"CADILLAC",@"CATERHAM",@"CHERY",@"CHEVROLET",@"CHRYSLER",@"CITROEN",
                  @"Country Central",@"CSV",@"CUSTOM",@"DAEWOO",@"DAIHATSU",@"DAIMLER",
                  @"DATSUN",@"DE TOMASO",@"DELOREAN",@"DODGE",@"ELFIN",@"ESSEX",
                  @"EUNOS",@"EXCALIBUR",@"FERRARI",nil];

        if ([self.title isEqualToString:@"Abarth"]) 
        {
            detail = [[NSArray alloc]initWithObjects:@"HI", nil];
        }
    }
    else if ([self.title isEqualToString:@"Model"])
    {
        detail = [[NSArray alloc]initWithObjects:@"Any Model", nil];

    }
    else if ([self.title isEqualToString:@"Price Min"])
    {
        detail = [[NSArray alloc]initWithObjects:@"Min",@"$2,500",
                  @"$5,000",
                  @"$7,500",  
                  @"$10,000",
                  @"$15,000",
                  @"$20,000",
                  @"$25,000",
                  @"$30,000",
                  @"$35,000",
                  @"$40,000",
                  @"$45,000",
                  @"$50,000",
                  @"$60,000",
                  @"$70,000",
                  @"$80,000",
                  @"$90,000",
                  @"$100,000",
                  @"$500,000",
                  @"$1,000,000",nil];

    }
    else if ([self.title isEqualToString:@"Price Max"])
    {
        detail = [[NSArray alloc]initWithObjects:@"Max",  
                  @"$2,500",
                  @"$5,000",
                  @"$7,500",  
                  @"$10,000",
                  @"$15,000",
                  @"$20,000",
                  @"$25,000",
                  @"$30,000",
                  @"$35,000",
                  @"$40,000",
                  @"$45,000",
                  @"$50,000",
                  @"$60,000",
                  @"$70,000",
                  @"$80,000",
                  @"$90,000",
                  @"$100,000",
                  @"$500,000",
                  @"$1,000,000",nil];
    }
    else if ([self.title isEqualToString:@"State"])
    {
        detail = [[NSArray alloc]initWithObjects:@"Any State",
                  @"Australian Capital Territory",
                  @"New South Wales",
                  @"Northern Territory",
                  @"Queensland",            
                  @"South Australia",
                  @"Tasmania",
                  @"Victoria",
                  @"Western Australia",nil];
    }
    [self.tableView reloadData];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return [detail count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [detail objectAtIndex: 
                           [indexPath row]];

    cell.font = [UIFont systemFontOfSize:14.0];
    return cell;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    [self.navigationController popViewControllerAnimated:YES];

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T06:41:21.490

您需要使用自定义委托。在您的详细视图中创建一个协议并在您的根视图中实现它。将选定的字符串作为参数传递给委托方法，并从委托方法中将其显示在您的文本字段中。

```
//something like this
@interface detailViewController

// protocol declaration 
@protocol myDelegate
@optional
   -(void)selectedValueIs:(NSString *)value;

// set it as the property
@property (nonatomic, assign) id<myDelegate> selectedValueDelegate;

// in your implementation class synthesize it and call the delegate method
@implementation detailViewController
@synthesize selectedValueDelegate
// in your didselectRowAtIndex method call this delegate method
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {

      [self  selectedValueDelegate])selectedValueIs:valueString] ;
      [self.navigationController popViewControllerAnimated:YES];

  }

@end

// In your rootViewController conform to this protocol and then set the delegate

         detailViewCtrlObj.selectedValueDelegate=self;
//Implement  the delegate Method 
     -(void)selectedValueIs:(NSString *)value{
       {
            // do whatever you want with the value string
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:37:35.827

您好，您必须使用协议和委托来完成此操作请参阅我[关于协议和委托的链接](https://stackoverflow.com/a/10564004/936588)

您也可以通过在 appdelegate 中创建一个变量、设置其属性并在任何其他视图中访问它来实现。

```
YourAppDelegate *appDelegate = (YourAppDelegate *)[[UIApplication sharedApplication] delegate];
delegate.yourVariable; 
```

# paypal - 贝宝快速结帐定期配置文件开始日期

> ID：10578283
> 
> 赞同：11
> 
> 时间：2012-05-14T06:19:24.910
> 
> 标签：paypal, paypal-ipn, paypal-sandbox, paypal-subscriptions

我们使用 Express Checkout API 以编程方式使用 paypal 定期付款。

根据文档，配置文件似乎最多需要 24 小时才能激活。**我试图弄清楚如何设置计费开始日期，以便在配置文件激活的当天收费，而不是强制它等待长达 24 小时。**

根据 API 文档，我似乎需要在创建配置文件时传入开始日期，这迫使我（今天 + 1 天）强制延迟 24 小时。但是，如果配置文件立即激活并且我收到一条 IPN 消息，我仍然必须强迫客户等待 24 小时……这似乎不太好。

虽然我可以为预付款做一个 initamt，但我试图避免这样做 b/ci 认为这会使我缩短续订期（例如，如果它是 6 个月的订阅，我将收取 1 个月的预付款并做 5月重复。），这会让消费者感到困惑。

我希望有人可以帮助我解决这个问题。

[文档](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECRecurringPayments)。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-15T06:38:30.817

只是想跟进这件事。我今天与 PayPal 进行了交谈以澄清这个问题。

他们建议使用初始付款立即收费，然后将订阅期限缩短 1 个间隔。因此，如果您有 6 个月的付款，则立即收取 1 个月的费用，然后再进行 5 个月的重复收费。对消费者来说似乎是排序或荒谬和部分混淆。

他们还证实，最初的重复配置文件步骤可能会延迟到一天 b/c，它是分批运行的。

再加上系统会跳过 2 月的月末付款（它们会调整到月初），您将获得很多乐趣。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T00:37:42.857

是的，最好进行初始付款，然后从您的间隔中减去一个或将您的起始间隔 1 单位放入未来。

另请注意，如果无法收取初始付款，则 API 调用将失败，如果没有初始付款，API 调用可以通过（成功响应）但当付款被收取时（最多 24 小时后），它有机会不成功。

IE。信用卡很好，因此它批准了定期计费，但是当它尝试收费时，由于某种原因它被拒绝了。

确保您有用于 recurring_payment_skipped 的 IPN 侦听器以考虑到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-27T16:15:34.063

只需立即收取 6 个月的费用，并将定期付款设置为从初始付款之日起 6 个月后开始。

# php - Yii 在关系查询中用三级“with”消除列的歧义

> ID：10578290
> 
> 赞同：1
> 
> 时间：2012-05-14T06:20:13.113
> 
> 标签：php, activerecord, orm, yii, relational-database

在以下情况下：

```
'with'=>array('pros.comments', 'cons.comments') 
```

消除“评论”歧义的解决方案是：

```
'with'=>array('pros.comments', 'cons.comments'=>array('alias'=>'con_comments')) 
```

但是，如果我有三个级别怎么办：

```
'with'=>array('pros.comments.author', 'cons.comments.author') 
```

？？？如何消除评论和作者的歧义？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:15:38.833

试试这个

```
'with'=array('pros.comments'=>array('alias'=>'pros_comments','with'=>array('author'=>array('alias'=>'pros_comments_author'))),'cons.comments'=>array('alias'=>'cons_comments','with'=>array('author'=>array('alias'=>'cons_comments_author')))) 
```

# jsp - Spring MVC - 出现验证错误时如何设置父 div 的类？

> ID：10578291
> 
> 赞同：5
> 
> 时间：2012-05-14T06:20:14.970
> 
> 标签：jsp, spring-mvc, jsp-tags

有什么方法可以将任意元素的 css 类绑定到模型绑定状态？

```
<form:form method="post" commandName="authForm" action="authenticate">
  <div id="login-error" class="control-group">
    <label>Login</label>
    <form:input path="name" />
    <span class="help-inline"><form:errors path="name" /></span>
  </div>

  <div class="control-group">
    <label>Password</label>
    <form:input path="password" />
    <span class="help-inline"><form:errors path="password" /></span>
  </div>

  <input type="submit" />
</form:form> 
```

在这段代码中，我需要在没有错误和有错误时管理`login-error`'s 类（对于 second 的想法相同）。`control-group``control-group error``control-group`

这里的常见解决方案是什么？

**更新**

这是没有绑定错误时我需要的：

```
<div class="control-group"> <!-- !!!!!!!!!!!! -->
  <label>Login</label>
  <form:input path="name" />
  <span class="help-inline"><form:errors path="name" /></span>
</div> 
```

这是出现绑定错误时我需要的：

```
<div class="control-group error"> <!-- !!!!!!!!!!!! -->
  <label>Login</label>
  <form:input path="name" />
  <span class="help-inline"><form:errors path="name" /></span>
</div> 
```

寻找解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T06:40:30.590

这是可行的解决方案，但我不确定它是否真的是个好主意：

```
<%@taglib prefix="spring" uri="http://www.springframework.org/tags"%>
...
<form:form method="post" commandName="authForm" action="authenticate">
  <spring:bind path="name">
    <div class="control-group <%= status.isError() ? "error" : "" %>"
      <label>Login</label>
      <form:input path="name" />
      <form:errors path="name" cssClass="help-inline" />
    </div>    
  </spring:bind>
  ...
</form:form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:39:25.233

我有同样的问题，我使用 jQuery 解决了它。

```
<div class="control-group">
    <form:label path="groupCode" cssClass="control-label"><spring:message code="lookUp.groupCode"/></form:label>
    <div class="controls">
        <form:input path="groupCode"/>
        <form:errors path="groupCode">
            <form:errors path="groupCode" cssClass="help-inline"/>
            <script type="text/javascript">
                $("#groupCode").parent().parent().addClass("error");
            </script>
        </form:errors>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T06:41:52.307

我无法在这里找到合适的（通用）解决方案。但是您可以使用 JavaScript 并尝试查找在视图中是否存在 id 为“name”的跨度，并且基于此条件，您可以实现您想要的。

因为当没有指定的绑定错误时**它不会生成相同的跨度标签。如果“名称”有错误，那么它将生成带有其 id 的相应 span 标签。**

 **希望这对您有所帮助。干杯。**

# url - 如何为更复杂的 URL 定义子域 URL 重写规则

> ID：10578292
> 
> 赞同：0
> 
> 时间：2012-05-14T06:20:18.643
> 
> 标签：url, for-loop, rewrite, rule

如何为该网址创建重写规则，例如

[http://www.abc.in/subfoldername/index.php?alist&TP=xyz&ct=bcd](http://www.abc.in/subfoldername/index.php?alist&TP=xyz&ct=bcd)

至

[http://bcd.abc.in](http://bcd.abc.in)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T15:25:23.010

**在.htaccess**中输入以下代码：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?([a-z0-9_-]+)\.(.+)$
RewriteRule ^$ http://%{HTTP_HOST}/subfoldername/index.php?alist&TP=xyz&ct=%2 [L] 
```

# opengl - 我如何在opengl的前屏幕上绘制模型

> ID：10578294
> 
> 赞同：0
> 
> 时间：2012-05-14T06:20:34.313
> 
> 标签：opengl

我想在窗口的角落画一个标志（3D奖）（更换相机时的固定位置）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:27:03.753

可以这样做：

1.  画出你的场景
2.  禁用深度测试（如果您需要自我深度测试以正确绘制模型，则清除深度缓冲区）
3.  在堆栈上设置一个忽略相机位置的新矩阵。
4.  画出标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:30:18.180

这是我绘制全屏矩形的代码（在旧的opengl中）

```
glMatrixMode(GL_PROJECTION);
glPushMatrix();
glLoadIdentity();
glMatrixMode(GL_MODELVIEW);
glPushMatrix();
glLoadIdentity();

glBegin(GL_QUADS);
glTexCoord2f( 0,0 );
glVertex3d( -1.0,-1.0, 0 );
glTexCoord2f( 1,0 );
glVertex3d(  1.0,-1.0, 0 );
glTexCoord2f( 1,1 );
glVertex3d(  1.0, 1.0, 0 );
glTexCoord2f( 0,1 );
glVertex3d( -1.0, 1.0, 0 );
glEnd();

glMatrixMode(GL_PROJECTION);
glPopMatrix();
glMatrixMode(GL_MODELVIEW);
glPopMatrix(); 
```

只需禁用深度缓冲区 abd 将纹理设置为能够在 eferything 前面绘制您的徽标当然您可以更改它的位置和大小

# java - 如何在 java 1.5 中将非透明组件添加到透明 JFrame？

> ID：10578295
> 
> 赞同：0
> 
> 时间：2012-05-14T06:20:35.697
> 
> 标签：java, swing, transparency, jna, java-5

我有一个 JFrame 的子类（它包含 JButton、Title 和 Jpanel），我向它添加了一个 JPanel。Jpanel 占据边界布局的中心部分。我想让 JPanel 透明（它应该通过 Frame 窗口看到）。

正如我为 Java 1.5 所做的那样，我使用 JFrame.setOpacity(0.0f) 来设置 Jframe 的透明度。通过这样做，JFrame 的所有组件（即按钮、标题和 jPanel）都使用相同的 alpha 级别。但我只希望 JPanel 是透明的。

我通过改变 Z 顺序来试验 JLayeredPane，结果相同。

我愿意使用 JNA 之类的外部库（JNA windowsUtil 也与 setOpacity() 方法相同）并使用 java7 或 java6 的类作为我的应用程序的外部库。

我什至在没有帮助的情况下解决了一些以前提出的问题：

[透明 Java 窗口上的不透明组件](https://stackoverflow.com/questions/10465203/opaque-components-on-transparent-java-windows)

[Java：带有非透明组件的透明 Windows？](https://stackoverflow.com/questions/3372016/java-transparent-windows-with-non-transparent-components)

[在半透明框架/面板/组件上重新绘制。](https://stackoverflow.com/questions/2163544/re-paint-problem-on-translucent-frame-panel-component/2166500#2166500)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T18:02:43.560

使用 JNA 的`WindowUtils.setWindowTransparent()`方法从一个完全透明的窗口开始。绘制到该窗口中的任何像素都将保留其 alpha 分量。

```
JFrame f = ...
WindowUtils.setWindowTransparent(f, true);
// ensure JPanel content pane doesn't paint its (solid) background
f.getContentPane().setOpaque(false);
// Any other added components will be painted normally
f.getContentPane().add(new JButton("I'm opaque")); 
```

这应该会产生预期的结果。

如果您希望您的容器是半透明的，或其他不透明组合，您需要阐明您想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:11:38.897

这是一个带有两个标签的小例子。一个是完全不透明的，而另一个是半透明的。这可以与 JPanel 一起工作，但出于演示目的，它对 JLabel 更具示例性：

```
import java.awt.BorderLayout;
import java.awt.Color;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

import com.sun.awt.AWTUtilities;

public class Test3 {

    protected static void initUI() {
        JFrame frame = new JFrame("test");
        frame.setUndecorated(true);
        AWTUtilities.setWindowOpaque(frame, false);
        JLabel label = new JLabel("Hello NOT transparent label");
        label.setOpaque(true);
        label.setBackground(new Color(255, 0, 0));
        JLabel transLabel = new JLabel("Hello transparent label");
        transLabel.setOpaque(true);
        transLabel.setBackground(new Color(255, 0, 0, 50));
        frame.setLocationByPlatform(true);
        frame.getContentPane().add(label);
        frame.getContentPane().add(transLabel, BorderLayout.SOUTH);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                initUI();
            }
        });
    }
} 
```

# yii - YII 中默认按 desc 顺序排列数据

> ID：10578296
> 
> 赞同：0
> 
> 时间：2012-05-14T06:20:38.397
> 
> 标签：yii

我很想在 YII 视图中按降序显示一些数据。我如何默认按 studentID desc 对数据进行排序？

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id' => 'student-grid',
      'criteria'=>array(

'order'=>'StudentID DESC',

     ),

    'dataProvider' => Agent::getStudents($model->agent_id),
    'columns' => array(
        'StudentID',
        'first_name',
        'last_name',

        'dob',
        'gender',
        array(
            'header' => 'Options',
            'class' => 'CButtonColumn',
            'template'=>'{View}',
            'buttons'=>array(
                'View' => array(
                    'url'=> 'Yii::app()->createUrl("/students/view/" . $data->StudentID)',
                ),
            ),
        ),
    ),
)); ?> 
```

谢谢抗体

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T07:50:19.387

在您的 dataProvider 中（我假设这是 getStudents() 函数返回的内容）将另一个数组添加到您的配置数组:) 喜欢：

```
return new CActiveDataProvider(get_class($this), array(
    'criteria'=>$some_criteria,
    /* Your array */
    'sort'=>array(
        'defaultOrder'=>array(
            'StudentID'=>true,
        ),
    ),
    /***/
)); 
```

'defaultOrder'数组中的值'false'表示升序，'true'表示降序。

我希望这就是你要找的:)。

另请查看此论坛主题：[http](http://www.yiiframework.com/forum/index.php/topic/8428-cgridview-default-sort/) ://www.yiiframework.com/forum/index.php/topic/8428-cgridview-default-sort/ 和此文档：[http ://www.yiiframework.com/doc/api /1.1/CSort#defaultOrder-detail](http://www.yiiframework.com/doc/api/1.1/CSort#defaultOrder-detail)

问候。

# xml - XML 和变量

> ID：10578299
> 
> 赞同：1
> 
> 时间：2012-05-14T06:20:58.837
> 
> 标签：xml, xslt

我正在做一个项目并且遇到了问题。我最近确定无法更改变量值，并且似乎无法找到解决此问题的方法。我需要创建通用的代码，但我无法做到这一点。

我的 XSLT 代码......

```
 <tracklist>
                        <xsl:for-each select = "VinylRecord/Tracks/Song">

                            <xsl:choose>

                                <xsl:when test = "@Track = 1">
                                    <xsl:element name="side{@Side}">

                                    <xsl:variable name = "d" select = "@Track"/>

                                        <xsl:for-each select = "../Song">
                                            <xsl:choose>
                                                <xsl:when test = "@Side = ../Song/following:: @Side">

                                                    <track>

                                                        <xsl:attribute name = "no">
                                                            <xsl:value-of select = "@Track" />
                                                        </xsl:attribute>

                                                        <xsl:attribute name = "runtime">
                                                            <xsl:value-of select = "Length" />
                                                        </xsl:attribute>

                                                        <xsl:value-of select = "text()" />

                                                    </track>

                                                </xsl:when>                                               
                                            </xsl:choose>
                                        </xsl:for-each>

                                    </xsl:element>
                                </xsl:when>

                            </xsl:choose>

                        </xsl:for-each>
                    </tracklist> 
```

XML 文档…………

```
 <Tracks>
        <Song Side="A" Track="1">
            The Nerve
            <Length>2.58</Length>
        </Song>
        <Song Side="A" Track="2">
            Backfire
            <Length>3.22</Length>
        </Song> 
        <Song Side="A" Track="3">
            Clipping
            <Length>4.05</Length>
        </Song>
        <Song Side="A" Track="4">
            Spotlight
            <Length>3.21</Length>
        </Song>
        <Song Side="A" Track="5">
            No Response
            <Length>4.01</Length>
        </Song>
        <Song Side="A" Track="6">
            Pins and Needles
            <Length>4.05</Length>
        </Song>
        <Song Side="B" Track="1">
            Goodbye
            <Length>4.09</Length>
        </Song>
        <Song Side="B" Track="2">
            Odds
            <Length>3.01</Length>
        </Song>
        <Song Side="B" Track="3">
            Electrify
            <Length>3.49</Length>
        </Song>
        <Song Side="B" Track="4">
            Armistice
            <Length>3.54</Length>
        </Song>
        <Song Side="B" Track="5">
            Lost Year
            <Length>3.13</Length>
        </Song>
        <Song Side="B" Track="6">
            Burden
            <Length>9.06</Length>
        </Song>
    </Tracks> 
```

...

任何提示将非常感谢

预期结果 ...............

这只是上面显示的整个程序的一个片段，但结果应该显示为：

```
 <tracklist>
            <sideA>
                <track no="1" runtime="2.58">The Nerve</track>
                <track no="2" runtime="3.22">Backfire</track>
                <track no="3" runtime="4.05">Clipping</track>
                <track no="4" runtime="3.21">Spotlight</track>
                <track no="5" runtime="4.01">No Response</track>
                <track no="6" runtime="4.05">Pins and Needles</track>
            </sideA>
            <sideB>
                <track no="1" runtime="4.09">Goodbye</track>
                <track no="2" runtime="3.01">Odds</track>
                <track no="3" runtime="3.49">Electrify</track>
                <track no="4" runtime="3.54">Armistice</track>
                <track no="5" runtime="3.13">Lost Year</track>
                <track no="6" runtime="9.06">Burden</track>
            </sideB>
        </tracklist> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:51:38.567

“这不是一个错误，而是一个特性”：XSLT 变量被设计为不可更改。实际上它们可以被命名为常量。解决这个问题很困难，可以使用参数来完成。在大多数情况下，如果您尝试使用 XSLT 编程尝试，则没有必要这样做，其中程序是通过模板由数据驱动的。诸如“for-each”之类的东西是不真正适合 XSLT 理念的过程方式。你想得到什么结果？

知道预期结果后，样式表应如下所示：

```
<xsl:template match="Tracks">
 <tracklist>
  <sideA>
   <xsl:apply-templates select="Song[@Side='A']"/>
  </sideA>
  <sideB>
   <xsl:apply-templates select="Song[@Side='B']"/>
  </sideB>
 </tracklist>
</xsl:template>
<xsl:template match="Song">
 <track no="{@Track}" runtime="{Length}">
  <xsl:value-of select="text()"/>
 </track>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:14:49.897

它看起来像一个标准的分组问题。

如果您使用的是 XSLT 2.0，那么

```
<xsl:for-each-group select="Song" group-by="Side">
  <xsl:element name="Side{current-grouping-key)}">
    <xsl:for-each select="current-group()">
      <track no="{position()}" runtime="{Length}">
         <xsl:value-of select="."/>
      </track>
    </xsl:for-each>
  </xsl:element>
</xsl:for-each-group> 
```

使用 XSLT 1.0 会更困难，但仍然是一个教科书问题：查找“Muenchian Grouping”以获得答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T13:42:52.897

**这个 XSLT 解决方案非常简单**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kFollowing" match="Song"
  use="generate-id(preceding-sibling::Song[not(@Side = current()/@Side)][1])"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/*">
  <tracklist>
   <xsl:apply-templates/>
  </tracklist>
 </xsl:template>

 <xsl:template match="Song"/>

 <xsl:template match=
  "Song[not(@Side = preceding-sibling::Song[1]/@Side)]">

  <xsl:element name="side{@Side}">
   <xsl:apply-templates mode="inGroup" select=
   "key('kFollowing', generate-id(preceding-sibling::Song[1]/@side))"/>
  </xsl:element>
 </xsl:template>

 <xsl:template match="Song" mode="inGroup">
  <track no="{@Track}" runtime="{Length}"><xsl:value-of select="text()"/></track>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<Tracks>
    <Song Side="A" Track="1">
            The Nerve
        <Length>2.58</Length>
    </Song>
    <Song Side="A" Track="2">
            Backfire
        <Length>3.22</Length>
    </Song>
    <Song Side="A" Track="3">
            Clipping
        <Length>4.05</Length>
    </Song>
    <Song Side="A" Track="4">
            Spotlight
        <Length>3.21</Length>
    </Song>
    <Song Side="A" Track="5">
            No Response
        <Length>4.01</Length>
    </Song>
    <Song Side="A" Track="6">
            Pins and Needles
        <Length>4.05</Length>
    </Song>
    <Song Side="B" Track="1">
            Goodbye
        <Length>4.09</Length>
    </Song>
    <Song Side="B" Track="2">
            Odds
        <Length>3.01</Length>
    </Song>
    <Song Side="B" Track="3">
            Electrify
        <Length>3.49</Length>
    </Song>
    <Song Side="B" Track="4">
            Armistice
        <Length>3.54</Length>
    </Song>
    <Song Side="B" Track="5">
            Lost Year
        <Length>3.13</Length>
    </Song>
    <Song Side="B" Track="6">
            Burden
        <Length>9.06</Length>
    </Song>
</Tracks> 
```

**产生了想要的正确结果：**

```
<tracklist>
   <sideA>
      <track no="1" runtime="2.58">
            The Nerve
        </track>
      <track no="2" runtime="3.22">
            Backfire
        </track>
      <track no="3" runtime="4.05">
            Clipping
        </track>
      <track no="4" runtime="3.21">
            Spotlight
        </track>
      <track no="5" runtime="4.01">
            No Response
        </track>
      <track no="6" runtime="4.05">
            Pins and Needles
        </track>
   </sideA>
   <sideB>
      <track no="1" runtime="2.58">
            The Nerve
        </track>
      <track no="2" runtime="3.22">
            Backfire
        </track>
      <track no="3" runtime="4.05">
            Clipping
        </track>
      <track no="4" runtime="3.21">
            Spotlight
        </track>
      <track no="5" runtime="4.01">
            No Response
        </track>
      <track no="6" runtime="4.05">
            Pins and Needles
        </track>
   </sideB>
</tracklist> 
```

# php - 自动 Getter 和 Setter 性能选项而不是 __call

> ID：10578306
> 
> 赞同：0
> 
> 时间：2012-05-14T06:21:23.253
> 
> 标签：php, oop

我正在寻找不必在我的代码中编写 getter 和 setter 的选项。

目前我正在使用 __call 自动将 getter 和 setter 映射到我的属性，但是我被告知这非常慢。

我有什么选择，因为仅编写 getter 和 setter 来返回属性并不能很好地利用我们的开发人员时间，而且维护它们更让人头疼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:32:49.403

虽然`__call()`性能可能不是很好，但我为您看到的唯一选择是从 IDE 生成代码。这也改进了许多最近的编辑器具有的代码洞察功能，允许编辑器在您键入代码时建议方法名称；非常方便的东西！

另请参阅：[如何在 Eclipse (php) 中生成 getter 和 setter](https://stackoverflow.com/questions/4238174/how-to-generate-getter-and-setter-in-eclipse-php)

顺便说一句 - `__get()`and`__set()`可能会有相同的性能问题，现在引入它们会极大地改变你现有的代码（不是一个好主意）。

**编辑**

我找不到任何谈论如何动态维护 getter 和 setter 的好文章，所以我想到了另一种方法（可能对你有用，也可能对你不起作用）。

`tokenizer`您可以编写一个代码转换器，通过使用其中一个或`Reflection`（或两者）来为您负责维护。这应该在保存时集成到 IDE 中，或者每次文件更改时都必须动态完成。

无论如何，只是一个想法:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:25:13.683

好吧，您可以使用 __set() 和 __get()，或者制作公共属性。我还没有听说过任何其他“魔术”方法可以做到这一点。

# c# - 将 arraylist 对象转换为 byte[]

> ID：10578310
> 
> 赞同：1
> 
> 时间：2012-05-14T06:22:03.567
> 
> 标签：c#, bytearray

我有一个名为 list 的 araylist 对象，在这里我想将我的 arraylist 对象转换为 byte []，同时执行以下编码它给出一个错误：“源数组中的至少一个元素无法转换为目标数组类型”我的编码：

```
 byte[] obj= new byte[list.Count];
     list.CopyTo(obj); 
```

在这里，我的数组列表对象从 ssrs 报告返回报告数据。我想在这里做什么来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T07:07:10.350

看看这个（这会告诉你哪里可能有问题）

```
 List<object> list = new List<object>();
        list.Add((byte)1);
        list.Add((byte)0);
        list.Add("wtf");
        list.Add((byte)1);
        byte[] obj = list.OfType<byte>().ToArray();
        if(obj.Length!=list.Count)
        {
            //Exception, not all objects in list is 'byte'
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:29:03.040

如果您的意思是 ArrayList 包含类型的项目，请`byte`使用以下语法：

```
byte[] obj = (byte[])list.ToArray(typeof(byte)); 
```

否则你想要什么不清楚，因为对象不能像那样转换为字节，所以请更好地解释。

# asp.net - 在 asp.net C# 中，中继器控制网格视图的优势是什么？

> ID：10578313
> 
> 赞同：1
> 
> 时间：2012-05-14T06:22:20.087
> 
> 标签：asp.net, gridview, repeater

我读过很多关于gridview和repeater之间区别的文章。我知道 gridview 模式固定在 and 中，其中中继器可以提供自定义的 HTML 标记。如果我没记错的话，我们还可以通过添加模板字段和放置带有自定义设计的表格来自定义 HTML 标记。在那个表中，我们可以放置标签和其他 .net 控件，并且可以得到我们想要的任何东西。那为什么要使用中继器控制。

我很困惑在哪种情况下它可以优于gridview。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T06:35:53.090

简单来说我们可以说repeater的性能远胜于gridview。如果您需要只读项目的基本渲染，那么最好使用中继器，如果您需要事件、分页和可编辑控件，那么您应该使用 gridview。具有较少内置功能的简单控件速度很快。您可以将网格视图的所有功能实现到转发器，但您必须手动完成。

所以这取决于你的要求，你需要中继器还是 gridview

此讨论将对您有所帮助 [http://forums.asp.net/t/1072020.aspx](http://forums.asp.net/t/1072020.aspx)

# expression-blend - 名称空间“using:System.Collections”中不存在名称“DictionaryEntry”

> ID：10578314
> 
> 赞同：0
> 
> 时间：2012-05-14T06:22:24.267
> 
> 标签：expression-blend, windows-8, windows-runtime, winrt-xaml

我正在使用 Windows 8 的 Consumer Preview 来创建 Metro 应用程序。每当我将新的 IValueConverter 添加到 XAML 页面时，我都会从 StandardStyles.xaml 文件中收到以下异常：

> 名称空间“using:System.Collections”中不存在名称“DictionaryEntry”

错误指向 StandardStyles.xaml 文件的这一部分：

```
<ResourceDictionary.ThemeDictionaries>
    <Collections:DictionaryEntry x:Key="Default">
        <Collections:DictionaryEntry.Value>
            <ResourceDictionary>
                <x:String x:Key="BackButtonGlyph">&lt;/x:String>
                <x:String x:Key="BackButtonSnappedGlyph">&lt;/x:String>
            </ResourceDictionary>

        </Collections:DictionaryEntry.Value>
    </Collections:DictionaryEntry>

    <Collections:DictionaryEntry x:Key="HighContrast">
        <Collections:DictionaryEntry.Value>

            <ResourceDictionary>
                <x:String x:Key="BackButtonGlyph">&lt;/x:String>
                <x:String x:Key="BackButtonSnappedGlyph">&lt;/x:String>
            </ResourceDictionary>
        </Collections:DictionaryEntry.Value>
    </Collections:DictionaryEntry>
</ResourceDictionary.ThemeDictionaries> 
```

当我从默认的 Metro App 项目模板创建一个新的 Metro App 项目时，该文件会自动添加。在我将 IValueConverter 添加到页面之前，该文件已编译并运行良好。每次添加 IValueConverter 时都会出现此问题，无论我使用哪个项目模板，也无论我是使用 Expression Blend 还是 Visual Studio 添加 IValueConverter。

这可能只是消费者预览版中的一个错误，但它似乎是一项基础性工作，我认为值得在这里询问是否有其他人遇到过这个问题，如果有，你是如何解决的或解决方法？

# c++ - _dl_runtime_resolve() 中的分段错误

> ID：10578315
> 
> 赞同：4
> 
> 时间：2012-05-14T06:22:37.863
> 
> 标签：c++, linux, crash, segmentation-fault

我在遇到分段错误的代码中执行简单的字符串操作。我不知道确切的问题是什么。请看看是否有人可以提供帮助。

核心的回溯是

```
(gdb) bt
#0  0x00007f595dee41da in _dl_fixup () from /lib64/ld-linux-x86-64.so.2
#1  0x00007f595deea105 in _dl_runtime_resolve () from /lib64/ld-linux-x86-64.so.2
#2  0x0000000000401d04 in getNodeInfo (node=0x7fffbfb4ba83 "TCU-0")
    at hwdetails.cpp:294
#3  0x0000000000402178 in main (argc=3, argv=0x7fffbfb4aef8)
    at hwdetails.cpp:369 
```

在**第 294 行**，崩溃发生在`cout`声明所在的位置。
`LdapDN`是`char *`和不是`NULL`。

```
if ( Epath && (Epath->Entry[0].EntityType == SAHPI_ENT_UNSPECIFIED ||
         Epath->Entry[0].EntityType == SAHPI_ENT_ROOT )) {
        // nothing is mapped. Degrade the ldap dn path to slot.
        if(LdapDN){
            std::cout << "LdapDN " << LdapDN << std::endl;
        }
        std::string ldapDN;
        ldapDN = LdapDN;
        std::string slot = LDAP_PIU_ID;
        if ( ldapDN.compare(0, slot.length(), slot) != 0 ) {
            size_t pos = ldapDN.find(slot);
            if ( pos != std::string::npos ) {
                ldapDN = ldapDN.substr(pos);
                LdapDN = (char *)ldapDN.c_str();
                //getEntityPathFromLdapDn(ldapDN.c_str(), epath, domid);
            }
        }
     } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T21:11:10.210

崩溃`_dl_fixup`通常意味着您损坏了运行时加载程序的状态。

两个最常见的原因是：

1.  堆损坏（溢出）或
2.  自身不匹配的部分`glibc`。

如果您没有设置例如`LD_LIBRARY_PATH`指向非标准`glibc`，那么我们可以忘记原因＃2。

对于#1，在 Valgrind 下运行你的程序，并确保它没有检测到错误。

如果实际上没有，请使用GDB 命令`disas`，`info registers`用它们的输出更新您的问题，您可能会收到额外的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-05T11:59:26.483

这是 GOT 表的问题。_dl_runtime_resolve - 当动态库中的某些函数第一次调用时，更改 GOT（全局偏移表）的过程。在下次使用更改的 GOT 条目时。当您的代码中第一次调用来自动态库的函数（例如来自 libc.so 的 printf()）时：

1.  转到 PLT（程序查找表）。PLT 是一个蹦床，它可以获取从 GOT 调用的函数的正确地址。
2.  从 PLT 转到 GOT
3.  返回PLT
4.  调用 _dl_runtime_resolve
    *   将实际函数跳转地址存储到 GOT
    *   从动态库调用函数

第二次函数调用是：

1.  转到PLT
2.  转到GOT
3.  GOT 可以从动态库直接跳转到函数地址。GOT 是对再次调用的函数的引用，而无需快速执行 _dl_runtime_resolve。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T00:43:38.600

我在这里看到内存泄漏：

`LdapDN`当你这样做时，你基本上会丢失你以前的字符串

```
 if ( pos != std::string::npos ) {
            ldapDN = ldapDN.substr(pos);
            LdapDN = (char *)ldapDN.c_str();
            //getEntityPathFromLdapDn(ldapDN.c_str(), epath, domid);
        } 
```

# android - 模拟器上的 Java.lang.NoClassDefFoundError

> ID：10578317
> 
> 赞同：0
> 
> 时间：2012-05-14T06:22:45.313
> 
> 标签：android, noclassdeffounderror

首先，我知道 Stack Overflow 上有许多类似的问题及其答案。然而我问这个，因为他们都没有工作。我已将外部 jar 添加到“libs”文件夹中。

此外，有趣的是 commons.math-2.2.jar 中的类似乎可以正常工作。问题只是当我尝试使用来自 jsci-wavelet.jar 的类时，我已经检查了 n 次构建路径。那里似乎没有问题。我的源代码中只有一个包。

顺便说一句，我使用的是 Android 2.2 模拟器。（虽然甚至检查了它的 Android 4.0.3 但无济于事。）

抱歉，堆栈交换不允许我上传图片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T03:54:15.737

好吧，这不是那么头疼。正如[@rekaszeru](https://stackoverflow.com/users/506879/rekaszeru)所建议的，我检查了是否有任何依赖关系，`jsci-wavelet.jar` 我检查了它的来源。它说：

```
import JSci.maths.wavelet.*;
import JSci.maths.*; 
```

即它也需要 JSci.maths 包中的类。所以我将它添加`fsci-core.jar`到依赖项和中提琴中，它工作得很好。

# sql - 替换功能查询

> ID：10578318
> 
> 赞同：1
> 
> 时间：2012-05-14T06:22:47.333
> 
> 标签：sql, oracle, replace

我的查询输出的一列包含 char 13（换行符）。为了用任何东西替换它，我试图使用下面的函数，但它给了我下面的错误 ORA-00936: missing expression

```
select
replace(AUDITOR_COMMENTS,char(13),'')  
from csa_sli_all.T_CONV_QUOTE 
```

当我将 char(13) 放在引号 'char(13)' 中时，错误发生了，但它不会按预期进行。我想我不能在引号中包含 char(13) 。我正在使用 Oracle 数据库 10g 版本 10.2.0.1.0 - 64 位生产

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T06:29:26.643

该函数不是 char 它是 chr 尝试调用：

```
select
replace(AUDITOR_COMMENTS,chr(13),'')  
from csa_sli_all.T_CONV_QUOTE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:29:50.100

尝试 chr(13) 而不是 char(13) 看看它是否有效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T06:32:04.617

```
replace(your_data, chr(13), '') 
```

试试这个@sebastian说

```
select
replace(AUDITOR_COMMENTS,chr(13),'')  
from csa_sli_all.T_CONV_QUOTE 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T06:37:13.917

尝试这个 ：

> > 替换（col_name，CHR（13）+ CHR（10），''）

或者

> 替换（替换（col_name，CHR（10）），CHR（13））

# ruby-on-rails - 在保存到数据库之前初始化模型对象并检查有效性

> ID：10578321
> 
> 赞同：2
> 
> 时间：2012-05-14T06:23:25.237
> 
> 标签：ruby-on-rails

有什么方法可以初始化模型对象，例如：

```
@review = current_user.reviews.build(params[:review]) 
```

然后根据 review.rb 中的验证规则检查它的有效性？

...不尝试将模型对象保存到数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:24:33.217

您可以使用它`@review.valid?`来检查模型是否有效，而无需将其保存到数据库中。

```
if @review.valid?
  #Do something
end 
```

PS：事实上，您可以向任何类添加验证，而无需使用数据库功能[`ActiveModel::Validations`](http://api.rubyonrails.org/classes/ActiveModel/Validations.html)。有关示例，请参见[Railscast #219 。](http://railscasts.com/episodes/219-active-model)

# iphone - 如何在 xcode 中调试 Cordova.framework

> ID：10578333
> 
> 赞同：1
> 
> 时间：2012-05-14T06:24:36.680
> 
> 标签：iphone, ios, xcode, cordova

我遇到了一个问题，cordova 无法在 iOS 上启动相机应用程序。一个简单的案例工作正常，但在我的应用程序中，不是那么多。

所以我想调试到 Cordova.framework 看看问题是什么。

但我不知道该怎么做。我已经构建了位于已安装框架旁边的 Cordova 项目，并且我已经替换了项目中的框架引用以指向它。这似乎很好。但我无法介入或设置断点。

使用cordova项目，我正在构建UniversalFramework，看起来它已设置为在方案配置中进行调试，即使它总是构建为发布（这似乎在脚本中），我在clang输出中看到--DDEBUG，所以我认为它是调试。我对 xcode 还很陌生，所以我不知道它是在构建符号文件还是如何验证它是调试框架等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:48:27.857

最新的 Cordova (2.0.0) 就像一个单独的项目并链接为静态库。使用该版本，您可以在库代码中放置断点。

# counter - VHDL中在某些条件下用时钟计数值分配输出的设计

> ID：10578335
> 
> 赞同：0
> 
> 时间：2012-05-14T06:24:50.147
> 
> 标签：counter, vhdl, clock

我是 VHDL 新手，对这个设计感到困惑

当 Acknwledgement= '1' 和 clk='1' 然后

计数应该是计数+1；

当确认='0'时，我的时钟总计数值应分配给'输出'，然后重置计数='0'和输出='0'。

有人能帮忙吗。提前致谢。

编辑：粘贴在评论中的代码：

```
library IEEE;
use IEEE.STD_LOGIC_1164.all;
entity acknw is
    port (acknw  : in  std_logic;
          clk    : in  std_logic;
          output : out integer range 0 to 15);
end acknw;
architecture Behavioral of acknw is
begin
    process(clk, acknw) variable c : integer range 0 to 15;
    begin
        if(clk'event and clk = '1') then
            if(acknw = '1') then 
                 c := c+1;
                 output <= c;
            else 
                 c := 0;
                 output <= c;
            end if;
        end if;
    end process;
end Behavioral; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T22:19:17.620

从您的评论听起来您想要一个异步确认，请尝试以下操作：

```
library IEEE;
use IEEE.STD_LOGIC_1164.all;
entity acknw is
    port (acknw  : in  std_logic;
          clk    : in  std_logic;
          output : out integer range 0 to 15);
end acknw;
architecture Behavioral of acknw is
begin
    process(clk, acknw) 
    begin
        if (acknw = '0') then
          output <= 0;
        elsif rising_edge(clk) then
          -- rollover
          if (output /= 15) then
            output <= output + 1;
          else
            output <= 0;
          end if;
        end if;
    end process;
end Behavioral; 
```

# algorithm - 网络中的流分解定理

> ID：10578336
> 
> 赞同：1
> 
> 时间：2012-05-14T06:25:03.493
> 
> 标签：algorithm

我正在阅读 Robert Sedgewick 的算法卷 2。本节来自网络流算法。

我很难理解下面提到的流动分解定理及其推论。

流动分解定理：任何循环都可以表示为沿一组最多 E 条有向边的流动。

推论 1：任何 st-network 都有一个最大流，因此由非零流值诱导的子图是非循环的。

推论 2：任何 st-network 都有一个 maxflow，可以表示为从 s 到 t 的最多 E 条有向路径的集合。

请通过一个简单的例子帮助我理解上述定理和推论谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:01:37.967

如果您可以访问算法（部分）的其他解释，那么您在研究这些时会遇到麻烦。如果那不吸引您开始编写代码。我通常发现实现一个算法极大地提高了我对算法描述的理解。

实际上，我不同意上一段中的第二句话——无论是否进一步研究上诉，开始编写代码。我怀疑任何人都可以在不编码的情况下正确理解算法。离开场边，进入游戏。

# parsing - OCaml 中的 Packrat 解析（通过惰性进行记忆）

> ID：10578339
> 
> 赞同：2
> 
> 时间：2012-05-14T06:25:25.093
> 
> 标签：parsing, functional-programming, ocaml, lazy-evaluation, memoization

[根据 B. Ford 的硕士论文，](http://pdos.csail.mit.edu/~baford/packrat/thesis/)我正在 OCaml 中实现一个 packrat 解析器。 我的解析器应该接收一个表示语言语法的数据结构并解析给定的符号序列。

我被记忆部分困住了。原始论文使用 Haskell 的惰性求值来实现线性时间复杂度。我想在 OCaml 中执行此操作（通过惰性进行记忆），但不知道该怎么做。

那么，如何通过 OCaml 中的惰性求值来记忆函数呢？

编辑：我知道什么是惰性评估以及如何在 OCaml 中利用它。问题是如何使用它来记忆函数。

编辑：我写的代表语法的数据结构是：

```
type ('a, 'b, 'c) expr =
| Empty of 'c
| Term of 'a * ('a -> 'c)
| NTerm of 'b
| Juxta of ('a, 'b, 'c) expr * ('a, 'b, 'c) expr * ('c -> 'c -> 'c)
| Alter of ('a, 'b, 'c) expr * ('a, 'b, 'c) expr
| Pred of ('a, 'b, 'c) expr * 'c
| NPred of ('a, 'b, 'c) expr * 'c
type ('a, 'b, 'c) grammar = ('a * ('a, 'b, 'c) expr) list 
```

解析符号列表的（未记忆的）函数是：

```
let rec parse g v xs = parse' g (List.assoc v g) xs
and parse' g e xs =
  match e with
  | Empty y -> Parsed (y, xs)
  | Term (x, f) ->
     begin
       match xs with
       | x' :: xs when x = x' -> Parsed (f x, xs)
       | _ -> NoParse
     end
  | NTerm v' -> parse g v' xs
  | Juxta (e1, e2, f) ->
     begin
       match parse' g e1 xs with
       | Parsed (y, xs) ->
          begin
            match parse' g e2 xs with
            | Parsed (y', xs) -> Parsed (f y y', xs)
            | p -> p
          end
       | p -> p
     end
( and so on ) 
```

其中 parse 的返回值的类型定义为

```
type ('a, 'c) result = Parsed of 'c * ('a list) | NoParse 
```

例如，基本算术表达式的语法可以指定为`g`，在：

```
type nt = Add | Mult | Prim | Dec | Expr
let zero _  = 0
let g =
  [(Expr, Juxta (NTerm Add, Term ('$', zero), fun x _ -> x));
   (Add, Alter (Juxta (NTerm Mult, Juxta (Term ('+', zero), NTerm Add, fun _ x -> x), (+)), NTerm Mult));
   (Mult, Alter (Juxta (NTerm Prim, Juxta (Term ('*', zero), NTerm Mult, fun _ x -> x), ( * )), NTerm Prim));
   (Prim, Alter (Juxta (Term ('<', zero), Juxta (NTerm Dec, Term ('>', zero), fun x _ -> x), fun _ x -> x), NTerm Dec));
   (Dec, List.fold_left (fun acc d -> Alter (Term (d, (fun c -> int_of_char c - 48)), acc)) (Term ('0', zero)) ['1';'2';'3';])] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T13:49:10.063

使用惰性进行记忆的想法不是使用函数，而是使用数据结构进行记忆。懒惰意味着当你写`let x = foo in some_expr`,`foo`时不会立即被评估，而只是在需要时评估，但是in`some_expr`的不同出现将共享同一个主干：一旦其中一个强制计算，结果对所有人都可用.`x``some_expr`

这不适用于函数：如果您在 中编写`let f x = foo in some_expr`和调用`f`多次`some_expr`，那么每个调用都将独立评估，没有共享的 thunk 来存储结果。

所以你可以通过使用数据结构而不是函数来获得记忆。通常，这是使用关联数据结构完成的：不是计算`a -> b`函数，而是计算 a `Table a b`，其中`Table`是从参数到结果的一些映射。一个例子是斐波那契的 Haskell 演示：

```
fib n = fibTable !! n
fibTable = [0,1] ++ map (\n -> fib (n - 1) + fib (n - 2)) [2..] 
```

（你也可以用`tail`and来写`zip`，但这并不能说明问题。）

请注意，您不是记忆一个函数，而是一个列表：它是执行记忆的列表`fibTable`。您也可以在 OCaml 中编写此代码，例如使用[Batteries](http://ocaml-batteries-team.github.com/batteries-included/hdoc/)库的 LazyList 模块：

```
open Batteries
module LL = LazyList

let from_2 = LL.seq 2 ((+) 1) (fun _ -> true)

let rec fib n = LL.at fib_table (n - 1) + LL.at fib_table (n - 2)
and fib_table = lazy (LL.Cons (0, LL.cons 1 <| LL.map fib from_2)) 
```

然而，这样做并没有什么兴趣：正如您在上面的示例中看到的那样，OCaml 并不特别支持按需调用评估——它使用起来很合理，但不是很方便，因为它被迫在 Haskell 中使用。其实直接用直接变异的方式写缓存结构也同样简单：

```
open Batteries

let fib =
  let fib_table = DynArray.of_list [0; 1] in
  let get_fib n = DynArray.get fib_table n in
  fun n ->
    for i = DynArray.length fib_table to n do
      DynArray.add fib_table (get_fib (i - 1) + get_fib (i - 2))
    done;
    get_fib n 
```

这个例子可能选择不当，因为你需要一个动态的结构来存储缓存。在 packrat 解析器案例中，您正在对已知输入文本进行制表解析，因此您可以使用普通数组（由语法规则索引）：`('a, 'c) result option`对于每个规则，您将有一个数组，其大小为输入长度并已初始化到`None`. 例如。`juxta.(n)`表示`Juxta`从输入位置尝试规则的结果`n`，或者`None`如果尚未尝试。

Lazyness 是呈现这种记忆的好方法，但并不总是足够表达：如果您需要部分释放结果缓存的某些部分以降低内存使用率，如果您从惰性呈现开始，您将遇到困难. 请参阅[此博客文章](http://awelonblue.wordpress.com/2012/04/25/windowed-memoization/)以获取对此的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T13:39:47.037

为什么要记忆函数？我相信，您要记住的是给定（解析）表达式和输入流中给定位置的解析结果。例如，您可以为此使用 Ocaml 的 Hashtables。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T06:30:44.013

[懒惰](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Lazy.html)的关键字。

[在这里](http://blog.enfranchisedmind.com/posts/ocaml-lazy-lists-an-introduction/)你可以找到一些很好的例子。

如果它适合您的用例，您还可以使用 OCaml 流而不是手动生成 thunk。

# rally - SDK 2.0 中的跨应用消息传递

> ID：10578341
> 
> 赞同：2
> 
> 时间：2012-05-14T06:25:51.660
> 
> 标签：rally

我可以在 SDK 2.0 中让一个或多个应用程序响应另一个应用程序并在其中发生事件吗？

例如，假设我在仪表板中有一个应用程序，允许用户选择某些内容。我可以（以及如何）让安装在同一个仪表板中的其他应用程序响应该事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:20:58.883

每[查尔斯](https://stackoverflow.com/users/922367/charles-ferentchak)回答：

[Rally AppSDK：有没有办法在新布局架构中促进 App 之间的“面板间”通信](https://stackoverflow.com/questions/10491605/rally-appsdk-is-there-a-way-to-facilitate-inter-panel-communication-between-a)

这还没有实现——Rally 的工程团队正在努力使 AppSDK 2.0 的功能更加完善。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T18:30:06.683

这已在最近发布的 2.0rc1 版本的 SDK 中实现：

[https://developer.help.rallydev.com/apps/2.0rc1/doc/#!/guide/messaging](https://developer.help.rallydev.com/apps/2.0rc1/doc/#!/guide/messaging)

# windows-8 - Windows 8 / winrt / Metro 风格是否有相当于 wp7 的市场评论任务？

> ID：10578342
> 
> 赞同：4
> 
> 时间：2012-05-14T06:26:01.013
> 
> 标签：windows-8, winrt-xaml

我在 Store API 和 Launchers 集合上都查看了 MSDN，似乎找不到可以在 Marketplace 应用程序中打开应用程序供用户评分的任务或启动器，[因为我们可以很容易地做到在 Windows Phone 7](http://www.nickharris.net/2010/11/marketplacereviewtask/)中。是否有另一种方法可以轻松地让用户留下评论/评分，或者我们是否必须等到 MS 提供这个，或者它已经存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T19:54:43.810

我相信，或者我应该说“我希望”，“评分和评论”命令会自动出现在从商店下载的所有应用程序的设置魅力下。

谁能证实这一点？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T21:24:27.730

是的，看起来你是对的，在应用程序设置指南（Windows 应用商店应用程序）[http://msdn.microsoft.com/en-us/library/windows/apps/Hh770544.aspx#user_experience](http://msdn.microsoft.com/en-us/library/windows/apps/Hh770544.aspx#user_experience)中，在魅力中说在 Rate & Review 下设置，用户可以对您的应用程序进行评分和审查。

但是：“只有通过 Windows 应用商店安装的应用程序才有评分和评论入口点。”

# spring - JSF-SPRING-HIBERNATE 架构 - 与支持 bean 相关的最佳实践

> ID：10578348
> 
> 赞同：6
> 
> 时间：2012-05-14T06:26:34.603
> 
> 标签：spring, hibernate, orm, javabeans, backing

我正在开发一个 Web 项目，经过大量研究后，我决定继续使用 JSF+Primefaces、Spring 和 Hibernate 方法。在设计我的项目架构时，我已经完成了以下方法：

Actor --> JSF+PrimeFaces 页面 ---> Backing Bean --> Service Bean --> Dao --> Hibernate

*   Service Bean 和 DAO 是带有依赖注入的 spring bean。

我现在关心的是支持 bean：我计划根据需要呈现的页面类型为 UI 页面使用多个支持 bean。

现在例如：对于一个新的用户注册页面，我有使用 UserBackingBean 的 UserProfile.xhtml。UserBackingBean 有 Spring 注入的 UserServiceBean。UserServiceBean 有 Spring 注入的 UserDao。

现在在 UserBackingBean 中，当用户从 UserProfile.xhtml 输入表单数据时，我将不得不填充 User.java 域（ORM）对象。

a) 对此的最佳做法是什么？我应该在 UserBackingBean 的构造函数中初始化 User.java 吗？这是正确的方法吗？请建议是否有其他出路？

b）还请就我为我的项目决定的上述架构提出建议？这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:14:44.343

我遵循的一般规则是事务边界在服务 bean 中标记，因此我不喜欢在服务之外修改休眠 POJO，因为我不知道是否有事务已经在运行。因此，从支持 bean 中，我将调用服务层传入参数，服务层需要构建休眠 pojo 并保存它、更新它等等。

另一种方法是让您的支持 bean 实现由服务层定义的接口，然后将支持 bean 传递给服务层。例如。

```
public interface UserInfoRequest {
     public String getName();
}

@Service
public class SomeSpringService {

   @Transactional(.....) 
   public void registerNewUser(UserInfoRequest request)
   {

   }

}

public class SomeBackingBean implements UserInfoRequest {

    private SomeService someSpringService; 

    public void someMethodBoundToSJF()
    {
         this.someSpringService.registerNewUser(this); 
    }
} 
```

关于你的最后一个问题，我不是 JSF 的粉丝，我认为 JSF 从根本上是有缺陷的，因为它是一个基于服务器组件的框架。所以我反对 JSF 的论点是反对基于服务器端组件的框架的通用论点。

基于服务器端组件的框架的主要缺陷是您无法控制组件将输出什么，这意味着您被组件的外观所困扰，如果您想要看起来不同的东西，您必须编写自己的组件，或者您有修改现有组件。Web 浏览器目前正在快速发展，添加了可以真正提高应用程序 UI 质量的新功能，但对您而言，您必须直接编写 HTML、CSS 和 JavaScript，而服务器端组件使这变得更加困难。

客户端组件架构就在这里，比在服务器端做组件要好得多。这是我推荐的堆栈。

客户端架构：

*   jquery.js - 使所有浏览器看起来与 JavaScript 相同的基本库
*   bone.js + underscore.js - 基于高级客户端组件的架构
*   handlebars.js - 用于客户端模板
*   Twitter bootstrap - 获得一套不错的 CSS 和小部件入门集

您使用 HTML、CSS 和 JavaScript 编写代码，这些代码组织为使用 AJAX 与服务器端模型对话的主干视图。您可以通过足够的结构完全控制客户端用户体验，从而真正制作出可重用的代码。

服务器端架构：

*   注解驱动的 Spring MVC、服务和 Dao（@Controller、@Service、@Repository）
*   按类型自动装配的 Spring 组件扫描 (@Autowired, @Inject)
*   AspectJ 加载时间编织或编译时间编织
*   休眠
*   雄猫 7
*   JSP 作为 Spring MVC 的视图技术（是的，它很笨拙，但您不会创建太多 jsp 页面，主要用于 usng <% @inculde > 指令

工具： - Spring Tool 套件 - JRebel（这样您就不必启动和停止服务器）它确实物有所值 - Tomcat 7

# c# - 如何将json对象转换为字符串

> ID：10578351
> 
> 赞同：1
> 
> 时间：2012-05-14T06:26:55.263
> 
> 标签：c#

在这里，我有 json 字符串，我想从这个 json 字符串中获取一个特定的键和值。所以我为此使用了 javascript 序列化程序。下面是我在 C#.Net 中使用的代码。

```
string strProfile = fbApi.GetForStr("/statefarm/feed/");
var jss = new JavaScriptSerializer();
var dictionary = (IDictionary<string, object>)jss.DeserializeObject(strProfile);  
object keyvalue = (object)dictionary["paging"]; 
string data = keyvalue.ToString(); 
```

当我这样做时，我无法从 jsonstring 中获取 keyvale 对。如果我写

```
string keyvalue = (string)dictionary["paging"]; 
```

代替

```
object keyvalue = (object)dictionary["paging"]; 
string data = keyvalue.ToString(); 
```

遇到异常

> 'system.object'类型的对象类型'system.string'

为此要做什么以及如何编写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:46:12.130

我假设您在此处使用一些 SDK/您的自定义代码来使用 Facebook API。[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)是最好的方法，除非您不想最终陷入键值配对 JSON 的混乱局面。

尝试这个。

```
var api = new FacebookClient
{
    AccessToken = accessToken,
    AppId = AppID,
    AppSecret = AppSecret
};
dynamic result = api.Get("me/posts");
string JsonConvert.SerializeObject(result, new KeyValuePairConverter()) 
```

或为避免混淆，只需将其添加到您的代码中

```
object keyvalue = (object)dictionary["paging"];
JsonConvert.SerializeObject(keyvalue , new KeyValuePairConverter()); 
```

NewtonSoft.Json.dll也可作为 Nuget 包使用*。*

# c# - 有谁知道如何为 Windows Phone 7.1 应用程序实现语音/语音转文本？

> ID：10578357
> 
> 赞同：0
> 
> 时间：2012-05-14T06:27:13.857
> 
> 标签：c#, web-services, windows-phone-7.1, speech-recognition, voice-recognition

我已经尝试在整个互联网上搜索，但它似乎不可用。即使您可以为我提供基于 Web 的 V 到 T 转换的代码示例，我也会很感激您的帮助。即使是 Phonegap 方式也很感激谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:30:25.483

最后，我使用第三方库的 Dragon SDK 实现了语音到文本，对于文本到语音，我使用了一个 Web 服务，我们使用 SAPI 处理文本

# php - mysql关节是可以的吗？

> ID：10578358
> 
> 赞同：1
> 
> 时间：2012-05-14T06:27:20.143
> 
> 标签：php, mysql, mysqli

我有两个表，一个表包含站 id 和站名称，另一个表包含 id、名称、startStationId、endStationId。我通过使用该 id 知道第二个表的 id，我需要获取第二个表的所有详细信息以及相应的 startStationId、endStationId 的站名。

```
ex: table1
---------------------------------
slNo staionId staionName
---------------------------------
1     0012     Bangalore ,
2     0014     Chennai ,
3     0015     Mumbai
---------------------------------

Table 2:
------------------------------------------
Id   Name    startStationId   endStationId
-------------------------------------------
123  Dhinesh   0014             0015
------------------------------------------- 
```

例如，我知道第二个表 id(123).. 所以我想通过使用 id 来获取所有结果，结果是。

Id =>123，名称 => Dhinesh，StartStaion =>Chennai，Endstation=>Mumbai。

我们如何在一个查询中编写...？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T06:33:49.370

试试这个。

```
SELECT t2.Id,t2.name,t1.StationName,t3.StationName
FROM table2 t2
INNER JOIN table1 t1 ON t2.startStationId = t1.stationId
INNER JOIN table1 t3 ON t2.endStationId = t3.stationId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:31:34.170

```
SELECT t2.Id, t2.Name, tstart.stationName , tend.stationName 
FROM table2 as t2 
INNER JOIN table1 as tstart  ON t2.startStationId =  tstart.stationId
INNER JOIN table1 as tend  ON t2.endStationId = tend.stationId 
```

这应该工作

# c++ - 在编译时确定整数类型的位数

> ID：10578359
> 
> 赞同：7
> 
> 时间：2012-05-14T06:27:21.347
> 
> 标签：c++

**注意：我在**[`msg(long)` 和候选 `msg(int32_t)` 和 `msg(int64_t)` 等函数](https://stackoverflow.com/questions/10579544/ambiguous-overload-of-functions-like-msglong-with-candidates-msgint32-t)的模糊重载中添加了一个类似但大大简化的问题版本。该版本具有在单个文件中包含完整可编译示例的优点。

# 问题

我有一个 C 库，其功能如下

```
obj_from_int32(int32_t& i);
obj_from_int64(int64_t& i);
obj_from_uint32(uint32_t& i);
obj_from_uint64(uint64_t& i); 
```

在这种情况下，类型`int32_t`等*不是*那些`std`- 它们是实现定义的，在这种情况下是一个字符数组（在下面的示例中，我省略了转换 - 它不会改变关于将整数类型映射到基于整数类型的位数的特定函数）。

我有第二个 C++ 接口类，它有像这样的构造函数

```
MyClass(int z);
MyClass(long z);
MyClass(long long z);
MyClass(unsigned int z);
MyClass(unsigned long z);
MyClass(unsigned long long z); 
```

注意，我不能用`std::int32_t`样式类型替换这个界面——如果可以的话，我不需要问这个问题；）

问题是如何`obj_from_`根据整数类型的位数调用正确的函数。

# 建议的解决方案

我提出了两个建议的解决方案，因为没有杀手解决方案浮现在列表的顶部，并且有一些被破坏了。

## 解决方案 1

由[Cheers 和 hth 提供。- 阿尔夫](https://stackoverflow.com/users/464581/cheers-and-hth-alf)。从这一点开始的评论是我自己的 - 随时评论和/或编辑。

*优点* - 相当简单（至少与 相比`boost::enable_if`） - 不依赖 3rd 方库（只要编译器支持`tr1`）

*缺点** - 如果需要更多功能（如`anotherObj_from_int32`等），则需要更多代码

这个解决方案可以在下面找到 - 看看，它很漂亮！

## 解决方案 2

*好处*

*   函数完成后，添加需要转换的`ConvertFromIntegral`新函数是微不足道的 - 只需编写一组重载 on`int32_t`和`int64_t`无符号等价物。

*   仅将模板的使用保留在一个地方，它们不会随着技术的重复使用而传播。

**缺点**

*   可能过于复杂，使用`boost::enable_if`. 仅在一次出现的事实中有所缓解。

由于这是我自己的，我不能接受它，但如果你认为它很整洁，你可以投票赞成（显然有些人根本*不*认为它很整洁，这就是反对它的原因，我想！）感谢所有谁贡献了想法！

该解决方案涉及从`int`、到`long`和的转换函数（对于无符号版本也类似）。这与另一组在 上重载的函数和无符号等效函数相结合。这两个函数可以组合，但是第一个转换函数构成了一个方便的实用程序集，可以重用，然后第二个函数集非常简单。`long long``int32_t``int64_t``int32_t``int64_t`

```
// Utility conversion functions (reuse wherever needed)
template <class InputT>
typename boost::enable_if_c<sizeof(InputT)==sizeof(int32_t) && boost::is_signed<InputT>::value,
 int32_t>::type ConvertFromIntegral(InputT z) { return static_cast<int32_t>(z); }

template <class InputT>
typename boost::enable_if_c<sizeof(InputT)==sizeof(int64_t) && boost::is_signed<InputT>::value, 
int64_t>::type ConvertFromIntegral(InputT z) { return static_cast<int64_t>(z); }

template <class InputT>
typename boost::enable_if_c<sizeof(InputT)==sizeof(uint32_t) && boost::is_unsigned<InputT>::value, 
uint32_t>::type ConvertFromIntegral(InputT z) { return static_cast<uint32_t>(z); }

template <class InputT>
typename boost::enable_if_c<sizeof(InputT)==sizeof(uint64_t) && boost::is_unsigned<InputT>::value, 
uint64_t>::type ConvertFromIntegral(InputT z) { return static_cast<uint64_t>(z); }

// Overload set (mock implementation, depends on required return type etc)
void* objFromInt32 (int32_t i)   { obj_from_int32(i); }
void* objFromInt64 (int64_t& i)  { obj_from_int64(i); }
void* objFromUInt32(uint32_t& i) { obj_from_uint32(i); }
void* objFromUInt64(uint64_t& i) { obj_from_uint64(i); }

// Interface Implementation
MyClass(int z) : _val(objFromInt(ConvertFromIntegral(z))) {}
MyClass(long z): _val(objFromInt(ConvertFromIntegral(z))) {}
MyClass(long long z): _val(objFromInt(ConvertFromIntegral(z))) {}
MyClass(unsigned int z): _val(objFromInt(ConvertFromIntegral(z))) {}
MyClass(unsigned long z): _val(objFromInt(ConvertFromIntegral(z))) {}
MyClass(unsigned long long z): _val(objFromInt(ConvertFromIntegral(z))) {} 
```

解决方案的简化（单个可编译`.cpp`！）版本在[“msg（long）”等函数的模糊重载与候选“msg（int32_t）”和“msg（int64_t）”中给出](https://stackoverflow.com/questions/10579544/ambiguous-overload-of-functions-like-msglong-with-candidates-msgint32-t)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T02:25:29.207

鉴于第 3^方功能……

```
void obj_from_int32( int32_bytes_t& i );
void obj_from_int64( int64_bytes_t& i );
void obj_from_uint32( uint32_bytes_t& i );
void obj_from_uint64( uint64_bytes_t& i ); 
```

您可以为内置类型调用“正确”的此类函数，如下所示：

```
template< int nBytes, bool isSigned >
struct ThirdParty;

template<>
struct ThirdParty< 4, true >
{
    template< class IntegralT >
    static void func( IntegralT& v )
    { obj_from_int32( v ) }    // Add whatever conversion is required.
};

// Etc., specializations of ThirdParty for unsigned and for 8 bytes.

template< class IntegralT >
void myFunc( IntegralT& v )
{ ThirdParty< sizeof( v ), std::is_signed< IntegralT >::value >::func( v ); } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T09:02:11.370

正如我们在链接问题中发现的那样，这里的长是歧义的原因。线

`MyClass(long z): _val(objFromInt(z)) {}`

应该改为：

`MyClass(long z): _val(sizeof(long) == 4 ? static_cast<int32_t>(z) : static_cast<int64_t>(z)))) {}`

请注意，在 64 位 gcc 上使用 long long 可能会遇到类似的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T00:42:50.103

与其重载，不如说模式匹配呢？使用`boost::enable_if`和帮助模板来选择您正在寻找的操作类型？

像这样的东西：

```
#include <boost/utility/enable_if.hpp>
#include <boost/type_traits/is_integral.hpp>
#include <iostream>

template <typename T, typename Dummy=void> struct helper;

// Handle signed integers of size 1 (8 bits)
template <typename T> struct helper<T, 
    typename boost::enable_if_c<
        boost::is_integral<T>::value && 
        (sizeof(T)==1) &&
        (static_cast<T>(-1) < static_cast<T>(0)) >::type>
{
    static void do_stuff(T const& ) {std::cout<<"signed, size 1"<<std::endl;}
};

// Handle unsigned integers of size 1 (8 bits)
template <typename T> struct helper<T, 
    typename boost::enable_if_c<
        boost::is_integral<T>::value &&
        (sizeof(T)==1) &&
        (static_cast<T>(-1) > static_cast<T>(0)) >::type>
{
    static void do_stuff(T const& ) {std::cout<<"unsigned, size 1"<<std::endl;}
};

// Handle signed integers of size 2 (16 bits)
template <typename T> struct helper<T, 
    typename boost::enable_if_c<
        boost::is_integral<T>::value && 
        (sizeof(T)==2) &&
        (static_cast<T>(-1) < static_cast<T>(0)) >::type>
{
    static void do_stuff(T const& ) {std::cout<<"signed, size 2"<<std::endl;}
};

// And so on and so forth....

// Use a function for type erasure:
template <typename T> void do_stuff(T const& value)
{
    helper<T>::do_stuff(value);
}

int main()
{
    do_stuff(static_cast<unsigned char>(0)); // "unsigned, size 1"
    do_stuff(static_cast<signed short>(0));  // "signed, size 2"
} 
```

[在http://ideone.com/pIhdq](http://ideone.com/pIhdq)上更完整的列表（并证明它至少与 GCC 一起工作）。

编辑：或更简单，但覆盖面可能更少：（使用标准整数类型）

```
template <typename T> struct helper2;
template <> struct helper2<uint8_t> {static void do_stuff2(uint8_t ) {...}};
template <> struct helper2<int8_t> {static void do_stuff2(int8_t ) {...}};
template <> struct helper2<uint16_t> {static void do_stuff2(uint16_t ) {...}};
template <> struct helper2<int16_t> {static void do_stuff2(int16_t ) {...}};
// etc.
template <typename T> void do_stuff2(T value) {helper2<T>::do_stuff2(value);} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T00:57:35.373

正如其他答案中所指出的，这可以在运行时使用`if(sizeof(int)==sizeof(int32_t))`样式分支轻松解决。要在编译时执行此操作， [`boost::enable_if`](http://www.boost.org/doc/libs/1_49_0/libs/utility/enable_if.html)可以使用。

```
template <class InputT>
typename boost::enable_if_c<sizeof(InputT)==sizeof(int32_t) && boost::is_signed<InputT>::value,
 int32_t>::type ConvertIntegral(InputT z) { return static_cast<int32_t>(z); }

template <class InputT>
typename boost::enable_if_c<sizeof(InputT)==sizeof(int64_t) && boost::is_signed<InputT>::value, 
int64_t>::type ConvertIntegral(InputT z) { return static_cast<int64_t>(z); }

template <class InputT>
typename boost::enable_if_c<sizeof(InputT)==sizeof(uint32_t) && boost::is_unsigned<InputT>::value, 
uint32_t>::type ConvertIntegral(InputT z) { return static_cast<uint32_t>(z); }

template <class InputT>
typename boost::enable_if_c<sizeof(InputT)==sizeof(uint64_t) && boost::is_unsigned<InputT>::value, 
uint64_t>::type ConvertIntegral(InputT z) { return static_cast<uint64_t>(z); } 
```

任何需要将整数类型转换为`int32_t`,`int64_t`或简单调用的`uint32_t`地方：`uint64_t`

```
ConvertIntegral(long(5));  // Will return a type compatible with int32_t or int64_t 
```

该`ConvertIntegral`函数可以与`int32_t`和`int64_t`重载集组合以获得完整的解决方案。或者，所示技术可以内置到重载集。

此外，可以通过禁用非整数类型来进一步增强上述功能。有关使用这些函数的完整示例，请参阅[带有候选 `msg(int32_t)` 和 `msg(int64_t)` 的函数的模糊重载，例如 `msg(long)`](https://stackoverflow.com/questions/10579544/ambiguous-overload-of-functions-like-msglong-with-candidates-msgint32-t)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T06:49:54.487

歧义很容易源于有符号和无符号类型的重载。例如，给定

```
void foo(unsigned int);
void foo(long); 
```

然后是模棱两可的，因为从两者`foo(0)`的转换（或者可能是促销）并且排名相同。`int``unsigned int``long`

如果您使用使用无符号类型的构造函数重载（并且您关心这一点），请选择一个符号，或者为每个符号编写两个重载集。

# java - 从哪里开始 eclipse 插件编程？

> ID：10578360
> 
> 赞同：-1
> 
> 时间：2012-05-14T06:27:40.007
> 
> 标签：java, eclipse-plugin, rtc

我是`Java`编程`Eclipse`新手。
我的工作要求我在**RTCversion3**`Eclipe plugin programming`上使用**RTC 服务器和客户端**。 谁能指导我从哪里开始？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:34:09.743

您可以参考这些教程来了解如何开始 eclipse 插件开发。

[http://www.vogella.com/articles/EclipsePlugIn/article.html](http://www.vogella.com/articles/EclipsePlugIn/article.html)

[http://www.eclipsepluginsite.com/](http://www.eclipsepluginsite.com/)

[http://onjava.com/pub/a/onjava/2005/02/09/eclipse.html](http://onjava.com/pub/a/onjava/2005/02/09/eclipse.html)

[http://www.eclipse.org/articles/Article-Your%20First%20Plug-in/YourFirstPlugin.html](http://www.eclipse.org/articles/Article-Your%20First%20Plug-in/YourFirstPlugin.html)

[http://scg.unibe.ch/archive/projects/Bals10b-EclipsePlugins.pdf](http://scg.unibe.ch/archive/projects/Bals10b-EclipsePlugins.pdf)

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:54:15.867

如果您有一个现有的 Eclipse 并且想要添加 RTC3 功能，您可以考虑将 RTC3 Eclipse 插件添加到您当前的 Eclipse 设置中：

请参阅“[使用 Installation Manager 将 Rational Team Concert 客户端 for Eclipse 3.0.1 安装到现有的 Eclipse 3.6.x 中](https://jazz.net/library/article/708)”**

# java - .jar 不运行外部程序

> ID：10578361
> 
> 赞同：0
> 
> 时间：2012-05-14T06:27:43.907
> 
> 标签：java, eclipse

所以我有一个在 Eclipse 中使用 sphinx 语音识别制作的 java 项目。如果我说某个词，那么它会运行一个 .bat 文件。

```
if (resultText.equals("word")) {

    Runtime runtime = Runtime.getRuntime();
    try {
        runtime.exec("C:/c.bat");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

在 Eclipse 中它工作正常，但是在我导出 .jar 并运行它之后，如果我说那个特定的词，它就不会运行那个 .bat。那么有什么想法为什么这只从eclipse而不是从命令行运行我的.bat文件？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:32:51.673

我对此不确定，但至少尝试一次此解决方案。

尝试将 .bat 文件路径指定为`C:\\c.bat`，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:41:58.330

尝试添加类似：

```
File f = new File("c:/c.bat");
if(f.exists()) {
  // execute the file
  Process process = runtime.exec(f.getAbsolutePath());
  process.waitFor();
  InputStream stdout = process.getInputStream();
  InputStream stderr = process.getErrorStream();
  // check the streams for errors
} else {
  // log error
} 
```

*hth*

# c# - Aforge 斑点检测

> ID：10578365
> 
> 赞同：2
> 
> 时间：2012-05-14T06:28:19.740
> 
> 标签：c#, blob, aforge

如何从视频中检测非移动 Blob？

让我们考虑一下我有一个视频和一个初始背景帧位图。是否可以检测到不移动的斑点/对象？并围绕该对象绘制一个矩形？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-05T04:10:23.893

这让我想起了一种在地铁上检测被遗忘物体的算法。如果我没记错的话，您想检测没有移动且不在初始背景上的物体，对吗？您可以应用这种方法：

使用这样的初始图像（找不到真正空的地铁图像）：

![在此处输入图像描述](../Images/1a6cb86989e3aa3cb783907f3000ebed.png)

还有一个添加了静态对象（垃圾桶）的图像，地铁在移动，一个人在等待，可能会移动一点：

![在此处输入图像描述](../Images/35eb5675ab75a1b711eec5e99c84647e.png)

在 Image>ThresholdDifference ( [http://www.aforgenet.com/framework/docs/html/322123cf-39df-0ae8-6434-29cceb6a54e1.htm](http://www.aforgenet.com/framework/docs/html/322123cf-39df-0ae8-6434-29cceb6a54e1.htm) ) 之后，我们会得到类似：

![在此处输入图像描述](../Images/ff4bbe928680b900877434dfe0d34a2c.png)

注意废物如何与其他不存在的物体一起出现。如果你多次应用这个类似的过程，假设每 10 秒一次，然后一个图像>相交（[http://www.aforgenet.com/framework/docs/html/7244211d-e882-09b1-965d-f820375af8be.htm](http://www.aforgenet.com/framework/docs/html/7244211d-e882-09b1-965d-f820375af8be.htm)）你几分钟后将以这样的方式结束：

![在此处输入图像描述](../Images/de81beb9ba02f7647b546d9990ef1f14.png)

[您可以使用 Image>Connected Component Labeling ( http://www.aforgenet.com/framework/docs/html/240525ea-c114-8b0a-f294-508aae3e95eb.htm](http://www.aforgenet.com/framework/docs/html/240525ea-c114-8b0a-f294-508aae3e95eb.htm) )轻松获取此对象的坐标

这种方法的缺点：

*   需要一些时间（如果您每 10 秒拍摄一次快照，则需要几分钟，更频繁的快照需要几秒钟）来检测对象。
*   检测与背景颜色相似的物体将花费更多时间，您可以在罐子的上部很容易注意到这个缺点，它也是白色的，就像墙壁一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T07:36:33.233

这是我心中的一个解决方案，我不确定能否正常工作：

1.  运行任何预先需要的过滤器和算法以准备进行斑点检测。
2.  运行 blob 检测算法并将所有 blob 保存在一个数组中。
3.  找到每个斑点的中心和区域大小。
4.  将当前帧 blob 的数据与以前的 blob（它们的中心和大小）进行比较
5.  如果更改在可接受的范围内，则它们是未移动的 blob。

# wordpress - Wordpress wp-admin 重定向到 https

> ID：10578369
> 
> 赞同：15
> 
> 时间：2012-05-14T06:28:36.997
> 
> 标签：wordpress, http, redirect, https

我有这个问题，当我尝试登录我的 wp 仪表板（wp-admin）时，它会重定向到 https 连接。

当我输入 websitename.com/wp-admin 时，它会显示登录页面，但 url 不同。它说，websitename.com/login.php?redirect_to=https://websitename.com&reauth=1。

我从来没有做过任何奇怪的事情，我只是在编辑插件，后来这件事发生了。

这有什么问题？

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2018-05-24T23:27:15.357

因此，如果您仅在转到 ../wp-admin 时遇到此问题，那是因为您将强制 ssl admin 设置为 true。您可以在 WordPress 站点根目录的 wp-config.php 中找到它，您需要将此选项设置为 false。

```
define('FORCE_SSL_ADMIN', false); 
```

我假设您在 WordPress 数据库中 wp_options 表中的 siteurl 设置为 http:// 地址。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-14T08:30:37.677

在数据库中打开您的 wp_options 表。

搜索 siteurl 并检查 siteurl 的选项值。我认为该网址被重定向到https。将其更改为http。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-04-05T09:33:57.653

老问题，但这里从未提到过：任何用户都可以选择使用 SSL。

你可能想检查你的`wp_usermeta`桌子：

```
mysql> select * from wp_usermeta where meta_key = 'use_ssl';
+----------+---------+----------+------------+
| umeta_id | user_id | meta_key | meta_value |
+----------+---------+----------+------------+
|        9 |       1 | use_ssl  | 1          |
+----------+---------+----------+------------+ 
```

`use_ssl``0`如果您不想被重定向，则需要设置为（对本地开发有用）：

```
update wp_usermeta set meta_value = 0 where meta_key = 'use_ssl' and user_id = YOUR_ID; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-14T07:45:21.410

chrome 和 chromium 44.0.2403.89 中有一个错误，这也导致了这个错误。特别是对于使用 Wocomerce 的网站。但是所有使用 PHP 的框架都可能受到影响。

这与作者的问题不同，但我认为谷歌会引导你们中与我有同样问题的人。

在下面的链接中找到并描述的问题描述是 chrome 开始向所有请求添加 'HTTPS:1' 标头。这导致 PHP 处理标头和检查 ssl 的方式出现问题。

有一个补丁可以将标头“HTTPS”重命名为“upgrade-insecure-requests”。

[https://ma.ttias.be/chrome-44-sending-https-header-by-mistake-break-web-applications-everywhere/](https://ma.ttias.be/chrome-44-sending-https-header-by-mistake-breaking-web-applications-everywhere/)

# eclipse - 编译时 JiBX Eclipse 插件错误

> ID：10578370
> 
> 赞同：0
> 
> 时间：2012-05-14T06:28:39.663
> 
> 标签：eclipse, jibx

我正在尝试将 JiBX 与 Ecpise Indigo 和用于 Eclipse 1.2.3 的 JiBX 插件一起使用。当 eclipse 插件编译绑定时，我得到以下输出和错误：输出：

```
JiBX build begin @ Mon May 14 08:22:56 CEST 2012
JiBX build Workspace invoked FULL build
JiBX bindAll begin
JiBX bindAll classpath: 
    .
    C:\Programme\Java\jre6\lib\charsets.jar
    C:\Programme\Java\jre6\lib\ext\QTJava.zip
    C:\Programme\Java\jre6\lib\ext\dnsns.jar
    C:\Programme\Java\jre6\lib\ext\localedata.jar
    C:\Programme\Java\jre6\lib\ext\sunjce_provider.jar
    C:\Programme\Java\jre6\lib\ext\sunmscapi.jar
    C:\Programme\Java\jre6\lib\ext\sunpkcs11.jar
    C:\Programme\Java\jre6\lib\jce.jar
    C:\Programme\Java\jre6\lib\jsse.jar
    C:\Programme\Java\jre6\lib\resources.jar
    C:\Programme\Java\jre6\lib\rt.jar
    ..eclipse\configuration\org.eclipse.osgi\bundles\772\1\.cp\lib\bcel.jar
    ..eclipse\configuration\org.eclipse.osgi\bundles\772\1\.cp\lib\jibx-bind-1.2.3.jar
    ..eclipse\configuration\org.eclipse.osgi\bundles\772\1\.cp\lib\jibx-run-1.2.3.jar
    \JiBX-Mapping\bin
    \JiBX-Mapping\lib\bcel.jar
    \JiBX-Mapping\lib\jibx-bind.jar
    \JiBX-Mapping\lib\jibx-run.jar
    \JiBX-Mapping\lib\stax-api.jar
    \JiBX-Mapping\lib\wstx-asl.jar
    \JiBX-Mapping\lib\xpp3.jar
JiBX doMappings begin
JiBX doMappings using these mapping files: 
    \JiBX-Mapping\src\data.xml
    \JiBX-Mapping\src\binding.xml
JiBX parseMappedClasses begin
JiBX parseMappedClasses watching these mapped classes:
    \JiBX-Mapping\bin\Customer.class
JiBX parseMappedClasses end
JiBX doMappings end
Error running binding compiler 
```

错误：

```
Errors occurred during the build.
Errors running builder 'JiBX Binding Builder' on project 'JiBX-Mapping'. 
```

我的类路径是：JiBX-Mapping/src/

我的 JiBX 映射路径：src/

代码来自 JiBX-Example 这里：http: [//jibx.sourceforge.net/binding/tutorial/binding-start.html](http://jibx.sourceforge.net/binding/tutorial/binding-start.html)

有谁知道这里有什么问题？

最好的问候投票

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:58:10.360

我不能说你的情况出了什么问题，但你可以通过在 eclipse 项目属性中打开 Verbose Compilation 来获取更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T04:56:11.077

投票，你用的是什么版本的java？使用 jdk 1.7 时出现问题。如果您使用的是 jdk 1.7，只需将源兼容性更改为 1.6。大学教师

# dreamweaver - 如何恢复 Dreamweaver 中删除的文件？

> ID：10578373
> 
> 赞同：1
> 
> 时间：2012-05-14T06:28:49.813
> 
> 标签：dreamweaver

我在 Dreamweaver 中意外删除了文件。如何恢复文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-16T09:41:22.157

如果它是本地文件，它最终会出现在您的回收站中（至少在 Windows 上）。

通过 FTP 删除的文件会丢失，只能通过存储恢复软件恢复。

*（我知道问题是2岁）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:31:46.477

我使用 Dreamweaver 已经很多年了。我不知道这个功能。以下是我看到的可能性：

*   如果你使用它，你应该从你的存储库中恢复文件。
*   或者，也许您也可以尝试使用 Windows 恢复功能恢复该文件。
*   您可以尝试运行文件恢复程序。
*   如果这不是您的工作，请从其原始来源中恢复该文件。
*   从该文件在线的网络空间中恢复该文件。

# c# - 如何在两个动态加载的用户控件之间进行数据绑定？

> ID：10578386
> 
> 赞同：0
> 
> 时间：2012-05-14T06:29:58.563
> 
> 标签：c#, .net, wpf, xaml, data-binding

在我用 XAML 编写的 WPF 主窗口中，我有一个侧面内容演示器和一个主内容演示器。每个区域都可以根据用户在应用程序中的操作从代码中动态加载几个不同的用户控件之一。

我的问题是这个。假设侧面内容用户控件将始终包含一个名为“SideBox”的文本框。假设主内容用户控件将始终包含一个名为“MainBox”的文本框。如何将“MainBox”的值绑定到“SideBox”的值，而不管我加载的主用户控件和侧用户控件的组合是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:56:48.890

为两个 UserControls 提供另一个可以绑定到的依赖属性，或者

一些xml：

```
<local:Uc1 x:Name="uc1" DataContext="{Binding ElementName=uc2, Path=Thing}" />
<local:Uc2 x:Name="uc2" /> 
```

这也可以在代码中完成。

或将两个 UserControl 绑定到同一个 ViewModel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:57:48.090

考虑到您正在使用 MVVM，通过 2 个底层 ViewModel 的属性绑定两个文本框，其中 ViewModel 相互更新将正常工作。

# linux - 用于收集进程的线程转储日志的 unix 脚本

> ID：10578388
> 
> 赞同：0
> 
> 时间：2012-05-14T06:30:09.850
> 
> 标签：linux, bash, thread-dump, jstack

我正在尝试生成有关 HashMap.put 函数的问题。我编写了一个测试代码，它将运行 100 多个线程。通过使用 jstack 或 kill 我能够获取我的进程的特定线程的线程转储。 .问题是我无法立即捕获线程转储，我希望将所有线程转储记录在一个文件中，直到进程结束。是否有任何 linux 命令或 shell 脚本可以编写来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:58:41.720

```
#!/bin/bash

if [ $# -eq 0 ]; then
    echo >&2 "Usage: jstackSeries  [ <count> [ <delay> ] ]"
    echo >&2 "    Defaults: count = 10, delay = 1 (seconds)"
    exit 1
fi

pid=$1          # required
count=${2:-10}  # defaults to 10 times
delay=${3:-1} # defaults to 1 second

while [ $count -gt 0 ]
do
    jstack $pid >jstack.$pid.$(date +%H%M%S.%N)
    sleep $delay
    let count--
    echo -n "."
done 
```

参考这里：

[http://howtodoinjava.com/2012/12/19/how-to-get-thread-dump-in-linux-using-jstack/](http://howtodoinjava.com/2012/12/19/how-to-get-thread-dump-in-linux-using-jstack/)

# iphone - iPhone - 多个 OpenGL (CAEaglelayer) 视图的屏幕截图

> ID：10578389
> 
> 赞同：2
> 
> 时间：2012-05-14T06:30:12.680
> 
> 标签：iphone, objective-c, opengl-es, xcode4.2, eaglview

我正在参考 GLPaint 应用程序开发绘图应用程序。在这个应用程序中有两个画布视图，一个视图从左向右移动（动画），另一个视图用作背景视图（如图所示）。

![在此处输入图像描述](../Images/985564061d38b3bdd600f4407e52bdd8.png)

我正在使用 CAEAGLLayer 在两个视图中填充颜色（使用子类化技术）。它按预期工作。现在我必须截取完整视图（轮廓和两个 OpenGL 视图）的屏幕截图，但我只获取一个视图（移动视图或背景视图）的屏幕截图。与屏幕截图相关的代码与两个视图相关联，但一次只保存一个视图的内容。

截图代码片段如下。

```
- (UIImage*)snapshot:(UIView*)eaglview{

GLint backingWidth, backingHeight;

// Bind the color renderbuffer used to render the OpenGL ES view
// If your application only creates a single color renderbuffer which is already bound at this point, 
// this call is redundant, but it is needed if you're dealing with multiple renderbuffers.
// Note, replace "_colorRenderbuffer" with the actual name of the renderbuffer object defined in your class.

glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);

// Get the size of the backing CAEAGLLayer
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &backingWidth);
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &backingHeight);
NSInteger x = 0, y = 0, width = backingWidth, height = backingHeight;
NSInteger dataLength = width * height * 4;
GLubyte *data = (GLubyte*)malloc(dataLength * sizeof(GLubyte));
// Read pixel data from the framebuffer
glPixelStorei(GL_PACK_ALIGNMENT, 4);
glReadPixels(x, y, width, height, GL_RGBA, GL_UNSIGNED_BYTE, data);

// Create a CGImage with the pixel data
// If your OpenGL ES content is opaque, use kCGImageAlphaNoneSkipLast to ignore the alpha channel
// otherwise, use kCGImageAlphaPremultipliedLast

CGDataProviderRef ref = CGDataProviderCreateWithData(NULL, data, dataLength, NULL);
CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();
CGImageRef iref = CGImageCreate(width, height, 8, 32, width * 4, colorspace, kCGBitmapByteOrder32Big | kCGImageAlphaPremultipliedLast,
                                ref, NULL, true, kCGRenderingIntentDefault);
// OpenGL ES measures data in PIXELS
// Create a graphics context with the target size measured in POINTS

NSInteger widthInPoints, heightInPoints;
if (NULL != UIGraphicsBeginImageContextWithOptions) {
    // On iOS 4 and later, use UIGraphicsBeginImageContextWithOptions to take the scale into consideration
    // Set the scale parameter to your OpenGL ES view's contentScaleFactor
    // so that you get a high-resolution snapshot when its value is greater than 1.0
    CGFloat scale = eaglview.contentScaleFactor;
    widthInPoints = width / scale;
    heightInPoints = height / scale;
    UIGraphicsBeginImageContextWithOptions(CGSizeMake(widthInPoints, heightInPoints), NO, scale);
}
else {
    // On iOS prior to 4, fall back to use UIGraphicsBeginImageContext
    widthInPoints = width;
    heightInPoints = height;
    UIGraphicsBeginImageContext(CGSizeMake(widthInPoints, heightInPoints));
}
CGContextRef cgcontext = UIGraphicsGetCurrentContext();
// UIKit coordinate system is upside down to GL/Quartz coordinate system
// Flip the CGImage by rendering it to the flipped bitmap context
// The size of the destination area is measured in POINTS
CGContextSetBlendMode(cgcontext, kCGBlendModeCopy);
CGContextDrawImage(cgcontext, CGRectMake(0.0, 0.0, widthInPoints, heightInPoints), iref);

// Retrieve the UIImage from the current context
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
  // Clean up
free(data);
CFRelease(ref);
CFRelease(colorspace);
CGImageRelease(iref);

 return image; 
} 
```

有什么方法可以结合两个 CAEaglelayer 视图的内容吗？

请帮忙。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:11:06.880

您可以单独创建每个视图的屏幕截图，然后将它们组合如下：

```
UIGraphicsBeginImageContext(canvasSize);

[openGLImage1 drawInRect:CGRectMake(0, 0, canvasSize.width, canvasSize.height)];
[openGLImage2 drawInRect:CGRectMake(0, 0, canvasSize.width, canvasSize.height)];

UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

您应该使用适当的 canvasSize 和 frame 来绘制每个生成的 UIImage，这只是您如何做到这一点的一个示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:47:05.760

请参阅[此处](https://stackoverflow.com/a/15777434/373944)了解更好的方法。它基本上允许您将包含所有 OpenGL（和其他）视图的更大视图捕获到一个完全组合的屏幕截图中，该屏幕截图与您在屏幕上看到的相同。

# delphi - 德尔福 XE2：UTF16LE -> UTF8

> ID：10578390
> 
> 赞同：0
> 
> 时间：2012-05-14T06:30:17.510
> 
> 标签：delphi, unicode, utf-8, delphi-xe2, indy

网址：[http ://www.gagalive.kr/livechat1.swf?chatroom=~~~BBQ](http://www.gagalive.kr/livechat1.swf?chatroom=~~~BBQ)

[1]---------------------------------------------------------- --------------------

```
procedure TForm1.FormCreate(Sender: TObject);

begin

 IdTCPClient.Host := '61.97.246.131';

  IdTCPClient.Port := 8080;

  IdTCPClient.Connect;

  IdTCPClient.IOHandler.Write('Ag8m' + Char(0));

  IdTCPClient.IOHandler.Write('LShady|###BBQ' + Char(0));

  IdTCPClient.IOHandler.Write('#' + 'Some Text'  + Char(0));

  IdTCPClient.Disconnect;

end; 
```

* * *

[2]---------------------------------------------------------- --------------------

```
function UTF8FromUTF16_2(sUTF16: UnicodeString): UTF8String; 

begin   

  Result := sUTF16; 

end; 

procedure TForm1.FormCreate(Sender: TObject);

begin

 IdTCPClient.Host := '61.97.246.131';

  IdTCPClient.Port := 8080;

  IdTCPClient.Connect;

  IdTCPClient.IOHandler.Write('Ag8m' + Char(0));

  IdTCPClient.IOHandler.Write('LShady|###BBQ' + Char(0));

  IdTCPClient.IOHandler.Write(UTF8FromUTF16_2('#' + '안녕'  + Char(0)));

  IdTCPClient.Disconnect;

end; 
```

* * *

[1]：工作

[2]：不工作（断线>黑幕：??）

见：[http ://www.gagalive.kr/livechat1.swf?chatroom=~~~BBQ](http://www.gagalive.kr/livechat1.swf?chatroom=~~~BBQ)

UTF8FromUTF16 函数原始 VB 代码：[VB 6.0 -> Delphi XE2 转换](https://stackoverflow.com/questions/10561285/vb-6-0-delphi-xe2-conversion)

帮我.. ：（

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T00:02:51.437

字符串在 XE2 中以 UTF-16 编码。#2 不起作用，因为您传递的`UTF8String`是`UnicodeString`预期的 a，因此 RTL 将在 Indy 看到数据之前执行 UTF-8 -> UTF-16 转换，然后 Indy 会将 UTF-16 数据转换为自己的默认值传输过程中的编码。

如果你想以`UnicodeString`UTF-8 格式传输 a，你必须通过它的`TIdTextEncoding`类告诉 Indy 这样做，例如：

```
procedure TForm1.FormCreate(Sender: TObject); 
begin 
  IdTCPClient.Host := '61.97.246.131'; 
  IdTCPClient.Port := 8080; 
  IdTCPClient.Connect; 
  IdTCPClient.IOHandler.Write('Ag8m'#0); 
  IdTCPClient.IOHandler.Write('LShady|###BBQ'#0); 
  IdTCPClient.IOHandler.Write('#안녕'#0, TIdTextEncoding.UTF8); // <-- here
  IdTCPClient.Disconnect; 
end; 
```

或者：

```
procedure TForm1.FormCreate(Sender: TObject); 
begin 
  IdTCPClient.Host := '61.97.246.131'; 
  IdTCPClient.Port := 8080; 
  IdTCPClient.Connect; 
  IdTCPClient.IOHandler.DefStringEncoding := TIdTextEncoding.UTF8; // <-- here
  IdTCPClient.IOHandler.Write('Ag8m'#0); 
  IdTCPClient.IOHandler.Write('LShady|###BBQ'#0); 
  IdTCPClient.IOHandler.Write('#안녕'#0);
  IdTCPClient.Disconnect; 
end; 
```

如果您不告诉 Indy 使用哪种编码，它将默认为 ASCII，这将损坏/丢失您的 Unicode 数据。

# hadoop - 使用自定义文件格式读取配置单元中的 xml 文件

> ID：10578401
> 
> 赞同：0
> 
> 时间：2012-05-14T06:31:07.650
> 
> 标签：hadoop, hive

我是 Hadoop/Hive 的新手。我正在尝试使用 hive 处理 xml 文件。在谷歌搜索了一段时间后，我遇到了可用于此目的的 xml 文件的自定义 FileFormat 代码。

（这里是自定义 xmlinputformat 类的源代码： [XmlInputFormat.class](https://github.com/apache/mahout/blob/ad84344e4055b1e6adff5779339a33fa29e1265d/examples/src/main/java/org/apache/mahout/classifier/bayes/XmlInputFormat.java)

我为 xmlinputformat 类添加了 jar，并创建了一个示例表：

```
create table person ( 
    name string
    )        
    ROW FORMAT DELIMITED
    FIELDS TERMINATED BY '\t'    
    STORED AS INPUTFORMAT 'com.hadoop.xmlparser.XmlInputFormat'
    OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat'; 
```

我试图从上表中检索数据并得到以下错误：

**执行错误，从 org.apache.hadoop.hive.ql.exec.MapRedTask 返回代码 2**

以下是在 jobtracker 日志中发现的错误：

```
java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at org.apache.hadoop.hive.shims.Hadoop20SShims$CombineFileRecordReader.initNextRecordReader(Hadoop20SShims.java:306)
    at org.apache.hadoop.hive.shims.Hadoop20SShims$CombineFileRecordReader.<init>(Hadoop20SShims.java:269)
    at org.apache.hadoop.hive.shims.Hadoop20SShims$CombineFileInputFormatShim.getRecordReader(Hadoop20SShims.java:366)
    at org.apache.hadoop.hive.ql.io.CombineHiveInputFormat.getRecordReader(CombineHiveInputFormat.java:413)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:371)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:325)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:270)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1127)
    at org.apache.hadoop.mapred.Child.main(Child.java:264)
Caused by: java.lang.reflect.InvocationTargetException
    at sun 
```

以上问题有什么解决办法吗？？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T23:23:36.763

我没有使用过这个特定的 InputFormat，但 Hive 假定记录由 \n 分隔。因此，您需要确保您的 XML 没有 \n。

# php - 如何检查字符串中是否只有一个“@”字符？

> ID：10578402
> 
> 赞同：2
> 
> 时间：2012-05-14T06:31:08.270
> 
> 标签：php, regex, if-statement, preg-match

> **可能重复：**
> [修改正则表达式以验证电子邮件？](https://stackoverflow.com/questions/7443155/modify-regex-to-validate-email)

```
$email = $_POST["email"];

if(preg_match("[@{1}]",$email))
    echo "There is only one @ symbol";

if(preg_match("[@{2,}]",$email))
    echo "There is more than one"; 
```

我的问题很简单，但由于我很少使用正则表达式，所以输出不会按照我想要的方式出现。$email 也是发布数据。

如果 $email 有 2 个或更多 @ 符号，那么它将显示不止一个。如果 $email 有 1 个 @symbol，那么它将显示只有 1 个 @ 符号。够容易吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:39:13.657

您的第一个表达式将`@`在任何地方匹配一个；它从不说它必须是唯一的。

您的第二个表达式将匹配两个或多个*连续* `@`符号。当您有两个被其他东西分开时，它不会检测到这种情况。

您需要将“只有一个”或“多个”的概念翻译成与正则表达式兼容的术语：

*   "only one":`@`被非-包围的单曲`@`：`^[^@]*@[^@]*$`

*   “多于一个”：两个`@`被任何东西分开：`@.*@`

以及一个相关且有用的“除了一个之外的任何东西”（即0、2、3、4 ...）的概念，简单地作为对第一个（即`!preg_match('/^[^@]*@[^@]*$/', $email)`）的否定

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:42:08.433

我建议使用`explode`和`count`这样的：

```
if (count(explode('@', $email)) > 2) {
    //here you have 2 or more
} 
```

你想要达到的目标是什么？您真的想知道其中是否只有一个`@`，还是要验证整个电子邮件地址？如果你想验证它，看看这篇文章：[修改正则表达式来验证电子邮件？](https://stackoverflow.com/questions/7443155/modify-regex-to-validate-email)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:10:16.800

```
you need to enclose your regex in delimiters like forward slash(/) or any other char.

$email = $_POST["email"];

if(preg_match("/[@{1}]/",$email))
    echo "There is only one @ symbol"."</br>";

//you have to use preg_match_all to match all chars because preg_match will stop at first occurence of match.

if(preg_match_all("/(\w*@)/",$email,$matches)){             //\w matches all alphanumeric chars, * means 0 or more occurence of preceeding char 
    echo "There is more than one"."</br>";
    print_r($matches);}                                 //$matches will be the array of matches found.
?> 
```

# sql - 将 varchar 值转换为 int 类型时转换失败

> ID：10578404
> 
> 赞同：-2
> 
> 时间：2012-05-14T06:31:19.380
> 
> 标签：sql, visual-studio-2010

我正在尝试使用嵌套 SELECT 语句的 INSERT 语句。两个数据库字段都是`int`类型。

我的声明：

```
energy_command = New SqlCommand("INSERT INTO energy ([ApplicationID], [usage], [policy], [audit], [lighting], [over_lighting], [controls], [turn_off], [energy_star], [weatherize],[thermostat], [natural_light], [air], [renewable_assessment], [on_site_renewable], [HVAC],[renewable_power], [efficient_enroll], [efficient_attain], [other]) " & 
"VALUES ('(SELECT ApplicationID FROM general where Business_Name = """ & txtName.Text & """)', '" & track_usage & "', '" & develop_strategy & "', '" & perform_audit & "', '" & replace_bulbs & "', '" & reduce_lighting & "', '" & lighting_controls & "', '" & not_in_use_policy & "', '" & energy_star & "', '" & weatherize & "', '" & program_thermo & "', '" & natural_light & "', '" & air_quality & "', '" & site_assessment & "', '" & renewable_power & "', '" & HVAC & "', '" & renewable_energy & "', '" & energy_programs & "', '" & energy_certification & "', '" & energy_other & "')", connection)` 
```

我的错误：

> System.Data.SqlClient.SqlException：将 varchar 值 '(SELECT ApplicationID FROM general where Business_Name = "a")' 转换为数据类型 int 时转换失败。

我唯一的想法是它试图将整个`SELECT`语句插入到该`INT`字段中。我错了吗？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:36:37.007

因为你用单引号来引用查询，所以它被认为是一个字符串。您应该删除查询的单引号

```
VALUES ((SELECT ApplicationID FROM general where Business_Name = "'" & txtName.Text & "'"), .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:36:10.280

只需删除查询周围的撇号。

改变：

```
'(SELECT ApplicationID FROM general where Business_Name = """ & txtName.Text & """)' 
```

到：

```
(SELECT ApplicationID FROM general where Business_Name = """ & txtName.Text & """) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T06:45:37.927

另外：如果您想根据`SELECT`来自另一个表的 a 将数据插入到一个表中，则不需要**使用**关键字`VALUES`，而是使用以下样式：

```
INSERT INTO dbo.YourTargetTable(Co1, Col2, ..., ColN)
   SELECT
      Src1, Src2, ...., SrcN
   FROM  
      dbo.YourSourceTableHere
   WHERE
      YourConditionHere 
```

不需要`VALUES`……

# python - 使用 sqlalchemy 在多态图结构中创建依赖于类型的边

> ID：10578408
> 
> 赞同：0
> 
> 时间：2012-05-14T06:32:03.913
> 
> 标签：python, graph, sqlalchemy

我的问题如下。我在 sqlalchemy 中有一个具有多态顶点的有向图结构，我想限制边缘创建类型依赖。以下代码定义了图形结构。

```
from sqlalchemy import Column, ForeignKey, Integer
from sqlalchemy.orm import backref, relationship
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class Edge(Base):
    __tablename__ = 'edge'

    head_id = Column(Integer, ForeignKey('vertex.id'), primary_key=True)
    tail_id = Column(Integer, ForeignKey('vertex.id'), primary_key=True)

class Vertex(Base):
    __tablename__ = 'vertex'

    id = Column( Integer, primary_key=True )
    predecessors = relationship('Vertex', 
                        secondary='edge',
                        primaryjoin="Vertex.id==Edge.head_id",
                        secondaryjoin="Vertex.id==Edge.tail_id",
                        backref='successors')
    type    = Column( String(50) )

    __mapper_args__ = {
        'polymorphic_identity':'Vertex',
        'polymorphic_on':type
    } 
```

图的构建非常简单

```
#creates two vertices with a directed edge from v1 to v2
v1 = Vertex()
v2 = Vertex()
v1.successors.append(v2) # v1->v2 
```

问题是'我如何限制边缘创建类型依赖。例如，允许从 A 类到 B 类的边，但反之则不行。

```
class A(Vertex):
    pass

class B(Vertex):
    pass

v1 = A()
v2 = B()
v1.successors.append(v2) #allowed
v2.successors.append(v1) #forbidden 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:35:21.927

您可以使用[简单验证器](http://docs.sqlalchemy.org/en/rel_0_7/orm/mapper_config.html#simple-validators)：

```
from sqlalchemy.orm import validates

class Vertex(Base):
    # ...

    @validates('successors')
    def validate_successors(self, key, value):
        check_value = True
        # @todo: insert the validation logic here
        if type(self) == B and type(value) == A:
            check_value = False
        assert check_value, 'Invalid Edge: not allowed to link from [{fr}] to [{to}]'.format(fr=type(self).__name__, to=type(value).__name__)
        return value 
```

**edit-1：**添加了将验证委托给派生类的代码示例：

```
class Vertex(Base):
    # ...

    def _validate_successors_impl(self, value):
        return True

    @validates('successors')
    def validate_successors(self, key, value):
        self._validate_successors_impl(value)
        return value

class A(Vertex):
    __mapper_args__ = {'polymorphic_identity': 'A'}

    def _validate_successors_impl(self, value):
        if type(value) == B:
            assert check_value, 'Invalid Edge: not allowed to link from [{fr}] to [{to}]'.format(fr=type(self).__name__, to=type(value).__name__)

class B(Vertex):
    __mapper_args__ = {'polymorphic_identity': 'B'} 
```

# asp.net - 在 vb.net 中使用语句进行目录搜索或 Ldap 功能

> ID：10578411
> 
> 赞同：0
> 
> 时间：2012-05-14T06:32:27.973
> 
> 标签：asp.net, vb.net

我对 VB.net 很陌生。我可以使用 USING 语句来调用目录条目和搜索器，如下所示。

```
Using entry As DirectoryEntry = New DirectoryEntry(String.Format("LDAP://xxx.com.my"))
        entry.AuthenticationType = AuthenticationTypes.Delegation
        entry.Username = username
        entry.Password = password

        Using searcher As New DirectorySearcher(entry)
            searcher.SearchScope = SearchScope.OneLevel
            Try
                Dim results As SearchResult = searcher.FindOne

                success = Not (results Is Nothing)
            Catch ex As Exception
                success = False
                WriteToFile("ValidateADLogin error : " & ex.Message)
            End Try
        End Using
    End Using 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T02:02:49.613

`System.DirectoryServices.DirectoryEntry`并且`System.DirectoryServices.DirectorySearcher`都继承自`System.ComponentModel.Component`实现`IDisposable`接口的 。所以是的，您可以在 Using 语句中使用它们（`IDisposable`这是必需的）。

通常，如果继承链中没有类实现，编译器会发出错误`IDisposable`。

更多信息：

[http://msdn.microsoft.com/en-us/library/system.directoryservices.directoryentry.aspx](http://msdn.microsoft.com/en-us/library/system.directoryservices.directoryentry.aspx) [http://msdn.microsoft.com/en-us/library/system.directoryservices.directorysearcher](http://msdn.microsoft.com/en-us/library/system.directoryservices.directorysearcher)

# javascript - 循环突出显示的文本。

> ID：10578412
> 
> 赞同：0
> 
> 时间：2012-05-14T06:32:44.433
> 
> 标签：javascript

我有一个关于 javascript 的问题，我需要遍历用户选择（突出显示的文本）并从 trl 或 ltr 更改文本方向。这是我所做的：

```
this._execCom("FormatBlock",'<div>');
var node = null;
if (this.area.contentWindow.getSelection) {
    node = this.area.contentWindow.getSelection().anchorNode.parentNode;

}
else if (this.area.contentWindow.document.selection) {
    var range = this.area.contentWindow.document.selection.createRange();
    if (range) {
        node = range.parentElement();
    }
    var walker=this.area.contentWindow.document.createTreeWalker(node, NodeFilter.SHOW_ELEMENT, null, false);
    while (walker.nextNode())
    {
        x=walker.currentNode.tagName;
        if( x == 'DIV')
            walker.currentNode.style.direction="ltr";
    } 
```

这会改变所有 div 的方向，即使它们是否在突出显示的文本中，我只需要对用户选择进行更改。

你能帮我吗 。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:12:44.787

Edit: I misunderstood your question. So you just want the user to be able to click and drag to select which elements should have the 'direction' toggled between ltr and rtl. I have an alternative to using selection ranges, which will be quite painful to use in this solution.

Here, I use jQuery to listen to 'mousemove' events, checking to see if the left mouse button is depressed. If so, I toggle the direction css attribute. I also use a custom data flag to prevent flickering of the elements as you drag the mouse.

There is also a bit in there to prevent the paragraphs from being selected, which may have been your intention but I found annoying. You can just comment out/remove that part if you want them to be able to select the text.

Here's the fiddle: [http://jsfiddle.net/nbWYK/8/](http://jsfiddle.net/nbWYK/8/)

TL;DNR:

```
$(document).on("mousemove", 'p', function(e) {
    var $this = $(this);

    if ($this.data('ignore-direction-toggle')) return;

    if (e.which == 1) {
        $this.data('ignore-direction-toggle', true);
        $this.css({
            'direction': ($this.css('direction') == 'ltr' ? 'rtl' : 'ltr')
        });
    }
}).on('mouseleave', 'p', function(e) {
    var $this = $(this);
    if ($this.data('ignore-direction-toggle')) $this.data('ignore-direction-toggle', null);
}); 
```

# csv - 如何使用 UTF-8 编码将 excel 文件保存为 csv？

> ID：10578417
> 
> 赞同：0
> 
> 时间：2012-05-14T06:33:00.740
> 
> 标签：csv, encoding, vbscript

我一直在为 excel 问题苦苦挣扎。我的 excel 文件（2003 版）中有俄语字符，我想将其保存到 csv。但问题是每当我这样做而不是我得到的俄语字符时？ ?????。在浏览了各种论坛后，我发现问题出在 MS excel 上。

所以现在我想知道，如果我可以编写一个 VB 脚本，它会从所需的单元格中读取字符串，将它们转换为 UTF-8 编码并将其存储在文本文件中。我在这里有两个问题：

1.  我的解决方案是否可行？我不知道它是否可以完成？任何指针都会有帮助。我已经通过网络拖网并找不到任何东西。

2.  由于我对 VB 脚本完全零，请问有人可以帮助我提供示例代码吗？

最重要的是，如果有人知道更好的方法，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:07:26.950

这是一个小 vbscript，它使用 ADO (i) 读取 excel 文件 (ii) 写入 CSV 文件：

```
option explicit

' Reading Excel Files:
' http://support.microsoft.com/kb/257819

dim CONNECTION1
set CONNECTION1 = WScript.CreateObject("ADODB.CONNECTION")
CONNECTION1.Open "Provider=MICROSOFT.JET.OLEDB.4.0;Data Source=C:\Users\Salman\Desktop\input.xls;Extended Properties=""Excel 8.0;HDR=Yes;"""

dim RECORDSET1
set RECORDSET1 = WScript.CreateObject("ADODB.RECORDSET")
RECORDSET1.open "SELECT * FROM [Sheet1$]", CONNECTION1, 3, 1

' Notes:
' CharacterSet 65001 is UTF-8
' add/remove columns and change datatype to match you excel file

dim CONNECTION2
set CONNECTION2 = WScript.CreateObject("ADODB.CONNECTION")
CONNECTION2.Open "Provider=MICROSOFT.JET.OLEDB.4.0;Data Source=C:\Users\Salman\Desktop\;Extended Properties=""text;HDR=Yes;FMT=Delimited;CharacterSet=65001;"""
CONNECTION2.Execute "CREATE TABLE [output.csv] ([English] VARCHAR(200), [Swedish] VARCHAR(200), [Russian] VARCHAR(200), [Chinese Simplified] VARCHAR(200))"

dim RECORDSET2
set RECORDSET2 = WScript.CreateObject("ADODB.RECORDSET")
RECORDSET2.Open "SELECT * FROM [output.csv]", CONNECTION2, 2, 2

do until RECORDSET1.EOF
    RECORDSET2.AddNew
    dim i
    for i = 0 to RECORDSET1.Fields.Count - 1
        WScript.Echo RECORDSET1.Fields(i).Value
        RECORDSET2.Fields(i).Value = RECORDSET1.Fields(i).Value
    next
    RECORDSET2.Update
    RECORDSET1.MoveNext
loop 
```

示例 Excel 文件内容 (Excel 2003)：

```
English           Swedish            Russian              Chinese Simplified
this should work  Detta bör fungera  это должно работать  这应该工作
this should work  Detta bör fungera  это должно работать  这应该工作
this should work  Detta bör fungera  это должно работать  这应该工作
this should work  Detta bör fungera  это должно работать  这应该工作 
```

CSV 文件内容示例（不带 BOM 的 UTF-8）：

```
"English","Swedish","Russian","Chinese Simplified"
"this should work","Detta bör fungera","это должно работать","这应该工作"
"this should work","Detta bör fungera","это должно работать","这应该工作"
"this should work","Detta bör fungera","это должно работать","这应该工作"
"this should work","Detta bör fungera","это должно работать","这应该工作" 
```

使用 cscript 从命令行运行此脚本：

```
C:\>cscript export.vbs 
```

注意：您可能会在 64 位 Windows 上遇到以下 ADO 错误：

> ADODB.Connection：找不到提供程序。它可能没有正确安装。（错误代码 0x800A0E7A）

此问题的解决方法是在 32 位模式下运行脚本。您可以通过在“运行”对话框中输入以下命令来启动 32 位命令提示符来执行此操作：

```
%WINDIR%\SysWOW64\cmd.exe 
```

从此命令提示符处执行 cscript 命令。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T11:29:56.017

开放式办公室可以做到这一点！尝试将您的 Excel 文件加载到 Open Office 并“另存为”csv 文件。然后您将被要求输入导出文件的编码。选择“Unicode (UTF-8)”。

# css - 伪元素 (:after, :before) 上的 CSS3 过渡不起作用？

> ID：10578424
> 
> 赞同：16
> 
> 时间：2012-05-14T06:33:28.197
> 
> 标签：css, css-transitions, pseudo-element

我正在显示`title`链接的属性`:hover`。标题属性通过`:after`...附加到链接中</p>

现在我想知道如何`:after`在悬停和悬停时为伪元素的不透明度设置动画。

**html**

```
<a class="link" href="#" title="something"></a>​ 
```

**css**

```
.link {
    display:block;
    width:50px;
    height:50px;
    background:red;
}

.link:after {
    position:relative; 
    content: attr(title); 
    top:55px; 
    color:$blue; 
    zoom: 1; 
    filter: alpha(opacity=00); 
    opacity: 0;
    -webkit-transition: opacity .15s ease-in-out;
    -moz-transition: opacity .15s ease-in-out;
    -ms-transition: opacity .15s ease-in-out;
    -o-transition: opacity .15s ease-in-out;
    transition: opacity .15s ease-in-out;
}

.link:hover:after { 
    zoom: 1; 
    filter: alpha(opacity=100); 
    opacity: 1;
} 
```

查看演示：http: [//jsfiddle.net/d2KrC/](http://jsfiddle.net/d2KrC/)

任何想法为什么这不起作用？​</p>

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T06:58:03.340

WebKit (Chrome, Safari) 不支持伪元素的过渡。

*   [https://bugs.webkit.org/show_bug.cgi?id=23209](https://bugs.webkit.org/show_bug.cgi?id=23209)
*   [http://code.google.com/p/chromium/issues/detail?id=54699](http://code.google.com/p/chromium/issues/detail?id=54699)

它应该在 Firefox 中工作。

**编辑：** WebKit[中的问题现已解决](http://trac.webkit.org/changeset/138632)。该补丁已经登陆 Chrome Carnery，因此将从版本 26 开始支持。我不知道Safari。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-16T20:51:52.680

这个 webkit 错误有一个相当简单的解决方法，可以使转换在伪类上工作。这是一篇很棒的博客文章：http: [//xiel.de/webkit-fix-css-transitions-on-pseudo-elements/](http://xiel.de/webkit-fix-css-transitions-on-pseudo-elements/)

基本上 webkit 不直接支持过渡，但您可以将要更改的过渡和样式应用到其父元素。然后在伪类中放置您想要影响的相同样式属性，但给它们值：继承。这将导致它们继承所有父元素值，包括过渡。

这是我为 :after 元素上下动画制作的示例

```
a { 
    position: static; /* explicitly defined so not to forget that it can't be relative or :after transition hack will not work */
    top: 1px; /*doesnt move it because it is position static */
    -webkit-transition: top 200ms ease 0;
}
a:after {
    content: '';
    position: absolute;
    top: inherit;
}
a:hover {
    top: 3px;
} 
```

*更新该错误已在 Chrome Canary 中得到修复（截至 2 月），但在 Safari 中似乎仍然存在问题。可以在这里查看状态并保持更新： [https ://code.google.com/p/chromium/issues/detail?id=54699](https://code.google.com/p/chromium/issues/detail?id=54699)

# github - github上传项目问题

> ID：10578425
> 
> 赞同：1
> 
> 时间：2012-05-14T06:33:36.683
> 
> 标签：github

我首先在 github 网页中创建了一个 github 新存储库，然后我打开 Git Bash 将文件夹上传到该存储库。我首先使用`$cd f:`and`$ git clone git@github.com:username/project name.git`在 f 盘中创建了一个文件夹（其中包含一个初始的 .git 文件夹和一个 README 文件）。然后，我习惯`$cd f:\project name`切换到当前文件夹。之后，我将我所有的项目文件夹复制到 f 盘中我的项目名称文件夹中。最后，我使用以下四行将我所有的项目文件夹上传到 github：

```
$git add .
$git remote rm origin
$git remote add origin git@github.com:username/project name.git
$git push -u origin master 
```

在我输入密码后，Git Bash 显示所有内容都是最新的。但是我刷新了我的 github 存储库页面，除了最初的 README 文件什么都没有。有人能告诉我这是怎么回事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:39:53.917

你没有在你的`git add`.

```
git commit -m "first commit" 
```

这就是为什么 git 认为没有什么可推送的：你的 HEAD 仍然与你的远程源克隆 repo 相同。

请参阅[Git 基础知识](http://git-scm.com/book/en/Getting-Started-Git-Basics#The-Three-States)：

![git 三个阶段](../Images/fa2b346741c818665ac6b8e04a27a594.png)

您`git add`更新暂存区（索引），但只有 a`git commit`会更新您的 git 目录。

# objective-c - Objective-C / iOS编程中有用的指针算法的任何例子？

> ID：10578429
> 
> 赞同：1
> 
> 时间：2012-05-14T06:33:49.270
> 
> 标签：objective-c, ios, c, pointers, pointer-arithmetic

我知道 C 中存在指针算术，但是任何人都可以举出任何例子来说明为什么指针算术*在*iOS 的 Objective-C 编程中有用吗？我被难住了……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:56:00.420

它实际上用在相当多的地方，这里只是几个......

*   数组访问

每当您使用 C 数组并访问单个元素时（比如说数组 [12]，它实际上被解释为 *(array+12)

*   OpenGLES

如果您曾经使用过它，它会在 iOS 上广泛使用指针算法，当需要将多个数组打包成一个交错数组时，您必须使用 offsetof，然后将其添加到内存缓冲区以获取属性的完整位置.

*   快速枚举

通过使用指针算法，您可以通过增加实际指针而不是单个变量来加速元素的枚举。

*   某些数据结构的更容易编程

某些数据结构（例如双端队列）使用指针算法更容易实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T02:51:56.310

目标 C 中不使用指针算术。问题是它有什么用处。答案是无。

如上例所示，使用 C 数组不是对目标 C 的使用，而是对 C 的使用。目标 C 数组具有内置枚举功能以及使用 .count 属性的常规语法。

为了回答这个问题，objective C 本身没有使用指针算术，因为它们不是必需的，并且 obj c 数组指针不支持它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T06:39:02.153

Objective C 中的所有指针运算都是从 Objective C 派生的，它是 C 的严格超集，在非从 C 派生的 Objective c 中没有使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T06:40:09.273

我认为它对开发快速枚举（即 for-in 循环）的人非常有用。

# html - 链接到空白空间

> ID：10578431
> 
> 赞同：1
> 
> 时间：2012-05-14T06:34:09.917
> 
> 标签：html, css, ruby-on-rails-3

我已经更改了用于查看、编辑和删除相应标签的背景图像的常规`<td>`标签。但是现在链接不起作用，因为我没有要单击的文本。

我怎样才能使空格可点击，或者有另一种方法来解决这个问题？

这就是我得到的：

```
...
<td class="view"><%= link_to '', event %></td>
<td class="edit"><%= link_to ' ', edit_event_path(event) %></td>
<td class="delete"><%= link_to ' ', event, :confirm => 'Are you sure?', :method => :delete %></td> 
```

我知道一个解决方案是将图像添加为 image_tag 并创建一个链接，但是在 style.css 中声明图像更清晰，更易于实现。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:54:40.327

您可以使用 CSS 使链接可点击。如果您将空白链接的类设置为：

```
display: inline-block;
width: 100%;
height: 100%; 
```

他们应该变得可点击。

# python - 大卫星图像处理

> ID：10578434
> 
> 赞同：2
> 
> 时间：2012-05-14T06:34:41.367
> 
> 标签：python, satellite-image, large-data, bigdata

我试图在双时相 RapidEye 多光谱图像上运行 Mort Canty 的[http://mcanty.homepage.t-online.de/](http://mcanty.homepage.t-online.de/) Python iMAD 实现。它基本上计算了两个图像的典型相关，然后减去它们。我遇到的问题是图像的大小为 5000 x 5000 x 5（条带）像素。如果我尝试在整个图像上运行它，我会收到内存错误。

使用 pyTables 之类的东西会帮助我吗？

Mort Canty 的代码试图做的是它使用 gdal 加载图像，然后将它们存储在一个 10 x 25,000,000 的数组中。

```
 # initial weights
    wt = ones(cols*rows)      
    # data array (transposed so observations are columns)
    dm = zeros((2*bands,cols*rows))
    k = 0
    for b in pos:
    band1 = inDataset1.GetRasterBand(b+1)
    band1 = band1.ReadAsArray(x0,y0,cols,rows).astype(float)
    dm[k,:] = ravel(band1)
    band2 = inDataset2.GetRasterBand(b+1)
    band2 = band2.ReadAsArray(x0,y0,cols,rows).astype(float)        
    dm[bands+k,:] = ravel(band2)
    k += 1 
```

即使只是创建一个 10 x 25,000,000 的 numpy 浮点数组也会引发内存错误。任何人都知道如何解决这个问题？这是我的第一篇文章，所以任何关于如何发布的建议也将受到欢迎。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:05:33.797

`numpy``float64`默认使用，因此您的`dm`-array 占用 2GB 内存（8*10*25000000），其他阵列可能每个大约 200MB（~8*5000*5000）。

`astype(float)`返回一个新数组，因此您也需要内存 - 甚至可能不需要，因为在将数据复制到结果数组时会隐式转换类型。

何时释放 for 循环中使用的内存取决于垃圾收集。这不考虑 , 的内存`GetRasterBand`开销`ReadAsArray`。

您确定您的输入数据使用 64 位浮点数吗？如果它使用 32 位浮点数，您可以通过`dtype='f'`在数组上指定来轻松地减少一半的内存使用量。

# mysql - 在子查询中查找差异结果 在 mysql 错误中返回超过 1 行

> ID：10578436
> 
> 赞同：0
> 
> 时间：2012-05-14T06:34:54.547
> 
> 标签：mysql

我有一个名为 tbl_populations 的表，其中包含以下字段：

```
pk_populationid,residence,value,aspect,gender,fk_tbl_states_stateid 
```

我正在尝试计算两个方面的行差异

例如

```
SELECT fk_tbl_states_stateid, value - (
SELECT value
FROM tbl_populations
WHERE fk_tbl_states_stateid = '16'
AND fk_tbl_districts_districtid = '0'
AND residence = '0'
AND gender = '0'
AND aspect = '2' ) AS difference
FROM tbl_populations
WHERE fk_tbl_states_stateid = '16'
AND fk_tbl_districts_districtid = '0'
AND residence = '0'
AND gender = '0'
AND aspect = '1' 
```

它工作正常，因为它返回一行

为了获取我想要检索所有性别值的多个数据，我已从条件中删除了性别。

```
SELECT fk_tbl_states_stateid,gender, value - (
SELECT value
FROM tbl_populations
WHERE fk_tbl_states_stateid = '16'
AND fk_tbl_districts_districtid = '0'
AND residence = '0'
AND aspect = '2' ) AS difference
FROM tbl_populations
WHERE fk_tbl_states_stateid = '16'
AND fk_tbl_districts_districtid = '0'
AND residence = '0'
AND aspect = '1' 
```

我收到`Subquery returns more than 1 row`错误。

我怎样才能得到所有的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:42:59.763

```
SELECT Table11.fk_tbl_states_stateid,Table1.Gender,Table1.value - table2.Value as Diff
From
(SELECT *
FROM tbl_populations
WHERE fk_tbl_states_stateid = '16'
AND fk_tbl_districts_districtid = '0'
AND residence = '0'
AND aspect = '2' ) Table1,
(SELECT value,Gender
FROM tbl_populations
WHERE fk_tbl_states_stateid = '16'
AND fk_tbl_districts_districtid = '0'
AND residence = '0'
AND aspect = '1' ) Table2
Where Table1.Gender = Table2.Gender 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:39:17.990

为它使用一个函数，这样应该很容易

# facebook-comments - Facebook 社交插件 - 评论框

> ID：10578438
> 
> 赞同：0
> 
> 时间：2012-05-14T06:34:59.690
> 
> 标签：facebook-comments

Facebook 社交插件 - commens 框没有出现在 wordpress 中的任何解决方案现在我正在通过生成代码而不是通过插件来做到这一点

我正在从[https://developers.facebook.com/docs/reference/plugins/comments/生成代码](https://developers.facebook.com/docs/reference/plugins/comments/)

app id 一切正常

它以前不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:31:18.200

我试图在一个简单的 html 页面上创建一个评论框，它正在工作

```
 http://gigyonline.com/test.html 
```

请尝试使用一个简单的 html 页面，如果它可以工作，请验证您正在使用的浏览器。可以看到上面页面的视图源码。它只有 facebook 插件代码。

# django - 如何使用 UserCreationForm 类在用户注册页面上使用 python-TZ 添加时区下拉列表

> ID：10578440
> 
> 赞同：2
> 
> 时间：2012-05-14T06:35:20.920
> 
> 标签：django, django-forms, django-admin

我想在用户注册页面时添加一个下拉列表，显示使用 PYtZ 包的公共时区。要注册用户，我正在使用 UserCreationForm 类。代码如下：

```
class UserRegisterForm(UserCreationForm):
    email2 = forms.EmailField(label=_("E-mail"))

    def clean_email2(self):
        email2 = self.cleaned_data['email2']
        try:
            user = User.objects.get(email=email2)
        except User.DoesNotExist:
            return email2
        raise forms.ValidationError(_("Account with this e-mail address already exists."))

    def save(self, commit=True):
        user = super(UserRegisterForm, self).save(commit=False)
        user.email = self.cleaned_data["email2"]
        user.is_active = False
        if commit:
            user.save()
        return user 
```

我正在使用以下命令获取所有常用时区的列表：

```
>>> from pytz import timezone
>>> import pytz
>>> print(pytz.common_timezones) 
```

它打印： http: [//pastebin.com/RHdie16M](http://pastebin.com/RHdie16M)

我也知道选择字段，但使用它不是一个好主意。我该怎么办？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-14T07:31:03.227

您可以这样使用选择字段：

```
timezone = forms.ChoiceField(choices=[(x, x) for x in pytz.common_timezones]) 
```

# ios - 在应用程序发布更新时 - 图像是保留还是更新？

> ID：10578442
> 
> 赞同：0
> 
> 时间：2012-05-14T06:35:47.567
> 
> 标签：ios, image, binary, release

提交二进制更新时，如果我替换了一些图像，它们会自动推出吗？或者发布的应用程序是否保留旧图像？当然，假设我已经清理了应用程序，并在编译之前刷新了构建。我猜它可能确实重置了文件......但是想听听别人的意见？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:40:50.967

旧图像被删除并替换为新图像。不要忘记在项目设置中更新应用程序的版本：

![在此处输入图像描述](../Images/db8380fd991955c1194b104e0f24b245.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:58:06.100

当应用程序更新时，重新下载整个应用程序。因此，您对提交到 App Store 所做的任何更改都会传播给所有更新的用户。

您唯一需要确保的是从项目或至少从构建目标中删除图像。

# sql-server - 我在使用 SQL Server Express 的身份功能时遇到问题

> ID：10578447
> 
> 赞同：0
> 
> 时间：2012-05-14T06:36:12.503
> 
> 标签：sql-server, sql-server-express, identity-column

我正在使用 SQL Server Express，我创建了这个表

```
CREATE TABLE inventory
(
    id INT NOT NULL IDENTITY(1,1),
    description nvarchar(50),
    quantity int,
    price money
) 
```

当我插入此语句时：

```
INSERT INTO inventory VALUES('water', 20, 1.50) 
```

我收到此错误：

> 查询和表中的列数必须匹配。[查询中的列数= 3，表中的列数= 4]

当我发表这个声明时：

```
INSERT INTO inventory VALUES(1, 'water', 20, 1.50) 
```

我收到此错误：

> 无法修改该列。[ 列名 = id ]

我认为身份会自动增加值，所以我也不能这样做，我该如何解决？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T06:40:53.760

您必须在插入中明确指定列

```
insert Inventory(Description, Quantity, Price) values ( ...) 
```

# python - 将“浮点数”转换为“日期”

> ID：10578449
> 
> 赞同：0
> 
> 时间：2012-05-14T06:36:24.607
> 
> 标签：python, datetime, xls

> **可能重复：**
> [如何在 Python 中读取 Excel 格式的日期？](https://stackoverflow.com/questions/1108428/how-do-i-read-a-date-in-excel-format-in-python)

我正在从 .XLS（excel）文件中读取值。在读取日期字段时，我得到一个浮点值，如 40374。我需要将此浮点值转换为日期。请帮忙。

提前致谢！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:41:59.580

Excel 中的日期由自 1900 年 1 月 1 日以来的天数表示。所以 40374 是 1900 年 1 月 1 日或 2010 年 7 月 15 日之后的 40,374 天

另外我相信，如果小数点后有任何内容，这代表一天的一小部分。

所以 40374.0 是 2010 年 7 月 15 日午夜，0.5 是中午，0.75 是下午 6 点，等等。

# nginx - 带有 nginx 和 php-fpm 的 phpMyAdmin - 错误 502

> ID：10578454
> 
> 赞同：0
> 
> 时间：2012-05-14T06:36:48.377
> 
> 标签：nginx, phpmyadmin, php

出现错误 502，Nginx + php-fpm 中的网关错误。此错误仅在 phpMyAdmin 中发生。error.log 中有那个错误：

```
2012/05/14 10:12:28 [error] 1888#0: *209 recv() failed (104: Connection reset by peer) while reading response header from upstream 
```

这是 php 位置的 nginx 配置：

```
fastcgi_pass   127.0.0.1:9000;
fastcgi_index  index.php;
fastcgi_param  SCRIPT_FILENAME  $document_root/$fastcgi_script_name;
fastcgi_buffers 256 128k;
fastcgi_buffer_size 512k;
fastcgi_connect_timeout 300s;
fastcgi_send_timeout 300s;
fastcgi_read_timeout 300s;
include fastcgi_params; 
```

使用的程序：PHP 5.4.2 (FPM)、nginx/1.1.19。现在存储在内存缓存中的会话。过去它是存储在文件中，错误 502 也是。

# ajax - MVC3 Ajax表单多次提交

> ID：10578457
> 
> 赞同：0
> 
> 时间：2012-05-14T06:37:10.570
> 
> 标签：ajax, asp.net-mvc-3

我在我的页面中使用**Ajax 表单**，我**在第一个页面中有几个 AJAX 表单 --(Customers.cshtml)**，另一个是**PARTIAL VIEW (_customers.cshtml)**。当我**提交部分视图**时。此部分视图**已提交多次****

我在主页和部分视图中使用以下 Ajax 脚本

* * *

```
 <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" 
```

我的代码如下：

```
 Customers.cshtml replaces the div tag with id="customers"
---------------------------------------------------------------------

    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 

    <script src="@Url.Content("~/Scripts/json2.js")" type="text/javascript"></script>
    @if (false)
    { <script src="~/Scripts/jquery-1.7.1-vsdoc.js" type="text/javascript"></script> }
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>

     @using (Ajax.BeginForm("Action1", "Controller1", new AjaxOptions() { InsertionMode = InsertionMode.Replace, UpdateTargetId = "customers" }))
    {
                        @Html.AntiForgeryToken()
        <input type="submit"  class="t-button t-state-default"/>
    }

    <div id="customers"> </div>
    <div id="Orders"></div>

    <div id="customers> tag is replaced with a partial view which has another AJAX FORM

    **_customers.cshtml replaces the div tag with id="orders"**
--------------------------------------------------------

     <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>

    @using (Ajax.BeginForm("Action2", "Controller1", new AjaxOptions() { InsertionMode = InsertionMode.Replace, UpdateTargetId = "Orders" }, new { id = "formupdate" }))
    {
               @Html.AntiForgeryToken()
    <input type="submit"  class="t-button t-state-default"/>

    }

    Now when I try to submit the  **_customers.cshtml** , it is submitting more than once
<br/>
           Controller
            -----------------------------------------------
         [HttpPost]
         public ActionResult Action1()
                {          

                    return PartialView("_customers");
                }
         [HttpPost]
         public ActionResult Action2()
                {          

                    return PartialView("_Shipping");
                } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-14T06:50:38.920

使用这个 java 库：

```
<script src="@Url.Content("~/Scripts/MicrosoftAjax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/MicrosoftMvcAjax.js")" type="text/javascript"></script> 
```

# android - StackTrace 远程

> ID：10578458
> 
> 赞同：2
> 
> 时间：2012-05-14T06:37:13.147
> 
> 标签：android, exception-handling

我编写了两段代码，一个用于发送电子邮件，另一个用于在发生 FORCE ERROR 时收集堆栈跟踪，并且这两个代码都单独工作。
现在我的问题是当我使用这两个代码时它都不起作用（日志也正常工作）

```
public class BaseActivity extends Activity{

public Context context;

public Context getContext() {
    return context;
}

public void setContext(Context context) {
    this.context = context;
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
     Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {
        @Override
        public void uncaughtException(Thread paramThread, Throwable paramThrowable) {

        Writer result = new StringWriter();
        PrintWriter printWriter = new PrintWriter(result);
        paramThrowable.printStackTrace(printWriter);
        System.out.println("BaseActivity.onCreate(...).new UncaughtExceptionHandler() {...}.uncaughtException()" +result.toString());
        sendMail(result.toString());
        Toast.makeText(getContext(),"cs", 1).show();
        }
    });
}

public void sendMail(String body){
    try {
        GMailSender sender = new GMailSender("email@gmail.com",
                "password");
        sender.sendMail("This is Subject",
                "java.lang.RuntimeException: Unable to start activity ComponentInfo{com.silverSkills.com/com.silverSkills.com.ChildActivity}: java.lang.NullPointerException" +
                "at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)" +
                "   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)" +
                "   at android.app.ActivityThread.access$1500(ActivityThread.java:117)" +
                "   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)" +
                "   at android.os.Handler.dispatchMessage(Handler.java:99)" +
                "   at android.os.Looper.loop(Looper.java:123)" +
                "   at android.app.ActivityThread.main(ActivityThread.java:3683)" +
                "   at java.lang.reflect.Method.invokeNative(Native Method)" +
                "   at java.lang.reflect.Method.invoke(Method.java:507)" +
                "   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)" +
                "   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)" +
                "   at dalvik.system.NativeStart.main(Native Method)" +
                " Caused by: java.lang.NullPointerException" +
                "   at com.silverSkills.com.ChildActivity.onCreate(ChildActivity.java:9)" +
                "   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)" +
                "   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)" +
                "   ... 11 more",
                "email@gmail.com", "email@gmail.com");

        Log.i("Confirm","mail send");

    } catch (Exception e) {
        Log.e("SendMail", e.getMessage(), e);
    }

} 
```

}

这就是 call make 调用此代码的方式。

```
public class ChildActivity extends BaseActivity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContext(this);
    String a=null;
    a.toString();
} 
```

如果你能给我任何建议那就太好了：D

# c# - 在 C# 中将 DataGridViewTextBoxColumn 更改为 DataGridViewComboBoxCllumn

> ID：10578461
> 
> 赞同：0
> 
> 时间：2012-05-14T06:37:18.370
> 
> 标签：c#, datagridview

我的 Windows 窗体中有一个 DataGridView，它有一个可由用户编辑的列。我需要它是一个 ComboboxColumn。它已经有一些数据，所以不是每个单元格都是空的...列是在设计器中创建的...我怎样才能仍然更改 ColumnType，以及如何将项目添加到组合框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:54:40.707

我给它留下了一个TextBoxColumn，用户以另一种方式编辑它

# javascript - 如何在IE9上显示对象的内容

> ID：10578463
> 
> 赞同：1
> 
> 时间：2012-05-14T06:37:25.120
> 
> 标签：javascript

```
var obj = {'test1':"value1", "test2": "value2" }
console.log(obj); 
```

**结果**

```
[object, Object] 
```

是否可以在 IE9 上显示不使用 JSON.stringify 的对象的内容？
像下面这样

```
{'test1':"value1", "test2": "value2" } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T06:57:07.567

尝试使用[`console.dir()`](https://developer.mozilla.org/en/DOM/console.dir)代替`console.log()`- 这也适用于其他浏览器的控制台。

另请参阅 MSDN 文章[Internet Explorer 9 Developer Tools Deep Dive – Part 3: Debugging JavaScript](http://blogs.msdn.com/b/cbowen/archive/2011/06/24/internet-explorer-9-developer-tools-deep-dive-part-3-debugging-javascript.aspx?Redirected=true)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:55:49.877

如果您只想查看复杂对象中的内容而不使用全尺寸库，则可以使用以下代码：

```
var complexObject = { 
    "first field": "first value", "second": function() {
        alert("hello");
    }, 
    "third": ["I", "am", "an", "array"]
};

var complexObjectString = "";
for (var key in complexObject) {
    complexObjectString += key + ": " + complexObject[key] + "\n";
}
alert(complexObjectString);​ 
```

[现场测试用例](http://jsfiddle.net/8sR9B/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T06:52:17.920

在 IE9 中，您需要在标准模式下才能使用 JSON 对象；例如，您必须有一个文档类型。

这不起作用：[Live Copy](http://jsbin.com/obokez/2) | [来源](http://jsbin.com/obokez/2/edit)

```
<html>
<head>
<meta charset=utf-8 />
<title>Test Page</title>
</head>
<body>
<p>Without a doctype</p>
<script>
(function() {

  try {
    var obj = {
      foo: "bar"
    };

    var str = JSON.stringify(obj);

    display("<code>" + str + "</code>");
  }
  catch (e) {
    display("Exception: " + (e.message || e.toString()));
  }

  function display(msg) {
    var p = document.createElement('p');
    p.innerHTML = msg;
    document.body.appendChild(p);
  }
})();
</script>
</body>
</html> 
```

`JSON`它失败并出现未定义的错误。

如果你添加

```
<!doctype html> 
```

到顶部，它有效：[Live copy](http://jsbin.com/obokez/) | [来源](http://jsbin.com/obokez/edit)

# php - 在 Javascript 文件中的屏幕上打印 html 输入属性和变量

> ID：10578468
> 
> 赞同：0
> 
> 时间：2012-05-14T06:37:50.513
> 
> 标签：php, javascript, html, printing, input

我从输入文本控件（在 php 文件中）调用 javascript 函数：

```
<input name="first_name"  id="first_name" size="30" maxlength="25" type="text" value="{$fields.first_name.value}" onblur="checkvalid(this);"> 
```

这是javascript文件中的函数：

```
function checkvalid(control){
  alert(control);   
} 
```

现在我需要调试这个控件并查看它的属性、变量和值（不使用 Visual Studio，使用“eclipse”）。所以我想我唯一的选择是在屏幕上打印 html 输入控件的属性，但是当我执行警报（控件）时，我收到“[object HTMLInputElement]”消息而不是控件的属性。

如何调试 html 控件？如果我不能，我如何打印它的属性和变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:54:03.890

您引用的属性实际上称为属性。让我们创建一个函数，它将遍历元素的属性，将它们以格式良好的字符串列出并发出警报。

```
function check(element) {
    var attrs = element.attributes;
    var output = "";

    for (var i  = 0; i < attrs.length; i++)
        output += attrs.item(i).name + ': ' + attrs.item(i).value + '\n';

    alert(output);
} 
```

现在我们将它称为您的元素。它有`id="first_name"`，所以我们可以使用`document.getElementById`.

```
check(document.getElementById("first_name")); 
```

# c# - 通过指定/模拟另一个帐户来调用 Process.GetProcesses？

> ID：10578470
> 
> 赞同：0
> 
> 时间：2012-05-14T06:38:15.310
> 
> 标签：c#, .net, sysinternals

通过使用[`Process.GetProcesses`](http://msdn.microsoft.com/en-us/library/x8b2hzk8)，我们可以列出远程计算机中正在运行的进程，例如

```
Process [] allRemoteProcesses = Process.GetProcesses("myRemoteComputer"); 
```

但是，这似乎取决于我的帐户的许可。它抛出异常“无法连接到远程机器”。如果正在运行的用户无权访问远程计算机。我可以在检查进程时指定另一个由 .NET 使用的帐户，类似于[PsList](http://technet.microsoft.com/en-us/sysinternals/bb896682)`-u`中的和`-p`开关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:48:18.813

我之前所做的是使用类似于[本文](http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User)中描述的东西。

```
using (new Impersonator("user", "domain", "pass"))
{
   Process[] allRemoteProcesses = Process.GetProcesses("myRemoteComputer");
   // Rest of code...
} 
```

另一种方法是使用 WMI 并查询[此处](https://stackoverflow.com/questions/6757711/how-to-get-permissions-for-using-system-diagnostics-process-getprocessstring)描述的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T05:57:35.660

对于同样的问题，在远程注册表中打开远程注册表服务对我有用！

# git - 在 github 上管理项目

> ID：10578479
> 
> 赞同：0
> 
> 时间：2012-05-14T06:39:02.970
> 
> 标签：git, github

我想把我的项目放到github上，但是总是失败。我使用以下步骤来做到这一点：

1.  在 github 上创建一个新的存储库，
2.  在我的磁盘中，我创建了一个文件夹 LocalGit 并对其进行初始化。然后我用 `git pull git@github.com:myAccount/myProject.git`
3.  我将项目目录 TestPro 添加到 LocalGit，然后使用： `git add .` `git commit -m "inital"`
4.  最后，我尝试将其推送到 github，使用： `git push -u origin master`

之后，我在 safari 中打开 github，我的项目就存在了。但是问题是TestPro文件夹打不开，下面什么都没有。

谁能告诉我如何将现有项目添加到 github？我已经阅读了 github 上的说明，但我仍然找不到解决方案，我错在哪里。

我指的本地项目是本地 git 存储库。有关系吗？我应该先结帐吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:45:57.050

在 github 上创建 repo 后

1) 配置 ssh-keys，然后设置你的 git.username 和 git.email

2) 使用 git clone 克隆 repo

```
git clone git@github.com:username/somerepo.git 
```

3）进行更改，将其提交到本地仓库并通过 git push 推送到远程

5)????

6) 利润

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:46:18.510

如果你在 GitHub 上创建了一个新的 repo，最简单的使用方法是：

*   在本地克隆它（它在该本地仓库中定义了一个远程“来源”）
*   将您的项目复制到该本地克隆存储库中
*   推

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T06:46:41.790

您必须在推送之前添加远程位置。git remote add origin git@github.com:myAccount/myProject.git [http://help.github.com/create-a-repo/](http://help.github.com/create-a-repo/)转到“更多关于遥控器”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T06:48:01.460

在 github 上创建项目后，您有：

1.  要在本地克隆您的项目，请使用`git clone git@github.com:myAccoun/myProject.git`
2.  touch test;git add test;git commit -a -m "first commit"
3.  在你正确之后：git push origin master

git pull 是 git fetch 和 git merge。在刷新您的存储库后使用它。.git 由 git 自动管理，因此无需添加到跟踪中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T19:01:54.967

步骤是：

```
1\. cd "/path/to/project_folder"
2\. git init
3\. git add .
4\. git commit -m "Your Message"
5\. git remote add github https://github.com/[your_user_name]/[repo_name]
6\. git push origin master 
```

或者，如果您想先克隆。然后，

```
1\. git clone git@github.com/[your_user_name]/[repo_name] 
```

然后，您可以对克隆的文件进行更改。

接下来，使用以下命令：

```
2\. git add .
3\. git commit -m "Your Message"
4\. git remote add github https://github.com/[your_user_name]/[repo_name]
4\. git push origin master 
```

# scala - Scala中的基本逻辑编程

> ID：10578481
> 
> 赞同：3
> 
> 时间：2012-05-14T06:39:14.163
> 
> 标签：scala, logic, predicate, logic-programming

我有一个有趣的小问题，我遇到了这样的逻辑子句：

```
Rule 1\. A, B and C are unique, and are numbers from 1 to 3 (so every number is used).
Rule 2\. B < 2
Rule 3\. C > 2 
```

现在（假设我刚刚提出的这个快速示例实际上验证了：P），很容易看到

```
A = 2
B = 1
C = 3 
```

但这是一个非常人为的例子。

如果你有 20 条（或 1 万条）规则，并且它们重叠了怎么办。假设有一个有效的单一答案，并且您可以以某种方式访问​​规则（例如谓词列表）。

有没有一个很好的、通用的、直观的解决方案？我知道 Prolog 可以使用某些库来解决它，但我的尝试证明是徒劳的。我知道我可以蛮力排列范围内的所有数字，然后手动检查它们是否符合规则。但这似乎很蹩脚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T06:56:43.333

# 蛮力解决方案

首先，我根据规则 1 创建所有可能的输入，这恰好是所有排列：

```
val all = (1 to 3).permutations 
```

然后我定义剩余的规则：

```
val rule2 = (a: Int, b: Int, c: Int) => b < 2
val rule3 = (a: Int, b: Int, c: Int) => c > 2 
```

我只是过滤掉不符合所有规则的解决方案：

```
val solutions = all.
  filter(i => rule2(i(0), i(1), i(2))).
  filter(i => rule3(i(0), i(1), i(2))).
  toList 
```

`solutions.toList`打印一个也是唯一有效的解决方案：

```
List(Vector(2, 1, 3)) 
```

请注意，因为排列是延迟生成的，所以这个实现并不是真的那么无效（例如`rule3`，仅应用于通过的解决方案`rule2`）。

您可以使用`foldLeft()`任意数量的谓词：

```
val rules = List(rule2, rule3)

rules.
  foldLeft(all)((solutionsSoFar, rule) => 
    solutionsSoFar.filter(s => 
      rule(s(0), s(1), s(2))
    )
  ) 
```

# 流口水

看看[Drools](http://www.jboss.org/drools)业务规则引擎。只需将所有可能的解决方案作为知识库并使用漂亮的 DSL 定义规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T07:14:27.483

这是一项有约束力的工作。java有几个约束求解器。我最喜欢的是[JaCoP](http://www.jacop.eu/)。它有一个很好的 scala DSL，所以它几乎看起来像 Prolog 约束。这是典型的 SENDMOREMONEY 示例：[http ://www.hakank.org/jacop/SendMoreMoney.scala](http://www.hakank.org/jacop/SendMoreMoney.scala)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T19:26:34.910

您可能会对这个博客感兴趣，作者在一篇由三部分组成的文章中展示了如何在 Scala 中进行逻辑编程：

[http://ambassadortothecomputers.blogspot.com/feeds/posts/default?alt=rss](http://ambassadortothecomputers.blogspot.com/feeds/posts/default?alt=rss)

# java - 如果可能的话如何自动化

> ID：10578486
> 
> 赞同：-1
> 
> 时间：2012-05-14T06:39:22.950
> 
> 标签：java

我正在尝试打印出数组的所有元素，并将它们自己添加到我已经想到的索引中。我不知道如何自动化它。它有效，但它可以更好。

```
public class homeworkArrays 
{

    public static void main(String[] args) 
    {
        int[] myArray = {6, 7, 2, 1, 10, 34};
        int blank = addByIndex(myArray);
    }

    public static int addByIndex(int[] myArray) 
    {
        for(int i = 0; i < myArray.length; i++)   
        {   
            System.out.println(i + " - " + myArray[i]); 

        }

            myArray[0] = myArray[0] + myArray[0];
            System.out.println("0 is now " + myArray[0]);
            myArray[1] = myArray[1] + myArray[1];
            System.out.println("1 is now " + myArray[1]);
            myArray[2] = myArray[2] + myArray[2];
            System.out.println("2 is now " + myArray[2]);
            myArray[3] = myArray[3] + myArray[3];
            System.out.println("3 is now " + myArray[3]);
            myArray[4] = myArray[4] + myArray[4];
            System.out.println("4 is now " + myArray[4]);
            myArray[5] = myArray[5] + myArray[5];
            System.out.println("5 is now " + myArray[5]);

    int i = 0;
    return myArray[i];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:41:17.470

在循环中执行：

```
for(int i = 0; i < myArray.length; i++)   
{   
    System.out.println(i + " - " + myArray[i]); 
    myArray[i] = myArray[i] * 2;
    System.out.println(i + " after multiplication - " + myArray[i]); 
} 
```

不清楚的是那部分：

```
int i = 0;
return myArray[i]; 
```

你想达到什么目的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T06:45:10.503

binyamin 做对了，但我建议

```
myArray[i] += myArray[i]; 
```

因为整数的乘法比简单的加法有更多的开销。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T06:47:00.790

我不知道我的问题是否正确，但试试这个.....

```
public static int addByIndex(int[] myArray) 
{
    for(int i = 0; i < myArray.length; i++)   
    {   
        System.out.println(i + " - " + myArray[i]);
        myArray[i] += myArray[i];
        System.out.println(i " is now " + myArray[i]);
    } 
    int i = 0;
    return myArray[i]; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T06:49:53.127

目前，您正在将值加倍，而当前的答案也在将值加倍。您的问题是“将自己添加到他们的索引中”，这意味着如果您`4`在数组索引中有数字，`2`您的输出应该是`6`.

```
 for (int i = 0; i < myArray.length; i++)
    {
        myArray[i] += i;
        System.out.println(myArray[i]);
    } 
```

上面的代码将获取数组中的每个元素并将当前索引添加到其中 - 然后打印该值。

# ruby-on-rails - 控制器是否需要在 Rails 中发送 Flash 消息？

> ID：10578487
> 
> 赞同：0
> 
> 时间：2012-05-14T06:39:24.667
> 
> 标签：ruby-on-rails, model, controller, flash-message

这是一个新手问题，抱歉，但是......如果模型没有控制器，我怎么能执行

```
flash[:notice]? 
```

例如在

[https://github.com/tute/merit](https://github.com/tute/merit)

我注意到它只有模型而没有控制器。我知道将闪存消息放在控制器中而不是在模型中执行的方法是明智的，但是....如果没有控制器，我该怎么做？

我可以尝试创建一个，但控制器中的每个操作不是都对应于视图中的一个页面吗？

某些方法正在模型中执行，我希望能够在它们被执行时添加一个 flash[:notice] 但是......我该怎么做？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:43:00.157

您仍然可以在控制器中设置 flash 消息（或者在技术上可以访问会话的任何其他地方）。Merit 只是 Rails 的附加组件，而不是替代品。您仍然会在应用程序中使用控制器来处理来自用户的请求。

# svn - svn import 和 checkout 有什么区别？

> ID：10578497
> 
> 赞同：18
> 
> 时间：2012-05-14T06:40:46.473
> 
> 标签：svn, svn-checkout

我已经使用 GIT 很长时间了，并且对 SVN 很陌生。我找不到让我满意的 svn import 和 checkout 之间的区别。如果有人可以举个例子给我看，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-14T06:46:56.520

“导入”和“结帐”是截然相反的。

“导入”是将完全不受版本控制的东西带入 SVN。

一旦某事处于 SVN 控制之下，您就可以“提交”（新的修改）或“签出”（您已经提交的内容）。

在任何时候，您都可以将部分或全部项目“导出”到“干净目录”中。您导出的源*不受*版本控制。

您“导入”和“导出”SVN。

你“提交”和“结帐”已经在 SVN 控制之下的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T06:44:42.463

导入：将未版本化的文件或树提交到存储库中。

签出：从存储库中签出工作副本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T06:47:19.747

当您使用 CHECKOUT 时，您正在做的是下载和同步本地计算机中的存储库目录。

IMPORT 您正在将本地路径提交/上传到存储库中

# android - 是否可以在 apk 中混淆部分类/包？

> ID：10578499
> 
> 赞同：1
> 
> 时间：2012-05-14T06:40:48.250
> 
> 标签：android, obfuscation, proguard

我开发了一个 android 应用程序，它具有一组活动、后台服务和一些其他实用程序包（它们是用纯 java 编写的），我不想混淆活动和后台服务，但需要混淆实用程序包（纯 java 代码），是否可以这样做？如果是，那么如何在我的 proguard.cfg 文件中启用它？

或者以更精确的方式：应用程序正在使用一些添加到项目的 lib 文件夹中的外部 jars，我希望只有这些 jars 应该被混淆，其余的应用程序代码（活动、服务等）不应该被混淆。如何使用 eclipse 和 proguard.cfg 达到同样的效果？

问候， 皮克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:15:26.400

如果激活了 proguard，那么在 Eclipse 中创建签名 APK 时，Android 将自动包含使用的库文件，因此您不必指定此项。

如果您的应用程序的包名与库的包名不同，那么您可以简单地使用通配符并将其添加到您的 proguard.cfg 文件中

```
-keepnames class com.mypackagename.** {
 *;
} 
```

如果包名相同，那么您必须手动指定哪些类应该被混淆，例如

```
-keepnames class com.mypackagename.MyApp {
 *;
}
-keepnames class com.mypackagename.subpackage.MyClass {
 *;
} 
```

# android - PreferenceManager.setDefaultValues readAgain 参数和新首选项

> ID：10578501
> 
> 赞同：8
> 
> 时间：2012-05-14T06:40:51.397
> 
> 标签：android, sharedpreferences, default-value, android-preferences

我`PreferenceManager.setDefaultValues(context,R.xml.preferences,false)`用来在我的应用程序中设置首选项的默认值，我注意到如果我添加一个新的首选项，那么我`PreferenceFragment`不会显示它的默认值，即使它是在*preferences.xml*中设置的。

这是因为我将*readAgain*指定为 false 吗？

我知道我可以简单地试试看，但我只是想确定*readAgain*是为此目的，即重新读取默认值不是为了重新设置用户设置，而是设置新属性的默认值. 如果这正是*readAgain*标志的目的，那么您能否给我一个理由不总是将*readAgain*设置为 true，因为它不会重置用户首选项？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T08:49:48.893

Setting the `readagain` flag to true will ensure that all unset-default values are set again. That's the summary.

Setting the `readagain` will cause extra overhead since basically it means that, the code will go through the entire `SharedPreference` once more to check them. With the `readAgain` false,all it does is to check whether the file ( **has_set_default_values.xml** ) which is used as a marker for setting default values is present or not.

In any case, It won't set any values that are already set .

# html - 努力查看我的 HTML 输出中的所有数据库条目

> ID：10578514
> 
> 赞同：1
> 
> 时间：2012-05-14T06:42:09.467
> 
> 标签：html, ruby-on-rails, css, ruby

我有一个非常简单的 Ruby on Rails 应用程序，它有一个文本框，我可以在其中将内容（限制为 200 个字符）输入到数据库中。

我的目标是在文本框下方列出项目，以便当用户输入内容时，它会出现在不断增长的列表的顶部。

现在我有一些糟糕的代码不起作用，但我不知道为什么。

在位于 的查看页面中`home.html.erb`，我有这个区域可供查看课程：

```
<td class="my-lessons">

</td> 
```

在我的`Lesson controller`我有以下内容：

```
 def printLesson
    @lesson = Lesson.find(params[:id])

    puts @lesson.content
  end 
```

我不确定如何在我的代码中调用 printLesson，也不确定如何显示课程数据库的内容。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:56:14.390

`home.html.erb``http://localhost:3000/lesson/home`如果您在以下位置定义了适当的路线，则会在您前往时呈现`routes.rb`：

```
match 'lesson/home' => 'lesson#home' 
```

所以在你的`Lesson`控制器中，在`home`动作中有以下内容：

```
def home
  @lessons = Lesson.all
end 
```

现在在您的`home.html.erb`视图中呈现`@lessons`

```
<% @lessons.each do |lesson| %>
<tr>
    <td class="my-lessons">
      <%= lesson.Name %>
    </td>
</tr>
<% end %> 
```

`puts @lesson.content`您遇到的问题是您认为您必须告诉 Rails 在您的控制器操作（行）中吐出输入。Rails 按照惯例工作。在您的控制器操作中创建的任何实例变量都可以在您的视图中访问。所以上`@lessons`例中的变量可以在`home.html.erb`视图中访问。

我建议阅读以下内容以获取有关路线和渲染视图的更多信息：

*   [http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/layouts_and_rendering.html)
*   [http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)

# javascript - 从 Jade 模板调用带有回调的辅助函数

> ID：10578517
> 
> 赞同：3
> 
> 时间：2012-05-14T06:42:42.157
> 
> 标签：javascript, node.js, express, pug

我刚刚开始使用 Node.js，所以请原谅任何愚蠢！我正在尝试使用 Node.js 创建一个新应用程序。我将 Express 框架与 Postgresql 数据库一起使用。问题是在我看来，我想调用一个函数。所以我使用了一个从我的翡翠文件中调用的辅助函数。但是因为这个函数访问数据库，我尝试使用回调来使其工作。

但是，我似乎无法从我的翡翠模板中调用一个函数，并将最后一个参数作为函数。当只传递一个参数并且它不是回调函数时，辅助函数工作正常。但由于数据库查询需要一段时间，数据从未显示出来。但是，当我尝试从我的翡翠模板调用带有回调的函数时，我得到了一个语法错误。

我的翡翠模板中的函数调用：

```
#{ nameAndVersion(result.bu_entrep_id, function(error, result)) } 
```

我的辅助函数（这很简单，因为我试图让它工作）：

```
exports.helpers= {
nameAndVersion: function(entid, callback) {
var x=1;
     callback(null, x);
     console.log(1);
}
}; 
```

我的错误：

```
500 SyntaxError: Unexpected token ) 
```

所以，基本上，我想从我的翡翠模板中调用一个辅助函数，并让该函数成为一个回调函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T13:05:41.290

你想做：

1.  解析模板
2.  检索数据
3.  使用数据渲染模板

快递模板预计会做：

1.  检索数据
2.  解析和渲染数据

一旦开始渲染，您就不必执行复杂的代码（如果您的数据库不可用怎么办？）。

翡翠帮手只有成型目的，没有功能。

您应该做的是在调用渲染器时提供必要的数据，而不是调用助手。

```
app.get('anyPage', function(req, res) {
   database.doSomeDataBaseQuery( /* Data base callback */ function(data, err) {
     if(!err) res.render('pageTemplate', {dataBaseData:data});
   }
}); 
```

# c++ - ATL CString 到字符数组的转换

> ID：10578522
> 
> 赞同：5
> 
> 时间：2012-05-14T06:43:08.593
> 
> 标签：c++, visual-c++, char, c-strings

我想将 a[`CString`](https://msdn.microsoft.com/en-us/library/aa315043(v=vs.60).aspx)转换为`char[]`. 有人告诉我该怎么做？

我的代码是这样的：

```
CString strCamIP1 = _T("");
char g_acCameraip[16][17];
strCamIP1 = theApp.GetProfileString(strSection, _T("IP1"), NULL);
g_acCameraip[0] = strCamIP1; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T06:49:36.767

这似乎是正确的。[http://msdn.microsoft.com/en-us/library/awkwbzyc.aspx](http://msdn.microsoft.com/en-us/library/awkwbzyc.aspx)

```
CString aCString = "A string";
char myString[256];
strcpy(myString, (LPCTSTR)aString); 
```

在您的情况下，这将是

```
strcpy(g_acCameraip[0], (LPCTSTR)strCamIP1); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-14T06:49:49.697

从[MSDN](http://msdn.microsoft.com/en-us/library/ms235631.aspx)网站：

```
// Convert to a char* string from CStringA string 
// and display the result.
CStringA origa("Hello, World!");
const size_t newsizea = (origa.GetLength() + 1);
char *nstringa = new char[newsizea];
strcpy_s(nstringa, newsizea, origa);
cout << nstringa << " (char *)" << endl; 
```

CString 是基于`TCHAR`so 如果不使用`_UNICODE`它`CStringA`进行编译，或者如果你使用它进行编译，`_UNICODE`那么它就是`CStringW`.

如果`CStringW`转换看起来有点不同（示例也来自[MSDN](http://msdn.microsoft.com/en-us/library/ms235631.aspx)）：

```
// Convert to a char* string from a wide character 
// CStringW string. To be safe, we allocate two bytes for each
// character in the original string, including the terminating
// null.
const size_t newsizew = (origw.GetLength() + 1)*2;
char *nstringw = new char[newsizew];
size_t convertedCharsw = 0;
wcstombs_s(&convertedCharsw, nstringw, newsizew, origw, _TRUNCATE );
cout << nstringw << " (char *)" << endl; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-28T20:46:09.020

如果您使用的是 ATL，则可以使用转换宏之一。CString 将数据存储为 tchar，因此您将使用 CT2A()（宏名称中的 C 代表 const）：

```
CString from("text");

char* pStr = CT2A((LPCTSTR)from); 
```

这些宏很聪明，如果 tchar 代表 ascii（未定义 _UNICODE），它们只是将指针传递过去，什么也不做。

下面的更多信息，在**ATL 字符串转换类**部分下： [http ://www.369o.com/data/books/atl/index.html?page=0321159624%2Fch05.html](http://www.369o.com/data/books/atl/index.html?page=0321159624%2Fch05.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-14T06:48:58.403

您可以使用[wcstombs_s](http://msdn.microsoft.com/en-us/library/s7wzt4be.aspx)：

```
// Convert CString to Char By Quintin Immelman.
//
CString DummyString;
// Size Can be anything, just adjust the 100 to suit. 
const size_t StringSize = 100;
// The number of characters in the string can be
// less than String Size. Null terminating character added at end.
size_t CharactersConverted = 0;

char DummyToChar[StringSize];

wcstombs_s(&CharactersConverted, DummyToChar, 
       DummyString.GetLength()+1, DummyString, 
       _TRUNCATE);
//Always Enter the length as 1 greater else 
//the last character is Truncated 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-13T11:12:10.417

您**真的**必须将对象**复制**`CString`到固定`char`数组中吗？

```
enum { COUNT=16 };
CString Cameraip[COUNT];
Cameraip[0] = theApp.GetProfileString(strSection, _T("IP1"), NULL);
// add more entries... 
```

...然后 - 稍后 - 在访问条目时，例如像这样

```
for (int i=0; i<COUNT; ++i) {
    someOp(Cameraip[i]); // the someOp function takes const CString&
} 
```

...*如果*需要，您可以[转换它们。](http://msdn.microsoft.com/library/ms235631.aspx)

 ** * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T05:40:45.100

使用 memcpy 。

```
char c [25];
Cstring cstr = "123";
memcpy(c,cstr,cstr.GetLength()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-14T06:58:32.727

`CStringA/W`可以廉价且隐式地转换为`const char/wchar_t *`. 每当您需要 C 风格的字符串时，只需传递`CString`对象本身（或结果`.GetString()`相同）。只要字符串对象处于活动状态且未修改，指针就会保持有效。

```
strcpy(g_acCameraip[0], strCamIP1);
// OR
strcpy(g_acCameraip[0], strCamIP1.GetString()); 
```

如果您需要可写（非常量）缓冲区，请使用`.GetBuffer()`可选的最大长度参数。

如果你有`CStringW`但你需要`const char*`，反之亦然，你可以使用一个临时`CStringA`对象：

```
strcpy(g_acCameraip[0], CStringA(strCamIP1).GetString()); 
```

* * *

但更好的方法是拥有`CString`s 数组。您可以在需要空终止字符串的任何地方使用它们，但它们也会为您管理字符串的内存。

```
std::vector<CString> g_acCameraip(16);
g_acCameraip[0] = theApp.GetProfileString(strSection, _T("IP1"), NULL); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-11T12:06:04.580

fopen 是需要 char* 参数的函数。所以如果你有 CString 作为可用的字符串，你可以使用下面的代码。开心:) 在这里，`cFDlg.GetPathName().GetString();`基本上在我的代码中返回 CString。

```
char*pp  = (char*)cFDlg.GetPathName().GetString();
FILE *fp = ::fopen(pp,"w"); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-21T11:04:22.717

```
char strPass[256];
strcpy_s( strPass, CStringA(strCommand).GetString() ); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-19T21:29:11.480

## 这很简单

[ATL CStrings](https://msdn.microsoft.com/en-us/library/aa315043(v=vs.60).aspx)允许非常简单的使用，而无需在类型之间进行大量转换。您可以最轻松地做到：

```
CString cs = "Test";
const char* str = static_cast<LPCTSTR>(cs); 
```

或在 UNICODE 环境中：

```
CString cs = "Test";
const wchar_t* str = static_cast<LPCTSTR>(cs); 
```

## 这个怎么运作

（[`static_cast`](http://en.cppreference.com/w/cpp/language/static_cast)或 C 样式转换）将触发[`CString::operator LPCTSTR`](https://msdn.microsoft.com/en-us/library/aa300569(v=vs.60).aspx)，因此您无需自己进行任何指针重新解释，而是依赖 ATL 代码！

这个演员表操作员的文档说：

> 这个有用的转换运算符提供了一种有效的方法来访问包含在**CString**对象中的**以 null 结尾的 C 字符串。*****没有字符被复制；******只返回一个指针。***小心这个运算符。如果在获得字符指针后更改**CString**对象，可能会导致内存重新分配，从而使指针无效。

 *****## 可修改指针

如上所述，强制转换运算符返回的指针**并不意味着要修改**。但是，如果您仍然需要对某些过时的 C 库使用可修改指针，则可以使用 a [`const_cast`](http://en.cppreference.com/w/cpp/language/const_cast)（如果您确定该函数不会修改指针）：

```
void Func(char* str) // or wchar_t* in Unicode environment
{
    // your code here
}

// In your calling code:
CString cs = "Test";
Func(const_cast<LPTSTR>(static_cast<LPCTSTR>(test))); // Call your function with a modifiable pointer 
```

如果您想修改指针，您将无法绕过将某种内存复制到可修改内存，如其他答案所述。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-04-01T14:26:18.643

```
 CString str;
    //Do something
    char* pGTA = (LPTSTR)(LPCTSTR)str;//Now the cast 
```

只是（LPTSTR）（LPCTSTR）。希望这是你需要的:)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-09-17T10:02:19.463

有一个硬编码的方法..

```
CString a = L"This is CString!";
char *dest = (char *)malloc(a.GetLength() + 1);
// +1 because of NULL char

dest[a.GetLength()] = 0; // setting null char

char *q = (char *)a.m_pszData;
//Here we cannot access the private member..
//The address of "m_pszData" private member is stored in first DWORD of &a...
//Therefore..

int address = *((int *)&a);

char *q = (char *)address;
// Now we can access the private data!, This is the real magic of C
// Size of CString's characters is 16bit...
// in cstring '1' will be stored as 0x31 0x00 (Hex)
// Here we just want even indexed chars..

for(int i = 0;i<(a.GetLength()*2);i += 2)
  dest[i/2] = *(q+i);

// Now we can use it..
printf("%s", dest);
```******

# msmq - msmq 错误代码 -1072824294

> ID：10578524
> 
> 赞同：0
> 
> 时间：2012-05-14T06:43:24.923
> 
> 标签：msmq

我正在使用 MSMQ 和 java 客户端。当我尝试接收消息时，我得到

小时 <-1072824294> 。有任何想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:45:05.303

您收到 MQ_ERROR_BUFFER_OVERFLOW 错误。请检查您的代码

# php - 以电子邮件形式发送数据数组

> ID：10578531
> 
> 赞同：15
> 
> 时间：2012-05-14T06:44:24.707
> 
> 标签：php, arrays, email

我有一个 PHP 数组，我需要通过电子邮件测试该数组的内容。我知道我们可以使用 看到整个数组`var_dump()`，但是如何在电子邮件中发送该输出？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-05-14T06:45:54.130

您可以使用`print_r( $array, true )`以字符串形式获取输出。然后，您可以将其传递到您的消息正文中。第二个参数指示方法返回值而不是直接输出，从而允许您处理结果。

```
$message = "Results: " . print_r( $array, true ); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-09T05:50:26.700

首先使用 foreach() 或 implode 函数转换您的数组字符串。我正在使用 foreach 将数组转换为字符串..

其中字符串将是键值对。

```
$data = '';
foreach ($array as $key=>$value){
    $data .= $key.'-------'.$value;
    $data.= "\n";
} 
```

或使用以下代码将数组转换为字符串。

```
$data = implode("\n", $array); 
```

现在使用 php 邮件功能发送。

```
mail($recipient, $subject, $data, $headers); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-02T10:38:12.767

```
mail('email@domain.com', 'array data', '<pre>'.print_r($array, true).'</pre>'); 
```

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

```
mail ( string $to , string $subject , string $message); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T06:48:19.967

尝试使用以下代码，它将清楚地显示完整的数组

```
echo "<pre>";
print_r($array);
echo "</pre>"; 
```

# jquery - 在 index.html 页面中调用外部 HTML 页面时，页眉和页脚位置不固定？

> ID：10578545
> 
> 赞同：0
> 
> 时间：2012-05-14T06:45:40.623
> 
> 标签：jquery, android, jquery-mobile

在 jquery mobile 的 index.html 页面中调用一个外部 html 页面时，页眉和页脚出现问题。这是我正在关注的示例代码：

索引.html

```
 <section id="main" data-role="page">
      <header data-role="header"> 
      </header>
      <div data-role="content" class="mainScreen">
        <a href="#single"  data-theme="e" data-role="button" >Single</a>
        <a href="sample.html"  data-theme="e" data-role="button">Sample</a>
        <a href="#faq" data-transition="slide" data-theme="e"data-role="button">FAQ</a>
    </div>
  </section>
   <section id="single" data-role="page"> 
      <header data-role="header">
           <div>..</div>  
      <footer data-role="footer"> 
   </section>
   <section id="faq" data-role="page"> 
   <header data-role="header"> 
               <div>..</div> 
   <footer data-role="footer">  
  </section> 
```

main.js

```
 $("header").attr("data-position","fixed").attr("data-tap-toggle","false");
    $("footer").attr("data-position","fixed").attr("data-tap-toggle","false"); 
```

示例.html

```
<html>
  <head>......</head>
  <body>
     <section id="sample" data-role="page"> 
      <header data-role="header">
           <div>..</div>  
      <footer data-role="footer"> 
   </section>
 </body>
</html> 
```

在上面的 index.html 页面中，当调用“#single”和“#faq”时，页眉和页脚通过固定位置正确显示，但是当调用 sample.html（外部 HTML 页面）时，页眉和页脚位置不显示固定位置。他们正在移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:55:59.283

问题在于您调用 attr() 方法的时间。您需要在创建之前绑定到页面。这样，在 JQM 增强标记之前设置页眉和页脚属性。IE

```
$(document).on('pagebeforecreate', function(){
    $("header").attr("data-position","fixed").attr("data-tap-toggle","false");
    $("footer").attr("data-position","fixed").attr("data-tap-toggle","false");
}); 
```

**注意：**如果您的 jQuery 版本是 1.7 之前的版本，请使用 bind 或 delegate 而不是 on()

# asp.net - ReportViewer 中的汇总

> ID：10578547
> 
> 赞同：0
> 
> 时间：2012-05-14T06:45:50.150
> 
> 标签：asp.net, reporting-services, report, reportviewer

```
+----------+------------+------+------+--------------+---------+---------+
|          |    SUBJ    |  MIN |  MAX |    RESULT    | STATUS  | PERCENT |
|          +------------+------+------+--------------+---------+---------+
|          |  Subj1     |   35 |  100 |        13    |  FAIL   |  13.00% |
|EXAM NAME |  Subj2     |   35 |  100 |        63    |  PASS   |  63.00% |
|          |  Subj3     |   35 |  100 |        35    |  PASS   |  35.00% |
|          +------------+------+------+--------------+---------+---------+
|          |  Total     |  105 |  300 |       111    |  PASS   |  37.00% |
+----------+------------+------+------+--------------+---------+---------+ 
```

这是我的报告查看器报告格式。SubTotal 行计算上述所有列的总数。一切都很好。但在状态栏中显示通过。如果状态列中有单个失败，我希望它显示失败。如果 Result < Min 则我正在生成状态，那么它是失败的，否则它是通过的。现在如何根据条件更改下面的 SubTotal 行。有没有办法直接从数据库中显示小计行。任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:36:09.533

最简单的方法是使用自定义代码（右键单击报告的非显示区域，选择属性并单击代码选项卡） - 在详细信息中计算通过/失败分数，将其显示在组页脚并重置它在组标题中：

```
Dim PassFail As String

// Reset Pass or Fail status in group header
Public Function ResetAndDisplayStatusTitle() AS String
    PassFail = "PASS" // Initialise status to pass
    ResetAndDisplayStatusTitle = "Status"
End Function

// Calculate pass/fail on each detail row and remember any fails
Public Function CalculatePassFail() As String
    Dim ThisResult As String

    // Calculate whether this result is pass or fail
    If Fields!Result.Value < Fields!Min.Value Then
        ThisResult = "FAIL"
    Else
        ThisResult ="PASS"
    End If

    // Remember any failure as overall failure
    If ThisResult = "FAIL" Then PassFail = "FAIL"

    CalculatePassFail = ThisResult
End Function 
```

然后将自定义代码绑定到表格中的单元格，如下所示：

在您输入的组标题中状态列的值中：

```
=Code.ResetAndDisplayStatusTitle() 
```

在您输入的详细信息行中状态列的值中：

```
=Code.CalculatePassFail() 
```

在您放置的组页脚中状态列的值中：

```
=Code.PassFail 
```

关于直接从数据库中获取小计行，有几种方法取决于您所追求的结果。

*   将明细行连接到 SQL 中的小计行（以便小计字段出现在数据集中的每一行上）并使用这些字段。
*   再次，使用自定义代码（但这对于小计来说可能过于复杂）

但是，这些技巧仅适用于奇怪的情况，通常可以调整正常的开箱即用小计以提供您想要的结果。如果您想知道具体的事情，最好在单独的问题中解释问题，以便可以单独处理该问题。

# android - 如何在 string.xml 文件中添加“-”

> ID：10578551
> 
> 赞同：86
> 
> 时间：2012-05-14T06:46:11.337
> 
> 标签：android, string

我需要能够在我的`strings.xml`文件中的字符串中放置一个“-”。

我的问题是，当我输入字符串时`"1261eba2-9d8c-11e1-93e3-40409e0f44a1"`，日食会大喊：

> 在这一行发现多个注释： - 将“-”替换为“破折号”字符（–、&;#8211;）

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-05-14T06:51:45.547

因此，当您阅读错误消息时，您的答案将是您必须替换`-`为`&#8211;`. 然后它应该可以正常工作=）

[http://en.wikipedia.org/wiki/Dash](http://en.wikipedia.org/wiki/Dash)

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-06-05T10:18:22.880

当您想向用户显示字符串时，其他答案都可以。用户无法真正区分“真实”破折号和 unicode 诡计。
但是，如果您真的必须使用破折号（例如，因为该字符串在某处用作密码，或者用作 API 的 url 键），那么您可以使用以下格式：

```
<resources xmlns:tools="http://schemas.android.com/tools" tools:ignore="TypographyDashes">
    <string name="EVA_API_KEY">3c42b725-5e20-41c8-982f-dee40be8a05b</string>
</resources> 
```

警告将被删除，并且可以使用常规读取字符串：

```
getResources().getString(R.string.EVA_API_KEY); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-05-14T06:51:02.440

在每个特殊字符前使用**反斜杠**(\)。像我一样\&安卓。

这称为转义字符。( \ )

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-11-05T12:12:19.983

对于连字符使用 (-) (-)...

```
<string name="abc">Welcome &#45; Bro...</string> 
```

和更多符号使用下面的链接

[http://www.degraeve.com/reference/specialcharacters.php](http://www.degraeve.com/reference/specialcharacters.php)

享受...

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-12-29T00:11:22.800

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-14T07:44:14.560

你可能有这个：

```
<string name="test1">1261eba2-9d8c-11e1-93e3-40409e0f44a1</string> 
```

但是您需要以下任何一种：

```
<string name="test2">1261eba2&#8211;9d8c&#8211;11e1&#8211;93e3&#8211;40409e0f44a1</string>
<string name="test3">1261eba2–9d8c–11e1–93e3–40409e0f44a1</string> 
```

在第二个中 - 被替换为 -。很难从视觉上分辨出区别。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-17T15:58:05.463

The quick fix shortcut in Eclipse is `Ctrl` + `1` by default and in Android Studio is `Alt` + `Enter` by default.

# python - 相当于 Clojure 在 Python 中的“assoc-in”和“get-in”

> ID：10578554
> 
> 赞同：4
> 
> 时间：2012-05-14T06:46:25.750
> 
> 标签：python, clojure

在 Clojure 中，您可以更新映射 (dict)`assoc-in`并自动创建密钥路径（如果它不存在）。

```
(assoc-in {:a 1 :b 3} [:c :d] 33)
{:a 1, :c {:d 33}, :b 3} 
```

相同`get-in`：您可以指定键（或列表索引）的路径，`nil`如果它不存在，它将返回路径指定的值。

```
(get-in {:a 1, :c {:d 33}, :b 3} [:c :d])
33
(get-in {:a 1, :c {:d 33}, :b 3} [:c :e])
nil 
```

是否有开箱即用的 Python 等效或类似的快捷方式？（是的，我知道我可以自己编写狡猾的 dict 包装器，但我想避免它）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:18:09.563

或者关于这个？

```
def assoc_in(dct, path, value):
    for x in path:
        prev, dct = dct, dct.setdefault(x, {})
    prev[x] = value

def get_in(dct, path):
    for x in path:
        prev, dct = dct, dct[x]
    return prev[x]

d = {}

assoc_in(d, ['a', 'b', 'c'], 33)
print d

x = get_in(d, ['a', 'b', 'c'])
print x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T07:11:15.663

这个怎么样？

```
>>> from collections import defaultdict
>>> def cdict():
...     return defaultdict(cdict)
... 
>>> d = cdict()
>>> d['a']=1
>>> d['b']=3
>>> d
defaultdict(<function cdict at 0x28d3ed8>, {'a': 1, 'b': 3})
>>> d['c']['d'] = 33
>>> d['c']['d']
33
>>> d
defaultdict(<function cdict at 0x28d3ed8>, {'a': 1, 'c': defaultdict(<function cdict at 0x28d3ed8>, {'e': defaultdict(<function cdict at 0x28d3ed8>, {}), 'd': 33}), 'b': 3})
>>> d['c']['e']
defaultdict(<function cdict at 0x28d3ed8>, {})
>>> 
```

它返回一个空`cdict()`键未找到而不是`nil`or`None`但否则我认为它的行为相同。

可以`repr`做一些工作！

# ios - iOS如何捕捉将标准键盘类型切换为数字键盘的事件？

> ID：10578555
> 
> 赞同：0
> 
> 时间：2012-05-14T06:46:29.673
> 
> 标签：ios, events, keypad

切换到数字键盘时，我想使用我的自定义数字键盘。如何实现这个功能？苹果没有提供任何关于这个的API？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:22:48.470

UITextInputMode 类有更改通知

```
UITextInputCurrentInputModeDidChangeNotification 
```

所以添加这个通知

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardModeChange:) name:UITextInputCurrentInputModeDidChangeNotification object:nil]; 
```

我希望它对你有用。快乐编码:)

# objective-c - iOS - 不能使用“超级”作为参考？

> ID：10578562
> 
> 赞同：6
> 
> 时间：2012-05-14T06:47:04.333
> 
> 标签：objective-c, cocoa-touch, inheritance, nsinvocation

我正在尝试使用 an`NSInvocation`从子类调用超类方法。涉及的代码相对简单，如下所示：

```
- (NSInvocation*) invocationWithSelector:(SEL)selector {
    NSInvocation* call = [[NSInvocation alloc] init];
    [call retainArguments];
    call.target = super;  //ERROR:  use of undeclared identifier 'super'

    call.selector = @selector(selector);

    return call;
} 
```

这对我来说似乎有点奇怪，因为我一直认为它`super`遵循几乎相同的规则`self`（即它可以被视为对相关对象的直接引用并分配给变量，用作返回值等） . 在实践中似乎并非如此。

无论如何，有什么简单的方法可以让我`NSInvocation`以超类实现为目标（我不能`self`用作目标，因为子类覆盖了超类方法），还是我需要寻找其他方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T07:00:09.683

请参阅[Objective-C 中的 super 到底是什么？](https://stackoverflow.com/questions/3095360/what-exactly-is-super-in-objective-c)有关更多信息，但 super 实际上并不是一个对象。Super 是编译器生成 obj-c 运行时调用（特别是 objc_msgSendSuper）的关键字。基本上，这就像在发送消息之前将您的类转换为它的超类。

**编辑**因此，如果您重写了要调用的方法，则必须编写另一个方法来直接调用 [super method] 并将调用设置为调用该方法。运行时只会向对象发送消息，它们将在实现它们的继承链的最低成员处处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:50:24.950

`super`和`self`是同一个对象，所以只需使用

```
call.target = self; 
```

它们之间的区别在于，您可以将`super`其用作消息的接收者，`self`以确保它调用超类的实现。

# jquery - jquery $(this).id 返回未定义

> ID：10578566
> 
> 赞同：47
> 
> 时间：2012-05-14T06:47:22.397
> 
> 标签：jquery, asp.net

我在页面上有两个 asp 单选按钮，它们位于`updatepanel`. 我用 jQuery 为他们写了一个点击事件，如下所示：

```
$(document).ready(function () {
    $(".inputs").click(function () {
         alert($(this).id);
    });
}); 
```

但它返回未定义。问题是什么？

```
EDIT:

        alert(" or " + $(this).attr("id"));
alert(this.id); 
```

这两行返回`null`！

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-05-14T06:51:50.663

`$(this)`并且`this`不一样。第一个代表一个包裹在您的元素周围的 jQuery 对象。第二个只是你的元素。该`id`属性存在于元素上，但不存在于 jQuery 对象上。因此，您有几个选择：

1.  直接访问元素上的属性：

    `this.id`

2.  从 jQuery 对象访问它：

    `$(this).attr("id")`

3.  从 jQuery 中拉出对象：

    `$(this).get(0).id; // Or $(this)[0].id`

4.  `id`从`event`对象获取：

    当引发事件时，例如单击事件，它们会携带重要信息和参考。在上面的代码中，您有一个点击事件。该事件对象引用了两个项目：`currentTarget`和`target`。

    使用`target`，您可以获得`id`引发事件的元素的 。`currentTarget`只会告诉您事件当前正在冒泡的元素。这些并不总是相同的。

    `$("#button").on("click", function(e){ console.log( e.target.id ) });`

在所有这些中，最好的选择是直接从`this`自身访问它，除非您参与一系列嵌套事件，否则最好使用`event`每个嵌套事件的对象（给它们所有唯一的名称）来更高或更低范围内的参考元素。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-05-14T06:53:57.700

另一种选择（只是你已经看到了）：

```
$(function () {
    $(".inputs").click(function (e) {
         alert(e.target.id);
    });
}); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-14T06:50:11.367

Hiya**演示** [http://jsfiddle.net/LYTbc/](http://jsfiddle.net/LYTbc/)

这是对 DOM 元素的引用，因此您可以直接包装它。

`attr`接口：[http ://api.jquery.com/attr/](http://api.jquery.com/attr/)

.attr() 方法仅获取匹配集中第一个元素的属性值。

祝你好运，加油！

**代码**

```
$(document).ready(function () {
    $(".inputs").click(function () {
        alert(this.id);

        alert(" or " + $(this).attr("id"));
    });
});​ 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-14T06:48:55.313

`$(this)`是一个包装 DOM 元素的 jQuery 对象，`this`而 jQuery 对象没有`id`属性。您可能只想`this.id`获取`id`clicked 元素的属性。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-12-23T01:42:04.840

使用这个动作

```
$(document).ready(function () {
var a = this.id;

alert (a);
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-14T06:50:29.590

this : 是 DOM 元素 $(this) : Jquery objct，它用 Dom 元素包装，你也可以检查这个答案 [this vs $(this)](https://stackoverflow.com/questions/7389944/this-vs-this-in-jquery)

试试这个 [Attr()](http://api.jquery.com/attr/)。获取匹配元素集中第一个元素的属性值。

```
$(document).ready(function () {
    $(".inputs").click(function () {
         alert(" or " + $(this).attr("id"));

    });
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-21T14:21:15.687

尝试：

```
$(document).ready(() => {
    $(".inputs").click((e) => {
         alert($(e.target).attr('id'))
    })
}) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-15T11:05:17.153

您可以使用`.attr('id')`来获取`id`元素的。

```
$(".fichier").bind('click', function(){      
     alert($(this).attr('id'));
}); 
```

# compiler-errors - “handle”函数和Real World Haskell

> ID：10578572
> 
> 赞同：13
> 
> 时间：2012-05-14T06:48:10.667
> 
> 标签：compiler-errors, haskell

我正在阅读 RWH，我已经来到了第 9 章。它介绍了以下一段代码：

```
import System.IO
import Control.Exception

saferFileSize :: FilePath -> IO (Maybe Integer)
saferFileSize path = handle (\_ -> return Nothing) $ do
  h <- openFile path ReadMode
  size <- hFileSize h
  hClose h
  return (Just size) 
```

但是它不会编译，并给出以下错误消息：

```
test.hs:5:22:
    Ambiguous type variable `e0' in the constraint:
      (Exception e0) arising from a use of `handle'
    Probable fix: add a type signature that fixes these type variable(s)
    In the expression: handle (\ _ -> return Nothing)
    In the expression:
      handle (\ _ -> return Nothing)
      $ do { h <- openFile path ReadMode;
             size <- hFileSize h;
             hClose h;
             return (Just size) }
    In an equation for `saferFileSize':
        saferFileSize path
          = handle (\ _ -> return Nothing)
            $ do { h <- openFile path ReadMode;
                   size <- hFileSize h;
                   hClose h;
                   .... } 
```

这里出了什么问题？为什么编译不出来？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-14T07:35:45.917

在 RWH 出现后不久，异常接口被更改为支持更灵活的处理程序，其中处理程序的类型决定了它将捕获哪些异常。例如，一个处理程序`SomeException`会捕获任何东西（通常不是一个好主意），而一个处理程序`IOException`只会捕获 IO 异常。

因此，使用示例中的“无操作”处理程序很容易遇到歧义问题，因为编译器无法推断您要捕获的异常类型。解决此问题的一种简单方法是为您的处理程序函数提供类型签名。

```
handle ((\_ -> return Nothing) :: IOException -> IO (Maybe Integer)) $ do ... 
```

不过，这可能有点冗长。另一种解决方案是专门化`handle`.

```
handleIO :: (IOException -> IO a) -> IO a -> IO a
handleIO = handle 
```

然后，您可以`handleIO`在想要处理 IO 异常时使用，而无需拼出处理程序的类型签名。

```
saferFileSize path = handleIO (\_ -> return Nothing) $ do ... 
```

第三种选择是使用`ScopedTypeVariables`扩展，它（除其他外）允许您仅为函数的参数提供类型注释，从而推断其余部分。

```
{-# LANGUAGE ScopedTypeVariables #-}
saferFileSize path = handle (\(_ :: IOException) -> return Nothing) $ do ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T07:14:44.643

RWH 比较老了。`handle`函数签名在 GHC 6.10 左右发生了变化。

要使用旧版本，请导入`Control.OldException`而不是 Control.Exception`。您将收到弃用警告，但程序将编译。

或者您可以使用新接口并为处理程序提供显式签名，如下所示：

```
((\ _ -> return Nothing) :: IOException -> IO (Maybe Integer)) 
```

# php - 如何使用 html DOM 重新创建图像 src 链接？

> ID：10578578
> 
> 赞同：0
> 
> 时间：2012-05-14T06:48:37.640
> 
> 标签：php, simple-html-dom

我使用 HTML DOM 抓取其他页面内容，当我抓取一些图像时，它的 src 显示如下 -

```
<img src="/datas/vt/data=Ay5GWBeob_WIPLDYoIWcfVXxvZu9XwJ55OX7Ag,OfrBKR" style="margin-right: 12px; margin-top: 1px; padding: 1px;" width="270" border="1" height="185"> 
```

有什么方法可以将内容添加到图像 src？例如：www.contentgrabbingsitename.com !!!

像

```
<img src="www.contentgrabbingsitename.com/datas/vt/data=Ay5GWBeob_WIPLDYoIWcfVXxvZu9XwJ55OX7Ag,OfrBKR" style="margin-right: 12px; margin-top: 1px; padding: 1px;" width="270" border="1" height="185"> 
```

我的代码：

```
foreach($html->find('img') as $e)
    echo $e->outertext . '<br>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:16:09.223

您可以只编辑属性，例如：

```
foreach($html->find('img') as $e) {
    // prefix 'hello' to the src attribute
    if ('/' == $e->src[0]) {
        $e->src = "http://mydomain.com" . $e->src;
    }
} 
```

之后，您只需保存页面。

# java - startActivity() 在 Android 中导致崩溃

> ID：10578586
> 
> 赞同：1
> 
> 时间：2012-05-14T06:49:22.273
> 
> 标签：java, android

所以我刚开始学习开发Android应用，而且我有编程背景（主要是Python），所以我有点知道自己在做什么。我在使用 startActivity() 时遇到问题。我已经对代码进行了注释，以确定错误的确切位置，并且在遇到 startActivity() 时就发生了。我得到的错误来自模拟器，它只是一个弹出窗口，上面写着“不幸的是，测试已停止”。（测试是我的程序名称）单击我的按钮后。我的代码是这个

```
package com.test.test;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;

public class TestActivity extends Activity {

public final static String EXTRA_MESSAGE = "com.test.test.MESSAGE";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public class DisplayMessageActivity extends Activity {
        @Override
        public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        }
    }

    public void sendMessage(View view) {
        setContentView(R.layout.main);
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) findViewById(R.id.textBox1);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
    }

} 
```

现在我知道它还不会做任何事情，但为什么它会崩溃？我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<EditText android:id="@+id/textBox1"
    android:layout_weight="1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="@string/textBox1Hint" />
<Button 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button1"
    android:onClick="sendMessage" />   

</LinearLayout> 
```

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.test.test"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".TestActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".DisplayMessageActivity" >
    </activity>

</application>
</manifest> 
```

我看到很多其他人对此有疑问，因为他们没有在清单中声明他们的活动，但我认为我做得很好。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:59:16.403

一个可能的问题是

```
EditText editText = (EditText) findViewById(R.id.textBox1); 
```

返回`null`是因为您没有在任何地方设置活动的布局（使用`setContentView`）

如果您`editetext`包含在`view`（传递给`sendMessage`）中，您可以使用

```
EditText editText = (EditText) view.findViewById(R.id.textBox1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:54:43.497

我认为问题是您在 DisplayMessageActivity 上并开始相同的活动。您需要做的是启动测试活动并从意图调用 DisplayMessageActivity。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T07:01:40.560

问题是这样的，
你在清单中声明主类是TestActivity：

```
<activity
    android:name=".TestActivity"
    android:label="@string/app_name" > 
```

但是您想启动 DisplayMessageActivity，因此，将其更改为以下内容：

```
public class TestActivity extends Activity {
@Override 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T07:06:19.373

我无法理解您通过再次开始相同的活动实际上想要实现的目标。试试这个，

```
 public class DisplayMessageActivity extends Activity {
    private  String message ;
        @Override
        public void onCreate(Bundle savedInstanceState){
            super.onCreate(savedInstanceState);
setLayout(R.layout.<name of the xml file> ); // change the name if it is not in layout folder
           EditText editText = (EditText) findViewById(R.id.textBox1);
           String message = editText.getText().toString();
           Button submitBtn = (Button) findViewById(R.id.button1);
           submitBtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                     Toast toast = Toast.makeText(DisplayMessageActivity.this,
                                message,
                                Toast.LENGTH_SHORT);
                        toast.show();
    }});
        }
    } 
```

上面的代码只是显示了字符串，这只是一个示例代码......希望有帮助！

**编辑** 要运行此代码，您还必须将 id 标记添加到 XML 文件中的 Button Tag 中，其值为 button1..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T07:20:57.950

Actullay 你已经在activity里面创建了Activity。这不是很受欢迎，但如果想坚持下去，那么你必须将 android:name=".DisplayMessageActivity" 更改为

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T08:44:43.153

**对TestActivity**和**DisplayMessageActivity**类使用单独的文件。在您给定的代码中，您没有使用**setContentView为****DisplayMessageActivity**活动指定布局。

# javascript - JavaScript中的'if'-'else'

> ID：10578588
> 
> 赞同：0
> 
> 时间：2012-05-14T06:49:46.590
> 
> 标签：javascript, if-statement

我有一个简单的`if`构造`else`，它与数据网格过滤器一起运行。像这样：

```
if (_r1 <= _r3 && _r3 <= _r2) {
   return true;
}
else {
   return false;
} 
```

在哪里`_r1, _r2, _r3`和数字。它同时具有`true`和`false`。是否可以重写这个结构，它只有例如`true`分支，默认情况下会转到 else 分支？

PS`(if ... ? ... : ...)`不是我想要的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T06:52:14.720

利用：

```
return _r1 <= _r3 && _r3 <= _r2; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T06:58:18.913

```
if (_r1 <= _r3 && _r3 <= _r2) {
   return true;
}
return false; 
```

# struts1 - 如何使用struts1在jsp上显示数据库中的数据？

> ID：10578589
> 
> 赞同：1
> 
> 时间：2012-05-14T06:49:46.737
> 
> 标签：struts1

我是新来的struts。我想在 jsp 上向用户显示数据库中表的所有详细信息。请帮我做这些。

在此先感谢，维迪亚

## LoginFormBean.java

```
public class LoginFormBean extends ValidatorForm 
{

    public String name;
    public String city;
    public String state;
    public String phone;
    public String mailId;
    public String gender;
    public String branch;
    private List studentDetails;

    public void setName(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public void setCity(String city) {
        this.city = city;
    }

    public String getCity() {
        return city;
    }

    public void setPhone(String phone) {
        this.phone = phone;
    }

    public String getPhone() {
        return phone;
    }

    public void setMailId(String mailId) {
        this.mailId = mailId;
    }

    public String getMailId() {
        return mailId;
    }

    public void setGender(String gender) {
        this.gender = gender;
    }

    public String getBranch() {
        return branch;
    }

    public void setBranch(String branch) {
        this.branch = branch;
    }

    public String getGender() {
        return gender;
    }
    public void setState(String state) {
        this.state = state;
    }
    public String getState() {
        return state;
    }

    public List getStudentDetails() {
        return studentDetails;
    }
    public void setStudentDetails(List studentDetails) {
        this.studentDetails = studentDetails;
    }

} 
```

## 登录道.java

```
public class Logindao {
public List viewStudents()
    {

          Connection conn=DBUtil.getDBConnection();
          List list=new ArrayList();
          Statement stmt = null;
          ResultSet rs=null;
          String query="select * from student_info";

               stmt=conn.createStatement();
               rs= stmt.executeQuery(query);
              while(rs.next())
              {

                    list = new ArrayList();  
                    list.add(rs.getString("name"));
                    list.add(rs.getString("phone"));
                    list.add(rs.getString("email"));
                    list.add(rs.getString("city"));
                    list.add(rs.getString("state"));
                    list.add(rs.getString("gender"));
                    list.add(rs.getString("branch"));
              }

          }
              return list;
    } 
```

## RetrieveDataActionClass.java

```
public class RetrieveDataActionClass extends Action{

    public ActionForward execute(ActionMapping mapping,ActionForm form,HttpServletRequest request,HttpServletResponse response)throws Exception,ServletException
     {
            List list=new ArrayList();
            String key="success";
            Logindao dao=new Logindao();
            LoginFormBean formbean=(LoginFormBean)form;

    try{

        list=dao.viewStudents();
        formbean.setStudentDetails(dao.viewStudents());
        }
        catch(Exception e)
        {
           e.printStackTrace();
           System.out.println("Error occured");

        }
        return mapping.findForward(key);
        }
        } 
```

## viewstudents.jsp

```
<body>
   <html:form action="/retrieve" method="post">
    <table border="1">  
    <tr>
    <th>Name</th>
    <th>Phone</th>
    <th>MailId</th>
    <th>City</th>
    <th>State</th>
    <th>Gender</th>
    <th>Branch</th>
    </tr>  

    <logic:iterate id="students" name="LoginFormBean" property="studentDetails">
    <tr>  
    <td><bean:write name="students" property="name"/></td>  
    <td><bean:write name="students" property="phone"/></td>  
    <td><bean:write name="students" property="mailId"/></td>  
    <td><bean:write name="students" property="city"/></td>  
    <td><bean:write name="students" property="state"/></td>  
    <td><bean:write name="students" property="gender"/></td>  
    <td><bean:write name="students" property="branch"/></td>  
    </tr>  
    </logic:iterate> 
    </table>
    </html:form>
  </body> 
```

我的 sqlserver 数据库中有一个表' **student_info** '。列：**姓名、电话、电子邮件、城市、州、性别、分支机构**

我想在jsp中以以下格式显示输出。

## **姓名 电话 电子邮件 城市 州 性别 科**

abc 55555 a@gmail.com hyd AP 女性 IT

xyz 55555 x@gmail.com bang KT 女 CSE

## 错误：

javax.servlet.ServletException：javax.servlet.jsp.JspException：在任何范围内找不到 bean：“LoginFormBean”

在此先感谢，维迪亚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:45:00.830

您需要在您的 JSP 中实例化您的 bean“LoginFormBean”，然后再进行 logic:iterate 。你可以使用 use jsp:usebean 标记

# jpa - 在 JPQL 中取时间场的差异

> ID：10578597
> 
> 赞同：0
> 
> 时间：2012-05-14T06:50:12.350
> 
> 标签：jpa, jpa-2.0, jpql, temporal

我有一个`Event`具有字段`startDate`和`endDate`. 我只想选择那些最多`x`剩下几天的事件`endDate`。我想在 JPQL 中执行此操作，并且只使用一个查询。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T18:59:37.913

JPA 不提供任何标准的日期/时间函数。您可以使用 SQL EXTRACT 使用本机 SQL 查询，

或者，如果您使用的是 EclipseLink，您可以使用 FUNC JPQL 运算符来调用特定于数据库的函数，或者如果使用 EclipseLink 2.4，则使用 E​​XTRACT，

看，

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Functions](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Functions)

# cakephp - 为什么在运行控制器测试时从不调用 isAuthorized()？

> ID：10578598
> 
> 赞同：2
> 
> 时间：2012-05-14T06:50:13.820
> 
> 标签：cakephp, testing, authentication, controller, phpunit

我试图在我的一个控制器中测试授权，以确保只有特定类型的用户才能访问某些操作。但是在运行测试时从不调用 AppController 上的 isAuthorized() 方法。该方法如下所示：

```
public function isAuthorized($user = null){
    if(!isset($this->request->params['admin'])){
        return true;
    }

    return in_array($user['role'], array('admin', 'root'));
} 
```

我的测试功能：

```
public function testArticlesIndex() {
    $this->generate('Articles', array(
        'components' => array('Auth')
    ));

    $this->testAction('/admin/articles', array('return' => 'view'));
    $this->assertEmpty($this->view);
} 
```

我尝试了很多东西来模拟 AuthComponent 而不是模拟它。我无法重现这种情况，这需要 isAuthorized()，其中具有管理员或 root 以外角色的用户尝试访问管理员上的操作并失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T19:19:21.267

当您在未定义要模拟的方法的情况下模拟 Auth 组件时，默认情况下，所有方法都会被模拟。解决方案是模拟您希望模拟的特定 AuthComponent 方法：

```
 $this->generate('Articles', array(
   'components' => array(
     'Auth' => array(
       'redirect' // only mocks AuthComponent::redirect()
     )
   )
 )); 
```

从书中：

> 您可以选择不向整个类传递方法来存根整个类，例如上面示例中的 Session。

见：[http ://book.cakephp.org/2.0/en/development/testing.html#using-mocks-with-testaction](http://book.cakephp.org/2.0/en/development/testing.html#using-mocks-with-testaction)

# php - 可以通过一个插入查询php在mysql中的两个不同表中插入数据吗？

> ID：10578599
> 
> 赞同：-1
> 
> 时间：2012-05-14T06:50:19.313
> 
> 标签：php, mysql, insert

> **可能重复：**
> [将我的 cookie 数据保存到 MySQL 数据库？](https://stackoverflow.com/questions/10550441/save-my-cookie-data-to-mysql-database)

我是编程新手，请与我合作。我有以这种形式保存在 cookie 中的数据。 **1:3456,2:12346,3:345678,4:1,5:3,6:3333,7:234,8:456789,9:3,10:2,11:34567,12:456,13: ,13:!!145!!,14:1,Fname:Muhammad,Lname:Riazz,title:Developer,org:Magiclamp,email:riaz_qadeer90@yahoo.com**

我想将此数据保存在一个表中**1:3456,2:12346,3:345678,4:1,5:3,6:3333,7:234,8:456789,9:3,10:2,11 :34567,12:456,13:,13:!!145!!,14:1,**

并想将此保存到另一个表**Fname:Muhammad,Lname:Riazz,title:Developer,org:Magiclamp,email:riaz_qadeer90@yahoo.com**

有可能的 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:53:15.953

为什么需要用 1 个查询插入它？单行 INSERT 查询对数据库来说并没有那么累，所以你最好只插入两次。

基本上 MySQL 不允许这样做。

[sql - 在一个查询中插入多个表](https://stackoverflow.com/questions/3860280/sql-insert-into-multiple-tables-in-one-query)

# android - Android：服务启动服务或绑定服务

> ID：10578604
> 
> 赞同：2
> 
> 时间：2012-05-14T06:50:27.933
> 
> 标签：android

我有一个服务被主要活动用来做一些后台工作，它开始使用绑定和解除绑定。

这样，当activity启动服务启动和停止时activity调用unbind，这样就可以很好的工作了。

现在我需要一个 CheckBoxpreference ，一旦为 true 将启动服务，并且它必须在后台运行，尽管主要活动将关闭。

获得此结果的最佳方法是什么？我是否必须从首选项开始服务/停止服务，或者当首选项为真时我必须不与主要活动解除绑定？

如果我已经从主要活动的绑定开始时从首选项启动服务，这将是同一服务的多个实例？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:41:45.207

使用 a[`OnSharedPreferenceChangeListener`](http://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html)这样当复选框从选中变为未选中（反之亦然）时，您将获得更新。

您可以同时使用 start/stopService 机制和 bind/unbind 机制。如果调用 startService 或绑定服务，则服务将启动，当调用 stopService 并且不再绑定任何活动时，它将停止。

我认为[这篇文章](https://stackoverflow.com/q/2518238/741249)将回答您有关已启动服务的问题。

# ruby-on-rails - 未定义的方法“更新”# 模型关联如下： 模型一 class TimeLog < ActiveRecord::Base has_one :custom_time_field, :dependent => :destroy end 模型二 问问题 问问题 2012-05-14T06:50:29.027 1321 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 模型关联如下： 模型一 class TimeLog < ActiveRecord::Base has_one :custom_time_field, :dependent => :destroy end 模型二 class CustomTimeField < ActiveRecord::Base belongs_to :time_log end 错误详情： a = TimeLog.find(1) a.custom_time_field #returns => # <customtimefield id:="" 1,="" time_entry_id:="" status:="" 'incomplete',="" start_time:="" "2000-01-01="" 11:24:00",="" end_time:="" 11:24:00"="">a.custom_time_field.update(1, :status => '') # returns undefined method `update' 但是 a.custom_time_field.update_attributes() 有效 现在我可以使用 update_attributes 也可以通过创建对象来使用保存方法 但是为什么在这种情况下我不能使用更新方法？当需要一次更新多个属性时，这很有用。 评论/指针？ 注销后，单击返回按钮将我带到访问过的页面，如何停止？ 大家， 我正在用 JSP 编写一个 Web 应用程序，我是 JSP 和 java 的新手，谁能告诉我如何摆脱浏览器缓存。 我将简要描述一下我的问题...从登录页面登录的用户被带到主页，会话已设置。当他们从主页单击注销时，他们在内部被带到注销页面，会话被破坏并且用户被重定向到登录页面。 现在的问题是当他们点击浏览器的后退按钮时，之前访问过的页面再次显示，虽然如果我触发主页或其他需要登录浏览器的访问页面，注销后重定向到登录页面，那很好，我唯一的问题是后退按钮。 我尝试过的代码片段如下：     <% response.setHeader("Cache-Control", "no-cache"); response.setHeader("Pragma", "no-cache"); response.setDateHeader("max-age", 0); response.setDateHeader("Expires", 0); %> 拜托，谁能帮帮我？？？:( :( ruby-on-railsruby-on-rails-3 4 1 回答 1 This answer is useful 2 update是模型的类方法。这样称呼它： CustomTimeField.update(1, :status => '') 于 2012-05-14T07:10:04.013 回答 Related 3 ios - 我想我遇到了僵局，但不太明白为什么 1 emacs - 如何修复终端 emacs 选择突出显示 2 google-cast - chrome 打包应用程序上的 chromecast 1 d3.js - d3 v3 没有在 g 元素上开始过渡 1 image-processing - av_interleaved_write_frame()：对等 mjpeg 重置连接：mjpeg 流、ffserver 和 ffplay 有什么问题？ 1 javascript - 自动滚动幻灯片 javascript 1 android - Android-无法向项目添加支持库 2 c++ - rand() 函数没有产生足够的随机数 1 php - 使用 jquery 在 clisk 上获取 img 路径 3 bash - Bash 编码返回具有特定字符串的文件名 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</customtimefield>

> ID：10578605
> 
> 赞同：0
> 
> 时间：
> 
> 标签：ruby-on-rails, ruby-on-rails-3

模型关联如下：

模型一

```
class TimeLog < ActiveRecord::Base
  has_one :custom_time_field,  :dependent => :destroy
end 
```

模型二

```
class CustomTimeField <  ActiveRecord::Base
 belongs_to :time_log
end 
```

错误详情：

```
a = TimeLog.find(1)
a.custom_time_field

#returns => #<CustomTimeField id: 1, time_entry_id: 1, status: 'incomplete', start_time: "2000-01-01 11:24:00", end_time: "2000-01-01 11:24:00">

a.custom_time_field.update(1, :status => '') # returns undefined method `update' 
```

但是 a.custom_time_field.update_attributes() 有效

现在我可以使用 update_attributes 也可以通过创建对象来使用保存方法

但是为什么在这种情况下我不能使用更新方法？当需要一次更新多个属性时，这很有用。

评论/指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:10:04.013

`update`是模型的类方法。这样称呼它：

```
CustomTimeField.update(1, :status => '') 
```

# jsp - 注销后，单击返回按钮将我带到访问过的页面，如何停止？

> ID：10578607
> 
> 赞同：1
> 
> 时间：2012-05-14T06:50:33.180
> 
> 标签：jsp, caching, button, browser, back

大家，

我正在用 JSP 编写一个 Web 应用程序，我是 JSP 和 java 的新手，谁能告诉我如何摆脱浏览器缓存。

我将简要描述一下我的问题...从登录页面登录的用户被带到主页，会话已设置。当他们从主页单击注销时，他们在内部被带到注销页面，会话被破坏并且用户被重定向到登录页面。

现在的问题是当他们点击浏览器的后退按钮时，之前访问过的页面再次显示，虽然如果我触发主页或其他需要登录浏览器的访问页面，注销后重定向到登录页面，那很好，我唯一的问题是后退按钮。

我尝试过的代码片段如下：

```
 <script type="text/javascript">
    function noBack() { window.history.forward(); }
    noBack();
    window.onload = noBack;
    window.onpageshow = function (evt) { if (evt.persisted) noBack(); }
    window.onunload = function () { void (0); }
    </script>

<meta http-equiv="cache-control" content="no-cache">
<meta http-equiv="expires" content="0">
<meta http-equiv="pragma" content="no-cache">

    <%  
      response.setHeader("Cache-Control", "no-cache");  
      response.setHeader("Pragma", "no-cache");  
      response.setDateHeader("max-age", 0);  
      response.setDateHeader("Expires", 0);  
    %> 
```

拜托，谁能帮帮我？？？:( :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:22:21.510

我也遇到过这种情况，但事实证明后退按钮的设计不同。人们引用[HTTP 1.1 标准](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html#sec13.13)和[前 10 个网页设计错误](http://www.nngroup.com/articles/the-top-ten-web-design-mistakes-of-1999/)来解释让 Back 显示您加载的确切页面（未过期）很重要，即使它搞砸了注销功能。就像银行一样，警告用户在重要时关闭窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T10:11:34.080

用这个：

```
<%
    response.setHeader( "Cache-Control", "no-store, no-cache, must-revalidate");  //HTTP 1.1
    response.setHeader("Pragma","no-cache"); //HTTP 1.0
    response.setDateHeader ("Expires", -1); //prevents caching at the proxy server
%> 
```

这是告诉浏览器不要缓存页面。您必须在不必缓存的每个页面中包含此代码。

但是请阅读[此](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers)页面。有一个完整的答案。

# sql-server-2008 - 从子查询中选择多个列

> ID：10578608
> 
> 赞同：0
> 
> 时间：2012-05-14T06:50:35.853
> 
> 标签：sql-server-2008, tsql, subquery

我已经搜索了很多，但仍然没有机会让子查询一次返回多个列。以下代码有效，但很糟糕：

```
SELECT
    (SELECT Column1 FROM dbo.fnGetItemPath(ib.Id)) AS Col1,
    (SELECT Column2 FROM dbo.fnGetItemPath(ib.Id)) AS Col2,
    (SELECT Column3 FROM dbo.fnGetItemPath(ib.Id)) AS Col3
FROM ItemBase ib 
```

我实际上不知道如何将 ib.Id 传递给函数并在不调用 fnGetItemPath 函数 3 次的情况下获取整个 Column1、Column2、Column3 列。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T07:02:52.883

您可以将 ti 移动到“FROM”部分并使用[外部应用](http://msdn.microsoft.com/en-us/library/ms175156%28v=SQL.90%29.aspx)（或交叉应用）。

自己检查语法，但它应该看起来像这样：

```
SELECT Column1, Column2, Column3
FROM ItemBase ib
Outer Apply dbo.fnGetItemPath(ib.Id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:55:58.403

这不行吗？

```
select 
     (select column1, column2, column3 from dbo.fnGetItemPath(ib.Id)) 
from ItemBase ib 
```

还是你需要别的东西？

# c# - 数组的通用扩展方法无法编译

> ID：10578609
> 
> 赞同：4
> 
> 时间：2012-05-14T06:50:36.150
> 
> 标签：c#, arrays, generics, .net-3.5, extension-methods

填充 Web 服务的请求对象，我需要将项目动态添加到一些数组。

我希望通过实现扩展方法来简化它：

```
public static class ArrayExtensions<T> where T : class
{
    public static T[] Extend<T>(T[] originalArray, T addItem)
    {
        if (addItem == null)
        {
            throw new ArgumentNullException("addItem");
        }
        var arr = new[] { addItem };
        if (originalArray == null)
        {
            return arr;
        }
        return originalArray.Concat(arr).ToArray();
    }
} 
```

所以这个旧代码：

```
if (foo.bazArr == null)
{
    foo.bazArr  = new[] { baz };
}
else
{
    foo.bazArr = new[] { baz }.Concat(foo.bazArr).ToArray(); // (i know this inserts the new item at the beginning, but that's irrelevant, order doesn't matter)
} 
```

可以改写为：

```
foo.bazArr = foo.bazArr.Extend(baz); // won't compile 
```

错误是：`'System.Array' does not contain a definition for 'Extend' and no extension method 'Extend' accepting a first argument of type 'System.Array' could be found (are you missing a using directive or an assembly reference?)`

而像这样直接调用扩展方法：

```
foo.bazArr = ArrayExtensions<someService.bazType>.Extend(foo.bazArr, baz); 
```

编译得很好。

为什么呢？如果数组是强类型的，为什么编译器不能在这里自行推断类型？

* * *

**编辑**- 下面的正确代码：

```
public static class ArrayExtensions
{
    public static T[] Extend<T>(this T[] originalArray, T addItem) where T : class
    {
        if (addItem == null)
        {
            throw new ArgumentNullException("addItem");
        }
        var arr = new[] { addItem };
        if (originalArray == null)
        {
            return arr;
        }
        return originalArray.Concat(arr).ToArray(); // although Concat is not recommended for performance reasons, see the accepted answer
    }
} 
```

* * *

对于这个流行的问题，这是另一个很好的简单示例：

```
public static class Extns
    {
    // here's an unbelievably useful array handling extension for games!

    public static T AnyOne<T>(this T[] ra) where T:class
        {
        int k = ra.Length;
        int r = Random.Range(0,k);
        return ra[r];
        // (add your own check, alerts, etc, to this example code)
        }
    } 
```

并在使用中..

```
someArrayOfSoundEffects.AnyOne().Play();
someArrayOfAnimations.AnyOne().BlendLeft();
winningDisplay.text = successStringsArray.AnyOne() +", " +playerName;
SpawnEnormousRobotAt( possibleSafeLocations.AnyOne() ); 
```

等等。对于任何数组，它都会给你一个随机项目。在游戏中经常用于随机化效果等。数组可以是任何类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T06:53:16.720

缺少`this`：

```
public static T[] Extend<T>(this T[] originalArray, T addItem) 
```

没有`this` *它就不是扩展方法*。

附加说明：一次扩展一个数组是昂贵的。A`List<T>`会更可取。检查您的网络服务工具是否提供列表作为选项。

即使使用数组，在这里使用`Enumerable.Concat`也可能是多余的；我会简单地测量两个数组，分配一个新数组，然后使用`CopyTo`每个数组的方法在新数组中写入到位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T06:53:54.147

用于`this`定义扩展方法

```
public static T[] Extend<T>(this T[] originalArray, T addItem) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T06:53:57.660

你错过了“this”关键字

# iphone - 从图层中删除动画精灵帧？

> ID：10578610
> 
> 赞同：0
> 
> 时间：2012-05-14T06:50:37.933
> 
> 标签：iphone, cocos2d-iphone

假设我在游戏中有一个角色，它的类是这样的。

```
 @interface Player
{
  CCSprite* stand;
  CCAnimation* run;
}

-(void) playRunAction
{
  // Create CCAnimate* object from CCAnimation object (run)

  [self runAction:runAniate];
}

-(void) playStandAction
{
  stand.visible = YES;
  [self stopAllActions];
} 

```

玩家有能力站立或奔跑。

但是一个问题是，调用playStandAction后，站立动画可见，运行动画停止，但还有一帧运行动画！（现在您可以看到“站立精灵”和“正在运行的动画帧之一”。）

如何使运行动画不可见？

Ps 谁能给我一个更好的方法来管理一个角色的动画？随着动画的添加，这完全是一场灾难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:00:44.273

```
-(void) playStandAction
{
//Make the animation object.visible = NO; here 
  stand.visible = YES;
  [self stopAllActions];
} 
```

并且在

```
-(void) playRunAction
{
  // Create CCAnimate* object from CCAnimation object (run)
  //Make the animation object.visible = YES; here
  stand.visible = NO;
  [self runAction:runAniate];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:04:17.647

使用带参数的方法`restoreOriginalFrame`并传递它`yes`

我不知道您要调用哪种方法来创建`CCAnimate`对象...

像这样：

```
[CCAnimate actionWithAnimation:animation restoreOriginalFrame:YES]]; 
```

并且不要在图层上调用 runAction。我希望你在精灵本身上运行动作......

您无需隐藏和显示 2 个不同的对象...

希望这可以帮助。:)

# html - 浮动导致图像未对齐

> ID：10578613
> 
> 赞同：0
> 
> 时间：2012-05-14T06:50:49.537
> 
> 标签：html, css

我在我的 Mac 中创建了一个网页。我用 Chrome、FF 和 Safari 等常用浏览器对其进行了测试。这十分完美。我刚刚有机会在 IE 中测试该网站。它看起来是灾难性的——标志向右走太多了。我相信这是造成这种情况的浮动。我在这里发布了一些代码，希望能从这里的专家那里得到一些帮助。请帮助我。谢谢！

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<style>

   *{
margin:0px; padding:0px;
font-family: Tahoma, sans-serif;
font-size: 11px;
    }

    root { 
    display: block;
    }

    html, body, form, h1, h2, h3, h4, ul, li {
margin: 0;
padding: 0;
    }

    body {
    margin: 0 auto;
    text-align: center;
    width:780px;
    }

    #top_bkg {
    padding:0;
    margin:0 auto;
    background-color:#009933;
    width:780px;
    height:101px; 
    }

   #top_bkg2 {
   background-color:#009933;
   width:780px;
   height:99px; 
   }

   #logo {    
    float:left;   
    line-height: 1%;
    margin-top:-132px;              
background-color:red;
    width:569px;
    height:109px;
background-repeat:no-repeat;
background-position:bottom right;
    }

</style>

    </head>
    <body>

        <div id="top_bkg">
        </div> <!--end of top_bkg-->

        <div id="top_bkg2">
        </div> <!--end of top_bkg2-->

     <div id="logo">             
     </div> <!--end of logo-->

   </body>
  </html> 
```

这是它在 IE 中的样子：

![红色背景应该是标志。 它不对齐。](../Images/b04e78a484d7f19ef608e04ef4dd310d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:16:11.953

您可以创建一个包装器，而不是将宽度设置为主体

`<div id="wrapper"></div>`并为包装器设置宽度，并且在负值中提供边距也是不好的做法，而且您已经为每个 div 设置了宽度和高度，这就是它在 IE 中看起来像这样的原因。请进行更正，然后在 IE 中看起来不错，尽管您可能需要对 IE 的边距和填充进行一些更正。

# c++ - 如何在同一选项卡中启动 URL

> ID：10578614
> 
> 赞同：0
> 
> 时间：2012-05-14T06:50:51.413
> 
> 标签：c++, winapi, firefox

我正在尝试打开 URL .. 如果我尝试这个，它将在新标签中打开我希望它在同一个标​​签中执行我该怎么做

```
 ShellExecuteA(NULL, "open", "file:///C:/Users/pawws014/Desktop/error.html/", NULL, NULL,  SW_SHOWNORMAL); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:00:33.553

更改 Firefox 中的[Browser.link.open_external 设置](http://kb.mozillazine.org/Browser.link.open_external)以在当前窗口中打开链接。

这是[about:config](http://kb.mozillazine.org/Firefox_%3a_FAQs_%3a_About%3aconfig_Entries)中的设置。

# python - 如何要求对 /admin 路径下的任何内容进行身份验证？

> ID：10578615
> 
> 赞同：2
> 
> 时间：2012-05-14T06:50:57.340
> 
> 标签：python, flask-sqlalchemy, flask

我正在使用 Flask，我想保护 /admin 路径下的所有内容。

我怎样才能做到这一点？我确信有比在每个函数中检查会话更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T07:03:39.393

显而易见的方法是编写一个装饰器来测试会话，并在身份验证失败时重定向到另一个页面。我不知道你对python了解多少，但是装饰器是一个接受一个函数并返回另一个函数的函数。基本上，它是一个函数修饰符。这是一个装饰器，它应该向您展示编写自己的方法来检查会话：

```
import functools

def check_session(view):
    @functools.wraps(view)
    def inner(*args, **kwargs):
        if <test for auth>:
            return view(*args, **kwargs)
        else:
            return flask.redirect("/")
    return inner 
```

正如你所看到的，我们有一个接受视图函数的函数，然后定义了一个名为 inner 的新函数，它检查身份验证，如果成功，则调用原始视图。该行`@functools.wraps(view)`是使用装饰器的示例；装饰器给出了`functools.wraps`它正在包装的函数的属性，它作为它的第一个参数给出。要使用此装饰器，请将其应用于您的视图，如下所示：

```
@app.route("/admin")
@check_session
def admin_view():
    return "Top secret" 
```

任何未通过身份验证检查的用户现在都将被重定向，并且这样做的用户将能够像往常一样看到该视图。装饰器按从下到上的顺序应用，因此请确保将其放在任何其他进行函数注册的装饰器之后（即`@app.route`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T14:16:40.187

我认为，最直接的方法是使用类似于[此代码段](http://flask.pocoo.org/snippets/59/)中描述的蓝图。然后，当 URL 以 开头时，您可以在每个请求之前运行一些代码`/admin`，并且在该代码中您可以进行身份​​验证。

# objective-c - CLLocationManager didstartregionMonitoring 未被调用

> ID：10578616
> 
> 赞同：0
> 
> 时间：2012-05-14T06:51:01.193
> 
> 标签：objective-c, ios, unity3d, cllocationmanager

我正在为 unity3d 创建一个插件以使用区域监控。但是，CllocationManager 事件并未启动。经过大量搜索后，我读到这个 ​​CLLocationManager 需要在主循环中初始化。但是，当我使用插件时，我不确定该怎么做。

插件代码：RegionMonitoring.h

```
#import <Foundation/Foundation.h>
#import <CoreLocation/CoreLocation.h>

@interface RegionMonitoringPlugin : NSObject <CLLocationManagerDelegate>
{
    CLLocationManager *locationManager; 
}

-(void)enterRegionNotify;
-(void)leaveRegionNotify;
-(void)startMonitor:(float)latitude longitude:(float)longitude radius:(float)raduis;

@end 
```

区域监控.mm

```
#import "RegionMonitoringPlugin.h"

@implementation RegionMonitoringPlugin

- (id) init
{
    if (self = [super init]){
        if (locationManager==nil){
        locationManager = [[CLLocationManager alloc] init];
        locationManager.delegate = self;
        [locationManager setDistanceFilter:kCLDistanceFilterNone];
        [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
    }
    }

    return self;
}

-(void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region
    {
        [self enterRegionNotify];
    }

-(void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region
    {
        [self leaveRegionNotify];
    }

- (void)locationManager:(CLLocationManager *)manager monitoringDidFailForRegion:(CLRegion *)regionwithError:(NSError *)error
    {
        NSLog(@"Location error %@, %@", error, @"Fill in the reason here");
    }

- (void)locationManager:(CLLocationManager *)manager didStartMonitoringForRegion:(CLRegion *)region
{
    NSLog (@"Started monitoring");
}

-(void)leaveRegionNotify
{
    UILocalNotification *note = [[UILocalNotification alloc] init];
    note.alertBody= @"Region Left"; // ToAsk: What should be displayed
    note.soundName = UILocalNotificationDefaultSoundName;
    [[UIApplication sharedApplication] presentLocalNotificationNow:note];
    [note release];
}

-(void)enterRegionNotify
{
    UILocalNotification *note = [[UILocalNotification alloc] init];
    note.alertBody= @"Region Left"; //ToAsk: what should be displayed ? 
    note.soundName = UILocalNotificationDefaultSoundName;
    [[UIApplication sharedApplication] presentLocalNotificationNow:note];
    [note release];
}

-(void)startMonitor:(float)latitude longitude:(float)longitude radius:(float)radius
{ 
    [self leaveRegionNotify];
    CLLocationCoordinate2D home;
    home.latitude = latitude;
    home.longitude = longitude;
    CLRegion* region = [[CLRegion alloc] initCircularRegionWithCenter:home radius:radius identifier:@"region"];
    [locationManager startMonitoringForRegion:region desiredAccuracy:kCLLocationAccuracyBest];
    [region release];    
}

@end

extern "C" {
        static RegionMonitoringPlugin *regionMonitor;
          // Unity callable function to start region monitoring
        BOOL _startRegionMonitoring(float m_latitude,float m_longitude, float m_radius)
        {
            if (![CLLocationManager regionMonitoringAvailable] || ![CLLocationManager regionMonitoringEnabled]){
                NSLog (@"Region Monitoring not configured");
                return NO;
            }

            if (regionMonitor == nil){
                regionMonitor = [[RegionMonitoringPlugin alloc]  init] ;
            }
            [regionMonitor startMonitor:m_latitude longitude:m_longitude radius:m_radius];

            return YES;
        }

    void _showNotification (char *msg){
        if ([UIApplication sharedApplication].applicationState == UIApplicationStateActive) {
            UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Region Monitor Notification" message:[NSString stringWithUTF8String:(char *)msg] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil]; 
            [alertView show]; 
            [alertView release];
        }
    }
} 
```

统一代码：

```
using UnityEngine;
using System.Collections;
using System.Runtime.InteropServices;

public class RegionMonitoringMediator {

    /*Interface to native implementation */
    [DllImport ("__Internal")]
    private static extern bool _startRegionMonitoring (float m_latitude,float m_longitude, float m_radius);

    [DllImport ("__Internal")]
    private static extern void _showNotification(string mes);

    public static void showNotification(string message){
        if (Application.platform != RuntimePlatform.OSXEditor)
            _showNotification(message);
    }

    public static bool startRegionMonitoring (float latitude,float longitude, float radius)
    {
         /*Call plugin only when running on real device*/
        if (Application.platform != RuntimePlatform.OSXEditor)
            return _startRegionMonitoring ( latitude , longitude , radius);
        else return false;

    }
} 
```

我统一呼唤的地方：

```
private void callFourSquare (string queryURL)
    {
        WWW www = new WWW(queryURL);
        StartCoroutine(WaitForRequest(www));    
    }

 IEnumerator WaitForRequest(WWW www)
    {
        yield return www;
        Debug.Log(WWW.UnEscapeURL (www.text));
        bool started =  RegionMonitoringMediator.startRegionMonitoring((28.023234f,77.232134F,10.0f);
        if (!started)
          Debug.LogError( "Could not start region monitoring");     }

           } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-05T21:39:25.613

我可能是你在那个线程上没有运行循环。因此，如果您的代码在后台线程上运行，则必须在那里运行循环。

更多信息： [https ://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html)

检查配置运行循环的部分。

# android - 未找到资源字符串资源 ID

> ID：10578618
> 
> 赞同：1
> 
> 时间：2012-05-14T06:51:04.757
> 
> 标签：android, string, android-resources

我正在制作一个有 2 个 android 项目的应用程序；第一个项目是图书馆项目，第二个项目是我的主要项目。project-1 工作正常，但是当我将它作为库添加到我的 Project-2 中时，它给了我这样的异常 **Resource not found String resource ID #0x76000456**

当我检查我的字符串包和 R.java 时，这个字符串就在那里。

我试过干净的项目重新启动我的 Eclipse 和我的系统。

我的 strings.xml 文件看起来像：-

```
 <string name="pref_loadrecent_id">loadrecent</string>
<string name="pref_loadrecent_defvalue">false</string>

<string name="pref_confirmclose_id">confirmclose</string>
<string name="pref_confirmclose_defvalue">false</string> 
```

我这样打电话：-

```
BooleanPreferenceDefinition LOAD_RECENT = new BooleanPreferenceDefinition(pref_loadrecent_id,
        pref_loadrecent_defvalue);

BooleanPreferenceDefinition CONFIRM_CLOSE = new BooleanPreferenceDefinition(pref_confirmclose_id,
        pref_confirmclose_defvalue); 
```

我正在像这样静态导入 R.string

```
import static com.ankit.R.string.*; 
```

为了测试而不是从字符串 id 调用，我硬编码了 的值，`pref_loadrecent_id`然后`pref_loadrecent_defvalue`它显示了类似的异常（具有不同的 ID）`pref_confirmclose_id`和`pref_confirmclose_defvalue`。

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T10:40:33.847

您为答案传递的参数可能不会转换为字符串...首先将其转换为字符串，然后传递该字符串参数以获得正确答案..

例如..

```
@Override
public void onClick(View v) {

// TODO Auto-generated method stub

    EditText edittext = (EditText) findViewById(R.id.edT);

    String str = edittext.getText().toString();

    int n = Integer.parseInt(str);

    int fact = n , i ,e;

    e = n;

    if (n==0)
    fact = 1;

    else

    for(i=0; i<n-1; i++)
        {
            fact = fact * (e - 1);
            e = e - 1;

        }

String str1 = String.valueOf(fact);       <-----//Your mistake maybe here.....

Toast.makeText(getApplicationContext(), str1, Toast.LENGTH_LONG).show();

                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T18:24:37.533

也许我错了，但对我来说，看起来好像你只是在导入而`int`不是`Strings`

```
import static com.ankit.R.string.*; 
```

这可能是您的异常 **Resource not found String resource ID #...**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T06:54:10.200

每当您在资源 ID 中发现任何问题时，请转到项目-> 清理

并清理您的项目，将再次生成**R.java文件。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T06:56:55.330

做，修复项目属性并清理项目。关闭 eclipse 并重新启动它。这将得到解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-27T13:13:56.463

就我而言，我将 int 值转换为字符串值并解决了

```
String s = String.valueOf([int value]); 
```

# jquery - JQuery：动态创建选择标签

> ID：10578619
> 
> 赞同：19
> 
> 时间：2012-05-14T06:51:16.180
> 
> 标签：jquery, html

我正在使用 JQuery 动态（基于用户选择）创建标签。用户在文本框中输入要求选项，我的代码创建它的选择标签。脚本是：

```
var numbersString = "1,2,3,4,5,6";
var data = numbersString.split(',');

var s = $("<select id=\"selectId\" name=\"selectName\" />");
for(var val in data) {
    $("<option />", {value: val, text: data[val]}).appendTo(s);
}
s.appendTo("#msj_form"); 
```

其中 msj_form 是标签附加的我的 div id。现在它创建：

```
<select id="selectId" anme="selectName">
    <option value="0">1</option>
    <option value="1">2</option>
    <option value="2">3</option>
    <option value="3">4</option>
    <option value="4">5</option>
    <option value="5">6</option>
</select> 
```

但我也想将标签和`<tr><td>`代码与标签连接起来，使代码看起来像：

```
<tr>
    <td>My Label</td>
    <td>
        <select id="selectId" anme="selectName">
            <option value="0">1</option>
            <option value="1">2</option>
            <option value="2">3</option>
            <option value="3">4</option>
            <option value="4">5</option>
            <option value="5">6</option>
        </select>
    </td>
</tr> 
```

![在此处输入图像描述](../Images/fca27206cd179252755a08ae382a7859.png)

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-14T07:23:34.313

```
var s = $("<select id=\"selectId\" name=\"selectName\" />");
for(var val in data) {
    $("<option />", {value: val, text: data[val]}).appendTo(s);
} 
```

在 for 循环之后，用 TableRow 和 Cells 这样的[Jquery Wrap()包装所有内容](http://api.jquery.com/wrap/)

```
$(s).wrap('<table><tr><td></td></tr></table>'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-14T08:21:29.840

```
<!-- Create Dropdown -->
/* 1- First get total numbers of SELECT tags used in your page to avoid elements name/id issues.
 * 2- Get all OPTIONS user entered with comma separator into a text box.
 * 3- Split user OPTIONS and make an array of these OPTIONS.
 * 4- Create SELECT code.
 * 5- Appent it into the temp div (a hidden div in your page).
 * 6- Then get that code.
 * 7- Now append code to your actual div.
 * 8- Filnally make empty the temp div therfore it will be like a new container for next SELECT tag.
 */

total = $("select").size() + 1;                                         // 1-
var myoptions = $("#myoptions").val();                                  // 2-
var data = myoptions.split(',');                                        // 3-
var s = $("<select id=\""+total+"\" name=\""+total+"\" />");            // 4-
for(var val in data) {
    $("<option />", {value: val, text: data[val]}).appendTo(s);
}
s.appendTo("#tempselect");                                              // 5-
var getselectcode = $("#tempselect").html();                            // 6-
$("#msj_form").append(appendLabel+"<td>"+getselectcode+"</td></tr>");   // 7-
$("#tempselect").html('');                                              // 8-

<div style="display:none;" id="tempselect"></div>                       // Temp div 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-04T13:24:11.350

Ravi 对答案的轻微修改 - 一个一个地附加每个元素是一项成本高得惊人的操作。

```
var s = $("<select id=\"selectId\" name=\"selectName\" />");
var opts = [];
for(var val in data) {
    opts.push( $("<option />", {value: val, text: data[val]}));
}

opts.appendTo(s); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-02-28T09:17:23.437

```
var html = '<tr><td><label for="select" style="text-transform:   none;">Label_name</label></td>'
            +'<td><select name="select" id="">'
            +'<option>Choose number..</option>'
            +'<option value="0">1</option>'
            +'<option value="1>2</option>'
            +'<option value="2">3</option>'
            +'</select></td></tr>'; 
```

假设，table的id = table_id

```
$('#table_id').append(html);
$('#table_id').trigger('create'); 
```

我得到的是，如果你不调用 trigger()，你的选择的设计看起来完全一团糟..

# ruby-on-rails - 如何为 has_and_belongs_to_many 关系设置我的装置？

> ID：10578620
> 
> 赞同：25
> 
> 时间：2012-05-14T06:51:19.213
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, fixtures

我有以下型号：

```
class Company < ActiveRecord::Base
  has_and_belongs_to_many :regions

class Region < ActiveRecord::Base
  has_many :requests
  has_and_belongs_to_many :companies

class RequestForProposals < ActiveRecord::Base
  belongs_to :region 
```

每当我收到新请求时，我都想向同一地区的活跃公司发送通知。

如何在我的设备中进行设置，以便我可以对寻找合适公司的逻辑进行单元测试？

我试过了

```
region_ids: 1, 2
regions: one, two 
```

在 company.yml 中，但在为公司分配区域时都不起作用。

这是生成的 SQL 的要点：[https ://gist.github.com/2713518](https://gist.github.com/2713518)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-16T21:27:09.520

为了

```
regions: one, two 
```

在`companies.yml`工作中，您需要让 rails 自动分配区域的 id。这是因为（为了避免必须在 company.yml 之前读取 region.yml）rails 会根据公司固定装置的名称计算它在连接表中的 id。如果您自己分配了 ID，它们将与计算的 ID 不匹配。

从您提供的 sql 看来，您正在将区域上的 id 设置为 1 和 2，即您的 regions.yml 有

```
one:
  id: 1
  name: MyString 
```

删除`id:1`，你应该没问题。您还需要更新引用区域的任何其他文件（例如 request_for_proposals.yml），替换

```
region_id: 1 
```

和

```
region: one 
```

Rails 会知道这意味着在您的灯具中设置`region_id`带有标签的区域的 id 。`one`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T05:45:58.603

您的 region.yml 在 test/fixtures 目录中吗？company.yml 怎么样？对于给定的公司，您的代码“区域：一，二”应该可以工作。
当您运行测试时，Rails 会自动加载此目录中的固定装置。如果位置正确，请在运行测试时发布测试输出 - 生成的 sql。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T22:52:36.760

如果您需要自己计算此类 id，除了接受的答案之外，例如，您有一些松散的引用或其他数据源，只需添加：

```
def fixh(key)
  ActiveRecord::FixtureSet.identify key
end 
```

给你`test_helper.rb`，然后在夹具中使用这种方式：

```
security_context1:
  ext_id: <%= fixh :user1 %> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-14T07:59:19.133

我不确定这些天人们如何使用 YAML 固定装置。您是否尝试过[FactoryGirl](https://github.com/thoughtbot/factory_girl)在测试时创建数据库对象实例？它的作用与固定装置几乎相同，但方式要复杂得多。

以下段落假设您使用`rspec`的是测试框架。

包含`factory_girl-rails`在您的自述文件中并相应地`Gemfile`更新后，创建以下文件：`spec/spec_helper.rb``factory_girl`

```
# spec/factories/company_factories.rb
FactoryGirl.define do
  factory :company do
    title { |n| "Test Company #{n}" }

    # whatever else fields

    after_create { |company| company.regions << FactoryGirl.create(:region) }
  end
end

# spec/factories/region_factories.rb
FactoryGirl.define do
  factory :region do
    # whatever fields here
  end
end

# spec/factories/request_factories.rb
FactoryGirl.define do
  factory :request do        
    # whatever fields here
  end
end 
```

现在真正的问题是——你正在做的实际测试代码是什么？

# iphone - 获取空数组

> ID：10578621
> 
> 赞同：0
> 
> 时间：2012-05-14T06:51:25.547
> 
> 标签：iphone, objective-c

我有以下代码：

```
- (IBAction)goButton:(id)sender 
{

    if(buttonCount==0)
    {
        previousStateArray=setUpArray;
          NSLog(@"previous array count=%d",[previousStateArray count]);
        [setUpArray removeAllObjects];
        for(Node *n in nodeArray)
        {
            if(![temp isEqualToString:n.strName])
            {
                [setUpArray addObject:n.strName];

            }
            temp=n.strName;         
        }    
    }
}  

- (IBAction)backButton:(id)sender 
{

    [setUpArray removeAllObjects];
    setUpArray=previousStateArray;
     NSLog(@"previous array count=%d",[previousStateArray count]);
    buttonCount--;       
  } 
```

setUpArray 和 previousStateArray 都在 - 方法中声明。我的`viewDidLoad`视图只加载一次。在第一个 NSLog 我得到 1 作为输出但在第二个 NSLog 我得到

0 作为输出，而我的数组都没有再次初始化。那么为什么会这样呢？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:05:12.040

你的问题是你的数组指针。

在`goButton`：

```
previousStateArray=setUpArray; 
```

现在`previousStateArray`指向同一个数组`setUpArray`。

```
[setUpArray removeAllObjects]; 
```

这将删除所有对象，现在两个指针都指向一个空数组。

在`backButton`：

```
setUpArray=previousStateArray; 
```

它们都指向同一个空数组，所以这条线是多余的。如果你想交换指针，你应该保留一个临时指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:11:36.437

在您的代码中

```
`previousStateArray=setUpArray;`  //previousStateArray pointing to same memory location of setUpArray. 
```

类的使用`- (void)setArray:(NSArray *)otherArray`方法`NSMutableArray`。

```
[previousStateArray setArray: setUpArray];
[setUpArray setArray:previousStateArray];  

- (IBAction)goButton:(id)sender 
{

    if(buttonCount==0)
    {
        [previousStateArray setArray: setUpArray];
          NSLog(@"previous array count=%d",[previousStateArray count]);
        [setUpArray removeAllObjects];
        for(Node *n in nodeArray)
        {
            if(![temp isEqualToString:n.strName])
            {
                [setUpArray addObject:n.strName];

            }
            temp=n.strName;         
        }    
    }
}  

- (IBAction)backButton:(id)sender 
{

    [setUpArray removeAllObjects];
    [setUpArray setArray:previousStateArray];
     NSLog(@"previous array count=%d",[previousStateArray count]);
    buttonCount--;       
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T06:53:32.417

初始化数组

```
setUpArray = [[NSMuatableArray alloc] init]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T07:14:53.227

我认为 giorashc 的回答是正确的。您的问题是对 Array 使用“=”只会使新的 previousStateArray 指向 setUpArray 的相同内存。换句话说，previousStateArray 与 setUpArray 相同。

有关更多详细信息，您应该搜索深浅副本。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-14T07:54:10.830

您还应该使用`if(0 == buttonCount)`而不是`if(buttonCount==0)`.

# php - 同时搜索多个表

> ID：10578622
> 
> 赞同：0
> 
> 时间：2012-05-14T06:51:36.887
> 
> 标签：php, mysql, search

我正在尝试为我的网站编写搜索脚本。我有两个问题要解决。

1）在用户在搜索框中输入句子的情况下，我该如何处理？我应该继续把它当作一个字符串并在我想要的表中搜索它吗？如果我这样做不会影响网站的有效性。？而且大多数时候没有结果..

2）如果我要在几个表中搜索，我怎么能做到这一点。

感谢您的时间和耐心。

例子：

假设我的数据库中有以下表格

```
 about Table 
     about_id
     about_head
     about_content
     about_tags
     about_created

 about_cs Table 
     about_cs_id
     about_cs_head
     about_cs_content
     about_cs_tags
     about_cs_created

 home Table 
     home_id
     home_head
     home_content
     home_tags
     home_created 
```

我计划为用户制定不同的搜索标准。

按日期搜索：（日期选择器...日期将根据特定文章的创建日期进行查询。在所有表格中）

按标签搜索：（单个（一个或两个）单词搜索以搜索所有带有标签列的表）

搜索主要文章：（这是允许用户输入任何类型的搜索查询（字符串）的地方，它将在所有具有内容字段的表中进行搜索）

因此，如果用户输入诸如“南本德最著名的教堂”之类的词......我是否只搜索整个字符串

```
 LIKE % ' .$searchString. ' % 
```

或者有没有办法可以分解并分别搜索每个单词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:55:48.443

信息不够清楚。我假设您需要站点范围的搜索。

在这种情况下，我建议您使用 php lucene implementation [Zend_Lucene](http://framework.zend.com/manual/en/zend.search.lucene.overview.html)

**[编辑]**
由于您必须搜索很少的表格，我建议您使用全文搜索。这是非常好的教程继续前进。 [http://devzone.zend.com/26/using-mysql-full-text-searching/](http://devzone.zend.com/26/using-mysql-full-text-searching/)

# java - 在 jsp 中打印名称列表

> ID：10578626
> 
> 赞同：0
> 
> 时间：2012-05-14T06:51:47.680
> 
> 标签：java, jsp, servlets

我正在尝试打印出一个名称列表，并且我想成为另一个我正在尝试此代码的人：

```
 <tr>
               <td> Names: </td>

           <td>
               <c:forEach items="${names}" var="allnames">                   
                   <c:out value="${allnames} " ></c:out>                           
               </c:forEach>
            </td>

      </tr> 
```

但它打印一个旁边的另一个。我应该改变什么？

PS：现在的结果是：姓名：尼克乔治约翰，我想成为：

```
 Names: nick
                george
                john 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T06:54:44.210

使用标签

名称：

```
 <td>
               <c:forEach items="${names}" var="allnames">  
                   <br/>                 
                   <c:out value="${allnames} " ></c:out>                           
               </c:forEach>
            </td>

      </tr> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T06:55:36.940

在每个名称后添加一个`<br/>`将打印一个新行

```
<tr>
           <td> Names: </td>

       <td>
           <c:forEach items="${names}" var="allnames">                   
               <c:out value="${allnames} " ></c:out>                           
               <br/>
           </c:forEach>               
        </td>

  </tr> 
```

或者你可以`<td>`在你的 forEach 中包含标签（我不太确定这会起作用！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T06:56:19.370

`<br/>`在旁边添加`<c:out>`：

```
<c:out value="${allnames} " ></c:out> <br/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T06:56:40.467

您应该使用`<br/>`@JOHND 建议的标签

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T06:56:52.087

```
<td>
   <tr> Names: </tr>
   <tr>
      <c:forEach items="${names}" var="allnames">                   
          <c:out value="${allnames} " ></c:out>                           
      </c:forEach>
   </tr>
</td> 
```

# c++ - 主流 C++ 编译器中 GC 实现的时间线是什么？

> ID：10578627
> 
> 赞同：2
> 
> 时间：2012-05-14T06:51:47.977
> 
> 标签：c++, c++11

众所周知，C++11 允许 GC，但没有一个主流编译器支持。

是否有任何讨论何时可以在诸如`GCC`, `MSVC`, `Intel Compilers`,`Clang`等主流编译器中实现？

我期待使用此功能。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-14T07:01:16.777

你有点误会了。

C++11 支持更好地与 GC 集成，这要归功于一些关键功能，可以帮助他们更好地分析什么是可达的，什么是不可达的。如果您检查新[`<memory>`](http://en.cppreference.com/w/cpp/memory)标题，您会注意到：

*   `declare_reachable`: 声明一个对象不能被回收
*   `undeclare_reachable`: 声明一个对象可以被回收
*   `declare_no_pointers`: 声明一个内存区域不包含可追踪的指针
*   `undeclare_no_pointers`: 取消 std::declare_no_pointers 的效果

然而，这并不意味着 C++11 建议使用 GC 或推动编译器集成 GC。

一些 GC，例如[Boehm-Demers-Weiser](https://www.hpl.hp.com/personal/Hans_Boehm/gc/)的，已经存在。这个新的 API 只是与它们交互的接口的标准化：

*   正确性：`declare_reachable`在某些情况下可能会有所帮助，尽管在大多数情况下它应该是自动的
*   性能：这种 GC 不是类型感知的，并且可能会错误地检测内存区域中包含整数的指针，例如；`declare_no_pointers`消除了扫描某些内存区域的需要，提高了性能并减少了误报（这反过来又提高了一些性能）

因此，如果您愿意，您*已经*可以使用 Boehm 的垃圾收集器，C++11 只是通过标准 API 对其进行了改进，以便您可以更轻松地从一个 GC 切换到另一个 GC。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T08:30:49.073

包含垃圾收集的实现可能不符合 C++98 或 C++03。C++11 添加了足够多的内容以允许一致性，并且只是在此基础上迈出了一小步，试图使其稍微合理。

有一个提议为标准添加更全面的 GC 支持，但被拒绝了。我认为拒绝是很合理的。该提案对标准进行了大约 40 页的更改，但最终所有这些都是为了支持一个非规范的脚注，例如：“预计高质量的实现将尝试最大化程序可用的内存。”

就实现而言，曾经（在 egcs 时代）有人谈论将 Boehm-Demers-Weiser 收集器（的修改版本）合并到 egcs 中。我似乎记得至少有一个版本这样做了，至少在某种程度上（尽管我不记得它是否曾经被认为是“发布”版本）。然而，那是很久以前的事了，据我所知，多年来没有人研究过它。与此同时，Gcc 已经发生了很大的变化，如果今天有人想这样做，他们可能不得不从头开始。

我想这至少摆脱了微软的 C++/CLI 不符合标准的一个领域，所以根据你在其他地方想要多少一致性，你可以（某种程度上）将 C++/CLI 视为带有垃圾的 C++收藏。不过，大多数人认为它不那么恭维（甚至微软也推荐它仅用于链接 .NET 和真正的 C++ 之间的互操作）。

Clang 以 LLVM 为目标，其中包括支持 GC 的钩子（已在其他项目中使用和证明）。因此，它可能是在相对较快的某个时间产生工作实现的最佳机会。

虽然我显然是错的，但我不希望英特尔很快就会整合垃圾收集器。英特尔专注于生成最好的输出代码，而 GC 可能对此无济于事。他们可能这样做的主要原因是简化多线程，这是英特尔投入大量精力的另一个领域（但至少到目前为止，更多的是在库中而不是编译器本身）。

至于 GC 在大多数已发布的 C++ 代码中成为主流使用，似乎几乎没有需求甚至没有兴趣。当我最初写这个答案时，我猜现在有人会写一个。在那段时间里，对 C++ 的 GC 的兴趣似乎已经减弱，以至于我根本不相信它真的有可能再次发生。它仍然可能发生，但我没有看到足够的兴趣来预测可能发生的时间范围。如果有的话，我猜可能会有更多的兴趣转向一个类似 Rust 的模型，该模型明确编码了一些 RAII 语义（但尽管这个总体想法似乎引起了一些兴趣，但我还没有看到任何足够具体的东西来预测它何时是也可能发生）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T07:00:12.037

C++11 标准增加了对实现垃圾收集的语言支持，但没有实际工作的垃圾收集器。用于 C++ 的有效 gc 库的最突出示例是[Hans Boehm 的 implementation](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)。据我所知，目前没有计划将此库与任何主要编译器集成，但已经多次暗示标准委员会非常有兴趣（*）将垃圾收集器与下一版本的C++。

(*) 例如，参见[Going Native 2012 的专家小组](https://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Interactive-Panel-The-Importance-of-Being-Native)

# iphone - 到达特定位置时如何在表格视图中选择一行？

> ID：10578629
> 
> 赞同：0
> 
> 时间：2012-05-14T06:51:51.910
> 
> 标签：iphone, ios, uitableview

当人员到达表格视图的中心时，我想选择一个表格视图行。基本上每当表格到达点 y 时，我都希望选择该点的单元格。

我想它类似于 uiPickerView。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T07:26:18.283

在你的`UITableViewController`你应该`-scrollViewDidScroll:`这样实现：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if (prevCell != nil)
        self.prevCell.selected = NO;

    CGPoint offset = self.tableView.contentOffset;
    CGPoint point = offset;
    point.y += self.tableView.center.y;
    NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:point];
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
    cell.selected = YES;
    self.prevCell = cell;
} 
```

这是经过测试和工作的。`prevCell`是类型的属性`UITableViewCell`。

您必须获取表格视图的滚动视图的当前偏移量并将其添加到您想要的单元格的位置（在此示例中，我将单元格放在表格视图的中心）。然后，使用`-indexPathForRowAtPoint:`我们获取该点的单元格的索引路径，并使用`-cellForRowAtIndexPath:`我们获取索引路径的单元格。将其设置为选中并存储以供以后使用（在下一次滚动时取消选择）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:14:10.353

你有没有尝试过

```
[[yourTableView cellForRowAtIndexPath:[yourTableView indexPathForRowAtPoint:wantPoint]] setSelected:true] 
```

?

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-14T07:00:54.123

我认为可以通过获取所有可见索引路径，然后获取可见索引路径上的数据来实现。您可能会看到自己的最佳答案，因为您非常了解自己的问题。浏览此类参考：

[https://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

# cakephp - Cakephp 请求的 URL 未找到

> ID：10578630
> 
> 赞同：3
> 
> 时间：2012-05-14T06:52:01.100
> 
> 标签：cakephp, cakephp-1.3

我在 ubuntu 11.10 上使用 Cakephp1.3

我创建了一个表名 users 。我蛋糕烘焙应用程序。和 user_controller ，视图和模型都存在。

现在，当我尝试访问**http://localhost/yps/users/**时，它会出现以下错误

> 未找到
> 
> 在此服务器上找不到请求的 URL /yps/users/

任何人都对此有想法

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T07:32:44.650

1.  请遵循名称约定，就像@Joseph 说的那样
2.  我遇到了同样的问题，它是由 mod_rewrite 引起的，就像@dhofstet 说的那样。修复它，然后一切正常。以及如何修复它取决于您的 Web 服务器的配置。（http://book.cakephp.org/2.0/en/getting-started.html#a-note-on-mod-rewrite）

# javascript - 如何将二进制流（从 .jpg 文件中读取，大约 1M ）从 firefox 插件传递到页面托管的 javascript？

> ID：10578631
> 
> 赞同：3
> 
> 时间：2012-05-14T06:52:04.270
> 
> 标签：javascript, npapi, browser-plugin

我最近在做一个项目，需要将二进制流从 npapi 插件传递到 javascript，我尝试了以下方法：

1.  使用 NPN_InvokeDefault，我创建了一个存储二进制流的字符串变体，并将其调用到 javascript，它失败了。（我试图传递从 XXX.txt 文件中读取的二进制流，它有效！）

2.  我尝试使用 NPN_NewStream，[http:](http://www.terraluna.org/dgp/cvsweb/PluginSDK/Documentation/pi3.htm#npnnewstream) //www.terraluna.org/dgp/cvsweb/PluginSDK/Documentation/pi3.htm#npnnewstream 中列出的示例可以 工作，但是图片是在新的浏览器选项卡中加载的，我没有知道如何在 javascript 中接收它。

有没有人遇到过类似的问题？或者也许 npapi 不能支持这种数据传输？

期待您的建议，非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T13:53:25.657

不幸的是，NPAPI 的设计从来没有考虑到这个目的。有几种方法可以做到这一点，但没有一个是真正理想的：

*   您可以创建一个 javascript 数组并以 1-4 字节的小块传递数据（这真的非常低效）
*   您可以创建嵌入在插件中的网络服务器并从那里请求数据（我已经这样做了，它可以很好地工作，但请记住，如果您从 SSL 网站使用它，当嵌入式网络服务器时，您会收到安全警告不是 SSL）
*   您可以对二进制数据进行 base64 编码并将其作为字符串发送。

这些是我看到的方式。您不能直接将实际二进制数据作为字符串发送的原因是 NPAPI 要求字符串数据为 UTF8，但如果您对其进行 base64 编码，则它可以正常工作。

对不起，我不能给你一个“更快乐”的解决方案：-/

# c# - 使用.net和c#从任务栏中删除应用程序图标

> ID：10578636
> 
> 赞同：0
> 
> 时间：2012-05-14T06:52:27.390
> 
> 标签：c#, winforms

我正在尝试在任务栏上显示图标，我就是这样做的。

```
ResourceManager resManager = new ResourceManager("TestAgent.Properties.Resources", GetType().Module.Assembly);
                notifyicon.Icon = (Icon)resManager.GetObject("TestAgent");
                notifyicon.Visible = true;
                notifyicon.Text = "Test Agent";
                this.Hide();
                this.ShowInTaskbar = false;
                this.SetVisibleCore(false); 
```

另一方面，当尝试以这种方式从任务栏中删除图标时。

```
notifyicon.Visible = false;
            notifyicon = null;
            rulehandler = null; 
```

我成功地做到了，但问题是当尝试从任务栏中删除图标时，它成功地从任务栏中删除了图标但没有隐藏图标，当将鼠标悬停在它删除的图标上时。

有没有在没有鼠标悬停的情况下删除图标？我正在使用 c# 以 Windows 形式执行此操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:10:49.430

只需丢弃它。

在 Windows 窗体中，您可以订阅全局事件 ApplicationExit ...

```
Application.ApplicationExit += new EventHandler(this.OnApplicationExit);

private void OnApplicationExit(object sender, EventArgs e) {
     notifyicon.Dispose();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T09:03:47.117

只需`notifyIcon.Visible = false;`在关闭窗口之前写（Icon 中的大写 I），就可以了。就如此容易。

# c# - 无法连接到托管应用程序中托管的多个 WCF 服务

> ID：10578638
> 
> 赞同：0
> 
> 时间：2012-05-14T06:52:35.077
> 
> 标签：c#, .net, wcf

我有一个 WCF 服务 (service1)。我在托管应用程序（简单的 .NET 应用程序）中托管此服务的几个实例。我在 Windows 服务中托管了另一个 WCF 服务 (service2)。当运行我的应用程序时，所有 service1 实例都连接到 service2 并且一切正常。但是，当 service2 尝试连接到 service1 的任何实例时，会出现异常“net.tcp://localhost:8732/TestComponent_6a4009df-cc68-4cd9-9414-16737c734548 上没有可以接受消息的端点监听。这通常是由不正确的地址或 SOAP 操作引起。有关更多详细信息，请参阅 InnerException（如果存在）。

所有 services1 实例都有唯一的地址（参见 uri 中的 guid），但服务合同和绑定类型相似。我使用打开端口共享的 netTCP 绑定。

有什么建议吗？

注意：当我在托管应用程序中托管唯一一个 service1 实例时，一切正常。我可以运行我的应用程序的多个实例，也没有错误。只有当我在一个应用程序中托管多个 service1 实例时，我才会遇到问题。

有一些代码：

Service1 实例创建：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
  Component = new TestComponent("net.tcp://localhost:8732/TestComponent", Component_OnMessageReceivedEvent);
  Component.JoinServer();
  Component2 = new TestComponent("net.tcp://localhost:8732/TestComponent", Component_OnMessageReceivedEvent);
  //guids is added to addresses in TestComponent constructor
  Component2.JoinServer();
} 
```

它在组件内部的工作方式：

```
public void JoinServer()
{
  this.StartComponentHosting();

  if (ServerClient != null)
  {
    ServerClient.Close();
    ServerClient = null;
  }

  ServerClient = new ServerClient();
  ServerClient.Open();  //conneting to service2
  ServerClient.JoinComponent(this.ProviderInfo); //calling some method on service2
}

private void StartComponentHosting()
{
  if (ComponentHost != null)
  {
    ComponentHost.Close();
  }

  ComponentHost = new ServiceHost(this);
  var portsharingBinding = new NetTcpBinding("NetTCPBindingConfig") { PortSharingEnabled = true };
  ComponentHost.AddServiceEndpoint(typeof(IComponent), portsharingBinding, this.Address);
  ComponentHost.Open();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:02:56.067

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
  Component = new TestComponent("net.tcp://localhost:8732/TestComponent", Component_OnMessageReceivedEvent);
  Component.JoinServer();
  Component2 = new TestComponent("net.tcp://localhost:8732/TestComponent", Component_OnMessageReceivedEvent);
  //guids is added to addresses in TestComponent constructor
  Component2.JoinServer();
} 
```

从这个代码部分，您的所有 service1 实例似乎都使用相同的端口和地址。尽快，如果您不使用 IIS，则不可能在同一端口上托管多个实例。

# javascript - 提交表单后不会显示弹出屏幕

> ID：10578640
> 
> 赞同：0
> 
> 时间：2012-05-14T06:52:38.107
> 
> 标签：javascript, jquery, jquery-plugins, jquery-mobile, mobiscroll

我正在使用 jquery mobile 构建一个 Web 应用程序。在一个页面上，我有一个小表格来预订房间。我有两个输入框。在这些框中是开始日期时间，在另一个框中是结束日期时间。

现在我要做的是，当我单击输入框时，会出现一个弹出框，您可以在其中插入 DateTime。该插件称为[mobiscroll](http://demo.mobiscroll.com/)。

我在我的 JS 中像这样打开它。

```
 $('[data-role=page]').live('pageinit', function(event){
        $("#DATUM_BEGIN").scroller({ preset: 'datetime',theme: 'jqm', mode: 'mixed',display:'modal'});

        $("#DATUM_EINDE").scroller({ preset: 'datetime',theme: 'jqm', mode: 'mixed',display:'modal'});
}); 
```

第一次这样做是正确的。但是，例如，如果我忘记输入结束日期并使用提交按钮提交我的表单。它在屏幕上显示错误消息。但是当我想输入一个日期时。弹出框不会显示。

有人知道我如何以正确的方式解决这个问题吗？

**编辑：解决方案**

好的，我找到了解决方案，您只需要禁用 ajax 就可以了。您可以使用属性禁用表单上的 ajax`data-ajax=false`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:01:06.290

你应该使用

```
$(page).live('pageinit', function(event){
    // Your code
    // 'page' is a selector for the jquery mobile page you want to work on
}); 
```

代替：

```
$(document).ready(function(){}); 
```

你可以在这里看到为什么[http://jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html) 我认为这可能是这个问题，但即使不是，我也会这样工作，它会避免几个头痛。

# architecture - 在构造函数中推断逻辑

> ID：10578642
> 
> 赞同：0
> 
> 时间：2012-05-14T06:52:52.333
> 
> 标签：architecture, constructor

在对象构造函数中推断任何类型的函数是一种好习惯吗？例如，它是现有对象还是新对象？

我有一个类，根据使用的构造函数，它要么从数据库中提取，要么从头开始创建。我正在使用 C#，但这对这个问题并不重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:46:13.080

我更愿意将自定义逻辑放在客户端类中，用于创建实例或使用工厂方法而不是复杂逻辑的构造函数[http://sourcemaking.com/design_patterns/factory_method](http://sourcemaking.com/design_patterns/factory_method)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:22:47.003

当然，调用虚方法会导致未定义的行为——因为基本​​构造函数在派生方法之前被调用——你不应该那样做。

其余的取决于。从构造函数调用的方法可能会导致副作用。例如，如果您在构造函数中订阅了一个事件，并且在构造函数结束之前调用了您的处理程序。构造函数主要用于为类成员设置初始值。

调用内部初始化方法应该没问题，但总的来说我建议避免它。

如果有一些复杂的初始化逻辑，可能你应该检查“Builder”模式。

# android - 从图库中导入 QR 图像并使用 zxing library 2.0 进行扫描

> ID：10578648
> 
> 赞同：1
> 
> 时间：2012-05-14T06:53:09.027
> 
> 标签：android, zxing

如何从图库中扫描 QR 码图像。我正在使用 Zxing 库来扫描二维码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:03:06.000

您需要[Barcode Scanner+](https://play.google.com/store/apps/details?id=com.srowen.bs.android)来解码文件。

# foreach - 如何将无序列表转换为为此选择选项

> ID：10578649
> 
> 赞同：0
> 
> 时间：2012-05-14T06:53:12.397
> 
> 标签：foreach, drop-down-menu, selection

嗨，我正在尝试添加子类别选择列表，我在这里找到了一个不错的代码并且工作正常，但我想将它用作下拉选择而不是取消排序列表。谁能帮我做到这一点。

```
<?php
if (is_category()) {
    $cat = get_query_var('cat');
    $this_category = get_category($cat);
    $this_category = wp_list_categories('hide_empty=0&hierarchical=true&orderby=id&show_count=0&title_li=&use_desc_for_title=1&child_of='.$this_category->cat_ID."&echo=0");
    if($this_category !='<li>No categories</li>')
    {
     echo '<h3>Products</h3>'; 
     echo '<ul>'.$this_category.'</ul>'; 
    }
}
?> 
```

我曾尝试使用 foreach 但它没有用可能是我在某个地方错了，因为不是 php 大师

```
<?php
    if (is_category()) {
        $cat = get_query_var('cat');
        $this_category = get_category($cat);
        $this_category = wp_list_categories('hide_empty=0&hierarchical=true&orderby=id&show_count=0&title_li=&use_desc_for_title=1&child_of='.$this_category->cat_ID."&echo=0");
        if($this_category !='<li>No categories</li>')
        {
            echo '<h3>Products</h3>';
            echo '<select>';
            foreach($this_category as $list) {
            echo '<option>'.$list.'</option>'; 
            }
            echo '</select>';
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:34:44.040

所以你的代码似乎没有进入 foreach 循环。变量 $this_category 似乎是一个字符串，而不是可以迭代的数组。

做一个字符串替换来切换`<li>`标签，`<option>`然后回显它：

```
$this_category = str_replace('<li>', '<option>', $this_category);
$this_category = str_replace('</li>', '</option>', $this_category);

echo '<select>'.$this_category.'</select>'; 
```

# excel - 如何使用 Excel 将工作项从一台 TFS 服务器导出到另一台 TFS 服务器

> ID：10578652
> 
> 赞同：2
> 
> 时间：2012-05-14T06:53:28.357
> 
> 标签：excel, tfs, tfs-workitem

我需要将工作项从一台 TFS 服务器迁移到另一台 TFS 服务器。我尝试使用[CodePlex 中提供的 TFSMigration 工具](http://tfstotfsmigration.codeplex.com/)迁移它们。

我遇到的问题是源 TFS 上的工作项的架构与目标上的工作项类型的架构不同。我不希望修改工作项的目标 TFS 服务器架构。架构中的更改只是一个新列，但仍然不想进行该更改。

在一篇博客中，据说我们可以使用 Excel 做到这一点，但没有太多细节可用。我不确定我们甚至可以使用 Excel 来迁移与 Excel 相关的整个历史记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:09:10.730

查看 VS 库上的[TFS 集成工具](http://visualstudiogallery.msdn.microsoft.com/eb77e739-c98c-4e36-9ead-fa115b27fefe)。这支持将自定义字段映射作为迁移的一部分，[此处的文档](http://tfsintegration.codeplex.com/releases/view/35476)（[直接下载](http://tfsintegration.codeplex.com/releases/35476/download/126821)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T19:07:42.080

我前一阵子做了这个，没有找到合适的工具，只好手动复制标题和描述等，因为当时我们只有几个活动的工作项目，所以只花了大约一个小时。

但是，如果我需要再次执行此操作，我将使用 TFS API 读取感兴趣的字段并将它们写入新数据库。这样，任何架构差异都无关紧要，并且该过程是自动化的，但在您的控制之下。使用 TFS API 搜索研究工作项以获取详细信息 - 这真的非常简单。

当然，使用这两种方法（以及所有迁移工具 AFAIK），您只会获得数据的快照 - 所有历史都会丢失（或者您最多可以使用 AsOf 查询以获取历史数据，但您所做的所有条目将在您编写它们的那一刻加上时间戳，而不是事件最初发生的历史时间。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-29T19:52:34.393

您可以使用 Excel 编辑器编辑源查询**所有项目**“在 Microsoft Excel 中打开查询”。然后打开目标查询**所有项目**“在 Microsoft Excel 中打开查询”。将内容从一个 Excel 窗口复制并粘贴到另一个。附件等某些字段不会转移。

# database - 从数据库模式和内容生成本体的工具

> ID：10578655
> 
> 赞同：2
> 
> 时间：2012-05-14T06:53:33.883
> 
> 标签：database, ontology

是否有一种工具可以从包含在数据库模式和该模式中的内容中的信息中推断出本体？假设数据库中有定义以下内容的表：

*   可以存在的实体类型
*   与类型相关联的实体的实例
*   可以存在的关系类型
*   与类型和相关实体相关联的那些关系的实例

我觉得单独查看模式会提供比我想要的更通用的本体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:03:35.667

Reveltyix 与 Global IDs、数据治理和 MDM 建立了合作伙伴关系。GID 的数据分析工具之一可以将 RDF 导出给我们，以引导本体的大部分，即使它跨越多个数据库。然后，Revelytix 技术使用生成的本体来联合数据和管理分布式信息源，而无需移动日期。

祝你好运格雷格 201-232-9195

# php - 如何将打开的图形操作发布到许多用户时间线？

> ID：10578656
> 
> 赞同：0
> 
> 时间：2012-05-14T06:53:36.583
> 
> 标签：php, facebook, facebook-opengraph

我的网站有一个由 cronjob 命令行执行的队列脚本。它为许多用户计算逻辑。当每个用户的计算都为真时，它应该向该用户时间线发布一个操作（那些用户已经过身份验证并且我们有用户 fb id）。我怎么能这样做？目前，对于浏览网站的当前用户，我可以使用

`$fb->api('/me/'.....`

如何将打开的图形操作发布到其他用户时间线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:47:54.363

如果你想在任何用户个人资料上发帖，你必须使用 $fb->api("$user/feed") ; 如果您想在多个用户上发布，则必须发出批处理请求。

# php - 我想在使用 JavaScript 和 PHP 打字时向用户建议一些数据。怎么可能呢？

> ID：10578657
> 
> 赞同：0
> 
> 时间：2012-05-14T06:53:42.300
> 
> 标签：php, jquery, mysql, database

呃。举个例子……

这是 PHP 代码：*index.php* :->

```
<?php
// Starter tags
echo "<input name='name' value='name'> </input>";
?> 
```

这是数据库表结构：

```
|------------|------------------|---------------------------------------|
| Name       |   Email          |          Description                  |
|------------|------------------|---------------------------------------|
|John Doe    | john@doe.com     |  John Doe is example person           |
|            |                  |                                       |
|Rishikesh   | risht@dot.com    |  Rishikesh is FnCEO of Pupoz          |
|------------|------------------|---------------------------------------| 
```

如何编写 jQuery 代码，以便它要求 PHP 执行 MySQL 查询并在键入时给出选择建议。那个输入框应该在 PHP 页面上。如果可以的话，请添加您自己的名字，我稍后会尝试。谢谢，如果你能帮助我。

我有些疑惑。并且稍后会问问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T06:58:18.807

使用 Jquery UI AutoComplete，它可以与远程数据源、数据数组一起使用。它有许多选项，例如模态，样式。[Jquery自动完成](http://jqueryui.com/demos/autocomplete/)

```
<div id="SomeID"> <input type="text" id="SomeTextID"/></div> 
```

查询。

```
$(function(){

$( "#SomeTextID" ).autocomplete({
            source: "YourPhpPage.php",
            minLength: 2,
            select: function( event, ui ) {
                log( ui.item ?
                    "Selected: " + ui.item.value + " aka " + ui.item.id :
                    "Nothing selected, input was " + this.value );
            }
        }); 
```

});

见演示：[JSFiddle AutoCompleter](http://jsfiddle.net/XftCe/1/)

# ruby-on-rails - Rails 嵌套属性 - 如何为新产品添加类别属性？

> ID：10578659
> 
> 赞同：6
> 
> 时间：2012-05-14T06:53:50.733
> 
> 标签：ruby-on-rails, ruby, has-many-through, nested-attributes

我正在使用 rails 创建一个新产品，并希望为每个产品添加一个类别。

我有三个表：产品、类别和分类（存储产品和类别之间的关系）。我正在尝试使用嵌套属性来管理分类的创建，但不确定应该如何更新我的控制器和视图/表单，以便新产品也更新分类表。

这是我的模型：

```
class Product < ActiveRecord::Base
 belongs_to :users
 has_many :categorizations
 has_many :categories, :through => :categorizations
 has_attached_file :photo
 accepts_nested_attributes_for :categorizations, allow_destroy: true

 attr_accessible :description, :name, :price, :photo

 validates :user_id, presence: true

end

class Category < ActiveRecord::Base
 attr_accessible :description, :name, :parent_id
 acts_as_tree
 has_many :categorizations, dependent: :destroy
 has_many :products, :through => :categorizations

end

class Categorization < ActiveRecord::Base
  belongs_to :category
  belongs_to :product
  attr_accessible :category_id, :created_at, :position, :product_id

end 
```

这是我的新产品控制器：

```
def new
    @product = Product.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @product }
    end
  end 
```

这是我的视图形式：

```
<%= form_for @product, :html => { :multipart => true } do |f| %>
  <% if @product.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@product.errors.count, "error") %> prohibited this product from being saved:</h2>

      <ul>
      <% @product.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :description %><br />
    <%= f.text_field :description %>
  </div>
  <div class="field">
    <%= f.label :price %><br />
    <%= f.number_field :price %>
  </div>
<div class="field">
<%= f.file_field :photo %>
</div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我应该如何更新我的控制器，以便在添加新产品时同时更新产品和分类表？如何更新我的视图文件以使类别出现在下拉菜单中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T18:02:37.007

我看到该产品有_many 类别。允许用户在产品创建/版本时指定它们是很自然的。[此处](http://millarian.com/programming/ruby-on-rails/quick-tip-has_many-through-checkboxes/)描述了一种方法（通过复选框为您的产品分配类别）。另一种方式：像往常一样创建产品并允许在其编辑页面上添加/删除类别，例如：

```
 cat_1 [+]
 cat_2 [-]
 cat_3 [+] 
```

还可以看看 Railcasts，就像[这个](http://railscasts.com/episodes/258-token-fields)一样，它以一种更漂亮的方式来做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:36:39.613

首先要在视图文件中显示类别，请使用以下内容在下拉列表中显示类别

```
<%= select_tag("category_id[]", options_for_select(Category.find(:all).collect { |cat| [cat.category_name, cat.id] }, @product.category.collect { |cat| cat.id}))%> 
```

然后在产品控制器的创建方法中执行以下操作

```
@product = Product.create(params[:category])
@product.category = Category.find(params[:category_id]) if params[:category_id] 
```

我希望这会对你有所帮助。
谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T18:10:33.897

[RailsCasts](http://railscasts.com/episodes/196-nested-model-form-revised)的嵌套模型表单教程 可能会帮助您，或者可能会帮助其他人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T01:36:07.473

这是我在 _form.html 中添加到我的产品视图文件中的内容 - 这创建了多个复选框，我可以使用这些复选框为每个产品选择多个类别：

```
</div class="field">
<% Category.all.each do |category| %>
<%= check_box_tag "product[category_ids][]", category.id %>
<%= label_tag dom_id(category), category.name %><br>
<% end %> 
```

# android - 如何在 Android 应用程序中使用像状态栏通知这样的 CustomSliding Drawer

> ID：10578660
> 
> 赞同：0
> 
> 时间：2012-05-14T06:53:52.427
> 
> 标签：android

我是 android 应用程序的新手，我正在制作一个具有 NFC 技术的应用程序，在这里我想制作一个通知栏，如默认操作系统状态栏通知。我现在自定义了它，我希望它在所有屏幕中调用/显示，而最终用户在应用程序中从上到下将其拉动。

这是我的自定义滑动抽屉类，并在 Main.xml 文件中使用它

```
<com.abc.xyx.customnotification.CustomDrawer
    xmlns:my="http://schemas.android.com/apk/res/com.abc.xyx.app"
    android:id="@+id/drawer"
    my:direction="topToBottom"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    my:handle="@+id/handle"
    my:content="@+id/content"
    android:layout_marginTop="100dp"
    >
    <include
        android:id="@id/content"
        layout="@layout/slider"/>
    <ImageView

        android:id="@id/handle"
        android:layout_width="wrap_content"
        android:layout_height="150px"
        android:visibility="invisible"

        android:src="@drawable/tooltiparea" />
</com.abc.xyx.customnotification.CustomDrawer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:02:00.380

你应该google一下，有很多解释很好的示例，比如：

*   [带有自定义视图的 Android SlidingDrawer](https://mobibear.wordpress.com/2010/07/12/android-slidingdrawer-with-custom-view/)或
*   [在 XML 中实现 SlidingDrawer 的示例](http://android-coding.blogspot.com/2011/04/example-to-implement-slidingdrawer-in.html)或
*   [小部件：SlidingDrawer 从上到下](http://blog.sephiroth.it/2011/03/29/widget-slidingdrawer-top-to-bottom/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T11:27:37.267

你应该为此使用 oops

首先制作一个扩展 android.app.Activity 的 BaseActivity。现在，这将是您要在其中显示状态栏的所有应用程序 Activity 的父 Activity。在其中定义与自定义状态栏相关的所有功能以及用于保存与子 Ativity 相关的视图的父布局

BaseActivity 的 xml 布局将是这样的

```
 <com.abc.xyx.customnotification.CustomDrawer
    xmlns:my="http://schemas.android.com/apk/res/com.abc.xyx.app"
    android:id="@+id/drawer"
    my:direction="topToBottom"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    my:handle="@+id/handle"
    my:content="@+id/content"
    android:layout_marginTop="100dp"
    >
    <include
        android:id="@id/content"
        layout="@layout/slider"/>
    <ImageView

        android:id="@id/handle"
        android:layout_width="wrap_content"
        android:layout_height="150px"
        android:visibility="invisible"

        android:src="@drawable/tooltiparea" />
</com.abc.xyx.customnotification.CustomDrawer>

<RelativeLayout >
this layout is used for holding child Activities views
</RelativeLayout> 
```

生成访问器方法来访问slidingdrawer 和parentLayout。

现在，您要添加 customSlidingBar 的活动应该从 BaseActivity 扩展，您只需为滑动抽屉实现编写一次代码

希望能帮助到你

# iphone - iPhone的日期和时间

> ID：10578664
> 
> 赞同：0
> 
> 时间：2012-05-14T06:53:56.693
> 
> 标签：iphone, ios, nsdate, nsdateformatter

我将如何制作一个像苹果在其应用程序中那样执行日期和时间的函数？（例如。消息应用程序和便笺应用程序）它会在今天结束后它会在昨天说，并且一旦豁免失败然后它会说这一天，一周前。然后它会说那一天。我是否必须像每次检查的 switch 语句一样？因为这看起来很笨拙，特别是如果我只想在表格视图单元格的详细信息部分中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:59:58.597

我用这个函数来测试给定的日期是否是今天

```
- (BOOL)isSameDay:(NSDate*)date1 date2:(NSDate*)date2 {
    NSCalendar* calendar = [NSCalendar currentCalendar];

    unsigned unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit;
    NSDateComponents* comp1 = [calendar components:unitFlags fromDate:date1];
    NSDateComponents* comp2 = [calendar components:unitFlags fromDate:date2];

    return [comp1 day]   == [comp2 day] &&
    [comp1 month] == [comp2 month] &&
    [comp1 year]  == [comp2 year];
} 
```

# python - 如何使用 python 脚本从 htpasswd 文件中访问用户名的值

> ID：10578671
> 
> 赞同：0
> 
> 时间：2012-05-14T06:54:29.510
> 
> 标签：python

我在 htpasswd 文件中创建了一个用户名/密码。在我的 python 脚本文件中，我想访问用户名值以进行进一步处理。我该如何做到这一点？我正在使用 Linux 操作系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:08:51.653

htpasswd 格式是 `:"，解析起来并不难。只需逐行遍历并在冒号上拆分，取第一个值：

```
usernames = []
with open("passwdfile") as htpwd:
    for line in htpwd.readlines():
        username, pwd = line.split(":")
        usernames.append(username) 
```

或者更简洁：

```
with open("passwdfile") as htpwd:
    usernames = [line.split(":")[0] for line in htpwd.readlines()] 
```

# java - 查找 2 个 java.sql.Timestamps 之间的小时或分钟差异？

> ID：10578674
> 
> 赞同：16
> 
> 时间：2012-05-14T06:54:43.160
> 
> 标签：java

我将 a作为*Timestamp*`java.sql.Timestamp`数据类型存储在*postgresql*数据库中，我想找出存储在数据库中的时间戳与当前*时间戳*之间的分钟或小时差异。这样做的最佳方法是什么？是否有内置方法或者我必须将其转换为 long 或其他什么？

 *** * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-19T01:45:54.580

我结束了使用它，如果他们搜索它，只想将它发布给其他人。

```
public static long compareTwoTimeStamps(java.sql.Timestamp currentTime, java.sql.Timestamp oldTime)
{
    long milliseconds1 = oldTime.getTime();
  long milliseconds2 = currentTime.getTime();

  long diff = milliseconds2 - milliseconds1;
  long diffSeconds = diff / 1000;
  long diffMinutes = diff / (60 * 1000);
  long diffHours = diff / (60 * 60 * 1000);
  long diffDays = diff / (24 * 60 * 60 * 1000);

    return diffMinutes;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:17:52.463

使用该`UNIX_TIMESTAMP`函数将 DATETIME 转换为小时、分钟和秒的值。
如果您不确定哪个值更大，请使用 ABS 功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T07:26:57.180

对于日期添加/删除，这是我的通用功能：

```
public static Date addRemoveAmountsFromDate(Date date, int field, int amount) {
    Calendar tempCalendar = Calendar.getInstance();

    tempCalendar.setTime(date);
    tempCalendar.add(field, amount);

    return tempCalendar.getTime();
} 
```

“字段”示例：Calendar.HOUR_OF_DAY、Calendar.MINUTE

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T07:29:15.060

只需使用：

```
Date.compareTo(Date) 
```

您必须先将 java.sql.Timestamps 转换为 Date。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T13:57:20.237

`date_part`功能可以给您`hours`或您的兴趣，但是，它是一种，`substr`因此不能依赖它。您需要将您的`timestamp`价值转换为`unix_timestamp`总`extract` *经过*的小时数、分钟数或自您的`timestamp`till以来的任何相关内容`current_timestamp`。

**示例**：

```
select age( now(), timestamp '2010-11-12 13:14:15' );  
//results the interval to be "*1 year 6 mons 2 days 04:39:36.093*"  

select date_part( 'hours', age( now(), timestamp '2010-03-10 02:03:04' ) );  
// results *4* which is not correct. 
```

在找到自 1970 年以来经过的总秒数后，可以计算小时或其他的正确值。这可以使用`epoch`with`extract`函数来实现。
`epoch`返回自 以来的总秒数`1970-01-01 00:00:00-00`。而且，你知道，我们可以通过将它除以 3600 将其转换为小时。

**`epoch`与 一起使用`extract`**：

```
select
  EXTRACT( EPOCH FROM current_timestamp - timestamp '2010-11-12 13:14:15' ) as total_seconds,
  EXTRACT( EPOCH FROM current_timestamp - timestamp '2010-11-12 13:14:15' ) / 3600 as total_hours;  
  ROUND(  
         EXTRACT( EPOCH FROM current_timestamp - timestamp '2010-11-12 13:14:15' ) / 3600  
       ) as total_hours_rounded; 
```

// 结果：

```
----------------+--------------+-----------------------  
| total_seconds | total_hours  | total_hours_rounded  |  
| --------------+--------------+----------------------|  
| 47452282.218  | 13181.189505 | 13181                |  
----------------+--------------+----------------------- 
```

同样，我们可以提取其他需要的值并根据需要使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-30T09:19:12.170

使用这个，非常准确：

```
 long diff = end - start;

    long diffDays = diff / (24 * 60 * 60 * 1000);
    long remain = diff % (24 * 60 * 60 * 1000);

    long diffHours = remain / (60 * 60 * 1000);
    remain = remain % (60 * 60 * 1000);

    long diffMinutes = remain / (60 * 1000);
    remain = remain % (60 * 1000);

    long diffSeconds = remain / (1000);

    System.out.println("days : " + diffDays);
    System.out.println("hours : " + diffHours);
    System.out.println("minutes : " + diffMinutes);
    System.out.println("secs: " + diffSeconds2); 
```**

# asp.net - 如何处理 LoginStatus 控件单击？

> ID：10578679
> 
> 赞同：1
> 
> 时间：2012-05-14T06:55:10.010
> 
> 标签：asp.net

我`LoginStatus`在母版页中使用带有控件的 ASP.NET 4.0。当状态为`Login`并且我单击链接时，将尝试重新加载当前页面。我可以看到`IsPostBack=True`。

如果我`Set Next Statement`用来避免我在`Page.Load`重定向中的代码`Login.aspx`顺利进行，否则当前页面会尝试重新加载并且由于某种原因它会失败。

从`Page.Load`，检测`LoginStatus`已点击的最佳方法是什么？click 事件处理程序将无法工作，因为它触发得太晚了。`IsPostBack`也不起作用（单独）。我确实有一个由我的母版页继承的 BaseMasterPage 类，但同样，母版页在我的所有页面中的 Page.Load 之后加载。

我是否必须在使用此母版页的每个页面中处理此点击？

顺便说一句，我还有一个`BasePage`我的所有页面都继承的类。我只是不确定如何检测`LoginStatus`已被点击 - 如果有，如何处理它。我会强制重定向吗？好像有点矫枉过正...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T03:56:45.157

这里的问题是由`<img src=`远程服务器上不存在的问题引起的。这导致我的页面加载两次。第一次通过，`IsPostBack`将是`True`。第二次通过它`False`。

这就是为什么我无法弄清楚为什么重定向没有自行发生的原因。我将这个问题标记为已回答，即使我可能应该删除整个问题。:S

# objective-c - 推送时UITabbar消失

> ID：10578681
> 
> 赞同：1
> 
> 时间：2012-05-14T06:55:10.743
> 
> 标签：objective-c, xcode, ios5

我在使用导航控制器时遇到问题，当我将视图控制器推送到 xib 时，请查看 UITabbar 但在我将视图推送到的 mij xib 中，我正在这样做以推送我所在的 xib推送到另一个文件，但是当我使用这行代码时，UITabbar 没有出现。

我在视图控制器 1 中所做的我检查 JSON 文件是否包含 0,1 或 2 个项目，例如 JSON 中的“1”项目我想将视图控制器推送到“2 项目”专用的文件文件'我正在以这种方式推动：

```
 UIViewController *rootController = 
    [[2ViewController alloc] 
     initWithNibName:@"2ViewController" bundle:nil];

    navigationController = [[UINavigationController alloc]
                            initWithRootViewController:rootController];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [self.window addSubview:navigationController.view];
    [self.window makeKeyAndVisible]; 
```

但是当我这样做时，UITabbar 消失在视图控制器的“下方”。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-14T07:14:25.137

您将 set navigationController 设置为 UITabBarController。

就像//添加到标签栏。NSArray* 控制器 = [NSArray arrayWithObjects:navigationController, nil];

```
myTabBarController.viewControllers = controllers; 
```

# arrays - 将 JSON 与对象一起使用

> ID：10578691
> 
> 赞同：0
> 
> 时间：2012-05-14T06:56:00.013
> 
> 标签：arrays, json, object, stringify

我有一个像

```
data: Array[1]; 
```

可以像这样访问

```
data[0].name
data[0].place 
```

我正在尝试使用 like 将其转换为 JSON

```
var arr = JSON.stringify(data); 
```

返回

```
var arr = [{"name": "blah", "place": "ca"}] 
```

但是我很困惑如何使用这个 arr 现在它的字符串化了？如何访问例如“名称”值？我试过`arr.name`了，但这似乎不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:00:06.047

数组是

```
arr == [{"name": "blah", "place": "ca"}]; 
```

该对象是数组中的第一项

```
arr[0] == {"name": "blah", "place": "ca"} 
```

以及它的属性...

```
arr[0].name == "blah" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:01:07.890

您的“名称”在数组内的哈希/关联数组内

所以你需要先获取哈希/关联数组，使用

```
arr[0] 
```

然后你可以访问你的属性。

# mysql - MySQL选择具有多个特殊字符的字符串

> ID：10578694
> 
> 赞同：0
> 
> 时间：2012-05-14T06:56:15.920
> 
> 标签：mysql

我在从数据库中选择字符串时遇到问题。问题是如果您在行中有**+(123)-4 56-7**并且如果您使用字符串**1234567**进行搜索，它将找不到任何结果。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:03:19.063

使用替换功能查询 -

```
select * from phoneTable where replace(replace(replace(phone, '+', ''), '-', ''), ')', '(') LIKE '%123%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:04:20.843

SO中已经有另一个线程涵盖了一个非常相似的问题，请参见[此处](https://stackoverflow.com/questions/40873/searching-for-phone-numbers-in-mysql)。

如果您总是在搜索这种模式，并且您的表相当大，我建议您反对`REPLACE()`or `REGEX()`- 如果调整得当，哪个 ofc 将完成这项工作。

最好添加一个带有普通电话号码的列，其中根本不包含任何格式化字符数据 - 甚至更好的是电话号码的哈希。这样，您可以将索引添加到新列并对此进行搜索。从数据库的角度来看，这更容易，也更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T07:06:20.310

您可以使用用户定义函数从字符串中获取数值。

```
CREATE FUNCTION GetNumeric (val varchar(255)) RETURNS tinyint 
 RETURN val REGEXP '^(-|\\+){0,1}([0-9]+\\.[0-9]*|[0-9]*\\.[0-9]+|[0-9]+)$';

CREATE FUNCTION GetNumeric (val VARCHAR(255)) 
 RETURNS VARCHAR(255)
BEGIN
 DECLARE idx INT DEFAULT 0;
 IF ISNULL(val) THEN RETURN NULL; END IF;

 IF LENGTH(val) = 0 THEN RETURN ""; END IF;

 SET idx = LENGTH(val);
  WHILE idx > 0 DO
  IF IsNumeric(SUBSTRING(val,idx,1)) = 0 THEN
   SET val = REPLACE(val,SUBSTRING(val,idx,1),"");
   SET idx = LENGTH(val)+1;
  END IF;
  SET idx = idx - 1;
  END WHILE;
  RETURN val;
 END; 
```

然后

```
Select columns from table
where GetNumeric(phonenumber) like %1234567%; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T06:59:46.500

您可以使用[REPLACE()](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace)方法来删​​除 mysql 中的特殊字符，但不知道它是否非常有效。但它应该工作。

# android - 转到主要活动时启动屏幕出现错误

> ID：10578701
> 
> 赞同：0
> 
> 时间：2012-05-14T06:56:42.637
> 
> 标签：android

我的启动画面出现错误，它将强制关闭应用程序。在 Logcat 中说 Permission Denied。我应该怎么做才能解决这个问题。谁能帮我解决这个问题，非常感谢

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.MotionEvent;

public class SplashScreen extends Activity {
    protected boolean _active = true;
    protected int _splashTime = 4000;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);

        // thread for displaying the SplashScreen
        Thread splashTread = new Thread() {
            @Override
            public void run() {
                try {
                    int waited = 0;
                    while(_active && (waited < _splashTime)) {
                        sleep(100);
                        if(_active) {
                            waited += 100;
                        }
                    }
                } catch(InterruptedException e) {
                    // do nothing
                } finally {
                    finish();
                    startActivity(new Intent("com.droidnova.android.splashscreen.BodyPartsGameActivity"));
                    stop();
                }
            }
        };
        splashTread.start();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            _active = false;
        }
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:59:55.540

这样做会更容易：

```
private ImageView img;
    private Thread t;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        img = (ImageView)findViewById(R.id.im1);

        t = new Thread(){   
            @Override
            public void run() {
                try {
                    synchronized(this){ 
                        wait(2000);
                    }
                      // Here your code of animation

                } 
                catch(InterruptedException ex){ 
                    ex.printStackTrace();
                }

                Intent i = new Intent(QuizActivity.this,main.class);
                startActivity(i);
            }
        };
            t.start();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:07:38.143

您的问题是您没有将**QuizActivity**添加到 AndroidMainfest.xml

```
 <activity android:name="QuizActivity" ></activity> 
```

比你的问题应该得到解决。在你开始新的活动之前

```
finish(); 
```

比你不能用返回键返回它=）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T07:10:45.720

你可以试试这个一次..

```
Thread splashTread = new Thread() {
            @Override
            public void run() {
                try {
                    int waited = 0;
                    while(_active && (waited < _splashTime)) {
                        sleep(100);
                        if(_active) {
                            waited += 100;
                        }
                    }
                } catch(InterruptedException e) {
                    // do nothing
                } finally {
                    runOnUiThread(new Runnable() {

                        @Override
                        public void run() {
                            finish();
                            startActivity(new Intent("com.droidnova.android.splashscreen.BodyPartsGameActivity"));
                            stop();
                        }
                    });
                }
            }
        }; 
```

# xml - 如何在 Marklogic 中创建元素范围索引？

> ID：10578706
> 
> 赞同：3
> 
> 时间：2012-05-14T06:56:52.793
> 
> 标签：xml, xquery, indexing, marklogic

我有以下xml：-

```
<?xml version="1.0" encoding="UTF-8"?>
<patent-assignment>
  <assignment-record>
    <correspondent>
      <name>NORTH AMERICA INTERNATIONAL PATENT OFFIC</name>
      <address-1>P.O. BOX 506</address-1>
      <address-2>MERRIFIELD, VA 22116</address-2>
    </correspondent>
   </assignment-record>
  <patent-assignors>
    <patent-assignor>
      <name>TSAI, YU-WEN</name>
      <execution-date>
    <date>20050331</date>
      </execution-date>
    </patent-assignor>
    <patent-assignor>
      <name>HUANG, CHENG-I</name>
      <execution-date>
    <date>20050331</date>
      </execution-date>
    </patent-assignor>
  </patent-assignors>
  <patent-assignees>
    <patent-assignee>
      <name>FARADAY TECHNOLOGY CORP.</name>
      <address-1>NO.10-2, LI-HSIN ROAD 1, SCIENCE-BASED INDUSTRIAL PARK</address-1>
      <city>HSIN-CHU CITY</city>
      <country-name>TAIWAN</country-name>
    </patent-assignee>
  </patent-assignees>
 </patent-assignment> 
```

现在我想在**专利转让**人和**专利**转让人的名称上创建范围元素索引。但是在 Marklogic 中，没有为范围索引指定 XPath 的选项。它只会将索引名称作为“名称”。那么在**专利转让**人和**专利**转让人的名称上创建元素范围索引的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-04T10:40:18.343

您可以`cts:path-range-query()`用于专利转让人和专利受让人

1.  `cts:path-range-query("/patent-assignors/patent-assignor","=",$name)`
2.  `cts:path-range-query("/patent-assignees/patent-assignor","=",$name)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T09:10:19.857

您无需担心元素的父级或祖先。您可以通过将元素范围查询或元素值查询包装在元素查询中来限制祖先的元素范围查询或元素值查询：

```
cts:element-query(xs:QName("patent-assignor"), cts:element-value-query(xs:QName("name"), "my value")) 
```

通过将序列作为第一个参数传递给 cts:element-query，您可以在单个调用中搜索具有不同祖先的名称：

```
cts:element-query((xs:QName("patent-assignor"), xs:QName("patent-assignee")), cts:element-value-query(xs:QName("name"), "my value")) 
```

！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T11:13:55.217

Puneet，为了只获得一组名称，MarkLogic 需要能够以某种方式区分这些集合。您最好的选择是在摄取期间更改名称元素的本地名称（当前为“名称”）或名称空间（当前无）。这样做之后，您可以构建一个元素范围索引并使用 cts:element-values()。例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<patent-assignment>
  <assignment-record>
    <correspondent>
      <name>NORTH AMERICA INTERNATIONAL PATENT OFFIC</name>
      <address-1>P.O. BOX 506</address-1>
      <address-2>MERRIFIELD, VA 22116</address-2>
    </correspondent>
  </assignment-record>
  <patent-assignors xmlns="http://puneet/assignors">
    <patent-assignor>
      <name>TSAI, YU-WEN</name>
      <execution-date>
        <date>20050331</date>
      </execution-date>
    </patent-assignor>
    <patent-assignor>
      <name>HUANG, CHENG-I</name>
      <execution-date>
        <date>20050331</date>
      </execution-date>
    </patent-assignor>
  </patent-assignors>
  <patent-assignees xmlns="http://puneet/assignees">
    <patent-assignee>
      <name>FARADAY TECHNOLOGY CORP.</name>
      <address-1>NO.10-2, LI-HSIN ROAD 1, SCIENCE-BASED INDUSTRIAL PARK</address-1>
      <city>HSIN-CHU CITY</city>
      <country-name>TAIWAN</country-name>
    </patent-assignee>
  </patent-assignees>
</patent-assignment> 
```

从此 XML 中，您可以在每个“名称”元素上构建范围索引，然后调用

```
cts:element-values(fn:QName("http://puneet/assignees", "name")) 
```

获取受让人姓名。

# c++ - 如何在 MFC 中对 CListCtrl 中的项目进行排序？

> ID：10578709
> 
> 赞同：0
> 
> 时间：2012-05-14T06:57:09.123
> 
> 标签：c++, visual-c++, mfc

我在 MFC 中制作了一个基于对话框的应用程序。我将 CListCtrl 控件放在我的 Dialog 上，并将其视图样式设置为报告类型。我在此列表视图中有五列。所有列都是字符串类型。我想在这个列表中实现排序，也就是说，当我点击一个列时，它应该对列表中的项目进行排序。我看到了很多与此相关的例子。但没有一个对我有用。有人可以指导我如何做到这一点？？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:01:24.507

由于它是 MFC，[所以这个](http://www.codeproject.com/Articles/1360/Sort-List-Control)示例和[这个](http://www.codeproject.com/Articles/27774/CListCtrl-and-sorting-rows)示例应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:08:34.373

[列表排序](http://support.microsoft.com/kb/250614)

这完美地工作。谢谢你的合作。

# java - JComboBox 过滤器

> ID：10578710
> 
> 赞同：4
> 
> 时间：2012-05-14T06:57:11.213
> 
> 标签：java, swing, autocomplete, filtering, jcombobox

我有这个具有可编辑属性的 JComboBox `true`。我想知道是否可以`List<String>`添加到 JComboBox 过滤中？

例如，我`new String[] {"a", "a1", "b", "c", "a3"}`添加了一个具有可编辑`true`属性的 JComboBox。当我`a`在 JComboBox 上输入时会返回一个`new String[] {"a", "a1", "a3"}`.

这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T07:03:48.130

最简单的方法是使用[AutocComplete JComboBox / JTextField](https://stackoverflow.com/a/10371443/714968)，然后[JComboBox](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)的弹出列表返回过滤的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-04T18:10:59.457

这是您需要做的。创建一个 arrayList 或 List 并在那里添加所有项目。创建组合框并循环所有项目并将其添加到组合框然后创建一个过滤器方法。这不是一个完美的答案，但它会让你继续前进。

```
public class FilterComboBoxText {

    private JFrame frame;
    private final JComboBox comboBox = new JComboBox();
    private static List<String>listForComboBox= new ArrayList<String>();

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    FilterComboBoxText window = new FilterComboBoxText();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });

        listForComboBox.add("Lion");
        listForComboBox.add("LionKing");
        listForComboBox.add("Mufasa");
        listForComboBox.add("Nala");
        listForComboBox.add("KingNala");
        listForComboBox.add("Animals");
        listForComboBox.add("Anims");
        listForComboBox.add("Fish");
        listForComboBox.add("Jelly Fish");
        listForComboBox.add("I am the boss");

    }

    public FilterComboBoxText() {
        initialize();
    }

    private void initialize() {
        frame = new JFrame();
        frame.setBounds(100, 100, 412, 165);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout(null);
        comboBox.setEditable(true);

        comboBox.addItemListener(new ItemListener() {
            public void itemStateChanged(ItemEvent arg0) {

            }
        });

        for(String detail : listForComboBox) {
            comboBox.addItem(detail); 
        }
        final JTextField textfield = (JTextField) comboBox.getEditor().getEditorComponent();
        textfield.addKeyListener(new KeyAdapter() {
            public void keyReleased(KeyEvent ke) {
                SwingUtilities.invokeLater(new Runnable() {
                    public void run() {
                        if(!textfield.getText().isEmpty()){
                            comboBoxFilter(textfield.getText());
                        }
                    }
                });

            }
        });
        comboBox.setBounds(10, 39, 364, 29);
        frame.getContentPane().add(comboBox);
    }
     public void comboBoxFilter(String enteredText) {
         System.out.println(comboBox.getItemCount());

            if (!comboBox.isPopupVisible()) {
                comboBox.showPopup();
            }

            List<String> filterArray= new ArrayList<String>();
            for (int i = 0; i < listForComboBox.size(); i++) {
                if (listForComboBox.get(i).toLowerCase().contains(enteredText.toLowerCase())) {
                    filterArray.add(listForComboBox.get(i));
                }
            }
            if (filterArray.size() > 0) {
                DefaultComboBoxModel<String> model = (DefaultComboBoxModel<String>) comboBox.getModel();
                model.removeAllElements();
                model.addElement("");
                for (String s: filterArray)
                    model.addElement(s);

                JTextField textfield = (JTextField) comboBox.getEditor().getEditorComponent();
                textfield.setText(enteredText);
            }
        }

} 
```

# c++ - 使用 C++ 在 Windows 上获取 ssl 证书

> ID：10578716
> 
> 赞同：3
> 
> 时间：2012-05-14T06:57:58.720
> 
> 标签：c++, windows, ssl, openssl, ssl-certificate

我正在尝试在 Windows 上获取远程服务器的 ssl 证书。我发现的一种选择是使用 openssl。[如互联网](http://www.madboa.com/geek/openssl/#cert-retrieve)上的一些帖子所示，执行此操作的命令是：

```
openssl.exe s_client -showcerts -connect {REMOTE_SERVER_IP}:{REMOTE_SERVER_PORT} 
```

这很好用，但我的问题是上面的命令有 300 秒的超时。证书本身打印得非常快，当我在前几秒内得到我想要的一切时，我认为没有理由等待 300 秒。我仍然认为没有办法更改 s_client 上的超时参数。所以我试图想办法在给定的一段时间后杀死 Windows 上的一个进程，但又没有运气。关于如何做到这一点的任何想法？如果有其他 Windows 方法可以获取远程服务器 ssl 证书并将其存储在文件中，这也可以完成这项工作。

编辑：根据布鲁诺的要求添加更多信息。我正在尝试创建一个获取远程服务器的 SSL 证书并将其存储在文件中以供进一步处理的 c++ 应用程序。由于我的应用程序已经使用了 openssl.exe，我要么需要一个使用 openssl.exe 的解决方案，要么需要一个标准的 windows 命令（即不需要任何额外的库）。

EDIT2：我找到了一种避免在 linux 中等待的方法 - 只需创建一个空文件并将 openssl s_client 的输入重定向到它（或使用管道传递空输入）。这也适用于 Windows，但适用于旧版本的 openssl(0.9.8l)。我用 0.9.8r 和 1.0.1b 尝试过，将输入重定向到一个空文件并没有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T08:30:51.643

这是我创建的一个简约程序，它连接到服务器并将其 ssl 证书打印到标准输出。希望它能帮助其他人解决类似的问题：

```
#ifdef WIN32
#include <windows.h>
#include <winsock2.h>
#else
#include <netinet/in.h>
#include <netinet/tcp.h>
#include <netdb.h>
#include <sys/types.h>
#include <sys/socket.h>
#endif

#include <openssl/ssl.h>    
#include <cstdlib>
#include <iostream>

static const char *host= "10.23.10.12";
static int port=443;

int tcp_connect(const char *host,int port)
{
#ifdef WIN32
   WSADATA wsaData;
   WORD version;
   int error;

   version = MAKEWORD( 2, 0 );

   error = WSAStartup( version, &wsaData );

   /* check for error */
   if ( error != 0 )
   {
       /* error occured */
       return -1;
   }

   /* check for correct version */
   if ( LOBYTE( wsaData.wVersion ) != 2 ||
        HIBYTE( wsaData.wVersion ) != 0 )
   {
       /* incorrect WinSock version */
       WSACleanup();
       return -1;
   }

   /* WinSock has been initialized */
#endif

   struct hostent *hp;
   struct sockaddr_in addr;
   int sock;

   if(!(hp=gethostbyname(host)))
      printf("Couldn't resolve host");
   memset(&addr,0,sizeof(addr));
   addr.sin_addr=*(struct in_addr*)
         hp->h_addr_list[0];
   addr.sin_family=AF_INET;
   addr.sin_port=htons(port);

   if((sock=(int)socket(AF_INET,SOCK_STREAM,
                   IPPROTO_TCP))<0)
      printf("Couldn't create socket");
   if(connect(sock,(struct sockaddr *)&addr,
              sizeof(addr))<0)
      printf("Couldn't connect socket");

   return sock;
}

int main(int argc,char **argv)
{
   SSL_CTX *ctx;
   SSL *ssl;
   BIO *sbio;
   int sock;

   SSL_METHOD *meth=NULL;
   meth=SSLv23_client_method();
   OpenSSL_add_ssl_algorithms();
   SSL_load_error_strings();
   ctx=SSL_CTX_new(meth);

   /* Connect the TCP socket*/
   sock=tcp_connect(host,port);

   /* Connect the SSL socket */
   ssl=SSL_new(ctx);
   sbio=BIO_new_socket(sock,BIO_NOCLOSE);
   SSL_set_bio(ssl,sbio,sbio);

   if(SSL_connect(ssl)<=0)
     printf("SSL connect error");

   X509 *peer;
   peer=SSL_get_peer_certificate(ssl);
   PEM_write_X509(stdout, peer);

   SSL_CTX_free(ctx);

   close(sock);
#ifdef WIN32
   closesocket(sock);
   WSACleanup();
#else
   close(sock);
#endif
   exit(0);
} 
```

代码是[本文](http://www.rtfm.com/openssl-examples/)所建议的示例[的](https://stackoverflow.com/questions/5009271/any-good-examples-on-programming-using-libssl)修改版本。

编辑：我一直收到错误 OPENSSL_UPLINK: no OPENSSL_APPLINK on windows。在互联网上进行了大量搜索后，我找到[了这篇文章](http://old.nabble.com/Problems-running-application-td3993433.html)并将其添加到我的代码中：

```
extern "C" {
   #include <openssl/applink.c>
} 
```

似乎这是一些解决方法，以避免对编译器和运行时选项兼容性的要求。

# php - 在php中出现致命错误

> ID：10578717
> 
> 赞同：0
> 
> 时间：2012-05-14T06:57:59.937
> 
> 标签：php, mysql, phpmyadmin

我正在尝试解决这个问题。但是做不到。请帮忙

我正在尝试查看数据库中的所有记录，但得到“致命错误：调用非对象上的成员函数 query() ....”及其指向

```
if ($result = $mysqli->query("SELECT ProductName, Description, Price, Size FROM Products ORDER BY ProductID")) 
```

这是我的完整代码

```
<?php

                        include('db_connect.php');

**$mysqli = new mysqli("localhost", "netelmbn", "password", "netelmbn");
                       if ($mysqli->connect_errno) {
    printf("Connect failed: %s\n", $mysqli->connect_error);
    exit();
}**

                        if ($result = $mysqli->query("SELECT ProductName, Description, Price, Size FROM Products ORDER BY ProductID"))
                        {

                                if ($result->num_rows > 0)
                                {

                                        echo "<table border='1' cellpadding='10'>";

                                        echo "<tr><th>ProductID</th><th>ProductName</th><th>Description</th><th>Price</th><th>Size</th></tr>";

                                        while ($row = $result_fetch_object())
                                        {

                                              echo "<tr>";
                                                echo "<td>" . $row->ProductID . "</td>";
                                                echo "<td>" . $row->ProductName . "</td>";
                                                echo "<td>" . $row->Description . "</td>";
                                                echo "<td>" . $row->Price . "</td>";
                                                echo "<td>" . $row->Size . "</td>";
                                                echo "<td><a href='records.php?ProductID=" . $row->ProductID . "'>Edit</a></td>";
                                                echo "<td><a href='delete.php?ProductID=" . $row->ProductID . "'>Delete</a></td>";
                                                echo "</tr>";
                                        }
                                        echo "</table>";
                                }
                                else
                                {
                                        echo "No results to display!";
                                }
                        }
                        else
                        {
                                echo "Error: " . $mysqli->error;
                        }

                        $mysqli->close();

                ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:03:28.393

你需要先实例化你的 $mysqli obect。您也没有在任何地方打开数据库。

你至少需要这样的东西：

```
$mysqli = new ClassName( /*some parameters here*/ );

$mysqli->database_open( /* some parameters here */); // or something like this, look at the clas definition 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:25:27.753

你必须有一些数据库类，检查你的代码。

```
$mysqli = new Database();
$mysqli->connect(); 
```

在执行查询之前：

```
$result = $mysqli->query("SELECT ProductName, Description, Price, Size FROM Products ORDER BY ProductID"); 
```

如您所见，查询首先进行，然后是连接资源。>> 所以，先连接。

# ios - JSON 解析器返回 Null

> ID：10578719
> 
> 赞同：1
> 
> 时间：2012-05-14T06:58:05.293
> 
> 标签：ios, json, parsing

我正在尝试学习如何解析 JSON 数据，以便处理大型数据库。我编写了登录网站的代码。

我从成功的登录请求中获得了以下 JSON 数据：

```
JSON string : correct username and password [{"user_id":"7","first_name":"dada","last_name":"Kara","e_mail":"yaka@gmail","fullname":"Dada Kara","forum_username":"ycan"}] 
```

我使用以下代码进行解析，但它不解析它

```
-(IBAction)loginButton:(id)sender{

    NSString *username = usernameTextfield.text; 
    NSString *password = passwordTextfield.text;

    NSMutableURLRequest *request =[NSMutableURLRequest requestWithURL:[NSURL URLWithString:kPostUrl]];
    [request setHTTPMethod:@"POST"];

    NSString *post =[[NSString alloc] initWithFormat:@"e_mail=%@&password=%@", username, password];
    [request setHTTPBody:[post dataUsingEncoding:NSASCIIStringEncoding]];

    NSURLResponse *response;
    NSError *err;

    NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err];
    //NSString *responseStr = [NSString stringWithUTF8String:[responseData bytes]];
    //NSLog(@"Response : %@", responseStr);

    NSString *json_string = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    NSLog(@"JSON string : %@", json_string);

    SBJsonParser *parser = [[SBJsonParser alloc] init];
    NSDictionary *responseObj = [parser objectWithString:json_string error:nil];
    NSArray *name = [responseObj objectForKey:@"first_name"];

    NSLog(@"Name : %@", name);
} 
```

我`NSLog`的名字的结果是`NULL`

问题出在哪里，如何解析这样的数据，所以当涉及到很多行时，我可以将其保存到 iPhone 上的本地 FMDB 数据库中

**- - - - - - - - - - - - - - - 编辑 - - - - - - - - - - ------------------------------------------**

实际问题是来自服务器的响应 JSON 字符串包含字符串的回显开头，json 解析器仅在双引号“”之间解析，所以我只需要从字符串中修剪回显并解析新字符串。

和宾果游戏！

```
//trim in coming echo
    NSString *newString1 = [json_string stringByReplacingOccurrencesOfString:@"correct username and password\n" withString:@""];

    SBJsonParser *parser = [[SBJsonParser alloc] init];

    NSArray *responseObj = [parser objectWithString:newString1 error:nil];

    NSDictionary *dataDict = [responseObj objectAtIndex:0];

    NSString *userID = [dataDict objectForKey:@"user_id"];

    NSLog(@"user_id: %@", userID); 
```

输出：user_id：7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:56:21.570

```
 SBJsonParser *parser = [[SBJsonParser alloc] init];

 NSArray *responseObj = [parser objectWithString:json_string error:nil];

NSDictionary *dataDict = [responseObj objectAtIndex:0];

NSString *name = [dataDict objectForKey:@"first_name"]; 
```

你打印接收数据了吗？它是否显示从服务器接收数据？如果是，请尝试使用不同的编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:38:52.110

您可以使用 Mac App Store 中的 Objectify（15 美元）或 JSON Accelerator（0.99 美元）之类的工具自动为您生成数据模型，从而使模型像执行 object.firstName 一样简单。

# javascript - 寻找重叠事件/时间的算法

> ID：10578730
> 
> 赞同：6
> 
> 时间：2012-05-14T06:59:02.233
> 
> 标签：javascript, jquery, algorithm

在处理自定义日历时，我不知道如何找到与任何其他时间段重叠的时间段。

时间段从 0 到 720（上午 9 点到晚上 9 点*，每个像素代表一分钟*）。

```
var events = [
 {id : 1, start : 0, end : 40},  // an event from 9:00am to 9:40am
 {id : 2, start : 30, end : 150},  // an event from 9:30am to 11:30am
 {id : 3, start : 20, end : 180},  // an event from 9:20am to 12:00am
 {id : 4, start : 200, end : 230},  // an event from 12:20pm to 12:30pm
 {id : 5, start : 540, end : 600}, // an event from 6pm to 7pm
 {id : 6, start : 560, end : 620} // an event from 6:20pm to 7:20pm
]; 
```

每个时隙为*1 小时*，例如 9 到 10、10 到 11、11 到 12 等。

在上面的示例中，三个事件（id：1,2,3）在`9-10` *开始*时间重叠`9:00`：`9:30`和`9:20`。其他重叠的事件是 int time slot of `6`to `7`(id: 5, 6) with `6`and `6:20` *start* times。id 的事件在to`4`的时间段内没有任何重叠事件。`12``1`

我正在寻找一种方法来获取所有重叠的事件 ID 以及特定时间段中的事件数，这是预期的输出：

```
[
 {id:1, eventCount: 3},
 {id:2, eventCount: 3},
 {id:3, eventCount: 3},
 {id:5, eventCount: 2},
 {id:6, eventCount: 2}
] 
```

对于 id (1 到 3)，有`3`时间槽 to 的事件和时间`9`槽`10`to的`2`事件。`6``7`

我创建了这个公式来将时间数转换为实际时间：

```
var start_time = new Date(0, 0, 0, Math.abs(events[i].start / 60) + 9, Math.abs(events[i].start % 60)).toLocaleTimeString(),
var end_time = new Date(0, 0, 0, Math.abs(events[i].end / 60) + 9, Math.abs(events[i].end % 60)).toLocaleTimeString(); 
```

这是我到目前为止所拥有的：

```
function getOverlaps(events) {
   // sort events
   events.sort(function(a,b){return a.start - b.start;});

   for (var i = 0, l = events.length; i < l; i++) {
      // cant figure out what should be next
   }
} 
```

[如果需要，请演示。](http://jsbin.com/odagom/2)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T07:16:34.827

从我的[jquery-week-calendar 提交](https://github.com/dittodhole/jquery-week-calendar/commit/6dbf12cca6024f37f964ea825c25b831f3983c1d)中，我是这样做的：

```
 _groupOverlappingEventElements: function($weekDay) {
        var $events = $weekDay.find('.wc-cal-event:visible');
        var complexEvents = jQuery.map($events, function (element, index) {
            var $event = $(element);
            var position = $event.position();
            var height = $event.height();
            var calEvent = $event.data('calEvent');
            var complexEvent = {
                'event': $event,
                'calEvent': calEvent,
                'top': position.top,
                'bottom': position.top + height
            };
            return complexEvent;
        }).sort(function (a, b) {
            var result = a.top - b.top;
            if (result) {
                return result;
            }
            return a.bottom - b.bottom;
        });
        var groups = new Array();
        var currentGroup;
        var lastBottom = -1;
        jQuery.each(complexEvents, function (index, element) {
            var complexEvent = element;
            var $event = complexEvent.event;
            var top = complexEvent.top;
            var bottom = complexEvent.bottom;
            if (!currentGroup || lastBottom < top) {
                currentGroup = new Array();
                groups.push(currentGroup);
            }
            currentGroup.push($event);
            lastBottom = Math.max(lastBottom, bottom);
        });
        return groups;
    } 
```

周围有一些特定于组件的噪音，但你会明白逻辑：

*   按事件的起始升序对事件进行排序
*   按事件结束升序对事件进行排序
*   遍历排序的事件并检查前一个事件的开始/结束（而不是按位置完成，而不是按事件属性本身完成 - 只是因为设计可能重叠，但事件不会......例如：制作边框 2px，事件不重叠的开始/结束时间可能会重叠或“触摸”）
*   每个重叠组 ( `currentGroup`) 是`groups`-array内的一个新数组

soo ...您的代码可能看起来像这样（顺便说一句，无需使用真实的`date`实例）

```
events.sort(function (a, b) {
    var result = a.start - b.start;
    if (result) {
        return result;
    }
    return a.end - b.end;
});
var groups = new Array();
var currentGroup;
var lastEnd = -1;
jQuery.each(events, function (index, element) {
    var event = element;
    var start = event.start;
    var end = event.end;
    if (!currentGroup || lastEnd < start) {
        currentGroup = new Array();
        groups.push(currentGroup);
    }
    currentGroup.push(event);
    lastEnd = Math.max(lastEnd, end);
});
return groups; 
```

soo ...您不愿意将自己的精力投入到*您的*问题中...好吧

```
var output = new Array();
jQuery.each(groups, function (index, element) {
    var group = element;
    if (group.length <= 1) {
        return;
    }
    jQuery.each(group, function (index, element) {
        var event = element;
        var foo = {
            'id': event.id,
            'eventCount': group.length
        };
        output.push(foo);
    });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T07:17:05.840

对我来说，为每个开始和结束事件使用时间戳更容易，这样您就可以直接使用它们或将它们更改为日期对象。要获取该值，请为每个开始和结束创建一个日期对象，然后：

```
var a.start = startDate.getTime();
var a.end = endDate.getTime(); 
```

对于重叠：

```
if (a.start <= b.start && a.end > b.start ||
    a.start < b.end && a.end >= b.end) {
    // a overlaps b
} 
```

如果愿意，您可以将它们保留为日期对象，上述方法也可以。

### 编辑

好的，这是一个工作示例：

假设标称日期为 2012-05-15，则事件数组如下所示：

```
// Use iso8601 like datestring to make a local date object
function getDateObj(s) {
  var bits = s.split(/[- :]/);
  var date = new Date(bits[0], bits[1] - 1, bits[2]);
  date.setHours(bits[3], bits[4], 0);
  return date;
}

var events = [
  {id: 1, start: getDateObj('2012-05-15 09:00'), end: getDateObj('2012-05-15 09:30')}, 
  {id: 2, start: getDateObj('2012-05-15 09:30'), end: getDateObj('2012-05-15 11:30')}, 
  {id: 3, start: getDateObj('2012-05-15 09:20'), end: getDateObj('2012-05-15 12:00')}, 
  {id: 4, start: getDateObj('2012-05-15 12:20'), end: getDateObj('2012-05-15 12:30')}, 
  {id: 5, start: getDateObj('2012-05-15 18:00'), end: getDateObj('2012-05-15 19:00')}, 
  {id: 6, start: getDateObj('2012-05-15 18:20'), end: getDateObj('2012-05-15 19:20')}
];

function getOverlappingEvents(eventArray) {
  var result = [];
  var a, b;

  // Sort the event array on start time
  eventArray.sort(function(a, b) {
      return a.start - b.start;
    });

  // Get overlapping events
  for (var i=0, iLen=eventArray.length - 1; i<iLen; i++) {
    a = eventArray[i];
    b = eventArray[i + 1];

    if ((a.start <= b.start && a.end > b.start) ||
        (a.start < b.end && a.end >= b.end) ) {
       result.push([a.id, b.id]);
    }
  }
  return result;
}

// Run it    
alert(getOverlappingEvents(events).join('\n')); // 1,3 2,3 5,6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T07:48:07.783

这是可以执行您想要的操作的代码。正如其他人提到的那样，存储日期对象可能会更好地为您服务，但这是一个不同的问题。

```
function getOverlaps(events) {
    // sort events
    events.sort(function (a, b) {
        return a.start - b.start;
    });

    var results = [];
    for (var i = 0, l = events.length; i < l; i++) {
        var oEvent = events[i];
        var nOverlaps = 0;
        for (var j = 0; j < l; j++) {
            var oCompareEvent = events[j];
            if (oCompareEvent.start <= oEvent.end && oCompareEvent.end > oEvent.start || oCompareEvent.end <= oEvent.start && oCompareEvent.start > oEvent.end) {
                nOverlaps++;
            }
        }
        if (nOverlaps > 1) {
            results.push({
                id: oEvent.id,
                eventCount: nOverlaps,
                toString: function () {
                    return "[id:" + this.id + ", events:" + this.eventCount + "]"
                }
            });
        }

    }
    return results;
} 
```

# c# - 搜索时如何保存查询值？ASP.NET MVC

> ID：10578733
> 
> 赞同：0
> 
> 时间：2012-05-14T06:59:15.433
> 
> 标签：c#, asp.net-mvc-3, pagination

我有这样一个动作方法：

```
[AcceptVerbs(HttpVerbs.Get)]
public ActionResult Search(String filter, String value, Int32? page) {
    var set = new List<Employee>();
    switch(filter) {
    case "by-name": {
            set = this.repository.Get(
                e => (e.LastName + " " + e.FirstName + " " + e.MiddleName) == value
            ).ToList();
            break;
        }
        case "by-empn": {
            set = this.repository.Get(
                e => e.EmployeeNumber == value
            ).ToList();
            break;
        }
        default: return RedirectToAction("Search", "Employee"); 
    }

    ViewBag.SearchedEmployees = set.Count();
    return View(set.ToPagedList(page ?? 1, PageSize));
} 
```

搜索视图是这样的：

```
@if(Model.Count > 0) {
    foreach(var item in Model) {
        Html.RenderPartial("Employee.Card", item);
    }

    @Html.PagedListPager(
        Model,
        page => Url.Action("Search", new { page = page }),
        new PagedListRenderOptions {
            LinkToFirstPageFormat = "<< Beginning",
            LinkToPreviousPageFormat = "< Back",
            LinkToNextPageFormat = "Forth >",
            LinkToLastPageFormat = "End >>"
        }
    )
} 
```

搜索表单显示为部分视图：

```
@using(Html.BeginForm("Search", "Employee", FormMethod.Get, new { @class = "search-form" }))
{
    <p>
        @Html.TextBox("value")
    </p>
    <p>
        @Html.RadioButton("filter", "by-name", true) By name <br/>
        @Html.RadioButton("filter", "by-empn") By empn <br/>
    </p>
    <p>
        <input type="image" src="@Url.Content("~/Content/Images/Search.png")" />
    </p>
} 
```

问题：我有`N`页面链接。当我尝试转到第二页时，我面临着无限循环的重定向。这就是我实施我的行动的方式 - 默认情况下被解雇。所以`filter/value`价值观`null`在第二次行动呼吁上？为什么？如何重构我的搜索操作？

另外我应该如何为这样的动作配置路由？

谢谢！

**编辑**

因此，搜索操作的路线应该如下所示：

```
routes.MapRoute(
    null,
    "{controller}/{action}/Page{page}/filter{filter}/val{value}",
    new { controller = "Employee", action = "Search" }
); 
```

?

**编辑 2**

所以接下来可以写：

```
page => Url.Action("Search", new { filter = ViewBag.SearchFilter, value = ViewBag.SearchValue, page = page }), 
```

在控制器内部：

```
public ActionResult Search(String filter, String value, Int32? page) {

    ViewBag.SearchFilter = filter;
    ViewBag.SearchValue = value;
    // ...
} 
```

这是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:10:58.443

> 那么在第二次操作调用中过滤器/值值是空的吗？为什么？

因为它们对应的输入字段位于单独的表单中，并且永远不会发送到服务器。

您似乎正在使用一些自定义`Html.PagedListPager`帮助程序（您未显示的代码），但我猜这个帮助程序将页面链接生成为锚点，并且在生成这些时它根本不考虑任何当前查询字符串或 POST 值链接。所以`href`你的分页链接看起来像这样`/SomeController/Search?page=5`，而不是正确的一个，它会考虑那些参数是`/SomeController/Search?page=5&filter=somefilter&value=somevalue`.

您现在可以轻松理解为什么控制器操作中的`filter`和`value`参数始终为空。这是因为您在单击分页链接时从未将它们发送到服务器。

因此，为了解决此问题，您可以修改用于生成分页链接的自定义 HTML 帮助程序以包含这些附加参数。或者也许助手允许你传递额外的参数？如果这是您正在使用的第三方插件，请检查文档。

# c# - 添加数据后，在 C# 中按字母顺序对复选框列表进行排序

> ID：10578735
> 
> 赞同：1
> 
> 时间：2012-05-14T06:59:24.183
> 
> 标签：c#, asp.net, sorting, checkboxlist

控件 ( `ListItems`) 是动态创建的，因此不可能对预插入进行排序。

我尝试了一个解决方案，它可以完成这项工作（在列表中排序然后重建控件），但我想要一个更优雅的解决方案。

为了完整起见，下面是我目前的解决方案：

```
 List<ListItem> lli = new List<ListItem>();

        foreach (ListItem item in cblGIFFlags.Items) lli.Add(item);
        cblGIFFlags.Items.Clear();
        bool sorting = true;
        while (sorting)
        {
            sorting = false;
            for (int i = 0; i < lli.ToArray().Length - 1; i++)
            {
                ListItem x = lli[i];
                ListItem y = lli[i + 1];
                if (Comparer<String>.Default.Compare(x.Text,y.Text) > 0)
                {
                    lli[i] = y;
                    lli[i + 1] = x;
                    sorting = true;
                }
            }
        }
        foreach (ListItem item in lli) cblGIFFlags.Items.Add(item); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T07:32:13.777

由于[ListItemCollection](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitemcollection.aspx#Y0)实现了 IEnumerable，我想也许我可以转换为 IEnumerable<ListItem> 或其他东西。我不知道该怎么做那个演员。这是我能想到的最好的：

```
var items = new List<ListItem>();
foreach (ListItem item in listBox.Items) items.Add(item);
listBox.Items.Clear();
listBox.Items.AddRange(items.OrderBy(i=>i.Value).ToArray()); 
```

# c# - 如何在 C# 应用程序的进程中结束 ruby 脚本，或者一般如何结束进程？

> ID：10578738
> 
> 赞同：0
> 
> 时间：2012-05-14T06:59:40.443
> 
> 标签：c#, process

我有一个 ruby​​ 脚本，我正在尝试使用我的程序中的 Process 来执行它。在某些事件之后，我想停止它的执行。我尝试使用问题中提供的解决方案[发送 ctrl + c 如何将 ctrl + c 发送到 c# 中的进程？](https://stackoverflow.com/questions/283128/how-do-i-send-ctrlc-to-a-process-in-c)但是它对我不起作用。谁能提供更好的解决方案？下面是代码：

`string command = @"/c ruby C:\MyRubyProgram GetThis GetThat";`

 ````
 ProcessStartInfo start_info = new ProcessStartInfo("cmd", command);
        start_info.UseShellExecute = false;
        start_info.RedirectStandardOutput = true;
        start_info.RedirectStandardInput=true;

        Process process = new Process();
        process.StartInfo = start_info;

        process.Start();
        process.WaitForExit();

        process.StandardInput.WriteLine("\x3");
        process.StandardInput.Close();
        Console.Write(process.StandardOutput.ReadToEnd()); 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:05:34.873

为什么不`process.Kill()`呢？它应该有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T11:18:35.283

您可以使用此代码终止该进程。当它完成时。

```
process.WaitForExit(); 
````

# android - Android xml解析并将数据放入listview

> ID：10578754
> 
> 赞同：0
> 
> 时间：2012-05-14T07:01:00.027
> 
> 标签：android, listview, xml-parsing

我有两个 android 活动类。主要活动类包含 xml 解析，我试图将从那里获得的数据传递给另一个活动类，该活动类将把它放入所有数据的列表视图中。下面是 xml 解析主要活动的问题是，当我运行程序时它显示 nullpointer exception 。我被困在这里，任何人都可以帮助我错误在哪里。提前谢谢

```
enter code here

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // setContentView(R.layout.main);

    try {
        stringXmlContent = getEventsFromAnXML(this);
        Intent i=new Intent(LocationSidActivity.this,FacebookData.class);
        i.putStringArrayListExtra("language", stringXmlContent);
        startActivity(i);
        // myXmlContent.setText(stringXmlContent);
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    }

private ArrayList<String> getEventsFromAnXML(Activity activity)
        throws XmlPullParserException, IOException {
    ArrayList<String> al = new ArrayList<String>();
    Resources res = activity.getResources();
    XmlResourceParser xpp = res.getXml(R.xml.myxml);
    xpp.next();
    int eventType = xpp.getEventType();

    while (eventType != XmlPullParser.END_DOCUMENT) {
        if (eventType == XmlPullParser.START_DOCUMENT) {
            al.add(xpp.getName());
        } else if (eventType == XmlPullParser.START_TAG) {
            //if ((xpp.getName()).compareTo("id") != 0) {
                al.add(xpp.getName());
            //} else {
                //eventType = xpp.next();

        }

        else if (eventType == XmlPullParser.TEXT) {

            al.add(xpp.getText());
        }
        eventType = xpp.next();
    }
    return al;

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:38:32.417

解析器方法中的行`getEventsFromAnXML`：

```
if (eventType == XmlPullParser.START_DOCUMENT)
{
    al.add(xpp.getName());
} 
```

可能以 a 结尾`NullPointerException`，因为还没有读取任何内容，并且**`null`**将添加一个值作为您的第一个成员`ArrayList`。

**API文档**`XmlPullParser.START_DOCUMENT`中的：

 **> 表示解析器位于文档的最开头，尚未读取任何内容。这种事件类型只能通过在第一次调用 next()、nextToken 或 nextTag() 之前调用 getEvent() 来观察。

此外，如果该`getEventsFromAnXML`方法在您的`Activity`类中，您应该删除参数，并简单地使用**`this`**. 分享 . 从来都不是一个好习惯`Context`，它通常会以泄漏告终。**

# java - 从 android 发布 url 以检索数据

> ID：10578758
> 
> 赞同：0
> 
> 时间：2012-05-14T07:01:07.837
> 
> 标签：java, android, android-intent

我有一个网址“http://184.82.158.234/~store/rest/system/connect.json”并使用名为poster的mozilla插件发布此网址返回json形式的数据我想要的是将此网址从android发布到将该 json 数据放入 androids 视图中。

任何帮助都非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:07:30.110

```
public void postData() {
// Create a new HttpClient and Post Header
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://184.82.158.234/~store/rest/system/connect.json");

try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("id", "12345"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
}
} 
```

响应变量将包含您的 json 数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:12:28.310

检查下面的代码：试试这个它可能会帮助你。

```
 ArrayList nameValuePairs1 = new ArrayList();

        nameValuePairs1.add(new BasicNameValuePair("user_id", "")); 
        nameValuePairs1.add(new BasicNameValuePair("product_id", "")); 
        nameValuePairs1.add(new BasicNameValuePair("product_review",""+text));

        HttpClient httpclient = new DefaultHttpClient();

        HttpPost httppost = new HttpPost(URL);

        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs1));

        HttpResponse responce = httpclient.execute(httppost);

        HttpEntity entity = responce.getEntity();

        is = entity.getContent();

        BufferedReader bufr = new BufferedReader(new InputStreamReader(is1,"iso-8859-1"), 8);

        StringBuilder sb = new StringBuilder();

        sb.append(bufr.readLine() + "\n");

        String line = "0";

        while ((line = bufr.readLine()) != null)

        {

        sb.append(line + "\n");

        }

        is1.close();

        result = sb.toString(); 
```

结果是一个 json 字符串。解析该 json 并显示在任何控件中。我在文本视图中显示了这一点，见下文。

```
final MyProgressDialog progDailog = new MyProgressDialog(Cheking_Review.this);
        final Handler handler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                if (Name.length() > 0 && Name != null) {
                    txtvenue.setText(Name);
                } else {
                    txtvenue.setText(venue_name);
                }
            }
        };

        new Thread() {

            public void run() {
                try {

// put your result here
                    JSONObject jObject = new JSONObject(result);
                    JSONObject menuObject = jObject.getJSONObject("response");
                    JSONObject venueObject = menuObject.getJSONObject("venue");
                    Name = venueObject.getString("name");

                    String id = venueObject.getString("id");

                    Log.d("--------name---------", Name);
                    Log.d("--------id---------", id);

                } catch (Exception e) {
                }
                handler.sendEmptyMessage(0);
                progDailog.dismiss();
            }
        }.start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-20T21:21:08.020

这是一个函数，也许您可​​以使用它来将字符串发布到 URL。

```
public String doHttpPost(final String fullUrl, final String body) {

        final URL url = new URL(fullUrl);

        final HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

        // set the request mode as POST
        urlConnection.setRequestMethod("POST");

        urlConnection.setUseCaches(false);
        urlConnection.setDoOutput(true);

        urlConnection.setRequestProperty("Accept-charset", "utf-8");
        urlConnection.setRequestProperty("Content-type", "application/x-www-form-urlencoded");

        final DataOutputStream request = new DataOutputStream(urlConnection.getOutputStream());

        // write the body.
        request.writeBytes(body);

        // flush output buffer
        request.flush();
        request.close();

        // construct a read using input stream and charset.
        final InputStreamReader isr = new InputStreamReader(urlConnection.getInputStream(), CHARSET_UTF8);
        final BufferedReader in = new BufferedReader(isr);

        String inputLine;
        final StringBuilder stringBuilder = new StringBuilder();
        while ((inputLine = in.readLine()) != null) {
            stringBuilder.append(inputLine).append("\n");
        }

        in.close();
        isr.close();

        urlConnection.disconnect();

        return stringBuilder.toString(); 
} 
```

# c# - 在目录内创建子目录时访问被拒绝错误

> ID：10578762
> 
> 赞同：0
> 
> 时间：2012-05-14T07:01:21.937
> 
> 标签：c#, asp.net, asp.net-mvc, active-directory

在目录中创建子目录时遇到一个问题。显示的错误消息是**“拒绝访问路径 'tempimages'。**'

我已授予通过应用程序创建目录的驱动器中的某些用户帐户的完全访问权限。

现在在 global.asax 中，我注册了一种方法，允许上述用户帐户创建目录。在为用户帐户分配访问规则后，我可以创建父目录。但是当我尝试使用相同的访问规则在该目录中创建子目录时。我得到了上述错误。

```
 string useraccountForDirectoryCreate = System.Environment.UserDomainName;
        dacl.AddAccessRule(new System.Security.AccessControl.FileSystemAccessRule(useraccountForDirectoryCreate,
        System.Security.AccessControl.FileSystemRights.FullControl,
                System.Security.AccessControl.InheritanceFlags.ContainerInherit |
                System.Security.AccessControl.InheritanceFlags.ObjectInherit,
                System.Security.AccessControl.PropagationFlags.None,
                System.Security.AccessControl.AccessControlType.Allow));
        Directory.CreateDirectory(imageDirectory, dacl);

        Directory.CreateDirectory(tempImageDirectory, dacl);
        DirectoryInfo obj = new DirectoryInfo(imageDirectory);
        obj.CreateSubdirectory(ConfigurationManager.AppSettings["networkStoragePathTemp"].ToString(), dacl);//Access to the path 'tempimages' is denied 
```

我对上述案例进行了一些搜索，但没有成功，请帮助，谢谢 S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T05:38:11.337

**错误消息清楚地表明这是由于在根目录中创建子目录时的权限问题而发生的。**

如果您使用的是 IIS 7.5，请尝试授予组：IIS_IUSRS 访问权限，如果以上使用内置帐户。

# python - 使用 Python 通过 Internet 访问网络摄像头

> ID：10578763
> 
> 赞同：3
> 
> 时间：2012-05-14T07:01:23.383
> 
> 标签：python, webcam

我使用 Python 和 OpenCV 编写了一个程序，我在运行时对视频流执行操作。它工作正常。现在，如果我想将它发布到一个网站上，让别人可以使用他们的浏览器和网络摄像头看到它，我该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:10:34.250

不太确定你想要发生什么，但如果你要在网站中实现这种功能，我认为你应该使用 flash 应用程序而不是 python（或者如果可能的话 html 5）。尽管您在开发 Web 应用程序时使用 python，但它只会在服务器端运行，而您要使用的功能是在客户端，所以对我来说，使用 flash 代替捕获视频然后在捕获视频后更可行视频您将其上传到您的服务器，然后您的 python 代码将在服务器端完成其余的过程。

# java - 为什么是 hashCode() 和 getClass() 本机方法？

> ID：10578764
> 
> 赞同：39
> 
> 时间：2012-05-14T07:01:24.023
> 
> 标签：java, c++, c, methods, hashcode

我检查了类的源代码，`Object`发现方法声明`getClass()`是

```
public final native Class<?> getClass(); 
```

并且声明`hashCode()`是

```
public native int hashCode(); 
```

为什么在类中有这两个方法`native`方法，我怎样才能获得这些方法的源代码？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-14T09:07:28.033

[您可以在此处](http://hg.openjdk.java.net/jdk7/jdk7)找到本机方法的完整源代码

我希望这对你有用。

这些是本地方法，因为它必须与机器交互。这里与机器相关的代码是用 C 语言编写的，它不随源包一起提供，也不在[Java 运行时环境](http://en.wikipedia.org/wiki/Java_virtual_machine#Execution_environment)(JRE)`rt.jar`的`lib`位置。

One more reason for being native is possibly for the performance reasons. Due to the C level programming performance may be improved, hence they may have written the native code in the C language.

The methods are native because they concern native data. The `hashCode` method returns an integer value dependent on the internal representation of a pointer to an object on the heap. The `getClass` method must access the internal `vtbl` ([virtual function table](http://en.wikipedia.org/wiki/Virtual_method_table)) that represents the compiled program's class hierarchy. Neither of these is possible with core Java.

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-05-14T08:18:33.917

Object 类的源代码可以在[这里找到](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/src/share/native/java/lang/Object.c)

此源包含 getClass() 方法的实现（参见第 58 行）。hashCode 被定义为函数指针 JVM_IHashCode（见第 43 行）。

JVM_IHashCode 在[jvm.cpp](http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/tip/src/share/vm/prims/jvm.cpp)中定义。请参阅从第 504 行开始的代码。这反过来又调用 ObjectSynchronizer::FastHashCode ，它在[synchronizer.cpp](http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/tip/src/share/vm/runtime/synchronizer.cpp)中定义。请参阅第 576 行的 FastHashCode 实现和第 530 行的 get_next_hash。

可能，这些方法对于性能来说是原生的，并且由于实施方面的实际问题。

例如，从 javadocs 中，hashCode 通常是“通过将对象的内部地址转换为整数”来实现的。此内部地址无法通过 java sdk 获得，必须作为本机方法实现。

请阅读[是否可以找到 Java 本机方法的源代码？](https://stackoverflow.com/questions/12032292/is-it-possible-to-find-source-for-java-native-method). 另请阅读这篇博[文 Object.hashCode implementation](http://blogs.tedneward.com/CommentView,guid,eca26c5e-307c-4b7c-931b-2eaf5b176e98.aspx)。它提供了更多细节。但是错误地断言 hashCode 不是从对象的身份生成的。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T07:09:24.230

这些信息在标题（对于类）或其他地方（对于 hashCode） 这不是您可以在 Java 中实现的。这些方法的源代码在 JVM 的源代码中。例如，您可以下载 OpenJDK 的源代码。

# networking - 如何在 CoAP 一致性测试套件中对测试用例进行分组

> ID：10578765
> 
> 赞同：3
> 
> 时间：2012-05-14T07:01:28.287
> 
> 标签：networking, testing, protocols, standards-compliance, coap

我正在为基于 TTCN-3的[受限应用程序协议 (CoAP)编写一致性测试套件。](https://datatracker.ietf.org/doc/draft-ietf-core-coap/)现在我已经知道协议了。CoAP 类似于 HTTP。它们都是应用层协议。有 CoAP 客户端和 CoAP 服务器，它们使用消息进行通信。现在我开始编写测试套件。但是我在如何设计整个测试套件时遇到了麻烦，因为可能有太多的测试用例。为了确保我设计了一个完整的测试套件，在编写每个测试用例之前，有必要对测试用例进行分组。我将如何对这些测试用例进行分组？任何人都可以给我一些建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-09T18:58:25.653

事实上，有很多方法可以组织您的测试套件。

一个好的方法是先确定**需要测试的内容**，然后再考虑**如何测试**。我建议看看[ETSI 如何验证和测试通信协议](https://www.etsi.org/images/files/Brochures/Intro-achieving-technical-excellence-brochure.pdf)。

更专注于 CoAP 测试，您可能会受到在线可用测试套件的启发，例如：

*   [iottestware.coap](https://github.com/eclipse/iottestware.coap)项目_
*   [libocoap 项目](https://github.com/obgm/libcoap/tree/develop/tests)的测试

祝你好运！

# ios - 调用委托方法

> ID：10578769
> 
> 赞同：0
> 
> 时间：2012-05-14T07:01:38.300
> 
> 标签：ios, objective-c, cocoa, delegates

我仍然无法完全理解这些委托方法是如何被调用的。我有一个类`UIViewController`，`UITextFieldDelegate`它将调用其委托方法而不指定类似**`textField.delegate = self;`**

但是对于一些不同的目的，比如`UIWebViewDelegate`我们应该输入 like **`webView.delegate = self;`**，它似乎正在调用它的委托方法。完美的。

但现在我面临一个问题。我正在使用`CLLocationManagerDelegate`并且也在`CALayer`同一个班级。对于我给予的两者，`location.delegate =self;`并且`layer.delegate =self;`在某些时候两者都相互冲突，并且只有其中一个在工作，要么**`CLLocationManagerDelegate`**要么**`CALayer`**。另一件事是停止。我不明白为什么会这样？任何原因？我们怎样才能克服这一点。甚至我计划使用其他一些框架，比如**`UIWebView`**. 对于那些委托方法，我也会面临同样的问题。你能告诉我为什么它以这种方式工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:15:15.863

无需您指定即可调用其委托的类具有默认实现，这意味着它们已经知道要做什么，并且只有在您覆盖这些方法时才会改变它们的行为。

为同一个委托设置 2 个或多个类不应相互干扰（除非出于非常奇怪的原因，在两个自定义类中方法的名称相同）。

您的问题很可能是您没有实现这些方法或错误地使用了这些类。

例如，位置管理器要求您创建一个实例，对其进行配置并开始运行更新。这种类型的委托最常用的方法是“更新位置”（或类似的东西）。如果您想在每次收到新位置时都得到通知，则必须执行此操作。否则，您必须随时手动读取位置。

作为建议，每次为对象设置委托时，都必须执行 object.delegate = self; 事物。您可能注意到，在您在标头中指定它符合该协议之前，您会收到警告：例如。

只需控制单击 UITextFieldDelegate 字样。

在@required 下寻找那些你必须始终实现的方法。@optional 具有默认实现，因此除非您想更改行为，否则不需要实现它们。

# magento - 如何更改 Magento 订单状态默认流程？

> ID：10578771
> 
> 赞同：0
> 
> 时间：2012-05-14T07:01:41.233
> 
> 标签：magento

我学到了很多关于 Magento 订单状态和状态之间的关系。我知道如何通过 config.xml 文件添加新状态并将新状态分配给状态。

但是，如何更改 magento 默认状态流？

1、待处理 2、待付款 3、处理中 4、已完成

我相信这是一个基本的 magento 订单状态流程。但是，如果我想在待付款和处理之间添加一个新状态怎么办？例如，一个站点需要一个付款审核进度，一旦付款完成，订单状态将是付款审核。只有经过管理员审核后，状态才会更改为处理中。

我可以在哪里添加此步骤？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:33:32.527

下载这个 Zip 文件：[http](http://examples.oreilly.de/german_examples/magentopaiger/magento_fuer_entwickler.zip) ://examples.oreilly.de/german_examples/magentopaiger/magento_fuer_entwickler.zip在这个文件中你会发现一些其他的 zip 文件，每个都代表一个 magento 模块。在您的情况下，请查看**Webkochshop_QualityAssurance-0.1.0.zip**。

祝你好运！

# c# - 要捕获的参数？

> ID：10578773
> 
> 赞同：1
> 
> 时间：2012-05-14T07:01:48.980
> 
> 标签：c#, try-catch

是否可以将参数传递给 catch 块？这是一些示例代码：

```
try 
{           
    myTextBox.Text = "Imagine, that could fail";
}
catch (Exception e)
{
    MessageBox.Show(e.Message); 
} 
```

如果失败，我现在可以将文本框 ( **myTextBox ) 传递给我的 catch 块吗？**某事 像那样：

```
try 
{           
    myTextBox.Text = "Imagine, that could fail";
}
catch (Exception e, TextBox textBox)
{
    textBox.BorderBrush = Colors.Red;
    MessageBox.Show(e.Message); 
} 
```

我会怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T07:03:57.110

不，标准是不可能的。

您*可以*做的是定义您的自定义异常并在那里分配参数，例如：

```
public class MyCustomException : Exception
{
    public string SomeAdditionalText {get;set;}
    ....
    //any other properties
    ...
} 
```

并在引发异常的方法中引发你自己的`MyCustomException`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-14T07:05:56.283

You only `catch` a single thing, which in C# must be an `Exception`. So not directly. However! If the `Exception` were, say, a custom `SomethingSpecificException`, then you could make that information available on `e.SomeProperty`.

```
public class SomethingSpecificException : Exception {
    public Control SomeProperty {get;private set;}
    public SomethingSpecificException(string message, Control control)
          : base(message)
    {
       SomeProperty = control;
    }
    ...
} 
```

Then at some point you could:

```
throw new SomethingSpecificException("things went ill", ctrl); 
```

and

```
catch(SomethingSpecificException ex) {
    var ctrl = ex.SomeProperty;
    ....
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T07:04:14.960

不知道你想要实现什么，但是在 catch 块中你可以访问任何 UI 元素，就像在 try 块中一样。所以对我来说，在 catch 块中定义一个额外的参数是没有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T07:12:39.680

Next to the possibility to use custom exception to distinguish what's going on:

```
try
{
    myClass.DoSomethingThatCouldThrow();
    myClass.DoSomethingThatThrowsSomethingElse();
    myClass.DoAnotherThingWithAThirdExceptionType();
}
catch(FirstSpecialException ex)
{
    // Do something if first fails...
}
catch(SecondSpecialException ex)
{
    // Do something if second fails...
} 
```

You could also put every statement into its own exception block. This would make your code quite lengthly, but is maybe the only possibility if you can't change the class to throw any special exception.

```
try
{
    myClass.DoSomethingThatCouldThrow();
}
catch(InvalidOperationException ex)
{
    // Do something if it fails...
}

try
{
    myClass.DoSomethingThatCouldThrow();
}
catch(InvalidOperationException ex)
{
    // Do something if it fails...
}

try
{
    myClass.DoAnotherThingWithAThirdExceptionType();
}
catch(InvalidOperationException ex)
{
    // Do something if it fails...
} 
```

Due to the fact, that this last, looks a little bit like repetitive code, we could maybe put it into some method with the following body:

```
public void TryCatch<ExceptionT>(Action tryMethod, Action<ExceptionT> catchMethod)
    where ExceptionT : Exception
{
    // ToDo: ArgumentChecking!

    try
    {
        tryMethod();
    }
    catch(ExceptionT ex)
    {
        catchMethod(ex);
    }
} 
```

Which could you then call with:

```
TryCatch<InvalidOperationException>(
    () => myClass.DoSomething(),
    (ex) => Console.WriteLine(ex.Message)); 
```

# line - 修改SQLFORM文本输出——换行、段落（web2py框架）

> ID：10578774
> 
> 赞同：3
> 
> 时间：2012-05-14T07:01:53.843
> 
> 标签：line, web2py, spacing

**模型：**

```
Field('text1', type='text', length=1000, notnull=True) 
```

**功能：**

```
def textinput():
f=SQLFORM(db.example, fields=['text1'])
if f.accepts(request.vars, session):
return dict(form=f) 
```

我希望能够以适当的行距/格式显示“text1”字段。如果用户要在表单中按 [enter] 键以开始新行或整个新段落，我希望这反映在视图中。

例如，如果用户在 SQLFORM 中输入以下内容：

```
This is a paragraph. Blah blah blah blah blah blah blah.
Blah blah blah blah blah blah blah blah blah.
Blah blah blah blah.

This is another paragraph. Blah blah blah blah blah.
Blah blah blah blah blah. 
```

我希望它在视图中完全像那样出现，而不是把它全部塞满而没有间距。我该怎么做呢？我正在考虑使用 .replace 方法并用换行符替换所有 [enter] 击键，但我不知道该怎么做。我已经在 Google 上搜索了所有内容，但找不到我的确切问题。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T13:21:42.867

最简单的方法是将文本包装在`<pre>`标签中并使用 CSS 来控制样式。`<br />`您还可以用标签替换换行符 ('\n') 。如果您通过只读 SQLFORM、Crud 读取表单、SQLTABLE 或 SQLFORM.grid 显示文本，则可以设置字段的“represent”属性来控制显示：

**使用`<pre>`：**

```
Field('text1', type='text', length=1000, notnull=True,
    represent=lambda text, row: PRE(text)) 
```

**使用换行符替换：**

```
Field('text1', type='text', length=1000, notnull=True,
    represent=lambda text, row: XML(text.replace('\n', '<br />'),
        sanitize=True, permitted_tags=['br/'])) 
```

如果您将文本手动插入到视图中，您可以直接在视图中使用上述任一方法。例如：

```
{{=PRE(row.text1)}} 
```

`<pre>`请注意，浏览器通常在具有固定宽度字体的标签中显示文本。如果您不希望这样，则需要使用 CSS 来更改字体。

# date - 日期和日期字符串连接

> ID：10578776
> 
> 赞同：-1
> 
> 时间：2012-05-14T07:01:58.057
> 
> 标签：date

我正在尝试编写访问另一个网站的代码另一个页面对日期使用某种逻辑，例如：

```
634655520000000000 - 23/2/2012 - Feb 23, 2012
634649472000000000 - 16/2/2012 - Feb 16, 2012
634641696000000000 - 7/2/2012 - Feb 7, 2012
634631328000000000 - 26/1/2012 - Jan 26, 2012 
```

[http://www.tase.co.il/TASE/Statistics/ShortSale/ShortSaleData/ShortSalesWeekly.htm?action=1&issubmitted=1&dt=634679712000000000&dateLinksID=3](http://www.tase.co.il/TASE/Statistics/ShortSale/ShortSaleData/ShortSalesWeekly.htm?action=1&issubmitted=1&dt=634679712000000000&dateLinksID=3) 是 2012 年 3 月 22 日

有人可以找出日期和这个变量之间的联系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:04:43.887

那是从`1.1.1601`100 纳秒的步长开始的时间。

# java - SWT ProgressBar Indeterminate 状态显示非常缓慢的移动进度条

> ID：10578780
> 
> 赞同：2
> 
> 时间：2012-05-14T07:02:00.960
> 
> 标签：java, progress-bar, swt, eclipse-rap

我尝试在 SWT 中使用 Indeterminate state ProgressBar，在 Ubuntu 11 上使用 Chrome 浏览器。这里的问题是 ProgressBar 移动得太慢而且看起来不太好。当 ProgressBar 处于 Indeterminate 状态时，有什么方法可以让其移动得更快吗？

以下是代码片段：

```
ProgressBar progressBar = new ProgressBar(parent,  SWT.INDETERMINATE); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:55:30.267

目前，这是不可能的。间隔在[ProgressBar.js](http://git.eclipse.org/c/rap/org.eclipse.rap.git/tree/bundles/org.eclipse.rap.rwt/js/org/eclipse/swt/widgets/ProgressBar.js)中是硬编码的。

您可以打开一个[增强请求](http://eclipse.org/rap/bugs/)以使其成为主题选项。

# multithreading - Windows 手机地图损坏的多任务处理

> ID：10578781
> 
> 赞同：1
> 
> 时间：2012-05-14T07:02:14.427
> 
> 标签：multithreading, windows-phone-7, map

当用户打开地图时，我的应用程序开始从数据库加载大量数据以显示在地图上（加载时）。但是我看到的是，当 BG 线程加载繁重的工作时，地图控件会停止加载/显示图块。

AFAIK WP7 不支持线程优先级。

这真的很奇怪。简单`while(true)`的 BG 线程停止地图在缩放/平移时显示新的地理数据。

也许有什么想法？

复制项目：[https ://www.dropbox.com/s/21fmgepcdzf3u1n/Map_bug_Repro.zip](https://www.dropbox.com/s/21fmgepcdzf3u1n/Map_bug_Repro.zip)

如果你启动它 - 地图将不会加载。如果您编辑`MainPage.xaml.cs`和评论线程创建 - 它会正常工作。

谢谢！

# php - PHP返回下拉框的选定字段

> ID：10578784
> 
> 赞同：0
> 
> 时间：2012-05-14T07:02:40.030
> 
> 标签：php, html, forms

我的 php 表单有问题，我从 db 查询信息现在工作正常，我只希望当用户单击提交以在表单重新加载时返回所选值。我一直试图让这个工作整夜。

例子更清楚。

- - 选择 - -

- - 苹果 - -

- - 香蕉 - -

如果他们选择了香蕉并在页面重新加载时单击了 sumbit 以使字段香蕉已被选中。这里是下面的代码。经过 45 分钟的战斗“解析错误：语法错误，意外'。' 我准备把我的头发拉出来，所以我希望你们能伸出援手。

```
echo '<option value="'. $row['free'] .'" "'. $free==$row['free'] ? .'" selected=':'>$"'.$row['free'].'"</option>'; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:12:57.780

```
echo '<option value="'. $row['free'] .'" "'. $free==$row['free'] ? /*.*/ '" selected=':'>$"'.$row['free'].'"</option>'; 
```

刚刚把它注释掉，所以你可以看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:15:02.110

假设您在表单中有一个选择元素

```
<form action="" method="post">
       <select name ="fruits">
              <option value="apple">Apple</option>
              <option value="banana">Banana</option>
              <option value="orange">Oranges</option>
              <option value="mango">Mangoes</option>
       </select>
       <input type="submit" name="submit"/>
</form> 
```

如果我理解您正确，您希望在用户单击提交按钮时将所选值显示给用户以将其放在您的 php 代码顶部。

```
<?php 
//This will check if form is submitted then fetch the value from select element else assign null
$value = isset($_POST['submit']) ? $_POST['fruits'] : NULL; 
?> 
```

并将所有更改`<option>`为

```
<option value="apple" <?php echo ($value == 'apple') ? 'selected' : ''; ?>>Apple</option>
<option value="banana" <?php echo ($value == 'banana') ? 'selected' : ''; ?>>Banana</option>
<option value="orange" <?php echo ($value == 'orange') ? 'selected' : ''; ?>>Oranges</option>
<option value="mango" <?php echo ($value == 'mango') ? 'selected' : ''; ?>>Mangoes</option> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T07:12:07.940

```
echo '<option value="' . $row['free'] . '"' . ($free == $row['free'] ? ' selected="selected"' : '') . '>' . $row['free'] . '</option>'; 
```

那应该工作:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T07:14:33.110

我建议您简化您的 sintax 并首先使其可读。

```
$selected = '';
if($free==$row['free']){ $selected=' selected'; }

echo "<option value='{$row['free']}'{$selected}>{$row['free']}</option>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T07:18:21.823

不确定该字符串是如何陷入如此混乱的......如果你在呈现 HTML 时退出 PHP 模式，它会更清晰（在我看来）......如下所示：

```
?>
<option value="<?php echo $row['free']; ?>" <?php if($free == $row['free']) echo 'selected="selected"'; ?>><?php echo $row['free']; ?></option>
<?php 
```

# linq - 将列表转换为不同的类结构

> ID：10578789
> 
> 赞同：1
> 
> 时间：2012-05-14T07:02:58.647
> 
> 标签：linq, ms-access, c#-3.0, ms-access-2007

我有一个包含以下值的折线列表（我通过查询 access 2007 表获得）；

```
+----------+----------+----------+-------+
| ObjectID | VertexId | distance | angle |
+----------+----------+----------+-------+
|        1 |        0 |       10 |    45 |
|        1 |        1 |       10 |    44 |
|        1 |        2 |       20 |    60 |
|        2 |        0 |        5 |    35 |
|        2 |        1 |        6 |    35 |
|        2 |        2 |        4 |    56 |
|        2 |        3 |       12 |    45 |
|        3 |        0 |       20 |    30 |
|        3 |        1 |       10 |    12 |
+----------+----------+----------+-------+ 
```

正如 ObjectId 列所示，只有三个对象。我想将上面列表中的项目转换为以下格式的类..

```
Class Polyline
{
    int ObjectID;
    list<int> vertices;
    list<double> distances;
    list<double> angles;
} 
```

这样我就可以保存折线对象列表并遍历每个唯一的折线，如下所示..

```
foreach(Polyline polyObj in Polylines)
{
    //do something with the polyline object;

} 
```

在 C# 中执行此操作的最佳/快速方法是什么？它闻起来有 Linq 的味道 ..我是 linq 的新手，虽然非常渴望学习和使用它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:24:59.373

假设您的折线列表是`DataTable`包含所有值的：

```
List<Polyline> polylines =
    tblPolyline.AsEnumerable()
   .GroupBy(p => p.Field<int>("ObjectID"))
   .Select(grp => new Polyline()
   {
       ObjectID = grp.Key,
       Vertices = new List<int>(grp.Select(p => p.Field<int>("VertexId"))),
       Distances = new List<double>(grp.Select(p => p.Field<double>("distance"))),
       Angles = new List<double>(grp.Select(p => p.Field<double>("angle"))),
   }).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:25:42.527

考虑将顶点移动到单独的类：

```
public class PolyLine
{
    public PolyLine(int id, IEnumerable<Vertex> vertices)
    {
        Id = id;
        Vertices = new List<Vertex>(vertices);
    }

    public int Id { get; private set; }
    public List<Vertex> Vertices { get; private set; }
}

public class Vertex
{
    public Vertex(int id, int distance, int angle)
    {
        Id = id;
        Distance = distance;
        Angle = angle;
    }

    public int Id { get; private set; }
    public int Distance { get; private set; }
    public int Angle { get; private set; }
} 
```

这是创建折线的 LINQ：

```
var polylines = from r in records
                group r by r.ObjectID into g
                select new PolyLine(g.Key, g.Select(r => new Vertex(r.VertexId, r.Distance, r.Angle))); 
```

更新：LINQ to DataSet 版本

```
var polylines = from r in table.AsEnumerable()
                group r by r.Field<int>("ObjectID") into g
                select new PolyLine(g.Key, 
                             g.Select(r => new Vertex(r.Field<int>("VertexId"),
                                                      r.Field<int>("distance"), 
                                                      r.Field<int>("angle")))); 
```

# asp.net - 登录时发生 NullReferenceException

> ID：10578793
> 
> 赞同：0
> 
> 时间：2012-05-14T07:03:21.820
> 
> 标签：asp.net, windows, nullreferenceexception

我正在使用以下代码进行登录。

```
 public logininfo ViewLoginByUsernameAndPassword(logininfo linfo)
       {
        logininfo linf = null;
        SqlDataReader dr = null;
        try
        {
            con.Open();
            SqlCommand com = new SqlCommand("adminlogin", con);
            com.CommandType = CommandType.StoredProcedure;
            SqlParameter q = new SqlParameter();
            q = com.Parameters.AddWithValue("@username", linfo.username);
            q = com.Parameters.AddWithValue("@password", linfo.password);

            dr = com.ExecuteReader();
            linf = new logininfo();

            while (dr.Read())
            {

                linf.username = dr["username"].ToString();
                linf.password = dr["password"].ToString();

            }
        }
        catch (Exception ex)
        {

            return new logininfo();
        }
        finally
        {

            dr.Close();
            con.Close();
        }
        return linf;

       } 
```

当我尝试登录时，我发现了一个 NullReferenceException ..异常是

```
 See the end of this message for details on invoking 
       just-in-time (JIT) debugging instead of this dialog box.

       ************** Exception Text **************
       System.NullReferenceException: Object reference not set to an instance of an  
       object.
       at 

       chitty.App_Code.DAL.SERVICES.loginservice.ViewLoginByUsernameAndPassword
      (logininfo linfo)
       at chitty.frmlogin.btn_login_Click(Object sender, EventArgs e)
      at System.Windows.Forms.Control.OnClick(EventArgs e)
      at System.Windows.Forms.Button.OnClick(EventArgs e)
      at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
      at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32   
      clicks)
      at System.Windows.Forms.Control.WndProc(Message& m)
      at System.Windows.Forms.ButtonBase.WndProc(Message& m)
      at System.Windows.Forms.Button.WndProc(Message& m)
      at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
      at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
      at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr 
      wparam, IntPtr lparam)

      ************** Loaded Assemblies **************
      mscorlib
      Assembly Version: 4.0.0.0
     Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
      CodeBase: file:///C:/WINDOWS/Microsoft.NET/Framework/v4.0.30319/mscorlib.dll
      ----------------------------------------
     chitty
     Assembly Version: 1.0.0.0
     Win32 Version: 1.0.0.0
     CodeBase: file:///C:/Program%20Files/itek/chittysoft/chitty.exe
     ----------------------------------------
      System.Windows.Forms
      Assembly Version: 4.0.0.0
       Win32 Version: 4.0.30319.1 built by: RTMRel
      CodeBase:              

       file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms

      /v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
      ----------------------------------------
      System.Drawing
      Assembly Version: 4.0.0.0
      Win32 Version: 4.0.30319.1 built by: RTMRel
      CodeBase:  file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/           
      v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
      ----------------------------------------
      System
      Assembly Version: 4.0.0.0
      Win32 Version: 4.0.30319.1 built by: RTMRel
      CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System/   
      v4.0_4.0.0.0__b77a5c561934e089/System.dll
      ----------------------------------------
      System.Data
      Assembly Version: 4.0.0.0
      Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
      CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_32/System.Data/  
      v4.0_4.0.0.0__b77a5c561934e089/System.Data.dll
      ----------------------------------------
     System.Core
        Assembly Version: 4.0.0.0
        Win32 Version: 4.0.30319.1 built by: RTMRel
       CodeBase:             
       file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Core/  
       v4.0_4.0.0.0__b77a5c561934e089/System.Core.dll
       ----------------------------------------
       System.Configuration
       Assembly Version: 4.0.0.0
       Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
       CodeBase: 
       file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Configuration/   
       v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
       ----------------------------------------
       System.Xml
       Assembly Version: 4.0.0.0
       Win32 Version: 4.0.30319.1 built by: RTMRel
       CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Xml/  
       v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll
       ----------------------------------------
       System.Transactions
       Assembly Version: 4.0.0.0
       Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
       CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_32/System.Transactions/ 
       v4.0_4.0.0.0__b77a5c561934e089/System.Transactions.dll
       ----------------------------------------
       System.EnterpriseServices
       Assembly Version: 4.0.0.0
       Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)
       CodeBase: 
       file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_32/System.EnterpriseServices/  
       v4.0_4.0.0.0__b03f5f7f11d50a3a/System.EnterpriseServices.dll
       ----------------------------------------

       ************** JIT Debugging **************
       To enable just-in-time (JIT) debugging, the .config file for this
       application or computer (machine.config) must have the
       jitDebugging value set in the system.windows.forms section.
       The application must also be compiled with debugging
       enabled.

       For example:

       <configuration>
              <system.windows.forms jitDebugging="true" />
       </configuration>

       When JIT debugging is enabled, any unhandled exception
       will be sent to the JIT debugger registered on the computer
       rather than be handled by this dialog box. 
```

我还在app.config中设置了“jitdebugging=true”。但是仍然出现这个错误。请找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:33:30.533

我想这是因为你试图在 finally 块中关闭 dr，Finally 块将一直执行，因为它会一直被调用。

在打开或创建 dr 对象之前可能会出现错误，在这种情况下 dr 可能永远不会被分配或打开，并且您正在强行关闭它。

尝试将这些代码移动到 Catch 块中而不是 finally，或者如果您确定 con 和 dr 将可用并打开，您可以在 try 块之外编写这些语句。

```
 finally
    {
        dr.Close();
        con.Close();
    } 
```

# php - 从 php 导出到 excel 时，我的代码中是否缺少任何内容

> ID：10578799
> 
> 赞同：-1
> 
> 时间：2012-05-14T07:04:08.147
> 
> 标签：php, phpexcel

我的功能

```
 function xlstest(){
            $headers='SN'."\t".'Reservation ID'."\t".'Hotel Name'."\t".'Customer Name';
            $data='1'."\t".'234'."\t".'My hotel name'."\t".'Jonny';
            $filename='testing';
            header("Content-type: application/octet-stream");
            header("Content-Disposition: attachment; filename=".$filename.".xls");
            header("Pragma: no-cache");
            header("Expires: 0");
            echo "$headers\n$data";
        } 
```

在管理面板中调用此函数时，它将导出到 excel，但文件没有上面的标题和数据，但它显示了管理面板中存在的所有文本 ![在此处输入图像描述](../Images/4a4c64a5234871576ecbfa72b0789ee8.png)

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:09:09.367

您根本没有使用[phpexcel](/questions/tagged/phpexcel "显示标记为“phpexcel”的问题") api。请阅读[文档](http://phpexcel.codeplex.com/wikipage?title=Examples&referringTitle=Home)并尝试使用 api。

关于您正在使用的代码，请使用`\t`（前后有空格）分隔字段。另外，不要`octet-stream`使用excels头文件。

```
header('Content-type: application/ms-excel'); 
```

用法：

```
function xlstest(){
    $headers='SN'." \t ".'Reservation ID'." \t ".'Hotel Name'." \t ".'Customer Name';
    $data='1'." \t ".'234'." \t ".'My hotel name'." \t ".'Jonny';
    $filename='testing';
    header("Content-type: application/ms-excel");
    header("Content-Disposition: attachment; filename=".$filename.".xls");
    header("Pragma: no-cache");
    header("Expires: 0");
    echo "$headers\n$data";
} 
```

**更新**：

要导出 CSV 文件，您可以执行以下操作。它几乎相同，但分隔符是逗号，内容类型是`application/vnd.ms-excel`.

```
function csvtest(){
    $headers='SN'.",".'Reservation ID'.",".'Hotel Name'.",".'Customer Name';
    $data='1'.",".'234'.",".'My hotel name'.",".'Jonny';
    $filename='testing';
    header("Content-type: application/vnd.ms-excel");
    header("Content-Disposition: attachment; filename=".$filename.".csv");
    header("Pragma: no-cache");
    header("Expires: 0");
    echo "$headers\n$data";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:45:06.463

我的问题解决了。`<link rel="stylesheet" href=""/>` 实际上我已经在and下面调用了这个函数

```
<script type="text/javascript" src=".... .."></script> 
```

一旦我移到这些CSS和脚本之上..我的问题就奇怪地解决了.......

# javascript - 无需打开文件对话框即可将文件从客户端上传到服务器

> ID：10578803
> 
> 赞同：1
> 
> 时间：2012-05-14T07:04:25.227
> 
> 标签：javascript, jquery, html, asp.net-mvc, asp.net-mvc-3

我正在尝试创建一个 aspx 页面，我可以在其中直接将文件从客户端上传到服务器，而无需用户干预。我想做一些事情，比如当用户在 url 中指定文件路径时，必须将该特定文件上传到服务器。

例如：ht.tp://XXX.XXX.XXX.XXX/File_upload/File_Uploader.aspx?upload=C:/sample.csv&type=csv

用户可以在上传后更改值以及他指定的任何文件，都需要将其上传到位于 xxx.xxx.xxx.xxx 的服务器上

这只是一个试验，检查是否在服务器上创建了 csv 文件，并且它没有被创建。

我只想将客户端上的文件复制到服务器端，并且它只能通过上面指定格式的 aspx 页面。如果还有其他好的方法，请指导我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T07:05:52.033

在**没有**用户交互的情况下无法上传文件。他必须做一个明确的动作：拖放或选择一个带有对话窗口的文件。

这是因为**安全原因**，想象一下如果一个 HTML 页面可以将它想要的任何文件上传到远程服务器，而无需用户选择哪个文件：它可以上传用户文档、设置、密码或运行的 Windows 用户可以访问的任何内容浏览器。出于同样的原因，即使该`value`属性也经常被忽略，并且并非每个浏览器也都处理该`accept`属性（您可能或多或少地强制用户在他继续之前选择您想要的文件）。我记得旧版本的 Firefox 甚至不允许以编程方式单击`input`标签来上传文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:11:18.517

您应该发布文件的内容。

这就是浏览器在使用文件上传对话框时所做的事情。浏览器打开文件并通过 HTTP 发送内容。

例如，您可以使用`wget --post-file=file.txt`. 在服务器上，您可以读取 POST 数据以检索文件的内容。

# .net - 支持Func的注入 Spring .NET 中的工厂

> ID：10578811
> 
> 赞同：2
> 
> 时间：2012-05-14T07:04:45.527
> 
> 标签：.net, dependency-injection, factory, spring.net

我正在寻找对 Spring .NET 中 Func 工厂注入的通用支持 - 与[为 Castle Windsor 提供 Typed Factory Facility 的](http://stw.castleproject.org/Windsor.Typed-Factory-Facility-delegate-based-factories.ashx)功能相同，但我无法弄清楚如何在 Spring 中支持这种工厂注入。我可以使用 Spring 中的任何扩展点来支持这种功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:27:01.123

目前不支持开箱即用。但是，可以创建一个简单地在调用上`IFactoryObject`执行 a的 a。例如，请参阅使用a 的[github 上的此实现](https://github.com/hibernating-rhinos/rhino-esb/blob/master/Rhino.ServiceBus.Spring/ApplicationContextExtensions.cs#L95)（由常规 Spring.net 提交者之一）。`Func<T>``GetObject()``FuncBasedObjectCreator<T> : IFactoryObject`

在示例中，您会看到作者还创建了几个`IConfigurableApplicationContext`使用 this的扩展`FuncBasedObjectCreator`。

# tsql - T-SQL Exec 语句语法错误

> ID：10578813
> 
> 赞同：1
> 
> 时间：2012-05-14T07:05:07.833
> 
> 标签：tsql, sql-server-2005

为什么第一条语句是语法错误？

```
-- this does not work: "incorrect syntax near the keyword 'system_user'"
exec dbo.spEmployee_GetRecords @pLoginName = system_user

-- this works
declare @p nvarchar(30);
select @p=system_user
exec dbo.spEmployee_GetRecords @pLoginName = @p 
```

（SQL Server 2005 速成版）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T07:14:24.423

这是 的语法`EXECUTE`。您只能传递值或变量，不能传递函数或表达式。请参阅BOL 上的[执行](http://msdn.microsoft.com/en-us/library/ms188332%28v=sql.90%29.aspx)。

# iphone - 第二次 CCScene 替换后应用程序崩溃

> ID：10578823
> 
> 赞同：0
> 
> 时间：2012-05-14T07:06:14.197
> 
> 标签：iphone, cocos2d-iphone

我正在使用 cocos2d 创建一个游戏。这是创建游戏时调用的方法：

```
- (void)createGame
{
    GameScene *newScene = [[GameScene alloc] initWithController:self]; //subclass of CCScene

    if ([CCDirector sharedDirector].runningScene)
        [[CCDirector sharedDirector] replaceScene:newScene];

    else 
        [[CCDirector sharedDirector] pushScene:newScene];

    scene = newScene;

    //some controllers for some layers of my scene
    box2d = [[Box2DController alloc] initWithParent:self];
    menu = [[MenuController alloc] initWithParent:self];
    controls = ([[ControlsController alloc] initWithParent:self]);

    self.controllers = [[NSArray alloc] initWithObjects:box2d, menu, controls, nil];

    //some object, contains some parameters. rizeEvent tells about some event to all controllers. In this case, it sends pointer to worldState to all of them.
    worldState = [[WorldState alloc] init];
    EventArgs *eventArgs1 = [[EventArgs alloc] initWithSender:self params:worldState];
    [self riseEvent:@"WorldStateUpdate" withArgs:eventArgs1];
} 
```

我有一个按钮，它破坏了我的世界，并创造了一个新的世界：

```
- (void)onExitPressedWithArgs:(EventArgs *)e
{
    [self destroyGame];
    [self createGame];
} 
```

这是“destroyGame”方法：

```
- (void)destroyGame
{   
    [box2d release];
    [menu release];
    [controls release];
    [scene release];
    [worldState release];

    box2d = nil;
    menu = nil;
    controls = nil;
    scene = nil;
    worldState = nil;

    [self.controllers release];
    self.controllers = nil;
} 
```

所以，我正在启动我的应用程序：

1.  'createGame' 调用
2.  按下“重启”按钮
3.  'onExitPressedWithArgs' 调用
4.  'destroyGame' 和 'createGame' 被调用
5.  新世界创造，一切顺利
6.  按下“重启”按钮，调用“onExitPressedWithArgs”，调用“destroyGame”和“createGame”
7.  应用程序崩溃。

它总是在 cade 的不同部分崩溃，但总是出现“EXC_BAD_ACCESS”异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:30:05.177

`[self.controllers release];`从`destroyGame`方法中删除。正如您已经调用`self.controllers = nil;`的那样，它将为您完成所需的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T16:26:57.150

与 Rishi 的建议类似，但初始分配也存在问题。

1）替换这个：

```
self.controllers = [[NSArray alloc] initWithObjects:box2d, menu, controls, nil]; 
```

有了这个：

```
controllers = [[NSArray alloc] initWithObjects:box2d, menu, controls, nil]; 
```

2）这：

```
[self.controllers release];
self.controllers = nil; 
```

和：

```
[controllers release];
controllers = nil; 
```

# c# - 如何在asp.net中动态生成无序列表？

> ID：10578824
> 
> 赞同：9
> 
> 时间：2012-05-14T07:06:16.440
> 
> 标签：c#, asp.net, html, asp.net-4.0

我想生成一个无序列表，其中包含用于在我的数据库中显示图像的标签，我查看了项目符号列表，但它不适用于图像。我如何从数据库中的结果动态生成它，例如，如果我在数据库中有 6 个图像，那么我希望生成的列表必须看起来像这样。

```
<ul id="">

    <li><img src="Resources/img14.jpg" alt="" title=""/></li>

    <li><img src="Resources/img15.jpg" alt="" title=""/></li>

    <li><img src="Resources/img17.jpg" alt="" title=""/></li>

    <li><img src="Resources/img2.jpg" alt="" title=""/></li>

    <li><img src="Resources/img5.jpg" alt="" title=""/></li>

    <li><img src="Resources/img3.jpg" alt="" title=""/></li>

</ul> 
```

表结构

```
User Name   nvarchar(50)    
Pic Path    nvarchar(MAX) 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-14T14:07:42.110

对于您要实现的目标，最好和最简单的方法是使用`<asp:ListView>`控件。

这里有一个关于如何使用它的很好的教程，与你正在做的事情非常相似[http://weblogs.asp.net/scottgu/archive/2007/08/10/the-asp-listview-control-part -1-building-a-product-listing-page-with-clean-css-ui.aspx](http://weblogs.asp.net/scottgu/archive/2007/08/10/the-asp-listview-control-part-1-building-a-product-listing-page-with-clean-css-ui.aspx)

它基本上会涉及您创建一个`<asp:ListView>`控件，例如；

```
<asp:ListView ID="ListView1" runat="server">
    <LayoutTemplate>
        <ul>
            <asp:PlaceHolder ID="itemPlaceholder" runat="server" />    
        </ul>                
    </LayoutTemplate>
    <ItemTemplate>
        <li>
             <img src='<%#Eval("PicPath")%>' alt='<%#Eval("UserName")%>' />
        </li>
    </ItemTemplate>
    <EmptyDataTemplate>
        <p>Nothing here.</p>
    </EmptyDataTemplate>
</asp:ListView> 
```

然后将您的数据绑定到它。

```
this.ListView1.DataSource = YourDataSource;
this.ListView1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T07:17:31.400

我想你的数据源是一个 DataSet ds，它有一个 DataTable 和一个字段 picpath，那么你可以直接在 aspx 中编写迭代

```
<ul id="">
    <% foreach (DataRow dr in ds.Tables[0].Rows) { %>

        <li><img src="<% dr[\"picpath\"].ToString() %>" alt="" title=""/></li>

    <% } %>
</ul> 
```

要做到这一点，服务器端请参阅以下链接中的接受答案 请参阅以下链接中的接受答案[Rendering an unordered list using asp.net](https://stackoverflow.com/questions/2342823/rendering-an-unordered-list-using-asp-net)

# asp.net - 如何在数据库中获取资源以进行国际化

> ID：10578826
> 
> 赞同：1
> 
> 时间：2012-05-14T07:06:19.823
> 
> 标签：asp.net, sql-server-2008

我所做的本地化是使用单独的 .resx 文件中的资源。但我的要求是使用 sql 数据库进行本地化。我对从数据库中访问文化信息的资源有点困惑，我的 .resx 文件代码是

```
System.Globalization.CultureInfo ci = new System.Globalization.CultureInfo(culture);
System.Threading.Thread.CurrentThread.CurrentCulture = ci;
System.Threading.Thread.CurrentThread.CurrentUICulture = ci; 
```

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:06:08.777

我想你正在寻找这个：

[扩展 ASP.NET 2.0 资源提供者模型](http://msdn.microsoft.com/en-us/library/aa905797.aspx)

# syntax - 元语法，或用于记录语法的语法

> ID：10578829
> 
> 赞同：1
> 
> 时间：2012-05-14T07:06:33.953
> 
> 标签：syntax, documentation

在浏览并正确记录旧代码时，我想知道，记录语法有哪些标准？

*   正则表达式：没有单一的标准，读起来有点混乱。
*   python文档中使用的那个（[这里是一个例子](http://docs.python.org/py3k/reference/simple_stmts.html#augmented-assignment-statements)）：它看起来不错，但我无法在任何地方找到规范。

还有其他的吗，哪一个最好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:08:53.167

[BNF](http://en.wikipedia.org/wiki/Backus%E2%80%93Naur_Form)是一种选择。[语法图](http://en.wikipedia.org/wiki/Syntax_diagram)是另一个。

# java - iFrame 没有源属性但嵌入了 html 标签

> ID：10578836
> 
> 赞同：2
> 
> 时间：2012-05-14T07:06:48.883
> 
> 标签：java, html, jsp, iframe

我对 iframe 不太熟悉，基本上只是想知道是否可以在 iframe 标签上排除“src”属性，而是在其中嵌入一个 html 标签？例如：

```
<iframe id='myFrame'>
    <html>
        <head>...</head>
        <body>
            <h3>Hello World!</h3>
        </body>
    </html>
</iframe> 
```

也只是一个小问题，说这确实是可能的。并且您将此代码嵌入到 JSP 中，JSP 中的 java 变量是否也对 iframe 的 html 标记中的 html 文档可见？

多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:01:30.267

我不知道你为什么要做这样的事情，因为使用 div 更有意义，将你想要的东西放在 div 中，并在需要时使用 javascript 显示 div。通常，在没有 source 属性的 iframe 中只放置文本而不是 html 标记的原因是为了支持不支持 iframe 的浏览器。

iframe 的目的是在 iframe 中显示不同的网页，看起来您基本上尝试做的是在 iframe 中创建另一个网页而不使用 src 属性，这很奇怪，因为您使用的是 jsp创建页面并使用

```
<jsp:include> 
```

包含页面而不是使用 iframe。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:40:08.947

也许你可以使用 DIV 而不是你想要的 iframe 和 innerhtml ......它会是一样的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-17T18:08:16.560

我知道这是一个非常古老的问题，但我只是遇到了它，自 2010 年以来有了新的发展。

现在可以使用 HTML5`srcdoc`属性。来自[MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#Attributes)：

> 嵌入上下文要包含的页面内容。该属性通常与沙盒属性一起使用。如果浏览器支持 srcdoc 属性，它将覆盖 src 属性中指定的内容（如果存在）。如果浏览器不支持 srcdoc 属性，它将显示 src 属性中指定的文件（如果存在）。请注意，如果属性的内容包含脚本标签，那么脚本运行需要一个结束脚本标签，即使脚本之后没有其他内容。

但是请注意，**`srcdoc`任何版本的 Internet Explorer 都不支持**此功能。不过，Edge 已经涵盖了您。

如果你对 polyfill 感兴趣，有一个可用的，但我还没有（还没有！）为自己测试过：

[https://github.com/jugglinmike/srcdoc-polyfill](https://github.com/jugglinmike/srcdoc-polyfill)

# c# - 比字典更快的替代方案 ?

> ID：10578844
> 
> 赞同：15
> 
> 时间：2012-05-14T07:07:46.460
> 
> 标签：c#, performance, dictionary, inversion-of-control

我正在创建一个用于性能测试的库。在其中我生成了`Dictionary<Type, X>`一次。这些项目当前以随机顺序插入。字典在应用程序生命周期内保持不变。

然后它经常用于查找项目。查找是库中较大的瓶颈之一。

是的，我在微优化，但要学习。我想知道是否有更好的方法来获得查找性能？

**更新**

我使用 dotTrace 来衡量性能。报告 + dotTrace 在我的家用电脑中，所以我这里没有报告（本来可以在其他地方上传）。

我使用了这里找到的测试： [https ://github.com/danielpalme/IocPerformance](https://github.com/danielpalme/IocPerformance)

字典定义在这里找到：[https ://github.com/jgauffin/Griffin.Container/blob/master/Source/Griffin.Container/ContainerBase.cs](https://github.com/jgauffin/Griffin.Container/blob/master/Source/Griffin.Container/ContainerBase.cs)

*（我上周五创建了容器，不要期望太多）*

**更新2**

![性能细分](../Images/bdb86ad9e25687adb6388283ebfc8ff7.png)

`Dictionary.TryGetValue``Resolve`如果我正确解释了数字，则总共需要 101 毫秒（总共 251 毫秒），即 40.2%。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:30:07.263

如果类型是编译时定义的，您可以尝试像这样实现它：

```
static class ValueFor<T>
{
  // you get another field per type T
  public static X X { get; private set; }

  internal static SetUpValue(X value) { X = value; }
} 
```

只需使用此访问。

```
var myIntX = ValueFor<int>.X; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T12:25:21.673

Daniel Palme 的 IoC 容器性能基准（以及其他人的）有点误导，因为该基准从容器中解析了非常浅的对象图（尽管它确实清楚地表明容器之间的性能差异很大）。这是不现实的，因为大多数应用程序（正确使用 DI）将具有包含对象数量的对象图。执行此操作时，只需要解析根对象，并且当容器编写正确时，这意味着`Dictionary<T,V>.TryGetValue`在大多数情况下（或最多只有几个），您对每个（Web）请求只有一次调用。因此，性能`Dictionary<T, V>`并不是真正的问题。

我相信`Dictionary<T,V>`where`TKey`的最大`System.Type`性能成本与生成给定哈希码的性能成本有关`Type`。每次调用`TryGetValue`，`Type.GetHashCode()`都必须调用。GetHashCode 是虚拟的（不能内联），并且该方法调用 3 个其他虚拟方法。最后，对`RuntimeHelpers.GetHashCode(key)`.

换句话说，您将能够优化性能以编写`Type`用作键的特定（非通用）字典类，而不是调用`Type.GetHashCode()`您应该调用`RuntimeHelpers.GetHashCode(key)`.

**更新（2013-04-05）：**

几个月前，我试图提高我维护的 DI 容器的性能，并尝试优化字典部分。我编写了自己的字典，直接调用`RuntimeHelpers.GetHashCode(key)`（并跳过了虚拟调用），但最终性能提升非常小（在 Palme 的基准测试中约为 1%），我决定恢复这些代码更改。所以我目前的理解是，真正的性能成本`Dictionary<Type, X>`实际上是内部发生的一切`RuntimeHelpers.GetHashCode(key)`。

# python - Openerp 中的序列格式

> ID：10578845
> 
> 赞同：2
> 
> 时间：2012-05-14T07:07:52.560
> 
> 标签：python, xml, openerp

在 openerp 序列中，我们可以插入带有世纪作为后缀或前缀的当前年份，如下所示：

```
 /%(year)s 
```

我需要将财政年度作为序列中的后缀。有没有可能的方法？

例如：PO/0001/2012-2013

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:33:59.870

创建序列时，可以添加此函数以使用序列返回值。

您可以尝试使用此功能来查找会计年度：

```
 def finyear(self):
    today=date.today()
    months=today.month
    if months<=3:
        return '%d-%d'%(today.year-1,today.year)
    return '%d-%d'%(today.year,today.year+1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:24:13.913

如果您需要生成当前年份，您可以使用 datetime 模块执行此操作，如下所示

```
import datetime
print datetime.datetime.strftime(datetime.datetime.now(), '%Y') 
```

这会给你'2012'。[您可以在datetime 文档](http://docs.python.org/library/datetime.html)中阅读有关该模块的更多信息

编辑：那么沿着这些路线还有更多的东西吗？

```
import datetime

def get_fiscal_year(start_month=3):
    now = datetime.datetime.now()
    if now.month >= start_month:
        return '%d-%d' % (now.year, now.year + 1)
    return '%d-%d' % (now.year - 1, now.year) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T17:33:51.607

我看不到仅使用序列的后缀或前缀字段的任何方法。但是，您可能可以通过编写扩展`ir_sequence`类的模块来做到这一点。当前类[提供了一个字典](http://bazaar.launchpad.net/~openerp/openobject-server/trunk/view/4168/openerp/addons/base/ir/ir_sequence.py#L173)，其中包含您可以在序列前缀或后缀中使用的值。

```
def _interpolation_dict(self):
    t = time.localtime() # Actually, the server is always in UTC.
    return {
        'year': time.strftime('%Y', t),
        'month': time.strftime('%m', t),
        'day': time.strftime('%d', t),
        'y': time.strftime('%y', t),
        'doy': time.strftime('%j', t),
        'woy': time.strftime('%W', t),
        'weekday': time.strftime('%w', t),
        'h24': time.strftime('%H', t),
        'h12': time.strftime('%I', t),
        'min': time.strftime('%M', t),
        'sec': time.strftime('%S', t),
    } 
```

如果您要使用查找[当前会计年度](http://bazaar.launchpad.net/~openerp/openobject-addons/trunk/view/6825/account/account.py#L946)并添加另一个条目的版本来覆盖它，它可能会执行您想要的操作。

在某些需要生成一堆序列号的地方测量性能可能是明智的，因为数据库查找比检查系统时间要慢得多。您可能希望将会计年度缓存一段时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-30T14:04:43.393

可以像下面那样为每个会计年度添加前缀并重置每个会计年度的序列码。引入一个新的序列属性**%(fiscal_year)s**。这是如何做到的。继承 ir_sequence 并覆盖方法 _interpolation_dict 和 _next

添加了一个新的财政年度名称列。此列为每个 _next 调用设置一个值会计年度名称，并在会计年度名称更改时重置。

序列xml

```
<record id="seq_cust_invoice_no" model="ir.sequence">
    <field name="name">Customer Invoice No.</field>
    <field name="code">cust_invoice_no</field>
    <field name="prefix">%(fiscal_year)s/</field>
            <field name="padding">4</field>
            <field name="number_increment">1</field>
        </record> 
```

下面的代码：

类 ir_sequence(osv.osv): _inherit = 'ir.sequence'

```
_columns = {
    'fiscal_year_name': fields.char('Created Fiscal year', size=64, help="Created Fiscal year"),
}

def _interpolation_dict(self, cr, uid, fy):
    res = super(ir_sequence, self)._interpolation_dict()        
    res['fiscal_year'] = fy.name
    return res

def _next(self, cr, uid, seq_ids, context=None):
    if not seq_ids:
        return False
    if context is None:
        context = {}
    company_id = self.pool.get('res.users').browse(cr, uid, uid).company_id.id
    fiscal_year_id = self.pool.get('account.fiscalyear').search(cr, uid, [('state','=','draft'), ('company_id', '=', company_id)])
    fy = self.pool.get('account.fiscalyear').browse(cr, uid, fiscal_year_id)[0]

    # Honoring the changes for ir_sequence.py override in accounts
    sequence_ids = seq_ids
    for seq in self.browse(cr, uid, seq_ids, context):
        for line in seq.fiscal_ids:
            if line.fiscalyear_id.id == context.get('fiscalyear_id'):
                sequence_ids = [line.sequence_id.id]
                break

    force_company = context.get('force_company')
    if not force_company:
        force_company = self.pool.get('res.users').browse(cr, uid, uid).company_id.id

    sequences = self.read(cr, uid, sequence_ids, ['name','company_id','implementation','number_next','prefix','suffix','padding', 'fiscal_year_name'])
    preferred_sequences = [s for s in sequences if s['company_id'] and s['company_id'][0] == force_company ]
    seq = preferred_sequences[0] if preferred_sequences else sequences[0]
    if seq['implementation'] == 'standard':
        if seq['prefix'] == '%(fiscal_year)s/':
            if not seq['fiscal_year_name'] or fy.name != seq['fiscal_year_name']:
                cr.execute("SELECT setval('ir_sequence_%03d', 1, true)" % seq['id'])
                seq['number_next'] = cr.fetchone()
            else:
                cr.execute("SELECT nextval('ir_sequence_%03d')" % seq['id'])
                seq['number_next'] = cr.fetchone()
        else:
            cr.execute("SELECT nextval('ir_sequence_%03d')" % seq['id'])
            seq['number_next'] = cr.fetchone()
    else:
        cr.execute("SELECT number_next FROM ir_sequence WHERE id=%s FOR UPDATE NOWAIT", (seq['id'],))
        cr.execute("UPDATE ir_sequence SET number_next=number_next+number_increment WHERE id=%s ", (seq['id'],))
    d = self._interpolation_dict(cr, uid, fy)
    try:
        interpolated_prefix = self._interpolate(seq['prefix'], d)
        interpolated_suffix = self._interpolate(seq['suffix'], d)
    except ValueError:
        raise osv.except_osv(_('Warning'), _('Invalid prefix or suffix for sequence \'%s\'') % (seq.get('name')))

    self.write(cr, uid, sequence_ids, {'fiscal_year_name': fy.name}, context=context)

    return interpolated_prefix + '%%0%sd' % seq['padding'] % seq['number_next'] + interpolated_suffix 
```

ir_sequence()

# solr - 将字段映射到 Solr 中的大于字段

> ID：10578848
> 
> 赞同：0
> 
> 时间：2012-05-14T07:08:02.140
> 
> 标签：solr, post-processing

我即将在我的项目中添加一个功能，允许用户放置 Solr 查询，例如...

```
immigration law citations:50 
```

...这将产生包含“移民”和“法律”且引用计数大于 50 的法律文件。

在内部，我可以解析出类似的字符串`citations:50`并将它们转换为`citations:[50 TO *]`，但如果可能的话，最好避免对查询解析器进行后处理。

似乎模式中应该有一种方式说，“当人们在这个领域搜索时，总是寻找价值并找到更大的东西。”

任何类似的东西或如何优雅地做到这一点的想法？我*讨厌*我的应用程序中的查询后处理。讨厌的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:33:05.617

# list - 从列表中删除一个项目

> ID：10578849
> 
> 赞同：2
> 
> 时间：2012-05-14T07:08:11.207
> 
> 标签：list, sencha-touch-2

我正在创建一个列表，我正在通过 json 数据从列表中添加项目。我面临的问题是我有一个删除按钮，单击该按钮时，必须从商店中删除列表中的选定项目。

这是我尝试过的

```
{
    text: '',
    id: 'deletenotesBtn',
    iconCls:'trash',
    iconMask: true,
    ui:'action',
    handler: function(){
    var itemSelected = Ext.getCmp('noteslist').getSelection().remove();
    //  this.remove(this, true);
    alert('item deleted');
} 
```

关于我如何实现它的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T07:58:39.367

答案在你的问题中。您必须从商店中删除该项目，而不是从列表中。

```
...
handler: function(){
    var selection = Ext.getCmp('noteslist').getSelection();
    Ext.StoreManager.get('MyStore').remove(selection[0]);
}
... 
```

也就是说，假设您用于列表的商店称为“MyStore”。

列表中的“getSelection()”方法的输出是一个（可能是多个）选定项目的数组。如果没有选择，它将返回一个空数组。如果选择了一个或多个项目，它将返回您商店中相应记录的数组。

在所有情况下，您按钮上的此处理程序函数将从您的商店中删除选定的项目，并且您的列表将相应地刷新。

此外，根据您商店的配置，您可能希望在执行此操作后同步它：

```
Ext.StoreManager.get('MyStore').sync(); 
```

希望这可以帮助。

# jquery - jQuery Drop 恢复到原始位置

> ID：10578850
> 
> 赞同：0
> 
> 时间：2012-05-14T07:08:22.680
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我写了一个拖放删除的代码。用户可以将项目拖到垃圾箱然后出现确认消息，如果确认删除它，并且如果用户不确认删除该项目需要回到原来的位置，请帮帮我

```
//drag code
 var a = 3;
        $('#dragZone .box,#dragZone .box1,#dragZone .box2').draggable({containment:".invitemain"}, {
            start:function (event, ui) {
                $(this).css("z-index", a++);
            },
            stop:function () {
                var id = $(this).attr("mid");
                var x = $(this).position().left;
                var y = $(this).position().top;
                var z = $(this).css("z-index");

//send request to server to save the position
                $.get('/users/savecodes?mid=' + id + '&x=' + x + '&y=' + y + '&z=' + z, function (data) {
                    //alert(data);    
                }); 

            }    
        });

//drop code
 $("#trash").droppable({
            tolerance: 'touch',
            drop: function(ev, ui) {
                var answer = confirm('Permanently delete this item?');                 
                if(answer){
                    //call some ajax for delete
                $(ui.draggable).remove();
                }
                else{
                    //move to original position
                }

            }
        }); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-14T07:55:06.250

```
function stopDrag{
$("#trash").draggable({ cancel: "button" }); 
} 
```

并调用你的函数

```
$(ui.draggable).remove();
            }
            else{
               stopDrag();
            } 
```

我认为这可能有用我自己没有尝试过，但我检查了这个链接：http: [//jqueryui.com/demos/draggable/#option-cancel](http://jqueryui.com/demos/draggable/#option-cancel)所以试一试

并检查此链接，这正是您要查找的内容：[http ://www.ericbieller.com/2010/06/24/how-to-create-a-simple-drag-and-drop-with-jquery/](http://www.ericbieller.com/2010/06/24/how-to-create-a-simple-drag-and-drop-with-jquery/)

# php - 在codeigniter中形成日期的输入字段

> ID：10578853
> 
> 赞同：2
> 
> 时间：2012-05-14T07:08:43.450
> 
> 标签：php, javascript, codeigniter, date

是否有 codeigniter 提供任何 js 类来从用户的表单字段中获取日期值？我在 codeigniter 的用户指南中搜索，但找不到这样的类。

目前我正在使用另一个 js 类来获取日期值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T04:51:38.923

您可以扩展 Form_validation 并运行回调

```
// Is this a valid date?
function valid_date($str) 
{
    $CI =& get_instance();
    $CI->form_validation->set_message('valid_date', 'Sorry - the %s field must be a date with format dd-mm-yyyy');

    if (preg_match("/^(0[1-9]|[12][0-9]|3[01])-(0[1-9]|1[012])-(19|20)[0-9]{2}$/", $str))
    {
        $arr = explode("-", $str);
        $yyyy = $arr[2];
        $mm = $arr[1];
        $dd = $arr[0];
        if (is_numeric($yyyy) && is_numeric($mm) && is_numeric($dd))
        {
            return checkdate($mm, $dd, $yyyy);
        }
        else
        {
            return false;
        }
    } 
    else
    {
        return false;
    }
} 
```

所以这样你就可以在字段上运行验证，不管用户是否打开了 JS

# mysql - 给出一个月总订单价值的 SQL 查询？

> ID：10578854
> 
> 赞同：-1
> 
> 时间：2012-05-14T07:08:44.313
> 
> 标签：mysql, sql, charts

我想做一个 SQL 查询，给出一个月的总订单价值（我的选择）。例如，我想知道 2010 年 1 月产生了多少钱。

```
 Table = ordrar

    ordernumber date
    1           2010-01-02
    2           2010-01-03
    3           2010-01-03
    4           2010-01-04
    5           2010-01-05
    6           2010-02-17
    7           2010-02-18

    Table = orderrader

    rownummer   ordernumber price   amount
    1           1           8624    3
    2           1           4794    2
    3           1           8755    3
    4           2           7803    1
    5           2           8987    3
    6           3           4575    3
    7           3           8747    1
    8           4           5439    3
    9           4           8624    1
    10          5           9574    2
    11          6           4794    1
    12          7           9102    2 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:14:06.977

也许是这样的：

```
SELECT
    SUM(price*amount) AS Total
FROM
    orderrader
    JOIN ordrar
        ON orderrader.ordernumber =ordrar.ordernumber
WHERE
    YEAR(date)=2010
    AND MONTH(date)=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:27:18.643

```
select sum(price*amount) as money from ordrar A join orderrader B on A.ordernumber = B.ordernumber where A.date between '01-01-2010' and '31-01-2010' 
```

# c# - 在基于 Windows Phone 7 Silverlight 框架的应用程序中退出？

> ID：10578855
> 
> 赞同：0
> 
> 时间：2012-05-14T07:08:45.877
> 
> 标签：c#, silverlight, windows-phone-7

我想退出基于 Windows Phone 7 Silverlight 的应用程序。

我读到我们可以通过使用 NavigationService.GoBack()

但我不想在调用“NavigationService.GoBack()”后执行下一行代码

Windows Phone 7 Silverlight 应用程序中是否有退出方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:31:06.933

这并不完全正确。您可以使用 NavigationService.GoBack() 返回应用程序的上一页，但无法使用它退出应用程序。

有可能通过触发致命异常来退出应用程序，但不建议这样做。真正通过代码退出的应用程序并不多，但游戏确实可以退出。请查看您想要退出应用程序的原因，因为大多数情况下它不适合 Metro 风格的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T02:20:41.363

只需使用

```
while(NavigationService.BackStack.Count() > 0)
        {
            NavigationService.RemoveBackEntry();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T07:46:30.983

然后退出你的函数：

```
 NavigationService.GoBack();
 return; 
```

请注意， NavigationService.GoBack() 将抛出异常（当后台堆栈为空时，您不应该调用它），因此无论如何都不会执行下一行代码。不确定它是否会通过市场认证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-10T06:06:55.363

据我所知，在 windows phone 8 中有一个 API

```
Application.Current.Terminate(); 
```

但我不知道WP7有没有

试试看并告诉我们

# android - 在android中单击按钮上将文本框的数据发送到电子邮件ID

> ID：10578859
> 
> 赞同：0
> 
> 时间：2012-05-14T07:08:55.797
> 
> 标签：android, email

我有一个 android 表单，其中一个字段是电子邮件 ID。我想获取该电子邮件 ID，并通过单击同一活动上的按钮发送有关该电子邮件 ID 的一些数据。我们可以通过哪些可能的方式发送数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:12:15.257

很容易发送一封电子邮件，其中的数据取自`EditText`

```
String mail = "this is the Email message body";
i = new Intent(Intent.ACTION_SEND); // start the activity for sending an email
i.setType("vnd.android.cursor.dir/email"); //set the mime type for the Email
i.putExtra(android.content.Intent.EXTRA_SUBJECT, "FW: " + "subject");
String[] to = {editText.getText().toString()};
i.putExtra(android.content.Intent.EXTRA_EMAIL, to);

i.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml(mail));
startActivity(Intent.createChooser(i, "EMAIL")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:12:59.930

有2种方法

1- 使用本机电子邮件应用 Intent intent = new Intent(Intent.ACTION_SEND); 它将打开屏幕，其中预先填写了表格中的数据。您必须按意图发送数据。

2- 不使用本机应用程序发送

[在不使用默认/内置应用程序的情况下使用 JavaMail API 在 Android 中发送电子邮件](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a/2033124#2033124)

# c# - 选择特定单选按钮时在 Gridview 中显示记录

> ID：10578861
> 
> 赞同：0
> 
> 时间：2012-05-14T07:09:06.607
> 
> 标签：c#, mysql

我正在使用 C# 中的 ASP.NET 框架和 MySQL 数据库服务器开发一个 Web 门户。我的问题是，在一页中有 4 个单选按钮（SAP 信息、数据库信息、操作系统信息和许可证信息）和一个网格视图。

我想知道选择任何一个广播按钮时如何在单个网格视图中显示记录。例如，如果我选择 SAP 信息按钮，则有关 SAP 的信息应显示在数据库的网格视图中。同样，如果我选择 OS 信息按钮，则有关 OS 的信息应显示在网格视图中，其他 2 个按钮相同。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:19:39.490

当您单击任何单选按钮时，转到您的数据库并获取特定数据（根据您选中的单选按钮），然后从新数据源再次绑定您的网格。使用存储过程并传递带有数据类型 tinyint 或 int 的 @InfoType 参数是一种很好的方法。

**编辑：** 像这样添加行命令事件

`<asp:GridView ID="GridView1" runat="server" DataSourceID="SqlDataSource1" OnRowCommand="GridView1_RowCommand">`

并在您的 c# 代码中创建一个这样的事件

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        int index = Convert.ToInt32(e.CommandArgument);

       textbox1.Text = GridView1.Rows[index]["UserID"].value.ToString();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:31:38.857

您可以使用单选按钮列表的 onselectedindexchanged 事件，然后在选择更改时绑定数据。将所有设计或网格视图放在更新面板中，以便整个页面不会回发。使用 asyncPostbacktrigger。您可以缓存数据而不是每次都绑定。如果不在缓存中或缓存过期，则从数据源中获取数据。

# c - 如何在c中过滤数组？

> ID：10578863
> 
> 赞同：0
> 
> 时间：2012-05-14T07:09:14.620
> 
> 标签：c, string, filter

我正在使用 Zigbee 在 Keil C51 中编写。

```
Serial_txString0("AT+UCAST:000D6F0000BB769D=StartGreen");        
tx_port0(0x0D); 
```

例如，我将收到“AT+UCAST:000D6f0000BB769D=StartGreen”，我想过滤它以仅获得“StartGreen”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T07:12:03.353

怎么样：

```
char *eq = strrchr(str, '=');
if (eq)
    printf("%s\n", eq + 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:14:07.547

从一个示例中，我无法根据您要过滤的内容来判断。这样的事情就足够了吗（在 之后提取字符串的一部分`=`）？

```
char* filter(char* input) {
   int i = 0;
   while (input[i] && input[i] != '=') i++;

   return &input[i + 1];
} 
```

请注意，这不会复制字符串，仅引用它的右侧部分。如果您想实际提取过滤后的部分...

```
void filter(char* input, char* output) {
   int i = 0;
   while (input[i] && input[i] != '=') i++;

   strcpy(output, &input[i + 1]);
} 
```

...使用`strcpy`在`<string.h>`.

# java - android audioRecord-应用增益变化

> ID：10578865
> 
> 赞同：4
> 
> 时间：2012-05-14T07:09:25.940
> 
> 标签：java, android, audio, fft, audio-recording

我想对我的录音应用增益（PCM 16bit）。为此，我有以下代码：

```
for (int i=0; i<buffer.length/2; i++)
{ // 16bit sample size                      
  short curSample = getShort(buffer[i*2], buffer[i*2+1]);
  if(rGain != 1){
  //apply gain
  curSample *= rGain;
  //convert back from short sample that was "gained" to byte data
  byte[] a = getByteFromShort(curSample);
  buffer[i*2] = a[0];
  buffer[i*2 + 1] = a[1];
} 
```

如果像这样应用（将每个样本与分数相乘），我会在播放时中断（像旧对讲机一样听到）。是否有一些公式可以改变每个样本的增益因子？我假设样本范围有一些 maxValue 和 minValue （我猜是 [-32768, +32767]），并且在某些公式中使用这些值可以得到一个可变的增益因子以应用于当前样本。

//编辑：添加

```
if (curSample>32767) {curSample=32767;}
if (curSample<-32768) {curSample=-32768;} 
```

完整方法

```
aRecorder.read(buffer, 0, buffer.length);
for (int i=0; i<buffer.length/2; i++)
                    { // 16bit sample size                      
                        short curSample = getShort(buffer[i*2], buffer[i*2+1]);
                        if(rGain != 1){
                            //apply gain
                            curSample *= rGain;
                            if (curSample>32767) {curSample=32767;}
                            if (curSample<-32768) {curSample=-32768;}
                            //convert back from short sample that was "gained" to byte data
                            byte[] a = getByteFromShort(curSample);
                            buffer[i*2] = a[0];
                            buffer[i*2 + 1] = a[1];
                        } 
```

但仍然听到奇怪的声音（噪音 + 像旧对讲机一样中断）。

任何帮助，将不胜感激，

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-09T12:09:03.823

这是最终结果...该算法与 VU 计量测量相交...忽略那部分...

```
final int numFrames = getNumOfFrames(source.length);
62                          final int bytesPerSample = bitsPerSamples / 8;
63                          final int emptySpace=64-bitsPerSamples;
64                          int byteIndex=0;
65                          int byteIndex2 = 0;
66                  
67                  
68                          int temp = 0;
69                          int mLeftTemp = 0;
70                          int mRightTemp = 0;
71                          int a=0;
72                          int x = 0;
73                          
74                          for(int frameIndex=0; frameIndex<numFrames; frameIndex++){
75                                  for(int c=0; c<nChannels; c++){
76                                          if(rGain != 1){
77                                                  // gain
78                                                  long accumulator=0;
79                                                  for(int b=0; b<bytesPerSample; b++){
80                                                          accumulator+=((long)(source[byteIndex++]&0xFF))<<(b*8+emptySpace);
81                                                  }
82                                                  double sample = ((double)accumulator/(double)Long.MAX_VALUE);
83                                                  sample *= rGain;                                
84                                          
85                                                  int intValue = (int)((double)sample*(double)Integer.MAX_VALUE);                         
86                                                  for(int i=0; i<bytesPerSample; i++){
87                                                          source[i+byteIndex2]=(byte)(intValue >>> ((i+2)*8) & 0xff);
88                                                  }
89                                                  byteIndex2 += bytesPerSample;   
90                                          }
91                                          
92                                          //average
93                                          if(bytesPerSample == 2){
94                                                  x = frameIndex*nChannels*bytesPerSample+(c*bytesPerSample);
95                                                  a = Math.abs((short)(((data[x+1] & 0xFF) << 8) | (data[x] & 0xFF)));
96                                          }else{
97                                                  a = Math.abs(data[frameIndex*nChannels +c]);
98                                          }
99                                          
100                                         temp += a;
101                                         mLeftTemp += (c==0)? a : 0;
102                                         mRightTemp += (c==1)? a : 0;
103                                         }//end for(channel)
104                         }//end for(frameIndex)
105                         
106                         mAverage = temp / (data.length / bytesPerSample);
107 //                      System.out.println("result 1 is: "+mAverage);
108 //                      System.out.println("result 2 is: "+calculateAverageValue());
109                         
110                         mLeftChannelAverage = mLeftTemp / (data.length/bytesPerSample/nChannels);
111                         mRightChannelAverage = mRightTemp / (data.length/bytesPerSample/nChannels);
112                         Amplitude ampl = new Amplitude(mAverage, mLeftChannelAverage, mRightChannelAverage);
113                         AmplitudePollAPI.getInstance().onAmplitudeReached(ampl); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:57:04.233

更改增益时，您需要在通常大约 10 毫秒的时间内平稳地执行此操作，否则您会听到不连续的声音（即咔嗒声）。最简单的过渡是线性的，例如从旧增益到新增益的线性斜坡超过 10 毫秒，但对于高质量音频，您应该使用升余弦过渡之类的东西：

```
gain(t) = gain_old + (gain_new - gain_old) * 0.5 * (1 - cos(π * (t - t0) / (t1 - t0))) 
```

其中 t0, t1 是过渡的开始时间和结束时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-10T09:16:37.147

您的源代码中还有另一个错误。以下行从 -32768..32767 创建样本值，这是 s 短变量的全部范围：

```
short curSample = getShort(buffer[i*2], buffer[i*2+1]); 
```

当您现在应用大于 1 的增益因子时，您会“溢出”`short`格式：

```
curSample *= rGain; 
```

这会在平滑信号中产生令人讨厌的裂缝，例如 32767 * 1.5 不是预期的 49150，但由于“溢出”被解释为 -16386，因为您`short`再次将结果分配给变量。

因此这两行

```
if (curSample>32767) {curSample=32767;}
if (curSample<-32768) {curSample=-32768;} 
```

不会改变任何东西，因为 curSample 永远不会大于 32767 或小于 -32768。

为避免这种情况，您必须使用临时`int`变量：

```
short curSample = getShort(buffer[i*2], buffer[i*2+1]);
int temp = curSample * rGain;
if (temp>=32767)
    curSample=32767;
else if (temp<=-32768)
    curSample=-32768;
else
    curSample=(short)temp; 
```

# ajax - jqgrid 可以与 jQuery mobile 一起使用吗？

> ID：10578867
> 
> 赞同：1
> 
> 时间：2012-05-14T07:09:33.207
> 
> 标签：ajax, jquery-mobile, jqgrid

我想使用 ajax、jQuery mobile 和 spring mvc 显示数据库中的数据。

示例：在表格中显示课程名称列表。

我现在正在使用 jqgrid 来显示数据，但是在不使用数据的情况下还有其他选择吗？论坛上有很多，但大多使用 php，但我使用的是 spring mvc 控制器。

请任何人帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:50:07.890

不确定 jqgrid 是否适用于 jquery mobile，但对于普通的 Web 应用程序，您可以使用设置为函数的`addJSONData`方法`jsonReader`和属性。`datatype`下面是一个示例：

```
function cfgWixGenApplicationsGrid() {
    var cond = null;
    $("#tblWixGenApplications").jqGrid({
        datatype: function (postdata) {
            var orderByExpr = "";
            if (postdata.sidx != "") {
                orderByExpr = postdata.sidx + " " + postdata.sord;
            }
            getPageList(cond, postdata.page, postdata.rows, orderByExpr, hSuccPageWixGenApplications, hError);
        },
        colNames: ["Id", "Title", "Name", "Version", "MainAssemblyName"
        ],
        colModel: [
            { name: "Id", index: "Id", width: 50, sorttype: "String", editable: false },

            { name: "Title", index: "Title", width: 50, sorttype: "String", editable: true },

            { name: "Name", index: "Name", width: 50, sorttype: "String", editable: true },

            {name: "Version", index: "Version", width: 50, sorttype: "String", editable: true },

            {name: "MainAssemblyName", index: "MainAssemblyName", width: 50, sorttype: "String", editable: true }
        ],
        multiselect: false,
        pager: "#divPagerWixGenApplications",
        viewrecords: true,
        jsonReader: { repeatitems: false, root: "rows", page: "page", records: "records", total: "total" },
        rowNum: 10,
        rowList: [10, 20, 30]
    });
} 
```

执行`getPageList`ajax 调用，在我的例子中是 WCF 服务。我想你可以在这里调用 MVC url。

`hSuccPageWixGenApplications`函数调用`addJSONData`如下：

```
function hSuccPageWixGenApplications(pageData) {
    var list = [];
    $.each(pageData.List, function (index, value) {
        if (!value.IsDeleted) {
            list.push(value);
        }
    });
    var grid = $("#tblWixGenApplications")[0];
    var pData = new Object();
    var recCount = pageData.RecordCount == null ? 1000 : pageData.RecordCount;
    pData.page = pageData.PageNo;
    pData.records = recCount;
    pData.rows = list;
    pData.total = recCount / pageData.PageSize;
    grid.addJSONData(pData);
}; 
```

# vb.net - vb.net - 从 ini 文件中删除选定的列表视图项

> ID：10578869
> 
> 赞同：0
> 
> 时间：2012-05-14T07:09:41.757
> 
> 标签：vb.net, for-loop, ini

我想做的事：我有一个ini文件，用作jar文件的“索引”。罐子在其中声明如下： 罐子的名称=c:\Path

因此，当我的应用程序启动时，ini 文件会加载到列表视图中。

现在我的问题。我有一个删除按钮，我想用它从列表视图和 ini 文件中删除罐子。

必须可以删除多选 jar 引用。所以我想对每个都做，这样每个选定的项目都会在 ini 中搜索并删除

错误是，字符串（是正确的，我用消息框测试过）得到分析-未知转义序列\ R（错误在** **之间）

我的代码：

```
Private Sub jarDelete_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles jarDelete.Click
    If Me.ListView1.SelectedItems.Count > 0 Then
        For Each item As ListViewItem In ListView1.SelectedItems
            ListView1.Items.Remove(item)

            Dim GanzeZeile As String = ListView1.SelectedItems.ToString
            Dim Sucheninini As String
            Dim inipath As String = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) & "\Mauncher\jars.ini"
            Dim sr As New StreamReader(inipath)
            Dim sw As StreamWriter
            Dim inicontent As String = sr.ReadToEnd()
            sr.Close()

            MessageBox.Show(GanzeZeile & ", " & inipath & ", " & item.Text & "=" & item.SubItems.Item(1).Text)

            Sucheninini = item.Text & "=" & item.SubItems.Item(1).Text             
            **inicontent = System.Text.RegularExpressions.Regex.Replace(inicontent, Sucheninini, "")**
            sw = New StreamWriter(inipath)
            sw.Write(inicontent)
            sw.Close()
        Next
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:49:22.373

你有没有尝试过：

```
inicontent = inicontent.Replace(Sucheninini, String.Empty) 
```

# delphi - 如何使用实时绑定将 blob 字段绑定到 TImage 控件？

> ID：10578870
> 
> 赞同：7
> 
> 时间：2012-05-14T07:09:47.540
> 
> 标签：delphi, delphi-xe2, livebindings

我正在使用 Delphi XE2 编写 VCL win32 应用程序。Delphi XE2 支持实时绑定。我将示例 Biolife.xml 加载到 TClientDataSet 实例中。

我能够将 TEdit 控件绑定到数据集的字符串字段：物种名称：

```
object BindLinkEdit11: TBindLink
  Category = 'Links'
  SourceMemberName = 'Species Name'
  ControlComponent = Edit1
  SourceComponent = BindScopeDB1
  ParseExpressions = <>
  FormatExpressions = <
    item
      ControlExpression = 'Text'
      SourceExpression = 'DisplayText'
    end>
  ClearExpressions = <>
end 
```

然后我尝试将图形字段绑定到 TImage 控件：

```
object BindLinkImage11: TBindLink
  Category = 'Links'
  SourceMemberName = 'Graphic'
  ControlComponent = Image1
  SourceComponent = BindScopeDB1
  ParseExpressions = <>
  FormatExpressions = <
    item
      ControlExpression = 'Picture'
      SourceExpression = 'Value'
    end>
  ClearExpressions = <>
end 
```

显然，它不起作用。有可能这样做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T08:18:36.753

看看`BindLinkVCLProject`演示项目。还显示了图像的绑定，所以我猜你需要这样做（`Self`in`SourceExpression`代表一个blob字段）：

```
object BindLinkImageHandler: TBindLink
  Category = 'Links'
  SourceMemberName = 'Graphic'
  ControlComponent = Image1
  SourceComponent = BindScopeDB1
  ParseExpressions = <
    item
      ControlExpression = 'Picture'
      SourceExpression = 'Self'
    end>
  FormatExpressions = <
    item
      ControlExpression = 'Picture'
      SourceExpression = 'Self'
    end>
  ClearExpressions = <
    item
      ControlExpression = 'Picture'
      SourceExpression = 'nil'
    end>
end 
```

# c# - asp.net：（c#客户端）如何访问页面加载后创建的html元素？

> ID：10578886
> 
> 赞同：4
> 
> 时间：2012-05-14T07:11:23.760
> 
> 标签：c#, html, asp.net, pageload

想象一下，

第 1 步：ASPX 页面加载。
第 2 步：Button 触发一个脚本，该脚本创建一个带有 id 或 class 标签的 html 元素（div、span 等），包括 runat server 属性。

我的问题是，

**最后一步：*从我的 C# 文件中，如何访问该元素并获取它的内部 html，以便我可以将其保存为字符串？***

PS：我将使用该字符串将其保存在我的 mssql 数据库中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T07:28:05.037

如果不对服务器进行完整的回发，就无法创建“真正的” runat=server 元素/控件。

最好的方法可能是在提交页面之前编写一些脚本，将 innerHTML 存储到 ASP.Net 隐藏字段中。然后，您可以访问此隐藏字段的值来获取数据。

如果您想动态创建多个对象，则需要使用标准的 html 隐藏输入字段，因为您无法通过 javascript 创建 asp.net 服务器控件。

```
<input type="hidden" name="fieldData_1" value="control 1 html content">
<input type="hidden" name="fieldData_2" value="control 2 html content"> 
```

然后，您将能够从 Request.Form 对象访问这些隐藏字段：

```
Request.Form["fieldData_1"] 
```

知道了这一点，您现在可以遍历表单数据并处理所有动态字段

```
foreach (string fieldData in Request.Form)
{
    if(fieldData.Contains("fieldData_"){
        //process the data for each field
    }
} 
```

也可以避免一起使用隐藏字段，直接使用 __doPostback('', '') 方法将数据传递到服务器。这可以通过许多不同的方式来实现，所以我将推荐您访问[http://dopostback.net](http://dopostback.net)以了解该方法的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:20:15.657

向标签添加`runat="server"`属性以使其成为 HTML 控件，并且可以通过其 ID 从 .cs 文件中访问

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T07:27:48.027

我认为您需要将元素内部 HTML 发布回服务器。我会做什么，在客户端函数中，获取新创建元素的内部 HTML，将其存储在隐藏字段中，然后调用`__doPostBack('<hidden element id>', '');`

# html - 在 html5 中使用包含标签未显示数据

> ID：10578888
> 
> 赞同：1
> 
> 时间：2012-05-14T07:11:33.223
> 
> 标签：html, include

我正在使用 html5 并想在 asp 中创建类似于母版页的页面，我创建页面 index.html 和 mainpage.html 并希望在点击索引页面中存在的链接时调用包括 mainpage.html。我在索引页上使用代码：

```
<!--#include virtual="mainpage.html" --> 
```

但是当我们运行索引页时，它会显示空白页

谁能帮帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:48:04.657

1.  那是评论标签。你放在那里的任何东西都不会做任何事情。

2.  没有 html5 包含标签之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:15:58.600

> “没有 html5 包含标签之类的东西”@Fibericon

但是您正在尝试使用[ssi include 命令](http://www.htmlgoodies.com/beyond/webmaster/article.php/3473341/SSI-The-Include-Command.htm)

使用这个命令你会很满意，但是你需要一个服务器环境（例如apache）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T14:46:38.210

在包含标记文件中，扩展名始终为 .shtml，并且在 Web 服务器中启用了检查服务器端包含标记。

# javascript - javascript中的“this”关键字

> ID：10578891
> 
> 赞同：-1
> 
> 时间：2012-05-14T07:11:58.557
> 
> 标签：javascript, jquery, html

如果我有多个 .packages 类，如何为当前的 .packages 实现以下功能？

```
$('.packages').each(function(){
    var sizeOfLi = $(".packages:last > li").width();
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T07:13:58.310

```
var sizeOfAllLi = $(".packages:last > li").map(function() {
  return $(this).width();
}); 
```

该`map`函数遍历 jQuery 集合并调用参数中提供的函数，并将其`this`设置为当前元素。它将把所有返回值收集到~~一个~~jQuery 集合中（见注释）。如果你想要一个数组，添加`.get()`到上面的末尾。

在函数内部，需要重新包装`this`为 jQuery 元素，以便我们可以使用 jQuery 的`.width()`，因为`this`它是一个裸 DOM 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:13:42.140

```
$(".packages:last > li").each(function() {
   console.log($(this).width())
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T07:16:27.557

答案很好，`each`或者您可以使用[`map`](http://api.jquery.com/map/)：

```
var liSizeArray = $(".packages:last > li").map(function() {
    return $(this).width();
}).get(); 
```

返回值将是一个数字数组，即各个`li`元素的宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T07:13:14.783

这始终适用于 jQuery 中的事件处理程序，它是您的 ,,main'' 函数选择器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T07:17:59.997

取决于你想做什么

如果你想获得`li`选择时的宽度：

```
$(".packages:last > li").click(function(){
  sizeOfLi = $(this).width();
}); 
```

按照 Amadan 的说法，绘制所有 li 大小的地图

```
var sizeOfAllLi = $(".packages:last > li").map(function() { return $(this).width(); }) 
```

在这种`this`情况下，关键字指的是当前的 li

# ruby-on-rails - 许多宝石的未初始化常量错误

> ID：10578894
> 
> 赞同：0
> 
> 时间：2012-05-14T07:12:08.137
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, rubygems

在浏览了很多论坛之后，我得出结论，我是在为很多不知道这个问题答案的人问这个问题，很多时候我们确实需要 Gemfile 中的某个 gem 并执行 bundle install ，gems 已安装，但是当我们在控制器中执行 ::.something 之类的操作并在本地服务器上运行它时，很多时候它只是抛出了这个未初始化的常量 :: 有时这个错误似乎会自行消失，其他有时它只是停留，试图找出这个问题到底在哪里，我觉得它是路由或配置错误。你认为这个错误可能在哪里？我应该在哪里寻找？为了让事情更具体，我现在正在使用 xmpp4r gem。我的 gemfile 中有这一行“gem 'xmpp4r'”，我运行了 bundle install。然后在控制器中我把这两行

> > client = Jabber::Client.new(jid)
> > client.auth('1234')
> > message = Jabber::Message::new(to_jid, body).set_type(:normal).set_id('1')
> > my_muc = Jabber: :MUC::SimpleMUCClient.new(客户端)

奇怪的部分是它没有为客户端或消息提供错误，但它说它找不到 MUC 模块，然后我通过 rvm 并试图找到它们 xmpp4r gem 的物理位置，在那里我找到了 MUC。 rb 文件，并在评论中说像这样使用

> > my_muc = Jabber::MUC::SimpleMUCClient.new(my_client)

服务器给出的错误是

> > 未初始化的常量 Jabber::MUC

各位大侠，如果你们能解决这个问题，我们将不胜感激。

好吧，在 stackoverflow 上解决这个问题花了 10 分钟，为创建者和运行它的社区欢呼，特别是 gmile。

因此，如果您遇到这样的错误，我猜它的原因是虚拟机没有递归地遍历 gem 中的所有文件夹并添加所有 .rb 文件，我们必须在控制器中明确要求该文件。只是去

> > .rvm/gems/ruby-1.9.2-p290/gems/

乱来看看你试图访问的模块是否在那里，然后看看它是否在 gem 的子文件夹中，然后添加这些文件夹，如

> > 需要“宝石名/子文件夹”

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:27:58.663

尝试将其放在文件顶部：

```
require 'xmpp4r'
require 'xmpp4r/muc' 
```

# css - 嵌入图像的 GWT 文本框

> ID：10578898
> 
> 赞同：1
> 
> 时间：2012-05-14T07:12:25.870
> 
> 标签：css, gwt

我正在使用 GWT-Textbox，我想在文本框的右侧添加图像。是否可以在文本框字段中添加图像？如果可能，请提供代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T06:33:03.543

创建一个 CSS 类。

`.searchBox{ background-image:url('graphics/magnifying-glass.gif'); background-repeat:no-repeat; background-position: right; padding-right:5px; }`

然后

`TextBox textBox = new TextBox();`

`textBox.setStyleName("searchBox");`

它应该呈现为

![右上角有图像的文本框](../Images/c13864e191a93da015cb1847fa627259.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:06:37.173

给出如下所示的样式：

```
background-image: url(Log-buttonred.bmp);
background-repeat: no-repeat;
background-position: right; 
```

# svn - 如何自己修改SVN用户密码

> ID：10578900
> 
> 赞同：1
> 
> 时间：2012-05-14T07:12:27.187
> 
> 标签：svn, passwords, webdav, .htpasswd

我们使用 WebDAV 在 Apache 位置上拥有本地 SVN 存储库。我们的密码使用命令存储在`passwd`文件中。`htpasswd`

在这种情况下，只有管理员可以使用添加/更改/分配密码给用户

```
sudo htpasswd /etc/subversion/passwd <username> 
```

但是我们需要增加用户自己更改密码的可能性，所以在管理员添加新用户后 - 用户可以将密码更改为自己的。

是否有任何现成或易于实施的解决方案来实现此功能？可能是一些 CMS 或其他 LAMP 解决方案？或者 CGI...

*当然，每个用户都应该只能更改自己的密码*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:15:11.673

也许像 submin 这样的东西对你有用[http://supermind.nl/submin/about.html](http://supermind.nl/submin/about.html)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-08T08:06:27.650

我发现了一个小的 Perl 脚本，它允许每个 SVN 用户更改他的密码。[svnpasswd](http://www.teuton.org/~ejm/svnpasswd/)

# java - 如何在objective-c中实现客户端Socket

> ID：10578902
> 
> 赞同：0
> 
> 时间：2012-05-14T07:12:30.923
> 
> 标签：java, iphone, objective-c, sockets

我需要这样做：

```
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.lang.ClassNotFoundException;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;

public class ClientSocketExample {
    public static void main(String[] args) {
        try {
            //
            // Create a connection to the server socket on the server application
            //
            InetAddress host = InetAddress.getLocalHost();
            Socket socket = new Socket(host.getHostName(), 7777);

            //
            // Send a message to the client application
            //
            ObjectOutputStream oos = new ObjectOutputStream(socket.getOutputStream());
            oos.writeObject("Hello There...");

            //
            // Read and display the response message sent by server application
            //
            ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());
            String message = (String) ois.readObject();
            System.out.println("Message: " + message);

            ois.close();
            oos.close();
        } catch (UnknownHostException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
} 
```

但是在objective-c中，我看到有很多使用socket的类，但是我不知道如何在iphone项目中使用它，有人可以帮助我吗？谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:15:47.967

可以异步上传，完整记录，之后再完整上传

或者只是[NSStream](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server) 或 unix 中的纯 TCP 套接字，我使用[cocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)

```
- (void)initNetworkCommunication {
    CFReadStreamRef readStream;
    CFWriteStreamRef writeStream;
    CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"localhost", 80, &readStream, &writeStream);
    inputStream = (NSInputStream *)readStream;
    outputStream = (NSOutputStream *)writeStream;
} 
```

# android - Android与引擎像素完美勾结

> ID：10578907
> 
> 赞同：-3
> 
> 时间：2012-05-14T07:12:59.823
> 
> 标签：android, andengine

我在游戏开发中使用了和引擎像素完美碰撞。有时它的碰撞是完美的，但有时不是。我使用 PixelPerfectSprite 进行 Srpite。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:17:15.717

AndEngine 在精灵透明度方面不支持像素完美碰撞检测。

# android - 显示不同的图像

> ID：10578909
> 
> 赞同：0
> 
> 时间：2012-05-14T07:13:06.727
> 
> 标签：android, image

我正在创建一个应用程序，其中我有一个文本框，它给出了图像的描述。触摸它会描述图像的位置。在下侧，我使用了两个按钮在图像之间导航。我应该做什么这个 ？我不明白那件事。

我在另一堂课中使用了该图像，然后我调用了该图像，但它不起作用。我从三天开始就陷入了这个困境，任何人都可以帮助我解决这个问题。

如果有人认为我在问这个问题，那么我很抱歉。

![图片我想要这样](../Images/6ab76eca9f83651ac3f606feae8a192a.png) 我的代码如下第一张图片

```
public class FirstImage extends ImageView {
    float a=0;
    float b=0;

    TextView t= (TextView) findViewById(R.id.textView1);

    public FirstImage(Context context) {
        super(context);
        // TODO Auto-generated constructor stub

    }

    public FirstImage(Context context, AttributeSet attrs) {
          super(context, attrs);

    }

    public  boolean onTouch(MotionEvent me){
        switch(me.getAction()){
        case MotionEvent.ACTION_DOWN:
            a=me.getX();
            b= me.getY();
            pageinfo(a,b);
            break;
        case MotionEvent.ACTION_MOVE:
            a=me.getX();
            b= me.getY();
            pageinfo(a,b);
            break;
        case MotionEvent.ACTION_UP:
            a=me.getX();
            b= me.getY();
            pageinfo(a,b);
            break;
        case MotionEvent.ACTION_OUTSIDE:
            a=me.getX();
            b= me.getY();
            pageinfo(a,b);
            break;
        default: return false;
        }
        return true;

    }

   public void pageinfo(float a,float b){

        t.setText(Float.toString(a)+"x"+Float.toString(b)+"y");

    }

} 
```

我在布局文件中调用如下...

```
<com.example.androidtablayout.FirstImage
         android:id="@+id/myandroid"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:src="@drawable/human"
         /> 
```

但我不明白为什么它没有显示任何 ontouch 事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:13:33.883

以下代码（在`VideosActivity`课堂上，取自链接问题）是问题所在：

```
FirstImage  i= new FirstImage (this); 
```

它在您的类的隐式创建的构造函数中创建一个*FirstImage*实例。但是您不能在活动生命周期的早期生成 UI 小部件。而且您也不需要，因为布局充气器将为您生成所有 UI 小部件。

所以只需将代码更改为：

```
FirstImage  i; 
```

应该这样做。

初始化实例变量的正确方法已经在您的代码中，`i`即调用`findViewById()`.`onCreate()`

**更新：**

似乎您希望`onTouch`在触摸图像时被调用。但这`onTouch`不是您可以覆盖的超类的方法。取而代之的`onTouch`是接​​口的方法`View.OnTouchListener`。

要修复它，请将实例注册为侦听器（使用`setOnTouchListener`）并将其声明为实现`View.OnTouchListener`。或者将方法名称更改为`OnTouchEvent`（可以覆盖）。

# android - 如何通过 JSON 网络服务登录不同的用户？

> ID：10578910
> 
> 赞同：0
> 
> 时间：2012-05-14T07:13:10.697
> 
> 标签：android, json

我有一个用于登录页面的 Web 服务。但我想通过使用相同的网络服务登录不同的用户，如 Admin 和 Employee。

如果管理员登录显示一项活动 A. 管理员：公司：xxx 登录 ID：AAA 密码：BBB

如果员工登录显示另一个活动 B. 公司：YYY 登录 ID：CCC 密码：DDD

任何人都可以帮助我..请问怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:19:19.013

检查下面的代码它可能会帮助你。

包 com.Barcode_Dynamic;

```
public class Login_activity extends Activity {

    private EditText exit_user;
    private EditText exit_pswd;
    private Button btnlogin;
    private Button btncancle;
    private String Url_s = null;
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    boolean LOGIN_BOOL = false;
    private Button btnBack;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);

        exit_user = (EditText) findViewById(R.id.edit_user);
        exit_pswd = (EditText) findViewById(R.id.edit_pswd);

        btnlogin = (Button) findViewById(R.id.btn_login);
        btncancle = (Button) findViewById(R.id.btn_cancle);

        btncancle.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                exit_user.setText("");
                exit_pswd.setText("");
            }
        });

        btnlogin.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                final String USER = exit_user.getText().toString();
                final String PSWD = exit_pswd.getText().toString();
                if (USER.length() > 0 && PSWD.length() > 0) {

                    CharSequence contentTitle = getString(R.string.app_name);
                    final ProgressDialog progDailog = ProgressDialog.show(
                            Login_activity.this, contentTitle,
                            "...", true);

                    final Handler handler = new Handler() {
                        @Override
                        public void handleMessage(Message msg) {
                            //showAlert("Import completed.");
                            if(LOGIN_BOOL)
                            {
                                showAlert("Login succes");                              
                                startActivity(new Intent(Login_activity.this, emailSettingFile.class));
                            }
                        }
                    };

                    new Thread() {
                        public void run() {
                            try {

                            nameValuePairs.add(new BasicNameValuePair("username", ""
                                    + USER));
                            nameValuePairs.add(new BasicNameValuePair("password", ""
                                    + PSWD));
                            InputStream is1 = call_Http();
                            String str = getResult(is1);
                            if (str != null) {
                                meth_parse_json(str);
                            }

                            } catch (Exception e) {
                                // TODO: handle exception

                            }
                            handler.sendEmptyMessage(0);
                            progDailog.dismiss();
                        }

                    }.start();

                } else {
                    showAlert("Please Enter Username & Password");

                }

                startActi();
            }
        });
    }

    protected void startActi() {
        // TODO Auto-generated method stub
        if(LOGIN_BOOL)
        {

        }
    }

    private InputStream call_Http() {
        InputStream is = null;
        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(Url_s
                    + "/login_service.php");
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse responce = httpclient.execute(httppost);
            HttpEntity entity = responce.getEntity();
            is = entity.getContent();

        } catch (Exception e) {
            // TODO: handle exception

        }

        return is;
    }

    private String getResult(InputStream is1) {
        String result = null;
        // TODO Auto-generated method stub
        try {
            BufferedReader bufr = new BufferedReader(new InputStreamReader(is1,
                    "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            sb.append(bufr.readLine() + "\n");
            String line = "0";
            while ((line = bufr.readLine()) != null) {
                sb.append(line + "\n");
            }

            is1.close();
            result = sb.toString();

        } catch (Exception e) {
            // TODO: handle exception

        }

        return result;
    }

    private void meth_parse_json(String str) {
        // TODO Auto-generated method stub
        Log.d("JSON :", "" + str);
        try {
            JSONObject job1 = new JSONObject(str);

            // JSONArray details = job1.getJSONArray("details");
            String a = (String) job1.get("details");
            Log.d("JSON :", "" + a);
            boolean bool = Boolean.parseBoolean(a);
            if (bool) {
                LOGIN_BOOL = true;
            } else {
                LOGIN_BOOL = false;
            }
        } catch (Exception e) {
            // TODO: handle exception

        }
    }
} 
```

上面的 android 代码你必须创建用于登录的 web 服务。这只是如何做到这一点。

在 meth_parse_json 方法中，您必须检查这是用于公司登录还是员工登录。

我假设你有 mysql 的知识。

如果这对您有帮助，请使其正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:20:37.063

我想您有一个用于登录的 Web 服务的数据库。使用两个字段创建另一个名为组或角色的表。表的 sql 脚本可能如下所示：

```
create table users (
  user_name         varchar(15) not null primary key,
  user_pass         varchar(15) not null
);

create table user_roles (
  user_name         varchar(15) not null,
  role_name         varchar(15) not null,
  primary key (user_name, role_name)
); 
```

现在只需检索用户拥有的角色并决定他是否可以访问活动。

# python - Python：从导入的 css 文件中查找宽度

> ID：10578916
> 
> 赞同：0
> 
> 时间：2012-05-14T07:13:40.143
> 
> 标签：python, css, file

我想在python中找到导入的CSS文件中出现的宽度数。

我正在使用 file() 函数

```
 css = open("/Users/john/Work/html/Ribbon/header.css")  
    print(css.read())
    #output

#back {
    width: 680px;
    height: 280px;
    border: 2px solid #000;
    margin: 100px auto;
    background: url("background.png");
    position: relative;
}

#back ul {
    margin-top: 115px;
    margin-left: 80px;
    width: 476px;
    height: 39px;
    border: 2px solid #b4c5cf;
    background: #f3f8fa;
}

#back #topborder {
    background: url("top_border.png");
    position: absolute;
    width: 100%;
    height: 23px;

}

#back #bottomborder {
    background: url("bottom_border.png");
    width: 100%;
    height: 23px;
    bottom: 0;
    position: absolute;
} 
```

我是python新手，请提出更多方法。请帮助我，如何进一步进行。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:18:15.577

有各种各样的 CSS 解析器。向 Google 询问“python css 解析器”。使用其中之一，我确信查找/计算相关属性会很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T18:02:55.560

我不是 100% 确定你在问什么，但如果你想计算`width:`CSS 文件中定义的数量，那么你可以使用以下（非常简单的）方法：

```
count = 0
with open('/Users/john/Work/html/Ribbon/header.css', 'r') as f:
    for line in f:
        if "width:" in line:
            count+=1
print("Found %d instances of 'width:'." % count) 
```

# sql - 更好地使用数据集市 (BI) 或计划视图来捕获快速变化的属性（状态）？

> ID：10578921
> 
> 赞同：0
> 
> 时间：2012-05-14T07:13:45.977
> 
> 标签：sql, database, datamart

目前我们依靠OLTP系统来开发报表。基本上，我们要跟踪销售活动。因此，我们需要查看“Opportunity”、“Proposal”、“Contract Sent”等销售阶段的总销售额。不用说，在 OLTP 中，每条记录都有一个变化的当前状态（销售阶段）。对于分析报告，我们需要考虑历史数据并对其执行聚合操作。

那么，哪一个最好：通过每天计划复制所有销售订单（连同它们的销售状态）的视图来捕获这一点，还是为此设计一个小型数据集市解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T04:28:41.683

我会推荐一个数据集市，但答案主要取决于您是否想随着时间的推移跟踪任何这些信息。如果您只关心一次性分析日常信息，请跳过数据集市。如果您想了解交易的趋势并比较管道各个阶段的销售量，并了解这些情况如何随时间变化，请使用数据集市。

请注意，使用数据集市方法，您可能会构建一个 ETL（提取、转换和加载）流程，该流程执行类似于您的每日视图快照的操作，以从 OLTP 系统中获取数据。

# .net - 将 .NET 程序集反编译为项目结构

> ID：10578922
> 
> 赞同：1
> 
> 时间：2012-05-14T07:13:49.353
> 
> 标签：.net

我有一个现有的 .NET dll。我想反编译源代码并生成一个项目结构。通过 .NET 反射器，我可以生成源代码，但我无法将源代码保存到项目结构中。是否有任何其他工具可以生成源代码以及 .NET dll 的项目结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:13:05.827

The [File Generator](http://filegenreflector.codeplex.com/) is a Reflector add-in which is capable of generating source code files and project files, ready to open in Visual Studio.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:54:34.517

反编译器并不是一个完美的解决方案。有很多东西不能被正确地逆向工程，而是被逆向成一种兼容（但不完全相同）的方法。

这是因为优化会改变代码，并且某些类型的语言结构只是语法糖，反编译器很难知道您是使用糖还是手动操作。

我不相信在编译项目时会以易于访问的方式保存项目结构。如果您有一个 pdb 文件，这可能是可能的......但没有一个，可能没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T07:18:25.800

这是最近可用的。但是，我没有使用它。

[http://www.jetbrains.com/decompiler/](http://www.jetbrains.com/decompiler/)

# ios - iOS 应用提交耗时过长

> ID：10578923
> 
> 赞同：2
> 
> 时间：2012-05-14T07:13:54.480
> 
> 标签：ios

我尝试提交 iOS 应用程序，我的应用程序已正确验证，当我从 Xcode 管理器单击提交时，它花费的时间太长，而且它不会在任何地方停止。我的应用程序大小是 40mb。关于它为什么会发生的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:42:02.993

try using the application loader, which is the much better option as you can monitor each and every activity in it. And much easy to use.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:18:17.243

也许你有（很遗憾地说）一个糟糕的连接。您是否尝试过使用 iStat Menus 或 slurm、iftop 等工具监控您的连接？

# jquery - 如何在下拉列表中获取所选选项的值？

> ID：10578927
> 
> 赞同：0
> 
> 时间：2012-05-14T07:14:09.277
> 
> 标签：jquery, ajax, asp.net-mvc-3, drop-down-menu, asp.net-ajax

我的视图中有一个下拉列表。下拉列表显示枚举值：

```
 @Html.DropDownListFor(model => model.hobbyhome.HobbyDetailList.First().course, HobbyHomesWebApp.Utility.EnumList.ToSelectList(HobbyHomes.Model.Course.Advance, "Select Course"), "--Select Course--", new { @id="Course"}) <font color="red">*</font> 
```

**课程生成器**

```
 <div class="editor-field">
 <select id="course" name="course"><option value="">--Select Course--              </option>
     <option value="Basic">Basic Level</option>
      <option value="Intermidiate">Intermidiate Level</option>
       <option value="Advance">Advance Level</option>
      </select> <font color="red">*</font>   
              </div>

   var course = from Course c in Enum.GetValues(typeof(Course))
                         select new { ID = c, Name = c.ToString() };
                        ViewData["course"] = new SelectList(course, "ID", "Name"); 
```

**涉及的输入**选项是基本、中级和高级

我正在尝试根据所选值填充其他下拉列表：

```
 $("#Course").change(function () {
        var Hobbyid = $("#Hobby").val();
        var Cid=$("#Course").val();
        var urlHobbyhome = '@Url.Action("FetchStateByHobbyId")';
        $.ajax({
            type: "POST",
            url: urlHobbyhome,
            data: { id: Hobbyid,cid:Cid },
            success: function (data) {
                $('#State').empty();
                $('#State')
                        .append($('<option>', { value: "0" })
                        .text("-- Select State --"));
                $.each(data, function (key, value) {

                    $('#State')
                        .append($('<option>', { value: value.Value })
                        .text(value.Text));
                });
            }
        }); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:20:05.430

您可以使用 jQuery 附加到 DropDownList 的 Change 事件。

```
$("#YourDropDownID").change(function () {
     var itemSel = $("#YourDropDownID").val();
     // Do your Ajax logic using the selected value stored in variable 'itemSel'

}); 
```

**编辑：**

测试这个功能：

```
$("#course").change(function () {
        var Hobbyid = $("#Hobby").val();
        var Cid=$("#course").val();
        alert("This is the CourseID:" + Cid);  
        var urlHobbyhome = '@Url.Action("FetchStateByHobbyId")';
        $.ajax({
            type: "POST",
            url: urlHobbyhome,
            data: '{id:' + Hobbyid + 'cid:' + Cid + '}',
            success: function (data) {
                $('#State').empty();
                $('#State')
                        .append($('<option>', { value: "0" })
                        .text("-- Select State --"));
                $.each(data, function (key, value) {

                    $('#State')
                        .append($('<option>', { value: value.Value })
                        .text(value.Text));
                });
            }
        });
}); 
```

我将“data”属性更改为字符串的串联，因为使用“id”名称时存在一些问题。添加了一个显示所选课程 ID 的警报，并将选择器更改为使用小写 ID。请用我的完全替换你的 javascript 函数，现在就让我们来吧。

# solr - 计算地图上的 2 个圆是否相交

> ID：10578930
> 
> 赞同：1
> 
> 时间：2012-05-14T07:14:12.453
> 
> 标签：solr, geospatial, latitude-longitude, geo

我在地图上有 2 个点，它们周围有一个区域（比如说 5 英里），我需要弄清楚它们是否相交。例如，假设每个点周围都有一个半径为 5 英里的圆。我需要弄清楚这两个圆圈是否重叠。谁能指出我可以做到这一点的数学？

顺便说一句，我正在使用 Solr 进行其他地理空间搜索。有谁知道这是否可以用 Solr 完成？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T07:17:43.053

只需取圆心之间的距离即可。如果它小于 r1 + r2，则它们重叠。

```
int distance = calculateDistance();
int r1 = circle1.getRadius();
int r2 circle2.getRadius();

boolean overlap = distance < r1+r2; 
```

# php - 在不刷新的情况下向下拉列表添加新选项

> ID：10578931
> 
> 赞同：0
> 
> 时间：2012-05-14T07:14:16.590
> 
> 标签：php

我有一个动态下拉列表，它的值来自`tblSupplies`. 管理员可以在下拉列表中添加一个新选项。我能够做到这一点，但它需要管理员转到另一个页面来添加一个选项，这会导致以前输入的值被删除。这是我的动态下拉列表的代码

```
<select name="Supply_Name" id="Supply_Name">
                                <?php
do {  ?>
                                <option value="<?php echo $row_Recordset1['Supply_ID']?>"><?php echo $row_Recordset1['Supply_Name']?></option>
                                <?php} while ($row_Recordset1 = mysql_fetch_assoc($Recordset1));
  $rows = mysql_num_rows($Recordset1);
if($rows > 0) {
  mysql_data_seek($Recordset1, 0);
  $row_Recordset1 = mysql_fetch_assoc($Recordset1); }
?>
                            </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:57:42.710

ajax 将是去这里的方式。可以将数据发送到后台的 php 页面，然后在完成后仅重新加载带有下拉菜单的 div。

更多关于[ajax 和 jquery 的信息在这里](http://api.jquery.com/jQuery.ajax/)

以及更多关于[js 和 ajax 的信息](http://www.w3schools.com/ajax/default.asp)

# class - Lua getter 和 setter

> ID：10578935
> 
> 赞同：7
> 
> 时间：2012-05-14T07:14:27.060
> 
> 标签：class, lua, setter, getter, codea

我正在使用 Codea iPad 应用程序并学习 Lua。Codea 使用[Class.lua](http://twolivesleft.com/Codea/Code/Class.lua)作为类。我想要实现的是一种为变量获取和设置方法指定函数的方法。目前，可以像这样访问变量“x”：print(obj.x) 并使用如下代码设置：obj.x = 1。我希望该变量改为调用我可以指定的 get 和 set 函数. 我正在移植用 Actionscript 3 编写的东西，需要模仿 A3 的 get 和 set 函数声明。让我知道这是否可能，或者他们是否是另一种方式。如果添加或更改代码是一种解决方案，我可以覆盖 Codea 的 Class.lua。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T11:05:00.047

您可以通过覆盖类上的 __newindex 和 __index 方法来创建自定义 setter 和 getter。

请注意，您必须修改作为 Codea 一部分的 LuaSandbox.lua，以启用 rawset 和 rawget 方法（注释掉将它们设置为 nil 的行）。**编辑：在最新版本的 Codea 中不再是这种情况，`rawset`并且`rawget`默认情况下可用。**

每当您尝试在表上设置以前未设置的属性时，都会调用 __newindex 方法。

每当您尝试获取表中不存在的属性时，都会调用 __index 方法。

因此，您可以通过在您的类中创建一个私有表并将您的成员变量存储在其中来为 getter 和 setter 插入自定义代码。当您尝试读取和写入它们时，您可以在 __newindex 和 __index 方法中执行自定义代码。

```
MyClass = Class()

function MyClass:init()
    -- We'll store members in an internal table
    self.members = {}
end

function MyClass:__newindex( index, value )
    if index == "testMember" then
        self.members[index] = value
        print( "Set member " .. index .. " to " .. value )
    else
        rawset( self, index, value )
    end
end

function MyClass:__index( index )
    if index == "testMember" then
        print( "Getting " .. index )
        return self.members[index]
    else
        return rawget( self, index )
    end
end 
```

测试它

```
function setup()
    foo = MyClass()

    foo.testMember = 5
    foo.testMember = 2

    print( foo.testMember )
end 
```

您可以在此处找到有关元方法的更多信息：http: [//lua-users.org/wiki/MetamethodsTutorial](http://lua-users.org/wiki/MetamethodsTutorial)

# c# - 在pictureBox中加载Pgm图像

> ID：10578940
> 
> 赞同：2
> 
> 时间：2012-05-14T07:14:37.883
> 
> 标签：c#, winforms, image

最近我正在从事乳腺癌检测项目。所以我需要在我的图片框中加载一个 pgm 图像。但是我收到“参数无效”的错误。我认为这背后的原因在我下面的代码中。

```
 public Image byteArrayToImage(byte[] byteArrayIn)
        {

            Image returnImage;
            MemoryStream ms = new MemoryStream(byteArrayIn);           
            returnImage = Image.FromStream(ms);  //Error is in here.     
            return returnImage;
        } 
```

而且我有一个图像存储在我的数据库中，格式为 0x53797374656D2E44726177696E672E4269746D6170。我到处搜索我发现我需要删除标题并且只返回图像数据字节来返回图像..所以任何人都可以帮助我从图像中删除标题并且只返回图像字节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:16:25.687

> 我有一个图像存储在我的数据库中，为 0x53797374656D2E44726177696E672E4269746D6170

那不是图像。它是一个字符串，十六进制解码为“System.Drawing.Bitmap”。当然，这对于任何 .NET 程序员来说都非常熟悉。显然，将图像写入 dbase 的代码已损坏，看起来它使用了位图的 ToString() 方法。你需要先解决这个问题。

不要忘记使用简单的逻辑来解决看似无法诊断的问题，您无法将 X 射线图像存储在 21 个字节中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:56:30.203

您可以在此处了解有关格式[http://netpbm.sourceforge.net/doc/pgm.html](http://netpbm.sourceforge.net/doc/pgm.html)的信息。另外，我建议获取其中提到的转换器之一，并将图像即时转换为支持的格式。

# python - 从 Python 中的包装函数获取上下文对象

> ID：10578943
> 
> 赞同：1
> 
> 时间：2012-05-14T07:14:46.337
> 
> 标签：python, closures

鉴于以下情况：

```
class MyClass:
    def __init__(self, someval):
        self.someval = someval
    def get_a_function(self):
        def result():
            return self.someval
        return result

inst = MyClass("my value")
func = inst.get_a_function() 
```

我只有`func`，想得到`inst`。这可能吗？如果可以，怎么做？注意：我不控制`MyClass`或如何`inst`声明。

PS我知道这是baaadddd风格，但很好奇是否可以做到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T07:21:05.127

你注意到 result 是如何返回`self.someval`的，这意味着它有一个闭包。您需要做的就是深入了解该关闭。为此，请使用以下`func_closure`属性：

```
>>> class MyClass:
...     def __init__(self, someval):
...         self.someval = someval
...     def get_a_function(self):
...         def result():
...             return self.someval
...         return result
... 
>>> inst = MyClass("my value")
>>> func = inst.get_a_function()
>>> func
<function result at 0x8d3efb4>
>>> func.func_closure
(<cell at 0x8dbc554: instance object at 0x8d321cc>,)
>>> func.func_closure[0].cell_contents
<__main__.MyClass instance at 0x8d321cc> 
```

请注意，我只是访问闭包的第一个元素。如果函数比较复杂，它的闭包中可能有多个对象，你需要测试你想要哪个。

编辑：顺便说一句，这真是糟糕的风格:)

# c++ - 类的大小，成员函数的大小，继承的类大小？

> ID：10578945
> 
> 赞同：1
> 
> 时间：2012-05-14T07:14:54.007
> 
> 标签：c++, class

我对这两个班级的班级规模感到困惑。

谁能告诉我为什么这个输出是“ SIZEOF(X)=4; SIZEOF(Y)=8;

或提供一些关于这个问题的有用链接/资源？

任何人都可以帮助我吗？

```
#include <iostream>
using namespace std;

class X {
    int i;
public:
    X() { i = 0; }
    void set(int ii) { i = ii; }
    int read() const { return i; }
    int permute() { return i = i * 47; }
};

class Y : public X {
    int i; // Different from X's i
public:
    Y() { i = 0; }
    int change() {
        i = permute(); // Different name call
        return i;
    }
    void set(int ii) {
        i = ii;
        X::set(ii); // Same-name function call
    }
};

int main() {
    cout << "sizeof(X) = " << sizeof(X) << endl;
    cout << "sizeof(Y) = "
        << sizeof(Y) << endl;
    Y D;
    D.change();
    // X function interface comes through:
    D.read();
    D.permute();
    // Redefined functions hide base versions:
    D.set(12);
    getchar();
} ///:~ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T07:17:05.630

X 包含四个字节中的*一个整数*。

Y 包含*两个 int*，每个包含四个字节，因为它还包含 X 的成员变量，即总共八个字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:21:43.360

我认为问题标题表明您认为这些类的大小更大，因为它们的成员函数和基类。好吧，这是错误的。

在最终编译的代码中，成员函数与自由函数没有任何不同，只是带有隐式的第一个参数`this`，因此它们不占用任何每个对象的空间，因此不计入类型的大小。

此外，单纯的基类不会强加任何额外的内存使用，它们（它们的成员）只是与派生类的成员一起存储。尽管您将 's 隐藏在`X`'s`i`中`Y`，但它仍然存在（并且可以通过显式规范 ( `X::i`) 访问）并且除了`Y`'s之外还占用空间`i`，因此`int`每个 s 都有 4 个字节。

如果您有任何虚拟成员函数，情况会略有不同。在这种情况下，额外的间接寻址会产生很小的内存开销（很可能是指向虚函数地址列表的指针，为 4/8 字节）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T07:18:51.087

因为 X 包含一个整数，Y 包含 2 个（其中一个是继承的）。您机器上的整数大小为 4 个字节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T07:19:01.580

类中的代码只存在于一处（与`static`数据成员相同）。每个类实例都不会重复它。所以它不计入班级的规模。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T07:19:02.237

`sizeof(X)`返回 的实例的大小`X`。在您的系统上，int 的大小为 4。然后您使用 Y 及其数据扩展该类。此类不是多态的，并且不需要额外的空间（例如用于 vtables）或填充（以调整自然对齐）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-05T18:57:41.657

这里有一些相关的网站，我想对你有帮助。

确定类对象的大小：[http ://www.cprogramming.com/tutorial/size_of_class_object.html](http://www.cprogramming.com/tutorial/size_of_class_object.html)

内存布局：[http ://www.phpcompiler.org/articles/virtualinheritance.html](http://www.phpcompiler.org/articles/virtualinheritance.html)

而且，如果您使用 MVSC，您可以使用 -d1reportAllClassLayout 转储解决方案中所有类的所有内存布局，如下所示：

cl -d1reportAllClassLayout main.cpp

# android - Android 每 X 秒运行一次任务

> ID：10578948
> 
> 赞同：0
> 
> 时间：2012-05-14T07:15:11.620
> 
> 标签：android, sql, multithreading, layout

我必须每 10 秒从 MSSQL DB 获取记录并刷新我的布局。我怎样才能做到这一点？

当我在新线程中运行它时，我不允许更改视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:17:16.250

TimerTask 应该做你想做的

# iphone - iOS 上的文件关联 - 从 Safari 打开纯文本文件

> ID：10578951
> 
> 赞同：1
> 
> 时间：2012-05-14T07:15:16.140
> 
> 标签：iphone, ios, ipad, safari, file-association

我想将基于文本的自定义文件类型与我在 iOS 上的应用程序相关联。

当我打开某个 php 脚本后面的文件的链接时，Safari 会在其中显示我的应用程序的“打开方式”选项，这没关系。

但是，当我打开一个直接指向我的文件的链接（运行一个 Web 服务器以进行测试）时，Safari 决定它可以读取文件本身并自行显示内容。这绝对不行。

在旁注中，如果我替换任何二进制文件（zip，...）并使用我的扩展名，文件关联仍然可以工作。

plist-info中的代码：

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeIconFiles</key>
        <array>
            <string>320.png</string>
            <string>64.png</string>
        </array>
        <key>CFBundleTypeName</key>
        <string>My File</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSHandlerRank</key>
        <string>Owner</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>com.Company.Product.ext</string>
        </array>
    </dict>
</array>
<key>UTExportedTypeDeclarations</key>
<array>
    <dict>
        <key>UTTypeConformsTo</key>
        <array>
            <string>public.data</string>
            <string>public.content</string>
            <string>public.text</string>
            <string>public.plain-text</string>
            <string>public.utf16-plain-text</string>
            <string>public.utf16-external-plain-text</string>
            <string>public.utf8-plain-text</string>
        </array>
        <key>UTTypeDescription</key>
        <string>My File</string>
        <key>UTTypeIdentifier</key>
        <string>com.Company.Product.ext</string>
        <key>UTTypeTagSpecification</key>
        <dict>
            <key>public.filename-extension</key>
            <string>ext</string>
            <key>public.mime-type</key>
            <string>application/octet-stream</string>
        </dict>
    </dict>
</array> 
```

我的问题是：如何说服 Safari 不打开文件本身？它甚至可能吗？我是否必须使用“application/octet-stream”以外的某些 mime 类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:43:03.977

为您的文件定义一个自定义 MIME 类型（即`application/x-my.custom.type`），并让 PHP 或您的 Web 服务器为它们提供服务。这应该会有所帮助。

# java - 从 MathMl 生成 java 代码

> ID：10578953
> 
> 赞同：1
> 
> 时间：2012-05-14T07:15:43.627
> 
> 标签：java, xml, mathml

我需要一个工具来解析[MathML](http://en.wikipedia.org/wiki/MathML)文件并生成代表这个文件的 Java 代码，你知道有什么工具可以部分或完全处理这个过程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:20:39.607

看看这个：[JMathTeX](http://jmathtex.sourceforge.net/)

# c - 数组地址操作

> ID：10578956
> 
> 赞同：0
> 
> 时间：2012-05-14T07:15:52.173
> 
> 标签：c, arrays

我不知道我的问题是否合适。如果有密码的话......

```
int a[2]; 
```

如果我想检查`&a[0]%8==1`并进行操作 `a[0]= (a[0] & ~7)`，这是有效的做法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:34:28.727

决定数组地址的不是你，而是编译器+链接器在编译+加载时决定。（并且您不能分配给数组，只能分配给数组的元素。）

如果您需要适当对齐的内存，请`malloc()`使用`<stdlib.h>`. C 语言标准保证返回的指针`malloc`适合任何类型。如果任何类型的最低要求是 8，这将是一个 8 字节对齐的指针。所以你应该做的是：

```
 #include <stdlib.h>

  int main (void)
  {
      int *a;

      a = malloc (2 * sizeof(*a));
      if (a == NULL) { /* Handle out of memory. */ }
      /* ... */
  } 
```

这实际上有点矫枉过正，因为声明为 int 的数组`int a[2];`很可能具有支持最快操作的对齐方式。为什么你认为强制 8 字节对齐是有利的？

# sql - 尝试创建一个函数来更新一个表并使用 psql 从另一个表中删除数据

> ID：10578957
> 
> 赞同：1
> 
> 时间：2012-05-14T07:16:08.853
> 
> 标签：sql, function, subquery

我正在为我的班级做一个项目，我们被告知要创建一个函数，该函数将删除与特定购物车编号有关的数据并更新产品表。该函数只有一个输入，即购物车编号。这是我所拥有的：

```
create function clear_cart(text) returns void as
$$

  update products
     set qtyonhand = qtyonhand + (select qty from cart where cart_id = $1)
  where id in (select product_id from cart where cart_id = $1);

  delete from cart where cart_id = $1;

$$ language sql; 
```

我一直在通过直接将查询放入 psql 来测试查询，而我似乎无法解决的错误是：

```
set qtyonhand = qtyonhand + (select qty from cart where cart_id = $1) 
```

它将多个值返回到一个只接受一个的字段中。我试过在别处寻找，但我不确定在哪里可以找到与我正在尝试做的类似的子查询。任何帮助，将不胜感激。

以防万一，这是项目所说的：

参数：cart_id 字符

回报：无

描述：从指定的购物车中删除所有物品。适当调整产品的库存数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:50:43.500

您没有向我们展示您的数据模型，但是根据您给出的陈述，我假设您想要这样的东西：

```
update products
   set qtyonhand = qtyonhand + t.qty
from (select product_id, 
             qty 
      from cart 
      where cart_id = $1) t
where products.id = t.product_id; 
```

这假定该`cart`表仅包含每个产品的一行。如果不是这种情况，您将得到“子选择也返回多行”。

在这种情况下，您需要应用聚合函数：

```
update products
   set qtyonhand = qtyonhand + t.total_qty
from (select product_id, 
             sum(qty) as total_qty
      from cart 
      where cart_id = $1
      group by product_id) t
where products.id = t.product_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:33:31.393

您可以通过使用表中声明的类似 ON UPDATE CASCADE 之类的内容，仅使用 UPDATE 语句来执行此操作。

因此，如果您在名为 child 的表中声明了它。Fk 是对父表的引用，当父表更新时，它会删除子表中的行。

```
FOREIGN KEY (parent_id)
        REFERENCES parent(id)
        ON UPDATE CASCADE 
```

# php - 如何在表单中提交 div

> ID：10578960
> 
> 赞同：0
> 
> 时间：2012-05-14T07:16:15.483
> 
> 标签：php, javascript, html, ckeditor

我正在使用 ckeditor 来编辑屏幕上看到的文本。信息取自数据库并以 div 元素写入屏幕，并且可以通过双击来编辑信息。但是，编辑后我无法获得编辑后的信息。这是我的代码，我尝试添加一个包含 div 元素的表单，但它不起作用。

```
<form  method="post">
                            <p>
                                Double-click any of the following <code>&lt;div&gt;</code> elements to transform them into
                                editor instances.</p>

                            <?php 
                                $makeleSql = 'SELECT * FROM makale';
                                $makaleRs = $con->func_query($makeleSql);
                                while ($makaleRow = mysql_fetch_array($makaleRs)) {
                                ?>
                                    <div class = "editable" id = <?php echo "content".$makaleRow['id'];?> style="display:none">
                                    <?php
                                        $contentSql = 'SELECT * FROM content WHERE makale_id ='.$makaleRow['id'];
                                        $contentRs = $con->func_query($contentSql);
                                        while ($contentRow = mysql_fetch_array($contentRs)) {
                                            echo $contentRow['icerik'].$makaleRow['id'];
                                        }
                                    ?>
                                    </div>

                            <?php } 
                            ?>
                            <button type="submit" value="Submit" onclick="getDiv();"/>

                        </form> 
```

我应该怎么做才能获取 div 元素中的信息？此外，我正在使用这个例子。 [http://nightly.ckeditor.com/7484/_samples/divreplace.html](http://nightly.ckeditor.com/7484/_samples/divreplace.html)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:58:07.993

为了保存表单的数据，您需要在输入/选择/文本区域中存储信息。div 和其他非表单的元素 not 将被存储。

您必须将数据存储在隐藏字段中：

```
<form  method="post">
    <p>
        Double-click any of the following <code>&lt;div&gt;</code> elements to transform them into
        editor instances.</p>

    <?php 
        $makeleSql = 'SELECT * FROM makale';
        $makaleRs = $con->func_query($makeleSql);
        while ($makaleRow = mysql_fetch_array($makaleRs)) {
        ?>
            <div class="editable" id="<?php echo "content".$makaleRow['id'];?>">
            <?php
                $contentSql = 'SELECT * FROM content WHERE makale_id ='.$makaleRow['id'];
                $contentRs = $con->func_query($contentSql);
                while ($contentRow = mysql_fetch_array($contentRs)) {
                    echo $contentRow['icerik'].$makaleRow['id'];
                    // store original text
                    echo '<input type="hidden" name="'.$makaleRow['id'].'" value="'.htmlspecialchars($contentRow['icerik'].$makaleRow['id']).'">;
                }
            ?>
            </div>

    <?php } 
    ?>
    <button type="submit" value="Submit" onclick="getDiv(this);"/>

</form>
<script>
var getDiv = function(btn) {
  for(var el in btn.form.elements) {
    var d = document.getElementById(btn.form.elements[el].name);
    btn.form.elements[el].value = d.innerHTML;
  }
  return true;
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T14:19:59.080

通常添加`<input type="hidden">`到任何`<div>`具有属性的`addToForm`内容，将内容复制到其中（请参阅下面的注释）：

```
<form method="post" id="f">
<div id="txt" addToForm="1" contenteditable spellcheck="true" style="height:100px;width:300px;font-family:arial,sans serif;border:1px solid black;font-weight:normal;overflow-y:auto;"
    </div><br />
<input type="button" value="Go" id="btnGo">
</form>
<script type="text/javascript">
$(document).ready(function(){
    $("#btnGo").click(function(){
        $("div[addToForm]").each(function(){
            var tId=$(this).prop("id");
            $(this).after("<input type='hidden' name='"+tId+"' id='hdn"+tId+"'>");
            $("#hdn"+tId).val($(this).html());
        });
        $("#f").submit();
    });
});
</script> 
```

注 1）如果您想去除内容的 HTML 格式，请使用`<textarea>`而不是`<input>` 注 2）确保首先成功完成验证，否则您将得到多个具有相同名称的隐藏输入

# php - 如何将数组从控制器发送到视图

> ID：10578961
> 
> 赞同：1
> 
> 时间：2012-05-14T07:16:18.383
> 
> 标签：php, arrays, codeigniter

我在控制器中有一个数组我必须将它发送到查看然后显示值

**控制器页面代码**

```
 public function showbookedmenu(){

 $rowLength=$this->input->post('rowno');
 $check=$this->input->post('checkeed');

    $j=0;
    for($i=1;$i<=$rowLength;$i++)
    {
        $check=$this->input->post('checkeed'.$i);

        if($check== "checked")
        {
        $orderedItem[$j][$i]   = $this->input->post('txtMenuItem'.$i);
        $orderedItem[$j][$i+1]  = $this->input->post('quantity'.$i);
        $orderedItem[$j][$i+2]    = $this->input->post('lebPrice'.$i); 
        $orderedItem[$j][$i+3]= $this->input->post('grandtotal'.$i); 
        $j++;
        }
        else{}
    }
    $data['order']= $orderedItem;
    $this->load->view('orderpage', $data);
 } 
```

**查看页面**

`What will be the code??`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T07:43:06.147

首先像这样重写你的控制器动作：

```
public function showbookedmenu()
{
  $rowLength = $this->input->post('rowno');    
  $orderedItem = array();

  for($i = 1; $i <= $rowLength; $i++)
  {
    $check = $this->input->post('checkeed'.$i);

    if($check == "checked")
    {
      $orderedItem[] = array(
        'menu_item' => $this->input->post('txtMenuItem'.$i),
        'quantity' => $this->input->post('quantity'.$i),
        'leb_price' => $this->input->post('lebPrice'.$i),
        'grand_total' => $this->input->post('grandtotal'.$i)
      );
    }
  }

  $data['order'] = $orderedItem;
  $this->load->view('orderpage', $data);
} 
```

然后在您看来，您可以这样做：

```
<? foreach($order as $order_item): ?>
  <? echo $order_item['menu_item']; ?>
  <? echo $order_item['quantity']; ?>
  <? echo $order_item['leb_price']; ?>
  <? echo $order_item['grand_total']; ?>
<? endforeach; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:23:57.993

首先尝试在视图文件中打印数组值..

```
print_r($order); 
```

如果一切顺利的话..

你可以给它

```
foreach ($order as $value): 
```

并使用它：

# android - Eclipse 中无法识别 Android 设备

> ID：10578962
> 
> 赞同：0
> 
> 时间：2012-05-14T07:16:19.693
> 
> 标签：android, eclipse, debugging, usb

我知道这是一个相当常见的问题，但我尝试了在其他帖子中找到的所有解决方案，但它们并没有为我解决问题。

基本上，我有一个三星 Galaxy S，它与 eclipse 配合得很好，所以我可以直接在我的智能手机上调试应用程序。

2天前我试了很久，系统无法识别设备，甚至`lsusb`找不到。

我尝试了一个朋友的智能手机，来自不同的品牌，它运行良好，所以我猜这与我的智能手机有关，但我无法弄清楚。

在手机上启用了调试，还有其他想法吗？我的操作系统是 Ubuntu。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:26:52.410

您必须删除存储调试和运行的数据我不知道它在哪里，因为我去年遇到了这个问题。

但是当我删除数据时，它又可以正常工作了

**编辑 ：**

找到了

```
C:\Users\UserName\.android 
```

删除

**调试密钥库**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:28:58.770

我猜三星 Galaxy S 驱动程序没有正确安装。在您的工作站中安装 pdanet 软件，安装时会要求将您的手机与 USB 连接，然后它将自动安装驱动程序。我认为它会为你工作。试试这个..[从这个链接你可以找到软件](http://download.cnet.com/PdaNet/3000-10440_4-75059341.html)

# django - 预填充 Django AdminSplitDateTime()

> ID：10578967
> 
> 赞同：0
> 
> 时间：2012-05-14T07:16:46.750
> 
> 标签：django, django-forms, django-admin

我有一个自定义表格如下

```
class ticketform( BootstrapForm ):
    class Meta:
        layout = ( 
            Fieldset( "", "project", "manager", "cc_to", "urgency", "deadline", "subject", "steps", "result", "desc", "file" ),
        )

    project = forms.CharField( max_length = 100, label = "Project", help_text = "Project this request is related to" )
    manager = UserModelChoiceField( queryset = User.objects.filter( is_active = True ).order_by( 'first_name' ), label = "Manager",
                                   help_text = "Immediate superior or project manager", required = True )
    cc_to = UserMultipleSelectField( queryset = User.objects.filter( is_active = True ).order_by( 'first_name' ), label = "CC To",
                                    widget = widgets.FilteredSelectMultiple( "Users", is_stacked = True ), required = False )
    OPTIONS = ( 
              ( 'Critical', 'Critical' ),
              ( 'Major', 'Major' ),
              ( 'Minor', 'Minor' ),
              )
    urgency = forms.ChoiceField( choices = OPTIONS, label = "Urgency", help_text = "Urgency of the request" )
    deadline = forms.CharField( widget = widgets.AdminSplitDateTime(), label = "Deadline",
                               help_text = "When should this ticket be completed", required = True )
    subject = forms.CharField( max_length = 100, label = "Subject", help_text = "Ticket Subject" )
    steps = forms.CharField( widget = forms.Textarea, label = "Steps", help_text = "Reproducible error/feature Steps" )
    result = forms.CharField( widget = forms.Textarea, label = "Result", help_text = "Expected Result" )
    desc = forms.CharField( widget = forms.Textarea, label = "Description", help_text = "Detailed Description" )
    file = forms.FileField( label = "File", help_text = "Attach File Max size 10MB", required = False ) 
```

我的视图中有以下代码来填充表单以供查看

```
def view_ticket( request, ticket_id ):
    ticket = Ticket.objects.filter( pk=ticket_id )[0]
    dict = {'project' : ticket.project,
            'manager' : ticket.manager.pk,
            'urgencry': ticket.urgency,
            'deadline': ticket.deadline,
            'subject' : ticket.subject,
            'steps'   : ticket.steps,
            'result'  : ticket.result,
            'desc'    : ticket.detailed_disc,
            'file'    : ticket.attachments,
            'cc_to'   : ticket.cc_to.all()
            }

    form = ticketform( dict )

    return render_to_response( 'form/request.html', {'form':form,
                                                         },
                                  mimetype="text/html", context_instance=RequestContext( request ) ) 
```

现在发生的事情是该`deadline`字段没有被填充（所有其他字段都被填充得很好）。尽管我将字典中的值传递给它。有没有办法预先填充`AdminSplitDateTime()`表单上的字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:44:34.730

为表单设置初始值，如 jpic 所指出的那样

# asp.net-mvc - 关于 ASP.NET SPA（单页应用程序）的担忧

> ID：10578972
> 
> 赞同：2
> 
> 时间：2012-05-14T07:17:11.883
> 
> 标签：asp.net-mvc, entity-framework, upshot, single-page-application, asp.net-spa

这是我对 ASP.NET SPA 的了解：

1.  必须使用 Upshot 与服务器对话；
2.  必须使用 DbDataController 来提供 Web API；
3.  必须先使用实体​​框架代码...

因此，出现了许多担忧：

1.  必须为结果提供元数据才能工作，这显然会暴露数据库的结构；
2.  我可以使用实体框架数据库优先而不是代码优先吗？你可能会问为什么。因为 Code First 不提供自定义数据库的能力（索引自定义、存储过程...等）；
3.  我遇到的一个问题：当我将“TestUpshot.edmx”文件（从数据库“northwind”生成）添加到 MySpaApp.Models 文件夹时（试图测试我是否可以使用 MyDbDataController 类中的 edmx 类，并在客户端），然后运行应用程序，出现异常：“System.ArgumentException：找不到 MySpaApp.Models.Categories 的概念模型类型。”...

在这里需要帮助，在此先感谢。

院长

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:01:27.720

我可能遗漏了一些东西，但不需要使用您列出的任何技术。

SPA 只是一种模式。你可以使用任何你需要的东西来实现它。选择某些技术（即模板、教程等）可能会有好处。

并不能真正回答你的问题，但应该引导你尝试你所拥有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:15:41.603

SPA 实际上是一种概念化客户端应用程序的方法。SPA 最接近胖客户端——来自当前 Web 方法的数据服务器概念。毫无疑问，这将在几年内成为主导概念。

您可以使用[http://jaydata.codeplex.com 上的 JayData](http://jaydata.codeplex.com)解决您的问题，它为 JavaScript 提供针对任何类型的 EntityFramework 后端（数据库、模型或代码优先）的高级、高级数据访问。观看[此视频](http://www.youtube.com/watch?v=LlJHgj1y0CU&feature=endscreen)，该视频展示了从 SQL 导入 EDMX（这也可能是模型优先定义）到从 JavaScript 在 Products 表中插入新产品项目的整个周期。

# c# - 应用程序图标显示与任务栏

> ID：10578977
> 
> 赞同：0
> 
> 时间：2012-05-14T07:17:44.300
> 
> 标签：c#, windows, windows-7, windows-services

> **可能重复：**
> [使用 .net 和 c# 从任务栏中删除应用程序图标](https://stackoverflow.com/questions/10578636/remove-application-icon-from-the-taskbar-using-net-with-c-sharp)

我正在使用此代码将窗口应用程序表单图标添加到任务栏

```
 ResourceManager resManager = new ResourceManager("SMSLAgent.Properties.Resources", GetType().Module.Assembly);
                notifyicon.Icon = (Icon)resManager.GetObject("SMSLAgent");
                notifyicon.Visible = true;
                notifyicon.Text = "PA Agent";
                this.Hide();
                this.ShowInTaskbar = false;
                this.SetVisibleCore(false); 
```

此代码添加在 asp.net windows 窗体应用程序初始化方法中。它可以工作，但问题是，我在 windows7 中使用具有管理员权限的 windows 服务运行 windows 窗体 exe。

在 Windows 重新启动时，不会添加显示为 Windows 窗体应用程序的图标，但是当我重新启动 Windows 服务时它工作正常。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:09:58.207

这显然与登录（未登录）有关。这可以通过启用自动登录并确保在启动后显示图标来检查。通过 RDP 登录并点击不同的会话可能会发生同样的事情。我们有一些软件显示这样的图标，不得不使用“mstsc /console”。鉴于允许服务与桌面交互（即使以某种间接的方式）无论如何都是不受欢迎的，并且 winform 应用程序将在 Windows Server XXX 下拥有自己的桌面（不记得是哪个，但它与您将看到的不同）在 XP 中；尝试显示一个窗口并查看），我们使用了一个可作为完全非交互式服务或带有图标的 winforms 启动的应用程序（后者是手动或计划的）。

仍然不是一个完整的答案，但我希望它会帮助得到一个。

# c - 在 ansic 中使用 fgets 打开文件时出错

> ID：10578981
> 
> 赞同：2
> 
> 时间：2012-05-14T07:18:01.847
> 
> 标签：c

我正在尝试使用 c 创建/打开文件。我使用 fgets 命令输入名称，所以我不能溢出缓冲区，如下所示：

```
void main() {
    printf("Enter file name: ");
    char * fileName = (char *) calloc(MAX_BUFFER_SIZE, sizeof(char));
    fgets(fileName, MAX_BUFFER_SIZE, stdin);
    FILE *inputFile = fopen(fileName, "w");
    if(inputFile==NULL) perror(fileName);
} 
```

使用调试器，我可以看到我为文件名输入的值是我希望的值，但是 fopen 函数返回 NULL 指针并且我得到“无效参数”错误。如果我改用`scanf("%s", fileName)`没有问题并且文件已创建，但这样我可能会溢出缓冲区。任何想法为什么第一个示例不起作用？提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T07:19:48.493

读取的字符串`fgets`末尾可能有换行符。您必须先将其删除，然后才能使用`fopen`.

[如何删除最后的换行符？](https://stackoverflow.com/questions/2693776/removing-trailing-newline-character-from-fgets-input)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T07:21:59.017

`fgets()`处理换行符的方式与`scanf("%s")`or不同`gets()`。与它们不同，`fgets()`在字符串中包含换行符。输入文件名后，您按下回车键，这可能会将换行符包含在您的文件名中，因此使其无效。

# c# - 在特定位置插入 XML 节点

> ID：10578983
> 
> 赞同：4
> 
> 时间：2012-05-14T07:18:12.893
> 
> 标签：c#, asp.net, .net, xml, vb.net

我有一个 XML 文件，我正在将它加载到 Xmldocument 中。该文档有一个带有一些子节点的节点，如下所示

```
<xml here>
 <somenode>
   <child> </child>
   <children></children>
   <children></children>
   <children></children>  // I need to insert it
   <children></children>  // I need to insert this second time
   <children></children>
   <children></children>
   <child> </child>
 <somenode>
<xml here> 
```

这里 somenode 有一些子节点，其中第一个和最后一个子节点名称相同，而除了第一个和最后一个节点之外的其他节点具有一些不同的名称（彼此相同）。我正在创建一个在特定位置插入节点的函数，我不确定标准，但可能在中间。

*   如何在特定位置插入节点。我正在使用 XMLnode.appendChild 方法进行插入
*   插入后是否需要重新排列/排序节点。请建议。
*   如何确定什么是结构，以及如何根据当前文档结构找到应该添加新节点的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-27T14:48:40.707

这是一个**不使用 LINQ to XML**的解决方案。它被实现为`XmlNode`类的扩展方法：

```
public static void InsertAt(this XmlNode node, XmlNode insertingNode, int index = 0)
{
    if(insertingNode == null)
        return;
    if (index < 0)
        index = 0;

    var childNodes = node.ChildNodes;
    var childrenCount = childNodes.Count;

    if (index >= childrenCount)
    {
        node.AppendChild(insertingNode);
        return;
    }

    var followingNode = childNodes[index];

    node.InsertBefore(insertingNode, followingNode);
} 
```

现在，您可以在所需位置插入一个节点，如下所示：

```
 parentXmlNode.InsertAt(childXmlNode, 7); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:34:58.257

您可以使用 Xlinq[修改 XML 文档](http://blogs.msdn.com/b/wriju/archive/2008/04/04/linq-to-xml-modifying-xml-document.aspx)

下面是一个xml修改的例子

```
 String xmlString = "<?xml version=\"1.0\"?>"+"<xmlhere>"+
    "<somenode>"+
    " <child> </child>"+
    " <children>1</children>"+ //1
    " <children>2</children>"+ //2
    " <children>3</children>"+ // 3, I need to insert it
    " <children>4</children>"+  //4,  I need to insert this second time
    " <children>5</children>"+
    " <children>6</children>"+ 
    " <child> </child>"+
    " </somenode>"+
    "</xmlhere>";

    XElement root = XElement.Parse(xmlString);
    var childrens = root.Descendants("children").ToArray();
    var third = childrens[3];
    var fourth = childrens[4];
    third.AddBeforeSelf(new XElement("children"));
    fourth.AddBeforeSelf(new XElement("children"));

    var updatedchildren = root.Descendants("children").ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T07:29:51.920

[http://www.c-sharpcorner.com/Forums/Thread/55428/how-to-insert-xml-child-node-programmatically.aspx](http://www.c-sharpcorner.com/Forums/Thread/55428/how-to-insert-xml-child-node-programmatically.aspx) 看看吧！我想它会帮助你。

# java - 什么是 Java 字符串实习？

> ID：10578984
> 
> 赞同：268
> 
> 时间：2012-05-14T07:18:14.507
> 
> 标签：java, string, string-interning

什么是Java 中的**字符串实习**，什么时候应该使用它，**为什么**？

* * *

## 回答 #1

> 赞同：274
> 
> 时间：2012-05-14T07:24:05.150

[http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29)

基本上对一系列字符串执行 String.intern() 将确保所有具有相同内容的字符串共享相同的内存。因此，如果您有 'john' 出现 1000 次的名称列表，则通过实习可以确保只有一个 'john' 实际分配了内存。

这对于减少程序的内存需求很有用。但请注意，缓存由 JVM 维护在永久内存池中，与堆相比，其大小通常有限，因此如果您没有太多重复值，则不应使用实习生。

* * *

更多关于使用 intern() 的内存限制

> 一方面，确实可以通过内化 String 重复项来删除它们。问题是内部化的字符串进入了永久代，这是 JVM 中为非用户对象（如类、方法和其他内部 JVM 对象）保留的区域。这个区域的大小是有限的，通常比堆小得多。在 String 上调用 intern() 具有将其从堆移到永久代的效果，并且您可能会耗尽 PermGen 空间。

-- 来自： http: [//www.codeinstructions.com/2009/01/busting-javalangstringintern-myths.html](http://www.codeinstructions.com/2009/01/busting-javalangstringintern-myths.html)

* * *

从 JDK 7（我的意思是在 HotSpot 中）开始，有些事情发生了变化。

> 在 JDK 7 中，interned 字符串不再分配在 Java 堆的永久代中，而是与应用程序创建的其他对象一起分配在 Java 堆的主要部分（称为年轻代和年老代）中. 此更改将导致更多数据驻留在主 Java 堆中，而永久代中的数据更少，因此可能需要调整堆大小。由于此更改，大多数应用程序只会看到相对较小的堆使用差异，但加载许多类或大量使用 String.intern() 方法的大型应用程序将看到更显着的差异。

-- 来自[Java SE 7 的特性和增强](http://www.oracle.com/technetwork/java/javase/jdk7-relnotes-418459.html)

更新：从 Java 7 开始，内部字符串存储在主堆中。[http://www.oracle.com/technetwork/java/javase/jdk7-relnotes-418459.html#jdk7changes](http://www.oracle.com/technetwork/java/javase/jdk7-relnotes-418459.html#jdk7changes)

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2015-06-01T14:30:31.577

有一些“吸引人的面试”问题，比如为什么你会得到*平等！*如果您执行以下代码。

```
String s1 = "testString";
String s2 = "testString";
if(s1 == s2) System.out.println("equals!"); 
```

如果你想比较字符串，你应该使用`equals()`. 上面将打印 equals 因为编译器`testString`已经为你**实习了。**您可以使用 intern 方法自己对字符串进行实习，如先前的答案所示......

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2016-02-12T11:04:09.563

## 捷豹路虎

[JLS 7 3.10.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)对其进行了定义并给出了一个实际示例：

> 此外，字符串字面量总是引用 String 类的同一个实例。这是因为字符串字面量 - 或者更一般地说，作为常量表达式值的字符串（第 15.28 节） - 是“内部的”，以便使用 String.intern 方法共享唯一实例。
> 
> **示例 3.10.5-1。字符串文字**
> 
> 由编译单元组成的程序（§7.3）：
> 
> ```
> package testPackage;
> class Test {
>     public static void main(String[] args) {
>         String hello = "Hello", lo = "lo";
>         System.out.print((hello == "Hello") + " ");
>         System.out.print((Other.hello == hello) + " ");
>         System.out.print((other.Other.hello == hello) + " ");
>         System.out.print((hello == ("Hel"+"lo")) + " ");
>         System.out.print((hello == ("Hel"+lo)) + " ");
>         System.out.println(hello == ("Hel"+lo).intern());
>     }
> }
> class Other { static String hello = "Hello"; } 
> ```
> 
> 和编译单元：
> 
> ```
> package other;
> public class Other { public static String hello = "Hello"; } 
> ```
> 
> 产生输出：
> 
> ```
> true true true true false true 
> ```

## 虚拟机

[JVMS 7 5.1 说](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.1)实习是通过专用`CONSTANT_String_info`结构神奇而有效地实现的（与大多数其他具有更通用表示的对象不同）：

> 字符串字面量是对 String 类实例的引用，它派生自类或接口的二进制表示形式的 CONSTANT_String_info 结构（第 4.4.3 节）。CONSTANT_String_info 结构给出了构成字符串文字的 Unicode 代码点序列。
> 
> Java 编程语言要求相同的字符串文字（即包含相同代码点序列的文字）必须引用 String 类的相同实例（JLS §3.10.5）。此外，如果对任何字符串调用 String.intern 方法，则结果是对同一类实例的引用，如果该字符串以文字形式出现，则会返回该类实例。因此，以下表达式的值必须为 true：
> 
> ```
> ("a" + "b" + "c").intern() == "abc" 
> ```
> 
> 为了派生字符串文字，Java 虚拟机检查 CONSTANT_String_info 结构给出的代码点序列。
> 
> *   如果先前已在包含与 CONSTANT_String_info 结构给出的相同的 Unicode 代码点序列的类 String 的实例上调用了方法 String.intern，则字符串字面量推导的结果是对同一类 String 实例的引用。
>     
>     
> *   否则，将创建一个 String 类的新实例，其中包含由 CONSTANT_String_info 结构给出的 Unicode 代码点序列；对该类实例的引用是字符串文字派生的结果。最后，调用新 String 实例的 intern 方法。

## 字节码

让我们反编译一些 OpenJDK 7 字节码，看看实习的效果。

如果我们反编译：

```
public class StringPool {
    public static void main(String[] args) {
        String a = "abc";
        String b = "abc";
        String c = new String("abc");
        System.out.println(a);
        System.out.println(b);
        System.out.println(a == c);
    }
} 
```

我们在常量池上有：

```
#2 = String             #32   // abc
[...]
#32 = Utf8               abc 
```

和`main`：

```
 0: ldc           #2          // String abc
 2: astore_1
 3: ldc           #2          // String abc
 5: astore_2
 6: new           #3          // class java/lang/String
 9: dup
10: ldc           #2          // String abc
12: invokespecial #4          // Method java/lang/String."<init>":(Ljava/lang/String;)V
15: astore_3
16: getstatic     #5          // Field java/lang/System.out:Ljava/io/PrintStream;
19: aload_1
20: invokevirtual #6          // Method java/io/PrintStream.println:(Ljava/lang/String;)V
23: getstatic     #5          // Field java/lang/System.out:Ljava/io/PrintStream;
26: aload_2
27: invokevirtual #6          // Method java/io/PrintStream.println:(Ljava/lang/String;)V
30: getstatic     #5          // Field java/lang/System.out:Ljava/io/PrintStream;
33: aload_1
34: aload_3
35: if_acmpne     42
38: iconst_1
39: goto          43
42: iconst_0
43: invokevirtual #7          // Method java/io/PrintStream.println:(Z)V 
```

注意如何：

*   `0`和`3`：加载相同`ldc #2`的常量（文字）
*   `12`：创建一个新的字符串实例（`#2`作为参数）
*   `35`:`a`并`c`作为常规对象与`if_acmpne`

常量字符串的表示在字节码上非常神奇：

*   它有一个专用的[CONSTANT_String_info](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.4.3)结构，不像常规对象（例如`new String`）
*   该结构指向包含数据的[CONSTANT_Utf8_info 结构。](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.4.7)这是表示字符串的唯一必要数据。

并且上面的 JVMS 引用似乎是说，只要指向的 Utf8 相同，那么相同的实例就会被加载`ldc`。

我对字段进行了类似的测试，并且：

*   `static final String s = "abc"`[通过ConstantValue 属性](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7.2)指向常量表
*   非最终字段没有该属性，但仍可以使用`ldc`

**结论**：字符串池有直接字节码支持，内存表示高效。

奖励：将其与没有直接字节码支持（即没有模拟）的[Integer pool进行比较。](https://stackoverflow.com/questions/13098143/java-integer-constant-pool)`CONSTANT_String_info`

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2018-08-04T10:53:05.930

**Java 8 或以上版本的更新**。在 Java 8 中，PermGen（永久代）空间被移除并被 Meta Space 取代。字符串池内存被移动到 JVM 的堆中。

与 Java 7 相比，堆中的字符串池大小有所增加。因此，您有更多空间用于内部化字符串，但您对整个应用程序的内存更少。

还有一件事，你已经知道在Java中比较2个对象（的引用）时，''用于比较`==`对象的引用，' `equals`'用于比较对象的内容。

让我们检查一下这段代码：

```
String value1 = "70";
String value2 = "70";
String value3 = new Integer(70).toString(); 
```

结果：

`value1 == value2` ---> 真的

`value1 == value3` ---> 假的

`value1.equals(value3)` ---> 真的

`value1 == value3.intern()`---> 真的

这就是为什么你应该使用 ' `equals`' 来比较 2 个 String 对象。这`intern()`就是有用的方式。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-03-07T19:37:44.000

由于字符串是对象，并且由于 Java 中的所有对象始终只存储在堆空间中，因此所有字符串都存储在堆空间中。但是，Java 将不使用 new 关键字创建的字符串保存在堆空间的一个特殊区域中，该区域称为“字符串池”。Java 将使用 new 关键字创建的字符串保存在常规堆空间中。

字符串池的目的是维护一组唯一的字符串。每当您不使用 new 关键字创建新字符串时，Java 都会检查字符串池中是否已存在相同的字符串。如果是，Java 返回对同一个 String 对象的引用，如果不是，Java 在字符串池中创建一个新的 String 对象并返回它的引用。因此，例如，如果您在代码中使用字符串“hello”两次，如下所示，您将获得对同一字符串的引用。我们实际上可以通过使用**==**运算符比较两个不同的参考变量来测试这个理论，如下面的代码所示：

```
String str1 = "hello";
String str2 = "hello";
System.out.println(str1 == str2); //prints true

String str3 = new String("hello");
String str4 = new String("hello");

System.out.println(str1 == str3); //prints false
System.out.println(str3 == str4); //prints false 
```

**==**运算符只是检查两个引用是否指向同一个对象，如果指向同一个对象，则返回 true。在上面的代码中，**str2**获取对之前创建的同一个 String 对象的引用。但是，**str3**和**str4**获得对两个完全不同的 String 对象的引用。这就是为什么**str1 == str2**返回 true 但**str1 == str3**和**str3** **== str4**返回 false 的原因。事实上，当你做**new String("hello");**如果这是第一次在程序中的任何地方使用字符串“hello”，则会创建两个 String 对象，而不是仅创建一个 - 一个在字符串池中，因为使用了带引号的字符串，一个在常规堆空间中，因为新关键字的使用。

字符串池是 Java 通过避免创建包含相同值的多个字符串对象来节省程序内存的方法。可以使用 String 的 intern 方法从字符串池中为使用 new 关键字创建的字符串获取字符串。它被称为字符串对象的“实习”。例如，

```
String str1 = "hello";
String str2 = new String("hello");
String str3 = str2.intern(); //get an interned string obj

System.out.println(str1 == str2); //prints false
System.out.println(str1 == str3); //prints true 
```

*[OCP Java SE 11 程序员，Deshmukh](https://www.amazon.com.au/Certified-Professional-Programmer-Fundamentals-1Z0-815-ebook/dp/B07VWMD2LB)*

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-09-24T04:51:15.747

字符串实习是编译器的一种优化技术。如果在一个编译单元中有两个相同的字符串字面量，则生成的代码可确保在程序集中为该字面量的所有实例（用双引号括起来的字符）只创建一个字符串对象。

我来自 C# 背景，所以我可以举一个例子来解释：

```
object obj = "Int32";
string str1 = "Int32";
string str2 = typeof(int).Name; 
```

以下比较的输出：

```
Console.WriteLine(obj == str1); // true
Console.WriteLine(str1 == str2); // true    
Console.WriteLine(obj == str2); // false !? 
```

**注1**：对象通过引用进行比较。

**Note2** :typeof(int).Name 是通过反射方法评估的，因此它不会在编译时进行评估。**这里这些比较是在编译时进行的。**

**结果分析：** 1) 正确，因为它们都包含相同的文字，因此生成的代码将只有一个引用“Int32”的对象。**见注 1**。

2) true 因为两个值的内容被检查是相同的。

3) FALSE 因为 str2 和 obj 没有相同的文字。见**注 2**。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-31T16:59:45.090

```
Java interning() method basically makes sure that if String object is present in SCP, If yes then it returns that object and if not then creates that objects in SCP and return its references

for eg: String s1=new String("abc");
        String s2="abc";
        String s3="abc";

s1==s2// false, because 1 object of s1 is stored in heap and other in scp(but this objects doesn't have explicit reference) and s2 in scp
s2==s3// true

now if we do intern on s1
s1=s1.intern() 

//JVM checks if there is any string in the pool with value “abc” is present? Since there is a string object in the pool with value “abc”, its reference is returned.
Notice that we are calling s1 = s1.intern(), so the s1 is now referring to the string pool object having value “abc”.
At this point, all the three string objects are referring to the same object in the string pool. Hence s1==s2 is returning true now. 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-11T13:06:31.300

通过使用堆对象引用，如果我们想要对应的 SCP 对象引用，我们应该使用 intern() 方法。

**示例**：

```
class InternDemo
{
public static void main(String[] args)
{
String s1=new String("smith");
String s2=s1.intern();
String s3="smith";
System.out.println(s2==s3);//true
}
} 
```

[实习生流程图](https://i.stack.imgur.com/GvuIq.png)

# sql - 主键、候选键和超级键

> ID：10578985
> 
> 赞同：0
> 
> 时间：2012-05-14T07:18:14.750
> 
> 标签：sql, database-design, primary-key, create-table

我有下表，我想知道如何获取主键、超键和候选键。

我知道候选键是超级键的最小值。

这会是正确的主键`PlaceId CountyId`、候选键`PlaceId, CountyId, Date`和超键`PlaceId, CountyId, Date, Attendees`吗？

```
CREATE TABLE IF NOT EXISTS `visits` (
  `PlaceId` varchar(45) DEFAULT NULL,
  `CountyId` varchar(45) DEFAULT NULL,
  `Date` date NOT NULL,
  `Attendees` varchar(45) DEFAULT NULL,

INSERT INTO `visits` (`PlaceId`, `CountyId`, `Date`, `Attendees`) VALUES
('Bangor', 'Gwynedd', '2012-05-03', '34'),
('Bangor', 'Gwynedd', '2012-05-04', '24'),
('Rhyl', 'Denbighshire', '2012-05-06', '14'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:51:57.063

根据您提供的样本数据，以及我对什么*地方*、*县*、 *date*和*参加者*的含义的理解，唯一的候选键是 {PlaceId, CountyId, Date}。

由于只有一个候选键，因此该候选键也必须是主键。

所有属性的集合是一个普通的超键。所以一个超级键是 {PlaceId, CountyId, Date, Attendees}。另一个是 {PlaceId, CountyId, Date}。

# vb.net - 向整数数组添加新值 (Visual Basic 2010)

> ID：10578993
> 
> 赞同：6
> 
> 时间：2012-05-14T07:18:41.130
> 
> 标签：vb.net, arrays

我有一个动态整数数组，我希望向其中添加新值。我该怎么做？

```
Dim TeamIndex(), i As Integer

For i = 0 to 100
    'TeamIndex(i).Add = <some value>
Next 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T07:32:53.920

使用 ReDim 和 Preserve 来增加数组的大小并保留旧值。

当您不知道大小并且知道要逐个增加数组大小时，建议使用循环中的 ReDim。

```
Dim TeamIndex(), i As Integer

For i = 0 to 100
     ReDim Preserve TeamIndex(i)
    TeamIndex(i) = <some value>
Next 
```

如果您稍后在镜头中的代码中声明数组的大小，请使用

```
 ReDim TeamIndex(100) 
```

所以代码将是：

```
Dim TeamIndex(), i As Integer
ReDim TeamIndex(100)
For i = 0 to 100
    TeamIndex(i) = <some value>
Next 
```

您可以使用 ArrayList/List(Of T) 更动态地使用添加/删除值。

```
 Sub Main()
    ' Create an ArrayList and add three strings to it.
    Dim list As New ArrayList
    list.Add("Dot")
    list.Add("Net")
    list.Add("Perls")
    ' Remove a string.
    list.RemoveAt(1)
    ' Insert a string.
    list.Insert(0, "Carrot")
    ' Remove a range.
    list.RemoveRange(0, 2)
    ' Display.
    Dim str As String
    For Each str In list
        Console.WriteLine(str)
    Next
    End Sub 
```

[列表（T） MSDN](https://msdn.microsoft.com/en-us/library/6sh2ey19(v=vs.110).aspx)

[List(Of T) DotNetperls](http://www.dotnetperls.com/list)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T09:24:09.110

我认为Romil的回答没有任何错误，但我会更进一步。 `ReDim Preserve`是一个非常有用的命令，但重要的是要意识到它是一个昂贵的命令并明智地使用它。

考虑：

```
Dim TeamIndex(), i As Integer
For i = 0 to 100
  ReDim Preserve TeamIndex(i)
  TeamIndex(i) = <some value>
Next 
```

对于每个循环，除了 i=0，公共语言运行时 (CLR) 必须：

*   为比前一个数组大一个元素的新整数数组找到空间
*   复制前一个数组中的值
*   初始化新元素
*   释放前一个数组进行垃圾回收。

`ArrayList`如果您需要从数组中间添加或删除元素，但即使您不需要它，您也要为该功能付费。例如，如果您正在从文件中读取值并按顺序存储它们，但事先不知道会有多少值，`ArrayList`则可以避免大量开销。

我总是这样使用`ReDim`：

```
Dim MyArray() As XXX
Dim InxMACrntMax As Integer

ReDim MyArray(1000)
InxMACrntMax=-1

Do While more data to add to MyArray

  InxMACrntMax = InxMACrntMax + 1
  If InxMACrntMax > UBound(MyArray) Then
    ReDim Preserve MyArray(UBound(MyArray)+100)
  End If
  MyArray(InxMACrntMax) = NewValue

Loop                

ReDim MyArray(InxMACrntMax)    ' Discard excess elements 
```

上面我使用了 100 和 1000。我选择的值取决于我对可能要求的评估。

# c# - 如何使用泛型解决强制转换问题

> ID：10578995
> 
> 赞同：1
> 
> 时间：2012-05-14T07:18:42.780
> 
> 标签：c#, generics

我有以下情况：

```
public interface IParam
{
    Object Value {get;set;}
} 

public abstract class BaseClass: IParam
{
    public virtual object Value {get;set;}
}

public class IntSubClass:BaseClass
{
    public override object Value {get;set;}
} 
```

对外，这个接口是暴露的。所有属性都通过 IParam 访问。这种方法的缺点是很多铸造问题。

```
IParam dummy = ParameterList[abc];
int index = (int)dummy.Value; 
```

请求请告知如何使用泛型解决此问题。对外，我只能暴露泛型接口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:29:14.787

如果我们假设参数可以是不同的类型，那么简单地说：不。

哦，你可以引入泛型......但这只是改变了事情

```
int val = (int)(paramList["abc"].Value); 
```

到：

```
int val = ((IParam<int>)paramList["abc"]).Value; 
```

并没有太大帮助。唯一的其他选择是隐式转换运算符，其中 a: 不适用于`interface`s 和 b: 不是很清楚/明显。

坦率地说，我只是使用演员表。这不是问题。一个盒子/拆箱并不是非常昂贵，而且代码的目的很明确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:28:16.177

您可以创建一个`IParam<T>`具有`T Value {get; set;}`方法的接口。这能解决你的问题吗？您将无法投射到 IParam，而是传递正确的 IParam/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T07:37:53.197

如果在内部您必须将所有类型的参数放在一个列表中，那么，您只能通过它们的公共基类型来访问它们。

您可以在内部将参数保存在单独的列表中，每个列表都具有某种类型，但这在您的场景中可能是一种矫枉过正的做法。

# extjs - Sencha Touch 2 Panel w/ Template 包括数据和对象

> ID：10578998
> 
> 赞同：0
> 
> 时间：2012-05-14T07:18:54.037
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我想知道是否可以在 Sencha Touch 2 的模板中同时包含数据并创建一个新对象？

我有以下代码：

```
Ext.define('MyApp.view.VideosDetail', {
extend: 'Ext.Panel',
xtype: 'videosdetail',

config: {
    title: 'Details',
    styleHtmlContent: true,
    scrollable: 'vertical',
    tpl: [
        '{content}',
        {
            xtype: 'video',
            width: 400,
            height: 400,
            url: '{link}'
        }
    ]
}
}); 
```

我看到`[object Object]`的不是带有链接 url 的视频对象。

通过`{content}`商店等可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:39:14.000

Ok, two things you have to remember

1.  You cannot use a complicated object inside of the tpl in the manner you just did. In Sencha Touch, adding a "," followed by a "{ . . . }" after the tpl strings implies adding member functions or configurations to your XTemplate. In this case, ST misunderstood your object to be a member function of sorts, and didn't display anything since you didnt call any function.

Example of member functions ::

```
var tpl = new Ext.XTemplate(
'<p>Name: {name}</p>',
'<p>Kids: ',
'<tpl for="kids">',
    '<tpl if="this.isGirl(name)">',
        '<p>Girl: {name} - {age}</p>',
    '<tpl else>',
        '<p>Boy: {name} - {age}</p>',
    '</tpl>',
    '<tpl if="this.isBaby(age)">',
        '<p>{name} is a baby!</p>',
    '</tpl>',
'</tpl></p>',
{
    // XTemplate configuration:
    disableFormats: true,
    // member functions:
    isGirl: function(name){
       return name == 'Sara Grace';
    },
    isBaby: function(age){
       return age < 1;
    }
}
); 
```

2.  If you have a complex tpl object, always try to create a separate XTemplate object instead, that will make your code simple and beautiful (ie easy to read)

3.  I have done something similar and added videos to my XTemplate before. But I haven't used the video object. Instead, my tpl that I created looks as follows ::

    ![Sorry I couldnt paste in the code, but StackOverflow was assuming it was html, and actually showing me the tpl output instead :P ](../Images/2427e1deabfb805b50ab9c658716f233.png)

In my scenario, the url of my video was composed of two parts, vurl1 was something common like "www.youtube.com/watch?" and the vcode1 was the dynamic code that followed.