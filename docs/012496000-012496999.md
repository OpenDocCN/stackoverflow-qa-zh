# StackOverflow 问答 12496000-12496999

# android - 在 listView 上延迟加载 imageView

> ID：12496000
> 
> 赞同：0
> 
> 时间：2012-09-19T13:41:43.303
> 
> 标签：android, listview, progress-bar, lazy-loading

我已经有这个问题很长一段时间了。我一点一点地到达那里，但我没有太多时间花在编程上:(

所以我不得不从 URL 加载图像以显示在列表视图上，而且我几乎就在那里。它们是延迟加载，我使用的缓存系统运行良好。问题是当我开始滚动时下载的图像在错误的位置，我无法弄清楚我哪里出错了。

代码的灵感来自这两个链接： 这一个用于布局想法。
[http://blog.blundell-apps.com/imageview-with-loading-spinner/](http://blog.blundell-apps.com/imageview-with-loading-spinner/)
这个用于缓存系统。
[http://android-developers.blogspot.fr/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.fr/2010/07/multithreading-for-performance.html)

所以这是我的**代码**：

```
public class LoaderImageView extends LinearLayout
{

private static final String TAG = "LoderImageView";

private Context mContext;

private ImageView mImage;
private ProgressBar mSpinner;

/* The HashMap that contains the references to the different 
 * downloads currently running.
 */
public static HashMap<LoaderImageView, BitmapDownloaderTask> tasks =
        new LinkedHashMap<LoaderImageView, BitmapDownloaderTask>();

public LoaderImageView(Context context, AttributeSet attrs)
{
    super(context, attrs);
    mContext = context;

    mImage = new ImageView(mContext);
    mImage.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));

    mSpinner = new ProgressBar(mContext);
    mSpinner.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT));

    mSpinner.setIndeterminate(true);

    addView(mSpinner);
    addView(mImage);

    Log.w(TAG, "Loading an imageView");
}

public void downloadImage(String url)
{
    resetPurgeTimer();

    //Log.w(TAG, "Loading: " + url);

    if(url.equals(""))
    {
        mImage.setImageDrawable(mContext.getResources().getDrawable(R.drawable.male));
    }
    else
    {

        Bitmap bitmap = getBitmapFromCache(url);

        if(bitmap == null)
        {
            /* The bitmap is not in the cache. */
            cancelPotentialDownload(this);

            /* Start the new download. */
            BitmapDownloaderTask bdt = new BitmapDownloaderTask(this, url);
            bdt.execute();
        }
        else
        {
            /*The bitmap is in the cache. */
            mImage.setImageBitmap(bitmap);
            mSpinner.setVisibility(View.GONE);
        }
    }

}

class BitmapDownloaderTask extends AsyncTask<Void, Void, Bitmap>
{
    private String mUrl;
    private LoaderImageView mLiv;

    public BitmapDownloaderTask(LoaderImageView liv, String url)
    {
        mLiv = liv;
        mUrl = url;
    }

    @Override
    protected void onPreExecute()
    {
        LoaderImageView.tasks.put(mLiv, this);
        mSpinner.setVisibility(View.VISIBLE);
        mImage.setVisibility(View.GONE);
        Log.w(TAG, "Starting an AsyncTask");
    }

    @Override
    protected Bitmap doInBackground(Void... voids)
    {
        URL url = null;

        try
        {
            url = new URL(mUrl);
        }
        catch (MalformedURLException e)
        {
            e.printStackTrace();
        }

        return BitmapTools.fetchBitmap(url);
    }

    @Override
    protected void onPostExecute(Bitmap bitmap)
    {
        BitmapDownloaderTask b = tasks.get(mLiv);

        if(b == this)
        {
            LoaderImageView.tasks.remove(this);
            mImage.setImageBitmap(bitmap);
        }

        if (isCancelled())
        {
            bitmap = null;
        }

        addBitmapToCache(mUrl, bitmap);
        tasks.remove(mLiv);
        mSpinner.setVisibility(View.GONE);
        mImage.setVisibility(View.VISIBLE);
    }
} 
```

/* 更多与缓存相关的方法... */

这里的**xml**布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="60dp"
    android:background="@drawable/list_item_selector" >

    <com.myproject.liste.LoaderImageView
        android:id="@+id/visites_image"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true" />
</RelativeLayout> 
```

我正在使用 BaseAdapter 和 ListActivity 创建列表。此外，我正在按数据页加载列表：我加载 10 个项目，当用户向下滚动时，我再加载 10 个，然后调用 notifyDataSetChange();

# sql - 遇到 where 子句时的平均值

> ID：12496004
> 
> 赞同：1
> 
> 时间：2012-09-19T13:41:56.893
> 
> 标签：sql

我想找到符合标准的字段的平均数量。它嵌入在一个大表中，但我希望这个平均字段在那里而不是在单独的表中进行。

这是我到目前为止所拥有的：

```
Select....
Avg( (currbal) where (select * from table 
                       where ament2 in ('r1','r2'))
From table 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:55:30.210

如果您只想对查询的子集进行 AVG，用于`case when ... then`将不匹配行中的值替换为空值，因为空值会被 avg() 忽略。

```
Select id,
       sum(something) SomethingSummed,
       avg(case when ament2 in ('r1','r2') then currbal end) CurrbalAveragedForR1R2
  From [table]
 group by id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:49:58.757

您可以将要嵌入到语句中的所有其他总和放在子句`AVG`内的表引用中。`FROM`就像是：

```
SELECT AVG(currbal)
FROM
(
    SELECT * -- other sums
    FROM table
    WHERE ament2 IN ('r1','r2')
) t 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T13:51:29.170

您可以将完整的子选择写入选择列表：

```
SELECT ...,
       (SELECT AVG(Currbal) FROM Table WHERE ament2 IN ('r1', 'r2')) AS avg_currbal,
       ...
  FROM ... 
```

这是否会完全符合您的要求取决于很多事情。你可能需要把它变成一个相关的子查询；假设“ament2”在表中，目前它不是相关的子查询。

# spring - 如何在没有 JSP 的情况下显示错误

> ID：12496008
> 
> 赞同：4
> 
> 时间：2012-09-19T13:42:09.867
> 
> 标签：spring, spring-mvc

我有一个带有`List<Object>`as 的jsp 页面`@ModelAttribute`。但是，页面中没有`<form:form>`标签。我所做的就是打印`List`.

在我的`Controller.java`中，我通过执行以下操作绑定了一个错误：

`result.rejectValue("", "NOT_LOGGED_IN", "You should Login first") ;`

但是由于我的 jsp 中没有表单，因此我无法通过以下方式访问错误：

`<form:errors path="" /> <br/>`

请告诉我如何访问错误（或我做错了什么）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T13:48:31.783

在您的控制器中：

```
model.addAttribute("errors", result.getAllErrors()); 
```

在您的 JSP 中：

```
<c:forEach items="${errors}" var="error">
    <%-- do want you want with ${error} --%>
    <c:out value="${error.defaultMessage}" />
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T13:53:08.237

以这种方式关联全局错误：

```
result.reject("NOT_LOGGED_IN", "You should Login first") ; 
```

您可以在 jsp 中显示全局错误：

```
<form:errors cssClass="error" delimiter="&lt;p/&gt;" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T11:00:22.670

对于代码中设置的任何特定错误，例如-

```
model.addObject("errorMsg","username/password failed"); 
```

并以这种方式在jsp上显示此错误：

```
<c:out value="${errorMsg}"/> 
```

这样你就会在jsp上得到你的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-01T12:37:27.060

有一种方法可以引用错误，例如

代替

```
<form:form commandName="object">
     <form:errors path="field"/>
</form:form> 
```

最好的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-27T10:54:30.970

检查是否在 JSP 中启用了表达式语言评估（默认情况下它是禁用的）。如果没有添加下面的代码来启用它。

**<%@ page isELIgnored="false" %>**

# jquery - jQuery Ajax 中的内存泄漏

> ID：12496009
> 
> 赞同：0
> 
> 时间：2012-09-19T13:42:11.283
> 
> 标签：jquery, callback, google-visualization

我遇到了 jQuery.ajax() 的内存泄漏。我已经按照[这里](https://stackoverflow.com/questions/8348182/jquery-memory-leak-suspicion)和[这里](https://stackoverflow.com/questions/2429056/simple-jquery-ajax-call-leaks-memory-in-internet-explorer)的建议，但仍然看到内存泄漏。我实际上是在尝试用我自己的 API 替换 Google Visualization API，因为 GV API 也会泄漏内存。这是我的代码片段：

```
RiseVision.Common.Visualization.Query = function(url) {
    this.baseURL = url + "&tqx=responseHandler:setResponse";
    this.url = this.baseURL;
}
RiseVision.Common.Visualization.Query.prototype.send = function(callback) {
    var self = this;

    this.callback = callback;
    this.hasResponded = true;
    this.timerID = setInterval(function() {
        if (self.hasResponded) {
            self.hasResponded = false;
            self.sendQuery();
        }
    }, this.refreshInterval);
}
RiseVision.Common.Visualization.Query.prototype.sendQuery = function() {
    var request = $.ajax({ 
        url: this.url,
        context: this,
        jsonpCallback: "setResponse",
        dataType: "jsonp",
        success: function(json) {
            var response = new RiseVision.Common.Visualization.QueryResponse(json);

            if (json.sig != null) {
                this.url = this.baseURL + ";sig:" + json.sig;
            }

            if ((response.getStatus() == "error") && (response.getReasons() == "not_modified")) {
            }
            else {
                this.callback(response);
            }

            response = null;
            this.hasResponded = true;
        }
    });

    //This is supposed to mitigate the memory leak.
    request.abort = null;
    request = null;
} 
```

我正在使用 jQuery 1.8。refreshInterval 为 1 秒，因为它正在提取实时数据。我在 Chrome 的任务管理器中看到的是内存逐渐增加。大约 5 分钟后，垃圾收集似乎开始了，内存下降了。问题是内存没有下降到它开始时的相同水平。例如，内存从 50K 开始，然后逐渐增加到 60K，然后垃圾收集开始，内存下降到 52K。现在它增加到 62K，然后下降到 54K。等等。最终，这将使浏览器崩溃。

我试过 setTimeout 而不是 setInterval。这似乎更糟。我已经尝试将成功处理程序放入它自己的函数中。没有帮助。

这是一个 jsfiddle 来说明问题 - [http://jsfiddle.net/aADXq/7/](http://jsfiddle.net/aADXq/7/)

有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:32:36.413

将 ajax 请求中的 dataType 更改为“text”，然后使用[json_parse.js解析结果字符串](https://github.com/douglascrockford/JSON-js)解析结果字符串。这个库递归地解析 json 而不使用 eval ，这会占用你的内存。

# javascript - 在 jquery post 后替换 div

> ID：12496011
> 
> 赞同：0
> 
> 时间：2012-09-19T13:42:17.530
> 
> 标签：javascript, jquery, ajax

我正在使用 ajax 发布请求对用户进行身份验证，此脚本以完整的网页回复。如果成功，响应中会有一个名为 的 div `#logged`。

我想做的是检查请求的结果是否包含`logged`然后替换相应`#primary-content`div中的内容。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:54:08.087

你想检查 ajaresult 是否包含“logged”？var primaryContent = '';

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    var loggedDiv = null;
    loggedDiv  = $(data).find('div#logged');
    if(loggedDiv != null && loggedDiv != undefined){
      primaryContent  = $(data).find('div#primary-content').html();
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:55:02.883

> 我想检查响应是否包含一个名为logged的div，然后获取响应字符串中包含的一个名为'primary-content'的div的内容。

真的很简单......一旦你的`ajax`对象`readyState`已经到达`4`。

只需这样做...假设您的 ajax 或数据对象被调用`ajax`。

```
var logged = $("#logged", $(ajax.responseText)); //grab the logged element from the ajax obj
//check that the logged element exists
if(typeof logged !== "undefined"){
    //replace the content
    $("#primary-content").html(logged.contents());
} 
```

来源

*   [检测未定义的对象属性](https://stackoverflow.com/questions/27509/detecting-an-undefined-object-property-in-javascript)
*   [使用 Ajax 和 jQuery 从其他页面获取内容](http://www.devirtuoso.com/2009/09/grabbing-content-from-other-pages-with-ajax-and-jquery/)
*   [从 ajax 加载页面加载特定元素](https://stackoverflow.com/questions/5526599/load-a-specific-element-from-an-ajax-loaded-page)
*   [用jquery解析html字符串](https://stackoverflow.com/questions/704679/parse-html-string-with-jquery)

# javascript - 如何从匿名鼠标事件函数内部访问变量？

> ID：12496014
> 
> 赞同：2
> 
> 时间：2012-09-19T13:42:21.610
> 
> 标签：javascript, mouseevent

我正在尝试从外部访问变量**myvar ，如下所示：**

```
$(document).mousemove(function(e){
    var myvar = winHeight() + scrollY() - e.pageY;
}); 
console.log(myvar); 
```

但是 Chrome 的 javascript 控制台一直说“未捕获的 ReferenceError: myvar is not defined all-products:203 (anonymous function)”

我究竟做错了什么？如何在这个函数之外访问这个变量？

**编辑：**我已经意识到我试图做的事情是不可行的。从那以后，我完全改变了我的策略，代码现在可以正常工作了。（感谢詹姆斯，尤其是弗拉德的帮助！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:43:58.810

您需要将变量移动到两个代码都可以访问的外部范围。

```
var myvar = -1;

$(document).mousemove(function(e){
    myvar = winHeight() + scrollY() - e.pageY;
}); 

console.log(myvar); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T13:53:38.320

我认为这是 javascript 事件的工作。基本上你有一个全局变量，它将在鼠标移动时更新。更新变量后，您必须让其他组件知道该变量已准备好进行处理。

编码：

```
var myVar; // the global variable

// the function that will be caled when myVar has been changed
var myVarChangedHandler = function() {
    console.log('myVar variable has been changed: ' + myVar);
}

// bind the event to the above event handler
$('body').bind('MyVarChangedEvent', myVarChangedHandler);

// instal mouse move event handler on document
$(document).mousemove(function(e){
    myVar = winHeight() + scrollY() - e.pageY;
    $('body').trigger('MyVarChangedEvent');
}); 
```

**更新**

`var`从 movemove 事件处理程序中删除了关键字。

依赖于 myVar 的代码应该放在`myVarChangedHandler`函数中。

我会尽力解释你的代码，其中的缺陷以及你应该如何使用类比来解决问题。让我们看下面的代码（全局变量更正）

```
var myvar;
$(document).mousemove(function(e){
    myvar = winHeight() + scrollY() - e.pageY;
}); 
console.log(myvar); 
```

假设你，程序员，是某个不知名公司的 Web 开发部门的团队负责人，并且你有一个一天工作要完成的任务列表（我们的类比中的任务是`myvar`每次鼠标移动时更新）你有一个存储库 ( `var myvar`) 和 2 个开发人员供您使用：

*   开发商约翰 ( `function(e) { myVar = ... };`)
*   开发商肯 ( `console.log(myvar)`)

09:00 你早上来办公室（用户打开页面）

09:05 你启动服务器/存储库

```
var myvar; 
```

09:10 你告诉约翰：约翰，请做这个任务，每次你完成每一个任务都上传到存储库，完成你的工作后回家

```
$(document).mousemove(function(e){
    myvar = winHeight() + scrollY() - e.pageY;
}); 
```

09:11 你告诉Ken：Ken，请马上测试仓库中的代码，完成测试后回家

```
console.log(myvar); 
```

（此时，Ken 看到存储库是空的并回家了——那是因为 John 甚至在任务中都没有时间解决，所以 Ken 没有什么要测试的）

09:12 你回家

09:12 办公室里只有约翰在做任务，你和肯已经离开家，因为你没有其他事情可做。这也发生在您的代码上。你输出的值，`myvar`但你甚至没有移动鼠标，所以，当然，值是`undefined`

为了解决这个问题，我们添加了一些修改：

09:00 早上你来办公室

09:05 启动服务器（存储库）

09:10 你告诉约翰：

```
John, please do this tasks and everytime you complete each task
uploaded it to the repository and tell Ken to test the code.
Go home after you have finished 
```

09:11 你告诉肯：

```
Ken, each time John tells you that he has completed a task,
fetch the code from the repository and test it.
Go home after he has finished 
```

09:12 你回家

09:12 约翰和肯都在办公室做他们的工作。

在上述情况下 ken 是`myVarChangedHandler = function() {...};`

当 John 告诉 Ken 他完成了任务时，发生了一个实际事件（告诉），当 Ken 确认 John 信号时，他开始测试（Ken 是事件处理程序）

这就是 javascript 中事件驱动架构的工作原理。我会建议你放弃 jquery、mootools 等......并开始学习核心概念和基础知识。重新发明轮子几次然后回到jquery。我希望我解释得足够让你理解。

# c# - 表达式树知道日期是否在c#中的2个日期之间

> ID：12496019
> 
> 赞同：2
> 
> 时间：2012-09-19T13:42:44.127
> 
> 标签：c#, .net, linq, expression, func

我需要构建一个“介于”函数来检查日期是否包含在 2 个日期的范围内。我写了这个，但它不起作用：

```
private static Expression<Func<TElement, bool>> IsDateBetween<TElement>(Expression<Func<TElement, object>> valueSelector, DateTime date)
{
    var p = valueSelector.Parameters.Single();

    var after = Expression.LessThanOrEqual(
        Expression.Property(valueSelector.Body, "FromDate"), Expression.Constant(date.Date, typeof(DateTime)));

    var before = Expression.GreaterThanOrEqual(
        Expression.Property(valueSelector.Body, "ToDate"), Expression.Constant(date.Date, typeof(DateTime)));

    Expression body = Expression.And(after, before);

    return Expression.Lambda<Func<TElement, bool>>(body, p);
} 
```

我这样称呼它：

```
DataContext.EventHistories.Where(IsDateBetween<EventHistory>(h => new { h.FromDate, h.ToDate }, dateInTheMiddle)) 
```

我必须使用这种方式，因为 linq 实体不支持日期。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:11:06.237

你可以尝试类似的东西

```
public static IQueryable<TElement> IsDateBetween<TElement>(this IQueryable<TElement> queryable, 
                                                           Expression<Func<TElement, DateTime>> fromDate, 
                                                           Expression<Func<TElement, DateTime>> toDate, 
                                                           DateTime date)
{
    var p = fromDate.Parameters.Single();
    Expression member = p;

    Expression fromExpression = Expression.Property(member, (fromDate.Body as MemberExpression).Member.Name);
    Expression toExpression = Expression.Property(member, (toDate.Body as MemberExpression).Member.Name);

    var after = Expression.LessThanOrEqual(fromExpression,
         Expression.Constant(date, typeof(DateTime)));

    var before = Expression.GreaterThanOrEqual(
        toExpression, Expression.Constant(date, typeof(DateTime)));

    Expression body = Expression.And(after, before);

    var predicate = Expression.Lambda<Func<TElement, bool>>(body, p);
    return queryable.Where(predicate);
} 
```

用法

```
DataContext.EventHistories.WhereDateBetween(h =>  h.FromDate, h => h.ToDate, dateInTheMiddle)); 
```

但是做起来很复杂

```
var myDate = DateTime.Now();

var result = DataContext.EventHistories.Where(m => m.FromDate >= myDate && m.ToDate<=myDate ); 
```

**编辑**

好吧，要模拟`DateTime.Date`，您可以这样做：

```
var myDate = DateTime.Now.Date();
var res = histories.AsQueryable()
.Where(m => 
EntityFunctions.CreateDateTime(m.FromDate.Year, m.FromDate.Month, m.FromDate.Day, 0, 0, 0) >= DateTime.Now && 
EntityFunctions.CreateDateTime(m.ToDate.Year, m.ToDate.Month, m.ToDate.Day, 0, 0, 0) <= DateTime.Now) 
```

或者创建一个接口

```
public interface IFromDateToDate
{
    DateTime FromDate { get; set; }
    DateTime ToDate { get; set; }
} 
```

和扩展方法

```
public static IQueryable<T> WhereDatesBetween<T>(this IQueryable<T> queryable, DateTime myDate) where T : IFromDateToDate
{
    myDate = myDate.Date;
    return queryable.Where(m =>
                           EntityFunctions.CreateDateTime(m.FromDate.Year, m.FromDate.Month, m.FromDate.Day, 0, 0, 0) >= myDate &&
                           EntityFunctions.CreateDateTime(m.FromDate.Year, m.FromDate.Month, m.FromDate.Day, 0, 0, 0) <= myDate);
} 
```

用法 ：

```
DataContext.EventHistories.WhereDatesBetween(dateInTheMiddle)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:06:41.977

LinQ to Entities 确实支持 DateTime - 我在项目中使用它并且没有问题：

```
var now = DateTime.Now;    
var expiredEntities = entities.Repositories.Where(repository => repository.ExpiryDate < now).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-04T21:24:15.950

现在，如果我遵循这个正确的话，你真的很想写：

```
from item in MyTable
where FromDate <= Item.Somedate.Date 
   && Item.Somedate.Date <= ToDate
select item 
```

但是，您不能，因为`Date`LINQ to 实体不支持 DateTime 的属性。

同样，你不能写：

```
from item in MyTable
where FromDate <= Item.SomeDate 
   && Item.SomeDate <= ToDate
select item 
```

因为，我假设，`ToDate`设置为午夜，如果`Item.SomeDate`有时间，它将在 之后`ToDate`，即使它在 ToDate 上。

如果是这种情况，正确的解决方案（通常的做法）是使上限成为*独占*值（即，*不*属于集合的第一件事）。因此：

```
 toDate = toDate.Date.AddDay(1);

from item in MyTable
where FromDate <= Item.SomeDate 
   && Item.SomeDate < ToDate
select item 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-19T13:44:18.663

为什么要打扰所有这些魔法？为什么不这样做呢？

```
if (date >= startDate and date <= endDate) {

} 
```

# actionscript-3 - 更大的舞台与滚动背景

> ID：12496020
> 
> 赞同：0
> 
> 时间：2012-09-19T13:42:48.887
> 
> 标签：actionscript-3, flash, background, smooth, stage

我正在制作一款Flash游戏，我无法决定使用更大或更小的舞台，并带有滚动背景以使其运行更流畅。如果重要的话，我会成为某种策略游戏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:38:36.930

一种选择是使用舞台大小的位图对象，例如 800x600，然后使用 copyPixels 将对象绘制到该位图的位图数据中，这称为位图，并且速度非常快。

另一种选择是仅使用 Flash 显示列表并将每个对象作为精灵添加到舞台上。

就鼠标事件和其他内容而言，第二种方法更容易处理。

我的建议是从第二个选项开始，看看性能是否足够，如果没有，则使用选项 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:57:40.907

决定应用程序性能的变量有很多很多。

为了回答您的问题，较小的舞台区域将使您的程序运行得更快。差异量取决于您的应用程序处理显示对象的方式。Flash 不会渲染完全超出舞台边界的东西。因此，只保留在任何给定时间需要的对象在舞台上是一种很好的做法。

使用 flash player 11 的新[stage3D](http://www.adobe.com/devnet/games/gaming_engines.html)功能（即使是 2D 内容）可能会使您的游戏非常流畅。如果你不想进入它，有很多好的框架可以处理低级的东西。对于 2D，[starling](http://gamua.com/starling/)非常容易上手，并且似乎是 Adob​​e 偏爱的框架。

至少，确保在输出/编译器选项中使用 GPU 加速。

人们可以了解很多其他优化技巧，但更适合谷歌搜索，因为 Stackoverflow 是关于特定问题的。

# grammar - BNF 用于逗号分隔的序列？

> ID：12496021
> 
> 赞同：9
> 
> 时间：2012-09-19T13:42:49.053
> 
> 标签：grammar, bnf

无法为字符序列（可能为空）提出BNF语法，以逗号分隔，但不是以逗号开头或结尾，

所以这没关系：

```
 <--- Empty sequence is ok!
A
A,B
A,B,C 
```

这是不行的：

```
A,
,A
A,,B
AB 
```

空箱子把我吓跑了。到目前为止我得到的是：

```
<char-seq> ::= <empty> | <char> , <char-seq> | <char> 
```

但这会产生类似`A,`:-(

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T13:47:26.613

空字符序列给你带来了麻烦。您需要一个匹配非空序列的规则与同时匹配空序列和非空序列的规则分开，如下所示：

```
<char-seq> ::= <empty> | <non-empty-char-seq>
<non-empty-char-seq> ::= <char> | <char> , <non-empty-char-seq> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T13:46:27.740

```
<char-seq> ::= <empty> | <chars>
<chars> ::= <char> | <char> , <chars> 
```

# jquery - 无法点击使用 jquery 创建的表

> ID：12496022
> 
> 赞同：1
> 
> 时间：2012-09-19T13:42:50.603
> 
> 标签：jquery, json, html-table, click, mouseevent

我正在使用 jQuery 创建一个带有图像的表格。我的 js 代码如下所示：

```
$(document).ready(function() {
    var korpusArray = new Array();
    $.getJSON("file.js", function(data) {
        var korpusId;
        var korpusChooseTable = "<table id='TableKorpusGaleria'><tbody><tr>";
        $.each(data, function(i, value) {
            korpusArray.push(value.text);
            strRemove = value.filename.replace("korpus/", "");
            korpusChooseTable += '<td><p>'+value.title+'</p><p style="display:none;">'+value.id+'</p></br><img src="/korpus/thumbs/phoca_thumb_s_'+strRemove+'"></td>';
        });
        korpusChooseTable += '</tr></tbody></table>'; 
        $("#korpusChoose").html(korpusChooseTable);
        console.log(korpusArray.length);
        console.log(data.length);
    });
    // after this I wanna click on table cell and do some function but
    // it doesnt work. Can somebody tell me what I'm doing wrong?
    $("#korpusChoose #TableKorpusGaleria tbody td").click(function() {
        alert();
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:46:59.547

对动态创建的项目使用委托 - 如果在绑定时元素不存在......通常在 dom 准备就绪 - 那么将不会附加任何事件处理程序

jQuery 1.7 及更高[版本 http://api.jquery.com/on/](http://api.jquery.com/on/)

```
$("#korpusChoose ").on('click','#TableKorpusGaleria tbody td',function(){
       alert();       
}); 
```

或 jQuery 1.6 到 jQuery 1.4.3 [http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

```
$("#korpusChoose ").delegate('#TableKorpusGaleria tbody td','click',function(){
       alert();       
}); 
```

> > 根据其继承者重写 .live() 方法很简单；这些是对所有三种事件附件方法进行等效调用的模板：
> > 
> > $(选择器).live(事件、数据、处理程序); // jQuery 1.3+
> > 
> > $(document).delegate(selector, events, data, handler); // jQuery 1.4.3+
> > 
> > $(document).on(事件、选择器、数据、处理程序); // jQuery 1.7+

另一种方法是在将其添加到 dom 后立即添加

```
$("#korpusChoose").html(korpusChooseTable); 
```

然后紧接着

```
$("#korpusChoose #TableKorpusGaleria tbody td").click(function(){
     alert();
}); 
```

尽管后者效率较低，因为您要将事件处理程序绑定到表中的每个 td 元素 - 使用委托，您只需将其绑定到 dom 中存在的父元素并在事件冒泡时处理事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:47:03.600

因为表是动态创建的，所以您需要使用[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)，使用 jquery 的`on`. 这将允许您在元素存在之前附加处理程序。

```
$("#korpusChoose #TableKorpusGaleria tbody td").click(function(e){ 
```

相反会是

```
$("container").on("focus", "#korpusChoose #TableKorpusGaleria tbody td",function(e){ 
```

where`container`是一些未动态加载的静态祖先元素的选择器。如果不存在这样的容器，`document`则可以使用，但应尽可能避免。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:48:23.140

因为该表是动态生成的，您可以使用：

```
$('#mytable').live('click', function() {
    // Click event handler action here...
}); 
```

使用 live() 方法绑定事件处理程序，它们也将在由 AJAX 调用或类似调用动态创建的元素上触发。

**更新：**由于 .live() 自 JQuery 1.7 起已弃用，感谢 Andrew，请考虑使用 .on() 进行事件委托。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T13:48:54.223

使用 jquery`$("table").live("click",function(){ });`为现在和将来匹配当前选择器的所有元素附加一个事件处理程序。Jquery click 仅绑定文档中当前元素的单击事件。

[http://jsfiddle.net/wFcpP/3/](http://jsfiddle.net/wFcpP/3/)

# tridion - 日志文件中的 SmartTarget 错误

> ID：12496028
> 
> 赞同：1
> 
> 时间：2012-09-19T13:42:59.947
> 
> 标签：tridion, fredhopper, smarttarget

我的智能目标应用程序没有任何错误，但我确实在事件日志中看到以下错误消息：

> 错误 2012-09-19 14:30:09 com.tridion.smarttarget.utils.AmbientDataHelper - 在声明存储中找不到定义的触发器类型（检查您的 smarttarget 墨盒是否已启动并运行）

和：

> 错误 2012-09-19 14:30:11 com.tridion.smarttarget.tags.TimeoutQueryRunner - fredhopper 查询在 java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source) 处超时 java.util.concurrent.TimeoutException java.util.concurrent.FutureTask.get(Unknown Source) at com.tridion.smarttarget.tags.TimeoutQueryRunner.executeQuery(TimeoutQueryRunner.java:64) ERROR 2012-09-19 14:30:11 com.tridion.smarttarget.tags .TimeoutQueryRunner - fredhopper 查询超时

我真的很想了解导致这些问题的原因以及如何删除它们。或者一些建议的步骤来帮助我调试这会很棒:)

正如我所说，一切都运行良好，稍后在日志中我看到对 ST 的查询是正确的并且正在生成结果。

如果有帮助，我正在使用 Smart Target 2010，java 1.5 运行 2009 实现。

谢谢

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:13:58.423

听起来您可能在 ST 中配置了一个在 ADF 中实际上不存在（或不匹配）的触发器。您是否查看了您的 trigger-types.xml 文件是否有任何明显的内容？您是否禁用了 ADF 墨盒但可能没有删除 XML 中的相应触发器？请参阅[定义触发器类型](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_SmartTarget_2010_SP1/task_047CFA3E5D644ADBAACCEF4BA2B37A51)的文档。

我认为您的超时来自 SmartTarget 区域而不是 FredHopper。有时，尚未在 FredHopper 中缓存的查询可能需要一段时间才能返回，即使它最终是成功的。ST 查询标签有一个超时（在 smarttarget_conf.xml 文件中定义，或被标签属性覆盖），它将等待 Fredhopper 的响应，然后再诉诸使用回退内容。这也许可以解释为什么您稍后会在日志中看到查询是正确的并且返回了结果。请参阅[`<tcdl:query>`](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_SmartTarget_2010_SP1/concept_C274F8D3994D481C88E1FB77FBBB2ADC).

恐怕没有结论性的答案，但我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:35:37.293

如果您的 SmartTarget 磁带没有运行，或者它放入 ADF 的数据以某种方式丢失（例如，您在 Web 服务器中禁用了会话），则会记录第一个错误。

在这种情况下，SmartTarget 仍会进行查询，但不会包含来自环境数据框架的任何内容。如果您没有任何基于环境数据的触发器，那么最终结果对您来说是相同的。

要消除错误，请确保 smarttarget_cartridge 配置正确。

至于超时错误，它只是意味着发送给 Fredhopper 的查询花费的时间比配置的时间长。在这种情况下，它将显示后备内容。如果这种情况经常发生，您可能希望增加 smarttarget_conf.xml 中的超时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-03T13:05:19.327

我希望您找到了问题，但为了将来参考，当 SmartTarget 墨盒未设置声明“taf:claim:ambientdata:definedtriggertypes”时会引发第一条错误消息。这可能是由以下原因引起的：

*   SmartTarget 盒式磁带无法从 SmartTarget 服务器加载触发器类型。日志将显示错误“无法从 FH 检索已定义触发器类型的列表”。
*   您的 Web 服务器上的 HTTP 会话在活动访问期间已过期（HTTP 会话已过期但浏览器仍处于打开状态）并且声明“丢失”。
*   服务器不支持像彼得提到的会话。

# matplotlib - 为什么对数散点轴不从零开始？

> ID：12496029
> 
> 赞同：0
> 
> 时间：2012-09-19T13:43:03.860
> 
> 标签：matplotlib

我正在 matplotlib 中生成散点图。如果我使用线性刻度，一切正常。

但由于我主要对较低的值感兴趣，所以我想我会使用对数缩放。但是，即使我已将 x 轴限制明确设置为 (0,1)，轴从 0.1 开始，所以我错过了低于此的所有内容！

为什么对数轴不从零开始，我该如何强制它？

```
import numpy as np
import matplotlib.pyplot as plt

x = np.linspace(0,1,100)
y = np.random.randint(1000, size=100)

fig = plt.figure()
ax = fig.add_subplot(1,1,1)
ax.scatter(x, y)

ax.set_xlim(0,1.2)
ax.set_ylim(0,1000)
ax.set_yscale('log')
ax.set_xscale('log')
ax.yaxis.set_major_formatter(plt.FormatStrFormatter('%1.0f'))
ax.xaxis.set_major_formatter(plt.FormatStrFormatter('%.1f'))
ax.xaxis.set_minor_formatter(plt.FormatStrFormatter('%.1f'))

# this red line at x = 0.1
ax.axvline(x=0.1,color='r')

plt.show() 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:46:38.930

`log(0)`通常对数轴永远不会从零开始，因为在 - 轴上没有“好”值`x`，因为`log(0)==x`只有`x->-infinity`.

# hyperlink - 如何通过 SMS 或 MMS 向手机发送超链接

> ID：12496035
> 
> 赞同：0
> 
> 时间：2012-09-19T13:43:21.673
> 
> 标签：hyperlink, sms, mms

我一直在寻找一种通过 SMS 或 MMS 将具有不同外观的 URL 的超链接发送到手机的方法。

我能想到的唯一例子如下：

```
[url=http://www.google.co.uk]Click Here[/url] 
```

所以上面的代码会显示：

> 点击这里

当您单击“单击此处”链接时，它将打开`http://www.google.co.uk`。

无论如何，这可以通过使用 SMS 或 MMS 来复制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:59:56.270

据我所知，没有一个普遍接受的规范来呈现带有现代内容的文本消息。尽管某些移动操作系统（或者更确切地说是消息传递应用程序）可能支持内联链接，但它不是防故障的，也不能在所有设备上运行。

此外，那些聪明的应用程序不会依赖自定义语法，而是搜索 url 并使它们可点击。这意味着无法在此上下文中为超链接设置自定义文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:38:14.160

尽管大多数移动浏览器允许点击链接，但您不能在短信中包含超链接。您也可以发送包含一个链接的 wap 推送（它是一种特殊的二进制短信）。

# cloud - 云开发

> ID：12496037
> 
> 赞同：-1
> 
> 时间：2012-09-19T13:43:37.797
> 
> 标签：cloud

我需要开发一个基于云的解决方案。我的问题是：

1.  什么是最好的解决方案，最简单的 api？

2.  对于开发，我将需要相同 api 的托管服务，哪种托管最适合开发？

通过谷歌搜索，我现在发现 CloudStack 可以回答我所有的问题，但在深入研究之前，我将不胜感激。

问候， 梅尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:55:52.700

CloudStack 是一个 IaaS 解决方案。如果它回答了您的问题，那么您正在寻找托管 VM 而不是应用程序（平台即服务，又名 PaaS）或提供特定服务（软件即服务，又名 SaaS）的云。

大多数 IaaS 云都符合 AWS（亚马逊网络服务）模型（例如 OpenStack、CloudStack、Windows Azure 的更新）。它们有虚拟机、卷、安全组、区域等。API 都是 RESTful。

云是否最简单取决于工具的质量、客户端 SDK、您的编程能力，最重要的是，API 是否提供您正在寻找的特定 IaaS 功能。

例如，CloudStack 的原始 API 具有委托管理，它允许一个帐户代表另一个帐户创建资源。对于希望向中间商或外包商提供云服务的云服务提供商来说，委派管理员非常有用。但是，AWS 有一个非常好的 .NET SDK，并且许多工具都了解 EC2 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T09:59:48.240

我认为您应该尝试 Microsoft Azure。有许多语言的 SDK（不仅是 .NET），整个 API 是 RESTfull 并且有据可查。您有许多用于 VM 的操作系统，我认为您会对一件事感兴趣：Azure 有 API 构建服务，您可以在其中基于 Azure 基础架构和服务开发您自己的 API。例如，您可以为基于 Azure 服务（如 VM）的自动化流程开发特殊 API。这些 API 将由 Azure 自己处理，因此您无需运行特殊的应用程序来处理 API 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-30T08:10:53.810

如果您正在考虑更好的选择，我建议您使用 Amazon AWS。然而，另一种选择可能是 Openstack，并且由于 openstack 是一个社区，因此许多公司都选择了它，例如 HP、Rackspace 等。就良好的 API 支持而言，这些都是很好的解决方案，因为它们具有多种语言的实现。他们还为托管您的应用程序提供了良好的服务。最重要的是，它们提供了良好的支持。

但是这些成本很高，我建议您尝试 Azure，因为它更便宜，而且如果您的项目规模较小。

浏览以下链接：-

*   [天蓝色](https://azure.microsoft.com/en-us/?b=16.33)
*   [惠普云](http://www.hpcloud.com/)
*   [aws云](https://aws.amazon.com/)

# java - 在具有自定义对象的 ArrayList 中搜索某些字符串

> ID：12496038
> 
> 赞同：66
> 
> 时间：2012-09-19T13:43:45.330
> 
> 标签：java, search, arraylist, custom-object

我有一个带有自定义对象的 ArrayList。我想在这个 ArrayList 中搜索字符串。

对象的类如下所示：

```
public class Datapoint implements Serializable {

  private String stateBased;
  private String name;
  private String priority;
  private String mainNumber;
  private String groupadress;
  private String dptID;

  public Datapoint(){
  }

  public String getMainNumber() {
    return mainNumber;
  }

  public void setMainNumber(String mainNumber) {
    this.mainNumber = mainNumber;
  }

  public String getName() {
    return name;
  }

  ..and so on 
```

我知道如何在 ArrayList 中搜索字符串，但如何在 ArrayList 中使用我的自定义对象进行搜索：

```
ArrayList<String> searchList = new ArrayList<String>();
String search = "a";
int searchListLength = searchList.size();
for (int i = 0; i < searchListLength; i++) {
if (searchList.get(i).contains(search)) {
//Do whatever you want here
}
} 
```

所以我想有一个函数在我的 ArrayList 中搜索，例如所有“名称”字符串的五个对象。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-09-19T13:51:02.273

简单的方法是在`for`哪里验证`name`自定义对象的属性是否具有所需的字符串

```
 for(Datapoint d : dataPointList){
        if(d.getName() != null && d.getName().contains(search))
           //something here
    } 
```

我认为这对你有帮助。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-09-19T14:06:23.160

更新：使用 Java 8 语法

```
List<DataPoint> myList = new ArrayList<>();
//Fill up myList with your Data Points

List<DataPoint> dataPointsCalledJohn = 
    myList
    .stream()
    .filter(p-> p.getName().equals(("john")))
    .collect(Collectors.toList()); 
```

如果您不介意使用外部 libaray - 您可以使用[Google Guava 库中的](https://github.com/google/guava)[谓词](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Predicates.html)，如下所示：

```
class DataPoint {
    String name;

    String getName() { return name; }
}

Predicate<DataPoint> nameEqualsTo(final String name) {
    return new Predicate<DataPoint>() {

        public boolean apply(DataPoint dataPoint) {
            return dataPoint.getName().equals(name);
        }
    };
}

public void main(String[] args) throws Exception {

    List<DataPoint> myList = new ArrayList<DataPoint>();
    //Fill up myList with your Data Points

    Collection<DataPoint> dataPointsCalledJohn =
            Collections2.filter(myList, nameEqualsTo("john"));

} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-19T13:46:33.500

尝试这个

```
ArrayList<Datapoint > searchList = new ArrayList<Datapoint >();
String search = "a";
int searchListLength = searchList.size();
for (int i = 0; i < searchListLength; i++) {
if (searchList.get(i).getName().contains(search)) {
//Do whatever you want here
}
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-19T13:50:18.820

要使自定义类在集合中正常工作，您必须实现/覆盖`equals()`该类的方法。对于排序也覆盖`compareTo()`。

有关如何正确实现这些方法的信息，请参阅[本文或 google。](http://www.javapractices.com/topic/TopicAction.do?Id=17)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-19T13:46:45.557

大概是这样的：

```
ArrayList<DataPoint> myList = new ArrayList<DataPoint>();
//Fill up myList with your Data Points

//Traversal
for(DataPoint myPoint : myList) {
    if(myPoint.getName() != null && myPoint.getName().equals("Michael Hoffmann")) {
        //Process data do whatever you want
        System.out.println("Found it!");
     }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-19T13:48:54.280

`contains()`方法只调用元素，因此您可以基于类变量重载您`equals()`的类。从if中返回等于匹配的。希望这可以帮助。`ArrayList``equals()``name``true``equals()``name``String`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-19T17:57:20.987

使用`Apache CollectionUtils`：

```
CollectionUtils.find(myList, new Predicate() {
   public boolean evaluate(Object o) {
      return name.equals(((MyClass) o).getName());
   }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-19T14:05:03.503

```
String string;
for (Datapoint d : dataPointList) {    
   Field[] fields = d.getFields();
   for (Field f : fields) {
      String value = (String) g.get(d);
      if (value.equals(string)) {
         //Do your stuff
      }    
   }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-22T06:59:22.247

```
boolean found;

for(CustomObject obj : ArrayOfCustObj) {

   if(obj.getName.equals("Android")) {

      found = true;
   }
} 
```

# android - 同一活动中的 webview 和 listview

> ID：12496044
> 
> 赞同：0
> 
> 时间：2012-09-19T13:43:55.690
> 
> 标签：android, listview, webview

我正在尝试在同一活动中创建 webview 和 listview。这是我的布局文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@android:color/white" >

<com.markupartist.android.widget.ActionBar
    android:id="@+id/actionbar"
    style="@style/ActionBar" />

<WebView
    android:id="@+id/webView1"
    android:layout_width="match_parent"
    android:layout_height="210dp" />

<ListView
    android:id="@+id/listtest"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView>

<TextView 
    android:id="@+id/tv_test2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="10dp"
    android:textSize="16sp"/> 
```

这是我的行布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@android:color/white"
android:orientation="vertical" >

<com.markupartist.android.widget.ActionBar
    android:id="@+id/actionbar"
    style="@style/ActionBar" />

<TextView
    android:id="@+id/tv_test"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="10dp"
    android:textSize="16sp" >
</TextView> 
```

这是我的活动：

```
public class Tab_Bike_Information_Activity extends Activity {
WebView mWebView;
TextView tv;
private ListView mainListView;
private ArrayAdapter<String> listAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tessss);

    final ActionBar actionBar = (ActionBar) findViewById(R.id.actionbar);
    actionBar.setTitle(getString(R.string.app_name));

    int index = getIntent().getIntExtra("text", 0);

    mWebView = (WebView) findViewById(R.id.webView1);

    String temp = "<html><body>" + "<p align=\"justify\">"
            + getString(R.string.xc_info + index) + "</p> "
            + "</body></html>";
    mWebView.loadData(temp, "text/html", "utf-8");

    mainListView = (ListView) findViewById(android.R.id.list );  

    // Create and populate a List of planet names.  
    String[] planets = new String[] { "Mercury", "Venus", "Earth", "Mars",  
                                      "Jupiter", "Saturn", "Uranus", "Neptune"};    
    ArrayList<String> planetList = new ArrayList<String>();  
    planetList.addAll( Arrays.asList(planets) );  

    // Create ArrayAdapter using the planet list.  
    listAdapter = new ArrayAdapter<String>(this, R.layout.tessss_row, planetList);  

    // Add more planets. If you passed a String[] instead of a List<String>   
    // into the ArrayAdapter constructor, you must not add more items.   
    // Otherwise an exception will occur.  
    listAdapter.add( "Ceres" );  
    listAdapter.add( "Pluto" );  
    listAdapter.add( "Haumea" );  
    listAdapter.add( "Makemake" );  
    listAdapter.add( "Eris" );  

    tv = (TextView) findViewById(R.id.tv_test);

} 
```

这是logcat：

```
09-19 20:04:04.659: E/AndroidRuntime(13951): FATAL EXCEPTION: main
09-19 20:04:04.659: E/AndroidRuntime(13951): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.wilis.hellotabwidget/com.wilis.hellotabwidget.Tab_Bike_Information_Activity}: java.lang.NullPointerException
09-19 20:04:04.659: E/AndroidRuntime(13951):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
09-19 20:04:04.659: E/AndroidRuntime(13951):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
09-19 20:04:04.659: E/AndroidRuntime(13951):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-19 20:04:04.659: E/AndroidRuntime(13951):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
09-19 20:04:04.659: E/AndroidRuntime(13951):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-19 20:04:04.659: E/AndroidRuntime(13951):    at android.os.Looper.loop(Looper.java:130)
09-19 20:04:04.659: E/AndroidRuntime(13951):    at android.app.ActivityThread.main(ActivityThread.java:3687)
09-19 20:04:04.659: E/AndroidRuntime(13951):    at java.lang.reflect.Method.invokeNative(Native Method)
09-19 20:04:04.659: E/AndroidRuntime(13951):    at java.lang.reflect.Method.invoke(Method.java:507)
09-19 20:04:04.659: E/AndroidRuntime(13951):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
09-19 20:04:04.659: E/AndroidRuntime(13951):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
09-19 20:04:04.659: E/AndroidRuntime(13951):    at dalvik.system.NativeStart.main(Native Method)
09-19 20:04:04.659: E/AndroidRuntime(13951): Caused by: java.lang.NullPointerException
09-19 20:04:04.659: E/AndroidRuntime(13951):    at com.wilis.hellotabwidget.Tab_Bike_Information_Activity.onCreate(Tab_Bike_Information_Activity.java:75)
09-19 20:04:04.659: E/AndroidRuntime(13951):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-19 20:04:04.659: E/AndroidRuntime(13951):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
09-19 20:04:04.659: E/AndroidRuntime(13951):    ... 11 more 
```

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:54:13.197

我看到了几件事，但我可能是错的，我只是在看代码并没有对其进行测试。

类不应该扩展 ListActivity 而不是 Activity 吗？

接下来的事情是，在你的课堂上，你有：

```
mainListView = (ListView) findViewById(android.R.id.list); 
```

但在您的 XML 中，listView 具有不同的 ID：

```
android:id="@+id/listtest" 
```

我认为这应该是

```
android:id="@+id/android:list" 
```

另一个是TextView的id是错误的。您正在寻找**tv_test**而不是**tv_test2**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:50:29.830

tv 必须指的是您的 TextView ：findViewById()！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:04:43.760

我看到两个问题：首先是您的列表视图的 ID。改变

```
mainListView = (ListView) findViewById(android.R.id.list ); 
```

到

```
mainListView = (ListView) findViewById(R.id.listtest ); 
```

也许您需要删除 android.R.* 的导入以使 Eclipse 识别更改。

其次，在您的适配器中，现在指定了 TextView。
改变

```
listAdapter = new ArrayAdapter<String>(this, R.layout.tessss_row, planetList); 
```

到

```
listAdapter = new ArrayAdapter<String>(this, R.layout.tessss_row, R.id.tv_test, planetList); 
```

让 ArrayAdapter 知道应该在哪个 textView 中写入planetList 的内容。

# java - 错误：与主机的 TCP/IP 连接失败。java.net.ConnectException：连接被拒绝：连接

> ID：12496045
> 
> 赞同：3
> 
> 时间：2012-09-19T13:43:56.200
> 
> 标签：java, sql-server-2005, database-connection, tcp-ip

我在用

*   Windows 7的
*   Netbeans IDE 7.1.2
*   SQL Server 管理工作室速成版 2005
*   JDK1.6

连接数据库时出现以下错误：

> com.microsoft.sqlserver.jdbc.SQLServerException：与主机的 TCP/IP 连接失败。java.net.ConnectException：连接被拒绝：连接

我的连接字符串是：

```
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");  
Connection connection = DriverManager.getConnection(  
    "jdbc:sqlserver://127.0.0.1:1433;databaseName=dbcm;" +  
    "user=sa;password=sa"); 
```

我检查了以下内容：

1.  在 SQL Server 配置管理器中，SQLEXPRESS 的协议：启用 TCP/IP 事实上，我也启用了剩余的 3 个。
2.  SQL Server(SQLExpress) 和 SQL Browser 服务都在运行。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-19T14:12:01.400

我按照以下步骤使用 JDBC 成功连接到 SQLExpress 实例：

1.  使用 SQL Express 配置 TCP/IP 通信
    1.  打开 SQL Server 配置管理器。
    2.  转到 SQL Server 网络配置 -> SQLEXPRESS 的协议
    3.  将 TCP/IP 协议的状态设置为“已启用”（如果尚未启用）。
    4.  打开 TCP/IP 的属性窗口，转到 IP 地址部分。
    5.  转到该属性页的底部，将 TCP 端口设置`IPAll`为 1433。
2.  使用连接到 SQLExpress 实例`Microsoft's JDBC driver for SQL Server`
    1.  JDBC 网址：`jdbc:sqlserver://localhost;instance=SQLEXPRESS;databaseName=<your DB>;user=<your User>;password=<your Passwd>`

# ios6 - 如何获得用户权限已更改的通知？

> ID：12496051
> 
> 赞同：0
> 
> 时间：2012-09-19T13:44:04.223
> 
> 标签：ios6

我有一个访问本机通讯录的应用程序。在 iOS 6 中，当我的应用第一次尝试访问 AB 时，会提示用户允许或拒绝访问；从那时起，用户只能在隐私设置屏幕中更改此设置。

我的应用程序的行为必须根据用户是否允许 AB 访问而有所不同。**当用户更改此权限时，我的应用程序是否有任何方式接收通知？**新 API 中有一个方法，我可以调用该方法来确定用户是否已授予 AB 访问权限，但我不想连续轮询以了解何时更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:37:50.953

根据这篇[文章](https://stackoverflow.com/a/12668187/1575017)，iOS 通过您的后台任务到期处理程序“通知”您的应用程序。不是我假设的 NSNotification ......真是太糟糕了。

# asp.net-mvc-2 - ASP .NET MVC 中的跨表验证

> ID：12496054
> 
> 赞同：0
> 
> 时间：2012-09-19T13:44:15.387
> 
> 标签：asp.net-mvc-2, data-annotations, silverlight-5.0, domainservices, validationattribute

我正在使用 DataAnnotations 和 Validation Attributes 执行验证。我正在使用 ADO NET 实体模型、域服务、RIA 服务、Silverlight，并且我的项目有一个在 ASP .NET 中的服务器端。

我想执行跨表验证，如何从 CustomValidation 方法访问实体表。

让我们用一个例子来解释。

假设我想在我的数据中避免两个同名的公司。

（*我正在编辑这个问题，因为我不知道如何回复添加的评论。* 这不是我真正需要的，我只是想从位于我的应用程序服务器端的自定义验证方法中访问数据。）

我装饰：

```
[CustomValidation(typeof(CustomValidatorType), "CompanyNameValidation")]
public string CustomerName { get; set; } 
```

然后我的 CustomValidatorType 将是：

```
public static class CustomValidatorType {
   public static ValidationResult CompanyNameValidation(string companyName, 
                                                 ValidationContext validationContext) {
      // How can I see if companyName is already present in Customers entity table? 
      if (*Company name already exists*) {
         // How can I access the Customer Entity Table to check the Company Name existence?
         return new ValidationResult("Comapny already exists.", new[] { "CustomerName" });
      }
      else
         return ValidationResult.Success;
   }
} 
```

先感谢您

我最诚挚的问候

拉斐尔

# jquery - 运行此调整大小脚本的更快方法

> ID：12496060
> 
> 赞同：0
> 
> 时间：2012-09-19T13:44:45.953
> 
> 标签：jquery, css

我有以下 jQuery：

```
$(document).ready(function(e) {
    $('#content-wrapper').height($(window).height() - $('#header-wrapper').height() - 25);
});

$(window).resize(function(e) {
    $('#content-wrapper').height($(window).height() - $('#header-wrapper').height() - 25);
}); 
```

有些东西告诉我我做错了，或者走的路更长。

有没有更快的方法来重新创建完全相同的脚本？

脚注：对于那些患有轻度强迫症的人，此脚本会调整 a 的大小`<div>`以使其填满页面的其余部分。的高度`#header-wrapper`是随机的，25 是 和 之间的`#header-wrapper`填充`#content-wrapper`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:11:19.977

我认为这个问题与调整大小时多次调整大小有关，而不仅仅是在完成时。

见：http: [//jsfiddle.net/8kaar/](http://jsfiddle.net/8kaar/)

要解决此问题，请添加一个 setTimeout，并在调整大小时将其清除，因此它仅在您停止调整大小后执行

见这里：http: [//jsfiddle.net/8kaar/1/](http://jsfiddle.net/8kaar/1/)

所以你的代码应该改为

```
$(window).ready(resizeCallback);
$(window).resize(resizeCallback);

var resizeTimeoutId = null;
function resizeCallback() {
    if (resizeTimeoutId)
        window.clearTimeout(resizeTimeoutId);

    resizeTimeoutId = window.setTimeout(resizeAction, 250);
}

function resizeAction() {
    $('#content-wrapper').height($(window).height() - $('#header-wrapper').height() - 25);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:51:16.867

页面加载后#header-wrapper 大小是否会发生变化？如果没有，那么每次调整窗口大小时都不需要重新计算高度，这会加快速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:03:32.083

首先，您的解决方案较慢，因为您在每次调整大小时都会找到 DOM 元素并将它们包装到 jquery 对象中，您需要`cache`它们。从这个问题看我的例子：[resize example](https://stackoverflow.com/questions/12471882/using-jquery-to-change-image-src-when-browser-is-resized)

# php - 按位置获取日期（即一月的第三个星期三）？

> ID：12496061
> 
> 赞同：0
> 
> 时间：2012-09-19T13:44:48.303
> 
> 标签：php

我可以在 php 中使用 strtotime 获得第三个星期三（“周三年月 +2 周”）还是我需要像这里这样的复杂代码：[http ://www.danielkassner.com/2010/05/22/get-date -按职位，即一月第三个星期三](http://www.danielkassner.com/2010/05/22/get-date-by-position-ie-third-wednesday-of-january)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:53:36.397

尝试这个：-

```
/**
* int nth_day_of_month(int $nbr, str $day, int $mon, int $year)
*   $nbr = nth weekday to find
*   $day = full name of weekday, e.g. "Saturday"
*   $mon = month 1 - 12
*   $year = year 1970, 2007, etc.
* returns UNIX time
*/
function nth_day_of_month($nbr, $day, $mon, $year)
{
   $date = mktime(0, 0, 0, $mon, 0, $year);
   if($date == 0)
   {
      user_error(__FUNCTION__."(): Invalid month or year", E_USER_WARNING);
      return(FALSE);
   }
   $day = ucfirst(strtolower($day));
   if(!in_array($day, array('Sunday', 'Monday', 'Tuesday', 'Wednesday',
         'Thursday', 'Friday', 'Saturday')))
   {
      user_error(__FUNCTION__."(): Invalid day", E_USER_WARNING);
      return(FALSE);
   }
   for($week = 1; $week <= $nbr; $week++)
   {
      $date = strtotime("next $day", $date);
   }
   return($date);
} 

$d = nth_day_of_month($week_no,$curr_week_day, $fmonth, $fyear);

echo date('d-m-Y',$d)."<br />"; 
```

# jquery - 在这种情况下如何停止“传播”？

> ID：12496067
> 
> 赞同：1
> 
> 时间：2012-09-19T13:44:59.340
> 
> 标签：jquery, handler, stoppropagation

[代码](http://jsfiddle.net/pkhJQ/)：

```
<div id="container">
    <div id="link">Link</div>
</div>​

$('#link').click(function (e) {
    console.log("link");                
});

$('#container').mousedown(function (e) {
    console.log("container");                
}); 
```

我希望这样，当我单击 时`#link`，它不会触发`#container`处理程序。试过`stopPropagation()`or `preventDefault()`，但我认为这是错误的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:50:40.880

处理程序在处理`mousedown`程序之前触发`click`，因此您不能`mousedown`从`click`处理程序中取消处理程序，因为`mousedown`事件已经冒泡到父元素。

在不修改其他处理程序的情况下，我只需`mousedown`向内部元素添加一个处理程序即可停止`mousedown`事件传播。

```
$('#link').click(function (e) {
    console.log("link");
}).mousedown(function (e) { //stops the mousedown event propagation from reaching
    e.stopPropagation();   //the parent element
});

$('#container').mousedown(function (e) {
    console.log("container");
}); 
```

[**小提琴**](http://jsfiddle.net/pkhJQ/3/)

如果您能够切换处理程序来处理相同的事件（例如两者`click`），您将能够[`event.stopPropagation()`](http://api.jquery.com/event.stopPropagation/)从内部元素的处理程序调用，就像我对`mousedown`上面的处理程序所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:47:48.787

根据这些问题/答案：

[防止在单击超链接时触发父容器单击事件](https://stackoverflow.com/questions/1997084/prevent-parent-container-click-event-from-firing-when-hyperlink-clicked)

[在JQuery中触发子事件时如何防止触发容器事件？](https://stackoverflow.com/questions/5633086/how-to-prevent-trigger-containers-event-when-trigger-childrens-events-in-jquer)

`e.stopPropagation();`是正确的方法。

[http://jsfiddle.net/MN5KK/1/](http://jsfiddle.net/MN5KK/1/)

编辑：我看到您在`mousedown`容器和`click`链接上使用，鼠标按下事件将始终在单击之前触发，因为单击是在释放时。

# c++ - 静态成员销毁

> ID：12496070
> 
> 赞同：2
> 
> 时间：2012-09-19T13:45:18.193
> 
> 标签：c++, windows, dll, static

我不是静态的粉丝，但我有一些代码：

除非周围有其他东西，否则静态破坏将失败。静态声明为 DLL 类内部的成员。

可执行文件正在关闭，因此运行时调用 FreeLibary 以释放它在启动时加载的 DLL。

我知道静态将在我的程序终止期间被销毁（不保证销毁顺序，因为没有施工顺序的保证）但是什么时候可以准备好销毁？在我的`DLLMain`（对于加载的 DLL）退出之后或运行时之后，`__DllMainCRTStartup`甚至在此之后？

我只是想知道我是否有机会在破坏之前做某事，如果没有，我需要考虑将静电消除到更合适的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:44:57.613

也许**atexit**功能会帮助你。您给它一个回调函数，该函数将在进程分离期间由运行时执行。

DLL 说明：http: [//msdn.microsoft.com/en-us/library/988ye33t.aspx](http://msdn.microsoft.com/en-us/library/988ye33t.aspx)

atexit：http: [//msdn.microsoft.com/en-us/library/tze57ck3.aspx](http://msdn.microsoft.com/en-us/library/tze57ck3.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:02:04.627

根据您的问题，我了解到您使用的是 Windows，并且使用的是 Microsoft 编译器。我的回答是针对这个设置的（尽管我很确定 gcc 是相似的）。

简短的回答是：
只要您的 DLL 存在，并且它依赖于另一个 DLL，并且您没有搞砸事情（例如，您没有 FreeLibrary 依赖项），那么依赖项 DLL 仍然在内存中工作状态，可以调用。只有在您的 DLL 完全关闭后，从属 DLL 上的关闭序列才会开始。

使用 Microsoft Visual Studio 编译的 DLL 上的序列顺序：

*   DllMainCRTStartup 是 DLL 的入口点。您可以在以下位置查看此方法的代码：**c:\program files\Microsoft Visual Studio 11.0\VC\CRT\src\crtdll.c**
*   DllMainCRTStartup 调用 CRT_INIT（同一文件）。
*   在 DLL_PROCESS_ATTACH 中有各种初始化。然后它调用函数**initterm**。这个函数（在别处实现，见下文）是调用所有静态 C++ 对象的构造函数的函数。
*   在 DLL_PROCESS_DETACH 中，CRT_INIT 调用一堆执行破坏的 onexit/atexit 例程。
*   调用 CRT_INIT 后，DllMainCRTStartup 调用用户定义的 DllMain。
*   terminit 在 crt0dat.c 中实现。它有一个指向函数的指针数组（由编译器和链接器生成），这些函数在循环中被调用。每个函数都是静态对象的构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:19:41.067

我认为另一种可能的解决方法是有一个全局类，它的构造函数只是调用`CoInitilize`和析构函数调用`CoUninitilize`。

然后确保在包含 a 的对象之前创建此全局变量`ComPtr`。由于破坏将与构造相反，因此调用的析构函数`CoUninitilize`将`.Release`在`ComPtr`.

# python - 实例变量

> ID：12496071
> 
> 赞同：0
> 
> 时间：2012-09-19T13:45:20.257
> 
> 标签：python, function, variables, arguments, instance

我想知道是否可以在 python 中创建一个函数 foo 以便

```
def calulate (self, input):
    input = #some stuff

def foo2(self):
    self.calculate(self.var1)
    self.calculate(self.var2) 
```

还是你必须这样做

```
def calculation(self):
    output=#some stuff
    return output
def foovar1(self):
    self.var1=self.calculation()
    self.var2=self.calculation() 
```

我真的不想这样做，因为这意味着创建更多功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:49:02.190

在 Python 中，您可以改变函数参数，但不能直接在调用者的范围内重新绑定它们。您可以传递实例成员名称：

```
def foo(self, inputname):
    setattr(self, inputname, #some stuff)

def foo2(self):
    self.foo('var1')
    self.foo('var2') 
```

或者，如果`self.var1`是一个可变对象，例如您可以编写的列表：

```
def foo (self, input):
    input[:] = #some stuff

def foo2(self):
    self.foo(self.var1)
    self.foo(self.var2) 
```

这是有效的，因为您正在改变列表对象（通过分配给完整切片）而不是重新绑定它（裸`=`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:05:16.167

另一种解决方案可能是拥有一个特制的容器。

```
class Container(object):
    def __init__(self, value=None):
        self.value = value 
```

然后在另一个类中使用它：

```
def foo(self, container):
    container.value = ...

def foo2(self):
    self.foo(self.var1)
    self.foo(self.var2) 
```

# java - Java XMLGregorianCalendar 中的时区问题

> ID：12496075
> 
> 赞同：9
> 
> 时间：2012-09-19T13:45:29.913
> 
> 标签：java, time, timezone, datetime-format

我希望这不是重复。我在这里检查了其他搜索，所有搜索似乎都在谈论使用 SimpleDateFormat 以正确的 TimeZone 格式“显示”日期。

但是，我的问题是我获得了一个 XMLGregorianCalendar 对象，让我们在“CET”中说。

我必须从该对象中找出格式，并将当前时间也发送到与服务器相同的 TimeZone 中。

例如：我需要一个以这种格式返回我的 XMLGregorianCalendar 对象（带时区）：

2012-09-19T15:23:36.421+02:00

所以我只是尝试了以下片段，它似乎只返回本地时区的时间:(

```
TimeZone utc = TimeZone.getTimeZone("CET");
GregorianCalendar gc = new GregorianCalendar();
DateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ssZ");
df.setTimeZone(utc);
System.out.println(" - Gregorian UTC [" + df.format(gc.getTime()) + "]")

XMLGregorianCalendar currServTime = DatatypeFactory.newInstance().newXMLGregorianCalendar(gc);

System.out.println("currServTime is "+currServTime); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T13:53:42.667

您应该在 中包含您感兴趣的时区`GregorianCalendar`，或者通过将其传递给[构造函数](http://docs.oracle.com/javase/7/docs/api/java/util/GregorianCalendar.html#GregorianCalendar%28java.util.TimeZone%29)或在[之后设置它](http://docs.oracle.com/javase/7/docs/api/java/util/GregorianCalendar.html#setTimeZone%28java.util.TimeZone%29)。因此，这些行中的任何一条都应该适合您：

```
GregorianCalendar gc = new GregorianCalendar(utc);
gc.setTimeZone(utc); 
```

# c# - 通过 JQuery 为 Kendo 图表设置多个图表系列数据源

> ID：12496082
> 
> 赞同：1
> 
> 时间：2012-09-19T13:45:45.527
> 
> 标签：c#, asp.net-mvc, charts, kendo-ui

我在我的 cshtml 页面上定义了一个剑道图表，如下所示：

```
@(Html.Kendo().Chart<MyModel>()
        .Name("chart")
        .Title("")
        .Legend(legend => legend
            .Visible(false)
        )
        .Series(series =>
         {
                    series.Scatter(model => model.X, model => model.Y);
                    series.Scatter(model => model.X, model => model.Y);
        })
        ) 
```

我需要使用 JQuery 调用设置每个系列的数据。我的 JQuery 调用和返回数据工作正常，下面将填充第一个系列数据：

```
 function GetChartData(ex,ten) {
            var str = "{'arg': '" + ex + "', 'arg2': '" + ten ' }";
            $.ajax({
                type: 'POST',
                url: '/Controller/CreateChartData',
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                data: str ,
                success: function (data) {

                    var grid = $("#chart").data("kendoChart");
                    grid.dataSource.data(data.ChartData);
                    grid.refresh();

                },
                error: function (xhr, ajaxOptions, thrownError) {
                    alert(xhr.status);
                    alert(thrownError);
                }
            }); 
```

但是，我无法设置第二个系列数据。我尝试了以下在图表上没有呈现任何内容的方法：

```
 function GetChartData(ex,ten) {
            var str = "{'arg': '" + ex + "', 'arg2': '" + ten ' }";
            $.ajax({
                type: 'POST',
                url: '/Controller/CreateChartData',
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                data: str ,
                success: function (data) {

                    var grid = $("#chart").data("kendoChart");
            grid.options.series[0].data = data.ChartData;
           grid.options.series[1].data = data.ChartDataSeries2; 

                    grid.refresh();

                },
                error: function (xhr, ajaxOptions, thrownError) {
                    alert(xhr.status);
                    alert(thrownError);
                }
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:36:40.130

您可能会尝试的方法是在获得所有数据之前不初始化该图表。

这样，您可以将两个系列都传递给 .kendoChart() 方法，而不是调用 refresh()

```
function GetChartData(ex,ten) {
        var str = "{'arg': '" + ex + "', 'arg2': '" + ten ' }";
        $.ajax({
            type: 'POST',
            url: '/Controller/CreateChartData',
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            data: str ,
            success: function (data) {

                 $("#chart").kendoChart({
                    theme: $(document).data("kendoSkin") || "default",
                    title: {
                        text: "Example"
                    },
                    legend: {
                        visible: true
                    },
                    seriesDefaults: {
                        type: "scatterLine"
                    },
                    series: [{
                        name: "series1",
                        data: data.ChartData
                    }, {
                        name: "series2",
                        data: data.ChartDataSeries2
                    }, {
                        name: "series3",
                        data: data.ChartDataSeries3
                    }]
                });
            }

            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert(xhr.status);
                alert(thrownError);
            }
        }); 
```

工作aspx示例页面：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="GraphTest.aspx.cs" Inherits="GraphTest" %> 
```

```
<link rel="stylesheet" href="/css/kendo.common.min.css" />
<link rel="stylesheet" href="/css/kendo.metro.min.css" />
<link rel="stylesheet" href="/css/kendo.kendo.min.css" />

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>        window.jQuery || document.write('<script src="/js/libs/jquery-1.7.1.min.js"><\/script>')</script>
<script src="/js/libs/kendo.all.min.js" type="text/javascript"></script>
<title></title> 
```

```
 <div id="example" class="k-content">
        <div class="chart-wrapper">
            <div id="chart"></div>
        </div>
        <script>
            function createChart() {

                var data1 = [[10, 10], [15, 20], [20, 25], [32, 40], [43, 50], [55, 60], [60, 70], [70, 80], [90, 100]];

                $("#chart").kendoChart({
                    theme: $(document).data("kendoSkin") || "default",
                    title: {
                        text: "Charge current vs. charge time"
                    },
                    legend: {
                        visible: true
                    },
                    seriesDefaults: {
                        type: "scatterLine"
                    },
                    series: [{
                        name: "0.8C",
                        data: data1
                    }, {
                        name: "1.6C",
                        data: [[10, 40], [17, 50], [18, 70], [35, 90], [47, 95], [60, 100]]
                    }, {
                        name: "3.1C",
                        data: [[10, 70], [13, 90], [25, 100]]
                    }],
                    xAxis: {
                        max: 90,
                        labels: {
                            format: "{0}m"
                        },
                        title: {
                            text: "Time"
                        }
                    },
                    yAxis: {
                        max: 100,
                        labels: {
                            format: "{0}%"
                        },
                        title: {
                            text: "Charge"
                        }
                    },
                    tooltip: {
                        visible: true,
                        format: "{1}% in {0} minutes"
                    }
                });
            }

            $(document).ready(function () {
                setTimeout(function () {
                    // Initialize the chart with a delay to make sure
                    // the initial animation is visible
                    createChart();

                    $("#example").bind("kendo:skinChange", function (e) {
                        createChart();
                    });
                }, 400);
            });
        </script>
    </div>

</div>
</form> 
```

# ios - UIImageView 的折叠/卷曲边缘

> ID：12496084
> 
> 赞同：2
> 
> 时间：2012-09-19T13:45:47.063
> 
> 标签：ios, iphone, uiimageview

我需要折叠/展开 UIImageView 的边缘以标记为收藏夹。我搜索了多个站点，但没有找到任何关于它的信息。

我附上了一些示例图像，如果可能的话，附上动画效果。

![折叠](../Images/8ad3eab22c2ebfe50a2212b7083674be.png) ![折叠 2](../Images/3f7945c51f342900dcdb98875e746546.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:07:46.530

一种方法是使用 OpenGL 为视图设置动画。有一个很好的库，叫做[XBPageCurl](https://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCAQFjAA&url=https%3A%2F%2Fgithub.com%2Fxissburg%2FXBPageCurl&ei=9t1ZUOW2IKLK0AXH4YCABw&usg=AFQjCNH8OtMTlWp-Pg4eXy9l9wNu0oGBkw)

但是，您可以通过为卷曲效果创建遮罩并在过渡到它时为您的视图设置动画来实现更轻松的解决方案。这是它的样子

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.3];

UIImage *maskedImage = [yourImage imageMaskedWithImage:yourMask];
[yourImageView setImage:maskedImage];

[UIView commitAnimations]; 
```

要了解如何屏蔽图像，请查看此处[http://mobiledevelopertips.com/cocoa/how-to-mask-an-image.html](http://mobiledevelopertips.com/cocoa/how-to-mask-an-image.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:55:17.873

可以用`UIViewController`'s`presentModalViewController:animated:`和设置`modalTransistionStyle`to 来完成`UIModalTransitionStylePartialCurl`。请参阅[苹果的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-18T10:47:43.820

```
@IBAction func curl(_ sender: Any, forEvent event: UIEvent) {

    if b == 1 {
    UIView.transition(with: imageview, duration: 1.5, options: .transitionCurlUp, animations: {self.imageview.isHidden = true}, completion: nil)
        b = 2
    }
    else if b == 2
    {
        self.imageview.isHidden  = false
        UIView.transition(with: imageview, duration: 1.5, options: .transitionCurlDown, animations: {self.imageview.isHighlighted = true}, completion: nil)
        b = 1
    }
} 
```

# .net - 无法保存临时实体。休眠

> ID：12496085
> 
> 赞同：1
> 
> 时间：2012-09-19T13:45:47.430
> 
> 标签：.net, asp.net-mvc, nhibernate

**映射**

```
<class name="Project" optimistic-lock="version">
    <id name="Id" column="ProjectID" type="guid" unsaved-value="00000000-0000-0000-0000-000000000000">  
        <generator class="guid.comb" />
    </id>
    <version name="Version" generated="always" type="Int32" unsaved-value="0">
       <column name="Version" sql-type="int" not-null="true" />
    </version>
    <!-- properties -->
</class> 
```

调试时很明显`Version equals 0`。

```
public class Project {
    public virtual Guid Id { get; protected set; }
    public virtual Int32 Version { get; set; }
} 
```

但是当保存异常发生时：

> 无法将值 NULL 插入到列“版本”、表“XXXX.dbo.Project”中；列不允许空值。插入失败。该语句已终止。

为什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:08:11.980

`generated="always"`表示 DB 而不是 NHibernate 将生成此值，NH 将在之后检索它。

如果不是这种情况，请删除该属性。事实上，您可以删除除 之外的所有属性`name`，因为您将它们设置为默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:11:25.330

您正在使用`generated="always"`type `Int32`。

> 生成（可选 - 默认为从不）：指定此版本属性值实际上是由数据库生成的。

[您可以在此处](http://nhibernate.info/doc/nhibernate-reference/mapping.html#mapping-declaration-version)和[此处](http://ayende.com/blog/3946/nhibernate-mapping-concurrency)找到更多信息。

您可以将类型更改为`Timestamp`或删除该属性。

我建议以`Version`这种方式更改您的财产：

```
public virtual int Version { get; private set; } 
```

# c# - 具有反射类型的泛型

> ID：12496086
> 
> 赞同：0
> 
> 时间：2012-09-19T13:45:47.433
> 
> 标签：c#, reflection

> **可能重复：**
> [如何使用反射调用泛型方法？](https://stackoverflow.com/questions/232535/how-to-use-reflection-to-call-generic-method)

我的实际代码如下所示：

```
Myclass component = go.GetComponent<Myclass>(); 
```

我想使用反射使它更加动态，所以我尝试了以下

```
Type component = Type.GetType("Myclass");
object componentInstance = Activator.CreateInstance(component);
componentInstance = go.GetComponent<component>(); 
```

对于最后一行，我收到以下错误

> 找不到类型或命名空间名称“组件”（您是否缺少 using 指令或程序集引用？）

有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:50:01.630

检查这篇文章：

[如何使用反射动态创建通用 C# 对象？](https://stackoverflow.com/questions/1151464/how-to-dynamically-create-generic-c-sharp-object-using-reflection)

准确显示您的需求。

# jquery - 选择和更改列表项

> ID：12496088
> 
> 赞同：1
> 
> 时间：2012-09-19T13:45:51.537
> 
> 标签：jquery, html, css

我有许多列表项，每个列表项都包含一个超链接。我想要做的是从每个链接中获取href，并使用“单击时”使用查询将其应用于列表项。这意味着整个 li 元素将是可点击的，而不仅仅是超链接。

当前的 HTML：

```
<ul class="menusidecourse">
<li><a href="LINK1" >Item 1</a></li>
<li><a href="LINK2" >Item 2</a></li>
</ul> 
```

我想要结束的内容（在 li 点击或准备好的文档上）：

```
<ul class="menusidecourse">
<li onclick="location.href='LINK1';"><a href="LINK1" >Item 1</a></li>
<li onclick="location.href='LINK2';"><a href="LINK2" >Item 2</a></li>
</ul> 
```

我已经尝试过这些路线（但没有运气）：

```
$('.menusidecourse li').click(function(){   
   var link = $('.menusidecourse li a', this).attr("href");
        $('.menusidecourse li', this).replaceWith('???');

    }); 
```

感谢您的关注！

*注意：必须这样做，因为菜单是由 joomla 动态生成的。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:48:19.663

像这样：

```
// add a click handler to the li element
$('.menusidecourse li').click(function(){
    // find the a element inside this li and get it's href   
    var link = $('a', this).attr("href");
    // navigate to the retrieved href
    window.location.href = link;
}); 
```

# python - 如何覆盖导入的 Python 模块中的常量？

> ID：12496089
> 
> 赞同：23
> 
> 时间：2012-09-19T13:45:55.453
> 
> 标签：python, module, python-import

在我的应用程序中，我在`example`名为`examplemod`.

**我的应用程序：**

```
from example import examplemod
examplemod.do_stuff() 
```

它像这样导入另一个模块`example`。

**例子mod.py：**

```
from example import config
# uses config
# then does stuff 
```

`config`使用常数。

**配置文件：**

```
CONSTANT = "Unfortunate value" 
```

我想`examplemod`在我的应用程序中使用时覆盖这个常量（将其设置为`CONSTANT = "Better value"`），并且我不想修改底层模块，因此我不必维护自己的包。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-19T13:52:58.450

是的，但它只能在完全限定的模块访问路径下按预期工作：

```
import example
example.examplemod.config.CONSTANT = "Better value"
example.examplemod.do_stuff() 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-19T14:27:30.300

谢谢大家的答案。他们为我指明了正确的方向，尽管他们都没有按书面规定工作。我最终做了以下事情：

```
import example.config
example.config.CONSTANT = "Better value"

from example import examplemod
examplemod.do_stuff()
# desired result! 
```

*（另外，我正在向模块维护者提交一个补丁，以使 CONSTANT 成为一个可配置的选项，所以我不必这样做，但同时需要安装 stock 模块。）*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T13:52:16.090

这称为[猴子补丁](http://en.wikipedia.org/wiki/Monkey_patch)，如果有另一种方法来完成相同的事情，它是相当常见的，但不是首选：

```
examplemod.config.CONSTANT = "Better value" 
```

问题是您依赖于内部`examplemod`并`config`保持不变，因此如果任一模块发生更改，这可能会中断。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T13:49:49.163

我不确定这是否足够，但是您是否尝试过：

```
from example import config
config.CONSTANT = "A desirable value" 
```

`examplemod`确保在导入之前执行此操作。这应该有效，因为 python 缓存导入，因此`config`您修改的将与`examplemod`获取的相同。

# spring - Spring Roo Tomcat 问题

> ID：12496091
> 
> 赞同：2
> 
> 时间：2012-09-19T13:46:12.750
> 
> 标签：spring, spring-mvc, spring-roo, maven-tomcat-plugin

我在 Spring Roo 和 Tomcat 上遇到了一个非常烦人的问题。在 spring roo 披萨店教程之后，我发出了以下命令：

```
project com.springsource.pizzashop

// Setup JPA persistence using EclipseLink and H2
jpa setup --provider ECLIPSELINK --database H2_IN_MEMORY

// Create domain entities
entity jpa --class ~.domain.Base --testAutomatically
field string --fieldName name --sizeMin 2 --notNull

entity jpa --class ~.domain.Topping --testAutomatically
field string --fieldName name --sizeMin 2 --notNull

entity jpa --class ~.domain.Pizza --testAutomatically
field string --fieldName name --notNull --sizeMin 2
field number --fieldName price --type java.math.BigDecimal
field set --fieldName toppings --type ~.domain.Topping
field reference --fieldName base --type ~.domain.Base

entity jpa --class ~.domain.PizzaOrder --testAutomatically --identifierType ~.domain.PizzaOrderPk
field string --fieldName name --notNull --sizeMin 2
field string --fieldName address --sizeMax 30
field number --fieldName total --type java.math.BigDecimal
field date --fieldName deliveryDate --type java.util.Date
field set --fieldName pizzas --type ~.domain.Pizza

field string --fieldName shopCountry --class ~.domain.PizzaOrderPk
field string --fieldName shopCity
field string --fieldName shopName

// Offer JSON remoting for all domain types trough Spring MVC
json all --deepSerialize
web mvc json setup
web mvc json all

web mvc setup
web mvc all --package ~.web 
```

然后从命令行我调用：

```
mvn tomcat:run 
```

当我在 Pizza 实体中添加新字段时，出现错误：

```
 SEVERE: Servlet.service() for servlet [pizza] in context with path [/pizza] threw exception [Request processing failed; nested exception is org.apache.tiles.impl.CannotRenderException: ServletException including path '/WEB-INF/layouts/default.jspx'.] with root cause
javax.servlet.jsp.JspTagException: No message found under code 'label_com_springsource_pizzashop_domain_pizza_newfield' for locale 'el_GR'.
    at org.springframework.web.servlet.tags.MessageTag.doStartTagInternal(MessageTag.java:184)
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
    at org.apache.jsp.tag.web.form.fields.input_tagx._jspx_meth_spring_005fmessage_005f0(input_tagx.java:661)
    at org.apache.jsp.tag.web.form.fields.input_tagx._jspx_meth_c_005fif_005f3(input_tagx.java:584)
    at org.apache.jsp.tag.web.form.fields.input_tagx.doTag(input_tagx.java:338)
    at org.apache.jsp.WEB_002dINF.views.pizzas.create_jspx._jspx_meth_field_005finput_005f6(create_jspx.java:329)
    at org.apache.jsp.WEB_002dINF.views.pizzas.create_jspx.access(create_jspx.java:310)
    at org.apache.jsp.WEB_002dINF.views.pizzas.create_jspx$Helper.invoke0(create_jspx.java:385)
    at org.apache.jsp.WEB_002dINF.views.pizzas.create_jspx$Helper.invoke(create_jspx.java:402)
    at org.apache.jsp.tag.web.form.create_tagx$Helper.invoke0(create_tagx.java:697)
    at org.apache.jsp.tag.web.form.create_tagx$Helper.invoke(create_tagx.java:738)
    at org.apache.jsp.tag.web.util.panel_tagx._jspx_meth_c_005fif_005f0(panel_tagx.java:193)
    at org.apache.jsp.tag.web.util.panel_tagx.doTag(panel_tagx.java:139)
    at org.apache.jsp.tag.web.form.create_tagx.doTag(create_tagx.java:242)
    at org.apache.jsp.WEB_002dINF.views.pizzas.create_jspx._jspx_meth_form_005fcreate_005f0(create_jspx.java:109)
    at org.apache.jsp.WEB_002dINF.views.pizzas.create_jspx._jspService(create_jspx.java:73)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:433)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:530)
    at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:927)
    at org.apache.jasper.runtime.PageContextImpl.doInclude(PageContextImpl.java:684)
    at org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:678)
    at org.apache.tiles.jsp.context.JspTilesRequestContext.include(JspTilesRequestContext.java:103)
    at org.apache.tiles.jsp.context.JspTilesRequestContext.dispatch(JspTilesRequestContext.java:96)
    at org.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)
    at org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
    at org.apache.tiles.renderer.impl.ChainedDelegateAttributeRenderer.write(ChainedDelegateAttributeRenderer.java:76)
    at org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:336)
    at org.apache.tiles.template.InsertAttributeModel.renderAttribute(InsertAttributeModel.java:210)
    at org.apache.tiles.template.InsertAttributeModel.end(InsertAttributeModel.java:126)
    at org.apache.tiles.jsp.taglib.InsertAttributeTag.doTag(InsertAttributeTag.java:311)
    at org.apache.jsp.WEB_002dINF.layouts.default_jspx._jspx_meth_tiles_005finsertAttribute_005f2(default_jspx.java:233)
    at org.apache.jsp.WEB_002dINF.layouts.default_jspx._jspService(default_jspx.java:96)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:433)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.apache.tiles.servlet.context.ServletTilesRequestContext.forward(ServletTilesRequestContext.java:241)
    at org.apache.tiles.servlet.context.ServletTilesRequestContext.dispatch(ServletTilesRequestContext.java:222)
    at org.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)
    at org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:690)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:644)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:627)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:321)
    at org.springframework.web.servlet.view.tiles2.TilesView.renderMergedOutputModel(TilesView.java:124)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

**编辑：**只是一点澄清。当我停止服务器并重新启动它时，一切正常，并且正常添加了该字段。我尝试使用 roo 命令和修改 java 代码来添加该字段。

有什么建议么？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:39:11.043

正如 Xaerxess 建议的那样：在您的`application.properties`(应该在`project-root/src/main/WEB-INF/i18n/`) 中缺少该行

```
label_com_springsource_pizzashop_domain_pizza_newfield=Label for newfield 
```

这些标签是为生成的实体字段生成的，至少如果您使用 web mvc Sp​​ring Roo 模块（虽然不能代表 web json），尽管在我当前的项目中仅用于默认语言环境（可能是项目开始时的配置错误） .

有点神秘的是你的代码没有显示字段的生成`newfield`。您是否在实体中手动引入此字段？

# r - 通过r中图例中的符号删除线条

> ID：12496093
> 
> 赞同：5
> 
> 时间：2012-09-19T13:46:17.063
> 
> 标签：r, plot, legend

如何删除与 r 图例中的符号相交的线？看过 ?legend 但似乎找不到答案..

```
plot.new()

legend("top",ncol=1,c("Mound reef (M)","Spur and Groove (SG)",
    "Rubble Fields (RF)","Coral Walls (CW)","Mounds and rubble fields (MR)",
    "Mounds, Monostand walls and Rubble (MMR)"),pch=3:8, title="Reef Types", 
    cex=1, lwd=2) 
```

![在此处输入图像描述](../Images/02f63338f1f07ba7672e10fa6ddd72dd.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T13:48:34.717

只需添加 `lty=NULL`

```
plot.new()
legend("top",ncol=1,c("Mound reef (M)","Spur and Groove (SG)",
                      "Rubble Fields (RF)","Coral Walls (CW)",
                      "Mounds and rubble fields (MR)",
                      "Mounds, Monostand walls and Rubble (MMR)"),
       pch=3:8, title="Reef Types",cex=1,lwd=2, lty=NULL) 
```

**编辑**

`lwd=2`正如 Josh O'Brien 指出的那样，删除就足够了，因此，您的代码应该是：

```
plot.new()
legend("top",ncol=1,c("Mound reef (M)","Spur and Groove (SG)",
                      "Rubble Fields (RF)","Coral Walls (CW)",
                      "Mounds and rubble fields (MR)",
                      "Mounds, Monostand walls and Rubble (MMR)"),
       pch=3:8, title="Reef Types",cex=1) 
```

![在此处输入图像描述](../Images/f98f4f25e9b7fbcd2dfd179b7dba6271.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T13:51:55.273

您只得到这些行是因为您指定了`lwd=2`，它*告诉*`legend()`函数您想要“线宽 = 2”。如果您不想要线条，只需删除`lwd=`参数。

# xslt - 将 URL 参数放入 XSL 变量中

> ID：12496099
> 
> 赞同：0
> 
> 时间：2012-09-19T13:46:34.433
> 
> 标签：xslt

我有一个 XSL-XML 页面，它以特定的 url 打开，例如[http://www.example.xml](http://www.example.xml) 有时 URL 有一些参数，例如[http://www.example.xml?pLanguage=nl&source=enews](http://www.example.xml?pLanguage=nl&source=enews)

我想从 URL 中提取源参数并将其放入 xsl:variable。

我想用 javascript 和 window.top.location.search.substring(1); 放我不知道如何将结果放入 xsl:variable。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:59:15.877

XSLT 处理器通常提供一种工具来设置样式表中的全局参数值。例如，[`XSLTProcessor`在 Gecko 中](https://developer.mozilla.org/en-US/docs/The_XSLT_JavaScript_Interface_in_Gecko/Setting_Parameters)。

这是一个适用于基于 Gecko 的浏览器（例如 FireFox）的示例。

首先，您需要一个带有 xsl:param 名称的样式表。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<!-- file: /xslt-stylesheet.xsl -->
<xsl:param name="pLanguage"></xsl:param>
<xsl:param name="source"></xsl:param>

<xsl:template match="/">
  <root>
    <pLanguage><xsl:value-of select="$pLanguage"/></pLanguage>
    <source><xsl:value-of select="$source"/></source>
   </root>
</xsl:template>

</xsl:stylesheet> 
```

然后将此javascript放入您的html文件中以供浏览器解释：

```
// Var to hold the transformed document
var transformeddoc = null;
// source document to transform. We'll use document.body as an easy example.
var sourcedoc = document.body;
// extract parameters from the window's query string
var params = extractparams(window.location.search);
// create an xslt processor
var xsltproc = new XSLTProcessor();
// set stylesheet paramaters
xsltproc.setParameter(null, 'pLanguage', params.pLanguage);
xsltproc.setParameter(null, 'source', params.source);
// load xslt document
var xslt = document.implementation.createDocument("", "test", null);
xslt.addEventListener("load", processXslt, false);
xslt.load("/xslt-stylesheet.xsl");

// after document is loaded, perform the transform
function processXslt() {
    xsltproc.importStylesheet(xslt);
    transformeddoc = xsltproc.transformToDocument(sourcedoc);
    // transformeddoc is now a DOM of this xml:
    // <root><pLanguage>pl</pLanguage><source>sc</source></root>
}

function extractparams(querystring) {
    var params = {'pLanguage':'', 'source':''};
    var qs = querystring.replace(/^\?/, '');
    qs = qs.split('&');
    for (var i=0, kv; i<qs.length; i++) {
        kv = qs[i].split('=');
        if (kv.length===2 && kv[0] in params) {
            params[kv[0]] = kv[1];
        }
    }
    return params;
} 
```

# java - 使用 RPM 打包 jar 时，指定“noarch”是个好主意吗？

> ID：12496109
> 
> 赞同：4
> 
> 时间：2012-09-19T13:47:03.547
> 
> 标签：java, jar, rpm

我的理解是，只要您有 JVM，jar 就可以在任何平台上运行，因此，是否应该为任何简单 jar 包提供“noarch”，以便 rpm 可以在更多机器上使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T13:12:46.043

除非您的包包含 JNI（Java 本机接口）部分，否则您应该始终使用**BuildArch: noarch**。这样，您将获得可以安装在任何架构上的单个 RPM。

当然，这并没有说明在任何架构上工作。有一些简单的方法可以破坏 Java 和 JVM 的多架构承诺（通常将架构特定假设中的硬编码到代码中）。但从打包的角度来看，noarch 是 Java 世界中的默认设置。

# java - 调试停止后如何清除悬空的ServerSocket，而不重新启动matlab？

> ID：12496111
> 
> 赞同：0
> 
> 时间：2012-09-19T13:47:11.477
> 
> 标签：java, sockets, matlab, tcpserver

我有一些类似下面的代码，使用 matlab 中的 java 套接字。我不认为解决方案需要特定于 matlab ......

问题：如果我在 socket 可以被 server_socket.close 关闭之前点击 debug-quit，它会保持悬空/打开状态。唯一可行的解​​决方法是停止并重新启动 matlab，我猜这会杀死后台套接字。如果此函数保持打开状态，我如何更一般地关闭 ServerSocket？

```
function server_socket = my_server( opts ) 
    % Run the server, my_server.m
    import java.net.ServerSocket
    import java.io.*
    server_socket = ServerSocket(6001);
        server_socket.setSoTimeout(5000);
        io_socket = server_socket.accept(); 
        fprintf(1, 'Client connected\n');
          % DO STUFF 1
          BreakPointHere = 1; 
          % DO STUFF 2
        % clean up
        server_socket.close; % badness if 'dbquit' before this
        io_socket.close;

end 
```

我试过用谷歌搜索，但不太确定要使用什么关键字，并且关于 java 套接字存在信息过载......

*编辑*：一个解决方案是使它成为一个脚本而不是一个函数（即删除第一行和最后一个'end'）。这样，在调试终止后 server_socket 仍然存在。但我想更好地了解处理套接字的位置，并且不希望所有其他变量都必须持续存在。

# configuration - MSMQ 创建错误：工作组安装计算机不支持该操作/用户的内部消息队列证书不存在

> ID：12496112
> 
> 赞同：8
> 
> 时间：2012-09-19T13:47:20.923
> 
> 标签：configuration, active-directory, msmq, workgroup

这让我有点发疯，所以如果有人能帮忙，我将非常感激！

我正在尝试将消息从域内的服务器发送到公共队列到域控制器，但出现错误：

'工作组安装计算机不支持该操作。'

我已经在 Domain COntroller 上设置了 MSMQ，并在 Public Queues 文件夹中创建了一个消息队列。

我知道之前有人问过类似的问题：

[为什么 MSMQ 认为我在工作组计算机上？](https://stackoverflow.com/questions/5951677/why-does-msmq-think-im-on-a-workgroup-computer)

但我已经尝试了所有建议的方法，但我仍然遇到同样的错误。

因此，带您了解我从建议中尝试过的内容：

a) 没有选择 AD 集成作为设置选项 - 安装 msmq 时选择了此选项

b) 选择了 AD 集成但未能初始化；检查事件日志 - 我检查了我的事件日志并且我收到消息 - 包的可选更新 MSMQ-ADIntegration MSMQ 服务器包已成功打开。

c) 检查 Active Directory 中的孤立对象 - 我检查了 Active Directory 用户和计算机中的 LostAndFound 目录以检查 AD 中没有孤立对象

我已按照以下说明操作： [http ://technet.microsoft.com/en-us/library/cc730960.aspx](http://technet.microsoft.com/en-us/library/cc730960.aspx)

我还卸载了重新启动并重新安装并再次检查我没有任何孤立对象。

发送消息的所有服务器都需要安装 msmq 吗？目前我只在域控制器上拥有它，我认为这已经足够了。

编辑 1：我已将 msmq 添加到所有发送消息的服务器（它们是负载平衡的，因此可以是其中任何一个），它们已经安装了 msmq，但没有公共队列，所以我重新安装并再次安装（选择时选中所有适当的框msmq -Directory 服务集成/路由服务等。他们现在有公共队列我现在收到一个新错误，如下所示：

'用户的内部消息队列证书不存在。'

编辑2：

我仍在努力，但已经取得了一些进展——当我检查我的域控制器的证书颁发机构时，它就在那里，但是当我查看 IIS 时，它缺少虚拟目录 CertServ——请参阅链接以获取解释：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms755466%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms755466%28v=vs.85%29.aspx)

一旦我解决了这个问题，我将为我的每台服务器申请一个计算机证书，如下所示：

[http://technet.microsoft.com/en-us/library/cc740173%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc740173%28v=ws.10%29.aspx)

希望这会奏效！

编辑 3：好的，由于互联网垃圾的原因，我无法申请证书，但希望这将在接下来的几天内得到纠正。所以我尝试了自我认证，但没有产生任何影响并取消了 UseAuthentication = true, UseEncryption = true 并取消选中已验证的框并将加密设置为可选。我不再收到一条错误消息，这让我相信身份验证有问题（与 Active Directory 相关）但是即使它没有失败，因为没有显示错误消息并且我希望显示的页面在我的网站上显示。我的域控制器公共队列消息中没有消息...

当我尝试在导致问题的域内执行此操作时，我已在本地执行此操作。

编辑4：

只是为了让您知道我在这方面的进展 - 我想确保消息被发送到域控制器，所以我查看了 MSMQ End2End 监控 - 所以在每个 Web 服务器上（消息发送自）和事件查看器>应用程序和服务日志> Microsift> Windows>MSMQ>End2End中的域控制器（消息发送到）我启用了日志记录。

当我尝试在 Web 服务器上再次发送消息时，记录了 2 个 End2End 事件：

1.  ID 为 CN=msmq,CN=ETAILWEB03,CN=Computers,DC=Etail,DC=local\7 的消息已发送到队列 PUBLIC=d7ee680c-11ec-4d9a-aa31-528dcc9b1eba

2.  通过网络发送的消息

在 End2End 事件中的域控制器上：

1.  消息来自网络

所以从这里看来消息已经到达所以我现在正在寻找消息丢失的位置：

[https://groups.google.com/forum/?fromgroups=#!topic/microsoft.public.msmq.networking/88FYCvO2YwQ](https://groups.google.com/forum/?fromgroups=#!topic/microsoft.public.msmq.networking/88FYCvO2YwQ)

编辑5：

好的，如下：

[MSMQ 消息已收到但未送达 Windows 2008 R2](https://stackoverflow.com/questions/6469095/msmq-messages-received-but-not-delivered-win2k8r2)

我添加了一个匿名用户，并且能够向队列中添加一条消息，这很好，但我现在需要退后一步，只让用户完全控制应该接收消息的用户 - 那么网络服务器的用户名是什么以及为了安全起见，我需要对消息进行身份验证，所以回到我之前的问题之一。

编辑6：

仍在为此苦苦挣扎，但走得更远了……

在域控制器（证书颁发机构和接收 MSMQ 所在的位置）上配置了证书自动注册，我在 Web 服务器（发送消息）上运行以下命令 - 运行 - gpupdate /force 并重新启动每个 Web 服务器。

我确保在所有 Web 服务器上都检查了身份验证并在消息队列属性中选择了正文。我还更新了所有 Web 服务器上的证书以确保它们是最新的我现在收到以下错误：

队列路径名无效。

我查看了以下链接：

[http://blogs.msdn.com/b/johnbreakwell/archive/2010/03/24/understanding-how-msmq-security-blocks-rpc-traffic.aspx](http://blogs.msdn.com/b/johnbreakwell/archive/2010/03/24/understanding-how-msmq-security-blocks-rpc-traffic.aspx)

编辑 7：

好的，因此要尝试使其正常工作，似乎无法识别 Web 应用程序用户，因此在 Web 服务器上我转到 IIS > 应用程序池 > 高级设置 > 身份并将身份设置为网络服务。完成此操作后，我在运行应用程序时不再收到错误消息，但该消息似乎不在我期望的公共队列中，因此我现在将再次查看 end2end 以查看是否可以找到它去了哪里。

**使固定**

一旦 IIS 设置为网络服务，我会再次检查正在发送的消息是否经过身份验证，并且接收消息的域控制器是否经过身份验证检查。我为我的公共队列中的每个人提供了完全访问权限，并且成功了！

老实说，在此过程中进行了很多试验和错误，但希望这篇文章对其他人有所帮助 - 感谢 john B，我读过的关于这个主题的大部分内容都是由他以一种或另一种形式发布的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T23:44:40.770

'用户的内部消息队列证书不存在。'

以交互方式登录到将发送消息的每个服务器。
使用运行发送应用程序的用户帐户。
这将为该帐户创建证书，每台机器一个。

# java - 将 SimpleJdbcTemplate 转换为 DataSource 以便能够从另一个资源中访问资源

> ID：12496119
> 
> 赞同：0
> 
> 时间：2012-09-19T13:47:34.043
> 
> 标签：java, spring, rest, sqldatasource, jdbctemplate

我正在使用 Java Spring 创建一个 REST 接口

我正在尝试从另一个资源 B 的 .get() 函数中访问特定资源 A 的 .get() 函数。（以避免复制粘贴一些 DB-Query 代码）

[RESOURCE-A] --access--> [RESOURCE-B] 然后返回组合结果

这可能吗？如果是这样，怎么做？

我的想法是尝试用我自己的来自 A 的 jdbcTemplate 填充资源 B 的 DataSource，然后调用 .get() 函数......这失败了，因为我无法将 jdbcTemplate 转换为 DataSource ;(

```
// within ResourceA...

ResourceB rB = new ResourceB();
rB.setDataSource( (DataSource) this.jdbcTemplate );
theResultItem.parentList = (List<ResourceB>) rB.get("country", language); 
```

是否有可能从 SimpleJDBCTemplate 创建数据源？或任何其他方式来交叉访问资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:04:33.957

有时喝点咖啡有助于...

我现在刚刚在第二个资源中插入了一个额外的方法，它可以帮助我注入 jdbcTemplate：

```
 //within resource B
    public void setSimpleJdbcTemplate(SimpleJdbcTemplate jdbcTemplate) {
     this.jdbcTemplate = jdbcTemplate;
    } 
```

我现在从资源 A 中调用

```
 //within resource A
    ResourceB rB = new ResourceB();
    rB.setSimpleJdbcTemplate(jdbcTemplate);
    theResultItem.parentElements = (List<ResourceB>) pr.get("country", language); 
```

# sql - 将具有 id 的行插入到具有自动增量的表中

> ID：12496123
> 
> 赞同：4
> 
> 时间：2012-09-19T13:47:39.397
> 
> 标签：sql, sql-server, sql-server-2008-r2, auto-increment

我想知道是否可以将一行“重新插入”回在 Id 列上具有自动增量的表中。我有一个“未处理”表和一个“已处理”表，“未处理”具有自动增量，当它们被处理时，它们移动到“已处理”表并保持相同的 ID。一行可能会移回“未处理”，因此我需要能够再次“重新插入”具有相同 ID 的该行。以防万一我不清楚，我从问题的定义中知道 Id 之间永远不会发生冲突。

此外，这是在 SQL Server 2008 R2 上完成的

谢谢，汤姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T13:48:49.677

是的。

```
set identity_insert YourTable on
insert YourTable (YourID, OtherField) values ( ... 
set identity_insert YourTable off 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T13:53:52.730

是的，这是可能的，您只需在 INSERT 语句中为 ID 列提供所需的值，并首先为所需的表启用“set identity_insert”（然后为安全起见禁用它）

这几乎是这样的（伪代码）：

```
INSERT #1 --created id 1
INSERT #2 --created 2
INSERT #3 -- created 3
DELETE 2 --2 gone, leaves a gap
set identity_insert your_table on
INSERT VALUES ( 2, ... ) -- filled gap again
set identity_insert your_table off 
```

无论如何，如果没有反对意见，我建议在一张桌子上使用旗帜。

所以你可以简单地翻转旗帜，你永远不必挣扎/确保你的身份

# wcf - 如何在 Tridion 服务器上配置 Tridion 核心服务？

> ID：12496125
> 
> 赞同：6
> 
> 时间：2012-09-19T13:47:51.003
> 
> 标签：wcf, configuration, wcf-binding, tridion

当我在以下位置访问 Tridion 核心服务 URL 时：`http://tridion_ip/webservices/CoreService2011.svc`我收到运行时错误。我直接从 CMS 服务器访问 URL。

> 找不到与端点方案 https 匹配的基地址

当我查看 IIS 时，我可以看到 /webservices/ 目录显示以下核心服务文件：

*   核心服务.svc
*   CoreService2011.svc
*   网页配置

我应该在该地址看到 Web 服务页面吗？还是这是预期的行为？

**编辑：**出安全元素如下：

```
<wsHttpBinding>
 <binding name="CoreService_wsHttpBinding" transactionFlow="true" maxReceivedMessageSize="10485760">
  <readerQuotas maxStringContentLength="10485760" maxArrayLength="10485760" />

     <!--
      <security mode="Message">
    <message clientCredentialType="Windows" />
  </security>
     -->

  <!-- For LDAP authentication of message credentials, use the following settings: -->
  <security mode="TransportWithMessageCredential">
    <message clientCredentialType="UserName" />
  </security>

</binding> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T14:22:31.303

在 IIS 中检查您的网络服务。这应该是应用程序并检查安装服务的 web.config。

可能是您面临多站点托管问题

将此行放在 webconfig 中，如果它已经存在，则替换为旧行

```
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" 
                           multipleSiteBindingsEnabled="true"/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T14:45:16.997

您能否发布服务器配置的安全部分？您发布的错误通常是指`security mode`与其他安全设置不匹配。以下是默认设置的样子：

```
 <wsHttpBinding>
    <binding name="CoreService_wsHttpBinding" 
             transactionFlow="true" 
             maxReceivedMessageSize="10485760">
      <readerQuotas maxStringContentLength="10485760" 
                    maxArrayLength="10485760" />
      <security mode="Message">
        <message clientCredentialType="Windows" />
      </security>
    </binding>
  </wsHttpBinding> 
```

拥有`TransportWithMessageCredential`或暗示使用and 会抛出异常，`Transport`就像通过 HTTP 访问一样`security mode``HTTPS`

**更新**这确实是我所说的。您有 TransportWithMessageCredential 假设您有 HTTPS。如果您打算使用 HTTPs，您应该在您的网站上禁用 HTTP，但请记住，它还需要相当多的配置才能使客户端使用 HTTPs。您始终可以将消息安全模式与 HTTP 一起使用。您未注释的部分仅适用于具有消息安全性的 LDAP。您可以完美地使用具有传输安全性的 LDAP，然后使用 HTTP。

# java - Apache Geronimo 3 的 Netbeans 插件

> ID：12496127
> 
> 赞同：4
> 
> 时间：2012-09-19T13:48:00.283
> 
> 标签：java, netbeans-7, netbeans-plugins, geronimo

Geronimo 3 是否存在 Netbeans 插件？

我无法在安装 Geronimo 3 的情况下为 Geronimo 2 工作（这是有道理的），也无法为 Geronimo 3 找到一个。

# javascript - 显示/隐藏表格内的所有 tr-s

> ID：12496131
> 
> 赞同：0
> 
> 时间：2012-09-19T13:48:13.970
> 
> 标签：javascript, jquery, html-table, drupal-7

这是html结构

```
<table class="views-table cols-3">
      <caption>
         <h2>LINK(which will hide/show all trs in this table)</h2>
      </caption>
   <thead>
   <tbody>
   ...
   </tbody>
</table> 
```

该表在*同一个类中重复***n**次。请帮助隐藏/显示所有**tr** -s 或单击链接的表中的整个 js 或 jquery 脚本。***`<tbody>`***

 **** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:09:33.523

```
 $('.views-table h2').click(function() {
      $(this).closest('table').find('tbody').toggle();
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T14:04:08.980

```
$(".views-table h2").click(function(){
       var table = $(this).parents("table");
       var tbody = table.children("tbody");
       if(tbody.is(':visible')){
               tbody.hide();
       }else{
           tbody.show();
       }

}); 
```

试试这个链接[http://jsfiddle.net/wFcpP/8/](http://jsfiddle.net/wFcpP/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:55:18.517

在 jQuery 中：

```
(jQuery.noConflict())(function($){
    $('.views-table cols-3 h2').click(function(){
        if($(this).parent('.views-table').find('TBODY > TR')[0].is(':visible')) {
            $(this).parent('.views-table').find('TBODY > TR').hide();
        } else {
            $(this).parent('.views-table').find('TBODY > TR').show();
        }
    });
}); 
```***

# javascript - 除非其初始化/渲染延迟，否则不会触发 Google +1 回调

> ID：12496132
> 
> 赞同：1
> 
> 时间：2012-09-19T13:48:15.520
> 
> 标签：javascript, callback, google-plus

看看[这个 jsbin 示例](http://jsbin.com/opevug/5/)。

它包含三个 Google +1 按钮，所有这些按钮都应在单击时触发警报。

不同之处在于 - 第一个按钮在 document.ready 上初始化，第二个按钮在 200 毫秒后初始化，另一个在 document.ready 后一秒初始化。

第一个按钮的回调无法正常工作 - 单击它不会触发警报。

这是一个已知的问题？除了向 Google +1 提交错误报告之外还有什么有趣的事情吗？还有其他解决方法吗？如果我通过提供超时来解决这个问题，那么合理的值是多少？

我相信这是在过去几周的某个时候引入的回归。 [这应该向哪里报告？](https://webapps.stackexchange.com/questions/31286/where-should-i-report-a-bug-relating-to-google-1-button)

**更新**：我[将此发布到 Google Plus 的讨论组](https://groups.google.com/forum/?fromgroups=#!topic/google-plus-developers/srBHeCQ88nE)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:07:57.920

如果您尝试报告错误，请在此处查看“报告问题”： [https ://developers.google.com/+/support](https://developers.google.com/+/support)

我无法重现您的错误。所有三个按钮都会触发警报。

# java - RMI 客户端“无法转换为”异常

> ID：12496135
> 
> 赞同：0
> 
> 时间：2012-09-19T13:48:20.760
> 
> 标签：java, rmi

假设我有这些行：

```
Registry registry = LocateRegistry.getRegistry(2121);
RemoteObject probe = (RemoteObject)registry.lookup(REMOTE_OBJ_NAME);//this throws exception
probe.doSomething(); 
```

例外是：

> `java.lang.ClassCastException: $Proxy1 cannot be cast to app.RemoteObject`

为了清楚起见，`RemoteObject`实现了一个扩展接口`java.rmi.Remote`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T13:55:55.683

您需要转换为扩展远程的接口

```
RemoteInterface probe = (RemoteInterface)registry.lookup(REMOTE_OBJ_NAME);
probe.doSomething(); 
```

这是因为您永远不会取回实际对象，而是将任何方法调用转发给实际对象的存根对象

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-23T03:52:11.150

如果您的类实现了 Serializable，则不要扩展 Remote

# jquery - 如何更改导航栏中按钮文本的字体大小？

> ID：12496137
> 
> 赞同：2
> 
> 时间：2012-09-19T13:48:23.813
> 
> 标签：jquery, iphone, html, css, jquery-mobile

我正在使用 jQuery Mobile 制作一个移动网站。在页面中，我使用了一个带有三个按钮的导航栏。这些按钮有一个文本值，我想更改它的字体大小。但我不确定如何做到这一点，请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T13:51:32.033

在 jQuery Mobile 样式表之后包含您自己的样式表。

采用`.ui-navbar .ui-btn-text { font-size: your font-size here; }`

# jquery - jQuery：提交选择器未加载

> ID：12496138
> 
> 赞同：0
> 
> 时间：2012-09-19T13:48:27.667
> 
> 标签：jquery, jquery-selectors

这是我的 HTML 和 jQuery 代码。当我单击按钮时，浏览器没有任何响应。

```
<html>
<head>
<title>jQuery Test</title>

   <script type="text/javascript" src="js/jquery.js"></script>
   <script type="text/javascript" src="js/toggle.js"></script>

</head>

<body>

  <input type="submit" value="button">
</body>
</html> 
```

jQuery

```
$(':submit').click(function() {
    // Act on the event
    $('submit').attr('Please wait', 'value')
}); 
```

我正在关注的在线教程。

![在此处输入图像描述](../Images/06dfaa58805c5fba9859d9205316c9d4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:51:18.393

您应该`$(this)`在回调中参考：

```
$(':submit').click(function() {
    // Act on the event
    $(this).attr('value', 'Please wait')
}); 
```

无论如何， an`<input>`是`<form>`元素的一部分 - 您应该绑定`submit`表单本身的事件，而不是单个元素。

如果您只想要一个按钮，请坚持使用`<button>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:52:43.890

```
$("input[type='submit']").click(function() {
    // Act on the event
    $(this).val('Please wait');
}); 
```

应该这样做。

# javascript - 从下拉列表或列表框中删除所有项目的最快方法？

> ID：12496139
> 
> 赞同：2
> 
> 时间：2012-09-19T13:48:26.880
> 
> 标签：javascript

我有一个包含一千多个项目的下拉列表。一旦我点击`clear`按钮，它应该清除所有项目。为了删除我尝试循环。

从下拉列表或列表框中删除所有项目的最快方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T13:50:01.130

将选择框的 innerHTML 设置为空字符串。

```
var selectBox = document.getElementById("selectboxID");
selectBox.innerHTML = ""; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T13:52:33.770

如果您使用的是 jQuery，则可以选择：

```
$("#selectboxID").empty(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T13:52:47.313

感谢您的快速回复 这个怎么样？document.getElementById(id).options.length = 0;

# jquery - 你能在 iPad 上自动播放 HTML5 视频吗？

> ID：12496144
> 
> 赞同：125
> 
> 时间：2012-09-19T13:48:35.393
> 
> 标签：jquery, ios, objective-c, html, cocoa-touch

`<video>`tags`autoplay="autoplay"`属性在 Safari 中运行良好。

在 iPad 上测试时，必须手动激活视频。

我认为这是一个加载问题，所以我运行了一个循环检查媒体的状态：

```
videoPlay: function(){
    var me = this;
    console.log('STATE: ' + $("#periscopevideo").get(0).readyState);
    if ($("#periscopevideo").get(0).readyState != 4){
      setTimeout(function(){me.videoPlay();}, 300);
    }
    else {
      $("#periscopevideo").get(0).play();
    }
} 
```

`0`iPad 上的状态保持不变。在我的桌面 safari 上，它通过`0`，`1`最后`4`. 在 iPad 上，只有`4`当我手动点击“播放”箭头时才能到达。

`$("#periscopevideo").get(0).play()`此外，通过点击调用`onClick`也可以。

苹果对自动播放有任何限制吗？（顺便说一下，我正在运行 iOS 5+）。

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-09-19T13:50:28.590

**iOS 10 更新**

自 iOS 10 起，自动播放的禁令已解除 - 但有一些限制（例如，如果没有音轨，则 A 可以自动播放）。

要查看这些限制的完整列表，请参阅官方文档：[https ://webkit.org/blog/6784/new-video-policies-for-ios/](https://webkit.org/blog/6784/new-video-policies-for-ios/)

**iOS 9 及之前版本**

从 iOS 6.1 开始，**不再可以在 iPad 上自动播放视频。**

我对他们为什么禁用自动播放功能的假设？

好吧，由于许多设备所有者在他们的设备上都有数据使用/带宽限制，我认为 Apple 认为用户应该自己决定何时开始使用带宽。

* * *

经过一番研究，我在 Apple 文档中发现了以下关于 iOS 设备自动播放的摘录，以证实我的假设：

> “Apple 已决定通过脚本和属性实现禁用 iOS 设备上的视频自动播放。
> 
> 在 Safari 中，在 iOS 上（适用于所有设备，包括 iPad），用户可能在蜂窝网络上并按数据单位收费，预加载和自动播放被禁用。**在用户启动数据之前不会加载数据。**" -**[苹果文档。](http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html)**

[**以下是Safari HTML5 参考页面**](https://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/AudioandVideoTagBasics/AudioandVideoTagBasics.html)上的一个单独警告，说明为什么无法在 iOS 上的 Safari 中播放嵌入式媒体：

> **警告**：为防止用户自费通过蜂窝网络进行未经请求的下载，嵌入式媒体无法在 iOS 上的 Safari 中自动播放 - 用户始终会启动播放。一旦开始播放，iPhone 或 iPod touch 上会自动提供控制器，但对于 iPad，您必须设置控件属性或使用 JavaScript 提供控制器。

* * *

这意味着（就代码而言）Javascript`play()`和`load()`方法在用户开始播放之前是不活动的，除非*or*`play()`方法`load()`由用户操作（例如点击事件）触发。

基本上，用户启动的播放按钮有效，但`onLoad="play()"`事件无效。

例如，这将播放电影：

```
<input type="button" value="Play" onclick="document.myMovie.play()"> 
```

而以下在 iOS 上不会执行任何操作：

```
<body onload="document.myMovie.play()"> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-11-12T06:01:49.483

我想首先说我意识到这个问题已经过时并且已经有了一个公认的答案；但是，作为一个不幸的互联网用户，使用这个问题作为结束只是在不久之后（但不是在我让我的客户有点不安之前）被证明是错误的手段，我想添加我的想法和建议。

虽然@DSG 和@Giona 是正确的，并且他们的答案没有任何问题，但您可以使用一种创造性的机制来“绕过”，可以说是这个限制。这并不是说我纵容规避此功能，恰恰相反，只是一些机制让用户仍然“感觉”好像视频或音频文件是“自动播放”。

快速的解决方法是在移动页面的某处隐藏一个视频标签，因为我建立了一个响应式网站，我只为较小的屏幕这样做。视频标签（HTML 和 jQuery 示例）：

HTML

```
<video id="dummyVideo" src="" preload="none" width="1" height="2"></video> 
```

jQuery

```
var $dummyVideo = $("<video />", {
  id: "dummyVideo",
  src: "",
  preload: "none",
  width: "1",
  height: "2"
}); 
```

在页面上隐藏的情况下，当用户“点击”观看电影（仍然是用户交互，无法绕过该要求）而不是导航到辅助观看页面时，我会加载隐藏的视频。这主要是因为媒体标签并未真正使用，而是提升为 Quicktime 实例，因此根本不需要可见的视频元素。在“click”（或移动设备上的“touchend”）的处理程序中。

```
$(".movie-container").on("click", function() {
  var url = $(this).data("stream-url");
  $dummyVideo.attr("src", url);
  $dummyVideo.get(0).load(); // required if src changed after page load
  $dummyVideo.get(0).play();
}); 
```

还有中提琴。就用户体验而言，用户单击要播放的视频，Quicktime 打开播放他们选择的视频。这仍然在视频只能通过用户操作播放的限制范围内，因此我不会强迫任何不决定使用此服务观看视频的人提供数据。我在试图弄清楚 Youtube 究竟是如何通过他们的手机实现这一点时发现了这一点，这本质上是一些非常好的 Javascript 页面构建和花哨的元素隐藏，就像在视频标签的情况下一样。

tl;dr 这是一个有点“解决方法”，可以尝试在 iOS 设备上创建“自动播放”UX 功能，而不会超出 Apple 的限制，并且仍然让用户决定是否要观看视频（或最喜欢的音频，尽管我'没有测试）自己没有未经他们的许可刚刚加载。

此外，对于来自 sleep.fm 的评论者，不幸的是，这仍然不能解决您的问题，即基于时间的音频播放。

我希望有人觉得这些信息有用，它可以为我节省一周的坏消息传递给一个坚持认为他们有这个功能的客户，我很高兴最终找到一种方法来传递它。

**编辑**

进一步发现表明上述解决方法仅适用于 iPhone/iPod 设备。iPad 在全屏之前在 Safari 中播放视频，因此您需要一些机制来在播放前调整视频的点击大小，否则您最终会得到音频而没有视频。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-11-15T03:27:31.530

刚设置

`webView.mediaPlaybackRequiresUserAction = NO;`

自动播放适用于我在 iOS 上。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-09-29T18:54:59.633

从 iOS 10 开始，视频现在**可以**自动播放，但前提是它们要么静音，要么没有音轨。耶！

简而言之：

*   `<video autoplay>`对于满足以下条件的元素，元素现在将遵循自动播放属性：
    *   `<video>`如果元素的源媒体不包含音轨，则元素将被允许在没有用户手势的情况下自动播放。
    *   `<video muted>`元素也将被允许在没有用户手势的情况下自动播放。
    *   如果`<video>`元素获得音轨或在没有用户手势的情况下取消静音，则播放将暂停。
    *   `<video autoplay>`元素只有在屏幕上可见时才会开始播放，例如当它们滚动到视口中时，通过 CSS 可见，并插入到 DOM 中。
    *   `<video autoplay>`如果元素变得不可见，例如被滚动出视口，它们将暂停。

更多信息在这里： [https ://webkit.org/blog/6784/new-video-policies-for-ios/](https://webkit.org/blog/6784/new-video-policies-for-ios/)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-09-19T13:51:07.740

在此[Safari HTML5 参考](https://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/AudioandVideoTagBasics/AudioandVideoTagBasics.html)中，您可以阅读

> 为了防止用户自费通过蜂窝网络进行未经请求的下载，嵌入式媒体无法在 iOS 上的 Safari 中自动播放——用户始终会启动播放。一旦开始播放，iPhone 或 iPod touch 上会自动提供控制器，但对于 iPad，您必须设置控件属性或使用 JavaScript 提供控制器。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-06-29T13:45:34.617

首先让视频静音以确保在 ios 中自动播放，然后根据需要取消静音。

```
<video autoplay loop muted playsinline>
  <source src="video.mp4?123" type="video/mp4">
</video>

<script type="text/javascript">
$(function () {
  if (!navigator.userAgent.match(/(iPod|iPhone|iPad)/)) {
    $("video").prop('muted', false);
  }
});
</script> 
```

# java - Java方法在一种情况下正确地看到了继承，但在另一种情况下却没有，罪魁祸首是什么？

> ID：12496147
> 
> 赞同：0
> 
> 时间：2012-09-19T13:48:44.800
> 
> 标签：java, inheritance, polymorphism

找不到方法看不到继承的原因。我在这里想念什么？

```
public class Rate extends BaseResource
public class GenericQuote extends BaseResource
public class Payment extends GenericQuote

public void handleMediationErrors(BaseResource response) 
```

`handleMediationErrors(myRate)` **<-- 工作**
`handleMediationErrors(myPayment)` **<-- 在编译时失败告诉我它`BaseResource`不希望`Payment`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:54:45.003

您给出的示例没有任何问题-也许您`BaseResource`在其中一个类中使用了不同的类（导入不同的类或在其他地方单独声明-这可能会引起混淆！）

为了证明这一点，这个例子完美编译：

```
class BaseResource {}
class Rate extends BaseResource {}
class GenericQuote extends BaseResource {}
class Payment extends GenericQuote {}

public class Test {

    public void handleMediationErrors(BaseResource response) {}

    public static void main(String[] args) {
        new Test().handleMediationErrors(new Payment());
        new Test().handleMediationErrors(new Rate());
        new Test().handleMediationErrors(new GenericQuote());
        new Test().handleMediationErrors(new Payment());
    }
} 
```

# php - 将单选按钮值传递给表单提交

> ID：12496159
> 
> 赞同：2
> 
> 时间：2012-09-19T13:49:12.707
> 
> 标签：php, radio-button, form-submit

我想知道是否有人可以帮助我。

我整理了[这个](http://www.mapmyfinds.co.uk/chris/test.php)页面，允许用户查看保存在他们帐户中的记录。

我现在要做的是添加用户可以选择单选按钮的功能，单击“位置详细信息”图标，然后他们将被带到与他们选择了收音机的记录相关的“详细信息页面”按钮反对。

我遇到的问题是，无论我选择哪个单选按钮，当我单击图标时，我总是会被带到最后一条记录的“详细信息页面”。**（*** *NB* * 就这篇文章而言，我已将“提交”操作从按钮上移开。**）**

下面的代码创建表格和“位置详细信息”图标

```
 <table id="theTable" width="835" class="sortable-onload-zebra no-arrow rowstyle-alt colstyle-alt paginate-20 max-pages-20 paginationcallback-callbackTest-calculateTotalRating paginationcallback-callbackTest-displayTextInfo sortcompletecallback-callbackTest-calculateTotalRating">
              <thead>
                <tr>
                  <th width="60" bgcolor="#ff8401">Select</th>
                  <th width="150" class="sortable-text" bgcolor="#ff8401">Location</th>
                  <th width="300" class="sortable-text" bgcolor="#ff8401">Address</th>
                  <th width="30" class="sortable-text" bgcolor="#ff8401">Finds</th>
                </tr>
              </thead>
              <tbody>
                <?php
                    mysql_data_seek($result, 0);
                    while ($row = mysql_fetch_array($result)) {
                        /* display row for each user */

                ?>
                <tr height="80px">
                  <td style="text-align: center"><input type="radio" id="lid" name="lid" value=<?php echo $row['locationid'];?> /></td>
                  <td style="text-align: left"><strong><?php echo $row['locationname'];?></strong></td>
                  <td style="text-align: center"><?php echo $row['returnedaddress'];?></td>
                  <td style="text-align: center"><strong><em><?php echo $row['totalfinds'];?></em></strong></td>

            </tr>

                <?php
                        }
                    } else {
                        echo "<tr>
                                 <td>&nbsp;</td>
                                 <td>&nbsp;</td>
                                 <td>&nbsp;</td>
                                 <td>&nbsp;</td>
                                 <td>&nbsp;</td>                                     
                            </tr>
                            <tr>
                                 <td colspan='5'><div align='center'><strong>No locations have been added yet. <a href='addlocation.php'>Click here</a> to add one.</strong></div></td>
                            </tr>
                            <tr>
                                 <td>&nbsp;</td>
                                 <td>&nbsp;</td>
                                 <td>&nbsp;</td>
                                 <td>&nbsp;</td>
                                 <td>&nbsp;</td>
                            </tr>";

}

?>  
              <form action='locationsaction.php'>
              <input type='submit' class='detailsButton' name='type' value='Details' alt='Location Details' title='Location Details' style='margin-right:10px' />
              </form>   
            </tbody>
            </table> 
```

因为我打算在一个表单中包含多个提交按钮，所以我创建了以下“locationsaction.php”脚本，您将看到在上面的脚本中调用了该脚本。

```
<?php
session_start();
$_SESSION['lid'] = $_POST['lid'];
if (isset($_POST['type'])) {
    $urls = array(
        'Details' => 'locationdetails.php',
        'Add Finds' => 'addfinds.php',
        'Images' => 'addimages.php',
        'View Finds' => 'locationfinds.php'
    );
    $url  = $urls[$_POST['type']];
    header("Location: " . $url);
}
?> 
```

我已经为此工作了几天，并尝试了几个教程，但我似乎无法让它工作。

我只是想知道是否有人可以看看这个，并提供一些指导，告诉我如何通过“提交操作”传递正确的单选按钮值。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:55:14.657

这是您当前的表格：

```
<form action='locationsaction.php'>
<input type='submit' class='detailsButton' name='type' value='Details' alt='Location Details' title='Location Details' style='margin-right:10px' />
</form> 
```

您的桌子根本不在您的表格中；当您单击提交按钮时，它只会发送`<form>`标签之间的输入的详细信息。

如果将`<form action`标签右移到页面顶部，它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T13:55:31.443

我相信您的打开表单标签应该在最上面的输入类型字段上方。我不完全确定，但这是我注意到的第一件事。

# android - android开发——使用android.os.Handler进行类间通信

> ID：12496160
> 
> 赞同：0
> 
> 时间：2012-09-19T13:49:12.640
> 
> 标签：android, architecture

作为 android 开发新手，我遇到的困难之一是我的类倾向于在所有内部类等中变得相当广泛，用于 gui 侦听器等。所以我想出了一个解决方案来分解我的类，我想听听周围 android 专家的一些反馈。

举个例子。我不想在同一个类中定义特定活动的所有对话框（该活动中发生了一系列对话框）所以我实现了一个 DialogManager 类来定义和保存所有潜在的对话框，从将此 DialogManager 的 Activity 并使用它来通知 Activity 发生了哪些 gui 事件。

这里是这个DialogManager类的一个片段，mHandler是回调Activity的handler

```
mDownloadDialog = new ProgressDialog(mContext);

mDownloadDialog.setButton(AlertDialog.BUTTON_NEGATIVE, "Cancel",
                new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {                      

                        mDownloadDialog.dismiss();

                        Message message = mHandler.obtainMessage();
                        message.arg1 = DOWNLOAD_DIALOG;
                        message.arg2 = AlertDialog.BUTTON_NEGATIVE;
                        message.sendToTarget();
                    }
                }); 
```

所以这很有效，我对现在更有条理的源代码感到满意，但我想知道 Handler 类是否是执行此操作的正确方法，或者这是否有点矫枉过正，并且有一些更好的方法可以实现相同的结果受到推崇的。

编辑：正如博尔德所指出的

**处理程序消息不会立即执行**

因此，考虑到这一点，使用 Handler 不是正确的方法。

下一个想法就像在给定示例中定义一个接口一样简单

```
public interface DialogEventReceiverInterface { 
public void dialogEvent(int dialog,int button);
} 
```

在 Activity 中实现该接口，将 Activity 交给 DialogManager 并在发生事件时调用 dialogEvent。现在在我看来非常直接......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:15:45.577

这可能不是您想要的 100%，但它可能会解决您在使用 Android 应用程序时遇到的问题。

通常我会得到很多内部类监听器，在处理大量 UI 事件时，另一个选项是发布-订阅。您发布事件和对象订阅特定事件的位置。在 Android 中，谷歌有一套他们使用的可爱的库，它们被称为`Guava`有很多很棒的东西。其中之一就是`EventBus`让这更容易一些。

[http://code.google.com/p/guava-libraries/wiki/EventBusExplained](http://code.google.com/p/guava-libraries/wiki/EventBusExplained)

他们有一些很好的例子，并引导你完成它。这是一个很大的变化，也是一种通过 UI 思考的不同方式，所以我不会在没有调查的情况下直接介入。确保它适合您的项目。

EventBus 很酷，库中有很多很棒的功能`Guava`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:33:36.750

我很欣赏您不一定要专门询问整理与`Dialog`s 相关的混乱，而是`Dialog`您展示的代码只是一个更广泛问题的说明，我认为您正在寻求一种设计模式来解决。

但是，专注于您的 s 的具体示例，Android API 现在已经以s 和特别是 s`Dialog`的形式为此提供了更简洁的解决方案。使用类是一种更简洁的做事方式，因为您通常在单独的类文件中定义您的 s。Android API 文档包含关于如何处理s 和 parent之间通信的非常好的指南。`Fragment``DialogFragment``Fragment``DialogFragment``DialogFragment``Activity`

在我切换到使用`Fragment`s 之前，我也最终`Dialog`在类中创建了很多 s`Activity`并且我尝试了使用对话框管理器等的各种设计模式。但是，`Fragment`在我看来，这种方法要干净得多。

与早期 Android 版本的兼容性没有问题，因为您可以使用 V4 支持包。

# ruby-on-rails - :加入 | 将行为内连接更改为左连接

> ID：12496165
> 
> 赞同：2
> 
> 时间：2012-09-19T13:49:28.780
> 
> 标签：ruby-on-rails, ruby, activerecord, left-join

我有两个表“用户”和“lms_users”

```
class LmsUser
    belongs_to :user
end

class User
    has_one :lms_user
end 
```

当我写它时，它使用**Inner join**`User.all(:joins => :lms_user)`连接表。

 **我想要一个**左连接**。如何改变这种行为？（我不想使用 SQL 命令，只使用 Ruby 语法。）

我该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:04:40.107

`:joins => "LEFT JOIN lms_users ON lms_users.user_id = users.id"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:45:57.990

您可以在没有 SQL 的情况下使用 LEFT JOIN `includes`，但前提是您指定了`order`涉及联接表中的列的附加约束（或仅是一个子句）。所以，

```
User.includes(:lms_user).all 
```

不会生成 LEFT JOIN（而是两个单独的查询），但是

```
User.includes(:lms_user).where(:lms_user => {:role => 'admin'}).all 
```

将。

更多关于这个

*   [http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)（见急加载部分）
*   [http://ruby.ryanbigg.com/post/1468788928/left-outer-join-with-arel](http://ruby.ryanbigg.com/post/1468788928/left-outer-join-with-arel)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-03T14:59:30.850

`User.left_outer_joins(:lms_user)`如果你在轨道上 5+**

# python - 从 python 调用 perl 脚本在 commands.getstatusoutput 中有效，但在 subprocess.call 中无效

> ID：12496170
> 
> 赞同：1
> 
> 时间：2012-09-19T13:49:52.110
> 
> 标签：python, perl, command, subprocess, popen

我有一个 python 脚本，它必须调用 perl 脚本才能从远程服务器获取数据。perl 脚本必须保留 perl，它是第三方，我在那里没有任何选择。我正在尝试删除以前的开发人员在代码周围卡住的所有过时和弃用的东西，所以我想用子进程调用替换 commands.getstatusoutput 调用，但不知何故我似乎无法得到它工作...

到目前为止，脚本是通过 commands.getstatusoutput(string) 调用的，其中 string 是对 perl 脚本的完整系统调用，如 '/usr/bin/perl /path/to/my/perl/script.pl < /路径/到/我的/输入'。

我创建了一个参数列表（args = ['/usr/bin/perl', '/path/to/my/perl/script.pl', '<', '/path/to/my/input']）我将它传递给 subprocess.call：

```
args = ['/usr/bin/perl', '/path/to/my/perl/script.pl', '<', '/path/to/my/input']
strOut = subprocess.call(args)
print strOut 
```

不幸的是，这失败并出现错误：

```
port absent at /path/to/my/perl/script.pl line 9. 
```

perl 脚本是：

```
#!/usr/bin/perl
use IO::Handle;
use strict;
use Socket;
my ($remote, $port, $iaddr, $paddr, $proto, $ligne);
$remote = shift || 'my.provider.com';
$port   = shift || 9000;
if ($port =~ /\D/) { $port = getservbyname ($port, 'tcp'); }
die "port absent" unless $port; 
```

尽管在这里阅读了其他类似的线程（[从 python 调用 perl 脚本](https://stackoverflow.com/questions/4682088/call-perl-script-from-python)，[如何从 python 调用 perl 脚本？](https://stackoverflow.com/questions/798413/how-to-call-a-perl-script-from-python-piping-input-to-it)，[如何在 Python 脚本中获取 Perl 脚本的结果？](https://stackoverflow.com/questions/805160/how-can-i-get-the-results-of-a-perl-script-in-python-script)，[Python getstatusoutput 替换不返回完整输出](https://stackoverflow.com/questions/10202078/python-getstatusoutput-replacement-not-returning-full-output)等）和其他地方，我觉得我错过了一些明显的东西，但我不知道是什么。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:52:00.567

重定向`<`是一个*shell*功能。如果你想使用它，你需要将一个字符串传递给`subprocess.call`并使用`shell = True`. 例如：

```
args = ['/usr/bin/perl', '/path/to/my/perl/script.pl', '<', '/path/to/my/input']
strOut = subprocess.call(' '.join(args), shell = True) 
```

或者，您可以执行以下操作：

```
args = ['/usr/bin/perl', '/path/to/my/perl/script.pl']
with open('path/to/my/input') as input_file:
    strOut = subprocess.call(args, stdin = input_file) 
```

* * *

最后，`strOut`将保存您的 perl 程序的*返回码*——这似乎是一个有趣的名字。如果你想从你的 perl 程序中获取输出流（stdout），你可能想和 and`subprocess.Popen`一起使用。`stdout=subprocess.PIPE``communicate`

# asp.net-membership - 无论使用哪个提供者，MembershipUser 中是否有唯一标识符？

> ID：12496171
> 
> 赞同：0
> 
> 时间：2012-09-19T13:49:52.267
> 
> 标签：asp.net-membership, membership-provider

无论提供者如何，都可以从 MembershipUser 中普遍获取 GUID 或唯一标识符吗？

使用 SqlMembershipProvider，ProviderUserKey 返回一个 Guid。使用 WindowsMembershipProvider，它返回一个 28 字节的数组。

我需要一些唯一标识符，无论提供者如何，我都可以统一存储。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:29:33.333

并非如此，用户 ID 的概念是特定于特定会员提供者的。即对于SqlMembershipProvider 它是一个GUID，对于SimpleMembership 它是一个int。Membership API 本身并不关心，因为 providerUserKey 是对象类型。

# symfony - Symfony 2.0：调用未定义的方法 Doctrine\DBAL\Configuration::getFilterSchemaAssetsExpression()

> ID：12496173
> 
> 赞同：0
> 
> 时间：2012-09-19T13:49:58.583
> 
> 标签：symfony

我正在尝试在我的 Symfony 项目中使用 Doctrine 2 Migrations。

为此，我首先把

```
[doctrine-migrations]
   git=http://github.com/doctrine/migrations.git

[DoctrineMigrationsBundle]
   git=http://github.com/doctrine/DoctrineMigrationsBundle.git
   target=/bundles/Symfony/Bundle/DoctrineMigrationsBundle
   version=origin/2.0 
```

在 th deps 文件中。

然后我更新供应商：

```
php bin/vendors install 
```

并尝试使用

```
php app/console doctrine:migrations:diff 
```

但是我遇到了一个致命错误：

```
PHP Fatal error:  Call to undefined method Doctrine\DBAL\Configuration::getFilterSchemaAssetsExpression() in /home/milos/workspace/Symfony/vendor/doctrine-migrations/lib/Doctrine/DBAL/Migrations/Tools/Console/Command/DiffCommand.php on line 85

Fatal error: Call to undefined method Doctrine\DBAL\Configuration::getFilterSchemaAssetsExpression() in /home/milos/workspace/Symfony/vendor/doctrine-migrations/lib/Doctrine/DBAL/Migrations/Tools/Console/Command/DiffCommand.php on line 85 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:14:36.217

嗯，问题是教义迁移正在调用一个只存在于 Doctrine 2.2 中的函数，而不是 Doctrine 2.1。这是几天前在[这个提交中刚刚介绍的](https://github.com/doctrine/migrations/commit/5dffedde3b33fad793f5bf8a11f738d8aaf6f579)

问题是教义迁移没有任何分支或标签，因此您不能要求适合您的旧版本。

如果您使用的是 symfony-2.0，则很难升级到 Doctrine 2.2。所以，我要做的是暂时手动删除该提交中引入的行，然后在[学说迁移 github](https://github.com/doctrine/migrations)上打开一个新问题，解释情况并要求修复（可能最好的主意是为与 Doctrine 2.1 兼容的版本）

**编辑**

由于@Milos 提出的问题，这个问题现在已经得到解决！你不应该再发现这个问题了。

# android - Android：在一段时间或标志后自动取消警报

> ID：12496177
> 
> 赞同：0
> 
> 时间：2012-09-19T13:50:09.500
> 
> 标签：android, android-alarms

因为我没有看到任何关于在不使用任何按钮或调用 onClick 的情况下取消警报的线程。我决定问这个问题，并且我还想包括这个问题，（因为它们之间有些相关），关于同时分配或调用具有不同触发时间的警报，因为我已经读过，如果你设置另一个警报，它只会停止之前的警报。但我不希望这样，我正在分配具有不同触发时间的警报。**至于我的主要问题**，我如何自动停止/取消说，在一段时间内，即 5 分钟，或者如果它已经重复了 3 次，那么它会自动停止警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:10:00.130

由于没有人完全明白我的意思，我做了一些快速的调整，发现我的逻辑很不对劲，抱歉。我所做的是实现一个贪睡和关闭功能，至于同时触发具有不同触发时间的警报，我只需要制定一个不同`requestCode`的 for`setRepeating()`并且同样适用于`set()`<-- 如果打算使用此方法，则 requestCode 将用于取消触发的正确警报以及您用来触发警报的意图的相同签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:10:57.797

你有正确的想法，在我看来，这应该是通过使用线程来完成的。但是，根据我的经验，我确实可以快速解决（直到有人给出更好的答案）。也许你可以解决它。

我有一个 Chronometer（如果你不想让用户看到它，有一种方法可以隐藏它）

```
 Chrono = (Chronometer) findViewById(R.id.chronometer1);  //Defines chronometer in layout
            Chrono.start();                                  //Starts Chronometer
            while (!(Chrono.equals(chronoText))) {           /*starts a timer, until it reaches the desired time */
                chronoText = Chrono.getText().toString();    //gets chronometer time and displays it as a string
                if (chronoText.equals("05:00")) {  /*compares if the string is the same as your set time( i put in 5min as an example)*/
                     counter++;  //I explain the counter a outside the block   
                                 //right here is where you will call your method that stops alarm.
                    startActivity(intent);
                }

            } 
```

对于重复警报，我会创建一个循环，然后你可以查看我扔在那里的计数器，看看这个过程重复了多少次。

# ios - 简单的ios音频库？

> ID：12496178
> 
> 赞同：0
> 
> 时间：2012-09-19T13:50:11.250
> 
> 标签：ios, audio

我正在寻找一些易于在我的项目中实现的 iOS 库。我想播放存储在设备上的长 mp3 文件（如有声读物）。主要问题是快速倒带如此长的音频文件。寻求任何帮助！提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:49:01.583

使用核心音频 API，看看[Core Audio Utility Sample App](https://developer.apple.com/library/ios/#samplecode/CoreAudioUtilityClasses/Introduction/Intro.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:09:19.697

这是你的问题的答案，我猜他们使用了 Avaudioplayer 库

[avaudioplayer 的简单倒带](https://stackoverflow.com/questions/7157533/simple-rewind-for-avaudioplayer)

# vim - vim 中的递归生成文件

> ID：12496180
> 
> 赞同：1
> 
> 时间：2012-09-19T13:50:19.423
> 
> 标签：vim, g++, makefile

我的 c++ 项目由多个目录组成，每个目录都有自己的 makefile。上一层我也有一个顶级的makefile，它按顺序调用其他的。

在 vim 中，我想制作顶级 makefile 或子文件。我想在 vim 中查看我的错误，在一行上按 ENTER 以跳转到源代码行。

这适用于

`make | copen`

但一次只有一个目录。错误窗口中列出的文件名只是一个名称，没有路径。如果您尝试构建顶级 makefile 并在文件名/行号上按 ENTER，它不知道文件的路径。

有没有解决的办法？我想从vim中构建顶级makefile，无论错误在哪个目录中，都可以跳转到正确的文件。问题可能是g++只输出文件名，不输出路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:33:16.120

有一个内置的`'errorformat'`机制；来自`:help errorformat`：

> 一些编译器生成的消息由目录名组成，这些目录名必须附加在 %f 读取的每个文件名之前（例如：GNU make）。以下代码可用于扫描这些目录名称；它们将存储在内部目录堆栈中。 *E379* %D "进入目录" 格式字符串；期望以下 %f 找到目录名称 %X “离开目录”格式字符串；预计以下 %f
> 
> 在定义“进入目录”或“离开目录”格式时，必须在该子字符串的开头给出“%D”或“%X”。Vim 跟踪目录更改并将当前目录添加到使用相对路径找到的每个错误文件的前面。见 |quickfix-directory-stack| 有关详细信息、提示和限制。

因此，您需要让您的 Makefile 输出这些“更改目录”消息，并确保通过您的`'errorformat'`设置正确解析它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:04:32.397

你可以给 Vim 一个自定义命令来执行`:make`：

```
:set makeprg=make\ -f\ /path/to/your/toplevel/makefile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:49:10.020

您可以在 vim 中创建映射到以下内容

```
!find .. -type d -exec make -C {} \; 
```

就像是：

```
map  <F12>    <esc>:!find .. -type d -exec make -C {} \;<cr> 
```

我相信您仍然应该在 :clist 中看到错误。

如果要运行上层 make 文件，可以执行以下操作：

```
:make -C .. | copen 
```

# javascript - 如何在不提交表单的情况下序列化 jquery 中的表单以用于 url 哈希？

> ID：12496182
> 
> 赞同：0
> 
> 时间：2012-09-19T13:50:22.780
> 
> 标签：javascript, jquery, ajax, jquery-bbq

我想创建某些 html 表单的字符串表示形式，以存储在 url 的哈希部分中。

我懒洋洋地希望会有这样的方法和jquery。serialize() 似乎可以解决问题，除了在我看到的所有示例中，它使用表单提交的“this”对象。在我的网站上没有提交表单，我只想能够序列化它们。我试过了：

```
params['formParams'] = $("#"+currentSearchForm).serialize(); 
```

但我只得到一个空字符串而不是序列化形式。

我应该欺骗表单提交并在其中生成我的序列化字符串，然后取消默认事件还​​是什么？似乎有点做作..？

或者可能是我只是在序列化错误..

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:57:40.837

首先确保您的表单元素具有“名称”属性。这可能是序列化无效的原因。

如果您想在提交时执行此操作，然后取消提交，您可以执行以下操作：

```
$("#formid").submit(function() {
  //whatever
  return false; //<- this cancels the submit
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:58:44.483

jQuery`.serialize()`应该可以解决问题。您可以简单地使用`$('form').serialize()`来获取表单数据。

这是一个演示，[http://jsfiddle.net/muthkum/x6n2e/1/](http://jsfiddle.net/muthkum/x6n2e/1/)。在提交表单之前调用一个。单击提交按钮时会调用另一个。两者都有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:07:14.143

简单到

```
$( YOUR_INPUTS_TO_BE_SERIALIZED ).serialize() ... 
```

文档在[这里](http://api.jquery.com/serialize/)了解更多信息

请注意，您可能需要转换输出字符串以使其适合散列授予的字符：

[这个线程可以帮助你](https://stackoverflow.com/questions/2849756/list-of-valid-characters-for-the-fragment-identifier-in-an-url)

# r - 检查R中数字和布尔值之间的相关性

> ID：12496183
> 
> 赞同：3
> 
> 时间：2012-09-19T13:50:25.590
> 
> 标签：r, correlation

我是 R 的初学者。我已经学会了如何检查数字数据之间的相关性。

但是，我找不到有关如何检查数字和布尔类型数据之间相关性的详细信息。任何人都可以给我提示或指导我。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:00:19.373

我想你正在寻找[point-biserial correlation](http://en.wikipedia.org/wiki/Point-biserial_correlation_coefficient)。下载包`ltm`。它包括功能`biserial.cor`。

```
x <- rnorm(10)
y <- rep(c(0,1), 5)

library(ltm)
biserial.cor(x,y)
#[1] -0.08279833 
```

详情请参阅`?biserial.cor`。

结果与使用内置`cor`函数获得的结果略有不同：

```
cor(x,y)
#[1] 0.0872771 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T13:53:57.787

这回答了你的问题：

```
##x is logical, i.e. TRUE or FALSE
R> x = sample(c(T, F), 10, replace=10)
##y is numeric
R> y = runif(10)

##When we use correlation
##R converts TRUE to 1 and FALSE to 0.
R> cor(x, y)
[1] -0.5514 
```

显而易见的问题是你应该这样做吗？请记住，相关性是测试 x 和 y 之间的**线性**关系，即随着`x`增加`y`以线性方式变化。这不会发生在您的场景中。正如@Sven的[回答所示，您想使用点双序列相关方法。](https://stackoverflow.com/a/12496381/203420)

* * *

如果您的数据是字符向量，请说：

```
x = c("M", "F") 
```

那么你需要做一个额外的步骤：

```
x[x=="M"] = 1
x[x=="F"] = 1 
```

# eclipse-plugin - Eclipse 的 Liquibase 插件

> ID：12496190
> 
> 赞同：2
> 
> 时间：2012-09-19T13:50:41.347
> 
> 标签：eclipse-plugin, liquibase

我找不到任何指向 Eclipse 的任何[liquibase](http://www.liquibase.org/)插件的链接。有人知道它是否存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:37:01.187

目前没有用于 Eclipse 的 Liquibase 插件。但是有一个正在进行中，[请参阅 wiki](http://www.liquibase.org/ide/home)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T09:49:24.637

这个下载站点对我来说工作正常。

[https://liquibase-eclipse-plugin.googlecode.com/svn/trunk/com.svcdelivery.liquibase.eclipse.site/](https://liquibase-eclipse-plugin.googlecode.com/svn/trunk/com.svcdelivery.liquibase.eclipse.site/)

# c - 自动转换为大写

> ID：12496191
> 
> 赞同：0
> 
> 时间：2012-09-19T13:50:49.427
> 
> 标签：c, character

我是 C 编程的新手，我有一个问题。这是我的问题：我想使用函数' **toupper** '，这样当我们输入一个字母时，它会自动变成大写。我想在我们输入时将字母设为大写，而不是在输出中显示时。

所以当我们运行程序时它看起来像这样：

选择一个字母`(A/B/C) : a` （当我们键入`a`它时，它会自动变为 A。此评论下的示例。）

选择一个字母`(A/B/C) : A`（自动大写）

这是`A` （输出）

这是我当前的代码：

```
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>

int main()
{
    char a;

    printf("(A/B/C): ");
    scanf("%c", &a);

    printf("%c", a);

} 
```

提前谢谢`:D`...我真的需要你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:06:35.253

由于您已经在使用 conio.h，因此有一种方法可以使用 getch() 函数。但请**注意**conio.h 是非标准的 C 语言，而且相当陈旧和过时。

```
#include <stdio.h>
#include <ctype.h>
#include <conio.h>

int main()
{
    char ch;

    printf("(A/B/C): ");
    do
    {
      ch = getch();
      ch = toupper(ch);
      printf("%c", ch);
    } while(ch != '\n');

    getchar();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-19T13:56:29.677

```
printf("%c", islower(a) ? toupper(a) : a ); 
```

额外：`stty olcuc`适用于unix。

# python - re.findall() 不返回所有字符

> ID：12496192
> 
> 赞同：0
> 
> 时间：2012-09-19T13:50:49.080
> 
> 标签：python, regex

我有这样的模式（找到 3 个单词的缩写）

```
s='([A-Z][a-z]+ ){2,4}\([A-Z]{2,4}\)' 
```

我想找到

```
line='National Health Service (NHS)'
p=re.findall(s,line) 
```

但 p 只是 ['Service '] 而不是整个字符串。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T13:53:33.330

您没有正确分组匹配，请改用：

```
s='(?:[A-Z][a-z]+ ){2,4}\([A-Z]{2,4}\)' 
```

`.findall()`返回整个匹配，除非您定义捕获组 ( `(...)`)，此时它将返回包含在组中的结果。上述模式使用*非捕获*组代替 ( `(?:...)`)。由于这使您的表达式没有任何捕获组，因此`.findall()`再次返回完整匹配项。

# mono - 抑制视网膜设备上的内容缩放

> ID：12496193
> 
> 赞同：1
> 
> 时间：2012-09-19T13:50:54.660
> 
> 标签：mono, xamarin.ios, playn, ikvm

嗨，我正在一个名为 PlayN 的框架中开发小型项目，该框架使用单声道进行 IOS 开发。

我在理解内容比例因子以及如何禁用其自动拉伸和缩放时遇到问题。

我想使用布局管理器手动缩小和放大图像（主要是为了支持不同的布局以及更多的分辨率（对于 android）和方向）。

目前，当加载 960x640（在 opengl 中）时，我在 3gs 的 480x320 帧之外按预期绘制（我只看到图像的左上半部分）但是当我在视网膜设备上加载相同的图像时，它将使用内容比例因子2 并将我的 960 图像缩放到 1920（所以我仍然只能看到图像的上半部分，但被拉伸了），因为它认为它是低分辨率图像（未标记为 @2x）。我可以在不禁用视图的较大帧缓冲区的情况下禁用此自动缩放吗？

我不是 IOS 开发人员，我很乐意接受任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:20:58.613

您只需要制作图像的高分辨率版本，然后将其命名为`YourImage@2x.png`.

这就是 iOS 处理视网膜显示的方式。

在这里查看@2x 图片：http: [//developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html)

# java - 如何让客户指定他们的电子邮件服务器信息？

> ID：12496194
> 
> 赞同：2
> 
> 时间：2012-09-19T13:50:54.007
> 
> 标签：java, email

我的 Web 应用程序安装在许多客户服务器上。由于应用程序需要发送电子邮件（密码恢复），我需要一种为每个客户设置电子邮件服务器信息的好方法。

我是否应该只有一个 xml 文件，每个客户都可以在其中填写电子邮件服务器信息，然后应用程序从那里获取它？

有没有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:01:36.447

没有更多信息，很难给你具体的建议。对于独立应用程序，我倾向于使用简单的属性文件（[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)）。

*   它们在 Java 中易于处理（您可以轻松地读写它们，它们由`Map`.
*   它们可以在紧急情况下手动编辑，比 XML 容易得多。

有一些缺点：

*   它们只是 ASCII (ISO-8859-1)，所以如果你想编写扩展的 unicode 字符，你可能会遇到麻烦。如果您从 Java 中写入和读取文件，则不会有任何问题 - Properties 类将为您完成此转换。
*   某些 SMTP 服务器需要身份验证。将未加密的密码存储到每个人都可以读取的属性文件中是一种不好的做法。在这种情况下，您需要提出某种可逆加密机制，这本身就是一个挑战。您也必须为 XML 执行此操作。您*可以*指定用户自己使用权限来保护此文件，尽管这远没有自己加密它强大。

我敢肯定有更好的方法 - 你会得到很多答案 - 但恕我直言，这些文件很简单，相对坚固且易于处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:55:32.457

我只会使用 Java`Properties`文件格式，因为 XML 很重，需要解析，并且要捕获的数据点之间实际上没有层次关系，用于定位电子邮件服务器（名称、端口等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T13:55:39.217

为什么不直接使用属性文件和`java.util.Preferences`API？如果您只是指定主机/用户名/密码组合，我不确定您是否需要 XML 提供的复杂性/灵活性。

如果您想更加灵活，请查看[Apache Commons Config](http://commons.apache.org/configuration/)库，它允许您抽象出配置机制并指定层次结构。如果您要提供邮件服务器配置，您还可以/应该配置什么？

# scala - 使用 scala Maps 来累积值

> ID：12496200
> 
> 赞同：2
> 
> 时间：2012-09-19T13:51:08.780
> 
> 标签：scala, scalaz

> **可能重复：**
> [合并两个地图并对相同键的值求和的最佳方法？](https://stackoverflow.com/questions/7076128/best-way-to-merge-two-maps-and-sum-the-values-of-same-key)

我有一堆类型的地图`Map[String, Int]`。我希望能够在键对应时将它们合并为值的总和。例如，`++`地图上的标准方法给出

```
Map("a" -> 1, "b" -> 2) ++ Map("a" -> 3, "c" -> 5)
// Map[String,Int] = Map(a -> 3, b -> 2, c -> 5) 
```

我想定义一个结果会给出的操作

```
Map("a" -> 1, "b" -> 2) ?? Map("a" -> 3, "c" -> 5)
// Map[String,Int] = Map(a -> 4, b -> 2, c -> 5) 
```

在花哨的措辞中，总是有一个自然的幺半群结构，但是当它本身是一个幺半群`Map[A, B]`时，有一个不同的结构。`B`

现在，为 编写一个递归实现并不难`LinkedHashMap`，但我认为必须有一些简单且更通用的方法来编写它，可能使用 scalaz。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T11:19:21.723

如果 B 也是一个幺半群，Scalaz 有一个 Map[A,B] 的幺半群实例。

```
> Map("a" -> 1, "b" -> 2) |+| Map("a" -> 3, "c" -> 5)
  Map("a" -> 4, "c" -> 5, "b" -> 2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:13:54.657

看起来您实际上是在尝试将 a`Map`用作`Multiset`. 对于多重集，您描述的操作只是多重集 sum `s1 ⊎ s2`。

不幸的是，[Scala Collections Framework 中没有多重集](http://Scala-Lang.Org/node/8192/#comment-34749)，但[有一些用于 Java](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multiset.html)。

`Multiset`对于Scala 中的假设：

```
Multiset("a", "b", "b") ++ Multiset("a", "a", "a", "c", "c", "c", "c", "c")
// Multiset[String] = Multiset("a" -> 4, "b" -> 2, "c" -> 5) 
```

# android - 在 android 上连接 USB 设备（智能卡读卡器）

> ID：12496207
> 
> 赞同：1
> 
> 时间：2012-09-19T13:51:25.683
> 
> 标签：android, usb

在我的 Android 平板电脑 (ICS 4.0.3) 上连接 USB 智能卡读卡器时遇到了一些麻烦。这个不认识读者。我使用“USB设备信息”应用程序，我看到Linux系统可以看到阅读器，但不能看到android系统（使用USB Host API）

我试图在我的 Galaxy Nexus（果冻豆 4.1.1）上连接它并且它工作

谁能帮帮我，我能理解为什么我的手机能识别它，但平板电脑不能识别

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T22:25:31.937

我怀疑您的平板电脑上的主机功能可能已禁用。我觉得这有点令人惊讶，因为大多数情况下它往往在平板电脑上启用，但我当然建议你检查一下。

以下帖子可能是最好的参考，因为它很简洁： [Android USB 主机和隐藏设备](https://stackoverflow.com/questions/11183792/android-usb-host-and-hidden-devices)

您应该能够通过 adb shell 或从 google play 下载终端模拟器来看到这一点。

我在运行 CM9 的 Sony Xperia neo 手机上出现了完全相同的症状。rom 会看到设备，但 API 不会。甚至支持的设备（例如 USB 鼠标）也会被检测到并工作，但 API 看不到。这可能是您测试我的理论的一种简单方法。插入 USB 鼠标，它应该可以工作，API 看到了吗？如果不是，那么根据我的经验，上面的线程几乎肯定与您的问题有关。

# visual-studio-2010 - 将字典传递给 FxCop GUI

> ID：12496210
> 
> 赞同：0
> 
> 时间：2012-09-19T13:51:32.187
> 
> 标签：visual-studio-2010, fxcop

我想使用自定义字典（存储在给定路径中，不一定在 FxCop 文件夹中）作为参数从 VS 2010 打开 FxCop.exe（不是命令行版本）。有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:53:44.070

这不能通过命令行完成。但是，（从一点 Reflector 探索）看起来 UI 应用程序可能支持通过.fxcop 项目文件的`CustomDictionary`节点内的节点添加自定义字典。`CustomDictionaries`

# c++ - 使用 Rice 从 C++ 调用 Ruby 块

> ID：12496211
> 
> 赞同：1
> 
> 时间：2012-09-19T13:51:40.777
> 
> 标签：c++, ruby

我正在为我现在正在编写的 C++ 库编写一个 Ruby 接口。C++ 库提供了几个基于比较函数的数据结构，例如 FibonacciHeap。使用 ruby​​ 比较函数可以正常工作，即以下 Ruby 代码可以工作：

```
f = FibonacciHeap.new
f.push(24)
f.push(2)
f.push(89)
raise unless f.top == 2 
```

但我想让用户可以提供自己的比较功能，例如：

```
f = FibonacciHeap.new { |a, b| a.length <=> b.length }
f.push("asdf")
f.push("a")
f.push("adsfdsafdsaf")
raise unless f.top == "a" 
```

但即使使用谷歌，我也没有找到如何在 Rice 中使用块。我发现的唯一一件事是如何从 C++ 迭代器中定义 ruby​​ each 方法，这当然需要一个块。我想一旦我存储了 proc 对象，这很容易，我只需使用适当的参数调用 ruby​​ 方法“调用”它，但是我如何检查构造函数是否被赋予了一个块，如果是，存储阻塞成一个proc对象？

如果我可以检查块接受的参数数量会更好，但我不知道这是否可能，但是用户可以在简单的情况下提供类似的东西

```
f = FibonacciHeap.new { |a| a.length } 
```

如果他不需要提供`a <=> b`功能的全部灵活性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T17:16:40.367

在 C 代码中，您可以调用：

```
rb_yield(value); 
```

在 Rice 代码中，您可以使用：

```
Rice::protect(rb_yield, value); 
```

（Rice::protect 确保正常的 C++ 异常行为）。

这就是 Rice::Module::define_iterator 生成 ruby​​ 代码的方式。

# c# - PrintPreviewControl 与 bg 但不打印出来

> ID：12496215
> 
> 赞同：0
> 
> 时间：2012-09-19T13:51:57.267
> 
> 标签：c#, printing

全部。

我会使用 PrintPreviewControl 来预览带有背景的文档。但我不希望背景被打印出来。

这是我的代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        printPreviewDialog1.Document = printDocument1;
        printPreviewDialog1.ShowDialog();
    }

    private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
    {
        // This background should not print out, but could view in preview
        e.Graphics.DrawImage(new Bitmap(Foobar.Properties.Resources.bg), new Point());
        string text = "This text to be printed. ";
        e.Graphics.DrawString(text, new Font("Georgia", 35, FontStyle.Bold),
            Brushes.Black, 10, 10);            
    } 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:01:48.327

我解决了这个问题：

```
 private bool p = true;

    private void button1_Click(object sender, EventArgs e)
    {
        printPreviewDialog1.Document = printDocument1;
        printPreviewDialog1.ShowDialog();
    }

    private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
    {
        if (!p) {
            e.Graphics.DrawImage(new Bitmap(Foobar.Properties.Resources.bg), new Point());
        }
        string text = "This text to be printed. ";
        e.Graphics.DrawString(text, new Font("Georgia", 35, FontStyle.Bold),
            Brushes.Black, 10, 10);            
    }

    private void printDocument1_BeginPrint(object sender, System.Drawing.Printing.PrintEventArgs e)
    {
        if (e.PrintAction == System.Drawing.Printing.PrintAction.PrintToPreview) {
            p = false;
        }
    }

    private void printDocument1_EndPrint(object sender, System.Drawing.Printing.PrintEventArgs e)
    {
        p = true;
    } 
```

# php - PHP "ping" 防止网页超时

> ID：12496217
> 
> 赞同：2
> 
> 时间：2012-09-19T13:52:00.533
> 
> 标签：php

我正在编辑一个现有的网页，该网页采用 Excel 电子表格并将其存储在数据库中。

当电子表格很大时，页面将超时，因为此时网页和服务器之间没有联系。

有没有一种简单的方法可以在不影响页面内容的情况下“ping”网页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:59:08.887

如果您的 PHP 页面只是因为超过了最大执行时间而超时，您可以尝试通过`ini_set`在页面顶部使用来设置该脚本的最大执行时间：

```
ini_set("max_execution_time", "600");  // Now times out after 5 minutes 
```

您可以尝试调整它以满足您的需求。

如果脚本需要**很**长时间才能完成，您可能别无选择，只能设置这些文件的队列以进行处理。然后，您的主 PHP 脚本什么都不做，只是将文件插入此队列，然后由 cron 作业处理。然后，您可以稍后再轮询结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:57:45.510

这是可能的，但取决于您的实施。例如，如果您逐行处理excel文件，是的，可以这样做：

```
<?php

while($notDone) {
    $row = proccessExcelRow($excelFile);
            // echo javascript so your browser won't fill the page with empty markup
    echo '<script type="text/javascript"></script>'; 
            @flush(); @ob_flush();
} 
```

但是如果脚本花费的时间超过了 maximum_execution_limit 它是没有用的。除了将其转发到后台的专门进程外，别无他法

# python - python ftplib上传二进制文件

> ID：12496218
> 
> 赞同：1
> 
> 时间：2012-09-19T13:52:00.847
> 
> 标签：python, ftplib

我使用 python ftplib 将二进制文件上传到远程 ftp 服务器，但它总是传输小于它的实际大小。ps：本地环境是windows，远程服务器是linux。我用：

```
 'ftp.storbinary('STOR %s' % filename,open(filename,'rb'))' 
```

我认为 python 的 api read() 无法正常工作，它会将某些特殊字符识别为 EOF，但实际上不是。

如何上传二进制文件而不丢失字节？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-11-28T23:25:22.947

我实际上只是解决了这个问题。在打开文件上传到 FTP 服务器之前，我必须关闭正在写入的文件。

```
out2 = open('file.csv')
for r1 in cursor:
    out2.write(str(r1))
out2.close()

ftp_census = file_loc
stor_census = str("STOR egocensus_" + demoFileDate + ".csv")
fc = open(ftp_census, 'rb')
ftp.storbinary(stor_census, fc, 1024) 
```

关闭文件后，FTP 服务器上的文件大小是正确的。我还编辑了原始答案以更好地显示代码。我可能可以更好地编码，但它正在工作....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:25:11.967

在我理解原因之前，已经进行了几次艰苦的测试。首先，这不是 python 中的错误。因为要传输的文件还没有从内存刷新到磁盘，为此：

```
f.retrbinary('RETR '+filename, filehandler.write, bufsize) 
```

这样做之后，文件处理程序不会显式关闭，`retrbinary`也不会关闭它，因此立即存储它会丢失内存中的一些字节。因此，如果我们在存储后显式关闭文件处理程序，如下所示：

```
f.retrbinary('RETR '+filename, filehandler.write, bufsize)
filehandler.close() 
```

然后我们得到了所有字节，有关更多详细信息，请参阅：' [http://blog.csdn.net/hongchangfirst](http://blog.csdn.net/hongchangfirst) '

# python - Python-Tesseract 错误：DLL 加载失败：找不到指定的模块

> ID：12496228
> 
> 赞同：3
> 
> 时间：2012-09-19T13:52:32.357
> 
> 标签：python, dependencies, tesseract

我刚刚在我的访客 XP（通过 virtualbox 运行）上安装了 python-tesseract 0.7.6.win32-py2.7.exe，并且出现了这个恼人的错误：

> DLL 加载失败：找不到指定的模块。

通过dependency walker检查依赖关系并添加所有丢失的文件后，dependency walker中出现了这两个错误：

> 错误：由于隐式依赖模块中缺少导出函数，至少一个模块具有未解析的导入。
> 
> 错误：发现具有不同 CPU 类型的模块。

当然，`DLL load failed: The specified module could not be found.`仍然没有消失。

现在我该怎么做？

# objective-c - 除了已知的之外，objective-c 中类扩展的其他用途

> ID：12496243
> 
> 赞同：3
> 
> 时间：2012-09-19T13:53:10.053
> 
> 标签：objective-c

我目前在我所有的 Objective-c 项目中都使用类扩展。

我想这只是“语言”的问题，但是通过阅读此链接[Categories and Extensions](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocCategories.html#//apple_ref/doc/uid/TP30001163-CH20-SW1)上的 Apple 文档：

> 类扩展的一个常见用途是将公开声明为只读的属性重新声明为私有的 readwrite：
> ......
> 
> 一个类通常也有一个公开声明的 API，然后有一个私有声明的附加方法，供该类或该类所在的框架单独使用。

实际上，当我们用我的母语说“普通”时，它意味着一种隐含的方式，即“还有其他东西……”。

所以我非常基本的问题是？是否还有其他可以使用扩展的场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:22:12.753

类扩展还允许您将 iVar 添加到类中。

这样，您可以从公共头文件中*隐藏*iVar。

我知道很多人只是简单地将合成属性用于所有内容，尤其是使用 ARC。
我不会讨论这个，因为它不是主题，但它实际上是两个完全不同的东西，因为属性至少可以从外部读取。

因此，通过类扩展，您可以隐藏且安全的私有 iVar。
这有助于保持您的公共标头清洁，并且还可以防止子类在需要时访问它们。

**编辑**

正如 Pfitz 在评论中所说，现在也可以使用现代运行时直接在实现中完成：

```
@implementation
{
   ... // iVars
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:01:51.297

类扩展的一种典型附加用途，定义为：

```
@interface SomeClass()
@end 
```

是声明类实现使用的私有方法。从 Xcode 4.4 开始（我认为），在实现中定义私有方法之前不再需要声明它们 - 所以我现在很少使用类扩展。

**编辑**：

哎呀，对不起，我没有注意 OP 原始报价中的第二段。好吧，那是我能想到的唯一用途。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T14:26:14.537

您还可以使用类扩展来声明协议一致性，而无需向全世界宣传。

# c# - MouseLeftButtonUp 不触发

> ID：12496258
> 
> 赞同：5
> 
> 时间：2012-09-19T13:53:57.403
> 
> 标签：c#, wpf, events, button, mouseevent

我有一个`Button`

```
<Button>
    <Button.Template>
        <ControlTemplate>
            <StackPanel>
                <Image Source="share.png" 
                       MouseLeftButtonUp="Image_MouseLeftButtonUp"
                       MouseLeftButtonDown="Image_MouseLeftButtonDown" />
            </StackPanel>
        </ControlTemplate>
    </Button.Template>
</Button> 
```

但问题是，与 MouseLeftButtonDown 不同，事件 MouseLeftButtonUp 不会触发。为什么？我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T14:01:14.293

可能是因为`Button`它已经在处理事件，所以它不会过滤到 Image 控件。

为什么要在 上处理 MoustUp 和 MouseDown 事件`Image`？为什么不处理它们`Button`？

**编辑**
快速查看此事件的文档后，我发现[MouseLeftButtonUp](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mouseleftbuttonup%28v=vs.85%29.aspx)的路由策略是[Direct](http://msdn.microsoft.com/en-us/library/ms742806.aspx#routing_strategies)，但实际的底层事件是具有[Bubbling](http://msdn.microsoft.com/en-us/library/ms742806.aspx#routing_strategies)策略的[MouseUp事件。](http://msdn.microsoft.com/en-us/library/system.windows.input.mouse.mouseup%28v=vs.85%29.aspx)因此，实际上，应该有一个事实上的冒泡策略，这意味着应该有机会在.`MouseLeftButtonUp``Image``Button`

听起来可能还有其他事情发生。如果您在 Image 控件上将 Image 设置为空，并且背景为 null（不同于`Color.Transparent`），则 WPF 会将控件视为不“存在”，就鼠标事件而言。

**编辑 2**
嗯……也许我最初的猜测是正确的。根据此线程：
[http](http://social.msdn.microsoft.com/forums/en/wpf/thread/e231919d-9fef-4aa5-9dcb-2c1eb68df25b/#306db880-ed50-45d2-819f-88d76f7148c1)
`Button` ://social.msdn.microsoft.com/forums/en/wpf/thread/e231919d-9fef-4aa5-9dcb-2c1eb68df25b/#306db880-ed50-45d2-819f-88d76f7148c1正在处理该`MouseUp`事件。尝试使用[PreviewMouseUp](http://msdn.microsoft.com/en-us/library/system.windows.uielement.previewmouseup.aspx)，然后检查单击了哪个按钮。

**编辑 3**
好的...我想我想通了。我打赌 Button 在 MouseDown 事件中“捕获”了鼠标。发生这种情况时，其他控件将不会收到 MouseUp 或 MouseDown 事件（包括预览版），直到鼠标被释放。
请参阅：http: [//books.google.com/books ?id=nYl7J7z3KssC&pg=PA146#v=twopage&q&f=true](http://books.google.com/books?id=nYl7J7z3KssC&pg=PA146#v=twopage&q&f=true)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T14:32:14.963

正如 Cyborgx37 所说，Click 事件正在处理 LeftMouseUp 事件。

您可以在 Button 上使用`PreviewMouseLeftButtonUp`事件而不是 , ，如下所示：`MouseLeftButtonUp`

```
<Button PreviewMouseLeftButtonUp="Button_PreviewMouseLeftButtonUp">
    <Button.Template>
        <ControlTemplate>
            <StackPanel>
                <Image Source="..." />
            </StackPanel>
        </ControlTemplate>
    </Button.Template>
</Button> 
```

你的 Button 模板只有一个 Image，我猜你不需要这个 Button，你可以像上面那样使用，这样你就可以捕获 MouseLeftUp 事件。

```
<Image MouseLeftButtonUp="Image_MouseLeftButtonUp" Source="..." /> 
```

这种方式要容易得多，但这取决于您的需要。

*顺便说一句，对不起我的废话英语，我希望它可以帮助你。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:38:59.383

尝试使用事件 PreviewMouseLeftButtonUp。

# eclipse - 如何记住Eclipse中运行类型的选择？

> ID：12496268
> 
> 赞同：0
> 
> 时间：2012-09-19T13:54:15.220
> 
> 标签：eclipse, scala

每次我尝试在 Eclipse 中运行我的 Scala 程序时，它都会询问我是 Scala 还是 Java。我选择 Scala，它运行，然后我尝试再次运行它，Eclipse 再次询问我......这很烦人。

如何让我的选择坚持下去，所以我会被问一次甚至根本不会被问到（我认为应该承认扩展名）？

## 更新

请参阅 Luigi 的答案——我**不是**在询问密钥分配。我问的是在运行文件时记住我选择的文件类型。所以它与编辑键盘无关（实际上我不使用任何键盘快捷键来运行应用程序）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:42:16.613

检查启动首选项页面的“启动操作”设置，并确保将其从默认更改为始终启动先前启动的应用程序（或从运行/调试按钮的下拉菜单中选择它）。 ![启动首选项页面](../Images/e246ef53ac7b0c48c6d201bb938e454f.png) ![落下](../Images/8fe5c61f41a2a543d6c006d4363487b5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:35:06.693

Scala IDE 的某些部分基于 JDT - Java 开发工具。这意味着 eclipse 有时无法区分 Scala 和 Java 应用程序。

前段时间在[邮件列表](https://groups.google.com/forum/#!msg/scala-ide-dev/Vdmgmd1h3Zo/a3u-Fyj0JBoJ)中讨论了这个问题。有关如何避免即将到来的帧的一些建议，请参见那里的讨论。

# php - 显示 MySQL 数据库中的外来字符

> ID：12496271
> 
> 赞同：0
> 
> 时间：2012-09-19T13:54:21.240
> 
> 标签：php, mysql, utf-8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:26:14.807

The easiest way to fix this issue is to call the query "SET NAMES utf8" before accessing your utf8 charecters from DB

# xpath - 在 Safari 6 Web 检查器中使用 XPath

> ID：12496272
> 
> 赞同：9
> 
> 时间：2012-09-19T13:54:31.230
> 
> 标签：xpath, safari, web-inspector

Safari 的 Web Inspector 允许您从搜索框中进行 XPath 查询：

![网络检查员截图](../Images/8a932f2876ea53a3117b59c45b1c3813.png)

但是盒子太小了！你可以使用它，但不是很舒服。

是否可以从屏幕截图底部显示的控制台提示执行 XPath 查询？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-19T14:09:49.090

我认为在 Chrome 或 Firefox 或 Safari 的控制台中，您可以使用函数评估 XPath 表达式，`$x`例如`$x('//span')`选择所有`span`元素。

# java - 检查端口是否在 java/js/jsp 中的某个 ip 中打开

> ID：12496276
> 
> 赞同：0
> 
> 时间：2012-09-19T13:54:49.387
> 
> 标签：java, javascript, jsp

我正在尝试制作检查 ip 地址及其端口并返回它是否正在侦听的 java 程序。由于我正在做的是基于 Web 的编程，因此我希望该程序非常轻便高效。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:58:35.030

为此，您可以尝试使用[`Socket`](http://docs.oracle.com/javase/6/docs/api/index.html?java/net/Socket.html)Java 中的 API。如果没有人在 IP:PORT 上监听，则会抛出“连接被拒绝”异常。你想如何继续进一步检查连接是否被接受是你会/应该知道的。

# hibernate - Hibernate 命名查询编译的问题

> ID：12496278
> 
> 赞同：0
> 
> 时间：2012-09-19T13:54:54.510
> 
> 标签：hibernate

有什么方法可以在服务器启动期间避免 Hibernate Named Queries 编译和验证？

# c# - 模拟复杂的第 3 方库

> ID：12496279
> 
> 赞同：4
> 
> 时间：2012-09-19T13:55:02.000
> 
> 标签：c#, unit-testing, moq, mstest

我有一个使用 3rd 方 FTP 库[http://ftps.codeplex.com/](http://ftps.codeplex.com/)的类，我想模拟它，以便我可以对那个类而不是 FTP 库进行单元测试。我已经做到了，但对我来说感觉很乱。具体来说，该类使用了 AlexPilotti.FTPS.Client.FTPSClient 类的这些方法：

```
public string Connect(string hostname, ESSLSupportMode sslSupportMode)
public ulong PutFile(
    string localFileName, string remoteFileName,
    FileTransferCallback transferCallback) 
```

委托 AlexPilotti.FTPS.Client.FileTransferCallback 如下所示：

```
public delegate void FileTransferCallback(
    FTPSClient sender, ETransferActions action, 
    string localObjectName, string remoteObjectName,
    ulong fileTransmittedBytes, ulong? fileTransferSize, ref bool cancel); 
```

您会看到一个问题，因为 PutFile 从 FTP 库中获取了委托，并且该委托也从库中获取了两种不同的类型。我决定使用泛型与这些类型分离。

为了能够创建模拟对象，我创建了一个接口，然后创建了一个派生类，它是 FTP 库功能的包装器。

```
// Interface so that dependency injection can be used.
public delegate void FileTransferCallback<T1, T2>(T1 sender, T2 action,
    string localObjectName, string remoteObjectName,
    ulong fileTransmittedBytes, ulong? fileTransferSize,
    ref bool cancel);

public interface IFTPClient<T1, T2> : IDisposable
{
    string Connect(string hostname, System.Net.NetworkCredential credential);
    ulong PutFile(
        string localFileName, string remoteFileName,
        FileTransferCallback<T1, T2> transferCallback);
}

// Derived class, the wrapper
using FTPSClient = FTPS.Client.FTPSClient;
using ETransferActions = FTPS.Client.ETransferActions;

public class FTPClient : IFTPClient<FTPSClient, ETransferActions>
{
    public FTPClient()
    {
        client = new AlexPilotti.FTPS.Client.FTPSClient();
    }

    public ulong PutFile(
        string localFileName, string remoteFileName,
        FileTransferCallback<FTPSClient, ETransferActions> transferCallback)
    {
        callback = transferCallback;
        return client.PutFile(localFileName, remoteFileName, TransferCallback);
    }

    public void Dispose()
    {
        client.Dispose();
    }

    public string Connect(
        string hostname, System.Net.NetworkCredential credential)
    {
        return client.Connect(hostname, credential, 
            FTPS.Client.ESSLSupportMode.ClearText);
    }

    void TransferCallback(
        FTPS.Client.FTPSClient sender, FTPS.Client.ETransferActions action, 
        string localObjectName, string remoteObjectName,
        ulong fileTransmittedBytes, ulong? fileTransferSize, 
        ref bool cancel)
    {
        callback.Invoke(sender, action, localObjectName, remoteObjectName,
            fileTransmittedBytes, fileTransferSize, ref cancel);
    }

    private AlexPilotti.FTPS.Client.FTPSClient client;
    private FileTransferCallback<FTPSClient, ETransferActions> callback;
} 
```

这里有一个使用这个接口的类，我对它进行了单元测试。我将它剥离了一点，所以只使用了 Connect 方法，但我希望它仍然能说明我的问题。

```
public class FTPServerConnection<T1, T2>
{
    public void Init(
        IFTPClient<T1, T2> client, string serverName,
        string userName, string passwd)
    {
        IsConnected = false;

        ServerName = serverName;
        UserName = userName;
        Passwd = passwd;

        ftpClient = client;

        Connect();
    }

    public void Connect()
    {
        ftpClient.Connect(
           ServerName,
           new System.Net.NetworkCredential(UserName, Passwd));
    }

    public string ServerName { protected set; get; }
    public string UserName { protected set; get; }
    public string Passwd { protected set; get; }

    public bool IsConnected { protected set; get; }

    private IFTPClient<T1, T2> ftpClient;
} 
```

最后是单元测试：

```
[TestMethod()]
public void FTPServerConnectionConstructorTest()
{
    var ftpClient = new Mock<IFTPClient<object, object>>();
    var ftpServer = new FTPServerConnection<object, object>();
    ftpServer.Init(ftpClient.Object, "1.2.3.4", "user", "passwd");

    Assert.AreEqual("1.2.3.4", ftpServer.ServerName);
    Assert.AreEqual("user", ftpServer.UserName);
    Assert.AreEqual("passwd", ftpServer.Passwd);
} 
```

在这种情况下，通常的方法是什么？我的方法似乎很混乱，我想知道是否有更简单的方法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:28:45.147

我认为这只会让人感觉很混乱，因为您需要处理第三方代表，但对我来说，它看起来像是一种非常标准的抽象/模拟方法。

我唯一的评论是`FTPServerConnection`看起来有点不标准的结构；按照它的编写方式，您必须实例化一个处于无效状态的实例（*即*没有客户端详细信息的实例）`Init()`，然后调用它本身调用`Connect()`（从您的测试的外观来看，它永远不会被服务器类的客户端调用）。我会说`Init()`在构造函数中提供参数会更正常`FTPServerConnection`，然后完全删除该`Init()`方法并让客户端执行此操作：

```
var ftpClient = new Mock<IFTPClient<object, object>>();

using (var ftpServer = new FTPServerConnection<object, object>(
     ftpClient.Object,
     "1.2.3.4",
     "user",
     "passwd"))
{
    ftpServer.Connect();
} 
```

...但同样，关于您抽象 FTP 库的方式，我认为这是一种不错的方式:)

# c# - 打开 XML 段落间距

> ID：12496289
> 
> 赞同：5
> 
> 时间：2012-09-19T13:55:26.337
> 
> 标签：c#, openxml

我在使用 Open XML 生成 .docx 时遇到了一个奇怪的问题。我有一个`TableCell`然后`Paragraph`生成这样`Run`的：`Text`

```
tblRow.Append(new TableCell(new Paragraph(GetPropertiesForStyle("TableDescription"), new Run(new Text(colName))))); 
```

该`GetPropertiesForStyle`方法返回`ParagraphProperties`特定段落的 并设置样式。这一切都很好，但是在表格行中，第一个单元格之前似乎有双倍间距，最后一个单元格之后有双倍间距 - 中间的所有单元格看起来都很好。

![在此处输入图像描述](../Images/bc54835029b711bf02d44f44b9911fb5.png)

我的样式配置如下所示：

```
new Style(
    new StyleName() { Val = "TableDescription" },
    new StyleParagraphProperties(
        new ParagraphBorders(
            new BottomBorder() { Val = BorderValues.None }
        ),
        new SpacingBetweenLines() { Before = "100", After = "100", Line = "200", LineRule = LineSpacingRuleValues.Exact },
        new TableCellVerticalAlignment() { Val = TableVerticalAlignmentValues.Center }
    )
), 
```

我已经使用生产力工具检查了生成的 XML，它的属性应用得非常好。每个`TableCell`都有以下配置（那里有一些额外的边距属性和一个着色器填充，为简洁起见我省略了）。

```
<w:tc>
    <w:p>
        <w:pPr>
            <w:pStyle w:val="TableDescription" />
        </w:pPr>
        <w:r>
            <w:t>Reporting Period</w:t>
        </w:r>
    </w:p>
</w:tc> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T15:39:57.177

通过在我的样式中添加以下内容来解决此问题：

```
new ContextualSpacing() { Val = false } 
```

这告诉 word 取消选中**不要**在段落选项中相同样式的段落之间添加空格。

# firefox - Mozilla byob 项目是否有替代方案？

> ID：12496296
> 
> 赞同：1
> 
> 时间：2012-09-19T13:55:46.443
> 
> 标签：firefox, browser, mozilla

[想问一下Mozilla byob](http://byob.mozilla.com/)的项目是否有替代方案（自己搭建浏览器，最近关了）。

如果有人用 Firefox 或其他浏览器做了类似的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:25:35.477

有允许各种 Firefox 自定义的[CCK 向导。](https://addons.mozilla.org/en-US/firefox/addon/cck/)你得到的不是真正的 Firefox 构建，而是一个扩展。在机器上部署该扩展的一种方法是将其[添加到 Windows 注册表](https://developer.mozilla.org/en-US/docs/Adding_Extensions_using_the_Windows_Registry)中，该注册表将自动将其安装到特定机器上的所有 Firefox 配置文件中。也可以修改 Firefox 安装程序以包含该扩展，但这有点复杂。

# javascript - 这两个代码有什么区别？

> ID：12496299
> 
> 赞同：0
> 
> 时间：2012-09-19T13:55:53.990
> 
> 标签：javascript, extjs

我是 ExtJs 的新手，刚接触一些基本的东西，发现作为初学者很难上手。

下面是实现Ext按钮的两种方式：

**样品1：**

```
var nextBtn = new Ext.Button({
    text: 'Next >>',
    handler: function() {
        Ext.getDom('form_main').submit();
    },
    id: 'next',
    renderTo: 'next'
}); 
```

**样品2：**

```
Ext.widget('button', {
text: 'some long title of my cool button',
scale: 'large',
cls: 'my-button',
width: 100,
renderTo: 'output'
}); 
```

我的猜测是因为版本，它已经改变了。请让我知道这两个代码之间有什么区别。

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T11:38:45.133

在 ExtJS 中有很多方法可以实例化一个类。

以这个定义为例：

```
Ext.define ('Ext.button.Button', {
  alias: 'widget.button' ,
  // here other properties and methods ...
}); 
```

然后您可以选择其中一种方式来实例化 Ext.button.Button：

第一：javascript风格

```
var button = new Ext.button.Button ({
  // props and methods
}); 
```

二：ExtJS 风格搭配*Ext.create*方法

```
var button = Ext.create ('Ext.button.Button', {
  // props and methods
}); 
```

第三：带有*Ext.widget*方法的ExtJS风格（它使用*别名*属性）

```
var button = Ext.widget ('button', {
  // props and methods
}); 
```

我建议您使用第二种或第三种方式，因为它们使用 ExtJS 动态加载器：**[here's the documentation](http://www.sencha.com/blog/countdown-to-ext-js-4-dynamic-loading-and-new-class-system)**

# sql-server - sql server 2008 存储过程优化

> ID：12496307
> 
> 赞同：2
> 
> 时间：2012-09-19T13:56:31.600
> 
> 标签：sql-server, sql-server-2008, stored-procedures

我有一个存储过程，它非常简单，只有一个 select 语句，但是 where 子句会根据参数而变化。

我正在使用 if else 语句并写出 4 次选择，有没有更好的方法来简化这个存储过程？

```
 IF @Status > 0 
        BEGIN
            IF @Group = ''
                BEGIN
                    SELECT  *
                    FROM    ( SELECT    tbl.* ,
                                        ROW_NUMBER() OVER ( ORDER BY tbl.NDB_No ) rownum
                              FROM      dbo.FoodAbbrev AS tbl
                              WHERE     Status = @Status
                            ) seq
                    WHERE   seq.rownum BETWEEN @X AND @Y
                    ORDER BY seq.rownum
                END
            ELSE 
                BEGIN
                    SELECT  *
                    FROM    ( SELECT    tbl.* ,
                                        ROW_NUMBER() OVER ( ORDER BY tbl.NDB_No ) rownum
                              FROM      dbo.FoodAbbrev AS tbl
                              WHERE     Status = @Status
                                        AND GroupCd = @Group
                            ) seq
                    WHERE   seq.rownum BETWEEN @X AND @Y
                    ORDER BY seq.rownum

                END
        END
    ELSE 
        BEGIN
            IF @Group = ''
                BEGIN
                    SELECT  *
                    FROM    ( SELECT    tbl.* ,
                                        ROW_NUMBER() OVER ( ORDER BY tbl.NDB_No ) rownum
                              FROM      dbo.FoodAbbrev AS tbl
                            ) seq
                    WHERE   seq.rownum BETWEEN @X AND @Y
                    ORDER BY seq.rownum
                END
            ELSE 
                BEGIN
                    SELECT  *
                    FROM    ( SELECT    tbl.* ,
                                        ROW_NUMBER() OVER ( ORDER BY tbl.NDB_No ) rownum
                              FROM      dbo.FoodAbbrev AS tbl
                              WHERE     GroupCd = @Group
                            ) seq
                    WHERE   seq.rownum BETWEEN @X AND @Y
                    ORDER BY seq.rownum

                END
        END
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:59:46.247

将所有这些`IF`语句替换为以下`SELECT`带有可选参数的语句：

```
 SELECT  *
   FROM    ( SELECT    tbl.* ,
             ROW_NUMBER() OVER ( ORDER BY tbl.NDB_No ) rownum
             FROM      dbo.FoodAbbrev AS tbl
             WHERE     1 = 1
             AND (@Group IS NULL OR GroupCd = @Group)
             AND (@Status IS NULL OR Status = @Status)
   ) seq
   WHERE   seq.rownum BETWEEN @X AND @Y
   ORDER BY seq.rownum 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:07:12.037

```
 SELECT  *
                FROM    ( SELECT    tbl.* ,
                                    ROW_NUMBER() OVER ( ORDER BY tbl.NDB_No ) rownum
                          FROM      dbo.FoodAbbrev AS tbl
                          WHERE     ISNULL(Status,0) = CASE WHEN @Status > 0 THEN @Status ELSE ISNULL(Status,0) END
                          AND       ISNULL(GroupCd, '') = CASE WHEN @Group = '' THEN ISNULL(GroupCd, '') ELSE @Group END
                        ) seq
                WHERE   seq.rownum BETWEEN @X AND @Y
                ORDER BY seq.rownum 
```

# c# - GridView：在服务器上运行时出现数据库错误，在 localhost 上运行良好

> ID：12496313
> 
> 赞同：2
> 
> 时间：2012-09-19T13:56:43.880
> 
> 标签：c#, asp.net, sql

我正在做一个项目，我必须在网格视图中返回以下列，并且可以通过 0-7 个过滤器缩小搜索范围。

*   应用ID
*   客户名称
*   项目编号
*   项目分号
*   项目名称
*   应用类型
*   应用子类型
*   节点名称
*   用户名

我可以在我的本地机器上很好地做到这一点，但它返回一个错误，说当我在服务器上运行它时它无法在数据库源中找到 ProjectTitle 字段。其余代码都很好，因为当我从 GridView 中删除 ProjectTitle 列时没有显示错误。以下是我的代码。

**ASP**

```
<asp:GridView ID="GridView2" runat="server"
            CellPadding="4" 
            ForeColor="#333333" 
            GridLines="None" 
            onselectedindexchanged="GridView1_SelectedIndexChanged" 
        AutoGenerateColumns="False">
        <Columns>
            <asp:BoundField DataField="AppID" HeaderText="AppID" InsertVisible="False" 
                ReadOnly="True" SortExpression="AppID" />
            <asp:BoundField DataField="ClientName" HeaderText="ClientName" 
                SortExpression="ClientName" />
            <asp:BoundField DataField="ProjectNumber" HeaderText="ProjectNo." 
                SortExpression="ProjectNumber" />
            <asp:BoundField DataField="ProjectSubNumber" HeaderText="SubNo." 
                SortExpression="ProjectSubNumber" />
            <asp:BoundField DataField="ProjectTitle" HeaderText="ProjectTitle" 
                SortExpression="ProjectTitle" />
            <asp:BoundField DataField="AppType" HeaderText="AppType" 
                SortExpression="AppType" />
            <asp:BoundField DataField="AppSubType" HeaderText="AppSubType" 
                SortExpression="AppSubType" />
            <asp:BoundField DataField="NodeName" HeaderText="NodeName" 
                SortExpression="NodeName" />
            <asp:BoundField DataField="Username" HeaderText="Username" 
                SortExpression="Username" />
            <asp:CommandField ShowSelectButton="True" ButtonType="Image" 
                SelectImageUrl="~/buttons/png/Select.png" />
        </Columns>
        <AlternatingRowStyle BackColor="White" />
        <FooterStyle BackColor="#D11011" 
                Font-Bold="True" 
                ForeColor="White" />
        <HeaderStyle BackColor="#D11011" 
                Font-Bold="True" 
                ForeColor="White" />
        <PagerStyle BackColor="#FDEBEB" 
                ForeColor="#333333" 
                HorizontalAlign="Center" />
        <RowStyle BackColor="#FDEBEB" 
                ForeColor="#333333" />
        <SelectedRowStyle BackColor="#FDCCCC" 
                Font-Bold="True" 
                ForeColor="Navy" />
        <SortedAscendingCellStyle BackColor="#FDEBEB" />
        <SortedAscendingHeaderStyle BackColor="#4D0000" />
        <SortedDescendingCellStyle BackColor="#FDEBEB" />
        <SortedDescendingHeaderStyle BackColor="#820000" />
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:NeoDyneNewTMS %>" SelectCommand="SELECT [AppID],[ClientName], [ProjectNumber], [ProjectSubNumber], [ProjectTitle], [AppType], [AppSubType], [NodeName], [Username] FROM [PMS_AppRegister],[TMS_Clients],[TMS_ProjectRegister],[PMS_AppTypes],[PMS_AppSubTypes] WHERE [TMS_Clients].[ClientID] = [TMS_ProjectRegister].[ClientID] AND [PMS_AppRegister].[ProjectID] = [TMS_ProjectRegister].[ProjectID] AND [PMS_AppRegister].[AppTypeID] = [PMS_AppTypes].[AppTypeID] AND [PMS_AppRegister].[AppSubTypeID] = [PMS_AppSubTypes].[AppSubTypeID] ORDER BY [AppID] DESC">
    </asp:SqlDataSource>
    <asp:SqlDataSource ID="PMS_sch_ds_SELECTAll" 
            runat="server" 
            ConnectionString="<%$ ConnectionStrings:NeoDyneNewTMS %>" 
            SelectCommand="">
        <SelectParameters>
            <asp:ControlParameter ControlID="PMS_sch_ddl_ClientName" 
                    Name="ClientID" 
                    PropertyName="SelectedValue" />
            <asp:ControlParameter ControlID="PMS_sch_ddl_ProjectNumber" 
                    PropertyName="SelectedValue" 
                    Name="ProjectNumber" 
                    DefaultValue=null/>
            <asp:ControlParameter ControlID="PMS_sch_ddl_ProjectSubNumber" 
                    Name="ProjectID" 
                    PropertyName="SelectedValue" 
                    DefaultValue=null />
            <asp:ControlParameter ControlID="PMS_sch_ddl_ApplicationType" 
                    Name="AppTypeID" 
                    PropertyName="SelectedValue" 
                    DefaultValue=null />
            <asp:ControlParameter ControlID="PMS_sch_ddl_ApplicationSubType" 
                    Name="AppSubTypeID" 
                    PropertyName="SelectedValue" 
                    DefaultValue=null />
            <asp:ControlParameter ControlID="PMS_sch_tb_NodeName" 
                    Name="NodeName" 
                    PropertyName="Text" 
                    DefaultValue=null />
        </SelectParameters>
    </asp:SqlDataSource> 
```

**C＃**

```
protected void btnsearch_Click(object sender, ImageClickEventArgs e)
        {
            GridView2.DataSourceID = "PMS_sch_ds_SELECTAll";
            #region Select Command for the Grid View
            //initializes the string for SelectCommand
            string SelectCommand = "";
            if (PMS_sch_ddl_ClientName.SelectedValue != "")
            {
                if (PMS_sch_ddl_ProjectNumber.SelectedValue != "")
                {
                    if (PMS_sch_ddl_ProjectSubNumber.SelectedValue != "")
                    {
                        if (PMS_sch_ddl_ApplicationType.SelectedValue != "")
                        {
                            if (PMS_sch_ddl_ApplicationSubType.SelectedValue != "")
                            {
                                #region Client Name, Project Number, Project Sub Number, Application Type, Application Sub Type, Node Name
                                if (PMS_sch_tb_NodeName.Text != "")
                                {
                                    SelectCommand = "SQL";
                                }
                                #endregion
                                #region Client Name, Project Number, Project Sub Number, Application Type, Application Sub Type
                                else
                                {
                                    SelectCommand = "SQL";
                                }
                                #endregion
                            }
                            else
                            {
                                #region Client Name, Project Number, Project Sub Number, Application Type, Node Name
                                if (PMS_sch_tb_NodeName.Text != "")
                                {
                                    SelectCommand = "SQL";
                                }
                                #endregion
                                #region Client Name, Project Number, Project Sub Number, Application Type
                                else
                                {
                                    SelectCommand = "SQL";
                                }
                                #endregion
                            }
                        }
                        else
                        {
                            #region Client Name, Project Number, Project Sub Number, Node Name
                            if (PMS_sch_tb_NodeName.Text != "")
                            {
                                SelectCommand = "SQL";
                            }
                            #endregion
                            #region Client Name, Project Number, Project Sub Number
                            else
                            {
                                SelectCommand = "SQL";
                            }
                            #endregion
                        }
                    }
                    else
                    {
                        if (PMS_sch_ddl_ApplicationType.SelectedValue != "")
                        {
                            if (PMS_sch_ddl_ApplicationSubType.SelectedValue != "")
                            {
                                #region Client Name, Project Number, Application Type, Application Sub Type, Node Name
                                if (PMS_sch_tb_NodeName.Text != "")
                                {
                                    SelectCommand = "SQL";
                                }
                                #endregion
                                #region Client Name, Project Number, Application Type, Application Sub Type
                                else
                                {
                                    SelectCommand = "SQL";
                                }
                                #endregion
                            }
                            else
                            {
                                #region Client Name, Project Number, Application Type, Node Name
                                if (PMS_sch_tb_NodeName.Text != "")
                                {
                                    SelectCommand = "SQL";
                                }
                                #endregion
                                #region Client Name, Project Number, Application Type
                                else
                                {
                                    SelectCommand = "SQL";
                                }
                                #endregion
                            }
                        }
                        else
                        {
                            #region Client Name, Project Number, Node Name
                            if (PMS_sch_tb_NodeName.Text != "")
                            {
                                SelectCommand = "SQL";
                            }
                            #endregion
                            #region Client Name, Project Number
                            else
                            {
                                SelectCommand = "SQL";
                            }
                            #endregion
                        }
                    }
                }
                else
                {
                    if (PMS_sch_ddl_ApplicationType.SelectedValue != "")
                    {
                        if (PMS_sch_ddl_ApplicationSubType.SelectedValue != "")
                        {
                            #region Client Name, Application Type, Application Sub Type, Node Name
                            if (PMS_sch_tb_NodeName.Text != "")
                            {
                                SelectCommand = "SQL";
                            }
                            #endregion
                            #region Client Name, Application Type, Application Sub Type
                            else
                            {
                                SelectCommand = "SQL";
                            }
                            #endregion
                        }
                        else
                        {
                            #region Client Name, Application Type, Node Name
                            if (PMS_sch_tb_NodeName.Text != "")
                            {
                                SelectCommand = "SQL";
                            }
                            #endregion
                            #region Client Name, Application Type
                            else
                            {
                                SelectCommand = "SQL";
                            }
                            #endregion
                        }
                    }
                    else
                    {
                        #region Client Name, Node Name
                        if (PMS_sch_tb_NodeName.Text != "")
                        {
                            SelectCommand = "SQL";
                        }
                        #endregion
                        #region Client Name
                        else
                        {
                            SelectCommand = @"SELECT    DISTINCT [AppID], [ClientName], [ProjectNumber], [ProjectSubNumber], [ProjectTitle], [AppType], [AppSubType], [NodeName], [PMS_AppRegister].[Username]
                            FROM    [TMS_Clients], [TMS_ProjectRegister], [PMS_AppTypes], [PMS_AppSubTypes],
                                    [PMS_AppRegister], [TMS_EmployeeRegister]
                            WHERE   [TMS_Clients].[ClientID]                    = @ClientID                         AND
                                    [TMS_Clients].[ClientID]                    = [TMS_ProjectRegister].[ClientID]  AND
                                    ([ProjectNumber] IN (SELECT [ProjectNumber]
                                                        FROM    [TMS_ProjectRegister]
                                                        WHERE   [ProjectID] IN  (SELECT [ProjectID]
                                                                                FROM    [PMS_AppRegister])      AND
                                                                [ClientID] = @ClientID))                            AND
                                    ([ProjectSubNumber] IN  (SELECT [ProjectSubNumber]
                                                            FROM    [TMS_ProjectRegister]
                                                            WHERE   [ProjectID] IN  (SELECT [ProjectID]
                                                                                    FROM    [PMS_AppRegister])  AND
                                                                    [ClientID] = @ClientID))                        AND
                                    [PMS_AppRegister].[ProjectID]               = [TMS_ProjectRegister].[ProjectID] AND
                                    [PMS_AppRegister].[AppTypeID]               = [PMS_AppTypes].[AppTypeID]        AND
                                    [PMS_AppSubtypes].[AppTypeID]               = [PMS_AppRegister].[AppTypeID]     AND
                                    [PMS_AppSubTypes].[AppSubTypeID]            = [PMS_AppRegister].[AppSubTypeID]";
                        }
                        #endregion
                    }
                }
            }
            else if (PMS_sch_ddl_ClientName.SelectedValue == "")
            {
                GridView2.DataSourceID = "SqlDataSource1";
            }
            //Lets the datasource's Select Command equal to the correct string
            PMS_sch_ds_SELECTAll.SelectCommand = SelectCommand;
            #endregion
            //GridView1.DataBind();
        } 
```

关于导致这种情况的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:05:23.793

您确定远程数据库包含该字段`ProjectTitle`吗？

如果您更改 localhost 连接字符串 localhost 以使其使用远程数据库（但仍使用 localhost 项目），您仍然会收到错误吗？（这将确定问题出在代码中，还是在数据库中。）

# sas - 根据另一个变量的内容填充 SAS 变量

> ID：12496315
> 
> 赞同：1
> 
> 时间：2012-09-19T13:56:47.203
> 
> 标签：sas

我有一个变量，`textvar`看起来像这样：

```
type=1&name=bob
type=2&name=sue 
```

我想创建一个如下所示的新表：

```
type  name
1     bob
2     sue 
```

我的方法是用来`scan`分割变量，`&`所以对于我的第一次观察

```
var1      var2
type=1    name=bob 
```

所以现在我可以再次使用扫描来拆分`=`：

```
vname = scan(var1, 1, '=');
value = scan(var1, 2, '='); 
```

但是我现在如何分配`value`给名为的变量`vname`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:28:55.063

PROC TRANPSOSE 是最快的方法。您需要一个 ID 变量（虚拟或真实）。

```
data test;
informat testvar $50.;
input testvar $;
datalines;
type=1&name=bob
type=2&name=sue
;;;;
run;

data test_vert;
set test;
id+1;
length scanner $20 vname vvalue $20;
scanner=scan(testvar,1,"&");
do _t=2 by 1 until (scanner=' ');   
    vname=scan(scanner,1,"=");
    vvalue=scan(scanner,2,"=");
    output;
    scanner=scan(testvar,_t,"&");
end;
run;

proc transpose data=test_vert out=test_T;
by id;
id vname;
var vvalue;
run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:04:47.457

这有帮助吗？[SAS 中的动态变量名](https://stackoverflow.com/questions/10798393/dynamic-variable-names-in-sas)

我想我有一些代码可以解决这个问题，但把它留在了我的工作场所。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:08:22.200

显然你没有包含你的真实数据，但是如果每行中原始数据的格式相同，你不能硬编码一些值吗？我的代码将“=”和“&”转换为“，”以使扫描功能更易于使用。

```
data want (keep=type name);
set test;
_newvar=translate(testvar,",,","&=");
    type=input(scan(_newvar,2),best12.);
    length name $20;
    name=scan(_newvar,4);
run; 
```

# javascript - 将远程 RRD 转换为 JSON 格式

> ID：12496318
> 
> 赞同：0
> 
> 时间：2012-09-19T13:56:53.450
> 
> 标签：javascript, ruby-on-rails-3.2, rrdtool, rrd

我有一个项目，我需要访问远程托管的 RRD 文件并创建一个高度交互的仪表板来可视化数据（很可能使用 Rails/Flot 等）

我研究了诸如 RRDTool 和 Jarmon 之类的项目（这似乎是特定于收集的），并且想知道是否有一种经过验证的方法可以将 rrd 文件中的数据转换为我可以在 javascript 方面使用的格式。我打算让它在一个相当简单的 heroku 实例上运行，如果这是我的服务器限制的任何指标。

非常感谢，纳德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:23:30.667

查看在命令行上调用的 rrdtool xport，它可以为您生成 json，或者当通过脚本 api 调用时，您可以获得原始数据，然后您可以使用脚本语言轻松地将其转换为 json。

HTH 托比

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-19T06:42:26.237

你需要JavascriptRRD：

[http://javascriptrrd.sourceforge.net/index.html](http://javascriptrrd.sourceforge.net/index.html)

顾名思义（Javascript RRD），javascriptRRD 是一个 javascript 库，用于从远程 Web 服务器和本地文件目录读取和解释 RRD（循环数据库）文件。它使用类似 AJAX 的技术，但没有在远程 Web 服务器上运行任何代码；即，它提供了对 RRD 文件的纯客户端访问。

javascriptRRD 包提供了基本的 RRD 读取库以及帮助库，以便使用 Flot 库轻松显示 RRD 文件。

# r - 来自 .csv 文件 R 的 RGB 颜色

> ID：12496320
> 
> 赞同：0
> 
> 时间：2012-09-19T13:56:57.750
> 
> 标签：r, csv, plot, rgb

我担心以下问题：我有一个 .csv 文件，其中包含我公司企业设计的 RGB 颜色。

```
cols <-   read.table("cols.csv") 
```

因为你没有文件，所以一些信息

```
str(cols) 
```

返回

'data.frame'：66 obs。1 个变量：$ V1：因子 w/ 66 个级别“0,0,0”，“0,122,155”，..：1 64 5 20 37 56 57 58 59 60 ... 和

```
cols 
```

返回

```
 V1
1        0,0,0

2      51,51,51

3   102,102,102 
```

. . .

我的想法是绘制一个 vektor，并使用 R 中的 rgb 命令从我的文件中使用 66 个 rgb 颜色代码。但是，如果我这样做：

```
x<-seq(0,2,0.2)

barplot(x, col=rgb(cols$V1[1],maxColorValue=255)) 
```

我明白了

```
Error in rgb(cols$V1[1], maxColorValue = 255) : 
  argument "green" is missing, with no default 
```

我希望我能够把自己说清楚。

亲切的问候，非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:08:36.017

我怀疑你的问题来自你的第一步。如果您的文件是`csv`文件，则使用`read.csv`. 您现在将拥有**三**列。你可以参考他们使用

```
 cols$V1, cols$V2, cols$V3 
```

要使用该`rgb`功能，只需

```
rgb(cols$V1[1], cols$V2[1], cols$V3[1]) 
```

# java - 支柱2。对象从 jsp 到动作

> ID：12496321
> 
> 赞同：1
> 
> 时间：2012-09-19T13:57:09.317
> 
> 标签：java, jsp, struts2

首先，我是 Struts 的新手。我有一堂课：

```
public class Articulo {

private int codigo;
private String descripcion;

public int getCodigo() {
    return codigo;
}
public void setCodigo(int codigo) {
    this.codigo = codigo;
}
public String getDescripcion() {
    return descripcion;
}
public void setDescripcion(String descripcion) {
    this.descripcion = descripcion;
}

} 
```

它填充了调度程序中的值。在调度程序中，我已经

```
private Articulo articulo;
.......
public Articulo getArticulo() {
    return articulo;
}

public void setArticulo(Articulo articulo) {
    this.articulo = articulo;
} 
```

还有一个JSP

```
<s:property value="articulo"/> 
```

这篇文章读得不错。也适用于关节

```
<s:property value="articulo.codigo"/> 
```

但是现在我想从那个 jsp 中将整个对象 articulo 转发到另一个动作。我可以

```
<s:hidden name="articulo.codigo" value="%{articulo.codigo}"/>
<s:hidden name="articulo.descripcion" value="%{articulo.descripcion}"/> 
```

这很好用，但无论如何可以做类似的事情

```
<s:hidden name="articulo" value="%{articulo}"/> 
```

那么，有没有办法在不设置它的所有属性的情况下从 JSP 中获取对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:14:15.907

有2点：

1.  问题：您不能使用`<s:hidden />`所有参数传输对象，使用HTTP传输的应该是字符串。由于您无法将此对象转换为字符串，因此您也无法使用 HTTP 传输它。

2.  解决方案：您可以将您的对象放入会话中，以便您可以随时访问它。这是一个[示例](http://www.java4s.com/struts-tutorials/example-on-struts-2-sessionaware-interface/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:28:37.093

是的，您可以通过参数以两种方式传输对象，也可以将其存储在会话中并在需要时访问它。

```
<jsp:forward page="URL" >
  <jsp:param name="ParamName1" value="YourObject" />
</jsp:forward> 
```

访问这里了解更多详情。 [http://www.gulland.com/courses/jsp/actions/forward](http://www.gulland.com/courses/jsp/actions/forward)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:43:08.147

将对象信息保存在会话中通常是首选方法。

但另一种选择是创建自己的[Type Converter](http://struts.apache.org/2.0.14/docs/type-conversion.html#TypeConversion-CreatingaTypeConverter)。

> 通过扩展 StrutsTypeConverter 创建一个类型转换器。Converter的作用是将String转换为Object，将Object转换为String。

通过这样做，你可以这样`<s:hidden name="articulo" value="%{articulo}"/>`

请记住，**这种方法是不安全**的，因为对象值将在隐藏标签中打印为字符串，并且可以通过浏览器看到。

但优点是，如果您需要这样的东西，这种方法可以跨不同的会话工作。

# apache - Tomcat 上的 Java 网站 Apache 上的 PHP 网站 - 如何将 PHP 网页转换为 Java 网页？

> ID：12496322
> 
> 赞同：2
> 
> 时间：2012-09-19T13:57:12.090
> 
> 标签：apache, jquery, tomcat, php-java-bridge, mod-proxy-html

我们在 Tomcat 上部署了一个 Java Web 应用程序。我们还设置了 Apache 和 mod_proxy_ajp 以将 Web 请求（端口 80/443）路由到 Tomcat。

我们想在同一个 Apache 服务器上部署一个 PHP 应用程序 - 可能在一个子目录 (/var/www/ourapp) 下。

现在我们想在 Java 应用程序生成的网页中访问和显示来自 PHP 应用程序的网页。计划实施单点登录。示例：来自 java 的网页具有（JQuery 选项卡），我们喜欢在选项卡中显示 PHP 网页，而所有其他 HTML 都来自 java 应用程序。

您能否全面说明如何进行此操作？主要是 1\. 我们应该如何在用于将 Web 请求路由到 Tomcat 的同一 Apache 服务器上安装/设置我们的 PHP 应用程序？即设置子域或安装在子目录 2\. 如何将 PHP 页面带入当前网页（由 java 生成）。我们可以使用 AJAX 请求还是应该使用 Java PHP Bridge/Querces 此类应用程序？

提前感谢您的时间。问候。

# mysql - Kohana3 和 MySQL：是否可以保留相关记录？

> ID：12496324
> 
> 赞同：0
> 
> 时间：2012-09-19T13:57:17.387
> 
> 标签：mysql, kohana, kohana-3, foreign-key-relationship, kohana-orm

我不确定这个问题是关于 MySQL db 还是关于框架。我认为两者兼而有之。

因此，我下面的代码刷新了表，但从另一个表中删除了其他相关记录。下面的代码在 Kohana3 框架中。

```
ORM::factory ( 'deal' ) ->delete_all (); //removes data
    foreach ( $deals as $deal )
    {
      //refreshes the Deals table row by row
      $orm_deal = ORM::factory ( 'Deal' );
      //... apply some values
      $orm_deal = ->save ();
    } 
```

问题：我不想从另一个表中删除记录。如果 Deals 中的“新”记录与相关记录完全兼容，是否可以通过更新的数据“更新” Deals 表，不会丢失任何链。我不想更改数据库和外键连接的结构。我也不想改变模型中的任何关系。我还有其他选择吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:28:31.713

没有办法“刷新”表数据。

据我了解 - 您的交易数组可能与表内容不同（一些数组记录是新的，一些表记录是旧的并且必须删除，一些记录必须刚刚更新）。

在这种情况下，您的方式是最正确的。从表中删除所有记录，然后用新记录填充表。

如果你想真正用新的“刷新”表数据，你必须编写一个函数来比较每条记录（如果这条记录在表中）并在比较后删除旧记录，插入新记录或更新旧记录新数据。

# android - userAgent jQuery 脚本冲突

> ID：12496329
> 
> 赞同：0
> 
> 时间：2012-09-19T13:57:27.067
> 
> 标签：android, jquery, iphone, css, jquery-mobile

我有一些 jQuery 可以设置各种 div 的高度和宽度。

```
jQuery(document).ready(function($) {
    var h = $(window).height();
    var w = $(window).width();
$('.slide') .css({'height': h});
$('.slide') .css({'width': w});
}); 
```

这一直很好，直到最近我添加了一个脚本来加载 userAgent 特定的 css 文件，一个用于 iPad、Android 和其他所有文件。由于某种原因，这两个脚本不会一起运行。我可以拥有正确大小的 div 或多平台网站。

```
if(navigator.userAgent.match(/iPad/i)) {
document.write("<link type=\"text\/css\" *etc*>");}

else if(navigator.userAgent.match(/android/i)){
document.write("<link type=\"text\/css\" *etc*>");}

else {
document.write("<link type=\"text\/css\" *etc*>");
} 
```

最后一点脚本阻止第一个脚本运行的任何原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:26:43.293

我的猜测如下。

`jQuery.ready()`一旦 dom 结构完全加载，但在加载任何外部样式表之前，就会调用该函数。这意味着在代码加载和应用样式表与修改 css 的代码之间存在潜在的竞争条件。

您可以尝试在`jQuery.onload()`.

```
var h = $(window).height();
var w = $(window).width();
$('.slide') .css({'height': h});
$('.slide') .css({'width': w}); 
```

# http-headers - setValue(contLength) 返回意外值

> ID：12496330
> 
> 赞同：0
> 
> 时间：2012-09-19T13:57:28.773
> 
> 标签：http-headers, google-apps-script, urlfetch

这是完整的脚本。

```
function check() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet1 = ss.getSheets()[0];
  var dataRange = sheet1.getDataRange().getValues();
      for (var i = 1; i < dataRange.length; i++) {
        var stringToDisplay=dataRange[i][0];
        var result = UrlFetchApp.fetch(stringToDisplay);
        var date=result.getHeaders()['Date'];
        var contType=result.getHeaders()['Content-Type'];
        var contLength=result.getHeaders()['Content-Length'];
        for(j=0;j<10;j++)
        {
          if(contLength=="undefined")
          {
            var contLength=result.getHeaders()['Content-Length'];
          }
        }
        var server=result.getHeaders()['Server'];
        var exp=result.getHeaders()['Expires'];
        var resp=result.getResponseCode();
        var myDate=new Date();    
        sheet1.getRange(i+1,2).setValue(date);
        sheet1.getRange(i+1,3).setValue(contLength);
        sheet1.getRange(i+1,4).setValue(contType);
        sheet1.getRange(i+1,5).setValue(server);
        sheet1.getRange(i+1,6).setValue(exp);
        sheet1.getRange(i+1,7).setValue(resp);
        sheet1.getRange(i+1,8).setValue(myDate.toString());
      }
} 
```

我在这里期待一个 int 值 - sheet1.getRange(i+1,3).setValue(contLength)。相反，每次执行脚本时，它都会带来 undefined 或 int 值。

这里可能是什么问题？

谢谢，萨米尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:21:24.163

在尝试调试您的问题时，我添加了 Utilities.Sleep(1000) 函数来给它一些时间，但它在 17 个中有 5 个“未定义”时被卡住了。都有“text/html; charset=utf-8”作为 Content-Type。可能只有 Apache 服务器提供正确的格式（因为它们产生一个整数）。接下来你应该看看它，看看它是否是问题所在。

请参阅我的[共享文档](https://docs.google.com/spreadsheets/d/1JsevmqZHGluinvBdyI6R8uXInMolTpPHOsLNNXUrZKY/edit)。

# internet-explorer - JIRA 5 - 无法使用 IE8 从“Bug”更改问题类型

> ID：12496331
> 
> 赞同：1
> 
> 时间：2012-09-19T13:57:29.533
> 
> 标签：internet-explorer, jira

最近将 JIRA 从 4 升级到 5。当使用 IE 8 创建新问题时，我们无法将问题保存为“Bug”类型以外的任何内容。在 Google Chrome 或 Firefox 中运行良好。

要在 IE 8 中重现：

1.  单击“创建问题”。

2.  将问题类型从错误更改为增强。

3.  单击摘要文本框。

--> 问题类型变回 bug

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:05:27.363

也有这个问题。假设您正在 Intranet 上运行/访问它。

在工具-->兼容性视图-->设置下，取消选中“在兼容性视图中显示 Intranet 站点”选项。

祝你好运！

# robotium - 签名娱乐会影响我的应用程序的功能吗？

> ID：12496332
> 
> 赞同：0
> 
> 时间：2012-09-19T13:57:32.087
> 
> 标签：robotium

我是Robotium的新手。我开始寻找机器人，不幸的是，经过长期的努力，它对我有用。

谁能告诉我，既然我已经删除了开发签名并使用了我的签名，它会影响应用程序的功能吗？

我听说只有谷歌地图会受到影响。任何人的更多想法？

谢谢钱德拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:25:04.377

Android 系统使用证书作为识别应用程序作者和建立应用程序之间信任关系的一种手段。

对功能没有影响。

您需要在用于自动化测试的应用程序上使用相同的签名。

[您将在“ http://developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html) ”上找到更多信息，希望您能在这里得到答案。谢谢。

# ruby-on-rails-3 - Twitter 'activerecord-reputation-system' 平均评分的奇怪行为

> ID：12496333
> 
> 赞同：1
> 
> 时间：2012-09-19T13:57:37.497
> 
> 标签：ruby-on-rails-3

注意：我在这个例子中关注[http://railscasts.com/episodes/364-active-record-reputation-system](http://railscasts.com/episodes/364-active-record-reputation-system)。

我有一个 Location 模型，我让用户对项目进行排名（即 1 到 5 星）：

> has_reputation :location_rating, 来源: :user, aggregated_by: :average

在我的控制器中，我要么删除评级：

> @location.delete_evaluation(:location_rating, current_user)

或更新它：

> @location.add_or_update_evaluation(:location_rating, params[:rating] , current_user)

我对如何查询感到非常困惑：

*   所有用户对某个位置的当前平均评分
*   给定用户对给定位置的评分
*   给定位置的评分计数

我正在尝试`@location.reputation_for(:location_rating)`并得到一些奇怪的行为。如果给定的用户删除了一个评分，那么新的reputation_for 值似乎在旧评分中取平均值。

例如：

```
1.9.3p0 :038 > RSEvaluation.all
RSEvaluation Load (1.7ms) SELECT "rs_evaluations".* FROM "rs_evaluations" 
+----+-----------------+-----------+-------------+-----------+-------------+-------+-------------------------+-------------------------+
| id | reputation_name | source_id | source_type | target_id | target_type | value | created_at | updated_at |
+----+-----------------+-----------+-------------+-----------+-------------+-------+-------------------------+-------------------------+
| 46 | tracking | 1 | User | 6 | Location | 0.0 | 2012-08-28 05:15:13 UTC | 2012-08-28 05:15:13 UTC |
| 48 | tracking | 1 | User | 5 | Location | 0.0 | 2012-09-04 14:44:37 UTC | 2012-09-04 14:44:37 UTC |
| 51 | tracking | 1 | User | 8 | Location | 0.0 | 2012-09-12 06:51:58 UTC | 2012-09-12 06:51:58 UTC |
| 52 | tracking | 1 | User | 1 | Location | 0.0 | 2012-09-12 14:54:39 UTC | 2012-09-12 14:54:39 UTC |
| 54 | location_rating | 1 | User | 5 | Location | 3.0 | 2012-09-19 05:10:46 UTC | 2012-09-19 05:18:16 UTC |
| 56 | tracking | 11 | User | 5 | Location | 0.0 | 2012-09-19 05:47:10 UTC | 2012-09-19 05:47:10 UTC |
| 58 | location_rating | 11 | User | 3 | Location | 2.0 | 2012-09-19 06:33:12 UTC | 2012-09-19 06:33:12 UTC |
| 61 | location_rating | 11 | User | 5 | Location | 5.0 | 2012-09-19 07:15:42 UTC | 2012-09-19 07:15:42 UTC |
+----+-----------------+-----------+-------------+-----------+-------------+-------+-------------------------+-------------------------+ 
```

在 Location id = 5 上，我的声誉不应该是 (3 + 5) / 2 = 4 吗？我目前得到 2.59375。我将用户 11 的评分更新为 1，新的声誉为 0.59375。

我确信我在这里遗漏了一些明显的东西（因为我是 Rails 新手）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T05:46:04.847

版本 2.0.0 修复了这个问题，所以你应该更新你的 gem。

# ios - 我的分布式应用程序不询问用户是否要订阅推送通知

> ID：12496336
> 
> 赞同：1
> 
> 时间：2012-09-19T13:57:37.913
> 
> 标签：ios, titanium, push-notification

我正在使用 Titanium API (SDK 5.0) 为 iOS 开发一个应用程序。此应用提供推送通知服务，已在开发设备上成功测试。

使用分发配置文件发布后，我意识到我的应用程序没有询问用户是否接受了此应用程序的推送通知。

请注意，所有设备都在 iOS 4.3 或更高版本上，我更新了我的配置和分发配置文件，我检查了这个应用程序的证书，包括推送通知服务。

这是我的注册代码：

```
Titanium.Network.registerForPushNotifications({
    types: [
        Titanium.Network.NOTIFICATION_TYPE_BADGE,
        Titanium.Network.NOTIFICATION_TYPE_ALERT,
        Titanium.Network.NOTIFICATION_TYPE_SOUND
    ],
    success:function(e)
    {
                    //get the device token then send it to server
        var deviceToken = e.deviceToken;
                    stockToken(token)
    },
    error:function(e)
    {
        return;
    },
    callback:function(e)
    {
        //when receive a notification
                    winAutres.message_push=e.data.alert;
        tabGroup.setActiveTab(4);
        return;
    }
}); 
```

# android - Android imageview从缩放图像中获取像素颜色

> ID：12496339
> 
> 赞同：7
> 
> 时间：2012-09-19T13:57:42.413
> 
> 标签：android, imageview

我的家庭自动化应用程序有一个功能，人们可以将带有平面图和仪表板的图像上传到他们的手机，他们可以用来控制他们的家庭自动化软件。我让他们上传两张图像：一张带有他们想要显示的图形的可见图像，以及第二张带有与他们想要从可见图像定位的对象对应的纯色的彩色地图。两个图像必须是相同的大小，以像素为单位。当他们点击屏幕时，我希望能够从颜色映射叠加中获取颜色，然后我继续执行与该颜色相关的任何操作。问题是，图像的缩放把我搞砸了。他们使用的图像可能比设备屏幕大，所以我对它们进行缩放，以便它们适合显示。我现在真的不需要捏缩放功能，但我可能会在以后实施。现在，我只希望图像以最大尺寸显示，以便适合屏幕。所以，我的问题是，如何修改此代码，以便从缩放图像中获得正确的接触点颜色。图像缩放本身似乎工作正常。它已缩放并正确显示。我只是无法获得正确的接触点。

```
 final Bitmap bm = decodeSampledBitmapFromFile(visible_image, size, size);
 if (bm!=null) {
    imageview.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
    imageview.setImageBitmap(bm);
 }

 final Bitmap bm2 = decodeSampledBitmapFromFile(image_overlay, size, size);
 if (bm2!=null) {
    overlayimageview.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
    overlayimageview.setImageBitmap(bm2);

    imageview.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent mev) {
            DecodeActionDownEvent(v, mev, bm2);
            return false;
        }

    });
 }

 private void DecodeActionDownEvent(View v, MotionEvent ev, Bitmap bm2)
 {
    xCoord = Integer.valueOf((int)ev.getRawX());
    yCoord = Integer.valueOf((int)ev.getRawY());
    try {
        // Here's where the trouble is.
        // returns the value of the unscaled pixel at the scaled touch point?
        colorTouched = bm2.getPixel(xCoord, yCoord); 
    } catch (IllegalArgumentException e) {
        colorTouched = Color.WHITE; // nothing happens when touching white
    }
 }

 private static Bitmap decodeSampledBitmapFromFile(String fileName, 
         int reqWidth, int reqHeight) {
     // code from 
     // http://developer.android.com/training/displaying-bitmaps/load-bitmap.html
     final BitmapFactory.Options options = new BitmapFactory.Options();
     options.inJustDecodeBounds = true;
     BitmapFactory.decodeFile(fileName, options);

     // Calculate inSampleSize
     options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

     // Decode bitmap with inSampleSize set
     options.inJustDecodeBounds = false;
     return BitmapFactory.decodeFile(fileName, options);
 }

 private static int calculateInSampleSize(
      BitmapFactory.Options options, int reqWidth, int reqHeight) {
     // code from 
     // http://developer.android.com/training/displaying-bitmaps/load-bitmap.html
     // Raw height and width of image
     final int height = options.outHeight;
     final int width = options.outWidth;
     int inSampleSize = 1;

     if (height > reqHeight || width > reqWidth) {
       if (width > height) {
          inSampleSize = Math.round((float)height / (float)reqHeight);
       } else {
          inSampleSize = Math.round((float)width / (float)reqWidth);
       }
     }
     return inSampleSize;
 } 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-19T15:58:30.123

我想到了。我换了

```
 xCoord = Integer.valueOf((int)ev.getRawX());
 yCoord = Integer.valueOf((int)ev.getRawY()); 
```

和

```
 Matrix inverse = new Matrix();
 v.getImageMatrix().invert(inverse);
 float[] touchPoint = new float[] {ev.getX(), ev.getY()};
 inverse.mapPoints(touchPoint);
 xCoord = Integer.valueOf((int)touchPoint[0]);
 yCoord = Integer.valueOf((int)touchPoint[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-01T10:07:01.810

7 年后我必须提供另一个答案，因为从 LG G6 升级到 LG G8s 后，接受答案的代码停止返回正确的颜色。

这个解决方案适用于我在家里找到的所有手机，但谁知道......也许即使这个也不是通用的。

（使用Xamarin C#但原理简单易懂）

首先，我们必须获得实际`ImageView`大小`float`才能获得浮点除法

```
private float imageSizeX;
private float imageSizeY;

private void OnCreate(...) {
    ...
    FindViewById<ImageView>(Resource.Id.colpick_Image).LayoutChange += OnImageLayout;
    FindViewById<ImageView>(Resource.Id.colpick_Image).Touch += Image_Touch;
    ...
}

//Event called every time the layout of our ImageView is updated
private void OnImageLayout(object sender, View.LayoutChangeEventArgs e) {
    imageSizeX = Image.Width;
    imageSizeY = Image.Height;
    Image.LayoutChange -= OnImageLayout; //Just need it once then unsubscribe
} 
```

```
//Called every time user touches/is touching the ImageView
private void Image_Touch(object sender, View.TouchEventArgs e) {
    MotionEvent m = e.Event;

    ImageView img = sender as ImageView;

    int x = Convert.ToInt32(m.GetX(0));
    int y = Convert.ToInt32(m.GetY(0));

    Bitmap bmp = (img.Drawable as BitmapDrawable).Bitmap;

    // The scale value (how many times is the image bigger)
    // I only use it with images where Width == Height, so I get
    // scaleX == scaleY
    float scaleX = bmp.Width / imageSizeX;
    float scaleY = bmp.Height / imageSizeY;

    x = (int)(x * scaleX);
    y = (int)(y * scaleY);

    // Check for invalid values/outside of image bounds etc...

    // Get the correct Color ;)
    int color = bmp.GetPixel(x, y);
} 
```

# jsf - 更改默认无线电选择的 JSF 问题

> ID：12496342
> 
> 赞同：1
> 
> 时间：2012-09-19T13:58:03.367
> 
> 标签：jsf, jsf-2

我使用 h:selectOneRadio 并在尝试更改默认收音机选择时遇到问题。下面是JSF代码

```
<h:selectOneRadio id="radioSelectID1" layout="pageDirection" value="#{scheduleBean.selectedRecurrenceValue}"   immediate="true" >
                                        <f:selectItem id="dailyID" itemLabel="#{adminBean.adminScreenLabelVO.dailyLabel}" itemValue="#{scheduleBean.dailyValue}"></f:selectItem>
                                        <f:selectItem id="weeklyID" itemLabel="#{adminBean.adminScreenLabelVO.weeklyLabel}" itemValue="#{scheduleBean.weeklyValue}"></f:selectItem>
                                        <f:selectItem id="monthlyID" itemLabel="#{adminBean.adminScreenLabelVO.monthlyLabel}" itemValue="#{scheduleBean.monthlyValue}"></f:selectItem>
                                        <f:ajax event="change" listener="#{scheduleBean.recurrenceChange}" render="recurrencePanelID" />
                                    </h:selectOneRadio> 
```

下面是 selectedRecurrenceValue 的 backingbean 代码

```
public String getSelectedRecurrenceValue() {

    if(selectedRecurrenceValue == null)
    {
        selectedRecurrenceValue = adminScheduledetailsVO.getFrequency();
        if(selectedRecurrenceValue.equalsIgnoreCase(dailyValue))
        {
            dailyPanelRenderer = true ;
        }
        if(selectedRecurrenceValue.equalsIgnoreCase(weeklyValue))
        {
            dailyPanelRenderer = false ;
            weeklyPanelRenderer = true ;
        }

        if(selectedRecurrenceValue.equalsIgnoreCase(monthlyValue))
        {
            monthlyPanelRenderer = true ;
        }
    }

    return selectedRecurrenceValue;
} 
```

当我尝试更改 radioselection 选项时会出现此问题。我无法初始化值 selectedRecurrenceValue，因为我动态获取它。当我尝试选择另一个单选按钮时，我收到 selectedRecurrenceValue 的空指针异常。任何解决该问题的指示都会非常有帮助。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:32:55.473

如果我正确阅读了您的问题，您似乎不需要该字段`selectedRecurrenceValue`，应该直接绑定`adminScheduledetailsVO.frequency`到您的 selectOneRadio：

```
<h:selectOneRadio id="radioSelectID1" 
                  layout="pageDirection" 
                  value="#{scheduleBean.adminScheduledetailsVO.frequency}" > 
```

那么当然`adminScheduledetailsVO`需要在初始化之前避免NPE。

# c - 从函数返回指针

> ID：12496346
> 
> 赞同：1
> 
> 时间：2012-09-19T13:58:15.420
> 
> 标签：c, memory-management, malloc

这是参考这个问题：[为什么需要指向指针的指针来在函数中分配内存](https://stackoverflow.com/questions/2625869/why-pointer-to-pointer-is-needed-to-allocate-memory-in-function)

问题的答案解释了为什么这不起作用：

```
 void three(int * p) 
    {
        p = (int *) malloc(sizeof(int));
        *p=3;
    }

    void main()
    {
        int *p = 0;
        three(p);
        printf("%d",*p);
    } 
```

...但这有效：

```
 void three(int ** p) 
    {
        *p = (int *) malloc(sizeof(int));
        **p=3;
    }

    void main()
    {
        int *p = 0;
        three(&p);
        printf("%d",*p);
    } 
```

我的问题是，这也可以通过从函数返回一个指针来工作。这是为什么？

```
 int* three(int * p) 
    {
        p = (int *) malloc(sizeof(int));
        *p=3;
        return p;
    }

    void main()
    {
        int *p = 0;
        p=three(p);
        printf("%d",*p);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:00:39.557

```
int* three(int * p) 
    {
        p = (int *) malloc(sizeof(int));
        *p=3;
        return p;
    } 
```

因为在这里您返回了指针的*副本*，`p`并且该指针现在指向有效内存，其中包含值 3。

您最初传入了您的*副本*`p`作为参数，因此您不会更改传入的副本，而是更改副本。然后你返回那个副本，并分配它。

从评论来看，这是一个非常有效的观点，这也将同样有效：

```
 int* three() 
        {
           //no need to pass anything in. Just return it.
            int * p = (int *) malloc(sizeof(int));
            *p=3;
            return p;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:01:02.583

它们是完全不同的（如果你真正理解第一个工作的原因，你会发现没有任何联系）。

通过返回，您不会尝试从函数内部修改已经存在的指针。您只是返回一个新指针，并将其值分配给外部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:15:26.620

将其视为范围问题。

在`main()`你有一个指针`p`。

```
int *p = 0; 
```

`p`在 main 中设置为 NULL。当您调用传递它 p 的三个函数时：

```
three(p); 
```

您正在传递一个指向 NULL 的指针。它发生的事情不在`main()`. `main()`不知道，也不关心发生了什么。`main()`只关心它的副本`p`，此时仍设置为 NULL。除非我`p`在范围内重新赋值`main()`（包括交出地址`p`），否则`p`仍然只是一个指向 NULL 的指针。

如果我给你这个代码：

```
void main()     
{
     int *p = 0;
     funcX(p);
     printf("%d",*p);     
} 
```

您可以明确地告诉我会发生什么（分段错误），而无需知道会发生什么`funcX()`，因为我们将指针的副本传递给该函数，但副本不会影响原始文件。

但是如果我给你这个代码：

```
void main()     
{
     int *p = 0;
     funcX(&p);
     printf("%d",*p);     
} 
```

除非你知道发生了什么，否则你无法告诉我会发生什么`funcX()`。

有道理？

# javascript - 从 iframe 中获取网站的域名

> ID：12496347
> 
> 赞同：1
> 
> 时间：2012-09-19T13:58:20.247
> 
> 标签：javascript, iframe, cross-domain

我正在使用 `var url = (window.location != window.parent.location) ? document.referrer:document.location;`从我的 iframe 中访问网站的域名。令人惊讶的是，这确实有效！但这适用于所有情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:05:50.277

parent.location 适用于所有浏览器：[http ://www.w3schools.com/jsref/prop_win_parent.asp](http://www.w3schools.com/jsref/prop_win_parent.asp)

# javascript - 如何将此字符串解析为数组？

> ID：12496348
> 
> 赞同：5
> 
> 时间：2012-09-19T13:58:28.157
> 
> 标签：javascript, json, parsing

我有一个从签名板生成的以下数组的字符串表示形式：

```
var myData = "[{lx:47,ly:28,mx:47,my:27},{lx:47,ly:32,mx:47,my:28},{lx:47,ly:40,mx:47,my:32},{lx:48,ly:50,mx:47,my:40},{lx:49,ly:59,mx:48,my:50},{lx:49,ly:66,mx:49,my:59},{lx:51,ly:72,mx:49,my:66},{lx:54,ly:76,mx:51,my:72},{lx:56,ly:76,mx:54,my:76},{lx:58,ly:76,mx:56,my:76},{lx:59,ly:76,mx:58,my:76},{lx:61,ly:76,mx:59,my:76},{lx:62,ly:76,mx:61,my:76},{lx:64,ly:76,mx:62,my:76},{lx:66,ly:73,mx:64,my:76},{lx:70,ly:69,mx:66,my:73},{lx:73,ly:64,mx:70,my:69},{lx:75,ly:61,mx:73,my:64},{lx:79,ly:56,mx:75,my:61},{lx:82,ly:51,mx:79,my:56},{lx:84,ly:46,mx:82,my:51},{lx:85,ly:43,mx:84,my:46},{lx:87,ly:40,mx:85,my:43},{lx:88,ly:35,mx:87,my:40},{lx:90,ly:34,mx:88,my:35},{lx:92,ly:33,mx:90,my:34},{lx:93,ly:32,mx:92,my:33},{lx:94,ly:32,mx:93,my:32},{lx:96,ly:33,mx:94,my:32},{lx:96,ly:35,mx:96,my:33},{lx:99,ly:37,mx:96,my:35},{lx:101,ly:42,mx:99,my:37},{lx:101,ly:46,mx:101,my:42},{lx:101,ly:50,mx:101,my:46},{lx:101,ly:54,mx:101,my:50},{lx:102,ly:57,mx:101,my:54},{lx:104,ly:58,mx:102,my:57},{lx:105,ly:59,mx:104,my:58},{lx:107,ly:60,mx:105,my:59},{lx:108,ly:60,mx:107,my:60},{lx:109,ly:60,mx:108,my:60},{lx:110,ly:60,mx:109,my:60},{lx:112,ly:58,mx:110,my:60},{lx:114,ly:57,mx:112,my:58},{lx:116,ly:54,mx:114,my:57},{lx:119,ly:53,mx:116,my:54},{lx:120,ly:50,mx:119,my:53},{lx:123,ly:49,mx:120,my:50},{lx:127,ly:48,mx:123,my:49},{lx:130,ly:48,mx:127,my:48},{lx:132,ly:48,mx:130,my:48},{lx:134,ly:49,mx:132,my:48},{lx:136,ly:50,mx:134,my:49},{lx:137,ly:52,mx:136,my:50},{lx:139,ly:56,mx:137,my:52},{lx:140,ly:59,mx:139,my:56},{lx:140,ly:60,mx:140,my:59},{lx:143,ly:61,mx:140,my:60},{lx:144,ly:61,mx:143,my:61},{lx:146,ly:61,mx:144,my:61},{lx:151,ly:61,mx:146,my:61},{lx:156,ly:61,mx:151,my:61},{lx:161,ly:61,mx:156,my:61},{lx:167,ly:60,mx:161,my:61},{lx:173,ly:60,mx:167,my:60},{lx:178,ly:60,mx:173,my:60},{lx:185,ly:60,mx:178,my:60},{lx:192,ly:60,mx:185,my:60},{lx:198,ly:60,mx:192,my:60},{lx:207,ly:60,mx:198,my:60},{lx:214,ly:60,mx:207,my:60},{lx:221,ly:60,mx:214,my:60},{lx:226,ly:60,mx:221,my:60},{lx:229,ly:60,mx:226,my:60},{lx:233,ly:60,mx:229,my:60},{lx:234,ly:60,mx:233,my:60},{lx:235,ly:60,mx:234,my:60},{lx:237,ly:60,mx:235,my:60},{lx:238,ly:60,mx:237,my:60},{lx:239,ly:60,mx:238,my:60},{lx:241,ly:60,mx:239,my:60},{lx:244,ly:60,mx:241,my:60},{lx:245,ly:60,mx:244,my:60},{lx:246,ly:60,mx:245,my:60},{lx:248,ly:59,mx:246,my:60},{lx:248,ly:58,mx:248,my:59},{lx:248,ly:57,mx:248,my:58}]"; 
```

我试图将其转换为数组：

```
JSON.parse(myData); 
```

但我收到以下错误消息：

```
SyntaxError: Unexpected token l 
```

我究竟做错了什么？我看不到错误:(我尝试在控制台中粘贴不带引号的完全相同的数据，它创建了一个数组：

```
var myData = [{lx:47,ly:28,mx:47,my:27},{lx:47,ly:32,mx:47,my:28},{lx:47,ly:40,mx:47,my:32},{lx:48,ly:50,mx:47,my:40},{lx:49,ly:59,mx:48,my:50},{lx:49,ly:66,mx:49,my:59},{lx:51,ly:72,mx:49,my:66},{lx:54,ly:76,mx:51,my:72},{lx:56,ly:76,mx:54,my:76},{lx:58,ly:76,mx:56,my:76},{lx:59,ly:76,mx:58,my:76},{lx:61,ly:76,mx:59,my:76},{lx:62,ly:76,mx:61,my:76},{lx:64,ly:76,mx:62,my:76},{lx:66,ly:73,mx:64,my:76},{lx:70,ly:69,mx:66,my:73},{lx:73,ly:64,mx:70,my:69},{lx:75,ly:61,mx:73,my:64},{lx:79,ly:56,mx:75,my:61},{lx:82,ly:51,mx:79,my:56},{lx:84,ly:46,mx:82,my:51},{lx:85,ly:43,mx:84,my:46},{lx:87,ly:40,mx:85,my:43},{lx:88,ly:35,mx:87,my:40},{lx:90,ly:34,mx:88,my:35},{lx:92,ly:33,mx:90,my:34},{lx:93,ly:32,mx:92,my:33},{lx:94,ly:32,mx:93,my:32},{lx:96,ly:33,mx:94,my:32},{lx:96,ly:35,mx:96,my:33},{lx:99,ly:37,mx:96,my:35},{lx:101,ly:42,mx:99,my:37},{lx:101,ly:46,mx:101,my:42},{lx:101,ly:50,mx:101,my:46},{lx:101,ly:54,mx:101,my:50},{lx:102,ly:57,mx:101,my:54},{lx:104,ly:58,mx:102,my:57},{lx:105,ly:59,mx:104,my:58},{lx:107,ly:60,mx:105,my:59},{lx:108,ly:60,mx:107,my:60},{lx:109,ly:60,mx:108,my:60},{lx:110,ly:60,mx:109,my:60},{lx:112,ly:58,mx:110,my:60},{lx:114,ly:57,mx:112,my:58},{lx:116,ly:54,mx:114,my:57},{lx:119,ly:53,mx:116,my:54},{lx:120,ly:50,mx:119,my:53},{lx:123,ly:49,mx:120,my:50},{lx:127,ly:48,mx:123,my:49},{lx:130,ly:48,mx:127,my:48},{lx:132,ly:48,mx:130,my:48},{lx:134,ly:49,mx:132,my:48},{lx:136,ly:50,mx:134,my:49},{lx:137,ly:52,mx:136,my:50},{lx:139,ly:56,mx:137,my:52},{lx:140,ly:59,mx:139,my:56},{lx:140,ly:60,mx:140,my:59},{lx:143,ly:61,mx:140,my:60},{lx:144,ly:61,mx:143,my:61},{lx:146,ly:61,mx:144,my:61},{lx:151,ly:61,mx:146,my:61},{lx:156,ly:61,mx:151,my:61},{lx:161,ly:61,mx:156,my:61},{lx:167,ly:60,mx:161,my:61},{lx:173,ly:60,mx:167,my:60},{lx:178,ly:60,mx:173,my:60},{lx:185,ly:60,mx:178,my:60},{lx:192,ly:60,mx:185,my:60},{lx:198,ly:60,mx:192,my:60},{lx:207,ly:60,mx:198,my:60},{lx:214,ly:60,mx:207,my:60},{lx:221,ly:60,mx:214,my:60},{lx:226,ly:60,mx:221,my:60},{lx:229,ly:60,mx:226,my:60},{lx:233,ly:60,mx:229,my:60},{lx:234,ly:60,mx:233,my:60},{lx:235,ly:60,mx:234,my:60},{lx:237,ly:60,mx:235,my:60},{lx:238,ly:60,mx:237,my:60},{lx:239,ly:60,mx:238,my:60},{lx:241,ly:60,mx:239,my:60},{lx:244,ly:60,mx:241,my:60},{lx:245,ly:60,mx:244,my:60},{lx:246,ly:60,mx:245,my:60},{lx:248,ly:59,mx:246,my:60},{lx:248,ly:58,mx:248,my:59},{lx:248,ly:57,mx:248,my:58}]; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T14:00:31.267

这里需要字符串。因此使用“lx”而不是 lx

```
var myData = '[{"lx":47,"ly":28 // and so on 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T14:01:53.653

您的 json 无效。对象属性名称应该是一个字符串，因此您需要使用引号

```
var myData = '[{"lx":47,"ly":28 ....} 
```

有关此主题的更多信息，请访问[json.org](http://www.json.org/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T14:02:10.180

JSON 规范比 JavaScript 本身更严格。具体来说，JSON 要求所有对象键都用*双引号括起来*。在[JSON 规范](http://www.json.org/)中，对象键必须是*字符串*标记，并且*字符串*标记以双引号字符开头和结尾。

因此，您需要引用您的对象键：

```
var myData = '[{"lx":47,"ly":28,"mx":47,"my":27},...' 
```

**编辑**：根据[Signature Pad API](http://thomasjbradley.ca/lab/signature-pad/#api-ref)，您可以使用`getSignatureString()`将您的 pad 序列化为有效的 JSON 字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T14:06:44.347

事实上，您的字符串包含一个有效的 javascript 对象（注意：不是 JSON 对象）让您可以利用邪恶的 eval 函数。只需评估您的字符串并将其值存储在如下变量中：

```
var myData = eval("[{lx:47,ly:28,mx:47,my:27}]"); 
```

我为您制作了一个小提琴，以查看它与您[在此处提供的字符串一起使用](http://jsfiddle.net/EnACu/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T14:02:43.043

该变量`myData`的 JSON 格式不正确，为了能够使用 JSON 解析，您需要添加双引号，如下所示：

```
var myData = '[{"lx":47,"ly":28,"mx":47,"my":27},...]'; 
```

# c# - 如何从用户的视觉交互中生成 SQL？

> ID：12496349
> 
> 赞同：5
> 
> 时间：2012-09-19T13:58:29.447
> 
> 标签：c#, .net, sql, sql-server, database

我正在计划一个 C# SQL 查询生成器应用程序。基本上，用户应该能够使用可视的、基于表单的、用户友好的向导来生成 SQL 代码。用户所要做的就是选择他/她想要的字段，并施加一些条件。

我研究了一些完成类似事情的应用程序，但是它们似乎都没有准确地解释SQL 代码是如何生成的**。**

可以采取哪些方法将用户与应用程序的交互转换为 SQL 代码？

**编辑：**只是添加更多细节。该应用程序可以与任何 SQL Server 数据库一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:04:54.307

这取决于您的用户可以做什么*。*由于问题*很*笼统，我能给出的答案是：

尝试将您的流程图映射到`LINQ-SQL`代码，真正的 SQL 转换留给`LINQ`驱动程序。这样你得到

*   可扩展性：可以映射到不同的 SQL 数据库、XML、...X
*   可靠性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:42:09.243

当代视觉查询构建器的起源是[逐个查询](http://en.wikipedia.org/wiki/Query_by_Example)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:15:47.053

如果您需要自定义解决方案，Expreesion Trees 可以为您提供帮助。[http://msdn.microsoft.com/en-us/library/bb397951.aspx](http://msdn.microsoft.com/en-us/library/bb397951.aspx)

我认为您可以使用任何 ORM 来做到这一点，您需要使用自定义引擎将您的对象从 UI 转换为查询（linq、字符串或其他）。

# wordpress - Wordpress 分层下拉菜单

> ID：12496353
> 
> 赞同：-1
> 
> 时间：2012-09-19T13:58:36.340
> 
> 标签：wordpress

我们希望表单上的分层下拉菜单显示称为区域的分类的术语名称。用户首先选择一个类别并进入表单页面 - 我们得到下拉菜单以显示术语名称，但它来自所有帖子 - 我们只想要来自所选类别内的区域的术语名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:13:38.743

我不确定这是否会有所帮助，但我通常会尽可能地压缩我的表格。我喜欢这个 jQuery 插件，我已经用过几次了：

[选择](http://harvesthq.github.com/chosen/)

来自网站的描述：

> Chosen 是一个 JavaScript 插件，它使长而笨重的选择框更加用户友好。它目前有 jQuery 和 Prototype 两种风格。

您可以将它与标签一起使用来创建您的父类别/术语名称列表，并允许人们快速获取他们想要的术语名称。

希望这可以帮助！

# ooyala - Ooyala 播放器版本 2 或 3 未在 IE 10 Metro 模式下运行

> ID：12496358
> 
> 赞同：0
> 
> 时间：2012-09-19T13:58:44.567
> 
> 标签：ooyala

Ooyala 播放器版本 2 或 3 未在 IE 10 Metro 模式下运行仅在 IE 10 的 Metro 模式下，以下代码未运行。请帮忙。下面是使用的代码。

```
<!DOCTYPE html>
<html>
<head>
    <title>Untitled Page</title>
</head>
<script  type="text/javascript" src="http://player.ooyala.com/player.js?width=750&height=312&embedCode=4yb2NyNToSgl-L6mEJvDW4NaqxRYQvnN">
</script>
<head>

<!-- Load Ooyala Player -->
       <script src='http://player.ooyala.com/v3/4yb2NyNToSgl-L6mEJvDW4NaqxRYQvnN'></script>

</head>
<body>
<!-- Player Placement -->
<div id='playerwrapper' style='width:750px;height:312px;'></div>
<script>
    var videoPlayer = OO.Player.create('playerwrapper', '4yb2NyNToSgl-L6mEJvDW4NaqxRYQvnN');
    videoPlayer.play();
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:51:33.577

由于几个原因，您在 IE10 Metro 中看不到播放 - 您没有正确嵌入播放器 v3，因此 v2 播放器是唯一正在加载的播放器。V2 不支持 IE10 中的 Metro，除非您的网站被列入 Flash 白名单。

我已经为您修复了您的测试页面，请插入您的客户经理提供的嵌入代码和您的播放器品牌 ID。

```
<!DOCTYPE html>
<html>
<head>
  <title>Untitled Page</title>
  <script type="text/javascript" src='http://player.ooyala.com/v3/{PLAYER BRANDING ID}'></script>
</head>

<body>
<!-- Player Placement -->
<div id='playerwrapper' style='width:750px;height:312px;'></div>
<script>
OO.ready(function() {
  var videoPlayer = OO.Player.create('playerwrapper', '{EMBED CODE}');
  videoPlayer.play();
});
</script>
</body>
</html> 
```

# visual-studio-2010 - 如何在替换字符串中使用通配符？

> ID：12496359
> 
> 赞同：11
> 
> 时间：2012-09-19T13:58:46.710
> 
> 标签：visual-studio-2010

我需要改变所有：

```
<label for="*"> 
```

进入

```
<label for="*" class="inline checkbox"> 
```

但事实证明，我的一切`<label for="XXXXXX">`都变成了`<label for="*" class="inline checkbox">`. 是的，`*`从字面上看，它是一个字符串，而不是通配符。

为什么通配符只在 Find 而不是 Replace 中有效？我应该在替换字符串中输入什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-04-09T20:47:11.093

其他地方也提供了接受的答案，但对我不起作用。

我必须在 Find 中使用 (.*) 并在 Replace 中使用 $1。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-19T15:39:16.217

我不确定是否有办法使用通配符来做到这一点，但你可以使用正则表达式来完成它：

1.  在`Find and Replace`下面的对话框中`Find Options`，选中 `Use:`并从下拉列表中选择`Regular expressions`。
2.  在 的文本框中`Find What`，键入：`\<label for="{.*}"\>`
3.  在 的文本框中`Replace with`，键入：`<label for="\1" class="inline checkbox">`

笔记：

*   我逃脱了，`<`因为它们是特殊字符。`>``\`
*   `.*`将匹配任何字符串。
*   在替换文本中，`\1`将替换为`{}`在查找表达式中找到的字符串。

此外，如果您单击查找和替换文本框旁边的箭头，您将找到有关特殊字符的更多信息。

# c++ - GDB for C++ 模板（主要是 boost）中更干净、更漂亮的堆栈跟踪 - 繁重的代码

> ID：12496362
> 
> 赞同：6
> 
> 时间：2012-09-19T13:59:00.350
> 
> 标签：c++, boost, gdb

我在一个广泛使用 boost 和模板的金融应用程序 (Linux/C++/gcc) 上工作。通过 GDB 调试时生成的堆栈跟踪非常复杂，因为 boost 的内部模板接线给输出添加了很多丑陋的噪音。有谁知道为 C++ 模板重（尤其是 boost-heavy）代码获得更清洁、更漂亮和更有洞察力的堆栈跟踪的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:12:27.513

较新版本的 GDB 中的 Python 支持已用于为 STL 等模板繁重的结构提供漂亮的打印机。

*   [http://sourceware.org/gdb/wiki/PythonGdbTutorial](http://sourceware.org/gdb/wiki/PythonGdbTutorial)
*   [http://sourceware.org/gdb/wiki/STLSupport](http://sourceware.org/gdb/wiki/STLSupport)

我自己没有尝试过任何这些。不幸的是，添加对 Boost 的支持和清理堆栈跟踪（而不是漂亮的打印值）可能涉及滚动一些您自己的 Python 代码。

# c++ - C++ 顺序设置和获取；获取返回 0x0

> ID：12496366
> 
> 赞同：0
> 
> 时间：2012-09-19T13:59:26.660
> 
> 标签：c++, debugging

MacOS X Lion，Xcode 4 我的应用程序是一个命令行工具。我的应用程序中有以下代码

```
int main(int argc, const char * argv[])
{
    MSystemContext * m_system = new MCommandLineContext();
    MPackageManagerNPK *packageManager = new MPackageManagerNPK();

    MEngine * engine = MEngine::getInstance();
    engine->setSystemContext(m_system); // system context
        // Strange behavior here:
    engine->setPackageManager(packageManager);
    MPackageManager *ppPackageManager = engine -> getPackageManager(); 
    engine->setPackageManager(packageManager);   //  
    engine->setPackageManager(packageManager);   //
    return 0;
} 
```

我检查了 m_system 和 packageManager 创建的调试器，它们不是 NULL。我检查引擎不是空的。

```
 engine->setSystemContext(m_system); 
```

工作正常。我在调试器窗口中看到引擎的相应实例变量设置为 m_system。我进入引擎->setPackageManager(packageManager); 并看到它按预期工作。看起来像

```
void MEngine::setPackageManager(MPackageManager * packageManager)
{
   m_packageManager = packageManager;
} 
```

当我在 setPackageManager 方法中时，我看到 m_packageManager 变量设置为 packageManager 的值。但是当调试器从`setPackageManager`方法 to返回时`main()`，引擎对象的 m_packageManager 的值变成了 0x0。当我踏入 时`getPackageManager()`，我看到 m_packageManager 是`0x0`. 但是当我踏入之后`setPackageManager`，我看到它`m_packageManager`被设置为`packageManager`。在这两种情况下，引擎对象都是相同的。这对我来说似乎很奇怪。应用程序使用一个线程。应用程序使用 dylib，其中包含`MEngine`类。什么会导致这种行为？我该如何调试呢？

**编辑：** MEngine 类（部分）：

```
// .h    
class M_ENGINE_EXPORT MEngine
{
private:
...
MPackageManager * m_packageManager;
public:
MEngine(void);
...
inline MPackageManager * getPackageManager(void){ return m_packageManager; }

// .cpp

MEngine::MEngine(void):
m_packageManager(NULL)
{

}

MEngine * MEngine::getInstance(void)
{
    static MEngine m_instance;
    return &m_instance;
} 
```

系统上下文变量及其访问器定义与 packageManager 变量/访问器相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:36:22.820

我将构建配置从调试切换到发布，并且项目运行时没有出现此类错误。我认为调试设置有问题。

# r - 如何从 R 中的 lm 命令中提取表格摘要数据

> ID：12496368
> 
> 赞同：0
> 
> 时间：2012-09-19T13:59:32.583
> 
> 标签：r, format, extract, lm

我的数据结构如下：

```
group_id, months_from_start, perc_total_downloads, experience_ratio
1             1                    1.2                4
1             2                    1.7                6
…
235           1                    6.7                3
235           2                   18                  8
… 
```

大约有 300 个组，每个组有 70 个左右的连续数据元素。

我发布了以下脚本来估计每个组的二阶多项式。

```
s.1<-lm(xts(s[s$group_id == 1,][,-2], order.by=as.Date(s[s$group_id == 1,][,2]))$perc_total_downloads ~ poly(xts(s[s$group_id == 1,][,-2], order.by=as.Date(s[s$group_id == 1,][,2]))$months_from_start, 2, raw=TRUE))
s.235<-lm(xts(s[s$group_id == 235,][,-2], order.by=as.Date(s[s$group_id == 235,][,2]))$perc_total_downloads ~ poly(xts(s[s$group_id == 235,][,-2], order.by=as.Date(s[s$group_id == 235,][,2]))$months_from_start, 2, raw=TRUE))
s.599<-lm(xts(s[s$group_id == 599,][,-2], order.by=as.Date(s[s$group_id == 599,][,2]))$perc_total_downloads ~ poly(xts(s[s$group_id == 599,][,-2], order.by=as.Date(s[s$group_id == 599,][,2]))$months_from_start, 2, raw=TRUE))
s.1111<-lm(xts(s[s$group_id == 1111,][,-2], order.by=as.Date(s[s$group_id == 1111,][,2]))$perc_total_downloads ~ poly(xts(s[s$group_id == 1111,][,-2], order.by=as.Date(s[s$group_id == 1111,][,2]))$months_from_start, 2, raw=TRUE))
s.1537<-lm(xts(s[s$group_id == 1537,][,-2], order.by=as.Date(s[s$group_id == 1537,][,2]))$perc_total_downloads ~ poly(xts(s[s$group_id == 1537,][,-2], order.by=as.Date(s[s$group_id == 1537,][,2]))$months_from_start, 2, raw=TRUE)) 
```

对于这些新变量中的每一个，我都可以发布一个摘要声明来揭示有趣的信息：

```
> summary(s.44375)

Call:
lm(formula = xts(s[s$group_id == 44375, ][, -2], order.by = as.Date(s[s$group_id == 
44375, ][, 2]))$perc_total_downloads ~ poly(xts(s[s$group_id == 
44375, ][, -2], order.by = as.Date(s[s$group_id == 44375, 
][, 2]))$months_from_start, 2, raw = TRUE))

Residuals:
       Min         1Q     Median         3Q        Max 
-0.0064004 -0.0017315 -0.0002022  0.0012087  0.0078436 

Coefficients: (3 not defined because of singularities)
                                                                                                                                   Estimate Std. Error t value Pr(>|t|)    
(Intercept)                                                                                                                       1.993e-03  1.137e-03   1.753    0.084 .  
poly(xts(s[s$group_id == 44375, ][, -2], order.by = as.Date(s[s$group_id == 44375, ][, 2]))$months_from_start, 2, raw = TRUE)1.0  7.769e-04  6.707e-05  11.583   <2e-16 ***
poly(xts(s[s$group_id == 44375, ][, -2], order.by = as.Date(s[s$group_id == 44375, ][, 2]))$months_from_start, 2, raw = TRUE)2.0 -9.258e-06  8.404e-07 -11.017   <2e-16 ***
poly(xts(s[s$group_id == 44375, ][, -2], order.by = as.Date(s[s$group_id == 44375, ][, 2]))$months_from_start, 2, raw = TRUE)0.1         NA         NA      NA       NA    
poly(xts(s[s$group_id == 44375, ][, -2], order.by = as.Date(s[s$group_id == 44375, ][, 2]))$months_from_start, 2, raw = TRUE)1.1         NA         NA      NA       NA    
poly(xts(s[s$group_id == 44375, ][, -2], order.by = as.Date(s[s$group_id == 44375, ][, 2]))$months_from_start, 2, raw = TRUE)0.2         NA         NA      NA       NA    
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 0.002866 on 69 degrees of freedom
Multiple R-squared: 0.6619,Adjusted R-squared: 0.6521 
F-statistic: 67.53 on 2 and 69 DF,  p-value: < 2.2e-16 
```

出于我的目的，我需要将此信息转录成表格，从这种格式剪切和粘贴非常繁琐且耗时：

```
group_id   intercept est  intercept stnd err    intercept t value   …
44375         1.993e-03         1/137e-03           1.753          ...
… 
```

使用传统记数法而不是科学记数法对我来说也很方便，但我想我可以没有它。

我有什么办法可以做到这一点而无需手动剪切和粘贴？

谢谢--sw

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:14:15.013

summary 函数只返回一个 R 列表。例如，

```
R> x = runif(10);y=runif(10)
R> m = lm(y ~ x) 
```

您感兴趣的部分是第四个元素：

```
R> summary(m)[[4]]
            Estimate Std. Error t value Pr(>|t|)
(Intercept)  0.44041     0.1768  2.4911  0.03746
x           -0.05899     0.3143 -0.1877  0.85579 
```

这只是一个矩阵。

* * *

以上回答了你的问题，但你的代码让我想哭！特别是，阅读`for`循环和`plyr`包。例如，我怀疑最后两行几乎可以满足您的所有需求：

```
##Load the package and create some data
library(plyr)
dd = data.frame(group_id = sample(1:3, 10, TRUE), x = runif(10), y=runif(10)) 

##Split up dd by group_id and do some regression
dd1 = ddply(dd, .(group_id), summarise, summary(lm(y ~ x))[[4]])

##Label the column names
colnames(dd1)[2:5] = c("Estimate"   "Std. Error" "t value"    "Pr(>|t|)") 
```

# scala - 如何集成子切依赖模块？

> ID：12496369
> 
> 赞同：2
> 
> 时间：2012-09-19T13:59:36.040
> 
> 标签：scala, dependency-injection, subcut

根据可用的文档，这项任务似乎很简单，但是我已经为此苦苦挣扎了几天，仍然无法使其适用于简单的模块间依赖...

这是一个简化的示例：

```
trait Bla {
  def m: String
}

class BlaImpl(implicit val bindingModule: BindingModule) extends Bla with Injectable {
  val s = inject[String]('bla)
  def m = "got " + s
}

object Program extends App with Injectable {
  implicit val bindingModule =
    new NewBindingModule({ implicit module ⇒ module.bind[Bla] toSingle { new BlaImpl } }) ~
      new NewBindingModule(_.bind[String] idBy 'bla toSingle "bla!")
  val bla = inject[Bla]
  assert(bla.m == "got bla!")
} 
```

尝试构建 BlaImpl 实例时，运行此代码失败并出现以下错误：

```
 org.scala_tools.subcut.inject.BindingException: No binding for key BindingKey(java.lang.String,Some(bla)) 
```

调试显示传递给 BlaImpl 构造函数的绑定模块在其绑定中不包含 'bla String，并且 Program.bindingModule.bindings 具有所有绑定（包括所需的字符串）。

我见过[其他](https://stackoverflow.com/questions/9303262/subcut-bindingmodule-composition)类似的问题，但它只指组合而不是跨越模块边界的依赖项。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T13:20:49.227

不幸的是，它不起作用。即使您将 2 个模块与 subcut 合并在一起，这并不意味着它们会看到彼此之间的依赖关系。

如果要归档所需的结果，则需要`BindingModule`显式传递给 `BlaImpl`构造函数。像这样的东西：

```
val anotherModule = new NewBindingModule(_.bind[String] idBy 'bla toSingle "bla!")

implicit val bindingModule =
  new NewBindingModule({ implicit module => module.bind[Bla] toSingle { new BlaImpl()(anotherModule) } }) 
```

在这种情况下，模块合并将无法解决问题。[我实际上在这个答案](https://stackoverflow.com/questions/16646571/comparing-subcut-and-scaldi/16660055#16660055)中讨论了这个 subcut 的问题。我什至创建了一个示例代码来比较 subcut 和[Scaldi](http://scaldi.github.io/scaldi/Scaldi.html)并演示它们如何解决这个问题（或者不解决它，在 subcut 的情况下）：

[https://gist.github.com/OlegIlyenko/5623423](https://gist.github.com/OlegIlyenko/5623423)

如果我用[Scaldi](http://scaldi.github.io/scaldi/Scaldi.html)重写您的示例，那么它将是这样的：

```
import scaldi.{Injector, Injectable, Module, DynamicModule}

trait Bla {
  def m: String
}

class BlaImpl(implicit inj: Injector) extends Bla with Injectable {
  val s = inject[String]('bla)
  def m = "got " + s
}

object Program extends App with Injectable {
  implicit val appModule =
    new Module { bind [Bla] to new BlaImpl } ::
    DynamicModule(_.binding identifiedBy 'bla to "bla!")

  val bla = inject [Bla]
  assert(bla.m == "got bla!")
} 
```

如您所见，在[Scaldi](http://scaldi.github.io/scaldi/Scaldi.html)`::`中，如果模块由or组成，则可以看到彼此之间的依赖关系`++`。

# c# - 自定义配置文件成员资格提供程序

> ID：12496372
> 
> 赞同：0
> 
> 时间：2012-09-19T13:59:53.360
> 
> 标签：c#, asp.net, asp.net-profiles

我有一个自定义会员提供程序，我正在为我正在开发的网站使用，我有很多错误，他们都谈到了正在使用的方法。这是错误之一：

错误 # 'WebOrder.CustomMembershipProvider' 没有实现继承的抽象成员 'System.Web.Security.MembershipProvider.FindUsersByEmail(string, int, int, out int)' C:\Users\Jschoff\Documents\Visual Studio 2010\Projects\WebOrder \WebOrder\Models\CustomMembershipProvider.cs

我不知道究竟是什么原因造成的，但这里是我正在使用的 customprovider 类的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace WebOrder
{
  public class CustomMembershipProvider : System.Web.Security.MembershipProvider
  {
    public override System.Web.Security.MembershipUser CreateUser(string username, string password, string email, string passwordQuestion, string passwordAnswer, bool isApproved, object providerUserKey, out System.Web.Security.MembershipCreateStatus status)
    {
        throw new NotImplementedException();
    }

    public override System.Web.Security.MembershipUser GetUser(string username, bool userIsOnline)
    {
        throw new NotImplementedException();
    }

    public override bool ValidateUser(string username, string password)
    {
        throw new NotImplementedException();
    }

    public override int MinRequiredPasswordLength
    {
        get { throw new NotImplementedException(); }
    }

    public override bool RequiresUniqueEmail
    {
        get { throw new NotImplementedException(); }
    }

    public override string GetUserNameByEmail(string email)
    {
        throw new NotImplementedException();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:46:53.003

你可以只实现这个方法`FindUsersByEmail`Method

它在 MembershipProvider 中声明为抽象

链接： http: [//msdn.microsoft.com/fr-fr/library/system.web.security.membershipprovider.findusersbyemail (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.web.security.membershipprovider.findusersbyemail(v=vs.80).aspx)

链接有关您的自定义提供程序的所有方法：

[http://msdn.microsoft.com/fr-fr/library/system.web.security.membershipprovider_methods(v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.web.security.membershipprovider_methods(v=vs.80).aspx)

添加此代码

```
public override MembershipUserCollection FindUsersByEmail (
    string emailToMatch,
    int pageIndex,
    int pageSize,
    out int totalRecords
)
{
  .....
} 
```

# android - 将 arraylist 从 mapactivity 传递给覆盖类

> ID：12496373
> 
> 赞同：0
> 
> 时间：2012-09-19T13:59:56.320
> 
> 标签：android, eclipse, google-maps, point, google-polyline

我想将 mapactivity 中的值数组列表传递给覆盖类：

```
 MyOverlay dataOverlay = new MyOverlay(loc); 
```

在覆盖类中创建了一个构造函数：

```
public class MyOverlay {

public MyOverlay(List<Double> loc) {
    // TODO Auto-generated constructor stub
    GeoPoint point = new GeoPoint((int)(location.get(1)*1E6) , (int)(location.get(0)*1E6));
}
public void draw(Canvas canvas, MapView mapView, boolean shadow, GeoPoint mp){

     super.draw(canvas, mapView, shadow, mp);
} 
```

}

从这个 loc 数组列表中，我想从其余的值中绘制一个点和多段线。此地理点无法传递给绘图类。

通过后的下一步是什么，如何在 draw 方法中访问这个 loc？

# ios - iOS：处理远程（推送）通知

> ID：12496377
> 
> 赞同：2
> 
> 时间：2012-09-19T14:00:03.270
> 
> 标签：ios, apple-push-notifications

我正在尝试使用远程通知处理所有可能的情况。当应用程序在前台时我很好 - didReceiveRemoteNotification 被调用。问题是当应用程序处于后台状态时，我收到推送通知。什么都没有被调用。当应用程序回到前台时如何让用户知道他有新的远程通知？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T14:58:23.887

拦截推送通知的唯一方法是当用户点击通知中心的通知时（或从锁定屏幕滑动应用程序图标时）。

在这种情况下，在应用程序进入前台之前，`didFinishLaunchingWithOptions`会调用应用程序委托中的方法。您应该使用`NSDictionary` `launchOptions`来确定应用程序是从通知中心启动还是通过点击图标启动（正常使用）

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSDictionary *pushDic = [launchOptions objectForKey:@"UIApplicationLaunchOptionsRemoteNotificationKey"];
    if (pushDic != nil) {
        NSLog(@"Notification");
    }
    else {

    }
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-19T14:04:54.370

只需查看编程指南：

如果点击操作按钮（在运行 iOS 的设备上），系统会启动应用程序并且应用程序调用其委托的 application:didFinishLaunchingWithOptions: 方法（如果已实现）；它传入通知负载（用于远程通知）或本地通知对象（用于本地通知）。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-19T15:00:42.907

当然，如果您的应用程序在后台，则不会有任何调用...

如果您的应用没有启动（甚至没有在后台暂停），

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

将包含通知负载（键 UIApplicationLaunchOptionsRemoteNotificationKey）：

```
NSDictionary *remoteNotification = [launchOptions objectForKey: UIApplicationLaunchOptionsRemoteNotificationKey]; 
```

# php - 如何将html转换为Json Obj

> ID：12496378
> 
> 赞同：-1
> 
> 时间：2012-09-19T14:00:05.077
> 
> 标签：php, html, json

谁能告诉我如何使用表单将 html 代码转换为 json obj。

例如：

如果这是我的 HTML 代码：

```
<div class="title">#Title 1</div>
<div class="content"><p>Some Content</p></div> 
```

我想把它转换成 Json obj

```
[{"title":"#Title 1","content":"<p>some content<\/p>"}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:02:41.840

尝试使用此工具；

[http://json.fastfrag.org/](http://json.fastfrag.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:05:41.243

嗯，我刚刚搜索了你，有大量的网站可以帮助你。我发现这个特别有用。不过它需要 Jquery，我不确定你是否熟悉它。

[使用 jQuery 将 HTML 表单转换为 JSON 和 POST](http://exceptionallyexceptionalexceptions.blogspot.nl/2011/12/convert-html-form-to-json.html)

# eclipse - 在eclipse中将GWT应用程序部署到tomcat的问题

> ID：12496379
> 
> 赞同：0
> 
> 时间：2012-09-19T14:00:08.790
> 
> 标签：eclipse, gwt, tomcat

按照[本教程](http://www.vogella.com/articles/GWT/article.html)，我可以使用 eclipse 执行 GWT 应用程序。我可以访问该应用程序`http://127.0.0.1:8888/De_vogella_gwt_helloworld.html?gwt.codesvr=127.0.0.1:9997`。

![在此处输入图像描述](../Images/7bca62533d15db5631e30129807fa0ea.png)

![在此处输入图像描述](../Images/09defe99df2a72193541f7d98ed975d5.png)

然后，我用谷歌搜索找到一种将应用程序部署到 tomcat 的方法，我找到[了这个网站](http://blog.elitecoderz.net/gwt-and-tomcat-create-war-using-eclipse-to-deploy-war-on-tomcat/2009/12/)。将 GWT 应用程序导出到 tomcat 有两步方法。

1.  将 src 目录导出到 jar 文件中。
2.  使用ant创建一个war文件。

`hello.war`我将文件复制到`/Library/Tomcat/webapps`中，并打开浏览器`localhost:8080/hello`以获取此错误。

![在此处输入图像描述](../Images/483842c3eb905d123f56f0bd35296add.png)

当我单击 webapps 目录中的 HTML 文件时，我认为包装有问题。

![在此处输入图像描述](../Images/5fc9cbe402ae8ec16db60f8e0198c8d4.png)

可能有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:33:37.167

您需要编译 GWT 应用程序以在生产模式下运行。有关详细步骤（对于 GWT 2.4），请参阅GWT 文档的[此部分。](https://developers.google.com/web-toolkit/doc/2.4/DevGuideCompilingAndDebugging#DevGuideProdMode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:18:01.560

From David's answer, I could get it working.

I had to compile the application again.

![enter image description here](../Images/9040aca983f6f5c592e370961fdd5f3c.png)

to get it working.

![enter image description here](../Images/5e204fbc935eaf2151cfb15de5dba3a3.png)

# jquery - 选择收音机时隐藏文本框

> ID：12496395
> 
> 赞同：1
> 
> 时间：2012-09-19T14:00:55.137
> 
> 标签：jquery, text, hide

我的网站上有一个数据输入表单，其中包含多个复选框、两个单选按钮和一个文本字段。如果选择了我的单选按钮之一，我想让文本字段不可编辑。如果客户尝试输入，则会显示错误消息。我是 Jquery 和网络编码的新手，所以找不到相关答案。

单选按钮和文本区域如下

```
 <form method="post" class="required-form" action="php/addcompanyengine.php">
  <ul class="forms">

    <p class="Region">Please select the type of listing you desire</p>
    <ol>
        <li><label class="checkbox">Bronze Listing</label>
        <input type="radio" name="listing[]" id="listing" value="Bronze" checked></li>
        </ol>
        <ol>
        <li><label class="checkbox">Silver Listing</label>
        <input type="radio" name="listing[]" id="listing" value="Silver"></li>
    </ol>

      <label for="Description">Description:<br /><br />
            (Silver listings only <br /> <br />
            Maximum 400 characters)</label>
            <textarea name="Description" cols="20" id="Description" maxlength="400" ></textarea> 
```

基本上，如果客户将单选按钮留在青铜（默认）上，我希望文本字段不可用，如果他们选择银色，我希望他们可以输入。

非常感谢，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:09:04.220

假设您已经加载了 jQuery（**注意 class 属性而不是 ID**）：

```
<ol>
    <li><label class="checkbox">Bronze Listing</label>
    <input type="radio" name="listing[]" class="listing" value="Bronze" checked></li>
    </ol>
    <ol>
    <li><label class="checkbox">Silver Listing</label>
    <input type="radio" name="listing[]" class="listing" value="Silver"></li>
</ol>

<script type="text/javascript">
    $(document).ready(function() {
        $('.listing').change({
            if ($(this).val() == 'Bronze') {
                $('#Description').attr('readonly','readonly');
            } else {
                $('#Description').removeAttr('readonly');
            }
        });
    });
</script> 
```

你可以在这里看到它的实际效果：http: [//jsfiddle.net/AZ7wJ/](http://jsfiddle.net/AZ7wJ/)

如果您希望 textarea 原本也是不可编辑的，您可以将`readonly="readonly"`属性添加到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:17:55.713

在开始之前：

*   更改无线电`input`ID，使其不同。
*   将`readonly`属性添加到您的`textarea`.

假设您使用`listingBronze`的是青铜收音机`input id`。

```
//we listen to the change event
$("#listingBronze").change(function(event){
    //we tell readonly is equal to bronze checked status
    $('#Description').prop('readonly',(!!$(this).prop("checked")));
}); 
```

这个简单。由于`readonly = checked`代码变得非常小。

注意：使用 !! 确保该值将是布尔值，因为它不是非值。

（可选）您可以`hide`和`show`textarea，在过程中丢弃该`readonly`属性：

```
$("#listingBronze").change(function(event){
    $('#Description').show();
    if(!!$(this).prop("checked")) $('#Description').hide();
}); 
```

我们在每次更改时显示 textarea，然后检查`checked`属性并隐藏如果为真。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T10:08:35.570

我怀疑接受的答案应该是

```
<script type="text/javascript">
    $(document).ready(function() {
        $('.listing').change(function() {
            if ($(this).val() == 'Bronze') {
                $('#Description').attr('readonly','readonly');
            } else {
                $('#Description').removeAttr('readonly');
            }
        });
    });
</script> 
```

注意修改后的function()

# java - 采用 Object 参数的泛型类 - Java

> ID：12496396
> 
> 赞同：3
> 
> 时间：2012-09-19T14:00:57.230
> 
> 标签：java, generics

> **可能重复：**
> [Map.get(Object key) 不是（完全）通用的原因是什么](https://stackoverflow.com/questions/857420/what-are-the-reasons-why-map-getobject-key-is-not-fully-generic)

我有一个关于通用 java 集合的问题，特别是 Map。我注意到需要参数（通常是键）的 get、contains 和类似方法将 Object 作为参数，而我希望它们采用 K 类的东西，例如，而不是`get(Object key)`我所期望`get(K key)`的。谁能解释这个原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:06:19.857

[正如这里](https://stackoverflow.com/questions/857420/what-are-the-reasons-why-map-getobject-key-is-not-fully-generic)所说，这是因为您传递给 get 的对象不必等于您尝试检索的密钥的类型。

唯一的条件是他们的`equals`方法返回`true`。

**编辑**：正如彼得劳里指出的那样，`hashcode`应该是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:06:19.420

主要问题是向后兼容性。

即使您“知道”它不起作用，也总是可以尝试执行以下操作

```
Map map = new HashMap();
map.put("hello", "world");

Object o = map.get(1); // null
boolean b = map.contain(2); // false
boolean b2 = map.remove(3); // false 
```

因此，这些方法仍然需要能够采用任何类型，即使泛型暗示它将始终返回`null`or `false`。

* * *

也可以构造一个 TreeMap ，其中键不需要是相同的类型，等于 true，具有相同的 hashCode 甚至 compareTo() == 0

```
Map map = new TreeMap(new Comparator() {
    @Override
    public int compare(Object o1, Object o2) {
        return String.valueOf(o1).compareTo(o2.toString());
    }
});
map.put("1", "one");
map.put(2, "two");
map.put(3L, "three");
map.put('4', "four");

for(Object o: new Object[] { 1L, '2', 3, "4"}) {
    System.out.println(o.getClass().getSimpleName()+" "+o+" => "+map.get(o));
} 
```

印刷

```
Long 1 => one
Character 2 => two
Integer 3 => three
String 4 => four 
```

# xcode - Xcode：断点停止工作

> ID：12496400
> 
> 赞同：2
> 
> 时间：2012-09-19T14:01:25.960
> 
> 标签：xcode, breakpoints

我有一个静态库和一个链接到它的 Mac 应用程序。调试版本使用 DWARF 作为调试信息。我一直在使用静态库项目附加到 Xcode4.2 下的应用程序，并且断点正在工作。

最近我升级到了Xcode4.4，我不否认可能还有其他我不知道的环境变化。现在我不能再打断点了。

我重建了我的库，并针对该库重建了我的应用程序。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:22:00.513

我自己来回答：

根据 Xcode 邮件列表上的 Apple 工程师。这是一个 Xcode 错误，我会尽快提交错误。

目前有一种解决方法，引用苹果工程师的话：

> 我认为我们仍在 Xcode 4.2 中使用 gdb。因此，在 Xcode 4.4 中，您可以通过在 Scheme Editor 中从 lldb 切换回 gdb 来解决此问题。如果此解决方法有效，您必须提交一个错误，因为我们将很快弃用 gdb。

# connection - 不要成功从互联网上获取 jpg-lwuit

> ID：12496403
> 
> 赞同：-1
> 
> 时间：2012-09-19T14:01:35.967
> 
> 标签：connection, lwuit

我正在用 lwuit 开发诺基亚和黑莓。

我正在使用服务器和连接。如果我打电话给我正在工作的服务器，一切正常。但是，如果我尝试调用接收 jpg 的外部 url，则连接请求被卡住并且我得到响应代码 400。ConnectionRequest 类的函数 performOperation() 中的连接失败。

为什么会发生？

如果我调用我的服务器并获取图像，它的工作正常，但是当我调用外部 jpg 时它不起作用。有什么解决办法吗？

这一切都发生在模拟器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:18:51.043

在您的网址末尾添加**";deviceside=true" ... 比如****"http://myHost/images/flux.jpg;deviceside=true"**，对于 Blackberry

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:17:29.157

我发现了问题。这是因为我使用 POST 方法。我认为如果我们不发送参数但使用方法 POST 会出现 HTTP 消息标头中的 Content-Length 问题，这就是我收到错误的原因（400 或 411）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:16:33.407

我真的不明白你在找什么。

但我认为你必须检查图像的 URL。此外，该课程`com.sun.lwuit.io.services.ImageDownloadService`可能对您非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T10:04:18.633

由于 RIM 添加了各种专有行为，RIM 网络连接与诺基亚/标准 J2ME 不同。[Codename One](http://www.codenameone.com/)的 IO API 隐藏了这种复杂性，如果您不想迁移，我建议您阅读 RIM 的网络 APN，它对于单个堆栈溢出答案来说有点复杂。

# sql - sql server 中的“AND OR”用法

> ID：12496404
> 
> 赞同：-2
> 
> 时间：2012-09-19T14:01:38.200
> 
> 标签：sql, sql-server, sql-server-2008, tsql

使用时有什么不同（在性能方面）：A：

```
SELECT Col1, Col2, Col3, col7 
  FROM xTable  
 WHERE (col1 > 0) 
   AND (col7 >= 0) 
    OR (col2 > 0)
   AND (col7 >= 0) 
    OR (col3 > 0) 
   AND (col7 >= 0) 
```

B：并使用：

```
SELECT Col1, Col2, Col3, col7
  FROM xTable
 WHERE ( (col1 > 0) OR (col2 > 0) OR (col3 > 0) )
   AND (col7 >= 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:16:56.057

出于所有意图和目的，它们的性能将相同。要获得额外的纳秒，请尝试将 (col7 >= 0) 子句首先放在 B 中。无论如何，优化器可能会重写/重构查询，以便它们具有相同的性能。

当人们真的想快速做这种事情时，他们会使用位图索引，但我记得 SQL Server 并没有这样做。

一种等效的方法是生成一个“位”列，并在该列上建立索引，但这有点离题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:24:22.747

试图对抗这张桌子

```
CREATE TABLE xTable
(
col7 INT PRIMARY KEY,
Col1 INT,
Col2 INT,
Col3 INT
) 
```

两个版本的查询都给出了相同的执行计划，带有一个范围搜索`col7 >= Scalar Operator((0))`和一个残差谓词`[Col1]>(0) OR [Col2]>(0) OR [Col3]>(0)`，所以至少在那个测试中它根本没有性能差异。

# visual-c++ - 制作程序时对 EMET 功能的注意事项

> ID：12496408
> 
> 赞同：-1
> 
> 时间：2012-09-19T14:01:49.280
> 
> 标签：visual-c++, compatibility, windows-applications

我目前在一个小型 C++ Windows 游戏应用程序及其库的项目中。

最近我发现[增强的缓解体验工具包 (EMET)](http://www.microsoft.com/en-us/download/details.aspx?id=29851)可以在客户端的 PC 上使用来提高安全性。
我玩弄过 EMET，甚至 Microsoft 的应用程序（例如 sidebar.exe）都无法与它兼容，因此必须特别注意程序才能与 EMET 功能（如 ASLR 或 EAF）兼容。

为了使我的程序与 EMET 功能兼容，我应该考虑什么？
是否有编译器选项或工作流限制？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T00:28:36.973

EMET 适用于旧版软件，您无法让他们的代码利用不可用 - 除非重建安全功能。
如果您可以重建您的软件，[请参阅此页面](http://msdn.microsoft.com/en-us/library/bb430720.aspx)以启用它们。

# html - 在 html 中使用 VBscript 检索查询字符串

> ID：12496413
> 
> 赞同：-2
> 
> 时间：2012-09-19T14:02:03.450
> 
> 标签：html, vbscript

localhost/Project.html?ProjectId=P6610C32F-7C54-4221-A190-A9E7E08F8B08

这是我的网址。

我想检索变量“ProjectId”的查询字符串值

我如何使用 vbscript 和 html 页面来做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:08:01.573

我对 VBScript 不太熟悉，但让我向您展示使用 javascript 的想法；location.search 字符串将根据某些规则进行格式化。例如，字符串中包含的每个特定变量本身就是一个语句，由与号“&”字符分隔。因此，我们可以将 location.search 字符串拆分为字符串数组，如下所示：

```
mySearch = location.search.substr(1).split("&") 
```

这将创建一个名为 mySearch 的对象数组。每个将如下所示：

```
ProjectId=P6610C32F-7C54-4221-A190-A9E7E08F8B08 
```

您可以访问数组以获取您的信息。

# c# - 单击后 ContextMenuStrip 不会关闭

> ID：12496419
> 
> 赞同：1
> 
> 时间：2012-09-19T14:02:36.173
> 
> 标签：c#, winforms, contextmenustrip

右键单击富文本框后，我正在创建上下文菜单条。有 2 个选项，一个用于更改字体，一个用于更改背景颜色。但是，一旦我单击其中一个菜单选项，上下文菜单条就不会关闭并覆盖显示的对话框。我知道我可以使它“全局”并强制它关闭，但我宁愿不这样做。处理这个问题的最佳方法是什么？

```
// If the console is right clicked then show font options
private void rtb_console_MouseUp(object sender, MouseEventArgs e)
{
    if (e.Button == System.Windows.Forms.MouseButtons.Right)
    {
        ContextMenuStrip menu = new ContextMenuStrip();
        menu.Items.Add("Change Font");
        menu.Items.Add("Change Background Color");
        menu.Show(this, new Point(e.X, e.Y));
        menu.ItemClicked += new ToolStripItemClickedEventHandler(menu_ItemClicked_ChangeFont);
    }
}  

// Determine whether to change the font or the font background color
void menu_ItemClicked_ChangeFont(object sender, ToolStripItemClickedEventArgs e)
{
    Application.DoEvents();  // Read that this might help, but it doesn't
    if (e.ClickedItem.Text == "Change Font")
    {
        FontDialog font = new FontDialog();

        font.ShowColor = true;
        font.Font = rtb_console.Font;
        font.Color = rtb_console.ForeColor;

        if (font.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            rtb_console.Font = font.Font;
            rtb_console.ForeColor = font.Color;
        }
    }
    else if (e.ClickedItem.Text == "Change Background Color")
    {
        ColorDialog color = new ColorDialog();
        color.Color = rtb_console.BackColor;

        if (color.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            rtb_console.BackColor = color.Color;
        }
    }
} 
```

所以这就是发生的事情：
![ContextMenuStrip 持久化](../Images/149319dfff03045e9733707fa81b4a78.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:07:06.937

您不想`ContextMenuStrip`每次都手动创建并显示它。更好的方法是创建`ContextMenuStrip`一次。然后`RichTextBox`通过将其分配给 的`ContextMenuStrip`属性将其分配给`RichTextBox`。这样做，您将不再需要在`ContextMenuStrip`用户每次点击它时手动启动。它会自动发生。它还会以您单击它时所期望的方式自动隐藏自己。

执行一次，然后删除 MouseUp 事件的事件处理程序：

```
ContextMenuStrip menu = new ContextMenuStrip(); 
menu.Items.Add("Change Font"); 
menu.Items.Add("Change Background Color"); 
menu.ItemClicked += new ToolStripItemClickedEventHandler(menu_ItemClicked_ChangeFont);
rtb_console.ContextStripMenu = menu; 
```

另外，请不要`Application.DoEvents();`尝试强制用户界面自行更新。 [前往此处阅读最佳答案。](https://stackoverflow.com/questions/5181777/use-of-application-doevents) 一般来说，如果你使用`Application.DoEvents()`，你做错了什么，应该考虑改变你的方法。

您也可以考虑做一件事，但这实际上只是一个偏好问题……如果您使用的是 Visual Studio，请考虑`ContextMenuStrip`在设计器中创建您。这样，您可以非常轻松且直观地为每个项目添加项目、图标和单独的回调。只是出于纯粹的个人喜好，我喜欢做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-27T11:05:37.897

只需`ToolStripItemClickedEventArgs`声明：

```
ContextMenuStrip menu = (ContextMenuStrip)(Sender) 

if (e.ClickedItem.Text == "Change Font")
{
    menu.hide();
    /* and your code here*/...
} 
```

# javascript - JavaScript 作为手机上的“服务”

> ID：12496426
> 
> 赞同：1
> 
> 时间：2012-09-19T14:02:51.803
> 
> 标签：javascript, android, ios, windows-phone-7

我正在制定项目计划，遇到了一个愚蠢的问题。

目前，该项目的计划是成为一个仅限网络的应用程序。这意味着我不打算制作本地客户。可能有一天。

我想知道在网页上使用 JS 作为“服务”的可行性。如果用户登录并且JS启动，如果用户切换到不同的应用程序或关闭他们的屏幕，它将允许运行多长时间？

我已经做了一些测试，但我无法确认我在网上看到的内容。我希望在这里做到这一点。

测试：加入 jabbR.net。离开浏览器。关闭屏幕。

iOS：用户在 15 分钟后被发现。
Android：40 分钟后用户仍然连接
WinPhone：不知道，无权访问

我假设发生的是操作系统会在某个时间点暂停浏览器。我只是在寻找暂停应用程序的标准是什么，或者应用程序是否会因为它正在做某事（不太可能）而使其保持自我打开状态。

注意：我知道本地服务是最好的情况。我问的原因是我正在查看我对应用程序的想法是否仅适用于浏览器。

# c++ - wxScrolledWindow 滚动条不起作用

> ID：12496427
> 
> 赞同：0
> 
> 时间：2012-09-19T14:02:53.560
> 
> 标签：c++, wxwidgets

我的申请中有以下子女与父母的关系：

![在此处输入图像描述](../Images/4626eca3aa67d62dc42708a25d5bb8b2.png)

问题是 wxScrolledWindow 中没有可见的（或工作的）滚动条。

代码：

```
wxCollapsiblePane* collpane = new wxCollapsiblePane(this, ID_COLLPANE, "Tiles\t\t\t\t", wxDefaultPosition, wxDefaultSize, wxCP_NO_TLW_RESIZE);
wxSizer* sz = new wxBoxSizer(wxVERTICAL);
sz->Add(collpane,0,wxALIGN_RIGHT,10);
SetSizer(sz);
wxWindow* cPane = collpane->GetPane();
wxSizer* panesz = new wxBoxSizer(wxVERTICAL);
wxBitmap pic("test.bmp",wxBITMAP_TYPE_BMP);
wxScrolledWindow* scr = new wxScrolledWindow(cPane,ID_PANEL,wxDefaultPosition, wxSize(150,300));
scr->SetScrollbars(2,2,10,10);
wxClientDC dc(this);
scr->DoPrepareDC(dc);
panesz->Add( new wxBitmapButton(scr,-1,pic, wxDefaultPosition, wxSize(50,50) ), 1,  wxALIGN_CENTER, 0 );
/* more button adding here */
cPane->SetSizer(panesz);
panesz->SetSizeHints(cPane); 
```

如何让滚动条显示和滚动按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T09:43:30.157

要拥有滚动条，您需要`wxScrolledWindow`使用方法指示其完整的逻辑（而不是可能更小的物理）大小`SetVirtualSize()`。这可以通过直接调用它或者通过将一个sizer与滚动窗口相关联，将元素添加到这个sizer并调用来完成`FitInside()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-02T14:32:36.983

在默认状态下，要显示滚动条，窗口的虚拟大小必须大于窗口的实际大小。

```
scr->SetVirtualSize(wxSize(2000,2000)); 
```

但是，在 3.1 版中，这还不足以让滚动条出现。还必须设置滚动速率。（这对我来说感觉像是一个错误，因为它似乎应该有一个有效的默认设置。）

```
scr->SetScrollRate(1, 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T20:04:37.827

你应该修改

```
wxWindow* cPane = collpane->GetPane();
wxSizer* panesz = new wxBoxSizer(wxVERTICAL);
wxBitmap pic("test.bmp",wxBITMAP_TYPE_B ... 
```

你应该放个jpg。修改后，它肯定会工作；）相信我。

# algorithm - 寻找波峰和波谷，第二部分（有相应的定义）

> ID：12496432
> 
> 赞同：0
> 
> 时间：2012-09-19T14:03:38.343
> 
> 标签：algorithm, matlab, for-loop

这是对上一个关于定位波峰和波谷的问题的更新。上一个问题是这样的：

[MATLAB 中的波峰和波谷（但有相应的波峰和波谷定义）](https://stackoverflow.com/questions/12425527/peaks-and-troughs-in-matlab-but-with-corresponding-definition-of-a-peak-and-tro)

这一次，我做了建议的答案，但我认为最终算法仍然存在问题。你能告诉我我的代码做错了什么吗？谢谢。

```
function [vectpeak, vecttrough]=peaktroughmodified(x,cutoff)

% This function is a modified version of the algorithm used to identify
% peaks and troughs in a series of prices. This will be used to identify
% the head and shoulders algorithm. The function gives you two vectors:
% PEAKS - an indicator vector that identifies the peaks in the function,
% and TROUGHS - an indicator vector that identifies the troughs of the
% function. The input is the vector of exchange rate series, and the cutoff
% used for refining possible peaks and troughs.

% Finding all possible peaks and troughs of our vector.
[posspeak,possploc]=findpeaks(x);
[posstrough,posstloc]=findpeaks(-x);
posspeak=posspeak';
posstrough=posstrough';

% Initialize vector of peaks and troughs.
numobs=length(x);
prelimpeaks=zeros(numobs,1); 
prelimtroughs=zeros(numobs,1);
numpeaks=numel(possploc);
numtroughs=numel(posstloc);

% Indicator for possible peaks and troughs.
for i=1:numobs
    for j=1:numpeaks
        if i==possploc(j);
            prelimpeaks(i)=1;
        end
    end
end

for i=1:numobs
    for j=1:numtroughs
       if i==posstloc(j);
            prelimtroughs(i)=1;
       end
    end
end

% Vector that gives location.
location=1:1:numobs;
location=location';

% From the list of possible peaks and troughs, find the peaks and troughs
% that fit Chang and Osler [1999] definition.
% "A peak is a local minimum at least x percent higher than the preceding
% trough, and a trough is a local minimum at least x percent lower than the
% preceding peak." [Chang and Osler, p.640]

% cutoffs
peakcutoff=1.0+cutoff; % cutoff for peaks
troughcutoff=1.0-cutoff; % cutoff for troughs

% First peak and first trough are initialized as previous peaks/troughs.

prevpeakloc=possploc(1);
prevtroughloc=posstloc(1);

% Initialize vectors of final peaks and troughs.
vectpeak=zeros(numobs,1);
vecttrough=zeros(numobs,1);

% We first check whether we start looking for peaks and troughs.
for i=1:numobs
    if prelimpeaks(i)==1;
       if i>prevtroughloc;
           ratio=x(i)/x(prevtroughloc);
           if ratio>peakcutoff;
               vectpeak(i)=1;
               prevpeakloc=location(i);
           else vectpeak(i)=0;
           end
       end
    elseif prelimtroughs(i)==1;
        if i>prevpeakloc;
            ratio=x(i)/x(prevpeakloc);
            if ratio<troughcutoff;
                vecttrough(i)=1;
                prevtroughloc=location(i);
            else vecttrough(i)=0;
            end
        end
    else
        vectpeak(i)=0;
        vecttrough(i)=0;
    end
end        
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:23:50.263

我刚刚运行它，如果您进行此更改，它似乎可以工作：

```
peakcutoff= 1/cutoff; % cutoff for peaks
troughcutoff= cutoff; % cutoff for troughs 
```

我用下面的代码对其进行了测试，截止值为 0.1（峰必须比谷大 10 倍），看起来很合理

```
x = randn(1,100).^2;
[vectpeak,vecttrough] = peaktroughmodified(x,0.1);
peaks = find(vectpeak);
troughs = find(vecttrough);
plot(1:100,x,peaks,x(peaks),'o',troughs,x(troughs),'o') 
```

我强烈建议您阅读 matlab 中的矢量化。您的程序中有许多浪费的行，这使得它难以阅读，并且在大数据集时也会使其非常慢。例如，prelimpeaks 和 prelimtroughs 可以在没有循环的情况下完全定义，每个都在一行中：

```
prelimpeaks(possploc) = 1;
prelimtroughs(posstloc) = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T09:00:32.300

我认为找到峰值和谷值的技术比上面给出的百分比阈值技术更好。将最小二乘拟合抛物线拟合到数据集，实现这一点的技术在 1946 年 Frank Peters 的论文“抛物线相关性，一种新的描述性统计”中。正如彼得斯定义的那样，拟合的抛物线可能具有曲率指数。通过测试哪些点在消除时使抛物线曲率指数的绝对值最小化，从而找到峰和谷。一旦发现这些点，通过考虑在排除该点时曲率指数如何变化来测试哪些是峰，哪些是谷，这将取决于原始抛物线的曲率指数是正数还是负数。如果您担心连续点的消除会实现最小绝对值曲率，请通过设置识别点彼此之间的最小距离来进行约束。另一个约束必须是识别的点数。如果没有这个约束，这个算法将删除除两个点之外的所有点，一条没有曲率的直线。有时连续点之间存在急剧变化，两者都应包含在极值点中。也许覆盖最小距离约束的连续点的百分比阈值测试会很有用。另一种解决方案可能是计算级数的快速傅立叶变换并删除使较低光谱最小化的点。FFT 函数比找到最小二乘拟合抛物线的代码更容易获得。有一种用于确定最小二乘拟合抛物线的矩阵操作技术，它比 Peter 的方法更易于管理。我在某个地方看到它记录在网络上，但丢失了链接。任何能够使用矩阵向量表示法得出最小二乘拟合抛物线的人的建议将不胜感激。

# c - 在 C 中运行 3 个并行命令提示符

> ID：12496433
> 
> 赞同：3
> 
> 时间：2012-09-19T14:03:46.453
> 
> 标签：c, command, multiprocessing, prompt

我正在编写一个运行 3 个并行进程的程序，每个进程都接收来自用户的命令。但是我需要运行 3 个命令提示符，每个进程一个，我不确定它是如何用 C 编码的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:10:34.160

要使其在单个终端中工作，您必须：

1.  确保三个进程中的一个最多同时读取。
2.  确保显示正在读取的进程的提示（而不是其他进程的提示）。
3.  确保用户非常警觉并且知道他们正在输入什么。

前两个是需要进程间协调（通信）的重要技术问题。最后一个是不溶的。

作为一个 UI 设计，这听起来非常……次优。

如果您使用多个终端，那么进程级别的协调问题就会消失；每个进程都使用自己的终端窗口，系统负责协调。但是，用户现在必须在不同的窗口之间切换才能输入正确的数据，所以您仍然遇到问题 3。作为 UI 设计，这听起来仍然......不是最理想的。

# node.js - 如果 100：在 Express.js 中继续，如何处理完成的 POST 请求？

> ID：12496434
> 
> 赞同：1
> 
> 时间：2012-09-19T14:03:48.817
> 
> 标签：node.js, http-headers, express

我发布了一个相对较大的（50K）文本文件：

```
curl -H "Content-Type:text/plain"  -d @system.log http://localhost:8888/ 
```

使用代理进行测试，我可以看到文件的全部内容正在发布。

但是 Express.JS 在标题中看到 100:Continue 和空白正文。我有 ：

```
app.use(express.bodyParser()); 
```

启用，顺便说一句。以下是标题：

```
{ 'user-agent': 'curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5',
  host: 'localhost:8888',
  accept: '*/*',
  'content-type': 'text/plain',
  'content-length': '55909',
  expect: '100-continue' } 
```

req.body 为空：

```
{} 
```

如何查看 Express.JS 中发布的所有数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:56:59.660

我的猜测是节点会`100-continue`根据[节点 http 模块文档](http://nodejs.org/api/http.html#http_event_checkcontinue)自动发送响应（假设您使用的是足够新的节点版本）。我猜正在发生的只是`text/plain`内容类型不是`bodyParser`可以解析为其他内容的格式（与 json 或 www-form-urlencoded 不同）。因此，您可以从标准`data`事件中获取数据，请求将为它读取的每个数据块发出该事件。

# python - 元组和列表的差异访问元素

> ID：12496435
> 
> 赞同：3
> 
> 时间：2012-09-19T14:03:49.933
> 
> 标签：python, list, tuples

`t`为什么在访问元素时存在这种差异`tuple`？

```
>>> t = [('ID','int')]
>>> for r in t:
print r

('ID', 'int')

t = (('ID','int'))
>>> for r in t:
print r

ID
int 
```

我希望这与第一个示例完全相同！使用多个元素填充元组时，行为会发生变化。

```
>>> t = (('ID','int'),('DEF','str'))
>>> for r in t:
print r

('ID', 'int')
('DEF', 'str')
>>> t = [('ID','int'),('DEF','str')]
>>> for r in t:
print r

('ID', 'int')
('DEF', 'str') 
```

有人可以给出一个简短的解释吗？我正在运行 python 2.7

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T14:05:03.490

`(('a', 'b'))`是一样的`('a', 'b')`。

你其实想要`(('a', 'b'),)`

这记录在这里：

> [**5.13。表达式列表**](http://docs.python.org/reference/expressions.html#grammar-token-expression_list)
> 
> `expression_list ::= expression ( "," expression )* [","]`
> 
> 包含至少一个逗号的表达式列表产生一个元组。元组的长度是列表中表达式的数量。表达式从左到右计算。
> 
> 尾随逗号仅用于创建单个元组（也称为单例）；在所有其他情况下它是可选的。没有尾随逗号的单个表达式不会创建元组，而是产生该表达式的值。（要创建一个空元组，请使用一对空括号：()。）

请记住，如果没有这个限制，表达式`(3) * (4)`应该是两个数字的乘积，还是两个元组？大多数用户会期望这是数字的乘法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T14:07:12.463

```
t = [('ID','int')] 
```

是列表中的一个元组。

```
t = (('ID','int')) 
```

是一个带有括号的元组。

```
t = ('ID','int'), 
```

是元组中的元组。

使`,`元组！元组周围的括号只是为了避免歧义。

# jquery - jquery $('body').on('click') 总是需要 .off('click') 以避免多个事件触发

> ID：12496436
> 
> 赞同：4
> 
> 时间：2012-09-19T14:03:57.390
> 
> 标签：jquery, jquery-on

我有一个页面列出了我的船员（show_crew.php）。该页面使用无限滚动插件运行，就像 Google 图片一样。首先，我展示了 10 个条目。如果用户到达 show_crew.php 的底部，一个新的“show_crew.php”会附加到旧的，显示接下来的 10 个条目。

我在 show_crew.php 中嵌入了一些 Jquery 函数，在其中我通过绑定事件

```
$('body').on('click', 'myButton[rel=<? echo $user['id'] ?>]', function() {
    console.log('foo');
})​ 
```

现在，由于 show_crew.php 被多次附加，事件也被多次绑定到同一个按钮。我可以通过`$('body').off('click', 'myButton')`每次解决这个问题。

这看起来很难看。有没有更优雅的方式？

谢谢，马特

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-19T14:06:23.243

您只需要绑定一次委托事件。不要在每次加载内容时重新绑定。

使用 的格式`$('body').on('click', '...selector...', function () {...})`会将事件处理程序委托给`<body>`元素。这意味着主体将捕获所有`click`事件并检查它们是否发生在匹配的元素上`...selector...`。如果是这样，它将触发事件处理程序*，就好像它是在匹配的元素上触发一样*。

添加委托侦听器后，无需担心重新绑定，因为 的子级`<body>`可以更改，并且委托将持续存在新元素。这是一件**非常好的事情™**。

# java - 使用 java mail api 发送邮件

> ID：12496437
> 
> 赞同：0
> 
> 时间：2012-09-19T14:03:59.120
> 
> 标签：java, jakarta-mail

我正在尝试从我的 Java 类发送邮件，但不断收到 MessangingException。我认为它与身份验证问题有关，但我无法找出问题所在。

以下是异常的堆栈跟踪。

```
Sep 19, 2012 7:27:30 PM me.uni.sushilkumar.geodine.util.Mailer send
SEVERE: null
javax.mail.SendFailedException: Sending failed;
  nested exception is: 
    javax.mail.MessagingException: 530 5.7.0 Must issue a STARTTLS command first.     ko8sm1883776pbc.40

    at javax.mail.Transport.send0(Transport.java:219)
at javax.mail.Transport.send(Transport.java:81)
at me.uni.sushilkumar.geodine.util.Mailer.send(Mailer.java:61)
at me.uni.sushilkumar.geodine.util.Mailer.main(Mailer.java:73) 
```

我正在使用以下代码发送消息

```
public class Mailer {
private Session session;
private final String username;
private final String password;
public Mailer(String username,String password)
{
    this.username=username;
    this.password=password;
    init(username,password);
}

public final void init(String username,String password)
{
    Properties props=new Properties();
    props.put("mail.smtp.auth", "true");
props.put("mail.smtp.starttls.enable", "true");
props.put("mail.smtp.host", "smtp.gmail.com");
props.put("mail.smtp.port", "587");
    session=Session.getInstance(props, new Authenticator()
    {
        @Override
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(Mailer.this.username,Mailer.this. password);
        }
    });

}

public boolean send(String recipient,String subject,String body) 
{
    boolean status=false;
    try {

        Message message=new MimeMessage(session);
        message.setFrom(new InternetAddress(username));
        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipient));
        message.setSubject(subject);
        message.setText(body);
        Transport.send(message);
        status=true;

    } catch (MessagingException ex) {
        Logger.getLogger(Mailer.class.getName()).log(Level.SEVERE, null, ex);
    }
    return status;
}

public static void main(String[] args)
{
    Mailer mailer=new Mailer("example@example.com","password");
    boolean status=mailer.send("0120sushil@gmail.com", "Demo Mail", "This is a demo message");
}

} 
```

有人可以建议我这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-08-10T06:21:26.703

只需复制并粘贴此代码，然后输入您的电子邮件信息，例如电子邮件地址和密码。

```
import java.util.*;
import javax.mail.*;
import javax.mail.internet.*;

public class SendEmail
{
public static void sendEmail(String toEmail,String subject,String  message)
{
    try
    {
        String fromEmail="yourmail@gmail.com";
        String username="yourmail@gmail.com";
        String password="yourpassword";

        Properties props= System.getProperties();
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.port", "465");
        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.socketFactory.port", "465");
        props.put("mail.smtp.socketFactory.fallback", "false");
        props.put( "mail.smtp.ssl.enable", "true");

        Session mailSession = Session.getDefaultInstance(props, null);
        mailSession.setDebug(true);

        Message mailMessage=new MimeMessage(mailSession);
        mailMessage.setFrom(new InternetAddress(fromEmail));
        mailMessage.setRecipient(Message.RecipientType.TO, new InternetAddress(toEmail));
        mailMessage.setContent(message, "text/plain");
        mailMessage.setSubject(subject);

        Transport transport=mailSession.getTransport("smtp");
        transport.connect("smtp.gmail.com",username,password);
        transport.sendMessage(mailMessage, mailMessage.getAllRecipients());

    }catch (Exception ex) {
       ex.printStackTrace();
     }
   }
 } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-01T04:55:29.727

```
import java.util.Properties;

import javax.mail.Message;

import javax.mail.MessagingException;

import javax.mail.PasswordAuthentication;

import javax.mail.Session;

import javax.mail.Transport;

import javax.mail.internet.InternetAddress;

import javax.mail.internet.MimeMessage;

public class Send_Mail_Dao

{

private static final String SSL_FACTORY = "javax.net.ssl.SSLSocketFactory";

   public static boolean Send_Mail(String to,String subject,String mess)

   {

        final String username = "qamarislam.comp@gmail.com";

        final String password = "password";

                boolean flag=false;

        Properties props = new Properties();

        props.put("mail.smtp.host", "smtp.gmail.com");

        props.put("mail.smtp.auth", "true");

        props.put("mail.debug", "true");

        props.put("mail.smtp.port", "465");

        props.put("mail.smtp.socketFactory.port", "465");

        props.put("mail.smtp.socketFactory.class", SSL_FACTORY);

        props.put("mail.smtp.socketFactory.fallback", "false");

        Session session = Session.getInstance(props,new javax.mail.Authenticator() 

                  {
                     @Override
                protected PasswordAuthentication getPasswordAuthentication()
                        {
                   return new PasswordAuthentication(username, password);
                }
          }
          );

        try {

            Message message = new MimeMessage(session);
            message.setFrom(new InternetAddress("qamarislam.comp@gmail.com"));
            message.setRecipients(Message.RecipientType.TO,
                InternetAddress.parse(to));
            message.setSubject(subject);
            message.setText(mess);

            Transport.send(message);
                            flag=true;
            System.out.println("Done");

            } 
        catch (MessagingException e) 
        {
            throw new RuntimeException(e);
        }
                return flag;
    }
} 
```

# xpath - Xpath - 选择第一个/第二个元素

> ID：12496440
> 
> 赞同：0
> 
> 时间：2012-09-19T14:04:10.867
> 
> 标签：xpath

我有下一个 xpath：

```
//span[text()="Bingo"]/parent::div/parent::div/parent::td/preceding-sibling::td[1] 
```

它返回两个元素。

我如何选择其中一个（第一个或第二个）？

我尝试：

```
//span[text()="Bingo"]/parent::div/parent::div/parent::td/preceding-sibling::td[1][1] 
```

但它仍然给了我两个元素。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T14:09:02.447

在整个表达式上使用括号，然后是索引：

```
(//span[text()="Bingo"]/parent::div/parent::div/parent::td/preceding-sibling::td[1])[1] 
```

# ruby-on-rails - Java Play Framework 1.2.x 之后的下一步？

> ID：12496443
> 
> 赞同：0
> 
> 时间：2012-09-19T14:04:24.393
> 
> 标签：ruby-on-rails, spring, grails, frameworks, playframework

我想知道使用 java play 框架开发应用程序后的下一个合乎逻辑的步骤是什么？

我真的很喜欢用 play 1.2 开发，但我对它的未来没有信心，主要开发人员停止了对它的支持（但它仍然是开源的），而 play 2.0 是一个完全不同的产品。

我尝试学习 play 2.0，但我就是不喜欢 scala 语言（尽管它听起来是一种很棒的编码语言）

所以我决定将我的 Web 应用程序项目集中在另一个框架上。它不应该是java，但我更喜欢它是一个独立于平台的框架，比如ruby，或者其他。（我也是拥有 mcp 证书的 .net 开发人员，但我通常使用 osx 环境进行编码，而且我不是 windows 的忠实粉丝）。

我目前的游戏框架问题：

1.  它工作得很好，但我看不到它的未来我担心开源社区会在一段时间后停止开发 1.2.x
2.  玩 2.0 线程 java 作为二等公民，我开始对它的开发人员失去信心。
3.  找游戏框架工作的人不多

框架应该是：

1.  独立于平台
2.  独立于数据库（可以使用休眠或其他..）
3.  拥有庞大的用户社区
4.  必须是经过验证的大型企业应用程序框架

我搜索了一下，发现了 grails、spring 和 RoR 框架。

好吧，为了让事情更清楚，以下是关于我的问题的摘要：

1.  我应该从“java”路径继续吗？我担心时间在变化，几年后，Web 框架中将使用更多类似“scala”的函数式语言，它们在未来的框架中会更有用
2.  我也想知道Ruby语言？对他们在未来 5 年内会在哪里有任何见解？
3.  在接下来的 5 年中，您在哪里看到“使用 scala/java 播放框架”？他们值得花时间在他们身上吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:18:46.477

[**春天**](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)。

**如果您了解 Java，那么了解Spring**也是合理的。

人们对 Spring 很讨厌，因为他们认为：

*   它不是新的和闪亮的
*   您需要大量的 XML 来做任何事情。
*   它巨大的单体野兽。

**除了成熟之外，以上都不是真的**。不像*玩！*春天是长期存在的。

Spring 也不会自行构建“自己的”所有东西，而是依赖于您插入的最佳品种库。因此，使用 Spring，您可以使用任何模板语言、任何构建系统、持久性等。 .

现在唯一带有 Spring 的 PITA 正在寻找一个好的起点。我推荐[Spring Roo](http://www.springsource.org/spring-roo)或[MWA](https://github.com/jknack/modern-web-app)

**更新：**

我不知道为什么当问题很糟糕时我得到-1（发表评论或其他内容）。

他要求：

> 1.  独立于平台
> 2.  独立于数据库（可以使用休眠或其他..）
> 3.  拥有庞大的用户社区
> 4.  必须是经过验证的大型企业应用程序框架

恕我直言，没有更适合上述几点的框架（尤其是企业）。

**他问了一个我给他的固执己见的问题。**

# database - 如何在 er 图中描述具体的基数约束？

> ID：12496457
> 
> 赞同：1
> 
> 时间：2012-09-19T14:04:53.520
> 
> 标签：database, entity-relationship

这学期我正在学习数据库。er模型的作业真的让我很困惑。

作业是画关于菜市场的er图：菜市场有一组编号的摊位。每个摊位都有一个名称（唯一的），并且至少出售一种蔬菜（每种都有一个名称）。每个摊位都以自己的特定价格出售每种蔬菜。每个农场种植一些***（至少一种，但不是全部）***蔬菜，但一种蔬菜必须由至少一个农场种植。每个农场都有一个名称（唯一的）和地址。每个摊位都以他们同意的特定价格从一个农场购买每种蔬菜。

我的问题是如何在需求中描述约束“（至少一个，但不是全部）”？
另一个问题是，既然蔬菜没有主键或鉴别器，它们应该被视为实体吗？还是应该将它们视为属性之类的其他东西？

这是我的答案：（ [来源：][[rrimg.com](http://fmn.rrimg.com/fmn056/20120919/2325/large_xnSN_416500023eb6125e.jpg)][）][![](../Images/cff028975800e1a104c946a8b369672e.png)](https://i.stack.imgur.com/oPmrQ.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:56:47.680

Ad.1 据我所知，不可能在 ERD 图上放置**至少一个但不是全部**的信息，我只是将关系标记为**一个或多个**，这是可能的。我唯一想到的就是发表适当的评论，说明该要求。

广告。2 是的，我认为**蔬菜**应该被表示为一个独立的实体。如果你想把它作为一个属性，你可以把它作为实体“Farm_grows”的一个属性来做，但是你将无法保持唯一性，无论如何你必须有一些键，最后最糟糕的是，它不会是 3NF。

我的建议在下图中 - 不幸的是，我没有支持您的符号的工具（我知道在 Visio 中可以做到这一点，但是将我的符号转换为您的符号应该没有任何问题）。

![图表](../Images/6e3625894bba3e0fe6e0322b0b2c884a.png)

与您的不同之处在于，我对**SELL**和**BUY**有一种关系，即**STALL_VEGETABLE**。为什么呢？因为这个要求：

“每个摊位都以他们同意的特定价格从一个农场购买每种蔬菜。”

我的模型保留了 Stall 只出售它购买的那些蔬菜，而且因为**stall_name**和**vegetable_name**是 PK，所以 Stall 不可能从不同的农场购买一种蔬菜 - 你的模型允许这样做。

# c# - Spring.Net 无法实例化一个类

> ID：12496460
> 
> 赞同：0
> 
> 时间：2012-09-19T14:05:17.643
> 
> 标签：c#, asp.net, inversion-of-control, spring.net

错误 :: 无法实例化没有无参数构造函数 [ClassLibrary2.Class1] 的类。

我创建了一个测试项目。

我在 Spring src 中得到了错误源。//////////////

ConstructorInfo 构造函数 = GetZeroArgConstructorInfo(objectType); // 在 this 中，只允许零 arg。但我使用依赖注入构造函数。它不起作用。////

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ClassLibrary1
{
   public interface IHi
    {
        string SayHi();
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ClassLibrary1
{
    public class Class1:IHi
    {
        public string SayHi()
        {
            return "Hello Yeah";
        }
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using ClassLibrary1;
namespace ClassLibrary2
{
    public class Class1:IWannaSay
    {

        private readonly IHi Hi;
///Here doest work. prompts Cannot instantiate a class that does not have a no-argument constructor [ClassLibrary2.Class1].

        public Class1(IHi Hi)
        {
            this.Hi = Hi;
        }

        public string SayHi()
        {

           return  Hi.SayHi();
        }

    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ClassLibrary2
{
   public interface IWannaSay
    {
       string SayHi();
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using ClassLibrary2;
namespace Mvc4.Controllers
{
    public class HomeController : Controller
    {
        private readonly IWannaSay WannaSay;
///H ere works .Its so werid.
        public HomeController(IWannaSay WannaSay)
        {
            this.WannaSay = WannaSay;

        }
        public ActionResult Index()
        {

            var c = WannaSay.SayHi();
            ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";

            return View();
        }

} 
```

我的 test.xml

```
<?xml version="1.0" encoding="utf-8" ?>
<objects xmlns="http://www.springframework.net">

  <object id="w" type="ClassLibrary2.Class1,ClassLibrary2">
  </object>
  <object id="Hi" type="ClassLibrary1.Class1,ClassLibrary1">
  </object>

  <object id="Hio" type="ClassLibrary2.Class1,ClassLibrary2"  singleton="false">
    <!--构造器注入-->
    <!--<constructor-arg  name="Hi"   ref="Hi"/>-->
    <property name="Hi" ref="w"/>

  </object>

  <object id="HomeCountroller" type="Mvc4.Controllers.HomeController,Mvc4"  singleton="false">
    <!--构造器注入-->
    <constructor-arg  name="WannaSay"   ref="w"/>
    <!--<property name="UserRespositoryImpl" ref="UserRespositoryImpl"/>-->

  </object>

</objects> 
```

网络配置

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <sectionGroup name="spring">
      <section name="context" type="Spring.Context.Support.MvcContextHandler, Spring.Web.Mvc4" />
      <section name="objects" type="Spring.Context.Support.DefaultSectionHandler, Spring.Core" />
      <section name="parsers" type="Spring.Context.Support.NamespaceParsersSectionHandler, Spring.Core" />
    </sectionGroup>
  </configSections>
  <spring>
    <parsers>
      <parser type="Spring.Data.Config.DatabaseNamespaceParser, Spring.Data" />
      <parser type="Spring.Transaction.Config.TxNamespaceParser, Spring.Data" />
    </parsers>
    <context>
      <resource uri="assembly://Mvc4/Mvc4.Configs/test.xml" />

    </context>
  </spring>
  <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-Mvc4-20120919193749;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-Mvc4-20120919193749.mdf" providerName="System.Data.SqlClient" />
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:11:16.780

你可以调整你的`controller argument` `(Problem is mismatch of type)`

因为

```
 <object id="w" type="ClassLibrary2.Class1,ClassLibrary2">
  </object>
 <object id="HomeCountroller" type="Mvc4.Controllers.HomeController,Mvc4"  singleton="false">
    <constructor-arg  name="WannaSay"   ref="w"/>
 </object> 
```

你需要类型的参数`Class1`

但是在你的构造函数中你有

```
public HomeController(IWannaSay WannaSay)//<--- 
{
     this.WannaSay = WannaSay;

} 
```

解决方案：修改您的参数并设置为`Class1 Type`

```
public class HomeController
{

    private Class1 yourProperty;
    public HomeController(Class1 value) 
    {
        yourProperty = value;   
    }

    .........

} 
```

带着这个春天

```
 <object id="w" type="ClassLibrary2.Class1,ClassLibrary2">
  </object>
 <object id="HomeCountroller" type="Mvc4.Controllers.HomeController,Mvc4"  singleton="false">
    <constructor-arg  name="WannaSay"   ref="w"/>
 </object> 
```

# android - 无法在布局列表底部显示我的按钮

> ID：12496462
> 
> 赞同：0
> 
> 时间：2012-09-19T14:05:27.217
> 
> 标签：android, xml, layout, button

我在这个问题上花了几个小时，我希望有人能帮助我。如果问题很愚蠢，请提前抱歉，我对 android 开发还很陌生，而且，我正在使用一个已经生成大量代码的应用程序构建器。我基本上是在尝试用我想要的来调整这段代码......

问题只是关于 xml 布局，我认为它不涉及代码。我想在这个屏幕的底部显示一个简单的按钮。

所以我有这个屏幕，它在网格中构建了一组按钮。我还在顶部显示了一个广告横幅。这些按钮的参数是通过 Web 界面上的 Web 应用程序构建器指定的。这些按钮没有问题。它们在下面的屏幕布局中正确显示：

```
 <?xml version="1.0" encoding="UTF-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:id="@+id/containerView"
android:background="@android:color/transparent"    
android:padding="0dip"
android:layout_margin="0dip"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<com.google.ads.AdView android:id="@+id/adView"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     ads:adUnitId="123"
                     ads:adSize="SMART_BANNER"
                     ads:testDevices="123"
                     ads:loadAdOnCreate="true">
</com.google.ads.AdView>

    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/verticalScrollView" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent">

        <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/tableLayout" 
            android:layout_width="fill_parent" 
            android:layout_height="fill_parent">
        </TableLayout>

    </ScrollView>

    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/containerViewHorizontal"
            android:background="@android:color/transparent"    
            android:padding="0dip"
            android:layout_margin="0dip"
            android:orientation="horizontal"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">

            <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/containerViewHorizontalBottom"
                    android:background="@android:color/transparent"    
                    android:padding="0dip"
                    android:layout_margin="0dip"
                    android:orientation="vertical"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content">

                <HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/horizontalScrollView" 
                    android:layout_width="fill_parent" 
                    android:layout_height="wrap_content">

                    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                        android:id="@+id/containerHorizontalButtons"
                        android:background="@android:color/transparent"    
                        android:padding="0dip"
                        android:layout_margin="0dip"
                        android:orientation="horizontal"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content">

                    </LinearLayout>

                </HorizontalScrollView> 

            </LinearLayout>

    </RelativeLayout> 
```

现在我要做的是在这组按钮的底部添加一个不属于通过网络应用程序生成器生成的列表，而是手动创建的按钮：

```
<Button
android:id="@+id/bmenu2"
android:layout_width="wrap_content"
android:layout_height="wrap_content"     
android:text="Button" /> 
```

我已经处理了此按钮的代码，它运行良好，但我无法在屏幕底部显示它。

我想这与屏幕的总体布局有关。我不得不承认我完全迷失在一系列相互嵌套的布局中，我不明白到底在做什么。

如果这有帮助，我已经设法在屏幕顶部显示我的按钮，甚至在我的广告横幅下方。但不是在底部。

另外，如果这有帮助，我猜其中一个布局占用了整个高度空间（滚动视图？），我要添加的按钮的高度为 0...

非常感谢您的宝贵时间，如果您能帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:11:20.273

Juyt 实现了一个线性布局，而不是列表和按钮的相对布局。然后给列表一个 0dp 的高度和一个 1 的权重按钮将具有任何属性：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1" >
</ListView>

<Button
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Button" />

</LinearLayout> 
```

# sql-server - 如何让依赖视图在 SQL Server 中自动更新？

> ID：12496465
> 
> 赞同：3
> 
> 时间：2012-09-19T14:05:42.510
> 
> 标签：sql-server

我们公司的某个人决定使用 3 个视图来支持网页，并且它们必须包含相同的列子集。所以我有这样的定义：

```
CREATE VIEW EmailReceivedView
AS
SELECT     
    dbo.EmailReceived.ID
    , ...lots of columns
FROM  dbo.EmailReceived 
LEFT OUTER JOIN ...more tables

--Emails related to reviews
CREATE VIEW ReviewEmailReceivedView
AS
SELECT RV.ReviewID, V.*
FROM ReviewEmailReceived RV
INNER JOIN EmailReceivedView V ON EmailReceivedID = V.ID

--Emails related to grants
CREATE VIEW GrantEmailReceivedView
AS
SELECT GV.GrantID, V.*
FROM GrantEmailReceived GV 
INNER JOIN EmailReceivedView V ON GV.EmailReceivedID = V.ID 
```

现在我在从属视图中做 V.* 的原因是，如果支持视图发生更改，我希望从属视图反映更改。但这不会在 SQL Server 中发生，除非我将脚本作为 ALTER 脚本重新运行。为什么不？有没有办法确保对支持视图的更改自动反映在依赖项中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T14:43:29.647

还有[`sp_refreshsqlmodule`](http://msdn.microsoft.com/en-us/library/bb326754.aspx)一个我更喜欢的只是因为你也可以将它用于不是视图的模块。但是，要构建一个刷新所有视图的脚本，您可以这样做：

```
DECLARE @sql NVARCHAR(MAX);
SET @sql = N'';

SELECT @sql = @sql + N'
  EXEC sys.sp_refreshsqlmodule 'N'' 
  + QUOTENAME(s.name) + N'.'
  + QUOTENAME(v.name) + N''';'
FROM sys.views AS v
INNER JOIN sys.schemas AS s
ON v.[schema_id] = s.[schema_id]
WHERE v.is_ms_shipped = 0
-- AND v.name LIKE '%EmailReceivedView%'
;

PRINT @sql;
-- EXEC sys.sp_executesql @sql; 
```

But more to the point, this is *exactly* why [you shouldn't use `SELECT *` in a view](https://sqlblog.org/2009/10/10/bad-habits-to-kick-using-select-omitting-the-column-list).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T14:08:46.080

[sp_refreshview](http://msdn.microsoft.com/en-us/library/ms187821.aspx)：

```
sp_refreshview [ @viewname = ] 'viewname' 
```

[SQL Server – 刷新所有视图](http://www.sqlserver-dba.com/2011/01/sql-server-refresh-all-views.html)

# java - 在 RMI 主机上订阅 EventBus

> ID：12496467
> 
> 赞同：1
> 
> 时间：2012-09-19T14:05:45.913
> 
> 标签：java, rmi, guava

EventBus 事件是否跨 RMI 连接工作？

基本思想：我有一个 RMI 服务器和任意数量的客户端。服务器持有 EventBus 对象并通过`getEventBus()`方法发布。

期望的结果：当客户端在服务器的 EventBus 上发布某些内容时，会通知其他注册的客户端。

有没有人做过这样的事情或知道为什么它不起作用？如果这样做有什么陷阱吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:33:04.080

EventBus 发布的消息仅在您的 JVM 中可用。由于您使用 RMI，我猜您的服务器/客户端将在他们自己的环境中运行，所以这是不可能的（尽管我听说 ppl 试图实现远程 EventBus，但我不知道这是否成功）。通常 EventBus 用于同一应用程序中的 UI 特定通信。

只要您想在不同的 JVM 之间进行通信，[Java 消息服务](http://en.wikipedia.org/wiki/Java_Message_Service)(JMS) 之类的东西就可以派上用场，将事件从服务器广播到感兴趣的客户端。JMS 的一个著名实现是[ActiveMQ](http://activemq.apache.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-14T17:10:59.343

我刚刚尝试过这个并且它有效。需要对接口进行注解，实例化后，注册代理对象。

当一个事件进来时，似乎 EventBus 只是简单地调用了代理上的函数，并且通过 RMI 正确地调用了远程对象。

# php - php require 不使用包含路径顺序

> ID：12496468
> 
> 赞同：0
> 
> 时间：2012-09-19T14:05:45.367
> 
> 标签：php, zend-framework, include-path, zend-server-ce

我使用 Zend Framework 并在我自己的库（不是主要 ZF 库）中有以下自定义文件（这是这个库中唯一的文件！）：

```
/home/web/library/php/Zend/Form/Element/Xhtml.php 
```

我的包含路径是：

```
/home/web/domains/secondstart/application/../../../library/php:/home/web/domains/secondstart/application/../library:.:/usr/local/zend/share/ZendFramework/library:/usr/local/zend/share/pear 
```

常规文件存在于 ZF 库中（在 /usr/local/zend/share/ZendFramework...）。

现在在 ZF 中 Zend_Form_Text_Element 扩展了 Xhtml_Element 如下（片段）：

```
...
require_once 'Zend/Form/Element/Xhtml.php';

/**
 * Text form element
 *
 * @category   Zend
 * @package    Zend_Form
 * @subpackage Element
 * @copyright  Copyright (c) 2005-2011 Zend Technologies USA Inc. (http://www.zend.com)
 * @license    http://framework.zend.com/license/new-bsd     New BSD License
 * @version    $Id: Text.php 23775 2011-03-01 17:25:24Z ralph $
 */
class Zend_Form_Element_Text extends Zend_Form_Element_Xhtml
{
... 
```

但是在调用 Text_Element 时，我的自定义文件被忽略了。当我从 ZF 库中删除 Xhtml.php 文件时，它会选择我的自定义文件。所以看起来 ZF 常规库比我的自定义类更受欢迎，尽管我的自定义 Zend 库是我包含路径中的第一个条目。请注意，我在我的开发环境中具有完全相同的配置，它可以按预期工作。

对于为什么会发生这种情况以及可以避免的任何帮助，我们将不胜感激。

一些背景知识：我不喜欢摆弄外部库，但在这里它真的很有用：我可以闯入内部 Zend 扩展链（更改 Zend_Form_Element 的默认装饰器），然后让 ZF 库继续完成其出色的工作.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:09:02.037

问题可能是 zend 服务器 (CE) 对代码的服务器端缓存。当我午饭后回来时，它按预期工作。我确实通过使用 Chrome incognito 消除了浏览器缓存，但忘了考虑服务器缓存。

# .net - 具有阻塞收集异常处理的消费者生产者

> ID：12496473
> 
> 赞同：0
> 
> 时间：2012-09-19T14:06:02.257
> 
> 标签：.net, vb.net, task-parallel-library

在这种情况下，总是有更多工作要做，因为总是有一系列电子邮件要处理。我想确保将记录 parallel.foreach 中产生的任何异常。我发现的示例都等到队列（在本例中为 MailToDownload）完成后，我才能处理异常。在我的情况下，我应该如何处理异常？

下面是我如何编写方法的基本示例。第一个任务提取要从数据库中提取的电子邮件列表。每次电子邮件帐户收到邮件时，都会将电子邮件地址插入表中，因此始终有数据。

```
Sub Main()
    Dim MailToDownload As New BlockingCollection(Of myMail)

    Task.Factory.StartNew(Sub()
                            For i As Integer = 0 To 99
                                MailToDownload.Add(New myMail With {.id = i})
                                System.Threading.Thread.Sleep(1000)
                            Next
                          End Sub)

    Task.Factory.StartNew(Sub()
                            Dim options As ParallelOptions = New ParallelOptions With {.MaxDegreeOfParallelism = 16}
                            Parallel.ForEach(MailToDownload.GetConsumingPartitioner(), options, Sub(item) doSomething(item))
                          End Sub)
End Sub 
```

我在想我应该通过将所有异常加载到另一个阻塞集合中来处理所有异常并产生一个不同的线程来处理这些异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:47:08.153

顺便说一句，你为什么不在 Parallel.Foreach “doSomething”方法中捕捉到那个异常？当然，您必须同步对日志文件或其他任何内容的访问，但是像 log4net 这样的库会为您执行此操作（同步）。

仅供参考，如果日志记录只是一个示例，并且您希望在发送电子邮件时在某些条件下执行更复杂的逻辑，您可以在这里查看：[https](https://gist.github.com/3746240) ://gist.github.com/3746240 这是生产者/消费者队列实现（摘自“C# 5.0 in a Nutshell: The Definitive Reference”一书，它将所有作业包装在 Tasks 中。由于我们有任务，您可以轻松地将 ContinueWith() 附加潜在谓词，即仅在出现错误时才必须调用它...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:44:52.943

我最终将异常放入阻塞集合中，并在另一个线程中放置了一个计时器以定期处理异常。它在阻塞集合的处理永远不会结束的情况下工作得很好。

# android - 从数据库android读取短信记录

> ID：12496474
> 
> 赞同：1
> 
> 时间：2012-09-19T14:06:01.917
> 
> 标签：android

我的设备上有超过 3000 条短信。我正在尝试读取数据库中的所有消息。我正在使用这个查询：

```
Cursor cur1 = c.getContentResolver().query(Uri.parse("content://sms/"), null, null, null, null); 
```

`cur1.getCount()`返回所有 3000 条短信，但是当我通过循环解析它时，它只运行 400 到 500 条。

```
Cursor cur1 = c.getContentResolver().query(Uri.parse("content://sms/"), null, null, null, null);
int size = cur1.getCount();

if(size > 0)
{
    sms = new SMS[size];
    //int i = 0;
    for(int i = 0 ; i < size ; i++)
    {
        cur1.moveToNext();
        ContactInfo p = new ContactInfo();
        String content = cur1.getString(cur1.getColumnIndex("body"));
        String number = cur1.getString(cur1.getColumnIndex("address"));
        long date = cur1.getLong(cur1.getColumnIndex("date"));
        String person = cur1.getString(cur1.getColumnIndex("person"));
        String protocol = cur1.getString(cur1.getColumnIndex("protocol"));
        String name = p.getName(number, c);
        String type = null;

        Calendar cal=Calendar.getInstance();
        cal.clear();
        cal.setTimeInMillis(date);

        String date_time=String.format("%1$te %1$tB %1$tY,%1$tI:%1$tM:%1$tS %1$Tp",cal);

        Log.i("INFO", content+" "+i);

        sms[i] = new SMS(type , name , number , date_time , content );
    }
} 
```

400-500 次迭代后 logcat 打印

```
09-19 20:28:31.148: E/liblog(3153): failed to call dumpstate
09-19 20:28:31.179: I/ActivityManager(3153): Process com.arslan (pid 1766) has died. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:02:32.750

许多其他进程正在设备上运行，并且由于读取 3000 条消息的漫长过程，它需要大量连续的 CPU 时间，这就是进程被杀死的原因。当我尝试通过线程阅读它时，它工作正常。

```
 final Cursor cur1 = c.getContentResolver().query(Uri.parse("content://sms/"), null, null, null, "date ASC");
    final int size = cur1.getCount();

    final int sleeptimer = size;

    final SMS [] sms = new SMS[size];

    Thread  myThread = new Thread()
    {
        public void run()
        {
            try
            {
                int currentwait = 0;
                int j=0;
                while(currentwait < sleeptimer)
                {
                    sleep(200);
                    currentwait+=200;
                    for(int i = 0 ; i < 200 ; i++)
                    {
                        if(!cur1.moveToNext())
                        {
                            break;
                        }
                        ContactInfo p = new ContactInfo();
                        String content = cur1.getString(cur1.getColumnIndex("body"));
                        String number = cur1.getString(cur1.getColumnIndex("address"));
                        long date = cur1.getLong(cur1.getColumnIndex("date"));
                        String protocol = cur1.getString(cur1.getColumnIndex("protocol"));
                        String name = p.getName(number, c);
                        String type = null;

                        Calendar cal=Calendar.getInstance();
                        cal.clear();
                        cal.setTimeInMillis(date);

                        String date_time=String.format("%1$te %1$tB %1$tY,%1$tI:%1$tM:%1$tS %1$Tp",cal);

                        Log.i("INFO", content+" "+j);

                        sms[j] = new SMS(type , name , number , date_time , content );
                        j++;
                    }
                }
            }
            catch(Exception e)
            {

            }
            finally{

            }
        }
    };
    myThread.start(); 
```

# functional-programming - Scheme：返回另一个内部过程的过程

> ID：12496482
> 
> 赞同：19
> 
> 时间：2012-09-19T14:06:23.557
> 
> 标签：functional-programming, lisp, scheme, sicp

这是我相信你们中的许多人都熟悉的 SICP 书中的内容。这是本书中的一个早期示例，但我觉得一个非常重要的概念，我还无法理解。这里是：

```
(define (cons x y)
 (define (dispatch m)
   (cond ((= m 0) x)
         ((= m 1) y)
         (else (error "Argument not 0 or 1 - CONS" m))))
 dispatch)
(define (car z) (z 0))
(define (cdr z) (z 1)) 
```

所以在这里我理解`car`并被`cdr`定义在 的范围内`cons`，并且我知道它们`z`分别将一些参数映射到 1 和 0 （参数`z`是 some `cons`）。但是假设我调用`(cons 3 4)`...如何评估参数 3 和 4，当我们立即进入这个内部过程时`dispatch`，它需要一些`m`我们尚未指定的参数？而且，也许更重要的是，返回 ' 有什么意义`dispatch`？我根本不明白那部分。任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-19T14:28:57.310

这是在 Scheme 中利用一等函数的最奇怪的（也可能是更精彩的）示例之一。Little Schemer 中也有类似的东西，这是我第一次看到它的地方，我记得为它挠了好几天头。让我看看我是否可以用有意义的方式解释它，但如果不清楚，我很抱歉。

我假设您了解原语`cons`,`car`和 ，`cdr`因为它们已经在 Scheme 中实现了，但只是为了提醒您：`cons`构造一个对，`car`选择该对的第一个组件并返回它，然后`cdr`选择第二个组件并返回它。以下是使用这些函数的简单示例：

```
> (cons 1 2)
(1 . 2)
> (car (cons 1 2))
1
> (cdr (cons 1 2))
2 
```

您粘贴的 , 和 的版本应该具有完全相同的`cons`行为`car`方式。`cdr`我会试着告诉你怎么做。

首先，`car`并`cdr`没有定义在`cons`. 在您的代码片段中，所有三个（`cons`、`car`和`cdr`）都在顶层定义。该函数`dispatch`是唯一在内部定义的函数`cons`。

该函数`cons`接受两个参数并返回一个参数的函数。重要的是这两个参数对内部函数是可见的`dispatch`，这就是返回的内容。一会儿我会讲到的。

正如我在提醒中所说，`cons`构造一对。这个版本`cons`应该做同样的事情，但是它返回一个函数！没关系，我们并不真正关心这对是如何在内存中实现或布局的，只要我们能得到第一个和第二个组件。

因此，对于这个基于函数的新对，我们需要能够调用`car`该对并将其作为参数传递，并获取第一个组件。在 的定义中`car`，这个参数被称为`z`。如果您要使用这些 new `cons`、`car`和`cdr`函数执行我上面的相同 REPL 会话，则参数`z`in`car`将绑定到基于函数的对，这就是`cons`返回的内容，即`dispatch`. 这很令人困惑，但只要仔细考虑一下，你就会明白。

基于 的实现`car`，它似乎采用一个参数的函数，并将其应用于数字`0`。所以它适用`dispatch`于`0`，从 的定义中可以看出`dispatch`，这就是我们想要的。内部与and`cond`进行比较并返回or 。在这种情况下，它返回，这是 的第一个参数，也就是该对的第一个组件！所以选择第一个组件，就像在 Scheme 中正常的原语一样。`m``0``1``x``y``x``cons``car`

如果您对 遵循相同的逻辑`cdr`，您会发现它的行为方式几乎相同，但将第二个参数返回给`cons`, `y`，这是该对的第二个组成部分。

有几件事可以帮助您更好地理解这一点。一种是回到第 1 章中对求值替换模型的描述。如果你仔细而细致地遵循这个替换模型，用一些非常简单的例子来使用这些函数，你会发现它们是有效的。

另一种不那么乏味的方法是尝试`dispatch`直接在 REPL 中使用该功能。下面，变量`p`被定义为引用`dispatch`返回的函数`cons`。

```
> (define p (cons 1 2))
#<function> ;; what the REPL prints here will be implementation specific
> (p 0)
1
> (p 1)
2 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-19T14:32:05.977

问题中的代码显示了如何重新定义`cons`创建[cons-cell](https://en.wikipedia.org/wiki/Cons)的原始过程（一对两个元素：汽车和 cdr），仅使用[闭包](https://en.wikipedia.org/wiki/Closure_%28computer_science%29)和消息调度。

该`dispatch`过程充当传递给`cons`:`x`和的参数的选择器`y`。如果收到消息，则返回`0`的第一个参数（单元格的）。同样，如果收到，则 返回的第二个参数（单元格的）。两个参数都存储在为该过程隐式定义的闭包中，该闭包捕获并作为调用.`cons``car``1``cons``cdr``dispatch``x``y``cons`

下一个重新定义`car`并`cdr`以此为基础：`car`实现为传递`0`给上述定义中返回的闭包`cdr`的过程，并实现为传递`1`给闭包的过程，在每种情况下最终返回作为传递的原始值`x`和`y`分别。

这个例子真正好的部分是它表明 cons-cell 是 Lisp 系统中最基本的*数据*单元，可以定义为*过程，因此模糊了**数据*和*过程*之间的区别。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-08-03T09:32:18.677

基本上，这就是“闭包/对象同构”。

外部函数（cons）是一个类构造函数。它返回一个对象，该对象是一个参数的函数，其中参数等同于方法的名称。在这种情况下，方法是 getter，因此它们评估为值。您可以轻松地在构造函数返回的对象中存储更多过程。

在这种情况下，选择作为方法名称的数字和在对象本身之外定义的含糖过程。你可以使用符号：

```
(define (cons x y)
  (lambda (method)
    (cond ((eq? method 'car) x)
          ((eq? method 'cdr) y)
          (else (error "unknown method"))))) 
```

在这种情况下，您所拥有的更类似于 OO：

```
# (define p (cons 1 2))
# (p 'car)
1
# (p 'cdr)
2 
```

# asp.net-mvc - 比较 Lambda 表达式中的日期

> ID：12496483
> 
> 赞同：1
> 
> 时间：2012-09-19T14:06:28.423
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, lambda

我正在尝试将日期与 SQL 中的日期时间字段进行比较。我试试这个：

```
Dim entry = db.Tbl_Hydrations.Where(Function(x) x.Hyd_Create_Date.Date = _date1) 
```

但是，我得到的错误是：

```
The specified type member 'Date' is not supported in LINQ to Entities. Only initializers, entity members, and entity navigation properties are supported. 
```

在线的：

```
If entry.Any Then 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:19:14.147

似乎 LINQ to Entities 不支持 Date 属性。您可以尝试在两个日期之间进行比较作为解决方法：

```
Dim nextDay As DateTime =  _date1.AddDays(1)

Dim entry = db.Tbl_Hydrations.Where(Function(x) x.Hyd_Create_Date >= _date1 AndAlso x.Hyd_Create_Date < nextDay) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:38:16.537

不确定语法（不是 vb man，但您可以使用[规范函数](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.createdatetime%28v=vs.100%29.aspx)）

```
Dim entry = db.Tbl_Hydrations
.Where(Function(x) EntityFunctions.CreateDateTime
(x.Hyd_Create_Date.Year, x.Hyd_Create_Date.Month, x.Hyd_Create_Date.Day, 0, 0, 0) = _date1); 
```

# c# - EF 4.4 不检测 AutoMapper 所做的更改

> ID：12496484
> 
> 赞同：3
> 
> 时间：2012-09-19T14:06:29.650
> 
> 标签：c#, .net, entity-framework, automapper

我正在为我的 webApi 使用存储库模式，并尝试使更新工作。这样做是从 mvc webapi 控制器接收“新”实体，并尝试更新现有对象

```
public void Update(TEntity entity)
        {

            var oldEntry = _context.Set<TEntity>().Find(entity.Id);

            oldEntry = Mapper.Map(entity, oldEntry);

            Console.WriteLine(oldEntry.ToString());

            _context.SaveChanges();

        } 
```

保存更改什么都不做。

如果我明确指定

```
oldEntry.SomeTextProperty = "TestText"; 
```

然后打电话

```
 _context.SaveChanges(); 
```

一切都很好。如何解决这个问题？或解决这个问题？也许有办法告诉 AutoMapper 调用属性设置器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:09:59.900

您必须在保存更改之前告诉 EF 您修改了实体。这应该在框架 4.5 中工作

```
_context.Set<TEntity>().AddOrUpdate(new[] {oldEntry}); 
```

或者也许在框架 4 中：

```
_context.Entry(oldEntry).State = System.Data.EntityState.Modified; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:10:37.153

胡乱猜测：

AutoMapper 使用反射来更新值，它在这方面做得很好。

但是它不会调用属性设置器中的任何内容，因此上下文不知道 AutoMapper 所做的更改，并且 SaveChanges() 不执行任何操作。

您可以尝试使用不使用反射的 EmitMapper。

# javascript - Node.js http.createServer如何获取错误

> ID：12496491
> 
> 赞同：19
> 
> 时间：2012-09-19T14:06:50.483
> 
> 标签：javascript, node.js

我是 node.js 的新手，正在尝试尝试基本的东西。

我的代码是这个

```
var http = require("http");
http.createServer(function(request, response) {
    response.writeHead(200, {"Content-Type": "text/plain"});
    response.write("Hello World");
    response.end();
}).listen(8888); 
```

这是问题 - 我如何在调用 createServer 时查看抛出的异常（或抛出的事件）？我尝试尝试/捕获，但它似乎不起作用。在模块的 API 中我找不到任何对它的引用。我之所以问，是因为我不小心在占用的端口（8888）上启动了一个服务器，而我得到的错误（在命令行中）是 Error : EDDRINUSE ，这很有用，但能够理解如何捕获错误会很好在节点中。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-22T23:59:57.333

您可以通过处理您正在创建的服务器上的错误事件来做到这一点。首先，得到 的结果`.createServer()`。

```
var server = http.createServer(function(request, response) { 
```

然后，您可以轻松处理错误：

```
server.on('error', function (e) {
  // Handle your error here
  console.log(e);
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T14:16:15.720

使用以下代码打印未捕获异常的堆栈跟踪。

```
process.on('uncaughtException', function( err ) {
            console.error(err.stack);
 }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T14:15:19.510

错误在 listen() 方法中发出。[API 文档](http://nodejs.org/api/)包含一个仅适用于您的情况的[示例。](http://nodejs.org/api/net.html#net_server_listen_port_host_backlog_listeninglistener)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T14:14:19.443

您可以使用

```
process.on('uncaughtException', function(e){
    console.log(e);
}); 
```

处理未捕获的异常。任何来自 Web 服务器的未处理异常都可以像这样被捕获。

# java - 升级到 WAS 7 后的 javax.servlet.UnavailableException

> ID：12496492
> 
> 赞同：4
> 
> 时间：2012-09-19T14:06:55.923
> 
> 标签：java, jakarta-ee, websphere-7, websphere-6.1

我已将我的应用程序从 WAS 6 迁移到 WAS 7。代码没有显示任何编译错误或缺少任何内容，但是当我尝试运行应用程序时，出现以下异常。

```
 [9/19/12 9:45:37:609 EDT] 00000009 extension     W com.ibm.wsspi.webcontainer.extension.WebExtensionProcessor createServletWrapper Servlet action is currently unavailable: SRVE0203E: Servlet [action]: com.ibm.services.tools.citrus.ctl.ActionServlet was found, but is missing another required class.
    SRVE0206E: This error typically implies that the servlet was originally compiled with classes which cannot be located by the server. 
```

所以我检查了 ffdc 异常跟踪，发现了以下异常。我已经包含了旧配置引用的所有 jar。

```
 [9/19/12 9:26:53:328 EDT]     FFDC Exception:javax.servlet.UnavailableException SourceId:com.ibm.ws.webcontainer.webapp.WebApp.handleError ProbeId:912 Reporter:com.ibm.ws.webcontainer.webapp.WebAppImpl@475c475c
javax.servlet.UnavailableException: SRVE0203E: Servlet [action]: com.ibm.services.tools.citrus.ctl.ActionServlet was found, but is missing another required class.
SRVE0206E: This error typically implies that the servlet was originally compiled with classes which cannot be located by the server.
SRVE0187E: Check your class path to ensure that all classes required by the servlet are present.SRVE0210I: This problem can be debugged by recompiling the servlet using only the classes in the application's runtime class path
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:534)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.forward(WebAppRequestDispatcher.java:354)
    at com.ibm.ws.webcontainer.webapp.WebApp.sendError(WebApp.java:3369)
    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3968)
    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:276)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:931)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
    at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604) 
```

我想了解这个问题的含义是什么，可以通过仅使用应用程序运行时类路径中的类重新编译 servlet 来调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:39:52.170

该错误表明您的 servlet 正在导入或依赖于升级后不再可用的类。由于异常没有命名缺少的类，WAS 建议您针对 WAS 7 库编译您的应用程序。如果你这样做，编译器会告诉你缺少哪个依赖类。您可能正在针对 WAS 6 或其他一些库进行编译，这就是错误延迟到运行时的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-12T09:39:04.850

按照以下步骤解决了该问题：

1.将JRE和服务器版本指向java 8。即Window -> Preferences -> Java -> Installed JREs下的版本和WAS服务器的运行环境应该相同。2.然后重建耳朵，在服务器上重新部署这些耳朵，之后我就可以运行应用程序了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-02T06:34:03.653

以下可能是相同问题的原因。

1.  使用的库/jar 与构建应用程序的 Java 版本不兼容。
2.  就我而言，我使用了两个utility.jar（对于其他可能是任何其他jar），一个是兼容的，一个是更高版本的。 **已解决：**删除更高版本的 jar 时。

# python - LaunchDaemon IPC 在 10.5+ 上通知多个 GUI 代理

> ID：12496494
> 
> 赞同：0
> 
> 时间：2012-09-19T14:07:04.523
> 
> 标签：python, objective-c, macos, cocoa

我有一个用 python 编写的 LaunchDaemon，它以 root 权限执行长时间且资源密集型的后台任务。当它工作时，它需要向多个 GUI 代理（每个登录用户一个）发送状态更新，我正在努力寻找合适的 IPC 机制。由于守护程序和代理在不同的引导上下文中运行，因此共享对象将不起作用。我不能让守护进程打开一个套接字，因为它无法长时间回复，并且客户端必须轮询更新。我想出的最好的办法是让每个代理打开自己的套接字，然后守护进程依次向每个代理写入，但这充其量似乎是不雅的。还有其他选择吗？哦，它必须在 Mac OS X 10.5 及更高版本上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:19:32.710

我最终让每个 GUI 代理在 /tmp 下创建一个数据报套接字，然后启动守护程序依次向每个代理发送一条消息并清理陈旧的套接字：

```
SOCKET_DIR = "/tmp"
SOCKET_NAME = "se.gu.it.dafgu_migration_status"

status_socket = None

def set_status_menu(status, message):
    global status_socket
    try:
        if status_socket is None:
            status_socket = socket.socket(socket.AF_UNIX, socket.SOCK_DGRAM)
        if status_socket is not None:
            message = serializePlist({
                "DAFGUMigrationStatus": status,
                "DAFGUMigrationMessage": message,
            })
            for item in os.listdir(SOCKET_DIR):
                if item.startswith(SOCKET_NAME):
                    socket_path = os.path.join(SOCKET_DIR, item)
                    logging.debug("Sending message to %s" % socket_path)
                    try:
                        status_socket.sendto(message, socket_path)
                    except socket.error, e:
                        if e[0] == errno.ECONNREFUSED:
                            logging.info("Removing stale socket %s" % socket_path)
                            os.unlink(socket_path)
                        else:
                            logging.warn("Sending to %s failed: %s" % (socket_path, e))
    except BaseException, e:
        logging.debug("Unhandled exception when updating status menu: %s" % e) 
```

完整的实现可以在 github 上找到：

*   [https://github.com/MagerValp/DAFGU-rsync-wrapper](https://github.com/MagerValp/DAFGU-rsync-wrapper)（后台进程）
*   [https://github.com/MagerValp/DAFGU-Migration-Status（GUI](https://github.com/MagerValp/DAFGU-Migration-Status)状态菜单）

# c# - 从 C# 上的 Active Directory 获取全名

> ID：12496508
> 
> 赞同：0
> 
> 时间：2012-09-19T14:08:05.007
> 
> 标签：c#, active-directory

我在从 Active Directory 获取用户的名字和姓氏（全名）时遇到问题。代码如下。

在我的本地运行项目没问题。我可以随心所欲地获取数据。将项目发布到远程服务器后，它不允许我获取名字和姓氏（全名），它只允许获取域名和用户名。我该如何解决？

```
private string GetNameSurname()
    {
        string[] retVal;
        //Pull the username out of the domain\user string.  
        retVal = Page.User.Identity.Name.Split(new string[] { @"\"},StringSplitOptions.RemoveEmptyEntries);

        DirectoryEntry userEntry = new DirectoryEntry("WinNT://" + retVal[0] + "/" + retVal[1]);
        string namesurname = (string)userEntry.Properties["fullname"].Value;
        //return retVal[1];
        //retVal[1] gives username. 
        //retVal[0] gives domain name
        return namesurname;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:15:20.583

您是否正在运行代码来测试同一用户？

您是否在开发人员中针对 AD 进行测试，Windows 本地帐户有一个全名字段（可选），但在 AD 中，这些字段的名称不同。另外，您是否在与同一版本的 AD 交谈。

根据[MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677980%28v=vs.85%29.aspx)，没有名为 Full Name 的字段，只有 First Name 和 Surname 和 Display Name。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:15:33.223

我认为您的问题与凭据有关。连接到活动目录时尝试添加管理员用户名和密码。

# php - 从 iOS 填写 PHP 表单

> ID：12496510
> 
> 赞同：0
> 
> 时间：2012-09-19T14:08:12.567
> 
> 标签：php, ios, forms, post

我有一个在 iPhone 上有 4 个文本输入的视图。同样在网上，我有一个 PHP 表单，它有相同的 4 个文本框。我想从 iPhone 获取输入数据并发布到 PHP 表单。是否可以？如果是，请解释我应该使用哪些类或框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:09:52.977

看看 ASIHTTPRequest ( [http://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CB4QFjAA&url=http%3A%2F%2Fallseeing-i.com%2FASIHTTPRequest% 2F&ei=-dFZULfKO7SU0QW-1YGoAw&usg=AFQjCNFpUZprrMAY9mTk0aGzEzwSG8L9sg](http://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CB4QFjAA&url=http%3A%2F%2Fallseeing-i.com%2FASIHTTPRequest%2F&ei=-dFZULfKO7SU0QW-1YGoAw&usg=AFQjCNFpUZprrMAY9mTk0aGzEzwSG8L9sg) )
我用它来将 POST 数据发送到我服务器上的 php 表单，它的工作原理就像一个魅力

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:14:42.380

向您的 PHP 脚本发送一个 POST 请求，并使用与表单输入同名的数据键。如果设置了值，则在您的 PHP 表单中显示该值。

```
<?php
    $somename = isset($_POST['somename']) ? $_POST['somename'] : '';
?>
<form method="post" action="">
    <input type="text" name="somename" value="<?php echo $somename; ?>" />
</form> 
```

显然不要回显原始 POST 数据，但这是您需要做的一般要点。

# java - 在 java 文件中显示 swt 选项卡

> ID：12496511
> 
> 赞同：0
> 
> 时间：2012-09-19T14:08:18.030
> 
> 标签：java, eclipse, swt, windowbuilder

我是 Eclipse 和 SWT 的新手，刚刚发现[WindowBuilder](http://www.eclipse.org/windowbuilder/)是一个很好的 UI 设计工具。

但是，当我下载示例电话簿并打开它时，它不显示正常

> 来源 | 设计 | 绑定

文件底部的选项卡。该文件被视为普通的 java 文件。当我创建 SWT 设计器文件时，我可以做些什么来让它们按原样显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:14:30.020

右键单击 Java 文件并选择*Open with...*以选择 WindowBuilder 编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:22:59.547

如果文件没有出现在windowbuilder中，那么文件的内容有问题，windowbuilder无法解析文件。我建议您在窗口构建器中创建一个新文件并查看。

# c# - 使用 LINQ 从其他两个列表填充单个列表

> ID：12496512
> 
> 赞同：1
> 
> 时间：2012-09-19T14:08:23.460
> 
> 标签：c#, linq, list

现在，我有 2 个列表（_pumpOneSpm 和 _pumpTwoSpm），它们是数据库查询的结果。现在，我一直在使用 LINQ 填充列表以供我使用以进行计算。与此类似的东西：

```
var spmOne = _pumpOneSpm.Where((t, i) => _date[i].Equals(date) &&
            DateTime.Compare(_time[i], DateTime.Parse(start)) > 0 && 
            DateTime.Compare(_time[i], DateTime.Parse(end)) < 0).ToList(); 
```

这很好，因为我一直在从一个列表中提取数据以将特定数据添加到另一个列表中。但是现在，我需要从两个列表中提取数据以添加到一个列表中。我很好奇是否有办法用 LINQ 做到这一点，或者我是否应该使用 for 循环进行迭代？这是我在 for 循环中得到的：

```
 for (var i = 0; i < _pumpOneSpm.Count; i++)
        {
            if (_date[i].Equals(date))
            {
                if (DateTime.Compare(_time[i], DateTime.Parse(start)) > 0)
                {
                    if (DateTime.Compare(_time[i], DateTime.Parse(end)) < 0)
                    {
                        spmOne.Add(_pumpOneSpm[i]);
                        spmOne.Add(_pumpTwoSpm[i]);
                    }
                }
            }
        } 
```

这有效，并且可以满足我的要求。但我只是想让它更有效率和更快。我可以为每个列表使用类似于第一个代码块的两行，但这意味着我要迭代两次。所以，重申我的问题，是否可以使用 LINQ 命令同时从两个列表中提取数据以填充另一个列表，或者我应该坚持我的 for 循环？感谢您的任何帮助。

**编辑**

我没有提到，使用这些步骤的函数的目的是微调 _pumpOneSpm 和 _pumpTwoSpm 的 MAX。不是每个的最大值，而是它们之间的最大值。因此，最初我将它们添加到一个列表中，然后调用 spmOne.Max()。但是对于像上面这样的两个 LINQ 查询，我正在运行一个 if 语句来比较两个最大值，然后返回两者中的较大者。所以，从技术上讲，它们不需要在一个列表中，我只是认为如果它们是的话会更容易处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:10:54.300

> 所以，重申我的问题，是否可以使用 LINQ 命令同时从两个列表中提取数据以填充另一个列表，或者我应该坚持我的 for 循环？

合并列表：

```
var mergedList = list1.Union(list2).ToList(); 
```

如果需要，可以选择过滤：

```
var filtered = mergedList.Where( p => ... filter ... ); 
```

对于 Max：

```
var max = filtered.Max(); 
```

笔记：

正如 OP 所说，订单不需要不重复，所以 Union 就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T14:22:28.960

所以最简单的方法是这样的：

```
var resultList = list1.Concat(list2).ToList(); 
```

请注意，这将与您的 for 循环略有不同（项目的顺序不会相同）。它将包含一个列表中的所有项目，然后是另一个列表中的所有项目，而不是第一个列表中的第一个，第二个中的第一个，等等。如果这很重要，您仍然可以使用 LINQ 来完成，但这需要一些额外的方法调用。

您提到了性能；值得注意的是，在性能方面，你不会比你的`for`循环好得多。你可以得到更短的代码；更具可读性的代码，其性能*大致相同*。尽管就运行速度而言，根本没有进一步改进的空间。

还值得注意的是，您可以将这两种方法结合起来；这甚至不是一个坏主意。您可以使用 LINQ 过滤两个输入序列（使用`Where`），然后`foreach`将结果添加到列表中（或使用`AddRange`）。

```
var query1 = _pumpOneSpm.Where((t, i) => _date[i].Equals(date) &&
            DateTime.Compare(_time[i], DateTime.Parse(start)) > 0 && 
            DateTime.Compare(_time[i], DateTime.Parse(end)) < 0);
var query2 = ...
List<T> results = new List<T>(query1);
results.AddRange(query2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:12:02.960

您可以使用 SelectMany 方法

[http://msdn.microsoft.com/en-us/library/bb548748.aspx](http://msdn.microsoft.com/en-us/library/bb548748.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T15:21:51.843

[您可以使用Enumerable.Range](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)实现与 for 循环类似的功能。 [SelectMany](http://msdn.microsoft.com/en-us/library/bb534336.aspx)然后允许您在每次迭代中添加多个项目，然后展平生成的序列。

```
spmOne = Enumerable
             .Range(0, _pumpOneSpm.Count)
             .Where(index => _date[index].Equals(date) &&
                     DateTime.Compare(_time[index], DateTime.Parse(start)) > 0 &&
                     DateTime.Compare(_time[index], DateTime.Parse(end)) < 0)
             .SelectMany(index => new [] { _pumpOneSpm[index], _pumpTwoSpm[index] })
             .ToList(); 
```

这是查询语法版本：

```
spmOne = (from index in Enumerable.Range(0, _pumpOneSpm.Count)
          where _date[index].Equals(date) &&
                DateTime.Compare(_time[index], DateTime.Parse(start)) > 0 &&
                DateTime.Compare(_time[index], DateTime.Parse(end)) < 0
          from pumpSpm in new [] { _pumpOneSpm[index], _pumpTwoSpm[index] }
          select pumpSpm).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T15:57:09.610

如果您想避免使用索引，您可以将所有内容[压缩](http://msdn.microsoft.com/en-us/library/dd267698.aspx)在一起。

```
spmOne = _pumpOneSpm
          .Zip(_pumpTwoSpm, (pump1, pump2) => new { pump1, pump2 } )
          .Zip(_date, (x, pumpDate) => new { x.pump1, x.pump2, date = pumpDate })
          .Zip(_time, (x, time) => new { x.pump1, x.pump2, x.date, time })
          .Where(x => x.date.Equals(date) &&
                      DateTime.Compare(x.time, DateTime.Parse(start)) > 0 &&
                      DateTime.Compare(x.time, DateTime.Parse(end)) < 0)
          .SelectMany(x => new [] { x.pump1, x.pump2 })
          .ToList(); 
```

功能上有一个小的区别：如果任何序列比 短`_pumpOneSpm`，则生成的序列将是最短序列的长度，并且不会抛出关于索引超出范围的异常。

# vb.net - 使用数据集保存记录

> ID：12496514
> 
> 赞同：0
> 
> 时间：2012-09-19T14:08:29.307
> 
> 标签：vb.net, winforms, dataset

我想使用数据集在数据库中保存一条记录，但我的数据没有提交到我的数据库中。

我的代码可以在下面查看：

```
Dim mydataset1 As New MyDataSet

Dim row As DataRow = mydataset1.Tables("testtable").NewRow()

With row
    .Item("name") = "Segun Omotayo"
    .Item("address") = "Abuja"
End With

mydataset1.Tables("testtable").Rows.Add(row) 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:23:07.653

A `DataSet`/`DataTable`是数据库的离线/内存表示。如果要更新数据库，则需要使用`DataAdapter`.

例如（假设您使用的是 MS-Sql-Server）：

```
Public Function UpdateDataSet(dataSet As DataSet) As Int32
    Using con = New SqlConnection(My.Settings.SqlConnection)
        Dim sql = "INSERT INTO TUser(Name,Address)VALUES(@Name,@Address)"
        Using cmd = New SqlCommand(sql, con)
            cmd.Parameters.Add(New SqlParameter("@Name", SqlDbType.VarChar))
            cmd.Parameters.Add(New SqlParameter("@Address", SqlDbType.VarChar))
            Using da = New SqlDataAdapter()
                da.InsertCommand = cmd
                con.Open()
                Dim rowCount = da.Update(dataSet)
                Return rowCount
            End Using
        End Using
    End Using
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:33:42.930

自从我编写任何 VB.NET 或使用数据适配器/数据集/数据表以来，我可能会在这里生疏，但我认为如果您决定采用这条路线，您将需要这样的代码：

```
Dim connection As New SqlConnection("#####YourConnectionString#####")
connection.Open()

Dim adapter As New SqlDataAdapter("SELECT * FROM testtable", connection)

' For the line below to work, you must have a primary key field in "testtable"
Dim builder As New SqlCommandBuilder(adapter)

Dim testtable As New DataTable("testtable")

adapter.Fill(testtable)

Dim row As DataRow = testtable.NewRow()

With row
    .Item("name") = "Segun Omotayo"
    .Item("address") = "Abuja"
End With

testtable.Rows.Add(row)

adapter.Update(testtable)

connection.Close() 
```

# c# - 实体框架，离线使用策略？

> ID：12496519
> 
> 赞同：0
> 
> 时间：2012-09-19T14:08:48.873
> 
> 标签：c#, winforms, serialization, entity-framework-4

我目前正在学习 EF，并且遇到了一个数据应该在在线和离线模式下使用的场景。

假设用户必须在连接时首先使用系统才能获取离线使用的数据。

我考虑过序列化查询，但 IQueryable/ObjectQuery 未标记为可序列化。

我如何才能在本地存储一些查询的结果，然后在离线模式下恢复它们，以便用户可以继续使用该应用程序？我可以花几天时间研究这个，但我希望有人能指出我正确的方向。

*编辑*

值得注意的是，主 SQL Server 实例是一个共享服务器，安装的功能非常少。例如，未安装复制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:20:04.653

假设您使用的是 SQL Server，您可以查看 SQL Server compact。

[http://msdn.microsoft.com/en-us/data/ff687142.aspx](http://msdn.microsoft.com/en-us/data/ff687142.aspx)

您可以将数据从主数据库复制到本地存储的 CE 数据库中，然后切换到该数据库以进行脱机。

# javascript - 如何在烧瓶模板中解码 url 字符串

> ID：12496526
> 
> 赞同：6
> 
> 时间：2012-09-19T14:09:08.047
> 
> 标签：javascript, python, flask, jinja2

我正在使用烧瓶。

在我的模板中，我用它来编码一个字符串。

```
encodeURIComponent(mytag) 
```

现在我想在另一个模板中解码。
字符串的样子在哪里。

```
%26lt%3B!--Afff%20Tracking%20Tag--%26gt%3B%0A%26lt%3Bimg%20src%3D%22http%3A%2F%2Fcm.g.doubleclick.net%2Fpixel%3F%0Agggg_nid%3Dhff%26gggg_cm%26avid%3David3966173574%26campaign_id%3Dundefined%22%20%2F%26gt%3B 
```

在模板中如何解码字符串？

```
{% for crid, object in tag_handler.iteritems() %}
    <script>var x = decodeURI("{{object['tag_display']}}"); alert(x);</script>
        <div id="tagBox" style="display: block;width: 700px">
            <pre class="prettyprint">
                <code class="language-html">    
                    {{object['tag_display']}}
                </code>
            </pre>
       </div>

{% endfor %} 
```

我正在使用 google pretty 来显示字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-23T00:12:33.417

你可以使用 Python 的 urllib。有几个选项，unquote 和 unquote_plus。有关说明，请参见[https://unspecified.wordpress.com/2008/05/24/uri-encoding/](https://unspecified.wordpress.com/2008/05/24/uri-encoding/)。简而言之，“如果您的 URL 使用 '+' 作为空格，请选择 unquote_plus，并记住 HTML 表单会自动执行此操作。”

```
from urllib import unquote_plus
@app.route('/foo', methods=['POST'])
def foo():
    mytag = request.form['params']
    print unquote_plus(mytag) 
```

# wpf - 错误模板设计

> ID：12496527
> 
> 赞同：11
> 
> 时间：2012-09-19T14:09:08.873
> 
> 标签：wpf, xaml

似乎我在此站点上阅读了有关此问题的另一个问题/答案，但我不记得答案是什么，现在我找不到原始帖子。

我不喜欢 WPF 中的默认错误模板。我了解如何更改此错误模板。但是，如果我在文本框的末尾添加一些内容，则文本框的大小不会改变，并且添加的内容将（可能）被剪裁。在这种情况下，如何更改文本框（我相信正确的术语是装饰元素），以便没有任何内容被剪裁？

这是错误模板的 XAML：

```
<Style TargetType="{x:Type TextBox}">
  <Setter Property="Validation.ErrorTemplate">
    <Setter.Value>
      <ControlTemplate>
        <StackPanel>
          <AdornedElementPlaceholder />
          <TextBlock Foreground="Red" Text="Error..." />
        </StackPanel>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

这是表单中几个文本框的 XAML：

```
<StackPanel>
  <TextBox Text="{Binding...}" />
  <TextBox />
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T13:33:39.297

这是一个改编自 Josh Smith 的文章[Binding to (Validation.Errors)[0] without Creating Debug Spew](https://i.stack.imgur.com/q1Aeu.png)的解决方案。

诀窍是定义 a`DataTemplate`来呈现`ValidationError`对象，然后使用 a`ContentPresenter`来显示错误消息。如果没有错误，则不会显示 ContentPresenter。

下面，我分享了我创建的示例应用程序的代码。

![没有错误](../Images/8b157f40fcaafb576091214b472dbae8.png) ![有错误](../Images/333df98d2715cb563d6a92af61d96816.png)

这是 XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        SizeToContent="WidthAndHeight"
        Title="MainWindow">
    <StackPanel Margin="5">
        <StackPanel.Resources>
            <DataTemplate DataType="{x:Type ValidationError}">
                <TextBlock Text="{Binding ErrorContent}" Foreground="White" Background="Red" VerticalAlignment="Center" FontWeight="Bold"/>
            </DataTemplate>
        </StackPanel.Resources>
        <TextBox Name="TextBox1" Text="{Binding Text1, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"/>
        <ContentPresenter Content="{Binding ElementName= TextBox1, Path=(Validation.Errors).CurrentItem}" HorizontalAlignment="Left"/>

        <TextBox Name="TextBox2" Text="{Binding Text2, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"/>
        <ContentPresenter Content="{Binding ElementName= TextBox2, Path=(Validation.Errors).CurrentItem}" HorizontalAlignment="Left"/>
        <Button Content="Validate" Click="Button_Click"/>
    </StackPanel>
</Window> 
```

文件背后的代码：

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        private ViewModel _ViewModel = null;

        public MainWindow()
        {
            InitializeComponent();
            _ViewModel = new ViewModel();
            DataContext = _ViewModel;
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            _ViewModel.Validate = true;
            _ViewModel.OnPropertyChanged("Text1");
            _ViewModel.OnPropertyChanged("Text2");
        }
    }
} 
```

视图模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;

namespace WpfApplication1
{
    public class ViewModel : INotifyPropertyChanged, IDataErrorInfo
    {
        private string _Text1;
        public string Text1
        {
            get { return _Text1; }
            set
            {
                _Text1 = value;
                OnPropertyChanged("Text1");
            }
        }

        private string _Text2;
        public string Text2
        {
            get { return _Text2; }
            set
            {
                _Text2 = value;
                OnPropertyChanged("Text2");
            }
        }

        public bool Validate { get; set; }

        #region INotifyPropertyChanged Implemenation
        public event PropertyChangedEventHandler PropertyChanged;

        public void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
        #endregion

        #region IDataErrorInfo Implementation
        public string Error
        {
            get { return null; }
        }

        public string this[string columnName]
        {
            get
            {
                string errorMessage = string.Empty;
                if (Validate)
                {
                    switch (columnName)
                    {
                        case "Text1":
                            if (Text1 == null)
                                errorMessage = "Text1 is mandatory.";
                            else if (Text1.Trim() == string.Empty)
                                errorMessage = "Text1 is not valid.";
                            break;
                        case "Text2":
                            if (Text2 == null)
                                errorMessage = "Text2 is mandatory.";
                            else if (Text2.Trim() == string.Empty)
                                errorMessage = "Text2 is not valid.";
                            break;
                    }
                }
                return errorMessage;
            }
        }
        #endregion
    }
} 
```

# python - 逐列排序 NumPy 浮点数组

> ID：12496531
> 
> 赞同：9
> 
> 时间：2012-09-19T14:09:22.740
> 
> 标签：python, numpy

按照[这个技巧](https://stackoverflow.com/questions/7989722/finding-unique-points-in-numpy-array)来获取 NumPy 数组的唯一条目，我现在有一个双列数组，基本上是成对的，第一个元素在 [0.9:0.02:1.1] 范围内，第二个元素在 [1.5:0.1:2.0 范围内]。让我们称之为`A`. 目前，它完全未排序，即

```
In [111]: A
Out[111]: 
array([[ 1.1 ,  1.9 ],
       [ 1.06,  1.9 ],
       [ 1.08,  1.9 ],
       [ 1.08,  1.6 ],
       [ 0.9 ,  1.8 ],
       ...
       [ 1.04,  1.6 ],
       [ 0.96,  2\.  ],
       [ 0.94,  2\.  ],
       [ 0.98,  1.9 ]]) 
```

我想对其进行排序，以便每一行首先在第二列中增加，然后在第一列中增加。IE

```
array([[ 0.9 ,  1.5 ],
       [ 0.9 ,  1.6 ],
       [ 0.9 ,  1.7 ],
       [ 0.9 ,  1.9 ],
       [ 0.9 ,  1.9 ],
       [ 0.9 ,  2\.  ],
       [ 0.92,  1.5 ],
       ...
       [ 1.08,  2\.  ],
       [ 1.1 ,  1.5 ],
       [ 1.1 ,  1.6 ],
       [ 1.1 ,  1.7 ],
       [ 1.1 ,  1.8 ],
       [ 1.1 ,  1.9 ],
       [ 1.1 ,  2\.  ]]) 
```

但我找不到同时提供两者的排序算法。正如[这里](https://stackoverflow.com/questions/2828059/sorting-arrays-in-numpy-by-column)所建议的，我已经尝试过`A[A[:,0].argsort()]`and `A[A[:,1].argsort()]`，但它们每列只排序一列。我也尝试过同时应用两者，但发生了同样的事情。

如果我错过了一些简单的东西，我深表歉意，但我已经找了一段时间了......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T14:13:12.180

[`numpy.lexsort`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.lexsort.html#numpy.lexsort)将在这里工作：

```
A[np.lexsort(A.T)] 
```

您需要`A`在将其传递给 lexsort 之前进行转置，因为当传递一个二维数组时，它期望按行排序（最后一行、倒数第二行等）。

另一种可能更清晰的方法是显式传递列：

```
A[np.lexsort((A[:, 0], A[:, 1]))] 
```

您仍然需要记住 lexsort 首先按最后一个键排序（这可能有一些很好的理由；这与对连续键执行稳定排序相同）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T14:13:37.250

以下将起作用，但可能有更快的方法：

```
A = np.array(sorted(A,key=tuple)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T14:28:31.950

只需将整个事物（包括独特的部分）替换为`A`2D：

```
A = np.ascontiguousarray(A) # just to make sure...
A = A.view([('', A.dtype)] * A.shape[1])

A = np.unique(A)
# And if you want the old view:
A = A.view(A.dtype[0]).reshape(-1,len(A.dtype)) 
```

我希望您不要使用`set`链接问题中的解决方案，除非您不太关心速度。`lexsort`等通常很好，但这里没有必要，因为默认排序会做（如果它是一个recarray ）

* * *

编辑：不同的视图（结果几乎相同），但可能更优雅一点，因为不需要重塑：

```
A = A.view([('', A.dtype, A.shape[0])])
A = np.unique(A)
# And to go back
A = A.view(A.dtype[0].base) 
```

# android - XYBOARDS上通过adb转wifi for android 4.0版本

> ID：12496534
> 
> 赞同：0
> 
> 时间：2012-09-19T14:09:35.193
> 
> 标签：android, shell, adb, android-wifi

如何使用android 4.0版在摩托罗拉XYboard上通过adb打开WIFI

我已经尝试过命令

```
adb shell am start -a android.intent.action.MAIN -n com.android.settings/.wifi.WifiSettings 
adb shell input keyevent 20 & adb shell input keyevent 23 
```

但它只需要 wifi 设置，但 keyevent 20 没有进入“开/关”按钮。在新的4.0版本的android中，我们必须点击WIFI旁边的ON/OFF按钮来打开它。如何使用 adb 单击该按钮

有没有一个命令可以像蓝牙一样直接打开wifi，我可以使用

```
adb shell am start -a android.bluetooth.adapter.action.REQUEST_ENABLE 
```

用于打开蓝牙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T04:16:17.867

请检查您手机的 keyevent 代码，keyevents 20 和 23 用于 Droid X，其他 droid X keyEvents 在这篇文章中列出：[ADB Shell Input Events](https://stackoverflow.com/questions/7789826/adb-shell-input-events)

因此，在您的设备上，键码事件可能会略有不同......

# wpf - 如何在 3d max 主窗口中制作可调整大小的（来自 conner）布局

> ID：12496540
> 
> 赞同：0
> 
> 时间：2012-09-19T14:09:52.977
> 
> 标签：wpf, resize, grid, controls, gridsplitter

我有 WPF 原型应用程序，其中包括 1-4 个其他控件（WebBrowser 控件），例如图片 A 需要调整控件（使用 facebook）的大小，将其缩小并减小到窗口中心的大小。如果此控件的大小小于“minSize”，则应将其隐藏\关闭。其他布局应填充空白区域。 ![在此处输入图像描述](../Images/9f2598d00c49813d2901d10d708a384e.png)

我不知道我应该从哪个控件开始我的实验。没有人做正确的工作。我尝试了 Grid，但无法利用单元格的 conner 来调整 webBrowser 控件的大小。GridSplitter 仅适用于两个面板，不会让我占据单元格的角落。一些开发人员说自定义控件创建...

# php - Wordpress 分页功能可以用于其他对象（如 WP_Users）吗？

> ID：12496544
> 
> 赞同：0
> 
> 时间：2012-09-19T14:10:10.837
> 
> 标签：php, wordpress, pagination

我正在构建一个页面，该页面将根据提供的标准显示用户列表。我的计划是构建一个表单，然后使用提交的值做一个`get_users()`然后显示列表。

我还希望能够对返回的列表进行分页，因为在某些情况下结果可能很长（**300+**）。我在**Wordpress**中使用正常的帖子/页面分页的经验是它有点挑剔。而且我不知道如何与用户一起尝试。

这可能吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:12:25.123

如果您可以使用插件，则可以使用[WordPress Users](http://wordpress.org/extend/plugins/wordpress-users/)。如果你想自己做，你必须提出一个更具体的问题。

# matlab - MATLAB 中的内存泄漏 > MEX 文件 > 托管 DLL

> ID：12496549
> 
> 赞同：3
> 
> 时间：2012-09-19T14:10:31.163
> 
> 标签：matlab, memory-leaks, c++-cli, mex

我的[MEX 文件](http://en.wikipedia.org/wiki/MEX_file)是用 C++/CLI 编写的，并调用了一个用 C# 编写的 DLL。

当 gcnew 一个对象时，当 mexFunction 返回时它不应该被垃圾收集吗？它的引用应该会丢失，但似乎没有任何东西被垃圾收集......每次调用 mex 函数都会增加[MATLAB](http://en.wikipedia.org/wiki/MATLAB)的内存分配（不，内存不用于 MATLAB 变量）。

我已经尝试过创建一个范围很窄的大型虚拟值，并且在单步执行 MEX 文件时，我可以看到分配和释放的内存。但在 mexFunction =(

我试图在析构函数和终结器中删除它，但我无法让它进行垃圾收集。返回 MATLAB 时如何释放托管内存？

我认为外部 DLL 文件管理器不是问题。为了说明，我创建了这个愚蠢的 mexFunction：

```
public ref class Foo
{
    public:
        Foo()
        {
            Dictionary<int,String^>^ bar = gcnew Dictionary<int,String^>;
            for(int i=0;i<10000000;i++)
            {
                bar->Add(i, "abcdefghijklmnopqrstuvxyz");
            }
        }
};

void mexFunction(int nlhs, mxArray* plhs[], int nrhs, mxArray* prhs[])
{
    Foo^ test = gcnew Foo();
} 
```

这使 MATLAB 的内存增加了大约 300 MB，尽管后续调用不会像我的真实 MEX 文件那样进一步增加内存。

编辑：

我回答了我自己的问题，罪魁祸首是**mxArrayToString**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:14:03.600

垃圾收集将内存标记为在 .NET 堆内可用。它不会缩小 .NET 堆（这会使内存对其他进程可用，而地址空间对进程中的非 .NET 代码可用）。

它明确记录了大对象堆永远不会缩小，一个包含 1000 万个条目的字典可能大到足以进入 LOH。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T09:09:10.550

我发现了问题，结果它毕竟与 .net 无关……对不起那个红鲱鱼

由于我没有使用 new、malloc 或 mxMalloc，我错误地认为我所有的非托管内存都在堆栈中，并在 mexFunction 结束时被清理。

但是，mxArrayToString 不会像 mxGetData 和其他 mx* 函数那样返回指向 MATLAB 数据的指针。它将数据复制到堆上，并且必须调用 mxFree 来释放它。我使用 mxArrayToString 作为输入来创建 System::String^，唯一需要的更改是保存临时字符指针，将其用于 String^ 构造函数，然后 mxFree。

So once again for SEO: The pointer from **mxArrayToString** needs to be **mxFree'd**!

# java - Java 持有价格的最佳类型

> ID：12496555
> 
> 赞同：19
> 
> 时间：2012-09-19T14:10:44.770
> 
> 标签：java, types

> **可能的重复：**
> [用 Java 表示货币价值](https://stackoverflow.com/questions/285680/representing-monetary-values-in-java)

哪种 java 类型适合处理价格价值？请告诉我为什么？

我不知道这只是一个问题:)

我只知道这种类型一定是“安全的”。因为如果我们创建商店应用程序或类似的想法。

附言。我需要**最佳实践**

以及它如何出现在数据库中？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-19T14:12:59.387

处理货币时应该使用[BigDecimal 。](http://www.javaworld.com/javaworld/jw-06-2001/jw-0601-cents.html)Java 的本机浮点类型存在与其他语言相同的精度问题，因为某些小数不能准确地表示为浮点数。即使它不是特定于 java 的，[这是一篇很好的文章](http://www.mikeash.com/pyblog/friday-qa-2011-01-04-practical-floating-point.html)，它描述了将十进制值表示为浮点数的复杂性。

通常，应用程序中的瞬态值应始终使用 BigDecimal，仅在必须时转换为浮点数（用于持久性或向用户显示数据等）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-19T14:14:43.880

您关心的最小分母的整数（或长整数）（美元和欧元的美分）

这是因为计算机上的浮点对于十进制值本质上是不准确的（0.1+0.2 ！= 0.3）

您只需要在 UI 中的美分和主要美元之间进行转换，而域以美分计算所有内容

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-19T14:14:19.260

就个人而言，我会使用`BigDecimal`（我的公司也是如此！）。[由于浮点值在系统中的存储](http://en.wikipedia.org/wiki/Floating_point)方式，我会考虑`float`或`double`提出不好的建议，并且可能会丢失精度（在处理资金时您当然不希望出现这种情况）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-19T14:17:07.590

如果您正在构建金融系统，我建议您创建或使用自己的 Java 类来表示货币金额。

至于用于保存货币金额的数据类型，long 或 BigDecimal。

这是一个示例[Money 类](http://www.javapractices.com/topic/TopicAction.do?Id=13)，它显示了处理货币金额时所需的方法类型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T14:18:35.797

如果您对结果`double`进行合理的舍入，效果会非常好，不仅是最快的，而且是最容易编写的。这可以毫无错误地代表高达 70 万亿美元的资金。不要使用`float`，因为这最多只能代表大约 10,000 美元而没有错误。

如果您不知道使用什么合理的舍入，`BigDecimal`或者`long`美分可能是更好的选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T14:13:43.240

您需要使用[BigDecimal](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)类。

# mysql - DATE_ADD MySQL 函数选择与日期条件

> ID：12496557
> 
> 赞同：1
> 
> 时间：2012-09-19T14:10:52.550
> 
> 标签：mysql, sql, date

当我尝试这个查询时：

```
SELECT DATE_ADD(upg_date, INTERVAL 30 DAY) AS 'upgrade_date'
WHERE id=12345 
```

它返回给我正确值的记录，但是当我添加这样的条件时：

```
SELECT DATE_ADD(upg_date, INTERVAL 30 DAY) AS 'upgrade_date'
WHERE id=12345
AND 'upgrade_date' < NOW() 
```

它返回一个空的结果集。但价值`upgrade_date`低于当前日期。

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:18:19.280

您**不能`alias`**在`where`子句中使用 the。它应该是原始列名。

```
SELECT DATE_ADD(upg_date, INTERVAL 30 DAY) AS upgrade_date
WHERE id=12345 AND 
      upg_date < NOW() 
```

来自**[MySQL 手册](http://dev.mysql.com/doc/refman/5.0/en/select.html)**：

**不允许在 WHERE 子句中引用列别名，因为在执行 WHERE 子句时可能尚未确定列值。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:12:25.953

不要在 WHERE 子句和别名上使用引号

```
SELECT DATE_ADD(upg_date, INTERVAL 30 DAY) AS upgrade_date
                                              ^^^^^^^^^^^^
WHERE id=12345
AND upgrade_date < NOW()
    ^^^^^^^^^^^^ 
```

引号将 upgrade_date 转换为字符串值，而不是您之前创建的字段别名。

# wordpress - 托管转移后不会加载 Wordpress 页面

> ID：12496564
> 
> 赞同：2
> 
> 时间：2012-09-19T14:11:17.080
> 
> 标签：wordpress

我刚刚将一个 wordpress 网站转移到另一个域。
对于转移，我做了以下步骤：

*   复制数据库并更改域名（http://olddomain.com 到[http://newdomain.com](http://newdomain.com)）
*   在新主机上导入数据库（通过 phpMyadmin）
*   更改 wp-config 以匹配新的数据库设置
*   上传所有wp文件

所以主页可以工作，但我无法访问其他页面。但是，它们出现在我的管理页面中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:17:29.780

如果您使用的是永久链接，则需要在传输后重新生成它们。转到`Settings → Permalinks`您的管理面板并选择您要使用的永久链接选项，然后单击`Save Changes`。这将为您的新域重新生成 .htaccess 文件的永久链接部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T14:18:59.327

我过去这样做并为我工作的方式：

```
1- Export db from phpMyAdmin, then replace in the .sql file all references to old domain.
2- Imported db on new host (via phpMyadmin)
3- Changed wp-config to match new db settings
4- Uploaded all wp files
5- Regenerate .htaccess file, if you are using permalinks. 
   (you can do this the way @Riboflavin suggests) 
```

此外，您还可以在此处找到一些可以提供帮助的其他信息：

[http://codex.wordpress.org/Changing_The_Site_URL](http://codex.wordpress.org/Changing_The_Site_URL)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T14:14:22.677

其他页面的链接是否仍指向旧域？

如果是这样，您可以尝试使用[Velvet Blues Update URLs 插件](http://wordpress.org/extend/plugins/velvet-blues-update-urls/)来更新您网站中的所有链接。

我过去曾成功使用过此功能，但建议您在自己尝试之前完全备份数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-09T14:49:03.510

根据我的经验，最快的转移是通过 cpanel 使用 Fantasyo 或快速安装 wordpress 的东西。过程如下：

1.  通过 Fantasy 或类似应用程序在新主机上安装 wordpress
2.  删除安装目录中除 wp-config 之外的所有内容
3.  从旧的 wordpress 数据中复制所有内容，除了 wp-config
4.  将所有数据粘贴/传输到新主机
5.  现在导出旧数据库并删除新数据库上的表，然后从旧数据库导入
6.  将数据库中的站点 URL 更改为新的

    * * *

使用fantasyo 有助于快速设置数据库和wp-config。无需手动操作，浪费时间。只要确保留下已安装的，不要转移旧的。

整个过程大约需要2-3分钟，我认为一旦你得到它是最快的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-19T19:15:39.713

您只需要通过重新生成新的 .htaccess 来调整它即可转到 WordPress 仪表板

> 设置 > 固定链接

然后保存修改

如果它可以工作，那么你需要手动更改它：你会`.htaccess`在永久链接页面中保存修改后找到内容复制内容并`.htaccess`在根目录中创建文件

# android - 在 GCM onMessage() 中显示对话框

> ID：12496571
> 
> 赞同：3
> 
> 时间：2012-09-19T14:11:44.207
> 
> 标签：android, dialog, google-cloud-messaging, android-context

我正在我的应用程序中实施 GCM（谷歌云消息传递）。

我像在 Google 教程中一样设置它，并且到目前为止它工作正常。

`onMessage`当`GCMIntentService`被调用时，我会在通知栏中显示通知。

现在我有一个方法可以告诉我应用程序是否在前台。当应用程序处于后台时，它会毫无问题地在栏中显示通知。

但是我怎么能向用户显示一个对话框呢？

当我打电话时：

```
AlertDialog.Builder builder = new AlertDialog.Builder(context); 
```

其中 context 是来自 的给定上下文`onMessage()`，我当然会出现这个错误：

> _Notification.showPopUp() 错误：android.view.WindowManager$BadTokenException：无法添加窗口 -- 令牌 null 不适用于应用程序

所以我尝试用 替换上下文`MainActivity.this`，为此我将它保存在一个静态变量中；但是当我现在运行它时，什么也没有发生，没有错误，没有对话框出现。

我的对话框代码：

```
private static AlertDialog.Builder myAlertDialog;

private static void showPopUp(Context context,String kind, String resource_name, Integer resource_id)
{
    AlertDialog.Builder builder = new AlertDialog.Builder(context);
builder.setMessage("Are you sure you want to exit?")
        .setCancelable(false)
        .setPositiveButton("Yes", new DialogInterface.OnClickListener() 
        {
        public void onClick(DialogInterface dialog, int id) 
            {
            }
        })
        .setNegativeButton("No", new DialogInterface.OnClickListener() 
        {
            public void onClick(DialogInterface dialog, int id) 
            {
                dialog.cancel();
            }
        });

    AlertDialog alert = builder.create();
alert.show();

Log.e("TEST","alert.show()");
} 
```

最后一个日志：alert.show() 显示在 logcat 中，但没有错误。

规格：在设备上运行 (Galaxy S2) Android 4.0.3

有人可以告诉我我的代码有什么问题吗，或者有人知道一些解决方法吗？

编辑：

我保存的部分`MainActivity.this`：

```
private static Context context_forshowingPopUp = null; 
```

创建

```
//Set the context for showing a popup View
_Notification.setContext_forshowingPopUp(this);

AlertDialog.Builder builder = new AlertDialog.Builder(getContext_forshowingPopUp());

public static Context getContext_forshowingPopUp() 
{
    return context_forshowingPopUp;
}

public static void setContext_forshowingPopUp(Context context_forshowingPopUp) 
{
    _Notification.context_forshowingPopUp = context_forshowingPopUp;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:20:22.697

在构建 Alertdialog 时，您必须使用 YourCurrentActivity.this 作为上下文。你可以像下面这样解决。

头等舱：

```
 public class Config{
     public static Context context;

    } 
```

当您的活动创建时，只需设置 Config.contex

```
 public class MyActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
      Config.context=this;
    ...}
    //other stuffs

      } 
```

在 OnMessage 中

```
 showPopUp(Config.context,kind, resource_name, resource_id); 
```

# maven - Maven：使用依赖项时在控制台中显示注释/警报（编译/打包/...）

> ID：12496573
> 
> 赞同：2
> 
> 时间：2012-09-19T14:11:56.627
> 
> 标签：maven, dependencies, alert

当我使用特定依赖项时，Maven 需要“警告”我，例如在编译或打包项目时在控制台上显示警告消息。我在依赖 pom.xml 规范中没有找到任何东西。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:35:41.127

您可以使用[maven-enforcer-plugin](http://maven.apache.org/enforcer/enforcer-rules/bannedDependencies.html)来检查这种依赖关系并在这种情况下破坏构建。这可能会解决一半，但不是 100%。在这种情况下，您可能可以编写[自定义规则](http://maven.apache.org/enforcer/enforcer-api/writing-a-custom-rule.html)来满足需求。

# c++ - 什么会导致 TreeView_InsertItem 失败？

> ID：12496587
> 
> 赞同：0
> 
> 时间：2012-09-19T14:12:55.797
> 
> 标签：c++, windows, treeview, wxwidgets

在几台计算机上（意味着大多数都很好），当向树控件添加项目时，由于某种原因`TreeView_InsertItem`返回`NULL`（[表示出现问题](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773898%28v=vs.85%29.aspx%20%22here)）。不幸的是，MSDN 站点没有指定设置了错误代码（实际上，调用[GetLastError](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360%28v=vs.85%29.aspx)只是告诉我：`0 = The operation completed successfully`。它也没有指定可能导致失败的原因或如何处理失败。

所以我想知道是否有人以前遇到过这个问题，或者对如何调试问题有任何建议。

这些机器都运行 Windows 7。

免责声明：我实际上正在经历`wxWidgets`，但我们已经深入研究了代码，问题似乎出在窗口`api`级别，而不是`wx`本身。

**更新：** 基本上，这个想法是，你从这个类继承，然后实现填充，它只是调用`AddItem()`. 还有一个`AddItem()`用于指定根项目的版本，但是由于我在第一次调用时失败了`Append()`，所以它的存在没有帮助。`wxFormBuilder`使用以下标志创建树：`wxTR_DEFAULT_STYLE, wxTR_HAS_BUTTONS, wxTR_HIDE_ROOT, wxTR_LINES_AT_ROOT, wxTR_SINGLE`

这在我自己的电脑上也可以正常工作

```
ItemSelector::ItemSelector( wxWindow* parent )
:    m_tree( NULL ),
    m_initialised( false )
{
    wxXmlResource::Get()->LoadFrame( this, parent, wxT( "ItemSelector" ) );

    m_tree = XRCCTRL( *this, "itemTree", wxTreeCtrl );

    m_rootItem = m_tree->AddRoot( wxT( "ROOT" ) );

    Bind( wxEVT_SHOW, &ItemSelector::OnShow, this );

    MakeModal( true );
}

void ItemSelector::OnShow( wxShowEvent& event )
{
    if( event.IsShown() )
    {
        if( !m_initialised )
        {
            Populate();
            m_initialised = true;
        }

        m_tree->SetFocus();
        Layout();
    }
}

void ItemSelector::AddItem( const wxString& name, void* someData )
{
    //Also tried m_tree->AppendItem( m_rootItem, wxT( "Test" ) ) - same problem
    wxTreeItemId newItem = m_tree->AppendItem( m_rootItem, name, -1, -1, new TreeDataClass( someData ) );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:39:48.270

我在您的代码中没有看到任何真正的错误，但这很奇怪。首先，为什么你叫 deprecated`MakeModal()`而不是让你的类 a`wxDialog`并使用它`ShowModal()`？其次，为什么要等到`wxEVT_SHOW`填充控件而不是立即执行？

我建议按照指示简化您的代码，我认为问题将消失。如果你很好奇，你可以将你的更改一分为二，找到真正对它负责的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:03:48.793

看起来问题是由于我`Populate()`从一个`wxEVT_SHOW`事件中调用的事实。

我发现这一定是一个已知问题，因为`wxDialog`有一个`[wxEVT_INIT_DIALOG][1]`事件，正是为了这个目的

# vb.net - Windows 服务可在 XP 上运行，但在 w2k3 64 位上失败并出现错误 1053

> ID：12496590
> 
> 赞同：1
> 
> 时间：2012-09-19T14:13:01.443
> 
> 标签：vb.net, service

如果这是一个愚蠢的问题，请原谅我，我对编写服务还很陌生。我编写了一个运行计时器的服务，计时器代码运行一些检查以确保我们的系统正常运行。它是用**VB.Net 框架 1.1**编写的。然后我使用“sc create”安装服务。该服务在我正在开发的**XP Pro 机器上运行良好。**但是，当我在 64 位 Windows 2003 服务器上安装该服务时，该服务失败并显示`error 1053`立即地。我在 OnStart 函数的第一行代码中进行了一些调试以写入文本文件，但即使这样也没有运行，因此程序启动时一定有问题。最后，我绝望地在 Visual Studio 2003 的一个新 VB 项目中创建了一个全新的 Windows 服务，并编译了一个空服务，该服务仅在 OnStart 函数中声明和设置字符串变量的值，如下所示：

```
Dim strTmp As String
strTmp = "hello" 
```

即使在**W2K3 服务器**上也失败了，但在 XP 开发机器上工作正常。服务器已安装并运行 .Net Framework 1.1，我们在 CMS 中使用它（用 ASP.Net 1.1 编写）。该服务作为本地系统帐户运行。我尝试启用与桌面的交互，但这没有帮助。我运行了进程监视器并且没有拒绝访问事件。我清空了应用程序事件日志，仍然不起作用。日志中没有其他事件可以帮助我。绝对使用应用程序的发布版本。对 exe 文件的权限由系统和管理员完全控制。有什么想法吗？这一定很简单，但如果我能弄清楚，我该死的！提前致谢。

@DavidHi，非常感谢您的建议。我不认为第一点是我的问题，部分原因是 MS 文章是关于停止或暂停服务，我的启动失败；也是因为服务没有超时，没有30秒的等待，立即失败。其次，当您说向服务启动添加异常处理程序时，您是指 OnStart 子吗？我尝试在那里添加一个调试文件写入，但我会尝试添加一个事件日志。关于系统检查，不可能是因为我创建的全新空测试服务显示了相同的行为并且根本没有做任何事情。你最后一点可能是关键。我的开发环境是`32bit`. 我会对 corflags 做一些研究，或者我可以构建一个 64 位开发环境。再次感谢您，至少您给了我一些新的思考！

好的，找到了解决方法。我把我的 exe 文件放在`System32`. 当我将它放在我自己创建的另一个文件夹中时，服务运行了，尽管时间很短。然后我不得不将 ini 文件和它读取/写入的日志文件也移动到该文件夹​​，而不是 System32，并且一切似乎都运行良好。天知道为什么它不喜欢从 System32 运行，但至少它现在可以工作了！谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:21:45.100

1053 错误是与服务控制管理器等待服务响应您的启动请求相关的超时。有一篇知识库文章提到了与基于 Framework 1.1 的服务特别相关的托管服务停止请求问题，因此它没有准确描述您的问题，但它可能与您的情况相关。该链接供您参考。

[http://support.microsoft.com/kb/839174](http://support.microsoft.com/kb/839174)

我要进一步诊断问题的另一个建议是确定 Start 是否由于服务的启动代码中发生“隐藏”异常而失败；start 调用不会看到异常，并且可能会让您认为它只是超时。

我建议您在服务启动中添加一个异常处理程序，该处理程序仅在事件日志中记录一条消息，其中包含异常的详细信息（如果捕获到异常）。这至少会让您知道服务中出现了问题，并为您提供比现在更多的信息。

最后一个想法：该服务是否通过网络连接检查您描述的系统？如果是这样，LocalSystem 将没有足够的权限来执行网络访问。

祝你好运！

**编辑**另一种可能性：

您的开发环境/可执行文件是 32 位的吗？您提到您的服务器是 64 位的，因此您可能需要使用强制执行 32 位操作的“corflags”工具

```
corflags /32bit+ YourServiceExectubable.exe 
```

此信息的来源是以下 SO 帖子： [64 位环境中的 32 位 Windows 服务](https://stackoverflow.com/questions/1079066/forcing-a-net-windows-service-to-run-as-32-bit-on-a-64-bit-machine)

**不幸的是，似乎 corflags 仅适用于 2.0 程序集，并且专为此类问题而设计。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:25:53.293

这看起来与此问题非常相似，可能会帮助您： [Starting a windows service failed with error 1053](https://stackoverflow.com/questions/793731/starting-a-windows-service-fails-with-error-1053?rq=1)

需要注意的其他几件事：

*   确保您的已部署服务中没有以下任一语句：

    System.Diagnostics.Debugger.Launch

    System.Diagnostics.Debugger.Break

*   您可能需要使用本地系统以外的帐户运行服务（取决于您的服务所需的权限）。

# indexing - HBase Table的row key是自动索引的吗？

> ID：12496597
> 
> 赞同：2
> 
> 时间：2012-09-19T14:13:14.987
> 
> 标签：indexing, key, hbase

这可能是一个愚蠢的问题——但我不知道如何在 Hbase 中“索引”行键，所以我假设当 HBase 放入行键时，它们具有内置支持，可以根据行键 - 换句话说，将行键自动视为主键？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T11:49:33.437

该表不仅由键索引，它实际上是由键按字典顺序排列的。即，Hbase 知道在哪个区域服务上找到每个密钥，并在该区域服务器中知道区域和特定的 HFile。写入 HFile 的数据按键排序。

字典顺序意味着您还可以通过部分键检索数据（例如扫描“a”）将获得以“a”开头的所有内容。这会花费大量时间将多个维度放入键中，例如，您可以将键设置为国家，然后是城市，以获取每个国家/地区的聚合，然后有效地按城市进行细分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T21:11:33.247

是的，表格是通过行键排序的。客户端可以获取包含行键范围的区域服务器 ID，然后允许直接连接到包含他们需要的行键的区域服务器。此外，由于键是有序字节数组，区域服务器可以进行二进制搜索以从它包含的行列表中检索该行。这使得随机检索非常有效，并且它使扫描连续行非常有效。

# java - 如何从数据库中储存和使用 shiro 的盐

> ID：12496600
> 
> 赞同：8
> 
> 时间：2012-09-19T14:13:25.120
> 
> 标签：java, database, salt, shiro

我在应用程序中使用 shiro 进行身份验证。我使用带盐的散列密码，并将它们存储在我的数据库中，如下所示：

```
 private User createUserWithHashedPassword(String inName, String inFirstName, String inLastName, String inPassword){

    ByteSource salt  = randomNumberGenerator.nextBytes(32);

    byte[] byteTabSalt  = salt.getBytes();

    String strSalt = byteArrayToHexString(byteTabSalt);

    String hashedPasswordBase64 = new Sha256Hash(inPassword, salt, 1024).toBase64();

    return new User(inName,inFirstName,inLastName,hashedPasswordBase64,strSalt);
} 
```

我将盐与字符串一起存储在我的数据库中。现在在我的领域中，我想从数据库中取回我的数据，为此我使用了事务服务。但是我的盐是强的，所以我希望它使用静态方法返回为 ByteSource 类型：

```
ByteSource byteSourceSalt = Util.bytes(salt); //where the salt is a String 
```

但是当我创建我的 SaltedAuthenticationInfo 时，它不会进行身份验证。

我认为我的问题来自我的转换方法：

```
private String byteArrayToHexString(byte[] bArray){

        StringBuffer buffer = new StringBuffer();

        for(byte b : bArray) {
            buffer.append(Integer.toHexString(b));
            buffer.append(" ");
        }

 return buffer.toString().toUpperCase();    
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-12T22:37:44.787

正如出色的答案[https://stackoverflow.com/a/20206115/603901](https://stackoverflow.com/a/20206115/603901)中所述，Shiro 的 DefaultPasswordService 已经为每个密码生成了唯一的盐。

但是，无需实现自定义 PasswordService 来将私有盐（有时称为“胡椒”）添加到每个用户的盐。可以在 shiro.ini 中配置私有 salt：

```
[main]
hashService = org.apache.shiro.crypto.hash.DefaultHashService
hashService.hashIterations = 500000
hashService.hashAlgorithmName = SHA-256
hashService.generatePublicSalt = true
# privateSalt needs to be base64-encoded in shiro.ini but not in the Java code
hashService.privateSalt = myVERYSECRETBase64EncodedSalt
passwordMatcher = org.apache.shiro.authc.credential.PasswordMatcher

passwordService = org.apache.shiro.authc.credential.DefaultPasswordService
passwordService.hashService = $hashService
passwordMatcher.passwordService = $passwordService 
```

用于生成匹配密码哈希的 Java 代码：

```
DefaultHashService hashService = new DefaultHashService();
hashService.setHashIterations(HASH_ITERATIONS); // 500000
hashService.setHashAlgorithmName(Sha256Hash.ALGORITHM_NAME);
hashService.setPrivateSalt(new SimpleByteSource(PRIVATE_SALT)); // Same salt as in shiro.ini, but NOT base64-encoded.
hashService.setGeneratePublicSalt(true);

DefaultPasswordService passwordService = new DefaultPasswordService();
passwordService.setHashService(hashService);
String encryptedPassword = passwordService.encryptPassword("PasswordForThisUser"); 
```

生成的哈希如下所示：

```
$shiro1$SHA-256$500000$An4HRyqMJlZ58utACtyGDQ==$nKbIY9Nd9vC89G4SjdnDfka49mZiesjWgDsO/4Ly4Qs= 
```

私有盐不存储在数据库中，如果攻击者获得对数据库转储的访问权限，这使得破解密码变得更加困难。

这个例子是使用 shiro-1.2.2 创建的

感谢[https://github.com/Multifarious/shiro-jdbi-realm/blob/master/src/test/resources/shiro.ini](https://github.com/Multifarious/shiro-jdbi-realm/blob/master/src/test/resources/shiro.ini)对 shiro.ini 语法的帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T15:59:17.827

你看过 PasswordMatcher / PasswordService 吗？

这已经内置了所有的编码/解码/比较逻辑。要使用它：

在数据库中存储密码：

```
PasswordService service = new DefaultPasswordService(); // or use injection or shiro.ini to populate this

private User createUserWithHashedPassword(String inName, String inFirstName, String inLastName, String inPassword){

  String hashedPasswordBase64 = service.encryptPassword(inPassword);

  return new User(inName,inFirstName,inLastName,hashedPasswordBase64,strSalt);
} 
```

然后，您可以简单地使用 PasswordMatcher 作为您领域中的匹配器。

```
realm.setCredentialsMatcher(new PasswordMatcher()); 
```

或在 shiro.ini 中：

```
matcher = org.apache.shiro.authc.credential.PasswordMatcher
realm.credentialsMatcher = $matcher 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-26T00:10:43.813

DefaultPasswordService 实现自动为每个 encryptPassword 调用添加随机盐。该“公共”盐将存储在您从“encryptPassword”收到的“hashedPasswordBase64”中。

因为“公共”盐是为每个散列密码单独生成的，所以不能“简单地”生成彩虹表并一次暴力破解所有散列密码。对于每个散列密码，由于唯一的“公共”盐，攻击者必须生成自己的唯一彩虹表。到目前为止，您不需要在数据库中添加额外的盐。

为了使您存储的散列密码更加安全，您还可以添加一个“私人”盐，该盐应该存储在其他任何地方 - 只要不在数据库中。通过使用“私有”盐，您可以保护散列密码免受暴力彩虹表攻击，因为攻击者不知道“私有”盐，也无法从数据库条目中获取“私有”盐。

这是一个非常基本的示例，如何创建使用作为常量字符串提供的“私有”盐并用作 CredentialsMatcher 的 PasswordService：

```
public class MyPrivateSaltingPasswortService extends DefaultPasswordService
{
   public MyPrivateSaltingPasswortService()
   {
      super();
      HashService service = getHashService();
      if (service instanceof DefaultHashService)
      {
         ((DefaultHashService) service).setPrivateSalt(
             new SimpleByteSource("MySuperSecretPrivateSalt"));
      }
   }
} 
```

然后你可以在 shiro.ini 中使用你自己的实现：

```
[main]
saltedService = com.mycompany.MyPrivateSaltingPasswortService
matcher = org.apache.shiro.authc.credential.PasswordMatcher
matcher.passwordService = $saltedService
realm.credentialsMatcher = $matcher 
```

这个例子是使用 shiro-1.2.2 创建的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T13:37:05.400

我改变了我的类型以节省我的盐。现在我使用 byte[] 而不是 String。

```
ByteSource salt  = randomNumberGenerator.nextBytes(32);

byte[] byteTabSalt  = salt.getBytes(); 
```

我将 byteTabSalt 存储在我的数据库中。

# ios - 在 Facebook 等 iOS 应用中预览嵌入式链接

> ID：12496607
> 
> 赞同：12
> 
> 时间：2012-09-19T14:13:45.720
> 
> 标签：ios

我正在尝试以与 Facebook 相同的方式在 iOS 应用程序中嵌入链接预览：

![在此处输入图像描述](../Images/b118b45b60ebbdc18c4b0ddeba3270d8.png)

我试图找到一种方法来获取最合适的图像（并将 url 返回给它）、页面标题，甚至可能是元描述并将其传递回应用程序，但我不确定最好的方法.

有 API 可以做到这一点，大部分都是有代价的，但似乎不应该这么困难。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-07T15:36:22.377

您可以在服务器端或客户端执行此操作。

在服务器端，您可以使用脚本（如您构建的脚本）来获取`<head>`HTML 页面的标签。

在客户端，您可以使用 NSURLConnection 或 AFNetworking 之类的库将整个页面下载为 HTML（例如，Mashable 约为 180KB），并使用 XML 解析器对其进行解析以查找`<head>`标签。

我建议您创建一个服务器脚本，以便您可以在其他项目或其他平台中重用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-14T11:13:43.463

我追求同一个目标，我在客户端做到了

我用了这些豆荚

```
pod 'HTMLReader'
pod 'AFNetworking' 
```

然后我继承`AFHTTPResponseSerializer`并返回了一个包含链接详细信息的对象

```
#import <UIKit/UIKit.h>

@interface LinkDetails : NSObject

@property (nonatomic,strong) NSString *linkURL;

@property (nonatomic,strong) NSString *linkHOST;

@property (nonatomic,strong) NSString *linkTitle;

@property (nonatomic,strong) NSString *linkDescription;

@property (nonatomic,strong) NSString *linkWebSiteName;

@property (nonatomic,strong) NSString *linkImageUrl;

@property (nonatomic,strong) UIImage *linkImage;

@end 
```

这是我的 responseSerializer 的标题

```
#import <AFNetworking/AFNetworking.h>

@interface HTMLResponseSerializer : AFHTTPResponseSerializer

@end 
```

这是我的 responseSerializer 的实现

```
#import "HTMLResponseSerializer.h"
#import <HTMLReader/HTMLReader.h>
#import "LinkDetails.h"

@implementation HTMLResponseSerializer

-(id)responseObjectForResponse:(NSURLResponse *)response data:(NSData *)data error:(NSError *__autoreleasing  _Nullable *)error{

    NSString *responseStr = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

    LinkDetails *details = [[LinkDetails alloc] init];

    HTMLDocument *document = [HTMLDocument documentWithString:responseStr];

    NSArray *metaTags = [document nodesMatchingSelector:@"meta"];

    for (HTMLElement *metaTag in metaTags) {

        if ([[[metaTag attributes] objectForKey:@"property"] isEqualToString:@"og:url"] || [[[metaTag attributes] objectForKey:@"property"] isEqualToString:@"twitter:url"]) {
            NSLog(@"%@",[[metaTag attributes] objectForKey:@"content"]);
            details.linkURL = [[metaTag attributes] objectForKey:@"content"];
        }

        if ([[[metaTag attributes] objectForKey:@"property"] isEqualToString:@"og:title"]  || [[[metaTag attributes] objectForKey:@"property"] isEqualToString:@"twitter:title"]) {
            NSLog(@"%@",[[metaTag attributes] objectForKey:@"content"]);
            details.linkTitle = [[metaTag attributes] objectForKey:@"content"];
        }

        if ([[[metaTag attributes] objectForKey:@"property"] isEqualToString:@"og:description"] || [[[metaTag attributes] objectForKey:@"property"] isEqualToString:@"twitter:description"]) {
            NSLog(@"%@",[[metaTag attributes] objectForKey:@"content"]);
            details.linkDescription = [[metaTag attributes] objectForKey:@"content"];
        }

        if ([[[metaTag attributes] objectForKey:@"property"] isEqualToString:@"og:image"] || [[[metaTag attributes] objectForKey:@"property"] isEqualToString:@"twitter:image"]) {
            NSLog(@"%@",[[metaTag attributes] objectForKey:@"content"]);
            details.linkImageUrl = [[metaTag attributes] objectForKey:@"content"];
        }

        if ([[[metaTag attributes] objectForKey:@"property"] isEqualToString:@"og:site_name"] || [[[metaTag attributes] objectForKey:@"property"] isEqualToString:@"twitter:site_name"]) {
            NSLog(@"%@",[[metaTag attributes] objectForKey:@"content"]);
            details.linkWebSiteName = [[metaTag attributes] objectForKey:@"content"];
        }
    }

    if(!details.linkTitle){
        details.linkTitle = [document firstNodeMatchingSelector:@"title"].textContent;
    }

    if(!details.linkDescription){
        details.linkTitle = [document firstNodeMatchingSelector:@"description"].textContent;
    }

    if (!details.linkHOST) {
        details.linkHOST = [response.URL host];
    }

    if (!details.linkURL) {
        details.linkURL = [response.URL absoluteString];
    }

    return details;
}

@end 
```

不要忘记将 responseSerlializer 分配给您的自定义

这对我很有用

# php - 多语种粉丝页面

> ID：12496610
> 
> 赞同：1
> 
> 时间：2012-09-19T14:14:00.650
> 
> 标签：php, facebook, facebook-graph-api

我有一个算法，它调用 Graph API 来抓取我们数据库中没有的粉丝页面的帖子（对它们进行统计）。

我们使用应用令牌调用 Graph API，并且使用“正常”粉丝页面（没有找到帖子），我们没有任何问题，我们正确地拥有所有帖子。

但是当我们尝试抓取国家/地区的帖子时，Graph API 什么也没有返回给我们。我认为这是因为应用程序没有语言（默认情况下），所以为了解决这个问题，我获取了页面管理员的访问令牌，然后 Graph API 为我提供了我需要的所有数据。

我的问题很简单：有没有办法使用应用令牌获取国家/地区数据？

谢谢您的回答 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:52:23.780

除非你`own`那个页面，没有，没有办法。这将产生一个隐私问题，其中 Graph API 可用于显示其他受限制的内容。这也适用于年龄和酒精限制。

# java - 在 WebLogic Server v10.3 中注入 EJB 3.0

> ID：12496611
> 
> 赞同：0
> 
> 时间：2012-09-19T14:14:07.453
> 
> 标签：java, ejb, weblogic, ejb-3.0, weblogic-10.x

我在尝试将无状态 EJB 注入应用程序客户端项目时遇到了一些问题。App Client 和 EJB 都在同一个 EAR 中。使用 JNDI，我能够检索 EJB 的一个实例，但我不确定我应该如何使用 @EJB 注释来完成它。我试过使用@EJB(name="something")、@EJB(mappedName="something")，但我得到的只是一个空值。这是我的代码：

```
@Remote
public interface TimerEjbTestService {
    public void testMethod();
}

@Stateless(mappedName="TimerEjbTestService")
public class TimerEjbTestBean implements TimerEjbTestService{

    public void testMethod() {
        System.out.println("Inside EJB.");
    }
} 
```

使用 JNDI，我可以按如下方式获取实例：

```
Context ctx = new InitialContext();
TimerEjbTestService timerEjbTestService = (TimerEjbTestService) ctx.lookup("TimerEjbTestService#myejb.timerejbtestservice.services.TimerEjbTestService"); 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:22:45.977

你可以这样做：

```
@EJB
private TimerEjbTestService myBean; 
```

通过这种方式，容器注入 bean。

此外，由于它在同一个耳朵中（因此由同一个 JVM 运行），接口的注释`@Local`不应该是`@Remote`.

# javascript - Highcharts：获取折线图中选择的平均值

> ID：12496620
> 
> 赞同：1
> 
> 时间：2012-09-19T14:14:25.220
> 
> 标签：javascript, highcharts, average

折线常见图表：http: [//jsfiddle.net/yuKwp/](http://jsfiddle.net/yuKwp/)

如何获得所选元素上 xAxis 的平均值？

在上面的示例中，我只能访问图形的最小值和最大值，但不能访问中间值和最小点选定值。

所以，如果我有 1,2,3,4,5 并且我选择从 2 到 4 的点，我想要一个数组，其中 [2,3,4] 的平均值为 (2+3+4)/3 .

有没有办法至少获取最小和最大 xAxis 值的索引数组？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T15:26:23.920

如果您需要在设置 xAxis 极值后计算将出现在图中的点的平均值，请查看此小提琴：http: [//jsfiddle.net/yuKwp/3/](http://jsfiddle.net/yuKwp/3/) （即您选择从 2 到 4 的点，但在设置极端，在情节中将是从 1 到 5 的点）

但是如果你只想计算自己选择的点，请检查这个小提琴：http: [//jsfiddle.net/yuKwp/4/](http://jsfiddle.net/yuKwp/4/)

希望这会有所帮助，但如果没有，请不要害怕问我。

# haskell - 短==实现

> ID：12496630
> 
> 赞同：4
> 
> 时间：2012-09-19T14:15:04.377
> 
> 标签：haskell

我有一个简单的类型

```
data Day =  Monday | Tuesday | Wednesday | Thursday | Friday 
```

我是haskell的新手，所以我写`==`如下。

```
(==) :: Day -> Day -> Bool
Monday == Monday = True
Tuesday == Tuesday = True
Wednesday == Wednesday = True
...
x == y = False 
```

有没有更短的方法来编写`==`实现？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T14:20:06.140

您可以使用以下`deriving`关键字让编译器自动生成这些：

```
data Day = Monday | Tuesday | Wednesday | Thursday | Friday
           deriving Eq 
```

这将为您的数据类型定义`==`和`/=`。

“可以为任何数据类型导出 Eq，其成分也是 Eq 的实例。” [http://www.haskell.org/ghc/docs/7.4.2/html/libraries/base/Data-Eq.html](http://www.haskell.org/ghc/docs/7.4.2/html/libraries/base/Data-Eq.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T14:20:38.420

你可以写

```
data Day =  Monday | Tuesday | Wednesday | Thursday | Friday
  deriving Eq 
```

这意味着 GHC 将自动为 Day 生成一个 Eq 实例。它将生成 (==) 使得`Monday == Monday`, `Tuesday == Tuesday`is `True`etc, 但是`Monday == Friday`是`False`

请注意，您不能写类似

```
(==) :: Day -> Day -> Bool
x == x = True
x == y = False 
```

这也许就是你所想的。

如果你尝试，GHC 会抱怨 x 的定义冲突。

# apache - 多个 docroot 依赖于第一个域名

> ID：12496631
> 
> 赞同：1
> 
> 时间：2012-09-19T14:15:10.210
> 
> 标签：apache, httpd.conf

Atm 我们有一些重写规则，根据第一个域名查找资源。我们希望对其进行改进，因此我们不必将基本模板文件复制到每个文件夹，然后将特定文件复制到特定文件夹。

规则是：

```
RewriteRule ^web([0-9]{1})\.localhost(.*)$ C:/dir/http/test/htdocs/$1$2 [L] 
```

我们正在寻找改进它的方法。如果上面给出了 404，那么我们想看看另一个位置，例如：C:/dir/http/test/htdocs/base/$2 如果这给出了 404，那么没关系。

我试图把 RewriteCond 放在前面，但没有任何运气。

有谁知道解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:05:19.453

尝试：

```
RewiteCond %{REQUEST_FILENAME} !-f
RewiteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/web([0-9]{1})\.localhost(.*)$
RewriteCond C:/dir/http/test/htdocs/%1%2 -f
RewriteRule ^ C:/dir/http/test/htdocs/%1%2 [L]

RewiteCond %{REQUEST_FILENAME} !-f
RewiteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/web([0-9]{1})\.localhost(.*)$
RewriteCond C:/dir/http/test/htdocs/base/%2 -f
RewriteRule ^web([0-9]{1})\.localhost(.*)$ C:/dir/http/test/htdocs/base/$2 [L] 
```

# facebook - 隐藏 Facebook 选项卡，但保留网址

> ID：12496633
> 
> 赞同：0
> 
> 时间：2012-09-19T14:15:16.047
> 
> 标签：facebook, iframe

我有一个关于隐藏 Facebook 选项卡但在页面上保留应用程序 url 的问题。

例如，我向页面添加了一个应用程序，它显示在选项卡菜单中。然后我删除了该应用程序，但我希望为访问该应用程序而创建的 url 仍然有效。

在我这样做的那一刻，网址只是指向 Facebook 页面。

这需要向应用程序添加一些代码吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:37:44.580

不，这是不可能的——不可能有一个仍然可以链接到的“隐藏”选项卡——如果用户可以访问该选项卡，它就会出现在该页面的选项卡列表中。

两种选择：

1.  在画布应用程序中运行内容并从页面链接到那里。
2.  在现有选项卡中托管不同的内容，该选项卡仅在直接链接到时才会出现（通过[https://developers.facebook.com/docs/appsonfacebook/pagetabs/](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)`app_data`中描述的参数

# jquery - JQuery - 通过 id 获取元素，然后通过类选择器

> ID：12496638
> 
> 赞同：9
> 
> 时间：2012-09-19T14:15:27.110
> 
> 标签：jquery, jquery-selectors

我有这样的东西

```
<div id="div1">
   <span class="label">some text</span>
</div>
<div id="div2">
   <span class="label">some text</span>
</div> 
```

我想通过 id 选择一个给定的跨度，然后通过类。类似`#div1.label`或`#div2.span`但这种方式不起作用。我怎么能？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-19T14:17:20.847

使用空格表示元素是子元素：

```
$('#div1 .label');
$('#div2 span');
$('#div2 span.label'); 
```

`#div1.label`将选择一个 id 为 div1 和一个标签类的元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T14:16:46.357

你可以做

```
$("#div1 span.label") 
```

如果你使用`#div1.label`你实际上是在选择一个带有 id`div1`并且有 class的元素`label`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-19T14:16:51.430

你几乎拥有它：

```
$("#div1 .label"); 
```

**[后代选择器](http://api.jquery.com/descendant-selector/)**

> 选择作为给定祖先的后代的所有元素。

* * *

您还可以使其更具体：

```
$("#div1 > .label"); 
```

**[子选择器](http://api.jquery.com/child-selector/)**

> 选择“parent”指定的元素的“child”指定的所有直接子元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T14:18:53.253

*#div1.label 或 #div2.span*

你想错了，在你正在抓取的选择器中，div1 的 ID 和**div1**的*类*。**标签**。（这不是您的 HTML 的结构方式，以及您要查找的内容）

你需要这些是：

```
$('#div1 .label');
$('#div2 .label'); 
```

中间的空格就像在 CSS 语法中一样，它寻找一个子元素，在这种情况下，它需要一个*标签*类（您也可以放入**span.label**以获得更多特异性）

如果您希望它更加模糊并在其中捕获所有带有 span.label 的 div，您可以这样做：

```
$('div span.label'); // this would capture all of them
$('div[id^="div"] span.label'); // assuming they all start with the ID "div" then a # 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T14:17:28.920

应该是`$('#div1 .label')`和`$('#div2 span')`。您需要单独使用空间

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-02T09:48:21.237

这个简单的代码对我有用`$('#prettyId > label');`

# php - PHP 在评估数组值时从不为 file_exists 测试 true

> ID：12496639
> 
> 赞同：2
> 
> 时间：2012-09-19T14:15:31.180
> 
> 标签：php

我的问题是我将数组值设置为服务器的名称，如下所示：

```
$appserver[$i]=`grep $ip[2] /etc/hosts |awk '{print $2}'`; 
```

后来我做了一个测试，看看服务器是否启动（使用 wget）。如果测试失败，我会通过使用 touch 创建一个具有该名称的文件来跟踪该服务器是否关闭：

```
$touch=`touch /home/steve/data/$appserver[$i]; 
```

该文件已成功创建。后来当我去测试文件是否存在时，它永远不会评估为真。

```
if(file_exists('/home/steve/data/$appserver[$i])) { 
```

我尝试了几种不同的方法，包括为 $appserver[$i] 创建一个新变量并对其进行测试，但这也不起作用：

我在 RHEL 5 上运行 php 5.1.6。

这是完整的代码：

```
 $appserver[$i]=`grep $ip[2] /etc/hosts |awk '{print $2}'`;
  echo "appserver[i] = $appserver[$i]\n";
   $get=`wget $key->url 2> /dev/null`;
   if(file_exists('/home/user/Start')) {
            $color[$i]="green";
            $rm=`rm -rf /home/user/Start`;
    }
    else {
            $color[$i]="red";
            if($hostname=="xxxxx" ) {
                    **if(file_exists('/home/user/data/$appserver[$i]))**  {**
                        echo "do nothing appserver file exists\n";
                        $touch=`touch /home/steve/data/notmailed`;
                        }
                    else {
                    echo "No app file mailed alert\n";
                    $touch=`touch /home/user/data/$appserver[$i]`;
                    }
            }
    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:18:21.350

```
if(file_exists('/home/steve/data/$appserver[$i]')) { 
```

`'`带引号的字符串不会插入变量值，因此您要查找文字名称为`$appserver[$i]`. 改用`"`引号：

```
if(file_exists("/home/steve/data/$appserver[$i]")) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:17:56.780

它应该是：

```
if(file_exists("/home/steve/data/$appserver[$i]")) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:18:06.893

尝试这个：

```
$appserver[$i] = "grep $ip[2] /etc/hosts |awk '{print $2}'";

//...

if(file_exists("/home/steve/data/$appserver[$i]"))
{
    //...
} 
```

`"`确保在希望将变量内容解析为声明字符串的任何地方都使用双引号 ( )！

# haskell - IO()和IO有什么区别？

> ID：12496641
> 
> 赞同：2
> 
> 时间：2012-09-19T14:15:33.380
> 
> 标签：haskell

在 haskell 程序中有两种不同的使用方式`IO`，例如：

```
main :: IO ()
-- and
readLine :: IO Int 
```

这两者有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T14:25:53.597

`IO ()`并且`IO Int`从根本上非常相似。 `Int`并且`()`都是 Haskell 中的两种类型。 `()`仅在它只有一个值（也用 表示`()`）的意义上是特殊的，所以我们从来没有真正对它感兴趣。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T15:24:55.727

唯一的区别是它们的返回值。 `main`返回一个类型的值，`()`你的`readLine`返回一个`Int`. 也许这个例子会有所帮助：

```
main = do
    x <- putStrLn "Test"
    print x 
```

当你运行它时，它会输出：

```
>>> main
Test
() 
```

print 语句打印 a`()`因为那是 的返回值`putStrLn`：

```
putStrLn :: String -> IO () 
```

您通常不绑定类似返回值的原因是这样做不会`putStrLn`获得任何信息，因为`()`无论如何它总是返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T14:20:34.310

`IO Int`意思是：这是一个 IO 动作，它`return`是一个 Int。

`IO ()`意思是：这是一个不返回任何有意义结果的 IO 操作。（如`main`。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T00:23:33.623

`IO ()`是可以执行以提取 type 值的操作的类型`()`。type 只有一个（非底部）值`()`，它也是拼写的`()`（您可以通过知道您是在查看类型表达式还是值表达式来区分它们，就像以大写字母开头的名称是类型构造函数一样或数据构造函数，具体取决于您查看的是类型表达式还是值表达式）。由于只有一个（非底部）值，因此该值绝对不会告诉您任何信息（严格来说，它至少告诉您计算确实成功终止，仅此而已）。所以`IO ()`通常用作我们只对它们的副作用感兴趣的 IO 操作类型。

`putStrLn "Hello World"`是类型值的示例`IO ()`。它根本不计算任何有趣的东西。将字符串写入终端产生的*值是多少？*获取`()`它的执行时间只会告诉我们它确实执行了。

`IO Int`是可以执行以提取 type 值的操作的类型`Int`。与所有 IO 动作一样，它究竟做了什么会对程序之外的世界产生影响和影响；Haskell 对他们一无所知。但它确实知道执行该操作将产生一个 Haskell 类型的值`Int`，不管它可能做什么。

`readLn :: IO Int`是类型值的一个示例`IO Int`（类型注释作为独立表达式是必要的，以避免歧义；在更广泛的上下文中，您实际使用从`readLn`某些`Int`特定操作中提取的值，您可能会不使用它）。与将字符串写入终端不同，从终端读取字符串并将其转换为 an`Int` *确实会*产生一个值。

更普遍`IO`的是可以应用于任何类型的类型构造函数；`IO a`是可以执行的执行类型，并会产生 type 的值`a`。以上两者都只是其中的例子；两者都没有特别处理。`()`是一个完全普通的类型，并且`()`是该类型的一个完全普通的值，但是因为这些值不传达任何信息（除了“此计算成功终止”），您通常不会看到`()`它自己；它往往只与应用的类型构造函数一起使用，例如 in `IO ()`，用于我们只关心类型构造函数添加的结构的值，而不关心它“内部”的值。

# asp.net-mvc - 如何使嵌套母版页剃刀部分未定义？

> ID：12496649
> 
> 赞同：2
> 
> 时间：2012-09-19T14:16:29.573
> 
> 标签：asp.net-mvc, razor, master-pages

在 Razor 中，我有一个母版页，其中定义了一个部分，如果没有值，则显示一些默认值：

```
<html>
<head><title>Title</title></head>
<body>
    @if (IsSectionDefined("optionalSection"))
    {
        @RenderSection("optionalSection", required: false)
    }
    else
    {
        <div>Some default content</div>
    }
</body>
</html> 
```

我还有一个嵌套的母版页，它创建了一个通过部分定义：

```
@section optionalSection {
    @RenderSection("optionalSection", required: false)
} 
```

我遇到的问题是，当我使用这个嵌套的母版页时，母版页认为该部分总是被定义的。这将永远不会显示 else 部分。我考虑过在嵌套母版中更改部分的名称并在母版中检查它，但是我们有许多嵌套母版，我觉得如果我们遵循这种模式，母版中会出现不必要的爆炸。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:55:23.270

您可以编写自定义扩展方法：

```
public static class SectionExtensions
{
    public static HelperResult RedefineSection(
        this WebPageBase page,
        string sectionName
    )
    {
        if (page.IsSectionDefined(sectionName))
        {
            page.DefineSection(
                sectionName,
                () => page.Write(page.RenderSection(sectionName))
            );
        }
        return new HelperResult(_ => { });
    }
} 
```

然后在您的嵌套布局中调用此扩展方法来重新定义该部分：

```
@this.RedefineSection("optionalSection") 
```

# javascript - Firebug - 页面加载时如何以 JS 调试模式启动

> ID：12496651
> 
> 赞同：6
> 
> 时间：2012-09-19T14:16:33.187
> 
> 标签：javascript, debugging, firefox, firebug

我正在查看一个网页，当我在表单上按下提交按钮时，它会打开一个新页面，在其中运行一些 javascript，然后关闭窗口。

有什么办法可以让我在新页面上逐步浏览 javascript？我尝试在第一页的 Firebug 中设置 break on next，但下一页仍然关闭窗口。

（如果需要，我对除 Firebug 之外的其他工具持开放态度，我只需要逐步完成 javascript）

更新：

我应该提到我无权访问代码:-(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T14:18:53.523

如果你可以访问代码，你可以把这个小语句放在你想要断点的地方：

```
debugger; 
```

我不确定萤火虫，但我希望它也能在那里工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:18:57.607

放入`debugger;`你的 JavaScript 代码。`F12`并在窗口打开后按键。

# objective-c - 使用 NSRegularExpression 和 NSPredicate 正确评估字符串时遇到问题

> ID：12496652
> 
> 赞同：1
> 
> 时间：2012-09-19T14:16:40.380
> 
> 标签：objective-c, regex, cocoa

我在这个问题上停留了很长一段时间，我无法通过通常的谷歌搜索找到合适的解决方案。我正在尝试评估字符串的格式，更准确地说，我正在检查该字符串是否为加拿大邮政编码。

所以我从这个正则表达式开始，感谢[有博客的极客](http://geekswithblogs.net/MainaD/archive/2007/12/03/117321.aspx)

```
^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} *\d{1}[A-Z]{1}\d{1}$ 
```

之后，我以这种方式创建了一个 NSRegularExpression 的实例：

`NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"^[ABCEGHJKLMNPRSTVXY]{1}\\d{1}[A-Z]{1} *\\d{1}[A-Z]{1}\\d{1}$" options:NSRegularExpressionCaseInsensitive error:&error];`

添加了用于转义的反斜杠。

然后我`NSPredicate`用正则表达式做了一个

```
NSPredicate *regextest = [NSPredicate
                          predicateWithFormat:@"SELF MATCHES[cd] %@", regex]; 
```

最后，我正在评估字符串本身

```
[regextest evaluateWithObject:@"G2G 2S2"] 
```

在最后一行，抛出异常。

> NSInvalidArgumentException 无法从对象创建正则表达式
> 
> NSRegularExpression: 0x81e1bb0 ^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[AZ]{1} *\d{1}[AZ]{1}\d{1}$ 0x1。

我想不通=/我用[正则表达式测试器](http://www.nvcc.edu/home/drodgers/ceu/resources/test_regexp.asp)测试了正则表达式本身，这很好，从我用谷歌检查的结果来看，这就是应该如何进行字符串评估。我在这里迷路了。有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:34:42.573

您应该直接`[NSPredicate predicateWithFormat:@"SELF MATCHES[cd] %@", pattern]`在行中使用您的模式，而不是传递一个`NSRegularExpression`对象。

（此外，如果`{1}`不需要它们，您可以从正则表达式中删除它们。）

```
NSString* pattern = @"^[ABCEGHJKLMNPRSTVXY]\\d[A-Z] *\\d[A-Z]\\d$";
NSPredicate *regextest = [NSPredicate predicateWithFormat:@"SELF MATCHES[cd] %@", pattern];

if ([regextest evaluateWithObject:@"G2G 2S2"]) ... 
```

要在 iOS 上执行正则表达式，您可以使用`NSPredicate`class 或 the`NSRegularExpression`但不能同时使用：

*   `NSPredicate`是一种简单的情况，您只需要检查是否找到匹配项。
*   `NSRegularExpression`更加完整，并允许您列出所有匹配项、它们在字符串中的位置、遍历所有匹配项、执行替换等。

* * *

如果你愿意，你可以`NSRegularExpression`这样使用：

```
NSRegularExpression* regex = [NSRegularExpression regularExpressionWithPattern:@"^[ABCEGHJKLMNPRSTVXY]\\d[A-Z] *\\d[A-Z]\\d$" options:NSRegularExpressionCaseInsensitive error:&error];
NSUInteger nbFound = [regex numberOfMatchesInString:@"G2G 2S2" options:0 range:NSMakeRange(0,7)];
if (nbFound > 0) ... 
```

但是由于您只想检查字符串是否与模式匹配，并且不需要更多信息（您不需要找到的字符串的范围，也不需要从找到的字符串中进行替换或提取子表达式等），`NSPredicate`所以足以满足您的使用需求，并且对于简单的“是/否”测试也应该更有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T14:34:21.630

在`NSPredicate`模式中只是一个字符串，所以这将起作用：

```
NSString *pattern = @"^[ABCEGHJKLMNPRSTVXY]{1}\\d{1}[A-Z]{1} *\\d{1}[A-Z]{1}\\d{1}$";

NSPredicate *regextest = [NSPredicate predicateWithFormat:@"SELF MATCHES[cd] %@", pattern];

BOOL result = [regextest evaluateWithObject:@"G2G 2S2"]; 
```

哦，我同意`{1}`应该删除 -parts - 它们只会增加混乱。

# scala - 是否有类似 Iteratee 的概念从多个来源提取数据？

> ID：12496654
> 
> 赞同：11
> 
> 时间：2012-09-19T14:16:44.607
> 
> 标签：scala, haskell, functional-programming, iterate

可以使用流（惰性列表）从多个（为简单起见说两个）源中按需提取。Iteratees 可用于处理来自单一来源的数据。

是否有类似 Iteratee 的功能概念来处理多个输入源？我可以想象一个 Iteratee 的状态信号，它想要从哪个源中提取。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-19T15:12:01.043

要使用管道来做到这一点，您将 Pipe monad 转换器嵌套在其自身中，对于您希望与之交互的每个生产者一次。例如：

```
import Control.Monad
import Control.Monad.Trans
import Control.Pipe

producerA, producerB :: (Monad m) => Producer Int m ()
producerA = mapM_ yield [1,2,3]
producerB = mapM_ yield [4,5,6]

consumes2 :: (Show a, Show b) =>
    Consumer a (Consumer b IO) r
consumes2 = forever $ do
    a <- await       -- await from outer producer
    b <- lift await  -- await from inner producer
    lift $ lift $ print (a, b) 
```

就像多个变量的 Haskell 柯里化函数一样，您可以使用组合和 runPipe 将其部分应用于每个源：

```
consumes1 :: (Show b) => Consumer b IO ()
consumes1 = runPipe $ consumes2 <+< producerA

fullyApplied :: IO ()
fullyApplied = runPipe $ consumes1 <+< producerB 
```

上述函数运行时输出：

```
>>> fullyApplied
(1, 4)
(2, 5)
(3, 6) 
```

这个技巧适用于让或等待上游或下游任意数量的管道。它也适用于代理，即管道的双向类似物。

编辑：请注意，这也适用于任何 iteratee 库，而不仅仅是`pipes`. 事实上，John Milikin 和 Oleg 是这种方法的最初倡导者，我只是从他们那里窃取了这个想法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T17:55:58.387

我们在 Scala 中使用[Machines](http://github.com/runarorama/scala-machines)来获取不只是两个，而是任意数量的源。

库本身在`Tee`模块上提供了二元连接的两个示例：`mergeOuterJoin`和`hashJoin`. 下面是代码的`hashJoin`样子（假设两个流都已排序）：

```
/**
 * A natural hash join according to keys of type `K`.
 */
def hashJoin[A, B, K](f: A => K, g: B => K): Tee[A, B, (A, B)] = {
  def build(m: Map[K, A]): Plan[T[A, B], Nothing, Map[K, A]] = (for {
    a  <- awaits(left[A])
    mp <- build(m + (f(a) -> a))
  } yield mp) orElse Return(m)
  for {
    m <- build(Map())
    r <- (awaits(right[B]) flatMap (b => {
      val k = g(b)
      if (m contains k) emit(m(k) -> b) else Return(())
    })) repeatedly
  } yield r
} 
```

这段代码使用方法构建了一个`Plan`“编译”为 a`Machine`的代码`repeatedly`。这里构建的类型是`Tee[A, B, (A, B)]`具有两个输入的机器。`awaits(left)`用和请求左右输入，用`awaits(right)`输出`emit`。

还有一个[Haskell 版本的 Machines](http://hackage.haskell.org/package/machines)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T14:52:38.130

管道（并且，它可以为管道构建，但该代码尚未发布）有一个`zip`原语，它接受两个上游并将它们组合为一个元组流。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T14:41:11.627

查看[管道库](http://hackage.haskell.org/package/pipes-2.3.0)，[垂直连接](http://hackage.haskell.org/packages/archive/pipes/2.3.0/doc/html/Control-Pipe-Tutorial.html#g:4)可能会满足您的要求。例如，

```
import Control.Pipe
import Control.Monad
import Control.Monad.State
import Data.Void

source0, source1 :: Producer Char IO ()
source0 = mapM_ yield "say"
source1 = mapM_ yield "what"

sink :: Show b => Consumer b IO ()
sink = forever $ await >>= \x -> lift $ print x

pipeline :: Pipe () Void IO ()
pipeline = sink <+< (source0 >> source1) 
```

排序运算符`(>>)`垂直连接源，产生输出（在 a 上`runPipe`）

```
's'
'a'
'y'
'w'
'h'
'a'
't' 
```

# javascript - 在模板中附加 ng-click 不会破坏 MV* 的目的吗？

> ID：12496661
> 
> 赞同：2
> 
> 时间：2012-09-19T14:17:08.867
> 
> 标签：javascript, model-view-controller, event-handling, angularjs

在 angularjs 中有一些示例，其中 ng-click 处理程序直接附加到 html 元素，例如`<a>`or `<button>`。请参阅下面的示例（取自一个角度主页示例）。它定义了锚标记的点击处理程序，它将调用`archive()`.

这不违背整个 MV* 框架吗？在视图以外的地方定义点击不是更好吗？似乎有点太多的功能现在附加到锚标签上。任何人都可以在这里启发我吗？

示例代码：

```
<a href="" ng-click="archive()">archive</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:57:11.113

好吧，您确实必须在某处附加命令/行为，我认为 Angular 在视图中以声明方式执行此操作的方法比在带有 DOM 选择器的 JS 文件中强制执行要好得多，一旦您更改标记结构/命名，它将静默中断.

这也是微软的 XAML / C# MVVM 框架所做的事情，关注点的分离在那里很漂亮，我真的希望 Angular 能够走向那种可以纯粹在标记中封装和附加视图行为的模型。

# svn - 具有“依赖关系”的 SVN 多个分支

> ID：12496662
> 
> 赞同：4
> 
> 时间：2012-09-19T14:17:10.677
> 
> 标签：svn, deployment, version-control

我目前面临以下情况：

我有一个带有主干的 SVN 存储库，一些开发人员继续添加代码（正如它应该做的那样）

然后我们有不同的分支（见图）p1_test（一个测试系统）和p1_live（一个生产系统）。

我们想要的过程是每 X 天从主干（进程 v¹）更新 p1_test 分支。然后来自 p1_test 的工作副本中的“真实文件”将被更新 (v²)。

系统 p1_test 没有经过测试，每个错误修复都（或应该）提交到 p1_test 分支，并且 p1_test 系统更新（再次 v²）。同时，其他未参与 p1-cycle 的开发人员将继续添加到主干。这些更改不应**集成**到 p1_test 分支中（还）。

最后（当 p1_test 被认为是稳定的时，分支 p1_live 应该从 p1_test 分支更新，并且对 p1_test 所做的所有更改都应该重新集成到主干（v³）。

在给定的时间点 v⁴ 被执行，这意味着 p1_live 的工作副本从 p1_live 分支更新。

即使一切都应该经过良好测试，我们必须选择“热修复”p1_live 上出现的任何严重错误。在这种情况下，更改直接对 p1_live 分支进行，并且系统从该分支 (v⁵) 更新。

此过程必须与未知数量的 pX_test 和 pX_live 系统同时工作。

![Svn 分支模式](../Images/867050e6a2009747f0fe455b80a2f04b.png)

这甚至可以使用svn吗？目前，我面临着许多不同修订号、冲突等问题。

是否有版本控制系统可以让我遵循给定的程序？

亲切的问候， Timetrick

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T15:18:19.283

We use Subversion for a large active codebase with a similar usage pattern to yours. We have the standard trunk/branches/tags base hierarchy. In branches we have `unstable`, `testing`, and `stable`. We also have "user" branches with a folder per username in the branches folder. Tags are exactly how they should be: An untouchable snapshot.

```
trunk

branches/unstable
branches/testing
branches/stable
branches/userA/branch1
branches/userA/branch2
...

tags/stable/rNNNN
tags/stable/vN.N.N.N
... 
```

*   With all my experience using Subversion, I have found it works so much better if code flows in **one direction only**. The exception is creating a branch from trunk, which is of course okay to merge changes back into trunk once the branch is complete (commonly termed "reintegrating" a branch).
*   If code cannot flow in one direction, then it must at least **stay on one path**. That means a branch of a branch should never reintegrate directly back into trunk, for example.
*   Our usage pattern follows that all active development, including bug fixes, always finds its way into trunk first, and then trunk is the update provider for the unstable, testing, and stable branches. (It would also be okay to follow a `trunk -> unstable -> testing -> stable` merge path, but we don't due to reasons specific to our testing/release process.)
*   If you have a fix for a specific branch, then make it there and do not plan to merge it back into trunk. My experience has discovered that is a great way to accidentally have an innocent branch update break code or even remove code from trunk that simply had not been provided to the branch, yet.

You might gather from my points that Subversion requires a process to really use it effectively as you want to (and we do), and to avoid those odd conflicts that leave you saying "now what?" Everything you are describing and trying to figure out sounds all too familiar to me regarding Subversion.

I have often considered if the hype around DVCS tools like Git or Mercurial not having these problems (at all??) would be worth the time it would take to migrate our repositories (hundreds) over. The only thing stopping me from trying is time constraints, but you might be in a better position to give one of those tools a try.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T06:27:19.050

好吧，我换成GIT了。

感谢[这篇精彩的博客文章](http://nvie.com/posts/a-successful-git-branching-model/)，我启动并运行了它。（它完成了我需要它做的所有事情，甚至更多......）

# r - 如何在 R 中导入数据并创建散点图？

> ID：12496665
> 
> 赞同：6
> 
> 时间：2011-08-05T10:37:54.593
> 
> 标签：r

我有`334`记录，有两列：

*   第 (1) 列：分辨率
*   第 (2) 列：具有特定分辨率的图像数量

如何`R`使用这些数据制作散点图？有没有办法***导入***记录，因为输入记录会很耗时`334`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2011-08-05T11:04:32.163

如果您不知道如何将数据导入 R 也不知道如何创建散点图，那听起来您对 R 很陌生。

您可能想使用一个帮助您的程序。

*   [rstudio](http://rstudio.org/)有一个`Workspace - import dataset`菜单；我推荐 Rstudio，特别是如果您对 R 非常陌生。
*   [Rcmdr](http://socserv.mcmaster.ca/jfox/Misc/Rcmdr/)还具有用于将数据导入 R 的 GUI 选项

一如既往，Quick-R 提供了一个有用的起点：

*   [导入数据](http://www.statmethods.net/input/importingdata.html)
*   [散点图](http://www.statmethods.net/graphs/scatterplot.html)

更一般地说，听起来你需要花一些时间来学习一些关于 R 的介绍性教学材料。这是我[建议的起点](http://jeromyanglim.blogspot.com/2009/06/learning-r-for-researchers-in.html)。

# continuous-integration - TFS 构建在新日期时重置文件版本

> ID：12496667
> 
> 赞同：1
> 
> 时间：2012-09-19T14:17:17.653
> 
> 标签：continuous-integration, build-process, versioning

使用 TFS 2010 版本构建时，日期包含在内部版本号格式中（见下图）。版本控制对于同一日期的构建工作正常；程序集文件版本加一。但是，一旦我们在新日期上构建，程序集文件版本就会从 1.0.0.1 重新开始。

例如，以下是每天的日期、构建名称和版本：

9 月 7 日，MyProject_1.0_20120907.1, 1.0.0。**7 月1**
日，MyProject_1.0_20120907.2, 1.0.0。**7 月2**
日，MyProject_1.0_20120907.3, 1.0.0。**8 月3**
日，MyProject_1.0_20120908.1，1.0.0。**1** <= 重置为 1.0.0.1（我想要 1.0.0.4）

有没有一种简单的方法可以保持文件版本递增，而不管它的构建日期如何？

![在此处输入图像描述](../Images/3400961d1ca19003f6b412817638279a.png)

**- 编辑 -**

根据[宏列表](http://msdn.microsoft.com/en-us/library/hh190719.aspx)，这似乎是不可能的。除非有人能以其他方式回答，否则我会发布一个不可能的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:32:40.687

我通常在我的程序集版本中包含日期，例如：2.1.1209.1907 这将是 2012 年 9 月 19 日当天的第 7 个版本（我手动控制的 2.1 部分）。

另一种选择是简单地从内部版本号格式中删除日期部分，然后修订将无限增加。例如 $(BuildDefinitionName)_$(Rev:.r)

# intellij-idea - 在 PhpStorm 或其他 jetbrains ide 中保存时重新格式化代码

> ID：12496669
> 
> 赞同：62
> 
> 时间：2012-09-19T14:17:20.497
> 
> 标签：intellij-idea, phpstorm, jetbrains-ide, reformatting

如何设置代码在保存时自动重新格式化？

所以我不必总是按`Ctrl`+ `Alt`+ `L`。

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2014-09-23T17:41:44.537

实际上这是可能的。
这个想法是记录一个非常简单的宏，它选择所有行（`Ctrl`+ `A`）、格式（`Ctrl`++ `Alt`）`L`、取消全选（向上和向下箭头）并保存文件（Ctrl+S），并将此宏绑定到`Ctrl`+ `S`。

**免费 Ctrl+S 更改“全部保存”的键盘快捷键**

1.  打开文件>设置；
2.  搜索“keymap”并打开它；
3.  搜索“全部保存”并双击“全部保存”操作；
4.  选择“删除Ctrl+S”；
5.  再次双击“全部保存”并选择“添加键盘快捷键”；
6.  选择“Ctrl+Alt+Shift+S”作为第一个笔划。
7.  确认并退出设置。

**录制宏**

1.  编辑 > 宏 > 开始宏录制
2.  按`Ctrl`+ `A`，然后按`Ctrl`+ `Alt`+ `L`，然后按 ，`Up arrow`然后按 ，`Down arrow`最后按`Ctrl`+ `Alt`+ `Shift`+`S`
3.  单击页面右下角的停止按钮停止录制宏。
4.  给这个宏起一个名字，比如“格式化并保存”

**将 Ctrl+S 分配给“格式化并保存”**

1.  打开文件>设置；
2.  搜索“keymap”并打开它；
3.  搜索“格式化并保存”并双击“格式化并保存”动作；
4.  选择“添加键盘快捷键”；
5.  选择“Ctrl+S”作为第一笔。
6.  确认并退出设置。

最后，享受 PhpStorm！

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2019-03-07T12:30:01.717

我为 PhpSorm使用保存操作插件[https://plugins.jetbrains.com/plugin/7642-save-actions](https://plugins.jetbrains.com/plugin/7642-save-actions)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-11T08:30:13.130

我发现与此宏结合使用非常有用的另一件事是

`Show Reformat File Dialog`.

如果您只想重新格式化刚刚更改的代码，您可以设置选项：

`Only VCS changed text`

该对话框可以通过以下快捷方式打开： `CTRL+ALT+SHIFT+L`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2021-08-11T14:30:03.807

**设置**->**工具**->**保存操作**->**重新格式化代码**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-16T11:47:01.877

从 v2017.2.4 CTRL + ALT + L 不起作用。请改用`alt`+ `F8`。

解决方法：使用：ALT+F8 格式化代码。

在创建 Luca Mastrostefano 所描述的宏时，使用： +`alt`格式化`F8`，然后`ctrl`++保存。`alt``s`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-20T15:45:37.927

检查 PHPStorm 2020 及更高版本，发现一个名为[Save Action](https://plugins.jetbrains.com/plugin/7642-save-actions)的插件。但请确保为新项目和现有项目进行配置。

您还可以导出 PHPStorm 设置，然后解压缩并替换/创建以下内容：-

1.  **Settings/Option/macro.xml 下的宏文件**

```
 <application>
    <component name="ActionMacroManager">
    <macro name="Format & Save">
    <action id="ReformatCode"/>
    <action id="SaveAll"/>
    </macro>
    </component>
    </application> 
```

2.  **设置/键盘映射/默认 Copy.xml**

```
 <keymap version="1" name="Default copy" parent="Default for XWin">
    <action id="DBNavigator.Actions.SourceEditor.Save"/>
    <action id="Macro.Format & Save">
    <keyboard-shortcut first-keystroke="ctrl s"/>
    </action>
    <action id="SaveAll">
    <keyboard-shortcut first-keystroke="shift ctrl alt s"/>
    </action>
    </keymap> 
```

现在将其压缩回来并导入它以及每当您按 ctrl+s 时 - 将完成自动代码格式。

# .net - 从 WCF 服务打开 net.tcp 连接

> ID：12496675
> 
> 赞同：0
> 
> 时间：2012-09-19T14:17:35.450
> 
> 标签：.net, wcf, iis-7, net.tcp

我的情况是这样的：

我有一个 WCF 服务作为客户端之间的代理和一个实际处理请求的内部 WCF 服务。此服务托管在 IIS 7 中。

我已经为我的项目添加了一个服务引用，并将绑定和端点配置数据包含在我的 web.config 中。内部服务提供两个绑定：basicHttpBinding 和 netTcpBinding。如果我使用 basicHttpBinding，一切都会按预期进行。但是，使用 netTcpBinding 会导致可怕的错误消息：

*“套接字连接已中止。这可能是由于处理您的消息时出错或远程主机超出接收超时，或底层网络资源问题造成的。本地套接字超时为 '00:09:59.9979996'。”*

内部异常文本：“现有连接被远程主机强行关闭”。

使用我创建的一个小型测试程序，我可以使用 net.tcp 成功连接到后端服务，所以我想问题一定出在我的服务由 IIS 托管。我已经在 IIS 配置中启用了 net.tcp 协议。需要明确的是，问题不是在 IIS 中**托管**net.tcp 服务，而是从 IIS 中运行的服务进行**访问**。

我知道我一定在这里遗漏了一些东西，希望你们中的一个可以指出我正确的方向:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:02:59.920

我的第一个想法：您的内部服务器上未启用[端口共享。](http://msdn.microsoft.com/en-us/library/ms734772.aspx)

如果这不能解决您的问题，您可以在服务的两侧配置[system.serviceModel 诊断以获取更多错误详细信息...](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2005/12/15/5662.aspx)

# bash - Bash - 设置默认提示

> ID：12496676
> 
> 赞同：1
> 
> 时间：2012-09-19T14:17:38.603
> 
> 标签：bash, terminal, osx-lion, .bash-profile

我设置了这样的 bash 提示符：

```
PS1='\W\[\e[31m\]$(git branch &>/dev/null; if [ $? -eq 0 ]; then \
  echo " $(git branch | grep '^*' |sed s/\*\ //)"; fi)' 
```

我想将其设为默认值，以免每次打开终端时都输入它。（我使用的是 OSX lion / 终端版本 2.2.1）

* * *

**解决方案：**我按照 Hai Vu 的建议将 PS1=... 行放在 ~/.bash_profile 中。

谢谢大家的答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T20:17:30.587

把`PS1=...`线放进去`~/.bash_profile`，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:13:03.790

通常，还要查找 /etc/profile、/etc/bashrc、~/.sh_profile 或 ~/.profile（通常对于 root 是 .profile，对于非 root 是 .bash_profile）等。在各种版本的 bash和主机平台，成功命中可能会有所不同：）理论上，bashrc和bash_profile（shrc，sh_profile）用于不同的目的，rc文件用于shell配置，而profile用于与shell本身无关的各种设置，它们按固定顺序处理，包括系统范围和每个用户的配置。

而且我不确定，如果执行诸如“git”之类的外部命令并通过管道连接到 sed、grep 等是否明智地使用提示设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:06:22.043

免责声明：我对 OSX 一无所知...

正如我在评论中所说，您的`~/.bashrc`文件是放置命令的地方。

根据调用 shell 的方式，您可能需要将以下行添加到文件中`~/.bash_login`

```
if [ -f ~/.bash_login ]; then
    . .bashrc
fi 
```

再说一次，不要自己做 sed-thingie 将 git-branch 名称放入提示符中。[从这里](https://github.com/git/git/blob/master/contrib/completion/git-completion.bash)使用惊人的 bash 脚本。

顺便说一句，这就是我的提示的样子（使用上面的脚本）：

```
PS1='\[\e]0;\w\a\]\n\[\e[32m\]\u@\h\[\e[31m\] $(__git_ps1 "%s") \[\e[0m\]\[\e[33m\]\w\[\e[0m\]\n\$ ' 
```

# actionscript-3 - 用户可以在 flex 中禁用共享对象吗？

> ID：12496677
> 
> 赞同：4
> 
> 时间：2012-09-19T14:17:40.200
> 
> 标签：actionscript-3, apache-flex, flex3, flex4.5

用户可以在 flex 中禁用 SharedObjects，就像他们在使用 cookie 的情况下一样吗？并且 flex 应用程序总是可以在用户的​​ pc 中成功存储共享对象而不会出现任何访问​​被拒绝错误？如果是这种情况，flex 应用程序是否会忽略创建共享对象而不是抛出错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T14:33:24.870

是的，用户可以在特定网站甚至全球范围内禁用。如果您尝试在受限环境中刷新 SharedObject，您将收到错误消息：

```
Error: #2130: Unable to flush SharedObject 
```

但是，您也可以查询刷新状态响应，查看对象是否已创建：

```
status = my_sharedobject.flush(); 
```

看看是不是`SharedObjectFlushStatus.PENDING or SharedObjectFlushStatus.FLUSHED`。

编辑

我找到了一个已回答的问题，它对您的帮助比我尝试的要多：

[Flex：如何检测用户是否阻止共享对象写入](https://stackoverflow.com/questions/7253444/flex-how-to-detect-if-user-has-blocked-shared-object-from-writing)

# javascript - 使用 javascript 语言的正则表达式

> ID：12496678
> 
> 赞同：2
> 
> 时间：2012-09-19T13:20:20.220
> 
> 标签：javascript, regex

我在 Jquery 工作

是否可以从 String 变量中获取片段？如：

```
var text = "azerty uiop hello qsdf ghjklm wxcvbn"; 
```

我想在前后用 5 个符号表示“你好”：

```
uiop Hello qsdf 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T14:19:48.110

这应该有效：

```
var text = "azerty uiop hello qsdf ghjklm wxcvbn";
console.log((text.match(/.{0,5}hello.{0,5}/) || [''])[0]); // uiop hello qsdf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:44:04.390

您还可以使用 substring 函数提取字符串的片段 -

```
var text = "azerty uiop hello qsdf ghjklm wxcvbn";
var target = text.indexOf("hello");
print(text.substring(target-5,target+10)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:20:10.007

尝试在纯 javascript 中使用正则表达式：

```
/.{5}hello.{5}/.exec(text) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T14:20:17.773

```
var text = "azerty uiop hello qsdf ghjklm wxcvbn";
text.match(/.{5}hello.{5}/)[0]; // uiop hello qsdf 
```

# r - 如何在R中的一个图中以点和线的形式绘制两个数据集？

> ID：12496679
> 
> 赞同：0
> 
> 时间：2011-06-25T06:29:46.517
> 
> 标签：r, data-visualization

我有两个数据集（每个都有两列数据）。我想使用 R 将两个数据集 xyplot 成一个图形，一个是点形式，一个是平滑线格式。

你介意教我怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-06-25T07:14:16.683

一般来说：

```
plot(first_dataset, type="p")
par (new=TRUE)
plot(second_dataset) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-06-25T07:51:30.453

你有几个选择：

1）`plot`与“o”（overplot）类型一起使用

```
plot (x, y, t="o") 
```

2）通常，正如@Milktrader 所说，您可以使用 plot 调用两次`new=TRUE`，例如：

```
plot (x, y)
plot (x, y, "l", new=T) 
```

3) 使用`points`

```
plot (x, y)
points (x, y, "l") 
```

`split.screen`4) 用or分割屏幕`layout`

```
split.screen(c(1,2))
screen(1)
plot(x, y)
screen(2)
plot(x, y, "l") 
```

而且肯定还有很多其他的...

# r - 如何在 R 的绘图区域之外画一条线或添加一个文本？

> ID：12496684
> 
> 赞同：19
> 
> 时间：2010-08-27T14:30:36.417
> 
> 标签：r, data-visualization

感谢您的阅读。我发现我无法在绘图区域之外绘制线/点或添加文本。如果我从绘图内部（轴内）区域到 xlab 主标题区域的区域绘制一条线，则仅显示绘图内的部分。在多图 (mfrow) 中，线/点将仅在最后一个活动图内绘制。

```
plot(0);
l=locator(2,type='n');
lines(l, type='l'); 
```

这个问题有什么解决办法吗？谢谢！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2010-08-27T14:48:36.610

xpd 参数控制可以绘制的位置。用 par()$xpd 检查当前值，然后尝试设置 par(xpd=NA)。

从标准帮助：

```
 ‘xpd’ A logical value or ‘NA’.  If ‘FALSE’, all plotting is
      clipped to the plot region, if ‘TRUE’, all plotting is
      clipped to the figure region, and if ‘NA’, all plotting is
      clipped to the device region. See also ‘clip’. 
```

# ruby - 挂载多个 Rack 应用程序而不在 url 中添加前缀

> ID：12496691
> 
> 赞同：2
> 
> 时间：2012-09-19T14:18:03.897
> 
> 标签：ruby, sinatra, rack

如何在不使用`map`or的情况下安装/运行多个机架应用程序`Rack::UrlMap`？使用这些将很好地调度应用程序，但也会将用于调度的路由添加到匹配器的开头，因此：

```
class API < Sinatra::Base
  get "/api" do
    # blah
  end
end

map( "/api" ) { run API } 
```

上面的路由是在“/api/api”访问的，这不是我想要的，只是“/api”是我想要的。如果有更好的方法，我不想使用过滤器深入研究请求对象并删除前缀。

我试过了：

```
use API.app  # the app is wrapped in a `def self.app` for convenience.
run Web.app 
```

但`use`如果应用程序本身也在`use`其中使用过，则会导致问题。这样做：

```
run API.app
run Web.app 
```

只会提供来自最后一个运行的应用程序的路线。

我即将尝试 Rack::Cascade 但我以前从未使用过它，也不知道它是否是解决这个问题的好方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T22:57:30.417

答案确实是 Rack::Cascade:

```
run Rack::Cascade.new( [API, Web] ) 
```

# r - 我已经在R中导入了数据，如何制作散点图？

> ID：12496694
> 
> 赞同：5
> 
> 时间：2011-08-05T13:35:43.863
> 
> 标签：r

我是新来的`R`，并且已按如下方式导入了我的数据集（点表示还有剩余数据）：

```
> num.csv <- read.csv("c:/num.csv", header=T)
> print(num.csv)
            X.Y
1     22500;482
2       25842;1
3       27221;1
4       32757;1
5       40152;1
.       .
.       .
.       . 
```

如何为这些数据制作散点图？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2011-08-05T14:16:26.573

首先，数据需要在不同的列中。虽然该文件被标记为“csv”，但您似乎使用分号而不是逗号来分隔。重新格式化文件或尝试：

```
num.csv <- read.csv("c:/num.csv", header=T, sep=";") 
```

然后，您可以使用带有 R 的各种绘图包之一来制作绘图。例如：

```
install.packages("ggplot2"); #ggplot2 is not part of the standard install...
library(ggplot2);
qplot(X, Y, data=num.csv); 
```

我没有测试过上面的内容，这取决于你的数据框是如何从 read.csv 中出来的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-08-05T21:01:16.040

@patrickmdmnet 的答案是要走的路，但我有点好奇，只是想尝试一个程序化的解决方案。我主要对 R strplit() 函数是如何工作的感到好奇：

```
# Test matrix
tmp.mtrx <- matrix(c("1;2", "3;4", "5;6", "7;8"), ncol=1)

# The split
tmp.split <- strsplit(tmp.mtrx, ";")

# Put it all together into a new matrix
new_matrix <- matrix(tmp.split[[1]], ncol=2)
for(i in 2:length(tmp.split)){
  new_matrix <- rbind(new_matrix, tmp.split[[i]])
}

# Do the plot originally asked for
plot(new_matrix[,1], new_matrix[,2]) 
```

@ Chl - 我一直在寻找 unlist 函数，它使没有循环的解决方案更好，尽管因为我已经编写了很多程序，我经常发现如果我的代码没有太大的影响，让我的代码更具可读性更好表现。这是 Chl 在 a 中的解决方案，矩阵稍微复杂一些：

```
# Test matrix
tmp.mtrx <- matrix(c("1;2", 55,  "3;4", 75, "5;6", 85, "7;8", 88), ncol=2)

# The split
tmp.split <- strsplit(tmp.mtrx, ";")

# A vector with all the values, length = (ncol(tmp.mtrx) + 1)*nrow(tmp.mtrx)
tmp.data_vector <- unlist(tmp.split)

# Put it all together into a new matrix
new_matrix <- matrix(tmp.data_vector, ncol=(ncol(tmp.mtrx)+1), byrow=TRUE)

# Do the plot originally asked for
plot(new_matrix[,1], new_matrix[,2]) 
```

# ruby - Sinatra 在语句中缩进部分 erb

> ID：12496699
> 
> 赞同：1
> 
> 时间：2012-09-19T14:18:19.883
> 
> 标签：ruby, sinatra

这是一种让 sinatra 中的部分缩进到我称之为的级别的方法吗？

例子

```
<body>
    <div>
        <%= partial :"mypartial" %>
    </div>
</body> 
```

结果是

```
<body>
    <div>
<div id="i am defined in mypartial">
    //etc
</div>
    </div>
</body> 
```

当我想要

```
<body>
    <div>
        <div id="i am defined in mypartial">
            //etc
        </div>
    </div>
</body> 
```

如果我正确缩进部分，这是可能的，但这使得它难以使用。我希望部分开始缩进一直到左边（在源文件中）。

也许有某种后处理器可以为我格式化该 html？这是针对未公开的项目，但重要的是内部用户可以轻松阅读生成的 html。包括正确的缩进。

# java - Intent putExtra 方法的最大长度？（强制关闭）

> ID：12496700
> 
> 赞同：34
> 
> 时间：2012-09-19T14:18:19.867
> 
> 标签：java, android, android-intent, android-activity

我需要一些帮助来调试我的应用程序。首先：在模拟器和其他一些设备上，我的应用程序运行良好。在我的设备上，我强制关闭（没有强制关闭消息）。

如果应用程序的 Activity 发生更改，则会发生“崩溃”。

这是`MainActivity`该类的一些代码。它只是通过 webview 从网页中读取 html 内容。不，这是不可能的，`HttpRequest`因为我无法模拟发布请求。

```
public class MainActivity extends Activity {

    public final static String EXTRA_HTML = "com.example.com.test.HTML";

    private WebView mWebView;
    private ProgressDialog mDialog;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);  
        mWebView = (WebView) findViewById(R.id.webView1);
        CookieSyncManager.createInstance(this);
        CookieManager cookieManager = CookieManager.getInstance();
        cookieManager.removeAllCookie();
        mWebView.setBackgroundColor(0);
        mWebView.setWebChromeClient(new WebChromeClient() {
            public boolean onConsoleMessage(ConsoleMessage cmsg) {
                if (cmsg.message().startsWith("MAGIC")) {
                    mDialog.cancel();
                    /*HashMap<String, String> message = new HashMap<String, String>();*/
                    String msg = cmsg.message().substring(5);
                    Intent intent = new Intent(MainActivity.this,
                        ReadDataActivity.class);
                    /*message.put("message", msg);*/
                    /*intent.putExtra(EXTRA_HTML, message);*/
                                    intent.putExtra(EXTRA_HTML, msg);
                    startActivity(intent);
                }
                return false;
            }
        });
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.getSettings().setPluginState(PluginState.OFF);
        mWebView.getSettings().setLoadsImagesAutomatically(false);
        mWebView.getSettings().setBlockNetworkImage(true);
        mWebView.getSettings().setAppCacheEnabled(true);
        mWebView.getSettings().setSavePassword(true);
        mWebView.getSettings()
                .setCacheMode(WebSettings.LOAD_NORMAL);
        mWebView.setWebViewClient(new WebViewClient() {

            public void onPageFinished(WebView view, String address) {
                if (address.indexOf("mySession") != -1) {
                    view.loadUrl("javascript:console.log('MAGIC'+document.getElementsByTagName('html')[0].innerHTML);");
                }
});

                mWebView.loadUrl("http://www.myurl.de");

} 
```

因此，在该`onConsoleMessage()`方法中，我只是将 html 代码传递给另一个读取、解析和显示内容的 Activity 类。

现在的问题是，此时`ReadDataActivity`应加载类时，应用程序只是关闭并返回主屏幕，而没有任何消息或用户对话框。

作为字符串传递给的html代码是否可能`ReadDataActivity`很大？我也尝试将 html 代码作为字符串添加到 HashMap 中，但问题是一样的。

一些想法我可以做些什么来调试问题？也许我应该尝试创建一个`Parcelable`对象？

在模拟器中一切正常。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-09-19T14:40:34.870

根据我的经验（前一段时间），您可以在IPC中打包多达**1MB**的数据。`Bundle`如果在给定时间发生大量事务，则可以减少此限制。更多信息[在这里](https://developer.android.com/reference/android/os/TransactionTooLargeException.html)。

为了克服这个问题，我建议您将内容保存在临时文件中，并将临时文件的*路径/URI*传递给您的第二个活动。然后在您的第二个活动中，从文件中读取内容，执行您想要的操作，最后删除该文件。

如果您愿意，您也可以为此任务合并*Shared_Preferences - 如果您认为处理文件很麻烦。*

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-05-05T15:48:10.393

我对使用 Intent 可以传输的最大数据量进行了一些研究。而且似乎限制远不接近 1MB 或 90KB，它更像是**500KB**（在 API 10、16、19 和 23 上测试）。

我写了一篇关于这个主题的博客文章，你可以在这里找到它：http: [//web.archive.org/web/20200217153215/http ://neotechsoftware.com/blog/android-intent-size-limit](http://web.archive.org/web/20200217153215/http://neotechsoftware.com/blog/android-intent-size-limit)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-01T02:49:09.693

[在Jelly Bean](http://www.lonestarprod.com/?p=34 "Android Jelly Bean：Intent.Action_SEND 对文本大小的限制")中 Intent 的大小限制仍然很低，略低于 1MB（大约 90K），因此即使您的应用程序仅针对最新的 Android 版本，您也应该始终注意数据长度。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-09T06:54:06.490

1MB 的固定大小不仅限于意图。作为 Intents、Content Providers、Messenger，所有系统服务（如电话、振动器等）都使用 Binder 的 IPC 基础设施提供商。此外，活动生命周期回调也使用此基础架构。

**1MB**是在特定时刻系统中执行的所有 binder 事务的总体限制。

如果在发送意图时发生大量事务，即使额外数据不大，它也可能会失败。
[http://codetheory.in/an-overview-of-android-binder-framework/](http://codetheory.in/an-overview-of-android-binder-framework/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-07-31T07:26:46.753

我已经看到，通过写入和读取文件会降低性能。 [然后我看到了这个解决方案：](https://stackoverflow.com/a/42158221/6379197)。所以我正在使用这个解决方案：

```
public class ExtendedDataHolder {

    private static ExtendedDataHolder ourInstance = new ExtendedDataHolder();

    private final Map<String, Object> extras = new HashMap<>();

    private ExtendedDataHolder() {
    }

    public static ExtendedDataHolder getInstance() {
        return ourInstance;
    }

    public void putExtra(String name, Object object) {
        extras.put(name, object);
    }

    public Object getExtra(String name) {
        return extras.get(name);
    }

    public boolean hasExtra(String name) {
        return extras.containsKey(name);
    }

    public void clear() {
        extras.clear();
    }

} 
```

然后在 MainActivity 我这样称呼它：

```
ExtendedDataHolder extras = ExtendedDataHolder.getInstance();
extras.putExtra("extra", new byte[1024 * 1024]);
extras.putExtra("other", "hello world");

startActivity(new Intent(MainActivity.this, DetailActivity.class)); 
```

并在 DetailActivity

```
ExtendedDataHolder extras = ExtendedDataHolder.getInstance();
if (extras.hasExtra("other")) {
    String other = (String) extras.getExtra("other");
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-12-20T21:03:38.067

比赛有点晚了，但我遇到了同样的问题。在我的情况下，将数据写入文件并没有真正意义上的性能，但我在寻找答案时遇到了这个问题：

[http://developer.android.com/guide/faq/framework.html#3](http://developer.android.com/guide/faq/framework.html#3)

使用单例对我来说更好，因为不需要磁盘 IO。如果数据不需要持久化，性能会更好。

这是一个示例实现：

```
public class DataResult {

    private static DataResult instance;
    private List<SomeObject> data = null;

    protected DataResult() {

    }

    public static DataResult getInstance() { 
        if (instance == null) {
            instance = new DataResult();
        }
        return instance;
    }

    public List<SomeObject> getData() { return data; }
    public void setData(List<SomeObject> data) { this.data = data; }
} 
```

然后你可以在一个活动中使用它：

```
DataResult.getInstance().setData(data); 
```

并像这样在其他活动中获取它：

```
List<SomeObject> data = DataResult.getInstance().getData(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-10-03T15:44:14.800

Binder 事务缓冲区有一个有限的固定大小 - 1Mb。但问题是该进程**的所有正在进行的事务共享的缓冲区。**

所以每次都尽量保持你的意图数据尽可能小。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-07-25T09:00:22.510

在活动之间传递大数据的另一种解决方案是使用静态字段。在您的情况下，将此行添加到 ReadDataActivity 类

```
public static String msg; 
```

然后您可以使用 MainActivity 类中的静态字段 msg 如下

```
ReadDataActivity.msg = cmsg.message().substring(5); 
```

最后开始您的活动，无需额外投入

```
Intent intent = new Intent(MainActivity.this, ReadDataActivity.class);                  
startActivity(intent); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-11-25T03:57:35.420

变量的使用`static String`很好。如果用户需要在不同的 HTML 片段之间来回切换，你也可以`LruCache`这样使用：

```
 static LruCache<String, String> mMemoryCache;
    final int kiloByte = 1024;
    .
    .
    final int maxMemoryKB = (int) (Runtime.getRuntime().maxMemory() / kiloByte);
    // then choose how much you want to allocate for cache
    final int cacheSizeKB = maxMemoryKB / 8;
    .
    .
    mMemoryCache = new LruCache<String, String>(cacheSizeKB) {
        //@Override
        protected int sizeOf(String key, String value) {   
            try {
                byte[] bytesUtf8 = value.getBytes("UTF-8");
                return bytesUtf8.length / kiloByte;
            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            }
            return -1;
        }
    };
    .
    .
    String cacheKey = generateUniqueString(key);
    if (mMemoryCache.get(key) == null) {
        mMemoryCache.put(cacheKey, yourContent);
    }

    Intent intent = new Intent(getApplicationContext(), ReadDataActivity.class);
    intent.putExtra(EXTRA_HTML, cacheKey);
    startActivity(intent); 
```

然后在`ReadDataActivity`旁边

```
Intent intent = getIntent();
String cacheKey = intent.getStringExtra(EXTRA_HTML);
String contentString = MainActivity.mMemoryCache.get(cacheKey);
doSomethingWith(contentString); 
```

这个想法来自[这里](https://stackoverflow.com/a/31133766/1827488)。

# matlab - matlab圆柱方程

> ID：12496706
> 
> 赞同：0
> 
> 时间：2012-09-19T14:18:38.833
> 
> 标签：matlab

我在matlab中写了一个圆柱方程如下

```
z=0;  
r=1/33;  
a=1/2+1/4-1/8-1/16;  
b=1/2+1/4-1/8-1/16;
if (x-a).^2+(y-b).^2<=r^2  
    z=1;  
end   
N=1-t(any number) 
```

现在我想按照上面的时间间隔沿着 x 轴移动它。我想沿 x 轴移动它我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:46:09.433

你的方程`(x-a).^2+(y-b).^2<=r^2`意味着圆柱体的中心在`[a, b]`。将它沿-`x`轴移动一个量`da`意味着增加`a`到`a+da`，以便新中心移动到`[a+da, b]`。

就像一个忠告——还有 Matlab 命令`[x,y,z] = cylinder`。键入`help cylinder`以获取更多信息。

并且为了完整性和严谨性 - 你的方程*不是*圆柱体，它是平面 ( `z=0`) 的方程，具有高度`1`和半径`1/33`以 为中心的实心圆形突起`[a,b]`。像您定义的那样的“实心圆柱体”最好称为“杆”，而数学上的“圆柱体”只是外表面（“与线段等距的所有点的集合”）。很多时候，圆柱体是通过一组参数方程来定义的，那么你对这种特殊风格的定义杆的原因是什么？

# r - 如何绘制小提琴散点图（在 R 中）？

> ID：12496709
> 
> 赞同：11
> 
> 时间：2010-09-01T13:39:53.860
> 
> 标签：r, data-visualization

我只是通过以下情节来的：

![替代文字](../Images/dcb7d43917340e05ec23d42b61f9a876.png)

并想知道如何在 R 中完成它？（或其他软件）

**10.03.11 更新**：感谢所有参与回答此问题的人 - 您提供了精彩的解决方案！[我已经在我的博客上的一篇文章](http://www.r-statistics.com/2011/03/beeswarm-boxplot-and-plotting-it-with-r/)中编译了这里提供的所有解决方案（以及我在网上找到的其他一些解决方案）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2010-09-02T12:46:29.553

Make.Funny.Plot 或多或少做了我认为它应该做的事情。根据您自己的需要进行调整，并且可能会进行一些优化，但这应该是一个不错的开始。

```
Make.Funny.Plot <- function(x){
    unique.vals <- length(unique(x))
    N <- length(x)
    N.val <- min(N/20,unique.vals)

    if(unique.vals>N.val){
      x <- ave(x,cut(x,N.val),FUN=min)
      x <- signif(x,4)
    }
    # construct the outline of the plot
    outline <- as.vector(table(x))
    outline <- outline/max(outline)

    # determine some correction to make the V shape,
    # based on the range
    y.corr <- diff(range(x))*0.05

    # Get the unique values
    yval <- sort(unique(x))

    plot(c(-1,1),c(min(yval),max(yval)),
        type="n",xaxt="n",xlab="")

    for(i in 1:length(yval)){
        n <- sum(x==yval[i])
        x.plot <- seq(-outline[i],outline[i],length=n)
        y.plot <- yval[i]+abs(x.plot)*y.corr
        points(x.plot,y.plot,pch=19,cex=0.5)
    }
}

N <- 500
x <- rpois(N,4)+abs(rnorm(N))
Make.Funny.Plot(x) 
```

编辑：已更正，因此它始终有效。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-10-14T14:55:28.180

我最近遇到[了 beeswarm 包](http://www.cbs.dtu.dk/~eklund/beeswarm/)，它有一些相似之处。

> 蜂群图是类似于“条形图”的一维散点图，但具有紧密排列的非重叠点。

这是一个例子：

```
 library(beeswarm)
  beeswarm(time_survival ~ event_survival, data = breast,
    method = 'smile',
    pch = 16, pwcol = as.numeric(ER),
    xlab = '', ylab = 'Follow-up time (months)',
    labels = c('Censored', 'Metastasis'))
  legend('topright', legend = levels(breast$ER),
    title = 'ER', pch = 16, col = 1:2) 
```

[![](../Images/8a039b4e83e99994832653d84e7c3572.png)](https://i.stack.imgur.com/yTjLz.png)
[（来源：[eklund，网址：www.cbs.dtu.dk](http://www.cbs.dtu.dk/~eklund/beeswarm/beeswarm_example_03.png)）]

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-09-02T14:05:11.540

我想出了类似于 Joris 的代码，但我认为这不仅仅是一个梗图；这里我的意思是，每个系列中的 y 值是与 bin 均值的距离的绝对值，x 值更多的是关于该值是低于还是高于平均值。
示例代码（有时会引发警告但有效）：

```
px<-function(x,N=40,...){
x<-sort(x);

#Cutting in bins
cut(x,N)->p;

#Calculate the means over bins
sapply(levels(p),function(i) mean(x[p==i]))->meansl;
means<-meansl[p];

#Calculate the mins over bins
sapply(levels(p),function(i) min(x[p==i]))->minl;
mins<-minl[p];

#Each dot is one value.
#X is an order of a value inside bin, moved so that the values lower than bin mean go below 0
X<-rep(0,length(x));
for(e in levels(p)) X[p==e]<-(1:sum(p==e))-1-sum((x-means)[p==e]<0);
#Y is a bin minum + absolute value of a difference between value and its bin mean
plot(X,mins+abs(x-means),pch=19,cex=0.5,...);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-09-01T13:54:11.347

试试[vioplot](http://cran.r-project.org/web/packages/vioplot/index.html)包：

```
library(vioplot)
vioplot(rnorm(100)) 
```

（使用糟糕的默认颜色 ;-)

[wvioplot](http://cran.r-project.org/web/packages/wvioplot/index.html)包中还有 wvioplot() ，用于加权小提琴图和[beanplot](http://www.jstatsoft.org/v28/c01/paper)，它结合了小提琴和地毯图。它们也可以通过[lattice](http://cran.r-project.org/web/packages/lattice/index.html)包获得，请参阅`?panel.violin`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-14T16:47:47.673

由于尚未提及，因此还有[ggbeeswarm](https://github.com/eclarke/ggbeeswarm)作为基于 ggplot2 的相对较新的 R 包。

这为 ggplot 添加了另一个 geom 以代替 geom_jitter 等。

特别是**geom_quasirandom**（见下面的第二个例子）产生了非常好的结果，事实上我已经将它改编为默认图。

值得注意的是包[vipor](https://github.com/sherrillmix/vipor)（R 中的 VIolin POints），它使用标准 R 图形生成绘图，实际上 ggbeeswarm 在幕后也使用它。

```
set.seed(12345)
install.packages('ggbeeswarm')
library(ggplot2)
library(ggbeeswarm)

ggplot(iris,aes(Species, Sepal.Length)) + geom_beeswarm() 
```

![](../Images/426afdd21380e17da31c5491ce870fd9.png)

```
ggplot(iris,aes(Species, Sepal.Length)) + geom_quasirandom() 
```

![](../Images/ed21477b94d3198783bbdcf94939825a.png)

```
#compare to jitter
ggplot(iris,aes(Species, Sepal.Length)) + geom_jitter() 
```

![](../Images/f8fa0370f6540a0ebb5a00a9b43f086b.png)

# asp.net - 如何让 Visual Studio“编译”一个 .aspx 文件？

> ID：12496714
> 
> 赞同：6
> 
> 时间：2012-09-19T14:18:50.950
> 
> 标签：asp.net, .net, asp.net-mvc, visual-studio

在我的 ASP.NET MVC 应用程序中，我有一个 .aspx 文件。我在 Visual Studio 2010 项目资源管理器树中选择它并转到文件属性 - “构建操作”设置为“内容”。我将“构建操作”更改为“编译”并要求 Visual Studio 构建项目。我在编译器输出中收到我的 .aspx 文件的以下错误消息：

```
C:\PathToProject\MyFile.aspx(1,1): error CS0234: The type or namespace name 'global_asax'
    does not exist in the namespace 'ASP' (are you missing an assembly reference?) 
```

.aspx 文件的第一行是：

```
<%@ Page Language="C#" MasterPageFile="~/Views/Shared/My.Master" Inherits="System.Web.Mvc.ViewPage" %> 
```

这让我想知道...

编译器试图抱怨什么以及如何使它编译 .aspx 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T16:18:56.797

视图的 .aspx 必须将其构建操作设置为内容。

要在构建时启用预编译（或至少是编译器错误检查），请添加

```
 <MvcBuildViews>true</MvcBuildViews> 
```

到 .csproj 中的第一个 <PropertyGroup>。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:37:52.873

正如@KennyZ 所说，ASPX/ASCX/Master/CSHtml 文件没有“编译” - 无论如何都不是常规构建过程的一部分。这是因为这些文件在第一次请求时被编译为 Page 类，这是为了让网站管理员可以随时修改文件，这通常是一个好主意，尤其是在 ASPX 文件包含大量内容的情况下。

请注意，VS 文件属性构建操作不控制此设置 - 我认为该`BuildAction`属性应该隐藏或至少有更好的文档记录 - 开发人员社区不太了解它。

但这是可以完成的！在 VS2005 中，当他们引入命运多舛的“网站”项目（作为 VS2003“Web 应用程序”的替代品，直到 VS2005 SP1 出现）时，可以选择将 ASPX/ASCX/Master 文件预编译到应用程序的程序集中 -它确实留下了不包含任何内容的存根 *.aspx 文件，而是引用了预编译的页面类。

您仍然可以使用 VS2010 执行此操作，但您需要使用命令行`aspnet_compiler.exe`作为 GUI，因为它不存在用于 Web 应用程序项目。

此处提供更多文档：http: [//msdn.microsoft.com/en-us/library/bb398860%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/bb398860%28v=vs.100%29.aspx)

在这里：http: [//msdn.microsoft.com/en-us/library/ms229863%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms229863%28v=vs.100%29.aspx)

# sed - sed 用行号替换模式

> ID：12496717
> 
> 赞同：10
> 
> 时间：2012-09-19T14:18:57.003
> 
> 标签：sed, awk, gawk

我需要`###`用当前行号替换模式。

我设法用 AWK 和 SED 在下一行打印。

`sed -n "/###/{p;=;}" file`打印到下一行，如果没有`p;`，它将替换整行。

`sed -e "s/###/{=;}/g" file`曾经在我的脑海中有意义，因为它`=;`返回匹配模式的行号，但它会返回我的文本`{=;}`

我错过了什么？我知道这是一个愚蠢的问题。我在 sed 手册中找不到这个问题的答案，不太清楚。

如果可能的话，请指出我缺少什么，以及如何让它发挥作用。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T15:11:58.137

简单`awk`的oneliner：

```
awk '{gsub("###",NR,$0);print}' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T15:06:42.933

鉴于[command](http://www.grymoire.com/Unix/Sed.html#uh-48)[的限制`=`](http://www.grymoire.com/Unix/Sed.html#uh-48)，我认为将工作分为两部分（实际上是三部分）更容易。使用 GNU `sed`，您可以：

```
$ sed -n '/###/=' test > lineno 
```

然后像

```
$ sed -e '/###/R lineno' test | sed '/###/{:r;N;s/###\([^\n]*\n\)\([^\n]*\)/\2\1/;tr;:c;s/\n\n/\n/;tc}' 
```

恐怕没有简单的方法，`sed`因为除了`=`命令之外，the`r`和 GNU 扩展`R`命令不会将文件读入模式空间，而是直接将行附加到输出中，因此文件的内容不能以任何方式修改。因此管道到另一个`sed`命令。

如果内容`test`是

```
fooo
bar ### aa
test
zz ### bar 
```

以上会产生

```
fooo
bar 2 aa
test
zz 4 bar 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-19T21:00:59.603

这可能对您有用（GNU sed）：

```
sed = file | sed 'N;:a;s/\(\(.*\)\n.*\)###/\1\2/;ta;s/.*\n//' 
```

使用 cat 的替代方法：

```
cat -n file | sed -E ':a;s/^(\s*(\S*)\t.*)###/\1\2/;ta;s/.*\t//' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-19T15:26:54.323

正如*Lev Levitsky*所指出的，这不可能通过一次 sed 调用来实现，因为行号直接发送到标准输出。

您可以 sed 为您编写一个 sed 脚本，然后分两遍进行替换：

*文件*

```
a
b
c
d
e
###
###
###
a
b
###
c
d
e
### 
```

找到包含该模式的行：

```
sed -n '/###/=' infile 
```

输出：

```
6
7
8
11
15 
```

将其通过管道传输到 sed 脚本中，编写一个新的 sed 脚本：

```
sed 's:.*:&s/###/&/:' 
```

输出：

```
6s/###/6/
7s/###/7/
8s/###/8/
11s/###/11/
15s/###/15/ 
```

执行：

```
sed -n '/###/=' infile | sed 's:.*:&s/^/& \&/:' | sed -f - infile 
```

输出：

```
a
b
c
d
e
6
7
8
a
b
11
c
d
e
15 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T14:50:15.780

这个可以吗 ？

```
kent$  echo "a
b
c
d
e"|awk '/d/{$0=$0" "NR}1'
a
b
c
d 4
e 
```

如果匹配模式“d”，则在行尾附加行号。

**编辑**

哦，你想替换模式而不是附加行号......看看新的cmd：

```
kent$  echo "a
b
c
d
e"|awk '/d/{gsub(/d/,NR)}1'
a
b
c
4
e 
```

该行也可以这样写： `awk '1+gsub(/d/,NR)' file`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-28T12:21:11.500

one-liner 将 FILE 修改到位，将 LINE 替换为对应的行号：

```
seq 1 `wc -l FILE | awk '{print $1}'` | xargs -IX sed -i 'X s/LINE/X/' FILE 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-11T21:58:12.760

继[https://stackoverflow.com/a/53519367/29924](https://stackoverflow.com/a/53519367/29924)

如果您在 osx 上尝试此操作，则 sed 的版本不同，您需要执行以下操作：

```
seq 1 `wc -l FILE | awk '{print $1}'` | xargs --verbose -IX sed -i bak "X s/__line__/X/" FILE 
```

见[https://markhneedham.com/blog/2011/01/14/sed-sed-1-invalid-command-code-r-on-mac-os-x/](https://markhneedham.com/blog/2011/01/14/sed-sed-1-invalid-command-code-r-on-mac-os-x/)

# r - 如何使用 qplot 随着时间的推移绘制页面浏览量？

> ID：12496721
> 
> 赞同：4
> 
> 时间：2011-03-26T23:13:27.653
> 
> 标签：r, data-visualization, ggplot2

我已将日志加载到数据框上`v`。你可以看到输出`head(v)`：

```
 user_id    page_id           timestamp
1     139    1612783 2011-02-22 06:24:40
2     139    1612783 2011-02-22 06:28:40
3     139    1612783 2011-02-22 06:41:01 
```

我怎样才能知道每天的次数`qplot`？`page_id`

*   在 x 轴上是日期（例如`2011-02-22`）。
*   在 y 轴上，它将是`page_id`该特定日期的 's 数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-03-27T03:05:28.227

这将起作用：

```
v <- data.frame(
          timestamp = as.Date(c("2011-02-22", "2011-02-22", "2011-02-23")), 
          page_id = c(1,2,1))
newdata <- data.frame(time=names(new), count=new)
qplot(time, page, data = newdata) 
```

值得阅读 ggplot[手册](http://had.co.nz/ggplot2/book/qplot.pdf)，其中有很多`qplot`示例，包括时间序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-03-27T19:27:21.377

```
t1 = with(v, table(as.Date(timestamp), page_id))
t2 = apply(t1 > 0, 1, sum)
dates = as.Date(names(t2))
plot(t2 ~ dates)                             # using plot
qplot(dates, t2, data=data.frame(t2, dates)) # using qplot 
```

您可以以更紧凑的形式编写它，但这样您可以检查 和 的`t1`值`t2`。

# svn - 带有 unicode 输出的 SVN Hook

> ID：12496726
> 
> 赞同：2
> 
> 时间：2012-09-19T14:19:10.273
> 
> 标签：svn, unicode, hook, locale, diacritics

我有一个 SVN 钩子，它执行 svnlook 并通过电子邮件发送提交消息。当我的提交消息中有变音符号（ä、ü、ö 或 ß）时，我只会得到 "?\195?\159?\195?\182" 输出而不是变音符号。

如果我通过 shell 执行脚本，一切都很好。如果颠覆执行了钩子，那么元音变音是加扰的。我尝试使用从提交后挂钩执行邮件脚本

```
LC_ALL="en_US-utf8" "$REPOS"/hooks/mailer.py "$REPOS" "$REV" 
```

在我的邮件程序中，我执行 svnlook 命令

```
cmd = 'export LC_ALL="en_US-utf8" && svnlook info ' +  sys.argv[1] 
```

我还使用在我的 mailer.py 中设置语言环境

```
locale.setlocale(locale.LC_ALL, 'en_US-utf8') 
```

我收到的唯一错误消息是：

```
svnlook: warning: cannot set LC_CTYPE locale
svnlook: warning: environment variable LC_ALL is en_US-utf8
svnlook: warning: please check that your locale name is correct 
```

任何人的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:09:27.610

1.  你的问题有~~两个~~三个面
    *   您的钩子能否获取 Unicode 数据（并且它是否以未修改的形式接收日志消息）
    *   您的邮寄者如何发送此 Unicode
    *   您的 MUA 能否显示非 ASCII 电子邮件的正文（由邮件程序**正确准备）**

按上述问题顺序获得答案的一些必要步骤

1.  对于通过存储在文件中的钩子替换数据邮件进行测试，通过查看器检查内容，这可以呈现 Unicode 文本（并检查，该文本真的是 UTF8，对于变音符号，它可以是一些 windows-* 字符集）
2.  如果您在 p.1 中获得可读文本，则必须检查先前收到的通知的标题（在您的 MUA 中）并检查`Content-Type`（`charset=`部分，mime-type 在这里无关）和（可选）`Content-Transfer-Encoding`。我*假设并怀疑*字符集**定义与****实际状态**（us-ascii vs UTF8）不匹配，在这种情况下，MTA 和 MUA 可能会给出您描述的结果。我不知道，您能否在 mailer.py 中重新定义邮件标头，但您**必须**创建具有正确标头 Content-Type 的邮件消息
3.  当您能够使用 生成电子邮件时`Content-Type: text/plain; charset=UTF8`，测试您的 MUA 以处理 UTF8 编码的电子邮件（可以移动到 p.0，与之前的结果测试无关）

PS：这个问题一定要问ServerFault：这主要是postmaster的问题，你有更多机会在SF上看到真正的postmaster（并得到完整详细的答案而不是我的概要）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-14T07:44:27.507

您必须将以下行添加到您的挂钩脚本中：

```
#!/bin/sh

export LANG="de_DE.UTF-8" 
```

有同样的问题，这对我有用。

# php - 带有无限滚动的 Wordpress，在帖子之间放置广告

> ID：12496729
> 
> 赞同：-1
> 
> 时间：2012-09-19T14:19:36.167
> 
> 标签：php, javascript, wordpress, infinite-scroll

我已经坚持了很长时间了，我想知道如何在每 10 个帖子之间放置一个小部件，使用 . 通过无限滚动驱动的分页。我使用的插件是 [ [https://github.com/webcreate/Infinite-Ajax-Scroll](https://github.com/webcreate/Infinite-Ajax-Scroll) ]。任何帮助都会很棒，我已经坚持了一段时间，我的截止日期很快。

```
<?php $postnum++; if($postnum%10 == 0) { ?>

<?php } ?> 
```

这是我过去尝试过的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:34:00.230

循环前

```
<?php $countpost = 0; ?> 
```

将此添加到您的内容循环中。

```
<?php if ( (is_archive() or is_page() or is_search() or is_home()) && ($countpost == 0) ) : ?>

AD CODE HERE / Widget Code here

<?php
endif; 
$countpost++;
?> 
```

# linux - 缺少 time.h 的 lib 文件

> ID：12496730
> 
> 赞同：-4
> 
> 时间：2012-09-19T14:19:37.340
> 
> 标签：linux

我想使用 time.h 库。为此，我需要库本身的标题和代码。一个 .so 文件，其中包含头声明的实现。

如何找出与我的标头对应的 .so 文件？如果我的系统上没有这个文件，我在哪里可以得到它？

我使用自制的 Makefile 和 powerpc-linux-gcc。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T06:20:55.593

> 如何找出与我的标头对应的 .so 文件？

由于`<time.h>`它是标准 C 库的一部分，因此它始终是`libc.so`.

> 如果我的系统上没有这个文件，我在哪里可以得到它？

这是。

编辑：似乎在 Ubuntu 上你必须链接到`librt.so`.

# java - 将文件从目录复制到另一个，具有文件和目录的路径

> ID：12496732
> 
> 赞同：1
> 
> 时间：2012-09-19T14:19:43.550
> 
> 标签：java, android, file, copy, copy-paste

在我的 android 应用程序中，我想将文件从一个目录复制到另一个目录，我有文件的路径`filePath`，并且`dirPath`在我必须复制文件的地方有目录的路径。我尝试了很多方法，但没有任何帮助，有些方法只会制作一些与我的文件名不同的奇怪名称的空（0 kb）文件。所以请帮助:)

这是代码的一部分，如果对您有帮助，我有两个按钮用于 Gallery 和用于 Camera ，我必须从那里选择图像

```
Button btnCam = (Button) dialog.findViewById(R.id.btncamera);
                btnCam.setOnClickListener(new View.OnClickListener() 
                {
                    @Override
                    public void onClick(View v) 
                    {
                        dialog.cancel();
                        Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                        startActivityForResult(cameraIntent, 2500);

                    }
                });
                //end of camera button 

                Button btnGal = (Button) dialog.findViewById(R.id.btngalary);
                btnGal.setOnClickListener(new OnClickListener() 
                {
                    @Override
                    public void onClick(View v) 
                    {
                        dialog.cancel();
                        Intent i = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                        startActivityForResult(i, RESULT_LOAD_IMAGE);
                    }
                }); 
```

和活动结果

```
@Override
  protected void onActivityResult(int requestCode, int resultCode, Intent data) 
  {
      super.onActivityResult(requestCode, resultCode, data);

      if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) 
      {
          Uri selectedImage = data.getData();
          url = new String(selectedImage.toString()); 
          //here I must copy file with path `selectedImage` and replace it in 
          // directory with path `currentDir.hetPath()` 
      }
      if (requestCode == 2500) 
      {  
          Bitmap photo = (Bitmap) data.getExtras().get("data"); 
          imageView.setImageBitmap(photo);
          //here I must do the same thing above
      }  
  } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T20:47:29.053

我找到了一些方法，在我的 Activity 结果中我必须调用`copyFile(String, String)`函数，这里是 body

```
public static boolean copyFile(String from, String to) {
        try {
            File sd = Environment.getExternalStorageDirectory();
            if (sd.canWrite()) {
                int end = from.toString().lastIndexOf("/");
                String str1 = from.toString().substring(0, end);
                String str2 = from.toString().substring(end+1, from.length());
                File source = new File(str1, str2);
                File destination= new File(to, str2);
                if (source.exists()) {
                    FileChannel src = new FileInputStream(source).getChannel();
                    FileChannel dst = new FileOutputStream(destination).getChannel();
                    dst.transferFrom(src, 0, src.size());
                    src.close();
                    dst.close();
                }
            }
            return true;
        } catch (Exception e) {
            return false;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:26:06.900

如果您愿意，可以在您的应用程序中包含 Apache Commons I/O。我不知道它有多大。请参阅[在 Java 中复制文件的标准简洁方法？](https://stackoverflow.com/questions/106770/standard-concise-way-to-copy-a-file-in-java)

或者，也许您可​​以下载源代码，然后将源代码挑选到 FileUtils.copyFile()

# hibernate - 在 grails 标准中转义下划线 LIKE

> ID：12496737
> 
> 赞同：1
> 
> 时间：2012-09-19T14:19:54.610
> 
> 标签：hibernate, grails, criteria

我们有一些简单的领域对象，我们正在做类似的陈述。表中的数据通常在此带有下划线。问题是，当在 like 语句中使用时，下划线是 oracle 中的通配符。到目前为止，这是我找到的最接近的部分，但它似乎并不完全正确。

```
MyDomain{
def columnOne
def columnTwo
}

def results = myDomain.createCriteria().list(max:10, offset:10){
ilike("columnTwo","%BOB\_%")
sqlRestriction("ESCAPE \\")
} 
```

正在执行的 SQL 是

```
select count(*) as y0_ from MY_SCHEMA.MY_DOMAIN this_ where
lower(this_.COLUMN_TWO) like ?
and ESCAPE '\' 
```

似乎 sqlRestriction 子句在查询中被标记为 AND。有没有办法避免这种情况，或者有没有更好的方法来格式化标准？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:56:01.347

一种方法是使用 like 作为 sqlRestriction 并在字符串中添加转义符，如您 [在此处](https://stackoverflow.com/questions/673508/using-hibernate-criteria-is-there-a-way-to-escape-special-characters)看到的那样。

```
def results = myDomain.createCriteria().list(max:10, offset:10){
  sqlRestriction("lower(column_two) like '%bob\_%' ESCAPE '\\' ")
} 
```

# ruby-on-rails - 为什么这个 Google Charts API 代码可以在原始 HTML 文件中工作，但不能在本地 Rails 站点页面中工作？

> ID：12496738
> 
> 赞同：0
> 
> 时间：2012-09-19T14:19:58.863
> 
> 标签：ruby-on-rails, google-visualization

我在原始 HTML 文件中成功使用了以下代码：

```
<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Month', '2010', '2011', '2012'],
          ['Jun',  3139285, 3266244, 3121214],
          ['Jul',  3531094, 3349940, 3214951],
          ['Aug',  3231183,  3406815, 3335187],
        ]);
        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
            chart.draw(
              data,
              {vAxis: {minValue: 500000, maxValue: 4000000}}
            );
      }
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 450px; height: 250px;"></div>
  </body>
</html> 
```

但是当我尝试以下列方式在 Rails 站点页面中使用相同的技术时，我无法让它工作：

**index.html.erb：**

```
<% content_for :head do %>
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <script type="text/javascript">
    google.load("visualization", "1", {packages:["corechart"]});
    google.setOnLoadCallback(drawChart);
    function drawChart() {
      var data = google.visualization.arrayToDataTable([
        ['Month', '2010', '2011', '2012'],
        ['Jun',  3139285, 3266244, 3121214],
        ['Jul',  3531094, 3349940, 3214951],
        ['Aug',  3231183,  3406815, 3335187],
      ]);
      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
          chart.draw(
            data,
            {vAxis: {minValue: 500000, maxValue: 4000000}}
          );
    }
  </script>
<% end %>
...
<div id="chart_div" style="width: 317px; height: 250px;"></div> 
```

**应用程序.html.erb：**

```
<head>
  ...
  <%= yield :head if yield :head %>
  ...
</head> 
```

我不确定我在这里做错了什么。关于使用 Google Charts API，我有什么遗漏吗？我已经阅读了文档，但找不到任何理由说明为什么它不能像在原始 HTML 文件中那样工作。

# android - 如何隐藏未读短信通知？

> ID：12496743
> 
> 赞同：1
> 
> 时间：2012-09-19T14:20:11.250
> 
> 标签：android, sms, broadcastreceiver, broadcast, read-unread

我正在编写处理 SMS 的应用程序，并且按照我的计划，它应该替换库存/默认应用程序。

我正在拦截`android.provider.Telephony.SMS_RECEIVED`传入短信触发的广播并发布我自己的通知然后调用`abortBroadcast()`，所以最后没有通知传入的新消息，这会导致默认/库存应用程序。

但问题实际上是当用户没有阅读足够长的时间（比如几分钟）传入的短信库存/默认应用程序会出现另一个广播 - 我怀疑只是检查有未读的短信。因此，用户会看到 2 条通知：一条来自默认/库存消息应用程序，另一条来自地雷，这很混乱。

当有未读短信时，我找不到哪个广播被触发？

任何想法，提示？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-19T14:33:35.737

您可以通过这种方式设置接收器的优先级，这样您就知道它具有最高优先级并将执行该`onReceive()`方法：

```
<receiver android:name=".SmsReceiver" android:enabled="true"
    android:exported="true" android:priority="999">
    <intent-filter>
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
    </intent-filter>
</receiver> 
```

# c++ - 在 QMap::remove 之后使用 QString 会导致崩溃

> ID：12496746
> 
> 赞同：4
> 
> 时间：2012-09-19T14:20:20.283
> 
> 标签：c++, qt, qmap

我有以下代码：

```
class NamedObjectContainer {
    //...
    QMap<QString, SomeStruct> mUsed;
    //...
};

const StoredObject* NamedObjectContainer::use(const QString& name, const QString& userId)
{
    qDebug()<<userId;
    mUsed.remove(userId);
    qDebug()<<userId;
    //...
} 
```

在这里，我试图通过键（userId）从 QMap 中删除元素。元素已正确删除。但令人惊讶的是，它在 QMap::remove 之后打印 userId 会崩溃。

```
Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0xb5b2c6c0 (LWP 24041)]
0xb5fe899c in memcpy () from /lib/i686/nosegneg/libc.so.6
(gdb) where
#0  0xb5fe899c in memcpy () from /lib/i686/nosegneg/libc.so.6
#1  0xb7263246 in QString::append () from /home/osmin/stand_cl_dir/Qt4_x86-linux/lib   /libQtCore.so.4
#2  0xb72b6641 in ?? () from /home/osmin/stand_cl_dir/Qt4_x86-linux/lib/libQtCore.so.4
#3  0xb72b218b in QTextStream::operator<< () from /home/osmin/stand_cl_dir/Qt4_x86-linux/lib/libQtCore.so.4
#4  0xb6524740 in QDebug::operator<< () from /usr/lib/libqxmlrpc.so.1
#5  0xb62b5cc0 in tabexchange::NamedObjectContainer::use (this=0x9e2fb08, name=@0xbffe85e4, userId=@0xa12b780) at namedcontainer.cpp:208 
```

什么会导致问题？我正在使用 Qt 4.4.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:30:56.650

要详细说明@TI 的评论...

QString 是一种[隐式共享类型](http://doc.qt.digia.com/4.7-snapshot/implicit-sharing.html)。每个由 QString 对象组成的新副本都会增加底层的引用计数，当计数变为零时，它就会被销毁。

这里可能发生的事情是有一个初始化例程，它创建了一个 QString 实例，将其作为键传递，并且映射制作了一个副本。（这并没有复制数据，只是增加了共享计数。）然后初始化例程销毁了它的实例，所以唯一剩下的共享实例是存储在映射中共享计数为 1 的实例。

稍后您可能使用了类似的东西[`QMap::iterator::key()`](http://doc.qt.digia.com/4.7-snapshot/qmap-iterator.html#key)来获取对映射中字符串键的 const 引用，作为`userId`. 这不会创建 QString 的任何新实例以添加到共享计数中，而是指向地图拥有的实例。所以当地图放开它时......它被摧毁了，现在`userId`是一个悬空的参考。

*（注意：您没有说 . 中的内容`SomeStruct`。但是，如果通过它可以达到与键匹配的字符串的实例，该实例将在映射值被破坏时`SomeStruct`被破坏，那么传入对此类字符串的引用`userId`可能会导致一个类似的问题。）*

隐式共享带来的一件事是，有时它隐藏了这种性质的错误——如果没有隐式共享，这将变得更加明显。然而，它使解决方案“便宜”：当您提取要传递的密钥时，将其复制到局部变量实例中......并将*对该*变量的 const 引用传递给该例程。这实际上不会复制数据，但它会很`userId`安全，因为会有一个共享计数保持它的活动。

这有助于实现更普遍的良好协议：将引用类型传递给例程*应该*意味着您可以保证被引用对象的生命周期对于您正在调用的函数的整个运行时。如果有疑问，请制作副本并传递对副本的引用。

*（注意：将来，尝试使用包含添加和删除的[简单、自包含、正确的示例](http://sscce.org/)格式，它可以导致更容易自己找到确凿证据。没有它，我们只能做出有根据的猜测问题......它可能完全是由您的程序中的其他东西引起的！）*

# c# - 如何确保线程任务运行

> ID：12496750
> 
> 赞同：2
> 
> 时间：2012-09-19T14:20:27.793
> 
> 标签：c#, threadpool

不是特定于语言的，但我在 C# 中有这个：

```
public static void StartJob() {
    ThreadPool.QueueUserWorkItem(s => {
        if (Monitor.TryEnter(_lock)) {
            ProcessRows();
            Monitor.Exit(_lock);
        }
    }
); 
```

`ProcessRows()`处理并删除数据库中的行，直到删除所有行。在程序启动时以及每当将一行添加到程序中其他地方的数据库时，`StartJob`都会调用它，以确保在不阻塞程序的情况下处理所有行。现在，如果在即将释放锁的同时添加一行`StartJob`，则不会对其进行处理。

如何确保处理所有行？`ProcessRows()`除非添加行，否则我宁愿不运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:35:14.340

不要锁定方法；使用说明您是否正在运行的标志锁定方法。

一种实现可能类似于下面的代码 - 在这种情况下，我已将所有逻辑移入`ProcessRows`并让该方法在它已经运行时立即返回。

```
public static bool _isRunning = false;

public static void StartJob() 
{ 
    ThreadPool.QueueUserWorkItem(s => { ProcessRows(); })
} 

public static void ProcessRows()
{
    Monitor.Enter(_lock);
    if (_isRunning) 
    {
        Monitor.Exit(_lock);
        return;
    }

    _isRunning = true;

    while (rowsToProcess)
    {
        Monitor.Exit(_lock);;

        // ... do your stuff

        Monitor.Enter(_lock);
    }

    _isRunning = false;
    Monitor.Exit(_lock);
} 
```

使用这种结构，如果`while`没有设置，循环就不可能完成`_isRunning = false`- 如果不是这种情况，如果循环在另一个方法实例开始时完成，就会出现竞争条件。同样，当调用该方法时，它总是会`_isRunning = true`在另一个实例有机会执行之前进入循环并设置。

# javascript - ID 触发器在 innerHTML 中不起作用

> ID：12496751
> 
> 赞同：0
> 
> 时间：2012-09-19T14:20:30.260
> 
> 标签：javascript, css

我有一个触发一些 javascript 的 div ID。它在 innerHTML 之外工作正常，但是当我尝试仅在单击 div ID 时触发它（在 innerHTML 中）它不会触发。

编码：

```
<script type="text/javascript">

function ChangeStyle()
{
    document.getElementById("p1").innerHTML = 
        "<div id='12345' class='button next' class='move next'><a href=\"javascript:void()\">CONFIRM </a></div>";
}

</script>
<span id="p1">
<div class="button"><a href="javascript:void()"     onclick="ChangeStyle();alert('hello');">CONFIRM  </a></div></a>
</span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:24:25.867

您添加了`class`两次属性，一个值将始终覆盖另一个值。将它们组合成一个属性，您的代码将正常工作：

[演示](http://jsfiddle.net/RuKmj/)

但是，如果您只想更改类，则可以设置`className`元素的属性。

```
div.className = 'button next move'; 
```

[演示](http://jsfiddle.net/KSKmU/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T14:29:02.467

改变你`javascript:void()`的`javascript:void(0)`

上述`class`论点也成立。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T14:23:02.690

如果您要做的只是添加一个类，那么您可以使用

```
$('div .button).addClass('next'); 
```

# ruby-on-rails - 接受嵌套属性和过滤器

> ID：12496755
> 
> 赞同：3
> 
> 时间：2012-09-19T14:20:45.437
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.2

假设我有两个模型；发表评论

```
class Post < ActiveRecord::Base
  has_many :comments
  accepts_nested_attributes_for :comments
end

class Comment < ActiveRecord::Base
  belongs_to :post

  before_save :do_something

  def do_something
    # Please, let me do something!
  end
end 
```

我有一个 Post 表单，带有评论字段。一切都按预期工作，除了过滤器。使用上述配置，评论上的 before_save 过滤器不会被触发。

你能解释一下为什么，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:24:07.287

在这种情况下，Rails 不会单独实例化和保存注释。您最好在 Post 模型中添加一个回调来处理嵌套评论：

```
class Post < AR::Base
  before_save :do_something_on_comments
  def do_something_on_comments
    comments.map &:do_something
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T16:24:20.827

根据 Bryan Helmkamp 的说法，使用表单对象模式比使用accepts_nested_attributes_for 更好。看看[7 种模式来重构 Fat ActiveRecord 模型](http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/)

也许你可以做这样的事情？

```
class NewPost
  include Virtus

  extend ActiveModel::Naming
  include ActiveModel::Conversion
  include ActiveModel::Validations

  attr_reader :post
  attr_reader :comment

  # Forms are never themselves persisted
  def persisted?
    false
  end

  def save
    if valid?
      persist!
      true
    else
      false
    end
  end

private

  def persist!
    @post = Post.create!
    @comment = @post.comment.create!
  end
end 
```

创建评论时会调用 do_something 。

# php - 如何为 apache solr 模块构建我自己的视图

> ID：12496764
> 
> 赞同：0
> 
> 时间：2012-09-19T14:21:20.620
> 
> 标签：php, drupal, solr

在drupal 7中成功集成apache solr模块并显示结果后，我发现它正在使用核心搜索模块中的视图文件（search-results.tpl.php和search-result.tpl.php）来显示结果。

如何在 apache solr 模块文件夹中使用类似于 (search-results.tpl.php & search-result.tpl.php) 的自定义文件来显示结果？

由于我是drupal的新手并且刚刚开始，有人可以指导我实施它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:27:54.957

.tpl.php 文件是主题模板文件，您可以通过在自己的主题中使用同名文件来覆盖它们。[在Drupal 文档](http://drupal.org/node/173880)中进行一些更深入的阅读。

或者你可以像我一样使用谷歌提供的搜索功能，并在相关网站上找到[已经存在的答案。](https://drupal.stackexchange.com/a/4614/5678)

# qt - 如何在 Qt 中启用后选择 TextEdit？

> ID：12496765
> 
> 赞同：1
> 
> 时间：2012-09-19T14:21:30.453
> 
> 标签：qt, qt4, qt-creator

我想设计一个带有 PushButton 和 TextEdit 的布局。TextEdit 最初是禁用的，只有在单击 PushButton 时才启用。当 TextEdit 启用时，它也应该被选中。

换句话说，我的意思是我可以直接在 TextEdit 中开始输入，而无需在启用后单击选择它。就像您在浏览器中打开一个新选项卡一样，文本光标将自动转到地址栏而无需任何点击。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:26:23.467

您可以使用 QWidget::setFocus() 函数，[此处的文档](http://qt-project.org/doc/qt-4.8/qwidget.html#setFocus)。

# maven - Maven install:install-file 似乎不起作用

> ID：12496766
> 
> 赞同：2
> 
> 时间：2012-09-19T14:21:34.040
> 
> 标签：maven, maven-install-plugin

我创建了一个 Maven 项目，它对不在 Maven 中心的库（.jar 文件）有一些依赖关系。我们拥有的内部存储库正在脱机，并且我们没有被授权创建一个新存储库，因此我修改了 POM 以`install:install-file`在激活某个配置文件时在每个文件上使用。它似乎在我的机器上工作，但它可能无法工作，因为 .jars 已经在我的存储库中。

本周我们有一个新员工入职，我试图通过触发配置文件来帮助他安装依赖项，尽管调试跟踪将这些目标列为计划中的目标（并`mvn help:active-profiles`显示配置文件被激活），但它不起作用. 目录是在存储库中创建的，但只`.lastupdated`创建 .jar 和 .pom 的文件。

我们得到的错误是找不到给定工件的 POM。这是预期的，因为我们`<generatePom>true</generatePom>`在插件的执行中使用。

关于为什么这可能不起作用的任何想法？

这是POM的相关部分：

```
 <profiles>
    <profile>
        <id>self-contained</id>
        <activation>
            <property>
                <name>installBundledJars</name>
            </property>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-install-plugin</artifactId>
                    <version>2.3.1</version>
                    <executions>
                        <execution>
                            <id>installCaseControlUpdateAPI</id>
                            <phase>generate-resources</phase>
                            <goals>
                                <goal>install-file</goal>
                            </goals>
                            <configuration>
                                <file>${basedir}/lib/CaseControlUpdateAPI.jar</file>
                                <groupId>com.west.thomson.contech</groupId>
                                <artifactId>CaseControlUpdateAPI</artifactId>
                                <version>1.0</version>
                                <packaging>jar</packaging>
                                <generatePom>true</generatePom>
                            </configuration>
                        </execution>
                        <execution>
                            <id>installMQ</id>
                            <phase>generate-resources</phase>
                            <goals>
                                <goal>install-file</goal>
                            </goals>
                            <configuration>
                                <file>${basedir}/lib/com.ibm.mq-5.304.jar</file>
                                <groupId>com.ibm</groupId>
                                <artifactId>mq</artifactId>
                                <version>5.304</version>
                                <packaging>jar</packaging>
                                <generatePom>true</generatePom>
                            </configuration>
                        </execution>
                        <execution>
                            <id>installMQJMS</id>
                            <phase>generate-resources</phase>
                            <goals>
                                <goal>install-file</goal>
                            </goals>
                            <configuration>
                                <file>${basedir}/lib/com.ibm.mqjms-5.304.jar</file>
                                <groupId>com.ibm</groupId>
                                <artifactId>mqjms</artifactId>
                                <version>5.304</version>
                                <packaging>jar</packaging>
                                <generatePom>true</generatePom>
                            </configuration>
                        </execution>
                        <execution>
                            <id>installJADABAS</id>
                            <phase>generate-resources</phase>
                            <goals>
                                <goal>install-file</goal>
                            </goals>
                            <configuration>
                                <file>${basedir}/lib/jadabas.jar</file>
                                <groupId>com.softwareag</groupId>
                                <artifactId>jadabas</artifactId>
                                <version>1.0</version>
                                <packaging>jar</packaging>
                                <generatePom>true</generatePom>
                            </configuration>
                        </execution>
                        <execution>
                            <id>installOJDBC</id>
                            <phase>generate-resources</phase>
                            <goals>
                                <goal>install-file</goal>
                            </goals>
                            <configuration>
                                <file>${basedir}/lib/ojdbc14.jar</file>
                                <groupId>oracle</groupId>
                                <artifactId>ojdbc14</artifactId>
                                <version>10g</version>
                                <packaging>jar</packaging>
                                <generatePom>true</generatePom>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
  </profiles> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-16T22:08:51.227

我能想到的两个可能的问题， - 检查指定路径中是​​否有库。- 检查 .m2 存储库的权限以及运行 mvn cmd 的项目位置。

# jquery - 使用 jQuery 回调（标签/值对）自动完成

> ID：12496770
> 
> 赞同：7
> 
> 时间：2012-09-19T14:21:40.957
> 
> 标签：jquery, autocomplete, callback

我正在尝试实现自动完成 jQuery，但不了解jQuery UI 提供的[自动完成功能。](http://jqueryui.com/demos/autocomplete/)

它使用回调函数并将响应作为标签/值对获取。我有一些示例代码，我试图将任意标签/值对传回并显示该选项，但它不起作用。如果有人可以帮助我或向我展示一个简单的程序，那就太好了。

[http://jsfiddle.net/kB25J/](http://jsfiddle.net/kB25J/)

HTML：

```
<html>
    <body>
      Please enter your country name
      <input id ="book" type="text" value="">
    </body>
</html>​ 
```

JavaScript：

```
$("#book").autocomplete({
    source: function(request, response) {
        alert(request.term);
        response(function() {
            return {
                label: "hi",
                value: "bye"
            }
        });
        alert(reponse);
    }
}); 
```

​谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T15:07:53.053

发送响应时，传递一个数组而不是函数。

```
$(function() {
    $("#book").autocomplete({        
        source: function(request, response) {
            var data = [{
                    label: "hi",
                    value: "bye"
                    }];
            response(data);
        },
        select: function( event, ui ) {
            $( "#book" ).val( ui.item.label); //ui.item is your object from the array
            return false;
        }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T14:40:01.093

您应该在源中返回一个数组，即使在这种情况下它只有 1 个匹配 'hi'/'bye'

如 jqueryui.com 上的此示例所示

```
response( $.map( data.geonames, function( item ) {
    return {
        label: item.name + (item.adminName1 ? ", " + item.adminName1 : "") + ", " + item.countryName,
        value: item.name
    }
})); 
```

它使用远程响应上的映射返回标签/值的键/值对数组。

如果您的来源只是国家/地区列表，您可以使用字符串数组作为来源。

```
var countries = ["USA", "Canada", "Mexico", ...]

$('input').autocomplete({
    source : countries
}); 
```

如果您正在使用远程源：

```
$('input').autocomplete({
    source : function (request, response) {
        $.ajax({
            url: "url_to_get_countries",
            dataType: "json",
            success: function( data ) {
            response( $.map( data.countries, function( item ) {
            return {
                label: item.country_name,
                value: item.country_id
            }
            }));
            }
        });
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:02:04.000

@LakshmikanthanVijayaraghavan

正如您在[自动完成指南](http://jqueryui.com/demos/autocomplete/)中看到的，使用 jquery 插件实现自动完成有三种方法。

*   提供一个包含值列表的数组
*   提供一个对象数组，其中包含对值/标签
*   提供一个 url 来获取对象数组

前两个选项用于固定值列表。如果你想动态地填充自动完成列表，你必须实现最后一个。

为此，您必须指定一个 url 来获取 objects 数组。如果你想隐藏标签和键，你需要创建一个隐藏的输入类型并设置他的值。

例如

```
$( "#book" ).autocomplete({
           source: "getValues.htm",                     
           select: function(event, ui) {  
                $( "#book" ).val(ui.item.label);  
                $( "#book_hidden" ).val(ui.item.value);
                return false;  
            }                           
        }); 
```

getValues.html 必须返回标签/值对的数组。

希望这可以帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-30T08:27:41.507

Ajax，键值对，触发搜索的最小长度。简单代码

```
<script>
    $(function () {
        $("#CompanySearch").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: '/Admin/GetCompanyAutoComplete',
                    dataType: "json",
                    data: { term: request.term },
                    success: function (data) {
                        response(data);
                    }
                });
            },
            minLength: 2
        });
    });
</script> 
```

更多

[https://stackoverflow.com/a/40883309/5237614](https://stackoverflow.com/a/40883309/5237614)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-23T04:15:18.560

@Edathadan您的回复是最好的解决方案。但是，我认为我们需要保留原始请求，因此您应该修改为：

```
<script>
    $(function () {
        $("#CompanySearch").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: '/Admin/GetCompanyAutoComplete?term=' + request.term,
                    dataType: "json",
                    success: function (data) {
                        response(data);
                    }
                });
            },
            minLength: 2
        });
    });
</script> 
```

# jquery - Jquery - 用于 pdf 文档的滑块

> ID：12496773
> 
> 赞同：0
> 
> 时间：2012-09-19T14:21:48.637
> 
> 标签：jquery, pdf, slider

是否可以对具有多页的 pdf 文档使用滑块，以便它像杂志一样在 pdf 中滑动？

如果是这样，我在哪里可以找到有关此类滑块的信息？

# delphi - WMI 值到数组

> ID：12496780
> 
> 赞同：1
> 
> 时间：2012-09-19T14:22:26.927
> 
> 标签：delphi, wmi, delphi-xe2, firemonkey

各位下午好！

我目前正在开发一个小型系统管理工具，其风格非常类似于`Firemonkey`( `Delphi XE2`) 中的 Windows 8 任务管理器。目前，我正在尝试`TPanels`使用`TGridLayout`. 我在设计时添加了所有面板，直到对实际功能进行排序。

我的问题在于将数据从 WMI 输出到数组中。我已经有一个不涉及数组的工作版本，但是我在创建更具动态性且不太可能在不同配置中跌倒的东西时遇到了麻烦。这是当前不*完全*工作的代码；

```
Procedure CoreUsage;
const
  WbemUser            ='';
  WbemPassword        ='';
  WbemComputer        ='localhost';
  wbemFlagForwardOnly = $00000020;
var
  FSWbemLocator : OLEVariant;
  FWMIService   : OLEVariant;
  FWbemObjectSet: OLEVariant;
  FWbemObject   : OLEVariant;
  oEnum         : IEnumvariant;
  iValue        : LongWord;
  i : Integer;
begin
try
  CoInitialize(nil);
  try
    FSWbemLocator := CreateOleObject('WbemScripting.SWbemLocator');
    FWMIService   := FSWbemLocator.ConnectServer(WbemComputer, 'root\CIMV2', WbemUser, WbemPassword);
    FWbemObjectSet:= FWMIService.ExecQuery('SELECT * FROM Win32_PerfFormattedData_Counters_ProcessorInformation WHERE NOT Name="_Total" AND NOT Name="0,_Total"',
                                           'WQL',
                                           wbemFlagForwardOnly);
    oEnum         := IUnknown(FWbemObjectSet._NewEnum) as IEnumVariant;
    begin
      if oEnum.Next(1, FWbemObject, iValue) = 0 then
      begin
        for i := 0 to 63 do
        begin
          CoreName[i] := FWbemObject.Name;
          CoreUsage[i] := FWbemObject.PercentProcessorTime;
        end;
      end;
    FWbemObject:=Unassigned;
  end;
finally
  CoUninitialize;
end;
end;
end; 
```

`CoreUsage`并且`CoreName`都是`[0..63]`相关类型长度的全局变量数组（CoreName 属于`String`，CoreUsage 属于`Uint64`）。这样做的问题是它在所有面板中显示相同的值，而不是基于每个核心（这是我的意图）。这几乎就像它没有通过 0..63，而只是检索第一个值。

我本质上是想将每个值分配给数组中的一个值，因为这样我就可以轻松读取特定于核心的详细信息，而无需硬编码。在我完全在我的开发机器上工作的代码中，我必须手动完成并使用这样的东西；

```
if AnsiContainsText(FWbemObject.Name,'3') then
begin
  CoreName[3] := FWbemObject.Name;
  CoreUsage[3] := FWbemObject.PercentProcessorTime;
end 
```

正如你所看到的，它是硬编码的，但在具有 3 个 CPU 的系统中会变得不稳定（在上面的例子中）。显然 '3' 被替换为适当的数组 id，从 0 一直到 63（尽管 0 是专门寻找的`0,0`）。这样做的问题是CPU格式实际上是（ CPU`x,y`在哪里，核心是哪里）。它也不是我会因为它不可靠而简单地使用的代码。例如，对于具有 2 个八核 CPU（16 个逻辑核心）的系统，核心名称可能是然后。`x``y``0,0 .. 0,7``1,0 .. 1,7`

同样重要的是，代码本身维护起来是一场噩梦，但可能会缩短为单个`for i :=`子句并使用`IntToStr`. 但确保它有效的问题仍然存在。

我确信有一种完全可能的方法来做到这一点，但我无法弄清楚。我确实尝试过使用；

`for VarArrayLowBound(FWbemObject.Name, 1) to VarArrayHighBound(FWbemObject.Name, 1) do`

和

`for VarArrayLowBound(FWbemObject.PercentProcessorTime, 1) to VarArrayHighBound(FWbemObject.PercentProcessorTime, 1) do`

但可惜，没有这样的运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T15:39:37.037

问题是你的循环：

```
if oEnum.Next(1, FWbemObject, iValue) = 0 then
begin
  for i := 0 to 63 do
  begin
    CoreName[i] := FWbemObject.Name;
    CoreUsage[i] := FWbemObject.PercentProcessorTime;
  end;
end; 
```

您只是`FwbemObject`一次又一次地重复使用相同的内容 64 次。

尝试更多类似的东西：

```
var
  iCurrObj: Integer;
...
  iCurrObj := 0;
  while oEnum.Next(1, FWbemObject, iValue) = 0 do
  begin
    CoreName[iCurrObj] := FWbemObject.Name;
    CoreUsage[iCurrObj] := FWbemObject.PercentProcessorTime;
    Inc(iCurrObj);

    // Sanity check for future protection.
    if i > High(CoreName) then
      Break;
  end; 
```

更好的是，让它成为一个函数，让你知道它填充的数组中有多少项。这是一个工作（测试）的例子。（注意：尽管声明了两个数组，但您的问题中的示例甚至无法编译，因为您的过程名称`CoreUsage`与您的数组名称相同`CoreUsage`。）

```
var
  CoreName: array[0..63] of string;
  CoreUsage: array[0..63] of Extended;

function CoreUse: Integer;
const
  WbemUser            ='';
  WbemPassword        ='';
  WbemComputer        ='localhost';
  wbemFlagForwardOnly = $00000020;
var
  FSWbemLocator : OLEVariant;
  FWMIService   : OLEVariant;
  FWbemObjectSet: OLEVariant;
  FWbemObject   : OLEVariant;
  oEnum         : IEnumvariant;
  iValue        : LongWord;
  i : Integer;
begin
  i := 0;
  CoInitialize(nil);
  try
    FSWbemLocator := CreateOleObject('WbemScripting.SWbemLocator');
    FWMIService   := FSWbemLocator.ConnectServer(WbemComputer, 'root\CIMV2', WbemUser, WbemPassword);
    FWbemObjectSet:= FWMIService.ExecQuery('SELECT * FROM Win32_PerfFormattedData_Counters_ProcessorInformation WHERE NOT Name="_Total" AND NOT Name="0,_Total"', 'WQL', wbemFlagForwardOnly);
    oEnum         := IUnknown(FWbemObjectSet._NewEnum) as IEnumVariant;
    while oEnum.Next(1, FWbemObject, iValue) = 0 do
    begin
      CoreName[i] := FWbemObject.Name;
      CoreUsage[i] := FWbemObject.PercentProcessorTime;
      Inc(i);
      FWbemObject:=Unassigned;
    end;
    Result := i;
  finally
    CoUninitialize;
  end;
end; 
```

# google-drive-api - 如何创建新文件并在 Google Docs 编辑器中打开？

> ID：12496785
> 
> 赞同：0
> 
> 时间：2012-09-19T14:22:38.543
> 
> 标签：google-drive-api, google-docs-api

是否可以创建一个新的 Google Docs 文档，然后在 Google Docs 编辑器中打开它？我们网站上有一些文档可以很好地上传到 Google Docs 进行编辑，但我无法确定在已弃用的文档列表 API 和新的 Google Drive API 之间是否可行。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:30:41.030

是的。

当您上传文件时，您将返回一个包含字段 AlternateLink 的项目资源。这是编辑网址。

要尝试它，请转到[https://developers.google.com/drive/v2/reference/files/get#try-it](https://developers.google.com/drive/v2/reference/files/get#try-it)，单击 Oauth to On，然后将您的文件 ID 之一粘贴到 fileId 字段中。当您取回项目资源时，只需单击 AlternateLink

# c# - 二进制位图未在 C# 中保存二进制化

> ID：12496787
> 
> 赞同：0
> 
> 时间：2012-09-19T14:22:44.600
> 
> 标签：c#, image-processing

**范围：**

我正在尝试“二值化”（仅转换为两种颜色）可以在[此处](http://www.fazenda.rj.gov.br/projetoCPS/codigoImagem)找到的图像。二值化输出必须遵循以下逻辑：字符将被绘制为“颜色 X”，而其他所有内容都将被绘制为“颜色 Y”。

理想情况下，X 是白色，Y 是黑色（但 X 和 Y 并不重要）。

**观察：**

经过一些观察，我发现这些字符不是“黄色调”、“白色调”或“黑色调”。使用下面的代码，我应该能够识别所有这些“色调”（颜色通道阈值）并将其转换为一种颜色，并将整个其余部分转换为另一种颜色。

**代码示例：**

```
// My Own Web Requests Class. You can use C# 
WebRequests wr = new WebRequests();  

Native One
Bitmap bmp;
string url = "http://www.fazenda.rj.gov.br/projetoCPS/codigoImagem";

bmp = wr.GetBitmap(url);
bmp.Save(@"captcha.bmp");

for (int i = 0; i < bmp.Width; i++)
{
    for (int j = 0; j < bmp.Height; j++)
    {
        Color pixel = bmp.GetPixel(i, j);
        byte R, G, B;

        // Fetching RGB Values
        R = pixel.R;
        G = pixel.G;
        B = pixel.B;

        // Converting Black tones 
        if ((R < Color.Black.R + 110)
            && (G < Color.Black.G + 110)
            && (B < Color.Black.B + 110))
        {
            bmp.SetPixel(i, j, Color.Orange);
            continue;
        }

        // Converting Yellow tones
        if ((R > Color.Yellow.R - 110)
                && (G > Color.Yellow.G - 110)
                && (B < Color.Yellow.B + 110))
        {
            bmp.SetPixel(i, j, Color.Orange);
            continue;
        }

        // Converting White tones
        if ((R > Color.White.R - 110)
            && (G > Color.White.G - 110)
            && (B > Color.White.B - 110))
        {
            bmp.SetPixel(i, j, Color.Orange);
            continue;
        }

        bmp.SetPixel(i, j, Color.Orchid);
    }
}

bmp.Save(@"FilteredCaptcha.bmp"); 
```

**问题：**

运行此代码后，保存的输出（位图）实际上具有超过我在代码中定义的两种颜色（在此示例中，字符为“橙色”，其他颜色为“兰花”）。

一旦我使用 Windows Explorer / [Gimp](http://www.gimp.org/) / [ImageProcessingLab](http://www.aforgenet.com/projects/iplab/downloads.html) “放大” ，就会有橙色的“色调”和兰花的“色调”。

**我在这里想念什么？如果仅使用“两种”颜色而不是“色调”来设置像素颜色，为什么不将输出二值化？**

我上传了一些图片以使您的检查工作更轻松。

输入位图：

![输入位图](../Images/52bbd831df78ed60280d0f0ee497cf73.png)

输出位图：

![输出位图](../Images/a75a1b3be87763545684d1f9f3d9be11.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:42:50.320

更改保存位置：

```
bmp.Save(@"c:\temp\FilteredCaptcha.bmp", System.Drawing.Imaging.ImageFormat.Bmp); 
```

您的代码显然只设置了两种颜色，所以我看到的唯一可能是源图像是 JPG，并且在保存时会保留这种格式。

# android - 使用 .getInputStream() 时找不到文件异常

> ID：12496789
> 
> 赞同：1
> 
> 时间：2012-09-19T14:22:54.713
> 
> 标签：android

尝试使用以下代码下载远程托管的 .apk 文件。

```
package com.wireless.wmaa;

import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;

import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.AsyncTask;
import android.util.Log;

public class UpdateApp extends AsyncTask<String,Void,Void>{
private Context context;
public void setContext(Context contextf){
    context = contextf;
}

@Override
protected Void doInBackground(String... arg0) {
      try {
            URL url = new URL(arg0[0]);
            HttpURLConnection c = (HttpURLConnection) url.openConnection();
            c.setRequestMethod("GET");
            c.setDoOutput(true);
            c.connect();

            String PATH = "/sdcard/Download/";
            File file = new File(PATH);
            file.mkdirs();
            File outputFile = new File(file, "Wireless.apk");
            if(outputFile.exists()){
                outputFile.delete();
            }
            FileOutputStream fos = new FileOutputStream(outputFile);

            InputStream is = c.getInputStream();

            byte[] buffer = new byte[1024];
            int len1 = 0;
            while ((len1 = is.read(buffer)) != -1) {
                fos.write(buffer, 0, len1);
            }
            fos.close();
            is.close();

            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setDataAndType(Uri.fromFile(new                File("/sdcard/Download/Wireless.apk")), "application/vnd.android.package-archive");
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); // without this flag     android returned a intent error!
            context.startActivity(intent);

        } catch (Exception e) {
            Log.e("UpdateAPP", "Update error! " + e.getMessage());
        }
    return null;
}} 
```

这是启动任务的代码：

```
UpdateApp myApp = new UpdateApp();
myApp.setContext(getApplicationContext());
myApp.execute("http://some.domain.com/someSite/some.apk"); 
```

能够连接，但在尝试使用 InputStream 时会引发文件未找到异常。我可以从 Android 默认浏览器浏览到该文件，并提示我下载该文件，这与我希望在我的应用程序中使用的功能相同。这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.wireless.wmaa"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <uses-feature android:name="android.hardware.camera" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />    
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.DELETE_PACKAGES" />
    <uses-permission android:name="android.permission.INSTALL_PACKAGES" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
                                         >
        <activity
            android:label="@string/app_name"
            android:name=".SelectServer" 
            android:theme="@android:style/Theme.NoTitleBar"
            android:screenOrientation="landscape" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" /> 
            </intent-filter>"
            </activity>
        <activity
            android:name=".UpdateApp"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar"
            android:screenOrientation="landscape" >  
            <intent-filter>
            </intent-filter>
        </activity>

        <activity
            android:name=".WirelessActivity"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar"
            android:screenOrientation="landscape" >  
            <intent-filter>
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:30:04.990

你在这条线上错了`File outputFile = new File(file, "Wireless.apk");`

只是将其更改如下，

```
File outputFile = new File( PATH + "Wireless.apk"); 
```

还更改以下代码

```
if(outputFile.exists())
{
     outputFile.delete();
}
else  // Add Else part, it is missing in your code
{
     outputFile.createNewFile();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:33:42.013

不要使用 /sdcard/Downloads...此路径在某些设备中有所不同。你应该使用：

```
File file = Environment.getExternalStorageDirectory(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T18:09:30.807

最终成为 IIS 的问题。一旦我将我的 .apk 移动到我的 apache 网络服务器就没有问题了......

# c# - 使用嵌套属性中的 GetValue() 在反射中引发 TargetException

> ID：12496791
> 
> 赞同：3
> 
> 时间：2012-09-19T14:23:01.310
> 
> 标签：c#, .net, reflection

我需要获取每个对象的所有属性的*名称*和*值*。其中一些是引用类型，所以如果我得到以下对象：

```
public class Artist {
    public int Id { get; set; }
    public string Name { get; set; }
}

public class Album {
    public string AlbumId { get; set; }
    public string Name { get; set; }
    public Artist AlbumArtist { get; set; }
} 
```

从`Album`对象获取属性时，我还需要获取属性的值`AlbumArtist.Id`和`AlbumArtist.Name`嵌套的值。

到目前为止，我有以下代码，但是在尝试获取嵌套代码的值时会触发**System.Reflection.TargetException 。**

```
var valueNames = new Dictionary<string, string>();
foreach (var property in row.GetType().GetProperties())
{
    if (property.PropertyType.Namespace.Contains("ARS.Box"))
    {
        foreach (var subProperty in property.PropertyType.GetProperties())
        {
            if(subProperty.GetValue(property, null) != null)
                valueNames.Add(subProperty.Name, subProperty.GetValue(property, null).ToString());
        } 
    }
    else
    {
        var value = property.GetValue(row, null);
        valueNames.Add(property.Name, value == null ? "" : value.ToString());
    }
} 
```

因此，在`If`语句中，我只检查属性是否在我的引用类型的命名空间下，如果是，我应该获取所有嵌套的属性值，但这就是引发异常的地方。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T14:45:47.123

这失败了，因为您正在尝试获取实例`Artist`上的属性：`PropertyInfo`

```
if(subProperty.GetValue(property, null) != null)
    valueNames.Add(subProperty.Name, subProperty.GetValue(property, null).ToString()); 
```

据我了解，您需要`Artist`嵌套在`row`对象（这是一个`Album`实例）内的实例中的值。

所以你应该改变这个：

```
if(subProperty.GetValue(property, null) != null)
    valueNames.Add(subProperty.Name, subProperty.GetValue(property, null).ToString()); 
```

对此：

```
var propValue = property.GetValue(row, null);
if(subProperty.GetValue(propValue, null) != null)
    valueNames.Add(subProperty.Name, subProperty.GetValue(propValue, null).ToString()); 
```

完整（稍作改动以避免在我们不需要时调用 GetValue）

```
var valueNames = new Dictionary<string, string>();
foreach (var property in row.GetType().GetProperties())
{
    if (property.PropertyType.Namespace.Contains("ATG.Agilent.Entities"))
    {
        var propValue = property.GetValue(row, null);
        foreach (var subProperty in property.PropertyType.GetProperties())
        {
            if(subProperty.GetValue(propValue, null) != null)
                valueNames.Add(subProperty.Name, subProperty.GetValue(propValue, null).ToString());
        } 
    }
    else
    {
        var value = property.GetValue(row, null);
        valueNames.Add(property.Name, value == null ? "" : value.ToString());
    }
} 
```

此外，您可能会遇到属性名称重复的情况，因此您`IDictionary<,>.Add`将失败。我建议在这里使用更可靠的命名。

例如：`property.Name + "." + subProperty.Name`

# c# - NRefactory如何保持原始格式

> ID：12496796
> 
> 赞同：3
> 
> 时间：2012-09-19T14:23:44.860
> 
> 标签：c#, nrefactory

嗨，我使用 NRefactory 提取字符串常量并将其替换为 i18n 的静态变量，我可以成功地做到这一点，但是当我使用 GetText() 输出我的代码时，它不会保留原始格式。我想以最少的格式更改来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:03:25.253

[查看NRefactory CodeProject 文章](http://www.codeproject.com/Articles/408663/Using-NRefactory-for-analyzing-Csharp-code)的“修改 C# 代码”部分（最后一节）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T11:07:04.893

如果您想保持当前格式，您可以使用`DocumentScript`对 AST 应用修改。它基于`TextLocation`存储在语法树中的属性工作。

要创建脚本，您需要这样做：

```
IDocument document = new StringBuilderDocument("source code");
CSharpFormattingOptions policy = FormattingOptionsFactory.CreateAllman();
var options = new TextEditorOptions();

var script = new DocumentScript(document, policy, options); 
```

现在您可以在 AST 上使用 Replace、Remove、InsertAfter 等方法。它适用于 ast 节点和偏移量。

它还跟踪修改，因此您不必担心多次更改的冲突。
有关 NRefactory 的更多示例，您可能还想查看我的[博客](http://arashtaher.wordpress.com/tag/nrefactory/)。

# php - 自定义头像功能

> ID：12496798
> 
> 赞同：1
> 
> 时间：2012-09-19T14:23:49.413
> 
> 标签：php, wordpress, function, comments, avatar

您好，我在 WordPress 上工作，我有一个高级主题，创建者不再支持，所以我正在尝试做出改变；我不确定这是否称为错误。访问者发表评论时的评论；在这种情况下，他的头像不是默认的“神秘”（no_avatar.gif），但它会自动采用当前帖子作者的头像。我喜欢为未注册用户显示默认值。我想注意到主题是使用它自己的头像。我针对函数的代码，但我无法更改它，任何帮助将不胜感激，在此先感谢这里是代码：

```
function tgt_get_avatar_link($user_id = ""){
if (!empty($user_id)){
    $avatar = get_the_author_meta('tgt_image', $user_id);
}
else
$avatar = get_the_author_meta('tgt_image');
if (!$avatar){
    return TEMPLATE_URL . '/images/no_avatar.gif';
}
    return TEMPLATE_URL . $avatar;
} 
```

更新：该函数正在调用`tgt_get_avatar_link`，但似乎是：

```
function tgt_ad_comment($comment, $args, $depth){
    $GLOBALS['comment'] = $comment;
    global $helper;
    ?>
    <li>
    <div class="comment" id="comment-<?php comment_ID()?>">
        <?php //echo get_avatar($comment) ?>
        <?php echo $helper->image(tgt_get_avatar_link($comment->user_id), $comment->comment_author, array('title' => $comment->comment_author, 'width' => '58px', 'height' => '58px'))  ?>
        <div class="comment_content">
            <strong><?php echo get_comment_author_link() ?></strong> <?php _e('Say ','ad')?>(<?php comment_time('F j, Y \a\t g:i a') ?>)
            <br/>
            <?php comment_text() ?>
        </div>

</div> 
```

该函数正在调用`$user_id`，但似乎是：

```
function tgt_get_avatar_link($user_id = ""){
   if (!empty($user_id)){
    $avatar = get_the_author_meta('tgt_image', $user_id);
}
   else
    $avatar = get_the_author_meta('tgt_image'); 
   if (!$avatar){
    return TEMPLATE_URL . '/images/no_avatar.gif';
   }
   return TEMPLATE_URL . $avatar;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:38:00.527

如果评论作者没有定义头像，您希望显示默认图像。这似乎是`else`您的条件：

```
else { $avatar = get_the_author_meta('tgt_image'); } 
```

如果没有 $user_id 传递给[get_the_author_meta](http://codex.wordpress.org/Function_Reference/get_the_author_meta)，它将假定当前帖子作者的用户 ID。这可能会导致您描述的行为。

尝试删除`else`语句，直接从`if (!empty($user_id)){$avatar = get_the_author_meta('tgt_image', $user_id);}`to跳过`if (!$avatar){...`。现在，当函数传递一个 null user_id 时，它应该`return TEMPLATE_URL . '/images/no_avatar.gif';`

# javascript - 从div内的单选按钮获取选定的单选按钮？

> ID：12496807
> 
> 赞同：-1
> 
> 时间：2012-09-19T14:24:38.370
> 
> 标签：javascript, radio-button

我有一个包含几个单选按钮的 div，如下所示：

```
<div name="type" id="type">
    <ul class="options-list">
        <li>
            <input type="radio" name="myname1" value="121312" id="myid1">somevalue
       </li>
       <li>
            <input type="radio" name="myname2" value="121312" id="myid2">somevalue
       </li>
    </ul>
</div> 
```

现在检查了两者之一，我怎样才能使用纯 JavaScript 或 PrototypeJS 获得那个？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:32:58.177

您可以使用，

```
if(document.getElementById('myid1').checked){
     alert(document.getElementById('myid1').value)
}

if(document.getElementById('myid2').checked){
     alert(document.getElementById('myid2').value)
} 
```

只是给出一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:35:19.757

好吧，假设它们都具有相同的`name`功能，您可以这样做：

```
function getCheckedRadio(rbGroupName) {
    var rb = document.getElementsByName(rbGroupName);

    for (i = 0; i < rb.length; i++) {
        if (rb[i].checked) {
            return rb[i].id;
        }
    }
} 
```

现在您可以在*click/change 事件处理程序*中调用它来返回**ID**。

# excel - 在 MS Excel 2010 中创建动态前 10 名列表

> ID：12496808
> 
> 赞同：0
> 
> 时间：2012-09-19T14:24:40.257
> 
> 标签：excel

我有一个由两列组成的简单表：

```
CLIENT         REVENUE
___________________________

A              5000 USD

B              7500 USD

C              6000 USD

D              2500 USD

...            ... 
```

我想创建一个动态的前 10 名客户列表，它会随着收入的变化而自动更新。

通过使用 LARGE 函数，我已经能够列出前 10 名收入，但是在收入数字旁边显示客户姓名时遇到了麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:29:30.000

一个简单的方法是像这样组合 Index 和 Match 函数：

`=INDEX(A:A,MATCH(E1,B:B,0))`

这假设您的客户名称在 A 列中，收入在 B 列中，并且`large()`您正在查找的收入在单元格中`E1` 此外，这种简单的方法将返回具有“大”收入的第一个客户名称，并且在极少数情况下两个客户的收入完全相同，上述公式将显示第一个客户两次。

处理重复收入抵消的方法如下所示：

`=IF(ISNUMBER(E1),INDEX($A$1:$A$13,SMALL(IF($B$1:$B$13=E1,ROW($A$1:$A$13)-ROW($A$1)+1),COUNTIF(E$1:E1,E1))),"")`

输入后注意数组公式`ctrl`++ ，然后向下拖动到您的收入数字的右侧。`shift``enter``Large()`

这是您需要使用时部署的第二个公式的屏幕截图： ![在此处输入图像描述](../Images/777de1eb816786169941dc87fdd2379c.png)

（虽然第一种方法很简单，但单元格 F3 是可能需要额外复杂性的示例）

# c# - LINQ：从左连接填充对象

> ID：12496809
> 
> 赞同：2
> 
> 时间：2012-09-19T14:24:48.960
> 
> 标签：c#, linq

我是 linq 的新手。如何使用 LINQ 从左连接数据库查询 (PostGIS) 加载我的对象。

这是我的数据库查询：

```
SELECT          
                dt.id, 
                dt.type, 
                dta.id as "AttId",
                dta.label,
                dtav.id as "AttValueId",
                dtav.value

FROM            public."dataTypes" dt, 
                public."dataTypeAttributes" dta
LEFT JOIN       public."dataTypeAttributeValues" dtav
ON              dta.id = "dataTypeAttributeId"        
WHERE           dt.id = dta."dataTypeId"
ORDER BY        dt.type, dta.label, dtav.value 
```

这是示例输出：

![在此处输入图像描述](../Images/cc68ecfa1a8a4600e152435cccb78888.png)

我有 3 个实体：

```
public class TypeData
{
    public int ID { get; set; }
    public string Type { get; set; }
    public TypeDataAttribute[] Attributes { get; set; }

}
public class TypeDataAttribute
{
    public int ID { get; set; }
    public string Label { get; set; }
    public TypeDataAttributeValue[] Values { get; set; }
}

public class TypeDataAttributeValue
{
    public int ID { get; set; }
    public string Value { get; set; }
} 
```

# 更新

这是我卡住的地方：

```
...
using (NpgsqlDataReader reader = command.ExecuteReader())
{

    if (reader.HasRows)
    {
        IEnumerable<TypeData> typeData = reader.Cast<System.Data.Common.DbDataRecord>()
            .GroupJoin( //<--stuck here.
    }
... 
```

# 解决方案：

使用 AmyB 的回答，这就是我的对象：

```
using (NpgsqlDataReader reader = command.ExecuteReader())
{

    if (reader.HasRows)
    {

        var groups = reader.Cast<System.Data.Common.DbDataRecord>()
            .GroupBy(dr => new { ID = (int)dr["id"], AttID = (int)dr["AttId"] })
            .GroupBy(g => g.Key.ID);

        typeDataList = (
            from typeGroup in groups
            let typeRow = typeGroup.First().First()
            select new TypeData()
            {
                ID = (int) typeRow["id"],
                Type = (string) typeRow["type"],
                Attributes = 
                (
                    from attGroup in typeGroup
                    let attRow = attGroup.First()
                    select new TypeDataAttribute()
                    {
                        ID = (int)attRow["AttId"],
                        Label = (string)attRow["label"],
                        PossibleValues =
                        (
                            from row in attGroup
                            where !DBNull.Value.Equals(attRow["AttValueId"])
                            select new TypeDataAttributeValue() { ID = (int)row["AttValueId"], Value = (string)row["value"] }
                        ).ToArray()
                    }
                ).ToArray()
            }
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:46:09.693

所以 - 如果我理解正确 - 你有一个你满意的数据库查询，但你想获取行列形状的结果并将其投影到分层形状的结果中。

* * *

假设结果在一个`List<Row>`

```
public class Row
{
  public int id {get;set;}
  public string type {get;set;}
  public int attid {get;set;}
  public string label {get;set;}
  public int? attvalueid {get;set;}
  public string value {get;set;}
} 
```

然后您将分组两次，并将每个顶级组变成 a `Type`，每个子级组变成 an `Attribute`，每一行变成 a `Value`（如果该行不是空值）。

```
List<Row> queryResult = GetQueryResult();

//make our hierarchies.
var groups = queryResult
  .GroupBy(row => new {row.id, row.attid})
  .GroupBy(g => g.Key.id);

//now shape each level
List<Type> answer =
(
  from typeGroup in groups
  let typeRow = typeGroup.First().First()
  select new Type()
  {
    id = typeRow.id,
    type = typeRow.type,
    Attributes =
    (
      from attGroup in typeGroup
      let attRow = attGroup.First()
      select new Attribute()
      {
        id = attRow.attid,
        label = attRow.label
        Values =
        (
          from row in attRow
          where row.attvalueid.HasValue  //if no values, then we get an empty array
          select new Value() {id = row.attvalueid, value = row.value }
        ).ToArray()
      }
    ).ToArray()
  }
).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:03:22.980

```
 var q = (from dt in public."dataTypes"
         // Join the second table to the first, using the IDs of the two tables <-- You may join on different columns from the two tables
         join dta in public."dataTypeAttributes" on
         new { ID = dt.id } equals
         new { ID = dta.id }
         // Join the third table to the first, using the IDs of the two tables
         join dtav in public."dataTypeAttributeId" on
         new { ID = dt.id } equals
         new { ID = dtav.id }
         // Conditional statement
         where dt.id == dta."dataTypeId"
         // Order the results
         orderby dt.type, dta.label, dtav.value
         // Select the values into a new object (datObj is a created class with the below variables)
         select new datObj() {
            ID = dt.id,
            Type = dt.type,
            AttID = dta.id,
            Label = dta.label,
            AttValueID = dtav.id,
            AttValue = dtav.value
         }).ToList() 
```

`where`这将按照语句指定的顺序返回与您的语句匹配的列表`orderby`。

不完全是你需要的，但应该给你一个你应该做什么的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T17:36:21.737

试试`GroupJoin`sytnax

还有`Join`常规内连接的语法

这个[链接](http://geekswithblogs.net/Martinez/archive/2010/01/27/groupjoin-method-tutorial.aspx)有一个组加入的例子

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T14:26:45.990

Yopu应该检查这个：[http ://codingsense.wordpress.com/2009/03/08/left-join-right-join-using-linq/](http://codingsense.wordpress.com/2009/03/08/left-join-right-join-using-linq/)

# javascript - 具有自己符号的 Openlayers 图形功能

> ID：12496810
> 
> 赞同：2
> 
> 时间：2012-09-19T14:24:54.093
> 
> 标签：javascript, openlayers, graphic, sproutcore

如示例[http://openlayers.org/dev/examples/graphic-name.html](http://openlayers.org/dev/examples/graphic-name.html) ...我尝试将特征几何图形绘制为标志，但我意识到 OpenLayers 始终使用几何图形的质心将特征放置在指定点（纬度/经度），而我希望将标志的底部放置在指定点。更改 Renderer.symbol 的值没有任何效果，graphicXOffset/graphicYOffset 也没有。

```
//my flag geometry
OpenLayers.Renderer.symbol.flag = [0, 0, 0, 140, 120, 140, 120, 60, 4, 60, 4, 0, 0, 0];

//create vector layer with default and select styles
myVectorLayer = new OpenLayers.Layer.Vector("Flag Geometry", {
    renderers: renderer,
    isBaseLayer: true,
    graphicName: flag,
    rotation: 180,
    pointRadius: 15,
    projection: new OpenLayers.Projection("EPSG:900913"),
    styleMap: new OpenLayers.StyleMap({
        "default": new OpenLayers.Style(OpenLayers.Util.applyDefaults({
            fillColor: "red",
            strokeColor: "gray",
            label: "${label}",
            fontColor: "${favColor}",
            fontSize: "12px",
            fontFamily: "Courier New, monospace",
            fontWeight: "bold",
            labelYOffset: 2 //for flag
        }, OpenLayers.Feature.Vector.style["default"])),
        "select": new OpenLayers.Style(OpenLayers.Util.applyDefaults({
        }, OpenLayers.Feature.Vector.style["select"]))
    })
});

var flag = new OpenLayers.Geometry.Point(latitude, longitude);
var flagFeature = new OpenLayers.Feature.Vector(flag);
myVectorLayer.addFeatures([flagFeature]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:04:38.553

为了克服这个基点问题，我改变了绘制方法如下：

```
myVectorLayer = new OpenLayers.Layer.Vector("Flag Geometry", {
renderers: renderer,
isBaseLayer: true,
projection: new OpenLayers.Projection("EPSG:900913"),
styleMap: new OpenLayers.StyleMap({
    "default": new OpenLayers.Style(OpenLayers.Util.applyDefaults({
        fillColor: "red",
        strokeColor: "gray",
        label: "${label}",
        fontColor: "${favColor}",
        fontSize: "12px",
        fontFamily: "Courier New, monospace",
        fontWeight: "bold",
        labelYOffset: 2 //for flag
    }, OpenLayers.Feature.Vector.style["default"])),
        "select": new OpenLayers.Style(OpenLayers.Util.applyDefaults({
    }, OpenLayers.Feature.Vector.style["select"]))
})
});

var pointList = [];
var xs = [0, 0, 240, 240, 8, 8, 0];
var ys = [0, 280, 280, 120, 120, 0, 0];

for(var p=0; p<6; ++p) {
    var newPoint = new OpenLayers.Geometry.Point(camera.get('latitude') + xs[p],
        camera.get('longitude') + ys[p]);

    pointList.push(newPoint);
}
pointList.push(pointList[0]);
var linearRing = new OpenLayers.Geometry.LinearRing(pointList);
var flagVector = new OpenLayers.Feature.Vector(
        new OpenLayers.Geometry.Polygon([linearRing]));

flagVector.attributes= {
    label: 'label',
    favColor: 'blue', //favorite color
    align: "cm"
};
myVectorLayer.addFeatures([flagVector]); 
```

这虽然会使几何缩放与地图缩放不同，但不是以前的方式。

# java - 在java中将二维数组写入文件

> ID：12496814
> 
> 赞同：0
> 
> 时间：2012-09-19T14:25:05.630
> 
> 标签：java, arrays, text-files

我正在尝试使用以下简单代码将二维数组写入文件：

```
public void writeZ(PrintWriter out) { 
    for(int i=0;i<z.length;i++) {
    int count = 0;
    for (int j=0; j<z[i].length; j++) {
         out.print(z[i][j] + " ");
         count++;
    }
    System.out.print( count);
    out.println();
    }
} 
```

**注意**：*计数*仅用于调试

我的问题是文件大小与数组大小不匹配。
行数是正确的（45），但最后一行是 1643 个数字，而不是数组中的 6006 个。

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T14:27:19.160

您可能不会关闭编写器，也不会调用flush。最后尝试这样做：

```
out.flush();
out.close(); 
```

另请参阅[此](https://stackoverflow.com/questions/1742361/flush-in-java-io-filewriter)以获取有关该主题的更多信息。

# c++ - 如果用户使用 Rice 在 Ruby 中重新定义 initialize()，请避免 C++ 代码中的 Segfault

> ID：12496817
> 
> 赞同：6
> 
> 时间：2012-09-19T14:25:16.987
> 
> 标签：c++, ruby

在为 Ruby 编写 C++ 扩展时，我一直在努力解决的一个问题是，即使用户做了一些愚蠢的事情，也让它变得非常安全。那么他应该得到异常，但绝不会出现SegFault。一个具体的问题如下：我的 C++ 类有一个重要的构造函数。然后我使用 Rice API 来包装我的 C++ 类。如果用户在他的 Ruby 代码中重新定义了 initialize()，那么由 Rice 创建的 initialize() 函数将被覆盖，并且对象既不会被分配也不会被初始化。一个玩具示例可能如下：

```
class Person {
public:
  Person(const string& name): m_name (name) {}
  const string& name() const { return m_name; }
private:
  string m_name;
} 
```

然后我像这样创建 Ruby 类：

```
define_class<Person>("Person")
  .define_constructor(Constructor<Person, const string&>(), Arg("name"))
  .define_method("name", &Person::name); 
```

然后以下 Ruby 代码会导致 Segfault

```
require 'MyExtension'
class Person
  def initialize
  end
end
p = Person.new
puts p.name 
```

有两种可能性我会很高兴：禁止以某种方式覆盖 Ruby 中的初始化函数或检查 C++，如果对象已正确分配，否则抛出异常。

我曾经直接使用过 Ruby C API，然后就很简单了。我刚刚分配了一个由空指针和在 allocate() 函数中设置为 false 的标志组成的虚拟对象，在初始化方法中，我分配了真实对象并将标志设置为 true。在每个方法中，我检查了那个标志并引发了一个异常，如果它是假的。然而，我用 Ruby C API 写了很多愚蠢的重复代码，我首先必须包装我的 C++ 类，以便它们可以从 C 访问，然后包装和解包 Ruby 类型等，另外我必须检查这个愚蠢的标志每一种方法，所以我迁移到了赖斯，这真的很好，我很高兴。

然而，在 Rice 中，程序员只能提供一个构造函数，该构造函数在 rice 创建的 initialize() 函数中调用，而 allocate() 函数是预定义的，什么也不做。我认为没有一种简单的方法可以改变这一点或以“官方”方式提供自己的分配功能。当然，我仍然可以使用 C API 来定义 allocate 函数，所以我尝试以某种方式将 C API 和 Rice 混合，但后来我变得非常讨厌，我得到了奇怪的 SegFaults 并且真的很丑，所以我放弃了这个想法.

这里有没有人有过大米的经验，或者有没有人知道如何保证这个安全？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T09:07:30.187

这个怎么样

```
class Person
  def initialize
    puts "old"
  end
  alias_method :original_initialize, :initialize

  def self.method_added(n)
    if n == :initialize && !@adding_initialize_method
      method_name = "new_initialize_#{Time.now.to_i}"
      alias_method method_name, :initialize
      begin
        @adding_initialize_method = true
        define_method :initialize do |*args|
          original_initialize(*args)
          send method_name, *args
        end
      ensure
        @adding_initialize_method = false
      end
    end
  end
end

class Person
  def initialize
    puts "new"
  end
end 
```

然后调用`Person.new`输出

```
old
new 
```

即我们的旧初始化方法仍然被调用

这使用了`method_added`每当添加（或重新定义）方法时调用的钩子，此时新方法已经存在，因此阻止它们执行此操作为时已晚。相反，我们为新定义的`initialize`方法取别名（您可能需要更加努力地确保方法名称是唯一的）并定义另一个初始化，它先调用旧的初始化方法，然后再调用新的方法。

如果这个人是明智的并且`super`从他们的初始化中调用，那么这将导致您的原始初始化方法被调用两次 - 您可能需要防止这种情况

您可以只抛出一个异常`method_added`来警告用户他们正在做坏事，但这并不能阻止添加该方法：该类现在处于不稳定状态。您当然可以在他们的方法之上实现您的原始初始化方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T08:37:00.047

在您的评论中，您说在 c++ 代码中，`this`是一个空指针。如果可以从 ruby​​ 以这种方式调用 c++ 类，恐怕没有真正的解决方案。C++ 的设计初衷并非万无一失。基本上这发生在 c++ 中；

```
Person * p = 0;
p->name(); 
```

一个好的 c++ 编译器会阻止你这样做，但你总是可以以编译器无法检测到正在发生的事情的方式重写它。这会导致未定义的行为，程序可以做任何事情，包括崩溃。

当然，您可以在每个非静态函数中检查这一点；

```
const string& Person::name() const 
{ 
    if (!this) throw "object not allocated";
    return m_name; 
} 
```

为了使其更容易并避免重复代码，请创建一个`#define`;

```
#define CHECK if (!this) { throw "object not allocated"; }

const string& name() const { CHECK; return m_name; }
int age() const { CHECK; return m_age; } 
```

然而，最好避免在 ruby​​ 中用户可以重新定义初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-23T17:39:19.277

这是一个有趣的问题，不是 Rice 特有的，而是任何将分配和初始化分离为单独方法的扩展。我没有看到明显的解决方案。

在 Ruby 1.6 天，我们没有分配/初始化；我们有新的/初始化的。Rice 中可能仍然存在定义 MyClass.new 而不是 MyClass.allocate 和 MyClass#initialize 的代码。Ruby 1.8 将分配和初始化分离为单独的方法（[http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/23358），Rice](http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/23358)使用新的“分配框架”。但它有你指出的问题。

allocate 方法*无法*构造对象，因为它没有要传递给构造函数的参数。

Rice 可以定义 .new（就像在 1.6 上所做的那样），但这不适用于#dup 和 Marshal.load。然而，这可能是更安全（和正确）的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T15:53:40.147

我现在认为这是赖斯图书馆的问题。如果您按照记录的方式使用 Rice，您会遇到这些问题，并且没有明显的方法可以解决它，并且所有解决方法都有缺点并且很糟糕。所以我想解决方案是分叉 Rice 并修复这个问题，因为他们似乎忽略了错误报告。

# jsf - Primefaces commandButton：f：属性不起作用

> ID：12496819
> 
> 赞同：3
> 
> 时间：2012-09-19T14:25:30.957
> 
> 标签：jsf, jsf-2, spring-webflow

项目使用 Spring Webflow 和 JSF (PrimeFaces)。我有 ap:commandButton 和 f:attribute

```
<p:commandButton disabled="#{editGroupMode=='edit'}" action="edit_article_group"  actionListener="#{articleGroupManager.setSelectedRow}" ajax="false" value="Edit">    
    <f:attribute name="selectedIndex" value="${rowIndex}" /> 
</p:commandButton> 
```

后端代码（Spring注入的bean）：

```
@Service("articleGroupManager")
public class ArticleGroupManagerImpl implements ArticleGroupManager{
    public void setSelectedRow(ActionEvent event) {
    String selectedIndex = (String)event.getComponent().getAttributes().get("selectedIndex");
    if (selectedIndex == null) {
      return;
    }
  }
} 
```

属性“selectedIndex”始终为空。有人知道这里发生了什么吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:06:55.507

变量名“rowIndex”表明您已经在迭代组件中声明了它，例如`<p:dataTable>`.

那么这确实行不通。组件树中实际上只有一个 JSF 组件，它在生成 HTML 输出期间被多次重用。是在创建组件时评估的`<f:attribute>`（这只发生一次，远在迭代之前！），而不是在组件基于当前迭代的行生成 HTML 时。确实会一直如此`null`。

无论如何，有几种方法可以实现您的具体功能要求。最明智的方法是将其作为方法参数传递：

```
<p:commandButton value="Edit" 
    action="edit_article_group"  
    actionListener="#{articleGroupManager.setSelectedRow(rowIndex)}" 
    ajax="false" disabled="#{editGroupMode=='edit'}" /> 
```

和

```
public void setSelectedRow(Integer rowIndex) {
    // ...
} 
```

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)
*   [如何将选定的行传递给 dataTable 中的 commandLink？](https://stackoverflow.com/questions/4994458/how-can-i-pass-a-parameter-to-a-commandlink-inside-a-datatable)

* * *

**与具体问题无关**，在这种特殊情况下，我只使用带有请求参数的 GET 链接来使请求具有幂等性（可添加书签、可重新执行而不会影响服务器端、searchbot-crawlable 等）。另请参阅[JSF 2.0 中的通信 - 处理 GET 请求参数](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ProcessingGETRequestParameters)。

# php - 使用表单填充链接

> ID：12496820
> 
> 赞同：-3
> 
> 时间：2012-09-19T14:25:33.763
> 
> 标签：php

如何创建一个表单，以便当用户在文本区域中输入详细信息时 - 当提交按钮打开该链接时，该文本进入链接的中间。

例如。[http://www.mysite.com/hellojohn123hi](http://www.mysite.com/hellojohn123hi)

其中 123 使用表单放置在链接中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:41:07.980

您需要使用一些 javascript 将输入（来自 textarea）放入提交按钮的链接中。然后使用，POST。[jquery 中 document.ready() 的教程](http://docs.jquery.com/Tutorials%3aIntroducing_%24%28document%29.ready%28%29)

# android - 有没有办法将活动加载到屏幕的某个部分？

> ID：12496828
> 
> 赞同：1
> 
> 时间：2012-09-19T14:26:15.303
> 
> 标签：android, android-activity, loading

在我的应用程序上，我有一个菜单，我想为我拥有的每个活动和不同的页面显示该菜单。问题是我找不到将此菜单应用于所有活动的方法，也找不到将活动加载到屏幕特定部分的方法。

屏幕中央有一个很大的矩形，我很想拥有它，这样每当我打开一个新屏幕时，屏幕布局就会加载到矩形内。

还是我只需要复制和粘贴每个布局的 xml 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:29:35.743

您应该考虑使用[Fragments](http://developer.android.com/guide/components/fragments.html)。您可以定义一个`Fragment`可以`Activity`在应用程序中重用的 a，而不必在不同的`Activities`. 希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:32:10.870

您无法加载`Activity`到屏幕的某个部分。为此（如@Egor 所建议）使用`Fragment`.

但是，关于通用菜单，我建议您创建一个基类，其中`extends Activity`包含您希望在活动中普遍使用的所有内容。稍后，使用您的基类来扩展您的活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:30:40.797

有一些方法可以做到这一点。一种是编写一个自定义菜单，您可以通过`onCreateOptionsMenu`或者使用 ActionBar 来膨胀。
您也可以通过使用菜单编写单独的 xml 并将其添加到带有`<include>`标签的所有布局 xml 中来做到这一点。
第三种方法是使用 Fragments-Class：[链接](http://developer.android.com/guide/components/fragments.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T15:39:31.027

您永远不应该将 xml 代码从一个布局剪切和粘贴到下一个布局。这就是我们包含以下内容的原因：

```
<include layout="@layout/header"/> 
```

不要过度考虑您的问题，您应该查看片段，以便您可以创建可重用的小部件，如菜单，或扩展您的活动以抽象出您的菜单逻辑。

# javascript - jQuery 和 AngularJS 不能一起工作

> ID：12496834
> 
> 赞同：16
> 
> 时间：2012-09-19T14:26:53.903
> 
> 标签：javascript, jquery, jquery-ui, requirejs, angularjs

我正在使用 RequireJS 和 Angular，但它们在我的设置中没有一起工作。当 jQuery 版本为 1.7.2 时，一切正常。但是我想使用 jQuery 1.8.1 和 jQuery UI 和 Angular 应用程序甚至无法用这个初始化我的主模块。

这是问题所在：

区分大小写的变量：jQuery 和 jquery。在 jquery 1.8.1 源代码中，最后他们定义了 window.jQuery。在早期版本 1.7.2 中定义了 window.jquery。

因为我想在我的应用程序中使用 jQuery UI，所以包含文件 jquery-ui-1.8.23.custom.min.js。包含它后，我得到了“jQuery”未定义的错误。

所以，我决定升级我的 jQuery 版本并下载了 1.8.1 版本。在 jQuery 源代码的末尾，我可以看到这个版本定义了 window.jQuery（jQuery UI 需要正确大小写）。

我用 James Burke github 项目的最新版本更新了我的 require-jquery JS，并用 jquery 1.8.1 更新了它。

但是包括更新的 jQuery/RequireJS 项目，angularjs 已经停止工作。

我在 Chrome 控制台中收到此错误：

![控制台输出](../Images/0b06e732999bedbf726ad0b95877bfb0.png)

如果我恢复到 1.7.2 角度作品。或者，如果我编辑 jQuery 文件来定义 window.jquery 而不是 window.jQuery（注意大小写），它会再次起作用。但这意味着 jQuery UI 不会。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-22T07:35:07.657

使用 jQuery 的 noConflict 方法是解决这个问题的一种更优雅和面向未来的解决方案。

[在http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)上查看大量文档

更新（来自链接的示例）：

```
<script>
$.noConflict();
jQuery( document ).ready(function( $ ) {
  // Code that uses jQuery's $ can follow here.
});
// Code that uses other library's $ can follow here.
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T20:33:14.287

我通过从 jQuery 源代码中删除使 $ 和 jQuery 成为全局变量的行来修复此解决方案。这条线看起来像`window.jQuery = window.$ = jQuery`.

如果您还使用 AngularJS 和 RequireJS 并遇到类似问题，请删除这些行。

此外，您必须在项目中使用[jqueryui-amd](https://github.com/jrburke/jqueryui-amd)。从 Github 页面下载该实用程序，它将 jQuery UI 脚本转换为 AMD 模块。

使用称为“指令”的 AngularJS 功能来扩展 HTML 元素，我能够以可重用和理智的方式使用 jQuery UI 组件。

我不得不说，在我的项目上工作时，我既讨厌又喜欢 AngularJS，有时甚至让 Twitter 上的每个人都知道我讨厌 AngularJS。然而，在上个月实施并完成了两个项目之后，我对何时使用它以及何时不使用它有了相当好的想法。

这是我创建的一个 jsFiddle，用于演示将 jQuery UI 与 AngularJS 一起使用：

[http://jsfiddle.net/samunplugged/gMyfE/2/](http://jsfiddle.net/samunplugged/gMyfE/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-31T11:55:51.637

经过两天的尝试后轻松解决了这个问题..

当尝试

将特定的 Slider Jquery 文件直接包含到 view.html 中。从 index.html 文件中删除 jquery

# c# - 是否可以动态实现 C# 接口

> ID：12496837
> 
> 赞同：2
> 
> 时间：2012-09-19T14:27:04.733
> 
> 标签：c#

可以在 C# 中动态实现接口，而无需使用反射发出代码，也许在 DLR 的帮助下。

我的意思是创建一个允许我们执行以下操作的工厂：

```
 IComparable comparable = factory.Create<IComparable>(); 
```

无论是罗斯林的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:34:17.717

我可能错了，但你似乎在寻找 Mixins。

它们在 C# 中不受官方支持，但幸运的[是有 re-mix 项目](http://remix.codeplex.com/)（re-motion 的一部分）

我过去用过它，效果很好，这里有一个例子：

```
/// <summary>
    /// This <see cref="Mixin"/> is used to "automatically" implement <see cref="INotifyPropertyChanged"/> to a target class.
    /// <para>It will also override <c>ToString()</c> to show it's possible.</para>
    /// </summary>
    /// <example>This example adds <see cref="INotifyPropertyChanged"/> to <see cref="INPCTester"/> 
    /// <code>
    /// [ImplementsINPC]
    /// public class INPCTester
    /// {
    ///     private string m_Name;
    ///     public string Name
    ///     {
    ///         get { return m_Name; }
    ///         set
    ///         {
    ///             if (m_Name != value)
    ///             {
    ///                 m_Name = value;
    ///                 ((ICustomINPC)this).RaisePropertyChanged("Name");
    ///             }
    ///         }
    ///     }
    /// }
    /// 
    /// class Program
    /// {
    ///     static void Main(string[] args)
    ///     {
    ///         INPCImplementation();
    ///     }
    ///     
    ///     static void INPCImplementation()
    ///     {
    ///         Console.WriteLine("INPC implementation and usage");
    ///
    ///         var inpc = ObjectFactory.Create{INPCTester}(ParamList.Empty);
    ///
    ///         Console.WriteLine("The resulting object is castable as INPC: " + (inpc is INotifyPropertyChanged));
    ///
    ///         ((INotifyPropertyChanged)inpc).PropertyChanged += inpc_PropertyChanged;
    ///
    ///         inpc.Name = "New name!";
    ///         Console.WriteLine(inpc.ToString());
    ///         ((INotifyPropertyChanged)inpc).PropertyChanged -= inpc_PropertyChanged;
    ///         Console.WriteLine();
    ///     }
    /// }
    /// 
    /// //Outputs: 
    /// //
    /// //INPC implementation and usage
    /// //The resulting object is castable as INPC: True
    /// //Hello, world! Property's name: Name
    /// //Modified tostring!
    /// </code>
    /// </example>    
    /// <remarks>
    /// The <see cref="ImplementsINPCAttribute"/> is syntactic sugar for 
    /// <para>   <c>[Uses(typeof(INotifyPropertyChangedMixin))]</c> on top of the target class</para>
    /// <para>Which is equivalent to: </para>
    /// <para>   <c>[assembly: Mix(typeof(INPCTester), typeof(INotifyPropertyChangedMixin))]</c> outside the namespace.</para>
    /// <para>or <c>[Extends(typeof(INPCTester))]</c> on top of the mixin class</para>
    /// </remarks>
    public class INotifyPropertyChangedMixin : Mixin<object>, ICustomINPC
    {
        public event PropertyChangedEventHandler PropertyChanged;

        /// <inheritdoc />
        public void RaisePropertyChanged(string prop)
        {
             PropertyChangedEventHandler handler = this.PropertyChanged;
             if (handler != null)
             {
                 handler(this, new PropertyChangedEventArgs(prop));
             }
        }

        /// <inheritdoc />
        [OverrideTarget]
        public new string ToString()
        {
            return "Modified tostring!";
        }
    }

    public class ImplementsINPCAttribute : UsesAttribute 
    {
        public ImplementsINPCAttribute()
            : base(typeof(INotifyPropertyChangedMixin))
        {

        }
    } 
```

请注意，虽然 INPCTester 类没有实现 INotifyPropertyChanged，但它可以被强制转换为它并被视为已实现。

高级用法允许您在应用程序的生命周期内修改新创建对象的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:27:22.783

> 可以在 C# 中动态实现接口，而无需使用反射发出代码，也许在 DLR 的帮助下。

是的，我会这么认为。Bill Wagner 有一篇名为[实现动态接口](http://msdn.microsoft.com/en-us/vstudio//ff800651.aspx)的文章。它演示了如何使用[`IDynamicMetaObjectProvide`](http://msdn.microsoft.com/en-us/library/system.dynamic.idynamicmetaobjectprovider.aspx)接口，特别是[`DynamicMetaObject`](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicmetaobject.aspx)类来滚动你自己的动态对象。然而，它是一个有点复杂的概念，在某些时候需要一些反射来将接口的成员连接到相应的 DLR 表示。

您不能使用已经存在的动态对象，[`ExpandoObject`](http://msdn.microsoft.com/en-us/library/System.Dynamic.ExpandoObject.aspx)因为实现的接口（实际上只有一个接口）不能动态更改。

# javascript - 如何从 Javascript / jQuery 中为选择框添加 onChange 属性

> ID：12496838
> 
> 赞同：7
> 
> 时间：2012-09-19T14:27:15.353
> 
> 标签：javascript, html, jquery, jquery-events

我有没有`onChange`属性的选择框。现在加载整个页面后，根据某些条件，我必须`onChange`从 Javascript 中为选择框添加。我正在尝试使用以下代码，但它不起作用：

```
$("#depositForm").attr(("onChange", "selectedMainDepositType('this');" )); 
```

它没有添加`onChange`事件。

```
<select id="depositForm_depositSubType" class="depositSubType" style="width:160px;" name="depositSubType"> 
```

必须更改为

```
<select id="depositForm_depositSubType"  onchange="selectedMainDepositType(this);"  class="depositSubType" style="width:160px;" name="depositSubType"> 
```

请建议如何添加`onChange`属性。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-19T14:28:29.023

你试过了吗...

```
$("#depositForm").on("change", function(event) { 
     selectedMainDepositType(this);
} ); 
```

[jQuery .on()](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T14:28:50.637

```
$("#depositForm").change(function(e){
    selectedMainDepositType($(this));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:58:27.260

```
 document.getElementById('depositForm').onchange = undefined;

 $("#depositForm").change(..); 
```

试一试.. 我希望它对你有用.. 原始帖子[如何在“选择”标签中编辑“onchange”属性？（使用jQuery）](https://stackoverflow.com/questions/3637971/how-to-edit-onchange-attribute-in-a-select-tag-using-jquery)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-05T14:24:13.913

对于任何寻找另一个答案的人。我使用这种方法是因为我必须首先搜索动态创建的选择列表。

```
var dropdown = document.getElementsByTagName("select");
for (i=0; i<dropdown.length; i++) {
    if (dropdown[i].title == "Component") {
        dropdown[i].onchange = changeApproverCC;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-03T17:29:04.170

你可以试试这个：

```
document.getElementById("depositForm").addEventListener('change', (event) => {
 selectedMainDepositType('this');
}); 
```

希望能帮到你:)

# android - Titanium studio 功能反向执行（Android）

> ID：12496839
> 
> 赞同：2
> 
> 时间：2012-09-19T14:27:16.587
> 
> 标签：android, alert, titanium-mobile, reverse

我是 Titanium Studio 的新手，我正在尝试为 android 开发一个应用程序。当我执行以下功能时（即，当我单击窗口时）：

```
win1.addEventListener('click', function(){
    alert('On click');
    alert('End of the function');
}); 
```

首先显示第二个警报“功能结束”，然后显示第一个警报“单击时”。

您对此有什么解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:17:49.120

在 Titanium 中，`alert()`调用是异步的（与 Web 浏览器不同）。[继承人关于它的文档：](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Global-method-alert)

> 请注意，与基于 Web 浏览器的警报版本不同，该方法是异步的。但是，一次只有一个警报对话框是可见的和模态的。
> 
> 请注意，将来可能会删除此方法。

您从一个函数内部触发了两个警报，第二个警报没有首先打开，它们按顺序打开，因此当您打开第`alert('On Click')`一个警报时，它几乎立即被掩盖（或真正被替换，因为一次只显示一个警报）通过打开第二个警报框。

因此，您永远不应该在一个函数中调用多个警报。

考虑 Javascript 和 Titanium 中的最佳实践：你**永远不**应该用它`alert()`来调试现代 javascript，尤其是当你有更强大的工具可供使用时。即使在 Web 浏览器中（使用 Web Developer Tools 或 Firebug）。此外，如前所述，将来可能会从 Titanium 中删除此功能（我希望他们这样做）。

而是使用 Debug 透视图中的内置调试器。它的功能就像其他任何可视化调试器一样。但是，如果您是新手，这里有一个快速链接：[使用 Titanium 进行调试](http://docs.appcelerator.com/titanium/2.1/index.html#!/guide/About_the_Debug_perspective)

另一种选择是使用`printf()`/`console.log`等价于 Titanium，即：

```
Titanium.API.info('On click'); 
```

但是为什么不单步执行代码并为自己省点麻烦。

# uitableview - 使用 UIViewController 创建的 UITableView 中的编辑功能

> ID：12496841
> 
> 赞同：4
> 
> 时间：2012-09-19T14:27:20.320
> 
> 标签：uitableview

我使用 UIViewController（而不是 UITableViewController）创建了表，并将 UITableView 作为其属性。我已经实现了 DataSource 和 Delegate 协议的必要方法。但是当我单击编辑按钮时，我看不到其单元格的任何删除（红色减号），因此我可以选择它们进行删除。如果我使用 UITableViewController，同样可以正常工作。我已经实现了以下方法。

我错过了什么，它在使用标准 UITableViewController 时的行为方式不一样？

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];
self.navigationItem.rightBarButtonItem.enabled = !editing;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView     editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return UITableViewCellEditingStyleDelete;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T15:14:57.633

需要切换`UITableView`到编辑状态：

```
[self.tableView setEditing:YES animated:YES]; 
```

# android - 在 Eclipse 中调试 Android 应用程序时，无法在匿名类中看到最终变量内容

> ID：12496842
> 
> 赞同：12
> 
> 时间：2012-09-19T14:27:22.860
> 
> 标签：android, eclipse, debugging, variables, final

在调试 (eclipse) 中，我无法在变量视图、表达式视图和显示视图中看到变量内容 - 如果变量是在匿名类外部定义的，但调试在匿名类内部。

当我尝试在调试中查看内容时，出现错误：**x cannot be resolved to a variable**。

在以下示例中，无法解析 x：

```
private void someMethod(final Object x) {
  new Runnable() {
    public void run() {
      Log.i(x); // x is printed correctly but cannot be resolved when in Debug
    }
  }.run();
} 
```

这个问题是关于eclipse开发环境的——关于调试Android。这不是关于最终的讨论，也不是关于编译的讨论——只是调试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-20T04:59:53.100

在调试使用线程的应用程序时，我也遇到过类似的问题。我猜你的应用程序是多线程的，因为我曾经只在那种情况下遇到过这样的事情。这可能是因为当您直接运行程序时，几乎所有线程都将同时启动。但是，在调试模式下，设置断点的线程之一将被保留，而其他启动的线程将已经完成或相反。这就是人们说调试多线程应用程序有点困难的原因，除非您保持优先级或使线程同步。

希望这些信息有所帮助。因此，不要用断点停止流程，而是尝试使用 sysout 或类似的东西打印需要知道值的值，这就像只是运行程序但仍在调试，你自己的方式:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:24:53.323

我最近遇到了同样的问题，但是更新了 android SDK 然后重新启动 eclipse 修复了它。尝试将 SDK 更新到最新版本。

# javascript - 区分两个模态窗口？

> ID：12496846
> 
> 赞同：0
> 
> 时间：2012-09-19T14:27:39.987
> 
> 标签：javascript, jquery, modal-dialog

我在我的网址上应用了一个类**模态链接，如下所示：**

```
<a href="form.php" class="modal-link"></a> 
```

这将使用以下代码在模态（弹出）窗口上打开我的*form.php ：*

```
<script>
$(document).ready(function()
{
    $('.modal-link').click(function(event)
    {
        // Declare vars
        var url, openModal;

        // Prevent link opening
        event.preventDefault();

        // Store url
        url = this.href;

        // Function to open modal
        openModal = function()
        {
            $.modal({
                title: 'My title',
                maxWidth: 500,
                url: url,
                loadingMessage: 'Loading...',
                buttons: {
                    'Close': function(win) { win.closeModal(); },
                    'Open new modal': openModal
                }

            });
        };

        // Open first modal
        openModal();
    });
});
</script> 
```

如您所见，在此模态窗口上有一个名为“打开新模态”的按钮，此按钮将打开一个新的模态窗口，其中包含相同的*form.php*文件，而第一个模态窗口仍然可见。

如果我继续在我的第一个模态窗口上提交表单，它将不起作用，因为两个模态（包含相同的 form.php）似乎相互碰撞。

如果我只打开一个模式窗口，则提交我的表单有效。

有没有办法让每个模式都独一无二，这样我就可以在我的第一个模式窗口上提交表单而不会与第二个模式窗口发生冲突或干扰？

区分两个模态窗口的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:10:22.113

你能解释一下是`$.modal`什么吗？我尝试搜索，但找不到任何可以明确说明的内容。它是您正在使用的插件吗？

您还可以澄清表单提交是导致页面加载还是基于ajax？如果它是基于 ajax 的，则某些事件或变量可能会发生冲突。

当我调试 Javascript 时，我通常会打开 chrome 上的控制台，这通常会使调试更容易。

# ora-01426 - 将 +1.7976931348623155E308 插入列 ORA-01426 数字溢出

> ID：12496848
> 
> 赞同：1
> 
> 时间：2012-09-19T14:27:47.973
> 
> 标签：ora-01426

我正在移植一个使用大型 Java 双精度值 (MAX-1d = +1.7976931348623155E308) 作为信号量来指示条件的应用程序。我无法弄清楚如何定义列以接受此值而不产生错误：ORA-01426：数字溢出。我尝试了 FLOAT 的各种精度（直到 126），以及 DOUBLE_PRECISION 和 BINARY_DOUBLE，并尝试使用 TO_BINARY_DOUBLE 的触发器 - 都失败了。我用的是11g。DB2 接受 DOUBLE 作为数据类型并处理该值。

```
-- DDL for Table TEST (generated from specifying BINARY_DOUBLE for COLUMN1)

CREATE TABLE "DB2ADMIN"."TEST"
( "COLUMN1" BINARY_DOUBLE
) SEGMENT CREATION IMMEDIATE
PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
TABLESPACE "SYSTEM" ;

insert into test (column1) values (+1.7976931348623155E308);
ERROR at line 1:
ORA-01426: numeric overflow 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:40:47.943

显然，我需要使用字符串转换为二进制双精度才能工作：

SQL> 插入测试 (column1) 值 (to_binary_double('1.7976931348623155E308'));

创建了 1 行。

SQL> select * from test where column1 = (to_binary_double('1.7976931348623155E308'));

第 1 列 1.798E+308

SQL> 从测试中删除 column1 > 0;

已删除 1 行。

# html - 关于 DIV 布局问题的 html5/css3 DIV

> ID：12496849
> 
> 赞同：-1
> 
> 时间：2012-09-19T14:28:00.343
> 
> 标签：html

我有 div 区域，它被分成 4 个相等的部分，就像附加的那个一样。

现在我需要将另一个 div 放置在底部区域作为上述 div 的覆盖。想象一下它就像电视底部的一个文本滚动区域，电视屏幕由 4 个 div 构成。

我能够创建 5 个 div。现在的问题是第 5 个 div（滚动区域）没有超出 2 个较低 div（3 和 4）的底部边缘。我也放了 z-index 但失败了

任何人都可以分享一个样式的样本。 ![样品要求](../Images/f2fb4f8da9c1761c7afd3acf40d34dff.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:59:11.447

你可以这样解决它：

*HTML：*

```
<div class="area"></div>
<div class="area"></div>
<div class="area"></div>
<div class="area"></div>

<div class="overlay"></div>​ 
```

*CSS：*

```
.area{
  float: left;
  width: 49%;    
  height: 300px;
  border: 1px solid black;
}

.overlay{
    width: 200px;
    height: 100px;
    background-color: blue;
    clear: both;
    position: absolute;
    bottom: 30px;
    margin: -100px;
    left: 50%;
}
​ 
```

请注意，我使用了硬编码的示例值。实际值取决于标记所在的上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:51:20.177

没有您的代码，很难弄清楚什么不起作用。如果我明白你想要什么，这就是我会做的：

```
<div class="container">
    <div class="block1"></div>
    <div class="block2"></div>
    <div class="block3"></div>
    <div class="block4"></div>
    <div class="overlay"></div>
</div> 
```

CSS：

```
.container {
    position: relative;
    width: 600px; /* use the size you want */
    height: 400px;
}

.container div {
    position: absolute;
    width: 50%;
    height: 50%;
}

.container .block1 { top: 0; left: 0; background: pink; }
.container .block2 { top: 50%; left: 0; background: red; }
.container .block3 { top: 0; left: 50%; background: green; }
.container .block4 { top: 50%; left: 50%; background: blue; }

.container .overlay {
    position: absolute;
    width: 80%;
    height: 100px; 
    left: 10%;
    bottom: 30px; /* distance from the bottom */
    z-index: 1;
    background: yellow;
} 
```

# javascript - d3力图：粘性节点

> ID：12496851
> 
> 赞同：6
> 
> 时间：2012-09-19T14:28:06.257
> 
> 标签：javascript, layout, graph, d3.js, force-layout

我想在 D3 中向强制定向图形布局添加一种行为，即一旦放下，拖放的 svg 节点就会固定在其位置，无论图形中发生什么其他情况，都不再改变位置。我已经阅读了一些关于这个 API 的内容，但我无法找到一种方法来让那个 API 工作。

我试图解决的问题是允许用户“挑选”一个复杂的力图。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T16:20:32.850

`fixed`在鼠标按下时将节点的属性设置为 true。

```
node.on("mousedown", function(d) { d.fixed = true; }); 
```

例如：[http ://bl.ocks.org/3750558](http://bl.ocks.org/3750558)

# model-view-controller - 视图或模型中的“数字舍入”？

> ID：12496855
> 
> 赞同：2
> 
> 时间：2012-09-19T14:28:30.997
> 
> 标签：model-view-controller, view, model, standards, rounding

也许这是一个愚蠢的问题，但我完全不确定视图应该有多“智能”：

**在视图中舍入一个数字是一种好习惯（还是不行，你必须在模型中这样做）？**

舍入通常是布局/输出的事情，也是属于模型的数学问题。嗯……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:33:53.500

我喜欢在视图中最后可能的时刻进行四舍五入的想法，因为有很多数量（例如货币）将使用两个小数点显示，但是在执行计算时需要更高的精度（尽管货币是一个不好的例子，因为你可能想使用精确的整数算术，但你明白了）。

# sql - 获取最新的不同记录

> ID：12496857
> 
> 赞同：2
> 
> 时间：2012-09-19T14:28:33.247
> 
> 标签：sql, sql-server-2008-r2

考虑下表：

```
用户创建日期时间数量
----- ----- --------
吉姆 2012-09-19 01:00 1
吉姆 2012-09-19 02:00 5
吉姆 2012-09-19 03:00 2
鲍勃 2012-09-19 02:00 2
鲍勃 2012-09-19 03:00 9
鲍勃 2012-09-19 05:00 1

```

什么查询将返回每个 的最新行（由 定义`CreatedDateTime`）`User`，以便我们可以确定关联的`Quantity`.

即以下记录

```
用户创建日期时间数量
----- ----- --------
吉姆 2012-09-19 03:00 2
鲍勃 2012-09-19 05:00 1

```

我们认为我们可以简单地`Group By` `User`添加`CreatedDateTime`一个`Having MessageCreationDateTime = MAX(.MessageCreationDateTime`. 当然这不起作用，因为`Quantity`在`Group By`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T14:31:04.667

由于您使用的是 SQL Server，因此您可以在此使用[窗口函数](http://www.postgresql.org/docs/9.1/static/tutorial-window.html)。

```
SELECT [User], CreatedDateTime, Quantity
FROM
    (
        SELECT [User], CreatedDateTime, Quantity,
                ROW_NUMBER() OVER(PARTITION BY [User] ORDER BY CreatedDateTime DESC) as RowNum
        FROM tableName
    ) a
WHERE  a.RowNum = 1 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!6/e08c1/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T14:31:28.790

```
;WITH x AS
(
  SELECT [User], CreatedDateTime, Quantity, 
   rn = ROW_NUMBER() OVER (PARTITION BY [User] ORDER BY CreatedDateTime DESC)
  FROM dbo.table_name
)
SELECT [User], CreatedDateTime, Quantity
FROM x WHERE rn = 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T14:32:24.660

如果您没有使用窗口函数的能力，那么您可以使用子查询：

```
select t1.[user], t2.mxdate, t1.quantity
from yourtable t1
inner join
(
    select [user], max(CreatedDateTime) mxdate
    from yourtable
    group by [user]
) t2
    on t1.[user]= t2.[user]
    and t1.CreatedDateTime = t2.mxdate 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!6/a1be9/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T14:32:10.773

```
SELECT DISTINCT 
User, 
CreatedDateTime, 
Quantity
FROM 
YourTable
WHERE 
CreatedDateTime = 
(SELECT MAX(CreatedDateTime) FROM YourTable t WHERE t.User = YourTable.User) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T15:00:33.430

```
select * from <table_name> where CreatedDateTime in (select max(CreatedDateTime) from <table_name> group by user) group by user; 
```

# html - iOS：脱衣舞 来自 NSString（一个 html 字符串）

> ID：12496860
> 
> 赞同：8
> 
> 时间：2012-09-19T14:28:40.203
> 
> 标签：html, objective-c, ios, image

所以我有一个`NSString`基本上是一个`html`包含所有常用`html`元素的字符串。我想做的具体事情就是**从所有`img`标签中删除它。** 标签可能有`img`也可能没有最大宽度、样式或其他属性，所以我不知道它们的长度。他们总是以`/>`

我怎么能这样做？

**编辑：**根据`nicolasthenoz`的回答，我想出了一个需要更少代码的解决方案：

```
NSString *HTMLTagss = @"<img[^>]*>"; //regex to remove img tag
NSString *stringWithoutImage = [htmlString stringByReplacingOccurrencesOfRegex:HTMLTagss withString:@""]; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T15:02:45.663

您可以使用带有以下选项的`NSString`方法：`stringByReplacingOccurrencesOfString``NSRegularExpressionSearch`

```
NSString *result = [html stringByReplacingOccurrencesOfString:@"<img[^>]*>" withString:@"" options:NSCaseInsensitiveSearch | NSRegularExpressionSearch range:NSMakeRange(0, [html length])]; 
```

或者你也可以使用 的[`replaceMatchesInString`](https://developer.apple.com/library/mac/documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009708-CH1-SW12)方法`NSRegularExpression`。因此，假设您的 html 在 a 中`NSMutableString *html`，您可以：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"<img[^>]*>"
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:nil];

[regex replaceMatchesInString:html
                      options:0
                        range:NSMakeRange(0, html.length)
                 withTemplate:@""]; 
```

我个人倾向于这些选项之一而`stringByReplacingOccurrencesOfRegex`不是[`RegexKitLite`](http://regexkit.sourceforge.net/RegexKitLite/). 除非有其他令人信服的问题，否则没有必要为如此​​简单的事情引入第三方库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T14:34:57.540

使用正则表达式，在字符串中找到匹配项并将其删除！这是如何

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"<img[^>]*>"
                                                                       options:NSRegularExpressionCaseInsensitive 
                                                                         error:nil];

NSMutableString* mutableString = [yourStringToStripFrom mutableCopy];
NSInteger offset = 0; // keeps track of range changes in the string due to replacements.
for (NSTextCheckingResult* result in [regex matchesInString:yourStringToStripFrom 
                                                    options:0 
                                                      range:NSMakeRange(0, [yourStringToStripFrom length])]) {

    NSRange resultRange = [result range];   
    resultRange.location += offset; 

    NSString* match = [regex replacementStringForResult:result 
                                               inString:mutableString 
                                                 offset:offset 
                                               template:@"$0"];

    // make the replacement
    [mutableString replaceCharactersInRange:resultRange withString:@""];

    // update the offset based on the replacement
    offset += ([match length] - resultRange.length);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-29T10:24:48.203

您可以在 Swift 4,5 中使用以下函数：

```
func filterImgTag(text: String) -> String{
    return text.replacingOccurrences(of: "<img[^>]*>", with: "", options: String.CompareOptions.regularExpression)
} 
```

希望对大家有帮助！如果它适合你，请在下面评论。谢谢。

# c - 如何对 LLVM 位码文件执行整个程序优化

> ID：12496870
> 
> 赞同：2
> 
> 时间：2012-09-19T14:29:12.067
> 
> 标签：c, optimization, compiler-construction, llvm, clang

我有几个 LLVM 位码文件，我链接这些文件`llvm-link`以创建一个位码文件。但是，`llvm-link`不执行整个程序优化 (WPO)。如何链接位码，以便链接器还执行 WPO 以生成最终的位码文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:58:56.250

[使用llc](http://llvm.org/docs/CommandGuide/llc.html)编译 bitcode 文件时将执行优化。或者，使用[opt](http://llvm.org/docs/CommandGuide/opt.html)直接调用优化器。

仅使用 clang 也应该*做正确的事情*。

# django - Django Haystack 仅从 solr 检索一个字段

> ID：12496873
> 
> 赞同：2
> 
> 时间：2012-09-19T14:29:16.473
> 
> 标签：django, solr, django-haystack

抱歉这个问题很简单（我是 Django 新手），但我想知道如何使用 Django，Haystack 和 Solr 从一个字段中检索数据。例子：

我有两个模型：

```
class Category(models.Model):
  name = models.CharField("Category name", max_length=255)

class Post(models.Model):
  title = models.CharField("Post title", max_length=255)
  category = models.ManyToManyField(Category, related_name="category") 
```

我像这样索引 Post 模型：

```
class PostIndex(SearchIndex):
    text = CharField(document=True, use_template=True)
    title = EdgeNgramField(model_attr='title')
    category = FacetMultiValueField()

    def get_model(self):
        return Post

    def prepare_category(self, obj):
        return obj.category.all()

    def index_queryset(self):
        return self.get_model().objects.all()

site.register(Post, PostIndex) 
```

问题来了：如何使用 Haystack 仅检索 Category 字段。我希望类别显示为具有计数但不使用的方面：

```
url(r'^search/$', FacetedSearchView(form_class=FacetedSearchForm, searchqueryset=sqs), name='haystack_search'), 
```

在我的 url.py 中。我正在使用自己的视图进行搜索。提前感谢您的回答！

**我在用着：**

*   姜戈 1.4
*   干草堆 1.2.7
*   索尔 3.6.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:34:17.730

您可以尝试以下方法：

```
from haystack.query import SearchQuerySet

categories = Category.objects.all()
sqs = SearchQuerySet()

facets = {}
for category in categories:
    facets.update(sqs.facet(category.name).facet_counts()['fields']) 
```

您可以在模板中进行迭代`facets`以显示其中的值以及计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:41:53.853

好的，这就是我解决此问题的方法-我使用了 Thierry Lams 代码，但对其进行了一些修改：

```
from haystack.query import SearchQuerySet
from myapp.models import Category

categories = Category.objects.all()
sqs = SearchQuerySet()

facets = {}
for category in categories:
    facets.update(sqs.facet('category').facet_counts()) 
```

接下来，要读取作为字典的 facet 变量，我在模板中执行了此操作（新变量类别实际上是 facets 字典）：[http ://tny.cz/40a7bf82](http://tny.cz/40a7bf82)

# visual-studio-2010 - 在 Visual Studio 中突出显示标识符的源代码中的所有匹配项

> ID：12496875
> 
> 赞同：1
> 
> 时间：2012-09-19T14:29:23.603
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2008

不幸的是，现在我是那些寻求帮助以在 Visual Studio 中找到一些个人设置的人之一，但经过很长时间的搜索，我只是放弃了。

我需要同时打开 Visual Studio 2008 和 2010 的以下功能：

*如果单击源代码中的标识符，Visual Studio 将用灰色突出显示该标识符的所有其他出现。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-09T14:45:45.587

[Visual Studio 的此扩展](http://visualstudiogallery.msdn.microsoft.com/4b92b6ad-f563-4705-8f7b-7f85ba3cc6bb)将**突出显示所选单词的所有出现**

[http://visualstudiogallery.msdn.microsoft.com/4b92b6ad-f563-4705-8f7b-7f85ba3cc6bb](http://visualstudiogallery.msdn.microsoft.com/4b92b6ad-f563-4705-8f7b-7f85ba3cc6bb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:30:35.960

也许：

![在此处输入图像描述](../Images/ebb7ceea32d556738bca2db46a3e399e.png)

我自己无法对此进行测试，无法判断它是 MSVS 功能还是 Visual Assist。您可能需要为此启用 Intellisense。

# javascript - ReSharper 无法识别自定义 qunit 测试

> ID：12496879
> 
> 赞同：0
> 
> 时间：2012-09-19T14:29:36.460
> 
> 标签：javascript, unit-testing, resharper, qunit, resharper-7.0

我想使用 ReSharper 运行我的 javascript 单元测试。但我没有让 ReSharper 检测到我的自定义测试功能。

```
customTest("my test", function() {
  // do some stuff to test my code
  ok("The test run successfully");
}

function customTest(testName, testFunc) {
  // do some stuff to initialize the test object
  // this is supposed to happen for every test
  test(testName, testFunc);
} 
```

运行此文件时，将执行所有测试，但不会将测试添加到 ReSharper 测试运行程序。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:08:01.820

我认为 resharper 无法识别您的测试。我只是运行你的函数调用，但它怎么知道你的测试是什么？

# html - HTML 页脚 CSS 设置

> ID：12496881
> 
> 赞同：1
> 
> 时间：2012-09-19T14:30:00.430
> 
> 标签：html, css

我浪费了太多的精力和时间试图用 HTML/CSS 创建这个页脚，我就是做错了。有人告诉我最好的方法是使用`<ul>`and `<li>`，但是让它正确对齐是一个挑战！

这就是它应该的样子 ![这就是它应该的样子](../Images/b8d412d24c4ee55910a3142424a74ca2.png)

这是我的版本的样子 ![这是我的版本的样子](../Images/d0973efd0006fc2098bc36459baf9e1d.png)

我试图做的是以下内容：（CSS在下面）。

```
<div class="footer">
        <div class="wrapper">
            <div class="footer_container">
<ul>
    <li><strong>Title/header</strong>
    <ul>
        <li>Adresse, street</li>
        <li>Tlf: Phone</li>
    </ul>
    <ul class="right">
        <li>Zipcode/City</li>
        <li>Mail: Email</li>
    </ul>
    </li>
    <li><strong>Links</strong>
    <ul>
        <li>Om skolen</li>
        <li>Galleri</li>
    </ul>
    <ul>
        <li>Elever</li>
        <li>For&aelig;ldre</li>
    </ul>
    <ul class="right">
        <li>Kalender</li>
        <li>Fag</li>
    </ul>
    </li>
</ul>
</div>
</div>
</div>

    .footer { background:url(images/footer_bg.png) top repeat-x #e4e2de; width:100%; padding:20px 0 30px 0; }
.footer ul { margin: 0; padding: 0; list-style: none; }
.footer ul li { display: inline; margin-left: 25px; }
.footer_container { margin:22px 0 0 0;  }

.footer_container ul { margin:0; padding:0; color:#413f3d; width:100%;  }
.footer_container ul li { display:inline-block; list-style:none; margin:0; font-size:11px; text-align:left; vertical-align:top; padding:0; width:270px; }
.footer_container ul li ul { width:120px; float:left; }
.footer_container ul li ul li { display:block; width:auto; }
.footer_container ul.right { float:right; } 
```

我已经插入了 3 张图片，因为第二个盒子看起来不太好。我愿意接受任何建议/想法！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:22:03.370

我会改变它，而不是在页脚内使用容器。

# HTML

```
<div class="footer_container">
    <div class="container">
        <strong>Title</strong>
        <ul>
            <li>Adresse</li>
            <li>Tlf: Phone</li>
            <li>Zipcode/City</li>
            <li>Mail: Email</li>
        </ul>
    </div>
    <div class="container">
        <strong>Links</strong>
        <ul>
            <li>Om skolen</li>
            <li>Elever</li>
            <li>Kalender</li>
            <li>Galleri</li>
            <li>For&aelig;ldre</li>
            <li>Fag</li>
        </ul>
    </div>
    <div class="container">
        Your FB/Twitter things
    </div>
</div>​ 
```

# CSS

```
.footer_container{
    width: 960px;
}
.footer_container strong{
    font-weight: bold;
}
.footer_container div.container{
    width: 320px;
    float: left;
}
.footer_container ul{
    list-style: none;
    margin: 0;
    padding: 0;
}
.footer_container ul li {
    width: 160px;
    float: left;
} 
```

# 演示

在[jsFiddle 结束](http://jsfiddle.net/atTG9/1/)。

# javascript - 数据属性 css 选择器比类选择器快吗？

> ID：12496884
> 
> 赞同：44
> 
> 时间：2012-09-19T14:30:08.030
> 
> 标签：javascript, css, performance, html, css-selectors

几个月前[，这篇文章](http://coding.smashingmagazine.com/2012/06/19/classes-where-were-going-we-dont-need-classes/)指出，实际上可以从网站开发中完全避免类。

我的问题是，与类选择器相比，数据选择器的效率如何？

一个简单的示例是将查询元素与`data-component='something'`与元素进行比较`class='class1 class2 something anotherClass'`。

选择`[data-<attr>='<value>']`器将检查整个值与应该拆分的类字符串。考虑到这一点，数据属性应该更快。

所以，为了细化这个问题，在 CSS 的情况下，我们是使用类选择器还是数据选择器更好？从javascript的角度来看，会`jQuery("[data-component='something']")`比`jQuery(".something")`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-19T14:52:01.657

~~我不会说它是决定性~~的，但它确实看起来类选择器更快......我只是把它放在一起进行快速测试。

[http://jsperf.com/data-selector-performance](http://jsperf.com/data-selector-performance)

**编辑**：

基于 Vlad 和我的 jsperf 测试......如果性能是一个问题（尤其是 IE）......类仍然是要走的路

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-31T09:38:53.280

在查看了 BLSully 的答案和他提供的[测试页面](http://jsperf.com/data-selector-performance)后，以下是实际数据以供比较。

jQuery 类选择器性能与每秒 jQuery 数据属性选择器性能操作：

*   在 Chrome 27.0.1453 中速度提高 31%
*   在 Firefox 15.0.1 中速度提高 140%
*   在 Firefox 21.0 中速度提高 131%
*   在 IE 9.0 中快 1,267%
*   在 IE 10.0 中快 1,356%

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-20T08:22:00.887

我的印象是，即使在移动浏览器中，选择器的性能现在也足够快。除非您真的打算大量使用选择器、数据属性或基于类的选择器（在这种情况下，我建议重新访问您的代码以尝试缓存已经查询的选择器）我们可以认为它们还不错。我什至会说，在其他风格上使用风格并不引人注目。

我认为浏览器供应商花费了更多时间来改进最常用的场景（查询类）而不是查询选择器。这种情况正在发生变化，如果他们也开始优化其他案例，我不会感到惊讶。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-05-27T00:59:31.550

我不知道所有这些答案，但我进行了自己的测试并且属性更快。

您可以自己尝试，只需在开始时节省时间，完成任务并获得最后时间，然后进行数学运算

```
 var newDate = new Date().getTime(); 
		$('.test-t').removeClass('act');
		$('.t1r').addClass('act');
		var currentDate = new Date().getTime();
		var diff = currentDate-newDate;
		console.log(diff);

		var newDate = new Date().getTime();
		$('.test-t2').attr('this-act','');
		$('.t2r').attr('this-act','1');
		var currentDate = new Date().getTime();
		var diff = currentDate-newDate;
		console.log(diff);
```

# python - 将数据与 numpy 跨两个文件组合

> ID：12496885
> 
> 赞同：0
> 
> 时间：2012-09-19T14:30:10.017
> 
> 标签：python, numpy

在我的问题中有两个文件，我想将它们组合成一个数据集两个文件。第一个文件有一个隐含的行号，在第二个文件中作为 ident 引用。所以 Janine 是 ident 1，jasmine 是 ident 2，judith 是 ident 3。

名称：

```
Name    Address
Janine  Unicorn Lane
Jasmine Sparkles Street
Judith  Rainbow Avenue 
```

电话号码：

```
Number Ident
123    1
893    1
345    2 
746    3 
```

如何结合这两个表来为每个地址获取电话号码？我想做的是：

```
data[Adress='Unicorn Lane']['Number'].mean() 
```

好的，这个例子可能不太好。但说明了我需要什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:57:00.537

您可能可以使用结构化数组管理某些内容：

*   例如`names`，`numbers`使用您的两个文件创建两个结构化数组。`np.genfromtxt`不要忘记使用`dtype=None`（让`np.genfromtxt`猜测您的数据类型）和`names=True`（应该从第一列读取字段名称），可能使用`delimiter="\t"`.

你`names`会有类似的东西`dtype([('Name', '|S7'), ('Adress', '|S16')])`，你的类似的`numbers`东西`dtype([('Number', '<i8'), ('Ident', '<i8')])`。

之后，只需花哨的索引即可获得您的选择。例如，如果您想要 for 条目的`names`索引`"Unicorn Lane"`：

```
 (idx,) = np.nonzero(names['Adress']=="Unicorn Lane") 
```

（`np.nonzero`应该返回一个带有一个元素的元组，一个索引数组）。以你的例子，`idx = array([0])`...）

您可以将这些索引用作标识符，请记住，当您的标识符从 1 开始时，它们从 0 开始。因此，要选择与您找到`numbers`的`Ident`索引匹配的索引：

```
numbers[numbers['Ident'] == idx+1] 
```

（请记住，在我们的示例中，`idx=array([0])`对应于`Ident==1`...）。

You should check that `idx` is not empty (`idx.size >0`). Otherwise `idx+1` will be empty too, `numbers['Ident']==idx+1` will evaluate to `False`, and in NumPy, `numbers[False]` is equivalent to `numbers[0]`.

# scala - 如何谈论伴生对象与常规对象？

> ID：12496886
> 
> 赞同：35
> 
> 时间：2012-09-19T14:30:13.060
> 
> 标签：scala, companion-object

我是第一次教 Scala，我的学生发现伴随对象中涉及的故意“双关语”非常令人困惑。考虑以下示例：

```
class Stack {
  ... methods such as push/pop
}

object Stack {
  ... factory method(s) and possibly others
} 
```

当我使用诸如“堆栈对象”或“堆栈对象”或特别是“堆栈对象”之类的口头短语时，就会出现混淆。我的学生很难理解我是指单例对象 Stack 还是 Stack 类的对象。

我正在寻找替代方法来表达初学者可以更容易理解的内容。我一直考虑将 Stack 类的对象称为“堆栈实例”或“堆栈实例”，但是当试图教 OO 不能将这些东西称为对象时，这似乎很疯狂。在谈论单例对象 Stack 时，我一直在尝试始终使用短语“单例对象”或“伴随对象”，但 Scala 的语法在那里对我不利，因为它只使用“对象”一词。

在这种情况下，我可以重命名单例对象 StackFactory 而不是 Stack，但这只是我自己的类的一个选项，而不是已经内置在 Scala 中的一千零一个伴随对象。

编辑：

对不起，我的问题不够清楚。主要的混淆不是在引用伴随对象时发生。在这种情况下，正如一些人所指出的那样，使用诸如“伴生对象”之类的短语很容易。相反，主要的混淆发生在引用普​​通实例时。然后，如果我说“堆栈对象”（表示某个堆栈实例）或“堆栈对象”（表示*这个*特定实例），部分学生会认为我的意思是伴随对象——即使我没有使用词伴侣或单身人士。

而且我可以清楚地看到混淆的来源，因为“对象”一词仅与伴随对象一起出现**在程序文本中。**

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-19T20:21:15.820

我认为`Stack singleton`（如果它是独立的）或`Stack companion`（如果它带有一个类）是命名`object Stack`. Scala 语言参考称它们为模块。但是模块现在已经与运行时实体（如在 OSGI 中）有太多的关联，以至于无法适应。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-19T14:56:24.193

我认为使用短语“伴侣对象”应该足够清楚。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-19T14:56:31.847

Scala 中的这个问题当然不是没有讽刺意味的，但即使在 Java 空间中，也可能存在关于`java.lang.Object`、它的实例、它的类和它的类的实例的命名问题。

对于 Scala，我提出以下术语：

*   将实例化的对象称为“实例”</li>
*   调用`object`“对象”</li>

最后，我会说 OO 的概念包括对象（在模块和组合的意义上）和对象（在实例的意义上）一样多。

无论您如何决定，一致性都是关键，尤其是对于教学而言。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-19T21:13:48.570

我会去

*   “堆栈” == 类堆栈
*   “Stack 的同伴” == Stack 类的同伴对象
*   "A Stack" == 类 Stack 的一个实例

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-19T15:03:14.003

我认为您的解决方案听起来不错。“`Stack`单例”非常清楚地表示您谈论的是单例对象而不是整个对象类的事实。至于对您不利的名称，请解释`object`声明一个*对象*（单例），而`class`它是整个对象类（类实例）的*模板*。

您可能应该确保的另一件事是它`object Stack` *不是* `class Stack`. 如果学生不理解这一点，那么他们可能会更难区分单例`Stack`和`class Stack`.

> 在这种情况下，我可以重命名单例对象 StackFactory 而不是 Stack，但这只是我自己的类的一个选项，而不是已经内置在 Scala 中的一千零一个伴随对象。

请注意，如果您重命名该对象，则它不再是伴随对象。类及其伴生对象具有 Scala 编译器授予的特殊权限，可以访问彼此的私有成员。如果您更改单例的名称以使其与类不匹配，则编译器将不再有任何指示它是伴生对象并且它会失去伴生特权。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-19T15:09:40.410

如果你真的很擅长保持一致，你也可以将实例`class Stack`称为“堆栈实例”，但这可能需要一些习惯性的扭曲。除此之外，“堆栈伴随对象”或“对象堆栈”，绝不是“堆栈对象”。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-21T03:21:20.213

也许我的提议有点天真，但我会打电话给

*   堆栈类：堆栈类本身（我告诉过你这很幼稚）

*   堆栈/堆栈实例/堆栈对象：堆栈类的实例

*   堆栈伴侣/堆栈伴侣对象/堆栈单例/堆栈工厂（如果您将其用于该目的）：堆栈类的伴侣对象。

（事实上​​，在 Odersky 的“programming scala”中，最常用的术语是“companion object”，我认为这很清楚......）

我还要强调堆栈实例和堆栈伴侣之间的区别，这是一个常见的混淆来源。

关于你的学生的困惑，我会理解对于一个大学生来说，谨慎并与术语的使用保持一致是多么重要，你也可以提供一些测验或练习来区分这些概念之间的区别。

有时通过使用术语可以更好地学习术语。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-20T05:58:31.377

如果您希望单例对象成为类或特征的伴侣，它**必须**具有相同的名称（以及包和源文件）。

伴侣可以访问彼此的私有成员，例如伴侣对象中的工厂仍然可以使用私有构造函数创建（伴侣）类的实例。

# javascript - ajax 以错误的格式返回 id

> ID：12496887
> 
> 赞同：0
> 
> 时间：2012-09-19T14:30:15.553
> 
> 标签：javascript, asp.net, html

我有一个问题，我从一个选定的复选框中获取一个 id，然后它将它发送到一个删除方法，然后它将 id 传递给一个存储过程。我遇到的问题是它以错误的格式（“232,4323”）而不是（“232”，“4323”）返回我的 id，所以在将值传递给存储过程时，它会出错因为字符串格式。这是我在 aspx 中的代码。

```
function doTheDelete(doIDeleteTimeTracker) {
    var selectedTimeTrackerList = getSelectedTimeTrackerIDs();
    if (selectedTimeTrackerList.length > 0) {
        $.ajax({
            type: "POST",
            //url: "/Tasks/ViewTasks.aspx/deleteTasksAndLinkedItems",
            url: '<%=ResolveUrl("~/TimeTrackers/ViewTimeTrackers.aspx/deleteSelectedTimeTracker")%>',
            data: "{'DeleteTimeTracker' : '" + doIDeleteTimeTracker + "'," + "'TimeBill': ['" + selectedTimeTrackerList.join(',') + "']}",
            //dataaaaaa
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                var ss = data.d;
                if (ss.length > 0) {
                    for (var i = 0; i < ss.length; ++i) {
                        $.noty.consumeAlert({ layout: 'center', type: 'error', dismissQueue: true });
                        alert(ss[i]);
                    }
                }
                $("#viewTimeTrackersGrid").flexReload();
                showMessage('Successfully Removed Time Tracker');
            },
            error: function (data) {
                $.noty.consumeAlert({ layout: 'center', type: 'error', dismissQueue: true, modal: true });
                alert('Error Deleting Time Tracker');
                if (window.console) {
                    console.log(data);
                }
            }
        });
    } else {
        showMessage('No time tracker(s) are selected.');
    }
} 
```

这是我在后面代码中的删除方法。

```
public static string[] deleteSelectedExpense(bool DeleteExpenses, String[] ExpId)
{
    var rList = new List<string>();
    //var canDeleteTasks = false;
    //var canDeleteTrackers = false;
    var canDeleteExpenses = false;
    var investigatorID = (int)HttpContext.Current.Session["InvestigatorID"];
    var conn = new SqlConnection(ConfigurationManager.ConnectionStrings["connect"].ToString());
    var cmd = new SqlCommand("p_Admin_Permissions_CanDeleteExpenses", conn);
    cmd.Parameters.Add(new SqlParameter("@InvestigatorID", SqlDbType.Int));
    cmd.Parameters["@InvestigatorID"].Value = investigatorID;
    cmd.CommandType = CommandType.StoredProcedure;
    try
    {
        conn.Open();
        canDeleteExpenses = (bool)cmd.ExecuteScalar();
    }
    catch (SqlException sql)
    {
        if (!rList.Contains("Can not connect to the database. Please try again."))
            rList.Add("Can not connect to the database. Please try again.");
    }
    catch (Exception ex)
    {
        if (!rList.Contains("An Error Occured"))
            rList.Add("An Error Occured");
    }
    finally
    {
        if (conn.State == ConnectionState.Open)
            conn.Close();
    }

    if (canDeleteExpenses)
    {
        foreach (var expense in ExpId)// expense ends up beng ("232,423") instead of just taking 1 string at a time ("232").....("423")...
        {

            if (canDeleteExpenses)
            {
                conn = new SqlConnection(ConfigurationManager.ConnectionStrings["OSCIDConnectionString"].ToString());
                cmd = new SqlCommand("p_CaseFiles_Expenses_DeleteExpenses", conn);
                cmd.Parameters.Add(new SqlParameter("@ExpID", SqlDbType.Int));
                cmd.Parameters["@ExpID"].Value = int.Parse(expense);
                cmd.Parameters.Add("@Message", SqlDbType.NVarChar, 50);
                cmd.Parameters["@Message"].Direction = ParameterDirection.Output;
                cmd.CommandType = CommandType.StoredProcedure;
                try
                {
                    conn.Open();
                    cmd.ExecuteNonQuery();
                }
                catch (SqlException sql)
                {
                    if (!rList.Contains("Error Connecting to the Database. Unable To Delete Expense(s)."))
                        rList.Add("Error Connecting to the Database. Unable To Delete Expense(s).");
                }
                catch (Exception ex)
                {
                    if (!rList.Contains("An Error Occured"))
                        rList.Add("An Error Occured");
                }
                finally
                {
                    if (conn.State == ConnectionState.Open)
                        conn.Close();
                }
            }
            else if (!canDeleteExpenses)
            {
                rList.Add("You do not have permission to delete Expenses");
            }
            else
            {
                if (!rList.Contains("You do not have permission to delete the Expense(s)."))
                    rList.Add("You do not have permission to delete the Expense(s).");
            }
        }
    }
    return rList.ToArray();
} 
```

我猜它可能在数组的ajax调用格式中的“数据：”中（我已经尝试了一些事情）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:58:05.500

感谢各位大侠的帮助。我设法修复它。解决方案是这样做：

```
 "'ExpId': ['" + selectedExpensesList.join('\',\'') + "']}", 
```

代替 ：

```
 "'ExpId': ['" + selectedExpensesList.join(',') + "']}", 
```

添加额外的 ' 似乎有效。然后它设法单独获取每个 id，而不是获取整个数组并在我身上大便

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:34:56.013

尝试：

```
... 'TimeBill': ['" + selectedTimeTrackerList.join('","') + "']}" ... 
```

尽管更好的解决方案是创建具有所需属性的完整 javascript 对象并将其作为参数。顺便说一句，如果您仅在此页面上调用此方法，您可能需要考虑使用类似 PageMethods 而不是 jQuery 的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T14:35:57.043

没有理由创建一个要发送为的字符串`Data`，您可以发送一个 json 对象。

```
Data: { 
        DeleteTimeTracker: doIDeleteTimeTracker, 
        TimeBill: selectedTimeTrackerList 
      }, ... 
```

# regex - 正则表达式帮助高级

> ID：12496888
> 
> 赞同：2
> 
> 时间：2012-09-19T14:30:19.690
> 
> 标签：regex

我有一个正则表达式问题

我需要验证给定预定义字符串的用户，以检查该字符串中是否没有错误。我在测试下方进行了单元测试，因此您可以看到哪些字符串必须匹配，哪些不匹配。我已经拥有并为大多数人工作的东西：

```
/^product:\[(.*?)\]|default:\[(.*?)\]$/ 
```

仍然需要测试的是不能有任何空格，这不计入 [] 和 | 之间的值。必须在那里。但不是最后

```
return array(
        array(
            'default:[6_400]',
            TRUE
        ),
        array(
            'default:[bla_bla]',
            TRUE
        ),
        array(
            'default:[bla _ bla]',
            TRUE
        ),
        array(
            'product:8[8_400]|default:[6_400]',
            TRUE
        ),
        array(
            'product:8[8_400]|default:[6_400]|product:10[10_400]',
            TRUE
        ),
        array(
            'product:8[8_400]|product:12 [12_400]|default:[6_400]',
            FALSE
        ),
        array(
            'roduct:8[8_400]|product:12[12_400]|default[6_400',
            FALSE
        ),
        array(
            'default:6_400',
            FALSE
        ),
        array(
            'product:8[8_400]',
            FALSE
        ),
        array(
            'product:8[8_400]default:[6_400]',
            FALSE
        ),
        array(
            'product:8[8_400]|default:[6_400]|',
            FALSE
        ),
    ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:04:07.210

看看你的例子，我认为你的意思是在括号内你想要单词字符或空格（你可能不想要#$%^&&、null 和其他类似的东西）......

```
\[[\w\s]+\] 
```

这显然可以通过 product:number 或 default 来处理：

```
((product:\d+)|(default:))(\[[\w\s]+\]) 
```

子句必须用 | 分隔 但匹配的字符串不能以 '|' 结尾

```
((product:\d+)|(default:))(\[[\w\s]+\])(\|(?!$)|$) 
```

这可能发生一次或多次

```
(((product:\d+)|(default:))(\[[\w\s]+\])(\|(?!$)|$))+ 
```

我们必须至少有一个完整的、合法的默认条款：

```
(?=.*?default:\[[\w\s]+\])(((product:\d+)|(default:))(\[[\w\s]+\])(\|(?!$)|$))+ 
```

并填写整行：

```
^(?=.*?default:\[[\w\s]+\])(((product:\d+)|(default:))(\[[\w\s]+\])(\|(?!$)|$))+$ 
```

这是在行动[http://regexr.com?3275i](http://regexr.com?3275i)

请注意，由于我没有包含任何允许空格在括号之外的任何地方的模式，因此不需要做任何特别的事情来禁止它在括号之外

另请注意，我创建了许多捕获组（为了简单/可读性），但您可以通过放置 ?: 来消除它们（您不想捕获。这在一定程度上提高了性能。除了在 r​​egexr.com 中进行测试之外，此站点通常有助于学习/构建正则表达式：

[http://www.regular-expressions.info/](http://www.regular-expressions.info/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:36:08.253

试试这个正则表达式：

```
/^(?=.*?default)(?:(?:product|default):\d*\[[^\]]*\](?:\|(?!$)|$))+$/ 
```

见[红字](http://rubular.com/r/fxLinAimWH)

如果您想排除`default`可能出现在 中的可能性`[]`，正如 Gabber 指出的那样，您可以使用：

```
/^(?:product:\d*\[[^\]]*\]\|)?(?:default:\d*\[[^\]]*\](?:\|(?!$)|$))(?:product:\‌​d*\[[^\]]*\](?:\|(?!$)|$))?$/ 
```

# android - 在每次启动 android 应用程序时显示启动画面

> ID：12496890
> 
> 赞同：0
> 
> 时间：2012-09-19T14:30:24.570
> 
> 标签：android, user-interface, interface

我在应用程序中有启动画面。当用户在主屏幕并按下返回按钮时；带有“您要退出吗？”的警报对话框 出现，如果用户选择 OK 然后`moveTaskToBack(true);`被调用：并且应用程序将退出。但是在立即启动应用程序时，不会显示启动画面。如何在每次启动应用程序时显示启动画面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:06:41.760

理想情况下你不应该那样做。你应该尊重用户对应用程序行为的期望。当他点击你的应用程序时，它应该从他离开的地方开始。如果应用程序由于内存限制而被终止，那么它将重新启动 .

如果你想这样做：来源：[关闭应用程序并在 Android 上启动主屏幕](https://stackoverflow.com/questions/2042222/close-application-and-launch-home-screen-on-android)

```
Intent intent = new Intent(this, FinActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent);
finish(); 
```

FinActivity 内部：在 onCreate 中调用 finish()。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T14:44:34.317

关于如何制作启动画面的一些提示。

假设我们有`SplashActivity`和`HomeActivity`。

`SplashActivity`应该是您的启动器活动（在清单中）。

```
<intent-filter>
      <action android:name="android.intent.action.MAIN" />

      <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

当您开始时，`HomeActivity`您应该调用`finish()`，`SplashActivity`这样您就不会在单击后退按钮时返回它。

在`HomeActivity`您拦截后退按钮以显示对话框时，不要调用`moveTaskToBack(true);`OK，因为这只会将您的应用程序移动到后台并且不会终止它。

你应该打电话`finish()`。而且由于您已经调用了 finish on `SplashActivity`，剩下的唯一活动是`HomeActivity`，因此您的应用程序将关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T14:37:06.927

我认为您 SplashScreen 仅在应用程序启动时显示。
因此，如果 Acitivites 未完成但只是暂停，则不会显示 SplashScreen，因为该应用程序并未真正关闭。

您可以在按下后退按钮时完成应用程序（代码：），或者如果应用程序处于后台，则`this.finish()`检查每个 Activity 的`onResume()`-Method，如果为 true，则显示 SplashScreen。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T14:46:42.143

我觉得启动屏幕是必要的唯一原因是为了启动应用程序，如果你想在这样做的时候通过线程加载一些信息，但这只是我的意见。

无论如何，您应该将启动画面作为清单中的第一个活动启动，然后在您启动将启动下一个活动的意图之后？（实际的主要活动）。几个月前，当我第一次处理这些问题时，我使用了一个很棒的教程，它会一步一步地与你一起完成。我希望这有帮助 ：）

[教程一](http://www.youtube.com/watch?v=NuS_airZgKM) [教程二](http://www.youtube.com/watch?feature=fvwp&NR=1&v=3V1wov9Jhik)

# php - 使用 PHP 时 Base64 图像不显示

> ID：12496894
> 
> 赞同：1
> 
> 时间：2012-09-19T14:30:37.833
> 
> 标签：php, html, image

我需要显示一个 Base64 格式的图像。当我在 PHP 中构建 img 标签时，它不显示图像（只是默认的“损坏的图像”图标）。当我查看页面源并单击 Base64 数据时，会按预期显示图片。此外，如果我复制并粘贴页面源并将其保存为 HTML 文件，它会按预期显示。我还尝试了一个随机图像，但是因为我的图像是从 .html 文件中工作的，所以我认为它没问题并且应该可以工作吗？

.php 代码：

```
header('content-type: text/html');

...

echo "<html><head></head><body>";
echo "Name = $name<br/>";
echo "<img src=\"data:image/jpg;base64,$photo\"/>";
echo "</body></html>"; 
```

查看源代码的 HTML：

```
<html>
<head></head>
<body>Name = Andrea Pilipczuk<br/>
<img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAyADIAA...{too big to fit here].../9k="/>
</body>
</html> 
```

编辑：

这并没有出现在查看源代码中，而是在 Chrome 周围挖掘，我检查了图像元素，发现最后是“9k=��������”。这是某种填充物吗？当我编辑元素以删除这些图像时，图像按预期显示。

以下代码删除了随机字符并正确显示图像，但似乎有点 hacky，显然更愿意解决根本问题。

```
$unpadded = explode("=", $photo);
$padding = strlen($unpadded[0]) % 3;
$padded = $unpadded[0];
while ($padding > 0) {
  $padded .= "=";
  $padding--;
}
echo "<img src=\"data:image/jpeg;base64,$padded\"/>"; 
```

# serialization - 不同班级的不同SUID

> ID：12496899
> 
> 赞同：2
> 
> 时间：2012-09-19T14:30:43.370
> 
> 标签：serialization, deserialization, java, suid

假设我有不同类名的完全不同的类。我应该`serialVersionUID`在课堂上使用不同的吗？

如果是这样，为什么有必要？

JRE究竟是如何反序列化的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:33:46.833

不，您不需要不同的 SUID（所有类都可以使用 1）

当一个对象被序列化时，类标识符（package.name.ClassName）和SUID都是标头的一部分，用于标识对象所属的类，并确保写入端和读取端之间没有不兼容

但是当您在结构上更改一个类（添加/删除一个字段）时，您应该为该类设置一个新的 SUID（在调试期间，您可以让 JVM 在运行时根据 .class 文件创建一个新的）

# linux - 与 linux shell 相关的参数和选项之间的区别

> ID：12496900
> 
> 赞同：16
> 
> 时间：2012-09-19T14:30:46.567
> 
> 标签：linux, shell

我目前正在参加 Unix / Linux 入门课程，我们遇到了一个问题，我和讲师不同意。

```
cp -i file1 file2 
```

关于前面的命令，哪个是正确的？

*   A. 只有一个实用程序
*   B. 有一种选择
*   C. 有三个论点
*   D. file1 将被复制为 file2 并在覆盖发生之前警告用户
*   E. 以上所有

我坚持认为它是**E**。上述所有的。导师选择了**D**。

显然**A**、**B**和**D**都是正确的。挂断是**C**以及`-i`标志是否既是选项又是参数。

我的逻辑是所有选项都是参数，但并非所有参数都是选项，并且由于列出了多个正确答案，因此在多项选择题传统中，答案很可能是**上述**所有选项。

我无法在这个问题上找到确凿的证据，并认为我会把它扔给大师们。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-04-08T21:24:35.243

我知道这是一个旧线程，但我想为其他可能遇到类似分歧的人添加以下内容。

```
 $ ls -l junk
-rw-r--r-- 1 you     19 Sep 26 16:25 junk 
```

“命令行上程序名称后面的字符串，`-l` 例如`junk`上面的示例，称为程序的参数。参数通常是命令使用的选项或文件名。”

Brian W. Kernighan 和 Rob Pike，“UNIX 编程环境”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T14:40:21.580

这里的[手册页](http://linux.die.net/man/1/cp)指出：

> 多头期权的强制性参数对于空头期权也是强制性的。

这似乎意味着在这个特定问题的背景下，至少，您不应该将*选项*视为论点。否则它会变得非常递归并且毫无意义。

我认为讲师应该接受您的解释，对于大多数典型情况，这确实令人毛骨悚然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:54:29.847

嗯...我个人喜欢区分选项和参数，但是，从技术上讲，您可以说选项是参数。我会说你是对的，但我认为你的导师选择了**D**，因为他不希望你让他们感到困惑。例如，以下等价于上述命令...：

```
 ARG1="-i" ; ARG2="file1" ; ARG3="file2" ; cp $ARG1 $ARG2 $ARG3

 ARG1="-i" ; ARG2="file1" ; ARG3="file2" ; cp $ARG2 $ARG1 $ARG3

 ARG1="-i" ; ARG2="file1" ; ARG3="file2" ; cp $ARG2 $ARG3 $ARG1 
```

...`cp $ARG1 $ARG3 $ARG2`而不一样。我会说选项是一种特殊类型的参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T15:04:14.123

这就是我被教导的方式，在这种情况下是这样说的：

```
cp -i file1 file2 
```

正确答案是 AB 和 D，而不是 C。

因为`-i`是一个选项，`file1`并且`file2`是参数。通常，选项被认为可以改变应用程序或命令的行为，而参数则不会。

我认为是否考虑`-i`原始应用程序的参数取决于语义，因为它是改变行为的选项（或参数），`cp`但在英语中它被认为是选项而不是参数。

这就是我仍然定义差异并保持命令的两个部分之间的差异的方式。

作为另一个命令示例，cronjobs。我经常使用 PHP cronjobs，而且我通常有与命令相关的选项和参数。选项（在我看来）总是用于定义额外的行为，而参数旨在为应用程序及其行为提供完成操作所需的数据。

## 编辑

我同意@unwind 的观点，这让人毛骨悚然，实际上很多时候都归结为场景和意见。连自己在上面都打上记号也太糟糕了，他应该知道这是个主观问题。充满主观问题的测试是完全不公平的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T15:07:25.677

我认为“争论”一词在不同的上下文中以不同的方式使用，这似乎是分歧的根源。不过，为了支持您的立场，请注意`cp`最有可能编写的 C 运行时将程序入口点声明为`main(argc, argv)`（类型已省略），这似乎至少表明那些设计 C 架构/库/等的人。将选项视为参数的子集。然后当然选项可以有自己的论点（不同的上下文）等......

# jquery - 可拖动和自定义 DIV

> ID：12496901
> 
> 赞同：-1
> 
> 时间：2012-09-19T14:30:48.683
> 
> 标签：jquery, customization, draggable

在我的网页rumonet.pt/index2.php 中，我有3 个“标签”，它们是DIV，它们可以用jquery 移动。如果你想尝试，只需选择标题，然后将它们移动...

我需要做的是，当你将它移到另一个 DIV 的顶部时，另一个 DIV 会放在一边，让人们可以随意订购它们......

我知道我必须使用

```
 $('#noticias #titulo').bind('mousemove mousedown', function(){

); 
```

和 offset() 变量...

但是我已经尝试了很长时间才能使它起作用，但是没有...

任何人都可以给我一个提示，或者一些关于这个问题的提示吗？:ss

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:42:19.947

你看过`dragable()`and`sortable()`吗？可能只是做你所追求的伎俩

[http://jsfiddle.net/rniemeyer/QWgRF/](http://jsfiddle.net/rniemeyer/QWgRF/)

# ruby - Padrino/Sinatra Rack-Test POST 未填写参数

> ID：12496906
> 
> 赞同：1
> 
> 时间：2012-09-19T14:31:23.023
> 
> 标签：ruby, rack, padrino, rack-test

我正在尝试使用 Rack-Test 向我的 padrino 应用程序发出发布请求：

```
post '/sms', "name" => "Bryan" 
```

我的路线如下所示：

```
post :index do
  puts params.inspect
  puts rack_input.inspect
end 
```

`rack_input`是我为解析原始机架输入而编写的一种方法。当我运行测试时，我得到这个输出：

```
{}
"name=Bryan" 
```

但是，当我在命令行上使用 curl 时，它可以正常工作：

```
curl -d "name=Bryan" localhost:8080/sms

{"name"=>"Bryan"}
"name=Bryan" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:14:45.630

尝试使用符号：

```
post '/sms', :name => "Bryan" 
```

# nhibernate - NHibernate 加入

> ID：12496907
> 
> 赞同：0
> 
> 时间：2012-09-19T14:31:24.487
> 
> 标签：nhibernate, fluent-nhibernate, linq-to-nhibernate, nhibernate-criteria

```
public class Parent
{
    public virtual long Id { get; set; }
    public virtual string Name { get; set; }
    public virtual List<Child> Children { get; set; }
}

public class Child
{
    public virtual long Id { get; set; }
    public virtual string Description { get; set; }
    public virtual Parent Parent { get; set; }
} 
```

在 NHibernate 中，如何仅使用一次调用 db 来获取具有父名的子级列表。我试过：

CurrentSession.QueryOver <子>().JoinQueryOver(x=>x.Parent).Fetch(x => x.Parent).Eager.List<子>().ToList();

但它没有用。

映射是使用 FluentNHibernate 完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:50:18.743

很近：

```
CurrentSession.QueryOver<Child>()
  .Fetch(x => x.Parent).Eager
  .List<Child>(); 
```

应该可以工作（您不需要额外调用 .ToList 或加入 Parent）

# c++ - C++ 对象设计

> ID：12496909
> 
> 赞同：-1
> 
> 时间：2012-09-19T14:31:34.160
> 
> 标签：c++, visual-c++

我有：

```
// file model.h
#include "instrument.h"
class model
{
    // A function which uses instruments and returns double.
    double value(Instrument instruments);
} 
```

现在在文件 instrument.h

```
// file instrument.h
class Instrument
{
    // This function needs to use model.
    double value2(model* md);
} 
```

现在在文件中`instrument.h`，我应该使用`#include "model.h"`吗？这样的设计似乎很糟糕。

我如何设计这两个对象仪器和模型，以便他们知道并可以相互使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T14:32:51.203

*前向声明：*

```
class Instrument;
class model
{
  // function which uses instruments and returns double
  double value(Instrument instruments);
};

//...

class model;
class Instrument
{
  // function needs to use model
  double value2(model* md); 
} 
```

如果您的类不包含其他类型的数据成员，则不需要该类型的完整定义。例如，如果您有一个成员指针，函数返回值，或者像您的情况一样，参数。

另外，你的直觉是正确的。您应该将`include`头文件中的 s 保持在最低限度。标头应该是自包含的，但不能有不必要的标头。

# dojo - 关闭后无法在对话框中重新显示道场网格

> ID：12496917
> 
> 赞同：0
> 
> 时间：2012-09-19T14:31:52.997
> 
> 标签：dojo, dialog, grid

我在 dojo 对话框中创建了一个 dojox.grid.EnhancedGrid。它工作正常，当我第一次单击按钮时，所有显示都正常。但是当我单击“取消”隐藏对话框，然后再次单击按钮以触发该功能并显示对话框时。显示完全错误，网格表头不完整，无数据显示。所有网格都是灰色的。

请帮我在对话框中重新显示道场网格。

```
<table dojoType="dojox.grid.EnhancedGrid" id="grid6" plugins="{indirectSelection: true, selectable: true, dnd: true, nestedSorting: true, loadingMessage: 'Loading...', errorMessage: 'An error exists within the data.' }" selectionMode="extended" class="popupDojoTable" style="height:200px;"  rowSelector="0px">
                            <colgroup span="3" noscroll="true"></colgroup>
                            <colgroup span="6"></colgroup>
                            <thead>
                                <tr>
                                    <th field="machType" width="60px">Machine<br />type</th>
                                    <th field="machSerNum" width="100px">Machine<br />serial<br />number</th>
                                    <th field="mesNum" width="80px" styles="text-align:right;">MES<br />number</th>
                                    <th field="bookType" width="60px">Book<br />type</th>
                                    <th field="machMod" width="80px">Machine<br />model</th>
                                    <th field="transType" width="80px">Transaction<br />type</th>
                                    <th field="effDte" width="80px">Effective<br />date</th>
                                    <th field="custNum" width="80px">Customer<br />number</th>
                                    <th field="assetPeriodNum" width="60px" styles="text-align:right;">Asset<br />period<br />number</th>
                                </tr>
                            </thead>
                            <tbody>
                             ...
                            </tbody>
                        </table> 
```

然后我通过脚本插入数据。它通过 ajax 从服务器获取数据，然后显示包含网格的对话框“dialogRecordsOnHold”。

```
dojo.xhrPost({
                              url: this.url,
                              handleAs: "json",
                              headers : {
                                  "Content-Type" : "application/json; charset=utf-8",
                                  "Accept" : "application/json"
                              },
                              postData : dojo.toJson({finEnterpNum:this.finEnterpNum, adjNum:this.adjNum}),
                            ....
                     load: function(data) {
                         var gridData = new dojo.data.ItemFileWriteStore({data:{items:data}});
                         dijit.byId('grid6').setStore(gridData);

                         // hide dialogProcessing
                         dijit.byId('dialogOpeningView').hide();
                         dijit.byId('dialogRecordsOnHold').show();
                     },
)}; 
```

取消按钮的功能非常简单：

```
<button dojoType="dijit.form.Button" type="button" onclick="dijit.byId('grid6').setStore(null);dijit.byId('dialogRecordsOnHold').hide();">Cancel</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T02:39:46.110

I have fix it by myself. Change the code into:

```
 load: function(data) { 
 // hide dialogProcessing 
dijit.byId('dialogOpeningView').hide();
 dijit.byId('dialogRecordsOnHold').show();
var gridData = new dojo.data.ItemFileWriteStore({data:{items:data}});
 dijit.byId('grid6').setStore(gridData);
 },
 )}; 
```

# ruby-on-rails - 如何在 ruby on rails 中调用存储过程？

> ID：12496919
> 
> 赞同：3
> 
> 时间：2012-09-19T14:31:57.637
> 
> 标签：ruby-on-rails, stored-procedures, sqlanywhere

我是 ROR 的新手。当我单击 VIEW 中的提交按钮时，我想调用存储过程进行处理。

```
 Model:
    -------

    class Pro::DataImport < ActiveRecord::Base
      attr_accessible :file_name, :process_name, :updated_by, :validates

    end

    Controller:
    -----------------

    class Pro::DataImportsController < ApplicationController
       before_filter :authenticate_user!
      layout "layouts/enr/energy_master"

      def index
       @pro_data_imports = Pro::DataImport.all 
      end

      def new
        @pro_data_import = Pro::DataImport.new
      end

    end

    View
    ----------

     <%= form_for @pro_data_import do %>

  <div class="field">
    Browse the file to upload:<br />
    <%= file_field_tag ':file_name' %>
  </div>

  <div class="actions">
    <%= submit_tag 'Import File' %>
  </div>
<% end %>

    Stored Proc
    ---------------

    ALTER PROCEDURE "DBA"."my_enr_test"(file_name long varchar)
    BEGIN
        INSERT INTO DBA.pro_data_imports(file_name) values(file_name);
    END 
```

在此先感谢..请帮助我。我想从上传按钮获取文件路径并存储到数据库列文件名中。如何执行提交按钮的存储过程。请帮我！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T14:40:05.337

如果您使用的是 ActiveRecord SQLServer 适配器，请签出：

[http://rubydoc.info/gems/activerecord-sqlserver-adapter/3.2.9/ActiveRecord/ConnectionAdapters/Sqlserver/DatabaseStatements:execute_procedure](http://rubydoc.info/gems/activerecord-sqlserver-adapter/3.2.9/ActiveRecord/ConnectionAdapters/Sqlserver/DatabaseStatements:execute_procedure)

在你的代码中做这样的事情

```
class Pro::DataImport < ActiveRecord::Base
  def self.update(user)
    self.execute_procedure("Stored Procedure Name", arg1, arg2)
  end
end 
```

每个普通的 SQL 查询都会转换为要执行的存储过程。这就是 ActiveRecord 的 SQL Server 适配器的工作方式。所以你只需要担心数据库中定义的永久存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-10T15:11:26.200

```
# PL/SQL records or object type parameters should be passed as Hash

p_employee = { :employee_id => 1, :first_name => 'First', :last_name => 'Last', :hire_date => Time.local(2000,01,31) }
 plsql.test_full_name(p_employee)

# test_full_name is procedure name in oracle
# p_employee holds parameter list 
#employee_id is first param defined in stored procedure 
```

# java - 检查来自 Java/spring Web 服务客户端的请求/响应

> ID：12496920
> 
> 赞同：0
> 
> 时间：2012-09-19T14:31:58.177
> 
> 标签：java, web-services, spring, sts-springsourcetoolsuite

我有一个使用 Springsource 工具包（即 @Service 属性）用 Java 编写的客户端，它通过 HTTPS 与外部 Web 服务（完全独立，与我的公司无关）进行通信。我在 marshalSendAndReceive 步骤中遇到异常，它指出内容类型以 text/html 而不是预期的 text/xml 形式返回 - 消息“这可能是错误消息吗？”

Web 服务本身是该服务下一个版本的公共测试，并且从相同的代码调用实时服务可以正常工作。我调用的这种特定方法在实时系统上运行良好，但在测试系统上运行良好。

我的预感是测试系统的请求格式不正确——尽管根据发行说明，只有响应应该在模式中发生了变化——这导致服务返回一个错误，我的客户端错误地解析了这个错误。我在所有请求中都收到了这个错误，即使是那些（根据发行说明）没有改变的请求。

我曾尝试使用 Fiddler 和 Wireshark 来检查流量，但根本无法让 Fiddler 看到它（我怀疑这是在 STS 中使用带有代理的 Tomcat 的问题）并且 Wireshark 无法解码 HTTPS 的东西（我没有钥匙）。我不能使用 HTTP，因为如果我尝试，外部服务会返回 403 Forbidden。

我不是最初的开发人员，我什至不是 Java 开发人员。我是一位经验丰富的 .NET 开发人员，因此任何与此的类比都会被理解 - 否则，我是一个傻瓜，并相应地表达您的指示/问题/可能的帮助。按照我的前任的指示，我使用 XmlBeans 从 WSDL 创建了一个 JAR 文件，并将其添加为引用库，但我无法确定我是否正确地完成了该操作，甚至无法确定它在做什么。它似乎对事物没有明显的影响。

我该如何调试这个问题，并验证这是否是我的客户或他们的服务的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:11:59.547

我的第一个目标是让 Fiddler 工作。很难在黑暗中调试。但是，当您在 STS 中讨论在 Tomcat 中运行的客户端时，我会感到困惑。你的客户端是 webapp 吗？

您是否尝试过其他工具（例如[SoapUI](http://www.soapui.org/?utm_expid=56905-8)）来验证服务是否按预期响应您的请求？

# trac - 基于组件的工作流

> ID：12496927
> 
> 赞同：0
> 
> 时间：2012-09-19T14:32:22.410
> 
> 标签：trac

怎么可能编辑 trac 所以一个新的票有`component X`跟随`workflow X`和`component Y`跟随`workflow Y`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:03:21.603

Trac 目前没有给你方法来做到这一点。它假定您的项目有一个单一的工作流程。

但是，有些插件可以为您提供额外的工作流程功能。[AdvancedTicketWorkflow 插件](http://trac-hacks.org/wiki/AdvancedTicketWorkflowPlugin)为您提供了一些高级命令，供您在设计工作流程时使用。有关如何通过两个略有不同的工作流程路由两种类型的工单的示例，请参阅“triage”命令的文档。

TypedTicketWorkflow[插件](http://trac-hacks.org/wiki/TypedTicketWorkflowPlugin)还添加了额外的工作流功能，允许您创建仅适用于某些工单类型的操作。

您可能想要测试[许多其他与工作流相关的插件。](http://trac-hacks.org/wiki/workflow)不过，其中一些看起来好像有一段时间没有更新了，所以请注意您可能会遇到兼容性问题。

# php - PHP fgets() 警告

> ID：12496928
> 
> 赞同：1
> 
> 时间：2012-09-19T14:32:23.050
> 
> 标签：php, fopen, fgets

我有以下代码：

```
$fh=fopen($api,"r");
$theData = fgets($fh);
echo $theData; 
```

这会将错误抛出为：

```
Warning: fopen(http://xxxxxx.xxxxxxxx.com:8080) [function.fopen]: failed to open stream: Connection refused in /home/xxxx/public_html/xxxx/index.php on line 18

Warning: fgets(): supplied argument is not a valid stream resource in /home/xxxx/public_html/xxxx/index.php on line 19 
```

解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:35:15.810

您的文件未按预期打开。检查 $api 的值并确保文件名在当前工作目录或文件的整个路径中。

由于它是 :8080 上的远程系统，因此请确保该端口对公众开放。这通常是为 localhost 保留的值（即：网络服务器只是该计算机的网络服务器，没有其他人的）并且您无法访问。如果您打开的 url 是您正在使用的同一台计算机，请改为使用本地文件夹导航到该文件。

# html - 点击 div 时避免 URL 中的锚标记

> ID：12496930
> 
> 赞同：0
> 
> 时间：2012-09-19T14:32:27.857
> 
> 标签：html

我在页面中有一些选项卡式内容，每个选项卡都有一个 ID（#tab1、#tab2 等）。如果我单击一个选项卡，则选项卡 ID #tab1 会将自身附加到页面的 URL，使其看起来像这样：www.mysite.com/product.php#tab1

如果用户单击浏览器或鼠标后退按钮，第一次没有任何反应，因为他实际上是返回到同一页面，但 URL 中没有 #tab1，并且只有在第二次单击后，他才会返回到他之前的页面在。

这个问题有什么解决方法？我实际上更喜欢单击选项卡，#tab1 首先没有附加到 URL。

这是一些代码：

```
<a href="#tab_information">Click for information</a>
<a href="#tech_specs">Tech Specifications</a>

<div id="tab_information" class="tabcontent">tab 1 content</div>
<div id="tech_specs" class="tabcontent">tab 2 content</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:35:47.230

从 url 中删除哈希字符串。

```
window.onhashchange = function(){
  window.location.hash = "";
} 
```

# c++ - “int”类型的参数与参数类型“int **”不兼容

> ID：12496931
> 
> 赞同：0
> 
> 时间：2012-09-19T14:32:38.910
> 
> 标签：c++

我正在编写一个二维数组程序，但在打印它时遇到问题，我不确定我现在是否正在正确传递二维数组，因为它崩溃而不是运行。任何意见将是有益的

```
void initialize(int* one, int** two);
void replace(int* arr,int rows, int cols,int value);
void fill(int* arr, int rows, int cols);
void print(int** arr, int rows, int cols);

ofstream outfile;
ifstream infile;
int arrayOne[100][100];
int arrayTwo[100][100];

int main(){

    int rows,cols=0;

    cout << "Please input how many rows you would like in the array:  ";
    cin >> rows;
    cout << "Please input how many columns you would like in the array:  ";
    cin >> cols;

    fill(arrayOne[100][100],rows,cols);
    //print(arrayOne[100][100],rows,cols);

    system("pause");
    return 0;
}

void initialize(int* one, int* two){
    for(int i=0;i<100;i++){
        for(int j=0;j<100;j++){
            arrayOne[i][j]=0;
            arrayTwo[i][j]=0;
        }
    }
}

void replace(int* arr,int rows,int cols,int value){
    arr[rows][cols]=value;
}

void fill(int* arr, int rows, int cols){
    int i=0;
    for(int r=0; r < rows; r++){
        for(int c=0; c < cols; c++){
            replace(arr,r,c,i++);
        }
    }
}

void print(int** arr, int r, int c){
    for(int i=0;i<r;i++){
        for(int j=0;j<c;j++){
            cout << arr[i][j] << " ";
        }
        cout << endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:42:08.710

如果您阅读错误消息，它清楚地说明了您的问题。话虽如此，它并没有明确说明如何解决它。你正在使用固定数组走一条崎岖的道路......

```
/* arrayOne[100][100] This is an 'int' at the 101st row and 101st column.
 * It isn't an address to anywhere in the array, in fact it is just beyond
 * the end of your array.
 *
 * Regardless, even if it were a pointer, it would point to a location in memory
 * that is not yours. We count starting with 0 in C/C++. So if you'd like to
 * reference the 'whole' array  just pass it bare:
 */
fill (arrayOne, rows, cols);

/* Of course this means that you need to fix the definition of 'fill'
 * and 'replace'.
 */
void replace(int arr[100][100],int rows,int cols,int value){
    arr[rows][cols]=value;
}

/* As you can see this isn't going to be friendly */
void fill(int arr[100][100], int rows, int cols){
    int i=0;
    for(int r=0; r < rows; r++){
        for(int c=0; c < cols; c++){
            replace(arr,r,c,i++);
        }
    }
} 
```

您还有其他问题，但是当您遇到这些问题时，可以在其他问题中提出这些问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-19T14:45:26.937

将所有 int* arr 和 int** arr 更改为 int arr[100][] 或 arr[][100]。我不记得是哪一个了。但是，它肯定是其中之一。

# ruby-on-rails - 规范失败的未定义方法“参数化”

> ID：12496932
> 
> 赞同：0
> 
> 时间：2012-09-19T14:32:44.027
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我对模型进行了自定义验证，并且得到了没有意义的未定义方法。

这是代码

```
 validate :unique_seo_url_from_title

 def unique_seo_url_from_title
    url = "#{title.parameterize}-#{region.parameterize}-#{country}"
    errors.add(:title, "already in use") if SeoMapping.find_by_seo_url(url)
  end 
```

奇怪的是，如果我输出 url，即 raise url，它会完美地打印出来，这样它就可以工作了。

希望有人可以建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:14:59.720

Since you didn't pass parameters to the function, it seems that title, region and country are attributes of model for which validation is used. So use self for the object

validate :unique_seo_url_from_title

```
 def unique_seo_url_from_title
    url = "#{self.title.parameterize}-#{self.region.parameterize}-#{self.country}"
    errors.add(:title, "already in use") if SeoMapping.find_by_seo_url(url)
  end 
```

Thanks

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T02:32:09.147

```
undefined method `parameterize' for nil:NilClass 
```

该消息的含义正是它所说的。您有一个对象 is `nil`，并且您调用`parameterize`它 - 因为该方法是定义的`String`，而不是定义的，所以它失败了`NilClass`。

检查 和 的值`title`是否`region`存在。如果没有，那就是你的问题。

# scala - SBT/Play2 多项目设置在运行/测试的类路径中不包括依赖项目

> ID：12496939
> 
> 赞同：5
> 
> 时间：2012-09-19T14:33:02.373
> 
> 标签：scala, playframework-2.0, sbt, multi-project

我有以下 SBT/Play2 多项目设置：

```
import sbt._
import Keys._
import PlayProject._

object ApplicationBuild extends Build {
  val appName         = "traveltime-api"
  val appVersion      = "1.0"

  val appDependencies = Seq(
    // Google geocoding library
    "com.google.code.geocoder-java" % "geocoder-java" % "0.9",
    // Emailer
    "org.apache.commons" % "commons-email" % "1.2",
    // CSV generator
    "net.sf.opencsv" % "opencsv" % "2.0",

    "org.scalatest" %% "scalatest" % "1.7.2" % "test",
    "org.scalacheck" %% "scalacheck" % "1.10.0" % "test",
    "org.mockito" % "mockito-core" % "1.9.0" % "test"
  )

  val lib = RootProject(file("../lib"))
  val chiShape = RootProject(file("../chi-shape"))

  lazy val main = PlayProject(
    appName, appVersion, appDependencies, mainLang = SCALA
  ).settings(
    // Add your own project settings here
    resolvers ++= Seq(
      "Sonatype Snapshots" at
        "http://oss.sonatype.org/content/repositories/snapshots",
      "Sonatype Releases" at
        "http://oss.sonatype.org/content/repositories/releases"
    ),
    // Scalatest compatibility
    testOptions in Test := Nil
  ).aggregate(lib, chiShape).dependsOn(lib, chiShape)
} 
```

如您所见，该项目依赖于两个独立的子项目：lib 和 chiShape。

现在编译工作正常 - 所有源都正确编译。但是，如果我尝试运行或测试，运行时中的任何一个任务都没有加载类路径上的子项目中的类，并且由于 NoClassFound 异常，事情变得一团糟。

例如 - 我的应用程序必须从文件加载序列化数据，它是这样的：测试启动 FakeApplication，它尝试加载数据并繁荣：

```
[info] CsvGeneratorsTest:
[info] #markerFilterCsv 
[info] - should fail on bad json *** FAILED ***
[info]   java.lang.ClassNotFoundException: com.library.Node
[info]   at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
[info]   at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
[info]   at java.security.AccessController.doPrivileged(Native Method)
[info]   at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
[info]   at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
[info]   at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
[info]   at java.lang.Class.forName0(Native Method)
[info]   at java.lang.Class.forName(Class.java:264)
[info]   at java.io.ObjectInputStream.resolveClass(ObjectInputStream.java:622)
[info]   at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1593)
[info]   ... 
```

奇怪的是 stage 在 staged/ 中创建了一个带有 chi-shapes_2.9.1-1.0.jar 和 lib_2.9.1-1.0.jar 的目录结构。

如何让我的运行时/测试配置将子项目放入类路径？

**更新：**

我在 Global#onStart 中添加了以下代码：

```
 override def onStart(app: Application) {
    println(app)
    ClassLoader.getSystemClassLoader.asInstanceOf[URLClassLoader].getURLs.
      foreach(println)
    throw new RuntimeException("foo!")
  } 
```

当我启动测试时，类路径的填充非常非常糟糕，至少可以这么说:)

```
FakeApplication(.,sbt.classpath.ClasspathUtilities$$anon$1@182253a,List(),List(),Map(application.load-data -> test, mailer.smtp.test-mode -> true))
file:/home/arturas/Software/sdks/play-2.0.3/framework/sbt/sbt-launch.jar
[info] CsvGeneratorsTest: 
```

启动分阶段应用程序时，有很多东西，应该是这样的:)

```
$ target/start
Play server process ID is 29045
play.api.Application@1c2862b
file:/home/arturas/work/traveltime-api/api/target/staged/jul-to-slf4j.jar 
```

这很奇怪，因为我想在类路径中至少应该有测试罐子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T08:15:02.917

看来我已经解决了。

罪魁祸首是**ObjectInputStream**默认忽略线程本地类加载器，只使用系统类加载器。

所以我改变了：

```
 def unserialize[T](file: File): T = {
    val in = new ObjectInputStream(new FileInputStream(file))
    try {
      in.readObject().asInstanceOf[T]
    }
    finally {
      in.close
    }
  } 
```

到：

```
 /**
   * Object input stream which respects thread local class loader.
   *
   * TL class loader is used by SBT to avoid polluting system class loader when
   * running different tasks.
   */
  class TLObjectInputStream(in: InputStream) extends ObjectInputStream(in) {
    override protected def resolveClass(desc: ObjectStreamClass): Class[_] = {
      Option(Thread.currentThread().getContextClassLoader).map { cl =>
        try { return cl.loadClass(desc.getName)}
        catch { case (e: java.lang.ClassNotFoundException) => () }
      }
      super.resolveClass(desc)
    }
  }

  def unserialize[T](file: File): T = {
    val in = new TLObjectInputStream(new FileInputStream(file))
    try {
      in.readObject().asInstanceOf[T]
    }
    finally {
      in.close
    }
  } 
```

我的班级没有发现问题就消失了！

感谢[How to put custom ClassLoader to use？](https://stackoverflow.com/questions/4095976/how-to-put-custom-classloader-to-use)和[http://tech-tauk.blogspot.com/2010/05/thread-context-classlaoder-in.html](http://tech-tauk.blogspot.com/2010/05/thread-context-classlaoder-in.html)关于反序列化和线程本地类加载器的有用见解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:54:05.713

这听起来类似于此错误[https://play.lighthouseapp.com/projects/82401/tickets/659-play-dist-broken-with-sub-projects](https://play.lighthouseapp.com/projects/82401/tickets/659-play-dist-broken-with-sub-projects)，尽管该错误是 about`dist`和 not `test`。`aggregate`我认为该修复程序尚未发布到最新的稳定版本，因此请尝试从源代码构建 Play（并且不要忘记使用`dependsOn`该链接中演示的内容。

或者，作为一种解决方法，在 sbt 中，您可以使用导航到子项目`project lib`，然后键入`test`. 这有点手动，但如果你愿意，你可以编写脚本。

# javascript - Phonegap onDeviceOnline

> ID：12496942
> 
> 赞同：1
> 
> 时间：2012-09-19T14:33:11.173
> 
> 标签：javascript, jquery, cordova, jquery-mobile

我正在使用以下脚本来检查设备是在线还是离线：

```
function checkConnection() {
    document.addEventListener("online", onDeviceOnline, false);
    document.addEventListener("offline",onDeviceOffline, false);
    function onDeviceOnline(){
        loadZive();
        loadMobil();
        loadAuto();
    };
    function onDeviceOffline(){
        alert("deviceIsOffline");
    };
};
checkConnection(); 
```

然后我有这个函数来加载提要：

```
function loadZive(publishedDateConverted){

    google.load("feeds", "1");  
        function initialize() {
            var feed = new google.feeds.Feed("http://www.zive.sk/rss/sc-47/default.aspx");
            feed.setNumEntries(window.localStorage.getItem("entriesNumber"));
            feed.load(function(result) {
                if (!result.error) {
                    var feedlist = document.getElementById("feedZive");
                    for (var i = 0; i < result.feed.entries.length; i++) {
                        var li = document.createElement("li");
                        var entry = result.feed.entries[i];
                        var A = document.createElement("A");
                        var descriptionSettings = window.localStorage.getItem("descriptionSettings");
                        if (descriptionSettings=="true"){
                            var h3 = document.createElement("h3");
                            var p = document.createElement("p");
                            var pDate = document.createElement("p");
                            pDate.setAttribute("style","text-align: right; margin-top: 5px;");
                            var publishedDate = new Date(entry.publishedDate);
                            publishedDateConverted = convertTime(publishedDate);
                            pDate.appendChild(document.createTextNode(publishedDateConverted));
                            h3.setAttribute("style","white-space: normal;")
                            h3.appendChild(document.createTextNode(entry.title));
                            p.setAttribute("style","white-space: normal;")
                            p.appendChild(document.createTextNode(entry.content));
                            A.setAttribute("href",entry.link);
                            A.appendChild(h3);
                            A.appendChild(p);
                            A.appendChild(pDate);
                            }
                        else{
                            A.setAttribute("href",entry.link);
                            A.setAttribute("style","white-space: normal;")
                            A.appendChild(document.createTextNode(entry.title));
                        };
                        li.appendChild(A);
                        feedlist.appendChild(li);
                    }
                    $("#feedZive").listview("refresh");
                }
            });
        }
        google.setOnLoadCallback(initialize);   
    }; 
```

首先我加载第二个脚本，然后是第一个。但我什么都看不到。如果我打开我的应用程序，然后我会看到页面布局大约 1 秒，然后（可能在加载第一个脚本之后）函数 onDeviceOnline() 发生并且我只能看到空白页。但它应该将提要加载到现有模板中。

恕我直言 onDeviceOnline 功能在加载页面模板后发生，因此它无法导入提要。如果我创建这样的函数：

```
function loadFeeds(){
    loadZive();
    loadMobil();
    loadAuto();
}; 
```

然后一切正常，所以我认为这与在线和离线事件监听器有关。当我将 checkconnection 放入 onDeviceReady 函数时它也不起作用，所以它不应该是问题。那么有什么方法可以检查设备是否在线，如果在线则使用 js 文件加载提要？

编辑：我使用了 Simon McDonald 的建议并创建了如下代码：function onDeviceReady(){

```
 document.addEventListener("backbutton", onBackKeyDown, false);
        function onBackKeyDown(){
                navigator.app.exitApp();
        }
    function checkConnection() {
        var networkState = navigator.network.connection.type;
        if (networkState == "none"){
            alert("no network connection");
        }
        else{
            loadZive();
            loadMobil();
            loadAuto();
        };
    };
    checkConnection();  
}; 
```

使用此代码警报非常适合在线设备和离线设备，但是当我尝试 loadFeed 时，我得到与以前相同的结果（页面布局加载，然后一切都变为空白页面）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:12:27.360

问题是您在设备就绪事件侦听器中添加了一个“在线”事件侦听器，但设备已经在线，因此在连接发生变化之前该事件不会再次触发。在您的设备就绪事件侦听器中，您应该检查 navigator.connection.network.type 的值并确保它不是 NONE。

[http://docs.phonegap.com/en/2.0.0/cordova_connection_connection.md.html#connection.type](http://docs.phonegap.com/en/2.0.0/cordova_connection_connection.md.html#connection.type)

# java - 加入获取：“查询指定加入获取，但获取的关联的所有者不在选择列表中”

> ID：12496945
> 
> 赞同：9
> 
> 时间：2012-09-19T14:33:23.993
> 
> 标签：java, hibernate, hql

我有以下代码：

```
public class ValueDAO  implements BusinessObject<Long> {

    private Long id;
    private String code;
    private ClassDAO classDAO ;
        ....
}

public List<String> getCodesByCodeClass(Long classId) {
    String select = "select distinct val.code from ValueDAO val left " +
        "join fetch val.classDAO ";
    String where = "where val.classDAO.id = ? order by val.code";

    return getHibernateTemplate().find(select + where, classId);
} 
```

它引发了一个异常：

```
 org.hibernate.QueryException: query specified join fetching, but the owner of the fetched association was not present in the select list 
```

结果我想只得到代码。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-19T14:47:49.583

`join fetch val.classDAO.b`意思是“在获取时`val`，也获取`classDAO`链接到的`val`”。但是您的查询不 fetch `val`。它只获取`val.code`。所以提取没有意义。只需删除它，一切都会好起来的：

```
select distinct val.code from ValueDAO val 
left join val.classDAO classDAO
where classDAO.id = ? 
order by val.code 
```

不过，一些注意事项：

*   进行左连接然后添加限制`classDAO.id = ?`，这意味着连接实际上是内部连接（因为 classDAO 不能为空并且同时具有给定的 ID）
*   命名您的实体 XxxDAO 非常令人困惑。DAO 和实体根本不是一回事。

鉴于上述情况，查询可以重写为

```
select distinct val.code from ValueDAO val 
where val.classDAO.id = ? 
order by val.code 
```

# jboss - Jboss 5.1 GA 无法启动

> ID：12496947
> 
> 赞同：2
> 
> 时间：2012-09-19T14:33:29.217
> 
> 标签：jboss

我下载了 Jboss 5.1 GA Windows 版本，设置 JBOSS_HOME 并尝试运行默认配置而不进行任何更改。该过程似乎失败了，即使控制台日志中的最后一行表明它已启动。我在日志中看到错误并且 >http://127.0.0.1:8080< 不会加载。我错过了什么吗？任何帮助是极大的赞赏。谢谢。

控制台日志摘录：

```
incomplete deployments (SEE PREVIOUS ERRORS FOR DETAILS):

DEPLOYMENTS MISSING DEPENDENCIES:
  Deployment "CachedConnectionManager" is missing the following dependencies:
    Dependency "TransactionManager" (should be in state "Configured", but is act
ually in state "**ERROR**")
  Deployment "DefaultUserTransactionprovider" is missing the following dependenc
ies:
    Dependency "<UNKNOWN DefaultUserTransactionprovider>" (should be in state "D
escribed", but is actually in state "** UNRESOLVED Demands 'TransactionManager'
**")
  Deployment "JBossTimerServiceFactory" is missing the following dependencies:
    Dependency "jboss.ejb:service=EJBTimerService" (should be in state "Create",
 but is actually in state "Configured")
  Deployment "RealTransactionManager" is missing the following dependencies:
    Dependency "TransactionManager" (should be in state "Instantiated", but is a
ctually in state "**ERROR**")
  Deployment "UnifiedInvoker" is missing the following dependencies:
    Dependency "TransactionManager" (should be in state "Create", but is actuall
y in state "**ERROR**")
  Deployment "WebServer" is missing the following dependencies:
    Dependency "jboss.jca:service=CachedConnectionManager" (should be in state "
Create", but is actually in state "** NOT FOUND Depends on 'jboss.jca:service=Ca
chedConnectionManager' **")
    Dependency "jboss:service=TransactionManager" (should be in state "Create",
but is actually in state "** NOT FOUND Depends on 'jboss:service=TransactionMana
ger' **")
  Deployment "WorkManager" is missing the following dependencies:
    Dependency "TransactionManager" (should be in state "Configured", but is act
ually in state "**ERROR**")
  Deployment "jboss.admin:service=PluginManager" is missing the following depend
encies:
    Dependency "jboss.jmx:name=Invoker,protocol=jrmp,service=proxyFactory,type=a
daptor" (should be in state "Create", but is actually in state "Configured")
  Deployment "jboss.ejb:persistencePolicy=database,service=EJBTimerService" is m
issing the following dependencies:
    Dependency "jboss.jca:name=DefaultDS,service=DataSourceBinding" (should be i
n state "Create", but is actually in state "Configured")
  Deployment "jboss.ejb:service=EJBTimerService" is missing the following depend
encies:
    Dependency "jboss:service=TransactionManager" (should be in state "Create",
but is actually in state "** NOT FOUND Depends on 'jboss:service=TransactionMana
ger' **")
    Dependency "jboss.ejb:persistencePolicy=database,service=EJBTimerService" (s
hould be in state "Create", but is actually in state "Configured")
  Deployment "jboss.jca:name='jboss-local-jdbc.rar',service=RARDeployment" is mi
ssing the following dependencies:
    Dependency "jboss:service=TransactionManager" (should be in state "Configure
d", but is actually in state "** NOT FOUND Depends on 'jboss:service=Transaction
Manager' **")
    Dependency "jboss.jca:service=WorkManager" (should be in state "Configured",
 but is actually in state "** NOT FOUND Depends on 'jboss.jca:service=WorkManage
r' **")
  Deployment "jboss.jca:name='jboss-xa-jdbc.rar',service=RARDeployment" is missi
ng the following dependencies:
    Dependency "jboss:service=TransactionManager" (should be in state "Configure
d", but is actually in state "** NOT FOUND Depends on 'jboss:service=Transaction
Manager' **")
    Dependency "jboss.jca:service=WorkManager" (should be in state "Configured",
 but is actually in state "** NOT FOUND Depends on 'jboss.jca:service=WorkManage
r' **")
  Deployment "jboss.jca:name='jms-ra.rar',service=RARDeployment" is missing the
following dependencies:
    Dependency "jboss.jca:service=WorkManager" (should be in state "Configured",
 but is actually in state "** NOT FOUND Depends on 'jboss.jca:service=WorkManage
r' **")
    Dependency "jboss:service=TransactionManager" (should be in state "Configure
d", but is actually in state "** NOT FOUND Depends on 'jboss:service=Transaction
Manager' **")
  Deployment "jboss.jca:name='mail-ra.rar',service=RARDeployment" is missing the
 following dependencies:
    Dependency "jboss:service=TransactionManager" (should be in state "Configure
d", but is actually in state "** NOT FOUND Depends on 'jboss:service=Transaction
Manager' **")
    Dependency "jboss.jca:service=WorkManager" (should be in state "Configured",
 but is actually in state "** NOT FOUND Depends on 'jboss.jca:service=WorkManage
r' **")
  Deployment "jboss.jca:name='quartz-ra.rar',service=RARDeployment" is missing t
he following dependencies:
    Dependency "jboss:service=TransactionManager" (should be in state "Configure
d", but is actually in state "** NOT FOUND Depends on 'jboss:service=Transaction
Manager' **")
    Dependency "jboss.jca:service=WorkManager" (should be in state "Configured",
 but is actually in state "** NOT FOUND Depends on 'jboss.jca:service=WorkManage
r' **")
  Deployment "jboss.jca:name=DefaultDS,service=DataSourceBinding" is missing the
 following dependencies:
    Dependency "jboss.jca:name=DefaultDS,service=LocalTxCM" (should be in state
"Create", but is actually in state "Configured")
  Deployment "jboss.jca:name=DefaultDS,service=LocalTxCM" is missing the followi
ng dependencies:
    Dependency "jboss.jca:service=CachedConnectionManager" (should be in state "
Create", but is actually in state "** NOT FOUND Depends on 'jboss.jca:service=Ca
chedConnectionManager' **")
    Dependency "jboss.jca:name=DefaultDS,service=ManagedConnectionPool" (should
be in state "Create", but is actually in state "Configured")
    Dependency "jboss:service=TransactionManager" (should be in state "Create",
but is actually in state "** NOT FOUND Depends on 'jboss:service=TransactionMana
ger' **")
  Deployment "jboss.jca:name=DefaultDS,service=ManagedConnectionFactory" is miss
ing the following dependencies:
    Dependency "jboss.jca:name='jboss-local-jdbc.rar',service=RARDeployment" (sh
ould be in state "Create", but is actually in state "Instantiated")
  Deployment "jboss.jca:name=DefaultDS,service=ManagedConnectionPool" is missing
 the following dependencies:
    Dependency "jboss.jca:name=DefaultDS,service=ManagedConnectionFactory" (shou
ld be in state "Create", but is actually in state "Configured")
  Deployment "jboss.jca:name=JmsXA,service=ConnectionFactoryBinding" is missing
the following dependencies:
    Dependency "jboss.jca:name=JmsXA,service=TxCM" (should be in state "Create",
 but is actually in state "Configured")
  Deployment "jboss.jca:name=JmsXA,service=ManagedConnectionFactory" is missing
the following dependencies:
    Dependency "jboss.jca:name='jms-ra.rar',service=RARDeployment" (should be in
 state "Create", but is actually in state "Instantiated")
    Dependency "jboss.messaging:service=ServerPeer" (should be in state "Create"
, but is actually in state "Configured")
  Deployment "jboss.jca:name=JmsXA,service=ManagedConnectionPool" is missing the
 following dependencies:
    Dependency "jboss.jca:name=JmsXA,service=ManagedConnectionFactory" (should b
e in state "Create", but is actually in state "Configured")
  Deployment "jboss.jca:name=JmsXA,service=TxCM" is missing the following depend
encies:
    Dependency "jboss.jca:service=CachedConnectionManager" (should be in state "
Create", but is actually in state "** NOT FOUND Depends on 'jboss.jca:service=Ca
chedConnectionManager' **")
    Dependency "jboss:service=TransactionManager" (should be in state "Create",
but is actually in state "** NOT FOUND Depends on 'jboss:service=TransactionMana
ger' **")
    Dependency "jboss.jca:name=JmsXA,service=ManagedConnectionPool" (should be i
n state "Create", but is actually in state "Configured")
  Deployment "jboss.jmx:name=Invoker,protocol=jrmp,service=proxyFactory,type=ada
ptor" is missing the following dependencies:
    Dependency "jboss:service=invoker,type=jrmp" (should be in state "Create", b
ut is actually in state "Configured")
  Deployment "jboss.jmx:name=MBeanProxyRemote,protocol=jrmp,type=adaptor" is mis
sing the following dependencies:
    Dependency "jboss.jmx:name=Invoker,protocol=jrmp,service=proxyFactory,type=a
daptor" (should be in state "Create", but is actually in state "Configured")
  Deployment "jboss.messaging.connectionfactory:service=ClusterPullConnectionFac
tory" is missing the following dependencies:
    Dependency "jboss.messaging:service=PostOffice" (should be in state "Create"
, but is actually in state "Configured")
    Dependency "jboss.messaging:service=ServerPeer" (should be in state "Create"
, but is actually in state "Configured")
  Deployment "jboss.messaging.connectionfactory:service=ClusteredConnectionFacto
ry" is missing the following dependencies:
    Dependency "jboss.messaging:service=PostOffice" (should be in state "Create"
, but is actually in state "Configured")
    Dependency "jboss.messaging:service=ServerPeer" (should be in state "Create"
, but is actually in state "Configured")
  Deployment "jboss.messaging.connectionfactory:service=ConnectionFactory" is mi
ssing the following dependencies:
    Dependency "jboss.messaging:service=PostOffice" (should be in state "Create"
, but is actually in state "Configured")
    Dependency "jboss.messaging:service=ServerPeer" (should be in state "Create"
, but is actually in state "Configured")
  Deployment "jboss.messaging.destination:name=DLQ,service=Queue" is missing the
 following dependencies:
    Dependency "jboss.messaging:service=PostOffice" (should be in state "Create"
, but is actually in state "Configured")
    Dependency "jboss.messaging:service=ServerPeer" (should be in state "Create"
, but is actually in state "Configured")
  Deployment "jboss.messaging.destination:name=ExpiryQueue,service=Queue" is mis
sing the following dependencies:
    Dependency "jboss.messaging:service=PostOffice" (should be in state "Create"
, but is actually in state "Configured")
    Dependency "jboss.messaging:service=ServerPeer" (should be in state "Create"
, but is actually in state "Configured")
  Deployment "jboss.messaging:service=JMSUserManager" is missing the following d
ependencies:
    Dependency "jboss.jca:name=DefaultDS,service=DataSourceBinding" (should be i
n state "Create", but is actually in state "Configured")
    Dependency "jboss:service=TransactionManager" (should be in state "Create",
but is actually in state "** NOT FOUND Depends on 'jboss:service=TransactionMana
ger' **")
  Deployment "jboss.messaging:service=PersistenceManager" is missing the followi
ng dependencies:
    Dependency "jboss:service=TransactionManager" (should be in state "Create",
but is actually in state "** NOT FOUND Depends on 'jboss:service=TransactionMana
ger' **")
    Dependency "jboss.jca:name=DefaultDS,service=DataSourceBinding" (should be i
n state "Create", but is actually in state "Configured")
  Deployment "jboss.messaging:service=PostOffice" is missing the following depen
dencies:
    Dependency "jboss:service=TransactionManager" (should be in state "Create",
but is actually in state "** NOT FOUND Depends on 'jboss:service=TransactionMana
ger' **")
    Dependency "jboss.messaging:service=ServerPeer" (should be in state "Create"
, but is actually in state "Configured")
    Dependency "jboss.jca:name=DefaultDS,service=DataSourceBinding" (should be i
n state "Create", but is actually in state "Configured")
  Deployment "jboss.messaging:service=ServerPeer" is missing the following depen
dencies:
    Dependency "jboss.messaging:service=JMSUserManager" (should be in state "Cre
ate", but is actually in state "Configured")
    Dependency "jboss.messaging:service=PersistenceManager" (should be in state
"Create", but is actually in state "Configured")
  Deployment "jboss.mq:service=DestinationManager" is missing the following depe
ndencies:
    Dependency "jboss.messaging:service=ServerPeer" (should be in state "Create"
, but is actually in state "Configured")
  Deployment "jboss.web.deployment:war=/ROOT" is missing the following dependenc
ies:
    Dependency "jboss.web:service=WebServer" (should be in state "Create", but i
s actually in state "Configured")
  Deployment "jboss.web.deployment:war=/admin-console" is missing the following
dependencies:
    Dependency "jboss.web:service=WebServer" (should be in state "Create", but i
s actually in state "Configured")
  Deployment "jboss.web.deployment:war=/invoker" is missing the following depend
encies:
    Dependency "jboss.web:service=WebServer" (should be in state "Create", but i
s actually in state "Configured")
  Deployment "jboss.web.deployment:war=/jbossws" is missing the following depend
encies:
    Dependency "jboss.web:service=WebServer" (should be in state "Create", but i
s actually in state "Configured")
  Deployment "jboss.web.deployment:war=/jmx-console" is missing the following de
pendencies:
    Dependency "jboss.web:service=WebServer" (should be in state "Create", but i
s actually in state "Configured")
  Deployment "jboss.web.deployment:war=/web-console" is missing the following de
pendencies:
    Dependency "jboss.web:service=WebServer" (should be in state "Create", but i
s actually in state "Configured")
    Dependency "jboss.admin:service=PluginManager" (should be in state "Create",
 but is actually in state "Configured")
  Deployment "jboss:service=ClientUserTransaction" is missing the following depe
ndencies:
    Dependency "jboss:service=proxyFactory,target=ClientUserTransaction" (should
 be in state "Create", but is actually in state "Configured")
    Dependency "jboss:service=proxyFactory,target=ClientUserTransactionFactory"
(should be in state "Create", but is actually in state "Configured")
  Deployment "jboss:service=KeyGeneratorFactory,type=HiLo" is missing the follow
ing dependencies:
    Dependency "jboss.jca:name=DefaultDS,service=DataSourceBinding" (should be i
n state "Create", but is actually in state "Configured")
    Dependency "jboss:service=TransactionManager" (should be in state "Create",
but is actually in state "** NOT FOUND Depends on 'jboss:service=TransactionMana
ger' **")
  Deployment "jboss:service=invoker,type=jrmp" is missing the following dependen
cies:
    Dependency "jboss:service=TransactionManager" (should be in state "Create",
but is actually in state "** NOT FOUND Depends on 'jboss:service=TransactionMana
ger' **")
  Deployment "jboss:service=invoker,type=local" is missing the following depende
ncies:
    Dependency "jboss:service=TransactionManager" (should be in state "Create",
but is actually in state "** NOT FOUND Depends on 'jboss:service=TransactionMana
ger' **")
  Deployment "jboss:service=invoker,type=pooled" is missing the following depend
encies:
    Dependency "jboss:service=TransactionManager" (should be in state "Create",
but is actually in state "** NOT FOUND Depends on 'jboss:service=TransactionMana
ger' **")
  Deployment "jboss:service=proxyFactory,target=ClientUserTransaction" is missin
g the following dependencies:
    Dependency "jboss:service=invoker,type=unified" (should be in state "Create"
, but is actually in state "Configured")
  Deployment "jboss:service=proxyFactory,target=ClientUserTransactionFactory" is
 missing the following dependencies:
    Dependency "jboss:service=invoker,type=unified" (should be in state "Create"
, but is actually in state "Configured")
  Deployment "vfsfile:/C:/jboss-5.1.0.GA/server/default/deploy/profileservice-se
cured.jar/" is missing the following dependencies:
    Dependency "interface javax.transaction.TransactionManager" (should be in st
ate "Real", but is actually in state "** NOT FOUND Depends on 'interface javax.t
ransaction.TransactionManager' **")
    Dependency "interface javax.transaction.TransactionManager" (should be in st
ate "Real", but is actually in state "** NOT FOUND Depends on 'interface javax.t
ransaction.TransactionManager' **")
    Dependency "interface javax.transaction.TransactionManager" (should be in st
ate "Real", but is actually in state "** NOT FOUND Depends on 'interface javax.t
ransaction.TransactionManager' **")

DEPLOYMENTS IN ERROR:
  Deployment "interface javax.transaction.TransactionManager" is in error due to
 the following reason(s): ** NOT FOUND Depends on 'interface javax.transaction.T
ransactionManager' **
  Deployment "TransactionManager" is in error due to the following reason(s): co
m.arjuna.ats.arjuna.exceptions.FatalError: [com.arjuna.ats.arjuna.recovery.Trans
actionStatusManager_9] - Could not get unique port., **ERROR**
  Deployment "jboss.jca:service=WorkManager" is in error due to the following re
ason(s): ** NOT FOUND Depends on 'jboss.jca:service=WorkManager' **
  Deployment "jboss:service=invoker,type=unified" is in error due to the followi
ng reason(s): Configured
  Deployment "<UNKNOWN DefaultUserTransactionprovider>" is in error due to the f
ollowing reason(s): ** UNRESOLVED Demands 'TransactionManager' **
  Deployment "jboss:service=TransactionManager" is in error due to the following
 reason(s): ** NOT FOUND Depends on 'jboss:service=TransactionManager' **
  Deployment "jboss.jca:service=CachedConnectionManager" is in error due to the
following reason(s): ** NOT FOUND Depends on 'jboss.jca:service=CachedConnection
Manager' **
  Deployment "jboss.web:service=WebServer" is in error due to the following reas
on(s): Configured

08:01:11,485 INFO  [ServerImpl] JBoss (Microcontainer) [5.1.0.GA (build: SVNTag=
JBoss_5_1_0_GA date=200905221053)] Started in 24s:732ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:43:20.933

您是否设置了 JAVA_HOME 变量，您使用的是什么 JDK？为 JBoss 5.1 推荐的 JDK 至少为 JDK 5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:15:52.127

上一个错误表示有一个进程正在侦听其中一个尝试的端口。就是这样。杀死了这个过程，jboss 现在就像一个魅力。

顺便提一句。该过程原来是pulseaudio.exe。不知道它是什么以及它对端口 4713 做了什么......

```
08:53:35,435 WARN  [arjLoggerI18N] [com.arjuna.ats.arjuna.recovery.TransactionSt
atusManager_14] - Failed to create server socket on address 127.0.0.1 and port:
4,713
08:53:35,435 ERROR [AbstractKernelController] Error installing to Create: name=T
ransactionManager state=Configured
com.arjuna.ats.arjuna.exceptions.FatalError: [com.arjuna.ats.arjuna.recovery.Tra
nsactionStatusManager_9] - Could not get unique port.
        at com.arjuna.ats.arjuna.recovery.TransactionStatusManager.start(Transac
tionStatusManager.java:186)
        at com.arjuna.ats.arjuna.recovery.TransactionStatusManager.<init>(Transa
ctionStatusManager.java:71)
        at com.arjuna.ats.arjuna.coordinator.TxControl.createTransactionStatusMa
nager(TxControl.java:286)
        at com.arjuna.ats.arjuna.coordinator.TxControl.<clinit>(TxControl.java:5
18)
        at com.arjuna.ats.jbossatx.jta.TransactionManagerService.create(Transact
ionManagerService.java:185)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597) 
```

# javascript - 为什么xpaths慢

> ID：12496950
> 
> 赞同：0
> 
> 时间：2012-09-19T14:33:33.730
> 
> 标签：javascript, dom

有人可以在 DOM 中搜索元素时解释为什么 Xpaths 被认为比 CSS 选择器慢。并且对于不同的选择器（例如 Xpaths、CSS 选择器等）有不同的引擎吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:48:38.493

Xpath 不被认为更慢，它们更慢。基本性能测试证明了这一点（参见[http://sauceio.com/index.php/2011/05/why-css-locators-are-the-way-to-go-vs-xpath/](http://sauceio.com/index.php/2011/05/why-css-locators-are-the-way-to-go-vs-xpath/)）。XPath 比 CSS 更具表现力，这意味着它有更多的工作要做。看起来 Xpath 还没有得到优化，尤其是在 Internet Explorer 上，而且可能永远不会优化，因为大多数人不再使用 Xpath。

至于不同的引擎，每个浏览器对每种类型使用不同的引擎。在单个浏览器中，每种类型都没有多个实现。

# scala - 对列表中的值求和

> ID：12496959
> 
> 赞同：54
> 
> 时间：2012-09-19T14:33:49.557
> 
> 标签：scala

我正在尝试编写一个 scala 函数，它将递归地对列表中的值求和。这是我到目前为止所拥有的：

```
 def sum(xs: List[Int]): Int = {
    val num = List(xs.head)   
    if(!xs.isEmpty) {
      sum(xs.tail)
    }
    0
   } 
```

我不知道如何将各个 Int 值求和作为函数的一部分。我正在考虑在函数 sum 中定义一个新函数，并使用一个局部变量来对 List 迭代时的值求和。但这似乎是一种势在必行的方法。有替代方法吗？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-10-13T14:21:08.053

你也可以避免直接使用递归，而是使用一些基本的抽象：

```
val l = List(1, 3, 5, 11, -1, -3, -5)
l.foldLeft(0)(_ + _) // same as l.foldLeft(0)((a,b) => a + b) 
```

`foldLeft`就像`reduce()`在python中一样。还有`foldRight`一个也称为`accumulate`（例如在 SICP 中）。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2012-09-19T14:50:07.587

对于递归，我经常发现值得考虑如何用英语描述该过程，因为这通常可以转化为没有太多复杂性的代码。所以...

> “如何递归计算整数列表的总和？”
> 
> “嗯，一份清单的总和是多少，`3 :: restOfList`？
> 
> “什么`restOfList`？
> 
> “它可以是任何东西，你不知道。但请记住，我们是递归的——你没有计算列表总和的函数吗？”
> 
> “哦，对了！那么总和就是`3 + sum(restOfList)`。
> 
> “没错。但现在你唯一的问题是每个总和都是根据另一个调用定义`sum()`的，并且您可以为其提供价值。”
> 
> “嗯，你说得对。” *认为...*
> 
> “嗯，既然你的名单越来越短，那么最短的名单是多少？”
> 
> “空单？”
> 
> “对！空的整数列表的总和是多少？”
> 
> “零——我现在明白了。所以把它放在一起，一个空列表的总和为零，任何其他列表的总和是它的第一个元素添加到其余列表的总和中。

事实上，这段代码读起来几乎和最后一句话一模一样：

```
def sumList(xs: List[Int]) = {
    if (xs.isEmpty) 0
    else xs.head + sumList(xs.tail)
} 
```

（模式匹配版本，例如 Kim Stebel 提出的版本，基本上与此相同，它们只是以更“功能性”的方式表达条件。）

* * *

## 回答 #3

> 赞同：65
> 
> 时间：2012-09-19T14:36:42.947

这是“标准”递归方法：

```
def sum(xs: List[Int]): Int = {
  xs match {
    case x :: tail => x + sum(tail) // if there is an element, add it to the sum of the tail
    case Nil => 0 // if there are no elements, then the sum is 0
  }
} 
```

而且，这是一个尾递归函数。它将比非尾递归函数更有效，因为编译器将其转换为 while 循环，不需要为每次递归调用在堆栈上推入新帧：

```
def sum(xs: List[Int]): Int = {
  @tailrec
  def inner(xs: List[Int], accum: Int): Int = {
    xs match {
      case x :: tail => inner(tail, accum + x)
      case Nil => accum
    }
  }
  inner(xs, 0)
} 
```

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2015-10-20T19:50:17.520

你不能让它更容易：

```
val list  = List(3, 4, 12);
println(list.sum); // result will be 19 
```

希望能帮助到你 ：）

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2012-09-19T15:21:02.607

您的代码很好，但您不需要临时值 num。在 Scala 中 [If] 是一个表达式并返回一个值，这将作为 sum 函数的值返回。所以你的代码将被重构为：

```
def sum(xs: List[Int]): Int = {
    if(xs.isEmpty) 0
    else xs.head + sum(xs.tail)

} 
```

如果列表为空，则返回 0，否则将列表的其余部分添加到头部编号

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-09-19T14:37:46.390

具有模式匹配的规范实现：

```
def sum(xs:List[Int]) = xs match {
  case Nil => 0
  case x::xs => x + sum(xs)
} 
```

这不是尾递归，但很容易理解。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-10-17T20:18:03.837

以@Kim 的回答为基础：

```
def sum(xs: List[Int]): Int = {
    if (xs.isEmpty) throw new IllegalArgumentException("Empty list provided for sum operation")
    def inner(xs: List[Int]): Int = {
      xs match {
        case Nil => 0
        case x :: tail => xs.head + inner(xs.tail)
      }
    }
    return inner(xs)
  } 
```

内部函数是递归的，当提供空列表时会引发适当的异常。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-05-23T20:54:10.207

如果您需要使用 isEmpty、head 和 tail 编写递归函数，并且在空列表参数的情况下也抛出异常：

```
def sum(xs: List[Int]): Int = 
  if (xs.isEmpty) throw new IllegalArgumentException("sum of empty list") 
  else if (xs.tail.isEmpty) xs.head 
  else xs.head + sum(xs.tail) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-18T08:10:30.803

```
 def sum(xs: List[Int]): Int = { 
  def loop(accum: Int, xs: List[Int]): Int = { 
    if (xs.isEmpty) accum
    else loop(accum + xs.head, xs.tail)
  }
  loop(0,xs)  
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-04-22T14:25:49.547

要为此添加另一个可能的答案，这是我想出的一个解决方案，它与@jgaw 的答案略有不同，并使用了`@tailrec`注释：

```
def sum(xs: List[Int]): Int = {
  if (xs.isEmpty) throw new Exception // May want to tailor this to either some sort of case class or do something else

  @tailrec
  def go(l: List[Int], acc: Int): Int = {
    if (l.tail == Nil) l.head + acc // If the current 'list' (current element in xs) does not have a tail (no more elements after), then we reached the end of the list.
    else go(l.tail, l.head + acc) // Iterate to the next, add on the current accumulation
  }

  go(xs, 0)
} 
```

关于检查传入的空列表的快速说明；在进行函数式编程时，最好不要抛出任何异常，而是返回其他内容（另一个值、函数、案例类等）以优雅地处理错误并继续在执行路径中流动，而不是通过`Exception`. 我在上面的示例中扔了一个，因为我们只是在查看递归地对列表中的项目求和。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-05-29T07:03:57.263

```
def sum(xs: List[Int]): Int = xs.sum

scala> sum(List(1,3,7,5))
res1: Int = 16

scala> sum(List())
res2: Int = 0 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-11-25T07:39:15.543

在不使用替换方法的情况下尝试了以下方法

```
def sum(xs: List[Int]) = {

  val listSize = xs.size

  def loop(a:Int,b:Int):Int={

    if(a==0||xs.isEmpty)
      b
    else
      loop(a-1,xs(a-1)+b)
  }

  loop(listSize,0)
} 
```

# javascript - 如何将一个数组添加到另一个数组中

> ID：12496960
> 
> 赞同：-1
> 
> 时间：2012-09-19T14:33:48.997
> 
> 标签：javascript, jquery, arrays

> **可能重复：**
> [如何在 Javascript 中合并两个数组](https://stackoverflow.com/questions/1584370/how-to-merge-two-arrays-in-javascript)

假设我有 2 个数组：

```
a = ['a','b','c'];
b = ['d','e','f']; 
```

是否有某种方式可以轻松添加，而无需拆分并执行`b`添加元素？`a``each`

就像是：

```
a.push(b); 
```

并有一个包含内容的最终`a`数组：

```
a = ['a','b','c','d','e','f'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T14:35:26.013

你试过这个[`concat()`功能](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/concat)吗？

```
var hege = ["Cecilie", "Lone"];
var stale = ["Emil", "Tobias", "Linus"];
var kai = ["Robin"];
var children = hege.concat(stale,kai); 
```

将输出：

```
Cecilie,Lone,Emil,Tobias,Linus,Robin 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T14:35:51.800

使用 Array.concat：

```
a = a.concat(b); // a == ['a','b','c','d','e','f'] 
```

# ruby-on-rails - 在 Rails 中 find_by_sql，访问结果数组

> ID：12496967
> 
> 赞同：5
> 
> 时间：2012-09-19T14:34:18.753
> 
> 标签：ruby-on-rails

我试图在 Rails 中以一种非常快速和肮脏的方式运行查询，而没有将模型的其余部分放在适当的位置。我知道这是不好的做法，但我只需要在紧迫的时间内快速获得结果，直到我得到整个解决方案。

我有根据重量计算运费的商品。重量存储在商品中，价格存储在表 shipping_zone_prices 中，我目前所做的只是查找与重量比待售商品重的第一行相关的价格：

```
class Item < ActiveRecord::Base
  def shipping_price
    item_id = self.id
    shipping_price = ShippingZonePrice.find_by_sql(
      "SELECT z.price as price
       FROM shipping_zone_prices z, items i
       WHERE i.id = '#{item_id}'
       AND z.weight_g > d.weight
       ORDER BY z.weight_g asc limit 1")    
  end
end 
```

这类作品。SQL 完成了这项工作，但是当插入应用程序时，如下所示：

```
 <%= @item.shipping_price %> Shipping 
```

我得到以下显示：

```
[#<ShippingZonePrice price: 12>] Shipping 
```

在此示例中，“12”是从数据库中提取的价格，并且是正确的。@item.shipping_price.class 返回“数组”。尝试使用 [0]（或任何其他整数）访问数组会返回一个空白。

还有其他方法可以访问它，还是我错过了一些基本的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T14:46:27.823

由于您正在定义一个实例方法，我认为它应该返回`price`if 它存在或`nil`

尝试这样的事情：

```
def shipping_price
  ShippingZonePrice.find_by_sql(
    "SELECT z.price as price
     FROM shipping_zone_prices z, items i
     WHERE i.id = '#{self.id}'
     AND z.weight_g > d.weight
     ORDER BY z.weight_g asc limit 1").first.try(:price)
end 
```

那么这应该适合你：

```
@item.shipping_price 
```

该`first.try(:price)`部分是必需的，因为`find_by_sql`可能返回一个空数组。如果您尝试`first.price`在空数组上执行类似操作，您会得到一个异常`NoMethodError: undefined method 'price' for nil:NilClass`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T15:03:39.810

这是因为`find_by_sql`返回一个模型，而不是数据。如果您想直接获取相关数据，请使用以下内容：

```
ShippingZonePrice.connection.select_value(query) 
```

有许多直接访问实用程序方法可用，`connection`它们可以获取单个值、单个数组、数组行或哈希行。查看. [_](http://apidock.com/rails/ActiveRecord/ConnectionAdapters/DatabaseStatements/select_value) _ `ActiveRecord::ConnectionAdapters::DatabaseStatements`

与直接编写 SQL 一样，您应该非常小心，不要产生 SQL 注入错误。这就是为什么通常最好将此方法封装在安全的地方。例子：

```
class ShippingZonePrice < ActiveRecord::Base
  def self.price_for_item(item)
    self.connection.select_value(
      self.sanitize_sql(
        %Q[
          SELECT z.price as price
            FROM shipping_zone_prices z, items i
            WHERE i.id=?
              AND z.weight_g > d.weight
            ORDER BY z.weight_g asc limit 1
        ],
        item.id
      )
    )
  end
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T14:40:13.440

```
@item.shipping_price.first.price 
```

或者

```
@item.shipping_price[0].price 
```

感谢 Atastor 指出这一点！

当您使用`AS price`in 时`find_by_sql`，`price`成为结果的属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T14:45:48.400

如果不是因为你说你尝试访问但失败了，我`[0]`会说你想放

```
@item.shipping_price.first.price # I guess BSeven just forgot the .first. in his solution 
```

进入视野……奇怪

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-26T16:12:57.447

所以，我有一个 hacky 解决方案，但效果很好。创建一个与您的函数具有相同输出的表并引用它，然后只需调用一个执行 find_by_sql 的函数来填充模型。

创建一个虚拟表：

```
CREATE TABLE report.compliance_year (
 id BIGSERIAL,
 year TIMESTAMP,
 compliance NUMERIC(20,2),
 fund_id INT); 
```

然后，创建一个使用空表的模型：

```
class Visualization::ComplianceByYear < ActiveRecord::Base
    self.table_name = 'report.compliance_year'
    def compliance_by_year(fund_id)
        Visualization::ComplianceByYear.find_by_sql(["
            SELECT year, compliance, fund_id
              FROM report.usp_compliance_year(ARRAY[?])", fund_id])
    end
end 
```

在您的控制器中，您可以填充它：

```
def visualizations
  @compliancebyyear = Visualization::ComplianceByYear.new()
  @compliancefunds = @compliancebyyear.compliance_by_year(current_group.id)
  binding.pry
end 
```

然后，您可以看到它填充了您需要的内容：

```
[1] pry(#<Thing::ThingCustomController>)> @compliancefunds
[
[0] #<Visualization::ComplianceByYear:0x00000008f78458> {
          :year => Mon, 31 Dec 2012 19:00:00 EST -05:00,
    :compliance => 0.93,
       :fund_id => 1
},
[1] #<Visualization::ComplianceByYear:0x0000000a616a70> {
          :year => Tue, 31 Dec 2013 19:00:00 EST -05:00,
    :compliance => 0.93,
       :fund_id => 4129
},
[2] #<Visualization::ComplianceByYear:0x0000000a6162c8> {
          :year => Wed, 31 Dec 2014 19:00:00 EST -05:00,
    :compliance => 0.93,
       :fund_id => 4129
}
] 
```

# php - 在数组中添加元素

> ID：12496973
> 
> 赞同：0
> 
> 时间：2012-09-19T14:34:41.530
> 
> 标签：php, arrays, wordpress, taxonomy

我有这个代码：

```
if($pf_categorynotin){
    $args['tax_query'] = array(
        array(
            'taxonomy' => 'portfolio_category',
            'field' => 'slug',
            'terms' => $pf_categorynotin,
            'operator' => 'NOT IN'
        )
    ); //category__in
} 
```

它定义了一种分类法，即**投资组合标签**。我想要做的是添加另一个分类法，比如 **portfolio_tag**

我不确定是否会这样工作：`'taxonomy' => 'portfolio_category', 'portfolio_tags',`

基本上我想做的是在该数组中添加另一个分类法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:44:10.810

看看这里的“*多重分类处理*”示例：http: [//codex.wordpress.org/Class_Reference/WP_Query#Taxonomy_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Taxonomy_Parameters)

```
$args['tax_query'] => array(
    'relation' => 'AND',
    array(
        'taxonomy' => 'portfolio_category',
        'field' => 'slug',
        'terms' => $pf_categorynotin,
        'operator' => 'NOT IN'
    ),
    array(
        'taxonomy' => 'portfolio_tags',
        'field' => 'slug',
        'terms' => $pf_categorynotin,
        'operator' => 'NOT IN'
    )
); 
```

您应该适应`relation`并`operator`满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:37:39.233

如果您想要多个值，则必须使用数组，因此请替换以下行：

```
'taxonomy' => 'portfolio_category', 
```

对于这个：

```
'taxonomy' => array('portfolio_category','portfolio_tags'), 
```

但请记住，`$args['tax_query']`必须调整读取的代码以考虑`$args['tax_query'][0]['taxonomy']`现在可能是数组或字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:37:55.020

您可以制作一个数组，`taxonomy`以便您的代码如下所示：

```
if($pf_categorynotin){
    $args['tax_query'] = array(
        array(
            'taxonomy' => array('portfolio_category', 'portfolio_tags'),
            'field' => 'slug',
            'terms' => $pf_categorynotin,
            'operator' => 'NOT IN'
        )
    ); //category__in
} 
```

并且`$args['tax_query'][0]['taxonomy'][0]`将是`'portfolio_category'`并且`$args['tax_query'][0]['taxonomy'][1]`将是`'portfolio_tags'`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T14:38:25.683

```
if($pf_categorynotin){
    $args['tax_query'] = array(
        array(
            'taxonomy' => array('portfolio_category','portfolio_tags'),
            'field' => 'slug',
            'terms' => $pf_categorynotin,
            'operator' => 'NOT IN'
        )
    ); //category__in
} 
```

可以解决问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T14:40:14.293

分类法需要是另一个数组，例如：

```
$taxonomy = array(tax1, tax2, tax3); 
```

然后你添加

```
array(
            'taxonomy' => $taxonomy,
            'field' => 'slug',
            'terms' => $pf_categorynotin,
            'operator' => 'NOT IN'
        ) 
```

# visual-studio - VS 什么是基于现有 10 代码库创建 08 项目的可管理方式

> ID：12496975
> 
> 赞同：0
> 
> 时间：2012-09-19T14:34:49.897
> 
> 标签：visual-studio

我需要为用 VS 2010 编写的代码库创建 2008 项目。我经常遇到文件夹已经存在的错误，因为文件脚手架已经到位。任何人都可以推荐一种管理此任务的方法，用于初始步骤以及未来的更改吗？谢谢。

# python - 带有预解码 UTF-8 的 Python UnicodeEncodeError

> ID：12496985
> 
> 赞同：0
> 
> 时间：2012-09-19T14:35:30.597
> 
> 标签：python, parsing, unicode, encoding, decoding

我正在尝试解析 tar.gz 文件中的一堆日志文件（最多 4GiB）。源文件来自 RedHat 5.8 Server 系统和 SunOS 5.10，必须在 WindowsXP 上进行处理。

我遍历 tar.gz 文件，读取文件，将文件内容解码为 UTF-8 并在进一步处理之前用正则表达式解析它们。

当我写出处理后的数据以及从 tar.gz 读取的原始数据时，我收到以下错误：

```
Traceback (most recent call last):
  File "C:\WoMMaxX\lt_automation\Tools\LogParser.py", line 375, in <module>
    p.analyze_longtails()
  File "C:\WoMMaxX\lt_automation\Tools\LogParser.py", line 196, in analyze_longtails
    oFile.write(entries[key]['source'] + '\n')
  File "C:\Python\3.2\lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
UnicodeEncodeError: 'charmap' codec can't encode characters in position 24835-24836: character maps
to <undefined> 
```

这是我读取和解析日志文件的部分：

```
def getSalesSoaplogEntries(perfid=None):                
        for tfile in parser.salestarfiles:
            path = os.path.join(parser.logpath,tfile)            
            if os.path.isfile(path):
                if tarfile.is_tarfile(path):
                    tar = tarfile.open(path,'r:gz')
                    for tarMember in tar.getmembers():
                        if 'salescomponent-soap.log' in tarMember.name:
                            tarMemberFile = tar.extractfile(tarMember)
                            content = tarMemberFile.read().decode('UTF-8','surrogateescape')

                            for m in parser.soaplogregex.finditer(content):
                                entry = {}
                                entry['time'] = datetime(datetime.now().year, int(m.group('month')), int(m.group('day')),int(m.group('hour')), int(m.group('minute')), int(m.group('second')), int(m.group('millis'))*1000)
                                entry['perfid'] = m.group('perfid')
                                entry['direction'] = m.group('direction')
                                entry['payload'] = m.group('payload')
                                entry['file'] = tarMember.name
                                entry['source'] = m.group(0)
                                sm = parser.soaplogmethodregex.match(entry['payload'])
                                if sm:
                                    entry['method'] = sm.group('method')

                                    if entry['time'] >= parser.starttime and entry['time'] <= parser.endtime:
                                        if perfid and entry['perfid'] == perfid:
                                            yield entry
                        tar.members = [] 
```

这是我将处理后的信息与原始数据一起写出的部分（它是一个特定进程的所有日志条目的聚合：

```
if len(entries) > 0:
    time = perfentry['time']
    filename = time.isoformat('-').replace(':','').replace('-','') + 'longtail_' + perfentry['perfid'] + '.txt'
    oFile = open(os.path.join(parser.logpath,filename), 'w')
    oFile.write(perfentry['source'] +'\n')
    oFile.write('------\n')
    for key in sorted(entries.keys()):
        oFile.write('------\n')
        oFile.write(entries[key]['source'] + '\n') #<-- here it is failing 
```

我不明白为什么以 UTF-8 读取文件似乎是正确的，不可能将它们写成 UTF-8。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:06:50.673

您的输出文件使用操作系统的默认编码，它*不是*UTF-8。使用`codecs.open`代替`open`并指定`encoding='utf-8'`.

```
oFile = codecs.open(os.path.join(parser.logpath,filename), 'w', encoding='utf-8') 
```

请参阅[http://docs.python.org/howto/unicode.html#reading-and-writing-unicode-data](http://docs.python.org/howto/unicode.html#reading-and-writing-unicode-data)

# xml - 使用 XML 1.1 模式在全局范围内断言元素 ID 唯一性

> ID：12496989
> 
> 赞同：2
> 
> 时间：2012-09-19T14:35:40.963
> 
> 标签：xml, xsd

是否可以使用 XML 1.1 模式来验证文档中没有两个元素共享一个 id。例如，附加的 XML 文档应该失败，因为 id 的 0、1 和 3 不是唯一的。

```
<?xml version="1.0" encoding="UTF-8"?>
<Item>
    <c id="0"/>  <!-- error: shared id -->
    <a id="1"/>  <!-- error: shared id -->
    <a id="2"/>
    <b id="3"/>  <!-- error: shared id -->
    <a id="4"/>
    <b id="0"/>  <!-- error: shared id -->
    <d id="6"/>
    <d id="7"/>
    <b id="3"/>  <!-- error: shared id -->
    <c id="1"/>  <!-- error: shared id -->
</Item> 
```

Schema，要转换为 XML 1.1。

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
    <xs:element name="Item">
        <xs:complexType>
            <xs:sequence maxOccurs="unbounded">
                <xs:choice>

                    <xs:element name="a">
                        <xs:complexType>
                            <xs:attribute name="id" use="required"/>
                        </xs:complexType>
                    </xs:element>

                    <xs:element name="b">
                        <xs:complexType>
                            <xs:attribute name="id" use="required"/>
                        </xs:complexType>
                    </xs:element>

                    <xs:element name="c">
                        <xs:complexType>
                            <xs:attribute name="id" use="required"/>
                        </xs:complexType>
                    </xs:element>

                    <xs:element name="d">
                        <xs:complexType>
                            <xs:attribute name="id" use="required"/>
                        </xs:complexType>
                    </xs:element>

                </xs:choice>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T08:48:13.937

为此，您不需要 XSD 1.1，可以使用 XSD 1.0 来完成。在 Item 的元素定义中，添加唯一性约束：

```
<xs:unique name="unique-id">
  <xs:selector xpath="*"/>
  <xs:field xpath="@id"/>
</xs:unique> 
```

# javascript - 水平拉伸 div 背景图像

> ID：12496990
> 
> 赞同：2
> 
> 时间：2012-09-19T14:35:44.200
> 
> 标签：javascript, jquery, html, css

我知道有人问过类似的问题，但我没有设法从这些人那里得到任何建议并得到一些工作。关于这个主题的很多建议也针对制作整页背景图像，这不是我想要做的。

我试图让背景图像水平拉伸以适合特定的 div。div 本身包含子 div，其内容应显示在背景顶部。

我有如下的html：

```
<div class="parent">

    <div class="child">

        <h3>My Header</h3>

        <p><a href="another.html">A link</a></p>

        <p>Some content</p>

    </div>
</div> 
```

和这样的CSS：

```
.parent{
  width: 100%;
  height: 145px;
  float: left;
  clear: both;
  background: url(../img/parent-bg.png) top left no-repeat;
}

.child{
  width: 960px;
  height: 80px;
  margin: 0 auto;
  text-align: center;
} 
```

parent-bg.png 有一个从左到右的渐变填充，大小为 60 x 142 像素，这就是为什么我希望它拉伸以适应父 div 而不仅仅是使用 repeat-x（重复时渐变看起来很奇怪）。

CSS3 background-size:cover 属性完全符合我的要求，但当然不适用于 IE 9 之前的版本。我很想知道是否能找到适用于 IE 8 和 7 的解决方案。

我看过这个 jquery 插件的快速播放，但无法让它工作：[https](https://github.com/louisremi/jquery.backgroundSize.js#readme) ://github.com/louisremi/jquery.backgroundSize.js#readme 。无论如何，我不太热衷于在 javascript 中隐藏样式属性，这只是一个“快速游戏”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T15:08:47.420

我发现的另一个解决方案适用于我的目标浏览器（IE 7 +，firefox 和 chrome 的最后几个版本）等等，涉及使用浏览器前缀，如下所示：

```
.parent{
    width: 100%;
    height: 145px;
    float: left;
    clear: both;
    background: url(../img/parent-bg.png) top left no-repeat;
    background-size:cover;
    -webkit-background-size:cover;
    -moz-background-size:cover;
    -o-background-size:cover;
    -ms-background-size:cover;
}

.footer_inner{
  width: 960px;
  height: 80px;
  margin: 0 auto;
  text-align: center;
} 
```

@rgthree 的解决方案在浏览器覆盖率方面可能更全面，并且包含一个出色的工作演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T15:15:42.123

只要有强大的意志，必有一条路为你开。您应该采用*渐进式增强*技术来获得最佳体验。下面是你应该如何构建它（JS Fiddle 下面）：

1.  首先，在您的内容下有一个绝对定位`<img>`，可以将宽度和高度设置为 100%，以便它延伸。
2.  接下来，对于支持**Background Size**的浏览器，隐藏上述`<img>`标签并`.parent`使用 a`repeat-y`和 a设置背景`background-size:100% auto;`
3.  最后，对于支持**CSS Gradients**的浏览器，将它们用于`background-image`您的`.parent`

这是一个 JSFiddle：http: [//jsfiddle.net/rgthree/k5gk7/](http://jsfiddle.net/rgthree/k5gk7/)

上面的 JS Fiddle 适用于所有相关*的浏览器（渐变图像是从谷歌图像中随机获取的，颜色与 CSS 渐变不同，但你得到了图片）*。它使用[Modernizr](http://modernizr.com/%20Modernizr)进行能力测试。

*如果您不了解[Modernizr](http://modernizr.com/%20Modernizr)，我不能再为这样的项目推荐它。它是一个使用 javascript 测试现代浏览器功能并将类名添加到`<html>`标签的库，以便您可以逐步增强您的网页。*

# java - java中不正确的对象创建

> ID：12496994
> 
> 赞同：0
> 
> 时间：2012-09-19T14:35:55.560
> 
> 标签：java, swing

```
public class welcomepage extends javax.swing.JFrame {
    backendcode bec;
    String username;
    public welcomepage() {
            initComponents();
            username=null;
            backendcode bec= new backendcode("dummy");
            System.out.println("bec created "+ bec);
    }

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
            System.out.println("bec created "+ bec);
            bec.back_login_credentials(username);
    }
    /*
    and other private methods(not mentioned here) which also needs to access bec object
    */
}

 public class backendcode {
     public backendcode(String dummy) {
           //some code
     }
     public void back_login_credentials(String username, String password) {
          //some code
     }
  } 
```

我已经将 bec（后端代码对象，以便它对整个类可见）声明为 Welcomepage 类中的成员数据并在其构造函数中进行了初始化，但它是在该构造函数中通过一些初始化创建的，但 jButton1ActionPerformed 方法中的 bec 对象值将为空。为什么会这样.. 获得初始化对象实例的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:40:23.480

全局`bec`变量永远不会被初始化。您在构造函数的范围内创建一个新`bec`变量。

尝试以下操作：

```
public class welcomepage extends javax.swing.JFrame {
    backendcode bec;
    String username;
    public welcomepage() {
    initComponents();
            username=null;
            bec= new backendcode("dummy");
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:38:59.593

更改此行

`backendcode bec = new backendcode("dummy");`

到这一行：

```
bec = new backendcode("dummy"); 
```

如果您仔细查看代码，您正在隐藏全局变量**bec 。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T14:39:52.737

在您的构造函数中，您正在执行以下操作：

```
backendcode bec= new backendcode("dummy"); 
```

...创建一个新变量。您想像这样设置现有字段：

```
bec= new backendcode("dummy"); 
```

无论何时指定类型，您都是在创建一个新变量，而不是设置现有变量的值。这可能会令人困惑，因为您发现局部变量可以与字段具有相同的名称 - 当它们具有相同名称时，它被称为阴影，并且它是该方法的其余部分默认引用的局部变量，而不是字段。

您可以使用`this`关键字显式引用字段，而不是局部变量。例如，如果您将构造函数更改为以下内容：

```
public welcomepage() {
    initComponents();
    username=null;
    backendcode bec= new backendcode("dummy");
    System.out.println("bec created "+ this.bec);
} 
```

...您会看到字段 ( `this.bec`) 仍然为空。

顺便说一句，您可能应该将该字段声明为私有 - 这样它仍然对整个类可见（这就是它是一个字段的原因），但不会从任何*其他*类可见（或更重要的是，可更改）。如果您确实需要其他类来更改字段的状态，那么您可以通过 getter / setter 方法以更可控的方式进行操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T14:39:40.073

您在构造函数中隐藏了这条线的字段。

```
backendcode bec= new backendcode("dummy"); 
```

它应该是

```
bec= new backendcode("dummy"); 
```

你所做的叫做[阴影](http://en.wikipedia.org/wiki/Variable_shadowing)

我还建议查找[Java 命名约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)。这将使您的代码更易于阅读。

# android - Cocos2dx 打开 gl 问题

> ID：12496999
> 
> 赞同：-1
> 
> 时间：2012-09-19T14:36:03.657
> 
> 标签：android, opengl-es, cocos2d-iphone

我正在制作 android 版本的 cocos2dx iOS 游戏。在 iOS 中，cocos2dx 不支持少数 gl api，因为我们使用的是原生 iOS api。现在，当我在 andorid 上运行相同的代码库时，那些不受支持的 API 会出错。以下是在 Xcode 项目上运行 purfact 并给出错误（在各行前面提到）elcipse 的代码：

```
glPushMatrix(); //ERROR: 'glPopMatrix' was not declared in this scope
glTranslatef(x, y, 0.0); //ERROR: 'glPopMatrix' was not declared in this scope

float angle = 360.0 / sparkleNum;

int idx, opacity;
idx = index % FIREWORK_TYPE_NUM;

opacity = (1.0 - step) * 255;

for(int i = 0; i < sparkleNum; ++i)
{
    glPushMatrix();
    glRotatef(i * angle, 0.0, 0.0, 1.0); //ERROR: 'glPopMatrix' was not declared in this scope
    glTranslatef(0.0, dist, 0.0);
    glScalef(scalar, scalar, scalar);//ERROR: 'glPopMatrix' was not declared in this scope

    firework[idx]->setOpacity(opacity);
    firework[idx]->draw();

    glPopMatrix(); //ERROR: 'glPopMatrix' was not declared in this scope
}

glPopMatrix(); //ERROR: 'glPopMatrix' was not declared in this scope 
```

帮助我消除这些错误并成功使用 gl apis。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T14:26:46.053

```
kmGLPushMatrix();
kmGLPopMatrix(); 
```

Gles2.0 doesn't have these functions, try to use kazmath instead.