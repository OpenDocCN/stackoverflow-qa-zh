# StackOverflow 问答 11349000-11349999

# android - 活动发送数据，即使用户已退出它

> ID：11349000
> 
> 赞同：0
> 
> 时间：2012-07-05T16:55:14.700
> 
> 标签：android, android-activity, android-service, runnable

我想在我的应用程序中执行以下操作。即使用户按下主页键，我的应用程序仍将继续发送数据（无限期地直到应用程序被终止）。在伪代码中，我想要这样的东西：

```
even_if_i_have_pressed_home_button {
    for (;;) sendData();
} 
```

你能帮我用什么吗？我已阅读有关服务、线程或可运行文件的信息。你能给我一些建议并给我示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:04:22.433

您将创建一个[服务](http://developer.android.com/reference/android/app/Service.html)，该服务将创建一个持续运行的线程。服务实现是一个很大的话题，不能在这里讨论。首先阅读 android[服务](http://developer.android.com/reference/android/app/Service.html)文档页面。这里有一些事情要记住，

1.  如果您要创建一个在应用程序用户界面停止后运行并继续执行工作的线程，请确保添加[通知](http://developer.android.com/reference/android/app/Notification.html)以便用户理解这一点，并为他们提供真正停止服务的方法。例如，单击通知会将它们带回应用程序的用户界面，并带有“退出”的方式。

2.  如果需要内存，android 将销毁您的服务。您无法创建绝对会继续运行的服务。您应该在应用程序设计中考虑这一点。

3.  确保你真的需要这样做。持续的网络活动将对用户的电池寿命产生严重影响。考虑让手机进入睡眠状态并定期唤醒以使用[警报管理器](http://developer.android.com/reference/android/app/AlarmManager.html)执行工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:07:42.923

您应该为此使用服务，服务仅在“紧急”情况下被 Android 杀死，因此当您的应用程序的活动关闭时，它很可能会保持活动状态。一定要关闭你的服务，你可以使用服务的 onDestroy 方法。

# java - 如何使用Java发送和读取第三方javascript变量

> ID：11349002
> 
> 赞同：0
> 
> 时间：2012-07-05T16:55:28.707
> 
> 标签：java, javascript, web, web-scraping

我有两个 javascript 文件：

[http://www.dublinbikes.ie/design/marseille/javascript/gmaps_common.js](http://www.dublinbikes.ie/design/marseille/javascript/gmaps_common.js)
[http://www.dublinbikes.ie/design/marseille/javascript/gmaps_search_station.js](http://www.dublinbikes.ie/design/marseille/javascript/gmaps_search_station.js)

哪个[http://www.dublinbikes.ie/All-Stations/Station-map#](http://www.dublinbikes.ie/All-Stations/Station-map#)网站

我想要做的是通过设置变量“值”一个站号来模拟在左侧搜索站状态操作并将其传递给`gmaps_common.js`执行，然后从函数`gmaps_search_station.js`调用的执行变量中读取结果。`html``LeftBlock(id)`

因为我需要多次自动运行整个过程，所以请建议我可以使用 Java 来执行此操作以及如何执行此操作。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:18:12.450

你永远不应该仅仅为了从中获取 js 变量而尝试模拟 JavaScript 解释器 - 只需执行脚本在您的语言中会执行的相同操作即可。Java足够强大。

该脚本仅从 http://www.dublinbikes.ie/service/carto 获取站点列表[，](http://www.dublinbikes.ie/service/carto)然后从[http://www.dublinbikes.ie/service/stationdetails/dublin/](http://www.dublinbikes.ie/service/stationdetails/dublin/) {number} 查询详细信息（[示例](http://www.dublinbikes.ie/service/stationdetails/dublin/25)） . Java 有很多 HTTP 和 XML 库，你也可以这样做。

# c# - WebService 还是 WebSocket？

> ID：11349006
> 
> 赞同：0
> 
> 时间：2012-07-05T16:55:58.130
> 
> 标签：c#, asp.net, web-services, websocket

我正在尝试在 ASP.net/C# 中构建简单的两人游戏应用程序。我不确定最好使用 WebService 还是 WebSocket。我知道它们之间的基本区别，我只需要一些建议是选择 WeSocket 还是 WebService 更好，为什么？

我对这两种技术都是新手，因此将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:41:35.210

我会说使用[PokeIn](http://pokein.com)。它具有用于桌面应用程序的 DesktopClient，您可以从 WebSocket 中受益以便与它们进行通信，您还可以将相同的服务器端用于基于浏览器的解决方案。它可以帮助您几乎实时地从客户端和服务器调用方法，而无需处理文本解析等。PokeIn 拥有自己的 Websocket 服务器。

另一个好处是当客户系统受到某些防火墙等的影响时。PokeIn 可以通过 HTTP 接口创建通信。

# c# - Internet Explorer 8（和兼容模式）中的 GridView 性能缓慢

> ID：11349008
> 
> 赞同：0
> 
> 时间：2012-07-05T16:56:08.053
> 
> 标签：c#, asp.net, performance, gridview

我应该在 GridView 中显示相当大量的数据（每 10-20 列大约 1000 行），并且我看到第一次渲染在 IE8 中非常慢（也启用了兼容模式）。同一页面在 Firefox 和 Chrome 上加载速度非常快，但不幸的是，我必须针对该项目使用 IE。

我能做些什么来改善 IE 的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:29:54.210

您已经知道对于大型数据源，渲染会很慢 :)

您可以在此帖子上尝试答案

[为什么我的 ASP.NET 页面放置在服务器上时呈现缓慢？](https://stackoverflow.com/questions/730657/why-do-my-asp-net-pages-render-slowly-when-placed-on-the-server)

在此页面上查看此答案链接[https://stackoverflow.com/a/730732/448407](https://stackoverflow.com/a/730732/448407)

但在这一切之前，为什么不在gridview 中使用分页呢？

这将允许页面打开，因为要呈现的数据会更少，但这不会提高数据库级别的性能。

为此，您需要自定义分页：

[http://www.aspsnippets.com/Articles/Custom-Paging-in-ASP.Net-GridView-using-SQL-Server-Stored-Procedure.aspx](http://www.aspsnippets.com/Articles/Custom-Paging-in-ASP.Net-GridView-using-SQL-Server-Stored-Procedure.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:40:10.903

您是否使用 javascript 来呈现页面？还是整个 HTML 都来自服务器？

如果是 Javascript，那么你需要切换到服务器端渲染。也许在服务器上使用 DataGrid。

如果你有大量的 CSS，尤其是定义为的 CSS 类，`.parentClass .childCass {....}`那么它在 IE 中的表现会更差。

另一种可能性是您的页面正在下载大量脚本、CSS、图像。IE 通常比 FF 慢，Chrome 正在获取大量外部资源。

所以，建议是：

*   直接从服务器渲染 HTML。
*   `EnableViewstate = false`在 DataGrid 上设置。
*   清理 CSS。
*   减少脚本、CSS 和图像的数量。

让我知道它是否有帮助。如果不是，请证明您页面的 html 输出。

# grails-orm - 嵌入式 Grails 域

> ID：11349010
> 
> 赞同：1
> 
> 时间：2012-07-05T16:56:10.460
> 
> 标签：grails-orm, grails-domain-class

我有这个域模型`grails-app/domain`，命名为`com.portal.Schedule.groovy`具有以下属性：

```
Subject subject 
Room room
Day day
Time timeStart
Time timeEnd    
static embedded = ['timeStart', 'timeEnd'] 
```

对象`com.portal.Time`中的位置位于`src/groovy`具有此属性的位置：

```
Integer hour
Integer minute
public Time(Integer hour, Integer minute) {
   super();
   this.hour = hour;
   this.minute = minute;
} 
```

问题是当我想使用`BootStrap.groovy`以下语法添加记录时：

```
new Schedule(subject: Subject.get(1), room: Room.get(1), day: Day.MON,
   timeStart: new Time(9, 0), timeEnd: new Time(11, 00)).save(failOnError: true) 
```

我在完成启动之前收到此错误消息：

> 消息：实体没有默认构造函数：com.portal.Time；嵌套异常是 org.hibernate.InstantiationException: No default constructor for entity: com.portal.Time

我该如何解决这个问题才能让我运行具有这些属性`Bootstrap.groovy`的实例？`Schedule`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:40:14.853

您的 Time 构造函数设置为私有。这就是您收到该错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:16:21.467

我已经在谷歌上彻底搜索了如何解决这个问题。它似乎`groovy`具有与`python`构造函数或`tuples`Python 中位于[此处的其他术语几乎相同的功能](http://groovy.codehaus.org/gapi/groovy/transform/TupleConstructor.html)

将注释插入类后，`Time`我现在可以以多种方式对构造函数进行编码。

# cross-compiling - 使用 mingw32 交叉编译 Xalan 时出错

> ID：11349012
> 
> 赞同：0
> 
> 时间：2012-07-05T16:56:16.637
> 
> 标签：cross-compiling, xalan, mingw32

我正在尝试在 Linux 构建主机上使用 mingw32 交叉编译 Xalan for Windows。大约一年前，我在 Debian Lenny 上做到了这一点，没有太多麻烦（只是对 Makefile 和 MsgCreator 的本机副本进行了细微调整），但尝试在 Squeeze 上做到这一点变得有点困难。

失败的命令是

```
i586-mingw32msvc-dllwrap --export-all-symbols --driver-name  \
  i586-mingw32msvc-g++ -mthreads -Wl,--allow-multiple-definition \
  ../../../../obj/XalanMsgLib.o -o ../../../../lib/libxalanMsg1_11_0.dll 
```

这是来自库存 Makefile 的命令，为我的系统更正了 dllwrap 命令和驱动程序名称（Debian Squeeze，从官方存储库安装的 mingw32 软件包）

产生的错误是

```
../../../../obj/XalanMsgLib.o: In function `_ZN11xalanc_1_1117XalanMsgContainer10getMessageEj':
  XalanMsgLib.cpp:(.text+0x18): undefined reference to `_GLOBAL_OFFSET_TABLE_'
  ../../../../obj/XalanMsgLib.o: 
  .data.DW.ref.__gxx_personality_v0[DW.ref.__gxx_personality_v0]+0x0): 
  undefined reference to `__gxx_personality_v0'
  collect2: ld returned 1 exit status
  i586-mingw32msvc-dllwrap: i586-mingw32msvc-g++ exited with status 1 
```

根据此处和 Google 上的建议，我验证了（据我所知）g++ 被用于链接，并且 libstdc++ 被链接到（-lstdc++ 在 LDFLAGS 中，我还在上面的命令）。

我尝试了其他一些方法，但到目前为止没有任何效果，而且我的想法已经不多了。

是什么导致了这个错误，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:39:47.660

事实证明，我发现的关于链接到 libstdc++ 的建议确实是正确且相关的，但问题发生在我没有注意的地方。

dllwrap 命令通过了 -lstdc++，所以这很好，但对象本身 (XalanMsgLib.o) 的编译不是。这导致了未解析的符号。

将 -lstdc++ 添加到编译有问题的 .o 文件的 Makefile（而不仅仅是最后的链接步骤）解决了该问题。

# python - Python文件每次打开/关闭与保持打开直到过程完成

> ID：11349020
> 
> 赞同：44
> 
> 时间：2012-07-05T16:56:54.767
> 
> 标签：python, file-io

我有大约 50 GB 的文本文件，我正在检查每行的前几个字符并将这些字符写入为该起始文本指定的其他文件。

例如。我的输入包含：

```
cow_ilovecow
dog_whreismydog
cat_thatcatshouldgotoreddit
dog_gotitfromshelter
............... 
```

所以，我想在牛、狗和猫（大约 200 个）类别中处理它们，所以，

```
if writeflag==1:
    writefile1=open(writefile,"a") #writefile is somedir/dog.txt....
    writefile1.write(remline+"\n")
    #writefile1.close() 
```

那么，最好的方法是什么，我应该关闭吗？否则，如果我保持打开状态，是否`writefile1=open(writefile,"a")`做正确的事？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-05T17:32:25.357

您绝对应该尝试尽可能少地打开/关闭文件

因为即使与文件读/写相比，文件打开/关闭的成本也要高得多

考虑两个代码块：

```
f=open('test1.txt', 'w')
for i in range(1000):
    f.write('\n')
f.close() 
```

和

```
for i in range(1000):
    f=open('test2.txt', 'a')
    f.write('\n')
    f.close() 
```

第一个耗时**0.025s**，第二个耗时**0.309s**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-05T17:00:23.757

使用该`with`语句，它会自动为您关闭文件，执行`with`块内的所有操作，因此它将为您保持打开文件，并在您离开`with`块后关闭文件。

```
with open(inputfile)as f1, open('dog.txt','a') as f2,open('cat.txt') as f3:
   #do something here 
```

**编辑：** 如果您知道在编译代码之前要使用的所有可能的文件名，那么 using`with`是一个更好的选择，如果您不这样做，那么您应该使用您的方法，而不是关闭文件，您可以`flush`使用将数据保存到文件中`writefile1.flush()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T16:59:25.307

始终保持打开状态！否则，您会告诉系统您已完成所有时间的写入，并且它可能会决定将其刷新到磁盘上而不是缓冲它。由于显而易见的原因，*n次磁盘写入比**1*次磁盘写入要昂贵得多。

如果您想附加到文件而不是覆盖它，那么是的，`a`是正确的模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T17:22:10.820

IO 操作消耗太多时间。也可以打开和关闭文件。

如果您打开两个文件（输入和输出），使用内存缓冲区（例如 10MB 大小）进行文本处理，然后将其写入输出文件，则速度会快得多。例如：

```
file = {} # just initializing dicts
filename = {}
with open(file) as f:
    file['dog'] = None
    buffer = ''
    ...
    #maybe there is a loop here
    if writeflag:
        if file['dog'] == None:
            file['dog'] = open(filename['dog'], 'a')
        buffer += remline + '\n'
    if len(buffer) > 1024*1000*10: # 10MB of text
       files['dog'].write(buffer)
       buffer = ''

for v in files.values():
    v.close() 
```

# jquery - 650 + 150 = 850 在 jQuery 中？两个值的总和返回奇怪的值

> ID：11349022
> 
> 赞同：0
> 
> 时间：2012-07-05T16:57:15.683
> 
> 标签：jquery, html, css

所以我有这个代码：

```
var navWidth = jQuery("ul#navi"), 
    phoneWidth = jQuery("div#phone-number"), 
    diff = navWidth.outerWidth() + phoneWidth.outerWidth();

console.log(navWidth.outerWidth());
console.log(phoneWidth.outerWidth());
console.log(diff); 
```

它显示在控制台中

> 650 150 850

谁能告诉我为什么它显示 850 为 650 + 150 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:24:30.813

如果您有填充或/和边距，这可以改变您的宽度。

函数 .outherWidth() 返回 div 的宽度，包括内边距、边框和不包括边距。

函数 .innerWidth() 返回 div 的宽度，包括 padding，不包括边框和边距。

函数 .outherWidth(true) 返回 div 的宽度，包括 padding 和 margin。

函数 .width() 返回 div 的宽度，不包括 padding 和 margin。

看看[这个](http://api.jquery.com/outerWidth/)链接。

我希望它能解决你的问题。

# php - 将我的 Google 图表（表格）数据导出到 excel 或 csv

> ID：11349024
> 
> 赞同：5
> 
> 时间：2012-07-05T16:57:17.280
> 
> 标签：php, javascript, mysql, google-visualization

我有一个谷歌图表，它是一个表格，我需要一个将数据导出到 excel 或 csv 的选项。

这可以在谷歌图表 API 中完成吗？我发现了几页代码，但那是来自谷歌文档的数据，而我的数据来自 mySQL。我的表也有一些 StringFilters，所以导出的数据应该只是过滤后留下的数据。

如果这不能通过 API 实现，那么最好的方法是什么……我可以将过滤后的数据转换为我可以使用的任何其他格式吗？

非常感谢任何帮助谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-05T17:01:49.797

使用 PHP（您可能希望为此使用 ajax）或您选择的服务器端语言上传到 Google 电子表格，然后从那里转换为 Excel。

或者

使用内置的工具栏功能：

[https://developers.google.com/chart/interactive/docs/gallery/toolbar](https://developers.google.com/chart/interactive/docs/gallery/toolbar)

# ios5 - 断电时iOS UILabel不会改变

> ID：11349029
> 
> 赞同：0
> 
> 时间：2012-07-05T16:57:32.747
> 
> 标签：ios5, notifications, uilabel, nsnotificationcenter, uidevice

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    UIDevice *device = [UIDevice currentDevice];
    device.batteryMonitoringEnabled = YES;
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(batteryChanged:) name:@"UIDeviceBatteryLevelDidChangeNotification" object:device];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(batteryChanged:) name:@"UIDeviceBatteryStateDidChangeNotification" object:device];
}

- (void)batteryChanged:(NSNotification *)notification
{
    UIDevice *device = [UIDevice currentDevice];
    NSLog(@"State: %i Charge: %f", device.batteryState, device.batteryLevel);
    batteryLabel.text = [NSString stringWithFormat:@"State: %i Charge: %f", device.batteryState, device.batteryLevel];
} 
```

UILabel 永远不会更新。电源的事件永远不会被触发。

难道我做错了什么？

我计划只支持 iOS 5.x 和 6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:29:26.080

如果您让通知中心正常工作，但 UILabel 没有更新，难道不是因为收到通知时应用程序处于后台吗？

我会尝试以下方法：

1.  查看 uilabel 是否正确连接到情节提要
2.  应用从睡眠中唤醒后更新 uilabel

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:48:45.803

```
IBOutlet UILabel *currentBatteryStatusLabel; 
```

我将上面的代码更改为以下代码，一切都开始工作了。

```
__weak IBOutlet UILabel *currentBatteryStatusLabel; 
```

我不知道为什么它会产生如此大的不同

# jquery - Jquery 菜单同时动画

> ID：11349030
> 
> 赞同：-3
> 
> 时间：2012-07-05T16:57:33.623
> 
> 标签：jquery, jquery-ui

如何使用 jQuery 同时为 2-3 个 div 设置动画？

我的想法是当有人将鼠标悬停在菜单上时，动画时会出现一个水平条并增加宽度，以及菜单`ul` `li`。

我的主要问题是如何`div`在 jQuery 中同时使用第一个徽标，然后是水平条 div 和菜单 div。

```
<header4>
        <div class="row">
                <div id="logo2">
                <a href="index.html"><h1>Testing</h1></a>
                </div>
             <nav>
                <ul id="primary-nav" class="sf-menu">
                <li><a href="index.html" class="active">Home</a></li>
                <li><a href="#">About Us</a></li>
                <li><a href="#">Services & Products</a>
                <ul>
                    <li><a href="#">Stack Overflow</a></li>
                    <li><a href="#">Stack Overflow</a></li>
                    <li><a href="#">Stack Overflow</a></li>
                    <li><a href="#">Stack Overflow</a></li>
                    <li><a href="#">SStack Overflow</a></li>
                    <li><a href="#">Stack Overflow</a></li>
                    <li><a href="#">Stack Overflow</a></li>
                </ul>
                </li>
                <li><a href="#">Portfolio</a></li>
                <li><a href="#">Career</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
            <!-- END .sf-menu navigation -->
            <div class="clearfix"></div>
            </nav>
            <!-- END nav -->
        </div>
        <!-- END .row -->
        </header4> 

<script>
$("#logo2").hover(function(){
  $("div.header4").animate({
    width: "900px"
  }, 1500 );
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:05:55.633

为什么不直接使用 CSS？不需要 jQuery。

请参阅以下内容：http: [//meyerweb.com/eric/css/edge/menus/demo.html](http://meyerweb.com/eric/css/edge/menus/demo.html)

# django - 如何在 Django 中创建类似 WordPress 的 URL 命名约定？

> ID：11349035
> 
> 赞同：1
> 
> 时间：2012-07-05T16:58:11.580
> 
> 标签：django, django-urls

我是 Django 和 WordPress 的新手，如果您创建一个名为“hello world”的帖子，那么默认情况下的 URL 将类似于

> wordpress.com/2012/07/05/hello-world/

如果您创建另一个具有相同名称的帖子，它将是

> wordpress.com/2012/07/05/hello-world-2/

我想在 Django 中实现同样的目标，我想创建一个这样的示例 urlconf

```
(r'^articles/(\d{4})/(\d{2})/(?P<name>\w+)', 'article.views.article_detail') 
```

并在视图中分解名称并遍历所有项目并匹配名称。

但问题是我将无法动态引用帖子。例如，如果我要链接一个你好世界的帖子，我需要找出已经存在多少同名的帖子，然后将附加的数字附加到它上面，这是低效的。

那么在 Django 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:02:41.057

请参阅 Django[`{{ url }}`模板标签](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#url)的文档。它允许您向其传递视图名称和参数，并自动为您生成正确的 URL。

您可以在生成其 slug 的函数中为每个帖子的名称附加数字 - 您可以查看[django-autoslug](https://bitbucket.org/neithere/django-autoslug/)

# c++ - 在 Windows 窗体中使用 C++ 类会导致 System.AccessViolationException

> ID：11349036
> 
> 赞同：0
> 
> 时间：2012-07-05T16:58:33.517
> 
> 标签：c++, .net, winapi, runtime-error, ifstream

我编写了一些使用各种 C++ 库的 C++ 类。我制作了一个 Windows 窗体项目，并将其设置为成功使用我的类。但是，我最近制作了另一个 C++ 类，现在我一直得到：

`A first chance exception of type 'System.AccessViolationException' occurred in TEST_OCU.exe`

这导致：

```
 An unhandled exception of type 'System.TypeInitializationException' occurred in Unknown Module.
 Additional information: The type initializer for '<Module>' threw an exception. 
```

程序甚至还没有开始运行，新的、引起问题的 C++ 类甚至还没有构建。如果我注释掉这个`new`调用，并且只有一个指向这个新 C++ 类的指针，那么一切都编译得很好。但是，如果我在某个地方做类似的事情：

```
 if(new_class_ptr != NULL)
    new_class_ptr->SomeFunction()  //It doesn't matter what function this is 
```

这将再次引发这些违规行为

* * *

一些事实：

*   编译和链接很好，这似乎是一个运行时问题。
*   我的解决方案使用非托管 C++ 库和类（我已经编写），以及一个托管 C++ 表单。
*   到目前为止，我还没有遇到任何问题，我已经成功使用了一些 C++ 库一段时间。这是由我最近编写的一个新的 C++ 类引起的。
*   导致这些违规的 C++ 类用于`std::ifstream`读取文件。如果我注释掉`std::ifstream input_file(filename);`我的表单项目成功运行。
*   如果我在一个简单的 Win32 项目中使用 C++ 类，它可以在`std::ifstream`.
*   我有一种强烈的感觉，它与[这个问题有关](https://stackoverflow.com/questions/8499725/using-stdwstring-results-in-system-accessviolationexception)

有人可以提供任何建议吗？谢谢

* * *

**编辑**：我提供了我的表单代码的某些部分。RTSPConnection 工作得很好，有问题的类是 RTPStream

```
public ref class Form1 : public System::Windows::Forms::Form
{
public:
  // ... Lots of generated code here ...

//Calls I've written
    private: static RTSPConnection * rtsp_connection_ = NULL; //This class works
    private: static RTPStream * rtp_connection_ = NULL; //This class does not
    bool streaming_;
    System::Threading::Thread^ streaming_thread_;

    private: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e) {
        if(rtsp_connection_ == NULL)
        {
            rtsp_connection_ = new RTSPConnection("rtsp://192.168.40.131:8554/smpte");
            streaming_ = false;
        }

            //if(rtp_connection_ == NULL)
            //   rtp_connection_ = new RTPStream("test");

    }

    private: System::Void Form1_FormClosing(System::Object^  sender, System::Windows::Forms::FormClosingEventArgs^  e) {
        if(rtsp_connection_ != NULL)
            rtsp_connection_->StopStreaming();
    }

    private: System::Void button1_MouseClick(System::Object^  sender, System::Windows::Forms::MouseEventArgs^  e) {
        if(!streaming_)
        {
            //Start Streaming
            streaming_thread_ = gcnew Thread(gcnew ThreadStart(&Form1::WorkerThreadFunc));
            streaming_thread_->Start();

            this->button1->Text = L"Stop Streaming";
            streaming_ = true;
        }
        else
        {
            //Stop Streaming
            if(rtsp_connection_ != NULL)
            rtsp_connection_->StopStreaming();

            //THIS CALL RIGHT HERE WILL THROW AN ACCESS VIOLATION
            if(rtp_connection_ != NULL)
                rtp_connection_->StopStreaming();
            this->button1->Text = L"Start Streaming";
             streaming_ = false;
        }
    }
 }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:49:37.733

这两种说法似乎相互矛盾：

> 程序甚至还没有开始运行，新的、引起问题的 C++ 类甚至还没有构建。
> 
> 如果我注释掉新调用，并且只有一个指向这个新 C++ 类的指针，那么一切都编译得很好。

问：你能把代码贴在你称之为“新”的地方吗？还是您在称呼“新”-也许您的意思是“如果我注释掉我的新课程”？

问：您能否在您的构造函数中设置一个断点，查看堆栈跟踪，看看是谁在调用它？什么*时候*？

========== 附录 ==========

我强烈不同意这种说法：

> 这一切都取决于这一行：std::ifstream input_file(filename); 其中文件名是一个 std::string。

我强烈*同意*此声明：

> 如果您有相互依赖的静态类成员并且它们没有按照您期望的顺序初始化，那么您在 C# 中会遇到几乎相同的错误。在 C++ 中，如果你有一个静态单例和另一个引用它的静态成员

调用“ifstream”本身不是问题。相反，在程序初始化之前以某种方式调用调用 ifstream 的类*是*问题所在。

问：你在这门课上叫“新”吗？如果有，在哪里。请剪切/粘贴该代码。

根据 MSDN，您*应该*能够设置“混合模式调试”。我有很多不同的 MSVS 副本 :) ...但 MSVS 2010/C++ 并不是其中之一。请查看此文档：

*   [http://msdn.microsoft.com/en-us/library/fz5w87ad.aspx](http://msdn.microsoft.com/en-us/library/fz5w87ad.aspx)

*   [http://msdn.microsoft.com/en-us/library/cktt23yw](http://msdn.microsoft.com/en-us/library/cktt23yw)

# apache - 无法在自定义端口上安装 Wordpress 多站点（网络）

> ID：11349039
> 
> 赞同：15
> 
> 时间：2012-07-05T16:58:51.310
> 
> 标签：apache, xampp, wordpress

我正在运行一个网站`http://localhost:8080/sitename`。但是，当我尝试使用 wordpress 创建站点网络时，出现以下错误`Tools-> Network`：

```
ERROR: You cannot install a network of sites with your server address.
You cannot use port numbers such as :8080. 
```

我试图创建一个虚拟主机和一个假域，但我无法让它工作。我该如何解决？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2014-12-20T16:30:52.423

目前，Wordpress 似乎只支持 80 和 443 端口。使用任何自定义（即 http `8080`）端口的临时可能解决方法：

1.  打开`wp-admin/includes/network.php`并找到它提到的代码部分`array( ':80', ':443' )`并将其添加`:8080`到该数组中。

2.  完成网络设置后，您可能需要进行`wp-config`以下调整：
    `define( 'DOMAIN_CURRENT_SITE', 'example.com'. (stristr($_SERVER['PHP_SELF'],'wp-login.php') ? '':':8080') );`

3.  正如评论（感谢）在创建第一个子站点后指出的那样，它可能在域名中嵌入了端口号，所以尝试进入 Mysql 数据库（即尝试**托管的 phpMyAdmin**，甚至在开始程序之前[安装插件](https://wordpress.org/plugins/wp-phpmyadmin-extension/)`_blogs`）和& `_site`&`_options`表，调整子站点的主页 url（即从域中分离端口号）。

4.  就这样。再次登录您的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-24T14:06:49.767

From my experience, WP is not designed to use custom ports for multi-sites so the blogs (sub-sites) hosts get messed up in the DB.

My solution: After you switch to multi-site or create a new site, you need to go to your db admin page (e.g. phpMyAdmin) and fix the blogs domain in the `wp_blogs` table. Basically WP failed to add a colon between the host and port; just have to add it-> localhost8080 becomes localhost:8080. So, on the site's settings add the missing colon to the siteurl and home urls.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-08T10:29:03.043

我找到了临时解决方案：

在 CMD 中运行“netstat -o -n -a | findstr 0.0.80”将向您显示哪个服务正在使用端口 80。如果 PID 为 4，则表示系统使用端口 80（可能是 IIS 或 Web 矩阵，如果它已安装 - 这是我的情况）。我从 IIS 管理器更改了 IIS 正在使用的端口，并且我还停用了也使用端口 80 的 MsDepSvc 服务（Web Matrix）。之后，我重新配置 apache 以在端口 80 中工作，一切正常！

# mysql - 测试环境中的 InnoDB 性能

> ID：11349048
> 
> 赞同：1
> 
> 时间：2012-07-05T16:59:29.000
> 
> 标签：mysql, innodb

我正在我的机器上运行一些单元和集成测试。在这种测试环境中，数据完整性并不重要。我不在乎数据是否被写入磁盘，我只希望我的测试速度快。

我可以启用任何选项以使 InnoDB 完全在 RAM 中运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:02:19.520

一些选项：

*   在内存文件系统上移动数据（例如，在 linux 机器上的 /dev/shm 中移动数据、日志等）
*   [使用libeatmydata](http://www.flamingspork.com/projects/libeatmydata/)使 fsync() 成为无操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:08:28.920

除了将表类型更改为 MEMORY 而不是 InnoDB 之外，您还可以使用该`innodb_flush_log_at_trx_commit`设置显着加快插入和更新速度。

设置为 2 而不是 1 可以轻松地使插入和更新速度提高 10 倍或更多。实际上，这会导致 InnoDB 每秒将数据 fsync() 到事务日志，而不是在每次事务提交时。

另一种选择是只使用较大的事务（特别是如果您正在插入大量数据并当前使用自动提交）。

# c# - 获取 Windows 消息队列中的所有消息时出现零星错误

> ID：11349050
> 
> 赞同：0
> 
> 时间：2012-07-05T16:59:31.783
> 
> 标签：c#, asp.net, windows, message-queue, system.messaging

在 Windows Server 2003 上运行的 C# ASP.NET 3.5 Web 应用程序中，我偶尔会收到以下错误：

```
"Object reference not set to an instance of an object.:   at System.Messaging.Interop.MessagePropertyVariants.Unlock()
   at System.Messaging.Message.Unlock()
   at System.Messaging.MessageQueue.ReceiveCurrent(TimeSpan timeout, Int32 action, CursorHandle cursor, MessagePropertyFilter filter, MessageQueueTransaction internalTransaction, MessageQueueTransactionType transactionType)
   at System.Messaging.MessageEnumerator.get_Current()
   at System.Messaging.MessageQueue.GetAllMessages()". 
```

引发此错误的代码行是：

```
Message[] msgs = Global.getOutputQueue(mode).GetAllMessages(); 
```

where`Global.getOutputQueue(mode)`给出了我想从中获取消息的消息队列。

更新：

```
 Global.getPool(mode).WaitOne();
 commonClass.log(-1, "Acquired pool: " + mode, "Report ID: " + unique_report_id);
            ............../* some code */
            ..............
                        lock(getLock(mode))
                        {
                            bool yet_to_get = true;
                            int num_retry = 0;
                            do
                            {
                                try
                                {
                                    msgs = Global.getOutputQueue(mode).GetAllMessages();
                                    yet_to_get = false;
                                }
                                catch
                                {
                                    Global.setOutputQueue(mode);
                                    msgs = Global.getOutputQueue(mode).GetAllMessages();
                                    yet_to_get = false;
                                }
                                ++num_retry;
                            }
                            while (yet_to_get && num_retry < 2);
                        }
... /* some code*/
....
finally
            {
                commonClass.log(-1, "Released pool: " + mode, "Report ID: " + unique_report_id);
                Global.getPool(mode).Release();
            }

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:13:23.797

您的描述和[此线程](http://social.msdn.microsoft.com/Forums/pl-PL/msmq/thread/374c1fc3-6078-4597-b5a8-1cb0a64e4ea1)表明存在时间问题。我会`MessageQueue`不频繁地创建对象（可能只创建一次）并`Global.getOutputQueue(mode)`返回一个缓存版本，似乎可以解决这个问题。

**编辑**：进一步的细节表明你有相反的问题。我建议封装对消息队列的访问，捕获此异常并在发生异常时重新创建队列。因此，将对 Global.getOutputQueue(mode).GetAllMessages() 的调用替换为以下内容：

```
public void getAllOutputQueueMessages()
{
    try
    {
        return queue_.GetAllMessages();
    }
    catch (Exception)
    {
        queue_ = OpenQueue();
        return queue_.GetAllMessages();
    }
} 
```

你会注意到我没有保留你的`mode`功能，但你明白了。当然，您必须为对队列进行的其他调用复制此模式，但仅限于您进行的调用（而不是整个队列接口）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-23T03:17:48.633

这是一个旧线程，但谷歌把我带到了这里，所以我将添加我的发现。

我同意用户： tallseth 这是一个时间问题。

创建消息队列后，它不会立即可用。

```
 try
        {
            return _queue.GetAllMessages().Length;
        }
        catch (Exception)
        {
            System.Threading.Thread.Sleep(4000);
            return _queue.GetAllMessages().Length;
        } 
```

如果您在访问您知道已创建的队列时捕获异常，请尝试添加暂停。

在相关说明上

```
_logQueuePath = logQueuePath.StartsWith(@".\") ? logQueuePath : @".\" + logQueuePath;
 _queue = new MessageQueue(_logQueuePath);
 MessageQueue.Create(_logQueuePath);
 bool exists = MessageQueue.Exists(_logQueuePath); 
```

运行 MessageQueue.Exists(string nameofQ); 创建队列后立即方法将返回 false。所以调用代码时要小心，例如：

```
 public void CreateQueue()
    {
        if (!MessageQueue.Exists(_logQueuePath))
        {
            MessageQueue.Create(_logQueuePath);
        }
    } 
```

因为它可能会抛出一个异常，说明您尝试创建的队列已经存在。

-编辑：（抱歉，我没有此新信息的相关链接）

我读到一个新创建的 MessageQueue 将在 MessageQueue.Exists(QueuePath) 上返回 false，直到它收到至少一条消息。

牢记这一点和我之前提到的要点已经让我的代码可靠地运行。

# asp.net-mvc-3 - 表上的多个关系

> ID：11349053
> 
> 赞同：0
> 
> 时间：2012-07-05T16:59:47.067
> 
> 标签：asp.net-mvc-3, database-design, ef-code-first

SQL Server 2012 MVC3 EF4.3.1 代码优先项目。

我有一个`Teacher`和`Student`表具有一对多的关系。的`Teacher`表`Id`将用作帐号，因此它的编号需要与's`Id`分开。`Student`我想创建一个`Person`表（包含共享属性，例如`First, Last, Phone, Email`）以减少属性的冗余。`Person`也将与表具有一对多关系`Address`。

我曾考虑过尝试使用 Table per Hierarchy 模型`Teacher`并`Student`从中继承，但 Id 集不会是分开的，我必须在表`Person`内部建立一对多的关系。`Person`我可以通过代码生成 ID，但内部一对多可行还是实用？

另一种情况是设置`Person`为一个子表，在 and`Teacher`和`Person`and 之间是一对一的`Student`，`Person`但我不确定如何或是否可以在一张桌子上有两个单独的一对一。

有没有一种实用的方法来做我想做的事情，或者我不应该担心冗余而不使用`Person`表格？`Address`如果我走那条路，是否有可能与表（`Teacher-Address`和）有两个单独的一对多关系`Student-Address`？或者就此而言，一对多（`Teacher-Address`，教师可能有额外的送货地址）和一对一（`Student-Address`）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:02:52.997

`Person`另一种方法是在 a和`Role`table 之间建立一对一的关系。`Teacher`并且`Student`只是这种安排中的角色。一个给定的`Role`可以通过许多`Person`实例来实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:53:59.903

您还可以使用 IsTeacher 标志创建 Person 表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:00:33.100

我可以看到两种可能性：

一：与从 Person 基表继承的 Student 和 Teacher 一起去，不用担心“冗余”。这不是冗余，因为您将 Student 和 Teacher 而不是 Person 与 Person 相关联，因此在您的数据库和 DOM 中，Person 表和 Person 类对 Teacher 与 Student 的关系一无所知，它只知道它是一个人。教师和学生关系存储在各自的类型中，而不是人员类型。另外，查看每个类型的表而不是每个层次结构的表。在数据库中查找更加清晰明了，并且您不会在一个表中获得层次结构中每种类型的所有信息。

二：创建一个表，专门保存学生和教师共享的信息，并分别与学生和教师表相关。您可以将其称为“ContactInformation”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T19:31:17.200

教师和学生是人的角色，而不是人的类型。你应该有一张 People 表格，一张 TeachCourse 表格表示一个人是一门课程的老师（在某些情况下是多个老师），一张 AssistCourse 表格表示哪些人作为学生上课。您可能会有人教授一门课程并协助另一门课程，而这在您的第一个版本中没有正确建模。

您还可以为人们创建一个 ContactInformation 或 ShippingInformation 表来指定他们的所有数据（有些人可能有多个电话或电子邮件）。

# javascript - 如何在 Twitter 的 Popover 中使用带有多个按钮的“div”？

> ID：11349058
> 
> 赞同：12
> 
> 时间：2012-07-05T16:59:56.227
> 
> 标签：javascript, jquery, html, twitter-bootstrap, popover

此解决方案适用于单按钮情况：[Is it possible to use a div as content for Twitter's Popover](https://stackoverflow.com/questions/8875376/is-it-possible-to-use-a-div-as-content-for-twitters-popover)

但是在我的页面中，我有一堆弹出框（比如 50-100）。
所以我需要修改这个解决方案。

这是@jävi 的解决方案：

```
$(document).ready(function(){
  $('.danger').popover({ 
    html : true,
    content: function() {
      return $('#popover_content_wrapper').html();
    }
  });
}); 
```

我的每个按钮都有自己的 id。

```
<a class='danger' data-placement='above' title="Popover Title" href='#'>Click</a>
<div id="popover_div1" style="display: none">
  <div>This is your div content</div>
</div>

<a class='danger' data-placement='above' title="Popover Title" href='#'>Click</a>
<div id="popover_div2" style="display: none">
  <div>This is your div content</div>
</div> 
```

那么如何重写这个 javascript 代码片段来覆盖我的所有按钮呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-25T22:39:31.273

我自己就和这个打过架。您需要将 id 放在触发弹出框的元素中。使用这样的自定义数据属性（称为“data-id”）：

```
<a class='danger' data-id="popover_div1" data-placement='above' title="Popover Title" href='#'>Click</a> 
```

然后你可以稍微修改你的 javascript 以编程方式获取 data-id 属性值：

```
$(document).ready(function(){
  $('.danger').popover({ 
    html : true,
    content: function() {
      return $($(this).attr('data-id')).html();
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-19T18:57:03.840

如果你不想用另一个`data-*`属性污染你的源元素，这里有一个简单而通用的方法来使用`data-content`属性作为文本或 CSS 选择器：

```
$('[data-toggle="popover"]').popover({
    html: true,
    content: function() {
        var content = $(this).data('content');
        try { content = $(content).html() } catch(e) {/* Ignore */}
        return content;
    }
}); 
```

您现在可以将`data-content`属性与文本值一起使用：

```
<a data-toggle="popover" data-title="Popover Title" data-content="Text from data-content attribute!" class="btn btn-large" href="#">Click to toggle popover</a> 
```

...或使用`data-content`带有 CSS 选择器值的属性：

```
<a data-toggle="popover" data-title="Popover Title" data-content="#countdown-popup" class="btn btn-large" href="#">Click to toggle popover</a>

<div id="countdown-popup" class="hide">Text from <code>#countdown-popup</code> element!</div> 
```

你可以在这里测试这个解决方案：http: [//jsfiddle.net/almeidap/eX2qd/](http://jsfiddle.net/almeidap/eX2qd/)

...或者在这里，如果您使用的是 Bootstrap 3.0：http: [//jsfiddle.net/almeidap/UvEQd/](http://jsfiddle.net/almeidap/UvEQd/)（注意`data-content-target`属性名称！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-07T21:50:26.777

您可以在没有其他按钮属性的情况下执行此操作，如下所示：

[http://jsfiddle.net/isherwood/E5Ly5/](http://jsfiddle.net/isherwood/E5Ly5/)

```
.popper-content {
    display: none;
}

<button class="popper" data-toggle="popover">Pop me</button>
<div class="popper-content">My first popover content goes here.</div>

<button class="popper" data-toggle="popover">Pop me</button>
<div class="popper-content">My second popover content goes here.</div>

<button class="popper" data-toggle="popover">Pop me</button>
<div class="popper-content">My third popover content goes here.</div>

$('.popper').popover({
    container: 'body',
    html: true,
    content: function () {
        return $(this).next('.pop-content').html();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T17:12:16.390

将包含 popover html 的 div 的 id 存储在 a 元素的 rel 属性中

```
<a rel="popover_div2" ... >click</a> 
```

然后在单击侦听器中获取单击锚点的 rel （不确定 popover 方法如何存储它，但我确定确实如此）：

```
var myRel = $(this).attr(rel);
return $(myRel).html(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T11:01:29.143

对我来说确实是

```
data-id="#popover_div1" 
```

在按钮的 HTML 中（带有 # 用于寻址 div 的 id）。

# javascript - 如何将 Backbonejs 用于大型可扩展应用程序？

> ID：11349059
> 
> 赞同：2
> 
> 时间：2012-07-05T17:00:00.130
> 
> 标签：javascript, backbone.js

根据我的研究，我相信如果只使用 BackboneJS 来构建以客户端为中心的大规模应用程序，情况会变得很麻烦。是否有使用 BackboneJS 构建此类应用程序的最佳方法。我遇到了一个名为 ChaplinJS 的框架，它是 BackboneJS 的包装器，用于构建大型应用程序。有哪些其他框架可以像 ChaplinJS 一样将 BackboneJS 用于大型项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:10:12.343

Backbone.js 中缺失的椎骨比任何东西都可能填补的多。您需要确保您知道要使用什么解决方案进行验证、将模型变量绑定到表单字段和 HTML 显示（假设您想要双向绑定）、模板化、模块化/AMD（例如，类似 RequireJS )，然后可能还有像 Marionette 这样的东西。

我有比这些更多的笔记，但我已经删除了这些主题的大部分笔记，因为它们有点太意识流而难以理解。

```
Binding
    <https://github.com/theironcook/Backbone.ModelBinder>

Validation
    <https://github.com/toddself/Backbone.Validator>
        Just the validation part of things
    <https://github.com/thedersen/backbone.validation>
        Seems to combine binding and validation
    <https://github.com/n-time/backbone.validations>
        Seems to combine binding and validation

Modules
    <https://github.com/scottburch/river-js>

Templates
    handlebarsjs.com <http://handlebarsjs.com/> 
```

总的来说，刚刚用它完成了一个大项目，它不会再次成为我的首选。它遗漏了太多你必须填写的部分。我们可能会看看 Ember.js 是否能更好地为我们工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:42:32.457

木偶： [https ://github.com/derickbailey/backbone.marionette](https://github.com/derickbailey/backbone.marionette)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T21:22:28.197

[Backbone Aura](http://addyosmani.github.com/backbone-aura/) looks really promising. It's from [Addy Osmani](http://addyosmani.com/blog/) and is based on his ["Patterns for Large Scale JavaScript Applications"](http://addyosmani.com/largescalejavascript/) and [Nicholas Zakas'](http://www.nczonline.net/) ["Scalable Application Architecture"](http://www.slideshare.net/nzakas/scalable-javascript-application-architecture).

The developer preview was released just a few weeks ago, so documentation and tutorials are still scarce. But I like that it has such an impressive pedigree, and how it marries two of the most authoritative approaches to JS architecture (Osmani's Aura had been around for a while in non-Backbone form and several frameworks have been built around the Zakas model as well).

# jsf - 如何避免在第一次调用页面时出现 ;jsessionid=XXX？如果第一页是jsp，它可以工作

> ID：11349064
> 
> 赞同：15
> 
> 时间：2012-07-05T17:00:11.173
> 
> 标签：jsf, tomcat, cookies, jboss, jsessionid

我有一个应用程序，它使用欢迎页面 index.jsp 和`<iframe></iframe>`iframe 的内容是一个 jsf 页面。如果我访问 index.jsp，我会在第一次进入 firebug 时看到一个 cookie：

```
Set-Cookie  JSESSIONID=C615DA89B6EF73F801973EA3DCD3B226; Path=/ 
```

的页面`<iframe>`继承了这个jsessionid。但是：当我直接访问页面时，`<iframe/>`我会在第一次请求时将 jsessionId 重写为所有没有 cookie 的 URL。之后使用 cookie。这一切都很好 - 如果：安全系统允许我执行 url 重写。

我运行 jboss 4.2.2

我想实现与 index.jsp 相同的行为 - 例如，始终使用 cookie 并始终避免 http 重写。

[编辑] **感谢 balusc 的回答，我写了这个：**

```
public class JsessionIdAvoiderFilter implements Filter {

            public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException,
                    ServletException {
                boolean allowFilterChain = redirectToAvoidJsessionId((HttpServletRequest) req, (HttpServletResponse)res);

                         //I'm doing this because if I execute the request completely, it will perform a pretty heavy lookup operation. No need to do it twice.
                if(allowFilterChain)
                    chain.doFilter(req, res);
            }

            public static boolean redirectToAvoidJsessionId(HttpServletRequest req, HttpServletResponse res) {
                HttpSession s = req.getSession();
                if(s.isNew()) {

 //after the redirect we don't want to redirect again.
if(!(req.isRequestedSessionIdFromCookie()&&req.isRequestedSessionIdFromURL()))
                    {
                                //yeah we have request parameters actually on that request.         
                        String qs = req.getQueryString();

                        String requestURI = req.getRequestURI();
                        try {
                            res.sendRedirect(requestURI+"?"+qs);
                            return false;
                        } catch (IOException e) {
                            logger.error("Error sending redirect. " + e.getMessage());
                        }
                    }
                }
                return true;
            }
} 
```

不要忘记将其添加到您的`web.xml`

```
 <filter> 
    <display-name>JsessionId Filter</display-name> 
    <filter-name>jsessionIdAvoiderFilter</filter-name> 
    <filter-class>my.namespace.JsessionIdAvoiderFilter</filter-class> 
</filter> 
<filter-mapping> 
    <filter-name>jsessionIdAvoiderFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-05T19:00:58.827

从 Servlet 3.0 开始，您可以使用`<tracking-mode>COOKIE</tracking-mode>`它。但由于 JBoss 4.2.2 不是 Servlet 3.0 兼容的，所以这不是一个选项。

最简单的方法是创建一个 servlet 过滤器，它在返回[`HttpServletRequest#getRequestURI()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestURI%28%29)时发送重定向。当客户端根本不支持 cookie 时，不要忘记检查以防止无限重定向循环。[`HttpSession#isNew()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#isNew%28%29)`true`[`HttpServletRequest#isRequestedSessionIdFromCookie()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#isRequestedSessionIdFromCookie%28%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-04T21:21:00.430

根据克里斯托弗舒尔茨的建议，我尝试了这个并且它有效。

```
 package com.rama.test.jsessionfilter

    public class JsessionIdAvoiderFilter implements Filter {

        protected static final Logger LOGGER = LogManager.getLogger(JsessionIdAvoiderFilter.class);

        public void doFilter(ServletRequest req, ServletResponse res,
                FilterChain chain) throws IOException, ServletException {

            if (!(req instanceof HttpServletRequest)) {
                chain.doFilter(req, res);
                return;
            }

            HttpServletRequest request = (HttpServletRequest) req;
            HttpServletResponse response = (HttpServletResponse) res;

        // Redirect requests with JSESSIONID in URL to clean old links
        /* If you really want clean up some old links which have Jsession id bookmarked clean it. If its new app 
            this  below check is not required. */
            if (request.isRequestedSessionIdFromURL()) {
                String url = request.getRequestURL().append(request.getQueryString() != null ? "?"
                                + request.getQueryString() : "").toString();
                response.setHeader("Location", url);
                response.sendError(HttpServletResponse.SC_MOVED_PERMANENTLY);
                LOGGER.info(" Found url with jsession id in it:"+ request.getRequestURL() +": url="+url);
                return;
            }

            // Prevent rendering of JSESSIONID in URLs for all outgoing links
            HttpServletResponseWrapper wrappedResponse = new HttpServletResponseWrapper(
                    response) {
                @Override
                public String encodeRedirectUrl(String url) {
                    return url;
                }

                @Override
                public String encodeRedirectURL(String url) {
                    return url;
                }

                @Override
                public String encodeUrl(String url) {
                    return url;
                }

                @Override
                public String encodeURL(String url) {
                    return url;
                }
            };
            chain.doFilter(req, wrappedResponse);

        }

        public void destroy() {
        }

        public void init(FilterConfig arg0) throws ServletException {
        }
    } 
```

以及 web.xml 中的以下条目

```
<filter> 
        <display-name>JsessionId Filter</display-name> 
        <filter-name>jsessionIdAvoiderFilter</filter-name> 
        <filter-class>com.rama.test.jsessionfilter.JsessionIdAvoiderFilter</filter-class> 
    </filter> 
    <filter-mapping> 
        <filter-name>jsessionIdAvoiderFilter</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>REQUEST</dispatcher>
    </filter-mapping> 
```

效果很好！！！！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T13:57:54.950

这可以通过一个简单的过滤器来完成，该过滤器使用覆盖 HttpServletRequest.encodeURL 和 HttpServletRequest.encodeRedirectURL 的 HttpServletRequest 包装请求。只需返回传递给它的 String 参数，您将禁用 URL 重写。请注意，这仅适用于单个 webapp，除非您想在`conf/web.xml`（不推荐）中配置它或在所有单独的 webapps 中配置它。

这种技术优于您问题后面发布的技术，因为它不需要重定向，这会减慢您的请求。IMO，它也更清洁。

# iphone - 为基于 Django 的 iOS 服务自动创建移动帐户

> ID：11349070
> 
> 赞同：1
> 
> 时间：2012-07-05T17:01:02.637
> 
> 标签：iphone, django, apple-push-notifications

我有一个带有基于 Django 的 RESTful API 的服务，该 API 专为 iOS 设备访问而设计。我想在服务器上存储一些用户数据——例如收藏夹等非敏感数据。我不想让新用户创建帐户，但我希望数据不公开。该服务还使用 Apple 的推送通知服务 (APNS)。进出服务的所有流量都使用 TLS/SSL。

我正在考虑使用设备在首次启动时生成的 CFUUID 作为用户名和 APNS 提供的令牌作为密码。我将在成功使用 APNS 注册设备后创建一个用户帐户，并在 APNS 令牌更改时更新密码。

这是一个坏主意吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:20:11.163

我决定采用上述方法，但不使用 APNS 令牌作为密码。相反，CFUUID 和令牌在 HTTPS PUT 请求正文中作为表单编码数据发送，并在响应正文中返回服务器生成的密码。

# objective-c - 为什么这个objective-c异常回溯只显示最后两个调用？

> ID：11349073
> 
> 赞同：2
> 
> 时间：2012-07-05T17:01:14.727
> 
> 标签：objective-c, xcode, llvm

使用 Xcode（4.3.3 和 llvm），我在所有异常上设置了一个断点，但通常当断点被命中时，堆栈看起来像这样：

```
(lldb) bt
* thread #1: tid = 0x1c03, 0x31a891c4 libobjc.A.dylib`objc_exception_throw, stop reason = breakpoint 1.1
    frame #0: 0x31a891c4 libobjc.A.dylib`objc_exception_throw
    frame #1: 0x33a677b8 CoreFoundation`+[NSException raise:format:arguments:] + 100 
```

没有关于调用者的信息`NSException raise:format:arguments:`，堆栈就停在那里。

一定有什么东西叫了raise，那么堆栈发生了什么？我应该寻找什么来帮助我调试此类问题（例如，这是否表明某种特定类型的堆栈损坏或其他）？

**更新：**这是带有垃圾的代码。

问题是当我指的是 %@ 时，我不小心写了 %s。将其称为正确分配的字符串可能有点牵强，但我可以在 llvm 控制台中“po imageName”，它最后只是有一些垃圾。

```
NSString *imageName = [NSString stringWithFormat:@"award_%s", award];
UIImage *image = [UIImage imageNamed:imageName];
[_awardIconMapping setObject:image forKey:award]; 
```

到异常发生时，没有线程#0。使用@try/@catch，我从最后一行得到了一个合理的异常（对不起，我认为这是之前的 image= 行）：

```
2012-07-06 10:43:36.184 CallVille[834:707] ****** Hit exception ********
-[__NSCFDictionary setObject:forKey:]: attempt to insert nil value (key: wiseGuy) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:17:36.033

我使用此函数从 NSException 打印堆栈跟踪：

```
#include <execinfo.h>
#include <stdio.h>
#include <stdlib.h>

+ (void) printStackTrace: (NSException*) e
{
    NSArray * addresses = [e callStackReturnAddresses];
    if( [addresses count])
    {
        void * backtrace_frames[[addresses count]];
        int i = 0;
        for (NSNumber * address in addresses)
        {
            backtrace_frames[i] = (void *)[address unsignedLongValue];
            i++;
        }

        char **frameStrings = backtrace_symbols(&backtrace_frames[0], [addresses count]);

        if(frameStrings != NULL)
        {
            int x;
            for(x = 0; x < [addresses count]; x++)
            {
                NSString *frame_description = [NSString stringWithUTF8String:frameStrings[ x]];
                NSLog( @"------- %@", frame_description);
            }
            free( frameStrings);
            frameStrings = nil;
        }
    }
} 
```

# iphone - 使用与实际图像不同大小/比例的 UIImageViews 是否会影响性能？

> ID：11349087
> 
> 赞同：3
> 
> 时间：2012-07-05T17:02:00.633
> 
> 标签：iphone, ios, uiimageview, uiimage, retina-display

我懒得从网上加载图像并将它们扔到我在 Nib 中创建的 UIImageViews 中。在视网膜 iPad 上，按比例缩小的图像比正常分辨率下的图像要好得多。即使它们看起来更好，这些图像*也*必须调整大小，这会导致性能下降，对吧？我应该将 UIImageViews 设为 UIImages 的大小吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:05:38.360

您的图像不应调整为图像视图的大小，而应调整为`[[UIScreen mainScreen] scale]`* `imageView.size`。在视网膜屏幕上，比例为 2，但最好的做法是使用屏幕比例而不是硬编码。

将其设置为这个精确的大小将需要最少的渲染周期（从而获得最佳性能）。

# c# - 使用 Fluent NHibernate 批量插入实体集合

> ID：11349088
> 
> 赞同：19
> 
> 时间：2012-07-05T17:02:09.780
> 
> 标签：c#, sql-server-2008, nhibernate, fluent-nhibernate

我正在尝试使用流利的 NHibernate 将大量对象集合插入到表中，使用调用来保存或更新在 foreach 循环中传递集合中的每个实体。我一直在将批量大小设置为集合的大小，但是我在 Ayende 的博客上读到不建议将其设置为较大的值，因此我将其上限设置为 250，但是当我在 NHProf 中查看集合时，我看到一个插入语句流（集合大约有 20000 个项目），而不是一组批量插入调用。

对于本质上非常基本的查询，这似乎非常低效并且花费的时间比我预期的要长得多 - 将一个值插入 25 列（是的，这是一个可以做得更好的地方，但它是一个遗留数据库我现在坚持）到一个 SQL Server 2008 数据库 - 所以我只能假设我做错了。

有没有推荐的方法来使用 NHibernate 插入大量实体？使用 Save over SaveOrUpdate 是否可以提高效率？

add 方法的代码 - SetBatchSize 调用是批处理上限为 250 的地方，如果小于 250，则设置为集合大小：

```
public void Add(IEnumerable<TEntity> entities)
{
    var session = GetCurrentSession();
    using (var transaction = session.BeginTransaction())
    {
        entities = entities.ToList();

        session.SetBatchSize(SetBatchSize(entities.Count()));

        foreach (var entity in entities)
            session.SaveOrUpdate(entity);

        transaction.Commit();
    }
} 
```

为这个稍微模糊的问题道歉，我觉得我只是以错误的方式处理事情，任何指针都将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T17:15:47.780

您需要使用 StatelessSession 进行批量插入。

（相关：[NHibernate 的无状态会话的插入速度很慢](https://stackoverflow.com/questions/8563108/inserts-of-stateless-session-of-nhibernate-are-slow)）

# apache - Apache 访问日志文件仅打印 vhost_combined

> ID：11349091
> 
> 赞同：0
> 
> 时间：2012-07-05T17:02:34.943
> 
> 标签：apache, tomcat

在我的 apache 网络服务器日志文件目录中；我只能看到两个文件：error.log 和 other_vhosts_access.log。每当有人访问该网站时；对于每个访问请求，在 other_vhosts_access.log 中只打印一个单词 vhost_combined。

因此 other_vhosts_access.log 只填充了一个词 vhost_combined ！知道可能出了什么问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T20:55:01.263

您需要添加一行，例如：

```
LogFormat "%v %h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" vhost_combined 
```

在第一个 VirtualHost 条目之前的 httpd.conf 文件中的某个位置。

发生的情况是您尝试在 CustomLog 指令中使用名为“vhost_combined”的格式，但未定义该名称的格式，这导致它被解释为不包含任何格式的格式字符串（% x) 规范，因此它只是作为字符串打印。

通过添加上述 LogFormat 行，您可以定义所需的格式。

# c++ - libcurl - 无法下载文件

> ID：11349101
> 
> 赞同：-2
> 
> 时间：2012-07-05T17:03:29.770
> 
> 标签：c++, curl, download, libcurl

我正在开发一个程序，该程序将从 AZLyrics 等网站下载歌词。我正在使用 libcurl。
这是我的代码

歌词下载器.cpp

```
#include "lyricsDownloader.h"
#include <curl/curl.h>
#include <cstring>
#include <iostream>

#define DEBUG 1

/////////////////////////////////////////////////////////////////////////////

size_t lyricsDownloader::write_data_to_var(char *ptr, size_t size, size_t nmemb, void *userdata) // this function is a static member function
{
    ostringstream * stream = (ostringstream*) userdata;
    size_t count = size * nmemb;
    stream->write(ptr, count);
    return count;
}

string AZLyricsDownloader::toProviderCode() const
{ /*this creates an url*/ }

CURLcode AZLyricsDownloader::download()
{
    CURL * handle;
    CURLcode err;
    ostringstream buff;
    handle = curl_easy_init();
    if (! handle) return static_cast<CURLcode>(-1);
    // set verbose if debug on
    curl_easy_setopt( handle, CURLOPT_VERBOSE, DEBUG );
    curl_easy_setopt( handle, CURLOPT_URL, toProviderCode().c_str() ); // set the download url to the generated one
    curl_easy_setopt(handle, CURLOPT_WRITEDATA, &buff);
    curl_easy_setopt(handle, CURLOPT_WRITEFUNCTION, &AZLyricsDownloader::write_data_to_var);
    err = curl_easy_perform(handle); // The segfault should be somewhere here - after calling the function but before it ends
    cerr << "cleanup\n";
    curl_easy_cleanup(handle);

    // copy the contents to text variable
    lyrics = buff.str();
    return err;
} 
```

主文件

```
#include <QString>
#include <QTextEdit>
#include <iostream>
#include "lyricsDownloader.h"

int main(int argc, char *argv[])
{
        AZLyricsDownloader dl(argv[1], argv[2]);
        dl.perform();
        QTextEdit qtexted(QString::fromStdString(dl.lyrics));
        cout << qPrintable(qtexted.toPlainText());
        return 0;
} 
```

跑步时

```
./maelyrica Anthrax Madhouse 
```

我从 curl 得到这个记录

```
* About to connect() to azlyrics.com port 80 (#0)
*   Trying 174.142.163.250... * connected
* Connected to azlyrics.com (174.142.163.250) port 80 (#0)
> GET /lyrics/anthrax/madhouse.html HTTP/1.1
Host: azlyrics.com
Accept: */*

< HTTP/1.1 301 Moved Permanently
< Server: nginx/1.0.12
< Date: Thu, 05 Jul 2012 16:59:21 GMT
< Content-Type: text/html
< Content-Length: 185
< Connection: keep-alive
< Location: http://www.azlyrics.com/lyrics/anthrax/madhouse.html
< 
Segmentation fault 
```

奇怪的是，文件在那里。没有这样的页面时显示相同的错误（重定向到 azlyrics.com 主页）

我究竟做错了什么？

提前致谢

编辑：我将写入数据的函数设为静态，但这没有任何改变。甚至 wget 似乎也有问题

```
$ wget http://www.azlyrics.com/lyrics/anthrax/madhouse.html
--2012-07-06 10:36:05--  http://www.azlyrics.com/lyrics/anthrax/madhouse.html
Resolving www.azlyrics.com... 174.142.163.250
Connecting to www.azlyrics.com|174.142.163.250|:80... connected.
HTTP request sent, awaiting response... No data received.
Retrying. 
```

为什么在浏览器中打开页面有效而 wget/curl 无效？

EDIT2：添加后：

```
curl_easy_setopt(handle, CURLOPT_FOLLOWLOCATION, 1); 
```

并使功能静态一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:18:15.497

你的代码

```
 curl_easy_setopt(handle,CURLOPT_WRITEFUNCTION,&AZLyricsDownloader::write_data_to_var); 
```

[以及来自 libcurl](http://curl.haxx.se/libcurl/c/libcurl-tutorial.html)的文档中的以下引用

> 在连接 libcurl 时使用 C++ 而不是 C 时，基本上只需要记住一件事：
> 
> 回调不能是非静态类成员函数
> 
> 示例 C++ 代码：
> 
> class AClass { static size_t write_data(void *ptr, size_t size, size_t nmemb, void* ourpointer) { /* 对数据做你想做的事情 */ } }

可能是您的问题的根源，因为您的函数不是静态成员。即使不是，你也违反了这条规则。

这可能无法解决您的问题，但考虑到您在示例中发布的代码量，这是立即想到的第一件事，值得按照 libcurl 的建议进行更改。如果它不能解决您的问题，我建议您更详细地确定您遇到的错误，以便您下次可以提出更具体的问题（显示的代码要少得多）。

# ruby-on-rails - 从 Rails 中启动 Rails 服务器

> ID：11349103
> 
> 赞同：1
> 
> 时间：2012-07-05T17:03:34.120
> 
> 标签：ruby-on-rails, bundler

是否可以从正在运行的 rails 服务器中启动 rails 服务器？

我还想使用“捆绑安装”安装 gem。我做了一个简单的设置，但是当我调用“捆绑安装”时，安装了正在运行的 rails 服务器的 gem，而不是我希望启动的服务器的 gem。

启动另一个 Rails 服务器的最佳策略是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:27:56.217

正如其他人在评论中所说，您可以从 Rails 应用程序中生成 shell 命令。你有几个选择。[http://mentalized.net/journal/2010/03/08/5_ways_to_run_commands_from_ruby/](http://mentalized.net/journal/2010/03/08/5_ways_to_run_commands_from_ruby/)

如果您想在运行捆绑命令时继承用户环境，您可能需要生成一个 bash 登录 shell，然后运行该命令。例如 ```/bin/bash -l -c “这里的命令”。

尽管您没有询问是否要杀死它们，但如果您只是要运行它并且您没有构建任何东西来跟踪进程 ID，您可以使用一些`ps aux | awk '/process name or unique path/ {print $2}' | xargs kill`魔法找到并杀死其他实例

# php - INSERT INTO 表 VALUES .. vs INSERT INTO 表 SET 错误

> ID：11349104
> 
> 赞同：5
> 
> 时间：2012-07-05T17:03:42.437
> 
> 标签：php, mysql, sql, mysqli, mysql-5.1

我正在尝试运行以下查询：

```
"insert into visits set source = 'http://google.com' and country = 'en' and ref = '1234567890';" 
```

该查询对我来说看起来不错，它会打印一条警告：

```
1 row(s) affected, 2 warning(s): 1364 Field 'country' doesn't have a default value 1292 Truncated incorrect DOUBLE value: 'http://google.com' 
```

并且信息未按预期存储：

```
id , ref , bnid, source, country
'5', NULL, NULL, '0'   , '' 
```

如果我运行正常的语法，例如：

```
insert into visits (source,country,ref) values('http://google.com','en','1234567890'); 
```

我得到了预期的结果：

```
'6', '1234567890', NULL, 'http://google.com', 'en' 
```

第一个语法（插入集）在以前的服务器中工作。现在我用 cpanel 改成了一个，但它没有。这是本周我第二次在带有 cpanel 的两个不同 VPS 中遇到这个问题，所以我猜它应该是版本号或 mysql 配置。

**mysql版本：5.1.63-cll**

桌子：

```
CREATE TABLE `visits` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ref` varchar(64) DEFAULT NULL,
  `bnid` int(11) DEFAULT NULL,
  `source` varchar(256) DEFAULT NULL,
  `country` varchar(10) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T17:05:44.307

从插入查询中删除“和”

```
insert into visits set source = 'http://google.com' , country = 'en' , ref = '1234567890' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T17:06:38.020

使用时`INSERT...SET`，使用分隔字段`,`，而不是`AND`。

```
INSERT INTO visits SET source = 'http://google.com', country = 'en', ref = '1234567890'; 
```

# c# - 如何使用 C# 找出字符串中的句点数

> ID：11349105
> 
> 赞同：-5
> 
> 时间：2012-07-05T17:03:45.900
> 
> 标签：c#

我有字符串，例如：

```
1.1
1.11
11.11
1.1.1
11.11.11 
```

所有这些都是单个字符串，没有空格，只有数字和句点。

我需要能够计算字符串中的句点数。有没有一种简单的方法可以在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T17:06:35.010

有几种方法，例如（需要框架 3.5 或更高版本）：

```
int cnt = str.Count(c => c == '.'); 
```

或者：

```
int cnt = 0;
foreach (char c in str) if (c == '.') cnt++; 
```

或者：

```
int cnt = str.Length - str.Replace(".", "").Length; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T17:08:05.727

当我输入你的*确切*问题时，谷歌上的第一个结果......

[http://social.msdn.microsoft.com/Forums/en/csharplanguage/thread/4be305bf-0b0a-4f6b-9ad5-309efa9188b8](http://social.msdn.microsoft.com/Forums/en/csharplanguage/thread/4be305bf-0b0a-4f6b-9ad5-309efa9188b8)

做一些研究...

```
int count = 0;
string st = "Hi, these pretzels are making me thirsty; drink this tea. Run like heck. It's a good day.";
foreach(char c in st) {
  if(char.IsLetter(c)) {
    count++;
  }
}
lblResult.Text = count.ToString(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T17:08:11.997

记住字符串是字符数组。

您可以在 linq 查询中使用[Enumerable.Count](http://msdn.microsoft.com/en-us/library/bb535181.aspx)

```
"11.11.11".Count(c => c=='.'); // 2
"1.1.1.1".Count(c => c=='.'); // 3 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T17:08:49.937

```
string stringToTest = "1.11";
string[] split = stringToTest.Split('.');
int count = split.Length - 1;
Console.WriteLine("Your string has {0} periods in it", count); 
```

# php - Codeigniter 邮件内部服务器错误

> ID：11349106
> 
> 赞同：0
> 
> 时间：2012-07-05T17:03:46.760
> 
> 标签：php, codeigniter, email, internal-server-error

尝试使用 sendmail 或 smtp 发送电子邮件时，我收到内部服务器错误。我收到了电子邮件，但根据错误日志，cookie 出现问题：

> mod_security：使用代码 500 拒绝访问。解析 cookie 时出错：规范化 cookie 值时出错：检测到无效字符 [0] [hostname "myDomain.be"] [uri "/favicon.ico"]

我不知道 favicon.ico 在那里做什么，因为我没有使用 favicon

```
$this->load->library('email');

    $this->email->from($this->input->post('email'), $this->input->post('name'));
            $this->email->to('xxx@xxx.com'); 

            $this->email->subject('xxxcontact');
            $this->email->message($this->input->post('message'));   
            $this->email->set_alt_message($this->input->post('message'));
            ($this->email->send()) 
```

我在配置文件中定义了我的配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:38:18.333

请原谅我的无知，但为什么`$this->email->send()`在括号中？尝试查看输出`<?php echo $this->email->print_debugger(); ?>`

# php - 从两列的 MySQL 表中查找相同的值

> ID：11349108
> 
> 赞同：1
> 
> 时间：2012-07-05T17:03:52.437
> 
> 标签：php, mysql

我只需要过滤在 x 和 y 列中具有相同值的这些表行。

```
 _______________________________________
|
|    x    |      y     |      name     |
________________________________________
|
|   1     |      2     |     A         |
|______________________________________
|   2     |      1     |      B        |
|______________________________________
|   1     |      2    |     C          | 
|_______________________________________ 
```

最终结果应该是我有 A 和 C 结果。我需要过滤这些具有相同 x 和 y 值的行。

```
 _______________________________________
|
|    x    |      y     |      name     |
________________________________________
|
|   1     |      2     |     A         |
|______________________________________
 ______________________________________
|   1     |      2    |     C          | 
|_______________________________________ 
```

我已经尝试过这段代码，但我只成功了一个字段。

```
select * 
from auto 
where x in (
        select x 
        from auto 
        group by x 
        having count(*) > 1
    ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:08:12.543

```
SELECT t1.*
FROM tablename t1, tablename t2
WHERE t1.x = t2.x
AND t1.y = t2.y
AND t1.primary_key != t2.primary_key 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:31:36.863

```
select * from 
auto a, ( SELECT x, y, COUNT(*) FROM auto GROUP BY x, y HAVING COUNT(*) > 1 ) b
where a.x = b.x
and a.y = b.y 
```

会将您的其他问题标记为重复

# asp.net-mvc - html.actionlink 路由值错误

> ID：11349109
> 
> 赞同：0
> 
> 时间：2012-07-05T17:04:19.247
> 
> 标签：asp.net-mvc, razor, actionlink, routevalues

最近我一直在尝试添加一个链接，允许人们在我的网站上删除他们自己的评论。[我已遵循此处](https://stackoverflow.com/questions/1810063/html-actionlink-routevalues "Html.ActionLink Routevalues 问题")提出的问题的答案的建议。这就是我的代码现在的样子：

```
@Html.ActionLink("x","DeleteComment", "Videos", new { commentID = 1234, actionReturnName = "[action]" }) 
```

然后我让控制器在这里处理这些值：

```
public ActionResult DeleteComment(int commentID, string actionReturnName)
{
    DB.CommentDB.DeleteComment(commentID);

    return RedirectToAction(actionReturnName);
} 
```

这似乎是正确的方法，但我做错了什么？我不断收到此错误

> ## “/”应用程序中的服务器错误。
> 
> 参数字典包含方法“System.Web.Mvc.ActionResult DeleteComment(Int32, System.String)”的不可空类型“System.Int32”的参数“commentID”的空条目

我可能会错过一些非常愚蠢的东西，但如果你能帮助我，那就太好了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:06:55.477

您使用了错误的重载。现在，您将 routeValues 作为 htmlAttributes 传递。

传入一个额外的 null 作为 htmlAttributes 以调用正确的方法。

```
@Html.ActionLink("x","DeleteComment", "Videos", new { commentID = 1234, actionReturnName = "[action]" }, null) 
```

# python - 使用 Python 在浏览器中制作 GUI

> ID：11349112
> 
> 赞同：-1
> 
> 时间：2012-07-05T17:04:25.573
> 
> 标签：python, html, user-interface, ironpython

我想在网页中有一个 GUI，允许用户输入参数，然后运行一个简单的 python 程序并返回一个带有结果的图形。我已经研究过使用 IronPython 来做到这一点，但我无法让它工作。他们说您只需要链接到他们的 javascript，但这对我不起作用。我什至不确定 IronPython 是否是正确的工具。有一个更好的方法吗？我想在没有太多javascript的情况下做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:13:03.070

这是一个现成的 Flask 起点：[HelloFlask](https://github.com/fogleman/HelloFlask)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T02:15:08.060

通常，我会使用 django、web2py 或其他 python web 框架。

如果您觉得这对您的情况来说太重了，您可能需要考虑 ((shiver)) 1990 年风格的 Python 中的 CGI 脚本。

# ruby-on-rails - 想要在 Spree 1.1.1 中将变体从单选按钮转换为下拉菜单

> ID：11349114
> 
> 赞同：0
> 
> 时间：2012-07-05T17:04:37.200
> 
> 标签：ruby-on-rails, spree

我正在使用 Spree 1.1.1，现在我想在产品页面中使用下拉菜单而不是单选按钮。

我已经完成了 spree 扩展“spree-dropdown-variants”，但是，GEM 是 2 年大，我不知道我是否可以将这个 2 年大的 GEM 与 Spree 的最新版本一起使用。如果是，“spree-dropdown-variants”的 git 存储库没有 .gem file.so，如何为此安装扩展。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:35:34.130

该扩展不适用于 Spree 1.1.1，因为它仅与 Spree 0.11.x 版本兼容。如果你想让它工作，你必须移植那个扩展。我还计划将我的“spree-dropdown-variants-by-option” gem 移植到 Spree 1.1.x，但在不久的将来。如果您迫切需要该功能，我很乐意为您提供移植服务。

# sql-server - [Microsoft][ODBC SQL Server Driver][SQL Server]将数据库上下文更改为“dbname”

> ID：11349117
> 
> 赞同：0
> 
> 时间：2012-07-05T17:04:57.933
> 
> 标签：sql-server, asp-classic

我有一个带有 textarea 字段的表单，其中包含大约 250k 的 html。我将它发布到调用存储过程并将文本插入表的 ASP 页面。字段类型和存储过程参数都是 varchar(max)。当我发布较小的 html 集但给我错误时，此页面工作正常。

```
[Microsoft][ODBC SQL Server Driver][SQL Server]Changed database context to 'dbname' 
```

当我使用大型 HTML 数据集时。任何想法是什么问题？

ASP

```
Dim addRS, addCMD
Set addCMD = Server.CreateObject("ADODB.Command")
addCMD.ActiveConnection = objconn
ddCMD.CommandType = adCmdStoredProc
addCMD.CommandText = "insert_emailjob"

addCMD.Parameters.Append(addCMD.CreateParameter("emailbody",adlongVarchar,adParamInput,10000000,emailbody))

set addRS = server.createobject("ADODB.Recordset")
addRS.CursorLocation = adUseClient
addRS.open addCMD 
```

程序

```
ALTER PROCEDURE [dbo].[insert_emailjob]
   @emailbody as varchar(max)
AS
BEGIN
    INSERT INTO emails (emailbody) VALUES (@emailbody)
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:26:07.247

在一个表单字段中上传超过 100k 的默认 iis 限制

[http://technet.microsoft.com/en-us/library/aa996475(v=exchg.80)](http://technet.microsoft.com/en-us/library/aa996475%28v=exchg.80%29)

# c# - RadioButtonList OnSelectedIndexChanged 仅触发一次

> ID：11349119
> 
> 赞同：0
> 
> 时间：2012-07-05T17:05:13.930
> 
> 标签：c#, asp.net, updatepanel, postback, radiobuttonlist

我有一个单选按钮列表，它被硬编码到我的 asp.net 页面中，如下所示：

```
<asp:RadioButtonList runat="server" ID="rblOrientation" RepeatDirection="Horizontal"
    OnSelectedIndexChanged="rblOrientation_onSelectedIndexChanged" AutoPostBack="true">
    <asp:ListItem Text="Portrait" Value="P" Selected="True"></asp:ListItem>
    <asp:ListItem Text="Landscape" Value="L"></asp:ListItem>
</asp:RadioButtonList> 
```

后面的代码如下：

```
protected void rblOrientation_onSelectedIndexChanged(object sender, EventArgs e)
{
    ddlPaperSize_onSelectedIndexChanged(sender, e);
} 
```

基本上发生的事情是它调用另一个函数来更新更新面板中的一堆值。这也是硬编码的，看起来像这样：

```
<asp:UpdatePanel runat="server">
    <ContentTemplate>
        <asp:Label ID="lblPaperWidth" runat="server" />
        <span id="txtUOMWidth" runat="server" />&nbsp;×
        <asp:Label ID="lblPaperHeight" runat="server" />
        <span id="txtUOMHeight" runat="server" />
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="rblOrientation" />
        <asp:AsyncPostBackTrigger ControlID="ddlPaperSize" />
        <asp:AsyncPostBackTrigger ControlID="ddlScale" />
    </Triggers>
</asp:UpdatePanel> 
```

我第一次更改单选按钮列表的值时一切正常，但是，如果我第二次尝试它就不起作用。有谁知道这可能是为什么？任何建议都会很棒，谢谢！

**注意：**从我所做的测试来看，这是唯一一个 OnSelectedIndexChanged 没有按照我预期的方式运行的控件。其余控件的事件正确触发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:12:29.573

试试这个代码，它对我来说很好。

```
<asp:ScriptManager ID="smMain" runat="server" />

<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Always" ChildrenAsTriggers="true" >      
      <ContentTemplate>
        <asp:RadioButtonList runat="server" ID="rblOrientation" RepeatDirection="Horizontal"
             OnSelectedIndexChanged="rblOrientation_onSelectedIndexChanged" AutoPostBack="true">
         <asp:ListItem Text="Portrait" Value="P" Selected="True"></asp:ListItem>
         <asp:ListItem Text="Landscape" Value="L"></asp:ListItem>
        </asp:RadioButtonList>

      </ContentTemplate>
    </asp:UpdatePanel> 
```

# jquery - 推迟 $.ajax 请求

> ID：11349123
> 
> 赞同：0
> 
> 时间：2012-07-05T17:05:32.263
> 
> 标签：jquery, jquery-deferred

我必须发出 N ajax 请求。每个 $.ajax 调用都会返回一个 Deferred，但也会立即执行 ajax 请求。我想要做的是为所有 N 个请求获取 Deferreds，但只能让它们逐渐执行（比如通过 setInterval 循环）。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:14:00.123

浏览器本身会限制向单个服务器发出的并行 ajax 请求的数量（例如同时 4 或 8 个）。

如果限制还不够，您可以创建队列并安排一些查询：

```
var queue = [];
queue.push(function() { 
    return $.ajax(...);
});
queue.push(function() { 
    return $.ajax(...);
});
... 
```

然后运行例如 2 个查询，每次完成时，从队列中取出另一个并运行它：

```
function runNext() {
    var fun = queue.shift();
    if (fun) {
        fun().always(runNext);
    }
}
for (var i = 0; i < 2; ++i) {
    runNext();
} 
```

# iphone - 归档时应用程序失败的代码设计警告

> ID：11349124
> 
> 赞同：0
> 
> 时间：2012-07-05T17:05:33.660
> 
> 标签：iphone, objective-c, ios, xcode

> **可能重复：**
> [代码签名错误：应用程序代码签名验证失败](https://stackoverflow.com/questions/9985320/code-signing-error-application-failed-codesign-verification)

所以我知道类似这样的问题已经有好几次了，但似乎没有一个能准确地回答我正在寻找的问题。我找到了有关如何解决此问题的苹果文档，并且我系统地检查并检查了每一个错误的地方，并且在此过程中几乎失去了理智。我留下的唯一可能的选择是完全启动一个新项目并再次完成整个配置过程，我真的不想这样做。请，如果您有解决方案，我将非常感谢您的任何建议。

对于**这个错误**

```
warning: Application failed codesign verification. The signature was invalid, 
    contains disallowed entitlements, or it was not signed with an iPhone 
    Distribution Certificate. (-19011)
Executable=/Users/aaronkawalsky/Library/Developer/Xcode/DerivedData/PetPocket-
    ctqkmlfzeawgfdcqlbsslqfrodvt/Build/Intermediates/ArchiveIntermediates/
    PetPocket/IntermediateBuildFilesPath/UninstalledProducts/PetPocket.app/
    PETPocket
codesign_wrapper-4.1: using Apple CA for profile evaluation
/Users/aaronkawalsky/Library/Developer/Xcode/DerivedData/PetPocket-  
    ctqkmlfzeawgfdcqlbsslqfrodvt/Build/Intermediates/ArchiveIntermediates/
    PetPocket/IntermediateBuildFilesPath/UninstalledProducts/PetPocket.app:
a sealed resource is missing or invalid In architecture: armv7
codesign_wrapper-4.1: failed to execute codesign(1)
 - (null) 
```

这是我的**构建日志的结尾**

```
CodeSign
/Users/aaronkawalsky/Library/Developer/Xcode/DerivedData/PetPocket-
        ctqkmlfzeawgfdcqlbsslqfrodvt/Build/Intermediates/ArchiveIntermediates/
        PetPocket/IntermediateBuildFilesPath/UninstalledProducts/PetPocket.app
    cd /Users/aaronkawalsky/Documents/petpocketiphone/trunk/PetPocket
    setenv CODESIGN_ALLOCATE /Applications/Xcode.app/Contents/Developer/
        Platforms/iPhoneOS.platform/Developer/usr/bin/codesign_allocate
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/
        iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/
        Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /usr/bin/codesign --force --sign 57c0004c5de1c69a8edfdfd0fa604a772a250365
--resource-rules=/Users/aaronkawalsky/Library/Developer/Xcode/DerivedData/
        PetPocket-ctqkmlfzeawgfdcqlbsslqfrodvt/Build/Intermediates/
        ArchiveIntermediates/PetPocket/IntermediateBuildFilesPath/
        UninstalledProducts/PetPocket.app/ResourceRules.plist
--entitlements /Users/aaronkawalsky/Library/Developer/Xcode/DerivedData/
        PetPocket-ctqkmlfzeawgfdcqlbsslqfrodvt/Build/Intermediates/
        ArchiveIntermediates/PetPocket/IntermediateBuildFilesPath/
        PetPocket.build/Release-iphoneos/PetPocket.build/PetPocket.xcent
/Users/aaronkawalsky/Library/Developer/Xcode/DerivedData/
        PetPocket-ctqkmlfzeawgfdcqlbsslqfrodvt/Build/Intermediates/
        ArchiveIntermediates/PetPocket/IntermediateBuildFilesPath/
        UninstalledProducts/PetPocket.app

Validate
/Users/aaronkawalsky/Library/Developer/Xcode/DerivedData/
        PetPocket-ctqkmlfzeawgfdcqlbsslqfrodvt/Build/Intermediates/
        ArchiveIntermediates/PetPocket/IntermediateBuildFilesPath/
        UninstalledProducts/PetPocket.app
    cd /Users/aaronkawalsky/Documents/petpocketiphone/trunk/PetPocket
    setenv PATH "/Applications/Xcode.app/Contents/Developer/
        Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/
        Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    setenv PRODUCT_TYPE com.apple.product-type.application
        /Applications/Xcode.app/Contents/Developer/
        Platforms/iPhoneOS.platform/Developer/usr/bin/Validation
/Users/aaronkawalsky/Library/Developer/Xcode/DerivedData/
        PetPocket-ctqkmlfzeawgfdcqlbsslqfrodvt/Build/Intermediates/
        ArchiveIntermediates/PetPocket/IntermediateBuildFilesPath/
        UninstalledProducts/PetPocket.app 
```

再次，任何帮助将不胜感激。

# testing - 软件层的自我诊断测试？

> ID：11349126
> 
> 赞同：2
> 
> 时间：2012-07-05T17:05:39.907
> 
> 标签：testing, diagnostics, automated-tests

随着越来越多的努力将软件分成独立的层并使用动态发现和依赖注入将它们解耦，确定系统中的哪个“层”导致“应用程序”的系统范围故障变得越来越困难。

单元测试通过确保构成一个层的所有“模块”按预期工作来提供帮助。但是单元测试的编写方式是通过使用诸如存根和模拟之类的技术来隔离每个“模块”。

考虑下面的简单示例：

L1。数据库-> L2。数据库层-> L3。Windows 服务 -> L4。客户端应用程序

例如，如果数据库引擎关闭，则系统将无法正常运行。很难判断数据库引擎是否真的停机或数据库层 (L2) 代码中是否存在错误。要检查，您必须启动某种数据库管理工具来检查数据库引擎是否正在运行。

我们试图实现的是一个开发者工具，可以在系统“出现问题”时启动，该工具将“查询”每一层的“完整性”或“诊断”数据。该工具将提供软件层列表及其“完整性状态”。然后它将能够立即说，X 层是问题的原因（即数据库引擎已关闭）。

当然，每一层都将负责提供自己的“诊断方法”，该工具可以查询。

我想我们在这里试图实现的是某种“集成测试”框架或可以在运行时使用的类似框架（而不是像单元测试那样的编译/构建时间）。灵感来自拥有自己的“车载诊断”的物理设备，如汽车。软件领域的一个很好的例子是每次打开计算机时都会运行的开机自检。

有没有人看到或听到过这样的事情？任何建议或指示肯定会有很大帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:37:57.287

您可以有一个公共接口，每个层都将作为 WCF 服务实现。通过这种方式，您可以连接到每一层并对其进行诊断。提供此诊断可能很有用，但如果您想在任何地方（每一层）实现它，那将是另一件事可能会失败 - 您将如何诊断？您的系统会充斥着 WCF 服务，这并不好，因为它需要大量维护并且不太稳定。此外，它需要大量的工作来实施。

我建议的替代方法是建立一个良好的日志记录系统。最低要求是让每个模块在所有`catch`部分中都记录一个错误，但我建议更多，尤其是出于调试目的。我推荐使用免费且非常灵活的 Log4Net。它在不需要时不记录是有效的，这意味着您可以将记录级别设置为高，即使在生产代码中也不会影响性能。您可以在运行时通过更改配置文件中的设置来更改日志记录级别。我经常使用 Log4Net，它运行良好。

一旦你有了你的代码日志记录，你就可以配置 Log4Net，以便所有日志都进入一个中央数据库。然后，您将有一个地方可以相对容易地诊断发生了什么，发生了什么失败，异常或消息在哪里以及是什么。您甚至可以设置在出现问题时发送电子邮件。

# javascript - 按下 ctrl+p 时触发 javascript 函数

> ID：11349129
> 
> 赞同：0
> 
> 时间：2012-07-05T17:05:46.677
> 
> 标签：javascript, jquery, jquery-ui

当有人试图打印页面时，我需要销毁 jQueryUI 选项卡。我无法使用 CSS 隐藏它，因为我需要这些选项卡中的数据。

任何人都可以帮助/指出我正确的方向吗？也许还有其他方法可以达到相同的结果？

摧毁我的意思是：

```
$('#tabs').tabs("destroy"); 
```

这必须在 IE7/8 上工作，因为那是公司使用的浏览器。

解决方案（感谢@Phil）：

```
//Destroys the tabs for print
window.onbeforeprint = destroyTabs;

//Remakes tabs after printing
window.onafterprint = makeTabs;

function makeTabs() {
    $('#tabs').tabs();
}

function destroyTabs() {
    $('#tabs').tabs('destroy');
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:08:14.947

这可能有效：

```
@media print {
    .ui-tabs-nav { display: none; }
    .ui-tabs .ui-tabs-hide { display: block !important; }
} 
```

* * *

这是黑暗中的另一个镜头（我没有尝试过）但是：

```
<script type="text/javascript">
     window.onbeforeprint = destroyTabs;

     function destroyTabs(){
       $('#tabs').tabs('destroy').tabs();
     }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:42:50.057

在 JavaScript 中无法以跨浏览器友好的方式执行此操作。

和方法仅适用于 IE 和 Firefox 6+ `onbeforeprint`。`onafterprint`您可以将它们与`window.matchMedia`添加对 Chrome 9+ 和 Safari 5.1+ 的支持。[我已经在http://tjvantoll.com/2012/06/15/detecting-print-requests-with-javascript/](http://tjvantoll.com/2012/06/15/detecting-print-requests-with-javascript/)上写过如何实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T17:08:19.343

```
$(document).keypress("p",function(e) {
  if(e.ctrlKey)
    alert("Ctrl+P was pressed!!");
}); 
```

# java - 如何批量更新我的 mongo 数据以添加固定级别？

> ID：11349131
> 
> 赞同：0
> 
> 时间：2012-07-05T17:05:58.300
> 
> 标签：java, mongodb, migration

我最近将 POJO 的所有类型化属性更改为在名为*content*的类型化 JSONObject 字段中的免费内容。

问题是所有旧文档都映射到旧 POJO 版本，因此它们的存储方式如下：

```
{"_id":"ObjectId(value)","field1":"value1","field2":"value2"} 
```

我可以通过一个 mongo 命令更新所有字段，以便我可以包装除 id 之外的所有内容，因此结果将是这样的：

```
{"_id":"ObjectId(value)","content":{"field1":"value1","field2":"value2"}} 
```

?

或者我应该编写一个简单的程序来一个一个地完成它？（就像在迭代所有值时手动添加新的*内容*级别一样）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:51:21.130

不幸的是，没有 MongoDB 命令可以让您以这种方式重组文档。您需要编写一个程序来一个一个地获取所有文档，更新结构，然后将更新的结构发送回 MongoDB。

通常最好的方法是将修改后的文档写入新集合，然后在完成后删除旧集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:53:59.683

我解决了它创建一个 .js 文件以通过 mongo shell 执行。

```
mongo myDb fixresults.js 
```

该文件如下：

```
for( var c = db.results.find(); c.hasNext(); ) {
    var full = c.next();
    var anon = db.results.findOne({"_id":full._id},{"_id":0});
    var n = {"_id":full._id,"content":anon};
    db.results.temp.insert(n);
} 
```

这会将转换后的值插入到 .temp 集合中，您可以稍后将其重命名以替换原始值。

# java - 无状态 ejb 没有被破坏

> ID：11349134
> 
> 赞同：1
> 
> 时间：2012-07-05T17:06:16.793
> 
> 标签：java, jakarta-ee

我有一个用于开发目的的 REST 接口，它支持无状态 EJB。它反过来注入另一个无状态 EJB。我的理解是，每次需要实例时，无状态 EJB 都会被销毁而不是钝化和重建。

使用这个逻辑，我添加了一个@PostConstruct（对 REST 和另一个无状态 ejb），但两者都只被调用一次（从日志中推断）。对 REST 层的重复调用将重用同一个 bean（及其状态！），而不是创建一个新的。

无状态 bean 没有被销毁的可能原因是什么？还是我误解了无状态 ejb 的生命周期？

**编辑**：我所指的“状态”是 bean 构造以加速执行的临时缓存。也许是一个糟糕的词选择:)

**EDIT2**：一些骨架代码：

```
import javax.ejb.Stateless;
import javax.ejb.EJB;
import javax.ws.rs.Path;

@Path("tools")
@Stateless
public class RESTTools {

@EJB
private CatalogueLocal catalogue;

@PostConstruct
public void initialize() {
    logger.debug("Initializing REST client");
}
}

@Stateless
@Local(CatalogueLocal.class)
@TransactionManagement(TransactionManagementType.BEAN)
public class Catalogue {

@PostConstruct
public void initialize() {
    logger.debug("Initializing catalogue");
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:36:30.970

我相信您误解了生命周期。

无状态 bean 会根据需要进行实例化，并由容器从实例池中激活。

# drupal - 在 Drupal 7 中为特定内容类型的图像字段添加类

> ID：11349144
> 
> 赞同：0
> 
> 时间：2012-07-05T17:07:14.760
> 
> 标签：drupal

目前我正在使用[此答案](https://stackoverflow.com/a/8044263/1165159)中建议的代码。以下是：

```
function simalr_preprocess_image(&$variables) {
    if ($variables['style_name'] == 'request-background') {
    $variables['attributes']['class'][] = 'pixastic';
    $variables['attributes']['class'][] = 'pixastic-blurfast(amount=1)';
    }
} 
```

这工作正常，除了我在没有“请求背景”样式的图像的页面上收到以下错误消息：

> 注意：未定义的索引：simalr_preprocess_image() 中的 style_name（/var/www/vhosts/simalr.com/httpdocs/sites/all/themes/simalr/template.php 的第 46 行）。

我只希望这段代码用于特定的内容类型（即“请求”）。我必须以哪种方式调整我的 template.php 文件中的代码才能在仅属于某种内容类型的页面上使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:04:24.480

您仍然可以使用您的代码，但使用`isset`函数。这将删除警告。

如果您只想为特定的内容类型使用`menu_get_object`drupal 中的功能。如果它是节点页面，此函数将为您返回节点。

例子：

```
$node = menu_get_object();

if ($node->type == 'story') {
  // TODO
} 
```

希望这可以帮助。

# c# - Windows Phone 7 对话框

> ID：11349145
> 
> 赞同：0
> 
> 时间：2012-07-05T17:07:17.687
> 
> 标签：c#, silverlight, user-interface, windows-phone

如何显示一个对话框消息，类似于`MessageBox`，它只有“取消”按钮并且可以由应用程序关闭。

这个想法是在应用程序从服务器检索数据时显示对话框，允许用户取消此请求，并在请求完成后关闭对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:20:18.553

我记得过去有一个非常相似的问题。我认为没有这样的“开箱即用”对话框消息。我解决这个问题的方法是编写一个类来模拟窗口中的这种行为，并让应用程序产生一个窗口实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:26:33.040

silverlight 消息框在打开时会阻止代码执行，因此无法关闭它。但是，您可以在 Silverlight 中使用异步的 XNA 消息框

[这深入解释了它的用途](http://dotnet.dzone.com/articles/delivering-message-using)

然后，您可能可以出于您的目的调用[EndShowMessageBox](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.gamerservices.guide.endshowmessagebox.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:27:36.497

如果您的目的是让用户知道正在加载某些内容并且他们应该等待。您应该改用进度条。

[如何：创建自定义不确定进度条](http://msdn.microsoft.com/en-us/library/gg442303%28v=vs.92%29.aspx)

# php - PHP：检查是否为空行（“\n”）

> ID：11349151
> 
> 赞同：1
> 
> 时间：2012-07-05T17:07:34.197
> 
> 标签：php, is-empty

我正在使用 API 以 JSON 格式检索一些温度和位置值。我正在将输出写入纯文本缓存文件。

但是，温度站可能无法报告温度值，在这种情况下，我的输出将是一个空行 (\n)。我想通过为非报告站显示“N/A”来处理这种情况。

这是一个典型的缓存文件，第一个站报告温度和位置，第二个站关闭（报告两个空行）：

```
27.6
Napoli-Posillipo
(an empty line)
(an empty line) 
```

我试过：

```
$display = file($cachename);
$temperature[0] = $display[0];
$location[0] = $display[1];
$temperature[1] = $display[2];
$location[1] = $display[3];

$temp_avg = (($temperature[0]+$temperature[1])/2); //average temperature

if($temperature[0] = "\n"){ //if weather station is not reporting data
   $temperature[0] = "N/A";
   $temp_avg = "N/A";
}

if($temperature[1] = "\n"){
   $temperature[1] = "N/A";
   $temp_avg = "N/A";
}

echo "<div id='temperature'><b>".$temperature[0]."</b>°C (".$location[0].") | ";
echo "<b>".$temperature[1]."</b>°C (".$location[1].") | ";
echo "<b>".$temp_avg."</b>°C (avg) | ".$minutes."m".$secondsleft."s ago</div>"; 
```

但是，即使第一个站正确报告了它的温度值，我也不断得到两个站的“N/A”。

> N/A°C (那不勒斯-波西利波) | 不适用°C () | N/A°C (平均) | 12 分 21 秒前

我尝试使用 fgets() 而不是 file()，但出现错误：

> fgets() 期望参数 1 是资源，第 54 行 [...] 中给出的字符串

我也尝试过使用*if(empty($temperature[foo]))*但它没有用，因为当然*\n != empty*。

有什么提示吗？提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T17:10:21.653

您还可以使用：

```
if (trim($temperature[1]) == '') {
  // Empty line.
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T17:08:41.427

您的[比较](http://php.net/manual/en/language.operators.comparison.php)应如下所示（注意使用两个等号）：

```
if($temperature[0] == "\n"){ 
```

您当前的代码分配`"\n"`给`$temperature[1]`，其评估结果为真，这就是`if`条件执行的原因。

如果您想使用[`empty()`](http://php.net/empty)，我建议您这样做，请将您的呼叫更改[`file()`](http://php.net/file)为：

```
$display = file($cachename, FILE_IGNORE_NEW_LINES); 
```

添加`FILE_IGNORE_NEW_LINES`标志将告诉函数不要将换行符 ( `"\n"`) 添加到数组元素的末尾。

# java - 创建包含“;”的cookie 特点

> ID：11349155
> 
> 赞同：0
> 
> 时间：2012-07-05T17:07:45.753
> 
> 标签：java, cookies

我想创建一个cookie，它的值包含许多“；” 通常用于在 java 中分隔多个 cookie 的字符，这就是为什么我的代码没有完成他的工作。如果有人可以帮助我如何创建这个“特殊”cookie并使我的代码工作？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:12:11.603

您可以使用 URL 编码来转义任何特殊字符 ( `+`, `%`, `=`, `;`)。

`;`的 URL编码值为`%3B`。

如需更好的参考，请查看[Java JSON API](http://www.json.org/javadoc/org/json/Cookie.html#escape%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T17:10:50.773

[cookie 中不允许使用](https://stackoverflow.com/a/1969339/373151)分号。最好的办法是使用其他分隔符。阅读链接的答案以找出可以使用的字符。

# parsing - Powershell：Select-String 不解析此变量

> ID：11349168
> 
> 赞同：3
> 
> 时间：2012-07-05T17:08:27.783
> 
> 标签：parsing, variables, powershell, powershell-2.0

PowerShell 菜鸟在这里。我一直试图让 Select-String 解析下面的变量。

我正在调用一个将所有内容记录到标准输出的外部程序。这是我正在使用的备份同步软件。输出是很多信息，例如源、目标、复制的文件、更改的文件等。我只关心标准输出中的几个项目。我正在获取标准输出并尝试为我关心的几个项目解析它，所以我只看到那些，而不是其他 50 行杂项信息。

这是代码：

```
$procInfo = New-Object System.Diagnostics.ProcessStartInfo
$procInfo.FileName = "C:\Program Files\Siber Systems\GoodSync\gsync.exe"
$procInfo.RedirectStandardError = $true
$procInfo.RedirectStandardOutput = $true
$procInfo.UseShellExecute = $false
$procInfo.Arguments = "/progress=yes /exit sync DroboBackup"
$proc = New-Object System.Diagnostics.Process
$proc.StartInfo = $procInfo
$proc.Start() | Out-Null
(Get-Date -format T) + ": Backup Process Running. Please Stand By..."
$proc.WaitForExit()
if ($proc.ExitCode -eq 0) 
{ 
    "GoodSync Reported: Analyze or Sync Successfully Completed." 
} elseif ($proc.ExitCode -eq 1)
{
    "GoodSync Error: Analyze had Terminal Errors. Did gsync.exe close abruptly?"
} elseif ($proc.ExitCode -eq 2)
{
    "GoodSync Error: Sync had Terminal Errors. Did gsync.exe close abruptly?"
} else 
{ 
    "GoodSync Error: General Error. Typo in job name?"
}
$output = $proc.StandardOutput.ReadToEnd()
$output += $proc.StandardError.ReadToEnd()
#$output  | Out-File c:\output.txt -Append
$newOutput = $output | Select-String "Copy New","Copy Over","Delete File","Items Synced","Changes:"
$newOutput 
```

运行后我得到的是标准输出中的所有行。我没有得到我漂亮而干净的解析返回。

因此，为了尝试排除故障，我发送`$output`到一个文本文件，然后运行以下内容，这就是我得到的：

```
$x = Get-Content c:\output.txt | Select-String "Copy New","Copy Over","Delete File","Items Synced","Changes:"
$x 
```

* * *

```
PS C:\> .\test.ps1

Changes: 0, Conflicts: 0, CopyTime: 0, CopyState: 0/0, Errors: 0 
```

如您所见，它是针对文本文件工作的，但不是作为变量。

有什么见解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T17:45:46.287

您正在使用[StreamReader](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)的[ReadToEnd()](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readtoend.aspx)方法读取标准输出。这将返回一个**包含**内容的字符串，包括回车。因此，当您在管道上输出此字符串时，Select-String 只看到一个大字符串，而不是每一行。您可以做的是在将回车符传递到管道之前拆分回车符上的字符串：

```
$output -split "`n" | Select-String "Copy New","Copy Over","Delete File","Items Synced","Changes:" 
```

# linux - 如何在git中从本地更改--bare remote上的分支

> ID：11349171
> 
> 赞同：0
> 
> 时间：2012-07-05T17:08:37.457
> 
> 标签：linux, git, repository, hook

我正在尝试在远程 --bare 存储库上创建一个挂钩，该存储库将根据我发送到的分支将我从本地 git 发送的源代码复制到不同的文件夹中。我在本地有 3 个分支：master、development 和 release，所以我希望远程上有 3 个文件夹，其中包含每个分支的源代码。我发现使用：

> git rev-parse --abbrev-ref 头

结合一系列 if 条件可以解决问题。唯一的问题是，对于您发送到的任何分支，远程的 HEAD 都保持不变。是否有任何代码可以在钩子中使用，所以它会知道我正在发送到某个分支？或者有没有其他方法可以做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:51:13.327

您的一个裸仓库将包含所有 3 个分支。您可以使用这样的 git 修饰符将 3 个单独的目录更新为每个分支包含的内容：

```
git --work-tree=/some/project/dir/branch1 --git-dir=/path/to/bare/repo checkout branch1 -- . 
```

为避免指定这些选项，您可以设置它们对应的环境变量：

```
GIT_WORK_TREE
GIT_DIR 
```

这样，您可以保留一个裸仓库和 3 个单独的目录，这些目录在推送分支时会更新。记住你的钩子中提供的参数是什么。第一个是分支名称。

# jquery - IE7 抛出 jQuery 的 'Stack overflow at line: 0' 错误

> ID：11349175
> 
> 赞同：2
> 
> 时间：2012-07-05T17:08:49.213
> 
> 标签：jquery, internet-explorer-7, stack, overflow, preload

我在 jQuery 1.7.2 上有一个小脚本。本质上，它显示缩略图，然后在加载后被完整图像替换。

```
<img src="http://site.com/thumbnail.jpg" data-original="http://site.com/original.jpg"  class="preload"> 
```

在 jQuery 中，我只有：

```
$('.preload').load(function(){

     $(this).attr('src', $(this).attr("data-original"));

}); 
```

这在 Firefox、Chrome 甚至 IE8 等浏览器上运行良好。但是，IE7会继续抛出一个

```
Stack overflow at line: 0 
```

错误（乘以具有预加载类的元素数）。

如果我从图像中删除类.. 错误不会显示。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:14:01.443

您正在对图像执行 onload 事件，然后更改图像 SRC，以便 onload 将再次触发。它处于无限循环中，因此您会遇到堆栈溢出。

```
 $('.preload').load(function(){
    if($(this).attr('src') != $(this).attr("alt")){
         $(this).attr('src', $(this).attr("alt"));
    }
  }); 
```

# load - 使用 Jquery .load() 时锚点不起作用

> ID：11349178
> 
> 赞同：0
> 
> 时间：2012-07-05T17:08:53.080
> 
> 标签：load, anchor

可能有一些与我类似的问题，但没有发现任何完全相同的问题。

我来啦：

我有一个非常简单的 jquery，它可以从外部页面加载链接： 注意：此 DIV 设置为自动溢出。

假设我有这个 DIV，我在其中加载项目的外部页面列表，最后我放置了一个锚点 (a name="my_end_point")(/a) - 抱歉，无法在此处显示 html。

我的脚本运行良好，但是 ANCHOR 不会按预期触发。见下文 $("#div_element").load("my_external_page#my_end_point");

我认为这没什么大不了的，但是我有点存货，并且自动滚动到 end_point 看起来根本不起作用。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T05:35:19.123

使用 jQuery .load() 的工作方式，它可能会尝试从 'my_external_page' 中拉出 ID 为 #my_end_point 的 div，而不是触发锚点。

jQuery 文档：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

如果你在 my_external_page 上有两个 div，一个 #firstDiv 里面有 CHOWDER 这个词，另一个 #secondDiv 里面有 SOUP 这个词，然后 .load("my_external_page #secondDiv"); 将加载 SOUP 而不是 CHOWDER。

要滚动到锚点，您可以使用 scrollTo 插件，例如[http://flesler.blogspot.com/2007/10/jqueryscrollto.html](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)

# python - 如何包装类的每个方法？

> ID：11349183
> 
> 赞同：28
> 
> 时间：2012-07-05T17:09:11.310
> 
> 标签：python, wrapper, metaclass

我想在 python 中包装特定类的每个方法，并且我想通过最少地编辑类的代码来做到这一点。我该怎么办？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-05T18:38:19.193

Michael Foord 的 Voidspace 博客中的一篇关于什么是元类以及如何在标题为 [方法装饰元类](https://web.archive.org/web/20200124090402id_/http://www.voidspace.org.uk/python/articles/metaclasses.shtml#a-method-decorating-metaclass)的部分中使用它们的条目中描述了一种优雅的方法。稍微简化一下并将其应用于您的情况会导致：

```
from functools import wraps
from types import FunctionType

def wrapper(method):
    @wraps(method)
    def wrapped(*args, **kwargs):
    #   ... <do something to/with "method" or the result of calling it>
    return wrapped

class MetaClass(type):
    def __new__(meta, classname, bases, classDict):
        newClassDict = {}
        for attributeName, attribute in classDict.items():
            if isinstance(attribute, FunctionType):
                # replace it with a wrapped version
                attribute = wrapper(attribute)
            newClassDict[attributeName] = attribute
        return type.__new__(meta, classname, bases, newClassDict)

class MyClass(object):
    __metaclass__ = MetaClass  # wrap all the methods
    def method1(self, ...):
        # ...etc ... 
```

在 Python 中，函数/方法装饰器只是函数包装器加上一些语法糖，以使使用它们更容易（而且更漂亮）。

**Python 3 兼容性更新**

之前的代码使用 Python 2.x 元类语法，需要翻译才能在 Python 3.x 中使用，但是它在之前的版本中将不再工作。这意味着它需要使用：

```
class MyClass(metaclass=MetaClass)  # apply method-wrapping metaclass
    ... 
```

代替：

```
class MyClass(object):
    __metaclass__ = MetaClass  # wrap all the methods
    ... 
```

如果需要，可以编写与 Python 2.x*和*3.x 兼容的代码，但这样做需要使用稍微复杂一点的技术，即动态创建一个继承所需元类的新基类，从而避免由于以下原因导致的错误两个版本的 Python 之间的语法差异。这基本上就是本杰明彼得森的[六个](https://pypi.org/project/six/)模块的[`with_metaclass()`](https://six.readthedocs.io/index.html#six.with_metaclass)功能。

```
from types import FunctionType
from functools import wraps

def wrapper(method):
    @wraps(method)
    def wrapped(*args, **kwargs):
        print('{!r} executing'.format(method.__name__))
        return method(*args, **kwargs)
    return wrapped

class MetaClass(type):
    def __new__(meta, classname, bases, classDict):
        newClassDict = {}
        for attributeName, attribute in classDict.items():
            if isinstance(attribute, FunctionType):
                # replace it with a wrapped version
                attribute = wrapper(attribute)
            newClassDict[attributeName] = attribute
        return type.__new__(meta, classname, bases, newClassDict)

def with_metaclass(meta):
    """ Create an empty class with the supplied bases and metaclass. """
    return type.__new__(meta, "TempBaseClass", (object,), {})

if __name__ == '__main__':

    # Inherit metaclass from a dynamically-created base class.
    class MyClass(with_metaclass(MetaClass)):
        @staticmethod
        def a_static_method():
            pass

        @classmethod
        def a_class_method(cls):
            pass

        def a_method(self):
            pass

    instance = MyClass()
    instance.a_static_method()  # Not decorated.
    instance.a_class_method()   # Not decorated.
    instance.a_method()         # -> 'a_method' executing 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-05T17:24:05.823

您的意思是以编程方式为类的方法设置包装器？好吧，这可能是一个非常糟糕的做法，但您可以这样做：

```
def wrap_methods( cls, wrapper ):
    for key, value in cls.__dict__.items( ):
        if hasattr( value, '__call__' ):
            setattr( cls, key, wrapper( value ) ) 
```

例如，如果你有课

```
class Test( ):
    def fire( self ):
        return True
    def fire2( self ):
        return True 
```

和一个包装

```
def wrapper( fn ):
    def result( *args, **kwargs ):
        print 'TEST'
        return fn( *args, **kwargs )
    return result 
```

然后打电话

```
wrap_methods( Test, wrapper ) 
```

将适用`wrapper`于class 中定义的**所有**`Test`方法。**谨慎使用！实际上，根本不要使用它！**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-11T14:13:22.450

如果需要大量修改默认类行为，则 MetaClasses 是可行的方法。这是另一种方法。

如果您的用例仅限于包装类的实例方法，您可以尝试覆盖`__getattribute__`魔术方法。

```
from functools import wraps
def wrapper(func):
    @wraps(func)
    def wrapped(*args, **kwargs):
        print "Inside Wrapper. calling method %s now..."%(func.__name__)
        return func(*args, **kwargs)
    return wrapped 
```

确保`functools.wraps`在创建包装器时使用，如果包装器用于调试，则更是如此，因为它提供了合理的 TraceBacks。

```
import types
class MyClass(object): # works only for new-style classes
    def method1(self):
        return "Inside method1"
    def __getattribute__(self, name):
        attr = super(MyClass, self).__getattribute__(name)
        if type(attr) == types.MethodType:
            attr = wrapper(attr)
        return attr 
```

# extjs - 在树之间和其中一棵树内拖放

> ID：11349184
> 
> 赞同：2
> 
> 时间：2012-07-05T17:09:22.700
> 
> 标签：extjs, extjs4, extjs4.1

我在 Extjs 4.1 中有两棵树，启用了拖放插件。用户可以在这些树之间拖放。在这种情况下，这些树的唯一相关配置是 viewConfig：

树1：

```
viewConfig:{
            plugins: [
                new PmProjectManagement.viewEdit.AvailableCriteriaTreeViewDragDrop({
                    allowContainerDrop: true,
                    allowParentInsert: false,
                    expandDelay: 30000,
                    dropGroup: "secondGridDDGroup",
                    dragGroup: "firstGridDDGroup"
                })
            ]
        } 
```

树2：

```
viewConfig:{
            plugins: [
                new PmProjectManagement.viewEdit.ViewConfigTreeViewDragDrop({
                    allowContainerDrop: true,
                    allowParentInsert: false,
                    expandDelay: 30000,
                    dropGroup: "firstGridDDGroup",
                    dragGroup: "secondGridDDGroup"
                })
            ]
        } 
```

现在我可以从一棵树拖放到另一棵树就好了，但我真正想要的是能够从树 1 拖放到树 2，从树 2 到树 1，以及在树 2 内。我遇到了麻烦在树 2 中拖动，因为 ddGroup 设置为另一棵树。我还需要树 1 不能在其中拖动。有没有人对此提出建议？我能想到的唯一解决方案是在 isValidDropPoint 函数上使用覆盖并删除 ddGroup 限定符，但我真的想要一种更优雅的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T15:59:36.467

`ddGroup`两棵树应该是一样的。

在 ext 4.2 中，您有`nodedragover`在拖动期间通知 Ext.tree.View 的事件。本次活动从`Ext.tree.ViewDropZone#isValidDropPoint`.

所以在 ext 4.2 中你只需要处理这个事件并决定是否允许放置，事件触发会给你很多信息，所以你可以发现是拖动以及使用了哪个树[的事件描述](http://ext-4.2.0.sencha/docs/index.html#!/api/Ext.tree.View-event-nodedragover)。

`dragData`参数包含“视图”属性，您可以从中获取树-放置目标树，例如`dragData.view.panel`.

在 ext 4.1 中你是对的，没有视图通知，来自 sencha 的人甚至放置了一个待办事项标记，这必须在新版本中实现。是的，您可以扩展`Ext.tree.ViewDropZone`和触发类型的事件以通知视图有关拖动的信息（类似于 4.2）。此外，您需要扩展`Ext.tree.plugin.TreeViewDragDrop`插件以注入您刚刚扩展的`Ext.tree.ViewDropZone`. 它只是`onViewRender`插件的覆盖方法并使用您刚刚扩展的拖放区。

然后使用新插件。另一种方法只是覆盖`Ext.tree.ViewDropZone`要在应用程序中的任何位置应用。

恕我直言，您无需更改 dd 组，您只需处理`nodedragover`4.2 中的某种实现即可。

# c# - 在 WCF 服务中使用 Stream 或 DataContracts？

> ID：11349185
> 
> 赞同：0
> 
> 时间：2012-07-05T17:09:26.927
> 
> 标签：c#, wcf, stream, datacontract

在我的 WCF 服务中，我一直将帖子正文中的所有数据作为`Stream`. 当接收到流时，它被读取到一个字符串并反序列化为它“应该”的对象。

我一直在研究使用`DataContracts`并试图了解它们与使用`Stream`. 到目前为止，我看到的最重要的事情是，它需要一些多余的步骤——我不再需要将流读取为字符串并将其反序列化为对象。

这两种方法还有其他明显的区别吗？

例如，我的定义目前看起来像......

`void LogOn(Stream input)`

它会切换到...

`void LogOn(LoginModel model)`

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:15:54.473

我想自己进行序列化/反序列化会对库方法造成性能损失。此外，您当前的方法不会公开有关参数或返回类型的任何信息，因此您失去了强类型接口的所有好处。

# ruby-on-rails - 使用 rails 资产管道维护样式表的 RTL 版本

> ID：11349186
> 
> 赞同：9
> 
> 时间：2012-07-05T17:09:27.793
> 
> 标签：ruby-on-rails, asset-pipeline, right-to-left, sprockets

## 背景

我想启用从右到左的语言环境以及从左到右，但我只想维护一组样式表。

这个想法是调用`application-rtl.css`将提供`application.css`（使用 r2）的 rtl 转换版本。

此功能有两个用例：

*   开发：动态服务，即时转换
*   生产：让预编译生成*-rtl*版本（扩展 rake 资产：预编译任务）

到目前为止，我已经成功地实现了一个 RTLConverter，它使我能够提供所有转换为 RTL 的样式表，而无需触及它们：

**配置/初始化程序/rtl_converter.rb：**

```
require "r2"
require "tilt"

class RTLConverter < Tilt::Template
  def prepare; end

  def evaluate(context, locals, &block)
    R2.r2 @data
  end
end

Rails.application.assets.register_preprocessor 'text/css', RTLConverter 
```

您还可以将其实现为 sprockets 的引擎，以仅转换具有*.rtl*扩展名的文件：

```
Rails.application.assets.register_engine 'rtl', RTLConverter 
```

## 我的问题

我如何才能连接到资产管道以便：

1.  使用名称后缀“-rtl”提供任何样式表的即时转换版本（查找没有后缀的文件并提供其转换版本）？
2.  在预编译期间使用所有样式表的名称后缀“-rtl”创建转换后的副本

**笔记：**

该转换器不能与 sass 引擎一起使用，但似乎可以正常工作。它已被应用到一个基于 twitter-bootstrap 的网站上，并且就像一个魅力。

该转换器尚未在生产中进行测试。

如果我能找到一个体面的解决方案来解决这个问题，我打算创建和维护一个 gem 并将其回馈给社区。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T19:09:44.637

我的目标是直接使用 CSS 来处理 LTR-RTL 差异。CSS 可能可以为您处理这项工作。如果您将 CSS 定义为 LTR，那么基于 CSS 类，您可以覆盖您想要的内容。

1.  默认情况下，将整个 CSS 样式表定义为 LTR。
2.  在处理语言环境的主体上放置一个额外的 css 类。例如`<body class="RTL">`
3.  通过覆盖以“ `RTL`”为前缀的 CSS 类来定义默认的所有例外

一个简短的例子。原始“默认”样式：

```
body { direction: ltr; }
.sidebar { width: 200px; float: right; margin-left: 30px } 
```

然后，稍后在您的 css 中覆盖相关样式：

```
body.rtl { direction: rtl; }
.rtl .sidebar { float: right; margin-right: 30px; }

/*remember to 'reset' all defaults for example: */
.rtl .sidebar { margin-left: 0; } 
```

使用 sass，您有一个共同的地方来定义标准变量，例如上面示例中的边距。你的旅费可能会改变。但对我来说，这听起来比搞乱资产管道更简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T18:21:16.830

不幸的是，其他答案都没有真正提出我正在寻找的解决方案，所以在深入研究之后，我能够想出一个简单的 gem，它可以根据文件名翻转样式表。

因此，通过包含该 gem 并提供名称后附加“-flipped”的样式表版本，我现在能够在开发和生产中提供自动翻转的版本。

在 ruby​​gems.org 上找到 gem：[stylesheet_flipper](https://rubygems.org/gems/stylesheet_flipper)

在 gihub 上查找使用说明：[monibuds/stylesheet_flipper](https://github.com/monibuds/stylesheet_flipper)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T06:49:06.303

据我所知，Sprockets 不会将任何挂钩暴露给处理器的路径查找机制。即使确实如此，我认为您也不能调用一些通用的“读取资产”方法。

总而言之，我担心让 AP 做你想做的事需要一些严重的扭曲。

所以这是一个完全不同的想法。如果你：

*   完全放弃动态资产处理，即使在开发中
*   有一个 Guard 任务设置为
    *   当资源发生变化时重新编译资产（我认为这已经存在）
    *   生成已编译 CSS 的 RTL 版本
*   将编译好的资产推送到生产环境（*喘气！*）

换句话说，也许您可​​以交换一些 AP 功能来提高灵活性？

（我不会在这里寻求赏金，因为这只是一个想法，而不是解决方案）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T17:01:24.437

一年前写过这个问题：http:
[//amitkazmirsky.com/2011/05/29/dry-your-rtl-and-ltr-css-files-in-rails-with-sass/](http://amitkazmirsky.com/2011/05/29/dry-your-rtl-and-ltr-css-files-in-rails-with-sass/)

基本上我的方法是用方向作为变量编写css：

```
#user-box {
    backgroud-color: white;
    padding: 0 5px;
    float: $dir;
}

#side-nav {
    margin-#{$opdir}: 5px;
} 
```

# iphone - UITableViewCell 去除每行之间的白色并显示 UIView 的背景图像

> ID：11349187
> 
> 赞同：1
> 
> 时间：2012-07-05T17:09:41.740
> 
> 标签：iphone, ios, xcode, uitableview

这是我的应用程序的图像

![我的应用图片](../Images/eb1053a345d13e0018cc7e5c3b6cdc58.png)

如您所见，每一行都有白线。我怎样才能摆脱那条线。

这是我完成的单元格代码

```
cell.backgroundView = [ [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"conta.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ]autorelease];   
cell.textLabel.backgroundColor=[UIColor clearColor];
cell.textLabel.text = [tableArray objectAtIndex:indexPath.row];
cell.selectionStyle = UITableViewCellSelectionStyleNone;
tableView.backgroundColor=[UIColor clearColor];
return cell; 
```

我需要擦掉每一行的白线。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T17:14:20.043

在设置表格视图期间的某处，您可以将分隔符样式设置为“无”。这可以在界面构建器故事板/笔尖中完成，也可以在代码中完成，例如：

```
[self.tableView setSeparatorStyle:UITableViewCellSeparatorStyleNone]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:16:02.817

您可以为此使用以下代码，

```
self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
self.tableView.separatorColor = [UIColor clearColor]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T17:19:15.327

在 xib 中，您可以选择分隔符样式为无。这使得白线不显示

```
cell.backgroundView = [ [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"conta.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ]autorelease];   
cell.textLabel.backgroundColor=[UIColor clearColor];
cell.textLabel.text = [tableArray objectAtIndex:indexPath.row];
cell.selectionStyle = UITableViewCellSelectionStyleNone;
tableView.backgroundColor=[UIColor clearColor];
return cell; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T22:21:56.753

有时当单元格不够高时，因为您将单元格变小了，但您忘记在桌子上或在

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

或者因为您想在单元格之间留出一点空间以便可以在它们之间看到背景，所以您实际看到的是表格本身的“白色”。

请记住，默认情况下 UITableViews 是纯白色的，因此如果您希望在单元格之间看到背景，您还需要将表格设置为“非不透明”，并将其背景颜色设置为清晰的颜色。

# jquery - SCRIPT438：对象不支持此属性或方法

> ID：11349188
> 
> 赞同：1
> 
> 时间：2012-07-05T17:09:42.183
> 
> 标签：jquery, ajax

如果这已经得到回答，我很抱歉。我在 Chrome、IE9 中成功运行了这段代码，但在 IE8 和 IE7 中我得到了“SCRIPT438：对象不支持这个属性或方法”（没有说哪个属性或方法）第 1 行字符 1。我难住了。有人能把我从我的谜团中解救出来吗？（使用 jQuery v1.6.2。）非常感谢。

（感谢今天早上帮助过我的每个人，非常感谢。我发布的片段是一个更大项目的一部分，我试图找出我“认为”导致问题的部分。在剥离了一英里的代码后，我现在能够验证 IE7 和 IE8 正在生成：SCRIPT438：对象不支持此属性或方法 testkw.cfm，第 67 行字符 6。

这是在第 67 行：

```
$('.IDlookup').click(function() {                
    ID  = $(IDval).attr('value');                
    var r = "test.cfm";
    $.get(r,function(data){
        $("#Details").html(data);
    });
}); 
```

这是整个模板

```
<div id="Message" style="padding-left:10px;">

  <div style="margin-top:5px; margin-bottom:5px;">
    <input class="add" type="radio" id="_ID" name="lookupType" value="ID" />
    ID
    <input class="add" type="radio" id="_name" name="lookupType" value="name" />
Name</div>
  <div id="ID" class="rTypedesc" style="display:none; padding-left:5px;">
    <input type="text" id="IDval" name="IDval" value="Enter EntityID/ID" />
    <a class="IDlookup">Find &raquo;</a> </div>
  <div id="name" class="rTypedesc" style="display:none;">
    <table>
      <tr>
        <td><input type="text" id="nameinput" name="nameinput" /></td>
        <td style="padding-left:5px;"><a class="name">Find &raquo;</a></td>
      </tr>
    </table>
  </div>
</div>
<div id="Details"></div>
<script >
//
$.ajaxSetup ({
    // Disable caching of AJAX responses
    cache: false
});

  $("input[name$='lookupType']").click(function() {         
    var rType = $(this).val();         
    $(".rTypedesc").hide();         
    $("#"+rType).show();  
    });  

  $('.IDlookup').click(function() {              
    var ID  = $('IDval').attr('value');                  
        var r = "test.cfm?id="+ID;
        $.get(r,function(data){
        $("#Details").html(data);
        });
      });

  $('.name').click(function() {              
       var ID  = $('nameinput').attr('value');                   
        var r = "test.cfm?id="+ID;
        $.get(r,function(data){
        $("#Details").html(data);
        });
      });

     $('#IDval').click(function() {
         $(this).val();
     });

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T12:03:31.110

如果错误来自 ID = $(IDval).attr('value'); 然后只需将“var”放在它后面，如

```
var ID  = $(IDval).attr('value'); 
```

它会解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:16:51.403

假设您按原样复制并粘贴了上面的代码，则`"`该行上有一个杂散的双引号 ( )`var MyData = Message.cfm"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T17:17:02.790

尝试这个 ：

```
 <script type="text/javascript">
 //
$.ajaxSetup ({
  // Disable caching of AJAX responses
 cache: false
});

  $(document).ready(function () {
 $('#Message').html('<p><img src="/seccomm/img/ajax-loader-2.gif" width="20"  />');
 var MyData = "Message.cfm";
 $("#Message").load(MyData);  
 });
</script> 
```

编辑：OP编辑了Qn

# java - 使用 selenium webdriver 处理带有许多按钮的弹出窗口

> ID：11349189
> 
> 赞同：1
> 
> 时间：2012-07-05T17:09:44.120
> 
> 标签：java, selenium, popup, selenium-webdriver

我正在使用带有 Java 语言的 selenium Web 驱动程序。当弹出窗口中有两个按钮时，即 ok 和 cancel ，可以使用 Web 驱动程序使用以下代码轻松处理：

```
Alert alert = driver.switchTo().alert();
alert.accept(); // or alert.dismiss(); depending upon the action u want to perform. 
```

但是当有两个以上的按钮时怎么办，即弹出窗口中有3到4个按钮（例如确定，取消，重试，忽略/继续），在这种情况下我们该怎么办？我们如何点击我们想要的任何按钮？

非常感谢您提前提供的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:01:45.317

我们正在谈论的是 JavaScript 的对话框弹出窗口。有[`alert`](https://developer.mozilla.org/en/DOM/window.alert)（有一个确定按钮）、[`confirm`](https://developer.mozilla.org/en/DOM/window.confirm)（有确定/取消）和[`prompt`](https://developer.mozilla.org/en/DOM/window.prompt)（有一个输入字段和确定）。而已。因此，您看到的对话框不是 JavaScript 对话框，无法由 Selenium 的`Alert`界面处理。

您可能正在处理这两个之一：

1.  像 jQuery [`dialog()`](http://docs.jquery.com/UI/Dialog)（或类似的东西）这样的自定义对话框。那是好消息！这不是真正的弹出窗口，它只是一个精心设计的覆盖层，由普通的 HTML 组成，看起来像一个对话框。您应该能够与 WebDriver 的常用方式进行交互：使用您选择的工具检查元素，然后找到并单击需要单击的按钮。
2.  本机浏览器甚至操作系统的对话框（例如下载对话框）。这是个坏消息，因为 WebDriver 无法处理这些。此外，它们在浏览器/系统/语言设置中的外观往往不同，因此您需要检测和处理每种情况。您的选择包括：
    *   该[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)课程允许您以编程方式“按”键盘上的任何内容（或盲目单击），因此可以通过按下来摆脱对话框`Enter`
    *   [自动车](http://www.autoitscript.com/site/autoit/)。它是一个 Windows 程序，可用于处理任何系统级自动化。
    *   差不多就是这样。您可以指定您特别处理的对话框，我们或许能够提出更好的解决方法。例如，可以完全避免下载对话框等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:04:14.750

您只想在处理本机浏览器弹出对话框时使用 alert() 。如果您测试的 Web 应用程序弹出一个 HTML 对话框，那么您可以使用元素 ID、xpath、CSS 选择器等选择并单击任何按钮。

# jaxb - JAXB-XJC Xpropertyaccessors

> ID：11349190
> 
> 赞同：2
> 
> 时间：2012-07-05T17:09:44.673
> 
> 标签：jaxb, xjc

根据 JAXB 规范[http://jaxb.java.net/2.2.4/docs/xjc.html](http://jaxb.java.net/2.2.4/docs/xjc.html)如果您想运行 JAXB-XJC 编译器，您可能传递的扩展/参数之一是 -Xpropertyaccessors 即使​​它已经在每个 JAXB-RI 中指定，直到最新的 2.2.5u2 仍然当我尝试运行它传递这个参数时，当我运行它时，我在帮助菜单中没有指定“无法识别的参数 -Xpropertyaccessors”。对我来说，拥有属性而不是字段的访问级别很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:11:30.590

我已经跟进了 JAXB RI 领导，显然该插件在那里但未启用。该问题将在 JAXB RI 的 2.1.14 和 2.2.6 版本中得到修复。我建议您输入一个错误，以便您能够跟踪问题的状态。

*   [http://java.net/jira/browse/JAXB/](http://java.net/jira/browse/JAXB/)

# lwuit - 将 LWUIT 移植到代号一后，VKB 未显示

> ID：11349191
> 
> 赞同：1
> 
> 时间：2012-07-05T17:09:44.880
> 
> 标签：lwuit, codenameone

我正在尝试将我的 LWUIT 应用程序移植到[Codename One](http://www.codenameone.com)

我的 LWUIT 应用程序中有一个 textField。在触摸屏手机上，每当我点击这个文本字段时，就会出现一个 VKB。

现在我已将 LWUIT 应用程序移植到代号一。现在，每当我单击文本字段时，在模拟器中，VKB 都不会自动显示。

为什么会发生这种情况，我该如何解决？我希望 VKB 在单击文本字段时自动显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:00:43.550

这适用于设备。

在模拟器中，您可以取消选中菜单选项“Simulate->Native Input”以获得该行为。

# blackberry - BlackBerry OS 7.1 安全 TLS 连接在很短的时间后关闭

> ID：11349193
> 
> 赞同：5
> 
> 时间：2012-07-05T17:09:48.680
> 
> 标签：blackberry, blackberry-jde

**问题摘要：相同的客户端-服务器配置、相同的网络拓扑、相同的设备（粗体 9900）- 在 OS** **7.0**上运行良好，但在 OS **7.1**上无法正常运行，并且安全的**tls**连接在经过很长时间后被服务器关闭短时间。

**问题**：OS 7.0 和 OS 7.1 之间的安全 tls 连接打开是否应该有任何区别？RIM 在 7.1 中是否更改了 tls 基础设施中的任何内容？在 7.1 中是否有可能导致过早的安全 tls 连接关闭？

我的应用程序打开到服务器的安全 tls 连接。连接通过应用层保持活动机制保持活动状态，并保持打开状态，直到客户端关闭它。附件是打开连接并从套接字读取的实际代码的简化版本。该代码在 OS 5.0-7.0 上完美运行，但在 OS 7.1 上无法正常运行。

在 OS 7.1 上运行时，阻塞在很短的时间（10-45 秒）后`read()`返回**-1**（已到达流的末尾）。对于 OS 5.0-7.0，调用会`read()`一直阻塞，直到下一个数据到达并且服务器永远不会关闭连接。

```
Connection connection = Connector.open(connectionString);
connInputStream = connection.openInputStream();
while (true) {
    try {
        retVal = connInputStream.read();
        if (-1 == retVal) {
            break;   // end of stream has been reached
        }

    } catch (Exception e ) {
        // do error handling
    }

    // data read from stream is handled here
} 
```

**更新 1**：
显然，仅当我在 OS 7.1 上使用安全**tls**连接（使用移动网络或 WiFi）时才会出现问题。在 OS 7.1 上打开非安全连接时，一切正常。

对于移动网络上的 tls，我使用以下连接字符串：

```
connectionString = "tls://someipaddress:443;deviceside=false;ConnectionType=mds-**secret**;EndToEndDesired"; 
```

对于 Wifi 上的 tls，我使用以下连接字符串：

```
connectionString = "tls://someipaddress:443;interface=wifi;EndToEndRequired" 
```

**更新 2**：
连接永远不会*空闲*。我不断地在上面接收和发送数据。使用移动连接和 WiFi 时都会出现此问题。该问题出现在真正的 OS 7.1 设备和模拟器上。我开始怀疑它与连接字符串或 tls 握手有某种关系。

**更新 3**：
根据我使用 OS 7.1 模拟器进行的 Wireshark 捕获，服务器正在关闭安全的 tls 连接（客户端收到**FIN**）。目前我没有服务器的私钥，因此我无法调试 tls 握手，但我比以往任何时候都更加确定根本原因是 tls 握手。

**更新 4**：仅在 OS 7.1 上协商**RSA 2048 AES 256**
密码套件 时，会出现安全 tls 连接丢失。相同的密码套件在 OS 7.0 上运行良好。另一方面，当使用**DHE/DSS 768 AES 128**密码套件时，在 OS 7.1 上一切正常，并且连接保持稳定。它一定与**RSA 2048 AES 256** cipher suite.ideas 有关吗？

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:15:27.503

我没有使用过 tls 连接，但是对于普通套接字，您可以通过附加程序在连接 URL 中以毫秒为单位指定显式超时：“;ConnectionTimeout=60000”

此外，您可能需要在套接字上添加某种 ping 机制，否则中间路由器可能最终会关闭连接，即使使用 keep-alive。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T10:06:01.583

在 RIM 的帮助下，我终于弄明白了（您可以在[此处](https://www.blackberry.com/jira/browse/JAVAAPI-2306)找到相关票证）。所有功劳归于 RIM。

在 OS 7.1 中，创建 TLS/SSL 连接时的新安全措施。这是 RIM 文章的引述。

> 最近发现了一种新攻击，当使用 CBC 链接模式时，攻击者可以使用窃听和选择明文攻击的组合来解密 TLS 1.0 和 SSL 3.0 流量。
> 
> 为了解决这个问题，我们实施了一项符合 SSL 规范的更改，并被大多数浏览器（例如 Mozilla® Firefox® 和 Google Chrome™）广泛采用。我们实施了一项对策，将 TLS 记录拆分为两条记录：第一条记录包含单个字节的数据，第二条记录包含其余数据，从而阻止攻击者利用此漏洞。

完整的文章可以在[这里](http://supportforums.blackberry.com/t5/Java-Development/A-new-security-measure-when-creating-SSL-connection/ta-p/1623685)访问。

长话短说，为了减少与我的服务器的不兼容问题，我必须在打开连接之前将“ **DisableCbcSecurity=true** ”属性添加到连接字符串。

请注意，此*解决方法*适用于运行版本**7.1.0.288**及更高版本的设备，尽管我也可以在运行 7.1.0.267 的 Torch 9860 上正常工作。******

# css - CSS水平下拉调整边框

> ID：11349195
> 
> 赞同：1
> 
> 时间：2012-07-05T17:09:50.233
> 
> 标签：css, drop-down-menu, border

我想在悬停时在我的下拉菜单周围有一个边框。我希望顶部菜单上的左右边框与下拉菜单上的边框对齐。而且我不想在顶部菜单的文本下方看到边框。我不确定我是否清楚地解释了事情，所以我附上了[一张](http://i48.tinypic.com/lz1c7.jpg)我想要的图片。

[这](http://cssdesk.com/YHtNd)是我的尝试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:19:39.700

这是一种很酷的风格。要实现它，CSS 需要执行以下操作：

选项卡 (#nav ul li a) 将需要白色背景和顶部、左侧和右侧的黑色边框。

下拉菜单需要一个白色背景和一个黑色边框。

诀窍是使用`z-index`将选项卡放在下拉列表上方，并使选项卡在悬停时略高。选项卡的底部应延伸到选项卡行底部的下方，以覆盖下拉列表顶部边框的一部分。那有意义吗？

如果您在编写 CSS 方面需要帮助，我建议您在问题中添加代码。

希望这可以帮助！

# llvm - 为怀旧童年游戏构建合成 CPU 的 LLVM 错误

> ID：11349197
> 
> 赞同：0
> 
> 时间：2012-07-05T17:09:53.803
> 
> 标签：llvm, clang

我一直在尝试编译[syn64k --for](https://github.com/ctm/syn68k/)在[Executor](https://github.com/ctm/executor/)中使用，以运行[System's Twilight](http://www.eblong.com/zarf/twilight.html)（我小时候玩的游戏）。我在我的 macbook pro（带有最新 Xcode 和命令行工具的 Lion 10.7.4）上执行此操作。我映射`CC`到`gcc -m32`解决我遇到的几个问题，但我得到了以下信息：

```
Making all in native/i386
make[2]: Nothing to be done for `all'.
outgoing=;\
    gcc -m32 -maccumulate-outgoing-args -c -x c /dev/null 2> /dev/null && outgoing=-maccumulate-outgoing-args; \
    gcc -m32 -S -O2 -fomit-frame-pointer  -Wall -static -fno-defer-pop -Wno-unused\ -I./include -I./../include -I. -I../include $outgoing syn68k.c -o ./syn68k.s
syn68k.c: In function ‘s68k_handle_opcode_0x07A3’:
syn68k.c:52968: internal compiler error: in EmitLV_DECL, at llvm-convert.cpp:7475
Please submit a full bug report,
with preprocessed source if appropriate.
See <URL:http://developer.apple.com/bugreporter> for instructions.
make[2]: *** [syn68k.o] Error 1
make[1]: *** [all-recursive] Error 1
make: *** [all-recursive] Error 1 
```

我去了 URL，它看起来不像是一个真正发布关于 LLVM 的错误报告的地方。我的文件'syn68k.c'在预处理器完成后大约有50k行，所以我真的不认为我可以制作一个可重现的测试用例来显示错误。

原来这个[问题](https://github.com/ctm/syn68k/issues/1)已经在 github 项目上（这是唯一列出的问题，哈哈）。MaddTheSane 说发生这种情况是因为 clang 不支持全局寄存器变量（正如我[在此处](http://clang.llvm.org/docs/UsersManual.html#c_unimpl_gcc)验证的那样）。

我对你输入后编译的工作原理只有基本的了解`make`，所以有没有办法可以跳过 clang 或类似的东西？你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:08:53.580

不幸的是，你需要使用 gcc，而不是 llvm-gcc 来编译这个程序。llvm-gcc 的 LLVM 后端不支持全局寄存器变量。切换到 clang 也无济于事，因为同样的原因，它也会阻塞全局寄存器变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:24:10.600

如果不需要使用 llvm 的目的，您绝对可以跳过构建 clang。

llvm 使用 cmake 进行配置和生成 makefile。您可以修改 .cmake 文件以创建禁用您不想创建的任何模块的配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:52:53.247

[http://developer.apple.com/bugreporter](http://developer.apple.com/bugreporter)绝对是报告针对 Apple 分发的任何编译器的错误的正确位置，即使它可能看起来不像。也就是说，除了clang之外，没有必要针对任何东西提交错误报告。（顺便说一句，测试用例的大小并不重要。）

如果您对 C 语言的了解不足以破解源代码，那么从 macports 或类似的工具中获取更新版本的 gcc 可能值得一试。

# php - 如何将php数组传递给本地powershell脚本

> ID：11349199
> 
> 赞同：1
> 
> 时间：2012-07-05T17:10:06.690
> 
> 标签：php, wordpress, powershell, download

我正在编写一个自动设置 Wordpress 的 powershell 脚本。这个脚本将被多人在创建他们的网站时使用，并且我喜欢添加一些额外的功能。

我想让我的同行访问一个 php 页面，这将允许他们为他们的页面挑选主题和插件，然后将他们的选择（我假设它最简单通过数组）传递给我的 powershell 脚本。powershell 脚本必须处理此问题的原因是，在他们选择文件后，powershell 脚本可以连接到内部服务器并处理其余部分。

我想我的问题分为两部分；首先是上述甚至可能吗？如果是这样，这似乎是处理这个问题的合乎逻辑的方式吗？

其次是如何实际实现这一目标？下面是我处理下载页面的 php/html 代码，希望能够将数组传递给我的脚本。（下面的代码从“临时”站点下载用于测试目的，并不真正符合我的要求）

```
<?php

$val=$_POST['theme']; 
if($val == 'aa') {
header('Content-disposition: attachment; filename=all-in-one-slideshow.zip');
header('Content-type: application/zip');
$url  = 'http://mypage.com/wordpressFiles/all-in-one-slideshow.zip';
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_FILE, $path);
$data = curl_exec($ch);
curl_close($ch);
fclose($fp);
} else if($val == 'bb') {
} else {
}
?>

<form action="download.php" method="post">
<select name="theme" id="theme" class="select-list">
<option value="\">Choose A Theme</option>                                       
<option value="aa">All-In-One-Slideshow</br>
<option value="bb">BB</br>
</select>   
<input type="submit" value="Download" />
</form> 
```

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:24:11.740

如果直接从 Web 服务器执行 PowerShell 脚本，则可以通过系统调用 ( `exec()`, `passthrough()`, `shell_exe()`) 将参数传递给`powershell.exe`. 您只需要确保参数的传递顺序与 PowerShell 执行它们的顺序相同。

如果参数列表或数据太长，您可以创建一个临时文件。最好的方法是进行基于分隔符的设置（如`CSV`）：使用 PHP 从数组创建一个文本文件，将其（现在`string`）保存到文件中，然后在 PowerShell 中，将文件分块围绕相同的分隔符。您也可以使用`serialize()`，但我不确定`unserialize()`PowerShell 中是否有此功能。

当然，使用上述方法，PowerShell 只需要一个参数，即存储数组的临时文件的路径。

此外，您应该查看以下问题，因为它讨论了[如何将命令行参数传递给 PowerShell ps1 文件](https://stackoverflow.com/q/1293907/1428773)。

# javascript - oncomplete 方法并不总是在动作之后执行，JSF

> ID：11349200
> 
> 赞同：1
> 
> 时间：2012-07-05T17:10:12.313
> 
> 标签：javascript, jsf, richfaces

我有下一个场景（简化）：

我在我的 docsMB 托管 bean 中的函数：

```
public void saveAdvance() {
    // by default, finalized is false
    finalized = getFinalizedByBySlowFunction();
} 
```

我的 xhtml 中的一个按钮：

```
<a4j:commandButton value="SAVE"
action="#{docsMB.saveAdvance}"                              
oncomplete="verifyDocs();"/> 
```

而我的 verifyDocs 函数在同一个 xhtml 中：

```
<script type="text/javascript">
var verifyDocs = function(){
    //alert(1);
    if( #{docsMB.finalized == true} ){
        #{rich:component('mpConfirmar')}.show();
    }
}
</script> 
```

这让我有问题。如果我执行我的应用程序，“finalized”总是错误的，但我意识到如果我取消注释 verifyDocs 函数中的警报，它会起作用。我认为警报为 saveAdvance 提供了“必要的”时间来完成自身。

我可以做些什么来确保 oncomplete 方法在操作完成后执行？

还是我在其他地方做错了？

非常感谢

[编辑]

如果我刷新整个页面，我会得到正确的“最终”值......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:04:28.377

问题是当我定义 javascript 函数时，它变得像静态的，这意味着，它只执行一次，并且 finalized 变量在页面加载时获取定义的值。因此，当我单击按钮时，它会检索预定义的值，此时没有值。但是如果我刷新页面，变量会在刷新时获取值。

所以为了解决这个问题，我只是将我的 javascript 代码直接放在 oncomplete 方法中，最后 WORKS :D

也许更好的解决方案可能是找到一种方法来在每次单击按钮时刷新 javascript 代码，因为如果我将 javascript 代码放在 oncomplete 方法中，它看起来很脏，因为一行中有很多字符。

# html - 如何扩展 div 以填充中间列任意大小的宽度？

> ID：11349203
> 
> 赞同：0
> 
> 时间：2012-07-05T17:10:25.593
> 
> 标签：html, css, position

**[演示 jsFiddle](http://jsfiddle.net/centerwow/qXKZh/29/show/)** 我有 div 颜色 azure 我想填充中间列的宽度区域，不知道大小将是多少。有没有 css3/css no jQuery 的解决方案？

我需要这样的图片： ![在此处输入图像描述](../Images/a022e7f07fd3eec84982fe2064e8d713.png)

ststus 电流是这样的：

很多谢谢。

![在此处输入图像描述](../Images/91bde934e20e69a8e3bc9229e912a478.png) [演示 jsFiddle](http://jsfiddle.net/centerwow/qXKZh/23/show/)

代码html：

```
<div id="frame">
  <div id="inside_window">
    <div id="Yellow"></div>
    <div id="Green"></div>
        <div id="Blue"></div>
    <div id="Red"></div>
    <div id="ver"></div>
    <div id="hor"></div>
    <div id="ver2"></div>
  </div>
 </div> 
```

​ 代码css：

```
 html, body{
  height:100%;
   background-color: azure;
            } 
    #frame
{
position: relative;
background-color: black;
height: 100%;
width: 100%;
margin: auto;
padding:0;
border: 1px solid black;
}

#Yellow
{
position: absolute;
height: 100%;
width: 150px;
-webkit-border-radius: 0px;    
margin: 0 ;

    background-color: Yellow;
    z-index:10;
    display:table;

left:0px;
top:0; 
}

#Green
{
position: absolute;
height: 100%;
width: 150px;
-webkit-border-radius: 0px;    
margin: 0 ;

    background-color: green;
    z-index:10;

right:0px;
top:0; 
}

#Blue
{
position: relative;
height:100%;
min-width:65.8%;
-webkit-border-radius: 0px;    
margin: 0 auto;

    background-color: #62A9FF;
    z-index:10;
    display:table;
    font-size:220%;

left:0px;
top:0px; 
}

#Red
{
position: absolute;
height: 150px;
width: 100%;
-webkit-border-radius: 0px;    
margin: 0 ;

    background-color: red;
    z-index:10;
    border: 1px solid black;

left:0px;
bottom:0px; 
}

#inside_window
{

width:100%;
height:100%;
margin:0 auto;    
position: relative;
border: 1px solid black;

background-color: brown;
-webkit-transform: rotate(0deg); 
-webkit-transform-origin:50% 50%; 
}
#ver
{
position: absolute;
    height: 100%;
    width: 5px;
    margin: 0;
    background-color: white;
    left:150px;
    top:0px;   
    z-index:1;
}
#hor
{
position: absolute;
    height: 5px;
    width: 100%;
    margin: 0;
    background-color: white;
    left:0px;
    bottom:150px;
        z-index:20;
}
#ver2
{
position: absolute;
    height: 100%;
    width: 5px;
    margin: 0;
    background-color: white;
    right:150px;
    top:0px;   
    z-index:1;
}
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:26:58.960

尝试从您的蓝色代码中删除以下 CSS：

> ```
> position: relative;
> display:table; 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:27:23.450

有很多方法可以实现这样的布局。假设您可以更改内容的顺序，您可以随时尝试[“圣杯”布局方法](http://www.alistapart.com/articles/holygrail/)。

# android - Android SimpleCursorAdapter getView如何把以前的值放回去

> ID：11349204
> 
> 赞同：0
> 
> 时间：2012-07-05T17:10:26.783
> 
> 标签：android, listactivity, simplecursoradapter

我有一个简单`ListActivity`的使用`SimpleCursorAdapter`. 我允许用户使用`EditText`. 我执行简单验证以确保输入的数字小于 100。如果用户输入的值验证失败，我想将旧值放回原处。

我尝试了几种不同的方法。我目前的方法是从数据库中重新查询它，但这不起作用。我总是得到与 中最后一个条目相关联的值`ListActivity`，而不管实际更改了哪一个。我注意到了`LogCat`这一点，`onTextChanged`并且`afterTextChanged`为每一行触发了多次，`ListActivity`而不仅仅是改变的那一行。

这是代码：

```
public class MySimpleCursorAdapter extends SimpleCursorAdapter {

    Context lcontext;
    boolean changed;
    String lastval;

    private PortfolioData pfdata;

    public MySimpleCursorAdapter(Context context, int layout, Cursor c,
        String[] from, int[] to) {
        super(context, layout, c, from, to);

        lcontext = context;
    }

    @Override
    public View getView(final int pos, View v, ViewGroup parent) {

        v = super.getView(pos, v, parent);
        final EditText et = (EditText) v.findViewById(R.id.classpercentage);

        final TextView tv = (TextView) v.findViewById(R.id._id);
        et.addTextChangedListener(new TextWatcher() {
            public void afterTextChanged(Editable s) {
                Log.d("TEST", "In afterTextChanged s=" + s.toString() + " "
                    + tv.getText() + " POS = " + Integer.toString(pos));

                lastval = tv.getText().toString();

                if (changed == true) {
                    String enteredValue = s.toString();
                    if (checkNullValues(enteredValue)) {
                        if (Float.parseFloat(enteredValue.trim()) > 100.0f) {

                            AlertDialog.Builder builder = new AlertDialog.Builder(
                                lcontext);

                            builder.setMessage("Percentage Value should be Less than 100");

                            builder.setPositiveButton("Ok",
                                new DialogInterface.OnClickListener() {
                                    public void onClick(
                                        DialogInterface arg0, int arg1) {

                                        String sql = "select c.percentage as PERCENTAGE " + 
                                        "from asset_classes c WHERE c._id = " + lastval + ";";

                                        pfdata = new PortfolioData(lcontext);
                                        SQLiteDatabase db = pfdata.getReadableDatabase();

                                        Cursor cursor = db.rawQuery(sql, null);

                                        if (cursor != null)
                                        {
                                            cursor.moveToFirst();

                                            et.setText(cursor.getString(0));
                                        }

                                        cursor.close();
                                        pfdata.close();
                                    }
                                });
                            // End of the Alert

                            if (changed == true)
                            {
                                builder.show();
                            }
                        }
                    }
                    changed = false;
                }

            }

            public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
                // Log.d("TEST", "In beforeTextChanged start=" +
                // Integer.toString(start) +" count="+ Integer.toString(count) +
                // " after=" + Integer.toString(after) + " s=" + s + " " + tv);
            }

            public void onTextChanged(CharSequence s, int start, int before,
                int count) {
                Log.d("TEST", "In onTextChanged start=" +
                    Integer.toString(start) + " count=" + Integer.toString(count)
                    + " before=" + Integer.toString(before) + " s=" + s + " " +
                    tv);
                changed = true;

            }
        });

        return v;
    }
} 
```

我真的很感激对此有新的看法。与往常一样，提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:25:30.460

尝试使用 onFocusChangeListener。当它获得焦点时，将当前文本保存到类的字段中。

就像是：

```
String oldText - 将是您的旧文本字段。
```

然后你做：

```
et.setOnFocusChangeListener(新 OnFocusChangeListener()) {
             @覆盖
             public void onFocusChange（查看任何内容，布尔值 h​​asFocus）{
                      如果（有焦点）{
                         //代码
                      } 别的 {
                         //代码或可能为空
                      }
             }
}
```

然后，如果数字 > 100，您只需获取 oldText 值并放入 EditText。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:34:40.467

我认为您不知道 ListView 中的回收。在 Cursor 中有 1000 行，只创建了 10-20（取决于屏幕大小）行视图。
**不要在视图中存储数据！**

一开始我建议您阅读[http://commonsware.com/Android/excerpt.pdf](http://commonsware.com/Android/excerpt.pdf)

# javascript - jqueryUi 自动完成 - 自定义数据和显示

> ID：11349205
> 
> 赞同：9
> 
> 时间：2012-07-05T17:10:29.297
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

我的完整代码在这里：http: [//jsfiddle.net/HfNk9/13/](http://jsfiddle.net/HfNk9/13/)

我正在查看这个示例[jqueryUi 自动完成 - 自定义数据和显示](http://jqueryui.com/demos/autocomplete/custom-data.html)。

让我们假设对象项目不同，它看起来像这样：

```
project = [
    {
        name: 'bar',
        value: 'foo',
        imgage: 'img.png'
    }
] 
```

如果我设置`source = project`自动完成是指`project.value`而不是`project.name`.
我应该如何改变这种行为？

* * *

```
var autocomplete = function(element, data) {
    var fixtures = [
        {
        avatar: "http://www.placekitten.com/20/20",
        name: 'aaaaaaaaa',
        value: 'bbbbbbbbb'}
    ];

    element.autocomplete({
        minLength: 3,
        source: function(request, response) {
            var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
            response($.grep(fixtures, function(value) {
                return matcher.test(value.name);
            }));
        },
        create: function() {
            console.log(fixtures)
            element.val(fixtures.name);
        },
        focus: function(event, ui) {
            element.val(ui.item.name);
            return false;
        },
        select: function(event, ui) {
            element.val(ui.item.name);
            return false;
        }
    }).data('autocomplete')._renderItem = function(ul, item) {
        return $('<li></li>')
            .data('item.autocomplete', item)
            .append('<a><img src="' + item.avatar + '" />' + item.name + '<br></a>')
            .appendTo(ul);
    };
};

autocomplete($('#auto')); 
```

我的完整代码：http: [//jsfiddle.net/HfNk9/13/](http://jsfiddle.net/HfNk9/13/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-06T02:21:22.590

您需要过滤与默认情况下自动完成小部件搜索不同的属性（正如您已经注意到的那样，`name`或者`value`在使用带有对象的源数组时）。

您可以使用函数而不是数组作为源并以这种方式执行您自己的过滤：

```
element.autocomplete({
    minLength: 3,
    source: function(request, response) {
        var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
        response($.grep(fixtures, function(value) {
            return matcher.test(value.name);
        }));
    },
    create: function() {
        console.log(fixtures)
        element.val(fixtures.name);
    },
    focus: function(event, ui) {
        element.val(ui.item.name);
        return false;
    },
    select: function(event, ui) {
        element.val(ui.item.name);
        return false;
    }
}).data('autocomplete')._renderItem = function(ul, item) {
    return $('<li></li>')
        .data('item.autocomplete', item)
        .append('<a><img src="' + item.avatar + '" />' + item.name + '<br></a>')
        .appendTo(ul);
}; 
```

**示例：http:** [//jsfiddle.net/QzJzW/](http://jsfiddle.net/QzJzW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:22:09.273

您应该使用以下`select`属性：

```
$("...").autocomplete({
    source: ...,
    select: function( event, ui ) { //when an item is selected
        //use the ui.item object
        alert(ui.item.name)
        return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T17:23:56.763

答案在您链接到的页面的源代码中。如果你想使用的值`name`代替`value`then 你会做这样的事情：

```
$( "#input" ).autocomplete({
    minLength: 0,
    source: projects,
    focus: function( event, ui ) {
        $( "#input" ).val( ui.item.value );
        return false;
    },
    select: function( event, ui ) {
        $( "#input" ).val( ui.item.value );
        return false;
    }
})
.data( "autocomplete" )._renderItem = function( ul, item ) {
    return $( "<li></li>" )
        .data( "item.autocomplete", item )
        .append( "<a>" + item.name + "</a>" )
        .appendTo( ul );
}; 
```

# python - 仅针对 Python3 修改 Python 路径

> ID：11349211
> 
> 赞同：6
> 
> 时间：2012-07-05T17:10:52.947
> 
> 标签：python, linux, centos5, python-3.2

我正在使用 Python 3 和 Python 2.6 进行开发，并安装了这两个版本。然而，对于 Python 3，通往许多优秀模块（时间、数学……）的路径并不是我的 Python 路径的一部分。我可以将目录添加到路径中，但这很乏味。

有没有办法在不影响 Python 2 的情况下永久修改我的 Python 3 安装路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:17:44.033

创建虚拟环境： http: [//pypi.python.org/pypi/virtualenv/](http://pypi.python.org/pypi/virtualenv/)

在虚拟环境中安装所需的软件包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:01:20.897

如果您无法导入时间，stdlib 中的数学模块，那么您的 Python 3 安装将被破坏。

当您运行时`python setup.py install`，文件将安装在当前 python 可执行文件的正确位置，无论是系统 python 还是来自 virtualenv 环境的 python。也是如此`pip`。

您无需修改​​任何路径，只需使用适当的可执行文件即可。

# facebook - facebook 连接和断开连接

> ID：11349217
> 
> 赞同：0
> 
> 时间：2012-07-05T17:11:15.370
> 
> 标签：facebook

我使用此代码在我的网站上创建一个 facebook 连接按钮：

```
 <div id="fb-root"></div>
          <script>
            window.fbAsyncInit = function() {
              FB.init({
                apiKey: 'xxxxxxxxxxxxxxxxxxxMQTQ2DshKBkNG4aAZDZD',
                appId      : 'xxxxxxxxxxxxxxxx', // App ID
                channelUrl : '//www.xxx.net/channel.html', // Channel File
                status     : true, // check login status
                cookie     : true, // enable cookies to allow the server to access the session
                xfbml      : true  // parse XFBML
              });
              // Additional initialization code here
            };

            // Load the SDK Asynchronously
            (function(d){
               var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
               if (d.getElementById(id)) {return;}
               js = d.createElement('script'); js.id = id; js.async = true;
               js.src = "//connect.facebook.net/en_US/all.js";
               ref.parentNode.insertBefore(js, ref);
             }(document));
             function logOut(){
                FB.logout();
             }
          </script>
          <div class="fb-login-button" data-show-faces="false" data-width="200" data-max-rows="1"></div>
          <a href="#" onclick="logOut();" >Logout</a> 
```

当我点击登录按钮时，我正在登录，但是当我点击注销链接时，我与 Facebook 断开连接（而不是与应用程序本身断开连接）

然后当我执行以下操作时： 1\. 再次登录（直接在 facebook.com 上） 2\. 转到我的网站 3\. 点击登录，它说我已经连接到应用程序

我在这里拧干什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:15:43.270

如果我理解正确，您是否也希望与应用程序断开连接？这不是它的工作方式。当您授权应用程序时，除非您将其从 FB 的授权列表中删除，否则它将保持授权状态。登出只会让你登出FB。

当您登录到 FB 时，由于您的应用程序已经获得授权，因此点击登录按钮会转到 FB 看到它已经授权，并告诉您。

# algorithm - 关于减少分支未命中预测

> ID：11349221
> 
> 赞同：6
> 
> 时间：2012-07-05T17:11:40.887
> 
> 标签：algorithm, optimization

看到一篇论文《将分支转化为数据依赖，避免误判分支》中的一句话。（第 6 页）

我想知道如何将代码从分支更改为数据依赖项。

这是论文： http: [//www.adms-conf.org/p1-SCHLEGEL.pdf](http://www.adms-conf.org/p1-SCHLEGEL.pdf)

更新：**如何在二分搜索中转换分支？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-05T17:19:26.793

基本想法（我想）是改变如下：

```
if (a>b)
    return "A is greater than B";
else
    return "A is less than or equal to B"; 
```

进入：

```
static char const *strings[] = {
    "A is less than or equal to B", 
    "A is greater than B"
};

return strings[a>b]; 
```

对于二分搜索中的分支，让我们考虑一下“正常”二分搜索的基本思想，它通常看起来（至少模糊地）如下所示：

```
while (left < right) {
    middle = (left + right)/2;
    if (search_for < array[middle])
        right = middle;
    else
        left = middle;
} 
```

我们可以用几乎相同的方式摆脱这里的大部分分支：

```
size_t positions[] = {left, right};

while (left < right) {
    size_t middle = (left + right)/2;

    positions[search_for >= array[middle]] = middle;
} 
```

[用于通用代码`left + (right-left)/2`，而不是`(left+right)/2`.]

当然，我们仍然有循环本身的分支，但我们通常不太关心这一点——那个分支非常适合预测，所以即使我们确实消除了它，这样做也不会带来什么好处规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-03T17:58:29.880

删除分支并不总是最佳的，即使（尤其是）像这样的简单二进制条件也是如此。我之前曾研究过在各种情况下以类似的方式移除分支。在遇到循环中带有条件分支的代码比同等的无分支代码运行得更快的实例后，我对处理器执行策略进行了一些研究。

我知道 ARM 指令集有条件指令，它可以使条件分支比论文中的那种无分支代码更快，但我正在研究一个 intel（并且分支不是 cmove 可以处理的分支）。事实证明，包括 intel 在内的现代 CPU 有时会将普通指令转换为条件指令：如果分支的两个端点足够短，它们会使用急切执行。也就是说，CPU 会将两条可能的路径都放入管道中并同时执行它们，并且只有在知道条件后才保持正确的结果。这避免了错误预测的可能性，而无需索引数组。有关更多信息，请参阅[https://en.wikipedia.org/wiki/Speculative_execution#Variants](https://en.wikipedia.org/wiki/Speculative_execution#Variants)。

即使在汇编中，也需要大量关于处理器的详细知识才能为其编写最佳代码。这使得“天真的”实现有时比忽略某些 CPU 特性的手动优化实现更快。优化编译器也会发生同样的事情：有时编写更复杂的“优化”代码会破坏编译器的一些优化，并导致比编译器可以完全优化的简单实现更慢的可执行文件。

当有疑问并且性能至关重要并且有时间时，通常最好尝试两种方式，看看哪个更快！

# snapshot - 从同一 EBS 卷的几个快照的最后一个 EBS 快照创建 EBS 卷

> ID：11349222
> 
> 赞同：2
> 
> 时间：2012-07-05T17:11:44.693
> 
> 标签：snapshot, amazon-ebs

我有一个 EBS 支持的 EC2 实例。我为 EBS 卷拍摄了几次快照，例如 s1、s2、s3，其中 s3 是最后一个拍摄的。现在我需要启动另一个 EBS 支持的 EC2 实例，并且还想将之前拍摄的快照应用到新实例的 EBS 卷上。我知道 EBS 快照是增量拍摄的，这意味着只会捕获自上次快照以来更改的块。我想知道我是否只将最后一个快照 (s3) 应用到新的 EBS 卷上，这是否意味着在 s1 和 s2 中捕获的数据不会进入新卷？或者换句话说，我是否需要按顺序手动将 s1、s2、s3 应用到新卷上才能获得完整的数据集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:14:24.730

当您从 s3 的 EBS 快照启动新映像时，您将获得创建 s3 时 EBS 实例所处的完整状态。

快照是使用增量方法创建的以提高性能，但您将从给定快照中获取与整个系统一致的状态。

> 即使快照是以增量方式保存的，当您删除快照时，只会删除任何其他快照不需要的数据。因此，无论之前删除了哪些快照，所有活动快照都将包含恢复卷所需的所有信息。

[http://aws.amazon.com/ebs/](http://aws.amazon.com/ebs/)

# php - 无法从命令行使用 Mail.php

> ID：11349223
> 
> 赞同：0
> 
> 时间：2012-07-05T17:11:47.527
> 
> 标签：php, email, ubuntu, cron, smtp

我有一个 php 脚本，它将成为一项 cron 作业，并且在我添加我一直在使用的电子邮件脚本之前它工作正常。

我以前在整个站点上都使用过电子邮件脚本，但是当我尝试从命令行使用它运行 cron 作业时，它失败了。

邮件脚本如下所示

```
 <?php

require_once "Mail.php";

function sendMail($to, $from, $subject, $message) {

        $no_errors = true;

        $host = "ssl://smtp.server.com";
        $port = "465";
        $username1 = "username";
        $password = "password";

        $headers = array ('From' => 'myfromemail@myemail.com',
          'To' => $to,
          'Subject' => $subject);
        $smtp = Mail::factory('smtp',
          array ('host' => $host,
            'port' => $port,
            'auth' => true,
            'username' => $username1,
            'password' => $password));

        $mail = $smtp->send($to, $headers, $message);

        if (PEAR::isError($mail)) {

            $no_errors = false;

            echo $mail->getMessage();

        } else {

            $no_errors = true;

         }

        return $no_errors;

        }

?> 
```

如果我注释掉包含 send_mail.php 它工作正常但不发送电子邮件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:15:58.343

您需要确保从 运行脚本时`cron`，它具有正确的工作文件夹集，因此它可以加载`mail.php`. 使用[`getcwd()`](http://hu.php.net/manual/en/function.getcwd.php)和[`chdir()`](http://hu.php.net/manual/en/function.chdir.php)功能是您需要使用的两个。

通常，当从 Web 浏览器（在 Apache 服务器上）运行时，工作目录是`/var/www`，但从 开始`cron`，它通常是文件系统的根目录，`/`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:16:45.363

包含外部文件时，您需要注意文件在哪里，然后 PHP 会在哪里寻找它。[您可以使用get_include_path()](http://us2.php.net/get_include_path)[检查](http://us2.php.net/manual/en/function.set-include-path.php)它的外观并使用set_include_path()进行设置。当你设置一个新的时，你想添加（而不是替换）Mail.php 的安装目录。用作`get_include_path() . PATH_SEPARATOR . $yourPath`新值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T17:17:27.573

运行 cron 时的标准文件夹可能与包含此包含的文件夹不同。尝试这个：

```
require_once realpath( dirname( __FILE__ ) . '/Mail.php' ); 
```

在一般情况下，您可以`..`根据需要添加或添加文件夹结构 - 它仍然可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T17:14:09.587

尝试从命令行“定位 Mail.php”，然后在您的 require_once 中尝试此脚本的完整路径

当它通过 cron 运行时，还尝试将响应转储到日志文件中：

[Cron 作业日志 - 如何记录？](https://stackoverflow.com/questions/4811738/cron-job-log-how-to-log)

# sql - MS 在 vba 中访问 SELECT INTO

> ID：11349224
> 
> 赞同：3
> 
> 时间：2012-07-05T17:11:50.013
> 
> 标签：sql, ms-access, vba

我的应用程序的某些功能存在一些问题。有一个特定的实例，我在表单上有一个“待定类”的实例供管理员查看。表单中填充了与此待定课程相关联的学生。在他们的成绩完成后，我在页脚有一个按钮，可以从我的“待定”表中删除该课程并将成绩添加到所有学生。这行得通。但是，我想在从待处理中删除之前将这个待处理的课程（它只有课程名称、日期和教师）复制到已完成的课程表中。由于除了主键（类号）之外没有关于这个类的数据在整个表单中持续存在，我无法将该行的其他字段（类名、日期）填充到我完成的类表中。

我正在尝试在 VBA 中执行“SELECT INTO”操作来获取这些值。它是这样的：

```
 dim cname as String
   dim classdate as Date
   dim pid as integer
   dim teacher as String
   dim qry as String

    pid = [Forms]![frmClasses]![txtID]

   qry = "Select className INTO cname FROM tblPending WHERE tblPending.id = " & " ' " & pid & " ' " & ";"

   db.execute qry
   debug.print qry
   debug.print cname 
```

从这里开始，我对其他变量执行相同的操作，构建我的 INSERT 查询并执行它。问题是——我的选择不起作用。Debug.print 显示局部变量从未从 SELECT INTO 语句初始化。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:12:21.997

首先，将所有类放在一个表中并仅设置“NotPending”或“Completed”列会更好。
拥有两个相同的类表并将值从一个表移动到另一个表以指示状态更改是糟糕的数据库设计。

* * *

如果您*确实*需要通过使用两个表并复制行来执行此操作，那么您需要[一个`INSERT INTO`查询](http://msdn.microsoft.com/en-us/library/bb208861%28v=office.12%29.aspx)（而[不是`SELECT INTO`](http://msdn.microsoft.com/en-us/library/bb208934%28v=office.12%29)），正如 Remou 在评论中已经提到的那样，因为`SELECT INTO`创建一个新表（或覆盖具有相同名称的现有表，如果已经在那里）。

的语法`INSERT INTO`如下所示：

```
INSERT INTO CompletedClassTable (ClassName, Teacher)
SELECT ClassName, Teacher FROM tblPending WHERE id = 123 
```

* * *

最后，您在评论中问了这个问题：

> 那么 SELECT INTO 在 Access 中与 Oracle 完全不同？在 Oracle 和 PL/SQL 中，您可以在变量或表中选择一行。在 Access 中，您不能选择变量吗？

要将行加载到变量中，您需要使用[Recordset](http://msdn.microsoft.com/en-us/library/bb177501%28v=office.12%29.aspx)。

将查询加载到 Recordset 并输出`ClassName`字段的示例代码：

```
Dim RS As DAO.Recordset

Set RS = CurrentDb.OpenRecordset("SELECT * FROM tblPending WHERE id = 123")
If Not RS.EOF Then
    Debug.Print RS("classname")
End If
RS.Close
Set RS = Nothing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:51:33.137

似乎您想检索一个文本值 ,`className`从中`tblPending`找到`tblPending.id`与您的文本框中找到的值匹配的值`txtID`, 并将该文本值存储在一个名为 的字符串变量中`cname`。

如果该解释是正确的，您就不必为查询和记录集而烦恼。只需使用[DLookup 函数](http://office.microsoft.com/en-us/access-help/dlookup-function-HA001228825.aspx)来检索值，类似于此未经测试的代码示例。

```
Dim cname As String
Dim pid As Integer
Dim strCriteria As String
pid = [Forms]![frmClasses]![txtID]
strCriteria = "id = " & pid
cname = Nz(DLookup("className", "tblPending", strCriteria), vbNullString)
Debug.Print "cname: '" & cname & "'" 
```

笔记：

1.  我假设`id`字段的数据类型`tblPending`是数字。如果它实际上是文本数据类型，则更改`strCriteria`如下：

    strCriteria = "id = '" & pid & "'"

2.  `DLookup()`如果未找到匹配项，则返回 Null。由于我们将函数的返回值分配给字符串变量，因此我曾经`Nz()`将 Null 转换为空字符串。或者，您可以将 cname 声明为 Variant（以便它可以接受 Null 值）并摆脱`Nz()`.

# javascript - JS - 读取提交表单的值

> ID：11349237
> 
> 赞同：0
> 
> 时间：2012-07-05T17:12:42.787
> 
> 标签：javascript, html, forms, get

> **可能重复：**
> [在 JavaScript 中获取查询字符串值](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

如果提交 GET 表单，生成的地址将如下所示`www.example.com/stuff?param1=stuff&param2=morestuff`。我知道如何在页面上读取/设置表单字段的值，但是如何使用 JavaScript 从上一页（在 URL 中）读取提交内容？我想我可以使用 url 和`split()`它来获取参数，但是有没有更快/更简单的方法来读取 param1（只是一个例子）？

注意：这**不是**[this](https://stackoverflow.com/questions/9607851/how-to-get-the-currently-submitted-value-in-a-get-form)的副本，因为这个问题是关于如何在 PHP 中完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:18:39.507

不，没有简单的方法可以做到这一点。

使用这样的东西：

```
var qstring = {}, src = location.search.substring(1).split("&");
for (var i = 0; i < src.length; i++) {
    var parts = src[i].split("=");
    qstring[unescape(parts[0])] = unescape(parts.slice(1).join("="));
} 
```

现在对象`qstring`是查询字符串的键/值映射。请记住，具有相同键的值会被覆盖，因此您可能希望将它们存储在索引数组而不是关联数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:18:52.003

```
function getQuerystring(key)

{
  key = key.replace(/[\[]/,"\\\[").replace(/[\]]/,\\\]);

 var regex = new RegExp("[\\?&]"+key+"=([^&#]*)");

 var qs = regex.exec(window.location.href);

 if(qs != null)
     return(qs[1]);
 else
     return("");

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T17:20:07.170

我认为[这个](https://stackoverflow.com/questions/5448545/how-to-retrieve-get-parameters-from-javascript)主题是对你问题的回答。

```
function gup( name )
{
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null )
    return "";
  else
    return results[1];
} 
```

你也可以试试[这个](http://www.onlineaspect.com/2009/06/10/reading-get-variables-with-javascript/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T17:21:35.703

*   **[jQuery URL 解析器插件](https://github.com/allmarkedup/jQuery-URL-Parser)**。如果你想使用 jQuery。
*   **[jsUri](http://code.google.com/p/jsuri/)**。如果 jQuery 对你来说太重了。

# eclipse - 将方法声明从一个 CompilationUnit AST 复制到 Eclipse JDT 中另一个编译单元的 AST

> ID：11349238
> 
> 赞同：1
> 
> 时间：2012-07-05T17:12:46.663
> 
> 标签：eclipse, eclipse-jdt

我正在尝试将方法声明从第一个 AST（方法声明最初所在的位置）复制到另一个 AST。我试图做的是使用原始编译单元的 ASTRewrite 复制方法声明，然后在下面的代码中将其添加到第二个编译单元的 ListRewrite 中。

```
MethodDeclaration newMethodDeclaration = (MethodDeclaration) oldCURewrite.createCopyTarget(oldMethodDeclaration);

astRewrite.getListRewrite(typeDeclaration, TypeDeclaration.BODY_DECLARATIONS_PROPERTY).insertAfter(newMethodDeclaration, constructor, null); 
```

但是，这给了我一个 MISSING 方法声明，而不是正确的方法声明。在此过程中不会引发任何异常。是否有任何标准方法来进行复制，或者我必须从一开始就创建方法声明的所有子节点？（如果可能的话，这太难了）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-06T08:28:52.973

我设法使用 ASTNode 类的 copySubtree(AST target, ASTNode node) 静态方法复制了该方法。第一个参数用于目标 ast。

# c# - MemoryMappedFile 的并发视图抛出 UnauthorizedAccessException

> ID：11349242
> 
> 赞同：2
> 
> 时间：2012-07-05T17:13:13.133
> 
> 标签：c#, .net, c#-4.0

我有一个大文本文件（0.5 gig），我需要在不同的情况下一遍又一遍地解析它，在一个方法中多达 40 次。当然，这将需要很长时间，我试图通过同时执行来更快地处理文件。我知道 a`MemoryMappedFile`非常适合处理大文件和并发，所以我选择使用它。

现在，我同时创建了文件的两个视图（这些视图属于两个不同的部分），但是一个视图效果很好，另一个则抛出了`UnauthorizedAccessException`. 这是有罪的代码：

```
private void PartitionAndAnalyzeTextBlock(int start, int length)
{
    Console.WriteLine("Starting analysis");

    //Exception thrown here 
    using (var accessor = file.CreateViewAccessor(start, length, MemoryMappedFileAccess.Read)) 
    {
        char[] buffer = new char[BufferSize];

        for (long i = 0; i < length; i += 5)
        {
            accessor.ReadArray(i, buffer, 0, 5);

            string retString = new string(buffer);
            frequencyCounter.AddOrUpdate(retString, 1, (s, j) => j++);
        }
    }

    Console.WriteLine("Finished analysis");
} 
```

`file`在这一行中实例化：

```
private MemoryMappedFile file = MemoryMappedFile.CreateFromFile(path, FileMode.Open, "MemoryMappedPi"); 
```

你知道什么会导致这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:55:23.657

这可能与您如何创建内存映射文件有关。检查 John Skeet 在这篇[文章](https://stackoverflow.com/questions/1570624/memorymappedfile-createfromfile-always-throws-unauthorizedaccessexception)中的回答。MemoryMappedFileAccess.Read 访问权限被传递给 CreateFromFile 方法。

编辑：如注释所示， CreateViewAccessor 方法将偏移量和大小作为参数来确定视图将访问文件的哪个部分。如果这些值超出文件的实际大小，则会引发 UnauthorizedAccessException。

# ios - 表格单元格的模态视图控制器的 iPad 动画

> ID：11349244
> 
> 赞同：0
> 
> 时间：2012-07-05T17:13:16.093
> 
> 标签：ios, uitableview, modalviewcontroller, uimodaltransitionstyle

So I'm creating an iPad app that displays images in a UITableView and when when a row/image is selected it pushes another view controller that plays a video in full screen. 这一切正常，但我想动画从表格中图像的原始大小到全屏视频的过渡。[此处的此视频在http://www.apple.com/ipad/videos/#itunes](http://www.apple.com/ipad/videos/#itunes)中以大约 1 秒的时间显示了我想要的内容。那么我将如何获得所选单元格的框架？以及如何将视图从单元格框架转换为全屏？

这是我现在进行过渡的方式：

```
- (void) tableView: (UITableView *) tableView didSelectRowAtIndexPath: (NSIndexPath *) indexPath 
{
    if (indexPath.row == 0) 
    {
        VideoViewController * video1 = [[VideoViewController alloc] init];
        UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:video1];
        navController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
        navController.modalPresentationStyle = UIModalPresentationFullScreen;
        navController.navigationBarHidden = YES;

        [self presentModalViewController:navController animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:31:19.503

[有一个名为UAModalPanel](https://github.com/coneybeare/UAModalPanel)的开源项目，它对您想要实现的目标做了一些非常有趣的事情。您需要通过调用 UITableView 方法来获取您的单元格视图：

```
- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

然后您需要使用以下方法将单元格的中心点转换为超级视图坐标平面：

```
 - (CGPoint)convertPoint:(CGPoint)point toView:(UIView *)view; 
```

然后您可以将此中心点传递到面板以从那里显示。

*全面披露*：我是该项目的维护者。

# pdf - Solr 4.0 用户界面问题

> ID：11349246
> 
> 赞同：5
> 
> 时间：2012-07-05T17:13:24.240
> 
> 标签：pdf, solr, binary, indexing

我今天才发现有一个新的 solr 版本（4.0 ALPHA）。所以，我试一试。设置后（在 Tomcat 下）我收到以下错误消息：此界面要求您激活管理请求处理程序，将以下配置添加到您的 solrconfig.xml：

```
<!-- Admin Handlers - This will register all the standard admin RequestHandlers. -->
<requestHandler name="/admin/" class="solr.admin.AdminHandlers" /> 
```

当我在 solrconfig.xml 中添加以下内容时弹出上述错误：

```
<requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
        <str name="config">data-config.xml</str>
    </lst>
   </requestHandler> 
```

有人知道这是怎么回事吗？

先感谢您，

汤姆希腊

**solr 文件夹结构：**

```
+solr
   +conf
   +data
   +lib
      -contrib
      -dist 
```

**solr.xml 文件：**

```
<?xml version="1.0" encoding="UTF-8" ?>
<solr persistent="false">
  <cores adminPath="/admin/cores" defaultCoreName="collection1">
    <core name="collection1" instanceDir="." />
  </cores>
</solr> 
```

**solrconfig.xml 文件：**

```
<?xml version="1.0" encoding="UTF-8" ?>
<config>
  <luceneMatchVersion>LUCENE_40</luceneMatchVersion>

  <lib dir="lib/dist/" regex="apache-solr-cell-\d.*\.jar" />
  <lib dir="lib/contrib/extraction/lib/" regex=".*\.jar" />

  <lib dir="lib/dist/" regex="apache-solr-clustering-\d.*\.jar" />
  <lib dir="lib/contrib/clustering/lib/" regex=".*\.jar" />

  <lib dir="lib/dist/" regex="apache-solr-dataimporthandler-\d.*\.jar" />
  <!--<lib dir="lib/contrib/dataimporthandler/lib/" regex=".*\.jar" />-->

  <lib dir="lib/dist/" regex="apache-solr-langid-\d.*\.jar" />
  <lib dir="lib/contrib/langid/lib/" regex=".*\.jar" />

  <lib dir="lib/dist/" regex="apache-solr-velocity-\d.*\.jar" />
  <lib dir="lib/contrib/velocity/lib/" regex=".*\.jar" />

  <lib dir="lib/dist/" regex="apache-solr-dataimporthandler-extras-\d.*\.jar" />

  <lib dir="lib/contrib/extraction/lib/" regex="tika-core-\d.*\.jar" />
  <lib dir="lib/contrib/extraction/lib/" regex="tika-parsers-\d.*\.jar" />
  <lib dir="/total/crap/dir/ignored" /> 

  <dataDir>${solr.data.dir:}</dataDir>

  <directoryFactory name="DirectoryFactory" 
                    class="${solr.directoryFactory:solr.StandardDirectoryFactory}"/>

  <indexConfig>

  </indexConfig>
  <jmx />

  <updateHandler class="solr.DirectUpdateHandler2">

     <autoCommit> 
       <maxTime>15000</maxTime> 
       <openSearcher>false</openSearcher> 
     </autoCommit>

    <updateLog>
      <str name="dir">${solr.data.dir:}</str>
    </updateLog>

  </updateHandler>

  <query>

    <maxBooleanClauses>1024</maxBooleanClauses>

    <filterCache class="solr.FastLRUCache"
                 size="512"
                 initialSize="512"
                 autowarmCount="0"/>

    <queryResultCache class="solr.LRUCache"
                     size="512"
                     initialSize="512"
                     autowarmCount="0"/>

    <documentCache class="solr.LRUCache"
                   size="512"
                   initialSize="512"
                   autowarmCount="0"/>

    <enableLazyFieldLoading>true</enableLazyFieldLoading>

   <queryResultWindowSize>20</queryResultWindowSize>

   <queryResultMaxDocsCached>200</queryResultMaxDocsCached>

    <listener event="newSearcher" class="solr.QuerySenderListener">
      <arr name="queries">

      </arr>
    </listener>
    <listener event="firstSearcher" class="solr.QuerySenderListener">
      <arr name="queries">
        <lst>
          <str name="q">static firstSearcher warming in solrconfig.xml</str>
        </lst>
      </arr>
    </listener>

    <useColdSearcher>false</useColdSearcher>

    <maxWarmingSearchers>2</maxWarmingSearchers>

  </query>

  <requestDispatcher handleSelect="false" >

    <requestParsers enableRemoteStreaming="true" 
                    multipartUploadLimitInKB="2048000" />

    <httpCaching never304="true" />

  </requestDispatcher>

  <requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
        <str name="config">data-config.xml</str>
    </lst>
   </requestHandler>

  <requestHandler name="/select" class="solr.SearchHandler">

     <lst name="defaults">
       <str name="echoParams">explicit</str>
       <int name="rows">10</int>
       <str name="df">text</str>
     </lst>

    </requestHandler>

  <requestHandler name="/query" class="solr.SearchHandler">
     <lst name="defaults">
       <str name="echoParams">explicit</str>
       <str name="wt">json</str>
       <str name="indent">true</str>
       <str name="df">text</str>
     </lst>
  </requestHandler>

  <requestHandler name="/get" class="solr.RealTimeGetHandler">
     <lst name="defaults">
       <str name="omitHeader">true</str>
     </lst>
  </requestHandler>

  <requestHandler name="/browse" class="solr.SearchHandler">
     <lst name="defaults">
       <str name="echoParams">explicit</str>

       <!-- VelocityResponseWriter settings -->
       <str name="wt">velocity</str>
       <str name="v.template">browse</str>
       <str name="v.layout">layout</str>
       <str name="title">Solritas</str>

       <!-- Query settings -->
       <str name="defType">edismax</str>
       <str name="qf">
          text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
       </str>
       <str name="mm">100%</str>
       <str name="q.alt">*:*</str>
       <str name="rows">10</str>
       <str name="fl">*,score</str>

       <str name="mlt.qf">
         text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
       </str>
       <str name="mlt.fl">text,features,name,sku,id,manu,cat</str>
       <int name="mlt.count">3</int>

       <!-- Faceting defaults -->
       <str name="facet">on</str>
       <str name="facet.field">cat</str>
       <str name="facet.field">manu_exact</str>
       <str name="facet.query">ipod</str>
       <str name="facet.query">GB</str>
       <str name="facet.mincount">1</str>
       <str name="facet.pivot">cat,inStock</str>
       <str name="facet.range.other">after</str>
       <str name="facet.range">price</str>
       <int name="f.price.facet.range.start">0</int>
       <int name="f.price.facet.range.end">600</int>
       <int name="f.price.facet.range.gap">50</int>
       <str name="facet.range">popularity</str>
       <int name="f.popularity.facet.range.start">0</int>
       <int name="f.popularity.facet.range.end">10</int>
       <int name="f.popularity.facet.range.gap">3</int>
       <str name="facet.range">manufacturedate_dt</str>
       <str name="f.manufacturedate_dt.facet.range.start">NOW/YEAR-10YEARS</str>
       <str name="f.manufacturedate_dt.facet.range.end">NOW</str>
       <str name="f.manufacturedate_dt.facet.range.gap">+1YEAR</str>
       <str name="f.manufacturedate_dt.facet.range.other">before</str>
       <str name="f.manufacturedate_dt.facet.range.other">after</str>

       <!-- Highlighting defaults -->
       <str name="hl">on</str>
       <str name="hl.fl">text features name</str>
       <str name="f.name.hl.fragsize">0</str>
       <str name="f.name.hl.alternateField">name</str>

       <!-- Spell checking defaults -->
       <str name="spellcheck">on</str>
       <str name="spellcheck.extendedResults">false</str>       
       <str name="spellcheck.count">5</str>
       <str name="spellcheck.alternativeTermCount">2</str>
       <str name="spellcheck.maxResultsForSuggest">5</str>       
       <str name="spellcheck.collate">true</str>
       <str name="spellcheck.collateExtendedResults">true</str>  
       <str name="spellcheck.maxCollationTries">5</str>
       <str name="spellcheck.maxCollations">3</str>           
     </lst>

     <!-- append spellchecking to our list of components -->
     <arr name="last-components">
       <str>spellcheck</str>
     </arr>
  </requestHandler>

  <requestHandler name="/update" class="solr.UpdateRequestHandler">

  </requestHandler>

  <requestHandler name="/update/extract" 
                  startup="lazy"
                  class="solr.extraction.ExtractingRequestHandler" >
    <lst name="defaults">
      <!-- All the main content goes into "text"... if you need to return
           the extracted text or do highlighting, use a stored field. -->
      <str name="fmap.content">text</str>
      <str name="lowernames">true</str>
      <str name="uprefix">ignored_</str>

      <!-- capture link hrefs but ignore div attributes -->
      <str name="captureAttr">true</str>
      <str name="fmap.a">links</str>
      <str name="fmap.div">ignored_</str>
    </lst>
  </requestHandler>

  <requestHandler name="/analysis/field" 
                  startup="lazy"
                  class="solr.FieldAnalysisRequestHandler" />

  <requestHandler name="/analysis/document" 
                  class="solr.DocumentAnalysisRequestHandler" 
                  startup="lazy" />

  <requestHandler name="/admin/" 
                  class="solr.admin.AdminHandlers" />

  <!-- ping/healthcheck -->
  <requestHandler name="/admin/ping" class="solr.PingRequestHandler">
    <lst name="invariants">
      <str name="q">solrpingquery</str>
    </lst>
    <lst name="defaults">
      <str name="echoParams">all</str>
    </lst>
  </requestHandler>

  <!-- Echo the request contents back to the client -->
  <requestHandler name="/debug/dump" class="solr.DumpRequestHandler" >
    <lst name="defaults">
     <str name="echoParams">explicit</str> 
     <str name="echoHandler">true</str>
    </lst>
  </requestHandler>

    <requestHandler name="/replication" class="solr.ReplicationHandler" startup="lazy" /> 

  <searchComponent name="spellcheck" class="solr.SpellCheckComponent">

    <str name="queryAnalyzerFieldType">textSpell</str>
    <!-- a spellchecker built from a field of the main index -->
    <lst name="spellchecker">
      <str name="name">default</str>
      <str name="field">name</str>
      <str name="classname">solr.DirectSolrSpellChecker</str>
      <!-- the spellcheck distance measure used, the default is the internal levenshtein -->
      <str name="distanceMeasure">internal</str>
      <!-- minimum accuracy needed to be considered a valid spellcheck suggestion -->
      <float name="accuracy">0.5</float>
      <!-- the maximum #edits we consider when enumerating terms: can be 1 or 2 -->
      <int name="maxEdits">2</int>
      <!-- the minimum shared prefix when enumerating terms -->
      <int name="minPrefix">1</int>
      <!-- maximum number of inspections per result. -->
      <int name="maxInspections">5</int>
      <!-- minimum length of a query term to be considered for correction -->
      <int name="minQueryLength">4</int>
      <!-- maximum threshold of documents a query term can appear to be considered for correction -->
      <float name="maxQueryFrequency">0.01</float>
      <!-- uncomment this to require suggestions to occur in 1% of the documents
        <float name="thresholdTokenFrequency">.01</float>
      -->
    </lst>

    <!-- a spellchecker that can break or combine words.  See "/spell" handler below for usage -->
    <lst name="spellchecker">
      <str name="name">wordbreak</str>
      <str name="classname">solr.WordBreakSolrSpellChecker</str>      
      <str name="field">name</str>
      <str name="combineWords">true</str>
      <str name="breakWords">true</str>
      <int name="maxChanges">10</int>
    </lst>

  </searchComponent>

  <requestHandler name="/spell" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
      <str name="df">text</str>

      <str name="spellcheck.dictionary">default</str>
      <str name="spellcheck.dictionary">wordbreak</str>
      <str name="spellcheck">on</str>
      <str name="spellcheck.extendedResults">true</str>       
      <str name="spellcheck.count">10</str>
      <str name="spellcheck.alternativeTermCount">5</str>
      <str name="spellcheck.maxResultsForSuggest">5</str>       
      <str name="spellcheck.collate">true</str>
      <str name="spellcheck.collateExtendedResults">true</str>  
      <str name="spellcheck.maxCollationTries">10</str>
      <str name="spellcheck.maxCollations">5</str>         
    </lst>
    <arr name="last-components">
      <str>spellcheck</str>
    </arr>
  </requestHandler>

  <searchComponent name="tvComponent" class="solr.TermVectorComponent"/>

  <requestHandler name="/tvrh" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
      <str name="df">text</str>
      <bool name="tv">true</bool>
    </lst>
    <arr name="last-components">
      <str>tvComponent</str>
    </arr>
  </requestHandler>

  <searchComponent name="clustering"
                   enable="${solr.clustering.enabled:false}"
                   class="solr.clustering.ClusteringComponent" >
    <!-- Declare an engine -->
    <lst name="engine">
      <!-- The name, only one can be named "default" -->
      <str name="name">default</str>

      <str name="carrot.algorithm">org.carrot2.clustering.lingo.LingoClusteringAlgorithm</str>

      <str name="LingoClusteringAlgorithm.desiredClusterCountBase">20</str>

      <str name="carrot.lexicalResourcesDir">clustering/carrot2</str>

      <str name="MultilingualClustering.defaultLanguage">ENGLISH</str>
    </lst>
    <lst name="engine">
      <str name="name">stc</str>
      <str name="carrot.algorithm">org.carrot2.clustering.stc.STCClusteringAlgorithm</str>
    </lst>
  </searchComponent>

  <requestHandler name="/clustering"
                  startup="lazy"
                  enable="${solr.clustering.enabled:false}"
                  class="solr.SearchHandler">
    <lst name="defaults">
      <bool name="clustering">true</bool>
      <str name="clustering.engine">default</str>
      <bool name="clustering.results">true</bool>
      <!-- The title field -->
      <str name="carrot.title">name</str>
      <str name="carrot.url">id</str>
      <!-- The field to cluster on -->
       <str name="carrot.snippet">features</str>
       <!-- produce summaries -->
       <bool name="carrot.produceSummary">true</bool>
       <!-- the maximum number of labels per cluster -->
       <!--<int name="carrot.numDescriptions">5</int>-->
       <!-- produce sub clusters -->
       <bool name="carrot.outputSubClusters">false</bool>

       <str name="defType">edismax</str>
       <str name="qf">
         text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
       </str>
       <str name="q.alt">*:*</str>
       <str name="rows">10</str>
       <str name="fl">*,score</str>
    </lst>     
    <arr name="last-components">
      <str>clustering</str>
    </arr>
  </requestHandler>

  <searchComponent name="terms" class="solr.TermsComponent"/>

  <!-- A request handler for demonstrating the terms component -->
  <requestHandler name="/terms" class="solr.SearchHandler" startup="lazy">
     <lst name="defaults">
      <bool name="terms">true</bool>
    </lst>     
    <arr name="components">
      <str>terms</str>
    </arr>
  </requestHandler>

  <searchComponent name="elevator" class="solr.QueryElevationComponent" >
    <!-- pick a fieldType to analyze queries -->
    <str name="queryFieldType">string</str>
    <str name="config-file">elevate.xml</str>
  </searchComponent>

  <!-- A request handler for demonstrating the elevator component -->
  <requestHandler name="/elevate" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
      <str name="echoParams">explicit</str>
      <str name="df">text</str>
    </lst>
    <arr name="last-components">
      <str>elevator</str>
    </arr>
  </requestHandler>

  <searchComponent class="solr.HighlightComponent" name="highlight">
    <highlighting>
      <!-- Configure the standard fragmenter -->
      <!-- This could most likely be commented out in the "default" case -->
      <fragmenter name="gap" 
                  default="true"
                  class="solr.highlight.GapFragmenter">
        <lst name="defaults">
          <int name="hl.fragsize">100</int>
        </lst>
      </fragmenter>

      <fragmenter name="regex" 
                  class="solr.highlight.RegexFragmenter">
        <lst name="defaults">
          <!-- slightly smaller fragsizes work better because of slop -->
          <int name="hl.fragsize">70</int>
          <!-- allow 50% slop on fragment sizes -->
          <float name="hl.regex.slop">0.5</float>
          <!-- a basic sentence pattern -->
          <str name="hl.regex.pattern">[-\w ,/\n\&quot;&apos;]{20,200}</str>
        </lst>
      </fragmenter>

      <!-- Configure the standard formatter -->
      <formatter name="html" 
                 default="true"
                 class="solr.highlight.HtmlFormatter">
        <lst name="defaults">
          <str name="hl.simple.pre"><![CDATA[<em>]]></str>
          <str name="hl.simple.post"><![CDATA[</em>]]></str>
        </lst>
      </formatter>

      <!-- Configure the standard encoder -->
      <encoder name="html" 
               class="solr.highlight.HtmlEncoder" />

      <!-- Configure the standard fragListBuilder -->
      <fragListBuilder name="simple" 
                       class="solr.highlight.SimpleFragListBuilder"/>

      <!-- Configure the single fragListBuilder -->
      <fragListBuilder name="single" 
                       class="solr.highlight.SingleFragListBuilder"/>

      <!-- Configure the weighted fragListBuilder -->
      <fragListBuilder name="weighted" 
                       default="true"
                       class="solr.highlight.WeightedFragListBuilder"/>

      <!-- default tag FragmentsBuilder -->
      <fragmentsBuilder name="default" 
                        default="true"
                        class="solr.highlight.ScoreOrderFragmentsBuilder">
        <!-- 
        <lst name="defaults">
          <str name="hl.multiValuedSeparatorChar">/</str>
        </lst>
        -->
      </fragmentsBuilder>

      <!-- multi-colored tag FragmentsBuilder -->
      <fragmentsBuilder name="colored" 
                        class="solr.highlight.ScoreOrderFragmentsBuilder">
        <lst name="defaults">
          <str name="hl.tag.pre"><![CDATA[
               <b style="background:yellow">,<b style="background:lawgreen">,
               <b style="background:aquamarine">,<b style="background:magenta">,
               <b style="background:palegreen">,<b style="background:coral">,
               <b style="background:wheat">,<b style="background:khaki">,
               <b style="background:lime">,<b style="background:deepskyblue">]]></str>
          <str name="hl.tag.post"><![CDATA[</b>]]></str>
        </lst>
      </fragmentsBuilder>

      <boundaryScanner name="default" 
                       default="true"
                       class="solr.highlight.SimpleBoundaryScanner">
        <lst name="defaults">
          <str name="hl.bs.maxScan">10</str>
          <str name="hl.bs.chars">.,!? &#9;&#10;&#13;</str>
        </lst>
      </boundaryScanner>

      <boundaryScanner name="breakIterator" 
                       class="solr.highlight.BreakIteratorBoundaryScanner">
        <lst name="defaults">
          <!-- type should be one of CHARACTER, WORD(default), LINE and SENTENCE -->
          <str name="hl.bs.type">WORD</str>
          <!-- language and country are used when constructing Locale object.  -->
          <!-- And the Locale object will be used when getting instance of BreakIterator -->
          <str name="hl.bs.language">en</str>
          <str name="hl.bs.country">US</str>
        </lst>
      </boundaryScanner>
    </highlighting>
  </searchComponent>

  <queryResponseWriter name="json" class="solr.JSONResponseWriter">

    <str name="content-type">text/plain; charset=UTF-8</str>
  </queryResponseWriter>

    <queryResponseWriter name="velocity" class="solr.VelocityResponseWriter" startup="lazy"/>

  <queryResponseWriter name="xslt" class="solr.XSLTResponseWriter">
    <int name="xsltCacheLifetimeSeconds">5</int>
  </queryResponseWriter>

  <admin>
    <defaultQuery>*:*</defaultQuery>
  </admin>

</config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:31:53.930

我检查了日志文件，我猜错误就在这里/**在类路径或 'solr.\conf/ 中找不到资源 'solrconfig.xml'**它无法找到 solrconfig.xml 文件。
道歉，我不知道如何纠正它。可能是亲可以。干杯:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T12:39:27.437

在 solr ALPHA 4.0 发行版中有示例文件夹。转到 example-->solr--config 文件夹并将 solrconfig.xml 复制到您的核心，无论您创建了什么。如果您使用数据导入处理程序，请将其复制到 solrconfig.xml data-config.xml

您的问题将得到解决我已经尝试并成功了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T05:37:05.767

尝试在 tomcat 下部署为 webapp 时，我遇到了类似的问题。我找到了本教程[http://adeithzya.wordpress.com/2011/08/25/using-apache-solr-with-spring-framework/](http://adeithzya.wordpress.com/2011/08/25/using-apache-solr-with-spring-framework/)并且能够让管理 UI 使用一个小的更改，即而不是 windows文件结构我使用的是 Mac OS。

“我将使用 Apache Tomcat 作为 SOLR 的 Web 服务器，因此浏览到 Tomcat 配置目录，在我的情况下它是“C:\apache-tomcat-6.0.32\conf\Catalina\localhost” 添加新的 .xml 文件 “my -solr-app.xml”（可以是任何名称）。以下是 .xml 文件的内容：

启动 Apache Tomcat 并打开浏览器访问“http://localhost:8080/my-solr-app/”，您可能需要更改为 Tomcat Web 服务器配置的端口号。如果您看到欢迎屏幕，那么您刚刚完成了 Apache SOLR 设置。”

我有一个小问题，因为我没有复制正确的文件夹，请确保将整个“示例”目录复制到新目录中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T19:41:21.230

我有同样的错误。首先要修复它，确保 tomcat 知道你的 solr home 在哪里。

您可以在 webapps/solr/web.xml 文件中设置 solr home 的路径

```
<env-entry>
 <env-entry-name>solr/home</env-entry-name>
 <env-entry-value>/Path/To/My/solr/Home/solr/</env-entry-value>
 <env-entry-type>java.lang.String</env-entry-type> 
```

或者你可以这样做 export JAVA_OPTS=”$JAVA_OPTS -Dsolr.solr.home=/my/custom/solr/home/dir/”</p>

我还升级到了 tomcat 7.0.8，因为在早期版本的 tomcat 7 中存在阻止 solr 工作的 url 错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T13:54:47.683

这很可能是由您的配置中的其他一些错误引起的。要了解发生了什么，请转到 Tomcat 文件夹 /logs/ 并查找文件 catalina.*.log

阅读异常消息，您应该能够找出配置失败的部分，如果不将其粘贴到此处。

# ruby-on-rails - has_many 通过团队和 inverse_teams 进行的比赛

> ID：11349247
> 
> 赞同：0
> 
> 时间：2012-07-05T17:13:25.220
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

感谢您的关注。总菜鸟在这里。对不起！

我有一个自引用关联来建立一个有两个用户的团队并通过团队进行比赛：

```
class User < ActiveRecord::Base
  has_many :teams, :dependent => :destroy
  has_many :inverse_teams, :class_name => "Team", :foreign_key => "team_mate_id"
  has_many :competitions, :through => :teams
end 
```

我想使用类似 user.competitions 的东西，但这只会返回通过 team.user_id 直接属于用户的团队的比赛。

我需要的是团队和反向团队的用户竞赛，而不显示重复的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:17:51.790

稍微更改模型可能会简化您的操作。您可以创建一个用户模型、一个团队模型和一个成员模型来连接它们。每个会员资格属于一个团队和一个用户。用户有很多会员资格，团队也有很多会员资格。我认为您可以使用验证将其限制为 2。然后，您可以使用“has_many through”直接将 Teams 连接到用户，将用户连接到 Teams。这种方法可以让您获得用户的所有比赛，例如：

```
Competition.joins(teams: {memberships: :users}).where(users: {id: my_user_id}) 
```

# java - iText rotate() 不会定位第一页

> ID：11349248
> 
> 赞同：3
> 
> 时间：2012-07-05T17:13:53.290
> 
> 标签：java, itext

我读到的关于 iText 的所有内容都说您应该能够设置页面大小，然后创建一个新页面。但是由于某种原因，当我尝试这样做时，我的第一页没有旋转。但我的第二个是。有任何想法吗？

```
response.setContentType("application/pdf");
Document document = new Document();

try{
    ByteArrayOutputStream buffer = new ByteArrayOutputStream();
    PdfWriter.getInstance(document, buffer); 
    document.open();
    //Start a new page
    document.setPageSize(PageSize.LETTER.rotate()); //  11" x 8.5"  new Rectangle(792f, 612f)

    document.newPage();
    Paragraph topText = new Paragraph();
    // add some content here...
    document.close(); 

    DataOutput dataOutput = new DataOutputStream(response.getOutputStream());
    byte[] bytes = buffer.toByteArray();
    response.setContentLength(bytes.length);

    for(int i = 0; i < bytes.length; i++) {
        dataOutput.writeByte(bytes[i]);
    }

} catch (DocumentException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:47:24.233

`document.newPage()`真正的意思是“完成当前页面并打开一个新页面”。这意味着在您`open()`创建文档之后，您已经准备好一个空白页面（无论文档之前设置的大小）。

您应该在打开文档之前设置页面大小：

```
document.setPageSize(PageSize.LETTER.rotate());
document.open(); 
```

# java - 通过 Javascript 或 HTML5 打开本地可执行 jar

> ID：11349258
> 
> 赞同：0
> 
> 时间：2012-07-05T17:14:39.637
> 
> 标签：java, html, applet, load

我正在尝试从 html 页面执行本地可执行 jar，所以我最初尝试使用 javascript window.open("/Users/guest/desktop/fileName")。这几乎可以工作。它打开jar所在的文件夹并选择jar，但它不执行jar。然后我在这里看到了关于由于安全问题而无法打开文件的线程。

我遇到了这个页面，我觉得应该有我的答案： [http ://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

但是该页面所讨论的只是如何读取和写入文件，而不是如何打开它们。还是不能打开本地文件？如果是，我该怎么做？

这是我的 HTML 代码，以防万一。

```
<html>
<head>
<script type="text/javascript">
function open_win()
{window.open("/Desktop/folder/jarFile.jar")
}
</script>
</head>
<body>
<input type="button" value="Open jar" onclick="open_win()" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T17:19:08.327

我不认为你能做到这一点。如果您需要执行一个 jar，您应该查看 JavaWebstart（并从服务器提供该 jar）。

# php - 想要使用 cURL 从 facebook 中提取 fb_dtsg 变量

> ID：11349265
> 
> 赞同：1
> 
> 时间：2012-07-05T17:15:27.140
> 
> 标签：php, curl

如果我们在 Facebook 中打开任何粉丝专页，就会有一个名为“fb_dtsg”的隐藏变量。

如何使用 PHP(cURL) 提取它的值？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-03T20:37:36.590

你可以这样做：

```
var fb_dtsg = document.getElementsByName('fb_dtsg')[0].value; 
```

请注意，我是通过 JavaScript 进行的，因为它是一个 javascript 对象，您不能只使用 cURL 搜索字符串中的值

来源：正在分析一些恶意软件并查找值。如果你有兴趣， [http ://pastebin.com/0JXCVxXg](http://pastebin.com/0JXCVxXg)

# ios - 来自远程数据源的核心数据存储

> ID：11349266
> 
> 赞同：0
> 
> 时间：2012-07-05T17:15:30.340
> 
> 标签：ios, core-data

我正在开发一个 iPhone 应用程序，它从 3 个单独的提要中收集数据。在`applicationDidFinishLaunching`和`applicationWillEnterForeground`和中执行以下操作：

```
[self emptySchedule];
[self populateSchedule];
[self emptyPlayers];
[self populatePlayers];
[self emptyNews];
[self populateNews]; 
```

空方法只是从核心数据中删除信息，而填充方法通过调用各种 web json/xml 提要将信息添加回核心数据。它似乎做得非常快；但想知道这是否是在应用程序中保持信息最新的首选方法。

编辑：

只是为了给出一些上下文，这里有几个用于清空/填充的方法：

由于这主要是异步的，它会影响应用程序的启动时间吗？

```
- (void) emptySchedule
{
    NSFetchRequest * allEvents = [[NSFetchRequest alloc] init];
    [allEvents setEntity:[NSEntityDescription entityForName:@"Event" inManagedObjectContext:self.managedObjectContext]];
    [allEvents setIncludesPropertyValues:NO]; //only fetch the managedObjectID

    NSError * error = nil;
    NSArray * events = [self.managedObjectContext executeFetchRequest:allEvents error:&error];
    //error handling goes here
    for (NSManagedObject * event in events) {
        [self.managedObjectContext deleteObject:event];
    }
    NSError *saveError = nil;
    [self.managedObjectContext save:&saveError];
}

-(void)populateSchedule
{
    NSURL *url = [NSURL URLWithString:SCHEDULE_FEED_URL];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id schedule) 
                                         {
                                             for (NSDictionary *campEvent in schedule) 
                                             {
                                                 Event *event = nil;

                                                 event = [NSEntityDescription insertNewObjectForEntityForName:@"Event" inManagedObjectContext:self.managedObjectContext];
                                                 event.eventName = [campEvent valueForKeyPath:@"eventName"];
                                                 event.ticketsRequired = [campEvent valueForKeyPath:@"ticketsRequired"];
                                                 event.location = [campEvent valueForKeyPath:@"location"];
                                                 event.practiceStart = [NSDate dateWithTimeIntervalSince1970:[[campEvent valueForKeyPath:@"practiceStart"] doubleValue]];
                                                 event.practiceEnd = [NSDate dateWithTimeIntervalSince1970:[[campEvent valueForKeyPath:@"practiceEnd"] doubleValue]];
                                             }
                                             NSError *saveError = nil;
                                             //Save inserts
                                             [self.managedObjectContext save:&saveError];

                                              //Notify other objects of this
                                             [[NSNotificationCenter defaultCenter] postNotificationName:@"populateSchedule" object:nil];

                                         } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
                                             UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Error" message:@"Error Retrieving Data. Please try again later." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
                                             [alert show];
                                         }];
    [operation start];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:45:33.310

我会尝试根据我的个人经验来回答。也许其他人可能对此有不同的看法。

在您的情况下，同步仅在应用程序生命周期的各个阶段执行。

所以，我会添加第三个。当用户询问时。但这完全取决于您的应用程序的性质。另一种方法是设置一个后台线程，该线程定期唤醒并要求服务器向其发送新数据。这可能比手动同步更复杂。

关于这两种方式，我将在特定的后台线程中执行导入操作。您可以设置自己的操作（`NSOperation`此类任务也有类）并在那里做一些事情或使用新的 iOS 5 队列核心数据 API。

如果您还没有完成（后台导入），也可以为您的实际方法执行此操作（我认为在这种情况下您可以统一对`empty`/ `populate`）。这种机制允许您加速应用程序启动并向用户说明正在发生的事情而不会冻结 UI：*“您好，我正在从服务器获取数据！请稍候”*。

**编辑**

关于您添加的代码，这对我来说没问题。只有两个考虑。

首先，如果删除是在主线程中执行的，如果你有很多条目要删除，它可能会阻塞主线程。在这种情况下，UI 可能没有响应。无论如何，您已经做好了`setIncludesPropertyValues`设置`NO`。

关于另一个片段，我猜只有数据下载是以异步方式执行的。完成处理程序在主线程中执行（例如，您可以使用 进行检查`BOOL isMainThread = [NSThread isMainThread]`），因此核心数据对象的创建及其相关保存。同样在这种情况下，如果您有大量数据，则可能会阻塞主线程。

无论如何，如果您已经进行了一些测试并且应用程序启动时间不会太长，您可以只保留您的代码。如果您开始看到某种延迟，也许您可​​以在后台执行 Core Data 操作。

如果没有 iOS 5 API，`save`调用可能（我说可以，因为您可以保存数据块而不是整个数据）需要时间来执行（特别是当您有很多对象要存储在核心数据文件中时）。从 iOS 5 开始，您可以利用新类型`NSManagedObjectContext`（[队列并发类型](https://stackoverflow.com/questions/11176275/when-to-use-core-datas-nsmainqueueconcurrencytype/11176494#11176494)）和父子上下文。此外，您可以避免编写整个 Core Data 堆栈并使用[`UIManagedDocument`](http://www.informit.com/articles/article.aspx?p=1842295&seqNum=10)该类。通过这两种方式，`save`可以在并发队列中执行而不阻塞主线程。

希望有帮助。

# python - 从 Web 服务返回的 Python SUDS unicode 解码错误

> ID：11349267
> 
> 赞同：0
> 
> 时间：2012-07-05T17:15:31.853
> 
> 标签：python, suds

我正在尝试使用由我们的一位开发人员创建的 Web 服务，该服务允许我们在某些限制内将文件上传到系统中。

使用 SUDS，我得到以下信息：

```
Suds ( https://fedorahosted.org/suds/ ) version: 0.4 GA  build: R699-20100913

Service ( ConnectToEFS ) tns="http://tempuri.org/"
   Prefixes (3)
      ns0 = "http://schemas.microsoft.com/2003/10/Serialization/"
      ns1 = "http://schemas.microsoft.com/Message"
      ns2 = "http://tempuri.org/"
   Ports (1):
      (BasicHttpBinding_IConnectToEFS)
         Methods (2):
            CreateContentFolder(xs:string FileCode, xs:string FolderName, xs:string ContentType, xs:string MetaDataXML, )
            UploadFile(ns1:StreamBody FileByteStream, )
         Types (4):
            ns1:StreamBody
            ns0:char
            ns0:duration
            ns0:guid 
```

我使用 UploadFile 的方法如下：

```
def webserviceUploadFile(self, targetLocation, fileName, fileSource):
    fileSource = './test_files/' + fileSource
    ntlm = WindowsHttpAuthenticated(username=uname, password=upass)
    client = Client(webservice_url, transport=ntlm)
    client.set_options(soapheaders={'TargetLocation':targetLocation, 'FileName': fileName})
    body = client.factory.create('AIRDocument')
    body_file = open(fileSource, 'rb')
    body_data = body_file.read()
    body.FileByteStream = body_data
    return client.service.UploadFile(body) 
```

运行它会得到以下结果：

```
Traceback (most recent call last):
  File "test_cases.py", line 639, in test_upload_file_invalid_extension
    result_string = self.HM.webserviceUploadFile('9999', 'AD-1234-5424__44.exe',
 'test_data.pdf')
  File "test_cases.py", line 81, in webserviceUploadFile
    return client.service.UploadFile(body)
  File "build\bdist.win32\egg\suds\client.py", line 542, in __call__
    return client.invoke(args, kwargs)
  File "build\bdist.win32\egg\suds\client.py", line 595, in invoke
    soapenv = binding.get_message(self.method, args, kwargs)
  File "build\bdist.win32\egg\suds\bindings\binding.py", line 120, in get_message
    content = self.bodycontent(method, args, kwargs)
  File "build\bdist.win32\egg\suds\bindings\document.py", line 63, in bodycontent
    p = self.mkparam(method, pd, value)
  File "build\bdist.win32\egg\suds\bindings\document.py", line 105, in mkparam
    return Binding.mkparam(self, method, pdef, object)
  File "build\bdist.win32\egg\suds\bindings\binding.py", line 287, in mkparam
    return marshaller.process(content)
  File "build\bdist.win32\egg\suds\mx\core.py", line 62, in process
    self.append(document, content)
  File "build\bdist.win32\egg\suds\mx\core.py", line 75, in append
    self.appender.append(parent, content)
  File "build\bdist.win32\egg\suds\mx\appender.py", line 102, in append
    appender.append(parent, content)
  File "build\bdist.win32\egg\suds\mx\appender.py", line 243, in append
    Appender.append(self, child, cont)
  File "build\bdist.win32\egg\suds\mx\appender.py", line 182, in append
    self.marshaller.append(parent, content)
  File "build\bdist.win32\egg\suds\mx\core.py", line 75, in append
    self.appender.append(parent, content)
  File "build\bdist.win32\egg\suds\mx\appender.py", line 102, in append
    appender.append(parent, content)
  File "build\bdist.win32\egg\suds\mx\appender.py", line 198, in append
    child.setText(tostr(content.value))
  File "build\bdist.win32\egg\suds\sax\element.py", line 251, in setText
    self.text = Text(value)
  File "build\bdist.win32\egg\suds\sax\text.py", line 43, in __new__
    result = super(Text, cls).__new__(cls, *args, **kwargs)
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 10: ordinal
 not in range(128) 
```

经过大量研究并与网络服务的开发人员交谈后，我将 body_data = body_file.read() 修改为 body_data = body_file.read().decode("UTF-8") ，这让我遇到了这个错误：

```
Traceback (most recent call last):
  File "test_cases.py", line 639, in test_upload_file_invalid_extension
    result_string = self.HM.webserviceUploadFile('9999', 'AD-1234-5424__44.exe', 'test_data.pdf')
  File "test_cases.py", line 79, in webserviceUploadFile
    body_data = body_file.read().decode("utf-8")
  File "C:\python27\lib\encodings\utf_8.py", line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xe2 in position 10: invalid
continuation byte 
```

这没什么帮助。

在对该问题进行了更多研究后，我尝试将 'errors='ignore'' 添加到 UTF-8 编码中，结果如下：

```
<TransactionDescription>Error in INTL-CONF_France_PROJ_MA_126807.docx: An exception has been thrown when reading the stream.. Inner Exception: System.Xml.XmlException: The byte 0x03 is not valid at this location.  Line 1, position 318.
    at System.Xml.XmlExceptionHelper.ThrowXmlException(XmlDictionaryReader reader, String res, String arg1, String arg2, String arg3)
    at System.Xml.XmlUTF8TextReader.Read()
    at System.ServiceModel.Dispatcher.StreamFormatter.MessageBodyStream.Exhaust(XmlDictionaryReader reader)
    at System.ServiceModel.Dispatcher.StreamFormatter.MessageBodyStream.Read(Byte[] buffer, Int32 offset, Int32 count). Source: System.ServiceModel</TransactionDescription> 
```

这几乎让我不知道该怎么做。根据 web 服务的结果堆栈跟踪，它看起来需要 UTF-8，但如果没有 Python 或 SUDS 合适，或者忽略编码中的问题，我似乎无法将它传递给 web 服务。我正在使用的系统只接收 MicroSoft 办公类型文件（doc、xls 等）、PDF 和 TXT 文件，因此不能选择使用我对编码有更多控制权的东西。我还尝试检测示例 PDF 和示例 DOCX 使用的编码，但使用它建议的编码（Latin-1、ISO8859-x 和几个 Windows XXXX）都被 Python 和 SUDS 接受，但不被 web 服务接受。

另请注意，在显示的示例中，它最常将测试引用到无效扩展。这个错误甚至适用于成功上传的测试，这是唯一一次真正显示最终堆栈跟踪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:47:10.453

您可以使用它`base64.b64encode(body_file.read())`，这将返回 base64 字符串值。所以你的请求变量必须是一个字符串。

# solr - 为什么 solr 搜索限制为 5 个字符？

> ID：11349268
> 
> 赞同：0
> 
> 时间：2012-07-05T17:15:38.157
> 
> 标签：solr

在名为 text 的字段上查询术语“population”时：

```
.../solr/select?q=text:(pop*) 
```

返回包含单词“population”的结果。

但是，如果星号前有超过 5 个字符，则不返回任何内容：

```
.../solr/select?q=text:(popula*) 
```

然而，这有效：

```
.../solr/select?q=text:(population) 
```

就像这样（我不知道为什么）：

```
.../solr/select?q=text:(popul) 
```

没有星号，只有 5 个字符有效，全文有效。

它不仅限于“人口”，似乎也适用于其他词（我尝试了“分子”）。

为什么限制为 5 个字符？

我下载的 solr 版本没有太大变化。

字段“text”具有类型“text_en_splitting”。

“text_en_splitting”有两个分析器，一个是“index”类型，一个是“query”类型。我一个都没碰过。

查询分析器如下所示：

```
 <analyzer type="query">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="lang/stopwords_en.txt"
            enablePositionIncrements="true"
            />
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
    <filter class="solr.PorterStemFilterFactory"/>
  </analyzer> 
```

索引分析器看起来相同，但缺少“solr.SynonymFilterFactory”过滤器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:08:29.503

尝试[分析](http://your.host:8983/solr/admin/analysis.jsp?highlight=on)页面来调试如何分析该查询，这样会更容易看到问题。但它可能是由 PorterStemFilter 引起的，请尝试将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:24:45.890

[Porter](http://qaa.ath.cx/porter_js_demo.html)`population populous popul popula popular`词干分析器源于`popul popul popul popula popular`

所以`population`and `popul`share stem，但不是 with `popula`。

如果您想要搜索您指定的类型，请使用`string`数据类型。请在本网站上搜索“Solr 中的字符串与文本”问题。

# ruby - 使用 RSpec 测试输出到命令行

> ID：11349270
> 
> 赞同：18
> 
> 时间：2012-07-05T17:15:44.993
> 
> 标签：ruby, testing, rspec

我想做的是`ruby sayhello.rb`在命令行上运行，然后接收`Hello from Rspec`.

我有这个：

```
class Hello
  def speak
    puts 'Hello from RSpec'
  end
end

hi = Hello.new #brings my object into existence
hi.speak 
```

现在我想在 rspec 中编写一个测试来检查命令行输出实际上是“Hello from RSpec”而不是“我喜欢 Unix”

不工作。我目前在我的 sayhello_spec.rb 文件中有这个

```
require_relative 'sayhello.rb' #points to file so I can 'see' it

describe "sayhello.rb" do
  it "should say 'Hello from Rspec' when ran" do        
    STDOUT.should_receive(:puts).with('Hello from RSpec')    
  end
end 
```

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-05T17:39:34.383

这是一个很好的方法来做到这一点。从[hirb test_helper 源](https://github.com/cldwalker/hirb/blob/master/test/test_helper.rb)复制：

```
def capture_stdout(&block)
  original_stdout = $stdout
  $stdout = fake = StringIO.new
  begin
    yield
  ensure
    $stdout = original_stdout
  end
  fake.string
end 
```

像这样使用：

```
output = capture_stdout { Hello.new.speak }
output.should == "Hello from RSpec\n" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-17T20:06:09.077

该`quietly`命令可能是您想要的（融入 ActiveSupport，请参阅[api.rubyonrails.org](http://api.rubyonrails.org)上的文档）。下面的 RSpec 代码片段显示了如何确保在 stderr 上没有输出，同时使 stdout 静音。

```
quietly do                        # silence everything
  commands.each do |c|
    content = capture(:stderr) {  # capture anything sent to :stderr
      MyGem::Cli.start(c)
    }
    expect(content).to be_empty, "#{c.inspect} had output on stderr: #{content}"
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-05T22:15:54.870

因此，您不必更改主要的 ruby​​ 代码，我刚刚发现您可以执行以下操作：

```
def my_meth
  print 'Entering my method'
  p 5 * 50
  puts 'Second inside message'
end

describe '#my_meth' do
  it 'puts a 2nd message to the console' do
    expect{my_meth}.to output(/Second inside message/).to_stdout
  end
end 
```

在检查所需的输出文本时，我在 / / 中使用它，`Regexp`因为经过多次测试并环顾四周，STDOUT 就是输出的所有内容，所以我发现使用正则表达式更好，这样你就可以检查整个 STDOUT您想要的确切文本。就像我说的那样，它在终端中运行得非常完美。

//只是不得不分享这个，我花了好几天才弄明白。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-12-07T16:48:42.927

```
it "should say 'Hello from Rspec' when run" do        
  output = `ruby sayhello.rb`
  output.should == 'Hello from RSpec'   
end 
```

# html - 一行的文本大小一致

> ID：11349276
> 
> 赞同：0
> 
> 时间：2012-07-05T17:15:57.377
> 
> 标签：html, css, cross-browser

我有一个带有 1 行文本的元素，我不希望它与边框重叠或开始新行。所以我正在考虑对允许的文本长度使用限制，所有字符是否在浏览器中使用相同数量的空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:18:42.367

并非所有字母的大小都相同，这取决于字体类型。浏览器上的个人设置也是一个因素。

要查看具有相同大小的字体列表，请参阅：

[http://en.wikipedia.org/wiki/Monospaced_font](http://en.wikipedia.org/wiki/Monospaced_font)

和

[http://en.wikipedia.org/wiki/Samples_of_monospaced_typefaces](http://en.wikipedia.org/wiki/Samples_of_monospaced_typefaces)

# magento - 翻译 Magento 时遇到问题

> ID：11349277
> 
> 赞同：0
> 
> 时间：2012-07-05T17:15:57.857
> 
> 标签：magento

我正在使用 Magento 开发一个购物网站，但由于该网站需要面向讲西班牙语的人，我需要将该网站翻译成西班牙语。我下载了一些 .csv 文件来进行翻译，但它们不起作用。我什至尝试对英语 .csv 文件进行更改，将语句更改为西班牙语，但它仍然无法正常工作。关于如何使这个问题起作用的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:54:35.777

1.  确保您的 csv 文件位于选定的语言环境中（我认为 /app/locale/es_ES），并且在管理员中为您的 StoreView 选择了此语言环境（系统 -> 配置 -> 常规 -> 语言环境选项）
2.  更改 csv 文件后清除缓存

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:36:50.717

刚刚找到它，您需要转到系统>配置>开发人员>内联翻译，您必须在后端或前端启用更改，仅此而已。这是一种很难实现的方法，但它确实有效。欢迎任何其他建议。

# jquery - 相当于node.js EventEmitter的jquery event.type？

> ID：11349280
> 
> 赞同：1
> 
> 时间：2012-07-05T17:16:16.970
> 
> 标签：jquery, node.js

node.js 是否有等效于 jquery 的 event.type 方法，即以字符串形式给出事件名称的东西？

我已经尝试过 event.type 但到目前为止它还没有为我工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:47:19.500

您可以添加一个小包装函数，为您提供名称

```
 EventEmitter.prototype.addNamedListener = function(event, handler){
      return this.addHandler(function(x){
          handler({ event: event, data: x });
      });
 }; 
```

# c# - 实体框架导航属性一对多变成一对一

> ID：11349282
> 
> 赞同：1
> 
> 时间：2012-07-05T17:16:28.577
> 
> 标签：c#, .net, sql-server, linq, entity-framework

在我的数据库中，我有一个一对多的关系（乐队有很多专辑）。但是，当 Album 中的外键受到限制时，这种关系就变成了一对一的关系。

```
public class Band
{
    [Key]
    public int BandID { get; set; }

    //Other fun attributes

    public virtual ICollection<Album> Albums { get; set; }
}

public class Album
{
    [Key]
    public int AlbumID { get; set; }

    public int BandID { get; set; }

    //Other fun attributes

    //Some other foreign key
    public int SomeOtherKey { get; set; }
} 
```

应生成的 SQL

```
SELECT * FROM Band
LEFT JOIN Album ON (Band.BandID = Album.AlbumID AND Album.SomeOtherKey = 12) 
```

我的问题是我是否应该`public virtual Album Album`在 Band 中有另一个导航属性，或者因为这并不总是正确的，那将是一个坏主意？我应该使用 LINQ 吗？使用实体框架和模型完成此任务的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:59:35.487

答案不是使用导航属性，而是使用带有新模型的 Linq 查询来保存结果，就像这样......

```
var query =
    from band in Context.Band
    join album in Context.Albums on album.BandID equals band.BandID into j1
    from j2 in j1.Where(x => x.SomeOtherKey == value).DefaultIfEmpty()
    select new BandWithAlbumModel
    {
        Band = band,
        Album = j2
    };

public class BandWithAlbumModel
{
     public Band Band { get; set; }

     public Album Album { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:22:14.037

如果你添加

```
public virtual Album Album; 
```

这会与

```
public virtual ICollection<Album> Albums { get; set; } 
```

第一个意味着 1:1 的关系，而后者意味着 1:N 的关系。

因为大概一个乐队可以有多个（或没有）专辑（这里的领域知识:-)，ICollection 是您最可能想要的。

根据您的需要，您可能需要添加

```
public virtual Band Band { get; set;} 
```

到`Album`.

我不明白你的意思

> 但是，当 Album 中的外键受到限制时，这种关系就变成了一对一的关系。

你能澄清那句话吗？

# javascript - Google API：仪表动画

> ID：11349284
> 
> 赞同：5
> 
> 时间：2012-07-05T17:16:38.997
> 
> 标签：javascript, api, gauge

我试图让谷歌仪表指针移动，但它没有移动，我已经设置了动画配置，因为它假设在 var 选项中设置，例如持续时间：1000 和缓动：'inAndOut'，我是谷歌 API 中的 n00b 所以给我的无知尝试。

谁能帮我。这是我正在使用的[教程链接。](https://developers.google.com/chart/interactive/docs/gallery/gauge)代码正在工作，但部分工作，仪表指针应该慢慢移动到它的最大值，但是，在我的情况下它不会工作。这是代码。

```
<html>
<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type='text/javascript'>
  google.load('visualization', '1', {packages:['gauge']});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Label', 'Value'],
      ['Match',80],
    ]);

    var options = {
      width: 440, height: 140,
      greenFrom: 70, greenTo: 100,
      yellowFrom:50, yellowTo: 70,
      redFrom:0, redTo: 50,
      minorTicks: 5,
      animation:{
          duration: 1000,
          easing: 'inAndOut',
        },
      majorTicks : ['0','10','20','30','40','50','60','70','80','90','100']
    };

    var chart = new google.visualization.Gauge(document.getElementById('chart_div<%=id%>'));
    chart.draw(data, options);
    clearChart();
  }
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T05:16:20.867

原来我自己想出了这个，这里的谷歌论坛有一个很好的[答案](http://productforums.google.com/forum/#!topic/websearch/YE-_ua-sYdc)

诀窍是从 0（或任何您的最小值）值开始仪表，然后稍后更新该值（使用 setInterval() 或任何其他方法）

肯定有更好的方法来更新值，而不仅仅是编写一个新数组，但你明白了。

```
<html>
<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type='text/javascript'>
  google.load('visualization', '1', {packages:['gauge']});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Label', 'Value'],
      ['Match',0],
    ]);

    var options = {
      width: 440, height: 140,
      greenFrom: 70, greenTo: 100,
      yellowFrom:50, yellowTo: 70,
      redFrom:0, redTo: 50,
      minorTicks: 5,
      animation:{
          duration: 1000,
          easing: 'inAndOut',
        },
      majorTicks : ['0','10','20','30','40','50','60','70','80','90','100']
    };

    var chart = new google.visualization.Gauge(document.getElementById('chart_div<%=id%>'));
    chart.draw(data, options);
    clearChart();

    // This is new.
    setTimeout(function(){
      var data = google.visualization.arrayToDataTable([
        ['Label', 'Value'],
        ['Match',80],
      ]);
      chart.draw(data, options);
    }, 200);
  }
</script>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T15:59:50.520

现在不确定这是否对任何人都有帮助，但我发现使用 setValue 方法将我从静态指针移到了动画指针。下面是一个代码片段（我有许多仪表小部件，因此是数组）。

```
// set up the value here that we are moving from - this allows the gauge needle to animate when we set the actual value later
if (!widgetArray[i].googleArrayToDataTable) { // check if we've initialised

    widgetArray[i].googleArrayToDataTable = new google.visualization.arrayToDataTable([
      ['Label', 'Value'],
      [widgetArray[i].label, 0]
    ]);
}
else {

    widgetArray[i].googleArrayToDataTable = google.visualization.arrayToDataTable([
      ['Label', 'Value'],
      [widgetArray[i].label, (widgetArray[i].googleOldNeedleValue * widgetArray[i].dialMax / widgetArray[i].googleOldDialMax)]
    ]);
}
// remember these values - I need to do this for my application to ensure the needle looks ok when switching values
widgetArray[i].googleOldNeedleValue = widgetArray[i].needleVal;
widgetArray[i].googleOldDialMax = widgetArray[i].dialMax;

majorTickIncrement = widgetArray[i].dialMax / 5;

var options;

if (widgetArray[i].range2End > 0)
    options = {
        height: 240,
        animation: { duration: 1000, easing: 'inAndOut' },
        //redFrom: 0, redTo: KRAvalues.targetVal,
        redFrom: 0, redTo: widgetArray[i].range1End,
        yellowFrom: widgetArray[i].range1End, yellowTo: widgetArray[i].range2End,
        greenFrom: widgetArray[i].range2End, greenTo: widgetArray[i].range3End,
        minorTicks: 5, max: widgetArray[i].dialMax,
        majorTicks: ['0', majorTickIncrement, majorTickIncrement * 2, majorTickIncrement * 3, majorTickIncrement * 4, widgetArray[i].dialMax]
    };
else
    options = {
        height: 240,
        animation: { duration: 1000, easing: 'inAndOut' },
        minorTicks: 5, max: widgetArray[i].dialMax,
        majorTicks: ['0', majorTickIncrement, majorTickIncrement * 2, majorTickIncrement * 3, majorTickIncrement * 4, widgetArray[i].dialMax]
    };

if (!widgetArray[i].googleChart) { // initialise gauge if required
    widgetArray[i].googleChart = new google.visualization.Gauge(document.getElementById(widgetArray[i].name + 'chart_div'));
}

// this animates the needle
// draw old value
widgetArray[i].googleChart.draw(widgetArray[i].googleArrayToDataTable, options);
// set new value
widgetArray[i].googleArrayToDataTable.setValue(0, 1, widgetArray[i].needleVal);
// draw new value
widgetArray[i].googleChart.draw(widgetArray[i].googleArrayToDataTable, options); 
```

# ruby-on-rails - Rails 3：如何在 Postgres 中通过多列的 ORDER 跳过连接上的重复行

> ID：11349295
> 
> 赞同：1
> 
> 时间：2012-07-05T17:17:18.933
> 
> 标签：ruby-on-rails, postgresql, activerecord

我有一个简单的 HABTM 关系 Books <-> Authors，我想通过书名和作者姓名获取书籍：

```
Book.joins(:authors)
    .where("books.title ILIKE 'roman%' OR authors.name ILIKE 'pushkin%'")
    .order("books.id DESC").limit(20).group("books.id") 
```

这很完美。

但是，如果我想按作者姓名另外排序，我会得到包含许多作者的书籍的重复行：

```
Book.joins(:authors)
    .where("books.title ILIKE 'roman%' OR authors.name ILIKE 'pushkin%'")
     .order("books.id DESC, authors.id DESC").limit(20).group("books.id, authors.id") 
```

我得到了类似的东西：

```
id  | title  | ...
123 | Roman1 |   // this book has only 1 author
55  | roman2 |  
55  | roman2 |   // this one hase 2 authors
177 | Roman5 | ... 
etc. 
```

如何`id` 在 sql 查询（顺便说一句，Postgres 9.1）中合并这些行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:08:03.993

问题不在于顺序部分，而在于按部分分组。如果您包括作者，则意味着您在书和作者之间也有所不同。

我建议您省略 author.id，并从代码中排序列表，而不是 SQL。

# forms - 动态表单验证管理员冲突

> ID：11349299
> 
> 赞同：0
> 
> 时间：2012-07-05T17:17:42.713
> 
> 标签：forms, validation, dynamic

我正在构建一个带有管理员模块和用户模块的数据库支持的 Web 应用程序。管理员模块允许管理员修改存储在数据库中的实体的属性。用户模块根据数据库的状态提供动态生成的表单。

考虑以下用例：

1.  用户请求包含表单的网页，其中显示的表单选项代表满足特定条件的数据库实体
2.  包含动态生成的表单的请求页面加载。
3.  管理员在数据库中对表单中加载的某些实体进行更改，使其不再符合在表单中显示的条件（即停用、取消关联）
4.  用户提交表单时选择了至少一个不再满足表单中显示标准的实体。

在这种情况下，提交表单的服务器端验证应该通过还是失败？

为用户提供了一个有效的表单，但由于用户在页面上时的管理员更改，发布的表单内容相对于数据库的当前状态不再有效......

如果它应该通过，我应该在页面加载时根据数据库的状态验证数据（利用数据库历史记录或使用会话）还是过度杀伤力，相反我可以验证发布的实体是否有效但没有一定符合当前的形式标准？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:31:29.497

如果您不更改数据库属性，它会更好。更改 db 属性将导致您的 Web 应用程序出错。尝试为管理员制作一个表单，其中表单的值是从数据库中获取和显示的。这样，管理员只会修改数据库中包含的值。通过使用此方法，您的数据库属性将保持不变。并尽量不要让管理员直接访问数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T02:54:29.520

处理应该类似于“丢失更新”问题的处理方式，因为这是一个丢失更新问题。两个人同时拿起一行编辑，谁的修改被持久化了，谁的修改丢失了？第一个人的更改被保留，第二个人被通知更新失败 - 这是标准方法。在这种情况下，管理员是第一个更新的人——尽管用户可能是第一个阅读的人。因此，验证失败并通知用户数据已过时并显示当前数据。

希望这可以帮助。

# javafx-2 - 如何从javaFX项目制作jar文件

> ID：11349303
> 
> 赞同：9
> 
> 时间：2012-07-05T17:17:56.923
> 
> 标签：javafx-2

我有 javaFX 项目，我正在使用它来开发 Eclipse IDE。这是使用 Spring 的 Maven 项目。我的目标是从这个项目制作可运行的 jar 文件（dekstop 应用程序）。

如果我像任何其他 java 项目一样将我的应用程序导出到 jar 文件，那么我会收到以下错误消息：

```
C:\eclipse\projjars>java -jar EqMan.jar
Exception in thread "main" java.lang.RuntimeException: java.lang.UnsatisfiedLinkError: Can't load library: C:\eclipse\bin\glass.dll
        at com.sun.javafx.tk.quantum.QuantumToolkit.startup(QuantumToolkit.java:276)
        at com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:122)
        at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:163)
        at com.sun.javafx.application.LauncherImpl.access$000(LauncherImpl.java:47)
        at com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:115)
        at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.UnsatisfiedLinkError: Can't load library: C:\eclipse\bin\glass.dll
        at java.lang.ClassLoader.loadLibrary(Unknown Source)
        at java.lang.Runtime.load0(Unknown Source)
        at java.lang.System.load(Unknown Source)
        at com.sun.glass.utils.NativeLibLoader.loadLibraryFullPath(NativeLibLoader.java:143)
        at com.sun.glass.utils.NativeLibLoader.loadLibraryInternal(NativeLibLoader.java:56)
        at com.sun.glass.utils.NativeLibLoader.loadLibrary(NativeLibLoader.java:31)
        at com.sun.glass.ui.Application$1.run(Application.java:75)
        at java.security.AccessController.doPrivileged(Native Method)
        at com.sun.glass.ui.Application.loadNativeLibrary(Application.java:73)
        at com.sun.glass.ui.Application.loadNativeLibrary(Application.java:85)
        at com.sun.glass.ui.win.WinApplication.<clinit>(WinApplication.java:33)
        at com.sun.glass.ui.win.WinPlatformFactory.createApplication(WinPlatformFactory.java:20)
        at com.sun.glass.ui.win.WinPlatformFactory.createApplication(WinPlatformFactory.java:17)
        at com.sun.glass.ui.Application.Run(Application.java:108)
        at com.sun.javafx.tk.quantum.QuantumToolkit.startup(QuantumToolkit.java:266)
        ... 5 more 
```

如果我尝试使用 javafxpackager 制作 jar 文件，我会收到以下错误：

```
C:\eclipse\workspace\equification>javafxpackager -makeall -appclass ru.igs.ava.equification.EquificationFX -name "Equification" -width 800 -height 600
warning: [options] bootstrap class path not set in conjunction with -source 1.5
C:\eclipse\workspace\equification\src\main\java\ru\igs\ava\equification\EqConfigureRole.java:5: error: package org.springframework.context does not exist
import org.springframework.context.ApplicationContext;
C:\eclipse\workspace\equification\src\test\java\ru\igs\ava\equification\AppTest.java:11: error: cannot find symbol
    extends TestCase
            ^
//and the same error for every class, which is added to my project as maven dependency. 
```

那么，如何在不将我的项目转换为 NetBeans 项目的情况下制作可运行的 jar 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T18:59:25.583

看到您正在使用 Maven 进行构建，您还可以使用 Maven 来启动 JavaFX 打包。为此，请使用 Maven [antrun](http://maven.apache.org/plugins/maven-antrun-plugin/)插件调用[JavaFX ant 任务](http://docs.oracle.com/javafx/2/deployment/javafx_ant_task_reference.htm)，为您的应用程序生成一个带有嵌入式 JavaFX 启动器的 jar。这是执行此操作的[示例 maven pom](http://code.google.com/p/willow-browser/source/browse/pom.xml)。

* * *

您在运行 javafx 打包程序时出现的错误是由于未正确设置打包程序的类路径。如何为 javafx 打包器设置类路径以打包依赖于依赖库 jar 的应用程序的示例在此[构建脚本](http://code.google.com/p/willow-browser/source/browse/package.bat)中。

* * *

不满意的链接错误是因为您在运行应用程序时没有在相对于 jfxrt.jar 的运行时位置的 ../bin 目录中包含所需的 lib dll。您也可能没有使用 JavaFX 启动器正确打包您的应用程序（通过执行推荐的 javafx ant 任务或 javafxpackager 命令来生成您的 JavaFX 应用程序 jar）。

**更新**

对于基于 Maven 的 JavaFX 应用程序构建，您现在可以使用[Maven JavaFX 插件](https://github.com/zonski/javafx-maven-plugin/wiki)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T02:24:45.903

怀疑根本问题是由于 jfxrt.jar 和安装的 Java 版本不兼容对我有用。应用程序使用的 jfxrt.jar 与 jdk-7u71 兼容，但应用程序位于 JAVA_HOME 设置为 7.0.05 的机器上。所以我在问题机器上安装了jdk-7u71并更新了JAVA_HOME。

# php - 使用 PHP 将 MySQL 转换为 HTML 表

> ID：11349308
> 
> 赞同：1
> 
> 时间：2012-07-05T17:18:26.090
> 
> 标签：php, mysql, html-table

使用我在[此处](http://phpacademy.org/forum/viewtopic.php?t=14949)找到的示例，我正在使用下面的代码使用 PHP 创建一个表。但是，当我运行它时，我收到以下错误：

> 警告：mysql_fetch_assoc()：提供的参数不是第 94 行 /homepages/2/d333603417/htdocs/locationsconsole.php 中的有效 MySQL 结果资源

我的代码的第 94 行是`while (($row = mysql_fetch_assoc($query)) !== false) {`

有人可以告诉我，我是否错误地解释了代码，或者代码是否有错误。我只是想知道是否有人可以看看这个，并就我如何纠正这个问题提供一些指导。

```
<form name="locationsconsole" id="locationsconsole" method="post" action="locationsaction.php">
<?php
$query = "SELECT  l.*, COUNT(f.locationid) totalfinds FROM detectinglocations l LEFT JOIN finds f ON f.locationid = l.locationid WHERE l.userid = '27'  GROUP BY l.locationname";
?>

<table>
<thead>
<tr>
    <th width="62"><div align="center">Location Name</div></th>
    <th width="120"><div align="left">Location Address</div></th>
    <th width="81"><div align="center">No. Of Finds Made </div></th>                            
</tr>
</thead>
<tbody>
<?php
    while (($row = mysql_fetch_assoc($query)) !== false) {
?>
<tr>
<td><?php echo $row['locationname']; ?></td>
  <td><?php echo $row['returnedaddress']; ?></td>
    <td><?php echo $row['totalfinds']; ?></td>
    </tr>
<?php
}
?>
</tbody>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:20:07.357

您需要在获取结果之前实际*执行*[`mysql_query`](http://php.net/mysql_query)查询，使用：

```
$sql = "SELECT  l.*, COUNT(f.locationid) totalfinds FROM detectinglocations l LEFT JOIN finds f ON f.locationid = l.locationid WHERE l.userid = '27'  GROUP BY l.locationname";
$query = mysql_query($sql); 
```

但是，请注意，`mysql_`不鼓励使用这些扩展，并将在未来的 PHP 版本中删除这些扩展，因此我建议您尽可能切换到 PDO 或 MySQLi。

# ruby-on-rails - 使用 rolify 查找具有特定角色的所有用户

> ID：11349311
> 
> 赞同：15
> 
> 时间：2012-07-05T17:18:39.667
> 
> 标签：ruby-on-rails, ruby, permissions, gem, roles

使用 rolify 时如何获取具有特定角色的所有用户？我尝试了以下方法，但没有帮助：

```
User.with_role :admin 
```

我收到以下错误：

```
NoMethodError: undefined method `with_role' for #<Class:0x0000000743f9c0> 
```

找不到任何方法来做到这一点。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-12T06:16:57.417

您可以使用带有 User 类的 with_role 方法来查找在 3.1.0 版本中具有角色的所有用户。

```
User.with_role :admin 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-05T17:31:00.097

我会为它的用户询问角色

```
admins = Role.find_by_name('admin').users 
```

with_role 方法适用于特定的用户实例，而不是所有用户的类级别。如果你想实现它，你必须做这样的事情：

```
#not 100% on this code, haven't tested it, but you get the idea.
User < ActiveRecord::Base
  def self.with_role(role)
     my_role = Role.find_by_name(role)
     where(:role => my_role)
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T17:34:44.217

您是否在模型中提到了资源化以将角色放在

```
class User < ActiveRecord::Base
  resourcify
end 
```

有了这个，您可以使用 with_role 和 find_roles 类方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-09T23:01:58.583

如果你需要一个额外的“哪里”

```
@courriers = User.where.not(latitude: nil, longitude:nil ).with_role :Courrier 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-12T21:45:04.603

如果您需要使用连接，请尝试以下操作：

```
User.with_role(:admin).joins(:other_table).(other_table:{some_field: true}) 
```

# php - 对需要登录的脚本执行 Ping 请求

> ID：11349315
> 
> 赞同：0
> 
> 时间：2012-07-05T17:18:56.753
> 
> 标签：php, http, curl

虽然我会说我对 POST 和 GET 请求相当精通，但我不太精通的一件事是 HTTP 标头。

我正在尝试向一些脚本发出一些 POST 请求以尝试调试它们 - 但是，我需要登录（在请求中）才能使其工作。

实现这一目标的最佳方法是什么。该应用程序的身份验证登录是通过简单的 PHP 会话完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:36:51.287

这是一个广泛的问题，但这是我的 2 美分。

正如您的标签所暗示的那样，您已经知道 cURL，因此您可以利用它并查看`CURLOPT_COOKIEJAR`哪些可以帮助您维护 cookie。你可以用谷歌搜索一些代码示例，比如我刚刚发现的这个

[PHP, cURL post 登录到 WordPress](https://stackoverflow.com/questions/728274/php-curl-post-to-login-to-wordpress)

它只是让您对脚本的外观有所了解。

如果您可以使用应用程序代码，则还有另一种选择。您可以根据您发送的一些临时/特殊 GET 参数入侵一个假的有效用户，并且您可以在生产之外删除/禁用此代码。

# memory - 物理地址和绝对地址有什么区别？

> ID：11349318
> 
> 赞同：6
> 
> 时间：2012-07-05T17:19:11.847
> 
> 标签：memory, x86

它们似乎都明确指定了实际内存位置。物理地址和绝对地址有什么区别？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T17:28:11.253

**物理地址**（又名*真实*交易）：

[物理地址](http://en.wikipedia.org/wiki/Physical_address)是总线电路在向 RAM 传输数据或从 RAM 传输数据时使用的地址（因此称为“物理地址”）。

它的对应物是“*虚拟地址*”，即在具有虚拟内存的计算机中，虚拟地址由应用程序使用，并在实际访问 RAM 时转换为物理地址。应用程序只能看到虚拟地址。这意味着应用程序代码中的所有内存引用都指向虚拟地址。

**绝对地址**：

[绝对地址](http://en.wikipedia.org/wiki/Addressing_mode#Simple_addressing_modes_for_code)实际上是指应用程序使用的一种*寻址模式*时使用的术语。因此，在提供虚拟内存的计算机中，这个“绝对地址”*也是*一个虚拟地址——因为所有应用程序代码都只会引用虚拟地址。其他寻址模式也使用虚拟地址。当然，就像我之前写的，在访问 RAM 时，虚拟地址最终会映射到物理地址。

以下是“绝对地址”与其对应物的不同*之*处- 其他寻址模式（其中一种是“相对地址”）：

Intel `JMP`（跳转）指令可以指定“相对跳转”，其中位移是相对于下一条指令的。就像是：

“在下一条指令*之前*跳转 N 个字节” **<- 这是 PC 相对寻址。**

或者它可以与绝对地址一起使用，例如：

“跳转*到*内存中的第 N 个字节” ***<- 这是绝对寻址。***

在这两种情况下， s 引用的地址`JMP`都是虚拟地址（以对应用程序透明的方式映射到物理地址）

# math - Haskell中向量的值

> ID：11349327
> 
> 赞同：1
> 
> 时间：2012-07-05T17:19:59.990
> 
> 标签：math, haskell

我正在尝试从 Learn You a Haskell for Great Good 中学习 Haskell。我正在尝试构建一堆函数来执行各种向量操作。我正在构建一个接受两个向量的函数，并找到它们之间的角度。运算如下： A·B = AB cos θ

无论如何，现在我正在尝试编写一个函数来查找向量的“值”。例如，2i + 3j + 4k 的值是 sqrt(2^2 + 3^2 + 4^2)。

向量存储为一个列表，我正在考虑尝试这样的事情：

```
getValue (vector) = [sqrt v | v <- v + square take 1 vector] 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:38:31.847

通常的名称是“规范”，或者更准确地说是“欧几里得规范”。您将组件的平方相加并计算总和的平方根。将向量表示为组件列表，它变为

```
-- assuming the component type is Double
norm :: Vector -> Double
norm vector = sqrt $ sum [x*x | x <- vector] 
```

或者，`map`而不是列表理解，

```
norm vector = sqrt . sum $ map (\x -> x*x) vector 
```

如果你喜欢无点风格，你也可以把后者写成

```
norm :: Vector -> Double
norm = sqrt . sum . map (\x -> x*x) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T22:17:29.043

首先定义标量乘法，这本身就很有用。我用作`|*|`操作员：

```
(|*|) = (sum .) . zipWith (*) 
```

然后剩下的就很简单了：

```
norm v = sqrt $ v |*| v 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T17:38:39.207

假设您将向量表示为列表，则：

```
getValue :: (Floating a) => [a] -> a
getValue = sqrt . sum . map (\i -> i * i) 
```

或者，您可以使用列表推导来对值进行平方：

```
getValue :: (Floating a) => [a] -> a
getValue vector = sqrt . sum $ [x * x | x <- vector] 
```

# c++ - C ++文件中的最后一个字符

> ID：11349328
> 
> 赞同：2
> 
> 时间：2012-07-05T17:20:00.613
> 
> 标签：c++, file, char

我想使用以下代码获取文件中的最后一个字符

```
 FILE * f = fopen ( f_text, "r" );
 if (f )
 {
    if (fseek( f, -1, SEEK_END ) != 0 ) fclose (f);
    char last[1]; 
    fgets(last, 1, f );
    ... 
```

但只有 "" 存储在变量 last 中。错误在哪里？

unicode文件有问题吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T17:25:12.533

问题是这`fgets`将形成一个字符串。由于您只给了它一个字节来使用它，它只能返回一个空字符串，因为它需要该字节来存储`'\0'`.

正如 James Kanze 向我指出的那样，`fseek`如果您以二进制模式打开文件，则只能以您想要的便携方式使用。由于该文件现在处于二进制模式，因此不适合使用`fgets`. 所以你会`fread`改用。

```
FILE *f = fopen(f_text, "rb");
if (f == 0) throw 0;
try {
    if (fseek(f, -1, SEEK_END) != 0) throw 0;
    char last[1];
    if (fread(last, 1, 1, f) != 1) throw 0;
    //...
}
catch (...) {
    fclose(f);
    throw;
}
fclose(f); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:30:16.430

尝试使用`fgetc`而不是`fgets`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T15:33:21.507

我对您的代码进行了一些更改以打印最后一个字符。这是 test.c 作为示例：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, char *argv[])
{

    FILE * f;
    char * f_text = "temp.txt";

    f = fopen ( f_text, "r" );
    if (f )
    {

        if (fseek( f, -2, SEEK_END ) == 0 ) 
        {
            char last[2] = {0}; 
            printf("Got here.\n");
            last[0] = fgetc( f );
            printf("%s\n", last);
        }
    }

    return 0;
} 
```

这是命令行中显示的 temp.txt。

```
octopusgrabbus@steamboy:~/scratch$ cat temp.txt
This is a test.
octopusgrabbus@steamboy:~/scratch$ 
```

我将您的 fseek 更改为从末尾开始搜索两个，因此 test 将打印句点。正如另一个答案所示，我使用 fgetc 而不是 fgets，因为您正在寻找一个单独的字符，而不是一个完整的字符串。

我还将 last 更改为 last[2] 并初始化为零，因此出于演示目的，我可以将最后一个字符视为以零结尾的字符串。

# javascript - 当您尝试添加不存在的事件时，addEventListener 的行为是什么？

> ID：11349329
> 
> 赞同：1
> 
> 时间：2012-07-05T17:20:07.000
> 
> 标签：javascript, javascript-events

例如：

```
someElement.addEventListener("blahblah", alert("hello!")); 
```

当同时输入 Chrome 和 Firefox 开发控制台时，似乎会触发`alert("hello!")`一次调用，然后返回“ `undefined`”。

如果我将相同的调用嵌入到页面中，那么似乎什么也没有发生——没有触发错误，没有返回有趣的值，等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:34:24.170

它只是一个自定义事件，也可以[被触发](https://stackoverflow.com/q/2028456/1048572)。

但是，您在测试中遇到的问题是您需要将函数作为处理程序传递，而不是`undefined`调用`alert()`返回的函数。试试这些：

```
el.addEventListener("foo", alert.bind(window, "hello!")); 
```

或者

```
el.addEventListener("bar", function(e){ alert("hello "+e.name); }); 
```

# r - 识别 R 中的任意文件扩展名？

> ID：11349332
> 
> 赞同：1
> 
> 时间：2012-07-05T17:20:13.880
> 
> 标签：r

我正在 R 中编写一个函数，它将文件夹的路径名作为其参数，并返回一个向量，该向量包含该文件夹中所有扩展名为“.pvalues”的文件的名称。

```
 myFunction <- function(path) {
        # return vector that contains the names of all files
        # in this folder that end in extension ".pvalues"
    } 
```

我知道如何获取文件夹中文件的名称，如下所示：

```
 > list.files("/Users/me/myfolder/")
    [1] "myfile.txt"               
    [2] "myfile.txt.a"     
    [3] "myfile.txt.b"    
    [4] "myfile.txt.a.pvalues"
    [5] "myfile.txt.b.pvalues" 
```

有没有一种简单的方法可以识别此文件夹中以“.pvalues”结尾的所有文件？我不能假设名称将以“myfile”开头。例如，它们可以以“yourfile”开头。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T17:22:04.080

看看`?list.files`。你想要这个`pattern`论点。 `list.files(path='/Users/me/myfolder', pattern='*\\.pvalues$')`

# python - 处理CSV数据时如何忽略第一行数据？

> ID：11349333
> 
> 赞同：129
> 
> 时间：2012-07-05T17:20:17.453
> 
> 标签：python, csv

我要求 Python 从一列 CSV 数据中打印最小数字，但顶行是列号，我不希望 Python 将顶行考虑在内。如何确保 Python 忽略第一行？

这是到目前为止的代码：

```
import csv

with open('all16.csv', 'rb') as inf:
    incsv = csv.reader(inf)
    column = 1                
    datatype = float          
    data = (datatype(column) for row in incsv)   
    least_value = min(data)

print least_value 
```

你能解释一下你在做什么，而不仅仅是给出代码吗？我对 Python 非常陌生，并想确保我了解所有内容。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-07-05T18:11:23.543

您可以使用`csv`模块类的实例来推断 CSV 文件的格式，并检测是否存在标题行以及仅在必要时跳过第一行[**`Sniffer`**](https://docs.python.org/3/library/csv.html#csv.Sniffer)的内置函数：`next()`

```
import csv

with open('all16.csv', 'r', newline='') as file:
    has_header = csv.Sniffer().has_header(file.read(1024))
    file.seek(0)  # Rewind.
    reader = csv.reader(file)
    if has_header:
        next(reader)  # Skip header row.
    column = 1
    datatype = float
    data = (datatype(row[column]) for row in reader)
    least_value = min(data)

print(least_value) 
```

由于`datatype`和`column`在您的示例中是硬编码的，因此处理这样的内容会稍微快一些`row`：

```
 data = (float(row[1]) for row in reader) 
```

**注意：**以上代码适用于 Python 3.x。对于 Python 2.x，使用以下行打开文件，而不是显示的内容：

```
with open('all16.csv', 'rb') as file: 
```

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-07-05T18:15:26.130

要跳过第一行，只需调用：

```
next(inf) 
```

Python 中的文件是行上的迭代器。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2018-03-31T11:02:29.030

借用[python cookbook](https://rads.stackoverflow.com/amzn/click/com/B00DQV4GGY)，
更简洁的模板代码可能如下所示：

```
import csv
with open('stocks.csv') as f:
    f_csv = csv.reader(f) 
    headers = next(f_csv) 
    for row in f_csv:
        # Process row ... 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2014-12-18T23:16:50.123

在一个类似的用例中，我不得不在带有我的实际列名的行之前跳过烦人的行。这个解决方案效果很好。先读取文件，然后将列表传递给`csv.DictReader`.

```
with open('all16.csv') as tmp:
    # Skip first line (if any)
    next(tmp, None)

    # {line_num: row}
    data = dict(enumerate(csv.DictReader(tmp))) 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-07-05T17:26:10.380

您通常会使用`next(incsv)`which 将迭代器前进一行，因此您跳过标题。另一个（假设你想跳过 30 行）是：

```
from itertools import islice
for row in islice(incsv, 30, None):
    # process 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-07-05T17:53:17.560

使用 csv.DictReader 而不是 csv.Reader。如果省略 fieldnames 参数，则 csvfile 第一行中的值将用作字段名称。然后，您将能够使用 row["1"] 等访问字段值

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-07-26T04:49:38.360

**Python 2.x**

[**`csvreader.next()`**](https://docs.python.org/2/library/csv.html#reader-objects)

> 将 reader 的可迭代对象的下一行作为列表返回，根据当前方言进行解析。

```
csv_data = csv.reader(open('sample.csv'))
csv_data.next() # skip first row
for row in csv_data:
    print(row) # should print second row 
```

* * *

**Python 3.x**

[**`csvreader.__next__()`**](https://docs.python.org/3/library/csv.html#reader-objects)

> 返回 reader 的可迭代对象的下一行作为列表（如果对象是从 reader() 返回的）或 dict（如果是 DictReader 实例），根据当前方言进行解析。通常你应该把它称为下一个（读者）。

```
csv_data = csv.reader(open('sample.csv'))
csv_data.__next__() # skip first row
for row in csv_data:
    print(row) # should print second row 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-10-09T18:21:45.380

[Python 3 CSV 模块](https://docs.python.org/3/library/csv.html#csv.Sniffer)的文档提供了这个示例：

```
with open('example.csv', newline='') as csvfile:
    dialect = csv.Sniffer().sniff(csvfile.read(1024))
    csvfile.seek(0)
    reader = csv.reader(csvfile, dialect)
    # ... process CSV file contents here ... 
```

`Sniffer`它将尝试自动检测有关 CSV 文件的许多内容。您需要显式调用其`has_header()`方法来确定文件是否有标题行。如果是，则在迭代 CSV 行时跳过第一行。你可以这样做：

```
if sniffer.has_header():
    for header_row in reader:
        break
for data_row in reader:
    # do something with the row 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-08-28T15:43:50.953

新的“pandas”包可能比“csv”更相关。下面的代码将读取一个 CSV 文件，默认情况下将第一行解释为列标题并找到列之间的最小值。

```
import pandas as pd

data = pd.read_csv('all16.csv')
data.min() 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-05-01T18:06:14.107

因为这与我正在做的事情有关，所以我会在这里分享。

如果我们不确定是否有标头并且您也不想导入嗅探器和其他东西怎么办？

如果您的任务是基本的，例如打印或附加到列表或数组，您可以只使用 if 语句：

```
# Let's say there's 4 columns
with open('file.csv') as csvfile:
     csvreader = csv.reader(csvfile)
# read first line
     first_line = next(csvreader)
# My headers were just text. You can use any suitable conditional here
     if len(first_line) == 4:
          array.append(first_line)
# Now we'll just iterate over everything else as usual:
     for row in csvreader:
          array.append(row) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-12-01T10:18:06.853

好吧，我的[迷你包装库](http://pyexcel.readthedocs.org/en/v0.0.9/index.html)也可以完成这项工作。

```
>>> import pyexcel as pe
>>> data = pe.load('all16.csv', name_columns_by_row=0)
>>> min(data.column[1]) 
```

同时，如果您知道标题列索引一是什么，例如“列 1”，您可以这样做：

```
>>> min(data.column["Column 1"]) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-03-27T11:21:57.337

我会将 csvreader 转换为列表，然后弹出第一个元素

```
import csv        

with open(fileName, 'r') as csvfile:
        csvreader = csv.reader(csvfile)
        data = list(csvreader)               # Convert to list
        data.pop(0)                          # Removes the first row

        for row in data:
            print(row) 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-03-12T12:44:08.670

对我来说，最简单的方法是使用范围。

```
import csv

with open('files/filename.csv') as I:
    reader = csv.reader(I)
    fulllist = list(reader)

# Starting with data skipping header
for item in range(1, len(fulllist)): 
    # Print each row using "item" as the index value
    print (fulllist[item]) 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-09-16T01:34:57.780

这可能是一个非常古老的问题，但是对于 pandas，我们有一个非常简单的解决方案

```
import pandas as pd

data=pd.read_csv('all16.csv',skiprows=1)
data['column'].min() 
```

使用 skiprows=1 我们可以跳过第一行，然后我们可以使用 data['column'].min() 找到最小值

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-11-01T00:02:39.093

只需添加**[1:]**

下面的例子：

```
data = pd.read_csv("/Users/xyz/Desktop/xyxData/xyz.csv", sep=',', header=None)**[1:]** 
```

在 iPython 中对我有用

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-10-26T09:32:51.130

Python 3.X

处理 UTF8 BOM + HEADER

令人沮丧的是，`csv`模块无法轻松获取标头，UTF-8 BOM（文件中的第一个字符）也存在错误。这仅适用于我使用`csv`模块：

```
import csv

def read_csv(self, csv_path, delimiter):
    with open(csv_path, newline='', encoding='utf-8') as f:
        # https://bugs.python.org/issue7185
        # Remove UTF8 BOM.
        txt = f.read()[1:]

    # Remove header line.
    header = txt.splitlines()[:1]
    lines = txt.splitlines()[1:]

    # Convert to list.
    csv_rows = list(csv.reader(lines, delimiter=delimiter))

    for row in csv_rows:
        value = row[INDEX_HERE] 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-09-13T10:26:15.487

我会用*tail*去掉不需要的第一行：

```
tail -n +2 $INFIL | whatever_script.py 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-12-21T11:40:04.287

简单的解决方案是使用 csv.DictReader()

```
import csv

def read_csv(file): with open(file, 'r') as file:
    reader = csv.DictReader(file)
    for row in reader:
        print(row["column_name"])  # Replace the name of column header. 
```

# pdo - PDO 查询以返回结果的数字数组

> ID：11349339
> 
> 赞同：0
> 
> 时间：2012-07-05T17:20:31.567
> 
> 标签：pdo

我有以下代码：

```
$result = $pdo->query("SELECT * FROM t_user");
print_r($result); 
```

print_r 的结果是一个关联的值数组。我希望它是一个数值数组。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:37:27.187

我希望：

```
$numeric_array = $result->fetchAll(PDO::FETCH_NUM); 
```

应该给你你正在寻找的数值数组。

# linux - 使用 cron 作业“访问页面”

> ID：11349343
> 
> 赞同：0
> 
> 时间：2012-07-05T17:21:00.853
> 
> 标签：linux, apache, cron, cron-task

所以我有这个 php 脚本，每次有人访问它的页面时都会发送一封电子邮件（打开浏览器，输入 www.example.com/email.php 并点击回车）。我正在尝试找到一种方法，通过共享主机上的 cron 作业定期触发此操作。我可以配置 cron 来运行这个命令： curl --dump [http://www.example.com/email.php](http://www.example.com/email.php)但它不发送电子邮件。

我已经确认 php 脚本有效（通过手动访问它）并且 cron 作业运行（我已在主机的控制面板上将其设置为“每次 cron 运行时发送电子邮件”），我只是无法让他们一起工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:25:45.610

只要您的 Web 脚本只需打开页面即可工作（无需用户交互），您就可以使用 wget 来模仿请求：

```
wget -O /tmp/temp_file.html http://www.example.com/email.php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:25:46.903

尝试使用 php 运行“页面”（脚本），以便它直接解释文件。

crontab 条目：
`* * * * * php your/script/location/email.php >/dev/null 2>&1`

# c++ - 外部未命名结构对象定义

> ID：11349345
> 
> 赞同：4
> 
> 时间：2012-07-05T17:21:03.363
> 
> 标签：c++, struct, global-variables, extern

我有一个“未命名结构”类型的全局对象，我正在尝试定义它。我不想用这种无用的类型污染我的全局命名空间（它只会使用一次）。

**全球.h**

```
extern struct {

    int x;

} A; 
```

有没有正确的方法来定义这样的对象？
我正在尝试这个：

**全球.cpp**

```
struct {

    int x;

} A = { 0 }; 
```

但是 VS2012 抛出“错误 C2371：'A'：重新定义；不同的基本类型”。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:30:24.700

一种可能的解决方案：创建另一个*不包含*Global.h 的文件 Global_A.cpp，并在那里定义`A`。根据等效定义规则，只要匿名结构定义是等效的，这将是有效的。

这仍然是一个坏主意，大多数编译器都会警告它，例如 (gcc): *warning: non-local variable `<anonymous struct> A' uses anonymous type*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:30:02.937

没有办法仅仅因为它容易出错：在未来的某个时候，有人（甚至可能是你）可能想要修改这个结构的定义，他可能会相应地忘记在头文件和源文件中这样做。所以你必须为这个结构发明一个名字，并在源文件中使用它的名字，并将它的定义留给标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T19:52:17.847

我不知道这是否对你有帮助，这是我的第一篇文章......所以放轻松。

我刚刚遇到了这个问题，我所做的就是添加了一个函数，该函数将结构操作到包含匿名结构的文件中。这样我就可以从项目中的任何文件中调用该函数，并为我操纵结构中的值。

这是一个例子：

header.c 有这个匿名结构：

```
 struct 
   {    
       char  line1[80];
       char  line2[80];
       char  line3[80];
   } header; 
```

我想在“interface.c”中操作这些值，因为我正在另一个文件中创建命令行界面。我的第一直觉是使用 extern，但在 header.c 中添加以下函数似乎同样好或更好（有些人在可以避免的情况下不鼓励使用 extern）。

```
void changeHeaders(char *one, char *two, char *three);
void changeHeaders(char *one, char *two, char *three)
{

    strcpy(header.line1, one);
    printf("\nHeader 1: %s", header.line1);
    strcpy(header.line2, two);
    printf("\nHeader 2: %s", header.line2);
    strcpy(header.line3, three);
    printf("\nHeader 3: %s", header.line3);

} 
```

现在只要我包含该函数的原型，我就可以使用该函数从任何文件中操作这些结构变量。希望对某人有所帮助。

# nhibernate - 在 Wcf 服务中使用 Windsor NHibernateFacility 和自定义服务行为来创建事务而不是事务属性

> ID：11349347
> 
> 赞同：1
> 
> 时间：2012-07-05T17:21:43.003
> 
> 标签：nhibernate, transactions, wcffacility, windsor-3.0, windsor-nhfacility

我正在尝试第一次在 Wcf 服务中使用 Windsor NHibernate Facility 并替换当前手动注册 NHibernate，以便可以在所有服务中使用一致的方法。

## 目前的工作方法

以前我一直在手动注册 NHibernate 组件。

```
container.Register(
    Component.For<ISessionFactory>().UsingFactoryMethod(() => CreateMappings("SomeConnectionString").BuildSessionFactory()));
container.Register(
    Component.For<ISession>().LifeStyle.PerWcfOperation().UsingFactoryMethod(OpenSession)); 
```

然后，我使用自定义服务行为为每个操作创建和完成事务范围。

```
public class TransactionBehavior : IServiceBehavior
{
    public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
        foreach (var cdb in serviceHostBase.ChannelDispatchers)
        {
            var channelDispatcher = cdb as ChannelDispatcher;

            if (null == channelDispatcher) continue;

            foreach (var endpointDispatcher in channelDispatcher.Endpoints)
            {
                foreach (var dispatchOperation in endpointDispatcher.DispatchRuntime.Operations)
                {
                    dispatchOperation.CallContextInitializers.Add(new TransactionContext());
                }
            }
        }
    }

    public void AddBindingParameters(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase, Collection<ServiceEndpoint> endpoints, BindingParameterCollection bindingParameters) { }

    public void Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase) { }
}

public class TransactionContext : ICallContextInitializer
{
    private TransactionScope transaction;

    public Object BeforeInvoke(InstanceContext instanceContext, IClientChannel channel, Message message)
    {
        transaction = new TransactionScope();
        return null;
    }

    public void AfterInvoke(Object correlationState)
    {
        if(transaction != null)
        {
        transaction.Complete();
        transaction.Dispose();
        }
    }
} 
```

## NHibernate 设施的集成

我已经下载了[0.3.1.2001 工件](https://github.com/haf/Castle.Facilities.NHibernate/downloads)并使用下面的资源尝试插入该工具并移除任何手动连接到 NHibernate 的线路。但是我不想用`Transactional`and`Transaction`属性来装饰服务和方法。以下是我目前的线材。

```
container.Register(Component.For<INHibernateInstaller>().ImplementedBy<MyNHibernateInstaller>();
container.AddFacility<AutoTxFacility>();
container.AddFacility<NHibernateFacility>();

public class MyNHibernateInstaller : INHibernateInstaller
{
    public Maybe<IInterceptor> Interceptor { get { return Maybe.None<IInterceptor>(); } }

    public bool IsDefault { get { return true; } }

    public string SessionFactoryKey { get { return "sf.default"; } }

    public FluentConfiguration BuildFluent()
    {
        return Fluently
            .Configure()
            .Database(MsSqlConfiguration
                .MsSql2005.ConnectionString("SomeConnectionString") )
                .Mappings( m => m.FluentMappings
                    .AddFromAssemblyOf<TypeFromEntityAssembly>() );
    }

    public void Registered(ISessionFactory factory)
    {
    }
} 
```

每当我调用服务端点之一时，服务都会失败，并出现以下异常：

> 尝试为解析类型“Juice.iCheque.eMoneySystem.Settlement.ISettlementService”实例化模型“NHibernate.ISession”时，上下文中没有事务。如果您已验证您的调用堆栈包含具有 [Transaction] 属性的方法，那么还要确保您已注册 AutoTx Facility。

问题是我如何在`NHibernateFacility`我当前的实现中使用而不使用`Transaction`属性。

# 资源

[http://richarddingwall.name/2010/08/17/one-nhibernate-session-per-wcf-operation-the-easy-way/](http://richarddingwall.name/2010/08/17/one-nhibernate-session-per-wcf-operation-the-easy-way/)

[https://github.com/haf/Castle.Facilities.NHibernate/wiki/NHibernate-Facility---快速入门](https://github.com/haf/Castle.Facilities.NHibernate/wiki/NHibernate-Facility---Quick-Start)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:31:48.767

首先，您应该知道 Henrik Feldt 的 Castle Transactions 和 AutoTx Facility 解释需要使用 [Transaction] 属性（正如我前段时间在 Castle Users 邮件列表中与 Mr.Feldt 讨论过的那样）。

如果您想从服务类中删除 [Transaction] 属性（以实现 POCO），但在每个呼叫会话场景中继续使用 NH 和 WCF，您应该：

1.  保留您的 IServiceBehaviour 实现，但在构造函数中注入 IDispatchMessageInspector 接口，并将其分配给类全局 IDispatchMessageInspector 属性。

2.  在 serviceHostBase 中的每个 ChannelDispatcher 的 ApplyDispatchBehavior 方法中，循环端点并添加注入的 DispatchMessageInspector 实例：

    ```
    foreach (ChannelDispatcher channelDispatcher in serviceHostBase.ChannelDispatchers)
    {
        foreach (var endpoint in channelDispatcher.Endpoints)
        {
            endpoint.DispatchRuntime.MessageInspectors.Add(this.dispatchMessageInspector);
        }
    } 
    ```

3.  创建一个实现 IDispatchMessageInspector 的类（将在上一项中注入的类）。让我们称这个类为 NHWcfIntegrationMessageInspector。

4.  将 ISessionFactory 注入 NHWcfIntegrationMessageInspector，并将其设置为本地属性。

5.  在 AfterRecieveRequest 方法中使用 ISessionFactory.Open() 创建一个 NH 会话对象，开始事务并将该 ISession 绑定到 CurrentSessionContext

6.  在 BeforeSendReply 方法中，从 CurrentSessionContext 中取消绑定注入的 SessionFactory，这将为您提供实际的会话对象。从会话的 Transaction 属性检查事务是否处于活动状态，如果处于活动状态则 Commit() 它。然后 Dispose() 会话。

7.  不要使用 INHibernateInstaller。而是使用 IWindsorInstaller 并使用 MyHibernateInstaller 实现它。在注册块中，将您的 IServiceBehavior 实现和新的 IDispatchMessageInspector 实现注册到容器。

8.  还要在同一安装程序中注册 ISessionFactory 并将 FNH 配置方法作为工厂方法提供，但提供已构建的 ISessionFactory。但是在从 fluentconfiguration 对象调用构建 ISessionFactory 之前的 FNH 配置中：

    `fluentConfiguration.CurrentSessionContext<WcfOperationSessionContext>();`

9.  达达！

完成这些步骤后，您不必再持有对 Haf 库的引用。其纯粹的 Castle.Core、Castle.Windsor、NH/FNH。

任何问题？;)

（抱歉没有发布完整的代码，只是描述，我有合同义务）

# maven - Maven 说我在多模块项目中有一个循环引用，但不知道为什么

> ID：11349354
> 
> 赞同：9
> 
> 时间：2012-07-05T17:22:14.487
> 
> 标签：maven, multi-module, cyclic-reference

我有一个看起来像这样的多模块项目：

*   模块1
    *   pom.xml
*   模块2
    *   pom.xml
*   pom.xml

module2 中的 pom.xml 依赖于 module1。

当我运行 mvn clean compile 时，出现以下错误：

> 反应堆中的项目包含循环引用。

这是我在 module1 中的依赖项：

```
<dependencies>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.14</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.6.1</version>
    </dependency>
    <dependency>
        <groupId>com.jcraft</groupId>
        <artifactId>jsch</artifactId>
        <version>0.1.48</version>
    </dependency>
</dependencies> 
```

我不明白为什么它说有一个循环引用。即使我在 module1 上执行 mvn dependency:tree 我得到以下信息：

```
[INFO] +- log4j:log4j:jar:1.2.14:compile
[INFO] +- org.slf4j:slf4j-log4j12:jar:1.6.1:compile
[INFO] |  \- org.slf4j:slf4j-api:jar:1.6.1:compile
[INFO] +- com.jcraft:jsch:jar:0.1.48:compile
[INFO] \- junit:junit:jar:4.8.2:test 
```

在我看来，module1 中没有对 module2 的任何引用。那么循环引用从何而来？

编辑：这是调试日志：

```
+ Error stacktraces are turned on.
Apache Maven 2.2.1 (r801777; 2009-08-06 15:16:01-0400)
Java version: 1.6.0_31
Default locale: en_US, platform encoding: Cp1252
OS name: "windows 7" version: "6.1" arch: "amd64" Family: "windows"
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] The projects in the reactor contain a cyclic reference: Edge between 'Vertex{label='com.myorg:module2'}' and 'Vertex{label='com.myorg:module1'}' introduces to cycle in the graph com.myorg:module1 --> com.myorg:module2 --> com.myorg:module1
[INFO] ------------------------------------------------------------------------
[DEBUG] Trace
org.apache.maven.BuildFailureException: The projects in the reactor contain a cyclic reference: Edge between 'Vertex{label='com.myorg:module2'}' and 'Vertex{label='com.myorg:module1'}' introduces to cycle in the graph com.myorg:module1 --> com.myorg:module2 --> com.myorg:module1
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:295)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: hidden.org.codehaus.plexus.util.dag.CycleDetectedException: Edge between 'Vertex{label='com.myorg:module2'}' and 'Vertex{label='com.myorg:module1'}' introduces to cycle in the graph com.myorg:module1 --> com.myorg:module2 --> com.myorg:module1
at hidden.org.codehaus.plexus.util.dag.DAG.addEdge(DAG.java:143)
at hidden.org.codehaus.plexus.util.dag.DAG.addEdge(DAG.java:123)
at org.apache.maven.project.ProjectSorter.<init>(ProjectSorter.java:118)
at org.apache.maven.execution.ReactorManager.<init>(ReactorManager.java:99)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:288)
... 11 more
[INFO] ------------------------------------------------------------------------
[INFO] Total time: < 1 second
[INFO] Finished at: Thu Jul 05 17:21:21 EDT 2012    
[INFO] Final Memory: 3M/244M
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-05T21:43:58.437

啊! 这是一个误导性错误。

问题不在于 module1 和 module2 都相互依赖。问题是 module2 是一个 Maven 插件，在我的根 pom.xml 中我在该部分中有插件。我从构建中删除了该插件并开始工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-05-30T15:34:35.063

在这种情况下发生在我身上。

module_child_X 在 module_root pom.xml 中指定了 2 次：

**- 作为一个模块**

> ```
> (pom.xml of the root module)
> <dependency>
>     <groupId>module_root</groupId>
>     <artifactId>module_child_X</artifactId>
>     <version>0.0.1-SNAPSHOT</version>
>     <type>jar</type>
> </dependency> 
> ```

**- 作为依赖**

> ```
> (pom.xml of the root module)
> <modules>
>     <module>module_child_X</module>
>     ...
> </modules> 
> ```

**解决方案？**

删除了 module_child_X 作为依赖项。它已经被指定为一个模块。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-09T21:08:48.003

我做的几乎一样，我使用 IDEA。

我有一个项目A，它依赖于一个模块B。在A的pom文件中，B被声明为依赖项。还行吧。在 B 的 pom 文件中，A 被声明为其父级。我删除了此信息，并按照错误消息中的要求在其 pom 文件中添加了 B 的版本号。

现在可以了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T07:07:20.100

我在多模块耳朵项目中遇到了完全相同的问题。ejb pom 依赖于 web 模块（编译范围），而 web pom 依赖于 ejb 模块。一旦我删除了 ejb 对 web 模块的 pom 依赖，项目就构建好了。毕竟，为了避免循环引用，模块内依赖关系必须是单向的，这是有道理的。

# sql - 在 SQL 查询中，何时或为什么等于不等于不等于的对立面？

> ID：11349355
> 
> 赞同：0
> 
> 时间：2012-07-05T17:22:17.060
> 
> 标签：sql, oracle, toad

在包含五条 Toppings 值为“Chocolate”的记录的表中，其中两条在 MaraschinoCherry 列中的值为“Yes”，另外三个在该列中不包含任何内容（不是“No” - 无/空白）。

此查询工作正常：

```
select definition from desserts 
where (Toppings = 'Chocolate') and 
      (MaraschinoCherry <> 'Yes') 
order by id 
```

...返回预期的三个记录；但这一个根本没有返回任何内容，而不是我期望的两条记录：

```
select definition from desserts 
where (Toppings = 'Chocolate') and 
      (MaraschinoCherry = 'Yes') 
order by id 
```

？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:53:29.867

你的问题的答案很简单。任何与 NULL 值的比较，除了两个例外，都会产生 NULL 作为结果。所以，

```
MaraschinoCherry = 'Yes' 
```

和

```
MaraschinoCherry <> 'Yes' 
```

*当 MaraschinoCherry 具有 NULL 值时，*两者都返回 NULL。*NULL 比较被视为与 FALSE 相同。*

 *两个例外是：IS NULL 和 IS NOT NULL。请注意，“= NULL”总是返回 NULL，它被解释为 FALSE。

解决此问题的正常方法是使用 COALESCE：

```
COALESCE(MaraschinoCherry, 'NO') = 'Yes' 
```

（函数 ISNULL() 是等价的，但 COALESCE 允许更多参数并且是标准 SQL。）

还有其他方法可以解决此问题，例如在定义表时指定列的默认值，添加与 NULL 的显式比较，将列声明为“NOT NULL”，或者在某些数据库中通过覆盖NULL 在比较中的行为违反了 SQL 标准（强烈不推荐！）。*

# mongodb - 如何在 mongoid 和 ruby 中模仿“SELECT _id”？

> ID：11349356
> 
> 赞同：1
> 
> 时间：2012-07-05T17:22:19.510
> 
> 标签：mongodb, mongoid

目前我正在做以下事情：

```
 responses = Response.where(user_id: current_user.uid)
    qids = []
    responses.each { |r| qids << r._id}
    return qids 
```

有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:49:13.303

用于`.only()`检索较少的数据。

```
quids = Response.only(:_id).where(user_id: current_user.uid).map(&:_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:42:47.363

```
Response.where(user_id: current_user.uid).map { |r| r._id } 
```

这有点惯用语。

就 mongoid 而言，mongoid 提供的唯一“映射”类型功能是自定义 map-reduce 过滤器。您可以查看[文档](http://mongoid.org/en/mongoid/docs/querying.html#map_reduce)。

在这种情况下，编写这样的过滤器不会对您有利。您正在加载整个数据集（延迟加载没有帮助）并且您没有减少任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T11:12:46.747

## 直截了当更好地解决这个问题

如果您想获取 id 或结果集中唯一的东西，那么使用 distinct 方法在功能上是等效的。这样您就可以保存映射操作并且它似乎要快得多（底部解释了测试以及为什么您应该采取一些预防措施）。

```
Response.where(user_id: current_user.uid).distinct(:_id) 
```

因此，仅当您想要获得非唯一的东西并且出于某种原因想要获得重复的结果时才使用它。即，如果您的回答可以被喜欢，并且如果您想获得所有喜欢的数组（假设您想计算一些关于喜欢的统计数据）：

```
Response.where(user_id: current_user.uid).map { |r| r.likes } 
```

* * *

## 测试...

这是一些随机测试，但为了获得更值得信赖的结果，应该使用大型数据库提交测试，而不是重复操作。我的意思是，据我所知，可以有任何类型的优化来重复相同的查询（显然地图不能有任何这样的优化）。

```
Benchmark.measure { 1000.times { Organization.where(:event_labels.ne =[]).map(&:_id) } }
=>   6.320000   0.290000   6.610000 (  6.871498)
Benchmark.measure { 1000.times { Organization.where(:event_labels.ne => []).only(:_id).map(&:_id) } }
 =>   5.490000   0.140000   5.630000 (  5.981122)
Benchmark.measure { 1000.times { Organization.where(:event_labels.ne => []).distinct(:_id) } }
=>   0.570000   0.020000   0.590000 (  0.773239)
Benchmark.measure { 1000.times { Organization.where(:event_labels.ne => []).only(:_id) } }
=>   0.140000   0.000000   0.140000 (  0.141278)
Benchmark.measure { 1000.times { Organization.where(:event_labels.ne => []) } }
=>   0.070000   0.000000   0.070000 (  0.069482) 
```

不`map`使用`only`需要更长的时间，因此使用`only`是有益的。尽管如果您根本不使用它似乎实际上会稍微损害性能`map`，但是拥有较少的数据似乎会使`map`运行速度更快一些。无论如何，根据这个测试，它在所有指标（用户、系统、总数、真实）上似乎比使用and组合`distinct`快大约 10 倍，尽管它比不使用.`only``map``only``map`

# c - 需要一种将大块数据写入 C 文件的快速方法

> ID：11349357
> 
> 赞同：2
> 
> 时间：2012-07-05T17:22:21.927
> 
> 标签：c, file

在将大块数据写入文件时，我一点也不擅长。我有一个模拟，它有这样的结构

```
typedef struct
{
   int age;
   float height;
   float weight;
   int friends [ 250000 ];
} Person; 
```

而我可以拥有多达25万人，每个人有25万朋友（一个集团）。显然，这是大量的数据。如果我想保存每个结构以便以后加载它们，C 中最有效的方法是什么？这是我到目前为止所考虑的

1.  我不想用 250,000 组数据创建一个巨大的字符串，然后再做一个`write`，因为这会占用大量内存
2.  我也不想创建 250,000 个不同的文件，因为这样做可能会很慢。
3.  根据索引附加文件（即第 1 个人，然后第 2 个人...），但这也可能很慢。
4.  将数据保存为二进制（这样更有效吗？）

* * *

**编辑**我正在寻找有效的使用方法`fwrite ()`，即收集所有数据并写入单个文件是否更快，或者是否创建多个文件并避免事先收集所有数据的开销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:28:15.777

你可以遍历这些人，只存储年龄、身高和体重成员（3 个 fwrite），然后是一个friend_count，然后遍历这些朋友并一一写入。所有这一切都与 fwrite。您不需要关心优化 I/O，因为 C 库会为您缓冲并在需要时进行大量“写入”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:27:41.707

我认为您正在尝试 [部分] 重新发明 RDBMS（数据库）。重新发明通常是一个坏主意。考虑将您的数据存储在免费的数据库系统（例如 Postgres）中。它还有其他好处——您将能够在不编写 C 代码的情况下查询您的数据。
如果数据库听起来有点过头，请使用更简单的基于文件的数据库存储库，例如 BerkleyDB 或 SQLite。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T17:39:18.670

我不是很清楚你的结构。

你有一个 Person 结构数组，而 friends[] 包含其他 Persons 数组的索引？

最好的方法是区分一个人和他的朋友。

这样你就有了一个固定大小的 Person，并且可以将所有 Person 存储在一个文件中，并快速读回 Person 12345 的数据 - 它位于文件开头的 filepos 12345*sizeof(Person) 处。

朋友数组可以通过一个保存在内存中

```
int *Friends[MAXFRIENDS] 
```

数组——你需要 MAXFRIENDS*sizeof(int *) 更多字节的内存，对于 250.000 个朋友，在 64 位系统上应该是 2 兆字节。小变化。每个指针都保存该人的friend[] 数组。

然后 Person 的朋友进入目录中的文件，例如 /dd/cc/aabbccdd，其中 aabbccdd 由 sprintf("%08x", PersonIndex) 获得。使用 dd/cc 会导致更平衡的树。要编写朋友文件，只需指向 Friends[PersonIndex] 并根据需要编写尽可能多的朋友索引（我会将 FriendsNumber 存储在 Person 结构中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T18:08:14.107

我会看一个像[HDF5](http://www.hdfgroup.org/HDF5/)这样的库，这样您不仅可以在这台机器上读回文件，还可以将文件提供给其他人，并为您解决平台可移植性问题。

# maven - Maven flex 项目使用来自具有新 artifactId 的单独模块的源目录

> ID：11349359
> 
> 赞同：0
> 
> 时间：2012-07-05T17:22:35.720
> 
> 标签：maven, flexmojos, flex-mojos

发现很难围绕这个问题轻松表达自己，所以最好从上下文部分开始：

语境：

我有一个基于 Flex 的应用程序（一个相当复杂的系统），可以使用“条件编译”将其编译成各种用例，例如：

编译一 = portalProjectUserOne 编译二 = portalProjectUserTwo

使用条件编译是否是一个合理的想法是一个完全不同的论点，因此假设一个人被迫走这条路，然后我决定为我想要的每个编译创建一个项目：

portalProjectUserOne -branches -tags -trunk -src -pom

portalProjectUserTwo -branches -tags -trunk -src -{需要使用项目源}

因为我不想打破以往严格的编程法则，也不想重复任何东西，所以我需要一种访问项目 ONE 源代码并使用源代码进行 CUSTOM 编译的方法。

我尝试过的事情：

1.  我尝试使用相对路径 (../../portalProjectUserOne/trunk/src/etc...) 并成功编译，但是当需要将最终产品发布到 nexus 存储库时，它在联系项目时遇到了一些问题结构，那感觉真的有点脏。
2.  我尝试使用“maven-dependency-plugin”来尝试复制第一个项目的源代码，这可能是我纯粹缺乏理解，但我无法理解如何在一个项目中生成类和从另一个访问它们。

这是我关于 stackoverflow 的第一个问题，如果我的内容过于广泛，请告诉我，如果需要，我将更新更广泛的示例。

感谢您收听/阅读/成为一名编码员。

# python - Django 如何知道查询集是否被缓存？使用 johnnycache

> ID：11349361
> 
> 赞同：2
> 
> 时间：2012-07-05T17:22:43.967
> 
> 标签：python, django, caching, memcached, django-queryset

我刚刚发现了 johnnycache，它看起来很棒。我 pip 安装了它，并将几行代码添加到我的设置中，就像文档说明的那样。

```
CACHES = {
    'default': {
        'BACKEND': 'johnny.backends.memcached.MemcachedCache',
        'LOCATION': '127.0.0.1:8000',
        'JOHNNY_CACHE': True,
    }
}
JOHNNY_MIDDLEWARE_KEY_PREFIX = 'jc_efl' 
```

和中间件设置..

```
MIDDLEWARE_CLASSES = (
    'johnny.middleware.LocalStoreClearMiddleware',
    'johnny.middleware.QueryCacheMiddleware',
... } 
```

我在浏览器中加载了我的网站，它运行良好，加载时间没有任何明显差异。

我想知道如何知道我检索到的查询是否实际上来自缓存。

我在 Google 和 SO 上查找了很多关于视图/模板缓存的内容，他们使用注释时间戳方法来完成它。但我相信，这不适用于这里。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:15:37.553

我只是在寻找同样的东西。我认为他们打算让你使用信号

`johnny.cache.signals.qc_hit`- 缓存命中后触发

和

`johnny.cache.signals.qc_miss`- 缓存未命中后触发

来自[约翰尼缓存文档](http://packages.python.org/johnny-cache/queryset_cache.html#signals)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T13:39:19.877

您还可以使用[Django 调试工具栏](https://github.com/django-debug-toolbar/django-debug-toolbar)(DDT) 查看每个请求运行的查询。如果 DDT 显示查询正在运行，则意味着它们是缓存未命中。

# python - Pygame（Python）缩放变换慢

> ID：11349367
> 
> 赞同：2
> 
> 时间：2012-07-05T17:23:04.487
> 
> 标签：python, pygame, scaling, frame-rate

我正在用 python 编写一个简单的程序，它通过串行端口接收数据并更新屏幕。

因为我希望这个程序在它运行的任何计算机上看起来都一样，而且它需要全屏，所以我想我想在一个*640、480*的小窗口中绘制所有内容，然后将其缩放到一个全屏窗口我更新框架的时间。

这使我可以将文本等的所有偏移量保持相同。事实证明这真的很慢。

以下是代码的重要部分：

```
window = pygame.display.set_mode((1920, 1080),pygame.FULLSCREEN)    
screenPrescaled=pygame.Surface((640,480))

clock=pygame.time.Clock()

while iterations<400:
#Blit all the stuff to the prescaled surface here
    screenPostscaled=pygame.transform.scale(screenPrescaled,(1920, 1080))
    window.blit(screenPostscaled,(0,0))
    pygame.display.flip() 
    iterations+=1
    clock.tick(40) 
```

这比`40fps`.

屏幕上的所有内容都是文本或线条，没有加载任何图像。我怀疑我在做一些愚蠢的事情。

我知道我只能更新*“脏矩形”*，但我想知道我是否遗漏了一些更基本的东西。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:50:31.530

您可以使用 window 作为[目标表面](http://www.pygame.org/docs/ref/transform.html#pygame.transform.scale)来保存一个 blit ：

```
pygame.transform.scale(screenPrescaled, (1920, 1080), window) 
```

如果它仍然太慢，您应该使用更新矩形，您可以使用与缩放图像 1920/640 和 1080/480 相同的因子来缩放它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T01:15:05.420

最简单的事情是代替使用

```
pygame.display.flip() 
```

是使用

```
pygame.display.update() 
```

差别不大，但在我的游戏中效果很好，尤其是当它使用大量图片时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T17:30:36.400

您正在更新一个巨大的屏幕`display.flip()`。在 SDL（这在 pygame 后面）中，这不是一个好主意（尝试删除所有的翻转，看看运行速度有多快，它不应该快得多）。

我没有办法测量，但我猜你的代码需要很长时间的原因是`.flip()`.

既然你只处理 640x480 的数据，你为什么要把它放大到这么大的尺寸呢？尝试将您的屏幕设置为 640x480，然后看看它会有多快。我想它的运行速度应该快四五倍。

# ruby - 黄瓜/水豚与硒？

> ID：11349369
> 
> 赞同：17
> 
> 时间：2012-07-05T17:23:08.543
> 
> 标签：ruby, selenium, cucumber, capybara

前几天，我向我公司的一位测试人员展示了我用 Cucumber 编写的一些测试（2 个特性，5 个场景）。然后他问了我一个我无法回答的问题：

> 这比 selenium 或任何其他功能测试记录工具更好吗？

我知道 Cucumber 是一种不同的技术，它被置于不同的测试级别，但我不明白我为什么要费心编写和维护 Cucumber/Capybara 测试。

有人可以给我一个合理的解释来使用 Cucumber/Capybara 而不是 Selenium 吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-06T16:33:05.790

这个问题是在征求意见的边缘问题。你的问题实际上读给我看，“什么工具适合我？” 我这样说是因为你没有给出选择 Cucumber 和 Capybara 的理由。我相信要回答该测试人员的问题，您需要先回答几个问题：

1.) 你将在这个过程的哪个阶段编写这些测试？

Cucumber 可能不是单元测试的正确选择，具体取决于您使用的语言。但它可以用于任何级别的测试，从单元到集成再到最终用户。

2.) 谁来维护你的测试？你？其他开发商？测试人员？业务分析师？项目经理？

必须维护自动化测试，并且知道谁将执行该操作可以帮助您决定工具 - 因为有些对于某些用户来说过于技术化。

3.) 谁来定义新的测试？

Cucumber 旨在供开发、QA 和业务所有者之间协作使用。它是将每个人的知识用于自动化测试过程的完美工具。然而，它需要开发一种无处不在的语言才能生效。您可以在[James Shore 的 Art of Agile](http://jamesshore.com/Agile-Book/ubiquitous_language.html)页面上阅读相关内容。

回答完这些问题后，您就可以回答测试人员的问题了。

但是，在比较记录工具（例如 Selenium IDE、HP Quick Test Pro、IBM Rational Functional Tester）与开发工具（nUnit、jUnit、RSpec、Selenium webdriver、Capybara）时，有几点需要牢记：它们针对不同的受众。它们也有不同的优点和缺点。

任何人都可以轻松使用录制工具，但它们创建的脚本很脆弱。它们很容易断裂，需要更多的维护。它们非常适合一次性自动化测试，您需要快速完成并拥有非技术人力。

开发工具的学习曲线更大，需要编程（或至少脚本）经验。脚本通常更健壮，但需要更多的技术知识来维护。当您需要可重复性并计划长期使用测试时，它们是一个很好的解决方案。

我强烈建议你阅读[黄瓜书](http://pragprog.com/book/hwcuc/the-cucumber-book)。这将真正帮助您确定 Cucumber 是否是您的正确选择。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-05T18:04:51.457

Cucumber 不仅仅是一个测试工具。除了测试 Cucumber 特性之外，它还充当文档、与利益相关者协作的机制和需求存储（如果您以[声明式风格](http://aslakhellesoy.com/post/11055981222/the-training-wheels-came-off)编写它们）。

您不必将 Cucumber 与 Capybara 一起使用。您可以直接使用硒。[但 Capybara 对所有支持驱动程序](https://github.com/jnicklas/capybara#drivers)都有相同的高级 API 。它比 Selenium 更高级，并且允许更快地编写测试。当您从一个驱动程序切换到另一个驱动程序时，您不必更改代码。

使用测试记录工具构建的测试通常要差得多。Selenium IDE 可能会生成有效的编程代码，但它并不好看，因此很难维护。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-28T17:16:51.133

Selenium ide 非常适合测试主要包含视觉元素（链接、文本等）的功能。但 Web 应用程序通常具有不将其自身表示为视觉元素的功能，例如发送电子邮件、排队工作、与 3rd 方服务通信等。例如，您可以测试是否存在“电子邮件已发送”消息提交表格。但它并没有真正告诉您是否真的发送了电子邮件，因此您并没有真正在这里测试整个功能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T07:23:40.577

Cucumber 是用于使测试对业务用户可读的工具。它由简单的英语句子组成，这些句子使用正则表达式与您的 Capybara 步骤进行匹配。

从长远来看，使用录音工具对你没有任何好处。它们是为初学者设计的，不是那么强大，所以我建议你直接去编码。

您可以单独使用 Selenium 进行测试，但如果您发现 Cucumber 有用且易于使用，我建议您继续将 Cucumber 用于文档目的。毕竟，Cucumber 可以使用 Capybara 或 Selenium web 驱动程序。

# c# - 将 Excel 导入 DataGridView

> ID：11349370
> 
> 赞同：1
> 
> 时间：2012-07-05T17:23:08.940
> 
> 标签：c#, excel, datagridview, dialog, connection-string

我正在制作一个将两个数据库合并在一起的程序......我可以使用以下代码将 excel 电子表格导入 DataGridView：

```
 string connectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\test.xls;Extended Properties=""Excel 8.0;HDR=YES;IMEX=1""";

                DbProviderFactory factory = DbProviderFactories.GetFactory("System.Data.OleDb");

                DbDataAdapter adapter = factory.CreateDataAdapter();

                DbCommand selectCommand = factory.CreateCommand();
                selectCommand.CommandText = "SELECT * FROM [All Carpets to Excel$]";

                DbConnection connection = factory.CreateConnection();
                connection.ConnectionString = connectionString;

                selectCommand.Connection = connection;

                adapter.SelectCommand = selectCommand;

                data = new DataSet();

                adapter.Fill(data);

                dataGridView1.DataSource = data.Tables[0].DefaultView; 
```

我遇到的问题是我试图找到一种方法将源文件更改为对话框返回的路径。我有一个包含文件路径的字符串文件。如何将其合并到连接字符串中？

或者也许有更好的方法来做到这一点？

谢谢！

卢克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:00:07.633

使用`OleDbConnectionStringBuilder`该类来修改您的连接字符串。

```
string fileName = "your path to the excel.xls"; // From the dialog box.

OleDbConnectionStringBuilder connStringBuilder =
    new OleDbConnectionStringBuilder();

connStringBuilder.DataSource = fileName;  // Set path to excel file
connStringBuilder.Provider = "Microsoft.Jet.OLEDB.4.0";
connStringBuilder.Add("Extended Properties", "Excel 8.0;HDR=YES;IMEX1");        

...

// Get the connection string from the builder.
connection.ConnectionString = connStringBuilder.ConnectionString; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T02:48:57.980

您只需要 Microsoft.Office.Interop.Excel 并将其与数据表和数据集相结合。

```
 Excel.Workbook ExWorkbook;
    Excel.Worksheet ExWorksheet;
    Excel.Range ExRange;
    Excel.Application ExObj = new Excel.Application();

    DataTable dt = new DataTable("dataTable");
    DataSet dsSource = new DataSet("dataSet");
    dt.Reset();

    openFileDialog1.Filter = "Excel Files|*.xls;*.xlsx;*.xlsm";
    DialogResult result = openFileDialog1.ShowDialog();

    if (result == DialogResult.OK) // Test result.
    {
        ExWorkbook = ExObj.Workbooks.Open(openFileDialog1.FileName, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
        ExWorksheet = (Excel.Worksheet)ExWorkbook.Sheets.get_Item(1);
        ExRange = ExWorksheet.UsedRange;

        for (int Cnum = 1; Cnum <= ExRange.Columns.Count; Cnum++)
        {
            dt.Columns.Add(new DataColumn((ExRange.Cells[1, Cnum] as Excel.Range).Value2.ToString()));
        }
        dt.AcceptChanges();

        string[] columnNames = new String[dt.Columns.Count];
        for (int i = 0; i < dt.Columns.Count; i++)
        {
            columnNames[0] = dt.Columns[i].ColumnName;
        }

        for (int Rnum = 2; Rnum <= ExRange.Rows.Count; Rnum++)
        {
            DataRow dr = dt.NewRow();
            for (int Cnum = 1; Cnum <= ExRange.Columns.Count; Cnum++)
            {
                if ((ExRange.Cells[Rnum, Cnum] as Excel.Range).Value2 != null)
                {
                    dr[Cnum - 1] = (ExRange.Cells[Rnum, Cnum] as Excel.Range).Value2.ToString();
                }
            }
            dt.Rows.Add(dr);
            dt.AcceptChanges();
        }
        ExWorkbook.Close(true, Missing.Value, Missing.Value);
        ExObj.Quit();

        dataGridView1.DataSource = dt; 
```

# node.js - MongoDB / Node.JS：从文档中获取属性值

> ID：11349371
> 
> 赞同：1
> 
> 时间：2012-07-05T17:23:09.583
> 
> 标签：node.js, mongodb

我有一个文件：

```
{
"_id":ObjectId("someID")
"email":"john@example.com"
} 
```

我想检索“john@example.com”，以便可以将此值传递给浏览器。

我怎么做？

我看到了这些 SO 帖子，但我根本不明白解决方案：
[如何在 Mongodb 文档中获取字符串值？](https://stackoverflow.com/questions/8033366/how-to-get-string-value-inside-a-mongodb-document?rq=1)
[如何从 MongoDB 文档中获取价值](https://stackoverflow.com/questions/8030578/how-to-get-value-from-a-mongodb-document?rq=1)

# jquery - 使用 jQuery 设置表格标题 TH 的宽度

> ID：11349373
> 
> 赞同：3
> 
> 时间：2012-07-05T17:23:20.427
> 
> 标签：jquery, jquery-selectors, telerik

我正在使用带有自定义行模板的 Telerik mvc 网格。因此，由于我已经完成了行模板，因此我的宽度有问题。我无法正确设置宽度，所以我无法制作一个简单的文档准备功能来设置每个 th 的宽度。

```
function SetWidth(){
    var ths = $('th');
    var element = ths[0];
    element.width(100);
} 
```

然后我将手动设置 0 = 100、1 = 110、2 = 300 px 等等。

但是当我尝试添加 'element' 的宽度时，它给了我错误。

```
Uncaught TypeError: Property 'width' of object #<HTMLTableCellElement> is not a function 
```

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:32:41.967

由于您使用的是标准 DOM 元素。您可以像这样更改宽度

```
function SetWidth(){
    var ths = $('th');
    var element = ths[0];
    element.style.width = 100;
} 
```

或者

```
var ths = $('th');
var element = ths.eq(0); //<-- instead of ths[0]
element.width(100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:25:54.933

width() 不是标准 DOM 元素的有效 javascript 方法，这是您在使用 th 时传递给的元素类型`$("th")[0]`。虽然它是 jQuery 的一种方法。

你会想要这样做：

```
function SetWidth(){
    var widths = [100, 110, 300]
    for(var i=0; i<widths.length; i++){
        $('th')[i].style.width = widths[i];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T17:26:57.200

您将 jQuery 元素转换回标准 DOM 元素，并且在`width`标准 DOM 元素上没有任何方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T17:25:39.057

尝试改用 css 方法：

```
element.css('width', '100'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T17:38:33.640

尝试这个：

```
function SetWidth(){
    var ths = $('th');
    var element = ths[0]; // this gets a raw dom object
    element.style.width = 100; // therefor you should use style property
} 
```

或者，如果你想选择第一个`th`元素，你可以使用 jQuery`eq()`方法：

```
 var ths = $('th:eq(0)').css('width', '100') 
```

# java - 合并两个图像 --> 4 倍大小！如何减小文件大小？

> ID：11349378
> 
> 赞同：2
> 
> 时间：2012-07-05T17:23:51.690
> 
> 标签：java, image-processing, graphics, merge, bufferedimage

我使用下面的代码合并两个图像。一张没有透明度的基本图像，一张有透明度的叠加图像。他们拥有的图像的文件大小分别为 20kb 和 5kb。一旦我合并了这两个图像，生成的文件大小大于 100kb，因此至少是 25kb 组合大小的 4 倍。我预计文件大小小于 25kb。

```
public static void mergeTwoImages(BufferedImage base, BufferedImage overlay, String destPath, String imageName) {

    // create the new image, canvas size is the max. of both image sizes
    int w = Math.max(base.getWidth(), overlay.getWidth());
    int h = Math.max(base.getHeight(), overlay.getHeight());
    BufferedImage combined = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);

    // paint both images, preserving the alpha channels
    Graphics2D g2 = combined.createGraphics();
    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    g2.drawImage(base, 0, 0, null );
    g2.drawImage(overlay, 0, 0, null);
    g2.dispose();

    // Save as new image
    saveImage(combined, destPath + "/" + imageName + "_merged.png");
} 
```

我的应用程序必须具有非常好的性能，因此谁能解释我为什么会发生这种效果以及如何减少生成的文件大小？

非常感谢！

编辑：非常感谢您的回答。saveImage 代码是：

```
public static void saveImage(BufferedImage src, String file) {
    try {
        File outputfile = new File(file);
        ImageIO.write(src, "png", outputfile);
    } catch (IOException e) {
        e.printStackTrace();
    }       
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:50:31.443

因为[PNG](http://en.wikipedia.org/wiki/Portable_Network_Graphics#File_size_and_optimization_software)是一种无损格式，所以只有两个主要因素可能会影响文件大小：

1.  文件中有多少像素，以及
2.  格式的压缩程度。

因为听起来你正在做一个覆盖，我猜#1没有改变。比较输入和输出文件的像素尺寸以仔细检查。

您很可能会遇到问题，因为您的合并图像更复杂，因此 PNG 过滤算法更难压缩文件。除了更改图像或切换到有损文件格式之外，您对此无能为力。

为了进一步解释，假设您有一张全白图像和一张全红图像。两者都是 100x100 像素。这些图像真的很容易压缩，因为您只需要编码：重复红色 10000 次。现在，假设您以一种其他像素都来自不同图像的方式合并这些图像。现在它是方格的。如果您设置了良好的编码机制，您可能仍然可以通过以下方式很好地编码：repeat [red,white] 10000 次。但是您会注意到，即使使用这种理想的编码算法，我还是将编码消息的大小增加了很多。而且，如果您没有非常适合此类事情的编码格式，那么一切都会从那里走下坡路。

通常，图像的像素越多变化越随机，与其他像素相比，生成的文件就越大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:59:43.327

将图像另存为 JPEG，压缩率更高/质量更低。有关详细信息，请参阅：

*   [如何在java中减小图像缩略图的大小](https://stackoverflow.com/questions/4613051/how-to-decrease-image-thumbnail-size-in-java)
*   SSCCE的[“图像上的 Java 文本”](https://stackoverflow.com/a/5998015/418556)的答案。

![](../Images/e658c26b8bb48ea528719c8ba4037b4f.png)

# video - 从服务器端到客户端的视频流

> ID：11349381
> 
> 赞同：-2
> 
> 时间：2012-07-05T17:24:00.593
> 
> 标签：video, video-streaming, vlcj

> **可能重复：**
> [vlcj 中的视频流](https://stackoverflow.com/questions/11343523/video-streaming-in-vlcj)

```
public class VlcTest extends VlcjTest {
  public static void main(String[] args) throws Exception {
    if(args.length != 1) {
      System.out.println("Specify a single MRL to stream");
      System.exit(1);
    }

    NativeLibrary.addSearchPath(RuntimeUtil.getLibVlcLibraryName(), "C:\\Program Files\\VideoLAN\\VLC");
    Native.loadLibrary(RuntimeUtil.getLibVlcLibraryName(), LibVlc.class);

    String media = args[0];
    String [] options = formatHttpStream("127.0.0.1", 5080);

    System.out.println("Streaming '" + media + "' to '" + options + "'");

    MediaPlayerFactory mediaPlayerFactory = new MediaPlayerFactory(args);
    HeadlessMediaPlayer mediaPlayer = mediaPlayerFactory.newHeadlessMediaPlayer();
    mediaPlayer.playMedia(media, options);
    // Don't exit
    Thread.currentThread().join();
  }

  private static String [] formatHttpStream(String serverAddress, int serverPort) {
    String [] sb={":sout = #duplicate{dst=std{access=http,mux=ts,dst=127.0.0.1:5080}}"};
    return sb;
  }
} 
```

我想确认此代码是否能够将视频从服务器流式传输到客户端。我试图实现的流程是：

1.  客户端向服务器发送流请求
2.  服务器根据客户端的 IP 地址和端口号创建与客户端的连接，以数据包的形式发送视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:36:37.037

不，这段代码不会做你想做的事。请参阅我对您上一个问题的[回答](https://stackoverflow.com/a/11347526/3340)，了解原因。特别是**“StreamHttp.java部分**的解释”部分。

# c++ - 转义序列？在 Qstring 中使用引号

> ID：11349384
> 
> 赞同：5
> 
> 时间：2012-07-05T17:24:04.050
> 
> 标签：c++, c, qt, escaping

我正在使用 Qt 创建者 2.4。我需要`hi"world"`在我的代码中使用一个字符串说。我尝试使用`Qstring`并且`std::string`我知道`/`是转义序列字符，但 IDE 不将其理解为转义序列并在我编写时给出错误：

```
"hi/"world/"" 
```

我可以使用任何可以转换为`Qstring`. 任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T17:28:00.257

像这样使用它：

```
QString output = "Hi \"world\"!"; 
```

# css - 将一个 div 的顶部到另一个 div 的底部都使用 height:auto; 在 CSS 中

> ID：11349386
> 
> 赞同：-1
> 
> 时间：2012-07-05T17:24:07.277
> 
> 标签：css

我想相对于帖子容器定位评论容器。但是帖子文本可以有不同的大小，所以我把它设为自动高度。与评论容器相同，因为它可以包含任意数量的评论。但如果我将评论容器定位为

```
#wallwrap .comment_container_out
        {
    position:absolute;
    width:150px;
    bottom:-15px;
    left:80px;
           } 
```

它将评论容器的底部限制为帖子容器的底部，因此当评论数量增加时，评论容器的高度也会增加，但它会向上扩展，而我希望它向下扩展。
邮政容器是

```
#wallwrap .text_post

    {
    position:relative;
    left:20px;
    font-size:10px; 
    font-family:Helvetica,Arial,  sans-serif;
    color:#000;
    background-color:#fff;
    padding:5px 10px;
    width:220px;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:48:40.353

问题的症结在于您使用的是 position:absolute，它将从正常的 HTML“流”中删除元素。然后，当您将其设置为“bottom: 0”时，它将始终将自身固定在容器的底部，但会垂直向上生长。

你为什么要绝对定位它？Position:absolute 应该永远是最后的手段。如果您只是想将帖子区域与评论区分开来，我只需在帖子区域添加一个边距底部。

# java - 如何检测tomcat上下文重新加载

> ID：11349389
> 
> 赞同：0
> 
> 时间：2012-07-05T17:24:12.673
> 
> 标签：java, tomcat, web-applications

我有一个 config.properties 文件来将我的应用程序的凭据和 IP 地址存储为键值对。但是，写入此属性文件会在 tomcat 中重新加载应用程序上下文。我正在写入属性文件，如下所示

```
 URL propUrl=this.getClass().getClassLoader().getResource(PROPERTIES_FILE);
   prop.store(new FileOutputStream(propUrl.getPath()), null); 
```

所以，

1.) 有没有办法在 Java 中检测 tomcat 上下文重新加载。

或者

2.) 有没有办法防止上下文重新加载和读取 config.properties 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:59:55.857

1.  如果 ServletContextListener 没有帮助。您可以尝试使用 LifeCycleListener
2.  设置该属性`reloadable=false`以防止重新加载上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:06:41.940

要禁用上下文的自动重新加载（这是 web 应用程序的 Tomcat 术语），请将服务器配置中元素的`reloadable`属性设置为. [请参阅此处](http://tomcat.apache.org/tomcat-5.5-doc/config/context.html)以供参考，搜索“可重新加载”。`<Context>``false`

# php - 确定 PHP 是否存在 mySQL 错误

> ID：11349391
> 
> 赞同：0
> 
> 时间：2012-07-05T17:24:27.960
> 
> 标签：php, mysql

全部，如果我运行如下查询：

```
 $qry = "Select wrong_column from table_name";
 $result = mysql_query($qry); 
```

如果 wrong_column 不存在，那么我会得到一个 mySQL 错误。在 PHP 中，如何确定 mySQL 是否有错误？如果出现错误，我希望它停止进一步处理，但如果没有错误，我希望得到这样的 mySQL 结果：

```
$resultset = mysql_fetch_array($result); 
```

会做这样的工作吗？

```
if(!mysql_error()){
    $resultset = mysql_fetch_array($result);
} 
```

任何有关如何执行此操作的建议将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T17:27:34.967

> 如何确定 mySQL 是否有错误？

要查看是否发生错误，您应该测试以下结果`mysql_query`：

```
$result = mysql_query($qry);
if (!$result) {
    $error = mysql_error();
    // Handle the error.
} 
```

从[文档](http://php.net/manual/en/function.mysql-query.php)中：

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 在成功时返回资源，**在错误时返回 FALSE**。

强调我的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T17:30:20.927

`mysql_query("SELECT foo FROM bar") or exit(mysql_error());`是你最好的朋友 =)

# blackberry - 使用IDE在Phonegap中设置Blackberry Project（5以上）实现推送通知

> ID：11349397
> 
> 赞同：0
> 
> 时间：2012-07-05T17:24:57.427
> 
> 标签：blackberry, cordova, push-notification, phonegap-plugins

我正在为 Android、iPhone 和 Blackberry 平台使用 phonegap 开发一个移动应用程序。

创建新消息时，我需要从 Java EE 服务器向 BB 发送通知。这意味着 Java EE 服务器会推送此通知，而 BB 移动设备会收到通知。我需要在我的应用程序中放置一个推送通知功能，以便我的服务器可以轮询我的应用程序，然后在有任何新通知时放置通知。

在浏览网络时，我发现有适用于 iPhone 和 Android 的 Phonegap 插件，这有助于显示通知。但是我没有找到任何对黑莓有用的资源。

我正在关注[http://docs.blackberry.com/en/developers/deliverables/30152/Push_Service_SDK-Installation_and_Configuration_Guide--1648741-0622124431-001-1.1.0.16-US.pdf](http://docs.blackberry.com/en/developers/deliverables/30152/Push_Service_SDK-Installation_and_Configuration_Guide--1648741-0622124431-001-1.1.0.16-US.pdf)。

但是，我面临一些环境挑战（在 Phonegap 中为 Blackberry 的 IDE 中设置 SDK）。

要使用该 SDK，需要 IDE，但我认为使用 ANT 是不可能的。我需要一些使用 IDE 为 Blackberry 创建 Phonegap 项目的示例。

我想在 Blackberry 中使用 phonegap 获得推送通知。有人可以帮我执行此操作吗？任何用 HTML 或 JavaScript 解释这一点的链接都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:40:00.913

Phonegap 不为黑莓提供插件。相反，BB 已经有一个用于 HTML5 的 API 用于推送通知 (BIS/BES)。与本机代码相比，它们有点受限：例如，没有声音支持。

您可以使用 Blackberry Webworks SDK 和 Ripple 作为 BB 模拟器。唯一的问题是 Ripple 不支持推送通知，最终您必须在真实设备上测试您的应用程序。

有关更多信息，请查看此处的教程： [http ://www.pushwoosh.com/programming-push-notification/blackberry-html5-webworks-push-notification-sdk/](http://www.pushwoosh.com/programming-push-notification/blackberry-html5-webworks-push-notification-sdk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:51:15.293

我不确定Phone Gap 是否有支持黑莓的插件。我认为 Phone Gap 论坛可能是发布这个问题的更好地方。

谢谢

纳文 M

# css - IE6 内联块不起作用

> ID：11349401
> 
> 赞同：1
> 
> 时间：2012-07-05T17:25:26.653
> 
> 标签：css, internet-explorer-6

嗨，我已经尝试了 2 个小时，我可以在网上找到的所有东西都无济于事。所以我最后的希望就在这里。您可以在以下位置查看该站点： [http](http://webofdreams.ro/vworker/finemaid/finemaid.html#) ://webofdreams.ro/vworker/finemaid/finemaid.html# 导航是概述和服务。

html:

```
 <div class="contentNav clearfix">
        <ul class="clearfix">
            <li><a class="show1 navButton" class="left" id="activeLink">Overview</a></li>
            <li><a class="show2 navButton" class="right">Services</a></li>
        </ul>
        </div> 
```

CSS：

```
.clearfix {clear: both;}
.contentNav {
    color: #ddd !important;
    font-size: 1.5em;
    padding: 0;
    margin: 0;
    display: block;
    text-align: center;
    }
.contentNav a { 
    color: #fff !important;
    }
.navButton {
    font-size: 18px !important;;
    padding: 5px 15px;
    background: rgb(122,188,255); /* Old browsers */    
    }
.contentNav li {
    display: inline-block;
    }
/*IE specific css*/
.navButton {
    zoom: 1;
    *display: inline;
    }
.navButton a {
    zoom: 1;
    *display:inline;
    }
.height {
    height: 45px;
    clear: both;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T17:34:22.590

IE 只支持`display: inline-block`原生的元素`inline`。`<li>`元素是原生的`block`，因此在 IE 中，您需要将其保持为，但在元素上`display: inline`触发，如下所示：`hasLayout`

```
display:-moz-inline-stack;  /* only for older mozilla browsers */
display:inline-block;
zoom:1;  /* triggers hasLayout */
*display:inline;  /* resets element to inline for IE */ 
```

这是我前段时间找到此解决方案的文章：

[跨浏览器支持内联块样式](http://foohack.com/2007/11/cross-browser-support-for-inline-block-styling/)

也就是说，我从来没有在 IE6 中测试过，因为 IE6 已经 11 岁了，应该不再受支持。但值得一试。文章是07年写的，所以他可能用IE6测试过

# php - HTML 4 网站 - 用户提交电子邮件地址以访问/下载文件

> ID：11349403
> 
> 赞同：1
> 
> 时间：2012-07-05T17:25:32.597
> 
> 标签：php, email, scripting, html4

我们有一个完全用 HTML 4 完成的古老网站，我的任务是想出一种方法让用户输入他们的电子邮件地址来访问/下载文件。

提交他们的电子邮件地址后，它可以将他们直接带到 pdf 文件，也可以将他们重定向到包含文件链接的“谢谢”页面。

然后，我们将能够看到电子邮件地址列表以及谁下载了什么。

我被告知需要服务器端脚本语言。老实说，我有基本的编码技能，我完全被这个任务难住了。任何帮助（请用简单的术语解释）将不胜感激。

谢谢！

仁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:01:14.543

这取决于你想要多少保护。如果您想确保不输入电子邮件地址的人完全无法访问该文件，您可以使用 .htaccess 文件（在 Apache 中）阻止该文件。如果您之前设置的会话正常，则创建一个页面以检索要下载的文件。从你说的情况来看，我认为这没有必要。另一种选择是用一个简单的表单创建一个页面，action="somepage.php"。然后在该页面上，您将使用 $_GET 或 $_POST 检索电子邮件（也就是说，如果您使用的是 PHP），然后将其保存在数据库或文本文件或其他东西中。（您甚至可以将其发送到您的电子邮件）然后：

1）如果您使用我之前提到的保护，则将会话设置为 OK（您可以在文件开头使用 session_start() 执行此操作，然后包含 $_SESSION["gave_email"] = 'true';）。然后测试该变量以查看它是否为真。如果为真，则将用户重定向到显示该文件的 PHP 页面。（像这样的检查的适当语法可能如下所示：

```
(if isset($_SESSION["gave_email"] && $_SESSION["gave_email"] == true)
//you show the content, then reset the $_SESSION variable to false 
```

2）如果您不担心安全性，那么只需将用户重定向到您想要的页面（直接到文件或包含下载链接的另一个页面）。要使用 PHP 转发，您可以使用 header('Location: page.php')，其中 page.php 是您想要的页面。整个事情看起来很简单，所以如果您对此有更具体的问题，请提出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T19:06:22.900

您的解决方案将分为服务器端两个部分。首先，您需要一些服务器端代码来处理用户输入，并需要一个数据库来存储从电子邮件地址到文件名的映射（尽管这可能只是服务器上的文本文件）。

## 服务器端脚本

当涉及到服务器端脚本语言时，您有很多选择，从疯狂流行的[PHP](http://php.net)开始，虽然大多数网络托管公司都支持它，但它充斥着糟糕的设计问题，（在我看来）应该避免所有费用。但是，它仍然*完全*适合您的目的。

在规模的另一端是闪电般快速的[node.js](http://nodejs.org)，它允许您使用 JavaScript 对您的 Web 应用程序进行编程；这可以说是一种更令人愉快的方式，但托管通常更昂贵，并且面向具有大量用户群的 Web 应用程序。

两者之间还有许多其他可能的解决方案，但为了论证，我们假设您使用 PHP。

## 数据库

数据库的作用只是存储电子邮件地址及其各自文件下载路径之间的关系。同样，有很多不同的解决方案，有些人可能会支持或反对它们。[MySQL](http://mysql.com)是最不可信的解决方案之一（但不幸的是，它得到了难以置信的广泛支持并与 PHP 紧密结合），为了论证，我们将再次使用它。

## 这个怎么运作

您的 Web 应用程序将首先检查任何用户输入（即从 HTML 表单提交的用户电子邮件地址）。然后：

*   如果用户没有提交任何东西，那么输出一个带有 HTML 表单的页面，它可能看起来像这样：

    ```
    <form action="thispage.php" method="post">
      <input type="text" name="email" value="Enter your address here" />
      <input type="submit" value="Get my file!" />
    </form> 
    ```

    当用户单击提交按钮时，输入的电子邮件地址将被发送到`thispage.php`（或您决定调用此脚本的任何位置）。

*   如果用户*已经*提交了一个电子邮件地址，（即用户点击了上面表单中的按钮），那么我们用该电子邮件地址查询数据库以找出用户的文件在哪里。关于如何做到这一点的教程一百万零一 - 这里有 PHP 的简单[示例](http://www.php.net/manual/en/mysqli.query.php)。

    从数据库中检索文件路径后，您可以输出一些 HTML 作为“谢谢！” 页面，带有指向 PDF 文件的链接，或者直接使用以下代码立即重定向它们，其中`$URL`是文件的 URL。

    ```
    <?php
       header('Location: ' . $URL);
    ?> 
    ```

    还有另一种方法可以做到这一点 - 如果你想保持 PDF 文件不被未经授权的人看到，你可以将它存储在服务器上的某个地方，外部世界无法访问，然后简单地将文件的*内容*输出到页面中. 这可能类似于以下内容，`$path`服务器文件系统上 PDF 文件的路径在哪里：

    ```
    <?php
       header('Content-type: application/pdf');
       echo file_get_contents($path);
    ?> 
    ```

我希望这能让你开始。如果您需要更多指导，您已经来对地方了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-31T11:16:20.057

试试谷歌 feedburner。它允许您进行有效的下载验证当有人使用 feedburner 在您的网站上订阅时，就可以进行下载。feedburner 订阅每 10 小时刷新一次。

[http://feedburner.google.com/](http://feedburner.google.com/)

# c# - 使用 DataTable.Load 时未复制 DataRow.RowError

> ID：11349404
> 
> 赞同：0
> 
> 时间：2012-07-05T17:25:35.203
> 
> 标签：c#, .net, ado.net, datatable

我必须将行从一个表复制到另一个表。在源表中，我可以在行上设置 RowError。当我这样做时：

```
targetTable.BeginLoadData();
targetTable.Load( new DataTableReader( sourceTable ) )
targetTable.EndLoadData(); 
```

目标表不会从源表的行中复制行错误。谁能告诉我该怎么做才能让它工作？谢谢。

编辑：我不想丢失目标表中已经存在的数据。我也不想更改参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:03:34.637

尝试这个：

```
targetTable = sourceTable.Copy(); 
```

在这种情况下，创建阅读器不会给您预期的结果，因为它的（阅读器）目标将提取每一行的值，而不是附加属性。

**更新：**

在这种情况下，您应该：

```
foreach (DataRow drImport in sourceTable.Rows) {
    targetTable.ImportRow(drImport);
} 
```

* * *

抱歉，就在发布之前，我看到了您对参考的其他观察。恐怕您不能将同一行（相同的引用）分配给两个或多个表。[看到这个](https://stackoverflow.com/questions/722052/this-row-already-belongs-to-another-table-error-when-trying-to-add-rows)。

# rhino-mocks - Rhino Mock 和方法没有返回正确的值

> ID：11349410
> 
> 赞同：2
> 
> 时间：2012-07-05T17:25:48.150
> 
> 标签：rhino-mocks

有谁知道为什么 UsernameExists 不会返回 True。我的语法一定在某个地方搞砸了。

```
[TestMethod()]
        public void GenerateUsername_AppendTwoCharacters_ReturnUsernameWithTwoAppendedCharacters()
        {
            var usersRepository = MockRepository.GenerateStub<IUsersRepository>();
            var target = new StudentsService(null, null, usersRepository, null, null, null, null);

            usersRepository.Expect(q => q.UsernameExists("", null)).Return(true);

            var actual = target.GenerateUsername("test", "student", "280000");
            Assert.AreEqual("A", actual);
        }

public string GenerateUsername(string firstName, string lastName, string studentNumber)
        {
            var originalusername = new StudentUsernameGenerator(firstName, lastName, studentNumber).Generate(2, 2, 4);

            var username = originalusername;
            if (!string.IsNullOrWhiteSpace(username))
            {
                decimal maxCharacters = 26;
                var counter = 0;
                var overflow = 1;

                while (_usersRepository.UsernameExists(username, null))
                {
                    counter++;

                    if (counter > maxCharacters)
                    {
                        overflow++;
                        counter = 1;
                    }

                    username = GetCharacterPaddingForDuplicateUsername(counter, overflow, originalusername);
                }
            }

            return username;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:44:46.997

我不得不添加 IgnoreArguments

```
usersRepository.Stub(q => q.UsernameExists("", null)).IgnoreArguments().Return(true); 
```

# asp-classic - 拆分抛出 500 错误

> ID：11349419
> 
> 赞同：0
> 
> 时间：2012-07-05T17:26:22.347
> 
> 标签：asp-classic, vb6

我对经典 ASP 和 Visual Basic 非常陌生。我无法进行简单的拆分。我有以下代码：

```
Dim sFileName, startDate, fsObject, filObject, oArray, oSplit
oArray = Split(Replace(Request.Form("txtOutput"),vbCrLf, "|"),"|")

For Idx = 0 To Ubound(oArray)
    oSplit = Split(oArray(Idx), ",")
    response.Write(oSplit & "</br>")

Next 
```

我`txtOutput`看起来像：

```
0342-John Doe,0,0,0,,
0134-Jane Doe,15,0,0,,
0343-John Smith,44.5,0,0,, 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:27:27.880

猜猜你的代码应该是这样的：

```
Dim sFileName, startDate, fsObject, filObject, oArray, oSplit
oArray = Split(Replace(Request.Form("txtOutput"),vbCrLf, "|"),"|")

For Idx = 0 To Ubound(oArray)
    oSplit = Split(oArray(Idx), ",")

    For iloop=0 to ubound(oSplit)
        response.Write(oSplit(iloop) & "</br>")
    Next

Next 
```

这样做的原因是因为您的代码中有两个拆分，您需要两个计数器来循环遍历所有项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:33:34.187

oSplit 是一个数组.. 你试图写一个数组，然后`<br>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:30:32.640

试试这个：

```
Dim sFileName, startDate, fsObject, filObject, oArray, oSplit
oArray = Split(Replace(Request.Form("txtOutput"),vbCrLf, "|"),"|")

If IsArray(oArray) Then
   For Idx = LBound(oArray) To Ubound(oArray)
       oSplit = Split(oArray(Idx), ",")
       If IsArray(oSplit) Then
          For Idx2 = LBound(oSplit) to uBound(oSplit)
             response.Write oSplit(Idx2) & "</br>"
          Next
       End If
   Next
End If 
```

您收到此错误是因为您尝试`response.write`在数组而不是变量上使用。

# java - 在 ace:FileEntry 中更改浏览的默认按钮名称

> ID：11349420
> 
> 赞同：0
> 
> 时间：2012-07-05T17:26:23.123
> 
> 标签：java, jsf, jakarta-ee, icefaces, icefaces-3

我正在尝试使用 ace:fileEntry 组件将图像上传到我的数据库，但现在，我想在我的情况下更改“浏览”按钮的名称“Seleccionar archivo”，但我不知道该名称的存储位置。

```
 <ace:fileEntry id="ImageFileEntry" 
                                    fileEntryListener="#{usuarioBean.sampleListener}" 
                                    useSessionSubdir="true">

                    </ace:fileEntry>
                    <h:commandButton id="submit" value="subir"></h:commandButton> 
```

我附上了截图

[http://i.stack.imgur.com/8b817.png](http://i.stack.imgur.com/8b817.png)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T15:28:15.617

将`ace:fileEntry`呈现一个`<input type="file">`元素，此按钮上的文本始终由您的浏览器/浏览器的语言定义。无法更改它，请查看此帖子以获取更多信息和一些解决方法：[更改输入类型 =“文件”中的默认文本？](https://stackoverflow.com/questions/5138719/change-default-text-in-input-type-file)

# twitter - 如何在 Twitter 上获取过去的信息？

> ID：11349421
> 
> 赞同：0
> 
> 时间：2012-07-05T17:26:25.110
> 
> 标签：twitter

我需要对推特趋势进行一些比较，因此我需要获取过去的统计数据。

例如，用户 X 在 2 年前有多少粉丝。

知道如何实现这一目标吗？或任何指向正确方向的地方？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:42:17.423

Twitter 在其网站上有一个合作伙伴提供商列表，您可能希望联系这些提供商以获取历史数据：

[https://dev.twitter.com/docs/twitter-data-providers](https://dev.twitter.com/docs/twitter-data-providers)

Twitter 只会在搜索查询中返回一定数量的最近几天，因此 Twitter API 对历史数据没有太大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:32:01.207

不要以为你可以。最近没有跟上推特的步伐，但我知道有些网站会跟踪你的统计数据，但它们只会追溯到你注册该网站的时候。这意味着您必须自己跟踪数据，并且只有在两年内，您才能看到两年前（今天）我有多少关注者。

# php - 如何解决 SQLSTATE[23000]：完整性约束违规：1062 重复条目？

> ID：11349426
> 
> 赞同：4
> 
> 时间：2012-07-05T17:26:36.477
> 
> 标签：php, mysql

这是我的 MySQL 错误。

```
SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '' for key 2 
```

我用谷歌搜索并阅读了一些关于它的内容，但我无法理解。

如何解决？

这是主要部分`addStudent.php`：

```
require_once('../db.php');
$db = new DB();
if (isset($_POST['st_fname']) && isset($_POST['st_lname']) && isset($_POST['st_class']) && isset($_POST['st_grade']))
{
    $db->addStudent($_POST["st_fname"], $_POST["st_lname"], $_POST["st_class"], $_POST["st_grade"], $_POST["checkOlamp"]);
} 
```

这是一部分`db.php`：

```
public function addStudent($fname, $lname, $classnum, $grade, $olamp)
{
    $query = "INSERT INTO t_student (s_fname, s_lname, s_class, s_grade, s_olamp) VALUES('$fname', '$lname', '$classnum', '$grade', '$olamp');";
    $this->execute($query);
} 
```

并且 t_student 有一个作为`primary`键的字段，它是自动递增的。

*   db.php 是我一直使用它而不是 php 中的 mysql_connection 函数的东西，但我不知道它到底是什么。我知道那里使用了一种叫做“PDO”的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T17:29:12.330

这意味着您的表中某些列的值必须是唯一的，并且您正在尝试插入重复的行。

顺便说一句，您的函数容易受到 SQL 注入的攻击，您应该始终在将数据包含在 SQL 查询中之前对其进行转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-21T15:01:53.203

Another easy way to solve "SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry" is to pass the values in the input fields of form like this: you can see value before placeholder... note:articles is the DB table name

```
<div class="form-group">
      <label for="exampleInputTitle">Title</label>
      <input type="title" name="title" class="form-control" id="exampleInputTitle" 
      aria-describedby="emailHelp" 
      value="<?php echo $articles->title;?>"placeholder="Enter title">
      <small id="titleHelp" class="form-text text-muted"></small>
    </div> 
```

# c# - 从内部for循环中断封闭的switch语句？

> ID：11349427
> 
> 赞同：4
> 
> 时间：2012-07-05T17:26:50.787
> 
> 标签：c#, .net, controls, structure, goto

考虑以下 C#：

```
// C# .net
switch(x)
   {
    case 1:
        for(int i = 0; i < 10; i++)
        {
            int val = getValue(i);
            if (val == 0)
                goto endswitch;
        }
        doMoreStuff();
        break;
    case 2:
        doSomeThingElse();
        break;
    default: throw new ArgumentOutOfRangeException();
}
endswitch: ; 
```

我编写了类似于上述代码示例的代码。问题是我需要从内部 for 循环中中断 switch 语句。如果我在`break`那里放一个语句，它只会破坏内部 for 循环然后继续执行`doMoreStuff()`，这不是我需要的。

似乎在这里效果最好的替代方法是`goto`声明，但我知道这是不赞成的。

另一种选择是在 for 循环中跟踪一个单独的变量，但这会增加代码行并且不太优雅。

做这个的最好方式是什么？

**更新：**我读到有一种方法可以在 JavaScript 中执行此操作。它的工作原理如下：（http://www.devguru.com/technologies/ecmascript/quickref/break.html）

```
// JavaScript
outer_loop:
for(i=0; i<3; i++)
{
   document.write("<BR>" + "outer " + i + ":   ");
   for(j=0; j<5; j++)
   {
      document.write("inner " + j + " ");
      if(j==x)
         break outer_loop;
   }
} 
```

在 C# 中可能有这样的事情吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T17:30:11.017

您可以将检查抽象为带有返回标志的方法：

```
switch(x)
{
    case 1:
        if (ShouldDoMoreStuff())
            doMoreStuff();
        break;
    case 2:
        doSomeThingElse();
        break;
    default: throw new ArgumentOutOfRangeException();
}

private bool ShouldDoMoreStuff()
{
    for(int i = 0; i < 10; i++)
    {
        var val = getValue(i);
        if (val == 0)
            return false;
    }

    return true;
} 
```

只是为了扩展，您*可以*像以前一样使用 goto，但它通常不受欢迎，尤其是在这种微不足道的情况下。 *有时*当你有很多很多嵌套循环或开关时它很有用，但这通常表明你应该重构/重新设计一下。正如您所指出的，您可以存储一个局部变量并进行检查，但正如您所意识到的那样，这有点迟钝/难闻。我更喜欢我在上面发布的这种方法，因为它变得非常易读。

编辑：关于您的评论和编辑的问题，我认为 C# 中不存在与您的 JavaScript 代码类似的语言功能。来自[http://msdn.microsoft.com/en-us/library/37zc9d2w%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/37zc9d2w%28VS.80%29.aspx)（强调添加）：

> **在嵌套语句中，break 语句仅终止直接将其括起来**的 do、for、switch 或 while 语句。您可以使用 return 或 goto 语句从更深的嵌套结构中转移控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:00:50.217

这就是想太多导致的问题。如果在 for 循环之前满足您的条件，您可以简单地使用一个布尔值，并且仅在布尔值为真时运行您的方法，例如：

```
switch(x)
   {
    case 1:
        bool donrun;
        for(int i = 0; i < 10; i++)
        {
            int val = getValue(i);
            if (val == 0)
                donrun = true;
        }
        if(!donrun) doMoreStuff();
        break;
    case 2:
        doSomeThingElse();
        break;
    default: throw new ArgumentOutOfRangeException();
} 
```

# python - 从 Popen 文件对象中完全读取内容

> ID：11349432
> 
> 赞同：0
> 
> 时间：2012-07-05T17:27:09.177
> 
> 标签：python, subprocess

我正在使用 subprocess 来运行脚本，在管道上获取脚本的输出并在输出上进行处理。

我遇到了一个奇怪的问题，有时它会读到脚本的结尾，而有时它不会读到最后。

我怀疑这可能是缓冲区大小的问题..尝试了一些替代方案，但尚未成功..

```
def main():
    x = subprocess.Popen('./autotest', bufsize = 1, stdin = subprocess.PIPE, stdout = subprocess.PIPE, stderr = subprocess.PIPE, cwd = '/home/vijay/run/bin', shell = True)
    with open("out.txt",'wb') as f:
        for line in x.stdout:
            if 'Press \'q\' to quit scheduler' in line:
                print line.strip()
                f.write(line.strip())
                x.stdin.write('q')
                f.write('\n')
                x.stdin.close()
                x.stdout.flush()
                try:
                    x.stdout.read()
                except:
                    print 'Exception Occured !!!'
                    os._exit(1)
            else:
                print line.strip()
                f.write(line.strip())
                f.write('\n')
                x.stdout.flush()
if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:14:08.453

来自子流程手册：[ [http://docs.python.org/library/subprocess.html](http://docs.python.org/library/subprocess.html) ]

> 警告使用communicate() 而不是.stdin.write、.stdout.read 或.stderr.read 以避免由于任何其他操作系统管道缓冲区填满并阻塞子进程而导致的死锁。

这听起来可能是您遇到的问题。例如，如果 stderr 被填满，我相信这可能会导致进程阻塞，从而阻止它在 stdout 上产生进一步的输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:39:01.250

您应该继续尝试从 stdout 读取，直到进程终止，直到 stdout 结束，使用 poll() 检查进程是否终止，如果没有，请尝试再次读取。

# php - 通过 PHP 从 SQL 生成 Excel

> ID：11349434
> 
> 赞同：0
> 
> 时间：2012-07-05T17:27:11.237
> 
> 标签：php, sql, excel, pear

我正在使用以下代码通过 php 从 sql 生成 excel。这是工作代码的模式版本..

工作代码（无错误）

```
<?php
//documentation on the spreadsheet package is at:
//http://pear.php.net/manual/en/package.fileformats.spreadsheet-excel-writer.php
chdir('phpxls');
require_once 'Writer.php';
chdir('..');

$sheet1 =  array(
  array('eventid','eventtitle'       ,'datetime'           ,'description'      ,'notes'      ),
  array('5'      ,'Education Seminar','2010-05-12 08:00:00','Increase your WPM',''           ),
  array('6'      ,'Work Party'       ,'2010-05-13 15:30:00','Boss\'s Bday'     ,'bring tacos'),
  array('7'      ,'Conference Call'  ,'2010-05-14 11:00:00','access code x4321',''           ),
  array('8'      ,'Day Off'          ,'2010-05-15'         ,'Go to Home Depot' ,''           ),
);

$sheet2 =  array(
  array('eventid','funny_name'   ),
  array('32'      ,'Adam Baum'    ),
  array('33'      ,'Anne Teak'    ),
  array('34'      ,'Ali Katt'     ),
  array('35'      ,'Anita Bath'   ),  
  array('36'      ,'April Schauer'),
  array('37'      ,'Bill Board'   ),
);

$workbook = new Spreadsheet_Excel_Writer();

$format_und =& $workbook->addFormat();
$format_und->setBottom(2);//thick
$format_und->setBold();
$format_und->setColor('black');
$format_und->setFontFamily('Arial');
$format_und->setSize(8);

$format_reg =& $workbook->addFormat();
$format_reg->setColor('black');
$format_reg->setFontFamily('Arial');
$format_reg->setSize(8);

$arr = array(
      'Calendar'=>$sheet1,
      'Names'   =>$sheet2,
      );

foreach($arr as $wbname=>$rows)
{
    $rowcount = count($rows);
    $colcount = count($rows[0]);

    $worksheet =& $workbook->addWorksheet($wbname);

    $worksheet->setColumn(0,0, 6.14);//setColumn(startcol,endcol,float)
    $worksheet->setColumn(1,3,15.00);
    $worksheet->setColumn(4,4, 8.00);

    for( $j=0; $j<$rowcount; $j++ )
    {
        for($i=0; $i<$colcount;$i++)
        {
            $fmt  =& $format_reg;
            if ($j==0)
                $fmt =& $format_und;

            if (isset($rows[$j][$i]))
            {
                $data=$rows[$j][$i];
                $worksheet->write($j, $i, $data, $fmt);
            }
        }
    }
}

$workbook->send('test.xls');
$workbook->close();

//-----------------------------------------------------------------------------
?> 
```

修改代码以从数据库中检索数据（显示错误）

```
<?php

    $numrow12 = mysql_query("SELECT * FROM mastertable WHERE pdfstatus = 1 ORDER BY tstamp DESC"); 

    mysql_select_db("brainoidultrafb", $link);
    chdir('phpxls');
    require_once 'Writer.php';
    chdir('..');

    while($row = mysql_fetch_array($numrow12)) {
        $sheet1 =  array(
      array('StudentID','Students Email' ,'Diagnosis','TimeStamp' ,),
      array($row['student_id'] ,$row['email_id'],$row['diagnosis'],$row['tstamp'],),
    );

    } 

    $workbook = new Spreadsheet_Excel_Writer();

    $format_und =& $workbook->addFormat();
    $format_und->setBottom(2);//thick
    $format_und->setBold();
    $format_und->setColor('black');
    $format_und->setFontFamily('Arial');
    $format_und->setSize(8);

    $format_reg =& $workbook->addFormat();
    $format_reg->setColor('black');
    $format_reg->setFontFamily('Arial');
    $format_reg->setSize(8);

    $arr = array(
          'Calendar'=>$sheet1,
              );

    foreach($arr as $wbname=>$rows)
    {
        $rowcount = count($rows);
        $colcount = count($rows[0]);

        $worksheet =& $workbook->addWorksheet($wbname);

        $worksheet->setColumn(0,0, 6.14);//setColumn(startcol,endcol,float)
        $worksheet->setColumn(1,3,15.00);
        $worksheet->setColumn(4,4, 8.00);

        for( $j=0; $j<$rowcount; $j++ )
        {
            for($i=0; $i<$colcount;$i++)
            {
                $fmt  =& $format_reg;
                if ($j==0)
                    $fmt =& $format_und;

                if (isset($rows[$j][$i]))
                {
                    $data=$rows[$j][$i];
                    $worksheet->write($j, $i, $data, $fmt);
                }
            }
        }
    }

    $workbook->send('Submissions.xls');
    $workbook->close();

    //-----------------------------------------------------------------------------
    ?> 
```

它显示以下错误

警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 13 行的 /home/content/58/9508458/html/psychiatric/subexcel.php 中给出

警告：无法修改标头信息 - 标头已由 /home/content/58/9508458/html/psychiatric/phpxls/ 中的（输出开始于 /home/content/58/9508458/html/psychiatric/subexcel.php:13）发送Writer.php 在第 67 行

警告：无法修改标头信息 - 标头已由 /home/content/58/9508458/html/psychiatric/phpxls/ 中的（输出开始于 /home/content/58/9508458/html/psychiatric/subexcel.php:13）发送Writer.php 在第 68 行

警告：无法修改标头信息 - 标头已由 /home/content/58/9508458/html/psychiatric/phpxls/ 中的（输出开始于 /home/content/58/9508458/html/psychiatric/subexcel.php:13）发送Writer.php 在第 69 行

警告：无法修改标头信息 - 标头已由 /home/content/58/9508458/html/psychiatric/phpxls/ 中的（输出开始于 /home/content/58/9508458/html/psychiatric/subexcel.php:13）发送Writer.php 在第 70 行

警告：无法修改标头信息 - 标头已由 /home/content/58/9508458/html/psychiatric/phpxls/ 中的（输出开始于 /home/content/58/9508458/html/psychiatric/subexcel.php:13）发送Writer.php 在第 71 行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T17:32:21.160

现在，您在尝试查询数据库*后选择了数据库：*

```
$numrow12 = mysql_query("SELECT * FROM mastertable WHERE pdfstatus = 1 ORDER BY tstamp DESC");

mysql_select_db("brainoidultrafb", $link); 
```

那是行不通的。只需交换顺序，以便您选择数据库，*然后*查询它：

```
mysql_select_db("brainoidultrafb", $link);

$numrow12 = mysql_query("SELECT * FROM mastertable WHERE pdfstatus = 1 ORDER BY tstamp DESC"); 
```

* * *

至于你的第二个问题，你正在覆盖`$sheet1`循环的每次迭代。改为这样做：

```
$sheet1 = array(
    array('StudentID','Students Email' ,'Diagnosis','TimeStamp' ,)
);

while($row = mysql_fetch_array($numrow12)) {
    $sheet1[] = array($row['student_id'], $row['email_id'], $row['diagnosis'], $row['tstamp'],);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:42:00.130

对于您的第二个问题，请使用： `$sheet1[] =`

将元素附加到 $sheet1 数组。您当前正在循环的每次迭代后替换它。

您可能还希望`$sheet1`在 while 循环之外进行初始化以避免警告。`$sheet1 = array();`

# php - 无法让我的用户数据库进行排序。

> ID：11349438
> 
> 赞同：0
> 
> 时间：2012-07-05T17:27:27.197
> 
> 标签：php, mysql

我有一个用户数据库，我希望管理员能够查看用户。我希望管理员能够按不同的字段对用户进行排序。（例如名字或姓氏）。

我的问题：
它不会排序。我正在尝试使用下拉框和提交按钮来做到这一点。我已经尝试过 phpMyAdmin 中的 Sql 以确保语句正确。我还添加了一个 or die 以确保它不是 mysql 错误。我没有收到任何错误，只是没有排序。我还尝试回显下拉菜单以确保将正确的值添加到变量中。

代码：HTML下拉

```
 <form action="View_users.php" enctype="multipart/form-data" name="sort" id="sort" method="post" align="right">
        <label>
          <select name="sortdropdown" id="sortdropdown">
          <option value="<?php echo $sortby; ?>"><?php echo $sortby; ?></option>
          <option value="name">First Name</option>
          <option value="surname">Surname</option>
          <option value="email">Email</option>
          <option value="signupdate">Date</option>
          </select>
        </label>
        <label>
             <input type="submit" name="button" id="button" value="Sort" />
        </label>
     </form> 
```

逻辑：

```
$sortby = "";
if (!isset($_POST['sortdropdown'])) {
            $sortby = "surnname";
    }else{
    $sortby = mysql_real_escape_string($_POST['sortdropdown']);
    }
// This block grabs the whole list for viewing
$product_list = "";
$counter = 0;
$sql = mysql_query("SELECT * FROM users ORDER BY '$sortby' ASC")  or            die(mysql_error());

$productCount = mysql_num_rows($sql); // count the output amount
if ($productCount > 0) {
    while($row = mysql_fetch_array($sql)){ 
            $counter++;
             $id = $row["id"];
            $email = $row["email"];
            $name = $row["name"];
            $surname = $row["surname"];
            $lastlogin = $row["lastlogin"];
            $signupdate = $row["signupdate"];
            if (is_float($counter/2)) {$class = "#CCCCCC"; }
            else {$class = "white";}
            $product_list .= '<tr bgcolor="'.$class.'">
            <td>'.$surname.'</td>
            <td>'.$name.'</td>
            <td>'.$email .'</td>
            <td><a href="user.php?id=' . $id . '">View More</a></td></tr>';
     }
 } else {
$product_list = "There are no users in the system yet";
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:43:10.563

评论是正确的，您应该使用反引号 `$sortby` 而不是 '$sortby'

原因是 - 单引号用于包装 MySQL 中的值，这不是您想要的。您正在传递表格列的名称，因此您使用反引号，因为它们用于包装表格列名称。

# ios - UIScrollView 服装分页大小

> ID：11349439
> 
> 赞同：-1
> 
> 时间：2012-07-05T17:27:29.537
> 
> 标签：ios, uiscrollview, pagination

首先看一下来自 localScope 应用程序的这张图片：

![本地范围](../Images/748b436caa46b96ba17f9d1a8da4d511.png)

我有 2 个（简单？）问题：

1.  我怎样才能像这样对我的图标进行分页？

2.  我如何检测女巫图标被“选中”

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:37:10.397

**回答第一个问题：**您必须使滚动视图与页面大小一样大，启用其`pagingEnabled`属性，然后以某种方式使其显示元素并响应其边界之外的触摸。请参阅此代码和这些链接：

```
@interface SmallPagedScrollView: UIScrollView <UIScrollViewDelegate> {
    UIEdgeInsets responseInsets;
    NSMutableArray *items;
}

@implementation SmallPagedScrollView

@synthesize responseInsets;

- (id)init
{
if ((self = [super initWithFrame:CGRectMake(x, y, w, h)]))
{
    self.backgroundColor = [UIColor clearColor];
    self.pagingEnabled = YES;
    self.showsHorizontalScrollIndicator = NO;
    self.showsVerticalScrollIndicator = NO;
    self.clipsToBounds = NO;

    CGFloat hInset = 3 * self.width / 2;
    self.responseInsets = UIEdgeInsetsMake(0.0f, hInset, 0.0f, hInset);
    self.delegate = self;

    items = [[NSMutableArray alloc] init];
}
return self;
}

- (void)dealloc
{
[items release];
[super dealloc];
}

- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event
{
CGPoint parentLocation = [self convertPoint:point toView:self.superview];
CGRect responseRect = self.frame;
responseRect.origin.x -= self.responseInsets.left;
responseRect.origin.y -= self.responseInsets.top;
responseRect.size.width += self.responseInsets.left + self.responseInsets.right;
responseRect.size.height += self.responseInsets.top + self.responseInsets.bottom;

return CGRectContainsPoint(responseRect, parentLocation);
} 
```

另请参阅[以小于帧大小的增量分页 UIScrollView](https://stackoverflow.com/questions/1677085/paging-uiscrollview-in-increments-smaller-than-content-size)（Split 的答案）

**回答第二个问题：**您可以使用以下公式计算所选页面：

```
int selectedIndex = (scrollView.contentOffset + scrollView.size.width / 2) / scrollView.size.width; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:32:07.157

一种干净且高效的内存方法是拥有一个`UINavigationController`&`UIToolBar`像这样 -

![在此处输入图像描述](../Images/6bf4432c29ec0e6d5091d9ed09f97893.png)

当用户通过弹出并按下它们来点击`UIToolBar`调用中的任何按钮时。`viewController`

我希望可以清楚地看到外观和感觉可以接近您在图像中显示的内容，我说的是功能。

# signalr - SignalR 集线器被清除

> ID：11349445
> 
> 赞同：2
> 
> 时间：2012-07-05T17:27:45.607
> 
> 标签：signalr

我刚刚将依赖注入框架从 Ninject 切换到 StructureMap - 因为 Ninject 产生了非常糟糕的性能！

我遇到的问题是，当我连接 DependencyResolver 时，RouteTable.Routes.MapHubs 行清除了我的集线器：

```
GlobalHost.DependencyResolver = new SignalRDependencyResolver(ObjectFactory.Container);
RouteTable.Routes.MapHubs(GlobalHost.DependencyResolver); 
```

这意味着 /SignalR/hubs javascript 文件中的 hubs 对象有一个空的 Hubs 对象。

我在 application_start 中分配 DependencyResolver，就像在 wiki 中一样，我在 SignalR 之后执行我的 MVC4 和 WebAPI Dependency Resolvers。

这可能是什么原因造成的？

更新 - 这是 DependencyResolver 实现：

```
public class SignalRDependencyResolver : DefaultDependencyResolver
    {
        private IContainer _container;

        public SignalRDependencyResolver(IContainer container)
        {
            _container = container;
        }

        public override object GetService(Type serviceType)
        {
            object service = null;
            if (!serviceType.IsAbstract && !serviceType.IsInterface && serviceType.IsClass)
            {
                // Concrete type resolution
                service = _container.GetInstance(serviceType);
            }
            else
            {
                // Other type resolution with base fallback
                service = _container.TryGetInstance(serviceType) ?? base.GetService(serviceType);
            }
            return service;
        }

        public override IEnumerable<object> GetServices(Type serviceType)
        {
            var objects = _container.GetAllInstances(serviceType).Cast<object>();
            objects.Concat(base.GetServices(serviceType));
            return objects;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:13:19.043

这是最终工作的依赖关系解析器实现：

```
public class SignalRDependencyResolver : SignalR.DefaultDependencyResolver
{
    private readonly IContainer _container;

    public SignalRDependencyResolver(IContainer container)
    {

        if (container == null)
        {
            throw new ArgumentNullException("container");
        }

        _container = container;
    }

    public override object GetService(Type serviceType)
    {
        var instance = _container.TryGetInstance(serviceType) ?? base.GetService(serviceType);
        return instance;
    }

    public override IEnumerable<object> GetServices(Type serviceType)
    {
        IEnumerable<object> instances =  _container.GetAllInstances(serviceType).Cast<object>();
        IEnumerable<object> instances2 = base.GetServices(serviceType);

        return instances2.Concat(instances);
    }
} 
```

# iphone - 以响应式设计（css媒体查询）为目标的iphone4，就好像较低的分辨率一样

> ID：11349446
> 
> 赞同：10
> 
> 时间：2012-07-05T17:27:59.773
> 
> 标签：iphone, css, responsive-design, media-queries

之前一定已经回答过了，但我找不到相关的问题。

我设计了一个响应式网站，css 媒体查询一直向下正确显示在 320 宽上。

我想要的是 iPhone4 (640 x 960) 在纵向模式（640 宽）下遵守媒体查询，就好像它的 display-width = 320 像素一样。理由：尽管 iphone 有更多像素，但我确实想向那些用户显示一个简化的布局，类似于非高密度手机的用户。

有什么方法可以做到这一点，例如为这些高像素密度手机指定一些元标记？

当然，我可以为 iphone 4 等定义单独的媒体查询，`min-device-pixel-ratio: 2`但这会导致单独的 css 媒体查询（一个用于低像素密度，一个用于高像素密度），它们基本上具有相同的逻辑，这似乎不是很干燥对我来说（[http://en.wikipedia.org/wiki/Don%27t_repeat_yourself](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)）

奇怪的是：像素密度为 2 的新 Ipad 3 可以正确呈现我想要的方式，即：它模仿（至少就 css 媒体查询而言）分辨率只有一半的设备。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-05T17:57:14.107

iPhone 4（和 4S）将响应此元标记：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

这是您所追求的“初始规模”部分。它将使高分辨率设备表现得像 320 像素宽（或横向 480 像素）。

您应该注意[横向方向的其他错误](http://webdesignerwall.com/tutorials/iphone-safari-viewport-scaling-bug)。

另外，请记住，媒体查询有一个[方向参数可用：](http://www.1stwebdesigner.com/css/how-to-use-css3-orientation-media-queries/)

```
@media screen and (orientation:landscape) {
/* Landscape styles */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:14:44.053

首先：我认为您的问题中有一个错字——在 640x960 显示器上，640 宽是纵向模式，而不是横向模式。纵向是纵向的，横向是横向的。

也就是说，如果我没看错你的问题，那么你是在问如何使用媒体查询来定位视网膜显示屏 iPhone 的宽度。

答案是你不能——retina display iphone 和 non-retina display 都向浏览器报告自己为 320x240。正如您所指出的，不同之处在于视网膜显示器具有 2 倍像素密度，您可以使用媒体查询来定位：

```
.avatar {
    display: block;
    width: 50px;
    height: 50px;
    background: url("50x50-avatar.png");
}
@media only screen and (-moz-min-device-pixel-ratio: 2),
       only screen and (-o-min-device-pixel-ratio: 2/1),
       only screen and (-webkit-min-device-pixel-ratio: 2),
       only screen and (min-device-pixel-ratio: 2) {
  .avatar {
    background: url("100x100-avatar.png");
    background-size: 50px 50px;
  }
} 
```

此示例用于在视网膜显示器上显示高分辨率图像，但您可以使用相同的技术来调整视网膜显示器的布局。

因此，简而言之，首先为非视网膜显示器编写样式，然后使用媒体查询添加视网膜显示器覆盖，这应该可以避免您的 DRY 问题。

进一步阅读：

*   [视网膜 iPad 特定 CSS](https://stackoverflow.com/questions/9780189/retina-ipad-specific-css)
*   [Safari 开发者库：配置视口](https://developer.apple.com/library/safari/#documentation/appleapplications/reference/safariwebcontent/UsingtheViewport/UsingtheViewport.html#//apple_ref/doc/uid/TP40006509-SW1)

# c# - 如何让线程等待特定秒

> ID：11349448
> 
> 赞同：2
> 
> 时间：2012-07-05T17:28:07.963
> 
> 标签：c#, multithreading

我有一个从网上读取一些数据的函数（请参见下面的代码）。这个函数的问题是有时它会很快返回，但有时它会无限期地等待。我听说线​​程可以帮助我等待一段确定的时间并返回。

你能告诉我如何让一个线程等待'x'秒并在没有记录活动的情况下返回。结果，我的函数还返回一个字符串，是否可以在使用线程时捕获该值？

```
 private string ReadMessage(SslStream sslStream)
        {
            // Read the  message sent by the server.
            // The end of the message is signaled using the
            // "<EOF>" marker.
            byte[] buffer = new byte[2048];
            StringBuilder messageData = new StringBuilder();
            int bytes = -1;

            try
            {
                bytes = sslStream.Read(buffer, 0, buffer.Length);

                // Use Decoder class to convert from bytes to UTF8
                // in case a character spans two buffers.
                Decoder decoder = Encoding.ASCII.GetDecoder();
                char[] chars = new char[decoder.GetCharCount(buffer, 0, bytes)];
                decoder.GetChars(buffer, 0, bytes, chars, 0);
                messageData.Append(chars);
                // Check for EOF.
            }
            catch (Exception ex)
            {

                throw;
            }

            return messageData.ToString();
        } 
```

对于安德烈卡利尔的评论：

我的需要是读取/写入一些值到 SSL 服务器。对于每个写入操作，服务器都会发送一些响应，ReadMessage 负责读取传入的消息。我发现 ReadMessage(sslStream.Read(buffer, 0, buffer.Length);) 永远等待的情况。为了解决这个问题，我考虑了可以等待“x”秒然后返回的线程。以下代码演示了 ReadMEssage 的工作原理

```
 byte[] messsage = Encoding.UTF8.GetBytes(inputmsg);
            // Send hello message to the server. 
            sslStream.Write(messsage);
            sslStream.Flush();
            // Read message from the server.
            outputmsg = ReadMessage(sslStream);
           // Console.WriteLine("Server says: {0}", serverMessage);
            // Close the client connection.
            client.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:35:15.040

您不能（理智地）让第二个线程中断您正在执行此代码的线程。改为使用[读取超时](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.readtimeout.aspx)：

```
private string ReadMessage(SslStream sslStream)
{
    // set a timeout here or when creating the stream
    sslStream.ReadTimeout = 20*1000;
    // …
    try 
    {
        bytes = sslStream.Read(…);
    } 
    catch (IOException) 
    {
        // a timeout occurred, handle it
    }
} 
```

顺便说一句，以下构造毫无意义：

```
try
{
    // some code
}
catch (Exception ex) {
    throw;
} 
```

如果您所做的只是重新抛出，那么您根本不需要该`try..catch`块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T17:33:23.103

您可以在 上设置[ReadTimeout](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.readtimeout.aspx)，`SslStream`以便调用`Read`将在指定的时间后超时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T17:34:24.710

如果您不想**阻塞主线程**，请使用**异步模式**。

在不确切知道您要实现的目标的情况下，听起来您想从可能需要很长时间才能响应的 SSL 流中读取数据，而不会阻塞您的 UI/主线程。

您可以考虑使用[BeginRead异步读取](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.beginread)

使用这种方法，您定义了一个回调方法，每次 Read 读取数据并将其放入指定的缓冲区时都会调用该方法。

只是睡觉（无论是使用还是通过在 上`Thread.Sleep`设置[ReadTimeout](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.readtimeout.aspx)`SslStream`）都会阻塞运行此代码的线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T17:34:00.353

通过将 ReadMessage 放在自己的线程中等待答案，将其设计为异步的。提供答案后，创建一个事件返回到主代码以处理其输出。

# ruby-on-rails - 有没有办法测试/验证 production.rb （或任何环境文件）

> ID：11349451
> 
> 赞同：1
> 
> 时间：2012-07-05T17:28:14.297
> 
> 标签：ruby-on-rails

我在 UAT 环境中遇到了问题，因为在 UAT 环境中存在配置问题`config/environments/uat.rb`

有没有办法在部署之前测试/验证 uat.rb 或 production.rb 等环境文件以捕获错误？

在 rspec 中使用 require 加载文件可能是一个问题，因为它可能会影响其他测试，对此不确定。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:45:03.523

在部署到生产环境之前，我总是使用环境标志在我的开发机器上以生产模式运行我的代码：

```
rails s --environment=production 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T17:45:35.777

您必须根据编写这些测试的预计 ROI（投资回报）​​来选择要编写的测试。测试不是免费的——远非如此。他们需要时间来创建和维护，他们会破坏您的项目等。只编写您认为将来有用的测试。

过去我在配置方面遇到过很多问题，解决方案一直是 KISS - 保持简单愚蠢。大多数应用程序只需要很少的配置，因此很难配置错误。

# sql-server-2008 - 可以获取记录块插入的所有身份吗？

> ID：11349452
> 
> 赞同：0
> 
> 时间：2012-07-05T17:28:15.167
> 
> 标签：sql-server-2008, tsql

考虑以下 TSQL：

```
INSERT INTO Address(Street1, City, State, ZipCode)
SELECT Street1, City, StateCode, ZipCode
    FROM Contact 
```

地址有一个自动设置的标识列。有没有办法获取新插入的地址记录的身份列表？

我知道有@@IDENTITY，但这只是返回最后一个身份。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:33:57.383

假设标识列称为 AddressID，您可以：

```
INSERT INTO dbo.Address(Street1, ...)
OUTPUT inserted.AddressID
SELECT Street1, ...
  FROM dbo.Contact; 
```

或者：

```
DECLARE @NewAddresses TABLE(AddressID INT);

INSERT INTO dbo.Address(Street1, ...)
OUTPUT inserted.AddressID INTO @NewAddresses
SELECT Street1, ...
  FROM dbo.Contact; 
```

请记住`@@IDENTITY`，*几乎*从不使用。即使在处理单行插入时，`SCOPE_IDENTITY()`也更安全。有关更多背景信息，请参阅[此答案](https://stackoverflow.com/questions/11284395/ident-current-equivalent-for-current-session/11284761#11284761)。

# android - 以编程方式添加 textViews 不会打印任何内容

> ID：11349455
> 
> 赞同：0
> 
> 时间：2012-07-05T17:28:39.740
> 
> 标签：android

我有三个彼此具有相同数量元素的列表，我想将所有列表的第一个元素放在一个表格中，然后将所有列表的第二个元素放在另一个表格中，这些列表是：

```
competitoinsIDs = new LinkedList<String>();
                marks = new LinkedList<String>();
                numOfQuestions = new LinkedList<String>(); 
```

所以我使用这个功能：

```
private void addTextViews() {
        // TODO Auto-generated method stub
        TableLayout tbl=(TableLayout) findViewById(R.id.tlMarksTable);
        for(int ctr=0;ctr<marks.size();ctr++)
        {
        //Creating new tablerows and textviews
        TableRow row=new TableRow(this);
        TextView txt1=new TextView(this);
        TextView txt2=new TextView(this);
        TextView txt3=new TextView(this);
        //setting the text
        txt1.setText(competitoinsIDs.get(ctr));
        txt2.setText(marks.get(ctr));
        txt3.setText(numOfQuestions.get(ctr));
        //the textviews have to be added to the row created
        row.addView(txt1);
        row.addView(txt2);
        row.addView(txt3);
        tbl.addView(row);
        }
    } 
```

这是布局xml

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableLayout
        android:id="@+id/tlMarksTable"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="5dip"
            android:weightSum="2" >

            <TextView
                android:id="@+id/tvMarksCompetitionID"
                android:layout_weight="1"
                android:text="Competition"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/tvMarksMarks"
                android:layout_weight="1"
                android:text="Marks"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/tvMarksQuestionsNum"
                android:layout_weight="1"
                android:text="Questions"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>
    </TableLayout>

</FrameLayout> 
```

请问我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T17:39:01.673

问题是您没有正确设置`LayoutParams`并`TableRows`添加`TextView`到布局中：

```
private void addTextViews() {
        TableLayout tbl=(TableLayout) findViewById(R.id.tlMarksTable);
        for(int ctr=0;ctr<marks.size();ctr++) {
            TableRow row=new TableRow(this);
            TableLayout.LayoutParams tlp = new TableLayout.LayoutParams(TableLayout.LayoutParams.FILL_PARENT, TableLayout.LayoutParams.WRAP_CONTENT);
            TextView txt1=new TextView(this);
            TableRow.LayoutParams text1lp = new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT); 
            TextView txt2=new TextView(this);
            TableRow.LayoutParams text2lp = new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT); 
            TextView txt3=new TextView(this);
            TableRow.LayoutParams text3lp = new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT); 

            txt1.setText(competitoinsIDs.get(ctr));
            txt1.setLayoutParams(text1lp);
            txt2.setText(marks.get(ctr));
            txt2.setLayoutParams(text2lp);
            txt3.setText(numOfQuestions.get(ctr));
            txt3.setLayoutParams(text3lp);
            row.addView(txt1);
            row.addView(txt2);
            row.addView(txt3);
            row.setLayoutParams(tlp);
            tbl.addView(row);
        }
} 
```

这是假设您的数据列表不为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:38:01.297

添加为 TableRow 和 TextView 到`TableLayout`：

```
for(int ctr=0;ctr<marks.size();ctr++)
        {       
       //YOUR CODE....
        TableRow row=new TableRow(this);
        row.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        TextView txt1=new TextView(this);
        txt1.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        TextView txt2=new TextView(this);
        txt1.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        TextView txt3=new TextView(this);
        txt3.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
        //YOUR CODE....
    } 
```

# objective-c - 在 UITextView 的一个单词中长按获取单词

> ID：11349459
> 
> 赞同：5
> 
> 时间：2012-07-05T17:29:06.050
> 
> 标签：objective-c, ios, uigesturerecognizer, uipopovercontroller

现在我已经在 UITextView 中检测到长按

```
 - (void)viewDidLoad
    {
         [super viewDidLoad];
         UILongPressGestureRecognizer *LongPressgesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPressFrom:)];    
         [[self textview] addGestureRecognizer:LongPressgesture];
         longPressGestureRecognizer.delegate = self;
    }
    - (void) handleLongPressFrom: (UISwipeGestureRecognizer *)recognizer
    {
         CGPoint location = [recognizer locationInView:self.view];

         NSLog(@"Tap Gesture Coordinates: %.2f %.2f", location.x, location.y);
    } 
```

现在，我应该如何获取长按的单词内容，并获取该单词的矩形以准备显示 PopOver？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T21:29:15.230

此函数将返回 UITextView 中给定位置的单词。

```
+(NSString*)getWordAtPosition:(CGPoint)pos inTextView:(UITextView*)_tv
{
    //eliminate scroll offset
    pos.y += _tv.contentOffset.y;

    //get location in text from textposition at point
    UITextPosition *tapPos = [_tv closestPositionToPoint:pos];

    //fetch the word at this position (or nil, if not available)
    UITextRange * wr = [_tv.tokenizer rangeEnclosingPosition:tapPos withGranularity:UITextGranularityWord inDirection:UITextLayoutDirectionRight];

    return [_tv textInRange:wr];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-18T00:45:50.597

**斯威夫特 4**

为方便起见，用 swift 编写的@cayeric 答案的副本。

```
func getWord(at position: CGPoint, in textView: UITextView) -> String?{
    var point = position

    //eliminate scroll offset
    point.y += textView.contentOffset.y

    //get location in text from textposition at point
    guard let tapPos = textView.closestPosition(to: point) else {
        return nil
    }

    //fetch the word at this position (or nil, if not available)
    guard let wordRange = textView.tokenizer.rangeEnclosingPosition(tapPos, with: .word, inDirection: UITextWritingDirection.rightToLeft.rawValue) else {
        return nil
    }

    return textView.text(in: wordRange)
} 
```

# android - 在Android中获取动态添加的复选框ID

> ID：11349461
> 
> 赞同：3
> 
> 时间：2012-07-05T17:29:17.807
> 
> 标签：android

我正在我的应用程序中动态添加一个复选框，并且我想删除已检查的记录。但是，我没有得到复选框的 ID。我怎样才能做到这一点？

代码：

```
package com.my.StudentInfoManagement;

public class ListData extends Activity{

    DataHelper dh;
    TableLayout tb;
    CheckBox[] ch=new CheckBox[50];
    EditText ed;
    int a[]=new int[50];
    int k=0;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listdataxml);
        dh=new DataHelper(this);
        System.out.println("in list data");
        List<String> names= this.dh.selectAll();
        ed=(EditText) findViewById(R.id.ed_id);
        tb=(TableLayout) findViewById(R.id.table);
        int i,j=1;
        TextView name1 = null,id,dob,gender,branch,email,address,mobile;
        String name11,id1 = null,dob1,gender1,branch1,email1,address1,mobile1;
        TableRow tr=new TableRow(this);

        tr.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
        TextView tv=new TextView(this);

        String c = null;
        String data[]=new String[50];

        int cnt=0;
        for(String name:names)
            {       
                if((!name.equals("-999")))
                {
                    data[cnt]=name;
                    cnt++;
                    System.out.println("........."+name);
                }
                else
                {
                    cnt=0;
                    name1=new TextView(this);
                    name1.setText(data[1]+" ");
                    id=new TextView(this);
                    id.setText(data[0]+" ");
                    System.out.println("ID is...."+data[0]);
                    dob=new TextView(this);
                    dob.setText(data[3]+" ");
                    gender=new TextView(this);
                    gender.setText(data[2]+" ");
                    branch=new TextView(this);
                    branch.setText(data[4]+" ");
                    mobile=new TextView(this);
                    mobile.setText(data[5]+" ");
                    email=new TextView(this);
                    email.setText(data[6]+" ");
                    address=new TextView(this);
                    address.setText(data[7]+" ");

                    tr=new TableRow(this);
                    tr.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

                    ch[k]=new CheckBox(this);
                    System.out.println("sysout");

                    i=Integer.parseInt(data[0]);
                    ch[k].setId(i);

                    tr.addView(ch[k]);
                    a[k++]=i;

                    tr.addView(id);
                    tr.addView(name1);
                    tr.addView(dob);
                    tr.addView(gender);
                    tr.addView(branch);
                    tr.addView(mobile);
                    tr.addView(email);
                    tr.addView(address);
                tb.addView(tr,new TableLayout.LayoutParams(                         LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
                    j++;
                    System.out.println("count"+j);  
                }
            }
    }

    public void delete(View v){
        System.out.println("In delete");
        int bb=k,id ;
         for (int i=0; i <k; i++) 
        {
             final int j = a[i];
             System.out.println("in for loop"+j);

                ch[j].setOnCheckedChangeListener(new OnCheckedChangeListener() {
                    @Override
                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked) {
                        System.out.println("Checked ID :: " + ch[j].getId());
                    }
                });
            }
        System.out.println("00000000000000000..."+id);
        dh.deleteData(id);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:38:58.537

强文本只需取一个**全局变量**

```
int chkId = 1001; 
```

然后在**动态**添加 CheckBox 时，将其 id 设置为

```
ch.setId(++chkId); 
```

然后在删除 CheckBox 时，您可以通过使用简单地**获取 Checked CheckBox 的 id**

```
getId() 
```

方法

请参阅以下演示：

```
public class ChkBoxesActivity extends Activity {
    int chId = 1000;
    int chPos = -1;

    LinearLayout ll;
    String[] names = {"Tom", "Dick", "Keanu", "Harry", "Katrina", "Peter", "Julia", "Emma"};
    CheckBox[] ch;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ll = (LinearLayout) findViewById(R.id.ll);
        ch = new CheckBox[names.length];

        for(int i=0; i<names.length; i++) {
            ch[i] = new CheckBox(this);
            ch[i].setId(chId++);
            System.out.println("CHID :: "+chId);
            System.out.println("I :: "+i);
            ch[i].setText(names[i]);
            ll.addView(ch[i]);
        }

        for (int i = 0; i < names.length; i++) {
            final int j = i;
            ch[j].setOnCheckedChangeListener(new OnCheckedChangeListener() {
                @Override
                public void onCheckedChanged(CompoundButton buttonView,
                        boolean isChecked) {
                    System.out.println("Checked ID :: " + ch[j].getId());
                }
            });
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T17:43:21.960

在您专门设置它们之前，动态添加的视图没有 ID。因此，当您添加到布局时，您需要在视图上调用 view.setId()，否则您将无法使用 view.getId() 来引用它。

不久前，我在尝试动态创建 RelativeLayout 并相对于彼此定位内部视图时遇到了类似的问题；他们不会调整他们应该有的方式，因为在我明确为他们设置 ID 之前，ID 并不存在。

另外，你为什么这样做：

```
ch.getId();
ch.setId(1); 
```

这完全没有意义。把它拿出来。

此外，您还需要一个将 CheckBox 链接到要删除的视图的参考。在这种情况下，我将创建一个新的 ArrayList 对象，其中包含一个 CheckBox 和一个 View，即 IE。

```
public Class MyRow{        
    CheckBox c;
    View v;

    public MyRow() {   }        
} 
```

然后在动态添加视图时，将它们添加到 MyRow 或任何类中，然后将该类添加到 ArrayList 中，然后繁荣，您现在在它们之间有了引用，并且可以删除正确的引用。

# javascript - 移动页面重定向问题

> ID：11349464
> 
> 赞同：0
> 
> 时间：2012-07-05T17:29:24.983
> 
> 标签：javascript, redirect, mobile, jquery-mobile

我正在尝试将此页面[页面](http://siteripe.com)重定向到我目前正在处理的 Jquery 移动网站，但它不会重定向。我在标题区域中有下面的代码行，但它不起作用。知道问题可能是什么吗？

```
<script type="text/javascript">
<!--
if (screen.width <= 699) {
document.location = "mobile.html";
}
//-->
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:32:40.753

看看这个网站：[http ://detectmobilebrowsers.com](http://detectmobilebrowsers.com)

它为许多不同的编程语言和 Web 服务器提供代码示例。

例如，要重定向到纯 JavaScript 的移动版本，您可以使用：

```
(function(a,b){if(/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|meego.+mobile|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))window.location=b})(navigator.userAgent||navigator.vendor||window.opera,'http://detectmobilebrowser.com/mobile'); 
```

# java - 从 Scratch 对未经测试的代码执行单元和集成测试的方法

> ID：11349466
> 
> 赞同：0
> 
> 时间：2012-07-05T17:29:35.030
> 
> 标签：java, unit-testing, testing, junit, integration-testing

基本问题是“*应该如何开始为未经测试的项目编写单元测试和集成测试？特别是考虑到这个人不熟悉代码并且以前没有做过集成测试的事实。* ”

考虑必须为项目编写单元测试和集成测试的场景。该项目使用 Java/J2EE 技术，根本没有编写任何测试。

我面临的困境是由于我还没有编写代码，我不想立即重构代码来编写测试。我还必须选择一个测试框架。我正在考虑使用 Mockito 和 Powermock。

我还必须估计测试的代码覆盖率。然后进行集成测试。我将不得不研究集成测试工具并选择一个。我之前没有为项目做过任何集成测试或估计可接受的代码覆盖水平。

由于我是独立工作，如果有一些关于我应该从什么开始的策略、提示、建议以及可以推荐的工具，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:53:07.427

先到先得：

1.  了解架构，主要组件有哪些？
2.  如果您对程序提供的特性和功能没有很好的概述，请列出它们并创建它们的层次结构
3.  熟悉代码，我推荐以下方法：
    *   在你了解了它不同组件的代码从哪里开始之后，试着弄清楚方法调用层次结构（在Eclipse中你可以通过按F3轻松跳转源代码定义）
    *   稍后你可以这样做，在调试代码时，这样它会自动跳转到定义，另外你可以观察程序的状态如何变化

对于单元测试本身，我可以向初学者推荐[清洁代码](http://books.google.de/books/about/Clean_Code.html?id=dwSfGQAACAAJ&redir_esc=y)第 9 章（大约**12 页**）。它使用 JUnit 作为示例，并很好地介绍了如何进行良好的测试。

在那里，您将学习到 FIRST 原则之类的东西，即单元测试应该是：

**快速、独立、可重复、自我验证和及时**

一些澄清，JUnit 是最常用和接受的测试框架本身。Mockito 和 Powermock 是模拟框架，当您想要进行**集成测试**时，它们与 JUnit 一起使用。

对于代码覆盖率，我只能推荐[Cobertura](http://cobertura.sourceforge.net/)，但还有[更多](https://stackoverflow.com/questions/1518362/code-coverage-tools-in-java)。

![科贝图拉](../Images/a90a91b28b571e18aa03c9d3c86226a1.png)

在进行集成测试之前先从单元测试开始（自下而上），你也可以反过来（自上而下），但既然你说你没有那么多经验，我会坚持第一个。

最后，去做吧，开始吧。在实际编写测试代码时，您将学得最多、最快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T17:45:00.060

*   停止。“ `..not familiar with the code..`”。首先熟悉代码，最重要的是熟悉它的预期功能。您不能重构或单元测试您不熟悉的代码。
*   由于您之前没有进行过单元测试，我建议您通过 unit-tests[学习并获得方便](https://stackoverflow.com/questions/135651/learning-unit-testing)。

> 重要提示：坏/错误的单元测试比没有单元测试更糟糕。这是因为下一个维护您的代码的人会误解该功能。

*   那里有一堆[代码覆盖率工具](https://stackoverflow.com/questions/1518362/code-coverage-tools-in-java)。你可以使用哪个更能引诱你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T17:59:27.320

向没有测试的遗留代码添加测试是一项艰巨的任务。正如@Suraj 所提到的，熟悉代码库和预期的功能。如果你不知道它应该做什么，你就无法测试它。

在选择要测试的代码区域方面。从高商业价值领域开始。哪个功能最重要？你想确保你有一个强大的代码测试集。

由于您没有任何单元/集成测试，因此我将从一些高级端到端测试开始，这些测试至少可以确保给定系统的一些输入，您可以获得一些预期的输出。这并不能确保正确性，但至少可以确保一致性。

然后，当您开发测试套件时，您可以确信所做的重构不会改变代码的行为（当然，除非您发现正在修复的错误）。

对于测试框架，JUnit 是标准的单元测试框架。请注意，Mockito 和 Powermock 框架本身并不是测试框架，但它们可以在 JUnit 中使用。

对于验收测试，还有各种框架可以提供帮助。对于 Web UI 测试，Selenium 是相当标准的。还有像 Fitnesse 这样的工具可以进行更多的表格驱动测试。

还有一些常见的框架可以帮助提高代码覆盖率 - 想到 Cobertura、Emma、Clover。

我还将设置一个自动构建（Jenkins 构建服务器的设置非常简单）。这将允许您在每次签入时运行测试。即使您的代码覆盖率一开始会很低，但养成这个习惯是一个很好的习惯。

# asp.net-mvc-3 - 在 MVC3 中相互验证模型集合

> ID：11349467
> 
> 赞同：3
> 
> 时间：2012-07-05T17:29:35.633
> 
> 标签：asp.net-mvc-3

我有一个可变长度的人物模型列表，我使用@Html.EditorFor 为其生成表单。

```
public class Person
{
    public string First { get; set; }
    public string Last { get; set; }
} 
```

验证没有人对象具有相同的名字和姓氏的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:55:45.483

以下是验证集合中没有 2 个项目相同的***最小实现：***`Person`

```
public class NoDuplicatePersonsAttribute : ValidationAttribute
{
    public override bool IsValid(object value)
    {
        var people = value as IList<Person>;
        int count = people.Count();

        if (people == null) return true;

        for (int x = 0; x < count; x++)
        {
            for (int y = 0; y < count; y++)
            {
                if (x != y &&
                    people[x].FirstName == people[y].FirstName &&
                    people[x].LastName == people[y].LastName) 
                        return false;
            }
        }

        return true;
    }
}

public class IndexViewModel
{
    [NoDuplicatePersons]
    public IList<Person> People { get; set; }
}

public class Person
{
    public string FirstName{ get; set; }
    public string LastName { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:32:25.060

如果可能，我会在表上创建一个唯一约束并在 Person insert 中拦截 DB Exception。

但是您也可以创建一个验证属性来检查现有的名字/姓氏组合。

此伪代码示例**不考虑检查 First Name/Last Name combo**，而只是查看一个字段 NAME，作为每个问题的自定义验证示例。

创建自定义验证属性：

```
public class NameAttribute : ValidationAttribute, IClientValidatable
{
    //Validate logic
} 
```

在模型中，使用自定义验证属性并包含错误消息：

```
public class Person
{   

    [Required]
    [Name (ErrorMessage = "This name already exists.")]   
    [Display(Name = "Name")]
    public string Name { get; set; }   

} 
```

看法：

```
 <div class="editor-field">
          @Html.TextBoxFor(m => m.Name)
          @Html.ValidationMessageFor(m => m. Name)
    </div> 
```

# android - 如何在 Android 模拟器中将图像从 SD 卡显示到图库

> ID：11349470
> 
> 赞同：0
> 
> 时间：2012-07-05T17:29:55.810
> 
> 标签：android

我将图像文件添加到 Android Eclips DDMS 平台。启动模拟器并单击图库图标后，没有显示图像。而是显示“未找到媒体”消息。任何帮助解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:22:23.223

尝试这个......................

**1.**打开DDMS透视图。

**2.**

```
Goto FileExplorer option ---> Click on the arrow before the "mnt" folder ---> 
   Click on the arrow before the "sdcard" folder ---> Select the "DCIM" folder. 
```

**3.**然后转到右上角，然后选择“将文件推送到设备选项”。

**4.**选择要推送的图片。

**5.重新启动模拟器....否则它将无法工作....!!**

**6.重启后，检查你的画廊..它会在那里......**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-22T14:58:55.853

推送文件后执行以下操作：

1.  转到 android 菜单，显示应用程序。
2.  然后打开开发工具并单击媒体扫描仪。这将扫描 sdCard。

# html - 为什么 Internet Explorer 不对“无效”元素应用 CSS？

> ID：11349471
> 
> 赞同：3
> 
> 时间：2012-07-05T17:29:57.307
> 
> 标签：html, css, internet-explorer

这适用于铬（我假设所有其他主要浏览器）

-html-

```
<invalid></invalid> 
```

-css-

```
invalid {
    color: red;
} 
```

`<invalid>`表示无效元素（不是 html 标准的一部分）

这是一个例子：http: [//jsfiddle.net/myhonor/4H7Hj/](http://jsfiddle.net/myhonor/4H7Hj/)

但是当我在 IE 中尝试这个时，它不起作用。

为什么会这样，有没有办法解决这个问题（这是 DTD 的事情吗？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T17:33:30.987

版本 9 之前的 IE 不会自动创建与它在标记中无法识别的任何标签相对应的 DOM 元素。这是 HTML5 元素在较旧的 IE 中无法工作的主要原因，需要包含 HTML5 shiv 才能工作。

在这种情况下，您甚至没有编写 HTML5；您正在编写自己的标记语言，它与 HTML 完全无关。解决此问题的最简单方法是实际编写 HTML……或者，如果您坚持制作自己的标签，则必须像 minitech 演示的那样手动创建它们，但希望完全自行连接它们。¹

* * *

¹ [浏览器无法识别为 HTML 一部分的元素通常被创建为`HTMLUnknownElement`DOM 中的对象（包括 IE9 和更高版本），据说这样做是为了向前兼容（参见 HTML5）。这些对象具有 的基本属性`HTMLElement`，但除此之外没有什么可做的了……]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T17:34:08.817

这就是 Internet Explorer 的工作方式，直到并包括版本 8。要修复它，只需`document.createElement`使用无效元素的名称调用：

```
document.createElement('invalid'); 
```

[这是您更新的 jsFiddle。](http://jsfiddle.net/minitech/4H7Hj/1/)这与您看到的所有 HTML5 刀的想法相同。而且，正如其他人已经建议的那样，编写有效的 HTML 通常是最好的解决方案 :)

# python - 如何定期运行 Python 脚本将数据导入 Django 应用程序？

> ID：11349476
> 
> 赞同：1
> 
> 时间：2012-07-05T17:30:21.783
> 
> 标签：python, django, data-importer

我有一个脚本可以扫描电子邮件收件箱中的特定电子邮件。该部分运行良好，我能够获取我感兴趣的数据。我现在想获取该数据并将其添加到 Django 应用程序中，该应用程序将用于显示信息。

我可以在 CRON 作业上运行脚本以定期获取新信息，但是如何将这些数据输入 Django 应用程序？

Django 服务器在 Apache / FastCGI 下的 Linux 机器上运行，如果这有所不同的话。

**[编辑]** - 回应斯里卡的问题`When you are saying " get that data into the Django app" what exactly do you mean?`......

Django 应用程序将负责以方便的形式存储数据，以便随后可以通过一系列视图显示。因此，该应用程序将包含一个具有合适成员的模型来存储传入数据。我只是不确定您如何连接到 Django 以创建这些模型对象的新实例并告诉 Django 存储它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:37:18.877

我认为[芹菜](http://celeryproject.org/)是你要找的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T17:35:49.897

您可以编写自定义管理命令以根据需要加载数据并通过 cron 作业运行该命令。您可以参考[编写自定义命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)

您也可以尝试现有的 loaddata 命令，但它会尝试从您的应用目录中添加的夹具加载数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T21:49:57.223

暂时忘记这是一个 Django 应用程序。它只是一堆 Python 代码。

这意味着，您的 Python 脚本完全可以自由地导入您在 Django 应用程序中拥有的数据库模型，并像在项目的标准模块中一样使用它们。

这里唯一的区别是，您可能需要注意导入 Django 使用这些模块所需的所有内容，而当请求通过正常的 Web 界面进入时，它会为您处理这些。

只需从您的应用程序中导入 Django 和所需的 models.py/您需要的任何其他模块即可。这是您的代码，而不是黑匣子。你可以从任何你想要的地方导入它。

**编辑：** Rohan 对自定义管理命令的 Django 文档的回答中的链接绝对是我上面所说的最不痛苦的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T21:19:17.610

我也做过同样的事情。

首先，我的脚本已经在解析电子邮件并将它们存储在数据库中，因此我在 settings.py 中设置了数据库，并用于`python manage.py inspectdb`基于该数据库创建模型。

然后只需构建一个视图来显示来自您的数据库的信息。

如果您的脚本还没有使用数据库，那么创建一个包含您想要存储的信息的模型会很简单，然后强制您的脚本写入模型描述的表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T17:40:13.917

让您的脚本像这样发送 HTTP Post 请求。这是图书馆请求

```
>>> files = {'report.xls': open('report.xls', 'rb')}

>>> r = requests.post(url, files=files)
>>> r.text 
```

然后在接收端，您可以使用 web.py 来处理这样的信息

```
x = web.input() 
```

然后用 x 做任何你想做的事

在 POST 请求的接收端导入 web 并编写一个处理该帖子的函数

例如

```
 def POST(self):

        x = web.input() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T17:35:39.383

当您说“将数据输入 DJango 应用程序”时，您到底是什么意思？

我猜你正在使用某种数据库（如mysql）。将您从 cronjob 收集的任何数据插入到 Django 应用程序正在访问的相应表中。还要将此 cron 数据插入到您的用户正在访问的相同表中。这样一来，您的更改会立即反映给使用该应用程序的用户，因为他们将从同一个表中访问数据。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-05T17:35:42.410

最好的办法？

在 django 端创建一个视图来处理接收数据，并让您的脚本在注册到该视图的 URL 上执行 HTTP POST。

您也可以从脚本中导入模型等，但我认为这不是一个好主意。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-05T18:35:52.953

如果您不想使用 HTTP 来回发送消息，您可以让脚本将电子邮件信息写入 .txt 文件，然后让您的 django 应用程序打开该文件并读取它。

编辑：

您可以将您的 CRON 作业设置为在早上 8 点阅读电子邮件，然后将其写入文本文件 info.txt。在你的代码中写类似

```
import time
    if '9' == time.strftime("%H"):
        file = open(info.txt)
        info = file.read() 
```

这将在上午 9 点到上午 10 点检查文件。如果您希望它只检查一次，只需在 if 语句中添加分钟。

# django - 将作者 ID 转换为用户模型时的一些麻烦

> ID：11349478
> 
> 赞同：0
> 
> 时间：2012-07-05T17:30:35.913
> 
> 标签：django, mongodb, mongoengine

我的帖子模型有作者 ID 列表

```
class Post(Document):
   authors_id = ListField(IntField(required=True), required=True) 
```

但有时我需要使用默认的 Django *User*类。我能以多快的速度做到这一点？

（我将 sqlite 用于用户和会话，将 MongoDB（mongoengine ODM）用于其他。不要问为什么:)）

我试图写它：

```
def get_authors(self):
    authors = list()
    for i in self.authors_id:
        authors.append(get_user(IntField.to_python(self.authors_id[i])))
    return authors 
```

...并引发“列表索引超出范围”异常。（作者 id 不是空的，真的）。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:58:06.603

不确定 to_python 方法，但由于您正在遍历 authors_id，因此无需执行

```
authors.append(get_user(IntField.to_python(self.authors_id[i]))) 
```

你应该擅长

```
authors.append(get_user(IntField.to_python(i))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T01:34:04.860

您说您收到此错误：

```
and unbound method to_python() must be called with IntField instance as first argument (got int instance instead) 
```

我从 MongoEngine 得到了类似的错误。就我而言，问题是我定义了这样的字段：

```
foo_id = IntField 
```

定义它的正确方法是：

```
foo_id = IntField() 
```

当我添加括号时，问题就消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T17:58:00.820

代替

```
IntField.to_python(self.authors_id[i])) 
```

我认为你只需要这样做：

```
IntField.to_python(i) 
```

在 Python 中，'for i in some_list' 构造为您提供列表的元素，而不是整数索引。

# scala - 在 scala 中应用几个字符串转换

> ID：11349480
> 
> 赞同：8
> 
> 时间：2012-07-05T17:30:53.373
> 
> 标签：scala, functional-programming, scalaz

我想在 scala 中以功能方式对字符串执行几个有序和连续的 replaceAll(...,...) 。

什么是最优雅的解决方案？斯卡拉兹欢迎！;)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-05T18:23:00.650

如果它只是几个调用，那么只需将它们链接起来。否则我想我会试试这个：

```
Seq("a" -> "b", "b" -> "a").foldLeft("abab"){case (z, (s,r)) => z.replaceAll(s, r)} 
```

或者，如果您喜欢带有混淆通配符和额外闭包的较短代码：

```
Seq("a" -> "b", "b" -> "a").foldLeft("abab"){_.replaceAll _ tupled(_)} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-06T07:40:33.610

首先，让我们从方法中得到一个函数`replaceAll`：

```
scala> val replace = (from: String, to: String) => (_:String).replaceAll(from, to)
replace: (String, String) => String => java.lang.String = <function2> 
```

现在您可以将`Functor`实例用于函数，在 scalaz 中[定义。](https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/Functor.scala#L88)这样，您可以使用`map`（或使其看起来更好，使用 unicode 别名）来组合函数。

它看起来像这样：

```
scala> replace("from", "to") ∘ replace("to", "from") ∘ replace("some", "none")
res0: String => java.lang.String = <function1> 
```

如果您更喜欢 haskell-way compose（从右到左），请使用`contramap`：

```
scala> replace("some", "none") ∙ replace("to", "from") ∙ replace ("from", "to")
res2: String => java.lang.String = <function1> 
```

您还可以通过`Category` [instance](https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/Category.scala#L97)获得一些乐趣：

```
scala> replace("from", "to") ⋙ replace("to", "from") ⋙ replace("some", "none")
res5: String => java.lang.String = <function1>

scala> replace("some", "none") ⋘ replace("to", "from") ⋘ replace ("from", "to")
res7: String => java.lang.String = <function1> 
```

并应用它：

```
scala> "somestringfromto" |> res0
res3: java.lang.String = nonestringfromfrom

scala> res2("somestringfromto")
res4: java.lang.String = nonestringfromfrom

scala> "somestringfromto" |> res5
res6: java.lang.String = nonestringfromfrom

scala> res7("somestringfromto")
res8: java.lang.String = nonestringfromfrom 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-11T12:14:36.337

这个问题的另一个基于 Scalaz 的解决方案是使用`Endo`monoid。这个 monoid 捕获了恒等函数（作为 monoid 的恒等元素）和函数组合（作为 monoid 的附加操作）。如果您要应用任意大小（甚至可能为空）的函数列表，此解决方案将特别有用。

```
val replace = (from: String, to: String) => (_:String).replaceAll(from, to)

val f: Endo[String] = List(
  replace("some", "none"),
  replace("to", "from"),
  replace("from", "to")    
).foldMap(_.endo) 
```

例如（使用 folone 的一个例子）

```
scala> f.run("somestringfromto")
res0: String = nonestringfromfrom 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-05T17:47:32.707

使用匿名参数定义一个替换函数，然后您可以将连续的替换函数链接在一起。

```
scala> val s = "hello world"
res0: java.lang.String = hello world

scala> def replace = s.replaceAll(_, _)
replace: (java.lang.String, java.lang.String) => java.lang.String

scala> replace("h", "H")  replace("w", "W")
res1: java.lang.String = Hello World 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-03-06T17:47:07.543

```
#to replace or remove multiple substrings in scala in dataframe's string column

import play.api.libs.json._
#to find
def isContainingContent(str:String,regexStr:String):Boolean={
  val regex=new scala.util.matching.Regex(regexStr)
  val containingRemovables= regex.findFirstIn(str)
  containingRemovables match{
    case Some(s) => true
    case None => false
  }
}
val colContentPresent= udf((str: String,regex:String) => {
  isContainingContent(str,regex)
})
#to remove
val cleanPayloadOfRemovableContent= udf((str: String,regexStr:String) => {
  val regex=new scala.util.matching.Regex(regexStr)
  val cleanedStr= regex.replaceAllIn(str,"")
  cleanedStr
})
#to define
val removableContentRegex=
"<log:Logs>[\\s\\S]*?</log:Logs>|\\\\n<![\\s\\S]*?-->|<\\?xml[\\s\\S]*?\\?>"

#to call
val dfPayloadLogPresent = dfXMLCheck.withColumn("logsPresentInit", colContentPresent($"payload",lit(removableContentRegex)))
val dfCleanedXML = dfPayloadLogPresent.withColumn("payload", cleanPayloadOfRemovableContent($"payload",lit(removableContentRegex))) 
```

# mongodb - Java EE 如何在 Mongo 中使用 EntityManager？

> ID：11349485
> 
> 赞同：2
> 
> 时间：2012-07-05T17:31:22.623
> 
> 标签：mongodb, java-ee-6, entitymanager

我正在尝试使用 mongo 数据库创建 Java EE 项目。我找不到任何好的工作示例。您如何为项目正确设置 JPA？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T01:23:49.223

[嘿，您至少应该在https://blogs.oracle.com/arungupta/entry/java_ee_6_and_nosql](https://blogs.oracle.com/arungupta/entry/java_ee_6_and_nosql)上查看 Arun Gupta 的博客文章。Gupta 是 Oracle Java EE 布道者，这篇文章介绍了使用 EclipseLink 与 MongoDB 建立 JPA 连接并部署到 Glassfish。如果你搜索他的博客，还有一篇关于如何在 Java EE 项目中使用 MongoDB 附带的 Java 驱动程序的早期条目。我还没有尝试过使用 EntityManager 的示例，但我正在考虑这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:11:01.510

Java EE 6（或在 JPA 2.0 中作为它的一部分）通常没有对 MongoDB 或 NoSQL 数据库的任何定义支持。

这就是为什么它的完成方式完全取决于 JPA 提供者的实现。如果您使用 EclipseLink，也许您可​​以尝试按照[此](http://java-persistence-performance.blogspot.de/2012/04/eclipselink-jpa-supports-mongodb.html)博客文章中给出的示例，并提出更多关于究竟什么不起作用的问题。

# php - PHPExcel 标题行覆盖第一个条目

> ID：11349491
> 
> 赞同：2
> 
> 时间：2012-07-05T17:31:56.117
> 
> 标签：php, mysql, database, phpexcel

好的，下一个 PHPExcel 问题。我有一个用户填写的 HTML 表单，数据将被发送到数据库。所有这一切都没有问题。我正在使用 PHPExcel 将该信息发送到 Excel 工作表，以便该组织的总裁可以查看已发送的报告（他选择在 Excel 中使用它）。当他单击按钮时，信息将下载到 Excel。这一切都很好，除了工作表的第一行被标题信息覆盖。我知道它是标题，因为如果我更改 $headings 并删除数组中的值，隐藏查询的一部分就会显示出来。

我从以下网址获得此代码：http: [//phpexcel.codeplex.com/discussions/246121/](http://phpexcel.codeplex.com/discussions/246121/)

可能存在编码错误，或者我可能没有将所有文件和类上传到互联网......

任何帮助表示赞赏。谢谢。

```
// connection with the database 
$dbhost = "I removed this for privacy"; 
$dbuser = "I removed this for privacy"; 
$dbpass = "I removed this for privacy"; 
$dbname = "I removed this for privacy"; 

mysql_connect($dbhost,$dbuser,$dbpass); 
mysql_select_db($dbname); 

// require the PHPExcel file 
require 'Classes/PHPExcel.php'; 

// simple query 

$query = "

SELECT dueDate, reporterName, program, noReportReason, recentActivity, impacted, fundsGenerated, fundsSpent, volunteers, input, potentialContacts, potentialSources
FROM reports
ORDER BY id

"; 

if ($result = mysql_query($query) or die(mysql_error())) 
{   
// Create a new PHPExcel object 
$objPHPExcel = new PHPExcel(); 
$objPHPExcel->getActiveSheet()->setTitle('Quarterly Project Reports'); 

// Loop through the result set 
$rowNumber = 1; 
while ($row = mysql_fetch_row($result)) 
{ 
$col = 'A'; 
foreach($row as $cell) 
{ 
$objPHPExcel->getActiveSheet()->setCellValue($col.$rowNumber,$cell); 
$col++; 
} 
$rowNumber++; 
}

$rowNumber = 1;
$headings = array('Due Date','Reporter Name','Name of Program','No Report This Quarter',
    'Recent Activity','Number of People Impacted','Funds Generated',
    'Funds Spent and Fuding Sources','Volunteers Mobilized','WNP Input',
    'Potential Contacts','Potential Sources'); 
$objPHPExcel->getActiveSheet()->fromArray(array($headings),NULL,'A'.$rowNumber);  

$rowNumber++; 
// Loop through the result set 
while ($row = mysql_fetch_row($result)) 
{
$col = 'A';
foreach($row as $cell) 
{
$objPHPExcel->getActiveSheet()->setCellValue($col.$rowNumber,$cell);
$col++;
}
$rowNumber++; 
}

//bold Header row
$objPHPExcel->getActiveSheet()->getStyle('A1:L1')->getFont()->setBold(true); 

//wrap column D
$objPHPExcel->getActiveSheet()->getStyle('D1:D'.$objPHPExcel->getActiveSheet()->getHighestRow())->getAlignment()->setWrapText(true);

//wrap column E
$objPHPExcel->getActiveSheet()->getStyle('E1:E'.$objPHPExcel->getActiveSheet()->getHighestRow())->getAlignment()->setWrapText(true); 

//set header row height
$objPHPExcel->getActiveSheet()->getRowDimension('1')->setRowHeight(20);

//set column widths
$objPHPExcel->getActiveSheet()->getColumnDimension('A')->setWidth(15);
$objPHPExcel->getActiveSheet()->getColumnDimension('B')->setWidth(20);
$objPHPExcel->getActiveSheet()->getColumnDimension('C')->setWidth(30);
$objPHPExcel->getActiveSheet()->getColumnDimension('D')->setWidth(50);
$objPHPExcel->getActiveSheet()->getColumnDimension('E')->setWidth(50);
$objPHPExcel->getActiveSheet()->getColumnDimension('F')->setWidth(30);
$objPHPExcel->getActiveSheet()->getColumnDimension('G')->setWidth(30);
$objPHPExcel->getActiveSheet()->getColumnDimension('H')->setWidth(30);
$objPHPExcel->getActiveSheet()->getColumnDimension('I')->setWidth(30);
$objPHPExcel->getActiveSheet()->getColumnDimension('J')->setWidth(30);
$objPHPExcel->getActiveSheet()->getColumnDimension('K')->setWidth(30);
$objPHPExcel->getActiveSheet()->getColumnDimension('L')->setWidth(30); 

// Save as an Excel BIFF (xls) file 
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5'); 

header('Content-Type: application/vnd.ms-excel'); 
header('Content-Disposition: attachment;filename="WNPQuarterlyReports.xls"'); 

$objWriter->save('php://output'); 
exit(); 
} 
echo 'a problem has occurred... no data retrieved from the database'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:39:57.743

在此代码中，您确实有两个循环遍历结果集，一个从第 1 行开始，然后用标题覆盖第 1 行，然后再次循环遍历结果集（实际上不会循环，因为您已经到达末尾第一个循环中的结果集）从第 2 行开始

# gwt - 在浏览器上显示之前缓冲 PDF 内容时的 GWT 进度条

> ID：11349496
> 
> 赞同：1
> 
> 时间：2012-07-05T17:32:17.370
> 
> 标签：gwt, servlets, download, progress-bar

在我的 GWT 应用程序中，我编写了一个 servlet 来下载/流式传输 PDF 文件。

以下是代码。

```
 protected void updateResponse(HttpServletResponse response, InputStream dataStream, long contentLength, KnownContentTypes contentType, String filename, int cacheSeconds) {

    response.setHeader("Content-Type", contentType.getTypeString());
    response.setHeader("Content-Length", String.valueOf(contentLength));
    response.setHeader("Content-disposition", "inline;filename=" + filename);
    response.setHeader("Cache-Control", "max-age=" + cacheSeconds);

    byte[] buffer = new byte[BUFFER_SIZE];
    try {
         ServletOutputStream out = response.getOutputStream();
         while ((dataStream.read(buffer)) != -1) {
            out.write(buffer); 
         }

    } catch (IOException e) {
        sendError(response);

    } 
} 
```

pdf 在浏览器上成功呈现。问题是一些 pdf 的大小非常大，因为这是在 window.open 上调用的，所以我看到的只是一个空白浏览器。

我想显示一条动态消息，例如“已下载 1MB 的 5MB”，并在流式传输所有字节后显示/渲染整个 PDF 文件。

请让我知道如何做到这一点。我是 GWT 的新手，任何帮助都将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:14:15.160

这不能通过我们通常通过调用 servlet 发出的同步请求来完成，`Window.open`您必须发出 ajax 请求来计算进度并显示响应。

看看这个库：[http](http://code.google.com/p/gwtupload/) ://code.google.com/p/gwtupload/ 。它非常易于使用并且在大多数浏览器中都能正常工作。它使用`ajax`请求来计算进度。

# javascript - 在 Windows Metro App 中缓存背景

> ID：11349499
> 
> 赞同：0
> 
> 时间：2012-07-05T17:32:24.720
> 
> 标签：javascript, microsoft-metro

我正在开发一个 WinJS Windows Metro 应用程序，并且在我的一个页面上，我正在获取要显示为背景的图像的 URL。我可以通过使用 url（图像的 URL）并将其设置为 style.backgroundImage 来使其正常工作。

我需要在链接页面上使用相同的图像，但这意味着我必须发出另一个 HTTP 请求，这是我试图避免的。我研究了替代方案，发现 LocalFolder 作为一个选项。唯一的问题是我不知道如何访问该文件并将其设置为背景。

这是缓存数据以减少网络通话的正确方法吗？

这是我正在使用的代码：

```
function saveBackground(url) {
    localFolder.createFileAsync("background.jpg", Windows.Storage.CreationCollisionOption.replaceExisting).then(function (newFile) {
        var uri = Windows.Foundation.Uri(url);
        var downloader = new Windows.Networking.BackgroundTransfer.BackgroundDownloader();
        var promise = downloader.createDownload(uri, newFile);
        promise.startAsync().then(function () {
            //set background here.
            var wrapper = document.getElementById("wrapper").style;
            localFolder.getFileAsync("background.jpg").then(function (image) {

                console.log(image.path);
                var path = image.path.split("");
                var newLocation = [];
                //This is just to make the backslashes work out for the url()
                for (var i = 0; i < path.length; i++) {
                    if (path[i] != '\\') {
                        newLocation.push(path[i]);
                    } else {
                        newLocation.push('\\\\');
                    }
                }
                console.log(newLocation);
                var newPath = newLocation.join("");
                var target = "url(" + newPath + ")";
                wrapper.backgroundImage = target;
                console.log(wrapper.backgroundImage);
                wrapper.backgroundSize = "cover";

            });
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:24:45.530

这取决于您要传输哪种图像以及其中有多少。如果只有一个图像而不是重的图像（大约<5Mo），我建议您使用[WinJS.xhr](http://msdn.microsoft.com/en-us/library/windows/apps/br229787.aspx)，它允许您下载数据，更重要的是，它会在调用时立即下载数据。

[BackgroundTransfer](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.backgroundtransfer.aspx)应该用于大数据，例如视频、音乐、大图像。

关于图像的缓存，是的，您当然可以使用本地文件夹来执行此操作（您应该这样做）。

你应该看看大卫卡图赫写的这个系列文章真的很棒

[http://blogs.msdn.com/b/eternalcoding/archive/2012/06/15/how-to-cook-a-complete-windows-8-application-with-html5-css3-and-javascript-in-一个星期天-0.aspx](http://blogs.msdn.com/b/eternalcoding/archive/2012/06/15/how-to-cook-a-complete-windows-8-application-with-html5-css3-and-javascript-in-a-week-day-0.aspx)

希望这有帮助。

# ios - 多视口 OpenGL ES

> ID：11349506
> 
> 赞同：0
> 
> 时间：2012-07-05T17:32:44.087
> 
> 标签：ios, opengl-es, viewport

我目前正在尝试制作一个使用多个 opengl es 视口（即分屏）的 ios 应用程序。这是我的做法：

```
// Create default framebuffer object. The backing will be allocated for the current layer in -resizeFromLayer
    glGenFramebuffersOES(1, &defaultFramebuffer);
    glGenRenderbuffersOES(1, &colorRenderbuffer);
    glBindFramebufferOES(GL_FRAMEBUFFER_OES, defaultFramebuffer);
    glBindRenderbufferOES(GL_RENDERBUFFER_OES, colorRenderbuffer);
    glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_RENDERBUFFER_OES, colorRenderbuffer);

// Replace the implementation of this method to do your own custom drawing
const GLfloat squareVertices[] = {
  -0.5f, -0.5f,
  0.5f,  -0.5f,
  -0.5f,  0.5f,
  0.5f,   0.5f,
};
const GLubyte squareColors[] = {
  255, 255,   0, 255,
  0,   255, 255, 255,
  0,     0,   0,   0,
  255,   0, 255, 255,
 };

[EAGLContext setCurrentContext:context];

glBindFramebufferOES(GL_FRAMEBUFFER_OES, defaultFramebuffer);
glViewport(0, backingHeight/2, backingWidth/2, backingHeight/2);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrthof(-1.0f, 1.0f, -1.5f, 1.5f, -1.0f, 1.0f);
glMatrixMode(GL_MODELVIEW);
glRotatef(3.0f, 0.0f, 0.0f, 1.0f);

glClearColor(0.5f, 0.5f, 0.5f, 1.0f);
glClear(GL_COLOR_BUFFER_BIT);

glVertexPointer(2, GL_FLOAT, 0, squareVertices);
glEnableClientState(GL_VERTEX_ARRAY);
glColorPointer(4, GL_UNSIGNED_BYTE, 0, squareColors);
glEnableClientState(GL_COLOR_ARRAY);

glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

glBindRenderbufferOES(GL_RENDERBUFFER_OES, colorRenderbuffer);
// equivalent to glutswapBuffers()
[context presentRenderbuffer:GL_RENDERBUFFER_OES];

/*********************SECOND VIEW*******/
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glBindFramebufferOES(GL_FRAMEBUFFER_OES, defaultFramebuffer);
glViewport(backingWidth/2, 0, backingWidth/2, backingHeight/2);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrthof(-1.0f, 1.0f, -1.5f, 1.5f, -1.0f, 1.0f);
glMatrixMode(GL_MODELVIEW);
glRotatef(3.0f, 0.0f, 0.0f, 1.0f);

glClearColor(0.5f, 0.5f, 0.5f, 1.0f);
glClear(GL_COLOR_BUFFER_BIT);

glVertexPointer(2, GL_FLOAT, 0, squareVertices);
glEnableClientState(GL_VERTEX_ARRAY);
glColorPointer(4, GL_UNSIGNED_BYTE, 0, squareColors);
glEnableClientState(GL_COLOR_ARRAY);

glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

glBindRenderbufferOES(GL_RENDERBUFFER_OES, colorRenderbuffer);
[context presentRenderbuffer:GL_RENDERBUFFER_OES];
/*********************END***************/

glDisableClientState(GL_VERTEX_ARRAY);
glDisableClientState(GL_COLOR_ARRAY); 
```

1.  在模拟器上，只出现第二个视口（在这种情况下，屏幕右下角有一个旋转的立方体）。而在设备上它们都出现但闪烁......（左上和右下）
2.  glRotatef 被应用两次，但我只想或任何其他转换应用一次。

我想要的只是将同一场景显示两次。基本上我正在尝试模拟让 2 个摄像机观看同一件事，并将其显示在屏幕上。显然，我做错了什么，最好有 2 个单独的帧缓冲区和渲染缓冲区，还是有更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:10:27.783

问题是这一行：

```
/*********************SECOND VIEW*******/
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_FRAMEBUFFER); 
```

glClear 不受视口影响，如果要部分清除，则需要使用剪刀测试或模板缓冲区。

请参阅[glClear](http://www.opengl.org/sdk/docs/man/xhtml/glClear.xml)的文档。

# c# - 集合属性应该是只读的 - 漏洞？

> ID：11349507
> 
> 赞同：4
> 
> 时间：2012-07-05T17:32:47.303
> 
> 标签：c#, oop, code-analysis

在坚持代码分析错误的过程中，我正在将我的属性更改为具有私有设置器。然后我开始试图理解*为什么*更多。根据一些研究，MS[说](http://msdn.microsoft.com/en-us/library/ms182327.aspx)：

> 可写集合属性允许用户用完全不同的集合替换集合。

答案[在这里](https://stackoverflow.com/questions/5554566/c-sharp-code-analysis-2227-confusion)指出：

> 在对象上添加公共设置器`List<T>`是危险的。

但没有列出它危险的*原因。*这就是我很好奇的部分。

如果我们有这个集合：

```
public List<Foo> Foos { get; set; } 
```

为什么要将setter设为私有？显然我们不希望客户端代码*替换*集合，**但是如果客户端可以删除每个元素，然后添加他们想要的任何内容，那有什么意义**呢？这与完全替换集合不一样吗？遵循此代码分析规则如何提供价值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T17:34:49.410

不公开设置器可防止为集合分配值的情况`null`。`null`和没有任何值的集合之间是有区别的。考虑：

`for (var value in this.myCollection){ // do something`

当没有值时（即有人调用`Remove`了每个值），就不会发生任何不好的事情。但是，当`this.myCollection`为 null 时，`NullReferenceException`将抛出 a。

代码分析假设您的代码`myCollection`在对其进行操作之前不会检查是否为空。

它可能也是对`System.Collections.Concurrent`. 想象一下某个线程试图通过覆盖它来替换整个集合。通过摆脱公共设置器，线程唯一的选择是调用线程安全`Add`和`Remove`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T17:47:27.673

如果您要公开 IList（这将是更好的做法），则消费者可以将集合替换为完全不同的实现 IList 的类，这可能会产生不可预知的影响。您可能已经订阅了该集合上的事件，或者您现在错误响应的该集合中的项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T17:54:57.153

除了 SimpleCoder 的空值检查（这当然很重要）之外，您还需要考虑其他一些事情。

*   有人可以替换列表，导致线程安全大问题
*   替换列表的事件不会发送给旧列表的订阅者
*   你暴露的行为比你需要的多得多。例如，我什至不会公开吸气剂。

为了澄清第 3 点，不要这样做`cust.Orders.clear()`，而是调用一个函数`clearOrders()`。

如果不允许客户超过信用额度怎么办？如果您公开列表，您将无法控制。您必须检查可能添加订单的每个地方（以及其他所有业务逻辑）。哎呀！这有很多潜在的错误。相反，你可以把它全部放在一个`addOrder(Order o)`函数中，就像下雨一样。

For almost every (I'd say every, but sometimes cheating feels good...) business class, every property should be private for get and set, and if feasible make them readonly too. In this way, users of your class get only behaviors. Protect as much of your data as you can!

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T17:39:20.683

[ReadOnlyCollection](http://msdn.microsoft.com/en-us/library/ms132474.aspx)和[ReadOnlyObservableCollection](http://msdn.microsoft.com/en-us/library/ms668620.aspx)仅适用于只读集合场景。

`ReadOnlyObservableCollection`对于 WPF/Silverlight/Metro 应用程序中的单向绑定非常有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T17:45:34.503

如果你有一个带有 List 属性的 Customer 类，那么这个属性应该总是有一个私有设置器，否则它可以通过以下方式从客户对象外部更改：

```
customer.Orders = new List<Order> 
//this could overwrite data. 
```

始终使用集合的添加和删除方法。

订单列表应通过以下方式在 Customer 构造函数中创建：

```
Orders = new List<Order>(); 
```

你真的想检查代码中的任何地方，`customer.Orders != null`然后对订单进行操作吗？

或者您按照建议在您的客户对象中创建 Orders 属性，并且从不检查`customer.Orders == null`而是仅枚举 Orders，如果它的计数为零，则不会发生任何事情......

# ruby-on-rails - 带有非模型输入的 Rails Simpleform

> ID：11349508
> 
> 赞同：17
> 
> 时间：2012-07-05T17:32:52.833
> 
> 标签：ruby-on-rails, ruby, forms, simple-form

我有一个使用 simpleform 的正常形式。现在我想添加一个在模型中没有任何对应字段的输入，它将由控制器处理。我试过

```
<%= simple_form_for @obj do |f| %>
  <%= f.input :name %>
  <%= f.input :attr, as: :string %>   <-- should just send "attr" as post data
<% end %> 
```

但这给出了一个`Method not found: attr_not_in_obj`错误。我显然可以使用标准的 rails 助手，但是我会错过输入周围的所有简单 HTML，并且复制似乎不太正确。

简而言之：我正在寻找类似简单版本的 rails 标签助手，与模型没有任何联系。如何添加与模型属性不对应的输入？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-05T18:29:48.273

为什么不添加：

```
attr_accessor :attr 
```

到你的模型的类定义？这样你的代码：

```
<%= f.input :attr %> 
```

应该管用。

**或者**

如果此解决方案不合适，您始终可以`input`直接将一些值传递给您的方法：

```
<%= f.input :attr, input_html: {value: 'something'}  %> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-06T21:08:29.667

假设您想使用 Rails 表单助手，但仍将其包装在 SimpleForm 中？您可以通过使用这样的块调用输入：

```
<%= simple_form_for @obj do |f| %>
  <%= f.input :name %>
  <%= f.input :attr do %>
    <%= text_field_tag 'attr' %>
  <% end %>
<% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-28T04:26:35.620

是的，下面是来自[simple_form wiki的引用](https://github.com/plataformatec/simple_form/wiki/Create-a-fake-input-that-does-NOT-read-attributes)

### 字符串输入

`app/inputs/fake_input.rb:`

```
class FakeInput < SimpleForm::Inputs::StringInput
  # This method only create a basic input without reading any value from object
  def input(wrapper_options = nil)
    merged_input_options = merge_wrapper_options(input_html_options, wrapper_options)
    template.text_field_tag(attribute_name, nil, merged_input_options)
  end
end 
```

然后你可以做`<%= f.input :thing, as: :fake %>`

# c# - 当多个线程写入同一个文件时会产生什么负面影响？

> ID：11349511
> 
> 赞同：0
> 
> 时间：2012-07-05T17:33:06.693
> 
> 标签：c#, .net, multithreading, .net-2.0, integration-testing

以下是失败的集成测试的伪代码：

[测试]

```
void TestLogger()
    // Init static logger
    Logger.Init(pathToFile);

    // Create five threads that will call LogMessages delegate
    for i = 1 to 5 
    {
       Thread aThread = new Thread(LogMessages)
       aThread.Start(i);
    }

    // let threads complete their work
    Thread.Sleep(30000);

    /// read from log file and count the lines
    int lineCount = GetLineCount();

    // 5 threads, each logs 5 times = 25 lines in the log
    Assert.Equal(25, lineCount);

static void LogMessages( object data )
  // each thread will log five messages
  for i = 1 to 5 
  Logger.LogMessage(i.ToString() + " " + DateTime.Now.Ticks.ToString());
  Thread.Sleep(50); 
```

每次运行测试时，行数似乎都会发生变化。有时行数是 23，有时是 25。

在深入研究代码后，我注意到日志文件同时被多个线程访问（通过滴答计数相同来验证）。对此文件的访问没有锁定，但同时我没有看到抛出异常。谁能解释为什么运行之间的日志行数不一致？此外，这是多个线程同时写入同一个文件的负面影响吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T17:36:47.487

众所周知，竞争条件是不可预测的。您永远不知道有多少写入无法正常工作 - 有时它甚至可能完全正常工作。是的，这是在不同步的情况下从多个线程写入同一个文件的负面影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:20:31.443

如果您尝试使用 Environment.TickCount 验证同时性，那么您将度过一段糟糕的时光。它只有大约 15 毫秒 (IIRC) 的精度，所以如果两个线程的值相同，那么你真正知道的就是它们的日志记录彼此相差约 15 毫秒。

If your Logger class puts a lock around its access to the log file, that should be sufficient. Just create a sync object via `private static readonly object sync = new object();` and then do `lock (sync) { ... open/read/write the file ... }`. Otherwise you'll be at the mercy of the thread safety of whatever type of Stream you're using (hint: in general they're not thread safe).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T18:45:08.987

Perhaps the simplest way to handle these sorts of producer/consumer deadlocks and other race conditions is to invoke the lock() builtin:

```
lock(Logger){
 //use your logger here
} 
```

This will hold the other threads at bay. You can also use the sync lock style as mentioned briefly above. There's a good example of all the options available (and pros and cons) on this guy's site:

[http://www.gavindraper.co.uk/2012/02/05/thread-synchronizationlocking-in-net/](http://www.gavindraper.co.uk/2012/02/05/thread-synchronizationlocking-in-net/)

Good luck.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T20:25:47.380

Typically, multiThreaded logging is performed by queueing log entries, (blocking producer-consumer queue), to one logger thread that writes to the disk. This keeps the lock time down to the time taken to push a *log entry onto the queue: next-to-no contention. The queue absorbs any disk latency, network delays etc.

Using a simple lock inflicts any disk/network latency/delay upon all calling threads.

# javascript - 如何使用 Require.js 实现 TinyMCE？

> ID：11349513
> 
> 赞同：11
> 
> 时间：2012-07-05T17:33:17.727
> 
> 标签：javascript, jquery, tinymce, requirejs

我目前正在将 TinyMCE 源作为依赖项传递，然后调用 tinyMCE.init({}); 但它没有初始化 TinyMCE。当我 console.log TinyMCE 时，它返回一个 TinyMCE 对象。下面的代码示例：

```
define([
'jQuery',
'Underscore',
'Backbone',
'TinyMCE'
], function($, _, Backbone, tinyMCE) {

        tinyMCE.init({
            mode: "exact",
            elements: $('textarea'),
            theme: "advanced",
            theme_advanced_toolbar_location: 'top',
            theme_advanced_buttons1: 'bold,italic,underline,bullist,numlist,link,unlink',
            theme_advanced_buttons2: '',
            theme_advanced_buttons3: '',
            theme_advanced_toolbar_align: 'left',
            plugins: 'paste,inlinepopups',
            width: '100%',
            height: textarea.attr('data-height'),
            oninit: function () {
                console.log('TargetTD :');
                console.log(targetTD);

            }
        });
   }
}); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-12T14:13:47.300

对于 requirejs 2.1.0 或更高版本，您可以使用“shim”，请参见下面的主脚本示例：

```
requirejs.config({
    baseUrl: "js",
    paths: {
        tinyMCE: 'libs/tinymce/tiny_mce'
    },
    shim: {
        tinyMCE: {
            exports: 'tinyMCE',
            init: function () {
                this.tinyMCE.DOM.events.domLoaded = true;
                return this.tinyMCE;
            }
        }
    }
});

requirejs([
    'tinyMCE'
], function (tinyMCE) {
    console.log(tinyMCE);

    // your code here
}); 
```

*编辑*：我在评论中添加了 iimuhin 的片段。没有它似乎行不通。我添加它是因为未来的搜索者会喜欢避免增加的 IE 头痛。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T08:12:21.803

有同样的问题。我的解决方案是直接使用 TinyMCE jQuery 插件而不是 TinyMCE。这样它工作正常。

```
define(['jquery', 'tiny_mce/jquery.tinymce'], function ($) {
    $('textarea').tinymce({
        script_url : 'js/tiny_mce/tiny_mce.js',
        theme : 'advanced',
        theme_advanced_buttons1 : 'fontselect,fontsizeselect,forecolor,bold,italic,underline,strikethrough,justifyleft,justifycenter,justifyright,justifyfull,removeformat,indent,outdent,numlist,bullist,copy,paste,link',
        theme_advanced_buttons2 : '',
        theme_advanced_buttons3 : '',
        theme_advanced_toolbar_location : 'top',
        theme_advanced_toolbar_align : 'left'
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-26T19:29:44.450

您可以像往常一样在主干视图中实现 tinyMCE。但是你必须等到视图的 el 插入到 dom 中之后才能初始化 tinyMCE。在 javascript 中，现在可以检测元素何时插入 DOM。但是当一个主干视图被渲染时（Backbone.View.render()），该元素将在当前浏览器的进程之后插入到dom中。使用“setTimeout”以 1 毫秒初始化微小的 mce 元素（这将简单地在下一个浏览器进程中执行代码）。

```
var FormTextArea = Backbone.View.extend({
    template : _.template('<%=value%>'),
    tagName: 'textarea',
    className: "control-group",
    render: function(){ 
        this.$el.html(this.template(this.model.toJSON()));
        setTimeout(_.bind(this.initMCE, this), 1);
        return this;
    },
    initMCE: function(){
        tinymce.init({selector: 'textarea'});
    }
});

var v = new FormTextArea({
    model: new Backbone.Model({value: '<h2>Heading 2</h2><p>A paragraph here</p>'})
});

$('body').append(v.render().el); 
```

这是一个jsfiddle：

[http://jsfiddle.net/pCdSy/10/](http://jsfiddle.net/pCdSy/10/)

# c++ - 主 C++ 上的递归调用

> ID：11349515
> 
> 赞同：7
> 
> 时间：2012-07-05T17:33:26.493
> 
> 标签：c++

> **可能重复：**
> [主函数可以在 C++ 中调用自身吗？](https://stackoverflow.com/questions/2128321/can-main-function-call-itself-in-c)

我发现这个问题很有趣，但有点虚幻。Question 6.42 C++ how to program by Dietel “可以在你的系统上递归调用 main 吗？编写一个包含函数 main 的程序。包括静态局部变量 count 并初始化为 1。每次调用 main 时后递增并打印 count 的值. 编译你的程序. 会发生什么？

我编写了如下程序，但是我在 10 次后停止了递归，就好像我要让它继续运行一样，它将在 41000 左右的值处停止。

我的问题：在 c++ 中递归调用 main 函数如何合法，是否应该执行该程序以堆栈溢出或内存错误等。请解释。

```
#include <iostream>
using namespace std;
int main()
{
       static int count = 0;
       count++;
       if(count <= 10) {
                cout << count << endl;
                return main(); //call main
                }//end if

       system("pause");
       return 0;//successful completion
}//end main 
```

谢谢你

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-05T17:35:36.893

> `main()`在 C++ 中递归调用函数如何合法

这是不合法的。C++ 语言标准规定“不得在程序中使用 main 函数”（C++11 §3.6.1/3）。调用函数是一种“使用”形式。

任何调用的程序都会`main()`表现出未定义的行为（从技术上讲，这样的程序格式错误，因为被违反的规则是可诊断的语义规则，但如果大多数编译器拒绝该程序，我会感到惊讶）。请注意，这不会阻止启动程序的运行时基础结构调用该`main()`函数。

# c# - 将数据访问逻辑从业务层移至数据访问层

> ID：11349519
> 
> 赞同：0
> 
> 时间：2012-07-05T17:33:36.443
> 
> 标签：c#, data-access-layer, business-logic, service-layer, bll

我正在做一个具有数据访问层 (DAL) 的 asp.net mvc 应用程序。完成了 90% 的数据库 CRUD 代码后，我问自己是否需要业务层。

但是我应该放什么？例如，我在 DAL 中的所有 CRUD 方法都不是一个 sql 表上的单一选择。大多数时候我会做很多连接 + sql 聚合函数。只是提到我使用 ADO.NET ，没有存储过程/触发器。

然后我又问自己这种方法是否属于业务层：

```
 /// <summary>
 /// Creates a testplan with all teststeps and their default values for a certain template
 /// </summary>
 /// <param name="testplan"></param>
 /// <returns>true if transaction was successfull else false</returns>
 public void CreateTestplan(Testplan testplan)
 {
            try
            {
                using (var con = new SqlConnection(_connectionString))
                using (var trans = new TransactionScope())
                {
                    con.Open();

                    _testplanDataProvider.AddTestplan(testplan,con);
                    _testplanDataProvider.CreateTeststepsForTestplan(testplan.Id, testplan.TemplateId,con);
                    trans.Complete();                   
                }
            }
            catch (SqlException ex)
            {
                ExceptionManager.HandleException(ex);
            }           
        } 
```

这个方法实际上调用了 DAL 中的另外两个方法。

现在我问自己，为什么要引入一个额外的业务层，因为我可以将 CreateTestplan 方法也放在 TestplanDataProvider 类中，其中包含来自两个方法 AddTestplan + CreateTeststepsForTestplan 的所有代码。

你怎么看？这是一个好方法吗？

我真的问这个是因为在我看来 CreateTestplan 方法只包含数据访问逻辑。

**更新**：

```
public void AddTestplan(Testplan testplan, SqlConnection con)
        {

            using (var cmd = new SqlCommand("INSERT INTO TESTPLAN (ReleaseId,TemplateId,CreatedAt,UserId,Name,Duration) VALUES (@ReleaseId,@TemplateId,@CreatedAt,@UserId,@Name,@Duration);Select Scope_Identity();", con))
            {
                var p1 = new SqlParameter("@ReleaseId", testplan.ReleaseId);
                var p2 = new SqlParameter("@TemplateId", testplan.TemplateId);
                var p3 = new SqlParameter("@CreatedAt", testplan.CreatedAt);
                var p4 = new SqlParameter("@UserId", testplan.UserId);
                var p5 = new SqlParameter("@Name", testplan.Name);
                var p6 = new SqlParameter("@Duration", testplan.Duration);

                cmd.Parameters.AddRange(new[] { p1, p2, p3, p4, p5, p6 });
                testplan.Id = Convert.ToInt32(cmd.ExecuteScalar());
            }
        }

 public void CreateTeststepsForTestplan(int testplanId, int templateId, SqlConnection con)
        {
            var teststeps = new List<Teststep>();

            using (var selectCMD = new SqlCommand("SELECT ts.TeststepId, MAX(ts.CreatedAt)FROM Teststep ts INNER JOIN Unit u ON ts.UnitId = u.UnitId Where u.TemplateId = @TemplateId Group by TeststepId", con))
            {
                var p = new SqlParameter("@TemplateId", templateId);
                selectCMD.Parameters.Add(p);

                using (var reader = selectCMD.ExecuteReader())
                {
                    Teststep teststep = null;
                    while (reader.Read())
                    {
                        teststep = new Teststep
                        {
                            Id = Convert.ToInt32(reader["TeststepId"]),
                            CreatedAt = Convert.ToDateTime(reader["CreatedAt"]),
                        };
                        teststeps.Add(teststep);
                    }
                }
            }

            using (var insertCMD = new SqlCommand("INSERT INTO TestplanTeststep (TestplanId,TeststepId,TestState,ErrorText) VALUES (@TestplanId, @TeststepId, @TestState, @ErrorText)", con))
            {
                var p1 = new SqlParameter("@TeststepId", SqlDbType.Int);
                var p2 = new SqlParameter("@CreatedAt", SqlDbType.DateTime);
                var p3 = new SqlParameter("@TestplanId", testplanId);
                var p4 = new SqlParameter("@ErrorText", DBNull.Value);
                var p5 = new SqlParameter("@ErrorScreenshot", DBNull.Value);
                var p6 = new SqlParameter("@TestState", (int)Teststep.TeststepTestState.Untested);

                insertCMD.Parameters.AddRange(new[] { p1, p2, p3, p4, p5 });

                foreach (Teststep step in teststeps)
                {
                    p1.Value = step.Id;
                    p2.Value = step.CreatedAt;
                    insertCMD.ExecuteNonQuery();
                }
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:43:57.763

将数据访问排除在 BLL 之外的一个很好的理由是，您可以在对业务逻辑进行最小更改的情况下切换数据库或数据库框架。

例如，如果您将所有与 ADO.NET 相关的代码移至 DAL，然后决定改用实体框架，则只有您的 DAL 会改变，而 BLL 不会。

当然，如果您的业务逻辑很少，并且您的 BLL 只是将工作交给您的 DAL，那么您可能不会从拥有单独的层中获益。对于非常琐碎的应用程序可能会出现这种情况，但它也可能表明您的 DAL 中隐藏了业务逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:35:54.727

我知道普遍接受的最佳实践是将 DAC 与 BL 分开，但我的看法是，如果您使用的是 L2S 或实体框架之类的东西，您已经有一个 DAL，并且您的业务逻辑可以进入那些的部分定义类。无需在此之上添加另一个 DAL。我什至会认为 ADO 是构成 DAL 的抽象。顺便说一句，由于您使用的是海峡 ADO，您可能想看看 Dapper。这是一个最小且快速的 DAL。

# scala - Scala：如何将 Any 视为 Array 或 Seq？

> ID：11349520
> 
> 赞同：2
> 
> 时间：2012-07-05T17:33:40.580
> 
> 标签：scala

如果可能，我正在寻找一种将 Any 视为 Array 或 Seq 并对其进行迭代的方法。

目前我有一些看起来像这样的代码，采用一系列 Any 并展平包含的任何 Traversable 或 Array 对象。

```
def flattenAsStrings(as: Seq[Any]): Seq[String] = {
  val (travValued, other) = as.partition(a => classOf[Traversable[_]] isAssignableFrom(a.getClass))
  val (arrayValued, singleValued) = other.partition(a => a.isInstanceOf[Array[_]])
  val travStrings = travValued.map(_.asInstanceOf[Traversable[_]].map(_.toString)).flatMap(_.toList)
  val arrayStrings = arrayValued.map(_.asInstanceOf[Array[_]].map(_.toString)).flatMap(_.toList)
  singleValued.map(_.toString) ++ travStrings ++ arrayStrings
} 
```

考虑到隐式转换等等，感觉在 Scala 中必须有一种更简单的方法来做到这一点。任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:53:48.100

基本上，您想将每个元素强制为 a `Seq`，然后一次将它们全部展平。 `Array`隐式转换为`Seq`and`Seq`并且`Traversable`有一个`.toSeq`方法。所以我们可以这样做：

```
val t: Traversable[Int] = List(1, 2, 3)
val a: Array[Int] = Array(4, 5, 6)
val other = "whatever"
val as: Seq[Any] = List(t, a, other)

as.flatMap{
  case t: Traversable[_] => t.toSeq
  case a: Array[_] => a.toSeq
  case other => Seq(other)
}.map{_.toString}
//Seq[java.lang.String] = List(1, 2, 3, 4, 5, 6, whatever) 
```

（顺便说一句，这是非常丑陋的 Scala 代码，您可能需要考虑重构一些东西以首先摆脱使用 a `Seq[Any]`）

# django - AppEngine Launcher 支持 Django {% url %}？

> ID：11349521
> 
> 赞同：0
> 
> 时间：2012-07-05T17:33:44.213
> 
> 标签：django, google-app-engine

最新的 AppEngine 是 Django 1.3。

当应用程序在本地运行时，Django 标签 {% url %} 是否应该在 Lanucher 中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:10:02.823

`url`使用 GAE 的 Python 2.7 时不支持Django 的标签。我认为这归结为没有找到一种安全的方法来使我们为 Python 2.5 所做的临时猴子补丁安全地与多线程 2.7 应用程序一起工作。

# macos - gnuplot 中的 Ctrl-y 行为 - 在 OS X 中不拉动

> ID：11349523
> 
> 赞同：0
> 
> 时间：2012-07-05T17:33:57.160
> 
> 标签：macos, gnuplot, ctrl

通常，`CTRL`+ `Y`yanks 先前已终止文本。这在终端中可以很好地剪切和粘贴文本。但是，一旦我启动 gnuplot，使用`CTRL`+就会`Y`暂停程序。奇怪的是，这只发生在我的 OS X 机器上。在我的 Ubuntu 12.04 上，gnuplot 中的`CTRL`+具有拉取文本的预期行为。`Y`

关于为什么会发生这种情况的任何想法？以及如何使`CTRL`+`Y`在交互式 gnuplot 会话中具有预期的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:45:53.533

这只是一个有根据的猜测——OS-X 不附带 gnu readline，因此 gnuplot（默认情况下）是针对本机 OS-X readline 实现构建的。

```
print GPVAL_COMPILE_OPTIONS  #... +READLINE_IS_REALLY_EDITLINE ... 
```

要解决这个问题，您可能需要下载/安装 gnu readline，然后编译 gnuplot`--with-readline=gnu`或类似的东西。

# magento - Magento 覆盖控制器

> ID：11349530
> 
> 赞同：6
> 
> 时间：2012-07-05T17:34:09.353
> 
> 标签：magento, controller, overriding, cart

我想做上面的事情。我过去覆盖了许多文件......块，模型，助手......但是这个让我望而却步。

谁能看到我在这里做错了什么：（我编辑了这段代码......现在包括一些建议......）

这是我的文件夹结构（2个控制器位置作为测试）：

```
/Idigital/Idgeneral/etc/config.xml
/Idigital/Idgeneral/controllers/Checkout/CartController.php
/Idigital/Idgeneral/controllers/CartController.php 
```

这是我的 config.xml：

```
<?xml version="1.0"?>
<config>
<modules>
    <idigital_idgeneral>
    <version>0.1.0</version>
    </idigital_idgeneral>
</modules>
<global>
<blocks>
        <idgeneral><class>Idigital_Idgeneral_Block</class></idgeneral>
    </blocks>
</global>   

<frontend>
    <routers>
                <checkout>
                    <use>standard</use>
                    <args>
                        <modules>
                            <Idigital_Idgeneral before="Mage_Checkout">Idigital_Idgeneral_Checkout</Idigital_Idgeneral>
                        </modules>
                    </args>
                </checkout>
           </routers>
       <layout>   
        <updates>   
            <idgeneral>   
                <file>idigital.xml</file>   
            </idgeneral>   
        </updates>   
    </layout>
</frontend>
</config> 
```

我已将我的控制器文件放在 2 个位置进行测试。这是我的第一个控制器文件的顶部：

```
require_once 'Mage/Checkout/controllers/CartController.php';
class Idigital_Idgeneral_Checkout_CartController extends Mage_Checkout_CartController
{

public function testAction()
{  
    var_dump('inside checkout/cart/test');exit; 
}

/**
 * Add product to shopping cart action
 */
public function addAction()
{
    blah...
} 
```

回答我的第二个控制器：

```
require_once 'Mage/Checkout/controllers/CartController.php';
class Idigital_Idgeneral_CartController extends Mage_Checkout_CartController
{

public function testAction()
{  
    var_dump('inside cart/test');exit; 
}

/**
 * Add product to shopping cart action
 */
public function addAction()
{
    blah...
} 
```

当我访问：/checkout/cart/add 我被定向到法师控制器......不是我的本地人。（我每个都有 var_dump stmts ..所以我可以看到哪个运行了）。

当我访问 /checkout/cart/test - 我得到一个 404 当我访问 /cart/add 或 cart/test - 我得到一个 404 当我访问 idgeneral/cart/test 或 idgeneral/cart/add - 我得到一个 404

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T05:02:44.037

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-05T19:21:48.903

```
<Idigital_Idgeneral before="Mage_Checkout">Idgeneral_Checkout</Idigital_Idgeneral> 
```

应该

```
<Idigital_Idgeneral before="Mage_Checkout">Idigital_Idgeneral_Checkout</Idigital_Idgeneral> 
```

或尝试将您的自定义控制器移动到

```
../Idigital/Idgeneral/controllers/CartController.php 
```

并使用

```
<Idigital_Idgeneral before="Mage_Checkout">Idigital_Idgeneral</Idigital_Idgeneral> 
```

`<modules>`您的标签位置也有错误。它应该是：

```
<config>
    <modules>
        <idigital_idgeneral>
            <version>0.1.0</version>
        </idigital_idgeneral>
    </modules>
    <global>
    ...
    </global>   

    <frontend>
        ....
    </frontend>
...
</config> 
```

即`<modules>`不应该在里面`<global>`

这是一个关于如何将 Magento 视为 XML 的配置树转储的很好的教程：http: [//alanstorm.com/magento_config](http://alanstorm.com/magento_config)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-21T19:54:21.260

我把这个留给下一个被迫使用这辆老爷车的可怜的开发人员。这里的大部分说明都是从[magento 文档](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/how_to_overload_a_controller)中粘贴的，它喜欢它的来源，是一个扭曲的误导迷宫。好吧，抱怨够多了……

这在 1.8 版中对我有用

创建命名空间和模块：/app/code/local/MyNameSpace/MyModule

创建你的模块配置：/app/code/local/MyNameSpace/MyModule/etc/config.xml

```
<?xml version="1.0" ?>
<config>
<modules>
    <MyNameSpace_MyModule>
        <version>0.1.0</version>
    </MyNameSpace_MyModule>
</modules>
<frontend>
    <routers>
        <checkout>
            <args>
                <modules>
                    <MyNameSpace_MyModule before="Mage_Checkout">MyNameSpace_MyModule_Checkout</MyNameSpace_MyModule>
                </modules>
            </args>
        </checkout>
    </routers>
</frontend> 
```

创建你的控制器：/app/code/local/MyNameSpace/MyModule/controllers/Checkout/CartController.php

```
<?php

require_once Mage::getModuleDir('controllers', 'Mage_Checkout').DS.'CartController.php';

class MyNameSpace_MyModule_Checkout_CartController extends Mage_Checkout_CartController
{
    public function indexAction() {
        // /var/log/debug.log should log the output
        Mage::log('cart index override', null, 'debug.log');

        // Call the parent class
        parent::indexAction();
    }
} 
```

启用您的新模块：/app/etc/modules/MyNameSpace_All.xml

```
<?xml version="1.0" ?>
<config>
  <modules>
    <MyNameSpace_MyModule>
        <active>true</active>
        <codePool>local</codePool>
    </MyNameSpace_MyModule>
  </modules>
</config> 
```

这就是所有需要的。现在去庆祝吧，你刚刚擦亮了一个粪便！;)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-23T09:47:00.913

这是关于控制器包含路径的一个小通知。

如果打开**Magento 编译器模式**，此包含路径**可能会导致错误**。

 **```
require_once 'Mage/Checkout/controllers/CartController.php'; 
```

取而代之的是，它**很好用**

```
require_once Mage::getModuleDir('controllers', 'Mage_Checkout').DS.'CartController.php'; 
```

会更安全。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T08:38:03.523

嗯...它不会覆盖结帐车控制器。

所以我在产品视图中使用了 URL REWRITE ......来自这个链接......靠近文章的底部。他们说这是一个正确的方法......

[http://www.excellencemagentoblog.com/magento-add-product-to-cart-ajax](http://www.excellencemagentoblog.com/magento-add-product-to-cart-ajax)

```
if(!url){
      url = jQuery('#product_addtocart_form').attr('action');
}
url = url.replace("checkout/cart","idgeneral/cart"); 
```

这对我有用。让我开裂。基本上调用我的控制器..而不是结帐控制器。

感谢 ROSCIUS 的帮助...感谢。

我还必须更改我的配置......我的路由器部分现在看起来像这样：

```
<routers>
        <!-- THIS PART REGISTERS OUR CONTROLLERS FOLDER FOR USE -->
        <idgeneral>
            <use>standard</use>
            <args>
                <module>Idigital_Idgeneral</module>
                <frontName>idgeneral</frontName>
            </args>
        </idgeneral>

        <!-- THIS PART WONT WORK TO OVERWRITE OUR MAGE CONTROLLER -->
        <checkout>
            <use>standard</use>
            <args>
                <modules>
                    <Idigital_Idgeneral before="Mage_Checkout">Idigital_Idgeneral_Checkout</Idigital_Idgeneral>
                </modules>
            </args>
        </checkout>
    </routers> 
```**

# php - 用户信息被禁用（使用 PHP Curl 时）

> ID：11349537
> 
> 赞同：1
> 
> 时间：2012-07-05T17:34:41.830
> 
> 标签：php, curl

当我在浏览器中键入网页的 URL 时，我可以访问网页。但是，在使用 curl 访问该网页的详细信息时，我在屏幕上收到消息

```
User information is disabled.
This operation cannot be accepted. User certification is invalid or date expired.
Update page. 
```

我可以通过在浏览器中输入该打印机的 IP 来访问我的网络打印机（佳能 IR3570）的详细信息。这将打开远程 UI。但是，它似乎不适用于 curl。

这是我在 PHP curl 中的代码

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,"URL");
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 5.1; rv:13.0) Gecko/20100101 Firefox/13.0.1');

$result= curl_exec($ch);
echo $result;
curl_close ($ch); 
```

这样的消息可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:56:33.873

尝试添加：

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION  ,1);
curl_setopt($ch, CURLOPT_USERAGENT, "User-Agent  Mozilla/5.0");
curl_setopt($ch, CURLOPT_HEADER ,1);  // DO NOT RETURN HTTP HEADERS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:58:59.587

UserAgent 设置在哪里？他们可能会过滤请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T13:10:32.457

这不是 CURL，但它适用于 Visual Basic 2012 - 其中一个标题为我解决了它

```
Sub Main()
    Dim web_client As New System.Net.WebClient
    Dim baseDate As DateTime = New DateTime(1970, 1, 1)
    Dim diff As TimeSpan = DateTime.Now - baseDate
    web_client.Headers.Add("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8")
    web_client.Headers.Add("Accept-Charset", "ISO-8859-1,utf-8;q=0.7,*;q=0.3")
    web_client.Headers.Add("Accept-Encoding", "gzip, deflate, sdch")
    web_client.Headers.Add("Accept-Language", "en-US,en;q=0.8")
    web_client.Headers.Add("Cookie", "iR = 1711753823")
    web_client.Headers.Add("Host", "172.23.100.14")
    web_client.Headers.Add("Referer", "http://172.23.100.14/jlp.cgi?Flag=Html_Data&LogType=0&Dummy=" & diff.Milliseconds)
    web_client.Headers.Add("User-Agent", "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31")
    web_client.DownloadFile("http://172.23.100.14/pprint.csv?Flag=Csv_Data&LogType=0&Dummy=" & diff.Milliseconds, "P:\Transfer\mstavers\printlogs\" & Format(Now, "yyyy-MM-dd-hh-mm-ss") & ".csv")
End Sub 
```

# c# - WCF: Authentication Service or token-based security?

> ID：11349539
> 
> 赞同：7
> 
> 时间：2012-07-05T17:34:45.123
> 
> 标签：c#, wcf, rest, dynamics-crm-2011

There's a **Dynamic CRM** instance on a server ("on-premises"). It will be used by **a few sites** that run on distant machines (another domain, another Active Directory). The communication between those sites and the CRM instance is done via a **CRM proxy**, a WCF service that sits near it (near CRM), handles requests, queries CRM etc.

That WCF service is facing the Internet. Although secured communication channels aren't that necessary, authentication is. We cannot let random clients to use the services provided by the CRM proxy.

So, Authentication Service (cookies?) / hand-coded token passing (as a parameter for each service operation) / [this solution - on stackoverflow](https://stackoverflow.com/questions/1861868/token-based-authentication-in-wcf).

Thank you in advance!

PS: hand-coded tokens would be "time-sensitive" and hashed a few times with some secret keys. Man-in-the-middle might not be such a big problem, as a token can be invalidated after a request.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T18:58:21.277

Hand-coded token passing is not very elegant. It pollutes your method signatures and makes you duplicates checks all over the place.

If you are able to distribute credentials to your service clients, or pass in credentials that they already use for your system, then I suggest using message security with a custom username & password validator.

The steps to implement it [are simple enough](http://codebetter.com/petervanooijen/2010/03/22/a-simple-wcf-service-with-username-password-authentication-the-things-they-don-t-tell-you/). You only need to implement a [`UserNamePasswordValidator`](http://msdn.microsoft.com/en-us/library/system.identitymodel.selectors.usernamepasswordvalidator.aspx):

A short configuration summary from the linked article:

Specify the security mode in your binding:

```
<security mode="Message">
    <message clientCredentialType="UserName"/>
</security> 
```

In your service behavior add:

```
<serviceCredentials>
    <userNameAuthentication 
        userNamePasswordValidationMode="Custom" 
        customUserNamePasswordValidatorType="YourFullUserNameValidatorType"/>
</serviceCredentials> 
```

Then clients just need to set their credentials directly on the service proxies. So they're not passed in service operations.

```
serviceClient.ClientCredentials.UserName.UserName = "username";
serviceClient.ClientCredentials.UserName.Password = "password"; 
```

Your `UserNamePasswordValidator` will get these credential for each service operation call and you will have the chance to validate them against your credentials store.

However, for more security, you could look into [certificate authentication](http://msdn.microsoft.com/en-us/library/ff648360.aspx). It's more reliable and you are not required to buy a cert from a CA. If you can also setup yourself as a CA on the client computers, then your good to go. It's appropriate especially because you only have a few clients, so they would be easy to manage.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-15T12:03:17.693

For the question above the preivous answer is good enough. However, I want to suggest another approach: Custom Token Authentication.

It is more poweful by giving a possibility to create/support Custom Service Credentials which are created based on the authentification token (UserName).

In my case I have encrypted access token which holds all needed information for the access: user name, user groups (authorization information), validation period, ect.

In your case it can be UserName & Password. The Credential will hold the information about your user and can be used later on in the code.

See the following link for implementing Custom Token Authentication: [https://docs.microsoft.com/en-us/dotnet/framework/wcf/samples/token-authenticator](https://docs.microsoft.com/en-us/dotnet/framework/wcf/samples/token-authenticator)

# android - 通过 Android 设备处理条码扫描仪值

> ID：11349542
> 
> 赞同：13
> 
> 时间：2012-07-05T17:34:53.330
> 
> 标签：android, barcode, barcode-scanner

我正在尝试通过我的 Android 3.2 平板电脑处理来自条形码扫描仪 USB 的值，扫描仪在操作系统中成功工作，但我想在没有编辑文本的情况下在程序中获取值，usbmanager 主机和附件没有列出它通过 USB 连接的设备。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T19:02:24.923

大多数插入式条形码扫描仪（我见过）都是作为 HID 配置文件设备制作的，因此无论插入什么设备，基本上都应该将它们视为键盘。我认为这就是为什么它们没有出现在 USB 主机 API 附件列表中的原因。您应该能够通过覆盖[Activity.onKeyDown(int keycode, KeyEvent ke)从它们获取原始输入，就像在 Activity 中使用键盘一样](http://developer.android.com/reference/android/app/Activity.html#onKeyDown%28int,%20android.view.KeyEvent%29)

在你的活动中是这样的：

```
@Override
protected boolean onKeyDown(int keyCode, KeyEvent event) {
     Log.i("TAG", ""+ keyCode);
     //I think you'll have to manually check for the digits and do what you want with them.
     //Perhaps store them in a String until an Enter event comes in (barcode scanners i've used can be configured to send an enter keystroke after the code)
     return true;
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-11T13:36:30.147

您将获得 Activity keydown 事件的结果。

例如：-

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    char pressedKey = (char) event.getUnicodeChar();
    Barcode += "" + pressedKey;
    Toast.makeText(getApplicationContext(), "barcode--->>>" + Barcode, 1)
            .show();
    return true;
} 
```

希望这篇文章对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-31T13:52:26.320

我也有同样的问题，但是当我使用 onKeyDown 或 onKeyUp 时，并不是每次都调用它，我的意思是条形码的每个字符。我使用了 DiapatchKeyEvent，它工作得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-14T10:51:00.103

```
public boolean onKeyMultiple(int keyCode, int repeatCount, KeyEvent event) {
    Log.i("TAG", event.getCharacters());
    return true;
}` 
```

# ruby - Ruby - 优化两个重复数组的比较

> ID：11349544
> 
> 赞同：1
> 
> 时间：2012-07-05T17:35:12.200
> 
> 标签：ruby

我有以下数组：

```
A = "cheddar".split(//)  # ["c", "h", "e", "d", "d", "a", "r"]
B = "cheddaar".split(//) # ["c", "h", "e", "d", "d", "a", "a", "r"] 
```

A 数组是 B 数组的子集。如果 A 数组有另一个“d”元素，它就不是一个子集。

我想比较并找出一个是否是另一个的子集，即使它们有重复。A - B 或 A & B 不会捕获重复项，它只是比较它们并发现它们匹配。所以我写了以下内容，它捕获了重复项：

```
B.each do |letter|
    A.delete_at(A.index(letter)) rescue ""
end

p A.empty? 
```

这是最好的方法还是可以优化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:56:03.347

不知道这是否真的比你的方法快，但它的运行时间应该是 O(N+M)，其中 N,M 是 a,b 的大小。（假设散列查找和插入是摊销 O(1) 这并不严格正确，因为散列通常是键大小的函数；尽管在示例中，所有键都是单个字符。）#index 方法的循环 #delete_at 具有实质性额外的数据运动，看起来可能是最坏的情况 O(N^2 * M)。

```
def ary_subset?(a,b) # true iff a is subset of b
  a_counts = a.reduce(Hash.new(0)) { |m,v| m[v] += 1; m }
  b_counts = b.reduce(Hash.new(0)) { |m,v| m[v] += 1; m }
  a_counts.all? { |a_key,a_ct| a_ct <= b_counts[a_key] }
end 
```

[OP 要求最快的方法，所以我在这个 gist](https://gist.github.com/3056832)上创建了一个小基准。

我测试了 OP 的原始方法 (op_del)、我使用减少计数的版本 (ct)、[重用计数数组](https://stackoverflow.com/a/11352055/1074296)的变体(ct_acc)，以及[MultiSet 方法](https://stackoverflow.com/a/11351732/1074296)(mset)，*编辑*并添加了[非常简洁的计数查找比较](https://stackoverflow.com/a/11354782/1074296)(slow_ct) 。针对 OP 的小数组输入示例 (s)、较大的基数集 10,000 (b) 以及针对大集 (sb) 的小集运行每个变体。（必须将大集合案例的迭代次数减少一个数量级，以使 _slow_ct_ 在合理的时间内完成。）这里的结果：

```
 user     system      total        real
s_op_del         1.850000   0.000000   1.850000 (  1.853931)
s_ct             2.260000   0.000000   2.260000 (  2.264028)
s_ct_acc         1.700000   0.000000   1.700000 (  1.706881)
s_mset           5.460000   0.000000   5.460000 (  5.484833)
s_slow_ct        1.720000   0.000000   1.720000 (  1.731367)
b_op_del         0.310000   0.000000   0.310000 (  0.312804)
b_ct             0.120000   0.000000   0.120000 (  0.123329)
b_ct_acc         0.100000   0.000000   0.100000 (  0.101532)
b_mset           0.310000   0.000000   0.310000 (  0.319697)
b_slow_ct       82.910000   0.000000  82.910000 ( 83.013747)
sb_op_del        0.710000   0.020000   0.730000 (  0.734022)
sb_ct            0.050000   0.000000   0.050000 (  0.054416)
sb_ct_acc        0.040000   0.000000   0.040000 (  0.059032)
sb_mset          0.110000   0.000000   0.110000 (  0.117027)
sb_slow_ct       0.010000   0.000000   0.010000 (  0.011287) 
```

减少计数，重用计数累加器是明显的赢家。Multiset 的速度慢得令人失望。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T20:03:04.910

如果我正确理解要求，您可以使用[multiset](http://rubygems.org/gems/multiset) gem。

```
require 'multiset'
a = Multiset.new "cheddar".split(//)
b = Multiset.new "cheddaar".split(//)

a.subset? b #=> true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T20:25:06.963

如果我没记错的话，你的解决方案是 O(n^2) 这个有点麻烦，但效率更高，至少对于大输入（这是 O(n)）。它可能需要更多的工作......

```
def is_subset?(a, b)
    letters = Hash.new(0)
    a.each_char{|x| letters[x] += 1}
    b.each_char{|x| letters[x] -= 1}
    letters.values.all?{|v| v >= 0 }
end 
```

**编辑：**更高效一点：

```
def is_subset?(a, b)
    letters = Hash.new(0)
    a.each_char{|x| letters[x] += 1}
    b.each_char.all?{|x| (letters[x] -= 1) > 0}
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-07T04:10:53.253

绝对想在这里利用枚举器——最好的方法是使用 group_by 并比较每个字母出现的次数：

```
def subset?(a, b)
   a = a.each_char.group_by { |char| char }
   b = b.each_char.group_by { |char| char }
   a.each_key.all? do |letter|
     b[letter] && a[letter].size < b[letter].size
   end
end 
```

因此，如果我们将哈希查找算作 O(1) 操作，那么这是一个 O(m + n) 算法

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T19:01:04.677

试试这个：

```
class String
  def subset_of?(str)
    e2 = str.each_char
    c2 = c2p = nil
    each_char do |c1|
      c2p, c2 = c2, e2.next
      next if c2 == c1    
      c2p, c2 = c2, e2.next until (c2 != c2p) # move until we exclude duplicates
      return false if c2 != c1
    end
    true
  rescue StopIteration
    false
  end
end 
```

测试功能：

```
>> "chedddar".subset_of?("cheddaaaaaar")
=> false
>> "cheddar".subset_of?("cheddaaaaaar")
=> true
>> "cheddar".subset_of?("cheddaaaaaarkkkk")
=> true
>> "chedddar".subset_of?("cheddar")
=> false
>> "chedddar".subset_of?("chedd")
=> false 
```

**编辑 1**

根据提供的附加信息更新了解决方案。

```
class String
  def subset_of?(str)
    h1, h2 = [self, str].map {|s| s.each_char.reduce(Hash.new(0)){|h, c| h[c] += 1; h}}
    h1.all?{|c, k| h2[c] >= k}
  end
end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-06T01:36:55.500

几周前发布了一个类似的问题，我得到了接受的答案，例如：

```
def is_subset?(a,b)
  !a.find{|x| a.count(x) > b.count(x)}
end 
```

**基准更新**

```
require 'benchmark'

def random_char
  ('a'..'z').to_a.sample
end

A = 8.times.map{random_char}
B = 8.times.map{random_char}

def ary_subset?(a,b) # true iff a is subset of b
  a_counts = a.reduce(Hash.new(0)) { |m,v| m[v] += 1; m }
  b_counts = b.reduce(Hash.new(0)) { |m,v| m[v] += 1; m }
  a_counts.all? { |a_key,a_ct| a_ct <= b_counts[a_key] }
end

Benchmark.bm do |x|
  x.report('me')     {100000.times{is_subset?(A,B)}}
  x.report('dbenhur'){100000.times{ary_subset?(A,B)}}
end 
```

* * *

```
 user     system      total        real
me  0.375000   0.000000   0.375000 (  0.384022)
dbenhur  2.558000   0.000000   2.558000 (  2.550146) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-06T07:12:05.517

先把骗子去掉怎么样？

```
(A.uniq - B.uniq).empty? 
```

# mercurial - 有没有办法在一组差异中搜索文件的特定字符串？

> ID：11349555
> 
> 赞同：9
> 
> 时间：2012-07-05T17:35:39.690
> 
> 标签：mercurial

我想在一个文件（最好是一组文件）的差异中搜索一组指定的修订（或全部）。我正在寻找可文本搜索的差异报告。我有这个：

`hg diff -r 0:47131 .\TheFile.cs | grep 'theSearch' -Context 50`

好的，这很好用，但是决定包含多少上下文以及找到第一个和最后一个修订版是一个问题。我可以更好地自动执行此操作，但似乎需要做一些工作。

我想知道是否有一个工具可以做得更好。也许是 hg 服务器的差异报告网页？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T19:03:54.283

您可以使用它[`hg grep`](http://www.selenic.com/hg/help/grep)来搜索整个回购历史。

例如：

```
hg grep --all --include .\TheFile.cs 'theSearch' 
```

`'theSearch'`将在 repo 的每个修订中找到所有实例。如果没有该`--all`标志，它将在包含该字符串的第一个修订版处停止。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-04T13:41:13.730

我有一种`hg grep`在整个文件的内容中搜索每个匹配修订的感觉。而如果您只想搜索差异，请尝试以下操作：

`hg log --template "{ifcontains('TODO', diff(), '{node} {desc}\n', '')}"`

这将列出其差异中包含“TODO”的修订。请注意，这还将搜索已删除的行以及差异上下文（+/- 3 行），因此它并不完美。

您可以进一步限制使用 args 到 diff() - 请参阅`hg help template`- 并使用 revsets ( `-r ...`)。

这可能比使用您的`hg diff | grep`方法更好，因为它逐个区分每个变更集，而不是跨两个变更集区分整个 repo，并允许您使用 revsets 过滤掉合并修订，例如。

# iphone - UIViewController 的 UIInterfaceOrientation

> ID：11349557
> 
> 赞同：1
> 
> 时间：2012-07-05T17:35:46.117
> 
> 标签：iphone, objective-c, ios, ipad

我尝试检查当前呈现的视图控制器的 UIInterfaceOrientation 并且由于某种原因它总是返回风景。

```
 UIInterfaceOrientation currentOrientation = (UIInterfaceOrientation)[[UIApplication sharedApplication] statusBarOrientation];
            if (currentOrientation == UIInterfaceOrientationPortrait){
                self.scrollView_.colMargin = 50;
            } else {
                self.scrollView_.colMargin = 130;
            } 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:44:18.627

您可以按如下方式检查方向：

```
UIInterfaceOrientation orientation = [[UIDevice currentDevice] orientation];
    if( orientation == UIDeviceOrientationPortrait ) ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T16:35:08.720

从 iOS UIDevice 类参考：

**方向**

返回设备的物理方向。（只读）

讨论

此属性的值**始终返回 0，除非已**通过调用 beginGeneratingDeviceOrientationNotifications 启用了方向通知。

因此，您需要执行以下操作：

```
- (void) viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:) name:UIDeviceOrientationDidChangeNotification object:nil];
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

然后不要忘记

```
 [[UIDevice currentDevice] endGeneratingDeviceOrientationNotifications]; 
```

当您查看DidUnload

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T17:39:01.940

铸造不是魔术。状态栏方向可以使用与界面方向不同的值。请改用当前视图控制器`self.interfaceOrientation`属性。

# ruby - 如何在Ruby中仅对数组中对象属性的正/负值求和

> ID：11349560
> 
> 赞同：0
> 
> 时间：2012-07-05T17:36:07.487
> 
> 标签：ruby, arrays, sum, inject

我知道我可以使用注入方法在 Ruby 中对数组中对象的属性求和。例如，我可以使用以下命令将数组中所有代理的现金相加：

```
sum_of_cash = agents.inject(0) { |sum, e| sum + e.cash } 
```

但是，我如何才能仅对属性的正值或负值求和，例如，仅对正值或负值现金余额求和？

我能想到的一种方法是对数组进行循环并仅在值为正时使用 if 函数求和，但如果可能的话，我正在寻找一种更简洁的方法。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T17:54:20.443

我认为这样的东西更优雅一点

```
agents.map(&:cash).select { |c| c > 0 }.inject(&:+) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:00:57.557

我可以想到两种不需要`if`内部注入的方法：

1.  将适当的方法添加到代理对象。然后你可以编写以下代码：

    `sum_of_cash = agents.inject(0) { |sum, e| sum + e.positive_cash }`

2.  注射前过滤：

    `sum_of_case = agents.map(&:cash).keep_if{|c| c > 0 }.reduce(&:+)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T18:01:05.167

```
 agents.select{|e| e.cash > 0}.inject(0) { |sum, e| sum + e.cash } 
```

# perl - 使用 DBIx::Class 的多对多访问器

> ID：11349561
> 
> 赞同：2
> 
> 时间：2012-07-05T17:36:08.803
> 
> 标签：perl, many-to-many, catalyst, dbix-class

使用 DBIx::Class，我试图创建一个跨越两个链接表的多对多访问器（甚至只是一个多对多关系）。

所讨论的三个数据表是**Users**、**Roles**和**Pages**，以及两个链接表**UserRoles**和**RolePages**。这些表是相关的：

*   一个**用户**有很多用户**角色**
*   一个**角色**有很多**用户角色**
*   一个**Role**有很多**RolePages**
*   一个**页面**有很多**RolePages**

Catalyst 帮助程序脚本为我创建了这些关系和访问器：

```
package MyApp::Schema::Result::User;

__PACKAGE__->has_many(
  "user_roles",
  "MyApp::Schema::Result::UserRole",
  { "foreign.username" => "self.username" },
  { cascade_copy => 0, cascade_delete => 0 },
);

__PACKAGE__->many_to_many("roles", "user_roles", "role");

package MyApp::Schema::Result::Role;

__PACKAGE__->has_many(
  "role_pages",
  "MyApp::Schema::Result::RolePage",
  { "foreign.role" => "self.role" },
  { cascade_copy => 0, cascade_delete => 0 },
);

__PACKAGE__->has_many(
  "user_roles",
  "MyApp::Schema::Result::UserRole",
  { "foreign.role" => "self.role" },
  { cascade_copy => 0, cascade_delete => 0 },
);

__PACKAGE__->many_to_many("page_names", "role_pages", "page_name")

__PACKAGE__->many_to_many("usernames", "user_roles", "username");

package MyApp::Schema::Result::Page;

__PACKAGE__->has_many(
  "role_pages",
  "MyApp::Schema::Result::RolePage",
  { "foreign.page_name" => "self.page_name" },
  { cascade_copy => 0, cascade_delete => 0 },
);

__PACKAGE__->many_to_many("roles", "role_pages", "role");

package MyApp::Schema::Result::UserRole;

__PACKAGE__->belongs_to(
  "role",
  "MyApp::Schema::Result::Role",
  { role => "role" },
  { is_deferrable => 1, on_delete => "CASCADE", on_update => "CASCADE" },
);

__PACKAGE__->belongs_to(
  "username",
  "MyApp::Schema::Result::User",
  { username => "username" },
  { is_deferrable => 1, on_delete => "CASCADE", on_update => "CASCADE" },
);

package MyApp::Schema::Result::RolePage;

__PACKAGE__->belongs_to(
  "page_name",
  "MyApp::Schema::Result::Page",
  { page_name => "page_name" },
  { is_deferrable => 1, on_delete => "CASCADE", on_update => "CASCADE" },
);

__PACKAGE__->belongs_to(
  "role",
  "MyApp::Schema::Result::Role",
  { role => "role" },
  { is_deferrable => 1, on_delete => "CASCADE", on_update => "CASCADE" },
); 
```

我的最终目标是有一种干净的方式来获取应该为当前用户显示的页面列表。IE：

```
foreach my $page ($c->user->pages) {
    # do something with $page
} 
```

我在 MyApp::Schema::Result::User 类中确实有这个方法：

```
sub pages {
    my ($self) = @_;

    return $self->result_source->schema->resultset('RolePage')->search(
        {
            'username.username' => $self->username,
        },
        {
            join => [
                {
                    role => {user_roles => 'username'},
                },
                'page_name',
            ],
        }
    );
} 
```

这一直有效，直到我添加了一个类来扩展 MyApp::Schema::Result::RolePage。那堂课是这样开始的：

```
package MyApp::Schema::ResultSet::RolePage;

use Moose;
use namespace::autoclean;
extends qw/MyApp::Schema::ResultSetX::DisplayTable/;

has '+name' => ( default => 'RolePage' ); 
```

我在整个应用程序中都使用了这种技术，以创建各种结果集，但现在只是遇到了麻烦。我收到此错误：

> 在 Lifeway::Controller::Root->auto 中捕获的异常“new() 的单个参数必须是 HASH ref

这是我的`MyApp::Schema::Result::User->pages()`方法造成的。**所以，为了避免这个错误，我想我会尝试创建一个从Users**到**Pages**的多对多访问器（甚至只是一个多对多关系）。

是否可以创建这样一个跨越两个链接表的访问器/关系？如果是这样，怎么做？我在文档中找不到示例，并且我自己的想法已经用完了。如果做不到这一点，关于为什么我的 pages() 方法会出现该错误的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T21:13:06.827

据我所知，没有对多对多关系的内置支持，但推出自己的关系并不难。

在 Schema::Result::User.pm

```
sub pages {
  my $self = shift;
  return $self->search_related('user_roles')
    ->search_related('role')
    ->search_related('role_pages')
    ->search_related('page_name');
    # Alternatively, if you need to eliminate duplicates:
    # ->search_related('page_name', {}, {distinct => 1});
} 
```

我认为这与标准 DBIx 多对多关系桥的功能相当接近。

# clearcase - CodeCollab GUI 问题

> ID：11349563
> 
> 赞同：3
> 
> 时间：2012-07-05T17:36:16.153
> 
> 标签：clearcase, code-collaborator

我正在尝试通过 GUI 将代码上传到 Code Collaborator。当我输入服务器 url、用户名和密码并选择 ClearCase 作为 SCM 时，我收到以下错误：Error:rational cm api for clearcase remote client not found。有没有人遇到过这个？你做了什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:52:55.847

URL 表示您正在与 CCRC 服务器（ClearCase 远程客户端服务器）通信以查看存储在 ClearCase 中的代码。

CodeCollaborator [(v7.0.7027) 用户指南](http://support.smartbear.com/resources/cc/usersguide.pdf)确实提到：

> ### 支持 ClearCase 远程客户端 (CCRC)
> 
> CodeCollaborator 与 CCRC 的集成使用 Rational Change Management Server API。
> 在运行 CodeCollaborator 客户端安装程序时，有一个编辑字段允许您选择 Rational CM API jar 文件在系统上的位置。所需的文件是：
> 
> *   `remote_core.jar`
> *   `stpcc.jar`
> *   `stpcmmn.jar`
> *   `stpwvcm.jar`
> 
> 这些文件由 ClearCase Remote Client 安装在 Rational Shared Resource Directory 下。
> 该目录应类似于以下内容之一：

```
C:\Program Files\IBM\IMShared\plugins\com.ibm.rational.teamapi_7.1.2.v201105310712
# or
/opt/eclipse/plugins/com.ibm.rational.teamapi_7.1.2.v201105310712 
```

> 在您的系统上找到文件的位置并在安装过程中选择或输入它，以便 CodeCollaborator 安装程序可以将它们提供给 CodeCollaborator 客户端。
> 安装程序会将它们复制到 CodeCollaborator 客户端安装目录下的以下子目录中：

```
ui/plugins/com.smartbear.collaborator_7.0.xxxx/libs 
```

> 如果使用 RPM 安装程序，您必须手动将这些文件复制到正确的子目录。

因此，请确保这些文件存在于系统中，并复制到 CodeBear 客户端安装目录中。

# sql - 在 Oracle 中确定假期

> ID：11349568
> 
> 赞同：0
> 
> 时间：2012-07-05T17:36:33.620
> 
> 标签：sql, oracle, date

Oracle 中是否有默认函数允许您将日期作为参数传递，并返回是否是美国假期？

就像是

```
IS_HOLIDAY(:DATEINPUT) 
```

我需要在**没有**存储过程的情况下执行此操作。在我的 select 语句中，我想做的是在 where 子句中过滤掉基于 holday 的数据。

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T17:43:24.487

不，没有内置功能。即使你把它减少到美国的假期，这仍然不是确定性的。不同的州有不同的假期，不同的公司承认不同的假期，不同的公司对假期的处理方式也不同（即周六的假期可能会在前一个星期五、下一个星期一庆祝，或者根本不庆祝）。实际上，这意味着您的组织几乎肯定需要您的组织认可的假期以及庆祝这些假期的时间的自定义表格。

为什么不能为此使用存储过程？当然，您可以简单地在 SQL 查询中列出有效的假期，但这会相当不雅——一个假期表和一个确定日期是否属于假期的存储函数似乎更实用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:52:11.787

这是我写的一个函数来测试我们是否放假。请注意，如果您需要在政府假期或其他假期后的第一个工作日，那么您也可以使用第二个功能。

```
create or replace 
FUNCTION IS_HOLIDAY(V_DT DATE) RETURN VARCHAR2 AS
RET VARCHAR2(1);
V_MONTH VARCHAR2(2);
V_DAY VARCHAR2(2);
V_YEAR VARCHAR2(4); 
MLK DATE;
WASHINGTON DATE;
MEMORIAL DATE;
COLUMBUS DATE;
THANKSGIVING DATE;
BEGIN
 RET:='F';
 SELECT TO_CHAR(V_DT,'YYYY') INTO V_YEAR FROM DUAL;
 SELECT TO_CHAR(V_DT,'MM') INTO V_MONTH FROM DUAL;
 SELECT TO_CHAR(V_DT,'dd') INTO V_DAY FROM DUAL;
 SELECT NEXT_DAY(TO_DATE(TO_CHAR(SYSDATE,'YYYY')||'0201','YYYYMMdd')-1,'MON')+14 INTO WASHINGTON FROM DUAL;
 SELECT NEXT_DAY(TO_DATE(TO_CHAR(SYSDATE,'YYYY')||'0101','YYYYMMdd')-1,'MON')+14 INTO MLK FROM DUAL;
 SELECT NEXT_DAY(TO_DATE(TO_CHAR(SYSDATE,'YYYY')||'0201','YYYYMMdd')-1,'MON')+14 INTO WASHINGTON FROM DUAL;
 SELECT NEXT_DAY(LAST_DAY(TO_DATE(TO_CHAR(SYSDATE,'YYYY')||'0501','YYYYMMdd'))-7,'MONDAY')INTO MEMORIAL FROM DUAL;
 SELECT NEXT_DAY(TO_DATE(TO_CHAR(SYSDATE,'YYYY')||'1001','YYYYMMdd')-1,'MON')+7  INTO COLUMBUS FROM DUAL;
 SELECT NEXT_DAY(TO_DATE(TO_CHAR(SYSDATE,'YYYY')||'1101','YYYYMMdd')-1,'THURSDAY')+21 INTO THANKSGIVING FROM DUAL;
 IF(TRUNC(V_DT) = TRUNC(MLK) )THEN RET:='T';
 ELSIF(TRUNC(V_DT)=TRUNC(WASHINGTON))THEN RET :='T';
 ELSIF(TRUNC(V_DT)=TRUNC(MEMORIAL) )THEN RET:='T';
 ELSIF(TRUNC(V_DT)=TRUNC(COLUMBUS)) THEN RET:= 'T';
 ELSIF(TRUNC(V_DT)=TRUNC(THANKSGIVING)) THEN RET:='T';
 ELSIF(V_MONTH ='01' AND V_DAY='01') THEN RET:='T';  --NEW YEARS
 ELSIF(V_MONTH='07' AND V_DAY='04') THEN RET:='T';
 ELSIF(V_MONTH='09' AND V_DAY='02') THEN RET:='T';
 ELSIF(V_MONTH='11' AND V_DAY='11') THEN RET:='T';
 ELSIF(V_MONTH='12' AND V_DAY='25') THEN RET:='T';
 END IF;  
 RETURN RET;

END DIS_IS_HOLIDAY; 
```

下一个函数将找到给定假期的第一个工作日

```
create or replace 
 FUNCTION first_business_day (v_dt DATE)
   RETURN DATE
 IS
   return_dt   DATE;
  BEGIN
   SELECT CASE
         WHEN (CASE
                  WHEN( TO_CHAR (TRUNC (V_DT, 'MM'), 'DY') IN
                          ('SAT', 'SUN'))
                  THEN
                     NEXT_DAY (TRUNC (v_dt, 'MM'), 'MON')
                  ELSE
                     TRUNC (V_DT, 'MM')
                  END) IS NOT NULL AND DIS_IS_HOLIDAY(V_DT)='T'

         THEN
            CASE
               WHEN TO_CHAR (TRUNC (v_dt, 'MM') + 1, 'DY') IN
                       ('SAT', 'SUN')
               THEN
                  NEXT_DAY (TRUNC (v_dt, 'MM') + 1, 'MON')
               ELSE
                  TRUNC (v_dt, 'MM') + 1
            END
         ELSE
            CASE
               WHEN TO_CHAR (TRUNC (v_dt, 'MM'), 'DY') IN ('SAT', 'SUN')
               THEN
                  NEXT_DAY (TRUNC (v_dt, 'MM'), 'MON')
               ELSE
                  TRUNC (v_dt, 'MM')
            END
      END
   INTO return_dt
   FROM DUAL;

 RETURN return_dt;
END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T23:08:49.447

您不能将美国假期存储在不同的表中，然后加入吗？

我确信那里有免费的公共数据可以提供你需要的东西。例如，该站点显示了 2012 年至 2020 年的所有美国银行假日：[https ://gist.github.com/shivaas/4758439](https://gist.github.com/shivaas/4758439)

# actionscript-3 - 如何使用 Flash 制作流体/液态空气应用程序？

> ID：11349569
> 
> 赞同：1
> 
> 时间：2012-07-05T17:36:37.253
> 
> 标签：actionscript-3, flash, air, resolution, mobile-application

我需要的是利用屏幕的所有区域，与用户的屏幕比例无关。默认情况下，Air 应用程序由内向外按比例缩放。如果我们在 Android 中没有如此不同的屏幕尺寸和比例，那就太好了。

愤怒的小鸟是我所说的流畅布局的一个很好的例子，它总是相应地缩放/缩放三层（前、游戏和背景层）。

我的应用程序主要是一个基于界面的游戏，用户必须看到一些信息并点击一些按钮。我想我可以将我的比例主要基于用户屏幕的宽度，并在需要时使用滚动。问题是如何做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T01:19:35.783

流体/液体/响应式布局可能意味着某种布局管理器。

此功能内置于 Flex。

每个 Flash，更具体地说，根据您的要求，听起来像一些基本的缩放和定位是您想要的。

**图层**

正如您所指出的，不同的层每次缩放都有不同的要求：

*   背景
*   游戏
*   界面/控件

背景和游戏可能是单层；但是，您可能希望对前台用户控件进行不同的限制，以提高可读性和交互性。

**搭建舞台**

如果你想控制缩放，你应该设置：

```
import flash.display.StageAlign;
import flash.display.StageScaleMode;

stage.scaleMode = StageScaleMode.NO_SCALE;
stage.align = StageAlign.TOP_LEFT; 
```

这也有助于移动设备在纵向和横向之间交换的方向改变。

浏览器可以调整大小；所以，你需要监听 resize 事件：

```
stage.addEventListener(Event.RESIZE, resizeHandler);
stage.dispatchEvent(new Event(Event.RESIZE));

function resizeHandler(event:Event=null):void
{
    /* scale code ... */
} 
```

**定位**

顶部和左侧定位总是很容易，因为左上角是 0x0 坐标。右下角需要`DisplayObject`从舞台上减去一个宽度。

右对齐示例：

```
mc.x = stage.stageWidth - mc.width; 
```

底部对齐示例：

```
mc.y = stage.stageHeight - mc.height; 
```

把东西放在舞台中央：

```
mc.x = (stage.stageWidth * 0.5) - (mc.width * 0.5);
mc.y = (stage.stageHeight * 0.5) - (mc.height * 0.5); 
```

**缩放**

您需要确定您的约束是什么，以避免舞台上出现空白/空白区域。

这可以使用比率变量来实现：

```
var ratio:Number = 1.0; 
```

比例缩放：

```
ratio = stage.stageWidth / gameMovieClip.width;
gameMovieClip.scaleX = ratio;
gameMovieClip.scaleY = ratio; 
```

拉伸显示对象以适应舞台：

```
gameMovieClip.scaleX = stage.stageWidth / gameMovieClip.width;
gameMovieClip.scaleY = stage.stageHeight / gameMovieClip.height; 
```

最佳拟合算法需要在一个范围内拟合显示对象的最小约束。有一些库可以帮助解决这个问题，例如[Greensock auto fit area](http://www.greensock.com/autofitarea/)。

![自动适应区域](../Images/3d3ea9adea943f38fbe002da65e4eced.png)

**虚拟相机**

虚拟相机在 Flash 中很流行。这个概念是您设计您的视图，然后平移和缩放相机以显示特定区域。

[面向非编码人员的 O'Reilly ActionScript](http://www.oreillynet.com/pub/a/javascript/2004/08/17/flashhacks.html?page=last)

![凸轮](../Images/b9f06c0323e63b9edc103e2630740daa.png)

*   [示例 1](http://www.oreillynet.com/javascript/2004/08/17/examples/3Dcam02.html)
*   [示例 2](http://www.oreillynet.com/javascript/2004/08/17/examples/3dcam01.html)
*   [示例 3](http://www.oreillynet.com/javascript/2004/08/17/examples/3Dcam03.html)

虚拟相机 FLA 示例：

*   [http://bryanheisey.com/blog/wp-content/uploads/2009/02/vcam_as3.fla](http://bryanheisey.com/blog/wp-content/uploads/2009/02/vcam_as3.fla)

虚拟相机示例：

*   [http://www.fluidanims.com/FAelite/phpBB3/viewtopic.php?f=43&t=3369](http://www.fluidanims.com/FAelite/phpBB3/viewtopic.php?f=43&t=3369)
*   [http://www.neoseeker.com/forums/87/t647746-cam-virtual-cam-for-flash-mx-lower-level-intermediate/](http://www.neoseeker.com/forums/87/t647746-cam-virtual-cam-for-flash-mx-lower-level-intermediate/)
*   [http://www.flashkit.com/movies/Components/Flash_V--_redesig-10378/index.php](http://www.flashkit.com/movies/Components/Flash_V--_redesig-10378/index.php)

谷歌“Flash 虚拟相机”或“Flash v-cam”例如。

# database - ORA-00937: 不是单组组函数 - 查询错误

> ID：11349571
> 
> 赞同：0
> 
> 时间：2012-07-05T17:36:39.427
> 
> 标签：database, oracle

**错误：ORA-00937：不是单组组函数**

询问：

```
 select count(*) todas,
       sum(case when i.prioridade = 1 then 1 else 0 end) urgente,
       sum(case when i.prioridade = 2 then 1 else 0 end) alta,
       sum(case when i.prioridade = 3 then 1 else 0 end) normal,
       sum(case when i.prioridade = 4 then 1 else 0 end) baixa,
       (select count(*)
        from GMITEMOS i 
        inner join GMCTLSLA c  on c.os = i.cd_numero_os and c.item = i.item
        where i.situacao in ('A', 'I', 'P')
           and c.ordem = 99999
           ) naoAvaliados,
       sum(case when i.situacao = 'P' then 1 else 0 end) pendentes,
       sum(case when i.situacao = 'A' or i.situacao = 'I' then 1 else 0 end) iniciados
from GMITEMOS i 
where i.situacao in ('A', 'I', 'P')
   and  exists (select 1 
               from GMCTLSLA c 
               where c.os = i.cd_numero_os 
                  and c.item = i.item) 
```

错误发生在这里：

```
(select count(*)
        from GMITEMOS i 
        inner join GMCTLSLA c  on c.os = i.cd_numero_os and c.item = i.item
        where i.situacao in ('A', 'I', 'P')
           and c.ordem = 99999
           ) naoAvaliados 
```

有人能说出为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:10:04.033

您可能已经修复了它，`max`但这不是它发生的*原因*，而且有点 hacky。您的问题是您的子查询（转换为单个列）不是聚合查询，,`min`等，因此需要包含在子句中。您通过将其包装来解决此问题，因为单个值的最大值将始终保持不变。`max``sum``group by``max`

但是，由于您的子查询本身就是一个分析查询，并且只会返回一行，因此显而易见的事情是使用笛卡尔连接将其添加到您的查询中。在显式连接语法中，这称为[`cross join`](http://en.wikipedia.org/wiki/Join_%28SQL%29#Cross_join).

```
select count(*) todas
     , sum(case when i.prioridade = 1 then 1 else 0 end) urgente
     , sum(case when i.prioridade = 2 then 1 else 0 end) alta
     , sum(case when i.prioridade = 3 then 1 else 0 end) normal
     , sum(case when i.prioridade = 4 then 1 else 0 end) baixa
     , naoAvaliados
     , sum(case when i.situacao = 'P' then 1 else 0 end) pendentes
     , sum(case when i.situacao = 'A' or i.situacao = 'I' then 1 else 0 end) iniciados
  from GMITEMOS i 
 cross join (select count(*) as naoAvaliados
               from GMITEMOS j
              inner join GMCTLSLA k
                 on k.os = j.cd_numero_os 
                and k.item = j.item
              where j.situacao in ('A', 'I', 'P')
                and k.ordem = 99999
                    )
 where i.situacao in ('A', 'I', 'P')
   and exists (select 1 
                 from GMCTLSLA c 
                where c.os = i.cd_numero_os 
                  and c.item = i.item
                      ) 
```

笛卡尔连接的名声不好，因为它将连接一侧的行数乘以另一侧的行数。然而，它确实有它的用途，尤其是在这种情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:10:04.027

发生这种情况是因为子查询本身是标量结果，而不是组函数。正如您显然发现的那样，您可以通过替换一个产生与子查询等效结果的组函数来修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-09T08:24:25.297

在合并语句中，如果您遇到此错误而不是简单地使用 group by，它将解决问题。

```
merge into table1 tb1
using
   (select a.id,a.ac_no,sum(a.qy) as qyt,sum(a.amt) as sum_amt from 
    table2 a, table1 b
    where a.id=b.id
    and a.id = '1234'
    and a.date = '08Oct2014'
    and a.ac_no in (123, 234, 345)
    and a.ac_no = b.ac_no
    group by a.ac_no,a.id
   )qry
  on (qry.id=tb1.id and qry.ac_no=tb1.ac_no )
  when matched then
  update set qy=qry.qy,amt = qry.sum_amt; 
```

# r - R中的每秒统计信息

> ID：11349572
> 
> 赞同：3
> 
> 时间：2012-07-05T17:36:46.277
> 
> 标签：r, histogram

我有一个包含这样的时间戳的文件：

```
0.000100
0.003890
0.567980
0.999000
0.999990
1.000010
1.236800
1.456098
1.989001
2.098710
2.309879
2.890879 
```

我想在上面的文件中使用 R 找到每秒的统计信息，例如第一秒：5 个值，第二秒：4，第三秒 3。我还想找到每秒平均数，所有秒数的最大值和最小值所有秒的值。如何使用 R 提取这些？我是 R 的新手，仍在学习。我知道如何在直方图中绘制这些，但不知道如何提取这些值。

数据：

```
x <- c(0.0001, 0.00389, 0.56798, 0.999, 0.99999, 1.00001, 1.2368, 1.456098, 
    1.989001, 2.09871, 2.309879, 2.890879) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:50:57.177

您还可以使用 cut 函数创建一个因子（时间范围），然后以与 Justin 建议的聚合方式类似的方式使用：

```
y <- data.frame(val=x, time=cut(x, 0:round(max(x))))
aggregate(val~time, y, length)
aggregate(val~time, y, mean) 
```

或者创建自己的函数并一举完成：

```
funner <- function(x){
    c(mean=mean(x), n=length(x), min=min(x), max=max(x), sd=sd(x))
}

aggregate(val~time, y, funner) 
```

产生：

```
> aggregate(val~time, y, funner)
   time  val.mean     val.n   val.min   val.max    val.sd
1 (0,1] 0.5141920 5.0000000 0.0001000 0.9999900 0.4996575
2 (1,2] 1.4204773 4.0000000 1.0000100 1.9890010 0.4223025
3 (2,3] 2.4331560 3.0000000 2.0987100 2.8908790 0.4102205 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T17:43:08.237

您可以使用整数数学来做到这一点：

```
x <- c(1e-04, 0.00389, 0.56798, 0.999, 0.99999, 1.00001, 1.2368, 1.456098, 
1.989001, 2.09871, 2.309879, 2.890879)

> aggregate(x, list(x %/% 1), mean)
  Group.1        x
1       0 0.514192
2       1 1.420477
3       2 2.433156
> 
```

我还建议您为这种聚合查找`data.table`和打包。`plyr`

每个组的`max`和都很容易遵循。`min`如果您只需要`max`or`min`的系列，您可以直接使用这些功能

```
> max(x)
[1] 2.890879
> 
```

# c# - 在 asp.net 中看不到员工类对象属性

> ID：11349582
> 
> 赞同：0
> 
> 时间：2012-07-05T17:37:16.277
> 
> 标签：c#, asp.net, oop, intellisense

我有一个从“Login.aspx”页面的 btnContinue_Click 事件调用的 Employee 类对象。我无法看到智能感知中的任何属性。Employee.cs 文件与 Web 应用程序位于同一项目中。令我困惑的是，aspx.cs 识别`Employee oEmp = new Employee();`得非常好。

我在下面的代码中做错了什么？

这是我的代码：
**employee.cs**

```
public class Employee
{
    public string FirstName  { get; set; }
    public string LastName { get; set; }
    public string DateOfBirth { get; set; }
    public string EMailAddress { get; set; }
    public string PhoneNumber { get; set; }
    public string CorpID { get; set; }
    public string SignOn { get; set; }
    public string Password { get; set; }
} 
```

**登录.aspx.cs**

```
 protected void btnEmployeeLogin_Click(object sender, EventArgs e)
    {
        try
        {
            if (LogInValidated())
            {
                Employee oEmp = new Employee();
                //oEmp.
            }
        }

        catch (Exception ex)
        {
            Response.Write(ex.ToString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:42:52.590

听起来 Visual Studios 认为 oEmp 是 .aspx 页面上的控件，而不是类的类型`Employee`。您是否仔细检查了您的 .aspx 页面以确保您没有使用它的控件`ID="oEmp"`and `runat="server"`？

或者您确定您的解决方案中没有`Employee.ascx`文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:40:34.357

在页面顶部，您可以添加：

```
using **here the package of your employee class**; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T17:42:50.603

确保 Customer 类与 btnCustomerLogin_Click 事件位于相同的命名空间中。如果它不在类的顶部包含 using 语句。

如果您使用的是 Visual Studio，只需单击 Employee 对象并按*Ctrl+'。*并从那里选择命名空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T17:58:54.720

移动 Employee.cs 文件，使其位于 App_Code 下。这应该使 VS 识别该类。

如果您还没有 App_Code 文件夹，请通过以下方式添加：

*   在 VS 解决方案资源管理器中右键单击网站
*   `App_Code`在“ ”下选择“ `Add Asp.net folder`”

不要只添加一个名为 App_Code 的“常规”文件夹。

# winforms - 在 XP、Vista、Windows7 ... 32 和 64 位上运行 .Net 应用程序

> ID：11349585
> 
> 赞同：1
> 
> 时间：2012-07-05T17:37:20.457
> 
> 标签：winforms

我收到了客户的申请。该应用程序有 2 个安装文件，一个用于 32 位操作系统，另一个用于 64 位 Windows 操作系统。

我想将它们结合起来，我想制作 1 个在所有 Windows 操作系统和 32 位和 64 位上运行的 exe。

我需要做什么 ？

问候，贝罗兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:49:46.477

因为：“我**收到**了客户的申请。”

我建议使用[DotNetInstaller](http://dblock.github.com/dotnetinstaller/)，它是安装程序的*引导*程序。

然后只需打包*两个*设置文件并配置 DNI 以根据目标机器运行正确的设置。（它也可用于安装正确的 .NET 版本。）

.. 或者，要求客户提供统一的安装程序:)

# json - 淘汰赛下拉表单绑定

> ID：11349586
> 
> 赞同：0
> 
> 时间：2012-07-05T17:37:21.923
> 
> 标签：json, knockout.js

我有一个用于添加多个地址的 html 表单：

[http://i48.tinypic.com/jg2ruo.png](http://i48.tinypic.com/jg2ruo.png)

这样，如果我更改地址类型选择，整个表单必须绑定到正确的 json 地址对象：

```
var jsonAddresses = { Addresses:
            [
                { AddressType: 1, Address1: "", Address2: "",Province:"",City:"",State:"",PostalCode:"",Municipal:"" },
                { AddressType: 2, Address1: "", Address2: "",Province:"",City:"",State:"",PostalCode:"",Municipal:"" },
                { AddressType: 3, Address1: "", Address2: "",Province:"",City:"",State:"",PostalCode:"",Municipal:"" },
                { AddressType: 4, Address1: "", Address2: "",Province:"",City:"",State:"",PostalCode:"",Municipal:"" }
            ] 
         }; 
```

实际上，我已经使用 Jquery 完成了很多代码，但我想知道如何使用 Knockout 来做到这一点。这个想法不是拥有一个具有 4 种地址类型的固定 json 对象，我只想拥有 1 个 json 对象，如果我选择不在数组中的地址类型，则添加并绑定对象，如果地址类型已经存在于数组中然后绑定它。然后我可以有一个“删除”链接，单击该链接时，选定的地址类型对象将从数组中删除。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:50:06.673

我对此进行了一些猜测，因为它并不完全清楚。您需要一个用于编辑地址的表单，并带有一个下拉菜单，可让您选择正在编辑的地址。我已经把一个[工作小提琴](http://jsfiddle.net/VAs5r/2/)放在一起，但这里是重要的部分。

您有一个`Address`对象的概念，这是可观察的，因为您将更新值。然后，您需要一个视图模型来跟踪所有地址，对地址有一些概念`selected`，以及添加新地址的能力。这是不清楚的部分，所以我只是按了一个`New Address`按钮。让我知道您是否还有其他想法。除了状态列表和初始地址数据（都应该来自服务器）之外，这就是所有的代码，正如你所看到的，knockout 使它变得非常简单。

HTML：

```
<select data-bind="options: addresses, optionsText: 'typeName', value: selectedAddress"></select>
<div data-bind="with: selectedAddress">
    Name: <input data-bind="value: typeName" /></br>
    Line1: <input data-bind="value: address1" /></br>
    Line2: <input data-bind="value: address2" /></br>
    City: <input data-bind="value: city" /></br>
    State: <select data-bind="options: $parent.states, value: state"></select></br>
    Postal Code: <input data-bind="value: postalCode" />
</div>
<button data-bind="click: addAddress">New Address</button>
<button data-bind="click: deleteAddress">Remove Address</button> 
```

​</p>

视图模型：

```
var Address = function(address) {
    this.id = ko.observable(address.AddressType || 0);
    this.typeName = ko.observable(address.TypeName || '');
    this.address1 = ko.observable(address.Address1 || '');
    this.address2 = ko.observable(address.Address2 || '');
    this.city = ko.observable(address.City || '');
    this.state = ko.observable(address.State || '');
    this.postalCode = ko.observable(address.PostalCode || '');
};

var App = function(addressList) {
    var self = this;
    self.states = states;
    self.addresses = ko.observableArray(ko.utils.arrayMap(addressList,
          function(i) { return new Address(i); }
    ));
    self.selectedAddress = ko.observable(self.addresses[0]);

    self.addAddress = function() {
        var newId = self.addresses()[self.addresses().length -1].id + 1;
        var newAddress = new Address({AddressType: newId});
        self.addresses.push(newAddress);
        self.selectedAddress(newAddress);
    };

    self.deleteAddress = function() {
        self.addresses.remove(self.selectedAddress());
        self.selectedAddress(self.addresses[0]);
    };
}; 
```

**EDIT1**：添加了删除按钮。这是用于演示的，显然当数组为空时您需要一些安全逻辑。

# javascript - css可见性属性和javascript setTimeout方法出错

> ID：11349588
> 
> 赞同：0
> 
> 时间：2012-07-05T17:37:27.470
> 
> 标签：javascript, css, visibility, settimeout

当一个元素滑过它时，我必须让一个`p`元素在单击按钮时消失。`div`如果`p`元素已经不可见并且`div`已经在它上面，那么在单击按钮时`p`应该变回可见但在 1 秒后`div`滑出它。

第一部分工作正常，在第二种情况下，setTimeout 函数不能工作在 的可见性属性上使用`p`。

这是代码：

```
function slide_wiki(){
    var wiki=document.getElementById('wiki_bar');
    var p_vita=document.getElementById('vita');
    var width=wiki.style.width;
    slide(wiki, 100);
    if(width!='0%'){
        setTimeout(function(){p_vita.style.visibility='visible'}, 1000);
        wiki.style.borderRight='1px solid #E0E0E0';
    }else{
        p_vita.style.visibility='hidden';
        setTimeout(function(){
            wiki.style.borderRight='0px solid white';
        }, 900);
    }
} 
```

我按照建议创建了一个 jsFiddle，但由于某种原因，幻灯片功能根本不起作用，仍然需要 css 和 javascript，所以无论如何它应该有所帮助。 [http://jsfiddle.net/bigcola317/GRs3V/5/](http://jsfiddle.net/bigcola317/GRs3V/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:44:18.357

由于我看不到您的代码，因此无法跟踪错误。因此，我使用简单的 css 转换制作了一个可行的解决方案。看看它是否适合你：http: [//jsfiddle.net/joplomacedo/V3yat/](http://jsfiddle.net/joplomacedo/V3yat/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:39:02.847

解决了。问题是，如果“p”不可见，我单击按钮后，slide() 将在“div”上执行 slide_close() 函数，为“p”上的样式属性设置新值。我猜问题可能是样式属性可能会覆盖在可见性属性上所做的设置，所以我尝试在 slide_close() 函数中更改 setAttribute() 方法：

```
p_vita.style.width="...";
p_vita.style.marginLeft="..."; 
```

这使它工作。这不是很清楚，但无论如何谢谢:)

# node.js - Nodejs 内存泄漏问题（无法用 v8profiler 调试）

> ID：11349589
> 
> 赞同：4
> 
> 时间：2012-07-05T17:37:28.240
> 
> 标签：node.js, memory-leaks

我在当前正在生产的 nodeJS 应用程序中遇到了一些内存问题（S3 分段上传服务器的代理），所以我正在尝试寻找一种方法来检测和防止它。我遇到了这个教程但是当我打开配置文件选项卡未显示的调试页面（在我按照教程中的步骤操作之后）。难道我做错了什么？（我正在关注本教程[https://github.com/felixge/node-memory-leak-tutorial](https://github.com/felixge/node-memory-leak-tutorial)）

如果有帮助，这是我可能导致泄漏的代码的一部分：

```
IngestionClient.prototype.multipartUpload = function(params, req, res, aReqLength) {
var self = this;
var client = this.client[params.profile];
var dest = params.file;

logger.debug('PART ' + params.query.partNumber + '/' + params.query.totalSize +': BEGIN : '+req.headers['content-length']+' bytes : ['
        + params.file_id + ']');

var amazonRequest = client.request('PUT', '/' + dest
        + '?partNumber=' + params.query.partNumber + '&uploadId='
        + params.query.uploadId, {
    'Content-Length' : req.headers['content-length']
});

var partLength = 0;

req.on('data', function(data) {
    partLength += data.length;
    amazonRequest.write(data, 'binary');
});

req.on('end', function() {
    if(partLength == req.headers['content-length']) {
        logger.debug('PART ' + params.query.partNumber + '/' + params.query.totalSize +': CLIENT_RECEIVED_COMPLETE : ['
                + params.file_id + ']');
    }else {
        logger.error('PART ' + params.query.partNumber + '/' + params.query.totalSize +': CLIENT_RECEIVED_INCOMPLETE : Esperado '+req.headers['content-length']
        +' bytes / Recebido ' + partLength + ' : [' + params.file_id + ']');
        amazonRequest.abort();
        self.sendError(params, res);
    }

});

amazonRequest.on('response', function(amazonResponse) {
    var responseText;

        if (amazonResponse.statusCode == 200 && amazonResponse.headers.etag.length > 0) {
            self.queryDB(
                    'INSERT INTO SAMBAFILES_UPLOAD_CONTROL_PARTS SET FILE_ID="'
                            + params.file_id + '", ETAG=' + amazonResponse.headers.etag
                            + ', PART_NUMBER="' + params.query.partNumber + '"',
                    function(err, results) {
                        logger.debug('PART ' + params.query.partNumber + '/' + params.query.totalSize +': S3_PUT_COMPLETE : ['
                                + params.file_id + ']');            
                        responseText = '{"success": true}';
                        res.end(responseText);
                        self.checkComplete(params, dest);
                    });
        } else {
            var responseBody = "";
            amazonResponse.on('data', function(dataRes) {
                responseBody += dataRes;
            });

            amazonResponse.on("end", function(){
                if(responseBody.indexOf("<Code>RequestTimeout</Code>") > 0) {
                    //Erro de lentidao do envio ( + de 20 segundos ). Browser fará um retry
                    logger.error('PART ' + params.query.partNumber + '/' + params.query.totalSize +': S3_PUT_ERROR_TIMEOUT : Response Code ' 
                            + amazonResponse.statusCode + ' : [' + params.file_id + ']');
                }else {
                    logger.error('PART ' + params.query.partNumber + '/' + params.query.totalSize +': S3_PUT_ERROR : Response Code ' 
                            + amazonResponse.statusCode + ': ' + responseBody + ' : [' + params.file_id + ']');
                }
                amazonRequest.abort();
                self.sendError(params, res);

            });

        }

        console.log(util.inspect(process.memoryUsage()));

}).end();

}; 
```

基本上，在我从浏览器收到的每个部分中，我都会使用收到的参数和请求向亚马逊发出请求。节点版本为 0.6.7

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T11:06:11.810

Mozilla 团队发布`node-memwatch`了一个用于跟踪内存泄漏的 nodejs 模块。

官方 mozilla 帖子：[https ://hacks.mozilla.org/2012/11/tracking-down-memory-leaks-in-node-js-a-node-js-holiday-season/](https://hacks.mozilla.org/2012/11/tracking-down-memory-leaks-in-node-js-a-node-js-holiday-season/)

项目的 Github：[https ://github.com/lloyd/node-memwatch](https://github.com/lloyd/node-memwatch)

它看起来非常有趣且非常有前途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:15:05.067

我建议使用该工具[http://search.npmjs.org/#/nodeheap](http://search.npmjs.org/#/nodeheap)。您可以随时拍摄快照并比较堆上的内容，并使用该工具来追踪所有者是谁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:21:09.997

以下插件已更新以适用于新版本的 v8。它是除了 nodetime.com 之外唯一仍在工作的网站。它使用实际的 webkit 调试器：

[https://github.com/c4milo/node-webkit-agent](https://github.com/c4milo/node-webkit-agent)

它也有非常明确的指示。

# android - 从小部件启动时，活动未显示在最近的应用程序列表中

> ID：11349590
> 
> 赞同：7
> 
> 时间：2012-07-05T17:37:30.533
> 
> 标签：android

我创建了一个应用程序小部件，单击该小部件时会在我的应用程序中启动一个活动。

它启动的活动**不是**主要的启动器活动（在应用程序清单中设置）。

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

我正在启动的活动有 launchMode="singleTop" （可能相关）

如果我从应用程序启动器启动应用程序，然后按主页，然后按最近的应用程序按钮，应用程序就在那里。然后我从最近的活动列表中删除该应用程序或强制关闭它。

如果我然后单击我的小部件，则活动启动正常。然后我按主页，然后该应用程序不会出现在最近的应用程序列表中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T09:43:23.370

我的活动是用`android:excludeFromRecents="true"`清单中的标志定义的。傻我，早该发现的。删除该标志可以解决问题。

# .net - selectedindexchanged 事件未在单选按钮列表中触发

> ID：11349591
> 
> 赞同：0
> 
> 时间：2012-07-05T17:37:34.897
> 
> 标签：.net, radiobuttonlist

我在单选按钮列表上应用 onselectedindexchangedevent 但是当我单击单选按钮时，单选按钮没有选择移动，它选择，然后取消选择。我还设置了 postback=true。但它没有触发..

```
**.aspx** 

  <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false">
                <Columns>
                <asp:TemplateField>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
                    <asp:RadioButtonList ID="RadioButtonList1" runat="server"   
AutoPostBack="true"RepeatDirection="Horizontal"OnSelectedIndexChanged="clicked"> 

                <asp:ListItem Value="agree" Selected="True" ></asp:ListItem>
                   <asp:ListItem Value="agree"></asp:ListItem>
                    </asp:RadioButtonList>

                </ItemTemplate>

                </asp:TemplateField>

                </Columns>
                </asp:GridView>

**.aspx.cs**

 public void clicked(object sender, EventArgs arg)
    {

        test t = new test();
        questiondal d = new questiondal();

        GridViewRow row= (( RadioButtonList  )sender).NamingContainer as GridViewRow;
  RadioButtonList list= (RadioButtonList )row.FindControl("Radio");
list.SelectedIndexChanged();
 Label4.Text= list.SelectedValue;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:13:04.190

将服务器端代码更改为如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        GridView1.DataSource = new List<string> {"test"};
        GridView1.DataBind();
    }      
}
public void clicked(object sender, EventArgs arg)
{
    RadioButtonList list = (RadioButtonList)sender;     
    var t = list.SelectedValue;
    Label1.Text = t;
} 
```

并为不同的列表项设置不同的值，如下所示：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>                    
                <asp:RadioButtonList ID="RadioButtonList1" runat="server" RepeatDirection="Horizontal"
                    OnSelectedIndexChanged="clicked" AutoPostBack="true" >
                    <asp:ListItem Value="agree1" Text="a"></asp:ListItem>
                    <asp:ListItem Value="agree2" Text="b"></asp:ListItem>
                    <asp:ListItem Value="agree3" Text="c"></asp:ListItem>
                </asp:RadioButtonList>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView>
<asp:Label ID="Label1" runat="server" Text="Label"></asp:Label> 
```

因此，如果用户单击第一项，Label4.Text 将为“agree1”，如果用户单击第二项，则为“agree2”

# ios - 如何在 Trigger.io 上禁用“ipad 兼容性”？

> ID：11349593
> 
> 赞同：3
> 
> 时间：2012-07-05T17:38:00.080
> 
> 标签：ios, trigger.io

我需要我的应用程序只能在 iphone 上运行，而不能在 iPad 上运行！这个怎么设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T09:35:05.790

我们在平台的 v1.4.16 中包含了对此的支持：http: [//docs.trigger.io/en/v1.4/release-notes.html#v1-4-16](http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-16)。

有关文档，请参阅[http://current-docs.trigger.io/modules/requirements.html#modules-requirements](http://current-docs.trigger.io/modules/requirements.html#modules-requirements)。

# ruby-on-rails-3 - 我如何执行 Process#waitall 的 Delayed::Job 等效项？

> ID：11349595
> 
> 赞同：0
> 
> 时间：2012-07-05T17:38:01.620
> 
> 标签：ruby-on-rails-3, delayed-job

我有一个大任务，分几个主要步骤进行：步骤 A 必须在步骤 B 开始之前完成，等等。但是每个主要步骤都可以划分为多个进程，在我的例子中，使用`Delayed::Job`.

问题：是否有一种简单的技术可以在所有流程都完成步骤 A 之后才开始步骤 B？

注意 1：我不知道*有*多少外部工作人员已经启动，因此保持已完成工作人员的引用计数无济于事。

注意 2：我不希望创建一个工作人员，其唯一工作是忙于等待其他工作完成。Heroku 工人要花钱！

注意 3：我考虑让每个工作人员检查`after`回调中的 Delayed::Job 队列，以确定它是否是在步骤 A 上工作的最后一个，在这种情况下，它可以启动步骤 B。这可能有效，但似乎可能充满陷阱。（在没有更好的答案的情况下，这是我要采用的方法。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:55:25.063

我认为这实际上取决于您正在执行的操作的具体情况，但您可以设置优先级，以便步骤 A 中的任何作业首先运行。根据具体情况，这可能就足够了。从[github 页面](https://github.com/collectiveidea/delayed_job)：

> 默认情况下，所有作业的调度优先级 = 0，这是最高优先级。您可以通过将 Delayed::Worker.default_priority 设置为其他值来更改此设置。较低的数字具有较高的优先级。

因此，如果您将步骤 A 设置为以优先级 = 0 运行，而将步骤 B 设置为以优先级 = 100 运行，则在步骤 A 完成之前，步骤 B 中的任何内容都不会运行。

在某些情况下，这会产生问题——特别是，如果您有很多工作并且正在运行大量工人，那么您可能会有一些工人在步骤 A 的工作完成之前运行步骤 B。理想情况下，在此设置中，步骤 B 有某种检查来检查它是否可以运行。

# asp.net - URL 重写 IIS 7.5 - aspx asp.net 的 403 禁止错误

> ID：11349602
> 
> 赞同：0
> 
> 时间：2012-07-05T17:38:43.013
> 
> 标签：asp.net, url-rewriting, iis-7.5, http-status-code-403

好的。我正在建立一个网站并为一个组织托管它。

我有一个 asp.net 页面 (....com/sermons.aspx)，我想删除 .aspx 文件扩展名，以便网址为 (....com/sermons)。

对于所有其他页面（html/php），我使用 URL 重写规则来删除扩展名，但是每当我尝试为 asp-net 页面执行此操作时，我都会不断收到 403:Forbidden 错误。

我已确保 sermons.aspx 具有完整的读/写控制等。

有人可以指出我正确的方向吗？

我不是专家，但我愿意学习，并且感谢您为我提供的任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:57:24.937

原来我在服务器上有一个同名的文件夹。所以我重命名了页面名称，这似乎解决了问题：）感谢@chris Gessler：D

# string - 在cgi下使用bash删除字符串中的第一个字母

> ID：11349603
> 
> 赞同：3
> 
> 时间：2012-07-05T17:38:47.330
> 
> 标签：string, bash, cgi

我正在尝试将网址指向在 cgi 下运行的 bash 脚本。我搜索了一下，找到了这个[链接](http://www.team2053.org/docs/bashcgi/gettingstarted.html)。据我了解，这一行应该将变量与其值分开：

```
USERNAME=`echo "$QUERY_STRING" | sed -n 's/^.*username=\([^&]*\).*$/\1/p' | sed "s/%20/ /g" 
```

因此，阅读 sed 后，我得出结论，这条线应该足以满足我的需求：

```
url='echo "$QUERY_STRING" | sed "s/url=\(.*\)/\1/"' 
```

输入在哪里

> url=www.web.address.com

但是，变量 get 是字符串：

> 回声“$QUERY_STRING”| sed "s/url=(.*)/\1/" 如果我​​试图删除撇号，我会得到一个空变量。注意，如果我只是简单地`echo`命令我想要的效果。

如何分隔 url 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:41:49.690

您可以使用参数扩展，并且不需要`sed`.

```
echo "${QUERY_STRING##*=}" 
```

要将变量设置为该值：

```
url=${QUERY_STRING##*=} 
```

# snapshot - 如何从快照中播种 EBS 支持的 EC2 实例的根设备？

> ID：11349605
> 
> 赞同：0
> 
> 时间：2012-07-05T17:38:51.327
> 
> 标签：snapshot, amazon-ebs

据我了解，对于 EBS 支持的 EC2 实例，它的根设备将是 EBS 卷。现在，如果我想让 EBS 卷的内容成为我之前拍摄的快照（对于另一个 EBS 支持的 EC2 实例的根设备），我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:43:08.590

简短的版本是您在 AWS 管理控制台中找到快照，单击启动按钮，然后按照向导中的步骤操作（例如选择可用区）。

这里有一个详细的演练：

[http://www.techrepublic.com/blog/datacenter/how-to-create-a-new-ami-from-a-snapshot-and-launch-a-new-vm/5349](http://www.techrepublic.com/blog/datacenter/how-to-create-a-new-ami-from-a-snapshot-and-launch-a-new-vm/5349)

这也可以通过许多其他方式完成，包括

*   从命令行/脚本
*   通过 API 以编程方式
*   自动，例如使用[Auto Scaling](http://aws.amazon.com/autoscaling/)

# c# - 合并两个数据表

> ID：11349607
> 
> 赞同：2
> 
> 时间：2012-07-05T17:38:58.163
> 
> 标签：c#, ado.net, datatable

我有两个数据表。每个都有三列，其中两个具有相同的名称。但是 table1 中的一列是“Desc”，在 table2 中被命名为“Descr”。如何将它们合并在一起？

谢谢。

> 编辑

这两个数据表来自两个datagridview。

```
 DataRow dr = dg1.Newrow()
                        foreach (DataRow row in dt2.Rows)
                        {
                            dr[0] = row[0];
                            dr[1] = row[1];
                            dr[2] = row[2];
                            dg1.Rows.Add(dr);
                        } 
```

dg1 是一个数据网格视图。dt2 只是一个数据表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T17:48:41.970

使用`Merge`方法

您可以在此处找到一些示例代码以及文档。

[http://msdn.microsoft.com/en-us/library/system.data.datatable.merge.aspx](http://msdn.microsoft.com/en-us/library/system.data.datatable.merge.aspx)

注意：您可能必须在合并表之前重命名 Desc 列：

```
dt.Columns[2].ColumnName = "Descr"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T17:53:04.520

请使用合并方法[http://msdn.microsoft.com/en-us/library/fk68ew7b.aspx](http://msdn.microsoft.com/en-us/library/fk68ew7b.aspx)

```
e.g. 
mergeTable = dataTable1.Copy();
mergeTable.Merge(dataTable2); 
```

# ckeditor - 无法让自制的 CKEditor 文件上传器在 web2py 中工作

> ID：11349612
> 
> 赞同：0
> 
> 时间：2012-07-05T17:39:10.390
> 
> 标签：ckeditor, web2py

我的自定义 CKEditor 上传器发生了一些神秘的事情。我尝试上传到服务器的图像或任何文件已正确上传，但无论我做什么，它的链接都不会显示在编辑器中。看起来我的 upload_file.html 视图中对 CKEditor 的回调无法正常工作。CKEditor 的文档对这些东西真的很少，所以我真的可以在这里使用一些指导。

在我的控制器中，我有以下上传功能：

```
def upload_file():
    upload = request.vars.upload
    if upload != None:
        if hasattr(upload, 'file'):
            old_filename = upload.filename
            new_filename = db.files.uploaded_data.store(upload.file, upload.filename)
            result = db.files.insert(filename = old_filename,
                                     uploaded_data = new_filename,
                                     created_on = datetime.today())
            if not result:
                message = T('An error has occured during upload.')
                url = ''
            else:
                message = T('File uploaded succesfully.')
                url = URL(r = request, f = 'download', args = new_filename)
            return dict(form = None, cknum = request.vars.CKEditorFuncNum, url = url, message = message)
        else:
            raise HTTP(401, T('Upload is not proper type.'))
    else:
        form = SQLFORM(db.files, fields = ['uploaded_data'])
        upload = request.vars.uploaded_data
        if upload != None:
            form.vars.filename = upload.filename
            form.vars.created_on = datetime.today()
        if form.process().accepted:
            response.flash = T('File uploaded successfully!')
        elif form.errors:
            response.flash = T('form has errors')
        else:
            response.flash = T('please fill out the form')
        return dict(form = clean_form(form)) 
```

此函数的视图如下所示：

```
{{if form != None:}}
    {{extend 'layout.html'}}
    {{=form}}
{{else:}}
    <html>
        <body>
            <script type="text/javascript">
                window.opener.CKEDITOR.tools.callFunction({{=cknum}}, '{{=url}}', '{{=message}}');
            </script>
        </body>
    </html>
{{pass}} 
```

我有一个包含多个文本区域的表单的测试视图，所有这些文本区域都正确转换为编辑器：

```
{{extend 'layout.html'}}
<script type="text/javascript">
    CKEDITOR.config.filebrowserBrowseUrl = "{{=URL(request.application, c='default', f='upload_file')}}";
    CKEDITOR.config.filebrowserUploadUrl = "{{=URL(request.application, c='default', f='upload_file')}}";
    CKEDITOR.config.filebrowserWindowHeight = '60%';
    CKEDITOR.config.filebrowserWindowWidth = '70%';
</script>
{{=form}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T19:39:17.833

我终于找到了解决方案。upload_file 函数的视图有错误。

```
window.opener.CKEDITOR.tools.callFunction({{=cknum}}, '{{=url}}', '{{=message}}'); 
```

应该改写成这样：

```
window.parent.CKEDITOR.tools.callFunction({{=cknum}}, '{{=url}}', '{{=message}}'); 
```

我从 web2pyslices 复制了第一个版本，这让我很头疼，所以我在这里写下这个答案，希望它能帮助其他尝试将 CKEditor 与 Web2py 集成的人。

# javascript - HTML5 Canvas 在外部 JavaScript 文件中不起作用

> ID：11349613
> 
> 赞同：10
> 
> 时间：2012-07-05T17:39:14.883
> 
> 标签：javascript, html, directory

我已经用 JavaScript 编写了这段代码，当我将它包含在我的 index.html 页面中时，它工作得非常好：

```
<canvas id="bannerCanvas" width="960" height="200">
    Your browser does not support the canvas element.
</canvas>

<script type="text/javascript">

   var canvas = document.getElementById("bannerCanvas");
   var context = canvas.getContext("2d");
     context.beginPath();
     context.moveTo(25,25);
     context.lineTo(355,55);
     context.lineTo(355,125);
     context.lineTo(25,125);
     context.moveTo(465,25);
     context.fill();
};  
</script> 
```

...但是，当我将它放在外部 JavaScript 文件中时，它就不起作用了！在索引页的开头，我声明了这一点：

```
 <script type="text/javascript" src="JavaScript/functionality.js">
 </script> 
```

我将此功能性.js 文件保存在 JavaScript 目录中，我尝试在此文件中执行其他 JS 函数来检查索引页面并且 JS 已连接并且它们是......答案可能正盯着我看，但是由于某种原因，我看不到它！

非常感谢任何帮助，谢谢。

编辑：我一直在使用 Firebug，它没有给我任何错误，当我使用索引页面上的代码时，我看到了我想要的形状，但在使用外部 JS 文件时，我只看到了一个黑色的大矩形。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-05T17:47:30.950

这样做的原因是在呈现画布元素之前正在运行脚本。

要修复它，请将其添加到您的外部文件中。

```
document.addEventListener('DOMContentLoaded',domloaded,false);
function domloaded(){
    // your code here.
} 
```

或使用 jquery

```
$(function(){
    // your code here.    
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T17:43:08.007

内`functionality.js`，尝试将您的代码包装在

```
window.onload = function() {
// code here
} 
```

这样它直到页面加载后才会执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T17:41:26.253

如果它在头部，您将在呈现画布元素之前加载它。查看 JavaScript 控制台，您将看到 Null 或未定义的错误。

在与内联代码一起使用的相同位置添加脚本标记。JavaScript 不必存在于头脑中，一些开发人员会建议它应该始终是主体中的最后一件事。

其他解决方案是在文档就绪或窗口加载时运行脚本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T17:42:11.230

不要放在头部，当你将代码放在头部时，它会在页面中还没有画布元素时运行代码。

# java - 尝试调整图像大小后出现黑屏

> ID：11349617
> 
> 赞同：0
> 
> 时间：2012-07-05T17:39:30.217
> 
> 标签：java, bufferedimage

我目前正在尝试调整我从网上下载的图片并将其放入 JPanel 中。首先，我使用以下代码从网上下载图像：

```
public static Image MSImageHigh(){
    URL imageUrl = null;
    try {
        imageUrl = new URL("http://www.hmdb.ca/labm/metabolites/" 
        + HMDB + "/ms/spectraH/" + HMDB + "H.png");
    } catch (MalformedURLException e) {
        e.printStackTrace();
    }

    Image image = Toolkit.getDefaultToolkit().createImage(imageUrl);
    return image;
} 
```

然后我做了一个调整图像大小的新方法：

```
public static BufferedImage resizeImage() {
    final BufferedImage bufferedImage = new BufferedImage(300, 500,BufferedImage.TYPE_INT_RGB);
    final Graphics2D graphics2D = bufferedImage.createGraphics();

    graphics2D.setComposite(AlphaComposite.Src);
    graphics2D.drawImage(MSImageHigh(), 0, 0, 200, 200, null);
    graphics2D.dispose();

    return bufferedImage;
} 
```

这应该会生成一个调整为 200x200 像素的新图像。它实际上所做的是给我一个 200x200 像素大小的黑屏。顺便说一句，我也尝试使用 TYPE_INT_ARGB 而不是 TYPE_INT_RGB，这会产生一个完全透明的图像，所以这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:15:49.003

我使用`ImageIO.read(imageUrl)`而不是`Toolkit.getDefaultToolkit().createImage(imageUrl)`解决了这个问题。谢谢@Hovercraft 满满的鳗鱼！

# android - 从 Java 1.6 更新到 1.7 时出现错误

> ID：11349618
> 
> 赞同：0
> 
> 时间：2012-07-05T17:39:31.847
> 
> 标签：android

我的项目运行良好，但是当我从 Java 1.6 更新到 1.7 时，其中两个项目最终出现错误无法运行 com.android.ide.eclipse.adt.internal.build.AidlProcessor。检查工作区日志以获取详细信息。并且不确定如何解决这些问题，是否有人已经发现了这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:48:50.370

请记住，Android 不支持 Java 7。因此，您应该将 java 1.6 与 1.7 一起安装（如果您真的需要将 1.7 用于非 Android 的其他东西）并将您的 eclipse 指向您的 java 1.6

# android - 在 Android SDK 管理器中找不到支持包

> ID：11349630
> 
> 赞同：1
> 
> 时间：2012-07-05T17:40:29.967
> 
> 标签：android, sdk, package

我想安装支持兼容性包，但我的 SDK 管理器没有看到它。我应该解决什么问题？

这是我的屏幕：http: [//imageshack.us/photo/my-images/20/clipboard01sj.jpg/](http://imageshack.us/photo/my-images/20/clipboard01sj.jpg)

但它应该是这样的：http: [//imageshack.us/photo/my-images/209/clipboard02wm.jpg/](http://imageshack.us/photo/my-images/209/clipboard02wm.jpg/)

ADT 版本 - 19。操作系统 - Windows。我认为eclipse没有问题，因为当我在没有eclipse的情况下启动SDK Manager时，通过程序文件我有同样的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:07:47.663

我通过更新到 ADT 版本 20 来解决问题。和 Android 平台工具版本 14。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:50:20.923

您需要提供比这更多的信息.​​..您正在使用什么操作系统、什么版本的 Eclipse、哪个 ADT 修订版等。

老实说，我只想尝试全新安装...尝试修复 Eclipse 是浪费时间（至少根据我的经验）。在您的情况下，您似乎最好从头开始。

# cakephp - CakePHP 2.x：如何从另一个模型中的值订购模型？

> ID：11349631
> 
> 赞同：1
> 
> 时间：2012-07-05T17:40:31.870
> 
> 标签：cakephp, model, pagination, associations

这是场景：我有一个`Posts`模型，每个帖子都有一个`Meta`附加的`$hasMany`. Meta 模型包含查看计数器、下载计数器等。

这样做是为了避免每次用户访问帖子时更新帖子，并且因为我将有另一个索引，其中最近修改的帖子将驻留，所以每次访问时更改帖子违背了“最近修改的帖子”的目的" index 所以`views`and`downloads`被保存在 Meta.

**如何使用 Meta 模型中的数据（如下载）订购带有分页的帖子索引视图，以便帖子按下载排序？**

我希望这足够清楚，如果您需要更多数据，请在下面发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:29:46.193

首先，你需要声明分页设置，像这样

```
 $this -> paginate = array(
            'limit' => 3, // your desired limitation
            'contain' => array('Meta'),
            'fields' => array(
                'Post.title',
                'Post.date_published',
                ...,
                'Meta.downloads',
                'Meta.views'
            ),
            'order' => 'Meta.downloads {ASC|DESC}'
        ); 
```

然后你可以这样分页：

```
$this -> set('posts', $this -> paginate('Post')); 
```

假设您的模型称为 Post 和 Meta。

**编辑** 为了使其工作（分页数组中的包含键），您需要将 Containable 行为添加到 Meta 模型：

```
public $actsAs = array('Containable'); 
```

# django - 试图让 MySQL-python 使用 apache/FastCGI 为 django 工作，没有 root 访问权限

> ID：11349634
> 
> 赞同：0
> 
> 时间：2012-07-05T17:40:45.197
> 
> 标签：django, apache, virtualenv, fastcgi

我的总体目标是让 django 在我没有 root 访问权限的服务器上运行。我已经说服管理员在主 apache 服务器上安装 mod_fcgid，但这基本上是我从 root 端可以做的所有事情。

经过一番努力，我目前的设置是创建一个 virtualenv，在 virtualenv 中安装 django、flup 和 MySQLdb-python，并在 .htaccess 文件使用 fastcgid 的 web 可访问目录中创建一个“mysite.fcgi”脚本。 fcgi 文件。这一切都有效，当我使用浏览器加载 mysite.fcgi 时，我的 django 项目成功到达 - 我知道这一点是因为我得到一个 django 错误页面（而不是我得到的无数“脚本头过早结束”500 页在试图找出所有路径时）。

所以，我得到的 django 错误页面说：

```
ImproperlyConfigured at /
Error loading MySQLdb module: libmysqlclient.so.18: cannot open shared object file: No such file or directory 
```

但是，我知道基本上一切正常，因为只要在运行之前将此行添加到我的 bash shell 中，我就可以执行“python manage.py runserver”：

```
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/opt/alternate_versions/mysql-5.5.11/lib 
```

因此，我尝试将其添加到我的 .htaccess 文件中：

```
SetEnv LD_LIBRARY_PATH /opt/alternate_versions/mysql-5.5.11/lib 
```

但是，这不会影响我的 django 错误消息（除了在 django 调试屏幕底部显示正确设置的环境变量）。我不知道为什么这不起作用。

这让我回到了 MySQLdb-python 包。我通过下载源代码并从我的 virtualenv 中运行“python setup.py build”和“python setup.py install”来构建它。但是，**这可能是关键问题**：*我需要使用不是系统默认的 mysql 安装！* 默认安装没有源代码，也没有 mysql_config 命令。备用安装较新，并且具有 mysql-python 所需的源/开发版本。因此，在 MySQLdb-python 的 site.cfg 文件中，我必须指定 mysql_config 变量以指向备用 mysql 安装：

```
mysql_config = /opt/alternate_versions/mysql-5.5.11-src/scripts/mysql_config 
```

当我使用 --libs 选项运行 mysql_config 时，它（正确地？）指向 libmysqlclient.so.18 文件所在的目录：

```
-L/var/alternate_versions/mysql-5.5.11/lib -lmysqlclient -lpthread -lz -lm -lrt -ldl 
```

前进的思路：

是否有另一种构建 MySQLdb 库的方法？我尝试了 site.cfg 文件中的各种选项（静态=True，嵌入式=True），但这也不起作用。我没有尝试这些选项的所有组合，因为我真的不知道他们在做什么。

我可以手动添加 MySQLdb 库的路径吗？我认为它在一个鸡蛋文件中，我不知道如何修改。

如果 MySQLdb 以 root 身份安装，那会有所不同吗？在要求管理员尝试之前，我希望对此选项充满信心。我们仍然有需要备用 mysql 安装的问题。

有没有不同的方法来为 apache 指定 LD_LIBRARY_PATH？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:13:31.010

好的，我通过作弊解决了我的问题。我为我的 Suse 版本下载了一个 rpm，使用以下命令取出文件：

```
rpm2cpio python-mysql-1.2.2-1.79.x86_64.rpm | cpio -idmv 
```

然后，我将所有文件复制到我的 virtualenv 目录：

```
cp -pir ./usr/lib64/python2.6/site-packages/* ../virt/lib/python2.6/site-packages/ 
```

而且，它奏效了！

# r - 使用 ggplot 对同一图中的两个直方图进行排序

> ID：11349638
> 
> 赞同：5
> 
> 时间：2012-07-05T17:41:22.683
> 
> 标签：r, sorting, ggplot2

我有一个我无法找到解决方案的问题。我有一个带有不同形容词和分词的数据框，这些形容词和分词有两种不同的模式。

```
head(THAT_EXT_COMBINED)
          ID  PATTERN         NODE
1  HRE_721_03 THAT_EXT     accepted
2 G08_1321_01 THAT_EXT acknowledged
3   AAW_47_03 THAT_EXT acknowledged
4 G20_1490_01 THAT_EXT     alarming
5  FY8_732_02 THAT_EXT      amazing
6  HEM_128_03 THAT_EXT      amazing

str(THAT_EXT_COMBINED)
'data.frame':   1450 obs. of  3 variables:
$ ID     : Factor w/ 1450 levels "A05_253_01","A05_277_07",..: 1109 827 265 853 812 1046 369 810 214 41 ...
$ PATTERN: Factor w/ 2 levels "THAT_EXT","THAT_POST": 1 1 1 1 1 1 1 1 1 1 ...
$ NODE   : Factor w/ 201 levels "accepted","acknowledged",..: 1 2 2 6 8 8 8 10 12 15 ... 
```

我想在同一个图中使用两个直方图以降低频率的方式绘制这两种模式的形容词。问题是两者之间有一些重叠（即在两种模式中都发现了一些形容词），但我只希望每个直方图都以最常见的形容词开头。

这是我在生成单个直方图时用于排序的代码：

```
THAT_EXT_COMBINED <- within(THAT_EXT_COMBINED,
                            NODE <- factor(NODE,
                                           levels=names(sort(table(NODE),
                                                             decreasing=TRUE)))) 
```

我理解为什么这不起作用，因为它结合了两种模式的频率，但我仍然不知道如何解决它。我一直在尝试 reorder() 没有任何运气。有任何想法吗？

这是我用于情节的代码：

```
graph<-ggplot(THAT_EXT_COMBINED, aes(x=NODE, fill=PATTERN)) + 
geom_histogram(binwidth=.5,  position="dodge")
graph + opts(axis.text.x = theme_blank()) + #removes text labels on x-axis
scale_y_continuous("Frequency") + 
scale_x_discrete("Adjectives",breaks=NULL)+ 
opts(title = expression("Distribution of Adjectives")) 
```

结果图的问题在于，形容词没有严格按照它们在两种模式中的频率排序。有人能帮忙吗？

* * *

所以，这是我用上面的代码创建的图表。相反，我想要的是每个模式的形容词都按降序绘制，即两个直方图都按频率降序绘制。我想这归结为一个排序问题，我试图以不同的方式对因素进行排序，但我无法首先通过 PATTERN 以及在此范围内通过节点的频率来排序：

![](../Images/5c569d11fc7348a3212a8e33b0866506.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:08:39.427

```
library(reshape)
df <- cast(THAT_EXT_COMBINED, PATTERN ~.) 
colnames(df)[2] <- "Counts"

ggplot(df, aes(reorder(PATTERN, Counts), Counts, fill=PATTERN))
    + geom_bar(position="dodge") # + ... 
```

# javascript - Javascript对象检查

> ID：11349641
> 
> 赞同：0
> 
> 时间：2012-07-05T17:41:31.993
> 
> 标签：javascript

我从 AJAX 返回了这个对象：

```
补种：[，…]
0: {id:1, t:13447, userid:1, time:2012-07-04 19:07:54, username:x, userlevel:8,donor:no,}
1: {id:2, t:13447, userid:2, time:2012-07-04 09:04:27, username:y, userlevel:0,donor:no,}
2: {id:3, t:13447, userid:3, time:2012-07-04 09:04:30, username:z, userlevel:0,donor:no,}
3: {id:4, t:13447, userid:4, time:2012-07-04 09:04:35, username:w, userlevel:0,donor:no,}

```

我需要检查这个对象是否在“userid”中包含一些值。
**IE：**
我的值 = 2，那么如何检查 userid 中的对象数组之一是否 == 2？如果任何用户 ID == 2，我需要返回 TRUE，如果没有，我需要返回 FALSE。如果 value = 5，我需要返回 FALSE，因为对象中没有一个 userid 包含 userid = 5。是否有一些功能或者我需要自己编写循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:53:04.130

您可以使用一个[**Array.some函数：**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/some)

```
//generic parameter for 'Array.some' function
function useridValidator( userid ){
    return function(item){
        return item.userid === userid;
    };
}
console.log( ajaxData.reseeds.some( useridValidator(1) ) );   //true
console.log( ajaxData.reseeds.some( useridValidator(5) ) );   //false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:45:15.490

我这样做：

```
var user_data = _return[idx+'s'];
for(var i=0;i<user_data.length;i++)
{
  if(user_data[i]['userid'] == _returnX['datas']['userid'])
  {
    var add = false;
  }
}

if(add === undefined)
{
  user_data[user_data.length] = _returnX['datas'];
  // do some stuff
} 
```

# sharepoint-2010 - 如何在 ssrs 中显示替换输出“True”和“False”的附件链接？从共享点列表

> ID：11349647
> 
> 赞同：2
> 
> 时间：2012-07-05T17:42:19.493
> 
> 标签：sharepoint-2010, reporting-services, ssrs-2008, attachment

我目前在有附件的地方得到真/假输出，但我想知道如何将这些真或假输出转换为用户可以单击它并将它们发送到该文档的链接。我正在使用共享点数据库来获取我的值。请告知我如何做到这一点。

谢谢

幸运的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T21:33:40.017

在单元格或文本框属性中，您可以使用“操作”功能。选择转到 URL 并单击公式按钮。

对于公式，测试字段是真还是假，使用或不使用你想去的url。

```
=IIF(Fields!ShowURL.Value="True", "http://www.google.com", "") 
```

这假定 'True' 'False' 是与不带引号的布尔值相对的字符串。如果 'showURL 字段的条件满足，IIF 语句将使用 URL，如果不满足，则没有值。

# javascript - 访问 JavaScript 数组对象

> ID：11349662
> 
> 赞同：-3
> 
> 时间：2012-07-05T17:43:11.250
> 
> 标签：javascript, arrays, object

如果我控制台日志`test`

我明白了

```
[
    {
            property_1: "a",
            property_2: "b",
    }
] 
```

如何控制台记录 的值`property_1`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:45:18.933

```
console.log(test[0].property_1); 
```

`test`是一个数组，他的第一个元素是一个带有键的映射`property_1`，并且`property_2`.

`test[0]`访问数组的第一个元素，这是一个映射。从那里您可以使用点符号或字符串下标直接访问属性：

```
console.log(test[0]["property_1"]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T17:45:10.740

```
console.log(test[0]["property_1"]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T17:45:56.550

首先进入数组：

```
my_arr[0] 
```

然后获取属性：

```
my_arr[0]['property_1'] 
```

最终结果：

```
var my_arr = [
    {
            property_1: "a",
            property_2: "b",
    }
]

alert(my_arr[0]['property_1']); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T17:51:46.560

如果这就是你得到的结果`console.log`，那么我敢打赌你有一个需要解析的*JSON 字符串。*

如果是这样，请这样做...

```
var parsed = JSON.parse(test);

alert(parsed[0].property_1); 
```

# php - 通过 post 将结构化数据传递给 php

> ID：11349664
> 
> 赞同：4
> 
> 时间：2012-07-05T17:43:12.647
> 
> 标签：php, javascript, post

假设我有以下数据：

```
var arr = [], arr1 = [], arr2 = [], arr3 = [], arr4 = [];
var a = 'something', b = 'else';
arr1['key1-1'] = 'value1-2';
arr1['key1-2'] = 'value1-2';
for (var i = 0; i < someCond; i++) {
    arr = [];
    arr['key2-1'] = 'value2-1';
    arr['key2-2'] = 'value2-2';
    arr2.push(arr);
} 
```

现在我需要将它的漏洞传递给 php 脚本。

我将它打包成一个变量，如下所示：

```
var postVar = {
    a: a,
    b: b,
    arr1: arr1,
    arr2: arr2
}; 
```

我正在使用 jQuery，所以我尝试像这样发布它：
**1）**

```
//Works fine for a and b, not for the arrays
$.post('ajax.php', postVar, function(response){}); 
```

这：
**2）**

```
var postVar = JSON.stringify(postVar);
$.post('ajax.php', {json: postVar}, function(response){}); 
```

与 php 文件

```
$req = json_decode(stripslashes($_POST['json']), true); 
```

这也行不通。

我应该如何构造/格式化我的数据以将其发送到 PHP？

谢谢

**编辑：**
案例 1：console.log(postVar); ![控制台日志（postVar）](../Images/e92aaf359a62ceddc332b24f9bca25f6.png)

PHP print_r($_POST) 响应：数组 ( [a] => something [b] => else )

如您所见，php 端没有数组（对象）。

**案例2：**
当我添加以下内容时：

```
    postVar = JSON.stringify(postVar);
    控制台.log(postVar);

```

我 用 console.log(postVar)得到
{"a":"something","b":"else","arr1":[],"arr2":[[],[],[]]}

所以这似乎是这种情况下的问题......对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:59:06.387

你应该在添加这样的stripslashes之前检查magic_quotes

```
if( get_magic_quotes_gpc() ) {
    $jsonString = stripslashes( $jsonString );
}
$data = json_decode( $jsonString ); 
```

我建议您应该关闭魔术引号...这根本不是魔术

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:22:05.860

事实证明，虽然数组*是*对象，但 JSON.stringify 忽略了数组上的非数组属性。所以我必须将所有变量显式声明为对象。除了真正用作数组的 arr2 之外。

这是完整的代码：

```
var arr = {}, arr1 = {}, arr2 = [];
var a = 'something', b = 'else';
arr1['key1-1'] = 'value1-2';
arr1['key1-2'] = 'value1-2';
for (var i = 0; i < 3; i++) {
    arr = {};
    arr['key2-1'] = 'value2-1';
    arr['key2-2'] = 'value2-2';
    arr2.push(arr);
}

var postVar = {
    a: a,
    b: b,
    arr1: arr1,
    arr2: arr2
};

postVar = JSON.stringify(postVar);
$.post('ajax.php', {json: postVar}, function(response){}); 
```

在 PHP 方面：

```
$req = json_decode($_POST['json'], true);
print_r($req); 
```

希望这可以帮助其他有同样问题的人。

# javascript - Javascript中的简单createElement问题

> ID：11349667
> 
> 赞同：0
> 
> 时间：2012-07-05T17:43:23.510
> 
> 标签：javascript

我认为以下脚本将创建 div 元素，但我的 html 中没有任何输出。谁能帮帮我？非常感谢。

```
var div=document.createElement('div');
div.setAttribute('id','testttttttt');

div.innerHTML='fjsoidfjiosdjfoi';​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T17:45:37.687

您的 HTML 中没有任何内容，因为您的 HTML 位于服务器上。

您在 DOM 中一无所获，因为您尚未将元素添加到 DOM。

```
document.body.appendChild(div); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T17:45:16.020

最后你必须使用该`appendChild`方法：

```
var div=document.createElement('div');
div.setAttribute('id','testttttttt');
div.innerHTML='fjsoidfjiosdjfoi';​
document.body.appendChild(div); 
```

否则，创建的元素将存在，但不会出现在您的页面中。

另外，你必须确保它`document.body`存在，否则，它会抛出一个错误（如果这个脚本要在加载时执行，把它放在一个`onload`事件中）。

PS：您还可以附加到任何其他 DOM 元素：

```
document.getElementById('myDivHolder').appendChild(div); 
```

JSFiddle 示例：http: [//jsfiddle.net/AkXTr/](http://jsfiddle.net/AkXTr/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T17:45:17.103

除了创建元素之外，您还必须将其插入到 DOM 中。您可以使用该`appendChild()`方法将其添加到给定父元素的末尾：

```
var div=document.createElement('div');
div.setAttribute('id','testttttttt');

div.innerHTML='fjsoidfjiosdjfoi';

// Now, append it
document.getElementById('someOtherElement').appendChild(div); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T17:45:29.890

您实际上需要将其附加到某些东西上；我猜`document.body`会的。

```
var div = document.createElement('div');
div.id = 'testttttttt';
div.innerHTML = 'fjsoidfjiosdjfoi';​

**document.body.appendChild(div);**
```

但是，请确保在`document.body`实际存在时执行此操作，即在`load`事件中或`body`元素本身内部。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T17:50:24.817

您正确创建了 div，只是它挂在任何地方。它需要插入到文档中，例如

```
 var div=document.createElement('div');
        div.setAttribute('id','testttttttt');
        div.innerHTML='fjsoidfjiosdjfoi';
        document.getElementsByTagName("body")[0].appendChild(div); 
```

# iphone - 城市飞艇推送通知不适用于生产证书

> ID：11349677
> 
> 赞同：1
> 
> 时间：2012-07-05T17:44:02.043
> 
> 标签：iphone, push-notification, apple-push-notifications, urbanairship.com

我正在开发一个带有推送通知的 iOS 应用程序。我能够使用开发人员 APN 证书成功测试推送通知，但它不适用于生产 APN 证书。

我已确保在为 APP ID 启用推送通知后生成 iOS 开发人员门户（即席/分发）中的配置文件，并注意在 AppDelegate.m 中使用正确的 UA_KEY 和 UA_SECRET。

任何人都可以提供有关推送通知使用生产证书失败但使用开发证书正常工作的可能原因的见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:02:39.760

很可能你现在已经想通了。**无论如何，我认为不包括你的生产** `UA_Key`和`UA_Secret`你的`UAConfig`文件引起的问题。最好跟进他们在[资源页面](http://urbanairship.com/resources/)中提供的示例，因为他们的示例不会出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T04:41:37.947

我终于似乎已经解决了这个问题并在这里发帖，希望它可能会有所帮助。

帮助我识别问题的关键点是在 UA 控制台中打开“调试”以查看详细错误。（这实际上是他们的支持团队提供的建议）

# javascript - onload 在 Chrome 上不起作用

> ID：11349678
> 
> 赞同：-2
> 
> 时间：2012-07-05T17:44:02.613
> 
> 标签：javascript

我正在尝试在页面完成加载时运行 Javascript 函数。我尝试了以下方法：

```
<body  onload="alert('s')"> 
```

此代码适用于 Firefox，但由于某种原因不适用于 chrome。我在这里缺少什么吗？

我在页面中没有任何内容。我刚刚创建了一个新的 webform ASPX 页面并将上面的代码放入其中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:49:07.180

我使用 Chrome 弹出窗口拦截器插件，这就是为什么我可以看到警告框的原因，它被插件过剩了。

# jquery - 使用jquery相同域从内部页面请求源代码

> ID：11349679
> 
> 赞同：0
> 
> 时间：2012-07-05T17:44:13.343
> 
> 标签：jquery

我正在尝试获取内部域页面的来源，可以将其基本上克隆到 js 文件中。

我不确定这是否可能，但我已尝试开始代码的外观。

我意识到 var 源可能是我出错的地方，因为它无法正常工作。

希望有人可以尝试调试我的代码。

谢谢！

```
 $(document).ready(function() {
      // make request to site
    var request = "http://mysite.com/page.html";
      // get the dom from the html layer
    var source = $(request+'html').html();
      // output to the dom the source of the request
    $('html').append(source);
    }); 
```

这样的事情会更有意义吗？

```
$(document).ready(function() {
var create = $('html').load('http://mysite.com/page.html');
document.write(create);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:46:34.623

为什么不做一个简单的 jQuery .load 调用呢？

[http://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:35:28.537

您应该以这种方式加载 URL：-

```
$("#result").load("/SivaCharan/CmJuk/ #sidebar");​ 
```

这里：

*   `#result`- 它是以 id 作为结果的 div。
*   `#sidebar`- 侧边栏是 div id。这将加载到结果 div。

在您的情况下，您传递的完整网址将不起作用。

你应该这样写：-

```
$('MENTIONYOURRESULTID').load('/page.html MENTIONYOURDIVID'); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/CmJuk/1/)**

# c# - 使用 MVC3 向数据库添加内容

> ID：11349683
> 
> 赞同：0
> 
> 时间：2012-07-05T17:44:22.870
> 
> 标签：c#, asp.net, asp.net-mvc-3

我已经有一些存储过程可以将信息添加到数据库中。现在我正在创建一个网页，允许用户查看数据库中的某些项目。当用户查看页面时，他或她可以选择编辑/更新或添加新商家。我在控制器中遇到困难，我的方法没有接受我给它的参数。如果您有任何线索或知道答案，请分享..谢谢

PS 当我将鼠标悬停在添加功能上时，它显示 bool MerchantTypeRef.addMerchantTypeRef(MerchantAdminProductionServices.MerchantTypeRef MerchantTypeRef)

错误：“MerchantAdministrator.Models.MerchantAdminProduction.MerchatTypeRef.addMerchantTypeRef(MerchantAdministrator.MerchantAdminProductionServices.MerchantTypeRef)”的最佳重载方法匹配有一些无效参数

**控制器**

```
 [MerchantAuthorizeAttribute(AdminRoles = "AddMerchantTypeRef")]
    public ActionResult AddMerchantTypeRef()
    {
        try
        {
            Guid merchantTypeRefId = Request["merchantTypeRefId"] != null ? new Guid(Request["merchantTypeRefId"]) : Guid.Empty;
               string name = Request["name"]?? string.Empty;
            string description = Request["description"]?? string.Empty;
            string xMerchantType = Request["xMerchantTypeRefCode"]??string.Empty;
            DarkstarAdministrator.DarkstarAdminProductionServices.MerchantTypeRef merchantTypeRef = new DarkstarAdministrator.DarkstarAdminProductionServices.MerchantTypeRef();

            merchantTypeRef.name = name;
            merchantTypeRef.description = description;
            merchantTypeRef.xMerchantTypeCode = xMerchantType;
           ViewBag.addMerchantTypeRef = MerchantAdministrator.Models.MerchantAdminProduction.MerchantTypeRef.addMerchantTypeRef(merchantTypeRef);  <------This where I have the Trouble . not reading parameter
        }
        catch (Exception e)
        {
            Commons.ErrorHandling.ReportError("MerchantAdministrator.Controllers.ProdController AddMerchantTypeRef()", e);
        }
        return View();

    } 
```

**模型**

```
 public static bool addMerchantTypeRef(DarkstarAdminProductionServices.MerchantTypeRef merchantTypeRef)
    {
        try
        {
            DarkstarAdminProductionServices.DarkstarAdminProductionServicesSoapClient client = new DarkstarAdminProductionServices.DarkstarAdminProductionServicesSoapClient();
            return client.addMerchantTypeRef(merchantTypeRef);
        }
        catch (Exception e)
        {
            Commons.ErrorHandling.ReportError("MerchantTypeRef.addMerchantTypeRef()", e);

        }
        return false;
    } 
```

**参考**

```
 [System.Runtime.Serialization.DataMemberAttribute(IsRequired=true)]
    public System.Guid merchantTypeRefId {
        get {
            return this.merchantTypeRefIdField;
        }
        set {
            if ((this.merchantTypeRefIdField.Equals(value) != true)) {
                this.merchantTypeRefIdField = value;
                this.RaisePropertyChanged("merchantTypeRefId");
            }
        }
    }

    [System.Runtime.Serialization.DataMemberAttribute(EmitDefaultValue=false)]
    public string name {
        get {
            return this.nameField;
        }
        set {
            if ((object.ReferenceEquals(this.nameField, value) != true)) {
                this.nameField = value;
                this.RaisePropertyChanged("name");
            }
        }
    }

    [System.Runtime.Serialization.DataMemberAttribute(EmitDefaultValue=false, Order=2)]
    public string description {
        get {
            return this.descriptionField;
        }
        set {
            if ((object.ReferenceEquals(this.descriptionField, value) != true)) {
                this.descriptionField = value;
                this.RaisePropertyChanged("description");
            }
        }
    }

    [System.Runtime.Serialization.DataMemberAttribute(EmitDefaultValue=false, Order=3)]
    public string xMerchantTypeCode
    {
        get {
            return this.xMerchantTypeCodeField;
        }
        set {
            if ((object.ReferenceEquals(this.xMerchantTypeCodeField, value) != true)) {
                this.xMerchantTypeCodeField = value;
                this.RaisePropertyChanged("xMerchantTypeCode");
            }
        }
    } 
```

**看法**

```
<script type="text/javascript">
$(document).ready(function () {
    $("#merchantTypeUpdateButton").click(function () {
        $("#updateMerchantType").submit();
    });
}); 
```

## 修改商家类型

```
<%MerchantAdministrator.MerchantAdminProductionServices.MerchantTypeRef     EditMerchantType = ViewBag.MerchantTypeRefEdit !=null ? ViewBag.MerchantTypeRefEdit: new    MerchantAdministrator.DarkstarAdminProductionServices.MerchantTypeRef(); %>
<form id="updateMerchantType" action="<%=Url.Action("EditMerchantTypePost","Prod") %>?    merchantTypeRefId"=<%=EditMerchantType.merchantTypeRefId %>" method="post">
    <table>
        <tr>
            <td colspan="3" class="tableHeader">Merchant Type Ref Details</td>
        </tr>
        <tr>
            <td colspan="2" class="label">Name:</td>
            <td class="content">
                <input type="text" maxlength="100" name="Name" value="  <%=EditMerchantType.name %>" />
        </td>
    </tr>
     <tr>
        <td colspan="2" class="label">Description:</td>
        <td class="content">
            <input type="text" maxlength="2000" name="Description" value="<%=EditMerchantType.description %>" />
        </td>
    </tr>
     <tr>
        <td colspan="2" class="label">Merchant Type Code:</td>
        <td class="content">
            <input type="text" maxlength="5" name="XMerchantTypeCode" value="<%=EditMerchantType.xMerchantTypeCode %>" />
        </td>
    </tr>
    <tr>
        <td colspan="3" class="tableFooter">
                <br />
                <a id="merchantTypeUpdateButton" href="#" class="regularButton">Save</a>
                <a href="javascript:history.back()" class="regularButton">Cancel</a>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:49:34.620

```
bool ViewBag.addMerchantTypeRef = MerchantAdministrator.Models.MerchantAdminProduction.MerchantTypeRef.addMerchantTypeRef(merchantTypeRef); 
```

你能告诉我这是“merchantTypeRef”还是“merchantTypeRefId”？因为 MercerTypeRefId 是第一行读取的内容，并且在调用 Model 时需要传递相同的值。如果这不起作用，您可以尝试使用“FormCollection”吗？

# bayesian-networks - 是否有关于创建贝叶斯网络的分步教程？

> ID：11349684
> 
> 赞同：1
> 
> 时间：2012-07-05T17:44:30.370
> 
> 标签：bayesian-networks

我正在寻找有关创建贝叶斯网络的教程。我有理论信息和背景，但我想在一些现实生活中的例子中看到它。

你能给我推荐一些这样的教程吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:54:45.247

斯坦福大学教授 Daphne Koller 有一门名为“概率图形模型”的在线课程：

[https://www.coursera.org/course/pgm](https://www.coursera.org/course/pgm)

点击“预览”观看过去的讲座。

斯坦福课程页面在这里，附有教科书链接：

[http://pgm.stanford.edu](http://pgm.stanford.edu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T11:10:37.307

[您可以查看有关如何创建 @ http://unbbayes.sourceforge.net/video_tutorial.html](http://unbbayes.sourceforge.net/video_tutorial.html)的分步示例。这是解释如何使用 UnBBayes 的视频教程链接，UnBBayes 是一种用于建模概率图形模型的开源工具，与贝叶斯网络最相关。

上面链接中的视频之一是 youtube 视频 @ [https://www.youtube.com/watch?feature=player_embedded&v=ExlfjBQfvMk](https://www.youtube.com/watch?feature=player_embedded&v=ExlfjBQfvMk)，它解释了如何使用 UnBBayes 逐步创建 BN。

干杯，隆美尔

# java - 复选框不返回参数中的值

> ID：11349685
> 
> 赞同：0
> 
> 时间：2012-07-05T17:44:39.400
> 
> 标签：java, javascript, jsp, jstl

我有一个问题，当我从添加或编辑实体返回时，如果未选中该复选框，则 param.book_hardcoverFlag 设置不正确（该参数不再有条目）。

```
...
<td class="field">
  <input type="checkbox" class="checkbox" 
  name="book_hardcoverFlag" id="book_hardcoverFlag" 
  value="Y" ${params.book_hardcoverFlag eq 'Y' ? 'checked' : ''}/>
</td>
... 
```

当表单被填充时，它会正确显示，但如果您取消选中该框或从未选中该框，则在尝试保存时永远不会设置 params.book_hardcoverFlag。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:53:13.630

我认为你应该这样说

```
<td class="field">
  <input type="checkbox" class="checkbox" 
  name="book_hardcoverFlag" id="book_hardcoverFlag" 
  value="Y" checked="${params.book_hardcoverFlag eq 'Y' ? 'checked' : ''}" />
</td> 
```

请注意，它将`checked="checked"`在标签内输出。

希望能解决您的问题！

# iis-7 - IIS 7重写到不同的应用程序池

> ID：11349687
> 
> 赞同：5
> 
> 时间：2012-07-05T17:44:48.003
> 
> 标签：iis-7, rewrite, application-pool

关于这个主题有很多主题说您不能将传入请求重写到 IIS 7 中的不同应用程序池（其中一篇文章是[https://serverfault.com/questions/220007/iis-7-5-multiple-应用程序池和 url-rewriting-403-18-forbidden](https://serverfault.com/questions/220007/iis-7-5-multiple-application-pools-and-url-rewriting-403-18-forbidden)）。重定向将起作用，但该项目的要求是我们不能允许用户查看或搜索引擎来索引重定向的 Url。

所以问题是：本地服务器上是否有任何其他机制允许您在 IIS 有机会开始处理请求之前拦截请求？有点像过去的旧 ISAPI 过滤器。许多文章建议使用某种形式的 Http 代理或软件负载均衡器；这两个选项都有效，但可能会导致物理和虚拟资源的一些开销。回顾一下，主要目标是我们试图让来自 www.domain.com/(.*) 的请求被重写为 www.domain.com/{currentversion}/{R:1} 根 Web站点和版本化的 Web 应用程序是相互隔离的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:44:30.010

我可能误会你了；但你想要一个*反向代理*？一种重写 URL 以避免搜索的方法；客户端正在生成页面资源，就好像它来自服务器一样。可以从`IIS Rewrite Module`.

尽管如此，您也许可以只创建两个完全独立的站点示例：

*   `http://www.foo.com`
*   `http://www.foo.com/en`
*   `https://www.foo.com/en`<-- 输入就像您正在转换到`https`.

这样一来，`<sites>`它们都指向一个单独的目录，然后它们都被作为单独的实体处理，因此您可以*在该页面上创建被阻止的响应，以便在搜索引擎中找不到它*。

如果我的回答是关闭的；让我知道，我会删除它。但我认为这应该可行；理论上无论如何。[Squid 和 Varnish 也是用于创建反向代理的应用程序](http://en.wikipedia.org/wiki/Reverse_proxy)。

# svn - SVN - 备份颠覆？

> ID：11349695
> 
> 赞同：0
> 
> 时间：2012-07-05T17:45:21.493
> 
> 标签：svn

我有一个由离岸开发团队开发的网站。我自己不是技术人员，所以我有点担心开发人员可能没有给我完整的代码。也许某些部分仍然取决于他们的服务器。两个问题：

1.  有没有办法让我放心，我拥有独立于他们运行网站的一切？

2.  我有几个称为条目的文件，它们有一个目录，后跟两个指向它们自己的服务器的 url，它们以 svn.theirdomainname.com/ 开头。这应该引起关注，还是仅在开发模式下使用并且现在在我自己的服务器上？

提前感谢您花时间阅读我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:47:47.120

1：首先，如果你有一份源代码的副本，你没有[从他们的 SVN 服务器上签出](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.checkout.html)，而是由开发团队提供给你的，你不能确定它都在那里。如果开发还没有完全完成，你实际上不能确定它也都在存储库中。从业务角度来看，您是如何陷入这种情况的，这是另一个问题。

1.  我不太明白这个问题，但是是的，这些文件可能是开发遗留下来的东西，这并不意味着它们在某种程度上有害，但也不意味着它们不是！我们实际上无法从您提供的信息中知道这一点。

如果您仍然可以访问您的存储库，您可以通过执行以下操作来检查[HEAD 修订](http://svnbook.red-bean.com/en/1.6/svn.tour.revs.specifiers.html#svn.tour.revs.keywords)：

```
svn co URL trunk/ --usernameYOURUSERNAM --passwordYOURPASSWORD 
```

**URL**是 url :D，例如[http://svn.theirdomainname.com/](http://svn.theirdomainname.com/)，如果他们使用的是 HTTP 协议，或者 svn://svn.theirdomainname.com/ ，如果他们使用的是 SVN。还有其他访问方法。实际上，对您来说更好的选择是进行[svn 导出](http://svnbook.red-bean.com/en/1.6/svn.ref.svn.c.export.html)，因为它将导出一个干净的目录树，其中[svn checkout](http://svnbook.red-bean.com/en/1.6/svn.ref.svn.c.checkout.html)也将获取 SVN 元数据。

通过检查 HEAD 修订版，您至少可以确保您在存储库中拥有最新的（干净的**？）版本。

最后，您的另一个选择是从生产服务器获取代码（如果有）。如果按照规范，完整的功能在那里工作，那么代码也必须完全在那里。

** 您可以认为它“干净”，但它也可能存在问题 - 开发团队拥有这些知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:37:03.997

即使没有您的开发团队，您也可以确保您拥有一切可以运行服务器的唯一方法是从您的服务器**获取您网站的实时版本**。

不能保证这些家伙确实使用了该版本`trunk`来放置在服务器上。他们也可以使用任何其他分支，甚至可以在实时版本中添加一些根本不包含在任何分支中的东西。

如果要备份包括所有分支和标签的整个 SVN 存储库，可以使用[`git svn`](http://linux.die.net/man/1/git-svn). 这会将 SVN 存储库的完整历史记录（所有提交、所有分支、所有标签）转换为您可以在本地保存的 Git 存储库。

但同样：您需要的不是开发历史，而是您网站上实际运行的版本。获取该版本并仔细观看。

# global-asax - global.asax 如何在服务器群中发挥作用？

> ID：11349702
> 
> 赞同：2
> 
> 时间：2012-07-05T17:45:44.587
> 
> 标签：global-asax, web-farm, server-farm

我对 global.asax 文件如何在服务器场中运行感到困惑。每个服务器是否有自己的实例在运行，或者它是一个共享实例。

例如，在 Application_Start 事件中的 global.asax 中，我初始化了一个单例对象，该对象收集统计信息并更新包含统计信息的数据库表。以下哪种情况会发生？

**情景一**

*   服务器 1 -> (Stat = 10) -> 用 10 更新数据库
*   服务器 2 -> (Stat = 8) -> 用 8 更新数据库
*   服务器 3 -> (Stat = 25) -> 用 25 更新数据库
*   服务器 4 -> (Stat = 5) -> 用 5 更新数据库

这是第一个示例，每个服务器都将使用自己的集合更新数据库

**方案二**

*   服务器 1 -> (Stat = 10) -> 用 10 更新数据库
*   服务器 2 -> (Stat = 10) -> 用 10 更新数据库
*   服务器 3 -> (Stat = 10) -> 用 10 更新数据库
*   服务器 4 -> (Stat = 10) -> 用 10 更新数据库

在上面的示例中，服务器可以访问相同的集合。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:51:05.300

服务器彼此不知道，因此 global.asax 文件为每个进程和服务器单独运行。即使您将 IIS 设置为允许同一站点和同一台计算机上的多个工作进程也是如此。每个工作进程都有自己的 global.asax `Application_Start()`。

因此，为了直接回答您的问题，方案一将更密切地模拟网络场中实际发生的情况。

如果您希望在所有服务器之间共享“单例”，则必须实现所有服务器都可以共享的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-08T16:47:41.080

另一种选择是使用[ScaleOut State Server (SOSS)](http://www.scaleoutsoftware.com/support/stateServer/soss_help/content/index.html#_introduction)，我已经看到它在高可用性环境中使用。

> [This] 在 Web 或应用服务器场内的每台服务器上运行，以存储关键任务、工作负载数据。ScaleOut StateServer 的内存数据网格具有集成的内存分布式缓存，可提供对关键但快速变化的数据的极快访问，并且它的性能和容量会随着您向场中添加服务器而增长。该软件自动在服务器之间复制存储的数据，以便在服务器出现故障时不会丢失关键数据，并且它保持独立数据库服务器（甚至故障转移数据库集群）无法复制的可扩展、高可用性访问。您还可以使用 Windows 版本的 ScaleOut StateServer 透明地保存和检索 ASP.NET 会话状态。

# java - 在 Android 中，如何将 Facebook 和 Twitter 帖子日期转换为相同的格式？

> ID：11349707
> 
> 赞同：0
> 
> 时间：2012-07-05T17:46:08.953
> 
> 标签：java, android

我有两个约会，一个来自 facebook，第二个来自 twitter，我怎样才能将它们转换成相同的格式。以下是我得到的日期

Facebook 日期 = 2012-07-05T13:17:13+0000 Twitter 日期 = 2012 年 7 月 5 日星期四 22:15:04 GMT+05:30

我们如何将两者转换为：2012 年 7 月 5 日 11:54:30 请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:06:00.737

[SimpleDateFormat API](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)在这里应该有很大帮助。

您需要创建其中两个，每个日期格式一个。然后您可以使用该`parse()`方法将它们转换为`Date`对象。

最后，您可以根据需要使用该`format()`方法将它们转换回字符串。

此外，这是使用 Java 时间，它不如 JODA 时间可取，但它可能对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-09T11:56:09.037

这些功能用于将 facebook 和 twitter 日期转换为您喜欢的格式。

**转换 Facebook 日期的功能：**

```
String old_date="2012-07-05T13:17:13+0000";

private String Convert_Facebook_Date(String old_date) {

        SimpleDateFormat sdf = new SimpleDateFormat("dd-MMM-yyyy hh:mm:ss");
        SimpleDateFormat old = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ");
        sdf.setTimeZone(TimeZone.getDefault());

            Date date = null;
            try {

                date = old.parse(old_date); 

            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();    
            }

        return sdf.format(date);        
} 
```

**转换 Twitter 日期的函数：**

```
String old_date="Thu Jul 05 22:15:04 GMT+05:30 2012";

private String Convert_Twitter_Date(String old_date) {

        SimpleDateFormat sdf = new SimpleDateFormat("dd-MMM-yyyy hh:mm:ss");
        SimpleDateFormat old = new SimpleDateFormat("EEE MMM dd HH:mm:ss ZZZZZ yyyy",Locale.ENGLISH);
        old.setLenient(true);

            Date date = null;
            try {

                date = old.parse(old_date);

            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        return sdf.format(date);    
} 
```

> 两种输出格式如：05-Jul-2012 11:54:30

# c# - 有条件地获取父对象，然后获取子对象

> ID：11349708
> 
> 赞同：4
> 
> 时间：2012-07-05T17:46:17.097
> 
> 标签：c#, linq, c#-4.0, linq-to-objects

我有一个具有以下基本结构的对象列表：

```
class Person
{
    public int ID {get; set;}
    public bool ShowChildren {get; set;}
    public int ParentID {get; set;}

    // ...many other properties...
} 
```

我需要返回按 ID 排序的 Person 父类列表。如果启用了 ShowChildren 标志，则还返回其父级下的子级，按其 ID 排序。

这只是一个层次，即孩子不会有孩子。

我可以写一个 linq 语句来给我所有的父母，但是当父母的标志被启用时，我被困在如何包括排序的孩子。

```
var People = PersonList
             .Where(x => x.ParentID == 0)
             .Orderby(x => x.ID)
             .ToList(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T17:54:19.883

抱歉，如果您只想返回父母，除非明确要求（谢谢，@Rawling！），`foreach`循环也很好。

```
var people = new List<Person>();

PersonList.Sort((a, b) => a.ID - b.ID);

foreach(Person p in PersonList) {
    if(p.ParentID == 0) { // Or whatever value you use to represent it
        people.Add(p);

        if(p.ShowChildren) {
            people.AddRange(PersonList.Where(c => c.ParentID == p.ID));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:12:02.560

您可以在以下*两个*语句中执行此操作：

```
// Build a lookup: parent ID => whether to show children.
var showChildrenDictionary = PersonList
    .Where(p => p.ParentID = 0)
    .ToDictionary(p => p.ID, p => p.ShowChildren);

// Get the desired list
var orderdedWithAppropriateChildren = PersonList
    // Discard children where not shown
    .Where(p => p.ParentID == 0 || showChildrenDictionary[p.ParentID])
    // Sort so parents and children are together and ordered by the parent
    .OrderBy(p => ((p.ParentID == 0) ? p.ID : p.ParentID))
    // Sort so parent is at start of group
    .ThenBy(p => p.ParentID != 0)
    // Sort so children are in order
    .ThenBy(p => p.ID)
    .ToList(); 
```

# jquery - 刮板 Google App Engine for Steam

> ID：11349709
> 
> 赞同：0
> 
> 时间：2012-07-05T17:46:17.607
> 
> 标签：jquery, python, html, google-app-engine, steam-web-api

所以基本上，目前，我们正在尝试编写一个基本的 HTML 5 页面，当您按下按钮时，它会返回用户在 Steam 上是在游戏中、离线还是在线。我们查看了 Steam API，要查找此信息，它需要此人的 64 位 ID (steamID64)，而我们在网站上仅获得用户名。为了找到他们的 64 位 id，我们尝试从网站 ( `steamidconverter.com`) 中抓取，以从用户名中获取用户的 64 位 id。我们尝试通过 javascript 执行此操作，但当然我们遇到了跨域块，不允许我们从我们的 google App Engine 网站访问该数据。

我有 Python 方面的经验，所以我试图弄清楚如何`steamidconverter.com/(personsusername)`使用 Python 从该网站（以 . 多亏了 Stack Overflow 上的另一篇文章，这在抓取方面取得了成功。

但是，我不知道如何将这些数据返回到 javascript 并让它完成剩下的工作。我很难过，真的需要帮助。这一切都在谷歌 App Engine 上。目前，它只是一个运行简单 javascript 的按钮，该 javascript 尝试使用 JQuery 来获取页面内容，但失败了。我不知道如何将两者结合起来！

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:10:51.313

由于您从服务中获得了 Steam ID，因此您可以通过该 ID 向他们的 Steam 社区页面发出另一个请求。从那里你可以使用漂亮的汤返回一个 dom 来获取你的项目所需的信息。

现在回答你的问题。如果您使用的是 Tornado 等 Web 框架，您可以在处理程序的请求中完成所有这些操作，并且处理程序可以在页面中返回 json，您可以使用您的 javascript 代码呈现此 json。

查看 Python 的 Web 框架，例如 Tornado 或 Django，以帮助您返回和显示数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:51:55.377

为什么不使用[Steam 作为 OpenID 提供者](http://steamcommunity.com/dev/)？听起来像这样会给你用户的ID：

> Steam 可以充当 OpenID 提供者。这允许您的应用程序验证用户的 SteamID，而无需他们在您的网站上输入他们的 Steam 用户名或密码（这将违反 API 使用条款。）只需为您选择的语言和平台下载 OpenID 库并使用[http://steamcommunity.com/openid](http://steamcommunity.com/openid)作为提供者。**（返回的 Claimed ID 将包含用户的 64 位 SteamID。**

# jquery-plugins - jsTree 删除节点实际上并没有删除它

> ID：11349712
> 
> 赞同：1
> 
> 时间：2012-07-05T17:46:25.823
> 
> 标签：jquery-plugins, jstree

希望你能帮助我解决我遇到的 jsTree 问题......最近才开始使用它，所以仍然找到我的脚。

我在同一页面上使用了两个 jsTrees（左侧的可用对象和右侧的包含对象），中间有几个按钮，可让用户将对象从左侧树移动到右侧树，反之亦然。我没有使用 dnd 插件，也不打算让用户能够在树之间拖放。我的数据结构只有两层深，父母和孩子/多个孩子。

要提到的另一件事是，当我将节点从一棵树移动到另一棵树时，它会从该树中删除并在另一棵树中创建。

那么我遇到的问题是，我可以在左树中选择一个节点（父节点或它的一个子节点），然后我可以在单击按钮后将其移动到右树。如果我选择的节点是父节点，它会移动父节点和所有子节点。如果我选择的节点是唯一的子节点，它会同时移动父节点和子节点。对于这个例子，让我们坚持这个场景。我通过以下方式做到这一点：

```
//Check to see if the parent exists in the right tree, if it doesn't create it
I've left this function call out for now but can post later if required
//Assuming the parent doesn't exist, create the parent in the right tree
$("#treeInc").jstree("create", null, false, { attr: { id: parent.id }, data: $(parent).children("a").text() }, false, true);
//Create the child in the right tree belonging to the parent node
$("#treeInc").jstree("create", $("#" + parent.id), "inside", { attr: { id: child.id }, data: $(child).children("a").text() }, false, true);

//Remove the parent and child from the left tree
$("#treeAvail").jstree("remove", $('#' + child.id));
$("#treeAvail").jstree("remove", $('#' + parent.id)); 
```

现在这一切都很好，但我遇到的问题是，当我尝试将节点移回左树时，父节点似乎总是存在于数据中，即使认为应该被删除。这意味着我实际上并没有调用代码来创建父级，而只是调用了子级，它最终独自徘徊，看不到父级。

所以我的逻辑是首先通过基本上在属于右树的节点中查找父 id 来检查父是否存在。到目前为止，我已经以几种不同的方式完成了此操作，并且每次都失败了。

我已经调用了左树的“get_json”函数来循环遍历节点，但它存在于那里。我循环遍历我最初从中加载左树的数组，但该数组包含初始加载中的所有节点，并且似乎永远不会改变。我尝试使用“delete_node”而不是删除，但这没有区别。

那我做错了什么？如果我从 jsTree 中删除一个节点，就数据而言，我如何检查该树以查看它是否已消失？

请帮忙，它快把我逼疯了！！！

我的实际树数据来自 Web 服务，但对于这个示例，下面的 json 数组就可以了。

```
availDataCache = [
        { attr: { id: "A_R1" }
          , data: "Report 1"
          , state: "open"
          , children: [{ attr: { id: "A_PSA1" }, data: "Param Set A"}]
        }
        , { attr: { id: "A_R2" }
            , data: "Report 2"
            , state: "open"
            , children : [ 
                  { attr: { id: "A_PSA2" }, data: "Param Set A" }
                  ,{ attr: { id: "A_PSB1" }, data: "Param Set B" }
                   ]
          }
        ];

$("#treeAvail").jstree({
    "json_data": {
        "data": availDataCache
    },
    "core": {
        "animation": 0
    },
    "plugins": ["themes", "json_data", "ui", "core", "crrm"]
});

$("#treeInc").jstree({
    "json_data": {
        "data": incDataCache
    },
    "core": {
        "animation": 0
    },
    "plugins": ["themes", "json_data", "ui", "core", "crrm"]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T22:23:24.783

每次复制、移动、删除操作后，尝试为两个 jstree 调用刷新函数。

```
$("#leftjsTree").jstree("refresh" ,"#idOfLeftNode");
$("#rightjsTree").jstree("refresh" ,"#idOfRightNode"); 
```

# html - 无法使用 Django 正确显示模板

> ID：11349717
> 
> 赞同：0
> 
> 时间：2012-07-05T17:46:50.723
> 
> 标签：html, django

我正在尝试使用 Django 编写日历应用程序，但我似乎无法让它显示月份中的日期。对于每月视图，`views.py`我有：

```
from datetime import date, datetime, timedelta
import calendar

@login_required
def month(request, year, month, change=None):
    """Listing of days in `month`."""
    year, month = int(year), int(month)

    # apply next / previous change
    if change in ("next", "prev"):
        now, mdelta = date(year, month, 15), timedelta(days=31)
        if change == "next":   mod = mdelta
        elif change == "prev": mod = -mdelta

        year, month = (now+mod).timetuple()[:2]

    # init variables
    cal = calendar.Calendar()
    month_days = cal.itermonthdays(year, month)
    nyear, nmonth, nday = time.localtime()[:3]
    lst = [[]]
    week = 0

    # make month lists containing list of days for each week
    # each day tuple will contain list of entries and 'current' indicator
    for day in month_days:
        entries = current = False   # are there entries for this day; current day?
        if day:
            entries = Entry.objects.filter(date__year=year, date__month=month, date__day=day)
            if day == nday and year == nyear and month == nmonth:
                current = True

        lst[week].append((day, entries, current))
        if len(lst[week]) == 7:
            lst.append([])
            week += 1

    return render_to_response("cal/month.html", dict(year=year, month=month, user=request.user, month_days=lst, mname=mnames[month-1])) 
```

对于年度模板，我有：

```
{% extends "cal/base.html" %}

{% block content %}
<a href="{% url cal.views.main year|add:'-3' %}">&lt;&lt; Prev</a>
<a href="{% url cal.views.main year|add:'3' %}">Next &gt;&gt;</a>

    {% for year, months in years %}
        <div class="clear"></div>
        <h4>{{ year }}</h4>
        {% for month in months %}
            <div class=
            {% if month.current %}"current"{% endif %}
            {% if not month.current %}"month"{% endif %} >
                {% if month.entry %}<b>{% endif %}
                <a href="{% url cal.views.month year month.n %}">{{ month.name }}</a>
                {% if month.entry %}</b>{% endif %}
            </div>

            {% if month.n == 6 %}<br />{% endif %}
        {% endfor %}
    {% endfor %}
{% endblock %} 
```

显示一年中的月份。但是当我点击月份时，它不会显示日期。

对于每月模板，我有：

```
{% extends "cal/base.html" %}

{% block content %}
<a href= "{% url cal.views.month year month "prev" %}">&lt;&lt; Prev</a>
<a href= "{% url cal.views.month year month "next" %}">Next &gt;&gt;</a>

<h4>{{ mname }} {{ year }}</h4>

<div class="month">
    <table>

    <tr>
        <td class="empty">Mon</td>
        <td class="empty">Tue</td>
        <td class="empty">Wed</td>
        <td class="empty">Thu</td>
        <td class="empty">Fri</td>
        <td class="empty">Sat</td>
        <td class="empty">Sun</td>
    </tr>

    {% for week in month_days %}
        <tr>
        {% for day, entries, current in week %}

            <!-- TD style: empty | day | current; onClick handler and highlight  -->
            <td class= {% if day == 0 %}"empty"{% endif %}
            {% if day != 0 and not current %}"day"{% endif %}
            {% if day != 0 and current %}"current"{% endif %}
            {% if day != 0 %}
                onClick="parent.location='{% url cal.views.day year month day %}'"
                onMouseOver="this.bgColor='#eeeeee';"
                onMouseOut="this.bgColor='white';"
            {% endif %} >

            <!-- Day number and entry snippets -->
            {% if day != 0 %}
                {{ day }}
                {% for entry in entries %}
                    <br />
                    <b>{{ entry.creator }}</b>: {{ entry.short|safe }}
                {% endfor %}
            {% endif %}
            </td>
        {% endfor %}
        </tr>
    {% endfor %}
    </table>

    <div class="clear"></div>
</div>
{% endblock %} 
```

我不认为这是我构建每月视图的方式的问题。相反，我认为我将年度模板链接到月度模板的方式存在问题。我是 Django 和一般编程的新手，所以如果有人能指出我正确的方向，我将不胜感激。

编辑：

这是我的urlconf `app/urls.py`：

```
from django.conf.urls import patterns, include, url
from cal.views import main
from cal.views import month
from cal.views import day

urlpatterns = patterns('',
    (r'^(\d+)/$', main),
    (r'', main),
    (r'^month/(\d+)/(\d+)/(prev|next)/$', month),
    (r'^month/(\d+)/(\d+)/$', month),
    (r'^month$', month),
    (r'^day/(\d+)/(\d+)/(\d+)/$', day),
) 
```

Main 处理年度视图的模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:49:24.230

所以我猜这`main`是产生年/月列表的视图。问题是第二个正则表达式匹配**所有内容**，因为你没有锚定它。你需要这个：

```
(r'^$', main), 
```

这样它只匹配开始和结束之间没有任何内容的字符串 - 即空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:55:08.543

您没有渲染`years`您在模板中使用的对象`{% for year, months in years %}`

# android - 如何对单个广播要求多个权限？

> ID：11349730
> 
> 赞同：11
> 
> 时间：2012-07-05T17:47:51.870
> 
> 标签：android

我正在开发一个允许其他应用程序收集从公司专有设备接收到的数据的 android 服务。可以通过蓝牙或 USB 进行连接。我允许其他应用程序通过服务发出的广播意图访问这些数据。我想强制应用程序在接收到意图之前拥有蓝牙权限以及访问我们数据的另一个权限。[我知道我可以使用sendBroadcast(Intent intent, String receiverPermission)](http://developer.android.com/reference/android/content/Context.html#sendBroadcast%28android.content.Intent,%20java.lang.String%29)强制 BroadcastReceivers 拥有一个接收我的广播意图的权限，但是我如何要求接收者拥有多个权限才能看到我的广播？

提前致谢。

# c# - 如果 textbox1、textbox2、textbox3 中存在值，如何启用 radiobutton1 和 textbox4

> ID：11349731
> 
> 赞同：-1
> 
> 时间：2012-07-05T17:47:59.550
> 
> 标签：c#, javascript, asp.net, asp.net-mvc, asp.net-mvc-2

我在 asp 页面中有一个 formview，其中包含 4 个文本框和一个单选按钮。在单击编辑按钮时，如果文本框 1、文本框 2、文本框 3 中存在值，则应显示单选按钮 1 和文本框 4（即，如果文本框（1、2、3）中的任何一个为空，则不应显示文本框 1 和单选按钮）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:02:46.380

如果您使用的是 jQuery：

```
$("#idOfEditButton").live('click', function(){

    if(!$('#idOfTxt1').val() || !$('#idOfTxt2').val() || !$('#idOfTxt3').val()){
        $('#idOfRadio').hide();
        $('#idOfTxt4').hide();   
    }
    else{
        $('#idOfRadio').show();
        $('#idOfTxt4').show();  
    }
}); 
```

**编辑**

您也可以使用类，然后添加`$('.classNameOfAllTxt')`if 语句（仅一次）。和`$('.classfTxt4AndRadio').show(); // or hide`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:03:49.373

在 formview 编辑事件中，找到控件并检查文本框是否包含类似的文本

文本框 textbox1 = formView.FindControl("TextBox1") as TextBox;

同样找到TextBox2、TextBox3、TextBox4和Radiobutton1

然后比较

```
if(textbox1.Text != string.Empty && textBox2.Text != string.Empty && textBox3.Text != string.Empty)
{
    textbox4.Visible = true;
    Radiobutton1.Visible = true;
}
else
{
    // set visibility to false
} 
```

在下面的事件中这样做

```
 protected void FormView1_ModeChanged(object sender, EventArgs e)
    {

        if (FormView1.CurrentMode == System.Web.UI.WebControls.FormViewMode.Edit)
        {
            **// Find Controls and Check ConditionHere**
        }
    } 
```

试试看。希望能帮助到你。

对于 Javascript 尝试类似：

```
 function Check() {
        var b = document.getElementById("<%= FormView1.FindControl("textBox1").ClientID%>");
        var a = document.getElementById("<%= FormView1.FindControl("textBox2").ClientID%>");

        if(a.innerText === "" && b.innerText == "")
        {
              // find the control like above and set visibility to false
              var textbox4 = ....;
              textbox4.visibility = "block"; // attribute for visibility is not verified by me, check to see the correct one if you have problem hidding or showing.
        }

        return false;

    } 
```

# java - 将对象（字符串、字符串、int、int）添加到 ArrayList

> ID：11349739
> 
> 赞同：0
> 
> 时间：2012-07-05T17:48:44.830
> 
> 标签：java, android, string, arraylist

我上了这两个课。下面的应该得到一个带有电影的 ArrayList ......

```
import java.util.ArrayList ;
import android.app.Activity ;
import android.os.Bundle ;

public class UIDActivity extends Activity {

    private static ArrayList<Movie> movieList;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    }

    public static void main(String String, int 
    int args[]

        ) {     

movieList = new ArrayList<Movie>();
        movie1 = new Movie("Fight Club", "David Fincher", "1999", "3");

        movieList.add(movie1);

    }

    public String getTitle() {
        return title;

    }

    public String getDirector() {
        return director;

    }

    public int getYear() {
        return year;
    }

    public int getRating() {
        return rating;
    }
} 
```

* * *

这是 Movie 类，我在其中讲述了 Movie 的属性

```
import java.io.Serializable ;

@SuppressWarnings("serial")
public class Movie implements Serializable {

    public String title;
    public String director;
    public int year;
    public int rating;

    public Movie(String deTitle, String deDirector, int hetYear, int deRating) {
        title = deTitle;
        director = deDirector;
        year = hetYear;
        rating = deRating;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public void setDirector(String director) {
        this.director = director;

    }

    public void setYear(int year) {
        this.year = year;

    }

    public void setRating(int rating) {
        this.rating = rating;

    }
} 
```

出于某种原因，我无法弄清楚我一直忘记什么简单的事情？！？！Eclipse 想将我的公共电影更改为四倍字符串......那里没有错误，但休息也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:00:02.350

您的 Movie 构造函数需要两个 String 对象和两个 int -

```
public Movie(String deTitle, String deDirector, int hetYear, int deRating) 
```

但是您传递了四个 String 对象-

```
 movie1 = new Movie("Fight Club", "David Fincher", "1999", "3"); 
```

为什么您尝试将四个 String 值传递给 Movie 构造函数，而不是构造函数所期望的两个 String 和两个 int？通过您的构造函数，您应该按以下方式创建电影对象 -

```
 movie1 = new Movie("Fight Club", "David Fincher", 1999, 3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:59:45.150

你只需要在你的 Movie 类中有 setter/getter，另外，确保类变量被声明为私有的，并且只能通过适当的 getter 访问。

公共类电影实现可序列化{

```
private String title;
private String director;
private int year;
private int rating;

public Movie(String deTitle, String deDirector, int hetYear, int deRating) {
    title = deTitle;
    director = deDirector;
    year = hetYear;
    rating = deRating;
}

public void setDirector(String director) {
    this.director = director;
}

public String getDirector() {
    return director;
}

... 
```

}

另外，我将使用 List 接口定义您的列表，并将实例化为 ArrayList。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T17:57:33.123

据我所知，如果您创建一个静态变量，则必须在那时对其进行初始化。

尝试这个：

```
private static ArrayList<Movie> movieList = new ArrayList<Movie>(); 
```

顺便说一句，不应该将 UIDActivity 的 getter 移动到 Movie 类或包含您想要的电影的索引吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T17:59:21.533

问题是您正在尝试使用带有 two`Strings`和 two`ints`的构造函数，而是传递构造函数 4 个字符串。

电影类中构造函数的方法签名是

```
public Movie(String deTitle, String deDirector, int hetYear, int deRating) 
```

您尝试调用构造函数的方式不正确。

这个：

```
movie1 = new Movie("Fight Club", "David Fincher", "1999", "3"); 
```

应该：

```
movie1 = new Movie("Fight Club", "David Fincher", 1999, 3); 
```

# algorithm - 为基于瓦片的 2D 游戏引擎存储地图

> ID：11349740
> 
> 赞同：1
> 
> 时间：2012-07-05T17:48:47.890
> 
> 标签：algorithm, graphics, 2d

我们有一个（可能很大）横向滚动的 2D 世界，其中包含许多重复的图块（例如地形、墙壁、水等）。例如，有很大的“山丘”可能非常高，但使用相同的小块进行渲染一块“岩石”纹理。

我想优化这个世界的存储和渲染（最好画一个大四边形并对其应用相同的重复纹理，而不是单独画很多相邻的小四边形）。

有什么好的方法可以做到这一点？目前我看到了两个潜在的解决方案：

1.  允许地图设计者手动指定“块”（重复图块的大矩形）
2.  允许地图设计者逐个地块设计地图，然后自动计算块（有什么好的算法来做到这一点？）

如果您从事过类似的游戏，很想听听您的特定解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:43:40.840

由于您无论如何都不会绘制矩形（但三角形），我建议选择第二个选项。此外，永远不要相信你的程序的用户。

第一个任务是将地图划分为具有相同纹理的多边形。因为你的地形是基于网格的，这可以通过一种洪水填充结合标记算法很容易地实现，例如这样运行：

```
- n := 0 // will be the polygon numbers
- Iterate over each grid cell
    - If cell is marked, continue with next cell
    - mark cell with n
    - check adjacent cells for the same texture and mark them accordingly * 
    - n := n + 1 
```

* 此步骤可以通过多种方式执行：[FloodFill](http://en.wikipedia.org/wiki/Flood_fill)。此外，您应该为每个块存储一个边缘单元。即具有至少一个具有不同纹理的相邻单元的单元。我们称之为种子细胞。

然后你的网格用多边形编号标记，n 等于多边形计数。

下一步是提取多边形。这就是种子细胞将提供帮助的地方。对于每个块，从种子单元开始，沿着块的边缘运行，收集所有角点。这些角点将构成您的多边形。

之后你有一组多边形。最后一步是对多边形进行三角剖分以进行渲染。这可以通过例如[剪耳算法](http://www.geometrictools.com/Documentation/TriangulationByEarClipping.pdf)或其他算法来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:52:29.983

如果您可以使用像素着色器，另一种方法是提供一个“tile-atlas”纹理，其中包含所有可能的瓦片，这些瓦片混合在一起形成一个光照贴图风格的纹理，并且还提供一个更小的“tilemap”纹理（screenWidth / tileWidth X screenHeight / tileHeight），其中包含一个指向 tilemap 中该位置的“tile type”的单个组件。

然后，您可以绘制一个全屏、屏幕对齐的四边形，像素着色器将使用当前的 tile-type 对“tile-atlas”进行采样，并将这些像素放在屏幕上。当前变化的纹理坐标以及四边形的宽度/高度可用于获取着色器内的当前像素位置。

然后可以根据需要更新“tilemap”纹理以更改当前级别。

# r - R中的“group by”类似命令，min作为聚合函数和多列

> ID：11349741
> 
> 赞同：3
> 
> 时间：2012-07-05T17:48:48.890
> 
> 标签：r, aggregate-functions, aggregate, data.table

我有一个有很多列 c1 c2 c3 c4 ... c30 d 的框架

我想聚合并找到 c1..30 中唯一的所有行，然后获取该行的 min(d) 。在 sql 中，这将是由 c1、...、c30 组成的组。

d 是日期类型。

我在堆栈中找到了一些解决方案，但似乎没有一个适用于 1）这么多列 2）做一个 min 而不是 sum。

任何输入都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:17:04.710

`data.table`这是使用带有一些虚假数据的包的答案：

```
library(data.table)

DT<-data.table(matrix(sample(1:2,3000,replace=TRUE),ncol=30))
DT2<-DT[sample(seq_len(nrow(DT)),9000,replace=TRUE)]
# EDIT: now "d" is a date.
DT2[,d:=as.POSIXct(origin = "1960-01-01",rnorm(nrow(DT2), sd = 1000))]
setnames(DT2,c(paste0("c",1:30),"d"))

## pick up herewith your own data, starting with the commented next line
# DT2 <- as.data.table(dataset)
setkeyv(DT2,paste0("c",1:30))

DT3<-DT2[,list(minD=min(d)),by=key(DT2)]

dim(DT2)
# [1] 9000   31
dim(DT3)
# [1] 100  31 
```

**马修的小补充：**

+10，以及漂亮的假数据。首先设置一个键以便你可以做`by=key(DT)`有时会有点繁重，所以为了简单起见，我通常会做一个临时的这样的事情。但是，首先尝试最自然的事情：

```
DT2[,min(d),by=paste0("c",1:30)]
Error in `[.data.table`(DT2, , min(d), by = paste0("c", 1:30)) : 
    'by' appears to evaluate to column names but isn't c() or key(). Use by=
    list(...) if you can. Otherwise, by=eval(paste0("c", 1:30)) should work.
    This is for efficiency so data.table can detect which columns are needed. 
```

错误消息告诉我们我们需要做什么：

```
ans = DT2[,min(d),by=eval(paste0("c",1:30))]
dim(ans)
[1] 100  31 
```

下一个自然的想法当然是：好吧，如果 data.table 足够聪明地知道`by`是列名并将其放在错误消息中，为什么它不能这样做呢？答案是它只是根据数据进行猜测。在某些边缘情况下，它不是很清楚。所以目前用户需要额外的意图：用`eval`. 不过我对此并不完全满意，所以也许我们可以改进它。

**编辑：重命名新的 data.table**

在我的方法中，我在创建新列`minD`时通过输入

```
DT3<-DT2[,list(minD=min(d)),by=key(DT2)] 
```

使用 Matthew Dowle 的方法，您可以通过输入以几乎相同的方式实现这一点

```
ans = DT2[,list(minD=min(d)),by=eval(paste0("c",1:30))] 
```

如果您已经创建了该列并想要重命名它，请`setnames`按如下方式使用：

```
setnames(DT3,old="minD",new="theNewMinD") 
```

这避免了复制整体`data.table`并保留了内存过度分配（使用时这两个优点都丢失了`names(DT3)<-"something"`），如以下文档中所述`?setnames`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:01:29.540

未经测试，没有最小的可重现示例：

```
apply(unique(dataset), 1, min) 
```

分解它：

```
x <- unique(dataset)  #finds only unique rows
apply(x, 1, min) # applies min across rows
                 # replace the 1 with a 2 and it applies across columns 
```

# php - 使用 PHP 将 JavaScript 添加到文档

> ID：11349744
> 
> 赞同：0
> 
> 时间：2012-07-05T17:49:02.883
> 
> 标签：php, javascript, html, ajax

好的，所以这应该很容易吧？测试.php：

```
function some_javascript() {
        echo "Hello";
        echo "<script type='text/javascript'>alert('Hello')<script>";
} 
```

当您尝试加载您的 test.php 时，您会收到一个警报窗口。

我一定遗漏了一些东西，因为我无法使用模式窗口作为目标并通过 post 发送 AJAX 请求来使其工作。

这是我正在尝试做的基本结构：

索引.html：

```
<html>
<head>
<style>
 #modal {
    visibility:hidden;
 }
</style>
</head>
<body>
    <div id="modal">
    </div>
    <button onclick="call_ajax();">Call Ajax</button>
</body>
</html> 
```

call_ajax() 将模态可见性设置为“可见”，并将其 innerHTML 设置为来自 test.php 的响应文本（我不编写代码，因为我在这里似乎没有问题；文本发送得很好（我得到“你好”）并根据需要处理发送的发布数据）。但是没有警报窗口！相反，我得到“警报（'Hello'）”。

除此之外，代码工作正常，但我无法让 javascript 工作。一定有一些我遗漏的细节。有任何想法吗？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:51:38.427

您不能通过`<script>`添加标签来运行标签`innerHTML`。看到这个问题：[可以用 innerHTML 插入脚本吗？](https://stackoverflow.com/questions/1197575/can-scripts-be-inserted-with-innerhtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:48:59.863

有很多 Javascript 库可以为您做到这一点。

尝试延迟加载： [https ://github.com/rgrove/lazyload](https://github.com/rgrove/lazyload)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T21:24:24.200

首先，脚本代码不能作为 HTML 插入，它会显示为 HTML（确实如此）。

其次，即使您将在文档中插入一个 SCRIPT 元素，初始解析也已经完成，并且不会执行警报。

您可以做的是解析脚本代码并对其进行评估：

```
<!DOCTYPE html>
<html>
<head>
    <style>
        #modal {
            visibility:hidden;
        }
    </style>
    <script type="text/javascript">
        function call_ajax() {
            var ajaxData = "Hello\n<script type='text/javascript'>alert('Hello')<\/script>";
            var scriptStartPos = ajaxData.indexOf("<script type='text/javascript'>");
            if(scriptStartPos >= 0) {
                var scriptPos0=scriptStartPos+31;
                var scriptEndPos= ajaxData.indexOf("<\/script>", scriptPos0);
                if(scriptEndPos >= scriptPos0) {
                    eval(ajaxData.substring(scriptPos0,scriptEndPos));
                }
            }
        }
</script>
</head>
<body>
<div id="modal">
</div>
<button onclick="call_ajax();">Call Ajax</button>
</body>
</html> 
```

请注意，在这种情况下，我使用了未转义的单引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T17:22:28.020

基本上`Ajax Request`不会加载`Javascript`代码。

我正在使用这样的东西来让`Javascript`代码从 ajax 工作`responseText`；

**Javascript：**

```
//pseudo function :
function call_ajax() {
  var ajaxResponse = "some data you have received with ajax"; 

  var div = document.createElement("div");
  div.innerHTML = ajaxResponse;
  var script = div.getElementsByTagName("script");
  for(var i=0; i < script.length; i++) {
    try{eval(script[i].innerHTML)}catch(ex){alert(ex)};
  }
}; 
```

*此代码将创建一个空白`div`元素，其中`innerHTML`将使用 ajax 加载数据。Javascript会将您的简单文本转换为html节点，然后您可以`Javascript`通过查找“脚本”标签来查找响应是否包含代码，然后尝试评估`javascript`代码以执行代码，现在您完成了。*

PS：在我看来，用 ajax 加载 javascript 并不是一个好主意。看看如果你对相同的 javascript 代码执行两个 ajax 请求会怎样：它会加载相同的代码两次，因此代码可能会因此而变得错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T17:51:57.047

```
echo "<script type='text/javascript'>alert('Hello')<script>"; 
```

应该

```
echo "<script type='text/javascript'>alert('Hello')</script>"; 
```

另外，正如我在下面发布的那样，脚本不能以这种方式运行。

# php - 语句正在准备，但未执行

> ID：11349748
> 
> 赞同：6
> 
> 时间：2012-07-05T17:49:14.927
> 
> 标签：php, mysql, symfony, doctrine-orm

我将[FOSFacebookBundle](https://github.com/FriendsOfSymfony/FOSFacebookBundle)和[FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)与 Symfony2 一起使用来管理我的用户。我在本地一切正常。但是，当我将所有内容推送到我的暂存环境时，我注意到用户在注册时并没有持久化（使用原则实体管理器）。

我检查的第一件事是我是否可以使用实体管理器保留其他东西，这很好。接下来我继续检查日志，发现插入语句在那里：

```
INSERT INTO user (username, username_canonical, email, email_canonical, enabled, salt, password, last_login, locked, expired, expires_at, confirmation_token, password_requested_at, roles, credentials_expired, credentials_expire_at, firstname, lastname, facebookID, date_of_birth, locale, gender, has_profile_pic, created_at, updated_at) 
VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
({"1":"1234","2":"1234","3":"foo@gmail.com","4":"foo@gmail.com","5":true,"6":"","7":"","8":null,"9":0,"10":false,"11":null,"12":null,"13":null,"14":["ROLE_FACEBOOK"],"15":0,"16":null,"17":"Mr","18":"Foo","19":"1234","20":{"date":"1986-12-09 00:00:00","timezone_type":3,"timezone":"PRC"},"21":"nl_NL","22":"male","23":1,"24":{"date":"2012-07-06 01:34:47","timezone_type":3,"timezone":"PRC"},"25":{"date":"2012-07-06 01:34:47","timezone_type":3,"timezone":"PRC"}}) 
```

当我用准备好的语句的值替换问号并手动发出查询时，一切正常。

有没有人知道这可能是什么？我也会很高兴得到有关如何进一步调试的提示，因为我不知道下一步该往哪里看..

提前致谢！

**更新：**

我又看了一眼 mysql 日志，我注意到 INSERT 语句正在准备中，但从未执行（与 select 语句不同）。我在错误日志中找不到任何错误。这是mysql日志：

```
34 Prepare SELECT t0.username AS username1, t0.username_canonical AS username_canonical2, t0.email AS email3, t0.email_canonical AS email_canonical4, t0.enabled AS enabled5, t0.salt AS salt6, t0.password AS password7, t0.last_login AS last_login8, t0.locked AS locked9, t0.expired AS expired10, t0.expires_at AS expires_at11, t0.confirmation_token AS confirmation_token12, t0.password_requested_at AS password_requested_at13, t0.roles AS roles14, t0.credentials_expired AS credentials_expired15, t0.credentials_expire_at AS credentials_expire_at16, t0.id AS id17, t0.firstname AS firstname18, t0.lastname AS lastname19, t0.facebookID AS facebookID20, t0.date_of_birth AS date_of_birth21, t0.locale AS locale22, t0.gender AS gender23, t0.has_profile_pic AS has_profile_pic24, t0.created_at AS created_at25, t0.updated_at AS updated_at26 FROM user t0 WHERE t0.facebookID = ?

34 Execute SELECT t0.username AS username1, t0.username_canonical AS username_canonical2, t0.email AS email3, t0.email_canonical AS email_canonical4, t0.enabled AS enabled5, t0.salt AS salt6, t0.password AS password7, t0.last_login AS last_login8, t0.locked AS locked9, t0.expired AS expired10, t0.expires_at AS expires_at11, t0.confirmation_token AS confirmation_token12, t0.password_requested_at AS password_requested_at13, t0.roles AS roles14, t0.credentials_expired AS credentials_expired15, t0.credentials_expire_at AS credentials_expire_at16, t0.id AS id17, t0.firstname AS firstname18, t0.lastname AS lastname19, t0.facebookID AS facebookID20, t0.date_of_birth AS date_of_birth21, t0.locale AS locale22, t0.gender AS gender23, t0.has_profile_pic AS has_profile_pic24, t0.created_at AS created_at25, t0.updated_at AS updated_at26 FROM user t0 WHERE t0.facebookID = '1234'
34 Close stmt  

34 Query START TRANSACTION
34 Prepare INSERT INTO user (username, username_canonical, email, email_canonical, enabled, salt, password, last_login, locked, expired, expires_at, confirmation_token, password_requested_at, roles, credentials_expired, credentials_expire_at, firstname, lastname, facebookID, date_of_birth, locale, gender, has_profile_pic, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
34 Close stmt  
34 Query COMMIT
34 Quit 
```

有什么线索吗？

**更新 2：**

我一直在学说库中记录执行 PDO 语句的一些返回值，结果我在开发环境中得到了正常的返回值 (1)。但是，我在生产环境中没有得到**任何**返回值。似乎是另一个提示，但我不知道该怎么做。

顺便`PDOStatement::errorCode`返回 00000（表示一切正常）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:02:18.237

生产设置中 pdo_mysql 上的连接可能存在问题。检查一次。根据[评论](https://stackoverflow.com/questions/11349748/statement-being-prepared-but-not-executed#comment15050462_11349748)给出答案。

# sed - 使用 awk 创建 csv 行

> ID：11349749
> 
> 赞同：3
> 
> 时间：2012-07-05T17:49:16.327
> 
> 标签：sed, awk

我是 awk 的新手，并不能完全找出最好的方法来做到这一点。我有数千个 xml 文件，我已经使用 sed 和 awk 删除了重复项并将字段划分为单个文件中的单个列。

现在我想将列表组装成一个 csv 文件，其中一行包含多个字段。在固定数量的字段之后，我想开始新的一行。

例子

```
1234
2345

345678
4.23456E3
54321
654321
789

87654.100
9876

10.0
1234
2345

345678
4.23456E3
54321
654321
789

87654.100
9876

11.0 
```

输出

```
1234, 2345, , 345678, 4.23456E3, 54321, 654321, 789, , 87654.100, 9876, , 10.0
1234, 2345, , 345678, 4.23456E3, 54321, 654321, 789, , 87654.100, 9876, , 11.0 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:57:17.260

`xargs`是否允许使用？

```
cat input | xargs -L13 -d'\n' | sed -e 's/ /, /g' 
```

我在这里得到这个输出：

```
1234, 2345, , 345678, 4.23456E3, 54321, 654321, 789, , 87654.100, 9876, , 10.0
1234, 2345, , 345678, 4.23456E3, 54321, 654321, 789, , 87654.100, 9876, , 11.0 
```

不过，这有点老套，如果您是从 XML 开始的，那么您应该考虑使用 XSLT。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:00:27.323

如果每一行都有相同数量的字段，比如 5，我会做类似的事情

`awk ' { printf("%s",$1); if (NR % 5 == 0) {printf("\n")} else {printf(",")}}' youtfile.txt`

NR 是 awk 读取的行数，% 是余数运算符。因此，如果读取的行数是 5 的倍数（在这种情况下），它将打印换行符，否则将打印逗号。

这假设如您的示例中每行一个字段，并且输入中的空白行将对应于 CSV 中的空白字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T18:19:33.557

一种使用方式`sed`：

内容`script.sed`：

```
## Label 'a'
:a

## If last line, print what is left in the buffer, substituting
## newlines with commas.
$ {
    s/^\n//
    s/\n/, /g
    p   
    q   
}

## If content of buffer has 12 newlines, we have reached to the limit
## of the line, so remove newlines with commas, print and delete buffer
## overwritting it with 'b'
/\([^\n]*\n\)\{12\}/ {
    s/^\n//
    s/\n/, /g
    p   
    b   
}

## Here buffer has not reached to the limit of fields for each line, so
## append one more (N) and continue loop in label 'a'
N
ba 
```

像这样运行它：

```
sed -nf script.sed infile 
```

具有以下输出：

```
1234, 2345, , 345678, 4.23456E3, 54321, 654321, 789, , 87654.100, 9876, , 10.0
1234, 2345, , 345678, 4.23456E3, 54321, 654321, 789, , 87654.100, 9876, , 11.0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T19:02:50.580

这可能对您有用：

```
paste -sd',,,,,,,,,,,,\n' file | sed 's/,/, /g'
1234, 2345, , 345678, 4.23456E3, 54321, 654321, 789, , 87654.100, 9876, , 10.0
1234, 2345, , 345678, 4.23456E3, 54321, 654321, 789, , 87654.100, 9876, , 11.0 
```

或者这个（GNU sed）：

```
sed ':a;$bb;N;s/\n/&/12;Ta;:b;s/\n/, /g' file
1234, 2345, , 345678, 4.23456E3, 54321, 654321, 789, , 87654.100, 9876, , 10.0
1234, 2345, , 345678, 4.23456E3, 54321, 654321, 789, , 87654.100, 9876, , 11.0 
```

# c# - 为什么这个模型绑定不起作用？

> ID：11349750
> 
> 赞同：0
> 
> 时间：2012-07-05T17:49:18.093
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, model

我知道名称在 HtmlHelper 中的方式是破坏模型绑定的原因。但我还没有想出如何解决它。或者，即使有修复。

一点解释。我使用一种模型来填充：文本、控件、默认值（选择列表）和保存的值。我使用另一个 ViewModel 只返回：值、dataid 和 ctrltypeid。被注释掉的是导致回发 ViewModel 未被填充的代码（例如：Html.TextBoxFor）。工作代码（例如：Html.TextBox）按预期工作。所以我想知道我必须对注释代码做什么才能使其像未注释代码一样工作。真的有什么我*可以*做的吗？

```
@model InspectionWebFormsMVC.ViewModels.FormRowModel

@using (Html.BeginForm("Index", "Section", FormMethod.Post))
    {

            <div style="clear:both; padding:1%;">       
                <div class="section">
                    @Model.Section
                </div>
                <div class="number">
                    @Model.SectionNumber
                </div>
                <div class="desc">
                    @Model.Description
                </div>
                <div class="ctrl">               
            @{
        int i = 0;
        //for (int i = 0; i < formRow.RowInput.Count; ++i)
        foreach (var RowInput in Model.RowInput)
        {
            var ddv = new SelectList(RowInput.RowCtrl.DefaultValues, "Value", "Label");
            switch (RowInput.RowCtrl.Type)
            {
                case "dropdown":
                    //@Html.DropDownListFor(blah => RowInput.InputtedData, ddv)
                    //@Html.HiddenFor(blah => RowInput.InputtedDataID)
                    //@Html.HiddenFor(blah => RowInput.RowCtrl.CtrlTypeID)

                                   @Html.DropDownList("InputtedData", ddv)                                   
                                   @Html.Hidden("InputtedDataID", RowInput.InputtedDataID)
                                   @Html.Hidden("CtrlTypeID", RowInput.RowCtrl.CtrlTypeID)
                                   <br /> 
                              break;
                case "text":
                                   //@Html.TextBoxFor(blah => RowInput.InputtedData)
                                   //@Html.HiddenFor(blah => RowInput.InputtedDataID)
                                   //@Html.HiddenFor(blah => RowInput.RowCtrl.CtrlTypeID)

                                   @Html.TextBox("InputtedData", RowInput.InputtedData)
                                   @Html.Hidden("InputtedDataID", RowInput.InputtedDataID)
                                   @Html.Hidden("CtrlTypeID", RowInput.RowCtrl.CtrlTypeID)   
                                   <br /> 
                              break;
            }
        }
        ++i;
                    } 
```

显然 Viewmodel 用于 Postback。

```
namespace InspectionWebFormsMVC.ViewModels
{
    public class SaveKeyValueInput
    {
        public long InputtedDataID { get; set; }
        public long CtrlTypeID { get; set; }
        public string InputtedData { get; set; }
    }
} 
```

从控制器。用于测试。

```
[HttpPost]
    public ActionResult Index(SaveKeyValueInput placeholder)
    {
        var ha = placeholder;
        var la = "Hello";

        FormRowProcessing placeholder2 = new FormRowProcessing();
        var stub = placeholder2.stub()[2];
        return View(stub);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:53:10.647

以下是使注释代码工作的方法：

```
for (int i = 0; i < Model.RowInput.Count; i++)
{
    @Html.DropDownListFor(blah => blah.RowInputpi[i].InputtedData, ddv)
    @Html.HiddenFor(blah => blah.RowInput[i].InputtedDataID)
    @Html.HiddenFor(blah => blah.RowInput[i].RowCtrl.CtrlTypeID)
    ...
} 
```

或者更好的方法当然是完全摆脱这个丑陋的循环（for 或 foreach）并用一行代码替换它：

```
@Html.EditorFor(x => x.RowInput) 
```

现在剩下的就是定义相应的编辑器模板（框架将自动为 RowInput 集合的每个元素呈现，这样您就不必编写任何循环）。编辑器模板按惯例工作。因此，如果您的`RowInput`属性定义如下：

```
public IEnumerable<FooBar> RowInput { get; set; } 
```

你定义模板`~/Views/Shared/EditorTemplates/FooBar.cshtml`：

```
@model FooBar

... put your switches and cases and stuff, but I remove this noise to 
... make the answer more readable

@Html.DropDownListFor(blah => blah.InputtedData, ddv)
@Html.HiddenFor(blah => blah.InputtedDataID)
@Html.HiddenFor(blah => blah.RowCtrl.CtrlTypeID) 
```

但是由于您的表单包含所有记录，因此您发布到的相应控制器操作必须与顶级视图模型一起使用，因为您正在发送所有内容：

```
[HttpPost]
public ActionResult Index(FormRowModel model)
{
    ...
} 
```

# c# - 阻止直接执行

> ID：11349769
> 
> 赞同：0
> 
> 时间：2012-07-05T17:50:40.313
> 
> 标签：c#, process, block

我有一个运行如下外部进程的“主应用程序”：

```
sortProcess = new Process();
sortProcess.StartInfo.FileName = "app.exe";
sortProcess.StartInfo.UseShellExecute = false;
sortProcess.StartInfo.RedirectStandardOutput = true;
sortProcess.StartInfo.RedirectStandardError = true;
sortProcess.OutputDataReceived += new DataReceivedEventHandler(SortOutputHandler);
sortProcess.ErrorDataReceived += new DataReceivedEventHandler(sortProcess_ErrorDataReceived);
sortProcess.Start();
sortProcess.BeginOutputReadLine();
sortProcess.BeginErrorReadLine();
sortProcess.WaitForExit();
sortProcess.Close(); 
```

外部进程需要非常简单地与主应用程序和多语言通信，例如控制台，如下所示：

```
 Console.WriteLine(@"started");
       //do stuff
        Console.WriteLine(@"something done");
        //try to do more stuff
        throw new System.InvalidOperationException("Logfile cannot be read-only");
        //could do
        Console.WriteLine(@"done without errors"); 
```

app.exe 具有`Output type`as `Windows Application`，我如何在 app.exe 上阻止从任何其他地方执行 exe，除非它由我的主应用程序运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:59:57.460

我不确定阻止其他应用程序调用 exe 的防弹解决方案。

但是，如果您主要关心的是阻止 app.exe 在用户双击它时启动，那么您可以通过在没有正确参数的情况下调用它时立即关闭 app.exe（可能首先显示一个消息框）来做到这一点。

在您的主应用程序中，您可能会传递这样的参数......

```
sortProcess.Start("app.exe", "please"); 
```

请参阅[Process.Start](http://msdn.microsoft.com/en-us/library/h6ak8zt5.aspx)和此[命令行参数教程](http://msdn.microsoft.com/en-us/library/aa288457%28v=vs.71%29.aspx)（假设 app.exe 是一个 .NET 应用程序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:33:23.637

如果您只需要从用户那里隐藏它​​，例如这样他们就不会双击它，您可以通过重命名文件来解决这个问题，例如`app.bin`.

# java - oracle.xml.parser.v2.XSLProcessor.processXSL 重载似乎什么都不做

> ID：11349774
> 
> 赞同：1
> 
> 时间：2012-07-05T17:50:58.667
> 
> 标签：java, oracle, xslt

我正在尝试使用 Oracle [XSLProcessor](http://docs.oracle.com/cd/B28359_01/appdev.111/b28391/oracle/xml/parser/v2/XSLProcessor.html)将多个 XSL 转换链接在一起。

第一个转换运行良好。第二个转换似乎也在运行，但根本不改变输出。

这是我用于第一次转换的代码。

```
private static XMLDocumentFragment Transform(InputStream xslt_stream, InputStream src_xml_stream) throws XSLException, MalformedURLException{
    XSLProcessor proc = new XSLProcessor();
    XSLStylesheet stylesheet = proc.newXSLStylesheet(xslt_stream);

    XMLDocumentFragment frag = proc.processXSL(stylesheet, src_xml_stream, null);

    return frag;
} 
```

我采用该转换的输出并将其通过管道传输到第二种方法中。

```
private static XMLDocumentFragment Transform(InputStream xslt_stream, XMLDocumentFragment src_frag) throws XSLException, MalformedURLException{
    XSLProcessor proc = new XSLProcessor();
    XSLStylesheet stylesheet = proc.newXSLStylesheet(xslt_stream);

    XMLDocumentFragment frag = proc.processXSL(stylesheet, src_frag);

    return frag;
} 
```

这是流程。

```
// get XSL input stream from ZD
xslt_stream = getFromZD(conn, "SELECTFF", zd_xslt_chain_1);

    // first overload
XMLDocumentFragment transformed = Transform(xslt_stream, xml_stream);

if (zd_xslt_chain_2 !=  null){
    // run second in transform chian
    xslt_stream = getFromZD(conn, "SELECTFF", zd_xslt_chain_2);

            // second overload
    transformed = Transform(xslt_stream, transformed);
} 
```

我是否在做一些明显错误的事情，是否有更好的方法来运行 XSLT 链？假设我使用过 Oracle 的 XSL 处理器，因为我确实使用过。

# javascript - 我刚刚显示的 javascript 变量如何立即错误地显示为未定义？

> ID：11349775
> 
> 赞同：0
> 
> 时间：2012-07-05T17:51:03.690
> 
> 标签：javascript, jquery

我有一些简单的 javascript 代码，如下所示：

```
var divLink = $(this).attr("href");
alert(divLink);
if ($(divlink).is(":visible")) $(divLink).hide("blind", { direction: "vertical" }, 1000); 
```

它在第 3 行抛出此错误：

```
Uncaught ReferenceError: divlink is not defined 
```

我放入第二行只是为了查看变量 divLink 中的内容。它返回：

```
The page at mysite.com says:

#categories_settings 
```

一旦我在对话框上单击“确定”，它就会引发错误。怎么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T17:51:48.577

JS 区分大小写。`divLink`始终使用，而不是`divlink`.

这解决了参考错误。@epascarello 的回答解决了其他问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:52:09.320

```
var divLink = $(this).attr("href");  <--string
alert(divLink);
if ($(divlink).is(":visible"))  <--acting like it is a jQuery object and it has a lowercase l. 
```

代码应该是

```
var divLink = $(this);
alert(divLink.attr("href"));
if (divLink.is(":visible")) {
    divLink.hide("blind", { direction: "vertical" }, 1000);
} 
```

# bash - 如何创建一个 Bash 监听器来接收 PHP 请求？

> ID：11349778
> 
> 赞同：2
> 
> 时间：2012-07-05T17:51:14.580
> 
> 标签：bash

我目前正在使用带有 PHP 的 Apache 服务器来侦听来自另一台服务器的请求。服务器要么加载带有参数的页面 (GET)，要么将值发布到页面 (POST) 以触发事件。

我想知道是否可以制作一个 Bash 侦听器来侦听请求，而不是让整个 Apache 服务器来侦听。

如果这是可能的，我会怎么做？它必须能够执行其他 Bash 脚本。我当前的方法使用 PHP 的 exec 函数，我不认为它是速度优化的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:39:56.100

来自“男人 bash”：

> /dev/tcp/host/port
> 如果 host 是一个有效的主机名或 Internet 地址，并且 port 是一个整数端口号或服务名，bash 会尝试打开一个到相应套接字的 TCP 连接。

[这](http://www.opensource.apple.com/source/bash/bash-23/bash/examples/scripts/websrv.sh)是一个与 Bash 一起分发的 Web 服务器。

在我的系统上，它`/usr/share/doc/bash/examples/scripts/websrv.sh`

# jquery - 用于在其名称属性中包含某些文本的复选框的 jQuery 选择器

> ID：11349779
> 
> 赞同：5
> 
> 时间：2012-07-05T17:51:15.623
> 
> 标签：jquery

我试图在 jQuery 中找到一个选择器，它选择所有作为复选框的输入，并且它们的名称包含一个特定的单词，如“top”或“Top”。在选择其他复选框时遇到麻烦。

是否可以使用类似的东西：

```
$("input[name*='top'] type:checkbox").each etc?

Top 1<input type="checkbox" name="Top1" /><br />
Top 2<input type="checkbox" name="Top2" /><br />
Top 3<input type="checkbox" name="Top3" /><br />
Top 4<input type="checkbox" name="Top4" /><br />

Bottom 1<input type="checkbox" name="Bottom1" /><br />
Bottom 2<input type="checkbox" name="Bottom1" /><br />
Bottom 3<input type="checkbox" name="Bottom1" /><br />
Bottom 4<input type="checkbox" name="Bottom1" /><br /> 
```

我只想选中名称中包含“top”一词的复选框。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T17:56:07.150

你很亲近...

```
$("input[type='checkbox'][name^='Top']").each() 
```

[jsFiddle 演示](http://jsfiddle.net/X7e67/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T17:55:04.170

我相信你可以结合[`:checkbox`](http://api.jquery.com/checkbox-selector/)选择器和[属性包含](http://api.jquery.com/attribute-contains-selector/)选择器：

```
$("input:checkbox[name*='top']").each(); 
```

不确定它是否需要不区分大小写，在这种情况下你可以看看这个[SO question](https://stackoverflow.com/questions/2196641/how-do-i-make-jquery-contains-case-insensitive)。

**更新：**

正如 bažmegakapa 在他的评论中指出的那样，`:checkbox`选择器根据文档已被弃用。因此，最好使用：

```
$("input[type=checkbox][name*='top']").each(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-05T17:52:57.337

你可以使用`start with`选择器：

```
$("input[name^='Top']") 
```

或者：

```
$("input[name^='Top']:checkbox") 
```

# ios - 防止在 UIScrollView 的最大/最小缩放时重绘屏幕

> ID：11349780
> 
> 赞同：0
> 
> 时间：2012-07-05T17:51:19.430
> 
> 标签：ios, cocoa-touch, uiscrollview, uiscrollviewdelegate

我的应用程序有一个相对昂贵的屏幕重绘。在其原始形式中，我们将 UIScrollview 的最小缩放设置为 100%，将最大缩放设置为 400%，在 scrollViewDidEndZooming 中，我们重绘屏幕。

我们的测试人员写了一个错误，当用户继续捏超过最小或最大缩放级别时，屏幕仍然闪烁，因为在后台发生了昂贵的重绘。

我试图通过检查（在scrollViewDidEndZooming中）缩放是否实际改变来解决这个问题，并且只有在改变时才刷新内容。

然而，这带来了一个新问题：如果用户（例如）从 100% 开始，并且*在一个手势中*捏到 400%，然后再缩回到 100%，则内容会稍微模糊。这是因为我的优化将缩放视为“没有改变”，因为它以 100% 开始和结束。但实际上，视图是按比例放大和缩小的，这会导致模糊。

通常，当视图通过这些过渡缩放时，我会简单地设置一个标志或其他东西，但 UIScrollView 似乎没有提供任何这样的钩子——只有一个用于开始和结束滚动的钩子。

有没有办法完成我想要做的事情，除了滚动我自己的手势识别器并放弃 UIScrollview 中的手势识别器，这似乎有点矫枉过正？

编辑：我很惊讶其他人没有遇到这个（或者至少没有回应他们如何处理它）。似乎任何具有相对昂贵重绘的应用程序都会遇到我的“之前”行为或“之后”行为，这对于昂贵的重绘情况都不是理想的。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:20:03.337

禁用 UIScrollView 弹跳会帮助您解决问题吗？或者这种行为会影响您的应用程序吗？

# c# - 如何将动态代理转换为 POCO？

> ID：11349788
> 
> 赞同：7
> 
> 时间：2012-07-05T17:51:48.410
> 
> 标签：c#, asp.net-mvc-3, serialization, entity-framework-4.1, dynamic-proxy

我试图序列化域模型并遇到了需要将动态代理转换为 POCO 的问题。我遇到的问题是模型中的虚拟属性存在循环引用。尽管我尝试使用`[ScriptIgnore]`以使序列化程序不解析这些属性，但它仍然可以。我相信这是因为对象是动态代理，并且属性中仍然存在一些残余物导致解析器进入（这反过来导致递归错误“循环引用” - 我尝试将递归限制为 3 个步骤，但我得到了“超出递归步骤”的错误）。

如何将对象从动态代理转换为 POCO 以便可以序列化？

编辑：简单的例子

```
public class One : BaseViewModel
{
    public int OneId { get; set; }
    public virtual ICollection<Two> Two { get; set; }
}

public class Two
{
    public int TwoId { get; set; }
    public int OneId { get; set; }
    [ScriptIgnore]
    public virtual One One { get; set; }
}

public abstract class BaseViewModel
{
    public string AsJson()
    {
        var serializer = new JavaScriptSerializer();
        return serializer.Serialize(this);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T16:24:55.583

作为 Jim 的 Automapper 解决方案的替代方案，我在将 POCO 代理“映射”（浅复制）到同一个 POCO 的实例方面取得了一些成功。执行此操作的简单方法是修改生成 POCO 的模板文件以包含 ToSerializable() 方法，因此 POCO 类如下所示：

```
public partial class cfgCountry
    {
        public cfgCountry()
        {
            this.People = new HashSet<Person>();
        }

        [Key]
        public int CountryID { get; set; }
        public string Name { get; set; }
        public int Ordinal { get; set; }

        public virtual ICollection<Person> People { get; set; }

        public cfgCountry ToSerializable()
        {
            return new cfgCountry()
            {
            CountryID = this.CountryID,
            Name = this.Name,
            Ordinal = this.Ordinal,
            };
        }
    } 
```

这是我添加到 POCO 模板 (tt) 文件中以创建 ToSerializable 函数的函数（这样一个丑陋的语法。）：

```
<#+
void WriteToSerializableMethod (CodeGenerationTools code, IEnumerable<EdmProperty> primitiveProperties, EntityType entity)
{

#>
public <#=code.Escape(entity)#> ToSerializable()
{
    return new <#=code.Escape(entity)#>()
    {
<#+
    foreach(var edmProperty in primitiveProperties)
    {
#>
    <#=edmProperty.Name#> = this.<#=edmProperty.Name#>,
<#+
    }
#>
    };
}
<#+
}
#> 
```

这并不完美，因为您需要记住在期望结果被序列化时返回 foo.ToSerializable() 而不是 foo 本身，但我希望它对某人有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T18:17:22.037

这是一个已知的问题

> 我们修复了 ScriptIgnoreAttribute 中的一个问题，该问题未传播到派生类。由于 POCO 代理类型是通过派生自用户提供的 POCO 类创建的，因此 JavaScriptSerializer 无法看到您在 repro 中拥有的 [ScriptIgnore] 属性。
> 
> 该修复不会包含在 .NET 4.5 的下一个预览版中。

（所以大概你必须等待下一个预览版本或最终版本）

[http://connect.microsoft.com/VisualStudio/feedback/details/723060/ef-4-2-code-first-property-attributes-not-honoured](http://connect.microsoft.com/VisualStudio/feedback/details/723060/ef-4-2-code-first-property-attributes-not-honoured)

在 .NET 4.5 中已修复

从对该问题的评论来看，如果您使用的是 JSON.Net 的当前版本，您可以使用 NonSerializedAttribute 而不是 ScriptIgnoreAttribute 来解决

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T20:01:41.507

特拉维斯，我知道你在这里有你接受的答案，但想就此进行一点横向思考。我最近遇到了一个非常相似的问题，无法为我工作，尝试了所有的 [scriptignore] 属性等，等等。

最终对我有用的是使用 Automapper 并创建从代理对象到精简的 poco 对象的映射。这在 2 分钟内解决了我所有的问题。在试图让代理打球时，经过 36 小时的围攻心态占了上风 - 嘘 :-)

在此期间要考虑的另一种方法。

**[编辑]** - 使用 Automapper（这是一个引用 automapper 的小测试应用程序）

参考：[http ://automapper.codeplex.com/](http://automapper.codeplex.com/)

nuget：安装包 AutoMapper

课程：

```
public sealed class One : BaseViewModel
{
    // init collection in ctor as not using EF in test
    // no requirement in real app
    public One()
    {
        Two = new Collection<Two>();
    }
    public int OneId { get; set; }
    public ICollection<Two> Two { get; set; }
}

public class Two
{
    public int TwoId { get; set; }
    public int OneId { get; set; }
    [ScriptIgnore]
    public virtual One One { get; set; }
}

public abstract class BaseViewModel
{
    public string AsJson()
    {
        var serializer = new JavaScriptSerializer();
        return serializer.Serialize(this);
    }
}

public class OnePoco  : BaseViewModel
{
    public int OneId { get; set; }
    public virtual ICollection<TwoPoco> Two { get; set; }
}

public class TwoPoco
{
    public int TwoId { get; set; }
    public int OneId { get; set; }
} 
```

测试控制器代码：

```
public ActionResult Index()
{
    // pretend this is your base proxy object
    One oneProxy = new One { OneId = 1 };
    // add a few collection items
    oneProxy.Two.Add(new Two() { OneId = 1, TwoId = 1, One = oneProxy});
    oneProxy.Two.Add(new Two() { OneId = 1, TwoId = 2, One = oneProxy});

    // create a mapping (this should go in either global.asax 
    // or in an app_start class)
    AutoMapper.Mapper.CreateMap<One, OnePoco>();
    AutoMapper.Mapper.CreateMap<Two, TwoPoco>();

    // do the mapping- bingo, check out the asjson now
    // i.e. oneMapped.AsJson
    var oneMapped = AutoMapper.Mapper.Map<One, OnePoco>(oneProxy);

    return View(oneMapped);
} 
```

试一试，看看你的进展如何，它确实对我有用，“地球”动了:)

# java - 如何使用 gwt 从 url 中提取网页的标题网页？

> ID：11349792
> 
> 赞同：0
> 
> 时间：2012-07-05T17:51:58.387
> 
> 标签：java, url, gwt

如何从 url 获取像网页标题这样的元数据？我还需要创建网页的预览，怎么办？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:56:02.287

显示页面并获得其标题客户端的唯一方法是使用 iframe。问题在于它不是真正的预览。它是实际页面的不可缩放窗口。但是，如果目标页面位于另一个域中，则出于安全原因访问该标题会被阻止。

```
final Frame f = new Frame("./cool.html");
f.addLoadHandler(new LoadHandler()
{
    @Override
    public void onLoad( LoadEvent event )
    {
        System.out.println(getTitle(f.getElement()));
    }

    private native String getTitle( Element frameElement )/*-{
        return frameElement.contentWindow.document.title;
    }-*/;
}); 
```

如果您想创建可扩展的预览或访问不同域上的页面，则必须在服务器端进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:50:46.677

要获取当前页面的标题，`Window.getTitle()`. 要获取远程页面的标题，您需要使用[RequestBuilder 之](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/http/client/RequestBuilder.html)类的东西。

# reporting-services - 是否可以在 tablix - ssrs 中有控件

> ID：11349793
> 
> 赞同：0
> 
> 时间：2012-07-05T17:52:05.690
> 
> 标签：reporting-services

我希望有一个下拉框供用户为每一行选择，并基于该行将可见或不可见。在下拉列表中选择一个选项时，应出现一个文本框，允许用户键入自由文本。这在ssrs中可能吗？如果不是，还有什么其他方法可以处理这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:32:41.237

从你所追求的问题来看，这仍然有点不清楚。您不能完全使用报表中的下拉菜单和文本框之类的交互式控件（至少，不能使用标准控件）。不过，有两件事可能足以帮助您：

*   [在 tablix 中的行上展开/折叠](http://msdn.microsoft.com/en-us/library/dd220405.aspx)。
*   [参数](http://msdn.microsoft.com/en-us/library/ms155917%28v=sql.100%29.aspx)更具交互性，但显示在报表顶部，而不是在 tablix 内

# sql - 编写 SQL 查询所需的帮助

> ID：11349799
> 
> 赞同：0
> 
> 时间：2012-07-05T17:52:49.557
> 
> 标签：sql

我在下面有两张桌子。

**项目表**

此项目表包含 ItemId 和 Total Quantity

```
ItemID   TotalItems     

 1        10

 2        10

 3        10

 4        10 
```

**订单历史**

表 此订单历史记录表包含 ItemId 和 OrderId

```
orderId    ItemID

 11          1

 12          1

 13          2

 14          2

 15          3 
```

我想获得包含 ItemID 和使用的项目总数的结果，例如 Item Id 1 ， orderhistory 中有两个订单，所以我想要如下结果

剩余项目（公式：ItemTable 中的项目总数 - Orderhistory 表中相同 ItemId 的计数）

最终输出：

**ItemId 剩余项目**

```
1    8

2    8

3    9

4    10 
```

所以如何为此编写 SQL 查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:00:01.547

像这样的东西？

```
SELECT i.ItemID, i.TotalItems - COUNT(h.ItemID) AS RemainingItems
FROM ItemTable i
    LEFT JOIN OrderHistory h
        ON i.ItemId = h.ItemId
GROUP BY i.ItemId, i.TotalItems 
```

# xml - xslt 将位置作为参数传递会产生奇怪的结果吗？

> ID：11349800
> 
> 赞同：2
> 
> 时间：2012-07-05T17:52:55.547
> 
> 标签：xml, xslt, xpath, position

我有一个看起来像这样的 xml 文件：

```
<section>
  <title> title of section </title>
  <table>
     <title> title of table</title>
     <tableData columns = 2>
     <column width ="50"/>
     <column width ="100"/>
     <tableHead>
        <row>
             <entry>column 1</entry>
        </row> 
        <row>
             <entry>column 2</entry>
        </row>
     </tableHead>
     <tableBody>
       <row>
             <entry>text</entry>
             <entry>abc</entry>
       </row> 
       <row>
             <entry>text</entry>
             <entry>dbe</entry>
      </row> 
       <row>
             <entry>text</entry>
             <entry>fgh</entry>
       </row> 
     </tableBody>
   </table>
 </section> 
```

我需要处理 tableHead/row/entry 中的每个条目，并以某种格式将其吐出，其中还包括 columnWidth。所以，我的输出必须看起来像 {"name":"column 1", "width":"50px"},{"name":"column 2", "width":"100px"}

我的变换看起来像这样

```
 <xsl:template match="//table/tableHead/row/entry">
    <xsl:text>{"name": "</xsl:text><xsl:value-of select"."/>
    <xsl:text>", "width":"</xsl:text>

    <xsl:call-template name="get_column_width">
       <xsl:with-param name ="rowNum">
          <xsl:value-of sellect"position()"/>
       </xsl:with-param>
    </xsl:call-template>
  </xsl:template>

 <xsl:template name ="get_column_width">
     <xsl:param-name="rowNum">
     <xsl:value-of select="../../../columnWidth[$rowNum]/@width"/>
     <xsl:text>px"}</xsl:text>
 </xsl:template> 
```

奇怪的是，这会产生 {"name":"column 1", "width":"50 100px"},{"name":"column 2", "width":"50 100px"}

但是，当我只输出 rowNum 参数时，我得到的正是我所期望的：

{"名称":"第 1 列", "宽度":1px"},{"名称":"第 2 列", "宽度":"2px"}

因此，rowNum 是 1 和 2，因此 select 语句将使用 columnWidth[1] 和 columnWidth[2]，但无论出于何种原因，它都只输出它们。我尝试在选择中使用 columnWidth[1] ，它按我的预期输出 50 。columnWidth[2] 输出 100。我在这里真的很困惑。使用previous-sibling 给出了相同的结果。我的模板匹配有问题吗？

不幸的是，更改 xml 格式不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:01:43.077

**而不是**：

```
<xsl:value-of select="../../../columnWidth[$rowNum]/@width"/> 
```

**使用**：

```
<xsl:value-of select="../../../columnWidth[position() = $rowNum]/@width"/> 
```

**解释**

在 XPath 中：

```
someExpression[someInteger] 
```

是以下的简写：

```
someExpression[position() = someInteger] 
```

但是，在以下情况下：

```
someExpression[$someVariableReference] 
```

XPath 1.0 处理器通常不知道变量中包含什么值和什么类型。因此，它将此变量转换为布尔值（`true()`或`false()`）以执行完整的评估。

根据定义：

```
boolean(someNumber) 
```

相当于：

```
not(somenumber = 0) 
```

由于数字 1 和 2 都不是零，因此谓词在这两种情况下都是`[$rowNum]`，`true()`

因此：

```
../../../columnWidth[$rowNum]/@width 
```

选择`width`两个`columnWidth`元素的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:18:37.313

$rowNum 的值是一个结果树片段（或在 XSLT 2.0 中，一个文档节点）。结果树片段（或节点）的有效布尔值始终为真。您可能认为该值是一个整数。但是要将变量设置为整数，您应该编写

```
<xsl:with-param name="x" select="position()"/> 
```

不是

```
<xsl:with-param name="x">
  <xsl:value-of select="position()"/>
</xsl:with-param> 
```

遗憾的是，考虑到它是多么冗长和低效，以及它多么偶尔（如这里）给出错误的答案，后一种结构似乎非常普遍。

# mysql - 为什么我得到一个未知的数据库错误？

> ID：11349806
> 
> 赞同：-1
> 
> 时间：2012-07-05T17:53:07.917
> 
> 标签：mysql, grails, amazon-ec2

我有一个 mysql (rds) 的亚马逊 Ec2 实例。它有一个名为`locker`. [我可以按照这里](http://docs.amazonwebservices.com/AmazonRDS/latest/GettingStartedGuide/ConnectToDBInstance.html)的这些步骤从我的终端访问它。

我已将我的配置`DataSource.groovy`为：

```
development {
        dataSource {
            dbCreate = "create-drop" // one of 'create', 'create-drop', 'update', 'validate', ''
            url = "jdbc:mysql://localhost/locker?useUnicode=yes&characterEncoding=UTF-8"
            username = "root"
            password = ""
        }
    } 
```

当我运行时`grails run-app`，我收到以下错误：

```
| Error 2012-07-05 23:15:23,818 [Thread-9] ERROR context.GrailsContextLoader  - Error executing bootstraps: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'hibernateProperties' while setting bean property 'hibernateProperties'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateProperties': Cannot resolve reference to bean 'dialectDetector' while setting bean property 'properties' with key [hibernate.dialect]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Unknown database 'locker')
Message: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'hibernateProperties' while setting bean property 'hibernateProperties'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateProperties': Cannot resolve reference to bean 'dialectDetector' while setting bean property 'properties' with key [hibernate.dialect]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Unknown database 'locker')
    Line | Method
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    679 | run . . . in java.lang.Thread

Caused by BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'hibernateProperties' while setting bean property 'hibernateProperties'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateProperties': Cannot resolve reference to bean 'dialectDetector' while setting bean property 'properties' with key [hibernate.dialect]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Unknown database 'locker')
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    679 | run . . . in java.lang.Thread

Caused by BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'hibernateProperties' while setting bean property 'hibernateProperties'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateProperties': Cannot resolve reference to bean 'dialectDetector' while setting bean property 'properties' with key [hibernate.dialect]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Unknown database 'locker')
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    679 | run . . . in java.lang.Thread

Caused by BeanCreationException: Error creating bean with name 'hibernateProperties': Cannot resolve reference to bean 'dialectDetector' while setting bean property 'properties' with key [hibernate.dialect]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Unknown database 'locker')
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    679 | run . . . in java.lang.Thread

Caused by BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Unknown database 'locker')
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    679 | run . . . in java.lang.Thread

Caused by MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Unknown database 'locker')
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    679 | run . . . in java.lang.Thread

Caused by SQLNestedException: Cannot create PoolableConnectionFactory (Unknown database 'locker')
->> 1549 | createPoolableConnectionFactory in org.apache.commons.dbcp.BasicDataSource
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   1388 | createDataSource in     ''
|   1044 | getConnection in     ''
|    334 | innerRun  in java.util.concurrent.FutureTask$Sync
|    166 | run . . . in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . in java.util.concurrent.ThreadPoolExecutor$Worker
^    679 | run       in java.lang.Thread

Caused by MySQLSyntaxErrorException: Unknown database 'locker'
->>  411 | handleNewInstance in com.mysql.jdbc.Util
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    386 | getInstance in     ''
|   1052 | createSQLException in com.mysql.jdbc.SQLError
|   3597 | checkErrorPacket in com.mysql.jdbc.MysqlIO
|   3529 | checkErrorPacket in     ''
|    935 | checkErrorPacket in     ''
|   4101 | secureAuth411 in     ''
|   1300 | doHandshake in     ''
|   2337 | coreConnect in com.mysql.jdbc.ConnectionImpl
|   2370 | connectOneTryOnly in     ''
|   2154 | createNewIO in     ''
|    792 | <init>    in     ''
|     47 | <init> .  in com.mysql.jdbc.JDBC4Connection
|    411 | handleNewInstance in com.mysql.jdbc.Util
|    381 | getInstance in com.mysql.jdbc.ConnectionImpl
|    305 | connect   in com.mysql.jdbc.NonRegisteringDriver
|     38 | createConnection in org.apache.commons.dbcp.DriverConnectionFactory
|    582 | makeObject in org.apache.commons.dbcp.PoolableConnectionFactory
|   1556 | validateConnectionFactory in org.apache.commons.dbcp.BasicDataSource
|   1545 | createPoolableConnectionFactory in     ''
|   1388 | createDataSource in     ''
|   1044 | getConnection in     ''
|    334 | innerRun  in java.util.concurrent.FutureTask$Sync
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    679 | run . . . in java.lang.Thread 
```

但是当我将数据库从更改`locker`为`testing`（我创建的其他数据库）时，一切正常，我的 grails 应用程序正在运行。

为什么它不在第一种情况下运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:16:24.893

无论出于何种原因，当您的应用程序连接时，它无法“看到”“储物柜”数据库。：

```
Unknown database 'locker' 
```

这可能是 MySQL 中的某种权限问题，与您连接的用户有权访问哪些数据库有关。

当然，这假设“locker”数据库*确实*存在于您要连接的数据库上，该数据库（基于该连接字符串）是运行在 上的 MySQL 服务器`localhost`，而不是 rds 的。

# android - 使用 OpenStreetMap API，jar 文件出错？NoClassDefFoundError

> ID：11349808
> 
> 赞同：2
> 
> 时间：2012-07-05T17:53:12.523
> 
> 标签：android, openstreetmap

我正在尝试创建一个应用程序来测试如何使用`OpenStreetMaps`API，但是当我插入 jar 文件时出现错误提示`NoClassDefFoundError`

堆栈跟踪

```
07-05 13:35:43.875: E/AndroidRuntime(9235): FATAL EXCEPTION: main
07-05 13:35:43.875: E/AndroidRuntime(9235): java.lang.ExceptionInInitializerError
07-05 13:35:43.875: E/AndroidRuntime(9235):     at com.example.osm.test.MainActivity.onCreate(MainActivity.java:16)
07-05 13:35:43.875: E/AndroidRuntime(9235):     at android.app.Activity.performCreate(Activity.java:5008)
07-05 13:35:43.875: E/AndroidRuntime(9235):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
07-05 13:35:43.875: E/AndroidRuntime(9235):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
07-05 13:35:43.875: E/AndroidRuntime(9235):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
07-05 13:35:43.875: E/AndroidRuntime(9235):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
07-05 13:35:43.875: E/AndroidRuntime(9235):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
07-05 13:35:43.875: E/AndroidRuntime(9235):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-05 13:35:43.875: E/AndroidRuntime(9235):     at android.os.Looper.loop(Looper.java:137)
07-05 13:35:43.875: E/AndroidRuntime(9235):     at android.app.ActivityThread.main(ActivityThread.java:4745)
07-05 13:35:43.875: E/AndroidRuntime(9235):     at java.lang.reflect.Method.invokeNative(Native Method)
07-05 13:35:43.875: E/AndroidRuntime(9235):     at java.lang.reflect.Method.invoke(Method.java:511)
07-05 13:35:43.875: E/AndroidRuntime(9235):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-05 13:35:43.875: E/AndroidRuntime(9235):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-05 13:35:43.875: E/AndroidRuntime(9235):     at dalvik.system.NativeStart.main(Native Method)
07-05 13:35:43.875: E/AndroidRuntime(9235): Caused by: java.lang.NoClassDefFoundError: org.slf4j.LoggerFactory
07-05 13:35:43.875: E/AndroidRuntime(9235):     at org.osmdroid.views.MapView.<clinit>(MapView.java:64)
07-05 13:35:43.875: E/AndroidRuntime(9235):     ... 15 more 
```

我的活动就这么简单

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    MapView mapView = new MapView(this,256); //fails
    mapView.setClickable(true);
    mapView.setBuiltInZoomControls(true);

    setContentView(mapView);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

一旦尝试创建地图视图，它就会失败，我想还有另一个 jar 文件吗？目前我有，`osmdroid-android-3.0.8.jar`虽然我可能不需要最后两个来实际创建地图。`osmdroid-packager-3.0.8.jar``osmdroid-third-party-3.0.8.jar`

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:54:20.227

是的，你还需要一个罐子

```
NoClassDefFoundError: org.slf4j.LoggerFactory 
```

给你线索

slf4j-android-1.5.8.jar 是你需要的jar

编辑：

现在似乎有更高版本（1.6.6），可在： [latest slf4j](http://www.slf4j.org/download.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-28T09:48:42.443

是的，你还需要一个 jar 来解决这个 `NoClassDefFoundError: org.slf4j.LoggerFactory`错误

[http://www.slf4j.org/android/](http://www.slf4j.org/android/)并且 jar 的名称是`slf4j-android-1.6.1-RC1.jar [sha1]`

# javascript - 伪类悬停在 JavaScript ImageSwap 中不起作用

> ID：11349812
> 
> 赞同：1
> 
> 时间：2012-07-05T17:53:25.687
> 
> 标签：javascript, css

专家；

我有一个照片修饰投资组合页面，其中包含替换主查看器图像的缩略图。主查看器图像是具有“之前”和“之后”部分的精灵，显示修饰之前和修饰后的原始图像。精灵作为背景图像加载到主查看器 div 中，设置为在鼠标悬停时重新定位以显示精灵的“之前”和“之后”部分。

当页面最初加载时，主查看器的行为应如此，在悬停时显示之前和之后的位置偏移。但是，一旦通过缩略图选择将新图像加载到查看器中，悬停动作就会停止工作。我已经用了几个小时了，但无法解决问题。

可以在此处看到主查看器精灵的示例： [http](http://www.triadimedia.com/frame_01.jpg) ://www.triadimedia.com/frame_01.jpg 。所有样式和脚本都包含在页面中，位于： [http](http://www.triadimedia.com/pfolio_photo_retouch.php) ://www.triadimedia.com/pfolio_photo_retouch.php 。

任何帮助将不胜感激。

谢谢。

凯西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:12:38.550

更改您的拇指以使用此代码：

```
<a onclick="javascript:thumb_swap(1);"></a>
<a onclick="javascript:thumb_swap(2);"></a> 
```

ETC...

然后用这个替换所有当前的 JS 函数：

```
function thumb_swap(num) {
    if(num<10) num = "0"+num;
    var el = document.getElementById('viewer');
    var styles = getComputedStyle(el,null);
    var bgurl = styles.backgroundImage;
    bgurl = bgurl.replace(/_[0-9]+\.jpg/,'_'+num+'.jpg');
    document.getElementById('viewer').style.backgroundImage = bgurl;
} 
```

无论如何，在快速测试中为我工作。

# excel - 如何从 excel 复制导入规范以访问？

> ID：11349813
> 
> 赞同：1
> 
> 时间：2012-07-05T17:53:28.810
> 
> 标签：excel, ms-access

我已经在 MS Excel 中绘制了一个导入规范。

但是，当我尝试将其复制并粘贴到 MS Access 中的“高级文本文件导入”向导中时，它将验证输入且没有错误，仅在我到达最后一步时提供一个。

有没有人遇到过这个问题，他们有解决办法吗？我可以手动输入规范，但这将非常耗时，因为有 200 多个字段。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:54:42.397

根据 Microsoft 的说法，您无法将规范从一个数据库复制到另一个数据库。如果禁止导入/导出规范的 Access-Access 传输，那么 Excel-Access 传输也不可用是有道理的。

但是，规范存储在 MS Access 中的表中，特别是 MSysImexSpecs 和 MSysImexColumns 表。根据您用于 MS Access 的版本，查看这些隐藏表的方式会有所不同。Google 可以快速引导您找到它们。

一些VBA编码可以通过读取源数据库中MSysImexSpecs的内容，将数据插入到目标表中的MSysImexSpecs中来实现规范的Access-Access传递。

因为 Excel 不使用表格，所以老实说，我不相信有比在 MS Access 中重建规范更快的解决方案。

下面是我今天找到的导入/导出规范的访问访问迁移的代码示例。如果您知道 ImEx 规范如何存储在 Excel 中（可能在集合中？），那么可以更改以下代码以从 Excel 集合迁移到 Access 表。

```
Sub GetSpecs()
Dim accApp As Object
Dim SourceDBName As String
Dim DbPath As String
Dim CurrDB As String

SourceDBName = "C:\SourceDB.mdb"
DbPath = "C:\TargetDBPath\"  'Make sure about last slash

Set accApp = CreateObject("Access.Application")
CurrDB = Dir(DbPath & "*.mdb", vbNormal)
Do Until Len(CurrDB) = 0
    If Not DbPath & CurrDB = SourceDBName Then
        accApp.OpenCurrentDatabase DbPath & CurrDB
        On Error GoTo errhandler
        accApp.CurrentDb.TableDefs.Delete "MSysIMEXSpecs"
        accApp.DoCmd.TransferDatabase acImport, "Microsoft Access", SourceDBName, acTable, "MSysIMEXSpecs", "MSysIMEXSpecs"
        accApp.CloseCurrentDatabase
        CurrDB = Dir()
    End If
Loop
accApp.Quit
MsgBox "Done", vbOKOnly + vbInformation, "Error"
Exit Sub

errhandler:
If Err = 3265 Then
    Resume Next
Else
    MsgBox Err & " - " & Err.Description, vbOKOnly + vbExclamation, "Error"
    If Not accApp Is Nothing Then accApp.Quit
End If
End Sub 
```

来源： [http ://www.mrexcel.com/forum/showthread.php?58094-Import-Specifications](http://www.mrexcel.com/forum/showthread.php?58094-Import-Specifications)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T15:34:31.350

突出显示导入例程表的上角并粘贴（续 V）该表必须采用相同的格式，因此最好的方法是通过突出显示导入规范（规范表的左上角）来复制现有的导入规范和 cntl C 并粘贴到 excel 中，调整到您的新规范并重新粘贴，突出显示导入例程表的上角并粘贴（续 V）

经过多年认为访问的导入规范方面是荒谬的，我今天发现了这一点。

# c# - 如何让javascript中的内联表达式在执行前等待

> ID：11349816
> 
> 赞同：0
> 
> 时间：2012-07-05T17:53:41.397
> 
> 标签：c#, javascript, asp.net, ajax, eval

我有一个表达式`<%= GetAddPinScript() %>`来评估我的代码隐藏文件中的方法。该方法生成javascript，然后返回： `AddPushpin('data', 'more data', numbers, numbers, 'no');`

这里的关键是这`'no'`是一个由代码隐藏方法插入的变量，它可以帮助我的 javascript 的其余部分确定是否应该显示某些内容。（基本上是一个布尔值）

我遇到的问题是我的代码隐藏中的方法需要一个变量（在下面的代码中），该变量在评估表达式**之前**`result`通过 ajax 调用发送，以确定要在 javascript 中生成的正确变量 -但表达式总是在页面加载时计算。

 **那么如何防止在进行 ajax 调用之前评估表达式呢？

Javascript

```
function displayGeneralInfo(specifics)
     {
     var callback = AddQueryString(window.location.href, "action", "displayResults");
     $.ajax({
            url: callback,
            type: "POST",
            async: false,
            data: {
                specifics: specifics
                }
                });
                <%= GetAddPinScript() %>
     } 
```

和 AddPushpin 函数

```
function AddPushpin(name, description, latitude, longitude, selected) {
    // Add a pin to the map
    var center = new Microsoft.Maps.Location(latitude, longitude);
    var pin = new Microsoft.Maps.Pushpin(center, null);

    if(selected !== null || selected!="")
      {
      if(selected == "yes")
       {
       infoboxOptions = new Microsoft.Maps.Infobox(center,
        {                          width: 285,
                               height: 170,
                               visible:true,
                               actions:[{label: 'Associate', eventHandler: associate}]
                               });
                               map.entities.push(infoboxOptions);
        }
    }
    map.entities.push(pin);
} 
```

和代码隐藏片段

```
public string GetAddPinScript()
    {
foreach (Location location in foo(x => !string.IsNullOrWhiteSpace(x.Longitude) && !string.IsNullOrWhiteSpace(x.Latitude)))
        {
            selected = "no";
            if (!result.IsNullOrEmpty())
            {
                if (location.MapPinDescription.IndexOf(result) > 0)
                    selected = "yes";
            }
            pins.Add(string.Format("AddPushpin('{0}', '{1}', {2}, {3}, '{4}');",
                location.etc1("'", @"\'"), location.etc2("'", @"\'"), location.etc3, location.etc4, selected));
           string retVal = string.Join("\n", pins.ToArray());
           return retVal; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:58:38.510

要在 ajax 调用完成后运行 add pin 脚本，您应该将其设置为 ajax 调用的完整处理程序：

```
function displayGeneralInfo(specifics)
 {
 var callback = AddQueryString(window.location.href, "action", "displayResults");
 $.ajax({
        url: callback,
        type: "POST",
        async: false,
        data: {
            specifics: specifics
            }
            },
        complete:  <%= GetAddPinScript() %>
 }); 
```

请注意，上面的语法假定`GetAddPinScript`将返回一个函数，一个现有函数的名称或一个匿名函数块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:01:12.130

你不能让它等待。javascript 在客户端执行，此函数在服务器上运行。Asp.net 在向客户端发送数据之前会执行所有绑定，因此您无法说等到客户端上运行一些代码然后运行此函数。我建议您在对服务器进行 ajax 调用时调用此函数。从此函数返回一些 html，然后将其包含在成功函数的 html 中。**

# iphone - 如果度数符号在 json 对象中，则 JSONObjectWithData 返回 null

> ID：11349819
> 
> 赞同：2
> 
> 时间：2012-07-05T17:54:01.380
> 
> 标签：iphone, xcode, json, nsjsonserialization

如果 json 字符串包含度数符号 ° (U+00B0)，则 JSONObjectWithData 将返回 null 而不会出错。如果我将 json 字符串提供给我的桌面浏览器，它会显示得很好。

我的代码（一个类别）带有一些 NSLogs 来查看正在发生的事情看起来像这样......

```
+(NSDictionary*)dictionaryWithContentsOfJSONURLString:(NSString *)urlAddress{
     __autoreleasing NSError* error = nil;
    NSData* data = [NSData dataWithContentsOfURL:[NSURL URLWithString:urlAddress] options:NSDataReadingUncached error:&error];
    if (error != nil) {
        NSLog(@"%@",[error localizedDescription]);        
    }   else {
        NSLog(@"No Error: %@", data);  //looks good here. console displays the raw data 
    }

    id result = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

    if (error != nil) {
        NSLog(@"%@",[error localizedDescription]);
        return nil;

    }   else {
        NSLog(@"No Error: %@", [result objectForKey:@"exams"]); //console displays the value ("No Error: value for key...") unless a degree symbol is present in which case it displays No Error: (null)

    }

    return result;

 } 
```

因此，如果接收到的 json 字符串包含度数符号，我没有收到任何错误，但 JSONOBjectWithData 将返回 null。

我使用带有 URL 内容的 NSString 来查看 xCode 是如何查看字符串的，而不是我得到的度数符号，我认为它是一个省略号 ∞ 符号。在浏览器中查看时，相同的字符串是度数符号。

这是一个错误吗？我肯定错过了什么。

谢谢，

约翰

# bash - 如何使用 shell 遍历外部文件中的行？

> ID：11349827
> 
> 赞同：29
> 
> 时间：2012-07-05T17:54:40.503
> 
> 标签：bash, shell

我有一个包含名称列表的文件。我需要使用 shell 脚本从外部文件中循环遍历此文件中的所有名称。我怎样才能做到这一点？

示例文件：

脚本/名称.txt

```
alison
barb
charlie
david 
```

脚本/script.sh

```
NAMES="" #names from names.txt file
for NAME in $NAMES; do
    echo "$NAME"
done 
```

如何在单独的 shell 脚本中将 names.txt 文件分解为数组？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-05T17:59:43.330

一种方法是：

```
while read NAME
do
    echo "$NAME"
done < names.txt 
```

**编辑：** ~~请注意，循环在子外壳中执行，因此任何修改的变量都将是本地的，除非您`declare`在循环外部声明它们。~~

丹尼斯威廉姆森是对的。抱歉，一定是经常使用管道结构而感到困惑。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-05T17:59:10.750

你会想要使用“读取”命令

```
while read name
do
    echo "$name"
done < names.txt 
```

请注意，“$name”是带引号的——如果不是，它将使用中的字符`$IFS`作为分隔符进行拆分。如果您只是回显变量，这可能不会被注意到，但是如果您的文件包含要复制的文件名列表，`$IFS`那么如果变量未引用，这些文件名将被分解，这不是您想要的或期待。

如果您想使用 Mike Clark 的方法（加载到变量中而不是使用读取），您可以不使用`cat`：

```
NAMES="$(< scripts/names.txt)" #names from names.txt file
for NAME in $NAMES; do
    echo "$NAME"
done 
```

这样做的问题是，它将整个文件加载到`$NAMES`中，当您将其读回时，您可以获取整个文件（如果引用）或由 分解的文件（`$IFS`如果未引用）。默认情况下，这会给你单独的单词，而不是单独的行。因此，如果名字“Mary Jane”出现在一行上，您将得到“Mary”和“Jane”作为两个不同的名字。使用`read`将解决这个问题......虽然你也可以改变`$IFS`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-05T17:58:46.140

```
cat names.txt|while read line; do
    echo "$line";
done 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-05T17:58:27.293

我知道纯粹主义者会讨厌这种方法，但你可以`cat`存档。

```
NAMES=`cat scripts/names.txt` #names from names.txt file
for NAME in $NAMES; do
   echo "$NAME"
done 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-05T19:19:07.413

这可能对您有用：

```
cat <<\! >names.txt
> alison
> barb
> charlie
> david
> !
OIFS=$IFS; IFS=$'\n'; NAMES=($(<names.txt)); IFS=$OIFS
echo "${NAMES[@]}"
alison barb charlie david
echo "${NAMES[0]}"
alison
for NAME in "${NAMES[@]}";do echo $NAME;done
alison
barb
charlie
david 
```

# android - Android - 分段圆形按钮

> ID：11349828
> 
> 赞同：3
> 
> 时间：2012-07-05T17:54:41.417
> 
> 标签：android, button, geometry

我正在尝试创建一个看起来像这样的按钮：

[![样本](../Images/58ba1272bf7e94ebd2757a20d86e90ef.png)](https://i.stack.imgur.com/Lqbfw.jpg)

每三分之一充当一个单独的按钮。我正在寻找有关如何实现这一点的建议。我读过一些关于圆形按钮的帖子，但这是一个稍微不同的问题，因为按钮本身是相当不规则的形状。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T11:29:05.960

[https://github.com/makeramen/android-segmentedradiobutton](https://github.com/makeramen/android-segmentedradiobutton) 使用这可能是你得到一些帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T03:05:45.117

正如@CommonsWare 所暗示的那样，我将创建一个[自定义视图。](http://developer.android.com/guide/topics/ui/custom-components.html)该文档涵盖了所有内容，但基本上您将把该图像渲染到 Canvas 中（填充正方形，绘制圆形，绘制三条线，然后绘制文本）并自己检测触摸事件，做一些数学来确定哪个部分被按下。Android 让这一切变得异常简单。

# windows-8 - WinRT 中的 System.Security.Cryptography.ProtectedMemory

> ID：11349832
> 
> 赞同：1
> 
> 时间：2012-07-05T17:55:02.930
> 
> 标签：windows-8, windows-runtime

`System.Security.Cryptography.ProtectedMemory`在 WinRT 中不可用。该功能是否在其他地方提供？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:24:40.353

是的。请参阅[DataProtectionProvider 类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.dataprotection.dataprotectionprovider.aspx)。Windows 8 中的情况发生了一些变化。这里有更多关于[Cryptography API: Next Generation (CNG)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375276%28v=vs.85%29.aspx)的内容，更具体地说是关于[CNG:DPAPI](http://msdn.microsoft.com/en-us/library/windows/desktop/Hh706794%28v=vs.85%29.aspx)的内容。[请参阅此 WinRT API 列表](http://msdn.microsoft.com/en-us/library/windows/apps/br211377.aspx)的“安全”部分，了解WinRT 中的所有特定加密（CNG 基本上是 CryptoAPI 以及 CNG:DPAPI）。

# jquery - Jquery animate from display none 第一次不起作用

> ID：11349835
> 
> 赞同：1
> 
> 时间：2012-07-05T17:55:18.943
> 
> 标签：jquery, jquery-animate

我有一个小块要制作动画。但我希望它从一个隐藏的位置开始，如下所示：

```
<span class="add_sit" style="height:18px; display:none"><input name="situacao"></span>
<img src="plus-circle-blue.png" class="picto" id="lnk_add_sit">

<script>
$(function(){
    $('#lnk_add_sit').css('cursor','pointer').click(function(e) {
        e.preventDefault();
        $('.add_sit').animate({width:'toggle'}, 'fast');
    });
});
</script> 
```

这在第一次单击时不会动画，只显示元素。第二次单击时，动画元素并更改为 display:nome，第三次单击时动画并更改为 display:inline-block; 等等。

只有第一个不起作用。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:01:11.563

一种方法是在加载时运行一次切换，而不是将显示设置为无：

```
<span class="add_sit" style="height:18px;"><input name="situacao"></span>
<img src="plus-circle-blue.png" class="picto" id="lnk_add_sit">

<script>
$(function(){
    var addSit = $('.add_sit');
    addSit.animate({width:'toggle'}, 0); // run it once to hide
    $('#lnk_add_sit').css('cursor','pointer').click(function(e) {
        e.preventDefault();
        addSit.animate({width:'toggle'}, 'fast');
    });
});
</script>​ 
```

这是一个小提琴（只需单击损坏的图像图标）：

[http://jsfiddle.net/c5h4D/](http://jsfiddle.net/c5h4D/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:14:55.270

你可以改变...

```
<span class="add_sit" style="height:18px; display:none"><input name="situacao"></span> 
```

...到...

```
<input name="situacao" class="add_sit" style="display: none"> 
```

...并以这种方式运行。

**看看这个[小提琴](http://jsfiddle.net/matthewbj/FPn9T/)**

您可以保留父 span 的高度，但请记住这是一个内联元素，除非您告诉它是or `<span>`，否则 height 属性不会影响它。`display:inline-block``display:block`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T17:58:53.080

我认为你应该给“add_sit”宽度，例如

```
<span class="add_sit" style="height:18px; display:none"> 
```

所以 jQuery 知道元素的宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T18:07:49.550

您正在为错误的元素设置动画，您应该为输入而不是没有设置宽度的父元素设置动画，并且关闭元素始终是一个好主意：

```
<span class="add_sit" style="height:18px;">
    <input name="situacao" id="myInput" style="display: none;"/>
</span>
<img src="plus-circle-blue.png" class="picto" id="lnk_add_sit" />

<script type="text/javascript">
$(function(){
    $('#lnk_add_sit').css('cursor','pointer').click(function() {
        $('#myInput').animate({width: 'toggle'}, 'fast');
    });
});
</script>​​​​​​​ 
```

[小提琴](http://jsfiddle.net/svMpD/)

# perl - 使用 Perl 从 2 个文件中逐行打开和读取

> ID：11349836
> 
> 赞同：2
> 
> 时间：2012-07-05T17:55:19.707
> 
> 标签：perl, file, printing

我正在尝试在 Perl 中逐行打印 2 个不同的文件。这是什么语法？代码：

```
#1\. Initialize: log file path and ref Log file path
use strict;
use warnings;
my $flagRef="true";
my $logPath="C:/ExecutionSDKTest_10.2.2/Logs/${ARGV[0]}.log";
my $refLogPath="C:/ExecutionSDKTest_10.2.2/Logs/${ARGV[1]}_Ref.properties.txt";
#print log file path followed by reflog path: P
#print "$logPath\n$refLogPath\n";

#2\. Traverse log file and refLog file to replace ALL instances of:
#"hr:min:sec" with "xx:xx:xx" 
open INLOG, $logPath or die $!;
open INREF, $refLogPath or die $!;

#equiv: >>$logLine=readline(*FHLOG);        
#$logLine= <FHLOG>;
#$refLine= <FHREF>;
while (<INLOG>) #syntax
{
   print "$_";
   #I'd like to print lines from INREF too! :)
   #Syntax?
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:43:11.750

这可以使用 paste(1) 轻松解决。说 a.txt 包含：

```
a1
a2
a3 
```

b.txt 包含：

```
b1
b2
b3 
```

然后：

```
$ paste -d '\n' a.txt b.txt
a1
b1
a2
b2
a3
b3
$ 
```

一个稍长的 Perl 单行代码来做同样的事情：

```
$ perl -e '@fhs=map { open my $fh, "<", $_; $fh } @ARGV; while (!$done) { $done=1; map { $v=<$_>; do { print $v; $done=0 } if (defined $v); } @fhs; }' a.txt b.txt
a1
b1
a2
b2
a3
b3
$ 
```

展开它并将其重写为适当的脚本留给读者作为练习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:15:57.380

这是一个简单的脚本，可以满足您的要求：

```
#!/usr/bin/perl
use strict;

open FILE1,'<file1';
open FILE2,'<file2';

my @arr1 = <FILE1>;
my @arr2 = <FILE2>;

if(@arr1 > @arr2) {
    print_arrs(\@arr1,\@arr2);
}
else {
    print_arrs(\@arr2,\@arr1);
}

sub print_arrs {
    my ($arr1,$arr2) = @_;
    for(my $k = 0; $k < @{$arr1}; $k++) {
        print @{$arr1}[$k];
        print @{$arr2}[$k] if @{$arr2}[$k];
    }
} 
```

它可能不是最优雅的解决方案，但它可以满足您的要求！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T22:43:50.070

通常更好的做法是`while`循环处理文件，而不是将它们全部读入内存。

该程序根据您的要求从两个文件中交替行。

```
use strict;
use warnings;

my $logPath = sprintf 'C:/ExecutionSDKTest_10.2.2/Logs/%s.log', shift;
my $refLogPath = sprintf 'C:/ExecutionSDKTest_10.2.2/Logs/%s_Ref.properties.txt', shift;

open my $inlog, '<', $logPath or die qq(Unable to open "$logPath": $!);
open my $inref, '<', $refLogPath or die qq(Unable to open "$refLogPath": $!);

do {
  print if defined($_ = <$inlog>);
  print if defined($_ = <$inref>);
} until eof $inlog and eof $inref; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T22:28:41.983

另一种更像问题中使用的方式的方式是：

```
use strict;
use warnings;

open( my $h1, '<', 'a.txt' );
open( my $h2, '<', 'b.txt' );

for(;;)
{
    my $x    = <$h1>;
    my $y    = <$h2>;
    defined($x) || defined($y)
        or last;
    print $x // '';
    print $y // '';
} 
```

# c - 如何强制 printf 在 c 中返回负值？

> ID：11349838
> 
> 赞同：2
> 
> 时间：2012-07-05T17:55:26.970
> 
> 标签：c, printf, return-value

我需要编写一个 C 程序，其中`printf`应该返回一个负值。它应该是这样的：

```
#include <stdio.h>
int main()
{
    int ret_val;
    ret_val = printf(something);
    printf("%d", ret_val);
} 
```

它的输出应该是一个负数（ret_val 应该是负数）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T17:59:23.643

调用编码错误：

```
int ret = 0;
ret = printf("%lc", (wint_t) -1);
printf("%d\n", ret); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:40:17.673

在`stdout`执行`printf`. 例如，以只读模式重新打开它

```
freopen("fff", "r", stdout); 
```

# iphone - 如何摆脱 UINavigationController（iOS 应用程序）中的灰色条

> ID：11349839
> 
> 赞同：1
> 
> 时间：2012-07-05T17:55:36.840
> 
> 标签：iphone, ios, user-interface

当用户单击按钮时，我正在使用此代码在我的 iOS 应用程序中打开一个页面，但是当用户这样做时，我在页面顶部看到一个灰色条。我怎样才能摆脱这个？

```
- (IBAction) colours:(id)sender   { 
    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:colourPickerView];
    [self presentViewController:navigationController animated:YES completion: nil];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:13:10.110

您可能指的是导航控制器创建的导航栏。

要隐藏它，只需使用它。

```
[navigationController.navigationBar setHidden:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:09:23.440

假设您指的是包含时钟和电池指示器的状态栏，您可以执行以下操作：

`[[UIApplication sharedApplication] setStatusBarHidden:NO animated:NO];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-16T06:08:29.373

对于 Swift 4，使用属性`isNavigationBarHidden`.

`navigationController.isNavigationBarHidden = true`

# c# - 如何从基于硒的单元测试项目中访问 Web 项目？

> ID：11349840
> 
> 赞同：0
> 
> 时间：2012-07-05T17:55:49.167
> 
> 标签：c#, asp.net, selenium

我的解决方案 Web 和 SeleniumTests 中有两个项目，这是单元测试项目。

我有以下方法的TestClass：

```
[TestMethod]
public void Demo1()
{
    // Create a new instance of the Firefox driver.

    // Notice that the remainder of the code relies on the interface, 
    // not the implementation.

    // Further note that other drivers (InternetExplorerDriver,
    // ChromeDriver, etc.) will require further configuration 
    // before this example will work. See the wiki pages for the
    // individual drivers at http://code.google.com/p/selenium/wiki
    // for further information.
    IWebDriver driver = new FirefoxDriver();

    //Notice navigation is slightly different than the Java version
    //This is because 'get' is a keyword in C#
    driver.Navigate().GoToUrl("http://www.google.com/");

    // Find the text input element by its name
    IWebElement query = driver.FindElement(By.Name("q"));

    // Enter something to search for
    query.SendKeys("Cheese");

    // Now submit the form. WebDriver will find the form for us from the element
    query.Submit();

    // Google's search is rendered dynamically with JavaScript.
    // Wait for the page to load, timeout after 10 seconds
    WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
    wait.Until((d) => { return d.Title.ToLower().StartsWith("cheese"); });

    // Should see: "Cheese - Google Search"
    System.Console.WriteLine("Page title is: " + driver.Title);

    //Close the browser
    driver.Quit();
} 
```

一切都很好，但在现实世界中，我不想访问 Google.com，而是访问 Web Project 的某些页面。有没有办法在不明确写为 url 的情况下访问它`driver.Navigate().GoToUrl("http://www.google.com/");`

例如，我想访问 Web Project 的 ~/Default.aspx。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:00:12.070

当您调用 GoToUrl() 时，您必须向其传递一个有效的 URL。“~/Default.aspx”不是有效的 HTTP URL。

# android - 如何通过 Android 中的编码将所有来电转移到语音信箱

> ID：11349842
> 
> 赞同：6
> 
> 时间：2012-07-05T17:55:54.723
> 
> 标签：android

如何通过Android中的编码将所有来电转移到语音信箱？我知道您可以为联系人设置一个标志，以确定是否应将呼叫转移到语音信箱。ContactsContract.RawContacts 有一个标志，指示应将呼叫转发到语音邮件

SEND_TO_VOICEMAIL 读/写 指示来自此原始联系人的呼叫是否应直接转发到语音邮件 ('1') 或不 ('0')。

但是我需要将所有来电发送到语音邮件。

谢谢，

# java - spring-roo maven 项目不支持特殊字符

> ID：11349847
> 
> 赞同：1
> 
> 时间：2012-07-05T17:56:05.247
> 
> 标签：java, maven, spring-mvc, encoding, spring-roo

我正在使用 Spring/Roo 和 maven 作为应用服务器，并且需要能够发布一些特殊字符，例如“ñ á é”。当我在服务器上打印这些字符并在控制台中显示它们时，它们显示为“？”，就像这样

```
 System.out.print("ñ á é");
  console print -> ? ? ? 
```

如何正确编码它们，我有另一个没有 maven 和 spring-roo 的项目，使用相同的 JVM，我没有这个问题

希望有人可以提前帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:45:38.430

我假设在 Roo 的 pom.xml 中可以找到以下部分：

```
<project>
  ...
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  ...
</project> 
```

# jquery - Jquery - 检测移动浏览器的最佳方法？（鼠标按下/触摸移动）

> ID：11349849
> 
> 赞同：3
> 
> 时间：2012-07-05T17:56:08.133
> 
> 标签：jquery, mobile, mousedown, touchmove

我有一些 Jquery 滚动条。

对于桌面浏览器，我使用这种结构：

```
holder.bind('mousedown.rotate', function(e){
    //some actions  
    doc.bind('mousemove.dragrotate', function(e){
        //some actions          
    });
    doc.bind('mouseup.dragrotate', function(){
        //some actions  
        doc.unbind('.dragrotate');
    });
}); 
```

对于移动浏览器，它以这种方式工作：

```
holder.bind('touchmove', function(jQueryEvent) {
//some actions
}); 
```

确定移动浏览器的最佳方法是什么？有没有办法在所有平台上使用相同的功能？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:02:13.513

您可以使用`navigator.userAgent`来检查用户正在使用的浏览器...以下代码将是一个很好的起点。

```
if (navigator.userAgent.match(/Android/i)
    || navigator.userAgent.match(/iPhone/i)
    || navigator.userAgent.match(/iPad/i)
    || navigator.userAgent.match(/iPod/i)
    || navigator.userAgent.match(/BlackBerry/i)
    || navigator.userAgent.match(/webOS/i)) {
    // Mobile browser specific code here
} 
```

[Detect Mobile Browsers](http://detectmobilebrowsers.com/)有一个 JS 文件，如果您想获得更具体的信息，可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:03:39.943

```
var is_touch_device = 'ontouchstart' in document.documentElement; 
```

[使用 Javascript 检测触摸屏设备](https://stackoverflow.com/questions/3974827/detecting-touch-screen-devices-with-javascript/6447935#6447935)

# salesforce - 是否可以在 Salesforce 中的同一对象上创建多对多关系？

> ID：11349850
> 
> 赞同：0
> 
> 时间：2012-07-05T17:56:16.777
> 
> 标签：salesforce, data-modeling

我们的客户之间有如下关系： 供应商-买家 意思是：我们向我们工作的行业的供应商和买家销售产品。

我正在尝试将我们客户（他们之间）的关系存储在销售人员中。这是一种多对多的关系。因此，在每个帐户上，我都希望有一个相关列表，列出它销售给的所有买家，以及它购买的卖家（在其他帐户上反之亦然）

我尝试使用连接对象 - 但我无法在同一对象（主要是帐户）上创建 2 个主从关系。

可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T23:29:00.537

连接对象将是解决这个问题的方法——为什么需要使用主从关系？在这种情况下，查找字段就足够了。

有时在这些情况下，您希望能够查看相关对象的完整列表，而不必在页面上显示两个可能的相关列表（您正在查看的对象被查找 A 引用的列表，以及被引用的对象列表） by B) — 在这种情况下，您可以在任何时候使用触发器来创建相反的联结记录。

**基本设置**

架构将如下所示：

```
 Account >-- lookup A -- Junction Object -- Lookup B --< Account 
```

您可以像这样插入两个联结记录：

```
 Lookup A      Lookup B
    ------------------------------
    J1  |  Account 1  |  Account 3
    J2  |  Account 2  |  Account 1 
```

使用此设置，在查看记录 A 时，您需要帐户页面上的两个相关列表才能同时查看 B 和 C。

**触发器设置**

如果您创建一个触发器来生成如上所述的自动倒数，您将在联结对象中拥有这些记录：

```
 Lookup A      Lookup B
    ------------------------------
    J1  |  Account 1  |  Account 3
    J2  |  Account 3  |  Account 1
    J3  |  Account 2  |  Account 1
    J4  |  Account 1  |  Account 2 
```

显然这会创建冗余数据，但现在您只需将一个相关联结对象列表添加到帐户页面布局即可查看所有相关记录。

# javascript - Raphael.js 中不需要的黑色轮廓

> ID：11349857
> 
> 赞同：1
> 
> 时间：2012-07-05T17:56:45.860
> 
> 标签：javascript, svg, raphael, vector-graphics

我正在尝试使用 raphael.js 创建一个动画菜单栏。它在 Firefox 中运行良好，但在 Chromium 中，图形周围会出现黑色轮廓。[在 Chrome 中查看这个 jsFiddle](http://jsfiddle.net/sTCSn/1/)。

随着图形的移动，它似乎也留下了黑色轮廓的痕迹，如下图所示。我尝试将`"stroke-width"`属性设置为，`0`但这似乎没有任何效果。

![拉斐尔黑色轮廓问题](../Images/423e7623dd367b36e14ae8a87d44ceb9.png)

任何有关此事的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:49:23.693

我遇到了这个问题，它存在于 Chrome 18 和 19 中。由于 Chrome 20 才刚刚推出几天，许多用户仍会安装以前的版本，因此仍然值得修复它。

在 Raphael 中，只需设置您的`stroke: none`或普通的 svg`element.setAttribute("stroke", "none")`

# eclipse - 如何在 Eclipse 4.2 中恢复旧颜色和外观？

> ID：11349858
> 
> 赞同：21
> 
> 时间：2012-07-05T17:56:45.967
> 
> 标签：eclipse, look-and-feel

我已经使用 Eclipse 3.x 几年了，虽然我在稳定性和性能方面遇到了一些问题，但我从来没有对 UI 本身有任何特别的烦恼......

现在新的闪亮的 Eclipse 4.2 已经出炉了，它感觉更稳定，也更活泼了，*但*我立刻对它的一些 UI 细节感到不喜欢：

*   我发现主工具栏的“弯曲”外观令人分心，在我看来，它与桌面上的任何其他元素都不能很好地混合。这可能只是一个颜色问题，但工具栏非常普遍，值得特别提及。

*   默认颜色不适用于我正在使用的笔记本电脑和两台台式电脑的 TFT/TN 显示器。各种渐变似乎完全消失了，标签分隔符几乎不可见，工具栏曲线看起来很奇怪。

*   几乎不可能分辨出哪个视图处于活动状态 - Eclipse 3.x 为活动选项卡标题使用了独特的蓝色。Juno 在所有非活动选项卡中使用颜色反转，这听起来可能更明显，但在我看来，这种效果会丢失，因为活动选项卡仍然处于灰色阴影中，这在新 UI 的整体灰色度中丢失了。 ..

那么，我如何才能恢复到更合理的外观和感觉呢？是否有某个主题选项会有所帮助？

PS.1：我在 Linux 上使用 Eclipse/GTK...

PS.2：Juno 中的所有颜色都发生了什么变化？

PS.3：我们可以保留新的启动画面吗？*那个*，我喜欢...

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-05T19:09:57.243

显然，Eclipse 开发人员很友好地给了我们一个简单的出路：

*   从`Window`菜单中选择`Preferences`。

*   展开对话树`General`中的类别。`Preferences`

*   单击`Appearance`子类别。

*   在窗口的左侧，`Theme`将出现一个下拉菜单 - 单击它。

*   `Classic`在`Theme`下拉菜单中选择。

*   最重要的是：您需要在此之后重新启动 Eclipse，即使没有出现该效果的提示。

这个设置在几篇博客文章中提到过，由于某种原因，直到我开始在 Google 中使用诸如“糟糕”和“丑陋”之类的术语时，我才找到它。觉得新主题难以忍受的好像不止我一个……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:55:01.547

[这里](http://blog.sangupta.com/2012/08/change-eclipse-juno-ui-to-match-eclipse.html)记录了另一种方法。

这比切换到经典主题更进一步，使它看起来像 3.x。

Juno L&F 的问题在于它在 1600x1050 的显示器上表现出色。但我的工作电脑有 2 个 1280x1-24 的屏幕。不太好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:11:16.077

我找到了一种让 Juno 看起来像 Indigo 的方法：我知道周围有新的花哨主题，但我不愿意花时间在上面。

我的解决方案是将 Indigo css_prefs 文件复制到 Juno 目录 `.metadata/.plugins/org.eclipse.core.runtime/.settings`

您必须查找的文件是 `org.eclipse.e4.ui.css.swt.theme.prefs`和`org.eclipse.wst.css.ui.prefs`

如果没有，可以从我的博客[http://www.venturin.net/2013/04/04/eclipse-juno-looks-ugly-in-linux-mint-14-nadia/下载](http://www.venturin.net/2013/04/04/eclipse-juno-looks-ugly-in-linux-mint-14-nadia/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-17T21:38:10.307

要在较新版本的 Eclipse 上恢复传统样式选项卡，请编辑`e4_classic_winxp.css`并更改`swt-simple: false;`为`swt-simple: true;`（假设您使用的是默认的 Classic 主题）。

在 Eclipse Kepler 上，此文件位于：

`eclipse\plugins\org.eclipse.platform_4.3.2.v20140221-1700\css`

在 Eclipse Mars 上，此文件位于：

`eclipse\plugins\org.eclipse.ui.themes_1.1.0.v20150511-0913\css`

# barcode - 移动条码阅读器——他们在哪里获取信息？

> ID：11349859
> 
> 赞同：1
> 
> 时间：2012-07-05T17:56:46.493
> 
> 标签：barcode

我几乎是个菜鸟。我一直想知道移动条形码阅读器是如何工作的。我在市场上看到过一些应用程序可以让你扫描条形码，然后显示相应的产品数据。

我想知道产品数据通常来自哪里。它通常来自内置数据库，还是应用程序倾向于连接到服务器以访问数据库？

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:06:36.380

条形码阅读器/扫描仪通过使用某种标准格式将数据传送到“阅读”代码的设备。今天通常使用两种类型的“条形码”：

*   [标准条形码](http://en.wikipedia.org/wiki/Barcode)-通常称为 UPS 代码
*   还有[二维码](http://en.wikipedia.org/wiki/QR_code)——在手机应用程序中很流行。

从开发人员的角度来看，两者的工作方式相同：

*   设备“读取”代码，代码被解释为代表一组数字（典型的标准条形码）或数字和字符（QR 码）。
*   解释的代码用于在某处的数据库中查找相关数据 - UPC 代码将具有一个用数字引用的项目数据库（就像您在 UPC 标签底部看到的数字一样），并且经常使用 QR 代码引用可以在任何 Web 浏览器中打开的 URL。

条码中的信息来自条码指向的引用数据——因此您无需在任何时候想要扫描代码时随身携带信息数据库——您只需能够连接到该信息源.

希望这可以帮助。

# android - 在 Eclipse 中编码 Android 时不会消失的错误

> ID：11349861
> 
> 赞同：0
> 
> 时间：2012-07-05T17:56:48.530
> 
> 标签：android

我是 Java/Android 编码的新手，我正在使用 eclipse 来做这件事。

我在“ ***b.setOnClickListener(new OnClickListener() ”行中收到此错误“******语法错误，插入”)“以完成 MethodInvocation*** ”。

 *并且“语法错误，在” ***})***行***插入“AssignmentOperator Expression”完成Assignment*** “； ”

 *以及“语法错误，在“ ***});*** ”之后的下一行“ ***} ”******中插入“;”来完成语句***“

 **我已经多次检查了代码，但我似乎无法弄清楚为什么错误不会消失。任何输入将不胜感激。

我已经尝试保存所有文件并重新启动 eclipse 并且没有任何变化。

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class Main extends Activity {
/**
 * called when the activity is first created
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button b = (Button) findViewById(R.id.button1);
    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            startActivity(new Intent(Main.this, Second.class));

        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:34:05.620

我有时会遇到类似的错误。一个简单的项目清理帮助（项目 - 清理）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:08:09.563

尝试：

```
b.setOnClickListener(new View.OnClickListener() {
rest of your code....

    @Override
    public void onClick(View v) {
        Intent i = new Intent(this, second.class)
        startActivity(i);

    } 
```****

# asp.net - 在 ASP.Net 网站中使用来自 VBScript 的变量

> ID：11349863
> 
> 赞同：0
> 
> 时间：2012-07-05T17:56:50.480
> 
> 标签：asp.net, web-applications, vbscript

我一天中的大部分时间都在研究这个问题，但找不到答案。我对stackoverflow比较陌生。问一些问题（我最近几天问了三个）有一定的礼仪吗？

无论如何，

这是代码隐藏文件中的代码。它执行一个脚本 systeminfo.vbs，并且工作正常。但是在脚本中我分配了一些变量。

```
Dim WshShell = CreateObject("WScript.Shell")
        WshShell.Run("wscript.exe c:\systeminfo.vbs") 
```

* * *

脚本

```
strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
& "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
Set colSettings = objWMIService.ExecQuery _
("Select * from Win32_OperatingSystem")
For Each objOperatingSystem in colSettings 
dim osName 
osName = objOperatingSystem.Name
Wscript.Echo "OS Name: " & objOperatingSystem.Name
dim osVer
osVer = objOperatingSystem.Version
Wscript.Echo "Version: " & objOperatingSystem.Version
Wscript.Echo "Service Pack: " & _
    objOperatingSystem.ServicePackMajorVersion _
        & "." & objOperatingSystem.ServicePackMinorVersion
Wscript.Echo "OS Name: " & objOperatingSystem.SizeStoredInPagingFiles
Next 
```

我想使用 osName 和 osVer 并将值放入 ASP 端的标签中。我知道 osName 和 osVer 是简单的例子，但我只需要弄清楚将变量从 VBScript 放入 ASP 的概念。我的客户每天使用多个 VBScript，我需要自动化这些脚本并生成报告，说明它是否失败。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T00:55:07.710

大卫，

作为一个 Stack Overflow 的新手，我很高兴能找到[Stack Exchange 网站的这个非常全面的常见问题解答](https://meta.stackexchange.com/questions/7931/faq-for-stack-exchange-sites "Stack Exchange 网站的常见问题解答")。请参阅第 3 个问题“我可以提出的问题数量是否有限制？” 来回答您的第一次询问。

关于您问题的核心，我同意@Ramhound 的观点，即使用日志文件在 WSH/VBScript 脚本和 ASP.NET 页面之间交换信息是一种可行的方法。

你需要的是`Scripting.FileSystemObject`. 这是一个全面的[WSH 参考](http://www.microsoft.com/en-us/download/details.aspx?id=2764 "Windows 脚本 5.6 文档")，作为可下载的 Windows 帮助文件。

***提示**：根据下载页面底部的建议，要取消阻止帮助页面，1) 右键单击`script56.chm`​​ ，2) 选择属性，然后 3) 单击“取消阻止”。*

您将`FileSystemObject`在“脚本运行时”标题下找到介绍。

**另一个建议**：由于您将在多用户环境中通过 ASP.NET 运行此脚本，您可能会发现您需要为每个用户或每个页面访问创建一个日志文件。如果是这种情况，您需要为每个日志文件生成一个临时文件名，以避免与其他日志文件发生名称冲突。要生成临时文件，请参阅`GetTempName`WSH 参考。

# c# - MvvmCross Monotouch - 无法在真正的 iPad 上绑定属性，但它可以在模拟器上运行

> ID：11349864
> 
> 赞同：2
> 
> 时间：2012-07-05T17:57:05.407
> 
> 标签：c#, xamarin.ios, mvvmcross

我正在使用 MvvmCross Monotouch。

这是实际上在 iOS 模拟器上运行良好的绑定代码。

```
{ this, "{'Title':{'Path':'NavigationBarTitle'}} 
```

但是，当我将它部署在我的真实 iPad (iPad 2) 上时，它不起作用。

```
Application Output:
===================
MvxBind: Warning:   0.69 Failed to create target binding for from NavigationBarTitle to Title 
```

我很高兴看到它可以在 iOS 模拟器上运行，但是有什么理由不能在真正的 iPad 上运行吗？

帕特里克

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T18:28:40.280

我见过这种类型的错误发生的一种情况是在发布版本中，monotouch 链接器优化了图像大小并删除了绑定所需的明显未使用的属性。

为了解决这个问题，我通常包含一段假代码来欺骗链接器包含所需的属性 - 例如，这是一个执行相同操作的 monodroid 示例文件：

[https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20BestSellers/BestSellers/BestSellers.Droid/LinkerIncludePlease.cs](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20BestSellers/BestSellers/BestSellers.Droid/LinkerIncludePlease.cs)

这是目前使用 mvvmcross 的缺点之一 - 它可能导致更大的二进制图像大小。

# c++ - 错误 c1083 找不到 DbManager.h 头文件或没有这样的目录

> ID：11349865
> 
> 赞同：-1
> 
> 时间：2012-07-05T17:57:06.667
> 
> 标签：c++

嗨，我正在使用 Visual Studio 2008。尝试连接 oracle 时出现以下错误错误 c1083 找不到 DbManager.h 头文件或没有此类目录。下面是我写的代码。// 与 DataBase.cpp 的连接：定义控制台应用程序的入口点。

```
#include "stdafx.h"
#define WIN32COMMON 
#include"DbManager.h"
#include<iostream>
#include <occi.h>

using namespace oracle::occi;
using namespace std; 

class DataBaseConnectionTest
{
public:
    void test()
    {
        const string sqlstring("select * from info ");
        try
        { 
            cout<<"Hello"<<'\n';
            DbManager *db=new DbManager(system);
            OracleServices *os=db->getoracleServices();
            Connection *conn=os->connection();
            Statement *st=conn->createStatement(sqlstring);
            ResultSet *rs=st->executeQuery();
            string name;
            while(rs->next())
            {
                name=rs->getString(1);
                cout<<name<<" "<<'\n';
            }
            st->closeResultSet(rs);
            conn->terminateStatement(st);
        }
        catch(SQLException& se)
        {
            cout<<"Error Occured"<<"\n";
        }

    }
};

void main()
{
    DataBaseConnectionTest *dbc=new DataBaseConnectionTest();
    dbc->test();
} 
```

请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:01:51.303

在磁盘上找到 DbManager.h。它可能位于 Oracle 客户端所在文件夹的深处。然后将该文件夹作为附加的包含文件夹添加到项目属性中。项目属性/配置属性/C.C++/General，将带有DbManager.h的文件夹添加到Additional Include目录。

您可能需要为 Oracle 客户端所在的静态库文件提供类似的处理。那在同一个窗口中，在链接器下。

# wcf - 在 localhost iis 上托管 wcf 服务

> ID：11349869
> 
> 赞同：0
> 
> 时间：2012-07-05T17:57:24.310
> 
> 标签：wcf, iis, localhost

我正在开发一个 Asp.Net 应用程序，它将与将托管在 IIS 上的本地计算机上的 WCF 服务进行交互。

为了使这些 wcf 服务被托管，用户在登录时必须拥有哪些权限？他们必须在机器上拥有管理员权限吗？

PS：我知道 WCF 服务不应该托管在单个本地机器上，所以请不要开始讨论这个问题。我只想知道登录用户需要具备哪些权限才能使 WCF 服务对应用程序可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:21:48.670

这实际上取决于您如何设置服务。您可以将网站配置为允许匿名访问，并将您的 WCF 绑定设置为具有无安全模式的 basicHttp 绑定。这应该允许任何登录用户运行该站点。如果这是您要查找的内容，这不会将用户限制为仅登录到本地计算机的用户。

您在这里处理两个级别的安全性。您将在 IIS 中定义您的访问权限以允许用户使用该站点。然后您将设置 WCF 服务以允许 IIS 站点访问它。如果您使用通过身份验证，那么您将需要授权单个用户，也许与本地组？否则，您需要授权 IIS 在其下运行站点的身份。因此，用户不需要是管理员，除非您在 IIS 或 WCF 中明确要求该角色。

# iphone - 从互联网下载的带有声音的本地通知 - iPhone

> ID：11349874
> 
> 赞同：1
> 
> 时间：2012-07-05T17:57:36.447
> 
> 标签：iphone, ios, cocoa-touch, cocoa, ios5

我想制作一个带有声音的本地推送通知，用户将从互联网下载。

问题是声音必须根据苹果文档保存在主包中。此外，我读到不可能在主 Bundle 上以编程方式编写。

有人对如何克服这个问题有任何想法吗？做出这样的事情不可能是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:06:25.663

它必须包含在应用程序包中的原因是可以使用它而无需在您的应用程序中运行任何代码，Apple 不必担心它会丢失。您无法在官方 App Store 中出售的应用程序上解决此问题。

# c# - Asp.net ImageButton 设置为可见 = false。仍然显示灰色边框

> ID：11349880
> 
> 赞同：0
> 
> 时间：2012-07-05T17:58:13.093
> 
> 标签：c#, asp.net, imagebutton

我正在使用 asp.net 图像按钮控件。在页面加载时，我将按钮设置为：

`imgbtn.visible = false;`

它没有显示图像。但是，它仍然会在按钮所在的位置显示一个灰色边框矩形。我也尝试过设置风格

`border : none;`

它仍然显示按钮应该位于的灰色矩形。

这是正常的吗？有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:17:27.487

如果您不关心保留边框，直接在您的 ASP.net 页面中，

*   像这样设置它：

    ```
    <asp:Image ID="image1" runat="server" Border="0" /> 
    ```

*   或者;

    ```
    <asp:Image ID="image1" runat="server" BorderStyle="None" BorderWidth="0" /> 
    ```

如果您想保留边框，只需`visible = false;`在代码隐藏中设置图像时执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:52:21.153

如果您使用 javascript 隐藏图像，请尝试将 css 样式设置`display`为`'none'`：

```
imgbtn.style.display = 'none'; 
```

# c++ - map::insert is breaking

> ID：11349883
> 
> 赞同：-1
> 
> 时间：2012-07-05T17:58:21.400
> 
> 标签：c++, stl, map

My map::insert method is breaking, without giving me a lot of useful information.

```
typedef map<wstring, int> IndexLookupMap;
static IndexLookupMap indexLookup;
static vector<LPDIRECT3DTEXTURE9> textures;

extern "C" void EXPORT_API LoadTexture(const wchar_t* file, int* index, unsigned char* data) {

    wstring key(file);

    if(indexLookup.size() > 0)
    {
        IndexLookupMap::iterator it = indexLookup.find(key);

        if(it == indexLookup.end())
        {
            //not found, load it
            LPDIRECT3DTEXTURE9 pTexture;
            D3DXCreateTextureFromFile(g_D3D9Device, file, &pTexture);
            textures.push_back(pTexture);
            *index = textures.size() - 1;
            D3DLOCKED_RECT locked;
            pTexture->LockRect(0, &locked, NULL, 0);

            data = reinterpret_cast<unsigned char*>(locked.pBits);

            pTexture->UnlockRect(0);

            indexLookup.insert(IndexLookupMap::value_type(key, *index));
        }
        else
        {
            //found, get it
            *index = it->second;
            textures.at(*index);
        }
    }
    else
    {
        //not found, load it
        LPDIRECT3DTEXTURE9 pTexture;
        D3DXCreateTextureFromFile(g_D3D9Device, file, &pTexture);
        textures.push_back(pTexture);
        *index = textures.size() - 1;
        D3DLOCKED_RECT locked;
        pTexture->LockRect(0, &locked, NULL, 0);

        data = reinterpret_cast<unsigned char*>(locked.pBits);

        pTexture->UnlockRect(0);

        indexLookup.insert(IndexLookupMap::value_type(key, *index)); //breaks here
    }
} 
```

It is breaking on:

```
indexLookup.insert(IndexLookupMap::value_type(key, *index)); 
```

The actual break occurs in xtree:

```
_Nodeptr _Trynode = _Root(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:31:11.580

Based on the minimal information provided I suspect that `LoadTexture` is being called before your `map` is constructed, causing it to be in an invalid state.

# powershell - 使用 powershell 获取当前登录的用户以将快捷方式添加到桌面

> ID：11349885
> 
> 赞同：2
> 
> 时间：2012-07-05T17:58:31.600
> 
> 标签：powershell, powershell-2.0

我有一个使用 LANDesk 部署的脚本，在该脚本中，它调用了一个 powershell 脚本来为用户桌面上的网络文件夹添加快捷方式。LANDesk 登录以使用本地计算机帐户运行脚本，但我不希望将快捷方式放在该桌面上，而是放在当前登录用户的桌面上。有没有办法在 powershell 中执行此操作？

如果您以登录用户身份运行脚本，这是我添加快捷方式的代码（不能以用户身份运行，因为他们没有管理员权限）

```
$wshshell = new-object -comobject WScript.Shell
$Ink = $wshshell.CreateShortcut("$home\Desktop\PI_Users.lnk")
$Ink.TargetPath = "\\htntfs04\PI_Users"
$Ink.Save() 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:39:54.183

如果您正在使用 LANDesk，并且您正在使用一个包来分发脚本，您可以选择作为默认的*LocalSystem或作为**当前用户的帐户*来执行脚本。

只需打开包的属性，转到 Accounts 并选择*"Current user's account"*。如果没有用户登录到机器，任务将失败。

但是，如果我理解正确，问题是不允许用户在自己的桌面上创建链接？如果是这样，此解决方案将不起作用，并且任务无论如何都会失败！

我经常使用的另一种方法是执行一个脚本，该脚本循环遍历所有本地配置文件并在每个用户的桌面上创建一个链接。如果您可以使用 WSH 脚本而不是 powershell 脚本，您可以使用如下内容：

```
Const HKEY_LOCAL_MACHINE = &H80000002

Set objRegistry = GetObject("winmgmts:\\.\root\default:StdRegProv")
Set ws = CreateObject("Wscript.Shell")

strKeyPath = "SOFTWARE\Microsoft\Windows NT\CurrentVersion\ProfileList"
objRegistry.EnumKey HKEY_LOCAL_MACHINE, strKeyPath, arrSubkeys

For Each objSubkey In arrSubkeys
  strValueName = "ProfileImagePath"
  strSubPath = strKeyPath & "\" & objSubkey
  objRegistry.GetExpandedStringValue HKEY_LOCAL_MACHINE, strSubPath, strValueName, strProfile

  If Left(strProfile, Len(ws.ExpandEnvironmentStrings("%windir%"))) <> ws.ExpandEnvironmentStrings("%windir%") Then
    Set objShtCut = ws.CreateShortcut(strProfile & "\Desktop\PI_Users.lnk")
    objShtCut.TargetPath = "\\htntfs04\PI_Users"
    objShtCut.Save
    Set objShtCut = Nothing
  End If
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:51:52.387

你不能`[Environment]::GetFolderPath("Desktop")`用来获取当前用户的桌面路径吗？

# paypal - `Notify_URL` 是否会覆盖之前设置的 IPN 数据

> ID：11349889
> 
> 赞同：4
> 
> 时间：2012-07-05T17:58:38.100
> 
> 标签：paypal, paypal-ipn

我正在为一个网站构建一个 IPN 扩展，但目前使用的购物车的服务提供商有选项`Notify_URL`集（在 paypal 提交表单中）用于它自己的内部处理（这有点缺陷）。如果在 PayPal 卖家资料中设置了 IPN URL，将同时使用还是只使用一个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T18:03:10.910

在这个问题上似乎有些混乱。有些人声称两者都会起作用。他们声称它应该在这种情况下通知两者。尽管看起来对于基于订阅的付款，PayPal 只会使用您在 PayPal 个人资料中设置的 IPN URL。

但是，在官方 PayPal 文档中：

> 您可以为特定付款指定 IPN 侦听器；这是接收与自适应支付相关的 IPN 的唯一方式。在这种情况下，PayPal 会将 IPN 消息发送到特定按钮或 API 操作的通知 URL 中指定的侦听器，而不是您的配置文件中指定的侦听器。

这似乎表明 notify_url 将覆盖配置文件设置。我认为最好遵循 PayPal 文档，然后一些可能会起作用的东西，即使它不打算这样做。

资料来源：[贝宝文档](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNSetup)

还值得注意的是，如果您在 PayPal 帐户中禁用 IPN，则两者都不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-19T01:37:32.130

我认为自上次回答以来[文档](https://developer.paypal.com/docs/classic/ipn/integration-guide/IPNSetup/)可能已经更改。我也很好奇什么是优先的：`notify_url`或者你的个人资料的IPN url。从文档：

> 或者，您可以覆盖 URL 来为特定付款指定另一个侦听器。

这里的措辞有点混乱，但似乎即使您在个人资料中关闭了 IPN，如果您`notify_url`在付款中传递了一个值，它仍然会被发送。我加粗的：

> The IPN message will always be sent to your notification URL unless receiving IPN messages has been disabled. **Even though you have not enabled receiving IPN messages in your Profile or you have reset your preference by turning off IPN messages, PayPal still sends IPN messages to the notification URL you specify for a specific payment**.

I have seen this work first hand, which is why I investigated it more to make sure it was working correctly. My IPN History told me "your IPN notifications are turned off," prompting me with a link to turn it on. However, below that was a history. The reason was because I was passing in my desired `notify_url` with the transaction.

So @johnmadrak's statement, "It's also worth noting that if you disable IPNs in your PayPal account, neither will work," is actually not true. Even if you've turned the setting off in your profile, passing in a `notify_url` still works.

# jquery - 在 Codeigniter 的标题视图中加载时 JavaScript 不起作用

> ID：11349891
> 
> 赞同：-1
> 
> 时间：2012-07-05T17:58:39.710
> 
> 标签：jquery, codeigniter, twitter-bootstrap

我正在使用 Twitter Bootstrap 和 Codeigniter。我也在使用模板系统。

在标题视图中，我同时加载了 jquery.min.js 和 bootstrap.min.js 并找到了路径，因为我可以在查看源代码时单击并查看代码。

在我的控制器中，我有以下内容来生成视图：

```
$this->template->set_partial('header', 'layouts/admin_header');
$this->template->set_partial('footer', 'layouts/admin_footer');
$this->template->set_partial('sidebar', 'layouts/admin_sidebar');
$this->template->build('admin/category/order', $this->data); 
```

在标题布局视图中，我有：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="<?=base_url();?>assets/admin/js/bootstrap.min.js"></script> 
```

现在，在 order.php 视图中，如果我只有以下内容，则该按钮不起作用：

```
<script type="text/javascript"> 

$(document).ready(function(){
  $('#button').button();

  $('#button').click(function() {
    $(this).button('loading');
  });  
});

</script>

<button class="btn" id="button" data-text-loading="Loading...">Press Me</button> 
```

如果我将视图更改为此，它确实有效（唯一的更改是我将 bootstrap.min.js 从标题重复到 jQuery 上方的实际视图中）：

```
<script src="<?=base_url();?>assets/admin/js/bootstrap.min.js"></script>

<script type="text/javascript"> 

$(document).ready(function(){
  $('#button').button();

  $('#button').click(function() {
    $(this).button('loading');
  });  
});

</script>

<button class="btn" id="button" data-text-loading="Loading...">Press Me</button> 
```

如果我在生成整个页面后查看源代码，则会发现 bootstrap.min.js 两次，一次在标题中，一次在按钮 jQuery 上方。

我可以将其他 jQuery 放入此页面，它工作得非常好。只有 Twitter Bootstrap javascript 有问题。

这让我绝对发疯，有谁知道它为什么这样做？我真的不想将 bootstrap.min.js 添加到每个单独的视图中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:37:10.677

我在 bootstrap.min.js 之后加载了 jquery-ui-1.8.21.custom.min.js。显然有些冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:47:47.863

尝试声明：

`<script src="<?=base_url();?>assets/admin/js/bootstrap.min.js"></script>`

就在之前（在同一个文件中，不要将它放在 head 标记中，因为您使用的是 codeigniter 模板）

```
<script type="text/javascript"> 

    $(document).ready(function(){
        $('#button').button();

        $('#button').click(function() {
            $(this).button('loading');
        });
    });

</script> 
```

这应该有效。

# php - 在 CodeIgniter 类更改视图加载顺序之前使用的 include 函数

> ID：11349900
> 
> 赞同：0
> 
> 时间：2012-07-05T17:59:12.380
> 
> 标签：php, codeigniter

好的，所以我的代码如下所示：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

require_once("/application/controllers/base/genericPageC.php");

class TutorialsC extends GenericPageC {
    function __construct() {
        parent::__construct();
    }

    protected function loadPage($args) {
        // ...
    }
}

/* End of file tutorialsC.php */
/* Location: ./application/controllers/pages/tutorialsC.php */ 
```

该`require_once`声明存在，因此我可以拥有我的继承权。现在，当我没有`require_once`声明并且我的所有代码都在一个单一的、庞大的、格式错误的控制器中时，一切正常。但是，一旦我添加了`require_once`，我添加了`header.php`所有脚本和 CSS 的视图就会加载到`<body>`标签内，而不是`<head>`标签内。这会对我的网站样式产生轻微但令人讨厌的影响。根据我自己的了解，我认为加载视图的顺序正在改变。任何想法如何解决它？

更新：

仍然不知道是什么导致了问题，但这是我所做的：我去了 ./system/core/CodeIgniter.php 并更改了以下行：

include(APPPATH.'controllers/'.$RTR->fetch_directory().$RTR->fetch_class().'.php');

至：

ob_start();
include(APPPATH.'controllers/'.$RTR->fetch_directory().$RTR->fetch_class().'.php');
ob_end_clean();

现在它按应有的方式加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:03:13.713

如果您需要创建跨多个控制器使用的方法，我认为您要做的是创建一个[库](http://codeigniter.com/user_guide/general/creating_libraries.html)，而不是尝试要求或包含您的其他控制器。

# c# - 如何从扫描的心电图图像中获取值？

> ID：11349920
> 
> 赞同：1
> 
> 时间：2012-07-05T18:00:05.120
> 
> 标签：c#, image, multidimensional-array, graphic, waveform

在我的项目中，我必须将使用普通相机 (jpeg) 拍摄的心电图图像数字化。例如，我有以下相机捕获的图像：我正在使用 c# 来实现这个

![在此处输入图像描述](../Images/a333bcae7aaf5c2c88bdb4375618043b.png)

然后我将此图像转换为灰度图像，然后应用阈值将波与网格分开。最后从图像中删除不必要的东西，最终输出是这样的

![在此处输入图像描述](../Images/5e1dfa1f54778c0ec92462ddb39e0ffb.png)

现在我想使用这些段之间的像素计数来获取波纹管图像中提到的值。最好的方法是什么？

![在此处输入图像描述](../Images/43db554183a35ff42a759adbab503678.png)

我想要得到的主要是 QR 波的高度和两个 Q 波之间的长度。（像素值）

如何实现下面的代码来获取这些值并将它们存储在数组中

```
public void black(Bitmap bmp)
{
            Color[,] results = new Color[bmp.Width, bmp.Height];
            for (int i = 0; i < bmp.Height; i++)
            {
                for (int j = 0; j < bmp.Width; j++)
                {
                    Color col = bmp.GetPixel(j, i);
                    if (col.R == 0) 
                    {
                        results[j, i] = bmp.GetPixel(j, i);

                    }
           }
      }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T01:11:32.390

有关该问题的理论（即无源代码）概述，请阅读[Syeda-Mahmood、Beymer 和 Wang “基于形状的心电图记录匹配”的](http://www.almaden.ibm.com/cs/people/stf/papers/embc07.pdf)第 III 节。

基本上，您的黑白图像是一个数据点数组：x 轴只是图像的宽度（以像素为单位），y 轴是通过平均每个 x 位置的黑色像素的 y 位置获得的（不需要如果黑线只有一个像素高）。

为了使数据更易于管理，您可以通过从图像中选择每第 n 个 x 位置来进行下采样。您可能希望坚持使用标准 ECG 采样率，以确保您不会错过重要数据；现代心电图硬件的采样频率通常为 1000Hz，而 MIT 在 Physionet 上的 QRS 数据库中的数据为 250Hz 或 360Hz。使用其中一种速率意味着扫描图像中每秒（25 毫米）的数据读取 1000、250 或 360 个像素。

# iphone - 异步 NSURLConnection 因类实例的自动错误类型而失败

> ID：11349923
> 
> 赞同：0
> 
> 时间：2012-07-05T18:00:12.550
> 
> 标签：iphone, multithreading, cocoa-touch, nsurlconnection

我正在创建一个具有字典作为属性的追逐类的单个实例。当我向字典中添加元素时，我可以看到字典键数的变化。但是当我访问时，它会触发崩溃，并显示如下消息：

> [__NSCFString 连接:didReceiveData:];
> 
> [__NSCFArray reqmap]; ETC..

基本上，我将请求 url 与`NSData`实例映射，以便可以异步地正确映射和附加响应。

代码：

```
-(id)init
{
    self = [super init];
    if (self) 
    {
        self.cacheDict = [[NSMutableDictionary alloc] initWithCapacity:20];
        self.reqmap = [[NSMutableDictionary alloc] initWithCapacity:20];
    }
    return self;
}

+ (CommunityImageCache*)getSharedCommunityImageCache
{
    if (sharedCommunityImageCacheInstance == nil) {
        sharedCommunityImageCacheInstance = [[super allocWithZone:NULL] init];
    }
    return sharedCommunityImageCacheInstance;
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    NSString* keyurl = [[[connection currentRequest] URL] absoluteString];
 //crash point >>>>
    NSMutableData* tempdata = (NSMutableData*)[self.reqmap objectForKey:keyurl];
    [tempdata appendData:data];

}

- (void)connectionDidFinishLoading:(NSURLConnection*)theConnection 
{
    NSString* keyurl = [[[theConnection currentRequest] URL] absoluteString];
    NSMutableData* tempdata = [self.reqmap objectForKey:keyurl];
    UIImage* img = [UIImage imageWithData:tempdata];  
    [self.cacheDict setObject:img forKey:[@"image:\\\\public\\" stringByAppendingString:keyurl]];
    [self.reqmap removeObjectForKey:keyurl];
}

-(UIImage *)getImageFromUrl:(NSString *)url
{
    UIImage* image = nil;

        image = [self.cacheDict objectForKey:url];
        if (!image) 
        {
            image = [UIImage imageNamed:@"defaultProfile.png"];
            //dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{

            NSString* localUrl = [NSString stringWithString:url];
            NSString* finurl = [localUrl substringFromIndex:[@"image:\\\\public\\" length]]; 
            UIImage* img = nil;
            NSURLRequest* request = [NSURLRequest requestWithURL:[NSURL URLWithString:finurl]
                                                     cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                 timeoutInterval:60.0];

            NSMutableData* data = [[NSMutableData alloc] init];
            NSURLConnection* connect = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];
            NSString* keyurl = [[[connect currentRequest] URL] absoluteString];
            [self.reqmap setObject:data forKey:keyurl];
}
} 
```

急需，提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:23:55.507

好吧，reqmap 应该包含 NSMutableData 对象，对吧？他们需要实例化，例如： [self.reqmap setValue:[[NSMutableData alloc] init] forKey:@"TheKey"];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:18:57.700

您还应该实施

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
```

当你使用 NSURLConnection 时。我在上面的代码中没有看到它。然后你应该分配/重置这个函数中的数据。

您看到的实际错误是什么？听起来 reqmap 不是 NSDictionary（尽管它在您上面的代码中），或者您正在检索的对象不是 NSMutableData。

总的来说，实施：

```
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
```

# colors - 如何：为多轴图表指定颜色？

> ID：11349927
> 
> 赞同：0
> 
> 时间：2012-07-05T18:00:20.130
> 
> 标签：colors, highcharts, lines, axes

我的图表显示得很好，但两条线的颜色相同。如何为两条线指定不同的颜色？到目前为止，这是我的代码（片段）：

```
config.pointIndex = null;
  config.areaPoints = new Array();
  config.areaPoints[0] = pointsopens;
  config.areaPoints[1] = pointsclicks;
  var plotLinesopen = createPlotlines(pointsopens);
  var plotLinesclick = createPlotlines(pointsclicks);
  var options = {
     chart : { renderTo : 'areaChart' },
     colors: [
        '#4572A7',
        '#AA4643'
        ],
     xAxis: {
        plotLines1: plotLinesopen,
        plotLines2: plotLinesclick
     },
     series : [ data.pointsopens, data.pointsclicks ]
  };
  if (length > 100) {
     options.plotOptions = {
        area : {
           lineWidth: 1,
           marker : { radius : 1 }

        }
     };
  }
  options = jQuery.extend(true, {}, areaChartDefault, options);
  charts.area = new Highcharts.Chart(options); 
```

谢谢你。

PS，我的代码现在是：

```
 config.pointIndex = null;
        config.areaPoints = new Array();
        config.areaPoints[0] = pointsopens;
        config.areaPoints[1] = pointsclicks;
        var plotLinesopen = createPlotlines(pointsopens, '#AAAAAA');
        var plotLinesclick = createPlotlines(pointsclicks, '#DDDDDD');

        var options = {
            chart : { renderTo : 'areaChart' },
            xAxis: {
                plotLines: [plotLinesopen, plotLinesclick]
            },
            series : [ data.pointsopens, data.pointsclicks ]
        };
        if (length > 100) {
            options.plotOptions = {
                area : {
                    lineWidth: 1,
                    marker : { radius : 1 }

                }
            };
        }
        options = jQuery.extend(true, {}, areaChartDefault, options);
        charts.area = new Highcharts.Chart(options);
```

但它仍然给了我两条深蓝色的情节线。createPlotlines 函数如下所示：

```
function createPlotlines(points, colour) {
    // Create plotlines from point data
    colour = typeof colour !== 'undefined' ? colour : '#CCCCCC';
    alert ('colour=='+colour);
    var plotLines = [];
    var middleYval = 0;
    for (var i in points) {
        middleYval = Math.max(middleYval, points[i].y);
        if (points[i].l) { // l property is true if label should be on for this point
            plotLines.push({
                color: colour,
                id: 'plotline'+i,
                value: points[i].x,
                width: 1,

            });
        }
    }
    return plotLines;
}
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:19:13.963

如果您查看[参考资料](http://www.highcharts.com/ref/#chart)，您会发现没有 attr named `colors`。
另一个问题是没有 attr `plotLines1`，`plotLines2`你可以[在这里看到](http://www.highcharts.com/ref/#xAxis-plotLines)

**解决方案**：如果要更改绘图线颜色，则必须通过数组传递绘图线，如下所示并设置它们的颜色：

```
var options = {
    chart : { renderTo : 'areaChart' },
    xAxis: {
        plotLines: [{
            color: '#4572A7', // 
            width: 2,
            value: 5.5,
            id: 'plotline-1'
        }, {
            color: '#AA4643',
            width: 2,
            value: 8.5,
            id: 'plotline-2'
        }]
    },
    series : [ data.pointsopens, data.pointsclicks ]
}; 
```

[**活生生的例子**](http://jsfiddle.net/6wrJ6/)

**Update1**：您在此函数中返回一个对象数组，`createPlotlines`然后将此数组放入其他数组中。那就是问题所在。
将您的功能替换为以下内容：

```
function createPlotlines(points, colour) {
    // Create plotlines from point data
    colour = colour || '#CCCCCC';
    var middleYval = 0;
    for (var i in points) {
        middleYval = Math.max(middleYval, points[i].y);
        if (points[i].l) { // l property is true if label should be on for this point
            return {
                color: colour,
                id: 'plotline'+i,
                value: points[i].x,
                width: 1,

            };
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:03:59.113

您是说 xAxis 和 yAxis 的颜色不同吗？我只看到这会成为其中之一。您绝对可以独立设置轴线的颜色。看到这个：[例子](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/yaxis/linecolor/)，[参考](http://www.highcharts.com/ref/#xAxis--lineColor)

编辑：对于 plotLines 你可以使用[这个](http://www.highcharts.com/ref/#yAxis-plotLines)： [demo](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/xaxis/plotlines-color/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T13:43:32.967

您可以将 plotLines 更改为以单行为目标。

或者你可以改变整个 Yaxis 或 Xaxis

```
xAxis: {
            type: 'datetime',
            gridLineColor: '#EEEEEE'
        },
        yAxis: {
            title: {
                text: 'Calls'
            },
            gridLineColor: '#EEEEEE'
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T17:53:47.157

好的，这是我需要的，lineColor：

```
 $data = array(
    "name" => $name,
    "color" => '#00FFFF',
    "lineColor"=> '#00FFFF',
    "data" => $rows
); 
```

该代码位于我的 php.ini 中名为 compileChartData 的本地函数中。

感谢您的努力，并对混淆感到抱歉。

# mysql - 需要帮助调整 sql 查询

> ID：11349929
> 
> 赞同：5
> 
> 时间：2012-07-05T18:00:29.830
> 
> 标签：mysql, sql, performance

我的 mysql 数据库在尝试执行特别慢的查询时变得很耗 CPU。当我解释时，mysql说“使用where；使用临时；使用文件排序”。请帮助破译和解决这个难题。

表结构：

```
CREATE TABLE `topsources` (
  `USER_ID` varchar(255) NOT NULL,
   `UPDATED_TIME` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `URL_ID` int(11) NOT NULL,
  `SOURCE_SLUG` varchar(100) NOT NULL,
  `FEED_PAGE_URL` varchar(255) NOT NULL,
  `CATEGORY_SLUG` varchar(100) NOT NULL,
  `REFERRER` varchar(2048) DEFAULT NULL,
  PRIMARY KEY (`USER_ID`,`URL_ID`),
  KEY `USER_ID` (`USER_ID`),
  KEY `FEED_PAGE_URL` (`FEED_PAGE_URL`),
  KEY `SOURCE_SLUG` (`SOURCE_SLUG`),
  KEY `CATEGORY_SLUG` (`CATEGORY_SLUG`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

该表有 370K 行......有时更高。下面的查询需要 10 多秒。

```
SELECT topsources.SOURCE_SLUG, COUNT(topsources.SOURCE_SLUG) AS VIEW_COUNT
FROM topsources
WHERE CATEGORY_SLUG = '/newssource'
GROUP BY topsources.SOURCE_SLUG
HAVING MAX(CASE WHEN topsources.USER_ID = 'xxxx' THEN 1 ELSE 0 END) = 0
ORDER BY VIEW_COUNT DESC; 
```

这是扩展解释：

```
+----+-------------+------------+------+---------------+---------------+---------+-------+--------+----------+----------------------------------------------+
| id | select_type | table      | type | possible_keys | key           | key_len | ref   | rows   | filtered | Extra                                        |
+----+-------------+------------+------+---------------+---------------+---------+-------+--------+----------+----------------------------------------------+
|  1 | SIMPLE      | topsources | ref  | CATEGORY_SLUG | CATEGORY_SLUG | 302     | const | 160790 |   100.00 | Using where; Using temporary; Using filesort |
+----+-------------+------------+------+---------------+---- 
```

------------+---------+--------+--------+---------+ --------------------------------------------------------------+

有没有办法改进这个查询？另外，是否有任何 mysql 设置可以帮助减少 CPU 负载？我可以分配更多可用的内存在我的服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:11:16.560

最有可能帮助查询的是 CATEGORY_SLUG 上的索引，尤其是当它采用许多值时。（也就是说，如果查询是高度选择性的。）查询需要读取整个表才能获得结果——尽管 10 秒似乎很长。

我认为 HAVING 子句不会影响查询处理。

如果连续运行两次，查询是否需要同样长的时间？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:27:24.260

如果有很多行符合您的 CATEGORY_SLUG 标准，那么可能很难做到这一点，但这会更快吗？

```
SELECT ts.SOURCE_SLUG, COUNT(ts.SOURCE_SLUG) AS VIEW_COUNT 
FROM topsources ts
WHERE ts.CATEGORY_SLUG = '/newssource' 
  AND NOT EXISTS(SELECT 1 FROM topsources ts2
                 WHERE ts2.CATEGORY_SLUG = '/newssource'
                   AND ts.SOURCE_SLUG = TS2.SOURCE_SLUG
                   AND ts2.USER_ID = 'xxxx')
GROUP BY ts.SOURCE_SLUG 
ORDER BY VIEW_COUNT DESC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:23:07.510

当您不能自己对数据进行查询时，总是很难优化某些东西，但如果我自己做，这将是我的第一次尝试：

```
SELECT t.SOURCE_SLUG, COUNT(t.SOURCE_SLUG) AS VIEW_COUNT
FROM topsources t
LEFT JOIN (
    SELECT SOURCE_SLUG
    FROM topsources t
    WHERE CATEGORY_SLUG = '/newssource'
    AND USER_ID = 'xxx'
    GROUP BY .SOURCE_SLUG
) x USING (SOURCE_SLUG)
WHERE t.CATEGORY_SLUG = '/newssource'
AND x.SOURCE_SLUG IS NULL
GROUP BY t.SOURCE_SLUG
ORDER BY VIEW_COUNT DESC; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T18:07:59.027

如果我读到我的 sql 更改正确性，那应该可以解决问题

```
SELECT topsources.SOURCE_SLUG, COUNT(topsources.SOURCE_SLUG) AS VIEW_COUNT
FROM topsources
WHERE CATEGORY_SLUG = '/newssource' and 
    topsources.SOURCE_SLUG not in (
        select distinct SOURCE_SLUG 
        from topsources 
        where USER_ID = 'xxxx'
        )
GROUP BY topsources.SOURCE_SLUG
ORDER BY VIEW_COUNT DESC; 
```

# java - 仅“静态”的方法签名如何工作？

> ID：11349930
> 
> 赞同：1
> 
> 时间：2012-07-05T18:00:29.973
> 
> 标签：java, static

> **可能重复：**
> [Java 中的静态初始化程序](https://stackoverflow.com/questions/335311/static-initializer-in-java)

我有几年的 Java 经验，但我最近遇到了一些我以前从未见过的东西：

```
public class Project{
...
static{
  initDataTypeMapping();
}
...
} 
```

这个方法签名是如何工作的？这实际上甚至在技术上是一种方法吗？我想知道为什么不简单地将方法调用`initDataTypeMapping()`放在构造函数中。只是想增加我的理解，所以我不会把事情搞砸。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T18:02:14.937

这称为[静态初始化程序](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)。

块中的代码在`static { }`类加载器首次加载类时运行（通常但不总是，当引用该类的代码首次加载/执行时），并保证在线程安全中运行方式。

另请参阅[此问题](https://stackoverflow.com/questions/335311/static-initializer-in-java)。

# facebook - 一旦offline_access被删除，请求它会导致错误吗？

> ID：11349931
> 
> 赞同：1
> 
> 时间：2012-07-05T18:00:31.547
> 
> 标签：facebook, oauth, facebook-authentication, facebook-ios-sdk

根据开发者路线图，offline_access 计划于 10 月 3 日移除：[https ://developers.facebook.com/roadmap/](https://developers.facebook.com/roadmap/)

我目前正在为我的 iOS 应用程序请求 offline_access。因为这个应用程序是通过应用商店部署的原生 iOS 应用程序，所以我无法追溯控制它的行为，除非用户更新（不像可以随时修改的网络应用程序）。我当然可以发布不请求权限的应用程序更新，*但是仍然拥有请求权限的旧版本的用户会看到错误，还是身份验证对话框会忽略 offline_access 范围？*

注意：如果我将“foobar”之类的随机垃圾权限放入范围列表，则对话框肯定会出现错误。因此我担心 - 是否会在 10 月 3 日之后要求 offline_access 中断应用程序？

AFAICS 在弃用文档页面上对这个问题没有明确的答案：http: [//developers.facebook.com/roadmap/offline-access-removal/](http://developers.facebook.com/roadmap/offline-access-removal/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:39:21.067

您可以通过从您的应用设置中进行迁移来测试它。通过我的测试，它表明即使您在范围内有参数，也没有显示任何错误。所以别担心，开心就好:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:29:52.743

未来是未知的。众所周知，并且您可能不熟悉的是，应用程序现在会自动获得 60 天的离线访问权限，每次都会充电

# c# - 允许在 Firefox 中禁用复选框

> ID：11349934
> 
> 赞同：0
> 
> 时间：2012-07-05T18:00:46.157
> 
> 标签：c#, asp.net, cross-browser

所以我现在正在研究跨浏览器代码。我有复选框，在调用某些函数后禁用，在 IE 中但在 Firefox 和 Chrome 中没有。

我查看了代码，发现当在 Firefox 中呈现时，禁用的标签被放置在 IE 上，`td`这就是它在 IE 中而不是其他浏览器中工作的原因。

asp.net 中有没有办法禁用单元格或复选框并让它在 Firefox、Chrome 等中正确呈现？

这是我的功能，其中启用 = false

```
protected void FilterCheckBox(object sender, ASPxGridViewTableCommandCellEventArgs e)
{
    if (ExecContractGridView != null)
    {
        try
        {
            if (ExecContractGridView.GetRowValues(e.VisibleIndex, "UnionExecutedBy") != null)
            {
                if (!string.IsNullOrEmpty(ExecContractGridView.GetRowValues(e.VisibleIndex, "UnionExecutedBy").ToString()))
                {
                    e.Cell.Enabled = false;
                }
            }
        }
        catch (Exception ex)
        {
            ApplicationLog.Exception(this, ex);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:02:30.927

要正确执行此操作，您需要找到复选框控件并设置`disabled = "disabled"`.

您可以使用 JavaScript 或 jQuery 之类的库在客户端执行此操作。或者，在上面的代码中，一旦有了，`e.Cell`您就可以找到`CheckBox`控件并将其设置为`Enabled = false`.

为了进一步澄清，`e.Cell`包含一个`CheckBox`控件作为其子控件之一。所以你可以这样做：

```
var control = e.Cell.FindControl("SomeCheckBoxControl") as CheckBox;
if (control != null)
    control.Enabled = false; 
```

# biztalk - 想要将 XSL 样式表的文本输出放入 BizTalk 映射的目标消息中

> ID：11349935
> 
> 赞同：2
> 
> 时间：2012-07-05T18:00:50.067
> 
> 标签：biztalk, biztalk-mapper

我有一个非常复杂的输入消息，我需要将其节点名称和值（没有任何命名空间信息）反刍到输出中，就像使用 XSL 样式表在浏览器中查看文档一样。我不需要将任何单独的源 XML 元素映射到相应的目标元素。输出将被传递给平面文件汇编器，并作为简单的文本消息发送给消费者。

为简单起见，我删除了此样式表中的大部分命名空间并更改了前缀，从而产生了我想要的输出：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" xmlns:abcd="http://abcd.whatever.net/abcd/1.0.1" xmlns:info="http://info.sumthin.net/1.0.0" xmlns:wxyz="http://wxyz.widgetwonks.net/wxyz/3.0.3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<xsl:output method="text" />

<xsl:template match="abcd:Message">
    <xsl:apply-templates />
</xsl:template>

<xsl:template match="info:SpecialText">
    <xsl:text> </xsl:text>
    <xsl:value-of select="."/>
    <xsl:text>&#010;</xsl:text>
</xsl:template>

<xsl:template match="wxyz:PersonSSN">
    <xsl:text> SSN: </xsl:text>
    <xsl:value-of select="substring(., 0, 4)"/>
    <xsl:text>-</xsl:text>
    <xsl:value-of select="substring(., 4, 2)"/>
    <xsl:text>-</xsl:text>
    <xsl:value-of select="substring(., 6, 4)"/>
    <xsl:text>&#010;</xsl:text>
</xsl:template>

<xsl:template match="*">
    <xsl:if test="string-length(normalize-space(text()))=0">
        <xsl:text>&#010;</xsl:text>
        <xsl:value-of select="local-name()"/>
    <xsl:text>&#010;</xsl:text>
    </xsl:if>

    <xsl:if test="not(string-length(normalize-space(text()))=0)">
        <xsl:text> </xsl:text>
        <xsl:value-of select="local-name()"/>: <xsl:value-of select="normalize-space(text())"/>
    </xsl:if>
    <xsl:apply-templates/>
</xsl:template>

<xsl:template match="text()|@*">
    <xsl:if test="string-length(normalize-space(.)) != 0">
        <xsl:text>&#010;</xsl:text>
    </xsl:if>
</xsl:template>

</xsl:stylesheet> 
```

在 BizTalk 中，我在地图网格的“自定义 XSL 路径”属性中引用了这个样式表，当我测试地图时，我得到了正确的输出。

***但是如何将此输出映射到目标模式？*** 样式表的输出只是一个很长的文本流，其中散布着许多 x0D x0A (cr / lf)。我无法设计出 BizTalk 允许作为样式表输出容器的模式。

-标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T21:08:49.200

我终于解决了我自己的问题，如下。

开发了以下 XSL 样式表来将输入消息转换为普通的 XML 文档：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:var="http://schemas.microsoft.com/BizTalk/2003/var" exclude-result-prefixes="msxsl var s0 ScriptNS0" version="1.0" xmlns:s0="http://abcd.whatever.net/abcd/1.0.1" xmlns:ScriptNS0="http://schemas.microsoft.com/BizTalk/2003/ScriptNS0" xmlns:info="http://info.sumthin.net/1.0.0" xmlns:wxyz="http://wxyz.widgetwonks.net/wxyz/3.0.3">

<xsl:output omit-xml-declaration="yes" method="xml" version="1.0" />

<xsl:template match="/">
    <Message>
        <xsl:apply-templates />
    </Message>
</xsl:template>
<!-- <xsl:template match="/s0:Message" /> -->
<xsl:template match="info:CaveatText">
    <xsl:element name="TextField">
        <xsl:text>  </xsl:text>
        <xsl:value-of select="."/>
        <xsl:text>&#010;</xsl:text>
    </xsl:element>
</xsl:template>

<xsl:template match="wxyz:PersonSSNID/wxyz:ID">
    <xsl:element name="TextField">
        <xsl:text>    SSN: </xsl:text>
        <xsl:value-of select="substring(., 0, 4)"/>
        <xsl:text>-</xsl:text>
        <xsl:value-of select="substring(., 4, 2)"/>
        <xsl:text>-</xsl:text>
        <xsl:value-of select="substring(., 6, 4)"/>
        <xsl:text>&#010;</xsl:text>
    </xsl:element>
</xsl:template>

<xsl:template match="*">
    <xsl:if test="string-length(normalize-space(text()))=0">
        <xsl:element name="TextField">
            <xsl:text>&#010;</xsl:text>
            <xsl:value-of select="local-name()"/>
            <xsl:text>&#010;</xsl:text>
        </xsl:element>
    </xsl:if>

    <xsl:if test="not(string-length(normalize-space(text()))=0)">
        <xsl:element name="TextField">
            <xsl:text>    </xsl:text>
            <xsl:value-of select="local-name()"/>: <xsl:value-of select="normalize-space(text())"/>
        </xsl:element>
    </xsl:if>
    <xsl:apply-templates/>
</xsl:template>

<xsl:template match="text()|@*">
    <xsl:if test="string-length(normalize-space(.)) != 0">
        <xsl:element name="TextField">
            <xsl:text>&#010;</xsl:text>
        </xsl:element>
    </xsl:if>
</xsl:template> 
```

由样式表创建的示例 XML 文档在文本编辑器中如下所示：

```
<Message xmlns:{namespaces galore...}><TextField>
Message
</TextField><TextField>
HeaderArea
</TextField><TextField>    KeyText: PQ</TextField><TextField>
</TextField><TextField>    HeaderText: XYXY1010Z</TextField><TextField>
</TextField><TextField>
ResponseDataSection
</TextField><TextField>  **TEST**THIS RESPONSE IS FROM ABCD TEST SYSTEM.
</TextField><TextField>
PersonName
</TextField><TextField>    PersonGivenName: JACK</TextField><TextField>
</TextField><TextField>    PersonMiddleName: DANIEL</TextField><TextField>
</TextField><TextField>    PersonSurName: WEBBER</TextField><TextField>
</TextField><TextField>    PersonBirthDateText: 1975-01-31</TextField><TextField>
</TextField><TextField>
PersonAssignedIDDetails
</TextField><TextField>
PersonSSNID
</TextField><TextField>    SSN: 123-98-7654
</TextField><TextField>
PersonOtherID
</TextField><TextField>    ID: XT-01020304050</TextField><TextField>
</TextField><TextField>
PersonPhysicalDetails
</TextField><TextField>    PersonSexCode: M</TextField><TextField>
</TextField><TextField>    PersonRaceCode: W</TextField><TextField>
</TextField><TextField>
PersonAbcdID
</TextField><TextField>    ID: Z123456789</TextField><TextField>
</TextField><TextField>    ExpandedBirthDateSearch: 1</TextField><TextField>
</TextField><TextField>    ExpandedNameSearchIndicator: false</TextField><TextField>
</TextField><TextField>
VehicleID
</TextField><TextField>    ID: ASDFASDFASDFASDFA</TextField><TextField>
</TextField><TextField>    VehicleMakeText: DODG</TextField><TextField>
</TextField><TextField>
VehicleRegistrationPlateID
</TextField><TextField>    ID: ABC123</TextField><TextField>
</TextField><TextField>    IDJurisdictionText: AZ</TextField><TextField>
</TextField><TextField>
PrimaryResponse
</TextField><TextField>
PersonAlias
</TextField><TextField>
PersonAlternateName
</TextField><TextField>    PersonGivenName: JACK</TextField><TextField>
</TextField><TextField>    PersonMiddleName: ALLEN</TextField><TextField>
</TextField><TextField>    PersonSurName: DANIEL</TextField><TextField>
</TextField><TextField>
PersonAlternateName
</TextField><TextField>    PersonGivenName: JACKIE</TextField><TextField>
</TextField><TextField>    PersonSurName: DANIEL</TextField><TextField>
</TextField><TextField>
PersonAlternateName
</TextField><TextField>    PersonGivenName: JD</TextField><TextField>
</TextField><TextField>    PersonSurName: DANIEL</TextField><TextField>
</TextField><TextField>    PersonBirthDateText: 1967-01-01</TextField><TextField>
</TextField><TextField>    PersonBirthDateText: 1968-01-01</TextField><TextField>
</TextField><TextField>
PersonAssignedIDDetails
</TextField><TextField>
PersonSSNID
</TextField><TextField>    SSN: 234-00-0001
</TextField><TextField>
PersonSSNID
</TextField><TextField>    SSN: 345-00-0002
</TextField><TextField>
PersonSSNID
</TextField><TextField>    SSN: 456-00-0003
</TextField><TextField>
PersonSSNID
</TextField><TextField>    SSN: 567-00-0004
</TextField><TextField>
PersonOtherID
</TextField><TextField>    ID: XZ1234DE</TextField><TextField>
</TextField><TextField>
PersonOtherID
</TextField><TextField>    ID: YZE6241</TextField><TextField>
</TextField><TextField>
</Message> 
```

在上面， (...break to next line...) 序列是由样式表的片段生成的 CR/LF。

上面消息的架构很简单：

```
<?xml version="1.0" encoding="utf-16"?>
<xs:schema xmlns:xsi={application-specific namespace} xmlns:b="http://schemas.microsoft.com/BizTalk/2003" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:annotation>
    <xs:appinfo>
      <schemaEditorExtension:schemaInfo namespaceAlias="b" extensionClass="Microsoft.BizTalk.FlatFileExtension.FlatFileExtension" standardName="Flat File" xmlns:schemaEditorExtension="http://schemas.microsoft.com/BizTalk/2003/SchemaEditorExtensions" />
      <b:schemaInfo root_reference="Message" default_pad_char=" " pad_char_type="char" count_positions_by_byte="false" parser_optimization="speed" lookahead_depth="3" suppress_empty_nodes="false" generate_empty_nodes="true" allow_early_termination="false" early_terminate_optional_fields="false" allow_message_breakup_of_infix_root="false" compile_parse_tables="false" standard="Flat File" />
    </xs:appinfo>
  </xs:annotation>
  <xs:element name="Message">
    <xs:annotation>
      <xs:appinfo>
        <b:recordInfo structure="delimited" preserve_delimiter_for_empty_data="true" suppress_trailing_delimiters="false" sequence_number="1" />
      </xs:appinfo>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:annotation>
          <xs:appinfo>
            <b:groupInfo sequence_number="0" />
          </xs:appinfo>
        </xs:annotation>
        <xs:element maxOccurs="unbounded" name="TextField" type="xs:string">
          <xs:annotation>
            <xs:appinfo>
              <b:fieldInfo sequence_number="1" justification="left" />
            </xs:appinfo>
          </xs:annotation>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

在 Visual Studio 中，架构编辑器树显示了架构的真正简单程度：

```
<Schema>                (Schema Editor Extensions is set to Flat File Extension)
    Message         (a record with no default properties)
        TextString      (a child element defined as unbounded) 
```

BizTalk 映射： 1\. 映射上没有 functoid，因为它将使用自定义 XSLT 文件使用上述目标架构生成消息。2\. 使用 Validate Map，生成自定义扩展 XML 文件。3\. 将自定义扩展 XML 和我的样式表文件添加到项目中。4\. 在地图设计图面上，通过导航到刚才提到的文件来设置自定义扩展 XML 和自定义 XSL 路径属性。

创建了一个 BizTalk 管道，其中包括使用目标架构的平面文件汇编器。

部署解决方案。

将发送端口配置为使用新的发送管道。

最终输出是一个平面文件，如下所示：

```
Message

HeaderArea
    TransactionKeyText: PQ
    TransactionHeaderText: XYXY1010Z

ResponseDataSection
  **TEST**THIS RESPONSE IS FROM ABCD TEST SYSTEM.

PersonName
    PersonGivenName: JACK
    PersonMiddleName: DANIEL
    PersonSurName: WEBBER
    PersonBirthDateText: 1975-01-31

PersonAssignedIDDetails

PersonSSNID
    SSN: 123-98-7654

PersonOtherID
    ID: XT-01020304050

PersonPhysicalDetails
    PersonSexCode: M
    PersonRaceCode: W

PersonAbcdID
    ID: Z123456789
    ExpandedBirthDateSearch: 1
    ExpandedNameSearchIndicator: false

VehicleID
    ID: ASDFASDFASDFASDFA
    VehicleMakeText: DODG

VehicleRegistrationPlateID
    ID: ABC123
    IDJurisdictionText: AZ

PrimaryResponse

PersonAlias

PersonAlternateName
    PersonGivenName: JACK
    PersonMiddleName: ALLEN
    PersonSurName: DANIEL

PersonAlternateName
    PersonGivenName: JACKIE
    PersonSurName: DANIEL

PersonAlternateName
    PersonGivenName: JD
    PersonSurName: DANIEL
    PersonBirthDateText: 1967-01-01
    PersonBirthDateText: 1968-01-01

PersonAssignedIDDetails

PersonSSNID
    SSN: 234-00-0001

PersonSSNID
    SSN: 345-00-0002

PersonSSNID
    SSN: 456-00-0003

PersonSSNID
    SSN: 567-00-0004

PersonOtherID
    ID: XZ1234DE

PersonOtherID
    ID: YZE6241 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:45:52.547

使用单个字符串元素定义输出模式。然后修改您的 xsl 转换以将您的输出包装在[CDATA](http://en.wikipedia.org/wiki/CDATA)部分中。您的输出将与此类似：

```
<?xml version="1.0" encoding="utf-8"?>
<MyOutputSchema>
<MyOutputString>
<![CDATA[<sender>Your output goes here</sender>]]>
</output-junk-drawer>
</MyOutputString> 
```

CDATA 将允许在 xml 消息中放置无效字符。然后您可以使用 BizTalk 处理输出。

# actionscript-3 - 访问未定义的属性数据 flex

> ID：11349937
> 
> 赞同：0
> 
> 时间：2012-07-05T18:00:51.597
> 
> 标签：actionscript-3, flash, apache-flex, flash-builder, mxml

我正在学习 flex/flash，但我迷路了。我在一堆视图中使用了“数据”，效果很好。由于某种原因，它在这里不起作用。

我在这里将一个字段设置为一个字符串：

```
function LoginLoaded (e:Event):void {
                    trace(e.target.data);
                    var ServerReturn:String;
                    ServerReturn = new String(e.target.data);
                    data.UserCommonReturnData = ServerReturn;
                    navigator.pushView(CommonPlaces, data);
                } 
```

在公共场所视图中，我尝试将其加载回来：

```
var CommonPlacesData:String = new String();
            var CurrentSelect:String = new String();
            CommonPlacesData = new String(data.UserCommonReturnData); 
```

这给出了错误“访问未定义的属性数据”我不明白，因为调用类似 data.PickUpTime （也是一个字符串）的东西在其他视图中工作正常。

数据从第一个视图开始，如下所示：

```
[Bindable] public var User:ObjectProxy = new ObjectProxy();

User.ID = "2314084";
navigator.pushView(TaxiNowOrLaterView, User); 
```

然后在以后的视图中我这样调用它：（工作正常）

```
var PickUpString:String = new String(data.ID); 
```

任何帮助都会很棒！谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:57:21.147

关于您的代码的内容很少。首先，您确实应该养成根据语言命名标识符的习惯。标识符以大写字母开头，随后对单词的其余逻辑部分使用小写字母（系统也称为 PascalCase），仅用于命名类。其余标识符应使用 camelCase（类似于 PascalCase，但首字母不大写）**。这大大减少了理解代码的工作量。经验丰富的 AS3 程序员会按如下方式解释您的代码：

```
// Static constant (!) ID of the class User is assigned (?) a value of "2314084"
User.ID = "2314084";
// invoke a method pushView of a local variable navigator with arguments
// of which first is the class TaxiNowOrLater, the second is the class User
navigator.pushView(TaxiNowOrLaterView, User); 
```

虽然，也许，你不是故意的。

```
new String(); 
```

在 AS3 的上下文中根本没有任何意义。字符串永远不是引用，是不可变的，并且具有大多数程序员都同意的字面语法。上面的代码与`""`. 同理，`new String(anotherString)`效果完全一样`anotherString`。

**您的问题：** `event.target`可能有很多不同的东西，其中一些可能具有称为“数据”的属性，而另一些可能没有。解决此问题的一般方法是您需要将`event.currentTarget`或的值`event.target`转换为您希望调度事件的类型。假设您期望来自一个`Button`类的实例的事件，那么：

```
private function clickHandler(event:MouseEvent):void {
    if (Button(event.currentTarget).enabled) // do things
} 
```

如果同一个事件是由一个不是按钮的对象调度的，这不会保护您免受错误的影响，但会使错误报告更加有意识，因为它会告诉您它试图将哪个类转换为其他类，当它失败时。

如果你的程序逻辑要求处理程序知道它不应该处理的事件（为什么？）你可以这样写：

```
private function clickHandler(event:MouseEvent):void {
    var button:Button = event.currentTarget as Button;
    if (button && button.enabled) // do things
} 
```

`event.target`vs `event.currentTarget`- 很少你会需要`event.target`，大多数时候你需要`currentTarget`. 我不是说这是错误的，但是，看起来它可能是问题所在。`target`是作为事件的第一个原因的对象。事件可能会冒泡，这意味着它们可能会在显示列表层次结构中上下移动，首先从父级到子级，然后反向。在下面的示例中，假设按钮上有一个标签，一旦生成事件就会被单击 - 在这种情况下，即使您为按钮添加了侦听器，`event.target`也将是按钮标签，而不是按钮。`currentTarget`相反，它是将事件分派到处理程序的直接对象。

还有几件事：`ObjectProxy`是一个愚蠢的类，你可能不应该在任何情况下使用。它没有任何用处，而且可能有问题，但到目前为止，很少有人关心发现它的错误。简而言之，它的作用如下：它创建一个对象，该对象“监视”其属性的动态创建、分配和删除，并在这些事件发生时调度事件。这种行为容易出现很多错误和隐含的错误。例如，是否`foo.bar = "baz"; foo.bar = "baz";`重新分配相同的财产？是`foo.bar.baz = "fizzbuzz";`修改`foo.bar`吗？如果属性名称不是一个刺痛怎么办？等等。

为什么你不应该使用它：总是有更好的方法来处理你的数据。更透明、更容易调试、更高效。这个类是一个原型，它从未真正起作用。除了具有上述行为之外，就用于编写它的代码行而言，它是巨大的。调试其中发生的错误需要大量的时间和耐心，这当然不值得。

如果您需要一个对象来代表用户，请定义一个类，以及您希望用户拥有的属性并使用该类 - 这将使调试和理解您的代码更加容易。

`[Bindable]`元数据是邪恶的。我不能告诉你你应该避免它，因为它使用得太频繁了，但是，我会的。你应该尽可能地避免它。我还没有遇到过什么时候使用这个元数据是合理的。与原型类似，`ObjectProxy`它是为懒惰的程序员设计的，没有过多考虑性能或极端情况。这又是许多隐含错误的来源，通常很难发现，因为围绕此元生成的代码“吞下了”错误。此元的替代方案是`addEventListener(...)`带有自定义事件的纯代码。

不幸的是，很多教程都会使用这种代码来让你快速上手语言+框架......

** 此规则有一些例外：常量都是大写的，命名空间名称使用下划线分隔单词的逻辑部分，但绝不使用大写字母。

# javascript - JQuery点击Div

> ID：11349943
> 
> 赞同：0
> 
> 时间：2012-07-05T18:01:09.133
> 
> 标签：javascript, jquery

我有以下代码：

```
<div class="contentContainer">
        <div class="bild" id="bildDiv">
            <asp:ContentPlaceHolder ID="MainContent" runat="server">
            </asp:ContentPlaceHolder>
            <div class="menubox" id="menuboxID">
                <table border="0" cellpadding="0" cellspacing="0" class="menutable">
                    <tr>
                        <td>
                            <asp:ImageButton ID="ImageButton1" CssClass="menuitem" ImageUrl="~/Images/Icons_Home.png"
                                OnClick="HomeClick" runat="server" />
                        </td>
                        <td>
                            <asp:ImageButton ID="ImageButton2" CssClass="menuitem" data-ftrans="slide" ImageUrl="~/Images/Icons_down.png"
                                OnClick="DownClick" runat="server" />
                        </td>
                        <td>
                            <asp:ImageButton ID="ImageButton3" CssClass="menuitem" ImageUrl="~/Images/Icons_up.png"
                                runat="server" OnClick="UpClick" />
                        </td>
                        <td>
                            <asp:ImageButton ID="ImageButton4" CssClass="menuitem" ImageUrl="~/Images/Icons_Video_alternative.png"
                                runat="server" />
                        </td>
                        <td>
                            <asp:ImageButton ID="ImageButton5" CssClass="menuitem" ImageUrl="~/Images/Icons_Mail.png"
                                runat="server" OnClick="MailClick" />

                        </td>
                    </tr>
                </table>
            </div>
        </div>
    <script>
        $("#bildDiv").click(function () {

            $("#menuboxID").toggleClass("fadein");
        });
        $('body').removeClass('ui-loading');
   </script> 
```

所以当我点击我的#bildDiv 时，#menuboxID 将淡入！但现在我的#bildDiv 中有一些文本框！当我单击任何文本框以编写某事时，我的菜单会淡入！但我不希望它...只有当我直接单击我的 div 时它才会淡入！解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:05:03.310

[使用stopPropgation](https://developer.mozilla.org/en/DOM/event.stopPropagation)方法停止事件的传播：

```
$("#bildDiv input").click(function (e) {
     e.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:05:58.407

试试下面的。

```
$("#bildDiv INPUT").click(function(event){
  event.stopPropagation();  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T18:07:13.993

如果您只想在菜单栏中使用淡入淡出效果。将点击事件附加到#menuboxID 而不是#bildDiv。

```
$("#menuboxID").click(function () {

    $("#menuboxID").toggleClass("fadein");
}); 
```

# powershell - 使用 New-Object 运行进程会隐藏它

> ID：11349946
> 
> 赞同：1
> 
> 时间：2012-07-05T18:01:13.340
> 
> 标签：powershell, powershell-2.0

我需要从外部程序中获取标准输出并将其带回 Powershell。我发现并正在使用@Andy Arismendi 从这个问题（[附加到同一日志文件的标准和错误输出的重定向）中](https://stackoverflow.com/questions/8925323/powershell-redirection-of-standard-and-error-output-appending-to-the-same-log-f)提供的答案。

下面的代码片段对我来说非常有用，但是外部可执行文件在后台静默运行。有没有办法防止它隐藏？

```
$pinfo = New-Object System.Diagnostics.ProcessStartInfo
$pinfo.FileName = "myjob.bat"
$pinfo.RedirectStandardError = $true
$pinfo.RedirectStandardOutput = $true
$pinfo.UseShellExecute = $false
$pinfo.Arguments = ""
$p = New-Object System.Diagnostics.Process
$p.StartInfo = $pinfo
$p.Start() | Out-Null
$p.WaitForExit()
$output = $p.StandardOutput.ReadToEnd()
$output += $p.StandardError.ReadToEnd()
$output | Out-File $myLog -Append 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:13:41.340

是的，您可以设置`UseShellExecute`为`true`，但是您不能重定向输入和输出流。

# android - Android SQLite 加入查询

> ID：11349950
> 
> 赞同：3
> 
> 时间：2012-07-05T18:01:26.150
> 
> 标签：android, sqlite, join

我正在创建一个应用程序作为学习工具，但在连接查询方面遇到了困难。

我有一个包含两个表的数据库——马和封面——声明如下；

```
 private static final String HORSES_CREATE = "create table horses (_id integer primary key autoincrement, "
        + "name text not null, type integer not null, birthDate text not null, vaccineDate text not null, "
        + "inFoal integer not null, notes text not null);"; 
```

“类型”字段指的是种马、母马、阉割等，并且是从微调器中选择的（从 XML 字符串数组中填充）。

```
private static final String COVERS_CREATE = "create table covers (_id integer primary key autoincrement, "
        + "stallionName integer not null, mareName integer not null, firstCoverDate text not null, lastCoverDate text not null, "
        + "scan14Date text not null, scan28Date text not null, foalingDate text not null, inFoal integer not null, notes text not null);"; 
```

种马名称实际上存储为马表中马的 _id 字段。它是从仅显示马匹表中类型定义为“种马”的马匹的微调器中选择的。（同样适用于马雷）。

我有一个类“DatabaseHelper”来创建和升级表，每个表都有自己的适配器类“horsesDbAdapter”和“coversDbAdapter”，其中包含添加、编辑和删除条目以及相关查询的方法。(fetchAllHorse(), fetchHorse(long rowId))

例如：

```
 public Cursor fetchAllHorses() {

    return mDb.query(DATABASE_TABLE,
            new String[] { KEY_ROWID, KEY_NAME, KEY_TYPE, KEY_BIRTHDATE,
                    KEY_VACCINEDATE, KEY_INFOAL, KEY_NOTES }, null, null,
            null, null, null);
} 
```

（全部改编自Android记事本示例）

我在列表视图中显示了封面表的内容（只显示了stallionName 和mareName）。但是由于这些字段只包含对 horses 表的唯一引用，所以显示的只是相当无信息的 _id 字段。

我的问题是；如何获取马匹的相关名称以显示在 listView 中？我已经阅读了连接查询等，但是当我尝试实现它们时迷路了。我假设我必须加入 horses._id 和 Covers.stallionName （然后为 MareName 制作一个几乎相同的），但我找不到如何执行此操作的具体示例。

如果需要任何其他信息/代码，请告诉我。

任何帮助将不胜感激，在此先感谢您。

编辑：我在 horses 表中创建了stallionName 和 mareName 外键引用（_id），但我仍然不确定如何以及在何处实现连接查询；它应该在 horsesDbAdapter、coverDbAdapter 还是 CoverList 类中？（coversList 是创建和填充 listView 的类）封面表声明现在读取；

```
 private static final String COVERS_CREATE = "create table covers (_id integer primary key autoincrement, "
        + "stallionName integer not null, mareName integer not null, firstCoverDate text not null, lastCoverDate text not null, "
        + "scan14Date text not null, scan28Date text not null, foalingDate text not null, inFoal integer not null, notes text not null," +
        "FOREIGN KEY (stallionName) REFERENCES horses (_id), FOREIGN KEY (mareName) REFERENCES horses (_id));"; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T01:34:22.463

我是 Android 和 SQLLiteHelper 的新手，我想知道同样的事情。

看完这篇文章，我发现定义表之间连接的方法是用`SQLLiteQueryBuilder.setTables`方法来完成的。[请参阅此处](http://developer.android.com/reference/android/database/sqlite/SQLiteQueryBuilder.html#setTables%28java.lang.String%29)的参考

我从[这个博客得到这个](http://martin.cubeactive.com/?p=280)

希望这有助于为读者指明正确的方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T11:32:11.153

我已经设法让它工作了。对于其他可能有类似问题的人，我会尝试详细说明我做了什么。正如@deceiver 所说，我应该让stallionName 和mareName 外键引用马（见编辑）。

在coverList类（实现listView的类）中，我只需要获取数据库的一个实例并使用rawQuery直接实现SQL代码（可以使用Query来实现，但我不确定如何）添加的代码如下；

```
private Cursor coversCursor;
private void fillData() {

    db = (new DatabaseHelper(this).getReadableDatabase());
    coversCursor = db.rawQuery("SELECT horses1.name AS stallionNameText, covers.*, horses2.name AS mareNameText FROM horses horses1 JOIN covers ON horses1._id = covers.stallionName JOIN horses horses2 ON horses2._id = covers.MareName",
                    null);
    startManagingCursor(coversCursor);
    // Create an array to specify the fields we want to display in the list
    // (the renamed fields from the above query)
    String[] from = new String[] { "stallionNameText", "mareNameText" };

    // and an array of the fields we want to bind those fields to (in this
    // case just text1)
    int[] to = new int[] { R.id.rowStallionName, R.id.rowMareName };

    // Now create a simple cursor adapter and set it to display
    SimpleCursorAdapter covers = new SimpleCursorAdapter(this,
            R.layout.covers_list_row, coversCursor, from, to);
    setListAdapter(covers);
} 
```

然后在 onCreate() 方法中调用 FillData()。然后只需在 onDestroy 方法中关闭数据库。（在这里选择封面表中的所有列似乎很浪费，但我最终也会在 listView 中显示这些列。我只是想在继续编码之前回答这个问题）。我发现有用的教程是[http://coenraets.org/blog/android-samples/androidtutorial/](http://coenraets.org/blog/android-samples/androidtutorial/)

我的 SQL 查询有问题，因为有 2 个外键引用同一个表，我希望 listView 显示种马名称和母马名称，因此必须将两个马表连接到一个封面表。我只需要重命名 SQL 查询的 FROM 部分中的表。希望上面的代码很清楚。如果没有，我发现以下有用；[http://www.bryantwebconsulting.com/blog/index.cfm/2005/3/11/join_a_table_to_itself_in_sql](http://www.bryantwebconsulting.com/blog/index.cfm/2005/3/11/join_a_table_to_itself_in_sql)

对不起，如果这个解释对我的（不寻常的）例子来说太具体了。谢谢阅读。

# css - 具有固定列和液体列的 CSS 布局

> ID：11349952
> 
> 赞同：0
> 
> 时间：2012-07-05T18:01:29.843
> 
> 标签：css, css-float

在我的 CSS 布局中混合流动和固定元素似乎很麻烦。我尝试了各种设置，但我无法做到恰到好处。

我正在尝试创建一个模板，其中主要内容被每一侧（顶部、左侧、右侧、底部）的内容包围。

```
<div id="container">
<div id="header">k</div>
<div id="left-column"></div>
    <div id="center-column"><h1>Main Page</h1> Liquid layout trial</div>
<div id="right-column"></div>
<div id="footer"></div>
</div>​ 
```

顶栏（标题）应该有固定的高度。左列应具有固定的高度/宽度，中心列应根据视口在高度/宽度中浮动，内容右列应具有固定的高度/宽度。页脚应该有固定的高度

这是我的CSS：

```
#header{
    background-color: blue;
    height 50px;
    color: white;
    clear:both;
}

#left-column{
    background-color: green;
    width:100px;
    height:400px;
    float: left;
}

#center-column{
    background-color: yellow;
    float:left;
}

#right-column{
    background-color: red;
    float:right;
    height: 400px;
    width: 100px;
}

#footer{
    clear: both;
    height: 50px;
    background-color: pink;
} 
```

中心柱似乎没有使用它的整个宽度/高度，因为我希望四个“边”之间的整个区域都是黄色的。

![在此处输入图像描述](../Images/479c793e70995b9bbcb6fa5bee8c60de.png)

另一个问题是限制视口，右列低于中心列 ![在此处输入图像描述](../Images/b56123635f421406f6ecc5dabe7c5b18.png)

我也不明白为什么我的标题需要显示内容。如果我删除字符“K”，它将不可见。

![在此处输入图像描述](../Images/66708cc006cbf4c34879f0c70230e1a7.png)

我在这里找到了这个例子的小提琴：http: [//jsfiddle.net/jasonBr81/vZDND/2/](http://jsfiddle.net/jasonBr81/vZDND/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:50:43.400

如果你不喜欢 IE7，你可以用这个。您将获得另一个优势，不仅是您的中间列没有固定宽度：

所有列将始终具有相同的高度。

*   您可以轻松地在一个容器中在整个高度上添加垂直边框
*   你永远不会遇到你描述的浮动问题

CSS

```
<style>
    #header {
        height:             50px;
        background-color:   blue;
        color:              white;
    }

    #left-column{
        display:            table-cell;    
        height:             400px;
        background-color:   green;
    }

    .left-column-inner {
        width:              100px;
    }

    #center-column {
        display:            table-cell;
        width:              100%;
        background-color:   yellow;
    }

    #right-column {
        display:            table-cell; 
        background-color:   red;
    }

    .right-column-inner {
        width:              100px;
    }

    #footer{
        clear: both;
        height: 50px;
        background-color: pink;
    }
</style> 
```

HTML

```
<div id="container">
    <div id="header">HEADER</div>

    <div id="left-column">
        <div class="left-column-inner">LEFT</div>
    </div>
    <div id="center-column">
            <h1>Main Page</h1>
            <p>
                Liquid layout trial Liquid layout trial Liquid layout trial Liquid layout trial Liquid layout trial Liquid layout trial 
                Liquid layout trial Liquid layout trial Liquid layout trial Liquid layout trial Liquid layout trial Liquid layout trial 
            <p>
    </div>
    <div id="right-column">
        <div class="right-column-inner">RIGHT</div>
    </div>

    <div id="footer">FOOTER</div>
</div>​ 
```

# php - PHP、SPL、AccessArray 接口和迭代器接口

> ID：11349955
> 
> 赞同：0
> 
> 时间：2012-07-05T18:01:38.893
> 
> 标签：php, iterator, spl, arrayaccess

我在考虑 AccessArray 接口和 Iterator 接口，我在想我们可以将它们组合起来吗？，我的意思是使用 AccessArray 设置数组并在 Iterator 中使用 foreach 循环，如果有人可以帮助我举例说明是否可以组合那两个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:02:53.170

```
class Foo implements ArrayAccess, Iterator {
  // Implement interfaces here
} 
```

您可以实现任意数量的接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:20:07.673

请注意，您基本上是在要求`ArrayObject`.

```
class Foo extends ArrayObject
{
  private $data = [];
  public function __construct()
  {
    parent::__construct($this->data);
  }
} 
```

# objective-c - Objective-C visibleCells 和 indexPathsForVisibleRows

> ID：11349963
> 
> 赞同：1
> 
> 时间：2012-07-05T18:02:00.173
> 
> 标签：objective-c, uitableview, nsindexpath

如何通过 indexPathsForVisibleRows 读取 NSIndexpaths 数组的 intValue？

顺便说一句，为什么 visibleCells 和 indexPathsForVisibleRows 在 if (cell == nil) 函数之前不起作用？

这是我的代码：

在 cellForRowAtIndexPath 方法中：

```
 static NSString *identifierString;
    UITableViewCell *cell = [tableView1 dequeueReusableCellWithIdentifier:identifierString];

    // when I use visibleCells and indexPathsForVisibleRows here, the app crashes

    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:identifierString] autorelease];
cell.accessoryType = UITableViewCellAccessoryNone;          
    }

    // when I use visibleCells and indexPathsForVisibleRows here, the app works

//cell implementation here

    return cell; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T13:24:25.180

`(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`是表格视图填充单元格的地方。如果您尝试在创建可见单元格之前引用它们（这是在 if 语句中完成的），则应用程序会崩溃。该`alloc`命令为要创建的单元分配内存，然后使用某些参数对其进行初始化。此方法被调用的次数与您在 中指定的次数一样多`numberOfRowsInSection`。

这样您就不会一次又一次地重新创建所有单元格，if 语句会检查该单元格是否确实存在，并且仅当它为 nil 时才会创建一个新的单元格来代替。

要获取`int`IndexPath 的行值，您可以使用它的 row 属性。例如：

```
NSArray indexArray = [self.tableView indexPathsForVisibleRows];
int i=0;
while(i!=indexArray.count){
   //Log out the int value for the row
   NSLog(@"%d", indexArray[i].row);
   i++;
} 
```

希望这可以帮助

# c - 更改一些 MMU 转换表条目 - 正确的方法？

> ID：11349964
> 
> 赞同：2
> 
> 时间：2012-07-05T18:02:08.993
> 
> 标签：c, arm, virtual-memory, tlb

更新翻译表中的条目的步骤是什么？

我使用 ARM920T 的 MMU 来获得一些内存保护。当我在进程之间切换时，我需要更改一些条目以保护其他进程的内存。更新表（在内存中）后，我发出一个完整的 TLB 失效（只是为了确定，也没有锁定的条目），但新进程仍然可以访问前一个进程的数据。

当我遍历表时，一切看起来都应该如此（意味着其他进程区域设置为“在 USR 模式下不可访问”）。

**编辑** 在 TLB 失效之前，我还进行了完整的缓存清理和失效（在两个缓存上），但这不会改变任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:27:19.067

TLB 并不是页面更改后唯一需要维护的东西，尤其是那些包含可执行代码的东西。首先，您需要确保您的更改传播到物理内存（即清理指向您修改的页表的缓存区域）。您将需要使指令缓存无效，因为它可能包含来自旧代码区域的行。根据您的缓存类型，您可能需要在更新页表之前清理数据缓存，并在更改后使数据缓存失效。最后，您需要确保您有足够的障碍来强制按照您指定的顺序完成操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T23:05:00.950

出于某些充分的理由，您应该映射您的页表被强烈排序的区域，这会稍微损害您的性能，但仍然应该比在写入表或发出内存屏障后刷新完整缓存要好。

我真的不明白你想问什么，或者你到底有什么问题，但这是我在我的一个软件中使用的：

```
.align
arch_mmu_map_section:
#if ARM_WITH_MMU
    ldr     r3, =MMU_TLB          @ r3 = &table
    add     r1, r3, r1, lsr #18   @ r1 = &table + offset(entry)
    ldr     r3, =0xFFFFF          @ r3 = (1<<20) - 1
    bic     r0, r0, r3            @ Align r0 to 1 MB
    orr     r0, r0, r2            @ ORR the flags
    str     r0, [r1]              @ Write entry to r1, pointer to entry
    @ Invalidate UTLB
    mov     r3, #0
    mcr     p15, 0, r3, c8, c7, 0
#endif
    bx      lr 
```

MMU_TLB 是指向表的指针，并且在 mmu_init 期间被映射为强排序。这个函数的原型是

```
void arch_mmu_map_section(addr_t paddr, addr_t vaddr, uint flags); 
```

# iphone - 按输入为 NSString 的日期对核心数据进行排序

> ID：11349967
> 
> 赞同：1
> 
> 时间：2012-07-05T18:02:13.790
> 
> 标签：iphone, core-data, nsstring, nsdate

我从服务器获取了一堆 YYYY-MM-DD NSString 格式的日期，我们会立即将其粘贴到核心数据中进行访问。但是，我需要使用大于日期谓词进行排序获取请求。当日期是字符串而不是日期对象时，我怎么能说“日期大于 X”？

AKA，下面开始是 NSString，而不是 NSDate

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(start <= %@) AND (name == %@)", currentTime, name]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:48:10.947

无需将日期存储为字符串，然后必须对字符串进行排序，而是使用 NSDateFormatter 解析日期，然后将它们作为 NSDates 存储在核心数据中，然后您可以相对轻松地对它们进行各种谓词。

# android - 将 Canvas 转换为 Drawable

> ID：11349971
> 
> 赞同：4
> 
> 时间：2012-07-05T18:02:26.480
> 
> 标签：android

```
int x = 10; 
int y = 10; 
int r = 4; 
Paint mPaint = new Paint(); 
mPaint.setColor(0xFF0000); 
Canvas mCanvas = new Canvas(); 
mCanvas.drawCircle(x,y,r,mPaint); 
```

有什么方法可以转换`mCanvas`为 Drawable 吗？我的目标是生成具有特定形状和颜色的可绘制对象。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T22:22:14.153

对于像你的圆圈这样的简单形状，我认为[Shape Drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)会更容易。对于更复杂的事情，只需创建一个位图供您的 Canvas 使用，然后创建 Canvas 并在其中绘制，然后从您的位图创建一个 Drawable。就像是：

```
int x = 10;
int y = 10;
int r = 4;

Paint mPaint = new Paint();
mPaint.setColor(0xFF0000);

Bitmap bitmap = Bitmap.createBitmap(/* read the docs*/);
Canvas mCanvas = new Canvas(bitmap);
mCanvas.drawCircle(x,y,r,mPaint);

BitmapDrawable drawable = new BitmapDrawable(getResources(), bitmap); 
```

可能有点迂腐（并希望增加您的理解），Canvas 只是托管“绘制”调用并绘制到您指定的位图中。这表示：

1.  您的示例代码没有做太多，因为您没有使用位图构造 Canvas 或调用`setBitmap()`它。
2.  您没有将 Canvas 转换为 Drawable，而是从您的 Canvas 调用绘制的位图构造一个 Drawable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:09:15.880

取自另一篇文章，这是执行此操作的伪代码。

[画布上的图像到 JPEG 文件](https://stackoverflow.com/questions/2174875/android-canvas-to-jpg)

```
ByteArrayOutputStream baos = new ByteArrayOutputStream()
Bitmap  bitmap = Bitmap.createBitmap( view.getWidth(), view.getHeight(), Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas(bitmap);
view.draw(canvas); 
bitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos); 

// This converts the bitmap to a drawable
BitmapDrawable mDrawable = new BitmapDrawable(getResources(),bitmap); 
```

或者，您可以使用该线程的另一个答案中概述的 getDrawingCache() 。

# php - 使用 PHP cURL 从网站中提取隐藏变量的值

> ID：11349976
> 
> 赞同：0
> 
> 时间：2012-07-05T18:02:32.887
> 
> 标签：php, curl

我想从 facebook.com 之类的网站中提取隐藏变量的变量。我如何使用 cURL 做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:20:01.740

*请看*[这个问题](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)的第一个答案。你*永远不*应该尝试使用 Regex 来解析 HTML。它不起作用。改为使用 PHP 文档对象模型来解析文档：请参阅[此问题](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)。

[phpQuery](http://code.google.com/p/phpquery/)是一个**很好的**工具，可以完成您想做的事情，它本质上为您提供了 PHP 中熟悉的 jQuery API（CSS 选择器等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:06:09.130

正则表达式：

```
/<input.+?type=['"]?hidden['"]?.+?value=['"]?(.+?)['"]?/si 
```

我不知道如何使这个正则表达式不依赖于值的位置。

# javascript - 如何在选择框onclick中进行servlet调用

> ID：11349986
> 
> 赞同：2
> 
> 时间：2012-07-05T18:03:26.493
> 
> 标签：javascript, oracle, jsp, servlets, drop-down-menu

如何从选择框进行 servlet 调用？

我的 jsp 页面中有一个选择框，每个选择都必须调用 servlet 并在同一个 jsp 页面中显示内容。

示例代码：

```
<select>
  <option value="spain">spain</option>
  <option value="france">France</option>
  <option value="italy">Italy</option>
  <option value="germany">Germany</option>
</select> 
```

Onclick 选项一可显示西班牙的国家/地区详细信息。与每个选项相同。那么如何使用 javascript/jquery 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:15:40.030

如果我理解你的问题，这是你必须做的，

Javascript：

```
function getValue(val){
   document.getElementById('myDiv').innerHTML = val;
} 
```

html:

```
<select onchange="getValue(this.value)">
  <option value="spain">spain</option>
  <option value="france">France</option>
  <option value="italy">Italy</option>
  <option value="germany">Germany</option>
</select>
<div id="myDiv"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:36:49.977

看这个示例代码

```
<select name="sweets" multiple="multiple">
    <option>Chocolate</option>
    <option selected="selected">Candy</option>

    <option>Taffy</option>
    <option selected="selected">Caramel</option>
    <option>Fudge</option>
    <option>Cookie</option>

  </select>
  <div></div>
<script>
    $("select").change(function () {
          var str = "";
          $("select option:selected").each(function () {
                str += $(this).text() + " ";
              });
          $("div").text(str);
        })
        .change();
</script> 
```

我想这就是你要找的。你也可以在这里参考[http://api.jquery.com/change/](http://api.jquery.com/change/)

由于您还想调用您的 servlet，因此您必须使用 JQuery ajax 方法从代码内部进行 ajax 调用，例如

```
$.ajax({
  url: url,//URL of the servlet controller as in which would invoke it
  data: data,//Data you want to attach to your URL
  success: success,//The anonymous function which will be called on success
  dataType: dataType//The anonymous function which will be called on failure
}); 
```

# php - 我的 PHP 代码设置以查看我的图像时出错

> ID：11349987
> 
> 赞同：0
> 
> 时间：2012-07-05T18:03:29.660
> 
> 标签：php, image

```
 <?php   
    $con=mysql_connect ("xxx","xxx","xxx");
    mysql_select_db("dbhappps",$con);
    @$sql="select * from tbl_image where id='4' and status='0'";
    @$query=mysql_query($sql);
    while(@$row=mysql_fetch_array($query))
    {
    @$image=$row ['photo'];
    echo $image

   ?>
   <img src="/image/<?php echo $image; ?>" width="320" height="480">
   <?php
   }
   ?> 
```

echo $image 给了我正确的文件名，所以我要么没有正确引用 /image （图像文件夹在我的根目录中）文件夹，要么是浏览器问题？我正在谷歌浏览器中测试它。任何提示都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:07:28.450

在浏览器中查看源代码，看看是否有任何不需要的空格等。也只需右键单击图像并复制图像 url 并粘贴到浏览器中以检查图像是否确实存在。我认为这是一个路径问题，而不是浏览器问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:11:41.263

**试试这个**

```
<img src="//yourwebsite.com/image/<?php echo $image; ?>" width="320" height="480"> 
```

用您的网站名称替换您的网站。或 localhost/test 等。还要检查您是否获得了 .jpg .gif。jpeg 扩展在最后。其他明智的使用这个

```
<img src="//yourwebsite.com/image/<?php echo $image; ?>.jpg" width="320" height="480"> 
```

# amazon-s3 - 使用 Fog 删除所有 S3 存储桶

> ID：11349988
> 
> 赞同：1
> 
> 时间：2012-07-05T18:03:33.390
> 
> 标签：amazon-s3, fog

伙计们，我想弄清楚如何在不做列表的情况下使用 Fog 删除所有 S3 存储桶。我不会知道 S3 中某个帐户的存储桶和对象列表，做一个列表然后删除听起来太贵了，难道没有办法删除亚马逊帐户的所有对象和存储桶。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:30:42.080

`fog`gem 不支持删除存储桶而不先删除其对象。不幸的是，您必须获取对象键（首先列出它们），删除对象（我建议使用[Delete Multiple Objects](http://docs.amazonwebservices.com/AmazonS3/latest/API/multiobjectdeleteapi.html)调用），然后删除存储桶本身。

不幸的是，Amazon S3 不支持删除非空存储桶。您发现具有此功能的任何框架/库都会在删除存储桶之前对隐藏的对象执行删除。

# css - LESS CSS 访问元素 NESTED CSS CLASSES

> ID：11349991
> 
> 赞同：0
> 
> 时间：2012-07-05T18:03:38.537
> 
> 标签：css, class, nested, less

我正在尝试仅访问 toc 章节编号的 ELEMENT（在本例中为 1）。该元素位于嵌套类中。我已经在 toc-section 上使用了这种方法，并且能够产生想要的结果。

CSS：

```
.book .toc {

    & > .title{
        font-size: x-large;
        font-weight: bold;
        padding-bottom: .25em;
        margin-bottom:.50em;
        border-bottom: 1px solid @tuscany;          
    }

    & a.target-chapter{
        .cnx-gentext-n{
            &:before{content: "testing";}           
        }   
        color:red ; 
    }
} 
```

HTML：

```
<div class="toc">
  <div class="title">
    Table of Contents
  </div>

  <ul>
    <li xmlns:d="http://docbook.org/ns/docbook" xmlns:db=
    "http://docbook.org/ns/docbook" xmlns:pmml2svg=
    "https://sourceforge.net/projects/pmml2svg/" xmlns:c="http://cnx.rice.edu/cnxml"
    xmlns:ext="http://cnx.org/ns/docbook+" xmlns:svg="http://www.w3.org/2000/svg"
    xmlns:mml="http://www.w3.org/1998/Math/MathML" class="toc-chapter">
      <a href="#idm3792312" class="target-chapter"><span class=
      "cnx-gentext-chapter cnx-gentext-autogenerated">Chapter</span> <span class=
      "cnx-gentext-chapter cnx-gentext-n">1</span><span class=
      "cnx-gentext-chapter cnx-gentext-autogenerated">.</span> <span class=
      "cnx-gentext-chapter cnx-gentext-t">Aging and the Elderly</span></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:03:00.297

根据您提供的信息，我假设 LESS 正在生成以下 css 选择器（我实际上并*没有*在 LESS 中重新编码您的问题，这只是我的解释）：

```
.book .toc a.target-chapter .cnx-gentext-n:before {content: "testing";} 
```

哪个应该[基于这个 fiddle](http://jsfiddle.net/W67TB/)工作。我假设您正在支持的浏览器中进行测试`:before`（不是某些旧版本的 IE）。因此，要解决此问题，您需要：

1.  验证这样的选择器实际上正在生成。
2.  如果不是，请确定您的代码实际上正在生成什么选择器字符串（如果有），这可能会导致您解决问题。

如果正在生成这样一个正确的选择器字符串，那么您需要查看其他 css（您还没有发布，所以我只是在这里推测）：

1.  是否有一些更具体（似乎不太可能）的选择器字符串针对同一事物并覆盖它？
2.  您是否在该伪元素上设置了`display`或`color`或`visibility`或其他属性，实际上“隐藏”了添加的“测试”视图？`:before`
3.  您的*实际用例*是否将图像作为`content`并且您是否看到它没有出现在打印中（这将是一个完全不同的问题）？

基本上，如果您的选择器字符串正确，则可能会发生许多其他事情，我们需要更多详细信息来解决它。如果它没有像上面那样出现，那么我很想知道它在生产什么。

# objective-c - Objective C - 覆盖设置器以接受不同类型的对象

> ID：11349994
> 
> 赞同：0
> 
> 时间：2012-07-05T18:03:45.883
> 
> 标签：objective-c, ios

我正在尝试覆盖 an 的设置器，`NSManagedObject`以便我可以传入不同类型的对象，进行转换，然后设置属性。像这样的东西：

```
- (void)setContentData:(NSData *)contentData
{
    NSString *base64String;
    // do some stuff to convert data to base64-encoded string
    // ...
    [self willChangeValueForKey:@"contentData"];
    [self setPrimitiveValue:base64String forKey:@"contentData"];
    [self didChangeValueForKey:@"contentData"];
} 
```

因此，在这种情况下`contentData`， my 的字段`NSManagedObject`是 an `NSString *`，我想让 setter 接受 an`NSData *`然后我将其转换为 an`NSString *`并将其保存到模型中。但是，如果我尝试这样做，我会从编译器收到有关尝试将 an 分配给 an 的`NSData *`警告`NSString *`：

```
myObject.contentData = someNSData;

-> Incompatible pointer types assigning to 'NSString *' from 'NSData *__strong' 
```

有没有更好的方法来解决这个问题，或者我应该完全避免设置器并创建自定义“设置器”，允许我在没有编译器警告的情况下传入`NSData *`和设置字段？`NSString *`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:56:19.587

我认为这是一个例子，你与工具和框架的斗争是一种重要的设计气味。不要试图为您的类覆盖基本属性的预期数据类型。

You didn't say whether the NSManagedObject you are subclassing is under your control. If it's going to be part of your design to have it be something of a template for management of other types of contentData than NSString, then declare it as type id in the root class and specialize in the subclasses. That should prevent the warning.

Probably, you want to follow a Cocoaism: don't subclass. Can you achieve whatever functionality you're looking for from the superclass by say extracting it into a helper class that is held as a property by each of the varying-behavior managed object classes?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:25:18.513

跟进我的“ `setContentData: (id) contentData`”评论，尝试这样的事情：

```
- (void)setContentData:(id)thingToWorkWith
{
    NSString * base64String = nil;

    if(thingToWorkWith isKindOfClass: [NSData class])
    {
       // convert data to string   
    }

    if(thingToWorkWith isKindOfClass: [NSString class])
    {
        // set up base64 string properly
    }

    if(base64String)
    {
        // do some stuff to convert data to base64-encoded string
        // ...
        [self willChangeValueForKey:@"contentData"];
        [self setPrimitiveValue:base64String forKey:@"contentData"];
        [self didChangeValueForKey:@"contentData"];
    }
} 
```

确保去掉`@synthesize`.m 文件中 contentData 的 " " 位，同时创建一个 "getter" 方法，并且因为你使用 " `id`" 作为 setter 参数，你*可能*需要调整你的 " `@property`" 声明少量。我还没有完全尝试过您正在尝试做的事情（即对这种技术不做任何保证）。