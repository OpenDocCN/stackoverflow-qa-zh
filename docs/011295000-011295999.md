# StackOverflow 问答 11295000-11295999

# string - 有没有软件可以收缩单词组合？

> ID：11295003
> 
> 赞同：3
> 
> 时间：2012-07-02T13:47:39.910
> 
> 标签：string

我认为这是一种常见的情况，当人们需要收缩某些短语来制作标识符时，要保留原来的含义。是否有软件/算法来促进它？

我有一百个单词组合，每个大约 20 个字符长，我想将它们变成不超过 12 个字符长的标识符。

一个例子：

```
CUSTOMER_ACCOUNT -> CUSTOMER_ACC
or even
CUSTOMER_ACCOUNT -> CUST_ACC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:16:54.457

**解决方案 A**
手动执行，将您的单词加载到任何文本处理编辑器中，使用您的单词运行 Find-And-Replace，例如：

*   寻找：`CUSTOMER`
*   用。。。来代替：`CUST`

它是人类可读的，但需要手动工作。

* * *

**解决方案 B**
使用哈希表：

```
哈希 | 短语
------------------------------
哈希1| 用户账号
哈希2| CUSTOMER_ACCOUNT_CREDIT

```

哈希函数将是唯一的，您可以定制它的长度，问题是，它不是人类可读的。

* * *

**解决方案 C**
如果你将它存储在某个地方（db、xml 等），你可以有一个类似的结构

```
metacode
struct
{
   GUID id;
   string Name;
} 
```

每个短语都有自己唯一的 id 和文本。在内部，您使用 GUID，但出于显示目的，您使用文本表示。

# ruby-on-rails - Rails form_for 选择框第一个条目应该为空

> ID：11295007
> 
> 赞同：0
> 
> 时间：2012-07-02T13:48:01.177
> 
> 标签：ruby-on-rails, ruby, form-for

我正在使用如下所示的查询填充我的选择框：

```
<%=f.select :acoustic, options_for_select(User.includes(:roles).where(
            :roles => {:description => "Acoustic"}).collect{|u|[[u.name,u.surname].join(" ")]}) %> 
```

但是我希望选择框的默认选项是一个空字符串。我试过了

```
<%=f.select :acoustic, options_for_select(["", User.includes(:roles).where(
            :roles => {:description => "Acoustic"}).collect{|u|[[u.name,u.surname].join(" ")]}]) %> 
```

但这似乎不起作用，因为该框随后由空格填充（根据需要），但它仅从查询中获取第一个结果并将其放入数组括号中。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:54:20.037

尝试添加`:prompt => ' '`. 我认为这会做你想要的。

# objective-c - 使用重叠执行缓冲/窗口添加 CMSampleBufferRef

> ID：11295012
> 
> 赞同：0
> 
> 时间：2012-07-02T13:48:16.753
> 
> 标签：objective-c, ios, avfoundation, core-audio, vdsp

我正在尝试对我使用 iPhone 上的 AVAssetReader 从视频文件中检索的 PCM 音频数据执行一些基本的 DSP 功能。我正在正确读取缓冲区，每个缓冲区的样本数为 8192（默认情况下是这样吗？可以更改吗？）。但是，我需要对不长 8192 个样本的切片执行加窗、fft 和各种其他操作。事实上，我想一次处理 512 个样本，每个切片之间有 50% 的重叠。我一直在深入研究 Apple 的 Accelerate/vDSP 框架，我认为我可以处理处理等等，只是不确定如何以我想要的方式实际拆分我的信号。我有很强的 DSP 背景，但不幸的是，我的 DSP 编程经验几乎以 MATLAB 结束。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T05:55:03.413

在深入挖掘之后，我在 CoreAudio 开发者工具的 PublicUtility 中找到了 CASpectralProcessor，它来自版本。4.3 以后不再与 XCODE 捆绑在一起。要下载，请转到 [https://developer.apple.com/downloads/index.action?name=for%20Xcode%20-](https://developer.apple.com/downloads/index.action?name=for%20Xcode%20-)

CASpectralProcessor 正是我所需要的，一个完整的频谱分析仪，包括自定义窗口长度、窗口类型、跳跃大小。甚至使用重叠/相加来执行 IFFT！

希望这对任何人都有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T00:35:56.953

您可以将这些大缓冲区中的 1 个或 2 个切成所需长度较短的多个缓冲区，并将这些较短的缓冲区或切片提供给您的处理例程。

# c# - Telerik RadDatePicker 控件

> ID：11295016
> 
> 赞同：0
> 
> 时间：2012-07-02T13:48:27.503
> 
> 标签：c#, telerik

我正在使用 Telerik 的 RadDatePicker 控件，我认为它本质上是一个 DateTime 控件，我想提取选定的日期并将其字符串到变量中。如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T13:56:33.417

在 C# 中：

```
DateTime? selectedDate = RadDatePicker1.SelectedDate;
//to string
string date="";
if(selectedDate!=null)
{
   date=selectedDate.Value.ToShortDateString();//or selectedDate.Value.ToString("d");
}
else
{
   //handle the case when user has not selected any date, and selectedDate is null
} 
```

[您可以按照msdn](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)中的文章格式化字符串表示形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T19:39:36.820

这就是我所做的：

```
string myDate = RadDatePicker1.SelectedDate.HasValue ?
                RadDatePicker1.SelectedDate.Value.ToShortDateString() :
                string.Empty; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-31T10:33:30.960

DateTime dt =Convert.ToDateTime(RadDatePicker1.SelectedDate); 字符串 temp = dt.ToShortDateString();

[在Telerik DatePicker Control](http://www.telerik.com/forums/how-to-get-only-date-part-from-of-selected-date-in-raddatepicker)找到答案

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-02T13:59:50.517

```
String.Format("{0:d}", RadDatePicker1.SelectedDate.ToString()); prints just date alone 
```

# sql - 不能使用 pgxml_xpath

> ID：11295018
> 
> 赞同：0
> 
> 时间：2012-07-02T13:48:28.307
> 
> 标签：sql, postgresql

我正在使用 PostgreSQL 9.1，我认为它应该支持这种 XML 集成，但我无法让它工作。我试试这个查询：

```
select data from ddm_table_data order by pgxml_xpath(data, '//xmltest/col1/text()', '', ''); 
```

它出现了以下错误：

```
ERROR: function pgxml_xpath(xml, unknown, unknown, unknown) does not exist
SQL state: 42883
Hint: No function matches the given name and argument types. You might need to add explicit type casts. 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:32:02.653

> 我错过了什么吗？

就像错误所说的那样 - 没有这样的功能。不过有一个叫做“xpath”。

[手册是你的朋友](http://www.postgresql.org/docs/9.1/static/functions-xml.html)。

# c++ - 环境路径目录迭代

> ID：11295019
> 
> 赞同：1
> 
> 时间：2012-07-02T13:48:31.713
> 
> 标签：c++, parsing, path, environment-variables, boost-filesystem

我找不到任何关于如何*迭代*（*解析*`PATH`）环境变量中存在的目录的代码（C 和 C++ Boost.Filsystem），最好以独立于平台的方式。编写起来并不难，但如果标准模块可用，我想重用它们。链接或建议任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:22:04.150

这是我之前使用的：

```
const vector<string>& get_environment_PATH()
{
    static vector<string> result;
    if( !result.empty() )
        return result;

#if _WIN32
    const std::string PATH = convert_to_utf8( _wgetenv(L"PATH") ); // Handle Unicode, just remove if you don't want/need this. convert_to_utf8 uses WideCharToMultiByte in the Win32 API
    const char delimiter = ';';
#else
    const std::string PATH = getenv( "PATH" );
    const char delimiter = ':';
#endif
    if( PATH.empty() )
        throw runtime_error( "PATH should not be empty" );

    size_t previous = 0;
    size_t index = PATH.find( delimiter );
    while( index != string::npos )
    {
        result.push_back( PATH.substr(previous, index-previous));
        previous=index+1;
        index = PATH.find( delimiter, previous );
    }
    result.push_back( PATH.substr(previous) );

    return result;
} 
```

这只会在每个程序运行时“计算”一次。它也不是真正的线程安全，但见鬼，与环境无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-03T07:17:24.303

这是我自己的代码片段，没有高级提升库：

```
if( exe.GetLength() )
{
    wchar_t* pathEnvVariable = _wgetenv(L"PATH");

    for( wchar_t* pPath = wcstok( pathEnvVariable, L";" ) ; pPath ; pPath = wcstok( nullptr, L";" ) )
    {
        CStringW exePath = pPath;
        exePath += L"\\";
        exePath += exe;

        if( PathFileExists(exePath) )
        {
            exe = exePath;
            break;
        }
    } //for
} //if 
```

# java - 使用 Java 从数据库中删除表

> ID：11295020
> 
> 赞同：0
> 
> 时间：2012-07-02T13:48:46.423
> 
> 标签：java, jdbc

如果任何线程仍在使用该表，如何从数据库中删除该表。我有强制删除表的要求。我正在使用一些或混乱的线程，所以我需要用力放下。有什么方法可以丢表。

# vb.net - VB.NET - Microsoft.Office.Interop.Outlook - 工作站锁定时不起作用？

> ID：11295022
> 
> 赞同：0
> 
> 时间：2012-07-02T13:49:00.373
> 
> 标签：vb.net, interop, outlook, windows-xp

我的[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)应用程序旨在与 Outlook 一起工作以执行以下操作。

1.  每 10 秒检查一次新的未读电子邮件（计时器），
2.  从每个字段（To、From、Date、Subject、Body 等）捕获数据并存储在 SQL 表中，
3.  从收件箱中删除电子邮件。

此应用程序可以完美运行，直到工作站因屏幕保护程序超时而锁定自身。解锁 PC 后，它会恢复正常操作并处理积压的电子邮件。您可能会说只是禁用屏幕保护程序，但是这台 PC 只能通过 Microsoft[远程桌面连接](http://en.wikipedia.org/wiki/Remote_Desktop_Services#Remote_Desktop_Connection)使用共享用户帐户访问，因此这是不可能的。

这在 Windows XP SP3 和 Outlook 2003 下运行。我的问题不是真正找到解决方案，更多的是找到原因。但显然，一个解决方案会很好。

这是应用程序中的一段代码，它是基本的 Microsoft.Office.Interop.Outlook VB.NET 代码：

```
Public Sub Outlook_GetMail()

    Dim sFileName As String = "senderexcludedlist.txt"
    Dim ssenderexcludedlist As String = ""

    If System.IO.File.Exists(sFileName) = True Then
        Dim objReader As New System.IO.StreamReader(sFileName)

        Do While objReader.Peek() <> -1
            ssenderexcludedlist = objReader.ReadLine()
        Loop

        objReader.Dispose()
    End If

    Dim sMessage As String = ""

    ' Create Outlook application.
    Dim oApp As Microsoft.Office.Interop.Outlook.Application = New Microsoft.Office.Interop.Outlook.Application

    ' Get Mapi NameSpace.
    Dim oNS As Microsoft.Office.Interop.Outlook.NameSpace = oApp.GetNamespace("mapi")
    oNS.Logon("Mailbox", Missing.Value, False, True) 

    ' Get Messages collection of Inbox.
    Dim oInbox As Microsoft.Office.Interop.Outlook.MAPIFolder = oNS.GetDefaultFolder(Microsoft.Office.Interop.Outlook.OlDefaultFolders.olFolderInbox)
    Dim oItems As Microsoft.Office.Interop.Outlook.Items = oInbox.Items

    ' Get unread e-mail messages.
    oItems = oItems.Restrict("[Unread] = true")

    ' Loop each unread message.
    Dim oMsg As Microsoft.Office.Interop.Outlook.MailItem
    Dim i As Integer

    For i = 1 To oItems.Count
        On Error Resume Next

        oMsg = oItems.Item(i)
        Dim strBody = oMsg.Body()
        strBody = Replace(strBody, vbNewLine, "<BR>")
        strBody = Replace(strBody, "'", "´")           

        Dim strSenderEmailAddress As String = oMsg.SenderEmailAddress

        If InStr(ssenderexcludedlist, strSenderEmailAddress) = 0 And Not oMsg.SenderName.Contains("Leeds Tech Support") Then

            sMessage = sMessage & oMsg.Subject & vbNewLine
            sMessage = sMessage & oMsg.SenderName & vbNewLine
            sMessage = sMessage & strSenderEmailAddress & vbNewLine
            sMessage = sMessage & oMsg.CC & vbNewLine
            sMessage = sMessage & oMsg.ReceivedTime & vbNewLine
            sMessage = sMessage & oMsg.Body & vbNewLine
            sMessage = sMessage & "---------------------------" & vbNewLine & vbNewLine
            MsgLog.Text = sMessage & MsgLog.Text

            'INSERT SQL HERE
        End If
        oMsg.UnRead = False
        oMsg.Delete()
    Next

    ' Log off.
    oNS.Logoff()

    ' Clean up.
    oApp = Nothing
    oNS = Nothing
    oItems = Nothing
    oMsg = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:23:40.123

我不能高度推荐您查看 Outlook Redemption (http://www.dimastr.com/redemption/home.htm)。这将允许您与 Exchange 交互，而不必与 Outlook 混为一谈。我有几个应用程序基本上可以完成您尝试做的事情；其中一些作为服务运行，另一些在定时作业上被调用或交互运行，但它们都没有任何关于用户是否登录的问题。

# google-apps-script - 在哪里保存 GAS 以通过多个电子表格访问？

> ID：11295026
> 
> 赞同：0
> 
> 时间：2012-07-02T13:49:08.953
> 
> 标签：google-apps-script

我在电子表格中编写了一个脚本，该脚本在电子表格提交时触发。

但是，由于我有几个类似的电子表格，我想将代码放在一个中心位置并在每个电子表格中链接/导入。（也就是说，我想维护一份代码副本，如果我进行改进，它应该会自动神奇地反映在每个电子表格中）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:14:46.200

将您的代码放在一个独立的脚本中（从 Drive 中的 Create>More>Script 菜单或仅从 script.google.com 创建它）。在每个电子表格中，添加一个脚本，该脚本仅包含您的第一个脚本作为库并将 onOpen 等委托给库中的函数。当您更新独立脚本时，您需要进入每个电子表格并将库的版本号更新为最新版本，仅此而已。

# java - JVM 语言是受 Java 内存模型约束还是仅受 Java 编程语言约束？

> ID：11295029
> 
> 赞同：3
> 
> 时间：2012-07-02T13:49:11.900
> 
> 标签：java, multithreading, jvm

Java 的内存模型是 Java 编程语言的特性还是 JVM 的特性？JVM 语言是受 Java 内存模型约束还是仅受 Java 编程语言约束？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T13:52:23.720

严格来说，Java 内存模型[是 Java 语言规范的一部分，](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4)而不是[Java 虚拟机规范](http://docs.oracle.com/javase/specs/jvms/se7/html/index.html)。但是，JVM 规范在很大程度上依赖于 JLS 来指定操作的细节，并且 Java 内存模型适用于每个执行的字节码，无论它最初是从哪种语言编译的。因此，所有 JVM 语言都绑定到它（或从中受益，取决于您如何看待它）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T13:52:37.900

内存模型适用于整个 JVM，而与编写字节码的源语言无关。当它是字节码时，它是字节码。

# python - 可以在 python 2.6 中导入 objc 模块，但不能在 python 2.7 中导入

> ID：11295030
> 
> 赞同：1
> 
> 时间：2012-07-02T13:49:15.397
> 
> 标签：python, module, osx-snow-leopard, pyobjc

我的系统：Mac OS X 10.6.8、gcc 4.2、python 2.7、xcode 3.2.3

我使用 python 2.7 并且尝试执行时出错：`import objc`，它返回：`ImportError: No module named objc`。

看起来 objc 模块不存在。但实际上我已经安装了 objc 模块。Snow Leopard 已经预装了 pyobjc，我还使用 python2.6 进行了检查（我的 Mac 中有 python 2.7 和 2.6）。因此，如果我使用 python2.6 调用`import objc`，我没有得到任何错误，这意味着`objc`存在，我可以毫无问题地使用该模块......但是如果我使用 python 2.7 导入，我会得到`ImportError: No module named objc`错误。

有没有人有任何解决方案？仅供参考，python2.6 预装了 OS X，而 2.7 是手动安装的。我已经使用 2.7 几个月了，没有任何问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T13:50:28.843

Python C 扩展模块`objc`不能在 python 版本之间重复使用。您必须`objc`单独安装 2.7 的模块。

通常，不同的 python 安装（例如 2.6 或 2.7 或 3.2）使用单独的模块导入位置，并且您通常会*根据*python 设置安装扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T13:55:36.543

通常，使用一个 python 安装安装的包不适用于其他 python 安装。您可以通过弄乱`sys.path`（或通过在您的环境中设置 PYTHONPATH ）并将您的模块安装到一个公共位置来使它们可用，但是，正如@MartijnPieters 所指出的，如果它是一个 C 扩展，您需要重新构建python 2.7的模块（然后你不能把它放在一个公共的地方）。通常，这很简单：

```
<sudo> python2.6 setup.py install #install for python 2.6
<sudo> python2.7 setup.py install #install for python 2.7 
```

因为该命令`python`通常只是指向您首选 python 安装的（软）链接。

sudo 可能需要也可能不需要，具体取决于您的 python 实现在您的路径上的位置。

顺便说一下，这也适用于纯 python 模块。由于源代码通常不会占用太多空间，如果您要在 python 2.6 和 python 2.7 之间来回切换，这可能是安装所有模块的好方法。

`easy_install`如果您用于安装软件包，也会发生同样的事情：

```
easy_install-2.6 somepackage
easy_install-2.7 somepackage 
```

# jquery - 如何通过 getJSON 读取更深层次的 json

> ID：11295031
> 
> 赞同：2
> 
> 时间：2012-07-02T13:49:17.827
> 
> 标签：jquery, json, getjson

我对 Jquery getJSON 函数有一点问题。

我的json在这里

```
{ "entries": [
    {
        "type": "status",
        "SID": "X999_Y999",
        "from": {
            "name": "Tom Brady",
            "id": "X12"
        },
        "message": "Json message no 1! ",
        "actions": {
            "UP_link": "123456",
            "Comment_link": "7891011"
        },
        "created_time": "2010-08-02T21:27:44+0000",
        "Comments": [
            {
                "CID": "1234",
                "name": "Tom Brady",
                "UID": "1234",
                "Text": "My comment",
                "when_comment": "2010-08-02T21:27:44+0000"
            },
            {
                "CID": "1234",
                "name": "Tom Brady",
                "UID": "1234",
                "Text": "My comment",
                "when_comment": "2010-08-02T21:27:44+0000"
            }
        ]
    }
] } 
```

我用这个来阅读

```
$.getJSON('json4test.json',
    function(data) {            
        $.each(data.entries, function(entryIndex, entry) {
        var html = '<li class="top-level">name=' + this.from.name +', comment = '+this.Comments.Text+ '</li>';
        $("#results").append(html);
        });
    }); 
```

我实际上可以读取 this.from.name 的数组，但是为什么读取 this.Comments.Text 的结果是“未定义”。

我怎样才能正确地阅读这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T13:51:49.397

`this.Comments.Text`是一个数组，所以你也需要循环遍历它。

```
$.each(this.Comments, [...]); 
```

在循环内，您可以访问`Text`每个评论的属性。请参阅[jsbin 上的示例](http://jsbin.com/okafus/3/)（检查控制台的输出）。

# c# - 如何避免区分大小写的功能？

> ID：11295032
> 
> 赞同：-11
> 
> 时间：2012-07-02T13:49:18.733
> 
> 标签：c#, winforms, string

```
string a = "sea";  
string b = "SEA"
if (a == b)... 
```

无论字符大小写如何，我怎么能说这两个字符串是相同的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T13:51:06.540

使用字符串。比较：

[http://msdn.microsoft.com/en-us/library/zkcaxw5y.aspx](http://msdn.microsoft.com/en-us/library/zkcaxw5y.aspx)

```
if (string.Compare(a, b, true) == 0)
{
 ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T13:51:58.957

```
if (0 == String.Compare(a, b, true))... 
```

[http://msdn.microsoft.com/en-us/library/zkcaxw5y.aspx](http://msdn.microsoft.com/en-us/library/zkcaxw5y.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T13:53:33.593

使用[String.Equals()](http://msdn.microsoft.com/de-de/library/c64xh8f9.aspx)并使用正确的 StringComparison-Value：

```
if(a.Equals(b, StringComparison.CurrentCultureIgnoreCase))
{
   ...//strings are equal
} 
```

@OP：请遵循[whathaveyoutried.com](http://www.whathaveyoutried.com)的指南并阅读文档... ...这样您就可以自己回答类似的问题，最终您将了解更多关于语言和技术的知识.. . :)

# jquery - 将状态分配给列表项并检索它们所处的状态 - jquery

> ID：11295037
> 
> 赞同：0
> 
> 时间：2012-07-02T13:49:29.200
> 
> 标签：jquery, jquery-ui, toggle

我有一个使用 jqueryUI 的可排序列表。我希望这些列表中的每一个都有 4 个不同的状态。所以我为每个列表项分配了一个切换功能。如果说我要通过表格提交此信息，我如何才能获得每个项目的状态？这可能吗？任何帮助都感激不尽。谢谢

```
$(".sortedli").toggle(function(){
    //state 1
    $(this).css("background-color","white");},
    function(){
    //state 2
    $(this).css("background-color","green");},
    function(){
    //state 3
    $(this).css("background-color","red");},
    function(){
    //state 4
    $(this).css("background-color","yellow");}
  );

<ul id="coll-selected-list" class="droptrue ui-sortable">
              <li class="sortedli" style="">blah</li>
              <li class="sortedli" style="">blah</li>
              <li class="sortedli" style="">blah</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:12:34.907

您可以在提交表单时为它们中的每一个创建一个隐藏的输入元素，并在允许提交继续之前将这些隐藏元素附加到表单：

```
$(myform).submit(function(){
    var li_1_state = document.createElement('input');
    $(li_1_state).attr({'type':'hidden','name':'li_1_state'});
    $(li_1_state).val(*grab the state here*);
    $(myform).append(li_1_state);
    // repeat for the other list elements
}); 
```

# css - CSS 在 IE7 中不起作用

> ID：11295038
> 
> 赞同：-2
> 
> 时间：2012-07-02T13:49:31.197
> 
> 标签：css, internet-explorer-7

此 CSS 适用于 IE8 和更新版本（以及 Chrome），但不适用于 IE7。具体来说，当我将鼠标悬停在 div 上时，工具提示不会出现。我需要为 IE7（和 IE6）更改什么？

```
.headertooltip, .headertooltip:visited
{
    color: #0077AA;
    float: left;
    height: 40px;
    text-decoration: none;
    width: 20px;
}

.headertooltip div
{
    background-color: black;
    color: #fff;
    left: 50px;
    padding: 5px 10px 5px 40px;
    position: absolute;
    text-decoration: none;
    top: 82px;
    visibility: hidden;
    width: 900px;
    z-index: 10;
}

.headertooltip:hover div
{
    position: absolute;
    visibility: visible;
} 
```

**更新：**

我已经更新了代码以使用鼠标事件来显示 div/工具提示，但这在 IE7 中仍然不起作用。这让我认为问题在于我的标记/CSS。

我试图在 jsFiddle 中创建一个示例。它不起作用，但你明白了。将鼠标悬停在左侧的小黑框上（我添加它只是为了让您可以看到目标）应该会出现工具提示。

[http://jsfiddle.net/szyN4/](http://jsfiddle.net/szyN4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:11:30.120

IE6 对`:hover`伪类的支持极少，而 IE7 则不完整。

尝试将其更改`.headertooltip:hover div`为`.headertooltip div:hover`取悦 IE 冒泡机制的奇怪之处。它可能会解决您的问题（当然，您必须将其包含在 IE7 的条件样式表中）。

你也可以使用 JavaScript 通过实现`mouseenter`和来回避这个问题`mouseleave`。请参阅[我发布的关于 IE 关于鼠标事件的创新的答案，](https://stackoverflow.com/a/10518865/547020)以供快速参考。

### 参考

*   [quirksmode 上的 CSS 支持表](http://www.quirksmode.org/css/contents.html)
*   [`mouseover`和`mouseout`怪癖模式](http://www.quirksmode.org/dom/events/mouseover.html)

# java - 如何在 Intellij 中自动附加依赖项的源代码？

> ID：11295040
> 
> 赞同：1
> 
> 时间：2012-07-02T13:49:44.643
> 
> 标签：java, eclipse, intellij-idea, dependencies

我有一个项目（用 Maven 构建），它有很多内部依赖项；其中一些依赖项是使用 Maven 构建的，并且可以将源代码与中央存储库中的二进制文件（和 Javadoc）一起部署；说这些是依赖项 A. 但是一些依赖项没有源（作为存储库中的 jar）并且不能设置为在构建时与源一起部署（巨大的 Ant 脚本，没有人想破坏它）；说这些是依赖 B.

使用 Intellij 进行调试时，我从这些依赖项中获取类，我想查看它们的源代码。IDEA 让我选择从工件存储库下载源代码（这只适用于依赖项 A）或从本地文件夹附加它们。我有一个包含依赖项 B 源的文件夹，我总是设置该文件夹。

是否可以将 Intellij 设置为自动下载所有源（对于在存储库中有源的依赖项），或者，如果没有，则在加载项目时从可配置的本地文件夹中为所有依赖项附加它们？或者有这个插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:19:15.413

恐怕不可能自动进行这样的配置。考虑将所有源代码保留在 Maven 存储库中，在这种情况下，您可以将 IDEA 配置为自动下载它们。

# postgresql - PostgreSQL：从列值向时间戳添加间隔

> ID：11295045
> 
> 赞同：18
> 
> 时间：2012-07-02T13:49:55.297
> 
> 标签：postgresql, postgresql-8.4

我需要添加来自带有时间戳的整数列的分钟数，以与另一列进行比较。

这是一个例子：

```
 SELECT t1.id_liame, t1.id_table, t1.periodicidade , t3.data_extracao, 
    CASE WHEN(NOW() < (e.data_extracao + INTERVAL t1.periodicidade || '
    MINUTES')) 
    THEN 'yes' ELSE 'no' END
    FROM table1 as t1 LEFT JOIN liame_has_extracao as t2 USING(id_liame)
    LEFT JOIN extracao as t3 USING(id_extracao) 
```

`l.periodicidade`是整数（分钟）
我需要验证是否`data_extracao(timestamp)`大于 then `NOW() + l.periodicidade(integer - minutes)`。

我该怎么做？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-02T14:28:07.123

您可以这样编写查询：

```
SELECT 
   t1.id_liame,
   t1.id_table,
   t1.periodicidade,
   t3.data_extracao,
   CASE
      WHEN(NOW() < (t3.data_extracao + (INTERVAL '1 min' * t1.periodicidade))) 
      THEN 'yes' ELSE 'no'
   END
FROM table1 AS t1
LEFT JOIN liame_has_extracao AS t2 USING(id_liame)
LEFT JOIN extracao AS t3 USING(id_extracao) 
```

如您所见，您可以将间隔与整数相乘，因此`INTERVAL '1 minute'`您可以定义基本单位并乘以实际时间间隔。

希望有帮助

# node.js - 如何在离线服务器上安装 npm -g

> ID：11295050
> 
> 赞同：30
> 
> 时间：2012-07-02T13:50:05.587
> 
> 标签：node.js, offline, npm

我需要在离线服务器上安装“全局”npm 应用程序。

安装普通应用程序很容易：

```
npm install 
```

然后打包生成的文件。手动或使用*npm pack*。

但是，我怎样才能安装全局应用程序（具有某种安装脚本），例如*永远*没有互联网？

```
npm install -g forever 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-10-29T18:51:14.957

试试[npmbox](https://github.com/arei/npmbox)，它是 npmzip 的新名称，它允许您通过一个文件安装离线 npm 包

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-02T14:05:19.440

您可以从 tarball 文件安装东西，查看[npm 文档](http://npmjs.org/doc/install.html)。你可以找到永久压缩包的 URL`npm view forever dist.tarball`并下载它。尝试这样的事情：

```
curl -so forever.tar.gz `npm view forever dist.tarball 2> /dev/null`
npm install ./forever.tar.gz -g 
```

但是您可能也必须对所有依赖项执行此操作。可能有更好的方法，但这是我在搜索中发现的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-05-04T21:47:04.197

好吧......经过一天尝试使其与上述参考（npmbox 或离线-npm）一起工作后，想出了一些更简单的方法。感谢 npmbox，我不得不说。这个想法是从具有在线访问权限的实例中保留缓存，然后在离线实例中使用它。

**在有互联网的机器上：**

1 - 清除 npm 缓存：`npm cache clear`

2 - 安装包，让我们说它的 xyz：`npm install -g **package.x.y.z**`

3 - 将缓存复制到一个文件夹中......让我们称之为任何东西（我假设npm缓存在根文件夹中，对此不确定）： `cp -R /.npm/* **/cache-whatever-folder**`

**在没有互联网的机器上：**

4 - 将此缓存文件夹带到没有互联网的实例，然后清理缓存并使用它安装（我不会说明如何复制文件夹:)

`npm cache clear`

`npm install --global --cache **/cache-whatever-folder** --optional --cache-min 99999999999 --shrinkwrap false **package.x.y.z**`

完毕

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-07-17T12:07:02.740

**离线安装 PM2：-**

> 在 RHEL-7 上的 Node-v6.10.3 和 Npm-3.10.10 上测试

**转到具有互联网连接的机器：-**

```
#npm install -g npmbox
#npmbox npmbox
#scp npmbox.npmbox root@offline-server-ip:. 
```

**在没有互联网连接的情况下转到机器：-**

```
#ssh  root@offline-server-ip 
#tar --no-same-owner --no-same-permissions -xvzf npmbox.npmbox
#npm install --global --cache ./.npmbox.cache --optional --cache-min 99999999999 --shrinkwrap false npmbox 
```

**转到具有互联网连接的机器：-**

```
#npm install pm2 -g
#npmbox pm2
#scp pm2.npmbox root@offline-server-ip:. 
```

**在没有互联网连接的情况下转到机器：-**

```
#npmunbox pm2.npmbox --global
#pm2 ls 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-12-20T09:09:39.387

我创建了[offline-npm](https://www.npmjs.com/package/offline-npm)来以干净的方式安装所有依赖项。对于没有使用 node-gyp 的模块，一切都应该按照描述的方式工作。

如果您需要`node-gyp`（通常在线安装），请考虑将 ~/.node-gyp 复制到该离线机器。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-08-14T13:38:01.707

试试[npmzip](https://npmjs.org/package/npmzip)

```
npm install -g npmzip
npmzip <package> 
```

您将在当前目录中获得 tarball 这可能会被移动到目标机器并且：

```
npmunzip <tarball> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-04-14T13:28:42.737

使用[纱线](https://yarnpkg.com/en/)：

1.  在互联网机器上（配置本地缓存位置）：

    ```
    yarn config set yarn-offline-mirror ~/yarn-offline-mirror/ 
    ```

2.  在离线机器上（配置本地缓存位置）：

    ```
    yarn config set yarn-offline-mirror ~/yarn-offline-mirror/ 
    ```

3.  在离线机器上，找出全局安装位置在哪里：

    ```
    yarn global bin 
    ```

    （或用 设置`yarn config set prefix <file_path>`）

4.  在离线机器上，将其添加到您的路径中。例如：

    ```
    echo 'export PATH=$PATH:'"$(yarn global bin)" >> ~/.bashrc  
    source ~/.bashrc # reload 
    ```

5.  在互联网机器上，下载`forever`的依赖项：

    ```
    mkdir new-cli-forever/
    cd new-cli-forever/
    yarn add forever 
    ```

    然后复制`new-cli-forever/yarn.lock`并`~/yarn-offline-mirror/`到离线机器。（`rm -rf new-cli-forever/`现在可以了。）

6.  在离线机器上，`forever`从本地缓存安装：

    ```
    cp /path/to/imported/yarn.lock .
    cp -n /path/to/imported/yarn-offline-mirror/* ~/yarn-offline-mirror/
    yarn global add --offline forever
    rm -f ./yarn.lock 
    ```

有关更多信息，请参阅我的帖子：[https ://assafmo.github.io/2018/04/11/yarn-offline.html](https://assafmo.github.io/2018/04/11/yarn-offline.html)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-10-09T16:02:44.107

列出`bundledDependencies`package.json 中的依赖项，然后运行`npm pack`以创建 tarball。把它转移到另一台机器上，`npm install <tarball>`或者手动破解它。

[https://github.com/npm/npm/issues/1349](https://github.com/npm/npm/issues/1349)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-07-05T06:35:19.120

> # npmbox 已过时

使用`npm pack`命令（[npm docs](https://docs.npmjs.com/cli/pack.html)），无需安装任何东西。

### 单包

如果您只需要一个包（例如`forever`），您可以运行：

```
npm pack forever 
```

> 此命令会将其提取到缓存中，然后将 tarball 作为 -.tgz 复制到当前工作目录

然后，从您创建包的文件夹中，使用以下命令安装它：

```
npm install -g ./forever-x.y.z.tgz 
```

* * *

### 整个项目

如果您希望离线安装整个项目，请在您的`package.json`命名中包含一个属性，`bundleDependencies`并在此字段中列出您需要的所有依赖项。

```
// package.json

"dependencies": {
  "archiver": "^2.1.1",
  "axios": "^0.16.2",
  "body-parser": "^1.18.3"
},
"bundleDependencies": {
  "archiver": "^2.1.1",
  "axios": "^0.16.2",
  "body-parser": "^1.18.3"
} 
```

然后运行`npm pack`。

它将`.tgz`为您的整个项目和依赖项创建一个文件。

您只需将其复制到离线服务器并解压缩即可。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-27T09:13:17.477

在您的本地计算机或任何具有 Internet 连接的计算机上，执行

```
npm install npm-bundle -g
npm install forever -g 
```

现在，`cd /usr/local/lib/node_modules/forever`去做

```
npm-bundle 
```

它将创建一个`.tgz`文件。现在`scp/ftp`将该`.tgz`文件发送到离线服务器并执行

```
npm install forever -g 
```

参考：[这篇博客](https://fabianlee.org/2016/10/02/node-js-packaging-modules-for-offline-deployment-using-npm-bundle/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-25T21:52:19.570

在在线机器上执行：

```
# change to desired packages
packages="pm2 yarn"
for pkg in $packages; do
    mkdir "$pkg"
    curl "$(npm view "$pkg" dist.tarball)" |
    tar -xzC "$pkg" --strip-components 1
    (cd "$pkg" && npm install)
done
tar -czf packages.tar.gz $packages 
```

在离线服务器上执行：

```
npm config set offline
tar -xzf packages.tar.gz
npm install -g pm2 yarn 
```

# ios - 使用适用于 iOS 的 GTM OAuth2 检索用户电子邮件

> ID：11295055
> 
> 赞同：0
> 
> 时间：2012-07-02T13:50:30.540
> 
> 标签：ios, google-api, oauth-2.0

我已经使用 GTM OAuth 2 库成功实现了身份验证。但现在我想拥有用户的电子邮件 ID。我该如何进行。我知道我必须在这里打电话：-

```
- (void)viewController:(GTMOAuth2ViewControllerTouch *)viewController
  finishedWithAuth:(GTMOAuth2Authentication *)auth
             error:(NSError *)error {
if (error != nil) {

    NSLog(@"SIGN IN ERROR : %@", error.description);
    // Authentication failed
} else {
    // Authentication succeeded
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T00:40:57.873

使用 gtm-oauth2 登录 Google 服务时，用户的电子邮件地址在登录 auth 对象的`userEmail`属性后可用。

# ios - 在 iOS 上从 ASIHTTPRequest 转换为 AFNetworking

> ID：11295058
> 
> 赞同：3
> 
> 时间：2012-07-02T13:50:45.270
> 
> 标签：ios, asihttprequest, afnetworking

我想要做的是将一个 json 文件发布到我的服务器。我终于使用 ASIHTTPRequest 做到了，我的代码是：

```
NSURL *url = [NSURL URLWithString:@"http://foo.foo.foo"];
            ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
            [request setRequestMethod:@"PUT"];

            [request addRequestHeader:@"Authorization" value:@"Basic dslfkdsfdsflsdkfslkgflksflksdlfkg"]; 
            [request addRequestHeader:@"Content-Type" value:@"application/json; charset=utf-8"];

            [request appendPostData:[jsonString dataUsingEncoding:NSUTF8StringEncoding]]; 
            [request startSynchronous];

            NSLog(@"%@", [request responseString]); 
```

我现在需要的是上面翻译成 AFNetworking 的确切代码。有任何想法吗？？感谢您阅读我的帖子：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:48:14.400

```
AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://foo.foo.foo"]];
client.parameterEncoding = AFJSONParameterEncoding;
[client registerHTTPOperationClass:[AFJSONRequestionOperation class]];
[client setAuthorizationHeaderWithUsername:... password:...];
[client putPath:@"/path/to/resource" parameters:(_your JSON object as a dictionary_) 
            success:^(AFHTTPRequestOperation *operation, id responseObject) {
              NSLog(@"%@", [request responseString]);
          } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
              NSLog(@"Error: %@", error);
          }]; 
```

# flash - Flash 到 SignalR 的通信

> ID：11295063
> 
> 赞同：4
> 
> 时间：2012-07-02T13:50:52.160
> 
> 标签：flash, actionscript, signalr

我们有一个通过 SignalR 实时来回通信的服务。我们有一个 HTML5 前端，但我想尝试使用 AIR 制作一个 Flash/Actionscript 前端，我可以将其编译为原生 iOS/Android 应用程序。是否有可用于与 SignalR 服务器集线器通信的库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:40:07.903

目前没有 Flash/ActionScript 代理生成器。鉴于 ActionScript 基本上只是 JavaScript，因此创建起来相当简单。您需要做的就是创建一个自定义[`IJavaScriptProxyGenerator`](https://github.com/SignalR/SignalR/blob/master/SignalR/Hubs/IJavaScriptProxyGenerator.cs)实现，该实现发出一个代理，该代理可以最好地利用并将其自身暴露给 ActionScript 运行时。

您可以将 克隆[`DefaultJavaScriptProxyGenerator`](https://github.com/SignalR/SignalR/blob/master/SignalR/Hubs/DefaultJavaScriptProxyGenerator.cs)为起点（称为它`ActionScriptProxyGenerator`），然后只需替换实现中发出基于 jQuery 的模式/impl 的部分以发出基于 ActionScript 的模式/impl。

然后你要做的就是点击 Hub 端点将脚本下载到 Flash 中（或者你可以保存它并静态地构建到 Flash 组件中）然后你就可以开始运行了。

如果你最终这样做了，我相信 SignalR 项目和其他 Flash 开发人员会喜欢你将其贡献回来，所以如果你这样做，请务必发送拉取请求！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T19:36:23.940

如果您仍然感兴趣，我在这里通过 javascript 桥有一个完整的 signalR 到 as3 的工作演示：

[https://github.com/blinemedical/SignalRToAs3](https://github.com/blinemedical/SignalRToAs3)

repo 自述文件解释了正在发生的事情以及 .net 中的可编译后端和 as3/flex 中的前端以演示正在发生的事情。该示例使用旧版本的 fluorine 进行对象序列化，但任何版本都可以使用。如果您有任何问题，请随时提出

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T17:53:52.663

您可能有几个选择：

1.  使用[FluorineFX](http://www.fluorinefx.com/)，开源项目，并查看发布者/消费者的使用情况以进行实时通信。FluorineFX 会将强类型的 .Net 对象转换为 ActionScript 对象，从而为您节省大量的序列化和反序列化时间。您还可以使用 FluorineFX 进行 RPC 调用以及非实时通信。

2.  如果您更喜欢受支持的商业产品，请使用[WebOrb.NET 。](http://www.themidnightcoders.com/products/weborb-for-net/overview.html)WebOrb 是全面的，并且已经存在了很长时间。它具有 FluorineFX 的所有优势，只是它是一个闭源产品。

3.  自 2001 年以来，Flash 一直支持通过 XMLSocket 进行实时、有状态的通信，这与 WebSocket 类似。您可以让 SignalR 以 XML 格式将对象发布到 XMLSocket。您必须使用此选项编写自己的 XML 序列化器和反序列化器，而且性能会更差，因为 XML 解析要慢得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-11T00:48:19.343

如果有人对此仍然感兴趣，我在[https://github.com/jmichas/SignalRF](https://github.com/jmichas/SignalRF)上有一个 SignalR Flex/AS3 客户端 swc 。它的运行方式与 .Net 客户端大致相同。使用示例可在 github 站点上找到。

# c++ - 逻辑帮助：比较值并取最小距离，同时将其从“可比较”列表中删除

> ID：11295065
> 
> 赞同：1
> 
> 时间：2012-07-02T13:50:55.547
> 
> 标签：c++, logic, root-framework

好的，我的任务是使用一种方法 (IU) 比较这个光子列表并将其与另一种方法 (TSP) 进行比较。我需要获取第一个 IU 光子并与**所有**TSP 光子比较距离，找到最小距离，然后将它们“配对”（即，将它们设置在具有相同索引的数组中）。然后，我需要获取 IU 列表中的下一个光子，并将其与所有 TSP 光子进行比较，**减去**已经选择的那个。我知道我需要使用各种布尔数组，并保留一个计数器。我似乎无法完全将其逻辑化。

下面的代码不是标准的 C++ 语法，因为它是为与 ROOT（CERN 数据分析软件）交互而编写的。如果您对语法有任何疑问以更好地理解代码，请询问。我会很高兴地回答。

我已经声明了数组和变量。您看到的类型称为 EEmcParticleCandidate，它是一种从信息树中读取的类型，我有一整套类和标头来告诉它如何表现。

谢谢。

```
 Bool_t used[2];
    if (num[0]==2 && num[1]==2) {
     TIter photonIterIU(mPhotonArray[0]);
     while(IU_photon=(EEmcParticleCandidate_t*)photonIterIU.Next()){
       if (IU_photon->E > thresh2) {
         distMin=1000.0;
         index = 0;
          IU_PhotonArray[index] = IU_photon;
         TIter photonIterTSP(mPhotonArray[1]);
         while(TSP_photon=(EEmcParticleCandidate_t*)photonIterTSP.Next()) {
           if (TSP_photon->E > thresh2) {
             Float_t Xpos_IU = IU_photon->position.fX;
             Float_t Ypos_IU = IU_photon->position.fY;
             Float_t Xpos_TSP = TSP_photon->position.fX;
             Float_t Ypos_TSP = TSP_photon->position.fY;
             distance_1 = find distance //formula didnt fit here //
             if (distance_1 < distMin){
               distMin = distance_1;;
               for (Int_t i=0;i<2;i++){
                 used[i] = false;
               } //for
             used[index] = true;
             TSP_PhotonArray[index] = TSP_photon;
             index++;
             } //if
           } //if thresh
         } // while TSP
       } //if thresh
     } // while IU 
```

这就是我目前所拥有的一切......正在进行中，我意识到所有的牙套都没有闭合。这只是一个简单的逻辑问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:04:06.550

这可能需要几次迭代。

作为粒子物理学家，您应该了解将事物分解为其组成部分的重要性。让我们从迭代所有 TSP 光子开始。看起来好像相关代码在这里：

```
TIter photonIterTSP(mPhotonArray[1]);
while(TSP_photon=(EEmcParticleCandidate_t*)photonIterTSP.Next()) {
  ...
  if(a certain condition is met)
    TSP_PhotonArray[index] = TSP_photon;
} 
```

指针也是如此`TSP_photon`，您将把它复制到数组中`TSP_PhotonArray`（如果光子的能量超过一个固定阈值），并且您很难跟踪哪些指针已经被如此复制。有一个更好的方法，但现在让我们只考虑找到最佳匹配的问题：

```
distMin=1000.0;

while(TSP_photon= ... ) {
  distance_1 = compute_distance_somehow();
  if (distance_1 < distMin) {
    distMin = distance_1;
    TSP_PhotonArray[index] = TSP_photon;  // <-- BAD
    index++;                              // <-- VERY BAD
  }
} 
```

**这是错误的。**假设你找到了一个距离最短的 TSP_photon。您尚未检查所有 TSP 光子，因此这可能不是最好的，但无论如何您都存储指针，*并增加 index*。然后，如果您找到另一个更好的匹配项，您也将存储该匹配项。从概念上讲，它应该是这样的：

```
distMin=1000.0;
best_photon_yet = NULL;
while(TSP_photon= ... ) {
  distance_1 = compute_distance_somehow();
  if (distance_1 < distMin) {
    distMin = distance_1;
    best_pointer_yet = TSP_photon;
  }
}
// We've now finished searching the whole list of TSP photons.
TSP_PhotonArray[index] = best_photon_yet;
index++; 
```

对此答案发表评论，告诉我这是否有意义；如果是，我们可以继续，如果不是，我会尽力澄清。

# javascript - 如何使用 Javascript/jQuery 将数字字符串增加 +1

> ID：11295066
> 
> 赞同：20
> 
> 时间：2012-07-02T13:50:55.853
> 
> 标签：javascript, jquery

我有以下变量：

```
pageID = 7 
```

我想在链接上增加这个数字：

```
$('#arrowRight').attr('href', 'page.html?='+pageID); 
```

所以这输出 7，我想将链接附加到 8。但如果我添加 +1：

> $('#arrowRight').attr('href', 'page.html?='+pageID+1);

我得到以下输出：1.html?=71 而不是 8。

如何将此数字增加到 pageID+1？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-02T13:51:48.343

试试这个：

```
parseInt(pageID, 10) + 1 
```

根据您的代码：

```
$('#arrowRight').attr('href', 'page.html?='+ (parseInt(pageID, 10) + 1)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T14:05:22.917

`+`恰好是字符串和数字的有效运算符，当两个参数都是数字并且至少一个不是数字时，它会给出不同的结果。一种可能的解决方法是使用仅具有数字上下文但给出相同数学结果的运算符，例如`-`. `some_var - -1`将始终与将 1 的数值加 1 相同`some_var`，无论它是否为字符串。

```
$('#arrowRight').attr('href', 'page.html?='+ (pageID - -1)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T13:52:32.737

它必须是整数，而不是字符串。试试这个：

```
pageID = parseInt(pageID)+1; 
```

然后你可以做

```
$('#arrowRight').attr('href', 'page.html?='+pageID); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-30T17:43:38.737

所有这些解决方案都假定您要加 1 的数字在整数的机器精度范围内。因此，如果您在向该字符串中添加 1 时该字符串中有足够大的数字，则不会更改该数字。

例如：

```
parseInt('800000000000000000', 10) + 1 = 800000000000000000 
```

所以我写了一个快速解决问题的方法

```
function addOne(s) {
    let newNumber = '';
    let continueAdding = true;
    for (let i = s.length - 1; i>= 0; i--) {
        if (continueAdding) {
            let num = parseInt(s[i], 10) + 1;
            if (num < 10) {
                newNumber += num;
                continueAdding = false;
            } else {
                newNumber += '0';
            }
        } else {  
            newNumber +=s[i];
        }
    }
    return newNumber.split("").reverse().join("");
} 
```

现在，使用上面的相同示例

```
addOne('800000000000000000') + 1 = '800000000000000001' 
```

请注意，它必须保留为字符串，否则最后会丢失 1。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T13:54:41.220

简单地，`$('#arrowRight').attr('href', 'page.html?='+(pageID+1));`

括号使计算首先在字符串连接之前完成。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-02T13:54:44.430

只需将添加的内容括在括号中即可更改操作顺序；如果 pageID 已经是一个数字，则不需要 parseInt()：

```
$('#arrowRight').attr('href', 'page.html?='+(pageID+1)); 
```

[演示](http://jsfiddle.net/jackwanders/KX9Q8/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-23T03:13:08.613

```
let pageId = '7'
pageId++
console.log(pageId)
```

如今，您只需要 pageID++。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-02T13:55:56.153

只要您的 pageID 是数字，这就足够了：

```
$('#arrowRight').attr('href', 'page.html?='+(pageID+1)); 
```

您看到的问题是 JavaScript 通常以从左到右的顺序执行，因此左侧的字符串导致`+`被视为连接符，因此它将 7 添加到字符串中，然后将 1 添加到字符串中，包括7.

# php - Magento 自定义运输模块多种费率不起作用

> ID：11295076
> 
> 赞同：-1
> 
> 时间：2012-07-02T13:51:33.907
> 
> 标签：php, magento, magento-1.6

**编辑**

对于所有这些运输选项，获取费率代码的调用似乎返回相同的内容。看来我需要找到一种方法来为每个运输选项定义 reate 代码。

**结束编辑**

我在 Magento 中为 UPS Freight 运输创建了一个自定义运输模块。我需要 Freight + Lift Gate、Freight + Residential 和 Freight + Lift Gate & Residential 的选项。根据另一个板上的响应，我只是创建单独的方法，而不是为每个选项设置一个复选框。

![送货选项](../Images/afec0271b8e69f3a3b07ce230f0f407d.png)

从图片中可以看出，Magento 正在正确计算价格。我遇到的问题是，当我选择一个选项并点击“更新总计”时，它会恢复为价格最低的第一个选项。检查单选按钮上的输入后，我发现它们都具有相同的值。

```
<ul>
<li>
    <input name="estimate_method[2]" type="radio" value="excellence_excellence" id="s_method_excellence_excellence_2" class="radio">
    <label for="s_method_excellence_excellence_2">Freight<span class="price">$678.88</span></label>
</li>
<li>
    <input name="estimate_method[2]" type="radio" value="excellence_excellence" id="s_method_excellence_excellence_2" class="radio">
    <label for="s_method_excellence_excellence_2">Freight (Residential)<span class="price">$744.66</span></label>
</li>
.
. and so on.
.
</ul> 
```

由于所有输入都具有相同的值“excellence_excellence”，因此价格将默认返回第一个是有道理的。不幸的是，我不知道如何解决这个问题。

下面是我的 Model 类、config.xml 和 system.xml 文件的链接。提供的任何帮助、想法或资源将不胜感激。

[模型](http://pastebin.com/kgvpScHF) [配置](http://pastebin.com/afH1Usjf) [系统](http://pastebin.com/b6HVyUKx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T05:00:52.140

我看了你的模型文件，它有这个：

```
$method->setCarrier($this->_code);
$method->setMethod($this->_code); 
```

并且 $this->_code 是“优秀”，因此您可以考虑通过添加允许的方法名称来更改方法，例如：

```
$method->setMethod($this->_code.$allowedmethod_code); //where allowedmethod_code have to be set based on your custom method names 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T02:51:36.997

试试这个

```
"<input name="estimate_method[]" 
```

这将为这个特定的输入生成一个唯一的数组索引。

# oracle - 是否有用于查询 Oracle 保留字的表？

> ID：11295077
> 
> 赞同：1
> 
> 时间：2012-07-02T13:51:34.253
> 
> 标签：oracle

有没有可以查询所有 Oracle 保留字的表？

例如，我可以查询`user_tab_cols`或`all_tab_cols`获取方便的最新表信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:01:48.147

有一个视图叫做[v$reserved_words](http://docs.oracle.com/cd/B19306_01/server.102/b14237/dynviews_2048.htm#REFRN30204)

# android - Android：wrap_content 不适用于 ListView

> ID：11295080
> 
> 赞同：32
> 
> 时间：2012-07-02T13:51:36.850
> 
> 标签：android, listview

我正在研究安卓。我希望我的列表视图水平包装其内容而不是填充所有宽度。wrap_content 属性不起作用。该怎么办？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2015-07-28T11:22:26.247

为了达到`wrap_content`高度`ListView`，我们需要使用`CustomListView`我们`extends`的原生`ListView`。

*MyListView.java*

```
public class MyListView extends ListView {

    public MyListView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public MyListView(Context context) {
        super(context);
    }

    public MyListView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        int expandSpec = MeasureSpec.makeMeasureSpec(Integer.MAX_VALUE >> 2,
                MeasureSpec.AT_MOST);
        super.onMeasure(widthMeasureSpec, expandSpec);
    }

} 
```

在您`layout`使用这样的自定义视图中，

*布局.xml*

```
<com.yourpackagename.MyListView
        ...       
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        ... /> 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-07-02T14:03:15.543

正如[Romain Guy](https://stackoverflow.com/questions/4270278/layout-width-of-a-listview)（谷歌工程师在 UI 工具包上工作）在他的帖子中所说

通过将宽度设置为`wrap_content`您告诉 ListView 与其最宽的孩子一样宽。因此，ListView 必须测量其项目并获取它必须在适配器上调用 getView() 的项目。这可能会发生多次，具体取决于布局传递的数量、父布局的行为等。

因此，如果您将 ListView 的布局宽度或布局高度设置为`wrap_content`ListView 将尝试测量附加到它的每个视图 - 这绝对不是您想要的。

**请记住：**始终避免设置`wrap_content`ListViews 或 GridViews，有关详细信息，请参阅此[Google I/O 视频](http://www.youtube.com/watch?v=wDBM6wVEO70&t=40m45s)谈论 listview 的世界

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-10T18:05:02.287

它可以通过使用LinearLayout来实现。

像这样创建示例：

```
public class LinearLayoutAdapter   {
    LinearLayout linearLayout;
    ArrayList<String>  arrayList 
    private View rootView;
    private static LayoutInflater inflater;

    public ChoicesAdapter_(ArrayList<String>  arrayList ,LinearLayout linearLayout)
    {
        this.index =index;
        this.arrayList=arrayList;
        this.linearLayout=linearLayout;
        notifyDataSetChanged();
    }
    private void notifyDataSetChanged() {
        linearLayout.removeAllViews();
        for (int i =0;i<getCount();i++){
            linearLayout.addView(getView(i,null,null));
        }
    }
    public int getCount() {
        return  arrayList.size();
    }
    public Object getItem(int position) {
        return null;
    }
    public long getItemId(int position) {
        return 0;
    }
    public View getView(final int position, View convertView, ViewGroup parent) {
       rootView = inflater.inflate(R.layout.row_list, null);
       TextView  textView = (TextView)rootView.findViewById(R.id.text);    
       textView.setText(arrayList.get(position));
        return rootView;
    }
} 
```

MainActivity 示例：

```
public class MainActivity extends Activity    {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ArrayList<String>  arrayList = new  ArrayList<String>();
        arrayList.add("Accent");
        arrayList.add("Acclaim");
        arrayList.add("Accord");
        arrayList.add("Achieva");
        arrayList.add("Aerio");
        arrayList.add("Aerostar");
        LinearLayout linearLayout = (LinearLayout)findViewById(R.id.linearLayout);
        linearLayoutAdapter= LinearLayoutAdapter(arrayList,linearLayout);
    }
} 
```

XML 示例：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:gravity="center"
    android:textColor="@color/dark_gray"
    android:background="@color/white"
    android:textSize="20dp"
    android:text=""  /> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-02T14:03:06.127

```
I want my list view to wrap its content horizontally and not to fill all the width. 
```

在列表视图的情况下，您不能提供**wrap_content**，因为如果您为列表视图提供 wrap_content ，则只会显示**前三个项目（行）**，其余的将被忽略。所以不要使用 wrap_content 。始终使用**fill_parent**或 match_parent列表显示

为了在 List View 上进行高效设计，您可以看到这个[World of ListView](http://www.youtube.com/watch?v=wDBM6wVEO70&list=PL734A052F802C96B9&index=23&feature=plpp_video)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-06T19:48:23.643

我知道我回答这个问题有点太晚了。但在我看来，如果您希望您的 ListView 具有某种 wrap_content 行为，您可以将其开始和结束边距设置为某个静态值。这在我的情况下有效。如果您担心为各种屏幕尺寸做这件事，那么有一个非常有用的库来处理这种情况。可扩展的 DP。请在 github 中检查一次。

# c# - Ajax Accordion Panes：单独的必填字段验证器仅由其窗格中的按钮触发

> ID：11295082
> 
> 赞同：3
> 
> 时间：2012-07-02T13:51:40.083
> 
> 标签：c#, asp.net, ajaxcontroltoolkit, accordion

我有一个 Ajax 手风琴，使用 c# asp.net，带有几个面板。在我的第一个面板中，我有两个必填字段，并在用户单击按钮时进行验证。现在我想在另一个窗格中显示更多内容，但如果我将它们设为必填字段，则导致对其进行验证的按钮单击也会显示第一个面板的消息。

是否可以将每个面板中的验证器分开？我错过了一些完全明显的东西吗？

如果有任何代码有帮助，我将编辑并包含请求的代码。感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:58:00.787

您可能想为此使用[`ValidationGroup`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basevalidator.validationgroup.aspx)s 。

基本上，您可以在要组合为相同值的每个验证控件上设置“ValidationGroup”属性（有点像 CSS 类）。然后，将希望将该组绑定到的按钮的“ValidationGroup”属性设置为相同的字符串。

具体来说，您将`Panel1`容器中的所有验证控件设置为同一组（因此添加`ValidationGroup="panelOneGroup"`到它们的标记中）。然后，将相同的属性添加到您只想验证该面板的按钮。

像这样的东西：

```
<ajaxToolkit:Accordion ID="myAccordion" >
    <Panes>
        <ajaxToolkit:AccordionPane >
            <Content>
                <asp:RequiredFieldValidator id="validator1" 
                    ValidationGroup="panelOneGroup" >
                </asp:RequiredFieldValidator>

                <asp:RequiredFieldValidator id="validator2" 
                    ValidationGroup="panelOneGroup" >
                </asp:RequiredFieldValidator>

                <asp:Button ID="button1"
                    ValidationGroup="panelOneGroup" />
            </Content>
        </ajaxToolkit:AccordionPane >
        <ajaxToolkit:AccordionPane >
            <Content>
                <asp:RequiredFieldValidator id="validator3" 
                    ValidationGroup="panelTwoGroup" >
                </asp:RequiredFieldValidator>

                <asp:RequiredFieldValidator id="validator4" 
                    ValidationGroup="panelTwoGroup" >
                </asp:RequiredFieldValidator>

                <asp:Button ID="button2"
                    ValidationGroup="panelTwoGroup" />
            </Content>
        </ajaxToolkit:AccordionPane >
    </Panes>
</ajaxToolkit:Accordion > 
```

可以在此处找到 MSDN 上的详细示例：[指定验证组](http://msdn.microsoft.com/en-us/library/ms227424.aspx)

# mysql - MySQL使空格很重要

> ID：11295084
> 
> 赞同：9
> 
> 时间：2012-07-02T13:51:43.707
> 
> 标签：mysql

显然是一个非常罕见的问题，但 IMO 非常烦人和错误：相比之下，MySQL 中没有使用尾随空格：

```
mysql> SELECT "A" = "A ";
+------------+
| "A" = "A " |
+------------+
|          1 |
+------------+
1 row in set (0.00 sec) 
```

这在以下情况下尤其成问题：

```
mysql> SELECT COUNT(*) FROM eq WHERE name != TRIM(name);
+------------+
| COUNT(*)   |
+------------+
|          0 |
+------------+
1 row in set (0.00 sec)

mysql> UPDATE eq SET name=TRIM(name);
Query OK, 866 row affected (0.01 sec)
Rows matched: 650907  Changed: 866  Warnings: 0 
```

有没有办法配置 MySQL 以正确处理空格？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T13:56:17.260

根据[手册](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)，一种快速解决方法是使用 LIKE：

> 根据 SQL 标准，LIKE 在每个字符的基础上执行匹配，因此它可以产生与 = 比较运算符不同的结果：
> 
> ...
> 
> 特别是，尾随空格很重要，这对于使用 = 运算符执行的 CHAR 或 VARCHAR 比较不正确...

只要您不使用任何通配符，这应该与`=`. 这个 Stack Overflow 问题似乎支持以下假设：[Equals(=) vs. LIKE](https://stackoverflow.com/questions/543580/equals-vs-like)

该手册没有说明是否[`STRCMP()`](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#function_strcmp)比`=`空格更严格，我现在无法尝试 - 这可能也值得一看，因为它更清楚地*说明了为什么* `=`不使用。

tombom 建议的二进制比较也是一种选择，但会产生其他副作用（例如更严格的变音符号比较，例如，`A`并且`Ä`会有所不同），您可能想要也可能不想要。[有关在此问题](https://stackoverflow.com/questions/5526334/what-effects-does-using-a-binary-collation-have)中使用二进制比较的效果的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T13:56:03.987

您可以使用 LIKE

```
SELECT "A" LIKE "A "; 
```

将返回 0 但

```
SELECT "A" LIKE "A"; 
```

返回 1

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T13:56:33.183

二进制比较是一个神奇的词。

[MySQL手册中的二进制比较](http://dev.mysql.com/doc/refman/5.1/en/charset-binary-op.html)

```
mysql> SELECT 'a' = 'A';
        -> 1
mysql> SELECT BINARY 'a' = 'A';
        -> 0
mysql> SELECT 'a' = 'a ';
        -> 1
mysql> SELECT BINARY 'a' = 'a ';
        -> 0 
```

# entity-framework - 实体框架，一对多，多列

> ID：11295087
> 
> 赞同：0
> 
> 时间：2012-07-02T13:51:49.293
> 
> 标签：entity-framework

如果我有一个主表，比如说订单，以及一个项目子表，并且项目表有一个项目编号字段，但它也有一个可以为空（可选）的颜色字段，仅适用于某些项目。如何使用实体框架在更新订单表的同时更新项目表？

这是到目前为止我所拥有的代码示例。两个问题，我只输入我的一个项目，根据我的研究表明，我不能在项目表中添加另一个字段？

```
 foreach (Guid c in AllItems)
    { Items.OrderItemID = Guid.NewGuid();
      ITemsOrderID = order.OrderID;
      ITems.ItemID = c;
      If (ItemID = ItemThatLetsYouChoseAColorID)
      {
          Items.ItemColorID = ColorID;
      } else {
          Items.ItemColorID = null;
      }
     }
     context.Orders.AddObject(Orders);
     context.Items.AddObject(Items);
     context.SaveChanges(); 
```

我的 Orders 表插入了一条记录，并且 Items 插入了一条记录。恐怕我在这里缺少一些基本的东西。顺便说一句，这是实体框架 4.0，它。我相信，不需要使用EntityKey。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:09:42.860

您`Items`仅在`foreach`.

你有没有测试过类似的东西：

```
foreach (Guid c in AllItems)
{
    var Item = new Item();

    Item.OrderItemID = Guid.NewGuid();
    Item.OrderID = order.OrderID;
    Item.ItemID = c;
    If (ItemID = ItemThatLetsYouChoseAColorID)
    {
        Item.ItemColorID = ColorID;
    }
    else
    {
        Item.ItemColorID = null;
    }

    context.Items.AddObject(Items);
}

context.Orders.AddObject(order);
context.SaveChanges(); 
```

我不确定你的意思是什么

> 我无法在 items 表中添加其他字段

您应该更准确地了解您的实际期望。插入一行，在表中添加一列...？什么是“场”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T19:52:21.970

这是工作代码。我在 foreach 项目循环之外有新项目，因此覆盖了该值。另外，我需要将每一个添加到上下文中。我遇到了困难，希望它可以帮助其他人：

```
 <-fill the order object->
    foreach (Guid i in Items)
    {
        **Items item = new Items();**
        item.ItemID = Guid.NewGuid();
        item.OrderID = order.OrderID;
        if (i == ItemWithColorGuid)
        {
            foreach (Guid c in Colors)
            {
                **Items color = new Items();**
                color.ItemsID = Guid.NewGuid();
                color.OrderID = order.orderID;
                color.itemID = g;
                color.colorID = c;
                context.item.AddObject(color);
            }
        }
        else
        {
            item.ItemID = i;
            item.ColorID = null; 
            context.item.AddObject(item);
        }                        
    }
    context.orders.AddObject(order);
    context.SaveChanges(); 
```

# objective-c - 我应该在块中使用“self”来访问类方法吗？

> ID：11295110
> 
> 赞同：3
> 
> 时间：2012-07-02T13:52:57.810
> 
> 标签：objective-c, objective-c-blocks, class-method

我有一个类来执行一些小的转换，比如 NSDate 到具有特定格式的 NSString 等。

每个方法都是类方法，例如`+[Tools humanReadableStringForDate:(NSDate*)date];`

我有时需要我的方法`+[Tools A]`来调用`+[Tools B]`我的类的方法，但在一个块内。

我应该创建一个`__block safeSelf = self;`还是没有必要因为我使用类级别的方法？

编辑：这是一个例子，不是我的实际代码：

```
@implementation FileManager 

+(void) uploadEveryFile:(void (^)(NSObject*))thingToDo :(NSArray*) fileArray {

    for(NSString *s in fileArray) {
        [[SomeWebAPI uploadFile:s withSuccess:^(NSNumber *responseCode) {
            [self logUploadOk:s];
        }];
    }
}

+(void) logUploadOk:(NSString*)s {
    NSLog(@"File upload ok : %@", s)
}

@end 
```

我认为这使事情更清楚。我喜欢在可能`self`的情况下对类方法使用关键字——在这个例子中我可以，因为我在同一个类中并引用一个类级别的方法——因为它似乎更有意义，如果我必须修改它会很有帮助我的班级名称。

那么这样写是否正确？它是否有效但并不正确？我真的需要打电话`logUploadOk`using`[FileManager logUploadOk:s]`吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T23:07:44.443

没有必要使用`__block`或`__weak`类似的东西。您正在谈论`self`类方法，即类对象本身。类对象存在于整个程序中，因此像保留和释放这样的内存管理对它没有任何影响。因此，您无需担心保留周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:06:57.570

```
+ (NSString *)A
{
    NSString *something = [Tools B];
    NSString *something = [self B]; // both are same inside class method
}
+ (NSString *)B
{
//..
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-02T13:57:19.630

这是不必要的，因为您使用的是类方法，而不是实例方法。要调用 Class 方法，请使用类名：`[Tools doThisForMe]`.

但是，在这种情况下，听起来您可以使用[Objective-C 类别。](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)它将允许您扩展不同的类并使您的代码更具可读性，例如`[myNSDate humanReadableString]`.

在您的情况下，它将遵循以下原则：

NSDate+人类.h

```
@interface NSDate (Human)
- (NSString *)humanReadableString;
@end 
```

NSDate+Human.m

```
@implementation NSDate (Human)
- (NSString *)humanReadableString {
  // do whatever you want.
  // now 'self' refers to the NSDate instance
} 
```

@结尾

# sql - Oracle PL/SQL, how to debug a complex stored proc?

> ID：11295113
> 
> 赞同：0
> 
> 时间：2012-07-02T13:53:09.833
> 
> 标签：sql, oracle, plsql

In the Oracle PL/SQL, how to debug a complex stored proc ?

for example, the codes below, it is using loop + correlated subquery. how to fully understand it ? I have learned that the best way to debug is divide-and-conquer, then how to cut this coding into small pieces ?

Thanks

```
v_count := 1;

while v_count > 0
LOOP

update tbl_A a
set a.name = (select b.name from tbl_B b where a.id = b.id)
where a.id = (
    select c.id from tbl_C c where c.id = a.id
)

v_count := sql%rowcount;
END LOOP 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:38:59.660

你没有说你正在使用什么工具，但如果你获得了 Oracle SQL Developer，它包括一个调试器，允许你逐行执行代码、设置断点等等——所有典型的调试功能图形用户界面。

而且，它是免费的。[在这里得到它](http://www.oracle.com/technetwork/developer-tools/sql-developer/downloads/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:56:12.097

尝试注释掉部分代码，然后将到目前为止的结果存储在一个变量中。然后你可以像这样选择它：`SELECT @varname`至少 MYSQL 5.x 是这样处理它的。

# ios - 将 NSString 文本注入另一个 UIViewController

> ID：11295114
> 
> 赞同：0
> 
> 时间：2012-07-02T13:53:12.660
> 
> 标签：ios, properties, uiviewcontroller, nsstring, code-injection

我正在尝试将`NSString`文本传递给`UIViewController`iOS 中的按钮“点击”事件。我写了以下代码。

```
self.detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];

self.detailViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:self.detailViewController animated:YES];

self.detailViewController.urlAddress = @"http://www.google.com"; 
```

我已经`urlAddress`在`detailViewController`. 在我用`NSLog`in测试之后`viewWillAppear`，它只显示空值，而不是`urlAddress`字符串。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T13:56:42.590

您在视图控制器已经呈现后设置字符串。切换它，你应该很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:00:27.587

注意调用方法的顺序：

1.  `initWithNibName`
2.  `viewDidLoad`
3.  `viewWillAppear`

只有在三个人都完成工作后，您的字符串才会更改。

将您的代码更改为：

```
self.detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
self.detailViewController.urlAddress = @"http://www.google.com";
self.detailViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:self.detailViewController animated:YES]; //Triggers viewWillAppear eventually 
```

# android - camera takes picture where it temporary save picture in android?

> ID：11295119
> 
> 赞同：0
> 
> 时间：2012-07-02T13:53:23.597
> 
> 标签：android, camera

i m working on project and requirements of the project is to **do some action if camera takes any picture** any suggestions on how can i do this......

this issue is solvable but it need your help so please give any suggestions [http://developer.android.com/reference/android/hardware/Camera.html#ACTION_NEW_PICTURE](http://developer.android.com/reference/android/hardware/Camera.html#ACTION_NEW_PICTURE) this link is not have any help about my question

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:59:43.437

利用

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, pathToSave);
startActivityForResult(intent, TAKE_PIC); 
```

和

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    switch (requestCode) {
    case TAKE_PIC:
            //Do with the "pathToSave" what you want 
```

# jquery - onclick jquery slidetoggle default state from cookie

> ID：11295122
> 
> 赞同：0
> 
> 时间：2012-07-02T13:53:40.873
> 
> 标签：jquery, onclick, slidetoggle

by default my div element `#bannerbox` displays as normal, I'm using the following code to hide the div element.

```
<div id="toggleclose">
    <a href="#" class="closebutton" onclick="jQuery('#bannerbox').slideToggle('normal');" title="Close"><span class="hidespan">Close</span></a>
</div> 
```

What i would like to do is when the button is clicked, as well as the current functionality, have the state then saved to cookie so that the next time the page is loaded the visibility of the div element is retained from the last state saved to the cookie.

This is the current code I'm working with, which does not currently work.

```
<script type="text/javascript">
    $(document).ready(function(){
         var openToggle = getCookie("open") || false; 
         if ( openToggle )    
              $("#bannerbox").show();
         else 
              $("#bannerbox").hide();

         $('.closebutton').click(function() {    
              var closed = $("#bannerbox").is(":none");    
              if ( closed )       
                   $("#bannerbox").show();    
              else        
                   $("#bannerbox").hide();    

              setCookie("open", !closed, 365 );
         });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:02:31.890

看看这个：[http ://coding.smashingmagazine.com/2010/10/11/local-storage-and-how-to-use-it/](http://coding.smashingmagazine.com/2010/10/11/local-storage-and-how-to-use-it/)

```
$(document).ready(function(){
     var $banner = $("#bannerbox");
     localStorage.getItem('bannerActive') ? $banner.show() : $banner.hide();

     $('.closebutton').click(function() {    
          $banner.toggle();        
          localStorage.setItem('bannerActive', $banner.is(":visible");
     });
}); 
```

# backbone.js - 使用 Backbone.js 和 pushState 进行书签和页面重新加载

> ID：11295130
> 
> 赞同：0
> 
> 时间：2012-07-02T13:54:31.210
> 
> 标签：backbone.js, pushstate

我一直在尝试在我的应用程序中添加可收藏的各种路线，如果我没有启用 pushState，这是可能的。用户可以输入 mysite.com/#/view/30 并呈现正确的视图。

但是，如果我要启用 pushState 并转到 mysite.com/view/30，我会收到一个解析错误（通过根页面导航可以正常工作）。

我目前正在使用 Require.js 使用 Backbone.js 样板，并且解析错误出现在我的 config.js 文件中。我相当确定问题不在于 Require，但我不完全确定。坦率地说，我也不一定知道要在此处粘贴什么代码，因为我相信我更缺乏对 hashbang 与 pushState 之间区别的基本理解。

我已经阅读了 HTML5 功能，但是我的具体问题的答案仍然难以捉摸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:44:42.407

您在 pushState 中指向的路径中不存在您的 Backbone 路由器打开的页面。pushState 纯粹是为了改变 URL 表示。您必须进行一些服务器配置更改才能将所有请求路由回主索引文件。

# css - 控制悬停区域和 CSS 图像精灵

> ID：11295134
> 
> 赞同：0
> 
> 时间：2012-07-02T13:54:47.947
> 
> 标签：css, image, hover, sprite

使用 CSS 图像精灵，我正在创建一个“交互式”图像，将鼠标悬停在某些区域上会改变图像的一部分。一切正常，但是一旦您在悬停区域上方，就无法控制悬停区域。

例如，假设主区域是 400x400 像素，悬停区域是距离左上角 100x100 的区域。当您进入悬停区域时，要显示的“新”图像为 200x200。这会出现，但随后此“新”200x200 图像变为活动状态；然后，我可以在这个新图像中移动任何位置（比如 150x150），并且悬停图像仍然存在，即使现在我不在 100x100 原始悬停区域之外。有什么方法可以限制这种情况，即使显示 200x200 的悬停图像，活动区域也始终为 100x100？

我的（缩减的）CSS（areaTest.css）是：

```
#bigArea {
    width: 400px;
    height: 400px;
    background: url(areaImage.jpg) no-repeat;
    margin: 10px auto; padding: 0;
    position: relative;
}

#bigArea li {
    margin: 0;
    padding: 0;
    list-style: none;
    display: block;
    position: absolute;
}
#bigArea a {
    display: block;
    text-indent: -9999px;
    text-decoration: none;
}

#littleArea {
    width: 100px;
    height: 100px;
}
#littleArea a {
    width: 100px;
    height: 100px;
}
#littleArea a:hover {
    width: 200px;
    height: 200px;
    background: url(areaImage.jpg) 0px -410px no-repeat;
} 
```

我的 HTML 是：

```
<link href="areaTest.css" rel="stylesheet" type="text/css">
<div>
    <ul id="bigArea">
        <li id="littleArea"><a href="#"></a></li>
    </ul>
</div> 
```

任何帮助将非常感激。

谢谢，果酱

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:20:05.100

我分叉了 Kyomu 的解决方案并应用了相反的方法：http: [//jsfiddle.net/FEkcx/](http://jsfiddle.net/FEkcx/)

是一个空块，位于实际具有背景图像`<a>`的 a 之上。`<div>`悬停是使用触发的`#littleArea a:hover + div`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:15:24.073

好吧，我有**一个**解决方案。“掩盖”您不希望它触发的部分（例如：使用空 div）。通过这样做，它将不再悬停在对象上。

[例子](http://jsfiddle.net/82KE8/)

[我认为使用选择器](http://w3schools.com/cssref/css_selectors.asp)（如）可能有更好的方法`+`，但这有效。

# php - 在 mysql_real_escape_string 之后使用带斜杠

> ID：11295141
> 
> 赞同：0
> 
> 时间：2012-07-02T13:55:19.260
> 
> 标签：php, mysql

我必须在表单上转义一些输入。我使用 mysql_real_escape_string 来转义该值，但它在数据库中添加了很多带有值的斜线，原因是我的输入中有一个撇号让我们说 exp。

现在为了摆脱斜杠，我在 mysql_real_escape_string 之后使用了stripslashes，然后数据成功进入数据库，并且在数据库中看不到任何带有值的撇号。

```
$name = mysql_real_escape_string(trim($_POST['userame']));
$name = stripslashes(stripslashes($userame)); 
```

// 然后数据成功进入 db 没有撇号

我只是想确认一下，这是转义输入值的正确方法吗？谢谢

大研

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T14:01:33.403

1.  [禁用魔术行情](http://www.php.net/manual/en/security.magicquotes.disabling.php)
2.  `mysql_real_escape_string(stripslashes($_POST['username']));`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T14:01:06.193

不，这不对。检查您的 php.ini 中的[`magic_quotes_gpc`](http://www.php.net/manual/en/security.magicquotes.disabling.php)设置。如果您无法禁用它，请在使用`mysql_real_escape_string`. 该链接有一种方法可以将其从和`$_POST`全局剥离。或者更好的是，使用带有[PDO的](http://ca3.php.net/manual/en/book.pdo.php)[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)`$_GET``$_COOKIE`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:04:30.983

如果你启用了magic_quotes_gpc，你应该在转义之前使用stripslashes() 函数——否则你会转义两次，因此会出现大量斜线。

[http://se.php.net/manual/en/function.mysql-real-escape-string.php](http://se.php.net/manual/en/function.mysql-real-escape-string.php)

# javascript - 重置javascript函数

> ID：11295142
> 
> 赞同：1
> 
> 时间：2012-07-02T13:55:20.330
> 
> 标签：javascript, jquery

在 onclick 事件后，我无法让 javascript 函数自行重置。当我单击“开始”按钮时，计数器开始计数。但是当我单击“重置”按钮时，什么也没有发生。我需要将计时器重置为“0:00”并等待我再次单击“开始”。这是我的代码：

```
<script type="text/javascript">
var seconds = 0;
var minutes = 0;

function zeroPad(time) {
    var numZeropad = time + '';
    while(numZeropad.length < 2) {
        numZeropad = "0" + numZeropad;
    }
    return numZeropad;
}

function countSecs() {
    seconds++;

    if (seconds > 59) {
         minutes++;
         seconds = 0;
    }
    document.getElementById("timeBox").innerHTML = "Time " + zeroPad(minutes) + ":" + zeroPad(seconds);
}

 function startTimer() {
     action = window.setInterval(countSecs,1000);
 }

function resetTimer() {
    var seconds = 0;
    var minutes = 0;
 }

</script>

<body>
<button onclick = "startTimer()">Start</button>
<div id="timeBox">Time 00:00</div>

<button onclick = "resetTimer">Reset</button>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:58:30.753

调用[clearInterval()](https://developer.mozilla.org/en/DOM/window.clearInterval)方法。

```
function resetTimer() {
   window.clearInterval(action);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T13:58:48.657

这是一个作用域问题，在函数中使用 var 会使*秒*和*分钟*成为该函数的局部变量。删除前导变量将使您朝着正确的方向开始。

```
function resetTimer() {
  seconds = 0;
  minutes = 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:00:06.353

您的代码中有两个错误：

首先，在按钮中您错过了`()`函数名称之后的名称，以便进行实际调用：

```
<button onclick = "resetTimer()">Reset</button> 
```

其次，您没有使用`window.clearInterval()`( [MDN docu](https://developer.mozilla.org/en/DOM/window.clearInterval) ) 停止间隔，因此计时器继续运行。

```
// just to make it an explicit global variable. already was an implicit one.
var action;

// rest of your code
function resetTimer() {
    // clear the timer
    window.clearInterval( action );
    // reset variables
    var seconds = 0;
    var minutes = 0;
    // update output
    document.getElementById("timeBox").innerHTML = "Time " + zeroPad(minutes) + ":" + zeroPad(seconds);
 } 
```

[我在这里](http://jsfiddle.net/5NUzd/1/)设置了一个工作小提琴。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T14:03:35.427

Onclick 事件必须调用函数，例如：`onclick="resetTimer();"`末尾带有括号。如果您未定义`type="button"`. 我不认为你想要重置计时器来停止计时器，所以我添加了一个停止按钮。

[http://jsfiddle.net/iambriansreed/WRdSK/](http://jsfiddle.net/iambriansreed/WRdSK/)

```
<button type="button" onclick="startTimer();">Start</button>
<div id="timeBox">Time 00:00</div>

<button type="button" onclick="resetTimer();">Reset</button>
<button type="button" onclick="stopTimer();">Stop</button>

<script>

    window.seconds = 0;
    window.minutes = 0;

    function startTimer() {
        window.action = setInterval(countSecs,1000);
    }
    function resetTimer() {
        seconds = 0;
        minutes = 0;
    }
    function stopTimer() {
        clearInterval(action);        
        seconds = -1;
        minutes = 0;
        countSecs();
    }
    function zeroPad(time) {
        var numZeropad = time + '';
        while(numZeropad.length < 2) {
            numZeropad = "0" + numZeropad;
        }
        return numZeropad;
    }

    function countSecs() {
        seconds++;

        if (seconds > 59) {
             minutes++;
             seconds = 0;
        }
        document.getElementById("timeBox").innerHTML = "Time " + zeroPad(minutes) + ":" + zeroPad(seconds);
    }

</script> 
```

​</p>

# jpa - Play 框架和 JPA

> ID：11295144
> 
> 赞同：0
> 
> 时间：2012-07-02T13:55:28.090
> 
> 标签：jpa, playframework

测试 Play 框架和 JPA。

我使我非常简单的测试应用程序黯然失色。在eclipse中导入工程，确认play jar文件在我的eclipse java构建路径：C:\play-2.0.2\repository\local\play\play_2.9.1\2.0.2\jars\play_2.9.1.jar

在我的简单 Item 实体类中，我导入我的实体应该扩展的 play.db.jpa.Model

在这里，eclipse是不能解决类的！

请注意，以下 jar 文件不包含 Model 类 - 我理解这对于将 PLAY 与 JPA 集成是必不可少的。

play_2.9.1.jar -> play\db\jpa\Model

jpa 仅包括以下内容： TransactionalAction$1.class JPA.class TransactionalAction.class Transactional.class JPAPlugin.class JPA$1.class

我错过了什么？我的路径中是否包含错误的 jar？Model.class 在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:02:36.527

请务必`import play.db.ebean.*;`，Play 2.0 使用 Ebean 作为模型扩展。

文档可以在[http://www.playframework.org/documentation/2.0.1/JavaEbean找到](http://www.playframework.org/documentation/2.0.1/JavaEbean)

# python - 在 Pandas for Python 中对数据进行 Winsorize

> ID：11295147
> 
> 赞同：3
> 
> 时间：2012-07-02T13:55:35.250
> 
> 标签：python, regression, pandas

我正在尝试`pandas`为 Python 运行 Winsorized 回归。[非常有用](http://pandas.sourceforge.net/stats.html#standard-ols-regression)的用户手册提供了这个示例代码：

```
winz = rets.copy()
std_1year = rolling_std(rets, 250, min_periods=20)
cap_level = 3 * np.sign(winz) * std_1year
winz[np.abs(winz) > 3 * std_1year] = cap_level
winz_model = ols(y=winz['AAPL'], x=winz.ix[:, ['GOOG']],window=250) 
```

第四行在我看来是错误的：RHS 不应该是`cap_level[np.abs(winz) > 3 * std_1year]`吗？

谢谢您的帮助！我对使用 Pandas 数据框仍然很陌生，并想确保我理解正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:31:03.927

编辑：对不起，误解了这个问题！

您说得对，这对于大多数类型都是错误的；但是`pandas.DataFrame`特别支持使用布尔掩码设置值；它将从 RHS 中选择相应的值和相应的时间值。在引擎盖下它正在使用[`np.putmask`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.putmask.html).

你可以自己检查一下：

```
>>> df = pandas.DataFrame(np.linspace(0.0, 1.0, 10).reshape(5, 2))
>>> df[df > 0.5] = -df
>>> df
          0         1
0  0.000000  0.111111
1  0.222222  0.333333
2  0.444444 -0.555556
3 -0.666667 -0.777778
4 -0.888889 -1.000000 
```

# python - MySql insert statment is giving Error 1064: exited abnormally with signal 11: Segmentation fault: 11

> ID：11295150
> 
> 赞同：1
> 
> 时间：2012-07-02T13:55:38.117
> 
> 标签：python, mysql, database

I am trying to insert data into a mySql database using a python script. When I run the python script I receive the following error:

```
Error 1064: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'dataBaseName' exited abnormally with signal 11: Segmentation fault: 11
')' at line 2 
```

Here is the insert statement in my code:

```
with con:
    cur = con.cursor()
    for mID,l,tm,s,f,p,m in zip(messageID,level,time,sender,facility,pid,message):
        cur.execute("INSERT INTO LogData(ASLMessageID,Level,Time,Sender,Facility,PID,Message) VALUES('"+ mID + "','" + l + "'," + tm + ",'" + s + "','" + f +"','" + p +"','" + m + "')") 
```

There are 7 lists one for each column in the table and I am trying to simply fill the table.This worked for 4 other tables but for some reason this one is giving this error.Thanks for any help you can give.

Here is my connection code:

```
 import MySQLdb as mdb
    import sys

    con = None
    try:

      con = mdb.connect('localhost', 'root', 'password', 'dataBaseName') 
```

# android - How to run an infinite loop in Android without freezing the UI?

> ID：11295152
> 
> 赞同：9
> 
> 时间：2012-07-02T13:55:48.140
> 
> 标签：android

I'm creating and android program which needs to to continuously keep sending data over the bluetooth now I use something like this:

```
for(;;)
{
//send message
} 
```

though this works it freezes my UI and app how can I implement the same without freezing my UI?

I am sure that the app is sending the data as I monitor the data.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T14:00:44.140

把你的循环放在一个单独的线程中[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)，[`Service`](http://developer.android.com/reference/android/app/Service.html)或者只是在你的活动旁边的另一个线程中。切勿在主 (UI) 线程中进行繁重的工作、无限循环或阻塞调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-29T06:25:49.670

如果您使用的是 kotlin，那么您可以使用协程。

```
implementation "org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.7"
implementation "org.jetbrains.kotlinx:kotlinx-coroutines-android:1.3.4" 
```

`job:Job`全局初始化一个作业变量，然后执行：

```
 job = 
GlobalScope.launch(Dispatchers.Default) {
    while (job.isActive) {
        //do whatever you want
    }
} 
```

当你`job.cancel()`想让你的循环停止时做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:13:36.520

启动一个 IntentService ，它将为您创建一个后台线程来运行您的服务。按照@YellowJK 的建议调用 Looper.prepare() ，但是当您需要您的程序等待某些事情发生时调用 Looper.loop() 以便服务没有被杀死。

```
@Override
protected void onHandleIntent(Intent arg0) {
   Looper.prepare();
   //Do work here
   //Once work is done and you are waiting for something such as a Broadcast Receiver or GPS Listenr call Looper.loop() so Service is not killed
   Looper.loop();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T14:00:18.843

您需要将工作移至另一个线程（UI 线程除外），以防止 ANR。

```
new Thread( new Runnable(){
        @Override
        public void run(){
            Looper.prepare();
            //do work here
        }
    }).start(); 
```

以上是一种快速而肮脏的方法，大多数情况下首选的方法是使用 AsyncTask

# java - Building monodroid sample map applications

> ID：11295153
> 
> 赞同：4
> 
> 时间：2012-07-02T13:55:48.743
> 
> 标签：java, android, google-maps, xamarin.android, xamarin

I am using the latest download of map sample application 'MapsAndLoactionDemo' from Xamarin and in Visual Studio 2010 I get the following compile error(s):

```
Error   10
Activate(java.lang.String,java.lang.String,java.lang.Object,java.lang.Object[]) in mono.android.TypeManager cannot be applied to (java.lang.String,java.lang.String,mapsandlocationdemo.MapWithOverlayActivity,java.lang.Object[])

mono.android.TypeManager.Activate ("MapsAndLocationDemo.MapWithOverlayActivity, MapsAndLocationDemo, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null", "", this, new java.lang.Object[] {  });
    D:\Projects\Android\MapsAndLocationDemo\MapsAndLocationDemo\obj\Debug\android\src\mapsandlocationdemo\MapWithOverlayActivity.java   25  28  MapsAndLocationDemo 
```

What is wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-23T16:33:48.730

您需要在您的*模拟器上安装***google api** 您可以按照以下步骤操作：http: [//developer.xamarin.com/samples/MapsDemo/](http://developer.xamarin.com/samples/MapsDemo/)

 *> **安装 Google APIs Android SDK 插件**
> Google APIs 需要为每个 API 级别提供的“Google APIs”插件库。您需要为您希望定位的 API 级别下载它。
> 
> 要安装 Google APIs Android SDK 插件：
> 
> 1.  启动 Android SDK 管理器：`$ANDROID_SDK_PATH/tools/android`
> 2.  在 Android SDK 管理器中，单击左侧窗格中的可用包。
> 3.  在右侧窗格中，导航到树视图节点第三方附加组件/Google Inc. 附加组件 (dl-ssl.google.com)
> 4.  选中复选框，例如“Google Inc. 的 Google API，Android API 8，修订版 2”。
> 5.  单击右下角的 Install Selected 按钮。
> 6.  在“选择要安装的软件包”对话框中，选择接受单选按钮，然后单击安装按钮。

如果您在 Android 中使用**Genymotion 模拟器** [INSTALL_FAILED_MISSING_SHARED_LIBRARY 错误](https://stackoverflow.com/questions/1113088/install-failed-missing-shared-library-error-in-android/7168399#7168399)*

# mount - 如何以编程方式循环挂载？

> ID：11295154
> 
> 赞同：12
> 
> 时间：2012-07-02T11:16:26.063
> 
> 标签：mount, c

我最近写了一篇[关于如何从 Raspberry Pi.SE 上的映像文件挂载分区的指南](https://raspberrypi.stackexchange.com/q/855/86)。指令比较复杂，我有一点时间，所以想用[C 程序](https://github.com/alexchamberlain/piimg)替换它们。我已经成功列出了图像的分区并计算了适当的偏移量。

在原始说明中，我们需要运行

```
$ sudo mount -o loop,offset=80740352 debian6-19-04-2012.img /mnt 
```

我现在需要在代码中执行此操作。我在 util-linux 中找到了[mount](http://linux.die.net/man/2/mount)函数和[libmount](http://git.kernel.org/?p=utils/util-linux/util-linux.git;a=summary)。

我现在在 util-linux 中找到[了 loopdev.c 。](https://github.com/karelzak/util-linux/blob/master/lib/loopdev.c)有没有一种简单的方法来创建循环设备，还是我必须从这段代码中学习并使用 ioctl？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-09T20:12:54.287

以下函数将循环设备绑定`device`到`file`at `offset`。成功返回 0，否则返回 1。

```
int loopdev_setup_device(const char * file, uint64_t offset, const char * device) {
  int file_fd = open(file, O_RDWR);
  int device_fd = -1; 

  struct loop_info64 info;

  if(file_fd < 0) {
    fprintf(stderr, "Failed to open backing file (%s).\n", file);
    goto error;
  }

  if((device_fd = open(device, O_RDWR)) < 0) {
    fprintf(stderr, "Failed to open device (%s).\n", device);
    goto error;
  }

  if(ioctl(device_fd, LOOP_SET_FD, file_fd) < 0) {
    fprintf(stderr, "Failed to set fd.\n");
    goto error;
  }

  close(file_fd);
  file_fd = -1; 

  memset(&info, 0, sizeof(struct loop_info64)); /* Is this necessary? */
  info.lo_offset = offset;
  /* info.lo_sizelimit = 0 => max avilable */
  /* info.lo_encrypt_type = 0 => none */

  if(ioctl(device_fd, LOOP_SET_STATUS64, &info)) {
    fprintf(stderr, "Failed to set info.\n");
    goto error;
  }

  close(device_fd);
  device_fd = -1; 

  return 0;

  error:
    if(file_fd >= 0) {
      close(file_fd);
    }   
    if(device_fd >= 0) {
      ioctl(device_fd, LOOP_CLR_FD, 0); 
      close(device_fd);
    }   
    return 1;
} 
```

### 参考

1.  [linux/loop.h](http://lxr.free-electrons.com/source/include/linux/loop.h)
2.  [piimg](https://github.com/alexchamberlain/piimg)

# html - 对齐下拉菜单的 CSS

> ID：11295155
> 
> 赞同：2
> 
> 时间：2012-07-02T13:55:49.840
> 
> 标签：html, css, drupal-7, drop-down-menu

我目前正在开发一个纯 css 多级下拉菜单，但我一生都无法弄清楚如何让下拉菜单自动对齐到父菜单的左侧。

**这是一个截图**

![点击查看下拉截图](../Images/3a793591b82e9c886a8c0fe99d21e27e.png)

**这是CSS**

```
/*---------HEADER MENU---------*/
#header .content ul.menu li ul{
  display: none;
  margin: 0;
  float: left;
  padding: 0;
  position: absolute;
  z-index: 200;
}
#header .content ul.menu li ul li{
 position: relative;
 top: 20px;
 margin: 0;
}
#header .content ul.menu li:hover > ul{
 display: inline;
 float: left;
 width: 125px;
}

#header .content ul.menu li ul li li{
 width: 125px;
 float: left;
 position: absolute;}

/*---------VISITORS MENU---------*/
#block-menu-menu-visitors .content ul.menu{
  z-index: 200;
}
#block-menu-menu-visitors .content ul.menu li{
 padding: 2px 15px 2px 15px;
 display: inline-block;
 float: left;
 background-color: #ffff90;
}

#block-menu-menu-visitors .content ul.menu li:hover{
 padding: 2px 15px 2px 15px;
 float: left;
 display: inline-block;
 background-color: #ffffaa;
} 
```

**这是 HTML/PHP**

这会将我拥有的任何“标题”元素（在本例中是菜单）放在主菜单部分的正下方。

任何帮助或朝着正确的方向推动都会有所帮助！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:57:29.913

我认为...

```
#header .content ul.menu li:hover > ul{
display: block;
float: left;
width: 125px;
} 
```

可能会奏效。如果不添加html，我可以给你正确的答案。本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:22:10.390

我将首先尝试添加`list-style-type: none;`到列表项，因为这会删除这些元素具有的自然缩进。

# sql - 如何强制 Entity Framework 4.0 生成与其对应的数据库列大小相等的参数

> ID：11295156
> 
> 赞同：4
> 
> 时间：2012-07-02T13:55:49.990
> 
> 标签：sql, linq, entity-framework

我有一个非常简单的表`Member`，它由以下内容组成：

```
CREATE TABLE [dbo].[Member](
    [Member_MemberId] [int] IDENTITY(1000,1) NOT NULL,
    [Member_ExternalId] [varchar](32) NULL,
    [Member_ConsumerId] [varchar](32) NULL,
 CONSTRAINT [PK_Member] PRIMARY KEY NONCLUSTERED 
(
    [Member_MemberId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

我正在使用 EF 4.0 从数据上下文运行查询，如下所示：

```
return Members.SingleOrDefault(member => member.ExternalId == externalId); 
```

生成的 SQL 如下所示：

```
exec sp_executesql N'SELECT TOP (2) 
[Extent1].[Member_MemberId] AS [Member_MemberId], 
[Extent1].[Member_ExternalId] AS [Member_ExternalId], 
[Extent1].[Member_ConsumerId] AS [Member_ConsumerId]
FROM [dbo].[Member] AS [Extent1]
WHERE [Extent1].[Member_ExternalId] = @p__linq__0',N'@p__linq__0 varchar(8000)',@p__linq__0='Paul' 
```

`varchar(8000)`从性能 POV 来看，此查询是次优的，因为当列本身限制为 时，它会自动将 Member_ExternalId 列强制转换为`varchar(32)`。有没有办法强制 EF 生成大小与其相应行等效的动态参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:22:43.843

似乎没有办法直接实现这一点。我认为这是一个内置功能，可以保证执行计划的一致性。与此同时，我已经用存储过程替换了查询。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-05-18T12:21:13.020

我们在这种转变中遭受了很多痛苦。经过一番调查，我们在映射类中映射了一些属性，以告诉 EF 该列并不像您想象的那么大。

具有 8000 个字符长度的 SQL 参数会大大降低查询性能。我们没有在映射类中映射所有属性的长度，而是在需要性能时进行映射。

您可以像这样（经过测试）在 EntityTypeConfiguration 映射类中定义您的参数：

```
Property(t => t.ExternalId)
    .HasColumnName("Member_ExternalId")
    .HasColumnType("varchar")
    .HasMaxLength(32); 
```

或者您可以使用数据注释（未测试）

```
[Column(TypeName="varchar")]
[MaxLength(32)]
public string ExternalId {get; set;} 
```

# php - call from an array with an array

> ID：11295157
> 
> 赞同：0
> 
> 时间：2012-07-02T13:55:49.890
> 
> 标签：php, sql, arrays, get

i want to call from an array using the get array but it doesn't work what is the correct way to format this?

```
if(isset($_GET["category"])){
    $cat = 'SELECT DISTINCT `Category` FROM `products`';
    $result = $mysqli->query($cat);
    $i='0';
    while ($row = $result->fetch_array(MYSQLI_ASSOC)){
        $i++;
        $Category = $row["Category"];
        $id = array($i => $Category);
    }
    $result->close();
    $query = 'SELECT * FROM products WHERE Category="'. $id[$_GET["category"]]. '" ORDER BY Code';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:04:15.650

看来，您在循环中犯了一个错误。如果要为数组键分配值，则需要替换：

```
$id = array($i => $Category); 
```

有了这个：

```
$id[$i] = $Category; 
```

否则`$id`将始终是仅具有当前键值对的新数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:57:57.990

你的查询是错误的。利用

```
$query = "SELECT * FROM products WHERE Category='". $id[$_GET["category"]]. "' ORDER BY Code"; 
```

`order by`子句必须在子句之后`where`。

# c#-4.0 - 运行服务时打开word文档

> ID：11295161
> 
> 赞同：0
> 
> 时间：2012-07-02T13:56:04.180
> 
> 标签：c#-4.0

我写了以下语句来打开word文档。

```
<!-- language: lang-c -->

System.IO.Directory.CreateDirectory("D:\\urvashi");
objMyDoc = ApObj.Documents.Open(filename, MsoTriState.msoTrue, MsoTriState.msoTrue, MsoTriState.msoFalse);
System.IO.Directory.CreateDirectory("D:\\komal"); 
```

当我通过调试代码检查它时它工作正常，但是当通过服务运行此代码时它不能正常工作。

它正在 D 驱动器中创建目录“urvashi”，但没有在 D 驱动器中创建目录“komal”。

运行服务时第二条语句报错；可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:21:35.513

“微软目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和**NT 服务**）的 Microsoft Office 应用程序自动化，因为 Office 可能会表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。”

[http://support.microsoft.com/kb/257757/en-us?fr=1](http://support.microsoft.com/kb/257757/en-us?fr=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:24:17.147

Office 应用程序可以以交互模式而不是服务模式运行。因此不建议在服务/服务器端程序中打开任何办公文档。

# regex - 在特定位置匹配正则表达式

> ID：11295168
> 
> 赞同：0
> 
> 时间：2012-07-02T13:56:36.643
> 
> 标签：regex

是否可以使用单个正则表达式匹配字符串，我可以在其中定义它们在文本中位置的约束？

例如，给定一个十六进制编码文件，我想匹配对应于十六进制表示大于 0x40 的字符的十六进制表示。位置约束应该是匹配应该从偶数位置开始。例如，`034673911921`应该匹配 at `46`, `73`，`91`但不匹配 at `92`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:10:27.687

可以通过两个易于理解的步骤完成：首先将其拆分为字段，然后检查大小。这是一个例子`sed`，我希望它会有所帮助：

```
echo 034673911921 | sed -nr 's7([0-9][0-9])/\1 /gp' | sed -n 's/[0-3][0-9]//gp' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:02:10.277

你可以使用这样的东西：

```
^(?:..)*([4-9A-Fa-f][\da-fA-F]) 
```

这将确保在您的捕获组之前有偶数个字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T14:02:21.140

您可以在正则表达式中对位置进行编码。对于仅从偶数位置开始的示例，可能类似于

```
/^(?:..)*([4-9a-fA-F].)/ 
```

# python - 同时逐行读取两个文本文件

> ID：11295171
> 
> 赞同：64
> 
> 时间：2012-07-02T13:56:47.120
> 
> 标签：python, file, io, readfile

我有两种不同语言的两个文本文件，它们逐行对齐。即textfile1 中的第一行对应于textfile2 中的第一行，以此类推。

有没有办法同时逐行读取两个文件？

下面是文件应该是什么样子的示例，假设每个文件的行数约为 1,000,000。

文本文件1：

```
This is a the first line in English
This is a the 2nd line in English
This is a the third line in English 
```

文本文件2：

```
C'est la première ligne en Français
C'est la deuxième ligne en Français
C'est la troisième ligne en Français 
```

期望的输出

```
This is a the first line in English\tC'est la première ligne en Français
This is a the 2nd line in English\tC'est la deuxième ligne en Français
This is a the third line in English\tC'est la troisième ligne en Français 
```

有一个 Java 版本的[Read two textfile 同时行 -java](https://stackoverflow.com/questions/10831007/read-two-textfile-line-by-line-simultaneously-java)，但 Python 不使用逐行读取的 bufferedreader。那么它会怎么做呢？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-07-02T14:00:17.850

```
from itertools import izip

with open("textfile1") as textfile1, open("textfile2") as textfile2: 
    for x, y in izip(textfile1, textfile2):
        x = x.strip()
        y = y.strip()
        print("{0}\t{1}".format(x, y)) 
```

在 Python 3 中，替换`itertools.izip`为内置的`zip`.

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-02T14:00:02.497

```
with open(file1) as f1, open(fil2) as f2:
  for x, y in zip(f1, f2):
     print("{0}\t{1}".format(x.strip(), y.strip())) 
```

**输出：**

```
This is a the first line in English C'est la première ligne en Français
This is a the 2nd line in English   C'est la deuxième ligne en Français
This is a the third line in English C'est la troisième ligne en Français 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-05-23T04:11:18.837

我们可以使用`generator`更方便的文件打开，它可以很容易地支持同时对更多文件进行迭代。

```
filenames = ['textfile1', 'textfile2']

def gen_line(filename):
    with open(filename) as f:
        for line in f:
            yield line.strip()

gens = [gen_line(n) for n in filenames]

for file1_line, file2_line in zip(*gens):
    print("\t".join([file1_line, file2_line])) 
```

**笔记：**

1.  这是`python 3`代码。For `python 2`,`itertools.izip`像其他人说的那样使用。
2.  `zip`在最短的文件被迭代后将停止，`itertools.zip_longest`如果重要，请使用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-02T14:03:32.487

Python 确实允许您逐行读取，它甚至是默认行为——您只需像遍历列表一样遍历文件。

wrt/ 一次迭代两个可迭代对象，itertools.izip 是你的朋友：

```
from itertools import izip
fileA = open("/path/to/file1")
fileB = open("/path/to/file2")
for lineA, lineB in izip(fileA, fileB):
    print "%s\t%s" % (lineA.rstrip(), lineB.rstrip()) 
```

# sql - 为 xsd 文档指定路径时出错。[使用 dbms_xmlschema]

> ID：11295172
> 
> 赞同：2
> 
> 时间：2012-07-02T13:56:46.930
> 
> 标签：sql, xml, xsd, oracle10g

我的环境：

Oracle Database 10g Express Edition Release 10.2.0.1.0 - Product PL/SQL Release 10.2.0.1.0 - Production
CORE 10.2.0.1.0 Production
TNS for 32-bit Windows: Version 10.2.0.1.0 - Production

我需要注册一个“xsd”文档，以便以后能够将相应的 XML 文档上传到数据库中。

但是当我运行下面的代码时，我得到

```
 begin
    dbms_xmlschema.registerSchema(  'http://localhost:8080/db_objects.xsd',
    xdbURIType('\public\xml\db_objects.xsd').getClob(),
    TRUE,TRUE,FALSE,TRUE
    );
    end; 
```

但它会引发错误：

```
 "ORA-31001: Invalid resource handle or path name "\public\xml\db_objects.xsd" 
```

我觉得指定路径有问题，所以我尝试了以下各种选项：

但我再次得到相同的错误 xdbURIType(C:\Users\praagarwal\public\xml\db_objects.xsd').getClob(),

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-10T14:37:13.003

可能应该是正斜杠..

```
xdbURIType('/public/xml/db_objects.xsd') 
```

不是

```
xdbURIType('\public\xml\db_objects.xsd') 
```

# scala - 使用Scala中变量的类型实例化具有类型参数的类

> ID：11295173
> 
> 赞同：1
> 
> 时间：2012-07-02T13:57:13.970
> 
> 标签：scala, type-parameter

我有以下类型

```
class Translator[To <: Language] { ... }
abstract class Language
object English extends Language
object German extends Language 
```

有没有办法`Translator`从`val`type`English`或实例化`German`？

我正在寻找类似以下的东西（不起作用）：

```
val lang = if (someCondition) English else German
val translator = new Translator[classOf[lang]] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:05:26.177

问题是既不是课程`English`也不`German`是课程。您确定在这里需要泛型吗？也许组合就足够了。一个可能的解决方案是：

```
val lang = Translator(if (someCondition) English else German) 
```

具有以下类和对象：

```
case class Translator(l: Language)
trait Language
object English extends Language
object German extends Language 
```

但它的设计与你想象的完全不同......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T14:07:23.990

在 Translator 构造函数中使用语言作为类型参数：

```
class Translator[To <: Language](lang:To) {...}
abstract class Language
object English extends Language
object German extends Language

new Translator(German)
res7: Translator[German.type] = Translator@8beab46

// using class instead of object:
class Italian extends Language
new Translator(new Italian)
res9: Translator[Italian] = Translator@6bc22f58 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:35:14.040

只需`Translator`使用以下类型`German`或`English`如下实例化：

```
new Translator[German.type] 
```

编辑：

或从一个`val`

```
val x = German
new Translator[x.type] 
```

# html - 如何使 CITE 标签完全缩进？

> ID：11295174
> 
> 赞同：2
> 
> 时间：2012-07-02T13:57:16.783
> 
> 标签：html, css, indentation

如何使 CITE 标签完全缩进？我已经测试了所有的

```
padding-left: 200px;
margin-left: 200px;
text-indent: 200px; 
```

在所有情况下，只有第一行受到影响。如何右移整个段落？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T13:58:43.953

`<cite>`元素是[短语元素](http://www.w3.org/TR/html4/struct/text.html#h-9.2.1)；默认情况下，它们是内联的，而不是阻塞的。

您可以设置`display: block`它们以允许应用边距和填充。

# java - 无法从 @OneToMany 集合中删除元素

> ID：11295175
> 
> 赞同：3
> 
> 时间：2012-07-02T13:57:17.873
> 
> 标签：java, hibernate, jakarta-ee, jpa, one-to-many

我有一个实体**Entity1与****Entity2**具有**一对多**关系， 如下所示：

 ****1-实体1：**

```
@Entity
@Table(name = "Entity1", catalog = "mydb")
public class Entity1 implements java.io.Serializable {

  @OneToMany(fetch = FetchType.LAZY, mappedBy = "entity1", cascade = javax.persistence.CascadeType.ALL)
  @OrderBy("id")
  private Set<Entity2> collection = new HashSet<Entity2>(
            0);

} 
```

**2- Entity2：（**等于和哈希码方法被覆盖）

```
@Entity
@Table(name = "entity2", catalog = "advertisedb")
public class Entity2 implements java.io.Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "pkid", unique = true, nullable = false)
    @Basic(fetch = FetchType.EAGER)
    private long id;

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "fk_entity1", nullable = false)
    private Entity1 entity1;

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "apid", nullable = false)
    private Entity3 entity3;

} 
```

**3-这是我从集合中删除实体的方式：**

```
 entity1Obj.getEntity2().remove(entity2);
    log.debug("size after remove: "+ entity1Obj.getEntity2().size()); // size decreases correctly, so the entity is removed from the collection
    entity1Dao.updateEntity1(entity1); 
```

**4- DAO 方法：**

```
 public void updateEntity1(Entity1 entity1) {
        getCurrentSession().update(getCurrentSession().merge(entity1));
    } 
```

**问题：**我在控制台中得到的是应该删除的 entity2 的选择查询，没有删除查询，也没有被删除。

请告知如何解决此问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T14:39:20.943

我替换`cascade = CascadeType.ALL`为`orphanRemoval = true`，现在可以正常工作了。**

# parameters - 如何确定wsdl web服务中的方法名和参数

> ID：11295181
> 
> 赞同：22
> 
> 时间：2012-07-02T13:57:38.260
> 
> 标签：parameters, wsdl, ksoap2

我对 Web 服务和 KSoap 库没有什么问题。我在询问之前搜索了这个主题，但找不到任何东西。

问题是：我有一个类似[http://www.anyting.com/bulkService.wsdl](http://www.anyting.com/bulkService.wsdl)的网址，但我没有任何关于它的文档。我可以仅检查 wsdl 文件来确定**METHOD NAME**和**NAMESPACE**参数吗？示例：*[http ://www.webservicex.net/isbn.asmx?WSDL](http://www.webservicex.net/isbn.asmx?WSDL)*

如果可能的话，我在哪里可以找到发送请求的方法参数。

我正在开发 Android 项目，所以我使用的是 KSoap2，我需要 METHOD NAME 和 NAMESPACE。

小问题：*myservice.wsdl* url 是否相同*myservice.asmx?WSDL*

谢谢你的支持..

**编辑＃1：**我花了很多时间，我得到了正确的参数：

*   **METHOD_NAME ：** Web 服务可能有多种方法。如果您没有找到关于您的 Web 服务的文档，您可以在 wsdl 中搜索方法名称。如果您的 Web 服务扩展名是 .asmx，那么您的 wsdl 就像 ../services/service.asmx?wsdl。打开 wsdl 文件并搜索“操作名称”，这个参数就是你的方法。如果您想使用，请选择什么。

*   **NAMESPACE ：**打开您的 wsdl 并搜索“targetNamespace”。此参数是您的 NAMESPACE 参数。

*   **SOAP_ACTION ：**该参数由方法名和命名空间组成。像这样使用它 String SOAP_ACTION = NAMESPACE + METHOD_NAME;

    *   **URL：**在 wsdl 中查找“服务”元素。此元素包含“wsdlsoap:address location =”此地址是您的 Web 服务的 URL。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-12-15T15:31:03.787

这应该会有所帮助（php）：

```
$client = new SoapClient("http://my_exposed_url?wsdl");
var_dump($client->__getFunctions());    
var_dump($client->__getTypes()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T06:51:27.863

是的，你可以找到它。转到[此处](http://www.webservicex.net/isbn.asmx)并单击要查看的参数的方法。在这个例子中

GetISBNInformation 是单击它的方法，您将获得 SOAP_ACTION 和参数。使用 KSOAP 发送请求所需知道的一切。干杯。

# c# - 如何使用 Reverse(Array, Int32, Int32) 或 List ::在IList上的反向方法（Int32，Int32）？

> ID：11295184
> 
> 赞同：2
> 
> 时间：2012-07-02T13:57:44.437
> 
> 标签：c#

我的程序大量使用`Reverse`，例如`Array.Reverse(myArray,3,5)`

我希望我的程序可以同时接受`array`和`List`作为输入，所以我选择`IList`

但是，我找不到`IList`与 `Reverse`.

有一种名为 的扩展方法`Reverse`，但是它产生`IEnumerable`流而不是就地重新排列。（我认为这需要更多的复制时间）

我想过使用`cast`，但又担心`cast`效率低下。

所以我该怎么做？

最坏的情况，我做了 2 个程序，1 个取数组，另一个取 List，然后重载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:10:15.400

Linq Reverse() 扩展方法错过了一个明显的优化，它*总是*创建一个临时数组来存储元素以反转它们。这对于在列表或数组上使用来说太昂贵了。

如果您想要就地反转，那么您可以编写一个扩展方法来选择正确的 Reverse() 方法：

```
public static class MyExtensions {
    public static void Reverse<T>(this IList<T> source) {
        if (source is List<T>) {
            ((List<T>)source).Reverse();
        }
        else if (source is T[]) {
            Array.Reverse((T[])source);
        }
        else throw new ArgumentException();
    }
} 
```

您可以以相同的方式修复 Linq Reverse 方法：

```
public static class MyExtensions {
    public static IEnumerable<T> Reverse<T>(this IEnumerable<T> source) {
        if (source is IList<T>) {
            var list = (IList<T>)source;
            for (int ix = list.Count - 1; ix >= 0; --ix) {
                yield return list[ix];
            }
        }
        else {
            foreach (var item in Enumerable.Reverse(source)) {
                yield return item;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:11:50.457

OOP 方式 - 制作一个包装器，重载它十几次：

```
public void Reverse(Array arr, int index, int count)
{
    Array.Reverse(arr, index, count);
}
public void Reverse<T>(List<T> lst, int index, int count)
{
    lst.Reverse(index, count);
} 
```

每次您需要以这种方式反转另一个类似集合的类时，添加一个重载。这种方法依赖于系统内部，非常有效且健壮，但如果您愿意反转多种对象，则可能会很冗长。

我可以自己做更好的方式：

```
static class Extensions
{
    public static void Reverse(this IList target, int index, int count)
    {
        int right = index + count - 1;
        int left = index;
        while (right>left)
        {
            var tmp = target[left];
            target[left] = target[right];
            target[right] = tmp;
            right--;
            left++;
        }
    }
} 
```

只需添加范围检查/前提条件/不变量/等。此外，列表可能效率低下，因为它需要随机访问列表的内容，但我认为您无法使用“常规武器”（即不使用反射和直接内存操作）来解决它。

所以，我的建议 - 重载是要走的路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:29:02.973

如果您想要一个采用 IList 而不仅仅是 List 或 Array 的就地 Reverse 方法，您必须自己编写它。这不是一个特别复杂的算法，所以我想你有能力自己编写这样的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T13:59:21.613

`Reverse()`将产生一个`IEnumerable`直接基于列表的；不涉及复制。试一试，如果您只是迭代，它可能会更有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T14:02:14.200

`Array.Reverse()`是静态的：

```
T[] arr = ...
Array.Reverse(arr); // in-place 
```

`List.Reverse`不是 ：

```
List<T> list = ...
list.Reverse(); // in-place too 
```

* * *

还有一个LINQ扩展方法：

```
IList<T> ilist = ...
IEnumerable<T> e = ilist.AsEnumerable();
IEnumerable<T> result = e.Reverse(); // not in-place 
```

# php - MySQL查询以搜索按相对匹配排序的关键字

> ID：11295188
> 
> 赞同：0
> 
> 时间：2012-07-02T13:57:53.997
> 
> 标签：php, mysql, sql, execute, statements

我正在创建一个在线系统，将银行对账单（描述、价值、类型等）与购买者（姓名、地址）相匹配，并希望对我目前这样做的方式提供一些反馈：

```
$array = array("keywords", "taken", "from", 
               "bank", "statements", "using", "explode", 
               "function", "using", "a", "space");

$i = 0;
$r = array(); //r = relevant

while($i<count($array)) {

  $keyword = $array[$i];

  $get = mysql_query("SELECT `id` FROM `users`, `addresses` 
                      LEFT JOIN `users`.`id` = `addresses`.`user` 
                      WHERE (`users`.`frame` LIKE '%$keyword%' 
                      OR `users`.`lname` LIKE '%$keyword%') 
                      OR ((`addresses`.`address` LIKE '%$keyword%' 
                      OR `addresses`.`town` LIKE '%$keyword%') 
                      OR (`addresses`.`county` LIKE '%$keyword%' 
                      OR `postcode`.`town` LIKE '%$keyword%'));");

  if(mysql_num_rows($get)) {
    while($fetch = mysql_fetch_array($get)) {
      list($var) = $fetch;
      push_array($r, $var);
    }
  }

  $i++;

}

//count the IDs that match within the relative array to see
//which is most relative to the search 
```

有没有更好的方法来做到这一点以及将执行时间保持在最低限度？数据库完成后将达到数千个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:06:04.087

最好建立一个将每个关键字与用户联系起来的关键字表，例如：

```
keywords (keyword, user) + UNIQUE(keyword, user)

keyword1   12
keyword1   14
keyword2   3 
```

从要搜索的数据中填充关键字表后，查询变得更加优化：

```
SELECT users.* 
FROM keywords 
INNER JOIN users ON users.id = keywords.user
WHERE keyword IN ('keyword1', 'keyword2') 
```

当然，当您对用户或地址表进行更改（插入、更新、删除）时，您需要维护此表。

# ios - iPad 上的 Chrome for iOS 用户代理

> ID：11295189
> 
> 赞同：15
> 
> 时间：2012-07-02T13:57:55.217
> 
> 标签：ios, google-chrome, http-headers, user-agent

我有一个网页，从 iOS 设备查看时显示的内容略有不同。为了检测有问题的设备，站点会在用户代理字符串中查找`iPad;`、`iPod;`或。`iPhone;`

这在所有 iOS 设备上的 Safari 上都能完美运行。使用适用于 iOS 的 Chrome 进行测试，它适用于 iPhone 和 iPad 1，但不适用于 iPad 3。该网站正在获取以下（意外）用户代理字符串：

```
Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/534.53.11 (KHTML, like Gecko) Version/5.1.3 Safari/534.53.10 
```

这似乎与 chrome 菜单中的“请求桌面站点”选项有关（桌面 chrome 中的扳手图标是什么）。对于我的网站，它被禁用并且似乎被锁定到桌面而不是移动网站。对于其他站点，它已启用，并且在选择时会导致发送不同的用户代理字符串。例如：尝试[http://ifconfig.me/all](http://ifconfig.me/all)

所以我的问题是：

*   Chrome 使用什么标准来决定是否启用此选项
*   鉴于 Chrome 已将此站点强制为桌面站点，我如何呈现 iOS 特定内容（在我的情况下，链接使用由我的应用程序处理的协议）

如果您想自己测试，这里有一个页面，它简单地反映了用户代理字符串。

*   [http://minicompapp.com/Home/UserAgent](http://minicompapp.com/Home/UserAgent)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-27T17:27:30.960

浏览器将根据您是否充当伪装成桌面浏览器的移动浏览器，在使用两个用户代理字符串之间切换。

**用户代理：**

```
Mozilla/5.0 (iPhone; U; CPU iPhone OS 5_1_1 like Mac OS X; en-gb)
AppleWebKit/534.46.0 (KHTML, like Gecko)
CriOS/19.0.1084.60 Mobile/9B206 Safari/7534.48.3 
```

**“请求桌面版本”后的用户代理：**

```
Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3)
AppleWebKit/534.53.11 (KHTML, like Gecko)
Version/5.1.3 Safari/534.53.10 
```

这只是向 Web 服务器提示客户端是谁。浏览器应独立于用户代理呈现接收到的 Web 内容。

# exchangewebservices - EWS 将 LegacyDN 地址而不是 SMTP 写入联系人

> ID：11295193
> 
> 赞同：0
> 
> 时间：2012-07-02T13:58:15.340
> 
> 标签：exchangewebservices

我目前正在尝试实施一项服务，该服务使用 EWS 更新用户的 Outlook 联系人，但我在正确写入电子邮件地址字段时遇到了一些麻烦。请注意，我不是 Exchange 开发人员，而且我是 EWS 的新手。

当使用 FindItems() 方法搜索用户的联系人文件夹时，返回的联系人对象将其电子邮件地址字段作为正确的 SMTP 地址 (blah@blah.com)。但是，当我更新并保存联系人时，下一次检索该联系人时，电子邮件地址字段会显示 LegacyDN 地址（/o=Blah/ou=Exchange 管理组/cn=Recipients/cn=Blah）。即使我在更新时将完全相同的 SMTP 地址写入联系人字段，也会发生这种情况。

不知何故，EWS 似乎在内部将 SMTP 地址转换为 ExchangeLDn 地址。由于多种原因，这是有问题的。特别是，它似乎破坏了我们从交换服务器读取的一些其他服务，并且如果不进行非常缓慢的 ResolveName 调用，就无法正确显示电子邮件地址。有没有办法阻止 EWS 这样做？使用 Outlook Redemption 的不同服务在正确写入 SMTP 地址时没有问题，但我们正在尝试停用该服务并使用 Redemption API。我还应该提到，这个问题只发生在为内部用户更新联系人时。外部用户始终写入正确的 SMTP 地址。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-02T09:48:37.137

我的经验表明，在创建/更新联系人期间将 MailboxType 设置**为 OneOff**可以避免**从**SMTP 到 LegacyDN 的内部地址类型转换：

 **```
var address = new EmailAddress
{
    Address = "user@example.com",
    MailboxType = MailboxType.OneOff
};
newContact.EmailAddresses[EmailAddressKey.EmailAddress1] = address; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:03:10.503

您是否尝试设置 EmailAddress 的 MailboxType 属性？

我与内部用户有一些类似的问题，但在我的情况下，我收到了一个异常而不是 LegacyDN。

在我的情况下，将属性设置为 MailboxType.Mailbox 解决了这个问题。**

# iphone - 我可以将我的 iPhone 注册到多个 Dev accs 吗？

> ID：11295195
> 
> 赞同：0
> 
> 时间：2012-07-02T13:58:19.773
> 
> 标签：iphone, ipad

所以我有我的 iPhone，它已经注册到我朋友的 Dev Acc，因为我正在帮助他测试他的应用程序。但我想注册为 Apple Dev，当然我想将我的 iPhone 添加到我的账户中。
是否有可能注册到多个账户？
有人试过这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:02:54.460

是的，这是可能的。只需将 UDID 添加到两个帐户，然后在 Xcode 中安装并选择适当的配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:05:01.267

是的 mahn。一个设备可以根据需要与任意数量的开发者帐户相关联。对此没有任何限制。详细说明，一个开发者帐户可能有多个配置文件，您可以在单个设备上拥有多个配置文件。:)

# gridview - GridView 中的条件列类型

> ID：11295196
> 
> 赞同：1
> 
> 时间：2012-07-02T13:58:26.020
> 
> 标签：gridview

我在我的一个项目中使用 ASP.NET GridView 控件。在其中一列中，我得到了我想用来定义单元格类型的值。例如，如果单元格包含等于“ABC”的值，我想将“ABC”显示为超链接，如果它不等于“ABC”，则显示为普通文本。有人可以帮助我了解如何做到这一点吗？

提前致谢。

# android - 使用 Android 自定义浏览器将网页重定向到移动版本

> ID：11295199
> 
> 赞同：0
> 
> 时间：2012-07-02T13:58:32.827
> 
> 标签：android, redirect, mobile, web, sniffing

我正在为 Android 实现浏览器。我需要做的是找出我正在访问的网站是否有移动版本。如果移动版本可用，我应该能够将网页重定向到移动版本。我还可以选择让用户决定是否将网页重定向到移动版本。例如，如果用户更喜欢保留选项重定向到移动版本。“开”然后我应该将他从前重定向。`www.google.com -> m.google.com` 如果他选择其他方式，那么我应该让他访问`www.google.com`。

[来源](http://developer.android.com/guide/webapps/best-practices.html)：有几种方法可以将请求重定向到您网站的移动版本，使用服务器端重定向。大多数情况下，这是通过“嗅探”网络浏览器提供的用户代理字符串来完成的。要确定是否提供您网站的移动版本，您只需在用户代理中查找“移动”字符串，该字符串与各种移动设备相匹配。如有必要，您还可以在 User Agent 字符串中识别特定的操作系统（例如“Android 2.1”）。

我需要 Android 的代码来执行嗅探和识别网站。

希望你能帮我解决这个问题。感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:09:24.543

实际上，这种转换通常应该由网页完成，而不是你自己。

该网页根据您的用户代理字符串检测您是否是移动设备，在这种情况下，如果您的用户代理中包含“移动设备”或“Android”。

如果您正在设计 Web 浏览器，您通常应该允许您的用户在桌面 Web 浏览器 UA 字符串和典型的 Android UA 字符串之间进行选择，也许如果您拉设备 WebView 并获取它的默认 UA 字符串。

# javascript - 由于错误 80020101 无法完成操作

> ID：11295207
> 
> 赞同：3
> 
> 时间：2012-07-02T13:59:01.160
> 
> 标签：javascript, extjs, extjs4.1

我正在运行一个 ExtJS 4.1 应用程序。它在 FireFox 中运行良好，但在 Internet Explorer 8 中出现此错误：`Could not complete the operation due to error 80020101.`

我找到了各种可能的修复方法，但似乎没有一个适合我的需要。

如何使应用程序在 IE8 中运行？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T12:22:23.420

错误 80020101 是 AJAX 错误，因此有许多潜在问题需要调查。一个有用的起点可能是之前的 SO 问题[https://stackoverflow.com/a/10275316/1204258](https://stackoverflow.com/a/10275316/1204258)，它处理对象定义中的尾随逗号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-25T00:26:26.557

我在包含的 js 文件中遇到了同样的错误。它只出现在 IE 中。

`</script>`问题是因为包含文件末尾缺少标签。

希望有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-25T17:34:33.550

在 IE9 上有同样的不可发现的错误。

有一个 AJAX 请求正在传输一个 ....

解决了这个错误：

```
<script type="text/javascript">
    //<![CDATA[

    ... code goes here ...

    //]]>
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-18T15:44:42.143

在使用 ExtJS 来“要求”模块化 JavaScript 代码时，我也发生了同样的事情。原因：我错误地包含了“extends”关键字，该关键字在IE8中是保留的。确保您没有使用任何保留关键字作为属性键，而不先将它们放在引号中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-13T05:22:39.867

我在 IE 中遇到了同样的问题，问题是 javascript 中使用的 html 注释用 javascript 注释替换了 html 注释，那么它对我来说很好。

# jsf - Primefaces rowEditor 只是活动行验证

> ID：11295209
> 
> 赞同：0
> 
> 时间：2012-07-02T13:59:08.193
> 
> 标签：jsf, jsf-2, primefaces, myfaces

在我的应用程序中，我有一些带有 dataTables 的对话框，用户可以编辑值，所以我使用 primefaces rowEditor... 有时我在 dataTable 中有必填字段，如您在此屏幕中看到的那样：

![具有必填字段的数据表](../Images/dfc668b0398c7686c744979336d1a234.png)

在此屏幕中，用户不需要填写所有行，因此，如果我设置 required=true，则所有字段（包括已停用的字段）都会显示所需的验证消息。这样，如果用户单击“确定”按钮，他将无法关闭弹出窗口，因为存在很多必填字段验证错误。我尝试以这种方式在必需属性中使用参数：

```
<f:facet name="input">
    <h:selectOneMenu value="#{cfop.idTipoTributacao}" required="#{param['EDITAVEL']}"
                                             style="width: 100px;">
        <f:selectItems value="#{selectTipoTributacao.itens}"/>
    </h:selectOneMenu>
</f:facet> 
```

但不幸的是，当用户单击 p:rowEditor 的保存按钮时，我没有找到传递此参数的方法。有没有一种方法可以使这些字段仅在它们处于编辑模式时才需要？我用 MyFaces 使用 primefaces 2.2.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:33:22.883

以下解决方法对我有用：

将此添加到您的 JSF 页面：

```
<script type="text/javascript">
function validateIfEditing()
{
    var isEditing = false;
    var checkmark= $(".ui-icon-check");
    jQuery.each(checkmark, function() {             
        if ('' == this.style.display) {
            isEditing = true;   
        }
    });
    if (isEditing) {
        $("#form\\:notImmediate").click();          
    }
    else {  
        $("#form\\:immediate").click(); 
    }
}
</script> 
```

然后修改您的确定/保存按钮：

```
<p:commandButton id="okButton" value="OK" onclick="validateIfEditing();"/>
<p:commandButton id="immediate" action="#{controller.save}" immediate="true" style="display:none"/> 
<p:commandButton id="notImmediate" action="#{controller.save}" update="form" style="display:none"/> 
```

实际上，这是在用户单击 OK/Save 以查看用户是否处于“编辑模式”时发生的 javscript 检查。编辑模式检查检查是否有任何复选标记图标可见；如果它可见，则用户必须处于编辑模式（如果您在页面的其他位置使用复选图标，则需要修改此解决方法）。如果用户处于编辑模式，那么表单会以 immediate="false" 提交，因此会进行验证。如果用户未处于编辑模式，则表单以 immediadate="true" 提交，因此不会发生验证。对于“notImmediate”按钮单击，更新属性设置为 update="form"，以便可以使用与任何验证错误相关的任何错误消息来更新表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:52:24.913

我解决了创建自己的复合组件的问题......这样我可以更好地控制验证发生的时间。

单元格编辑器：

```
<c:interface>
    <c:attribute name="id" required="false" targets="celula"/>
    <c:attribute name="desabilitado" required="false" default="true"/>
    <c:facet name="entrada" required="true"/>
    <c:facet name="saida" required="true"/>
</c:interface>
<c:implementation>
    <h:panelGroup id="celula" layout="block" styleClass="hrgi-celula">
        <h:panelGroup layout="block" styleClass="hrgi-celula-entrada" style="display: none">
            <c:renderFacet name="entrada" required="true"/>
        </h:panelGroup>
        <h:panelGroup layout="block" styleClass="hrgi-celula-saida">
            <c:renderFacet name="saida" required="true"/>
        </h:panelGroup>
    </h:panelGroup>
</c:implementation> 
```

行编辑器：

```
<c:interface>
    <c:attribute name="action" method-signature="void method(java.lang.Object)"/>
    <c:attribute name="indice" required="true"/>
    <c:attribute name="update" required="false" default=""/>
</c:interface>
<c:implementation>
    <h:outputScript library="js" name="hrgiRowEditor.js" target="head"/>
    <h:panelGroup layout="block">
        <h:panelGroup id="painelBotaoEdicao" layout="block" style="display: inline">
            <h:graphicImage library="img" name="pencil.png" onclick="ativarCamposEditaveis('#{cc.clientId}');"
                        style="cursor: pointer;"/>
        </h:panelGroup>
        <h:panelGroup id="painelBotoesSalvamento" layout="block" style="display: none">
            <h:commandLink id="botaoSalvar" style="float: left;" onclick="definirIdRowEditor('#{cc.clientId}')">
                <h:graphicImage library="img" name="check.png"/>
                <f:param name="#{cc.attrs.indice}" value="true"/>
                <p:ajax event="click" update="@form #{cc.attrs.update}" process="@form" listener="#{cc.attrs.action}"
                    oncomplete="desativarCamposEditaveisQuandoSucesso(xhr, status, args, this);"/>
            </h:commandLink>
            <h:graphicImage library="img" name="cancel.png" style="float: left; cursor: pointer;"
                        onclick="desativarCamposEditaveis('#{cc.clientId}');">
            </h:graphicImage>
        </h:panelGroup>
    </h:panelGroup>
</c:implementation> 
```

唯一的问题是我不能只更新表格中的一行......也许我会创建另一个组件......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-14T12:26:05.017

或者

```
<p:commandButton id="okButton" value="OK" onclick="return $('.ui-icon-check:visible').length == 0"/> 
```

# encryption - 使用 Base64 进行加密和解密，以及我们究竟需要在哪里执行此操作

> ID：11295210
> 
> 赞同：0
> 
> 时间：2012-07-02T13:59:08.627
> 
> 标签：encryption, base64

我正在做一个处理用户可以登录并查看与特定网络相关的所有 GIS 数据（全球信息系统）的应用程序。

这是一个普通域（我的意思是不涉及金钱）

我的问题是，当用户在登录页面登录时（我打算使用 base64.encode 来保护密码）

关于上述问题，我有 3 个问题

1.  在这里使用 base64.encode 是否合适？
2.  当用户在登录页面提交用户名和密码时，我计划在 Servlet 级别使用加密（即使用`req.getparameter("password")`

    静态公共字符 [] 编码（字节 [] 数据）{

    }

请告诉我这是否正确？？

1.  我到底需要在哪里解密密码？？（也就是说，我是否需要将其与加密值一起存储在数据库中并在 DAO 层中对其进行解密？？

请告诉我这是否正确？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:08:51.027

base64 不是加密方案，它是一种编码方案。它不提供任何安全性，除了以某种经验很容易识别的方式稍微模糊传输的数据。请勿将其用于安全目的。

如果您想保护您的用户<->服务器流量不被嗅探，您所需要的几乎所有东西都已在 HTTPS/SSL 中实现。使用它来节省您的开发时间，并保护自己免受内部开发不善的方案的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:32:19.557

这里有两个单独的（ish）问题；身份验证和保密。如果您需要保密，请使用 HTTPS。然后您无需担心传输加密，只需以明文形式发送所有内容（因为 SSL 将为您执行完整的连接加密）。

至于密码存储；您永远不应该在任何地方存储明文密码。始终首先对密码进行哈希处理（至少，查找[密码加盐](http://en.wikipedia.org/wiki/Password_salt)以获得更强大的方法）并将哈希值存储在数据库中。当用户发送他们的密码时，对他们发送的内容进行哈希处理并将其与数据库中的值进行比较，如果它们匹配，则他们的密码是正确的。

如果您不想使用 SSL/HTTPS，那么您的想法是正确的，您需要避免以明文形式发送密码。您可以通过多种方式实现此目的，我认为最合适的是[Challenge-Response](http://en.wikipedia.org/wiki/Challenge-response_authentication)，其中您通过生成随机字符串并将其回显到 javascript 变量中，从登录页面中的 php 发送随机“nonce”。

然后用javascript计算；

```
hash(hash(password) + nonce); 
```

其中 hash 是一个安全的散列函数，例如 MD5 或 SHA。

这样，在服务器上，您可以验证密码，而无需用户以明文形式发送密码。通过将存储在数据库中的值与相同的 nonce 连接起来进行哈希处理，并将其与用户发送的值进行比较，如果值匹配，则密码正确。

所有这一切的重点是防止[重放攻击](http://en.wikipedia.org/wiki/Replay_attack)，确保用户永远不会向服务器发送相同的登录字符串两次。攻击者可以窃听和记录任意数量的登录，在使用相同的用户帐户使用相同的 nonce 之前，它们都是无用的。避免这种情况只是使用非常大的随机数。

但是请注意，这种方法不能防止[中继攻击](http://en.wikipedia.org/wiki/Relay_attack)或[中间人攻击](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)。这些类型的攻击需要相互验证，只能通过使用第三方来实现，例如证书颁发机构，这使我们回到 SSL/HTTPS。

# android - 排序 HasMap 列表

> ID：11295215
> 
> 赞同：2
> 
> 时间：2012-07-02T13:59:26.487
> 
> 标签：android, listview, sorting, hashmap

我用谷歌搜索了它，并尝试了一些例子，但我总是卡住。

这是错误消息，当我尝试使用时`Collections.sort`：

> `sort(List<T>)`类型的泛型方法`Collections`不适用于参数 ( `ArrayList<HashMap<String,String>>`)。推断的类型`HashMap<String,String>`不是有界参数的有效替代品`<T extends Comparable<? super T>>`。

我的代码与此类似。

```
ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

//Get the data (see above)
JSONObject json = JSONfunctions.getJSONfromURL("http://xxxxxxxxxxxxxxxxxxxxxx");

try {
    //Get the element that holds the earthquakes ( JSONArray )
    JSONArray earthquakes = json.getJSONArray("earthquakes");

    //Loop the Array
    for (int i = 0; i < earthquakes.length(); i++) {
        HashMap<String, String> map = new HashMap<String, String>();
        JSONObject e = earthquakes.getJSONObject(i);

        map.put("id", String.valueOf(i));
        map.put("name", "Earthquake name:" + e.getString("eqid"));
        map.put("magnitude", "Magnitude: " + e.getString("magnitude"));
        mylist.add(map);
    }
} catch (JSONException e) {
    Log.e("log_tag", "Error parsing data " + e.toString());
}

ListAdapter adapter = new SimpleAdapter(this, mylist, R.layout.main,
        new String[]{"name", "magnitude"},
        new int[]{R.id.item_title, R.id.item_subtitle});

setListAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:04:31.903

发生此错误是因为您不能简单地比较 HashMap 的两个实例。

当您`sort`在 List 上调用该方法时，Java 将尝试将每个元素相互比较并对集合进行排序。如果无法比较元素（没有比较两个 HashMap 的明显方法，标准是什么？），就会发生该错误。

您真的需要对该列表进行排序吗？如果是这样，根据什么标准？

实现这一点的唯一方法是创建自己的[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)并使用它来比较 HashMaps 的实例，同时考虑到您的特定标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:59:48.587

正如@pcalcao 已经解释的那样，您需要决定如何对地图进行排序（基于什么标准），然后在自定义比较器中实现该排序顺序并使用该比较器调用 Collections.sort。

例如，假设您要按名称的字母顺序排序，您可以编写如下内容：

```
Collections.sort(mylist, new Comparator<Map<String, String>>() {

    @Override
    public int compare(Map<String, String> o1, Map<String, String> o2) {
        String name1 = o1.get("name");
        String name2 = o2.get("name");
        if (name1 == null) return -1;
        return name1.compareTo(name2);
    }
}); 
```

# c# - 多对多不加载集合属性的实体

> ID：11295216
> 
> 赞同：3
> 
> 时间：2012-07-02T13:59:34.780
> 
> 标签：c#, entity-framework, ef-code-first, many-to-many, entity-framework-4.3

我有一个包含玩家集合的实体名册。

```
public class Roster
{
    public Roster()
    {
        Players = new List<Player>();
    }

    public int RosterId { get; set; }

    [MaxLength(100)]
    [Required]
    public string RosterName { get; set; }

    public ICollection<Player> Players { get; set; }
}
public class Player
{
    public int PlayerId { get; set; }
    [MaxLength(100)]
    [Required]
    public string PlayerName { get; set; }
    public virtual ICollection<Roster> Rosters { get; set; }
} 
```

我已经使用流利的 api 定义了关系

```
// many to many Roster - Players
modelBuilder.Entity<Roster>()
.HasMany(t => t.Players)
.WithMany(t=>t.Rosters)
.Map(m =>
{
    m.ToTable("RosterPlayers");
    m.MapLeftKey("RosterId");
    m.MapRightKey("PlayerId");
}); 
```

我可以像这样将一名球员保存到名单中

```
var roster = rosterRepository.GetById(rosterId);
var player = playerRepository.GetById(playerId);

roster.Players.Add(player);
rosterRepository.Update(roster);
... 
```

但是，当我检索花名册时，没有加载球员收藏。我验证了数据是否存在所有正确的值，并且以下 sql 确实产生了数据。

```
SELECT * from Rosters r 
INNER JOIN RosterPlayers rp on r.RosterId = rp.RosterId
INNER JOIN Players p ON p.PlayerId = rp.PlayerId 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-02T14:13:01.903

将`Players`属性设为虚拟，以便 EF 可以延迟加载集合。

```
public class Roster
{

    //...........

    public virtual ICollection<Player> Players { get; set; }
} 
```

或者，您可以预先加载`Players`集合。

```
var rosters = db.Rosters.Include(r => r.Players).ToList(); 
```

# php - 我的 vbulletin 登录 api 无法通过 file_get_contents

> ID：11295219
> 
> 赞同：0
> 
> 时间：2012-07-02T13:59:36.440
> 
> 标签：php, vbulletin

我已经制作了一个脚本来通过 API 登录到 Vbulletin

这是代码

```
<?php    
include 'connector.class.php';
    if ($connector==null)
    {
        $connector = new vbConnector();
    }
    $do=$_GET['do'];
    if ($do=="login")
    {

        $user_name=$_GET['username'];
        $user_pass=$_GET['password'];
        $res= $connector->doLogin($user_name,$user_pass, 1);
        echo  $res;
    } 
```

当我通过 url 请求这个时，例如 (http://example.com?do=login&username=test&password=test) 它工作得很好，一切都很好

当我尝试 curl 或 file_get_content 相同的 url 时，它永远不会记录我是

这是我的一些试验

```
<?php
    $opts = array('http' => array('header'=> 'Cookie: ' . $_SERVER['HTTP_COOKIE']."\r\n"));
$context = stream_context_create($opts);
echo file_get_contents("http://192.168.5.55/vb_api/index.php?do=login&username=test&password=test"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:35:00.223

你没有传入`$context`你的 file_get_contents 调用。尝试这个：

```
<?php
    $opts = array('http' => array('header'=> 'Cookie: ' . $_SERVER['HTTP_COOKIE']."\r\n"));
    $context = stream_context_create($opts);
    echo file_get_contents("http://192.168.5.55/vb_api/index.php?do=login&username=test&password=test",false,$context);
?> 
```

我知道这很旧，但我刚刚找到了我帖子的相关链接，希望能解决您的问题。

# javascript - 如何使用 javascript/jquery 禁用鼠标悬停事件？

> ID：11295221
> 
> 赞同：1
> 
> 时间：2012-07-02T13:59:45.293
> 
> 标签：javascript, jquery, events

在我的代码中，当用户第一次将鼠标悬停在 div 上时执行一个函数，并且该函数需要大约 30 秒才能完成，在这 30 秒内，如果用户再次将鼠标悬停在同一个 div 上，该函数会再次执行，所以我想禁用鼠标悬停事件第二次。是否有任何 javascript 或 jquery 代码可以禁用该 div 的偶数？谢谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T14:10:16.853

使用带有某种回调的 jQuery 的 on() 和 off()，例如：

```
$("#myElementID").on('mouseover', myFunction);

myFunction(e) {
    var myElement = e.target;
    myElement.off('mouseover', myFunction);
    //do something that takes 30 seconds
    myElement.animate({top: 1000}, 30000, function() { //callback
        myElement.on('mouseover', myFunction);
    });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T14:02:03.263

```
var isExecuting = false;

function yourThirtySecFunction() {
  if (isExecuting == true) return;
  isExecuting = true;
  //do your stuff here

  isExecuting = false;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T14:02:36.213

你可以看看 jquery 的一个有趣的特性......`.one()`这里是它[的链接](http://api.jquery.com/one/)

描述：将处理程序附加到元素的事件。每个元素最多执行一次处理程序。

**第二个想法**

我可以再给你一个想法，假设当鼠标悬停发生一次时，只需在开始操作之前取消绑定鼠标悬停事件，然后一旦操作结束，再次将它们绑定回来......

# python - string.isdigit() 语言环境如何以及为什么依赖？

> ID：11295222
> 
> 赞同：5
> 
> 时间：2012-07-02T13:59:47.273
> 
> 标签：python, locale, digit

Python 有字符串函数来测试所有字符是否都是数字：[`string.isdigit()`](http://docs.python.org/library/stdtypes.html).

手册上写着：

> 对于 8 位字符串，此方法取决于语言环境

这种方法如何依赖于语言环境？在哪些语言环境中存在 0-9 范围之外的数字？

此外，如果这取决于区域设置，python 是否有一种方法可以使用特定的区域设置（即只有 0-9 位）来检查它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T14:28:32.063

CPython 对字符串的 is_digit 方法使用 C 函数“isdigit”（参见 stringobject.c）。请参阅此相关线程： [Can isdigit 合法地依赖于 C 中的语言环境](https://stackoverflow.com/questions/2898228/can-isdigit-legitimately-be-locale-dependent-in-c)

显然，它与上标数字有关，例如 0xB2 ('²')、0xB3 ('³') 和 0xB9 ('¹')。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:26:49.643

> python 是否有一种方法可以使用特定的语言环境（即只有 0-9 位）来检查它。

最简单的方法：

```
>>> '1' in '1234567890'
True
>>> 'a' in '1234567890'
False 
```

您也可以检查`ord`，它~~*可能*会更快~~（[不是](http://ideone.com/SwVTx)）：

```
>>> ord('0') <= ord('a') <= ord('9')
False
>>> ord('0') <= ord('5') <= ord('9')
True 
```

# php - 更新语句不适用于抽象属性

> ID：11295223
> 
> 赞同：0
> 
> 时间：2012-07-02T13:59:47.943
> 
> 标签：php, mysql

我的代码看起来不错，但由于更新语句正在运行，因此无法正常工作。当我调用此函数时，我的页面加载时不会在我的屏幕上显示任何错误。

```
 public function update(){
        global $database;
        $attributes = $this->sanitized_attributes();
        $attributes_pairs = array();
        foreach($attributes as $key => $value){
            $attributes_pairs[] = "{$key}='{$value}'";
        }
        $sql = "UPDATE ".static::$table_name." SET ";
        $sql .= join(", ", $attributes_pairs);
        $sql .= " WHERE id=".static::$i_d;
        $database->query($sql);
        return ($database->affected_rows() == 1)? true : false;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:41:09.133

你的代码对我来说看起来不太好，加入的更新首先是 JOIN 然后是 SET，看看[文档](http://dev.mysql.com/doc/refman/5.0/en/update.html)

```
UPDATE items,month SET items.price=month.price
WHERE items.id=month.id; 
```

或者

```
UPDATE TABLE_1 LEFT JOIN TABLE_2 ON TABLE_1.COLUMN_1= TABLE_2.COLUMN_2
SET TABLE_1.COLUMN = EXPR WHERE TABLE_2.COLUMN2 IS NULL 
```

在您的情况下，尝试先加入，然后尝试“设置”语句

# c# - 如何让 PrintDialog 响应选择

> ID：11295234
> 
> 赞同：0
> 
> 时间：2012-07-02T14:00:20.893
> 
> 标签：c#, visual-studio-2010

我正在使用默认打印机打印多行文本框。我想通过使用 PrintDialog 来提供打印机选择。当我设置它时，会出现 PrintDialog 并且您选择一台打印机，但是当您按“确定”时，它总是会转到默认打印机。任何想法，将不胜感激。我已经包含了适当的代码。

```
private void printTreeViewToolStripMenuItem_Click(object sender, EventArgs e) //---added 6-29-12
    {
        textTreeView.Clear();

        CreateRowsFromNode(treeView1.Nodes[0], 0, "");

        //InitPrint(textTreeView.Text).Print();

        printDialog1.Document = InitPrint(textTreeView.Text);

        if (printDialog1.ShowDialog() == DialogResult.OK)
        {
            InitPrint(textTreeView.Text).Print();
        }
    } 
```

最初没有PrintDialog，它只调用InitPrint(textTreeView.Text).Print()。如上所示添加了 printDialog1。

textTreeView 是要打印的 TextBox。textTreeView 文本框中的每一行都包含一个使用 CreateRowsFromNode 生成的节点文本值。

InitPrint 看起来像这样：

```
string TextToPrint; //---added 6-29-12
    public PrintDocument InitPrint(string TextToPrint)
    {
        this.TextToPrint = TextToPrint;
        PrintDocument PD = new PrintDocument();
        PD.OriginAtMargins = true;
        PD.DefaultPageSettings.Landscape = true; //---added 6-29-12
        PD.PrintPage += PrintPage;
        return PD;
    }

public void PrintPage(object sender, PrintPageEventArgs e) //---added 6-29-12
    {
        int Chars = 0;
        int Lines = 0;
        Font Font = new Font("Courier new", 9);
        //Font Font = new Font("Arial", 10);
        Rectangle R = new Rectangle(Point.Empty, e.MarginBounds.Size);
        StringFormat SF = StringFormat.GenericTypographic;
        e.Graphics.MeasureString(TextToPrint, Font, R.Size, SF, out Chars, out Lines);
        e.Graphics.DrawString(TextToPrint, Font, Brushes.Black, R, SF);
        TextToPrint = TextToPrint.Substring(Chars);
        e.HasMorePages = (TextToPrint.Length > 0);
    } 
```

将 TreeView 读入 textTreeView 的代码是：

```
private void CreateRowsFromNode(TreeNode node, int level, string L = "") //---added 6-29-12
    {

        string data = "";
        string CurrentArrow = null;
        string NextArrow = "";

        //if root then no arrows needed
        if (node.Parent == null) {
            CurrentArrow = "";
            NextArrow = "";
        //if Not Last node of parent
        }
        else if (!(node.Parent.Nodes[node.Parent.Nodes.Count - 1] == node))
        {
            CurrentArrow = "├";

            NextArrow = "│";
        // is last node of parent
        } else {
            CurrentArrow = "└";
            NextArrow = " ";

        }
        //Add the next node to the TextBox
        if (node.Text.Length >= 115)
            textTreeView.Text = textTreeView.Text + L + CurrentArrow + node.Text.Substring(0,115) + vbNewLine;
        else
            textTreeView.Text = textTreeView.Text + L + CurrentArrow + node.Text + vbNewLine;

        //Add the Next Arrow to Left Part of string
        L = L + NextArrow;

        //Loop Through all its child nodes
        foreach (TreeNode nod in node.Nodes) {
            CreateRowsFromNode(nod, level + 1, L);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:05:23.260

[在此处](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printersettings.installedprinters.aspx)尝试使用`PrinterSettings.InstalledPrinters`MSDN 中的选项

```
**PrintDialog.PrinterSettings - Specifies information about how a document is printed, including the printer that prints it, when printing from a Windows Forms application.** 
```

# sitecore - Sitecore 能否在不擦除现有索引的情况下在后台重建索引？

> ID：11295235
> 
> 赞同：0
> 
> 时间：2012-07-02T14:00:22.953
> 
> 标签：sitecore, lucene.net

每当您在 Sitecore 中重建 Lucene 索引时，现有索引都会在重建之前被擦除。这是不可接受的，因为我们的索引过程需要很长时间（我们将至少 100,000 个项目索引到自定义产品搜索索引中）。

有谁知道您是否可以在后台通过 Sitecore 重建 Lucene 索引，然后在索引完成后交换索引。

我认为这种方法的另一个复杂性是在索引重建期间增量更新会发生什么，任何了解它在 Sitecore 中如何工作的见解都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-03T02:24:54.893

Sitecore.ContentSearch.luceneProvider 中有一个类可以满足此需求，它是“Sitecore.ContentSearch.LuceneProvider.SwitchOnRebuildLuceneIndex”

John West 写了一篇关于它以及如何使用它的帖子： [http ://www.sitecore.net/da-dk/Learn/Blogs/Technical-Blogs/John-West-Sitecore-Blog/Posts/2013/05 /Sitecore-7-Rebuild-Lucene-Indexes-in-Temporary-Subdirectories.aspx](http://www.sitecore.net/da-dk/Learn/Blogs/Technical-Blogs/John-West-Sitecore-Blog/Posts/2013/05/Sitecore-7-Rebuild-Lucene-Indexes-in-Temporary-Subdirectories.aspx)

如果您碰巧使用 Solr，还有一个等效类： [http ://www.skillcore.net/sitecore/using-switchonrebuildsolrsearchindex-solr-provider-for-sitecore](http://www.skillcore.net/sitecore/using-switchonrebuildsolrsearchindex-solr-provider-for-sitecore)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:08:48.907

添加与主索引具有相同配置的第二个索引并在这两个索引之间切换上下文怎么样？例如，如果需要重建，首先执行重新索引、第二次搜索和切换角色。

# javascript - firefox 高内存 (RAM) 使用情况，如何使用 javascript 释放？

> ID：11295237
> 
> 赞同：2
> 
> 时间：2012-07-02T14:00:29.763
> 
> 标签：javascript, firefox, memory, ram

我注意到在使用 firefox 几个小时后，它获得了超过 2gb 的 ram 内存。当我使用 ajax 上传器上传大文件（100mb-400mb）时会发生这种情况，当我打开许多图像时也会发生这种情况（例如网页上的总图像数为 16mb）。

问题是，即使在上传完成或关闭图像页面后，内存也没有得到释放，firefox 仍然有 2gb 的 ram 内存。javascript有没有办法让firefox释放内存，例如上传完成或加载或关闭图像后？

**编辑** 自`about:memory`：1,172.03 MB (100.0%) -- 显式

├──1,000.00 MB (85.32%) -- js

│ ├────863.97 MB (73.72%) -- 隔间([System Principal], 0x5083000)

│ │ ├──819.31 MB (69.91%) ── 字符串字符

当文件被读入内存然后用ajax上传时，我如何清空我很确定会出现的**字符串字符？**

**编辑 2**

这是导致此内存使用的递归函数：

```
function uploadAjax(file, startByte, index)
{
    if(startByte==0)
    {
        $('#progress'+index).html(' ').progressbar( "destroy" ).progressbar();
        $('#asyncuploadsingle'+index).attr('disabled', true);
    }

    var size        = file.size;
    var chunkSize   = 2097152;//2 megabyte
    var endByte     = chunkSize + startByte;
    var isLast      = (size - endByte <= 0);
    var chunk       = file;
    var xhr         = new XMLHttpRequest();//prepare xhr for upload
    var chunkNum    = endByte / chunkSize;

    if(chunkSize == 0)//no divide
    {
        chunk   = file;
        isLast  = true;
    }
    else if(file.mozSlice) // moz slice
    {
        chunk   = file.mozSlice(startByte, endByte);
    }
    else if(file.webkitSlice) //webkit slice
    {
        chunk   = file.webkitSlice(startByte, endByte);
    }
    else if(file.slice) // w3c slice
    {
        chunk   = file.slice(startByte, chunkSize);
    }
    else
    {
        chunk   = file;
        isLast  = true;
    }

    //progress function, with ajax upload progress can be monitored
    xhr.upload.addEventListener('progress', function(e)
    {
        if (e.lengthComputable) 
        {
            var perc = Math.round((e.loaded + chunkNum * chunkSize - chunkSize) * 100 / size);
            //console.log(perc+':'+index);
            $('#progress'+index).progressbar("option", "value", perc);
        }  
    }, false); 

    xhr.upload.onabort=function(e)  {   
        finishUp(index,'Aborted');
    };  

    xhr.upload.addEventListener('error', function(e){
        finishUp(index, this.responseText+'--->'+name);
    }, false);  

    xhr.onreadystatechange=function()
    {
        if(this.readyState == 4 && this.status == 200)
        {
            try
            {
                var ret = JSON.parse(this.responseText);

                if(isLast)
                {
                    finishUp(index,'');
                }
                else if(ret.status == 'error')
                {
                    throw ret.info;
                }
                else
                {
                    uploadAjax(file, endByte, index);
                }
            }
            catch(err)
            {
                finishUp(index, err);
            }

            delete chunk;
        }
    };

    var path    = get_final_path();
    var url     = "filetransfer/uploadfiles.php?ax-file-name="+encodeURIComponent(file.name)+"&ax-file-path="+encodeURIComponent(path)+'&ax-start-byte='+startByte;

    xhr.open("POST", url, true);
    xhr.setRequestHeader('Cache-Control', 'no-cache');
    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');//header
    xhr.setRequestHeader('Content-Type', 'application/octet-stream');//generic stream header

    /*var reader = new FileReader();
    reader.onload = function(evt) {  
        xhr.sendAsBinary(evt.target.result);  
    };  
    reader.readAsBinaryString(chunk);
    */  
    xhr.send(chunk);

    return xhr;
} 
```

在哪里优化它或在哪里释放对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:07:59.333

我使用 Memoryfox 插件将 firefox 的内存保持在最低限度。虽然我只将它用于浏览器（不要启用“所有进程”选项），因为我经常运行 Photoshop/Lightroom 并且它往往会在所有进程模式下干扰它们（它非常激进）。

[记忆狐狸](https://addons.mozilla.org/en-US/firefox/addon/memory-fox/)

尽管即使使用该 Firefox 仍会膨胀。最好的方法是删除您不使用的所有插件并禁用您不经常使用的插件。如果您有很多插件，那么有些插件会导致 firefox 出现重大内存问题，其中一些插件会在[MemShrink 项目](https://wiki.mozilla.org/Performance/MemShrink)下突出显示。

具体参考您的编辑中提供的代码，您可能会看到额外的内存使用有几个原因：

1）匿名函数的使用意味着每次uploadAjax运行时都会在内存中创建一个新函数。在 uploadAjax 之外定义您的函数，然后引用它们以避免在内存中重复。

2）`delete xhr;`当你完成它时。这通常不是必需的，但如果您要执行大量上传，则可能会留下一些东西。

3）您实际上是`uploadAjax(file, endByte, index);`在递归调用和在匿名函数内部调用，这意味着您在高级调用中创建的所有内容可能仍然存在，而低级调用执行。这将导致多个内存中`xhr`和`chunk`. 考虑以不同的方式调用`uploadAjax`（例如通过触发事件然后从全局访问相同的文件和 xhr，或者在短计时器上以引入执行断开连接。我可能更喜欢前者，但很难确定没有自己测试）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:04:17.350

这不是你想要的，但听起来这就是你需要的：

[https://addons.mozilla.org/en-US/firefox/addon/memory-restart/](https://addons.mozilla.org/en-US/firefox/addon/memory-restart/)

您可以设置警报的阈值，甚至让它自动重启。

（不过，正如我刚刚发现的 Rob W 的礼貌，`about:memory`允许您进行垃圾收集和其他内存清理（至少在 Firefox 13 中；由于我没有以前版本的 Firefox，所以没有检查它有多远）这台机器，我真的没有时间下载和安装以前的版本来测试）。非常整洁。你可能想先尝试使用它，即使它不是自动的，如果 Firefox 的自动重启不适合你喜欢。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:09:22.453

这是firefox背后发生的最糟糕的事情......我曾经也遇到过这个问题。问题是您必须重新启动浏览器，所以一些内存将是空闲的，但不是全部。单页应用程序的主要问题是主要使用 dom 替换而不刷新页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T14:22:00.123

Firefox 中没有 JavaScript API 可以帮助解决您的问题。Firefox 中的内存使用一直是长期存在的抱怨之一，尽管在改善内存占用方面做了很多工作。您的选择主要限于：

(a) 重新启动 firefox 以终止进程并释放分配的内存

(b) 使用 Firefox 或 Windows 的 3rd 方实用程序或插件来帮助释放一些内存

(c) 使用不同的浏览器，例如 Chrome，它使用每标签进程模型，这有助于缓解内存使用问题

仅供参考 -[这是来自 Mozilla 知识库的更多信息](http://kb.mozillazine.org/Memory_Leak)

# wpf - 在 WPF 用户控件中嵌入 Windows 资源管理器

> ID：11295244
> 
> 赞同：7
> 
> 时间：2012-07-02T14:00:54.273
> 
> 标签：wpf, windows-explorer

是否可以将 Windows 资源管理器嵌入 WPF 用户控件（或随后可以使用 WindowsFormsHost 对象显示在 WPF 控件中的 Windows 窗体用户控件）？

我知道我可以编写一个用户控件来显示目录和导航按钮等的内容，但我希望它看起来完全像 Windows 资源管理器，包括收藏夹、库、网络等。Windows 资源管理器看起来也不同，具体取决于操作系统正在使用，理想情况下我希望这也反映在我的应用程序中。

我用谷歌搜索并没有任何运气。我最接近的是： http: [//gong-shell.sourceforge.net/](http://gong-shell.sourceforge.net/)但是当我尝试将它实现到 WPF 控件中时，它开始表现得非常奇怪，并导致与它完全分离的控件停止工作。

我可能是错的，但考虑到我们有 OpenFileDialog、SaveFileDialog 和 FolderBrowserDialog 窗口，我会认为还有一个用于查看 Windows 资源管理器的控件。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:01:49.557

我没有看到任何直接提供作为控件的东西，但 MS 确实提供了一个演练信息以使用 Windows 表单创建一个[http://msdn.microsoft.com/en-us/library/ms171645.aspx](http://msdn.microsoft.com/en-us/library/ms171645.aspx)

一旦您将其创建为 Windows 窗体控件，您就可以在 WPF 中托管它，请查看演练[http://msdn.microsoft.com/en-us/library/ms751761.aspx](http://msdn.microsoft.com/en-us/library/ms751761.aspx)

但关键是为什么要混合两个不同的平台，让自己更难，而是在 WPF 中创建 Windows 资源管理器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:04:12.660

您可能想看看[Windows API 代码包](http://archive.msdn.microsoft.com/WindowsAPICodePack)中的 Explorer Browser 控件。据我所知，这正是你想要的。

# vim - 如何在 VIM 中更改标签顺序？

> ID：11295248
> 
> 赞同：49
> 
> 时间：2012-07-02T14:01:10.970
> 
> 标签：vim, tabs, nerdtree

**有没有办法改变标签顺序`Vim`**（即改变标签栏中标签的位置）？例如，假设我当前的标签按以下顺序排列：

```
A | B | C | D 
```

但我想将标签的位置切换为：

```
A | C | B | D 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-02T14:02:57.540

您可以使用`:tabmove`后跟选项卡编号来移动过去。例如，`:tabmove 3`将使当前选项卡移动到第三个之后。`:tabmove 0`移动到开头并且`:tabmove`（没有数字）移动到结尾。

另一种方法——虽然不是正统的——是通过鼠标`:set mouse=a`和拖放选项卡启用。一开始它可能看起来更简单。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-12-01T19:54:48.533

## 向左/向右移动标签

对我来说，将标签移动到它们当前位置的左侧或右侧更有意义，而不是首先找出我想要它们的确切数字位置。这些简单的键盘映射正是这样做的：

```
noremap <A-Left>  :-tabmove<cr>
noremap <A-Right> :+tabmove<cr> 
```

* * *

现在您将能够移动当前选项卡：

*   **向左使用：** `Alt` +`Left`
*   **向右使用：** `Alt` +`Right`

对于 MacVim，尝试使用`M`代替`A`(ie `<M-Left>`)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-16T14:08:11.627

对我来说 -tabmove 不起作用。

我正在使用以下命令：Ctrl+Shift+PageUp|PageDown。

```
nmap <C-S-PageUp>   :tabmove -1<cr>
nmap <C-S-PageDown> :tabmove +1<cr> 
```

# f# - 在 F# 中为脚本文件编写测试

> ID：11295249
> 
> 赞同：5
> 
> 时间：2012-07-02T14:01:22.407
> 
> 标签：f#, tdd, xunit

我有一个脚本文件 setup.fsx 的一些功能，我想测试它们。xUnit 等需要将要测试的函数作为程序集的一部分。

所以我正在考虑将我的脚本从 setup.fsx 重命名为 setup.fs 扩展名，然后从另一个脚本文件加载它。但是然后我的脚本取决于

```
#r "System.Xml"
#r "System.Xml.Linq" 
```

然后我必须在调用脚本中指定（远离实际出现依赖的位置）

无论如何要在 xUnit 工作流中集成基于脚本的测试吗？建议什么组织为脚本文件编写测试？

（也许我们需要一个 Visual Studio 扩展来在脚本中而不是在汇编中进行测试......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:20:40.573

即使您只是将`fsx`脚本添加到 Visual Studio，您仍然可以`setup.fsx`与其他（可能）文件一起编译成普通项目`fs`，因此您应该能够将脚本作为普通脚本文件保存在 Visual Studio 中，同时，从项目或构建测试的命令行工具中引用它。

我尝试使用以下`test.fsx`文件执行此操作：

```
module Demo
#r "System.Xml.Linq.dll"
open System.Xml.Linq

let test () = 
    let d = XDocument(XElement(XName.Get("foo")))
    d.ToString() 
```

您肯定需要`module Name`在开始时进行一些声明（以便您可以访问其他文件中的函数），否则它可以是任何`fsx`文件。我使用的另一个文件是`test.fs`：

```
module Main
open Demo    
test() |> printfn "%A" 
```

这只是为了测试，但在这里你可以编写你的单元测试。如果您使用以下命令编译文件，您将获得可以传递给 xUnit 的标准程序集（注意，编译器可以`#r`从 中选择标签`test.fsx`，我们不必显式编写引用）：

```
fsc.exe --target:library test.fsx test.fs 
```

我认为如果您添加一个库项目，然后在文件中使用类似这样的内容手动添加指向该文件的链接（可以指向解决方案结构中其他位置的文件），您可以在 Visual Studio 中获得相同的配置`fsproj`：

```
<Compile Include="..\Eslewhere\In\Your\Project\Tree\File.fsx">
  <Link>File.fsx</Link>
</Compile> 
```

请注意，当您`fsx`使用“添加项目”添加文件时，它被标记为“包含”而不是“编译”，因此它不会被编译为项目的一部分。上面应该将它包含在项目中，并且它应该告诉编译器也将它包含在已编译的程序集中。

**警告：**也就是说，我认为`dll`使用标准单元测试来测试刚刚编译的文件可能会更好。如果您想测试`fsx`文件，我只需在最后添加几行作为测试并手动运行它们（选择，`Alt`+ `Enter`）。原因是`fsx`文件应该经常更改，因此过于可靠的测试可能会限制您的灵活性。另一方面，一旦代码变得更加可靠，将其移至`dll`文件是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:51:32.150

我认为最简单的解决方案是将要测试的代码放在单独的`*.fs`文件中。在您的`*.fsx`脚本中，您可以使用该`#load`指令从`*.fs`文件中加载代码（`#load`就像`#include`在 C/C++ 中一样）。

对于单元测试，您可以创建一个简单的 F# 库项目，其中包含`*.fs`使用的文件`<Link>`（如 Tomas 的回答），然后针对已编译的 DLL 运行单元测试。

# sql - 我的 SQL 语法有什么问题？（子查询都独立运行，正确。）

> ID：11295256
> 
> 赞同：0
> 
> 时间：2012-07-02T14:01:46.897
> 
> 标签：sql, oracle, oracle11g, syntax-error

我有以下查询，这给了我一个`ORA-00935 missing expression`错误，但我无法弄清楚我一生都搞砸了什么。我试过单独运行查询的几乎每个部分，它们都分开工作，但在一起我只会得到错误。我读过 SQL 在缺少表达式错误方面存在问题，但必须有一些更好的方法来编写此查询，以便它真正起作用。

```
Insert into V1144ENGINE.T_EDGES (EDGE_ID, VERSION, NODE1_ID, NODE2_ID, EDGE_TYPE_ID, CREATED_AT, WEIGHT, DELETED_AT)
   VALUES(V1144ENGINE.S_PK_EDGES.NEXTVAL,0,
       select NODE_ID from V1144ENGINE.T_NODES where NODE_NAME = 'Understand composition of an element',
       select NODE_ID from V1144ENGINE.T_NODES where NODE_NAME = 'Understand atoms as smallest units of matter', 3, SYSDATE, 1, NULL); 
```

我独立运行了部分查询，所有这些都返回了我想要的结果。例如;

```
select V1144ENGINE.S_PK_EDGES.NEXTVAL from dual;

select NODE_ID from V1144ENGINE.T_NODES where NODE_NAME = 'Understand composition of an element' 
```

如果有什么不同，我正在使用 Oracle 11g。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:09:31.783

我想你需要在子查询周围加上括号。

# java - Java中的SQL。收不到结果集

> ID：11295257
> 
> 赞同：2
> 
> 时间：2012-07-02T14:01:47.957
> 
> 标签：java, sql

如果我的语法错误，希望您能纠正我。只有当 SELECT...WHERE 子句正确时，我才能在 Google 上进行检查。

我想检索**student_id**以在另一个查询中使用它，但似乎我从中得到的只是一个“0”。

在java文件中：

```
rst = stmt.executeQuery("SELECT student_id FROM students WHERE name= 'to_delete'");
sid = rst.getInt("student_id"); 
```

**to_delete**是一个字符串，此 java 文件将其作为必须返回**student_id**的方法的参数接收。它确实包含正确的字符串（我检查过）。

表“students”包含以下文件：student_id、name、year。我需要返回名为“to_delete”的 student_id。

我没有错误/异常，只是当我显示结果时，无论我输入什么名称，我都会看到 id: 0 。也许 rst.getString("column_name") 仅适用于 executeUpdate(...)？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:02:59.707

`next()`在尝试从中获取任何内容之前调用结果集。每次要读取一行时，都通过调用 next 方法来遍历 ResultSet。当 next 返回 false 时，你就完成了。

这是下一个方法的 API 文档：

> boolean next() 抛出 SQLException
> 
> 将光标从其当前位置向前移动一行。ResultSet 游标最初位于第一行之前；第一次调用 next 方法使第一行成为当前行；第二次调用使第二行成为当前行，依此类推。
> 
> 当调用 next 方法返回 false 时，光标位于最后一行之后。任何需要当前行的 ResultSet 方法调用都将导致抛出 SQLException。如果结果集类型为 TYPE_FORWARD_ONLY，则供应商指定他们的 JDBC 驱动程序实现是返回 false 还是在后续调用 next 时抛出 SQLException。
> 
> 如果当前行的输入流打开，则调用 next 方法将隐式关闭它。读取新行时会清除 ResultSet 对象的警告链。
> 
> 返回： 如果新的当前行有效，则返回 true；如果没有更多行，则返回 false 抛出：SQLException - 如果发生数据库访问错误或在关闭的结果集上调用此方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:05:34.867

是的。问题是你应该在尝试从中获取之前调用 next()。否则你没有得到任何错误但没有结果。

# c# - USB闪存保护

> ID：11295261
> 
> 赞同：-7
> 
> 时间：2012-07-02T14:02:00.533
> 
> 标签：c#, vb.net

我正在开发一个基于外部 USB 磁盘驱动器的应用程序，我只需要允许我的应用程序读取和写入磁盘驱动器。

我应该怎么做才能实现这个任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:08:00.777

磁盘 I/O 由 Windows 内核直接处理。您无法从 .net 执行任何操作来阻止驱动器上的 I/O 操作。您可以加密您写入驱动器的所有内容以防止其他人阅读它，但仅此而已。

# c++ - 从输入迭代器中获取最后一项

> ID：11295264
> 
> 赞同：0
> 
> 时间：2012-07-02T14:02:02.813
> 
> 标签：c++

关于访问最后一项，输入迭代器的行为是否正确：

```
for(i=being();i!=end();i++){}
std::string s = i->toString();
return s; 
```

或者如果我尝试这样做，它应该抛出异常吗？

我的迭代器使用了两个 c 函数调用：getFirst(...) 和 getNext(...)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:09:30.223

这不是正确的行为。C++ 中的标准约定是，`end()`应该指向最后一项之外的位置。取消引用它通常会导致未定义的行为（C++11 §24.2.2/5）。

您可以创建自己的迭代器来原谅取消引用`end()`并利用它，但它偏离了标准做法，并使人们难以理解您的代码。我建议您抛出异常而不是返回最后一项。

* * *

在标准 C++ 中，如果您只有一个不可重现的输入迭代器，那么除非您每次都提取它，否则不可能“获取最后一项”：

```
auto it = begin();
auto val;
while (it != end()) {
    val = *it;
    ++ it;
}
return val; 
```

但是如果你可以创建一个*前向*迭代器，那么你可以使用

```
auto iter = begin();
decltype(iter) last_iter;
while (true) {
    last_iter = iter++;
    if (iter == end())
        break;
}
return last_iter; 
```

或者，如果您创建两次输入迭代器很便宜，您可以进行两次迭代：

```
auto dist = std::distance(begin(), end());
auto last_iter = begin();
std::advance(last_iter, dist - 1);
return last_iter; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:05:59.857

不，这不行，您将取消引用`end()`并调用未定义的行为。考虑：

```
int main()
{
    int i = 0;
    for (; i < 42; ++i) ;
    std::cout << i;    // prints 42, did you expect 41?
} 
```

当然，除非您实现了迭代器类以在这种情况下做一些明智的事情。然而，这对于标准库迭代器来说是不行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:25:28.960

该行为是未定义的，在实现迭代器时您无需对其执行任何操作（甚至无需抛出异常）。在实现 InputIterators 时，您只需要实现操作

*   `iter == iter2`,`iter != iter2`
*   `*iter`,`iter->...`
*   `++iter`,`(void)iter++`
*   `*r++`

其中，只有最后一个是困难的（您必须从前一个位置返回数据，而迭代器移动到下一个位置）。它通常由记住旧数据的代理实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T14:09:48.560

就 stl 容器而言，这不是正确的行为。

结尾（）

> 返回一个迭代器，该迭代器引用列表容器中的最后一个元素。

这意味着在您的循环之后，i 没有指向正确的对象（不是最后一个元素），而是指向一个特殊定义的结束值，这将导致调用 i->toString() 时发生访问冲突。

# jquery - 在手机上显示文件夹/文件结构

> ID：11295268
> 
> 赞同：0
> 
> 时间：2012-07-02T14:02:14.400
> 
> 标签：jquery, jquery-mobile, treeview

我试图找到一种方法来格式化与文件夹/文件结构相对应的树结构，其方式类似于 jQuery Mobile 中包含的“listview”。问题在于，对于一​​个文件夹，用户可能决定查看包含的文件夹和文件（这可以通过 listview 轻松完成），但它也可以决定查看文件夹属性。

关于我可以用来在手机上显示文件夹/文件数据的可能结构（存在或我可以实现）的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:08:59.113

使用[拆分按钮列表](http://jquerymobile.com/test/docs/lists/lists-split.html)。单击文件夹本身会钻入其中，但单击右侧按钮会导航到文件夹属性。

# linux-device-driver - linux设备驱动程序中的register_chrdev函数参数

> ID：11295274
> 
> 赞同：1
> 
> 时间：2012-07-02T14:02:29.580
> 
> 标签：linux-device-driver

**为什么函数register_chrdev**中需要指向 file_operation 结构的指针作为参数？这个函数如何使用结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:13:02.683

在字符设备中，您将读取/写入数据流中的数据，对于用户而言，设备只是一个文件（设备节点），每当他想向设备读取/写入数据时，他将使用设备文件并进行更新，因此，当用户进行读/写时，您的驱动程序应该提供这些基本文件操作的实现。

register_chrdev 连同分配主要和次要编号，它为设备注册特定的文件操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:06:07.863

您需要访问 chrdev 中的数据。您可以通过类似文件的界面来执行此操作。这就是为什么你使用`struct file_operations`: 来向内核提供关于读取 chrdev 需要做什么的信息。

事实上，`register_chrdev`不仅仅是为设备注册一个专业。如果您只想注册专业和未成年人，您应该使用`register_chrdev_region`.

# javascript - 如何在 THREE.js 中正确制作法线贴图？

> ID：11295288
> 
> 赞同：5
> 
> 时间：2012-07-02T14:03:24.620
> 
> 标签：javascript, shader, webgl, three.js

我只是尝试使用以下代码将[法线贴图忍者演示](http://mrdoob.github.com/three.js/examples/webgl_materials_normalmap.html)应用到场景中的立方体 - 使用来自开发分支的最新 Three.js 版本：

```
// common material parameters

var ambient = 0x050505, diffuse = 0x331100, specular = 0xffffff, shininess = 10, scale = 23;

// normal map shader

var shader = THREE.ShaderUtils.lib[ "normal" ];
var uniforms = THREE.UniformsUtils.clone( shader.uniforms );

uniforms[ "enableAO" ].value = true;
uniforms[ "enableDiffuse" ].value = false;
uniforms[ "enableSpecular" ].value = false;
uniforms[ "enableReflection" ].value = true;

uniforms[ "tNormal" ].texture = THREE.ImageUtils.loadTexture( "normal.jpg" );
uniforms[ "tAO" ].texture = THREE.ImageUtils.loadTexture( "ao.jpg" );

uniforms[ "tDisplacement" ].texture = THREE.ImageUtils.loadTexture( "displacement.jpg" );
uniforms[ "uDisplacementBias" ].value = - 0.428408 * scale;
uniforms[ "uDisplacementScale" ].value = 2.436143 * scale;

uniforms[ "uDiffuseColor" ].value.setHex( diffuse );
uniforms[ "uSpecularColor" ].value.setHex( specular );
uniforms[ "uAmbientColor" ].value.setHex( ambient );

uniforms[ "uShininess" ].value = shininess;

uniforms[ "tCube" ].texture = reflectionCube;
uniforms[ "uReflectivity" ].value = 0.1;

uniforms[ "uDiffuseColor" ].value.convertGammaToLinear();
uniforms[ "uSpecularColor" ].value.convertGammaToLinear();
uniforms[ "uAmbientColor" ].value.convertGammaToLinear();

var parameters = { fragmentShader: shader.fragmentShader, vertexShader: shader.vertexShader, uniforms: uniforms, lights: true, fog: false };
var displacementMaterial = new THREE.ShaderMaterial( parameters );

/*
var diamond = new THREE.Diamond({
    material: bumpmapMaterial
});
*/

var diamond = new THREE.Mesh(
    new THREE.CubeGeometry(50, 50, 50),
    displacementMaterial
); 
```

但是，我在 Chrome 中收到以下 WebGL 错误：

```
GL_INVALID_OPERATION : glDrawXXX: attempt to access out of range vertices 
```

在 Firefox 中，我没有收到这样的错误，但立方体也不会出现。使用标准颜色`MeshLambertMaterial`，一切正常。因此，需要与`ShaderMaterial`. 如果我使用 MASTER 分支的最新 Three.js 版本，它不会改善这种情况 - 会发生同样的错误。

知道为什么会出现这种情况以及我需要进行哪些更改才能使其正常工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:50:52.477

尝试添加这个？

```
geometry.computeTangents(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-23T12:01:10.720

**更新：**

```
<script src="https://rawgit.com/mrdoob/three.js/dev/examples/js/BufferGeometryUtils.js"></script>

THREE.BufferGeometryUtils.computeTangents( geometry ) 
```

必须在哪里`geometry`建立索引

# java - “未指定主要类型”与 GWT 和 Eclipse Juno 4.2

> ID：11295295
> 
> 赞同：8
> 
> 时间：2012-07-02T14:03:36.617
> 
> 标签：java, eclipse, gwt, eclipse-juno

升级到 Eclipse Juno 4.2（通过全新安装）并从[http://dl.google.com/eclipse/plugin/4.2](http://dl.google.com/eclipse/plugin/4.2)安装 GWT 插件（3.0.0v201206271046-rel-r42）后，我无法启动我的 GWT 应用程序.

我像使用 Eclipse 3.7 一样配置我的项目的 GWT 特性，但是当我运行我的应用程序时，在选择我的入口点后，启动失败并显示：“未指定主类型”

看来 gwt-dev.jar 不包括在内。我的项目中没有添加 GWT 引用的库。所以我需要在我的项目配置中重新选择 GWT 2.4。然后，gwt-dev.jar 被正确添加到“Referenced Library”部分。但是我在启动时仍然遇到同样的错误。

任何的想法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-04T18:18:11.443

通过在运行配置的“Main”选项卡上的“Main class”字段中显式添加“com.google.gwt.dev.DevMode”已解决此问题

# php - 使用 htaccess 到 php 处理程序页面的 Javascript

> ID：11295296
> 
> 赞同：2
> 
> 时间：2012-07-02T14:03:39.833
> 
> 标签：php, javascript, apache, .htaccess

我这样做的尝试是......

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteRule \.js$ js.php [L]   ## This line is the one I tried to add
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

如果我使用标签`<script type='text/javascript' src='http://www.domain.net/myfile.js'></script>`，我希望它通过`js.php`.

**js.php** 将使用处理文件`header('....'); echo file_get_contents('myfile.js');`

我已经尝试了很多事情来做到这一点，我之前在一个项目中做过这个，但我不记得现在在哪里我必须重做:)

希望它是有道理的...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:15:18.593

您可以添加以下重写规则：

```
RewriteRule ^([^\.]+)\.js$ js.php [NC,L] 
```

代替：

```
RewriteRule \.js$ js.php [L]   ## This line is the one I tried to add 
```

结果是：

```
http://www.domain.net/myfile.js => http://www.domain.net/js.php
http://www.domain.net/foo/bar/myfile.js => http://www.domain.net/js.php 
```

或者您可以执行以下操作：

```
RewriteRule ^([^\.]+)\.js$ $1.php [NC,L] 
```

结果是：

```
http://www.domain.net/myfile.js => http://www.domain.net/myfile.php
http://www.domain.net/foo/bar/myfile.js => http://www.domain.net/foo/bar/myfile.php 
```

[关于使用的RewriteRule 标志](http://httpd.apache.org/docs/current/en/rewrite/flags.html)的一些解释：

*   [NC](http://httpd.apache.org/docs/current/en/rewrite/flags.html#flag_nc)：使用 [NC] 标志会导致 RewriteRule 以不区分大小写的方式匹配。也就是说，它不关心字母在匹配的 URI 中是大写还是小写。
*   [L](http://httpd.apache.org/docs/current/en/rewrite/flags.html#flag_l)：[L] 标志导致 mod_rewrite 停止处理规则集。在大多数情况下，这意味着如果规则匹配，则不会处理更多规则。这对应于 Perl 中的最后一条命令，或 C 中的 break 命令。使用此标志指示应立即应用当前规则而不考虑进一步的规则。

# opencv - opencv检测的理想模式

> ID：11295297
> 
> 赞同：1
> 
> 时间：2012-07-02T14:03:42.230
> 
> 标签：opencv, feature-detection

好吧，也许不是“理想的”，但“我能用简单的形状做到最好”。

我有一个应用程序，我正在使用连接到移动机器人执行器的摄像头，并且需要检测它在世界上的位置（使用车载摄像头）。我的研究不是视觉处理，所以我喜欢生成一个“简单”的模式，以实现快速且相对准确的位置和旋转检测。图案将被打印出来并贴在平坦的表面上（请注意，这可能会导致纸张上偶尔出现照明渐变），并且相机轴通常大致垂直。

找到模式的一致性实际上比测量精度更重要；即，我宁愿有一些几乎总是给出有用的不太准确的结果的东西，而不是给出非常准确和精确的结果但在 10% 的时间里找不到任何东西的东西。

最后，这将在控制回路中使用，因此速度非常重要。

对于所有的 opencv/vision 专家来说，什么是模式选择（和相关的 opencv 算法）的好选择？

# c++ - 使用 waitpid 等待另一个进程的线程

> ID：11295298
> 
> 赞同：3
> 
> 时间：2012-07-02T14:03:43.577
> 
> 标签：c++, c, linux, multithreading, waitpid

我正在尝试`waitpid()`用于等待单个线程而不是进程。我知道`pthread_join()`或者`std::thread::join()`是等待线程的典型方式。然而，在我的例子中，我正在开发一个监控应用程序，它派生并执行（通过`execv`）一个程序，该程序反过来又产生一些线程。因此，我无法从监控应用程序中加入线程，因为它们属于不同的进程并且我无权访问源代码。不过，我希望能够等待这些单独的线程完成。

为了更容易地可视化我想要实现的目标，我附上了一张图，希望让它更清晰：

![在此处输入图像描述](../Images/a1b62098e54f6e675c0bd40e4c5f7283.png)

当我使用进程时一切正常，但`waitpid`不等待线程。基本上，在它被调用后立即`waitpid`返回`-1`（此时线程仍在运行几秒钟）。

国家文件`waitpid`：

> 在 Linux 内核中，内核调度的线程不是与进程不同的构造。相反，线程只是一个使用 Linux 独有的 clone(2) 系统调用创建的进程；其他例程，例如可移植的 pthread_create(3) 调用是使用 clone(2) 实现的。在 Linux 2.4 之前，线程只是进程的一种特殊情况，因此一个线程不能等待另一个线程的子线程，即使后者属于同一个线程组。然而，POSIX 规定了这样的功能，从 Linux 2.4 开始，一个线程可以并且默认情况下会等待同一线程组中其他线程的子线程。

该描述仅考虑从一个线程等待其他线程的子线程（在我的情况下，我想等待另一个进程的线程子线程）。但是，至少，它表明这`waitpid`是线程感知的。

这就是我用来等待线程的方法：

```
std::vector<pid_t> pids;

/* fill vector with thread IDs (LWP IDs) */

for (pid_t pid : pids) {
    int status;
    pid_t res = waitpid(pid, &status, __WALL);
    std::cout << "waitpid rc: " << res << std::endl;
} 
```

此代码适用于等待进程，但等待线程失败（即使使用了`__WALL`标志）。

我想知道是否真的可以使用`waitpid`. 我还需要使用其他标志吗？您能否指出任何解释如何等待另一个进程的线程的文档？

作为参考，我用于创建线程的代码是：

```
static void foo(int seconds) {
    int tid;
    {
        std::lock_guard<std::mutex> lock(mutex);
        tid = syscall(__NR_gettid);
        std::cout << "Thread " << tid << " is running\n";
        pids.push_back(tid);
        pids_ready.notify_all();
    }

    for (int i = 0; i < seconds; i++)
        std::this_thread::sleep_for(std::chrono::seconds(1));
}

static void create_thread(int seconds) {
    std::thread t(foo, seconds);
    threads.push_back(std::move(t));
}

std::vector<pid_t> create_threads(int num, int seconds) {
    for (int i = 0; i < num; i++)
        create_thread(seconds);

    std::unique_lock<std::mutex> lock(mutex);
    pids_ready.wait(lock, [num]() { return pids.size() == num; });

    return pids;
} 
```

我正在使用 GCC 4.6 和 Ubuntu 12.04。

**更新：我设法通过使用使其工作`ptrace`：**

```
ptrace(PTRACE_ATTACH, tid, NULL, NULL);
waitpid(tid, &status, __WALL);
ptrace(PTRACE_CONT, tid, NULL, NULL);

while (true) {
    waitpid(tid, &status, __WALL);
    if (WIFEXITED(status)) // assume it will exit at some point
        break;
    ptrace(PTRACE_CONT, tid, NULL, NULL);
} 
```

此代码在 T1、T2、...、Tn 是进程和线程时都有效。

但是，我有一个问题。如果我在多线程 C++ 应用程序中尝试使用此监控工具，一切正常。但最初的意图是将此监视工具用于生成多个线程的 Java 应用程序。当使用多线程 Java 应用程序时，`waitpid`in 循环每秒唤醒多次（子线程被 SIGSEGV 信号停止）。这似乎与 Java 出于自己的目的使用 SIGSEGV 的事实有关（请参阅[此问题](https://stackoverflow.com/questions/3731784/a-lot-of-sigsegv-while-straceing-java-process)和[此帖子](http://fusionsecurity.blogspot.com.es/2011/10/why-am-i-seeing-sigsegv-when-i-strace.html)）。

所有这些唤醒最终都会大大降低应用程序的速度。所以我想知道我的解决方案是否存在一些缺陷，以及是否有办法让它与 Java 应用程序一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:16:40.630

我对您声称所有流程都“正常工作”的说法有点困惑。`waitpid`只能等待您自己的子进程，而不是任意的其他进程，事实上，除非它是您自己的子进程，否则使用进程 ID 几乎肯定是一个错误。

与其寻找丑陋的黑客来做一些原本不可能的事情，为什么不直接修复您的设计以使用一些适当的进程间通信机制，以便线程在完成时可以向其他进程发出信号？或者将整个程序放在一个进程中（具有多个线程），而不是将您的工作分散到多个进程和线程中？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T17:45:09.577

除了线程组领导（也称为主线程）之外，您*不能在 Linux 中的其他进程中等待线程。*

`sys_waitpid`在现代 Linux 内核中，它被实现为一个包装器`sys_wait4`，依次调用`do_wait`. `do_wait`等待进程的繁重工作（线程只是一种特殊的进程）。它仅遍历当前任务的已知子代，如果`__WNOTHREAD`未指定，则遍历同一线程组中其他线程的子代。

这里有趣的时刻是，使用`clone`系统调用创建线程实际上将新创建线程的父级设置为被克隆的进程的父级，*但是*这个父级绝不会通知它刚刚获得了一个新的子级（它不是在其`task`结构列表中注册）。当克隆存在时它也不会接收`SIGCHLD`，因为线程的退出信号设置为`-1`-`copy_process`实际复制进程的函数。

这背后的原理很简单：等待是单次操作——一旦执行并完成了等待，等待的进程就不再存在。如果您允许另一个进程在线程或当前进程的子进程上等待，则您将从当前进程中获得对其子进程执行等待的能力。您还创建了一个可能的竞争条件，并且绝对不会`pthread_join()`因为其他进程等待您的一个线程而失败，对吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T15:34:09.400

好的，这*不是*解决方案，而是解释为什么我怀疑有解决方案使用`waitpid()`：

1.1 在 Linux 下使用创建的线程`clone()`是创建它们的进程的子进程。

1.2 在此之后，线程是*创建*进程 (B) 的进程 (A) 的孙子，而进程 (B) 又创建了线程。

2`waitpid()`不会触发任何终止的孙子的*信号*`SIGCHLD`。

所有这些一起解释了为什么你的方法不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-23T11:53:04.143

据我所知，waitpid 仅用于处理指定的终止 subpro。并且当有多个subpro同时等待处理时，它比等待更安全。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T20:18:21.147

在 Linux 中，您可以监视`/proc/PID/task/`目录，其中包含属于进程 PID 的每个线程的目录。

不幸的是，inotify 接口在这里似乎没有帮助，因此您必须反复扫描`/proc/PID/task/`目录以查找线程 ID。幸运的是，这似乎是最低的成本，特别是如果您每秒只进行十几次或最多几十次扫描。请注意，当线程退出时，目录将消失，而不是在线程被收割时。

TID==PID 的一个线程是 Linux 中的原始进程。其他线程将按递增顺序获取 TID（当然，它们最终会环绕）。请注意，TID 与 pthreads 线程无关。要找出哪个 TID 将映射到哪个 pthread_t，正在运行的线程必须调用`gettid()`（实际上，`syscall(SYS_gettid)`）；否则很难仅根据 TID 或`/proc/PID/task/TID/`内容来判断哪个线程是哪个线程。如果您只对线程周转感兴趣（如果/何时创建和/或退出），那么此接口比例如 ptrace 更有效，尽管线程退出检测存在*延迟*（这取决于您的目录扫描间隔） .

# .net - .NET DeflateStream 用法

> ID：11295300
> 
> 赞同：1
> 
> 时间：2012-07-02T14:03:52.450
> 
> 标签：.net, inflate, deflate, deflatestream

我正在尝试使用 .NET 中的 INFLATE 压缩流`DeflateStream`。`InvalidDataException`尽管我知道我传递的数据已经被 DEFLATE 算法正确处理（它已经过测试），但我的代码抛出了一个错误。我使用`DeflateStream`不正确吗？我的代码如下：

```
public byte[] Inflate(byte[] deflateArr)
    {
        MemoryStream ms;

        // try to create a MemoryStream from a byte array
        try
        {
            ms = new MemoryStream(deflateArr);
        }
        catch (ArgumentNullException)
        {
            return null;
        }

        // create a deflatestream and pass it the memory stream
        DeflateStream ds;
        try
        {
            ds = new DeflateStream(ms, CompressionMode.Decompress);
        }
        catch (ArgumentNullException)
        {
            return null;
        }
        catch (ArgumentException)
        {
            return null;
        }

        // create a bytes array and read into it
        byte[] bytes = new byte[4096];

        try
        {
            ds.Read(bytes, 0, 4096);
        }
        catch (ArgumentNullException)
        {
            return null;
        }
        catch (InvalidOperationException)
        {
            return null;
        }
        catch (ArgumentOutOfRangeException)
        {
            return null;
        }
        catch (InvalidDataException)
        {
            return null;
        }

        // close the memory stream
        ms.Close();

        // close the deflate stream
        ds.Close();

        return bytes;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:09:17.290

不你不是。

这段代码有问题：

*   显式调用`Close()`而不是使用`using`语句。在这里可能没有害处，但这是一个坏主意。
*   *捕获您根本不*应该捕获的各种异常，因为它们表示编程错误
*   在每个语句的基础上捕获异常，即使您在整个代码中以相同的方式处理它们（因此可以捕获更大块的异常）
*   忽略返回值`Stream.Read`

这是一个更好的版本，假设您使用的是 .NET 4 (for `Stream.CopyTo`)

```
public static byte[] Inflate(byte[] inputData)
{
    using (Stream input = new DeflateStream(new MemoryStream(inputData),
                                            CompressionMode.Decompress))
    {
        using (MemoryStream output = new MemoryStream())
        {
            input.CopyTo(output);
            return output.ToArray();
        }
    }
} 
```

现在你*可能*想赶上`InvalidDataException`- 我个人现在不会，但这样做*可能*是有意义的。（如有必要，我会在调用方捕获它。如有必要，您始终可以将此方法包装在另一个方法中。）

# javascript - Ext JS Gannt 在任务之间添加链接

> ID：11295301
> 
> 赞同：0
> 
> 时间：2012-07-02T14:03:56.520
> 
> 标签：javascript, extjs, gantt-chart

添加与 XML 的链接有效，但我想为它使用 JS 变量：

```
var dependencyStore = Ext.create("Gnt.data.DependencyStore", {
        autoLoad: true,
        proxy: {
            type : 'ajax',
            url: 'dependencies.xml',
            method: 'GET',
            reader: {
                type : 'xml',
                root : 'Links',
                record: 'Link' // records will have a 'Link' tag
            }
        }
    }); 
```

依赖项.xml

```
<Links>
    <Link>
        <From>3</From>
        <To>4</To>
        <Type>2</Type>
    </Link>
</Links> 
```

现在这是新代码，具有新的依赖存储和 JS 变量：

我的依赖存储实例目前看起来像这样：

```
var dependencyStore = Ext.create("Gnt.data.DependencyStore", {
            autoLoad    : true,
            proxy       : {
            type    : 'memory',
            reader  : {
                type: 'json'
            },

            data: [ assign ]
        }           
}); 
```

我的分配变量看起来像这样

```
var assign = [{
    "From" : 3,
    "To" : 4,
    "Type" : 2
}
] 
```

**问题是，这不是创建链接。**

编辑：整个文件

```
Ext.ns('App');

//Ext.Loader.setConfig({enabled: true, disableCaching : true });
//Ext.Loader.setPath('Sch', '../../../ExtScheduler2.x/js/Sch');
//Ext.Loader.setPath('Gnt', '../../js/Gnt');

Ext.require([
    'Gnt.panel.Gantt',
    'Gnt.column.PercentDone',
    'Gnt.column.StartDate',
    'Gnt.column.EndDate',
    'Sch.plugin.TreeCellEditing'
]);

Ext.onReady(function() { App.Gantt.init(); });

App.Gantt = {

    // Initialize application
    init: function (serverCfg) {
        Ext.QuickTips.init();

      var taskStore = Ext.create('Gnt.data.TaskStore', {
        autoLoad    : true,
        proxy       : {
            type    : 'memory',
            reader  : {
                type: 'json'
            },

            data: [ data
            ]
            // eof data
        }
        // eof proxy
    });

        var dependencyStore = Ext.create("Gnt.data.DependencyStore", {
             autoLoad    : true,
        proxy       : {
            type    : 'memory',
            reader  : {
                type: 'json'
            },
            data: [ assign ]
        }
    });

        var colSlider = Ext.create("Ext.slider.Single", {
            width: 120,
            value: 20, // TODO Sch.PresetManager.getPreset('weekAndDayLetter').timeColumnWidth,
            minValue: 20,
            maxValue: 140,
            increment: 10
        });

        var cellEditing = Ext.create('Sch.plugin.TreeCellEditing', {
            clicksToEdit: 1,
            listeners : {
                beforeedit : function() { return !Ext.getCmp('demo-readonlybutton').pressed; }
            }
        });

        var g = Ext.create('Gnt.panel.Gantt', {
            height: 350,
            width: 1300,
            renderTo: Ext.getBody(),

            highlightWeekends: true,
            loadMask: true,
            enableProgressBarResize: true,
            enableDependencyDragDrop: true,
            //snapToIncrement : true,
            cascadeChanges : false,
            startDate: new Date(2012, 5, 21),
            endDate: new Date(2012, 7, 17),
            viewPreset: 'weekAndDayLetter',

            eventRenderer: function (taskRecord) {
                return {
                    ctcls : taskRecord.get('Id') // Add a CSS class to the task element
                };
            },

            tooltipTpl: new Ext.XTemplate(
                '<ul class="taskTip">',
                    '<li><strong>Task:</strong>{Name}</li>',
                    '<li><strong>Start:</strong>{[Ext.Date.format(values.StartDate, "y-m-d H:i")]}</li>',
                    '<li><strong>Duration:</strong> {Duration}d</li>',
                    '<li><strong>Progress:</strong>{PercentDone}%</li>',
                '</ul>'
            ).compile(),

            // Setup your static columns
            columns: [
                {
                    xtype : 'treecolumn',
                    header: 'Tasks',
                    sortable: true,
                    dataIndex: 'Name',
                    width: 200,
                    field: {
                        allowBlank: false
                    }
                },
                Ext.create('Gnt.column.StartDate'),
                Ext.create('Gnt.column.EndDate'),
                Ext.create('Gnt.column.PercentDone')
            ],

            taskStore: taskStore,
            dependencyStore: dependencyStore,
            plugins: [cellEditing],

            tbar: [

                {
                    enableToggle: true,
                    id : 'demo-readonlybutton',
                    text: 'Read only mode',
                    pressed: true,
                    handler: function () {
                        g.setReadOnly(this.pressed);
                    }
                },
                '->',
                {
                    xtype: 'label',
                    text: 'Column Width'
                },
                ' ',
                colSlider
            ]
        });

        colSlider.on({
            change: function (s, v) {
                g.setTimeColumnWidth(v, true);
            },
            changecomplete: function (s, v) {
                g.setTimeColumnWidth(v);
            }
        });
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:00:55.747

当我有

```
data: [ assign ] 
```

**在我的 js 文件中，那么我的分配**变量中不能有`[ ]`标签。

 **所以而不是

```
var assign = [{
"From" : 3,
"To" : 4,
"Type" : 2 
```

}]

采用

```
var assign = {
"From" : 3,
"To" : 4,
"Type" : 2 } 
```**

# silverlight-5.0 - 创建新的文件扩展名并使用它启动silverlight App

> ID：11295303
> 
> 赞同：0
> 
> 时间：2012-07-02T14:04:05.397
> 
> 标签：silverlight-5.0, file-extension

我正在创建 Silverlight 应用程序，有时我需要创建新的自定义文件扩展名，当用户单击该特定扩展名说 .xxx 时，应该在浏览器中启动 silverlight 应用程序。这类似于单击 .txt 文件时打开文本文档。

任何人都可以提出解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-02T19:51:28.760

要将文件关联到程序，请执行以下步骤。

1.  在 Windows 7 中打开控制面板（小图标视图）并单击**默认程序**。
2.  单击**将文件类型或协议与程序**链接关联。
3.  在左侧**名称**列下，选择您想要更改默认打开它的程序的文件**扩展名类型**或**协议，然后单击****更改程序**按钮。
4.  **将打开一个名为“ Opens With** ”的对话框。在列表中选择默认程序或搜索并选择任何其他程序。

所以关联一个silverlight 文件，使用**Xbap**文件扩展名，它已经与Windows Presentation Foundation Host 关联。您可以将 xbap 文件与 Internet Explorer 相关联。

**或者**

如果您创建了自己的自定义扩展文件，则可以按照上述相同的方式将此文件关联到 Internet Explorer 或 Windows Presentation Foundation Host。

# cakephp - 更改后蛋糕视图不会更新

> ID：11295309
> 
> 赞同：0
> 
> 时间：2012-07-02T14:04:20.210
> 
> 标签：cakephp, code-generation

我通过控制台烘焙了模型、控制器、视图。然后我更改了 View/xxx/index.ctp 的内容，但更改未提交到网页。

知道有什么问题吗？

*编辑*：没有使用缓存

* * *

**查看/日志/index.ctp**

```
<div class="logs index">
    <h2><?php echo __('SystemLogs');?></h2>
    <table cellpadding="0" cellspacing="0">
    <tr>    
            <th><?php echo $this->Paginator->sort('isError');?></th>
            <th><?php echo $this->Paginator->sort('id');?></th>
            <th><?php echo $this->Paginator->sort('timestamp');?></th>
            <th><?php echo $this->Paginator->sort('category');?></th>
            <th><?php echo $this->Paginator->sort('action');?></th>
            <th><?php echo $this->Paginator->sort('detail');?></th>

    </tr>
    <?php

    foreach ($logs as $log): ?>
    <tr>
        <td>
            <?php 
            if (($log['Log']['isError'] == 1){
                echo h("ERR");
            }else{
                echo h("NFO");
            }

        ?>&nbsp; </td>

        <td><?php echo h($log['Log']['id']); ?>&nbsp;</td>
        <td><?php echo h($log['Log']['timestamp']); ?>&nbsp;</td>
        <td><?php echo h($log['Log']['category']); ?>&nbsp;</td>
        <td><?php echo h($log['Log']['action']); ?>&nbsp;</td>
        <td><?php echo h($log['Log']['detail']); ?>&nbsp; <br>
            (User: <?php echo h($log['Log']['userID']); ?>)<br>
            (PersID: <?php echo h($log['Log']['PersonalID']); ?>)
        </td>

    </tr>
<?php endforeach; ?>
    </table>
    <p>
    <?php
    echo $this->Paginator->counter(array(
    'format' => __('Page {:page} of {:pages}, showing {:current} records out of {:count} total, starting on record {:start}, ending on {:end}')
    ));
    ?>  </p>

    <div class="paging">
    <?php
        echo $this->Paginator->prev('< ' . __('previous'), array(), null, array('class' => 'prev disabled'));
        echo $this->Paginator->numbers(array('separator' => ''));
        echo $this->Paginator->next(__('next') . ' >', array(), null, array('class' => 'next disabled'));
    ?>
    </div>
</div> 
```

* * *

模型/Log.php

```
<?php
App::uses('AppModel', 'Model');
/**
 * Log Model
 *
 */
class Log extends AppModel {
/**
 * Display field
 *
 * @var string
 */

    var $order = "Log.timestamp desc";
    public $displayField = 'detail';
} 
```

* * *

**控制器/LogsController.php**

```
<?php
App::uses('AppController', 'Controller');
/**
 * Logs Controller
 *
 */

class LogsController extends AppController {

/**
 * Scaffold
 *
 * @var mixed
 */
    var $name = "Logs";
    public $scaffold;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:22:56.867

你在里面没有`index()`动作`LogsController`。

您可以创建一个像：

```
public function index() {
    $this->Log->recursive = 0;
    $this->set('logs', $this->paginate());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:31:29.830

删除该`public $scaffold;`行，您的更改将生效。脚手架意味着蛋糕会为你生成代码。

# asp.net - ASP.NET 禁止 ProcessPostData 的第一次尝试

> ID：11295314
> 
> 赞同：0
> 
> 时间：2012-07-02T14:04:34.453
> 
> 标签：asp.net, .net, lifecycle

我遇到了以下问题。

我们在我们的框架中有一些 web 控件，它们有一个属性 IsMustField。如果设置了此属性，则 CreateChildControls 方法会更改一些 CSS 并向控件添加 JS Validator。到目前为止，一切都很好。现在我正在尝试实现一个轻微的通用控件。它的一些文本字段在一种情况下使用时是必须字段，但在其他情况下则不是。决定，如果一个字段是必须的字段是在控件的 OnLoad 方法中完成的。

当我第一次打开页面时，一切正常。一旦我点击保存并完成回发，页面就会加载。IsMustField 字段的初始值设置为 ascx 中的值（在本例中为 true）。然后它第一次调用 ProcessPostData。这调用了 EnsureChildControls 方法，因此调用了我们控件的 CreateChildControls 方法。由于在此方法中附加了 CSS 和 JS 验证器，因此将添加它们，就好像控件是必须字段一样。之后，调用我的通用控件的 OnLoad 方法，并将 IsMustField 设置为 false。但是由于它已经调用了 CreateChildControls 方法，所以它不再具有预期的效果。

现在我的问题是：是否有可能以某种方式抑制 ProcessPostData 第一次尝试并仅第二次调用它，以便在我的通用控件将 IsMustField 设置为 false 之后加载控件？还是我必须寻找另一种解决方案。顺便说一句：我知道实现很糟糕......但我不能改变框架，所以我别无选择:)

我希望你们能帮助我

问候， crazy_crank

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:26:10.987

听起来您有两个选择：要么在生命周期的早期设置 IsMustField 值，要么在生命周期的后期执行“添加验证器”行为。这里有几个例子：

如果您在页面生命周期的早期设置“isMustField”（例如 Page_Init()），它将在 ProcessPostData 之前执行。这种方法假定您的 isMustField 决策行为不依赖于用户输入（因为它会在加载 ViewState 之前发生）。

第二种选择是等到生命周期的后期再决定是否应用 JS 验证器。如果您将该功能移至 Page_PreRender（而不是 CreateChildControls），则在您决定哪些控件为 IsMustField = true 之前，页面将有机会完全处理视图状态以及任何事件。

有关页面生命周期的信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms178472.aspx)。IMO，这是你能做的最好的事情，成为一个强大的 ASP.NET 开发人员！:)

# php - PHP 数据到 xml

> ID：11295315
> 
> 赞同：1
> 
> 时间：2012-07-02T14:04:38.233
> 
> 标签：php, xml

我有以下代码可以创建和下载 xml 格式的页面。

我的问题是，当在浏览器等中查看时，我得到了我所追求的 xml 树视图，但是当我在记事本等中打开页面时，我把它全部放在一行上。

我怎样才能让它输出文件，以便在记事本等中作为正确的 xml 树完成

```
header('Content-Disposition: attachment; filename="itunes_' . $_SESSION['xmlfilename'] . '.xml"'); 
header('Content-Transfer-Encoding: binary');
header("Content-type: text/xml");
echo '<?xml version="1.0" encoding="UTF-8"?>';
require_once 'inc/config.php';
require 'class.itunesxmlcls.php';
$d      =   new iTunesXML();
echo $d->CreateItunesXML($_SESSION['update']['id']); 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:14:47.980

通过在加载 XML 之前将标志设置为，使用[`DOMDocument`](http://us.php.net/manual/en/class.domdocument.php)该类为您设置格式，如下所示：[`formatOutput`](http://us.php.net/manual/en/class.domdocument.php#domdocument.props.formatoutput)`true`

```
$d   = new iTunesXML();
$xml = $d->CreateItunesXML($_SESSION['update']['id']);

$doc = new DOMDocument;
$doc->formatOutput = true;
$doc->loadXML( $xml);

echo $doc->saveXML(); 
```

# php - 将表单电子邮件发送到 .cc 电子邮件

> ID：11295316
> 
> 赞同：2
> 
> 时间：2012-07-02T14:04:40.763
> 
> 标签：php, forms, webserver, html-email

我正在处理电子邮件表单。

我想知道将php电子邮件发送到诸如info@domain.cc电子邮件之类的电子邮件地址是否有限制？.cc 是结束 url。这会影响它吗？

任何帮助都会很棒。

干杯，标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:11:06.530

`info@domain.cc`对我来说看起来像是格式良好的电子邮件...

它就像... `info@domain.eu`，完全没有问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:18:15.937

据我所知，没有关于电子邮件地址格式的 PHP 限制。

如果您尝试将电子邮件发送到由亚洲字符组成的地址，您可能会遇到一些问题，例如，由于可能的编码冲突，但否则您没问题。

我曾经制作了一个邮件脚本来用假邮件恶作剧我的朋友，我能够将邮件发送到甚至不包含 ab@ 的地址。

这种限制主要取决于您，开发人员。否则，这将是一个坏主意，因为您可以拥有甚至不是 username@domain.extension 格式的有效电子邮件地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T14:19:01.150

.cc 是一个有效的顶级域，所以它应该可以工作。

事实上，PHP 可以将邮件“发送”到任何电子邮件地址。是否送达取决于电子邮件地址是否有效。例如，bill_gates_is_a_wanker@microsoft.com 可能不是有效的电子邮件地址，即使它的格式正确。因此 PHP 会尝试发送它，而 Microsoft 的服务器可能会以“没有这样的帐户”类型的错误进行响应。

# android - 在 android 上仍然可以使用溢出隐藏的元素

> ID：11295318
> 
> 赞同：1
> 
> 时间：2012-07-02T14:04:48.133
> 
> 标签：android, css, facebook-comments, coverflow

我有一个包含在父 div 中的 Facebook 评论小部件，女巫使用溢出隐藏将其垂直切割。我已经以这种方式进行了设置，这样我就可以开始只显示部分内容，然后使用 jQuery 展开父容器。

这在每个主要浏览器（包括 iPhone 的 safari）上都非常有效，但是在 Android（在 Android 4.0 上测试，不确定浏览器版本）中，溢出的 div 之外的内容虽然仍然不可见，但可以访问。用户可以单击他们看不到的链接，这显然是一种不受欢迎的行为。

我的 HTML：

```
<div class="pageBlock column5050 column2">          
  <div style="" class="ext_container">
    <div data-mobile="false" data-width="" data-num-posts="10" data-href="http://na.se/redesign2012/kundcenter" class="fb-comments  fb_iframe_widget">
      <span style="height: 1049px; width: 550px;">
        <iframe scrolling="no" id="fcb3ba7898c46" name="f169222f1ff27fe" style="border: medium none; overflow: hidden; height: 1049px; width: 550px;" class="fb_ltr " src="https://www.facebook.com/plugins/comments.php?api_key=113851685335230&amp;channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D8%23cb%3Df12db7f9bc71f98%26origin%3Dhttp%253A%252F%252Fna.se%252Ffb9561675e1892%26domain%3Dna.se%26relation%3Dparent.parent&amp;href=http%3A%2F%2Fna.se%2Fredesign2012%2Fkundcenter&amp;locale=sv_SE&amp;mobile=false&amp;numposts=10&amp;sdk=joey&amp;width=550"></iframe>
      </span>
    </div>
  </div>
  <div class="fb_expand_btn expand_btn">
    <span class="expand_capt">Visa fler...</span>
  </div>
  <script type="text/javascript">
    [...]js/jQuery to expand/contract "ext_container"[..]
  </script>

</div> 
```

“ext_container”中的所有内容都是由 facebook 评论小部件生成的，由于我使用的是第三方 CMS，因此我对 HTML 的控制有限。

我使用以下 CSS

```
.fb-comments {
  width: 100% !important;
}

.fb-comments span, .fb-comments iframe {
  width: 100% !important;
}

.ext_container {
  position: relative;
  height: 440px;
  overflow: hidden;
  margin: 0 20px 20px;
}

.fb_expand_btn.expand_btn {
  margin: 0 20px;
} 
```

我的脚本仅更改 ext_container 高度。

我将 ext_container 设置为 position:relative 因为一个 IE7 错误，它会忽略我的溢出：隐藏。

最后，有 100% 的宽度是因为布局完全流畅。

无论如何，我试图找到对上述行为的任何参考，但无济于事，如果有人遇到这个并有解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:10:41.960

我怀疑 iframe 正在获取浏览器默认宽度。尝试设置 iframe 的宽度属性，而不仅仅是设置宽度样式。

换句话说，尝试为 iframe 赋予属性，

> 宽度=“550”

iframe 和 css 并不总是很好，尤其是在溢出时。您还可以从设置 height 属性中受益。

# php - 如何计算两个日期（）之间的差异？

> ID：11295320
> 
> 赞同：-6
> 
> 时间：2012-07-02T14:04:50.607
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)

我有两次这种格式的时间：`date("Y-m-d H:i:s")`. 如何计算这两个时间之间的差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:06:14.843

使用[DateTime](http://php.net/manual/en/class.datetime.php)类和[diff](http://www.php.net/manual/en/datetime.diff.php)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:08:09.347

尝试这个：

```
<?php
    $datetime1 = date_create($start);
    $datetime2 = date_create($end);
    $interval = date_diff($datetime1, $datetime2);
    return $interval->format('%a'); //returns the number of days
?> 
```

# python - 接收一个字符串，转换为计算并显示响应，但是..不能拆分

> ID：11295325
> 
> 赞同：0
> 
> 时间：2012-07-02T14:05:22.980
> 
> 标签：python, python-2.7

我的作业问题：

> 创建一个脚本来接收出生日期并返回用户的年龄

我试过这个：

```
ano_atual = 2012                                       
data_nascimento = input('Digite sua data de nascimento (dd/mm/aaaa): ')
dia, mes, ano = map(int, data_nascimento.split('/'))
idade = ano_atual - ano
print idade 
```

但我遇到了这个错误：

```
AttributeError: 'int' object has no attribute 'split' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T14:06:26.957

您可能想要[raw_input](http://docs.python.org/library/functions.html#raw_input)而不是[input](http://docs.python.org/library/functions.html#input)。 `input`相当于`eval(raw_input())`在 python2.x 中。所以你的字符串被转换为一个整数。就像：

```
a=30/6/2012 
```

将会。（在这种情况下，`a`是 30 除以 6 除以 2012 的结果，因为 python 2 中的整数除法是 0。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:07:15.727

使用`raw_input()`，`input()`在这里不起作用

查看 YouTube 上的教程：[http ://www.youtube.com/watch?v=qsTdaxahTsM](http://www.youtube.com/watch?v=qsTdaxahTsM)

# objective-c - 函数内部的函数（C/C++ 函数内部的目标 c 函数）

> ID：11295330
> 
> 赞同：1
> 
> 时间：2012-07-02T14:05:30.000
> 
> 标签：objective-c, macos, cocoa

我试图将一个函数放在另一个函数中，但我得到：

> 'self' 未在此范围内声明

这是代码：

```
-(void) alone {
    label.text = [NSString stringWithFormat:@"Hello world"];
}

void *multithreading( void *ptr ) {
    [self alone];
} 
```

那么 O 发现，如果最后一个代码更改为，警告/错误就会消失：

```
-(void *) multithreading:( void * )ptr {
    [self alone];
} 
```

我试图保持多线程保持不变，否则我的代码将无法工作，所以请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:12:12.600

您不能在 c 函数中访问目标 c 变量。你应该`self`作为参数传递给 c 函数。

```
void *multithreading( void *ptr , void *info) {// self in info
    id obj;
    if (info)
   {
    obj = (id)info;
    [obj alone];
   }
} 
```

# drupal - 二级菜单标题作为父页面标题

> ID：11295340
> 
> 赞同：1
> 
> 时间：2012-07-02T14:05:57.570
> 
> 标签：drupal, drupal-7

我的二级菜单设置为主菜单的二级。我怎样才能使二级菜单标题成为父页面标题？

这是我用来打印二级菜单的代码：

```
 <?php print theme('links__system_secondary_menu', array(
          'links' => $secondary_menu,
          'attributes' => array(
            'id' => 'secondary-menu-links',
            'class' => array('links', 'inline', 'clearfix'),
          ),
          'heading' => array(
            'text' => t('Secondary menu'),
            'level' => 'h2',
            'class' => array(),
          ),
        )); ?> 
```

如您所见，它目前由`'text' => t('Secondary menu'),`Is this possible?定义。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:06:35.030

也许你应该试试下面的代码，使用drupal的[drupal_get_title](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/drupal_get_title/7) ()：

```
print theme('links__system_secondary_menu', array(
          'links' => $secondary_menu,
          'attributes' => array(
            'id' => 'secondary-menu-links',
            'class' => array('links', 'inline', 'clearfix'),
          ),
          'heading' => array(
            'text' => drupal_get_title(), // this is the only line I had to edit.
            'level' => 'h2',
            'class' => array(),
          ),
        )); 
```

希望这会有所帮助……穆罕默德。

# css - 可重用的皮肤代码？

> ID：11295342
> 
> 赞同：0
> 
> 时间：2012-07-02T14:06:00.530
> 
> 标签：css, dotnetnuke, skinning

我是一名学习 DNN 的 .net 开发人员，想知道如何为我的皮肤制作可重用的代码。我想做的是在文件中创建页眉和页脚部分（如母版页），然后创建我将用于网站的皮肤，引入页眉/页脚文件并添加到其中（如嵌套母版页）。剥皮时有没有办法做到这一点？我试图阻止为网站的其余部分制作主页皮肤和皮肤。主页和网站的页眉和页脚部分始终相同。

如果最重要的是，我不想在多个地方进行更改。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:26:58.757

您可以添加从多个皮肤引用的控件。请查看我在[https://stackoverflow.com/a/10518931/2688](https://stackoverflow.com/a/10518931/2688)上的回答，了解更详细的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:40:13.017

可以说，当您为 DNN 创建皮肤时，本质上是在创建“母版页”。因此，当您创建“皮肤”时，当您布局页面时，您实际上只为整个站点使用了一种皮肤布局。

如果您的主页与其他内容页面不同，则无需创建两个完整的皮肤，但您需要创建两个布局。不同之处在于内容的中间部分。您的一个皮肤将有两个 HTML 文件，当您的皮肤被解析并包含到您的门户中时，它们将转换为两个 .ascx 文件（如果您通过 HTML 创建皮肤。如果您直接使用 .ascx，那么您ll 布局两个 .ascx 文件）。

这完全取决于您如何布局 ContentPane 窗格，它必须在您的布局中。对于您的主页，它将位于与内容页面不同的位置。例如，如果您的主页在页眉下方有一个旋转器和一个没有侧边栏的部分，因此内容是全宽的，然后是下面的页脚，那么您的 ContentPane 将在中间全宽。

然后，您的内容页面可能具有相同的页眉和页脚，但左侧或右侧有一个侧边栏（或两者都有，您可以在单个内容页面上执行此操作，除非您使用它们，否则它们不会同时显示）。因此，您对页面进行布局以使 ContentPane 向左（或向右）浮动，并使侧边栏向右（或向左）浮动。

基本上，您使用相同的工作流程来布局静态站点，但请记住，内容窗格将根据内容的定位来使用。

我建议您听听 Chris Hammond 从 DotNetNuke 制作的一些 DotNetNuke 视频。它们以全面的细节完成，并引导您完成换肤的各个方面，从简单的 HTML 添加标记，到直接的 .ascx 和使用寄存器。

[http://vimeo.com/dnnvideo](http://vimeo.com/dnnvideo)

# javascript - 将 for 循环转换为递归函数

> ID：11295346
> 
> 赞同：0
> 
> 时间：2012-07-02T14:06:15.910
> 
> 标签：javascript, loops, recursion, for-loop

我有一个代码块，我想将其转换为不使用 for 或 while 循环的递归代码块。建议？

```
sprite = function(dataset, pos){
  var size ={nrows : 3, ncolumns :3};
  var data = [];
  for(row = pos.row0; row < pos.row0+size.nrows; row++) {
    for(column = pos.column0; column < pos.column0+size.ncolumns; column++) {
      if(column == pos.column0) {
        data.push([dataset[row][column]]);
      } else {
        data[row].push(dataset[row][column]);
      }
    }  
  }
  return data;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:25:22.780

通常的模式是将循环转换为

```
while(condition(x)){
    //do something
} 
```

进入

```
var go = function(x){
    if(condition(x)){
       //do something
       return go(nextValueOfX);
    }else{
       return finalReturnValue;
    }
}
go(0); 
```

基本上，循环条件变成了 if，迭代变成了显式递归调用，变量要么被关闭，要么作为参数传递（取决于更方便的方法）。

* * *

在您的情况下，它可能看起来像

```
sprite = function(dataset, pos){
  var size ={nrows : 3, ncolumns :3};
  var data = [];
  var outerFor = function(row){
     if(row < pos.row0+size.nrows){
        var innerFor = ...;
        innerFor(0);
        outerFor(row+1);
     }
  }
  outerFor(0);
  return data;
} 
```

请注意，如果您还想将其转换为 continuation-passing-style 以用于异步代码，则需要添加一些额外的花里胡哨。我没有解释这一点，因为我认为您只是出于好奇才这样做。

# svn - SVN 存储库有更改，但 'svn up' 不会将这些应用于我们的文件系统

> ID：11295351
> 
> 赞同：0
> 
> 时间：2012-07-02T14:06:28.753
> 
> 标签：svn, aptana

我首先要说我们是 Subversion 的新手，所以我们不是 100% 了解流程和术语，但似乎有些东西没有按应有的方式工作，所以我们正在寻求帮助。

我们将 Aptana 与 Subversion 插件一起使用，并且我们已经很好地连接到了 Subversion 1.6.1 存储库。我们可以进行更改并同步并将此更改提交到我们的 SVN 服务器。我们可以使用 websvn 看到它已经正确记录了版本号的更改，并显示了哪些文件被编辑和我们的评论，所以我认为到这里就可以了。

然后，当我们使用 SSH 并导航到文件系统目录并运行“svn update”时，它会给我们一条消息，例如“at revision 53”。这个修订号对应于我们通过 Aptana 提交的修订，并且可以通过 websvn 看到。

但是....在这个“svn up”命令之后，服务器上没有任何文件被更改:-(有人有什么想法吗？感觉我们错过了一些明显的东西，但无法解决。我们已经用 '--depth infinity' 尝试过，但没有区别。在此先感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:14:35.950

应该有一个“清理”功能，使用它，如果您没有更改，它应该与删除和恢复相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:09:28.077

首先，您检查您的更新，您选择了正确的路径。有时会发生这种情况。尝试再次提交。否则你删除旧文件夹并再次获取新副本

# php - Zend Google Docs API insertEntry 导致空白文档

> ID：11295352
> 
> 赞同：1
> 
> 时间：2012-07-02T14:06:39.360
> 
> 标签：php, api, zend-framework, gdata

我试图使用 Zend Google Docs API 的 insertEntry() 函数简单地创建一个新文档，但即使我正确设置了内容，它总是会导致一个空白文档被添加到我的 Google 文档帐户中。

我已按照此处找到的文档[http://framework.zend.com/manual/en/zend.gdata.introduction.html#zend.gdata.introduction.post](http://framework.zend.com/manual/en/zend.gdata.introduction.html#zend.gdata.introduction.post)（这可能有助于查看“发布条目到 Google 服务器”代码示例）。

我正在使用在我的班级中调用的这段代码：

```
 public function insertData() {

    $gData = new Zend_Gdata($this->client);
    $gCategory = new Zend_Gdata_App_Extension_Category('http://schemas.google.com/docs/2007#document', Zend_Gdata_Docs::DOCUMENTS_CATEGORY_SCHEMA);

    $newEntry = $gData->newEntry();
    $newEntry->category = (array($gCategory));

    $newTitle = $gData->newTitle('Test');
    $newContent = $gData->newContent('Testing new entry');
    $newContent->setType('text');

    $newEntry->title = $newTitle;
    $newEntry->content = $newContent;

    return $gData->insertEntry($newEntry, Zend_Gdata_Docs::DOCUMENTS_LIST_FEED_URI);
} 
```

标题设置正确，并在 Google Docs 中正确显示为“测试”，但内容始终为空白。

我已经尝试了一切..有人知道问题出在哪里吗？

谢谢。

**更新：** 知道该文档上发布的代码不能按原样工作（它可能已过时）可能会有所帮助。如果您运行该代码，它会给出“需要类别”错误，修改代码以添加类别需要来自 Google 的“类别架构”，即类似“http://schemas.google.com/docs/2007#文档”。

在 Google docs API 页面[https://developers.google.com/google-apps/documents-list/#creating_or_uploading_text_documents](https://developers.google.com/google-apps/documents-list/#creating_or_uploading_text_documents)上，它声明此架构是：“创建一个新的空文本文档”。所以这可能是问题.. 但是，我找不到用于从现有内容（即不是空文档）创建文档的架构 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:29:51.763

你可以使用 Zend_Gdata_Docs 中的 uploadFile 方法吗？您可以上传一个 txt 文件，其中包含您希望在 google 文档中看到的默认内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T23:32:12.243

是的，我必须使用上传文件的方法。事实证明，实际上还不支持直接数据插入的方法。我希望 API 文档清楚地说明了这一事实......

# c# - First() 方法返回错误的字符串

> ID：11295356
> 
> 赞同：1
> 
> 时间：2012-07-02T14:06:59.633
> 
> 标签：c#, linq

如何告诉作为 LINQ 库一部分的 First 方法返回正确的值。我有这样的事情：

```
var query = db.SinglePageContent.Where(q => q.Lang == zm1 && q.PageName == zm2).Select(s => new { s.Content});

//var reqUrl = query.FirstOrDefault(item => item.Content);
ViewBag.requestUrl = query.First(); 
```

现在`ViewBag.requestUrl`具有价值`{ Content = bla bla bla }`，但我只想拥有“bla bla bla”。我只是不知道如何到达那里只检索价值。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T14:09:05.867

您正在创建新的匿名类`new { }`

改用这个

```
var query = db.SinglePageContent.Where(q => q.Lang == zm1 && q.PageName == zm2)
    .Select(s => s.Content); 
```

# c++ - Qt creator 中的代码折叠（#pragma region）

> ID：11295361
> 
> 赞同：12
> 
> 时间：2012-07-02T14:07:21.013
> 
> 标签：c++, qt-creator, pragma, code-folding

在 Qt Creator 中是否有类似于用于折叠的显式代码区域的东西：

```
#pragma region Region_1
void Test() {}
void Test2() {}
void Test3() {}
#pragma endregion Region_1 
```

我可以看到[逻辑](http://www.freeimagehosting.net/9a5a7)代码块的折叠，但不知道如何显式设置这样的块。我的 Qt Creator 版本是 2.4.1

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-11T07:06:21.057

我认为你可以这样做：

重新格式化你的 someclass.cpp

```
namespace ns
{
  CClass::CClass() {}
  CClass::~CClass() {}
  void CClass::Test() {}
  void CClass::Test2() {}
  void CClass::Test3() {}
} 
```

例如作为

```
namespace ns // construction-destruction
{
  CClass::CClass() {}
  CClass::~CClass() {}
}
namespace ns // test-region
{
  void CClass::Test() {}
  void CClass::Test2() {}
  void CClass::Test3() {}
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-02T14:17:04.483

[目前没有。](https://bugreports.qt-project.org/browse/QTCREATORBUG-5170)

我认为无论如何使用代码来构造你的代码会更好。在 C# 中也发现的区域是正确结构和保持可维护性的糟糕替代品。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-01-31T13:38:40.233

您可以将代码放在 {} 中并为其名称写注释。

```
{ // RegionName 
    void Test() {}
    void Test2() {}
    void Test3() {}
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-09-26T01:39:37.130

现在我们可以通过以下方式做到这一点：

在要折叠的块之前放置以下定义：

```
#define FOLDINGSTART { 
```

并直接在您放置的块之后：

```
#define FOLDINGEND } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-09T14:47:25.567

这有点老了，我知道，但是当我自己在寻找解决这个问题的方法时它就出现了，所以......

@ATatum_BlurPD 在[Qt Creator C++ 折叠区域](/post/643395)中说：

> 我知道这是旧的，但这是 QT Creator 4.13.3 中对我有用的。
> 
> *   确保启用了“显示折叠标记”
>     *   “工具”->“选项”->“文本编辑器”->“显示”选项卡
> *   在“ *.cpp”或“* .h”文件中，您想将区域添加到：
>     *   添加'#pragma region *RegionNameHere* {'
>         *   注意末尾的“{”
>     *   添加'#pragma endregion }'
>         *   注意末尾的“}”
> 
> ### 一些示例代码：
> 
> ```
> #pragma region TIMER:Filter Change Delay {
> 
> void CLog_EntryList::init_Timer_FilterChangeDelay()
> {
>     m_timerFilterChangeDelay.setInterval(5000);
>     m_timerFilterChangeDelay.setSingleShot(true);
>     connect(&m_timerFilterChangeDelay, &QTimer::timeout, this, &CLog_EntryList::slot_Timer_FilterChangeDelay_Timedout);
> }
> 
> void CLog_EntryList::slot_Timer_FilterChangeDelay_Start()
> {
>     if(m_timerFilterChangeDelay.isActive())
>         return;
>     
>     m_timerFilterChangeDelay.setInterval(5000);
>     m_timerFilterChangeDelay.setSingleShot(true);
>     m_timerFilterChangeDelay.start();
> }
> 
> void CLog_EntryList::slot_Timer_FilterChangeDelay_Timedout()
> {
>     
> }
> #pragma endregion} 
> ```

我在这里没有足够的声誉来发布图片证明，但你可以[在这里看到它们](https://forum.qt.io/topic/112181/qt-creator-c-folding-region/15)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-25T15:35:33.073

您可以将代码放在 {} 中并为其名称写注释。

这将引发`"EXPECTED UN-QUALIFIED ID"`错误。

# mysql - 将多个重复的 MySQL 查询合二为一？

> ID：11295363
> 
> 赞同：2
> 
> 时间：2012-07-02T14:07:28.733
> 
> 标签：mysql, optimization, sql-order-by

```
UPDATE some_table set rank=1 WHERE id=25
UPDATE some_table set rank=2 WHERE id=15
UPDATE some_table set rank=3 WHERE id=10
UPDATE some_table set rank=4 WHERE id=12
UPDATE some_table set rank=5 WHERE id=13
UPDATE some_table set rank=6 WHERE id=14
UPDATE some_table set rank=7 WHERE id=11 
```

我怎么能把它变成一个查询，因为我想不出一个？的这些值`id`是按顺序排列的。想想一个有图像的照片库，用户可以选择重新排列这些图像的顺序。后端将根据用户定义的序列分配排名，并将在 ORDER BY 子句中使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T14:08:30.377

```
update some_table 
set rank = case 
    when id = 25 then 1 
    when id = 15 then 2
    when id = 10 then 3 
    when id = 12 then 4
    when id = 13 then 5 
    when id = 14 then 6 
    when id = 11 then 7 
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T14:11:36.407

您可以使用案例结构...类似于此..

```
CASE id1
    WHEN id = 25 THEN UPDATE some_table SET rank = 1
ELSE
    WHEN id = 15 THEN UPDATE some_table SET rank = 2
ELSE
    etc...
END CASE 
```

参考：

```
DELIMITER |

CREATE PROCEDURE p()
BEGIN
DECLARE v INT DEFAULT 1;

CASE v
  WHEN 2 THEN SELECT v;
  WHEN 3 THEN SELECT 0;
  ELSE
    BEGIN
    END;
END CASE;
END;
| 
```

# asp.net-mvc - .net mvc 与 Active Directory 集成并使用数据模型访问 System.DirectoryServices.AccountManagement

> ID：11295368
> 
> 赞同：2
> 
> 时间：2012-07-02T14:07:56.973
> 
> 标签：asp.net-mvc, active-directory

我正在构建一个 Intranet 应用程序，并且正在使用 Windows 身份验证。我有这个设置和工作，我可以通过@Context.User.Identity.Name 查看当前用户的用户名

我想查询 Active Directory 以检索显示名称、电子邮件地址等。

我查看了 System.DirectoryServices.AccountManagement 并从中创建了一个基本示例。我不清楚如何在我的应用程序中显示这些信息。

到目前为止，我所拥有的如下：

```
public class searchAD
{

    // Establish Domain Context
    PrincipalContext domainContext = new PrincipalContext(ContextType.Domain);

    public searchAD()
    {
        // find the user 
        UserPrincipal user = UserPrincipal.FindByIdentity(domainContext, HttpContext.Current.User.Identity.Name);

        if (user != null)
        {
            var userGuid = user.Guid;
            var DisplayName = user.DisplayName;
            var GivenName = user.GivenName;
            var EmailAddress = user.EmailAddress;
        } 

    }

} 
```

我假设我需要像这样创建一个 ViewModel？

```
public class domainContext
{
    public Nullable<Guid> userGuid { get; set; }
    public string DisplayName { get; set; }
    public string GivenName { get; set; }
    public string EmailAddress { get; set; }
} 
```

我希望能够在应用程序的各个部分访问这些信息。

我没有收到任何错误，只是似乎缺少将所有这些联系在一起的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T14:22:36.203

您缺少 Windows 身份部分。此外，请记住处理您正在使用的任何 AD 对象：

```
public class AdLookup
{
    public static DomainContext GetUserDetails()
    {
        using (PrincipalContext pc = new PrincipalContext(ContextType.Domain))
        {
            IPrincipal principal = HttpContext.Current.User;
            WindowsIdentity identity = ((WindowsIdentity)principal.Identity);
            UserPrincipal user = UserPrincipal.FindByIdentity(pc, identity.Name);

            if (principal != null)
            {
                return new DomainContext() {
                    userGuid = user.Guid,
                    DisplayName = user.DisplayName,
                    GivenName = user.GivenName,
                    EmailAddress = user.EmailAddress
                };
            }
        }

        return null;
    }
} 
```

最好的办法是创建一个名为“BaseController”的类，您的所有其他控制器都从该类继承，并将此代码放在那里（理想情况下作为名为 DomainContext 的属性）。

要在整个应用程序中使用它，您还可以在基本控制器上添加一个方法来将此信息添加到 ViewData：

```
protected override void OnActionExecuted(ActionExecutedContext filterContext)
{
    base.OnActionExecuted(filterContext);
    ViewData["BaseController_DomainContext"] = AdLookup.GetUserDetails();
} 
```

然后，您可以使用以下方法访问从该任何继承控制器呈现的任何视图上：

```
@{
    DomainContext domainContext = (DomainContext)ViewData["BaseController_DomainContext"];
}

Welcome back: @domainContext.DisplayName 
```

当然，您会遇到空值问题，但您可以在 GetUserDetails 方法中使用某种虚拟 DomainContext 来处理它。

这只是一种方法，或者您可以创建一个基本视图模型，您的所有视图模型都从该模型继承并直接在视图中访问它们，但我发现这种方式更简单，因为您不会增加任何复杂性到您的视图模型。

# matlab - 使用 Matlab 算法实现的时间比较是否有问题？

> ID：11295377
> 
> 赞同：2
> 
> 时间：2012-07-02T14:08:48.720
> 
> 标签：matlab

我开发了一种图像[特征提取](http://en.wikipedia.org/wiki/Feature_extraction)算法。为了评估算法提取时间，我使用一组图像作为输入运行了开发的方法及其竞争对手。所有提取算法均在 Matlab 中实现。

然而，有人向我指出，使用 Matlab 实现的时间比较是有问题的。这种说法有依据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T14:26:44.000

该论点有两个可能的原因：时序测量可能存在可变性，并且 Matlab 被认为很慢，因此时序毫无意义。

出于第一个原因，[获得准确的时间确实是一个挑战](http://blogs.mathworks.com/steve/2008/02/29/timing-code-in-matlab/)，特别是如果程序之间的运行时间非常相似。因此，简单`tic`，`toc`应该由[timeit](http://www.mathworks.com/matlabcentral/fileexchange/18798-timeit-benchmarking-function)函数代替。

第二个原因是假的。当然，在 Matlab 中某些操作可能需要更长的时间，但是 TheMathWorks 在过去几年中花了很多精力使 Matlab 更快，因此在 C/C++ 中重新实现算法实际上可以使其更慢。如果其中一种算法更适合语言的优势，算法的相对速度确实可以在语言之间改变。但是用相同的语言实现这两种算法并诚实地努力以有效的方式实现算法肯定会导致公平的比较。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T15:10:39.337

时间的有效性取决于您如何实现算法以及如何在“现实世界”中使用它们。如果您有一个算法应用程序，并且将使用 Matlab 实现，那么您的时间安排没有任何问题，因为您正在安排算法的使用方式。但是，如果您打算用较低级别的语言（例如 C++）重新编码算法，您可能会得到明显不同的结果。

Mathworks 花了很多时间优化 Matlab 中的工具箱和基本操作，因此矩阵乘法、矩阵求逆、FFT、SVD 等通常与良好的 C++ 实现一样快。您不一定知道优化了哪些工具箱例程。如果您的算法仅依赖于高度优化的例程，而竞争算法依赖于优化程度较低的例程，那么您的算法可能看起来更好，因为底层实现更好。

可能存在差异的另一个原因是 Matlab 是一种解释性语言。当你的程序有循环时，解释器必须弄清楚每次循环中代码在做什么。相比之下，矩阵运算已提前编译为机器代码，并且没有解释器开销。例如，如果我运行：

```
start = time; 
x = zeros(1000,1000); 
x = x+1; 
stop = time;
stop - start 
```

在我的电脑上，我得到 0.02297 秒。如果我使用循环运行等效版本：

```
start = time; 
x=zeros(1000,1000); 
for i = 1:1000
    for j = 1:1000; 
        x(i,j) = x(i,j) + 1; 
    end; 
end; 
stop = time;
stop - start 
```

我得到 18.175 秒。（上面@Jonas 提到的方法在您需要高精度时提供了更好的时机，但在这种情况下，有足够的数量级差异，这种简单的方法可以很好地工作。）

如果竞争算法在循环中做了很多工作，而您的算法更多地依赖内置函数，那么您的算法可能会因为解释器开销较少而击败竞争对手。

如果您计划仅在 Matlab 内部使用这些算法，并且无法从竞争对手中消除解释器开销，那么声称您的算法更好是有效的——至少对于 Matlab 实现而言。如果你想声明一个更一般的结果，至少你必须证明解释器不是性能差异的原因。用像 C++ 这样的语言实现所有算法消除了解释器的开销。为了进行公平的比较，您必须确保您已经完成了所有底层算法（例如，FFT、SVD、矩阵乘法）的快速实现。幸运的是，优化的库可用于多种不同语言的许多常用算法。

当然，如果你能证明你的算法的渐近复杂度更好（O() 表示法），这表明它在更广泛的实现中可能会更好，尽管常量在实际实现中很重要。

# jquery - 使用标签发送直接请求而不是 ajax链接到远程

> ID：11295378
> 
> 赞同：1
> 
> 时间：2012-07-02T14:08:49.047
> 
> 标签：jquery, ruby-on-rails, ajax, button, twitter-bootstrap

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:15:54.763

这个元素。它是浮动的还是绝对定位的？这可能会导致您的浏览器以不同的方式处理它。

尝试分配它`display: inline-block` 而不是浮动或位置，看看这是否会使问题消失。

或者，您可以将 javascript 函数绑定到子`<i>`元素以及`<a>`看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:59:12.073

我最终编写了一个动作助手和一个 javascript 函数来使用 jquery.ajax 发送一个 ajax 请求

```
 def ajax_button_tag(url, text, button_html={}, icon_html={})
        icon_html[:class] = "margin-right-5" unless icon_html[:class] 
        icon_html[:class] = icon_html[:class] + " margin-right-5" unless (icon_html[:class] && icon_html[:class].match("margin-right-5"))
        icon_html_tag = raw("<i #{icon_html.map{|k,v| "#{k}=\"#{v}\""}.join()} ></i>")
        raw("<button #{button_html.map{|k,v| "#{k}=\"#{v}\""}.join()} onclick=\"sendAjaxRequest('#{url}');\">#{icon_html_tag}#{text}</button>")
      end

function sendAjaxRequest(path, mname){
    method_type = mname || "GET";
    jQuery.ajax({
        type: method_type,
        dataType: "script",
        url: path
    });
}

<%= ajax_button_tag('/path/to/resource', {:class=>"btn btn-primary", :remote=>true, 'data-loading-text'=>'updating...'}, {:class=>'icon-save icon-white'})%> 
```

# google-apps-script - 带有 google drive api 的应用脚本

> ID：11295382
> 
> 赞同：1
> 
> 时间：2012-07-02T14:09:14.193
> 
> 标签：google-apps-script

我正在使用 Drive Api 制作一个谷歌驱动器集成网络应用程序。Google App 脚本的 api 服务看起来很不错。但是，是否可以使用 Google App 脚本作为外部库与本地 html 集成？或者您必须在 Google 脚本编辑器中构建 App 脚本？如果是这样，如何将其与 Drive Api 链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:23:23.790

您可以在[script.google.com](http://script.google.com)中构建您的脚本并使用 Apps-script 的默认 Drive Service。

另请[在此处](http://www.labnol.org/internet/send-gmail-to-google-drive/21236/)查找将 Drive Service 与 Apps-script 一起使用的示例应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T20:03:42.667

要执行您想要的操作，您至少必须从脚本编辑器中将您的脚本作为 Web 应用程序发布。[请参阅文档](https://developers.google.com/apps-script/guides/web). 它不是一个理想的开发环境，但它确实为 Google API 提供了代码完成功能，这对于内存和调试工具的帮助非常方便。您无需链接到 Drive API 即可访问特定 Drive 帐户中的文件，因为此功能由 DriveApp 和 DocsList 提供。但是，您可以在开发者控制台中激活 Drive API，然后在资源：高级 Google 服务下的脚本中激活。您可能不需要这样做，但您可能无法通过 API 调用访问某些功能。例如，通过方法调用来检索 Google 文档文件修订的文本似乎是不可能的。我让它工作的唯一方法是使用 UrlFetchApp 发送授权的 HTTPS 请求。我不认为这是故意的，但这是我的经验。

# tdd - 在 TDD 上迁移数据是什么意思？

> ID：11295385
> 
> 赞同：0
> 
> 时间：2012-07-02T14:09:21.547
> 
> 标签：tdd

几周以来，我一直在阅读[测试驱动开发：示例。](https://rads.stackoverflow.com/amzn/click/com/0321146530)现在，我坚持第 31 章——重构。我的问题是关于第 183 页上的迁移数据。我不明白这个主题。关于的例子`TestSuite`也不能帮助我理解这一点。

我想知道迁移数据是什么意思以及如何在 TDD 中使用它。

* * *

**[更新]** **迁移数据***一书中的内容*

 **你如何从一种表现形式转变？临时复制数据。

*如何：* 这是内部到外部的版本，您可以在内部更改表示，然后更改外部可见的界面：

*   以新格式添加实例变量
*   在您设置旧格式的任何地方设置新格式变量
*   在使用旧格式的任何地方使用新格式变量
*   删除旧格式
*   更改外部接口以反映新格式

不过，有时您想先更改 API。那么您应该： - 添加新格式的参数 - 从新格式参数转换为旧格式内部表示 - 删除旧格式参数 - 用新格式替换旧格式的使用 - 删除旧格式

*原因：* 一对多每次都会产生数据迁移问题。假设我们想使用一对多来实现 TestSuite。我们将从：

```
def testSuite(self):
suite= TestSuite()
suite.add(WasRun("testMethod"))
suite.run(self.result)
assert("1 run, 0 failed" == self.result.summary()) 
```

通过以下方式实现（在一对多的“一”部分）：

```
class TestSuite:
def add(self, test):
self.test= test
def run(self, result):
self.test.run(result) 
```

现在我们开始复制数据。首先我们初始化测试集合：

```
TestSuite
def __init__(self):
self.tests= []
Everywhere “test” is set, we add to the collection, too:
TestSuite
def add(self, test):
self.test= test
self.tests.append(test) 
```

现在我们使用测试列表而不是单个测试。出于当前测试用例的目的，这是一种重构（它保留了语义），因为集合中只有一个元素。

```
TestSuite
def run(self, result):
for test in self.tests:
test.run(result) 
```

我们删除现在未使用的实例变量“test”：

```
TestSuite
def add(self, test):
self.tests.append(test) 
```

在具有不同协议的等效格式之间移动时，您还可以使用逐步数据迁移，例如从 Java 的 Vector/Enumerator 移动到 Collection/Iterator。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:34:59.590

这是一种重构，您希望更改数据的表示方式。

正如书中所说，*一个*例子是从一个转移到多个，例如你已经为一个测试制作了一个场景，现在你想改进它来处理 N 个测试。因此，现在您必须将数据表示形式从 Test 实例变量更改（迁移）为`List<Test>`. 可以通过由内而外或由外而内的方法逐步完成此更改

*   Outside in (preferred) - 在新表示中向现有 API 添加额外参数（例如，您将参数从原始结构更改为自定义结构）。让所有客户端编译。重新连接 API 的内部以在使用旧参数的地方使用新参数（另一种选择是复制，以便暂时使用两者）。很快，您的 IDE 应该会告诉您旧的（原始）参数已不再使用。那时，您可以安全地删除该参数。这个想法是通过重构来保留代码的行为。**

# c# - 表式动态创建的数据结构

> ID：11295393
> 
> 赞同：0
> 
> 时间：2012-07-02T14:09:47.130
> 
> 标签：c#, csv, data-structures

我想将 CSV 文件的内容读入某种类似表格的数据结构中。我需要一个能够适应任意数量的基本数据类型（即字符串、整数、浮点数）列的数据结构。我已经有代码从文件中读取值作为字符串，我很确定我可以设计一些逻辑来轻松识别每种数据类型以转换为强类型（无论如何都是为了我的目的）。例如：

```
Name, Age, Sex

"John",34,M

"Jill",27,F  etc.. 
```

变成：

```
string, uint, enum 
```

我是否应该尝试使用这些唯一字段（可能使用反射）创建一个结构或类，然后尝试将它们存储在列表中？这将如何完成？

我预计会有成千上万行数据。我将在内存中以顺序方式一次访问一行数据。

我知道[文件助手](http://filehelpers.sourceforge.net/)可以做这种事情，但我想知道如何在我自己的代码中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:11:23.230

为什么不直接使用 DataTable？这是一个强类型的表格数据结构。您不需要在数据库的上下文中使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T14:12:40.543

您可以使用其中`DataTable`之一或元组如下

```
var table = new Tuple<string, int, string>("Rajesh",25,"Male"); 
```

我建议`DataTable`您在哪里可以使用一些内置方法

# xaml - Metro 风格 XAML ScrollViewer 中的统一文本缩放

> ID：11295396
> 
> 赞同：2
> 
> 时间：2012-07-02T14:09:51.027
> 
> 标签：xaml, windows-8, microsoft-metro, winrt-xaml

我一直试图让某些东西在 Windows 8 Metro 风格的应用程序中工作，但我无法获得正确的属性来让它工作。这就是我想要发生的事情：

我有一个包含 StackPanel 的 ScrollViewer。RichTextBox 被添加到堆栈面板（从服务器流式传输文本数据）。它像控制台一样有效地工作。所以我的布局大致是这样的：

```
<ScrollViewer>
  <StackPanel x:Name="outputStackPanel"/>
</ScrollViewer> 
```

我想要的行为是这样的：我希望文本在屏幕尺寸的水平方向上均匀缩放，然后在 ScrollViewer 中垂直滚动。也就是说，我使用的字体是定宽字体，无论屏幕大小，我都希望出现相同数量的ascii字符。

此外，我可以在应用程序中选择将文本换行或不将文本换行到屏幕上。这意味着，当文本换行时，它应该换行到固定的屏幕宽度，但如果不是，则 ScrollViewer 应该可以水平滚动，但在任何时候，水平滚动时应该可以看到大致相同数量的字符。

我已经尝试了几种方法来做到这一点，但都没有成功。我尝试添加一个 ViewBox，如下所示：

```
<ScrollViewer>
  <Viewbox Stretch="UniformToFill" StretchDirection="UpOnly">
    <StackPanel x:Name="outputStackPanel" />
  </ViewBox>
</ScrollViewer> 
```

虽然这似乎可以让文本以正确的大小出现，但它不允许文本在文本换行打开时换行。内容只是在右侧被截断。

我目前的解决方法是检查屏幕分辨率并对字体大小进行粗略估计以使其正确显示，但这并不理想，因为它并不精确，因此不同的分辨率会得到截然不同的可见字符数量，并且对于出于此应用程序的目的，可见字符的数量很重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T21:57:57.113

我已经能够让它工作，但不幸的是，我认为没有一个答案可以自动适用于任何字体。我可能是错的，但这是我如何让它工作的：

我选择了一个固定宽度的字体（Consolas）和一个特定的大小。我认为大小并不重要。

选择字体大小后，我将 RichTextBlock 放入 ViewBox 并计算出设置 RichTextBlock 所需的 WIDTH 以在屏幕上获得我想要的确切字符数（或列数）。在字体大小为 13.333 时，要获得正好 60 列，我需要 440 的宽度。

在 ViewBox 内使用 13.333 字体大小和 440 的固定宽度，无论屏幕分辨率或方向如何以及文本换行，我总是能够准确地获得 60 列。既然这行得通，我需要在禁用自动换行的情况下解决您的问题。

您希望文本能够从屏幕上流出并允许用户向任一方向平移，但您始终需要固定数量的列（在我的示例中为 60）。为此，我从 RichTextBox 中删除了固定宽度，并确定了 ScrollViewer 需要设置的缩放级别才能始终获得 60 列宽。事实证明，缩放级别是当前屏幕宽度除以 440（我在上面为这个特定字体和大小想出的神奇宽度）。

所以，这里是 xaml：

```
 <ScrollViewer x:Name="Scroller" ZoomMode="Disabled" HorizontalScrollBarVisibility="Visible" >
        <RichTextBlock x:Name="TextBlock">
            <Paragraph FontSize="13.333" FontFamily="Consolas">
                <Run Text="…" FontFamily="Consolas"/>
            </Paragraph>
        </RichTextBlock>
    </Viewbox>
</ScrollViewer> 
```

对于自动换行：

```
TextBlock.Width=440
Scroller. ZoomToFactor(1.0f) 
```

对于自动换行关闭：

```
TextBlock.Width=Auto
Scroller.ZoomToFactor((float)Window.Current.Bounds.Width / 440); 
```

It’s important to change the zoom level whenever the window size changes. This could be because the user rotated the device, because they connected an external monitor, because you’ve gone into snapped view, etc. You can get notified whenever this happens by subscribing to the Window.Current.SizeChanged event. Inside the event, be sure to use the parameter passed to you because the window hasn’t actually changed size yet at this point. So:

```
void Current_SizeChanged(object sender, Windows.UI.Core.WindowSizeChangedEventArgs e)
{
    Scroller.ZoomToFactor((float)e.Size.Width / 440);
} 
```

Finally, obviously the Width of 440 is tied to that particular font, font size and the fact that I always want 60 columns displayed. Once I figured it out, it should never change on any display size as long as I use the same font and font size. If you want to allow the user to pick different fonts, you’re going to have to figure out a way to calculate that dynamically. I couldn’t find any answer for this in my 20 minutes of searching. Maybe someone else can find that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:10:55.887

你可以试试 Viewbox 控件。它会调整其内容的大小，因此您不必担心屏幕分辨率等问题。

C# 的文档在[这里](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.viewbox)。还有一个JS版本。

这是一个关于扩展 Metro Apps[的](http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx)很好的 MS 指南，您可以查看其他一些想法。

# jquery - JQuery .hide() 函数不会在 chrome 和 Internet Explorer 中立即触发。在 Firefox 中运行良好

> ID：11295398
> 
> 赞同：0
> 
> 时间：2012-07-02T14:10:08.750
> 
> 标签：jquery, internet-explorer, google-chrome

我有一个包含表单的页面

一旦用户提交表单，我希望按钮消失，并显示一个带有微调器 gif 的 div 和一个正在验证的消息

所以我有：

```
function submit_application(input){

    $('#create_account_button').hide();
    $('#create_account_validating').show();

    var form = $(input).parents('form:first');
    var form_id = ($(form).attr('id'));
    var valid = validate_form(form_id);

    if(valid){
        $('#'+form_id).submit();
    }

} 
```

在我的表单提交按钮上，我有：

```
onclick="submit_application(this);return false" 
```

validate_form 循环遍历每个输入并验证语法等。

这需要几秒钟的时间，因为有对服务器的 ajax 调用来验证某些字段，因此需要使用微调器 gif 'validating now' div

在 Firefox 中一切正常，但在 Internet Explorer 和 chrome 中，按钮似乎永远不会消失

我做了一些故障排除并意识到发生了什么是那些浏览器在隐藏和显示相关 div 之前验证表单。

奇怪的行为，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:25:20.113

尝试将验证包装在延迟函数中，如下所示......

```
function submit_application(input){
    $('#create_account_button').hide();
    $('#create_account_validating').show();

    setTimeout(function() {
        var form = $(input).parents('form:first');
        var form_id = ($(form).attr('id'));
        var valid = validate_form(form_id);

        if(valid){
            $('#'+form_id).submit();
        }
    }, 250);
} 
```

我不知道为什么您的代码正在执行您所描述的操作，但这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:27:44.793

尝试使用 jQuery 的提交处理程序： http: [//api.jquery.com/submit/](http://api.jquery.com/submit/)

```
$('#myform').submit(function() {
    $('#create_account_button').hide();
    $('#create_account_validating').show();

    var valid = validate_form('myform');
    if(valid)
        $(this).submit();
    else
        return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:29:36.523

使用回调？

```
function submit_application(input){    

    $('#create_account_button').hide(0, '', function(){

        $('#create_account_validating').show(0, '', function(){
            var form = $(input).parents('form:first');
            var form_id = ($(form).attr('id'));
            var valid = validate_form(form_id);

            if(valid){
                $('#'+form_id).submit();
            }
        });
    });
} 
```

# iis - 如何配置 IIS web.config 以重定向域，但维护目标文件夹/页面？

> ID：11295399
> 
> 赞同：1
> 
> 时间：2012-07-02T14:10:10.450
> 
> 标签：iis, redirect, web-config, subdomain

我需要帮助进行 2 种类型的重定向；在这两种情况下，任何目标页面名称都应保持不变，如下所示：

**重定向 #1：**从子文件夹转到新域，如下所示：

http://www.mysite.com/subfolder -> http://www **.** **子文件夹**.com

http://www.mysite.com/subfolder/mypage.html -> http:/www **。****子文件夹**.com/mypage.html

**重定向 #2：**从子文件夹转到不同域上的相同子文件夹，如下所示：

http://www.site **1** .com/subfolder -> http://www.site **2** .com/subfolder

http://www.site **1** .com/subfolder/mypage.html -> http://www.site **2** .com/subfolder/mypage.html

# php - 使用 Zend Framework 检查每个页面上的自定义条件

> ID：11295413
> 
> 赞同：2
> 
> 时间：2012-07-02T14:10:50.343
> 
> 标签：php, zend-framework

我需要检查我在网站上访问的每个页面的条件。

基本上，用户帐户是有时间限制的，如果用户帐户已过期，我需要将他们重定向到更新页面，这样他们可以登录系统但只能访问更新页面。

我可以只创建一个函数并在每个控制器的每个操作上调用它，但这没有任何意义，我也可以对引导程序进行一些黑客攻击，但这似乎也不是正确的解决方案。

我怎样才能以正确的方式做到这一点？或者也许引导程序是正确的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:32:46.600

我认为实现这一点的最佳方法是添加`Zend_Controller_Plugin_Abstract`到您的应用程序并在方法中实现逻辑`preDispatch`。

您将能够使用 Redirector 助手进行检查并重定向用户。

```
$redirector = Zend_Controller_Action_HelperBroker::getStaticHelper('Redirector');
$redirector->gotoSimpleAndExit('myaction', 'mycontroller', 'mymodule');

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T14:18:02.570

一般来说 - 因为我缺乏 Zend 的知识 - 我会说身份验证层/类/任何放置这个逻辑的地方。

我假设有一个集中的地方可以检查用户会话的有效性。您可以轻松地将这个额外条件添加到这个地方。如果您以不同的方式维护访问控制，则引导程序可能会更好。

您的选择总是有限的，因为您的应用程序可能有 1 个单点访问，或者在呈现用户请求的页面之前，每个请求至少要经过有限数量的类。

注意不要过于严格地执行这些条件；例如，确保 API 请求（如果存在）不会被转发到续订页面。

# php - 静态调用方法时如何访问私有类变量？

> ID：11295414
> 
> 赞同：2
> 
> 时间：2012-07-02T14:10:56.640
> 
> 标签：php

如果我有：

```
<?php
class SomeClass extends SomeOtherClass{
  private $access_code = 'TX9999';

  private static function SomeMethod(){

  }
}

?> 
```

做

```
<?
self::SomeMethod();
?> 
```

我如何正确`$access_code`访问`::SomeMethod()`

更多信息

我实际面临的更复杂。

我有一个类，其方法是并且必须保持静态。我知道如何使用 self 调用其他方法。

然而，在课堂上，我有一些通常作为常量和变量有意义的东西。

我意识到我没有以正常方式获得实例，并且正在寻找在类的一些静态方法之间共享变量，有些是易变的，有些是固定的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:14:43.703

这会做你想做的；它首先创建自己的实例，然后才能访问私有实例变量`$access_code`。

```
$o = new self;
echo $o->access_code; 
```

* * *

如果你想要一个类变量而不是实例变量，你必须`$access_code`像这样声明：

```
private static $access_code = 'TX9999'; 
```

然后像这样从静态方法调用它：

```
private static function SomeMethod()
{
    echo self::$access_code;
} 
```

顺便说一句，你不能`::SomeMethod()`从课外打电话。为了做到这一点，你需要做到`public`：

```
public static function SomeMethod() { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:16:36.360

因为它是一个静态方法而你的变量不是，所以你需要一个实例。我建议，如果这个值不会改变，你有这样的：

```
<?php
class SomeClass extends SomeOtherClass{
  private static $access_code = 'TX9999';

  private static function SomeMethod(){

  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:16:43.130

通常（对于 PHP 来说不是 100% 肯定）你需要有一个类的实例来访问它的变量。

第二种可能性是将变量也设为静态。

例子：

1.

```
<?php
class SomeClass extends SomeOtherClass{
  public $access_code = 'TX9999';

  public static function SomeMethod() {
     SomeClass sc = new SomeClass();
     echo sc.access_code;
  }
} 
```

2.

```
<?php
class SomeClass extends SomeOtherClass{
  public static $access_code = 'TX9999';

  public static function SomeMethod() {
     // no need for SomeClass, because your in the same class, but if you want to use it directly from outside the class
     echo SomeClass.access_code;
  }
}
?> 
```

顺便说一句：我将私有更改为公共

ps：不确定这是否与php兼容:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T14:16:53.580

首先，

```
<?
SomeClass::SomeMethod();
?> 
```

将失败。您将其声明为私有。这意味着，即使声明为静态，也只能在您的类中调用。不在外面。将其更改为`protected`或`public`。

还，

除非您将其声明为静态，否则您不能在静态方法中调用 to `$access_code`。静态方法没有洞察力`$this`。他们可以访问常量，`self`但他们访问的内容必须是静态的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T14:17:36.790

我相信您需要使用`self`关键字，因此您可以像这样在函数中访问它：

```
private static function SomeMethod(){
   return self::$access_code;
} 
```

编辑： $access_code 也需要被声明为静态的才能工作。

# mongodb - 如何在mongodb中查询数组中具有共同特征的对象

> ID：11295417
> 
> 赞同：1
> 
> 时间：2012-07-02T14:11:27.077
> 
> 标签：mongodb

例如，我有一个嵌入了字符串数组的对象

```
ids : ['ab','gg',kl'] 
```

我想查询共享最多 id 的前 10 个对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:31:03.823

评论太久了，但也许你不能做得更好......

哇，好难啊。您甚至可以在不对关系数据库进行大量循环的情况下做到这一点吗？我想您通常不会在关系数据库的字段中包含列表，所以这可能不是一个好问题。

我有一种感觉，您需要在应用程序端执行此操作，循环并存储一些比较分析以获得前 10 名。我什至认为这对于 map reduce/aggregation 框架是不可能的，除非您为每条记录运行 map reduce。

# java - eclipse树栏项目中的选择

> ID：11295419
> 
> 赞同：1
> 
> 时间：2012-07-02T14:11:35.957
> 
> 标签：java, eclipse, tree, jface

对于具有 2 列的树，例如，

```
TreeColumn column1 = new TreeColumn(myTreeViewer.getTree(), SWT.LEFT);
column1.setText("Column 1");
column1.setWidth(400);
TreeColumn column2 = new TreeColumn(myTreeViewer.getTree(), SWT.LEFT);
column2.setText("Column 2");
column2.setWidth(100); 
```

我只能选择第一列中的项目。

我可以看到第二列中的选择被禁用，所以，

我可以启用第二列中的项目选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T17:09:40.273

在创建 Tree 小部件时将 SWT.FULL_SELECTION 添加到样式中。这将允许您单击任一列中的单元格以选择一行。请注意，您不能在 SWT 表和树小部件中选择单元格。只能选择行。

# java - 关于Java中的构造函数

> ID：11295422
> 
> 赞同：2
> 
> 时间：2012-07-02T14:11:42.583
> 
> 标签：java, constructor

我正在做研究，我发现了以下内容：

假设我有一个像下面这样的类，具有以下构造函数：

```
public class Triangle implements Shape {

    public String  type;
    public String height;

    public Triangle(String type) {
        super();
        this.type = type;
    }

    public Triangle(String height) {
        super();
        this.height = height;
    }

    public Triangle(String type, String height) {
        super();
        this.type = type;
        this.height = height;
    }
} 
```

这给了我一个编译时错误。但是，如果我`height`从更改`String`为`int`一切正常。下面是修改后的代码：

```
public class Triangle implements Shape {

    public String  type;
    public int height;

    public Triangle(String type) {
        super();
        this.type = type;
    }

    public Triangle(int height) {
        super();
        this.height = height;
    }

    public Triangle(String type, int height) {
        super();
        this.type = type;
        this.height = height;
    }
} 
```

现在的问题是：假设我想要和第一个案例`String`一样`height`；为什么失败了？请解释。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T14:13:23.767

不允许重载具有相同签名的构造函数

**为什么？**

虽然解析调用JVM的方法/构造函数需要唯一标识方法的东西（返回类型不够），所以构造函数/方法的参数不能相同

* * *

**看**

*   [JLS - 方法重载](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.9)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-02T14:16:06.917

您有两个具有相同参数的构造函数。他们都将一个字符串作为参数。

如果我打电话`Triangle tri = new Triangle("blah");`没有办法判断“blah”应该是高度还是类型。您可能可以通过查看它来判断，但 JVM 不能。每个构造函数都必须有唯一的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T15:24:14.250

或者您可以为您的班级添加静态工厂

```
public class Triangle implements Shape {

...

private Triangle(int height) {
  // initialize here
}

private Triangle(String type) {
  // initialize here
}

private Triangle(String type, int height) {
  // initialize here
}

public static createByHeight(String height) {
  return Triangle(Integer.parseInt(height);
}

public static createByType(String type) {
  return Triangle(type);
}

public static createByTypeAndHeight(String type, String height) {
  return Triangle(type, Integer.parseInt(height);
} 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T14:22:34.167

第一种情况出现编译错误的原因是，当您通过传递字符串参数来初始化 Triangle 类的对象时，编译器如何知道要调用哪个构造函数？初始化类型或初始化高度的一个。**对于编译器来说，这是一个模棱两可的代码，因此会引发错误。** 就像我说的那样；

```
Triangle t = new Triangle("xyz"); 
```

没有人知道要初始化哪个变量；类型或高度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T15:01:25.303

如果您想为构造函数使用两个字符串，您可以将字符串转换为值对象。

[http://c2.com/cgi/wiki?ValueObject](http://c2.com/cgi/wiki?ValueObject)

例如：

```
class Height {
   private String height;

   public Height(String height){
       this.height = height;
   }

   public String value(){
       return this.height;
   } 

   @Override
   public String toString(){
      return height;
   }

   @Override
   public boolean equals(Object other){
        return this.height.equals((Height)other).value()); // Let your IDE create this method, this is just an example
       // For example I have missed any null checks
   }
} 
```

那么如果你对 Type 做同样的事情，你可以有两个构造函数：

```
public Triangle(Type type) {
    this.type = type;
}

public Triangle(Height height) {
    this.height = height;
} 
```

类型听起来也可能是一个[枚举](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

# ruby-on-rails - 未知操作异常：Rails 3.1 中的路由错误

> ID：11295423
> 
> 赞同：0
> 
> 时间：2012-07-02T14:11:42.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3, exception, ruby-on-rails-3.1, routes

我在默认路由中有以下两行

```
 match '/:controller/:action'
  match '/*path' , :to => 'map#catch_all' 
```

所以问题是，当用户点击有效的控制器和无效的操作名称（如**/user/aaaa**）然后得到“未知操作”异常，因为路由被上述路由的第一行捕获。我也无法更改上述行的顺序。

有什么帮助吗？？感谢所有评论。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:16:22.633

在生产中，您不应允许用户访问未明确允许的操作。您应该枚举所有可用的操作，或使用资源自动允许静止路径。这将解决您的问题。

此外，如果输入了不匹配的 url，则 404 消息将显示给用户，这是处理此问题的正确方法。

**更新：** 在您的 ApplicationController 中，您可以实现该`method_missing(method, *args)`方法，以处理可能来自通配符路由的所有不存在的操作调用。

```
def method_missing(method, *args)
  # handle Unknown Action
end 
```

但请注意，这会捕获所有不存在的方法调用，这可能会导致调试问题，例如在拼写错误的情况下。

# compass-sass - 指南针文档教程

> ID：11295424
> 
> 赞同：0
> 
> 时间：2012-07-02T14:11:48.847
> 
> 标签：compass-sass

Compass[文档](http://compass-style.org/reference/compass/)让我很困惑。我需要一个关于如何阅读它们的教程。有谁知道那里有好的吗？当谷歌寻求帮助时，我只得到一堆稍微相关的 stackoverflow.com 和 compass-lang.com 结果，这些结果都假设我了解如何阅读神秘的 Compass 文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:09:57.720

您不会真正找到任何 Compass 教程，因为它既不是语言也不是框架，也不是其中的任何一个。它只是一个工具包，你去搜索其中的东西并保持你认为有用的东西。
帮助部分确实为 Compass 的不同功能（如[精灵](http://compass-style.org/help/tutorials/spriting/)）提供了额外的帮助，但除此之外，没有比浏览类别并查看您认为看起来很棒的东西更好的教程了。

# javascript - 如何从 iframe 获取 facebook 窗口高度？

> ID：11295426
> 
> 赞同：3
> 
> 时间：2012-07-02T14:12:05.407
> 
> 标签：javascript

我想使用 iframe 中的 javascript 获取 facebook 窗口高度。但是 window.innerHeight 给了我 iframe 的高度。我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T14:26:23.363

如果您使用的是 Facebook JavaScript SDK，则可以使用`FB.Canvas.getPageInfo()`

```
FB.Canvas.getPageInfo(
    function(info) {
        console.log('Height: ' + info.clientHeight);
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:17:33.180

您需要获取 iframe 的父窗口，并获取它的高度。你可以试试`parent.window.innerHeight`，这应该会得到正确的答案。

如果它所在的文档通过 iframe 包含在另一个文档中，则以下方法有效：

```
<script type="text/javascript">
    alert(parent.window.innerHeight);
</script> 
```

**请注意，这可能不适用于跨域请求，即如果您嵌入的内容与主站点不在同一域上，Facebook 应用程序可能就是这种情况**

# delphi - 带有变量参数的 Delphi 7 程序

> ID：11295432
> 
> 赞同：0
> 
> 时间：2012-07-02T14:12:38.653
> 
> 标签：delphi, delphi-7

有一个看起来像的程序

```
Procedure TestProc(TVar1, TVar2 : variant);
Begin
  TVar1 := CreateOleObject('Excel.Application');
  TVar1.Workbooks.open('C:\Test\Test.xls');
  TVar1.Workbooks[1].Worksheets[1].Name := 'Sheet_1';
  TVar2 := TVar1.Workbooks[1].Worksheets['Sheet_1'];
End; 
```

注意：TVar1 和 TVar2 是全局变量

在按钮的 onclick 事件中调用该过程，然后使用创建的对象不起作用

是不是delphi不允许创建具有变量参数的程序？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T16:28:56.627

在您提供的代码示例中`TVar1`，`TVar2`它们*不是*全局变量，而是局部参数。它们没有被标记为`var`参数，因此它们将收到传递给函数调用的任何参数值的副本，并且对这些局部变量所做的任何更改都不会传递回调用者。是否还有在别处命名`TVar1`和`TVar2`声明的全局变量无关紧要，在此过程中，本地参数将优先。

如果要将修改传递回调用者，请将参数声明为`var`参数。

```
Procedure TestProc(var TVar1, TVar2 : variant); 
```

# java - 使用索引保留进行排序

> ID：11295434
> 
> 赞同：2
> 
> 时间：2012-07-02T14:12:59.203
> 
> 标签：java, sorting

代替冒泡排序，可以使用哪种排序技术对整数数组进行排序，以便在输出时我可以显示其在原始数组中的位置？

输入 4 5 3 6 1

输出

```
 INDEX : VALUE
     5   :   1
     3   :   3
     1   :   4
     2   :   5
     4   :   6 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:18:39.697

您可以使用[`TreeMap`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)其中键是数组中的值，值是索引 + 1。它会自动执行您需要的操作。

示例代码：

```
public static void main(String[] args) throws ParseException {
    int[] array = new int[] {4, 5, 3, 6, 1};
    Map<Integer, Integer> sortedMap = new TreeMap<Integer, Integer>();

    for (int i = 0; i < array.length; i++) {
       sortedMap.put(array[i], i + 1);
    }
    System.out.println(sortedMap);
} 
```

输出：

> {1=5, 3=3, 4=1, 5=2, 6=4}

注意：这仅在原始列表中没有重复项时才有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:26:02.700

使用持有人对象的解决方案：

```
public class IntWithIndex implements Comparable<IntWithIndex>
{
  public final Integer value;
  public final int index;

  public IntWithIndex(int value, int index) { 
    this.value = value; 
    this.index = index; 
  }

  public int compareTo(IntWithIndex other) { 
    return this.value.compareTo(other.value); 
  }
  public String toString() { 
    return String.format("[%d,%d]", value, index); 
  }

  public static void main(String[] args) {
    final IntWithIndex[] ts = new IntWithIndex[5];
    int i = 0;
    for (int x : new int[] { 4, 5, 3, 6, 1 }) 
      ts[i] = new IntWithIndex(x, i++);
    Arrays.sort(ts);
    System.out.println(Arrays.toString(ts));
  }
} 
```

# jquery - jQuery IP 地址验证失败

> ID：11295437
> 
> 赞同：1
> 
> 时间：2012-07-02T14:13:06.403
> 
> 标签：jquery, regex

下面是我编写的代码片段，用于屏蔽 IP 地址并使用 jQuery 对其进行验证。但是，我收到有效 IP 地址（如 222.222.222.222）的错误消息。有人可以帮忙吗？

```
 //Validate the form
            $('#form').validate({
                rules: {
                    ip: {
                        required: true,
                        IP4Checker: true
                    },
                    subnet: {
                        required: true,
                        IP4Checker: true
                    },
                    gateway: {
                        required: true,
                        IP4Checker: true
                    },
                    dns1: {
                        required: true,
                        IP4Checker: true
                    },
                    dns2: {
                        required: true,
                        IP4Checker: true
                    }
                },
                messages: {
                    ip: "Please enter a valid IP Address",
                    subnet: "Please enter a valid Subnet Mask Address",
                    gateway: "Please enter a valid Gateway Address",
                    dns1: "Please enter a valid DNS1 Address",
                    dns2: "Please enter a valid DNS2 Address"
                }
            });

            //Validate the IP addresses
            $(function() {
                $.validator.addMethod('IP4Checker', function(value) {
                    var ip = "^(?:(?:25[0-5]2[0-4][0-9][01]?[0-9][0-9]?)\\.){3}" +
                        "(?:25[0-5]2[0-4][0-9][01]?[0-9][0-9]?)$";
                    return value.match(ip);
                });
            });

            //Set mask for IP address fields
            $(".ip").mask("999 . 999 . 999 . 999");

            //Store numbers in hidden field
            $(".ip").blur(function () {

                //Create char array from phone number field
                var charArray = $(this).val().split("");

                var num = "";

                //taking the input
                $.each(charArray, function(index, value) {
                    num = num + value;
                });
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:26:53.923

您的正则表达式缺少它的 | 字符即。

```
\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?) 
```

另请注意，您可以将其缩短为

```
\b(?:\d{1,3}\.){3}\d{1,3}\b 
```

如果您不需要检查它是 0-255 之间的有效 IP 地址

任何 \ 也需要自行转义，因此它将是 \

[参考](http://www.regular-expressions.info/examples.html)

**更新**

OP 显示了 fiddle 并且没有阅读上面的行，并且掩码的两侧都有空格。所以正则表达式永远不会有效，因为掩码添加了空格。

[固定小提琴](http://jsfiddle.net/K9b9R/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:37:07.447

只需将您的功能替换为

```
//IP V4

jQuery.validator.addMethod("IP4Checker", function(value, element, param) {
return this.optional(element) || /^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(value);

//IP V6

jQuery.validator.addMethod("IP6Checker", function(value, element, param) {
return this.optional(element) || /^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(value);
}); 
```

# image - 将 draw2d.Workflow 转换为 html 画布元素

> ID：11295439
> 
> 赞同：0
> 
> 时间：2012-07-02T14:13:13.467
> 
> 标签：image, canvas, workflow

在文档中，我读到工作流具有返回 draw2d.CanvasDocument 的方法 getDocument()。CanvasDocument 的一个属性是canvas 对象，但显然它不是html 的canvas 元素。有一种方法可以在 html 画布中转换我的工作流程吗？我的目标是将工作流转换为静态图像，并且可以轻松地将画布元素转换为静态图像。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:19:05.567

对于 Draw2D，无法将 Draw2DCanvas 转换为图像。原因：Draw2d 也使用纯 HTML（不是 HTML5）来创建工作流和线条。

如果您需要图像-> [Graphiti 是您的英雄](http://draw2d.org/graphiti/jsdoc/#!/example/io_png_overview)。

在接下来的几天里可用。

# rest - Jersey - 客户的 Maven（快速入门）项目

> ID：11295440
> 
> 赞同：0
> 
> 时间：2012-07-02T14:13:13.673
> 
> 标签：rest, maven, jersey

我刚刚找到了一个创建核心服务的命令：

```
 mvn archetype:generate -DarchetypeCatalog=http://download.java.net/maven/2 
```

是否有任何用于创建显式球衣客户端的 Maven 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:18:52.817

不是真的 - 但球衣原型确实在测试中具有客户端代码，该代码自动包含在生成的项目中。

# actionscript-3 - 在 Flashbuilder 项目的编译器参数中使用环境变量

> ID：11295441
> 
> 赞同：0
> 
> 时间：2012-07-02T14:13:16.330
> 
> 标签：actionscript-3, compiler-construction, environment-variables, flash-builder

在我的 flashbuilder 项目的编译器选项中，我正在尝试这样做：

```
-define+=CONFIG::dev,${MY_VAR} 
```

由于 MY_VAR 将是与环境相关的变量，而不是与项目相关的变量（因此项目中的每个开发人员都可以定义他的 MY_VAR 值）。我试图在 flashbuilder 中找到一种方法，或者在 Windows 中设置一个 os var，但没有成功，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:59:30.363

我不相信您可以立即从环境中获取价值，但如果您想自定义每个开发人员的数据，您可以将它们放在每个开发人员的 flex-config.xml 文件中。

如果您不想将它直接放入 flex-config.xml 文件中，您可以使用另一个命令“”“concat/merge”“”另一个 XML 配置文件：-load-config+=myfile.xml

有关定义它们的不同方式的更多信息（内联或在 XML 文件中）：http: [//blogs.adobe.com/flexdoc/files/flexdoc/conditionalcompilation.pdf](http://blogs.adobe.com/flexdoc/files/flexdoc/conditionalcompilation.pdf) 实际操作： [http ://ditdahgames.com/2011 /07/stupid-flex-mxmlc-compiler-tricks-part-1-conditional-compiling/](http://ditdahgames.com/2011/07/stupid-flex-mxmlc-compiler-tricks-part-1-conditional-compiling/)

法比安

# sql-server - 查询事务已开始但从未结束

> ID：11295445
> 
> 赞同：0
> 
> 时间：2012-07-02T14:13:40.537
> 
> 标签：sql-server, sql-server-2008

我有时会运行一个查询，但它只是挂起。我去查看活动监视器（SQL Server 2008 R2）中的进程，它显示了它，只是事务是打开的，它会连接整个服务器。

这是没有意义的，即使这是一个长时间运行的查询，它应该在某个时间点超时。

我对其进行了跟踪，它显示了这一点：

![在此处输入图像描述](../Images/8eca906d409b2d4bfd59e61a1a4078e1.png)

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:37:10.753

```
BEGIN TRANSACTION
INSERT INTO ... VALUES ...
GO 
```

健忘的弗雷德打开了一笔交易，去吃午饭了。由于没有请求处于活动状态，因此没有什么可以超时的。最终，用户必须明确提交或回滚。管理员可以使用[`KILL`](http://msdn.microsoft.com/en-us/library/ms173730.aspx). 如果将此类会话/事务留在自己的设备上（假设您没有用完日志并且没有重新启动服务器），此类会话/事务可以保持打开数*年。*

即使用户*确实*发出了 COMMIT，也可能会出现更复杂的情况，如果涉及分布式事务，请参阅[工作原理：孤立 DTC 事务（会话/SPID = -2）](http://blogs.msdn.com/b/psssql/archive/2010/04/20/how-it-works-orphan-dtc-transaction-session-spid-2.aspx)。

# javascript - 仅使用 javascript 验证表单并阻止用户提交禁用 JS 的表单？

> ID：11295446
> 
> 赞同：2
> 
> 时间：2012-07-02T14:13:40.343
> 
> 标签：javascript

我正在尝试为我的网站创建一个经过验证的注册表单，目前正在编写一个演示以供练习。我能够使用 javascript 验证表单。但是，我在某处读到应该在客户端和服务器端验证表单，因为可以禁用 JS。我想知道如果不满足所有 javascript 验证，是否有一种方法可以简单地禁用提交按钮（我注意到 eBay 在他们的注册表单中使用了类似的方法），如果是这样，我将如何实现这一点？

这是我目前所处的位置：

```
<script type="text/javascript">
function validateEmail(email) { 

    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

    if(re.test(email)) {
        document.getElementById('result').innerHTML = '<img src="http://iconlet.com/icons/kensaunders/4/CheckMark.png" style="width:15px;"/> Valid';
    } else {
        document.getElementById('result').innerHTML = '<img src="http://biglistbigsales.com/m/templates/GPT/images/x_xMarkRed4.png" style="width:15px;"/> Invalid';
    }
} 
function validatePass(pass){
    if(pass.length < 6){
        document.getElementById('pass-result').innerHTML='<img src="http://biglistbigsales.com/m/templates/GPT/images/x_xMarkRed4.png" style="width:15px;"/>Your password must be at least 6 characters';
    }else{
        document.getElementById('pass-result').innerHTML='<img src="http://iconlet.com/icons/kensaunders/4/CheckMark.png" style="width:15px;"/>valid';
    }
}
function validateCPass(cpass){
    var pass = document.getElementById('pass').value;

    if(cpass != pass){
        document.getElementById('cpass-result').innerHTML="Passwords must match";
    }else{
        document.getElementById('cpass-result').innerHTML='<img src="http://iconlet.com/icons/kensaunders/4/CheckMark.png" style="width:15px;"/>';
    }   
}
</script>
</head>
<body>
    <form action="practice.php" method="post">
        e-mail:<br/><input id="email" type="text" onblur="validateEmail(this.value)" /><span id="result"></span>
        <br/><br/>Password:<br/><input type="password" id="pass" onblur="validatePass(this.value)"><span id="pass-result"> </span>
        <br/><br/>Confirm Password:<br/><input type="password" id="confpass" onblur="validateCPass(this.value)"> <span id="cpass-result"></span>
        <br/><input type="submit">
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T14:18:22.877

不，这是不可能的，原因有很多：

*   **可访问性。**您客户的浏览器可能不支持 Javascript，或者用户可能禁用了它（是的，有些人支持）。

*   **安全。**Web 应用程序向整个 Internet 公开 HTTP 接口。你甚至不需要浏览器来发送 HTTP 请求！因此，您的后端需要将任何 HTTP 请求视为不受信任并对其进行验证。对于来自不可靠来源的所有数据都是如此。

因此：

任何正确的 Web 应用程序都必须进行服务器端验证。

客户端验证是一种 UI 增强功能，通过提供更快的反馈来改善用户体验。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T14:19:03.690

您*可以*默认禁用该按钮，然后让 JavaScript 重新启用它。然而，这并不能阻止用户自己重新启用它，可能使用跨站点脚本注入，或者更实际地使用诸如 FireBug 之类的东西或开发人员工具中默认内置的浏览器之一。

为了用户体验以及系统的完整性和安全性，我**强烈**建议同时进行客户端和服务器端验证。如果您根本没有时间处理两者，那么服务器端肯定会优先考虑。验证的客户端是一种旨在为用户提供更好的服务；遗憾的是，在破坏代码时，用户可能对您的代码有不同的感觉。

始终进行服务器端验证。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T14:19:25.293

在服务器中检查的原因也是恶意用户可以向您的服务器发送手工制作的 POST 或 GET 请求，无论这些表单是否存在于您的应用程序中或在您的浏览器中被禁用。仅禁用表单不足以解决此问题。

* * *

如果您仍然想在非 JS 浏览器中禁用表单，您可以做的是默认禁用它们并在 JS 上启用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T14:19:34.973

你不要重新发明轮子。有很多工具可以使用 JavaScript 进行验证。例如检查 jQuery 验证插件；您可以使用几行代码来验证表单。

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

关于服务器端验证，您应该**始终**验证服务器上的数据。JavaScript 验证旨在防止用户错误，但它们根本不为您的系统提供任何安全性。

# php - PHP - SQL 制作带有子菜单的菜单

> ID：11295451
> 
> 赞同：0
> 
> 时间：2012-07-02T14:14:29.313
> 
> 标签：php, sql, menu

嗨，

标题说明了一切，我想制作一个带有子菜单的菜单。

所以是这样的：

*   父母1
    1.  子2
        1.  子 3
*   父母2

我已经让这个工作了，但是代码看起来不太好。

那么我该如何改进我的代码，或者你是否更了解它，然后发布它。

这是代码：

```
<?php

$le_content .= '<div id="main_menu">';

$sQuery_get_all_parents = " SELECT
                            menu.id,
                            menu.`name`,
                            menu.url,
                            menu.parent_id
                            FROM `menu`
                            WHERE
                            menu.actif = 1 AND
                            menu.parent_id = 0
                            ORDER BY
                            menu.volgorde ASC";
$rResultaat_get_all_parents = mysql_query($sQuery_get_all_parents) or die(mysqlError($sQuery_get_all_parents));

$menu_parents = array();
$menu_child_1 = array();
$counter = 0;
$counter_child_1 = 0;
$counter_child_2 = 0;

while($row = mysql_fetch_assoc($rResultaat_get_all_parents)){
    $menu_parents[$counter]['id'] = $row['id'];
    $menu_parents[$counter]['name'] = $row['name'];
    $menu_parents[$counter]['url'] = $row['url'];
    $menu_parents[$counter]['parent_id'] = $row['parent_id'];
    $counter++;
}

$le_content .= '<ul id="main_menu_ul">';
foreach ($menu_parents as $menu_entry => $value) {
    $le_content .= '<li><a href="'.ROOT_HREF.$value['url'].'" >'.$value['name'].'</a>';
    $sQuery_get_first_children = "  SELECT
                                    menu.id,
                                    menu.`name`,
                                    menu.url,
                                    menu.parent_id
                                    FROM `menu`
                                    WHERE
                                    menu.actif = 1 AND
                                    menu.parent_id = ".$value['id']."
                                    ORDER BY
                                    menu.volgorde ASC";
    $rResultaat_get_first_children = mysql_query($sQuery_get_first_children) or die(mysqlError($sQuery_get_first_children));
    $row_count = mysql_num_rows($rResultaat_get_first_children);

    if($row_count != false){
        $le_content .= '<ol>';
        while($row = mysql_fetch_assoc($rResultaat_get_first_children)){
            $menu_child_1[$counter_child_1]['id'] = $row['id'];
            $menu_child_1[$counter_child_1]['name'] = $row['name'];
            $menu_child_1[$counter_child_1]['url'] = $row['url'];
            $menu_child_1[$counter_child_1]['parent_id'] = $row['parent_id'];
            $counter_child_1++;
        }

        foreach ($menu_child_1 as $menu_entry_child_1 => $value_child_1) {
            $le_content .= '<li><a href="'.ROOT_HREF.$value_child_1['url'].'" >'.$value_child_1['name'].'</a>';
            $sQuery_get_second_children = " SELECT
                                            menu.id,
                                            menu.`name`,
                                            menu.url,
                                            menu.parent_id
                                            FROM `menu`
                                            WHERE
                                            menu.actif = 1 AND
                                            menu.parent_id = ".$value_child_1['id']."
                                            ORDER BY
                                            menu.volgorde ASC";
            $rResultaat_get_second_children = mysql_query($sQuery_get_second_children) or die(mysqlError($sQuery_get_second_children));
            $row_count = mysql_num_rows($rResultaat_get_second_children);
            if($row_count != false){
                $le_content .= '<ol>';
                while($row = mysql_fetch_assoc($rResultaat_get_second_children)){
                    $menu_child_2[$counter_child_2]['id'] = $row['id'];
                    $menu_child_2[$counter_child_2]['name'] = $row['name'];
                    $menu_child_2[$counter_child_2]['url'] = $row['url'];
                    $menu_child_2[$counter_child_2]['parent_id'] = $row['parent_id'];
                    $counter_child_2++;
                }
                foreach ($menu_child_2 as $menu_entry_child_2 => $value_child_2) {
                    $le_content .= '<li><a href="'.ROOT_HREF.$value_child_2['url'].'" >'.$value_child_2['name'].'</a></li>';
                }
                $le_content .= '</ol>';
            }

            $le_content .= '</li>';
        }
        $le_content .= '</ol>';
    }
    $le_content .= '</li>';
}

$le_content .= '</ul></div>';

?> 
```

最后，我回应 $le_content .....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T14:21:04.483

1.  查询所有菜单项
2.  构建它们的分层数组（创建一个递归函数来完成它）每个菜单项都应该有一个属性用于它的子集合
3.  创建另一个递归函数来写入输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:46:09.460

好吧，我四处搜索，并提出了一个解决方案......使查询更好。我已经按照本教程进行操作，效果很好：

[sql和类别](http://sqllessons.com/categories.html)

感谢所有的帮助；）

# javascript - jQuery 自定义事件数据（订阅和触发）

> ID：11295453
> 
> 赞同：5
> 
> 时间：2012-07-02T14:14:41.177
> 
> 标签：javascript, javascript-events, jquery

我试图弄清楚如何为自定义事件设置参数。如何在订阅事件时设置参数，然后在触发事件时添加一些额外的数据。

我有一个用于测试的简单 JS，但在“句柄”的 e 参数中，我只看到订阅的数据。

```
function handle(e) {
    //e.data has only "b"
    alert(e.data);
}

function myObj() {
    this.raise = function () {
            //Trigger
        $(this).trigger("custom", { a: "a" });
    }
}

var inst = new myObj();
//Subscribe
$(inst).bind("custom", { b: "b" }, handle);
inst.raise(); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:22:39.533

提供`.trigger()`的参数作为事件处理函数的第二个参数传递。

```
function handle(e, triggerParam) {
    //e.data has only "b"
    alert(e.data + ' also ' + triggerParam);
} 
```

# .net - 如何避免重复 NuGet 包

> ID：11295458
> 
> 赞同：2
> 
> 时间：2012-07-02T14:14:47.933
> 
> 标签：.net, nuget

无论如何，是否有一个用于各种 NuGet 包的本地副本的中心位置，并且在中心位置的单个副本上有不同的 Visual Studio 解决方案 POINT，而不是将 NuGet 包复制到每个 VS 解决方案 \packages 目录中？

我知道磁盘空间很便宜，但是拥有多个 NUnit、EF 等副本似乎很浪费

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:27:10.443

当包有更新时会发生什么？你打算用新版本的包测试每个项目吗？

当包发生重大变化时会发生什么？

每个解决方案拥有一个包的单独副本允许您一次测试和更新一个。这是一件好事。

此外，大多数包裹都非常小，以至于您需要数百甚至数千个副本才能注意到“浪费”。

**几个例子**
EF 4.3.1 是 2.84 MB。
NUnit 2.3.012054 为 795 KB。
Unity 2.1.505 为 1.45 MB。

别再担心这个了。这不值得你花时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T14:20:01.537

**不**，你不能。请参阅[http://nuget.codeplex.com/workitem/215](http://nuget.codeplex.com/workitem/215)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-19T12:53:24.243

**是**的，从 NuGet 2.1 开始，这完全可以实现。

1.  您需要将 NuGet.config 文件移动到中心位置。
2.  更改`repositoryPath`配置值以指定所有包的中心位置（[NuGet 文档](http://docs.nuget.org/docs/reference/nuget-config-settings)）。
3.  对目标文件进行一些修改以`solutionDir`从恢复命令中删除该选项。
4.  更新所有项目引用以指向新位置。

To avoid duplication, I've gone into a little more detail on exactly what to do in this answer: [https://stackoverflow.com/a/19466173/564726](https://stackoverflow.com/a/19466173/564726)

# c++ - 试图将存储在 char 中的时间转换为正常形式。打印随机值。怎么了？

> ID：11295460
> 
> 赞同：0
> 
> 时间：2012-07-02T14:14:51.037
> 
> 标签：c++, time

这是我编写的一个短代码，用于将输入为字符串或字符的时间打印为 hh:mm:ss 形式。没有编译错误，但给出了一个垃圾值。它出什么问题了？ **注意：我不想打印日/月/年的东西。**

```
# include<iostream>
# include<ctime>
using namespace std;

int main(){

        const char *time_details = "15:34:12";
        struct tm tm;
        strptime(time_details, "%H:%M:%S", &tm);
        time_t t = mktime(&tm);
        cout << t  << endl;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:31:26.123

从手册页`strptime`：

> 如果格式字符串不包含足够的转换规范来完全指定生成的 struct tm，则 tm 的未指定成员保持不变。

您需要设置其他成员，或者只使用您设置的成员。

**更新**
这里的另一个问题是使用`mktime`. 从该功能的 OpenGroup 描述中，

> 如果无法表示自 Epoch 以来的时间，则该函数应返回值 (time_t)-1

如果您只是将结构清零，`tm`您将创建一个无法以 Unix 时间格式表示的时间（自 00Z，1970 年 1 月 1 日以来的秒数）。至少，您需要将年份和月份的日期设置为非零值。

# c# - 从 DataContractJsonSerializer 将日期格式化为 iOS

> ID：11295464
> 
> 赞同：2
> 
> 时间：2012-07-02T14:15:02.383
> 
> 标签：c#, iphone, .net, objective-c, ios

我从 json 文件中收到以下格式的日期。我不确定，但我认为它是由 .Net 框架中的 DataContractJsonSerializer 类格式化的。日期看起来像这样

```
 \/Date(1255993200000+0100)\/ 
```

我想知道是否有人知道我如何将其转换为 iOS 上的正常日期，或者我是否必须做任何事情来更改它。

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T14:34:51.903

尝试这个

```
-(NSDate*)mfDateFromDotNetJSONString:(NSString *)string
{
    static NSRegularExpression *dateRegEx = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        dateRegEx = [[NSRegularExpression alloc] initWithPattern:@"^\\/date\\((-?\\d++)(?:([+-])(\\d{2})(\\d{2}))?\\)\\/$" options:NSRegularExpressionCaseInsensitive error:nil];
    });
    NSTextCheckingResult *regexResult = [dateRegEx firstMatchInString:string options:0 range:NSMakeRange(0, [string length])];

    if (regexResult)
    {
        // milliseconds
        NSTimeInterval seconds = [[string substringWithRange:[regexResult rangeAtIndex:1]] doubleValue] / 1000.0;
        // timezone offset
        if ([regexResult rangeAtIndex:2].location != NSNotFound) {
            NSString *sign = [string substringWithRange:[regexResult rangeAtIndex:2]];
            // hours
            seconds += [[NSString stringWithFormat:@"%@%@", sign, [string substringWithRange:[regexResult rangeAtIndex:3]]] doubleValue] * 60.0 * 60.0;
            // minutes
            seconds += [[NSString stringWithFormat:@"%@%@", sign, [string substringWithRange:[regexResult rangeAtIndex:4]]] doubleValue] * 60.0;
        }

        return [NSDate dateWithTimeIntervalSince1970:seconds];
    }
    return nil;
} 
```

并使用传递字符串

`[NSString stringWithFormat:...]`到这个函数

这对我有帮助，希望对你有帮助

# java - 从 Android 上的 USB 文本拆分 str w/连续选项卡后剩余的空字段难以识别

> ID：11295467
> 
> 赞同：1
> 
> 时间：2012-07-02T14:15:35.287
> 
> 标签：java, arrays, tabs, split, element

我正在从 USB 驱动器将文本文件读入 Android 4.0 平板电脑，其中许多行以选项卡开头。作为语言的测验实用程序，典型的行是

```
[tab]an experience[crlf] 
```

在拆分时，我有一个空数组元素，到目前为止我只能通过测试 if 来检测`stringJustSplit[0].length( ) == 0`。这并不安全，因为长度是元素的属性*，*而不是它的属性。当然`==""`，`== null`并没有让我到任何地方。

我看到了这个`RemoveEmptyEntries`选项，但我宁愿保留空元素，并且程序会有意地响应它们。

是否有声明可以处理它们？

日志产生：

```
 ---Array trial---(6229): Start
    ---Array trial---(6229): Located by length( )==0.
    ---Array trial---(6229): End 
```

从这个方法：

```
while ((Fileline = buffered_reader.readLine( )) != null) {
    line2array = Fileline.split("\\t");
    String[] tester = new String[1];
    String dummyStr = "|element1";
    String[] emptyField = dummyStr.split("\\|");
    if (true)                         {Log.v(T, "Start results");}
    if (line2array[0] == emptyField[0]){Log.v(T, "Located by array element created similar way.");}
    if (line2array[0] == tester[0])   {Log.v(T, "Located by comparison w just-made array.");}
    if (line2array[0].length( ) == 0) {Log.v(T, "Located by length( ) == 0.");}
    if (line2array[0] == "")          {Log.v(T, "Located by zero-len string.");}
    if (line2array[0] == null)        {Log.v(T, "Located by null.");}
    if (true)                         {Log.v(T, "End");}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:33:59.367

在Java中，需要`equals`比较字符串内容的方法，`==`会比较变量是否引用了内存中的同一个地址。

所以你的代码是：

```
// can't call .equals on something that is null
if (line2array[0] != null && line2array[0].equals(emptyField[0])) {
  Log.v(T, "Located by array element created similar way.");
}
if (line2array[0] != null && line2array[0].equals(tester[0])) {
  Log.v(T, "Located by comparison w just-made array.");
}
if (line2array[0].length() == 0) {
  Log.v(T, "Located by length( ) == 0.");
}
// literals are never null
if ("".equals(line2array[0])) {
  Log.v(T, "Located by zero-len string.");
}
if (line2array[0] == null) {
  Log.v(T, "Located by null.");
}
if (true) {
  Log.v(T, "End");
} 
```

# sql - MS Access 报告中的 CountIf 公式

> ID：11295468
> 
> 赞同：5
> 
> 时间：2012-07-02T14:15:41.707
> 
> 标签：sql, ms-access, report, ms-query

`CountIf`我在我的访问报告中添加论坛的尝试很糟糕，发生了一些可怕的事情。

我正在尝试在我的报告标题中添加一个公式来计算我的`Service`列中包含某个单词的条目数。问题是我在 SQL 代码方面绝对是个业余爱好者。

```
=CountIf([Service]="Housing") 
```

是我希望的代码可以工作，但我似乎没有得到任何地方。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T14:36:44.450

Access中没有任何`Countif`功能。但是，您可以使用`Sum`and `IIf`（即 Immediate If）来完成同样的事情。尝试：

```
=Sum(IIf([Service] Like "*Housing*", 1, 0)) 
```

以上假设您希望“服务”列*包含*“房屋”一词。这假设您在问题的措辞中是准确的。如果您真的要计算 Service 列正好等于“Housing”的记录数，则可以改用：

```
=Sum(IIf([Service] = "Housing", 1, 0)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-19T21:55:36.560

这也有效：

```
=Count(IIf([Service]="Housing",1)) 
```

# postgresql - postgres 9.1 日志文件更改

> ID：11295470
> 
> 赞同：3
> 
> 时间：2012-07-02T14:15:52.123
> 
> 标签：postgresql, logging, ubuntu

我有一个连续运行的标准 Ubuntu postgres9.1 安装，我可能不会停止它。

没有针对日志记录目标进行任何具体配置，因此有一个（以某种方式旋转）日志文件 /var/log/postgresqlpostgresql-9.1-main.log。我想，它会抓取进程的标准输出。

我想要的是配置一个不同的文件目标，并且无需重新启动，（对不起，没有收集器，没有系统日志......那些需要重新启动）但是通过重新配置，新的子进程使用该文件。

那可能吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T21:32:33.947

I believe this is relatively simple. Sadly it does require the use of the logging collector which would require a restart to enable. Without that you can't move a log between partitions.

You can configure which log is used in: `/etc/postgresql/<version>/<cluster>/postgresql.conf`

`log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log`

Once you change this, you will need to do a `service postgresql reload` to get it to pick up the changes.

Perhaps I should be clear here, that the point of this answer is that you can use `service postgresql reload` without restarting the server.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:01:52.600

我已经修改了我之前的答案，因为正如 Daniel Vérité 指出的那样，如果不使用 ，则无法设置日志文件`logging_collector`，该`log_filename`选项将被忽略。

旋转是通过“复制截断”完成的。那就是 logrotate 制作文件的副本，然后清空主日志文件。

在这种情况下，我认为您会很幸运，因为服务器会打开日志的文件句柄并仅使用该文件句柄进行写入。这意味着您可以简单地重命名文件`mv old_name.log new_name.log`。postgresql 使用的文件句柄绑定到文件本身而不是名称。

这个解决方案确实存在一个问题，*当*服务器重新启动时，它会在旧名称下创建一个新的日志文件。您将需要进行配置更改，以便在重新启动时继续写入同一位置。

# c++ - 如何在 C++ 中使用无锁循环缓冲区实现零拷贝 tcp

> ID：11295474
> 
> 赞同：8
> 
> 时间：2012-07-02T14:16:05.190
> 
> 标签：c++, tcp, circular-buffer, lockless, zero-copy

我有多个线程需要使用 TCP 流中的数据。我希望使用共享内存中的循环缓冲区/队列从 TCP 套接字读取。TCP 接收将直接写入循环队列。消费者将从队列中读取。

这种设计应该能够实现零拷贝和零锁定。但是这里有两个不同的问题。

1.  从 TCP 套接字中仅读取 1 条逻辑消息是否可能/有效？如果没有，并且我阅读了超过 1 条消息，我将不得不将残差从 this 复制到 this->next。

2.  真的可以实现无锁队列吗？我知道有原子操作，但这些也可能很昂贵。因为所有的 CPU 缓存都需要失效。这将影响我所有 24 个内核上的所有操作。

我对低级 TCP 有点生疏，并且不清楚如何判断消息何时完成。我是在寻找 \0 还是特定于实现？

泰

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T21:18:59.613

不幸的是，TCP 不能传输消息，只能传输字节流。如果要传输消息，则必须在顶部应用协议。高性能的最佳协议是那些使用健全性可检查标头指定消息长度的协议 - 这允许您将正确数量的数据直接读取到合适的缓冲区对象中，而无需逐字节迭代数据以寻找结束 -消息字符。然后可以将缓冲区指针排队到另一个线程，并为下一条消息创建/分离一个新的缓冲区对象。这避免了批量数据的任何复制，并且对于大型消息来说，足够高效，使用非阻塞队列作为消息对象指针有点毫无意义。

下一个可用的优化是池化对象 *buffers 以避免持续的 new/dispose，回收消费者线程中的 *buffers 以便在网络接收线程中重新使用。使用 ConcurrentQueue 很容易做到这一点，如果池暂时清空，最好阻塞以允许流控制而不是数据损坏或段错误/AV。

接下来，在每个 *buffer 数据成员的开头添加一个 [cacheline size] 'dead-zone'，以防止任何线程与任何其他线程虚假共享数据。

结果应该是一个完整的消息的高带宽流到消费者线程，具有非常小的延迟、CPU 浪费或缓存抖动。您的所有 24 个内核都可以在不同的数据上运行。

在多线程应用程序中复制大量数据是对糟糕设计和失败的承认。

跟进..

听起来您因为协议不同而无法迭代数据：(

无虚假共享的 PDU 缓冲区对象，例如：

```
typedef struct{
  char deadZone[256];  // anti-false-sharing
  int dataLen;
  char data[8388608]; // 8 meg of data
} SbufferData;

class TdataBuffer: public{
private:
  TbufferPool *myPool; // reference to pool used, in case more than one
  EpduState PDUstate; // enum state variable used to decode protocol
protected:
  SbufferData netData;
public:
  virtual reInit(); // zeros dataLen, resets PDUstate etc. - call when depooling a buffer
  virtual int loadPDU(char *fromHere,int len);  // loads protocol unit
  release(); // pushes 'this' back onto 'myPool'
}; 
```

loadPDU 得到一个指向原始网络数据长度的指针。它返回 0 - 意味着它还没有完全组装一个 PDU，或者它从原始网络数据中吃掉的字节数来完全组装一个 PDU，在这种情况下，将它排队，分离另一个并调用 loadPDU()使用未使用的剩余原始数据，然后继续输入下一个原始数据。

如果需要，您可以使用不同派生缓冲区类的不同池来服务不同的协议 - TbufferPool[Eprotocols] 数组。TbufferPool 可能只是一个 BlockingCollection 队列。管理变得几乎是微不足道的——缓冲区可以发送到系统周围的队列中，发送到 GUI 以显示统计信息，然后可能发送到记录器，只要在队列链的末尾调用 release()。

显然，一个“真正的”PDU 对象可能会加载更多的方法、数据联合/结构、迭代器和一个状态引擎来操作协议，但无论如何这是基本思想。主要的是易于管理、封装，并且由于没有两个线程可以在同一个缓冲区实例上操作，因此解析/访问数据不需要锁定/同步。

哦，是的，而且由于没有队列必须保持锁定的时间超过推送/弹出一个指针所需的时间，因此实际争用的机会非常低——即使是传统的阻塞队列也几乎不需要使用内核锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T05:11:10.097

如果您使用的是 Windows 8 或 Windows Server 2012，则可以使用 Registered I/O，它比常规 IOCP 为更低的 CPU 提供更高的带宽；它通过消除内核转换、零拷贝等来实现这一点

API：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms740642%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740642%28v=vs.85%29.aspx)

背景信息： [http ://www.serverframework.com/asynchronousevents/rio/](http://www.serverframework.com/asynchronousevents/rio/)

# php - 这个语法应该做什么？

> ID：11295478
> 
> 赞同：8
> 
> 时间：2012-07-02T14:16:18.993
> 
> 标签：php, oop

我正在管理一个带有自定义框架的网站，该框架由一些不再在公司工作的程序员开发。在代码的某些部分，我看到了这一点：

```
$class = 'PagesControl';
$obj = clone new $class(); 
```

这东西应该怎么做？为什么要克隆这样创建的对象？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-02T14:18:02.450

不，没有意义。

它应该是：

```
$class = 'PagesControl';
$obj = new $class(); 
```

如果 $class 是固定的，那么它应该是`$obj = new PagesControl();`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-02T14:19:30.103

也许他们在[`__clone()`](http://php.net/manual/en/language.oop5.cloning.php)方法中有一些奇怪的设置需要在实例化后立即调用，但这毫无意义。如果该类`PagesControl`没有`__clone()`方法，只需去掉`clone`，否则将`__clone()`方法中存在的代码放在`__construct()`

# maps - 谷歌地图航点

> ID：11295480
> 
> 赞同：0
> 
> 时间：2012-07-02T14:16:27.820
> 
> 标签：maps

我在 Google 地图中使用航点时遇到问题：[https ://developers.google.com/maps/documentation/javascript/directions#DirectionsResults](https://developers.google.com/maps/documentation/javascript/directions#DirectionsResults)

我想添加航点并按照我提供的顺序获取行车路线，但谷歌会自动优化它们......

我使用以下代码发送请求：

```
var request = {
  origin: start,
  destination: end,
  waypoints: waypts,
  optimizeWaypoints: true,
  travelMode: google.maps.TravelMode.DRIVING
}; 
```

并且在我的数组（waypts）中，航点按应有的顺序排列...

例子：

我想从纽约经芝加哥经纽约到费城。但我得到的回应是这样的：纽约经纽约（1 米）到芝加哥到费城。谷歌以某种方式优化路线，但我不想要这个......

任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:19:39.027

大声笑...我在文档中错过了...解决方案是：

在 var 请求中放入以下行：

```
optimizeWaypoints: false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-11T03:34:03.507

或者只是简单地删除这一行：

```
optimizeWaypoints: true 
```

# objective-c - 没有上下文的 NSRectFill 会导致调试警告

> ID：11295481
> 
> 赞同：0
> 
> 时间：2012-07-02T14:16:27.780
> 
> 标签：objective-c, cocoa, nsview, appkit, nsrect

我正在尝试使用 NSRect 在 Objective-C 中绘图，但我在网上找到的所有示例都会在输出日志中产生警告。它确实利用了视图，但我想看看调试器没有报告任何问题:)。

我读过一些关于你明确绘制的东西必须在“上下文”中的东西，但我发现的所有文章目前都远远超出了我的水平。

这是我的代码：

```
- (void)drawRect:(NSRect)rect
{
    NSColor *white = [NSColor whiteColor];
    NSColor *blue = [NSColor blueColor];

    [white set];
    NSRectFill([self bounds]);

    rect = NSMakeRect(100, 100, 50, 50);
    [blue set];
    NSRectFill(rect);
} 
```

我收到这些错误：

> 7 月 2 日 16:10:49 localhost X[27220]：CGContextSetFillColorWithColor：无效上下文 0x0
> 
> 7 月 2 日 16:10:49 本地主机 X[27220]：CGContextSetStrokeColorWithColor：无效上下文 0x0
> 
> 7 月 2 日 16:10:49 localhost X[27220]：CGContextSetFillColorWithColor：无效上下文 0x0
> 
> 7 月 2 日 16:10:49 本地主机 X[27220]：CGContextSetStrokeColorWithColor：无效上下文 0x0
> 
> 7 月 2 日 16:10:49 localhost X[27220]：CGContextGetCompositeOperation：无效上下文 0x0
> 
> 7 月 2 日 16:10:49 localhost X[27220]：CGContextSetCompositeOperation：无效上下文 0x0
> 
> 7 月 2 日 16:10:49 localhost X[27220]：CGContextFillRects：无效上下文 0x0
> 
> 7 月 2 日 16:10:49 localhost X[27220]：CGContextSetCompositeOperation：无效上下文 0x0

大多数文章都谈到了使用“NSGraphicsContext”，但都是理论上的，我找不到如何让它发挥作用的例子。

我希望有人能帮帮忙 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:03:02.917

执行绘图操作时，需要提供图形上下文。上下文是绘画将发生的地方，就像绘画的画布。

图形上下文由类的实例`NSGraphicsContext`或其 CoreGraphics 低级对应物管理`CGContextRef`。大多数 Cocoa 绘图方法都在当前上下文中运行。如果要为绘图操作创建自定义上下文，可以使用 获取当前上下文`+[NSGraphicsContext currentContext]`并使用`+[NSGraphicsContext setCurrentContext:]`.

但是当您实现时`-[NSView drawRect:]`，**您不需要处理图形上下文**。为什么？因为`NSView`在调用您的实现之前会自动创建一个上下文并将其设置为当前上下文，`drawRect:`然后检索绘制的内容并将其显示在屏幕上。明显的警告是**你不能`drawRect:`直接**调用：相反，`drawRect:`当它需要显示视图时，Cocoa 会调用你的实现。它是自动完成的。您唯一能做（并且需要做）的事情是使用`-[NSView setNeedsDisplay:]`带有参数的方法告诉视图何时需要重新显示（即，当其绘制的内容发生变化时） `YES`。

# java - 将无符号类型的按位运算符迁移到 java（无无符号类型）

> ID：11295487
> 
> 赞同：2
> 
> 时间：2012-07-02T14:16:49.287
> 
> 标签：java, android, c, bitwise-operators, unsigned

我正在将 iOS 应用程序迁移到 Android。

这个 iOs 应用程序使用 uint32_t 之类的类型。这是一个 unsigned int 32，它在 Java 上不可用。

```
uint32_t range is 0 to 4,294,967,295.

int32_t can hold values from –2,147,483,648 to 2,147,483,647 
```

我在 Objective-C 中有这段代码：

```
uint32_t vectorRxV1;
UInt16   xxsDas;

[ ... ]

UInt8 CM_L = (vectorRxV1 & 0xBB000000) >> 24; 
```

并且：

```
uint32_t vectorTxV0 += ((vectorTxV1<<4) + VectorSelK0) ^ ((vectorTxV1>>5) + VectorSelK1); 
```

并且：

```
Uint8 sincroRx = (sincroRx & 0xD9);
sincroRx = (sincroRx | 0xA2); 
```

我不确定我是否使用 a`long`而不是`uint32_t`（或`int`代替`UInt8`，上面的代码会给出不同的值。

**更新**

我有这些运算符：`>>`, `<<`,`&`和.`^``|`

你怎么看？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T14:24:32.797

为了减少无符号数据类型的缺失，Java 引入了`>>>`右移运算符，它不会对被移位的值进行符号扩展。这是唯一会因数字被解释为有符号的事实而受到影响的位操作。

如果将所有替换`uint32_t`为，并将对“无符号”值的`int`所有操作替换为，您将在操作结果中获得相同的位模式。`>>``>>>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:46:44.457

@dasblinkenlight 对他的操作员等是正确的......

然而，有一个注意事项。java long 是一个 64 位的值，所以如果你真的想要 32 位的无符号值并且想要使用 64 位的值进行真正的 32 位左移，那么答案如下所示：

```
long myVar;

myVar = 0x00000000FFFFFFFF & (myVar << someAmount); 
```

# excel - 无法在 VBA、Excel 2012 中正确格式化日期

> ID：11295495
> 
> 赞同：2
> 
> 时间：2012-07-02T14:17:11.603
> 
> 标签：excel, vba, date, excel-2010

我正在使用 Excel 2010 中的 VBA 脚本，该脚本根据事件的日期从 MySQL 数据库中获取某些事件。数据库中的日期存储在 "yyyy-mm-dd hh:mm:ss" 中。我的用户将使用从开始到日期范围来过滤他们感兴趣的事件。为了让他们更容易，我使用两个日历控件 (mscal.ocx) 作为范围 - Calendar1 用于 from 和 Calendar2 用于 to。我编写了两个简单的子例程，以确保每次单击日历都会自动更新我从中获取查询字符串数据的单元格，如下所示：

```
Private Sub Calendar1_Click()

Dim date1, datetime1, time1 As Date

Cells(29, 10) = CDbl(Calendar1.Value)
Cells(29, 10).NumberFormat = "yyyy-mm-dd"
Cells(30, 10).NumberFormat = "hh:mm:ss"
Cells(31, 11).NumberFormat = "yyyy-mm-dd hh:mm:ss"

date1 = Cells(29, 10)
time1 = Cells(30, 10)
datetime1 = date1 & " " & time1
Cells(31, 10) = datetime1

Cells(29, 10).Select

End Sub

Private Sub Calendar2_Click()

Dim date2, datetime2, time2 As Date

Cells(29, 11) = CDbl(Calendar2.Value)
Cells(29, 11).NumberFormat = "yyyy-mm-dd"
Cells(30, 11).NumberFormat = "hh:mm:ss"
Cells(31, 11).NumberFormat = "yyyy-mm-dd hh:mm:ss"

date2 = Cells(29, 11)
time2 = Cells(30, 11)
datetime2 = date2 & " " & time2
Cells(31, 11) = datetime2

Cells(29, 11).Select
End Sub 
```

好吧，它几乎完成了我想要它做的事情，即将日历控件给出的格式从 dd/mm/yyyy 更改为 yyyy-mm-dd。是的，几乎，因为它只在日期值介于 1 到 12 之间时才有效，所以我的日期时间单元格正确显示为“yyyy-mm-dd hh:mm:ss”。对于 13 到 31 天的值，我的日期时间单元格没有被格式化，而是显示为“dd/mm/yyyy hh:mm:ss”。

现在，值得注意的是，无论日期如何，单元格 29,10 和 29,11 始终具有正确的格式 (yyyy-mm-dd)，问题在于单元格 31,11 和 31,10。

现在，当我双击单元格时，光标在其中闪烁并按回车键，执行格式并将格式更改为正确的格式（即使对于 13 到 31 之间的日期值）。然而，这样做的目的是尽可能地自动化一切，所以这并不是一个真正的解决方案。如果需要，我可以附加该文件，因为我确实意识到它适用于某些值而不适用于其他值听起来有点荒谬。

请帮忙 ！

编辑 ：：

好的，再次感谢您的快速回答，我检查了您的解决方案，有了它，我有点回到了开始。使用

```
Private Sub CommandButton1_Click()

Dim date1, date2, datetime1, datetime2, time1, time2, time3 As Date

date1 = Cells(29, 10)
time1 = Cells(30, 10)
datetime1 = Format(date1, "dd/mm/yyyy") & " " & Format(time1, "hh:mm:ss")
Cells(31, 10) = datetime1

End Sub 
```

效果很好，但仅当日值从 1 到 12 时才有效，例如，对于单元格值

日期

> 2012-09-12

时间

> 15:00:00

答案如我所愿，即

约会时间

> 2012-09-12 15:00:00

但是，一旦我将日期值设置为高于 12，即 13 到 31，它就会停止正常工作（是的，我知道这听起来多么荒谬），而我得到的结果是：

约会时间

> 13/09/2012 15:00:00

任何建议都非常感谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T16:04:12.710

使用`Format()`功能

```
Format("17/07/2012", "yyyy-mm-dd") 
```

结果是`2012-07-17`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T06:36:19.013

我知道我为时已晚，但我认为你需要区分月份（MM）和分钟（mm）......所以试试这个......

```
Format(yourDateObj, "yyyy/MM/dd hh:mm:ss"); 
```

希望这可以帮助..：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T11:56:22.620

```
Private Sub testje()

Dim date1, date2, datetime1, datetime2, time1, time2 As Date

date1 = Cells(1, 1)
time1 = Cells(1, 2)
datetime1 = Format(date1, "dd/mm/yyyy") & " " & Format(time1, "hh:mm:ss")

Cells(2, 1) = datetime1

End Sub 
```

似乎工作。.. 否则，将 Excel 中的范围格式设置为自定义，定义为“dd/mm/yyyy uu:mm:ss”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T12:44:01.713

请改用格式（“mm/dd/yyyy”）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-20T11:01:29.363

在 VBA 中，如果旨在将日期时间作为查询的一部分传递给 SQL，则不要将日期调暗。而是尝试 Dim as String。

然后，您应该能够使用此处建议的函数将字符串格式化为所需的格式。

例如：

```
Dim date1 As String
date1 = Cells(29, 10)
date1 = Format(Date1, "yyyy-MM-dd hh:mm:ss")

debug.print date1 
```

我认为这对您不再有用（一年多前发布！）但我刚刚遇到了同样的问题，这对我有用，也许它会帮助其他人。

# java - Struts2 在嵌套迭代器中循环一次

> ID：11295499
> 
> 赞同：0
> 
> 时间：2012-07-02T14:17:21.883
> 
> 标签：java, jsp, struts2

我试图在带有 struts2 标签的嵌套迭代器中循环一次。这是我到目前为止所拥有的：

爪哇：

```
private List<Parent> allParent = new ArrayList<Parent>();
private List<Children> allChildren = new ArrayList<Children>(); 
```

JSP：

```
<s:iterator value="allParent">
  Parent name: <s:property value="parentName"/>
  <s:iterator value="allChildren">
       First child: <s:property value="childName"/>
  </s:iterator>
</s:iterator> 
```

如果我将 2 个迭代器分开，那么所有项目都会完美列出。如果我嵌套它们，那么孩子们都不会出现。在我让孩子们表演之后，我想限制他们，所以只有一个表演。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:58:19.860

此代码不起作用，因为 jsp 认为`allParent`存在一个调用的 getter，而不是在您的操作类中`getAllChildren`的列表下进行迭代。`allChildren`

# 可能的解决方案

在一张地图中加入两个列表`Map<Parent, List<Children>> map`。然后，在 jsp 页面中遍历 map 和 map 的每个值。

```
<s:iterator value="map">
     Parent name: <s:property value="key"/>
     <s:iterator value="value">
         First child: <s:property />
     </s:iterator>
</s:iterator> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T19:09:19.520

试试这个：

```
<s:iterator value="allParent" var="parent">
  Parent name: <s:property value="#parent.parentName"/>
  <s:iterator value="allChildren" var="child">
       First child: <s:property value="#child.childName"/>
  </s:iterator>
</s:iterator> 
```

**更新**

如果您只想显示其中一个孩子，请考虑**s:subset**

```
<s:iterator value="allParent" var="parent">
  Parent name: <s:property value="#parent.parentName"/>
  <s:subset source="allChildren" count="what_ever_u_like">
  <s:iterator>
    <s:property />
  </s:iterator>
  </s:subset>
</s:iterator> 
```

# python - 如何统一 Python Pyramid 视图以处理 Ajax/html 表单 POST

> ID：11295500
> 
> 赞同：5
> 
> 时间：2012-07-02T14:17:26.003
> 
> 标签：python, ajax, forms, post, pyramid

我的 Python Pyramid 应用程序中有一些 HTML 表单。我希望它们在启用 JavaScript 和禁用 JavaScript 时通过 AJAX 工作。现在我对 AJAX 和普通表单帖子使用不同的视图，但这些函数的代码似乎几乎相同，除了响应。我使用这样的视图类（类主体）：

```
def ajax_ok(self, msg):
    return Response(body=msg)

def ajax_error(self, msg):
    return HTTPInternalServerError(body=msg)

@action(xhr=True, renderer='json', name='ftp')
def ftp_ajax(self):
    log.debug('View: %s', 'ftp (ajax)')
    if 'form.submitted' in self.params:
        try:
            self.config.save(self.params)
        except:
            return self.ajax_error('some error')
        else:
            return self.ajax_ok('ok')

@action()
def ftp(self):
    if 'form.submitted' in self.params:
        try:
            self.config.save(self.params)
        except:
            self.request.session.flash('error; ' + msg)
        else:
            self.request.session.flash('success; ' + msg)
    return {'content': render('templates/ftp.pt', {'ftp':
                                                    self.config.ftp})} 
```

如果有任何错误，我需要处理并在 html 中显示它们。也许我应该使用[finished_callback](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/hooks.html#using-finished-callbacks)或我自己的渲染器，它会为不同的请求类型发送不同的响应？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T16:07:16.180

你可以这样做：

```
@action(name='ftp', renderer='templates/ftp.pt')
@action(xhr=True, renderer='json', name='ftp')
def ftp_ajax(self):
    log.debug('View: %s', 'ftp (ajax)')

    # CODE

    if request.is_xhr:
        return JSON
    else:
        return something for template 
```

但如果你做得非常好，你可能会得到类似的东西：

```
@action(name='ftp', renderer='templates/ftp.pt')
@action(xhr=True, renderer='json', name='ftp')
def ftp_ajax(self):
    log.debug('View: %s', 'ftp (ajax)')
    my_values = dict()

    # Code

    return my_values 
```

但老实说，在您当前的代码中，代码不是很相似，因为您不会返回相同的东西，在一种情况下，您推送一些信息，然后您会返回一些东西。

在这种情况下，最好将事物分开而不是将所有事物合并在一起。但是如果你可以分离和返回相同的数据，你可以堆叠`@action`在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:30:21.390

您可以只有一种方法`ftp`，并在其中检查是否`request.is_xhr`为 true 以呈现正确的错误/响应。

# c# - NetUserGetInfo 的服务器名称是什么？

> ID：11295502
> 
> 赞同：0
> 
> 时间：2012-07-02T14:17:34.833
> 
> 标签：c#, server-name

我想要一个可以在本地机器上接受任何用户名并告诉我该用户是否是管理员的功能。我尝试使用 WindowsIdentity 没有成功。现在我正在尝试使用 NetUserGetInfo。问题是它总是返回 2221。谷歌告诉我那是一个用户未找到错误。我很确定问题是我使用 null 作为服务器名。但这是在一个拥有庞大网络的工作场所。用户将在一台机器上创建帐户，并且此代码将仅在该机器上运行。那么我应该为服务器名输入什么？

```
 [DllImport("Netapi32.dll", CharSet = CharSet.Unicode, ExactSpelling = true)]
    private extern static int NetUserGetInfo(
        [MarshalAs(UnmanagedType.LPWStr)] string serverName,
        [MarshalAs(UnmanagedType.LPWStr)] string userName,
        int level,
        out IntPtr bufPtr
    );

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    public struct USER_INFO_1
    {
        [MarshalAs(UnmanagedType.LPWStr)]
        public string usri1_name;
        [MarshalAs(UnmanagedType.LPWStr)]
        public string usri1_password;
        [MarshalAs(UnmanagedType.U4, SizeConst = 34)]
        public string usri1_password_age;
        [MarshalAs(UnmanagedType.U4, SizeConst = 34)]
        public string usri1_priv;
        [MarshalAs(UnmanagedType.LPWStr)]
        public string usri1_home_dir;
        [MarshalAs(UnmanagedType.LPWStr)]
        public string usri1_comment;
        [MarshalAs(UnmanagedType.U4, SizeConst = 34)]
        public string usri1_flags;
        [MarshalAs(UnmanagedType.LPWStr)]
        public string usri1_script_path;
    }

...
public static bool IsAuthorizedUser(string userId) 
{
    IntPtr bufPtr;
        USER_INFO_1 u1 = new USER_INFO_1();
        int a = NetUserGetInfo(null, userId, 1, out bufPtr);
        if(a == 0)
        {
            u1 = (USER_INFO_1) Marshal.PtrToStructure(bufPtr, typeof (USER_INFO_1));
            Console.WriteLine(u1.usri1_name);
        }
        else
        {
            Console.WriteLine("a:"+a);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:22:34.023

首先你需要知道你在做什么。你如何定义管理员？有一个本地组呼叫管理员——这通常是人们谈论给定机器的管理员时的意思。你是这个意思吗？

您也可以指域上的管理员。如果是这种情况，那么您需要知道域的托管位置。这是它要求的服务器。如果您没有或不知道这是什么，那么您可能不需要它。

无论如何，这可能是您未说出的问题的答案：

[在 .NET/C# 中测试进程是否具有管理权限](https://stackoverflow.com/questions/1089046/in-net-c-test-if-user-is-an-administrative-user)

# ios - git push 说一切都是最新的

> ID：11295509
> 
> 赞同：2
> 
> 时间：2012-07-02T14:18:05.607
> 
> 标签：ios, xcode, git, version-control, github

我无法理解 git 本地和远程版本控制的概念。例如，我在本地 git rep 中有一个 iPhone 应用程序。最初这是我的主分支。然后我检查了一个新的分支`git checkout -b "update-2.0.1"`。

然后我设置`git push origin update-2.0.1`以确保我有一个单独的分支来开发此应用程序更新，并在完成后将其合并回我的主分支。美好的！

现在我在我的更新分支上，我想为每个问题 ID 创建分支。所以我说`git checkout -b "#3178"`- 当我现在尝试在我的远程存储库中推送这个新问题分支时，git 说`"Everything-up-to-date"`。

我不明白为什么不能将此问题分支推送到远程存储库？

`git remote -b`返回

> 原产地/主人
> 
> 起源/更新-2.0.1

我很想看到第三个分支

> 起源/更新-2.0.1/#3178

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:26:07.630

您需要重复第一个命令：

```
git push origin <name-of-branch> 
```

为您在本地创建的每个新分支创建相应的远程分支。Git 不会推送，除非它有可以推送的地方。如果您需要，这可以是一个空分支。

然后你会得到

```
origin/<name-of-branch> 
```

并不是

```
origin/<name-of-branch>/<name-of-other-branch> 
```

尽管它们将在没有层次结构的情况下列出，但实际上它们确实相互分支。使用 gitk 或其他东西可以直观地查看历史日志以确认这一点。

如果您想完成该问题的处理并将其合并到它开始的分支中，请执行以下操作：

```
git checkout <name-of-original-branch> // update-2.0.1
git merge --no-ff <name-of-finished-branch> // #3178
git push origin // Will write local update-2.0.1 to origin 
```

如果您想要一个很好的可视化解释为什么使用 --no-ff 选项是一个非常强大的模型来跟踪作为发布周期的一部分从其他分支脱落的分支，请查看[git flow 。](http://nvie.com/posts/a-successful-git-branching-model/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:22:48.580

切换到您要合并的分支，例如转到“master”并将您的另一个分支**update-2.0.1**合并到 master。

```
git checkout master
git merge update-2.0.1
git push 
```

例如。然后，您在 master 分支中的更新分支中获得了所有更改，您可以推送它。

当您真的只需要一个新分支时，请仅制作

```
git branch name 
```

来自你此时所在的分支。当你将它推送到原点时，你有一个新的**远程分支**

检查它

```
git branch -r #remote branches
git branch #local branches 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:17:40.307

新分支没有推送到远程存储库的原因仅仅是因为我没有使用双引号。

```
git push origin "new-branch" 
```

此外，当重命名分支时，始终使用双引号 - 至少在我的情况下它有效，而并非 Web 中的所有代码示例都使用这种语法。

# ruby - 从ruby中的字符串中删除空行

> ID：11295513
> 
> 赞同：3
> 
> 时间：2012-07-02T14:18:19.403
> 
> 标签：ruby, regex, string

我已经经历了其他类似的问题，他们似乎并没有解释我的问题。

我的输出，现在是这样的，我想从 ruby​​ 中的字符串中删除空行，

```
#    

CIRRUS LADIES NIGHT with DJ ROHIT

4th of JULY Party ft. DJ JASMEET @ I-Bar

Submerge Deep @ Pebble | Brute Force (Tuhin Mehta) | DJ Arpan (Opening)

Champagne Showers - DJs Panic & Nyth @ Blue Waves

THURSDAY PAST AND PRESENT @ Hint 
```

我希望我的输出是这样的，

```
CIRRUS LADIES NIGHT with DJ ROHIT
4th of JULY Party ft. DJ JASMEET @ I-Bar
Submerge Deep @ Pebble | Brute Force (Tuhin Mehta) | DJ Arpan (Opening)
Champagne Showers - DJs Panic & Nyth @ Blue Waves
THURSDAY PAST AND PRESENT @ Hint 
```

我试过`gsub /^$\n/,''`, `gsub(/\n/,'')`，`squeeze("\n")`但`delete! "\n"`无济于事。

另外，我忘了提到我的字符串以空行开头，`#`表示第一行之前的空行，如果这会改变任何东西。

我的 String.inspect 按要求检查，字符串的内容已更改，但问题仍然相同。

`string.inspect :`

```
"\n\n\t\t\t\t\t\t\t\t\t"
"Tricky Tuesdays with DJ John @ Blend"
"\n\n\t\t\t\t\t\t\t\t\t"
"Bladder Buster Challenge with DJ Sean @ Star Rock"
"\n\n\t\t\t\t\t\t\t\t\t"
"Classic Rock Tuesday @ 10D - Chennai"
"\n\n\t\t\t\t\t\t\t\t\t"
"Vodka Night with DJ John @ Blend"
"\n\n\t\t\t\t\t\t\t\t\t"
"\"BOLLYWOOD WEDNESDAYS\" with DJ D Nash @ Candy Club"
"\n\n\t\t\t\t\t\t\t\t\t"
"RE - LAUNCH WEDNESDAY LADIES NIGHT @ ZODIAC"
"\n\n\t\t\t\t\t\t\t\t\t"
"Ladies Night @ 10 D - Chennai"
"\n\n\t\t\t\t\t\t\t\t\t"
"Wednesday Mayhem @ Dublin"
"\n\n\t\t\t\t\t\t\t\t\t" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T15:01:34.317

这是我的解决方案：

```
text.gsub(/\n+|\r+/, "\n").squeeze("\n").strip 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T15:02:16.760

这将删除所有连续的空行：

```
result = s.squeeze("\r\n").gsub(/(\r\n)+/, "\r\n") 
```

或没有 Ruby 的命令行选项：

```
grep -v "^$" <file> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T14:34:12.590

首先，您的代码删除*了所有*换行符，而不仅仅是空白行 - 这听起来不像您想要的。

其次，操作系统在如何表示换行方面历来存在分歧——旧的 Mac 用于`\r`换行，Linux 和 OSX 使用`\n`，Windows 使用组合`\r\n`。`\r`所以你真的想`\n`用一个`\n`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T15:46:56.127

`.split(/\n/).reject{ |l| l.chomp.empty? }.join("\n")`

仅适用于 Unix 风格：

`.split(/\n/).reject(&:empty?).join("\n")`

也删除空白行（Unix，Rails 方法）：

`.split(/\n/).reject(&:blank?).join("\n")`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T15:47:07.150

这是一个删除所有空行的单个正则表达式，包括文件开头或结尾的空行，包括仅包含空格或制表符的行，并允许所有三种形式的行结束标记（`\r\n`、`\n`和`\r`）：

```
def remove_blank_lines( str, line_ending="\n" )
  str.gsub(/(?<=\A|#{line_ending})[ \t]*(?:#{line_ending}|\z)/,'')
end 
```

测试：

```
[ "\r\n", "\n", "\r" ].each do |marker|
    puts '='*70, "Lines ending with: #{marker.inspect}", '='*70
  [ "", " ", "\t", " \t", "\t " ].each do |whitespace|
    0.upto(2) do |lines|
        blank_lines = "#{whitespace}#{marker*lines}"
      s = "#{marker*lines}a#{marker*lines}b#{blank_lines}c#{blank_lines}"
      tight = remove_blank_lines(s, marker)
      puts "%43s -> %s" % [s.inspect, tight.inspect]
    end
  end
end

#=> ======================================================================
#=> Lines ending with: "\r\n"
#=> ======================================================================
#=>                                       "abc" -> "abc"
#=>                       "\r\na\r\nb\r\nc\r\n" -> "a\r\nb\r\nc\r\n"
#=>       "\r\n\r\na\r\n\r\nb\r\n\r\nc\r\n\r\n" -> "a\r\nb\r\nc\r\n"
#=>                                     "ab c " -> "ab c "
#=>                     "\r\na\r\nb \r\nc \r\n" -> "a\r\nb \r\nc \r\n"
#=>     "\r\n\r\na\r\n\r\nb \r\n\r\nc \r\n\r\n" -> "a\r\nb \r\nc \r\n"
#=>                                   "ab\tc\t" -> "ab\tc\t"
#=>                   "\r\na\r\nb\t\r\nc\t\r\n" -> "a\r\nb\t\r\nc\t\r\n"
#=>   "\r\n\r\na\r\n\r\nb\t\r\n\r\nc\t\r\n\r\n" -> "a\r\nb\t\r\nc\t\r\n"
#=>                                 "ab \tc \t" -> "ab \tc \t"
#=>                 "\r\na\r\nb \t\r\nc \t\r\n" -> "a\r\nb \t\r\nc \t\r\n"
#=> "\r\n\r\na\r\n\r\nb \t\r\n\r\nc \t\r\n\r\n" -> "a\r\nb \t\r\nc \t\r\n"
#=>                                 "ab\t c\t " -> "ab\t c\t "
#=>                 "\r\na\r\nb\t \r\nc\t \r\n" -> "a\r\nb\t \r\nc\t \r\n"
#=> "\r\n\r\na\r\n\r\nb\t \r\n\r\nc\t \r\n\r\n" -> "a\r\nb\t \r\nc\t \r\n"
#=> ======================================================================
#=> Lines ending with: "\n"
#=> ======================================================================
#=>                                       "abc" -> "abc"
#=>                               "\na\nb\nc\n" -> "a\nb\nc\n"
#=>                       "\n\na\n\nb\n\nc\n\n" -> "a\nb\nc\n"
#=>                                     "ab c " -> "ab c "
#=>                             "\na\nb \nc \n" -> "a\nb \nc \n"
#=>                     "\n\na\n\nb \n\nc \n\n" -> "a\nb \nc \n"
#=>                                   "ab\tc\t" -> "ab\tc\t"
#=>                           "\na\nb\t\nc\t\n" -> "a\nb\t\nc\t\n"
#=>                   "\n\na\n\nb\t\n\nc\t\n\n" -> "a\nb\t\nc\t\n"
#=>                                 "ab \tc \t" -> "ab \tc \t"
#=>                         "\na\nb \t\nc \t\n" -> "a\nb \t\nc \t\n"
#=>                 "\n\na\n\nb \t\n\nc \t\n\n" -> "a\nb \t\nc \t\n"
#=>                                 "ab\t c\t " -> "ab\t c\t "
#=>                         "\na\nb\t \nc\t \n" -> "a\nb\t \nc\t \n"
#=>                 "\n\na\n\nb\t \n\nc\t \n\n" -> "a\nb\t \nc\t \n"
#=> ======================================================================
#=> Lines ending with: "\r"
#=> ======================================================================
#=>                                       "abc" -> "abc"
#=>                               "\ra\rb\rc\r" -> "a\rb\rc\r"
#=>                       "\r\ra\r\rb\r\rc\r\r" -> "a\rb\rc\r"
#=>                                     "ab c " -> "ab c "
#=>                             "\ra\rb \rc \r" -> "a\rb \rc \r"
#=>                     "\r\ra\r\rb \r\rc \r\r" -> "a\rb \rc \r"
#=>                                   "ab\tc\t" -> "ab\tc\t"
#=>                           "\ra\rb\t\rc\t\r" -> "a\rb\t\rc\t\r"
#=>                   "\r\ra\r\rb\t\r\rc\t\r\r" -> "a\rb\t\rc\t\r"
#=>                                 "ab \tc \t" -> "ab \tc \t"
#=>                         "\ra\rb \t\rc \t\r" -> "a\rb \t\rc \t\r"
#=>                 "\r\ra\r\rb \t\r\rc \t\r\r" -> "a\rb \t\rc \t\r"
#=>                                 "ab\t c\t " -> "ab\t c\t "
#=>                         "\ra\rb\t \rc\t \r" -> "a\rb\t \rc\t \r"
#=>                 "\r\ra\r\rb\t \r\rc\t \r\r" -> "a\rb\t \rc\t \r" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-02T15:27:11.003

这是基于@Tom的回答的丑陋黑客：

```
result = s.squeeze("\r\n").tap{ |s2| :go while s2.gsub!("\r\n\r\n","\r\n") } 
```

它支持 DOS ( `\r\n`)、Unix ( `\n`) 和 MacOS 9- ( `\r`) 换行符。测试：

```
[ "\r\n", "\n", "\r" ].each do |marker|
  1.upto(5) do |lines|
    s = "a#{marker*lines}b"
    tight = s.squeeze("\r\n").tap{ |s2| :go while s2.gsub!("\r\n\r\n","\r\n") }
    puts "%24s -> %s" % [s.inspect, tight.inspect]
  end
end
#=>                 "a\r\nb" -> "a\r\nb"
#=>             "a\r\n\r\nb" -> "a\r\nb"
#=>         "a\r\n\r\n\r\nb" -> "a\r\nb"
#=>     "a\r\n\r\n\r\n\r\nb" -> "a\r\nb"
#=> "a\r\n\r\n\r\n\r\n\r\nb" -> "a\r\nb"
#=>                   "a\nb" -> "a\nb"
#=>                 "a\n\nb" -> "a\nb"
#=>               "a\n\n\nb" -> "a\nb"
#=>             "a\n\n\n\nb" -> "a\nb"
#=>           "a\n\n\n\n\nb" -> "a\nb"
#=>                   "a\rb" -> "a\rb"
#=>                 "a\r\rb" -> "a\rb"
#=>               "a\r\r\rb" -> "a\rb"
#=>             "a\r\r\r\rb" -> "a\rb"
#=>           "a\r\r\r\r\rb" -> "a\rb" 
```

请注意，这假设您的空白行是真正的空白，并且没有任何空格。如果是这种情况，你可以做一个预通行证`s.gsub(/^[ \t]+$/,'')`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-02T14:27:13.770

尝试

```
/^\n/ 
```

并替换为空字符串。

**你确定你的换行​​符只是`\n`？**如果不试试

```
/^\r?\n/ 
```

也允许换行序列`\r\n`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-27T20:11:54.517

这将做到： `.gsub(/(\n\s*\n)+/, "\n")`

如果需要，用 ]替换`\n`正则表达式。`[\n|\r`

# c# - 如何将图片框绘制到面板？

> ID：11295515
> 
> 赞同：0
> 
> 时间：2012-07-02T14:18:23.130
> 
> 标签：c#

我在两个不同位置的面板上有 2 个图片框，这些图片框将在一段时间后隐藏。我想在图片框控件所在的确切位置将图片框背景图像绘制到面板上。我查看了 MSDN 库，但似乎不知道如何执行此操作。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:37:09.367

我会通过在与原件相同的位置创建另外 2 个图片框来做到这一点，但其中没有任何图片。这样，它们将始终与原件位于同一位置。您将欺骗者留空，以便它们显示背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:40:15.037

你可以做类似这样的事情：

```
Bitmap bitmap = new Bitmap(panel1.Size.Width, panel1.Size.Height);
using (Graphics g = Graphics.FromImage(bitmap))
{
    g.DrawImage(pictureBox1.BackgroundImage, new Rectangle(pictureBox1.Location, pictureBox1.Size));
    g.DrawImage(pictureBox2.BackgroundImage, new Rectangle(pictureBox2.Location, pictureBox2.Size));
    g.Flush();
}

pictureBox1.Visible = false;
pictureBox2.Visible = false;
panel1.BackgroundImage = bitmap; 
```

或者你可以尝试使用这个：

```
public class PanelEx : Panel
{
    public PictureBox PictureBox1 { get; set; }
    public PictureBox PictureBox2 { get; set; }
    public bool IsBackgroundDrawn { get; set; }

    protected override void OnPaintBackground(PaintEventArgs e)
    {
        if (!IsBackgroundDrawn)
        {
            IsBackgroundDrawn = true;
            base.OnPaintBackground(e);
        }
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);
        if (PictureBox1 != null && PictureBox2 != null && !IsBackgroundDrawn)
        {
            Bitmap bitmap = new Bitmap(this.Size.Width, this.Size.Height);
            e.Graphics.DrawImage(PictureBox1.BackgroundImage, new Rectangle(PictureBox1.Location, PictureBox1.Size));
            e.Graphics.DrawImage(PictureBox2.BackgroundImage, new Rectangle(PictureBox2.Location, PictureBox2.Size));
            e.Graphics.Flush();

            PictureBox1.Visible = false;
            PictureBox2.Visible = false;
            this.BackgroundImage = bitmap;
            IsBackgroundDrawn = false;
        }
    }
} 
```

# iphone - iPhone开发中如何加载单独的UIView

> ID：11295518
> 
> 赞同：3
> 
> 时间：2012-07-02T14:18:33.767
> 
> 标签：iphone, uiview, xib, xcode-storyboard

在我现在开发的游戏中单击暂停按钮时，我必须使用 UIView 作为一种暂停视图。这个暂停视图将在 40 个 UIViewControllers 中使用。我在 UI 中使用“故事板”，但我在 .xib 文件中设计了暂停视图。

如何在我的应用程序中加载和使用此视图？如何加载 UIView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:35:11.147

您可以将此视图添加到您的视图控制器并使用 [yourView setEnabled:NO] 将其设置为禁用；然后在需要使用 setEnabled:YES 时启用它。

或者，如果您有多个要使用它的视图控制器。创建一个单独的视图控制器并将您的视图放入其中。以编程方式将此视图控制器的视图添加到每个视图控制器。

```
PauseViewController *pauseVC = [self.storyboard instantiateViewControllerWithIdentifier:@"PauseID"];
[self.view addSubview:pauseVC.view]; 
```

![班级](../Images/a869c8ab943fef382d6aebde0dd6019e.png) ![ID](../Images/4ba7580a0a4bf6e1a6d517dc0632ac52.png)

# php - 如何使用 storefilter 过滤类别集合？

> ID：11295521
> 
> 赞同：1
> 
> 时间：2012-07-02T14:18:42.447
> 
> 标签：php, magento, collections, filter, categories

我有一个管理模块，我想在该模块中以存储方式获取类别集合，那么我们如何使用 storefilter 过滤集合？addstorefilter 不适用于类别收集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:49:38.063

使用 setStore 或 setStoreId 方法：

```
$collection = Mage:getResourceModel('catalog/category_collection');

// or $collection = Mage::getModel('catalog/category')->getCollection();

$collection->setStoreId($myStoreId)
   ->load(); 
```

**更新：** 有一个简单的脚本来检查这个：

```
<?php
require 'app/Mage.php';

Mage::app('admin');

$collection = Mage::getModel('catalog/category')->getCollection()
    ->addAttributeToSelect('name')
    ->setStoreId(2)
    ->load();

echo $collection->count(), "\n";
foreach ($collection as $item) {
   echo $item->getName(), "\n";
} 
```

如果您有 3 个商店视图，则将有 3 个 storeId。有 0 - 用于管理存储，1 - 用于默认存储和 2（或其他值）用于另一个存储。我刚刚检查过它并且它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:35:47.363

我添加了下面的代码，它对我有用

```
$storecategoryid = Mage::app()->getStore($storeid)->getRootCategoryId(); 
```

从这段代码中，我得到了存储根 categoryid。

```
$category = Mage::getModel('catalog/category')->getCollection()->addFieldToFilter('is_active',array('eq' => 1))->load(); 
```

从这里我得到整个类别集合

```
foreach($category as $cat)
{
  if($cat->getData('level')==2 && $cat->getData('parent_id')==$storecategoryid)
  { 
     echo 'my code';
  }
} 
```

这样我就得到了商店类别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-08T10:42:24.370

```
$rootCategoryId = Mage::app()->getStore()->getRootCategoryId();
$categories = Mage::getModel('catalog/category')->getCollection();
$categories->addAttributeToFilter('path', array('like' => "1/{$rootCategoryId}/%")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-06T18:23:43.047

道具前往[@xpoback](https://stackoverflow.com/users/2000848/xpoback)以获得正确答案。我想重申一下答案，因为有些答案有些正确，有些则不正确。

简短的回答，使用这个：

```
$rootId = Mage::app()->getStore()->getRootCategoryId();
    $collection = Mage::getModel('catalog/category')
        ->getResourceCollection()
        ->addAttributeToSelect('*')
        ->addFieldToFilter('path', array('like' => "1/{$rootId}/%"))
        ->addIsActiveFilter(); 
```

对于所有想了解其他答案的问题的人，请继续阅读。

首先，[@Muffadal](https://stackoverflow.com/users/1326539/mufaddal)的答案是有用的，但在性能方面非常慢。您希望保持对 mySQL 的数据查询，而不是在大集合上使用 php 循环（前提是您的商店中有多个类别）。

该使用答案下的评论`addPathsFilter('/' . $storecategoryid . '/')`也是正确的，但在这种情况下会比使用 LIKE 运算符慢（见[文章](https://thingsilearn.wordpress.com/2008/02/28/mysql-query-speed-regexp-vs-like/)）

[@Serjio](https://stackoverflow.com/users/1445507/serjio)的方法在区分不同类别方面不起作用。它将做的是提取存储特定的翻译。示例商店 1 已将类别命名为*Rings*，商店 2 已将相同类别命名为*My Rings*。如果我们使用他的代码从 store 2 进行调用，它将拉取所有类别，无论 Root 是什么，但会拉取 Store 2 的命名约定 - *My Rings*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-21T07:42:55.883

**在 Magento 1.9 中**

```
$storeId=2;
$rootCategoryId = Mage::app()->getStore($storeId)->getRootCategoryId();

            $categories = Mage::getModel('catalog/category')
                ->getCollection()
                ->setStoreId($storeId)
                ->addFieldToFilter('is_active', 1)
                ->addAttributeToFilter('path', array('like' => "1/{$rootCategoryId}/%"))
                ->addAttributeToSelect('*');

                foreach($categories as $categorie)
                {
                    $catid=$cat->getId();                   
                    $catname=$categorie->getName();
                    $catp=catp$categorie->getParent_id();
                } 
```

# iphone - 如何使用 New Fbconnect Api 将图像发布到 Facebook Wall？

> ID：11295530
> 
> 赞同：-1
> 
> 时间：2012-07-02T14:19:08.520
> 
> 标签：iphone, ios, ipad, xcode4, fbconnect

我使用旧的 Fbconnect Api 成功地将图像和文本发布到 Facebook 墙上。但是现在旧的 Fbconnect Api 对我不起作用。这是我正在使用的代码。[下载](http://www.hilbert1862.com/Samplecode/FbTestApp.zip) 我从另一个教程中集成了新的 Fbconnect api，但我无法让它工作。这个示例代码有三个问题。

1.  如何集成新的 Fbconnect Api 。
2.  正如我在此示例代码中使用的那样，如何在用户的 Facebook 墙上发布带有文本的图像。
3.  如何在特定朋友的 Facebook 墙上发布图像和文本。

但我要求所有想帮助我的人使用我的代码进行所有更改。任何帮助都将提前获得 .Thanx。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:31:53.620

尝试这个

> ```
> NSURL *url = [NSURL URLWithString:@"YOur Image url"];
> NSData *data = [NSData dataWithContentsOfURL:url];
> UIImage *img  = [[UIImage alloc] initWithData:data]; 
> ```
> 
> [变量setObject：img forKey：@“图片”]；
> 
> FbGraphResponse *fb_graph_response = [fbGraph doGraphPost:@"/me/photos" withPostVars:variables];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T06:52:00.177

您可以使用 FB 的 grapAPI 在 FB 墙上发布图像 这是最简单的方法 使用[此](https://github.com/AalokParikh/iPhone-Facebook-Graph-API)链接来实现它。

快乐编码:)

# iphone - 导航栏隐藏在内容后面

> ID：11295536
> 
> 赞同：0
> 
> 时间：2012-07-02T14:19:32.623
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, uinavigationcontroller

这是 UINavigationController 的 init 方法。我想我一定做错了。

```
- (id)init
{
self = [super init];
if (self) {

    self.view.backgroundColor = [UIColor blackColor];

    self.viewController = [[UIViewController alloc] init];

    self.viewControllers = [NSArray arrayWithObject:self.viewController];

    UIBarButtonItem *button = [[UIBarButtonItem alloc] initWithTitle:@"Done"
                                                               style:UIBarButtonItemStylePlain
                                                              target:self
                                                              action:@selector(done)];
    self.viewController.navigationItem.rightBarButtonItem = button;
    self.navigationBar.barStyle = UIBarStyleBlackTranslucent;

    self.mediaScrollView = [[MediaScrollView alloc] initWithFrame:self.view.bounds];
    self.mediaScrollView.touchDelegate = self;
    self.mediaScrollView.fullScreenDelegate = self;
    [self.viewController.view addSubview:self.mediaScrollView];

}
return self; 
```

}

mediaScrollView 在我的导航栏前面。它应该出现在导航栏的后面。

这是调用它的方法：

```
self.mediaVC = [[PDMediaViewController alloc] init];
    self.mediaVC.mediaScrollView.manualMedia = YES;
    self.mediaVC.mediaScrollView.mediaDelegate = self;
    self.mediaVC.mediaScrollView.currentMediaItem = 0;

    self.mediaVC.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentModalViewController:self.mediaVC animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:22:57.923

大多数时候你不子类化`UINavigationController`。相反，您创建子类，`UIViewControllers`然后使用普通`UINavigationController`实例来处理您的视图控制器。

```
MyViewController *firstViewController = [[MyViewController alloc] init];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:firstViewController];
[window addSubview:navController.view]; 
```

查看 XCode 中的导航控制器模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:30:40.423

**不要继承 UINavigationController！**

> UINavigationController 类实现了一个专门的视图控制器来管理分层内容的导航。**此类不用于子类化**。相反，在您希望应用程序的用户界面反映内容的分层性质的情况下，您可以按原样使用它的实例。此导航界面可以有效地呈现您的数据，也使用户更容易导航该内容。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

# java - 性能问题 - JFreeChart (XYDataSet)

> ID：11295538
> 
> 赞同：1
> 
> 时间：2012-07-02T14:19:37.483
> 
> 标签：java, performance, jfreechart, scatter-plot

我对 JFreeChart 非常陌生，并且在尝试渲染庞大的数据集时遇到了性能问题。我的场景中的数据集来自一个 csv 文件，该文件有超过 46700 行（行）和大约 2666900+ 个数据点要绘制。

我当前的绘图代码如下：

```
public  void doPlot(String plotTitle, HashMap<Integer, ArrayList<PlotCheckBox>> plotDataList, boolean dotOnly) {

    plotDialog.dispose();

    DefaultXYDataset xyDataSet;
    try {
        if (plotDataList.isEmpty()) {
            return;
        }

        xyDataSet = new DefaultXYDataset();
        /**
         * Populate Data Set
         */
        boolean[] optionList;
        int countPlotPoints = 0;

        for (Integer tabIndex : plotDataList.keySet()) {
            ArrayList<PlotCheckBox> checkBoxList = plotDataList.get(tabIndex);
            try {
                if (checkBoxList == null) {
                    continue;
                } else if (checkBoxList.isEmpty()) {
                    continue;
                }

                optionList = new boolean[checkBoxList.size()];
                for (int index = 0; index < checkBoxList.size(); index++) {
                    optionList[index] = checkBoxList.get(index).isSelectedForPlot();
                }

                /**
                * The getTabXYData() method builds up the xyDataSet by loading values from a given csv file and the 
                * attributes chosen by the user to plot
                */
                countPlotPoints += getTabXYData(xyDataSet, tabIndex, optionList, jTabbedPane_results.getTitleAt(tabIndex));
            } finally {
                checkBoxList = null;
                optionList = null;
            }
        }

        System.out.println("Plot Points In This Graph: "+countPlotPoints);

        if (countPlotPoints == 0) {
            print("No options selected.\n");
            JOptionPane.showMessageDialog(this, "No Plot Points Were Selected!", "Warning", JOptionPane.WARNING_MESSAGE);
            return;
        }

        JFreeChart chart = ChartFactory.createXYLineChart(plotTitle, "time(ms)", "---", xyDataSet, PlotOrientation.VERTICAL, true, true, false);
        XYPlot plot = (XYPlot) chart.getPlot();
        XYLineAndShapeRenderer renderer = new XYLineAndShapeRenderer();

        for (int i = 0; i < countPlotPoints; i++) {
            if (dotOnly) {
                renderer.setSeriesLinesVisible(i, false);
            } else {
                renderer.setSeriesLinesVisible(i, true);
            }
            renderer.setSeriesShapesVisible(i, true);
        }
        plot.setRenderer(renderer);

        ChartPanel chartpanel = new ChartPanel(chart);
        chartpanel.setDefaultDirectoryForSaveAs(new File(lastAnalyzedPath));

        JFrame frame = new JFrame();
        frame.setTitle(plotTitle);
        frame.add(new JScrollPane(chartpanel));
        frame.pack();
        frame.setVisible(true);

        frame.addWindowListener(new java.awt.event.WindowAdapter() {
            @Override
            public  void windowClosing(java.awt.event.WindowEvent evt) {
                try {
                    System.out.println(":: Clearning Memory ::");
                    System.out.println("\tFree Memory (Before cleanup): "+Runtime.getRuntime().freeMemory());
                    Component component = getComponent(0);
                    if(component instanceof ChartPanel){
                        JFreeChart chart = ((ChartPanel) component).getChart();
                        XYPlot plot = (XYPlot) chart.getPlot();
                        plot        = null;
                        chart       = null;
                        component   = null;
                    }
                } finally {
                    System.runFinalization();
                    System.gc();
                    System.out.println("\tFree Memory (Post cleanup): "+Runtime.getRuntime().freeMemory());
                }
            }
        });

    } finally {
        xyDataSet = null;
        System.runFinalization();
        System.gc();
    }
} 
```

由于这个庞大的数据集，绘图需要大量时间来加载，并且尝试更改绘图窗口的大小会引发 OutOfMemoryError 并且应用程序崩溃。

我想知道的是提高性能的建议。这是我的想法（对此的任何评论/建议/反馈将不胜感激）：

1.  将用户限制在要绘制的特定范围内。问题是我不知道 JFreeChart 可以处理多少数据。对此有何建议？我最好不想使用幻数或试错法。

2.  使用可滚动的 XYDataSet。我对此很陌生，对实施没有太多了解。任何示例代码和有关使用此技术的功效的评论都将受到高度赞赏。

我愿意探索新的想法。请让我知道你对这个问题的看法。非常感谢提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:50:57.050

对于~10 ^(6 个)数据点，[`FastScatterPlot`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/FastScatterPlot.html)是一个不错的选择。对于更大的数字，您必须进行测试。为了速度，它使用内部[`render()`](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/plot/FastScatterPlot.html#line.583)方法，而不是插件渲染器。还可以考虑`SwingWorker`在读取数据时使用 a 以增量方式更新图表。

# ruby-on-rails - Rails：始终使用“:dependent => :destroy?”的好习惯

> ID：11295541
> 
> 赞同：4
> 
> 时间：2012-07-02T14:19:50.803
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, associations

我最近遇到了一个实例，我从数据库中删除了一个用户，但是帖子的索引页面损坏了，因为写特定帖子的用户不再存在。

这让我想知道总是使用 :dependent => :destroy 是否是一种好习惯？或者是否有一个不那么复杂的替代解决方案来在删除用户时不使整个分页符？我想这更像是一个商业决策，但我认为当用户删除他的帐户时，我不一定要删除所有内容。

我想我可以使用类似的东西

```
<%= link_to post.author.username unless post.author.blank? ...... %> 
```

但这将使它成为一项非常乏味和混乱的任务，必须将其包含在每一行中。

关于这个问题的任何建议/提示？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T14:32:10.117

而不是删除用户停用用户，这样您就不会破坏任何关系并且您的数据将保持一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T14:57:37.627

您必须使用`dependent: :destroy`（或`dependent: :delete`）或使用列软删除您的用户`deleted_at`，然后确定用户范围以检索未删除的用户。

您可以编写一个`SoftDeletable`模块并将其包含在您想要软删除的任何模型中，或使用以下其中一种宝石：[https](https://www.ruby-toolbox.com/categories/Active_Record_Soft_Delete) ://www.ruby-toolbox.com/categories/Active_Record_Soft_Delete 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T15:41:51.017

我认为有不止一种可能性。但这取决于你想要什么。

我不喜欢存储我的个人数据并且在我希望他们删除它时不要删除它的网站。

如果用户同意保留他的数据，您可以将 deleted_at 属性设置为 true。如果用户对此不满意，请删除他的个人资料和评论。

此外，您可以覆盖用户名的 getter 属性，以获得已删除用户的标准名称：

```
# author.rb
def username
  return read_attribute :username if deleted_at.blank?
  "unnamed"
end 
```

# ocaml - 擦除类型参数

> ID：11295544
> 
> 赞同：1
> 
> 时间：2012-07-02T14:20:09.137
> 
> 标签：ocaml, phantom-types

我有一个模块 Socket 使用幻像类型来强制执行一些简单的访问控制：

```
module Socket : sig
  type 'a t

  val ro : string -> [ `Read ] t
  val rw : string -> [ `Read | `Write ] t
end 
```

我想将 Socket.t 包装在 Container.t 记录中，但是有没有办法**不**将幻像类型参数也传播到 Container.t 中？

```
module Container : sig
  type 'a t =
  {     
  owner: string;
  socket: 'a Socket.t;
  }     
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T22:08:28.380

通常，您可能会使用存在类型来忘记某些类型参数：`'a foo`您使用的不是 type ，而是`exists_foo`包含 type 的值`'a foo`，对于某些`'a`您不知道的。有几种方法可以在 OCaml 中构建存在类型（多态记录或一流模块）。

在幻像类型的情况下，您可以通过您的接口提供一种方法，将任何套接字转换为忘记其先前功能的“无类型套接字”。

```
type untyped

module Socket : sig
  type 'a t

  val ro : string -> [ `Read ] t
  val rw : string -> [ `Read | `Write ] t
  val untyped : 'a t -> untyped t
end = struct
  type 'a t = string
  let ro s = s
  let rw s = s
  let untyped s = s
end

type t = { owner : string; socket : untyped Socket.t }

let test = {
  owner = "foo";
  socket = Socket.(untyped (ro "bar"))
} 
```

当然，您必须为无类型套接字选择什么是可能的，您不再知道它是如何打开的。也许这不是你的想法？

您还可以将套接字保持为 sum 类型，以保留对其功能的了解：

```
module Socket : sig
  type 'a t
  val ro : string -> [ `Read ] t
  val rw : string -> [ `Read | `Write ] t

  val read : [> `Read ] t -> unit
  val write : [> `Write ] t -> unit
end = struct
  type 'a t = string
  let ro s = s
  let rw s = s
  let read _ = ()
  let write _ = ()
end

type some_socket =
  | Ro of [ `Read ] Socket.t
  | Rw of [ `Read | `Write ] Socket.t

type t = { owner : string; socket : some_socket }

let test = {
  owner = "foo";
  socket = Ro (Socket.ro "bar")
}

let write container = match container.socket with
  | Ro _ -> failwith "write not allowed"
  | Rw s -> Socket.write s 
```

最后，还有另一种实现第一个解决方案的方法：`untyped`您可以允许对 Socket 类型的值进行子类型化，而不是使用顶级类型。为此，您需要在界面中指定`Socket.t`类型的方差：它是不变的 ( `'a t`)、协变的 ( `+'a t`) 还是逆变的 ( `-'a t`)？

如果您的心智模型是具有更多案例的幻影变体类型“更有能力”，那么子类型应该从具有某些案例的变体变为具有较少案例的变体，这是一种较小的类型：具有`a t`≤`b t`一个应该具有`a`≥ `b`(`a`有更多案例）：`t`应该是逆变的。

```
module Socket : sig
  type -'a t
  val ro : string -> [ `Read ] t
  val rw : string -> [ `Read | `Write ] t

  val read : [> `Read ] t -> unit
  val write : [> `Write ] t -> unit
end = struct
  type 'a t = string
  let ro s = s
  let rw s = s
  let read _ = ()
  let write _ = ()
end

type t = { owner : string; socket : [ `Read ] Socket.t }

let test = {
  owner = "foo";
  socket = (Socket.rw "bar" :> [ `Read ] Socket.t)
} 
```

请注意显式`(socket :> [ `Read ]) Socket.t`转换为较小的套接字类型。

# azure - Windows Azure 上的初始“未找到 OpenID 端点”

> ID：11295545
> 
> 赞同：1
> 
> 时间：2012-07-02T14:20:20.220
> 
> 标签：azure, openid, dotnetopenauth

我已经查看了有关该主题的各种问题，但没有一个完全适合我遇到的问题。

我开发了一个 MVC4 应用程序，它利用 DNOA 调用特定的提供程序（Intuit）。一切都在我的本地 IIS（测试）上完美运行，但是当我部署到 Windows Azure 时，我得到了众所周知的美妙的“奇怪的、间歇性的”行为。具体来说，99% 的情况下，初始登录请求会导致“No OpenID Endpoint Found”错误；但是，后续登录顺利进行。

我添加了此处提到的代码：[ServiceManagerCode](https://stackoverflow.com/questions/10969426/no-openid-endpoint-found-on-azure-website)，但无济于事。我检查过 OpenID URL 是正确的。我还尝试添加 log4net 以查看可能发生的情况但无法正确执行此操作，其他一些答案似乎表明这无论如何都不会返回。我也问过 Intuit，但到目前为止，没有任何回应。

再说一次，如果这不是在第一次尝试时发生的，那么将会有许多相关的帖子，但是由于这种特殊的行为，我警惕浪费过多的时间在疯狂的追逐上。

任何建议，无论多么轻微，都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:37:20.657

既然您说您的 Azure 依赖方在第一次尝试失败*后*可靠地工作，也许您可​​以通过让您的 Azure Web 角色中的 app_start 事件调用 DotNetOpenAuth 的`OpenIdRelyingParty.CreateRequest`方法来解决它，而不对其结果做任何事情，只是为了“启动泵”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:47:43.053

我不熟悉 OpenID。您是否也在 Windows Azure 中托管 OpenID 登录服务？请确保登录服务已启动且没有任何问题，建议之一是检查联合配置。大多数联合提供程序要求您配置领域并返回 URL。如果它们没有正确配置，应用程序将无法运行。

此致，

明旭。

# lines - 如何从不规则数据中生成特定值的等值线（等高线）？

> ID：11295548
> 
> 赞同：2
> 
> 时间：2012-07-02T14:20:36.640
> 
> 标签：lines, contour, delaunay

我有一组带有（X，Y，Z）坐标的样本点。我使用 Delaunay Triangulation 从它们生成不规则网络，然后我使用线性插值以固定值（例如 90、95、100、105）绘制等高线。问题是我需要用另一种算法生成平滑的轮廓线。我已经搜索了一段时间，发现我需要使用像克里金这样的东西，但我不太擅长数学来从纯数学关系中实现算法。此外，我似乎无法在任何地方找到该算法的实现或解释。谁能帮我找一个？另外，我对所选算法是否正确？还有其他更容易实现的吗？请注意，我不关心精度。

[https://dl.dropbox.com/u/15926260/ex.png](https://dl.dropbox.com/u/15926260/ex.png)

PS 我已经在 Surfer 中绘制了一个图，显示了我正在寻找的结果。右侧是我使用三角剖分和线性插值所做的，左侧是我需要使用不同算法绘制的（在 Surfer 中使用了克里金法）。抱歉拼写错误，但我不是母语人士。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-27T13:34:20.687

您可以尝试常规（加权）delaunay 三角剖分。在加权 delaunay 三角剖分中，三角形面积更均等。IMO 克里金算法似乎也能产生更均匀的轮廓。加权 delaunay 三角剖分也用于制作更平滑的网格。

# python - python pexpect sendcontrol 关键字符

> ID：11295550
> 
> 赞同：6
> 
> 时间：2012-07-02T14:20:42.013
> 
> 标签：python, key, character, pexpect

我正在使用 pythons pexpect 模块来自动执行任务，我需要帮助来确定要与 sendcontrol 一起使用的关键字符。怎么能发送控制键 ENTER ？以及如何找到关键字符以供将来参考？

这是我正在处理的代码。

```
#!/usr/bin/env python

import pexpect

id = pexpect.spawn ('ftp 192.168.3.140')

id.expect_exact('Name')

id.sendline ('anonymous')

id.expect_exact ('Password')
*# Not sure how to send the enter control key
id.sendcontrol ('???')* 

id.expect_exact ('ftp')

id.sendline ('dir')

id.expect_exact ('ftp')

lines = id.before.split ('\n')

for line in lines :
        print line 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-02T19:08:16.127

**pexpect**没有`sendcontrol()`方法。在您的示例中，您似乎试图发送一个空行。为此，请使用：

```
 id.sendline('') 
```

如果您需要发送真正的控制字符，那么您可以`send()`使用包含适当字符值的字符串。例如，要发送一个 control-C，您将：

```
 id.send('\003') 
```

或者：

```
 id.send(chr(3)) 
```

*对评论 #2 的回应：*

抱歉，我打错了模块名称 - 现在已修复。更重要的是，我查看的是 noah.org 上的旧文档，而不是[SourceForge 上的最新文档](http://pexpect.sourceforge.net/pexpect.html)。较新的文档确实显示了一种`sendcontrol()`方法。它接受的参数可以是字母（例如，`sendcontrol('c')`发送 control-C），也可以是表示不对应字母的控制字符的各种标点符号之一。但实际上`sendcontrol()`只是该`send()`方法的一个方便包装，它是`sendcontrol()`在计算出您要发送的实际值之后调用的。您可以在[此文件的第 973 行自行](http://pexpect.svn.sourceforge.net/viewvc/pexpect/trunk/pexpect/pexpect.py?revision=521&view=markup)阅读源代码。

我不明白为什么`id.sendline('')`不起作用，尤其是考虑到它显然可以将用户名发送到生成的**ftp**程序。如果您想尝试使用`sendcontrol()`，那么可以是：

```
 id.sendcontrol('j') 
```

发送换行符（control-j 或十进制 10）或：

```
 id.sendcontrol('m') 
```

发送回车（控制-m，或十进制 13）。

如果这些不起作用，请准确解释发生了什么，以及这与您想要或预期发生的情况有何不同。

# edifact - 是否有一种非常简单的方法来处理 EDIFACT，例如 D96A？

> ID：11295551
> 
> 赞同：8
> 
> 时间：2012-07-02T14:20:42.713
> 
> 标签：edifact

我们是一家使用现代技术（如 XML 接口）的现代公司，但我们的许多客户都希望我们提供 EDIFACT 格式（如 D96A）的电子发票。

不，我们不能使用现有的库，因为它们不是用我们的 Navision 软件使用的 C/AL 编程语言编写的。

因此，为了在 C/AL 中解析它，我需要了解它的规范。但它看起来非常困难和复杂。

那么有人可以给我一个概述如何解释说 D96A 以及如何解析它吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T13:22:55.590

解析EDIFACT其实没那么复杂。只需在语法字符处拆分：首先在`'`获取段，然后在获取该段的`+`数据元素，然后在`:`获取各个组件。当然，您需要处理转义的分隔符。这里使用的字符只是默认值，它们可以在消息的开头通过可选的 UNA 段进行更改。实际上，关于 EDIFACT 的[维基百科文章](http://en.wikipedia.org/wiki/EDIFACT)对此进行了很好的（但简短的）介绍。并且该格式在[联合国的 UNECE 网站](http://www.unece.org/trade/untdid/texts/unredi.htm)上有详细记录（是的，这很多而且难以阅读）。

棘手的部分是从中获取信息并进入您的应用程序（并验证它是否有效，更不用说创建好的错误消息了）。如果你真的打算用任何语言从无到有地编写一个完整的解析器，那么：不，没有简单的方法可以做到这一点。也没有任何其他灵活的数据表示。这*是*一项艰巨的任务，而且永远都是。

但这里有一个想法：如果您对 XML 感兴趣（或任何其他“现代技术”，您喜欢称之为......）。编写一些将 EDIFACT 消息转换为某种统一的 XML-EDIFACT-Format 的程序将是一项相对容易的任务（这是一件非常可怕的事情，很可能会吓到我）。您可以将每个 EDIFACT 段转换为一个 XML 标记，可能像这样：

```
ERC+A7V:1:AMD'
IFT+3+NO MORE FLIGHTS' 
```

在 XML 中：

```
<segment qualifier="ERC">
    <element>
        <component>A7V</component>
        <component>1</component>
        <component>AMD<component>
    </element>
</segment>
<segment qualifier="IFT">
   <element>
       <component>3</component>
   </element>
   <element>
       <component>NO MORE FLIGHTS</component>
   </element>
</segment> 
```

然后，您可以释放您的 XML 工具和库的力量来验证/评估它。

您还可以更具体地执行此操作，如下所示：

```
<segment_ERC>
    <element>
        <component>A7V</component>
        <component>1</component>
        <component>AMD<component>
    </element>
</segment_ERC>
<segment_IFT>
   <element>
       <component>3</component>
   </element>
   <element>
       <component>NO MORE FLIGHTS</component>
   </element>
</segment_IFT> 
```

这可以使通过 XSD 的验证更容易。当然，您可以通过此对话获得尽可能具体的信息，但是您迟早会遇到一个问题，即您需要将有关当前已解析消息结构的信息放入转换器中（因为这并非易事知道哪些段嵌套到对它们进行分组的其他段中。不仅有`UNG`,`UNH`等，还有一些您不直接看到的段组）。

尽管如此，根据您应该作为文档获得的 EDIFACT 手册，您仍必须为收到的消息创建特定的评估程序/模式/任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T04:32:10.450

我建议通过 GitHub 或 SourceForge repos 搜索和阅读。使用关键字快速搜索：+EDIFACT +D96A 提供了几个库可供选择。实际上，这对您的情况很有希望：

*   Bots 开源 edi 翻译器，[http://sourceforge.net/projects/bots/](http://sourceforge.net/projects/bots/)。项目的描述说它是 EDI（电子数据交换）的完整翻译器。

您可以随时评估和查看 Oracle B2B 11g，它是 Oracle SOA Suite 11gR1 的一部分：- [http://www.oracle.com/technetwork/middleware/soasuite/downloads/downloads-085394.html#11g](http://www.oracle.com/technetwork/middleware/soasuite/downloads/downloads-085394.html#11g)。它有 UN/EDIFACT OTD 库，我猜您至少可以将其用于解析。

通常，您最好的选择是选择现有的库并将其移植到 NAV 或通过外部接口使用，数据流入您的 NAV 数据库。如果您能够调用 .NET 代码，那么应该存在大量现有库，并且只需引用程序集即可。因为我不熟悉 NAV 开发，但无论您的数据传输对象调用机制是什么，都应该使用某种 REST/JSON - 您的组件 B 完成繁重的工作，而您的 NAV 组件通过您的XML 接口。

还有另一个类似的问题和几个答案也可能适合您： [Java 中有没有好的开源 EDIFACT 解析器？](https://stackoverflow.com/questions/2794262/is-there-any-good-open-source-edifact-parser-in-java).

[edifact](/questions/tagged/edifact "显示标记为“编辑”的问题") [navision](/questions/tagged/navision "显示标记为“navision”的问题") [x12](/questions/tagged/x12 "显示标记为“x12”的问题") [xml](/questions/tagged/xml "显示标记为“xml”的问题") [edi](/questions/tagged/edi "显示标记为“edi”的问题") [d96a](/questions/tagged/d96a "显示标记为“d96a”的问题")

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-08T12:45:08.490

我知道这个问题比较老，但我不得不为客户的项目做一些研究。Dynamics NAV 有几个不错的附加组件。例如，看看[Anveo EDI Connect](http://www.anveonav.com/dynamics-nav-edi-x12-edifact/)，他们直接在 NAV 中实现了 EDIFACT（以及更多格式）的导入和导出。BMI、Yaveon、Lanham 和其他几家公司提供其他解决方案。还有几个服务提供商处理数据，您同意他们对简单的 XML 或基于文件的结构的看法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-26T11:50:47.390

我偶尔会使用 Talend Open Studio(TOS)，它是一个功能丰富的 ETL 工具，可让您直观地构建数据转换作业。然后，当一切正常时，您可以将作业导出为 .bat 或 .sh 文件。很酷的是这个工具支持开箱即用的 EDIFACT。因此，您可以构建一个批处理文件，将 EDI 文件名作为参数并生成您定义的任何输出。

[https://help.talend.com/reader/hCrOzogIwKfuR3mPf~LydA/1qBCcoArBu0cDLAgdrMyMA](https://help.talend.com/reader/hCrOzogIwKfuR3mPf~LydA/1qBCcoArBu0cDLAgdrMyMA)

# javascript - 如何为文件上传禁用 Express BodyParser (Node.js)

> ID：11295554
> 
> 赞同：61
> 
> 时间：2012-07-02T14:20:54.203
> 
> 标签：javascript, node.js, file-upload, express, connect

这似乎应该是一个相当简单的问题，但我很难弄清楚如何解决它。

我正在使用 Node.js + Express 构建一个 Web 应用程序，我发现 express 暴露的连接 BodyParser 在大多数情况下非常有用。但是，我希望在多部分表单数据 POSTS 出现时对其进行更精细的访问——我需要将输入流通过管道传输到另一台服务器，并且希望避免先下载整个文件。

但是，因为我使用的是 Express BodyParser，所以所有文件上传都会自动解析并使用“request.files”上传并可用，然后才能使用我的任何功能。

有没有办法让我禁用多部分表单数据帖子的 BodyParser 而不会为其他所有内容禁用它？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-02T15:47:35.707

如果您需要使用由提供的功能`express.bodyParser`但又想为 multipart/form-data 禁用它，诀窍是不要使用`express.bodyParser directly`. `express.bodyParser`是一种方便的方法，它包装了其他三种方法：`express.json`、`express.urlencoded`和`express.multipart`.

所以而不是说

```
app.use(express.bodyParser()) 
```

你只需要说

```
app.use(express.json())
   .use(express.urlencoded()) 
```

这为您提供了 bodyparser 对大多数数据的所有好处，同时允许您独立处理表单数据上传。

**编辑：** 现在不再与 Express 捆绑在一起`json`。`urlencoded`它们由单独的[body-parser](https://github.com/expressjs/body-parser)模块提供，您现在可以按如下方式使用它们：

```
bodyParser = require("body-parser")
app.use(bodyParser.json())
   .use(bodyParser.urlencoded()) 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-04T00:34:23.627

如果对正文解析的需求仅取决于路由本身，最简单的方法是`bodyParser`仅在需要它的路由上用作路由中间件功能，而不是在应用程序范围内使用它：

```
var express=require('express');
var app=express.createServer();
app.post('/body', express.bodyParser(), function(req, res) {
    res.send(typeof(req.body), {'Content-Type': 'text/plain'});
});
app.post('/nobody', function(req, res) {
    res.send(typeof(req.body), {'Content-Type': 'text/plain'});
});
app.listen(2484); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-07-04T15:40:46.403

当您键入时`app.use(express.bodyParser())`，几乎每个请求都会通过`bodyParser`函数（将执行哪个函数取决于`Content-Type`标头）。

默认情况下，支持 3 个标头 (AFAIR)。您可以确定来源。您可以（重新）定义`Content-Type`s 的处理程序，如下所示：

```
var express = require('express');
var bodyParser = express.bodyParser;

// redefine handler for Content-Type: multipart/form-data
bodyParser.parse('multipart/form-data') = function(req, options, next) {
  // parse request body your way; example of such action:
  // https://github.com/senchalabs/connect/blob/master/lib/middleware/multipart.js

  // for your needs it will probably be this:
  next();
} 
```

* * *

**更新。**

Express 3 中的情况发生了变化，因此我正在共享工作项目中的更新代码（应该在*之前*`app.use`编辑）： *`express.bodyParser()`*

 *```
var connectUtils = require('express/node_modules/connect/lib/utils');

/**
 * Parses body and puts it to `request.rawBody`.
 * @param  {Array|String} contentTypes Value(s) of Content-Type header for which
                                       parser will be applied.
 * @return {Function}                  Express Middleware
 */
module.exports = function(contentTypes) {
  contentTypes = Array.isArray(contentTypes) ? contentTypes
                                             : [contentTypes];
  return function (req, res, next) {
    if (req._body)
      return next();

    req.body = req.body || {};

    if (!connectUtils.hasBody(req))
      return next();

    if (-1 === contentTypes.indexOf(req.header('content-type')))
      return next();

    req.setEncoding('utf8');  // Reconsider this line!
    req._body   = true;       // Mark as parsed for other body parsers.
    req.rawBody = '';

    req.on('data', function (chunk) {
      req.rawBody += chunk;
    });

    req.on('end', next);
  };
}; 
```

还有一些伪代码，关于原始问题：

```
function disableParserForContentType(req, res, next) {
  if (req.contentType in options.contentTypes) {
    req._body = true;
    next();
  }
} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-03-27T16:17:51.147

在 Express 3 中，您可以将参数传递给`bodyParser`as `{defer: true}`- 这在术语上会延迟多部分处理并将 Formidable 表单对象公开为 req.form。这意味着您的代码可以是：

```
...
app.use(express.bodyParser({defer: true}));

...
// your upload handling request 
app.post('/upload', function(req, res)) {
    var incomingForm = req.form  // it is Formidable form object

    incomingForm.on('error', function(err){

          console.log(error);  //handle the error

    })

    incomingForm.on('fileBegin', function(name, file){

         // do your things here when upload starts
    })

    incomingForm.on('end', function(){

         // do stuff after file upload
    });

    // Main entry for parsing the files
    // needed to start Formidables activity
    incomingForm.parse(req, function(err, fields, files){

    })
} 
```

有关更详细的强大事件处理，请参阅[https://github.com/felixge/node-formidable](https://github.com/felixge/node-formidable)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-09T01:54:31.910

我在 3.1.1 中遇到了类似的问题，并找到了（不太漂亮的 IMO）解决方案：

为 multipart/form-data 禁用 bodyParser：

```
var bodyParser = express.bodyParser();
app.use(function(req,res,next){
    if(req.get('content-type').indexOf('multipart/form-data') === 0)return next();
    bodyParser(req,res,next);
}); 
```

并用于解析内容：

```
app.all('/:token?/:collection',function(req,res,next){
    if(req.get('content-type').indexOf('multipart/form-data') !== 0)return next();
    if(req.method != 'POST' && req.method != 'PUT')return next();
    //...use your custom code here
}); 
```

例如，我正在使用 node-multiparty ，其中自定义代码应如下所示：

```
 var form = new multiparty.Form();

    form.on('file',function(name,file){
       //...per file event handling
    });     

    form.parse(req, function(err, fields, files) {
       //...next();
    }); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-04-12T06:28:52.757

使用 express v4 和 body-parser v1.17 及更高版本，
您可以在`type`bodyParser.json 中传递一个函数。
body-parser 将仅解析此函数返回真实值的那些输入。

```
app.use(bodyParser.json({
    type: function(req) {
        return req.get('content-type').indexOf('multipart/form-data') !== 0;
    },
})); 
```

在上面的代码中，如果is ，
该函数将返回一个假值。 因此，它不会在is时解析数据。`content-type``multipart/form-data`
`content-type``multipart/form-data`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-04T05:11:24.787

扔这是在 app.configure 之前

```
delete express.bodyParser.parse['multipart/form-data']; 
```*

# mismatch - CFHTTP 如何忽略证书名称错误

> ID：11295555
> 
> 赞同：3
> 
> 时间：2012-07-02T14:20:54.437
> 
> 标签：mismatch, cfhttp

我正在尝试通过 ColdFusion 使用基于 HTTPS 的 SOAP WebService，但它返回“连接失败”。

在转储结果变量时，它显示：

**错误详细信息：** “I/O 异常：证书 'subdomain1.domain.com' 中的名称与主机名 'subdomain2.domain.com' 不匹配”

如果我在浏览器中浏览 HTTPS wsdl，我可以忽略此类警告，但问题是；如何使用 <CFHTTP> 绕过此警告？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:28:35.290

更好的解决方案是拥有服务的主机。为该子域获取适当的 SSL 证书或通配符证书，这将允许他们使用单个证书拥有尽可能多的子域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T05:01:30.810

我也一直在寻找解决方案（一家著名的支付网关提供商在他们的服务器上存在 SSL 问题，我必须解决）。我想出的一种解决方案是将一个条目放入服务器的主机文件中，并将其设置为 SSL 证书使用的主机名的 IP 地址。幸运的是，他们的网络服务器只接受基于 IP 而不是主机名的连接，所以我能够欺骗我的服务器，让我认为我正在连接到 SSL 证书中发布的“正确”主机名，并覆盖公共 DNS 中该主机名的 IP . 不过，一种告诉 Java 名称不匹配是“好的”的方法会很好。

# c++ - 添加另一个类 ListViewItemEventListener

> ID：11295559
> 
> 赞同：0
> 
> 时间：2012-07-02T14:21:15.733
> 
> 标签：c++, addeventlistener, bada

我正在尝试将我在名为 Main 的类中的 ListViewItemEventListener 添加到名为 Search 的类中，以便我可以处理同一侦听器中的类的事件。但我不知道我怎样才能实现这个目标，或者是否有可能？

这当然有效：

```
__pList->AddListViewItemEventListener(*this); 
```

但随后它将使用 Search 类的侦听器。我想要类似的东西：

```
__pList->AddListViewItemEventListener(Main ListViewItemEventListener); 
```

希望有人知道如何做到这一点。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:32:54.260

Main 和 Search 不是彼此的子类，是吗？

这是可能的。在您的搜索中，保留指向 Main 实例的指针，并将其指定为列表的侦听器。

如果你这样做，从 IListViewItemEventListener 派生的 Main 应该是公开的：

```
 class Main: ..., public IListViewItemEventListener 
```

否则将不允许将a 强制转换`Main`为 a ，除非在 Main 自己的成员函数内部。`IListViewItemEventListener`

然后继续阅读 C++ 的基础知识。看起来您对类和对象之间的基本关系感到困惑。您的问题没有具体的问题。

# objective-c - 访问其他类的属性

> ID：11295560
> 
> 赞同：0
> 
> 时间：2012-07-02T14:21:15.697
> 
> 标签：objective-c, properties

我有一个 UIViewController，它有三个视图：类别 -> 子类别 -> 详细视图。子类别和详细视图的内容取决于在类别视图中单击了哪一行。这是通过一个名为“categoryClicked”的属性完成的，并在 sub-category.m 文件中声明。它的值在 category.m 文件中由以下代码行给出。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    Sub-category *sub = [[Sub-category alloc] initWithNibName:@"Sub-category" bundle:nil];

    sub.categoryClicked = [_categoryArray objectAtIndex:indexPath.row];
    [self.navigationController pushViewController:rubrieken animated:YES];

} 
```

这工作得很好，直到我想在详细视图中使用 categoryClicked 的值。在 category.m 和 DetailView.m 中都导入了 sub-category.m。出于测试目的，我在 Detail View 上放置了一个标签，在 DetailView.m 文件中我有以下代码：

```
Sub-category *sub = [[Sub-category alloc] initWithNibName:@"Sub-category" bundle:nil];

label.text = sub.categoryClicked; 
```

我确信这段代码应该可以完成这项工作，但实际上我得到了一个空标签。有没有人能告诉我我做错了什么。

**编辑**
categoryClicked 是在 Sub-category.h 中声明并在 Sub-category.m 中合成的属性。想发布更多代码，但没有更多相关代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:04:39.427

当你`alloc`是一个对象时，你正在为它分配内存空间。然后，当您使用带有`init`(like `initWithNibName`) 的东西时，您正在初始化它。因此，当您为其分配内存空间`sub`并对其进行初始化时，您将拥有一个对象。但是然后你`alloc`又一次`init`，它创建了一个全新的（并且完全不相关的）对象。确保删除任何可能破坏旧对象的东西。

此外，该`*`符号表示它`sub`是一个指针（它指向一个内存位置）。每当您使用赋值运算符 ( `=`) 时，您就是在告诉它指向一个新事物。您正在做的是告诉`label.text`指针指向`sub`所指向的内容。但是，如果您更改`sub`指向的内容并指向`label.text`同一事物，则两者都不会指向您想要的值。

希望这足够清楚，如果它不尝试发布更多代码，也许有人可以建议确切的更改。

**-编辑-**

如果你想引用一个对象，你只能通过几种方式获得它。重要的是要知道，您不能真正“创建”对现有对象的引用。您必须与对象有某种联系。

*   在文件中声明要引用的对象，例如`Category c = [[Category alloc] init];`记住这会创建一个新对象，它不会创建对现有对象的引用。但是，在另一个对象内部创建对象意味着一个“拥有”另一个对象，并且可以对它做任何想做的事情（显然包括访问属性和调用方法）。
*   使用对象的“链”来获取对对象的引用。因此，如果您的文件拥有一个拥有您想要的对象的文件，您可以使用`topfile.otherfile.objectyouwant`. 最明显的例子是获取对子视图拥有的对象的引用。

这是最基本的。请记住，没有任何“全局”对象可以通过名称调用。如果您的问题不能由此解决，请查看一些示例代码并尝试了解引用的工作原理，或者发布另一个与您的问题更密切相关的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:27:08.073

这条线...

```
Sub-category *sub = [[Sub-category alloc] initWithNibName:@"Sub-category" bundle:nil]; 
```

...创建一个新的`Sub-category`. 由于它是新的，它不知道已将哪些信息提供给其他`Sub-category`对象。如果要访问现有对象的数据，则需要获取对现有对象的引用。

# android - ActionBarSherlock 的 NavigationMode 不会改变

> ID：11295563
> 
> 赞同：1
> 
> 时间：2012-07-02T14:21:29.663
> 
> 标签：android, actionbarsherlock

我有一个使用 ActionBarSherlock 的应用程序。在一个活动中，我有两个片段（**Fragment1**和**Fragment2**）。在**Fragment1**我使用以下导航模式：

```
getSupportActionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST); 
```

在**Fragment2**中：

```
getSupportActionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD); 
```

当我从一个片段导航到另一个片段时，一切正常。

好吧，在**Fragment2**中，我实现了一个使用折叠操作的菜单选项，该选项调用 AutoCompleteTextView。当我单击 Fragment2 的此菜单选项**并**返回**Fragment1**时，即使将 Navigation Mode 从标准更改为列表，此更改也不会发生，并且 NavigationModeList 消失了。

这是一个错误吗？

# jquery - 只有前 3 个（共 7 个）锚定链接（使用 ID）在 Firefox 中有效（前往正确的位置）（在 Chrome 和 Safari 中都有效）

> ID：11295571
> 
> 赞同：0
> 
> 时间：2012-07-02T14:22:24.847
> 
> 标签：jquery, html, firefox, hyperlink, anchor

好的，我正在开发一个带有一个外部页面的滚动站点（使用 jQuery）。有了这个外部页面，就有返回滚动页面的导航链接。我`<div id="done">`在滚动页面的每个部分都添加了唯一 ID（例如 ），并在外部页面中的链接末尾添加了 # 锚点（例如`<a href="index-banners.html#done">What We've Done</a>`）。

这些适用于 Safari 和 Chrome。但只有前 3 个（从页面顶部向下）在 FF 中有效。其余的将我带到页面底部。

如果我键入带有# 扩展名的滚动页面的 URL 到其中一个在 FF 中不起作用的 ID，它会起作用并将我带到正确的位置。我已经尝试删除在工作锚点之后发生的 jQuery，但它们仍然无法工作。但是，删除一些`<ul>`jQuery 效果确实允许链接找到它们各自的点。这是一个观察，因为那些`<ul>`必须保留。

谁能告诉我为什么以及如何修复/解决方法？

这是测试页面的链接（[http://www.irishofcourse.co.cc/firebrand/index-banners.html](http://www.irishofcourse.co.cc/firebrand/index-banners.html)）。前往“我们做什么”，然后单击“了解更多”链接到外部页面，或直接进入外部页面（[http://www.irishofcourse.co.cc/firebrand/index-do.html](http://www.irishofcourse.co.cc/firebrand/index-do.html)） . 注意：“我们做了什么”、“案例研究”和“社交”的锚定链接不起作用。

本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:37:47.363

要进行锚链接，您需要`<a name="anchor">`“滚动”到链接并`<a href="#anchor">`作为链接。

# jquery - jQuery 上选择显示 div

> ID：11295573
> 
> 赞同：1
> 
> 时间：2012-07-02T14:22:28.310
> 
> 标签：jquery, html

我有一个关于 jQuery 的问题。如果用户在 html 中选择值为“0”的“Presmerovanie”，选择 id 为“typ”，我想显示 id 为“pres”的 div。这是代码：

```
<dl>
    <dt><label for="typ">Typ</label></dt>
    <dd>
    <select id="typ" size="1">
        <option value="1">Normálna</option>
        <option value="0">Presmerovanie</option>
    </select>
    </dd>
</dl>
<!-- Len ak je presmerovatelna -->
<div id="pres" style="display: none;">
    <dl>
        <dt><label for="presmerovat">Presmerovat na</label></dt>
        <dd>
        <select id="presmerovat" size="1">
            <option>Category 1</option>
            <option>Category 2</option>
        </select>
        </dd>
    </dl>
</div>
<!-- Koniec ak je presmerovatelna --> 
```

是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:26:04.027

```
$("#typ").on("change", function() {
    $("#pres").hide();

    if ( $(this).val() == '0' ) {
        $("#pres").show();
    } 
});​ 
```

[演示](http://jsfiddle.net/ta8wH/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:37:34.217

为了使其灵活，您可以将数据属性添加到下拉项：

```
<select id="typ" size="1">
    <option value="1" data-rel="norm">Normálna</option>
    <option value="0" data-rel="pres">Presmerovanie</option>
</select> 
```

然后绑定`change`事件并处理选择：

```
$(document).ready(function() {
    $("#typ").on("change", function() {
        $(this).find("option").each(function() {
            var rel = $(this).data("rel"); 
            if (rel && rel.length > 0) {
                var obj = $("#" + rel);
                if ($(this).is(":selected"))
                    obj.show();
                else
                    obj.hide();
            }
        });
    });

    //show initial item:
    $("#typ").change();
});​ 
```

这将仅显示所选项目的相关元素并隐藏所有其他元素。

[现场测试用例](http://jsfiddle.net/Tq7pr/1/)。

# c# - 如何在页面加载时知道页面上其他事件的视图状态是否清晰？

> ID：11295577
> 
> 赞同：0
> 
> 时间：2012-07-02T14:22:38.123
> 
> 标签：c#, asp.net

我面临一个奇怪的问题，我在页面加载时使用 ViewState 条件检查动态加载用户控件，如果为真则加载它，否则不加载。现在问题出在下拉选择的索引更改事件上，我将 NULL 设置为视图状态，但页面加载首先开始，它看到视图状态不为空，所以它再次加载控件，如何解决这个问题，请让知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:28:13.210

设置一个布尔值并将其保存在视图状态中？它不漂亮，但网络表单也不漂亮。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:27:49.837

为什么不在页面 PreRender 事件中加载用户控件。这应该可以解决您的问题。如果没有，请给出代码背后的页面。

# wpf - WPF Validation.HasError 在文本框上设置边距

> ID：11295578
> 
> 赞同：1
> 
> 时间：2012-07-02T14:22:39.277
> 
> 标签：wpf, validation, templates

我一直在尽一切努力解决这个问题。:(

对于文本框，我有一个 Validation.ErrorTemplate 设置，文本框右侧有一个图像，但它有一个验证错误。

这很好用！但我想做的一件事是调整有错误的文本框的大小或设置边距，使其适合文本框在表单上的空间。目前，图像在文本框区域之外流动。

我真正想要的是有错误的文本框占用与没有文本框相同的空间。

这是我的 XAML 风格：

```
<Style TargetType="{x:Type TextBox}">
<Style.Resources>
  <my:TextBoxWidthTransformConverter x:Key="TextBoxWidthTransformConverter"/>
</Style.Resources>
<Style.Triggers>
  <Trigger Property="Validation.HasError" Value="true">
    <Setter Property="Foreground" Value="Red"/>
    <Setter Property="Margin" Value="{Binding Converter={StaticResource TextBoxWidthTransformConverter}, RelativeSource={RelativeSource Self}}"/>
    <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent}"/>
  </Trigger>
</Style.Triggers>
<Setter Property="Validation.ErrorTemplate">
  <Setter.Value>
    <ControlTemplate>
      <StackPanel 
        Margin="{TemplateBinding Margin}"
        Orientation="Horizontal" 
        RenderOptions.BitmapScalingMode="NearestNeighbor"
        >              
        <AdornedElementPlaceholder 
          Grid.Column="1" 
          Grid.Row="1" 
          Name="controlWithError" 
          />
        <Border Width="2"/>
        <Image 
          ToolTip="{Binding ElementName=controlWithError, Path=AdornedElement.(Validation.Errors).CurrentItem.ErrorContent}" 
          Source="imagepath"
          />
      </StackPanel>
    </ControlTemplate>
  </Setter.Value>
</Setter> 
```

我正在使用转换器 TextBoxWidthTransformConverter 只是为了看看我是否可以发生一些事情，但在我只是在值中使用“0,0,20,0”之前，无济于事。转换器不会触发，保证金不会改变。我使用 Snoop 来查看是否可以看到被触摸或更改的属性，但没有任何反应。

Margin 是 Validation.HasError 属性无法更改的属性吗？

任何见解都会很棒！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:51:55.993

希望能帮助任何可能遇到这个问题的人。

我仍然不确定为什么 Margin 属性在 Validation.HasError 触发期间没有改变，但我发现了一个肮脏的工作。

解决方法使用 IValueConverter 劫持 Width 属性绑定与某些事件（用于清除事件的 TextChanged 和 Unloading）来设置 Margin。通过使用 TextBoxes Tag 属性，我保留了原始边距，就我而言，我只担心右边距。

```
public class TextBoxMarginConverter : IValueConverter
{
    private const double TEXTBOX_MARGIN_RIGHT = 25.0;

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
      if (value == null)
      {
        return double.NaN;
      }

      TextBox textBox = value as TextBox;

      if (textBox == null)
      {
        return double.NaN;
      }

      if (Validation.GetHasError(textBox))
      {
        this.SetTextBoxMargin(TEXTBOX_MARGIN_RIGHT, textBox);
      }

      return textBox.Width;
    }

    private void SetTextBoxMargin(double marginRight, TextBox textBox)
    {
      if (textBox.Tag == null)
      {
        textBox.TextChanged += new TextChangedEventHandler(this.TextBoxTextChanged);

        textBox.Unloaded += new RoutedEventHandler(this.TextBoxUnloaded);

        double right = textBox.Margin.Right + marginRight;

        textBox.Tag = textBox.Margin.Right;

        textBox.Margin = new Thickness(textBox.Margin.Left, textBox.Margin.Top, right, textBox.Margin.Bottom);
      }
    }

    private void TextBoxUnloaded(object sender, RoutedEventArgs e)
    {
      TextBox textBox = sender as TextBox;

      if (textBox == null)
      {
        return;
      }

      textBox.TextChanged -= new TextChangedEventHandler(this.TextBoxTextChanged);

      textBox.Unloaded -= new RoutedEventHandler(this.TextBoxUnloaded);
    }

    private void TextBoxTextChanged(object sender, TextChangedEventArgs e)
    {
      TextBox textBox = sender as TextBox;

      if (textBox == null)
      {
        return;
      }

      if (Validation.GetHasError(textBox))
      {
        this.SetTextBoxMargin(TEXTBOX_MARGIN_RIGHT, textBox);

        return;
      }

      if (textBox.Tag != null)
      {
        double tag;

        double.TryParse(textBox.Tag.ToString(), out tag);

        textBox.Tag = null;

        textBox.Margin = new Thickness(textBox.Margin.Left, textBox.Margin.Top, tag, textBox.Margin.Bottom);
      }
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
      throw new NotImplementedException();
    }
} 
```

在您的 Validation.ErrorTemplate 中，将转换器应用于 Validation.HasError 触发器：

```
<Style.Triggers>
  <Trigger Property="Validation.HasError" Value="true">
    <Setter Property="Width" Value="{Binding Converter={StaticResource TextBoxMarginConverter}, RelativeSource={RelativeSource Self}}"/>
    <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors).CurrentItem.ErrorContent}"/>
  </Trigger>
</Style.Triggers> 
```

# sql - 在 SQL Server 中创建版本化数据并查找版本之间的差异

> ID：11295580
> 
> 赞同：1
> 
> 时间：2012-07-02T14:22:40.790
> 
> 标签：sql, database, algorithm, tsql

我正在寻找一个好的数据库设计解决方案，以便轻松比较我的数据版本信息。请在下面查看我的场景（尽管我无法将实际场景放在我们的应用程序中 - 对此非常抱歉。）

## 样本数据：

```
Assembly
-----------
AssemblyId       AssemblyId
--------------------------
1        Assembly1
2        Assembly2

BOM
--------------------------
BOMId   AssemblyId       VersionName        ParentBOMId
-----------------------------------------------------
1           1           V001               NULL
2           1           V002               1
3           1           V003               2
4           1           V004               3
5           1           V005               2 
```

[每次更改 BOM 记录时，它都继承自任何先前版本 (ParentBOMID) - 如果它是程序集的第一个版本，则 ParentBOMID 为 Null]

```
BOMDetail
-----------
ID     BOMID       PartName       Qty  
---------------------------------------------------
1     1          Part1             2
2     1          Part2             1
3     1          Part3             2

4     2          Part1             2
5     2          Part2             1
6     2          Part4             2  {Change in PartName here in V002 Base Version V001}

7     3          Part1             2
8     3          Part2             1
9     3          Part4             2
10    3          Part5             9 {Added this part into V003 Base Version V002}

11    4          Part1             2
12    4          Part2             1
13    4          Part4             2
14    4          Part6             9 {this part changed into V004 Base Version V003}

15     5          Part1            2
16     5          Part2            1
17     5          Part9            2  {Change in PartName here in V002 Base Version V002} 
```

我需要相互比较不同的 BOM 版本。如果需要将 V001 与 V002 或 V004 与 V003 进行比较很容易，因为很容易获得 ParentBOMId 关系。但是对于从 V002 创建的 V005，如果有人想将 V004 与 V001 进行比较，这并不困难。

**PS 我无法为我必须使用的零件创建主表，仅比较零件名称。**

在版本控制频率非常高且父 >> 父 >> 父关系可能在层次结构中非常深入的情况下，任何人都可以建议我不同的数据库设计或简单的解决方案。

例如，我将 V001 与 V002 输出进行比较应该是

V001 第 1 部分 2 V002 第1 部分 2

V001 第 2 部分 1 V002 第2 部分 1

V001 第 3 部分 2 V002 空 0

V001 空 0 V002 第 4 部分 2

我应该能够相互比较任何版本并找到上述差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:14:59.877

对于类似的事情，我会使用两种基本方法......

```
SELECT
  *
FROM
  (SELECT * FROM BomDetail WHERE BomID = 1)     AS bom1
FULL OUTER JOIN
  (SELECT * FROM BomDetail WHERE BomID = 2)     AS bom2
    ON bom1.PartName = bom2.PartName

SELECT
  PartName,
  SUM(CASE WHEN BomID = 1 THEN qty ELSE 0 END)   AS bom1qty,
  SUM(CASE WHEN BomID = 2 THEN qty ELSE 0 END)   AS bom2qty
FROM
  BomDetail
WHERE
  BomID IN (1,2)
GROUP BY
  PartName 
```

虽然第二个更长，但它也不需要进行连接，因此在某些情况下可以更快。

# android - 谷歌地球喜欢 UI android

> ID：11295585
> 
> 赞同：0
> 
> 时间：2012-07-02T14:23:18.913
> 
> 标签：android

我想在Android App上使用google earth，因为动作真的很流畅，UI的吸引力。是否有任何框架或控件或 API 可用于在 Android 应用程序中集成像 UI 这样的谷歌地球。

我想显示一个特定的位置，我想放大/缩小到我想从特定缩放级别开始添加/显示标记的位置。

希望我能很好地描述我的问题。如果不清楚，我会解释更多。

请给我答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:07:15.920

虽然没有任何东西很像 Google 地球（主要是因为 Google 不提供适用于 Android 的地球），但 Maps API 提供了您正在寻找的相同功能。根据我上次将地图与地球进行比较时的记忆，您选择地球而不是地图的唯一原因是，如果您想要以最低缩放级别对地球进行 3-D 球面投影。

使用 Google Maps API 相当简单。跟着这些步骤。

1.  [注册一个 API 密钥](https://developers.google.com/maps/signup)。
2.  [使用您的 SDK 管理器下载 Google API](https://developers.google.com/android/add-ons/google-apis/installing)。
3.  ？？？
4.  利润！

# matlab - 多轴matlab

> ID：11295589
> 
> 赞同：0
> 
> 时间：2012-07-02T14:23:25.933
> 
> 标签：matlab, plot

我有三个变量：

第一个变量是：时间（datenum），第二个变量是：深度，第三个变量是：u（速度的x分量）

我需要用 x 轴将 u 绘制为时间，u 数据应该从那个深度开始。

我试着用这个：

```
x1 = time;
y1 = depth(:,1);
y2 = u(:,1);

plotyy(x1,y2,x1,y1); 
```

但我不想绘制深度，而是希望 u 数据从该深度值开始，但深度值应显示在第二个 y 轴上。因为我将再次更改深度矩阵并在同一个图上绘图。请注意，深度矩阵只是一个深度（1.20）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:32:52.693

如果我理解您在这里所说的话，您正在寻找沿 X 轴和沿 Y 轴的深度（您已经拥有）绘制时间。

但需要注意的是，您希望从变量“u”中的某个深度开始 Y 轴。

为此，您可能需要查看 matlab 中的[轴](http://www.mathworks.com/help/techdoc/ref/axis.html)命令：

这将允许您设置 Xmin、Xmax、Ymin 和 Ymax，并按您喜欢的方式缩放绘图。

# c++ - 64 位机器上的 stl 向量大小

> ID：11295590
> 
> 赞同：0
> 
> 时间：2012-07-02T14:23:28.630
> 
> 标签：c++, stl, vector

我有一个将使用数百万个向量的应用程序。

似乎 std::vector 的大多数实现都使用 4 个指针（_First、_Last、_End 和 _Alloc），这在 64 位机器上消耗 32 个字节。对于向量的大多数“实际”用例，可能会使用单个指针和两个“无符号整数”字段来分别存储当前大小和分配的大小。忽略支持自定义分配的潜在挑战（而不是假设分配必须通过全局 new & delete 运算符），似乎可以构建一个仅使用 16 个字节（或最坏 24 个字节）的 STL 兼容向量类支持 _Alloc 指针）。

在我开始编写代码之前，1) 是否有任何我应该注意的陷阱以及 2) 是否存在开源实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:31:19.273

你可以完成这样的事情——但你不可能获得那么多。

首先是性能方面。您正在用时间来换取内存消耗。无论您节省多少内存，每次调用时都必须进行加法和乘法运算`end`（好吧，如果它是一个`sizeof(vector<t>::value_type) == 1`可以优化乘法的向量）。请注意，大多数基于向量的手写循环代码`end`都会在每次循环迭代时调用。在现代 CPU 上，这实际上将是一个重大胜利，因为它允许处理器将更多的东西保存在缓存中；除非内部循环中的那几条额外指令迫使处理器过于频繁地交换指令缓存中的内容）

此外，就向量中的整体内存使用而言，内存节省可能很小，原因如下：

*   内存管理器开销。在大多数内存管理器实现中，来自内存管理器的每个分配（当然需要哪个向量）都会自行增加 16-24 字节的开销。（假设类似`dlmalloc`（UNIX/Linux/etc.）或`RtlHeap`（Windows））
*   过度配置负载。为了在最后实现分摊的常量插入和移除，当向量调整大小时，它会调整到向量中数据大小的某个倍数。这意味着分配的典型内存容量向量足够 1.6 (MSVC++) 或 2 (STLPort, libstdc++) 乘以实际存储在向量中的元素数量。
*   对齐限制。如果您将这些向量放入一个数组（或另一个向量）中，请记住该向量的第一个成员仍然是指向已分配内存块的指针。无论如何，这个指针通常需要 8 字节对齐——所以你保存的 4 个字节会丢失到数组中的结构填充中。

我现在会使用 vector 的简单实现。如果您通过内存分析器运行代码并发现摆脱这两个指针可以节省大量资金，那么您可能会实现自己的优化类来满足您的性能特征，而不是依赖于内置的矢量实现。（一个这样的优化类的例子是`std::string`在那些实现小字符串优化的平台上）

（注意：我知道的唯一优化`Alloc`指针的编译器是 VC11，它尚未发布。虽然 Nim 说当前的 libstdc++ 预发布版本也能做到这一点......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:36:09.720

除非这些向量的内容非常小，否则保存内容的 16 字节与 32 字节之间的差异将只是它们消耗的总内存的一小部分。重新发明这个轮子需要付出很多努力，因此请确保您为所有这些工作获得了足够的回报。

顺便说一句，教育也很有价值，通过这样做你会学到很多东西。如果您选择继续，您可能会考虑先编写一个测试套件，然后在当前实现上进行练习，然后在您发明的那个上进行练习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-17T11:49:20.317

要回答是否值得付出努力，请找到或编写适合*您*需求的兼容实现（也许 std::vector 中还有其他您不需要的东西），并将性能与`std::vector<your_type>`相关平台上的性能进行比较。您的建议至少可以提高移动构造函数以及移动赋值运算符的性能：

```
typedef int32_t v4si __attribute__ ((vector_size (16)));
union
    {
    v4si data;
    struct
        {
        T* pointer;
        uint32_t length;
        uint32_t capacity;
        } content;
    } m_data; 
```

这仅涵盖“理智” `T`（除了移动语义）。[https://godbolt.org/g/d5yU3o](https://godbolt.org/g/d5yU3o)

# asp.net - 如何在一定时间后隐藏自定义控件

> ID：11295591
> 
> 赞同：0
> 
> 时间：2012-07-02T14:23:37.973
> 
> 标签：asp.net, .net, custom-controls

我有一个自定义控件，它显示一些操作的结果。

它默认是隐藏的，并且在其他类的代码隐藏中可见。

现在我想在一段时间后隐藏它。我该怎么做？

**编辑：**

一些答案建议在自定义控件的末尾添加以下 javascript 块，如果在自定义控件上使用该块将不起作用`Visible="false"`。

但我没有说得足够清楚，所以接受了这个作为答案。
必须看看：[如何从代码隐藏调用javascript函数](https://stackoverflow.com/questions/4848678/how-to-call-javascript-function-from-code-behind)

如果使用超时函数，则正确调用`Visible="true"`。

ASPX：

```
<control id="customControl" runat="server" Visible="false"/> 
```

**如果`Visible="true"`在标记中使用解决方案：**

自定义控件 - ASPX：

```
<div id="body">
    <!-- custom control -->
</div>
<script type="text/javascript">     
    window.setTimeout(function() { document.getElementById('<%=Me.divBody.ClientID%>').style.display = 'none'; }, 2000);
</script> 
```

自定义控件 - 代码隐藏：

```
Me.customControl.Visible = True 
```

**如果`Visible="false"`在标记中使用解决方案：**
*从一开始脚本块不呈现，以后不自动添加。所以我们需要注册它。*

自定义控件 - ASPX：

```
<div id="divBody">
    <!-- custom control -->
</div>
<script type="text/javascript">     
    window.setTimeout(function(){ alert("test"); });         
</script> 
```

自定义控件 - 代码隐藏：

```
Me.customControl.Visible = True
Dim hideScript AS String = "window.setTimeout(function() { document.getElementById('" & Me.divBody.ClientID & "').style.display = 'none'; }, 2000);"
ScriptManager.RegisterClientScriptBlock(Me.Page, Me.GetType, "script", hideScript, True) 
```

来源： http: [//www.codeproject.com/Tips/85960/ASP-NET-Hide-Controls-after-number-of-seconds](http://www.codeproject.com/Tips/85960/ASP-NET-Hide-Controls-after-number-of-seconds)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:26:13.327

如果您在规定的时间范围之外，您可以在对象上拥有一个属性，当执行时将可见属性更改为 false，因此您将有一个可见的 from 和 until 字段，并与当前时间相比生成一个布尔值.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:28:46.733

您可能可以使用 javascript`setTimeout`函数执行一些代码来隐藏具有用户控件的 div 在一段时间后隐藏

```
<div id="divUserControlContainer">
 //put your user control embed code here
</div>

<script type="text/javascript">
$(function(){

    window.setTimeout(function() {  
         $("#divUserControlContainer").hide();
    }, 2000);

});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:34:37.340

您可以通过简单的 JQuery 方法来实现它：

```
$("#CustomControl").hide(1000);
$("#CustomControl").show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T14:39:06.180

我没有在问题中看到对 jQuery 的任何引用，因此香草 JS 解决方案：将其放在用户控制文件的末尾

```
<script type="text/javascript">
    setTimeout(function(){
         document.getElementById("<%=this.ClientID%>").style.display = "none";
        }, 5000);

</script> 
```

# asp.net-mvc-3 - 带有嵌套表的 jQuery 可选列表在 jQuery 选项卡中的大小不正确

> ID：11295598
> 
> 赞同：0
> 
> 时间：2012-07-02T14:23:58.283
> 
> 标签：asp.net-mvc-3, jquery-ui

我在我的 MVC3 应用程序中实现了一个 jQuery 选项卡，但是其中一个选项卡的大小不正确。也就是说，一些内容在选项卡内，但我下面的奇怪格式只是部分在选项卡内：

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Edit Schedule</a></li>
        ...
    </ul>

    <div id="tabs-1">
        ...
        <div id = "scheduleData">
            @Html.Partial("_partialView", ViewData["data"])
        </div>
    </div>

    ...
</div> 
```

我的局部视图呈现了许多表，一个只有一个头部，其余的嵌套*在*一个 jQuery 可选列表中：

```
<table>
    <thead>
        <tr>
            <td>ID</td>
            ...
        </tr>
    </thead>
</table>

<ol id="selectable>
    @foreach (var obj in Model)
    {
        <li class="ui-widget-content">
            <table>
                <tr>
                    <td>@obj.ID</td>
                    ...
                </tr>
            </table>
        </li>
    }
</ol> 
```

我不确定标签大小问题是否由于部分视图或我非常奇怪的格式或两者兼而有之。

值得注意的是，只有第一个表在选项卡内，其他任何表始终不在选项卡内，无论局部视图有多大或多小。

这显然是一个草率的解决方案，我想知道是否有更好的方法在可选列表中呈现表格行，以便正确调整 jQuery 选项卡的大小，例如在第一个表格中包含所有行？（据我所知，这不起作用，因为您不能在表格中嵌套可选列表）感谢您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:21:34.000

有可能使表格成为可选项目，而不是每一行，但由于格式问题，我采用了以下解决方案：

```
$(document).ready(function () {
    $("#scheduleTable tr").click(function () {
        var href = $(this).find("a").attr("href");
        if (href) {
            $("#editDialog").dialog({ modal: true });
        }
    });
}); 
```

然后，该标记在每一行中都有一个编辑链接，Javascript 监视该链接，然后创建一个 jQuery 对话框。

```
<table>
    <thead>
        <th>&nbsp;</th>
        ...
    </thead>

    <tbody>
        @foreach (var obj in Model) 
        {
            <tr>
                <td><a href="#">Edit</a></td>
                ...
            </tr>
        }
    </tbody>
</table>

<div id="editDialog" title="Edit Entry" style="display:none">
    ...
</div> 
```

# c++ - Visual Studio 2010 中 unique_pointer 的奇怪行为

> ID：11295601
> 
> 赞同：13
> 
> 时间：2012-07-02T14:24:14.233
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11, unique-ptr

我试着写这门课

```
#include <memory>

class ContainerUnique
{
public:

    ContainerUnique(void);
    ~ContainerUnique(void);

private:
    std::unique_ptr<UniqueElement> u;
}; 
```

其中 UniqueElement 是在别​​处定义的 POD 类。我现在像这样定义构造函数体：

```
ContainerUnique::ContainerUnique(void)
{
    auto tmp = new UniqueElement(1);

    this->u(tmp); // u is a unique_ptr<UniqueElement>. Should this call compile?
} 
```

它无一例外地遵守。运行程序我发现在构造函数`ContainerUnique`被调用后，`u`包含一个空指针。

这是预期的行为吗？我实际调用的是什么 unique_ptr 方法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-02T14:32:50.740

[这是 VS2010 的一个已知问题`unique_ptr`。](https://connect.microsoft.com/VisualStudio/feedback/details/633905/visual-c-ill-formed-unique-ptr-function-call-syntax)如果它是空的作为优化（空基优化），它会从它的删除器*公开继承。*公共继承的缺点是删除器的所有成员也成为 的可用成员`unique_ptr`，在这种情况下，它`operator()(T*)`删除了指针。

该错误已在 VS2012 的库中修复，其中继承更改为私有。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-02T14:34:26.293

您正在调用`default_delete< UniqueElement >::operator () ( UniqueElement* ptr )`，因为 uniqe_ptr 派生自它（以受益于空基类优化），并且它删除了`ptr`. 尽管我认为标准并没有禁止它，但这并不是您想要的行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T14:31:38.893

它应该像

```
ContainerUnique::ContainerUnique(void):u(new UniqueElement(1)) {
} 
```

# cakephp - 在 CakePHP 2.1 中上传和保存文件

> ID：11295605
> 
> 赞同：0
> 
> 时间：2012-07-02T14:24:35.670
> 
> 标签：cakephp, uploader

我想将上传的内容保存在每个 app_id 的特定文件夹中。例如，app_id 为 45 的申请人上传的文件必须保存在名为 45 的文件夹中，而他/她上传的所有文件（例如出生证明、大学证明、头像和高中证明）都将在该文件夹中，与其他 app_id 例如 89 必须有他/她自己的文件夹，但所有上传的文件都将位于一个父文件夹中，例如 webroot/files/uploads/...。

我设法从 Miles Johnson 实现了 Uploader v3.6，因此对该插件或任何其他解决方案有任何帮助

解决此挑战的任何教程或链接

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:47:13.943

您的想法中的一个巨大的安全失败是将高中证书存储在公共（！）可访问的 /webroot/files/uploads 文件夹中。如果每个人都可以从您的服务器下载这些 proivate 文档，那么在许多有隐私法的国家/地区，您肯定会遇到非常不愉快的情况。

使用增量 id 将文件存储在文件夹 1、2、3... 中也是一个坏主意：请阅读本文的“文件系统性能”[部分](http://cakedc.com/florian_kraemer/2010/01/25/file-uploading-file-storage-and-cakephp-mediaview-class)。

如果您想在删除用户时一次性删除所有文件，则将附加到用户的所有文件存储在同一个文件夹中可能是一个好主意，但您不应该忘记正确清理文件名。但同样：如果您将数千个文件存储在同一个（子）文件夹中，您可能会再次遇到问题。

对于 CakePHP 2.x 的文件存储解决方案，我建议您阅读我的[FileStorage 插件](https://github.com/burzum/FileStorage)的 readme.md，它涵盖了几乎所有常见问题，并为您提供了文件存储的坚实基础。

# google-talk - 谷歌谈话 / libjingle 开发者论坛

> ID：11295606
> 
> 赞同：0
> 
> 时间：2012-07-02T14:24:38.587
> 
> 标签：google-talk, libjingle

有谁知道是否有 libjingle 开发者论坛？

[https://developers.google.com/talk/libjingle/index](https://developers.google.com/talk/libjingle/index)在“支持”下提供的链接 会引发“您无权访问此组。(#418)”错误。

我可以找到的其他地方是[http://code.google.com/p/libjingle/issues/list](http://code.google.com/p/libjingle/issues/list)，但这仅适用于错误。Stackoverflow 的活动似乎很低。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:07:37.230

我打算问同样的问题，而这个问题已经开放了 2 个月，这让我认为答案是否定的。另外，我将添加到[google talk 博客](http://googletalk.blogspot.com/)上的 google talk 帮助中心的链接到 archive.org！我搜索了其他涵盖 libjingle 的谷歌群组，它们充满了垃圾邮件。

此外，当前 Mac OS X 的编译指令需要大量工作（我在此处记录了这一点：http: [//blog.bjornroche.com/2012/09/compiling-libjingle-on-os-x.html](http://blog.bjornroche.com/2012/09/compiling-libjingle-on-os-x.html)）。所以我猜这意味着谷歌正在悄悄地降低他们对 libjingle 的支持水平。

我认为获得支持的最佳地点就在这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T21:21:10.183

我邮寄了一位谷歌开发人员，他告诉我 libjingle 没有特定的论坛。他建议我们尝试使用 WebRTC 邮件列表

[https://groups.google.com/forum/?fromgroups#!forum/discuss-webrtc](https://groups.google.com/forum/?fromgroups#!forum/discuss-webrtc)

由于 libjingle 实际上是 WebRTC 的一个子集，并且 WebRTC 有一个更活跃的社区。

虽然如果您有问题，您可以将问题添加到：

[http://code.google.com/p/libjingle/issues/list](http://code.google.com/p/libjingle/issues/list)

# python - 如何检查 numpy 数组是否为空？

> ID：11295609
> 
> 赞同：234
> 
> 时间：2012-07-02T14:24:45.943
> 
> 标签：python, numpy

如何检查 numpy 数组是否为空？

我使用了以下代码，但如果数组包含零，则此操作失败。

```
if not self.Definition.all(): 
```

这是解决方案吗？

```
if self.Definition == array([]): 
```

* * *

## 回答 #1

> 赞同：396
> 
> 时间：2012-07-02T14:38:48.983

您可以随时查看`.size`属性。它被[定义为一个整数](https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.size.html)`0`，当数组中没有元素时为零 ( )：

```
import numpy as np
a = np.array([])

if a.size == 0:
    # Do something when `a` is empty 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-02T14:44:39.367

[https://numpy.org/devdocs/user/quickstart.html (2020.04.08)](http://archive.today/2020.04.08-120031/https://numpy.org/devdocs/user/quickstart.html)

> NumPy 的主要对象是齐次多维数组。它是一个元素表（通常是数字），所有类型相同，由非负整数元组索引。在 NumPy 中，维度称为轴。(...) NumPy 的数组类称为 ndarray。(...) ndarray 对象更重要的属性是：
> 
> **ndarray.ndim**
> 数组的轴数（维度）。
> 
> **ndarray.shape**
> 数组的维度。这是一个整数元组，表示每个维度中数组的大小。对于具有 n 行和 m 列的矩阵，形状将为 (n,m)。因此，形状元组的长度就是轴数 ndim。
> 
> **ndarray.size** 数组元素的总数。这等于形状元素的乘积。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2019-06-22T11:44:52.497

一个警告，不过。注意 np.array(None).size 返回 1！这是因为 a.size[等价于](https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.size.html)np.prod(a.shape)，np.array(None).shape 为 ()，空积为 1。

```
>>> import numpy as np
>>> np.array(None).size
1
>>> np.array(None).shape
()
>>> np.prod(())
1.0 
```

因此，我使用以下内容来测试 numpy 数组是否有元素：

```
>>> def elements(array):
    ...     return array.ndim and array.size

>>> elements(np.array(None))
0
>>> elements(np.array([]))
0
>>> elements(np.zeros((2,3,4)))
24 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2020-05-19T07:25:30.407

为什么我们要检查一个数组是否为`empty`？数组不会像列表那样增长或收缩。从一个“空”数组开始，然后增长`np.append`是一个常见的新手错误。

使用列表`if alist:`取决于其布尔值：

```
In [102]: bool([])                                                                       
Out[102]: False
In [103]: bool([1])                                                                      
Out[103]: True 
```

但是尝试对数组执行相同操作会产生（在 1.18 版中）：

```
In [104]: bool(np.array([]))                                                             
/usr/local/bin/ipython3:1: DeprecationWarning: The truth value 
   of an empty array is ambiguous. Returning False, but in 
   future this will result in an error. Use `array.size > 0` to 
   check that an array is not empty.
  #!/usr/bin/python3
Out[104]: False

In [105]: bool(np.array([1]))                                                            
Out[105]: True 
```

并`bool(np.array([1,2])`产生臭名昭著的歧义错误。

# 编辑

接受的答案表明`size`：

```
In [11]: x = np.array([])
In [12]: x.size
Out[12]: 0 
```

但我（和大多数其他人）检查的`shape`不仅仅是`size`：

```
In [13]: x.shape
Out[13]: (0,) 
```

对它有利的另一件事是它“映射”到一个`empty`列表：

```
In [14]: x.tolist()
Out[14]: [] 
```

但是还有其他带有 0 的数组，`size`在最后一种意义上不是“空”的：

```
In [15]: x = np.array([[]])
In [16]: x.size
Out[16]: 0
In [17]: x.shape
Out[17]: (1, 0)
In [18]: x.tolist()
Out[18]: [[]]
In [19]: bool(x.tolist())
Out[19]: True 
```

`np.array([[],[]])`大小也为 0，但形状为 (2,0) 和`len`2。

虽然`empty`列表的概念定义明确，但 an`empty array`定义不明确。一个空列表等于另一个。`size 0`数组不能这么说。

答案真的取决于

*   “空”是什么意思？
*   你真正测试的是什么？

# python - “尝试”和“如果”的区别

> ID：11295611
> 
> 赞同：-2
> 
> 时间：2012-07-02T14:24:54.233
> 
> 标签：python, if-statement

“try”语句和“if”语句在 Python 中是否有任何功能差异？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T14:30:15.910

我相信你问的是“请求宽恕比请求许可更容易”的范式，这有时被引用为 Python 指南。

在这种情况下`try / except`，对应于尝试和请求宽恕，而`if`对应于请求许可然后尝试。

看看：[http ://docs.python.org/glossary.html#term-eafp](http://docs.python.org/glossary.html#term-eafp)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T14:27:49.947

查看[文档](http://docs.python.org/index.html)，[try](http://docs.python.org/tutorial/errors.html)是例外，[if](http://docs.python.org/tutorial/controlflow.html)是条件分支。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T14:29:10.273

一个基于错误状态的分支，另一个基于真值比较的分支。当然，如果您真的想通过在条件作为块的第一部分时引发错误来使用`try`-`except`块代替`if`-块，但这将是愚蠢的。`else``False``try`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T14:34:41.553

if 语句用于控制这样的代码流

```
a=1

if a ==0 :
    print "zero"
if a==1 :
    print "one" 
```

但是，try 语句是为了控制一些错误。就像你想打开一个文件而这个文件不存在，然后你写。

```
try:
    open ('file.txt','r')
except:
    print "this file dont exists" 
```

使用此代码，程序不会出错

# mysql - mysql加入2个表并计算每个表中的所有行

> ID：11295612
> 
> 赞同：0
> 
> 时间：2012-07-02T14:25:07.120
> 
> 标签：mysql, join, count

我有表合同 c (id, exp_date) 和表成员 m (id, cid)。我需要计算所有合同和所有成员一起加入 m.cid = c.id 上的 2 个表。

我试过了，但显然不对，因为它从两个表返回相同的计数结果

```
SELECT count(m.id) as totmembers , count(c.id) as totcontracts
from members m
join contracts c on m.cid = c.id
where DATEDIFF(c.im_exp, CURDATE()) > 0 
```

结果应该是 5000 份合同，12.000 名成员，但我得到了 12.000 个会员和 totcontracts。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:44:27.000

尝试这个：

```
SELECT count(m.id) as totmembers , count(distinct c.id) as totcontracts
from members m
join contracts c on m.cid = c.id
where DATEDIFF(c.im_exp, CURDATE()) > 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:30:51.657

因为您创建了一个 INNER JOIN 语句。在 SELECT 列表中创建一个包含两个单独查询的新查询。

```
SELECT (SELECT ... WHERE ...) AS totmembers, (SELECT ... WHERE ...) AS totcontracts 
```

# c# - 在下一个大写字母之前获取字符串（文本）

> ID：11295614
> 
> 赞同：3
> 
> 时间：2012-07-02T14:25:14.560
> 
> 标签：c#, .net, string, linq

我有以下内容：

```
string test = "CustomerNumber"; 
```

或者

```
string test2 = "CustomerNumberHello"; 
```

结果应该是：

```
string result = "Customer"; 
```

字符串中的第一个单词是结果，第一个单词直到第一个大写字母，这里是 'N'

我已经尝试过一些这样的事情：

```
var result = string.Concat(s.Select(c => char.IsUpper(c) ? " " + c.ToString() : c.ToString()))
    .TrimStart(); 
```

但是没有成功，希望有人可以为我提供一个小而干净的解决方案（没有 RegEx）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T14:30:43.737

以下应该有效：

```
var result = new string(
    test.TakeWhile((c, index) => index == 0 || char.IsLower(c)).ToArray()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:33:42.263

您可以通过字符串查看哪些值（ASCII）低于 97 并删除结尾。不是最漂亮或 LINQiest 的方式，但它有效......

```
 string test2 = "CustomerNumberHello";

    for (int i = 1; i < test2.Length; i++)
    {
        if (test2[i] < 97)
        {
            test2 = test2.Remove(i, test2.Length - i);
            break;
        }
    }
    Console.WriteLine(test2); // Prints Customer 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T14:38:32.237

尝试这个

```
 private static string GetFirstWord(string source)
        {
            return source.Substring(0, source.IndexOfAny("ABCDEFGHIJKLMNOPQRSTUVWXYZ".ToArray(), 1));
        } 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-02T14:37:44.170

Z][az]+ 正则表达式它将字符串拆分为以大字母开头的字符串 她就是一个例子

```
 regex = "[A-Z][a-z]+";
            MatchCollection mc = Regex.Matches(richTextBox1.Text, regex);
            foreach (Match match in mc)
                if (!match.ToString().Equals(""))
                    Console.writln(match.ToString() + "\n"); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-02T14:43:51.083

我已经测试过，这有效：

```
string cust = "CustomerNumberHello";
string[] str = System.Text.RegularExpressions.Regex.Split(cust, @"[a-z]+");
string str2 = cust.Remove(cust.IndexOf(str[1], 1)); 
```

# python - 以 CSV 格式下载谷歌应用引擎实体

> ID：11295617
> 
> 赞同：2
> 
> 时间：2012-07-02T14:25:24.610
> 
> 标签：python, google-app-engine, google-cloud-datastore

在我们的 GAE 应用程序中，用户通常需要将特定类型的实体下载为 CSV。经常添加/更新新实体，这使得提前或以固定间隔将所有实体写入 blob 是不可行的。

对于以 500 个为一组获取的大约 50000 个实体（每个实体 < 2 KB），写入 CSV 文件 blob 需要超过 2 分钟，成本接近 1 美元。此外，用户必须等待很长时间才能接收通常只有几 (< 5) MB 的文件。

我有两个问题：

A) 是否可以通过为导出配置 map-reduce 管道来减少写入 blob 的时间？

B) 有没有办法降低从数据存储中获取大量实体并写入 blob 的成本？

编辑：刚刚了解到 mapreduce 只能在一种类型的所有实体上运行，而不是过滤的子集。所以mapreduce可能会大大增加成本。还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:43:29.757

1.  您应该使用[ppEngine 管道](http://code.google.com/p/appengine-pipeline/)，它可以提高速度，因为它将作业分布在多个实例中。
2.  您可以通过使用指定要获取的属性的投影查询来降低获取实体的成本。
3.  至于下载速度，你是用 Blobstore 和 BlobstoreDownloadHandler 吗？

# r - 参数长度为零

> ID：11295618
> 
> 赞同：17
> 
> 时间：2012-07-02T14:25:28.180
> 
> 标签：r

我正在尝试使用以下语法从 George Clooney 的维基百科页面获取职业信息。最终，我希望有一个循环来获取有关各种个性职业的数据。

但是，运行以下代码时出现以下问题：

> ```
> Error in if (symbol != "role") symbol = NULL : argument is of length zero 
> ```

我不确定为什么这种情况不断出现。

```
library(XML)
library(plyr)
  url = 'http://en.wikipedia.org/wiki/George_Clooney'  

# don't forget to parse the HTML, doh!
  doc = htmlParse(url)  

# get every link in a table cell:
  links = getNodeSet(doc, '//table/tr/td') 

# make a data.frame for each node with non-blank text, link, and 'title' attribute:
  df = ldply(links, function(x) {
                text = xmlValue(x)
            if (text=='') text=NULL
         symbol = xmlGetAttr(x, 'class')
         if (symbol!='role') symbol=NULL
         if(!is.null(text) & !is.null(symbol))
                 data.frame(symbol, text)         } ) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-02T17:44:55.207

正如@gsee 提到的，您需要在检查它的值之前检查它`symbol`不是。`NULL`这是您的代码的一个小更新（至少对 George 而言）。

```
df = ldply(
  links, 
  function(x) 
  {
    text = xmlValue(x)
    if (!nzchar(text)) text = NULL
    symbol = xmlGetAttr(x, 'class')
    if (!is.null(symbol) && symbol != 'role') symbol = NULL
    if(!is.null(text) & !is.null(symbol))
      data.frame(symbol, text)         
  } 
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-05T11:50:53.133

用作您想要`col.names = my_column_names`的名称`kable()`的`my_column_names`字符向量，对我来说它有效！

# wpf - DataGrid 每行转换器

> ID：11295620
> 
> 赞同：0
> 
> 时间：2012-07-02T14:25:35.240
> 
> 标签：wpf, datagrid, row, converter

我有一个要在 DataGrid 中显示的 ObservableCollection。该集合包含表示间隔的对象（Properties Name(string)、Min(double) 和 Max(double)）。最小值和最大值可能是不同的单位（例如 mm 或 %），所以我想使用不同的转换器（例如转换为 % 并将值限制为 100）或字符串格式（例如显示 2 个小数位或根本不显示）。

是否可以在数据网格中的每行使用不同的转换器或字符串格式？

问候，

塔比纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:34:42.640

我个人会使用 one `Converter`，并使用 the`ConverterParameter`来表示用途。您的绑定可能如下所示：

```
"{Binding Path=Min, Converter={StaticResource 
         IntervalStringConverter}, ConverterParameter=Percent}" 
```

# c - 设置指向空段错误的指针

> ID：11295622
> 
> 赞同：4
> 
> 时间：2012-07-02T14:25:43.653
> 
> 标签：c, pointers, segmentation-fault

我有一个名为 node 的结构，如下所示：

```
struct node {
    int data;
} 
```

存储在一些结构中：

```
struct structure {
  struct node *pointer;
} 
```

我正在尝试将指针设置为 NULL，如下所示：

```
struct structure *elements;
elements->pointer = NULL; 
```

为什么会出现这个段错误？它实际上是否在将指针设置为空之前尝试取消引用它？

当我`elements`从指针切换到实际结构并执行以下操作时：

```
struct structure elements;
elements.pointer = NULL; 
```

它停止段错误并工作。为什么设置指向空的指针不起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T14:27:15.843

```
struct structure *elements;
elements->pointer = NULL; 
```

`elements`指针指向无处。取消引用无效指针（`elements`指针）是未定义的行为。

您需要初始化`elements`指向有效对象的指针，例如：

```
struct structure my_struct;
struct structure *elements = &my_struct;
elements->pointer = NULL; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T14:27:56.790

您需要初始化指针

```
struct structure *elements = malloc(sizeof(struct structure)); 
```

如果您不这样做，它将指向任意内存位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T14:28:07.460

您要取消引用的无效指针，即段错误，不是`elements->pointer`，而是`elements`它本身。由于它尚未设置（例如：由 a `malloc`），它可以指向内存中的任何位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T14:27:20.183

你没有初始化`*elements`。

`*elements`现在什么都不指向，取消引用也不指向任何`elements->pointer`内容，这会给您带来段错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T14:27:20.167

`elements`尚未初始化为指向任何内容。

# intel-mic - 在英特尔 MIC 上运行代码时出现设备不可用错误

> ID：11295626
> 
> 赞同：4
> 
> 时间：2012-07-02T14:26:04.317
> 
> 标签：intel-mic

当我尝试在英特尔 MIC 上运行我的代码时，它会给出一个错误，例如“卸载错误：无法卸载到 MIC - 设备不可用”

我的示例代码是

```
#include <stdio.h>
#include <omp.h>

int main()
{
    int N=10;
    int i, a[N];

#pragma offload target(mic)
#pragma omp parallel
#pragma omp for

    for(i = 0; i < N; i++)
    {
        a[i]=i;
        printf("a[%d] :: %d \n", i, a[i]); 
        printf(".....................:\n\n");
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-22T16:21:21.857

两件事之一正在发生。卡没有启动，您可以通过以下方式检查：

```
sudo micctrl -s 
```

或者运行时找不到依赖库。这很可能是由于没有采购编译器环境变量：

```
source /opt/intel/composerxe/bin/compilervars.sh intel64 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T21:50:06.150

相信你还没有搭建好编译器的环境。

编译环境：

```
source /opt/intel/composerxe/bin/compilervars.sh intel64 
```

还要设置卸载库。

```
#include "offload.h" 
```

# android - 无法在 Windows 7 上签出 STS 2.9.1 和 Subversive 中的 android 项目

> ID：11295629
> 
> 赞同：0
> 
> 时间：2012-07-02T14:26:08.247
> 
> 标签：android, svn, windows-7, sts-springsourcetoolsuite, subversive

## 问题

我对在 Windows 7 Home Premium x64 上运行的 SpringSource Tool Suite 2.9.1 Release 和 Subversive 插件有一个奇怪的问题。我正在尝试从 SVN 存储库中签出一个 android 项目。

这就是我正在做的事情：

1.  `File > Import > SVN > Project From SVN`
2.  我填写存储库的路径并检查 HEAD 修订
3.  我点击`Finish`
4.  项目已找到，默认选项为`Check out as a project with the name specified`. 我不理会名称 将“深度”字段设置为`Recursively`并再次选择 HEAD 修订版。
5.  我点击`Finish`
6.  一个进度条会出现一秒钟，只是为了显示一条错误消息：

    ```
    Checkout operation for 'https://(.....)/Android' failed.
    svn: Cannot create new file 'C:\workspace-sts-2.9.1.RELEASE\AppName \.svn\lock': System can not find the path specified 
    ```

当我重试并按照 1 到 6 的步骤操作时，会出现另一个对话框。它说：

```
This project already exists in the workspace 
or there is a data folder in the checkout destination. 
```

它允许我选择要覆盖的文件夹。当我这样做时，会显示类似但不同的错误消息。它说：

```
Checkout operation for 'https://(...)/Android' failed.
0x0000000f: The folder 'C:\workspace-sts-2.9.1.RELEASE\AppName \.svn' is locked by some external process. Please unlock the folder and try to check out the project again. 
```

## 我试过的

首先，我打开 SVN Lock 视图查看是否有任何由 IDE 创建的锁。没有。

我重新启动计算机，希望它能解决任何应用程序锁定文件的问题，但似乎并非如此。

之后，我在不同的位置创建了一个新的工作区，并尝试在其中签出项目。结果是一样的。

然后，我尝试更改 SVN Kit 的版本。情况持续存在：

1.  SVN 套件 1.2.3
2.  SVN 套件 1.3.5
3.  本机 Java HL 1.5.4
4.  本机 Java HL 1.6.12

我认为更改工作区目录的权限值得一试。它也没有成功。

最后，我使用 Tortoise SVN 在不同的位置签出项目并将其导入我的工作区。我可以运行它（尽管似乎缺少一些构建路径设置）但这不是解决方案。我无法想象与几个无法在我的 IDE 中提交/更新/查看历史记录/解决冲突的人同时处理该项目。

有人建议我安装一个单独的 eclipse 版本，它有自己的工具集和单独的这个应用程序的不同工作区，但这似乎不是一个好主意。我想把它全部保存在一个 IDE 中。我也更愿意避免重新安装整个东西，因为我不想从头开始配置所有其他工具（主要是 spring 和 android 相关的）。

有人见过这样的情况吗？我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:18:37.857

It's uncear to me whether this is a subversive problem or an SVN problem. I would try checking out from the command line (you must install SVN command line tools to do this, but I'd recommend having the tools around as a backup anyway).

Checkout from the command line and then import into STS using File -> Import -> Existing projects into workspace. Once in the workspace, you can select the project -> Team -> Share project to get svn support on it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T17:45:03.077

重命名项目并再次签出，这一定是一个问题，你试图在包资源管理器中签出已经存在的同名项目

# spring - Spring Web Flow 请求映射

> ID：11295635
> 
> 赞同：4
> 
> 时间：2012-07-02T14:26:28.437
> 
> 标签：spring, spring-mvc, mapping, spring-webflow-2

我正在将 Spring Web Flow 2 添加到当前不使用 Spring MVC 或 Web Flow 的非常大的现有 Web 应用程序中。我的任务是通过访问 mySite.com/flows 来触发 Web Flow，但我遇到了困难。我的方法是设置 DispatcherServlet，`/flows/*`并将 Web Flow 映射到`/flows`. 这是配置 DispatcherServlet 的 web.xml：

```
<servlet>
    <servlet-name>flow</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/flowContext.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>flow</servlet-name>
    <url-pattern>/flows/*</url-pattern>
</servlet-mapping> 
```

我已经尝试了几种方法来让 Web Flow 映射到`/flows`. 我的第一次尝试是使用带有`base-path`设置的流注册表：

```
<webflow:flow-registry id="flowRegistry" flow-builder-services="flowBuilderServices" base-path="/WEB-INF/app/flows">
    <webflow:flow-location-pattern value="**/*-flow.xml" />
</webflow:flow-registry> 
```

我的理解是，这将采用内部的文件夹结构`/WEB-INF/app/flows`来创建请求映射。`booking-flow.xml`我的第一个测试是在名为`booking`( `/WEB-INF/app/flows/booking`)的子文件夹中添加我的流程。而且，太好了！- 它按预期工作。我能够从 mySite.com/flows/booking 访问流程。好的，但我不想`/booking`在 URL 中，所以我将它`booking-flow.xml`移出`booking`文件夹，直接进入`WEB-INF/app/flows`并期望它对我有用，但它没有 - 我认为流程根本没有映射。

有谁知道我如何将流映射到 DispatcherServlet 映射的根，或者有更好的方法来解决这个问题吗？我不希望 DispatcherServlet 处理`/flows`我的应用程序之外的任何请求。只是我，还是 Spring Web Flow 上可用的文档很少？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T15:03:04.063

您可以使用[SimpleUrlHandlerMapping](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/handler/SimpleUrlHandlerMapping.html)这种方式将您的流程映射到 mySite.com/flows

```
<bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings" value="flows=flowController" />
</bean>

<bean id="flowController" class="org.springframework.webflow.mvc.servlet.FlowController">
    <property name="flowExecutor" ref="flowExecutor" />
</bean>

<webflow:flow-executor id="flowExecutor" flow-registry="flowRegistry">
</webflow:flow-executor>

<webflow:flow-registry id="flowRegistry" flow-builder-services="flowBuilderServices" base-path="/WEB-INF/app/flows">    
    <webflow:flow-location path="booking-flow.xml" id="flows"/>
</webflow:flow-registry> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:11:55.057

另一种方式可能是这样的

```
<!-- Registry of executable flows -->
<flow:flow-registry flow-builder-services="flowBuilderServices"
    id="flowRegistry" base-path="/WEB-INF/flows/">
    <flow:flow-location id="hello" path="hello-flow.xml" />
    <flow:flow-location path="start-flow.xml" id="main" />

</flow:flow-registry> 
```

根据 url 映射，使用**hello** .htm 或**hello** .html之类的 id 调用流。将加载相应文件中的第一个视图状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-15T19:02:19.280

根据您当前的文件结构设置，您可以这样做

```
<webflow:flow-registry id="flowRegistry" flow-builder-services="flowBuilderServices" base-path="/WEB-INF/app/flows">    
    <webflow:flow-location path="booking-flow.xml" id="flows"/>
</webflow:flow-registry> 
```

即您明确给出 id 在这种情况下适用的 URL 将是 -`mySite.com/flows`

或者

您可以从基本上下文中删除流 -

```
<webflow:flow-registry id="flowRegistry" flow-builder-services="flowBuilderServices" base-path="/WEB-INF/app">
    <webflow:flow-location-pattern value="**/*-flow.xml" />
</webflow:flow-registry> 
```

并在`/WEB-INF/app/flows/booking-flow.xml`. 这将自动生成与基本路径和您的文件名之间的路径相对应的 ID - 这将`flows`再次适用于 URL `mySite.com/flows`

# iphone - iPhone的Chrome模拟器？

> ID：11295636
> 
> 赞同：3
> 
> 时间：2012-07-02T14:26:31.290
> 
> 标签：iphone, asp.net, ipad, google-chrome, mobile

我有一个在 ASP.NET 中开发的移动网站，我想知道是否有人知道任何工具可以在 iPhone / iPad 环境中的 Chrome 上进行测试？该网站在所有其他设备上的所有其他浏览器中已经正常运行了一段时间，但在此浏览器中似乎仅在 iPhone / iPad 上存在问题。我只是不知道如何/如果我能以某种方式调试它。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:42:27.407

在这种情况下，您可能会发现 Adob​​e Shadow 是一个有用的工具：http: [//labs.adobe.com/technologies/shadow/](http://labs.adobe.com/technologies/shadow/)

在这里观看[演示](http://tv.adobe.com/watch/adobe-technology-sneaks-2012/adobe-shadow)，您会发现您可以像使用 chrome 开发工具本身一样调试代码。

# database - 没有继承的数据库设计

> ID：11295637
> 
> 赞同：0
> 
> 时间：2012-07-02T14:26:31.290
> 
> 标签：database, inheritance

我为我的客户提出了以下架构。这里有什么特别是订单行项目。我应该使用继承吗？我很确定这个网站只允许您订购课程、课程和礼品卡，仅此而已

对于任何反馈，我们都表示感谢

![在此处输入图像描述](../Images/ed6f841f2f19f654a1c826555932d392.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:08:46.960

只是我对设计的想法：

1.  您有可能的购买对象的 和 表，并`Courses`包含`Lessons`每个表的 ID。但如果客户购买 a和 a ，它们应该在订单中显示为 2 行。另外，如果您的客户想要交易更多物品，您会怎么做？`GiftCards``OrderLines``Lesson``GiftCard`

    因此，我认为重新设计这部分可能会更好，如下所示：

    *   `OrderLines`重命名为`OrderItems`；
    *   添加`ItemType`3 行的表格：`Courses`, `Lessons`, `GiftCards`;
    *   添加`Items`带有`(ItemId, ItemType, Title, Price, LanguageCode, SortOrder, etc.)`字段的表。

    这样，不仅可以添加评论，还可`Lessons`以为所有可能的项目添加评论。

    您必须想出保留详细信息字段的首选方式`Items`。现在`Courses`并`Lessons`共享很多字段，因此将它们全部移动到新`Items`表中可能是合理的，因为这些字段似乎也适用于`GiftCards`。如果你有一些特定的细节，比如 for `GiftCards`，你可以添加特定的表，比如`GiftCardItems`with`Items.id`和一组不与其他`Item`类型共享的特殊字段。

2.  一个小提示：我会分成`Users`几个表，因为我想这个表将包含客户和支持的东西。这意味着该表可能会变大（取决于预期的客户数量）。当表的行数增加时，在单个表中维护这么多字段可能会出现问题。

我同意马特的观点——没有要求就很难说出任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:32:20.480

如果不了解客户的要求，真的很难说。一切看起来都不错，但如果没有客户的需求文档，我真的无法判断它是否包含客户想要的东西。

# php - 对象到数组

> ID：11295639
> 
> 赞同：0
> 
> 时间：2012-07-02T14:26:39.383
> 
> 标签：php, mysql, arrays, object

我需要将对象 $resultInput 视为一个数组（如 $resultInput 已注释掉）。但是，当我使用函数对象进行数组时，我得到一个错误 Resource id #5。问题是什么？

```
require('dbc.php');

mysql_select_db($db);
$resultInput = mysql_query("SHOW COLUMNS FROM about WHERE Field NOT IN ('id', 'created', 'date_modified', 'last_modified', 'update', 'type', 'bodytext') AND Field NOT REGEXP '_image'"); // selects only the columns I want

//$resultInput = array('page_header', 'sub_header', 'content', 'content_short');

function objectToArray($object){
    if(!is_object($object) && !is_array($object)){
        return $object;
    }
    if(is_object($object)){
        $object = get_object_vars( $object );
    }
    return array_map( 'objectToArray', $object );
}

// convert object to array
$array = objectToArray( $resultInput );

//show the array
print_r( $array ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:28:02.300

您收到此错误是因为`mysql_query()`返回的是资源，而不是对象。要获取对象，您需要使用 mysql 函数之一来检索行集作为对象（即`mysql_fetch_object()`）。但是，您不需要该`objectToArray`函数，因为您可以使用[`mysql_fetch_array`](http://php.net/mysql_fetch_array)将行集作为数组获取，如下所示：

```
$result = mysql_query("...");
$resultInput = mysql_fetch_array( $result); 
```

另外，我相信有人会评论使用现已弃用的`mysql`功能。但是，为了彻底起见，您应该考虑使用`mysqli`or `PDO`。

所以你得到了这个作为输出：

```
array(12) {
    [0] = > string(11)"page_header"
      ["Field"] = > string(11)"page_header" 
    [1] = > string(11)"varchar(50)" 
      ["Type"] = > string(11)"varchar(50)" 
    [2] = > string(3)"YES" 
      ["Null"] = > string(3)"YES" 
    [3] = > string(0)"" 
      ["Key"] = > string(0)"" 
    [4] = > NULL
      ["Default"] = > NULL
    [5] = > string(0)"" 
      ["Extra"] = > string(0)""
} 
```

这是描述该`page_header`列。要仅显示所有列的列名，您可以：

```
$result = mysql_query("..."); $columns = array();
while( $row = mysql_fetch_array( $result) {
    $columns[] = $row['Field'];
}

var_dump( $columns); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:44:31.390

从您的代码开始，您没有从 MySQL 服务器返回结果。为此，您需要将 mysql_query 结果传递给`mysql_fetch_*`函数。

供您使用，您可以这样做`mysql_fetch_assoc($result);`，这将保留列/值关联。

现在，如果您使用`MySQLi`and had `mysqli_fetch_object()`，您可以使用下面的方法将对象转换为数组，反之亦然。

您可以执行以下操作：

类型转换：

```
$array = new array();
$object = (object) $array; 
```

或者

```
$object = new stdClass();
$array = (array) $object; 
```

# pdf - PDF 标签不显示在标签面板或阅读顺序中

> ID：11295649
> 
> 赞同：0
> 
> 时间：2012-07-02T14:27:01.213
> 
> 标签：pdf, accessibility, tagging

我正在标记一个小的 PDF (4pg)，在第二页中途，在我通过 TouchUp Reading Order 选择了我想要的标签后，标签停止出现在标签和阅读顺序面板中。如果我打开内容面板，则会创建正确的容器，所以我看到：

```
- Container <H3>Some text
 - Container <H3>Some text
  - Container <H3>Some text
   - Text: Some Text 
```

有人知道如何让三个面板再次同步吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:04:48.583

上面提到的 PDF 有一些主要的内部错误，特别是“一般格式错误”。

为了找到这些，我运行了一份 PDF 语法问题报告——它提供了有关 PDF 的详细信息。这个 PDF 有大约 4 页的错误。

结论是从源文件重新生成 PDF。*（我还没有这个，所以我得到它后会编辑它。）*

## 运行报告

**Acrobat 9.5** - 高级菜单 > 印刷制作 > 预检。默认情况下，将显示所有报告/配置文件。语法报告在 PDF 分析部分下，或使用查找。突出显示报告，然后单击分析。

**Acrobat X** - Print Production 现在是一个面板，并且有一个 Preflight 部分。

# forms - web2py 表单验证期间出了什么问题？

> ID：11295650
> 
> 赞同：0
> 
> 时间：2012-07-02T14:27:07.527
> 
> 标签：forms, web2py

我有一个相当简单的 web2py 表单，其字段上有一些验证器，例如 IS_FLOAT_IN_RANGE(...)。当我尝试提交具有未通过验证的字段的表单时，表单将无法通过第一次验证，但不会报告有任何错误。如果我然后重新提交相同的表格，验证将再次失败。

更糟糕的是，如果我提交了有效信息，除非我两次提交相同的表格，否则它不会提交。观点很简单`{{=form}}`

控制器如下所示：

```
@auth.requires_login()
def addpipelines():
    form = FORM(INPUT(_name="type", _value="insert", _type="hidden"),
            INPUT(_name="project", _value="Project", requires=IS_NOT_EMPTY()),
            INPUT(_name="value", _value="Value", requires=IS_FLOAT_IN_RANGE(-1e100, 1e100)),
            BR(), BR(),
            INPUT(_type="submit", _value="Add"),
           _method="POST")

    if request.post_vars.type == "insert" and form.process().accepted:
       request.post_vars["blub"] = "blargh"

    return dict(form=form) 
```

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T22:38:53.780

```
if request.post_vars.type == "insert" and form.process().accepted: 
```

注意，在 Python 中，当前面的部分为假时，上面表达式后面的`and`部分不会被计算，所以只会在提交表单时被调用。但是，要使表单处理正常工作，还必须在首次创建表单时调用（因为它添加了一个隐藏的 _formkey 字段并使用放置在会话中的表单密钥副本检查其值，以防止 CSRF 攻击和双重提交）。相反，请尝试切换条件的顺序：`and``form.process()``form.process()`

```
if form.process().accepted and request.post_vars.type == "insert": 
```

# javascript - 使用 JQuery 单击链接时删除父 div

> ID：11295658
> 
> 赞同：0
> 
> 时间：2012-07-02T14:27:27.417
> 
> 标签：javascript, jquery, html

单击带有“dc”类的任何一个超链接时，我需要淡出父“内容”div。以下代码是我已经拥有的，但不起作用。

```
<script>
$('.dc').unbind("click").click(function(){
var dic = this.id;
var strlinkc = "somepage.php?cid=" + dic;
$.post(strlinkc, function(data, textStatus){
$('a.dc#'+dic).closest('.content').fadeOut("slow");
});
});
</script>

<div class="content">
<div id="somediv"><a class="dc" id="23" href="javascript:void(0);">update</a></div>
<div id="anotherdiv">
blah blah blah more text and images
</div>
<div id="yetanother"><a class="dc" id="23" href="javascript:void(0);">update</a></div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:32:39.620

将您的代码放入 dom 就绪处理程序中。

```
$(function () {
    $('.dc').unbind("click").click(function () {
        var $this = $(this);
        var strlinkc = "somepage.php?cid=" + this.id;
        $.post(strlinkc, function (data, textStatus) {
            $this.closest('.content').fadeOut("slow");
        });
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:42:58.650

```
$('.dc').click(function(){
    $(this).parents('.content').fadeOut('fast');
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T21:11:33.703

不要使用取消绑定，而是阻止默认事件。

```
$(function () {
    $('.dc').click(function (e) {
        e.preventDefault();
        var $this = $(this);
        var strlinkc = "somepage.php?cid=" + this.id;
        $.post(strlinkc, function (data, textStatus) {
            $this.closest('.content').fadeOut("slow");
        });
        return false;
    });
}); 
```

# bash - 是否有内联 bash 脚本之类的东西？

> ID：11295659
> 
> 赞同：3
> 
> 时间：2012-07-02T14:27:28.760
> 
> 标签：bash, shell

我想做一些事情：

```
find -name *.mk | xargs "for i in $@ do mv i i.aside end" 
```

我意识到这可能不仅仅是错误，但我想具体了解这种我可以将 xargs 传递给的内联命令定义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T15:03:31.680

这个特定的命令不是一个很好的例子，但您可以通过`sh -c 'here is the script'`作为命令给出来使用“内联 shell 脚本”。您可以在脚本中为其提供 $@ 参数，但有一个问题：脚本中的第一个参数在`here is the script`$0 之后，因此您必须在其中添加一个额外的单词，否则您将丢失第一个参数。

```
find . -name '*.mk' -exec sh -c 'for i; do mv "$i" "$i.aside"; done' fnord '{}' + 
```

我利用的另一个有趣的功能是 for 循环默认迭代命令行参数：`for i; do ...`相当于`for i in "$@"; do ...`

我重申，与执行批量 mv 的许多其他方法相比，上述命令复杂且缓慢。我发布它只是为了展示一些很酷的语法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T14:30:52.967

这里不需要 xargs

`find -name *.mk -exec mv {} {}.aside \;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:33:12.903

我不确定你的 for 循环的语义应该是什么，但是盲目地编码它会给出这样的结果：

```
find -name *.mk | while read file
  do
    for i in $file; do mv $i $i.aside; done
  done 
```

如果多处使用body，也可以使用bash函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T14:49:18.080

在某些版本的 find 中需要一个参数：。对于当前目录

星 * 必须转义

您可以尝试使用 echo 命令来确定命令会做什么

```
find . -name '*.mk' -print0 | xargs -0i sh -c "echo mv '{}' '{}.aside'" 
man xargs
/-i
man sh
/-c 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T14:50:04.640

我敢肯定你可以很好地做到这一点，但既然你要求 xargs：

```
find -name "*.tk" | xargs -I% mv % %.aside 
```

循环文件名没有意义，因为一次只能重命名一个。没有必要使用内联丑陋，但我无法使其与管道和`eval`or一起工作`bash -c`。

# java - 通过接口引用访问实现的类方法，无需构造函数初始化

> ID：11295660
> 
> 赞同：0
> 
> 时间：2012-07-02T14:27:30.023
> 
> 标签：java

我有一个`CommonDaoImpl`实现接口的类`CommonDao`。现在我正在尝试通过这样的接口引用访问`getRegisterData()`of`CommonDaoImpl``CommonDao`

```
public class CommonServiceImpl implements CommonService 
{
    CommonDao commonDao
    public boolean insertRegisterData(CommonBean objCommonBean)  {
        return commonDao.getRegisterData(objCommonBean);
    } 
```

但它不起作用并且出现 NullPointerException

所以我稍微更改了我的代码并使用实现的类 CommonDao impl 的构造函数初始化接口引用，如下所示

```
public class CommonServiceImpl implements CommonService 
{
    CommonDao commonDao=new CommonDaoImpl();

    public boolean getRegisterData(CommonBean objCommonBean)  {
        return commonDao.insertRegisterData(objCommonBean);
    } 
```

但我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:30:28.247

在第一种情况下

```
CommonDao commonDao 
```

它是您的类的成员字段，未初始化，具有默认值，因此在结果中`null`调用方法`null``NullPointerException`

而在第二种情况下，您正在初始化它

```
CommonDao commonDao=new CommonDaoImpl(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:31:50.347

为什么会发生什么？空指针异常？发生这种情况是因为一旦实例化了 CommonServiceImpl，所有字段都会收到默认值。commonDao 是一个默认值为空的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T22:55:11.810

第一个 commonDao 是一个**实现类的****引用**

 **Sicne commonDao 是一个接口，它**没有实现任何方法**

> 普通道 普通道

commonDao 不引用实现接口的初始化对象，所以当你调用 commonDao.insertRegisterData(objCommonBean); comonDao 为 Null，因为当前没有为其分配内存地址，并且它抛出 NullException（参见图表）

> CommonDao commonDao=new CommonDaoImpl(); < --- 这里初始化

现在 commonDao 正在引用一个实现接口的初始化对象。所以当你调用commonDao.insertRegisterData(objCommonBean)，comonDao接口。commonDao 有一个分配给它的地址，它是一个初始化的类。所以现在有一个现有的对象可以引用，它具有该方法。

![在此处输入图像描述](../Images/bce662ed101f7ae6aed35f7d6c954062.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T14:39:15.573

这是因为您需要一个实例`CommonDao`来调用该`insertRegisterData`方法。该语句`commonDao=new CommonDaoImpl()`创建一个调用构造函数的实例并将其分配给`commonDao`，因此不再存在`null`。**

# oauth-2.0 - Google API 控制台 - 缺少客户端密码

> ID：11295661
> 
> 赞同：32
> 
> 时间：2012-07-02T14:27:34.333
> 
> 标签：oauth-2.0

我尝试为使用 OAUTH 2.0 作为登录名以检索用户配置文件的 android 应用程序创建测试客户端 ID。我按照步骤在谷歌控制台上完成了客户端 ID 的创建，但我在任何地方都看不到客户端密码。我正在尝试帮助我的雇主为其应用程序获取 Google 凭据。我知道如何在 android 中实现 OAUTH 2.0，但我需要客户端密码才能将代码与访问令牌交换。

首先，我从“服务”选项卡中选择了“Google+ API”。然后按照 API Access 选项卡中的屏幕步骤进行操作。![在此处输入图像描述](../Images/38d3d75379bac022a72dc0f0f9075aaa.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-02T15:43:17.213

谷歌似乎终于放弃了[可安装应用程序的](https://stackoverflow.com/a/7476709/1467115)[不必要`client_secret`](https://stackoverflow.com/a/7476709/1467115)内容，并且还没有更新他们的文档。您应该检查您是否已经[像在 Facebook 上处理](https://developers.facebook.com/docs/authentication/client-side/)`access_token`的那样在初始 OAuth 请求中获得了一个。

另一种可能性是回退到使用[Simple API Access key](https://developers.google.com/console/help/#generatingdevkeys)。

**更新：**

第一种方法似乎不适用于 Google。

Android 的推荐方法是使用[AccountManager](https://developer.android.com/reference/android/accounts/AccountManager.html)而不是烘焙您自己的请求。按照[此示例](https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android)了解如何实现以及如何使用简单 API 访问密钥获取 AuthToken。然后，您可以包含[OAuth2 API](https://code.google.com/p/google-api-java-client/wiki/APIs#oauth2)库来检索用户信息，而不是使用 Tasks API。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-26T04:24:04.750

点击“下载 JSON” 是你要找的吗？ ![在此处输入图像描述](../Images/66d221f7fb0a4dbad9b3035080f1d074.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-24T16:06:20.980

由于接受的答案中的几乎所有内容都已被弃用，我想我会分享我的发现。

我需要需要客户端密码的 People API。谷歌建议在 Android 中使用 People API 是，

> 选择应用程序类型**Other**，输入名称“People API Quickstart”，然后单击创建按钮。

在这里找到：[https](https://developers.google.com/people/quickstart/java) ://developers.google.com/people/quickstart/java （步骤 1 e 部分）

因此，如果您需要客户端密码，您可以考虑使用“**其他**”类型。当然，首先要遵循特定 API 的文档。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-19T13:55:36.083

就在今天，我发现在新的 Cloud Console 上，我们可以看到 android 应用程序的客户端密码 - 而在旧的 google 控制台中，我们不能。

要使用新的 Cloud Console，只需点击消息“我们正在改善体验。试试新的 Cloud Console”。谷歌会要求短信确认。现在您将被重定向到[新的云控制台](https://cloud.google.com/console#/project)

![单击此消息以使用新的云控制台](../Images/b064a067a5cd630d6c752e87601b4986.png)

现在，只需选择您的项目，单击左侧菜单上的“Registered Apps”，选择您的 android 应用程序，然后瞧，在 oAuth 2.0 Client Id 上，您将看到您的客户端密码。不知道为什么在旧的谷歌控制台上它没有显示，但如果你真的需要一个客户端密钥，它就在那里。

![在这里我们可以看到安卓应用的客户端密码](../Images/edd45ab389e186bc7cba98ee8b3aa24c.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-11T11:37:43.597

[消息来源](https://developers.google.com/accounts/docs/OAuth2#installed)说：访问 Google Developers Console 以获取 OAuth 2.0 凭据，例如 Google 和您的应用程序都知道的客户端 ID 和客户端密码。这组值根据您正在构建的应用程序类型而有所不同。例如，**JavaScript 应用程序** **不需要** **secret**，但 Web 服务器应用程序需要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-02T17:52:04.400

现在其他类型不可用，我使用桌面类型，因为我希望使用桌面应用程序 Visual Studio 上传。那行得通，我得到了客户端 ID 和客户端密码。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-03-28T13:59:14.527

另一种解决方案是您必须创建一个类型为“已安装应用程序”的客户端 ID，然后您将拥有客户端密码

# c# - SharePoint XML 解析 c#

> ID：11295662
> 
> 赞同：2
> 
> 时间：2012-07-02T14:27:35.080
> 
> 标签：c#, xml

我有这种由 SharePoint Web 服务返回的 XML 结构。

```
<rs:data ItemCount="4" xmlns:rs="urn:company:rowset">
  <z:row ows_AssetId="HP010336520"  />
  <z:row ows_AssetId="HP010336519"  />
  <z:row ows_AssetId="HP010354403"  />
  <z:row ows_AssetId="HP010357062"  />
</rs:data>

    private static void Parser(List<XmlNode> data)
    {

        List<XmlNodeList> rows = (from row in data.AsEnumerable()
                            select row.SelectNodes("data/row")).ToList();
    } 
```

我试图查询一行，但没有运气。你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T14:51:59.383

查询节点列表时需要使用 XmlNamespaceManager。在您的代码中没有看到文档根目录中“z”命名空间的声明：xmlns:z="#RowsetSchema"。

在您的 Parser 方法中尝试以下操作：

```
 NameTable nameTable = new NameTable();
    XmlNamespaceManager nsmgr = new XmlNamespaceManager(nameTable);
    nsmgr.AddNamespace("z", "#RowsetSchema");

    List<XmlNodeList> rows = (from row in data.AsEnumerable()
                              select row.SelectNodes("//z:row", nsmgr)).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:48:39.760

我现在不在一个可以测试的地方，但我相信至少部分问题是您在查询中遗漏了命名空间——而不是“数据/行”，请尝试“rs:data/z:row ”。

# hibernate - 查询之间的区别

> ID：11295675
> 
> 赞同：1
> 
> 时间：2012-07-02T14:28:26.497
> 
> 标签：hibernate, hql

我正在使用连接在 HQL 中构建查询，并且我已经堆叠了一件事：

我的查询看起来像：

```
From HistoryPerPhraseEntity as history left join history.linkAddressByLinkId where history.serviceId = :serviceId 
```

并且查询很好，但是当我试图将响应放入我的数据库对象并尝试获取如下值时：

```
historyPhrase.get(0).getPhraseId() 
```

我有：

```
[Ljava.lang.Object; cannot be cast to com.rasp.lta.domain.HistoryPerPhraseEntity 
```

但改成这样后：

```
Select history From HistoryPerPhraseEntity as history left join history.linkAddressByLinkId where history.serviceId = :serviceId 
```

一切都好。

有人可以回答为什么我在此查询中需要“选择”吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:14:41.143

因为没有明确的 SELECT Hibernate 无法确定只应返回实例 HistoryPerPhraseEntity。它还返回加入的实体。

这就是它返回对象数组列表的原因。数组的第一个索引包含 HistoryPerPhraseEntity，第二个索引中的对象类型与 linkAddressByLinkId 集合中的元素类型相同。

如果您出于某种原因只想访问第一个查询返回的 HistoryPerPhraseEntity，可以通过将返回列表的每个元素转换为`Object[]`并转换`Object[0]`为`HistoryPerPhraseEntity`

不过最好使用 SELECT 。

# android - 在不同接入点之间漫游

> ID：11295679
> 
> 赞同：0
> 
> 时间：2012-07-02T14:28:31.000
> 
> 标签：android, wifi, roaming

我正在开发一个通过 WiFi 拨打电话的 android 应用程序。它工作正常，但是当我搬进大楼并且手机必须与新的接入点建立连接时，因为信号变弱，我会失去连接一两秒钟。

有没有办法来解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:13:44.323

我能想到的最好的事情是当您检测到您想要跳到的更强信号时模拟电话“保持”信号。否则，即使你成功地进行了交换，对方可能仍然会将其视为断开连接并挂断他们的一端。在保持和交换时仍然会有短暂的停顿，但这比断开连接要好。也许在它即将暂停时添加一个提示音来警告你？

顺便说一句，祝你好运。不知道有这样的电话应用程序，但它似乎非常有用。当然，他们不这样做可能是有原因的。

# iphone - iPhone 崩溃日志

> ID：11295682
> 
> 赞同：1
> 
> 时间：2012-07-02T14:28:40.967
> 
> 标签：iphone, objective-c, ios, xcode

我有一个处于临时模式的应用程序，它在启动后立即崩溃。我可以访问 Xcode，并尝试在此处查找崩溃日志：[iPhone 崩溃日志？](https://stackoverflow.com/questions/2075990/iphone-crash-log)

但我没有这个应用程序的崩溃日志。为什么？

应用程序启动后，我可以看到*Default.png*，几秒钟后它崩溃了，我什至从未看到 mainViewController。如何获得崩溃日志？如何检测此错误？我无权访问源代码。我只有临时分发。

并非所有设备都出现问题。AFAIK 这只是 3GS 问题。奇怪的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:18:29.830

不要寻找崩溃日志，而是尝试将手机连接到 xcode，而是查看控制台屏幕，运行应用程序，您应该会在控制台上看到输出，看看是否有错误消息。

对于无法访问 Xcode 或在 PC 上运行的用户，您可以下载 Apple 的 iPhone 配置实用程序，它还可以让您访问设备控制台。

# php - 将变量发布到另一个 PHP 文件

> ID：11295685
> 
> 赞同：2
> 
> 时间：2012-07-02T14:28:52.753
> 
> 标签：php

> **可能重复：**
> [将通过 URL 获取的数据转换为 post 变量](https://stackoverflow.com/questions/6192822/to-convert-a-data-obtained-through-url-to-post-variables)

我在 $_GET 数组中收到一些值，我想将用户**重定向**到另一个 PHP 文件，但我需要将 GET 数组中的所有值作为 POST 请求发送到该文件，这可能吗？如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:32:13.910

是的，您可以使用 curl 执行此操作。

[http://jm2.php.net/curl](http://jm2.php.net/curl)

`curl_setopt($ch, CURLOPT_POST, true);`是你需要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T14:31:20.227

我会使用 Curl 库。[你可以在这里](http://davidwalsh.name/execute-http-post-php-curl)找到一个样本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T14:32:41.610

您不能代表浏览器发出发布请求。所以你不能将用户重定向到另一个文件，并期望它是一个 POST 请求。

正如 Arcadien 所说，您可以使用 Curl 发出 POST 请求，但用户不会注意到任何内容，因为请求是从您的服务器发送到您的服务器的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T14:33:54.213

如果您打算进行实际重定向（用户的浏览器实际上*加载*了目标 URL），那么我认为最干净的方法是使用 javascript；基本的想法是写一个自我提交的表格。使用所有获取变量作为输入类型="hidden" 预先填充表单，然后编写一个小的卸载处理程序来提交它。

如果您不关心用户代理加载新 URL，并且另一个文件在您的服务器上，但它只希望这些变量在 POST 而不是 GET 中，您可以复制这些值并包含该文件`$_POST = $_GET;`

# jquery - 使用 CJUIautocomplete 基于算术填充字段（Yii 框架）

> ID：11295687
> 
> 赞同：0
> 
> 时间：2012-07-02T14:28:59.787
> 
> 标签：jquery, yii

我已经到处寻找答案，但找不到任何明确的例子来说明我想做的事情。过去我一直致力于在本机 JavaScript (getDocumentiD) 中提供此功能，但我想知道在 Yii 框架中执行此操作的最简单方法。

我想做的是使用 CJuiAutoComplete 类，通过添加、划分或多重播放从表单中先前输入的字段中给出的值来自动填充特定字段。我希望它随着值的变化而动态更新。如果有人可以概述适当的步骤或示例，或指向指南的链接，我将不胜感激！

我还想在我的表单中为某个特定领域实现类似的目标。我想做的是给定前一个字段的输入，例如（国家名称），在我的数据库中查找该模型的所有对应行，这些行包含表单中先前输入的相同国家，取一个整数的平均值所有这些行的列，并自动填充表单上的另一个字段。

如果有人能给出任何明确的例子，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:51:06.110

我认为 CJuiAutoComplete 不会做您希望做的事情，因为该类是[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)的包装器，它基本上在您完成表单时提供建议，而不是基于计算值根据其他表单输入。

对于您的问题，一般概述是您需要将 AJAX 调用附加到您的视图中的列表框，类似于：

```
echo CHtml::listBox('country', '', array('country1', 'country2'),
    array('ajax' => array(
                'type' => 'POST',
                'url' => Controller :: createUrl('/controller/parseData'),
                'dataType'=>'json',
                'success'=>'function(data) {
                    $("#secondField").val(data.returnValue);
                }'
                ),
        'id'=>'countrySelect',
    )
); 
```

上面的代码创建了一个带有附加 AJAX 的列表框。在您的控制器中，您将拥有以下内容：

```
public function actionParseData() {
   if (Yii::app()->request->isAjaxRequest) { 
       $country = $_POST['country'];
       // php code to parse the submitted data, 
       // i.e.. query the DB and run your calcuations
       // and finally return the data, using a line of the form:
       echo CJSON::encode(array('returnValue'=>$valueYouCalculated));
    }
} 
```

然后在调用 AJAX 中的成功函数时自动更新，并且页面中 id 为“secondField”的部分将更新为具有您返回的值。

# jquery - 提交 AJAX 表单前确认电子邮件地址

> ID：11295691
> 
> 赞同：0
> 
> 时间：2012-07-02T14:29:13.970
> 
> 标签：jquery, ajax

我有一个通过 AJAX 提交的表单。该表单包含许多字段，但我遇到问题的两个字段是“emailaddress”和“confirmemailaddress”。我希望只有在这两个字段相同的情况下才能提交表单。需要注意的是，这两种形式也不是必需的。所以如果他们都是空白的，他们应该可以提交就好了。

这是我目前正在使用的代码。我已经删除了很多在表单提交期间和之后发生的视觉效果，以保持它的整洁。

```
$(function() {

  $("#contact_form form").submit(function() {
    var thistarget = this.target;

    $("#contact_form form").validate({
    rules: {
        emailaddress: "required",
        confirmemailaddress: {
        equalTo: "#emailaddress"
           }
         }
    });
   return false;  

  $.ajax({  

      type: this.method, 
      url: this.action,  
      data: $(this).serialize(), 

      success: function() {  
        alert ("success:");

        $('#contact_form').html("<div id='message'></div>");  
        $('#message').html("<h2>Request Form Submitted!</h2>")  
        .append("<p>We will be in touch soon.</p>")  
        .hide()  
        .fadeIn(1500, function() {  
          $('#message').append("Thank you!");  
        }); 

      }

    });

   return false;  

  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:33:00.350

只需删除：电子邮件地址：“必需”，如果您有该规则，除非您输入电子邮件地址，否则您将无法提交表单。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-02T14:36:57.337

而不是验证器使用下面的代码..

```
if( $('#emailaddress').val() == $('#confirmemailaddress').val() ) 
{
do ajax code
}else{
return false;
} 
```

# seo - 将一个微数据项范围嵌套在另一个范围内的格式是什么？

> ID：11295692
> 
> 赞同：4
> 
> 时间：2012-07-02T14:29:15.280
> 
> 标签：seo, microdata

我是 SEO 新手，听说在 html 中使用微数据标签可以显着提高 SEO。因此，对于我的一个页面，架构类型是一个组织……尤其是运动队。运动队的属性之一是成员。所以，我有以下代码：

```
<div itemscope itemtype="http://schema.org/SportsTeam">
   <span itemprop="name">New York Yankees</span>
   <span itemprop="members">Derek Jeter</span>
</div> 
```

“成员” itemprop 必须是个人 itemscope (http://schema.org/Person)。将一个 itemscope 嵌套在另一个 itemscope 中的格式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T14:33:41.493

来自[关于微数据标签的谷歌文章](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=176035)：

* * *

下面的示例显示了相同的 HTML，但在本例中，它包含 address 属性。

```
<div itemscope itemtype="http://data-vocabulary.org/Person">
   My name is <span itemprop="name">Bob Smith</span>, 
   but people call me <span itemprop="nickname">Smithy</span>.
   Here is my homepage: 
   <a href="http://www.example.com" itemprop="url">www.example.com</a>.
   I live in 
   <span itemprop="address" itemscope
      itemtype="http://data-vocabulary.org/Address">
      <span itemprop="locality">Albuquerque</span>, 
      <span itemprop="region">NM</span> 
   </span>
   and work as an <span itemprop="title">engineer</span>
   at <span itemprop="affiliation">ACME Corp</span>.
</div> 
```

以下是此示例的工作原理：

该`address`属性本身就是一个项目，包含它自己的一组属性。这通过将`itemscope`属性放在声明属性的项目上来表示`address`，并使用该`itemtype`属性来指定所描述的项目的类型，如下所示`<span itemprop="address" itemscope itemtype="http://data-vocabulary.org/Address">`：

* * *

我要补充一点，微标签还处于起步阶段，所以你不能保证规范会保持很长时间。我个人预测，黑帽 SEO 的家伙们会全力以赴，谷歌跟上这些伎俩将是一件令人头疼的事情。因此，虽然它们可能会为您提供临时的 SEO 提升，但不要过分依赖它们。

在更积极的方面，我当然可以看到这些微标签对非 SEO 目的很有用，尤其是在屏幕阅读器领域。好玩的东西！

# playframework - 通过在 Play Framework 中保存 BigDecimal 来丢失精度

> ID：11295695
> 
> 赞同：2
> 
> 时间：2012-07-02T14:29:28.027
> 
> 标签：playframework, bigdecimal

我在内存数据库中使用带有 H2 的 Play Framework 1.2.4。

```
public void aBigDecimalSavingTest() {
    BigDecimalEntity bde = new BigDecimalEntity();
    bde.bd= new BigDecimal("0.225");
    System.out.println(bde.bd); // print 0.225
    bde.save();

    bde = BigDecimalEntity.findById(Long.valueOf("1"));
    System.out.println(bde.bd); // print 0.23
} 
```

这个问题从何而来？播放框架？数据库支持 ? JPA 缺少注释？...

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T15:38:46.543

您可能需要在实体上指定精度：

```
@Column(precision = 16, scale = 4)
BigDecimal bigdec; 
```

# emacs - clojure-jack-in 错误

> ID：11295696
> 
> 赞同：0
> 
> 时间：2012-07-02T14:29:32.540
> 
> 标签：emacs, clojure, slime

我使用 emacs 入门套件安装了 clojure-mode 和 slime，但在执行 clojure-jack-in 时出现此错误 -

```
Symbols value as variable is void: slime-clj 
```

这可能是什么原因造成的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:55:12.940

我安装了错误的 emacs 插件。'slime-clj' 而不是 'slime-ritz'。

# asp.net-mvc - 通过子视图的更改使视图模型保持最新

> ID：11295712
> 
> 赞同：0
> 
> 时间：2012-07-02T14:30:46.147
> 
> 标签：asp.net-mvc, c#-4.0, razor, razor-declarative-helpers

我有一个 Razor 页面，其中使用 Html.DisplayFor() 插入了 2 个子视图：

```
...
     @Html.DisplayFor(model => model.ModelObject.Lines, new { IsEditable = Model.ModelObject.CanEdit })
...
     @Html.DisplayFor(model => model.Payments, new { DocumentId = Model.ModelObject.Id, CanAddPayments = Model.ModelObject.CanAddPayments })
... 
```

当我从视图 2 调用操作时，我需要能够在保存模型之前获取模型的最新内存状态（假设行已添加到文档中）。不幸的是，我似乎只能得到第一次加载页面时的模型。我可以看到子视图中使用的视图模型的更改。例如，在付款子视图中，我可以看到付款正在更新，但不是其他视图中已更新的行。

有什么方法可以让我从另一个视图中看到一个视图的变化，或者让它们改变同一个对象？

# python - 拆分数字模式

> ID：11295714
> 
> 赞同：0
> 
> 时间：2012-07-02T14:30:46.833
> 
> 标签：python, string, algorithm

我现在想知道如何拆分字符串，例如 `44664212666666 into [44664212 , 666666]`或 `58834888888888 into [58834, 888888888]` 不知道最后一个重复数字的第一次出现在哪里。所以将它传递给一个函数说`seperate(str)`->`[non_recurring_part, end_recurring digits]`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:36:28.807

```
print re.findall(r'^(.+?)((.)\3+)$', '446642126666')[0][:-1] # ('44664212', '6666') 
```

正如评论中所指出的，最后一组应该是可选的，以正确处理没有重复符号的字符串：

```
print re.findall(r'^(.+?)((.)\3+)?$', '12333')[0][:-1] # ('12', '333')
print re.findall(r'^(.+?)((.)\3+)?$', '123')[0][:-1]   # ('123', '') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:43:23.087

与贾斯汀相同的答案：

```
>>> for i in range(len(s) - 1, 0, -1):
    if s[i] != s[-1]:
        break

>>> non_recurring_part, end_recurring_digits = s[:i], s[i + 1:]
>>> non_recurring_part, end_recurring_digits
('4466421', '666666') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T14:45:38.153

这是一个非正则表达式的答案，它处理没有重复数字的情况。

```
def separate(s):
    last = s[-1]
    t = s.rstrip(last)
    if len(t) + 1 == len(s):
        return (s, '')
    else:
        return t, last * (len(s) - len(t)) 
```

例子：

```
>>> separate('123444')
('123', '444')
>>> separate('1234')
('1234', '')
>>> separate('11111')
('', '11111') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T14:35:22.493

您不能只从最后一个字符扫描到第一个字符并在下一个字符不等于前一个字符时停止。然后在该索引处拆分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T14:36:59.270

```
def separate(n):
    s = str(n)
    return re.match(r'^(.*?)((.)\3*)$', s).groups() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-02T14:37:14.530

```
def seperate(s):
 return re.findall('^(.+?)('+s[-1]+'+)$',s) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-02T14:38:23.497

```
>>> import re
>>> m = re.match(r'(.*?)((.)\3+)$', '1233333')
>>> print list(m.groups())[:2]
['12', '33333'] 
```

这里使用正则表达式。re 的最后一部分`((.)\3+)$`说必须重复相同的数字直到字符串的末尾。其余的都是字符串的第一部分。该函数返回对应于re 部分`m.groups()`的字符串列表。`()`0 元素包含第一部分；1 元素包含第二部分。第三部分不需要，我们可以忽略它。

另一个重要的点是`?`在`.*?`. 使用您说您需要非贪婪搜索的符号。这意味着您需要尽快切换到 re 的第二部分。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-03T10:11:14.717

从末尾开始迭代，向初始数字，只需获取字符发生变化的位置，这应该是子字符串拆分的限制，让限制索引是--> i，那么你的结果将是-->{ sub-string [0,i) , sub-string [i,size)},, 这将解决你的问题..

```
 int pos=0;
    String str="ABCDEF";
    for (int i = str.length()-1; i > 0; i--)
    {
        if(str.charAt(i) != str.charAt(i-1))
        {
            pos=i;
            break;
        }
    }

    String sub1=str.substring(0, pos);
    String sub2=str.substring(pos); 
```

# generics - 带有 linq 到实体和类型参数的通用请求

> ID：11295718
> 
> 赞同：0
> 
> 时间：2012-07-02T14:31:05.260
> 
> 标签：generics, entity-framework-4, linq-to-entities

我想对实体通用请求进行 linq

例如

我有

```
public Dictionary<string, bool> IsObjectInBase(Type type)
{
    MyEntityContainer context = new EntityContainer();
    Dictionary<string, bool> isObjectInBaseDico = new Dictionary<string, bool>
    List<AnObject> objectList = callingAMethod(type.ToString());

    foreach(AnObject object in objectList)
    {
        List<T> genericObjectList = context.type.ToList();
        if(genericObject.Count > 0)
        {
            isObjectInDataBaseDico.Add(type.ToString(),true);
        }
    }
    return isAnObjectInDataBaseDico;
} 
```

我不能在数据库上下文中使用我的请求的类型参数，有谁知道是否可以对实体请求进行通用 linq？

# javascript - js cookie 未显示在 chrome 开发者工具中

> ID：11295719
> 
> 赞同：2
> 
> 时间：2012-07-02T14:31:06.430
> 
> 标签：javascript, google-chrome, cookies, developer-tools

我使用服务器端代码 (c#) 创建了 cookie，它显示在 chrome 开发人员工具中。(Resources->Cookies) 现在我在 js 中创建了它，它不再显示在那里。如果我在控制台中写：“document.cookie” - 我可以看到我的 cookie，但我想在 Resources->Cookies 中看到它，以便我可以在需要时轻松删除它。创建 cookie 的代码：（来自：[http](http://www.w3schools.com/js/js_cookies.asp?output=print) ://www.w3schools.com/js/js_cookies.asp?output=print ）

```
function setCookie(c_name, value, exdays) {
var exdate = new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" +   exdate.toUTCString());
document.cookie = c_name + "=" + c_value;
} 
```

和：

```
setCookie("myCookie", "true", 365); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:33:53.517

您需要在资源检查器出现之前刷新它（开发工具托盘底部的小刷新图标）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-15T15:27:12.197

关于非常相似的主题的一些更新。安全 cookie 不会显示在不安全的网站上。

[https://groups.google.com/forum/#!topic/google-chrome-developer-tools/rSbJ1m2F3HY](https://groups.google.com/forum/#!topic/google-chrome-developer-tools/rSbJ1m2F3HY)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:35:18.897

根据经验，使用 JS 实现 cookie 后，您需要刷新 cookie 页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-09T16:00:01.770

检查浏览器中的 cookie 设置并选择允许所有 cookie 选项，然后刷新页面。

# c - 将 C 数组中的字节转换为 longs

> ID：11295728
> 
> 赞同：1
> 
> 时间：2012-07-02T14:31:46.217
> 
> 标签：c, arrays, arduino

我有一个小端字节顺序的字节数组。如何将其转换为长（四个字节）数组？

用外行的话来说，我想每四个字节合并一次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:33:35.440

```
byte b[4];  // Contains bytes
int x= 0;

x= (x << 8) + b[3];
x= (x << 8) + b[2];
x= (x << 8) + b[1];
x= (x << 8) + b[0]; 
```

我很快写了一个示例。不过，它没有经过测试。

```
unsigned char b[35];

int sizeOfB = sizeof b / sizeof(unsigned char);

int sizeOfL = sizeOfB / 4;
if(sizeOfB % 4 != 0) ++sizeOfL;
    int lcount=0;

long* l = new long[sizeOfL];

for(int i = 0; i < sizeOfB; i+=4){
    long currentLong = 0;

    if(i + 3 < sizeOfB)
        currentLong = (currentLong << 8) + b[i+3];
    if(i + 2 < sizeOfB)
        currentLong = (currentLong << 8) + b[i+2];
    if(i + 1 < sizeOfB)
        currentLong = (currentLong << 8) + b[i+1];

    currentLong = (currentLong << 8) + b[i+0];

    l[lcount]=currentlong;
    lcount++;
}

// Use l...
delete l; 
```

# java - Xpath如何将不同列中的xpath合并到一行

> ID：11295733
> 
> 赞同：-1
> 
> 时间：2012-07-02T14:32:09.133
> 
> 标签：java, xpath, selenium, webdriver, vaadin

我需要在 vaadin 表中搜索两个字符串日期和位置，当单击两个字符串所在的行时，我创建了这样一个 xpath

```
.//div[1]/div[2]/div/div[3]/div[1]/table/tbody/tr/td/div[contains(text(), 'PL')] 
```

我想添加另一个包含

```
[contains(text(),'2012-12-12')] 
```

* * *

这是代码

```
 <tbody>
<tr class="v-table-row" style="">
<tr class="v-table-row-odd" style="">
<td class="v-table-cell-content" style="width: 316px;">
<div class="v-table-cell-wrapper" style="width: 316px;">NY</div>
</td>
<td class="v-table-cell-content" style="width: 301px;">
<div class="v-table-cell-wrapper" style="width: 301px;">2012-07-10</div>
</td>
<td class="v-table-cell-content" style="width: 602px;">
<div class="v-table-cell-wrapper" style="width: 602px;">fhfhf</div>
</td>
</tr>
<tr class="v-table-row v-selected" style="">
<td class="v-table-cell-content" style="width: 316px;">
<div class="v-table-cell-wrapper" style="width: 316px;">PL</div>
</td>
<td class="v-table-cell-content" style="width: 301px;">
<div class="v-table-cell-wrapper" style="width: 301px;">2012-07-15</div>
</td>
<td class="v-table-cell-content" style="width: 602px;">
<div class="v-table-cell-wrapper" style="width: 602px;">holiday in weekend test</div>
</td>
 </tr>
 <tr class="v-table-row-odd" style="">
<td class="v-table-cell-content" style="width: 316px;">
<div class="v-table-cell-wrapper" style="width: 316px;">PL</div>
</td>
<td class="v-table-cell-content" style="width: 301px;">
<div class="v-table-cell-wrapper" style="width: 301px;">2012-07-24</div>
</td>
<td class="v-table-cell-content" style="width: 602px;">
<div class="v-table-cell-wrapper" style="width: 602px;">istotny test raportu</div>
</td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:16:09.567

虽然你可以试试

```
//div[contains(text(), 'PL') and contains(text(), '2012-12-12')] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:35:31.550

使用 XPath`and`操作，如下所示：

```
.//div[1]/div[2]/div/div[3]/div[1]/table/tbody/tr/td/div[contains(text(), 'PL') and contains(text(),'2012-12-12')] 
```

您还应该能够将其表达为：

```
.//div[1]/div[2]/div/div[3]/div[1]/table/tbody/tr/td/div[contains(text(), 'PL')][contains(text(),'2012-12-12')] 
```

# c# - 转换列表 到数组（多维）

> ID：11295746
> 
> 赞同：6
> 
> 时间：2012-07-02T14:32:51.507
> 
> 标签：c#, .net, list, multidimensional-array

> **可能重复：**
> [如何将 list<> 转换为多维数组？](https://stackoverflow.com/questions/678178/how-can-i-convert-a-list-to-a-multi-dimensional-array)

我想`double[,]`为此目的创建一个数组，因为我不知道这个数组的长度是多少，我想先制作一个，`List`然后再使用`List<T>.ToArray()`将其转换为`double[,]`：

```
public double[,] FilterClampedData(double[,] data)
{
    var finalData = new List<double[]>();

    //Do some stuff on parameter

    return finalData.ToArray(); ///Does not compile :(
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:35:52.327

既然`ToArray`返回一个一维数组，难怪这不会编译。但是，如果您要返回`double[][]`，它会编译。您还可以使用两个嵌套循环手动构建二维数组：

```
var R = finalData.Count;
var C = finalData[0].Length;
var res = new double[R, C];
for (int r = 0 ; r != R ; r++)
    for (int c = 0 ; c != C ; c++)
        res[r, c] = finalData[r][c];
return res; 
```

上面的代码假定您在 中至少有一项`finalData`，并且其中所有列表的长度`finalData`相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:35:21.013

`finalData.ToArray()`将产生`double[][]`，因为：

*   `List<T>.ToArray()`返回`T[]`
*   `List<T[]>.ToArray()`返回`T[][]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T14:35:29.127

1.  实例化一个新的最大尺寸的双精度数组[列表的长度，列表中的最大数组长度]
2.  使用 double for 循环遍历列表（首先在列表中，嵌套在当前列表项上）并填充新数组

# file - 从不同的线程更新 QProgressbar

> ID：11295749
> 
> 赞同：2
> 
> 时间：2012-07-02T14:33:03.660
> 
> 标签：file, qt, cryptography, qthread, qprogressbar

我已经开发了自己的混合流密码，并且我正在使用 Qt 的 GUI。最初我在一个线程上编写它，但它是一个流密码，在处理大文件时导致 GUI 功能失调。所以我将加密/解密转移到一个单独的 Qthread。为了显示进度，我在 GUI 上添加了一个标准的 QProgressbar。但是当我运行文件 I/O 时，加密/解密工作完美，但进度条没有正确更新。整个操作完成后，进度条突然从0%变成100%，说明在操作过程中没有机会更新。对于代码，我将完成的百分比从 FileCrypto 发送到主 GUI 线程到 QProgressbar 的 setValue(int) 插槽。既然没有

这是我的代码：

FileCrypto 类：

```
#include <QThread>
#include <QFile>
#include <PolyVernam.h>  //my algo header

class FileCrypto : public QThread
{
    Q_OBJECT

public:
    FileCrypto(QString, QString, int);
    bool stopIt;

protected:
    void run();

signals:
    void completed(int);
    void msg(QString);
    void pathMsg1(QString);
    void pathMsg2(QString);
    void keyMsg(QString);

private:
    QFile src, dest;
    QString tag;
    int mode;
    qint64 length;
    PolyVernam pv;
}; 
```

编码：

```
#include <FileCrypto.h>

FileCrypto::FileCrypto(QString input, QString keyFile, int mode)
{
    stopIt = false;
    this->mode = mode;
    src.setFileName(input);

    if(mode == 1)
    {
        emit msg("Current Encryption/Decryption status: Encrypting file... :D:D");
        tag = "-encrypted";
        pv.setMode("encrypt", "");
    }
    else
    {
        emit msg("Current Encryption/Decryption status: Decrypting file... :D:D");
        tag = "-decrypted";
        pv.setMode("decrypt", keyFile);
    }

    dest.setFileName(QFileInfo(src).absolutePath() + "/" + QFileInfo(src).baseName()
                     + tag + "." + QFileInfo(src).completeSuffix());

    length = src.bytesAvailable();
}

void FileCrypto::run()
{
    qint64 done = 0;
    quint8 r, outChar;
    char ch;

    QDataStream in(&src);
    in.setVersion(QDataStream::Qt_4_7);
    src.open(QIODevice::ReadOnly);

    QDataStream out(&dest);
    out.setVersion(QDataStream::Qt_4_7);
    dest.open(QIODevice::WriteOnly);

    while(!in.atEnd() && !stopIt)
    {
        done++;

        in >> r;
        ch = char(r);

        if(mode == 1)
            outChar = pv.encrypt(QString(ch)).at(0).toAscii();
        else
            outChar = pv.decrypt(QString(ch)).at(0).toAscii();

        out << outChar;

        emit completed(int((done / length) * 100));
    }

    src.close();
    dest.close();

    if(stopIt)
        this->exit(0);

    if(mode == 1)
    {
        emit pathMsg1(QFileInfo(src).absoluteFilePath());
        emit pathMsg2(QFileInfo(dest).absoluteFilePath());
    }
    else
    {
        emit pathMsg1(QFileInfo(dest).absoluteFilePath());
        emit pathMsg2(QFileInfo(src).absoluteFilePath());
    }

    emit keyMsg(pv.keyFilePath);
    emit msg("Current Encryption/Decryption status: Idle... :'(");
} 
```

这就是我制作线程并将其连接到主 GUI 线程的方式：

```
FileCrypto *fc = new FileCrypto(ui->lineEdit_4->text(), "", 1);

connect(fc, SIGNAL(completed(int)), ui->progressBar, SLOT(setValue(int)));
connect(fc, SIGNAL(msg(QString)), ui->statusBar, SLOT(showMessage(QString)));
connect(fc, SIGNAL(pathMsg1(QString)), ui->lineEdit_4, SLOT(setText(QString)));
connect(fc, SIGNAL(pathMsg2(QString)), ui->lineEdit_5, SLOT(setText(QString)));
connect(fc, SIGNAL(keyMsg(QString)), ui->lineEdit_2, SLOT(setText(QString)));
connect(fc, SIGNAL(keyMsg(QString)), this, SLOT(done())); 
```

如果我不更新进度条，即不发出百分比，则该过程发生得更快。我也尝试打印百分比。它像地狱一样减慢它的速度，但值很好。您还可以建议一种将其更改为缓冲 IO 的方法......

任何形式的帮助都非常感谢这里.......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T16:18:10.000

问题不在于您是从不同的线程调用的事实。它位于：

```
emit completed(int((done / length) * 100)); 
```

因为`done`和`length`是 int 类型，并且`done <= length`, `done/length == 0`。所以改成：

```
emit completed(100 * done / length); 
```

（它可能导致算术溢出）。

# iphone - 线程正在退出我的应用程序

> ID：11295752
> 
> 赞同：0
> 
> 时间：2012-07-02T14:33:12.597
> 
> 标签：iphone, objective-c, cocoa

我正在尝试将图像上传到 php 文件，一切正常，但有时当网站

加载我们的应用程序开始变慢，直到页面加载完成，所以我想

关于使用线程来避免这种毛躁，但现在我们的应用程序显示并退出。我不

看到任何警告或问题......它只是进入应用程序并立即存在。请帮我

出去

编码：

```
-(void) source {
    NSData *imageData = UIImageJPEGRepresentation(imageView.image, 80);

    NSString *urlString = @"http://domain";

    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    our_label.text = [NSString stringWithFormat:@"%@", returnString];
}

-(void)som:(id)param{
    [lock lock];

    [lock unlock];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:38:43.040

完全错误的做法。仔细查看[NSURLConnection 的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)，你会发现 sendAsynchronousRequest:queue:completionHandler: 方法。

不过，您将需要学习使用积木（但这是值得的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T14:38:44.957

您可以在异步方法中使用 NSURLRequest，但是如果您希望当前代码正常工作，请遵循这些指令

首先改变这一行

```
[NSThread detachNewThreadSelector:@selector(multithreading:) toTarget:  [MainViewController class] withObject:nil]; 
```

到

```
[NSThread detachNewThreadSelector:@selector(multithreading:) toTarget:self withObject:nil]; 
```

其次，您正在非 UI 线程中更新 UI，因此将其包装起来

```
our_label.text = [NSString stringWithFormat:@"%@", returnString]; 
```

像`dispatch_get_main_queue`下面这样

```
dispatch_async(dispatch_get_main_queue(), ^{
    our_label.text = [NSString stringWithFormat:@"%@", returnString];
}); 
```

最后移除锁，因为你并没有真正使用它们

```
 //[lock lock];
    [self source];
    //[lock unlock]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T14:42:03.733

除了yan.kun的回答，

我建议您使用第三方库，例如`AFNetworking`它具有处理异步操作的所有功能，这样更易​​于编码和安全。

链接：[https ://github.com/AFNetworking/AFNetworking/](https://github.com/AFNetworking/AFNetworking/)

# machine-learning - 低延迟生产环境中的梯度提升预测？

> ID：11295755
> 
> 赞同：7
> 
> 时间：2012-07-02T14:33:16.980
> 
> 标签：machine-learning, classification

谁能推荐一种使用 <10-15ms 范围内的梯度提升模型进行预测的策略（越快越好）？

我一直在使用`R`'s`gbm`包，但第一次预测需要大约 50 毫秒（随后的矢量化预测平均为 1 毫秒，因此似乎存在开销，可能在对 C++ 库的调用中）。作为指导，将有大约 10-50 个输入和大约 50-500 个树。任务是分类，我需要访问预测的概率。

我知道那里有很多图书馆，但我很难找到关于它们粗略预测时间的信息。训练将离线进行，因此只需要快速预测——而且，预测可能来自与训练完全分开的一段代码/库（只要有表示树的通用格式） .

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-30T10:46:08.057

我是[scikit-learn](http://scikit-learn.org) [梯度提升模块](http://scikit-learn.org/dev/modules/ensemble.html#gradient-boosting)的作者，它是 Python 中的梯度提升回归树实现。由于该方法针对低延迟环境（特别是排名问题），因此我在优化预测时间方面付出了一些努力；预测例程是用 C 编写的，由于 Python 函数调用，仍然存在一些开销。话虽如此：具有约 50 个特征和大约 250 棵树的单个数据点的预测时间应该 << 1 毫秒。

在我的用例中，预测时间通常取决于特征提取的成本。我强烈建议进行分析以查明开销的来源（如果您使用 Python，我可以推荐[line_profiler](http://packages.python.org/line_profiler/)）。

如果开销的来源是预测而不是特征提取，您可以检查是否可以进行批量预测而不是预测单个数据点，从而限制由于 Python 函数调用而产生的开销（例如，在排名中，您通常需要得分最高 - K 个文档，因此您可以先进行特征提取，然后在 K x n_features 矩阵上运行预测。

如果这没有帮助，您应该尝试限制树的数量，因为预测的运行时成本基本上与树的数量成线性关系。在不影响模型准确性的情况下，有多种方法可以限制树的数量：

1.  适当调整学习率；学习率越小，需要的树越多，因此预测越慢。

2.  具有 L1 正则化的后处理 GBM（Lasso）；请参阅第 16.3.1 节[统计学习的元素](http://www-stat.stanford.edu/~tibs/ElemStatLearn/)- 使用每棵树的预测作为新特征并通过 L1 正则化线性模型运行表示 - 删除那些没有得到任何权重的树。

3.  完全校正权重更新；不要只为最近的树进行线搜索/权重更新，而是更新所有树（参见 [Warmuth2006] 和 [Johnson2012]）。更好的收敛 - 更少的树。

如果以上方法都不能解决问题，您可以研究级联或提前退出策略（参见 [Chen2012]）

参考：

[Warmuth2006] M. Warmuth、J. Liao 和 G. Ratsch。完全修正的提升算法，最大限度地提高利润。在第 23 届机器学习国际会议论文集上，2006 年。

[Johnson2012] Rie Johnson，Tong Zhang，使用正则化贪心森林学习非线性函数，arxiv，2012。

[Chen2012] Minmin Chen, Zhixiang Xu, Kilian Weinberger, Olivier Chapelle, Dor Kedem, Classifier Cascade for Minimizing Feature Evaluation Cost, JMLR W&CP 22: 218-226, 2012.

# java - 电子邮件客户端无法验证带有使用 bouncycastle 签名的附件和图像的电子邮件

> ID：11295760
> 
> 赞同：3
> 
> 时间：2012-07-02T14:33:46.093
> 
> 标签：java, cryptography, bouncycastle, sign

我有一个**MailComposer**，它构建一个 mime 消息并使用**MailSigningService**对正文部分（内容）进行数字签名。

签名在*sign()*和*buildSignedGenerator()*方法中实现。

收到邮件后，邮件客户端检测到签名但抱怨邮件可能被篡改。邮件客户端能够显示证书，它显示所有证书（包括 CA）。

因此，要么基于 Bouncycastle 的签名实现没有正确完成，要么消息本身没有按应有的方式构建。任何提示这里可能会出现什么问题？

MailComposer.java

```
private MimeMessage buildMimeMessage(com.jumio.jump.domain.Message message, String[] recipients, String subject, Session session) throws MessagingException, IOException {

    MimeMultipart parts = buildContentParts(message);
    parts = (message.getSendOnBehalfOfDomain() != null) ? signContentParts(message, parts) : parts;

    return buildMimeMessage(message, recipients, subject, session, parts);
}

private MimeMessage buildMimeMessage(com.jumio.jump.domain.Message message, String[] recipients, String subject, Session session, MimeMultipart parts) throws MessagingException {
    MimeMessage mimeMessage = new MimeMessage(session);
    mimeMessage.setSubject(subject, "UTF-8");
    mimeMessage.setHeader("Content-ParamType", "text/html; charset=UTF-8");
    mimeMessage.setSentDate(new Date());
    mimeMessage.setFrom(buildFromEmailAddress(message));
    for (String recipient : recipients) {
        if (recipient == null) {
            continue;
        }
        InternetAddress addressTo = new InternetAddress(recipient);
        mimeMessage.addRecipient(Message.RecipientType.TO, addressTo);
    }
    mimeMessage.setContent(parts);
    return mimeMessage;
}

private MimeMultipart signContentParts(com.jumio.jump.domain.Message message, MimeMultipart contentParts)
        throws MessagingException {
    MimeBodyPart body = new MimeBodyPart();
    body.setContent(contentParts);
    MimeMultipart result;
    try {
        result = mailSigningService.sign(body, signerCertificate, certificateChain,
                privateKey);
    } catch (Exception e) {
        logger.error(String.format("Error signing message $s, sending unsigned", message), e);
        return contentParts;
    }
    return result;
} 
```

MailSigningService.java

```
@Override
public MimeMultipart sign(MimeBodyPart mimeBodyPart, X509Certificate signerCertificate,
        Certificate[] caCertificateChain,  PrivateKey privateKey)
        throws SMIMEException, OperatorCreationException, CertificateEncodingException, NoSuchProviderException,
        NoSuchAlgorithmException, InvalidAlgorithmParameterException {
    Validate.notNull(signerCertificate, "Valid certificate required, check keystore and/or keystore " +
            "configuration");
    Validate.notNull(privateKey, "Valid private key required, check keystore and/or keystore configuration");

    SMIMESignedGenerator generator = buildSignedGenerator(signerCertificate, caCertificateChain, privateKey);
    return generator.generate(mimeBodyPart);
}

private SMIMESignedGenerator buildSignedGenerator(X509Certificate signerCertificate, Certificate[] caCertificateChain, PrivateKey privateKey)
        throws OperatorCreationException, CertificateEncodingException, NoSuchProviderException,
        NoSuchAlgorithmException, InvalidAlgorithmParameterException {

    SMIMECapabilityVector capabilities = new SMIMECapabilityVector();
    capabilities.addCapability(SMIMECapability.dES_EDE3_CBC);
    capabilities.addCapability(SMIMECapability.rC2_CBC, 128);
    capabilities.addCapability(SMIMECapability.dES_CBC);

    ASN1EncodableVector attributes = new ASN1EncodableVector();
    attributes.add(new SMIMEEncryptionKeyPreferenceAttribute(new IssuerAndSerialNumber(new X509Name(
            signerCertificate.getIssuerDN().getName()), signerCertificate.getSerialNumber())));
    attributes.add(new SMIMECapabilitiesAttribute(capabilities));

    SMIMESignedGenerator generator = new SMIMESignedGenerator();

    generator.addSignerInfoGenerator(new JcaSimpleSignerInfoGeneratorBuilder().setProvider(SECURITY_PROVIDER_NAME)
            .setSignedAttributeGenerator(new AttributeTable(attributes)).build(SIGNER_ALGORITHM, privateKey,
                    signerCertificate));

    List<Certificate> certificates=new ArrayList<Certificate>();
    if (caCertificateChain !=null && caCertificateChain.length>0) {
        certificates.addAll(Arrays.asList(caCertificateChain));
    } else {
        certificates.add(signerCertificate);
    }
    Store certificateStore = new JcaCertStore(certificates);
    generator.addCertificates(certificateStore);
    return generator;
} 
```

# c# - 如何在 C# 中实现健壮的截断方法？

> ID：11295761
> 
> 赞同：2
> 
> 时间：2012-07-02T14:33:46.487
> 
> 标签：c#, .net, math, truncate

我知道.NET 有一个内置的，但它是一个外部调用。有谁知道为什么？

但实际的问题是如何从头开始实现截断，用户将能够指定要保留多少位数字？将一个数字乘以 100 然后除以相同的数量就足够了吗？还是有更好的实现方式？

就像是：

```
Truncate(12.3456789, 3);
// returns 12.345 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:50:06.513

您可能想查看 IEEE 浮点整数。

然后，您可以使用`unsafe`代码来修改数字，例如：

```
unsafe
{
    double* pValue = &value;
    var asLong = *(long*)pValue;
    do whatever you want with asLong, e.g. bit-masking it, etc.; 
} 
```

至于“为什么”：我不知道，尽管[共享源 CLI](http://www.microsoft.com/en-us/download/details.aspx?id=4917)可能会提供线索。我的*猜测*是这可能是因为性能优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T14:51:20.217

经典方式：

```
var x = 1.2345678;
var tr = 4;

var truncated = (int) (x * Math.Pow(10, tr)) / Math.Pow(10, tr); 
```

将给出 1.2345；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T14:56:35.873

这是我将如何做到的。在 C++ 中，我认为在 C# 中也是如此，您可以通过将浮点数转换为整数类型来获取浮点数的整数部分。

```
double Truncate (double num, int dig)
{
    if (dig > 15) dig = 15; // Don't overflow
    long p = Math.Pow (10, dig);

    // Save the integer part, so that we don't overflow
    long integer_part = (long)num;

    // Fractional part * 10^dig
    double frac = (num - Convert.ToDouble(integer_part)) * p;
    long frac_trunc = (long)frac;

    // Final result
    double result = Convert.ToDouble(integer_part) + (Convert.ToDouble(frac_trunc) / p);
    return result;
} 
```

> 将一个数字乘以 100 然后除以相同的数量就足够了吗？

这应该可行，但要小心，因为数字很大或位数很多，你很容易溢出，它会给你带来奇怪的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T14:39:37.113

```
var result = Math.Round(12.3456789, 3); 
```

[Math.Round 方法 (Double, Int32)](http://msdn.microsoft.com/en-us/library/75ks3aby)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-02T14:45:01.197

目前尚不清楚您认为 Truncate 应该保留十进制值的原因。

.NET 中的默认方法由以下语句描述：

> d的整数部分；也就是说，在任何小数位被丢弃后剩余的数字。

似乎您想要使用的是格式化双精度/十进制值的输出字符串和/或改用 Math.Round(double, int) 函数。

你可以只使用：

```
double num = 2.22939393; num  = Convert.ToDouble(num.ToString("#0.000")); 
```

从重复的问题之一：

```
public static decimal TruncateToDecimalPlace(this decimal numberToTruncate, int decimalPlaces) 
{     
       decimal power = (decimal)(Math.Pow(10.0, (double)decimalPlaces));      
       return Math.Truncate((power * numberToTruncate)) / power; 
} 
```

我知道这仍然使用该`Truncate`方法。我只提供了这段代码，因为您需要一种`Truncate`方法来保留数字的十进制值，而默认的内置`Truncate`方法则没有。

你总是可以使用这个：

Math.Round 不会`SplitFractionDouble`根据我的判断调用

```
 private static unsafe double InternalRound(double value, int digits, MidpointRounding mode) {
            if (Abs(value) < doubleRoundLimit) {
                Double power10 = roundPower10Double[digits];
                value *= power10;
                if (mode == MidpointRounding.AwayFromZero) {                
                    double fraction = SplitFractionDouble(&value); 
                    if (Abs(fraction) >= 0.5d) {
                        value += Sign(fraction);
                    }
                }
                else {
                    // On X86 this can be inlined to just a few instructions
                    value = Round(value);
                }
                value /= power10;
            }
            return value;
          }           

     public static double Round(double value, int digits)
      {
           if ((digits < 0) || (digits > maxRoundingDigits))
               throw new ArgumentOutOfRangeException("digits", Environment.GetResourceString("ArgumentOutOfRange_RoundingDigits"));
           return InternalRound(value, digits, MidpointRounding.ToEven);                     
      }

  public static double Round(double value, MidpointRounding mode) {
         return Round(value, 0, mode);
      }

      public static double Round(double value, int digits, MidpointRounding mode) {
          if ((digits < 0) || (digits > maxRoundingDigits))
              throw new ArgumentOutOfRangeException("digits", Environment.GetResourceString("ArgumentOutOfRange_RoundingDigits"));
          if (mode < MidpointRounding.ToEven || mode > MidpointRounding.AwayFromZero) {            
              throw new ArgumentException(Environment.GetResourceString("Argument_InvalidEnumValue", mode, "MidpointRounding"), "mode");
          }
          return InternalRound(value, digits, mode);                           
      }

      public static Decimal Round(Decimal d) {
        return Decimal.Round(d,0);
      }

      public static Decimal Round(Decimal d, int decimals) {
        return Decimal.Round(d,decimals);
      }

      public static Decimal Round(Decimal d, MidpointRounding mode) {
        return Decimal.Round(d, 0, mode);
      }

      public static Decimal Round(Decimal d, int decimals, MidpointRounding mode) {
        return Decimal.Round(d, decimals, mode);
      } 
```

public static Decimal Floor(Decimal d) { return Decimal.Floor(d); }

[MethodImplAttribute(MethodImplOptions.InternalCall)] public static extern double Floor(double d);

# c# - 简单的 LINQ to Entities 更新抛出“超时已过期”

> ID：11295762
> 
> 赞同：1
> 
> 时间：2012-07-02T14:33:47.637
> 
> 标签：c#, entity-framework, exception-handling, linq-to-entities, timeout

下面的简单方法是抛出超时错误，我不知道为什么会这样。这可能会连续多次执行，我想知道这是否是原因？

```
public static Boolean UpdateMessageState(int messageId, int stateId, string message)
{
    var repo = new MailItemRepository();
    try
    {
        var objTask = repo.GetMailByMailId(messageId);

        objTask.State = stateId;
        objTask.Result = message;
        repo.Save();

        return true;
    }
    catch (Exception ex)
    {
        logger.Info(ex.Message);
        logger.Info(ex.InnerException);
        return false;
    }
} 
```

错误跟踪：

```
2012-07-02 15:26:38.1002|INFO|EF.Methods.MailMethods.UpdateMessageState|System.Data.SqlClient.SqlException (0x80131904): Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator translator, EntityConnection connection, Dictionary`2 identifierValues, List`1 generatedValues)
   at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter) 
```

***编辑：***

我已经从等式中删除了 LINQ，现在将其作为 UpdateMessageState

```
public static Boolean UpdateMessageState(int messageId, int stateId, string message)
    {

        var success = true;

        var conn =
            new SqlConnection(
                "Data Source=...");

        try
        {

            //logger.Info(String.Format("S1:messageId={0},stateId={1},message={2}", messageId, stateId, message));

            var cmdPers = new SqlCommand("procMailQueueStatusUpdate", conn)
                              {
                                  CommandType = CommandType.StoredProcedure
                              };

            cmdPers.Parameters.Add("@MessageId", SqlDbType.Int);
            cmdPers.Parameters.Add("@StateId", SqlDbType.Int);
            cmdPers.Parameters.Add("@Message", SqlDbType.VarChar, -1);

            cmdPers.Parameters["@MessageId"].Value = messageId;
            cmdPers.Parameters["@StateId"].Value = stateId;
            cmdPers.Parameters["@Message"].Value = message;

            conn.Open();
            cmdPers.ExecuteNonQuery();

        }
        catch (Exception ex)
        {
            logger.Info(ex.Message);
            success = false;
        }
        finally
        {
            if (conn.State == ConnectionState.Open)
            {
                conn.Close();
                conn.Dispose();
            }
        }
        return success;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:43:51.917

我的猜测是 sql sever 的响应速度比您预期的要慢一些。这可能是由多种原因引起的（内存压力、磁盘 IO、资源等待、网络延迟等）。

只需增加连接的超时时间，您就应该是金色的。您可以进行此更改，将“连接超时”关键字添加到当前连接字符串中

[http://www.connectionstrings.com/Articles/Show/all-sql-server-connection-string-keywords](http://www.connectionstrings.com/Articles/Show/all-sql-server-connection-string-keywords)

IE

```
Data Source=myServerAddress;Initial Catalog=myDataBase;User Id=myUsername;Password=myPassword;Connect Timeout=60 
```

如果失败，请尝试增加命令超时。使用 ADO 时，您可以执行以下操作。

```
using (SqlConnection con = new SqlConnection())
using(SqlCommand cmd = new SqlCommand())
{            
    cmd.CommandTimeout = 60;
    cmd.Connection = con;
} 
```

要在 linq 中将此属性设置为实体，请使用以下方法

```
using (MyEntities db = new MyEntities())
{
  db.CommandTimeout = 60;
} 
```

# slf4j - slf4j 没有 toString()

> ID：11295764
> 
> 赞同：13
> 
> 时间：2012-07-02T14:33:53.737
> 
> 标签：slf4j

当您`LOG.debug("Exported {}.", product)`在 slf4j 中执行类似操作时，它最终会在参数上调用 toString()，例如`product`.

由于某些原因，我无法在我想用作参数的所有类上覆盖 toString()。一些类来自第三方 jars，其他类也会在其他上下文中调用它们的 toString()，在这些上下文中我想在我的日志语句中打印的信息不可用。

但是，我有一个用于调试目的的类，它有一个方法，该方法`DebugFormatter.format(Object)`具有很长的 instanceofs 级联，可以选择例程来查找有关该对象的一些有用的调试信息。

我的问题是：是否可以配置 slf4j 使其调用这样的静态方法而不是 toString()？

当然，我可以在将它作为参数传递给对象之前调用我的格式方法，`Logger.debug()`但是即使没有启用相应的记录器，它也会被执行。所以我不得不用它来包围它，`if (LOG.isDebugEnabled())`这意味着在 debug() 中有参数的全部意义都被忽略了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T14:54:37.100

您可以创建一个 shim，获取您的对象并`DebugFormatter.format()`从其`toString()`函数中调用。像这样的东西：

```
class DebugFormatObject {
  private final Object o;

  public static DebugFormatObject forDebug(Object o) {
    return new DebugFormatObject(o);
  }

  private DebugFormatObject(Object o) {
    this.o = o;
  }

  @Override
  public String toString() {
    return DebugFormatter.format(o);
  }
} 
```

通过适当的静态导入，您的日志记录语句变为：

```
LOG.debug("Exported {}.", forDebug(product)); 
```

这确实比直接传递对象稍微多一些开销，但它是一个小的、恒定的开销——并且创建的对象将非常短暂。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T09:55:55.903

如果底层日志框架是原生实现，例如[logback](/questions/tagged/logback "显示标记为“logback”的问题")，则对参数的 toString() 调用由日志框架而**不是**SLF4J 执行。因此，您可以通过创建[自定义转换器](http://logback.qos.ch/manual/layouts.html#customConversionSpecifier)在实际输出/打印日志消息时调用 DebugFormatter.format(o) 。更具体地说，您将创建一个转换器来替换 %msg/%message。

对于非本地实现，toString() 调用由 SLF4J 进行。因此，Andrew 和 Sean 提供的答案适用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-29T09:45:27.630

对于那些想要编写自定义 Logback Convereter 的人，这是我为避免遗留对象完全转储而编写的代码：

```
...
import ch.qos.logback.classic.pattern.MessageConverter;
import ch.qos.logback.classic.spi.ILoggingEvent;

public class PrettyMessageConverter extends MessageConverter {

    private static final String EMPTY = "";
    private static final String PLACEHOLDER = "{}";

    @Override
    public String convert(ILoggingEvent event) {
        StringBuilder message = new StringBuilder(event.getMessage());

        int argumentIndex = 0;
        int placeholderIndex = -1;
        while ( (placeholderIndex=message.indexOf(PLACEHOLDER, placeholderIndex))!=-1 && message.charAt(placeholderIndex-1)!='\\' ) {
            String stringValue = valueOf(getArgument(event.getArgumentArray(), argumentIndex++));
            message.replace(placeholderIndex, placeholderIndex+PLACEHOLDER.length(), stringValue);
        }
        return message.toString();
    }

    /**
     * Return a {@link String} representation of the given object. It use convert 
     * some complex objects as a single line string and use {@link String#valueOf(Object))} 
     * for other objects.
     */
    private String valueOf(final Object object) {
        if ( object instanceof AuthenticatedUser )
            return valueOf((AuthenticatedUser) object);

        return String.valueOf(object);
    }

    private String valueOf(AuthenticatedUser user) {
        return user.getUsername();
    }

    /** 
     * Retrieve an argument at a given position but avoid {@link ArrayIndexOutOfBoundsException}
     * by returning {@link PrettyMessageConverter#EMPTY} string when the index 
     * is out of bounds. 
     */
    private Object getArgument(Object[] arguments, int index) {
        return (index<arguments.length)?arguments[index]:EMPTY;
    }

} 
```

使用*logback.xml*中的这一行：

```
 <conversionRule conversionWord="msg" converterClass="PrettyMessageConverter" /> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T15:09:10.407

恐怕 slf4j 不是为了以这种方式扩展而构建的。您*可以*做的是实现您自己的 slf4j 实现，它充当现有实现的装饰器，为某些已知类型提供特殊处理。但是您将不得不重新发明许多轮子。例如：您的记录器实现方法必须从每个开始，`if(underLyingLogger.isXyzEnabled())`尽管在您的装饰器调用底层方法后，底层记录器将再次执行完全相同的检查。

另一方面，我过去使用的解决方法是 ToString-Delegate。最简单的形式可以是一个匿名对象：

```
final SomeObject myObj = ...;
LOG.debug("foo {}", new Object(){
     public String toString(){
         return myObj.someMethod();
     }
}); 
```

在这里，您也有短暂的包装对象，但您实际上不会渲染字符串，直到您必须这样做。

因为上面的语法很丑，我建议你提供一个带有静态辅助方法的 Factory 类来创建这些 ToString 对象。在我的例子中，我有一个名为 ToStringWrapper 的抽象类，它具有用于使用 Guava Joiner 等连接可迭代对象的工厂方法。

# sorting - 从 Backbone.js 中的事件触发排序方法

> ID：11295770
> 
> 赞同：0
> 
> 时间：2012-07-02T14:34:18.190
> 
> 标签：sorting, backbone.js, comparator

我有一个 Backbone.js 项目，它使用集合中定义的比较器函数。它在页面刷新时对项目进行排序，但我试图在单击按钮而不是在页面刷新时对其进行排序。这是我的代码：

```
 var Thing = Backbone.Model.extend({
     defaults: {
         title: 'blank',
         rank: ''
     }
 });
 var ThingView = Backbone.View.extend({
    className: 'thingClass',
     template: _.template('<b><button id="remove">X</button> <b><button id="edit">Edit</button> <%= title %>  Rank:<%= rank %></b>'),
     editTemplate: _.template('<input class="name" value="<%= name %>" /><button id="save">Save</button>'),

     events: {
         "click #remove": "deleteItem",
         "click #edit": "editItem",
         "click #save": "saveItem",
     },
     deleteItem: function () {
         console.log('deleted');
         this.model.destroy();
         this.remove();
     },
     editItem: function () {
         console.log('editing');
         this.$el.html(this.editTemplate(this.model.toJSON()));
     },
     saveItem: function () {
         console.log('saved');
         editTitle = $('input.name').val();
         console.log(editTitle);
         this.model.save({
             title: editTitle
         });
         this.$el.html(this.template(this.model.toJSON()));
     },
     render: function () {
         var attributes = this.model.toJSON();
         //console.log (attributes);
         this.$el.append(this.template(attributes));
         return this;
     }
 });
 var ThingsList = Backbone.Collection.extend({
     model: Thing,
     localStorage: new Store("store-name"),
     comparator: function(thing) {
     return thing.get('rank');
     },
 });

 var thingsList = new ThingsList;
 var ThingsListView = Backbone.View.extend({
     el: $('body'),
     events: {
         'click #add': 'insertItem',
         'click #sort': 'sortItems',
     },
     initialize: function () {
    thingsList.fetch();
    thingsList.toJSON();
         this.render();
         this.collection.on("add", this.renderThing, this);
         this.collection.on("reset", this.clearRender, this);
     },
     insertItem: function (e) {
         newTitle = $('#new-item').val();
         newRank = $('#rank').val();
         newThing = new Thing({
             title: newTitle,
             rank: newRank
         });
         this.collection.add(newThing);
         newThing.save();
         console.log(this.collection.length);
     },

     sortItems: function (e) {
        console.log('clicked sort button');
        this.collection.sort();
        this.$el.detach('.item');
     },

     render: function () {
         _.each(this.collection.models, function (items) {
             this.renderThing(items);
         }, this);

     },
     renderThing: function (items) {
         var thingView = new ThingView({
             model: items
         });
         this.$el.append(thingView.render().el);
     },

     clearRender: function () {
        console.log('clear render called')

         _.each(this.collection.models, function (items) {
             //this.remove();
             this.$el.remove(".thingClass")
             this.renderThing(items);
         }, this);

     },

     test: function (items) {
         console.log('test worked');
     },

 });
 var thingsListView = new ThingsListView({
     collection: thingsList
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:06:40.037

你确定你的收藏不是靠自己吗？请记住，如果模型已经呈现，集合中模型的顺序不会改变它们在页面上的显示顺序。

我猜您正在尝试做的是对已经渲染的项目进行处理，为此您需要重新渲染您的收藏。如果您打算这样做，我建议您缓存您的视图并在排序时从 DOM 中分离关联的元素并以正确的顺序重新附加它们。

举个例子

```
var ThingsListView = Backbone.View.extend({
  _views: {},

  initialize: function () {
        this.collection.bind('add', this.add, this);
        this.collection.bind('reset', this.render, this); //sort triggers a reset 
  },

  add: function (thing) {
    var view = new ThingView({model: thing});
    this._views[thing.cid] = view; //use client id of model as key for the views cache
    this.$el.append(view.render().el); 
  },

  render: function() {

    $('li, this.$el).detach(); //detach so that bound events aren't lost
    _.each(this.collection.models, function(thing) {        
        this.$el.append(this.views[thing.cid].el); //get view from cache
    },this);

  },

  sort: function() {
    this.collection.sort();
  }

}

}) 
```

（与我的示例代码和您的代码有一些不同之处，我在这里假设集合视图有一个 'el' 指代容器 'ul'，我也没有显示您如何触发排序（基本上类似于`thingListView.sort()`;）

编辑：从我发布的示例代码中可能不是那么明显，所以我应该先提到@Deeptechtons 所说的，当你对集合进行排序时，它[会触发一个`reset`](http://documentcloud.github.com/backbone/#Collection-sort)事件

Edit2：如果您对缓存视图不感兴趣，那么删除当前视图的最简单方法可能是向呈现的 div 添加一个类

```
var ThingView = Backbone.View.extend({
     className: 'thingClass',
   //rest of your thingViewCode 
```

然后在您的 clearRender 方法中添加`$(".thingClass", this.$el).remove();`到方法的开头。

# iphone - UIImageView 动画 - 在延迟后使用执行选择器显示数组中的最后一个图像

> ID：11295774
> 
> 赞同：0
> 
> 时间：2012-07-02T14:34:35.930
> 
> 标签：iphone, objective-c, ios, uiimageview

基本上，我有一个 UIImageView 将在 0.5 秒内循环通过 8 个 PNG。在开始动画的同时，我做了一个 afterDelay 为 0.5 秒的 performSelector。所以在我的 UIImageView 完成动画之后，它会调用 animationTickDone ，它将最后一个图像隐藏为 no。

无论如何，这是代码：

```
.h
@interface ViewController : UIViewController{
    IBOutlet UIView *scannedView;
    IBOutlet UIImageView *animatedTickLast;
}
@property (nonatomic, retain) IBOutlet UIView *scannedView;
@property (nonatomic, retain) IBOutlet UIImageView *animatedTickLast;

.m
-(void)Found{
        [self.view addSubview:scannedView];
        [animatedTickLast setHidden:YES];
        //place animated tick images into an array
        NSMutableArray *animatedTickImages;
        animatedTickImages = [[NSMutableArray alloc] init];
        NSUInteger nimages = 0;
        for (nimages=0; nimages<8; nimages++){
            NSString *tickImageName = [NSString stringWithFormat:@"tick_%d.png", (nimages + 1)];
            [animatedTickImages addObject:[UIImage imageNamed:tickImageName]];
        }
        //set up animated tick
        UIImageView *animatedTick = [[UIImageView alloc] initWithFrame:CGRectMake(98, 213, 125, 90)];
        [animatedTick setAnimationImages:animatedTickImages];
        [animatedTick setAnimationDuration:0.5];
        [animatedTick setAnimationRepeatCount:1];
        [animatedTick startAnimating];
        NSLog(@"animation started");
        [self performSelector:@selector(animationTickDone) withObject:nil afterDelay:0.5];
        [scannedView addSubview:animatedTick];
        NSLog(@"animation added into view");
        [animatedTickImages release];
}
- (void)animationTickDone{
    NSLog(@"delay function begins");
    [animatedTickLast setHidden:NO];
    sleep(1); //sleep so that scannedView stays on screen for at least 1.5 seconds (0.5 after animation + 1 from sleep);
} 
```

现在，问题。动画本身很好，效果很好。但是当第一次调用 Found() 时，animatedTickLast 将在动画结束后变得可见。但是，当 Found 再次被调用后，animatedTickDone 再也不会出现，它只是一个空白空间。

经过数小时的网络搜索和使用它，我无法理解为什么它没有出现的问题。我认为在我的 animatedTickLast 有机会将 hidden 设置为 no 之前调用了 sleep() ，但是在删除 sleep() 之后它仍然不起作用。

现在让我发疯，非常感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:40:40.303

如果我理解正确，您需要 UIImageView 中的动画之后的图像。只需在动画之前设置图像就可以了！

```
[animatedTick setAnimationImages:animatedTickImages];
[animatedTick setAnimationDuration:0.5];
[animatedTick setAnimationRepeatCount:1];
[animatedTick setImage:theImageYouLikeToHave];
[animatedTick startAnimating]; 
```

# json - 在 Play 2.0 中从 JSON 反序列化回 joda DateTime

> ID：11295776
> 
> 赞同：2
> 
> 时间：2012-07-02T14:34:38.667
> 
> 标签：json, playframework, deserialization, playframework-2.0, jodatime

我无法弄清楚允许在我的应用程序中为 DateTime 字段发布 JSON 的神奇词汇。查询时，`DateTime`s 以自纪元以​​来的微秒返回。当我尝试以该格式发布时（`{"started":"1341006642000","task":{"id":1}}`），我得到“无效值：开始”。

我还尝试添加`@play.data.format.Formats.DateTime(pattern="yyyy-MM-dd HH:mm:ss")`到该`started`字段并发布`{"started":"2012-07-02 09:24:45","task":{"id":1}}`具有相同结果的内容。

控制器方法是：

```
@BodyParser.Of(play.mvc.BodyParser.Json.class)
public static Result create(Long task_id) {
    Form<Run> runForm = form(Run.class).bindFromRequest();
    for (String key : runForm.data().keySet()) {
        System.err.println(key + " => " + runForm.apply(key).value() + "\n");
    } 
    if (runForm.hasErrors())
        return badRequest(runForm.errorsAsJson());

    Run run = runForm.get();
    run.task = Task.find.byId(task_id);
    run.save();

    ObjectNode result = Json.newObject();
    result.put("id", run.id);

    return ok(result);
} 
```

我还可以从输出中看到正确接收到的值。任何人都知道如何使这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T16:21:39.343

[在阅读了处理表单提交](http://www.playframework.org/documentation/2.0/JavaForms)页面的“注册自定义 DataBinder”部分以及[应用程序全局设置](http://www.playframework.org/documentation/2.0/JavaGlobal)页面并与[这个问题](https://stackoverflow.com/questions/10939741/play-framework-2-0-custom-formatters/11297337#11297337)进行比较后，我想出了以下解决方案：

我创建了一个带有*可选*格式属性的自定义注释：

```
package models;

import java.lang.annotation.*;

@Target({ ElementType.FIELD })
@Retention(RetentionPolicy.RUNTIME)
@play.data.Form.Display(name = "format.joda.datetime", attributes = { "format" })
public @interface JodaDateTime {
    String format() default "";
} 
```

并从以下位置注册了一个自定义格式化程序`onStart`：

```
import java.text.ParseException;
import java.util.Locale;

import org.joda.time.DateTime;
import org.joda.time.format.DateTimeFormat;

import play.*;
import play.data.format.Formatters;

public class Global extends GlobalSettings {

    @Override
    public void onStart(Application app) {
        Formatters.register(DateTime.class, new Formatters.AnnotationFormatter<models.JodaDateTime,DateTime>() {
                @Override
                public DateTime parse(models.JodaDateTime annotation, String input, Locale locale) throws ParseException {
                    if (input == null || input.trim().isEmpty())
                        return null;

                    if (annotation.format().isEmpty())
                        return new DateTime(Long.parseLong(input));
                    else
                        return DateTimeFormat.forPattern(annotation.format()).withLocale(locale).parseDateTime(input);
                }

                @Override
                public String print(models.JodaDateTime annotation, DateTime time, Locale locale) {
                    if (time == null)
                        return null;

                    if (annotation.format().isEmpty())
                        return time.getMillis() + "";
                    else
                        return time.toString(annotation.format(), locale);
                }

        });
    }

} 
```

您可以根据需要指定格式，或者默认情况下它将使用自纪元以来的毫秒数。我希望有一个更简单的方法，因为 Joda 包含在 Play 发行版中，但这让事情变得正常。

*注意：您需要重新启动 Play 应用程序，因为它似乎没有检测到对`Global`类的更改。*

# ios - 如何每次使用 AFNetworking 读取响应标头？

> ID：11295781
> 
> 赞同：1
> 
> 时间：2012-07-02T14:34:43.073
> 
> 标签：ios, afnetworking

在使用 3rd 方 API 时，我需要在**自定义响应标头**设置为某个值时取消所有流量。我试图在我的代码中找到一个只做一次检查的好地方（而不是在每个成功/失败块中，它工作正常）。据我了解，这可以通过覆盖`-(void)enqueueHTTPRequestOperation:(AFHTTPRequestOperation *)operation`我的自定义`AFHTTPClient`子类来完成，但是当我这样实现它时：

```
-(void)enqueueHTTPRequestOperation:(AFHTTPRequestOperation *)operation
{
    NSLog(@"[REQUEST URL]\n%@\n", [operation.request.URL description]);
    NSLog(@"[RESPONSE HEADERS]\n%@\n", [[operation.response allHeaderFields] descriptionInStringsFileFormat]);

    [super enqueueHTTPRequestOperation:operation];
} 
```

响应标头是`nil`. 有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:42:38.800

在创建操作并将其排入队列的那一刻`AFHTTPClient`，它们将没有来自服务器的响应——将在实际执行请求操作时分配。

尽管取消所有流量的要求似乎不合常规（至少在 HTTP 约定之外的情况下），但这很容易实现：

在您的`AFHTTPClient`子类中，添加一个`BOOL`存储是否应阻止请求的属性，然后在`enqueueHTTPRequestOperation`. 然后，如果存在显着响应，则覆盖`HTTPRequestOperationWithRequest:success:failure:`以执行指定的成功块以及一些设置上述属性的逻辑。

# php - Solr：检查文档是否存在而不检索文档

> ID：11295782
> 
> 赞同：4
> 
> 时间：2012-07-02T14:34:44.483
> 
> 标签：php, solr, nosql

我需要确定一个文档是否存在，但保存在 Solr 服务器中的文档非常大，所以如果我进行经典搜索以检索具有指定`id`的文档并返回文档，则需要花费太多时间来处理。是否有可能在不检索实际文档的情况下返回例如匹配文档的数量？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T17:21:28.480

是的，这是可能的。您可以在提交查询时设置 rows=0，执行它。不返回任何实际文件。

在响应中，您可以从响应中读取 numFound 属性。如果 numFound=1（因为这是 ID），则找到该文档。

# c - K&R的getc和putc实现对吗？

> ID：11295784
> 
> 赞同：5
> 
> 时间：2012-07-02T14:34:54.457
> 
> 标签：c, getc

在 K&R 第 8 章中，它具有 putc 和 getc 函数的自定义实现。在getc的第一个定义中，如果参数是stdin，根据_iob的定义，函数会尝试写入地址0，因为这是_iob[0].ptr和_iob[0].base的值分配的。这合法吗？

代码：http: [//ideone.com/AIkCA](http://ideone.com/AIkCA)

_iob 的定义：

```
FILE _iob[20] = {
 {0, (char *) 0, (char *) 0, _READ, 0},
 {0, (char *) 0, (char *) 0, _WRITE, 0},
 {0, (char *) 0, (char *) 0, _WRITE, 0}
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:52:28.283

我很难理解所问的内容，但是从问题中“自定义”的使用来看，从一个角度来看，在现有系统上替换`getc`和使用这些定义是否有效，答案是否定的`putc`. K&R 中的示例向您展示了编写 stdio 库的一种方法，而不是可以与现有的（可能非常不同的）stdio 实现一起使用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:06:05.290

其实，我错了。

在 getc(stdin) 的第一次调用中，计数器将为 0，因此 --(p)->cnt 不会 >= 0，因此将调用 _fillbuf。然后 fillbuf 将分配缓冲区，然后它将使用读取命令 (fp->cnt = read(fp->fd, fp->ptr, bufsize) 从标准输入读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:46:53.287

假设我们面前都有相同的代码，答案是否定的。

```
#define getc(p)  (--(p)->cnt >= 0 \
  ? (unsigned char) *(p)->ptr++ : _fillbuf(p)) 
```

`stdin`用 初始化`cnt==0`，所以这个定义`getc`将分支到`_fillbuf`（不看`(p)->ptr`），并且`_fillbuf`有特殊的代码用于这种`fp->base == NULL`情况，并设置`base`和`ptr`到分配的内存。

# ios - 使用 Cocos2d 中的 CCParticle 之类的酷气泡效果（无第三方工具）

> ID：11295793
> 
> 赞同：1
> 
> 时间：2012-07-02T14:35:22.843
> 
> 标签：ios, graphics, cocos2d-iphone, effects, particles

我想像[这里](http://www.lifeofandroid.com/wp-content/uploads/2012/02/Bubble_Shoot_main_580.png)一样实现很酷的粒子效果。

气泡应该类似于从中心开始并扩大的爆炸。我想添加一个从气泡左右两侧出来的动画波，看起来像[这样](http://telepics.net/uploads/pictures/big_images/Animated_Music_Wave.jpg)。我想我可以使用两个不同的动画并将它们放在一起，因为我认为这在 Cocos2d 游戏中从未做过。

另外，我想避免使用非 Cocos2d 工具作为[粒子设计](http://particledesigner.71squared.com/)器。在[Cocos2d 食谱](http://cocos2dcookbook.com/)的第 1 章中，我找到了一些很酷的粒子示例，并且代码似乎并不太复杂。相反，使用第三方工具我需要导入他们的类并使用他们的文件格式来创建粒子，我必须付费。更重要的是，似乎没有很多粒子效果文件共享（至少不是我想要的）。

非常感谢。

编辑：我添加了一个关于两个动画中的第一个如何工作的理论的评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T00:33:48.980

您最好的机会是使用 Particle Designer。您可以修改库中的发射器并可视化您的更改。这是实现出色效果的最简单方法。一旦你找到你喜欢的值的组合，你可以简单地从代码中创建一个发射器并自己设置所有这些属性。您不必支付或使用任何课程（实际上您不必这样做，它已经内置在 cocos2D 中）。所以只需下载免费版本的粒子设计器，然后从代码中设置值。这是同样的事情，只是需要做更多的工作。

# jquery - 如果返回值为真，则在 AJAX 中添加一个类

> ID：11295795
> 
> 赞同：0
> 
> 时间：2012-07-02T14:35:26.897
> 
> 标签：jquery, ajax

下午，我想知道如何根据 Web 服务的返回值添加一个类。

```
$.each(result, function (index, res) {
            new_record = "<tr>" +
                         "<th scope=\"row\" class=\"t-left\"><a href=\"editproduct.aspx?sku=" + res.sku + "\" title=\"Edit this product listing\">" + res.title + "</a></th>" +
                         "<td><a href=\"http://www.amazon.co.uk/dp/" + res.asin + "\" target=\"_blank\" title=\"Visit the Amazon product listing\" >" + res.asin + "</a></td>" +
                         "<td>" + res.sku + "</td>" +
                         "<td>" + res.stock + "</td>" +
                         "<td> £" + res.price + "</td>" +
                         "<td>" + res.live + "</td>" +
                         "</tr>";

            $('#dataResults').append(new_record); 
```

我还返回了一个值 stockUpdated，我想添加一个类来更改股票表字段的颜色，具体取决于这是否返回 true。

我不记得我以前是怎么做到的，但它类似于 if 语句

提前谢谢了。

艾伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:40:04.853

假设我已经正确理解了您的问题，您可以将 class 属性附加到字符串，具体取决于您的`stockUpdated`属性是否计算为 true：

```
$.each(result, function (index, res) {
    new_record = "<tr>" +
                 "<th scope=\"row\" class=\"t-left\"><a href=\"editproduct.aspx?sku=" + res.sku + "\" title=\"Edit this product listing\">" + res.title + "</a></th>" +
                 "<td><a href=\"http://www.amazon.co.uk/dp/" + res.asin + "\" target=\"_blank\" title=\"Visit the Amazon product listing\" >" + res.asin + "</a></td>" +
                 "<td>" + res.sku + "</td>" +
                 "<td" + (res.stockUpdated ? " class='updated'" : "") + ">" + res.stock + "</td>" +
                 "<td> £" + res.price + "</td>" +
                 "<td>" + res.live + "</td>" +
                 "</tr>";

    $('#dataResults').append(new_record);
}); 
```

我已经使用第三条件内联完成了它，只是因为我喜欢将字符串连接在一起。您可以轻松地在 previous 的末尾停止连接，`td`然后`if`在 next 周围包裹一个完整的语句`td`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:41:03.850

您可以创建一个变量并使用类属性填充它：

```
var classAttr = (res.StockUpdated) ? "class=\"updated\"" : ""; 
```

然后你可以这样做：

```
"<td " + classAttr + ">" + res.stock + "</td>" + 
```

完整示例：

```
$.each(result, function (index, res) {
        var classAttr = (res.StockUpdated) ? "class=\"updated\"" : "";
        new_record = "<tr>" +
                     "<th scope=\"row\" class=\"t-left\"><a href=\"editproduct.aspx?sku=" + res.sku + "\" title=\"Edit this product listing\">" + res.title + "</a></th>" +
                     "<td><a href=\"http://www.amazon.co.uk/dp/" + res.asin + "\" target=\"_blank\" title=\"Visit the Amazon product listing\" >" + res.asin + "</a></td>" +
                     "<td>" + res.sku + "</td>" +
                     "<td " + classAttr + ">" + res.stock + "</td>" +
                     "<td> £" + res.price + "</td>" +
                     "<td>" + res.live + "</td>" +
                     "</tr>";

        $('#dataResults').append(new_record); 
```

# java - 为什么 Hibernate Search 需要这么多时间来构建索引？

> ID：11295800
> 
> 赞同：2
> 
> 时间：2012-07-02T14:35:38.737
> 
> 标签：java, jakarta-ee, hibernate-search

我正在尝试通过休眠搜索构建一个 lucene 索引，`FullTextSession.createIndexer().startAndWait()` 但即使对于非常少的测试数据它也不会结束。

这是我的代码

```
@Component("hibernateSearchMassIndexerService")
public class HibernateSearchMassIndexerServiceImpl implements HibernateSearchMassIndexerService {

    public static final Logger log = LoggerFactory
            .getLogger(HibernateSearchMassIndexerServiceImpl.class);

    @Override
    @Transactional
    public void buildSearchIndex(Session session) {
        log.debug("Indexing entities");

        FullTextSession fullTextSession = Search.getFullTextSession(session);

        try {
            fullTextSession.createIndexer().startAndWait();
        } catch (InterruptedException e) {
            log.debug("Interrupted indexing process");
        }

        log.debug("Ended indexing of entities");

    }

} 
```

实体

```
@Entity
@Indexed(index = "causa_penal")
@Table(name = "causas_penales")
public class CausaPenal implements Serializable {

    private static final long serialVersionUID = 1L;

    @Basic
    @Column(name = "anio_causa")
    @Field
    private Integer annioCausa;

    @OneToMany(mappedBy = "causaPenal")
    @ContainedIn
    @OrderBy
    private List<AudienciaOral> audienciasOrales;

    @ManyToMany(cascade = CascadeType.ALL)
    private List<DefensorPenal> defensoresPenales;

    @OneToMany(cascade = CascadeType.ALL)
    private List<DelitoConfigurado> delitosConfigurados;

    @Id
    @GeneratedValue(strategy = GenerationType.TABLE)
    @Column(name = "id")
    @DocumentId
    private Integer id;

    @ManyToMany(cascade = CascadeType.ALL)
    @JoinTable(name = "causapenal_imputados")
    @IndexedEmbedded(depth = 1)
    private List<ParteMaterial> imputados;

    @ManyToMany(cascade = CascadeType.ALL)
    private List<MinisterioPublico> ministeriosPublicos;

    @Basic
    @Column(name = "numero_causa")
    @Field
    private Integer numeroCausa;

    @Version
    @Column(name = "opt_lock")
    private Integer version;

    @ManyToMany(cascade = CascadeType.ALL)
    @JoinTable(name = "causapenal_victimas")
    @IndexedEmbedded(depth = 1)
    private List<ParteMaterial> victimas;

    public CausaPenal() {
    }

    public CausaPenal(Integer id, Integer version, Integer numeroCausa, Integer annioCausa,
            List<DelitoConfigurado> delitosConfigurados, List<ParteMaterial> victimas,
            List<ParteMaterial> imputados, List<MinisterioPublico> ministeriosPublicos,
            List<DefensorPenal> defensoresPenales, List<AudienciaOral> audienciasOrales) {
        super();
        this.id = id;
        this.version = version;
        this.numeroCausa = numeroCausa;
        this.annioCausa = annioCausa;
        this.delitosConfigurados = delitosConfigurados;
        this.victimas = victimas;
        this.imputados = imputados;
        this.ministeriosPublicos = ministeriosPublicos;
        this.defensoresPenales = defensoresPenales;
        this.audienciasOrales = audienciasOrales;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (obj == this) {
            return true;
        }
        if (!(obj instanceof CausaPenal)) {
            return false;
        }

        CausaPenal o = (CausaPenal) obj;

        return new EqualsBuilder().append(this.numeroCausa, o.numeroCausa)
                .append(this.annioCausa, o.annioCausa).isEquals();

    }

    public Integer getAnnioCausa() {
        return this.annioCausa;
    }

    public List<AudienciaOral> getAudienciasOrales() {
        return this.audienciasOrales;
    }

    public List<DefensorPenal> getDefensoresPenales() {
        return this.defensoresPenales;
    }

    public List<DelitoConfigurado> getDelitosConfigurados() {
        return this.delitosConfigurados;
    }

    public Integer getId() {
        return this.id;
    }

    public List<ParteMaterial> getImputados() {
        return this.imputados;
    }

    public List<MinisterioPublico> getMinisteriosPublicos() {
        return this.ministeriosPublicos;
    }

    public Integer getNumeroCausa() {
        return this.numeroCausa;
    }

    public Integer getVersion() {
        return this.version;
    }

    public List<ParteMaterial> getVictimas() {
        return this.victimas;
    }

    @Override
    public int hashCode() {

        return new HashCodeBuilder(13, 33).append(this.numeroCausa).append(this.annioCausa)
                .toHashCode();
    }

    public void setAnnioCausa(Integer annioCausa) {
        this.annioCausa = annioCausa;
    }

    public void setAudienciasOrales(List<AudienciaOral> audienciasOrales) {
        this.audienciasOrales = audienciasOrales;
    }

    public void setDefensoresPenales(List<DefensorPenal> defensoresPenales) {
        this.defensoresPenales = defensoresPenales;
    }

    public void setDelitosConfigurados(List<DelitoConfigurado> delitosConfigurados) {
        this.delitosConfigurados = delitosConfigurados;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public void setImputados(List<ParteMaterial> imputados) {
        this.imputados = imputados;
    }

    public void setMinisteriosPublicos(List<MinisterioPublico> ministeriosPublicos) {
        this.ministeriosPublicos = ministeriosPublicos;
    }

    public void setNumeroCausa(Integer numeroCausa) {
        this.numeroCausa = numeroCausa;
    }

    public void setVersion(Integer version) {
        this.version = version;
    }

    public void setVictimas(List<ParteMaterial> victimas) {
        this.victimas = victimas;
    }

    @Override
    public String toString() {
        return ReflectionToStringBuilder.toString(this, ToStringStyle.SHORT_PREFIX_STYLE);
    }

}

@Entity
@Indexed(index = "partes_materiales")
@Table(name = "partes_materiales")
public class ParteMaterial implements Serializable {

    private static final long serialVersionUID = 1L;

    @Basic
    @Column(name = "alias")
    private String alias;

    @Basic
    @Column(name = "apellido_materno")
    @Field
    private String apellidoMaterno;

    @Basic
    @Column(name = "apellido_paterno")
    @Field
    private String apellidoPaterno;

    @Basic
    @Column(name = "descripcion_persona_moral")
    private String descripcionPersonaMoral;

    @ElementCollection
    @JoinTable(name = "partes_materiales_domicilios")
    private List<Domicilio> domicilios;

    @Basic
    @Column(name = "edad")
    private Integer edad;

    @Enumerated(EnumType.STRING)
    @Column(name = "estado_civil")
    private EstadoCivil estadoCivil;

    @Temporal(TemporalType.DATE)
    @Column(name = "fecha_nacimiento")
    private Date fechaNacimiento;

    @Enumerated(EnumType.STRING)
    @Column(name = "genero")
    private Genero genero;

    @Id
    @GeneratedValue(strategy = GenerationType.TABLE)
    @Column(name = "id")
    @DocumentId
    private Integer id;

    @Basic
    @Column(name = "identificacion_personal")
    private String identificacion;

    @Basic
    @Column(name = "idioma")
    private String idioma;

    @Basic
    @Column(name = "lugar_nacimiento")
    private String lugarNacimiento;

    @Basic
    @Column(name = "nombres")
    @Field
    private String nombres;

    @Basic
    @Column(name = "profesion_oficio")
    private String profesionOrOficio;

    @Version
    @Column(name = "opt_lock")
    private Integer version;

    public ParteMaterial() {

    }

    public ParteMaterial(String alias, String apellidoMaterno, String apellidoPaterno,
            String descripcionPersonaMoral, List<Domicilio> domicilios, Integer edad,
            EstadoCivil estadoCivil, Date fechaNacimiento, Genero genero, Integer id,
            String identificacion, String idioma, String lugarNacimiento, String nombres,
            String profesionOrOficio, Integer version) {
        super();
        this.alias = alias;
        this.apellidoMaterno = apellidoMaterno;
        this.apellidoPaterno = apellidoPaterno;
        this.descripcionPersonaMoral = descripcionPersonaMoral;
        this.domicilios = domicilios;
        this.edad = edad;
        this.estadoCivil = estadoCivil;
        this.fechaNacimiento = fechaNacimiento;
        this.genero = genero;
        this.id = id;
        this.identificacion = identificacion;
        this.idioma = idioma;
        this.lugarNacimiento = lugarNacimiento;
        this.nombres = nombres;
        this.profesionOrOficio = profesionOrOficio;
        this.version = version;
    }

    @Override
    public boolean equals(Object obj) {

        if (obj == null) {
            return false;
        }
        if (obj == this) {
            return true;
        }
        if (!(obj instanceof ParteMaterial)) {
            return false;
        }

        ParteMaterial o = (ParteMaterial) obj;

        return new EqualsBuilder().append(this.nombres, o.nombres)
                .append(this.apellidoPaterno, o.apellidoPaterno)
                .append(this.apellidoMaterno, o.apellidoMaterno)
                .append(this.descripcionPersonaMoral, o.descripcionPersonaMoral).isEquals();
    }

    public String getAlias() {
        return this.alias;
    }

    public String getApellidoMaterno() {
        return this.apellidoMaterno;
    }

    public String getApellidoPaterno() {
        return this.apellidoPaterno;
    }

    public String getDescripcionPersonaMoral() {
        return this.descripcionPersonaMoral;
    }

    public List<Domicilio> getDomicilios() {
        return this.domicilios;
    }

    public Integer getEdad() {
        return this.edad;
    }

    public EstadoCivil getEstadoCivil() {
        return this.estadoCivil;
    }

    public Date getFechaNacimiento() {
        return this.fechaNacimiento;
    }

    public Genero getGenero() {
        return this.genero;
    }

    public Integer getId() {
        return this.id;
    }

    public String getIdentificacion() {
        return this.identificacion;
    }

    public String getIdioma() {
        return this.idioma;
    }

    public String getLugarNacimiento() {
        return this.lugarNacimiento;
    }

    public String getNombres() {
        return this.nombres;
    }

    public String getProfesionOrOficio() {
        return this.profesionOrOficio;
    }

    public Integer getVersion() {
        return this.version;
    }

    @Override
    public int hashCode() {
        return new HashCodeBuilder(31, 147).append(this.nombres).append(this.apellidoPaterno)
                .append(this.apellidoMaterno).append(this.descripcionPersonaMoral).toHashCode();
    }

    public void setAlias(String alias) {
        this.alias = alias;
    }

    public void setApellidoMaterno(String apellidoMaterno) {
        this.apellidoMaterno = apellidoMaterno;
    }

    public void setApellidoPaterno(String apellidoPaterno) {
        this.apellidoPaterno = apellidoPaterno;
    }

    public void setDescripcionPersonaMoral(String descripcionPersonaMoral) {
        this.descripcionPersonaMoral = descripcionPersonaMoral;
    }

    public void setDomicilios(List<Domicilio> domicilios) {
        this.domicilios = domicilios;
    }

    public void setEdad(Integer edad) {
        this.edad = edad;
    }

    public void setEstadoCivil(EstadoCivil estadoCivil) {
        this.estadoCivil = estadoCivil;
    }

    public void setFechaNacimiento(Date fechaNacimiento) {
        this.fechaNacimiento = fechaNacimiento;
    }

    public void setGenero(Genero genero) {
        this.genero = genero;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public void setIdentificacion(String identificacion) {
        this.identificacion = identificacion;
    }

    public void setIdioma(String idioma) {
        this.idioma = idioma;
    }

    public void setLugarNacimiento(String lugarNacimiento) {
        this.lugarNacimiento = lugarNacimiento;
    }

    public void setNombres(String nombres) {
        this.nombres = nombres;
    }

    public void setProfesionOrOficio(String profesionOrOficio) {
        this.profesionOrOficio = profesionOrOficio;
    }

    public void setVersion(Integer version) {
        this.version = version;
    }

    @Override
    public String toString() {
        return ReflectionToStringBuilder.toString(this, ToStringStyle.SHORT_PREFIX_STYLE);
    }

} 
```

弹簧配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc" xmlns:util="http://www.springframework.org/schema/util"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="${datasource.driverClassName}" />
        <property name="url" value="${datasource.url}" />
        <property name="username" value="${datasource.username}" />
        <property name="password" value="${datasource.password}" />
        <property name="initialSize" value="${datasource.poolInitialSize}" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="configLocation" value="classpath:hibernate.cfg.xml" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.current_session_context_class">
                    mx.gob.jgtjo.apps.schedule.web.conversation.ConversationalCurrentSessionContext
                </prop>
                <prop key="hibernate.dialect">${org.hibernate.dialect.dialectmysqlInno}</prop>
                <prop key="hibernate.hbm2ddl.auto">${org.hibernate.ddl.mode}</prop>
                <prop key="hibernate.connection.release_mode">${org.hibernate.transaction.release_mode}</prop>
                <prop key="hibernate.search.default.directory_provider">${org.hibernate.search.directoryprovidr}</prop>
                <prop key="hibernate.search.default.indexBase">
                    ${org.hibernate.search.index.base_directory}
                </prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
        <property name="dataSource" ref="dataSource" />
        <property name="hibernateManagedSession" value="true" />
    </bean>

    <tx:annotation-driven order="0" transaction-manager="transactionManager" />

    <context:component-scan base-package="mx.gob.jgtjo.apps.schedule.dao.hibernate" />

</beans> 
```

休眠配置

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
                                         "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory name="jgtjoSessionFactory">
        <!--Entity -->
        <mapping class="mx.gob.jgtjo.apps.schedule.model.AudienciaOral" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.CausaPenal" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.DefensorPenal" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.Delito" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.EventoAudiencia" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.Juez" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.MinisterioPublico" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.ParteMaterial" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.Sala" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.TipoAudiencia" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.User" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.Rol" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.DelitoConfigurado" />

    </session-factory>
</hibernate-configuration> 
```

还有一点我的日志记录：

```
09:33:18,767 [ssIndexerServiceImpl] (tp-bio-8080"-exec-10) DEBUG : Indexing entities
09:33:18,773 [orphicIndexHierarchy] (tp-bio-8080"-exec-10) TRACE : Targeted indexed classes for [class java.lang.Object]: [class mx.gob.jgtjo.apps.schedule.model.CausaPenal, class mx.gob.jgtjo.apps.schedule.model.ParteMaterial]
09:33:18,774 [MassIndexerImpl     ] (tp-bio-8080"-exec-10) DEBUG : Targets for indexing job: [class mx.gob.jgtjo.apps.schedule.model.CausaPenal, class mx.gob.jgtjo.apps.schedule.model.ParteMaterial]
09:33:18,819 [orphicIndexHierarchy] (tp-bio-8080"-exec-10) TRACE : Targeted indexed classes for [class mx.gob.jgtjo.apps.schedule.model.CausaPenal, class mx.gob.jgtjo.apps.schedule.model.ParteMaterial]: [class mx.gob.jgtjo.apps.schedule.model.CausaPenal, class mx.gob.jgtjo.apps.schedule.model.ParteMaterial]
09:33:18,869 [Workspace           ] (tp-bio-8080"-exec-10) TRACE : IndexWriter opened using batch configuration
09:33:18,869 [PurgeAllWorkDelegate] (tp-bio-8080"-exec-10) TRACE : purgeAll Lucene index using IndexWriter for type: class mx.gob.jgtjo.apps.schedule.model.CausaPenal
09:33:18,889 [Workspace           ] (tp-bio-8080"-exec-10) TRACE : IndexWriter opened using batch configuration
09:33:18,890 [PurgeAllWorkDelegate] (tp-bio-8080"-exec-10) TRACE : purgeAll Lucene index using IndexWriter for type: class mx.gob.jgtjo.apps.schedule.model.ParteMaterial
09:33:18,891 [OptimizeWorkDelegate] (tp-bio-8080"-exec-10) TRACE : optimize Lucene index: class mx.gob.jgtjo.apps.schedule.model.CausaPenal
09:33:18,893 [OptimizeWorkDelegate] (tp-bio-8080"-exec-10) TRACE : optimize Lucene index: class mx.gob.jgtjo.apps.schedule.model.ParteMaterial
09:33:18,940 [WrapInJTATransaction] ( collectionsloader-2) TRACE : TransactionFactory does not require a TransactionManager: don't wrap in a JTA transaction
09:33:18,940 [WrapInJTATransaction] ( collectionsloader-3) TRACE : TransactionFactory does not require a TransactionManager: don't wrap in a JTA transaction
09:33:18,940 [WrapInJTATransaction] ( collectionsloader-2) TRACE : TransactionFactory does not require a TransactionManager: don't wrap in a JTA transaction
09:33:18,944 [nsumerEntityProducer] (hIndexingWorkspace-2) TRACE : created
09:33:18,946 [WrapInJTATransaction] ( collectionsloader-4) TRACE : TransactionFactory does not require a TransactionManager: don't wrap in a JTA transaction
09:33:18,947 [nsumerEntityProducer] (hIndexingWorkspace-2) TRACE : created
09:33:18,948 [WrapInJTATransaction] (arch: entityloader-1) TRACE : TransactionFactory does not require a TransactionManager: don't wrap in a JTA transaction
09:33:18,932 [WrapInJTATransaction] ( collectionsloader-1) TRACE : TransactionFactory does not require a TransactionManager: don't wrap in a JTA transaction
09:33:18,932 [WrapInJTATransaction] ( collectionsloader-1) TRACE : TransactionFactory does not require a TransactionManager: don't wrap in a JTA transaction
09:33:18,950 [WrapInJTATransaction] (arch: entityloader-2) TRACE : TransactionFactory does not require a TransactionManager: don't wrap in a JTA transaction
09:33:18,951 [WrapInJTATransaction] ( collectionsloader-3) TRACE : TransactionFactory does not require a TransactionManager: don't wrap in a JTA transaction
09:33:18,974 [IdentifierProducer  ] (hIndexingWorkspace-2) TRACE : created
09:33:18,948 [nsumerEntityProducer] (arch: entityloader-1) TRACE : started
09:33:18,973 [WrapInJTATransaction] ( collectionsloader-4) TRACE : TransactionFactory does not require a TransactionManager: don't wrap in a JTA transaction
09:33:18,951 [nsumerEntityProducer] (hIndexingWorkspace-1) TRACE : created
09:33:18,950 [nsumerEntityProducer] (arch: entityloader-2) TRACE : started
09:33:18,975 [WrapInJTATransaction] (: identifierloader-1) TRACE : TransactionFactory does not require a TransactionManager: don't wrap in a JTA transaction
09:33:18,978 [nsumerEntityProducer] (hIndexingWorkspace-1) TRACE : created
09:33:18,978 [WrapInJTATransaction] (arch: entityloader-1) TRACE : TransactionFactory does not require a TransactionManager: don't wrap in a JTA transaction
09:33:18,979 [nsumerEntityProducer] (arch: entityloader-1) TRACE : started
09:33:18,977 [IdentifierProducer  ] (: identifierloader-1) TRACE : started
09:33:18,979 [IdentifierProducer  ] (hIndexingWorkspace-1) TRACE : created
09:33:18,988 [WrapInJTATransaction] (arch: entityloader-2) TRACE : TransactionFactory does not require a TransactionManager: don't wrap in a JTA transaction
09:33:18,989 [nsumerEntityProducer] (arch: entityloader-2) TRACE : started
09:33:19,049 [WrapInJTATransaction] (: identifierloader-1) TRACE : TransactionFactory does not require a TransactionManager: don't wrap in a JTA transaction
09:33:19,050 [IdentifierProducer  ] (: identifierloader-1) TRACE : started 
```

我不知道为什么，但在我看来，休眠搜索不知何故进入了无限循环。欢迎任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:07:08.837

如果您还没有弄清楚，请检查您的最大允许连接，因为质量索引器使用大量连接。例如，如果您使用像 c3p0 这样的池化数据源：

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
    <property name="user" value="username"/>
    <property name="password" value="password"/>
    <property name="driverClass" value="oracle.jdbc.driver.OracleDriver"/>
    <property name="jdbcUrl" value="jdbc:oracle:thin:@my.dbserver.com:1521:PRODUCTION"/>
    <property name="initialPoolSize" value="1"/>
    <property name="minPoolSize" value="1"/>
    <property name="maxPoolSize" value="10"/>
</bean> 
```

尝试将 initialPoolSize 设置为 3 并将 maxPoolSize 设置为 100 或更高，然后重试。

希望有帮助！

# c# - 数据绑定 ComboBox 时在 XAML 中插入一个额外的默认项

> ID：11295801
> 
> 赞同：0
> 
> 时间：2012-07-02T14:35:42.060
> 
> 标签：c#, silverlight, xaml, combobox, telerik

我希望仅使用 XAML 来执行此操作 -[如何将额外的 RadComboBoxItem 添加到数据绑定的 RadComboBox？](https://stackoverflow.com/questions/6551473/how-to-add-an-additional-radcomboboxitem-to-data-bound-radcombobox)- 这可能吗 ？

我有一个可观察的集合，它正在填充一个组合框。

```
 <telerik:RadComboBox Grid.Row="0" ItemsSource="{Binding ListOfNumbers}" DisplayMemberPath="Name" EmptyText="All" SelectedItem="{Binding SelectedNumber, Mode=TwoWay}"/> 
```

如您所见，目前我将`EmptyText`属性设置为“全部”。这完美地工作，在使用此组合框的值的方法中，我检查它，如果是`== ""`，如果是，则它检索所有数据。这就是我第一次打开视图时发生的情况，没有选择任何内容。

问题是，当我选择一个数字时，我不能再选择“全部”，这很烦人，因为我希望能够这样做。

如何将此选项添加到我的组合框并使其将“”值保存到我的依赖项属性中，`SelectedNumber`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:00:27.353

像这样的东西应该工作：

```
<telerik:RadComboBox.ItemsSource>
    <CompositeCollection>
      <CollectionContainer
        Collection="{Binding ListOfNumbers}" />

      <telerik:RadComboBoxItem Name="Default" Content="All Builds" Value=""></telerik:RadComboBoxItem >
    </CompositeCollection>
  </telerik:RadComboBox.ItemsSource> 
```

不 ？

# python - Python 理解：for x in [temp for temp in xlist if temp<=xmax]：

> ID：11295807
> 
> 赞同：3
> 
> 时间：2012-07-02T14:36:16.293
> 
> 标签：python, list-comprehension

```
for x in [temp for temp in xlist if temp<=xmax]: 
```

这段代码可以工作，但看起来像是一种不必要的外国口吃方式来启动 for 循环。

有更简洁的语法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T14:37:32.473

你想在这里做什么？

```
for x in xlist:
    if x > xmax: continue 
```

将工作。（你的 for 循环的其余部分是做什么的？）如果它可以只使用 list-comp 来完成，那可能是要走的路。如果不能，那么您可能想要上面的成语，或者您将在此处发布的其他答案中看到的一些变体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:41:32.337

为什么不`filter`呢？

```
filter(function, iterable) 
```

`filter(function, iterable)`相当于`[item for item in iterable if function(item)]`

在你的情况下：

```
filter(lambda item: item <= xmax, xlist) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:38:21.160

```
for x in xlist:
    if x <= xmax:
        #do stuff 
```

顺便说一句，如果可能，您希望在原始版本中使用生成器表达式，因为这不会预先创建不必要的列表。

```
for x in (temp for temp in xlist if temp <= xmax):
    #etc. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T14:39:19.813

```
for x in filter(lambda x: x<=xmax, xlist):
    pass
# or with itertools (faster on python2, on py3 these are equivalent):
import itertools
for x in itertools.ifilter(lambda x: x<=xmax, xlist):
    pass 
```

但也请查看[@mgilson 答案](https://stackoverflow.com/a/11295830/1248008)，该答案表明您可以将整个代码重写为列表理解。

# sqlalchemy - 在 SQLAlchemy 过滤器中使用变量

> ID：11295809
> 
> 赞同：1
> 
> 时间：2012-07-02T14:36:19.640
> 
> 标签：sqlalchemy

我想使用这样的变量：

```
myVariable = 0.5
myQuery.filter(myTable.column1 == myVariable*myTable.column2) 
```

当我将 all() 应用于 myQuery 时，我没有结果。如果我用它的值替换变量，就可以了。

* * *

```
queryBidOffer = session.query(BidOffer.id, BidOffer.price, BidOffer.qmin, BidOffer.qmax)
queryBidOffer = queryBidOffer.join(Equipment).filter(BidOffer.equipment==Equipment.id, Equipment.equipment_type.in_(['L','P','W','M']))
queryBidOffer_day = queryBidOffer.filter(BidOffer.day == day)
queryBidOffer_hour = queryBidOffer_day.filter(BidOffer.start_hour == timeSlice)

queryBidOffer_hour = queryBidOffer_hour.join(EquipmentDayHour, BidOffer.equipment == EquipmentDayHour.equipment)
queryBidOffer_hour = queryBidOffer_hour.filter(EquipmentDayHour.day == day)
queryBidOffer_hour = queryBidOffer_hour.filter(EquipmentDayHour.hour == timeSlice)

factor1 = 1.00 - 0.07
queryBidOffer_hour = queryBidOffer_hour.filter(BidOffer.equipment == EquipmentDayHour.equipment, factor1*func.abs(EquipmentDayHour.ref_prog) == 930) 
```

问题在于最后两行（因素1）。在最后一行中，如果我将 factor1 替换为其值，就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:25:08.080

Python 使用的 IEEE 浮点数，许多数据库并不总是像你的学校数学那样工作。0.93 起作用的原因是这是您最初存储在数据库中的按位精确值。但减法中出现了轻微的错误。

例如看这个：

```
>>> print "%0.64f" % (1.0 - 0.07)
0.9299999999999999378275106209912337362766265869140625000000000000
>>> print "%0.64f" % (0.93)
0.9300000000000000488498130835068877786397933959960937500000000000 
```

在这里阅读更多[我应该如何进行浮点比较](https://stackoverflow.com/questions/4915462/how-should-i-do-floating-point-comparison)，然后对于非常深入的文章，您可以阅读[每个计算机科学家应该了解的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)......

一种解决方案是`decimal.Decimal`在 Python 和`Numeric`SQL 中使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-02T16:34:37.230

我刚刚测试了与您描述的代码类似的东西，但是无论我使用变量还是文字都会得到结果：

```
myVariable = 0.5
myQuery.filter(myTable.column1 == myVariable*myTable.column2).all() 
```

对比

```
myQuery.filter(myTable.column1 == 0.5*myTable.column2).all() 
```

您可以发布正在生成的文字 SQL 吗？即结果

```
print myQuery 
```

对于这两个？

# android - 添加 HoloEverywhere。图书馆是空的

> ID：11295812
> 
> 赞同：0
> 
> 时间：2012-07-02T14:36:29.817
> 
> 标签：android, android-layout, android-holo-everywhere

我目前正在编写一个应用程序，然后决定将 HoloEverywhere 添加到我的应用程序中。但是，当我转到“属性”>“Android”>“添加”时。

它是空的。我做错什么了吗？

我需要事先做些什么吗？

![](../Images/8f7db22c0877b053f453c0814141eb20.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:38:49.577

您需要首先将 HoloEverywhere 作为库项目导入您的工作区。您可以通过单击文件 -> 导入来执行此操作

# java - 如何获取句子中单个单词的 PoS 标签？

> ID：11295817
> 
> 赞同：0
> 
> 时间：2012-07-02T14:36:53.080
> 
> 标签：java, nlp

我一直在使用[Stanford POS Tagger](http://nlp.stanford.edu/software/tagger.shtml)来标记句子中的词性。我从有关stackoverflow主题的文档和其他问题中学到的是，以下代码给出了句子的POS标记

```
 MaxentTagger tagger = new MaxentTagger("./left3words-wsj-0-18.tagger");
                     String tags=tagger.tagString(Summary); 
```

但我想要的是获取单个单词的 POS 标签。一种可能的方法是分解输入字符串并逐字输入标记器，但这似乎并不优雅，我认为它会增加出错的机会。[Javadoc](http://nlp.stanford.edu/nlp/javadoc/javanlp/edu/stanford/nlp/tagger/maxent/MaxentTagger.html#apply%28java.util.List%29)说可以使用返回 TaggedWords 的 ArrayList 的应用函数，但我无法成功调用此函数。知道如何通过应用函数或其他函数使用斯坦福词性标注器对字符串的单个单词进行词性标注吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:52:25.667

看起来您应该将 tokenizeText() 与 tagSentence() 一起使用来获取标记单词的列表。查看 postagger 发行版中包含的 TaggerDemo.java。

# encoding - 如何提取具有非 Unicode 非拉丁文件名的 Zip 文件？

> ID：11295835
> 
> 赞同：3
> 
> 时间：2012-07-02T14:37:51.113
> 
> 标签：encoding, zip, filenames, zipfile

有时您会收到带有文件或目录的 Zip 文件，其名称中有一些无法识别的字符，因此您无法提取它们。您使用什么工具将它们提取为正确转换的文件名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:52:07.427

我在网上搜索但没有找到好的脚本。所以出于必要，我自己编写了一个 Python 脚本。希望它对某人有用。

欢迎任何建议，特别是如果您知道这在某些特殊情况下不起作用。请不要选择不整洁的编码风格。

```
import os,sys,zipfile

x, fn = sys.argv
enc = 'utf-8'

zipf = zipfile.ZipFile(fn)
for x in zipf.infolist():
    fn = x.filename
    fne = fn.encode(enc)
    if os.sep in fne:
        path = fne[:fne.rindex(os.sep)]
        if not os.path.exists(path): os.makedirs(path)
    if fne.endswith(os.sep): continue
    f = open(fne,'wb')
    f.write(zipf.open(fn).read())
    f.close() 
```

# string - 将字符串/字符转换为 uint8

> ID：11295836
> 
> 赞同：2
> 
> 时间：2012-07-02T14:37:53.917
> 
> 标签：string, matlab, ascii

为什么要表达：

```
test = cast(strtrim('3'), 'uint8') 
```

生产 51?

这也适用于：

```
test = cast(strtrim('3'), 'int8') 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T14:40:36.050

因为 51 是字符的ASCII[码](http://www.asciitable.com/)`'3'`。

如果要将字符串转换为数字 3，则应使用

```
uint8(str2double('3')) 
```

请注意，这`str2double`将忽略尾随空格，因此`strtrim`没有必要。

**编辑**

在数值运算中使用字符串时，Matlab 会自动将其转换为其 ASCII 值。例如

```
>> '1'+1
ans =
    50 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T14:39:44.687

因为 51 是字符的ASCII[值](http://www.asciitable.com/)`'3'`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T14:42:39.393

这是因为 '3' 在 matlab 中被视为 ASCII 字符。通过转换为有符号或无符号整数（在这种情况下为 8 位），您要求 Matlab 将 ASCII '3' 转换为十进制数。在这种情况下，十进制数是 51。如果您想查看更多转换[，这里](http://www.robelle.com/smugbook/ascii.html)是一个基本文档。

# c# - AuthenticateAsServer 不接受 PEM 格式证书

> ID：11295839
> 
> 赞同：3
> 
> 时间：2012-07-02T14:37:55.897
> 
> 标签：c#, ios, apple-push-notifications, mdm

```
X509CertificateCollection certCollec = 
new X509CertificateCollection(new X509Certificate[1] { xcert});

X509CertificateCollection certCollecpfx = 
new X509CertificateCollection(new X509Certificate[1] { pfxCert });

SSLStream.AuthenticateAsClient(apsHost, certCollec, SslProtocols.Default, false); 
```

certCollec 包含 PEM 格式的证书

certCollecpfx 包含 PFX 格式的证书

AuthenticateAsClient 服务器仅适用于 PFX 格式，即使 pem 和 pfx 的 X509Certificate2 对象具有完全相同的原始数据。

为什么是这样？它一直告诉我调用 SSPI 失败：数据格式错误。

为什么它不接受pem格式？

然后我尝试将 pem 格式导出到 pfx，但它仍然不接受它 - 同样的错误，即使我将它导出到 pfx。

```
byte[] pemCertBytes = pemCert.Export(X509ContentType.Pfx, "620fpass");
            File.WriteAllBytes(@"C:\test\MyCert.pfx", pemCertBytes); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:50:25.487

```
even though the X509Certificate2 object for the pem and the pfx has exactly the same raw data. 
```

我认为只有在 pem 证书包含实际证书和私钥的情况下才是正确的。此外，它具有特定的标题，即`BEGIN-CERTIFICATE`包含`END-CERTIFICATE`实际内容。pfx 或 pkcs#12 证书包含证书和私钥，可以选择使用密码进行加密。如果您曾经将证书导入 Windows 证书存储，您可能已经注意到在执行此操作时它会提示您输入密码，这实际上是用于加密证书的私钥。

```
I then tried to export the pem format into pfx and it still didn't accept it 
```

我建议使用[openssl](http://openssl.org/)来执行此操作。一般语法是

```
openssl pkcs12 -export -out certificate.pfx -inkey privateKey.key -in certificate.crt -certfile CACert.crt 
```

# javascript - 进入全屏 Flash 小程序时出错 (NPObject)

> ID：11295840
> 
> 赞同：0
> 
> 时间：2012-07-02T14:37:59.503
> 
> 标签：javascript, actionscript-3, flash

我已经用谷歌搜索了大约一个小时左右，但找不到可行的解决方案，我有一个 Flash 播放器，我需要使用 JavaScript 全屏显示它，我可以让 JavaScript 发送命令（我的音量功能有效）但我的全屏总是返回：

```
Error: Error calling method on NPObject. 
```

大多数提到这个的帖子都是通过添加 as3 安全线来解决的，对我来说，这不是问题

```
Security.allowDomain("mydomain.com");
```

```
function fScreen() {
    if (stage.displayState== "normal") {
        stage.displayState="fullScreen";
        stage.scaleMode = StageScaleMode.NO_SCALE;
    } else {
        stage.displayState="normal";
    }
    call('console.log', 'okok');
} 
```

当我刚刚输出到控制台时，它运行良好。还有其他全屏方式吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:46:32.170

您是否在 embed 和 object 标签中添加了alloweFullScreen？要使用全屏模式，您需要在 HTML 中的 和 标签中添加一个新参数。以下是启用全屏的 and 标签示例：

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,18,0" width="600" height="400" id="fullscreen" align="middle"> 
<param name="allowFullScreen" value="true" /> 
<param name="movie" value="fullscreen.swf" /> 
<param name="bgcolor" value="#333333" /> 
<embed src="fullscreen.swf" allowFullScreen="true" bgcolor="#333333" width="600" height="400" name="fullscreen" align="middle" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />
 </object> 
```

查看这篇文章： http: [//www.adobe.com/devnet/flashplayer/articles/full_screen_mode.html](http://www.adobe.com/devnet/flashplayer/articles/full_screen_mode.html)

# windows - 使用“打开方式”不会在我的应用程序中打开文件

> ID：11295841
> 
> 赞同：0
> 
> 时间：2012-07-02T14:38:00.310
> 
> 标签：windows, winforms, contextmenu, openfiledialog, open-with

我在我的 Windows 窗体应用程序中实现了 OpenFileFialog，但是当我在文件上下文菜单中使用打开方式，或者使用“myapp.exe %1”之类的命令在上下文菜单中添加我的项目时，它只会打开应用程序。我需要做任何其他事情来实现它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:40:22.423

这只是将文件名作为第一个参数传递给您的程序。仅仅拥有一个 OpenFileDialog 与此完全无关。您需要在启动时检查命令行参数，并决定是否要打开一个文件（如果有的话）。

# sql - 为某些列选择 DISTINCT，为其他列选择最小值（什么是`Group by`？）

> ID：11295843
> 
> 赞同：0
> 
> 时间：2012-07-02T14:38:03.857
> 
> 标签：sql, sql-server-2008-r2, aggregate-functions

我有一个`TableA`有两列的表：`MyName nvarchar(100)`和`MyDateTime DateTime`. 每个记录可以有多个`MyName`具有不同`DateTime`s 的记录。我正在尝试返回一个记录集，其中包含`MyName`表中的每个值，每个值都是最早`MyDateTime`的。

这可以返回 distinct `MyNames`：

```
SELECT DISTINCT([MyName]) FROM TableA 
```

我尝试过不同的陈述，但我所有的尝试都被关键字`UNION`抛弃了。`DISTINCT()`例如，以下查询查找所有时间，而不仅仅是每个时间的最小值：

```
SELECT DISTINCT([MyName]), [MyDateTime] FROM TableA 
```

努力想出正确的 SQL 语法来实现这一点。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T14:39:29.007

```
SELECT MyName, MIN(MyDateTime)
FROM TableA
GROUP BY MyName; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T14:40:05.120

> 与最早 [MyDateTime] 的表中所有不同的 [MyName]。

您需要`GROUP BY MyName`With `MIN(MyDateTime)`，例如：

```
SELECT MyName, MIN(MyDateTime)
FROM myTable
GROUP BY MyName 
```

# paypal - 哪些数据会发回 Paypal 的“退货”网址，我如何将自己的数据发送到该网址？

> ID：11295849
> 
> 赞同：3
> 
> 时间：2012-07-02T14:38:31.390
> 
> 标签：paypal

实现标准的 Paypal“立即购买”按钮。[此处](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables#id08A6HH00W2J)的文档不清楚将哪些数据传递给“返回”网址。文档也没有提到如何通过表单发送您自己的自定义数据。

任何人都可以为此提供适当的文件吗？

相关代码：

```
<form accept-charset="UTF-8" action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"><input name="authenticity_token" type="hidden" value="mYAT+aR+YhVyBrulWoYoMjzY00DQggAXUVGI12TA6zk="></div>
      <input id="cmd" name="cmd" type="hidden" value="_xclick">
      <input id="currency_code" name="currency_code" type="hidden" value="USD">
      <input id="notify_url" name="notify_url" type="hidden" value="http://localhost:3000/en/paypal_ipns/cart_purchase_ipn">
      <input id="item_name" name="item_name" type="hidden" value="Cart id 5398">
      <input id="quantity" name="quantity" type="hidden" value="1">
      <input id="business" name="business" type="hidden" value="seller_1318259_biz@me.net">
      <input id="return" name="return" type="hidden" value="http://localhost:3000/en/checkout/process_paypal_return">
      <input id="amount" name="amount" type="hidden" value="1.99">
      <input id="rm" name="rm" type="hidden" value="2">
      <p>
        <input type="image" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_xpressCheckout.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
        <img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
      </p>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:29:46.683

您可以使用 PDT（支付数据传输）将交易信息返回到您的页面。[你可以在这里](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/paymentdatatransfer)找到更多关于它的信息。[您还可以在此处](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNandPDTVariables)找到可以返回的 PDT 变量列表。如果您想传递自定义信息，可以将其填充到变量“custom”中，然后在返回返回页面后解析该变量。我通常用“|”分隔我填充到“自定义”变量中的不同变量和值 但你可以使用任何适合你的东西。

# .net - 带有添加 Web 参考的外部绑定文件

> ID：11295851
> 
> 赞同：1
> 
> 时间：2012-07-02T14:38:33.253
> 
> 标签：.net, web-services

我正在使用 .NET 2010 中的 Add Web Reference 使用外部服务。它给了我一些错误，如下所示..

```
---------------------------
Microsoft Visual Studio
---------------------------
The custom tool 'MSDiscoCodeGenerator' failed.  Schema with
targetNamespace='http://www.isotc211.org/2005/gmd' has invalid syntax.
The complexType 'http://www.isotc211.org/2005/gmd:MD_Metadata_Type' has
already been declared. Line 15, position 4.
---------------------------
OK   
--------------------------- 
```

是否可以选择覆盖`.xsd`导致上述问题的文件？

# javascript - $(this).attr("href") 不工作

> ID：11295852
> 
> 赞同：2
> 
> 时间：2012-07-02T14:38:37.587
> 
> 标签：javascript, jquery, html

出于某种原因，这行代码返回 undefined for`$(this).attr("href")`

```
$("a").attr("href", "javascript:page('" + $(this).attr("href") + "')"); 
```

我怎样才能得到那个值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T14:43:02.923

```
$("a").click(function(e){
    e.preventDefault();
    page(this.href);
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T14:40:19.130

尝试：

```
$("a").attr("href", function (index, oldHref) {
    return "javascript:page('" + oldHref + "')");
}); 
```

查看文档以[`attr`](http://api.jquery.com/attr/)获取有关采用函数引用的重载的信息。

尽管正如@Pointy 指出的那样，您应该考虑编写事件处理程序而不是`javascript:`在标记中使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T14:42:52.310

这是一种不需要在您的 href 属性上使用 Javascript 的替代方法

```
$('a').click( function(e) {
    e.preventDefault();
    page(this.href);
} ) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T14:43:40.640

您不需要内联 javascript，为什么不这样做：

```
$("a").click(function(){
    page(this.href);
    return false;
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T14:40:41.190

如果你想这样做（更新页面上链接的所有 href 属性），你可以这样做

```
$("a").each(function() {
   $(this).attr("href", "javascript:page('" + $(this).attr("href") + "')");
}); 
```

# c++ - 这个运算符“^”的名称是什么？

> ID：11295859
> 
> 赞同：1
> 
> 时间：2012-07-02T14:38:52.763
> 
> 标签：c++

我知道该运算符执行“AND 逻辑运算符”，但我不知道如何处理它以及它是处理十进制数还是仅处理二进制数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T14:40:07.867

它是[`XOR`操作员](http://www.cplusplus.com/doc/boolean/)：

> **XOR（异或）**
> 
> 此操作在两个位（a 和 b）之间执行。如果两个位中的任何一个为 1，则结果为 1，但在两者都为 1 的情况下则不然。因此，如果两者都不等于 1，则结果为 0。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T14:40:54.980

那是按位异或运算符。

它执行[异或](http://en.wikipedia.org/wiki/Exclusive_or#Bitwise_operation)操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T14:40:46.540

这不是逻辑与，而是按位异或。它对*整数*进行操作，整数在 C++ 中始终是二进制数，并且可能会为其他类型重载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T14:40:37.060

那是按位运算`XOR`符（所以不是逻辑的，不是 AND），十进制数表示为二进制，所以它当然也适用于它们。

逻辑与是`&&`，按位与是`&`。

# javascript - 在 raphaeljs 中自定义地图

> ID：11295864
> 
> 赞同：0
> 
> 时间：2012-07-02T14:39:12.110
> 
> 标签：javascript, jquery, map, svg, raphael

我正在尝试在**raphaeljs**中构建自定义地图，在此我想做的是，使它像按顺序出现的国家的淡入淡出效果，因为我使用了`setInterval()`Event...

我在这里尝试了一些东西，但它设法显示最后一个项目，它淡入淡出......我想按顺序显示......有人可以帮忙吗？

这是示例：-

[http://jsfiddle.net/vpmzT/](http://jsfiddle.net/vpmzT/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:50:40.047

这里有几个问题，第一个@JSantos 已经指出：您将所有状态设置为同时闪烁，这可能不是预期的行为。第二个问题是`current`变量，以及`intervalFunctions`，是共享的，因此为每个状态分配了一个新值。这就是为什么您只获得列表中的最后一个状态来实际执行动画 - 到动画开始时，`intervalFunctions`数组包含最后一个状态的动画函数。

有多种可能的解决方法，但通常您必须使用`setTimeout(setInterval(animation_function(), total_interval), delay)`. 一种可能（虽然不是很可读）的方法是[http://jsfiddle.net/uTtaP/28/](http://jsfiddle.net/uTtaP/28/)

# c# - 序列化时出现 JSON .Net Windows Mobile 错误

> ID：11295872
> 
> 赞同：6
> 
> 时间：2012-07-02T14:39:37.253
> 
> 标签：c#, .net, json, json.net, windows-mobile-6

我正在运行这段代码：

```
 string serialized = JsonConvert.SerializeObject(somethingToSend); 
```

它抛出了这个异常：

> MissingMethodException：无法从程序集“mscorlib，版本=3.5.0.0，文化=中性，PublicKeyToken=969DB8053D3322AC”加载类型“System.Runtime.Serialization.StreamingContext”。

这是我的配置：

*   Visual Studio 2008（带有所有最新的服务包等）
*   针对 Windows Mobile 6 .Net 3.5 的智能设备项目
*   [Json DotNet](http://json.codeplex.com/)版本 4.5 Release 7（引用 zip 中 WindowsPhone 文件夹中的 DLL）

这个问题的答案“[是否有一个库可以在 Windows Mobile 上读取 C# 中的 JSON？](https://stackoverflow.com/q/183473/1039947) ”暗示它应该可以工作。

我在调试中运行它，连接了真实设备（所以没有模拟器），我之前从这里安装了 CAB 文件，没有错误：

> C:\Program Files (x86)\Microsoft.NET\SDK\CompactFramework\v3.5\WindowsCE\NETCFv35.wce.armv4.cab

该应用程序运行良好，直到我单击运行上述行的按钮，所以有人知道我缺少什么吗？

这个线程“ [Json.Compact.dll for Windows CE 5.0?](http://json.codeplex.com/discussions/228200) ”表明我需要安装 Windows SDK，我已经安装了。鉴于它在设备本身上运行，我想这无论如何都不会成为修复程序。

另一个建议是从源代码构建，但就像问题的作者一样，我无法将项目文件加载到 VS 2008 中来做到这一点。我可以创建一个新项目并包含源文件并尝试对其进行编译，但在此之前我想我会在这里问它是否值得，或者设备上的安装是否还缺少其他东西？或者也许我应该使用替代版本？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T05:43:26.177

所以我需要RTFM！自述文件说：

> Microsoft 在 Visual Studio 2010 中停止了对 Compact Framework 的支持。对于 Compact Framework 3.5 版本，请下载 Json.NET 3.5。

所以我抓住了最新的 3.5 版本，即：[Json.NET 3.5 Release 8](https://github.com/JamesNK/Newtonsoft.Json/releases/tag/3.5.8)，更新了我对`Newtonsoft.Json.Compact.dll`程序集的引用，运行它并且运行良好。

# android - 活动和服务通信

> ID：11295876
> 
> 赞同：1
> 
> 时间：2012-07-02T14:39:49.897
> 
> 标签：android, android-activity, android-service

我的应用程序包含一个创建服务的活动。只要应用程序正在运行，我希望该服务继续运行。我知道：

1.  不能保证，因为 Android 系统可以在内存不足的情况下以及活动在后台时终止活动。
2.  该服务可以被系统停止（和终止）。
3.  如果我将服务绑定到活动，则活动将在服务停止或启动时收到通知。但是，如果活动进入后台 (onStop())，服务可能会停止运行。如果我在这里错了，请纠正我。
4.  如果我在活动的 onResume() 中绑定到服务，在 onStop() 中绑定到服务，则当我的应用程序进入后台时，服务可能会停止运行。如果我在活动的 onDestroy() 中绑定 onCreate() 和 unbind()，这是否意味着我的活动即使在后台也将继续从服务获取通知。
5.  只要应用程序正在运行，保持服务运行并从服务到 Activity 的通知的最佳方式是什么。请注意，应用程序中只有一个活动，因此在后台发送活动意味着应用程序进入后台。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:56:25.493

如果您将 a 绑定`Service`到您的`Activity`. 它只是意味着只要您的活动正在运行，您就需要服务来运行。如果您不需要绑定活动，或者您在运行时`Service`不需要更新您的活动。你不能将你的绑定到你的. 在这种情况下，对于您所做的不同操作，您可以使用. 比如通知用户xx下载已经完成。`UI``Service``Service``Activity``Service``Android Notifications`

这完全取决于您想要实现的目的`Service`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:02:42.657

如果您可以`IntentService`用于您的应用程序，则可以通过`Intent`. 结果可以通过`ResultReceiver`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T15:03:51.383

如果您将 your 绑定`Service`到您的 unique `Activity`，只要`Activity`没有终止或`service`没有解除绑定，您就可以让它活着。只需将它绑定在 上，`onCreate()`并在停止时让它解开`activity`（无需做任何事情）。

`interface`您可以在您的中创建一个侦听器`service`，您将在 中实现`Activity`，因此您可以将这些通知从 发送`Service`到`Activity`。如果使用 Google 搜索，您会找到合适的示例和相关信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T15:09:26.210

1.  真的
2.  是的，但如果我们使用 startForeground() 则更为罕见
3.  该服务通常不会停止，直到所有活动都解除绑定。但是当最后一个有时，它会的。因此，如果您仅在 onPause if isFinishing() == true 时取消绑定，则可以防止服务在进入后台时死亡。
4.  见 3。
5.  我个人喜欢在 Activity 中设置一个 Handler 并从服务中向它发送消息。

# visual-studio - x64汇编函数的增量链接

> ID：11295884
> 
> 赞同：0
> 
> 时间：2012-07-02T14:40:13.420
> 
> 标签：visual-studio, assembly, linker, 64-bit

我在 c++ dll 项目中有一个 x64 程序集文件。
由于超出此范围的原因，我希望链接器在此函数的跳转表中生成一个条目，就像项目中的任何其他 c/c++ 函数一样。
但是，当我从我的 c++ 代码中调用此函数时，它会立即跳转到汇编函数，而不是通过跳转表。
有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-23T01:02:37.997

汇编代码不能被编译器重定位。所以它没有跳转表条目。

# android - 警报需要 n 次

> ID：11295889
> 
> 赞同：0
> 
> 时间：2012-07-02T14:40:27.503
> 
> 标签：android, alarmmanager, android-alarms, repeatingalarm

我正在尝试制作一个警报应用程序，它将从用户那里获取“n”次并在这些时间发出嗡嗡声并存储时间差异，以便下一个用户访问应用程序，存储的差异是默认值。这是主要活动的代码：

```
public void startAlert(View view) {
        EditText textH = (EditText) findViewById(R.id.hours);
        int h = Integer.parseInt(textH.getText().toString());

        EditText textM = (EditText) findViewById(R.id.minutes);
        int m = Integer.parseInt(textM.getText().toString());

        EditText textS = (EditText) findViewById(R.id.seconds);
        int s = Integer.parseInt(textS.getText().toString());

        Calendar cal = Calendar.getInstance();
        cal.set(Calendar.HOUR, h);
        cal.set(Calendar.MINUTE, m);
        cal.set(Calendar.SECOND, s);

        Intent intent = new Intent(this, AlarmService.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(this,
                12345, intent, PendingIntent.FLAG_CANCEL_CURRENT);
        AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
        alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                pendingIntent);
        Toast.makeText(this, "Alarm set", Toast.LENGTH_LONG).show();
    } 
```

我不知道如何`editTexts`在运行时添加 n 个？对于`AlarmManager`班级...我应该运行一个循环来创建 n 个`AlarmManager`对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:51:31.393

在您的活动中获取对列表视图/布局的引用。然后你可以使用 layout.addView(editText)

[它与以编程方式将按钮添加到布局](https://stackoverflow.com/questions/4907609/add-button-to-a-layout-programmatically)几乎相同

西蒙

# javascript - Extjs.getBody 的问题

> ID：11295896
> 
> 赞同：0
> 
> 时间：2012-07-02T14:40:52.157
> 
> 标签：javascript, extjs, extjs4

我有这行代码

```
 var width_client = Ext.getBody().getWidth(true); 
```

我知道 Ext.getBody() 为空。我假设这个检查是在 Ext.getBody() 变为非空之前进行的，但不知道是什么或要改变什么。

知道如何解决这个问题吗？

我使用 extjs 4.0.7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:28:55.690

您可以在呈现 document.body 时访问它。根据您的问题，我得出的结论是您的代码位于`<head>`. 执行此代码时，还没有`<body>`渲染。你必须用一个函数包装你的代码并将这个函数传递给[Ext.onReady](http://docs.sencha.com/ext-js/4-1/#!/api/Ext-method-onReady)（或[Ext.onDocumentReady](http://docs.sencha.com/ext-js/4-1/#!/api/Ext-method-onDocumentReady)）方法：

```
Ext.onReady(function() {
    alert(Ext.getBody().getWidth(true));
}); 
```

这是[演示](http://jsfiddle.net/ArkUZ/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T15:28:43.180

您必须等到页面加载并准备好。试试这个。

```
Ext.onReady(function() { Ext.getBody().getWidth();}) 
```

# javascript - jQuery JSON 值

> ID：11295899
> 
> 赞同：0
> 
> 时间：2012-07-02T14:41:03.217
> 
> 标签：javascript, json, syntax

我有一个返回 JSON 的 REST 服务，如下所示：

```
[{"@id":"123","name":"Name"}] 
```

我正在努力弄清楚如何获得@id 的价值。我试过了：

```
var temp =  data['@id'];
var temp = data[0].'@id';
var temp = data[0].['@id']; 
```

所有这些都返回错误。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:41:47.477

应该：

```
var temp = data[0]['@id']; 
```

没有点您在最后一次尝试中输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:45:18.840

`var temp = data[0]['@id'];`

Using`.property`只接受可以在标识符中使用的符号，并且与`["property"]`. 由于您有一个带有`"@id"`属性的单个对象的数组，并且 @ 不能在标识符中使用，因此您必须使用括号。以上转换为数据 -> 它是第 0 个索引（索引计数从 0 开始） -> 它的属性“@id”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-02T14:44:03.060

我找到了解决方案：

```
var temp = data[0]['@id']; 
```

# c# - 套接字编程上的 APM、EAP 和 TPL

> ID：11295901
> 
> 赞同：10
> 
> 时间：2012-07-02T14:41:08.267
> 
> 标签：c#, sockets, design-patterns, asynchronous, task-parallel-library

我发现[[...]Async 和 Begin[...] .net 异步 API 之间的区别](https://stackoverflow.com/q/3081079/704144)问题，但[这个答案](https://stackoverflow.com/a/3081850/704144)让我有点困惑。

谈到这些模式，斯蒂芬说：

> 大多数 *Async 方法（具有相应的 *Completed 事件）都使用基于事件的异步模式。较旧的（但仍然完全有效）Begin* 和 End* 是一种称为异步编程模型的模式。
> 
> Socket 类是这个规则的一个例外；它的 *Async 方法没有任何对应的事件；它本质上只是为了避免过多的内存分配而完成的 APM。

我认为使用 *Async 方法效率更高，至少在套接字方面是这样。但随后他提到了任务并行库：

> 但是，APM 和 EBAP 都被基于任务并行库的更灵活的方法所取代。由于 TPL 可以轻松地包装 APM，旧的类可能不会直接更新；扩展方法用于为旧的 APM 方法提供等效的任务。

我在 MSDN 上找到了[TPL 和传统 .NET 异步编程](http://msdn.microsoft.com/en-us/library/dd997423.aspx)，我知道 TPL 的基础知识，创建任务、取消、继续等，但我仍然无法理解这些：

异步编程模型 (APM) 和基于事件的异步模式 (EAP) 相比有哪些优势？**TPL**如何轻松包装APM 意味着 APM 和 EAP 都**将被**TPL 取代？

最重要的是：我应该在套接字编程中使用哪个；

*   APM?
*   亚太区？
*   任务包装的 APM 或 EAP？
*   TPL 通过在任务中使用 Socket 类的阻塞方法？
*   其他？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T04:20:19.213

> TPL 如何轻松包装 APM 意味着 APM 和 EAP 都将被 TPL 取代？

它没有。APM 和 EAP 是否会被 TAP（任务异步模式）取代或不在新的 API 中与此无关。出于各种原因，我希望 TAP 取代 APM 和 EAP。对我来说，主要原因是您为使用 TAP 编写的代码编写得更好。执行`.ContinueWith(/* ... */).ContinueWith(/* ... */)`通常比通过 Begin/End 方法链接异步调用所需编写的相应代码要好得多，即使您不考虑可以传递给 ContinueWith 以确定是否应该运行延续的选项。TPL 还为任务提供了各种组合器，例如`WaitAll`和`WaitAny`，这可以使某些场景变得更加容易。通过 async/await 关键字在 C# 和 VB.NET 中提供的语言支持将使这更加容易。

能够在 TAP 中包装 APM 可以更轻松地切换到此模式，因为这意味着您不必重写现有代码以使其适合新模型。

> 我应该在套接字编程中使用哪个？

我建议使用 TAP 在 Socket 上包装 APM 方法。除非您可以证明将 Begin/End 方法包装到 Task 中的额外开销是可扩展/是否足够快之间的区别，否则我会利用 TAP 编码的简易性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T00:58:42.007

基甸有一个很好的答案。我只是想提供更多背景信息：

> 异步编程模型 (APM) 和基于事件的异步模式 (EAP) 相比有哪些优势？

APM 更常见，它有一个非常严格定义的模式。例如，TPL 为 APM 方法 ( `TaskFactory.FromAsync`) 提供了通用包装器，但它不能为 EAP 做同样的事情，因为 EAP 没有严格定义。

EAP 有一个很大的优势：事件回调为您处理线程封送处理。所以它们非常适合用于 UI 的基本后台操作（`BackgroundWorker`）。

TAP 结合了两全其美：默认的自动线程封送处理和严格定义的通用模式。它还为异步操作提供了一个很好的对象表示 ( `Task`)。

> “TPL 可以轻松包装 APM”如何意味着“APM 和 EAP 都被 TPL 取代”？

它没有。

“但是，APM 和 EBAP 都被基于任务并行库的更灵活的方法所取代。” - 意味着新代码不需要包含 APM/EAP 方法/事件；新代码应该包含 TAP 方法。

“由于 TPL 可以轻松包装 APM，旧类可能不会直接更新；扩展方法用于为旧 APM 方法提供 Task 等效项。” - 意味着您可以使用 ; 将 TAP 方法添加到现有的 APM 类型`TaskFactory.FromAsync`；我认为 TPL 团队会采用这种方法，而不是修改 BCL 中的大量类。**然而，我在这个猜想中是错误的。**出于性能原因，BCL/TPL 团队确实审查了整个框架并将 TAP 方法直接添加到 .NET 类中，而不是使用扩展方法。新的 TAP 方法包含在 .NET 4.5 中，即将推出......

# javascript - extJS：通过 JS 在字段上设置“配置选项”

> ID：11295905
> 
> 赞同：1
> 
> 时间：2012-07-02T14:41:22.260
> 
> 标签：javascript, json, extjs4, extjs

为什么我不能通过方法 SET设置“**配置选项”**

```
set({value: 'new value',disabled:true}); 
```

我如何为字段设置“属性”

```
var name = {
    fieldLabel:'Name',
    value: 'Test',
    id:'id-name',
    xtype: 'textfield',
};
this.form= new Ext.FormPanel({
    items:[name],
    buttons: [{
        text   : 'set value',
        handler: function() {
            Ext.getCmp('id-name').set({value: 'new value',disabled:true});
        }]
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:54:13.467

使用对象重置组件属性不是 Extjs 设计的一部分。配置用于对象创建，当第一次在构造函数中使用时，使用 Extjs 类系统核心中的特殊方法将其应用于对象本身，以生成 getter 和 setter，然后从它们初始化组件。不可能做你想做的事并得到想要的结果。在上面的示例中，使用您的配置初始化文本字段，在创建期间覆盖组件的默认值，然后它为某些属性生成 getter 和 setter，例如 value、id 和 fieldLabel，这些属性需要在之后使用而不是配置对象组件被创建。要使您的示例正常工作，您需要执行以下操作：

```
var name = {
    fieldLabel:'Name',
    value: 'Test',
    id:'id-name',
    xtype: 'textfield',
};
this.form= new Ext.FormPanel({
    items:[name],
    buttons: [{
        text   : 'set value',
        handler: function() {
            var myTextField = Ext.getCmp('id-name');
            myTextField.setValue('new value');
            myTextField.setDisabled(true);
        }]
}); 
```

# java - Netbeans 启动选项“sun.java2d.opengl=true”无法识别

> ID：11295906
> 
> 赞同：1
> 
> 时间：2012-07-02T14:41:24.853
> 
> 标签：java, linux, opengl, netbeans-7

我正在尝试在我正在使用的一台相当旧的 PC 上调整 Netbeans 的性能。我已经遵循了[这里](http://performance.netbeans.org/howto/jvmswitches/)的一些建议，但是关于

> sun.java2d.opengl=true

失败，给予

> 未知选项 -Dsun.java2d.opengl=true

我正在使用 Linux WattOS 发行版 5、Java 1.7 和 Netbeans 7.1.2。这个选项现在是否已经过时了，因为上面的页面似乎是指 Java 5？

是否需要执行其他步骤才能使 Netbeans 使用 openGL？

** 附加信息 **

我意识到我应该使用该选项作为

> -J-Dsun.java2d.opengl=true

虽然现在我尝试启动 Netbeans 时会崩溃。我已经提交了崩溃报告，所以我会等着看会发生什么，然后在这里发布结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:56:09.777

检查与

```
java -version 
```

你用的是什么版本的java。此扩展仅在 Sun JVM 中受支持，并且很多发行版都默认带有 OpenJDK。

# php - PHP - SOAP/WSDL 方法不显示所有参数

> ID：11295908
> 
> 赞同：1
> 
> 时间：2012-07-02T14:41:28.510
> 
> 标签：php, wsdl

我在使用 WSDL 时遇到了一些问题。当我尝试使用 Soap Client 检索数据时，该函数未显示服务定义的所有参数。有趣的是，如果我尝试直接访问服务脚本 - 它将显示正确的数组，并带有足够的参数。

可能是什么问题？至于兑现，我尝试了以下方法，但没有任何运气：

```
ini_set("soap.wsdl_cache_enabled", "0");
$client = new SoapClient("crm.wsdl", array('cache_wsdl' => WSDL_CACHE_NONE)) or die('error'); 
```

# haskell - 如何从外部代码中确定数据的构造函数？

> ID：11295915
> 
> 赞同：5
> 
> 时间：2012-07-02T14:41:56.197
> 
> 标签：haskell, ffi

在我的 Haskell 程序中，我有一个带有许多构造函数的 ADT：

```
data MyData = Con1 |
    Con2 |
    ...
    Con20 
```

我有一个`foreign export ccall`函数，它包装`[MyData]`成`StablePtr's`. 调用它后，我需要确定使用哪个构造函数来构造每个元素。

可以这样解决

```
foreign export ccall getType :: StablePtr MyData -> IO CInt
getType (Con1) = return 1
getType (Con2) = return 2
... 
```

但随后我需要在 C 标头中手动定义这些常量。这很容易出错，所以我想知道是否有办法让 GHC 为我完成这项工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T14:51:57.607

`Enum`为您的 Haskell 类型派生，然后导出`fromEnumMyData :: MyData -> Int ; fromEnumMyData = fromEnum`。

然后您可以通过查看 GHC 分配的 Int 标签来在 C 端进行案例分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:44:34.070

我已经找到了解决方案。

我在 C 代码中将可能的构造函数类型定义为枚举：

```
typedef enum
{
    MyDataCon1,
    MyDataCon2,
    ...
    MyDataCon20
} MyDataConstructor; 
```

然后我在我的 Haskell 源代码中使用了[C->Haskell](http://hackage.haskell.org/package/c2hs)枚举钩子：

```
{#enum MyDataConstructor deriving (Show) #} 
```

预处理后这条线变成

```
data MyDataConstructor = MyDataCon1
    | MyDataCon2
    ...
    | MyDataCon20 
```

现在我可以`getType`这样定义：

```
foreign export ccall getType :: StablePtr MyData -> IO CInt
getType md = do
    md' <- deRefStablePtr md
    case md' of
        Con1 -> return $ fromEnum MyDataCon1
        Con2 -> return $ fromEnum MyDataCon2
        ...
        Con20 -> return $ fromEnum MyDataCon20 
```

# jquery - JQuery选择插件 - 清除'current_value'属性

> ID：11295916
> 
> 赞同：1
> 
> 时间：2012-07-02T14:42:02.823
> 
> 标签：jquery, jquery-plugins, jquery-chosen

我正在使用 jquery 选择的插件，但无法访问我需要清除的属性之一，即用于存储最后选择的值的“current_value”。我有一个特殊的用例，我想清除此字段。我已向插件添加了一个重置​​方法，但我无法获得对所选对象实例的引用来调用新方法。我可以看到这个字段并在 firebug 中更改它，但我不知道如何调用它。

# python - 如何在 Python 中使用 tkinter 选择目录并存储位置

> ID：11295917
> 
> 赞同：44
> 
> 时间：2012-07-02T14:42:03.497
> 
> 标签：python, button, tkinter, directory, python-2.x

我正在创建一个带有浏览按钮的 GUI，我只想返回路径。我一直在寻找使用如下代码的解决方案。

```
Tkinter.Button(subframe, text = "Browse", command = self.loadtemplate, width = 10).pack()

   def loadtemplate(self): 
        filename = tkFileDialog.askopenfilename(filetypes = (("Template files", "*.tplate")
                                                             ,("HTML files", "*.html;*.htm")
                                                             ,("All files", "*.*") ))
        if filename: 
            try: 
                self.settings["template"].set(filename)
            except: 
                tkMessageBox.showerror("Open Source File", "Failed to read file \n'%s'"%filename) 
```

但是我知道 Tkinter 有一个内置`askopenfilename`的代码，它是用于打开文件的超级简单的一行代码。有没有办法修改它以返回目录而不是文件？是否有比我发布的较大代码块更小的选项？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-07-02T14:58:16.730

看来`tkFileDialog.askdirectory`应该可以。[文件](https://pythonspot.com/tk-file-dialogs/)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2018-03-21T05:59:53.060

此代码可能对您有所帮助。

```
from tkinter import filedialog
from tkinter import *
root = Tk()
root.withdraw()
folder_selected = filedialog.askdirectory() 
```

# c# - Process.StandardOutput.ReadToEnd() 和无关的换行符

> ID：11295922
> 
> 赞同：2
> 
> 时间：2012-07-02T14:42:27.180
> 
> 标签：c#, windows, .net-4.0, process

我试图理解为什么当我调用上述函数时，我正在阅读的输出中每第 80 列得到十六进制 0D0A。

为了简洁起见，我有一个 powershell 脚本，用于测试其中有两行：

```
$xmlSpew = "<IISAppPoolConfig><DefaultWebSite><ApplicationPoolName>DefaultAppPool</ApplicationPoolName></DefaultWebSite><AuthN>Basic</AuthN></IISAppPoolConfig>"
Write-Output $xmlSpew 
```

我正在使用带有 ProcessStartInfo 的 Process 对象调用脚本，如下所示：

```
var psi = new ProcessStartInfo
{
    WorkingDirectory = Path.GetDirectoryName(FileToRun),
    FileName = FileToRun,
    Arguments = Arguments,
    UseShellExecute = false,
    CreateNoWindow = true,
    RedirectStandardError = true,
    RedirectStandardOutput = true,
};

var process = new Process
{
    StartInfo = psi,
    EnableRaisingEvents = true,
}; 
```

FileToRun 值为：

```
C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe 
```

参数值为：

```
-File "C:\Program Files\MyTest\MyProgInputs\read.d\IISAppPoolConfig.ps1" 
```

脚本运行良好，我返回退出代码 0，但我在标准输出中每隔 80 个字符就有一个神秘的（对我而言）0D0A 换行符，我使用以下方法捕获：

```
var Stdout = new List<string>;

...

Stdout.Add(process.StandardOutput.ReadToEnd()); 
```

一旦我将标准输出存储在字符串 var 中，这将对我的 XML 工作造成严重破坏。我希望得到我在 ps1 脚本中写入标准输出的确切内容，而不是额外的换行符。

我错过了什么？我已经寻找其他有这个问题的人，但我没有找到答案。希望不是我受到搜索挑战。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:23:57.567

目前最终和经过测试的解决方案（因为我需要发布一些东西）是让 powershell 的输出来自 Write-Host cmdlet 而不是 Write-Output。获取标准输出的过程和我原来的帖子一样。希望这对其他人有帮助。感谢所有输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:55:14.820

遵循[此](http://blogs.msdn.com/b/thottams/archive/2006/08/11/696013.aspx)P/Invoke 方法并设置`dwXCountChars`为非常大的值。不要忘记也包括`STARTF_USECOUNTCHARS`在标志中。

# programming-languages - specman e 中的自动转换和类型转换

> ID：11295929
> 
> 赞同：1
> 
> 时间：2012-07-02T14:42:43.850
> 
> 标签：programming-languages, conventions, specman

考虑以下 e 中的示例：

```
var a : int  = -3
var b : int  =  3
var c : uint = min(a,b); print c
    c = 3
var d : int  = min(a,b); print d
    d = -3 
```

里面的参数`min()`被自动转换为结果表达式的类型。

我的问题是：

1.  是否有其他使用类型自动转换的编程语言，它们如何处理像`min()`和这样的函数`max()`？
2.  这种行为合乎逻辑吗？我的意思是这个定义与以下可能的 min 定义不一致：
    `a < b ? a : b`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-29T05:17:10.797

有许多语言可以进行类型自动转换，而许多语言则不会。我应该提前说，我认为这不是一个好主意，而且我更喜欢我的语言中更有原则的行为，但有些人更喜欢自动转换的方便和不冗长。

## Perl

Perl 是一种可以进行类型自动转换的语言的示例，这里有一个非常有趣的示例，它显示了这在什么时候可能会非常令人困惑。

```
print "bob" eq "bob";
print "nancy" eq "nancy";
print "bob" == "bob";
print "nancy" == "nancy"; 
```

上面的程序打印 1（为真）三次，而不是四次。为什么不是第四个？好吧，“南希”不是==“南希”。为什么不？因为 == 是数值相等运算符。eq 用于字符串相等。正在比较字符串，就像您在 eq 中所做的那样，但在 == 中，它们会自动转换为数字。“鲍勃”等于多少？当然是零。任何没有数字作为前缀的字符串都被解释为零。出于这个原因，“鲍勃”==“克里斯”是真的。为什么不是“nancy”==“nancy”？为什么“南希”不是零？因为这被读作“不是数字”的“nan”。NaN 不等于另一个 NaN。我个人觉得这很令人困惑。

## Javascript

Javascript 是另一个可以进行类型自动转换的语言示例。

```
'5' - 3 
```

这个表达式的结果是什么？2！很好。

```
'5' + 3 
```

那个结果是什么？8？错误的！这是'53'。

使困惑？好的。[哇 Javascript，这么好的约定，很有意义](http://blog.glaucus.in/wow-javascript-such-good-conventions-much-sense/)。这是一系列基于自动转换类型的非常有趣的 Javascript 评估。

## 为什么会有人这样做！？

在看过一些精心挑选的恐怖故事之后，您可能会问自己，为什么那些聪明到发明了全世界最流行的两种编程语言的人会做出如此愚蠢的事情。我不喜欢类型自动转换，但公平地说，这是有争议的。这不是纯粹的错误。考虑以下 Haskell 表达式：

```
length [1,2,3,4] / 2 
```

这等于什么？2？2.0？没有！由于类型错误，它无法编译。length 返回一个 Int 并且您不能将其分开。您必须通过调用 fromIntegral 将长度显式转换为分数才能使其工作。

```
fromIntegral (length [1,2,3,4]) / 2 
```

如果您在程序中使用整数和浮点数进行大量数学运算，那肯定会很烦人。但我更愿意理解为什么 nancy 不等于 nancy 但实际上 chris 等于 bob。

## 快乐的媒介？

方案只有一种数字类型。它会自动转换浮点数、分数和整数，并按照您的预期处理它们。它将允许您在不显式转换的情况下划分列表的长度，因为它知道您的意思。但是不，它永远不会秘密地将字符串转换为数字。字符串不是数字。这很愚蠢。;)

## 你的例子

至于你的例子，很难说它是否合乎逻辑。令人困惑，是的。我的意思是你在这里堆栈溢出不是吗？我认为你得到 3 的原因要么是 -3 被解释为像罗斯所说的那样，作为 2 的恭维中的一个单位并且是一个更高的数字，或者因为 min 的结果是 -3 然后它变成了unsigned int 去掉负数。问题是您要求将结果放入无符号整数中，但结果是否定的。所以我会说它所做的在类型自动转换的上下文中是合乎逻辑的，但是类型自动转换是令人困惑的。据推测，您不必在整个地方进行显式类型转换，并且有时会以这种奇怪的行为为它付出代价。

# hibernate - 您将如何在这里使用 Hibernate Criteria？

> ID：11295935
> 
> 赞同：0
> 
> 时间：2012-07-02T14:42:55.323
> 
> 标签：hibernate, hibernate-criteria

让我们声明我有一个名为 Tests 的表。每个测试对象都有一个分数，我想选择高于平均水平的测试。很容易，使用投影来获得平均测试分数，但我想在一个标准下使用它，而不是创建第二个并存储平均分数并将其重新插入下一个标准。

这样的事情合法吗？

```
Criteria crit = session.createCriteria(Product.class);
crit.add(Expression.ge("score",Projections.avg("score")));
crit.addOrder(Order.desc("score")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:28:33.737

不可以。您需要执行一个查询来选择所有得分高于所有得分平均值的产品。这需要一个子查询。在 HQL 中：

```
select product from Product product
where product.score > (select avg(product2.score) from Product product2) 
```

如果你真的想用 Criteria 来做，我会让你把它翻译成 Criteria（恕我直言，这是一个坏主意，因为上面的可读性更强，你不需要动态地编写查询）。

# python - 静态类变量

> ID：11295936
> 
> 赞同：0
> 
> 时间：2012-07-02T14:42:55.730
> 
> 标签：python, static, class-variables

我不明白下面的代码是如何工作的：

```
class Host:
    name = None
    fileList = []
    def __init__(self, hostName):
        self.name = hostName    
    def AddInfo(self,file):
        self.fileList.append(file)          
    def Cleanup(self):
        self.fileList   = [] 
```

我创建了 2 个实例：

```
h1 = Host("hostName1")
h1.AddInfo("h1")
h1.Cleanup()
print h1.fileList, Host.fileList

h2 = Host("hostName2")
h2.AddInfo("h2")
print h2.fileList, Host.fileList 
```

结果是：

```
h1.fileList = [], Host.fileList = ['h1']
h2.fileList = ['h1', 'h2'], Host.fileList = ['h1', 'h2'] 
```

为什么`Host.fileList`值会改变 - 我只为实例分配了新值？为什么`h2.fileList`有这样的价值 - 我在这里期待`['h2']`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:46:02.087

这是基本的 Python（如“Python 不是 Java”）。

在类级别声明的属性是类属性，而不是实例属性。要声明实例属性，请直接分配给`self`方法内部，就像使用`self.name`in一样`__init__`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T14:47:29.540

类范围内的变量由类定义。您应该在`__init__`.

```
def __init(self, hostName):
    self.name = hostName
    self.fileList = [] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T14:49:47.027

这可能很容易通过单步执行您的代码来查看：

```
h1 = Host("hostName1")  #After __init__:h1.filelist -> Host.filelist
h1.AddInfo("h1")        #After AddInfo: h1.filelist -> Host.filelist
h1.Cleanup()            #After Cleanup: h1.filelist is a new list

h2 = Host("hostName2")  #After __init__:h2.filelist -> Host.filelist (which already has 'h1' inserted)
h2.AddInfo("h2")        #After AddInfo: h2.filelist -> Host.filelist 
```

在您的方法中，使用 时`self.filelist`，python 会首先查看实例是否具有`filelist`属性。如果实例没有该属性，python 会在该实例所属的类上查找该属性。当您执行`self.filelist=[]`时`Cleanup`，您正在为实例提供属性`filelist`。

# python - 如何获取迭代器当前指向的项目而不增加？

> ID：11295937
> 
> 赞同：23
> 
> 时间：2012-07-02T14:42:55.113
> 
> 标签：python, iterator

有没有办法让python中的迭代器指向的项目而不增加迭代器本身？例如，我将如何使用迭代器实现以下内容：

```
looking_for = iter(when_to_change_the_mode)
for l in listA:
    do_something(looking_for.current())
    if l == looking_for.current():
        next(looking_for) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-02T14:47:36.683

迭代器无法获取当前值。如果需要，请自己保留对它的引用，或者将迭代器包装起来为您保留它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-02T14:54:19.670

```
looking_for = iter(when_to_change_the_mode)
current = next(looking_for)
for l in listA:
    do_something(current)
    if l == current:
        current = next(looking_for) 
```

问题：如果在迭代器结束时怎么办？该`next`函数允许使用默认参数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-02T14:47:24.753

我不认为有一个内置的方式。将有问题的迭代器包装在一个缓冲一个元素的自定义迭代器中是很容易的。

例如：[如何在 Python 生成器中向前看一个元素？](https://stackoverflow.com/questions/2425270/how-to-look-ahead-one-element-in-a-python-generator)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-17T09:48:21.327

当我需要这样做时，我通过创建如下类来解决它：

```
class Iterator:
    def __init__(self, iterator):
        self.iterator = iterator
        self.current = None
    def __next__(self):
        try:
            self.current = next(self.iterator)
        except StopIteration:
            self.current = None
        finally:
            return self.current 
```

这样，您就可以像使用标准迭代器一样使用 next(itr)，并且可以通过调用 itr.current 来获取当前值。

# actionscript-3 - actionscript 3 安全类导入

> ID：11295941
> 
> 赞同：1
> 
> 时间：2012-07-02T14:43:03.933
> 
> 标签：actionscript-3, flash, network-programming, cross-domain-policy

因此，在启动（我的第一个）工作服务器之后，（还没有什么大的或令人印象深刻的，没有客户端，kinof 没用是吗？）并用一个齐心协力的 C++ 客户端测试它，下一步是从什么建立一个连接将成为它的长期伙伴（一旦完成，仍然是 WIP）。

服务器端在 C++ 中，客户端在 AS3 中，长话短说，我找不到导入的内容。* 我需要安全调用从服务器获取策略文件。我在 FlashDevelop 工作，仅供参考。

我需要这个函数：Security.loadPolicyFile();

任何帮助是极大的赞赏！

干杯; -泰勒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:47:21.737

经过一番挖掘后，我找到了我正在寻找的导入，导入 flash.system.Security；似乎很难找到，但现在一切正常。

# iphone - 保留视图

> ID：11295944
> 
> 赞同：0
> 
> 时间：2012-07-02T14:43:09.257
> 
> 标签：iphone, objective-c, automatic-ref-counting, retain

我希望在处理应用程序的其他模块时保留创建的类中的视图状态，这在 ARC 环境中是否可行。

在我看来，如果我进入另一个班级，视图就会被释放。那么解决方案是什么，让我知道以防万一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:44:43.317

将视图设置为`strong`属性，则不会释放

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:57:59.703

从技术上讲，如果视图与当前不可见的视图控制器相关联，则视图*可能会被释放。*这是设计使然，试图阻止视图被释放只是与框架作斗争，这对您的健康不利。

但是，如果你真的想这样做，你可以在`viewWillDisappear:`控制器的方法中保留视图。对于 ARC，它只是将视图分配给 ivar。请注意，当视图控制器再次出现时，将创建新视图，您还需要覆盖“loadView”以将现有视图分配给视图控制器的视图。

# c# - c#中递归泛型类型的问题

> ID：11295945
> 
> 赞同：14
> 
> 时间：2012-07-02T14:43:14.913
> 
> 标签：c#, generics, exception-handling, recursion, mono

我有一些 C# 代码在 mono 和 Microsoft 的 .net 编译器下都可以正常编译，但只能在 mono 上运行。错误消息是（我添加的换行符）

```
Unhandled Exception: System.TypeLoadException:
Could not load type 'Hasse.Groups.Heavy.Product.PowerGroup`1'
from assembly 'Hasse, Version=1.0.x.y, Culture=neutral, PublicKeyToken=null'
because it has recursive generic definition. 
```

该类型实际上有一个递归的泛型定义，所以我的问题是：为什么它适用于单声道？[代码运行并产生预期结果]

完整的源代码在这里：[https ://github.com/miniBill/Hasse](https://github.com/miniBill/Hasse)

仍然崩溃的简化代码在这里：

```
public class Group<T> : IWrappableGroup<WrapperGroup<T>> {}

public class WrapperElement<T> {}

public interface IWrappableGroup<U> {}

public class WrapperGroup<T> : Group<WrapperElement<T>> {}

class MainClass {
    public static void Main(string[] args){
        var ng = new Group<object>();
    }
} 
```

这是它适用于单声道的证明：http: [//ideone.com/ZvA3I](http://ideone.com/ZvA3I)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T16:36:19.833

这是一个[已知](https://connect.microsoft.com/VisualStudio/feedback/details/679421/generic-defintion-causes-system-typeloadexception)问题。它可能被报告为编译器错误。

[http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf)（第129页）

至于在 Mono 中工作，就规范而言，有几个地方 Mono 工作被“破坏”了。

（[递归 lambda](https://stackoverflow.com/questions/1079164/c-recursive-functions-with-lambdas/1079609#1079609)是另一个在 Mono 中不应该工作的东西的例子）

# extjs - 动态加载 Web 应用程序的图标

> ID：11295946
> 
> 赞同：-2
> 
> 时间：2012-07-02T14:43:16.067
> 
> 标签：extjs, icons, extjs4, extjs4.1

我有 ExtJS 应用程序，并且我有时会开发它。我不想用 CSS 明确指定每个图标，因为图标太多（[http://p.yusukekamiyamane.com/](http://p.yusukekamiyamane.com/)），我只想写下图标的名称并使用它。什么样的解决方案可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T17:28:57.840

我明白你想在这里做什么，但实现你想要的是不可能的。Extjs 库内部的工作方式一般使用 CSS 来定义所有的图标，而 CSS 本身并不是很容易为图标创建动态类。

在很多组件上，您可以直接指定图标图像，在这些情况下，您可以这样做：创建一个只需要图标名称作为输入的函数，并返回带有图标名称的图标路径：

```
function getIcon(iconName){
    return "\somedirectory\somesubdirectory\" + iconName;
} 
```

在任何地方都可以使用组件上的 'icon' 属性而不是 iconCls 属性。设置图标属性时，可以这样做：

```
Ext.create("Ext.button.Button", {
   icon: getIcon("cheese.gif")
}); 
```

# graph - d3 从节点和背景中分离单击和拖动

> ID：11295949
> 
> 赞同：2
> 
> 时间：2012-07-02T14:43:23.043
> 
> 标签：graph, d3.js

我正在尝试在 d3 力图中启用拖动行为，以便可以单击背景（不是节点或链接）并拖动（平移）整个图形，但也可以独立单击并拖动节点（无需平移整个图形）。虽然我可以让每个单独工作，但当我组合代码时，背景矩形似乎覆盖了节点，因此我不能再拖动节点而不拖动整个图形。我在下面包含了两个相关的代码，非常感谢任何帮助！

这段代码让我可以平移和缩放整个图表：

```
vis = d3.select("#chart")
.append("svg:svg")
    .attr("width", w)
    .attr("height", h)
    .append("svg:g")
    .call(d3.behavior.zoom().on("zoom", redraw))
    .append("svg:g"); 
```

此代码允许我拖动并单击一个节点 - 但仅当不包含上述代码时：

```
 var node = vis.selectAll("circle.node")
      .data(json.nodes)
    .enter().append("svg:circle")
      .attr("class", "node")
      .attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; })
      .attr("r", 6)
      .style("fill", function(d) { return groupColors[(d.group)-1]; }) // fill(d.group)
      .on("click", function(d) {
            node.style("stroke","#FFFFFF");
            d3.select(this).style("stroke","red");
            clickNode(d);
            })
      .call(force.drag); 
```

# c# - 从 ADFS 声明身份验证

> ID：11295953
> 
> 赞同：15
> 
> 时间：2012-07-02T14:43:44.370
> 
> 标签：c#, sharepoint, authentication, active-directory, adfs

我尝试通过 WPF 应用程序连接到 SharePoint Online 实例。我发现[这篇文章](http://www.wictorwilen.se/Post/How-to-do-active-authentication-to-Office-365-and-SharePoint-Online.aspx)描述了一个可能的解决方案，但问题是特定实例前面有一个 Active Directory 联合身份验证服务 (ADFS)，我不知道如何获取身份验证令牌。（我无法为我的应用程序创建证书以针对 adfs 进行身份验证。）

任何已经这样做并且可以通过一些代码片段支持我的人吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T14:14:30.853

我和 Fiddler 一起玩过。基本上流程是这样的：

*   从 ADFS 获取 SAML 令牌
*   将其发布到[https://login.microsoftonline.com/login.srf](https://login.microsoftonline.com/login.srf)（正文应该是`wa=wsignin1.0, wresult=<requestsecuritytokenresponse>…token…&lt;/rstr> and wctx=MEST=0&LoginOptions=2&wa=wsignin1%2E0&rpsnv=2&ct=1343219880&rver=6%2E1%2E6206%2E0&wp=MBI&wreply=https%3A%2F%2Fspirit365%2Esharepoint%2Ecom%2F%5Fforms%2Fdefault%2Easpx&id=500046&cbcxt=mai&wlidp=1&guest=1&vv=910&mkt=EN-US&lc=1033&bk=1343219930`
*   从表单中捕获名为“t”的隐藏输入
*   将该“t”发布到 /_layouts/Authenticate.aspx。那应该给你 FedAuth 和 rtFa cookie。

从那时起，这与此处的代码相同：http: [//www.wictorwilen.se/Post/How-to-do-active-authentication-to-Office-365-and-SharePoint-Online.aspx](http://www.wictorwilen.se/Post/How-to-do-active-authentication-to-Office-365-and-SharePoint-Online.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T03:34:54.080

我找到了解决方案并发表了一篇关于它的帖子。我也把它放在了[github 上](https://github.com/jwillmer/SharePointAuthentication)。[您可以在我](http://jwillmer.de/blog/programming/sharepoint-online-with-adfs-authentication)的博客中找到我的博客文章以及 github 链接。

我希望这对你有帮助，就像它对我有帮助一样:-)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-02T21:31:50.947

我花了很多时间终于弄明白了。为了获取二进制令牌，您需要将以下格式的消息发布到 Microsoft 在线安全令牌服务 (STS) 站点 URL：

```
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
  <s:Header>
    <a:Action s:mustUnderstand="1">http://schemas.xmlsoap.org/ws/2005/02/trust/RST/Issue</a:Action>
    <a:ReplyTo>
      <a:Address>http://www.w3.org/2005/08/addressing/anonymous</a:Address>
    </a:ReplyTo>
    <a:To s:mustUnderstand="1">[toUrl]</a:To>
    <o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      [assertion]
    </o:Security>
  </s:Header>
  <s:Body>
    <t:RequestSecurityToken xmlns:t="http://schemas.xmlsoap.org/ws/2005/02/trust">
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <a:EndpointReference>
          <a:Address>[url]</a:Address>
        </a:EndpointReference>
      </wsp:AppliesTo>
      <t:KeyType>http://schemas.xmlsoap.org/ws/2005/05/identity/NoProofKey</t:KeyType>
      <t:RequestType>http://schemas.xmlsoap.org/ws/2005/02/trust/Issue</t:RequestType>
      <t:TokenType>urn:oasis:names:tc:SAML:1.0:assertion</t:TokenType>
    </t:RequestSecurityToken>
  </s:Body>
</s:Envelope> 
```

需要此消息以将令牌替换为以下值：

> [toUrl]：Microsoft 在线安全令牌服务 (STS) 站点 URL。
> [url]：您的 SP 站点 URL
> [assertion]：是您从联合服务获得的断言 XLM 令牌。

从响应 XML 中获取`t=...`二进制令牌后，您可以将其发布到您的 SP`default.aspx`以获取 cookie。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-17T22:10:47.317

对于任何有麻烦的人（真的很难），这里有一些澄清

这 4 个步骤是 1）从您的 SAML IDP 获取断言 2）将断言交易为 STS 令牌 3）将 STS 令牌交易为 cookie 4）使用 cookie 进行休息调用

对于第 1 步，我有 ping federate。在邮递员中使用它来发布到您的令牌 ID 处理器以获得断言：POST https://pingfederate/idp/sts.wst?TokenProcessorId=username

```
<s:Envelope xmlns:s='http://www.w3.org/2003/05/soap-envelope' xmlns:a='http://www.w3.org/2005/08/addressing' xmlns:u='http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd'>
    <s:Header>
        <a:Action s:mustUnderstand='1'>http://schemas.xmlsoap.org/ws/2005/02/trust/RST/Issue</a:Action>
        <a:ReplyTo>
            <a:Address>http://www.w3.org/2005/08/addressing/anonymous</a:Address>
        </a:ReplyTo>
        <o:Security s:mustUnderstand='1' xmlns:o='http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd'>
            <o:UsernameToken>
                <o:Username>yourusername</o:Username>
                <o:Password>yourpass</o:Password>
            </o:UsernameToken>
        </o:Security>
    </s:Header>
    <s:Body>
        <t:RequestSecurityToken xmlns:t='http://schemas.xmlsoap.org/ws/2005/02/trust'>
            <wsp:AppliesTo xmlns:wsp='http://schemas.xmlsoap.org/ws/2004/09/policy'>
                <wsa:EndpointReference xmlns:wsa='http://www.w3.org/2005/08/addressing'>
                    <wsa:Address>urn:federation:MicrosoftOnline</wsa:Address>
                </wsa:EndpointReference>
            </wsp:AppliesTo>
            <t:RequestType>http://schemas.xmlsoap.org/ws/2005/02/trust/Issue</t:RequestType>
        </t:RequestSecurityToken>
    </s:Body>
</s:Envelope> 
```

它将生成一个包含断言的信封。确保以原始格式（不是漂亮的 xml）复制它。从 <saml:Assertion 到 /saml:Assertion> 的所有内容

对于第 2 步，当您 POST 到[https://login.microsoftonline.com/extSTS.srf](https://login.microsoftonline.com/extSTS.srf)时，请确保以原始格式（不是漂亮的 XML）粘贴断言。

采用：

```
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
  <s:Header>
    <a:Action s:mustUnderstand="1">http://schemas.xmlsoap.org/ws/2005/02/trust/RST/Issue</a:Action>
    <a:ReplyTo>
      <a:Address>http://www.w3.org/2005/08/addressing/anonymous</a:Address>
    </a:ReplyTo>
    <o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <saml:Assertion AssertionID="hp4CtHjK_lL" Issue Instant...................../ds:Signature></saml:Assertion>
    </o:Security>
  </s:Header>
  <s:Body>
    <t:RequestSecurityToken xmlns:t="http://schemas.xmlsoap.org/ws/2005/02/trust">
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <a:EndpointReference>
          <a:Address>https://myshare.sharepoint.com/sites/mysite</a:Address>
        </a:EndpointReference>
      </wsp:AppliesTo>
      <t:KeyType>http://schemas.xmlsoap.org/ws/2005/05/identity/NoProofKey</t:KeyType>
      <t:RequestType>http://schemas.xmlsoap.org/ws/2005/02/trust/Issue</t:RequestType>
      <t:TokenType>urn:oasis:names:tc:SAML:1.0:assertion</t:TokenType>
    </t:RequestSecurityToken>
  </s:Body>
</s:Envelope> 
```

对于第 3 步，POST 到[https://myshare.sharepoint.com/_forms/default.aspx?wa=wsignin1.0](https://myshare.sharepoint.com/_forms/default.aspx?wa=wsignin1.0)并确保您的 User-Agent 是常规用户代理，如 Mozilla/5.0（兼容；MSIE 9.0 ；Windows NT 6.1；Win64；x64；Trident/5.0)。在帖子的正文中，它将是第 2 步生成的 <BinarySecurityToken 中的所有内容，因此类似于 t=EwDgAk6hBwAUu3 ...... .... 那是整个身体，没有别的。它会生成一些cookies。一个用于 myshare.sharepoint.com，称为 FedAuth，另一个是 sharepoint.com rtFa

第 4 步，获得 cookie 后，您可以获取您的共享点列表

```
https://myshare.sharepoint.com/sites/mysite/_api/Web/Lists/GetByTitle('Updating%20List%E2%80%8B')/items 
```

# java - 无法启动应用程序

> ID：11295954
> 
> 赞同：2
> 
> 时间：2012-07-02T14:43:44.083
> 
> 标签：java, javafx, launch

我正在用 JavaFX 制作一个简单的游戏，但在运行应用程序时遇到了问题。我使用 NetBeans 6.9.1。应用程序类型是“JavaFX 脚本应用程序”。

当我构建项目时，它会在文件夹中创建四个文件`dist`。这些是：

*   `BcJavaFX.html`文件
*   `BcJavaFX.jar`文件
*   `BcJavaFX.jnlp`文件
*   `BcJavaFX_browser.jnlp`文件

在我正在开发此游戏的计算机上，游戏在打开`BcJavaFX.jnlp`或`BcJavaFX_browser.jnlp`. 随着`BcJavaFX_browser.jnlp`游戏在浏览器中运行。随着`BcJavaFX.jnlp`游戏在经典窗口中运行。窗口右上角旁边是一个小感叹号。当我将鼠标悬停在感叹号上时，会显示文本*“Java 应用程序窗口”*。但应用程序运行正常。

问题是该应用程序无法在其他计算机上运行。当我打开文件`BcJavaFX.jnlp`或`BcJavaFX_browser.jnlp`在其他计算机上时，会显示一个窗口，其中显示消息*“无法启动应用程序”*。异常详情如下：

```
Exception    
com.sun.deploy.net.FailedDownloadException: Unable to load resource: http://localhost:8082/servlet/org.netbeans.modules.javafx.project.JnlpDownloadServlet/C%3A/Dulezite-SKOLA/BcPrace/opengl/JavaFXApplication4/dist/JavaFXApplication4.jnlp
    at com.sun.deploy.net.DownloadEngine.actionDownload(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getCacheEntry(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getCacheEntry(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getResourceCacheEntry(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getResourceCacheEntry(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getResource(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getResource(Unknown Source)
    at com.sun.javaws.Launcher.updateFinalLaunchDesc(Unknown Source)
    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
    at com.sun.javaws.Launcher.launch(Unknown Source)
    at com.sun.javaws.Main.launchApp(Unknown Source)
    at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
    at com.sun.javaws.Main$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

Wrapped Exception

java.net.ConnectException: Connection refused: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at sun.net.NetworkClient.doConnect(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.<init>(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
    at com.sun.deploy.net.BasicHttpRequest.doRequest(Unknown Source)
    at com.sun.deploy.net.BasicHttpRequest.doRequest(Unknown Source)
    at com.sun.deploy.net.BasicHttpRequest.doGetRequest(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.actionDownload(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getCacheEntry(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getCacheEntry(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getResourceCacheEntry(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getResourceCacheEntry(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getResource(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.getResource(Unknown Source)
    at com.sun.javaws.Launcher.updateFinalLaunchDesc(Unknown Source)
    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
    at com.sun.javaws.Launcher.launch(Unknown Source)
    at com.sun.javaws.Main.launchApp(Unknown Source)
    at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
    at com.sun.javaws.Main$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

但是当我启动一个国外下载的游戏（例如[http://www.remwebdevelopment.com/javaFX-game-tutorial/Blasteroids.zip](http://www.remwebdevelopment.com/javaFX-game-tutorial/Blasteroids.zip)）时，游戏在所有电脑上都能正常运行。请问哪里有问题？

# linux - 如何从多列中剪切字符范围

> ID：11295955
> 
> 赞同：2
> 
> 时间：2012-07-02T14:43:49.357
> 
> 标签：linux, sed, awk, grep, cut

我有一个制表符分隔的文件，如下所示：

```
CHROM <TAB> POS <TAB> AD0062-C <TAB> AD0063-C <TAB> AD0065-C <TAB> AD0074-C 
2L <TAB> 440 <TAB>0/1:63:60,0,249 <TAB>0/1:89:86,0,166 <TAB>1/1:96:107,24,0<TAB>1/1:49:42,6,0  
2L <TAB> 260<TAB>0/1:66:63,0,207<TAB> 1/1:99:227,111,0<TAB>1/1:99:255,144,0<TAB> 1/1:49:42,6,0
2L <TAB> 595 <TAB> 0/1:11:85,0,8 <TAB>0/1:13:132,0,10 <TAB>0/1:73:70,0,131<TAB> 0/1:59:72,0,56 
```

我只想选择从第 3 列开始的前 3 个字符，以便获得如下所示的输出：

```
CHROM <TAB> POS <TAB> AD0062-C <TAB> AD0063-C <TAB> AD0065-C <TAB> AD0074-C 
2L <TAB> 440 <TAB> 0/1 <TAB> 0/1 <TAB> 1/1 <TAB> 1/1  
2L <TAB> 260 <TAB> 0/1 <TAB> 1/1 <TAB> 1/1 <TAB> 1/1
2L <TAB> 595 <TAB> 0/1 <TAB> 0/1 <TAB> 0/1 <TAB> 0/1 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:55:42.940

使用`awk`. 对于除第一行之外的每一行，如果它有两个以上的字段，则获取它们的子字符串。它适用于每一行的`print`命令，因为它没有条件。

```
awk '
    BEGIN { OFS = "\t" }
    NF > 2 && FNR > 1 { 
        for ( i=3; i<=NF; i++ ) { 
            $i = substr( $i, 1, 3 ) 
        } 
    } 
    { print }
' infile 
```

输出：

```
CHROM   POS     AD0062-C        AD0063-C        AD0065-C        AD0074-C 
2L      440     0/1     0/1     1/1     1/1
2L      260     0/1     1/1     1/1     1/1
2L      595     0/1     0/1     0/1     0/1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:08:27.103

一种使用方式`GNU sed`。从第二行到最后一行，将制表符之间的所有字符替换为开头的前三个字符，并在每一行中执行多次，但仅从第二个匹配项开始（避免前两个字段）：

```
sed '2,$ s/\([\t]...\)[^\t]*/\1/2g' infile 
```

输出：

```
CHROM   POS     AD0062-C        AD0063-C        AD0065-C        AD0074-C 
2L      440     0/1     0/1     1/1     1/1
2L      260     0/1     1/1     1/1     1/1
2L      595     0/1     0/1     0/1     0/1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T18:27:34.897

这可能对您有用（GNU sed）：

```
sed '1b;s/\(\S\{3\}\)\S*/\1/2g' file 
```

# java - 如何返回可行的文件路径？

> ID：11295961
> 
> 赞同：0
> 
> 时间：2012-07-02T14:44:01.220
> 
> 标签：java, android

我有一个活动，当用户在文件上按“共享”时，它会打开我的应用程序并开始上传文件。现在这与图像完美配合，因为返回的 URI 是针对 MediaStore 的。但我希望能够从任何来源（例如 ES 文件资源管理器）返回 URI

这是当前代码：

```
 public String getPath(Uri uri) {
      String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
    } 
```

我怎样才能做到这一点，而不是 MediaStore 它将用于任何类型的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:27:44.530

我建议跳过路径步骤（如果可能）并直接获取可以简化一些事情的 InputStream：

```
public InputStream getInputStream(Uri uri) {
    InputStream stream = null;
    String scheme = uri.getScheme();
    try {
        if (ContentResolver.SCHEME_CONTENT.equals(scheme) || ContentResolver.SCHEME_FILE.equals(scheme) || ContentResolver.SCHEME_ANDROID_RESOURCE.equals(scheme)) {
            stream = getContentResolver().openInputStream(uri);
        } else if ("https".equals(scheme) || "http".equals(scheme)) {
            // ContentResolver can't handle web uris. Handle or skip them as you see fit.
        }           
    } catch (FileNotFoundException e) {
        // Handle the exception however you see fit.
    }
    return stream;
} 
```

我更喜欢使用 ContentResolver 并让它理清细节......例如，如果你得到一个与 MediaStore 无关的内容 uri 会发生什么？通过让 ContentResolver 处理它，您不必在意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:01:38.163

你不能那样做。您可以将它用于媒体存储，因为这些图像的路径存储在内置的 SQLite 数据库中，但您的 sd 卡上的文件在数据库中没有条目。

您可以检查 URI 的方案是内容还是文件，并使用不同的方法访问文件，方式如下：

```
public String getPath(Uri uri) {
        if(uri.getScheme().equals("content")){
                String[] projection = { MediaStore.Images.Media.DATA };
                Cursor cursor = managedQuery(uri, projection, null, null, null);
                int column_index = cursor.getColumnIndexOrThrow(
                        MediaStore.Images.Media.DATA);
                cursor.moveToFirst();
                return cursor.getString(column_index);
        } else if(uri.getScheme().equals("file")){
                File myFile = new File(uri);
                return myFile.getAbsolutePath();
        }
} 
```

# c# - NUnit DLL 版本不匹配

> ID：11295967
> 
> 赞同：3
> 
> 时间：2012-07-02T14:44:33.643
> 
> 标签：c#, .net, nunit, spring.net

我遇到了这个奇怪的修订不匹配错误。我所有的 NUnit 测试项目都使用 NUnit 2.5.7，但现在我将它们切换到使用 NUnit v2.5.10，我不断收到以下错误：

> FileLoadException：无法加载文件或程序集'nunit.framework，版本 2.5.7...

*注意：我清理，重建，仔细检查了引用，没有问题。*

使用 Assembly Binder 日志查看器（见下文），在我看来，这个错误的触发器是 Spring.Testing.NUnit.dll ......鉴于[Spring.Testing.Nunit 1.3.2 Nuget 页面](http://nuget.org/packages/Spring.Testing.NUnit/1.3.2)说，这似乎很奇怪在其依赖列表中：**NUnit (≥ 2.5.7)**

知道我在这里缺少什么吗？提前致谢，

结核病。

> 装配活页夹日志条目 (02.07.2012 @ 16:06:35)
> 
> 操作失败。绑定结果：hr = 0x80131040。没有可用的描述。
> 
> 从以下位置加载的程序集管理器：C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll 在可执行文件 F:\robin\4-Development\Workspace\3rdParty\NUnit\2.5.10\nunit-agent.exe 下运行--- 详细的错误日志如下。
> 
> === 预绑定状态信息 === LOG：User = Mth\tbourguignon LOG：DisplayName = nunit.framework，Version=2.5.7.10213，Culture=neutral，PublicKeyToken=96d09a1eb7f44a77（完全指定） LOG：Appbase = 文件： ///F:/robin/4-开发/工作区/应用程序日志：初始 PrivatePath = Rh.Robin.Common.Tests\bin\Debug;Rh.Robin.Service.Test\bin\Debug;Rh.Robin.Domain。 Unit.Test\bin\Debug;Rh.Robin.Service.Unit.Test\bin\Debug;Rh.Robin.Web.UI.MVC.Unit.Test\bin\Debug LOG: Dynamic Base = NULL LOG: Cache Base = C:\Users\tbourguignon.Mth\AppData\Local\Temp\nunit20\ShadowCopyCache\4980_634768419945070499 日志：AppName = Tests_29030132 调用程序集：**Spring.Testing.NUnit，版本=1.3.2.40943**，文化=中性，PublicKeyToken=65e474d141e25e07。=== LOG：此绑定在默认加载上下文中开始。LOG：未找到应用程序配置文件。LOG：使用主机配置文件：LOG：使用来自 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config 的机器配置文件。LOG：后策略参考：**nunit.framework，Version=2.5.7.10213**，文化=中性，PublicKeyToken=96d09a1eb7f44a77 日志：GAC 查找不成功。日志：正在尝试下载新的 URL 文件：///F:/robin/4-Development/Workspace/Application/nunit.framework.DLL。日志：正在尝试下载新的 URL 文件：///F:/robin/4-Development/Workspace/Application/nunit.framework/nunit.framework.DLL。日志：正在尝试下载新的 URL 文件：///F:/robin/4-Development/Workspace/Application/Rh.Robin.Common.Tests/bin/Debug/nunit.framework.DLL。LOG：程序集下载成功。正在尝试设置文件：F:\robin\4-Development\Workspace\Application\Rh.Robin.Common.Tests\bin\Debug\nunit.framework.dll LOG：进入下载缓存设置阶段。LOG：**程序集名称为：nunit.framework，版本=2.5.10.11092**, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77 警告：比较程序集名称导致不匹配：修订号**ERR：程序集引用与找到的程序集定义不匹配**。ERR：设置失败，hr = 0x80131040。ERR：无法完成程序集的设置（hr = 0x80131040）。探测终止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:49:54.363

您是否从引用较新的 dot 版本的 NUnit 中获得了什么？如果没有，您可以做的最简单的事情是返回并引用与 Spring 在您的代码中引用的版本匹配的旧版本的 NUnit 程序集。

另一种选择是修改 (Spring) 应用程序的配置以使用[绑定重定向](http://msdn.microsoft.com/en-us/library/7wd6ex19%28v=vs.71%29.aspx)来获取更新版本的 NUnit 程序集。

这让我想知道 Spring 对 NUnit 程序集的引用是否`Specific Version`设置为 true。不过，似乎不太可能。下面是关于 .NET 如何[在运行时定位和绑定程序集](http://msdn.microsoft.com/en-us/library/yx7xezcf.aspx)的参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:01:34.900

不知何故，我设法解决了这个问题......但我仍然不知道是什么原因造成的。我对引用进行了重大清理，从我的项目中排除了所有 NUnit 引用，删除了所有 DLL 并仅重新引入了新的 DLL。我只能猜测一个 DLL 被卡在某个地方，而 Spring 正在捡起它而不是新的……虽然是疯狂的猜测 :(

# visual-studio-2010 - 评论打开和关闭括号（使用 ReSharper？）

> ID：11295971
> 
> 赞同：4
> 
> 时间：2012-07-02T14:44:40.230
> 
> 标签：visual-studio-2010, resharper, resharper-6.1

有谁知道在带有 ReSharper 6.1 的 Visual Studio 2010 中是否有办法用右括号注释掉选定的代码行 - 或者只是注释掉突出显示的左括号及其相应的右括号？这是我的意思的一个例子：

```
if(something) {
  do(this);
} 
```

我正在寻找一个热键，这样当`if(something) {`被选中时，它会注释掉`if(something) {`and `}`，最好修复标签一旦被这样评论：

```
// if(something) {
do(this);
//} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:37:34.450

这并不完全是您所追求的，但它非常接近：

`if`通过将光标放在一个大括号上并点击`Ctrl`++`Shift`来突出显示语句中的代码`]`。

现在点击`Ctrl`+ `Shift`+ `Alt`+ `Left Arrow`。这会将代码“向左”移动，即在 if 语句之外。

您不需要`if`在此之后注释掉该语句，因为它是空的。

请注意，您还可以将代码“向右”移动，以便稍后将其放回`if`语句中。

# emacs - 如何在 emacs org-mode 中插入当前时间

> ID：11295973
> 
> 赞同：38
> 
> 时间：2012-07-02T14:44:47.220
> 
> 标签：emacs, org-mode

有没有一种简单的方法可以在 org-mode 中插入当前时间（如 TIME: [2012-07-02 Mon 16:44]）？手册中有很多东西（时钟、截止日期、时间表），但大多数都需要手动输入时间。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-02T14:55:23.047

`C-u C-c .`将在该点插入时间戳，但 Org 仍会提示您一段时间（默认为当前时间）。

更多：组织模式手册中的[“创建时间戳”](https://orgmode.org/manual/Creating-Timestamps.html)。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-07-01T22:34:32.503

在我的安装中，也就是org-mode版本9，下面输入当前的日期和时间，没有任何提示

```
C-u C-u C-c . 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-05-07T19:06:00.203

```
C-u C-c ! 
```

插入带有当前时间的非活动时间戳，例如：

```
[2018-05-08 Tue 00:30] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-06-20T08:37:18.977

在 emacs-lisp 中，您可以使用

```
(org-insert-time-stamp (current-time) t) 
```

使用默认设置，它将在格式上生成时间戳

```
<2021-06-20 Sun 10:33> 
```

如果你想从任何 emacs 会话访问它，把

```
(defun insert-now-timestamp()
  "Insert org mode timestamp at point with current date and time."
  (interactive)
  (org-insert-time-stamp (current-time) t)) 
```

在你的`.emacs`文件中。然后，您可以使用 调用该函数`M-x insert-now-timestamp`。

Emacs 27.2，组织模式 9.4.4。

编辑：我现在意识到这与@anachronic 的解决方案做同样的事情。但是，我将其留在这里以供参考。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-02T14:55:44.793

在我的安装中

```
C-u C-c . 
```

插入带时间戳的日期

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-03T07:22:30.470

只是给你一些其他的选择：

1.  如果您使用的是 windows 系统，您可以使用 AutoHotKey 来实现这一点。
2.  如果您可以为 emacs 安装 YASnippet，它还具有插入当前日期和时间的快捷方式。

这两个选项是非常强大的工具，不仅仅是插入日期和时间。

# ios - removeOverlay：覆盖不起作用

> ID：11295977
> 
> 赞同：2
> 
> 时间：2012-07-02T14:45:04.687
> 
> 标签：ios, mkmapview, mkoverlay

我是 XCode 领域的新手，想知道是否有人可以帮助我。

本质上，我正在玩 WWDC2010 的 TileMap 项目示例，并试图找出一种使用分段控制器隐藏其 NOAA 图表的方法。

我可以激活覆盖，它显示正常，但我无法使用分段控制器将其删除。

这是头文件中的一些代码：

```
@interface ViewController : UIViewController <MKMapViewDelegate> {
    IBOutlet MKMapView *map;
    IBOutlet UISegmentedControl *controller;
}    
- (IBAction)switchMap:(id)sender;
@end 
```

这是.m的代码：

```
- (void)viewDidLoad {
    [super viewDidLoad];  
    NSLog(@"initial view loaded"); 
}  

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id)overlay {  

    TileOverlayView *view = [[TileOverlayView alloc] initWithOverlay:overlay];     
    view.tileAlpha = 1;
    return view;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:     (UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)switchMap:(id)overlay {

    if (controller.selectedSegmentIndex == 0) {
        NSLog(@"welp... it loaded...");
        [map removeOverlay:overlay];
    }

    if (controller.selectedSegmentIndex == 1) {

        NSLog(@"Map Overlay works");
        NSString *tileDirectory = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"Tiles"];
        TileOverlay *overlay = [[TileOverlay alloc] initWithTileDirectory:tileDirectory];
        [map addOverlay:overlay];

        MKMapRect visibleRect = [map mapRectThatFits:overlay.boundingMapRect];
        visibleRect.size.width /= 2;
        visibleRect.size.height /= 2;
        visibleRect.origin.x += visibleRect.size.width / 2;
        visibleRect.origin.y += visibleRect.size.height / 2;
        map.visibleMapRect = visibleRect;

    }

    if (controller.selectedSegmentIndex == 2) {
        NSLog(@"But... overlay isnt hiding waa");
        NSString *tileDirectory = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"Tiles"];
        TileOverlay *overlay = [[TileOverlay alloc] initWithTileDirectory:tileDirectory];
        [map removeOverlay:overlay]; }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:21:02.767

在控制动作方法中，第一个参数（无论您如何命名）始终是调用该方法的对象。

在这里，控件是一个`UISegmentedControl`，因此传递给的参数`switchMap:`是对该控件的引用。在 .h 中，您已经用名称声明了参数，`sender`但在 .m 中，它被命名为`overlay`。

不管名称如何，它仍然是分段的控制对象，因此将其传递给它`removeOverlay`是没有意义的，并且什么也不做。

所以在这段代码中：

```
if (controller.selectedSegmentIndex == 0) {
    NSLog(@"welp... it loaded...");
    [map removeOverlay:overlay];
} 
```

`overlay`指向分段控件，所以`removeOverlay`什么都不做。

在这段代码中：

```
if (controller.selectedSegmentIndex == 2) {
    NSLog(@"But... overlay isnt hiding waa");
    NSString *tileDirectory = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"Tiles"];
    TileOverlay *overlay = [[TileOverlay alloc] initWithTileDirectory:tileDirectory];
    [map removeOverlay:overlay]; } 
```

您正在创建一个*新*的本地`overlay`对象（编译器也可能会向您发出有关隐藏参数的本地变量的警告）。这个新对象与已添加到地图的叠加层是分开的。调用`removeOverlay`这个新对象没有任何作用，因为这个新实例一开始就没有添加到地图中。

要删除现有覆盖，您必须在添加时保留对它的 ivar 引用并将该 ivar 传递给删除或在地图视图的`overlays`数组中找到它。

但是，如果您只有一个叠加层，您可以传递地图视图`overlays`数组中的第一个对象，或者只调用`removeOverlays`(复数) 并传递整个数组：

```
if (map.overlays.count > 0)
    [map removeOverlay:[map.overlays objectAtIndex:0]];

//OR...

if (map.overlays.count > 0)
    [map removeOverlays:map.overlays]; 
```

# extern - B中的外部或外部？

> ID：11295982
> 
> 赞同：2
> 
> 时间：2012-07-02T14:45:26.173
> 
> 标签：extern, b

我对两个 B 关键字感到困惑。

官方 B 参考手册使用`extrn`关键字，而 Wikipedia 和 C 使用`extern`.

由于我不知道任何适用于 x86 的好的 B 编译器，我无法使用编译器进行拼写检查。

那么，在 B - `extern`or中编写 extern 关键字的正确方法是`extrn`什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:01:48.327

我不是B程序员，但我会说`extrn`是对的。

资料来源：[这里](http://webcache.googleusercontent.com/search?q=cache%3agWKntXMJb1wJ%3areptide.radiofreeomaha.net/2009/04/20/the-b-programming-language/&hl=nl&gl=nl&prmd=imvns&strip=1)和[这里](http://progopedia.com/language/b/)。资料 1 甚至明确指出：

> 与 C 相比有什么不同？
> 
> *   extrn 关键字而不是 extern 关键字。

# java - 模拟下雨

> ID：11295986
> 
> 赞同：10
> 
> 时间：2012-07-02T14:45:45.750
> 
> 标签：java, paintcomponent

我正在用Java制作游戏，我想创建一个正在倾盆大雨的云的模拟。云应该在下雨时向右移动。移动云没有问题。这是我正在努力应对的雨。

我想做的是用计时器来绘制一个矩形，这应该看起来像在云内部随机 x 值下的雨。然后每 100 毫秒将 drop 的 y 值加 1。但我不想为每个雨滴创建 100 个不同的矩形、x 变量和 y 变量。

知道我怎么能做到这一点吗？建议赞赏！

* * *

这是一个 2d 游戏.. 对不起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:55:22.627

是否需要对雨滴进行编程？传统上，这将通过放置在云下并设置动画的一些雨精灵来完成，以使其看起来像正在下雨。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T14:51:22.977

一种方法是考虑在剧院设置一个选框。你拿一系列灯泡，通过依次点亮和熄灭它们，你可以模拟线性运动。

同样，与其创建雨滴并为其运动设置动画，不如创建多个不可见的雨滴并按顺序显示和隐藏它们以模拟向下运动。然后，您将有一系列表示雨滴轨迹的数组，您只需循环遍历，隐藏当前的，递增数组指针并显示那个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-09T09:50:01.760

这是我的 2d 雨的 java (swing) 实现，带有水滴、飞溅、风和重力

```
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.awt.geom.Ellipse2D;
import java.awt.geom.Line2D;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.Random;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Main {

 public static void main( String [] args ) {
     JFrame frame = new JFrame();
     frame.setSize(800, 300);
     final RPanel rPanel=new RPanel();
     frame.add(rPanel);
     frame.setVisible( true );
     frame.addWindowListener(new WindowAdapter() {
        @Override
        public void windowClosing(WindowEvent e) {
            super.windowClosing(e);
            rPanel.stop();
            System.exit(0);
        }
    });
}
}

class RPanel extends JPanel {
//*********SETTINGS****************************
private float mWind = 2.05f;
private float mGravity = 9.8f;
private double mRainChance = 0.99; // from 0 to 1

private int mRepaintTimeMS = 16;
private float mRainWidth=1;
private double mDdropInitialVelocity = 20;
private double mDropDiam = 2;
private Color mColor=new Color(0, 0, 255);
//*********************************************

private ArrayList<Rain> rainV;
private ArrayList<Drop> dropV;
private UpdateThread mUpdateThread;

public RPanel() {
    rainV = new ArrayList<>();
    dropV = new ArrayList<>();

    mUpdateThread=new UpdateThread();
    mUpdateThread.start();
}

public void stop() {
    mUpdateThread.stopped=true;
}

public int getHeight() {
    return this.getSize().height;
}

public int getWidth() {
    return this.getSize().width;
}

private class UpdateThread extends Thread {
    public volatile boolean stopped=false;
    @Override
    public void run() {
        while (!stopped) {
            RPanel.this.repaint();
            try {
                Thread.sleep(mRepaintTimeMS);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
}

@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2 = (Graphics2D) g;
    g2.setStroke(new BasicStroke(mRainWidth));
    g2.setColor(mColor);

    //DRAW DROPS
    Iterator<Drop> iterator2 = dropV.iterator();
    while (iterator2.hasNext()) {
        Drop drop = iterator2.next();
        drop.update();
        drop.draw(g2);

        if (drop.y >= getHeight()) {
            iterator2.remove();
        }
    }

    //DRAW RAIN
    Iterator<Rain> iterator = rainV.iterator();
    while (iterator.hasNext()) {
        Rain rain = iterator.next();
        rain.update();
        rain.draw(g2);

        if (rain.y >= getHeight()) {
            //create new drops (2-8)
            long dropCount = 1 + Math.round(Math.random() * 4);
            for (int i = 0; i < dropCount; i++) {
                dropV.add(new Drop(rain.x, getHeight()));
            }
            iterator.remove();

        }
    }

    //CREATE NEW RAIN
    if (Math.random() < mRainChance) {
        rainV.add(new Rain());
    } 
}

//*****************************************
class Rain {
    float x;
    float y;
    float prevX;
    float prevY;

    public Rain() {
        Random r = new Random();
        x = r.nextInt(getWidth());
        y = 0;
    }

    public void update() {
        prevX = x;
        prevY = y;

        x += mWind;
        y += mGravity;
    }

    public void draw(Graphics2D g2) {
        Line2D line = new Line2D.Double(x, y, prevX, prevY);
        g2.draw(line);
    }
}

//*****************************************
private class Drop {

    double x0;  
    double y0;  
    double v0; //initial velocity
    double t;  //time
    double angle;
    double x;
    double y;

    public Drop(double x0, double y0) {
        super();
        this.x0 = x0;
        this.y0 = y0;

        v0 = mDdropInitialVelocity;
        angle = Math.toRadians(Math.round(Math.random() * 180)); //from 0 - 180 degrees
    }

    private void update() {
        // double g=10;
        t += mRepaintTimeMS / 100f;
        x = x0 + v0 * t * Math.cos(angle);
        y = y0 - (v0 * t * Math.sin(angle) - mGravity * t * t / 2);
    }

    public void draw(Graphics2D g2) {
        Ellipse2D.Double circle = new Ellipse2D.Double(x, y, mDropDiam, mDropDiam);
        g2.fill(circle);
    }
}
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T14:59:00.397

我建议只将值存储为对象的 ArrayList。

```
class Raindrop {
    private int x;
    private int y;

    public void fall() {
        y--;
    }
} 
```

然后创建一个泛型类型的 ArrayList。

```
ArrayList<Raindrop> drops = new ArrayList<Raindrop>(); 
```

让每一滴落下，

```
for (int i=0; i<drops.length(); i++) {
    drops.get(i).fall();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T14:54:58.760

您可以使用粒子系统或使用雨滴矢量并每 X 毫秒为它们设置动画。粒子系统库的链接：[http ://code.google.com/p/jops/](http://code.google.com/p/jops/)

矢量的示例代码：

```
import java.util.Vector;
// In your class
Vector raindrops;
void animate()
{
    ListIterator iter = raindrops.listIterator;
    while (iter.hasNext()) {
        ((Raindrop)iter.next()).moveDown();
    }
} 
```

# javascript - Google 已通过 GMaps JS API v3 禁用此应用程序的 Maps API

> ID：11295988
> 
> 赞同：0
> 
> 时间：2012-07-02T14:46:11.623
> 
> 标签：javascript, google-maps, google-maps-api-3

在浏览了几次关于此的文档后，我一直在把头撞在墙上！我似乎无法克服 API 错误以使地图出现在我的网站上。

我从希望显示地图的网页收到以下错误消息：

> Google 已禁用此应用程序的 Maps API。提供的密钥不是有效的 Google API 密钥，或者未授权用于本网站上的 Google Maps Javascript API v3。如果您是此应用程序的所有者，您可以在此处了解如何获取有效密钥：[https ://developers.google.com/maps/documentation/javascript/tutorial#Obtaining_Key](https://developers.google.com/maps/documentation/javascript/tutorial#Obtaining_Key)

我已经（现在好几次）进入我的帐户并且：

1.  启用 Maps v3 API 服务
2.  生成了一个新的 API 密钥
3.  将我允许的推荐人添加到密钥中。（www.domain.com 和 domain.com 网址）

我在网页的头部添加了以下脚本：

```
<script src="http://maps.googleapis.com/maps/api/js?sensor=false&amp;key=MY_API_KEY_HERE" type="text/JavaScript" language="JavaScript"></script> 
```

当点击页面上的链接时，我有以下 JavaScript 函数：

```
alert("viewMap()");
var map = new GMap3(document.getElementById("map_canvas"));
var geocoder = new GClientGeocoder();

var address = "1600 Amphitheatre Parkway, Mountain  View";
alert("Calling getLatLng ...");
geocoder.getLatLng(address, function(point) {
    var latitude = point.y;
    var longitude = point.x;  

    // do something with the lat lng
    alert("Lat:"+latitude+" - Lng:"+longitude);
}); 
```

显示初始`viewMap()`警报，然后是“Google 已禁用使用...”错误消息。

错误控制台还显示“未定义 GMap3”。

任何人都可以帮助向我展示我的方式的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:54:24.787

也许只需将 GMap3 行更改为：

```
var myOptions = {zoom: 5,mapTypeId: google.maps.MapTypeId.ROADMAP};
var map = new google.maps.Map(document.getElementById('map_canvas'),myOptions); 
```

`navigator.geolocation`这是使用代替的更完整示例`GClientGeocoder`：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=true"></script>
<style>
#map_canvas {width:300px;height:300px;display:block;}
</style>
</head>

<body>
<div id="map_canvas"></div>
<button onclick="begin();">Click</button>
</body>
<script>
function begin(){
    navigator.geolocation.getCurrentPosition(loadmap,noloc);
}

function noloc(){ alert('Since this is a location based tool, please reload and share your location');}

function loadmap(position){

    var myOptions = {
        zoom: 5,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById('map_canvas'),myOptions);
    var latitude=position.coords.latitude;
    var longitude=position.coords.longitude;
        //do something with the lat lng
    var usrll=new google.maps.LatLng(latitude,longitude);
    map.setCenter(usrll);
    var usrmarker = new google.maps.Marker({position: usrll,map: map});

}   
</script>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:00:27.047

几个问题，其中最严重的是使用您的`<script>`标签加载版本 3 API，然后使用版本 2 代码，如`GClientGeocoder`. 并且`GMap3`在任何一个版本中都不存在。

将版本 2 映射转换为版本 3 并不像加载版本 3 API 那样简单。它需要从头开始重写（这超出了 SO 的范围）。

您没有说明您使用的是什么引荐来源网址，但您需要明确使用通配符：`www.domain.com/*`，`domain.com/*`

我建议更改`GMap3`为`GMap2`，并确保加载第 2 版 API（在相关`<script>`标签中指定控制台密钥）。然后开始为第 3 版重写。

# prolog - 一个 Prolog 函数，它返回一个没有成员的列表

> ID：11295991
> 
> 赞同：1
> 
> 时间：2012-07-02T14:46:28.550
> 
> 标签：prolog

你好，我得到了 Prolog 函数成员，它告诉我们元素是否存在于列表中。

现在我应该创建一个返回没有该元素的列表的函数。我或多或少知道它应该是什么样子，但不知何故我不知道该怎么做。

到目前为止的想法：

*   在我们的元素之前返回列表中的元素，并将它与我们元素之后的列表的其余部分连接起来。
*   在递归遍历列表并构建它的谓词中使用 member()。

帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:50:22.100

（对我来说似乎是家庭作业，所以我会给你一个包含一些提示的大纲；-）

鉴于`[H|T]`...

*   ...如果`H`是要删除的元素，则返回`T`，（如果您需要删除*所有*此类元素，请记住也要递归`T`。）
*   ...如果`H`不是*要*删除的元素，则返回`[H|NewTail]`where`NewTail`是递归删除元素的结果`T`。

# xhtml-transitional - 有效的 html 错误

> ID：11295993
> 
> 赞同：1
> 
> 时间：2012-07-02T14:46:38.227
> 
> 标签：xhtml-transitional

当我尝试验证我的 php 文件（用 xhtml 和 php 编写）时，我遇到了 2 个无法解决的错误：S 错误是：

1 - 省略了“body”的结束标签，但指定了 OMITTAG NO

2 - 省略了“html”的结束标记，但指定了 OMITTAG NO

在这里我粘贴我的文件的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <?php

        require 'include/config.php';
        connection();
        if(isset($_COOKIE['COOKIE_CHECK']) === FALSE) {

            setcookie('COOKIE_CHECK', 'ENABLED', time() + 31536000);
            header('Location: index.php');

        }

    ?>
    <title>Nome da definire - Homepage</title>

    <link rel="shortcut icon" href="themes/<?php echo $home_theme; ?>/images/homepage/favicon/favicon.ico" />

    <!-- CSS DELLA PAGINA E PLUGIN -->
    <link rel="stylesheet" type="text/css" href="themes/<?php echo $home_theme; ?>/css/index.css" title="index" />
    <link rel="stylesheet" type="text/css" href="themes/<?php echo $home_theme; ?>/css/news.css" title="index" />

    <!-- PLUGIN JQUERY -->
    <script src="include/jquery/jquery-1.4.2.min.js" type="text/javascript"></script>

    <!--SCRIPT BROWSER AGGIORNATO
    <script type='text/javascript'> 

        var ba = document.createElement('script'); 
        ba.type = 'text/javascript'; 
        ba.async = true; 
        ba.src = 'http://www.browseraggiornato.it/browser-updated.js?t=a&p=tl'; 
        var s = document.getElementsByTagName('script')[0]; 
        s.parentNode.insertBefore(ba, s); 

    </script>-->

    <!-- SCRIPT PULSANTI -->
    <script type="text/javascript">

        jQuery.noConflict();
        jQuery(function() {

            jQuery("ul#menu span").css("opacity","0");

            jQuery("ul#menu span").hover(function () {
                jQuery(this).stop().animate({

                    opacity: 1

                }, 'slow');
            },
            function () {

                jQuery(this).stop().animate({

                    opacity: 0

                }, 'slow');
            });
        });

    </script>

    <!-- SCRIPT NEWS -->
<script type="text/javascript">
    jQuery.noConflict();
    jQuery(function() {

        var ticker = function() {

            setTimeout(function() {
                jQuery('#ticker li:first').animate({

                    marginTop: '-100px'

                }, 800, function() {

                    jQuery(this).detach().appendTo('ul#ticker').removeAttr('style');

                });
                ticker();
            }, 4000);
        };
       ticker();
    });
</script>

<?php

    $login_error = '';

    if(isset($_GET['login_error']) === TRUE && $_GET['login_error'] != '') {

        if($_GET['login_error'] == 'usrpss') {

            $login_error .= ' alert(\'Devi inserire username e password per poter effettuare il login!\');';

        }   else if($_GET['login_error'] == 'wrong') {

            $login_error .= ' alert(\'Hai inserito dei dati errati oppure il tuo account non &egrave; ancora stato attivato!\');';

        }

    }

?>

</head>

<body<?php if($login_error != '') { echo ' onload="' . $login_error . '"'; } ?>>    

    <?php

        if(isset($home_theme) === TRUE && $home_theme != '') {

            if(check_directory('themes/' . $home_theme . '') === TRUE) {            

                if(check_file($path . '/index.php') === TRUE) {

                    require $path . '/index.php';

                }   else {

                    echo 'Il file dell\'index per questo tema non esiste';

                }

            }   else {

                echo 'La cartella del tema selezionato non esiste';

            }

        }

        connection_close();

    ?>

</body>

</html> 
```

请帮助我:(谢谢

# php - 从数组mysql列表中更新特定记录

> ID：11295994
> 
> 赞同：0
> 
> 时间：2012-07-02T14:46:44.323
> 
> 标签：php, mysql, arrays, record

我有一张桌子`user_instance`。它包含三个字段：`account_id`、`instance_name`、`host_name`。
例如，记录是这样的。

```
account_id     instance_name      host_name
------------------------------------------
    1          instance_name1     localhost
    1          instance_name1     % 
    1          instance_name2     localhost
    2          instance_name1     localhost 
```

我在文本框数组中获取 instance_name 和 host_name 。

```
$result=mysql_query("SELECT user_instance.instance_name, user_instance.host_name FROM
dba_account, user_instance WHERE dba_account.account_id = user_instance.account_id AND 
dba_account.account_id = '1'");

while($note = mysql_fetch_array($result))
{
<inut type='text' name='instance_name' class='instance_name' disabled='disabled' 
value='$note[instance_name]' size='25' />
<input type='text' name='host_name' class='host_name' disabled='disabled' 
value='$note[host_name]' size='25' /> 
} 
```

现在，当我单击更新按钮时，它应该更新我已更改的特定记录。例如，如果我更改account_id 的instance_name`instance_name1`或 host_name ，那么它应该更新该记录。我很感激任何帮助。`localhost``1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:48:51.630

你永远不会执行[`UPDATE`](http://dev.mysql.com/doc/en/update.html)命令。

# playframework - 播放框架 ebean 配置

> ID：11295996
> 
> 赞同：4
> 
> 时间：2012-07-02T14:46:49.547
> 
> 标签：playframework, playframework-2.0

当我尝试将一个简单的项目保存到我的 H2 数据库时出现此错误：

```
"javax.persistence.PersistenceException: The default EbeanServer has not been defined ? This is normally set via the ebean.datasource.default property. Otherwise it should be registered programatically via registerServer()" 
```

我的播放 application.conf 文件

```
 # Database configuration
    # ~~~~~
    # You can declare as many datasources as you want.
    # By convention, the default datasource is named `efault
    db.default.driver=org.h2.Driver
    db.default.url="jdbc:h2:mem:play"
    db.default.jndiName=DefaultDS
    db.default.user=sa
    db.default.password=""

    # JPA configuration
    # ~~~~~
    # You can declare as many Ebean servers as you want.
    # By convention, the default server is named `default`
   jpa.default=defaultPersistenceUnit  
   ebean.datasource.default=DefaultDS
   ebean.default="models.*" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:01:32.757

要使用 JNDI 数据源，您需要设置：

```
ebean.datasource.factory=jndi 
```

并且 datasource.default 作为 JNDI DataSource 名称。您还可以覆盖默认为 java:comp/env/jdbc/ 的 ebean.datasource.jndi.prefix。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T08:14:42.913

当没有正确的*.conf*文件时，通常会发生这种情况。例如，我使用以下命令运行 play 框架：

```
~/play-2.1.2/play -Dconfig.file=conf/local.conf 
```

而且我没有*local.conf*文件。