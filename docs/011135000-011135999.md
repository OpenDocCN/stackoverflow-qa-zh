# StackOverflow 问答 11135000-11135999

# asp.net - CurrentCulture 在 ASP.net 中错误地默认为 en-US

> ID：11135002
> 
> 赞同：29
> 
> 时间：2012-06-21T09:12:05.297
> 
> 标签：asp.net, globalization, culture, uiculture

我刚刚将大约 100 个 ASP.net 站点从 Windows Sever 2003 上的 IIS 6 迁移到 Windows 2008 上的 IIS 7。我刚刚注意到使用 DateTime.Parse 之类的各种代码已经开始出现错误“字符串不是识别为有效的日期时间”。我已将其归结为网站的 CurrentCulture 默认为“en-US”，因此我的英国用户正在以意外的格式输入日期。

问题是，他们从哪里获得 en-US？从顶部开始，如果我查看“控制面板 > 区域和语言”，所有内容都设置为英语（英国）。网站的 web.configs 要么没有 <globalization> 部分，要么将其设置为 <globalizationculture="auto" uiCulture="auto" />。在“IIS7 - .Net Globalization”中，所有站点的文化都设置为“Invariant Language（Invariant Country）”。

我找不到将文化设置为“en-US”的任何地方......但有些东西是。

```
Thread.CurrentThread.CurrentCulture.Name is outputting 'en-US'
Thread.CurrentThread.CurrentCulture.NumberFormat.CurrencySymbol is outputting '$' 
```

我可以通过将 <globalizationculture="en-GB" uiCulture="en-GB" /> 添加到每个 web.config 来解决这个问题，但我真的不想手动编辑大约 100 个 web.config！我不希望它从设置为 en-GB 的服务器操作系统设置中继承文化。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-21T09:31:31.837

这些是您可以搜索的替代位置：

> 我找不到将文化设置为“en-US”的任何地方......但有些东西是。
> 
> Thread.CurrentThread.CurrentCulture.Name 正在输出“en-US” Thread.CurrentThread.CurrentCulture.NumberFormat.CurrencySymbol 正在输出“$”

尝试寻找`InitializeCulture`方法，该方法在 ASP.Net 页面中被覆盖以设置文化，如：

```
protected override void InitializeCulture()
{
    var hidden = this.Request.Form["hidden"];
    var culture = this.Request.Form[hidden];
    if (!string.IsNullOrWhiteSpace(culture))
    {
        this.Culture = culture;
        this.UICulture = culture;
    }

    base.InitializeCulture();
} 
```

尝试查找以下程序集属性：

```
 [assembly: AssemblyCulture("en-US")]
    [assembly: NeutralResourcesLanguage("en-US", UltimateResourceFallbackLocation.MainAssembly)] 
```

尝试查找以下页面指令属性：

```
 <%@ Page Culture="en-US" UICulture="en-US" Title="" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="Default2.aspx.cs" Inherits="Default2" %> 
```

尝试查看 web.configs：

```
<globalization uiCulture="en-US" culture="en-US" enableClientBasedCulture="false" /> 
```

## 编辑 1

尝试寻找 HttpHandlers 或 HttpModules 尝试设置语言

尝试查看 web.config 层次结构（在服务器上，`<wwwroot>`是指 IIS 网站的根文件夹）

1.  全球机器。`<windir>\Microsoft.NET\Framework\<ver>\Config\Machine.config`
2.  根网络配置。`<windir>\Microsoft.NET\Framework\<ver>\Config\Web.config`
3.  网站。`<wwwroot>\Web.config`
4.  Web应用程序。`<wwwroot>\<webapp>\Web.config`
5.  文件夹。`<wwwroot>\<webapp>\<dir>\Web.config`

如果您有多个服务器（网络场），请检查您是否被重定向到正确的服务器（您正在检查配置的服务器），为了做到这一点，您可以使用所需服务器的 ip 或在您的客户端计算机

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-30T06:51:50.837

我遇到了同样的问题，几个小时后我发现即使区域设置正确，我也需要更改**所有**保留帐户的原始文化（例如 ASP.NET）。

这是通过*区域设置中**管理*选项卡下的“*复制设置...* ”按钮完成的。如果您启用复选框“*欢迎屏幕和系统帐户*”，则会复制设置。

 **** * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-21T10:32:29.303

如果我在根 web.config (windir\Microsoft.NET\Framework\ver\Config\Web.config) 中添加一个全球化部分，设置为 en-GB，它确实解决了我的问题并传播到其他站点。这有点解决我的问题。虽然仍然没有解释默认情况下它从哪里获得 en-US，但它应该可以解决问题。谢谢。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-05T16:18:36.703

.Net Web 应用程序正在选择您浏览器的默认文化。例如，在 FF 中，默认语言设置如下图所示。[![语言的 FF 设置](../Images/419f89458b89c6f3337a40a4767799d2.png)](https://i.stack.imgur.com/b4uId.png)

因此，如果您希望站点的文化不同于浏览器的文化，请在页面的 InitializeCulture 方法中（创建一个 BasePage 并在此处保留以下代码并从该 BasePage 继承现有页面）。

```
protected override void InitializeCulture()
    {
            System.Threading.Thread.CurrentThread.CurrentUICulture = System.Globalization.CultureInfo.GetCultureInfo("en-GB");
        System.Threading.Thread.CurrentThread.CurrentCulture = System.Threading.Thread.CurrentThread.CurrentUICulture;

            base.InitializeCulture();
        }
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-12T14:22:50.160

它可以来自用于运行应用程序池或 Web 应用程序的系统帐户的文化。

检查此链接： [IIS 和 ASP.NET 之间的不同文化设置](http://blogs.microsoft.co.il/idof/2010/08/05/different-culture-settings-between-iis-and-aspnets-development-server/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-18T08:07:40.933

就我而言，我的应用程序池以我的域用户身份运行，其当前文化设置为 en-GB，并且应用程序在 en-GB 日期格式下运行良好。

我将应用程序池更改为在网络服务下运行，突然 DateTime.Parse 调用中断，因为该应用程序现在使用 en-US 文化。我看到了一些关于 IIS 文化如何特定于用户的帖子（[例如），这解释了这一点。](https://stackoverflow.com/a/14323336/61697)

在 IIS 管理器中打开根元素的 .NET 全球化并将文化和 UI 文化设置为英国英语 (en-GB) 为我修复了它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-13T15:25:07.063

只是为了帮助某人遇到同样的问题....

在尝试改变 IIS 文化，设置全球化，到目前为止，我在 Global.asax 中做到了：

```
void Application_BeginRequest(Object sender, EventArgs e)
{
    System.Globalization.CultureInfo newCulture = (System.Globalization.CultureInfo)System.Threading.Thread.CurrentThread.CurrentCulture.Clone();

    newCulture.DateTimeFormat.ShortDatePattern = "dd/MM/yyyy";
    newCulture.DateTimeFormat.DateSeparator = "/";

    System.Threading.Thread.CurrentThread.CurrentCulture = newCulture;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-12T10:51:24.157

我花了几个小时试图为我的案子找到解决方案。我在 Win10（英文版）下工作，但使用俄语区域设置。尽管如此，我在我的应用程序中获得了“en-US”文化，托管在带有 ApplicationPoolIdentity 的 IIS 上。这解决了问题：

`IIS -> Application Pools -> Advanced Settings -> Change "Load User Profile" to False`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-05T13:04:32.327

我也有这个问题，但我解决了。您必须设置以下值：

```
CultureInfo.DefaultThreadCurrentCulture = "en-GB";
CultureInfo.DefaultThreadCurrentUICulture = "en-GB"; 
```***

# deployment - Glassfish：如何正确部署应用程序？

> ID：11135011
> 
> 赞同：0
> 
> 时间：2012-06-21T09:12:39.950
> 
> 标签：deployment, glassfish

我的设置如下：

将 Glassfish 3.1.1 打包到 Windows 服务中的生产 Web 服务器。

使用包含 Glassfish 服务器的 Netbeans 7.1 开发环境。

我认为将更新部署到生产服务器的一种有效方法是复制 Netbeans /build 目录的内容，它多次运行良好。不幸的是，我遇到了一个重大问题，如下面的链接所述，由于 glassfish 在其他地方缓存了数据，因此无法识别新角色。

[Glassfish：如何调查角色/组问题](https://stackoverflow.com/questions/11114410/glassfish-how-to-investigate-roles-groups-problems)

我检查了很多 Glassfish 配置，但找不到任何参数，例如“在服务器启动时重建缓存数据”。所以我的问题是如何在我的生产服务器中部署更新以确保我的更改不会被预编译的缓存数据失效？

谢谢菲利波

# indexeddb - 无法为 indexeddb 添加事务设置 onsuccess 回调

> ID：11135012
> 
> 赞同：2
> 
> 时间：2012-06-21T09:12:43.050
> 
> 标签：indexeddb

我在 indexeddb 添加事务之前设置回调函数时遇到问题

```
os = ...the object store (IDBObjectStore) object assigned here
os.onsuccess = function(){alert('dont mess with Messi')}
os.add({name:'Lionel Messi',team:'FC Barcelona',position:'striker',number:10}); 
```

该条目已成功添加到对象存储中，但不会触发 onsuccess 事件的函数。还有另一个事件称为 onerror。我应该改用它吗？我不这么认为

不要问我“你能给出错误部分吗？” 因为根本没有错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T02:45:01.333

你以错误的方式处理你的请求。没有错误，因为您只是将`onsuccess`属性添加到永远不会调用它的对象。

您无需`onsuccess`向对象存储添加回调，而是在 上打开一个事务`objectStore`并为该事务添加一个侦听器。

有关使用索引和事务的工作示例，请查看我最近使用另一个 StackOverflower 完成的[这个 jsfiddle](http://jsfiddle.net/taylorbuley/TLTfn/)。* 有关更复杂的示例，请参阅[我的 IndexedDB 库](https://github.com/editor/InDB/blob/master/indb.dev.js)。

*请注意，此小提琴是针对旧的（2011 年 12 月之前）Chrome IDB 实现编写的。较新的 (FF) 实现将使用`onupgradeneeded`回调，但或多或​​少是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:38:01.703

看起来您将处理程序分配给错误的对象，onsuccess、onerror、onabort 处理程序是由事务触发的，而不是对象存储本身，因此代码如下所示：

```
transaction = database.transaction([storeName], IDBTransaction.READ_WRITE);
 ..
 ..
os = transaction.objectStore(storeName);
transaction.oncomplete = function(e) { //do your stuff here } ;
os.add({ id : 1, name : 'John Doe'}); 
```

你能发布一个代码，你是如何获得对象存储的，我猜是从交易中获得的（不知道其他方法）。如果上面的代码有效，请告诉我。请注意，您插入的对象在创建对象存储时必须具有定义为 objectStore 键的属性。

# c# - 通过 AJAX 的 JQGRID 内联下拉绑定

> ID：11135018
> 
> 赞同：0
> 
> 时间：2012-06-21T09:13:23.250
> 
> 标签：c#, jquery, ajax, json, jqgrid

![在此处输入图像描述](../Images/0bbe0fe367947352ed7bc5b2abec5f95.png) ` jQuery(document).ready(function () {`

```
var grid = $("#list");

    var AllCategory={"1":"Computing","2":"Cooking","10":"Fiction","3":"Finance","6":"Language","4":"Medical","11":"News","8":"Philosophy","9":"Religion","7":"Sport","5":"Travel"};

    grid.jqGrid({
        url: '/SupplierOrder/Select_SupplierOrderDetailByX/',
        editurl: "clientArray",
        datatype: 'json',
        mtype: 'GET',
        colNames: ['Category', 'Qty'],
        colModel: [
                      {
                          name: 'Category', index: 'CategoryID', align: 'left', editable: true, edittype: "select", formatter: 'select',
                          editoptions: { value: AllCategory }, editrules: { required: true }
                      },
                      { name: 'Qty', index: 'Qty', width: 40, align: 'left', editable: true, edittype: "text", editoptions: { size: "35", maxlength: "50"} }
                 ],
        pager: jQuery('#pager'),
        rowNum: 10,
        rowList: [5, 10, 20, 50],
        sortname: '',
        sortorder: '',
        viewrecords: true,
        autowidth: true,
        autoheight: true,
        imgpath: '/scripts/themes/black-tie/images',
        caption: 'Supplier Order Detail'
    })
    grid.jqGrid('navGrid', '#pager', { edit: false, add: false, del: true, refresh: false, search: false }, {}, {}, {}, {});
    grid.jqGrid('inlineNav', '#pager', {
        addtext: "Add",
        edittext: "Edit",
        savetext: "Save",
        canceltext: "Cancel"
    });

}); 
```

这是我的 JQGrid。

然后，我删除下面的代码......

```
var AllCategory={"1":"Computing","2":"Cooking","10":"Fiction","3":"Finance","6":"Language","4":"Medical","11":"News","8":"Philosophy","9":"Religion","7":"Sport","5":"Travel"}; 
```

替换为下面的代码，以便我可以获得动态数据...

```
var AllCategory = (function () {
var list = null;

$.ajax({
async: false,
global: false,
type: "POST",
url: 'Category_Lookup',
dataType: 'json',
data: {},
success: function (response, textStatus, jqXHR) {
    list = response;
},
error: function (jqXHR, textStatus, errorThrown) {
    alert("jqXHR.responseText --> " + jqXHR.responseText + "\njqXHR --> " + jqXHR + "\ntextStatus --> " + textStatus + " \nerrorThrown --> " + errorThrown);
}
});
alert(list);

return list;
})(); 
```

首先，我得到下面的消息框...

![在此处输入图像描述](../Images/94a9a40e536a3fd192ae150c1379414c.png)

然后我得到错误

![在此处输入图像描述](../Images/d106a5d58ae034a6718c32a480614395.png)

谁能告诉我如何使它正确？每一个建议都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:26:24.930

格式不对。它应该是：

```
<select><option value=“1”&gt;One</option> <option value=“2”&gt;Two</option></select> 
```

检查[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:search_config](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:search_config) (dataUrl)。

这是一个工作示例。信息取自数据库，然后在相应的控制器操作中格式化。

```
<th role="columnheader" class="ui-state-default ui-th-column ui-th-ltr">
 <div style="width:100%;position:relative;height:100%;padding-right:0.3em;">
  <select name="TypeCode" id="gs_TypeCode" style="width: 100%; ">
   <option></option>
   <option value="1">cosas!</option>
   <option value="2">mascosas</option>
   <option value="3">yast</option>
   <option value="4">tiparraco</option>
  </select>
 </div>
</th> 
```

对不起，糟糕的格式，但我不能发布图片......希望它有帮助。

# php - 解压缩通过 PHP 从 Android 上传到 IIS 7 的 .zip 文件

> ID：11135023
> 
> 赞同：0
> 
> 时间：2012-06-21T09:13:56.077
> 
> 标签：php, file, iis-7, unzip

我正在通过 PHP 将 .zip 扩展名的压缩文件从 Android 发送到 IIS 服务器。几乎可以正常工作，但我无法使用 php 解压缩文件。我有这个代码：

```
<?php

$target_path1 = "C:/Windows/Temp/";

$target_path1 = $target_path1 . basename( $_FILES['uploaded_file']['name']);

/* I'm making the folder */

$directorio = substr($target_path1, 0, 32);

if (!is_dir($directorio)) {
mkdir($directorio);
}

/* I declare a path */

$barra = "/";

$target_path1 = $directorio . $barra . basename( $_FILES['uploaded_file']['name']);

$target_path2 = $directorio . $barra;

if(move_uploaded_file($_FILES['uploaded_file']['tmp_name'], $target_path1)) {

 /* Here I want to unzip the uploaded file */

} else{
echo "There was an error uploading the file, please try again!";
echo "filename: " .  basename( $_FILES['uploaded_file']['name']);
echo "target_path: " .$target_path1;
}

?> 
```

那么，如何解压上传的文件呢？我尝试了很多方法，但没有一个奏效。如果有人能告诉我必须做什么来解压缩上传的文件，我将不胜感激。如果我必须在 php.ini 或 IIS 服务器中配置一些参数。

提前致谢。

# c++ - linux进程调度延迟很长时间

> ID：11135026
> 
> 赞同：1
> 
> 时间：2012-06-21T09:14:02.973
> 
> 标签：c++, linux, multithreading, operating-system, scheduler

我在 linux 上运行的多线程 c++ 应用程序上完成了 strace

运行几个小时后，没有一个线程运行，大约 12 秒。

我已经看到在线程暂停之前未完成的超时调用系统调用未完成，在它恢复后报告，操作完成需要 11.x 秒。（超时只有900ms）

这清楚地表明该过程已经饿了很长时间了。

进程中的所有线程都是使用linux的默认调度策略（SCHED_OTHER）和默认优先级创建的。

由于在套接字上接收到大量数据，另外 5 个类似的应用程序在同一个盒子上运行，它们也像这个应用程序一样受到大量 I/O 限制。但大多数情况下，这个应用程序都会出现预定延迟。其他应用程序是使用与此相同的计划策略和优先级创建的，即默认值。为什么只有这个进程几乎一直被阻塞？

可能是因为这个过程在更繁忙的情况下更密集的 I/O，因为可能是更高的数据速率？那么，这里的 linux 动态优先级调整推动了这个过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:21:54.737

Linux 中的优先级和进程调度仅与 CPU 时间有关。事实上，进程调度器只关心等待在 CPU 上运行的进程。等待 I/O 的进程/线程不是由 Process Scheduler 处理，而是由 I/O Scheduler 处理。

# java - Google 协议缓冲区适用于 Windows，但不适用于 linux

> ID：11135030
> 
> 赞同：0
> 
> 时间：2012-06-21T09:14:21.227
> 
> 标签：java, protocol-buffers

我有一个使用 google 协议缓冲区的简单程序（用 Java 编写），它在 Windows 机器上运行良好。

但是当我在 linux 机器上运行它时，我得到以下异常：

```
com.google.protobuf.Descriptors$FileDescriptor.internalBuildGeneratedFileFrom(Ljava/lang/String;[Lcom/google/protobuf/Descriptors$FileDescriptor;Lcom/google/protobuf/Descriptors$FileDescriptor$InternalDescriptorAssigner;
    at com.test.integration.protocols.protocolBuffers.messages.TestMsgs.<clinit>(TestMsgs.java:5111)
    at com.test.integration.protocols.protocolBuffers.messages.TestMsgs$SessionInfo.<clinit>(TestMsgs.java:3346)
    at com.test.integration.protocols.protocolBuffers.messages.TestMsgs$TestRequest.<init>(TestMsgs.java:782)
    at com.test.integration.protocols.protocolBuffers.messages.TestMsgs$TestRequest.<clinit>(TestMsgs.java:760)
    at com.test.simulators.TestJmsListener.onMessage(TestJmsListener.java:80)
    at org.apache.activemq.ActiveMQMessageConsumer.dispatch(ActiveMQMessageConsumer.java:1215)
    at org.apache.activemq.ActiveMQSessionExecutor.dispatch(ActiveMQSessionExecutor.java:131)
    at org.apache.activemq.ActiveMQSessionExecutor.iterate(ActiveMQSessionExecutor.java:202)
    at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:122)
    at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:43)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
    at java.lang.Thread.run(Thread.java:619) 
```

我对两台机器的协议缓冲区使用相同的 jar 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:50:10.693

protoc 和 protobuf 运行时库 (jar) 是紧密耦合的。您不能将较旧的协议与较新的运行时一起使用，反之亦然。请仔细检查您在 Windows 和 Linux 上使用的 protobuf jar 文件的版本是否完全相同，并且此版本与您用于生成 Java 代码的 protoc 版本相同。

# internet-explorer - 淘汰赛中的内存泄漏

> ID：11135032
> 
> 赞同：4
> 
> 时间：2012-06-21T09:14:23.627
> 
> 标签：internet-explorer, knockout.js, knockout-2.0

我们的应用程序的一部分会轮询更新，然后使用更改更新模型。它泄漏，最明显的是铬。当我让应用程序长时间运行时，我在**IE**中看到了这个问题，但它在 chrome 中最为明显（chrome 的版本是 19.0.1084.56 m）。

jsFiddle [http://jsfiddle.net/JApKE/9/](http://jsfiddle.net/JApKE/9/)上有一个示例。一遍又一遍地点击刷新按钮，你会看到内存逐渐增加。

我们正在使用 v2.1.0（我在之前的问题中看到有人说 foreach 绑定存在问题，此版本已解决）。

有任何想法吗？

谢谢，汤姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:52:34.043

我没有看到内存使用量有任何明显增加，无论如何这篇文章可能很有用，它是关于如何以有效的方式操作可观察数组：[http ://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha .html](http://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T20:41:09.727

点击多次后，内存会增长。但是一旦你强制垃圾收集器收集内存就会被释放。

您可以通过进入 chrome 开发者工具的时间线选项卡并单击开始收集图标来开始收集。

# cocoa - IKImage 手势缩放旋转

> ID：11135037
> 
> 赞同：0
> 
> 时间：2012-06-21T09:14:56.950
> 
> 标签：cocoa, zooming, rotation, gesture, ikimageview

在我的应用程序中，我使用 IKImageview 预览图像，默认情况下它支持两个手指手势，例如向上、向下、向左、向右移动。现在我想为其添加旋转和缩放手势，有人有什么好主意吗？非常感谢。

有谁知道如何继承 IKImageview 以支持缩放手势？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:00:41.763

Finally figure it out. Just subclass the `IKImageView` and add:

```
- (void)rotateWithEvent:(NSEvent *)event{
    [self setFrameCenterRotation:([self frameCenterRotation] + [event rotation])];
} 
```

Problem solved!

# jquery - window.setInterval 函数不作为点击函数运行，变量未定义

> ID：11135040
> 
> 赞同：1
> 
> 时间：2012-06-21T09:15:05.140
> 
> 标签：jquery

此功能正常工作，

```
window.setInterval(function(){
    var active = $('#frontpageControls a.active');
    var next = active.next().length > 0 ? active.next() : $('#frontpageControls .first'); 
        active.removeClass("active");
        next.addClass("active");
    var activeFPElement=$("#MainFrontpage li:visible");
    var nextFPElement = activeFPElement.next().length > 0 ? activeFPElement.next() : $('#MainFrontpage .first');
    activeFPElement.hide();
    nextFPElement.show();

        //alert($next.text());
    }, 5000); 
```

但是，当我在此运行相同的命令时

```
$("#frontpageArrows .right").bind("click", function() {
        var active = $('#frontpageControls a.active');
        var next = active.next().length > 0 ? active.next() :    $('#frontpageControls .first'); 
        active.removeClass("active");
        next.addClass("active");
        var activeFPElement=$("#MainFrontpage li:visible");
        console.log(activeFPElement+ " Fpelement ");
        var nextFPElement = $activeFPElement.next().length > 0 ? $activeFPElement.next() : $('#MainFrontpage .first');
        activeFPElement.hide();
        nextFPElement.show();
        return false;
    }); 
```

该函数无法正常运行，并且我收到一个错误，即 activeFPElement 未定义。谁能帮我解释为什么这个函数作为 setInterval 的处理程序而不是绑定的处理程序？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:17:22.310

`$activeFPElement.next()`应该是`activeFPElement.next()`。

您声明`activeFPElement`但您正在使用`$activeFPElement`.

# iphone - 在 offline_access 权限被折旧后在 iOS 上扩展 Facebook 访问令牌的问题

> ID：11135041
> 
> 赞同：2
> 
> 时间：2012-06-21T09:15:06.060
> 
> 标签：iphone, objective-c, ios, facebook-ios-sdk

在 Facebook弃用了**offline_access**权限后，我试图弄清楚我的 iOS 应用程序应该如何工作。[文档](https://developers.facebook.com/roadmap/offline-access-removal/)不清楚，我读了几遍。

我想做的是：

1.  我使用 FB 授权我的 iOS 应用程序：

    `[_facebook authorize: [NSArray arrayWithObjects: @"email", @"publish_stream", @"user_birthday", nil]];`

2.  然后，我请求`"me"`from graph API 以获取 FB ID，因为我需要它：

    `[_facebook requestWithGraphPath: @"me" andDelegate:self];`

3.  然后在：

    `-(void)request: (FBRequest*)request didLoad: (id)result`

我检查令牌的到期日期

```
if ([_facebook.expirationDate timeIntervalSinceNow] < 60*60*24) // 1 day 
{ 
   [self extendAccessTokenWithAppID:kFacebookAppID 
                          appSecret:kFacebookAppSecret     
                      existingToken:_facebook.accessToken]; 
} 
```

我扩展令牌的方法只是联系我在开头提到的文档中描述的端点。

```
-(void)extendAccessTokenWithAppID:(NSString*)appID appSecret:(NSString*)appSecret existingToken:(NSString*)existingToken 
{
      NSString *requestString = [NSString stringWithFormat:@"oauth/access_token?client_id=%@&client_secret=%@&grant_type=fb_exchange_token&fb_exchange_token=%@", appID, appSecret, existingToken];

      [_facebook requestWithGraphPath: requestString andDelegate: self]; 
} 
```

我处理响应

```
- (void)request: (FBRequest*)request didLoad: (id)result 
```

但是我得到的始终是传递给端点的相同令牌和相同的到期日期。到期日期永远不会延长，只是短短的 1-2 小时（对于短期访问令牌来说是正常的）。这意味着令牌没有被扩展。

我已将**Remove offline_access 权限**设置为**Disabled**。

你知道我的方法有什么问题吗？谢谢你的帮助！

PS 我在 StackOverflow 上发现了类似的问题，但没有一个答案对我有用，例如 [Access Token expire time with offline_access 权限](https://stackoverflow.com/questions/5155487/access-token-expire-time-with-offline-access-permission)

**更新：**

启用**Remove offline_access 权限**使 FB 只返回长期存在的令牌。我通过创建一个新的 FB 帐户并在我的应用程序中使用此帐户登录来对此进行了测试。我马上就得到了万岁令牌。

**禁用Remove offline_access 权限**后，FB 只给我短期访问令牌，即使我尝试使用文档中提供的端点扩展短期令牌。端点返回具有相同到期日期的相同令牌。

关键问题是当 FB 给我短期访问令牌并且我联系端点以将其扩展为长期访问令牌时，我无法测试该场景。似乎 FB 开发人员还没有为他们想要引入的功能做好准备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:26:04.440

要检查的事情可能会导致您出现问题

1.  您已在应用的高级设置中禁用了 offline_access
2.  您使用的是最新的 SDK 副本。它目前未版本化，但旧版本不支持访问令牌扩展
3.  您已[按照文档中的说明配置 SSO](https://developers.facebook.com/docs/mobile/ios/build/#implementsso)
4.  您一直等到用户的令牌完全过期 - 您可能会获得“新”短令牌，因为您正在重试，但是一旦令牌完全过期，您应该在下次用户回来时获得更长的令牌

# shadow - 如何在 Three.JS 中设置定向光的大小？

> ID：11135043
> 
> 赞同：2
> 
> 时间：2012-06-21T09:15:14.277
> 
> 标签：shadow, three.js, light

我在我的场景中添加了一个定向光，但它并没有显示所有的阴影。阴影被切断，就像聚光灯的 FOV 太小一样。

当我启用 shadowCameraVisible 时，我看到我的灯光就像一个显示阴影的大盒子（这是有道理的）。问题是：我怎样才能让这个“盒子”更大？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T09:12:33.637

找到了！原来shadowcamera有left、right、top和bottom属性：

```
light.shadowCameraLeft = -3000;
light.shadowCameraRight = 3000;
light.shadowCameraTop = 3500;
light.shadowCameraBottom = -3000; 
```

# git - 执行 Git 别名时显示完整命令？

> ID：11135045
> 
> 赞同：13
> 
> 时间：2012-06-21T09:15:30.600
> 
> 标签：git, git-config

使用别名时是否有显示完整命令的选项？

例子：

```
$ git ci -m "initial commit"
Full command: git commit -m "initial commit"
...
$ git lg
Full command: git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --date=relative
... 
```

别名很方便，但我喜欢学习/被提醒我的别名实际上是做什么的（我的大部分别名都是从网上复制的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:39:14.933

另一种选择是在 Git wiki 部分中列出的命令想法[Aliases](https://git.wiki.kernel.org/index.php/Aliases#alias)给出的`alias`部分`.git/config`

`[alias]`

```
 aliases = !git config --get-regexp 'alias.*' | colrm 1 6 | sed 's/[ ]/ = /' 
```

然后，这会将您的所有别名列为命令行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T13:26:07.683

举个例子：

`log-1 = "!sh -c 'echo \"Full command: git log --graph --decorate --pretty=oneline --abbrev-commit\"; git log --graph --decorate --pretty=oneline --abbrev-commit' -"`

您调用 shell 并执行给定的命令。

在您的 lg 示例中，您必须进行大量转义，因为您在 qoutes 中有引号和需要转义的字符。我建议您创建自己的漂亮格式并在别名中使用它。假设我们将您的格式称为我的。这是你需要做的：

`git config --add pretty.mine "%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr)%C(bold blue)<%an>%Creset"`

别名是

`lg = "!sh -c 'echo \"Full command: git log --graph --pretty=mine --abbrev-commit --date=relative\"; git log --graph --pretty=mine --abbrev-commit --date=relative' -"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T14:14:55.123

如果您使用的是 bash，则可以将“set -x”添加到别名中。所以，作为一个简单的例子，如果你有一个别名：

```
ol = !sh -c 'git log --oneline' 
```

您将其更改为：

```
ol = "!sh -c 'set -x; git log --oneline'" 
```

由于分号，它需要双引号。

为了允许命令行的其余部分，您将添加“$@”，并添加一个“-”，以便参数从 $1 开始。这给了你：

```
ol = "!sh -c 'set -x; git log --oneline $@' -" 
```

更复杂的别名可能已经包含这些东西了。

我不知道有一种方法可以为所有别名全局设置它，尽管它会很好！

编辑：这实际上使用 shell 函数更容易一些。您可以执行以下操作：

```
git config alias.ol '!f() { set -x; git log --oneline $@; }; f' 
```

以获得与上述相同的效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-18T09:39:01.123

使用环境变量启用 git 的[跟踪功能](https://git-scm.com/book/en/v2/Git-Internals-Environment-Variables#_debugging)`GIT_TRACE`将显示扩展 git 别名后 git 执行的确切命令。

这也将减轻因生成（另一个）shell 及其进行的任何处理而产生的任何开销。

更复杂的 git 命令将提供详细的输出来解释 git 正在做什么。如果您只想知道别名扩展的结果，您可以捕获 stderr 和 grep 进行扩展（参见下面的示例）。但是，请注意使用实际修改存储库的命令来执行此操作（如果适用，请使用 --dry-run）。

# 例子

将别名`ls1`定义为：

```
~$ cat .gitconfig|grep ls1
    ls1 = log --oneline -1 
```

将产生如下输出（在默认[分支 master](https://github.com/git/git/tree/master)上提交[2befe97后在 git](https://github.com/git/git/commit/2befe97201e1f3175cce557866c5822793624b5a)[自己的存储库](https://github.com/git/git)上执行）：

```
~/git (master=)$ GIT_TRACE=1 git ls1
11:14:16.075127 git.c:561               trace: exec: 'git-ls1'
11:14:16.075182 run-command.c:334       trace: run_command: 'git-ls1'
11:14:16.078823 git.c:278               trace: alias expansion: ls1 => 'log' '--oneline' '-1'
11:14:16.079032 git.c:344               trace: built-in: git 'log' '--oneline' '-1'
11:14:16.080189 run-command.c:334       trace: run_command: 'pager'
11:14:16.080536 run-command.c:193       trace: exec: 'pager'
2befe97 Eighth batch
~/git (master=)$ 
```

# 赶上扩张

```
~/git (master=)$ GIT_TRACE=1 git ls1 2>&1 |grep "trace: alias expansion"
11:37:45.014231 git.c:278               trace: alias expansion: ls1 => 'log' '--oneline' '-1'
~/git (master=)$ 
```

# iphone - 如何使用 GoogleDocAPI 将文档下载到 Iphone

> ID：11135046
> 
> 赞同：1
> 
> 时间：2012-06-21T09:15:42.553
> 
> 标签：iphone, objective-c, google-docs-api, google-drive-api

是否可以将我的 gmail 帐户中的文档下载到 iphone 应用程序的文档文件夹中。实际上我使用了 Google Doc API 并通过使用获取 Feed

```
-(GDataServiceGoogleDocs *)getdocservice
{
    static GDataServiceGoogleDocs *docs = nil;
    if(!docs)
    {
        docs = [[GDataServiceGoogleDocs alloc]init];
        [docs setShouldCacheResponseData:YES];
        [docs setServiceShouldFollowNextLinks:YES];
        [docs setIsServiceRetryEnabled:YES];
        [docs setUserCredentialsWithUsername:@"gmailaccount@gmail.com" password:@"password"];
    }
    return docs;
}

//@@@@@@@@@@@@@@
GDataServiceTicket *ticket;
#pragma mark docService
docsService = [self getdocservice];

NSURL *feedURL = [GDataServiceGoogleDocs docsFeedURL];
GDataQueryDocs *queryDocs = [GDataQueryDocs documentQueryWithFeedURL:feedURL];
[queryDocs setMaxResults:1000];
[queryDocs setShouldShowFolders:YES];
ticket = [docsService fetchFeedWithQuery:queryDocs delegate:self didFinishSelector:@selector(docsFetchTicket:finishedWithFeed:error:)];

// call back
-(void)docsFetchTicket:(GDataServiceTicket *)ticket finishedWithFeed:(GDataFeedDocList *)feed error:(NSError *)error
{
    GDataFeedDocList *mDocListFeed = feed;
    int numDocs = [[feed entries] count];
    NSLog(@"NumDocs :%d\n Feed :%@",numDocs,mDocListFeed);

    for (int i=0; i<numDocs; i++) {
        GDataEntryDocBase *docEntry = [mDocListFeed entryAtIndex:i];
        NSLog(@"\n@@@@@@@@@@@@ DocTitle :%@\n\n",[[docEntry content] sourceURL] );
    }
} 
```

它正在显示我帐户中的所有文件。但我不知道如何将这些文档下载到我的应用程序文件夹中。如果有人有想法，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T23:53:12.833

（免责声明：我不精通Objective-C）

GDataFeedDocList 的每个条目都应该包含一个指向实际文件数据的链接。该链接包含在其“内容”属性中。在您的代码中，您似乎拥有该 URL (sourceURL)，您需要使用经过身份验证的 URL 请求来下载内容。

您现在还应该使用更新的 Drive API 而不是使用更新的 Objective-C 客户端库的 DocumentList API：

[http://code.google.com/p/google-api-objectivec-client/](http://code.google.com/p/google-api-objectivec-client/)

# objective-c - 使用 prepareForSegue 作为按钮

> ID：11135047
> 
> 赞同：3
> 
> 时间：2012-06-21T09:15:42.533
> 
> 标签：objective-c, ios, xcode, storyboard

嗨，我以编程方式创建按钮并将我的按钮连接到另一个视图，但是我遇到了 segue 问题，我应该使用 prepareForSegue 方法进行情节提要，但我不知道互联网上如何有一些示例，但是当我使用它时会出错样品，你能帮帮我吗

提前致谢！

这是我的代码

**创建按钮**

```
 UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom]; 
        button.backgroundColor=[UIColor colorWithRed: 201.0/255.0 green: 201.0/255.0 blue:201.0/255.0 alpha: 1.0];
        button.tag = currentTag;
        currentTag++;
        [button.layer setBorderColor: [[UIColor blackColor] CGColor]];
        [button.layer setBorderWidth: 1.0];
        [button setTitle:[NSString stringWithFormat:@"%d",currentTag] forState:UIControlStateNormal];
        button.frame = CGRectMake(80*x, 32*y, 80, 32); 
        [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
        [buttonView addSubview: button]; 
```

**按钮操作**

```
-(void)buttonPressed:(UIButton *)button
{
NSLog(@"button %u -- frame: %@", button.tag, NSStringFromCGRect(button.frame));
WeekView *crtObj=[[WeekView alloc]initWithNibName:@"WeekView" bundle:nil];
[self.navigationController pushViewController:crtObj animated:YES];
[crtObj release];

} 
```

**为转场做准备**

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([[segue identifier] isEqualToString:@"WeekView"]) {

        // Get reference to the destination view controller
       WeekView *vc = [segue destinationViewController];

        // Pass any objects to the view controller here, like...
        [vc setMyObjectHere:object];  //// I don't know what should I write instead of object
    }} 
```

**错误**

![在此处输入图像描述](../Images/de8d336369e32142e4f06dc8c7718251.png)

**编辑 2：**** 我有一个警告：**

**直接从视图控制器启动的 Segue 必须具有与 -[UIViewController performSegueWithIdentifier:sender:] 一起使用的标识符**

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([[segue identifier] isEqualToString:@"WeekView"]) {

        // Get reference to the destination view controller
     //  WeekView *vc = [segue destinationViewController];

        // Pass any objects to the view controller here, like...
       // [vc setMyObjectHere:object];
    [segue.destinationViewController setTitle:@"WeekView"];
    }} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T09:28:58.170

实际上有两种方法可以将视图控制器推送到导航控制器上。

1.  旧方式，全部在代码中。这就是你所做的。在这一点上，你可以完全忘记 segues。

2.  新方法：在 Storyboard 中建立一个 Segue（将 segue 从一个视图控制器推送到一个新的视图控制器，您也在 Storyboard 中定义），为其`Identifier`命名，然后使用此代码推送视图控制器。

.

```
[self performSegueWithIdentifier:myIdentifyer sender:self]; 
```

其中 self 是视图控制器。现在您可以在`prepareForSegue:`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T09:20:24.310

这种情况下的示例代码只是告诉您可以在`prepareForSegue:sender:`.

这表明您尝试连接的 viewController 将有一个方法`setMyObjectHere:`，并且它会期望您传递该对象。

例如，您的类可能有一个`setTitle:`方法，并且在`prepareForSegue:sender:`代码中，您可以根据正在执行 segue 的控制器中的信息预先设置标题。

要消除警告，您需要一个标识符，如下图所示：

![在此处输入图像描述](../Images/66618c0d3e5a0eca9a437b91216f0c97.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-11T15:16:04.990

“旧的编码方式”，没有更好的编码方式，希望这会有所帮助，但如果你以编程方式使用 UIButtons 和 UIViews，你甚至不应该使用 segues。

在应用程序委托中创建一个根视图控件，而不仅仅是弹出和关闭下一个视图控制器等。

例如，这就是您在视图控制器中所需要的：

```
-(void)nextControllerButton:(UIButton*)button{

    SearchViewController *nextController = [[SearchViewController alloc] init];

    nextController.username = _username.text;
    nextController.password = _password.text;

    [self.navigationController showViewController:nextController sender:self];
} 
```

# database - 存储来自 Zigbee 嵌入式设备的数据

> ID：11135049
> 
> 赞同：0
> 
> 时间：2012-06-21T09:15:49.770
> 
> 标签：database, web-applications, embedded, protocols, sensors

您好，我正在研究无线传感器网络（Zigbee）。WSN 网关设备有一个以太网。网关设备实际管理网络并从温度、光、湿度、压力传感器等传感器获取读数。我的问题是如何将数据存储/发送到远程数据库或协议/应用程序。我的意思是，有没有适合它的协议/应用程序？我想通过网络发送这些数据，任何应用程序/协议都获取数据包并以正确的顺序将其存储到数据库中。有什么办法吗？我正在为前端使用 vaadin Web 应用程序框架。它获取传感器数据并将其与图形、图表等一起显示给用户。如果需要其他信息，我很乐意提供。

谢谢你

山塔努·班纳吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T21:33:46.177

如果我理解正确，您正在直接“写入”并正在寻找处理该数据的协议。如果这种理解不正确，那么您现在可以停止阅读，因为我不理解这个问题。

但是，如果假设是正确的，那么一种可能性可能是使用[OData](http://www.odata.org/)。在每次读取数据时，向服务器发出 HTTP POST 请求。其可行性在一定程度上取决于数据量和带宽。OData 的 HTTP 请求有点重，但如果您使用 JSON（而不是 XML），它会减少一些整体大小。

您将需要一个具有可用 OData 服务的数据库引擎（并且有一些）。我不知道数据是什么样的，但大概你可以定义一个表来存储每个记录，每个记录都有一个字段用于每个读数值。假设该表名为`readings`，那么具有两个值的服务的 POST 可能如下所示：

```
POST http://servername.domain/fullURL/v1/readings HTTP/1.1
Content-ID: 1
Content-Type: application/json;type=entry

{
 "temperature": 1.2,
 "otherdata": 42
} 
```

# git - 如何在 git 中仅列出活动/最近更改的分支？

> ID：11135052
> 
> 赞同：26
> 
> 时间：2012-06-21T09:16:10.460
> 
> 标签：git, branch, git-branch

我有时会使用包含许多分支的源代码存储库，其中大多数是旧的并且通常不再相关。

在这些情况下，完整的分支列表`git branch`并不是很有帮助。有没有办法只列出“活动”分支？例如，只有在过去*n*天内收到提交的分支？理想情况下，该列表将包括每个分支的最后提交日期，并指示该分支是否已经完全合并。

PS：我意识到这也可以通过删除“旧”分支来解决（如[如何处理实验性非合并 git 分支？](https://stackoverflow.com/questions/8988240/what-to-do-with-experimental-non-merged-git-branches)），但这在给定项目中可能并不总是可行或被接受。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-21T18:17:54.253

您可以使用[git-for-each-ref](http://schacon.github.com/git/git-for-each-ref.html)获取所有本地和跟踪分支的列表，按最后一次提交的提交者日期降序排序，如下所示：

```
git for-each-ref --sort=-committerdate --format='%(committerdate:short) %(refname)' refs/heads refs/remotes 
```

这输出例如：

```
2012-06-23 refs/heads/master
2012-06-21 refs/remotes/origin/HEAD
2012-06-21 refs/remotes/origin/master 
```

您可以添加`--count=m`最多获得*m*个分支，您可以`--sort=-authordate`不使用提交者日期，当然也可以使用不同的格式。`for-each-ref`它本身不会按日期限制结果，这必须单独编写脚本，但至少您手头有来自提交对象的日期。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-21T09:42:47.573

```
ls -1 --sort=time .git/refs/heads/ | while read b; do PAGER='' git log -n1 --color --pretty=format:'%C(yellow)%d%Creset - %Cred%h%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset%n' --abbrev-commit $b --; done; 
```

这个 oneliner 打印按时间从最新到最旧排序的所有本地分支。每个分支都有最后一次提交，带有人类可读的日期字符串。您可以将其添加到您的`.gitconfig`.

对于远程分支，我想出了这个令人毛骨悚然的解决方案：

```
git ls-remote -h origin | while read b; do PAGER='' git log -n1 --color --pretty=format:'%ct%C(yellow)%d%Creset - %Cred%h%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset%n' --abbrev-commit $( echo $b | cut -d' ' -f1 ) --; done | sort -rn -k1,10 | cut -c11- 
```

**编辑：**我想的越多，我就越担心这可能不可靠，因为`ls-remote`总是连接到远程端而`log`不是。它可能需要`fetch`在每次运行此命令之前执行。

# facebook - 在 Graph API 或 FQL 中获取好友列表 - 似乎缺少一些好友

> ID：11135053
> 
> 赞同：7
> 
> 时间：2012-06-21T09:16:10.300
> 
> 标签：facebook, api, facebook-graph-api

`'me/friends'`图形 api 或`friends`FQL 表是否有可能只返回*一些*朋友？

我检查了结果，它比我在 facebook.com 上看到的数量略少

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-21T09:21:44.770

## 图 API V1.0 中

`/friends`对[用户对象](https://developers.facebook.com/docs/reference/api/user/)（例如`/me/friends`）的调用或对[`friend`FQL 表](https://developers.facebook.com/docs/reference/fql/friend/)的查询应返回该用户的所有朋友，除了

1.  那些已[停用其帐户的人](https://www.facebook.com/help/214376678584711)
2.  那些[屏蔽了你的应用的人](https://www.facebook.com/help/?faq=16976)
3.  那些已禁用所有平台应用程序访问其数据的人。- 如果用户启用此选项（见下文），您将无法通过 API 访问有关该用户的任何信息，包括他们的基本信息、他们发布的帖子等。他们**不会**出现在您的应用用户的朋友列表中API。

如果您发现回复中缺少朋友，那几乎可以肯定是由于其中一个原因，根据我的经验，大多数问这个问题的人都在问第三种情况。

* * *

移除平台选项的选项目前位于*隐私设置 -> 广告、应用和网站 -> '关闭您在 Facebook 上下使用应用、插件和网站的能力*

如果您没有在一次通话中获得所有朋友，并且您确定这不是因为其中一个原因，请检查您`limit`的查询中是否有一个参数 - 如果它少于您认为应该的朋友数量，请增加它出现。

例如`/me/friends?limit=5000`，对于允许的最大好友数，5000

请注意，朋友数将包括无法在列表中检索到的用户（例如`friend_count`用户 FQL 表的字段）

## 在 Graph API V2.0 或更高版本中

`/friends`如果用户已授予您的应用程序权限，则对 User 对象的调用将`user_friends`返回该用户的朋友，这些朋友也已授予您的应用程序`user_friends`权限 -

您可以在 Facebook Graph Api v2.0+ 中阅读有关从 v1.0 到 v2.0 的更改的更多信息[- /me/friends 返回为空，或者只有也使用我的应用程序](https://stackoverflow.com/questions/23417356/facebook-graph-api-v2-0-me-friends-returns-empty-or-only-friends-who-also-use-m)的朋友或[Facebook 的更改日志](https://developers.facebook.com/docs/apps/changelog)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T10:36:54.133

您需要传递一个限制参数。
`'me/friends/?limit=0'`它会返回你所有的朋友。

> 更新

该参数`limit=0`返回0个好友，
要获取所有好友，需要设置`limit=5000`（允许的最大数量）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-12T14:17:11.520

随着 的引入`Facebook Graph API 2.0`，访问用户的朋友列表被删除，并且仅限于使用相同应用程序的朋友。然而，Facebook 添加了两个新的 API 以允许检索朋友姓名（以及间接的朋友数）。两个新的 API 是`taggable_friends`和`invitable_friends`。

```
Url:
me/taggable_friends?limit=1&fields=id,name, 
```

# c# - 如何在文本框中反映在datagridview的编辑模式下所做的更改

> ID：11135054
> 
> 赞同：0
> 
> 时间：2012-06-21T09:16:13.343
> 
> 标签：c#, .net

我有一个可编辑的datagridview。我在它下面有一个文本框。我在运行时的网格视图中输入值，并在其下方的文本框中计算总数。问题是，每当我更改网格视图中的值时，文本框都会保留先前的值并将新值添加到先前的值。我不希望添加旧值。我写了这段代码

```
private void grdPurchase_CellEndEdit_1(object sender, DataGridViewCellEventArgs e)
{
   try
   {
        //this.grdPurchase.Refresh();
       (grdPurchase.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString() != "")
        string value = grdPurchase.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString();

        if (e.ColumnIndex == 4)
        {

            float val = float.Parse(value);
            total = val;
            if (vapasi1 == "Yes")
            {
                if((e.r
                vtot += total;
                txt_forvapasitotal.Text = vtot.ToString();
                float vapsitot = float.Parse(txt_forvapasitotal.Text);
                float vapsicalculate = (vapsitot * a);
                float tax = vapsicalculate / 100;
                float with_vapasi = vtot + tax;
                txt_withvapasi.Text = Convert.ToString(with_vapasi);

            }
            else
            {
                nvtot += total;
                txt_withoutvapasitot.Text = nvtot.ToString();
            }
            txt_vapasiincludedtot.Text = (float.Parse(txt_withvapasi.Text) + float.Parse(txt_withoutvapasitot.Text)).ToString();
            }
        }

    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:20:22.860

尝试使用事件 DataGridView.CellValueChanged。可以在 MSDN 上找到一个示例。[http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvaluechanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvaluechanged)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:22:45.293

将此行修改`vtot += total`为`vtot = total`

```
 if (vapasi1 == "Yes")
                    {
                        if((e.r
                        vtot = total;
                        txt_forvapasitotal.Text = vtot.ToString();
                        float vapsitot = float.Parse(txt_forvapasitotal.Text);
                        float vapsicalculate = (vapsitot * a);
                        float tax = vapsicalculate / 100;
                        float with_vapasi = vtot + tax;
                        txt_withvapasi.Text = Convert.ToString(with_vapasi);

                    }
                    else
                    {
                        nvtot = total;
                        txt_withoutvapasitot.Text = nvtot.ToString();
                    } 
```

# android - 启用proguard时Android应用程序无法正常工作

> ID：11135055
> 
> 赞同：0
> 
> 时间：2012-06-21T09:16:16.070
> 
> 标签：android, android-widget, xmpp, proguard, socketexception

我正在开发一个应用程序。没有它可以正常工作，`proguard`但是当我启用`proguard`它时它不能正常工作。

XMPP 端口无法打开并引发**套接字异常**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:18:54.113

这可能是因为 proguard 混淆了你的代码，如果你使用一些外部库，你应该相应地制定混淆规则......你应该检查这个[http://developer.android.com/guide/developing/tools/proguard.html](http://developer.android.com/guide/developing/tools/proguard.html)

**编辑：**

我在项目中的规则是：

```
-libraryjars library_used.jar 
```

而且，如果您遇到一些未找到类的异常，那么您可能希望从混淆过程中删除该类，如下所示：

```
-keep public class org.package.YourClassHere 
```

请注意，如果这是最好的方法，我不是 100%，但至少它有效:)

# jquery-ui - 刷新 JQuery UI 多选小部件

> ID：11135056
> 
> 赞同：0
> 
> 时间：2012-06-21T09:16:18.653
> 
> 标签：jquery-ui

我实际上正在尝试使用这个漂亮的小部件：http: [//quasipartikel.at/multiselect_next/](http://quasipartikel.at/multiselect_next/)

我在同一页面中有两个这样的小部件，我想要做的是在我选择或取消选择第一个中的项目时刷新第二个。

例如，在开始时，我只有这个：

```
<select id="crc" class="multiselect" multiple="multiple">

</select> 
```

然后，在选择和取消选择事件中，我创建了更多节点并将它们添加到其中（它可以工作，它会创建如下内容：

```
 <select id="crc" class="multiselect" multiple="multiple">
        <option>test1</option>
        <option>test2</option>
    </select> 
```

问题是添加新选项后我无法刷新第二个小部件。我找到了一个有类似问题的有用帖子并尝试了这个：

```
$("#crc").multiselect("destroy").multiselect(); 
```

但它没有用，有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:28:43.893

我有完全相同的问题。这对我有用：

要解决 ui.multiselect 的析构函数的问题，请在 destroy 函数内进行以下更改：

```
destroy: function() {
    this.element.show();
    this.container.remove();

    if ($.Widget === undefined)
        $.widget.prototype.destroy.apply(this, arguments);
    else {
        $.Widget.prototype.destroy.apply(this, arguments);
        return this;
    }
} 
```

旧版本是：

```
destroy: function() {
    this.element.show();
    this.container.remove(); 
    $.widget.prototype.destroy.apply(this, arguments);
} 
```

这种变化的原因是在 jQuery 1.8 中引入了一个新的 $.Widget。我还进行了以下更改/添加，以便它与 IE9 兼容，并且还提供了获取 selectedTexts 的功能。

```
// get all selected values in an array
selectedValues: function() {
    return $.map( this.element.find('option[selected]=selected'), function(item,i) { return $(item).val(); });
},
selectedTexts: function () {
    return $.map(this.element.find('option[selected]=selected'), function (item, i) { return $(item).html(); });
} 
```

# php - 将一些 html 附加到重定向的站点 php

> ID：11135059
> 
> 赞同：1
> 
> 时间：2012-06-21T09:16:24.043
> 
> 标签：php, html, redirect, append

假设我有一个脚本，它会根据您的输入类型重定向到另一个页面。现在您被重定向到的那个站点已经有一个很长的查询字符串。所以我想做的是将一些 html 代码附加到站点的末尾而不实际发送 GET 或 POST 请求，让我们这样说：

```
<?php
header("Location: redirectedsite.php");
//send extre html img for example
$html="<html><img scr='img.jpg'></img></html>";
?> 
```

这甚至可能吗？我知道会话和 cookie，但我想看看是否有其他选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:18:42.147

一旦浏览器重定向到另一个站点，您的页面主体就会被忽略，并且只有另一个站点会显示给用户。

所以，不幸的是，你想要的是不可能的；如果重定向的站点在您的控制之下，您可以根据`GET`参数有条件地添加更多内容，但它仍然无法按照您描述的方式工作。

事实上，如果您可以将 HTML 附加到任何其他网站，这可能是一场安全噩梦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:19:13.533

除了将其作为查询参数附加或使用会话变量之外，您不能这样做。您不想使用会话有什么特别的原因吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:18:50.117

以这种方式不可能，不，对不起。如您所说，如果您控制目标站点，则可以设置一个会话变量，提示目标页面附加代码，但无法以您想要的方式直接执行此操作。如果您不控制目的地，这两种选择都不可能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T09:18:51.937

没有。当您进行标头重定向时，浏览器将立即转到那里。您不能在两者之间添加一些 HTML。

您必须在目标页面上执行此操作，或者显示一个适当的 HTML 页面，然后使用另一种重定向（使用[旧版`<META>`](http://en.wikipedia.org/wiki/Meta_refresh)或 JavaScript，或两者的组合以及可以手动单击的链接）。

# c# - 带有 using 子句的 SqlConnection - 在连接上调用 close

> ID：11135061
> 
> 赞同：3
> 
> 时间：2012-06-21T09:16:47.853
> 
> 标签：c#, asp.net, .net

当我在如下所示的 using 子句中有 SQLConnection 时，是否需要显式关闭连接？

```
protected SqlConnection Connection 
{
    get
    {
       if (this.connection == null)
       {
           this.connection = new SqlConnection(this.ConnectionString);
       }
       if (this.connection.State != ConnectionState.Open)
       {
           this.connection.Open();
       }

       return this.connection;
    }
} 

using (SqlConnection connection = this.Connection)
{
    using (SqlCommand cmd = connection.CreateCommand())
    {
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.CommandText = "....";

        using (SqlDataReader reader = cmd.ExecuteReader())
        {
            while (reader.Read())
            {
                etc
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:33:40.917

该`using`块将始终调用`Dispose`，这将关闭连接。

**但是**，您保留了连接对象并打算重用它，这在它被释放后是不可能的。你不应该保留连接对象，你应该把它扔掉并在需要时创建一个新对象。与数据库的实际连接是池化的，因此当您创建一个新的连接对象时，它将重用池中的一个连接。当您释放连接对象时，实际连接将返回到池中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T09:18:22.197

不，你没有。如果连接已经打开，则连接的 Dispose() 方法将调用 Close。

您还应该按照 John Gathogo 的建议更改您的代码，以便在每次需要时创建一个新的连接对象。您的代码将失败，因为您第二次尝试使用连接时它已经被释放。

ADO.NET 使用连接池来保持一个打开的连接池，它提供给调用 Open 的任何人。这意味着只要池中有可用的连接，创建和打开新连接就不会花费任何成本。保持连接打开的时间超过必要的时间会降低性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T09:21:13.437

您可以轻松地将代码更改为以下并实现您想要的：

```
 using (SqlConnection connection = new SqlConnection(this.ConnectionString))
   {
      connection.Open();
      using (SqlCommand cmd = connection.CreateCommand())
      {
         cmd.CommandType = CommandType.StoredProcedure;
         cmd.CommandText = "....";

         using (SqlDataReader reader = cmd.ExecuteReader())
         {
            while (reader.Read())
            {
               //etc
            }
         }
      }
   } 
```

运行时将负责关闭连接并为您处理资源

# sql - 从另一个执行存储过程而不发送结果

> ID：11135062
> 
> 赞同：2
> 
> 时间：2012-06-21T09:16:58.637
> 
> 标签：sql, stored-procedures, sql-server-2000

这可能是一个愚蠢的问题，我尝试过谷歌搜索，但我可能没有正确表达这个问题，所以我将尝试在这里解释这个问题：

我正在使用 SQL Server 2000，并且我有一个存储过程 (SP1)，它遍历具有 3 条记录的表并在每次迭代时执行另一个存储过程 (SP2)。

SP2 进行插入，然后对插入的记录进行选择。

SP1 在迭代后继续，它执行一次选择然后结束。

当我执行 SP1 时，我只希望返回最后一次选择的结果集。但是通过这次迭代，我得到了 4 个结果集（每次迭代 1 个，然后是最后的 SP1 选择）全部返回。

`don't return the resultset of SP2`当我将它们作为 SP1 的一部分进行迭代时，有什么办法可以说？

我可以创建另一个与 SP2 完全相同但最后没有选择的存储过程，它可能会处理它。但我更愿意向 SP1 添加一些内容，以防止结果集返回。那可能吗？

这是 SP1 中的迭代现在的样子：

```
set nocount on
declare c cursor for select room_id from st_room_ref where active = 1
declare @room_id int,
        @max_c int

open c

while 1 = 1
begin
    fetch c into @room_id
    if @@fetch_status <> 0 break

    select  @max_c = max(call_id) 
    from    st_call 
    where   room_id = @room_id 

    if      @max_c is null
    exec    st_getCall @room_id
end

close c
deallocate c 
```

请不要发表关于游标错误的论文。只是希望通过某种方式告诉`st_getCall`SP 不要将其结果集发回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:32:06.313

您是否尝试过以下操作？

```
INSERT INTO
  @itteration_results
EXEC
  st_getCall @room_id 
```

这有一个限制；你不能把它嵌套得更深；`st_getCall`里面不能有同样的东西。

如果您最终确实需要它，您可能会从这个问题的公认答案中获得更多信息：

*   [如何从存储过程中选择进入临时表](https://stackoverflow.com/questions/653714/how-to-select-into-temp-table-from-stored-procedure)

# c# - 修改 Setting.cs 文件是否安全（Settings.settings 的部分类）

> ID：11135064
> 
> 赞同：1
> 
> 时间：2012-06-21T09:17:01.530
> 
> 标签：c#, app-config, partial

正如您从标题中可以理解的那样，我修改了 Settings.cs 文件。添加了一些属性，一些代码到构造函数（公共 Settings()）并覆盖了 Save() 函数。但它是一个非常重要的类，所以我知道你有什么样的后果当您修改 IDE 生成的文件，尤其是 .designers 时要面对。它不是设计器，而是 IDE 生成的内部密封部分，我想知道它是否 100% 安全？

```
internal sealed partial class Settings
{
    public System.Data.SqlClient.SqlConnection AppDbConnection
    {
      get 
      {
        if (_AppDbConnection == null)
        {
          try
          {
            _AppDbConnection = new System.Data.SqlClient.SqlConnection(_ConnectionString);
            _AppDbConnection.Open();
          }
          catch (System.Exception ex) { throw ex; }
        }
        return _AppDbConnection;
      }
    }

    private System.Data.SqlClient.SqlConnection _AppDbConnection;
    private string _ConnectionString;

public override void Save()
{
  System.IO.FileInfo fi = new System.IO.FileInfo(System.Windows.Forms.Application.StartupPath + "\\Settings.dat");
  System.IO.FileStream fs = new System.IO.FileStream(fi.FullName, System.IO.FileMode.OpenOrCreate, System.IO.FileAccess.Write);
  System.IO.StreamWriter sw = new System.IO.StreamWriter(fs, System.Text.Encoding.GetEncoding("iso-8859-9"));
  try { sw.Write(Helper.BinarySerializer.ToBinary(_SettingsBase)); }
  catch (System.Exception ex) { throw ex; }
  finally { sw.Close(); fs.Close(); }
  base.Save();
}

    public Settings()
    {
      try
      {
        System.IO.FileInfo fi = new System.IO.FileInfo(System.Windows.Forms.Application.StartupPath + "\\Settings.dat");
        if (fi.Exists)
        {
          System.IO.FileStream fs = new System.IO.FileStream(fi.FullName, System.IO.FileMode.Open, System.IO.FileAccess.Read);
          System.IO.StreamReader sr = new System.IO.StreamReader(fs, System.Text.Encoding.GetEncoding("iso-8859-9"));
          string data = sr.ReadToEnd();
          if (data != "")
          {
_SettingsBase = (AppCode.SettingsBase)Helper.BinarySerializer.BinaryTo(data);
            _ConnectionString = Helper.Crypto.DecryptString(_SettingsBase.ConnectionString, "");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:22:36.797

如果您的添加位于*不是由某些代码生成工具创建的***单独文件**中，那么 IDE 不会覆盖您的更改（只是不要将其命名为以 *.designer.cs 结尾的东西，以防万一）。 所以这至少对 IDE 的代码生成是安全的。

 *不要编辑由 Visual Studio 生成**的**文件（这些文件通常在顶部有一条评论，警告你）。

像这样的自动生成的文件是将类声明为部分的主要原因之一，这样您就可以在另一个文件中扩展它，而不必担心您的更改会被覆盖。

注意：该连接字符串中的任何敏感数据都不安全

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:33:04.100

> 知道它是否 100% 安全？

100% 不安全。设计师更改 = 文件被丢弃。

制作另一个文件，部分，在那里添加你的代码。对本文件中代码的任何更改都是不安全的，并且将会丢失。

等待发生的事故。*

# cakephp - CakePHP 2 个独立的登录表

> ID：11135066
> 
> 赞同：5
> 
> 时间：2012-06-21T09:17:10.973
> 
> 标签：cakephp, authentication, cakephp-2.1

我有一个 Cake 网站，它需要有两个单独的登录名，每个人都有自己的登录表单并查看不同的页面，最好有两个不同的表，因为这两种类型的人之间没有相似之处。

每个登录表单只能由某些人使用，他们永远不会登录到另一个表单，反之亦然。

还有，两个登录表有关系，需要2个表？

这可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T21:50:48.490

首先，添加几个空的自定义身份验证对象。我们将重用 FormAuthenticate 使用的相同逻辑（即使用 POST 数据检查用户的数据库），但只需在对象设置中更改模型（稍后）。

**应用程序/控制器/组件/Auth/ModelOneAuthenticate.php**

```
<?php
App::uses('FormAuthenticate', 'Controller/Component/Auth');

class ModelOneAuthenticate extends FormAuthenticate {
} 
```

**app/Controller/Component/Auth/ModelTwoAuthenticate.php**

```
<?php
App::uses('FormAuthenticate', 'Controller/Component/Auth');

class ModelTwoAuthenticate extends FormAuthenticate {
} 
```

然后告诉您的应用使用这些对象进行身份验证，并告诉它使用什么模型。您还可以在此处自定义字段。在您的 AppController 中：

```
public $components = array(
    'Auth' => array(
        'authenticate' => array(
            'ModelOne' => array(
                'userModel' => 'ModelOne',
                'fields' => array(
                    'username' => 'my_custom_username_field',
                    'password' => 'some_password_field'
                )
            ),
            'ModelTwo' => array(
                'userModel' => 'ModelTwo'
            )
        )
    )
); 
```

第一个身份验证对象将检查`model_ones`表中的用户名 in`my_custom_username_field`和密码 in `some_password_field`，而第二个身份验证对象将`model_twos`使用标准`username`和`password`字段进行检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T08:05:22.163

最简单的方法是为每种登录类型设置不同的会话密钥：

```
if ($loginTypeOne) {
  $this->Auth->authenticate = array(
    'Form'=> array(
      'userModel'=> 'TypeOne',
      )
    );
  AuthComponent::$sessionKey = 'Auth.TypeOne';
} else {
  $this->Auth->authenticate = array(
    'Form'=> array(
      'userModel'=> 'TypeTwo',
      )
    );
  AuthComponent::$sessionKey = 'Auth.TypeTwo';  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T09:21:44.870

当他们必须登录时有一个相似之处：两者都需要输入凭据，通常是用户名/电子邮件和密码。因此，根据用户类型的 users 表和 foo_profiles 表和 bar_profiles 表也应该可以工作。

如果你真的想使用两个完全不同的表和它们的 MVC 堆栈，那么只需使用两个不同的控制器 FooUsers 和 BarUsers 并在每个控制器内部创建一个自定义的登录方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T13:21:31.340

我之前通过编写从 BaseAuthenticate 扩展的自定义身份验证组件来完成此操作。只要他们实现了 authenticate() 方法，那么您就可以对每种不同类型的用户做任何您想做的事情。

在您的 AppController 中，您需要通过执行类似的操作来注册不同的组件

```
 public $components = array(
    "Session",
    "Auth" => array(
        'authenticate'      => array("UserType1", "UserType2"),
    )
); 
```

查看[食谱](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#creating-custom-authentication-objects)以了解其余部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T05:49:59.123

```
You can have a look on this.
Define Model for both login member and then define table which you want to use for the user.
set variable in model.

class SearchedCategory extends AppModel {  
    var $name = 'SearchedCategory';  
    Var useTable = 'give your table name here.';
    var $primaryKey = 'id';

} 
```

# variables - tcl 中的变量范围

> ID：11135070
> 
> 赞同：1
> 
> 时间：2012-06-21T09:17:26.850
> 
> 标签：variables, namespaces, scope, tcl, language-lawyer

我对 TCL 中的变量范围有疑问，我有以下代码：

```
 namespace eval ::hello {
    variable player
    variable name
    namespace export *
}

proc ::hello::setPlay {value} {
    set ::hello::player
}

proc ::hello::getPlay {} {
    return $::hello::player
}

proc ::hello::setName {value} {
    set ::hello::name
}

proc ::hello::getName {} {
    return $::hello::name
}

proc GET_NAME {} {
    #here I have a variable called name as well
    set name "RON"
    return $name
} 
```

在 GET_NAME 中，如果我将变量名设置为“RON”，它会设置命名空间中声明的变量名吗？我可以在 GET_NAME 和命名空间中使用相同的变量名吗？如果我`variable name`在 GET_NAME 中添加这一行，这是否意味着它将设置在名称空间中声明的变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T09:47:27.760

过程（和 lambda 表达式）中的变量默认为该过程的本地变量。如果显式声明为其他东西（例如，with`global`或`upvar`）`variable`，那么它*实际上*将一个局部变量耦合到其他地方的另一个变量，以便作用于一个变量（例如，读取或写入）*就像*作用于另一个变量一样。如果您在其中使用变量名称，`::`则它是对命名空间变量（全局命名空间只是`::`）的引用，该变量可能相对于当前命名空间或全局命名空间进行解析，具体取决于名称是否以*开头*`::`。（把它想象成文件名中的斜线。）

在里面执行代码时`namespace eval`，总是`variable`在使用变量之前先声明变量。这避免了全局变量阴影的问题，这些问题非常可怕，但由于某些现有代码依赖于它们而必须保留。（从技术上讲，您不需要这样做，`namespace eval ::`因为全局变量不会影响自己，但这不会造成伤害。）

* * *

处理细节：

> 在 GET_NAME 中，如果我将变量名设置为“RON”，它会设置命名空间中声明的变量名吗？

不，不是你写的代码。

> 我可以在`GET_NAME`和命名空间中使用相同的变量名吗？

您可以在两个地方使用相同名称的变量。这可能会令人困惑，但它总体上限制了惊喜。

> 如果我在 中添加这一行`variable name`，`GET_NAME`这是否意味着它将设置名称空间中声明的变量？

是的。正是这样。（它将两者精确地结合在一起。）

# c++ - 返回一个指针

> ID：11135077
> 
> 赞同：5
> 
> 时间：2012-06-21T09:17:45.373
> 
> 标签：c++, pointers

我不明白这个例子是如何工作的：

```
double * GetSalary()  {
  double salary = 26.48; 
  return &salary;
}

main() {
    cout << *GetSalary();  //prints 26.48

} 
```

`salary`是 中的局部变量`GetSalary()`，因此从函数返回后，此单元格可能会被另一个函数覆盖。我看不出返回一个指向局部变量的指针（不在堆上实例化）是如何工作的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-21T09:18:25.120

它不起作用。这是未定义的行为。它似乎可行，因为“正确的行为”是“任何可能的行为”的子集。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-21T09:19:35.040

您遇到了未定义的行为，这意味着**任何事情都可能发生**。包括看起来工作。

在函数之外，返回指针是悬空的（即它指向的内存是无效的）。

为什么它似乎工作归结为实施。很可能内存没有被清除。因此，尽管您无权访问返回指针指向的内容，但在该内存中`26.48`仍然存在。但这只是偶然。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T09:43:13.873

```
double * GetSalary()  
{   
     double salary = 26.48;    
     return &salary; 
}  
double dummy_function()
{
     double a = 1.1;
     double b = 2.2;
     double c = 0 , d = 0;

     c = a + b - d;
     return c;  
}

main() 
{     
     double *a;
     a = GetSalary();
     cout << dummy_function();
     cout << *a;  //this time it wont print 26.48
} 
```

因为函数堆栈已被第二个函数调用覆盖`dummy_function`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T09:19:57.587

它不起作用，它取消引用不再有效的指针。指向的内存恰好保持预期值并不是程序作为一个整体“工作”或正确的标志。

要了解它为什么会起作用，您需要分析发生的堆栈帧移位的确切模式，这有点烦人，并且非常依赖于编译器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T09:23:43.397

它是一个[悬空指针](http://en.wikipedia.org/wiki/Dangling_pointer)，它调用[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。
在某些系统上，它可能会使您的应用程序崩溃，而在其他系统上，它可能会正常工作。但无论哪种方式，你都不应该这样做。
看到[这个类似的 SO 帖子](https://stackoverflow.com/questions/5278859/c-dangling-pointer-question)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T17:42:19.660

这也有效，但更安全。它在多线程程序中无法正常工作。

```
double * GetSalary()  {
  static double salary = 26.48; 
  return &salary;
} 
```

# android - 在 Android 上的 AlertDialog 消息中添加链接

> ID：11135078
> 
> 赞同：0
> 
> 时间：2012-06-21T09:17:51.993
> 
> 标签：android, android-maps, android-alertdialog, android-dialog

下面是**警报**对话框的代码。我在谷歌地图中使用它。我想在消息末尾添加“查看更多”**超链接**。我不知道到目前为止我错过了什么以使链接正常工作。提前感谢您的帮助。

```
@Override
    protected boolean onTap(int index) {
        // TODO Auto-generated method stub
        OverlayItem item = pinpoints.get(index);
        AlertDialog.Builder dialog = new AlertDialog.Builder(c);
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet()+"\n\n"+Html.fromHtml("<a href=\'http://www.nip.org.np\'>See more</a>"));
        dialog.show();
        return true;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:45:38.097

```
@Override
protected boolean onTap(int index) {
    // TODO Auto-generated method stub
    OverlayItem item = pinpoints.get(index);
    AlertDialog.Builder dialog = new AlertDialog.Builder(c);
    dialog.setTitle(item.getTitle());
    dialog.setMessage(item.getSnippet()+"\n\n"+Html.fromHtml("<a href=\'http://www.nip.org.np\'>See more</a>"));
    dialog.show();

    try {
        TextView tv = (TextView) dialog.getWindow().findViewById(android.R.id.message);
        if (tv != null) tv.setMovementMethod(LinkMovementMethod.getInstance());
    } catch (Exception e) {}

    return true;

} 
```

# iphone - 如何使用 iTunes 在 iPhone 上安装 xxx.app.dSYM 文件

> ID：11135082
> 
> 赞同：1
> 
> 时间：2012-06-21T09:18:03.280
> 
> 标签：iphone, xcode, ipad, itunes

我已分发 myapp.app.dSYM 和 myapp.mobileprovision 文件，是否可以使用 iTunes 使用这两个文件在设备上安装应用程序？如是。请提及如何？

注意：我尝试将 myapp.app.dSYM 和 myapp.mobileprovision 拖放到 iTunes 上，只有 myapp.mobileprovision 安装在设备上（设置>常规>配置文件），但 myapp.app.dSYM 未在同步应用程序中列出iTunes。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:26:09.427

要制作可安装的临时包，您应该存档您的项目，然后在管理器中选择存档并按分发按钮，然后选择“保存用于企业或临时部署”，对其进行签名，您将获得 ipa 文件。将此 ipa 文件拖到 iTunes 库并与您的设备同步以安装它。

ps dSYM 文件，它只是象征崩溃日志的调试器信息。

# wpf - Combobox ItemsSource Binding (MVVM) - 如何重置 ItemsList

> ID：11135083
> 
> 赞同：1
> 
> 时间：2012-06-21T09:18:04.373
> 
> 标签：wpf, data-binding, combobox, itemssource

我有一个将 ItemsSource 绑定到 ObservableCollection 的组合框。RadioButton 允许用户选择一种模式。对于每种模式，组合框中应该有一个专用的不同列表。

我使用 Observablecollection 的问题是，一旦公共 observableCollection 被初始化，修改它只能通过 Clear all 并逐项添加新列表。

这是非常低效的，并且会导致我对所选项目的验证出现问题。

您能否建议另一种方法，使我可以重置项目源，以便无需删除/添加即可在 UI 中刷新它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:26:07.550

一个非常基本的方法：

```
class VM
{
  private ObservableCollection mode1;
  private ObservableCollection mode2;

    //view binds to this
  public ObservableCollection<T> X { get; private set; }

    //changing radiobutton invokes this
  public void ChangeMode( mode )
  {
    if( mode == 1 )
      X = mode1;
    else if( mode == 2 )
      X = mode2;
    else
      X = null;
  }
} 
```

没有测试过，但应该可以；如果更改模式后 UI 中没有更新，则应`RaisePropertyChanged( ... )`在 ChangeMode 返回之前调用 X。此外，如果您不向列表中添加/删除，则实际上不需要 ObservableCollection，您可以只使用`List<T>`

# ruby - 尽管有新的卸载/安装程序，但仍使用错误的版本

> ID：11135084
> 
> 赞同：3
> 
> 时间：2012-06-21T09:18:07.370
> 
> 标签：ruby, rake, version, redmine

我正在尝试在服务器上安装 RedMine。

[在此处解释](http://www.redmine.org/projects/redmine/wiki/RedmineInstall)的过程中，我应该运行

```
rake generate_secret_token 
```

但是，我收到此错误：

```
(in /home/var/redmine)
rake aborted!
uninitialized constant Rake::DSL
/home/var/redmine/Rakefile:7
(See full trace by running task with --trace) 
```

经过一些研究，我发现 rake 0.8.7 应该有这个问题（至少，我是这么理解的）并且我应该使用 rake 0.9.2.2

我尝试添加

```
gem 'rake', '0.9.2.2' 
```

到我的 Gemfile。

我检查了

```
rake --version 
```

并得到

```
rake, version 0.8.7 
```

我跑了

```
gem uninstall rake 
```

根据输出，哪个成功了。

然后我跑了

```
gem install rake -v=0.9.2.2 
```

输出是

```
Successfully installed rake-0.9.2.2
1 gem installed
Installing ri documentation for rake-0.9.2.2...
Installing RDoc documentation for rake-0.9.2.2... 
```

但是，当然后调用

```
rake --version 
```

我仍然得到

```
rake, version 0.8.7 
```

我还尝试添加

```
gem 'rake', '0.8.7' 
```

到我的 Gemfile 进行 redmine。但是，然后我在运行 rake 时收到此响应

```
You have requested:
rake = 0.8.7

The bundle currently has rake locked at 0.9.2.2.
Try running `bundle update rake` 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:30:03.637

我可以按照以下步骤解决这个奇怪的问题：

```
gem uninstall rake 
```

然后

```
bundle update rake 
```

这给了我 rake 已经是最新的响应，但我仍然在此处列出 - 以防万一。

然后

```
gem install rake -v=0.8.7 
```

此外，在我的 Gemfile 中，我有这个配置

```
source 'http://rubygems.org'
gem 'rails', '3.2.6'
gem 'rake', '0.8.7' 
```

（以该顺序）

完成所有这些后，我能够运行

```
rake generate_secret_token 
```

成功地。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:17:01.880

当使用同一个 gem 的多个版本时，您可以使用`_version_`参数指定使用哪个版本，例如。`rake _0.9.2.2_ --version` （见`gem help install`）

要使用 Gemfile 的版本，您可以在命令前加上`bundle exec`，例如。[（从http://gembundler.com/](http://gembundler.com/)`bundle exec rake --version`阅读“入门” ）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T18:35:16.690

基本上不同的不兼容版本的 rake 会产生问题。这为我解决了它：

```
/var/lib/gems/1.8/bin/rake generate_secret_token 
```

# php - 在不知道子字符串的情况下计算单词列表中子字符串的唯一外观？

> ID：11135085
> 
> 赞同：0
> 
> 时间：2012-06-21T09:18:09.367
> 
> 标签：php, count, preg-match, substring, preg-match-all

***我尝试计算单词列表中子字符串的唯一外观*** 因此检查单词列表并检测是否在任何单词中存在基于多次出现的最小字符的子字符串并计算它们。我不知道任何子字符串。

这是一个可行的解决方案，*您知道子字符串*，但如果*您不知道*怎么办？单词基于的最小字符数。

将找到“Book”是单词子串的所有单词。具有以下 php 功能。

想要的结果：

```
book count (5)
stor count (2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:08:06.310

这是我的第一个近似值：未完成，未经测试，至少有 1 个错误，并且是用 eiffel 编写的。好吧，我不会为你做所有的工作。

```
deferred class
    SUBSTRING_COUNT
feature
    threshold : INTEGER_32 =5

    biggest_starting_substring_length(a,b:STRING):INTEGER_32
        deferred
    end

    biggest_starting_substring(a,b:STRING):STRING
    do
        Result := a.substring(0,biggest_starting_substring_length(a,b))
    end

    make_list_of_substrings(a,b:STRING)
    local
        index:INTEGER_32
        this_one: STRING
    do
        from
            a_index := b_index + 1
        invariant
            a_index >=0 and a_index <= a.count
        until
            a_index >= a.count
        loop
            this_one := biggest_starting_substring(a.substring (a_index, a.count-1),b)
            if this_one.count > threshold then
                list.extend (this_one)
            end
        variant
            a.count - a_index
        end
    end -- biggest_substring

    list : ARRAYED_LIST[STRING]

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:21:38.447

给定一个长度为 100 的字符串

```
book bookstore bookworm booking book cooking boring bookingservice.... ok
0123456789...                                                     ... 100 
```

你的算法可能是：

调查来自不同起点和子串长度的子串。您从 0 开始，长度为 1-100 的所有子字符串，因此：0-1, 0-2, 0-3,... 并查看这些子字符串中的任何一个是否在整个字符串中出现多次。从增加的位置开始遍历字符串，搜索从 1 开始的所有子字符串，即 1-2、1-3、1-4，... 等等，直到达到 99-100。

保留所有子字符串及其出现次数的表格，您可以对它们进行排序。

您可以通过指定最小和最大长度进行优化，这会显着减少搜索次数和命中率。此外，一旦您找到一个子字符串，就将它们保存在一组搜索到的子字符串中。如果您再次遇到子字符串，请跳过它。（即`book`，您已经计算过的命中数在您命中下一个子字符串时不应再次计算`book`）。此外，您永远不必搜索长度超过总字符串一半的字符串。

对于示例字符串，您可能会针对字符串的唯一性运行附加测试。你会有

```
o              x ..
oo             x  7
bo             x  7
ok             x  6 
book           x  5
booking        x  2
bookingservice x  1 
```

忽略短于 3 的刺（并且长于总文本字符串的一半），你会得到

```
book           x  5
booking        x  2
bookingservice x  1 
```

这已经是一个相当合理的结果。

[编辑] 这显然会查看所有字符串，而不仅仅是自然词。

[编辑] 通常我不喜欢为 OP 编写代码，但在这种情况下，我自己有点感兴趣：

```
$string = "book bookshelf booking foobar bar booking ";
$string .= "selfservice bookingservice cooking";

function search($string, $min = 4, $max = 16, $threshhold = 2) {
    echo "<pre><br/>";
    echo "searching <em>'$string'</em> for string occurances ";
    echo "of length $min - $max: <br/>";

    $hits = array();
    $foundStrings = array();

    // no string longer than half of the total string will be found twice
    if ($max > strlen($string) / 2) {
        $max = strlen($string);
    }

    // examin substrings:
    // start from 0, 1, 2...
    for ($start = 0; $start < $max; $start++) {

        // and string length 1, 2, 3, ... $max
        for ($length = $min; $length < strlen($string); $length++) {

            // get the substring in question, 
            // but search for natural words (trim)
            $substring = trim(substr($string, $start, $length));

            // if substring was not counted yet, 
            // add the found count to the hits
            if (!in_array($substring, $foundStrings)) {
                preg_match_all("/$substring/i", $string, $matches);
                $hits[$substring] = count($matches[0]);
            }
        }
    }

    // sort the hits array desc by number of hits
    arsort($hits);

    // remove substring hits with hits less that threshhold
    foreach ($hits as $substring => $count) {
        if ($count < $threshhold) {
            unset($hits[$substring]);
        }
    }

    print_r($hits);
}

search($string);

?> 
```

注释和变量名应该让代码自己解释。在您的情况下，$string 将用于读取文件。此示例将输出：

```
searching 'book bookshelf booking foobar bar booking selfservice 
bookingservice cooking' for string occurances of length 4 - 16: 
Array
(
    [ook] => 6
    [book] => 5
    [boo] => 5
    [bookin] => 3
    [booking] => 3
    [booki] => 3
    [elf] => 2
) 
```

让我知道你是如何实现它的:)

# tcl - 是否有任何 Tcl 函数可以自动添加转义字符？

> ID：11135090
> 
> 赞同：1
> 
> 时间：2012-06-21T09:18:24.457
> 
> 标签：tcl, expect

是否有任何 Tcl 函数可以自动将转义字符添加到字符串？

例如，我有一个正则表达式

```
"[xy]" 
```

调用该函数后，我得到

```
"\[xy]" 
```

再次被调用后，我得到

```
"\\\[xy]" 
```

我记得有一些脚本语言有这样的功能，但我不记得它是哪种语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:37:33.453

添加“必要”的转义字符的常用方法是使用`list`（`%`是我的 Tcl 提示符）：

```
% set s {[xy]}
[xy]
% set s [list $s]
{[xy]}
% set s [list $s]
{{[xy]}} 
```

如果可以，该`list`命令宁愿不理会，如果可以逃脱，则用大括号括起来，否则使用反斜杠（因为反斜杠真的不可读）。

如果你真的需要反斜杠，`string map`或者`regsub`会做你需要的。例如：

```
set s [regsub -all {\W} $s {\\&}] 
```

# javascript - 在 history.pushState 之后返回时恢复原始页面

> ID：11135093
> 
> 赞同：2
> 
> 时间：2012-06-21T09:18:40.963
> 
> 标签：javascript, browser-history

我`history.pushState`用来在用户提交表单后创建一个“假”结果页面。但是，当我向后导航时，可见页面保持不变。什么是获取原始页面的简单方法 - 未经javascript修改，但填写表格 - 在按下后？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:24:18.567

您需要观察当前地址的变化并自己做出反应。

请参阅此示例： [https ://developer.mozilla.org/en/DOM/window.onpopstate](https://developer.mozilla.org/en/DOM/window.onpopstate)

另请查看文档：

[https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history/](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-29T16:12:05.840

您必须`onpopstate`手动处理事件并重新加载上一页：

```
window.onpopstate = function() {
    location.reload();
}; 
```

# jquery - jQuery UI 可选择未选择

> ID：11135100
> 
> 赞同：0
> 
> 时间：2012-06-21T09:18:53.377
> 
> 标签：jquery, jquery-ui, jquery-ui-selectable

好的，这可能有点长，所以请坚持下去！

我在 HTML 中有一个时间表网格，显示时段/天数，每个单元格都设置为“可选”类。

然后我使用 jQuery UI Selectable 让我只选择设置为可选的单元格（以停止选择表头）。完成选择后，javascript 会将隐藏字段添加到表单中，以供 POST 获取。

这是错误出现的地方。

如果您拖动多个单元格并单击 BOOK，它会正确传递它们（选择 3 个单元格并通过隐藏输入传递）。如果您拖动多个单元格，然后单选一个不同的单元格并单击 BOOK，它似乎会选择以前的多项选择。

现在更奇怪的是，它不会在 Firefox 或我的 IE9 副本中执行此操作，但在其他 IE9 副本上它确实会导致此错误。由于我们无法真正使用 FF 或其他任何东西的教育环境，我需要它在 IE8/9/10 上工作。

这是我拥有的 JavaScript 位......

诚然，它们可能看起来很乱，我以前从未真正使用过 JavaScript，但所选函数可以按我的意愿工作。似乎导致问题的是未选择的功能。

```
$( "#selectable" ).selectable({ 
    filter: ".selectable", 
    selected: function() { 
        var count = 0;
        $( ".ui-selected", this ).each(function() { 
            var data = $(this).data(); 
            $(data).each(function(key, value){ 
                var room_id = document.createElement("input"); 
                room_id.setAttribute("type", "hidden"); 
                room_id.setAttribute("name", "booking["+count+"][room]"); 
                room_id.setAttribute("value", data.room);
                room_id.setAttribute("class", "js-added");  
                document.getElementById("add").appendChild(room_id);
                var date_id = document.createElement("input"); 
                date_id.setAttribute("type", "hidden"); 
                date_id.setAttribute("name", "booking["+count+"][date]"); 
                date_id.setAttribute("value", data.date); 
                date_id.setAttribute("class", "js-added");
                document.getElementById("add").appendChild(date_id);
                var period_id = document.createElement("input"); 
                period_id.setAttribute("type", "hidden"); 
                period_id.setAttribute("name", "booking["+count+"][period]"); 
                period_id.setAttribute("value", data.period);
                period_id.setAttribute("class", "js-added"); 
                document.getElementById("add").appendChild(period_id); 
                var day_id = document.createElement("input"); 
                day_id.setAttribute("type", "hidden"); 
                day_id.setAttribute("name", "booking["+count+"][day]"); 
                day_id.setAttribute("value", data.day);
                day_id.setAttribute("class", "js-added"); 
                document.getElementById("add").appendChild(day_id); 
                var bookable_id = document.createElement("input"); 
                bookable_id.setAttribute("type", "hidden"); 
                bookable_id.setAttribute("name", "booking["+count+"][bookable]"); 
                bookable_id.setAttribute("value", data.bookable);
                bookable_id.setAttribute("class", "js-added"); 
                document.getElementById("add").appendChild(bookable_id);
                var bookable_id_delete = document.createElement("input"); 
                bookable_id_delete.setAttribute("type", "hidden"); 
                bookable_id_delete.setAttribute("name", "booking["+count+"][bookable]"); 
                bookable_id_delete.setAttribute("value", data.bookable);
                bookable_id_delete.setAttribute("class", "js-added"); 
                document.getElementById("delete").appendChild(bookable_id_delete);
                var booking_id_delete = document.createElement("input"); 
                booking_id_delete.setAttribute("type", "hidden"); 
                booking_id_delete.setAttribute("name", "booking["+count+"][booking_id]"); 
                booking_id_delete.setAttribute("value", data.bookingid);
                booking_id_delete.setAttribute("class", "js-added"); 
                document.getElementById("delete").appendChild(booking_id_delete);
                var bookable_id_edit = document.createElement("input"); 
                bookable_id_edit.setAttribute("type", "hidden"); 
                bookable_id_edit.setAttribute("name", "booking["+count+"][bookable]"); 
                bookable_id_edit.setAttribute("value", data.bookable);
                bookable_id_edit.setAttribute("class", "js-added"); 
                document.getElementById("edit").appendChild(bookable_id_edit);
                var booking_id_edit = document.createElement("input"); 
                booking_id_edit.setAttribute("type", "hidden"); 
                booking_id_edit.setAttribute("name", "booking["+count+"][booking_id]"); 
                booking_id_edit.setAttribute("value", data.bookingid);
                booking_id_edit.setAttribute("class", "js-added"); 
                document.getElementById("edit").appendChild(booking_id_edit);
                count = count + 1;
            }); 
        }); 
    }, 
    unselected: (function(){
        $('div').removeClass('ui-selected');
        $(".js-added").remove();
    })
}); 
```

如果需要页面中的任何其他代码，请告诉我。

只是为了略过它，如果我拖动 Mon-P1 / Mon-P2 / Mon-P3 / Mon-P4 并单击 BOOK，它显示它们是正确的。如果我拖过相同的 4 但然后单选 Tue-P1 （应该取消选择所有其余部分并选择它），它会给我：

> 周二-P1 / 周一-P2 / 周一-P3 / 周一-P4

就好像它只取消了第一个元素，而不是其余的。是否需要类似`$(".ui-selected").each()`函数的东西来遍历所有条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:35:18.017

奇怪的是，这个问题的答案是 IE8/9 在 Intranet 站点上强制执行兼容性视图。关闭此功能后，多选工作正常。我最终不得不添加内容“IE = 9”的元标题以使其工作，edge 和 IE = 8 没有做任何事情。
不确定这是否会影响其他 jquery 的东西，但是如果你有问题，兼容性视图是一个不错的选择

# validation - Struts 验证操作后重新加载灯箱

> ID：11135103
> 
> 赞同：0
> 
> 时间：2012-06-21T09:18:57.967
> 
> 标签：validation, popup, struts, refresh, lightbox

在struts验证失败后，我想加载一个带有错误的灯箱（包含一个表单）。我的问题是当我使用 forward 时，会加载一个包含错误的页面。这并不是我真正想要的。我想在同一页面中有灯箱，但只刷新错误。

我正在使用 Struts1 (1.3)，如果有任何允许这样做的功能，那就太好了。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:54:11.350

经过一些测试，我最终认为如果不结合 AJAX 技术是无法加载灯箱的。我最终要做的是在验证表单时调用 javascript 函数。如果您有任何其他解决方案，我将很乐意考虑。

谢谢 ！

# java - HQL IN 子句是否只接受有限数量的值（MySQL 数据库）？

> ID：11135104
> 
> 赞同：1
> 
> 时间：2012-06-21T09:18:58.503
> 
> 标签：java, mysql, hql, limit, sql-in

这是我的*简化*数据库：

```
user_post
- id
- post_id (FK)

post
- id
- link_id (FK)

link
- id 
```

我有一个列表，`user_post`我想为他们每个人`link`都链接到。

目前，我这样做是这样的：

```
SELECT userPost.post.link FROM UserPost userPost WHERE userPost IN (:userPosts) 
```

效果很好，但也许以后，我会得到大量的`user_post`，因此子句中会有很多值`IN`（100 < x < 5000+）。

有`IN`限制吗？还有其他方法吗？之前，我是这样做的：

```
for (UserPost userPost : user.getUserPosts()) {
    Link link = userPost.getPost().getLink();
    //
} 
```

但是上面的解决方案确实需要很多时间才能执行，所以我正在寻找一个更优化的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:32:04.283

是[的，IN 子句是有限的](http://dev.mysql.com/doc/refman/5.6/en/comparison-operators.html#function_in)：

> IN 列表中值的数量仅受 max_allowed_pa​​cket 值的限制。

在 Oracle 中，限制设置为 1000 个元素。

您可以在与用户帖子相同的查询中加载链接，而不是选择用户帖子，然后遍历它们以获取他们的链接或发出另一个查询来获取它们：

```
select userPost from UserPost userPost
left join fetch userPost.post post
left join fetch post.link link; 
```

此查询将立即加载所有内容，并且迭代用户发布并使用他们的链接`userPost.getPost().getLink()`不会触发任何额外的查询。

# android - Toast 未显示 android robotium 测试

> ID：11135105
> 
> 赞同：0
> 
> 时间：2012-06-21T09:18:58.960
> 
> 标签：android, robotium, android-testing

我想在我的应用程序中测试“添加新项目”活动。当用户错误地填写数据然后按 OK 按钮时 - 将显示 toast（问题列表）。我的问题是：如何检查未显示吐司？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-11T15:39:10.717

我知道这是一篇旧帖子，但以防万一有人遇到这个问题，这是一个更好的方法：solo.waitForText(text); // 把 toast 文本放在这里

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-28T01:17:05.970

```
 //wait up to a second for the toast
    Date date = new Date();
    TextView toast;
    long elapsed;
    do{
        elapsed = new Date().getTime() - date.getTime();
        toast = (TextView)solo.getView(android.R.id.message);
    }while(elapsed<1000&&toast!=null);

    assertEquals(toast.getText().toString(), "Your ticket(s) has been purchased successfully"); 
```

这是 Aleksandr M 给出的答案的扩展，以防 Toast 需要一段时间才能出现。例如，如果 toast 是耗时操作的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:21:36.430

只需分配一个`flag`变量来处理`onClick`您的`OK`Button 事件，该事件发出`Toast`. 将其设置`flag`为`true`，然后检查，如果`flag`是`false`，`Toast`则从未显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-16T07:30:23.583

这个对我有用

```
TextView toast = (TextView) solo.getView(android.R.id.message);
assertEquals("toast is not showing", toast.getText().toString(), solo.getString(R.string.error_invalid_phone)); 
```

# php - MySQL：将表 B 中的多条记录链接到表 A 的一行中的单个记录上

> ID：11135114
> 
> 赞同：3
> 
> 时间：2012-06-21T09:19:38.133
> 
> 标签：php, mysql, sql

我正在用 PHP/MySQL 设计一个票务系统。每张票代表“票”表中的一行。用户可以为每张工单添加多个“评论”。

查看票证时，我只是在“评论”表上执行 SQL 查询，以选择链接到相应票证 ID 的所有评论

但是，现在我必须设计一个搜索页面，它返回任何匹配的票证并立即显示（部分，例如最后 5 个）他们的链接评论。

我通过执行我在单票视图页面中使用的相同 SQL 查询来实现这一点，但对搜索查询中的每个匹配行重复此操作。因此，如果您有 1500 个匹配行，这意味着“comments”表上有 1500 个 SQL 查询，是的，效率不高……

现在我想知道：有没有办法将评论表连接到门票表，但将评论表中的多行“压缩”成一列？

我正在考虑对评论行执行 CONCAT()，将它们作为逗号分隔值返回，然后我可以在 php 中再次explode() 以获取包含我对每张票的所有评论的数组。但这是最有效的方法还是有更好的方法？

**编辑：**请记住，还没有任何评论的票也应该由查询返回

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:23:44.343

嗯，是的，很多人容易遇到的典型的“set-grouping”问题……

当我们谈论将*多*条记录（评论）连接到一行（事件）时，使用 MySQL 可靠地（如考虑可变数量的行）执行此操作的唯一方法是使用`GROUP_CONCAT()`which 将跨一个或多个行的信息分组到一个单个分隔的字符串。

您还可以使用名为 的功能将信息分组到可变数量的实际*列*`PIVOT`中，但不幸的`PIVOT`是，在 MySQL 中不可用。

无论哪种方式，您都需要一些应用程序逻辑（爆炸等）来格式化和显示每张工单的评论子集。

至于 SQL，您可以执行以下操作：

```
SELECT
    a.ticket_id,
    a.ticket_title,
    a.date_created,
    SUBSTRING_INDEX(GROUP_CONCAT(CONCAT(LEFT(b.comment_txt, 150), '...', ':::', b.date_posted) ORDER BY b.date_posted DESC SEPARATOR '|||'), '|||', 5) AS comment_list
FROM
    tickets a
LEFT JOIN
    comments b ON a.ticket_id = b.ticket_id
WHERE
    a.ticket_title LIKE '%search_term%'
GROUP BY
    a.ticket_id 
```

除了...中的第 4 列之外，这里的所有内容都相当简单，`SELECT`所以让我们分解一下：

在最里面，我们有`CONCAT()`. 它的作用是将每个评论的字段连接在一起，以便您能够获得每个评论的多个属性（例如日期、实际文本，也许还有 ID 等）。

在`CONCAT()`单独之后，单个评论可能看起来像：

```
Lorem Ipsum dolor sit amet consecteur...:::2012-06-21 00:00:00 
```

这`:::`是分隔`explode()`每个属性的分隔符之一。

向外移动，`GROUP_CONCAT()`然后将每一***行***连接在一起。在这一点上，我们基本上是连接连接。`ORDER BY b.date_posted`此外，由于在函数内，最近的注释出现在字符串的开头。

评论列表可能如下所示：

```
Lorem Ipsum dolor sit amet consecteur...:::2012-06-21 00:00:00|||Cras aliquam neque quam, eget facilisis nulla...:::2012-06-18 00:00:00 
```

`|||`是您用来分隔每条评论的分隔符。

再往前走，`SUBSTRING_INDEX`只选择前五个评论。由于我们按最近的优先排序评论，因此基本上只选择每张票中的五个最近的评论。

然后在您的 PHP 代码中，您可以大致执行以下操作：

```
foreach($tickets as $ticket)
    {
        // First check if the ticket has comments. Value will be NULL if not.
        if(!empty($ticket['comment_list']))
        {
            foreach(explode('|||', $ticket['comment_list']) as $comment)
            {
                $attributes = explode(':::', $comment);

                $comment_preview = $attributes[0]; // Get first attribute
                $date_posted = $attributes[1]; // Get second attribute
            }
        }
    } 
```

我使用这些特定的分隔符是因为逗号可以出现在标题等字段中，并且您不希望脚本将字符串分隔在错误的位置。这种错误分隔的可能性是使用 的主要缺点之一`GROUP_CONCAT()`，因此您必须根据它们出现在字段值中的可能性来决定最好使用哪些分隔符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T11:38:23.667

Zane Bien 回答了这个`CONCAT`问题，我不会评论它，因为没有太多要补充的，但你也问这是否是最有效的方法，所以我会选择这个。

我真的不喜欢这个`CONCAT`解决方案。这不是 SQL 的哲学，你永远不知道用户会在评论区写什么。

就 SQL 而言，正确的做法是：

```
SELECT
    tickets.*,
    comments.*
FROM tickets
LEFT JOIN comments ON comments.ticket_id = tickets.id
WHERE tickets.title LIKE '%whatever%'; 
```

然后在 PHP 中，您只需遍历结果集并构建输出。请注意，LEFT JOIN 将正确地返回票证而不加评论。

如果你感到有点不安——**但不应该！**- 在每条线路上都有票信息，您可以将查询拆分为 2：

```
SELECT
    tickets.*
FROM tickets
WHERE tickets.title LIKE '%whatever%'; 
```

和

```
SELECT
    comments.*
FROM comments
INNER JOIN tickets ON comments.ticket_id = tickets.id
WHERE tickets.title LIKE '%whatever%'; 
```

这意味着在应用程序方面需要做更多的工作，因为您必须将评论链接回票证。

我的建议：进行多合一查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T09:39:12.740

评论必须有工单 ID 的记录才能关联，因此您应该能够从工单中获取 ID 并使用 JOIN 来获取评论。

我正在用 Wordpress DB 做一些非常相似的事情，所以我只能通过那个布局。在 wordpress 中，帖子有一个与评论相关的 ID。

所以你应该能够用我认为的一个查询来做到这一点。也就是说，如果表格的设计允许这种类型的关联——它应该这样做。

```
SELECT tickets.ID, tickets.title, tickets.content, comments.content 
FROM tickets
INNER JOIN comments ON comments.ticket_id = tickets.ID
WHERE tickets.content LIKE '%the search term%'
ORDER BY comments.comment_date 
```

我只掌握了 SQL 的功能，所以这里的其他人可能会以正确的方式纠正我，但我认为它应该可以工作。此查询的实际搜索元素仅用于示例，我不知道您实际搜索的是什么。

修改：

```
$query = "SELECT tickets.ID ticket_id, tickets.title title, tickets.content content
          FROM tickets
          WHERE tickets.content LIKE '%the search term%'
          AND tickets.title LIKE '%the search term%'";

$tickets = $db->fetch_array($query);

foreach ($tickets as $ticket) {
    echo "<h1>$ticket['title']</h1>";
    echo "<h1>$ticket['content']</h1>";

    $query = "SELECT comments.title title, comments.content content
              FROM comments
              WHERE comments.ID = {$ticket['ticket_id']}
              ORDER BY comments.date DESC
              LIMIT 5";

    $comments = $db->fetch_array($query); 

    if ($comments) {

       echo "<div class="comments">";

       foreach($comments as $comment) {
          echo "<div class="comment">";
          echo "<h1>$comment['title']</h1>";
          echo "<h1>$comment['content']</h1>";
          echo "</div>";
       }

       echo "</div>";

    }
} 
```

# javascript - Dojo FilteringSelect - 将下拉列表中的特定选项动态标记为禁用（灰显且不可选择）

> ID：11135124
> 
> 赞同：3
> 
> 时间：2012-06-21T09:20:09.607
> 
> 标签：javascript, dojo, dijit.form

我有一个从`<select>`.

如何使一个（未选择的）选项动态禁用？

谢谢

**UPD**：当 PARSE 创建 FilteringSelect 时，是否可以删除此元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:44:23.970

看起来 __SelectOption 上有一个“禁用”属性。当您传入选项时，请尝试将“禁用”设置为 true。

```
new dijit.form.Select({
    id: 's2',
    options: [
        {label: 'this is disabled', value: 1, disabled:true},
        {label: 'this is enabled', value: 1}
    ]
} 
```

**见[http://jsfiddle.net/ur87d/](http://jsfiddle.net/ur87d/)**

编辑：你说动态......所以你会想要使用`updateOption`or `removeOption`。

```
dojo.ready(function() {
    var s2 = new dijit.form.Select({
        id: 's2',
        options: [{label: 'one', value: 1},{label: 'two', value: 2}]
    });
    s2.updateOption({label: 'one-updated', value: 1, disabled: true});
    s2.placeAt(dojo.body());
}); 
```

**见[http://jsfiddle.net/ur87d/1/](http://jsfiddle.net/ur87d/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:26:20.237

禁用选项并不容易，但使其不可见却很容易。

将您的 FilterSelect 绑定到 ItemFileWriteStore。选项来自商店中的物品。

您可以从商店动态添加/删除项目。

这样您的禁用选项就不会出现在下拉列表中。

# web-services - 服务器超时问题

> ID：11135127
> 
> 赞同：0
> 
> 时间：2012-06-21T09:20:19.553
> 
> 标签：web-services, apache, tomcat

我正在使用`tk10x`服务器来侦听来自服务器`GPS`上设备的一些请求`OpenGTS`。默认情况下，此 tk10x 的超时时间为 60000 毫秒。我想删除这个超时的东西我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T05:53:39.253

以下是来自：[http ://www.opengts.org/FAQ.html 的一些文本](http://www.opengts.org/FAQ.html)

### 对于雄猫

> 这可以在 Tomcat 目录“$CATALINA_HOME/conf/web.xml”中找到的 Tomcat 默认“web.xml”文件中进行更改。以下是将超时设置为 30 分钟的“web.xml”文件部分：

```
 <session-config>
     <session-timeout>30</session-timeout>
 </session-config> 
```

> 您可以将此值更改为任何所需的时间长度。更改此值后应重新启动 Tomcat。（注意：此值设置过大可能会导致已登录但未实际使用系统的用户消耗过多资源）。

### 选择

> 这可以通过将 TCP 超时值设置为“0”在“dcservers.xml”文件（或“dcservers/dcserver_XXXXX.xml”文件，其中 XXXXX 是 DCS id）中进行配置，如下所示：

```
<Property key="tcpIdleTimeoutMS">0</Property>
<Property key="tcpPacketTimeoutMS">0</Property>
<Property key="tcpSessionTimeoutMS">0</Property> 
```

> 这将导致 DCS（设置了上述属性的位置）始终保持 TCP 会话打开。（注意：每个连接的 TCP 连接都会消耗系统资源 - 内存、线程、文件句柄等。拥有许多此类连接的 TCP 会话可能会显着限制可以连接到服务器的设备数量）。

# xcode - 删除 Settings.bundle 仍显示在设备上

> ID：11135131
> 
> 赞同：3
> 
> 时间：2012-06-21T09:20:26.510
> 
> 标签：xcode, settings.bundle

我从我正在开发的应用程序中删除了 settings.bundle，因为它不再需要了。但是，重新安装时它仍会添加到设备的设置中。但是模拟器没有按预期添加设置包。

***这是我到目前为止所做的。***

1.  从 xcode 中删除了 settings.bundle（文件只存在于垃圾桶中）。
2.  从 Build Phases 部分中删除了 settings.bundle。
3.  重置模拟器并重新安装应用程序（没有 settings.bundle 预期）
4.  从 iPhone 设备卸载应用程序并重新安装应用程序（**仍然显示 settings.bundle！我不想要这个！**）

有什么我错过了还是xcode很愚蠢？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:37:50.900

使用 Command+Shift+k 清理所有目标。似乎模拟器版本已正确重新构建，但是当您构建 arm 版本时，XCode 看不到您所做的更改。

# mysql - MySQL Workbench 导出的 CREATE 脚本在另一台计算机上存在语法错误

> ID：11135133
> 
> 赞同：1
> 
> 时间：2012-06-21T09:20:47.203
> 
> 标签：mysql, syntax, limit, mysql-workbench, procedure

我在我的计算机上创建了一个数据库，安装了**MySQL 5.5**和**MySQL Workbench 5.2.34 CE**。然后我想将数据库迁移到另一台安装了**MySQL 5.0**的计算机上。（我只需要迁移架构，不需要数据）

我使用 MySQL Workbench 的*File -> Export -> Forward Engineer SQL CREATE 脚本*生成**db.sql**脚本并将其复制到另一台计算机。

我键入*mysql < db.sql*来创建数据库，但只收到一个错误。

这里发生错误：

```
DELIMITER $$

CREATE PROCEDURE `filedb`.`GetIncompleteFileId` (in latestFileId BIGINT UNSIGNED, in serverBits BIT(32), in fileCount SMALLINT UNSIGNED)

BEGIN
    SELECT `id`, `key`, `length`, `path`
    FROM
    (
        SELECT * FROM `filedb`.`fileInfo` WHERE `id` <= latestFileId
    ) AS TempTable
    WHERE (serverBits & `serverownership` NOT IN (serverBits, 0))
    ORDER BY `id` DESC
    LIMIT fileCount;
END

$$ 
```

错误在'fileCount; 结尾'。如果我删除*“LIMIT fileCount”*，错误就会消失。

有人告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:31:56.687

在 MySQL 5.0 中，LIMIT 参数必须是非负整数常量，而不是变量或过程参数。使用[准备好的语句](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html)来避免此错误。

从 MySQL 5.0 文档 -

> LIMIT 子句可用于限制 SELECT 语句返回的行数。LIMIT 接受一个或两个数字参数，它们都必须是非负整数常量（使用准备好的语句时除外）。

从 MySQL 5.5 文档 -

> LIMIT 子句可用于限制 SELECT 语句返回的行数。LIMIT 接受一个或两个数字参数，它们都必须是非负整数常量，但以下情况除外：
> 
> 在准备好的语句中，可以使用 LIMIT 指定参数？占位符标记。
> 
> 在存储程序中，LIMIT 参数可以使用整数值例程参数或 MySQL 5.5.6 的局部变量来指定。

# sql-server-2005 - SQL Server 布尔运算符

> ID：11135134
> 
> 赞同：1
> 
> 时间：2012-06-21T09:20:51.107
> 
> 标签：sql-server-2005

我知道 SQL Server 没有布尔数据类型，最好的选择是使用 BIT 数据类型。

我的问题是布尔表达式评估什么。例如，如果我有声明

```
expr1 AND expr2 
```

如果 expr1 为真而 expr2 为假，它们是否在内部评估为值为 1 和 0 的 BIT？然后 AND 运算符检查 BIT？

我认为情况并非如此，因为这样应该可以：

```
select 1 where 1 and 0 
```

那么sql server内部有布尔数据类型吗？

以下作品

```
select 1 where 1 = 0
select 1 where 1 = 0 and 0 = 0 
```

但是这个

```
select 1 where 1 and 0 
```

报告

消息 4145，级别 15，状态 1，第 1 行 在预期条件的上下文中指定的非布尔类型表达式，靠近“和”。

这意味着内部 sql server 将表达式作为布尔值处理，但为什么不能访问该数据类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:13:39.530

SQL Server 确实有`Boolean`数据类型。您可以打开[逻辑运算符 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189773.aspx)手册页并找到以下语句：

> 逻辑运算符测试某些条件的真实性。逻辑运算符（如比较运算符）返回值为 TRUE、FALSE 或 UNKNOWN的**布尔数据类型。**

只是您不能像使用其他 Transact-SQL 数据类型一样使用此类型。例如，您不能声明布尔变量或参数，不能向表中添加布尔列，不能转换为/从布尔值转换。但是您*可以*使用布尔*表达式*并在需要它们的上下文中使用它们（`WHERE`, `ON`, 检查约束...）。您还可以将布尔*运算符*应用于这些表达式：`AND`，`NOT`等。（像`<`,`=`和`LIKE`other 这样的运算符也可以被认为是布尔值，因为它们*返回*布尔值结果，但它们的操作数实际上绝不是布尔值。）

因此，总而言之，SQL Server 中有*一个*布尔类型，但它的使用是有限的，如上所述。为什么？抱歉，我的回答可能很愚蠢，但我对此很满意：这是他们选择的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:38:26.733

逻辑运算符的结果为真或假。所以在你的例子中，如果`expr1`并且`expr2`是真的，你会得到一个结果。检查它是否为真是您对每个表达式所做的操作。

因此，您将例如列与位值之类的东西进行比较`column_bit = 0`，这将导致真或假。如果您的结果`expr1`为真且`expr2`为假，则逻辑 AND 运算符的结果为假。

编辑：

你`select 1 where 1 and 0`不能工作，因为你不使用比较运算符。1=1 AND 0=0 有效，例如，但它的废话:)

# c# - 有什么方法可以帮助我操作查询字符串参数吗？

> ID：11135136
> 
> 赞同：1
> 
> 时间：2012-06-21T09:21:05.230
> 
> 标签：c#, string, url, query-string

目前，我正在使用各种 if 语句和子字符串来操作查询字符串参数，并想知道是否有更有效的方法。

准确地说 - 我需要向当前 url 添加一个查询字符串参数，但如果它已经存在 - 我只需要修改它。

澄清一下 - 我可以使用标准的字符串操作方法来实现这一点，并且我知道如何检索当前的 url 等。我只是想知道这些轮子是否已经到位并且我正在重新发明它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:25:40.893

```
 HttpUtility.ParseQueryString(queryString); 
```

更多信息：http: [//msdn.microsoft.com/en-us/library/system.web.httputility.parsequerystring.aspx](http://msdn.microsoft.com/en-us/library/system.web.httputility.parsequerystring.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:28:46.113

可能您正在寻找[HttpUtility.ParseQueryString()](http://msdn.microsoft.com/en-us/library/system.web.httputility.parsequerystring%28v=vs.80%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:24:39.370

您可以将查询字符串解析为 a`Dictionary<string,string>`并使用它来操作，然后在再次输出为查询字符串时简单地格式化键值对：

```
public Dictionary<string, string> ToDictionary(string queryString)
{
    return queryString.TrimStart('?').Split('&').Select(qp => qp.Split(',')).ToDictionary(a => a[0], a=> a[1]);
}

public Dictionary<string, string> ToString(Dictionary<string, string> queryString)
{
    return '?' + string.Join('&', queryString.Select(kvp => kvp.Key + '=' + kvp.Value));
} 
```

# asp.net-mvc - 阅读邮件的安全措施

> ID：11135137
> 
> 赞同：0
> 
> 时间：2012-06-21T09:21:07.897
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在尝试从 Gmail 中读取邮件并将它们存储在我的数据库中。然后数据会显示在我的应用程序中。

事实上，我预计会有安全问题。我正在使用编码和解码，但我担心可能存在 sql 注入或任何其他类型的攻击，因为用户可能会在邮件正文中发送任何内容，并且在读取和存储数据时，可能会有某种攻击。

我不确定在哪里发布这个问题，我正在使用 asp.net MVC，这就是为什么我选择在这里发布它。

任何人都可以建议我在从 Google 下载邮件时可以做些什么来最大程度地减少攻击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:25:35.837

向数据库发送 SQL 查询时，始终使用[参数化查询。](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)这样，无论向它扔什么垃圾，它都会得到适当的消毒，你会很安全。当然，如果您已经在使用 ORM，那么这个 ORM 可能已经为您做到了。检查手册。

# tfs - 如何获取有关已销毁工作项的信息？

> ID：11135144
> 
> 赞同：3
> 
> 时间：2012-06-21T09:21:23.217
> 
> 标签：tfs, tfs-sdk

我使用 TFS 2010，我需要使用 TFS API 来检索有关已删除工作项的信息。TFS DB 中有一个表 [WorkItemsDestroyed]，其中包含有关已销毁工作项的信息。有没有办法使用 TFS API 获取这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T12:12:24.360

这取决于您要检索的信息。如果您想找出谁删除了工作项，那么您可以使用 sql（@pantelif 评论）来完成。

如果您想检索有关工作项本身的信息，我认为没有任何方法可以做到这一点，无论是从 TFS API 还是 sql 命令。如本文所述，您无法恢复已删除[的工作项：](http://blogs.microsoft.co.il/blogs/shair/archive/2010/02/19/tfs-api-part-21-delete-work-item-using-workitemstore-demo-application.aspx)

> 删除工作项操作不可恢复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T12:07:47.693

实际上，只要没有删除测试计划，就应该有实际测试结果的完整历史记录，让您可以从删除测试套件中恢复……这可能需要一些时间，但过程有效。

试试这个来重新创建你的测试套件和相关的结果。

重新创建套件。如果不是启用查询的套件，请添加测试。从测试选项卡中，在层次结构中选择您的套件。创建一些初始结果，以便您查看每个测试的完整历史记录。在测试列表窗格中，批量选择所有测试结果并将它们设置为阻止。现在，当您打开每个测试结果时，您将在结果窗口底部看到与每个测试用例关联的先前测试结果历史记录的完整列表。换句话说，您需要触发初始结果才能查看完整的历史记录。对于仅带有单个“已阻止”结果的任何结果，尚未执行测试。（第一次得出结果）对于有相关附加结果的测试，确定最后已知状态（参见创建日期列），然后适当设置（通过/失败/阻止） 注意：这仅在未删除测试计划时才有效。如果它只是一个测试套件，这应该可以让您快速恢复并运行。

# codeigniter - 如何在codeigniter中获取视图文件的路径

> ID：11135146
> 
> 赞同：4
> 
> 时间：2012-06-21T09:21:34.837
> 
> 标签：codeigniter, view, path

我想问是否有任何方法可以在控制器中获取视图文件的路径。例如

```
class welcome extends controller{

  function __construct(){
       parent::__construct();
  }
  function index(){
     $this->load->view('welcome_message');
  }
  function test(){
     $my_variable = $this->load->view('welcome_message','',TRUE);
  }
  function another_test(){
        ///  $path_to_view = ???;
        ///  echo $path_to_view;
  } 
} 
```

我想问是否有任何帮助功能来获得这个。测试方法有一个变量，其中包含 html 内容。但我想获取视图文件的路径？？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T11:05:02.493

我不确定这是否是正确的方法，但你可以试试这个，只需`my_helper.php`在你的`application/helper`文件夹中创建一个帮助文件，然后在这个帮助文件中粘贴以下函数

```
function get_view_path($view_name)
{
    $target_file=APPPATH.'views/'.$view_name.'.php';
    if(file_exists($target_file)) return $target_file;
} 
```

要使用它，您必须先加载帮助文件，然后使用视图名称作为函数的参数调用函数

```
$this->load->helper('my_helper');
$path_to_view = get_view_path('welcome'); // Will return the path if welcome.php exists in the view folder. 
```

您可以使用 config.php 自动加载它`$autoload['helper'] = array('functions_helper');`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-01-04T00:04:12.610

它应该是常数：

```
VIEWPATH 
```

# java - 如何显示在netbeans中作为参数传递的jpanel？

> ID：11135149
> 
> 赞同：0
> 
> 时间：2012-06-21T09:21:42.220
> 
> 标签：java, netbeans, jframe, jpanel

我已经使用 Netbeans GUI Designer 提出了一个 JFrame，我希望使用 Netbeans GUI Designer 将两个 s 传递给已经放置在 JFrame 内`JPanel`的 2 个虚拟s。`JPanel`

但是，下面的代码不起作用，并且`JFrame`出现空白。为什么呢？

```
 public Summary_Page(JPanel jp1,JPanel jp2) {

    initComponents();
    this.jp1=jp1;
    this.jp2=jp2;
    this.setVisible(true);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:30:49.233

如果此方法在扩展 JFrame 的类中，则只需在 Summary_Page() 方法中添加以下行：

```
this.add(panel); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:23:47.723

您需要将面板添加到父组件。`JFrame`例如，如果您的课程扩展，请使用

```
this.getContentPane().add(panel); 
```

（无需设置`visible`）。`JFrame`- 是一个具有标题和按钮（退出、最小化）的窗口，但您想在白色矩形中添加组件，以便您`content pane`首先获得。如果您有另一个父组件而不是`JFrame`您可以通过这种方式添加组件：

```
this.add(panel); 
```

然后，如果要添加多个组件，则需要使用[Layout Managers](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)之一。

# winforms - Telerik RadDock 填充问题

> ID：11135152
> 
> 赞同：0
> 
> 时间：2012-06-21T09:21:52.757
> 
> 标签：winforms, telerik, raddocking

我在我的一个windorm上将RadDock填充设置为（0,0,0,0），但是每次构建项目时，填充都会重置为默认大小（5,5,5,5）。

这是我第一次遇到这个问题，在过去的几天里，我在许多其他表单上都这样做了，没有任何问题。关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:45:16.110

我发现有一个名为“RootElement”的属性也控制着 RadDock 填充。当我将其子属性 'Padding' 设置为 (0,0,0,0) 后，该问题得到解决。

# github - 如何将 PivotalTracker 用户故事迁移到 Github 问题？

> ID：11135158
> 
> 赞同：0
> 
> 时间：2012-06-21T09:22:12.623
> 
> 标签：github, github-api, pivotaltracker

是否有任何漂亮且简单的方法可以将所有用户故事从 Pivotal Tracker 迁移到 GitHub 问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:54:18.593

好的，我为自己找到了解决方案并在这里进行了一些编译： [https ://github.com/Bazai/pivotal2github](https://github.com/Bazai/pivotal2github)

# azure - 在新的 Windows Azure 管理门户中找不到“移动数据库服务器”按钮

> ID：11135161
> 
> 赞同：0
> 
> 时间：2012-06-21T09:22:21.300
> 
> 标签：azure, azure-sql-database

我刚刚切换到 Windows Azure 的新管理门户（我真的很喜欢它），但是当我尝试将我的数据库服务器从一个订阅移动到另一个订阅时（请参阅此链接以了解它在旧门户中是如何完成的：[移动 SQL Azure订阅之间的服务器](http://blogs.msdn.com/b/windowsazure/archive/2012/03/07/moving-sql-azure-servers-between-subscriptions.aspx)），我找不到移动服务器的按钮。我没有找对地方，还是预览门户中没有此功能？

顺便说一句，我能够使用旧门户移动我的服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:03:59.727

新门户缺少许多功能（即 SQL 报告、访问控制服务、流量管理器、服务总线、管理证书）。

我想这些会随着时间的推移而添加。目前，您仍然可以通过单击新门户顶部的绿色框或访问此处访问旧门户：[https ://windows.azure.com/default.aspx](https://windows.azure.com/default.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T23:36:51.360

如果新门户中没有任何功能并且在旧门户中，请继续访问旧门户：

*   旧门户：[https ://windows.azure.com/](https://windows.azure.com/)
*   新门户：[https ://manage.windowsazure.com/](https://manage.windowsazure.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T14:11:00.833

旧门户现已退役，但仍有一些（如果不是很多）功能不存在。无法自行将服务器或数据库移动到其他订阅。

# symfony - persist() 的小问题

> ID：11135162
> 
> 赞同：1
> 
> 时间：2012-06-21T09:22:33.733
> 
> 标签：symfony, annotations, doctrine-orm, persistence

我有以下两个实体：

```
<?php

namespace Site\AnnonceBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Site\UserBundle\Entity\User;

/**
 * Site\AnnonceBundle\Entity\Sujet
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Site\AnnonceBundle\Entity\SujetRepository")
 */
class Sujet
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    //Some code...

    /**
     * 
     * @ORM\ManyToOne(targetEntity="Site\UserBundle\Entity\User")
     */
    private $user;

    //getter/setter.... 
```

用户实体（FOSUserBundle）：

```
<?php
namespace Site\UserBundle\Entity;
use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table()
 * 
 */
class User extends BaseUser{

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;    

    public function getId() {
        return $this->id;
    }

} 
```

当我创建一个“Sujet”时，我做了（在 SujetController.php 中）：

```
 $em = $this->getDoctrine()->getEntityManager();
        $sujet->setResolu(false);
        $em->persist($sujet);

        $em->flush(); 
```

它的作品，但是在数据库中插入的“Sujet”指的是用户空......所以在第二个版本中我做了这个：

```
 $em = $this->getDoctrine()->getEntityManager();
        $sujet->setResolu(false); 
        $sujet->setUser(new User($this->get('session')->get('user_id')))  ;//the user is already in the DB
        $em->persist($sujet);
        $em->flush(); 
```

但我收到此错误：

```
A new entity was found through the relationship 'Site\AnnonceBundle\Entity\Sujet#user' that was not configured to cascade persist operations for entity: . Explicitly persist the new entity or configure cascading persist operations on the relationship. If you cannot find out which entity causes the problem implement 'Site\UserBundle\Entity\User#__toString()' to get a clue. 
```

我不明白，我已经与另一个 ORM (JPA) 合作过，它以这种方式工作......如何告诉“Sujet”与数据库中已经存在的实体相关的内容？

（对不起，如果我的英语不好）

**编辑**：它对我有用：

```
$user = $this->get('security.context')->getToken()->getUser();
$sujet->setUser($user);
$em->persist($sujet);
$em->flush(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:56:38.557

以防万一，错误来自您创建了一个新用户并将其链接到 sujet 而没有持久化它（因为没有级联，实体链接到非持久化实体，导致错误）。

您的编辑表明您找到了一种方法来获取您之前创建的当前用户（这个是持久的，与“新用户”不同）。

你也可以这样做：

```
$repository = $this->getDoctrine()
    ->getEntityManager()
    ->getRepository('YourBundle:User');

$user = $repository->find($iduser); 
$sujet->setUser($user); 
```

如果您想“为其他用户”进行编辑，这将是一个很好的解决方案。

# android - Android相机方向，手机提供虚假数据？

> ID：11135166
> 
> 赞同：3
> 
> 时间：2012-06-21T09:22:41.730
> 
> 标签：android, camera, orientation, samsung-mobile

我正在使用 Android 相机文档中的代码：

```
public static void setCameraDisplayOrientation(Activity activity,
         int cameraId, android.hardware.Camera camera) {
     android.hardware.Camera.CameraInfo info =
             new android.hardware.Camera.CameraInfo();
     android.hardware.Camera.getCameraInfo(cameraId, info);
     int rotation = activity.getWindowManager().getDefaultDisplay()
             .getRotation();
     int degrees = 0;
     switch (rotation) {
         case Surface.ROTATION_0: degrees = 0; break;
         case Surface.ROTATION_90: degrees = 90; break;
         case Surface.ROTATION_180: degrees = 180; break;
         case Surface.ROTATION_270: degrees = 270; break;
     }

     int result;
     if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
         result = (info.orientation + degrees) % 360;
         result = (360 - result) % 360;  // compensate the mirror
     } else {  // back-facing
         result = (info.orientation - degrees + 360) % 360;
     }
     camera.setDisplayOrientation(result);
 } 
```

在纵向模式下，我的一部手机（Samsung GT-S5660）将 info.orientation 报告为 0 并显示旋转 0，这使得预览进入横向模式。在另一部手机（HTC）上，这就像它应该的那样工作。在这种情况下，HTC 将 info.orientation 报告为 90。如果我手动将显示方向设置为 90，它也适用于三星。

那么问题来了：三星是提供虚假信息还是我做错了什么？

# ios - 如何获取 CoreData DB 中特定属性的总和？

> ID：11135169
> 
> 赞同：0
> 
> 时间：2012-06-21T09:22:48.960
> 
> 标签：ios, core-data, nsfetchrequest, nsentitydescription

我最近刚刚能够填充我的核心数据数据库。我有一个名为*username*的属性，我想获取系统上的用户总数（在数据库中）并将其打印出来。我知道我需要将NSFetchRequest 与*NSEntityDescription*一起*使用*。我只是不知道该怎么做。我还没有真正在 SO 上看到过这样的问题。实体名为*Account*，我的属性标记为*username*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:27:35.127

对于您的特定情况，我想您将每个*用户名*作为单独的记录，因此您可以使用`-countForFetchRequest:error:`方法`NSManagedObjectContext`获取给定的获取请求如果已传递给该请求将返回的对象数`executeFetchRequest:error:`

# google-maps - 在 Windows 8 上加载 Google Maps API V3

> ID：11135172
> 
> 赞同：0
> 
> 时间：2012-06-21T09:22:51.920
> 
> 标签：google-maps, google-maps-api-3

我正在尝试制作一个可以占用两个位置并在 Windows 8 Metro 中显示路线的应用程序..！！我面临的问题是加载 GOOGLE MAPS API 不起作用..!! 无论是同步还是异步，我都提供了有效的 API 密钥并与提供的文档一起使用，但仍然在异步加载中得到一个空白页面，并且在同步加载 API 时得到一个谷歌是未定义的错误。请帮助

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>geoHelloWorld</title>

    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.1.0.RC/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0.RC/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0.RC/js/ui.js"></script>

    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <link href="/maps/documentation/javascript/examples/default.css"
        rel="stylesheet" type="text/css">
    <script type="text/javascript">
        function initialize() {
            var myOptions = {
                zoom: 8,
                center: new google.maps.LatLng(-34.397, 150.644),
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            var map = new google.maps.Map(document.getElementById('map_canvas'),
                myOptions);
        }

        function loadScript() {
            var script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = 'https://maps.googleapis.com/maps/api/js?sensor=false&callback=initialize';
            document.body.appendChild(script);
        }

        window.onload = loadScript;
    </script>
  </head>

<body>
    <div id="map_canvas" style="width:100%; height:100%"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:15:50.967

我刚刚写了一篇关于在 Windows 8 中使用 Google Maps API 的教程，[http://www.creepyed.com/2012/11/how-to-use-the-google-maps-api-on-windows-8/](http://www.creepyed.com/2012/11/how-to-use-the-google-maps-api-on-windows-8/)。它与如何在项目中调用 Google 地图的脚本并确保您可以获取外部内容有关。

我收到了与您类似的错误。我希望这有帮助！

祝你有美好的一天，埃德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:05:41.280

我自己有点新手，但我认为你需要：

```
<body onload="initialize()">
  <div id="map_canvas" style="width:100%; height:100%"></div> 
```

代替 ：

```
<body
  <div id="map_canvas" style="width:100%; height:100%"></div> 
```

莉亚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:19:01.333

关闭你的`<body>`标签！@LeasMaps， `initialize()`调用回调=？通过google api，但他必须删除（）！

```
script.src = 'https://maps.googleapis.com/maps/api/js?sensor=false&callback=initialize'; 
```

# android - 在少数设备上加载地图崩溃

> ID：11135175
> 
> 赞同：0
> 
> 时间：2012-06-21T09:23:02.053
> 
> 标签：android, map, geolocation, samsung-mobile, sony

我有一个`listview`and `onItemSelected`，将调用 an`Activity`来获取*用户位置*（他当前的**lat**和**lng**），此活动没有布局，然后此活动自动调用另一个活动，该活动获取从 中选择的项目的**lat**和**lng**`listview`并标记用户位置和地图上的项目位置。

当我在*Emulator*和*Samsung Galaxy Ace上进行测试时，它***运行良好**，但是当我在*Micromax A50*和*Sony Xperia上进行测试时它***崩溃**了。

 *****可悲的是我无法安装后面2个设备的驱动程序，所以我无法获得logcat。
任何 1 都可以猜出可能出了什么问题？

我查找用户位置的代码是：

```
public class MyLocationActivity extends Activity implements LocationListener {
    private LocationManager mgr;
    private String best;
    public static double myLocationLatitude;
    public static double myLocationLongitude;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mgr = (LocationManager) getSystemService(LOCATION_SERVICE);

        dumpProviders();

        Criteria criteria = new Criteria();

        best = mgr.getBestProvider(criteria, true);
        Log.d("best provider", best);

        Location location = mgr.getLastKnownLocation(best);
        dumpLocation(location);

        /*Intent intent = new Intent(MyLocationActivity.this, ShowMapActivity.class);
        startActivity(intent);*/

        Intent intent = new Intent(MyLocationActivity.this, MapMarkerActivity.class);
        startActivity(intent);
        finish();
    }

    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        dumpLocation(location);

    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    @Override
    protected void onPause() {

        super.onPause();
        mgr.removeUpdates(this);
    }

    @Override
    protected void onResume() {

        super.onResume();
        mgr.requestLocationUpdates(best, 15000, 1, this);
    }

    private void dumpLocation(Location l) {

        if (l == null) {

            myLocationLatitude = 0.0;
            myLocationLongitude = 0.0;
        } else {

            myLocationLatitude = l.getLatitude();
            myLocationLongitude = l.getLongitude();
        }
    }

    private void dumpProviders() {

        List<String> providers = mgr.getAllProviders();
        for (String p : providers) {

            dumpProviders(p);
        }
    }

    private void dumpProviders(String s) {

        LocationProvider info = mgr.getProvider(s);
        StringBuilder builder = new StringBuilder();
        builder.append("name: ").append(info.getName());
    }

} 
```

* * *

项目位置是：

```
public class MapMarkerActivity extends MapActivity {

    private MapView map = null;
    private MyLocationOverlay me = null;
    private Drawable marker1;
    private Drawable marker2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.particular_entry);

        Button feedButton = (Button) findViewById(R.id.feedButton_particularEntry);
        feedButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {

                Intent intent = new Intent(MapMarkerActivity.this,
                        FeedListViewActivity.class);
                intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
                startActivity(intent);
            }
        });

        Button iWantButton = (Button) findViewById(R.id.iWantButton_particularEntry);
        iWantButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Intent intent = new Intent(MapMarkerActivity.this,
                        IWantActivity.class);
                startActivity(intent);
            }
        });

        Button shareButton = (Button) findViewById(R.id.shareButton_particularEntry);
        shareButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Intent intent = new Intent(MapMarkerActivity.this,
                        ShareActivity.class);
                startActivity(intent);
            }
        });

        Button profileButton = (Button) findViewById(R.id.profileButton_particularEntry);
        profileButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Intent intent = new Intent(MapMarkerActivity.this,
                        ProfileActivity.class);
                startActivity(intent);
            }
        });

        map = (MapView) findViewById(R.id.map);

        map.getController().setCenter(
                getPoint(FeedListViewActivity.lat, FeedListViewActivity.lng));
        map.getController().setZoom(13);
        map.setBuiltInZoomControls(true);

        marker1 = getResources().getDrawable(R.drawable.marker2);

        marker2 = getResources().getDrawable(R.drawable.marker1);

        marker1.setBounds(0, 0, marker1.getIntrinsicWidth(),
                marker1.getIntrinsicHeight());
        marker2.setBounds(0, 0, marker1.getIntrinsicWidth(),
                marker1.getIntrinsicHeight());

        map.getOverlays().add(new SitesOverlay(marker1));

        me = new MyLocationOverlay(this, map);
        map.getOverlays().add(me);
    }

    @Override
    public void onResume() {
        super.onResume();

        me.enableCompass();
    }

    @Override
    public void onPause() {
        super.onPause();

        me.disableCompass();
    }

    @Override
    protected boolean isRouteDisplayed() {
        return (false);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_S) {
            map.setSatellite(!map.isSatellite());
            return (true);
        } else if (keyCode == KeyEvent.KEYCODE_Z) {
            map.displayZoomControls(true);
            return (true);
        }

        return (super.onKeyDown(keyCode, event));
    }

    private GeoPoint getPoint(double lat, double lon) {
        return (new GeoPoint((int) (lat * 1000000.0), (int) (lon * 1000000.0)));
    }

    public class SitesOverlay extends ItemizedOverlay<OverlayItem> {
        private List<OverlayItem> items = new ArrayList<OverlayItem>();

        public SitesOverlay(Drawable marker) {
            super(marker);

            boundCenterBottom(marker);

            OverlayItem oli1 = new OverlayItem(getPoint(
                    MyLocationActivity.myLocationLatitude,
                    MyLocationActivity.myLocationLongitude), "YL",
                    "Your Location");
            oli1.setMarker(marker2);
            items.add(oli1);

            OverlayItem oli2 = new OverlayItem(getPoint(
                    FeedListViewActivity.lat, FeedListViewActivity.lng), "SL",
                    "Store Location");
            oli2.setMarker(marker1);
            items.add(oli2);

            populate();
        }

        @Override
        protected OverlayItem createItem(int i) {
            return (items.get(i));
        }

        @Override
        protected boolean onTap(int i) {
            Toast.makeText(MapMarkerActivity.this, items.get(i).getSnippet(),
                    Toast.LENGTH_SHORT).show();

            return (true);
        }

        @Override
        public int size() {
            return (items.size());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:26:18.373

也许这可以帮助你： [Location Method Calls Crashs On Some Devices](https://stackoverflow.com/questions/9954201/location-method-calls-crashes-on-some-devices "定位方法调用在某些设备上崩溃")*****

# c - 头文件有问题

> ID：11135178
> 
> 赞同：0
> 
> 时间：2012-06-21T09:23:14.550
> 
> 标签：c, linux, ssl, openssl, debian

在编译我编写的 ac 代码时出现以下错误。我知道问题出在头文件中。谁能告诉我定义这些函数需要哪些头文件。

```
sign.c: In function ‘main’:
sign.c:78: warning: assignment makes pointer from integer without a cast
/tmp/ccnsSeHy.o: In function `sign_data_evp':
sign.c:(.text+0x68): undefined reference to `check_ssl_rv'
sign.c:(.text+0xd5): undefined reference to `check_ssl_rv'
sign.c:(.text+0x13e): undefined reference to `check_ssl_rv'
/tmp/ccnsSeHy.o: In function `main':
sign.c:(.text+0x1ca): undefined reference to `initialize'
sign.c:(.text+0x1d6): undefined reference to `select_engine'
sign.c:(.text+0x20a): undefined reference to `sign_data'
sign.c:(.text+0x216): undefined reference to `clean_engine'
sign.c:(.text+0x21b): undefined reference to `clean_up'
collect2: ld returned 1 exit status 
```

到目前为止我使用的头文件是：

```
#include <stdio.h>
#include <string.h>
#include <errno.h>
#include <netdb.h>
#include <unistd.h>
#ifdef __VMS
#include <socket.h>
#include <inet.h>

#include <in.h>
#else
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#endif

#include <openssl/crypto.h>
#include <openssl/ssl.h>
#include <openssl/err.h> 
```

操作平台：Linux 提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:25:28.153

你理解错了。它不会抱怨未知的函数原型，它会在链接期间抱怨。所以你可能忘记链接一些库或一些目标文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T04:39:51.987

试试这个 gcc sslprogname.c -o sslprogname -Wl,-Bstatic -lssl -Wl,-Bdynamic -lssl3 -lcrypto。它对我有用

# sql-server - 星号通配符在 SQL Server 全文搜索中不起作用

> ID：11135179
> 
> 赞同：0
> 
> 时间：2012-06-21T09:23:23.973
> 
> 标签：sql-server, full-text-search, prefix

```
Select d.Path 
from Documents d 
inner join (SELECT FT_TBL.DocumentId, KEY_TBL.RANK as ranks
            FROM FullTextCatalog AS FT_TBL 
            INNER JOIN FREETEXTTABLE(FullTextCatalog, Icerik, 
            ' "hısım*" ' ) AS KEY_TBL
            ON FT_TBL.DocumentId = KEY_TBL.[KEY]) as results on d.Id = results.DocumentId 
order by results.ranks 
```

此查询仅返回具有“hısım”字词的行。但是预期的结果应该有“hısım”这个词和它的前缀。我对吗？即“hısımlar”、“hısımları”等。

所以我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:21:57.163

我认为您应该改用 CONTAINSTABLE

```
Select d.Path 
from Documents d 
inner join (SELECT FT_TBL.DocumentId, KEY_TBL.RANK as ranks
        FROM FullTextCatalog AS FT_TBL 
        INNER JOIN CONTAINSTABLE(FullTextCatalog, Icerik, 
        ' "hısım*" ' ) AS KEY_TBL
        ON FT_TBL.DocumentId = KEY_TBL.[KEY]) as results on d.Id = results.DocumentId 
order by results.ranks 
```

它适用于我的示例。

# java - 如何只显示数据库中的特定数据一次？

> ID：11135180
> 
> 赞同：0
> 
> 时间：2012-06-21T09:23:25.667
> 
> 标签：java, android, sql, database

如何获取变量`text1`，`text2`并`time`在开始时只显示一次，例如*标题*，因为它们对于特定的数据组具有相同的值，然后在下面显示变量`text3`，因为该变量具有该特定数据组的值。

写入数据完成`text3`后，对于该组数据，查询必须开始写入另一组数据，`text1`，`text2`和`time`的新值`text3`。

这是我的代码：

```
 public class NapredakActivity extends Activity {  
 @Override
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.first);
 String var;
 final TextView t = (TextView) findViewById(R.id.textView2);
 Intent intent = getIntent();
 var=intent.getStringExtra("date");
       SQLiteDatabase db = openOrCreateDatabase("Database", MODE_PRIVATE, null);
       String q = "SELECT text1 ,text2, text3, time FROM table WHERE time LIKE '"+var+"'";

       Cursor c = db.rawQuery(q, null);

       if( c.getCount() < 1 ){

           c.close();
           db.close();
           Toast.makeText(NapredakActivity.this, "wrong choice",Toast.LENGTH_LONG).show();

           startActivity(new Intent(this,calendar.class));
       }
       else{
                 String j="";
                                           c.moveToFirst();
                         do {
                          String cm = c.getString(c.getColumnIndex("text1" )); 
                          String cm2 = c.getString(c.getColumnIndex("text2"));            
                          String cm4 = c.getString(c.getColumnIndex("text3"));
                          String cm3 = c.getString(c.getColumnIndex("time" ));

                        j = j+"\n"+cm+cm4+cm2+cm3;  

                          } while (c.moveToNext());

                         t.setText(j);   
                   c.close();
              db.close();        
       }        }    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:34:30.523

如果我理解正确，假设您喜欢保持显示 db 内容的方式，即在一个 TextView 中，只需使用这样的标志：

```
else{
                         String cmOld ="a text that never will be in the BD";
                         boolean flag_newText1Found;
                         String j="";
                         c.moveToFirst();
                         do {
                          String cm = c.getString(c.getColumnIndex("text1" )); 
                          if (cm.equals(cmOld)) 
                             cm = "";
                          else
                             cmOld = cm;
                          String cm2 = c.getString(c.getColumnIndex("text2"));            
                          String cm4 = c.getString(c.getColumnIndex("text3"));
                          String cm3 = c.getString(c.getColumnIndex("time" ));

                        j = j+"\n"+cm+cm4+cm2+cm3;  

                          } while (c.moveToNext());

                         t.setText(j); 
```

# javascript - 访问 text-shadow 属性值

> ID：11135181
> 
> 赞同：2
> 
> 时间：2012-06-21T09:23:26.657
> 
> 标签：javascript, jquery, css

我想访问`text-shadow`属性，就像我们访问`padding`属性一样。方法 ，

```
 div{
          padding : 10px 10px 10px 10px;
       } 
```

所以我们可以单独访问它的每个部分，例如：

```
 $('div').css("padding-left"); etc.. 
```

现在我如何单独`horizontalShadow`访问一个属性？`verticalShadow``Blur``shadowColor``textshadow`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:26:22.873

你不能。[规范](http://www.w3.org/TR/css3-text/#text-shadow)仅定义`text-shadow`属性。它不是速记属性。

如果要更改部分文本阴影规则，则必须采用现有规则并对其进行修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:28:42.897

`text-shadow`不是像`padding`is 这样的速记属性，所以你不能得到这样的子值。您必须手动解析它。

# jquery - 如何使用jquery限制每页的元素数量

> ID：11135182
> 
> 赞同：1
> 
> 时间：2012-06-21T09:23:38.317
> 
> 标签：jquery, plugins

我需要知道是否存在 jquery 的插件来限制页面中的元素数量并在页面底部显示小数字以显示其他元素。有人知道一些这样做的插件吗？谢谢！！+

这是一个例子：

![例子](../Images/7e4f8d1987fc5fadee821d83201435b6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:32:31.477

它被称为“分页”。您会发现大量用于此目的的 jQuery 插件。

[http://www.jquery4u.com/plugins/10-jquery-pagination-plugins/](http://www.jquery4u.com/plugins/10-jquery-pagination-plugins/)

比较 10 个插件，看看其中一个是否符合您的需求。

但是请注意，真正的分页应该在服务器端完成，因为客户端分页仍然存在所有元素，这在非常大的数量下会导致性能问题。

# javascript - 包裹 iframe

> ID：11135188
> 
> 赞同：2
> 
> 时间：2012-06-21T09:23:48.663
> 
> 标签：javascript, html, css

我有一个 iframe 和输入字段，里面有建议。建议项目列表是在 js 中创建的，具有以下参数：

```
{
  borderRadius : '2px',
  boxShadow : '3px 4px 8px #DDDDDD',
  background : '#fff',
  border : '#aaa 1px solid',
  fontSize : '12px',
  padding : '2px',
  textAlign : 'left',
  position : 'absolute'
} 
```

当列表不太长时它工作正常：现在我看到图片上显示的内容： ![框架](../Images/5c2b365f4b257deaec4d243e9ce10a5e.png) 建议列表比 iframe 长。

所以问题是：我怎样才能让这个列表出现在 iframe 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:33:59.400

你不能。

您可以做的是将 iframe 文件的内容注入到主页中。看看这个： [http](http://api.jquery.com/load/) ://api.jquery.com/load/它只有在页面在同一个域中时才有效。然后只需放置一个 div 而不是 iframe 并将 .load 放入其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:35:44.553

iframe 就像一个嵌入式窗口，其中的所有内容都显示在其中。一种解决方法就像为列表指定一个确定的高度并在其中添加溢出属性，以便列表将显示在 iframe 内但会有一个滚动条。

# matlab - VHDL beta 函数

> ID：11135197
> 
> 赞同：0
> 
> 时间：2012-06-21T09:24:29.137
> 
> 标签：matlab, math, statistics, vhdl

我的一个朋友需要在硬件中实现一些统计计算。她希望使用 VHDL 来完成。

（我的心，我没有用VHDL写过一行代码，对它的微妙之处一无所知）

特别是，她需要直接模拟 MATLAB 的`betainc`功能。

是否有一个很好的软件包可以做到这一点？任何有关实施的提示也受到高度赞赏。如果这根本不是一个好主意，也请告诉我。

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T11:45:07.017

Xilinx 工具集中没有一个内核可以执行不完整的 beta 功能。我不能代表其他可用的工具集，尽管我怀疑是否存在这样的东西。

Xilinx 提供的是一组信号处理模块，例如乘法器、加法器和 RAM 模块（其中包括滤波器、FFT），它们可以一起用于实现各种自定义信号变换。

为了做到这一点，需要完全了解要应用的转换的内部工作原理。

一个好的第一步是在 matlab 中“手动”实现函数作为概念证明：

*   您的朋友可以尝试仅使用乘法器和加法器等基本运算符来实现该函数，而不是使用 matlab 中的内置函数。

*   可以将结果与内置函数生成的结果进行比较以进行验证。

*   然后可以使用提供的构建块将该概念转移到 VHDL。

对不完整的 beta 函数执行此操作并不适合胆小的人，但可以做到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T10:20:15.050

据我所知，没有允许 VHDL 和 matlab 接口的工具。

但是VHDL和C的接口相当简单，所以如果你可以用C实现你的代码（MATLAB的betainc函数），那么它可以很容易地用FLI（外语接口）来完成。

如果您使用的是 modelsim，下面的链接可能会有所帮助。

[关联](https://ece.uwaterloo.ca/~ece327/old/2007t1/protected/modelsim/se_html/se_fli/wwhelp/wwhimpl/common/html/wwhelp.htm?context=FLIReference&file=fli_intro10.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T06:25:16.527

首先提醒一句，如果您之前没有做过任何 VHDL/FPGA 工作，这可能不是最好的起点。使用 VHDL（和其他 HDL 语言），您基本上是在描述硬件，而不是在处理器上执行的连续命令行（就像使用 C/C++ 等一样）。因此，在进行 FPGA 开发时，您需要完全不同的技能和思维方式。仅仅因为可以用 VHDL 编写某些东西，并不意味着它实际上可以在 FPGA 芯片中工作（它是可合成的）。

话虽如此，Xilinx（FPGA 芯片和开发工具的主要制造商之一）确实提供了[System Generator](http://www.xilinx.com/tools/sysgen.htm)包，它与 Matlab 接口，可以自动生成用于 FPGA 芯片的代码。我自己没有使用过它，所以我不确定它是否适用于你朋友的情况——但这可能是一个很好的起点。

[System Generator 用户指南](http://www.xilinx.com/support/documentation/sw_manuals/xilinx14_1/sysgen_user.pdf)（链接位于先前链接的页面上）还简要介绍了 FPGA 芯片的一般情况，以及将其与 Matlab 一起使用的情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T11:41:58.087

你可以自己写。但是，不完全 beta 函数是一个积分。对于参数的许多值（只要两者都大于 1），它的表现相当好。但是，当任一参数小于 1 时，端点就会出现奇点，使问题变得有点棘手。关键是，除非你在数值分析方面有扎实的背景，否则不要自己写。

无论如何，C 中肯定有很多版本可用。Netlib 必须有一些东西，或者查看 Numerical Recipes。或者从 MATLAB 编译它。然后按照 nav_jan 的建议将其链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T07:42:07.483

作为 VHDL 的替代方案，您可以使用[MyHDL](http://www.myhdl.org)编写和测试您的 beta 功能 - 它可以从后端生成可合成的（即可以进入 FPGA 芯片）VHDL（或您希望的 Verilog）。

MyHDL 是 Python 之上的一组额外模块，允许对硬件进行建模、验证和生成。Python 将是一个比 VHDL 更熟悉的编写验证代码的环境（它缺少许多您在编程语言中可能认为理所当然的抽象数据类型）。

被测代码仍然必须以“硬件思维方式”编写，但这通常是比测试环境更小的一段代码，因此在某些方面比弄清楚如何解决 VHDL 的验证限制更容易。

# javascript - 带有锚标记的确认对话框

> ID：11135199
> 
> 赞同：1
> 
> 时间：2012-06-21T09:24:34.090
> 
> 标签：javascript, html

我的朋友在下面为自定义控件编写代码

```
<a href="javascript:__doPostBack('id','msg');">click</a> 
```

现在我想在单击此锚链接时显示确认对话框。

是否可以？。我想将脚本编写为内联。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:28:04.777

做这个 ：

```
<a href="javascript:if (window.confirm('Really?')){__doPostBack('id','msg');};">click</a> 
```

* * *

但是在某些时候，您可能希望停止仅使用内联代码，并查看其他更清晰的方法来在代码中添加 javascript。

您可以在 HTML 文件的 HEAD 中使用这样的脚本块：

```
<script>
    function doOnClick(){
       if (window.confirm('Really?')){
           __doPostBack('id','msg');
       };
    }
</script> 
```

然后你的链接变成

```
<a href="javascript:doOnClick();">click</a> 
```

当然，仅使用一个函数感觉并不简单，但它可以帮助您将所有函数放在同一个位置，并使 html 更轻、更清晰。

* * *

另一种方法是使用[jQuery](http://jquery.com)，这样您就可以完全避免将 javascript 放入 html 部分。

然后是html

```
<a id=myLink>click</a> 
```

你的脚本，现在在正文的末尾，是这个：

```
<script>
   $(document).ready(function(){
       $('#myLink').click(function(){
           if (window.confirm('Really?')){
               __doPostBack('id','msg');
           };
       });

       // other codes will come here
   });
</script> 
```

您现在根本不需要以这种方式编写代码，因为您只有一个非常轻量级的函数，但如果您的代码增长，我建议您开始考虑它并查看 jquery 教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:28:52.590

当然。这是一个小片段，不优雅，但它有效......

```
<a href="javascript:if(confirm('Do you really want to post?')) {__doPostBack('id','msg');};">click</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T09:30:36.663

我实际上不得不查找这个，因为我没有使用过`confirm`，`alert`而且`prompt`很长时间了。

`confirm`根据用户选择的内容返回真/假（分别为确定/取消）。

所以你的结果代码将是

```
<a href="javascript:if (confirm('Are you sure?')) __doPostBack('id','msg');">click</a> 
```

# mysql - 在mysql中多次插入/更新而不重复

> ID：11135201
> 
> 赞同：0
> 
> 时间：2012-06-21T09:24:39.220
> 
> 标签：mysql

我希望在只有 2 列的表中同时插入许多值，如果这些值已经存在，则必须对其进行更新。虽然 1 列可以重复，但第二列不能重复。我可以很容易地做到这一点以下查询..但问题是这里只能考虑一行...没有主键.. PLZ HELP

```
INSERT INTO `table` (value1, value2) 
SELECT 'stuff for value1', 'stuff for value2' FROM `table` 
WHERE NOT EXISTS (SELECT * FROM `table` 
                  WHERE value1='stuff for value1' AND value2='stuff for value2') 
LIMIT 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:27:24.433

尝试在重复键更新集column1 = ......上插入表名......

替代方式::

Step1：创建一个与table1结构相同的temp_table

第2步：

```
 INsert into temp_Table 
   (SELECT * from table1 t1 left join table2 t2 on (t1.value1=t2.value1 and t1.value2=t2.value2)
    where t2.value1 is null and t2.value2 is null); 
```

第三步：

```
 INsert into table Select * from temp_table 
```

# php - 如何在数值数组中合并关联数组？

> ID：11135203
> 
> 赞同：1
> 
> 时间：2012-06-21T09:24:41.337
> 
> 标签：php, multidimensional-array, array-merge

再会！我在合并/组合/连接数组时出错。

例如我有数组，

```
$array1 [] = array(
'var1' => $var1,
'var2' => $var2,
'var3' => $var3,
);
$array2 [] = array(
'var4' => $var4,
'var5' => $var5,
'var6' => $var6,
); 
```

这些数组内部有多个记录，但记录数相同。当我对它们进行 var_dump 时，结构如下所示：

```
//array1
array(3){
    [0]=>array(3){
        ["var1"]=> string (4) "var1"
        ["var2"]=> string (4) "var2"
        ["var3"]=> string (4) "var3"
    }
    [1]=>array(3){
        ["var1"]=> string (4) "var1"
        ["var2"]=> string (4) "var2"
        ["var3"]=> string (4) "var3"
    }
    [2]=>array(3){
        ["var1"]=> string (4) "var1"
        ["var2"]=> string (4) "var2"
        ["var3"]=> string (4) "var3"
    }
}
//array2
array(3){
    [0]=>array(3){
        ["var4"]=> string (4) "var4"
        ["var5"]=> string (4) "var5"
        ["var6"]=> string (4) "var6"
    }
    [1]=>array(3){
        ["var4"]=> string (4) "var4"
        ["var5"]=> string (4) "var5"
        ["var6"]=> string (4) "var6"
    }
    [2]=>array(3){
        ["var4"]=> string (4) "var4"
        ["var5"]=> string (4) "var5"
        ["var6"]=> string (4) "var6"
    }
} 
```

我想添加两个数组

```
$array_combined [] = array(
'var1' => $var1,
'var2' => $var2,
'var3' => $var3,
'var4' => $var4,
'var5' => $var5,
'var6' => $var6,
); 
```

我认为 var_dump(ed) 时的结构应该是这样的：

```
//array_combined
array(3){
    [0]=>array(6){
        ["var1"]=> string (4) "var1"
        ["var2"]=> string (4) "var2"
        ["var3"]=> string (4) "var3"
        ["var4"]=> string (4) "var4"
        ["var5"]=> string (4) "var5"
        ["var6"]=> string (4) "var6"

    }
    [1]=>array(3){
        ["var1"]=> string (4) "var1"
        ["var2"]=> string (4) "var2"
        ["var3"]=> string (4) "var3"
        ["var4"]=> string (4) "var4"
        ["var5"]=> string (4) "var5"
        ["var6"]=> string (4) "var6"

    }
    [2]=>array(3){
        ["var1"]=> string (4) "var1"
        ["var2"]=> string (4) "var2"
        ["var3"]=> string (4) "var3"
        ["var4"]=> string (4) "var4"
        ["var5"]=> string (4) "var5"
        ["var6"]=> string (4) "var6"
    }
} 
```

我试过：

```
 $array_combine = array_combine($array1, $array2);
 $array_merge = array_merge($array1, $array2);
 $array_merge_recursive = array_merge_recursive($array1, $array2); 
```

但我不断收到此错误：

> 注意：未定义的索引：D:\xampp\htdocs\vra\GetVM 中的 cmax - Copy.php 位于第 365 行

我在那里发布的代码与我的真实代码相似。
第 365 行包含 echo ( $record['var4'] )。
我正在做这样的事情来输出组合/合并的数组。

`$array_merge = merge_array($array1, $array2)`
`foreach ( $array_merge as $record ) {`
`echo ( $record['var1'] );`
`echo ( $record['var2'] );`
`echo ( $record['var3'] );`
`echo ( $record['var4'] );//this is were the error occurs`
`echo ( $record['var5'] );//same error here`
`echo ( $record['var6'] );//same error here`
`}`

尝试使用 array_combine()、array_merge_recursive 和 $combined_array = $array1 + $array2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T02:13:04.953

我想说这个问题源于您使用多维数组并试图将它们组合为一维数组。

代替

```
$array_merge = array_merge($array1, $array2); 
```

尝试

```
$array_merge[0] = array_merge($array1[0], $array2[0]);
$array_merge[1] = array_merge($array1[1], $array2[1]);
$array_merge[2] = array_merge($array1[2], $array2[2]);
[ ... ] 
```

如果您想严格组合它们并且永远不要将第一个与第二个的值重叠，请使用

```
$array_merge = $array1 + $array2; 
```

可以在[php.net上找到有关数组合并的一些附加说明](http://www.php.net/manual/en/function.array-merge.php)

# java - Java男女通用浴室

> ID：11135207
> 
> 赞同：7
> 
> 时间：2012-06-21T09:24:54.270
> 
> 标签：java, multithreading, semaphore

我必须使用 Java 信号量来解决这个问题，但我不知道如何，也找不到任何相关的 Java 材料。事情是这样的：

有各种各样的线程：男人和女人。两者都想使用数量为 BATHROOM_SIZE 的相同资源。5条规则：

1.  每个线程在发出需要使用资源的信号后，都应该等到他能够使用它。
2.  防止出现超过 BATHOOM_SIZE 个线程同时使用资源的情况。
3.  防止女性和男性同时使用 Bathoom。
4.  线程应该同时使用资源。如果一种类型有很多线程，最多 BATHROOM_SIZE 线程应该使用资源。
5.  防止饥饿。

## 结果

### 效劳于：

1女1男5女5男

### 失败：

5女1男，5男1女，2男2女，5男5女。

从星期一开始，我一直在努力让它发挥作用，现在我已经没有想法了。

## 代码

所以我的任务是编写实现*浴室接口的**浴室.java*类：

 *```
public interface BathroomInterface {

    public static final int BATHROOM_SIZE = 3; //3 is just example
    void manEnter();
    void manExit();
    void womanEnter();
    void womanExit();
} 
```

在系统中有许多男人和女人的线程，它们的工作方式如下：

```
for(int i = 0; i < n; i++) {
  bathroom.manEnter();
  //uses bathroom random amount of time
  bathroom.manExit();
}

for(int i = 0; i < m; i++) {
  bathroom.womanEnter();
  //uses bathroom random amount of time
  bathroom.womanExit();
} 
```

我也有*浴室.java*类的方案，我必须扩展：

```
import java.util.concurrent.Semaphore;

public class Bathroom implements BathroomInterface {

    private Semaphore mutex = new Semaphore(1, true);

    public void womanEnter() {
        mutex.acquireUninterruptibly();
    }

    public void womanExit() {
        mutex.release();
    }

    public void manEnter() {
        mutex.acquireUninterruptibly();        
    }

    public void manExit() {
        mutex.release();
    }
} 
```

这是我到目前为止所做的：

```
import java.util.concurrent.Semaphore;

public class Bathroom implements BathroomInterface {
    int manW=0, manU=0, womanW=0, womanU=0; //*U-using, *W-waiting
    private Semaphore mutex = new Semaphore(1, false);

    public void womanEnter() {
        womanW++;
        StateChange();
    }

    public void womanExit() {
        womanU--;
        mutex.release();
        StateChange();
    }

    public void manEnter(){
        manW++;
        StateChange();
    }

    public void manExit() {
        manU--;
        mutex.release();
        StateChange();
    }

    void StateChange() {
        if(womanU==0 && manU==0) {
            if(manW>womanW) {
                while(manW>0 && manU<BATHROOM_SIZE) {
                    manW--;
                    manU++;
                    mutex.acquireUninterruptibly();
                }
            }
            else {
                while(womanW>0 && womanU<BATHROOM_SIZE) {
                    womanW--;
                    womanU++;
                    mutex.acquireUninterruptibly();
                }
            }
        }
        if(womanU==0 && manU<BATHROOM_SIZE) {
            while(manW>0 && manU<BATHROOM_SIZE) {
                manW--;
                manU++;
                mutex.acquireUninterruptibly();
            }
        }
        if(manU==0 && womanU<BATHROOM_SIZE) {
            while(womanW>0 && womanU<BATHROOM_SIZE) {
                womanW--;
                womanU++;
                mutex.acquireUninterruptibly();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T13:23:26.733

实际上，这个练习是使用监视器完成的，而不是信号量。你所做的大部分都很好，你错过了条件。所以，在你的浴室课上，声明：

一把锁：

```
private Lock lock = new ReentrantLock(); 
```

2 个条件或队列，附加到您的锁：

```
private Condition womenWaitingQueue = lock.newCondition();
private Condition menWaitingQueue = lock.newCondition(); 
```

2 个计数器知道有多少人在等待，2 个计数器知道有多少人正在使用：

```
private int womenWaitingN = 0;
private int menWaitingN = 0;
private int womenUsingN = 0;
private int menUsingN = 0; 
```

当然还有资源的数量：

```
private final int BATHROOM_CAPACITY = 5;
private int free_resources = BATHROOM_CAPACITY; 
```

*所有 4 个功能都在这里，但由于作业标签而被删除*

这里重要的是防止饥饿，如果有女性在等待，则不允许任何男性进入浴室，反之亦然。

所以，条件是如果一个男人想进入浴室，它必须检查浴室是否至少有 1 个空闲位置（使用免费资源）以及浴室是否有女性（使用 womenUsingN）。如果不满足这两个条件中的任何一个，则该人必须等待（使用 menWaitingQueue）：

```
menWaitingQueue.await(); 
```

当一个男人离开浴室时，它必须检查是否有女性在等待（womenWaitingN），如果有，他们会收到通知：

```
womanWaitingQueue.signal(); 
```

因为menUsingN柜台，在浴室里没有男人之前，受此信号通知的女性将无法进入。如果没有女性在等待，则可以示意男性进入浴室。这可以防止饥饿，因为优先考虑异性（如果等待）。

最后一件事是每个函数都必须在每个进入/退出函数的开始/结束时锁定/解锁**锁。**

```
lock.lock();
lock.unlock(); 
```

我认为有了这些新信息，您将能够自己制作这些功能。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T14:24:05.527

我认为您会为整个 mutex.acquire 和 mutex.release 语义而苦苦挣扎，尤其是在 mutex 实际应该保护的内容方面。让我试着稍微简化一下这个问题，给你一个关于如何解决这个问题的提示。

您被要求实现一个比简单信号量更复杂的并发对象，具有两个客户端类和饥饿预防。我不会为你这样做，但我将向你展示一个简单的信号量在 Java6 之前的日子里是什么样子的：

```
public class Resource {

    private int numClients = 0;
    private final int maxClients;

    public Resource(int maxClients) {
        this.maxClients = maxClients;
    }

    public synchronized void acquire() {
        while (!clientCanAcquire()) {
            try {
                wait();
            } catch (InterruptedException e) {
            }
        }
        ++numClients;
        printState();
    }

    public synchronized void release() {
        --numClients;
        printState();
        notify();
    }

    private boolean clientCanAcquire() {
        return numClients < maxClients;
    }

    private void printState() {
        System.out.println("Resource is currently acquired by " + numClients
                + " clients");
    }
} 
```

客户端可以通过以下方式访问它：

```
import java.util.Random;

public class Client implements Runnable {

    private Resource resource;
    private Random rnd = new Random();

    public Client(Resource resource) {
        this.resource = resource;
    }

    public void run() {
        try {
            Thread.sleep(rnd.nextInt(1000));
            resource.acquire();
            Thread.sleep(rnd.nextInt(1000));
            resource.release();
        } catch (InterruptedException e) {
        }
    }
} 
```

可以驱动整个事情的最简单的应用程序看起来像这样：

```
public class App {

    public static void main(String[] arg) {

        Resource r = new Resource(3);
        for (int i = 0; i < 10; i++) {
            Thread client = new Thread(new Client(r));
            client.start();
        }
    }
} 
```

Resource 将确定客户端何时可以访问的信息存储在内部变量中。在多线程应用程序中，对这些变量的访问必须同步。此处显示的是执行此操作的最简单方法，但您也可以说

```
private Object mutex = new Object(); 
```

接着

```
synchronized (mutex) { } 
```

或任何其他类型的互斥体。

您的问题比简单的普通信号量更复杂，但底层逻辑应该非常相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-22T21:23:59.567

[在http://se.inf.ethz.ch/courses/2013a_spring/ccc/](http://se.inf.ethz.ch/courses/2013a_spring/ccc/)有一个解决方案

您可以参考它以获得一些帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T23:54:18.673

@Th0rndike 好的，我按照你的提示写了这样的东西：

```
import java.util.concurrent.Semaphore;
import java.util.concurrent.locks.*;

public class Bathroom implements BathroomInterface {
    private Semaphore mutex = new Semaphore(1, false);

    private Lock lock = new ReentrantLock();
    private Condition womenWaitingQueue = lock.newCondition();
    private Condition menWaitingQueue = lock.newCondition();

    private int womenWaitingN = 0;
    private int menWaitingN = 0;
    private int womenUsingN = 0;
    private int menUsingN = 0;

    private int free_res = BATHROOM_SIZE;

    public void womanEnter() {
        lock.lock();
        if(free_res>0 && menUsingN==0) {
            womenUsingN++;
            free_res--;
            mutex.acquireUninterruptibly();
        }
        else
            try {
                womenWaitingQueue.await();
            }
        catch(Exception e) {
            System.out.println("E!");
        }
        lock.unlock();
    }

    public void womanExit() {
        lock.lock();
        womenUsingN--;
        free_res++;
        mutex.release();
        if(menWaitingN>0) {
            try {
                menWaitingQueue.signal();
            }
            catch(Exception e) {
                System.out.println("E!");
            }
        }
        lock.unlock();
    }

    public void manEnter() {
        lock.lock();
        menUsingN++;
        free_res--;
        if(free_res>0 && womenUsingN==0) {
            mutex.acquireUninterruptibly();
        }
        else
            try {
                menWaitingQueue.await();
            }
        catch(Exception e) {
            System.out.println("E!");
        }
        lock.unlock();    
    }

    public void manExit() {
        lock.lock();
        menUsingN--;
        free_res++;
        mutex.release();
        if(womenWaitingN>0) {
            try {
                womenWaitingQueue.signal();
            }
            catch(Exception e) {
                System.out.println("E!");
            }
        }
        lock.unlock();
    }
} 
```

但是当我将它提交给自动程序检查器时，在 1man 和 1woman 测试中一切正常，但在其余部分中，它返回“实时超出”错误。如果我删除 lock.lock()/unlock()，“实时超出”错误将变为“错误答案”。*

# javascript - 浏览器插件将选定的文本保存到本地文件

> ID：11135210
> 
> 赞同：0
> 
> 时间：2012-06-21T09:24:57.970
> 
> 标签：javascript, file, save

我想构建一个浏览器插件，它将用户选择的文本块保存在用户本地系统上的文本文件中（或允许用户下载文本文件）。这可能吗？javascript 可以写入客户端本地系统上的文件吗？

如果是，是否有任何开源插件可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T14:46:43.380

我最近为此开发了一个开源扩展，您可以从以下网址下载它：
[https ://addons.mozilla.org/en-US/firefox/addon/save-text-to-file/](https://addons.mozilla.org/en-US/firefox/addon/save-text-to-file/)

# 将文本保存到文件

将突出显示的文本保存到目录中的文件（默认为用户的主目录）
突出显示某些文本后，右键单击并选择“将文本保存到文件”
文件名具有以下格式`userPreference--<todaysdate>-<timestamp>.txt`

## 特征：

*   在保存的文件名中包含/排除时间/日期戳的选项
*   单击“将文本保存到文件”时显示首选项对话框的选项
*   文本以 UTF-8 (Unicode) 编码，因此可以正确存储所有国际字符
*   确定单击的上下文，如果上下文是文本，则仅显示“保存到文件”菜单项
*   能够将文本附加到现有文件或创建新文件

## 兼容性

*   火狐 2.0 - 17.*
*   海猴 2.0 - 2.13.*

## 本土化：

英语 (en-US)、中文 (zh-CN)、法语 (fr)、德语 (de)、日语 (ja)、波兰语 (pl) 和西班牙语 (es-ES)

# c# - .NET 编写 PCAP 文件

> ID：11135215
> 
> 赞同：3
> 
> 时间：2012-06-21T09:25:20.173
> 
> 标签：c#, .net, winpcap, pcap.net

全部，

我花了相当一部分时间查看各种 PCAP 库，在我承诺编写 PCAP 编写器之前，我想描述一下我的场景并征求意见。

我有一个客户要求我提供读取 pcap 文件并将数据包写入他们选择的数据库的服务。然后客户端可以查询数据库（日期时间范围），结果最终应该是一个 pcap 文件，其中包含与该范围条件匹配的数据包。

到目前为止，我在库中发现的是 pcap 的“转储”，即写作，似乎只有在与特定的捕获设备相关联时才可用。我的情况并非如此。

我正在使用 PCAP.NET 读取原始 pcap 文件并提取数据包。我将数据包存储到数据库中，然后我可以从数据库中读取数据并重新创建数据包，但我没有找到将查询结果写入 pcap 文件的方法。

最简单的情况，考虑一个 Packet 类型的 List 的数据结构（对于实际写入堆栈溢出来说太新了，我不知道如何在尖括号未被过滤的情况下编写 T 列表） - 执行任何可用的库支持将该结构写入 pcap 吗？

鉴于这似乎不是一个常见的场景，我想知道整个场景的有效性。我还应该指出，我总共有两天时间处理 PCAP 数据，这应该是概念验证应用程序，因此我完全有可能错过了使这变得微不足道的知识。

感谢您的宝贵时间和考虑，如果我在 Google 上的尝试以及更多时间在 Stack Overflow 搜索上忽略了显而易见的事情，请提前道歉。

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T06:33:08.523

我相信 Pcap.Net 的静态方法 PacketDumpFile.Dump() 可以为您提供所需的一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-08T23:07:54.407

这是我用 C# 编写的用于将 ETL 转换为 PCAP 文件的简单工具，这是一个如何编写 PCAP 文件的示例。这将使用以太网的链路层标头类型写入文件。其他类型请参考[http://www.tcpdump.org/linktypes.html](http://www.tcpdump.org/linktypes.html)。

Visual Studio 解决方案在这里[https://github.com/chentiangemalc/EtlToCap](https://github.com/chentiangemalc/EtlToCap)

```
using System;
using System.Collections.Generic;
using System.Diagnostics.Eventing.Reader;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace chentiangemalc
{
    public static class NetworkRoutines
    {

        public static long ConvertEtlToPcap(string source, string destination, UInt32 maxPacketSize)
        {
            int result = 0;
            using (BinaryWriter writer = new BinaryWriter(File.Open(destination, FileMode.Create)))
            {

                UInt32 magic_number = 0xa1b2c3d4;
                UInt16 version_major = 2;
                UInt16 version_minor = 4;
                Int32 thiszone = 0;
                UInt32 sigfigs = 0;
                UInt32 snaplen = maxPacketSize;
                UInt32 network = 1; // LINKTYPE_ETHERNET

                writer.Write(magic_number);
                writer.Write(version_major);
                writer.Write(version_minor);
                writer.Write(thiszone);
                writer.Write(sigfigs);
                writer.Write(snaplen);
                writer.Write(network);

                long c = 0;
                long t = 0;
                using (var reader = new EventLogReader(source, PathType.FilePath))
                {
                    EventRecord record;
                    while ((record = reader.ReadEvent()) != null)
                    {
                        c++;
                        t++;
                        if (c == 100000)
                        {
                            Console.WriteLine(String.Format("Processed {0} events",t));
                            c = 0;
                        }
                        using (record)
                        {
                            if (record.Id == 1001 && record.ProviderName == "Microsoft-Windows-NDIS-PacketCapture")
                            {
                                result++;
                                DateTime timeCreated = (DateTime)record.TimeCreated;
                                UInt32 ts_sec = (UInt32)((timeCreated.Subtract(new DateTime(1970, 1, 1))).TotalSeconds);
                                UInt32 ts_usec = (UInt32)(((timeCreated.Subtract(new DateTime(1970, 1, 1))).TotalMilliseconds) - ((UInt32)((timeCreated.Subtract(new DateTime(1970, 1, 1))).TotalSeconds * 1000))) * 1000;
                                UInt32 incl_len = (UInt32)record.Properties[2].Value;
                                if (incl_len > maxPacketSize)
                                {
                                   Console.WriteLine(String.Format("Packet size of {0} exceeded max packet size {1}, packet ignored",incl_len,maxPacketSize));
                                }
                                UInt32 orig_len = incl_len;

                                writer.Write(ts_sec);
                                writer.Write(ts_usec);
                                writer.Write(incl_len);
                                writer.Write(orig_len);
                                writer.Write((byte[])record.Properties[3].Value);

                            }
                        }
                    }
                }
            }
            return result;
        }
    }
} 
```

# gnuplot - gnuplot postscript 输出中线段的长度

> ID：11135220
> 
> 赞同：0
> 
> 时间：2012-06-21T09:25:35.460
> 
> 标签：gnuplot, postscript, inkscape, eps

我用 gnuplot 和 postscript eps 增强终端绘制数据文件（即时间序列）。当我想用 inkscape 修改这些图形时，例如更改线条的颜色，这很累人，因为线条被分割成每条 100 点的线段。这意味着我不能一次更改整条线的颜色。

是否有可能更改默认的线段长度，或者是否有解决此问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:40:46.853

刚刚找到解决方案：

```
sed -i 's/\(stroke\ [0-9]*\ [0-9]*\ M\)/%\1/g' FILENAME.eps 
```

这样可以防止线路断开

# html - Musicplayer 在网站上导航时停止

> ID：11135224
> 
> 赞同：0
> 
> 时间：2012-06-21T09:25:55.290
> 
> 标签：html, wordpress, audio

即使您从首页转到子页面，如何使此页面上的音乐播放器连续播放？就像现在一样，当您进入下一页或刷新时它会停止。

我将 Wordpress 与定制的 WP 模板一起使用。

[http://cpanel12.proisp.no/~annaryuh/](http://cpanel12.proisp.no/~annaryuh/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:18:55.943

这个 Wordpress 插件可以帮助你 - [**Audiobar**](http://wordpress.org/extend/plugins/audiobar/)。

> Audiobar 是一个时尚的音频播放器栏，当访问者浏览时会继续播放

其他一些插件可以在 Wordpress 中更好地播放音乐：

1.  [Blubrry PowerPress 播客插件](http://wordpress.org/extend/plugins/powerpress/)
2.  [具有自动恢复功能的音频播放列表管理器](http://wordpress.org/extend/plugins/tierra-audio-with-autoresume/)

您也可以使用 HTML5`<audio>`标签在您的网站上插入声音文件。查看这篇文章：[掌握 HTML5 音频标签](http://www.catswhocode.com/blog/mastering-the-html5-audio-property)

希望这会帮助你。

# date - SPARQL 日期转换

> ID：11135233
> 
> 赞同：5
> 
> 时间：2012-06-21T09:26:15.797
> 
> 标签：date, sparql, dotnetrdf

我们已经创建了一个 SPARQL 端点`dotnetrdf`，我是一个与 SPARQL 相关的初学者。日期字段已存储为格式中的字符串`MM/DD/YYYY`。现在，需要日期比较 ( `> <`)，字符串必须转换为SPARQL 查询`xsd:datetime`或`xsd:date`在 SPARQL 查询中。有没有办法做到这一点？还有其他选择吗？

中是否有任何可用于与日期相关的 SPARQL 查询的好示例`dotnetrdf`？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T13:56:27.250

我认为答案是*可以*，但可能不想！

您应该能够使用 SPARQL 1.1[`SUBSTR`函数](http://www.w3.org/TR/sparql11-query/#func-substr)以及`concat`和来做到这一点`strdt`。

类似的东西

```
strdt(concat(substr(?x, 7, 4), '-', substr(?x, 1, 2), '-', substr(?x, 4, 2), 'T00:00:00'), xsd:dateTime) 
```

与您的日期值`?x`绑定的位置。假设没有拼写错误`MM/DD/YYYY`，该函数的返回值应该是合法的。`xsd:dateTime`

如果是我，我会提取所有`MM/DD/YYYY`数据，在外部对其进行处理，然后将其他数据添加为`xsd:dates`or `xsd:dateTimes`。

# bash - 如何根据 curl 中的 HTTP 状态代码分支 shell 脚本？

> ID：11135236
> 
> 赞同：4
> 
> 时间：2012-06-21T09:26:21.543
> 
> 标签：bash, curl

我正在编写一个用于备份的 bash 脚本。该脚本将运行 curl，这将返回特定代码。

根据此代码的结果：

*   脚本必须继续运行（如果返回码正常，如 200）或
*   脚本必须返回一个不正常的状态（如果返回码不正常，比如 400）并结束脚本而不做任何事情

如何从 curl 中读出返回值？对你们大多数人来说都是简单的脚本，但是...... ;-)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T10:22:51.050

### 问题

curl 程序是 shell 友好的，这意味着它的退出状态反映了 curl 的状态，而不是 HTTP 状态码。

### 解决方案

您可以对 URL 进行第二次调用以获取状态代码，使用 write-out 标志将状态代码附加到您的输出中，或解析标头。这里有些例子。

第一个选项是幼稚的，因为您正在进行两个单独的调用，因此调用之间的状态代码可能不同。不过，在某些情况下它可能很有用。

```
# Make a second call to get the status code.
curl --verbose http://www.google.com 2>&1 |
sed -rn 's!^< HTTP/.* ([[:digit:]]+).*!\1!p' 
```

更好的方法是将状态代码附加到标准输出，然后在捕获后将其删除。例如：

```
response=$(curl --silent --write-out "\n%{http_code}\n" http://google.com)
status_code=$(echo "$response" | sed -n '$p')
html=$(echo "$response" | sed '$d') 
```

### 样本输出

使用上面的示例，您可以以任何您喜欢的方式使用这些结果。例如，要分别查看 HTML 和状态码，您可以执行以下操作：

```
$ echo "$html"; echo; echo "HTTP Status Code: $status_code"
<HTML><HEAD><meta http-equiv="content-type" content="text/html;charset=utf-8">
<TITLE>301 Moved</TITLE></HEAD><BODY>
<H1>301 Moved</H1>
The document has moved
<A HREF="http://www.google.com/">here</A>.
</BODY></HTML>

HTTP Status Code: 301 
```

### 分枝

现在您有了状态代码，您可以使用 if/then 或 case 语句基于值进行分支。例如：

```
case "$status_code" in
    200) echo 'Success!'
         ;;
      *) echo 'Fail!'
         exit 1
         ;;
esac 
```

请注意，您必须设置自己的退出状态，并且不能只重复使用 HTTP 状态代码。shell 退出状态必须介于 0-255 之间，并且许多 HTTP 状态代码超出该范围。

### 也可以看看

*   [如何使用 AWK 单线获取 HTTP 状态代码？](https://stackoverflow.com/questions/11137310/how-can-i-get-an-http-status-code-with-an-awk-one-liner)
*   [https://superuser.com/questions/272265/getting-curl-to-output-http-status-code](https://superuser.com/questions/272265/getting-curl-to-output-http-status-code)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T18:36:51.003

```
curl -i stackoverflow.com 2>/dev/null | head -n 1 | cut -d\  -f2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T09:37:30.773

我写了一个demo，可以打印状态码。:)

```
#!/bin/bash

status_line=`curl -i stackoverflow.com 2>/dev/null | head -n 1`
status_code=`echo $status_line | awk '{print $2}'`
echo "STATUS_CODE: ${status_code}" 
```

# c# - 事件处理程序和数据网格

> ID：11135239
> 
> 赞同：0
> 
> 时间：2012-06-21T09:26:26.877
> 
> 标签：c#, wpf, wpfdatagrid

我在处理`SelectionChanged`数据网格控件中的事件时遇到了一点问题。当用户选择另一行时，我想只显示一条消息。显示的消息框没问题，一切正常，但选择速度变慢，因为我这样调用事件

```
private void dgemp_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    MessageBox.Show(((Emplooyee)dgemp.SelectedItem).fullname);
} 
```

也就是说，只有当我关闭消息框时，我才会看到数据网格上出现选择突出显示。有没有我可以使用或调用的方法或其他事件让它一次选择行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:36:44.970

用这个：

```
private void dgemp_RowHeaderMouseClick(object sender, DataGridViewCellMouseEventArgs e)
{
    MessageBox.Show(((Emplooyee)dgemp.SelectedItem).fullname);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:44:35.740

MessagebBox 是模态的，将在打开时暂停执行。我的建议是创建一个单独的窗口来显示您的消息，在带有 DataGrid 的窗口中的单独控件中显示您的消息，或者您可以尝试使用`Dispatcher.BeginInvoke`异步创建 MessageBox。

# eclipse - Eclipse + maven即使存在也无法打开POM

> ID：11135241
> 
> 赞同：7
> 
> 时间：2012-06-21T09:26:33.590
> 
> 标签：eclipse, maven, m2e

我在eclipse中有一个maven项目，有一些依赖：

```
<repositories>
    <repository>
        <id>bukkit-repo</id>
        <url>http://repo.bukkit.org/content/groups/public/</url>
    </repository>
</repositories>
<dependencies>
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-lang3</artifactId>
        <version>3.1</version>
    </dependency>
    <dependency>
        <groupId>org.bukkit</groupId>
        <artifactId>bukkit</artifactId>
        <version>1.2.5-R1.2</version>
    </dependency>
<dependency> 
```

一个（apache commons）来自核心存储库，但另一个来自其他一些 Maven 服务器。

依赖项已成功导入，并显示在 eclipse 项目中。我可以`commons-lang3-3.1.jar`在包资源管理器中右键单击，然后单击 Maven -> Open POM，然后打开 pom 文件。

但是，如果我对 执行相同操作`bukkit-1.2.5-R1.2.jar`，则会失败并显示以下消息：

> [错误] 无法解析工件 org.bukkit:bukkit:pom:1.2.5-R1.2

令人困惑的部分是我可以打开 eclipse 创建的 maven 存储库索引，并看到所需的文件在那里：

```
\.m2\repository\org\bukkit\bukkit\1.2.5-R1.2:
    bukkit-1.2.5-R1.2.jar
    bukkit-1.2.5-R1.2.jar.lastUpdated
    bukkit-1.2.5-R1.2.jar.sha1
    bukkit-1.2.5-R1.2.pom
    bukkit-1.2.5-R1.2.pom.lastUpdated
    bukkit-1.2.5-R1.2.pom.sha1
    ... 
```

为什么eclipse/m2e/maven 找不到并打开这个POM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:32:31.277

嗨，问题是由 *.lastupdated 文件引起的。如果第一次无法解决依赖关系，则会生成这些文件，并在 24 小时内阻止对相应工件的存储库查找。（这是在 Maven 中实现的，作为性能改进）......我假设您在遇到问题后添加了 repo，无法解决依赖关系。只需删除 *.lastUpdated 文件并再次运行构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:10:26.633

我使用[SpringSource 工具套件](http://www.springsource.org/sts)。它基于 Eclipse，让您无需在 Eclipse 上安装 maven 插件，还可以自动解决依赖关系。它可以让你像其他 Java 项目一样导入 maven 项目。只需单击“导入”->“将现有项目导入工作区”，就是这样。

对于配置和 repo 位置，默认情况下它使用 .m2\settings.xml 的路径，但您始终可以通过转到“首选项”->“Maven”->“用户设置”来编辑它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T20:36:34.847

您是否尝试更新本地存储库索引？这是通过在 Eclipse 中打开 Maven 存储库视图（窗口 > 显示视图 > 其他..）并在“本地存储库”中选择重建索引来完成的。

# model-view-controller - 在客户端和服务器中使用 MVC 模式

> ID：11135242
> 
> 赞同：1
> 
> 时间：2012-06-21T09:26:34.743
> 
> 标签：model-view-controller, backbone.js

我正在尝试几天来寻找在客户端和服务器中都使用 MVC 模式的理由。我目前在服务器端使用 MVC 框架，并且创建了一个 RESTfull api。我已经使用[jsrender创建了模板](https://github.com/BorisMoore/jsrender/tree/master/demos)

```
<script id="housestemplate" type="text/x-jquery-tmpl">
    <li><a href="#" onclick="gethouse({{:house.id}});">
        <h3>{{:house.house_type.type}}</h3>
        <p>{{:house.area}} {{:house.bedroom_num}}</p></a>
</script> 
```

然后我使用 ajax 来检索和填充模板

```
 $.ajax
        ({
            type:"GET",
            url: url ,
            success:function (data) {
                $("#renderHouse").html($("#housestemplate").render(data));
            }
        }); 
```

Javascript MVC 框架如何在不破坏 DRY 规则的情况下改进此功能，模型和视图（模板）在客户端和服务器代码中重复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:49:18.303

对于`that`特定的例子，这绝对是一种矫枉过正，你最好使用简单的 javascript/jquery。

但是，将 javascript/jquery 的数量增加到大约 500 行。它看起来怎么样？可管理？1000-2000 LOC怎么样？现在，您希望将所有代码组织为对象（类:) 和可以相互通信的方法，就像后端服务的组织方式一样。嗯……那又怎样？好吧，backbone.js 来救援！它有助于将您的代码组织成 MVC(C) 范式（后者 C 是`Collection`）。因此，您将代码组织和事件驱动的通信作为框架的一部分，并且您希望之前的 2k 行代码最初以这种方式组织。

那么，骨干带给你什么？意大利面条的代码组织和预防。事实上，您可以使用类似 UML 的分析（类图等）来分析和设计应用程序的“前端”并使其更易于维护。

所以你想问的问题是，值得吗？这取决于您期望的 javascript 数量和前端的范围/大小。正如@jakee 指出的那样，将客户端/服务器视为在不同领域中运行确实有帮助。

祝你好运！

# extjs - 从 ExtJs 4 中的模式对话框返回值

> ID：11135244
> 
> 赞同：4
> 
> 时间：2012-06-21T09:26:43.013
> 
> 标签：extjs, extjs4

我正在尝试覆盖 ExtJS 4 中的 window.confirm。覆盖应该返回 true 或 false（就像确认但具有出色的 UI）。

```
window.confirm=function(msg) {var val=Ext.create("Ext.Window",{
    title : 'Extra window!',
    width : 150,                            
    height: 100,
    closable : true,                           
    html : msg,                         
    modal : true,
    onEsc:aa,
    items:[
           {
               xtype:'button',
               text:'Ok',
               handler:function()
               {
                   return true;
               }
           },
           {
               xtype:'button',
               text:'Cancel',
               handler:function(){
                   return false;
               }
           }
           ]
}).show();
function aa(btn)
{
    return false;
} 
```

无论我在哪里使用确认，我都会得到模态窗口，但它没有返回真或假，它是异步运行的。

我尝试使用 showModalDialog 而不是确认，这一次我也没有得到返回值。

是否可以根据用户选择返回true或false（当用户选择ok然后返回true，点击取消时返回false）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T11:55:39.107

您不能以同步方式调用模态对话框。如果您想以某种方式将其包装到实用程序函数中，您将从应用程序的不同位置调用，您需要执行以下操作：

```
showConfirmationDialog: function(question, yesCallback) {
    //... Create you window
    //... Show window - add handler to the YES button and call yesCallback from it
},

...

otherFunction: function() {

   this.showConfirmationDialog('Do you want to delete record?', function() {
      // Delete record
   });

} 
```

# c# - 我应该将什么“长度”参数传递给 SqlDataReader.GetBytes()

> ID：11135245
> 
> 赞同：28
> 
> 时间：2012-06-21T09:26:50.253
> 
> 标签：c#, .net, vb.net, ado.net, sqldatareader

我有一个 SqlDataReader，需要使用 SqlDataReader.GetBytes() 方法从中读取一个 varbinary(max) 列。此方法填充一个字节数组，因此需要知道要读取的数据长度。

这就是我感到困惑的地方。显然我想读取从该行/列中的数据库返回的所有数据，那么我应该传递什么“长度”参数？

据我所知，SqlDataReader 没有提供任何方法来发现可用数据的长度，因此这种方法对我来说似乎相当尴尬。

我很想在这里传递 int.MaxValue 并忘记这个问题，但是关于这个的一些事情并不适合我。

我知道我可以改为致电

```
byte[] value = (byte[])dataReader["columnName"]; 
```

..这似乎完全解决了内部的长度问题。但是，我正在使用围绕 SqlDataReader.GetXXXX() 方法构建的一组复杂的代码生成模板。所以我很喜欢使用 GetBytes，需要了解它的正确用法。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-21T09:48:36.653

处理时`varbinary(max)`，有两种情况：

*   数据长度适中
*   数据的长度很大

`GetBytes()`适用于**第二种**情况，当您使用`CommandBehaviour.SequentialAccess`以确保您正在*流式传输*数据时，而不是*缓冲*它。特别是，在这种用法中，您通常会（例如）在流中、在循环中写入。例如：

```
// moderately sized buffer; 8040 is a SQL Server page, note
byte[] buffer = new byte[8040]; 
long offset = 0;
int read;
while((read = reader.GetBytes(col, offset, buffer, 0, buffer.Length)) > 0) {
    offset += read;
    destination.Write(buffer, 0, read); // push downstream
} 
```

然而！如果您使用的是中等大小的数据，那么您的原始代码：

```
byte[] data = (byte[])reader[col]; 
```

**很好！！**. 这种方法没有任何问题，事实上，`Get*`API在某些情况下*被破坏*了——`GetChar()`这是一个值得注意的例子（提示：它不起作用）。

使用现有的代码*并不重要*——`Get*`在这种情况下，强制转换方法是非常合适的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T09:30:39.047

你可能会这样做。在 MSDN 上找到。可能它可以满足您的目的

```
 // Reset the starting byte for the new BLOB.
  startIndex = 0;

  // Read the bytes into outbyte[] and retain the number of bytes returned.
  retval = myReader.GetBytes(1, startIndex, outbyte, 0, bufferSize);

 // Continue reading and writing while there are bytes beyond the size of the buffer.
  while (retval == bufferSize)
  {
    bw.Write(outbyte);
    bw.Flush();

    // Reposition the start index to the end of the last buffer and fill the buffer.
    startIndex += bufferSize;
    retval = myReader.GetBytes(1, startIndex, outbyte, 0, bufferSize);
  }

  // Write the remaining buffer.
  bw.Write(outbyte, 0, (int)retval - 1);
  bw.Flush(); 
```

[http://msdn.microsoft.com/en-us/library/87z0hy49%28v=vs.71%29.aspx#Y132](http://msdn.microsoft.com/en-us/library/87z0hy49%28v=vs.71%29.aspx#Y132)

[或者这个](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getbytes.aspx)

```
int ndx = rdr.GetOrdinal("<ColumnName>");
            if(!rdr.IsDBNull(ndx))
           {
            long size = rdr.GetBytes(ndx, 0, null, 0, 0);  //get the length of data
            byte[] values = new byte[size];

            int bufferSize = 1024;
            long bytesRead = 0;
            int curPos = 0;

            while (bytesRead < size)
            {
                bytesRead += rdr.GetBytes(ndx, curPos, values, curPos, bufferSize);
                curPos += bufferSize;
            }
           } 
```

# html - 空 div 的最大高度

> ID：11135248
> 
> 赞同：1
> 
> 时间：2012-06-21T09:26:56.333
> 
> 标签：html, css

我有 DIV 元素，其中只有几行和一个背景图像。图像大小为 335px 高度。

我希望 div 的最大高度为 335px，但如果浏览器窗口较小（移动），则允许它缩小。

但是 div 只是保持 div 中段落的大小。这是我的 DIV 的 CSS 代码。关于如何将默认起始高度设置为 335px 但允许它缩小的任何想法？最大宽度完美。

```
#header
{
    background-image: url('Images/Header.png'); 
    margin: 0 auto;
    max-width:1024px; 
    max-height: 335px;
    background-size: 100% 100%;
    height: 100%;
    overflow: auto;
    --max-line-height: 335px;
} 
```

非常感谢 D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:36:21.977

试试这个 CSS -

```
#header{
    background-image: url('Images/Header.png');
    margin: 0 auto;
    max-width:1024px;
    height: 335px;
    background-size: 100% 100%;
    overflow: auto;
    border: 1px solid #f00;
} 
```

对于移动设备，请使用`CSS Media Queries` [http://www.alistapart.com/articles/responsive-web-design/](http://www.alistapart.com/articles/responsive-web-design/)

```
@media only screen and (max-device-height: 335px) {
 #header{
        height: auto;
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:43:31.020

您可以使用`min-height: 335px`或`height: 335px`。所以你的`#header`CSS将是，

```
#header
{
    background-image: url('Images/Header.png'); 
    margin: 0 auto;
    max-width:1024px; 
    max-height: 335px;
    background-size: 100% 100%;
    min-height: 335px;    /* OR */  height: 335px;
    overflow: auto;
    --max-line-height: 335px;
} 
```

# google-maps - 使用谷歌地图收集标记

> ID：11135253
> 
> 赞同：1
> 
> 时间：2012-06-21T09:27:20.733
> 
> 标签：google-maps, google-maps-api-3, bing-maps

我在 Bing 地图上做了很多工作，但我对 Google 地图很陌生。

使用 Bing 地图 API 时，有一个东西被称为`EntityCollection`代表一组具有有用功能的叠加层，例如获取计数、隐藏或删除组内的所有标记。当您想在地图上表示不同类型的对象时，我发现它非常方便。

但经过一些研究，我似乎无法在谷歌地图中找到等效的东西。有没有类似的东西，或者我必须编写自己的`MarkerCollection`课程？有没有人已经用一些我可以看看的代码示例完成了这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:38:03.840

并非每种类型的命令都可以在标记上使用，但您始终可以手动实现所有功能。计数很容易，只需创建一个变量并在每次初始化标记时递增它。

隐藏标记

```
marker.setVisible(false); 
```

要删除标记，我相信它是这样的（虽然以前从未使用过）

```
marker.setMap(null); 
```

要处理多个标记，请查看此链接。 [https://developers.google.com/maps/articles/toomanymarkers](https://developers.google.com/maps/articles/toomanymarkers)

特别是，我认为marker manager是最好的。我对标记管理器的唯一烦恼是，当我使用带有标签的标记时它无法正常工作，因此不得不编辑标记管理器。

# c - 解释 strace 输出

> ID：11135254
> 
> 赞同：11
> 
> 时间：2012-06-21T09:27:20.970
> 
> 标签：c, reverse-engineering, strace

使用 strace 可以查看特定文件描述符和特定命令的 ioctl 调用。第三个参数是一个结构，但 strace 将其显示为指向内存的原始指针。strace 输出示例：

```
open("/dev/node", O_RDWR) = 3
ioctl(3, 0x108, 0x8f0eb18) = 0
close(3) 
```

有没有办法（strace 选项或其他工具）来查看结构是什么，或者至少是原始指针后面的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:17:22.163

在 gdb 中，如果在调用 ioctl 之前将其停止，则可以输入：

```
(gdb) p *(ioctl_struct *) 0x8f0eb18 
```

这将向您展示该内存位置的内容如何映射到 ioctl_struct。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-30T17:44:13.203

我遇到了一个类似的问题：想要检查一个系统调用`ioctl`（`vde_switch`它创建一个 TUN/TAP 虚拟网络接口），以便知道我在我的代码中做错了什么（它必须做同样的事情`vde_switch`，但以编程方式。）

通过运行：

```
sudo strace vde_switch -tap tap0 
```

作为 Terry Greentail，我能够知道正在进行的系统调用是`ioctl(5, TUNSETIFF, 0x7fffa99404e0)`并且指针将是对 type 结构的引用`struct ifreq`。在我的代码中，我有类似`ioctl(tapfd, TUNSETIFF, &ifr_dev)`.

最初我试图让 gdb 在系统调用上停止，设置：（`catch syscall ioctl`我已经运行 gdb as `gdb --args vde_switch -tap tap0`），但每当遇到问题时，gdb 都没有显示有关`ioctl`. 在为此苦苦挣扎了一段时间后，我决定在 gdb 中运行 strace，如下所示：

```
gdb --args strace vde_witch -tap -tap0 
```

尽管没有断点以这种方式工作，但输出显示了正在使用的文件描述符：

```
open("/dev/net/tun", O_RDWR)            = 9
ioctl(9, TUNSETIFF, 0x7fffffffe350)     = 0 
```

所以我又试了一次：`gdb --args strace vde_witch -tap -tap0`并设置了一个条件断点：

```
b ioctl if $rdi==9 
```

调用约定（我在 AMD64 上）`RDI`用于第一个参数、`RSI`第二个和`RDX`第三个参数（参见[System V AMD64 ABI](http://en.wikipedia.org/wiki/X86_calling_conventions#System_V_AMD64_ABI)。）最后，当断点被命中时，我能够检查`ifreq`结构：

```
Breakpoint 6, ioctl () at ../sysdeps/unix/syscall-template.S:81
81      ../sysdeps/unix/syscall-template.S: File or directory not found.

(gdb) p (struct ifreq) *$rdx
$5 = {ifr_ifrn = {ifrn_name = "tap0", '\000' <repete 11 vezes>}, ifr_ifru = {ifru_addr = {sa_family = 4098, sa_data = '\000' <repete 13 vezes>}, ifru_dstaddr = {sa_family = 4098, sa_data = '\000' <repete 13 vezes>}, ifru_broadaddr = {sa_family = 4098, sa_data = '\000' <repete 13 vezes>}, ifru_netmask = {sa_family = 4098, sa_data = '\000' <repete 13 vezes>}, ifru_hwaddr = {sa_family = 4098, sa_data = '\000' <repete 13 vezes>}, ifru_flags = 4098, ifru_ivalue = 4098, ifru_mtu = 4098, ifru_map = {mem_start = 4098, mem_end = 0, base_addr = 0, irq = 0 '\000', dma = 0 '\000', port = 0 '\000'}, ifru_slave = "\002\020", '\000' <repete 13 vezes>, ifru_newname = "\002\020", '\000' <repete 13 vezes>, ifru_data = 0x1002 <Address 0x1002 out of bounds>}} 
```

# list - 刷新 lwit 中的列表内容

> ID：11135257
> 
> 赞同：0
> 
> 时间：2012-06-21T09:27:32.070
> 
> 标签：list, combobox, refresh, lwuit

我正在开发一个应用程序，它`List`根据从中选择的类别向用户提供一个项目`ComboBox`。我在 lwuit 中实现这个。问题是，当我从 更改所选项目时`ComboBox`，更新后的列表不会出现在屏幕上。如何刷新`List`屏幕内的内容。`ComboBox`当用户回到这里时，必须维护从中选择的项目`Form`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:53:42.967

1）在组合框上添加一个选择监听器（combox.addselectionlistener(new Sele....)）

2）在选择事件发生变化时获取所选项目及其索引

3）根据选择为您的列表分配一个新的数据源：

```
yourList = new List(java.lang.Object[] items);// this can be an array of strings. 
```

因此，如果组合框中有 3 个项目，则组合框的每个项目都应该有 3 个不同的字符串数组。

4）当用户返回表单时，将所选项目设置为：

```
combox.setSelectedIndex(index of that item here) 
```

# html - 我应该使用标签而不是图标吗？

> ID：11135261
> 
> 赞同：620
> 
> 时间：2012-06-21T09:27:38.843
> 
> 标签：html, semantic-markup

* * *

## 回答 #1

> 赞同：644
> 
> 时间：2012-06-21T09:29:51.030

> 他们为什么使用`<i>`标签来显示图标？

因为它是：

*   短的
*   i 代表图标（虽然不是 HTML）

> 这不是一个坏习惯吗？

糟糕的练习。这是性能对语义的胜利。

* * *

## 回答 #2

> 赞同：293
> 
> 时间：2013-01-28T04:27:09.040

我在这里跳得有点晚了，但我自己思考时偶然发现了这个页面。当然，我不知道 Facebook 或 Twitter 是如何证明它的合理性，但这是我自己对它的价值的思考过程。

最后，我得出结论，这种做法并没有那么无意义（那是一个词吗？）。事实上，除了简短和“i 代表图标”的良好关联之外，我认为当简单的`<img>`标签不实用时，它实际上是图标最语义化的选择。

**1\. 用法与规范一致。**

虽然它可能不是 W3 主要考虑的，但在我看来，官方规范`<i>`可以很容易地容纳一个图标。毕竟，回复箭头符号以另一种方式表示“回复”。它表达了读者可能不熟悉的技术术语，通常会用斜体表示。（“在 Twitter，这就是我们所说的*回复箭头*。”）它是来自另一种语言的术语：一种符号语言。

`<i>shout out</i>`如果 Twitter 使用或（在英文页面上）而不是箭头符号，`<i>[Japanese character for reply]</i>`那将与规范一致。那为什么不`<i>[reply arrow]</i>`呢？（我在这里说的是严格的 HTML 语义，而不是可访问性，我会谈到。）

据我所见，图标使用明确违反规范的唯一部分是“文本范围”短语（当标签也不包含文本时）。很明显，该`<i>`标签主要用于文本，但与标签的整体意图相比，这是一个非常小的细节。这个标签的重要问题不是它包含什么格式的内容，而是该内容的含义是什么。

当您考虑到网站上几乎不存在“文本”和“图标”之间的界限时，尤其如此。文本可能看起来更像一个图标（如在日语示例中）或图标可能看起来像文本（如在显示“提交”的 jpg 按钮或带有叠加标题的猫照片中）或文本可能被替换或增强通过 CSS 生成的图像。文字，图像 - 谁在乎？都是内容。只要每个人——有缺陷的人类、有缺陷的浏览器、搜索引擎蜘蛛和其他各种机器都能理解这个意思，我们就完成了我们的工作。

因此，规范的作者没有想到（或选择）澄清这一点的事实不应该束缚我们做有意义的事情并且与标签的精神一致。该`<a>`标签最初旨在将用户带到其他地方，但现在它可能会弹出一个灯箱。大呼，对吧？如果有人在规范赶上之前想出了如何在点击时弹出一个灯箱，他们仍然应该使用`<a>`标签，而不是 a `<span>`，即使它与当前定义不完全一致 - 因为它最接近并且是仍然符合标签的精神（“点击这里会发生一些事情”）。同样的处理`<i>`——无论你在里面放什么类型的东西，或者你以多么有创意地使用它，

**2.`<i>`标签为图标元素*添加*语义。**

单独携带图标类的另一种选择是`<span>`，它当然没有任何语义含义。当一台机器询问`<span>`它包含什么时，它会说，“我不知道。可能是任何东西。” 但`<i>`标签上写着：“我的表达方式与通常的方式不同，或者可能是一个不熟悉的术语。” 这与“我包含一个图标”不同，但它比得到的更接近它`<span>`！

**3\. 最终，常见的用法是正确的。**

除了上述之外，值得考虑的是机器阅读器（无论是搜索引擎、屏幕阅读器还是其他）可能随时开始考虑 Facebook、Twitter 和其他网站使用`<i>`图标标签。他们并不关心规范，而是关心通过任何必要的方式从代码中提取含义。因此，他们可能会使用这种常见用法知识来简单地记录“这里可能有一个图标”，或者做一些更高级的事情，比如触发查看 CSS 以提示含义，或者谁知道是什么。因此，如果您选择`<i>`在您的网站上使用 for 图标，您可能会提供比规范更多的含义。

此外，如果这种用法变得普遍，将来很可能会包含在规范中。然后您将浏览您的代码，将`<span>`s替换为`<i>`'s! 因此，参与似乎是规范的方向可能是有意义的，尤其是当它与当前规范没有明显冲突时。常见用法往往比其他方式更能规定语言规则。如果你年纪够大了，你还记得“Web site”是新词时的官方拼写吗？字典坚持必须有空格，并且 Web 必须大写。这有语义上的原因。但常见的用法是，“随便，这很愚蠢。我使用'网站'是因为它更简洁，看起来更好。” 而不久之后，

**4\. 所以我继续使用它。**

因此，`<i>`由于规范为机器提供了更多意义，它为人类提供了更多意义，因为我们很容易将“i”与“icon”联系起来，*而且*它只有一个字母长。赢！如果您确保在`<i>`标签内或标签旁边包含等效文本（如 Twitter 所做的那样），那么屏幕阅读器就会知道在哪里单击以回复，如果 CSS 没有加载，链接是可用的，并且人类阅读器具有良好的视力和体面的浏览器会看到一个漂亮的图标。考虑到这一切，我没有看到不利的一面。

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2014-08-01T16:19:43.480

Quentin 的回答明确指出`i`不应使用标签来定义图标。

但是，Holly 认为这`span`本身没有任何意义，并投票赞成`i`而不是`span`标记。

很少有人建议使用`img`它，因为它具有语义并包含`alt`标签。但是，我们也不应该使用`img`，因为即使是空的也会`src`向服务器发送请求。[在这里阅读](http://www.nczonline.net/blog/2009/11/30/empty-image-src-can-destroy-your-site/)

我认为，正确的方法是，

`<span class="icon-fb" role="img" aria-label="facebook"></span>`

这解决了没有`alt`标签的问题，`span`并使视力受损的用户可以访问。它是语义的，不会滥用（黑客攻击）任何标签。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-10-13T16:51:12.827

我在这里对其他所有人的答案采取完全不同的方法。让我在我的解决方案前面加上论证，指出有时标准和约定是要被打破的，尤其是在标准 HTML 词法标记定义的上下文中。

没有什么可以阻止您创建对其目的具有自我描述性的自定义元素。

**现代浏览器甚至 IE 6+（带 shim）都可以支持以下内容：**

```
<icon class="plus"> 
```

或者

```
<icon-add> 
```

只要确保标准化标签：

```
 icon { display:block; margin:0; padding:0; border:0; ... } 
```

如果您需要支持 IE9 或更早版本，请使用 shim（请参阅下面的帖子）。

**查看此 StackOverflow 帖子：**

[有没有办法在 HTML5 中创建自己的 html 标签](https://stackoverflow.com/questions/2802687/is-there-a-way-to-create-your-own-html-tag-in-html5/11467718#11467718)

为了进一步说明我的论点，Google 的 Angular Directives 和新的 Polymer 项目都使用了自定义 HTML 标签的概念。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-01-14T18:24:05.003

我的猜测：因为 Twitter 认为需要支持旧版浏览器，否则他们将使用`:before`/`:after`伪元素。

旧版浏览器不支持我提到的那些伪元素，因此它们需要为图标使用实际的 HTML 元素，并且由于图标没有“专有”标签，它们只是带有`<i>`标签，所有浏览器都支持那个标签。

他们当然可以使用 a `<span>`，就像你一样（这完全没问题），但可能是因为我上面提到的原因加上*Quentin*提到的原因，这也是 Bootstrap 使用`<i>`标签的原因。

当您出于样式原因使用额外标记时，这是一种不好的做法，这就是发明[伪元素](https://developer.mozilla.org/en-US/docs/CSS/Pseudo-elements)的原因，将内容与样式分开......但是当您看到需要支持旧版浏览器时，有时您会被迫做这些事物。

PS。图标以*“i”*开头并且有`<i>`标签的事实完全是巧合。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-05-28T22:24:48.430

我认为这看起来很糟糕 - 因为我最近正在处理一个 Joomla 模板，并且我一直让模板失败 W3C，因为它正在使用`<i>`标签并且已被弃用，因为它最初的用途是斜体化某些东西，现在通过 CSS 完成不再是 HTML。

它确实是非常糟糕的做法，因为当我看到它时，我浏览了模板并将所有`<i>`标签更改为`<span style="font-style:italic">`，然后想知道为什么整个模板看起来很奇怪。

这是以这种方式使用标签是一个坏主意的主要原因`<i>`- 你永远不知道谁会在之后查看你的工作并“假设”你真正想要做的是将文本斜体而不是显示图标。我刚刚在网站上放了一些图标，我用下面的代码做到了

```
<img class="icon" src="electricity.jpg" alt="Electricity" title="Electricity"> 
```

这样我就可以将所有图标放在一个类中，因此我所做的任何更改都会影响所有图标（比如我希望它们更大或更小，或圆形边框等），替代文本让屏幕阅读器有机会告诉人们什么该图标不仅仅是“斜体文本，斜体结尾”（我不完全知道屏幕阅读器如何阅读屏幕，但我想它是这样的），并且标题还让用户有机会将鼠标悬停在图像并获得一个工具提示，告诉他们图标是什么，以防他们无法弄清楚。比使用好得多`<i>`- 而且它通过了 W3C 标准。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-09-09T20:26:24.543

`<a>`当我想在链接标签内放置具有绝对定位的图标时，我还发现这很有用。

我首先考虑了`<img>`标签，但链接内这些标签的默认样式通常具有边框样式和/或阴影效果。另外，使用标签而不定义“src”属性感觉不对，`<img>`而我正在使用背景图像样式表声明，以便图像不会重影和拖动。

在这一点上，您正在考虑像`<span>`或这样的标签`<i>`- 在这种情况下`<i>`，这种类型的图标非常有意义。

总而言之，我认为它除了直观之外的好处是它需要最少的样式表调整才能使这个标签作为一个图标工作。

# jquery - （问）window.location.href 不起作用 jquery

> ID：11135263
> 
> 赞同：0
> 
> 时间：2012-06-21T09:27:46.193
> 
> 标签：jquery, html, cordova

我有一些使用 jquery mobile + phonegap 的代码并在我的 android 上运行它，我想将页面重定向到 div id 内容...我的意思是在我拍照后我想加载下一页...这里是我的代码...

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
        <meta http-equiv="Content-type" content="text/html; charset=utf-8">
        <link rel="stylesheet" href="js/jquery.mobile-1.0.min.css" />
        <script src="js/jquery-1.6.4.min.js"></script>
        <script src="js/jquery.mobile-1.0.min.js"></script>
        <script type="text/javascript" charset="utf-8" src="phonegap-1.1.0.js"></script>
        <script type="text/javascript" charset="utf-8">
        var deviceReady = false;

        /**
         * Take picture with camera
         */
        function takePicture() {
            navigator.camera.getPicture(

            function (uri) {
                var img = document.getElementById('camera_image');
                img.style.visibility = "visible";
                img.style.display = "block";
                img.src = uri;
                document.getElementById('camera_status').innerHTML = "Success";
                window.location.href = "#page2";

            }, function (e) {
                console.log("Error getting picture: " + e);
                document.getElementById('camera_status').innerHTML = "Error getting picture.";
            }, {
                quality: 50,
                destinationType: navigator.camera.DestinationType.FILE_URI
            });
        };

        /**
         * Select picture from library
         */
        function selectPicture() {
            navigator.camera.getPicture(

            function (uri) {
                var img = document.getElementById('camera_image');
                img.style.visibility = "visible";
                img.style.display = "block";
                img.src = uri;
                document.getElementById('camera_status').innerHTML = "Success";
                window.location.href = "#page2";
            }, function (e) {
                console.log("Error getting picture: " + e);
                document.getElementById('camera_status').innerHTML = "Error getting picture.";
            }, {
                quality: 50,
                destinationType: navigator.camera.DestinationType.FILE_URI,
                sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
            });
        };

        /**
         * Upload current picture
         */
        function uploadPicture() {

            // Get URI of picture to upload
            var img = document.getElementById('camera_image');
            var imageURI = img.src;
            if (!imageURI || (img.style.display == "none")) {
                document.getElementById('camera_status').innerHTML = "Take picture or select picture from library first.";
                return;
            }

            // Verify server has been entered
            server = document.getElementById('serverUrl').value;
            if (server) {

                // Specify transfer options
                var options = new FileUploadOptions();
                options.fileKey = "file";
                options.fileName = imageURI.substr(imageURI.lastIndexOf('/') + 1);
                options.mimeType = "image/jpeg";
                options.chunkedMode = false;

                // Transfer picture to server
                var ft = new FileTransfer();
                ft.upload(imageURI, server, function (r) {
                    document.getElementById('camera_status').innerHTML = "Upload successful: " + r.bytesSent + " bytes uploaded.";
                }, function (error) {
                    document.getElementById('camera_status').innerHTML = "Upload failed: Code = " + error.code;
                }, options);
            }
        }

        /**
         * View pictures uploaded to the server
         */
        function viewUploadedPictures() {

            // Get server URL
            server = document.getElementById('serverUrl').value;
            if (server) {

                // Get HTML that lists all pictures on server using XHR 
                var xmlhttp = new XMLHttpRequest();

                // Callback function when XMLHttpRequest is ready
                xmlhttp.onreadystatechange = function () {
                    if (xmlhttp.readyState === 4) {

                        // HTML is returned, which has pictures to display
                        if (xmlhttp.status === 200) {
                            document.getElementById('server_images').innerHTML = xmlhttp.responseText;
                        }

                        // If error
                        else {
                            document.getElementById('server_images').innerHTML = "Error retrieving pictures from server.";
                        }
                    }
                };
                xmlhttp.open("GET", server, true);
                xmlhttp.send();
            }
        }

        /**
         * Function called when page has finished loading.
         */
        function init() {
            document.addEventListener("deviceready", function () {
                deviceReady = true;
            }, false);
            window.setTimeout(function () {
                if (!deviceReady) {
                    alert("Error: PhoneGap did not initialize.  Demo will not run correctly.");
                }
            }, 2000);
        }
        </script>
    </head>
    <body onload="init();">
        <!-- Page 1 -->
        <div data-role="page" id="page1">
            <!-- Page 1 Header -->
            <div data-role="header">
                <h1>Ambil Gambar</h1>
            </div>
            <!-- Page 1 Content -->
            <div data-role="content">
                <center>
                    <a href="javascript:void(0)" onclick="takePicture();">
                       <img src="image/camera.png" width="150px" height="150px"></a>
                    <br>
                    <br>
                    <b>Atau</b>
                    <br>
                    <br>
                    <a href="javascript:void(0)" onclick="selectPicture();">
                       <img src="image/upload.png"></a>
                    <p>Find my friend Page 3
                        <a href="#page2">here</a>
                    </p>
                </center>
            </div>
            <!-- Page 1 Footer -->
            <div data-role="footer">
                <h4>Footer 1</h4>
            </div>
        </div>
        <!-- Page 2 -->
        <div data-role="page" id="page2">
            <!-- Page 2 Header -->
            <div data-role="header">
                <h1>Header 2</h1>
            </div>
            <!-- Page 2 Content -->
            <div data-role="content">
                <img style="width:100%;visibility:hidden;display:none;" id="camera_image" src="" />
                <p>Find my friend Page 3
                    <a href="#page3">here</a>
                </p>
            </div>
            <!-- Page 2 Footer -->
            <div data-role="footer">
                <h4>Footer 2</h4>
            </div>
        </div>
        <!-- Page 3 -->
        <div data-role="page" id="page3">
            <!-- Page 3 Header -->
            <div data-role="header">
                <h1>Header 3</h1>
            </div>
            <!-- Page 3 Content -->
            <div data-role="content">
                <h3>Server:</h3>
                <b>Images on server:</b>
                <div id="server_images"></div>
                <input type="button" onclick="uploadPicture();" value="Upload Picture" />
                <input type="button" onclick="viewUploadedPictures();" value="View Uploaded Pictures" />
            </div>
        </div>
    </body>

</html> 
```

任何人都可以帮助我吗？之前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:34:47.217

而不是 window.location.href 使用 window.location.hash。

# c# - 用于将字符串转换为 dd.mm.yyyy hh:mm 的 SqlDataSource 更新语句

> ID：11135268
> 
> 赞同：0
> 
> 时间：2012-06-21T09:27:52.490
> 
> 标签：c#, asp.net, sql-server

我有一个网格视图和一个`SqlDataSource`.

在`SqlDataSource`'s update 语句中，我试图将列的字符串转换为日期时间：

```
Date = Convert(DateTime, @Date, 104) 
//this converts the string to mm.dd.yyyy . 
```

我找不到代码`mm.dd.yyyy hh:mm .`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:35:20.587

要以所需格式在网格中显示它，请使用`yourDate.ToString(yourFormat)`，例如：

```
DateTime.Today.ToString("mm.dd.yyyy") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T23:02:54.757

您的问题表明您正在使用 GridView 和 DataSource。

我假设您的源数据在 SQL Server 中采用 DateTime 格式。
如果是这样，请将其保留为该格式，否则，在返回时将其转换为 DateTime。

不要尝试在 SQL Server 端将其转换为字符串，也*不要***在**DataTable 上运行传递并使用 C# 将其转换为字符串。这是错误的做法。

 *您需要做的就是在 GridView 的 BoundField 列上设置*DataFormatString ，如下所示：*

```
BoundField bf = new BoundField();
bf.DataField = "xxxxx";//The field from your DataSource you are binding to.
bf.HeaderText = "yyyyy";//The column header text of your GridView.
bf.DataFormatString = "{0:MM.dd.yyyy hh:mm}";
gv.Columns.Add(bf);//Add the column to your GridView. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:40:33.537

```
DateTime MyDateTime;

MyDateTime = new DateTime();
MyDateTime = DateTime.ParseExact(MyString, "MM.dd.yyyy hh:mm", 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T09:42:54.447

```
CONVERT(varchar(17),Date,113) 
```

使用它，它会得到，2011 年 11 月 29 日 12:58

或者使用这个；

```
SELECT CONVERT(varchar(17),OrderDate,105)+' '+CONVERT(varchar(17),OrderDate,108) as Date FROM Orders 
```

这将是 ; 29-11-2011 12:58:48*

# eclipse - 为 Cocos2d-x Eclipse 构建 cURL，我缺少一些东西

> ID：11135270
> 
> 赞同：2
> 
> 时间：2012-06-21T09:27:57.787
> 
> 标签：eclipse, curl, cocos2d-x

在 Xcode 中没有问题，但在 Eclipse 中不幸的是。

我在 Android.mk 中做了这个：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := game

LOCAL_MODULE_FILENAME := libgame

LOCAL_SRC_FILES := helloworld/main.cpp \
                   ../../Classes/AppDelegate.cpp \
                   ../../Classes/HelloWorldScene.cpp\
                   ../../Classes/GameplayLayer.cpp\
                   ../../Classes/swimmerc.cpp\
                   ../../Classes/pugixml.cpp

LOCAL_C_INCLUDES := ../../libs/cocos2dx \
../../libs/cocos2dx/platform \
../../libs/cocos2dx/include \
../../libs/CocosDenshion/include \
$(LOCAL_PATH)/../../Classes/\

LOCAL_WHOLE_STATIC_LIBRARIES := cocos2dx_static cocosdenshion_static curl_static

include $(BUILD_SHARED_LIBRARY)
$(call import-module,cocos2dx)
$(call import-module,cocos2dx/platform/third_party/android/prebuilt/libcurl)
$(call import-module,CocosDenshion/android) 
```

我把`curl`文件夹放在 Classes 中。然后我将它包含在`GameplayLayer.cpp`. 如果我使用不会发生错误

```
CURL *curl;
CURLcode res; 
```

但只要我放

```
 curl = curl_easy_init(); 
```

我得到一个错误，

```
make: *** [obj/local/armeabi/libgame.so] Error 1 
```

请帮忙，我很乐意捐出我的一个肾脏来换取这个 %&#@ 的工作。

我越来越：

```
undefined reference to `curl_easy_init' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:28:22.250

我在 Android.mk 中添加了这一行以使其工作。

```
LOCAL_STATIC_LIBRARIES := curl_static_prebuilt 
```

当然，为了连接到互联网，您还需要编辑 AndroidManifest.mk 并添加以下行：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

# c# - C# 速记帮助

> ID：11135271
> 
> 赞同：0
> 
> 时间：2012-06-21T09:27:57.847
> 
> 标签：c#, asp.net, shorthand

是否可以简写下面的代码？

本质上，metaItem.Text 是一个包含“true”或“false”的字符串属性 - 我正在处理我无法控制的对象，所以我知道它应该是一个布尔值。

首先，我需要检查 metaItem.Text 是否包含一个值（即不是空字符串）。如果是这样，请将其转换为布尔值。然后将用户控件 (relatedLinks) 的 Visible 属性设置为该值。

```
if (metaItem.Text != string.Empty)
{
    bool bShowRelatedLinks = false;
    bool.TryParse(metaItem.Text, out bShowRelatedLinks);

    if (bShowRelatedLinks)
    {
        relatedLinks.Visible = true;
    }
    else
    {
        relatedLinks.Visible = false;
    }
} 
```

想要使用速记的原因是我有一堆这些条件来显示/隐藏页面的各个部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:30:25.350

```
bool bShowRelatedLinks = false;
bool.TryParse(metaItem.Text, out bShowRelatedLinks);
relatedLinks.Visible = bShowRelatedLinks; 
```

说明：首先，`TryParse()`可以给出（如果解析失败`null`，它会设置`out`参数）。`false`其次，设置时无需`if`测试`relatedLinks`。你已经有了这个`bool`值，所以只需分配它。

如果您确定`metaItem.Text`是`"true"`、`"false"`或`null`，则可以进一步简化：

```
relatedLinks.Visible = Convert.ToBoolean(metaItem.Text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:50:56.637

如果你的评论是

> metaItem.Text 来自另一个系统（CMS），因此只会有“true”或“false”。它实际上是一个转换为字符串的布尔值，因此不会有多余的空格或“true”或“false”以外的任何东西

确实如此，您可以确定输入将是字符串`"true"`或`"false"`，然后您可以简单地编写：

```
var showRelatedLinks = metaItem.Text == bool.TrueString.ToLower();
relatedLinks.Visible = showRelatedLinks 
```

或者

```
relatedLinks.Visible = metaItem.Text == bool.TrueString.ToLower(); 
```

如果你想让调试更尴尬；）

然后根本不需要做任何布尔解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T18:44:16.253

由于问题是关于速记的，所以这里有一个比肯特的略短的问题：

```
bool bShowRelatedLinks;
relatedLinks.Visible = bool.TryParse(metaItem.Text, out bShowRelatedLinks) && bShowRelatedLinks; 
```

它利用了 C# 惰性求值。

这是一个更短的版本:)

```
bool b;
relatedLinks.Visible = bool.TryParse(metaItem.Text, out b) && b; 
```

我包含它是因为我尝试将仅在一行上使用的局部变量尽可能简单地命名 - 它使代码更易于阅读。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-21T09:33:20.663

```
relatedLinks.Visible = (metaItem.Text ?? "").ToUpper() == "TRUE"; 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-06-21T09:33:36.457

```
relatedLinks.Visible = bool.TryParse(metaItem.Text, out bShowRelatedLinks); 
```

# java - 如何对 java.sql.Time 对象进行算术运算？

> ID：11135273
> 
> 赞同：0
> 
> 时间：2012-06-21T09:28:06.523
> 
> 标签：java, mysql, time

我有一些 java.sql.Time 对象如下：

```
 String s1 = "12:00:04";
    String s2 = "12:23:34";
    String s3 = "12:03:02";
    String s4 = "11:00:54";

    int dij = j-i;
    int dmj = j-m;
    java.sql.Time tdi = java.sql.Time.valueOf(s1);
    java.sql.Time tki = java.sql.Time.valueOf(s2);
    java.sql.Time tdm = java.sql.Time.valueOf(s3);
    java.sql.Time tdj = java.sql.Time.valueOf(s4); 
```

如何对这些对象执行减法运算？我想在 java.sql.Time 对象本身中得到结果，但秒数也可以。java.sql.Time 类中给出的大多数方法都已弃用。[http://docs.oracle.com/javase/7/docs/api/java/sql/Time.html](http://docs.oracle.com/javase/7/docs/api/java/sql/Time.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:31:13.333

由于`java.sql.Time`包装 a `java.util.Date`，我不确定减法并将结果放入`java.sql.Time`对象中是否*有意义*。

我宁愿执行减法（很可能使用毫秒字段和[getTime](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getTime%28%29)访问器），并将结果存储为表示秒数/毫秒数等的数字。

如果您正在执行大量算术，则最有可能查看[Joda-Time](http://joda-time.sourceforge.net/)的解决方案。[有关算术相关](http://joda-time.sourceforge.net/faq.html#datediff)信息，请参阅常见问题解答。Joda-Time 有一个更一致和有用的 API，而且是线程安全的（不像标准的`java.util.Date/Calendar`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:45:53.837

我建议你使用[Joda Time Java 库](http://joda-time.sourceforge.net/)，它非常擅长处理 Java 中的日期和时间。

例子：

```
public boolean isRentalOverdue(DateTime datetimeRented) {
  Period rentalPeriod = new Period().withDays(2).withHours(12);
  return datetimeRented.plus(rentalPeriod).isBeforeNow();
} 
```

# javascript - 如何将 iOS API 绑定到 JavaScript

> ID：11135276
> 
> 赞同：0
> 
> 时间：2012-06-21T09:28:29.697
> 
> 标签：javascript, ios, swig

我对旧的 Swig 很熟悉，也看过 AppMobi，但我仍然想知道将我自己的 iOS API 绑定到 JavaScript 的最佳实践是什么。

谢谢

更新，它关于一个更大的 API，不能仅仅通过网络、SDM 或类似的方式触发。

# iphone - 从 iPhone 向另一部手机发送消息

> ID：11135278
> 
> 赞同：0
> 
> 时间：2012-06-21T09:28:31.243
> 
> 标签：iphone, ios

在我的应用程序中，我使用**MFMessageComposeViewController**发送消息。以下代码是我用来发送消息的示例

```
 MFMessageComposeViewController *msgController = [[[MFMessageComposeViewController alloc] init] autorelease];
        if([MFMessageComposeViewController canSendText])
        {
            msgController.messageComposeDelegate = self;
            msgController.body = [NSString stringWithFormat:@"%@", appDelegate.finalConactStr ];
            [self presentModalViewController:msgController animated:YES];
        } 
```

并使用以下代码检查结果

```
- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result 
{
    switch (result)
    {
    case MessageComposeResultCancelled:
        cancelAlert = [[UIAlertView alloc] initWithTitle:@"SMS a Contact" message:@"Cancelled"delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
        [cancelAlert show];
        [cancelAlert release];
        NSLog(@"Result: canceled");
        break;
    case MessageComposeResultSent:
        successAlert = [[UIAlertView alloc]initWithTitle:@"SMS a Contact" message:@"Successfully sent" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [successAlert show];
        [successAlert release];
        NSLog(@"Result: sent");
        break;
    case MessageComposeResultFailed:
        failAlert = [[UIAlertView alloc]initWithTitle:@"SMS a Contact" message:@"Failed" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [failAlert show];
        [failAlert release];

        NSLog(@"Result: failed");
        break;
    default:
        notSentAlert = [[UIAlertView alloc]initWithTitle:@"SMS a Contact" message:@"Not Sent" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [notSentAlert show];
        [notSentAlert release];

        NSLog(@"Result: not sent");
        break;
    }
    [self dismissModalViewControllerAnimated:YES];
 } 
```

但没有 sim 它也显示像**成功发送一样的警报**

我们如何检查设备是否有 sim 卡或消息发送功能是否存在。任何人都可以帮助或建议我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:35:44.597

由于 Apple 推出了 iMessage，所有可以运行 iOS5 的设备都可以通过[`MFMessageComposeViewController`](http://developer.apple.com/library/ios/#DOCUMENTATION/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html).

因此，无需检查设备中是否安装了 sim，只需相信[`[MFMessageComposeViewController canSendText]`](http://developer.apple.com/library/ios/DOCUMENTATION/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html#//apple_ref/doc/uid/TP40009668-CH1-SW3)设备会告诉您设备是否可以发送消息。

*   `MessageComposeResultCancelled`：用户取消了合成。
*   `MessageComposeResultSent`：用户成功排队或发送消息。
*   `MessageComposeResultFailed`: 用户尝试保存或发送消息失败。

# exception-handling - 如何处理 IQueryable<> 方法中的后端异常？

> ID：11135279
> 
> 赞同：4
> 
> 时间：2012-06-21T09:28:35.487
> 
> 标签：exception-handling, iqueryable

HttpClient 调用 ASP.NET Web API 方法，调用 EF 存储库的场景。我无法捕获 SQL 异常。

客户：

```
try
{
  var client = new HttpClient();
  var httpRequestMessage = new HttpRequestMessage();
  var response = await client.SendAsync(httpRequestmessage);
  response.EnsureSuccessStatusCode();
}
catch (Exception ex)
{
  // internal error 500 here
} 
```

网络接口：

```
[HttpGet]
public IQueryable<Data> GetData()
{
  try
  {
    return repository.Data();
  }
  catch (Exception ex)
  {
     // Nothing here
  }
} 
```

存储库：

```
public IQueryable<Data> GetData()
{
  try
  {
    return dbContext.Data.Where(d=>d.Id == 1)
  }
  catch (Exception ex)  
  {
    // nothing here
  }
} 
```

如何处理 SQL Server 异常（例如连接问题）？API 层和存储库层都没有捕获它们。如果我将可查询转换为存储库中的数组：

```
var arr = dbContext.Data.Where(d => d.Id == 1).ToArray(); 
```

那当然会被抓住。但是可查询的场景怎么样，我怎样才能抓住那些呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T06:06:55.083

您无法处理任何异常的原因是 IQueryable 通常具有惰性实现。除非您尝试枚举它们，否则不会发生任何实际情况。如果您只想捕获查询评估异常，则可以通过继承来使用一个简单的技巧`QueryableAttribute`。代码如下，

```
public class QueryableWithExceptionAttribute : QueryableAttribute
{
    public override IQueryable ApplyQuery(IQueryable queryable, ODataQueryOptions queryOptions)
    {
        IQueryable result = base.ApplyQuery(queryable, queryOptions);
        try
        {
            result.GetEnumerator(); // eager evaluate to catch exceptions
        }
        catch(Exception)
        {
            // do stuff
        }

        return result;
    }
} 
```

我认为这将在服务器上执行查询并获取一些结果。它仍然具有不获取整个结果集的优点/缺点，这意味着如果您有一个很大的结果集并且在初始获取后存在连接问题，您将无法捕获这些异常。不过，它对于小型结果集应该已经足够了。如果您想要一个更强大的解决方案，您可以将整个结果集加载到内存中，`result = LoadIntoMemory(result);`而不是`result.GetEnumerator();`

```
 public static IQueryable LoadIntoMemory(IQueryable q)
    {
        MethodInfo mi = typeof(QueryableWithExceptionAttribute).GetMethod("LoadIntoMemoryInternal", BindingFlags.NonPublic | BindingFlags.Static);
        return mi.MakeGenericMethod(q.ElementType).Invoke(null, new[] { q }) as IQueryable;
    }

    private static IQueryable<T> LoadIntoMemoryInternal<T>(IQueryable<T> q)
    {
        return q.ToList().AsQueryable();
    } 
```

当然，这有可能使用更多内存的缺点。

# css - @Font-Face 不会在 IE 中通过 https 加载

> ID：11135282
> 
> 赞同：14
> 
> 时间：2012-06-21T09:28:38.030
> 
> 标签：css, internet-explorer, ssl, https, font-face

`EDIT 23-06-2012 10:24 (CET)`: 找到答案

看看底部的答案。这就是为我解决问题的原因。IE9 现在正在以正确的方式呈现。IE8 的字体略有不同。不确定是什么字体，但它看起来“OK”。

`Original Question:`

我已经为此苦苦挣扎了几个小时。我们为我们的一位客户设计了一个网上商店，并通过正常不安全的 http 连接进行开发。从 2 天前开始，我们在域上安装了 SSL 证书，并使用 .htaccess 强制与网站的每个连接都通过 https 域

但是，出于某种原因，IE（无版本）使用 @Font-Face 呈现我们在 CSS 中指定的字体。这是我们用于字体的代码：

```
@font-face {
    font-family: 'ProximaNovaLight';
    src: url('https://www.bijouterieyvette.com/font-face/proximanova-light-webfont.eot');
    src: url('https://www.bijouterieyvette.com/font-face/proximanova-light-webfont.eot?#iefix') format('embedded-opentype'),
         url('https://www.bijouterieyvette.com/font-face/proximanova-light-webfont.woff') format('woff'),
         url('https://www.bijouterieyvette.com/font-face/proximanova-light-webfont.ttf') format('truetype'),
         url('https://www.bijouterieyvette.com/font-face/proximanova-light-webfont.svg#ProximaNovaLight') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

如您所见，我正在使用包括 https 在内的字体的完整链接。我尝试将文件移动到域的根目录以匹配 SSL 证书域。我还尝试使用 CSS 中的相对路径，但这也没有用。

所有字体都在域上，没有一个是跨域的。

我在 SO 上遇到了另外 2 个描述类似问题的帖子，其中一个没有解决，另一个是，但它似乎不是同一个问题。在这种情况下，问题的作者必须将 Access-Control-Allow-Origin 标头添加到 woff/ttf/otf/svg 的文件请求中。我还将这些标头添加到我的 .htaccess 中以确保：

```
<FilesMatch "\.(woff|ttf|otf|svg)$">
    <IfModule mod_headers.c>
        Header set Access-Control-Allow-Origin "*"
    </IfModule>
</FilesMatch> 
```

我有点用完了选项和想法。我不是服务器配置类型的人，但更多的是 PHP/MySQL/jQuery，所以我想与 SO 上的其他人相比，我的想法相当有限。

如果有人有值得尝试的选择，请告诉我！

`UPDATE 22-06-2012`：

如果我将 https 更改为 http 并在 IE 中刷新页面，则会提示我存在不安全内容的消息，并且我可以选择接受此内容。如果我选择“是”，我的内容正在加载并且...字体可用！！耶..但是..如果我将它改回https，字体会再次消失。

不知道我能从中学到什么（大声笑），但也许这会给任何人一个小想法..

`UPDATE 22-06-2012 #2`：

到目前为止，我已经尝试过：

url('//protocol/relative/font.eot'); url('../file/relative/font.eot'); url('/domain/relative/font.eot'); url('https://www.secure.tld/font.eot'); url('http://www.normal.tld/font.eot'); （有效，但弹出“在 IE 中包含非安全项目”）

我还尝试创建一个重写规则，强制将 FilesMatch（woff、ttf、otf、eot、svg）连接到 http:// 连接。这并没有像我想的那样起作用，而且我不知道它是否有任何作用..

我还添加了这个：

```
AddType application/vnd.ms-fontobject .eot
AddType font/truetype .ttf
AddType font/opentype .otf
AddType font/opentype .woff
AddType image/svg+xml .svg .svgz 
```

到包含字体的文件夹（在 .htaccess 文件中）以及在主 .htaccess 文件中。

除此之外，我试图删除 htpasswd 登录，这是一个疯狂的猜测，但也没有改变任何事情。

`UPDATE 23-06-2012`：

检查了 DirectAdmin 服务器日志.. 显然 IE 正在请求字体（我看到一个带有问号的 eot 文件，我猜这是请求 iefix 和 woff 的 eot）。所请求的所有内容也都得到了 200 OK 标头响应，这对我来说并没有让事情变得更清楚..

仍在寻找和寻找可能导致此问题的原因..

此外，基于 IE 中的“F12 控制台日志”-thingy。我可以清楚地看到字体正在被请求 -over https- 并带有 200 OK 响应。奇怪的是我只看到我正在使用的 4 种字体中的 3 种，但可能第 4 种没有在主页上使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-04T15:34:38.680

我对 IE 和 https 的行为完全相同。IE 尝试加载 4 种字体中的 3 种，但服务器一交付资源，IE 就中断并移至下一个字体。最后没有加载字体，网站看起来很糟糕。在我的情况下，http 标头“pragma=no-cache”是让 IE 感到困惑的东西。从响应中删除它后，一切都很顺利。另请参阅我的博客文章，其中解释了 Wildfly 和 Undertow 的技巧：[博客](http://romixch.wordpress.com/2014/10/03/font-face-not-working-with-internet-explorer-and-http-header-pragmano-cache/)

更新：

与此同时，我在 microsoft connect 上打开了一个错误：[https ://connect.microsoft.com/IE/feedbackdetail/view/992569/font-face-not-working-with-internet-explorer-and-http-header-pragma -无缓存](https://connect.microsoft.com/IE/feedbackdetail/view/992569/font-face-not-working-with-internet-explorer-and-http-header-pragma-no-cache)

如果您希望他们解决问题，请为该错误投票。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-25T02:31:49.763

肯定有同样的问题。当所有条件都满足时，会出现 IE（在我们的示例中为版本 11/Trident 7）的组合错误：

HTTPS，无缓存标头

在某些单独管理的域上，这不是一个容易解决的问题

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T08:19:51.747

所以，据我所知，我只是想出了一种适用于 IE、Safari、Firefox 和 Chrome 的方法。

由于我尝试过的所有事情都没有成功，我试图找到一种可以将字体“嵌入”到我的网站、CSS 或服务器的方法。根据我的服务器人员的说法，将字体添加到我的服务器不是一个选项，所以我决定回到 Font-Squirrel，看看他们是否提供了转换字体的选项。

我重新上传了我的字体并选择了导出模式。在设置字段底部的某个地方，它显示“Base64 编码”，幸运的是我知道这意味着什么（我可以想象有人不会轻易查看此选项）所以我用 base64 嵌入字体生成了我的 CSS 文件。

这完美无缺。当然，这使我的 CSS 文件变大了一些 kb（5kb 对 129kb）。但是我认为当前的互联网连接不会有 100kb 的大容量出现。

只是为了比较，非 base64 编码的 CSS：

```
@font-face {
    font-family: 'ProximaNovaSemibolds';
    src: url('../font-face/proximanova-semibold-webfont.eot');
    src: url('../font-face/proximanova-semibold-webfont.eot?#iefix') format('embedded-opentype'),
         url('../font-face/proximanova-semibold-webfont.woff') format('woff'),
         url('../font-face/proximanova-semibold-webfont.ttf') format('truetype'),
         url('../font-face/proximanova-semibold-webfont.svg#ProximaNovaSemibold') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

Base64 编码的 CSS：

```
@font-face {
    font-family: 'ProximaNovaBold';
    src: url('proximanova-bold-webfont-webfont.eot');
    }

@font-face {
    font-family: 'ProximaNovaBold';
    src: url(data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAF+8ABMAAAAArzAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAABqAAAABwAAAAcYT+YZ0dERUYAAAHEAAAALQAAADIC+wHsR1BPUwAAAfQAAAf7AAAURoqljoZHU1VCAAAJ8AAAACAAAAAgbJF0j09TLzIAAAoQAAAAWwAAAGB+FsNBY21hcAAACmwAAAGdAAAB+uY47ZljdnQgAAAMDAAAADoAAAA..alotmorecharacters...FDmYlYoTkE8HdsTFF2cwU74AAU/lecUAAA==) format('woff'),
         url('proximanova-bold-webfont-webfont.ttf') format('truetype'),
         url('proximanova-bold-webfont-webfont.svg#ProximaNovaBold') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-25T18:25:37.960

Apache/2.2.15 的工作解决方案是添加 .htaccess 它可以防止缓存字体文件，即使是 https

```
<FilesMatch "\.(woff)$">
    Header unset Cache-control
</FilesMatch>

<FilesMatch "\.(eot)$">
    Header unset Cache-control
</FilesMatch> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T14:56:52.170

你可以使用由 Google 和 Typkit 开发的[Webfont-Loader来让它工作：](https://developers.google.com/webfonts/docs/webfont_loader)

它增加了一些开销，但也使您可以更好地控制字体加载（例如允许您在尚未加载字体时设置不同样式的类）。也许值得一试，[为自己的 css 设置似乎很简单](https://github.com/typekit/webfontloader/blob/master/docs/TRANSITIONS.md#step-2-use-webfont-loader)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-02T07:11:04.697

不要将 Vary Request Header 设置为 https

**没有字体加载**

```
Vary:Accept-Encoding,https 
```

**作品**

```
Vary:Accept-Encoding 
```

同样的答案[在这里](https://stackoverflow.com/questions/13415073/on-ie-css-font-face-works-only-when-navigating-through-inner-links/45962889#45962889)。

# jquery - 使用 CSS 的流体宽度菜单

> ID：11135287
> 
> 赞同：1
> 
> 时间：2012-06-21T09:28:54.510
> 
> 标签：jquery, css, xhtml, fluid-layout

我有一个水平 CSS 菜单。问题是当用户创建超过 5 个菜单项时，li 选项卡会移动到新行。我不希望这种情况发生。

我怎样才能使它的宽度流动，所以如果用户只创建 3 个菜单项，那么每个选项卡的宽度都会增加，以适应全宽？

**HTML：**

```
<div class="container">
 <div id="new-menu-lower">
  <ul class="menuul">
   <li class="menuli">
       <a href="/test.aspx">Test</a>
   </li>
      <li class="menuli">
       <a href="/test.aspx">Test</a>
   </li>
      <li class="menuli">
       <a href="/test.aspx">Test</a>
   </li>
      <li class="menuli">
       <a href="/test.aspx">Test</a>
   </li>
      <li class="menuli">
       <a href="/test.aspx">Test</a>
   </li>
      <li class="menuli">
       <a href="/test.aspx">Test</a>
   </li>
      <li class="menuli">
       <a href="/test.aspx">Test</a>
   </li>

  </ul>
 </div>
</div> 
```

**CSS：**

```
div.container
{
    clear: both;
    margin: 10px auto 0;
    width:960px;
    border:1px solid red;
    height:700px;
}

div#new-menu-lower {
    border-radius: 3px 3px 3px 3px;
    border-top: 0 solid lightgrey;
    margin: 0 8px 10px;
}

#new-menu-lower ul {
    border: 1px solid white;
    display: block;
    height: 27px;
}

#new-menu-lower ul li:first-child {
    border-left: 0 solid lightgrey !important;
    border-radius: 7px 0 0 7px;
}

#new-menu-lower ul li {
    background-image: url("http://i45.tinypic.com/16if95z.png");
    background-repeat: repeat;
    border-right: 0 solid lightgrey !important;
    float: left;
    height: 27px;
    padding-left: 10px;
    padding-right: 10px;
    text-align: center;
    width: 168px;
} 
```

**JSFIDDLE 示例：http:** [//jsfiddle.net/rM9MW/](http://jsfiddle.net/rM9MW/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:44:43.643

像这样？

```
var mw = $('.menuul').width();
var ll = $('.menuli').length;
var c = mw / ll;
$('.menuli').css('width', c) 
```

[http://jsfiddle.net/rM9MW/8/](http://jsfiddle.net/rM9MW/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:12:26.210

你不讨厌javascript！

## *[演示 jsBin](http://jsfiddle.net/roXon/rM9MW/41/)*

只需在您的 CSS 中更改此行：

```
#new-menu-lower ul {

/*display: block; //////////////////REMOVE//////////////////// */
display:table; /*  //////////////////ADD//////////////////// */ 
```

和：

```
#new-menu-lower ul li {

/* float: left;      //////////////////REMOVE//////////////////// */
display:table-cell; /* //////////////////ADD//////////////////// */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:45:05.030

您可以使用一点 JQuery 来实现这一点，[这里是 jsfiddle](http://jsfiddle.net/meetsubhajit/rM9MW/34/)

也请在这里找到代码：-

```
$(document).ready(function(){
   var liCount = $('li.menuli').length;
   var parentUlWidth = $('li.menuli').parent('ul').width(); 
   var liWidth =  Math.floor(parentUlWidth * (1/liCount)) - 10;
    $('#new-menu-lower ul li').css({
        'width':liWidth
    });    
});​ 
```

编辑：

我已经更新了小提琴，请现在检查小提琴链接。我更改了脚本和一些 CSS。

CSS：

```
#new-menu-lower ul li {
    padding-left: 5px;
    padding-right: 5px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T10:04:33.923

我创建了一个（我认为）有效的示例：

[http://jsfiddle.net/ybmGr/2/](http://jsfiddle.net/ybmGr/2/)

这取决于列表元素中有多少文本。它不适用于 X 元素。你不能用这个无限X。

**编辑**：**好吧，似乎`undefined`发布了适用于您想要的尽可能多的元素的解决方案......**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T10:04:59.547

**现场演示** [http://jsfiddle.net/rM9MW/29/](http://jsfiddle.net/rM9MW/29/)

嘿，现在你可以`display:table-cell`像这样在你的 CSS 中使用属性

并根据您的布局更新您的 css 并更改为颜色

```
div.container
{
    margin: 10px auto 0;
    width:960px;
    border:1px solid red;
    height:700px;
    background:red;
}

div#new-menu-lower {
    border-radius: 3px 3px 3px 3px;
    border-top: 0 solid lightgrey;
    margin: 0 8px 10px;
    background:green;
}

#new-menu-lower ul {
    border: 10px solid yellow;
}

#new-menu-lower ul li:first-child {
    border-left: 0 solid lightgrey !important;
    border-radius: 7px 0 0 7px;
}

#new-menu-lower ul li{
display:table-cell;
    padding-left: 10px;
    padding-right: 10px;
}
#new-menu-lower ul li a{
    background: url("http://i45.tinypic.com/16if95z.png");

    border-right: 0 solid lightgrey !important;
    height: 27px;
    padding-left: 10px;
    padding-right: 10px;
    text-align: center;
    display:block;
    width: 168px;
} 
```

**现场演示** [http://jsfiddle.net/rM9MW/29/](http://jsfiddle.net/rM9MW/29/)

* * *

更新了演示[http://jsfiddle.net/rM9MW/39/](http://jsfiddle.net/rM9MW/39/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T10:15:44.560

使用下面的 Jquery 你可以实现你的目标；

**查询**

```
$ulWidth = $('.menuul').width();
$listLength = $('.menuli').length;
$('.menuli').css('width', $ulWidth / $listLength ) 
```

看到这个演示：http: [//jsfiddle.net/rathoreahsan/nxurR/](http://jsfiddle.net/rathoreahsan/nxurR/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-16T20:54:33.037

我来自未来，为了未来的观众：）

您可以使用显示： flex; 对于 ul 和 flex：1；对于菜单项，我认为对于最近的浏览器来说这是一个非常好的解决方案。

```
ul{display: flex;}
li{flex: 1;} /* modify witdh of item */ 
```

# .net - 用于编辑 PDF（或图像）中的敏感数据的 Web 组件

> ID：11135288
> 
> 赞同：2
> 
> 时间：2012-06-21T09:28:55.143
> 
> 标签：.net, pdf, image-manipulation, pdf-manipulation

第一个用例 - 在我们的 Web 应用程序中，用户扫描或上传（到服务器）pdf。然后我们让他黑掉一些敏感数据。

现在我写了一些从pdf中提取tiff并将其显示给用户的代码，用户在他想要黑色的地方绘制黑色矩形。然后他将它保存回服务器，我从中创建新的pdf，但我对它的工作方式不满意......

我正在寻找一个为我做这件事的组件（免费的商业）（最好没有图像提取）。

最佳解决方案应该：

1.  **在 Web 应用程序中显示**pdf/图像（只能是 IE）
2.  允许用户**修改**图像（pdf 格式）（向图像添加黑色矩形）
3.  允许用户在 pdf中**标记一些文本，并将标记文本中的任何字母****更改**为一个符号（矩形、点等）
4.  **将**pdf/image 保存回服务器。

即使具有部分功能的组件的信息也将不胜感激。组件可能仅限于 IE，并且是免费的和商业的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:13:24.560

免责声明：我为 Atalasoft 工作。我们的[DotImage Document Imaging](http://atalasoft.com/products/dotimage)产品可以做到这一点（使用 PDF Reader 插件）。

我建议正确执行此操作的唯一方法是光栅化页面，然后将页面的编辑图像保存回 PDF。其他任何事情都是非常危险的，并且可能会打开已编辑文本的恢复。

它不能做的一件事是用符号交换字符。我们可以让您擦除一个字符并在其位置绘制一些东西（在光栅化后处理图像中的像素，而不是字符）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-25T16:37:35.093

Qoppa 有一个可以编辑 PDF 文档的 Web PDF 标记组件。这是真正的编辑，其中 PDF 文档的内容被永久删除。在这里试试：[https ://www.qoppa.com/pas/pdfmarkup/](https://www.qoppa.com/pas/pdfmarkup/)

免责声明：我为 Qoppa 工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T14:03:13.423

您可以使用[Amyuni PDF Creator .Net](http://www.amyuni.com/en/developer/pdfcreator/features)执行此操作。请注意，如果您想以安全的方式删除此信息，仅使用 PDF 绘图说明将黑色矩形放在图像顶部并不是一个好方法。使用正确的工具可以轻松删除此绘图说明。

查看帖子[技术说明 11：使用 Amyuni PDF Creator 库编辑 PDF 文档](http://www.amyuni.com/en/resources/technicalnotes/)以了解有关此问题的更多详细信息。

*通常的免责声明适用*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-20T08:08:08.680

CIB doXiview 可以删除内容。您也可以在他们的示例应用程序中免费在线上传 pdf 文件。 [https://doxiview.cib.de/showcase/index.html](https://doxiview.cib.de/showcase/index.html)（转到编辑）。

但无法添加或编辑文本。

# mysql - 关系数据库模式设计：大规模的版本控制属性

> ID：11135294
> 
> 赞同：2
> 
> 时间：2012-06-21T09:29:25.003
> 
> 标签：mysql, database, performance, schema

我在为具有版本控制的动态属性设计架构时遇到了一些问题。假设以下用例：

我有一个名为的表`Actor`，其中包含`id`和 a `name`（为简单起见）。我的情况的上限是，该表包含大约 100 万个条目。

此外，每个演员都会获得分配给他们的属性。因为当时不知道属性，所以需要一张表来管理属性。我想到了一个`Property`-table。生成的 n:m 关系将通过一个包含主键和属性值（类型？）之间的表来`Actor`解决`Property`。

目前，这似乎很容易处理。如果有一百万个条目，每个条目有 10 个属性，则该`ActorProperty`表将有一千万个节点。我相信使用`btree`索引 (log2(n)) 这应该没问题。

现在是我正在努力的部分。应该以某种方式跟踪属性。随着时间的推移，这些属性会发生变化，但历史不应丢失。很可能会使用时间戳来完成。请注意，多个属性会同时更新。一个例子是：我每天拍摄所有演员的快照，如果发生变化，我将同时更新所有更改的属性。这导致每年有 365 个时间戳。

如果我使用另一个表来管理版本（时间戳）并向`ActorProperty`表中添加另一个外键，我将获得 365 * 1000 万个条目。这应该是我能得到的最大值。大多数情况下，数据集会明显变小。

我现在的问题是更多地解决性能问题。我阅读了以下有关索引的答案：[数据库索引如何工作](https://stackoverflow.com/questions/1108/how-does-database-indexing-work)。查询具有这么多条目的表不是很慢吗？一个示例查询是：前 100 个演员，其所有属性都在给定的时间戳 id=x 处。我也觉得我正在考虑的模式可能不是最好的。是否有人对具有更高可扩展性的模式有任何建议或想法？

顺便说一句，我目前也在评估 NoSql 方法，所以我想暂时专注于关系方法。我的目标是收集不同技术的优缺点，然后为所描述的用例建立一个理论架构或模型。在关系数据库上使用最佳模型的性能似乎很难评估或发现。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:57:18.007

> 应该以某种方式跟踪属性

究竟应该如何跟踪它们是这里重要的事情。以最简单的情况为例，您可能希望在任何给定时间查询状态 - 因此解决方案是在分解表中有多个与时间相关的记录：

```
create table actor_property (
  actor_id INT NOT NULL,
  property_id INT NOT NULL,
  starttime DATE NOT NULL,
  endtime DATE NOT NULL DEFAULT 99991231
  PRIMARY KEY (actor_id, property_id, starttime, endtime) 
); 
```

这样做的结果是，当您尝试将参与者链接到属性并且链接已存在于表中时，您需要处理这种情况（您无法在触发器中更新表，但您可以检查冲突并强制一个例外）。然后您可以随时通过......查询数据的状态

```
SELECT a.name, property.name
FROM actor a
INNER JOIN actor_property ap
   ON a.id=ap.actor_id
INNER JOIN property p
   ON p.property_id
WHERE $snapshot_date >= ap.starttime
AND $snapshot_date <= ap.endtime 
```

在上面使用 actor_property 中当前记录的物化视图会稍微快一些 - 取决于关系更改的频率。

> 查询具有这么多条目的表不是很慢吗？

并非如此，除非您需要经常分析整个数据集，否则大多数操作只查看一小部分行，并且通常数据库会发展热数据区域 - 读取缓存比 mysql 的查询缓存更有效（这是非常具体的） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:25:33.397

我在其中一个应用程序中使用了类似的设计。

首先，我认为属性集不会那么大（理论上），所以分享它是很好的。为此，我将创建一个`PROPERTY_TYPE`具有唯一性`ID`和`NAME`列的表。这样在主`PROPERTY`表中您将拥有`ACTOR_ID`,`PROPERTY_TYPE_ID`和`VALUE`列，这给您带来了 2 个好处：

1.  由于只为所有用例存储一次属性名称，因此表的大小大大减小；
2.  查询的性能将显着提高。

现在到财产跟踪。我喜欢及时跟踪对象实例的方法，每个实例都有它的开始和结束时间。可以使用 找到该属性的当前活动实例`now() BETWEEN start_dt AND coalesce(end_dt, now())`，因为打开的实例`end_dt`是有效的`NULL`。

架构将如下所示：

```
CREATE TABLE actor (
    actor_id   integer not null,
    actor_name varchar(100) not null,
    PRIMARY KEY (actor_id)
    );
CREATE TABLE property_type (
    property_type_id   integer not null,
    property_type_name varchar(100) not null,
    PRIMARY KEY (property_type_id),
    UNIQUE (property_type_name)
    );
CREATE TABLE actor_property (
    actor_id         integer not null,
    property_type_id integer not null,
    property_value   varchar(500) not null,
    start_dt         timestamp not null,
    end_dt           timestamp
    PRIMARY KEY (actor_id, property_type_id, start_dt)
    ); 
```

实施注意事项：

1.  更新属性实际上是一个原子关闭实例 + 创建实例操作。因此，最好将它包装到`START TRANSACTION; ... COMMIT;`块中，或者（我更喜欢）创建一个可以完成这项工作的函数；
2.  无论如何，使用 DB 端函数是一种很好的风格；
3.  所有表上的主键后面都有隐式索引，这反过来又会给你预期的性能；
4.  表中潜在的 365e6 行`actor_property`对现代硬件来说并不是什么大问题。鉴于您的索引已就位且平衡良好，在最坏的情况下，您将执行最多 30 次磁盘页面读取以从该表中查询单个条目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:53:21.180

@symcbean 和 @vyegorov 的方法都是正确的——在现代硬件上，简单的查询对于您正在谈论的数据量应该没有问题。

但是，当涉及到您可能需要考虑的查询时，模式设计（通常称为“实体/属性/值”或 EAV）有一些缺点。

常见的关系语句可能会变得非常复杂——而且通常很慢。例如，假设有一个查询要查找属性“height”> 1.9、属性“age”<= 25、属性“agent”不像“sleazeball”以及当前没有出现属性“hard to work”的演员和”。

如果“property_value”列是 varchar，则数值比较往往会违反直觉。

搜索“in”、“not in”等很尴尬。

解释“代理不像 'sleazeball' 可能意味着两件事 - 有一个名为 agent 的属性，它的值不是 sleazeball，或者甚至没有一个名为 agent 的属性。

我提到所有这些问题的原因是为了让你在设计中走得更远——仅仅将性能视为假设的事情是不够的，你需要考虑现实的场景。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T17:06:10.223

根据您的情况，如果将问题分解为“当前属性”和“过去属性”，您可能会发现性能更好。各种 ORM 都在采用这种方法来实现它们的版本化行为，因为它大大降低了表大小增加的指数成本。

因此，在您的情况下，请考虑您的`Actor`表与：

*   `ActorProperty`(fk = `actor_id`)
*   `ActorPropertyVersionable`(fk = `actor_id, version_num`)

因此，在为参与者编写新属性时，应首先复制现有值并将其插入到可版本控制的表中，*然后*将新值添加到当前表中。将其包装在事务中以确保其安全。

通常，属性查询通常对当前属性值感兴趣，而访问过去值的频率要低得多（当然，您需要对自己的用例做出判断）。每次查询数据确实需要两个不同的查询（当前值、过去值），但性能优势可能是值得的。

# excel - Excel 数据透视表范围参考

> ID：11135298
> 
> 赞同：1
> 
> 时间：2012-06-21T09:29:31.993
> 
> 标签：excel, excel-formula, pivot-table

您好我正在尝试从存储在 excel 数据透视表中的数据开始进行一些计算。

我知道有一个`GetPivotData`非常有用的函数，但它只允许检索单个值。我想使用工作表功能来“查询”我的数据（例如，对列中的一些值求和，而不过滤数据透视表），但我找不到一种方法来轻松引用数据透视表的范围。可以假设表格的“结构”是固定的，但不是其中的数据：我发现的最佳解决方案是编写一个`UDF`函数来获取对表格范围的引用：

```
 Function getPvRange(firstcell As Range) As Range
    Set getPvRange = firstcell.PivotTable.TableRange1
 End Function 
```

我可以在我的公式中使用这个函数。我想知道是否有一种简单的（我的意思是没有定义动态范围名称）直接方式（我的意思是，不使用 VBA）来引用数据透视表范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T02:48:48.323

如果您的工作表很简单，则使用 excel 偏移功能是一种将数据透视表范围作为您提供的功能的方法。例如，创建了一个命名范围并将范围分配为

```
=offset($A$1,,,counta($a:$a),15) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T22:02:12.747

如果您只想将数据透视表中的单元格称为普通单元格，则可以禁用自动生成的`GetPivotData`函数。调出数据透视表工具栏，单击添加按钮，然后选择`'Generate GetPivotData'`。然后，您可以使用新按钮来切换自动公式。

或者您是否正在尝试做一些更复杂的事情？如果是这样，请你发布一个例子吗？

# sql - 在java应用程序中创建触发器

> ID：11135299
> 
> 赞同：1
> 
> 时间：2012-06-21T09:29:35.487
> 
> 标签：sql, oracle

我可以在 SQL Plus 中运行以下语句

```
CREATE OR REPLACE TRIGGER TEST.RECORD_TABLE.BIR
BEFORE INSERT ON TEST.CURRENT_VACANCIES
FOR EACH ROW WHEN (new.VACANCY_ID IS NULL)
BEGIN 
   SELECT TEST.CURRENT_VACANCIES_SEQ.NEXTVAL INTO :new.VACANCY_ID FROM dual; 
END; 
```

它完美无缺。

但是，当我尝试从 Java 应用程序中的准备好的语句中调用它时，我收到以下错误

SQL 异常；java.sql.SQLException：索引处缺少 IN 或 OUT 参数:: 1

有人有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T06:31:54.300

> 不要使用 PreparedStatement 接口来创建引用 a:NEW 或 :OLD 列的触发器。请改用语句。使用 PreparedStatement 将导致执行失败并显示消息 java.sql.SQLException: Missing IN or OUT parameter at index:: 1。

见：[http ://docs.oracle.com/cd/E11882_01/java.112/e16548/oraint.htm#CHDIIDBE](http://docs.oracle.com/cd/E11882_01/java.112/e16548/oraint.htm#CHDIIDBE)

利用：

```
session.doWork(new Work() {
    @Override
    public void execute(Connection connection) throws SQLException {
        //connection, finally!
    }
}); 
```

来自：[如何从休眠会话中获取 jdbc 连接？](https://stackoverflow.com/questions/9482731/how-to-get-jdbc-connection-from-hibernate-session)

# iphone - 在 Xcode 4.2 中使用配置文件选项查找动态内存泄漏

> ID：11135300
> 
> 赞同：0
> 
> 时间：2012-06-21T09:29:41.280
> 
> 标签：iphone, objective-c

我已经成功地使用分析选项找到了静态泄漏，但是通过单击配置文件选项来获取配置文件窗口，我已经连接了设备。如何在配置文件中找到动态内存泄漏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:40:25.827

这应该可以帮助您：

[http://www.cimgf.com/2008/04/02/cocoa-tutorial-fixing-memory-leaks-with-instruments/](http://www.cimgf.com/2008/04/02/cocoa-tutorial-fixing-memory-leaks-with-instruments/)

[了解用于内存泄漏检查的工具 - iPhone](https://stackoverflow.com/questions/1329535/understanding-the-instrument-for-memory-leak-checking-iphone)

[http://mobileorchard.com/find-iphone-memory-leaks-a-leaks-tool-tutorial/](http://mobileorchard.com/find-iphone-memory-leaks-a-leaks-tool-tutorial/)

[http://www.raywenderlich.com/2696/how-to-debug-memory-leaks-with-xcode-and-instruments-tutorial](http://www.raywenderlich.com/2696/how-to-debug-memory-leaks-with-xcode-and-instruments-tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:42:06.373

不幸的是，您不能依靠 Build\Build and Analyze 来捕获所有内容。还有另一种很棒的自动化工具可以帮助您检查您的应用程序是否存在泄漏——Leaks Instrument。

转到运行\使用性能工具运行\泄漏

您可以在哪里看到表格中的所有泄漏。

有关更多信息，请参阅本教程：[教程](http://www.raywenderlich.com/2696/how-to-debug-memory-leaks-with-xcode-and-instruments-tutorial)

请特别参考本教程的泄漏和管道工部分。

# vmware - 播放 VM 映像的最佳方式

> ID：11135301
> 
> 赞同：1
> 
> 时间：2012-06-21T09:29:46.100
> 
> 标签：vmware, virtual-machine

我有一个 Windows XP 的 vmdk 图像我在我的笔记本电脑上运行 2 个不同的图像（一个是服务器，一个是客户端）它们连接到第三个服务器（物理）都是桥接连接。那里没有问题（奇怪的是，我的笔记本电脑上的虚拟机不能 ping 笔记本电脑本身，但可以 ping 远程服务器 - 服务器连接到与笔记本电脑相同的物理交换机）。

我的问题是我是否可以使图像运行得更快，有时如果它们很重，它们就会卡住。现在我正在使用 VM 播放器 3.1.4。.vmx 文件配置为 memsize = "1604" 我可以手动将 memsize 设置为 2000+ 吗？还是由创建图像的人声明的？它会对图像的性能产生任何影响吗？

我的笔记本电脑是 8GB 内存的 i5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:38:08.733

您应该能够只进入“编辑虚拟机设置”，然后进入“硬件”选项卡，然后选择内存，您应该能够增加它，无需在 .vmx 文件中玩耍。有关详细信息，请参阅[此链接](http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1004059)。

但是，通常情况下，内存并不是虚拟机运行缓慢的真正问题，尤其是在具有 5400RPM 硬盘驱动器的笔记本电脑上，问题在于，如果您有自己的本机操作系统 + 2 个或更多虚拟操作系统正在访问磁盘，它将无法跟上所有请求。如果您启动 'perfmon' (start-run-perfmon)，然后强制导致 VM 变慢，请查看性能监视器。右键单击图形屏幕，选择“添加计数器”，然后选择“内存 > 可用 MBytes”和“物理磁盘 > 平均”。磁盘队列长度'。然后该图将向您显示有多少 RAM 可用以及磁盘队列长度有多长，后者不应该一直顶着屋顶，峰值是正常的，但不超过 5-10 秒。

至于您的 ping/网络问题，您可以发布笔记本电脑和 VM 的“ipconfig /all”的输出吗？

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:39:06.043

`memsize`确定虚拟机的内存。从 VM 机器设置中配置它应该很容易。你可以设置任何你想要的值（它应该是 4 的倍数，当然小于你的总内存），一般来说这可以提高虚拟图像的性能。

这真的取决于这些图像上运行的内容。我建议只检查您在图像上运行的软件的最低和推荐要求并进行简单的数学运算，而不是调整您的`memsize`. 如果我是你，我不会为 VMWare 播放器重新定位超过 4GB 的空间。

# apache-flex - Flex Mobile BlazeDS 从服务器加载图像

> ID：11135303
> 
> 赞同：0
> 
> 时间：2012-06-21T09:29:56.800
> 
> 标签：apache-flex, flex4, flex4.5, blazeds, flex-mobile

我有一个关于从服务器获取图像的问题。顺便说一句，我正在使用 BlazeDS。当我尝试从加载器加载它时，它给了我“加载的文件是未知类型”。错误信息。这是我的代码：

```
var loader:Loader = new Loader();
loader.loadBytes(SessionClientData.prsnl.resim); //it throws an exception here
img_doktor.source = Bitmap(loader.content); 
```

SessionClientData.prsnl.resim 是字节数组。

有什么建议么？或任何其他方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:18:32.033

好吧，如果它只有一个图像，那么只需将其加载为字节数组（正如您已经在做的那样），然后将其分配给 spark 图像组件的 source 属性。完成后，您还将从 spark 图像组件中获得 ready 事件。

myImage.source = loadedByte（你得到的字节数组）。

让我知道它是否有帮助。

# android - 多个日期和时间选择器没有单独的侦听器

> ID：11135305
> 
> 赞同：0
> 
> 时间：2012-06-21T09:29:57.403
> 
> 标签：android

我的应用程序包含开始时间、日期结束时间、日期闹钟时间、日期总计我有 3 个日期选择器和 3 个时间选择器。可以通过为每个选择器编写侦听器来获取日期和时间。这看起来像冗长而硬编码。所以，是否可以通过在不编写单个侦听器（总共 6 个侦听器）的情况下实现这些侦听器来将时间和日期值获取到编辑文本中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:44:46.303

您定义`DatePickerDialog.OnDateSetListener() DP =new DatePickerDialog.OnDateSetListener(){//Your implementation}`为单个方法，然后使用此方法为每个 DatePicker 分配给每个 DatePickerDialog

```
DatePickerDialog.setonDateSetListener(DP) 
```

timePicker 也一样

# javascript - jquery链接到我的表单中的输入链接技巧

> ID：11135306
> 
> 赞同：0
> 
> 时间：2012-06-21T09:29:57.863
> 
> 标签：javascript, jquery

我制作了一个脚本，但它没有按预期工作，我需要帮助。你可以[在这里](http://jsfiddle.net/BSGS6/)看到它。

我只需要为 URL 字段实现以下行为：

1.  当您单击链接时，将打开目标页面。这行得通。
2.  当您单击链接的 parent`div`时，链接变为可编辑的`input`。这也会发生，但是我的输入字段`id`取自一个数组，例如 ( `url0`, `url1`, `url2`)，所以当我在表单中有多个 URL 时，只有第一个有效。
3.  当你在编辑输入后点击外部时，它又变成了一个链接。
4.  此外，当您双击链接时，它变得可编辑。

提前感谢所有答案，我希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:29:05.973

您*不能*对不同的页面元素使用相同`id`的标记 - 这是无效的标记，并且您可以清楚地看到，导致无效的行为。首先，您可能想在标记中修复它。

如果你不能改变它（但是，再一次，*你真的应该！*），你可以使用一些更复杂的选择器，例如：

```
$('.cartRight > div > div > a').click(function(){
    $(this).parent().siblings("input").findval($(this).text()).show();
    $(this).hide();
}) 
```

很傻吧？不过，您可能可以将这个烂摊子用作最后的手段。

至于双击，我不建议实施这种行为；它在 Web 环境中并不常见，并且可能会让用户感到困惑。此外，从技术角度来看，单击即可开始加载新页面；如果链接被双击，您可以使用它`window.stop()`来停止，但您需要手动实现双击事件，因为：

> dblclick 事件很少使用。即使在使用它时，也应该确保永远不要在同一个 HTML 元素上同时注册 onclick 和 ondblclick 事件处理程序。如果您同时注册两者，几乎不可能找出用户实际做了什么。（http://www.quirksmode.org/js/events_mouse.html#dblclick）

我认为您应该只在右侧有一个小的“编辑”按钮（可能是“铅笔”图标？），而不是使用您当前的 UI 方案。这对我来说似乎很混乱 - 更不用说用户了......

# qt - 定制类的信号和槽

> ID：11135310
> 
> 赞同：0
> 
> 时间：2012-06-21T09:30:18.550
> 
> 标签：qt, signals-slots, qslider

我编写了一个自定义类来覆盖 QSlider 的 seek 方法。基本上，此类允许在用户单击的滑块上进行搜索。

tbslider.h

```
#ifndef TBSLIDER_H
#define TBSLIDER_H

#include <QSlider>
#include <QObject>

class Tbslider:  public QSlider
{
    Q_OBJECT
public:
    explicit Tbslider(QWidget *parent=0);

signals:
    void tbJump(int);
protected:
    void mousePressEvent(QMouseEvent *event);
private:
    QSlider *qslider;
};
#endif // TBSLIDER_H 
```

tbslider.cpp

```
#include <iostream>
#include <QEvent>
#include <QPoint>
#include <QMouseEvent>
#include "tbslider.h"

Tbslider::Tbslider(QWidget *parent):QSlider(parent)
{

}
void Tbslider::mousePressEvent(QMouseEvent *event)
{
QSlider::mousePressEvent(event);

    std::cout<<"\nX co-ordinate"<<event->x();
    std::cout<<"\nY co-ordinate"<<event->y();
    int value =(minimum() + ((maximum()-minimum()) * event->x()) / width() ) ;
    setValue(value);
    emit tbJump(value);
} 
```

main.cpp 中的信号和槽

```
 QApplication app(argc, argv);
  MainWindow player;
  Tbslider tbslider;
  GSTEngine listen
  app.connect(&tbslider, SIGNAL(tbJump(int)), &listen, SLOT(jump(int))); 
```

上面的代码应该可以工作。还有什么我需要做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:03:20.320

函数应该是

```
void Tbslider::mousePressEvent(QMouseEvent *event)
{

    std::cout<<"\nX co-ordinate"<<event->x();
    std::cout<<"\nY co-ordinate"<<event->y();
    int value =(minimum() + ((maximum()-minimum()) * event->x()) / width() ) ;
    setValue(value);
    emit tbJump(value); 
    QSlider::mousePressEvent(event);
} 
```

在开始时调用 QSlider::mousePressEvent(event) 会导致基类中的 return 语句。

# emacs - 防止 paredit 在插入括号时插入空格 - 和其他问题

> ID：11135315
> 
> 赞同：3
> 
> 时间：2012-06-21T09:30:29.497
> 
> 标签：emacs, paredit

我喜欢paredit。但是有几件事我讨厌，并且还没有解决它们：

*   *打开括号会在括号前*插入一个空格。我知道这可能是整个互联网的首选风格，但它不是我的。如何避免这种情况？
*   在引用区域 ( `''`) 内时，我无法回删除。此外，键入双引号 ( `"`) 将插入一个反斜杠（显然是为了转义双引号 - 只是这不是必需的，至少在 python 中。所以我不想要反斜杠。如何配置这个？
*   实际上，`paredit`尝试（并且失败）非常明智地关联退格。无论我是否在未完成的引用区域中，我的退格键都应该始终删除前一个字符（如果引号不匹配，paredit 会拒绝执行任何操作。尝试在此处删除：）`"helloo`。唯一需要特别处理删除的情况是该点就在左括号之前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:01:17.023

这不是答案，但评论太长了......

Paredit 适用于在 a 之前没有空格`(`会很糟糕的语言，以及没有 python 的“quote-cleverness”的语言。您可能会针对这些问题破解它，但是 python 的语法有很大的不同，使它在那里工作将是一个不平凡的项目。

至于你的最后一点，听起来你根本不需要 paredit，因为它非常有意地试图保持你的括号和引号平衡，所以它可能不是适合你的工具。IOW，您可能更喜欢[自动配对](http://www.emacswiki.org/emacs/AutoPairs)或[电动配对](http://www.emacswiki.org/emacs/ElectricPair)或一堆其他类似的工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-13T20:21:08.380

您可以通过变量自定义 paredit 在分隔符周围插入空格`paredit-space-for-delimiter-predicates`- 有关详细信息，请参阅文档字符串。互联网上有一些使用它的例子，但我不记得它们在哪里。

Paredit 对字符串的处理仅限于许多 Lisps 共有的字符串表示法，并且更改它并非易事，因此如果您想将其与奇异的语法一起使用，例如 Python 的各种一或三分隔符单引号或双引号格式，你需要在 paredit 的深处搞乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-15T02:23:19.500

下面的示例代码适用于方案：

```
(defun paredit-space-for-delimiter-predicates-scheme (endp delimiter)
  "Do not automatically insert a space when a '#' precedes parentheses."
  (or endp
      (cond ((eq (char-syntax delimiter) ?\()
             (not (looking-back "#\\|#hash")))
            (else t))))

(defun scheme-mode-paredit-hook ()
  (enable-paredit-mode)
  (add-to-list (make-local-variable 'paredit-space-for-delimiter-predicates)
               'paredit-space-for-delimiter-predicates-scheme))

(add-hook 'scheme-mode-hook 'scheme-mode-paredit-hook) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T14:25:45.233

要强制删除一个字符，您必须选择它并选择`C-w`它。要仅强制插入一个字符，例如开引号，您必须使用`C-q (`.

# android - 样式按钮不允许我更改 android:margin_layout

> ID：11135319
> 
> 赞同：2
> 
> 时间：2012-06-21T09:30:34.680
> 
> 标签：android, styles, android-button

这是我的按钮样式：

```
<style name="StandardButton" parent="@android:style/Widget.Button">
    <item name="android:background">@drawable/button_mib_standard</item>
    <item name="android:textColor">@drawable/button_text</item>
    <item name="android:padding">16dip</item>
    <item name="android:textSize">16dip</item>
</style> 
```

为什么不会`android:margin_layout`在这里列出日食？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:37:52.457

应该是`android:layout_margin`，即使`ADT Plugin`没有为您自动完成，它也可能只是 中的一个错误，`ADT Plugin`它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:46:20.817

它没有列出，因为它是 layoutParams 的一个属性，取决于父视图类型。所以它没有被列出，因为可能没有为放置视图的布局定义“android:layout_margin”。

顺便说一句，我认为如果你在样式中定义它，只要父级使用参数（linearLayout，relativeLayout ecc.），它就可以正常工作。

PS。对不起我的英语^^

# c# - 声明一个抽象类类型的变量

> ID：11135321
> 
> 赞同：0
> 
> 时间：2012-06-21T09:30:37.903
> 
> 标签：c#, abstract-class

我有一个带有一些受保护成员的抽象基类，但没有抽象成员：

```
internal abstract class BaseClass
{

    protected readonly string Var1;
    protected readonly string Var2;

    protected BaseClass(string var1, string var2)
    {
        Var1 = var1;
        Var2 = var2;
    }

    protected int DoSomething1(string s)
    {
    }
} 
```

还有一些类实现了这个基类，并且每个类都有一些不同的特定方法：

```
internal sealed class Child1:BaseClass
{
    internal Child1(string var1, string var2)
        : base(var1, var2)
    {
    }

    internal bool DomeSomethingSpecificForChild1(int i)
    {
    }

} 
```

现在我有另一个类，我想有一个类型的变量，`BaseClass`并根据我的需要，用一个子类型来实例化它。但这不起作用，因为具体方法未知。

```
public class MyClass
{
        private BaseClass myBaseClass;

    public bool DomeSomethingSpecific(int i)
    {
            myBaseClass = new Child1("a","b");
            myBaseClass.DomeSomethingSpecificForChild1(i);
    }
} 
```

有没有办法可以完成我想要的？或者我是否必须在我的方法的内部范围内声明我的变量`MyClass`？

```
public class MyClass
{
        private BaseClass myBaseClass;

    public bool DomeSomethingSpecific(int i)
    {
            var child1 = new Child1("a","b");
            myBaseClass.DomeSomethingSpecificForChild1(i);
    }
} 
```

但是这样我就不确定该类是否实现了`BaseClass`。

接口不是一个选项，因为我希望它保持内部而不是公共的，并且我不希望基类被实例化，所以我认为抽象在这里是一个不错的选择..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:34:46.890

```
private BaseClass child;

public bool DomeSomethingSpecific(int i)
{
        var c = {initialization to an instance - e.g. Child1(), Child2(), Child3()..};
        if (c is Child1){
            ((Child1)c).DomeSomethingSpecificForChild1(i);
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:36:19.213

您可能喜欢使用抽象方法：

```
internal abstract class BaseClass
{

    protected readonly string Var1;
    protected readonly string Var2;

    protected BaseClass(string var1, string var2)
    {
        Var1 = var1;
        Var2 = var2;
    }

    protected int DoSomething1(string s)
    {
    }

    public abstract bool DoSomethingSpecific(int i);
} 
```

进而

```
internal sealed class Child1:BaseClass
{
    internal Child1(string var1, string var2)
        : base(var1, var2)
    {
    }

    public override bool DomeSomethingSpecific(int i)
    {
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:37:48.277

将子类对象转换为基类

```
public class MyClass
{
    public bool DomeSomethingSpecific(int i)
    {
            var child1 = new Child1("a","b");
            ((myBaseClass)child1).DomeSomethingSpecificForChild1(i);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T09:41:15.890

显然，将变量声明为基类实例，您只能使用基类公开的方法。

要使用特定的类方法，您需要强制转换对象，因此：

```
if(child is Child1)
{
    Child1 c1 = child as Child1
    if(c1 != null) c1.specificMethod1();
}
if(child is Child2)
{
    Child2 c2 = child as Child2
    if(c2 != null) c2.specificMethod2();
}
// ... 
```

# jquery - 重新加载 jquery 树视图

> ID：11135328
> 
> 赞同：0
> 
> 时间：2012-06-21T09:31:04.413
> 
> 标签：jquery, asp.net-mvc-3, jstree

我的页面中有树视图

```
<script src="@Url.Content("~/Scripts/jquery.treeview.js")" type="text/javascript"></script>
 $("#ulmenu").treeview({ Expanded: true }); 
```

还有一些按钮，如添加、编辑、删除、刷新。我的问题是如何在单击刷新按钮而不刷新整个页面时重新加载树视图？

# lwuit - 在 lwit 中实现动画表单

> ID：11135329
> 
> 赞同：0
> 
> 时间：2012-06-21T09:31:09.463
> 
> 标签：lwuit, lwuit-form

我读了这篇文章：

[http://lwuit.blogspot.in/2008/06/lightweight-text-input-in-lwuit.html](http://lwuit.blogspot.in/2008/06/lightweight-text-input-in-lwuit.html)

本文讨论了嵌入在具有动画背景图像的表单上的自动完成文本字段。就像有一条鱼在游泳，感觉它看起来很酷。

这是如何实施的？我应该从哪里开始？我希望对我的表单做同样的事情：背景中的动画。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:03:46.170

使用 LWUIT 资源编辑器非常容易。您应该创建一个时间线图像（使用选项卡图像）并将其添加到应用程序的背景中。您可以使用添加动画 Gif 选项，将动画 GIF 转换为时间线。

# c++ - Xcode：如何使用库设置 C++ 项目

> ID：11135330
> 
> 赞同：0
> 
> 时间：2012-06-21T09:31:11.840
> 
> 标签：c++, xcode, libraries

我对 C++ 非常陌生，并且一直在关注一些在线教程。我已经下载了他们使用的库和 .h 文件，并将它们包含在我的文件结构中。

但是我收到此错误：

'Apple Mach-0 链接器 (id) 错误...'

这到底是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:33:24.143

最简单的方法是：

打开 Xcode。去：

`File -> New -> Project -> Mac OS X -> Application -> Command Line Tool`

指定项目名称并将类型设置为`C++`

要添加库，您必须指定标头搜索路径和 .a 文件的路径。可以在项目构建设置中完成

您可能想看看这里：[XCode 4 中的标头搜索路径](https://stackoverflow.com/questions/5269029/header-search-path-in-xcode-4)

# android - 升级后的 apk 的包名必须与它在 android google play 中替换的包名相同

> ID：11135334
> 
> 赞同：0
> 
> 时间：2012-06-21T09:31:21.107
> 
> 标签：android, google-play, apk

我需要帮助在 google play 中发布新应用程序。
我有一个昨天发布的以前的应用程序。但我在那里看到一个错误，因为我的*apview 是空白的。*

我怀疑我`debug.keystore`在发布我的应用程序时使用了 ，而不是创建用于获取`md5 cert`而不是从`debug.keystore`. 但在谷歌播放它说你不能删除你以前发布的应用程序。

所以我所做的是发布一个新的并停用以前发布的应用程序。但发布新应用时出错。它说*升级后的 apk 的包名（com.myproject.final）必须与它正在替换的包名（com.myproject2.finale2）相同*，谷歌播放在他们的开发者应用程序中说*如果包名和签名证书不匹配与现有版本相比，Google Play 会将其视为新应用程序并按原样发布，并且不会将其作为更新提供给现有用户。*

Google play 将其称为对我以前的应用程序的更新，但这不是我想要的。我想发布一个新的应用程序。我应该怎么办？
有没有办法解决这个问题，而不是创建一个新的 google play 帐户？
再次支付 25 美元对我来说太多了。

另一件事是用户可以在一个 google play 帐户中上传多少个应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:40:49.553

当您在 android manifest 中更改包名称时，它实际上是一个新应用程序。因此，已安装您应用程序的现有用户不会在手机中获得更新，但他们可以在 Play 商店中看到新应用程序并下载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:36:26.640

我们可以在具有不同包名称的单个帐户中上传任意数量的应用程序。

# css - CSS nav bar div 层在 IE 上无法正确显示

> ID：11135335
> 
> 赞同：-1
> 
> 时间：2012-06-21T09:31:22.710
> 
> 标签：css, internet-explorer

我的 css 表适用于 safari 和 mozilla，但不适用于 IE。导航栏 div 层似乎存在特定问题...它是作为水平菜单栏构建的，但在 IE 上显示为垂直菜单栏，并将我的 Flash 横幅推到一边。

有关如何解决此问题的任何提示？

CSS提取如下

```
/* Menu */

#menu {
width: 1000px;
height: 46px;
margin: 0 auto;
padding: 0;
background: url(images/img04.jpg) no-repeat left top;
}
#menu ul {
margin: 0;
padding: 0px 0px 0px 48px;
list-style: none;
line-height: normal;
}

#menu li {
position: relative;
float: left;
list-style: none;
margin: 0;
padding:0;
}

#menu a {
display: block;
height: 32px;
margin-right: 3px;
padding: 14px 30px 0px 30px;
text-decoration: none;
font-family: Arial, Helvetica, sans-serif;
font-size: 12px;
font-weight: normal;
color: #FF9900;
border: none;
}
#menu a:hover, #menu .current_page_item a {
background: #C44203;
}

#menu .current_page_item a {
background: #C44203;
}

#menu a:hover {
background: #C44203;
text-decoration: none;
}

#menu li a{
display: inline-block;
height: 32px;
margin-right: 3px;
padding: 14px 30px 0px 30px;
text-decoration: none;
text-align: center;
line-height: 25px;
font-family: Arial, Helvetica, sans-serif;
font-size: 12px;
font-weight: normal;
color: #FF9900;
border: none;
}
#menu li a:hover{
background-color: #C44203;  
}   
#menu ul ul{
display: block;
height: 60px;
margin-left:-96px;
left: 50%;
position: absolute;
top: 45px;
visibility: hidden;
}

#menu ul li:hover ul{
visibility: visible;
} 
```

非常非常感谢薇薇安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:37:02.773

试试这个链接...

[http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)

听起来`display: inline-block;`只适用于 IE8 及更高版本。但是该链接为您提供了一个解决方案，并解释了使用它的好处和回退。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:46:25.453

删除 **`position: relative`；**来自#menu li。它将在 IE 中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:37:14.190

`visibility: visible;`进入_`display:block;`

并`visibility:hidden;`进入`Display:none;`

像这样

```
#menu ul ul{
display:none;
}

#menu ul li:hover ul{
display:block;
} 
```

# c# - XUnit Assertion 用于检查对象的相等性

> ID：11135337
> 
> 赞同：52
> 
> 时间：2012-06-21T09:31:42.897
> 
> 标签：c#, xunit.net, xunit

我正在使用 XUnit 框架来测试我的 C# 代码。

在这个框架中是否有任何可用的断言方法来进行对象比较？我的目的是检查每个对象的公共和私有成员变量是否相等。

我尝试了这些替代方案，但很少奏效：

```
1) bool IsEqual = (Obj1 == Obj2)
2) Assert.Same(Obj1, Obj2) which I couldnt understand what happens internally 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2017-05-02T21:04:35.073

我有类似的问题，但幸运的是我已经在使用

```
using Newtonsoft.Json; 
```

所以我只需要将它序列化为 json 对象，然后作为字符串进行比较。

```
var obj1Str = JsonConvert.SerializeObject(obj1);
var obj2Str = JsonConvert.SerializeObject(obj2);
Assert.Equal(obj1Str, obj2Str ); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2019-08-29T09:35:31.067

[FluentAssertions](https://github.com/fluentassertions/fluentassertions)库内部有一些非常强大的比较逻辑。

```
myObject.ShouldBeEquivalentTo(new { SomeProperty = "abc", SomeOtherProperty = 23 }); 
```

您甚至可以使用它来断言“myObject”的一部分。但是，它可能无法帮助您处理私有字段。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-06-21T09:40:00.090

您需要有一个自定义比较器来实现这一点，当您比较对象时，它们会根据它们是否引用内存中的同一对象来检查。要覆盖此行为，您需要覆盖`Equals`and`GetHashCode`方法，然后您可以执行以下操作：

```
Assert.True(obj1.Equals(obj2)); 
```

这是一个 MSDN 页面 abt 重载 Equals 方法： http: [//msdn.microsoft.com/en-us/library/ms173147 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173147(v=vs.80).aspx)

也可以对这个问题发表评论：[IEquatable 和只是覆盖 Object.Equals() 有什么区别？](https://stackoverflow.com/questions/2734914/whats-the-difference-between-iequatable-and-just-overriding-object-equals)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2018-08-17T11:07:37.813

有 NuGet 包可以为您执行此操作。这是我个人使用的两个示例。

1.  [深度相等](https://github.com/jamesfoster/DeepEqual)：

    ```
    object1.ShouldDeepEqual(object2); 
    ```

2.  [预期对象](https://github.com/derekgreer/expectedObjects/)：

    ```
    [Fact]
    public void RetrievingACustomer_ShouldReturnTheExpectedCustomer()
    {
      // Arrange
      var expectedCustomer = new Customer
      {
        FirstName = "Silence",
        LastName = "Dogood",
        Address = new Address
        {
          AddressLineOne = "The New-England Courant",
          AddressLineTwo = "3 Queen Street",
          City = "Boston",
          State = "MA",
          PostalCode = "02114"
        }                                            
      }.ToExpectedObject();

      // Act
      var actualCustomer = new CustomerService().GetCustomerByName("Silence", "Dogood");

      // Assert
      expectedCustomer.ShouldEqual(actualCustomer);
    } 
    ```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-04-13T20:59:51.513

我知道这是一个老问题，但自从我偶然发现它后，我想我会考虑一个可用的新解决方案（至少在.net Core 2.0 解决方案中的 xunit 2.3.1 中）。

我不确定它是什么时候引入的，但现在有一个重载形式，`.Equal`它接受一个实例`IEqualityComparer<T>`作为第三个参数。您可以在单元测试中创建自定义比较器，而不会污染您的代码。

可以像这样调用以下代码：`Assert.Equal(expectedParameters, parameters, new CustomComparer<ParameterValue>());`

XUnit 本身似乎会在遇到故障时立即停止处理测试，因此`EqualException`从我们的比较器中抛出一个新的似乎与 XUnit 开箱即用的工作方式是一致的。

```
public class CustomComparer<T> : IEqualityComparer<T>
{
    public bool Equals(T expected, T actual)
    {
        var props = typeof(T).GetProperties(BindingFlags.DeclaredOnly | BindingFlags.Public | BindingFlags.Instance);
        foreach (var prop in props)
        {
            var expectedValue = prop.GetValue(expected, null);
            var actualValue = prop.GetValue(actual, null);
            if (!expectedValue.Equals(actualValue))
            {
                throw new EqualException($"A value of \"{expectedValue}\" for property \"{prop.Name}\"",
                    $"A value of \"{actualValue}\" for property \"{prop.Name}\"");
            }
        }

        return true;
    }

    public int GetHashCode(T parameterValue)
    {
        return Tuple.Create(parameterValue).GetHashCode();
    }
} 
```

**编辑：我发现比较实际值和预期值`!=`对某些类型无效（我确信有一个更好的解释涉及引用类型和值类型之间的差异，但今天不是这样）。我更新了代码以使用该`.Equals`方法来比较两个值，这似乎效果更好。**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-02-10T10:58:59.897

这是 IEqualityComparer 接口的另一个实现，具有真正的[GenericComparer](https://stackoverflow.com/questions/6694508/how-to-use-the-iequalitycomparer/71047520#71047520)

并且为了断言 2 个相同类型的列表是相等的，无论列表容器如何，您都可以添加以下扩展：

```
public static bool IsEqualTo<T>(this IEnumerable<T> list, IEnumerable<T> expected) where T : class
{
    if (!list.HasSameLengthThan<T>(expected))
        return false;

    Assert.Equal(expected, list, new GenericComparer<T>());
    return true;
} 
```

# c# - 清除字节数据语音流？

> ID：11135339
> 
> 赞同：-3
> 
> 时间：2012-06-21T09:31:54.520
> 
> 标签：c#, sockets

告诉我如何从网络中获取清晰的字节数据？前任：

```
 public void OnRecievedData(IAsyncResult ar)
            {
                Socket sock = (Socket)ar.AsyncState;

                try
                {
                    int nBytesRec = sock.EndReceive(ar);
                    if (nBytesRec > 0)
                    {
                        sound.PlayReceivedVoice(buffer);
                     //   Array.Clear(buffer, 0, buffer.Length);
                        SetupRecieveCallback(sock);
                    }
                    else
                    {
                        sock.Shutdown(SocketShutdown.Both);
                        sock.Close();
                    }
                }
                catch (Exception) { }
            } 
```

我想删除之前收到的数据。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:09:10.263

> 我想删除之前收到的数据。

了解垃圾收集的工作原理。这部分不是内存泄漏，它可能只是延迟释放，因为 GC 认为不需要释放内存。

如果您有内存泄漏，它在其他地方并且有工具可以找到它（MemProfiler 是我使用的）。

# android - 如何将 Android 应用程序转换并安装到黑莓 10？

> ID：11135341
> 
> 赞同：3
> 
> 时间：2012-06-21T09:31:55.023
> 
> 标签：android, blackberry-eclipse-plugin, blackberry-playbook, blackberry-10

从 Eclipse 插件（通过[Android 应用程序运行时文档中的说明](https://developer.blackberry.com/android/documentation/install_plugin_prerequisites_1895476_11.html)安装） ，我尝试将我的 Android 应用程序转换为用于 ADT 的 BlackBerry 插件，但我收到以下错误消息：

```
未能部署项目 android-app-com-2
信息：发送请求：安装
信息：操作：安装
信息：文件大小：2989786
信息：安装...
信息：处理 2989786 字节
信息：进度 0%...
信息：进度 50%...
信息：进度 100%...
实际名称::com.app.durbon.testEJjhp8tKy1bZX0fw0v7WXIU
actual_id::testEJjhp8tKy1bZX0fw0v7WXIU
实际版本::1.81.4202.0
结果::失败-110

```

我不知道失败 -110 是什么意思和 actual_dname

我的包是 com.app.durbon，但出现 .test 我不知道为什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T11:48:39.553

您可以检查使用在线工具将android .apk 文件转换为黑莓的.bar 文件。 [https://bdsc.webapps.blackberry.com/android/bpaa/](https://bdsc.webapps.blackberry.com/android/bpaa/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T01:56:52.097

只需尝试[图形辅助工具](http://supportforums.blackberry.com/t5/Testing-and-Deployment/BlackBerry-Tablet-OS-Graphical-Aid/ta-p/1207067)。如果你熟悉控制台，你可以[使用命令行工具](http://developer.blackberry.com/android/tools/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:36:38.450

在 BlackBerry 中运行 Android 应用程序时需要注意的一些重要事项是：

*   您必须具有要在其上部署的设备或仿真器目标。如果您使用的是设备，则只有 BlabkBerry 10 具有运行时。如果您使用模拟器，请使用[BlackBerry Dev](https://developer.blackberry.com/android/tools/)中的模拟器；
*   BB 的 Andorid 运行时只支持 Froyo (2.3) 或以上版本；
*   使用 BB 的模拟器时，必须通过类似 Socket 的方式连接到它。您可以在 Window/Preference/BlackBerry/Target 中进行配置；
*   根据您遇到的错误，我想知道它是否是错误的版本！

# c# - XML DocumentType method CreateDocumentType crashes if DTD is absent .NET C#

> ID：11135343
> 
> 赞同：4
> 
> 时间：2012-06-21T09:31:58.183
> 
> 标签：c#, xml, doctype, dtd, xmldocument

I have a problem with generating an XML that needs to be generated automatically and then manually uploaded on a client site for validation.

The specification of the client requires that we include the DTD declaration at the top. That is

```
<!DOCTYPE TheFile System "TheDTD.dtd" ""> 
```

So programmatically when I try to generate the XML the line

```
 XmlDocumentType doctype;
    doctype = doc.CreateDocumentType("TheFile", null, "TheDTD.dtd", null);
    doc.AppendChild(doctype); 
```

Fails and it asks me the "TheDTD.dtd" should exist in the windows directory: C:\Windows\System32\inetsrv

Later if I want to read the XmlDoc the line

```
 XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load(xmlLocation); 
```

Fails and it asks me the "TheDTD.dtd" should exist in the Project directory where the whole project is stored

I don't want to actually validate the DTD, I just want to reference because the validation happens on the client side. Is there any way to add the line " " in the XML without having to copy the actual .dtd in 2 different locations?

If we make the declaration public and change this to

```
 <!DOCTYPE TheFile PUBLIC "TheDTD.dtd" ""> 
```

then everything works fine but the client requires that it should be SYSTEM and not PUBLIC. I wish the CreateDocumentType and the Load method wouldn't crash if the actual .dtd is missing because at this point I don't even have this file and it's not needed for my purposes.

Thank you

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T10:23:57.337

You can set the XmlDocument.XmlResolver property to null. This disable the loading of external XML resources (dtd, schemas).

```
doc.XmlResolver= null; 
```

# c# - 基于数据的Datagrid行颜色变化

> ID：11135353
> 
> 赞同：1
> 
> 时间：2012-06-21T09:32:36.623
> 
> 标签：c#, asp.net

我正在开发 asp.net 3.5 应用程序。我有一个数据网格。我想根据行绑定的数据项更改行颜色。我知道这可以在 gridview 中使用 rowdatabound 事件轻松完成，但此事件在 Datagrid 控件中不可用。请建议我如何使用它？

问候， 阿西夫·哈米德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:53:22.583

你有没有尝试过：

```
 protected void grdSomething_ItemDataBound(object sender, DataGridItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item)
            e.Item.BackColor = Color.AliceBlue;
    } 
```

标签

```
<asp:DataGrid runat="server" ID="grdSomething" AutoGenerateColumns="False"
    onitemdatabound="grdSomething_ItemDataBound"> 
```

输出：

![在此处输入图像描述](../Images/4ea17f936b873776ab8b4cd76be5e6b7.png)

# c++ - C++11 std::function 和完美转发

> ID：11135354
> 
> 赞同：15
> 
> 时间：2012-06-21T09:32:36.563
> 
> 标签：c++, c++11, perfect-forwarding, std-function

为什么 C++ 标准中 std::function<>::operator() 的定义是：

```
R operator()(ArgTypes...) const; 
```

并不是

```
R operator()(ArgTypes&&...) const; 
```

?

有人会认为，要正确转发参数，我们需要 && ，然后`std::forward<ArgTypes>...`在转发调用时在函数体中使用？

我部分重新实现了 std::function 来测试它，我发现如果我使用 &&，当我稍后尝试按值传递参数给 operator() . 我认为我对右值/转发概念有足够的了解，但我仍然无法理解这一点。我错过了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-21T10:00:48.120

完美转发仅在函数本身（在本例中`operator()`）被模板化并推导出模板参数时才有效。对于`std::function`，您从*类*`operator()`本身的模板参数中获取参数类型，这意味着它们永远不会从任何参数中推导出来。

 *完美转发背后的全部技巧是模板参数推导部分，与引用折叠一起，这就是完美转发。

我将方便地链接到[关于此处的其他答案`std::forward`](https://stackoverflow.com/a/8527373/500104)，我将在其中解释完美转发（和`std::forward`）的工作原理。

请注意，`std::function`'s`operator()`不需要完美转发，因为用户自己决定参数应该是什么。这也是你不能只添加`&&`到的原因`operator()`；举个例子：

```
void foo(int){}

int main(){
  // assume 'std::function' uses 'ArgTypes&&...' in 'operator()'
  std::function<void(int)> f(foo);
  // 'f's 'operator()' will be instantiated as
  // 'void operator()(int&&)'
  // which will only accept rvalues
  int i = 5;
  f(i); // error
  f(5); // OK, '5' is an rvalue
} 
```*

# xdebug - XDebug 视图 HTML 输出

> ID：11135355
> 
> 赞同：0
> 
> 时间：2012-06-21T09:32:43.973
> 
> 标签：xdebug

您好我正在使用 XDEBUG 调试我的 WordPress 代码，是否可以在调试时查看在浏览器中构建的页面？目前页面只是挂起，直到调试过程完成，然后显示完全呈现的页面。理想情况下，当我通过主题代码进行调试时，我希望看到页面一点一点地建立起来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:42:37.117

我不太了解 Wordpress 的内部结构，但如果它使用输出缓冲（我猜它确实如此），则输出会一次全部发送到客户端。也许您可以以某种方式禁用输出缓冲。[http://php.net/manual/en/book.outcontrol.php](http://php.net/manual/en/book.outcontrol.php)

# xcode - xcode 快捷方式 - ctrl + 1-5 与空格冲突？

> ID：11135357
> 
> 赞同：1
> 
> 时间：2012-06-21T09:32:56.703
> 
> 标签：xcode

在 Xcode 中，当您想使用 ctrl + 2（显示以前的历史记录）之类的快捷方式时。这将与您在空间中移动的屏幕发生碰撞。您可能可以在系统设置中做一些事情......但也许我错过了什么？

问候克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:36:39.337

您可以更改 xcode 的快捷方式 Go to Preferences -> Go to Key Bindings 在这里您可以找到所有可以更改 conflit 快捷方式的快捷键![在此处输入图像描述](../Images/d2b0490997924db98b903d5808542044.png)

# android - 将图像 url 加载到 editText

> ID：11135359
> 
> 赞同：0
> 
> 时间：2012-06-21T09:33:07.077
> 
> 标签：android, mysql

我需要将 URL Image 插入 EditText 并能够将其保存到我的**Mysql**。

*   我需要浏览本地服务器中的所有图像（已**解决**）。
*   然后我想选择一个图像并将所选的 url 图像显示到 EditText（**问题**）中。
*   这样我就可以将选择的 url 图片保存到 mysql 数据库中（**没问题**）
*   加上我选择图像后如何返回我的表单（**问题**）

这是我将图像列表浏览到本地服务器的代码：

```
checkButton=(Button) findViewById(R.id.browser);

        checkButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

            String url = "http://10.0.2.2/images/";
            Intent i = new Intent(Intent.ACTION_VIEW);
            i.setData(Uri.parse(url));
            startActivity(i);

        }

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:49:16.630

如果您有图像的 URL，那么您可以从服务器检索图像的位图。然后你可以从 Bitmap 构建一个 Drwable-

```
 Drawable d =new BitmapDrawable(bitmap); 
```

然后在 EditText 中设置背景

```
 editText.setBackgroundDrawable(d); 
```

# java - 如何访问带注释的实例中的注释参数

> ID：11135361
> 
> 赞同：1
> 
> 时间：2012-06-21T09:33:13.213
> 
> 标签：java, annotations

如果我有一个在字段上使用的参数化注释，该字段引用的对象可以访问注释参数吗？

```
 @Retention(RetentionPolicy.RUNTIME)
  @Target(ElementType.FIELD)
  public @interface Classy {
      Class<?> klazz();
  } 
```

用法：

```
class Bar{
    @Classy(klazz=Integer.class)
    Foo foo;
    ...
} 
```

假设访问：

```
class  Foo{
  private Class<?> klazz = String.class;

  private void useAnnotationParameterIfAvailable(){
    klazz = what goes here?
  }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:50:31.033

否 - 注释是字段的属性，对象不能迭代当前引用它的字段（为了有效地查找字段，JVM 必须维护专用的查找数据结构，并在每次字段分配时更新它。这将会很贵...）

当然，如果对象的类型唯一标识了字段，您可以使用类路径扫描来查找该类型的所有带注释的字段 - 但如果类型标识要使用的类，则将注释放在类型上会容易得多： -)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T09:38:45.203

在目标字段上使用以下方法。

```
java.lang.reflect.Field.getAnnotation(Class<T>) 
```

示例代码

```
 try {
        Field field = this.getClass().getField("foo");
        Ignore annotation = field.getAnnotation(Classy.class);

        //do what ever with annotation
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NoSuchFieldException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T09:41:26.107

Foo.class.getAnnotation(Classy.class).klazz();

注意：可能需要在这里和那里进行一些转换，我手边没有 IDE。

有关更多示例，请参见此处：

[http://tutorials.jenkov.com/java-reflection/annotations.html](http://tutorials.jenkov.com/java-reflection/annotations.html)

和这里：

[是否可以在java中读取注释的值？](https://stackoverflow.com/questions/4296910/is-it-possible-to-read-the-value-of-a-annotation-in-java)

# c# - 比较客户端验证总是在编辑器模板上失败

> ID：11135366
> 
> 赞同：1
> 
> 时间：2012-06-21T09:33:28.737
> 
> 标签：c#, asp.net-mvc-3, validation, razor, compare

我有一个带有电子邮件地址属性和确认电子邮件地址属性的视图模型，如下所示：

```
public class UserNewModel
{
    [Required]
    [StringLength(100)]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Email Address")]
    public string EmailAddress { get; set; }

    [Required]
    [StringLength(100)]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Confirm Email Address")]
    [Compare("EmailAddress", ErrorMessage = "The email address and confirmation email address do not match.")]
    public string ConfirmEmailAddress { get; set; }

} 
```

有一个对应的 EditorTemplate 强类型化到这个模型：

```
@model SponsorworksSaaS.UI.Models.UserNewModel

<div class="editor-label">
    @Html.LabelFor(m => m.EmailAddress)
</div>
<div class="editor-field">
    @Html.EditorFor(m => m.EmailAddress)
    @Html.ValidationMessageFor(m => m.EmailAddress)
</div>
<div class="editor-label">
    @Html.LabelFor(m => m.ConfirmEmailAddress)
</div>
<div class="editor-field">
    @Html.EditorFor(m => m.ConfirmEmailAddress)
    @Html.ValidationMessageFor(m => m.ConfirmEmailAddress)
</div> 
```

然后我的 UserNewModel 包含在其他模型中，例如：

```
public class CompanyDetailsModel
{
    ....

    /// <summary>
    /// Used to capture the initial user account details when creating a new company
    /// </summary>
    [Display(Name = "Initial User Account")]
    public UserNewModel NewCompanyUser { get; set; }

} 
```

并且与此父模型关联的相应强类型视图使用@Html.EditorFor 来显示编辑器模板：

```
@model SponsorworksSaaS.UI.Models.CompanyDetailsModel

<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true, "Company change was unsuccessful. Please correct the errors and try again.")
    <div>
        <fieldset>
            <legend>Company Information</legend>
            <div>
               @Html.EditorFor(m => m.NewCompanyUser)
            </div>
            <p>
                <input type="submit" name="btnSubmit" value="Save Company" />
            </p>
        </fieldset>
    </div>
} 
```

客户端的比较验证对于电子邮件地址总是失败。如果我在比较电子邮件地址文本框中输入相同的字符串，当我将焦点移开时，它总是会显示比较验证错误消息。即使比较验证在客户端显示失败，如果我提交表单 ModelState.IsValid 为真，尽管我不确定是否在服务器端进行了任何比较验证。

生成的视图源如下图所示：

```
<div class="editor-label">
    <label for="NewCompanyUser_EmailAddress">Email Address</label>
</div>
<div class="editor-field">
    <input class="text-box single-line" data-val="true" data-val-length="The field Email Address must be a string with a maximum length of 100." data-val-length-max="100" data-val-required="The Email Address field is required." id="NewCompanyUser_EmailAddress" name="NewCompanyUser.EmailAddress" type="text" value="" />
    <span class="field-validation-valid" data-valmsg-for="NewCompanyUser.EmailAddress" data-valmsg-replace="true"></span>
</div>
<div class="editor-label">
    <label for="NewCompanyUser_ConfirmEmailAddress">Confirm Email Address</label>
</div>
<div class="editor-field">
    <input class="text-box single-line" data-val="true" data-val-equalto="The email address and confirmation email address do not match." data-val-equalto-other="*.EmailAddress" data-val-length="The field Confirm Email Address must be a string with a maximum length of 100." data-val-length-max="100" data-val-required="The Confirm Email Address field is required." id="NewCompanyUser_ConfirmEmailAddress" name="NewCompanyUser.ConfirmEmailAddress" type="text" value="" />
    <span class="field-validation-valid" data-valmsg-for="NewCompanyUser.ConfirmEmailAddress" data-valmsg-replace="true"></span>
</div> 
```

我已经尝试向 jquery.validate.unobtrusive.js 文件添加单引号，正如此处其他帖子所建议的那样，但这并没有解决问题。

```
element = $(options.form).find(":input[name=" + fullOtherName + "]")[0]; 
```

变成：

```
element = $(options.form).find(":input[name='" + fullOtherName + "']")[0]; 
```

我也尝试过使用 min 和 full js 文件，但问题仍然存在。事实上，如果我在 ready 函数中添加一些 jquery：

```
$(function () {
    var e1 = $('form').find(":input[name=*.EmailAddress]");
    var e2 = $('form').find(":input[name='*.EmailAddress']");
    alert(e1);
    alert(e1[0]);
    alert(e2);
    alert(e2[0]);
}); 
```

alert(e2[0]) 返回 undefined，但 alert(e1[0]) 返回预期的文本框元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:36:50.340

原来这是 jquery.validate.unobtrusive.js 文件中的已知错误。我忘了清理旧的缓存副本！哦！有问题的代码行在我的文件 9 版本的第 284 行，以防其他人需要更改它）。搜索 equalto 将接近正确的代码部分。

来自 Visual Studio 的干净解决方案足以解决问题。

我没有设法让 jquery.validate.unobtrusive.min.js 文件工作，尽管改变了

```
b.add("equalto",["other"],function(b){var h=g(b.element.name),i=b.params.other,d=e(i,h),f=a(b.form).find(":input[name="+d+"]")[0];c(b,"equalTo",f)}); 
```

到

```
b.add("equalto",["other"],function(b){var h=g(b.element.name),i=b.params.other,d=e(i,h),f=a(b.form).find(":input[name='"+d+"']")[0];c(b,"equalTo",f)}); 
```

请注意 find 方法调用中“+d+”周围的单引号。

# html - 在html的同一行中有空格

> ID：11135368
> 
> 赞同：4
> 
> 时间：2012-06-21T09:33:34.587
> 
> 标签：html

我想在同一行之间留一些空间。我知道有诸如`<br>, <p>`和其他元素。而不是使用这些，我想在字符之间添加一点空间......

示例代码：

```
 <strong>
   New? Register here!
</strong>
 <span>
    Register
 </span> 
```

我想在他们之间留一些空间。如何在 HTML 中做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T09:37:13.693

在您的示例中，您可以应用一些 CSS 规则，例如：

```
span {
    margin-left: 5em;
} 
```

或内联：

```
<strong>
   New? Register here!
</strong>
<span style="margin-left: 5em;">
    Register
 </span> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T09:37:32.767

添加`&nbsp;`一个不会折叠的空格字符。

或者，添加具有一定宽度的跨度，例如

```
<span style="width:50px;display:inline-block"></span> 
```

（我认为元素需要是显示类型`inline-block`以尊重块属性，例如填充、边框、边距、宽度等）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T09:37:25.613

`&nbsp;`为空格字符。

想知道你为什么需要那个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T09:37:05.590

只需在关闭强标签之前添加“br/”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T09:39:04.847

改用这个：

```
<strong>
   New?&nbsp;Register&nbsp;here!
</strong>
<span>
   Register
</span> 
```

# node.js - nodejs 使用 npm + package.json 解决依赖关系

> ID：11135383
> 
> 赞同：4
> 
> 时间：2012-06-21T09:35:03.490
> 
> 标签：node.js, npm

我的项目结构像

> ```
>  /
>     index.js
>     package.json
>     node_modules
>     |_Service_A
>       |__main.js
>       |__package.json
>     |_Service_B
>       |__main.js
>       |__package.json 
> ```

当我`npm install`在我的项目根目录上执行时，/package.json 中提到的依赖项已解决，但 node_modules/Service_A/package.json 或 node_modules/Service_B/package.json 中的依赖项未解决。如何让 npm 解决不同文件夹之间的依赖关系？

Service_A 和 Service_B 是我在 node_modules 中预加载的本地模块 [它们有依赖关系]。我知道我可以将它们的依赖项仅放在顶级 json 中，但是如果它们依赖于相同的模块但不同的版本怎么办。例如：Service_A 需要 jquery 1.6 和 Service_B jquery 1.7？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T10:23:29.263

由于 Service_A 和 Service_B 是本地模块，我假设未在您的顶级 package.json 依赖项部分中定义。所以 npm 甚至不知道它们的存在。

考虑在 git 存储库下开发本地模块，然后您可以通过以下方式定义它们：

```
"dependencies": {
  "public": "git://github.com/user/repo.git#ref", 
  "private": "git+ssh://git@github.com:user/repo.git#ref"
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T04:01:02.097

你可以在你的包中添加一些东西来调用这些 package.json 文件的 npm install 。像下面这样的东西可能会奏效。

```
"scripts": {
   "preinstall": "npm install Service_A/ && npm install Service_B/"
} 
```

# x509certificate - 如何以编程方式将 Internet 证书放入 Notes ID 文件？

> ID：11135388
> 
> 赞同：0
> 
> 时间：2012-06-21T09:35:15.077
> 
> 标签：x509certificate, lotus-domino

块引用

我已将 Internet 证书导入到我的 Notes ID 文件中。我有兴趣使用获取此证书的 Notes 应用程序对某些数据或文件进行数字签名。我可以通过 Notes 访问此 Internet 证书吗？

谢谢

块引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:32:55.227

我不相信 Notes C API 提供对存储在 ID 文件中的访问密钥或证书的任何调用。相反，它提供了使用密钥对数据笔记进行签名、加密或解密的功能。

# android - Android：在下载应用程序时显示通知栏

> ID：11135389
> 
> 赞同：0
> 
> 时间：2012-06-21T09:35:16.563
> 
> 标签：android, download, android-notification-bar

我想在 Android 中下载应用程序时显示通知栏。我希望栏与从市场下载应用程序时显示的栏相同。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:41:32.037

我认为这个链接可以帮助你：[http ://united-coders.com/nico-heid/show-progressbar-in-notification-area-like-google-does-when-downloading-from-android](http://united-coders.com/nico-heid/show-progressbar-in-notification-area-like-google-does-when-downloading-from-android)

这是**download_progress**（要更改进度条的样式，请使用您自己的`android:progressDrawable`）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" android:layout_height="fill_parent"
android:padding="5dp">

<TextView android:id="@+id/status_text" android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:layout_alignParentTop="true"
    android:text="@string/download_notification_message" />

<ProgressBar android:id="@+id/status_progress"
    android:layout_width="fill_parent" android:layout_height="5dp"
    android:layout_below="@id/status_text"
    android:layout_marginTop="10dp"
    android:progressDrawable="@drawable/notification_progress_bar"
    style="@android:style/Widget.ProgressBar.Horizontal"
    android:indeterminate="false" android:indeterminateOnly="false" />   </RelativeLayout> 
```

**通知进度条：**

```
<?xml version="1.0" encoding="utf-8"?><layer-list xmlns:android="http://schemas.android.com/apk/res/android">   
 <item android:id="@android:id/background">
    <shape>
        <gradient
                android:startColor="#000001"
                android:centerColor="#0b131e"
                android:centerY="0.75"
                android:endColor="#0d1522"
                android:angle="270"
        />
    </shape>
</item>
<item android:id="@android:id/secondaryProgress">
    <clip>
        <shape>
            <gradient
                    android:startColor="#234"
                    android:centerColor="#234"
                    android:centerY="0.75"
                    android:endColor="#a24"
                    android:angle="270"
            />
        </shape>
    </clip>
</item>

<item  
    android:id="@android:id/progress">  
    <clip>  
        <shape>   
            <gradient  
                    android:startColor="#44000000"  
                    android:centerColor="#44000000"  
                    android:centerY="0.75"  
                    android:endColor="#44000000"  
                    android:angle="270"  
            />  
        </shape>  
    </clip>  
</item> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-21T09:43:38.817

试试这个通知栏的代码

```
void showProgress(String file_path){
        dialog = new Dialog(DownloadFileDemo1.this);
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        dialog.setContentView(R.layout.myprogressdialog);
        dialog.setTitle("Download Progress");

        TextView text = (TextView) dialog.findViewById(R.id.tv1);
        text.setText("Downloading file from ... " + file_path);
        cur_val = (TextView) dialog.findViewById(R.id.cur_pg_tv);
        cur_val.setText("Starting download...");
        dialog.show();

        pb = (ProgressBar)dialog.findViewById(R.id.progress_bar);
        pb.setProgress(0);
        pb.setProgressDrawable(getResources().getDrawable(R.drawable.green_progress));
    } 
```

# c# - Web 服务返回错误的内容类型响应标头

> ID：11135392
> 
> 赞同：0
> 
> 时间：2012-06-21T09:35:33.613
> 
> 标签：c#, wcf, web-services, wcf-configuration, protocolexception

我正在尝试在 asp.net c# 应用程序中使用第三方 Web 服务（基于 php），但服务配置失败。已经尝试添加服务/Web 引用 - 所有相同的错误：

> 响应消息的内容类型 text/html 与绑定的内容类型 (text/xml; charset=utf-8) 不匹配。如果使用自定义编码器，请确保正确实现 IsContentTypeSupported 方法。响应的前 402 个字节是：'<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/ " xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body>;<. ..

[手动编辑响应以正确显示 > < 字符，否则完全有效]

对我来说，这似乎是一个完全有效的响应，我试图查看 fiddler 在响应标头中写入的内容 - Content-Type: text/html，这可能是问题的根源 - webservice 发送了错误的内容类型（改为 text/html text/xml) ，但如何配置我的客户端忽略/覆盖收到的内容类型？谷歌搜索什么都没有，所以请，如果有人可以帮忙 - 问题出在哪里？Binding\endpoint 配置是一个默认的 basicHttpBinding/endpoint，它是由 VS2010 在使用 Add Service Reference 选项时生成的，那里没有任何改变。提前致谢。

[应用程序配置]

```
<?xml version="1.0"?>
<configuration>
<configSections>
<sectionGroup  name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0,      Culture=neutral, PublicKeyToken=b77a5c561934e089">
  <section name="Collection.ServicePlayground.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
</sectionGroup>
</configSections>
<system.serviceModel>
<bindings>
<basicHttpBinding>
<binding name="SmsServiceSoap1" closeTimeout="00:01:00" openTimeout="00:01:00"
    receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
    bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
    useDefaultWebProxy="true">
    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
    <security mode="None">
    transport clientCredentialType="None" proxyCredentialType="None"
    realm="" />
    <message clientCredentialType="UserName" algorithmSuite="Default" />
    </security>
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://ws1.streamsms.ru/SmsService.php" binding="basicHttpBinding"
    bindingConfiguration="SmsServiceSoap1" contract="SmsService.SmsServiceSoap"
    name="SmsServiceSoap2" />
</client>
</system.serviceModel>
<applicationSettings>
<Collection.ServicePlayground.Properties.Settings>
  <setting name="Collection_ServicePlayground_WSStreamProvider_SmsService"   serializeAs="String">
    <value>http://ws1.streamsms.ru/SmsService.php</value>
  </setting>
 </Collection.ServicePlayground.Properties.Settings>
 </applicationSettings>
 </configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:09:31.493

我不确定，但您是否认为您遇到了此处显示的内容：http: [//cushen.wordpress.com/2009/04/08/web-service-content-type-error-using-visual-studio-2008 /](http://cushen.wordpress.com/2009/04/08/web-service-content-type-error-using-visual-studio-2008/)

看起来很相似..您应该使用 Add Web Reference 与 Add Service Reference （因为后者用于 WCF 样式服务？）

也许.. ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:03:09.237

也许矫枉过正，但您可以尝试使用自定义编码器进行绑定。默认为文本/xml。

[http://msdn.microsoft.com/en-us/library/ms751486.aspx](http://msdn.microsoft.com/en-us/library/ms751486.aspx)

# c# - 查询太复杂。如何修改查询？

> ID：11135396
> 
> 赞同：1
> 
> 时间：2012-06-21T09:35:44.813
> 
> 标签：c#, sql, ms-access

在应用程序中的某些地方有一个自动生成的查询，例如

```
SELECT DISTINCT `Name`,`Number` 
FROM `Table` 
WHERE (`ID`=@NAZ_ID_0)   
   OR (`ID`=@NAZ_ID_1) 
   OR (`ID`=@NAZ_ID_2)
   OR (`ID`=@NAZ_ID_3) 
   ... 
   OR (`ID`=@NAZ_ID_690) 
```

在执行此查询时，ms 访问会抛出异常“查询太复杂”。显然是因为`OR`s 的数量在 ms 访问中被限制为 99。如何更改此查询并避免使用此`OR`……构造`OR`？`OR`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:37:56.590

如果您可以自己影响查询创建，则可以简单地使用

```
 SELECT DISTINCT `Name`,`Number` FROM `Table` WHERE `ID` IN (@NAZ_ID_0,@NAZ_ID_1,etc) 
```

如果您无法控制查询的创建，但可以在使用之前对其进行更改，则可以尝试将 or-s 替换为 in-variant。最后，如果 IN() 也太复杂，您可以考虑创建一个临时表，用变量填充它并在原始查询中使用子查询。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T09:47:23.697

在“大”DBMS 中，解决这类问题的常用方法是创建一个临时表，然后像这样重写查询：

```
SELECT DISTINCT `Name`,`Number` FROM `Table`
WHERE `ID` IN (SELECT `ID` FROM TemporaryTable) 
```

因此，无需分配绑定参数`@NAZ_ID_X`，只需在执行查询之前将这些相同的值插入到临时表中。

此外，这可以更轻松地避免动态构建 SQL 文本并获得查询[准备](http://en.wikipedia.org/wiki/Prepared_statement)的好处。

不幸的是，Access 不直接支持临时表，因此如果有多个并发客户端在同一个数据库上工作，您必须为每个客户端生成一个**唯一命名的**临时表（并相应地调整查询）。

# scroll - Woothemes Flexslider 改变滑块速度的问题

> ID：11135401
> 
> 赞同：0
> 
> 时间：2012-06-21T09:35:59.010
> 
> 标签：scroll, flexslider

我一直在使用 woothemes flex 滑块，我需要幻灯片的自动滚动速度更快。在最底部的 jquery.flexslider.js 文件中是默认设置，这是我能找到的文件中唯一可以控制速度的地方。但是，当我将速度从 7000 毫秒更改为更高或更低的数字时，我的速度根本没有变化，似乎我错过了一些非常简单的东西，但我无法弄清楚是哪个。

flexslider放置在一个简单的html页面上，本地版本或在线速度不会改变。

Ps 我是新成员，还不允许发布图像，并且我粘贴在此消息中的代码显示在行中且难以阅读，因此我将其省略了。

有没有人遇到过这个问题并知道如何纠正它？我很感激任何建议:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T12:43:35.857

我正在使用 Flexslider，这是调整幻灯片之间速度的代码：

```
$(function(){
  SyntaxHighlighter.all();
});
$(window).load(function(){
  $('.flexslider').flexslider({
    animation: "slide",slideshowSpeed: 3000,
    start: function(slider){
      $('body').removeClass('loading');
    }
  });
}); 
```

[这里](http://www.webtechresources.com/2012/01/flexslider-jquery-slider-plugin/)是其他选项的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:14:03.827

只需在代码中使用：

```
$('.flexslider').flexslider({ animationDuration: 6000 }); 
```

动画速度不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T02:19:21.700

不是你的错。他们的文件是错误的。查看第 796 行插件的源代码，您会发现它们使用“animationSpeed”。

例子：

```
$('.flexslider').flexslider({
    animationSpeed: 10000
}); 
```

希望有帮助。

# pdf - 如何将多个 tif 文件合并为单个 tif 文件？

> ID：11135405
> 
> 赞同：5
> 
> 时间：2012-06-21T09:36:14.800
> 
> 标签：pdf, merge, tiff, ghostscript

我有很多 tif 文件，我想转换成一个文件。我在 Ubuntu 11.04 上，我该怎么做？我尝试将 tif 转换为单个 pdf，但是在将 pdf 转换为 tif 时卡住了，我使用 ghoscript 和这个命令：

```
gs -dNOPAUSE -q -g300x300 -sDEVICE=tiffg4 -dBATCH -sOutputFile=result.tif source.pdf 
```

但结果并不好。:( 。对我的问题有什么建议吗？

之前谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T10:13:33.787

使用**tiffcp**

```
usage: tiffcp [options] input... output.tiff 
```

例如：

```
tiffcp *.tiff output.tiff 
```

你会得到一个多页的 tiff

然后**是 tiff2pdf**（ghostscript 的包装器）

```
usage:  tiff2pdf [options] input.tiff 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-01T12:37:36.820

安装*tiffcp*使用`apt-get install libtiff-tools`

# html - ActiveX 控件：“自动化服务器无法创建对象”

> ID：11135410
> 
> 赞同：2
> 
> 时间：2012-06-21T09:36:31.150
> 
> 标签：html, activex

我正在尝试使用 ActiveX 控件：

```
shell = new ActiveXObject("WScript.Shell"); 
```

但这给了我一个错误：

> 消息：自动化服务器无法创建对象

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-12T18:52:36.710

您应该设置 Internet Explorer 安全设置。按照设置

1.  转到工具（或按 Alt+X）
2.  转到 Internet 选项
3.  单击“安全”选项卡。如果您从 Internet 加载您的网站，请选择“Internet”图标，如果您从本地计算机加载您的网站，请选择“Local Intranet”
4.  单击“自定义级别”按钮
5.  找到“初始化并编写未标记为可安全执行脚本的 Activex 控件”并选择“提示”单选按钮并单击“确定”。

就这样。欢呼！

# android - 在 Android 中查询没有 OpenGL 上下文的 ETC1 压缩支持？

> ID：11135411
> 
> 赞同：0
> 
> 时间：2012-06-21T09:36:39.077
> 
> 标签：android, opengl-es

当我的应用程序启动时，我正在使用 ETC1 压缩一些纹理。如果不支持 ETC1，我还有一个备用方法。

问题：

```
ETC1Util.isETC1Supported(); // Returns false with no available gl context even if the device supports it. 
```

所以我的问题是：有没有办法在没有当前 gl 上下文的情况下查询这个，或者我必须使用 GLSurfaceView 来渲染我的初始屏幕才能获得那个标志？

我读过我可以在 AndroidMarket 中过滤没有此类支持的设备，但这不是一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:58:08.510

没有 OpenGL 上下文就无法查询 OpenGL 扩展。

但如果您使用 OpenGL ES 2.0，那么 ETC 将始终可用：http: [//developer.android.com/guide/topics/manifest/supports-gl-texture-element.html](http://developer.android.com/guide/topics/manifest/supports-gl-texture-element.html)

> GL_OES_compressed_ETC1_RGB8_texture
> 
> 爱立信纹理压缩。在 OpenGL ES 2.0 中指定，可用于所有支持 OpenGL ES 2.0 的 Android 设备。

# iphone - 在 ipad 中两次显示用户当前位置的弹出窗口

> ID：11135413
> 
> 赞同：4
> 
> 时间：2012-06-21T09:36:39.843
> 
> 标签：iphone, ipad, sencha-touch-2

我正在使用 sencha touch 2 框架来构建我的应用程序。问题是我在应用程序中显示地图，其中弹出窗口在 ipad 中显示两次。理想情况下，位置弹出窗口预计会显示一次，请我知道任何设置会触发此弹出窗口两次，或者他们通过 sencha touch 框架进行的任何编码更改是否触发了这种情况。

![在此处输入图像描述](../Images/68864dc2537f24d34b4192b84ec7a6d9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T12:57:49.410

我有一个类似的问题。我在 phonegap wiki 上找到了以下信息，这些信息也可能对您有所帮助。

[http://wiki.phonegap.com/w/page/16494770/FAQ](http://wiki.phonegap.com/w/page/16494770/FAQ)

有趣的部分是：

> iPhone OS 4.x 和 PhoneGap 0.9.x 的最新解决方案是按照文档的示例添加一个**等待设备准备好的事件侦听器，否则使用本机 navigator.geolocation 并且您会收到警报像这样**：“var/mobile/Applications/UUID/appname.app/www/index.html”想使用您当前的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:35:41.040

[这是](https://stackoverflow.com/a/12740258/956779)我在 PhoneGap 2.1.0 中用来解决这个问题的代码。您可以将它完全按原样放入您的 index.js 中，然后将您自己的代码放入 myCustomJS() 回调处理程序中。它将在桌面和移动浏览器以及 PhoneGap / Cordova 应用程序中工作。

# xcode - 隐藏 Xcode 4.3 工具栏在全屏模式下不可用

> ID：11135414
> 
> 赞同：2
> 
> 时间：2012-06-21T09:36:40.790
> 
> 标签：xcode, xcode4, xcode4.3

我只是想知道是否有可能在全屏模式下隐藏 Xcode 的工具栏。似乎这是不可能的：在上下文菜单中，隐藏是灰色的，关键命令也不起作用。

在像 MBA 这样的小屏幕上，同时拥有全屏和隐藏工具栏会很棒。

有没有隐藏的方法？提前致谢。

编辑：只是为了让我的观点更清楚

a)这是正常屏幕模式下工具栏的高度

![在此处输入图像描述](../Images/12a61eb3277ae774a292cbff06e881aa.png)

b)这是普通屏幕模式下隐藏工具栏模式下的高度

![在此处输入图像描述](../Images/4279185b643b53abc55f6c8fdc5e6b57.png)

c）这是全屏模式的高度

![在此处输入图像描述](../Images/4c52c637085eb8a07d70021ff922314e.png)

我希望隐藏工具栏 b) 在全屏模式下可用 c)。目前这是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:26:26.897

Xcode 不支持它，但 Ole Zorn 制作了一个[插件](https://github.com/omz/MiniXcode)，为 Xcode 添加了一些非常有用的方案选择内容。我使用隐藏全屏工具栏的菜单选项对其进行了扩展：[https](https://github.com/tkemp/MiniXcode) ://github.com/tkemp/MiniXcode 。它添加了一个新的视图菜单项“全屏显示/隐藏工具栏”。

这目前是对原始文件（[https://github.com/omz/MiniXcode](https://github.com/omz/MiniXcode)）的拉取请求，但如果你从上面的第一个链接中获取我的并构建它，你应该得到你想要的。如果您使用的是 Lion，请将项目中的基础 SDK 更改为 10.7，否则就可以使用了。

基础 SDK：![在此处输入图像描述](../Images/90e31cea098e1ac7e786eb1fc956aefa.png)

# javascript - 椭圆曲线密码学与 JS 中的 SJCL 和 Ruby 中的 OpenSSL

> ID：11135420
> 
> 赞同：7
> 
> 时间：2012-06-21T09:37:02.993
> 
> 标签：javascript, ruby, cryptography, openssl, sjcl

我正在开发一个 Web 应用程序，它必须能够在服务器端使用 ECC 加密数据并在浏览器中对其进行解密。我发现在 JS 中能够做到这一点的唯一库是 SJCL。但是，由于 SJCL 中的 ECC 支持目前似乎有点放弃，我使用了一个[fork](https://github.com/justindthomas/sjcl/tree/serialization)，它具有关键序列化支持和一个[演示](http://justinthomas.pro/crypto/test.html)，以便于理解。

首先，我在 JS 中生成一个 ECC 密钥对：

```
keypair = sjcl.ecc.elGamal.generateKeys(384, 10);
document.writeln(JSON.stringify(keypair.pub.serialize())); 
```

这会输出如下内容：

```
{"point":[1110230655,241884220,775655552,-849225963,-883815628,-1984298210,-736346431,1387519594,-1810604283,-1235638489,1333314084,-1219216530,614640565,-1148742381,1038670260,1013716131,758346573,1162278003,1232401864,-1948620456,533899535,-1478577959,1853846180,-1553049184],"curve":384} 
```

然后我尝试将此公钥转换为 OpenSSL 可以理解的格式。

```
ar = [1110230655,241884220,775655552,-849225963,-883815628,-1984298210,-736346431,1387519594,-1810604283,-1235638489,1333314084,-1219216530,614640565,-1148742381,1038670260,1013716131,758346573,1162278003,1232401864,-1948620456,533899535,-1478577959,1853846180,-1553049184]

# ugly bit magic to somehow convert the above array into a proper byte array (in form of a string)
kstr = [(ar.map { |i| (i>=0)?('0'*(8-i.to_s(16).length)+i.to_s(16)):("%08X" % (2**32-1+i+1)) }*'').upcase].pack("H*")

# opening a public key generated with the openssl cli tool showed a structure like this:
algokey = OpenSSL::ASN1::ObjectId 'id-ecPublicKey'
algovalue = OpenSSL::ASN1::ObjectId 'secp384r1'
algo = OpenSSL::ASN1::Sequence.new [algokey,algovalue]
# for some reason OpenSSL seems to prepend 0x04 to all public keys
key = OpenSSL::ASN1::BitString.new "\x04#{kstr}"
root = OpenSSL::ASN1::Sequence.new [algo,key]

pub = OpenSSL::PKey.read(root.to_der) 
```

到目前为止，我的代码运行良好。也就是说，它不会产生任何异常。

但是，当与两个库生成共享密钥时，我发现 SJCL 生成了一个 96 字节长的“标签”，而 OpenSSL 发出了 48 字节。

原来我的问题是 SJCL 不使用普通的 ECDH。它使用基于快速谷歌搜索的似乎是 ECMQV 的东西。因此，“标签”SJCL 输出是曲线上的一个点（一个点的 x 和 y 坐标，2*48 字节），而 OpenSSL 输出是一个共享秘密（一个点的 x 坐标，由 ECDH 规定）。

我的问题是我不知道 OpenSSL 中是否支持 ECMQV（如果我是正确的，有一些专利问题）。即使有，红宝石绑定似乎也不支持它。

所以我的实际问题：

*   上面记录的我的发现是否正确？
*   如果是的话，有没有人知道我可以使用其他任何支持 ECMQV 的 ruby​​ 库来代替 OpenSSL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:42:24.460

看起来您在 javascript 代码中使用了[ElGamal](https://en.wikipedia.org/wiki/ElGamal_encryption)。我真的找不到 ruby​​ 的任何实现，替代方案是使用[Crypto++](http://www.cryptopp.com/)或[libgcrypt](https://www.gnu.org/software/libgcrypt/)并编写一些胶水代码。

Ps：不用那`kstr =`行，你可以简单地写`kstr = ar.pack 'N*'`

# logging - Log4j 到红隼

> ID：11135425
> 
> 赞同：1
> 
> 时间：2012-06-21T09:37:22.693
> 
> 标签：logging, log4j, kestrel

我们正在运行一个 Java 项目，该项目使用 log4j 生成大量日志消息，这些消息当前存储在文件系统上的普通文件中。因为该项目在多台服务器上运行，我们希望单个实例将日志发送到进一步处理。因为我们已经在服务器上运行 JVM，所以我们正在考虑为此使用[kestrel 。](https://github.com/robey/kestrel)

作为 log4j 和 kestrel 的新手，我们想知道是否有一种方法可以配置 log4j 以便它直接写入安装在同一台服务器上的 kestrel？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T20:09:33.177

对于您的用例（将日志放在集中位置），我会使用 Kestrel 以外的其他东西。

[Kafka](http://incubator.apache.org/kafka/quickstart.html)是一个 Apache 孵化器项目，起源于 Linkedin。Kafka 有一个很棒的 Log4j appender，您只需在 log4j.properties 文件中指定 appender。

Flume 是另一个很棒的收集日志的软件。Kafka 就像一个消息队列，您可以从队列中读取日志行并对其进行处理，而 Flume 只会将您的日志转储到中央服务器或 S3 或 Hadoop 中。Flume 还有一个 log4j appender。

# drupal - 对于具有拖放功能的树视图，是否有类似 drupal 的 jquery 插件？

> ID：11135426
> 
> 赞同：0
> 
> 时间：2012-06-21T09:37:23.893
> 
> 标签：drupal, jquery-plugins

我正在尝试找到一个 jquery 插件，其功能与 drupal 的标准树视图具有无限嵌套，用于各种分类术语管理等。

是否有这种插件的类似物，也许你可以指出它的基本原理是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:01:35.507

查看[http://jqueryui.com/demos/sortable/](http://jqueryui.com/demos/sortable/)以获取可排序的列表项。如果您需要嵌套列表项，请查看此插件[http://mjsarfatti.com/sandbox/nestedSortable/](http://mjsarfatti.com/sandbox/nestedSortable/)

# css - 移动设备上的重点文本字段

> ID：11135431
> 
> 赞同：0
> 
> 时间：2012-06-21T09:37:35.937
> 
> 标签：css, mobile, input

我有一个文本字段，当用户在移动浏览器中选择它时，它会突出显示。 ![黑色边框的正方形是焦点所在的文本字段](../Images/6e854f83b80243523c8c4e08f74c0a1d.png)

我还没有找到任何方法来删除它（边框、轮廓、背景颜色）。浏览器/手机之间也有所不同。有些似乎有 box-shadow 等。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:39:21.863

现在习惯了这个css

```
input:focus, input:hover{
outline:0;
border:0
} 
```

# zend-framework - 管理区域中的视图页面或zend框架中的站点后端不支持转义方法？

> ID：11135434
> 
> 赞同：0
> 
> 时间：2012-06-21T09:37:43.597
> 
> 标签：zend-framework, escaping, admin

我是zend框架的新手。我在后端（网站的管理区域）工作并且想要使用转义但是我的视图页面不支持这个。当我在查看页面中使用转义方法时，查看页面不显示任何内容。为此，我可以在管理区域的视图页面中使用转义方法。这是我在控制器中的代码：-

```
$this->view->assign('username', 'Username');    
$this->view->assign('password', 'Password');
$this->view->assign('rememberMe', 'Remember Me'); 
```

我在这样的视图页面中使用这个分配变量： -

```
<td id="userlogin" align="left" width="30%"><?php echo escape($this->username);?>:</td> 
```

但是我在管理区域的查看页面不支持转义方法。请为此建议我一个技巧...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:51:11.630

我想你的意思是

```
<?php echo $this->escape($this->username);?> 
```

escape 是`Zend_View`类的函数（`$this`在模板的上下文中），而不是全局 PHP 函数。

# sql-server-2008 - 确定 SProc 返回的列数

> ID：11135437
> 
> 赞同：0
> 
> 时间：2012-06-21T09:37:51.897
> 
> 标签：sql-server-2008, c#-4.0

早上，我试图将来自 SQL Server2008 的任何 SProc 调用的结果存储在一个对象 [] 中，因为我听说构造数据表有点浪费，尤其是当某些 SProc 仅返回 3 个字段时。我发现的示例明确说明了有多少列：

[MSDN 示例](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getvalues.aspx)

但我需要一种方法来确定这一点，因为每个 SProc 都会返回不同的数字。

如果这是可能的，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:41:36.673

您应该使用[SqlDataReader.FieldCount 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.fieldcount)。在与[SqlDataReader.GetName 方法](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getname)配对时，如果需要，您可以获得返回的列名。

# python - 烧瓶 webapp 中 url 方案的可能改进

> ID：11135451
> 
> 赞同：2
> 
> 时间：2012-06-21T09:38:50.840
> 
> 标签：python, url, sqlalchemy, flask

我正在使用 python 中的 Flask 框架创建一个博客。

我有以下用于显示帖子的视图/网址：

```
 @post_blueprint.route('/post/<int:year>/<int:month>/<title>', methods=['GET'])
    def get_post(year, month, title):
    try:
        title = title.replace('-', ' ')
        post = Post.query.filter(Post.title == title).one()
        post.comment_form = UserCommentForm()
    except NoResultFound:
        raise
    return render_template('show_single_post.html', post=post) 
```

在上面的代码中，我还传递了一个评论表单，让用户发表评论。之后，我编写了用于接收此帖子请求的视图/网址：

```
 @post_blueprint.route('post/<int:post_id/comment/add/', mehtods=['POST'])
    def add_comment(post_id):
        post = Post.query.get(post_id)
        if not post:
            raise Exception
        if request.method == 'POST':
            form = UserCommentForm(request.form)
            if form.validate():
            try:
               user = User.query.\
                    filter(User.email == form.email.data).one()
            except NoResultFound:
               user = User(form.username.data, form.email.data,
                        form.website.data or None)

            try:
                comment = Comment(form.comment.data, post_id)
                comment.author = user
                db_session.add(comment)
                db_session.commit()
            except IntegrityError:
                 raise

            return redirect(url_for('.get_post', year=post.posted_on.year,
                                                 month=post.posted_on.month,
                                                 title=post.title.replace(' ','-')
                                    )
                            ) 
```

在上面的视图中，我正在从 db 访问 post 对象以确保 post 存在。如果用户不存在，我创建用户，然后保存评论。

现在我的问题不是访问完整的 Post 对象，我可以通过运行计数查询来简单地测试 post 的存在，但是由于我需要 post 属性，所以我必须获取完整的对象。

在我看来，也许我的 url 方案不是那么好，或者这里可以做一些更好的事情！

谁能告诉我这是否以及如何改进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:17:24.610

您的 url 架构没问题，应该适用于搜索引擎。[您可以在Flask-SQLAlchemy](http://packages.python.org/Flask-SQLAlchemy/api.html#flask.ext.sqlalchemy.BaseQuery.get_or_404)中使用这样的查询：

```
title, posted_on = Post.query.get_or_404(post_id).values(Post.title, Post.posted_on) 
```

我云没有测试它，但它应该可以工作并通过不存在的帖子引发 HTTP 404 错误。此外，应该只转移所有权和posted_on 数据而没有完整的过帐。

# .net - Visual Studio LightSwitch - 如何更改 DataGrid 列的文本颜色

> ID：11135453
> 
> 赞同：0
> 
> 时间：2012-06-21T09:39:01.613
> 
> 标签：.net, visual-studio-lightswitch

示例：在 DataGrid 中显示 2 列名称和薪水的 Visual Studio LightSwitch 屏幕

我想要的只是薪水栏的文字是字体粗体和红色

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T02:03:17.100

您必须在 LS V1 中执行此操作。在 V1 中实现你想要的非常困难。不过可以这样做，请参阅这篇文章：[http ://code.msdn.microsoft.com/Custom-Datagrid-coloring-d9b7c7bd](http://code.msdn.microsoft.com/Custom-Datagrid-coloring-d9b7c7bd)

V2 中有“格式化”改进（VS 2012 和 LS V2 目前处于 Release Candicate 阶段），这可能允许您在不诉诸代码的情况下做您想做的事情（因为这是一个频繁的请求）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:22:48.847

你需要关注这个线程。您不仅可以为文本着色，还可以为列和/行着色。 [http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/e901f2c7-a416-46ff-8144-c7b6ab3af31d](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/e901f2c7-a416-46ff-8144-c7b6ab3af31d)

奥的斯

# couchdb - 如何防止 couchdb 数据库压缩？这是个好主意吗？

> ID：11135454
> 
> 赞同：1
> 
> 时间：2012-06-21T09:39:02.163
> 
> 标签：couchdb

我需要在 Couchdb 中存储一些文档。该文件将有一个附件。

有时（很少）我需要用新版本替换附件，但我需要保留旧版本。

修订机制将是这项任务的理想选择，因为它会自动完成我需要的工作。

问题是，CouchDB 在压缩过程中删除了旧版本。

如何禁用一个数据库的 _compact 操作，所以即使是管理员也不能意外（我知道，管理员可以做任何事情，如果他愿意，他可以重新启用 _compact 操作并执行 _compact，但我认为他不会）。

甚至可能吗？这是一个好主意，还是我应该编写自己的修订系统，为什么？

此致

斯威尔克

编辑：似乎“修订版”不适合作为版本控制系统并且不应该以这种方式使用： [从设计角度应该如何对待 CouchDB 修订版？](https://stackoverflow.com/questions/8263043/how-should-couchdb-revisions-be-treated-from-a-design-perspective)

# php - 实现自定义用户布局/格式

> ID：11135457
> 
> 赞同：2
> 
> 时间：2012-06-21T09:39:07.577
> 
> 标签：php

假设，我希望用户能够自定义结果的布局/格式。例如，名片：用户可以按照自己的方式对其进行格式化：

```
Name: $name
Address: $address
Telephone: $telnum

// or

Ho! My name is $name and I live at $address. Call me! $telnum 
```

我怎样才能实现自定义用户布局/格式？就像在框架中一样，每个用户都可以拥有一个自定义视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:48:19.607

您可以使用模板很容易地完成此操作。在用户设置中有一个文本框，人们可以在其中选择他们想要的布局。然后，当您向用户显示结果时，获取文本框数据（保存在数据库中），然后 str_replace 需要替换的内容。

为了用户简单起见，我建议使用 {{name}} / {{address}} / {{telnum}}，这使得 str_replace-ing 非常容易。

编辑：

比方说，我希望我的卡看起来像这样：

```
NAME
ADDRESS
Don't forget to call me! TELNUM 
```

我会把它放在设置页面中

```
{{name}}
{{address}}
Don't forget to give me a call! {{telnum}} 
```

然后，当我在设置页面中点击保存时，您的代码将保存它，并且当您检索详细信息/显示我的卡时，您将：

```
$usercard = $usersettings['layout'];
$usercard = str_replace('{{name}}', $userdata['name'], $usercard);
.... 
```

希望有所帮助！

# python - 编译的函数代码对象——传递参数

> ID：11135461
> 
> 赞同：3
> 
> 时间：2012-06-21T09:39:21.973
> 
> 标签：python

> **可能重复：**
> [如何将参数传递给函数的 __code__？](https://stackoverflow.com/questions/5874558/how-to-pass-arguments-to-the-code-of-a-function)

我有一个代表函数的代码对象。当我调用`exec`代码对象时，如何为输入参数指定一个值`p`？

```
def x(p):
    print p

code_obj = x.__code__

exec code_obj
#TypeError: x() takes exactly 1 argument (0 given) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:24:27.403

恢复重复的答案和评论：

```
import types
types.FunctionType(code_obj, globals={}, name='x')(1) 
```

要使用方法，您可以使用函数类型或未绑定的方法，然后将实例作为第一个参数传递，或者将函数绑定到实例：

```
class A(object):
    def __init__(self, name):
        self.name = name
    def f(self, param):
        print self.name, param

# just pass an instance as first parameter to a function or to an unbound method
func = types.FunctionType(A.f.__code__, globals={}, name='f')
func(A('a'), 2)
unbound_method = types.MethodType(func, None, A)
unbound_method(A('b'), 3)
# or bound the function to an instance
bound_method = types.MethodType(func, A('c'), A)
bound_method(4) 
```

# c# - 如何从 32 位进程中区分 64 位进程的启动可执行文件？

> ID：11135462
> 
> 赞同：0
> 
> 时间：2012-06-21T09:39:22.130
> 
> 标签：c#, process, 32bit-64bit

通常这[不是问题](https://stackoverflow.com/questions/5497064/c-how-to-get-the-full-path-of-running-process)，如果您在 64 位机器上运行 64 位应用程序，那就没问题了。

但是，`process.MainModule.FileName`当 32 位进程在 64 位进程上执行时，会导致以下异常：

```
A 32 bit processes cannot access modules of a 64 bit process. 
```

有没有其他好方法可以找到正在运行的进程的完整路径，它可以在 64 位进程上的 32 位进程中工作？

# c++ - 一组具有不同 == 和 < 运算符语义的结构

> ID：11135463
> 
> 赞同：3
> 
> 时间：2012-06-21T09:39:34.503
> 
> 标签：c++, stl, set

我正在使用一个非常简单的结构，映射，定义如下：

```
struct mapping{
    int code;
    string label;

    bool operator<(const mapping& map) const {
        return code < map.code;
    }

    bool operator==(const mapping& map) const {
        return label.compare(map.label) == 0 ;
    }
}; 
```

我想创建一组按他们的代码排序的映射。为此，我重载了 < 运算符。它工作正常。我可以毫无问题地插入一些具有不同标签的映射。

当我尝试插入具有相同代码但不同标签的映射时，问题就来了。实际上，在该过程的第二步中，我不知道之前是否插入了具有相同标签的映射。所以，我需要调用 find() 函数来确定是否是这种情况。如果没有插入相同标签的映射，没关系，我只需要插入这个新的（但它的代码将暂时与其他映射相同）。如果存在一个具有相同标签的映射，我只需要更新它的代码。我虽然像我所做的那样重载 == 运算符就足够了，但事实并非如此，如下面的代码所示。

```
mapping m = {1,"xxx"};
mapping m2 ={1, "yyy"};

this->fn[0].insert(m);

set<mapping>::iterator itTmp;
itTmp = this->fn[0].find(m2);
if (itTmp != this->fn[0].end() ) {
    cout << "m2 exists "<<endl;

    if ( !(*itTmp == m2) ){
        cout << "But it is different according to the definition of the == operator "<<endl;
    }
} 
```

相关的输出是：

```
m2 exists
But it is different according to the definition of the == operator 
```

我该如何解决这个问题并设法处理具有非常不同语义的运算符 < 和 ==？理想情况下，我想避免在整个集合上进行迭代以寻找具有相同标签的映射。这种策略的复杂性是 O(n) 并且 n 在我的应用程序中可能非常大。与 find() 的复杂性类似，我更喜欢 O(log n) 中的解决方案。

谢谢，

约安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:10:21.003

正如@PiotrNycz 指出的那样，`std::set`根本不使用或关心`operator==`，只有`operator<`. 这包括`std::set<X>::find`会员。因此，您的`find`调用是定位具有相同代码的元素，而不是具有相同标签的元素。

但是命名空间范围函数`std::find`确实使用`operator==`，而不是`operator<`。

```
itTmp = std::find(this->fn[0].begin(), this->fn[0].end(), m2); 
```

由于您`set`是按代码而非标签排序的，因此当元素数量很大时，查找具有给定标签的元素的效率不如查找具有给定代码的元素。如果这很重要，其他答案就如何更改容器类型以提供帮助提供了建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:58:56.003

如果一个类可以按其多个字段合理排序，则它根本不应该有关系运算符（`operator==`和除外`operator!=`）。

是的`std::map`，`std::set`默认情况下`std::less`用作比较器（在`operator<`内部使用），但这只是方便，所以您不需要编写函数对象只是为了创建 a `set<double>`，其中`double`有一个规范的排序顺序（因此定义了 a (built-in ）`operator<`）。

它们还提供了一个比较器模板参数，您可以并且应该使用它来准确提供该容器（如关系数据库）所需的索引。还有一些容器（在 boost 中）为一组元素维护多个索引。

例如，考虑一个`point2d`类：

```
struct point2d { int x, y; }; 
```

`point2d`可以合理地希望通过`x`or来索引 s 的容器`y`，因此按照上述内容，`point2d`根本不应该定义 an `operator<`。为了避免类的每个用户都发明自己的排序函数对象，可以将它们与以下内容一起提供`point2d`：

```
struct less_point2d_by_x {
    typedef bool result_value;
    // the mixed overloads are for use in std::lower_bound and similar
    bool operator()( int lhs, int rhs ) const { return lhs < rhs; }
    bool operator()( int lhs, point2d rhs ) const { return lhs < rhs.x; }
    bool operator()( point2d lhs, int rhs ) const { return lhs.x < rhs; }
    bool operator()( point2d lhs, point2d rhs ) const { return lhs.x < rhs.x; }
};
// same for _y 
```

用法：

```
std::vector<point2d> v = ...;
std::sort(v.begin(), v.end(), less_point2d_by_x()); // sort by x
std::sort(v.begin(), v.end(), less_point2d_by_y()); // sort by y

std::set<point2d, less_point2d_by_x> orderedByX;
std::set<point2d, less_point2d_by_y> orderedByY; 
```

如果你不害怕模板，你甚至可以将关系运算符模板化，如下所示：

```
template <template <typename T> class Op=std::less>
struct point2d_by_x {
    typedef bool result_value;
    // the mixed overloads are for use in std::lower_bound and similar
    bool operator()( int lhs, int rhs )         const { return Op<int>()(lhs, rhs); }
    bool operator()( int lhs, point2d rhs )     const { return Op<int>()(lhs, rhs.x); }
    bool operator()( point2d lhs, int rhs )     const { return Op<int>()(lhs.x, rhs); }
    bool operator()( point2d lhs, point2d rhs ) const { return Op<int>()(lhs.x, rhs.x); }
};
// same for _y 
```

用法：

```
std::vector<point2d> v = ...;
std::sort(v.begin(), v.end(), point2d_by_x<std::less>()); // sort ascending by x
std::sort(v.begin(), v.end(), point2d_by_x<>()); // same
std::sort(v.begin(), v.end(), point2d_by_x<std::greater>()); // sort descending by x
// find the position where a `point2d` with `x = 14` would go in the ordering:
std::lower_bound(v.begin(), v.end(), 14, point2d_by_x<std::greater>());

std::set<point2d, point2d_by_x<std::less> > increasingXOrder;
std::set<point2d, point2d_by_y<std::less> > increasingYOrder; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:57:01.507

`std::set`使用`operator<`，因此您需要将您的语义插入`operator==`到`operator<`. 您可以通过例如首先检查 来做到这一点`code`，如果相等，则比较`label`。

* * *

**更新**标准库中的有序容器必须使用隐含严格弱顺序的比较器。这意味着`operator<`需要推导出一个严格的顺序（不同的元素有不同的顺序），但是很弱，因为它对不等式一无所知。

在您的情况下，正如评论中指出的那样，您需要比较`string` `label`. 两种选择：

```
return code < map.code || (!(map.code < code) && label < map.label); 
```

或相反，首先检查`label`然后`code`.

仅检查是否相等`label`会破坏“严格”的排序感。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T09:59:13.517

如果您希望 O(log n) 查找代码或映射，则`std::set`不是正确的容器，因为它仅按一个顺序排序。您需要的是一个双映射，其值为指向另一个映射中条目的指针。这样，每个成员都是其映射中的一个键，并且可以在 O(log n) 中找到。

如果可以使用 boost，请检查[boost.bimap](http://www.boost.org/doc/libs/1_49_0/libs/bimap/doc/html/index.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T10:51:47.260

可能您应该创建几个容器（两个或三个）。例如：

```
std::list<mapping> storage; // actual storage
std::multiset<mapping*, compare_by_code_functor> by_code; // sorted by code
std::set<mapping*, compare_by_label_functor> by_label; // sorted by label 
```

或者

```
std::list<mapping> storage; // actual storage
std::multiset<std::list<mapping>::iterator, compare_by_code_functor> by_code; // sorted by code
std::set<std::list<mapping>::iterator, compare_by_label_functor> by_label; // sorted by label 
```

# mysql - 查找字符串中的数字位置

> ID：11135464
> 
> 赞同：5
> 
> 时间：2012-06-21T09:39:39.200
> 
> 标签：mysql, position

以下是我在表中的内容`myTable`

```
+++++++++++++++
+ id + myWord +
+++++++++++++++
+  1 + AB123  +
+  2 + A413D  +
+  3 + X5231  +
+  4 + ABE921 +
+++++++++++++++ 
```

当我执行

```
SELECT id, Locate('1',myWord) as myPos
FROM myTable; 
```

我得到1的位置。

```
+++++++++++++++
+ id + myPos  +
+++++++++++++++
+  1 + 3      +
+  2 + 3      +
+  3 + 5      +
+  4 + 6      +
+++++++++++++++ 
```

我想要实现的是找到整数的第一个位置，这样我就会得到下面的输出。

```
+++++++++++++++++++++++
+ id + myWord + myPos +
+++++++++++++++++++++++
+  1 + AB123  +  3    +
+  2 + A413D  +  2    +
+  3 + X5231  +  2    +
+  4 + ABE921 +  4    +
+++++++++++++++++++++++ 
```

任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T11:48:26.773

在 xdazz 答案的帮助下，我做了一些更改并最终得到了答案......

```
SELECT 
  myWord, 
  LEAST (
    if (Locate('0',myWord) >0,Locate('0',myWord),999),
    if (Locate('1',myWord) >0,Locate('1',myWord),999),
    if (Locate('2',myWord) >0,Locate('2',myWord),999),
    if (Locate('3',myWord) >0,Locate('3',myWord),999),
    if (Locate('4',myWord) >0,Locate('4',myWord),999),
    if (Locate('5',myWord) >0,Locate('5',myWord),999),
    if (Locate('6',myWord) >0,Locate('6',myWord),999),
    if (Locate('7',myWord) >0,Locate('7',myWord),999),
    if (Locate('8',myWord) >0,Locate('8',myWord),999),
    if (Locate('9',myWord) >0,Locate('9',myWord),999)
  ) as myPos
FROM myTable; 
```

## [演示](http://sqlfiddle.com/#!2/d7bd4/15)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T11:39:51.573

如果您经常使用 MySQL 执行此操作，则最好使用[字符串函数](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html)SUBSTRING() 和 ASCII()创建一个[存储函数。](http://dev.mysql.com/doc/refman/5.5/en/stored-routines-syntax.html)

```
DELIMITER //;
CREATE FUNCTION find_first_int(pData CHAR(10))
  RETURNS INT
BEGIN
  DECLARE vPos INT DEFAULT 1;
  DECLARE vRes INT DEFAULT 0;
  DECLARE vChar INT;
  WHILE vPos <= LENGTH(pData) DO
    SET vChar = ASCII(SUBSTR(pData, vPos, 1));
    IF vChar BETWEEN 48 AND 57 THEN
      RETURN vPos;
    END IF;
    SET vPos = vPos + 1;
  END WHILE;
  RETURN NULL;
END//
DELIMITER ;// 
```

结果：

```
mysql> SELECT id, myWord, find_first_int(myWord) AS myPos FROM t1;
+------+--------+-------+
| id   | myWord | myPos |
+------+--------+-------+
|    1 | AB123  |     3 |
|    2 | A413D  |     2 |
|    3 | X5231  |     2 |
|    4 | ABE921 |     4 |
|    5 | ABC    |  NULL |
+------+--------+-------+ 
```

可以使用函数[IFNULL()](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_ifnull)更改 NULL 结果。

请注意，该函数仅接受 CHAR(10)，因此您可能希望将其更改为更长的数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T09:48:47.453

不聪明，但我认为你可以这样做：

```
SELECT 
  id, 
  LEAST(
    Locate('0',myWord),
    Locate('1',myWord),
    Locate('2',myWord),
    Locate('3',myWord),
    Locate('4',myWord),
    Locate('5',myWord),
    Locate('6',myWord),
    Locate('7',myWord),
    Locate('8',myWord),
    Locate('9',myWord)
  ) as myPos
FROM myTable; 
```

# c - 压缩递增数据的最佳方法

> ID：11135465
> 
> 赞同：1
> 
> 时间：2012-06-21T09:39:42.537
> 
> 标签：c, compression, x86-64

我有一个向量，我在其中保存一个递增的数据。通常，向量的每个元素都是一个 64 位长的变量。但是，两个连续元素之间的差异很可能非常小，因此例如我们可以有一个如下的序列。

```
1, 34, 37, 42, 45, 1098, 1200, 1211, 1938 
```

压缩此数据的最佳方法是什么。只保留差异是否理想，并有一个标题字节来定义差异有多大，无论它只是一个字节、字、双字等，还是有更好的方法来压缩这种增量数据？

## 编辑

我需要在线压缩，即同时将数据放入向量中。您可以假设一个动态扩展的向量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:47:46.747

当增量通常很小时，这是一个非常简单的策略：

1.  如果增量<2**7，则将其作为最高位设置为零的单个字节发出：

    ```
    0xxxxxxx 
    ```

2.  否则，如果增量 <2**14，则将其作为两个字节发出，最高位分别为 1 和 0：

    ```
    1xxxxxxx 0xxxxxxx 
    ```

3.  以明显的方式将其扩展到更大的增量。第八位设置为 1 表示“等待，还有更多”。零表示“整数结束”。

我记得在某些 RFC 或 RFC 中看到为 bigints 建议了这种编码方案`internet-draft`，但我现在似乎无法检索它。或者，您可以重用 UTF-8 编码方案来改进错误检测，但代价是编码效率较低（如果您想超越 64 位整数，您可能必须对其进行扩展）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:47:26.830

听起来你需要一些东西（正如你自己已经说过的那样），比如差分调制。也许这会给你一些灵感：[http ://en.wikipedia.org/wiki/Differential_pulse-code_modulation](http://en.wikipedia.org/wiki/Differential_pulse-code_modulation)

# javascript - 如何获得同位素以避免可变尺寸瓷砖的间隙

> ID：11135470
> 
> 赞同：6
> 
> 时间：2012-06-21T09:40:16.780
> 
> 标签：javascript, jquery, jquery-isotope

有没有办法让同位素以没有间隙的方式排列网格？

我在几个演示中看到元素改变了位置，但我自己无法实现效果。喜欢这里：http: [//isotope.metafizzy.co/demos/layout-modes.html](http://isotope.metafizzy.co/demos/layout-modes.html)

这是我的小提琴：http: [//jsfiddle.net/crappish/zvRy5/](http://jsfiddle.net/crappish/zvRy5/)

如您所见，当您调整“结果”的大小时，网格会发生变化，但在某些宽度下，马赛克中会出现白色间隙。这是非常不幸的。:(

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T13:57:21.873

我最终编写了自己的扩展（完美砌体），它不会留下空隙，而是布置了完美的“砖墙”。:) 一旦我有空闲时间清理它，我会尝试发布它（GitHub，也许）。

编辑：这是完美的砌体扩展：[https ://github.com/zonear/isotope-perfectmasonry](https://github.com/zonear/isotope-perfectmasonry)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:04:44.320

如果你看[这个小提琴](http://jsfiddle.net/MTxXZ/1/)并且![那个截图](../Images/822faca14b52f57ca5247449d66e7600.png)- 在观察你的 div 中的数字时 - 你会看到下一个砌体元素（红色元素 5）不可能适合白色方块，因为它必须在元素 4 之后；所以它必须结束的地方意味着，只有三行合适，你会得到一个白色的间隙。也许您可以使用 Isotope 的*shuffle*和*reLayout*方法并牺牲以严格的顺序排列您的元素？

# asp.net - 如何在其他控制器中使用授权用户名

> ID：11135473
> 
> 赞同：2
> 
> 时间：2012-06-21T09:40:33.910
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api

使用基本身份验证和 asp.net Web-Api，其中 JSON 获取/发布到我的 API，我需要检查用户名/密码是否存在于成员资格表中。下面的代码是做什么的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Web;
using System.Web.Security;

namespace MvcApplication4.Filter
{
    public class BasicAuthenticationAttribute : System.Web.Http.Filters.ActionFilterAttribute
    {
        public override void OnActionExecuting(System.Web.Http.Controllers.HttpActionContext actionContext)
        {
            if (actionContext.Request.Headers.Authorization == null)
            {
                actionContext.Response = new System.Net.Http.HttpResponseMessage(System.Net.HttpStatusCode.Unauthorized);
            }
            else
            {
                string authToken = actionContext.Request.Headers.Authorization.Parameter;
                string decodedToken = Encoding.UTF8.GetString(Convert.FromBase64String(authToken));
                string username = decodedToken.Substring(0, decodedToken.IndexOf(":"));
                string password = decodedToken.Substring(decodedToken.IndexOf(":") + 1);

                if (Membership.Provider.ValidateUser(username, password))
                {
                    // User exists in the membership table
                }
                else
                {
                    // User doesn't exist - so return Unathorized
                    actionContext.Response = new System.Net.Http.HttpResponseMessage(System.Net.HttpStatusCode.Unauthorized);
                }
            }
        }
    }
} 
```

我需要参考其他控制器中的用户名，以确保用户名也存在于查找表中，该表说明允许用户查询哪些汽车。我的数据库中有一个表和一个关联的类：

```
public class ApiMembers
    {
        public int id { get; set; }
        public string UserName { get; set; }
        public int car_id { get; set; }
    }

 [BasicAuthentication]
        public IEnumerable<Cars> GetCars(long id)
        {
            var auth = dba.ApiMembers.Select(a => a.car_id == id && a.UserName=***AuthorisedUserName***).FirstOrDefault();
            if (auth == null || !auth.Any())
                 {
                        throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.Unauthorized));
                 }
            else
            {
                // User exists in table, so give them info on car
            } 
```

我的问题是，无需再次阅读 HTTP 标头，如何将 UserName 放入***AuthorisedUserName***部分？有没有办法在 BasicAuthentication 过滤器中“登录”用户，或者你可以使用会话变量，比如在 webforms 中？或者有没有更好的方法来知道谁已经在其他控制器中进行了身份验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:20:14.563

您可以设置当前主体：

```
if (Membership.Provider.ValidateUser(username, password))
{
    // User exists in the membership table
    var identity = new GenericIdentity(username);
    Thread.CurrentPrincipal = new GenericPrincipal(identity, null);
} 
```

现在在您的 ApiController 中，您可以使用[User](http://msdn.microsoft.com/en-us/library/system.web.http.apicontroller.user%28v=vs.108%29.aspx)属性来访问当前连接的用户名（请注意，此属性是在 ASP.NET MVC 4 RC 中添加的 - 在以前的版本中，您可以使用`Request.GetPrincipal`扩展方法）。

```
[BasicAuthentication]
public HttpResponseMessage Get()
{
    string username = User.Identity.Name;

    ...
} 
```

# windows - WinRT XAML 中 GridView 项目组内的垂直滚动

> ID：11135480
> 
> 赞同：7
> 
> 时间：2012-06-21T09:41:01.143
> 
> 标签：windows, xaml, gridview, windows-runtime, vertical-scrolling

我正在使用 GridView 在 WinRT XAML 应用程序中显示不同组的项目组。一切正常，除了 ItemsPanelTemplate 使用包装网格，当空间不足时，它会垂直堆叠我的项目。

所以，我尝试使用 StackPanel，如下所示：

```
<GroupStyle.Panel>
    <ItemsPanelTemplate>
        <StackPanel Orientation="Vertical" Visibility="Visible" />
    </ItemsPanelTemplate>
</GroupStyle.Panel> 
```

这些项目是垂直堆叠的，这很好，但现在的问题是我无法滚动它们，而且它们不适合屏幕。所以我尝试启用垂直滚动：

```
<GroupStyle.Panel>
    <ItemsPanelTemplate>
        <StackPanel Orientation="Vertical" Visibility="Visible" 
                    ScrollViewer.VerticalScrollBarVisibility="Visible"
                    ScrollViewer.VerticalScrollMode="Enabled"/>
    </ItemsPanelTemplate>
</GroupStyle.Panel> 
```

但这不起作用。有什么建议如何在 GridView 组内完成垂直滚动？

**编辑1：**

我也试过这个：

```
<GroupStyle.Panel>
    <ItemsPanelTemplate>
        <ScrollViewer VerticalScrollBarVisibility="Visible"
                      HorizontalScrollMode="Disabled" 
                      ZoomMode="Disabled" 
                      VerticalScrollMode="Enabled">
              <StackPanel Orientation="Vertical" Visibility="Visible" />
         </ScrollViewer>
     </ItemsPanelTemplate>
 </GroupStyle.Panel> 
```

这会破坏调试器，因为 ItemsPanelTemplate 需要一个面板作为子项。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T08:26:35.113

好的，我终于解决了！敬启者：

```
<GroupStyle.ContainerStyle>
    <Style TargetType="GroupItem">
        <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="GroupItem">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <ContentPresenter Content="{TemplateBinding Content}" Grid.Row="0"/>
                    <ItemsControl x:Name="ItemsControl2" ItemsSource="{Binding GroupItems}" Grid.Row="1">
                        <ItemsControl.Template>
                        <ControlTemplate>
                            <ScrollViewer x:Name="ScrollViewer" VerticalScrollBarVisibility="Hidden"                                                  VerticalScrollMode="Enabled" HorizontalScrollBarVisibility="Disabled"                                                  HorizontalScrollMode="Disabled">
                            <ItemsPresenter />
                            </ScrollViewer>
                        </ControlTemplate>
                        </ItemsControl.Template>
                    </ItemsControl>
                </Grid>
           </ControlTemplate>
       </Setter.Value>
       </Setter>
   </Style>
</GroupStyle.ContainerStyle> 
```

使用 Grid 确保 ScrollViewer 正确缩放非常重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T15:15:14.590

What about this?

It renders elements like this:
Item 1 Item 2
Item 3 Item 4

```
<ListView Width="200">
    <ListBoxItem>
        <TextBlock>Item 1</TextBlock>
    </ListBoxItem>
    <ListBoxItem>
        <TextBlock>Item 2</TextBlock>
    </ListBoxItem>
    <ListBoxItem>
        <TextBlock>Item 3</TextBlock>
    </ListBoxItem>
    <ListBoxItem>
        <TextBlock>Item 4</TextBlock>
    </ListBoxItem>
    <ListView.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapGrid Orientation="Horizontal"/>
        </ItemsPanelTemplate>
    </ListView.ItemsPanel>
</ListView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:15:12.010

我会将您的元素直接放在滚动查看器中。像这样：

```
<GroupStyle.Panel>
 <ItemsPanelTemplate>
      <ScrollViewer VerticalScrollBarVisibility="Visible" HorizontalScrollMode="Disabled" ZoomMode="Disabled" VerticalScrollMode="Enabled">
            <StackPanel Orientation="Vertical" Visibility="Visible" />
      </ScrollViewer>
 </ItemsPanelTemplate> 
```

我希望这会有所帮助，兰斯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T14:14:35.860

您可能还想将 ScrollViewer 的 ZoomMode 设置为 Disabled :)

问候

# php - 大字符串中某个字符串的 preg_replace

> ID：11135485
> 
> 赞同：1
> 
> 时间：2012-06-21T09:41:18.183
> 
> 标签：php, preg-replace

我有一个大字符串，其中包含`mysite/tim/here-is-something.html`其他 url 模式，例如`mysite/a/some-thing.html`. 现在我想将第一个模式全部更改`-`为`+`并保持所有其他模式不变。

有谁知道如何处理这个问题？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:10:11.600

```
$pattern = '!((mysite/tim/)[-\w\.]*)+(?=((mysite/a/)+)|(\s+|\n))!';
$html = 'mysite/tim/here-is-something.html   mysite/tim/here-is-something.html  mysite/a/here-is-something.html mysite/tim/here-is-som-ething.html  mysite/a/here-is-something.html mysite/tim/he-re-is-so-m-eth-ing.html  mysite/a/here-is-something.html  mysite/a/here-is-something.html mysite/tim/here-is-something.html  mysite/tim/here-is-something.html 
mysite/tim/here-is-something.html ';
preg_match_all($pattern,$html, $match);
//print_r($match);
foreach ($match[0] as $value) {
    $modified_value=str_replace("-","+", $value);
    $html=str_replace($value,$modified_value,$html);
}
print_r ($html); 
```

输出：

```
mysite/tim/here+is+something.html mysite/tim/here+is+something.html mysite/a/here-is-something.html mysite/tim/here+is+som+ething.html mysite/a/here-is-something.html mysite/tim/he+re+is+so+m+eth+ing.html mysite/a/here-is-something.html mysite/a/here-is-something.html mysite/tim/here+is+something.html mysite/tim/here+is+something.html mysite/tim/here+is+something.html 
```

找到的匹配项：

```
match[0] => Array
        (
            [0] => mysite/tim/here-is-something.html
            [1] => mysite/tim/here-is-something.html
            [2] => mysite/tim/here-is-som-ething.html
            [3] => mysite/tim/he-re-is-so-m-eth-ing.html
            [4] => mysite/tim/here-is-something.html
            [5] => mysite/tim/here-is-something.html
            [6] => mysite/tim/here-is-something.html
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T23:58:04.820

听起来您已经解决了它，但问题被巧妙地分为 preg_match 和 str_replace。preg_match 可能比您描述的将元素加载到数组中更灵活，但它也需要了解正则表达式才能理解它的工作原理。

preg_replace 不能用于一步实现此结果，因为它无法处理灵活长度的正向后视。它可以替换一次出现 - 但不能替换多次出现（除非它被放入 while 循环，这将是另一种选择）。

```
<?
$strings = array("mysite/tim/here-is-something.html",
                 "mysite/a/some-thing.html");

foreach ($strings as $string) {
  if (preg_match("#^(mysite/tim/)(.*)#",$string,$matches)) {
    print "Changed string: $string\nto: ";
    print $matches[1].str_replace("-","+",$matches[2])."\n";
  } else {
    print "Didn't change string: $string\n";
  }
} 
```

输出：

```
Changed string: mysite/tim/here-is-something.html
to: mysite/tim/here+is+something.html
Didn't change string: mysite/a/some-thing.html 
```

# javascript - URL指向PDF文件时如何在弹出窗口中设置标题？

> ID：11135487
> 
> 赞同：0
> 
> 时间：2012-06-21T09:41:27.373
> 
> 标签：javascript, popup

在 javascript 中，我创建了一个指向 PDF 的 URL 并打开一个新窗口。窗口标题包含我想对用户隐藏的 URL。

我尝试了以下建议[Set title in the window popup](https://stackoverflow.com/questions/7501424/set-title-in-the-window-popup)但这似乎不适用于 PDF。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:44:11.020

您无法以这种方式隐藏 URL，但您可以创建一个包含自定义内容的弹出窗口并将 PDF 文件嵌入其中，而不是直接链接到 PDF 文件。

喜欢：

```
<html>
<head>
<title>This is your title</title>
</head>
<body>
<iframe src="your_pdf_file_link"></iframe>
</body>
</html> 
```

但是如果客户没有 PDF 插件，他们总是会收到一个“另存为”对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:43:58.683

改用[window.open](http://www.w3schools.com/jsref/met_win_open.asp) onclick 的超链接。在 window.open 中传递您的 pdf 的 url。这样你就可以通过设置它的标题、大小等来控制窗口

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:44:32.153

也许新窗口可以是 HTML 页面，您可以在 iframe 中显示 PDF？将您需要的所有信息传递到查询字符串中的新窗口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T10:04:02.083

感谢 iframe 提示。这对我有用：

```
<script type="text/javascript">
var birtwin = null;
var birturl = null;
function birt(report, params) {
    var url = "http://myserver/webapps/birt/run?__report=Report/" + report + "&__lc=<%= user.getLocale() %>&__format=pdf&__runtime=<%= LoginServlet.isTest() ? "test" : "prod"%>&";
    var chk = document.getElementById('chkPageBreak');
    if(chk && chk.checked) url += "PageBreak=true&";
    if(params) {
        params = params.replace('%MMSFAIRID%', '<%= user.getFair().getFairId() %>');
        params = params.replace('%LANGUAGE%', '<%= user.getLocale().getLanguage() %>');
    }
    url += params;
    birturl = url;
    birtwin = window.open('','MMSBIRT', 'menubar=0,location=0,toolbar=0,resizable=1,status=1,scrollbars=1');
    checkbirt(); // start checking
}

function checkbirt() {     
    if(birtwin.document) { 
        birtwin.document.write('<html><head><title>Bericht / Report</title></head><body height="100%" width="100%"><iframe src="' + birturl + '" height="100%" width="100%"></iframe></body></html>');
    } else { 
        // if not loaded yet
        setTimeout(checkbirt, 10); // check in another 10ms
    }
} 
```

# asp.net - 如何在 VB.net 中使用字典？

> ID：11135488
> 
> 赞同：6
> 
> 时间：2012-06-21T09:41:30.637
> 
> 标签：asp.net, vb.net, arrays, dictionary

我已经编写了这个函数来将性别从字符串数组中的不同值自动更正为 M 或 F。它工作正常，但我的经理告诉我使用他说效率更高的 Dictionary。但我不知道。有人愿意帮助我了解如何做到这一点吗？谢谢。

```
 Public Function AutoGender(ByVal dt As DataTable) As DataTable        

    Dim Gender As String = ""
    Dim Mkeywords() As String = {"boy", "boys", "male", "man", "m", "men", "guy"}
    Dim Fkeywords() As String = {"girl", "girls", "female", "woman", "f", "women", "chick"}
    Dim row As DataRow
        For Each row In dt.Rows
            If Mkeywords.Contains(row("Gender").ToString.ToLower) Then
                Gender = "M"
                row("Gender") = Gender
            ElseIf Fkeywords.Contains(row("Gender").ToString.ToLower) Then
                Gender = "F"
                row("Gender") = Gender
            End If
        Next
    Return dt

    End Function 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T10:05:25.403

这是一个示例，您可以如何实现`Dictionary(Of String, String)`该同义词是否已知的查找：

```
Shared GenderSynonyms As Dictionary(Of String, String) = New Dictionary(Of String, String) From
    {{"boy", "M"}, {"boys", "M"}, {"male", "M"}, {"man", "M"}, {"m", "M"}, {"men", "M"}, {"guy", "M"},
     {"girl", "F"}, {"girls", "F"}, {"female", "F"}, {"woman", "F"}, {"f", "F"}, {"women", "F"}, {"chick", "F"}}

Public Function AutoGender(ByVal dt As DataTable) As DataTable
    If dt.Columns.Contains("Gender") Then
        For Each row As DataRow In dt.Rows
            Dim oldGender = row.Field(Of String)("Gender").ToLower
            Dim newGender As String = String.Empty
            If GenderSynonyms.TryGetValue(oldGender, newGender) Then
                row.SetField("Gender", newGender)
            End If
        Next
    End If
    Return dt
End Function 
```

请注意，我使用[集合初始化器](http://msdn.microsoft.com/en-us/library/dd293617.aspx)来填充[字典](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)，这是使用文字来初始化集合的便捷方式。你也可以使用[`Add`方法](http://msdn.microsoft.com/en-us/library/k7z0zy8k)。

**编辑**：另一种可能更简洁的方法是使用两个[`HashSet(Of String)`](http://msdn.microsoft.com/en-us/library/bb359438.aspx)，一个用于男性同义词，一个用于女性：

```
Shared maleSynonyms As New HashSet(Of String) From
    {"boy", "boys", "male", "man", "m", "men", "guy"}
Shared femaleSynonyms As New HashSet(Of String) From
    {"girl", "girls", "female", "woman", "f", "women", "chick"}

Public Function AutoGender(ByVal dt As DataTable) As DataTable
    If dt.Columns.Contains("Gender") Then
        For Each row As DataRow In dt.Rows
            Dim oldGender = row.Field(Of String)("Gender").ToLower
            Dim newGender As String = String.Empty
            If maleSynonyms.Contains(oldGender) Then
                row.SetField("Gender", "M")
            ElseIf femaleSynonyms.Contains(oldGender) Then
                row.SetField("Gender", "F")
            End If
        Next
    End If
    Return dt
End Function 
```

A`HashSet`也必须是唯一的，因此它不能包含重复项`Strings`（如 中的键`Dictionary`），但它不是键值对，而只是一个集合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T10:02:30.367

只需将两个数组都更改为字典，然后执行 a`ContainsKey`而不是`Contains`.

```
Dim Mkeywords = New Dictionary(Of String, String) From
    {{"boy", ""}, {"boys", ""}, {"male", ""}, {"man", ""}, {"m", ""}, {"men", ""}, {"guy", ""}} 
```

（并为女性效仿）

但是，您可能已经注意到，我输入了所有这些空字符串。这是因为字典有值和键，但由于我们没有使用值，所以我将它们设为空字符串。要进行相同的`O(1)`查找但避免所有无关的值，您可以[`HashSet`](http://msdn.microsoft.com/en-us/library/bb359438.aspx)以类似的方式使用 a。

就像我说的那样，您现在所要做的就是使用`ContainsKey`（或者`HashSet`如果您走那条路，它仍然只是`Contains`）：

```
If Mkeywords.ContainsKey(row("Gender").ToString.ToLower) Then 
```

最后一点：如果数据开始大幅增长，这只会“更有效”。现在你有它，只有这几个元素，使用字典甚至可能更慢。

# winforms - 如何忽略 WinForms 中的用户点击？

> ID：11135491
> 
> 赞同：0
> 
> 时间：2012-06-21T09:41:40.567
> 
> 标签：winforms, multithreading, background-process, messages

当用户单击一个按钮时，它会启动一些任务。我不想阻塞主应用程序线程，所以我在一个单独的线程中运行它。现在我需要禁止用户单击按钮，直到我的任务完成。

我可以设置

```
button.Enabled = false; 
```

，但我正在寻找一些方法来忽略点击它。

我可以在点击事件处理程序中添加一些检查：

```
if (executingThread != null) return; 
```

，但我必须为每个处理程序都这样做，这是个坏主意。

我知道有一些方法可以过滤用户的消息。你能指点我怎么做吗？而且我不想过滤掉所有消息，因为其他一些按钮必须保持可点击状态，我需要过滤掉特定控件（按钮、网格等）的消息。

**解决方案**

```
internal class MessagesFilter: IMessageFilter
{
    private readonly IntPtr ControlHandler;

    private const int WM_KEYUP = 0x0101;

    public MessagesFilter(IntPtr ControlHandler)
    {
        this.ControlHandler = ControlHandler;
    }

    #region IMessageFilter Members

    public bool PreFilterMessage(ref Message m)
    {
        // TODO:  Add MessagesFilter.PreFilterMessage implementation
        if (m.Msg == WM_KEYUP)
        {
            if (m.HWnd == ControlHandler)
            {
                Keys k = ((Keys) ((int) m.WParam));

                if (k == Keys.Enter)                    
                    return true;
            }
        }

        return false;
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:53:52.523

与往常一样，UI 应该以这样一种方式呈现，即用户了解应用程序正在做什么以及`should talk to the user`使用 UI 元素。

正如 Adam Houldsworth 建议的那样，我也更喜欢保持`button`禁用或启用，但我还建议按钮的标题应该向用户传达消息，即新线程启动时正在进行长时间处理......所以标题的`button`应该立即更改为类似`"Processing..Please wait..."`（除了被禁用或即使您想保持启用），然后如果您保持启用按钮，只需检查按钮的标题（或 isProcessing bool 标志）`click`如果它说“正在处理..请等待...”或（isProcessing == true），则返回它的事件。

许多帮助用户上传的网站都会`files/images`更改`Upload`按钮的标题以`"Uploading..Please wait..."`通知用户等待上传完成，另外一些网站还`disable`设置了上传按钮，这样用户就无法再次点击上传按钮。

当线程完成长时间处理时，您还需要将标题恢复为正常。

可能还有其他高级方法，但我们的想法是使其尽可能简单和基本。

查看有关[Windows 窗体](http://www.yoda.arachsys.com/csharp/threads/winforms.shtml)中的线程的示例，该示例显示在多线程时禁用按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:24:38.097

迄今为止的所有建议+1。正如`CSharpVJ`建议的那样 -`My idea was to additionally inform the user by changing the button's caption making the UI design more intuitive`

这可以通过 Winforms [No hassles code] 中的 Backgroundworker 组件优雅地实现。只需复制粘贴并按 F5（在创建一个带有按钮和标签的新 Winforms 项目之后）！

您不必在此处**检查**与按钮相关的任何内容。一切都将由适当的事件处理程序处理。只是你必须在相应的事件处理程序中做正确的事情。试试看 ！

```
using System.ComponentModel;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form3 : Form
    {
        private BackgroundWorker _worker;

        public Form3()
        {
            InitializeComponent();
            InitWorker();
        }

        private void InitWorker()
        {
            if (_worker != null)
            {
                _worker.Dispose();
            }

            _worker = new BackgroundWorker
            {
                WorkerReportsProgress = true,
                WorkerSupportsCancellation = true
            };
            _worker.DoWork += DoWork;
            _worker.RunWorkerCompleted += RunWorkerCompleted;
            _worker.ProgressChanged += ProgressChanged;
        }

        /// do time consuming work here... 
        void DoWork(object sender, DoWorkEventArgs e)
        {
            int highestPercentageReached = 0;
            if (_worker.CancellationPending)
            {
                e.Cancel = true;
            }
            else
            {
                double i = 0.0d;

                for (i = 0; i <= 199990000; i++)
                {
                    // Report progress as a percentage of the total task.
                    var percentComplete = (int)(i / 199990000 * 100);
                    if (percentComplete > highestPercentageReached)
                    {
                        highestPercentageReached = percentComplete;
                        // Report UI abt the progress  
                        _worker.ReportProgress(percentComplete);
                        _worker.CancelAsync();
                    }
                }

            }
        }

        void RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            button1.Enabled = true;
            if (e.Cancelled)
            {
                // Display some message to the user that task has been
                // cancelled
                label1.Text = "Cancelled the operation";
            }
            else if (e.Error != null)
            {
                // Do something with the error
            }

            button1.Text = "Start again";
        }

        void ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            label1.Text =  string.Format("Result {0}: Percent {1}",e.UserState, e.ProgressPercentage);
        }

        private void OnStartClick(object sender, System.EventArgs e)
        {
            _worker.RunWorkerAsync();
            button1.Text = "Processing started...";
            button1.Enabled = false;
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:28:52.517

正如其他答案中提到的，可能有比您要求的更好的解决方案。

要直接回答您的问题，请查看[IMessageFilter 界面](http://msdn.microsoft.com/en-us/library/system.windows.forms.imessagefilter.aspx)

创建您的过滤器以使其抑制您不需要的鼠标消息，并在必要时使用`Application.AddMessageFilter()`.

这些方面的东西（这可能应该编译......）：

```
public class MouseButtonFilter : IMessageFilter
{

    private const int WM_LBUTTONDOWN            = 0x0201;
    private const int WM_LBUTTONUP              = 0x0202;
    private const int WM_LBUTTONDBLCLK          = 0x0203;
    private const int WM_RBUTTONDOWN            = 0x0204;
    private const int WM_RBUTTONUP              = 0x0205;
    private const int WM_RBUTTONDBLCLK          = 0x0206;
    private const int WM_MBUTTONDOWN            = 0x0207;
    private const int WM_MBUTTONUP              = 0x0208;

    bool IMessageFilter.PreFilterMessage(ref Message m)
    {
        switch (m.Msg)
        {
            case WM_LBUTTONDOWN:
            /* case ... (list them all here; i'm being lazy) */
            case WM_MBUTTONUP:
                return true;
        }

        return false;
    }
} 
```

# vbscript - 在 html 文件中运行 vbscript

> ID：11135492
> 
> 赞同：1
> 
> 时间：2012-06-21T09:41:46.587
> 
> 标签：vbscript

我在我的网站的 html 文件中编写了 vbscript，但我无法让它工作。我知道它只适用于 Internet Explorer，因为这是我看到人们写这个问题的常见答案。我能够使基本的 vbscript 正常工作，但是当尝试使用文件系统对象打开文本文件时，什么也没有发生。正在使用的代码如下。

```
<Script type="text/vbscript">

Dim fsobj, objtxt, thearr

Set fsobj = CreateObject("Scripting.FileSystemObject")
Set objtxt = fsobj.OpenTextFile("./subfolder/foo.txt", 1)

thearr = split(objtxt.readline, ",")    
document.write(thearr(0) & " and " & thearr(1))

</script> 
```

我在使用 asp 扩展名保存代码时可以工作，但当我另存为 html 时不能工作，有没有办法让它只使用 html 扩展名工作？如果没有，是否有人解释为什么没有 asp 扩展名的脚本文件系统对象不起作用？我似乎无法搜索我正在寻找的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:47:46.803

当您将脚本作为客户端脚本运行时，它会尝试从客户端计算机而不是服务器访问文件。该文件不存在，即使存在，您的脚本也不会被允许访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T09:48:06.370

当您从 ASP 页面使用 FileSystemObject 时，您就是在操作**服务器**的文件系统。这是允许的。

**但是，当您使用上面的代码时，您是在客户端**上执行代码。不允许从 Internet Explorer 内部访问客户端文件系统，因为这会产生严重的安全隐患。技术术语是“[沙盒](http://en.wikipedia.org/wiki/Sandbox_%28computer_security%29)”。

如果您需要与**客户端**计算机上的文件系统进行交互，您将需要使用诸如 ActiveX 之类的技术。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T11:57:41.827

您应该考虑通过使用 .hta 后缀重命名文件来使用 HTML 应用程序。

HTA 的执行不受 Internet 浏览器安全模型的限制；事实上，它作为“完全受信任”的应用程序执行。

在 Internet 浏览器中运行的 HTML 文件被视为“不受信任”，因为代码来自 Internet，并且通常被视为“不受信任”，因为浏览器强制执行严格的安全模型，以防止这些 HTML 页面访问您的计算机，即为什么 FileSystemObject 无法打开文本文件。但是，作为 HTA，它不再由您的浏览器运行，而是通过 Microsoft 的 MSHTA 应用程序运行，该应用程序授予您的脚本完全信任。

有关详细信息，请参阅[HTML 应用程序 - 维基百科](http://en.wikipedia.org/wiki/HTML_Application)。

# postgresql - Postgresql，如果存在具有某些唯一值的行，则更新，否则插入

> ID：11135501
> 
> 赞同：55
> 
> 时间：2012-06-21T09:42:40.843
> 
> 标签：postgresql, triggers, plpgsql

我有一个 URL 表。他们包含

（id int 主键，url 字符变化唯一，内容字符变化，最后分析日期）。

我想创建触发器或其他东西（可能是规则），所以每次我从我的 java 程序中插入时，如果存在具有此类 URL 的行，它会更新一些单行。否则它应该执行插入。

请问，你能在 Postgresql 中提供完整的代码吗？谢谢。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-06-21T09:58:52.393

这已经被问过很多次了。可以在这里找到一个可能的解决方案： [https ://stackoverflow.com/a/6527838/552671](https://stackoverflow.com/a/6527838/552671)

此解决方案同时需要`UPDATE`和`INSERT`。

```
UPDATE table SET field='C', field2='Z' WHERE id=3;
INSERT INTO table (id, field, field2)
       SELECT 3, 'C', 'Z'
       WHERE NOT EXISTS (SELECT 1 FROM table WHERE id=3); 
```

使用 Postgres 9.1，可以通过一个查询来完成： [https ://stackoverflow.com/a/1109198/2873507](https://stackoverflow.com/a/1109198/2873507)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-11-26T20:57:58.387

如果`INSERTS`很少见，我会避免这样做，因为它会在所有更新中`NOT EXISTS (...)`发出 a 。`SELECT`相反，看看 wildpeaks 的答案：[https ://dba.stackexchange.com/questions/5815/how-can-i-insert-if-key-not-exist-with-postgresql](https://dba.stackexchange.com/questions/5815/how-can-i-insert-if-key-not-exist-with-postgresql)

```
CREATE OR REPLACE FUNCTION upsert_tableName(arg1 type, arg2 type) RETURNS VOID AS $$ 
    DECLARE 
    BEGIN 
        UPDATE tableName SET col1 = value WHERE colX = arg1 and colY = arg2; 
        IF NOT FOUND THEN 
        INSERT INTO tableName values (value, arg1, arg2); 
        END IF; 
    END; 
    $$ LANGUAGE 'plpgsql'; 
```

这样，Postgres 最初会尝试做一个`UPDATE`. 如果没有行受到影响，它将回退到发出`INSERT`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-09-11T20:07:26.577

我发现[这篇文章](http://www.the-art-of-web.com/sql/upsert/)在这种情况下更相关：

```
WITH upsert AS (
     UPDATE spider_count SET tally=tally+1 
     WHERE date='today' AND spider='Googlebot' 
     RETURNING *
)
INSERT INTO spider_count (spider, tally) 
SELECT 'Googlebot', 1 
WHERE NOT EXISTS (SELECT * FROM upsert) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-05-05T21:13:50.433

首先它尝试插入。如果列上存在冲突，*`url`*则它会更新内容和 last_analyzed 字段。如果更新很少，这可能是更好的选择。

```
INSERT INTO URLs (url, content, last_analyzed)
VALUES
    (
        %(url)s,
        %(content)s,
        NOW()
    ) 
ON CONFLICT (url) 
DO
UPDATE
SET content=%(content)s, last_analyzed = NOW(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-12-07T07:34:31.330

```
create table urls (
      url_id serial primary key, 
      url text unique, 
      content text,
      last_analyzed timestamptz);

insert into urls(url) values('hello'),
   ('How'),('are'),
   ('you'),('doing'); 
```

通过创建过程，您还可以执行 upsert。

```
CREATE OR REPLACE PROCEDURE upsert_url(_url text) LANGUAGE plpgsql
as $$
BEGIN 
     INSERT INTO URLs (url) values (_url)
      ON CONFLICT (url) 
      DO UPDATE SET last_analyzed = NOW();
END 
$$; 
```

通过调用程序对其进行测试。

```
call upsert_url('I am is ok');
call upsert_url('hello'); 
```

# asp.net - asp.net razor 只允许登录用户编辑页面

> ID：11135505
> 
> 赞同：0
> 
> 时间：2012-06-21T09:43:02.600
> 
> 标签：asp.net, razor

我有这个个人资料编辑页面，但是如果用户更改了 url 中的 id，他可以更改其他用户的个人资料，我如何拒绝访问 url 中的其他 id

```
 if (!IsPost)
    {
        //if(!Request.QueryString["ID"].IsEmpty()){
        if (!Request.QueryString["UserId"].IsEmpty() && Request.QueryString["UserId"].IsInt())

        {
            UserId = Request.QueryString["UserId"];
            var db = Database.Open("mystring");
            var dbCommand = "SELECT * FROM UserProfile WHERE UserId = @0";
            var row = db.QuerySingle(dbCommand, UserId);

            if (row != null)
            {
                Email = row.Email;
                fullname = row.fullname;
                location = row.location;

            }
            else
            {

                ModelState.AddFormError("No Profile was selected.");

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:45:24.550

通过不允许将用户 ID 作为查询字符串参数传递，而是从加密的表单身份验证 cookie 中读取它。

所以：

```
var UserId = Request.QueryString["UserId"]; 
```

应该变成：

```
string username = User.Identity.Name; 
```

这将为您提供当前经过身份验证的用户名，然后仅更改他的个人资料。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:46:39.123

有很多方法可以做到这一点。

1.  不要将用户 ID 作为查询字符串传递。在模型对象中传递它

2.  如果您决定从查询字符串传递用户 id，并且如果您设置了身份验证，那么您可以将查询字符串中传递的用户 id 与登录用户的用户 id 匹配。如果这两个匹配，则只允许编辑

# oracle - PLSQL 触发器更新另一个表中的字段值

> ID：11135507
> 
> 赞同：4
> 
> 时间：2012-06-21T09:43:14.327
> 
> 标签：oracle, plsql, oracle11g, plsqldeveloper

我对触发器很陌生，所以很明显我在某处做错了什么。我正在制作一个报告表，它将从原始表中获取数据。为简单起见，假设有一张表，然后有一张报告表。

原始表（orig_tab）

```
CREATE TABLE orig_tab (
PK     NUMBER(8)       not null,
NAME   VARCHAR2(20)            ,
);

INSERT INTO orig_tab (PK, NAME) VALUES (1, 'AAA');
INSERT INTO orig_tab (PK, NAME) VALUES (2, 'BBB');
INSERT INTO orig_tab (PK, NAME) VALUES (3, 'CCC'); 
```

然后是报表（rep_tab）

```
CREATE TABLE rep_tab (
PK     NUMBER(8)       not null,
NAME   VARCHAR2(20)            ,
); 
```

现在从用户界面，有人更改了记录 2 的值。显然，这应该被视为报表的插入（因为该记录不存在）。然后一段时间后，该值会更改，因此它是报表的更新案例。

问题：我怎样才能制作这种触发器？我认为这是一个合并语句案例。

这就是我所做的：

```
create or replace trigger vr_reporting_trigger
after update on orig_tab
  for each row
begin
  MERGE INTO rep_tab d
  USING (SELECT pk FROM orig_tab) s
  ON (d.pk = s.pk)
  WHEN MATCHED THEN
  UPDATE SET d.pk = s.pk,
             d.name = s.name
  WHEN NOT MATCHED THEN
  INSERT (d.pk, d.name) VALUES (s.pk, s.name);
end vr_reporting_trigger; 
```

有什么建议或建议可以帮助我弄清楚吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:02:00.283

Merge 语句听起来像一个计划，除了当您执行第一次插入时触发器不会触发，因为您已经提到它是 AFTER UPDATE 触发器，而不是 AFTER INSERT 触发器。

此外，这`SELECT pk FROM orig_tab`将导致[变异表问题](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/triggers.htm#g1699708)。

更好的方法是定义一个 AFTER INSERT OR UPDATE 触发器，将其与 INSERT/UPDATING 关键字结合以处理插入/更新并使用`:new`/`:old`分别处理新数据和旧数据。

```
CREATE OR replace TRIGGER vr_reporting_trigger
  AFTER INSERT OR UPDATE ON orig_tab
  FOR EACH ROW
BEGIN
    IF inserting THEN
      INSERT INTO rep_tab
                  (pk,
                   name)
      VALUES      (:NEW.pk,
                   :NEW.name);
    ELSIF updating THEN
      UPDATE rep_tab r
      SET    name = :NEW.name
      WHERE  r.pk = :old.pk;
    END IF;
END vr_reporting_trigger; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T22:47:57.133

以前的答案中没有处理一些极端情况。

如果在插入一行时报告表中已经存在匹配的 pk 怎么办。（我们通常不会期望会发生这种情况，但考虑一下如果有人从 orig_tab 中删除了一行，然后再次插入它会发生什么。（这种问题会在生产中出现，而不是在测试中，在最不合时宜的时候。最好现在就计划。）

```
BEGIN
   IF inserting THEN
      -- insure we avoid duplicate key exception with a NOT EXISTS predicate
      INSERT INTO rep_tab(pk,name)
      SELECT :new.pk, :new.name FROM DUAL
      WHERE NOT EXISTS (SELECT 1 FROM rep_tab WHERE pk = :new.pk);
      -- if row already existed, there's a possibility that name does not match
      UPDATE rep_tab t SET t.name = :new.name 
       WHERE t.pk = :new.pk;
      -- could improve efficiency of update by checking if update is actually
      -- needed using a nullsafe comparison ( t.name <=> :new.name );
   ELSIF updating THEN
      -- handle updates to pk value (note: the row to be updated may not exist
      -- so we need to fallthru to the merge)
      IF :new.pk <> :old.pk THEN
         UPDATE rep_tab t
            SET t.pk = :new.pk
              , t.name = :new.name
          WHERE t.pk = :old.pk ;
      END IF;
      MERGE INTO rep_tab d
      USING DUAL ON (d.pk = :old.pk)
      WHEN MATCHED THEN
      UPDATE SET d.name = :new.name
      WHEN NOT MATCHED THEN
      INSERT (d.pk,d.name) VALUES (:new.pk,:new.name);
   END IF;
END; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T18:15:03.287

这是关于记录是否在 orrig_tab`Sathya Answer`中`Jaanna`更新而在 rep_tab 中没有相应记录的扩展，那么下面的逻辑将满足下面的请求。请不要用这个答案来评判我，因为这个解决方案属于 Sathya

```
CREATE OR replace TRIGGER vr_reporting_trigger
  AFTER INSERT OR UPDATE ON orig_tab
  FOR EACH ROW
BEGIN
    IF inserting THEN
      INSERT INTO rep_tab
                  (pk,
                   name)
      VALUES      (:NEW.pk,
                   :NEW.name);
    ELSIF updating THEN
       MERGE INTO rep_tab d
          USING DUAL
       ON (d.pk =:OLD.pk)
       WHEN MATCHED THEN
         UPDATE SET d.name = :OLD.name            
       WHEN NOT MATCHED THEN
         INSERT (d.pk,d.name) VALUES (:OLD.PK,:NEW.PK );
    END IF;
END vr_reporting_trigger; 
```

# razor - 使用 HTML Helper 获取“值不能为空”

> ID：11135509
> 
> 赞同：5
> 
> 时间：2012-06-21T09:43:19.073
> 
> 标签：razor, null

我从下面的代码中收到“值不能为空”错误：

```
@Html.Label(material.ExtendedGroup) 
```

`ExtendedGroup`确实如此`null`，但我想知道如何使用 Razor 的 HTML 帮助程序来处理这个问题——这与`Isnull(material.ExtendedGroup,"",material.ExtendedGroup)`我们在 MS SQL 中所做的相同。请提出解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T09:45:50.040

空[合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)可以解决问题：

```
@Html.Label(material.ExtendedGroup ?? "default value") 
```

# html - role="radiogroup" 和 role="radio" 真的有必要吗？

> ID：11135512
> 
> 赞同：5
> 
> 时间：2012-06-21T09:43:32.880
> 
> 标签：html, radio, wai-aria

有一些 ARIA 教程网站使用非语义标记和一些 javascript 来演示 and 的使用，`role="radiogroup"`例如`role="radio"`以下示例：

```
<ul role="radiogroup">  
    <li tabindex="-1" role="radio" aria-checked="false">  
        <img role="presentation" src="radio-unchecked.gif">
        Option1
    </li>  
    <li tabindex="0"  role="radio" aria-checked="true">  
        <img role="presentation" src="radio-checked.gif">
        Option2
    </li>  
</ul> 
```

`role`但是，当我们已经有了语义和无 javascript 的方法时 ，使用这些 s 有什么意义，例如：

```
<ul>  
    <li>  
        <input  id="opt1" type="radio" name="opt" value="1">
        <label for="opt1">Option1</label>
    </li>  
    <li>  
        <input  id="opt2" type="radio" name="opt" value="2">
        <label for="opt2">Option2</label>
    </li>  
</ul> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T09:44:44.563

因为有些人真的，真的想要为他们的表单控件定制设计，不管有没有语义上合适的元素，他们都会用图像和一堆 JavaScript 代替它们。

这些角色只是允许在这样做时减轻损害。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-18T17:40:01.153

在第二个版本中：你需要在 ul 上设置一个角色="radiogroup"。

或者更好的可访问性：使用字段集。

aria 不是为了语义，而是为了可访问性。

# mysql - 从数据库中选择多个货币代码的最新汇率的最佳方式

> ID：11135522
> 
> 赞同：1
> 
> 时间：2012-06-21T09:44:01.333
> 
> 标签：mysql, database

全部！我有以下问题：我有 2 个简单的表。第一个，比如“货币”，存储有关货币的信息（ISO 4217 代码 (PK)、名称等）。第二个，“rates”，有以下字段：id、currency_code（参考currency.code）、date_added（日期时间）、rate。

我想要的是选择几种货币代码的最新汇率。首先，我想这样做：

```
SELECT r.rate
FROM rates r
WHERE r.id IN (SELECT id
               FROM rates r1
               WHERE r1.currency_code IN('USD', 'EUR')
               GROUP BY r1.currency_code
               ORDER BY r1.date_added DESC)
ORDER BY r.currency_code ASC 
```

但是我很快就想起了 ORDER 子句将在结果分组后被考虑在内。就我而言，子查询最终返回了最早费率的 id...

我想我可以分别获得每种货币代码的汇率，但我仍然希望我能够使用一个干净的查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:53:08.820

假设最新汇率是您可以使用的最高 id 汇率：

```
SELECT *
FROM rates r
WHERE r.id IN (
    SELECT MAX(r1.id)
    FROM rates r1
    GROUP BY r1.currency_code
) T; 
```

但我强烈建议另一种我喜欢的模式。我今天早上在[另一个答案](https://stackoverflow.com/a/11134161/1437486)中解释了它：

```
SELECT
  c.*,
  r1.*
FROM currency c
INNER JOIN rates r1 ON c.code = r1.currency_code
LEFT JOIN rates r2 ON r1.currency_code = r2.currency_code AND r2.id > r1.id
WHERE r2.id IS NULL; 
```

# python - 如何通过python打开我的电脑？

> ID：11135527
> 
> 赞同：-3
> 
> 时间：2012-06-21T09:44:30.820
> 
> 标签：python

我正在使用ubuntu10.04。我正在尝试在特定日期自动打开我的系统。有没有机会通过python代码打开我的电脑？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T09:46:37.687

当您的计算机关闭时，python 无法运行。您可以通过局域网唤醒[http://de.wikipedia.org/wiki/Wake_On_LAN从另一台计算机启动它](http://de.wikipedia.org/wiki/Wake_On_LAN)

在 Linux 系统上，您可以执行以下操作：

```
 os.system('sudo sh -c "echo date \'+%s\' -d \'+ 24 hours\' > /sys/class/rtc/rtc0/wakealarm"') 
```

这使用 ACPI 唤醒，此处提供了一些很好的信息（它实际上是 mythtv 的文档，但通常也可用于 Linux）： [http ://www.mythtv.org/wiki/ACPI_Wakeup](http://www.mythtv.org/wiki/ACPI_Wakeup)

# ruby-on-rails - 使用 capybara 进行测试时意外注销

> ID：11135529
> 
> 赞同：0
> 
> 时间：2012-06-21T09:44:33.143
> 
> 标签：ruby-on-rails, devise, subdomain, capybara

我目前使用 devise 作为身份验证，使用 capybara + rspec 作为我的测试环境。

并且有一个奇怪的行为，管理员似乎被意外注销。

这是我的测试代码

```
require 'spec_helper'                                                                               
require 'helpers/myapp/login_helper'                                                        

describe "Crawler" do                                                                               
  describe "UpdateMainMenus" do                                                                     
    it "should work" do

      @admin = FactoryGirl.create(:myapp_admin)

      login_as @admin, :scope => :admin
      visit admin_cron_jobs_url(subdomain: "myapp")
      current_url.should == admin_cron_jobs_url(subdomain: "myapp")

      puts ""
      puts current_url

      visit admin_cron_jobs_url(subdomain: "myapp")
      current_url.should == admin_cron_jobs_url(subdomain: "myapp")                                

      puts ""
      puts current_url

    end                                                                                             
  end
end 
```

还有 helpers/myapp/login_helper.rb

```
include Warden::Test::Helpers    
Warden.test_mode! 
```

我已经在 rspec_helper.rb 中设置了 Warden

```
config.after(:each) { Warden.test_reset! } 
```

输出是：

```
http://myapp.example.com/admin/cron_jobs
F

Failures:

  1) Crawler UpdateMainMenus should work
     Failure/Error: current_url.should == admin_cron_jobs_url(subdomain: "myapp")
       expected: "http://myapp.example.com/admin/cron_jobs"
            got: "http://myapp.example.com/admins/sign_in" (using ==)
     # ./spec/requests/myapp/crawler_spec.rb:30:in `block (3 levels) in <top (required)>'

Finished in 5.44 seconds
1 example, 1 failure 
```

任何帮助表示赞赏..真的谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:34:58.670

哦，我明白了！

管理员确实登录了。但是在第二次“访问”中，它没有登录。

原因是会话不能在请求之间保持，因为我的 session_store 设置不正确

这是原点设置：

```
if not Rails.env.production?
  MyApp::Application.config.session_store :cookie_store,
                                         key: '_myapp_session',
                                         domain: '.lvh.me'
end 
```

工作版本（忽略生产设置）：

```
if Rails.env.development?
  MyApp::Application.config.session_store :cookie_store,
                                         key: '_myapp_session',
                                         domain: '.lvh.me'
elsif Rails.env.test?
  MyApp::Application.config.session_store :cookie_store,
                                         key: '_myapp_session',
                                         domain: :all
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:01:39.647

也许您只是没有成功登录？

# ios - 如何在 iOS 中以编程方式更改 UIButton 中的 textLabel 属性？

> ID：11135532
> 
> 赞同：31
> 
> 时间：2012-06-21T09:44:45.803
> 
> 标签：ios, uibutton, label, title

我有一个`UIButton`应该有 2 个状态 - “播放”和“暂停”；即 - 用户第一次看到它时会说“播放”，然后每当用户点击它时，它应该在“播放”和“暂停”之间切换。

我设法创建了控制器本身 - 内容已正确播放和暂停 - 但我似乎无法更改 UIButton Text Label 文本。

我用：

```
myButton.titleLabel.text = @"Play";

myButton.titleLabel.text = @"Pause"; 
```

它不工作。文本没有变化。我也尝试过 [myButton.titleLabel setText:@"Pause"] 并且效果不佳。

我该如何设置？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-06-21T09:46:08.647

它应该是：

```
[myButton setTitle:@"Play" forState:UIControlStateNormal]; 
```

你也需要通过`state`。你可以[在这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/c/tdef/UIControlState)`state`查看其他的。

然后，您可以执行以下操作：

```
[myButton setTitle:@"Play" forState:UIControlStateNormal];
[myButton setTitle:@"Stop" forState:UIControlStateSelected]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-04-30T09:56:38.743

**斯威夫特 4**

```
myButton.setTitle("Pause", for: .normal) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-09T17:18:52.773

我发现这有点过时了，因为添加了属性字符串。显然，故事板中分配的按钮标题是属性字符串。属性标题优先于 NSString 标题，所以如果你想使用一个简单的字符串作为标题，你必须先删除属性标题。我做了如下，虽然可能有更好的方法。当然，您可以使您的新标题也成为属性字符串。

```
[myButton setAttributedTitle: nil     forState: 0xffff];
[myButton           setTitle: @"Play" forState: UIControlStateNormal]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-30T14:05:48.413

如果你想在页面加载时加载它，并支持本地化语言：

```
-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    if (self.flagToChangeLabel){
        NSString* newBtnTitle = NSLocalizedString(@"LOCALIZED_KEY", nil);
        [self.laterButton setTitle:newBtnTitle forState:UIControlStateNormal];
        [self.laterButton setTitle:newBtnTitle forState:UIControlStateSelected];
    }
} 
```

# android - 以编程方式制作屏幕截图并将其保存到 sdcard

> ID：11135534
> 
> 赞同：1
> 
> 时间：2012-06-21T09:44:49.257
> 
> 标签：android, bitmap, screenshot, android-sdcard

我如何以编程方式制作屏幕截图并将其保存到 sdcard，我试过这个：

```
 View v = getWindow().getDecorView().getRootView();
    v.setDrawingCacheEnabled(true);
    Bitmap b = v.getDrawingCache();
    Util.saveBitmap(b, "snapshot", "screen");

class Util {
public static final int SDK_VERSION = getSdkVersion();

private static int getSdkVersion() {
    try {
        return Integer.parseInt(Build.VERSION.SDK);
    } catch (NumberFormatException e) {
        return 3;
    }
}

static String saveBitmap(Bitmap bitmap, String dir, String baseName) {
    try {
        File sdcard = Environment.getExternalStorageDirectory();
        File pictureDir = new File(sdcard, dir);
        pictureDir.mkdirs();
        File f = null;
        for (int i = 1; i < 200; ++i) {
            String name = baseName + i + ".png";
            f = new File(pictureDir, name);
            if (!f.exists()) {
                break;
            }
        }
        if (!f.exists()) {
            String name = f.getAbsolutePath();
            FileOutputStream fos = new FileOutputStream(name);
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
            fos.flush();
            fos.close();
            return name;
        }
    } catch (Exception e) {
    } finally {
        /*
        if (fos != null) {
            fos.close();
        }
        */
    }
    return null;
}

static void bitmapBGRtoRGB(Bitmap bitmap, int width, int height) {
    int size = width * height;
    short data[] = new short[size];
    ShortBuffer buf = ShortBuffer.wrap(data);
    bitmap.copyPixelsToBuffer(buf);
    for (int i = 0; i < size; ++i) {
        //BGR-565 to RGB-565
        short v = data[i];
        data[i] = (short) (((v&0x1f) << 11) | (v&0x7e0) | ((v&0xf800) >> 11));
    }
    buf.rewind();
    bitmap.copyPixelsFromBuffer(buf);
} 
```

}

但它不起作用

# android - 通过文件夹组织drawable-hdpi（mdpi、ldpi等）的内容

> ID：11135535
> 
> 赞同：2
> 
> 时间：2012-06-21T09:44:50.600
> 
> 标签：android, resources, drawable, organization

我的 android 项目使用了许多图像，并且我也有不同 DPI 的图像。目前，所有图像都位于项目中各自的文件夹中，即`drawable-hdpi`，`drawable-ldpi`依此类推。

它可以工作，但是是否可以将它们组织在其文件夹中的`drawable`文件夹中？像：

```
drawable-hdpi
    > common
    > activity1
    > activity2

drawable-mdpi
    > common
    > activity1
    > activity2 
```

而且，我可以通过 、 、 等方式访问`R.drawable.common.image1`它们`R.drawable.activity2.icon1`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:47:13.193

不，资源机制不支持可绘制目录中的子文件夹，因此 - 您需要保持该层次结构平坦。

[Android可绘制目录可以包含子目录吗？](https://stackoverflow.com/questions/1077357/can-the-android-drawable-directory-contain-subdirectories)

从 Android 2.2 开始，这不会导致编译器错误，但在生成 R 类时会忽略任何子目录。这真的很糟糕，并且很难管理更大的项目。

# javascript - 为 JavaScript 请求自动添加 SourceMap 标头

> ID：11135538
> 
> 赞同：3
> 
> 时间：2012-06-21T09:44:58.870
> 
> 标签：javascript, .htaccess, mod-rewrite

我已经开始使用 SourceMaps，并且想知道是否有一种方法可以自动设置适当的标头，如果`.map`存在用于使用 .htaccess 的 JavaScript 请求的文件，而不必修改原始 JavaScript 文件。

如果它存在并且我没有调试，我已经做了类似的事情来提供缩小的 JavaScript：

```
RewriteCond %{REQUEST_FILENAME}        \.(php|js)
RewriteRule .                          - [E=DEBUG:true]

RewriteCond %{ENV:DEBUG}               !^true$
RewriteCond %{REQUEST_URI}             ^(.+)\.js$
RewriteCond %{DOCUMENT_ROOT}%1-min.js  -f
RewriteRule .                          %1-min.js [L] 
```

我想它基本上可以归结为：如果某个文件针对某种类型的请求存在，我该如何添加额外的 HTTP 标头？

**更新**

解决方法如下：

```
# If serving minified js and a SourceMap file exists, send appropriate header
RewriteCond %{REQUEST_URI}          ^(.+-min\.js)$
RewriteCond %{DOCUMENT_ROOT}%1.map  -f
RewriteRule .                       - [L,E=SOURCE_MAP:%{REQUEST_URI}.map]

Header set X-SourceMap "%{SOURCE_MAP}e" env=SOURCE_MAP 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:32:25.803

**有关最终解决方案，请参见上面 Nev Stokes 所做的编辑**

```
RewriteCond %{REQUEST_FILENAME}        \.(php|js)
RewriteRule .                          - [E=DEBUG:true]

RewriteCond %{ENV:DEBUG}               !^true$
RewriteCond %{REQUEST_URI}             ^(.+)\.js$
RewriteCond %{DOCUMENT_ROOT}%1-min.js  -f
RewriteRule [^/]+\.js$                 %1-min.js [L,E=SOURCE_MAP:%{REQUEST_URI}]

Header set X-SourceMap "%{SOURCE_MAP}e" env=SOURCE_MAP 
```

我无法测试 Header 部分，因为我的测试服务器没有安装 mod_headers。

# php - MySQL加入多个表

> ID：11135540
> 
> 赞同：0
> 
> 时间：2012-06-21T09:44:59.270
> 
> 标签：php, mysql, left-join

我正在尝试实现动态 META 信息，以便它允许根据您正在查看的页面插入 META 信息。

我有 3 张桌子

```
CATEGORIES
  category_id,
  category_name,
  category_title,
  category_url,
  site_id,

SITE
  site_id,
  site_name,
  site_url,
  meta_kw,
  meta_desc,

CATEGORY_META
  site_id,
  category_id,
  meta_keywords,
  meta_description, 
```

如果 CATEGORY_META 表中不存在任何信息，我正在尝试运行允许从 SITE 表填充 META 信息的查询。为了实现这一点，我正在查看存在的“category_url”并从中收集“category_id”以运行子查询。但是它返回了一个我不想要的空行并且导致错误。

我的查询如下所示：

```
SELECT category_id, s.meta_kw, s.meta_desc, m.meta_keywords, m.meta_description
FROM cms_sites s
LEFT JOIN cms_category_meta m
ON s.site_id=m.site_id AND m.category_id = 
(SELECT category_id FROM cms_categories WHERE category_url='?') 
```

返回：

```
 |category_id  |meta_kw  |meta_Desc | meta_keywords  |meta_description  |
 |NULL         |kw       |desc      |NULL            |NULL              |
 |NULL         |         |          |NULL            |NULL              | 
```

我对 MySQL 比较陌生，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:52:24.910

尝试这个：

```
SELECT 
  category_id, s.meta_kw, s.meta_desc, m.meta_keywords, m.meta_description
FROM cms_sites s 
LEFT JOIN cms_category_meta m ON s.site_id = m.site_id 
LEFT JOIN cms_categories cat ON m.category_id = cat.category_id
                            AND cat.category_url = '?' 
```

无论如何，如果你有@jlcd 告诉你的一些“空”行，这不会解决你的问题。

# ruby-on-rails - 从 Rails 3 访问 MDB 文件

> ID：11135543
> 
> 赞同：0
> 
> 时间：2012-06-21T09:45:14.743
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, odbc

只是想知道在 Rails 3 应用程序中从 Microsoft Access 文件访问只读信息的最佳方法是什么，我知道我可以将数据转换为 CSV，然后手动导入 Postgres 或 SQLite，但这些数据一直在变化它用于我工作场所的业务应用程序中，这意味着每天进行几次导入。

如果有人能指出我的解决方案，那将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:45:39.717

我认为有用于 MS-Access 的商业跨平台 odbc 驱动程序，但没有任何开源可以可靠地读/写（过去几年我本可以使用它们一两次）。

如果您使用的是 Windows，您应该能够将 ODBC 与 .MDB 兼容的驱动程序一起使用。如果没有，您也许可以使用 MS-SQL 服务器作为代理（有“express”免费版本）或 java/perl 代理（[jackess](http://jackcess.sourceforge.net/) / [DBD::Proxy](http://search.cpan.org/~timb/DBI-1.622/lib/DBD/Proxy.pm)），但这些都不是简单的即插即用解决方案。

如果您致力于 Access，那么[EasySoft 的驱动程序](http://www.easysoft.com/products/data_access/odbc-access-driver/index.html)可能是最简单的解决方案。如果它运作良好，物有所值，但我自己没有直接的经验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T23:04:43.217

虽然这是一个老问题，但我本周自己遇到了这个问题，并设法使用 mdb gem 解决了从 rails 访问 .mdb 数据库的问题： [https ://github.com/jkotchoff/heroku_rails_microsoft_access_mdb_example](https://github.com/jkotchoff/heroku_rails_microsoft_access_mdb_example)

# opencv - 用opencv提取更少的关键点

> ID：11135546
> 
> 赞同：4
> 
> 时间：2012-06-21T09:45:19.680
> 
> 标签：opencv, sift, surf

我需要实时进行对象识别（图像来自摄像机 USB）

有没有办法告诉

```
SurfFeatureDetector.detect(); 
```

提取更少的关键点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T09:39:25.017

通过修改阈值，您可以以某种方式控制关键点的数量。无论如何，这不是直接控制关键点的最大数量。

如果您希望它最多停止，则必须进入 .cpp 中的算法（不可调试）并在循环中设置条件。我使用 OpenCV 中的一些算法来实现这一点，以获得计算效率。问题是您需要复制代码并粘贴到您自己的类中才能进行修改，并且它会产生一些链接问题，直到您正确完成所有操作。d

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T10:14:18.540

这是[SurfFeatureDetector 的构造函数](http://opencv.willowgarage.com/documentation/cpp/features2d_common_interfaces_of_feature_detectors.html#SurfFeatureDetector)。使用构造函数，您可以使用 3 个基本参数减少关键点的数量：

*   `hessianThreshold`: 增加这个
*   `octaves`: 减少这个
*   `octavelayers`: 减少这个

我不知道 SURF 实现的细节，但是[这个 SO 答案](https://stackoverflow.com/questions/8503743/opencv-surffeaturedetector-principles-of-working)指向解释整个算法的文档，因此您可以选择如何更改这些算法。

作为直接研究实现的替代方法，我发现[Find-Object](http://code.google.com/p/find-object/)对于试验许多特征检测算法设置非常有用。

# asp.net - 正则表达式 - 空或最少 6 个字符

> ID：11135548
> 
> 赞同：0
> 
> 时间：2012-06-21T09:45:23.410
> 
> 标签：asp.net, regex, validation, minimum

我想使用 ASP:RegularExpressionValidator 来强制执行最小字符数 (6)，但前提是该字段不为空。

有人可以帮我使用正则表达式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:55:00.840

试试这个正则表达式：

```
^(?:.{6,}|)$ 
```

# jquery - jQuery Drop 事件正在传播到下面的元素（对于浮动条）

> ID：11135553
> 
> 赞同：1
> 
> 时间：2012-06-21T09:45:28.773
> 
> 标签：jquery, html, jquery-ui-droppable

我正在设计一个表单构建器，其中有一个包含所有表单元素的浮动栏。在此下方有一个可放置部分，用户可以在其中放置元素。它工作正常。

问题是当我向下滚动时，浮动条出现在可放置部分上方。现在，我拖动一个元素并将它们留在 div 中，从它们被拖动的位置而不是放入可放置部分，“可放置部分”的放置事件仍然会触发！

# javascript - string.replace(fromCharCode() , '') 不能替换字符

> ID：11135554
> 
> 赞同：7
> 
> 时间：2012-06-21T09:45:31.770
> 
> 标签：javascript, fromcharcode

当我解析 XML 时，它包含异常的十六进制字符。所以我试图用空白空间替换它。但它根本不起作用。

原字：�

```
hex code : (253, 255) 
```

代码 ：

```
xmlData = String.replace(String.fromCharCode(253,255)," ");

retrun xmlData; 
```

我想从描述中删除“ýÿ”字符。是否有人在将十六进制字符替换为空白时遇到问题？

根据答案，我修改了代码如下：

```
testData = String.fromCharCode(253,255);
xmlData = xmlData.replace(String.fromCharCode(253,255), " "); 
console.log(xmlData); 
```

但它仍然在屏幕上显示'''..

你知道为什么还会出现这种情况吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T10:56:57.537

字符代码实际上是 255 * 256 + 253 = 65533，所以你会得到这样的结果：

```
xmlData = xmlData.replace(String.fromCharCode(65533)," "); 
```

字符串`String.fromCharCode(253,255)`由两个字符组成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T10:01:06.307

你应该调用`replace()`一个字符串实例而不是`String`：

```
var testData = String.fromCharCode(253,255);
var xmlData = testData.replace(String.fromCharCode(253,255), " ");
alert(xmlData); 
```

​工作示例：http: [//jsfiddle.net/StURS/2/](http://jsfiddle.net/StURS/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-09T08:46:52.453

刚刚遇到了一个混乱的 SQL 转储问题，该转储包含有效的 UTF-8 代码和无效的强制更多手动转换。由于上面的例子没有解决替换和寻找更好的匹配，我想我把我的两分钱放在了这里，用于那些正在努力解决类似编码问题的人。以下代码：

1.  解析我的 sql 转储
2.  根据查询拆分
3.  查找 256 范围之外的字符代码
4.  输出代码和带有代码出现的上下文的字符串
5.  使用正则表达式将瑞典语 ÅÄÖ 替换为正确的代码
6.  输出替换的字符串以进行控制

```
"use strict";

const readline = require("readline");
const fs = require("fs");

var fn = "my_problematic_sql_dump.sql";
var lines = fs.readFileSync(fn).toString().split(/;\n/);

const Aring = new RegExp(String.fromCharCode(65533) +
    "\\" + String.fromCharCode(46) + "{1,3}", 'g');
const Auml = new RegExp(String.fromCharCode(65533) +
    String.fromCharCode(44) + "{1,3}", 'g');
const Ouml = new RegExp(String.fromCharCode(65533) +
    String.fromCharCode(45) + "{1,3}", 'g');

for (let i in lines){
    let l = lines[i];
    for (let ii = 0; ii < l.length; ii++){
        if (l.charCodeAt(ii) > 256){
            console.log("\n Invalid code at line " + i + ":")
            console.log("Code: ", l.charCodeAt(ii), l.charCodeAt(ii + 1),
                l.charCodeAt(ii + 2), l.charCodeAt(ii + 3))

            let core_str = l.substring(ii, ii + 20)
            console.log("String: ", core_str)

            core_str = core_str.replace(/[\r\n]/g, "")
            .replace(Ouml, "Ö")
            .replace(Auml, "Ä")
            .replace(Aring, "Å")
            console.log("After replacements: ", core_str)
        }
    }
} 
```

结果输出将如下所示：

```
 Invalid code at line 18:
Code:  65533 45 82 65533
String:  �-R�,,LDRALEDIGT', N
After replacements:  ÖRÄLDRALEDIGT', N

 Invalid code at line 18:
Code:  65533 44 44 76
String:  �,,LDRALEDIGT', NULL
After replacements:  ÄLDRALEDIGT', NULL

 Invalid code at line 19:
Code:  65533 46 46 46
String:  �...ker med fam till
After replacements:  Åker med fam till 
```

我发现一些值得注意的事情：

*   `65533`有时后面跟着不同数量的常规字符，这些字符决定实际字符，因此`{1,3}`
*   `Aring`包含 a ，`.`即匹配任何内容并需要附加`\\`

# forms - 使用 WordPress 中的联系表 7 向自己发送一份副本

> ID：11135556
> 
> 赞同：2
> 
> 时间：2012-06-21T09:45:37.277
> 
> 标签：forms, wordpress, contact

我需要在 WordPress 的联系表 7 中添加一个带有文本“向自己发送此电子邮件的副本”的复选框，以便发件人可以收到他发送的邮件的副本。

我在谷歌上找不到任何东西，所以非常感谢您的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T12:12:34.743

在上面的解决方案中，您可以有两个收件人，但您询问了一份**邮件副本**，因此可能需要一份抄送。**最佳做法**是使用“联系表格 7”wp 插件的“附加标题”功能。

![在此处输入图像描述](../Images/b6813e5d5f84c2085ce52a8ee11e1ee4.png)

祝你好运！:)

PS：但是checkbox比较复杂，需要在“Form”框中使用JS验证。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T10:06:41.037

我不再使用 Contact Form 7，但据我记得在表单的设置页面上，有两个区域称为*Mail*。*第一个用于收据，您可以通过选中Mail(2)*复选框来启用另一个。那个是用来复印的。

[http://s.wordpress.org/extend/plugins/contact-form-7/screenshot-1.png?r=561651](http://s.wordpress.org/extend/plugins/contact-form-7/screenshot-1.png?r=561651)

* * *

顺便说一句，我建议使用：[http ://www.gravityforms.com/](http://www.gravityforms.com/)

非常易于使用，并且有很多可供选择的选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T10:46:39.537

在邮寄地址输入字段中，您只需添加用逗号分隔的其他电子邮件地址。

重力形式也是 +1。它的开发者许可证非常物有所值一个出色的插件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-28T03:30:34.613

将此代码添加到主题的functions.php

```
 add_filter( 'wpcf7_additional_mail', 'my_wpcf7_use_mail_2_or_not', 10, 2 );

function my_wpcf7_use_mail_2_or_not( $additional_mail, $cf ) {
    if ( 'yes' != $cf->posted_data['sendcopy'] )
        $additional_mail = array();

    return $additional_mail;
} 
```

并将选择标签更改为：

```
[select sendcopy "no" "yes"] 
```

从您收到的带有邮件标签的电子邮件中复制电子邮件并将其放入 mail(2) 字段。和

勾选邮件（2）。那么只有当他们选择“是”时，您的 Mail(2) 才会处于活动状态。

# java - 带有 DelegatingFilterProxy 的 Spring Security

> ID：11135558
> 
> 赞同：3
> 
> 时间：2012-06-21T09:45:47.877
> 
> 标签：java, spring, servlets, spring-security, servlet-filters

我创建了一个弹簧安全过滤器，如下所示。

```
<!-- Enables Spring Security -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>
        org.springframework.web.filter.DelegatingFilterProxy
    </filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
<!-- End Spring Security -->

<servlet>
    <servlet-name>remoting</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-        
class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/remoting-servlet.xml</param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>remoting</servlet-name>
    <url-pattern>/remoting/*</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>remoting</servlet-name>
    <url-pattern>/admin</url-pattern>
</servlet-mapping> 
```

除此之外，我可以保证一切都是正确的。但我唯一的问题是，

当我访问链接时`http://localhost:8080/myContext/remoting/Services`，不会调用 Spring Filter 进行身份验证，而是直接访问我的服务。

当我在 web.xml 中添加以下行时。它工作正常。

```
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/remoting/*</url-pattern>
</filter-mapping> 
```

我有什么疑问，因为我的过滤器映射已经定义为 /*。我为什么要再定义一个过滤器映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:14:10.200

它成功地为我工作，因为我在 spring-security.xml 中添加了以下代码片段

```
 <http auto-config="true">
    <intercept-url pattern="/**" access="ROLE_USER" />// pattern was modified to /**
    <http-basic/>
</http> 
```

# php - Zend服务器下连接MSSQL-Server 2008

> ID：11135561
> 
> 赞同：0
> 
> 时间：2012-06-21T09:45:58.053
> 
> 标签：php, sql-server-2008, zend-server

您好我目前正在尝试在 Zend（Web）服务器上使用 php 连接到 MSSQL-Server-2008。我现在尝试了一些东西，但总是得到： PHP 警告：PHP 启动：无法加载动态库 'E:\Zend\ZendServer\lib\phpext\php_pdo_sqlsrv_53_ts_vc9.dll' - 找不到所需的模块 *（抱歉，如果错误消息听起来有点奇怪，我将其手动翻译成英文）*

我做的第一步是下载：Microsoft SQL Server 2008 R2 Native Client

第二步是我下载了：SQLSRV20.EXE 并将文件解压缩到 phpext 目录中。

第 3 步是我试图打开： pdo_sqlsrv_53_nts_vc9 和/或 pdo_sqlsrv_53_ts_vc9 并重新启动 php。

不管我做了什么，我都收到了上述错误消息。因此，每次我尝试连接到 mssql 服务器时，我都会收到一条错误消息：*PHP 致命错误：调用未定义的函数 sqlsrv_connect()*

是否需要任何额外的步骤？（我使用的PHP版本是：5.3.9 带有非常新的zend服务器版本）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:12:13.247

在 Zend 服务器本身中，有 SQL 驱动程序将它们与常规安装一起安装。安装完成后，在 php 控制台中打开这些扩展 sqlsrv、pdo_sqlsrv。我不知道确切原因，但这些扩展是 SQLSRV20 附带的。 EXE 不兼容，无法加载。

问候， 斯里

# php - 在 PHP 中使用 LIKE 的 SQL 搜索查询

> ID：11135566
> 
> 赞同：1
> 
> 时间：2012-06-21T09:46:21.210
> 
> 标签：php, mysql, full-text-search

**问题：**

我试图在我的 SQL 搜索查询中使用全文索引，但由于某种原因，它不会从数据库中返回任何帖子。

**PHP/SQL 代码：**

```
$string = mysql_real_escape_string($_POST['searchtext']);

$query = "SELECT
            EID,
            CONCAT (u1.Firstname, ' ', u1.Lastname) AS Examiner,
            Supervisor,
            ExaminationDate,
            FirstAuthor,
            SecondAuthor,
            Level,
            Credits,
            Completed
        FROM betyg_essays grade
            INNER JOIN betyg_users u1 ON grade.Examiner = u1.UID
        WHERE
            MATCH (Supervisor, FirstAuthor, SecondAuthor) AGAINST ('$string')
        ORDER BY
            EID ASC
"; 
```

**MySQL 表定义：**

![在此处输入图像描述](../Images/5305036a1b0bfb51031c806cfe6817d0.png)

**数据库中包含两个帖子的列：**

![在此处输入图像描述](../Images/a6ca6e0f7c9b0ca4b41a45d2c3fef0d9.png)

**设想：**

如果我只搜索“per”，它应该返回第二个帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:58:26.257

假设您的全文索引定义是正确的（您应该发布您的表定义），MySQL 在标准安装中只索引至少 4 个字母的单词。如果您想在搜索中支持 3 个字母单词，则必须在`my.cnf`by 设置中更改它：[`ft_min_word_len`](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_ft_min_word_len)

```
[mysqld]
ft_min_word_len=3 
```

[此外，您应该按照MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/fulltext-fine-tuning.html)中的说明检查阈值和停用词列表。

**编辑：**

根据您的[表定义](http://content.screencast.com/users/elements/folders/Jing/media/4246b303-9d64-4c1f-b74b-55b91062bfc5/00001344.png)，您使用的 InnoDB 表在 MySQL 5.6.4 之前不支持全文索引。是满了吗？而且我看不到您的定义中定义的任何全文索引。

应该有这样的东西：

```
... FULLTEXT KEY `keywords` (`keywords`) ... 
```

要向表中添加全文索引，请使用以下`ALTER TABLE`语法：

```
ALTER TABLE betyg_essays ADD FULLTEXT(FIELD1, FIELD2, ...); 
```

# java - 如何不验证 ldap ssl 连接中的证书

> ID：11135568
> 
> 赞同：3
> 
> 时间：2012-06-21T09:46:22.270
> 
> 标签：java, ssl, ldap

我正在使用 Novell ldap api，我必须使用 ssl 连接，但我正在寻找一种客户端在连接开始时不验证证书的方式......我得到以下异常：

```
javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target 
```

我试图重现当我在 https 中打开网页并且浏览器询问我是否要接受证书时的行为......我没有找到任何使用 novell ldap api 执行此操作的方法，我想知道如果可以以纯 Java 编程方式进行。谢谢

G

# php - ajax调用后的谷歌图表api

> ID：11135569
> 
> 赞同：2
> 
> 时间：2012-06-21T09:46:22.350
> 
> 标签：php, javascript, ajax, google-visualization

在 ajax 调用之后，我遇到了使用谷歌图表 api 可视化数据的问题。

首先，我进行了 ajax 调用并获取了一个 json 对象。之后，我想从 json 中提取一些数据并绘制一个仪表图。获取 json 并提取数据工作正常，但是当我尝试加载图表时，主体被移除并且我得到一个空白/白色屏幕。有谁知道我做错了什么？我还尝试对图表的值进行硬编码，而不是获取 json 值（但在加载图表之前保留了 ajax 调用），但它也不起作用。

```
function loadStats(){
    var http = getRequestObject();
    var city = "berlin";
    http.open("GET", "getTwitterSentiments.php?city="+city, true);
    http.onreadystatechange=function() {
        getStatistic(http)
    };
    http.send(null);
}

function getStatistic(request) {
    if ((request.readyState == 4) && (request.status == 200)) {
        var data = request.responseText;
        var JSONStats = eval("(" + data + ")");
        loadGauge(JSONStats.sentiment_index);
    }

function loadGauge(sentiment){
    google.load('visualization', '1', {packages:['gauge']});
    google.setOnLoadCallback(drawGauge);
    function drawGauge() {
        var data = google.visualization.arrayToDataTable([
            ['Label', 'Value'],
            ['Test', sentiment]     
        ]);

        var options = {
            width: 100, 
            height: 100,
            redFrom: 0, 
            redTo: 45,
            yellowFrom: 45,
            yellowTo: 55,
            greenFrom: 55, 
            greenTo: 100,
            minorTicks: 10
        };

        var chart = new google.visualization.Gauge(document.getElementById('testgchart'));
        chart.draw(data, options);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:39:24.323

尝试使用函数的回调`google.load()`功能。

例如，对于您的代码，请尝试以下操作：

```
function loadGauge(sentiment){
    google.load('visualization', '1.0', {'packages':['gauge'], 'callback': drawGauge});

}

function drawGauge(){
...
chart.draw(data, options);
} 
```

`Google Loader Developer Guide`有关更多信息，请查看 [https://developers.google.com/loader/#Dynamic](https://developers.google.com/loader/#Dynamic)的“动态加载”部分

如果我理解正确，多次调用 loadGauge()**不会**导致多次访问 Google 服务器来加载所需的 API，而只会导致一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T10:03:45.963

我猜你的元素`testgchart`还没有加载到 DOM 中，你的代码应该可以工作。

我从你的代码中做了一个例子：

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="https://www.google.com/jsapi"></script>
    <script>
    function loadGauge(val){
        google.load('visualization', '1', {packages:['gauge']});
        google.setOnLoadCallback(drawGauge);
        function drawGauge() {
            var data = google.visualization.arrayToDataTable([
              ['Label', 'Value'],
              ['Test', val],
            ]);

            var options = {
                width: 100, 
                height: 100,
                redFrom: 0, 
                redTo: 45,
                yellowFrom: 45,
                yellowTo: 55,
                greenFrom: 55, 
                greenTo: 100,
                minorTicks: 10
            };

            var chart = new google.visualization.Gauge(document.getElementById('average'));
            chart.draw(data, options);
        }
    }
    </script>
  </head>
  <body>
    <div id="average"></div>
    <script>loadGauge(99)</script>
  </body>
</html> 
```

但是，如果您删除此行`<script>loadGauge(99)</script>`并将正文标记替换为`<body onload="loadGauge(99)">`. 你可能在做类似的事情。

如果您确定该元素`testgchart`存在，请登录`loadGauge`并告诉我它是否真的被`getStatistic`.

# ios - 检查促销代码的有效性？

> ID：11135570
> 
> 赞同：1
> 
> 时间：2012-06-21T09:46:23.800
> 
> 标签：ios, promotion-code

我遇到了这项服务，它允许以一种您可以跟踪仍未使用的促销代码的方式分发促销代码。我只是再也找不到了。

如果有更好的检查 ios 促销代码有效性的方法，请分享。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:11:45.067

我认为您指的是[Redeem-Now.com](http://redeem-now.com/)

如果您通过 Redeem Now 分发您的促销代码，您可以跟踪已使用/未使用的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T02:45:54.333

*   [http://www.appannie.com/](http://www.appannie.com/)

?

:)

# c# - C# 交互式窗口可以与我的代码交互吗？

> ID：11135571
> 
> 赞同：184
> 
> 时间：2012-06-21T09:46:24.170
> 
> 标签：c#, .net, visual-studio, roslyn

在 Visual Studio 2015 或更高版本中，我可以打开“C# 交互窗口”并运行代码：

```
> 5 + 3
8 
```

那很可爱。现在我如何交互*我的代码*——我的类？假设我有一个打开的项目。

```
> new Cog()
(1,5): error CS0246: The type or namespace name 'Cog' could not be found (are you missing a using directive or an assembly reference?) 
```

* * *

## 回答 #1

> 赞同：257
> 
> 时间：2012-06-21T10:00:15.420

使用 Visual Studio 2015 或更高版本时：

**您可以通过导航到Views > Other Windows > C# Interactive**打开 Interactive 窗口，

然后只需右键单击您的项目并从上下文菜单中运行**Initialize Interactive with Project 。**

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-06-21T10:04:15.530

您可以使用自己项目中的类。
只需右键单击您的解决方案并选择“Reset Interactive from Project”。

如果您需要更多信息，请参阅以下来源：
[使用 Roslyn 附带的 C# 交互式窗口 - 第 2 部分](https://www.filipekberg.se/2011/11/25/using-the-c-interactive-window-that-comes-with-roslyn-part-2/)

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2016-11-17T08:52:11.283

只是来自@Botz3000 答案的更新。

您要查找的命令现在称为“Initialize Interactive with Project”

[![在此处输入图像描述](../Images/cd61fabf9f1e64ebf1e617f21bf9f2a9.png)](https://i.stack.imgur.com/jNdsE.gif)

另外值得注意的是，如果我的 C# 交互式窗口不可见，我将找不到此命令。

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2019-09-09T21:40:10.223

值得注意的是，.Net Core 项目的 VS 2019 尚不支持该功能。

您将找不到该选项，这是一个已知问题，如此答案中突出显示的 [“Initialize interactive with Project”在 Visual Studio 2019 中的 .Net Core 项目中缺失](https://stackoverflow.com/questions/56042332/initialize-interactive-with-project-is-missing-for-net-core-projects-in-visua)

解决方法是使用 #r 命令 ( `#r "Path/MyDll.dll"`) 手动加载程序集，如上面的答案所示。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2018-03-31T01:52:15.977

完全同意“用项目初始化交互”很酷。

我的方法是将类推送到库中并 在 C# 脚本中使用**//css_reference****或**在 C# 交互窗口中使用 #r

例如：

```
#r "D:\\dev\\DbHMonData\\LoadH2Stats\\bin\\Debug\\DbHMonStats.dll"
using DbHMonStats; 
```

# css - 在 Firefox 中缩放后，li 上的 CSS 转换会强制儿童中的文本“跳转”

> ID：11135577
> 
> 赞同：3
> 
> 时间：2012-06-21T09:46:39.507
> 
> 标签：css, firefox, css-transforms

我写了一个简单的便签页。每个注释都是一个列表项，包含段落中的内容、跨度中的删除按钮和带有工具提示的图像。这是一段包含一个注释的 HTML：

```
<ul id="wall" class="ui-sortable">
  <li id="note1">
    <a href="#">
      <span class="del">x</span>
      <p>1221212 23 23 3322 3223</p>
      <img src="..."/>
      <div class="tooltip">Tooltip</div>
    </a>
  </li>
  .
  .
  .
</ul> 
```

这是CSS：

```
ul li a
{
  outline: none;
  text-decoration: none;
  display: block;
  height: 200px;
  width: 200px;
  -moz-transition: -moz-transform 0.2s ease;
}

ul li a:hover
{
  -moz-transform: scale(1.1);
  -webkit-transform: scale(1.1);
  font-size: 105%;
  position: relative;
}

ul li p
{
  overflow: hidden;
  margin: 0;
  padding: 20px;
  -moz-user-select: none;
  font-size: 120%;
  font-style: italic;
}

.del
{
  -moz-user-select: none;
  font-size: 22px;
  position: absolute;
  left: 183px;
  float: right;
  display: none;
  padding: 2px 5px 0 0;
} 
```

问题是，使用此代码，整个注释可以缩放，但是在缩放完成后，文本（在 p 和 span 中）会稍微调整一下自身的大小（我不知道，大约 1-2px），它看起来真的很糟糕。从 'ul li a' 中删除 -moz-transition 解决了这个问题，但是缩放根本不平滑。你们有没有遇到过类似的问题？我也试过这个：

```
-moz-transition: -moz-transform 0.2s ease;
-moz-transition: font-size 0.2s ease; 
```

但这无济于事。有没有办法在没有“跳跃”文本的情况下使用 css 转换比例？我现在不想使用 jQueryUI，因为它只用于这个简单的任务太重了。

这是为此的jsfiddle： [Notes](http://jsfiddle.net/ZzPMf/)

当然，您必须从 firefox 运行它才能观察到问题。在 chrome 上它工作正常 AFAIK。

更新：我必须在 FF8.0 下运行它，但我已经安装了 13.0.1，并且这个故障在那里也可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:14:37.880

只需将字体大小从 105% 更改为 100%。

```
ul li a:hover
  {
    -moz-box-shadow: 10px 10px 7px black;
    -webkit-box-shadow: 10px 10px 7px black;
    -moz-transform: scale(1.1);
    -webkit-transform: scale(1.1);
    font-size: 100%;
    position: relative;
  } 
```

# svn - AnkhSVN 活锁？

> ID：11135579
> 
> 赞同：3
> 
> 时间：2012-06-21T09:46:46.087
> 
> 标签：svn, ankhsvn

我们最近开始为 Visual Studio 使用 AnkhSVN 颠覆插件。一切正常，但我们有一点问题。

当我的一位同事锁定某个文件时，我无法提交我对该文件所做的更改。这不一定是问题，但我们想知道是否可以执行以下操作：

X 人锁定了一个文件 --> Y 人在 Visual Studio 中自动看到他无法编辑该文件，因为它已被其他人锁定。现在我们必须“手动”询问对方是否锁定了某个文件，因为插件没有显示红色！东西标志或其他文件是否被锁定。这有点烦人，因为我可能已经在一个文件上工作了一个小时，却发现我无法提交更改，因为该文件已被其他人锁定。

这可以使用 AnkhSVN，还是我需要求助于其他解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T20:00:14.373

使用 Subverison（任何类型），当有二进制文件要修改时，锁定很有用。

在这种情况下，步骤应该是：

1.  锁定二进制文件
2.  调整
3.  犯罪

如果其他人锁定了文件，您锁定文件的尝试将失败，并且您将知道不要进行任何修改，并且应该要求其他用户在完成时提醒您。

如果这是一个文本文件，则不需要锁定，因为您可以（通常）轻松合并更改。

[SVN Book，第 3 章。高级主题：锁定](http://svnbook.red-bean.com/en/1.8/svn.advanced.locking.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T08:35:25.580

您可以设置颠覆属性“svn:needs-lock”。这样，当您尝试编辑文件时，您需要锁定文件。

# wpf - 将输入表单更改为显示表单

> ID：11135580
> 
> 赞同：1
> 
> 时间：2012-06-21T09:46:56.623
> 
> 标签：wpf, xaml

一些上下文：

*   用户将数据输入到具有多个输入控件（标准文本框、组合框等）的窗口中。

*   用户以-readmode- 显示先前输入的数据打开相同的窗口。

当然，输入表单很简单，对于读取模式，我可以使用 IsEnabled 依赖属性来禁用输入控件。

是否可以使用带触发器的样式将所有**输入控件**替换为**标签？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:14:06.870

当 IsReadOnly 为真时，这会将所有 TextBoxes 转换为 TextBlocks。正如您所猜到的，样式上有一个触发器可以更改控件模板。

```
<Window x:Class="SO_Xaml_ReadOnlyInputForm.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <Grid>
        <Grid.Resources>

            <Style TargetType="TextBox">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding IsReadOnly}"
                                 Value="True">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="TextBox">
                                    <TextBlock Text="{TemplateBinding Text}"
                                               Width="{TemplateBinding Width}" />
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>

        </Grid.Resources>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />          
        </Grid.RowDefinitions>

        <CheckBox Grid.Row="0"
                  IsChecked="{Binding IsReadOnly}"
                  Content="Is Read-only?" />
        <StackPanel Grid.Row="1"
                    Orientation="Horizontal">
            <TextBlock>Item1</TextBlock>
            <TextBox Text="{Binding Item1Text}"
                     Width="100" />
        </StackPanel>
    </Grid>
</Window> 
```

# VIEWMODEL 类

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Practices.Prism.ViewModel;
using Microsoft.Practices.Prism.Commands;

namespace SO_Xaml_ReadOnlyInputForm
{
    public class ViewModel : NotificationObject
    {
        private string _itemText;
        private bool _isReadOnly;

        public string Item1Text
        {
            get { return _itemText; }
            set
            {
                _itemText = value;
                RaisePropertyChanged(() => Item1Text);
            }
        }

        public bool IsReadOnly
        {
            get { return _isReadOnly; }
            set
            {
                _isReadOnly = value;
                RaisePropertyChanged(() => IsReadOnly);
            }
        }

        public ViewModel()
        {
            Item1Text = "This is the text";
        }
    }
} 
```

# iphone - 如何在 ios4 中以编程方式将图像数组添加到 UIImage 视图？

> ID：11135583
> 
> 赞同：5
> 
> 时间：2012-06-21T09:47:01.073
> 
> 标签：iphone, ios, xcode, uiimage, icarousel

我需要在单个视图中显示图像数组，这些图像在 icarousel 中具有各种效果（时间机器、coverflow 等...）我将使用必须显示所有图像的单一样式.. 这是我的代码.M 文件..

```
UIImage *img=[[UIImageView alloc]initWithFrame:CGRectMake(30, 30, 290, 400)];
NSLog(@"hi");

img.image=[NSArray arrayWithObjects:[UIImage imageNamed:@"Cover_0.png"],
                      [UIImage imageNamed:@"Cover_1.png"],
                      [UIImage imageNamed:@"Cover_2.png"],
                      [UIImage imageNamed:@"Cover_3.png"],
                      [UIImage imageNamed:@"Cover_4.png"],
                      [UIImage imageNamed:@"Cover_5.png"],
                      [UIImage imageNamed:@"Cover_6.png"],
                      [UIImage imageNamed:@"Cover_7.png"],nil]; 
```

但它不起作用......任何人都可以帮助它......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T09:53:00.747

更新：根据您的最新编辑，您的问题完全改变了，因此我的回答不适用。

* * *

改用`animationImages`：

```
UIImageView *img=[[UIImageView alloc]initWithFrame:CGRectMake(30, 30, 290, 400)];
img.animationImages=[NSArray arrayWithObjects:[UIImage imageNamed:@"Cover_0.png"],
                      [UIImage imageNamed:@"Cover_1.png"],
                      [UIImage imageNamed:@"Cover_2.png"],
                      [UIImage imageNamed:@"Cover_3.png"],
                      [UIImage imageNamed:@"Cover_4.png"],
                      [UIImage imageNamed:@"Cover_5.png"],
                      [UIImage imageNamed:@"Cover_6.png"],
                      [UIImage imageNamed:@"Cover_7.png"],nil]; 
```

* * *

来自[UIImageView 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIImageView_Class/Reference/Reference.html)；

```
animationImages 
```

用于动画的 UIImage 对象数组。

```
@property(nonatomic, copy) NSArray *animationImages 
```

> 讨论 该数组必须包含 UIImage 对象。您可以在数组中多次使用相同的图像对象。将此属性设置为 nil 以外的值会隐藏由 image 属性表示的图像。此属性的值默认为 nil。

可用性 适用于 iOS 2.0 及更高版本。另请参见 @property image @property contentMode (UIView) 在 UIImageView.h 中声明

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T09:56:09.043

你有没有尝试过

```
 NSArray *frames = [NSArray arrayWithObjects:
   [UIImage imageWithName:@"a.png"],
   [UIImage imageWithName:@"b.png"],
   [UIImage imageWithName:@"c.png"],
   [UIImage imageWithName:@"d.png"],
   [UIImage imageWithName:@"e.png"],
   nil];

   UIImageView *animatedIMvw = [[UIImageView alloc] init];
   animatedIMvw.animationImages = frames;
   [animatedIMvw startAnimating]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T09:54:33.093

看看这个简单的例子：[http ://appsamuck.com/day2.html](http://appsamuck.com/day2.html)

编辑

主页似乎坏了，所以请检查一下：

[http://web.archive.org/web/20090207210729/http://appsamuck.com/day2.html](http://web.archive.org/web/20090207210729/http://appsamuck.com/day2.html)

# perl - 使用 perl 从远程主机读取文件

> ID：11135588
> 
> 赞同：1
> 
> 时间：2012-06-21T09:47:24.120
> 
> 标签：perl, remote-file-inclusion

我正在尝试从 ubuntu 机器读取位于同一 LAN 中远程主机（ubuntu）上 /root 目录下的文件（temp.txt）。（ssh 和 ftp 已打开） perl 脚本能够连接并出现 OpenSSH 对话框要求密码，然后程序存在。请任何人帮助..以下是我的脚本。

```
use POSIX qw(strftime);
use strict;
use warnings;

use File::Remote;
 my $remote = new File::Remote;

# Standard filehandles
$remote->open(FILE, ">>X.X.X.X:/root/temp.txt") or die $!;
print FILE "Here's a line that's added.\n";
$remote->close(FILE); 
```

执行时出现以下错误。

```
Bareword "FILE" not allowed while "strict subs" in use at /root/Desktop/test.pl line 10.
Bareword "FILE" not allowed while "strict subs" in use at /root/Desktop/test.pl line 12.
Execution of /root/Desktop/test.pl aborted due to compilation errors. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:54:51.107

您必须安装 sh open keys 才能在没有密码的情况下访问 XXXX。

```
$ ssh-keygen
$ ssh-copy-id -i ~/.ssh/id_rsa.pub X.X.X.X 
```

您可以尝试使用 ssh 访问主机：

```
$ ssh X.X.X.X 
```

并请添加类似

```
local *FILE; 
```

在文件的开头摆脱这些关于裸字的警告。

# redirect - 301 在 Facelets 中为 SEO 重定向 jsessionid 链接？

> ID：11135594
> 
> 赞同：0
> 
> 时间：2012-06-21T09:47:31.783
> 
> 标签：redirect, jsf-2, seo, facelets, jsessionid

在我了解 Google 不太关心 JSessionID 之前，我允许在我的 Facelets 应用程序中重写 URL（默认的 Tomcat 行为）。对于那些还不知道的人，谷歌在 SEO（你的 URL 上的会话 ID）方面不喜欢这样，我已经在 web.xml 中包含以下内容来纠正这个问题：

```
<session-config>
    <tracking-mode>COOKIE</tracking-mode>
</session-config> 
```

问题是我有很多`500`来自过时链接的错误，这些错误会损害我的 SEO，因为网站引用了这些 jsession ID 的过时链接，例如：

```
http://thejarbar.org/views/tutorials/linux/Netbeans-    
Install.xhtml;jsessionid=8D0EF52E48E8BB8BF8A4D7E33F831EFF 
```

通过创建重定向到更新链接的页面，我已经轻松修复了带有 html 或 xhtml 后缀的页面名称的几个错误，但我遇到的问题是我无法创建带有会话 ID 后缀的文件名，因为这不会由 Tomcat 提供服务。

重定向无效的 HTML 链接就像在相关目录中创建一个普通的 (X)HTML 页面并包含如下元标记一样简单（示例）：

*   死链接指向`.../Maven-Setup.xhtml`
*   `Maven-Setup.xhtml`在引用位置创建替换
*   在替换中，我只是添加`<meta http-equiv="REFRESH" content="0;url=http://thejarbar.org/views/tutorials/linux/Maven- Setup-Tutorial-for-Linux-with-the-Jar-Bar-and-Yucca-Nel.xhtml"></meta>`

如何根据带有会话 ID 的过时 url 重定向请求？我显然倾向于保留这些链接，因为它们可能（或可能不会）为我的网站带来流量，因此我想重定向。

**更新**我创建了一个 redirect.jsp，目的是在 web.xml 中映射一个 url 模式，以将所有传入的 jsessionid 请求转发到我的新“no jsession”站点：

```
<servlet>
    <servlet-name>redirect</servlet-name>
        <jsp-file>/redirect.jsp</jsp-file>
    </servlet>

    <servlet-mapping>
        <servlet-name>redirect</servlet-name>
        <url-pattern>/*jsessionid*</url-pattern>
    </servlet-mapping> 
```

这不是转发带有 jsession id 的请求，我已经测试`redirect.jsp`了哪个转发正确。

**更新**根据 Balusc 的建议和我在[这里](http://www.skillipedia.com/howto.hm?rid=297)找到的另一个过滤器，我想出了这个似乎不适用于重定向到我的新站点的方法：

```
package org.thejarbar.web.filters;

import java.io.*;
import java.util.HashMap;
import java.util.Map;
import java.util.regex.Pattern;
import javax.servlet.*;
import javax.servlet.http.*;

public final class JSessionFilter implements Filter {

    public void init(FilterConfig filterConfigObj) {

    }

    public void doFilter(ServletRequest _req, ServletResponse _res,
                         FilterChain chain) throws IOException, ServletException {
        HttpServletRequest req = (HttpServletRequest) _req;
        HttpServletResponse res = (HttpServletResponse) _res;
        String url =req.getRequestURL().toString();

        if(Pattern.compile(Pattern.quote(url), Pattern.CASE_INSENSITIVE).matcher("jsessionid").find()){

            String redirectURL = "http://thejarbar.org";
            res.setStatus(301);
            res.setHeader("Location",redirectURL);
            res.setHeader( "Connection", "close" );
            res.sendRedirect(redirectURL);
        }

        chain.doFilter(req, res);
    }

    public void destroy() { }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:57:48.383

根据上面 BalusC 的回答和我在[这里找到的帖子，我终于得到了一个过滤器来解决我的问题](http://www.skillipedia.com/howto.hm?rid=297)

我的过滤器是这样实现的：

```
package org.thejarbar.web.filters;

import java.io.*;
import java.util.regex.Pattern;
import javax.servlet.*;
import javax.servlet.http.*;

public final class JSessionFilter implements Filter {

    public void init(FilterConfig filterConfigObj) {

    }

    public void doFilter(ServletRequest _req, ServletResponse _res,
        FilterChain chain) throws IOException, ServletException {
        HttpServletRequest req = (HttpServletRequest) _req;
        HttpServletResponse res = (HttpServletResponse) _res;
        String url =req.getRequestURL().toString();

        if(url.indexOf(";jsessionid=")>0 || 
            url.indexOf("views/tutorials/linux/Maven-Setup.xhtml") > 0 ||
            url.indexOf("views/tutorials/windows/VirtualBox-Setup.xhtml") > 0 ||
            url.indexOf("views/tutorials/windows/Path-Setup.xhtml") > 0 ||
            url.indexOf("views/tutorials/windows/PATH-Setup.xhtml") > 0 ||
            url.indexOf("views/tutorials/linux/Netbeans-Install.xhtml") > 0) {
            String redirectURL = "http://thejarbar.org";
            res.setStatus(res.SC_MOVED_PERMANENTLY);
            res.setHeader("Location",redirectURL);
            res.setHeader( "Connection", "close" );
            return;
        }

        chain.doFilter(req, res);
    }

    public void destroy() { }
} 
```

这将我的每个过时的链接链接到更新的站点。

# eclipse - 如何从 Eclipse 项目中创建 WAR，同时缩小所有 css 和 js 文件？

> ID：11135603
> 
> 赞同：3
> 
> 时间：2012-06-21T09:48:08.960
> 
> 标签：eclipse, maven, ant, eclipse-plugin, minify

我在 Eclipse 中有一个动态 Web 项目，想知道是否有一种方法可以创建 WAR 并在两者之间缩小我的所有`js`文件`css`。

假设我的项目文件结构是

```
iscCSM
    |
    |
    infa9
    |
    |
    csm--ACProxy--include--acproxy--js
    | | |
    | css *.js
    | |
    | *.css
    |
    |
    |
    视图--包含--js--自定义
    | | | |
    *.html | *.js *.js
    *.jsp css
            |
            *.css
```

**更新**

谷歌搜索后，我得到了这个 maven 插件[Cactus](https://github.com/nbabinski/Cactus#in-downloads-cactus-pluginjar-was-built-using-maven-3-so-to-use-it-you-need-to-have-3rd-maven-version-but-you-can-easily-build-source-code-using-any-maven-version-starting-from-2-and-it-will-be-working)，但是我在配置 pom.xml 文件以使用同一[教程](https://github.com/nbabinski/Cactus#in-downloads-cactus-pluginjar-was-built-using-maven-3-so-to-use-it-you-need-to-have-3rd-maven-version-but-you-can-easily-build-source-code-using-any-maven-version-starting-from-2-and-it-will-be-working)中给出的 cactus 插件时遇到问题有人可以帮我修改哪个 pom.xml 吗？

我按照教程，到达了`BUILD SUCCESS`出现字符串的阶段，但我无法继续前进。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T11:27:03.810

Java 的 Web 资源优化器 (wro4j) 是您正在寻找的 [http://code.google.com/p/wro4j/](http://code.google.com/p/wro4j/)。

它支持 js、css minifcation，具有多个 minificators 实现，还支持 less、sass 和 coffeescript 处理器。

您可以将其用作：

*   maven插件
*   独立应用程序
*   作为您的 Web 应用程序中的库作为 ServletFilter - 这是在开发过程中使用的不错的功能。

# android - Titanium：如何在 2 个窗口之间向左/向右或向上/向下滑动

> ID：11135606
> 
> 赞同：1
> 
> 时间：2012-06-21T09:48:12.737
> 
> 标签：android, titanium, titanium-mobile

我有一个问题要解决。我有一天研究，但我还不能解决。我想将当前打开的窗口向左滑动，并将一个新窗口从右侧滑动到屏幕上。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T09:56:37.900

您需要一个事件来触发此动画，可能是点击按钮或只是窗口上的滑动事件。在这种情况下，您只需为 2 窗口的 left 属性设置动画，如下所示：

```
var win1 = Ti.UI.createWindow({
    top: 0,
    left: 0,
    width: 320,
    height: 480
});

var win2 = Ti.UI.createWindow({
    top: 0,
    left: 320,
    width: 320,
    height: 480
});

win1.addEventListener('swipe', function(){
    var anim1 = Ti.UI.createAnimation({
        left: -320,
        duration: 1000
    });
    var anim2 = Ti.UI.createAnimation({
        left: 0,
        duration: 1000
    });
    win1.animate(anim1);
    win2.animate(anim2);
}); 
```

# c# - 为什么我需要用 EntryPoint 属性定义 DLLImport

> ID：11135607
> 
> 赞同：7
> 
> 时间：2012-06-21T09:48:15.043
> 
> 标签：c#, c++, pinvoke

在浏览[Swig](http://www.swig.org/)生成的包装器时，我发现 PInvokes 没有定义任何入口点，但有些地方确实有入口点。那么它们之间有什么区别呢？什么时候需要定义一个入口点，什么时候不需要？

没有定义`EntryPoint`：

```
[DllImport("Kernel32.dll", CharSet = CharSet.Unicode)]
public static extern bool ReadFile(
        HandleRef hndRef,
        StringBuilder buffer,
        int numberOfBytesToRead,
        out int numberOfBytesRead,
        int flag); 
```

定义为`Entrypoint`：

```
[DllImport("Kernel32.dll", CharSet = CharSet.Unicode, EntryPoint = "ReadFile")]
public static extern bool ReadFile2(
        HandleRef hndRef,
        StringBuilder buffer,
        int numberOfBytesToRead,
        out int numberOfBytesRead,
        Overlapped2 flag); 
```

另外为什么函数必须`static`像 in 一样`public static extern`？我假设这`extern`告诉编译器这个方法是在外部定义的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T09:52:26.473

该[`EntryPoint`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.entrypoint.aspx)字段用于告诉 .NET 运行时从被调用的 DLL 中调用哪个函数；如果未设置，则默认名称与 .NET 方法声明的名称相同。在您的第二个示例中，省略`EntryPoint = "ReadFile"`将导致运行时尝试调用名为`ReadFile2`（不存在）的函数。

原型需要有`static`and[`extern`](http://msdn.microsoft.com/en-us/library/e59b22c5.aspx)修饰符，因为[规范](http://msdn.microsoft.com/en-us/library/26thfadc.aspx)是这么说的。它不需要是`public`；控制方法的可见性完全取决于您。

# php - mod重写css问题

> ID：11135611
> 
> 赞同：2
> 
> 时间：2012-06-21T09:48:32.737
> 
> 标签：php, css, mod-rewrite

我是使用 mod rewrite 的新手，但如果我不在根目录中，我所有的 css 和图像都会出错

我有这个作为我的 .htaccess 文件

```
RewriteEngine On
RewriteBase /test2/

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.*)$ index.php?url=$1 [QSA,NS] 
```

和

这是我的 css 文件的链接

```
<link rel="stylesheet" type="text/css" href="style.css" /> 
```

谁能帮忙？

干杯马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:53:21.830

您应该使用绝对路径：

```
<link rel="stylesheet" type="text/css" href="/style.css" /> 
```

或者

```
<link rel="stylesheet" type="text/css" href="//mysite.com/style.css" /> 
```

否则，您的浏览器会在您当前访问的同一路径中搜索样式表。因此，如果您访问 /news/article/1，您的浏览器会请求 /news/article/1/style.css，但它显然无法在那里找到它。

# android - 我应该使用 HTML5 还是原生代码在应用内创建提要？

> ID：11135612
> 
> 赞同：1
> 
> 时间：2012-06-21T09:48:33.237
> 
> 标签：android, html, memory, native

我们正在构建一个新的 Android 应用程序，其中包含一些 Facebook/Instagram 之类的提要。我想听听您对如何实现提要的意见 - HTML5 或 Native。

如果我在 Android 中使用本机代码，我将不得不管理提要中图片的内存，但内存仍然有限，不足以容纳大约 15-20 张图片（我们很容易需要更多），而不是你得到 OutOfMemoryException。

如果我使用 HTML5，内存问题不是问题吗？我知道将会出现跨平台就绪提要。

请随时发表您对这种情况的见解。

正如我所听说的，Facebook 和 Instagram 在本机应用程序中使用 HTML5 提要。

谢谢你们！

# database - 多用户 Web 应用程序的数据库结构

> ID：11135615
> 
> 赞同：2
> 
> 时间：2012-06-21T09:48:41.823
> 
> 标签：database, design-patterns

我正在进行一个具有学习目的的项目。由于这个项目因其主题而对我很有吸引力，我想建立良好的基础，并可能最终将其投入使用。

由于我的项目非常复杂，为了向您解释我的问题，我将使用一个虚构的项目，它是一个议程应用程序。

这个 Web 应用程序将有一个日历，用户可以在其中添加事件和提醒。假设有 10,000 个用户使用它，而这 10,000 个用户将添加数千个事件和提醒。

我的问题是您会推荐与数据库结构相关的两种方法中的哪一种？

*   我是否应该为每个用户（在用户创建时）创建一个带有提醒和事件表的单独数据库，并将数据库与单独数据库中的用户相关联
*   或者我应该为事件制作一张表，一张用于提醒，一张用于用户，并在单个数据库中将它们相互关联？

到目前为止，我还没有做过任何多用户 Web 应用程序，而且对于许多用户，我不熟悉数据库结构方法。如果有任何你想到的设计模式，我会很感激分享:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T09:51:45.437

这是我的看法：

1.  不，您不应该*为*每个用户创建单独的数据库。它无法扩展。意思是每次添加用户都要新建一个数据库？绝不。
2.  一个数据库，多个用户——这就是关系数据库的诞生。

10,000 个用户并不是一个庞大的受众。每个创建数千个事件和提醒意味着 1000 万个事件，1000 万个提醒。这不被视为大型关系数据库。

您可能需要担心分区和清除旧记录。您将制定什么样的政策来保留这些事件和提醒？一年后用户将拥有什么访问权限？5年？十年？这些也是值得思考的好话题。

获取一本关于实体/关系建模的好书并仔细阅读。亚马逊上的任何现代产品都可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T15:43:10.113

我曾经使用一个数据库，其中每个用户数据都保存在一个单独的数据库中（您的选项 1），并且相信我这是一场噩梦，公司花费了大量资源将所有这些数据库整合到一个数据库中，并且这不是一件容易的事。

正如@duffymo 所说，一个数据库/多个用户就是关系数据库的用途。

# jquery - jQuery进度条值未设置

> ID：11135616
> 
> 赞同：2
> 
> 时间：2012-06-21T09:48:47.210
> 
> 标签：jquery, progress-bar

我想我在这里遗漏了一些非常明显的东西......一定是......但由于某种原因，我无法让我的进度条显示在属性中设置的值！

这是我的html：

```
<div class="progressBar" data-value="58"></div> 
```

和js：

```
$(function () {
    $('.progressBar').each(function () {
        $(this).progressbar();
        //var value = $(this).attr('data-value');
        //alert(value);
        $(this).progressbar('option', 'value', $(this).attr('data-value'));
    });
}); 
```

它显示条形图，但不显示任何值（即值 = 0）。如果我将一个值硬编码到 js 中，它显示得很好。如果我取消注释 var 值和警报行，我会收到带有该值的警报。我错过了什么？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:50:29.300

您必须将 attr 解析为 int ：

```
$(this).progressbar('option', "value", parseInt($(this).attr('data-value'), 10)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T09:53:04.540

**工作演示** [http://jsfiddle.net/WQnqS/](http://jsfiddle.net/WQnqS/) **或** [http://jsfiddle.net/WQnqS/1/](http://jsfiddle.net/WQnqS/1/)

**代码**

```
$(function () {
    $('.progressBar').each(function () {
        $(this).progressbar();
        //var value = $(this).attr('data-value');
        //alert(value);
        $(this).progressbar('option', 'value', parseInt($(this).attr('data-value')));
    });
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T09:52:16.810

尝试这个：

```
$(this).progressbar('option', 'value', parseInt($(this).data('value'),10)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-29T07:11:54.127

以防万一，我们没有得到第一次尝试。试试这样：

```
$(function () {
  $('.progressBar').each(function () { 
    var thisValue = parseInt($(this).attr('data-value')); 
    $(this).progressbar({ value: thisValue });
  });
}); 
```

# xpath - 如何使用 xpath 获取嵌套最深的元素节点？（用 XMLTWIG 实现）

> ID：11135620
> 
> 赞同：4
> 
> 时间：2012-06-21T09:49:07.527
> 
> 标签：xpath, xquery, xslt-2.0, xpath-2.0, xml-twig

我需要使用**方法(DEST id="** **RUSSIA** " method="delete"/>) 和他的直接祖先 (SOURCE id="AFRICA"方法=“修改”>）。

 **我不想使用方法（ main method="modify"> 或 main method="modify"> ）获取顶级节点。

具有方法的最深嵌套元素对应于实际动作。具有方法的顶部元素实际上是不能考虑的虚拟动作。

这是我的 XML 示例文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<main method="modify">
<MACHINE method="modify">  
  <SOURCE id="AFRICA" method="modify">
    <DEST id="RUSSIA" method="delete"/>
    <DEST id="USA" method="modify"/>
  </SOURCE>

  <SOURCE id="USA" method="modify">
    <DEST id="AUSTRALIA" method="modify"/>
    <DEST id="CANADA" method="create"/>
  </SOURCE>
</MACHINE>
</main> 
```

这是我期望的 Xpath 输出：

```
<SOURCE id="AFRICA" method="modify"><DEST id="RUSSIA" method="delete"/>

<SOURCE id="AFRICA" method="modify"><DEST id="USA" method="modify"/>

<SOURCE id="USA" method="modify"><DEST id="AUSTRALIA" method="modify"/>

<SOURCE id="USA" method="modify"><DEST id="CANADA" method="create"/> 
```

我当前的 xpath 命令没有提供足够的结果。

返回的命令 xpath("//[@method]/ancestor::*") ：

```
<main><MACHINE method="modify">                                        # NOT WANTED

<MACHINE method="modify"><SOURCE id="AFRICA" method="modify">          # NOT WANTED

<MACHINE method="modify"><SOURCE id="USA" method="modify">             # NOT WANTED

<SOURCE id="AFRICA" method="modify"><DEST id="RUSSIA" method="delete"/>

<SOURCE id="AFRICA" method="modify"><DEST id="USA" method="modify"/>

<SOURCE id="USA" method="modify"><DEST id="AUSTRALIA" method="modify"/>

<SOURCE id="USA" method="modify"><DEST id="CANADA" method="create"/> 
```

我的 xmltwig 代码以获取更多信息（上下文）：

```
#!/usr/bin/perl -w
use warnings;
use XML::Twig;
use XML::XPath;

@my $t= XML::Twig->new;
my $v= XML::Twig::Elt->new;
$t-> parsefile ('input.xml');

@abc=$t->get_xpath("\/\/[\@method]\/ancestor\:\:\*") ;
 foreach $v (@abc)   # outer 1
 {
    foreach $v ($v ->children)  # internal 1
    {
      $w=$v->parent;
      print $w->start_tag;
      print $v->start_tag;
    }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T11:59:58.573

可以找到具有最大深度的节点

```
//*[count(ancestor::*) = max(//*/count(ancestor::*))] 
```

但它可能会表现得很糟糕，这取决于你的优化器有多聪明。

找到这些节点后，找到它们的祖先当然是微不足道的。但是您正在寻找比 XPath 单独提供的结构更多的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:37:56.940

正如我在对该问题的评论中提到的那样，我认为纯 XPath 不可能做到这一点，因为 XPath 没有任何类似于`current()`允许引用`[]`限制之外的上下文的函数。

最相似的解决方案应该是这个 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ZD="http://xyz.abc">
    <xsl:output method="text"/>

    <xsl:template match="//*">
        <xsl:choose>
            <xsl:when test="not(//*[count(ancestor::node()) > count(current()/ancestor::node())])"><xsl:value-of select="local-name(.)"/><xsl:text>
</xsl:text></xsl:when>
            <xsl:otherwise>
                <xsl:copy>
                    <xsl:apply-templates select="@*|node()"/>
                </xsl:copy>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <xsl:template match="text()|@*"/>
</xsl:stylesheet> 
```

`<xsl:when>`元素查找嵌套最深的元素。例如，我输出找到的元素的本地名称，后跟换行符，但当然你可以在那里输出任何你需要的东西。

**更新：**请注意，这是基于 XPath 1.0 知识/工具。看来这确实可以在 XPath 2.0 中表达。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T13:19:39.323

**一种这样的 XPath2.0 表达式是**：

```
//*[not(*)
  and
   count(ancestor::*)
  =
   max(//*[not(*)]/count(ancestor::*))
   ]
     /(self::node|..) 
```

**用一个完整的 XSLT 2.0 示例来说明这一点：**

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:variable name="vResult" select=
     "//*[not(*)
        and
          count(ancestor::*)
       =
        max(//*[not(*)]/count(ancestor::*))
        ]
          /(self::node|..)
     "/>

 <xsl:template match="/">
     <xsl:sequence select="$vResult"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<main method="modify">
    <MACHINE method="modify">
        <SOURCE id="AFRICA" method="modify">
            <DEST id="RUSSIA" method="delete"/>
            <DEST id="USA" method="modify"/>
        </SOURCE>
        <SOURCE id="USA" method="modify">
            <DEST id="AUSTRALIA" method="modify"/>
            <DEST id="CANADA" method="create"/>
        </SOURCE>
    </MACHINE>
</main> 
```

**计算 XPath 表达式并将选定元素（最大深度的元素及其父元素）复制到输出**：

```
<SOURCE id="AFRICA" method="modify">
            <DEST id="RUSSIA" method="delete"/>
            <DEST id="USA" method="modify"/>
        </SOURCE>
<SOURCE id="USA" method="modify">
            <DEST id="AUSTRALIA" method="modify"/>
            <DEST id="CANADA" method="create"/>
        </SOURCE> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T10:43:03.207

样式表

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="/">
  <xsl:apply-templates 
     select="//DEST[@method and not(node())]"/>
</xsl:template>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="DEST[@method and not(node())]">
  <xsl:apply-templates select="..">
    <xsl:with-param name="leaf" select="current()"/>
  </xsl:apply-templates>
</xsl:template>

<xsl:template match="*[DEST[@method and not(node())]]">
  <xsl:param name="leaf"/>
  <xsl:copy>
    <xsl:copy-of select="@* , $leaf"/>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

变换

```
<?xml version="1.0" encoding="UTF-8"?>
<main method="modify">
<MACHINE method="modify">  
  <SOURCE id="AFRICA" method="modify">
    <DEST id="RUSSIA" method="delete"/>
    <DEST id="USA" method="modify"/>
  </SOURCE>

  <SOURCE id="USA" method="modify">
    <DEST id="AUSTRALIA" method="modify"/>
    <DEST id="CANADA" method="create"/>
  </SOURCE>
</MACHINE>
</main> 
```

进入

```
<SOURCE id="AFRICA" method="modify">
   <DEST id="RUSSIA" method="delete"/>
</SOURCE>
<SOURCE id="AFRICA" method="modify">
   <DEST id="USA" method="modify"/>
</SOURCE>
<SOURCE id="USA" method="modify">
   <DEST id="AUSTRALIA" method="modify"/>
</SOURCE>
<SOURCE id="USA" method="modify">
   <DEST id="CANADA" method="create"/>
</SOURCE> 
```**

# c# - 将光标移到 C# 中的文本框

> ID：11135624
> 
> 赞同：5
> 
> 时间：2012-06-21T09:49:27.077
> 
> 标签：c#, winforms, mouse-cursor

当我单击一个按钮时，我想将光标带到一个文本框。我怎样才能做到这一点？我尝试了 Focus() 方法，但它不起作用。代码如下所示。

```
CsNIPAddrTextBox.Focus();
CsNIPAddrTextBox.TabIndex = 1; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-02-17T03:53:51.630

试试`textbox1.select()`。这是将光标带到文本框的最佳方法。它还选择文本框的内容，这使用户更容易编辑文本框内的内容。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-21T09:56:02.393

如果那是一个“正确的”文本框（即不是自定义的），那么只需调用就`Focus()`可以了。但是，如果它是只读的，它可能不会（我不确定 - 我没有尝试过。我知道您可以在只读框中获得插入符号，这意味着它可以获得焦点）。当然，如果不是，`Enabled`那么您将无法设置焦点。

检查`CanFocus`属性是否为真 - 如果不是，则可能有其他原因阻止控件接收焦点。

但是，如果那是`true`，并且插入符号仍然无法到达控件 - 您需要验证它是否正在接收它。为文本框的[`GotFocus`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.gotfocus)事件添加一个事件处理程序并为其设置断点以阐明它是否被命中。我的猜测是你的断点会被击中。如果是这样 - 那么答案是在您单击按钮后，另一个进程立即将焦点设置到另一个控件。 *例如，如果您在验证事件处理程序中执行此类操作，您将获得类似的结果，因为在触发处理程序时 Windows 窗体管道已经在更改控件的过程中。*

另外 - 你为什么要设置`TabIndex=1`？通常`TabIndex`在设计时设置并单独放置（当然，除非这些是动态创建的）。除非您有*特定*的理由这样做，否则我会摆脱那条线。它与为什么这会/不会起作用无关 - 只是一个观察。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-21T09:53:35.127

再次编辑：

如果您尝试在 a`TextBox`的`Click`事件中选择 a `TreeView`，它通常会失败，因为在`Click`事件之后`TreeNode`将被选择，使您以前的`Focus()`或`Select()`无用的。可行的方法也许是在`Timer`.

```
Timer t = new Timer();
t.Interval = 10;
t.Tick += new EventHandler((s,ev)=>textBox2.Focus());
t.Start(); 
```

虽然这更像是一个黑客......

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-08-16T14:59:55.587

设置窗体的 ActiveControl 属性

```
ActiveControl = yourtextbox 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-21T10:27:44.107

您必须使用[TextBox.Select 方法](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.select.aspx)

例如

```
textbox1.Select(textbox1.Text.Length,0); 
```

将光标设置到您的文本框中文本的末尾。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-21T13:45:31.253

如果我没看错，您是在谈论将鼠标光标移动到文本框吗？- 然后你可以使用这样的代码：

```
System.Windows.Forms.Cursor.Position = 
     PointToScreen( 
            new Point( textBox1.Location.X + 5, textBox1.Location.Y + 5) 
     ); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-03-22T16:37:51.100

我知道你们中的许多人已经提供了答案，但这可能对一些无法从之前的回复中得到答案的人有用。这对我有用`Select()`，输入文本的设置已将光标设置为文本框。

在表单构造函数中有这个：

```
this.Activated += OnActivated; 
```

处理程序代码：

```
private void OnActivated(object sender, EventArgs eventArgs)
        {
            txtUser.Select();
        } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-08-14T21:49:58.117

如果`textbox.Multiline=true`和/或`textbox.WordWrap = true`，光标可能隐藏在字段的底部。

# php - 如何在不访问页面的情况下执行脚本

> ID：11135626
> 
> 赞同：0
> 
> 时间：2012-06-21T09:49:45.710
> 
> 标签：php, javascript, wordpress

我有一个包含数百个公司简介的 wordpress 网站。每家公司都有一个地址，当有人访问他们的个人资料时，该地址会被地理编码。目前这是地址获取地理编码的唯一方式，因此如果没有人访问该页面，则地址不会被地理编码。

这也产生了另一个问题，每次有人访问该页面时，它都会对地址进行地理编码！

我需要想出一种方法，为每家公司触发一次地理编码，但不必访问该页面。

有什么办法可以做到这一点？

更新：

这是当您访问公司简介（即地理编码）时触发的脚本。因此，对于 300 家公司，您需要访问所有 300 个页面才能对它们进行地理编码！

```
<?php 

require("database.php");
// Opens a connection to a MySQL server
$con = mysql_connect("localhost", $username, $password);

if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("medicom_wp", $con);

    $company = get_field('company_name');
    $address = get_field('address');
    $city = get_field('city');
    $post_code = get_field('post_code');

    $sql = sprintf("select count('x') as cnt from markers where `name` = '%s'", mysql_real_escape_string($company));
    $row_dup = mysql_fetch_assoc(mysql_query($sql,$con));
    if ($row_dup['cnt'] == 0) {
        mysql_query("INSERT INTO markers (`name`, `address`, `lat`, `lng`, `type`) VALUES ('".$company."', '".$address.", ".$city.", ".$post_code."', '0.0', '0.0', '')");
}
wp_reset_query();

define("MAPS_HOST", "maps.google.com");
define("KEY", "");

// Opens a connection to a MySQL server
$connection = mysql_connect("localhost", $username, $password);
if (!$connection) {
  die("Not connected : " . mysql_error());
}

// Set the active MySQL database
$db_selected = mysql_select_db($database, $connection);
if (!$db_selected) {
  die("Can\'t use db : " . mysql_error());
}

// Select all the rows in the markers table
$query = "SELECT * FROM markers WHERE 1";
$result = mysql_query($query);
if (!$result) {
  die("Invalid query: " . mysql_error());
}

// Initialize delay in geocode speed
$delay = 0;
$base_url = "http://" . MAPS_HOST . "/maps/geo?output=xml" . "&key=" . KEY;

// Iterate through the rows, geocoding each address
while ($row = @mysql_fetch_assoc($result)) {
  $geocode_pending = true;

  while ($geocode_pending) {
    $address = $row["address"];
    $id = $row["id"];
    $request_url = $base_url . "&q=" . urlencode($address);
    $xml = simplexml_load_file($request_url) or die("url not loading");

    $status = $xml->Response->Status->code;
    if (strcmp($status, "200") == 0) {
      // Successful geocode
      $geocode_pending = false;
      $coordinates = $xml->Response->Placemark->Point->coordinates;
      $coordinatesSplit = split(",", $coordinates);
      // Format: Longitude, Latitude, Altitude
      $lat = $coordinatesSplit[1];
      $lng = $coordinatesSplit[0];

      $query = sprintf("UPDATE markers " .
             " SET lat = '%s', lng = '%s' " .
             " WHERE id = '%s' LIMIT 1;",
             mysql_real_escape_string($lat),
             mysql_real_escape_string($lng),
             mysql_real_escape_string($id));
      $update_result = mysql_query($query);
      if (!$update_result) {
        die("Invalid query: " . mysql_error());
      }
    } else if (strcmp($status, "620") == 0) {
      // sent geocodes too fast
      $delay += 1000;
    } else {
      // failure to geocode
      $geocode_pending = false;
      echo "Address " . $address . " failed to geocoded. ";
      echo "Received status " . $status . "
\n";
    }
    usleep($delay);
  }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:52:23.717

假设你在服务器上做地理编码，那么为了解决每次查找数据的问题，只需缓存结果即可。

然后，您的逻辑将类似于：

```
if geocode in database
    get data from database
else
    get data from geocode lookup
    store data in database    
return data 
```

如果您真的想避免按需执行（即甚至不是第一次），那么当您保存页面时，请执行我在“其他”中所做的操作。

# asp.net - 在 MVC 路由中捕获传入的 Web 表单请求

> ID：11135627
> 
> 赞同：0
> 
> 时间：2012-06-21T09:49:52.490
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-routing

我正在将一个旧的 webforms 应用程序转换为 MVC，一次处理一个页面。为了使项目更易于使用，我将以前在项目路径中的所有 webforms 页面移动到 /webforms 子目录中。所以我需要捕获对/page.aspx?param=123 的任何传入请求，并将它们重定向到/webforms/page.aspx?param=123。我认为一个简单的方法是设置一个路由处理程序，将任何此类请求传递给执行该工作的控制器。我设置了这样的路线：

```
 routes.MapRoute("WebformsRedirect", "{*page}",
            new { controller = "Webforms", action = "ForwardToPage" },
            new { page = @"\S+.aspx\S*" }
        ); 
```

这种工作，但它不捕获查询字符串，只捕获页面部分。我可以在控制器中获取 Request 对象的查询字符串，所以这不是什么大问题，但如果能够仅通过路由来完成它会很好。我的路由单元测试（我从史蒂夫桑德森的 MVC 书中复制的）在我使用查询字符串测试它们时实际上正确通过了，所以我很困惑为什么它不起作用。我的正则表达式错了吗？他们不是我的强项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:31:29.643

QueryStrings 不是路由的一部分

例如，如果您请求`"Home/Index?foo=bar"`并且您有一个与`"Foo/Bar"`Controller匹配的路由`Foo`，则 Action`Bar`没有更多路由信息（对 foo 一无所知）您仍然可以编写

```
class HomeController: Controller {
  ActionResult Index(string foo) {

  }
} 
```

现在`foo`变量将相等`bar`，为什么？因为它是模型绑定器，它获取传递的参数值。

模型绑定器默认检查 4 个存储库 QueryString 、 Routing Place Holders 、FormsCollections 和 Files

所以我想说的是，路由和查询字符串是两个不同的东西，它不需要捕获它

# openlayers - 如何将 onClick 转换为在 OpenLayers 中悬停

> ID：11135633
> 
> 赞同：2
> 
> 时间：2012-06-21T09:50:13.970
> 
> 标签：openlayers

我在我的项目中使用 OpenLayers 地图，我在地图上显示项目列表。当用户单击项目（功能）时，项目描述将弹出而不是 onClick，我想转换为悬停。需要修改吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:24:31.473

我不确定您需要在哪里修改，因为您没有提供代码。[然而，下面是从此处](http://dev.openlayers.org/releases/OpenLayers-2.11/examples/highlight-feature.html)找到的 OpenLayers 示例中截取的片段。

```
 var report = function(e) {
            OpenLayers.Console.log(e.type, e.feature.id);
        };

        var highlightCtrl = new OpenLayers.Control.SelectFeature(vectors, {
            hover: true,
            highlightOnly: true,
            renderIntent: "temporary",
            eventListeners: {
                beforefeaturehighlighted: report,
                featurehighlighted: report,
                featureunhighlighted: report
            }
        }); 
```

所以我会冒险猜测您只需将该行添加`hover: true`到您的 SelectFeature 配置中，以完全选择您可以删除该行`highlightOnly: true`或将其更改为 false。此外，您的报告功能将包含用于显示弹出窗口的代码。

再次，不确定这是您需要做的，如果您发布代码，它会更容易提供帮助。

奥利

# android - 智能小部件更新（不定期）

> ID：11135634
> 
> 赞同：0
> 
> 时间：2012-06-21T09:50:15.450
> 
> 标签：android, service, android-service

嗯，我有一个有趣的问题。我有一个小部件，比如提醒，它在屏幕上显示了几个最近的项目。每个项目的时间，当它来临时。我只需要显示未来的项目，而不是通过的项目。由于至少每 30 分钟可以进行一次定期更新，这对我来说还不够（我的项目有 11.54、12.07 等）。所以我只有 1 个选项 = 安排一项服务，它可以在我想要的任何时间间隔（例如每 5 分钟）更新屏幕。

但这对我来说不是很好，因为我有 2 个要求，这两个要求有点相互冲突：

*   经常运行（<5 分钟）
*   不要使用过多的电池和其他资源

那么 - 是否有可能像智能更新一样？我的意思是例如算法，如：

a）设备解锁时每 1 分钟更新一次屏幕（=用户正在用手机做某事） b）但在设备睡眠时不更新（它没用，因为用户看不到更新结果）？

或者至少像“每 5 分钟运行一次，但仅在工作日的上午 8:00 到晚上 8:00 运行”之类的？简单的智能服务调度...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:02:15.717

> 所以我只有 1 个选项 = 安排一项服务，它可以在我想要的任何时间间隔（例如每 5 分钟）更新屏幕。

还有其他更有效的选择，例如`AlarmManager`.

> 是否有可能像智能更新一样？我的意思是例如算法

一种智能算法会认识到您只需要在列表更改时更新应用程序小部件，而不是每分钟、每秒或每毫秒更新一次。

用于`AlarmManager`在列表中的第一项之后设置一分钟的闹钟。当您从警报事件中获得控制权时，更新应用程序小部件，然后使用`AlarmManager`在您的列表中的下一次之后设置一分钟的警报。当列表从其他来源（例如，UI、同步过程）发生变化时，还要更新您的应用小部件，如果这可能导致您需要更早的警报，请取消当前警报并使用`AlarmManager`.

# xml - XQuery 嵌套循环的自动增量辅助索引变量

> ID：11135635
> 
> 赞同：1
> 
> 时间：2012-06-21T09:50:20.057
> 
> 标签：xml, loops, xpath, for-loop, xquery

我试图在 vars 中保存迭代次数，但如您所知，xQuery vars 是不可变的

有一个特殊的语法，比如

```
for $film at $i in doc('films.xml')/films/film
return <film>{$i}.{data($film/@title)}</film> 
```

我的问题是，当一个循环在另一个循环内时，如何保持绝对迭代的值。

```
for $film at $i in doc('films.xml')/films/film
for $goofs at $j in $film/goofs/goof
return **total_absolute_number_goof** 
```

我的意思是我不需要

```
i=1 j=1,2,3            i=1 j=1,2,3
i=2 j=1,2,3...  but    i=2 j=4,5,6 
```

有什么简单的方法可以在 xquery 中实现这一点吗？

编辑：java等价物

```
int j = 0;
for (;some_external_condition;) 
   for (;some_external_condition;j++) {}
//j would print number of total iterations 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:53:04.457

XQuery 3.0 中有一个特性可以做到这一点：

```
for $film at $i in doc('films.xml')/films/film
for $goofs at $j in $film/goofs/goof
count $k
return $k 
```

它已经被添加到一些 XQuery 处理器中，例如 Saxon-EE 9.4。

在 XQuery 1.0 中，我认为您需要两遍：首先创建电影列表，然后为它们编号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:47:05.910

好的，我不能使用 XQuery 3.0 的计数功能，所以我必须这样做：

```
 declare variable $array := ('a','b','c');
    declare variable $array2 := ('*','>',')');

    for $a at $c in $array
    for $b at $d in $array
    let $absIter := (($c - 1) * count($array)) + $d
    return $absIter 
```

印刷：

```
 1 2 3 4 5 6 7 8 9 
```

但它却以指数级复杂的方式增长......

```
 declare variable $array := ('a','b','c');
    declare variable $array2 := ('*','>');
    declare variable $array3 := ('*','>',')','ä');

    for $a at $d in $array
    for $b at $e in $array2
    for $c at $f in $array3
    let $absIter := (($d - 1) * count($array3) * count($array2)) + (($e - 1) * count($array3)) + $f
    return $absIter 
```

印刷：

```
 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 
```

问题是当子循环中的迭代次数并不总是相同时（即，从父循环中的 var 动态子选择）-> [XQuery 嵌套循环的自动增量辅助索引 var（w.动态计数）](https://stackoverflow.com/questions/11311618/autoincremental-auxiliar-index-var-for-xquery-nested-loops-w-dynamical-count)

# c# - 如何在 wpf 中动态更改 Windows 打印机 PrintableArea 的宽度和高度

> ID：11135636
> 
> 赞同：0
> 
> 时间：2012-06-21T09:50:24.710
> 
> 标签：c#, wpf

当打印出页面大小宽度=816.0，hieght=10560.0.现在我想减小这个大小。

```
 PrintDialog dialog = new PrintDialog();
    double _width = dialog.PrintableAreaWidth;
    double _hieght = dialog.PrintableAreaWidth;
    dialog.PrintVisual(this, "My Window"); 
```

使用此代码，我可以 _width=816.0 和 _hieght=10560.0。现在我想在 wpf 中动态更改 PrintableArea 的宽度和高度。我应该为此做些什么。

![在此处输入图像描述](../Images/10db9fc9e08f0ba9070541351138fcc1.png)

目前选择了SnagIt 8。如果我点击上图中的打印按钮。我将得到一张图像。该图像的尺寸宽度为 1200 像素，高度为 2128 像素。所以我需要更改此尺寸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:49:08.600

您需要创建一个自定义[DocumentPaginator](http://msdn.microsoft.com/en-us/library/system.windows.documents.documentpaginator.aspx)类，如在这个[SO 问题](https://stackoverflow.com/questions/584551/how-do-i-do-print-preview-when-using-a-documentpaginator-to-print)中（它是关于实现 PrintPreview）。并将其与[PrintDialog.PrintDocument](http://msdn.microsoft.com/en-us/library/system.windows.controls.printdialog.printdocument.aspx)方法一起使用。

# gwt - 当单元格中有长文本时，GWT CellTable#setColumnWidth() 不起作用

> ID：11135644
> 
> 赞同：0
> 
> 时间：2012-06-21T09:50:39.867
> 
> 标签：gwt, gwt-celltable

从[这个链接](https://stackoverflow.com/questions/4461749/gwt-celltable-set-column-width)作者建议：

```
table.setWidth("100%", true);
table.setColumnWidth(nameColumn, 35.0, Unit.PCT);
table.setColumnWidth(addressColumn, 65.0, Unit.PCT); 
```

为了使 CellTable 列宽起作用，但是在我的项目中`nameColumn`包含一个超长的文本，那么该列将占据几乎所有浏览器视图，显然列宽不起作用，有人可以对此有所了解吗？

`nameColumn`定义如下：

```
 TextColumn<Person> nameColumn = new TextColumn<Person>()
        {

            @Override
            public String getValue( Person object )
            {
                return object.getUserName();
            }
        }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:30:14.293

您可以使用以下方法在列单元格上设置自定义样式：

```
nameColumn.setCellStyleNames("name-cell"); 
```

为单元格生成（in ）以下结构`DOM`：

```
<td class="xxxxxxxx xxxxxx name-cell">
   <div style="outline:none;">Very long name ...</div>
</td> 
```

因此，您必须定义以下`css`类来设置所需的样式并限制单元格和文本大小：

```
.name-cell {
...
}

.name-cell div {
...
} 
```

**更新**

我测试了这个方法`table.setColumnWidth(`，对我来说效果很好。这是我的做法：

*   由 UI binder 构建的表

*   创建列

*   设置表格宽度

*   向表中添加列

*   设置列宽（带`table.setColumnWidth`）

当您计算单元格宽度时，不要忘记考虑填充。

*使用 GWT 2.4*

# php - 如何使用 jpg 的标题做出回声，但删除最后 3 个字符（jpg）？

> ID：11135646
> 
> 赞同：1
> 
> 时间：2012-06-21T09:50:59.480
> 
> 标签：php, mysql

我有一个页面显示一些产品，例如： - 标题 - 描述 - 图像

图像何时存储在其存储的表中，例如“image.jpg”......但我想让我的图像在上传时图像名称的标题将用作 html 标题的标题产品（title="echo here"）。因此，为了更容易，我将使用图像表并在图像中回显图像的名称，但我希望删除最后 3 个“.jpg”字符。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:53:20.960

该功能`basename`可以做到这一点：

```
$image = 'hello.jpg';
echo basename($image, '.jpg'); // 'hello' 
```

希望这可以帮助 ：）

**编辑**

请注意，这仅适用于带有`.jpg`扩展名的图像。如果您想更健壮并处理例如`.jpeg`或其他文件扩展名`.png`等，您可以执行以下操作：

```
echo substr($image, 0, strrpos($image, '.')); 
```

*   [http://php.net/manual/en/function.basename.php](http://php.net/manual/en/function.basename.php)
*   [http://php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)
*   [http://php.net/manual/en/function.strrpos.php](http://php.net/manual/en/function.strrpos.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T01:50:27.047

从 PHP 5.2 开始，您可以简单地执行此操作，这适用于任何扩展：

```
echo pathinfo($image, PATHINFO_FILENAME); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:53:43.437

```
substr($yourString, 0, -4); 
```

而你做的工作。

该`substr()`函数用于“剪切”字符串的某些部分。
在此示例中，您说“剪切”从位置 0（字符串的开头）开始，在位置 -4（扩展名和点符号的三个字符）结束。

如果您对`substr`他的行为感兴趣，请查看[该页面](http://php.net/manual/en/function.substr.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T09:54:58.313

您好使用explode功能摆脱扩展：

```
$imgParts = explode(".", "image.jpg");
$imageName = $imgParts[0]; 
```

# java - 如何在 Java 中从年份字符串创建 SimpleDate

> ID：11135648
> 
> 赞同：0
> 
> 时间：2012-06-21T09:51:29.930
> 
> 标签：java, parsing, datetime, date

我有一组字符串。这个字符串实际上是“年”。例如：`"1967"`, `"1872"`, `"2012"`,...

我想从其中的每一个中创建一个 SimpleDate 实例。有没有办法从一年的字符串创建一个 SimpleDate？

我对此有一个相当老套的解决方案，它附加`"-00-00"`到我的年份字符串并将其解析为一个 SimpleDate。我需要一种更简单的方法来做到这一点。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:00:35.300

我不确定，但也许你问这样的事情

```
SimpleDateFormat sdf=new SimpleDateFormat();
sdf.applyPattern("YYYY");
Date d=null;
try {
    d = sdf.parse("1999");
} catch (ParseException e) {
    e.printStackTrace();
}
System.out.println(d); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T10:02:24.280

```
 Calendar calendar = Calendar.getInstance();
    calendar.set(Integer.parseInt(year), 0, 1);          
    calendar.getTime(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:00:44.880

你可以使用`SimpleDateFormat`.

```
String str_date="1997";
Date date;
try {
  DateFormat formatter = new SimpleDateFormat("yyyy");
  date = (Date)formatter.parse(str_date);
} catch (ParseException e) { 
  // handle exception (date will be null)
} 
```

# asp.net-mvc-3 - 显示从客户端检测到潜在危险的 Request.QueryString 值（搜索 = 在我的控制器中，我在返回视图中为该特定操作提供了 [ValidateInput(false)] 我还附加了搜索关键字，我的搜索关键字也是< html 我的网址看起来像 domainname/Cl 问问题 问问题 2012-06-21T09:52:04.230 10066 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 在我的控制器中，我在返回视图中为该特定操作提供了 [ValidateInput(false)] 我还附加了搜索关键字，我的搜索关键字也是< html 我的网址看起来像 domainname/Clients?search=< html 在我看来 if (Request.QueryString.AllKeys.Contains("search")) { string search = Request.QueryString["search"].ToString(); } 然后显示错误 从客户端检测到潜在危险的 Request.QueryString 值 (search="< html")。 如何在我的剃刀视图中更正此错误？ 您需要requestValidationMode在 web.config 中将 设置为 2.0： <httpruntime requestvalidationmode="2.0">或者使用视图模型和[AllowHtml]属性，在这种情况下，您只允许给定属性使用这些字符： public class SearchViewModel { [AllowHtml] public string Search { get; set; } } 和控制器动作： public ActionResult Search(SearchViewModel model) { if (!string.IsNullOrEmpty(model.Search)) { string search = Model.Search; } ... } 在这种情况下，您既不需要[ValidateInput(false)]属性，也不需要requestValidationMode="2.0"web.config 中的 。 嘿，除此之外，您不再需要控制器操作中的魔术字符串 :-) 您正在直接使用模型。酷，不是吗？ asp.net-mvc-3razor 4 1 回答 1 This answer is useful 10 您需要requestValidationMode在 web.config 中将 设置为 2.0： <httpruntime requestvalidationmode="2.0">或者使用视图模型和[AllowHtml]属性，在这种情况下，您只允许给定属性使用这些字符： public class SearchViewModel { [AllowHtml] public string Search { get; set; } } 和控制器动作： public ActionResult Search(SearchViewModel model) { if (!string.IsNullOrEmpty(model.Search)) { string search = Model.Search; } ... } 在这种情况下，您既不需要[ValidateInput(false)]属性，也不需要requestValidationMode="2.0"web.config 中的 。 嘿，除此之外，您不再需要控制器操作中的魔术字符串 :-) 您正在直接使用模型。酷，不是吗？ 于 2012-06-21T10:31:45.073 回答 Related 1 eclipse - 我可以在 Eclipse 中复制粘贴插件文件夹吗？ 5 html - 仅使用 css 将图像内部容器元素垂直居中 2 arrays - Matlab：将数组与其他数组进行比较 4 regex - Reg ex 匹配两个标签之间的所有内容 5 android - 谷歌搜索链接在我的应用程序打开一个空白页面的 web 视图..！ 1 jquery - 我如何使用 chrome webcam API 和 processing.js 来操作视频？ 1 c - printf 打印不正确 0 java - 在瓷砖地图中移动；当它撞到地图中间时被垂直卡住 1 windows-ce - E_SCN_READINCOMPATIBLE 在 MC9090G 上扫描条形码时引发 通知错误 3 macos - 如何从 NSURL 获取路径/目录组件？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</httpruntime></httpruntime>

> ID：11135653
> 
> 赞同：2
> 
> 时间：
> 
> 标签：asp.net-mvc-3, razor

在我的控制器中，我在返回视图中为该特定操作提供了 [ValidateInput(false)] 我还附加了搜索关键字，我的搜索关键字也是**< html**

我的网址看起来像 **domainname/Clients?search=< html**

在我看来

```
if (Request.QueryString.AllKeys.Contains("search"))
{
 string  search = Request.QueryString["search"].ToString();
} 
```

然后显示错误

**从客户端检测到潜在危险的 Request.QueryString 值 (search="< html")。** 如何在我的剃刀视图中更正此错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T10:31:45.073

您需要`requestValidationMode`在 web.config 中将 设置为 2.0：

```
<httpRuntime requestValidationMode="2.0" /> 
```

或者使用视图模型和`[AllowHtml]`属性，在这种情况下，您只允许给定属性使用这些字符：

```
public class SearchViewModel
{
    [AllowHtml]
    public string Search { get; set; }
} 
```

和控制器动作：

```
public ActionResult Search(SearchViewModel model)
{
    if (!string.IsNullOrEmpty(model.Search))
    {
        string search = Model.Search;
    }

    ...
} 
```

在这种情况下，您既不需要`[ValidateInput(false)]`属性，也不需要`requestValidationMode="2.0"`web.config 中的 。

嘿，除此之外，您不再需要控制器操作中的魔术字符串 :-) 您正在直接使用模型。酷，不是吗？

# model-view-controller - 如何将另一个参数从 jquery ajax 传递给 mvc 控制器，以及 form.serialize()

> ID：11135657
> 
> 赞同：2
> 
> 时间：2012-06-21T09:52:21.460
> 
> 标签：model-view-controller, jquery, defaultmodelbinder

我使用一个名为 jscroller 的 jQuery 插件，它使用 jquery.ajax 来进行 ajax 调用。我需要从搜索表单中传递所有参数，并将它们传递给 mvc 控制器，我认为最好的方法是将以下 expr 放入“数据”字段：

```
$('#formId').serialize(); 
```

我的问题是我需要与表单值一起传递每次调用都会更改的“页面”值。

如何将页面值与“数据”字段中的“序列化”表达式一起放置，或者真的有另一种更有效的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T10:22:28.647

我认为

```
var formdata = $('#formId').serialize();
data: (formdata ? formdata + "&" : "") + "page=" + pageId 
```

会解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-19T22:16:05.713

您可以创建一个新的 FormData 并在该变量上添加参数

```
var formData = new FormData(); 
formData.append('pageId', pageId);

var your_form = $('#formId').serializeArray();
$.each(your_form,function(key,input){
   formData.append(input.name,input.value);
});

$.ajax({
    url: 'url_here',
    data: formData,
    contentType: false,
    processData: false,
    type: 'POST'
}); 
```

所以在 MVC 控制器上，您将能够访问

```
var pageId = Request.Form.Get("pageId"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-19T05:26:34.737

我知道我迟到了，但下面的代码对我有用。

```
var data = $('#Form').serialize() + '&test=' + number;
$.ajax({
    ....
    data: data; 
```

# iphone - “KashodhaniPhone”上的 iOS 版本不匹配任何支持使用此 iOS SDK 安装进行开发的 iOS 版本。

> ID：11135661
> 
> 赞同：1
> 
> 时间：2012-06-21T09:52:30.713
> 
> 标签：iphone, ios, ios4, xcode4

我完成了所有临时步骤，但我遇到了“ **Xcode 无法使用所选设备运行**”。此行下方是“**没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标**。”

当我要组织它显示黄色状态时，请有人帮助我，他在“KashodhaniPhone”上的 iOS 版本与此 iOS SDK 安装支持开发的任何 iOS 版本不匹配。请将设备恢复到以下列出的操作系统版本，或更新到最新版本的 iOS SDK；安装在 KashodhaniPhone 5.1.1 (9B206) 上的可用操作系统

Xcode 支持的 iOS 版本 最新 5.0 (9A334) 4.3 4.2 4.1 4.0.2 4.0.1 4.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:13:27.467

这些消息似乎表明您的手机上安装了 iOS 5.1.1，但您的 Xcode 版本仅支持 iOS 5.0 或更低版本。

如果您在“文档”下的“首选项”下载选项卡中没有看到“iOS 5.1 库”，那么您可能需要下载最新的开发人员工具。

![Xcode 首选项下载文档](../Images/e810d795156e19bfb87dbcd726da4f43.png)

# reporting-services - SSRS - 使用切换导出

> ID：11135663
> 
> 赞同：0
> 
> 时间：2012-06-21T09:52:38.973
> 
> 标签：reporting-services, export, report

我创建了一个报告并将其放入 RS，导出时有一个切换按钮可以查看其余列。

这仅在导出报告时发生。有没有办法从报表设计中删除切换按钮的大小？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:32:44.090

通过删除 ToggleItem 属性解决

# playframework - 如何让404页面不写错误日志？

> ID：11135670
> 
> 赞同：5
> 
> 时间：2012-06-21T09:53:02.887
> 
> 标签：playframework, playframework-1.x

在我们的理念中，错误日志总是由程序员错误引起的。

在 Play 1.2.x 的 prod 模式下，任何对不存在页面的访问都会触发错误日志：

```
ERROR (play) ~ 
MyController.myAction action not found
Action not found
Action MyController.myAction could not be found. Error raised is No method public static void myAction() was found in class controllers.MyController
play.exceptions.ActionNotFoundException: Action MyController.myAction not found
    at play.mvc.ActionInvoker.getActionMethod(ActionInvoker.java:604)
    at play.mvc.ActionInvoker.resolve(ActionInvoker.java:85)
    at Invocation.HTTP Request(Play!)
Caused by: java.lang.Exception: No method public static void myAction() was found in class controllers.MyController 
```

在这种情况下，如何将 Play 配置为不发出错误日志？最多可能是一个`WARN`日志级别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T22:19:35.070

记录此问题的代码位于 ActionInvoker.java(play 1.2.5RC4) 中：

```
catch (ActionNotFoundException e) {
            Logger.error(e, "%s action not found", e.getAction());
            throw new NotFound(String.format("%s action not found", e.getAction()));
        } 
```

所以似乎没有办法调整 ActionNotFoundException 的日志记录级别。我同意这不应该处于“错误”级别。我建议在[https://play.lighthouseapp.com/dashboard](https://play.lighthouseapp.com/dashboard)上开一张票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T22:37:24.907

虽然不是最优雅的解决方案，但您可以使用`ExpressionFilter`Apache log4j Extras 包中的类通过以下更改从默认错误日志中过滤这些异常：

**依赖项.yml**：

```
- log4j -> apache-log4j-extras 1.2.17:
    transitive: false 
```

**<记录>.conf**：

```
log4j.appender.<appender>.filter.1=org.apache.log4j.filter.ExpressionFilter
log4j.appender.<appender>.filter.1.expression=EXCEPTION ~= play.exceptions.ActionNotFoundException
log4j.appender.<appender>.filter.1.acceptOnMatch=false 
```

这还允许您通过创建新的 log4j 附加程序并反转`acceptOnMatch`上述规则中的属性以仅接受`ActionNotFound`异常日志记录，将这些特定消息重定向到单独的目标。

# sql - 从 Excel 电子表格中选择时替换 NULL 值

> ID：11135673
> 
> 赞同：0
> 
> 时间：2012-06-21T09:53:11.063
> 
> 标签：sql, asp-classic

我有以下选择语句：

```
`Dim rsGetInvoiceContact
 Dim rsGetInvoiceContact_numRows

 Set rsGetInvoiceContact = Server.CreateObject("ADODB.Recordset")
 rsGetInvoiceContact.ActiveConnection = MM_conn_to_EFACs_STRING_ap
 rsGetInvoiceContact.Source = "SELECT *   from "& ActinicPersons &" p  WHERE p.[Contact          ID] = " + Replace(rsGetInvoiceContact__vInvoiceID, "'", "''") + "" 
 rsGetInvoiceContact.CursorType = 0
 rsGetInvoiceContact.CursorLocation = 2
 rsGetInvoiceContact.LockType = 1
 rsGetInvoiceContact.Open()

 rsGetInvoiceContact_numRows = 0

 "& FormatStr(rsGetInvoiceContact.Fields.Item("Address Line 1").Value) + ", " +      (rsGetInvoiceContact.Fields.Item("Address Line 2").Value) &"',` 
```

稍后在我的脚本中，我将地址行 1 与地址行 2 相加。当地址行 2 具有 NULL 值时，就会出现问题。如何从 select 语句中替换它，以便如果只有地址行 1 有值，它仍将插入数据库而不是留下空白单元格。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:06:15.140

您可以添加一个 where 子句，例如“where addressline2 is not null”，或者在您的脚本中添加地址行使用类似这样的内容

```
adress = (adress1&"") & (adress2&"") 
```

这样你总是有一个字符串而不是一个空值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:28:43.157

您可以使用空处理函数，如 MySQL 或 SqlServer 的 coalesce() 函数。

```
adress = coalesce(adress1,"") & coalesce(adress2,"") 
```

您可以将第二个参数替换为预期的默认值。

# java - 无法解析的日期：“30-Jun-12”

> ID：11135675
> 
> 赞同：2
> 
> 时间：2012-06-21T09:53:20.663
> 
> 标签：java, date

我正在使用 Java 方法将日期转换为合适的格式：

```
private Timestamp toTimeStamp(String s) throws java.text.ParseException
    {
        Timestamp ts = null;
        java.util.Date date = null;
        if (s == null || s.trim().isEmpty()) return ts;

        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss.S");
        date = (java.util.Date) sdf.parse(s);
        ts = new Timestamp(date.getTime());

        return ts;

    } 
```

当我尝试执行表单时，出现此错误：

```
Unparseable date: "30-Jun-12" 
```

我尝试更改日期格式，但仍然收到此错误。你能帮我修一下吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T12:32:33.380

有2个问题：

1.  您的日期格式模式错误。`yyyy-MM-dd hh:mm:ss.S`永远无法`30-Jun-12`匹配。你需要`dd-MMM-yy`. 另请参阅[`SimpleDateFormat`javadoc](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。
2.  解析日/月名称时，请确保指定与日/月名称中使用的语言匹配的正确语言环境。您的系统默认语言环境似乎根本不是英语。

所以这应该这样做：

```
SimpleDateFormat sdf = new SimpleDateFormat("dd-MMM-yy", Locale.ENGLISH);
Date date = sdf.parse("30-Jun-12"); 
```

第三个问题，实际上更多是设计问题，您不应该`java.sql.Timestamp`在模型/业务层的任何地方使用（和其他 SQL 特定日期类型）（您最初标记了问题 JSF）。您应该只在数据层中使用它。改为使用`java.util.Date`并仅在您需要将其保留在数据库中的那一刻进行转换，就像这样

```
preparedStatement.setTimestamp(1, new Timestamp(date.getTime())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:09:19.023

您以格式传递日期，`30-Jun-12`那么您应该使用格式

```
dd-MMM-yy 
```

和`SimpleDateFormat`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-19T12:33:30.497

如果您开发 Web 应用程序并在浏览器中运行它，请尝试在浏览器设置中更改首选语言设置。不同的国家有不同的日期格式，欧洲国家和美国有很大的不同，所以在你的浏览器（例如 Firefox）中尝试：

```
Tools => Options => Content => Choose preferable language 
```

确保当您将应用程序集中在浏览器中时，任务栏上的语言栏会显示所需的语言。

如果 Web 应用程序不是这样：检查区域设置和首选语言设置。

# android - 安装下载的 .apk 文件时出现解析错误

> ID：11135680
> 
> 赞同：2
> 
> 时间：2012-06-21T09:53:32.443
> 
> 标签：android, android-layout, exception-handling

嗨，两周后，我再次开始研究并努力解决这个错误**解析错误：* *解析包有问题。

我的实施范围是尝试从我有更新的 apk 文件的服务器更新我的应用程序，并使用服务通过我的应用程序下载它。现在我可以从该服务器下载文件我可以手动安装它。但我的范围就像从服务器下载文件后它应该自动调用安装应用程序弹出窗口。安装时出现上述错误。我在问这个问题之前尝试过谁在这里问过同样的问题.

这是我的代码：

```
public class Myservice extends Service {
String versionName;

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();

}

@Override
public void onDestroy() {
    Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();

}

@Override
public void onStart(Intent intent, int startid) {
    try {
        versionName = getPackageManager().getPackageInfo(getPackageName(),
                0).versionName;
    } catch (NameNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

     DownloadFromUrl();

}

public void DownloadFromUrl() {  //this is the downloader method
      try {
              URL url = new URL("http://61.12.5.34:10140/test/UpateTest.apk");
              String  file ="YeldiUpateTest.apk";

              long startTime = System.currentTimeMillis();

              /* Open a connection to that URL. */
              URLConnection ucon = url.openConnection();

              /*
               * Define InputStreams to read from the URLConnection.
               */
              InputStream is = ucon.getInputStream();
              BufferedInputStream bis = new BufferedInputStream(is);

              /*
               * Read bytes to the Buffer until there is nothing more to read(-1).
               */
              ByteArrayBuffer baf = new ByteArrayBuffer(50);
              int current = 0;
              while ((current = bis.read()) != -1) {
                      baf.append((byte) current);

              }

              /* Convert the Bytes read to a String. */
              FileOutputStream fos = openFileOutput(file, Context.MODE_PRIVATE);
              Log.v("wsd", "write");
              fos.write(baf.toByteArray());
              fos.close();
              Log.d("Download time", "download ready in"
                              + ((System.currentTimeMillis() - startTime) / 1000)
                              + " sec");

              install();
      } catch (IOException e) {
              Log.d("ImageManager", "Error: " + e);
      }
 } 
```

这是我的安装方法（）：

```
void install()
{

     File path=getFileStreamPath("UpateTest.apk");

     Intent intent=new Intent(Intent.ACTION_VIEW);
     intent.setDataAndType(Uri.fromFile(path), "application/vnd.android.package-archive");
     intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
     startActivity(intent);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T05:09:52.520

最后我可以安装从我的服务器下载的apk，没有任何解析错误。我尝试使用外部存储，它没有任何错误发生。将apk存储在内部存储中并想要安装意味着你需要更改你的

```
FileOutputStream fos = openFileOutput(file, Context.MODE_PRIVATE) 
```

到**Context.MODE_WORLD_READABLE**。**我添加了类似INSTALL_PACKAGES**的权限。

# c# - 计算一个像素值

> ID：11135681
> 
> 赞同：0
> 
> 时间：2012-06-21T09:53:32.457
> 
> 标签：c#

如果我在 C# 中有这段代码：

```
int index = 10;
float value = 20;

float* pixels = getPixelData();

pixels[index+1] = (byte)(value/256);
pixels[index+0] = (byte)(value & 0xFF); 
```

然后，问题是如何计算“价值”，如果我有：

```
int index = 10;

pixels[index+1] = X;
pixels[index+0] = Y;

float value = ? 
```

# objective-c - 我可以在我的项目中创建 App Delegate 文件吗？

> ID：11135685
> 
> 赞同：1
> 
> 时间：2012-06-21T09:53:43.283
> 
> 标签：objective-c, ios, cocoa-touch

我没有使用笔尖以编程方式创建了我的 ipad 代码。我将 ipad 应用程序转换为通用应用程序，如下所示：

> 选择项目目标（侧边栏上的蓝色目标）。摘要 -> iOS 应用程序目标 -> 将设备设置为通用。

现在我想为 iphone 启动不同的应用程序代理，为 ipad 启动不同的应用程序代理。ipad 已经有一个应用程序代理，现在我想为 iphone 创建不同的应用程序代理，以便在 main.m 中我可以启动不同的应用程序代理设备（ipad 和 iphone）。所以我的问题是，我可以创建不同的应用程序委托，如果是，那么如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:00:38.543

在项目中`main.m`

你可以做类似的事情

```
int main(int argc, char *argv[])
{
    @autoreleasepool {

        NSString *appDelegateName;
        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
            appDelegateName =  NSStringFromClass([AppDelegateIPhone class]);
        } else {
            appDelegateName =  NSStringFromClass([AppDelegateIPad class]);
        }
        return UIApplicationMain(argc, argv, nil, appDelegateName);
    }
} 
```

但IMO你不应该这样做。

而是像苹果那样做，在应用程序委托中加载不同的视图控制器或不同的 XIB。

```
@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
    } else {
        self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil] autorelease];
    }
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:05:34.380

您应该能够通过 XIB 为您的应用程序执行此操作。默认情况下，AppDelegate 由`MainWindow.xib`（或您的主 XIB 文件称为）的文件所有者和委托出口之间的连接分配。如果您使用了转换器，那么`MainWindow~ipad.xib`应​​该有一个类似的出口，目前也指向同一个委托。如果您希望它们有所不同，请创建一个新的 AppDelegate 子类并将其分配给`~ipad`XIB 版本中的插座，它应该等效于调用 UIApplicationMain 而无需手动执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T23:53:53.823

您甚至不必担心那里的“appDelegateName”变量。只需调用 return ，如下所示：

```
 int main(int argc, char *argv[])
  {
      @autoreleasepool {

          if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad){
              return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate_iPad class]));
          } else {
              return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate_iPhone class]));
          }

       }
   } 
```

# php - PHP Curl Info 已阅读

> ID：11135689
> 
> 赞同：1
> 
> 时间：2012-06-21T09:53:52.613
> 
> 标签：php, curl

我是[php curl](http://www.php.net/manual/en/ref.curl.php)的新手。谁能告诉我从哪里开始？我需要从另一个网页导入一些信息，并在进行一些修改后将其存储在我的数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:56:22.747

这是一个很棒的导师，你可以从这里得到一切......

[http://www.alfredfrancis.in/complete-php-curl-tutorial/](http://www.alfredfrancis.in/complete-php-curl-tutorial/)

2.Simple cUrl scrit 下载网页。

```
<?php
 $ch = curl_init();//starts curl handle
 $Url="http://www.php.net";
 curl_setopt($ch, CURLOPT_URL, $Url);//set url to download
 curl_setopt($ch, CURLOPT_REFERER, "http://www.google.com/");//referrer
 curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0");//set user agent
 curl_setopt($ch, CURLOPT_HEADER, 0);//include header in result
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);//should return data
 curl_setopt($ch, CURLOPT_TIMEOUT, 20);//timeout in seconds
 $output = curl_exec($ch);//ececute the request
 curl_close($ch);
 echo $output;//output the result
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:00:30.757

开始： http: [//php.net/manual/en/curl.examples-basic.php](http://php.net/manual/en/curl.examples-basic.php)

如果您需要检索输出并对其进行操作，只需使用`curl_setopt`函数 as `curl_setopt(CURLOPT_RETURNTRANSFER,TRUE);`。

我们从中检索输出`http://www.google.com`并将其输出到屏幕上的示例：

```
$ch = curl_init('http://www.google.com');
curl_setopt($ch, CURLOPT_RETURNTRANSFER,TRUE);

$output = curl_exec($ch);
var_dump($output); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:08:25.977

易于调试！

IE

```
 $curl = curl_init();
    $URL="http://www.php.net";
    curl_setopt($curl, CURLOPT_URL, $URL);
    $contents = curl_exec($curl);
    $httpcode = curl_getinfo($curl,CURLINFO_HTTP_CODE);
    $httpHeaders = curl_getinfo($curl);
    curl_close($curl);

    if($httpcode  && $contents!='')
    {
        makeLog('calls ', $URL.' resp c:'.$httpcode.' r:'.$contents); 
    }
    else if($httpcode)
    {
        makeLog('calls ', $URL.' resp c:'.$httpcode); 
    }

    function makeLog($function , $message='')
    {
        $myFile = "errorLogs.txt";
        $fh = fopen($myFile, 'a+');
        fwrite($fh , "\n\r\n\r".$_SERVER['REMOTE_ADDR'].': '.$message.' -'.$function."\n\r\n\r");
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T03:51:24.293

在开始使用 PHP curl 进行任何操作之前，您是否已在执行 .php 文件的机器上安装了它？

如果不：

```
sudo apt-get install curl libcurl3 libcurl3-dev php5-curl 
```

然后重启apache：

```
service apache2 restart 
```

之后将以下代码放入服务器上的 .php 文件中并执行它。如果有效，您应该会在右上角看到您的 IP 地址。尝试将 URL 更改为其他网站。如果您需要更多建议，整篇文章都在这里：[Beginners-cURL](http://fixitts.com/2012/06/15/data-scraping-series-1-using-curl-to-grab-data-from-webpages-php-or-linux/ "使用 cURL 从网页中抓取数据")

```
<?php

// Initialize cURL
$ch = curl_init();

// Set the website you would like to scrape
curl_setopt($ch, CURLOPT_URL, "http://www.icanhazip.com");

// Set cURL to return the results into a PHP variable
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

// This executes the cURL request and places the results into a variable.
$curlResults= curl_exec($ch);

// Close curl
curl_close($ch);

// Echo the results to the screen>
echo $curlResults;

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T14:20:15.773

我知道它并不完全符合您的要求，但是有一个出色的 PHP 类，它提供了您需要的几乎所有东西，而无需使用 cURL。

它被称为[Snoopy](http://sourceforge.net/projects/snoopy/)，基本上是一个浏览器模拟类，具有一些非常有用的功能，如表单数据操作等。

# c# - 使用 TableAdapter 时如何从数据库中读取错误？

> ID：11135692
> 
> 赞同：0
> 
> 时间：2012-06-21T09:54:01.083
> 
> 标签：c#, asp.net, tableadapter

我正在使用 TableAdapter，但我无法捕获来自 SQL 的任何错误。这是我的一段代码：

```
 errorText = "";
        DataTable AddFilesResult = new DataTable();
        var dockDataAdapter = new Dock.DAL.DockDatasetTableAdapters.Dock_Files_AddTableAdapter();

        try
        {
            AddFilesResult = dockDataAdapter.GetData(
                location,
                name,
                relation
            );
        }
        catch (Exception ex)
        {
            errorText = ex.Message;
        } 
```

我尝试检查“dockDataAdapter.Connection”，但也没有看到任何错误信息。

我使用这个例子创建了我的适配器：http: [//msdn.microsoft.com/en-us/library/aa581776.aspx](http://msdn.microsoft.com/en-us/library/aa581776.aspx)

我会很感激你的帮助。如果您需要更多详细信息，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:38:59.777

我发现了问题 - 它在我的代码中：/。错误可以被捕获——使用 try/catch 语句。

# jquery - jQuery 在 IE 7 文档模式下找不到元素

> ID：11135693
> 
> 赞同：0
> 
> 时间：2012-06-21T09:54:15.420
> 
> 标签：jquery, internet-explorer, internet-explorer-9

我正在尝试为我的客户对网站进行一些编辑。这是我正在尝试的选择器。

这是我要编辑的网站。[http://www.lederne.dk/kampagner/faglig_organisation/forside.htm](http://www.lederne.dk/kampagner/faglig_organisation/forside.htm)

```
jQuery("DIV#ctl01_uiBreadCrumbServerDiv + DIV > DIV:first-child + DIV > DIV:first-child > DIV:first-child") 
```

这在 IE9 页面的默认设置中不起作用。但是，如果我现在将文档模式更改为 IE9（最初是 IE7），则选择器可以工作。

我做了很多搜索，看看可能出了什么问题，但似乎没有任何帮助。

您可以使用此代码将 jquery 添加到此页面

```
var s=document.createElement('script');
s.setAttribute('src','http://jquery.com/src/jquery-latest.js');
document.getElementsByTagName('body')[0].appendChild(s); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:48:35.920

我认为

```
jQuery("DIV#ctl01_uiBreadCrumbServerDiv + DIV > DIV:eq(1) > DIV:eq(0) > DIV:eq(0)").addClass("gotit") 
```

会解决你的问题

# java - 为 jTable 行着色

> ID：11135695
> 
> 赞同：4
> 
> 时间：2012-06-21T09:54:40.210
> 
> 标签：java, swing, jtable, tablecellrenderer

我想为 jTable 中的特定行着色..我通过使用此代码为列做到了，

```
private class CustomCellRenderer extends DefaultTableCellRenderer {

/* (non-Javadoc)
 * @see    
javax.swing.table.DefaultTableCellRenderer#getTableCellRendererComponent(javax.swing.JTable, java.lang.Object, boolean, boolean, int, int)
 */

    @Override
public Component  getTableCellRendererComponent(JTable table, Object value,boolean isSelected, boolean hasFocus, int row, int column) {

  Component rendererComp = super.getTableCellRendererComponent(table, value, isSelected, hasFocus,row, column);

//Set foreground color
// rendererComp.setForeground(Color.red);
//Set background color
  rendererComp .setBackground(Color.pink);

 return rendererComp ;
 }

} 
```

我调用上面的代码使用，

```
 jTable1.getColumnModel().getColumn(3).setCellRenderer(new CustomCellRenderer()); 
```

但是我想对 jTable 中的行做同样的事情。在行的情况下没有 getColumnModel() 或 getColumn() 。那么这样做的替代方法是什么？我正在使用 Java Swing 在 Netbeans 中进行操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T10:42:06.860

这是一个关于如何结合列颜色和行颜色的示例。您基本上在 TableCellRenderer 中执行测试以查看背景是否应该是一种颜色或另一种颜色。

```
import java.awt.Color;
import java.awt.Component;
import java.util.Enumeration;
import java.util.Vector;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;

public class TestTable {

    public class MyTableCellRenderer extends DefaultTableCellRenderer implements TableCellRenderer {

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            setBackground(null);
            super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
            setText(String.valueOf(value));
            boolean interestingRow = row % 5 == 2;
            boolean secondColumn = column == 1;
            if (interestingRow && secondColumn) {
                setBackground(Color.ORANGE);
            } else if (interestingRow) {
                setBackground(Color.YELLOW);
            } else if (secondColumn) {
                setBackground(Color.RED);
            }
            return this;
        }

    }

    private JFrame f;
    private JTable table;

    protected void initUI() {
        Vector<Vector<Object>> data = new Vector<Vector<Object>>();
        Vector<String> columNames = new Vector<String>();
        columNames.add("Col 0");
        columNames.add("Col 1");
        columNames.add("Col 2");
        for (int i = 0; i < 20; i++) {
            Vector<Object> v = new Vector<Object>();
            v.add(i % 3 == 0 ? "Hello" : "World");
            v.add("Some data in row " + (i + 1));
            v.add("Some other data in row " + (i + 1));
            data.add(v);
        }
        table = new JTable(new DefaultTableModel(data, columNames));
        Enumeration<TableColumn> en = table.getColumnModel().getColumns();
        while (en.hasMoreElements()) {
            TableColumn tc = en.nextElement();
            tc.setCellRenderer(new MyTableCellRenderer());
        }
        f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setLocationRelativeTo(null);
        f.add(new JScrollPane(table));
        f.pack();
        f.setVisible(true);

    }

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTable().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T16:40:29.057

由于您想更改整行，而不管列类如何，请考虑覆盖`prepareRenderer()`，如此[处](https://stackoverflow.com/a/3899137/230513)所述。`TableCellRenderer`和`prepareRenderer()`方法在这里[进行](https://stackoverflow.com/a/5799016/230513)对比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:24:35.587

这似乎是一种非常肮脏的处理方式。如果您使用布局管理器为您的容器使用gridLayout，那将是一个更好的主意（我认为它必须是一个JFrame）。您可以添加单独的组件（JPanels、Jbuttons 或任何其他 JComponent）并使用 paint()/repaint() 方法处理它们的外观。

**编辑**

**或者**，您可以更改 getTableCellRendererComponent(....) 方法以使用嵌套的 if-else 语句或 switch-case 根据 int rows ,int columns （作为参数提供）设置自定义背景颜色。

这会容易得多

# php - PEAR DB 错误：没有这样的表

> ID：11135697
> 
> 赞同：0
> 
> 时间：2012-06-21T09:54:42.863
> 
> 标签：php, google-maps-api-3, pear

我正在使用使用 PEAR 的 Google Maps PHP API。我收到数据库错误：没有这样的表。我不知道该怎么办？我检查了数据库参数，如数据库名称、表名称。一切似乎都是正确的。

以下代码给出了错误：

```
$MAP_OBJECT->addMarkerByAddress($address,$address /*marker title*/, "", $tooltip=$address, $filename= $mapMarkerSmall); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:23:52.457

在为上述错误浪费了这么多时间之后，我终于发现我使用的是大写的表名，而在我的远程主机/服务器上，表名是小写的。所以我在代码中将表名更改为小写字母，错误就消失了:)

这真是令人毛骨悚然，据我所知 SQL 不区分大小写，但我猜 PEAR 是区分大小写的 :)

# android - Android 中的 UnknownHost 异常

> ID：11135700
> 
> 赞同：0
> 
> 时间：2012-06-21T09:54:47.220
> 
> 标签：android

我的应用程序经常向 servlet 发送请求，但从昨天开始它开始给出**UnknownHostException Exception**。我不知道自 1 个月以来运行良好的代码有什么问题。

我在清单文件中添加了访问互联网的权限。我的 servlet 在 PC 浏览器上运行良好。

我在 Android 中调用 servlet 的代码是：

```
String url = "http://sampark.iiit.ac.in:8080/VTSServlets/CurrentTripInfo?mobilenum=##########&lat=10&long=10"
String response = getResponse(url);

public static String getResponse(final String url)
 {
        final StringBuilder builder = new StringBuilder();
    final HttpClient client = new DefaultHttpClient();

    System.out.println("URL :: " + url);
    final HttpGet httpGet = new HttpGet(url);
    try {
        final HttpResponse response = client.execute(httpGet);
        final StatusLine statusLine = response.getStatusLine();
        final int statusCode = statusLine.getStatusCode();
        if (statusCode == 200) {
            final HttpEntity entity = response.getEntity();
            final InputStream content = entity.getContent();
            final BufferedReader reader = new BufferedReader(
                    new InputStreamReader(content));
            String line;
            while ((line = reader.readLine()) != null) {
                builder.append(line);
            }
        } else {
            builder.append("Not 200");
        }
    } catch (final ClientProtocolException e) {
        e.printStackTrace();
    } catch (final IOException e) {
        e.printStackTrace();
    }

    return builder.toString();
}

} 
```

我已经检查了所有要求，但不知道它是如何突然给出 UnknownHost 异常的？我正在 Android 手机上测试我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:03:06.170

只需**关闭您的模拟器**，然后运行应用程序，这意味着您需要重新启动您的模拟器，如果您在设备中运行，则由于连接问题而不是断开网络连接（如 wifi 禁用，然后启用它并检查此问题 id bcz 的网络连接问题和一个） webserivce 应用程序的更多功能意味着从网络获取数据或图像首先检查连接性，如下所示，而不是您的代码

在您的活动或课程中添加此方法

```
 protected boolean checkConnection(){ 
    ConnectivityManager conMan = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

    NetworkInfo networkInfo = conMan.getActiveNetworkInfo();

    final boolean connected = networkInfo != null
            && networkInfo.isAvailable()
            && networkInfo.isConnected();

    if ( !connected) {
        Toast.makeText(
                this,
                "Failed to connect to internet. Check internet connection!",
                Toast.LENGTH_LONG).show();
        return false;
    }
    return true;
} 
```

添加清单不仅是互联网，还包括此网络状态权限以检查上述情况

```
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

并检查如下给出的连接条件

```
if(checkConnection()){

// Do here your all code as condition successfully satisfied
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:05:55.437

检查您的代码是否正常，请检查您的移动设置的连接性。尝试卸载并重新安装应用程序（它可能有效）并在浏览器中加载 url（检查 url 返回 json 但在它返回之前？）

# c# - RavenDB 索引，组对象

> ID：11135702
> 
> 赞同：1
> 
> 时间：2012-06-21T09:54:52.040
> 
> 标签：c#, nosql, ravendb, document-database

我正在尝试更多地了解 RavenDB，目前专注于如何为 RavenDB 编写好的索引。

假设我有一个对象 Session，将组织作为属性，我想按组织对所有会话进行分组。而且我不希望结果包含所有会话的列表。我怎样才能做到这一点？

```
public class Session {
    public string Organization { get; set; }
    ...
}

public class OrganizationSessions {
    public string OrganizationName { get; set; }
    public List<Session> Sessions { get; set; }
} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:47:42.697

不是要问的正确问题。

问问自己，你想做什么，什么模型实体最有意义。然后从那里移动。

不要像关系模型那样假设类结构。

# excel - 锁定的 Excel 工作表

> ID：11135707
> 
> 赞同：0
> 
> 时间：2012-06-21T09:55:19.040
> 
> 标签：excel, vba

我有一个来自第三方的 Excel 表，其中 VBA 受密码保护。我无法向 VBA 编辑器表添加任何额外的代码。

我需要这样的功能：

我有三个值为“真”的单元格。我想通过单击将这三个单元格更改为“假”。（基本上我需要一些紧急功能，我可以通过单击将所有单元格变为假）。

如果没有 VBA，我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:00:26.987

不幸的是，任何需要按钮和点击事件操作的东西都需要一些 VBA。

但是，如果您的工作簿采用“旧”.xls 格式（2003 和更早版本 - 如果不是，我认为您可以`Save As...`使用`97-2003`），您可以使用十六进制编辑器删除 VBA 密码。你无法恢复它，但你可以更换它。

[这个答案](https://stackoverflow.com/questions/1026483/is-there-a-way-to-crack-the-password-on-an-excel-vba-project)实际上很好地解释了它，但简而言之，您创建一个具有已知密码的虚拟工作簿，在十六进制编辑器中找到一些键，并用您在虚拟书中的值替换锁定工作簿中的相同键。

# php - CodeIgniter 多个应用程序 htaccess

> ID：11135711
> 
> 赞同：1
> 
> 时间：2012-06-21T09:55:34.313
> 
> 标签：php, .htaccess, codeigniter

我不想将我的 CI 分成多个应用程序。我应该说它位于根目录 /var/www/app/ 上名为 app 的文件夹中。首先我尝试了这个设置：

```
/system/
/application/
  /app1/
  /app2/
app1.php
app2.php
.htaccess 
```

但我无法让我的 htaccess 正确指向。因此我继续这样做：

```
/system/
/app1/
  .htaccess
  /application/
  index.php
/app2/
  .htaccess
  /application/
  index.php 
```

现在它适用于 url：mysite.com/app/app1/index.php/welcome - 但我想从 URL 中隐藏 index.php。因此我的 .htaccess 看起来像这样：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|gfx|css|js|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

但是它不起作用，我在尝试访问 mysite.com/app/app1/welcome 时收到 404。有人可以澄清我的.htaccess 有什么问题吗？我在根目录上有另一个 .htaccess 并将从那里运行一些 wordpress，但它会影响我运行 CI 的 /app 文件夹吗？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:06:35.073

尝试在每个文件夹中添加这个（来自[http://codeigniter.com/wiki/mod_rewrite](http://codeigniter.com/wiki/mod_rewrite)）：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:00:34.250

添加 RewriteBase 指令后它是否有效？

```
RewriteEngine on
RewriteBase /app1/
RewriteCond $1 !^(index\.php|gfx|css|js|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:39:32.773

好的，现在它正在工作。经过几个小时的调试。我不确定到底是什么技巧，但我认为我的`AllowOverride All`默认虚拟主机中缺少一个。在 apache 重新启动并且每个 /app/app1/ 文件夹中的这个 htaccess 之后它开始工作：

```
RewriteEngine on

RewriteCond $1 !^(index\.php|gfx|css|app|js|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

感谢所有为我的问题做出贡献的人。

# ruby-on-rails - 除了用户模型上的电子邮件和密码，我如何在 Devise 中创建“validates_presence_of”新列？

> ID：11135712
> 
> 赞同：0
> 
> 时间：2012-06-21T09:55:35.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

这是我的`User`模型：

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable, :token_authenticatable, :confirmable, :timeoutable, 
         :recoverable, :rememberable, :trackable, :validatable,
                 :email_regexp =>  /^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i

  attr_accessible :email, :password, :password_confirmation, :remember_me, :name, :confirmed_at, :confirmation_token, :category_ids
    validates_uniqueness_of :email, :case_sensitive => false
    validates_confirmation_of   :password

end 
```

我想要做的是在“激活”帐户上强制存在“category_ids”。

我正在做[仅电子邮件注册](https://github.com/plataformatec/devise/wiki/How%20To%3a%20Email-only%20sign-up)- 需要注意这一点，因为它是一个两阶段的过程。用户第一次输入他们的电子邮件地址时，他们会收到一封激活电子邮件 - 带有指向`Confirmations`控制器的链接。

该视图`Confirmations Controller`具有需要验证的其他详细信息。

如果我只是`validates_presence_of`在`User`模型上进行常规操作，那么当用户最初只提交一个电子邮件地址时，Rails 会失败（我不希望这样做）。

用户应该：

1.  请输入电邮地址
2.  单击电子邮件中的确认/激活链接
3.  填写名称、密码并选择一个类别。
4.  提交。

第 3 步，Devise 对 name 和 pw 强制执行 present_of_validation。但不是我的自定义项目称为`category`.

我怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:25:46.140

您可以将`:on => :update`选项传递给`validates_presence_of`，它不会在创建时验证：

例子

```
 validates_presence_of :category_ids, :on => :update 
```

# triggers - 如果在使用 Dataloader 更新至少一条记录时出现错误，Salesforce 触发器会跳过整个批次

> ID：11135713
> 
> 赞同：1
> 
> 时间：2012-06-21T09:55:35.927
> 
> 标签：triggers, salesforce, apex-code

我在 Salesforce 中的客户对象上编写了一个触发器。当我使用 Dataloader 上传记录时，如果没有错误，此触发器将在所有记录上执行。但是，如果在更新/插入至少一条记录时出现错误，它会错过完整的批次。

有人可以对此给出一些指导吗？

请在下面找到触发器的两个版本（之前和之后）：

版本一

```
trigger accountScorerTrigger on Account (after insert, after update) {

if(Trigger.isUpdate || Trigger.isInsert) {               
    if(Utility.isFutureUpdate){
        List<Account> accList = new List<Account>();
        // Iterate through all records 
        for (Account newAccount:Trigger.new) {
            Account tempAcc = new Account(id = newAccount.id);
            tempAcc.Account_Score_History__c = 'TESTING RECORDS 3';
            accList.add(tempAcc);
        } 
        Utility.isFutureUpdate = false;
        if(accList.size()>0){ 
            //update accList; 
            Database.DMLOptions dml = new Database.DMLOptions();
            dml.optAllOrNone = false; // tried true also                
            database.update(accList,dml);
        }
    }        
}
} 
```

版本-2

```
trigger accountScorerTrigger on Account (before insert, before update) {    
if(Trigger.isUpdate || Trigger.isInsert) {               
    //if(Utility.isFutureUpdate){
        // Iterate through all records 
        for (Account newAccount:Trigger.new) {
            newAccount.Account_Score_History__c = 'TESTING RECORDS 5';
        } 
        //Utility.isFutureUpdate = false;
    //}        
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:55:48.403

可以使用更多细节，但我假设您正在触发器中执行 DML 操作。如果您使用 Database.insert(sobject[], allornone) 或 Database.update(subject[], allornone) 方法，您可以指定 all 或 none 并相应地处理错误。直接从 Database 对象使用该方法将返回一个 SaveResult，然后您可以循环并与触发器记录匹配，以将错误发送回用户或数据加载器。

再次需要查看一些示例代码，以便为您提供更好的答案。

# java - 什么时候不应该使用 Java 快捷操作符 &

> ID：11135715
> 
> 赞同：4
> 
> 时间：2012-06-21T09:55:43.417
> 
> 标签：java, shortcut, bitwise-operators

我的理解是，在Java中使用&&作为数学运算时，如果评估的LHS（左侧）失败，则不会检查右侧，所以。

```
false && getName(); 
```

getName() 永远不会被调用，因为 LHS 已经失败了。

```
false & getName(); 
```

如果我知道 LHS 失败了，我什么时候想检查 RHS？当然，对正在运行的 RHS 评估的任何依赖都是不好的编码实践吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T10:22:19.160

那么原因`&`和`&&`不是，一个评估右侧而另一个不评估。

*   `&`是一个**按位运算符**，它对两个值进行按位与。它返回一个值。

    理论上，如果左侧的所有位都为 0（如 的情况`false`），则不必评估右侧。我想这是一个设计决定，它在每种情况下都会**被**评估。在简单的情况下，它比检查左侧是否为 0 更快。

*   `&&`是一个**条件逻辑运算符**，它接受两个布尔值并返回一个布尔值（即`true`当且仅当双方都是`true`）。

    这里同样适用，如果左边是`false`，我们不需要检查右边。在这种情况下，决定跳过右侧的评估。

为了回答您的最后一个问题（如果 LHS 失败，您什么时候想要评估 RHS），在某些情况下可以。但是，在任何情况下，都可以在不失去可读性的情况下防止这些情况（请参阅[jocelyn 的回答](https://stackoverflow.com/a/11135982/1137043)，了解确保对两个表达式都进行评估的好方法）。事实上，我认为 jocelyn 的方式比`if (exprA() & exprB()) { ... }`.

`&`就个人而言，除非我真的需要按位与，否则我从不使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T10:23:29.767

> 什么时候不应该使用 Java 快捷操作符 &

这是一个奇怪的问题。我能想到的最佳答案是，如果您确实想要`&&`. （这是大多数时候......）

> 当然，对正在运行的 RHS 评估的任何依赖都是不好的编码实践吗？

我不同意。这无异于说副作用是不好的编码习惯。

我承认你很少需要`&`在布尔表达式中使用，但这并不意味着使用它们是不好的做法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T10:12:44.497

事实上，依赖 RHS 的电话是不好的做法。如果您每次都需要调用它，请在之前调用它，存储结果并在比较表达式中使用它。

```
if (false && getresult()) {

} 
```

变成

```
Boolean result = getresult();
if (false && result) {

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T09:59:52.687

它用于按位与运算

例如

```
int i = 3; // 11 - binary
int j = 7; / 111 - binary
int k = i &j; // 11 & 111 = 11 = 3 (decimal) 
```

基本上 & 会进行逻辑与运算，因此如果您想同时评估条件然后对它们进行与运算，那么您可以使用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T10:10:57.930

另一个典型的使用案例是您要检查两个计算条件：

```
if(++i < 0 & ++j < 0) 
```

在这个例子中不管值的`i` `j`增加。

请记住，这可以通过其他方法实现。它为您节省了几行代码。作为一种语言，也可以很好地提供评估两者的机会。否则有人可能会问我为什么不能。

# c# - 为什么这段代码不会画抛物线？

> ID：11135717
> 
> 赞同：1
> 
> 时间：2012-06-21T09:55:47.443
> 
> 标签：c#, winforms, graphics, drawing

为什么这段代码不会画抛物线？它尽可能简单 - 对于每个 x 使用给定函数计算 y。给定 y=x^2 我应该在左上角绘制顶点朝下的抛物线，但它只绘制一些移位的点。

```
private void DrawParabole(Graphics g)
    {
        for (int x = 0; x < pictureBox1.Width; x++)
        {
            g.DrawRectangle(
                Pens.Black, 
                x,
                FY(x), 
                1, 
                1
             );
        }
    }

    private int FY(int x)
    {
        int y = A*x^2 + B*x + C;
        return y;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T10:06:26.963

您得到错误值/散点的原因是因为您使用的是`XOR`or`^`运算符而不是`Math.Pow()`.

为了计算，假设`A*x^2`您必须使用[Math.Pow()](http://msdn.microsoft.com/en-us/library/system.math.pow.aspx)而不是`^`：

```
int y = A*(Math.Pow(x, 2)) + B*x + C;
return y; 
```

那应该为你解决它，如果它不使用它：

```
int y = A*(Math.Pow((double)x, 2D)) + B*x + C;
return y; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T10:06:37.073

如果您的代码是 C#，则 ^ 是按位异或。请改用 Math.Pow()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:15:54.873

使用[MatthewRz](https://stackoverflow.com/a/11135893/56763)的修正数学：

```
 private int FY(int x)
    {
        int y = (int)(A * (Math.Pow(x, 2)) + B * x + C);
        return y;
    } 
```

不过，您仍然只会看到点（因为每一步的 Y 变化大于 X），请使用以下循环来获取点之间的线：

```
 private void DrawParabole(Graphics g, int w)
    {
        for (int x = 0; x < w; x++)
        {
            g.DrawLine(
                Pens.Black,
                x,
                FY(x-1),
                x,
                FY(x));
        }
    } 
```

# c++ - OpenCV 编译 Ubuntu

> ID：11135718
> 
> 赞同：0
> 
> 时间：2012-06-21T09:55:55.623
> 
> 标签：c++, opencv, init, qmake

我已经在 Ubuntu 中成功安装了 OpenCv 和 Qt ..我可以调试和运行一些示例代码，但是当我创建 QtConsole 应用程序时我无法构建它......这是我的示例代码，用于随机白色图像中的一些像素

```
opencv2/core/core.hpp
opencv2/highgui/highgui.hpp
void salt(cv::Mat &image, int n)
{
    for(int k=0; k<n; k++)
    {
        int i=rand()%image.cols;
        int j=rand()%image.rows;

        if(image.channels() == 1)
        {
            image.at<uchar>(j,i)=255;
        }
        else if(image.channels() == 3)
        {
            image.at<cv::Vec3b>(j,i)[0]=255;
            image.at<cv::Vec3b>(j,i)[1]=255;
            image.at<cv::Vec3b>(j,i)[2]=255;
        }
    }
}

int main()
{
    cv::Mat resim = cv::imread("boldt.jpg");
    salt(resim,3000);
    cv::namedWindow("Cerceve");
    cv::imshow("Cerceve",resim);
} 
```

我已经在`.pro`文件中添加了我的图书馆，比如

```
INCLUDEPATH += /usr/local/include/opencv2

LIBS += -L/usr/local/lib -lopencv_core -lopencv_highgui -lopencv_imgproc -lopencv_features2d -lopencv_calib3d 
```

当我尝试从终端运行程序时，它说：

> 初始化完成
> 
> 提供 opengl 支持

没有任何反应..调试时没有错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:22:27.107

`cv::waitKey(..)`在 main() 的末尾添加一个

```
cv::imshow("Cerceve",resim);
cv::waitKey(0);
return 0; 
```

调用`cv::waitKey(param)`是至关重要的，因为它会处理您打开的窗口中的事件循环（除了返回用户在等待期间按下的键）。这`param`是函数返回前等待的毫秒数。用于`0`无限等待，直到按下某个键。

# uml - UML状态机图中的线程？

> ID：11135719
> 
> 赞同：3
> 
> 时间：2012-06-21T09:56:02.177
> 
> 标签：uml, diagram, state-machine

如何在 UML 状态机图模型中表示执行线程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T12:29:23.670

你的意思是并行执行？即有 2 个（或更多）同时执行的子状态机？如果是这样：

![在此处输入图像描述](../Images/d862f16a5f79e55b8ef9548d5d3a1839.png)

顶部和底部（子）状态机`Superstate`将同时执行。

hth。

# android - 在 Linux 上使用 javah

> ID：11135720
> 
> 赞同：3
> 
> 时间：2012-06-21T09:56:02.127
> 
> 标签：android, linux, android-ndk, java-native-interface, javah

我有一个用于 JNI 的简单类，我需要将其导出到头文件 (.h)。

我已经读到我需要使用该`javah`命令，方法是转到`src`项目的文件夹，然后键入：

```
javah -jni com.main_package.NativeClass 
```

在 Windows 上它工作正常，但在我的主操作系统（Linux）上却不行。它一直告诉它找不到课程。我尝试使用该命令的多种组合并在许多可能的路径上运行它，但它不起作用。我已经关注了许多教程和网站（包括这里）并尝试了它们的组合。

[我什至尝试为此使用 Eclipse 的外部工具，如此处](https://stackoverflow.com/questions/3451378/how-to-run-javah-from-eclipse)所示，但它也显示了相同的错误。

我得到的错误如下所示：

```
error: cannot access com.main_package.NativeClass 
class file for com.main_package.NativeClass  not found
javadoc: error - Class com.main_package.NativeClass  not found.
Error: No classes were specified on the command line.  Try -help. 
```

谁能帮帮我吗？我真的很喜欢在 Linux 上工作，并且不想每次需要使用这个工具时都切换操作系统。

* * *

以下是正确答案：

1.  对于控制台，转到“bin/classes”文件夹并运行我使用过的命令：

    javah -jni com.main_package.NativeClass

2.  对于 Eclipse，使用我提供的链接，但不要`${project_loc}/bin/`使用`${project_loc}/bin/classes/`，然后，在包资源管理器中，转到 NativeClass.java，并运行外部工具。输出将与 java 文件的路径相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-21T05:26:50.440

您不必在类文件上使用 javah。您可以直接在源文件 (.java) 上使用 javah 来生成本机 C/++ 签名（标头）文件。前任：

```
javah -cp /Users/Android/android-sdk/platforms/android-xy/android.jar;. com.test.JniTest 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T10:54:01.923

您不会转到项目的文件夹，而是转到已编译的**.class**文件`src`的根目录（子文件夹存在或创建的位置）。正在寻找已编译的类，而不是您的源文件。如果您只是手动运行，则类文件将与原始源位于同一位置。那么“转到 src 文件夹”的说法是正确的。但是，如果您在 Eclipse 中有一个项目，或者您使用 ant 或其他东西，则这些类可能位于完全不同的位置 - 取决于您的项目的设置方式。我猜你的 Windows 和 Linux 上的 Eclipse 项目的设置不同。**`com``javah``javac`**

# oracle - 使用 Hibernate 连接到 Oracle

> ID：11135724
> 
> 赞同：0
> 
> 时间：2012-06-21T09:56:06.953
> 
> 标签：oracle, hibernate, sockets, jboss, icefaces-1.8

我的 Web 应用程序（Java jsf [icefaces](http://www.icesoft.org/) - jboss）使用[hibernate](http://www.hibernate.org/)连接到 Oracle 。它工作正常，但如果有一段时间的用户不活动（几个小时），当用户尝试进行查询时，会发生此错误：java.sql.SQLException：Io 异常：对等连接重置：套接字写入错误

该应用程序被 3/4 的用户使用，因此打开的连接数量非常少。我可以解决重启 jboss 服务器的问题。

下面显示了应用程序使用的 hibernate.cfg.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration> 
    <session-factory> 
        <!-- <property name="connection.datasource">portaleClientiOracleDS</property> -->       
        <property name="transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>   
        <property name="current_session_context_class">thread</property>   
        <property name="hibernate.connection.driver_class">oracle.jdbc.driver.OracleDriver</property>
        <property name="hibernate.connection.password">Alfre$cost12</property>
        <property name="hibernate.connection.url">jdbc:oracle:thin:@172.16.216.109:1521:ALFHIST</property>
        <property name="hibernate.connection.username">ALFRESCOST</property>
        <!-- <property name="hibernate.default_catalog">ALFRESCOST</property>-->
        <!-- <property name="hibernate.default_schema">ALFRESCOST</property>-->
        <property name="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</property>
        <property name="show_sql">false</property> 
        <property name="use_outer_join">true</property>   
        <property name="cache.provider_class">org.hibernate.cache.HashtableCacheProvider</property>  

       <property name="c3p0.acquire_increment">1</property>
        <property name="c3p0.idle_test_period">100</property> <!-- seconds -->
        <property name="c3p0.max_size">100</property>
        <property name="c3p0.max_statements">0</property>
        <property name="c3p0.min_size">10</property>
        <property name="c3p0.timeout">100</property> 
        <property name="c3p0.preferredTestQuery">SELECT 1 FROM DUAL</property>
        <property name="c3p0.testConnectionOnCheckout">true</property>

        <mapping resource="it/pillar/accenture/portaleclienti/businesslayer/clienti/dao/hibernate/mappings/StoricoPillar.hbm.xml"/>    

    </session-factory>    
</hibernate-configuration> 
```

我试图增加 c3p0 值，但问题仍然存在。任何建议表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:09:51.393

您可能没有使用 c3p0。[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#configuration-hibernatejdbc)说：

> 如果您设置 hibernate.c3p0.* 属性，Hibernate 将使用其 org.hibernate.connection.C3P0ConnectionProvider 进行连接池。如果您想使用 Proxool，请参阅打包的 hibernate.properties 和 Hibernate 网站以获取更多信息。
> 
> 以下是 c3p0 的示例 hibernate.properties 文件：

```
hibernate.connection.driver_class = org.postgresql.Driver
hibernate.connection.url = jdbc:postgresql://localhost/mydatabase
hibernate.connection.username = myuser
hibernate.connection.password = secret
hibernate.c3p0.min_size=5
hibernate.c3p0.max_size=20
hibernate.c3p0.timeout=1800
hibernate.c3p0.max_statements=50
hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect 
```

所以属性应该是`hibernate.c3p0.xxx`而不是`c3p0.xxx`。

# extjs4 - Extjs 4 中的手风琴布局

> ID：11135726
> 
> 赞同：0
> 
> 时间：2012-06-21T09:56:13.860
> 
> 标签：extjs4

我有一个带有两个网格面板作为项目的面板，它是用手风琴布局设置的。根据某些情况，我需要显示或隐藏第二个网格面板。

```
var chartStoreGridPanel = Ext.create('Ext.Panel', {
               id: 'chartStoreGridPanel',
               height: 200,
               layout: 'accordion',
               items: [chartStoreGridPanel1, chartStoreGridPanel2]
            }); 
```

我想根据某些条件显示或隐藏“chartGridPanel2”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:22:50.817

尝试这个 ：

```
 items: [
        chartStoreGridPanel1,
        <condition> ? chartStoreGridPanel2 : {}
    ] 
```

# meteor - 如何附加两个不同的 meteor.js 文件？

> ID：11135729
> 
> 赞同：0
> 
> 时间：2012-06-21T09:56:31.907
> 
> 标签：meteor

我有两个不同的流星.js 文件在两个不同的本地主机上运行。我如何整合它们？

我创建了两个应用程序 app1 和 app2。单击app1中的按钮，我想重定向到app2。现在我想链接他们两个.. 我该怎么做。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:12:13.037

好吧，如果你真的需要两个流星实例，那么它们将在不同的端口上运行。

因此，要从一个链接到另一个，您需要在链接中包含端口，因此如果 app2 在端口 3001 上并且您想要访问名为“pagelink”的页面：

```
<a href="http://127.0.0.1:3001/pagelink">link</a> 
```

现在应该做魔术。

稍后您将不得不将 ip 和端口替换为 app2 的域

但我真的会重新考虑您的概念，我很确定您可以将所有功能构建到一个流星实例中。

这也会将您的客户端完全重定向到 app2，这将导致页面重新加载并丢失所有会话数据并重新打开新的套接字连接并连接到不同的 mongodb 并丢失用户登录名并重新加载您的 html 模板和...

玩得开心

亚沙

# django - 基于 Django 的站点没有响应

> ID：11135731
> 
> 赞同：1
> 
> 时间：2012-06-21T09:56:35.483
> 
> 标签：django, linux, web-services, apache, networking

我希望以前没有问过这个问题，我是 linux 编程的新手。我们有一个在 django 上构建的站点，在 linux 服务器上运行，但是，最近我们的网络设置被重置，尽管所有 IP 地址和设置都保持不变，但问题是即使服务器仍然使用相同的服务器，现在也无法访问该站点ip地址和以前一样，它给出了这个错误“

未找到

在此服务器上找不到请求的 URL /。

Apache/2.2.20 (Ubuntu) 服务器在 192.168.1.66 端口 80"

如果有人知道发生了什么，我们将不胜感激。

# visual-studio-2010 - RDLC Switch Construct - 还有其他吗？

> ID：11135736
> 
> 赞同：13
> 
> 时间：2012-06-21T09:56:55.220
> 
> 标签：visual-studio-2010, reporting, expression, rdlc

我在报告中有以下表达式：

```
= Switch( Fields!RATE_CODE.Value = "First", " £/Week",
          Fields!RATE_CODE.Value = "Second", " £/Day") 
```

我已经搜索了所有内容，但找不到向此表达式添加`else`or的方法。`default`这个结构上似乎也没有任何文档。

这可能吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-21T10:01:51.877

该函数返回与计算结果为 true 的系列中的**第一个表达式**`Switch`关联的值，您可以使用以下技巧：

 **```
= Switch( Fields!RATE_CODE.Value = "First" , " £/Week",
          Fields!RATE_CODE.Value = "Second", " £/Day",
          1 = 1                            , "default value" ) 
```**

# mysql - mysql查询获取特定记录

> ID：11135738
> 
> 赞同：0
> 
> 时间：2012-06-21T09:56:58.493
> 
> 标签：mysql, position

我正在做一个排序表，需要从查询中找到一个特定的行位置。

eg: SELECT name FROM player ORDER BY points DESC

我将如何获得带有`name`“约翰”或其他任何字段的记录位置？

所以我希望结果给我一个数字（“约翰”的排名）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:59:35.077

```
SET @rank=0;
SELECT @rank:=@rank+1 AS rank, name 
  FROM players ORDER BY points DESC 
```

或者

```
SELECT @rn:=@rn+1 AS rank, name
FROM (
  SELECT name 
      FROM players ORDER BY points DESC
) t1, (SELECT @rn:=0) t2; 
```

# android - 如何使用 SUP 从 SAP 创建的 MBO 访问数据

> ID：11135740
> 
> 赞同：1
> 
> 时间：2012-06-21T09:57:07.780
> 
> 标签：android, sup

我一直在尝试将生成的 Android 代码用于从本机 android 应用程序部署的 MBO。

接下来的步骤如下：

1.  使用 SAP BAPI (BAPI_FLIGHT_GETLIST) 创建的 MBO

2.  将其部署到无线服务器中

3.  生成代码

4.  将代码复制到 Android 项目

5.  使用生成的代码通过以下步骤从 MBO 访问数据

    i) 设置申请详情

    ```
     Application app = Application.getInstance();

        app.setApplicationIdentifier("FlightSearch");

        app.setApplicationContext(<android context>);

        FlightSearchDB.setApplication(app); 
    ```

    ii) 设置身份验证凭据

    ```
     ConnectionProperties connProps = app.getConnectionProperties();

        LoginCredentials loginCredentials = new LoginCredentials(USERNAME, PASSWORD);

        connProps.setLoginCredentials(loginCredentials);

        connProps.setServerName(HOST);

        connProps.setPortNumber(PORT); 
    ```

    iii) 注册连接

    ```
     if (app.getRegistrationStatus() != RegistrationStatus.REGISTERED)

        {

            app.registerApplication(TIMEOUT);

        }

        else

        {

            app.startConnection(TIMEOUT);

        } 
    ```

    iv) 设置同步参数

    ```
     ConnectionProfile profile = FlightSearchDB.getSynchronizationProfile();

        profile.setServerName(HOST);

        profile.setPortNumber(2480);

        profile.setNetworkProtocol("http,https");

        profile.setDomainName("default");

        profile.setAsyncReplay(true);

        profile.save(); 
    ```

    v) 开始同步

    ```
     FlightSearchDB.synchronize(new MySyncStatusListener()); 
    ```

我可以在 MySyncStatusListener 的 objectSyncStatus() 方法中看到状态。

最初它尝试上传数据，因为第一次运行没有本地数据，它发送一些空值，然后等待来自服务器的确认。我长时间获得 APPLICATION_SYNC_RECEIVING_UPLOAD_ACK 状态并且从未从服务器获得确认，因此数据同步进入死锁。

同时我试图检查服务器日志，它显示：

2012-06-21 02:03:26.135 CONSOLE MMS pool-1-thread-18-/registration/RegistrationServlet [com.sybase.sup.server.Console]6146

2012-06-21 02:03:25.491 CONSOLE MMS pool-1-thread-16-/registration/RegistrationServlet [com.sybase.sup.server.Console]6038

如果我禁用代码的同步部分，我可以运行以下代码，但结果始终为 0，这很明显，因为没有同步就没有可用的本地数据。

```
 vi) Access Database

       if(!FlightSearchDB.databaseExists()){

            FlightSearchDB.createDatabase();

        }

        FlightSearchDB.openConnection();

        GenericList<Flight> flights = Flight.findAll(); 
```

任何人都可以告诉我，如果代码/配置问题有任何问题，我需要解决以访问数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:53:52.323

问题在于配置。

我遵循了 sup 站点中给出的示例。（[http://scn.sap.com/docs/DOC-8803](http://scn.sap.com/docs/DOC-8803)）问题不在于代码，而在于我在模拟器中使用的服务器配置和用户配置文件。

您可以参考我在 ( [http://scn.sap.com/message/13405735#13405735](http://scn.sap.com/message/13405735#13405735) ) 中的帖子以获取工作代码。

# ios - Segues 直接从情节提要 xcode 中的视图控制器警告启动

> ID：11135741
> 
> 赞同：20
> 
> 时间：2012-06-21T09:57:09.293
> 
> 标签：ios, objective-c, storyboard, segue, uistoryboardsegue

嗨，我以编程方式创建了按钮并将其连接到另一个视图，但我收到了 segue 警告

我应该使用`prepareForSegue`情节提要的方法，但我不知道如何，互联网上有一些示例，但是当我使用该示例时出现错误，请您帮帮我

这是我的代码

**创建按钮**

```
 UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom]; 
 button.backgroundColor=[UIColor colorWithRed: 201.0/255.0 green: 201.0/255.0 blue:201.0/255.0 alpha: 1.0];
 button.tag = currentTag;
 currentTag++;
 [button.layer setBorderColor: [[UIColor blackColor] CGColor]];
 [button.layer setBorderWidth: 1.0];
 [button setTitle:[NSString stringWithFormat:@"%d",currentTag] forState:UIControlStateNormal];
 button.frame = CGRectMake(80*x, 32*y, 80, 32); 
 [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
 [buttonView addSubview: button]; 
```

**按钮操作**

```
-(void)buttonPressed:(UIButton *)button
{
    NSLog(@"button %u -- frame: %@", button.tag, NSStringFromCGRect(button.frame));
    [self performSegueWithIdentifier:@"WeekView" sender:self];    
} 
```

**准备继续** **我的警告**

**直接从视图控制器启动的 Segue 必须具有与 -[UIViewController performSegueWithIdentifier:sender:] 一起使用的标识符**

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"WeekView"]) {
        [segue.destinationViewController setTitle:@"WeekView"];
    }
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-11T15:59:21.143

**直接从视图控制器启动的 Segue 必须有一个标识符以用于 -`[UIViewController performSegueWithIdentifier:sender:]`**

当您直接从 Storyboard 中的视图控制器（也不是从按钮或任何操作控件）拖动 segue 并且不输入标识符（名称）时，会出现此警告。

您必须给这些标识符一个标识符，否则无法以编程方式调用它们……这是您要像这样链接 segue 的唯一原因。

在 Xcode 8 中，您应该能够双击警告以使情节提要显示有问题的 segue，以便您可以为其添加名称。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-07-28T06:38:55.557

这解决了我的问题。

转到 Storyboard > 检查所有 Push 或 Pop 关系 segue。

选择每个 segue 关系 > 检查属性检查器属性 > Storyboard Segue 部分

在该部分中，为所有 segue 提供**标识符**。

![在此处输入图像描述](../Images/04bdaffee0e34f8bd9727f369dc75eb3.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-30T19:17:27.780

在 Xcode 5 中，我不仅命名了 segue，而且命名了它们导致的视图控制器，从而消除了这个警告——每个视图控制器都需要一个 Storyboard ID。如果你只命名segues，这个（误导性的）警告仍然会出现。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-04T10:16:26.180

我也有同样的警告。您必须检查每个 segue 是否具有 XCool 所说的标识符。

> Xcool - 回顾一个较旧的项目时，我也遇到了这个问题。我必须单击每个故事板 segue 并检查它是否来自视图控制器。如果是，那么我给它一个标识符。

还要检查你的**放松赛格！**这为我解决了这个问题。

# c# - 如何检测 WebBrowser 控件的内容何时更改（在设计模式下）？

> ID：11135743
> 
> 赞同：5
> 
> 时间：2012-06-21T09:57:22.067
> 
> 标签：c#, webbrowser-control

我`WebBrowser`在设计模式下使用控件。

```
webBrowser1.DocumentText = "<html><body></body></html>";
doc = webBrowser1.Document.DomDocument as IHTMLDocument2;
doc.designMode = "On"; 
```

我有一个保存按钮，我想根据控件的内容是否更改来启用或禁用它。

我还需要知道控件的内容何时发生更改，因为我需要阻止用户离开控件而不接受说明其更改将丢失的确认消息框。

我找不到任何可以让我知道内容已更改的事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T19:46:27.900

`QueryInterface()`的文件`IMarkupContainer2`，然后`IMarkupContainer2::RegisterForDirtyRange`用你自己的实现调用`IHTMLChangeSink`。`IHTMLChangeSink::Notify`进行更改时将调用您的实现。

注意：在设置设计模式后执行此操作。如果切换设计模式，文档会重新加载并且事件挂钩会丢失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T10:45:03.610

没有这样的事件，因为 DocumentText 是一个简单的字符串。我会创建一个字符串变量来存储最后保存的文本，并在每个 KeyDown / MouseDown / Navigating 事件中检查它。

```
string lastSaved;

private void Form_Load(object sender, System.EventArgs e)
{
   // Load the form then save WebBrowser text
   this.lastSaved = this.webBrowser1.DocumentText;
}

private void webBrowser1_KeyDown(object sender, System.Windows.Forms.KeyEventArgs e)
{
    // Check if it changed
    if (this.lastSaved != this.webBrowser1.DocumentText)
    {
        // TODO: changed, enable save button
        this.lastSaved = this.webBrowser1.DocumentText;
    }
}

private void webBrowser1_Navigating(object sender, WebBrowserNavigatingEventArgs e)
{
    // Check if it changed
    if (this.lastSaved != this.webBrowser1.DocumentText)
    {
        // TODO: ask user if he wants to save
        // You can set e.Cancel = true to cancel loading the next page
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-04T20:33:01.167

这似乎有效 -`QueryInterface()`对于[IPersistFile](https://docs.microsoft.com/en-us/windows/win32/api/objidl/nn-objidl-ipersistfile)接口并使用[IPersistFile::IsDirty](https://docs.microsoft.com/en-us/windows/win32/api/objidl/nf-objidl-ipersistfile-isdirty)方法，其返回值为`S_OK`（如果脏或设计模式文档已被修改）。

您不需要使用`IPersistFile::Load`将内容加载到网络浏览器中，`WebBrowser->Navigate()`也可以正常工作。

[注意 - 在IPersistStream](https://docs.microsoft.com/en-us/windows/win32/api/objidl/nn-objidl-ipersiststream)和[IPersistStreamInit](https://docs.microsoft.com/en-us/windows/win32/api/ocidl/nn-ocidl-ipersiststreaminit)接口中也有相同的`IsDirty()`方法

我不使用 C#，但它应该相对容易重写。

```
bool IsEditorDirty(WebBrowser* WB)
    {
    // beware, if it fails to get Document and IPersistFile it will not register as dirty
    bool isdirty = false;

    IHTMLDocument2* pDoc2 = WB->Document;

    if (pDoc2) {
        IPersistFile* pPFile;

        if (pDoc2->QueryInterface(IID_IPersistFile, (void**)&diPFile) == S_OK) {
            isdirty = (pPFile->IsDirty() == S_OK);
            pPFile->Release();
            }

        pDoc2->Release();
        }

    return isdirty;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-07T13:35:59.423

另一种解决方案，如果你实施`IDocHostUIHandler`，你可以使用它的方法`UpdateUI`

# jquery-ui - 用于树视图的 jquery 拖放插件

> ID：11135744
> 
> 赞同：4
> 
> 时间：2012-06-21T09:57:25.800
> 
> 标签：jquery-ui, jquery, jquery-plugins, jqgrid

我正在寻找 jquery 插件，它允许我从树视图中选择元素并在另一侧（在树视图中）显示它的父级。

非常感谢您的帮助。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T10:22:43.330

jsTree 应该完全符合您的要求 - [http://www.jstree.com/](http://www.jstree.com/)

您可以在这里看到多个演示，它非常可定制，并且似乎是 jQuery 最强大的拖放插件：http: [//www.jstree.com/demo](http://www.jstree.com/demo)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T10:02:30.660

有一个不错的插件调用jstree。它应该是你正在寻找的东西。

[https://github.com/vakata/jstree](https://github.com/vakata/jstree)

[http://www.jstree.com/](http://www.jstree.com/)

# php - Regplace ，带有 php 的正则表达式不起作用

> ID：11135746
> 
> 赞同：1
> 
> 时间：2012-06-21T09:57:28.017
> 
> 标签：php, regex

```
 <?php
        $target="This is a test | dont present me!";
        $pattern="/\| (.*?)/";
       $target=  preg_replace($pattern, '', $target);
        echo $target;
    ?> 
```

我试图摆脱从管道向右的所有东西..但正则表达式不起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T10:05:41.887

尝试以下操作：

```
$pattern="/\| .*/"; 
```

您根本不需要括号，因为您不会重复它并且不会在替换中重复使用。后面的问号是多余的`*`，都是量词。（而且@wrikken 的评论是对的，`*?`是 . 的懒惰版本`*`。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T10:04:46.330

尝试这个：

```
<?php
    $target="This is a test | dont present me!";
    $pattern="/\|.*/";
    $target=  preg_replace($pattern, '', $target);
    echo $target;
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T10:06:09.540

为什么`?`在你的模式中？

尝试使用`/\|(.*)/`或什至只是`/\|.*/`在您真的不需要分组的情况下。

# razor - 使用 Razor 是否可以在视图中包含视图？

> ID：11135747
> 
> 赞同：6
> 
> 时间：2012-06-21T09:57:28.907
> 
> 标签：razor

请务必了解我想知道是否使用 Razor 可以在视图中包含视图？如果是，如何？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T09:59:48.073

通常它是通过扩展方法的一些重载来完成的[`HtmlHelper.RenderPartial`](http://msdn.microsoft.com/en-us/library/dd470816)，例如：

```
@{ Html.RenderPartial("ViewName"); } 
```

还有其他的方法可以根据情况使用，比如`Partial`（render view to a string）：

```
@Html.Partial("ViewName") 
```

还有`RenderAction`（由控制器操作指定的渲染视图）。

# php - 使用php将数据从一个数据库传输到另一个数据库

> ID：11135751
> 
> 赞同：0
> 
> 时间：2012-06-21T09:57:47.413
> 
> 标签：php, mysql

我有一个小项目，需要将数据从一个数据库传输到另一个数据库。这两个数据库是相同的，一个数据库在网络托管服务器中，另一个在我的本地计算机中。在托管服务器的网页上，我将显示一个带有导入链接的表格，如下所示，

![在此处输入图像描述](../Images/7aaf4c6be7f9095a0fa1fdcd9de90845.png)

当我点击导入按钮时，客户的所有相关数据都应该导入到我本地计算机上运行的数据库中。我需要使用 PHP 开发这个应用程序。是否可以直接执行此操作，而无需将所需数据导出到托管服务器上的文件中并在本地计算机上导入该文件。非常感谢您的评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:18:43.510

如果您有本地计算机的公共 IP 地址，则可以轻松完成。

1.  从网络数据库中选择数据保存在内存中
2.  通过公共 IP 连接到本地数据库
3.  将内存中的数据插入本地数据库

但要小心记录ID。如果用户向本地数据库添加新记录，而您尝试添加固定 id 记录，则可能存在冲突。

# c# - C#：如何将浮点值四舍五入到最接近的浮点值？

> ID：11135752
> 
> 赞同：0
> 
> 时间：2012-06-21T09:57:52.840
> 
> 标签：c#, winforms

我有一个 datagridview 列“总计”，其中我正在计算输入的各个项目的费率总和。有时我会得到像 30.19 卢比或 100.59 卢比这样的加法，我想让 30.19 到 30.50 和 100.59 到 101。所以任何人都可以请帮我..？

我试过了

```
 float val = float.Parse(value);
                total = val;

                ekunrakam = ekunrakam + total;
                Math.Round(ekunrakam + 0.5,2); 
```

但它不工作..

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:09:28.853

通常使用货币，在您没有专用货币类型的情况下，您使用现有的最小货币单位，派萨或美分或您拥有的货币。

另外，不要使用浮点数来赚钱，否则舍入错误会让你受益。这些人建议使用十进制。

[在 c# 中用于赚钱的最佳数据类型是什么？](https://stackoverflow.com/questions/693372/what-is-the-best-data-type-to-use-for-money-in-c)

大多数国家/地区都有关于如何舍入小数货币的官方标准，有时是法律要求的，但它们通常是银行家舍入的一些变体。幸运的是，它是 Decimal.Round 的默认行为。

[http://msdn.microsoft.com/en-us/library/system.decimal.round%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.decimal.round%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:05:43.613

您希望 Math.Round(Somefloat + 0.5,2) 可以完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:04:14.530

如果您想四舍五入到最接近的整数，例如 100.59 到 101，我会告诉您只需将浮点变量设置为 int。但是，为什么要四舍五入到 30.50？四舍五入的具体规则是什么？

# jakarta-ee - 布尔成员上的 @ConfigProperty

> ID：11135755
> 
> 赞同：0
> 
> 时间：2012-06-21T09:58:00.863
> 
> 标签：jakarta-ee, glassfish, neo4j, jca

我正在尝试编译和部署[neo4j-connector](https://github.com/alexsmirnov/neo4j-connector)。

neo4j-connector-impl (`Neo4jManagedConnection`和`Neo4jResourceAdapter`) 中的两个类具有以下注释：

```
@ConfigProperty
private boolean xa; 
```

这编译得很好，但是当我尝试部署到 glassfish 3.1.1 时，我得到了一系列错误：

> [boolean] 不是 org.glassfish.apf.AnnotationInfo@118944a 处允许的属性值类型.deployment.archivist.Archivist.readAnnotations(Archivist.java:490) 在 com.sun.enterprise.deployment.archivist.Archivist.readAnnotations(Archivist.java:432) 在 com.sun.enterprise.deployment.archivist.Archivist.readRestDeploymentDescriptors (Archivist.java:408) 在 com.sun.enterprise.deployment.archivist.Archivist.readDeploymentDescriptors(Archivist.java:383) 在 com.sun.enterprise.deployment.archivist.Archivist.open(Archivist.java:246) 在com.sun.enterprise.deployment.archivist.Archivist.open(Archivist.java:255) 在 com.sun.enterprise.deployment。archivist.Archivist.open(Archivist.java:216) at com.sun.enterprise.deployment.archivist.ApplicationFactory.openArchive(ApplicationFactory.java:165) at org.glassfish.javaee.core.deployment.DolProvider.load(DolProvider. java:181) 在 org.glassfish.javaee.core.deployment.DolProvider.load(DolProvider.java:93) 在 com.sun.enterprise.v3.server.ApplicationLifecycle.loadDeployer(ApplicationLifecycle.java:828) 在 com.sun .enterprise.v3.server.ApplicationLifecycle.setupContainerInfos(ApplicationLifecycle.java:770) 在 com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:368) 在 com.sun.enterprise.v3.server.ApplicationLifecycle .deploy(ApplicationLifecycle.java:240) 在 org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:382) 在 com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:355) 在 com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:370) 在 com.sun。 Enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1064) at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:96) at com.sun.enterprise.v3.admin.CommandRunnerImpl $ExecutionContext.execute(CommandRunnerImpl.java:1244) at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1232) at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter .java:459) 在 com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:209) 在 com.sun.grizzly.tcp.http11.GrizzlyAdapter。com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117) 上的服务(GrizzlyAdapter.java:168) com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java: 238) 在 com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828) 在 com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725) 在 com.sun.grizzly.http.ProcessorTask .process(ProcessorTask.java:1019) 在 com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225) 在 com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137) 在 com.sun。 grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104) 在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) 在 com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79) 在 com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) 在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask .java:59) 在 com.sun.grizzly.ContextTask.run(ContextTask.java:71) 在 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) 在 com.sun.grizzly。 util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:680) 原因：[boolean] 不是 org.glassfish.apf.AnnotationInfo@ 中允许的属性值类型118944a 在 org.glassfish.apf.impl.AnnotationProcessorImpl.process(AnnotationProcessorImpl.java:367) 在 org.glassfish.apf.impl.AnnotationProcessorImpl。org.glassfish.apf.impl.AnnotationProcessorImpl.processAnnotations(AnnotationProcessorImpl.java:271) 上 org.glassfish.apf.impl.AnnotationProcessorImpl.processAnnotations(AnnotationProcessorImpl.java:289) 上的过程(AnnotationProcessorImpl.java:375) .apf.impl.AnnotationProcessorImpl.process(AnnotationProcessorImpl.java:199) at org.glassfish.apf.impl.AnnotationProcessorImpl.process(AnnotationProcessorImpl.java:134) at com.sun.enterprise.deployment.archivist.Archivist.processAnnotations(Archivist .java:606) at com.sun.enterprise.deployment.archivist.Archivist.readAnnotations(Archivist.java:445) ... 39 更多原因：java.lang.IllegalArgumentException：[boolean] 不是允许的属性值类型在 com.sun.enterprise.deployment.EnvironmentProperty。checkType(EnvironmentProperty.java:178) 在 com.sun.enterprise.deployment.EnvironmentProperty.setType(EnvironmentProperty.java:239) 在 com.sun.enterprise.connectors.deployment.annotation.handlers.ConfigPropertyHandler.getConfigProperty(ConfigPropertyHandler.java: 221）在 com.sun.enterprise.connectors.deployment.annotation.handlers.ConfigPropertyHandler.handleConfigPropertyAnnotation(ConfigPropertyHandler.java:142) 在 com.sun.enterprise.connectors.deployment.annotation.handlers.ConfigPropertyHandler.processAnnotation(ConfigPropertyHandler.java: 91) 在 org.glassfish.apf.impl.AnnotationProcessorImpl.process(AnnotationProcessorImpl.java:344) ... 46 更多239) 在 com.sun.enterprise.connectors.deployment.annotation.handlers.ConfigPropertyHandler.getConfigProperty(ConfigPropertyHandler.java:221) 在 com.sun.enterprise.connectors.deployment.annotation.handlers.ConfigPropertyHandler.handleConfigPropertyAnnotation(ConfigPropertyHandler.java: 142) 在 com.sun.enterprise.connectors.deployment.annotation.handlers.ConfigPropertyHandler.processAnnotation(ConfigPropertyHandler.java:91) 在 org.glassfish.apf.impl.AnnotationProcessorImpl.process(AnnotationProcessorImpl.java:344) ... 46更多的239) 在 com.sun.enterprise.connectors.deployment.annotation.handlers.ConfigPropertyHandler.getConfigProperty(ConfigPropertyHandler.java:221) 在 com.sun.enterprise.connectors.deployment.annotation.handlers.ConfigPropertyHandler.handleConfigPropertyAnnotation(ConfigPropertyHandler.java: 142) 在 com.sun.enterprise.connectors.deployment.annotation.handlers.ConfigPropertyHandler.processAnnotation(ConfigPropertyHandler.java:91) 在 org.glassfish.apf.impl.AnnotationProcessorImpl.process(AnnotationProcessorImpl.java:344) ... 46更多的handleConfigPropertyAnnotation(ConfigPropertyHandler.java:142) at com.sun.enterprise.connectors.deployment.annotation.handlers.ConfigPropertyHandler.processAnnotation(ConfigPropertyHandler.java:91) at org.glassfish.apf.impl.AnnotationProcessorImpl.process(AnnotationProcessorImpl.java: 344) ... 46 更多handleConfigPropertyAnnotation(ConfigPropertyHandler.java:142) at com.sun.enterprise.connectors.deployment.annotation.handlers.ConfigPropertyHandler.processAnnotation(ConfigPropertyHandler.java:91) at org.glassfish.apf.impl.AnnotationProcessorImpl.process(AnnotationProcessorImpl.java: 344) ... 46 更多

我可以想出一些方法来解决它（例如，添加一个`setXa(String)`方法），但这感觉不对：这段代码自一年多前提交以来一直没有改变，那么为什么它不适合我呢？这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T19:56:27.000

在我看来，属性必须是简单的 java 对象，例如`String`,`Integer`等`Long`。

`int`, `long`, `boolean`(primitives) 似乎有问题。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T15:53:39.693

也许您可以在 github 项目中向作者 Alex Smirnow 提出问题？

# ruby-on-rails - ActiveRecord 的嵌套收集属性更改

> ID：11135760
> 
> 赞同：1
> 
> 时间：2012-06-21T09:58:43.340
> 
> 标签：ruby-on-rails, nested-attributes

我有一个用户模型的字段列表（`User`belongs_to`Location`和 belongs_to `Company`）：

```
approval_fields = [:email, :location => [:first_name, :last_name], :company => [:name, :address]] 
```

当我尝试通过此代码更新记录时，我想为用户收集所有更改：

```
user.update_attributes(params[:user]) 
```

我为此写了一段丑陋的代码：

```
# Collects changed fields and returns hash of changes:
# Example: approval_fields = [:email, :location => [:first_name, :last_name]]
#          res = _collect_approval_changes(approval_fields)
#          res # => {'email' => 'new_value@change.com',
#                    'location_attributes' => {'first_name' => 'NewFirstName', 'last_name' => 'NewLastName'}}
def _collect_approval_changes(approval_fields)
  changes = {}
  approval_fields.each do |f|
    if f.is_a?(Hash)
      key = f.keys.first
      next unless self.public_send(key) # skip this association if associated object is nil
      changes["#{key}_attributes"] ||= {}
      f[key].each do |v|
        if self.public_send(key).public_send("#{v}_changed?")
          changes["#{key}_attributes"][v.to_s] = self.public_send(key).read_attribute(v)
        end
      end
      changes.delete("#{key}_attributes") if changes["#{key}_attributes"].blank?
    else
      changes[f.to_s] = self.read_attribute(f) if self.public_send("#{f}_changed?")
    end
  end
  changes
end 
```

你能建议如何重构这个方法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:47:08.683

这需要大量代码来完成 Rails 已经为您提供的功能。

我看到您已经在使用该`changed?`方法来[检查属性](http://archives.ryandaigle.com/articles/2008/3/31/what-s-new-in-edge-rails-dirty-objects)与数据库中的当前值相比是否发生了变化。

但是，由于您使用`update_attributes`，更改会立即保存，因此跟踪更改变得更加困难。您可以在模型上使用`before_save`回调，它可以在更新之前跟踪某些内容是否发生了变化。

例如：

```
before_save :check_changed
def check_changed
  puts (changed? ? "changed" : "unchanged")
end 
```

或者您可以[修补 ActiveRecord 本身](http://actsasblog.de/index.php/2009/06/04/rails-activerecord-get-changed-attributes-with-update_attributes/)，以便在调用后返回更改的属性`update_attributes`：

```
module ActiveRecord
  class Base
    def update_attributes_changed(attributes)
      self.attributes = attributes
      changes = self.changes
      return save, changes
    end
  end
end

status, changes = user.update_attributes_changed(params[:user]) 
```

# javascript - 回调函数 GMaps

> ID：11135763
> 
> 赞同：0
> 
> 时间：2012-06-21T09:58:48.693
> 
> 标签：javascript, google-maps

我对 Gmpaps 编程中的回调函数有疑问。如果它们在用户从网页上的菜单中选择的特定距离范围内，我会在地图上插入一些兴趣点。我的问题是，是否可以在回调函数中添加一些 javascript 代码，例如通过弹出消息提醒用户等等......

```
 function callback(response, status) {             
              if (status != google.maps.DistanceMatrixStatus.OK) {
                  alert('Error was: ' + status);
              } else {
                var origins = response.originAddresses;
                var destinations = response.destinationAddresses;
                var icon_2 = mapinfo[address_index_2-1][6];
                var results = response.rows[0].elements;
                     //alert(results[0].distance.value+" <= " +distance_selected);    
                      if(results[0].distance.value <= distance_selected){

                       // HERE I WOULD TO ADD SOME CODE e.g. AN ALERT 

                        geocoder.geocode({'address': mapinfo[address_index_2-1][1]+" "+mapinfo[address_index_2-1][2]+" "+mapinfo[address_index_2-1][3]+" "+mapinfo[address_index_2-1][4]}, 
                        function(results, status) {
                         if (status == google.maps.GeocoderStatus.OK) {
                              bounds.extend(results[0].geometry.location);
                              map.fitBounds(bounds);
                              var marker = new google.maps.Marker({
                              map: map,
                              position: results[0].geometry.location,
                              icon: icon_2
                            });
                              map.setZoom(15);
                              map.setCenter(marker.getPosition());
                              google.maps.event.addListener( marker, 'mouseover', function() {
                                            // Setting the content of the InfoWindow
                                            var filo_content = '<div id="info_map"><h3>' + f_title + '</h3></h5><a href="'+ f_link +'"><h5>Leggi...</h5></a>' + '</div>';                                                
                                            infowindow.setContent(filo_content);                                             
                                            infowindow.open(map, marker);
                                            }); 

                              markersArray.push(marker);   
                          } 
                          else {
                            alert("Geocode was not successful for the following reason: "
                              + status);
                          } // chiusura else

                        });

                      }  //chiusura if controllo distanza

                    }

              } // chiusura callback 
```

# git - Git推送：致命：内存不足，malloc失败

> ID：11135764
> 
> 赞同：8
> 
> 时间：2012-06-21T09:58:49.227
> 
> 标签：git

推送到远程服务器时出现错误：

```
Counting objects: 58, done.
Compressing objects: 100% (35/35), done.
fatal: Out of memory, malloc failed (tried to allocate 595059947 bytes)
error: pack-objects died of signal 13
error: failed to push some refs to 'git@cassandra.predictioninstitute.com:development'" 
```

我认为问题在于我不小心提交了一些非常大的日志文件。但我随后删除了它们（git rm logfile），但错误仍然存​​在。而且它们不会出现在“git status”中。我该如何从中恢复？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:56:47.080

我无法从你的评论中看出你是反对改写历史，还是不反对。如果您不反对，此命令将从您的历史记录中删除大文件。

**警告：这是破坏性的和不可逆转的。**首先备份您的存储库。如果您不喜欢结果，您可以简单地恢复备份：

```
git filter-branch --index-filter 'git rm --cached --ignore-unmatch <file>' \
--prune-empty --tag-name-filter cat -- --all 
```

`<file>`该命令将从您的分支历史记录中删除。为每个给您带来麻烦的文件运行它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-23T12:18:48.760

以下命令为我解决了这个问题：

```
git config --global pack.windowMemory 256m 
```

这会影响增量压缩的有效性，因此您可能需要先尝试更大的尺寸，例如 1g，具体取决于您的硬件和带宽。

更多细节在这里：[https ://www.kernel.org/pub/software/scm/git/docs/git-pack-objects.html](https://www.kernel.org/pub/software/scm/git/docs/git-pack-objects.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-26T10:42:07.800

我在推送到树莓派上托管的 git-repo 时遇到了这个错误。我尝试推送的文件之一大于 git 服务器上的可用内存（内存 + 交换）。

通过在 git 服务器上临时创建一个新的交换文件解决了这个问题：

`dd if=/dev/zero of=/media/store/swapfile bs=1024 count=655360`

`mkswap /media/store/swapfile`

`swapon /media/store/swapfile`

通过运行以下命令验证是否添加了新的交换分区：

`swapon`,`cat /proc/swaps`或`free`

（我选择不将交换文件添加到`/etc/fstab`，因此交换文件将在重新启动后消失。）

# c# - Linq2SQL 查询中可能出现无效强制转换

> ID：11135765
> 
> 赞同：0
> 
> 时间：2012-06-21T09:58:49.957
> 
> 标签：c#, .net, linq, linq-to-sql, casting

我在使用 Linq2SQL 查询时遇到了问题。对违规查询的剖析产生了这个令人困惑的行为的最小示例。

```
NorthwindDataContext db = 
  new NorthwindDataContext();
IEnumerable<int> q =
  from x in db.Categories
  select (int)(object)new System.Collections.ArrayList(x.CategoryID);
int[] ouch = q.ToArray(); 
```

（`CategoryID`是一个`int`。）最后，`ouch`将用零填充（数据库中的每个类别一个零）。我在这个例子中使用了`int`和；`ArrayList`确切的类型无关紧要。重复这种现象需要的要点是：

1.  LINQ2SQL。使用本地数据源将产生预期的强制转换异常
2.  `select`在表达式中使用查询的数据库表的属性。如果没有使用查询表的列，则会引发强制转换异常。

我的问题是，为什么上面的代码没有产生异常，试图`ArrayList`将`int`?

根据LINQPad生成的SQL代码：

```
SELECT NULL AS [EMPTY]
FROM [Categories] AS [t0] 
```

作为我问题的背景：我的原始代码如下所示：

```
IEnumerable<ParentClass> q =
  (from x in db.SomeTable
  select (ParentClass) new ChildClass { SomeProperty = x.SomeColumn })
  .ToArray(); 
```

`ChildClass`继承自`ParentClass`。此代码虽然输入正确且语义合理，但会引发异常。仅当`db`是 Linq2SQL 连接而不是本地数据源时才会发生这种情况。试图了解这种行为的原因导致我找到了上面发布的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:46:55.980

没有转换异常发生，因为转换被发送到数据库中，在数据库中它们由 .net 之外的规则执行。

这与[此方法](https://stackoverflow.com/a/648247/8155)不抛出的原因相同。

这与查询中的字符串比较（默认情况下）不区分大小写的原因相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:06:48.383

```
NorthwindDataContext db = new NorthwindDataContext();
IEnumerable<int> q =
  from x in db.Categories
  select x.CategoryID;

int[] ouch = q.ToArray(); 
```

# java - 如何在 ActiveMQ 中与一个消费者一起消费 N 条消息

> ID：11135768
> 
> 赞同：0
> 
> 时间：2012-06-21T09:58:54.140
> 
> 标签：java, activemq

以下是我的消费者：

```
 public static void main(String[] args) throws JMSException {
        // Getting JMS connection from the server
        ConnectionFactory connectionFactory
            = new ActiveMQConnectionFactory(url);
        Connection connection = connectionFactory.createConnection();
        connection.start();

        // Creating session for seding messages
        Session session = connection.createSession(false,
            Session.AUTO_ACKNOWLEDGE);

        // Getting the queue 'TESTQUEUE'
        Destination destination = session.createQueue(subject);

        // MessageConsumer is used for receiving (consuming) messages
        MessageConsumer consumer = session.createConsumer(destination);

        // Here we receive the message.
        // By default this call is blocking, which means it will wait
        // for a message to arrive on the queue.
        Message message = consumer.receive();
        System.out.println(message);

     // There are many types of Message and TextMessage
        // is just one of them. Producer sent us a TextMessage
        // so we must cast to it to get access to its .getText()
        // method.
        if(message instanceof ObjectMessage){
            ObjectMessage objectMessage  = (ObjectMessage)message;
            System.out.println(" Received Message : '"+objectMessage.getObject()+" '");
        }

        connection.close();
    } 
```

队列中有 10 条消息。
现在，每个消费者消费 1 条消息。我希望每个消费者消费 10 条消息。
我应该为此做哪些改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:41:52.250

队列的本质是你有一个生产者和一个消费者。您应该为此使用主题。

# java - Yajsw Stop INFO Log message while start stop daemon under linux

> ID：11135770
> 
> 赞同：1
> 
> 时间：2012-06-21T09:59:05.073
> 
> 标签：java, linux, daemon, java-service-wrapper

我正在使用 Yajsw 将我的应用程序作为守护进程运行。

对于状态调用，我想查看“正在运行”或“已停止”，但我收到了如下所示的消息

```
SW043305-SRV01:/etc/init.d # ./testDaemon status 
15.06.2012 16:13:57 org.apache.commons.vfs.VfsLog info 
INFO: Using "/tmp/vfs_cache" as temporary files store. 
15.06.2012 16:13:58 org.rzo.yajsw.os.posix.PosixService init 
INFO: /etc/init.d/testDaemon already exists 
15.06.2012 16:13:58 org.rzo.yajsw.os.posix.PosixService getPid 
INFO: wrapper pid file: /var/run/wrapper.testDaemon.pid 
```

我如何自定义打印的结果。在 windows 下好消息，是专门为 linux 做的任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:45:06.847

我已经使用相当于这个产品的 Tanuki 软件 4 年多了，从一开始我的方法就包括这样一个事实，即（在你的情况下）YAJSW 并不真正知道底层应用程序的状态是什么——它只知道是它启动了一个 JVM，指示它加载您在其配置文件中指定的类，并且 JVM 尚未对 YAJSW 做出否定响应或终止。

所以 - 我想让我的 java 应用程序失明，但让每个人都可以知道 24x7 应用程序在其工作中的位置，所以我的 java 守护程序通常将状态和面向操作的信息发布到数据库表中 - 我构建了一个简单的 swing客户端显示历史和当前状态数据。我的是一个简单的单点解决方案，不值得进行大量以操作为中心的工作，但我也添加了支持，使恶魔尽可能自主（不需要操作干预）。

例如，我添加了识别 Oracle 数据库错误并从中恢复的逻辑，包括识别可重试请求，其中错误是暂时的（空间不足，Oracle 数据库实例尚未完全启动，Oracle 数据库实例正在关闭等），我可以将状态信息回显到状态表，然后定期重试直到成功。

# c# - 将不同的选项传递给方法

> ID：11135771
> 
> 赞同：2
> 
> 时间：2012-06-21T09:59:05.380
> 
> 标签：c#, .net

我正在寻找一种将不同选项作为参数传递给方法的方法。假设用户可以选择 6 个选项中的任何一个或全部或其中的任何子集。所以他可以选择所有选项，只有选项 1、2 和 4，只有选项 1、3、5 和 6 等等......

我如何有效地传递这个？

我正在考虑使用枚举，因为您可以进行按位加法，但我错过了从那里开始的下一个难题：

我的方法是否可以变成这样：

```
public void Foo(byte selectedOptions)
{
   // How do I check whether an option has been selected??
   if (selectedOptions >= Option.Whatever) DoThis();
} 
```

所以你看我有点坚持按位比较，我想知道这是否是正确的方法......

我不想做的是：

```
public void Foo(bool option1Selected, bool option2Selected, etc...); 
```

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T10:03:28.010

使用枚举标志

```
[Flags]
public enum FlagTest
{
    None = 0x0,
    Flag1 = 0x1,
    Flag2 = 0x2,
    Flag3 = 0x4
} 
```

要选择多个选项，请使用按位或

```
FlagTest testItem = FlagTest.Flag1 | FlagTest.Flag2; 
```

要检查是否选择了标志，请使用按位和

```
if ((testItem & FlagTest.Flag1) == FlagTest.Flag1)
{
     // Do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:01:41.927

用户参数关键字：

```
public void Foo(params string[] options); 
```

然后您可以将无限的字符串参数传递给函数，并在 string[] 数组中读取它们。

或使用枚举（恕我直言，这是更好的方法）：

```
[Flags]
public enum MyEnum {
    Value1 = 1,
    Value2 = 2,
    Value3 = 4,
    Value4 = 8,
    Value5 = 16,
    Value6 = 32,
}
public void Foo(MyEnum value){
    if (value & MyEnum.Value1 > 0){
        // we have Value1 passed
    }
} 
```

并将其称为：

```
Foo(MyEnum.Value1 | MyEnum.Value4 | MyEnum.Value10); 
```

枚举值不应该是连续的 - 像 1,2,3,4,5，但标志值 - 2^x。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:02:45.170

你想和你的旗帜

```
public void Foo(Option selectedOptions) 
{
  if ((selectedOptions & Option.Whatever)>0) 
  {
     // whatever
  }
} 
```

你还应该用`[Flags]`

例如：

```
[Flags]
public enum Option 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T10:04:51.527

传统上，有几种方法可以实现您所描述的。第一个是定义一个结构：

```
public class FooOptions
{
    bool Fizz;
    bool Buzz;
    bool Boom;
} 
```

...然后您的方法的调用者将传递一个实例，并将相应的字段设置为 true。

标志枚举是另一种解决方案：

```
public enum FooOptions
{
    Fizz = 1,
    Buzz = 2,
    Boom = 4,
} 
```

...然后您将使用以下内容进行测试：

```
if ((options & FooOptions.Fizz) == FooOptions.Fizz) { ... } 
```

然而，如今，C# 具有可选和命名参数，这意味着您的最终方法（您不想做的那个）将是最明智的：

```
public void Foo(bool fizz = false, bool buzz = false, bool boom = false)
{
    ...
} 
```

...然后您可以使用任何参数排列来调用它，例如：

```
Foo(fizz: true, boom: true);
Foo(buzz: true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T10:06:41.347

您可以使用`HashSet<YourEnum>`来保存一组选项。

```
public void Foo(HashSet<YourEnum> selectedOptions)
{
    if(selectedOptions.Contains(YourEnum.Option1))
        DoSomething();
} 
```

使用 just`enum`很好，但对我来说，`Contains()`方法是测试选项的更具可读性的方式。

# python - 如何在 django 1.2 中内联的模型的多对多字段选择条目中添加属性？

> ID：11135774
> 
> 赞同：0
> 
> 时间：2012-06-21T09:59:12.393
> 
> 标签：python, django

我有 3 个模型：

```
class POHeader(models.Model):
   number = models.CharField(max_length="5", unique=True)

class Modules(models.Model):
   # this has M:M relationship with the Service model
   name =  models.CharField(max_length="5", unique=True)

class Service(models.Model):
   #id is the key field which is auto generated 
   # apart from other attributes ..
   poheader = models.ForeignKey(POHeader)
   modules = models.ManyToManyField(Module) 
```

Service modelform 内联到 POHeader。此外，这些模块还有 admin.py 中使用的多项选择：

```
class ServiceForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(ServiceForm, self).__init__(*args, **kwargs)

    modules = forms.ModelMultipleChoiceField(
        queryset=Module.objects.all(),
        required=False,
        widget=forms.CheckboxSelectMultiple())

    class Meta:
        """                                                                                                                                                                      
        Service Model                                                                                                                                                            
        """
        model = Service 
```

现在的问题是，对于为每个服务选择的每个模块，我想为该模块添加其他详细信息。如何实现？这些属性是否需要添加到服务模型中？这怎么可能实现。例如对于一个 poheader 1 条目：

> 服务 1 模块 1 数量 25 模块 2 数量 27
> 
> 服务 2 模块 7 数量 2

**这里我想为为服务选择的模块添加附加属性数量 qty**

请记住，我们正在使用 Service as admin.TabularInline 执行 POHeader 条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:15:25.380

注意这之间的区别

```
modules = models.ManyToManyField(modules) 
```

和这个

```
modules = models.ManyToManyField(Modules) 
```

另外，根据[1.2 docs](https://docs.djangoproject.com/en/1.2/topics/db/models/#intermediary-manytomany)，您应该*通过*

```
modules = models.ManyToManyField(Module, through=ServiceModule) 
```

[这个公认的问题](https://stackoverflow.com/questions/3153026/django-1-2-1-inline-admin-for-many-to-many-fields)也可能有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:55:47.683

如果我正确理解了这个问题，您需要为多对多关系创建一个模型。

```
class ServiceModule(models.Model):
    service = models.ForeignKey(Service)
    module = models.ForeignKey(Module)
    quantity = models.PositiveIntegerField(default=0) 
```

然后在多对多关系上指定它。

```
class Service(models.Model):
   poheader = models.ForeignKey(POHeader)
   modules = models.ManyToManyField(Module, through=ServiceModule) 
```

[https://docs.djangoproject.com/en/1.2/topics/db/models/#extra-fields-on-many-to-many-relationships](https://docs.djangoproject.com/en/1.2/topics/db/models/#extra-fields-on-many-to-many-relationships)

# php - 获取非英语的用户输入

> ID：11135778
> 
> 赞同：1
> 
> 时间：2012-06-21T09:59:22.950
> 
> 标签：php, javascript, html, translation, transliteration

我已经在服务器上安装了[乌尔都语](http://en.wikipedia.org/wiki/Urdu)字体...网站的内容没问题...但是在获取用户输入时出现问题...在文本框中输入时显示英文...那么，如何将实现在文本框中启用语言（乌尔都语）...

我正在使用 PHP（Yii 框架）...以下是 css...

```
@font-face {
    font-family: nafees;
    src: url('font/trado.ttf');
}

.urdu{
    font: normal 20pt nafees;
    margin-right: 10px;
    text-align: center;
    direction: rtl;
    unicode-bidi: embed;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:25:32.720

如果用户没有 Urde 键盘布局，您可以提供两种在 Urdu 中输入文本的替代方法：

1.  显示带有乌尔都语布局的[虚拟键盘。](http://mottie.github.com/Keyboard/index.html)

2.  使用某种[音译服务](https://developers.google.com/transliterate/v1/reference)将用户输入的内容即时翻译为乌尔都语键盘布局。

编辑：[这里](http://gate2home.com/Urdu-Keyboard)有一个例子。

Edit2：[另一个例子](http://www.branah.com/urdu)，应该很容易将 .js 文件复制到您的项目并将其用于您的文本输入:)

Edit3: [http://allanguages.info/#layouts=](http://allanguages.info/#layouts=)是用于虚拟键盘的js库的网页，易于使用和良好的文档：D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T10:05:10.497

文本框的输入是由键盘定义的，而不是网站。确保您的计算机上的键盘设置为乌尔都语，然后重试。

您可以更改文本框中文本的唯一内容是颜色、位置、大小以及 javascript 的 funk 思想。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T10:08:51.783

问题是您的**输入法**，客户端，而不是您的代码。

这是一个特定于操作系统的设置，用户必须设置才能输入另一个字母（并且它是系统范围的，它不仅影响网站）。

如果客户没有乌尔都语键盘，正如您在评论中所说，他应该如何输入乌尔都语字符？我唯一的建议是打开一个字符映射并有选择地逐个选择字形，从而构建预期的字符串......有点麻烦。

# css - Wordpress：访问 CSS 文件

> ID：11135780
> 
> 赞同：0
> 
> 时间：2012-06-21T09:59:32.547
> 
> 标签：css, wordpress, dashboard

我是一个外行，我与构建我的 wordpress 网站的人发生了争执，他删除了 CSS 文件，从而改变了网站的设计。他用 Wordpress 注册了模板，但我有 wordpress 仪表板的所有代码。我的问题是如何限制他对该文件的访问？

乔尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:00:01.483

听起来他要么有你的 wordpress 安装或 FTP 访问的管理员帐户。如果您让他成为管理员，或者他自己在 WP 上创建，我会删除用户或更改密码（如果他有主 PW）。

如果他有 FTP 访问权限，基本上也是如此。

# ios - ios 应用程序使用 web 服务

> ID：11135784
> 
> 赞同：4
> 
> 时间：2012-06-21T09:59:58.587
> 
> 标签：ios, json, web-services, rest

我已经对 Web 服务进行了大量阅读和研究，并从 iOS 应用程序端使用它们。但是许多网站非常简短，并没有深入了解如何使用和解析数据。目前我正在阅读 raywenderlich 的教程`http://www.raywenderlich.com/2965/how-to-write-an-ios-app-that-uses-a-web-service`并阅读了一个 SO 线程 `http://stackoverflow.com/questions/7364326/recommendations-for-net-web-service-format-protocol-for-android-iphone-etc-i`，但我仍然不清楚我应该如何处理它。

据我所知，目前使用 Web 服务的几种方法是 REST 和 SOAP 协议。（我在 xcode 中的应用程序和在 VB 中完成的 web 服务（.asmx 文件））

我是那种通过教程而不是阅读文章等来学习更多和更快的人。有没有关于使用 .asmx（使用 VS 构建的 web 服务）而不是 php 的教程。就我个人而言，我更喜欢解析 JSON 的 REST 协议，因为很多人说它更容易使用，而且 Apple 已经为它提供了一个 lib/framework。

如果有人能指出我正确的方向，那就太好了，因为我觉得学习如何让 iOS 应用程序使用 Web 服务在未来的应用程序开发中非常重要。

编辑：通过 php webservice 阅读后，有一些我没有的东西。

功能兑换自`http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app`

```
// Put parameters into local variables
        $rw_app_id = $_POST["rw_app_id"];
        $code = $_POST["code"];
        $device_id = $_POST["device_id"] 
```

如果我使用 asmx 文件，我是否还必须在我的每个 web 方法中声明这样的内容？

我的一种 webMethod 的 EG（基本 CRUD）

[网络方法]

```
 public string insertUser(string User, string Password, string Gender)
        {

               try
                {

                    string connectionString = ConfigurationManager.ConnectionStrings["mysql"].ToString();
                    MySqlCommand dCmd = new MySqlCommand();
                    using (MySqlConnection mysqlCon = new MySqlConnection(connectionString))
                    {

                        if (do_check_record(User) == false)
                            {

                                mysqlCon.Open();
                                dCmd.CommandText = "INSERT into tbl_login (username,password,gender) values (?username,?password,?gender)";
                                dCmd.CommandType = CommandType.Text;
                                dCmd.Parameters.Add(new MySqlParameter("?username", User));
                                dCmd.Parameters.Add(new MySqlParameter("?password", Password));
                                dCmd.Parameters.Add(new MySqlParameter("?gender", Gender));
                                dCmd.Connection = mysqlCon;
                                dCmd.ExecuteNonQuery();
                                mysqlCon.Close();

                            }
                            else

                            {
                                return string.Format( "User exists in data_base");
                            }

                    }

                    return string.Format("data_base insert");

                }
                catch (Exception ex)
                {
                    return string.Format(ex.Message);
                }

} 
```

从应用程序端消费网络服务

本教程中给出的示例是

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    NSLog(@"Want to redeem: %@", textField.text);

    // Get device unique ID
    UIDevice *device = [UIDevice currentDevice];
    NSString *uniqueIdentifier = [device uniqueIdentifier];

    // Start request
    NSString *code = textField.text;
    NSURL *url = [NSURL URLWithString:@"http://www.wildfables.com/promos/"];
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request setPostValue:@"1" forKey:@"rw_app_id"];
    [request setPostValue:code forKey:@"code"];
    [request setPostValue:uniqueIdentifier forKey:@"device_id"];
    [request setDelegate:self];
    [request startAsynchronous];

    // Hide keyword
    [textField resignFirstResponder];

    // Clear text field
    textView.text = @"";    

    return TRUE;
} 
```

但它不应该是一个`IBAction`调用按钮而不是一个`BOOL`？

```
- (void)requestFinished:(ASIHTTPRequest *)request
{    

    if (request.responseStatusCode == 400) {
        textView.text = @"Invalid code";        
    } else if (request.responseStatusCode == 403) {
        textView.text = @"Code already used";
    } else if (request.responseStatusCode == 200) {
        NSString *responseString = [request responseString];
        NSDictionary *responseDict = [responseString JSONValue];
        NSString *unlockCode = [responseDict objectForKey:@"unlock_code"];

        if ([unlockCode compare:@"com.razeware.test.unlock.cake"] == NSOrderedSame) {
            textView.text = @"The cake is a lie!";
        } else {        
            textView.text = [NSString stringWithFormat:@"Received unexpected unlock code: %@", unlockCode];
        }

    } else {
        textView.text = @"Unexpected error";
    }

}

- (void)requestFailed:(ASIHTTPRequest *)request
{    
    NSError *error = [request error];
    textView.text = error.localizedDescription;
} 
```

如果我错了，请纠正我，但本`- (void)requestFinished:(ASIHTTPRequest *)request`教程中使用的这种方法是解析 JSON 的方法，对吧？如果是这样，对于我调用的每个网络方法，我都必须提出一个新的请求和一个新的`- (void)requestFinished:(ASIHTTPRequest *)request`

编辑：任何帮助将不胜感激......我是这方面的初学者，希望有经验的人可以指导我完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T03:28:20.800

> 我是否还必须在我的每个网络方法中声明这样的内容？

您在上面发布的代码是从 POST 中提取数据。asmx 文件应该已经为您完成了这项工作。您在 POST 中传递的参数将转换为传递给 MethodName 的参数（请参阅：[访问 XML Web 服务](http://msdn.microsoft.com/en-us/library/aa719483%28v=vs.71%29.aspx)）。

* * *

**更新**

因此，如果我理解正确，您的 Web 服务端点是`http://xxx.yyy/zzz.asmx/insertUser`. 然后，您将使用变量用户名、密码和性别发送帖子正文：

```
[request setPostValue:username forKey:@"User"];
[request setPostValue:password forKey:@"Password"];
[request setPostValue:gender forKey:@"Gender"]; 
```

* * *

> 但它不应该是一个 IBAction 按钮来调用而不是一个 BOOL 吗？

No.`-textFieldShouldReturn:`是[UITextField的](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html)[委托](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)方法。它不是 IBAction。

当用户触摸文本字段时，键盘将变为活动状态。当按下键盘上的返回按钮时，将向文本字段的委托发送`-textFieldShouldReturn:`消息。

结果是当在键盘上按下 return 或 done 时调用此方法。

* * *

**为我错过的部分添加了更多信息**

> 如果我错了，请纠正我，但本`-requestFinished:`教程中使用的这种方法是解析 JSON 的方法，对吧？如果是这样，对于我调用的每个网络方法，我都必须提出一个新的请求和一个新的`-requestFinished:`

`-requestFinished:`不，每个班级只有一个。您可以将您的客户端分成几个类：每个 Web 服务 URL 一个，或者您需要区分一个`-requestFinished:`.

```
- (void)requestFinished:(ASIHTTPRequest *)request
{
    if ([request.originalURL.absoluteString isEqualToString:@"http://xxx.yyy/zzz.asmx/methodName"]) {
        // handle methodName endpoint.
    }
} 
```

如果您不喜欢委托的工作方式，您也可以使用`-setCompletionBlock:`and`-setFailedBlock:`代替。`-setDelegate:`更好的是，选择像 @Stew 建议的 AFNetworking 之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T03:28:11.340

我建议使用 AFNetworking 库（[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)）并使用内置的 AFJSONRequestOperation：[https ://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFJSONRequestOperation.h](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFJSONRequestOperation.h)

它没有实现“请求完成”回调，而是在请求完成时调用成功块，并将 JSON 对象作为参数传入。您可以将该对象解析为成功块中所需的任何内容。

在此答案中有一个如何使用它的示例[https://stackoverflow.com/a/8920596/223558](https://stackoverflow.com/a/8920596/223558)

# groovy - repast simphony：计算与属性匹配的海龟

> ID：11135786
> 
> 赞同：1
> 
> 时间：2012-06-21T10:00:10.740
> 
> 标签：groovy, simulation, agent, repast-simphony

我正在使用repast simphony groovy API 编写模拟程序。

有一个方法 count(myTurtles) 允许我计算特定类 myTurtle 扩展 BaseTurtle 的代理（海龟）的数量。

我的问题是：有没有办法过滤这个计数，所以我只能让海龟匹配一个属性的特定值（形状、颜色、大小......）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:16:00.363

不知道 Repast Simphony （而且它的 groovy 方面的文档充其量似乎很少），但是在 Groovy 中，如果您有一个对象列表，您可以使用以下方法找到所有具有匹配属性的对象：

```
def filteredList = list.findAll { it.color == 'red' } 
```

# iphone - 在 iOS 中用不同颜色绘制 UIBezierPath

> ID：11135789
> 
> 赞同：1
> 
> 时间：2012-06-21T10:00:23.987
> 
> 标签：iphone, ios, cocoa-touch, core-graphics, uibezierpath

我正在使用`UIBezierPath`绘图，我想为我的路径选择不同的颜色，但是发生的事情是所有路径都设置为当前选择的颜色，所以我该如何解决这个问题，下面是我的代码

```
(void)drawRect:(CGRect)rect
{
    if(changecolor)
    {
        AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
        strokeColor = appDelegate.color;

        SEL blackSel = NSSelectorFromString(strokeColor);
        UIColor* tColor = nil;
        if ([UIColor respondsToSelector: blackSel])
            tColor  = [UIColor performSelector:blackSel];
        [tColor setStroke];
        [tColor setFill];

        **for (UIBezierPath *_path in pathArray)      
           [_path strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];**              
    }
    else
    {    
        [[UIColor redColor] setStroke];
        [[UIColor redColor] setFill];

        *for (UIBezierPath *_path in pathArray)         
            [_path strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];*
    }
} 
```

这里我的贝塞尔路径存储在一个数组中，所以请让我知道我应该如何进行

问候兰吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T15:46:17.560

设置循环内的颜色：

```
 for (UIBezierPath *path in pathArray) {
       [myColor setStroke]
       [path strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];
     } 
```

关于命名约定，仅使用 _ 例如变量，而不是本地人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T15:36:48.460

尝试在不同的 s 上使用适当的 StartingPoint 和 EndingPoint 绘制不同**颜色**的**s**`UIBezierPath`，然后将这些 ShapeLayers 添加到主 ShapeLayer 中，然后将其添加到您的视图中。****`CAShapeLayer``self.mainShapeLayer``layer`****

 ******例如：**`-drawRect`在初始化并添加`mainShapeLayer`到你`view`的之后，用不同的颜色 调用这个方法`layer`

```
//In drawRect
self.shapeLayer_main = [CAShapeLayer layer];
[self.layer addSubLayer:self.mainShapeLayer];

-(void)drawPathHavingStartPoint:(CGPoint )startPoint andEndPoint:(CGPoint )endPoint withColor:(UIColor *)color
{
 CAShapeLayer* shapeLayer = [CAShapeLayer layer];
 //Add lineWidth, strokeColor, fillColor, path (with the points) and then add it to the mainShapeLayer
 [self.mainShapeLayer addSublayer:shapeLayer];
 } 
```

希望这能解决您的问题。****

# html - 在报告生成器中查找显示 html 内容的文件

> ID：11135793
> 
> 赞同：-2
> 
> 时间：2012-06-21T10:00:33.743
> 
> 标签：html, sql-server-2008, reporting-services, reporting

> 我正在使用 Microsoft SQL Server 2008 报表生成器。我设计了一些报告并从浏览器访问它。下图将显示确切含义：

![浏览器中的报表服务器](../Images/5743a93e721419d7257d1128bab4f865.png)

> 我想编辑上面的 html 页面，但我找不到文件。
> 
> 这是程序文件中 ReportServer 文件夹中的图像。

![在此处输入图像描述](../Images/37fd0148956ffdd4b1dcc309e94ed945.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:13:38.417

您看到的页面不是网页：它是来自 SSRS Web 服务器的响应。您无法自定义该视图。

# c - 如何在本地使用 UDP 套接字广播消息？

> ID：11135801
> 
> 赞同：10
> 
> 时间：2012-06-21T10:00:53.210
> 
> 标签：c, linux, sockets, ipc

我想在本地向许多应用程序广播消息。为此，我认为 UDP 套接字是最好的 IPC，如果我不习惯请纠正我。

为此，我使用以下代码：

对于广播：

```
/*
** broadcaster.c -- a datagram "client" that can broadcast
*/

#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>

#define SERVERPORT 4950    // the port users will be connecting to

int main(int argc, char *argv[])
{
    int sockfd;
    struct sockaddr_in their_addr; // connector's address information
    struct hostent *he;
    int numbytes;
    int broadcast = 1;
    //char broadcast = '1'; // if that doesn't work, try this

    if (argc != 3) {
        fprintf(stderr,"usage: broadcaster hostname message\n");
        exit(1);
    }

    if ((he=gethostbyname(argv[1])) == NULL) {  // get the host info
        perror("gethostbyname");
        exit(1);
    }

    if ((sockfd = socket(AF_UNIX, SOCK_DGRAM, 0)) == -1) {
        perror("socket");
        exit(1);
    }

    // this call is what allows broadcast packets to be sent:
    if (setsockopt(sockfd, SOL_SOCKET, SO_BROADCAST, &broadcast,
        sizeof broadcast) == -1) {
        perror("setsockopt (SO_BROADCAST)");
        exit(1);
    }

    their_addr.sin_family = AF_UNIX;     // host byte order
    their_addr.sin_port = htons(SERVERPORT); // short, network byte order
    their_addr.sin_addr = *((struct in_addr *)he->h_addr);
    memset(their_addr.sin_zero, '\0', sizeof their_addr.sin_zero);

    if ((numbytes=sendto(sockfd, argv[2], strlen(argv[2]), 0,
             (struct sockaddr *)&their_addr, sizeof their_addr)) == -1) {
        perror("sendto");
        exit(1);
    }

    printf("sent %d bytes to %s\n", numbytes,
        inet_ntoa(their_addr.sin_addr));

    close(sockfd);

    return 0;
} 
```

并听：

```
/*
** listener.c -- a datagram sockets "server" demo
*/

#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>

#define MYPORT "4950"    // the port users will be connecting to

#define MAXBUFLEN 100

// get sockaddr, IPv4 or IPv6:
void *get_in_addr(struct sockaddr *sa)
{
    if (sa->sa_family == AF_INET) {
        return &(((struct sockaddr_in*)sa)->sin_addr);
    }

    return &(((struct sockaddr_in6*)sa)->sin6_addr);
}

int main(void)
{
    int sockfd;
    struct addrinfo hints, *servinfo, *p;
    int rv;
    int numbytes;
    struct sockaddr_storage their_addr;
    char buf[MAXBUFLEN];
    socklen_t addr_len;
    char s[INET6_ADDRSTRLEN];
    int optval = 1;

    memset(&hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC; // set to AF_INET to force IPv4
    hints.ai_socktype = SOCK_DGRAM;
    hints.ai_flags = AI_PASSIVE; // use my IP

    if ((rv = getaddrinfo(NULL, MYPORT, &hints, &servinfo)) != 0) {
        fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
        return 1;
    }

    // loop through all the results and bind to the first we can
    for(p = servinfo; p != NULL; p = p->ai_next) {
        if ((sockfd = socket(p->ai_family, p->ai_socktype,
                p->ai_protocol)) == -1) {
            perror("listener: socket");
            continue;
        }

        if(setsockopt(sockfd, SOL_SOCKET,SO_REUSEADDR, &optval, sizeof optval) != 0)
        {
            perror("listener: setsockopt");
            continue;   
        }   

        if (bind(sockfd, p->ai_addr, p->ai_addrlen) == -1) {
            close(sockfd);
            perror("listener: bind");
            continue;
        }

        break;
    }

    if (p == NULL) {
        fprintf(stderr, "listener: failed to bind socket\n");
        return 2;
    }

    freeaddrinfo(servinfo);

    printf("listener: waiting to recvfrom...\n");

    addr_len = sizeof their_addr;
    if ((numbytes = recvfrom(sockfd, buf, MAXBUFLEN-1 , 0,
        (struct sockaddr *)&their_addr, &addr_len)) == -1) {
        perror("recvfrom");
        exit(1);
    }

    printf("listener: got packet from %s\n",
        inet_ntop(their_addr.ss_family,
            get_in_addr((struct sockaddr *)&their_addr),
            s, sizeof s));
    printf("listener: packet is %d bytes long\n", numbytes);
    buf[numbytes] = '\0';
    printf("listener: packet contains \"%s\"\n", buf);

    close(sockfd);

    return 0;
} 
```

问题是我必须像这样传递IP 192.168.1.255 但在实际场景中可能没有eth0接口，只会有环回。那我该如何实现呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T10:27:05.407

服务器不应绑定到您从中获取的地址`getaddrinfo`，而应绑定到`127.255.255.255`（对于环回接口）。

有关广播服务器/客户端的现成示例，请参见[http://www.ccplusplus.com/2011/09/udp-broadcast-client-server-example.html](http://www.ccplusplus.com/2011/09/udp-broadcast-client-server-example.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T10:13:41.020

Unix 域套接字不支持多/广播。

您可以在本地接口 127.0.0.1 上广播。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-10T22:49:07.860

虽然最初的问题没有明确说明，但我相信最初的提问者想要“广播”到在同一操作系统实例上运行的多个应用程序（同一台计算机到旧计时器）。

监听器示例中使用 'SO_REUSEADDR' 支持这一点，Yuvi 的后续评论，最后是使用 IP 多播的建议。

应该澄清原来的问题。

我相信在使用 SO_REUSEADDR 时，在单个 UDP 端口上具有多个绑定器的数据包分发因操作系统而异。我在最近的 Windows 上的经验是，在她释放她的绑定之前，一个单一的“绑定器”被专门提供所有数据包，此时，另一个绑定器被选择并呈现所有收到的数据包，直到她释放，等等......

这显然与最近的 Linux 内核不同，如以下链接所述：[https](https://stackoverflow.com/a/14388707/86375) ://stackoverflow.com/a/14388707/86375 该页面似乎声称 Linux 将循环接收多个绑定器之间的数据包。

最终结果，如果您希望像原始发布者那样使用单个已发送数据报进行多方发送，并且您尝试使用 IP 单播，而不是 IP 多播，您可能会感到失望。（我的经验和上面的链接表明您可以进行多重绑定，但这并不意味着在 Linux 或 Windows 上都可以多次传递接收到的数据报）

原始发帖人应该尝试过使用多播。

# php - 全文搜索中的 MySql SQL_CALC_FOUND_ROWS 问题

> ID：11135802
> 
> 赞同：2
> 
> 时间：2012-06-21T10:00:55.850
> 
> 标签：php, mysql, full-text-search, sql-calc-found-rows

我正在尝试向查询全文索引表的结果添加分页。这是查询：

**普通查询**

```
SELECT *,MATCH(title) AGAINST ("+samsung +galaxy +s3" IN BOOLEAN MODE) 
as score FROM `deals` WHERE `image`!='' AND category=15032 ORDER BY score DESC; 
```

它返回**183**行。

**尝试进行分页**

```
SELECT SQL_CALC_FOUND_ROWS *,MATCH(title) AGAINST 
("+samsung +galaxy +s3" IN BOOLEAN MODE) as score FROM `deals` 
WHERE `image`!='' AND category=15032 ORDER BY score DESC LIMIT 8; 
```

按预期返回 8 行，因为我想每页显示 8 个项目。

接着

```
SELECT FOUND_ROWS(); 
```

它返回`20`项目，而不是`183`原始查询中的项目。我不确定是什么原因造成的。你能帮我解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:27:38.200

你做错了，做分页你需要两个限制，开始和结束，看看这个例子并将限制正确添加到你的代码中

```
mysql> select * from t1 order by actor_id;
+----------+-------------+--------------+---------------------+
| actor_id | first_name  | last_name    | last_update         |
+----------+-------------+--------------+---------------------+
|        1 | PENELOPE    | GUINESS      | 2006-02-15 04:34:33 |
|        2 | NICK        | WAHLBERG     | 2006-02-15 04:34:33 |
|        3 | ED          | CHASE        | 2006-02-15 04:34:33 |
|        4 | JENNIFER    | DAVIS        | 2006-02-15 04:34:33 |
|        5 | JOHNNY      | LOLLOBRIGIDA | 2006-02-15 04:34:33 |
|        6 | BETTE       | NICHOLSON    | 2006-02-15 04:34:33 |
|        7 | GRACE       | MOSTEL       | 2006-02-15 04:34:33 |
|        8 | MATTHEW     | JOHANSSON    | 2006-02-15 04:34:33 |
|        9 | JOE         | SWANK        | 2006-02-15 04:34:33 |
|       10 | CHRISTIAN   | GABLE        | 2006-02-15 04:34:33 |
|       11 | ZERO        | CAGE         | 2006-02-15 04:34:33 |
|       12 | KARL        | BERRY        | 2006-02-15 04:34:33 |
|       13 | UMA         | WOOD         | 2006-02-15 04:34:33 |
|       14 | VIVIEN      | BERGEN       | 2006-02-15 04:34:33 |
|       15 | CUBA        | OLIVIER      | 2006-02-15 04:34:33 |
|       16 | FRED        | COSTNER      | 2006-02-15 04:34:33 |
|       17 | HELEN       | VOIGHT       | 2006-02-15 04:34:33 |
|       18 | DAN         | TORN         | 2006-02-15 04:34:33 |
|       19 | BOB         | FAWCETT      | 2006-02-15 04:34:33 |
|       20 | LUCILLE     | TRACY        | 2006-02-15 04:34:33 |
....

+----------+-------------+--------------+---------------------+
201 rows in set (0.00 sec) 
```

现在你应用限制，开始和结束

```
mysql> select * from t1 order by actor_id limit 0,5;
+----------+------------+--------------+---------------------+
| actor_id | first_name | last_name    | last_update         |
+----------+------------+--------------+---------------------+
|        1 | PENELOPE   | GUINESS      | 2006-02-15 04:34:33 |
|        2 | NICK       | WAHLBERG     | 2006-02-15 04:34:33 |
|        3 | ED         | CHASE        | 2006-02-15 04:34:33 |
|        4 | JENNIFER   | DAVIS        | 2006-02-15 04:34:33 |
|        5 | JOHNNY     | LOLLOBRIGIDA | 2006-02-15 04:34:33 |
+----------+------------+--------------+---------------------+
5 rows in set (0.00 sec)

mysql> select * from t1 order by actor_id limit 6,5;
+----------+------------+-----------+---------------------+
| actor_id | first_name | last_name | last_update         |
+----------+------------+-----------+---------------------+
|        7 | GRACE      | MOSTEL    | 2006-02-15 04:34:33 |
|        8 | MATTHEW    | JOHANSSON | 2006-02-15 04:34:33 |
|        9 | JOE        | SWANK     | 2006-02-15 04:34:33 |
|       10 | CHRISTIAN  | GABLE     | 2006-02-15 04:34:33 |
|       11 | ZERO       | CAGE      | 2006-02-15 04:34:33 |
+----------+------------+-----------+---------------------+
5 rows in set (0.00 sec)

mysql> select * from t1 order by actor_id limit 11,5;
+----------+------------+-----------+---------------------+
| actor_id | first_name | last_name | last_update         |
+----------+------------+-----------+---------------------+
|       12 | KARL       | BERRY     | 2006-02-15 04:34:33 |
|       13 | UMA        | WOOD      | 2006-02-15 04:34:33 |
|       14 | VIVIEN     | BERGEN    | 2006-02-15 04:34:33 |
|       15 | CUBA       | OLIVIER   | 2006-02-15 04:34:33 |
|       16 | FRED       | COSTNER   | 2006-02-15 04:34:33 |
+----------+------------+-----------+---------------------+
5 rows in set (0.00 sec) 
```

所以这个想法是你使用`LIMIT $begin,$number_results`的，当你点击下一步时，它将把 number_result + total_result_per_page 放在 $begin. 假设您在第 3 页，每页显示 10 个结果。($begin=10+10+10=30)

选择......哪里......订购......`LIMIT 30,10`

电子数据交换：

found_rows 将从表的开头返回到您的限制，

```
 mysql> select * from t2 order by actor_id limit 10;
+----------+------------+--------------+---------------------+
| actor_id | first_name | last_name    | last_update         |
+----------+------------+--------------+---------------------+
|        1 | PENELOPE   | GUINESS      | 2006-02-15 04:34:33 |
|        2 | NICK       | WAHLBERG     | 2006-02-15 04:34:33 |
|        3 | ED         | CHASE        | 2006-02-15 04:34:33 |
|        4 | JENNIFER   | DAVIS        | 2006-02-15 04:34:33 |
|        5 | JOHNNY     | LOLLOBRIGIDA | 2006-02-15 04:34:33 |
|        6 | BETTE      | NICHOLSON    | 2006-02-15 04:34:33 |
|        7 | GRACE      | MOSTEL       | 2006-02-15 04:34:33 |
|        8 | MATTHEW    | JOHANSSON    | 2006-02-15 04:34:33 |
|        9 | JOE        | SWANK        | 2006-02-15 04:34:33 |
|       10 | CHRISTIAN  | GABLE        | 2006-02-15 04:34:33 |
+----------+------------+--------------+---------------------+
10 rows in set (0.00 sec)

mysql> select found_rows();
+--------------+
| found_rows() |
+--------------+
|           10 |
+--------------+
1 row in set (0.00 sec)

mysql> select * from t2 order by actor_id limit 2,10;
+----------+------------+--------------+---------------------+
| actor_id | first_name | last_name    | last_update         |
+----------+------------+--------------+---------------------+
|        3 | ED         | CHASE        | 2006-02-15 04:34:33 |
|        4 | JENNIFER   | DAVIS        | 2006-02-15 04:34:33 |
|        5 | JOHNNY     | LOLLOBRIGIDA | 2006-02-15 04:34:33 |
|        6 | BETTE      | NICHOLSON    | 2006-02-15 04:34:33 |
|        7 | GRACE      | MOSTEL       | 2006-02-15 04:34:33 |
|        8 | MATTHEW    | JOHANSSON    | 2006-02-15 04:34:33 |
|        9 | JOE        | SWANK        | 2006-02-15 04:34:33 |
|       10 | CHRISTIAN  | GABLE        | 2006-02-15 04:34:33 |
|       11 | ZERO       | CAGE         | 2006-02-15 04:34:33 |
|       12 | KARL       | BERRY        | 2006-02-15 04:34:33 |
+----------+------------+--------------+---------------------+
10 rows in set (0.00 sec)

mysql> select found_rows();
+--------------+
| found_rows() |
+--------------+
|           12 |
+--------------+
1 row in set (0.00 sec) 
```

它是 12，因为显示了 10 个结果 + id 1 和 2 + 10 个显示的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T11:45:20.237

尝试使用`HAVING`而不是`WHERE`

```
SELECT SQL_CALC_FOUND_ROWS 
    *, 
    MATCH(title) AGAINST ("+samsung +galaxy +s3" IN BOOLEAN MODE) as score 
FROM `deals` 
HAVING`image`!='' 
    AND category=15032 
ORDER BY score DESC 
LIMIT 8; 
```

# jquery - 避免被下载的来源 - 有可能吗？

> ID：11135805
> 
> 赞同：0
> 
> 时间：2012-06-21T10:01:07.413
> 
> 标签：jquery, html

我想在我的页面上添加一个翻书插件（例如[http://www.turnjs.com/](http://www.turnjs.com/)）。所有像这样的插件都使用原始`<img>`标签，我可以在其中看到 URL 并下载图像。我想避免这种情况（我不想让用户下载该图像）为此，我开始想知道一些保护措施。

在这里，我需要一些提示，我该怎么做。

我正在考虑动态生成整个页面。但是，如果我异步加载页面，我可以获得 URL（例如通过 FireBug）

...或者使用空`<img>`标签来动态加载他们的内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T10:05:18.470

作为一般规则，您作为资产提供给网页的任何东西都无法得到保护。图片、CSS / JS 文件、Flash SWF，你有什么。当您的浏览器加载页面时，将下载布局中的所有资产。

虽然这是在幕后默默执行的，但事实仍然是这些文件已经在客户的计算机中。在那一点上，狡猾的用户无法阻止您获取您的文件（因为，由于浏览的唯一性质，他/她*已经拥有*）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T11:51:34.240

正如这里的所有人所提到的：用户将始终能够下载可用于其浏览器的任何资产 - 事实上，如果看到您的页面，他们已经这样做了。

无论如何，您可以做的是通过使图像的 URL 无效来阻止访问者下载您已经第二次交付的图像。这需要在您的服务器上编写一些脚本：

1.  在交付您的 HTML 页面时，为您希望通过对页面的每个请求“保护”的每个图像创建一个唯一令牌。将它与图像的标识符一起存储在缓存（或数据库）中（例如服务器上图像的本地路径或数据库中图像表示的 id）。不要将图像的“真实”网址放在您的 HTML 或 JavaScript 中，而是使用以下内容：`<img src="http://yourdomain.com/images/#TOKEN" alt="protected image">`或`<img src="http://yourdomain.com/images/imageHandler.jpg?requestID=#TOKEN" alt="protected image">`

2.  浏览器将尝试从 img 的 src URL 加载资源。如果您在服务器上收到对该资源的请求，请立即交付图像并从缓存中删除令牌。如果您在缓存中找不到令牌，请提供一个错误页面，例如*"Your download token for this resource has been used"*。

3.  确保使用适当的缓存控制标头交付图像（请参阅：缓存控制的[HTTP/1.1 标头字段定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9)）。这应该可以防止浏览器将图像存储到硬盘。（请注意：浏览器将始终尝试为其用户实现最佳性能，所以不要指望它 - 但由于根据 http 标准这是必须尊重的标题，我猜浏览器只会存储图像在记忆中。）

这样，简单地复制`<img>`src 并尝试下载的用户只会进入错误页面。该 url 不再有效，因为他的浏览器之前已经使用它来下载图像。

顺便说一句，这就是大多数文件共享和在线视频流服务保护其下载链接的方式。每个请求和资源只有一个令牌，一旦资源交付，令牌就会被删除。如果没有令牌，那么就没有资源，并且资源的真实 URL 永远不必透露，实际上不需要任何“真实” URL。

仍然：这是默默无闻的安全。但在 80% 的情况下，这将阻止用户下载您的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:08:40.997

无论如何，所有图像都将通过浏览器下载。因此用户可以访问它。如果你想限制这一点，也许你可以使用带有某种加密的 Flash（我没有很好地使用 Flash）。

# c# - linq 检查字符串值

> ID：11135806
> 
> 赞同：1
> 
> 时间：2012-06-21T10:01:15.780
> 
> 标签：c#, c#-4.0, c#-3.0

有没有更好的方法来使用 Linq 编写以下内容。

需要检查一个bool返回的值是真还是假

```
string checkvalue = nodeIterator.Current.Value.ToString();
if (checkvalue == "true")
{
    taxSpecification = 3;
}
else if (checkvalue == "false")
{
    taxSpecification = 3;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:13:07.527

没有 Linq，但你可以写成

```
if (checkvalue == "true" || checkvalue == "false")
{
    taxSpecification = 3;
}else
{
  // wrong input 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:06:11.373

您可以解析字符串以返回布尔值：

```
bool myBool;
if (!bool.TryParse(checkvalue, out myBool)
    throw new Exception("This is not a valid bool");
... 
```

如果您想要更通用的方法（即字符串可能不是有效的 TryParse 值）：

```
if(new[] {"true", "false"}.Contains(checkvalue))
    taxSpecification = 3; 
```

这并没有真正解决 Linq 部分，但可以帮助循环体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:08:23.097

尝试这个

```
 var checkvalue = "false";
        bool myRes = false;
        int tax = 0;

        if (bool.TryParse(checkvalue, out myRes))
        {
            tax = (myRes) ? 3 : 4;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T10:16:08.710

当一个简单的 .Net 2.0 逻辑就足够时，为什么要使用 LINQ 或一些花哨的东西

```
switch (nodeIterator.Current.Value.ToString())
{
    case "true":
    case "false":
         taxSpecification = 3;
    break;
} 
```

# asp.net-mvc-3 - 将 1 天的时间跨度转换为日期时间时出错

> ID：11135809
> 
> 赞同：1
> 
> 时间：2012-06-21T10:01:25.153
> 
> 标签：asp.net-mvc-3, datetime, timestamp

我有一个应用程序，我在其中显示航班出发日期和到达日期以及飞行时间。

对于 Flight Time Duration ，我只需减去给我 TimeStamp 之类的日期

```
TimeStamp duration = arrivalDate.subtract(departureDate); 
```

所以记录就像

```
 Departure          Arrival                   Duration
               Sat 07:05A         Sat 09:20A                2h 15m
               Sat 10:10A         Sat 11:15A                1h 05m
               Sat 05:15P         Sat 07:16P                2h 01m
Total Duration                                              5h 21m 
```

我有很多这样的飞行记录，我需要显示 Total Flight Duration ，为此我只需添加时间跨度

```
TimeStamp totalDuration = totalDuration.Add(duration); 
```

但是我遇到了一种情况，即 totalDuration 达到像 {1.02:10:00} 这样的值，并且在尝试像这样将此值转换为 DateTime 时

```
TotalConnectionTime = new DateTime(2012,06, 30,(int)totalDuration.TotalHours, totalDuration.Minutes, 0); 
```

它给出了错误

**“小时、分钟和秒参数描述了无法表示的日期时间。”**

**(int)totalDuration.TotalHours = 26 这会产生问题**

我需要将 {1.02:10:00} 转换为 26h 10m，这意味着 1 天 = 24 小时 + 2 小时 + 10 分钟

希望我能澄清我的观点。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:45:16.637

阿尼尔，

根据上面的评论，我建议将 DateTime 保存为出发时间 (UTC)，然后将分钟保存为整数列。然后，您可以根据需要计算偏移量。下面是一个小控制台应用程序，根据您的示例演示时间跨度的使用：

```
class Program
{
    static void Main(string[] args)
    {
        TimeSpan timeSpan = new TimeSpan(0,1570,0);
        var stringDisplay = string.Format("{0}:{1}:{2}", timeSpan.Days, timeSpan.Hours, timeSpan.Minutes);
        Console.WriteLine(stringDisplay);
        Console.ReadKey();
    }
} 
```

这会产生结果：1:2:10（1 天 2 小时 10 分钟）。

添加到您的初始出发时间时，这对您应该很有效，即：

```
DateTime departure = new DateTime(2012, 6, 21, 7, 30, 0);
DateTime completeJourney = departure.Add(timeSpan); 
```

希望这可以帮助。

# java - 如何将 GTFS 数据保存到 sqlite 数据库中

> ID：11135811
> 
> 赞同：0
> 
> 时间：2012-06-21T10:01:26.107
> 
> 标签：java, android, python

我从[http://www.131500.com](http://www.131500.com)下载了一些 GTFS 数据。它是一个 zip 文件，其中包含一些文本文件，例如`stops.txt`等`trips.txt`。

现在我想将该数据保存在 SQLite 数据库中，但不知道该怎么做。[我确实从https://github.com/jvashishtha/GTFSImporter/tree/master/GTFSImporter](https://github.com/jvashishtha/GTFSImporter/tree/master/GTFSImporter)下载了 GTFSImporter，但我不确定如何运行它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-19T19:45:33.530

这是一个快速的 2 命令行方法。使用您最喜欢的 python 安装程序安装 querycsv（`sudo pip install querycsv`将工作）。然后创建一个名为 db.sqlite 运行的 sqlite 文件

```
querycsv.py -i routes.txt -i trips.txt -f db.sqlite -k "select * from routes limit 1" 
```

`-i <table>.txt`使用更多参数添加尽可能多的 gtfs 表。（那里的 sql 语句有点奇怪，任何合法的 sql 语句都可以工作，你没有选择导入的内容。你确实需​​要一个 no op 语句。）

表格将获取 csv 文件的文件名，标题行将自动导入为表格列名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T10:26:29.730

这将取决于你想用它做什么。

我已经用两种方法完成了——简单的方法和更复杂的方法。

简单的方法是直接将数据加载到列中，行中。像这样：

[http://oegeo.wordpress.com/2011/08/17/salt-lake-city-gtfs-into-sqlite/](http://oegeo.wordpress.com/2011/08/17/salt-lake-city-gtfs-into-sqlite/)

更复杂的方法是使用 Graphserver 及其“GTFSDB”，我认为它实际上只是一个 sqlite db。

[http://graphserver.github.com/graphserver/](http://graphserver.github.com/graphserver/)

我之前用 131500 的数据完成了这两个过程。

# java - Netbeans Profiler：永远连接到目标虚拟机

> ID：11135812
> 
> 赞同：16
> 
> 时间：2012-06-21T10:01:36.420
> 
> 标签：java, netbeans, profiler, java-7

我正在尝试将 Netbeans 探查器附加到我的 Java 项目，但它卡在了`Connecting to the target vm`.

我发现了这个[旧的错误报告](http://netbeans.org/bugzilla/show_bug.cgi?id=75761)，但已经修复了。我的版本是 Windows 7 上带有 Java 1.7.0_04 的 7.1.2。

我试图禁用防火墙并以管理员身份启动 Netbeans，但我仍然遇到了同样的问题。

有点奇怪的是校准工作正常。

我觉得这是 Java 7 的问题。因为如果我仔细查看`profiler\lib\deployed`没有 jdk17 文件夹。只有 jdk16 和 jdk15。

有什么想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T10:50:41.873

如果我动态附加它，我发现探查器可以工作。因此，您必须先启动应用程序（带有断点）。然后单击 Profile > Attach Profiler... 在顶部选择您的项目并附加本地动态分析器。如果您已经创建了错误的，您可以在 Attach Profiler 对话框的底部进行更改。现在选择正在运行的进程，就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-18T03:57:55.860

我在使用 NetBeans 8.0.2 分析多模块 maven 项目中的 junit 测试时遇到了同样的问题。

我通过将测试提取到一个独立的 maven 项目中并将其他模块添加为依赖项来解决它。

它在多模块项目中不起作用的原因是单击**Profile Test File**时， NetBeans 生成了不正确的命令行。例如在多模块项目中，它产生：

```
cd C:\test; "JAVA_HOME=C:\\Program Files\\Java\\jdk1.8.0_40" cmd /c "\"\"C:\\Program Files\\NetBeans 8.0.2\\java\\maven\\bin\\mvn.bat\" -Dtest=PerfTest -DforkMode=once -Dmaven.surefire.debug=${exec.args} -Dexec.args= -Dmaven.ext.class.path=\"C:\\Program Files\\NetBeans 8.0.2\\java\\maven-nblib\\netbeans-eventspy.jar\" -Dfile.encoding=UTF-8 surefire:test\"" 
```

而它应该是：

```
cd C:\test; "JAVA_HOME=C:\\Program Files\\Java\\jdk1.8.0_40" cmd /c "\"\"C:\\Program Files\\NetBeans 8.0.2\\java\\maven\\bin\\mvn.bat\" -Dtest=PerfTest -DforkMode=once -Dmaven.surefire.debug=${exec.args} -Dexec.args=\"-agentpath:\\\"C:/Program Files/NetBeans 8.0.2/profiler/lib/deployed/jdk16/windows-amd64/profilerinterface.dll\\\"=\\\"C:\\Program Files\\NetBeans 8.0.2\\profiler\\lib\\\",5140,10 -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=C:\\Users\\foo\\AppData\\Local\\NetBeans\\Cache\\8.0.2\\mavencachedirs\\2029222463\\org-netbeans-modules-profiler  \" -Dmaven.ext.class.path=\"C:\\Program Files\\NetBeans 8.0.2\\java\\maven-nblib\\netbeans-eventspy.jar\" -Dfile.encoding=UTF-8 surefire:test\"" 
```

TL;DR - -Dexec.args= 参数在多模块项目中为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-22T08:38:07.810

我有同样的问题。我认为问题在于 Java JDK 与 Netbeans 版本不兼容，即使 Java 应用程序运行良好。我安装了**Netbeans 8.2**和**JDK 1.8**。为我工作

# c++ - C++ 类设计：成员变量和局部变量

> ID：11135814
> 
> 赞同：1
> 
> 时间：2012-06-21T10:01:37.947
> 
> 标签：c++, class, variables, class-design

以下两个示例之间是否有任何区别，是否应该首选一个示例而不是其他示例：

示例 1：

```
class A
{
    int i;
    B* b;

    do_something();
    do_something_else();
}

A::do_something()
{    
    do_something_else();
} 
```

示例 2：

```
class A
{
    int i;

    do_something()
    do_something_else(B* b)
}

A::do_something()
{
    B* b;
    do_something_else(b);
} 
```

现在假设有几种方法使用`b`是让它们都将它作为参数还是不带参数并使用成员变量更好？两种方法的性能有区别吗？我可以看到两者的好处，但哪个更受欢迎？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T10:03:57.853

如果变量属于您正在设计的对象，请使其成为成员。如果您只使用临时变量 - 不要让它们成为成员，因为在这种情况下您只会污染您的对象设计

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-21T10:23:32.613

这实际上归结为您的对象模型如何组合在一起，以及聚合关系是否准确地代表了您希望建模的内容。

想想`B`在你的情况下是否真的表现出*与的*关系`A`（即说`A` *has-a* `B`是真的吗？）例如，在大多数情况下，汽车*有*引擎，因此引擎可以合理地由以下人员拥有/包含一辆车。如果是这种情况，那么您可能应该使用示例 1。

另一方面，如果没有直接关系，`A`只是需要对另一个对象采取行动而不拥有或包含它，那么您应该坚持使用示例 2。例如：

```
Dog myDog;
Stick aStick;
myDog.fetches(aStick); 
```

显然，一根棍子（希望）不是狗的组成部分。

为了方便起见，将变量（尤其是指针）合并到类中并让代码看起来更好（即因为您不必传递这么多参数）是很诱人的，但是如果包含的对象与容器没有很强的关系和/或在其他地方进行管理，您经常会遇到复杂的生命周期管理问题，这可能会抵消您最初试图从聚合中获得的好处。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T10:04:13.143

适合的那一款是首选。

如果类实例应该*拥有*指针指向的对象，那么它应该是成员变量。如果它只是函数的参数，**而不是由 object 拥有**，那么不要让它成为成员。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T10:44:41.233

**使用聚合/组合（将变量作为成员），因为您需要在函数调用之间维护状态**

虽然有关对象模型的建议是合理的，但您经常会偶然发现您拥有纯制造类的情况，并且“has-a”和“is-a”不再有意义了。

如果你一直无视这个建议，它就会付出代价。

*   **对象大小变大**，当您选择复制对象时，这将影响您的内存和性能。

*   **您传达该成员是对象状态的一部分**，这意味着其他开发人员（请记住，几周后您也是“其他开发人员”）在尝试找出该对象如何成为对象状态的一部分时会感到困惑.

*   **您需要知道 header 中的成员大小**，这是头文件中的额外包含，保持这种做法，当您更改基本头中的一行时，您将编译数周。您只希望标题中包含最少数量的包含。

所以不要*使用*这种技术来减少参数的数量。（请记住，没有绝对的真理）

# postgresql - 如何从 PL/pgSQL 函数返回的 refcursor 中选择所有行？

> ID：11135815
> 
> 赞同：5
> 
> 时间：2012-06-21T10:01:38.687
> 
> 标签：postgresql, plpgsql

我有一个返回的函数 some_func() `refcursor`：

```
CREATE OR REPLACE FUNCTION some_func() RETURNS refcursor AS (...) 
```

我想从控制台调用这个函数并从它返回的光标中显示结果集。在甲骨文我会写：

```
SELECT * FROM TABLE(some_func()); 
```

与 PosgreSQL 上的构造等效的是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T11:05:27.650

refcursor 由其名称引用，可以是自动生成的，也可以由您选择。[该文档](http://www.postgresql.org/docs/current/static/plpgsql-cursors.html#AEN54814)的此页面为每个示例提供了一个示例。

要从 refcursor 获取结果，您必须具有游标的名称。如果生成的名称类似于`<unnamed portal 1>"`. 然后您可以：

```
FETCH ALL FROM "<unnamed portal 1>"; 
```

游标名称作为结果从函数返回`refcursor`，因此您可以从那里获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T09:27:15.963

假设您有一个 postgres 函数以返回 refcursor 的方式编写；

```
CREATE OR REPLACE FUNCTION "com.mkindika"."myfunction" ("refcursor", other input  parameters) RETURNS "pg_catalog"."refcursor" AS 
$body$
DECLARE

---- query

END;
$body$
LANGUAGE 'plpgsql' STABLE CALLED ON NULL INPUT SECURITY INVOKER; 
```

如果要打印 refcursor，可以使用以下代码行；

```
BEGIN;
SELECT "com.mkindika"."myfunction" ("refcursor",other input parameters);
FETCH ALL IN "refcursor"; 
```

# css - 如何正确修复跨桌面和移动浏览器的 CSS 不一致？

> ID：11135818
> 
> 赞同：0
> 
> 时间：2012-06-21T10:01:47.793
> 
> 标签：css, mobile, responsive-design

我正在使用[GGS 响应式网格(CSS) 设计](http://goldengridsystem.com/)[这个登录表单](http://archify.com/user/login)，虽然它在桌面浏览器上看起来很酷，但它在移动浏览器（例如 Android 网络浏览器、Mobile Safari 等）中却很糟糕。我应该如何正确解决这种不一致？

![Mobile Safari 中的布局中断（左），但在 Chrome 等桌面浏览器中没有（右）](../Images/430e639bc8f5d674d69e6e967d6256e8.png) [**上**图：Mobile Safari 中的布局中断（左），但在 Chrome 等桌面浏览器中没有（右）。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:07:08.867

我通过`width`从按钮中删除参数解决了这个问题，因为它似乎在移动分辨率的移动和桌面浏览器中的解释不同。

# .net - 将 Oracle 查询“截至时间戳”转换为 LINQ

> ID：11135820
> 
> 赞同：0
> 
> 时间：2012-06-21T10:01:55.077
> 
> 标签：.net, linq, oracle

任何人都知道如何将此[Oracle](http://www.oracle.com/index.html)查询转换为[LINQ](http://msdn.microsoft.com/en-us/library/bb308959.aspx)语句或任何具有相同结果的解决方法？

```
select * from TableName as of timestamp to_timestamp('17-Jun-12', 'DD-Mon-yy') where TableName.id = some_Id_input; 
```

# c# - Entity Framework 4.3 托管 SQL Server 无数据库创建权限

> ID：11135823
> 
> 赞同：0
> 
> 时间：2012-06-21T10:02:08.697
> 
> 标签：c#, sql, entity-framework-4

我的 SQL Server 由我的托管服务提供商托管。这意味着我无权重新创建（或创建）数据库。

这导致我遇到 EF 4 的问题 - 它认为这些表丢失了，它们确实存在。我认为是由于无法重新创建数据库造成的。

回顾一下：本地开发，第一次运行转移到托管服务器，切换连接字符串，针对托管服务器运行，错误提示无效对象名称'dbo.Products'。

我有权创建除数据库之外的任何其他内容

我在这个假设中是否正确，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T12:28:20.767

在 EF 4.3 中，您可以从 Visual Studio 的工具菜单项中使用包管理器控制台。这将允许您使用迁移来生成数据库脚本。更多信息在这里

[http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)

您当然可以创建一个 drop 并自己创建脚本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:16:18.757

您可以手动创建数据库并设置 Database.SetInitializer(null) 或者您可以尝试 EF 5 RC。在[发行说明](http://blogs.msdn.com/b/adonet/archive/2012/05/15/ef5-release-candidate-available-on-nuget.aspx)中，您可以看到他们解决了这个问题。

# c++ - 在 Boost Asio 中设计错误处理

> ID：11135825
> 
> 赞同：0
> 
> 时间：2012-06-21T10:02:20.787
> 
> 标签：c++, boost, network-programming, boost-asio

我有一个使用 Boost Asio 构建的客户端服务器应用程序。现在我正在向代码中添加错误处理，这就是我计划的方式。

客户端将有一个主线程，它不断向服务器发送命令和数据。将有一个单独的线程在同一个套接字中不断侦听来自服务器的任何错误消息。

服务器的主线程将从客户端读取和处理数据，当遇到错误时进入错误处理代码流，向客户端发送错误消息并返回读取数据。

在这种情况下是否有更好的方法来进行错误处理？

# django - 限制 django dumpdata 中的固定装置数量

> ID：11135832
> 
> 赞同：5
> 
> 时间：2012-06-21T10:02:38.930
> 
> 标签：django

我们的其中一台服务器有 4 GB 的数据。但到目前为止，我只对填充固定装置的少量数据感兴趣。一种简单的转储数据是：

```
 python manage.py dumpdata --indent=4 > shipping_fixture.json 
```

但这样做的问题是它将所有数据转储到数据库中。在测试中处理如此大量的数据没有任何意义。有什么办法可以限制我不会让事情变得沉重的数据量，而且我下载的数据本身就是完整的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T14:39:05.833

The latest django (1.5.5) doesn't have such an option, but I think it's coming up soon in a future version. There is currently a ticket implementing a new feature to the dumpdata command that will allow you to filter what gets outputted based on the primary key if the model is specified.

A 3rd party app called django-test-utils can probably do what you need.

[Use Django dumpdata to dump a subset of overall data?](https://stackoverflow.com/questions/2733898/use-django-dumpdata-to-dump-a-subset-of-overall-data)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-09T17:13:12.883

我建议使用 django 序列化 [1]。它有助于将自定义查询转储到数据文件中。

要转储数据：

```
from django.core import serializers

with open("/tmp/file.json", "w") as f:
    serializers.serialize('json', query, stream=f) 
```

并加载数据：

```
with open("file.json", "r") as file:
    data = file.read()

for obj in serializers.deserialize("json", data):
    do_something_with_the_object(obj) 
```

[1] [https://docs.djangoproject.com/en/dev/topics/serialization/](https://docs.djangoproject.com/en/dev/topics/serialization/)

# jquery - Jquery下拉菜单重叠

> ID：11135834
> 
> 赞同：0
> 
> 时间：2012-06-21T10:02:43.877
> 
> 标签：jquery

我有一个有问题的 jquery 下拉菜单。我想用我的子菜单**重叠**我的主菜单，基本上图像是主菜单。！

链接到实际场景[重叠失败](http://i.stack.imgur.com/bVlMK.jpg)

这是CSS代码`

```
/* make the LI display inline */
/* it's position relative so that position absolute */
/* can be used in submenu */
#nav li {
    float:left;
    display:block;
    width:100px; 
    background:#fff; 
    position:relative;
    margin:0 1px;
    z-index:1;

}

/* this is the parent menu */
#nav li a {
    /*display:block;*/ 
    padding:8px 5px 0 5px; 
    font-weight:700;  
    height:23px; 
    text-decoration:none; 
    color:#fff; 
    text-align:center; 
    color:#333;
    z-index:-1;

   }

#nav li a:hover {
    color:#ccc;
}

/* you can make a different style for default selected value */
#nav a.selected {
    color:#f00;
}

    /* submenu, it's hidden by default */
    #nav ul {
        position:absolute; 
        left:0;
        top:0; 
        display:none; 
        margin:0 0 0 -1px; 
        padding:0; 
        list-style:none;
        z-index:1;
      }

    #nav ul li {
        width:100px; 
        float:left; 
        border-top:1px solid #fff;
    }

    /* display block will make the link fill the whole area of LI */
    #nav ul a {
        display:block;  
        height:15px;
        padding: 8px 5px; 
        color:#666;
    }

    #nav ul a:hover {
        text-decoration:underline;  
    }
     #nav a {
         display:block; color:#000; text-decoration:none;
    } 
     #nav ul li a {
         display:block; padding:3px 7px 5px; background-color:#ccc; color:#333;
    }
       #nav ul li a:hover {
         background-color:#ccc; text-decoration:underline; color: white;
    }
       #nav ul ul {
          left:102px; top:-1px; display:none; position:absolute; z-index: 9998;
    }

   /* fix ie6 small issue */
   /* we should always avoid using hack like this */
   /* should put it into separate file : ) */
    *html #nav ul {
       margin:0 0 0 -2px;
          } 
```

`

```
<script type="text/javascript">
$(document).ready(function () { 

    $('#nav li').hover(
        function () {
            //show its submenu
            $('ul', this).slideDown(100);

        }, 
        function () {
            //hide its submenu
            $('ul', this).slideUp(100);         
        }
    );

});
</script> 
```

我认为这里需要的是如何通过子菜单重叠另一个“li”希望你能在这里帮助我。多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:21:37.240

如果要`z-index`为选择器设置值，则`position`也必须是`absolute`或`relative`。在这里，您正在设置`z-index: -1`但没有`position`设置值（除非它以某种方式在其他地方被继承）。

```
/* this is the parent menu */
#nav li a {
    /*display:block;*/ 
    padding:8px 5px 0 5px; 
    font-weight:700;  
    height:23px; 
    text-decoration:none; 
    color:#fff; 
    text-align:center; 
    color:#333;
    z-index:-1;
} 
```

# twitter - 如何从多个朋友那里获取推文？

> ID：11135836
> 
> 赞同：1
> 
> 时间：2012-06-21T10:02:55.890
> 
> 标签：twitter, linq-to-twitter

这是我在我经常使用的 SO 女巫中的第一个问题 :)。这是问题/挑战：

我正在构建一个服务，用户可以在其中选择一些他的 facebook 和 twitter 朋友，然后他将获得推文和这些状态的组合列表。Facebook 使用批处理请求没有问题，非常有用且易于实现。我试图从 twitter 获得相同的结果，但这似乎比看起来更难。

我有一个我所有朋友的列表（姓名和用户 ID），我想选择其中一些朋友并检索他们的推文。我使用 linqToTwitter，也欢迎直接 HTTP 请求:)。

这就是我正在尝试的：

```
var tweetsResult =
                (from search in twitterCtx.Search
                  where search.Type == SearchType.Search &&
                    search.Query == "from:cinek24 OR from:blaba"
                  select search).Single(); 
```

这适用于像 cnn 这样的公共用户，但不适用于私人朋友，是的，我有有效的令牌。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T04:31:10.833

以下是在 LINQ to Twitter 中查找用户的方法：

```
 var users =
            (from user in twitterCtx.User
             where user.Type == UserType.Lookup &&
                   user.ScreenName == "cinek24,blaba"
             select user)
            .ToList();

        users.ForEach(user => Console.WriteLine("Name: " + user.Name)); 
```

更多信息在这里：

[http://linqtotwitter.codeplex.com/wikipage?title=Querying%20User%20Details&referringTitle=Getting%20User%20Information](http://linqtotwitter.codeplex.com/wikipage?title=Querying%20User%20Details&referringTitle=Getting%20User%20Information)

拥有用户后，您将不得不查询他们每个人的推文，因为用户查找只会返回他们的最后一条推文，如下所示：

```
 var statusTweets =
            from tweet in twitterCtx.Status
            where tweet.Type == StatusType.User
                  && tweet.ScreenName == "cinek24"
                  && tweet.Count == 40
            select tweet;

        tweets.ToList().ForEach(
            tweet => Console.WriteLine(
                "Name: {0}, Tweet: {1}\n",
                tweet.User.Name, tweet.Text)); 
```

有关该查询的更多信息在这里：

[http://linqtotwitter.codeplex.com/wikipage?title=Querying%20the%20User%20Timeline&referringTitle=Making%20Status%20Queries%20and%20Calls](http://linqtotwitter.codeplex.com/wikipage?title=Querying%20the%20User%20Timeline&referringTitle=Making%20Status%20Queries%20and%20Calls)

乔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T11:39:31.090

这是您需要的 API 调用 - [users/lookup](https://dev.twitter.com/docs/api/1/get/users/lookup)

```
https://api.twitter.com/1/users/lookup.json?screen_name=twitterapi,twitter,edent,MQoder&include_entities=true 
```

这将返回所有这些 screen_names 的最新推文。如果您愿意，也可以使用 user_ids。

# c# - 尝试插入非空值时出现“无法向主键插入空值”错误

> ID：11135838
> 
> 赞同：0
> 
> 时间：2012-06-21T10:03:08.573
> 
> 标签：c#, exception-handling, ado.net, null, primary-key

我的表中有一个复合键（**col1，col2**）我在col1 上
收到“无法将空值插入主键”错误，但实际上我没有尝试插入空值，**我在调试模式下检查过，值不是没有**
任何想法？

这是我的存储过程：

```
CREATE PROCEDURE [dbo].[proc1]
@col1 char(11) = NULL,
@col2 nchar(50) = NULL,
@col3 real = NULL
AS
BEGIN
SET NOCOUNT ON;

-- Insert statements for procedure here
update dbo.table1 set col2 = @col2 where col1 = @col1 AND col3 = @col3
if @@ROWCOUNT=0
insert into dbo.table1 ( col1, col2, col3 ) values ( @col1, @col2, @col3 ) 
```

这是我的代码：

```
SqlConnection conn = create_conn();
conn.Open();
SqlCommand command = new SqlCommand("another_proc", conn);
command.Parameters.Add("col1", SqlDbType.Char).Value = col1;
SqlDataAdapter da = new SqlDataAdapter(command);
DataSet ds = new DataSet();
da.Fill(ds);

command = new SqlCommand("proc1", conn);

// here i set the value of the parameter
**command.Parameters.Add("col1", SqlDbType.Char).Value = col1;**

command.Parameters.Add("col2", SqlDbType.NChar);
command.Parameters.Add("col3", SqlDbType.Real);
double y, yk, ym, yy;
int k, m;
string col2;
foreach (DataRow dr in ds.Tables[0].Rows)
{
    col2 = dr["col2"].ToString().Trim();
    yk = Double.Parse(dr["yk"].ToString());
    ym = Double.Parse(dr["ym"].ToString());
    yy = Double.Parse(dr["yy"].ToString());
    k = Int32.Parse(dr["k"].ToString());
    m = Int32.Parse(dr["m"].ToString());
    y = Double.Parse(dr["y"].ToString());
    double col3 = ...some calculation here...;
    command.Parameters["col2"].Value = col2;
    command.Parameters["col3"].Value = col3;
    command.ExecuteNonQuery();
}
conn.Close(); 
```

更新代码：

```
SqlConnection conn = create_conn();
conn.Open();
SqlCommand command = new SqlCommand("another_proc", conn);
command.Parameters.Add("col1", SqlDbType.Char).Value = col1;
SqlDataAdapter da = new SqlDataAdapter(command);
DataSet ds = new DataSet();
da.Fill(ds);

command.CommandText = "proc1";
command.Parameters.Add("col2", SqlDbType.NChar);
command.Parameters.Add("col3", SqlDbType.Real);
double y, yk, ym, yy;
int k, m;
string col2;
foreach (DataRow dr in ds.Tables[0].Rows)
{
    col2 = dr["col2"].ToString().Trim();
    yk = Double.Parse(dr["yk"].ToString());
    ym = Double.Parse(dr["ym"].ToString());
    yy = Double.Parse(dr["yy"].ToString());
    k = Int32.Parse(dr["k"].ToString());
    m = Int32.Parse(dr["m"].ToString());
    y = Double.Parse(dr["y"].ToString());
    double col3 = k * (yk / 100) + m * (ym / 100) + y * (yy / 100);
    command.Parameters["col2"].Value = col2;
    command.Parameters["col3"].Value = col3;
    command.ExecuteNonQuery();
}
conn.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:19:51.700

Col1 和 col2 不应为空，因为它们正在生成复合键。改变

```
@col1 char(11) = NULL,
@col2 nchar(50) = NULL, 
```

至

```
@col1 char(11) ,
@col2 nchar(50), 
```

还将所有参数的参数添加更改为sql过程

```
command.Parameters.Add("col1", SqlDbType.Char).Value = col1; 
```

至

```
command.Parameters.Add("@col1", SqlDbType.Char).Value = col1; 
```

或者

```
 command.Parameters.Add("@col1", SqlDbType.Char);
 command.Parameters["@col1"].Value = col1; 
```

**编辑**

**错误“过程或函数 'proc1' 需要参数 '@col1'，但未提供。” 你得到的是误导**，问题是由于没有设置CommandType。在执行命令之前创建新命令并添加以下语句。

```
SqlCommand command = new SqlCommand("proc1", conn);
command1.CommandType = CommandType.StoredProcedure; 
```

还要清除循环中的参数集合。

```
for (int i = 0; i < 10; i++)
{
   col1 = "Col1 value " + i;
   col2 = "Col2 value " + i;
   col3 = "Col3 value" + i;

   command.Parameters.Clear();

   command.Parameters.Add("@col1", SqlDbType.VarChar).Value = col1;
   command.Parameters.Add("@col2", SqlDbType.VarChar).Value = col2;
   command.Parameters.Add("@col3", SqlDbType.VarChar).Value = col3;

   command1.ExecuteNonQuery();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T19:45:42.943

我们怎么都错过了？

```
command.CommandType = CommandType.StoredProcedure; 
```

# jquery - 如何使用 jquery 将网格与未知字段绑定？

> ID：11135839
> 
> 赞同：0
> 
> 时间：2012-06-21T10:03:13.970
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在使用**[jqwidgets](http://www.jqwidgets.com/jquery-widgets-demo/#demos/jqxgrid/bindingtoxml.htm)** 来绑定网格，如下所述：

```
var url = "sampledata/customers.xml";
var parentsLength = $("#jqxWidget").parents().length;
if (parentsLength > 3) {
    url = 'sampledata/customers.xml';
}

// prepare the data
var source = {
    datatype: "xml",
    datafields: [
        { name: 'CompanyName', map: 'm\\:properties>d\\:CompanyName' },
        { name: 'ContactName', map: 'm\\:properties>d\\:ContactName' },
        { name: 'ContactTitle', map: 'm\\:properties>d\\:ContactTitle' },
        { name: 'City', map: 'm\\:properties>d\\:City' },
        { name: 'PostalCode', map: 'm\\:properties>d\\:PostalCode' },
        { name: 'Country', map: 'm\\:properties>d\\:Country' }
    ],
    root: "entry",
    record: "content",
    id: 'm\\:properties>d\\:CustomerID',
    url: url
};

// Create jqxGrid
$("#jqxgrid").jqxGrid(
{
    width: 670,
    source: source,
    theme: theme,
    columnsresize: true,
    columns: [
        { text: 'Company Name', datafield: 'CompanyName', width: 250 },
        { text: 'Contact Name', datafield: 'ContactName', width: 150 },
        { text: 'Contact Title', datafield: 'ContactTitle', width: 180 },
        { text: 'City', datafield: 'City', width: 120 },
        { text: 'Postal Code', datafield: 'PostalCode', width: 90 },
        { text: 'Country', datafield: 'Country', width: 100 }
    ]
}); 
```

但是现在我有动态网格，其中包含未知的列和行。我如何绑定？我正在调用 Web 服务以获取 XML 格式的网格数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:11:53.313

您可能可以使用[jqxDataAdapter](http://www.jqwidgets.com/jquery-widgets-documentation/documentation/jqxdataadapter/jquery-data-adapter.htm)插件并将源对象作为参数传递给数据适配器。然后将 Grid 的 source 属性设置为指向 dataAdapter 而不是直接指向您的源。在 jqxDataAdapter 的 loadComplete 函数调用中，构建列数组并将其传递给 Grid。

像这样的东西：

```
$("#jqxgrid").jqxGrid({columns: myColumnsArray}); 
```

# exception - Corba 的 RMI 是否有任何“远程异常”？

> ID：11135842
> 
> 赞同：0
> 
> 时间：2012-06-21T10:03:23.470
> 
> 标签：exception, corba

我想用 Corba 和 C++ 编写一个类似论坛的应用程序，我想知道在 CORBA 中是否有类似从 RMI 知道的远程异常？CORBA 有自己的远程异常吗？谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:19:06.900

所有 UserExcptions 本质上都是远程异常，因为它们只能由服务器端引发。

# c# - 捕获异常并将其记录在 Excel 工作表中

> ID：11135843
> 
> 赞同：0
> 
> 时间：2012-06-21T10:03:26.077
> 
> 标签：c#, .net

我的功能如下：

```
public int CreateMyTask()
{
    Console.WriteLine("Invoking CreateTask method");
    Console.WriteLine("-----------------------------------");
    m_taskID = taskClient.CreateTask(m_tInstance);
    Console.WriteLine("Task create successfully:ID=" + m_taskID.ToString());
    Console.WriteLine("-----------------------------------");
    return m_taskID;
} 
```

我需要做的是：-

1.  我必须检查函数是否发生异常。基本上可以发生任何异常。我们不关心发生了什么异常。我们只需要查找是否发生了异常。让这个例外成为任何事情。

2.  如果确实发生了异常，我必须在我的 Excel 工作表 (D:\excel.xls) 的第 2 行第 10 单元格中记录一个单词“FAIL”，并添加与异常相关的文本，例如“发生 Nullreference 异常”或“发生除以零异常”或已发生的任何异常。异常的确切文本必须复制到第 2 行第 11 单元格

3.  如果没有发生异常，那么我必须在我的 Excel 表的第 2 行第 10 单元格中记录一个单词“PASS”。

有人可以帮我开始吗？我对 c# 很陌生。可以通过一些输入来实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:15:55.313

你的问题是双重的。首先，围绕此方法的功能包装一个 try catch 块。这是在方法内完成还是围绕 CreateMyTask 方法的任何调用完成取决于更广泛的结构和代码的使用。要熟悉 try catch 的使用，请参阅：http: [//www.dotnetperls.com/catch](http://www.dotnetperls.com/catch) - 在此链接中，您将用写入 Excel 工作表的方法替换 writeline。我需要更多关于您计划写入电子表格的方式的背景信息，但正如建议的那样，谷歌从 excel 文件中读取和写入的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:59:02.287

```
public int CreateMyTask()
{
        try
        {
            Console.WriteLine("Invoking CreateTask method");
            Console.WriteLine("-----------------------------------");
            m_taskID = taskClient.CreateTask(m_tInstance);
            Console.WriteLine("Task create successfully:ID=" + m_taskID.ToString());
            Console.WriteLine("-----------------------------------");
            WriteResultInExcel(false, "");
            return m_taskID;
        }
        catch(Exception ex)
        {
            WriteResultInExcel(true, ex.Message);
        }
}

 private void WriteResultInExcel(bool isExceptionalData, string message)
 {
        Excel.ApplicationClass excelApp = new ApplicationClass();
        Workbook workbook = excelApp.Workbooks.Open("D:\\excel.xls", 0, false, 5, "", "", true, XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);
        Worksheet worksheet = (Worksheet)workbook.Sheets.get_Item(1);
        if(isExceptionalData)
        {
            ((Range)worksheet.Cells["2", "J"]).Value2 = "FAIL";
            ((Range)worksheet.Cells["2", "K"]).Value2 = message;
        }
        else
        {
            ((Range)worksheet.Cells["2", "J"]).Value2 = "PASS";
        }
        workbook.Save();
        workbook.Close(0, 0, 0);
        excelApp.Quit();
 } 
```

确保检查文件“D:\excel.xls”是否存在，并添加对“Microsoft.Office.Interop.Excel”的引用。

不要错过将其添加到您的指令部分：

**使用 Microsoft.Office.Interop.Excel；使用 Excel = Microsoft.Office.Interop.Excel；**

# c# - asp.net ajaxcontrolkit 气球弹出扩展器 bg 颜色

> ID：11135846
> 
> 赞同：0
> 
> 时间：2012-06-21T10:03:43.453
> 
> 标签：c#, asp.net, ajaxcontroltoolkit, balloon

如何更改 ajaxcontroltoolkit 气球扩展器的 bg 颜色？

我里面有一个面板，但我只能设置看起来很奇怪的面板背景颜色。

代码：

```
<asp:Panel ID="Panel1" runat="server" style="background-color:Red">
        Type some data in here    
    </asp:Panel>

<ajaxToolkit:BalloonPopupExtender ID="PopupControlExtender2" runat="server"
        TargetControlID="lblBalloon"
        BalloonPopupControlID="Panel1"
        Position="BottomRight" 
        BalloonStyle="Rectangle"
        BalloonSize="Small"
        UseShadow="true" 
        ScrollBars="Auto"
        DisplayOnMouseOver="true"
        DisplayOnFocus="false"
        DisplayOnClick="False" />
</asp:Content> 
```

我想改变气球的白色部分 bg 颜色：

![在此处输入图像描述](../Images/4964789f039a498d2bb45bb6cca17a5e.png)

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:12:04.720

它实际上不是`background color`在背景中，它在背景中有一个精灵图像，要更改气球的背景图像，请使用下面的样式

```
.ajax__balloon_popup .oval {

    background-image: url('/image-path');

} 
```

[你可以在这里找到详细的帖子](http://forums.asp.net/t/1743751.aspx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-26T13:08:41.740

您可以使用以下标记和 css 获得一个不错的自定义弹出窗口，并根据需要更改背景颜色和其他样式：

```
 <cc:BalloonPopupExtender 
        ID="bb1" runat="server" 
        BalloonStyle="Custom" 
        CustomClassName="custom-popup"  
        Position="BottomRight" 
        BalloonSize="Medium" 
        UseShadow="false" 
        CustomCssUrl="style.css" 
        DisplayOnMouseOver="true"  
        BalloonPopupControlId="infoPopup" 
        TargetControlID="lnkInfo1">
       <Animations>
            <OnShow>
                <Sequence>
                    <HideAction Visible="true" />
                    <FadeIn Duration=".5" Fps="20" />
                </Sequence>
            </OnShow>
            <OnHide>
              <FadeOut Duration=".5" Fps="20" />
            </OnHide>
        </Animations>
    </cc:BalloonPopupExtender> 
```

添加到您的 style.css：

```
.custom-popup {
    background-color: #fdfff7;
    display: inline-block;
    width: 300px;
    height: 120px;
    text-align: center;
    vertical-align: top;
    font-size: 11px;
    border: solid 1px #cbbeac;
    border-radius: 12px;
} 
```

# ios - 检查 Wi-Fi 开关是否处于 ON 或 OFF 状态

> ID：11135849
> 
> 赞同：3
> 
> 时间：2012-06-21T10:03:55.670
> 
> 标签：ios, gps, settings, wifi

我没有找到这个简单的东西：我想检查用户是否有处于活动状态的 wi-fi，即使设备没有连接到互联网。

所以我不想测试互联网连接，但前提是“设置”切换状态打开/关闭）。

这可能会对 GPS 精度产生很大影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:48:57.677

我认为这是不可能的（至少没有任何用于越狱 iPhone 应用程序开发的私有 API）

参考[这个](https://stackoverflow.com/questions/8119865/iphone-check-wifi-network-switch-is-on-off)链接。

希望这能让你继续前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:04:38.913

我觉得可达性是这种情况下最好的选择。这是一个[链接](http://developer.apple.com/library/ios/#samplecode/Reachability/Listings/Classes_Reachability_h.html)

# java - ORMLite ForeignCollections

> ID：11135851
> 
> 赞同：1
> 
> 时间：2012-06-21T10:04:00.460
> 
> 标签：java, foreign-keys, ormlite, foreign-collection

我有一个问题，我只是不知道如何解决它。我想在 JAVA 中建模一个结构，例如：**Companies**、**Events**和**Locations**。

*   每个公司包括一个或多个位置，代表公司分支机构所在的位置
*   每个事件还有一个发生事件的位置

这是代码：

```
public class Event {
    int id;
    String name;
    Location location;
    ...
}

public class Location {
    int id;
    String name;
    String building;
    ...
}

public class Company {
    int id;
    String name;
    Collection<Location> locations;
    ...
} 
```

我的问题是我想使用 ORMLite 将对象保存在数据库中。但是如果我正确理解了 ORMLite 中的外来事物，我必须在 Location 中添加一个 Company 实例变量：

```
public class Location {
  @DatabaseField(columnName = "com_id", foreign = true)
  Company company;
  @DatabaseField(id = true, columnName = "loc_id")
  int id;
  @DatabaseField(columnName = "loc_name")
  String name;
  @DatabaseField(columnName = "loc_build")
  String building;
  ...
}

public class Company {
  @DatabaseField(columnName = "com_id")
  int id;
  @DatabaseField(columnName = "com_name")
  String name;
  @ForeignCollectionField()
  Collection<Location> locations;
  ...
} 
```

但是现在位置不适用于活动！？！我怎样才能实现这样的行为？

谢谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:03:26.383

不知何故，您需要`Location`通过 a分配 a 的“所有权” `Company`。您可以（至少）两种不同的方式来做到这一点。

1.  正如您所提到的，您可以拥有`Location`一个`Company`字段。如果那里有一对一的关系，这将很好。如果您想拥有一个，并且`"Pittsburgh"` `Location`您希望两家公司都在匹兹堡设有办事处，那将是行不通的。`"Alcoa"``"US Steel"`

2.  实现它的第二种方法是拥有一个`CompanyLocation`在 ORM 语言中通常称为连接表的实体。然而，ORMLite 不会为您制作此连接表。

    ```
    public class CompanyLocation {
       @DatabaseField(foreign = true)
       Company company;
       @DatabaseField(foreign = true)
       Location location;
    } 
    ```

    所以如果想要`"Alcoa"`一个你需要在定义关系的表中`Location`插入一个。`"Pittsburgh"``CompanyLocation`

希望这可以帮助。

# javascript - 在jquery mobile中发布没有ajax的方法

> ID：11135856
> 
> 赞同：0
> 
> 时间：2012-06-21T10:04:24.300
> 
> 标签：javascript, jquery, html, jquery-mobile

如何在 jquerymobile 中发送没有 ajax 的 post 请求。我正在发送此帖子请求，该请求不适用于黑莓 OS 5。任何人都可以帮助我

这是我使用 ajax 的 post 方法，效果很好。但现在我想在没有 ajax 的情况下发送帖子数据。

```
function handleLogin(){

var form = $("#loginForm");    
 var u = $("#username", form).val();
var p = $("#password", form).val();
var d = $("#dob", form).val();

if(u != '' && p!= '')
{
    var finalStr = u+encodeURIComponent("|^")+p+encodeURIComponent("|^")+encodeURIComponent("|^")+"X"+encodeURIComponent("|^")+d+encodeURIComponent("|^")+"1.0"+encodeURIComponent("|^|$");
    var encodedURL = encodeURI("http://myDomain/Ri_logon.asp?requestString=");
    var parameters =  decodeURIComponent(finalStr);

    $.ajax({
        type: "POST",
        contentType:"application/x-www-form-urlencoded; charset=UTF-8",
        url: encodedURL,
        data: parameters
      }).done(function( msg )
              {
                  response  = msg
                  console.log("repon se::>::"+response);
                  var substr = response.split('$');

                  var str = substr[1];

                  var substrtest = substr[1].split('|^');

                    if(response.charAt(0)=='0')
                    {                            
                        $.mobile.changePage('UI/Equity/home.html')
                    }
                    else
                    {
                        alert( "Alert : " + msg );
                    }
      });

  } 
else
{

    navigator.notification.alert("You must enter a username and password", function() {});
    $("#submitButton").removeAttr("disabled");
}
return false; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:26:19.437

简单的答案是使用 <form method="post" data-ajax="false" ... >

我在这样做时遇到了问题。POST 很顺利，但页面的重新加载却没有。不确定它是否相关。

[https://stackoverflow.com/questions/11163206/jquery-mobile-1-1-0-post-reloads-as-get](https://stackoverflow.com/questions/11163206/jquery-mobile-1-1-0-post-reloads-as-get)

# apache2 - Apache2 无法识别 VirtualHost ServerName 进行手动设置

> ID：11135857
> 
> 赞同：1
> 
> 时间：2012-06-21T10:04:30.493
> 
> 标签：apache2, redmine, virtualhost, plesk

我正在运行 Plesk 服务器。一切都很顺利。

但是，今天我安装了 redmine。为了完成它，我为 apache2 集成了安装和配置的乘客并创建了文件：

```
/etc/apache2/sites-available/redmine 
```

其中包含：

```
<VirtualHost *:80>
    DocumentRoot /var/www/redmine
    ServerName project.mydomain.com

    RewriteEngine on
    RewriteRule   ^/$  /redmine  [R]

    <Directory /var/www/redmine>
            RailsBaseURI /redmine
            PassengerResolveSymlinksInDocumentRoot on
    </Directory>

    ErrorLog /var/log/apache2/error.log
    LogLevel warn
    CustomLog /var/log/apache2/access.log combined
</VirtualHost> 
```

（**/var/www/redmine**是指向实际 redmine 目录的符号链接）

然后我重新启动了 apache，没有出现任何错误。

但是，调用 project.mydomain.com 会直接导致我得到相同的结果，就好像我只是浏览到我的服务器的 IP 地址一样——因此 apache 似乎无法识别虚拟主机。

我做了一个肮脏的测试，并在 VirtualHost 配置中输入了一些无效的字符，然后尝试重新启动 apache，由于输入错误而无法正常工作 - 因此我确定文件已被解析。

我在这里做错了什么？

旁注：

1) project.mydomain.com 当然，在我的示例中仅在此处被屏蔽-在我的配置中，我得到了实际的子域+域名。

2）通过 webrick 测试 redmine 工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T01:45:09.773

我会检查以下内容：

1.  考虑到您创建站点的路径，您似乎正在使用 debian/ubuntu dist。那么，您是否启用了您的网站？

    root@notebook:~$ sudo a2ensite redmine

2.  /var/www/redmine 应该是指向 redmine 目录的“公共”子目录的符号链接，而不是本身。例如。：

    brunojcm@brunojcm-htpc:~$ ll /var/www/redmine lrwxrwxrwx 1 root root 27 Sep 4 2011 /var/www/redmine -> /opt/redmine/current/public/

3.  您是在测试 project.mydomain.com/redmine 还是只是在测试 project.mydomain.com？我会先用 project.mydomain.com/redmine 对其进行测试，然后配置重定向。或者甚至删除“RailsBaseURI /redmine”并让 redmine 位于您的虚拟主机的根目录上。

我在不同的机器上有非常相似的设置，它们都可以工作。如果您检查了以上几点但仍然无法正常工作，请在评论中发布一些日志，我可以尝试帮助您。

# python - Reportlab 在表格中插入水平线

> ID：11135860
> 
> 赞同：1
> 
> 时间：2012-06-21T10:04:37.937
> 
> 标签：python, reportlab

我知道 LINEABOVE 和 LINEBELOW 样式，我想知道是否有办法在表格中绘制一条具有指定宽度的线。

我正在尝试添加一条不会“触及”表格边框的线，如果我可以在单元格之间添加一些填充，LINEABOVE 将完美地工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-28T03:46:53.903

```
canvas.line(doc.leftMargin, 100, doc.width, 100) 
```

参数的顺序是x1,y1,x2,y2，坐标系的左下角有(0, 0)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-27T00:28:07.070

另一种策略是做一个非常细的行，然后用 `('BACKGROUND', (0,1), (-1,1), colors.black)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T14:33:51.590

您可以使用该`Graphics`模块在单元格内容中画一条线。您基本上可以将任何内容放在一个单元格中，然后将其布置在表格单元格中以实现您想要的。

# java - queue.yaml 在 App 引擎（开发）中不起作用

> ID：11135861
> 
> 赞同：3
> 
> 时间：2012-06-21T10:04:38.323
> 
> 标签：java, google-app-engine, task-queue

我正在尝试使用“queue.yaml”在 Google App Engine 应用程序（Java 版本）中定义队列。

```
 queue:
 - name: default
   rate: 5/s
 - name: availableTicketsAlert
   rate: 5/s
 - name: billingReminder
   rate: 5/s
 - name: cseIndexing
   mode: pull 
```

当我尝试查看它们是否已在此 URL：/_ah/admin/taskqueue 中正确创建时，我只看到“默认”队列。

相反，如果我尝试使用 XML 文件创建使用，则一切正常（queue.xml）：

```
<queue-entries>
<queue>
    <name>default</name>
    <rate>5/s</rate>
</queue>
<queue>
    <name>availableTicketsAlert</name>
    <rate>5/s</rate>
</queue>
<queue>
    <name>billingReminder</name>
    <rate>5/s</rate>
</queue>
</queue-entries> 
```

关于我做错了什么的任何想法？

我是否必须手动更新它们：appcfg.py update_queues myapp/ 或类似的东西？

谢谢！

# javascript - AngularJS：$scope.$watch 没有更新从自定义指令上的 $resource 获取的值

> ID：11135864
> 
> 赞同：23
> 
> 时间：2012-06-21T10:04:48.853
> 
> 标签：javascript, json, watch, angularjs

我遇到了让我发疯的自定义指令问题。我正在尝试创建以下自定义（属性）指令：

```
angular.module('componentes', [])
    .directive("seatMap", function (){
        return {
            restrict: 'A',
            link: function(scope, element, attrs, controller){

                function updateSeatInfo(scope, element){
                    var txt = "";
                    for (var i in scope.seats)
                        txt = txt + scope.seats[i].id + " ";
                    $(element).text("seat ids: "+txt);
                }

                /* 
                    // This is working, but it's kind of dirty...
                    $timeout(function(){updateSeatInfo(scope,element);}, 1000);
                */

                scope.$watch('seats', function(newval, oldval){
                    console.log(newval, oldval);
                    updateSeatInfo(scope,element);
                });
            }
        }
    }); 
```

这个“属性类型”指令（称为 seatMap）试图显示一个座位 ID 列表（例如，对于剧院），我将通过 $resource 服务（参见下面的代码）从服务器获取到一个 div（元素） .

我将它与这个简单的部分 html 一起使用：

```
<div>
    <!-- This is actually working -->
    <ul>
        <li ng-repeat="seat in seats">{{seat.id}}</li>
    </ul>

    <!-- This is not... -->
    <div style="border: 1px dotted black" seat-map></div>
</div> 
```

这是加载范围的控制器：

```
function SeatsCtrl($scope, Seats) {
    $scope.sessionId = "12345";
    $scope.zoneId = "A";
    $scope.seats = Seats.query({sessionId: $scope.sessionId, zoneId: $scope.zoneId});
    $scope.max_seats = 4;
} 
```

其中“席位”是一个使用 $resources 从服务器获取 JSON 的简单服务

```
angular.module('myApp.services', ['ngResource'])
    .factory('Seats', function($resource){
        return $resource('json/seats-:sessionId-:zoneId.json', {}, {});
    })
; 
```

app.js（asientos_libres.html 是我一直在使用的部分）：

```
angular.module('myApp', ['myApp.filters', 'myApp.services', 'myApp.directives', 'componentes']).
  config(['$routeProvider', function($routeProvider) {
    $routeProvider.when('/view1', {templateUrl: 'partials/asientos_libres.html', controller: SeatsCtrl});
    $routeProvider.otherwise({redirectTo: '/view1'});
  }]); 
```

问题是，即使我在指令的链接函数中设置了“scope.$watch”，以便范围可以检查“seats”属性是否已更改以更新 id 列表，但它在时刻 $scope.seats 在控制器中发生变化（当我们调用“查询”时）。

正如您在代码中看到的那样，我尝试使用 $timeout 来延迟“updateSeatInfo”的启动，但恐怕这不是迄今为止最聪明的解决方案......

我还尝试不发出 JSON 请求，而是在 $scope.seats 中使用硬编码字典并且它可以工作，所以这似乎是一个同步问题。

*注意：updateSeatInfo 只是一个测试函数，我将使用的实际函数有点复杂。*

关于如何应对它的任何想法？

非常感谢您！

**编辑 1：**添加了 app.js，我使用路由器调用 SeatsCtrl，感谢 Supr 的建议。但是，我仍然遇到同样的问题。

**编辑2：解决了！（？）** 好的！看来我找到了一个解决方案，它可能不是最好的，但它工作正常！:) 就我在这里看到的[http://docs.angularjs.org/api/ng.$timeout而言，我们可以](http://docs.angularjs.org/api/ng.$timeout)**毫无延迟**地使用 $timeout（setTimeout 的包装器）！这很好，因为我们没有在 $timeout 内人为地延迟代码的执行，而是让指令在异步请求完成之前不运行它。

希望它也适用于长时间等待的请求......

如果有人知道更好的解决方法，请告诉！

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-19T00:25:16.607

问题是 watch 默认比较引用而不是对象。将 ,true 添加到末尾以使其比较值。

```
scope.$watch('seats', function(newval, oldval){
                console.log(newval, oldval);
                updateSeatInfo(scope,element);
            }, true); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-29T13:47:45.343

我也有这个问题。这是因为我的变量最初没有在范围内定义“未定义”。Watch 似乎不适用于未定义的变量。毕竟看起来很明显。

当我的变量将由控制器有效设置时，我首先尝试使用 watch 来触发。例子：

```
myApp.controller('Tree', function($scope, Tree) {

Tree.get({},
function(data) { // SUCCESS
    console.log("call api Tree.get succeed");
    $scope.treeData = data;
},

function(data) { // FAILURE
    console.log("call api Tree.get failed");
    $scope.treeData = {};
});
}); 
```

我通过在调用服务之前用一个空对象初始化我的变量来解决它：

```
myApp.controller('Tree', function($scope, Tree) {

$scope.treeData = {};      // HERE

Tree.get({},
function(data) { // SUCCESS
    console.log("call api Tree.get succeed");
    $scope.treeData = data;
},

function(data) { // FAILURE
    console.log("call api Tree.get failed");
    $scope.treeData = {};
});
}); 
```

在这种情况下，watch 能够检测到变量的变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:19:14.320

我看不到您在任何地方都在使用`SeatsCtrl`-controller 吗？它是如何使用的？您是否已验证它已被激活，并且查询已实际执行？

检查 SeatsCtrl 是否正在使用的最快方法是简单地在`console.log('SeatsCtrl actived!');`其中添加一个。如果不是，则添加`ng-controller="SeatsCtrl"`到`div`.

您还可以直接在控制器内部的座位上放置一个监视和日志，以确保它不是范围界定的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T17:56:07.503

我也遇到了这个问题。我认为这是Angular中的一个问题。GitHub 上有一张[“加强 $resource 期货”](https://github.com/angular/angular.js/issues/415)的票，它可能会解决这个问题，因为您真正需要的是访问您拥有的资源的承诺对象。

或者，观察者可以等到承诺解决后再触发。

与此同时，一种更优雅的不需要超时的解决方法是重新分配 $resource 上的成功回调正在监视的范围属性。这将导致观察者在适当的时间再次触发。

没有延迟的超时只是将延迟函数的评估放在当前堆栈的末尾 - 在您的情况下，您的资源恰好在那时解决了，但是如果服务器遇到这样的情况，这可能是一个问题星期一。

例子：

```
$scope.myAttr = MyResource.fetch(
  function (resource) { $scope.myAttr = new MyResource(angular.copy(resource)); }
); 
```

# python - imagefield(upload_to = 'myfolder') 不在文件夹中保存图像 - django 中的'myfolder'

> ID：11135871
> 
> 赞同：0
> 
> 时间：2012-06-21T10:05:16.143
> 
> 标签：python, django, django-models

表单html：

```
<form action='/register/' method = 'post'>{% csrf_token %}
    ...
    <label>Avatar: </label><input type='file' name='avatar' value='' /><br />
    <input type = 'submit' name='submit' value='Sign up' />
</form> 
```

模型.py

```
class Employee(models.Model):
    ...
    avatar = models.ImageField(upload_to = 'avatar', blank = True, null = True)
    ... 
```

和views.py

```
def register(request):
    success = False
    message = ''
    try:
        newE = Employee.objects.create(...
                                avatar = request.POST['avatar'])
        success = True
        message = 'Register successful!'
        return HttpResponse(json.dumps({'success':str(success).lower(), 'message':message}))
    except:
        Employee.objects.filter(email = request.POST['email']).delete()
        message = 'Can\'t create a new account!'
        return HttpResponse(json.dumps({'success':str(success).lower(), 'message':message})) 
```

设置.py

```
MEDIA_ROOT = '/home/dotcloud/data/media/'
MEDIA_URL = '/media/' 
```

当我使用 django 管理页面时，图像将加载并保存： [http :](http://training-hongquan156.dotcloud.com/media/) **//training-hongquan156.dotcloud.com/media/avatar** /image.png 但是当我使用 html 表单上传照片时，图像没有上传和保存在文件夹“***头像***”中，但保存路径： [http](http://training-hongquan156.dotcloud.com/media/image.png) ://training-hongquan156.dotcloud.com/media/image.png 并且我无法加载图像...有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T10:18:37.323

你应该纠正

```
<form action="/register/" method="post"> 
```

到

```
<form action="/register/" enctype="multipart/form-data" method="post"> 
```

处理上传的文件

```
request.FILES['avatar'] 
```

然后在 dir 中找到它`$upload_to`，`/home/dotcloud/data/media/photo`

# functional-programming - xappings、xectors、xets

> ID：11135872
> 
> 赞同：5
> 
> 时间：2012-06-21T10:05:18.297
> 
> 标签：functional-programming, parallel-processing, lisp

在连接机器上的旧 *Lisp 中，有一个向量、集合等接口，允许以类似于 MapReduce 的方式对集合进行计算（分别使用 alpha 和 beta 作为应用和归约）。互联网上有详细描述这些的资源吗？现代系统（linux等）上是否有任何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:32:41.950

[*口齿不清](http://en.wikipedia.org/wiki/%2aLisp)

[http://www.softwarepreservation.org/projects/LISP/starlisp/sim/](http://www.softwarepreservation.org/projects/LISP/starlisp/sim/)

Starsim：[http ://examples.franz.com/index.html](http://examples.franz.com/index.html)

# ruby-on-rails - 如何从主应用程序访问 Rails 引擎方法？

> ID：11135876
> 
> 赞同：3
> 
> 时间：2012-06-21T10:05:26.683
> 
> 标签：ruby-on-rails, methods, spree, rails-engines

我正在尝试使用 Spree::Core 引擎中定义的 current_order 方法： [https ://github.com/spree/spree/blob/master/core/lib/spree/core/current_order.rb](https://github.com/spree/spree/blob/master/core/lib/spree/core/current_order.rb)

在我看来，我已经尝试过

```
Spree::Core::CurrentOrder.current_order 
```

在开发中仅使用“current_order”可以正常工作，但在生产中不行。

因此，我尝试在我的视图文件中要求它，如下所示：

```
require 'spree/core/current_order' 
```

我还尝试了这些其他解决方案的排列：

[如何在主应用程序中合并 Rails Engine ApplicationController 方法？](https://stackoverflow.com/questions/11124447/how-to-incorporate-rails-engine-applicationcontroller-methods-in-a-main-app)

[一种将 before_filter 从引擎添加到应用程序的方法](https://stackoverflow.com/questions/7323327/a-way-to-add-before-filter-from-engine-to-application/)

[Rails 3.1：在客户端应用程序中公开引擎助手的更好方法](https://stackoverflow.com/questions/8797690/rails-3-1-better-way-to-expose-an-engines-helper-within-the-client-app)

但我已经忘记了我实际上做了什么。

有人可以指出我正确的方向吗？也许我错误地实施了上述链接中的解决方案？

这是我在生产中遇到的错误：

2012-06-21T09:59:08+00:00 app[web.1]: ActionView::Template::Error（Spree::Core::CurrentOrder:Module 的未定义方法“current_order”）：

如果我用 current_order 注释掉代码行，一切都在生产中正常工作。

我在想这是在生产中加载东西的方式吗？但这是我第一次尝试部署，所以我不太了解开发和生产之间的区别。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T18:12:23.023

这个问题有点老了，但为了记录，这里有一个可能的答案。

也许您可以通过在控制器中使用一段狂欢代码来解决问题。将代码放在控制器中（或者，在 Spree 的情况下，放在[controller_decorator](http://guides.spreecommerce.com/logic_customization.html)中）通常比在视图中更好。

例如，如果您在产品视图中需要此 @current_order：

```
Spree::ProductsController.class_eval do
  @current_order = Spree::Order.find(session[:order_id])
end 
```

但我不知道为什么它在开发中而不是在生产中工作。

# android - 从列表视图中动态创建的编辑文本框中获取输入值

> ID：11135885
> 
> 赞同：0
> 
> 时间：2012-06-21T10:05:46.450
> 
> 标签：android, arrays, button, android-edittext, clicklistener

我有一个列表视图，其中包含根据列表视图中元素的数量动态创建的几个 EditText。列表视图中的项目由来自服务器的数据填充。对于每个编辑文本，在同一列表视图的每一行中都有一个“添加”按钮。我想要的是，当用户在这些编辑文本框中输入一些数字并单击“添加”按钮时，输入的数字应按单击顺序存储在某个数组中（第一个输入在数组的第一个位置）。数据供将来用于在单独的列表视图中显示输入数字。在我的代码中，当我在编辑文本框中输入一些数字并单击“添加”时，只有第一个输入有效。在接下来的点击中，没有任何效果（这里显示吐司）..请帮助..您可以编辑代码。谢谢提前。（我想要的是存储所有这些输入，它的用户选择只在选定的框中输入）

```
public void Addcart(View v)
{

try{    final EditText editnum= (EditText) findViewById(R.id.edittext); 

View.OnClickListener handler = new View.OnClickListener(){
    public void onClick(View v) {   
        if(v.getId()==R.id.addbutton)
        { //  switch (v.getId()){
      //  case R.id.addbutton:
            Toast.makeText(getBaseContext(), 
                    "Input: " + editnum.getText().toString(), 
                    Toast.LENGTH_SHORT).show();
           //   break;
        }
    }
};

findViewById(R.id.addbutton).setOnClickListener(handler);
}
catch(Exception e){
    Log.e("Android Edit Text Example", e.toString()); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:22:32.237

我想如果你创建了扩展 BaseAdapter 的类。它在 getView() 方法中渲染列表视图的工作。因此，您可以轻松获取该列表行的位置（getView(int) 参数是您的渲染位置），并且您可以在其中创建动态编辑文本，还可以动态添加按钮设置侦听器。

现在你可以通过使用 onItemclickListener() 来获取你点击的行的位置，因为该列表返回用户点击的行的位置，

所以在 Addbutton 点击​​你可以创建 Vector 并使用它的方法将输入的元素插入到指定索引处的向量中。

因此，下次渲染新列表时，您可以将此向量用作列表以作为数字数据传递。

希望解释对你有用..

# objective-c - 无法访问 ivar CGPDFPageRef

> ID：11135904
> 
> 赞同：0
> 
> 时间：2012-06-21T10:06:59.320
> 
> 标签：objective-c, ios, xcode, variables, cgpdfdocument

我无法从 ContentViewController 访问 ReaderControllerView 的 CGPDFPageRef 和 CGPDFDocumentRef。`@public`我在我的头文件中声明了它们，如下所示：

```
@interface ReaderContentPage : UIView{
  @public
    CGPDFDocumentRef _PDFDocRef;
    CGPDFPageRef _PDFPageRef; 
```

我尝试像这样访问它们：

```
ReaderControllerView *theReader = [ReaderControllerView alloc]init];

theReader._PDFPageRef //OR
theReader._PDFDocRef 
```

它不会出现。但是，我可以毫无问题地访问其他 iVar。所以这真的让我很烦恼，为什么我不能访问这两个变量。谁能告诉我为什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:27:33.473

您在类中声明`CGPDFDocumentRef _PDFDocRef; CGPDFPageRef _PDFPageRef`了这些变量`ReaderContentPage`并尝试通过创建类对象来访问它们，`ReaderControllerView`这怎么可能？

# project-management - MPXJ Api 会在写入 .MPX 文件之前自动计算 endDate 吗？

> ID：11135907
> 
> 赞同：1
> 
> 时间：2012-06-21T10:07:00.763
> 
> 标签：project-management, ms-project, java, mpxj

我正在使用**MPXJ Java Api**在 Java中创建、读取 Microsoft Project Planner 文件..我在执行代码时发现了一个特定问题..代码执行文件已创建...我的问题是这个 API 会计算持续时间， EndDate 等自动基于子任务???>..因为当我在 Project Planner 中打开文件时，我可以看到 Task1 的结束日期和持续时间。但是当我在写入该文件之前打印它时，它显示为null..有什么建议吗？

谢谢，。

```
 ProjectFile file = new ProjectFile();

 Task task1 = file.addTask();
      task1.setName("Summary Task");
 Task task2 = task1.addTask();
      task2.setName("First Sub Task");
      task2.setDuration(Duration.getInstance(10.5, TimeUnit.DAYS));
      task2.setStart(df.parse("01/01/2003"));

  System.out.println(task1.getFinish()); //printing null
ProjectWriter writer = getWriter("sample.mpx");
      writer.write(file, "sample.mpx"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:50:27.960

我可以确认 MPXJ 不会根据子任务计算结束日期和持续时间。但是，Microsoft Project 会执行此操作，这就是您在导入 MPX 文件时会在 MS Project 中看到属性的原因。

# c# - C#检测字符串数组中的空字符

> ID：11135908
> 
> 赞同：2
> 
> 时间：2012-06-21T10:07:07.650
> 
> 标签：c#, arrays, streamreader

我正在使用`StreamReader`字符串数组从文本文件中读取`text[]`。文本文件中的其中一行被读取为`"\0"`数组的位置 1 -> 20。我将如何检测这个空字符并忽略这一行。

代码示例：

```
StreamReader sr = new StreamReader(Convert.ToString(openFileDialog1.FileName));
while (!sr.EndOfStream)
{
    string l= sr.ReadLine();
    string[] parsedLine = l.Split(new char[] { '=' },StringSplitOptions.RemoveEmptyEntries);
    // Not working:
    if (parsedLine.Length == 0)
    {
        MessageBox.Show("Ignoring line");
    } 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:11:26.137

假设您的意思是一个带有 ascii 代码的字符：0

```
 if (parsedLine.Length == 0 || parsedLine[0] == '\0')continue; 
```

**如果 parsedLine 是一个字符串，则编辑** 上述内容将起作用，但对于代码中的解析：

```
 string[] parsedLine = l.Split(new char[] { '=' },StringSplitOptions.RemoveEmptyEntries)
                      .Where(s=>s.Length != 1 || s[0] != '\0').ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:11:12.190

使用内置[`String.IsNullOrEmpty()`](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)方法：

```
if (!string.IsNullOrEmpty(l))
{
    // your code here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T10:22:15.403

如果它包含空字符，则忽略该行。

```
string l = sr.ReadLine();
if (string.IsNullOrEmpty(l) || l[0] == '\0'))
   continue;
... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T10:31:35.863

这是一个应该可以工作的 linq 解决方案：

```
StreamReader sr = new StreamReader(Convert.ToString(openFileDialog1.FileName));
while (!sr.EndOfStream)
{
    string l= sr.ReadLine();
    bool nullPresent = l.ToCharArray().Any(x => x.CompareTo('\0') == 0);

    if (nullPresent)
    {
        MessageBox.Show("Ignoring line");
    }
    else
    {
        // do other stuff
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T10:11:40.193

```
string l= sr.ReadLine();
if (l == "") {
  MessageBox.Show("Ignoring line");
  continue;
} 
```

# iphone - 我必须使用哪些 iOS 设备进行测试？

> ID：11135909
> 
> 赞同：0
> 
> 时间：2012-06-21T10:07:10.180
> 
> 标签：iphone, ios, ipad, ipod-touch

我有 iPod touch 4th。
我正在用它开发 iPhone 应用程序。
我使用 ARC。所以目标iOS是iOS5.0或更高版本。

我会在发布应用程序之前购买 iPhone 4S 以使用 iPhone 4S 进行测试。

购买 iPhone 4S 并进行测试是个好主意吗？
用 iPod touch 4th 和 iPhone 4S 测试就够了吗？

我不需要用 iPad 或 iPhone 4 或 3GS 进行测试吗？
（我没钱买。）

我主要在我的应用程序中使用 MPMediaPlayer 库和 MPMusicPlayer。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:17:53.827

您应该在尽可能多的设备上进行测试。但这可能会变得非常困难和昂贵。

您可以做的是找到 beta 测试人员，让他们为您测试应用程序。这样，您无需购买即可获得应用多个设备的测试。

[Test Flight](http://testflightapp.com/)有一些很棒的工具可以做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T10:18:24.110

最残酷和正确的答案是你必须测试所有设备以确保一切正常，但我认为用 iPod 和 iPAd 测试很好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T10:19:11.740

尽管建议您在具有目标软件版本的所有设备上测试您的应用程序，但由于资源有限，大多数人不会这样做。因此，如果您愿意，您可以将此任务外包给一些免费的 lance 网站上的其他开发人员......（您可以随时要求他们提供崩溃日志以检查他们是否真的这样做了。）TestFlight 可以帮助您实现这一目标。

# header - 添加包含路径时生成文件错误

> ID：11135910
> 
> 赞同：0
> 
> 时间：2012-06-21T10:07:25.557
> 
> 标签：header, makefile, g++, linker-errors

我的 makefile 中有一个非常奇怪的错误：如果我将错误的路径传递给 boost 包含文件夹，则以下版本会生成一个 .o 文件。但是，当我通过正确的路径时，出现以下错误：

> /src/third-party/build/boost_1_49_0/include/boost/container/map.hpp:147:1：错误：将“sizeof”无效应用到不完整类型“boost::STATIC_ASSERTION_FAILURE”使：*** [Bidding.o]错误 1

生成文件如下

```
CC=g++
TPLOC=/home/zil/RTB2/0.1/src/third-party/build
COMMON=/home/zil/RTB2/0.1/src/common
SRC_HEAD=/home/zil/RTB2/0.1

all:  Bidder.o main.o main

Bidder.o: Bidder.cpp
       $(CC) -g -fPIC -c Bids.cpp -I$(TPLOC)/boost_1_49_0/include -I.

main.o: main.cpp
    $(CC) -g -fPIC -c main.cpp -I$(TPLOC)/boost_1_49_0/include -I$(COMMON) -I$(TPLOC)/libzdb/include/zdb -I$(TPLOC)/apache/include

main: main.o
    $(CC) -fPIC main.o -o /home/zil/sandbox9/$@ -lbk -lrtbshm -lboost_program_options -lboost_thread -lapr-1 -lrt -lpthread -lzdb -L $(SRC_HEAD)/build/lib -L$(COMMON)/shm -L $(TPLOC)/boost_1_49_0/lib -L $(TPLOC)/libzdb/lib -L $(TPLOC)/apache/lib 
```

有人可以建议吗

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:19:28.297

可能是您在某处安装了另一个旧版本的 boost，例如 /usr/include/boost。您的代码可能使用旧的 bo​​ost 构建，但不是 1.49。

此外，通常不需要使用`-I.`. 只需使用`include ""`（带双引号）搜索包含文件的文件夹。

# matlab - 同一图中的不同颜色条

> ID：11135918
> 
> 赞同：0
> 
> 时间：2012-06-21T10:08:25.373
> 
> 标签：matlab, colors, plot, matlab-figure, color-mapping

一个简单的问题。我有一个身影。我需要握住它，并使用散点图在其上放置一些点。图有一个`colormap(jet)`。我希望这些新点是黑色的。我尝试使用 caxis。

这就是我所做的：

```
cmap=colormap(jet);cmap=[[0;0;0]';cmap;[1;1;1]'];caxis([-pi pi]);colormap(cmap); 
```

我将新点的值设置为 10 或 -10。所以它们是黑色或白色的。但是我原始图像中的最低值或最高值也是黑色或白色。由于`caxis`作品小于或等于基础。

如果你能建议一些其他的方法，那也很好。

提前致谢。

ñ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:25:07.773

我可以想到两种方法。

1.  如果你用线或图做散点图，你可以指定颜色：`line(x_data,y_data,'Color','k')`（k 是黑色）。

2.  您可以在覆盖的第二个轴上绘制散点图。以下命令应该完成大部分工作（但也许你应该调整）：

* * *

```
a1 = gca;

a2 = axis('Color','none'... % to make it transparent
,'Position',get(a1,'Positon')... % to have it at exactly the same position
,'XLim',get(a1,'XLim')... % same xrange
,'YLim',get(a1,'YLim')... % same yrange
,'XTick',[],'YTick',[]) % turn of ticks as they are already in the other axis 
```

# silverlight-4.0 - 从后面的代码创建样式

> ID：11135920
> 
> 赞同：0
> 
> 时间：2012-06-21T10:08:36.497
> 
> 标签：silverlight-4.0

在我的 silverlight 应用程序中，我想从后面的代码创建一个样式并将创建的样式应用于控件。在数据库中，我们有一个表，它存储一个值，如 FontNaame 、颜色、粗体、斜体、字体大小 我想根据该参数创建一个样式并应用于控件

他们有可能吗？

如果可能，请添加代码

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:12:34.537

尝试这样的事情：

```
 // sampleText is the control to apply the style to
      Style styl = new Style(sampleText.GetType());
      switch (str)
      {
        case "Bold":
          styl.Setters.Add(new Setter(FontWeightProperty, FontWeights.ExtraBold));
          break;
        case "Italic":
          styl.Setters.Add(new Setter(FontStyleProperty, FontStyles.Italic));
          break;
      }
      sampleText.Style = styl; 
```

简单的示例项目在这里：[http ://sdrv.ms/MWPxuO](http://sdrv.ms/MWPxuO)

# ios - 如何在 UITableView 下方放置一个 UIButton？

> ID：11135921
> 
> 赞同：0
> 
> 时间：2012-06-21T10:08:37.103
> 
> 标签：ios, xcode, interface-builder

在 Interface Builder 中，我有一个`UITableView`并且我想`UIButton`在它下面放置一个。我将 a`UIView`放入屏幕的下部并将其`UIButton`放入其中 - 如果`UIButton`没有`UIView`.

现在 IB 中的一切看起来都不错，但是，当我运行应用程序时，尽管表格下方有足够的位置，但按钮并未显示在那里。我的同事说我`UIButton`可能被桌子盖住了，他通过以编程方式创建按钮来解决这个问题。但我想在 IB 中创建这个按钮......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:19:47.107

据我所知，我们无法将图像添加到表格视图中。因此，当您创建新文件时，您可以在添加按钮的顶部向 Controller.ie 表格视图中添加任何元素，而`UITableviewController`不是`UIViewController`使用.....我希望这个描述可能会有所帮助。

# sql - JPA 和 Netbeans 实体关系

> ID：11135927
> 
> 赞同：0
> 
> 时间：2012-06-21T10:08:49.740
> 
> 标签：sql, jpa, netbeans, entity, relationship

我有两个表：A 和 B。A 与 B 的关系为 1:1。

当我执行“从数据库创建实体类”时，Netbeans 会生成两个实体类，但 A 有一个注释：

```
@OneToMany
private List<B> bCollections; 
```

但是我设置了 1:1 的关系，为什么会发生这种情况？

SQL脚本：

```
-- -----------------------------------------------------
-- Table `mydb`.`A`
-- ----------------------------------------------------

CREATE  TABLE IF NOT EXISTS `mydb`.`A` (

  `idA` INT NOT NULL ,

  `value` VARCHAR(45) NULL ,

  PRIMARY KEY (`idA`) )

ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `mydb`.`B`
-- -----------------------------------------------------

CREATE  TABLE IF NOT EXISTS `mydb`.`B` (

  `idB` INT NOT NULL ,

  `values` VARCHAR(45) NULL ,

  `A_idA` INT NOT NULL ,

  PRIMARY KEY (`idB`) ,

  INDEX `fk_B_A` (`A_idA` ASC) ,

  CONSTRAINT `fk_B_A`

    FOREIGN KEY (`A_idA` )

    REFERENCES `mydb`.`A` (`idA` )

    ON DELETE NO ACTION

    ON UPDATE NO ACTION)

ENGINE = InnoDB; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:42:48.380

也许添加约束

```
UNIQUE (A_idA) 
```

# linux - 删除一些文本对的差异

> ID：11135928
> 
> 赞同：2
> 
> 时间：2012-06-21T10:08:51.673
> 
> 标签：linux, perl, text

几天前，我问了一个关于在 2 个文本文件中标记差异的问题，并很快得到了回答。

现在我有一个相当相似的问题，但有点复杂。我有 2 对具有以下特征的文件： pair1: (File1.txt , File2.txt) pair2: (File3.txt , File4.txt)

这些对中的每个文件之间存在逐行对应关系。说 File1.txt 和 File3.txt 是一些英文单词，File2.txt 和 File4.txt 分别是它们的阿拉伯语和法语翻译。此外，File1.txt 和 File3.txt 非常相似（在某些情况下相同）。

```
 File1.txt       File2.txt
    EnWord1         ArTrans1
    EnWord2         ArTrans2
    EnWord3         ArTrans3
    Enword4         ArTrans4

    File3.txt       File4.txt
    EnWord1         FrTrans1
    EnWord3         FrTrans3
    Enword4         FrTrans4
    Enword5         FrTrans5 
```

现在我要做的是比较这些对的英文面，找到两个文件中出现的共同词（EnWord1、EnWord3 和 EnWord4）并过滤掉它们对应的翻译。简而言之，我可以说使用两个双语英语-阿拉伯语和英语法语词典，我正在尝试构建一个 3 语种英语-阿拉伯语-法语词典。怎么可能？

我必须补充一点，因为有很多这样的对（字典存储在不同的文件中，每个文件都包含一部分单词，并且由于某些原因无法合并文件然后处理它们）代码的速度非常重要，我正在寻找一种快速的方法来做到这一点。

最后，请给我一些要点（甚至可能是完整的代码）在 Perl 中执行此操作。

最好的问候，哈基姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:19:50.490

将此视为提示，我尚未验证

```
join <(paste file.1 file.2) <(paste file.3 file.4) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T15:18:35.267

我假设您要维护的顺序如下`File1.txt`。以下`perl`应该完成您正在寻找的内容：

```
#!/usr/bin/perl

use strict;
use warnings;

my @pair1 = `paste -d ":" $ARGV[0] $ARGV[1]`;
my @pair2 = `paste -d ":" $ARGV[2] $ARGV[3]`;

my @pairs = (@pair1, @pair2);
my (%seen, @dups);

foreach (@pairs)
{
  my $word = (split ":", $_)[0];
  push @dups, $word if $seen{$word}++;
}

open (FILE0, ">", "NEW_File0.txt") or die;
open (FILE1, ">", "NEW_File1.txt") or die;
open (FILE2, ">", "NEW_File2.txt") or die;

foreach my $duplicate (@dups)
{
  print FILE0 "$duplicate\n";

  foreach (@pair1) { print FILE1 ((split ":", $_)[1]) if $_ =~ /^$duplicate:/; }
  foreach (@pair2) { print FILE2 ((split ":", $_)[1]) if $_ =~ /^$duplicate:/; }
}

close FILE0;
close FILE1;
close FILE2; 
```

像这样运行：

```
./script.pl File1.txt File2.txt File3.txt File4.txt 
```

* * *

`grep "" NEW_File*`结果：

```
NEW_File0.txt:EnWord1
NEW_File0.txt:EnWord3
NEW_File0.txt:EnWord4
NEW_File1.txt:ArTrans1
NEW_File1.txt:ArTrans3
NEW_File1.txt:ArTrans4
NEW_File2.txt:FrTrans1
NEW_File2.txt:FrTrans2
NEW_File2.txt:FrTrans3 
```

可能不是最有效的做事方式，但至少应该给你一个开始的地方。HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:16:12.560

这将是 Perl 中的粗略代码。

```
%Dict1 = map { /^(.+),(.+)$/ } `paste file1.txt file2.txt -d,`;
%Dict2 = map { /^(.+),(.+)$/ } `paste file3.txt file4.txt -d,`;

print "Col1,Col2,Col3";
print "$_,$d1{$_},$d2{$_}\n" foreach (keys %k) ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T11:40:16.550

我不想合并文件，每种语言都必须在一个单独的文件中，但它们必须是文件之间的 1 对 1 对应关系。根据我在第一篇文章中讨论的示例，完成该过程后，文件的内容必须如下：

 `````
File1.txt:
EnWord1         
EnWord3
Enword4 
````  ``````
File2.txt:
ArTrans1         
ArTrans3
ArTrans4 
````  ``````
File4.txt:
FrTrans1
FrTrans3
FrTrans4 
````  `正如我在该示例中所解释的，EnWord1、EnWord3 和 EnWord4 是 File1.txt 和 File3.txt 中常见的英文单词。

中间必须保留的重要一点是 File1 和 File3 都是英文的，它们共享一些单词。我需要首先找到这些文件的公共行并将它们存储在另一个文件中（例如 File5.txt），然后过滤 File2 和 File4，使其仅包含存储在 File5 中的单词的翻译。``````

# ruby-on-rails - Rails 应用程序部署，rake DB:migrate 不创建表并希望表已经在这里创建它们

> ID：11135931
> 
> 赞同：1
> 
> 时间：2012-06-21T10:08:53.547
> 
> 标签：ruby-on-rails, database, migration, production

使用rails 3.1数据库mysql的服务器ubuntu 64b App

现在 rails db:create 工作正常

Rails db:migrate 手动完成或通过 cap deploy:migration 给我以下错误：

> 耙中止！Mysql2::Error：表'mywebsite_production.galleries'不存在：SHOW FIELDS FROM `galleries` /srv/d_mywebsite/www/mywebsite/shared/bundle/ruby/1.9.1/gems/activerecord-3.1.3/lib/active_record/ connection_adapter/mysql2_adapter.rb:283:在“查询”中

这个部署有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-18T22:17:54.520

我只是注释掉我的设备和`rails_admin`路由`config/routes.rb`，一切都解决了。检查您的任何路线是否需要存在`mywebsite_production.galleries`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:32:31.437

两个可能的问题：

1.  在手动创建数据库时，您可能没有正确命名它。

2.  或者，因为您说它`db:create`失败了，另一个问题可能是 Rails 或您的数据库没有正确设置，因此无法相互通信。

我建议你先调查这个问题，这很可能是导致失败`db:create`的同一件事。`db:migrate`

通过自己创建数据库，您所做的只是将问题移到堆栈中，一旦您设法手动修复迁移问题，您可能会遇到更多问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:39:48.110

你们都可以加载所有表名并检查您手动创建的表是否存在于列表中？

您可以使用列出表名`ActiveRecord::Base.connection.tables`

# javascript - 只执行一次函数

> ID：11135932
> 
> 赞同：1
> 
> 时间：2012-06-21T10:09:00.770
> 
> 标签：javascript, jquery, google-maps

我有一个在点击事件上执行的函数，但问题是我希望它只执行一次。

点击时执行的函数代表一个谷歌地图绘制到目标元素。该函数如下所示：

```
Cluster.prototype.initiate_map_assembling = function(target, latitude, longitude) {
    var canvas = $(target).children();
    var coordinates = new google.maps.LatLng(latitude, longitude);

    var options = {
        zoom: 9,
        center: coordinates,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map($(canvas)[0], options);

    var marker = new google.maps.Marker({
        position: coordinates,
        map: map
    });
}; 
```

我在这样的`click`事件上运行它：

```
Cluster.prototype.initiate_google_maps_action = function() {
    var self = this;
    return $(this.maps_wrapper_class).each(function(index, element) {
        var canvas = $(element).parents().eq(3).find(self.map_canvas_wrapper_class);
        return $(element).on('click', function(ev) {
            var latitude = $(element).attr('data-latitude');
            var longitude = $(element).attr('data-longitude');
            self.initiate_map_assembling(canvas, latitude, longitude);
            ($(canvas).hasClass('selected')) ? $(canvas).removeClass('selected') : $(canvas).addClass('selected');
            ev.preventDefault();
        });
    });
}; 
```

我想要实现的是每次单击按钮时都停止绘图，因为它只需要一次，因为我只是隐藏容器 div 而不是破坏它。那么我该怎么做呢？我尝试在函数执行时添加临时变量（并在第一次后将其设置为 true，在启动时将其设置为 false），如果临时变量为 true，则返回 false，但收效甚微，因为我无法在绘图函数中返回 false .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:12:11.893

使用 jQuery 的`.one()`.

[http://api.jquery.com/one/](http://api.jquery.com/one/)

*根据 OP 的解释：总是有可能为一个*元素定义多个点击事件。

因此，您可以像已经做的那样定义一个 with`.one()`和另一个 with `on()`，让代码在第一次运行时只运行一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T10:13:23.407

你可以只绑定一次点击：

```
$(document).one('click', function(e) {
    //do your code here
}); 
```

或者

```
$('#someBtn').click(function(){    
    if ($(this).attr('data-once')!='already_clicked' ){
        //your code here
        $(this).attr('data-once', 'already_clicked');
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T10:18:41.330

两种选择：

1.  使用两个事件处理程序：一个用 定义`one`，另一个用`on`
2.  在封闭处使用计数器。

就像是：

```
var counter = 0;
return $(element).on('click', function() {
    counter++;
    if ( counter > 1 ) {
    }
}); 
```

# php - PDO 无法将行移动到不同的数据库

> ID：11135934
> 
> 赞同：1
> 
> 时间：2012-06-21T10:09:02.330
> 
> 标签：php, mysql, pdo

我决定试试 PDO。下面的函数应该将表中的一行移动到另一个数据库（从暂存到生产），然后删除暂存中的行。它是 2 个完全独立的数据库。

我能够获取该行并将其插入到生产数据库中，但它不会删除暂存数据库中的行，并给我一个错误，说不正确的字段名称 343 这是行的 id，我不知道为什么认为这是一个字段名，实际上它是值。

也请随时给我更好的最佳实践。我不认为我的代码很优雅，并认为有更好的方法来做到这一点，尤其是有例外

```
 private function moveCallToProduction() {
    try {
        $array = array(":id" => $this->call['info']['call_id']);
        $sql = "SELECT * FROM `calls` WHERE `id`=:id";
        $query = $this->staging->prepare($sql);
        $query->execute($array);
        $row = $query->fetch(PDO::FETCH_NUM);
        try {
            $sql = "INSERT INTO `calls` (`id`,`sip_id`,`extension`,`caller_id`,`stage`,`status`,`survey_id`,`start`,`answer`,`hangup`) VALUES (`?`,`?`,`?`,`?`,`?`,`?`,`?`,`?`,`?`,`?`)";
            $stmt = $this->production->prepare($sql);
            $stmt->execute($row);
            if(!$stmt) {
                throw new Exception('Unable to move the call '.$this->call['info']['call_id'].' to the production server.');
            } else {
                try {
                    $sql = "DELETE FROM `calls` WHERE `id`='".$this->call['info']['call_id']."'";
                    $query = $this->staging->query($sql);
                    if(!$query) {
                        throw new Exception('Unable to delete call '.$this->call['info']['call_id'].' from the staging server.');
                    }
                }
                catch(PDOException $e) {
                   $this->informer("FATAL",$e->getMessage());
                }
            }

        }
        catch(Exception $e) {
            $this->informer("FATAL",$e->getMessage());
        }
    }
    catch(PDOException $e) {
        $this->informer("FATAL","We're unable to transport the call from the staging to production server. Error: ".$e->getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:30:53.563

我假设这是一个逃避问题。

试试这个：

```
...
try {
    $sql = "DELETE FROM `calls` WHERE `id`= :id";
    $stmtx = $this->staging->prepare($sql);
    $stmtx->execute(array($this->call['info']['call_id']));
    if(!query) {
... 
```

# javascript - 如何从后面的 asp.net 代码展开/折叠 ddaccordion？

> ID：11135938
> 
> 赞同：0
> 
> 时间：2012-06-21T10:09:17.707
> 
> 标签：javascript, jquery, asp.net

我正在使用[ddaccordion](http://www.dynamicdrive.com/dynamicindex17/ddaccordion.htm)替换 Ajax CollapsiblePanelExtender。我想使用 ddaccordion 实现与 Ajax CPE 相同的行为。

我有两个要求：

1）我需要根据展开/折叠面板检查代码背后的一些条件。我该怎么做？

2）我设置了persiststate：true，//在浏览器会话中保持打开内容的状态？它在这里明确提到，状态一直存在，直到浏览器关闭，但我只需要将状态保持在回发中。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:14:33.313

我自己解决了这个问题。

只是分享第二个问题的解决方案。

在主 aspx 页面上，我已经放置了这个 javascript 代码。

```
var isPostBack = "<%#Page.IsPostBack.ToString().ToLower()%>";
            if (isPostBack == "false") {
                deleteCookie(cookiename);
            }

function setCookie(name, value, days) { if (days) { var date = new Date(); date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000)); var expires = "; expires=" + date.toGMTString(); } else var expires = ""; document.cookie = name + "=" + value + expires + "; path=/"; }
function deleteCookie(name) { setCookie(name, "", -1); } 
```

# android - 如何更改 ActionBarSherlock 上的字体样式

> ID：11135939
> 
> 赞同：7
> 
> 时间：2012-06-21T10:09:18.260
> 
> 标签：android, actionbarsherlock

如何使用 ActionBarSherlock 的主题更改操作栏标题的字体大小？

我目前的主题（应用于我的整个应用程序如下）：

```
<style name="Theme.MyAppDefaults" parent="@style/Theme.Sherlock.Light">
         <item name="android:textSize">@dimen/default_textsize</item>
         <item name="actionBarSize">@dimen/action_bar_height</item>
</style> 
```

请注意，字体大小设置为我应用程序中所有视图的设置。只是不是 ActionBar 的字体。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T07:38:43.827

如果您只需要更改标题的样式，您可以添加一个自定义视图，如下所示：

```
<TextView
    android:id="@+id/action_custom_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="My Custom title"
    android:textColor="#fff"
    android:textSize="18sp" /> 
```

然后隐藏实际标题并显示自定义视图。

```
 _actionBar.setDisplayShowTitleEnabled(false);

     LayoutInflater inflater = LayoutInflater.from(this);
     View customView = inflater.inflate(R.layout.custom_action_layout, null);

     TextView titleTV = (TextView) customView.findViewById(R.id.action_custom_title);
     // you can apply a custom typeface here or do sth else...

     _actionBar.setCustomView(customView);
     _actionBar.setDisplayShowCustomEnabled(true); 
```

就这样！如果您对 ActionBar 标题的默认字体大小感兴趣，它是 18sp。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T06:17:00.747

我通过使用以下主题得到了这个工作：

```
<style name="Theme.MyApp.Default" parent="@style/Theme.Sherlock.Light">
       <item name="actionBarStyle">@style/MyApp.SherlockActionBarStyle</item>
       <item name="android:actionBarStyle">@style/MyApp.SherlockActionBarStyle</item>
</style>

<style name="MyApp.SherlockActionBarStyle" parent="@style/Widget.Sherlock.ActionBar">
       <item name="titleTextStyle">@style/MyApp.ActionBar.TextAppearance</item>
</style>

<style name="MyApp.ActionBar.TextAppearance" parent="@style/TextAppearance.Sherlock.Widget.ActionBar.Menu">
      <item name="android:textSize">@dimen/default_textsize</item>
      <item name="android:textColor">@color/dark_grey</item>
 </style> 
```

请注意，文本大小采用名为 的样式`MyApp.ActionBar.TextAppearance`。同样根据[ActionBarSherlock](http://actionbarsherlock.com/theming.html)主题应该设置在 android 前缀属性和普通属性上（参见上面样式 Theme.MyApp.Default 中的 actionBarStyle。）

# c# - Windows Phone 7 中的崩溃记录

> ID：11135942
> 
> 赞同：1
> 
> 时间：2012-06-21T10:09:38.523
> 
> 标签：c#, silverlight, windows-phone-7

我想在我的应用程序中跟踪应用程序崩溃。所以我在互联网上查看并得到了这个，它提供了全面的解决方案。

[http://blog.ike.to/2011/02/02/wp7-application-crash-reporter/](http://blog.ike.to/2011/02/02/wp7-application-crash-reporter/)

就我而言，我的应用程序页面位于不同的项目中，所有业务逻辑位于不同的类库项目中。

我还把这个 Crashreporter 代码放在那里。但我在这条线上遇到错误

```
App.Current.UnhandledException += new EventHandler<ApplicationUnhandledExceptionEventArgs>(App_UnhandledException); 
```

因为 App.xaml 不在此项目中。我如何在此处引用该部分或创建它的 app.xaml 对象并使用此行。因为我想将这门课与我的观点分开。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:09:14.597

看起来您需要将处理程序代码保留在主应用程序中，只需重新识别异常源并将其放入不同的日志文件（或您正在使用的文件）中。

# git - 将另一个提交导入我的仓库

> ID：11135943
> 
> 赞同：5
> 
> 时间：2012-06-21T10:09:47.503
> 
> 标签：git

抱歉新手问题，但有没有办法将其他人提交（到他自己的仓库）导入我的仓库？手动更改 900 多个文件会很困难

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T10:14:54.997

您需要将对方的仓库添加为您的远程仓库，并获取其更改：

```
git remote add matefork <github-url>
git fetch matefork 
```

然后 git 知道提交，只需用它的 SHA 挑选它

```
git cherry-pick <SHA1> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T10:12:58.650

制作一个补丁文件，`git format-patch` 然后将其应用到您的仓库中`git apply patchfile`

# messaging - 我可以在我的 Facebook 应用程序上设置一个链接来私信我的业务页面吗？

> ID：11135944
> 
> 赞同：0
> 
> 时间：2012-06-21T10:09:49.317
> 
> 标签：messaging, fan-page, private-messaging

我被要求为我的企业的粉丝页面设置一个应用程序，以显示我们公司的职位空缺，以便我们可以通过 FB 获得申请。有没有办法设置一个链接来引导用户向我们的粉丝页面发送消息？老板们特别希望应聘者通过 facebook 而不是仅仅设置一个指向我们常规电子邮件地址的链接，因为他们希望能够监控我们通过 FB 获得的查询。

有很多关于向粉丝发送消息的信息，但我无法提及能够设置一个权限，将用户带到他们的撰写消息屏幕，收件人将是我们的粉丝页面。

如果无法完成，则无法完成，但我们将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:18:55.530

不确定 Facebook 消息服务是否自动化，但您可以在业务粉丝页面上设置应用程序以收集工作查询。

您还在使用任何 Facebook 应用程序吗？

# jboss - 哪个 EJB 启动了 JBoss 上运行时间最长的事务？

> ID：11135946
> 
> 赞同：1
> 
> 时间：2012-06-21T10:09:58.680
> 
> 标签：jboss, monitoring

我使用 JBoss 4.2.3 GA。

我正在寻找一种简单的方法来监控 JBoss 以了解事务问题并从真实数据中了解事务在 JBoss 中的一般工作方式。我想得到回答的问题是：

*   现在运行时间最长的事务是什么？
*   他们跑了多久？
*   哪个交易被哪个暂停了？通常“嵌套”事务暂停“父”事务。
*   每个 looooong/嵌套/父事务在哪个 EJB 中开始？

到目前为止我发现的支持是不够的：

*   **JMX (console/twiddle) 中的TransactionManager 服务**仅提供常规信息，如 RunningTransactionCount、TransactionTimeout、ApplicationRollbeckCount 等。
*   **JMX 中的**ManagedConnectionPool 服务和****TOAD Oracle**（会话浏览器）等工具仅提供特定于 DB 的信息，但不告知哪个 EJB 启动了哪个 looong 事务。**

# java - Spring-social 获取 access_token

> ID：11135947
> 
> 赞同：0
> 
> 时间：2012-06-21T10:09:59.040
> 
> 标签：java, facebook, spring-social

嗨，我在教程中所做的所有人都喜欢。但我已经停止获取 access_Token。所以这是我重定向到 facebook 的代码。

```
@RequestMapping(method = RequestMethod.GET)
public void process(/*
                     * @ModelAttribute("user") User user, BindingResult
                     * result Model model,
                     */HttpServletRequest request, HttpServletResponse response) {
    FacebookConnectionFactory connectionFactory = new FacebookConnectionFactory("240362226072898", "657532dea6d091ab44a56668c47cca15");
    OAuth2Operations oauthOperations = connectionFactory.getOAuthOperations();
    OAuth2Parameters params = new OAuth2Parameters("http://localhost:8080/shop/facebook");
    String authorizeUrl = oauthOperations.buildAuthorizeUrl(GrantType.IMPLICIT_GRANT, params);

    try {
        response.sendRedirect(authorizeUrl);
        LOG.error("ALL WORKING FINE>>>");
    } catch (IOException e) {
        LOG.error("Errorrrrr" + e);
    } 
```

之后在其他控制器中。在 /facebook 上映射的我收到了一个 URL，但在我看到的 url 末尾我找不到任何参数原因#。像

```
http://localhost:8080/shop/facebook#access_token=.......&expires_in=6277 
```

如果我剪切“#”并粘贴“？” 一切都会好起来的

所以这是我收到此网址的控制器。

```
@Controller
@RequestMapping(value = "/facebook")
public class FacebookController {
    private static final Logger LOG = Logger.getLogger(FacebookController.class);

    @RequestMapping(method = RequestMethod.GET) 
    public void getAuthorisation(@RequestParam String access_token, HttpServletResponse response, HttpServletRequest request) {

        LOG.error("Access token"+access_token);
/*      LOG.error(request.getAttribute("access_token"));
        LOG.error(request.getParameter("access_token"));
*/      
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:37:36.993

使用 Javascript从[URI 片段](http://en.wikipedia.org/wiki/Fragment_identifier)中提取访问令牌。

请参阅[客户端流程](http://developers.facebook.com/docs/authentication/client-side/)的文档：

> 如果用户选择授权您的应用程序，用户将被重定向到：
> 
> YOUR_REDIRECT_URI#access_token=USER_ACCESS_TOKEN&expires_in=NUMBER_OF_SECONDS_UNTIL_TOKEN_EXPIRES
> 
> 请注意，与服务器端流程不同，访问令牌在 url 片段中传递给您的 redirect_uri，因此只能通过 Javascript 提供给您的应用程序。

# c# - C#水晶报表创建子报表

> ID：11135950
> 
> 赞同：1
> 
> 时间：2012-06-21T10:10:32.157
> 
> 标签：c#, crystal-reports

我制作了产品代码的水晶报表，显示为用户选择。如果用户从列表框中一次选择两个产品，那么在报告中这两个产品及其价格仅显示。

现在，我想为用户单击特定产品的全部信息添加子报告。显示在子报表中。有一个 product_code 供产品识别。

那么，我怎样才能实现显示信息的子报告链接。该用户单击主报告。

请帮我。

谢谢和问候... Mitesh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:26:56.527

尝试这个

右键单击水晶报表插入 -> 子报表 -> 为子报表命名，然后通过向导。

![在此处输入图像描述](../Images/40b2883c2bb9bdec15e05742b493edbe.png)

完成向导后，转到链接选项卡并在两个报告之间添加链接，通常它位于两个报告之间的公共列上。

![在此处输入图像描述](../Images/63a3b7c12794aefd7bebc5e2b8924780.png)

试试这个它会为你工作。

# php - 为什么 cUrl 无法通过 HTTPS 下载，除非 CURLOPT_SSL_VERIFYPEER 设置为“false”？

> ID：11135952
> 
> 赞同：2
> 
> 时间：2012-06-21T10:10:45.543
> 
> 标签：php, curl, azure, https

在我的 PHP 代码中，我尝试从以开头的 URL 下载文件`https://`

```
$curlHandle = curl_init();
curl_setopt($curlHandle, CURLOPT_URL, $url);
curl_setopt($curlHandle, CURLOPT_RETURNTRANSFER, 1);
$response = curl_exec($curlHandle);
curl_close($curlHandle); 
```

`$response``FALSE`除非我这样做：

```
curl_setopt($curlHandle, CURLOPT_SSL_VERIFYPEER, false); 
```

打电话之前`curl_exec()`。

我下载的 URL 来自 Window Azure Blob Storage 并以开头，`https://myaccount.blob.core.windows.net`因此我认为服务器 SSL 证书应该没有问题。

这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T10:12:15.890

发生这种情况是因为您没有使用被认为值得信赖的 CA 证书配置 curl，因此它无法验证远程服务器证书上的签名（尽管签名很可能是有效的）。

要验证签名，您应该设置`CURLOPT_CAINFO`或`CURLOPT_CAPATH`适当地设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T04:47:29.303

仅供参考，Microsoft 发布了一个[用于 PHP 的 SDK](https://github.com/WindowsAzure/azure-sdk-for-php)，它将为您处理所有这些事情，并让您的代码更多地与 azure 服务交互，而不是使用 HTTP。

# sql-server - 当输入参数为“ALL”时，T-SQL 存储过程返回所有记录

> ID：11135953
> 
> 赞同：1
> 
> 时间：2012-06-21T10:10:46.577
> 
> 标签：sql-server, tsql, stored-procedures

我有一个具有参数的存储过程：

```
@desk VARCHAR(50) 
```

我想要

```
SELECT *
FROM dbo.Desk
WHERE DeskName = @desk 
```

我还想在 . 的值时返回所有记录`@desk = 'All'`。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T10:11:43.453

只需在您的`WHERE`子句中包含此条件，如下所示：

```
SELECT  *
FROM    dbo.Desk
WHERE   DeskName = @desk
OR      @desk = 'All' 
```

正如下面的 Martin Smith 评论的那样，这种性能不会是最佳的 - 如果表很小，那么您可能更喜欢这种简洁的方法而不是更高性能的选项，只是为了您的 T-SQL 代码的清晰/可维护性，但是还请查看他链接到的文章...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T10:37:30.837

正如@MartinSmith 指出的那样，`field = @var or @var = 'ALL'`答案的类型有很大的缺点......

编译存储过程时，它会生成一个执行计划。并且该执行计划需要足以处理参数可能引发的所有场景。

在这种特殊情况下，您可能*（MartinSmith 肯定地说）*每次都扫描整个表。这是因为这样的执行计划能够满足这两个可能的要求。

如此有效，您最终得到了一个`least-worst case`执行计划。

要为每种情况（`@desk = 'ALL'`和`@desk != 'All'`）制定不同的计划，您需要有两个查询。这意味着，不幸的是，更长更简单、不太优雅的代码明显更好地执行代码......

```
IF (@desk = 'ALL')
  SELECT * FROM dbo.Desk
ELSE
  SELECT * FROM dbo.Desk WHERE deskName = @desk 
```

@MartinSmith 在他对问题的评论中发布的链接更详细地介绍了这一点。根据您的 SQL 经验水平，强烈推荐阅读；它解释了***很多***关于 SQL Server 的行为。但它非常深入。

更简单的方法是简单的；试试看。

为您的目的创建具有*实际*数据集的表，并具有适当的约束和索引。然后，为每个可能的答案创建一个存储过程，并测试它们。理想情况下使用分析器查看 CPU 时间、实际时间、读取、写入等。

您可能会看到差异是如此之小，您可以接受“最差”的答案并从它的简短中受益（因此使其成为您的“最佳”答案）。

您可能会看到实际时间更短，但 CPU 时间要高得多。如果您具有高并发性，您可能会因此决定使用最低的 CPU 时间。或者，如果您的并发性较低，则可能需要较高的 CPU 时间但较低的实际时间。

编程很棒，有很多考虑、交易和平衡。即使有这么简单的一段 SQL :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:58:04.583

最好和简单的方法：

```
SELECT * FROM dbo.Desk WHERE deskName = CASE WHEN @desk='All' THEN deskName ELSE @desk END 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-10-27T17:13:49.017

```
Declare @Desk varchar(50)

if @Desk = 'All' set @Desk = null

select * from dbo.desk where deskname = coalesce(@desk, deskname) 
```

# javascript - node.js 中的管道问题

> ID：11135954
> 
> 赞同：1
> 
> 时间：2012-06-21T10:10:48.440
> 
> 标签：javascript, node.js, pipe

我们在 node.js 中有以下示例

```
var http = require('http');
http.createServer(function(request, response) {
    var proxy = http.createClient(8083, '127.0.0.1')
    var proxy_request = proxy.request(request.method, request.url, request.headers);
    proxy_request.on('response', function (proxy_response) {
        proxy_response.pipe(response);
        response.writeHead(proxy_response.statusCode, proxy_response.headers);
    });

    setTimeout(function(){
        request.pipe(proxy_request);
    },3000);
}).listen(8081, '127.0.0.1'); 
```

该示例侦听 127.0.0.1:8081 中的请求并将其发送到 127.0.0.1:8083 中的虚拟服务器（始终返回 200 OK 状态码）。

当我们之前有一个异步模块（在本例中为 setTimeOut 时间）时，问题出在输入流（可读）和输出流（可写）之间的管道中。管道不起作用，并且没有任何内容发送到 8083 端口中的虚拟服务器。

也许，当我们在管道调用之前进行异步调用（在本例中为 setTimeOut）时，输入流会变为“不可读”状态，而在异步调用之后，管道不会发送任何内容。

这只是一个示例……我们使用来自 node.js 社区的更多异步模块对其进行测试，结果相同（ldapjs 等）……

我们尝试通过以下方式修复它： - request.readable =true; //在管道调用之前 - request.pipe(proxy_request, {end : false}); 结果相同（管道不起作用）。

有人可以帮助我们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:12:49.997

我相信这适用于 0.8.0。我没有在 0.6.11+ 中尝试

# iphone - 使用 NSCache/NSMutable Dictionary 保存历史记录

> ID：11135955
> 
> 赞同：0
> 
> 时间：2012-06-21T10:10:53.800
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个正在浏览网站的应用程序。我需要保留我访问的 html 页面的历史记录以及时间戳。如何使用 NSCache 和 NSMutableDictionary 将历史记录保存到我的文件/文件夹中？我尝试搜索使用 NSCache 或 NSMutableDictionary 的任何示例或教程 .. 但我无法在谷歌搜索中找到任何此类示例 .. 感谢和问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:30:43.993

将此作为 NSMutableArray *arrHistory, NSDateFormatter *formatter 作为类变量及其属性：

```
 [yourwebView setDelegate:self];
  arrHistory = [NSMutableArray alloc]init;
  formatter NSDateForteFormatter alloc] init];
  [formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"]; 
```

使用 webView 委托方法：

```
 - (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType;
 {
     NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:[[request URL] absoluteString],URL,[formatter stringFromDate:[NSDate date]],timestamp, nil];
     [arrHistory addObject:dict];
 } 
```

现在你有字典数组，因为每个字典都包含 url 和时间戳

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T10:07:30.487

这是一个很好的完整的 URL 缓存实现：

[https://github.com/RIKSOF/three20/blob/master/src/Three20Network/Sources/TTURLCache.m](https://github.com/RIKSOF/three20/blob/master/src/Three20Network/Sources/TTURLCache.m)

# eclipse - 在 Eclipse 的属性视图中显示 ColorPropertyDescriptor

> ID：11135960
> 
> 赞同：0
> 
> 时间：2012-06-21T10:11:11.207
> 
> 标签：eclipse, eclipse-plugin

I have added a ColorPropertyDescriptor to the Shapes example in GEF, however this displays as "RGB {0, 0, 0}" when a shape is selected, and only changes to a ColorCellEditor with button on the right hand side and coloured button on the选择属性时的左侧。

即使未选择该属性，如何显示 ColorCellEditor？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:48:40.843

我找到了解决方案：需要创建新的子类。

采用：

*   `ColorPropertyDescriptor1 extends ColorPropertyDescriptor`
    *   方法`ColorPropertyDescriptor1#getLabelProvider`应该返回`ColorPropertyLabelProvider`。
    *   当我们单击属性值时，方法`ColorPropertyDescriptor1#createPropertyEditor`应该返回以更改表示。`ColorPickerCellEditor`
*   `ColorPropertyLabelProvider extends LabelProvider` 方法`ColorPropertyLabelProvider#getImage`和`ColorPropertyLabelProvider#getText`应该返回颜色方块和注释。见`ColorPropertyDescriptor`。
*   `ColorDialogCellEditor extends DialogCellEditor`. 见`ColorCellEditor`。

# c# - 带有单元测试的 Setter 或构造函数注入

> ID：11135964
> 
> 赞同：0
> 
> 时间：2012-06-21T10:11:21.940
> 
> 标签：c#, .net

我正在尝试为我的问题制定最佳实践。我在一个类中有多个创建新对象的方法：

```
 public void ToBeTested()
    {
         ClassForExmaple classForExample = new ClassForExample();

         //Other logic.....
    }

    public void ToBeTested2()
    {
          ClassForExmaple2 classForExample2 = new ClassForExample2();

          //Other logic.....
    } 
```

ETC.....

我总共有大约 5 个这样的对象，我打算在这些对象上使用构造函数注入，但这看起来很混乱。由于其中有一些，我应该改用私有属性还是有其他方法？

我这样做是为了模拟这些新的调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:46:32.717

您应该使用构造函数注入。如果因为依赖项太多而导致混乱，那么你应该分解你的代码，这样你正在测试的类就不会做那么多。

对一个类有太多依赖表明您可能没有遵循[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

也就是说，5 个依赖项（在某些情况下）可能没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T10:53:50.870

在这种情况下使用构造函数注入似乎很好，因为看起来每种类型的对象都有一个实例。如果不是这种情况，您可以将工厂注入到类的构造函数中，并允许它根据需要创建对象。

我会避免嘲笑私有财产；如果你不得不求助于它，这通常意味着你在你的类中隐藏了可测试的代码，应该更好地暴露给测试框架。公开要在外部设置的公共属性会更好。

# grails - 基于日期的查询grails

> ID：11135965
> 
> 赞同：0
> 
> 时间：2012-06-21T10:11:22.050
> 
> 标签：grails, closures, named-query

我有一个域类：

```
class A{
    String abc
    String def
    Date dateDestruction
} 
```

我想编写一个 namedQuery 或一个闭包，使我能够根据给定的月份和年份检索 A 的各种对象的计数。我想以以下格式显示对象：

```
Feb 2011    Object 1
            Object 2
March 2011  Object 3
            Object 4
            Object 5 
```

关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T01:44:06.473

尝试使用 HQL，类似于以下内容：

```
A.executeQuery("select * from A a " +
                 "where month(a.dateDestruction) = ? and year(a.dateDestruction) = ?",
                 [/* month */, /* year */]) 
```

# c# - 如何使用响应式扩展同时读取交错文件

> ID：11135968
> 
> 赞同：2
> 
> 时间：2012-06-21T10:11:35.810
> 
> 标签：c#, .net, system.reactive

我是响应式扩展的新手，我想用它（在 c# 中）来读取一个包含多个交错流的文件。基本上该文件的格式为`ABCDABCDABCD...`. 我更愿意按顺序读取文件并分离流（即`AAA..`，`BBB..`等）并并行处理每个流，为每个流使用单独的线程。

必须有某种形式的缓冲以确保每个流可以尽可能保持忙碌（当然在限制范围内）。并非所有流都必须同时开始，在这种情况下，必须为延迟的流跳过许多元素。在这种情况下，缓冲可能会弥合差距。

文件中的元素很小（4 个字节），所以很健谈。因此，我也在寻找一种有效处理这个问题的方法。

我首先创建了一个可枚举的文件来读取文件。这可以提供一个包含流 ID 的结构，或者可以根据顺序（元素数模数流）分离流。后者可能更有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T22:04:29.767

这个问题到处都是“取决于”，特别是当您谈论性能和效率但提供了一个有点做作的例子时。也就是说，与真实文件相比，您的示例文件非常简单。但是，我将尝试提供一些关于它有用的建议。

这是一种将流转换为`Enumerable<char>`. 流将应用缓冲，这将一次发送一个结果。这可以提高效率（发回数据块），但在某些时候您需要一次处理一个，它也可能在这里。不要过早地优化。

```
IEnumerable<char> ReadBytes(Stream stream)
{
    using (StreamReader reader = new StreamReader(stream))
    {
        while (!reader.EndOfStream)
            yield return (char)reader.Read();
    }
} 
```

现在，假设这是“输出”可观察对象的处理代码。首先，我设置了输出 observables，然后在适当的时候订阅它们。请注意，我在这里使用了一个数组，所以我的输出可观察索引是数组索引。如果流索引不能转换为从零开始的索引，也可以使用字典。

```
var outputs = Enumerable.Repeat(0, 3).Select(_ => new Subject<char>()).ToArray();                                                                                                     

outputs[0].Delay(TimeSpan.FromSeconds(2)).Subscribe(x => Console.WriteLine("hi: {0}", x));
outputs[1].Delay(TimeSpan.FromSeconds(1)).Subscribe(x => Console.WriteLine("ho: {0}", x));
outputs[2].Subscribe(x => Console.WriteLine("he: {0}", x)); 
```

注意`Subject<char>`发送我的元素的使用。这取决于元素的类型，但`char`在给出的示例中有效。另请注意，我延迟元素只是为了证明一切正常。它们现在是独立的流，你可以对它们做任何你想做的事情。

好的，给定一个文件流：

```
var file = @"C:\test.txt";
var buffer = 32;
var stream = new FileStream(file, FileMode.Open, FileAccess.Read, FileShare.Read, buffer); 
```

我现在可以订阅并使用模索引发送到正确的输出流：

```
ReadBytes(stream)
.ToObservable(Scheduler.ThreadPool)
.Select((x,i) => new { Key = (i % 3), Value = x }) // you can change it up here
.Subscribe(x => outputs[x.Key].OnNext(x.Value)); 
```

这里有可能更有效的方法，具体取决于您如何计算目标流，但想法保持不变。

输入文件只包含一行：`ABCABCABCABCABCABC`

运行程序的输出是：

```
he: C
he: C
he: C
he: C
he: C
he: C 
```

一秒钟后：

```
ho: B
ho: B
ho: B
ho: B
ho: B
ho: B 
```

然后又一秒钟：

```
hi: A
hi: A
hi: A
hi: A
hi: A
hi: A 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T02:59:08.590

以下是我的解决方案，它基于 yamen 的回答。它似乎工作正常，这意味着顺序交错输入被分成多个并行处理（多线程）的顺序流。

但是，我不确定这是否是一个正确的实现（在编程风格、rx 合同等方面）。

```
const int MAX_BUFFERED_ELEMENTS = 1024;

// number of streams in the file
var numberOfStreams = 8;

// semaphore to limit buffered elements
var semaphore = new SemaphoreSlim(MAX_BUFFERED_ELEMENTS);
var cts = new CancellationTokenSource(); // should be used to cancel (left out of this sample)

// create subjects that are the base of each output stream
var subjects = Enumerable.Repeat(0, numberOfStreams).Select(_ => new Subject<ElementType>()).ToArray();

// create the source stream (reader is IEnumerable<ElementType>)
var observable = reader.ToObservable(Scheduler.ThreadPool).Publish();

// forward elements from source to the output subjects
int stream = 0;
observable.Subscribe(x => { 
    semaphores.Wait(cts.Token);   // wait if buffer is full
    _subjects[stream].OnNext(x);  // forward to output stream
    if (++stream >= numberOfStreams) stream = 0; }); // stream = stream++ % numberOfStreams

// build output streams
subjects.Select(
    (s,i) => s.ObserveOn(Scheduler.ThreadPool) // process on separate threads
    .Do(_ => semaphore.Release())              // signal that element is consumed
    .Subscribe(x => Console.WriteLine("stream: {0}\t element: {1}", i, x)) // debug 'processing'
    );

// start processing!
observable.Connect(); 
```

# java - 谷歌电视插件安卓模拟器低空间通知

> ID：11135972
> 
> 赞同：3
> 
> 时间：2012-06-21T10:11:50.647
> 
> 标签：java, android, google-tv

我在 Eclipse 中使用适用于 android 的 Google Tv Addon，我的模拟器运行良好，但在启动时它会给出空间不足的通知消息，即使我在创建 AVD 时给出大约 1000 MiB 的大小，它也会显示相同的错误。请帮忙。谢谢！

在控制台中得到这个：

com.android.ddmlib.SyncException：设备上没有剩余空间

问候，穆罕默德·塔希尔·阿什拉夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:26:46.747

[在 google 论坛](http://code.google.com/p/android/issues/detail?id=33697#c12)的评论 12 中查看解决方案。它对我有用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:08:52.940

我遇到了同样的问题，我认为这是一个错误。

我在这里创建了一个错误报告： [http ://code.google.com/p/android/issues/detail?id=33697](http://code.google.com/p/android/issues/detail?id=33697)

随意加注星标并向其添加评论/信息。

# objective-c - UITableViewCell 中的延迟加载

> ID：11135973
> 
> 赞同：0
> 
> 时间：2012-06-21T10:11:52.453
> 
> 标签：objective-c, uitableview, sdwebimage

我有一个简单的问题，我想在我的应用程序中使用延迟加载，所以在网上搜索并找到了一个非常好的以下库：

[https://github.com/rs/SDWebImage/tree/b357e8210c2a1c96ea768b16fd0c003baef77a04](https://github.com/rs/SDWebImage/tree/b357e8210c2a1c96ea768b16fd0c003baef77a04)

集成到代码中并完美运行非常简单。

现在，我的问题是，如果我在我的应用程序中使用它并发布应用程序，那么 Apple 会不会有任何问题，他们可以基于此拒绝我的应用程序吗？

我相信很多人一定用过这个库，所以请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:18:44.977

如果您没有违反任何苹果指南，那么您的应用就没有机会被拒绝。但是您还应该阅读第三方代码的许可协议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:17:06.730

我相信您的代码没有这样的原因被拒绝，只是因为您使用的是开源库。

是的，如果您违反许可条件，以后可能会被“图书馆所有者”起诉。

# android - android onclick 动作，用于从布局中动态添加的 Imagebutton

> ID：11135974
> 
> 赞同：0
> 
> 时间：2012-06-21T10:11:59.820
> 
> 标签：android, android-inflate

我根据每次变化的特定数组大小动态添加布局，如下所示：

```
 for(int i = 0; i < topps.size(); i++)
    {
        lr1 = new LinearLayout(Main.this);
        lr1.setOrientation(LinearLayout.VERTICAL);
        scrool.addView(lr1);

        final View child = getLayoutInflater().inflate(R.layout.tops_data, null);
        red   = (TextView)child.findViewById(R.id.topp_detail_red_txt);
        black = (TextView)child.findViewById(R.id.topp_detail_black_txt);

        use = (ImageButton)child.findViewById(R.id.imageButton2);
        use.setOnClickListener(new View.OnClickListener() 
        {   
        @Override
        public void onClick(View v) 
        {
               if(bgh == false)
           {
Toast.makeText(this, "btn1 is "+child.getId(), Toast.LENGTH_SHORT).show();
            use.setBackgroundResource(R.drawable.tick_unsel);
           }
           else if(bgh == true)
           {
Toast.makeText(this, "btn1 is "+child.getId(), Toast.LENGTH_SHORT).show();
                    use.setBackgroundResource(R.drawable.tick_select);
               }
        }
         });
         lr1.addView(child);
         child.setId(main_cnt);
         use.setId(main_cnt); 
```

在上面的代码中，一切正常，视图数量根据数组大小列出，我正在获取每个视图的按钮 ID。

按钮图像未根据条件更改，但 toast 打印正确。例如 ：

如果我有 5 个视图，当我单击第 3 个视图的按钮时，toast 正确显示为 setId，但图像仅在第 5 个视图中更改。

如何在每个视图中正确更改图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:15:50.490

应该试试 ............

```
v.setImageResource(R.drawable.tick_select); 
```

或者

`v.setBackgroundResource(R.drawable.tick_select);`

代替

```
use.setBackgroundResource(R.drawable.tick_select); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:28:47.737

您需要在每次迭代时创建 ImageButton 的新实例。

替换：使用 = (ImageButton)child.findViewById(R.id.imageButton2);

By : ImageButton 使用 = (ImageButton)child.findViewById(R.id.imageButton2);

# java - 保存在已编辑文件夹中时如何编辑图像

> ID：11135981
> 
> 赞同：1
> 
> 时间：2012-06-21T10:12:28.243
> 
> 标签：java, android

我花了最后一天左右的时间试图自己做这件事，但没有任何运气。

我想知道是否是我的特定设备（galaxy nexus - 已编辑的图像保存在 /mnt/sdcard/Edited 中）导致有关此主题的有限建议无法按预期工作。

我的问题是，当我开始打算使用第三方应用程序（照相馆）编辑图像时，我可以编辑图像，但从未真正将其取回。

无论我尝试什么调用代码，我都不会收到对 onActivityResponse 的回调（我已经浏览了每个包含 ACTION_EDIT 的谷歌结果，看看其他人是如何做到的），

所以没有回应意味着我不得不尝试另一种方式 - 根据某处的帖子，我发现如果您在清单中指定一些类别和数据标签，我发现编辑后的图像应该保存在您发送到应用程序的图像上，我实施并花费了一些几个小时但无济于事 - 当调用 onResume 时，我发送的图像始终是相同的图像。

所以我一直在尝试另一种方法，监听文件系统的变化使用..

```
getContentResolver().registerContentObserver(Media.EXTERNAL_CONTENT_URI, true, myObserver); 
```

我得到了各种各样的结果 - 当图像被编辑和保存时，我的 onChanged 方法被调用，我可以接收一个 id 但我永远无法构建正确的 uri 来获取文件路径

```
 String columns[] = new String[]{ Media._ID, Media.DATA, Media.DISPLAY_NAME,      Media.MIME_TYPE, Media.SIZE, Media.MINI_THUMB_MAGIC };

  Uri image     = ContentUris.withAppendedId(Media.EXTERNAL_CONTENT_URI, latestId);

  Cursor cursor = application.managedQuery(image, columns, null, null, null); 
```

但是，我总是在 while 循环中使用上面的代码行得到一个 NULLPOINTEREXCEPTION（这是基于某种与 AlbumUploader 相关的善意的）。

我希望有人可以告诉我我哪里出错了，或者解决方法来为这种情况获取正确的文件路径。

问候，感谢阅读。

# regex - mod_rewrite 禁止 url，除了 .htaccess 中的某些情况

> ID：11135988
> 
> 赞同：0
> 
> 时间：2012-06-21T10:13:23.500
> 
> 标签：regex, .htaccess, mod-rewrite

我正在尝试重写一个 url，以便 /admin 的所有请求都得到 404，除了 admin/special_page 和 admin/another_special_page 等。

我想我需要一些正则表达式魔法来帮助，但我不确定？！

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:37:02.277

请尝试将其写入您的 .htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} /admin
RewriteCond %{REQUEST_URI} !/admin/special_page
RewriteCond %{REQUEST_URI} !/admin/another_special_page
RewriteRule ^ - [R=404,L] 
```

第一个 RewriteCond 阻止对“admin”文件夹的每个请求，其他两个条件排除两个特殊页面。RewriteRule 不会更改 URL，但会创建 404 错误

# testing - 从桌面应用程序等待来自 Metro 应用程序的事件，反之亦然

> ID：11135994
> 
> 赞同：0
> 
> 时间：2012-06-21T10:13:42.563
> 
> 标签：testing, windows-8, windows-runtime, microsoft-metro

我们有一个 Metro 应用程序，我们想测试由于异步进行的多项操作而可能在应用程序中出现的某些问题。所以基本上我们的计划是有一个测试应用程序（最好是桌面应用程序），它可以等待从 Metro 应用程序内部生成的某些事件。我们也希望这是双向的，即我们的桌面测试应用程序也会生成某些事件，Metro应用程序将等待（我们将在 Metro 应用程序代码中注入该部分）。这样我们希望生成更多场景。问题显然是在正常情况下，metro 应用程序中生成的事件对应用程序容器之外的其他应用程序不可见。所以有没有办法通过清单文件中的一些编辑来启用事件。PS：我们只需要这个框架来进行测试，所以目前我们并不担心被标记，因为代码不会随 IPC 框架一起提供。只要我们能够跨进程等待事件就可以了。（尽管我们的目标是尽量减少对应用程序代码原始工作的干扰）

编辑：此外，如果我们不使用事件，我们可以使用 RPC 或任何其他使我们能够等待的通信形式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:54:29.340

这是明确禁用的。同步的唯一方法是通过云（后端服务）或文件系统。