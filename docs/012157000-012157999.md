# StackOverflow 问答 12157000-12157999

# symfony - Symfony2 /将查询结果类型转换为simpeler对象

> ID：12157004
> 
> 赞同：0
> 
> 时间：2012-08-28T10:06:10.953
> 
> 标签：symfony, tree, doctrine-orm

我正在使用 Stof 的 DoctrineExtension 包来检索我的树，现在我想将该树转换为一个数组（然后将其转换为 json）。

尽管 NestedTreeRepository->childrenHierarchy() 的格式不正确，但我想修改输出，因此只返回节点“title”属性和“id”属性，并将所有子节点放入“children”子数组中. 符合此格式 (JSON)：

```
{
        label: 'node1',
        children: [
            { label: 'child1' },
            { label: 'child2' }
        ]
    },
    {
        label: 'node2',
        children: [
            { label: 'child3' }
        ]
    }
} 
```

我尝试遵循代码，这与 childrenHierarchy() 返回相同，但允许我修改查询。

```
 $query = $em
            ->createQueryBuilder()
            ->select('node')
            ->from('MyBundle:Page', 'node')
            ->orderBy('node.root, node.lft', 'ASC')
            ->getQuery()
    ;
    $nodes = $query->getArrayResult();

    [Do magic here]

    $tree = $pagerepo->buildTree($nodes); 
```

是否可以将每个节点类型转换为仅包含以下属性的更简单的对象：

*   ID
*   标题
*   其他一些用于定位的整数

如果我然后通过 json_encode() 运行它，我将拥有我需要的东西。

当然欢迎任何其他解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:08:29.803

我会使用[Stofs Repository 函数](http://www.gediminasm.org/article/tree-nestedset-behavior-extension-for-doctrine-2)来获取分层数组中的节点：

```
$repo = $em->getRepository('MyBundle:Page');
$arrayTree = $repo->childrenHierarchy(); 
```

而且我认为除了手动修改该数组之外没有其他解决方案。删除一些不需要的属性后，您可以对数组进行 json_encode 并返回它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:01:15.830

我为此目的的代码（几个小时前刚做的）它是 stof 的 buildTreeArray 函数的翻版

在控制器中（我正在为 symfony2 写这个）：

```
function gettreeAction {
    $query = .... // do your query
    $tree = $this->buildTree($query->getArrayResult());
    $response = new Response(json_encode($tree));
    return $response;
}

private function buildTree($nodes) 
{
    $nestedTree = array();
    $l = 0;

    if (count($nodes) > 0) {
        // Node Stack. Used to help building the hierarchy
        $stack = array();
        foreach ($nodes as $child) {
            $item = array();
            $item['name'] = $child['title'];
            $item['id'] = 'page_'.$child['id'];
            $item['level'] = $child['level'];
            $item['children'] = array();
            // Number of stack items
            $l = count($stack);
            // Check if we're dealing with different levels
            while($l > 0 && $stack[$l - 1]['level'] >= $item['level']) {
                array_pop($stack);
                $l--;
            }
            // Stack is empty (we are inspecting the root)
            if ($l == 0) {
                // Assigning the root child
                $i = count($nestedTree);
                $nestedTree[$i] = $item;
                $stack[] = &$nestedTree[$i];
            } else {
                // Add child to parent
                $i = count($stack[$l - 1]['children']);
                $stack[$l - 1]['children'][$i] = $item;
                $stack[] = &$stack[$l - 1]['children'][$i];
            }
        }
    }
    return $nestedTree;
} 
```

与 jqTree 完美配合...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T18:56:32.997

我已经解决了它如下：

```
public function getPageTreeAction() {

    $pagerepo = $this->getDoctrine()->getRepository('MyBundle:Page');
    $em = $this->getDoctrine()->getEntityManager();
    $query = $em
            ->createQueryBuilder()
            ->select('node')
            ->from('MyCorpBundle:Page', 'node')
            ->orderBy('node.root, node.lft', 'ASC')
            ->getQuery();

    $flatnodearray = $query->getArrayResult();
    $flatsimplenodearray = array();

    foreach ($flatnodearray as $currentNode) {
        $currentSimpleNode = array();

        $currentSimpleNode['id'] = $currentNode['id'];
        $currentSimpleNode['lft'] =$currentNode['lft'];
        $currentSimpleNode['rgt'] = $currentNode['rgt'];
        $currentSimpleNode['lvl'] = $currentNode['lvl'];
        $currentSimpleNode['title'] = $currentNode['title'];

        $flatsimplenodearray[] = $currentSimpleNode;
    }

    $tree = $pagerepo->buildTree($flatsimplenodearray);
    $response = new Response(json_encode($tree));
    $response->headers->set('Content-Type', 'application/json');

    return $response;
} 
```

# javascript - 有条件地用锚标记替换 https Javascript

> ID：12157006
> 
> 赞同：0
> 
> 时间：2012-08-28T10:06:15.357
> 
> 标签：javascript, jquery, regex

我正在使用下面的 javascript 代码将我的内容数据（http、https）替换为带有 class="disableUrl" rel="nofollow" 的锚标记

我的代码是

```
 content.replace(/\n/g,"<br>")
  #URLs starting with http://, https://, or ftp://
  replacePattern = /(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim
  replacedText = content.replace(replacePattern, "<a class='disableUrl' rel='nofollow'>$1</a>") 
```

我的示例内容是

```
This is the about google http://www.google.com sample. This sample data has images too 
<img src="https://assets/mkmmmm"/> 
```

在上面的内容`http://www.google.com`被转换为

```
<a href="http://www.google.com" class="disableUrl" rel="nofollow">http://www.google.com</a> 
```

它也在图像标签的 src 中为 https 生成锚标签。喜欢

`<img src="https://assets/mmm/>``<img src="<a class='disableUrl' rel='nofollow'>https://assets/mmm</a>" />` 我怎么能避免这种情况 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:51:37.240

你标记了 jQuery，所以：

```
$('a').addClass('disableUrl').attr('rel', 'nofollow'); 
```

# java - Guava CacheBuilder Cache RemovalListener onRemoval 不会每次都被调用，尽管条目被删除

> ID：12157014
> 
> 赞同：7
> 
> 时间：2012-08-28T10:06:45.417
> 
> 标签：java, guava

如果未写入密钥，我已经创建了一个基于 Guava CacheBuilder 的缓存，其有效期为 5 秒。添加了一个removingListener 来打印被移除的键/值对。我观察到的是侦听器的 onRemoval 方法仅在第一次被调用。第二次删除条目时不会调用它。（实际的删除发生了。只是没有调用removingListener 的onRemoval 方法）。

难道我做错了什么？有人可以帮忙吗？提前致谢。这是我的代码：

```
import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.TimeUnit;

import com.google.common.cache.Cache;
import com.google.common.cache.CacheBuilder;
import com.google.common.cache.RemovalListener;
import com.google.common.cache.RemovalNotification;

public class TestCacheBuilder {

  public static void main(String[] args) {
    try {
      new TestCacheBuilder();
    }catch (Exception e){      
     e.printStackTrace(); 
    }
  }

  public TestCacheBuilder() {

    Cache<String, String> myCache = CacheBuilder.newBuilder()
        .expireAfterWrite(5, TimeUnit.SECONDS)
        .removalListener(new RemovalListener<String, String>() {
          public void onRemoval(RemovalNotification<String, String> removal) {
            System.out.println("removal: "+removal.getKey()+"/"+removal.getValue());
          }          
        })
        .build();

    Map<String, String> inMap = myCache.asMap();

    inMap.put("MyKey", "FirstValue");

    System.out.println("Initial Insert: "+inMap);

    //Wait 16 seconds

    try {
      Thread.sleep(4000);
    } catch(InterruptedException ex) {
        Thread.currentThread().interrupt();
    }

    System.out.println("After 4 seconds: " + inMap);

    inMap.put("MyKey", "SecondValue");

    try {
      Thread.sleep(1000);
    } catch(InterruptedException ex) {
        Thread.currentThread().interrupt();
    }

    System.out.println("After 1 more second: " + inMap);

    try {
      Thread.sleep(4000);
    } catch(InterruptedException ex) {
        Thread.currentThread().interrupt();
    }

    System.out.println("After 4 more seconds: " + inMap);

  }

} 
```

输出如下：

```
Initial Insert: {MyKey=FirstValue}
After 4 seconds: {MyKey=FirstValue}
removal: MyKey/FirstValue
After 1 more second: {MyKey=SecondValue}
After 4 more seconds: {} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T10:48:07.213

删除实际上并不直接发生：Guava 没有自己的清理线程来删除过期条目。删除通常发生在缓存的同一段中有写入时，或者在经过一定时间后的读取期间（以摊销删除成本）。但是，虽然条目仍然存在，但它被视为已过期，这就是它没有被打印的原因。

引用[CacheBuilder 的 javadoc](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/cache/CacheBuilder.html)：

> 如果 expireAfterWrite 或 expireAfterAccess 被请求，条目可能会在每次缓存修改、偶尔缓存访问或调用 Cache.cleanUp() 时被驱逐。过期的条目可能会被计入 Cache.size()，但永远不会对读取或写入操作可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-11T08:21:14.563

作为 Guava 的替代品，`Cache`您可以使用[Caffeine](https://github.com/ben-manes/caffeine)，*“基于 Java 8 的高性能、近乎最佳的缓存库”*。

它具有*“受 Google Guava 启发的 API”*并定期执行驱逐，因此它可能更适合您的用例（如果您担心内存不会被半自动释放）。请参阅[驱逐维基页面](https://github.com/ben-manes/caffeine/wiki/Eviction)：

> 在写入期间和偶尔在读取期间通过定期维护执行过期。到期事件的调度和触发在分摊的 O(1) 时间内执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T03:27:03.360

> 如果`expireAfterWrite`或被`expireAfterAccess`请求，条目可能会在每次缓存修改、偶尔缓存访问或调用`Cache.cleanUp()`. 过期的条目可能会被计入`Cache.size()`，但永远不会对读取或写入操作可见。

从长远来看，这最终会吃掉所有堆内存或导致其他未使用任何缓存的模块的内存不足。

# javascript - 使用 java 脚本关闭 iframe

> ID：12157021
> 
> 赞同：0
> 
> 时间：2012-08-28T10:07:00.387
> 
> 标签：javascript, jquery, iframe

我如何关闭`iframe`使用`javascript`。我找到了一些方法来使用

`window.parent.close();`

但是这种方法关闭了整个选项卡。但我需要的只是关闭`iframe`。任何人都有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:10:46.797

iframe 不是窗口，它不能关闭。您可以使用[隐藏](http://api.jquery.com/hide/)它

```
$(theIFrame).hide(); 
```

或者如果您不再使用它，请将其[删除：](http://api.jquery.com/remove/)

```
$(theIFrame).remove(); 
```

* * *

如果要在 iframe 文档**内**的脚本中隐藏或删除 iframe，则必须先获取相关元素。你可以这样做 ：

```
 var iframe = $(parent.document).find('iframe').filter(function() {
        return this.src==location.href;
    });
    iframe.remove(); 
```

如果您不从 iframe 执行此操作，则**应该**有某种参考。或者你可以不分青红皂白地这样做

```
$('iframe').remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:11:31.827

您无法关闭 iframe。

你必须删除节点`elem.removeChild(elem_iframe)`

# database - 分片对性能有何影响？

> ID：12157026
> 
> 赞同：3
> 
> 时间：2012-08-28T10:07:13.547
> 
> 标签：database, performance, join, sharding

我是分片的新手，想知道分片对各种查询有什么影响。对于名为“people”的样本数据集：

```
person_id | person_fname | person_lname | person_dob
----------------------------------------------------
1         | John         | Smith        | 1972-03-04
2         | Sally        | Jones        | 1968-09-14
3         | Phil         | Forrester    | 1976-11-25
4         | Gwen         | Langley      | 1955-04-20
5         | Pedro        | Romero       | 1962-12-21
6         | Gene         | Halford      | 1978-01-11
7         | Juan         | Peza         | 1977-08-07
8         | Pierre       | Henry        | 1980-04-30 
```

通过创建代理身份“id”的散列，数据在四个节点上平均分片。但是，您需要对可能跨越所有节点的记录执行读写操作，例如：

```
SELECT person_fname, 
       person_lname 
FROM   people 
WHERE  person_dob > '1970-01-01' 
```

或者说您有另一个“订单”表，它在“person_id”列上引用“人员”，并且想要执行连接......

```
SELECT    order_id,
          order_amount,
          order_date,
          person_fname,
          person_lname
FROM      orders
LEFT JOIN people
WHERE     order_amount > 50 
```

是否实际上所有节点都将并行运行查询？我假设每台服务器的每个步骤都要做更少的工作，而不是一个实例对八个记录运行查询，同时，四个实例将对两个（ish）记录运行查询，如果 DBMS能够执行分片选择，那么其他节点不需要继续执行任何进一步的指令，这个假设是否正确？

分片和复杂连接是否有任何已知的性能影响（除了这个简单的例子）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:33:35.900

它确实允许并行完成。

如果它们必须跨越不同的分片，它确实会使连接变得复杂，因此速度更慢。

但是，在多对一的情况下，如果您以例如表中的`orders`所有行与`orders`表中相关行位于同一分片中的方式进行分`people`片，则不会发生这种跨分片问题。

你需要设计你的分片方法，这样你就会得到很多这样的情况，而很少（理想情况下没有）你最终会跨越分片。

您还希望将分片放在您实际寻找最多的键上。例如。如果您通过用户名查找人作为其他一切的起点，那么您希望通过用户名而不是 id 进行分片，因为当您找到他们时，您已经知道要命中哪个单个分片，而不是仅仅为了从大多数人那里取回零行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:38:22.957

是的，分片会带来性能上的严重变化。它*绝不*允许应用程序保持不变。

最明智的分片方式是数据模型是否允许将数据分区为真正独立的。就像在租户根本不交互的多租户情况下一样。在这种情况下，连接永远不会跨越分区，一切都很好。

当使用跨分区交互进行分片时，这会变得非常非常讨厌。编写针对所有分片运行的查询的成本与分区数量呈线性关系。这意味着您可以通过添加节点来获得零加速。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T17:56:54.710

免责声明：我为[ScaleBase](http://www.scalebase.com/)工作，这是一个完整的横向扩展解决方案的制造商，如果你愿意，它是一个“自动分片机”，看起来和感觉就像 1 MySQL，代理到“分片”网格，自动化命令路由和并行化跨数据库查询和合并结果 - 您不会看到与来自 1 DB 的结果有什么不同。支持 ORDER、GROUP、LIMIT、agg 函数！根据命令和参数，路由和并行化在“控制器”内部完成。

从我们客户的经验来看，我们不仅通过并行查询获得了巨大的性能改进，我们还改进了维护，考虑创建索引，向表中添加列 - 这些也是并行化的并且运行速度更快。所有这些都没有或几乎没有对代码进行任何更改。

您的查询示例是“all-db”执行的经典示例，如果分布式和并行化，它们肯定会运行得更快。索引更有效，使用 RAM 等等......

希望我有所帮助。

# algorithm - 带 32 位内存的长除法

> ID：12157033
> 
> 赞同：2
> 
> 时间：2012-08-28T10:07:26.850
> 
> 标签：algorithm, memory, long-integer

我目前正在研究一个将 C 转换为 VHDL 的框架，并且我陷入了长除法的实现。事实上，我的框架只能处理 32 位变量，因此解析 C long long 变量将产生 2 个 VHDL 变量，一个包含最重要的部分，一个包含最不重要的部分。所以总结一下，从这里：

```
long long a = 1LL; 
```

将生成的 VHDL 将类似于：

```
var30 <= 00000000000000000000000000000000;
var31 <= 00000000000000000000000000000001; 
```

现在我的问题是：我如何划分 2 个 long long 参数（在 VHDL 中），因为它们被分成 2 个变量？我对加法/减法没有问题，因为我可以独立处理最重要的部分（分别是最小的部分）（只是传播的进位），但我真的不知道如何执行除法，因为有了这个一种操作，最小和最重要的部分真的绑定在一起......如果有人有想法，将不胜感激

PS：乘法我有同样的问题

编辑：我都处理有符号/无符号变量，结果应该是一个 64 位变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:25:03.617

对于乘法和除法问题，您可以将问题分解如下：考虑每个 64 位值，x 可以表示为`k*x.hi+x.lo`其中 x.hi 是高 32 位，x.lo 是低 32 位，k = 2^32。所以对于乘法：

```
a*b = (a.hi*k+a.lo)*(b.hi*k+b.lo)
    = a.hi*b.hi*k*k + (a.hi*b.lo + a.lo*b.hi)*k + a.lo*b.lo 
```

如果你只想要一个 64 位的结果，那么第一项就会消失，你会得到：

```
a*b = (a.hi*b.lo + a.lo*b.hi)*k + a.lo*b.lo 
```

请记住，通常乘法会使位数加倍，因此上述表达式中的每个 32 位 x 32 位乘法将生成一个 64 位项。在某些情况下，您只需要低 32 位（上述表达式中的前两项），但对于最后一项，您需要低 32 位和高 32 位。

# asp.net - 如何将网格中的所有行一次插入 SQL Server 2005 数据库？

> ID：12157037
> 
> 赞同：1
> 
> 时间：2012-08-28T10:07:36.210
> 
> 标签：asp.net, sql-server-2005

我需要一次将gridview 中的所有行插入到SQL Server 2005 数据库中。

行数可以是1到n（不超过200）

我调查了以下选项：

*   循环：我想避免迭代。
*   表数据类型：仅在 SQL Server 2008 及更高版本中可用
*   批量复制：在批量数据的情况下很有用。我不确定我是否可以使用它插入更少的行（性能方面）

我还能用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:14:16.580

尝试使用与循环/游标相反的基于集合的方法。大量数据时，循环和游标的效率会降低，但对于相对较小的数据量来说应该没问题。

[http://www.codeproject.com/Articles/34142/Understanding-Set-based-and-Procedural-approaches](http://www.codeproject.com/Articles/34142/Understanding-Set-based-and-Procedural-approaches)

该链接应该让您对如何使用基于集合的方法有所了解。

希望这就是你要找的！

# python - 尝试以 [[hh:]mm:]ss 格式理解和修改时间的正则表达式规则，从右到左匹配

> ID：12157042
> 
> 赞同：0
> 
> 时间：2012-08-28T10:07:56.633
> 
> 标签：python, regex

我试图理解以下正则表达式规则：

```
import re

time_format = r"(?:(?P<weeks>\d+)\W*(?:weeks?|w),?)?\W*(?:(?P<days>\d+)\W*(?:days?|d),?)?\W*(?:(?P<hours>\d+):(?P<minutes>\d+)(?::(?P<seconds>\d+)(?:\.(?P<microseconds>\d+))?)?)?"
time_matcher = re.compile(time_format)
time_matches = time_matcher.match(td_str) 
```

使用此规则，如果我设置，`td_str = '0:10'`我会得到以下结果：

```
{'days': None,
 'hours': '0',
 'microseconds': None,
 'minutes': '01',
 'seconds': None,
 'weeks': None} 
```

如果我设置`td_str = '0:0:10'`，我会得到以下结果：

```
{'days': None,
 'hours': '0',
 'microseconds': None,
 'minutes': '0',
 'seconds': '01',
 'weeks': None} 
```

我如何更改正则表达式规则，以便`0:10`将其解释为 0 分钟 + 10 秒？此外，“1:20:1”应解释为 1 小时 + 20 分钟 + 1 秒。

所以我想要创建的正则表达式规则（据我了解正则表达式）是：`[H:[M:]]S`

**EDIT1**：我相信我已经为以下内容构建了正确的规则`[M:]S`：

```
time_format = r"((?P<minutes>\d+)?:?)(?P<seconds>\d+)" 
```

任何人都可以确认这是正确的做法吗？

**EDIT2**：扩展Edit1中显示的规则，以下确实有效（有时）：

```
time_format = r"((((?P<hours>\d+)?:?)(?P<minutes>\d+))?:?)(?P<seconds>\d+)" 
```

但是，如果我说`time='1:10'`，那么这个 get 会错误地转换为 1 小时 1 分 0 秒，而不是 1 分 10 秒。

**EDIT3**：这就是我现在解决问题的方法，而不是使用正则表达式。我仍然很想知道如何使用正则表达式来完成同样的任务。

```
# defaults
days = 0
hours = 0
minutes = 0
seconds = 0
microseconds = 0

split_fields = time_string.split(':')
nbr_fields = len(split_fields)

if nbr_fields == 0: # should never happen
    pass
if nbr_fields == 1:
    seconds = int(split_fields[0])
elif nbr_fields == 2:
    minutes = int(split_fields[0])
    seconds = int(split_fields[1])
elif nbr_fields == 3:
    hours = int(split_fields[0])
    minutes = int(split_fields[1])
    seconds = int(split_fields[2])
else: # in case there's more than 3 fields ...
    hours = int(split_fields[-3])
    minutes = int(split_fields[-2])
    seconds = int(split_fields[-1]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:14:09.150

正则表达式匹配秒的部分是可选的，因此可以按照您指定的以下`?`字符进行匹配。这同样适用于微秒字段。

只取`H:M[:S.[USEC]]`正则表达式的一部分会产生如下内容：

```
(?P<hours>\d+):(?P<minutes>\d+)(?::(?P<seconds>\d+)(\.(?P<microseconds>\d+))?)? 
```

并不总是需要使用正则表达式来进行这种匹配。有时更容易编写自己的解析器来拆分元素，例如使用`string.split(':')`. 稍后回来阅读代码可能会更容易理解。

（我刚刚注意到您在秒和微秒之间有一个冒号。上面列出的正则表达式必须更改以说明这一点。列出的正则表达式将匹配 01:02:03.456。

**编辑：**

可以将您的正则表达式构建为`(S)|(M:S)|(H:M:S)`，但这不适用于命名组，因为组名不能出现多次。问题是您希望引擎向前看并首先匹配最右边的令牌，然后再匹配左侧的令牌。字符串将从左到右扫描以查找匹配项，因此无法以明确的方式描述字段，至少在使用命名组时不会。

另一个不涉及命名组的解决方案是使用更通用的表达式，例如`(\d+)(:\d+)?(:\d+)?`然后查看返回的非 None 组以确定它们的含义。如果有 1 组，则只有 S，如果有 2，则 M:S 等。

# android - 我可以使用 NFC 标签做更多的事情，而不仅仅是启动我的应用程序吗？

> ID：12157046
> 
> 赞同：0
> 
> 时间：2012-08-28T10:08:01.760
> 
> 标签：android, ios, nfc

我希望 NFC 标签数据在我的应用程序上提示一些代码。这可能吗？我在哪里可以阅读更多相关信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:15:46.050

是的，你可以用 NFC 做很多事情。

您可以先阅读[NFC 包的文档和](https://developer.android.com/reference/android/nfc/package-summary.html)NFC[指南](https://developer.android.com/guide/topics/connectivity/nfc/index.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:09:55.933

是的。NDEF 消息（主要用于 Android NFC 的格式）由记录列表组成，所有记录都可以包含不同类型的有效负载。因此，Android 应用程序记录可以启动您的应用程序，并且（例如）外部类型记录或 Mime 记录可以包含信息，然后您的应用程序会读取这些信息并采取行动。

我为您可能感兴趣的入门级开发人员创建了一个[NFC Eclipse 插件。它包括一个](http://code.google.com/p/nfc-eclipse-plugin/)[Android 样板项目](http://nfc-eclipse-plugin.googlecode.com/files/Android%20NFC%201.2.zip)。

# ios - 横向 xib 显示为纵向

> ID：12157049
> 
> 赞同：10
> 
> 时间：2012-08-28T10:08:10.597
> 
> 标签：ios, rotation

我有一个视图控制器和用于纵向和横向的单独 nib 文件。在旋转时，我加载相应的笔尖。方法

```
 shouldAutorotateToInterfaceOrientation and willRotateToInterfaceOrientation 
```

被调用并且笔尖确实改变了。

问题：

```
the landscape nib does not appear as landscape, but portrait! The status bar is
correctly rotated and appears on the top:
(Sorry, couldn't paste the image, because my account is new. The screenshot is in   
landscape, with a landscape status bar, but a landscape view shown as portrait.) 
```

有人会认为问题在于没有将方向设置为 IB Simulated 视图中的横向指标，但我已经这样做了，并且视图在 IB 中显示为横向。（如果视图是纵向的，我认为甚至不可能创建这样的旋转按钮。）除了这两个 nib 之外，我还有一个**mainwindow.xib**，其中包含应用程序委托、窗口和视图控制器对象。

编辑：我意识到视图实际上是在旋转，当它们应该“保持不变”时。就像有一个额外的转变。当我将手机向右旋转 90° 时，横向 xib 显示为向右旋转 90°。当我将手机再向右旋转 90° 时，纵向 xib 会倒置显示。状态栏始终正确显示在顶部。

EDIT2：使用

```
self.view.transform = CGAffineTransformMakeRotation((M_PI * (90) / 180.0)); 
```

在 willRotateToInterfaceOrientation 中，我可以将视图旋转到左侧横向（以及我想要的任何方向），因此我可以将其用作解决方法。但是，我有其他项目，其中视图自动旋转并且不需要使用 CGAffineTransformMakeRotation。好像有什么东西阻止了这里的自动旋转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T05:42:35.173

我做了与此类似的事情，而不是单独制作一个 nib 文件，我只是将两个子视图添加到主 nib 作为 prtraitView 和 Landscape View

并按如下方式切换它们

在 viewDidAppear 方法中

```
-(void)viewDidAppear:(BOOL)animated{

    if(UIDeviceOrientationIsPortrait(self.interfaceOrientation))
    {
        self.portraitVIew.frame=self.view.bounds;
        self.portraitVIew.frame=self.view.frame;
        [self.view addSubview:self.portraitVIew];
    }else{
        self.landscapeView.frame=self.view.frame;
        [self.view addSubview:self.landscapeView];
    }
    self.view.autoresizesSubviews = YES;

    [[NSNotificationCenter defaultCenter]
     addObserver:self
     selector:@selector(deviceOrientationDidChangeNotification:)
     name:UIDeviceOrientationDidChangeNotification
     object:nil];

} 
```

然后实现 deviceOrientationDidChangeNotification 如下

```
- (void)deviceOrientationDidChangeNotification:(NSNotification*)note
{

    if ([[UIDevice currentDevice] userInterfaceIdiom]==UIUserInterfaceIdiomPad) {

    }else{
        UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
        if(UIDeviceOrientationIsLandscape(self.interfaceOrientation))
        {
            self.landscapeView.hidden=NO;
            self.landscapeView.frame=self.view.frame;
            [self.portraitVIew removeFromSuperview];

            [self.view addSubview:self.landscapeView];
        }else {
            self.landscapeView.hidden=YES;
            self.portraitVIew.frame=self.view.frame;
            NSLog(@"Portrait");

            [self.view addSubview:self.portraitVIew];
        }
    }

} 
```

它对我来说非常有效..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:36:50.197

您是否`view`将从 nib 加载的内容添加为子视图？如果只有状态栏在旋转，则表示您**之前**的视图在释放视图并添加新视图时挂起。您能告诉您如何将加载的视图添加`xib`到 SuperView。

确保在加载另一个视图时正确释放**前一个**`NSLOG`视图，放入视图的释放并检查视图是否完全释放。

# silverlight - Silverlight 和 XAML 中的可重用屏幕

> ID：12157051
> 
> 赞同：1
> 
> 时间：2012-08-28T10:08:27.740
> 
> 标签：silverlight, xaml, inheritance, silverlight-5.0

在我们的项目中，我们必须为核心表上的 CRUD 操作定义 15 个屏幕。

我只想用列表、导航和 UI 标记定义 1 个屏幕，并希望为每个 CRUD 表重新使用这些屏幕。

实现这一目标的最佳方法是什么？

我尝试了继承，但遇到了不允许继承的 XAML（我在互联网/博客上检查了几种方法，但没有得到好的结果）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:06:10.050

解决这个问题的最好方法是使用样式、用户控件和可能的模板来最大限度地重复使用。

避免必须定义所有这些 UI 的唯一方法是生成它们（设计时或运行时）。

Lightswitch 是一个可以为你做（本来可以做）这个的生成器。

您还可以创建自己的 UI 框架，该框架基于元数据创建 UI，但这可能成本太高。

# html - 内容滑块：表格、列表等的有效用法

> ID：12157057
> 
> 赞同：0
> 
> 时间：2012-08-28T10:08:52.047
> 
> 标签：html, css, accessibility, markup, carousel

内容滑块，如[bxslider](http://bxslider.com/)或 Bootstrap 的[轮播](http://twitter.github.com/bootstrap/javascript.html#carousel)，使用`div`s 来定义*幻灯片*。这对于图像和许多其他元素非常有用，但对于列表或表格（可能更多）之类的东西没有多大意义。

* * *

### 列出示例 #1：

```
<div><!--slider container-->
    <ul>
        <div class="active"><!--currently shown slide-->
            <li>Blah</li>
            <li>Blah</li>
            <li>Blah</li>
        </div>
        <div><!--another slide-->
            <li>Blah</li>
            <li>Blah</li>
        </div>
    </ul>
 </div> 
```

这是无效的。

* * *

### 列表示例 #2：

```
<div><!--slider container-->
    <div class="active"><!--currently shown slide-->
         <ul>
            <li>Blah</li>
            <li>Blah</li>
            <li>Blah</li>
         </ul>
    </div>
    <div><!--another slide-->
         <ul>
            <li>Blah</li>
            <li>Blah</li>
         </ul>
    </div>
 </div> 
```

这是有效的，但没有意义，从可访问性的角度来看很差，等等。

* * *

## 是否有在多张幻灯片上展开表格、列表等的正确方法？

## 有没有办法使用表格/列表的有效标记创建内容滑块？*

* * *

也许 HTML5 带来了一些可以帮助的东西（但我对此表示怀疑）。

* CSS标签的原因

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-28T10:21:30.013

使用`<section>`-stuff：

```
<div><!--slider container-->
    <section><!--currently shown slide-->
        <p>Blah, blah, blah!</p>
    </section>
    <section><!--another slide-->
         <p>Blah, blah, blah!</p>
    </section>
    </div> 
```

A`<ul>`很好，因为信息是一个列表。你会滑动列表吗？我无法想象更多你用几句话展示图像。那么，就`<p>`.

# sql - NULL 值表示

> ID：12157061
> 
> 赞同：1
> 
> 时间：2012-08-28T10:09:12.037
> 
> 标签：sql

有人能告诉我`NULL`值在数据库中是如何表示的吗？我假设大多数数据库必须对值使用相同的表示形式。`NULL`如果不是这样，你能告诉我至少一个实现吗？

我用谷歌搜索了这个，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:22:36.923

> 我假设大多数数据库必须对 NULL 值使用相同的表示。

我不会假设这一点，因为数据库人员对如何使布局（以及其他所有内容）尽可能高效进行了很多思考。他们中的一个很有可能对其他人产生不同的看法。

我知道 SQLServer 和 PostgreSQL 每行都使用一个空位图。我知道它在 PostgreSQL 中是可选的 - 如果没有可为空的字段，则完全跳过，并且不知道 SQLServer 是否属于这种情况。

因此，例如，第 3 和第 9 字段为空的 10 列行可能具有`0000000100000100`=的位图条目`0x0103`。或者可能是相反的 ( `0010000010000000`= `0x2080`) ，我真的不知道。

不过，我不会认为任何其他数据库都是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:15:53.187

为什么你需要“NULL”？最好不要使用它，因为查询可能会搞砸。

你试过这个吗？ [http://databases.about.com/cs/sql/a/aa042803a.htm](http://databases.about.com/cs/sql/a/aa042803a.htm)

# windows-8 - 赢得 8 RP 赢得 8 rtm

> ID：12157066
> 
> 赞同：0
> 
> 时间：2012-08-28T10:09:28.880
> 
> 标签：windows-8, windows-runtime, visual-studio-2012

我正在使用 Win8 RP 和 Visual Studio Express 2012 开发 WinRT 应用程序。Win 8 RTM 可用，只需安装 Win 8 sdk，我就可以在我的 win 8 RP 上测试 winRT 应用程序，还是需要将我的操作系统升级到 RTM。我的意思是，从开发人员的角度来看，RTM sdk 中是否有可用的新 API 或任何新功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T10:19:15.113

RTM 工具（SDK、Visual Studio 等）需要 RTM 版本的 Windows 8。

# linux - Beaglebone Angstrom：如何启用只读根文件系统

> ID：12157067
> 
> 赞同：0
> 
> 时间：2012-08-28T10:09:27.970
> 
> 标签：linux, filesystems, angstrom-linux

我正在使用 Angstrom Linux 发行版在 Beaglebone 板上开发应用程序。我倾向于将根文件系统挂载为只读，因为它在断电后的可读/可写配置上并不可靠。

您能否就如何将根文件系统挂载为只读提出建议？以只读方式挂载根文件系统然后将其恢复为可读/可写的步骤是什么？

通过这些步骤，我倾向于获得更强大的文件系统。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:00:59.263

您需要编辑传递给内核的引导参数以使用*ro*而不是`rw`挂载根文件系统。例如`root=/dev/mmcblk0p1 ro`. 它们可以通过 uboot 环境变量进行修改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:18:29.440

在类似的基于 Angstrom 的系统上，我得到了相同的“必须指定文件系统类型”消息。在尝试了一些不同的事情之后，我能够使用以下命令将 root 重新挂载为 ro：busybox mount -o remount,ro /

我不得不承认我不确定*为什么*当“mount”命令（它是busybox的链接）不起作用时直接调用busybox有效，但我没有时间进一步挖掘。

# python - Python 文本文件从子目录合并

> ID：12157068
> 
> 赞同：-3
> 
> 时间：2012-08-28T10:09:29.107
> 
> 标签：python, python-3.x

我有许多文本文件分散在许多子目录中。只想编译单个聚合文本文件。我的要求是生成应该具有目录结构的文本文件，包括文件名作为每行的前缀。TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:14:06.507

```
import os
root = './'
files = [(path,f) for path,_,file_list in os.walk(root) for f in file_list]
out_file = open('master.txt','w')
for path,f_name in files:
    in_file = open('%s/%s'%(path,f_name), 'r')

    # write out root/path/to/file (space) file_contents
    for line in in_file:
        out_file.write('%s/%s %s'%(path,f_name,line))
    in_file.close()

    # enter new line after each file
    out_file.write('\n')

out_file.close() 
```

如果你只想要树中的一些文件，`root`将第三行更改为

```
# only take .txt files from the directory tree
files = [(path,f) for path,_,file_list in os.walk(root) for f in file_list if f.endswith('.txt')] 
```

# scala - Scala :: PriorityQueue => 更新特定项目的优先级

> ID：12157070
> 
> 赞同：2
> 
> 时间：2012-08-28T10:09:39.160
> 
> 标签：scala, nonblocking, priority-queue

我已经实现了从头部提取项目的例程，更新它的优先级并使用这样的非阻塞方法将其放回队列（使用 AtomicReference）

```
def head(): Entry = {
  def takeAndUpdate(e: Entry, success: Boolean): Entry = {
    if (success) {
      return e
    }
    val oldQueue = queueReference.get()
    val newQueue = oldQueue.clone()
    val item = newQueue.dequeue().increase()
    newQueue += item
    takeAndUpdate(item.e, queueReference.compareAndSet(oldQueue, newQueue))
  }
  takeAndUpdate(null, false)
} 
```

现在我需要找出队列中的任意条目，更改它的优先级并将其放回队列。似乎 PriorityQueue 不支持这一点，那么我应该使用哪个类来完成所需的行为？

它与[更改优先级队列中项目的优先级有关](https://stackoverflow.com/questions/9103742/change-priority-of-items-in-a-priority-queue)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:05:36.417

使用不可变树图 ( `immutable.TreeMap`) 来完成此操作。您必须以某种方式找到您想要的条目 - 最好的方法是将`Key`用于查找条目的信息部分 ( ) 与键相关联，以及您希望返回的实际条目与映射中的值（称之为`Entry`）。

`queueReference`用重命名`treeReference`。在您创建集合的代码部分，使用`immutable.TreeMap[Key, Entry](<list of elements>)`.

然后像这样修改代码：

```
def updateKey(k: Key) {
  @annotation.tailrec def update(): (Key, Entry) = {
    val oldTree = treeReference.get()
    val entry = oldTree(k)
    val newPair = modifyHoweverYouWish(k, entry)
    val newTree = (oldTree - k) + newPair
    if (treeReference.compareAndSet(oldTree, newTree)) newPair
    else update()
  }
  update()
} 
```

如果`compareAndSet`失败，您必须像在源代码中那样重复。最好`@tailrec`如上所示使用，以确保函数是尾递归并防止潜在的堆栈溢出。

或者，您可以使用`immutable.TreeSet`- 如果您知道对`Entry`对象的确切引用，则可以使用它通过`-`如上所述删除元素，然后在调用`increase()`. 代码几乎相同。

# php - 从 PHP 访问 /etc/ipsec.conf 文件

> ID：12157077
> 
> 赞同：0
> 
> 时间：2012-08-28T10:09:57.147
> 
> 标签：php, linux, apache

我正在尝试`/etc/ipsec.conf`从 PHP 代码访问文件。该代码首先在 Windows 服务器上进行了测试，当时我已经授予了`c:\abc\ipsec.conf`. 使用这个在 wamp 中的 httpd.conf 中给出了访问权限

```
<Directory "c:/abc/">
Allow from all
Deny from none
Order allow,deny
</Directory> 
```

现在，当我尝试在 Suse Linux 中测试代码时，我收到了这个错误

```
**Warning: fopen(/etc/ipsec.conf) [function.fopen]: failed to open stream: Permission denied in /srv/www/htdocs/nsg/_ipsec.php on line 6** 
```

我已授予`/etc`目录和文件的 777 权限。该目录`/etc`也被添加到`httpd.conf`，但我仍然收到相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:30:24.333

正如一些评论指出的那样，将 777 交给`/etc`是一个坏主意。

要从您的 php 脚本中获取访问权限，您应该将`chown`文件的组（参见 参考资料）更改为 apache/php 正在运行的同一组，并通过`chmod`. 为了安全起见，apache 只能访问`/etc`.

**编辑**如果您使用的是 SEliunx 或类似的东西，这可能不起作用。我只是想指出一般的方法（不是 777-ing 文件）。

当然，还要清理您的输入，防止路径遍历，并保持偏执。

**编辑 2**

> 注意：启用安全模式后，PHP 会检查脚本运行所在的目录是否与正在执行的脚本具有相同的 UID（所有者）。

所以你真的应该确保，在安全模式打开的情况下，`wwwrun`用户在拥有的同一组中`/etc`（在这里放弃关于安全问题的危险信号）。否则，您只需将其应用于要读写的 conf 文件。

但是，为了满足安全性和权限，[Apache2 suEXEC](http://httpd.apache.org/docs/2.2/suexec.html)可能是您的解决方案。

> suEXEC 功能使 Apache 用户能够在不同于调用 Web 服务器的用户 ID 的用户 ID 下运行 CGI 和 SSI 程序。通常，当 CGI 或 SSI 程序执行时，它以运行 Web 服务器的同一用户身份运行。

所以你只需要创建一个独立用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:18:40.583

我建议您编写一个[SUID](http://en.wikipedia.org/wiki/SUID)助手可执行文件，该可执行文件会`/etc/ipsec.conf`根据您的 PHP 脚本的要求进行更改。然后，您的 PHP 脚本可以执行您的 SUID 可执行文件来发出所需的命令。

这个解决方案非常安全。您的 SUID 可执行文件可以确保只对 进行授权更改`ipsec.conf`，这在您的网络服务器和关键文件之间增加了另一层。

如果你小心的话，你可以用 PHP 编写辅助程序可执行文件。在这种情况下，您必须使用`sudo`（并`/etc/sudoers`进行相应配置），因为脚本不能直接设为 SUID。

# mysql - MySQL中的哈希索引算法

> ID：12157080
> 
> 赞同：1
> 
> 时间：2012-08-28T10:10:16.033
> 
> 标签：mysql, sql, hash, indexing

我在看一篇关于hash indexing的文章，好像`md5`和php的函数很像，都是取一个字符串值，返回一个表示该字符串的整数，而且这个表示是一致的。这种相似性真的存在吗，还是我错过了什么？另外，有人对 MySQL 用于基于哈希的索引结构的哈希算法有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:10:14.580

我不是假装对 MySQL 算法给出完整的描述，但有一些事情可能会被猜到。

首先，[Hash table wiki](http://en.wikipedia.org/wiki/Hash_table)是必读的。然后我们从[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/index-btree-hash.html)中得到一个通知：

> *   它们仅用于使用 = 或 <=> 运算符的相等比较（但速度非常快）。它们不用于
>     查找值范围的比较运算符，例如 <。依赖这种类型的单值查找的系统被称为“键值存储”；要将
>     MySQL 用于此类应用程序，请尽可能使用哈希索引。
> *   优化器不能使用哈希索引来加速 ORDER BY 操作。（这种类型的索引不能用于按顺序搜索下一个条目。）
> *   MySQL 无法确定两个值之间大约有多少行（范围优化器使用它来决定使用哪个索引）。如果您将 MyISAM 表更改为哈希索引的 MEMORY 表，这可能会影响某些查询。
> *   只能使用整个键来搜索行。（使用 B 树索引，键的任何最左边的前缀都可用于查找行。）

这指向以下（相当常见的）属性：

1.  MySQL 哈希函数对固定长度的“全键”记录进行操作（尽管这是一个问题，如何处理 varchar，例如，它们可能会用零填充到最大长度）

2.  在猜测散列函数的上限行数时，引擎可能会使用一个`max_heap_table_size`全局值和一个参数。`MAX_ROWS`

3.  MySQL[允许](http://dev.mysql.com/doc/refman/5.5/en/memory-storage-engine.html)非唯一键，但会警告按比例减速。至少这可以说明没有第二个散列函数，而只是在冲突解决中使用的链表。

至于实际使用的功能，我认为没什么好说的。MySQL 甚至可以根据一些关键启发式方法使用不同的函数（例如，一个用于大部分顺序数据，例如 ID，但另一个用于 CHAR），当然它的输出会根据估计的行数而改变。但是，只有当 BTREE 无法为您提供足够好的性能时，或者您永远不会使用它的任何优势时，您才应该考虑哈希索引，我想这是一种罕见的情况。

**更新**

一点来源：`/storage/heap/hp_hash.c`包含哈希函数的一些实现。至少，对于 TEXT 和 VARCHAR，他们对不同的类型使用不同的技术是一个正确的假设：

```
/*
 * Fowler/Noll/Vo hash
 *
 * The basis of the hash algorithm was taken from an idea sent by email to the
 * IEEE Posix P1003.2 mailing list from Phong Vo (kpv@research.att.com) and
 * Glenn Fowler (gsf@research.att.com).  Landon Curt Noll (chongo@toad.com)
 * later improved on their algorithm.
 *
 * The magic is in the interesting relationship between the special prime
 * 16777619 (2^24 + 403) and 2^32 and 2^8.
 *
 * This hash produces the fewest collisions of any function that we've seen so
 * far, and works well on both numbers and strings.
 */ 
```

我将尝试给出一个简化的解释。

```
ulong nr= 1, nr2= 4;
for (seg=keydef->seg,endseg=seg+keydef->keysegs ; seg < endseg ; seg++) 
```

复合键的每一部分都单独处理，结果累加在`nr`.

```
if (seg->null_bit)
{
  if (rec[seg->null_pos] & seg->null_bit)
  {
    nr^= (nr << 1) | 1;
    continue;
  }
} 
```

NULL 值单独处理。

```
if (seg->type == HA_KEYTYPE_TEXT)
{
  uint char_length= seg->length; /* TODO: fix to use my_charpos() */
  seg->charset->coll->hash_sort(seg->charset, pos, char_length,
                                &nr, &nr2);
}
else if (seg->type == HA_KEYTYPE_VARTEXT1)  /* Any VARCHAR segments */
{
  uint pack_length= seg->bit_start;
  uint length= (pack_length == 1 ? (uint) *(uchar*) pos : uint2korr(pos));
  seg->charset->coll->hash_sort(seg->charset, pos+pack_length,
                                length, &nr, &nr2);
} 
```

TEXT 和 VARCHAR 也是如此。`hash_sort`大概是其他一些考虑排序规则的功能。VARCHAR 的前缀长度为 1 或 2 字节。

```
else
{
  uchar *end= pos+seg->length;
  for ( ; pos < end ; pos++)
  {
nr *=16777619; 
nr ^=(uint) *pos;
  }
} 
```

并且所有其他类型都通过乘法和`xor`.

# javascript - 克隆节点会重复事件

> ID：12157085
> 
> 赞同：1
> 
> 时间：2012-08-28T10:10:29.820
> 
> 标签：javascript, event-handling, dom-events, clone, yui

我在页面上有一个 DOM 片段，需要在叠加层中显示。

使用 YUI 我替换了节点，然后使用以下 YUI 代码行在叠加层中放置一个克隆：

```
var overlayContent = content.replace(content.cloneNode(true)); 
```

我遇到的问题是，现在内容似乎向服务器发送了多个 AJAX 调用。因此，当用户单击按钮以增加一个项目时，会添加多个集合而不是单个项目，并且似乎以两个的倍数工作。

作为 YUI 的新手，我不知道如何防止这种情况发生，并且希望能有任何指导来防止这种情况发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T11:45:36.370

在设置 YUI 覆盖的主体内容时克隆节点不是一个好主意。您应该传递普通标记（您可以使用 getHTML() 方法获得）作为覆盖的正文内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:33:37.467

我们决定重新设计现有的实现，根本不使用克隆。

相反，我们将现有的片段从 DOM 拉到覆盖层中，然后在覆盖层关闭时将其从原来的位置放回。

# wpf - 根据父控件的大小在数据模板中设置宽度

> ID：12157092
> 
> 赞同：0
> 
> 时间：2012-08-28T10:10:56.043
> 
> 标签：wpf, treeview, telerik

我在 WPF 中使用 Telerik TreeView，并且使用 HierarchicalDataTemplate 来显示节点。节点代表匹配的项目 - 可以是仅左、仅右、相等或不等（基于树的比较）。

我目前正在使用 DataTemplateSelector 从四个模板之一中进行选择，这些模板看起来都类似于以下内容：

```
 <HierarchicalDataTemplate x:Key="EqualTreeItemTemplate" ItemsSource="{Binding}">
        <Grid Name="rowGrid" HorizontalAlignment="Stretch" Height="Auto" d:DataContext="{d:DesignInstance Carbon:ICarbonComparisonPair }">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="16" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Path Data="F1M574.042,314.611L533.8,344.398 522.251,328.798 515.235,333.988 526.786,349.593 526.782,349.596 531.978,356.603 579.235,321.622 574.042,314.611z" Stretch="Uniform" Fill="#FF000000" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,0,0" />
            <TextBlock Grid.Column="1" Text="{Binding ObjectName}" Style="{StaticResource ObjectNameStyle}" Margin="4,0,0,0" />
            <TextBlock Grid.Column="2" Text="{Binding ObjectName}" Style="{StaticResource ObjectNameStyle}" Margin="4,0,0,0" />
        </Grid>
    </HierarchicalDataTemplate> 
```

我遇到的问题是项目内容区域的宽度根据项目出现的树的级别而不同。这意味着我没有排列的列 - 右侧列中的文本移动对于您扩展的树的每个级别，向右一点。

我想做的是将右侧网格列的宽度指定为整个树控件大小的 50%，而不是网格自然区域的 50%。我想也许我可以通过与 RelativeSource 的绑定来做到这一点，但我似乎无法让它工作。有没有办法在 XAML 中实现这一点，还是我需要求助于代码隐藏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:15:03.937

如果我理解正确，您希望列索引 2 在所有项目中对齐？

查看 TreeListView 控件，看看它是否能满足您的需求。

Silverlight 演示[在这里](http://www.telerik.com/products/silverlight/treelistview.aspx)（只是为了让您可以看到它的外观 - WPF 版本几乎相同）

[编辑 - 更多信息] ColumnDefinition 上的 SharedGroupName 属性很诱人，但由于缩进，它不会完全起作用 - 你最终会得到第 1 列或第 2 列中的所有内容的大小相同，但令人讨厌缩进仍然把它扔掉。查看 ListView 的 View 属性。我相信它至少与 Telerik TreeListView 的精神相同，如果不是在实现上类似的话。

[这是一篇](http://blogs.msdn.com/b/atc_avalon_team/archive/2006/04/28/585844.aspx)关于如何使用它的不错的文章。（具有讽刺意味的是，我将该页面标记在一个名为“TreeGridList”的文件夹中，所以显然在某些时候我有这样做的想法来完成类似的事情:)）

# php - 如何从部分编码的文本中获取正确格式的内容

> ID：12157095
> 
> 赞同：1
> 
> 时间：2012-08-28T10:10:59.173
> 
> 标签：php, html, encoding, special-characters, html-entities

我的脚本包含大量文本 - 它可能是 HTML 代码或只是纯文本，特殊字符可能已编码或未编码或两者兼而有之。

因此，内容可能包含以下内容：

```
Don&#039;t Do That

It's called "Meme"

He said: &#039;Yeah&#039; 
```

我该怎么做才能将它作为一种类型 - 编码与否？

我试过了：

```
htmlentities(html_entity_decode($text), ENT_QUOTES, "UTF-8"), ENT_NOQUOTES, "UTF-8") 
```

但并非在所有情况下都有效。例如：

```
• 
```

返回

```
• 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:11:45.557

由于`html_entity_decode`不会“双重解码”你的字符串，你可以使用这样的东西：

```
$str=<<<STR
Don&#039;t Do That
It's called "Meme"
He said: &#039;Yeah&#039;
STR;

$tmp=html_entity_decode($str,ENT_QUOTES,"UTF-8");
while($str!=$tmp)
{
    $str=$tmp;
    $tmp=html_entity_decode($str,ENT_QUOTES,"UTF-8");
} 
```

现在你有一个`$str`完全解码的，然后你可以编码它或直接使用它，无论你喜欢什么。

当然这不是一个完美的解决方案——有时人们倾向于首先对他们的字符串进行编码——如果你不能控制或过滤数据源，它可能值得一试。

# objective-c - 在目标 c 上使用消费者密钥在 Twitter 上共享文本

> ID：12157098
> 
> 赞同：0
> 
> 时间：2012-08-28T10:11:05.143
> 
> 标签：objective-c, ios, xcode, twitter

我想使用objective c在twitter上发布带有我的消费者密钥和秘密的NSString。通常每个人都使用 xcode 中的 twitter 库。但是 xcode 中的库在没有消费者密钥和秘密的情况下发送。[所以我从http://blog.mugunthkumar.com/coding/adding-twitter-support-ios-5-with-oauth-fallback-to-your-ios-app-with-rsoauthengine/](http://blog.mugunthkumar.com/coding/adding-twitter-support-ios-5-with-oauth-fallback-to-your-ios-app-with-rsoauthengine/)找到了一个示例代码

该代码已成功运行，但我必须将 arc 项目从 Edit/Refactor/Convert 转换为 Objective C ARC... 菜单。当我这样做时，我所有正在运行的其他代码都会出错。我只想发送带有消费者密钥和秘密的示例文本。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:17:40.027

使用[sharekit](http://getsharekit.com/)进行身份验证和发送短信，因为它易于使用

从这里下载[Sharekit](https://github.com/ShareKit/ShareKit/downloads)。发生错误时，请点击[此](http://iphoneincubator.com/blog/tag/objcobjc-class-h)链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:31:18.037

您可以为此使用sharekit

**配置 ShkConfig 文件**

```
#define SHKTwitterSecret            @"r43dw1kQyCB3AGs1vDai6C7wCxUhQlIIKr0rp5vU"
#define SHKTwitterCallbackUrl       @"https://www.google.com" 
```

**在你的 .m 文件中**

```
#import "SHK.h"
#import "SHKTwitter.h"

SHKItem *item = [SHKItem text:@"textmeg"];
[SHKTwitter shareItem:item]; 
```

# javascript - 如何返回这个值？

> ID：12157099
> 
> 赞同：0
> 
> 时间：2012-08-28T10:11:12.697
> 
> 标签：javascript, jquery

我正在使用和构建移动应用`phonegap`程序。我想在我的应用程序中使用数据库来存储一些用户信息。（我不能使用我想对数据进行搜索/排序操作）`jQuery``jQuery mobile``SqLite``local storage`

这是我正在为完成这项工作而编写的代码，

```
function getAccountInformation(){
    var accounts = {};
    db.transaction(function(transaction) {
        transaction.executeSql('SELECT * FROM account;', [], 
            function(transaction, result) { 
                if (result != null && result.rows != null) { 
                    for (var i = 0; i < result.rows.length; i++) {
                        var item={};
                        var row = result.rows.item(i); 
                        for(var prop in row){
                            item[prop]=row[prop]
                        }
                        accounts[i]=item;
                    }
                }
            },errorHandler
        );
    },errorHandler,nullHandler);
    console.log(JSON.stringify(accounts));
} 
```

如果我把它放在它`console.log(JSON.stringify(accounts));`结束之后`}`，`for loop`它会显示正确的输出。

但是如果我把它放在现在的位置，它就会`{}`被打印为输出。

如何让`getAccountInformation()`函数将该`accounts`对象返回给我的其他函数？我将在哪里`jQuery`渲染输出。

我想要做的是`accounts`简单地通过写返回这个对象 `return accounts;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:15:31.783

这取决于何时调用该函数。当它被异步调用（如 AJAX 请求）时，你就不走运了。在这种情况下，我建议您阅读有关[jQuery deferreds](http://api.jquery.com/category/deferred-object/)的信息。

基于延迟的代码片段可能如下所示：

```
var deferred = new jQuery.Deferred();
var accounts = {};

deferred.done(function(data) {
    // process your data here
});

db.transaction(function(transaction) {
    transaction.executeSql('SELECT * FROM account;', [], 
        function(transaction, result) { 
            if (result != null && result.rows != null) { 
                for (var i = 0; i < result.rows.length; i++) {
                    var item={};
                    var row = result.rows.item(i); 
                    for(var prop in row){
                        item[prop]=row[prop]
                    }
                    accounts[i]=item;
                }
                deferred.resolve(accounts); // let the "done" function get called
            } else {
                deferred.reject();
            }
        }, errorHandler
    );
},errorHandler,nullHandler); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:21:12.727

因为 SqlLite 函数是异步的，所以不能只返回值。

我会让 getAccountInformation 接收如下回调：

```
function getAccountInformation(callbackfn)
{
    db.transaction(function(transaction),
        .....,
        function (transaction, result)
        {
            if (result != null)
            {
               callbackfn(result);
            }
        });
} 
```

这样，您将在执行数据库请求时调用您的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:20:52.947

`db.transaction`并通过使用回调函数**异步**`transaction.executeSql`产生结果。这意味着您的函数将立即返回并且不会等待事务完成（如在同步调用中）。**`getAccountInformation`**

 **简单地将回调函数作为您的参数传入并在填充数组`getAccountInformation`时运行该函数可能更容易。`accounts`因此，将您的函数签名更改为`getAccountInformation(callback)`并将`executeSql`回调替换为：

```
 function(transaction, result) { 
            if (result != null && result.rows != null) { 
                for (var i = 0; i < result.rows.length; i++) {
                    var item={};
                    var row = result.rows.item(i); 
                    for(var prop in row){
                        item[prop]=row[prop]
                    }
                    accounts[i]=item;
                }
                callback(accounts); // Call callback function with populated accounts
            }
        } 
```

然后，您可以使用以下命令调用此函数：

```
getAccountInformation(function(accounts) {
    // Do something with the accounts
}); 
```

有一些更好的方法，例如 jQuery Deferreds 和 Promises，可以更轻松地使用异步函数，但您仍然需要了解*为什么*会这样。通过使用异步操作，您的应用程序在等待结果时保持响应。**

# php - 在php中模糊图像时如何防止内存限制致命错误？

> ID：12157110
> 
> 赞同：0
> 
> 时间：2012-08-28T10:11:51.160
> 
> 标签：php, image, memory

我已经编写了一种算法，该算法通过可自定义的半径对图像进行高斯模糊处理，就像这样：[FastBlur.js](http://www.quasimondo.com/BoxBlurForCanvas/FastBlur.js)（函数 boxBlurCanvasRGB），但仅移植到 php。

当我选择一个 512x384 像素的图像时，该功能非常有效。较大的图像会导致致命的 php 错误（内存超出）。但目标是使用任何图像尺寸并在发生致命错误之前发出警告。

就像是：

```
if ($memory_needed_for_this > $available_memory_at_all) { return false; } 
```

是否有可能计算进程所需的内存量或检查当前正在使用多少内存让我们在每个循环中说？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:13:16.760

做一些测试和采样内存的使用——如果它与图像大小的增长一致，你可以很容易地计算出最大大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:13:29.700

`memory_get_usage`

返回当前分配给 PHP 脚本的内存量（以字节为单位）。

[http://php.net/manual/en/function.memory-get-usage.php](http://php.net/manual/en/function.memory-get-usage.php)

# c# - MVC 3 文件上传验证错误触发

> ID：12157113
> 
> 赞同：2
> 
> 时间：2012-08-28T10:11:55.970
> 
> 标签：c#, asp.net-mvc-3, post, file-upload, httppostedfilebase

我的 MVC 3 Web 应用程序中有一个文件上传功能，我正在尝试使用这些属性验证 FileSize 和 FileType：

```
[FileSize(1048576, ErrorMessage = "The image is too big. It should be up to 1MB")]
[FileType(MimeTypes.Image.Jpg, MimeTypes.Image.Jpeg, MimeTypes.Image.Png, "image/pjpeg", "image/x-png", ErrorMessage = "Your image must be a JPG/JPEG or PNG up to 1MB.")]
public HttpPostedFileBase File { get; set; } 
```

HTML如下：

```
<input type="file" size="20" name="File" />
@Html.ValidationMessageFor(x => x.File) 
```

选择文件后一切正常。但是，如果没有选择文件，我仍然会触发 FileSize 或 FileType 验证并出现验证错误。由于我不希望在 POST 上需要 File，我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T10:14:42.110

您必须修改`FileSize`和`FileType`自定义验证属性，以便在值为 null 时不执行任何验证。例如：

```
public class FileSizeAttribute : ValidationAttribute
{
    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        if (value == null)
        {
            // don't validate if value is null
            return null;
        }

        // TODO: do whatever validation you were supposed to do
        ...
    }
} 
```

您可以通过该`[Required]`属性使该文件成为必需的。

# php - 当我更新价格时，价格错误 magento 显示旧的（以前的）价格

> ID：12157114
> 
> 赞同：1
> 
> 时间：2012-08-28T10:12:04.247
> 
> 标签：php, magento

当我在我的 magento 网站上更新价格时，会发生非常非常奇怪的事情。

例如，我有一个价格为 17.96 的产品，我想将其更新为 17.99，因此我在后端更新价格并保存它。当我查看前端时，我看到 magento 为它做了一个特殊的价格亮点。（我已经删除/停用了属性特价，以确保特价不会成为问题。）

问题可能是什么？

我用完了选项，我已经截断了所有价格数据库和日志以及 /var /cache 等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:15:07.503

尝试从管理员重新索引您的产品

系统->索引管理

然后单击全选按钮并从操作下拉列表中选择重新索引数据，然后单击提交按钮，然后检查您的前端。

# javascript - OnChange 事件未触发

> ID：12157115
> 
> 赞同：0
> 
> 时间：2012-08-28T10:12:05.573
> 
> 标签：javascript, asp.net-mvc

我有一个文本框，其值是通过模态表单加载的。每次文本更改时，我都希望 OnChange 事件触发并启用按钮。我的 OnChange 事件似乎没有触发。我的Javascript和代码如下：

```
$("#txtFileName").change(function () {
    var selectedvalue = $("#FileGuid").val();
    alert(selectedvalue);           
});

<div class="editor-field modFileLoad">
  <%: Html.HiddenFor(model => model.FileGuid, new { @class = "flGuid",Visible=false })>
  <%: Html.TextBoxFor_Readonly(model => model.FileName, new{id= "txtFileName",style    = "width:400px;", @class = "flName" })%>  
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:19:34.160

使用`.keyUp()`事件而不是`.change()`事件。

`.change()`仅在焦点从元素移出时触发。

例子：

```
$("#txtFileName").keyUp(function () {
    var selectedvalue = $("#FileGuid").val();
    alert(selectedvalue);           
}); 
```

# sql - 为 Iron-Speed 应用程序添加密码保护

> ID：12157117
> 
> 赞同：0
> 
> 时间：2012-08-28T10:12:14.763
> 
> 标签：sql, sql-server, ironspeed

我有一个从我的数据库生成的 Iron-Speed 应用程序，并希望为所有页面添加密码保护。

我的数据库中已经有一个包含用户名和密码的表，如何将其应用于我的 Iron-Speed 页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:51:20.050

是的，您只需要在数据库中有 3 个表：

*   用户
*   角色
*   UserRoles（两者之间的关系）

它还会自动创建登录
名，您还可以通过以下 Get 方法获取用户信息：

```
BaseClasses.Utils.SecurityControls.Get___ 
```

从任何页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:07:27.150

经过一番调查，我发现 Iron-Speed（多么好的程序！）已经内置了一个用于安全目的的向导，例如密码保护。

通过转到工具 --> 基于角色的安全向导，可以通过将其链接到数据库中“用户”表中的相关字段来设置所有内容。

# eclipse-plugin - 运行测试用例时没有可运行的方法作为 Junit 插件测试运行

> ID：12157118
> 
> 赞同：2
> 
> 时间：2012-08-28T10:12:17.447
> 
> 标签：eclipse-plugin, junit4

我为 Eclipse RCP 应用程序创建了测试用例：

```
@Test
public final void testIsCacertsFileExist() {
    try {//URL url = new URL("https://server/web/services/WO");
    // System.out.println(url.getPort());
    URL url1 = new URL("http://server/web/services/WO");
    System.out.println(url1.getPort());
    CertificateHandler.addCertToKeyStore(
        "http://server/web/services/WO");", 443);
    File file = new File("cacerts");
    Assert.assertTrue(file.exists());
    readCertificates(file);
} catch (ConnectionException e) {
    fail(e.getMessage());
} catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
} 
```

我正在使用`@Test`注释。在 Eclipse 中，我正在运行`run as > Junit Plugin test`. 我仍然遇到以下错误：

```
java.lang.Exception: No runnable methods
    at org.junit.runners.BlockJUnit4ClassRunner.validateInstanceMethods(BlockJUnit4ClassRunner.java:177)
    at org.junit.runners.BlockJUnit4ClassRunner.collectInitializationErrors(BlockJUnit4ClassRunner.java:122)
    at org.junit.runners.ParentRunner.validate(ParentRunner.java:269)
    at org.junit.runners.ParentRunner.<init>(ParentRunner.java:66)
    at org.junit.runners.BlockJUnit4ClassRunner.<init>(BlockJUnit4ClassRunner.java:58)
    at org.junit.internal.builders.JUnit4Builder.runnerForClass(JUnit4Builder.java:13)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.<init>(JUnit4TestReference.java:33)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestClassReference.<init>(JUnit4TestClassReference.java:25)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:48)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.pde.internal.junit.runtime.RemotePluginTestRunner.main(RemotePluginTestRunner.java:62)
    at org.eclipse.pde.internal.junit.runtime.PlatformUITestHarness$1.run(PlatformUITestHarness.java:47)
    at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
    at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4140)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3757)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at com.ibm.stp.Application.start(Application.java:70)
    at org.eclipse.pde.internal.junit.runtime.NonUIThreadTestApplication.runApp(NonUIThreadTestApplication.java:54)
    at org.eclipse.pde.internal.junit.runtime.UITestApplication.runApp(UITestApplication.java:41)
    at org.eclipse.pde.internal.junit.runtime.NonUIThreadTestApplication.start(NonUIThreadTestApplication.java:48)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T09:49:57.813

这是我的问题的解决方案。我从工作区中删除项目。从存储库中创建新签出代码。junit-4.3.1.jar 添加到类路径中。在依赖项选项卡中打开 plugin.xml。在所需插件下单击搜索 org.junit 中的添加按钮类型。在我的 eclipse (Indigo) org.junit(4.8.2.v4_8_2_v20110321-1705) 中添加最新的一个，它显示为 org.junit(4.8.2)。

文件中的修改：.classpath - 添加了“junit-4.3.1.jar”条目 MANIFEST.MF - 由于 plugin.xml 中的更改而添加了 Require-Bundle: ,org.junit;bundle-version="4.8.2"。

谢谢， 阿南德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:49:38.420

此代码本身是否也包含在测试插件或插件片段中（扩展要测试的插件）？您不能只在普通 Java 项目中使用 Java 类来进行插件测试。

# c# - WMF 图像未在 mozila firefox 和 google chrome 中显示

> ID：12157123
> 
> 赞同：2
> 
> 时间：2012-08-28T10:12:38.630
> 
> 标签：c#, asp.net

我有一个带有 .wmf 扩展名的图像，我必须在网页上显示它

代码是：

```
<img src="/coursePagePics/d75726573cf543948875fbf79ad46a39.wmf" height="100%"/> 
```

它在 IE8 中运行良好，但在 Mozilla 和 chrome 中运行良好。

请帮忙

谢谢

# android - 在Android中将字符串写入和读取到内部存储

> ID：12157125
> 
> 赞同：5
> 
> 时间：2012-08-28T10:12:42.530
> 
> 标签：android, fileoutputstream, file-io

我想写入一个文件，然后从中读取。在使用 openFileOutput(..,..) 方法时，我发现此方法未定义，因为它是一种抽象方法。然后我尝试使用 getBaseContext(); 传递上下文；并且警告已关闭，但我在读取输出时没有得到结果。我还尝试在构造函数中将上下文作为参数传递，但这也无济于事。我想编写静态方法，这样我就不必每次都实例化该类，而静态不是原因，因为我也尝试过没有它。代码片段如下所示。

即使在使用内部存储时，我是否需要指定任何路径？在内部存储上写入文件是否需要任何权限？（我已包含在外部存储上写入的权限）

```
public static void write (String filename,Context c,String string) throws IOException{
    try {
        FileOutputStream fos =  c.openFileOutput(filename, Context.MODE_PRIVATE);
        fos.write(string.getBytes());
        fos.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public static String read (String filename,Context c) throws IOException{

    StringBuffer buffer = new StringBuffer();

    FileInputStream fis = c.openFileInput(filename);
    BufferedReader reader = new BufferedReader(new InputStreamReader(fis));
    if (fis!=null) {                            
        while ((Read = reader.readLine()) != null) {    
            buffer.append(Read + "\n" );
        }               
    }       
    fis.close();
    return Read;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T06:49:59.593

read 方法中的 return buffer.toString() 解决了这个问题。谢谢斯特凡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T04:04:35.937

> 在内部存储上写入文件是否需要任何权限？

[“您不需要任何权限将文件保存在内部存储上。您的应用程序始终有权读取和写入其内部存储目录中的文件。”](http://developer.android.com/training/basics/data-storage/files.html)

您可能会看到一些说明使用的帖子：“android.permission.WRITE_INTERNAL_STORAGE”

[没有这样的许可](http://developer.android.com/reference/android/Manifest.permission.html)；“WRITE_INTERNAL_STORAGE”

# mysql - Mysql触发器有两个表和if语句

> ID：12157126
> 
> 赞同：0
> 
> 时间：2012-08-28T10:12:44.823
> 
> 标签：mysql, join, if-statement, triggers

我找不到这个“问题”的任何解决方案。当更新另一个表时，我的数据库需要更新一个表中的字段。（仅当新值为 5 或 7 且新 prop.key 为“status_id”时）但更新后的表不包含我需要的值。它只包含另一个表的 ID。

我不确定该语句的语法。这个不行 任何人都可以帮助我吗？

这是我尝试过的：

```
delimiter $$

CREATE TRIGGER autoClosedOn AFTER INSERT ON journal_details
  FOR EACH ROW BEGIN
    IF
        NEW.prop_key = "status_id"
    AND  NEW.value = "5"
    OR  NEW.value = "7"
   THEN
   UPDATE
        issues i
        JOIN journals j
          ON j.journalized_id = i.id
     SET 
        i.closed_on = j.created_on;
     WHERE  j.id = NEW.jounal_id;
   END IF;
  END$$

delimiter ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:15:39.200

`WHERE`在更新语句的子句之前有一个多余的分号。

# java - 互联网监听器 Android 示例

> ID：12157130
> 
> 赞同：25
> 
> 时间：2012-08-28T10:12:54.447
> 
> 标签：java, android, networking, android-intent, android-service

我正在开发一个将持续保持连接到 Internet 的 Android 应用程序。如果互联网中断，它应该给用户一个适当的消息。

有没有类似 Internet Listener 的东西？或者如何实现这个事件，只要互联网连接不可用，它就会发出警报。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-28T10:16:01.297

为此创建一个广播接收器并将其注册到清单文件中。

首先创建一个新类`NetworkStateReceiver`并扩展 BroadcastReceiver。

```
public class NetworkStateReceiver extends BroadcastReceiver {
    public void onReceive(Context context, Intent intent) {
     Log.d("app","Network connectivity change");
     if(intent.getExtras()!=null) {
        NetworkInfo ni=(NetworkInfo) intent.getExtras().get(ConnectivityManager.EXTRA_NETWORK_INFO);
        if(ni!=null && ni.getState()==NetworkInfo.State.CONNECTED) {
            Log.i("app","Network "+ni.getTypeName()+" connected");
        }
     }
     if(intent.getExtras().getBoolean(ConnectivityManager.EXTRA_NO_CONNECTIVITY,Boolean.FALSE)) {
            Log.d("app","There's no network connectivity");
     }
   }
} 
```

将此代码放在“application”元素下的 AndroidManifest.xml 中：

```
<receiver android:name=".NetworkStateReceiver">
   <intent-filter>
      <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
   </intent-filter>
</receiver> 
```

并添加此权限

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

**编辑**

此代码仅检测连接更改，但无法判断其连接的网络是否可以访问 Internet。使用此方法检查 -

```
public static boolean hasActiveInternetConnection(Context context) {
    if (isNetworkAvailable(context)) {
        try {
            HttpURLConnection urlc = (HttpURLConnection) (new URL("http://www.google.com").openConnection());
            urlc.setRequestProperty("User-Agent", "Test");
            urlc.setRequestProperty("Connection", "close");
            urlc.setConnectTimeout(1500); 
            urlc.connect();
            return (urlc.getResponseCode() == 200);
        } catch (IOException e) {
        Log.e(LOG_TAG, "Error checking internet connection", e);
        }
    } else {
    Log.d(LOG_TAG, "No network available!");
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-04T11:19:47.917

上面 Chirag Raval 的代码确实有效。问题是即使应用程序没有在前台运行，侦听器也会被调用。

恕我直言，更好的方法是在所有应用程序活动的`onResume()`/方法中注册/注销接收器。`onPause()`这段代码应该这样做：

```
private final NetworkStateReceiver stateReceiver = new NetworkStateReceiver();

@Override
protected void onResume() {
    super.onResume();
    IntentFilter filter = new IntentFilter();
    filter.addAction("android.net.conn.CONNECTIVITY_CHANGE");
    registerReceiver(stateReceiver, filter);
}

@Override
protected void onPause() {
    super.onPause();
    unregisterReceiver(stateReceiver);
} 
```

显然，从`AndroidManifest.xml`文件中删除注册。

使用此解决方案，在您的应用程序的活动之间切换时也会调用接收器（假设您正在关闭它们）。在这种情况下，请使用静态标志（在所有活动之间共享），如下例所示（称为`online`）：

```
public class NetworkStateReceiver extends BroadcastReceiver {

    private static boolean online = true;  // we expect the app being online when starting

    public static final String TAG = NetworkStateReceiver.class.getSimpleName();

    public void onReceive(Context context, Intent intent) {
        Log.d(TAG,"Network connectivity change");
        ConnectivityManager manager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo ni = manager.getActiveNetworkInfo();
        if (ni == null || ni.getState() != NetworkInfo.State.CONNECTED) {
            Log.d(TAG,"There's no network connectivity");
            if (online) // don't show the message if already offline
                Toast.makeText(context, R.string.noInternet, Toast.LENGTH_SHORT).show();
            online = false;
        } else {
            Log.d(TAG,"Network "+ni.getTypeName()+" connected");
            if (!online)  // don't show the message if already online
                Toast.makeText(context, R.string.backOnline, Toast.LENGTH_SHORT).show();
            online = true;
        }
    }
} 
```

如果在离线时启动您的应用程序，则会出现 Toast 消息；否则只有在丢失/重新建立连接时才会出现。

# android-mapview - SherlockMapActivity 和 onTap 事件

> ID：12157132
> 
> 赞同：0
> 
> 时间：2012-08-28T10:13:01.413
> 
> 标签：android-mapview, actionbarsherlock

我正在使用这个插件： [https ://github.com/JakeWharton/ActionBarSherlock-Plugin-Maps/downloads](https://github.com/JakeWharton/ActionBarSherlock-Plugin-Maps/downloads)

在 ABS 中有 MapViewActivity。

我的问题是我想在地图上检测 onTap 事件，而不是在叠加层上，并且 onTap 方法似乎不存在于 SherlockMapActivity.class

怎么做 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:49:26.743

`SherlockMapActivity` is just an extension of `MapActivity` that add the capabilities of `ActionBarSherlock` to the `MapActivity`. However, it doesn't add an `onTap` method and `MapActivity` doesn't provide one either.

I guess what you are trying to detect a tap on the `MapView`. Several methods exists in order to do so. One of my favorite is to add a custom `Overlay` that does nothing but detects the tap. This `Overlay` has to be added at the first overlay in the `getOverlays()`'s `List`in order to have its `onTap` method called after all other `Overlay`s

# c# - 将文本框值从表单访问到另一个类

> ID：12157133
> 
> 赞同：0
> 
> 时间：2012-08-28T10:13:02.150
> 
> 标签：c#, wpf, textbox, get, set

我有一个 WPF 应用程序，其中包含一个名为 RateView.xaml.cs 和 MainWindow.xaml.cs 的类

MainWindow.xaml.cs 包含三个文本框，我想将它们的值传递到 RateView.xaml.cs。这些文本框的内容可以由最终用户更改，但无论如何我总是希望文本框的值进入 rateview.xaml.cs。

如何才能做到这一点？

我是编码新手，因此不确定，有人提到 Get 和 Set 语句，如果是这样，我该怎么做？

目前我在MainWindow中访问我的文本框：

```
private float GetSomeNumber()
{
    bool Number1 = false;
    float parsedNumber1Value = 0.00F;
    Number1 = float.TryParse(Number1_TextBox.Text, out parsedNumber1Value);
    return parsedNumber1Value;
} 
```

然后将 GetSomeNumber() 方法传递给另一个单独的类以进行一些计算。

在初始加载时，它适用于我的方法中的值，但是一旦有人更改值 rateview.xaml.cs 就无法识别此更改并始终使用第一次加载的值。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:00:14.357

只是一个小例子（这是winforms）

这是主窗口，您的文本框在其中：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }
1
public string TextBox1Text
{ 
  get { return textBox1.Text; }
  set { textBox1.Text = value;
}
} 
```

这是一个你想与文本框交互的类：

```
public class Test
{
public Test(Form1 form)
{
//Set the text of the textbox in the form1
form.TextBox1Text = "Hello World";
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:38:54.037

要在另一个类/表单中获取和设置文本框的值，您可以使用以下方法：

```
public string TextBox1Text
{ get { return textBox1.Text; } 
  set { textBox1.Text = value; } } 
```

# c++ - C ++随机数逻辑运算符奇怪的结果

> ID：12157137
> 
> 赞同：1
> 
> 时间：2012-08-28T10:13:10.190
> 
> 标签：c++, random, numbers, operator-keyword, logical-operators

我正在尝试制作一个生成随机数的程序，直到它找到一组预定义的数字（例如，如果我有一组我最喜欢的 5 个数字，我需要玩多少次才能让计算机随机找到相同的数字） . 我写了一个简单的程序，但不理解结果，这似乎与我的预期有点无关，例如结果不一定包含所有预定义的数字，有时它会包含（即使这样也不会停止循环从运行）。我认为问题出在逻辑运算符“&&”上，但不确定。这是代码：

```
const int one = 1;
const int two = 2;
const int three = 3; 
```

使用命名空间标准；

```
int main()
{

    int first, second, third;
    int i = 0;

    time_t seconds;
    time(&seconds);

    srand ((unsigned int) seconds);

    do

    {

    first = rand() % 10 + 1;
    second = rand() % 10 + 1;
    third = rand() % 10 + 1;

    i++;

    cout << first<<","<<second<<","<<third<< endl;
    cout <<i<<endl;
    } while (first != one && second != two && third != three); 

    return 0;
 } 
```

以下是可能的结果：

```
3,10,4
1 // itineration variable
7,10,4
2
4,4,6
3
3,5,6
4
7,1,8
5
5,4,2
6
2,5,7
7
2,4,7
8
8,4,9
9
7,4,4
10
8,6,5
11
3,2,7
12 
```

我还注意到，如果我使用 || 运算符而不是 && 循环将执行，直到它找到符合变量设置顺序的确切数字（此处为：1、2、3）。这更好，但是即使顺序不同，只有数字，我该怎么做才能使循环停止？感谢您的回答和帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T10:16:55.403

问题在于您的情况：

```
} while (first != one && second != two && third != three); 
```

你继续，而他们都不是平等的。但是一旦其中至少一个相等，您就会停止/离开循环。

要解决此问题，请使用逻辑或 ( `||`) 而不是逻辑和 ( `&&`) 来链接测试：

```
} while (first != one || second != two || third != three); 
```

现在只要它们中的任何一个不匹配，它就会继续。

编辑 - 进行更高级的比较：

我将使用一个简单的宏来使其更易于阅读：

```
#define isoneof(x,a,b,c) ((x) == (a) || (x) == (b) || (x) == (c)) 
```

请注意，您可以使用不同的方法。

```
} while(!isoneof(first, one, two, three) || !isoneof(second, one, two, three) || !isoneof(third, one, two, three)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:17:15.043

您的逻辑条件有误：这意味着“所有数字都不相等”。**要打破这个条件，一**对变得相等就足够了。

您需要构建一个不同的条件 - 要么在它前面加上“不”

```
!(first==one && second==two && third==three) 
```

或使用[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)转换：

```
first!=one || second!=two || third!=three 
```

# java - 如何使用aws java sdk在我的亚马逊账户下获取所有带有标签的实例

> ID：12157139
> 
> 赞同：12
> 
> 时间：2012-08-28T10:13:11.963
> 
> 标签：java, amazon-ec2, amazon-web-services

我想使用 java aws sdk 获取在我的 AWS 账户下运行的具有特定标签的所有实例 ID。有人可以指导我如何得到这个。谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-28T11:58:28.767

我通过使用过滤器来做到这一点，例如获取由相同密钥对值创建的所有实例

```
DescribeInstancesRequest request = new DescribeInstancesRequest();
List<String> valuesT1 = new ArrayList<String>();
valuesT1.add("my-keypair-name");
Filter filter = new Filter("key-name", valuesT1);

DescribeInstancesResult result = ec2.describeInstances(request.withFilters(filter));

List<Reservation> reservations = result.getReservations();

for (Reservation reservation : reservations) {
    List<Instance> instances = reservation.getInstances();

    for (Instance instance : instances) {

        System.out.println(instance.getInstanceId());

    }
} 
```

# xpages-extlib - 通过 https 的 Extlib 对话框在 IE 中不起作用

> ID：12157145
> 
> 赞同：0
> 
> 时间：2012-08-28T10:13:32.543
> 
> 标签：xpages-extlib

我们有一个 xpage，其中包括一个对话框。我们的网站是通过 https 调用的。在 Firefox 中显示对话框，在 IE 中显示一个空白页面 (https://[SERVER]/[DB]/xsp/.ibmxspres/dojoroot-1.6.1/dojo/resources/blank.html)....

typeahead 也仅适用于 Firefox。我们看了firebug控制台，所有资源都是通过https加载的......

请帮忙！！！

谢谢马里奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:09:07.280

解决方法，有效： [http ://www.openntf.org/projects/pmt.nsf/66d9103768cc2fed85256c59006b5433/4fccbe1e644908e786257872002cd7ca!OpenDocument](http://www.openntf.org/projects/pmt.nsf/66d9103768cc2fed85256c59006b5433/4fccbe1e644908e786257872002cd7ca!OpenDocument)

# android - 仅在有限/固定时间内隐藏进度对话框

> ID：12157153
> 
> 赞同：1
> 
> 时间：2012-08-28T10:13:53.043
> 
> 标签：android, timeout, progressdialog

我有一个进度对话框，在某些运行操作期间显示。

如果动作在给定时间内没有执行，我想关闭对话框和动作。我该如何实施？

我目前有这两种方法，它们可以停止和启动我的异步操作和对话框：

```
private void startAction()
{
    if (!actionStarted) {
        showDialog(DIALOG_ACTION);
        runMyAsyncTask();
        actionStarted = true;
    }
}

private void stopAction()
{
    if (actionStarted) {
        stopMyAsyncTask();
        actionStarted = false;
        dismissDialog(DIALOG_ACTION);
    }
} 
```

即我想在时间到的时候做这样的事情：

```
onTimesOut()
{
    stopAction();
    doSomeOtherThing();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:21:35.653

您可以制作一个简单的计时器：

```
Timer timer = new Timer();
TimerTask task = new TimerTask() {

    @Override
    public void run() {
        stopAction();
    }
};

timer.schedule(task, 1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:26:34.470

我认为你应该使用 a`Thread`或 a `TimerTask`。暂停 X 秒，然后如果您的任务尚未完成，请强制完成并关闭对话框。

所以一种实现可能是：

```
private void startAction() {
    if (!actionStarted) {
        actionStarted = true;
        showDialog(DIALOG_ACTION); //This android method is deprecated
        //You should implement your own method for creating your dialog
        //Run some async worker here...
        TimerTask task = new TimerTask() {
            public void run() {
                if (!actionFinished) {
                    stopAction();
                    //Do other stuff you need...
                }
            }
        });
        Timer timer = new Timer();
        timer.schedule(task, 5000); //will be executed 5 seconds later
    }
}

private void stopAction() {
    if (!actionFinished) {
        //Stop your async worker
        //dismiss dialog
        actionFinished = true;
    }
} 
```

# ruby-on-rails - 用于 Rails 导入数据的 Xls (csv) 或 xml

> ID：12157155
> 
> 赞同：0
> 
> 时间：2012-08-28T10:13:55.207
> 
> 标签：ruby-on-rails, xml, csv, xls

我需要将数据导入我的应用程序，现在我通过 xls 电子表格进行操作，但是在我的情况下，它有大约 80.000 行时速度很慢，所以选择另一种格式可能会更好吗？例如，xml数据在导入时会更快吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:26:13.343

XML 不太可能更快 - 它仍然需要被解析为字符串并进行转换。

80,000 行是相当多的。这需要多长时间？

**编辑：**

您可以通过将带有时间戳的 puts 语句放入代码中来使正在发生的事情更加明显。这很粗糙，但是您可以在代码的各个部分之间计时，看看哪个部分花费的时间最长。

或者更好的是，尝试使用[ruby​​-prof](http://ruby-prof.rubyforge.org/)来分析您的代码并查看代码在哪里花费的时间最多。

无论哪种方式，获得更详细的慢点图片都是一个好主意。您可能会发现只有一两个可以轻松解决的瓶颈。

# ios - 通用应用 ipad 版本在 iPad 上不起作用，但在模拟器上可以

> ID：12157157
> 
> 赞同：-1
> 
> 时间：2012-08-28T10:14:05.383
> 
> 标签：ios, ios5, ios-simulator

在完成我们的 iphone 应用程序后，我们决定移植到 iPad。为此，我们选择项目设置通用并创建所有以 ~iPad 结尾的 viewController。在模拟器中一切正常，但是当我编译它并部署到 iPad 时，它需要 iPhone 视图。知道为什么它可以在模拟器中工作但不能在部署模式下工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T08:25:39.790

所以在尝试了很多选项之后，解决这个问题的方法是将~ipad添加到所有ipad XIB，将~iphone添加到所有iphone XIB。对我来说，当两个 XIB 家族都有他的扩展名时，它就可以工作......

我会说 iPhone 模拟器的名称不区分大小写，但一旦部署到 iOS 设备上是的。我希望它有帮助！

# php - 在 ubuntu linux 服务器上通过命令行运行 php 文件

> ID：12157163
> 
> 赞同：3
> 
> 时间：2012-08-28T10:14:31.297
> 
> 标签：php

我正在尝试在 ubuntu linux 服务器上运行 php 文件，但是当我运行“php file_name.php”时出现“找不到命令”错误

在网上搜索，我发现一篇文章建议我运行“sudo aptitude install php5-cli”，然后我重新启动了 apache，但我仍然收到此错误。

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:41:37.493

试试这个，

前往终端。

```
whereis php 
```

它将显示 php 的安装位置。

使用以下命令将该路径导出到环境变量

```
export PATH=$PATH;/path/to/php's/bin directory 
```

然后执行所需的文件..

如下，

```
php file_to_execute.php 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T10:25:48.433

首先确保您已安装以下包：

*   php5
*   php5-cli
*   php-梨

像这样：

```
sudo apt-get install php5 php5-cli php-pear 
```

然后确保在使用它之前安全地配置 php。

还使您的 php 文件可执行（ chmod 700 ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T04:52:54.690

*   尝试以下步骤：
*   打开您的 cmd/控制台或按 ctr+alt+t。
*   php5 /your/path/to/php_file_name.

# php - 使用 PHP ImageMagick 库为动画 gif 添加水印

> ID：12157164
> 
> 赞同：0
> 
> 时间：2012-08-28T10:14:36.907
> 
> 标签：php, imagemagick

这适用于非动画图像：

```
$image = new Imagick($file);

$format = strtolower($image->getImageFormat());

$watermark = new Imagick('watermark.png');
$watermark->scaleImage($image->getImageWidth(), $watermark->getImageHeight());

$image->addImage($watermark);

$image->resetIterator();
$combined = $image->appendImages(true);

$data = base64_encode($combined->getImageBlob());

echo '<img src="data:image/' . $format . ';base64,' . $data . '">'; 
```

我怎样才能使它适用于动画 GIF？它只是将每一帧放在彼此下方，并将水印放在下方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:21:23.797

请参阅下面的 URL，我非常确定它对您很有帮助：-

[使用php在动画gif上添加水印](https://stackoverflow.com/questions/10531514/watermark-on-animated-gif-with-php)

尝试这个

```
$animation = ani.gif; 

$watermark = logo.png; 

$watermarked_animation = "morph.gif"; 

$cmd = " $animation -coalesce -gravity South ". 
" -geometry +0+0 null: $watermark -layers composite -layers optimize "; 

exec("convert $cmd $watermarked_animation "); 
```

也可以看看

[http://www.imagemagick.org/Usage/anim_mods/#composite](http://www.imagemagick.org/Usage/anim_mods/#composite)

[http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=21730](http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=21730)

# matlab - 如何使用matlab删除txt的重复数据？

> ID：12157166
> 
> 赞同：0
> 
> 时间：2012-08-28T10:14:40.677
> 
> 标签：matlab

我想删除流中的重复数据。然后按照第一列升序排列。你能显示详细的代码来解决这个问题吗？非常感谢你。

```
 15.0    0.8     1.6    -0.0    -0.3  
  16.0    2.4    -0.2     0.1    -0.1  
  17.0    2.6    -0.6     0.2     0.2
  18.0    4.6     1.0     0.3     0.1
  19.0    2.3     1.4     0.9     0.2
  20.0    2.4     0.9     0.5     0.4

   6.0    5.8     2.5    -1.8    -1.9
   7.0    4.1     4.1    -0.8     1.6
   8.0    2.8     2.3     2.2    -0.5
   9.0   -1.5    -1.9     1.1     0.9
  10.0    0.9     0.2     0.0     0.1  

   9.0   -1.5    -1.9     1.1     0.9
  10.0    0.9     0.2     0.0     0.1
  11.0    2.3    -3.6     0.7    -0.6
  12.0   -1.2    -0.4    -0.2    -0.1
  13.0   -4.4     0.3    -0.3    -0.2
  14.0   -0.9     0.9    -0.4    -0.4
  15.0    0.8     1.6    -0.0    -0.3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:24:03.927

从 的[文档](http://www.mathworks.nl/help/techdoc/ref/unique.html)中`unique`，我们发现该`unique(B, 'rows')`命令将

*   仅输出唯一行
*   对输出进行排序

所以：

```
B = [...
    your data here
];

C = unique(B, 'rows'); 
```

将解决您的两个问题：默认为`sort`对第一列进行排序。

# javascript - Gmaps4Rails 相对于一个动态点绘制圆

> ID：12157170
> 
> 赞同：1
> 
> 时间：2012-08-28T10:14:52.877
> 
> 标签：javascript, ruby-on-rails, gmaps4rails

这可能是一个 javascript 问题，但因为它也处理 Rails 变量和 gmpas4rails gem，所以我还是想问你......

我认为这是

```
<%= gmaps(
    { 
     "markers"     => { "data" => @json },

     "circles"     => { "data" => '[
                         {"lng": 122.214897, "lat": 37.772323, "radius": 25000, "strokeColor": "#FF0000"}
                         ]',
                      },
    }
        ) %> 
```

我有圈子的部分我想要这个

```
"circles"     => { "data" => '[
                         {"lng": '@shop.longitude', "lat": '@shop.latitude', "radius": 25000, "strokeColor": "#FF0000"} 
```

因此，对于每家商店，它都会以圆圈为中心并绘制区域......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:18:21.530

你不应该逃避纬度和经度：

```
"circles" => { 
  "data" => "[{'lng': #{@shop.longitude}, 'lat': #{@shop.latitude}, 'radius': 25000, 'strokeColor': '#FF0000'}]"
} 
```

* * *

替代解决方案：

```
"circles" => { 
  "data" => [{'lng' => @shop.longitude, 'lat' => @shop.latitude, 'radius' => 25000, 'strokeColor' => '#FF0000'}].to_json
} 
```

# web-services - 可执行 jar 和 WebServices 的问题

> ID：12157171
> 
> 赞同：0
> 
> 时间：2012-08-28T10:14:55.807
> 
> 标签：web-services, soap, executable-jar

我正在尝试执行一个 jar 文件，当我执行此操作时出现此错误并且我不知道如何解决它，当我看到跟踪时我不知道它是什么意思。我有两个 ws 一个连接到 mysql 数据库，另一个连接到 sqlserver 数据库，我有这个，请你帮帮我吗？：

```
C:\Users\cmorales\Desktop>java -jar SincroCloud2.jar
Ejecutando el exe
ago 28, 2012 10:59:16 AM org.apache.axis.utils.JavaUtils isAttachmentSupported
Advertencia: Unable to find required classes (javax.activation.DataHandler and j
avax.mail.internet.MimeMultipart). Attachment support is disabled.
AxisFault 
faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server.userException
faultSubcode:
faultString: org.apache.axis.InternalException: java.lang.Exception: Couldn't f
ind a matching Java operation for WSDD operation &quot;procesosProgramados&quot;
(1 args)
faultActor:
faultNode:
faultDetail:
    {http://xml.apache.org/axis/}hostname:UW-000216

org.apache.axis.InternalException: java.lang.Exception: Couldn't find a matching
Java operation for WSDD operation "procesosProgramados" (1 args)
    at org.apache.axis.message.SOAPFaultBuilder.createFault(SOAPFaultBuilder
.java:222)
    at org.apache.axis.message.SOAPFaultBuilder.endElement(SOAPFaultBuilder.
java:129)
    at org.apache.axis.encoding.DeserializationContext.endElement(Deserializ
ationContext.java:1087)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endEleme
nt(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImp
l.scanEndElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImp
l$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(U
nknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next
(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImp
l.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(U
nknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(U
nknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown So
urce)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Un
known Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.p
arse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(Unknown S
ource)
    at org.apache.axis.encoding.DeserializationContext.parse(Deserialization
Context.java:227)
    at org.apache.axis.SOAPPart.getAsSOAPEnvelope(SOAPPart.java:696)
    at org.apache.axis.Message.getSOAPEnvelope(Message.java:435)
    at org.apache.axis.handlers.soap.MustUnderstandChecker.invoke(MustUnders
tandChecker.java:62)
    at org.apache.axis.client.AxisClient.invoke(AxisClient.java:206)
    at org.apache.axis.client.Call.invokeEngine(Call.java:2784)
    at org.apache.axis.client.Call.invoke(Call.java:2767)
    at org.apache.axis.client.Call.invoke(Call.java:2443)
    at org.apache.axis.client.Call.invoke(Call.java:2366)
    at org.apache.axis.client.Call.invoke(Call.java:1812)
    at es.uniway.wscloud.WscloudSoapBindingStub.procesosProgramados(WscloudS
oapBindingStub.java:368)
    at es.uniway.principal.ObtenerProcesos.ejecutar(ObtenerProcesos.java:25)

    at es.uniway.principal.SincronizadorCloud.main(SincronizadorCloud.java:1
4) 
```

为什么我有这个？非常感谢

* * *

我已经解决了这个问题，包括罐子，但现在当我执行这个罐子时，我遇到了这个问题。这个可执行文件有两个 web 服务，其中一个带有 mysql 数据库，另一个连接到 sqlserver 数据库。这个问题是什么意思？，我在哪里有 NullPointerException？。

```
C:\Users\cmorales\Desktop>java -jar SincroCloud2.jar
Ejecutando el exe
AxisFault
faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server.userException
faultSubcode:
faultString: java.lang.NullPointerException
faultActor:
faultNode:
faultDetail:
    {http://xml.apache.org/axis/}hostname:UW-000216

java.lang.NullPointerException
    at org.apache.axis.message.SOAPFaultBuilder.createFault(SOAPFaultBuilder
.java:222)
    at org.apache.axis.message.SOAPFaultBuilder.endElement(SOAPFaultBuilder.
java:129)
    at org.apache.axis.encoding.DeserializationContext.endElement(Deserializ
ationContext.java:1087)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endEleme
nt(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImp
l.scanEndElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImp
l$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(U
nknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next
(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImp
l.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(U
nknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(U
nknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown So
urce)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Un
known Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.p
arse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl.parse(Unknown S
ource)
    at org.apache.axis.encoding.DeserializationContext.parse(Deserialization
Context.java:227)
    at org.apache.axis.SOAPPart.getAsSOAPEnvelope(SOAPPart.java:696)
    at org.apache.axis.Message.getSOAPEnvelope(Message.java:435)
    at org.apache.axis.handlers.soap.MustUnderstandChecker.invoke(MustUnders
tandChecker.java:62)
    at org.apache.axis.client.AxisClient.invoke(AxisClient.java:206)
    at org.apache.axis.client.Call.invokeEngine(Call.java:2784)
    at org.apache.axis.client.Call.invoke(Call.java:2767)
    at org.apache.axis.client.Call.invoke(Call.java:2443)
    at org.apache.axis.client.Call.invoke(Call.java:2366)
    at org.apache.axis.client.Call.invoke(Call.java:1812)
    at es.uniway.wscloud.WscloudSoapBindingStub.procesosProgramados(WscloudS
oapBindingStub.java:338)
    at es.uniway.principal.ObtenerProcesos.ejecutar(ObtenerProcesos.java:25)

    at es.uniway.principal.SincronizadorCloud.main(SincronizadorCloud.java:1
4)

C:\Users\cmorales\Desktop> 
```

希望有人可以帮助我。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:18:20.680

看起来它缺少 java 邮件 API 和 JAF API。您可以在此处下载以下内容：

[JAF](http://www.oracle.com/technetwork/java/javase/downloads/index-135046.html#download) [Java 邮件](http://www.oracle.com/technetwork/java/javamail/index-138643.html)

如果没有更多细节，我不确定这是否能解决您的问题。如果您制作了 jar 文件，您可以尝试使用上述 API 重新打包它。您也可以将它们添加到类路径并尝试再次运行 jar。

# sql - SQL 查询以跨多行显示“总列”

> ID：12157173
> 
> 赞同：4
> 
> 时间：2012-08-28T10:15:00.933
> 
> 标签：sql, db2

假设我有下表

```
claim_id | person_id | age_category | amount
--------------------------------------------
       1 |         1 |        adult |  10.00
       1 |         2 |        adult |  10.00
       1 |         3 |     juvenile |   8.00
       1 |         4 |        child |   5.00
       2 |         5 |        adult |  15.00
       3 |         6 |        adult |  12.00
       3 |         7 |        child |   6.00
     ...
     100 |       250 |        child |   7.00 
```

所以几个人可能属于同一个索赔。我已经设法实现的是这样一个结果表：

```
category | total people |     amount
------------------------------------
adult    |          150 | 300'000.00
juvenile |           20 |  40'000.00
child    |           80 | 160'000.00 
```

使用以下查询：

```
select 
    age_category as "category"
    count(*) as "total people",
    sum(amount) as "amount"
from
    my_table
group by
    age_category 
```

有没有办法计算索赔数量并将其显示在同一个结果表中？例如：

```
category | total claims | total people |     amount
---------------------------------------|-----------
adult    |          100 |          150 | 300'000.00
juvenile |              |           20 |  40'000.00
child    |              |           80 | 160'000.00 
```

感谢您的任何提示！

PS：我正在使用 DB2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:30:12.090

尝试这个：

```
select 
    age_category as "category",
    COUNT(distinct claim_id ) as "total_claims", --  <-- add this line 
    count(*) as "total people",
    sum(amount) as "amount"

from
    my_table
group by
    age_category 
```

编辑：

根据您的评论，使用此查询

```
select 
    age_category as "category",
    case when age_category='adult' then COUNT(distinct claim_id ) end 
                                                         as "total_claims" , 
    count(*) as "total people",
    sum(amount) as "amount"

from
    my_table
group by
    age_category 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/9ec00/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:25:32.057

```
select 
    age_category as "category",
    sum(case when amount>0 then 1 else 0 end ) as "total claims",
    count(*) as "total people",
    sum(amount) as "amount"
from
    my_table
group by
    age_category 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:27:45.517

尝试使用计数（DISTINCT）：

```
select 
    age_category as "category"
    count(*) as "total people",
    sum(amount) as "amount",
    count(distinct claim_id) as "total_claims"
from
    my_table
group by
    age_category 
```

或者也尝试使用这个：

```
select t.*,
(select count(*) from

(select distinct claim_id from my_table 
   where my_table.age_category=t.category) as d
 ) as "total_claims"
from
(
select 
    age_category as "category",
    count(*) as "total people",
    sum(amount) as "amount"
from
    my_table
group by
    age_category
  ) as t 
```

# log4j - log4j javax.mail.MessagingException 日志到文件

> ID：12157178
> 
> 赞同：0
> 
> 时间：2012-08-28T10:15:11.603
> 
> 标签：log4j, smtpappender

当我使用 org.apache.log4j.net.SMTPAppender 并添加错误的 smtp 主机时，log4j 会引发异常。但是这个例外只在控制台中。其他味精很好地写入文件。我想将此异常记录到文件中。这个怎么做？

我的设置：

```
log4j.rootLogger=INFO, FileAppender, SystemOut_Appender, email

log4j.appender.FileAppender=com.apxx.application.CompressDailyRollingFileAppender
log4j.appender.FileAppender.File=C:/log.log
log4j.appender.FileAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.FileAppender.layout.ConversionPattern=%d{yyyy.MM.dd HH:mm:ss.SSS} [%p] (%C{1}.%M:%L) :: %X{sessionID} %m%n
log4j.appender.FileAppender.DatePattern='.'yyyy-MM-dd
log4j.appender.FileAppender.Threshold=DEBUG
log4j.appender.FileAppender.MaxFileSize=10MB

log4j.appender.SystemOut_Appender=org.apache.log4j.ConsoleAppender
log4j.appender.SystemOut_Appender.layout=org.apache.log4j.PatternLayout
log4j.appender.SystemOut_Appender.layout.ConversionPattern=%d{yyyy.MM.dd HH:mm:ss.SSS} [%p] (%C{1}.%M:%L) :: %X{sessionID} %m%n
log4j.appender.SystemOut_Appender.Threshold=DEBUG

log4j.appender.SystemErr_Appender=org.apache.log4j.ConsoleAppender
log4j.appender.SystemErr_Appender.Target=System.err
log4j.appender.SystemErr_Appender.layout=org.apache.log4j.PatternLayout
log4j.appender.SystemErr_Appender.layout.ConversionPattern=%d{yyyy.MM.dd HH:mm:ss.SSS} [%p] (%C{1}.%M:%L) :: %X{sessionID} %m%n
log4j.appender.SystemErr_Appender.Threshold=ERROR

#CONFIGURE SMTP
log4j.appender.email=org.apache.log4j.net.SMTPAppender
log4j.appender.email.SMTPHost=fakeHost
log4j.appender.email.SMTPUsername=asdas
log4j.appender.email.SMTPPassword=asdasd
log4j.appender.email.From=wasdaasdasd
log4j.appender.email.To=testeasdasdasdasd@asdasdsa.com
log4j.appender.email.Subject= error
log4j.appender.email.BufferSize=512
log4j.appender.email.layout=org.apache.log4j.PatternLayout
log4j.appender.email.layout.ConversionPattern=%d{yyyy.MM.dd HH:mm:ss.SSS} [%p] (%C{1}.%M:%L) :: %X{sessionID} %m%n
log4j.appender.email.Threshold=ERROR

log4j.logger.com.apxx=ALL 
```

例外是：

```
log4j:ERROR Error occured while sending e-mail notification.
javax.mail.MessagingException: Unknown SMTP host: fakeHost;
  nested exception is:
    java.net.UnknownHostException: fakeHost
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1280)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:370)
    at javax.mail.Service.connect(Service.java:297)
    at javax.mail.Service.connect(Service.java:156)
    at javax.mail.Service.connect(Service.java:105)
    at javax.mail.Transport.send0(Transport.java:168)
    at javax.mail.Transport.send(Transport.java:98)
    at org.apache.log4j.net.SMTPAppender.sendBuffer(SMTPAppender.java:416)
    at org.apache.log4j.net.SMTPAppender.append(SMTPAppender.java:256)
    at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)
    at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)
    at org.apache.log4j.Category.callAppenders(Category.java:206)
    at org.apache.log4j.Category.forcedLog(Category.java:391)
    at org.apache.log4j.Category.log(Category.java:856)
    at org.apache.commons.logging.impl.Log4JLogger.error(Log4JLogger.java:245)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.lang.Class.newInstance0(Class.java:355)
    at java.lang.Class.newInstance(Class.java:308)
    at com.sun.faces.config.ManagedBeanFactoryImpl.newInstance(ManagedBeanFactoryImpl.java:275)
    at com.sun.faces.application.ApplicationAssociate.createAndMaybeStoreManagedBeans(ApplicationAssociate.java:512)
    at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:82)
    at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:54)
    at com.sun.faces.el.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:64)
    at org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:69)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:112)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)
    at com.sun.facelets.el.ELText$ELTextVariable.toString(ELText.java:174)
    at com.sun.facelets.compiler.AttributeInstruction.write(AttributeInstruction.java:49)
    at com.sun.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:39)
    at com.sun.facelets.compiler.UILeaf.encodeAll(UILeaf.java:149)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:892)
    at com.sun.facelets.FaceletViewHandler.renderView(FaceletViewHandler.java:592)
    at org.ajax4jsf.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:100)
    at org.ajax4jsf.application.AjaxViewHandler.renderView(AjaxViewHandler.java:176)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:106)
    at com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:251)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:144)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:245)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:206)
    at org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)
    at org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388)
    at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:145)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)        
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:470)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.UnknownHostException: fakeHost
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:195)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:529)
    at java.net.Socket.connect(Socket.java:478)
    at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:232)
    at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:189)
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1250)
    ... 69 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:22:15.610

问题出在 log4j 源代码中：在 org.apache.log4j.helpers.LogLog 类中。问题：System.err.println(ERR_PREFIX+msg);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T06:11:57.537

```
 log4j.appender.FileAppender.MaxBackupIndex=10 
```

add this line to your log4j.properties file. It may help you.

# javascript - js动画块，里面有图像

> ID：12157181
> 
> 赞同：0
> 
> 时间：2012-08-28T10:15:25.730
> 
> 标签：javascript, css, jquery-animate

有一个块，里面有另一个相对块，它有一个父块样式的背景（比如在一张图片上）。当我试图改变我的块的宽度时，相对块消失了。

[图片](http://storage1.static.itmages.ru/i/12/0828/h_1346148569_9296399_c500fa8e0e.png)

```
<!DOCTYPE html>

<html>
<head>
<title></title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<style>
 #button
{
    width: 195px ;
    height: 60px;
    display: inline-block;
    position: relative;
    background: url('/res/bg.png') repeat-x;
}
#button div#arrow
{
    background: url('/res/Arrow.png') no-repeat;
    width: 30px;
    height: 60px;
    display: block;
    position: absolute;
    top:0px;
    right: -30px;
}

</style>
</head>
<body>

<div id='button'>
<div id='arrow'></div> 
</div>
</body>
</html> 
```

忘记了动画的代码： $('#button').animate({width:'-=120px'}, 2000)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:38:20.230

设置`overflow: visible !important`在父级上`div`。
演示：http: [//jsfiddle.net/P5CHX/2/](http://jsfiddle.net/P5CHX/2/)

# c# - 搜索嵌套列表

> ID：12157184
> 
> 赞同：-3
> 
> 时间：2012-08-28T10:15:34.337
> 
> 标签：c#, generic-list, nested-generics

我有这个数据结构：

```
class Conference 
{
    private List<List<string>>_orgs;
    public List<List<string>> Orgs
    {
       set { _orgs = value; } get { return _orgs; }
    }
} 
```

此集合中的数据：

```
List<string> sublist = new List<string>();
sublist.Add("university");
sublist.Add("organization");

List<List<string>> list = new List<List<string>>();
list.Add(sublist); 
```

然后：

```
Conference c = new Conference();
c.Orgs = list; 
```

我收集了会议对象：

```
List<Conference> listConferences = new List<Conference>(); 
listConferences.Add(c); 
```

我想搜索一个类似的字符串`"uni"`并找到具有类似 .org 的会议集合`"uni"`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:41:46.797

请在下面使用此代码；而不是第三个，您可以使用自己的会议列表。您现在可以使用类似关键字。

```
List<string> first = new List<string>();
            first.Add("University");
            first.Add("Standard");

            List<List<string>> second = new List<List<string>>();
            second.Add(first);

            List<List<List<string>>> third = new List<List<List<string>>>();
            third.Add(second);

            var e = third.Find(delegate(List<List<string>> r) 
                        { 
                            bool isValid = false; 
                            if(r.Count > 0)
                            { 
                                foreach(List<string> s in r)
                                { 
                                    if(s.Count > 0 ) 
                                    { 
                                        isValid = s.FindAll(delegate(string t){ return t.StartsWith("uni", StringComparison.OrdinalIgnoreCase);}).Count > 0;
                                    }
                                }
                            }
                            return isValid;
                        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:22:06.690

你可以这样做：

```
var selection = listConferences
                .Where(x => x.Orgs.SelectMany(y => y).Any(y => y.Contains("uni")))
                .ToList(); 
```

笔记：

根据您的需要，尾随`ToList()`可能不是必需的（例如，如果您仅在可以跳过它时迭代选择）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T16:48:53.883

完成，使用 linq 再进行一次锻炼。您应该对此感到满意：

```
var univ = from p in c.Orgs
                       select p.FindAll(r => r.FindAll(s => s.StartsWith("univ", StringComparison.OrdinalIgnoreCase))); 
```

# jstl - 使用字符串 + int 键在 EL 中访问 HashMap

> ID：12157188
> 
> 赞同：2
> 
> 时间：2012-08-28T10:15:44.787
> 
> 标签：jstl, el

有没有办法使用字符串和 int 值连接的键来访问 EL 中的 HashMap 元素。像这样的东西：

```
<c:forEach begin="1" end="5" var="current">
   <c:out value="${myHashMap['elem-' + current]}"/>
</c:forEach> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T11:12:40.333

此代码可以完成所需的行为

```
<c:forEach begin="1" end="5" var="current">
   <c:set var="key" value="elem-${current}" />
   <c:out value="${myHashMap[key]}"/>
</c:forEach> 
```

# css - Css 没有标题填满所有行

> ID：12157190
> 
> 赞同：0
> 
> 时间：2012-08-28T10:15:48.867
> 
> 标签：css, sass

我在 css/sass 中有一个如下所示的标题类：

```
 .title
    display: block
    float: left
    margin: 25px 10px 25px -20px
    padding: 11px 10px
    font-size: 22px
    font-weight: bold
    letter-spacing: 5px
    color: red
    background: #5279b5
    -webkit-border-radius: 11px
    -moz-border-radius: 11px
    border-radius: 18px
    border-top-left-radius: 0
    border-bottom-left-radius: 0 
```

问题是，我添加了标题，但是例如，如果我添加了一个新表单，该表单就在标题旁边开始。我需要所有标题的行都是空的。

一个解决方案是`<br>`在标题之后使用，但这不是我想要的。还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:18:24.840

尝试`clear: both;`或/和`margin-bottom: 10px;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T08:50:58.197

**解决方案**

我删除`float:left`并添加了`display: inline-block`，所以背景不会填满所有行，只有文本部分。

**PS**：谢谢大家，当我有足够的代表时，我会投票给你。

# iphone - 如何在 UIPickerView 中选择项目时显示 UIAlertView

> ID：12157193
> 
> 赞同：0
> 
> 时间：2012-08-28T10:15:59.013
> 
> 标签：iphone, ios5

在我的选择器视图中，我有一个“自定义”选项，它应该弹出一个 UIAlertView 供用户输入新值，该值保存在选择器的 plist 源中以供将来参考。xxxEditingDidBegin 被重复调用（永无止境）。

我认为它是因为我的 UIAlertView 正在触发选择器关闭。

我应该怎么做？

```
- (IBAction)serviceTypeFieldEditingDidEnd:(UITextField *)sender 
{
    UIPickerView *picker = [sender.inputView.subviews objectAtIndex:0];
    NSString *selText = [serviceTypeArray objectAtIndex: [picker selectedRowInComponent:0]];
    sender.text = selText;

    if (NSOrderedSame==[selText compare:@"Custom"])
    {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Custom Role" 
                                                            message:@"Enter Role Title" 
                                                           delegate:self 
                                                  cancelButtonTitle:@"Cancel" 
                                                  otherButtonTitles:@"Ok", nil];
        alertView.alertViewStyle = UIAlertViewStylePlainTextInput;
        [alertView show]; 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:48:56.377

我这样修

```
- (void)pickerView:(UIPickerView *)pickerView  didSelectRow:(NSInteger)row 
                                                inComponent:(NSInteger)component 
{
    NSString *rowString = [serviceTypeArray objectAtIndex:row];

    if ([rowString compare:@"Custom"] == NSOrderedSame)
    {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Custom Role" 
                                                            message:@"Enter Role Title" 
                                                           delegate:self 
                                                  cancelButtonTitle:@"Cancel" 
                                                  otherButtonTitles:@"Ok", nil];
        alertView.alertViewStyle = UIAlertViewStylePlainTextInput;
        [alertView show]; 
    }
    else 
    {
        _serviceType.text = rowString;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:28:20.990

实现方法如

```
- (IBAction)doSelectDate:(UIDatePicker *)sender 
{
UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"Hi" message:@"AlertView is shwoing" delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];
        [alert show];
        [alert release];
} 
```

并将上述方法与 UIPickerView 的 ValueChanged 事件连接起来；

# java - JRebel 和 Oracle ADF、JDeveloper

> ID：12157200
> 
> 赞同：0
> 
> 时间：2012-08-28T10:16:38.513
> 
> 标签：java, oracle, jrebel, hotdeploy

你们中有人有过 JRebel（热部署）的经验吗？如果是这样，您有使用 JRebel + Oracle ADF (JDeveloper) 的经验吗？

我们正在考虑购买一些许可证，但只试用了 14 天（免费期）

还有其他选择吗？有没有人对 JRebel 或 Zeroturnaround 团队有不好的体验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:16:52.980

JRebel ADF 集成允许重新加载 ADF 页面定义文件，它还修补了 JSF 生命周期的 ADF 实现，允许 Mojarra 插件完成其余工作。

如果您已经对 JRebel 进行了 14 天的评估，它对您有用还是需要针对您的特定用例进行更多集成？如果出现问题，只需提交功能请求/错误报告。

还有[用于 JDeveloper 的 JRebel 插件，](http://manuals.zeroturnaround.com/jrebel/ide/jdeveloper.html)旨在简化设置

# javascript - 在javascript中制作类功能的正确方法

> ID：12157201
> 
> 赞同：2
> 
> 时间：2012-08-28T10:16:41.727
> 
> 标签：javascript, class, methods

我有以下代码：

```
function Class () {
  this.method = function () {
    alert('method');
  };
}

new Class().method(); 
```

它工作正常，但据我了解，将为每个新对象创建该函数。有正确的方法吗？

​</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:17:21.870

将实例变量的初始化放在 Class 函数中，并将共享方法和变量放在原型属性中：

```
function Class (var1, var2) {
  this.var1 = var1;
  this.var2 = var2;
}

Class.prototype.method = function () {
  alert(this.var1 + ' ' + this.var2);
};

new Class('var1', 'var2').method();
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:27:08.123

我的方法与 Speransky 的方法几乎相同，但我重新声明了原型对象，而不是直接向它添加方法。

```
// Declare the Constructor function.
function MyClass (name, age) {

    // Assign any member properties here.
    this._name = name;
    this.age = age;
}

// Redefine the prototype object to add methods.
MyClass.prototype = {

    // Re-point the Constructor function as it will be overwritten.
    constructor: MyClass,

    // Custom method which all instances of `MyClass` will inherit.
    sayHello: function () { 
        return "My name is " + this._name + ", how do you do?";
    }
}; 
```

用法：

```
var foo = new MyClass("Dave", 22);
foo.sayHello();     // "My name is Dave, how do you do?"
foo.age;            // 22 
```

如果你想将`MyClass`原型指向另一个对象（设置一个简单的继承模型），那么你可以使用一个 mixin，类似于 Underscore 的[`extend`](http://underscorejs.org/#extend)方法：

```
function BaseClass(name) {
    this._name = name;
}

BaseClass.prototype = {
    constructor: BaseClass,

    sayHello: function () { 
        return "My name is " + this._name + ", how do you do?";
    }
}

class MyClass (name, age) {
    // Call the BaseClass constructor function in the context of `this`
    BaseClass.call(this, name);

    this.age = age;
}

// Mixin the BaseClass's protptype into the MyClass prototype and delcare
// the new methods.
_.extend(MyClass.Prototype, BaseClass.prototype, {
    constructor: MyClass,

    getAge: function () { 
        return this.age;
    }
}); 
```

# delphi - 如何在 Delphi 的主/从关系中查找 DataSet 是否为主？

> ID：12157202
> 
> 赞同：6
> 
> 时间：2012-08-28T10:16:42.173
> 
> 标签：delphi, master-detail, tdataset

我想创建一个“复制记录”操作，当调用该操作时，会在任何`TDataSet`后代中复制当前记录。如何确定数据集是否是主/从关系的主数据集？使用`TClientDataSet`它相当容易，但我需要将此操作用于`TDataSet`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T11:03:58.917

你应该打电话`TDataSet`。`GetDetailDataSets`方法。如果列表不为空，则此数据集是列表中数据集的主数据集。例如：

```
var
  oDetails: TList;
  lIsMaster: Boolean;
...
  oDetails := TList.Create;
  try
    myDataSet.GetDetailDataSets(oDetails);
    lIsMaster := oDetails.Count > 0;
  finally
    oDetails.Free;
  end; 
```

# java - 没有容器的 JAX-RS

> ID：12157203
> 
> 赞同：2
> 
> 时间：2012-08-28T10:16:43.630
> 
> 标签：java, web-services, interop, jnlp, browser-extension

这听起来像是一个奇怪的请求，但是否有可能拥有一个没有容器的 RESTeasy - jax-rs 应用程序？

我问这个的原因是因为我需要一个浏览器扩展和一些 java 代码来有效地通信。

我曾考虑过套接字，但这会让我完成实现所有通信细节的工作。

我尝试过 liveconnect，但这在嵌入式小程序世界之外不起作用。

所以我只剩下网络服务了。

现在的事情是浏览器扩展正在启动一个应该启动 java 应用程序的 jnlp 我真的不希望 main() 实例化一个码头浏览器......

欢迎任何想法！

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:23:18.203

对于那些希望获得有关带有 RestEasy 库的嵌入式容器的信息的人，请检查：[http ://docs.jboss.org/resteasy/docs/3.0-beta-3/userguide/html_single/#RESTEasy_Embedded_Container](http://docs.jboss.org/resteasy/docs/3.0-beta-3/userguide/html_single/#RESTEasy_Embedded_Container)

# java - 何时使用 Java SOAP API

> ID：12157204
> 
> 赞同：2
> 
> 时间：2012-08-28T10:16:47.570
> 
> 标签：java, web-services, jax-ws

*编辑问题以提高清晰度。*

我正在尝试学习基于 SOAP 的 Java Web 服务。我使用 @WebService 注释创建了一个简单的 Web 服务。我在本地机器上发布了它，并在本地机器上使用了该服务。我发现 WSDL 文件是自动生成的，并且 SOAP 消息在“幕后”。我只能通过 TCP/IP 监视器跟踪 SOAP 消息。

后来我发现 Java SOAP API 提供了自己创建 SOAP 消息并使用 MessageFactory 和 SOAPMessage 等类/接口传输它们的选项。

我的问题是，如果 WSDL 和 SOAP 消息是自动生成和处理的，为什么我们需要 SOAP 处理程序来使用 Java SOAP API 手动创建和发送 SOAP 消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:10:35.763

> 我的问题是，如果 WSDL 和 SOAP 消息是自动生成和处理的，为什么我们需要 SOAP 处理程序来使用 Java SOAP API 手动创建和发送 SOAP 消息？

因为您可能希望更好地控制 SOAP 通信、构建 SOAP 消息等。当提到 MessageFactory 和 SOAPMessage 时，您实际上指的是[SAAJ](http://en.wikipedia.org/wiki/SAAJ)。与 JAX-WS 相比，SAAJ 在较低级别上运行，具有这种方法带来的所有优点和缺点。从[Java 摇摆](http://javarocking.blogspot.com/2011/06/jax-ws-example-saaj-example.html)：

> **JAX-WS 与 SAAJ**
> 
> 从实际的角度来看，使用 SAAJ 意味着您不使用诸如“wsimport”或“wsdl2java”之类的工具。这些是与 JAX-WS 一起使用的，并且是客户端可以生成域对象并几乎就像根本不使用 Web 服务一样操作的方法。使用 SAAJ，您没有服务的域视图。你真的在和管道打交道。使用 JAX-WS 进行开发可以更快更容易，并且通常不会导致您失去任何控制。但是 JAX-WS 是一个便利层，知道如果您使用 SAAJ 的某些命令，您将准备好执行 WSDL 接口要求您做的任何事情，这会让人感到欣慰。

就个人而言，我总是会选择 JAX-WS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:17:45.187

You don need to use Java SOAP API explicitly when you use JAX-WS. But you choose to write SOAP messaging applications directly, then these APIs come into picture.

An hypothetical example would be that you want more control over the SOAP message parsing. You do not want to process the entire XML but a part of it using xpath.

# objective-c - ruby 运动隐藏 UISplitViewController 上的圆角

> ID：12157206
> 
> 赞同：0
> 
> 时间：2012-08-28T10:16:53.750
> 
> 标签：objective-c, uisplitviewcontroller, rubymotion

我找到了我需要这样做的 Objective-c 但是你将如何用 ruby​​ 重写它？

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{  
    [self performSelector:@selector(fixRoundedSplitViewCorner) withObject:NULL afterDelay:0];
}

-(void) fixRoundedSplitViewCorner {  
    [self explode:[[UIApplication sharedApplication] keyWindow] level:0];  
}

-(void) explode:(id)aView level:(int)level 
{   
    if ([aView isKindOfClass:[UIImageView class]]) {
        UIImageView* roundedCornerImage = (UIImageView*)aView;
        roundedCornerImage.hidden = YES;
    }
    if (level < 2) 
    {
        for (UIView *subview in [aView subviews]) {
            [self explode:subview level:(level + 1)];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:40:43.040

像这样的东西怎么样：

```
def didRotateFromInterfaceOrientation(fromInterfaceOrientation)
# you can just skip calling performSelector and call the method directly
#   self.performSelector('fixRoundedSplitViewCorner', withObject:nil, afterDelay:0)
    self.fixRoundedSplitViewCorner()
end

def fixRoundedSplitViewCorner
    self.explode(UIApplication.sharedApplication.keyWindow, level:0)
end

def explode(aView, level:level)
    if aView.class == UIImageView
        aView.hidden = true
    end
    if level < 2
        for subview in aView.subviews
            self.explode(subview, level:(level + 1))
        end
    end
end 
```

# c# - 连接数据库时出错

> ID：12157209
> 
> 赞同：0
> 
> 时间：2012-08-28T10:16:59.297
> 
> 标签：c#, error-handling, sql-server-ce, database-connection

以下代码在执行过程中出错。

```
string connectionString = "Data Source=D:\\Base.sdf;Persist Security Info=False";
SqlConnection sqlConnection = new SqlConnection(connectionString)) 
sqlConnection.Open(); 
```

错误是：

> *与 SQL Server 建立连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 未配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 定位服务器/指定实例时出错）*

我试过`SqlCeConnection`了，`SqlConnection`但是编译器找不到那个类的库。

请帮忙解决这个问题。

*   操作系统：Windows 7
*   工具：Microsoft Visual Studio 2010
*   语言：C#

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:22:30.447

您的数据库是 Sql Server 精简版，您必须使用：

```
SqlCeConnection sqlConnection = new SqlCeConnection(connectionString); 
```

从这里下载库[Microsoft SQL Server Compact 4.0](http://www.microsoft.com/en-us/download/details.aspx?id=17876)

1.  添加对`System.Data.SqlServerCe.dll`项目的引用
2.  添加这个 using 指令使用`System.Data.SqlServerCe;`
3.  使用`SqlCeConnection`代替`SqlConnection`

# javascript - 跨浏览器嵌入 VLC 插件

> ID：12157210
> 
> 赞同：3
> 
> 时间：2012-08-28T10:17:01.670
> 
> 标签：javascript, html, rtsp, vlc

我以这种方式为 Google Chrome 嵌入了 vlc 插件：

```
<embed 
  type='application/x-vlc-plugin'
  pluginspage='http://www.videolan.org'
  version='VideoLAN.VLCPlugin.2'
  width='800'
  height='600'
  id='vlc'
  loop='yes'
  autoplay='yes'
  target='rtsp://127.0.0.1:8554/realtime_1db07ff1-c5f9-4597-abf6-0d442454d06c'>
</embed> 
```

但这种方法不适用于 Internet Explorer。

是否有任何通用方法可以将此播放器嵌入所有浏览器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T04:33:31.577

I posted examples for both IE and Mozilla on the VideoLan forum a while ago [here](http://forum.videolan.org/viewtopic.php?f=16&t=97518#p325524).

I wrote myself a switch that distinguishes between IE and "the rest" and embeds either one control for IE, or another one for Mozilla and Chrome.

In your particular case, the code for IE should work like this:

```
<object
  classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921" 
  codebase="http://download.videolan.org/pub/videolan/vlc/last/win32/axvlc.cab"
  id="vlc"
  name="vlc"
  class="vlcPlayer"
  events="True">
    <param name="Src" value="rtsp://127.0.0.1:8554/realtime_1db07ff1-c5f9-4597-abf6-0d442454d06c" />
    <param name="ShowDisplay" value="True" />
    <param name="AutoLoop" value="True" />
    <param name="AutoPlay" value="True" />
 </object> 
```

You can find further information in the VideoLan Wiki [here](http://wiki.videolan.org/Documentation%3aWebPlugin#Introduction%3a_Building_Web_pages_with_Video).

The VLC cab file unfortunately isn't available in this location anymore btw. The post I referenced above is part of a whole thread in the VLC forum about why it's not being provided anymore.

# haskell - Haskell 多态解构

> ID：12157211
> 
> 赞同：4
> 
> 时间：2012-08-28T10:17:05.457
> 
> 标签：haskell, types, polymorphism

我开始使用[Juicy Pixels](http://hackage.haskell.org/package/JuicyPixels)库并且在解构方面遇到了一些问题。

有类型：

```
data DynamicImage =
    ImageY8   (Image Pixel8)
    | ImageYA8  (Image PixelYA8)
    | ImageRGB8 (Image PixelRGB8)
    | ImageRGBA8 (Image PixelRGBA8) 
    | ImageYCbCr8 (Image PixelYCbCr8) 
```

其中 Pixel* 是**Pixel**类的实例

有一些函数适用于**Image a**类型，我希望从**DynamicImage中提取****Image a**，但我不能

 **当我尝试做类似的事情时

```
img :: (Pixel a) => DynamicImage -> Image a
img (ImageY8 i) = i
img (ImageYA8 i) = i  
img (ImageRGB8 i) = i
img (ImageRGBA8 i) = i  
img (ImageYCbCr8 i) = i 
```

解释器抛出一个错误，比如

```
Couldn't match type `PixelYCbCr8' with `GHC.Word.Word8'
Expected type: Image b
  Actual type: Image Pixel8
In the expression: i
In an equation for `img': img (ImageY8 i) = i 
```

有没有其他方法可以提取**图像**数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:43:35.183

您的方法不起作用，因为`img`承诺的类型签名会为*每个* `a`人提供一个 Image ，而不仅仅是自己选择的一个人`img`。

一种可能性是更改类型签名以也采用将处理多态图像的函数，并使用它`RankNTypes`来允许：

```
withImg :: DynamicImage -> (forall a. Pixel a => Image a -> b) -> b
withImg (ImageY8 i) f = f i
withImg (ImageYA8 i) f = f i  
withImg (ImageRGB8 i) f = f i
withImg (ImageRGBA8 i) f = f i  
withImg (ImageYCbCr8 i) f = f i 
```

这确保了传递给的函数`withImg`将接受任何`Image`作为参数，而不需要任何关于它的进一步信息。**

# java - XML 解析错误：找不到元素位置：moz-nullprincipal（不适合 ajax）

> ID：12157215
> 
> 赞同：4
> 
> 时间：2012-08-28T10:17:31.483
> 
> 标签：java, jquery, html, ajax, tapestry

我知道这个问题已经被问过很多次了，从我对这个错误的研究来看，它似乎是因为跨域 ajax 只允许用于 JSONP，而不是 XML。但是我很难找到这个电话是在哪里进行的，所以我无法准确找到问题所在。在我添加以下代码之前一切正常

```
@EventListener(targets="licensingStatus", events="onchange")
public void onLicenseStatusChange(IRequestCycle cycle){
    cycle.getResponseBuilder().updateComponent("licenceAuthRequiredDiv");
} 
```

这是上面代码正在更新的组件

```
<div jwcid="licenceAuthRequiredDiv@Any">
      <span jwcid="@If" condition="ognl:company.licensingStatus == @com.fexco.wuams.valueobject.LicensingStatus@Pass && inApprovalMode()" renderTag="literal:false">
            <input jwcid="licensingApprovalDateRequired@DatePicker" disabled="ognl:disabled || isLicensingApprovalDateDisabled()"
            value="ognl:company.licensingApprovalDate" displayName="message:company.licensingApprovalDate" validators="validators:maxDateToday,required" />
     </span>
     <span jwcid="@Else" renderTag="literal:false">
            <input jwcid="licensingApprovalDate@DatePicker" disabled="ognl:disabled || isLicensingApprovalDateDisabled()"
            value="ognl:company.licensingApprovalDate" displayName="message:company.licensingApprovalDate" validators="validators:maxDateToday" />
      </span>
</div> 
```

使用 Firebug，当它被击中并通过并发出 POST 和 GET 请求时，我在 POST 上得到以下信息：`302 Moved Temporarily`并且 GET 请求只是挂起以下内容：`XML Parsing Error: no element found Location: moz-nullprincipal:{a752d6c1-8e61-4faf-9084-97124f7b3596} Line Number 1, Column 1:`

我知道这没什么可合作的，所以如果您需要更多信息，请询问，但是任何人都可以为我阐明这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-19T17:00:21.140

当返回的内容类型是 XML，但内容为空时，Firefox 会报错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T07:32:44.710

可能是 302 将您重定向到另一个域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-22T21:18:22.330

由于jQuery请求中的dataType参数，我遇到了这个问题：[ajax响应错误（XML解析错误：找不到元素位置：moz-nullprincipal）](https://stackoverflow.com/questions/16932930/ajax-response-errorxml-parsing-error-no-element-found-location-moz-nullprinci)？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-23T11:24:00.110

检查未关闭的 XML 标记，firefox 似乎报告现有文件中的无效 XML 与不存在的 xml 文件**相同。**Chrome 在网络面板中的检查器报告了更多信息：“第 2 行第 1 列的错误：文档末尾的额外内容”，有经验的开发人员应该将此视为未关闭的标签问题。

Firefox 报告：“第 2 行，第 1 列：... XML 解析错误：找不到根元素”

# vbscript - 用于列出 Outlook 配置文件信息的 VBS 脚本

> ID：12157216
> 
> 赞同：0
> 
> 时间：2012-08-28T10:17:35.433
> 
> 标签：vbscript, outlook, pst

我在 Internet 上找到了一些列出 Outlook 配置文件信息的代码，我想要它，但它给出了错误：Type mismatch:'[string: "A"]'，在第 74 行（代码 800A000D）。我不知道为什么它不起作用。

这是代码：

```
 Option Explicit 
    Const HKEY_CURRENT_USER = &H80000001 
    Const r_PSTGuidLocation = "01023d00" 
    Const r_MasterConfig = "01023d0e" 
    Const r_PSTCheckFile = "00033009" 
    Const r_PSTFile = "001f6700" 
    Const r_keyMaster = "9207f3e0a3b11019908b08002b2a56c2" 
    Const r_ProfilesRoot = "Software\Microsoft\Windows NT\CurrentVersion\Windows Messaging    Subsystem\Profiles" 
    Const r_DefaultProfileString = "DefaultProfile" 
    Dim oReg:Set oReg=GetObject("winmgmts:{impersonationLevel=impersonate}!\\.\root\default:StdRegProv") 
  Dim arrSubKeys, subkey, strValue, i, pstFile, arrPSTs, DefaultProfileName  

  oReg.GetStringValue HKEY_CURRENT_USER,r_ProfilesRoot,r_DefaultProfileString,DefaultProfileName 
  GetPSTsForProfile(DefaultProfileName)  
  '_____________________________________________________________________________________________________________________________ 
 Function GetPSTsForProfile(p_profileName)
 Dim strHexNumber, strPSTGuid, strFoundPST

 oReg.GetBinaryValue HKEY_CURRENT_USER,r_ProfilesRoot & "\" & p_profileName & "\" & r_keyMaster,r_MasterConfig,strValue
 If IsUsableArray (strValue) Then
 For Each i In strValue
 If Len(Hex(i)) = 1 Then 
 strHexNumber = CInt("0") & Hex(i)
 Else
 strHexNumber = Hex(i)
 End If        
 strPSTGuid = strPSTGuid + strHexNumber
 If Len(strPSTGuid) = 32 Then 
 If IsAPST(r_ProfilesRoot & "\" & p_profileName & "\" & strPSTGuid) Then
 Wscript.Echo PSTFileName(r_ProfilesRoot & "\" & p_profileName & "\" & _
 PSTlocation(r_ProfilesRoot & "\" & p_profileName & "\" & strPSTGuid))
 End If    
 strPSTGuid = ""
 End If            
 Next
 End If
 End Function
 '______________ 
  '_____________________________________________________________________________________________________________________________
Function GetSize(zFile) 
Dim objFSO:Set objFSO = CreateObject("Scripting.FileSystemObject")
dim objFile:Set objFile = objFSO.GetFile(zFile)
GetSize = ConvertSize(objFile.Size)
End Function 
'_____________________________________________________________________________________________________________________________
Function ConvertSize(Size) 
Do While InStr(Size,",") 'Remove commas from size     
CommaLocate = InStr(Size,",")     
Size = Mid(Size,1,CommaLocate - 1) & _         
Mid(Size,CommaLocate + 1,Len(Size) - CommaLocate) 
Loop
Dim Suffix:Suffix = " Bytes" 
If Size >= 1024 Then suffix = " KB" 
If Size >= 1048576 Then suffix = " MB" 
If Size >= 1073741824 Then suffix = " GB" 
If Size >= 1099511627776 Then suffix = " TB" 
Select Case Suffix    
Case " KB" Size = Round(Size / 1024, 1)     
Case " MB" Size = Round(Size / 1048576, 1)     
Case " GB" Size = Round(Size / 1073741824, 1)     
Case " TB" Size = Round(Size / 1099511627776, 1) 
End Select
    ConvertSize = Size & Suffix 

End Function
'_____________________________________________________________________________________________________________________________ 
Function IsAPST(p_PSTGuid) 
Dim x, P_PSTGuildValue 
Dim P_PSTCheck:P_PSTCheck=0 
IsAPST=False 
oReg.GetBinaryValue HKEY_CURRENT_USER,p_PSTGuid,r_PSTCheckFile,P_PSTGuildValue 
If IsUsableArray (P_PSTGuildValue) Then
For Each x in (P_PSTGuildValue)
P_PSTCheck = P_PSTCheck + Hex(x) 
Next 
End If 
If P_PSTCheck=20 Then IsAPST=True 
End Function  
'_____________________________________________________________________________________________________________________________
 Function PSTlocation(p_PSTGuid)
 Dim y, P_PSTGuildValue
 oReg.GetBinaryValue HKEY_CURRENT_USER,p_PSTGuid,r_PSTGuidLocation,P_PSTGuildValue
 If IsUsableArray (P_PSTGuildValue) Then
 For Each y In P_PSTGuildValue
 If Len(Hex(y)) = 1 Then
 PSTlocation = PSTlocation & CInt("0") & Hex(y)
 Else
 PSTlocation = PSTlocation & Hex(y)
 End If    
 Next
 End If
 End Function  
'_____________________________________________________________________________________________________________________________ 
 Function PSTFileName(p_PSTGuid)
 Dim z, P_PSTName
 Dim strString : strString = ""
 oReg.GetBinaryValue HKEY_CURRENT_USER,p_PSTGuid,r_PSTFile,P_PSTName
 If IsUsableArray (P_PSTName) Then
 For Each z in P_PSTName
 If z > 0 Then strString = strString & Chr(z)
 Next
 End If
 PSTFileName = strString
 End Function  
'_________________________________________________________________________________________________________
 Function ExpandEvnVariable(ExpandThis) 
 Dim objWSHShell:Set objWSHShell = CreateObject("WScript.Shell") 
 ExpandEvnVariable = objWSHShell.ExpandEnvironmentStrings("%" & ExpandThis & "%") 
 End Function
 '_________________________________________________________________________________________________________ 
 Function IsUsableArray(rvnt)'-- Use this function to test for a Null, Empty or an undimensioned array.'-- Useful b/c some interfaces can hold properties for which if they have a'-- value will be an Array but may also be Null or an undimensioned Array.
'-- It assumes that a Null or Empty could potentially be an array but not yet dimensioned. '-- It returns -1 if it is passed a string, long, etc...'-- It returns 0 for an empty array or the number of elements in the first dimension.
 IsUsableArray = 0
 If (VarType(rvnt) And 8192) = 8192 Then 
 IsUsableArray = UBound(rvnt) - LBound(rvnt) + 1 
 Else
 If Not (IsEmpty(rvnt) Or IsNull(rvnt)) Then IsUsableArray = -1 
 End If
 End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:29:02.627

如果我更正第 8 行的额外空间（Windows 消息子系统），该脚本可以在我的系统上运行。它提供的内容是一个大脚本，请参阅此处查看一个较小的脚本，它使用免费下载库 Redemption 在[http:/ /www.dimastr.com/redemption/home.htm](http://www.dimastr.com/redemption/home.htm)这应该是 CDO。

```
set Session = CreateObject("Redemption.RDOSession")
const skUnknown = 0, olStoreANSI = 1, olStoreUnicode = 2, skPrimaryExchangeMailbox = 3, skPublicFolders = 5, skDelegateExchangeMailbox = 4

Session.Logon
for each Store in Session.Stores
  if (Store.StoreKind = olStoreANSI) then
    wscript.echo Store.Name & " - " & Store.PstPath & " " & Store.Name
  elseif (Store.StoreKind = olStoreUnicode) Then
    wscript.echo Store.Name & " - " & Store.PstPath
  ElseIf (Store.StoreKind = skPrimaryExchangeMailbox) or (Store.StoreKind = skDelegateExchangeMailbox) or (Store.StoreKind = skPublicFolders) Then
    wscript.echo Store.Name & " - " & Store.ServerDN
  Else 
    wscript.echo Store.Name & " - "  & Store.StoreKind
  End If
next 
```

# html - 如何在 Windows Mobile 中禁用缩放？

> ID：12157219
> 
> 赞同：1
> 
> 时间：2012-08-28T10:17:39.727
> 
> 标签：html, internet-explorer, windows-phone-7

是否有某种方法可以禁用 Windows Mobile 智能手机的缩放功能？例如 HTC 泰坦。

我在我的头 html 部分有这个：

```
<meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;' name='viewport' /> 
```

但我仍然可以放大和缩小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:12:39.280

```
<meta name="viewport" content="width=device-width" /> 
```

您在问题中的设置是正确的，并且可以在我的诺基亚 Lumia 900 (Tango) 和 Dell Venue Pro (Mango) 上测试的 Windows Phone 上运行。

如果您在使用动态视口设置时遇到问题，可以尝试直接设置分辨率。

```
<meta name="viewport" content="width=480" /> 
```

参考：[Windows 团队博客：Windows Phone 视口](http://windowsteamblog.com/windows_phone/b/wpdev/archive/2011/03/14/managing-the-windows-phone-browser-viewport.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T10:19:32.510

```
<meta content='True' name='HandheldFriendly' />
<meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;' name='viewport' />
<meta name="viewport" content="width=device-width" /> 
```

# c# - 在服务堆栈中发送 xml 数组

> ID：12157226
> 
> 赞同：1
> 
> 时间：2012-08-28T10:17:58.117
> 
> 标签：c#, servicestack

我目前正在使用 ServiceStack 执行以下操作以将一些 xml 发布回服务器：

```
<Server xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <UserName>Bob</UserName>
    <UserGroups xmlns:d3p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
       <d3p1:string>History</d3p1:string>
       <d3p1:string>Geography</d3p1:string>
     </UserGroups>
</Server> 
```

以上工作，但是我如何做到这一点：

```
<Server xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <UserName>Bob</UserName>
    <UserGroups>
       <UserGroup>History</UserGroup>
       <UserGroup>Geography</UserGroup>
     </UserGroups>
</Server> 
```

我努力了：

```
[CollectionDataContract(ItemName = "UserGroup")]
public partial class ArrayOfStringUserGroup : List<string>
{
    public ArrayOfStringUserGroup()
    {
    }

    public ArrayOfStringUserGroup(IEnumerable<string> collection) : base(collection) { }
    public ArrayOfStringUserGroup(params string[] args) : base(args) { }
} 
```

我在帖子中的 dto 包含以下内容：

```
 [DataMember(Name = "UserGroups", Order = 3)]
  public ArrayOfStringUserGroup UserGroups { get; set; } 
```

但是我将 UserGroups 作为 UserGroupDto 的空数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:33:07.917

这正是你想要的。

```
Server s = new Server();
s.UserName = "Bob";
s.UserGroups = new List<string>();
s.UserGroups.Add("History");
s.UserGroups.Add("Geography");

StringWriter stream = new StringWriter();
XmlWriter writer = 
            XmlTextWriter.Create(
              stream,
              new XmlWriterSettings() { OmitXmlDeclaration = true,Indent = true }
            );

XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
ns.Add("i", "http://www.w3.org/2001/XMLSchema-instance");

XmlSerializer xml = new XmlSerializer(typeof(Server));
xml.Serialize(writer,s,ns);

var xmlString = stream.ToString(); 
```

* * *

```
public class Server
{
    public string UserName;
    [XmlArrayItem("UserGroup")]
    public List<string> UserGroups;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:53:47.330

您是否只想删除冗余/重复的 XML 命名空间？

如果是这样，则应确保所有 DTO 类型共享相同的单个命名空间，`Config.WsdlServiceNamespace`如果要从默认命名空间更改它，则该命名空间应匹配：`http://schemas.servicestack.net/types`。

这可以通过使用`[assembly:ContractNamespace]`通常在 DTO 项目的 AssemblyInfo.cs 文件中定义的属性轻松完成，这是在 ServiceStack.Examples 项目中完成的方式：

```
[assembly: ContractNamespace("http://schemas.servicestack.net/types",
           ClrNamespace = "ServiceStack.Examples.ServiceModel.Operations")]
[assembly: ContractNamespace("http://schemas.servicestack.net/types",
           ClrNamespace = "ServiceStack.Examples.ServiceModel.Types")] 
```

取自 ServiceStack 的[SOAP 支持 wiki 页面](https://github.com/ServiceStack/ServiceStack/wiki/SOAP-support)。

# c - 虽然真的不工作

> ID：12157227
> 
> 赞同：-5
> 
> 时间：2012-08-28T10:18:03.633
> 
> 标签：c, printf, graphite

我有以下代码：

```
#include <stdio.h>
#include <time.h>
#include <stdlib.h>
#include <unistd.h>

int main()
{
  time_t result;
  char   hostname[10] = "ws45new";
  char   graphite[10] = "127.0.0.1";
  char   buf[1024];
  int    n = 0;
  int    num = 0;
  int    graphiteport = 2003;

  while (1 == 1)
  {
    result = time(NULL);
    n = n + 1;
    if (n >= 100)
      n = 0;
    printf("\n %d", n);
    // snprintf(buf, sizeof(buf), "echo \"stats.ws45new.test %d %d \" | nc 127.0.0.1 2003", n, result);
    num = sprintf(buf, "echo \"stats.ws45new1.test %d %d \" | nc 127.0.0.1 2003", n, result);
    system(buf);
    printf("\n %s", buf);
    sleep(2);
  }
  return 0;
} 
```

这应该产生类似锯齿信号的东西，仅用于测试。我的问题是，当我运行程序时，它什么也不做。

如果我按 Ctrl-C 停止它，程序将通过 while 循环迭代一次。它应该向石墨服务器发送一些统计数据，我正在使用它来了解石墨是如何工作的。从我所见，它与串联功能有关`sprintf`（`snprintf`也以相同的方式起作用）。

如果我注释掉该行，它可以正常工作并生成我想要的数字（以及纪元），但我需要连接才能将所需的动态信息发送到石墨。

如果有人知道为什么这些连接函数不尊重 while 函数，请告诉我，因为我真的很好奇。此外，我对其他建议持开放态度，但我宁愿不深入，比如创建套接字而不使用 nc 和系统，因为我对 C 语言不是那么好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:23:49.107

程序很可能会卡在系统调用上。

您正在打印没有尾随换行符的文本，因此它将保留在缓冲区中，直到打印换行符，您在`system`调用后执行此操作。

# android - 如何在 Android SDK 中解析 JSON？

> ID：12157228
> 
> 赞同：1
> 
> 时间：2012-08-28T10:18:08.737
> 
> 标签：android, json

> **可能重复：**
> [如何在 Android 中解析 JSON 对象](https://stackoverflow.com/questions/5566669/how-to-parse-a-json-object-in-android)

我有如下 JSON 对象.. 我如何解析对象？

```
{
  "0":
     {
       "productname":"Famous Amos Bite Size Chocolate Chip Cookies - 4 Pack",
       "imageurl":"http://ecx.images-amazon.com/images/I/513j-WyH1GL._SL160_.jpg",
       "producturl":"http://www.searchupc.com/rd.aspx?u=d%2bKvXQ%2fFIfa95xJ38QYLycSjbm5dt4dy3l4IYTYPM3agt4tefTNsMwzWkPWd9gCY%2fEnCdaGVMLsQD%2fO5ZUWbfJyqOuwIWqkLvouDyw5u7VWmda5dK2%2fRTmcAp3%2f1TImmZmtdaNauL74Lj8BkV0r15VeazeDf4Im4Nx%2f5TOuqBUnUXzeNkYrWvlLitV8FDFIkM77UIjZzYZqoQANt0PBNeqh94bzLqFRXpNYPyqc0fLDTHnA9TM2jsbaKVN23UA%2fH",
       "price":"5.95",
       "currency":"usd",
       "saleprice":"",
       "storename":"amazon.com"
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T10:24:35.330

下面的示例演示了如何解析 JSON。[您将在此处](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)获得关于 json 解析的非常清晰的解释。

```
JSONObject myjson = new JSONObject("put you json string here");
JSONArray the_json_array = myjson.getJSONArray("0");
int size = the_json_array.length();
for (int i = 0; i < size; i++) {
JSONObject another_json_object = the_json_array.getJSONObject(i);           
    System.out.println((String) another_json_object.get("productname"));        
    System.out.println((String) another_json_object.get("imageurl"));       
    System.out.println((String) another_json_object.get("producturl"));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T10:22:37.577

Android 提供了[org.json 包](https://developer.android.com/reference/org/json/package-summary.html)，可用于将您的 String 解析为 JSONObject。

您可以使用这行代码来实现这一点：

```
JSONObject json = new JSONObject(myJsonString); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T10:29:41.213

你必须使用`JSONObject`这个。使用以下代码 -

**JSON解析器.java**

```
public JSONObject getJSONFromUrl(String url)  // url is your json url
{

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

} 
```

它将返回`JsonObject`And，使用这个 jsonbobject 我们可以得到数组的结果。

```
// Creating JSON Parser instance
JSONParser jParser = new JSONParser();

// getting JSON string from URL
JSONObject json = jParser.getJSONFromUrl(url);

try {
    // Getting Array of Contacts
    contacts = json.getJSONArray(TAG_CONTACTS);

    for(int i = 0; i < contacts.length(); i++) {

        String product_name = contacts.getString("productname");
        String image_url = contacts.getString("imageurl");
        .....
        .....
        String store_name = contacts.getString("storename");
    }
}catch(JSONException e) 
{
    e.printStackTrace();
} 
```

有关更多信息，请参阅[Android json 教程](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T10:42:02.820

有一个工作示例[YatayatService](https://github.com/iPrayag/Yatayat/blob/master/Yatayat/src/com/yatayat/android/service/YatayatService.java)使用[json 库](https://developer.android.com/reference/org/json/package-summary.html)和自定义[`JsonParser.java`](https://github.com/iPrayag/Yatayat/blob/master/Yatayat/src/com/yatayat/android/utils/JsonParser.java)使用[apache http 库](https://developer.android.com/reference/org/apache/http/package-summary.html)。实现方法是[`getAllRoutes()`](https://github.com/iPrayag/Yatayat/blob/master/Yatayat/src/com/yatayat/android/service/YatayatService.java#L177)。

```
String jsonString = JsonParser.parseJSON(URL);
try {
    JSONObject parentObject = new JSONObject(jsonString);
 } catch (JSONException e) {
    e.printStackTrace();
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T11:49:13.290

试试这个代码

```
 // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    System.out.println("json is "+json);
    System.out.println("Length"+json.length());

    for (int i = 0; i < json.length(); i++) {
        try {
            String atObj = Integer.toString(i);
            System.out.println(atObj);
            JSONObject jObj = json.getJSONObject(atObj);
            System.out.println(jObj.getString("productname"));
            System.out.println(jObj.getString("imageurl"));
            System.out.println(jObj.getString("producturl"));
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

# css - 理解 行为

> ID：12157229
> 
> 赞同：1
> 
> 时间：2012-08-28T10:18:11.007
> 
> 标签：css, html

参考这个[问题](https://stackoverflow.com/questions/2898221/make-div-fill-remainder-of-page-vertically)和接受的答案，我尝试做类似的事情。

```
.Content
{
 position:absolute;
 top:0;
 left:0;
 padding-top:75px;
 width:inherit;
 height:inherit;
}

.Header
{
 position:absolute;
 top:0;
 left:0;
 height:75px;
 width:inherit;
 background-color:Blue;
 text-align:center;
}

<form id="form1" runat="server" style="width:100%;height:100%">
 <div id="Content" class="Content">
  <div id="Header" class="Header">
   <h1 style="color:White">Report Portal</h1>
  </div>
 </div>
</form> 
```

我希望内容区域填满整个页面，仅此而已。但是带有上述 html 的网页会出现垂直滚动条。我该如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:26:53.787

您不应该使标题绝对也删除`padding-top: 75px`.

考虑这个小提琴：[链接](http://jsfiddle.net/aKNB8/)

编辑：更新小提琴：[链接](http://jsfiddle.net/aKNB8/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:27:48.650

您是否在 body 和 hmtl 上将宽度和高度设置为 100%？

此外，填充正在创建一个垂直滚动条，删除它，它将按预期工作。

[http://jsfiddle.net/Kyle_Sevenoaks/MqKXH/](http://jsfiddle.net/Kyle_Sevenoaks/MqKXH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:43:36.950

您已将高度 > 继承为“内容”。

CSS 继承 (http://dorward.me.uk/www/css/inheritance/)

CSS 继承在逐个属性的基础上工作。当应用于文档中的元素时，值为“继承”的属性将使用与该属性的父元素相同的值。

总体而言，“内容”高度已经是从“表单”标签继承的浏览器的 100%。从顶部添加填充后，即“75px”..其总高度变为“浏览器高度 + 75px”。这是滚动页面的原因。

解决方案：1]避免顶部填充到“内容”。给它的内部容器填充 2] 使用样式

```
body, html{
overflow:hidden;
} 
```

# jquery - 是否可以在切换时显示一个 div 并隐藏所有其他 div（三个切换）..？

> ID：12157232
> 
> 赞同：2
> 
> 时间：2012-08-28T10:18:24.220
> 
> 标签：jquery

嘿伙计们，谢谢你在[这个问题](https://stackoverflow.com/questions/11882708/is-it-possible-to-show-one-div-and-hide-all-other-div-on-toggle)上的最后帮助。
现在我想知道如何使用三个切换按钮代替一个切换按钮？
我的html代码是：

```
<div class="layer1">
<span class="heading">Header-1 </span><span class="heading">Header-1 </span><span class="heading">Header-1 </span>
<div class="content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit orem ipsum dolor sit amet, consectetuer adipiscing elit</div>
<span class="heading">Header-2</span><span class="heading">Header-1 </span><span class="heading">Header-1 </span>
<div class="content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit orem ipsum dolor sit amet, consectetuer adipiscing elit</div>
<span class="heading">Header-3</span><span class="heading">Header-1 </span><span class="heading">Header-1 </span>
<div class="content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit orem ipsum dolor sit amet, consectetuer adipiscing elit</div> 
```

和CSS是：

```
.layer1 {
margin: 0;
padding: 0;
width: 300px;
}

.heading {
 margin: 1px;
 color: #fff;
padding: 3px 10px;
cursor: pointer;
position: relative;
background-color:#c30;
}
.content {
padding: 5px 10px;
background-color:#fafafa;
}
p { padding: 5px 0; } 
```

jquery是：

```
jQuery(document).ready(function() {
    jQuery(".content").hide();
    jQuery(".heading").click(function() {
        jQuery(this)
            .next(".content").slideToggle(500)
            .siblings(".content").slideUp(500);
    });
}); 
```

我希望我可以通过单击三个标题按钮中的任何一个来打开 header-1 的子项，
但它不起作用。只有第三个按钮在工作。
我认为我的 jquery 会有一些变化。
帮帮我，我不清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:29:29.593

`.next('.content')`只查看下一个元素，如果匹配 '.content' 则使用它，否则忽略它。`.nextAll`获取它前面的所有下一个元素并将 :first 放在类名之后意味着它只会选择它找到的第一个元素。

```
jQuery(document).ready(function() {
    jQuery(".content").hide();
    jQuery(".heading").click(function() {
        jQuery(this)
            .nextAll(".content:first").slideToggle(500)
            .siblings(".content").slideUp(500);
    });
}); 
```

示例：http: [//jsfiddle.net/KP55t/](http://jsfiddle.net/KP55t/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:02:12.490

```
jQuery(document).ready(function() {
            jQuery(".content").hide();
            jQuery(".heading").click(function() {

                jQuery(this)
                    .nextAll(".content").eq(0).slideToggle(500)
                    .siblings(".content").slideUp(500);
            });
        }); 
```

# c# - 如何管理从字符串到 int 的转换？

> ID：12157233
> 
> 赞同：1
> 
> 时间：2012-08-28T10:18:30.200
> 
> 标签：c#, .net, string, int, type-conversion

代码 ：

```
int TopAttuale = Int32.Parse("1579.998779296875"); 
```

它说

> *System.FormatException：输入字符串的格式不正确。*

但这就是我所拥有的。如何将该字符串转换为 INT（所以 1579，我不关心逗号）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T10:20:18.857

做：

```
(int) double.Parse(inputstring) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T10:20:47.760

听起来您应该`decimal`先解析它，然后再转换为`int`. （我会使用`decimal`而不是`double`因为你真的*有*十进制输入；`decimal`会更准确地表示你的源数据。不过，当你投射它时，它不应该有任何区别。）

```
// Parse using the invariant culture so that it always uses "." as the
// decimal separator
decimal parsed = decimal.Parse(text, CultureInfo.InvariantCulture);
int value = (int) parsed; 
```

或者，查看是否有小数点，如果有，则修剪其后的所有内容，然后解析结果。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-28T10:23:12.767

```
decimal.ToInt32(decimal.Parse("1579.998779296875")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T10:53:05.563

试试这个代码。

```
decimal a= decimal.Parse("1579.998779296875");
a=Math.Floor(a);
int b=(int)a;
Console.WriteLine(b); 
```

它显示 1579。根据需要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T10:33:57.287

您正在尝试将浮点值转换为整数，这直接是不可能的。但如果你必须这样做，而不是先将字符串转换为双精度，然后再将双精度转换为整数。

```
 string str = "1579.998779296875";
        double val = Convert.ToDouble(str);
        int val1 = Convert.ToInt32(val); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T10:34:04.097

尝试[`Decimal.Parse`](http://msdn.microsoft.com/en-us/library/system.decimal.parse.aspx)方法并将其[转换](http://msdn.microsoft.com/en-us/library/ms173105%28v=vs.80%29.aspx)为`int`：

```
int TopAttuale = (int) Decimal.Parse(inputString) 
```

或使用[`Decimal.TryParse`](http://msdn.microsoft.com/en-us/library/9zbda557)方法：

```
string value;
decimal number;

value = "1579.998779296875";
if (Decimal.TryParse(value, out number))
   int result = (int) number;
else
   Console.WriteLine("Unable to parse '{0}'.", value); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-28T10:36:34.770

这只是忽略了小数点后的所有内容。请注意，这不会让您知道字符串是否根本不是数字。

```
public int IntFromString(string str)
{
    int result = 0;

    foreach (char c in str)
    {
        if (!char.IsDigit(c))
        {
            break;
        }

        result = result * 10 + c - '0';
    }

    return result;
} 
```

# wcf - 设置 DataContract 成员的描述

> ID：12157235
> 
> 赞同：2
> 
> 时间：2012-08-28T10:18:48.703
> 
> 标签：wcf, c#-4.0, serialization

我想控制帮助页面上的内容，尤其是有关每个字段的信息。例如，我有这个类：

```
[DataContract(Name = "MH")]
public class MessageHeader 
{
    [DataMember(Name = "I")]
    public Guid Id { get; set; }

    [DataMember(Name = "CI")]
    public Guid ChannelId { get; set; }

    [DataMember(Name = "CR")]
    public double Created { get; set; }

    [DataMember(Name = "CTI")]
    public int ContentTypeId { get; set; }

    [DataMember(Name = "S")]
    public string Subject { get; set; }

    [DataMember(Name = "EC")]
    public bool Encrypted { get; set; }

    [DataMember(Name = "E")]
    public double Expire { get; set; }
} 
```

我试图添加 DescriptionAttribute 但它没有显示在帮助页面上。知道如何为每个字段添加描述吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:24:34.990

您可能正在寻找像[Sandcastle](http://sandcastle.codeplex.com/documentation)这样的文档工具，当前版本[在这里](http://sandcastlestyles.codeplex.com/)。

这会自动根据您的代码和代码注释创建文档文件：

> **项目描述** Sandcastle 通过反映源程序集和可选地集成 XML 文档注释来生成准确的 MSDN 风格的综合文档。沙堡有以下主要特点：
> 
> *   *有或没有作者评论的作品*

为了帮助您入门，这里有一个“ [5 分钟的 Sandcastle 教程：构建 C# 代码文档](http://broadcast.oreilly.com/2010/09/build-html-documentation-for-y.html)”（Andrew Stellman，O'Reilly 社区）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:58:28.020

我从来没有这样做过，但是您可以使用 CustomContractConverter 来增强 WSDL。这是转换器的[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.wsdlcontractconversioncontext.aspx)，它肯定不像属性那么简单，但由于默认情况下没有为 DataContracts 提供描述，这可能是您最好的选择。

# jsp - jsp和sevlet中浏览器的会话过期和返回按钮

> ID：12157236
> 
> 赞同：-1
> 
> 时间：2012-08-28T10:18:48.050
> 
> 标签：jsp, servlets

> **可能重复：**
> [防止用户在注销后返回上一个安全页面](https://stackoverflow.com/questions/4194207/prevent-user-from-going-back-to-the-previous-secured-page-after-logout)

我必须创建一个带有会话的登录和注销页面。现在我必须在一定时间间隔后并单击注销按钮后使会话无效。在会话到期时间和注销操作之后，任何人都不应通过单击浏览器的后退按钮来访问以前的页面，而无需再次登录。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:52:31.603

在文件中设置会话超时`web.xml`：

```
<session-config>
   <session-timeout>30</session-timeout> 
</session-config> 
```

用户登录时输入会话用户的名称：

```
session.setAttribute(userName, "userName"); 
```

并在用户注销时将其杀死：

```
session.removeAttribute("userName"); 
```

创建一个过滤器来验证用户，如下所示：

```
public class AuthorizationFilter extends Filter {

    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)
                                          throws   IOException, ServletException { 

        HttpServletRequest req = (HttpServletRequest) request; 

        HttpSession session = req.getSession(); 

        String userName = (String) session.getAttribute("userName"); 

        if (userName == null) { 
           rejectRedirect();  
        } 

        chain.doFilter(request, response);  
    }

    private void rejectRedirect() {
        response.sendRedirect("/login.jsp"); // or warning page
    }
} 
```

并将此过滤器映射到`web.xml`：

```
<filter> 
   <filter-name>Authorization Filter</filter-name> 
   <filter-class>yourpackage.AuthorizationFilter</filter-class> 
</filter> 
<filter-mapping> 
   <filter-name>Authorization Filter</filter-name> 
   <url-pattern>*.jsp</url-pattern> 
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:09:33.570

```
 public void doFilter(ServletRequest req, ServletResponse res,
            FilterChain chain)
            throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) req;

        HttpServletResponse response = (HttpServletResponse) res;

        HttpSession session = request.getSession();

        String userName = (String) session.getAttribute("loggedVendor");

        if (userName == null)
            response.sendRedirect("index.jsp");

        chain.doFilter(request, response);
    }

    public void init(FilterConfig filterConfig)
            throws ServletException {
        // We can initialize a filter using the init-params here
        // (which we defined in the deployment descriptor - web.xml)
    }

<filter>
    <filter-name>AuthorizationFilter</filter-name>
    <filter-class>AuthorizationFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>AuthorizationFilter</filter-name>
    <url-pattern>*.jsp</url-pattern>
</filter-mapping> 
```

# shell - 将我的 .profile 加载到 SublimeText2

> ID：12157237
> 
> 赞同：0
> 
> 时间：2012-08-28T10:18:55.130
> 
> 标签：shell, environment-variables, sublimetext2

我的 .profile（路径等）、rvm、virtualenv 和其他需要的位中定义了很多东西。我希望在使用 ST2 环境运行东西时将它们传播到所有构建系统和设置（这样东西通过 shell 子进程运行，或者至少做了一些事情来加载所有这些信息）。

我在网上看到的只是我需要修改 ST2 中每种语言的每一个设置，以指向正确的可执行文件和路径，这是我不想忍受的苦差事。有什么方法可以快速将我的 shell 环境加载到 ST2 中？

# php - 如何从命名空间 PHP 调用全局函数类

> ID：12157238
> 
> 赞同：8
> 
> 时间：2012-08-28T10:18:58.600
> 
> 标签：php, namespaces

有什么办法可以避免经常使用反斜杠？

现在，如果我使用命名空间并在其中调用一些全局的东西，我必须使用反斜杠：

```
namespace foo;
$a = new \my\name(); // instantiates "my\name" class
echo \strlen('hi'); // calls function "strlen"
$a = \INI_ALL; // $a is set to the value of constant "INI_ALL" 
```

在那种情况下，命名空间内的代码变得非常丑陋，有什么办法可以避免这种情况？？？

该示例取自该网址：[http ://www.php.net/manual/en/language.namespaces.faq.php](http://www.php.net/manual/en/language.namespaces.faq.php)

但是我的问题是，如果我需要从命名空间调用一些内置类，我必须在名称前使用反斜杠，我可以以某种方式避免它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T10:23:14.427

全局命名空间中的常量和函数不必在前面加上反斜杠。PHP 将回退到它自己的全局命名空间。PHP手册中有一整章解释了这一点：

*   [使用命名空间：回退到全局函数/常量](http://php.net/manual/en/language.namespaces.fallback.php)

> 在命名空间内，当 PHP 在类名、函数或常量上下文中遇到非限定名称时，它会以不同的优先级解决这些问题。类名总是解析为当前的命名空间名。[…] 对于函数和常量，如果命名空间函数或常量不存在，PHP 将回退到全局函数或常量。

# asp.net - ASP.NET LoggedIn 事件 IsAuthenticated = false

> ID：12157241
> 
> 赞同：0
> 
> 时间：2012-08-28T10:19:18.320
> 
> 标签：asp.net

我正在使用带有 LoggedIn 事件的 ASP.NET 4.0 登录控件

```
protected void Login_LoggedIn(object sender, EventArgs e)
{
    if (User.Identity.IsAuthenticated) // return false (why?)
    {
        string name = HttpContext.Current.User.Identity.Name;
    }
    Response.Redirect("Default.aspx");
} 
```

该事件正在被触发，我正在用调试器捕捉它。我遇到的问题是由于某种原因`User.Identity.IsAuthenticated`返回`false`

函数结束并重定向到 后`Default.aspx`，如果我添加`User.Identity.IsAuthenticated`，它会返回`true`。

怎么来的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:22:06.563

您需要记住使用[FormsAuthentication.SetCookie](http://msdn.microsoft.com/en-us/library/sxb3b282)保存下一个 HTTP 请求的身份验证。

来自 MSDN：

> 为提供的用户名创建一个身份验证票证，并将其添加到响应的 cookie 集合中，如果您使用的是无 cookie 身份验证，则将其添加到 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:26:15.900

这是默认行为，请查看此事件的 MSDN 页面：

取自[“备注”部分](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.loggedin.aspx)[重点是我的]：

> **在身份验证提供程序检查用户的凭据并且身份验证 cookie 排队等待在下一个响应中发送到浏览器**之后引发 LoggedIn 事件。在用户通过身份验证后，使用 LoggedIn 事件提供额外的处理，例如访问每个用户的数据。

这就是您`User.Identity.IsAuthenticated=true`在被重定向到 时看到的原因`default.aspx`。

# extjs - 如何使 ExtJs 窗口可按主体拖动？

> ID：12157249
> 
> 赞同：0
> 
> 时间：2012-08-28T10:19:58.503
> 
> 标签：extjs, header, window, draggable, extjs4.1

我们有一个要求，我们需要隐藏窗口的标题，为此我们正在使用

```
header:false 
```

但是如果我们使用 header:false，那么窗口就根本不能被拖动。

因此，无论如何，窗口可以通过主体拖动吗？也就是说，如果标题设置为 false 并且没有显示，那么用户也可以以某种方式拖动窗口。

任何建议任何人。

谢谢您的帮助。

PS：ExtJS 4.1 版

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:19:01.513

您可以创建自己的窗口类来更改拖动的初始化方式，在这里我定义了一个完全符合您要求的窗口类。

```
Ext.define("MyCustomWindowClass", {
   extend: "Ext.window.Window",
   initDraggable: function() {
        var me = this,
            ddConfig;

        if (!me.header) {
            me.updateHeader(true);
        }

        /*
         * Check the header here again. If for whatever reason it wasn't created in
         * updateHeader (we were configured with header: false) then we'll just ignore the rest since the
         * header acts as the drag handle.
         */
        //if (me.header) {
            ddConfig = Ext.applyIf({
                el: me.el//,-Reimius, I commented out the next line that delegates the dragger to the header of the window
                //delegate: '#' + Ext.escapeId(me.header.id)
            }, me.draggable);

            // Add extra configs if Window is specified to be constrained
            /*if (me.constrain || me.constrainHeader) {
                ddConfig.constrain = me.constrain;
                ddConfig.constrainDelegate = me.constrainHeader;
                ddConfig.constrainTo = me.constrainTo || me.container;
            }*/

            /**
             * @property {Ext.util.ComponentDragger} dd
             * If this Window is configured {@link #cfg-draggable}, this property will contain an instance of
             * {@link Ext.util.ComponentDragger} (A subclass of {@link Ext.dd.DragTracker DragTracker}) which handles dragging
             * the Window's DOM Element, and constraining according to the {@link #constrain} and {@link #constrainHeader} .
             *
             * This has implementations of `onBeforeStart`, `onDrag` and `onEnd` which perform the dragging action. If
             * extra logic is needed at these points, use {@link Ext.Function#createInterceptor createInterceptor} or
             * {@link Ext.Function#createSequence createSequence} to augment the existing implementations.
             */
            me.dd = new Ext.util.ComponentDragger(this, ddConfig);
            me.relayEvents(me.dd, ['dragstart', 'drag', 'dragend']);
        //}
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:02:00.780

您是否尝试过设置 Ext.Component 的“可拖动”配置选项？这将直接将您的 Window 设置为可拖动的，此外，请尝试使用“delegate”选项来指定组件的哪个部分将是句柄。[这是文档中的一个示例。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Component-cfg-draggable)

**它从 ExtJs 4 开始可用，所以你很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:10:29.687

这是一个非常愚蠢的旁路：

```
Ext.require([
    'Ext.window.Window'
]);

Ext.onReady(function(){

   Ext.create('Ext.Window', {
       closable: false,
       width: 400,
       height: 200,
       layout: 'fit'
   }).show();

}); 
```

在CSS中：

```
.x-window-header-text {
    height: 2px;
} 
```

我知道它不完全符合您的要求，但标题为可拖动状态的文档是拖动处理程序： [http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window。窗口-cfg-可拖动](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.Window-cfg-draggable)

> "True 允许窗口被标题栏拖动"

希望这会有所帮助。

# ruby-on-rails - 表单内的按钮触发 http post 但它不应该

> ID：12157256
> 
> 赞同：0
> 
> 时间：2012-08-28T10:20:44.443
> 
> 标签：ruby-on-rails, button

我制作了一个 html 表单，其中包含一些不应发布表单的按钮。他们只应该做一些javascript动作。但是当这些按钮被点击时，它们会触发一个发布请求。按钮的 html 代码如下所示：

```
<button class="btn" id=some_id>
</button> 
```

如您所见，没有什么特别的。有没有办法阻止这些按钮发布表单？

我用了

```
$('.btn').bind('click', function() {
    some_js_code
}); 
```

将一些 js 功能绑定到按钮。
**解决方案：**

```
$('.btn').bind('click', function() {
    some_js_code
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T10:36:21.960

您可以添加一个 onClick 处理程序并返回 false 以防止默认行为。例如：

```
<button class="btn" id=some_id onClick="alert('do stuff'); return false;">
</button> 
```

尽管正如 Anthony Grist 指出的那样，内联属性并不是一种很好的做事方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:23:05.327

不应该有类似的东西`onclick="javascriptfunction()"`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:26:14.957

根据[W3Schools](http://www.w3schools.com/tags/tag_button.asp)

> 您可以在元素内放置内容，例如文本或图像。这是此元素与使用该元素创建的按钮之间的区别。

`type="button"`因此，如果您真的希望它被视为没有帖子的虚拟按钮 ，您仍然需要添加。

你提到你正在使用 JavaScript，所以你也可以设置

`cancelBubble = true` [MSDN cancelBubble 属性](http://msdn.microsoft.com/en-us/library/ie/ms533545%28v=vs.85%29.aspx)或

`event.preventDefault()` [jQuery preventDefault](http://api.jquery.com/event.preventDefault/)

# iphone - iPhone 应用程序中的说话人识别

> ID：12157257
> 
> 赞同：2
> 
> 时间：2012-08-28T10:20:44.740
> 
> 标签：iphone, security, speech-recognition, voice-recognition, speaker

出于安全目的，我想通过使用 iPhone 应用程序中的语音识别功能来跟踪语音。

每个用户都可以录制他/她的声音并通过仅识别他/她的声音来打开应用程序，该声音被记录并存储在数据库中。

是否有人对此功能有想法或示例应用程序以及如何在 iPhone 应用程序中实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T12:51:58.237

看看[Mobbeel](http://www.mobbeel.com/)。他们为 Android 和 iOS 设备提供生物识别安全解决方案（虹膜、语音、面部、手部几何）。您可能还想查看[Nuance 的生物识别解决方案](http://www.nuance.com/for-business/by-solution/customer-service-solutions/solutions-services/inbound-solutions/voice-authentication-biometrics/index.htm)。[SourceForge 上](http://sourceforge.net/projects/voicebiometrics/)有一个开源的生物识别解决方案，但它似乎不是很活跃。另请查看[有关 Java 语音生物识别解决方案的 QA](https://stackoverflow.com/questions/8724454/java-voice-biometric)。

# c# - 在 C#.net 的 FFMPEG 中找不到适合“&&”的输出格式

> ID：12157268
> 
> 赞同：3
> 
> 时间：2012-08-28T10:21:19.560
> 
> 标签：c#, .net, command-line, ffmpeg

我正在尝试使用 FFMPEG 转换和删除源文件，我想要的是将视频文件从一种格式转换为另一种格式，并删除第一个上传的意味着源文件，如果我们在转换后使用 && 运算符，该命令可以正常工作语法和编写 del 命令，它在命令行上运行良好，但是当我们尝试使用 c# 时，它给出了错误 Unable to find a proper output format for '&&' I have check with debugger，它与我们正在写的同一行命令行，命令行没有任何问题。c#有什么问题？

```
ffmpeg.StartInfo.Arguments = " -i \"" + v.FilePath + "\" -r 20 -ar 44100 -ab 196 -b 300k -aspect 4:3 -s 800x600 \"" + convertToMp4 + "\" && del \"" + v.FilePath + "\"";
                                ffmpeg.StartInfo.FileName = Server.MapPath("ffmpeg/ffmpeg.exe");
                                //ffmpeg.StartInfo.UseShellExecute = false;
                                ffmpeg.StartInfo.CreateNoWindow = false;
                                ffmpeg.BeginErrorReadLine();
                                ffmpeg.Start();
                                if (b == false)
                                {
                                    ffmpeg.WaitForExit();
                                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:43:14.663

问题是您的 convertToMp4 变量结果为零，因此它认为 && 是输出文件名

编辑：这会导致 shell 执行吗？因为 && 属于 bash shell。因此，如果 ffmpeg 直接从 C# 执行而没有中间 bash shell，我不确定 && 将如何工作。这就是为什么 ffmpeg 认为 && 是所需的输出文件的原因，因为 && 在这里没有为 shell 解释。然后，您应该执行两个单独的命令。

# media-player - javafx fxml 媒体播放器

> ID：12157270
> 
> 赞同：0
> 
> 时间：2012-08-28T10:21:28.837
> 
> 标签：media-player, javafx-2, fxml

有谁知道如何在 FXML 中嵌入媒体播放器来打开 youtube 视频？

我写了这个：

```
<?import javafx....>
<?import javafx.scene.media.Media?>
<?import javafx.scene.media.MediaPlayer?>
<?import javafx.scene.media.MediaView?>

<AnchorPane prefHeight="600" VBox.vgrow="ALWAYS">
  <children>
    <VBox spacing="50" alignment="CENTER" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
      <padding>
        <Insets top="30" right="30" bottom="0" left="30"/>
      </padding>
      <children>
        <MediaView>
          <MediaPlayer autoPlay="true">
            <Media source="http://www.youtube.com/watch?v=rCw5JXD18y4" />
          </MediaPlayer>
        </MediaView>
      </children>
    </VBox>
  </children>
</AnchorPane> 
```

但是我在声明“媒体”的行中遇到了这个异常：

```
Element does not define a default property.
   at javafx.fxml.FXMLLoader$Element.set(FXMLLoader.java:142)
   at javafx.fxml.FXMLLoader$ValueElement.processEndElement(FXMLLoader.java:611)
   at javafx.fxml.FXMLLoader.processEndElement(FXMLLoader.java:2430)
   at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2136)
   at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2028)
   at javafx.fxml.FXMLLoader$IncludeElement.constructValue(FXMLLoader.java:937)
   at javafx.fxml.FXMLLoader$ValueElement.processStartElement(FXMLLoader.java:567)
   at javafx.fxml.FXMLLoader.processStartElement(FXMLLoader.java:2314)
   at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2131)
   at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2028)
   at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2742)
   at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2721)
   at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2707)
   at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2694)
   at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2683)
   ... 
```

任何人 ？

谢谢你们 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:19:52.317

出于版权原因，AFAIK YouTube 不允许流式传输他的视频。

**1.**但是你可以在 JavaFX 的 WebView 中嵌入 youtube 视频：

```
public class WebViewYouTube extends Application {
    @Override
    public void start(Stage stage) {
        StackPane root = new StackPane();
        WebView webView = new WebView();

        final WebEngine webEngine = webView.getEngine();
        root.getChildren().addAll(webView);
        stage.setScene(new Scene(root, 450, 350));

        webEngine.loadContent("<iframe width='420' height='315' src='http://www.youtube.com/embed/ZDzVLhjB3bk' frameborder='0' allowfullscreen></iframe>");

        stage.show();
    }

    public static void main(String[] args) {
        launch();
    }
} 
```

**2.**不幸的是，与 FXML 相同的事情需要使用 Controller，因为我不知道如何从 FXML 为 WebEngine 设置内容：

```
<StackPane xmlns:fx="http://javafx.com/fxml" fx:controller="fxdemo.SampleController">
  <children>
    <WebView fx:id="webView"/>
  </children>
</StackPane> 
```

和控制器：

```
public class SampleController implements Initializable {

    @FXML //  fx:id="webView"
    private WebView webView; // Value injected by FXMLLoader

    @Override // This method is called by the FXMLLoader when initialization is complete
    public void initialize(URL fxmlFileLocation, ResourceBundle resources) {
        webView.getEngine().loadContent("<iframe width='420' height='315' src='http://www.youtube.com/embed/ZDzVLhjB3bk' />");
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T22:26:03.547

```
 I have a class to play video

    @Override public void start(Stage primaryStage) {
        WebView root = new WebView();
        root.getEngine().loadContent(
          "<video width='640' height='480'controls='controls'>" +
          "<source src='http://download.oracle.com/otndocs/products/javafx/oow2010-2.flv'/>" + 
          "</video>");

        primaryStage.setScene(new Scene(root, 660, 500));
        primaryStage.show();`enter code here`
    }

but I need to know if you can linkear an online player, as a transmission of a party or a live event Ej: A transmission justin.tv or a game of www.rojadirecta.mx, as I can know what kind of content is and to load it into my webview?
    Thanks 
```

# visual-studio - 从命令行构建一个面向 SQL Server 2012 的数据库项目

> ID：12157274
> 
> 赞同：2
> 
> 时间：2012-08-28T10:21:37.050
> 
> 标签：visual-studio, command-line, build, sql-server-2012, database-project

我在 Visual Studio 2010 中有一个面向 SQL Server 2012 的数据库项目，并且至少有一个存储过程使用新语法重新抛出错误（“THROW;”）

尝试从命令行构建项目，如下所示：

`msbuild /t:Build MyDatabaseProject.dbproj`

输出这个：

```
Microsoft (R) Build Engine Version 4.0.30319.1
[Microsoft .NET Framework, Version 4.0.30319.269]
Copyright (C) Microsoft Corporation 2007\. All rights reserved.

Build started 28.08.2012 13:14:23.
Project "F:\My\Path\MyDatabaseProject.dbproj" on node 1 (Build target(s)).
DspBuild:
  Creating a model to represent the project...
  Loading project files...
  Building the project model and resolving object interdependencies...
  Validating the project model...
F:\MY\PATH\SCHEMA OBJECTS\SCHEMAS\DBO\PROGRAMMABILITY\STORED PROCEDURES\SOMEPROC.PROC.SQL(95,3,95,3): Build error SQL02010: Incorrect syntax near THROW. [F:\My\Path\MyDatabaseProject.dbproj]
... 
```

我的猜测是我应该添加一个参数来指定 SQL Server 2012 T-SQL 方言，但我不确定这一点。

从 Visual Studio 构建项目没有任何问题。

* * *

更新：我不确定我有什么类型的项目。项目属性如下所示：

![在此处输入图像描述](../Images/1034ae4e663ddd837eab92d0c838ab63.png)

附加数据：

![在此处输入图像描述](../Images/6b925d744914d961916b0772b2268514.png)

![在此处输入图像描述](../Images/dad3321a846becef53b44294a35738aa.png)

![在此处输入图像描述](../Images/b27b1c1207dbfd264ea39400a999d7c4.png)

![在此处输入图像描述](../Images/16726d492f1c96b9cbf666ba9237928d.png)

![在此处输入图像描述](../Images/0b971e2122b1a76064f471a9861f9dce.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T19:10:04.410

看起来您正在使用仅支持 SQL Server 2008 的旧数据库项目类型。Visual Studio 2010 有一个支持 SQL Server 2012 的新数据库项目类型（具有非常通用的名称“SQL Server 数据库项目”）您可以将其作为最新版本的[SQL Server Data Tools](http://msdn.microsoft.com/en-us/data/tools.aspx)的一部分进行安装。

新项目类型需要不同的命令行语法，您可以在[此处](https://stackoverflow.com/questions/8371879/deploy-sql-server-2012-db-project-via-command-line-sql-server-data-tools-ctp4)找到。

顺便说一句，Visual Studio 可以轻松地将现有的数据库项目转换为新的项目类型。

# sql - Oracle Sql 查询以获取经理与员工的关系

> ID：12157282
> 
> 赞同：1
> 
> 时间：2012-08-28T10:22:08.767
> 
> 标签：sql, oracle, oracle10g

我有一个像这样的表结构，其中定义了员工与经理的关系

```
EMP_ID SUP_ID START_DATE END_DATE
emp1 sup1 2012 年 1 月 1 日 2012 年 1 月 30 日
emp1 sup2 2012 年 2 月 1 日 2012 年 2 月 28 日
emp2 sup1 2012 年 1 月 1 日 2012 年 2 月 28 日

```

我需要查询以获取截至 sysdate 的经理下的所有员工。

即，如果我在 1 月使用 mgr id sup1 执行它，它应该返回 emp1 和 emp2
，如果它在 2 月它应该只返回 emp2。

我尝试使用连接编写查询，但它不起作用，我对在哪里放置什么条件感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:10:06.973

下面肯定可以工作吗？

```
select * from employees
where sysdate between start_date and end_date
and sup_id = 'sup1'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:59:58.997

```
select * from employees where sup_id = 'sup1' and start_date = trunc(sysdate); 
```

# python - 关于 Django 中模板的问题

> ID：12157283
> 
> 赞同：1
> 
> 时间：2012-08-28T10:22:11.473
> 
> 标签：python, django, django-templates, django-views

我正在开发一个用于用户注册和登录的应用程序。我已经制作了注册表格，现在我想制作一个登录页面，因此我制作了一个 login.html 文件，现在我希望它被放置在模板。因此，我创建了一个目录并将其放在该目录**home/html/templates/registration/login.html**

**settings.py**文件中的 Template_dir=()如下：

```
 TEMPLATE_DIRS = (
        '/home/html/templates',
    ) 
```

视图文件为

```
from django.template import  loader
from registration.models import Registration
from django.http import HttpResponse

def login(request):
    t = loader.get_template('registration/login.html')
    return HttpResponse() 
```

但是当我尝试将此文件作为**localhost:8000/registration/login.html**运行时，我收到 404 错误 **Page not found**

**url.py**文件中给出的 url如下：

```
url(r'^registration/$', 'registration.views.login'), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:24:41.743

Django 本身不提供 html 文件。模板必须在 view.py 上以 HttpResponse 的形式呈现和返回。

所以试试：

```
from django.shortcuts import render

def login(request):
    return render(request, 'registration/login.html') 
```

并将`localhost:8000/registration/`返回一个登录页面。

[有关快捷方式功能](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#module-django.shortcuts)和[模板语言](https://docs.djangoproject.com/en/dev/ref/templates/api/#the-django-template-language-for-python-programmers)的更多信息，请参阅文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:35:00.297

您正在获取，`404`因为您在`localhost:8000/registration/login.html`将 url 定义为`url(r'^registration/$', 'registration.views.login'),`.

定义中第一部分中的字符串而不是正则表达式`urls.py`应与您从浏览器访问的 URL 匹配。

在您的情况下，您应该访问`localhost:8000/registration/`.

此外，您应该返回正确的 http 响应而不是 empty `HttpResponse`。

# r - ggmap 不显示地图

> ID：12157291
> 
> 赞同：9
> 
> 时间：2012-08-28T10:22:34.367
> 
> 标签：r, ggplot2, ggmap

我有以下代码：

```
library(ggmap) 
ggmap(get_map(location=c(lon = 5.218922, lat = 52.342366), zoom =14)) 
```

我的帐户应该可以正常工作，但我只得到一个标准的 ggplot2 图像（灰色背景等），具有正确的轴，但没有显示地图： ![在此处输入图像描述](../Images/678d17680b5e3607ba597758a302f940.png)

当我查看我的工作目录时，我确实找到了一个名为“ggmapTemp”的文件，其中包含正确的地图。但是ggplot2没有显示地图。

我与 RStudio 合作，并且在我的工作电脑上拥有有限的权利。这可能是地图显示不正确的原因吗？我的 RStudio 版本是 0.96.316，R 是 R-2.15.1。

```
> sessionInfo()
 R version 2.15.1 (2012-06-22)
 Platform: x86_64-pc-mingw32/x64 (64-bit)

 locale:
 [1] LC_COLLATE=Dutch_Netherlands.1252  LC_CTYPE=Dutch_Netherlands.1252   
 [3] LC_MONETARY=Dutch_Netherlands.1252 LC_NUMERIC=C                      
 [5] LC_TIME=Dutch_Netherlands.1252    

 attached base packages:
 [1] stats     graphics  grDevices utils     datasets  methods   base     

 other attached packages:
 [1] ggmap_2.1     ggplot2_0.9.1

 loaded via a namespace (and not attached):
 [1] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       grid_2.15.1       
 [5] labeling_0.1       MASS_7.3-18        memoise_0.1        munsell_0.3       
 [9] plyr_1.7.1         png_0.1-4          proto_0.3-9.2      RColorBrewer_1.0-5
 [13] reshape2_1.2.1     RgoogleMaps_1.2.0  rjson_0.2.9        scales_0.2.1      
 [17] stringr_0.6        tools_2.15.1 
```

**更新：** 回答 1 后我的 sessionInfo()：

```
sessionInfo()

 attached base packages:
 [1] stats     graphics  grDevices utils     datasets  methods   base     

 other attached packages:
 [1] mapproj_1.1-8.3 maps_2.2-6      ggmap_2.1       ggplot2_0.9.1  

 loaded via a namespace (and not attached):
 [1] colorspace_1.1-1    dichromat_1.2-4     digest_0.5.2        grid_2.15.1        
 [5] labeling_0.1        MASS_7.3-20         memoise_0.1         munsell_0.3        
 [9] plyr_1.7.1          png_0.1-4           proto_0.3-9.2       RColorBrewer_1.0-5 
 [13] reshape2_1.2.1      RgoogleMaps_1.2.0.2 rjson_0.2.9         scales_0.2.1       
 [17] stringr_0.6.1       tools_2.15.1 
```

按照要求：

```
capabilities()
jpeg      png     tiff    tcltk      X11     aqua http/ftp  sockets   libxml     fifo 
TRUE     TRUE     TRUE     TRUE    FALSE    FALSE     TRUE     TRUE     TRUE    FALSE 
cledit    iconv      NLS  profmem    cairo 
TRUE     TRUE     TRUE     TRUE     TRUE 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T10:56:24.680

在我的机器上，附加包的列表是：

```
other attached packages:
[1] mapproj_1.1-8.3 maps_2.2-6      ggmap_2.1       ggplot2_0.9.1 
```

这意味着您可能需要`mapproj`以及`maps`运行您的代码，因为这些是`ggplot`用于启用正确地图投影的建议包。

尝试：

```
install.packages(c("mapproj", "maps")) 
```

然后重新运行您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T05:27:51.717

我有这个错误，但现在我升级到最新版本的 ggmap (V2.3) 解决了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T02:06:51.113

我有同样的问题。重新安装 ggmap 解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-04T23:43:29.503

在我的情况下，解决方案是图形本身。有些东西将我的颜色深度更改为 16 位，因此更改为 32 位解决了问题。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-12-26T07:55:56.440

因此，如果您像我一样是 RStudio 用户，您必须记住 .R 中的代码与从 R 命令行运行代码的行为略有不同。下面的代码取自[Max Marchi 的 R 博客](http://www.milanor.net/blog/?p=534)，如果从命令行执行，则可以完美运行。

```
library(ggmap)
library(mapproj)
map <- get_map(location = 'England', zoom = 7)
ggmap(map) 
```

但是，使用上面相同的代码并将其放在 RStudio 中的 .R 中，结果将是一个空白窗口，其中预期会出现地图。要解决此问题，请像下面的代码一样放置`ggmap(map)`在里面。`print()`

```
library(ggmap)
library(mapproj)
map <- get_map(location = 'England', zoom = 7)
print(ggmap(map)) 
```

上面的代码应该在绘图窗口中生成一张英格兰地图。至少它对我有用。

我对此的解释可能是不正确的，所以不要强迫我这样做。由于 RStudio 在 R 之上运行，因此您需要明确告诉 RStudio 某些命令是行命令并且需要这样处理。通过将 line 命令放在 中`print()`，RStudio 知道在 R 的命令行中执行该命令。

我欢迎评论和更好地解释正在发生的事情。

# android - 更改动画视图容器的大小

> ID：12157297
> 
> 赞同：1
> 
> 时间：2012-08-28T10:22:51.883
> 
> 标签：android, drop-down-menu, view, android-animation

![设想](../Images/025453cc359acebacaea21eac88db640.png)

我正在使用动画制作视图`TranslateAnimation`以实现下拉视图动画。我面临的问题是动画完成后容器的大小不会增加。

请检查图像和代码段：

```
TranslateAnimation animation = new TranslateAnimation(0.0f, 0.0f, top, top + px);
animation.initialize(mDropDownLayout.getWidth(),mDropDownLayout.getHeight(), parentLayout.getWidth(), parentLayout.getHeight());
animation.setDuration(2000);
animation.setFillEnabled(true);
animation.setFillBefore(true);
mDropDownLayout.startAnimation(animation); 
```

我想要达到的结果是容器的高度应该随着动画视图的平移而逐渐增加。

**更新：**此外，动画视图仅在视觉上移动，而不是在结构上移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:46:11.690

我不确定这种方式，但尝试一次。

```
RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 
```

将此 layoutParams 设置为您的`relativeLayout`

然后您可以根据您的要求更改宽度/高度，如下所示

```
layoutParams.width = 10;
layoutParams.height = 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-19T11:00:51.103

[布局转换](http://www.youtube.com/watch?v=55wLsaWpQ4g)是理想的，如本 DevBytes 插曲所示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:45:14.053

最后，我得到了这个。Android有两种动画包，**View动画**（android.view.animation）和**Property动画**（android.animation）。后者是与 Honeycomb 一起引入的。

我首先尝试使用视图动画制作动画，但没有成功，因为在动画完成后我无法将布局结构移动到视觉位置。

然后，我用 Property Animation 进行了尝试，我能够达到预期的效果。我强烈推荐使用属性动画，你也可以通过使用[NineOldAndroids](http://nineoldandroids.com/)库将其用于 11 以下的 api 级别。

我已经在 github 上添加了演示项目。[在这里检查](https://github.com/a001u/Animation-Demo.git)

**注意：**您需要 NineOldAndroids 库才能在所有 api 级别上运行此演示。

# java - .clone() 还是 Arrays.copyOf()？

> ID：12157300
> 
> 赞同：48
> 
> 时间：2012-08-28T10:22:58.343
> 
> 标签：java, immutability

为了减少可变性，我们是否应该使用

```
public void setValues(String[] newVals) {

     this.vals = ( newVals == null ? null : newVals.clone() );
} 
```

或者

```
public void setValues(String[] newVals) {

     this.vals = ( newVals == null ? null : Arrays.copyOf(newVals, newVals.length) );
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-28T10:36:11.477

### 使用 jmh 更新

[使用 jmh](https://stackoverflow.com/a/40287457/829571)，我得到了类似的结果，除了`clone`似乎稍微好一点。

### 原帖

我对性能进行了快速测试：`clone`，`System.arrayCopy`并且`Arrays.copyOf`具有非常相似的性能（jdk 1.7.06，服务器 vm）。

JIT之后的详细信息（以毫秒为单位）：

> 克隆：68
> arrayCopy：68
> Arrays.copyOf：68

测试代码：

```
public static void main(String[] args) throws InterruptedException,
        IOException {
    int sum = 0;
    int[] warmup = new int[1];
    warmup[0] = 1;
    for (int i = 0; i < 15000; i++) { // triggers JIT
        sum += copyClone(warmup);
        sum += copyArrayCopy(warmup);
        sum += copyCopyOf(warmup);
    }

    int count = 10_000_000;
    int[] array = new int[count];
    for (int i = 0; i < count; i++) {
        array[i] = i;
    }

    // additional warmup for main
    for (int i = 0; i < 10; i++) {
        sum += copyArrayCopy(array);
    }
    System.gc();
    // copyClone
    long start = System.nanoTime();
    for (int i = 0; i < 10; i++) {
        sum += copyClone(array);
    }
    long end = System.nanoTime();
    System.out.println("clone: " + (end - start) / 1000000);
    System.gc();
    // copyArrayCopy
    start = System.nanoTime();
    for (int i = 0; i < 10; i++) {
        sum += copyArrayCopy(array);
    }
    end = System.nanoTime();
    System.out.println("arrayCopy: " + (end - start) / 1000000);
    System.gc();
    // copyCopyOf
    start = System.nanoTime();
    for (int i = 0; i < 10; i++) {
        sum += copyCopyOf(array);
    }
    end = System.nanoTime();
    System.out.println("Arrays.copyOf: " + (end - start) / 1000000);
    // sum
    System.out.println(sum);
}

private static int copyClone(int[] array) {
    int[] copy = array.clone();
    return copy[copy.length - 1];
}

private static int copyArrayCopy(int[] array) {
    int[] copy = new int[array.length];
    System.arraycopy(array, 0, copy, 0, array.length);
    return copy[copy.length - 1];
}

private static int copyCopyOf(int[] array) {
    int[] copy = Arrays.copyOf(array, array.length);
    return copy[copy.length - 1];
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-09-06T15:41:34.830

还请考虑使用“clone()”的安全性。一类众所周知的攻击使用带有恶意代码覆盖对象的“clone()”方法的类。例如，CVE-2012-0507（Mac OS 上的“闪回”攻击）基本上通过[将“.clone()”调用](https://books.google.com/books?id=kSiDAAAAQBAJ&pg=PA33&lpg=PA33&dq=CVE-2012-0507%20flashback%20clone&source=bl&ots=YnZQ3zpBQa&sig=A68g15JAFlkjLd708nxV_M7RXSA&hl=en&sa=X&ved=0ahUKEwiHoLbBifvOAhXLJsAKHa_1BrQQ6AEIKzAC#v=onepage&q=CVE-2012-0507%20flashback%20clone&f=false)替换为“.copyOf”调用来解决。

关于“clone()”过时的更多讨论可以在 StackOverflow 上找到：[object cloning with out implementation cloneable interface](https://stackoverflow.com/questions/8192223/object-cloning-with-out-implementing-cloneable-interface)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-28T10:40:23.717

我写了一个简单的程序来检查差异。

```
public static void main(String[] args) throws IOException, InterruptedException,
        PrinterException
{
  //Verify array remains immutable.

  String[] str =  {"a","b","c"};
  String[] strings  = str.clone();
  //change returned array
  strings[2]= "d";
  System.out.println(Arrays.toString(str));
  System.out.println(Arrays.toString(strings));

  String[] stringsCopy = Arrays.copyOf(str, str.length);
  stringsCopy[2]= "d";
  System.out.println(Arrays.toString(str));
  System.out.println(Arrays.toString(stringsCopy));

  //peformance
  long before = System.currentTimeMillis();
  for(int i=0;i<Integer.MAX_VALUE;i++)
  {
      str.clone();
  }
  System.out.println("Time Required for Clone: "+ (System.currentTimeMillis()-before));

  //peformance
  long beforeCopy = System.currentTimeMillis();
  for(int i=0;i<Integer.MAX_VALUE;i++)
  {
      Arrays.copyOf(str, str.length);
  }
  System.out.println("Time Required for Copy of: "+ (System.currentTimeMillis()-beforeCopy));

} 
```

它输出

```
[a, b, c]
[a, b, d]
[a, b, c]
[a, b, d]
Time Required for Clone: 26288
Time Required for Copy of: 25413 
```

因此，如果您看到这两种情况`String[]`都是不可变的并且性能几乎相同，那么认为 Arrays.copyOf() 在我的机器上稍快一些。

**更新**

我更改了程序以创建大数组 [100 个字符串] 而不是小数组。

```
 String[] str =  new String[100];

  for(int i= 0; i<str.length;i++)
  {
      str[i]= Integer.toString(i);
  } 
```

并在`copy of`方法之前移动`clone`方法。结果如下。

```
 Time Required for Copy of: 415095
 Time Required for Clone: 428501 
```

这又是相同的。`Please do not ask me to run the test again as it takes a while`:(

**更新 2**

对于字符串数组`1000000`和迭代次数`10000`

```
Time Required for Copy of: 32825
Time Required for Clone: 30138 
```

`copy of`花费的时间比`clone`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T10:27:01.680

在可变性方面，它们将提供完全相同的数据——浅拷贝。

# c++ - 当类名存储在另一个变量中时如何创建类的实例

> ID：12157303
> 
> 赞同：1
> 
> 时间：2012-08-28T10:22:58.807
> 
> 标签：c++, templates

> **可能重复：**
> [C++ 中的最小反射](https://stackoverflow.com/questions/3665423/minimal-reflection-in-c)

基本上我有类名存储在`char *`，我如何创建该类的实例。以下是我的想法。当我`Test`作为模板参数传递时它可以工作，这很好，但如果我尝试这样的事情`Test *t = CreateType<ptr>`，它将无法工作。

有什么办法可以使这项工作。

```
class Test{
public:
    Test() {
    }
    ~Test() {
    }
};

template <typename T> 
T* CreateType() {
    return new T;
}

int main ( int argc, char **argv) {
    char *ptr = "Test";
    Test *T = CreateType<Test>();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:27:45.070

这在 C++ 中是不可能*直接*实现的，因为该语言不是内省的。

你可以尝试做类似的*事情*。例如，您可以有一个`map< string, baseClassPointer >`where 键将是类的名称，而值将是指向该类的对象的指针。然后您可以通过从地图中复制一个对象来创建其他对象（您可以通过类型名称获取）。不过，我不建议这样做。

不过，工厂模式可能适合您的需求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T10:25:01.680

这在 C++ 中是不可能的，因为在 C++ 中没有像反射这样的机制。您可以做的是编写一个工厂，它知道如何从字符串构造一个对象。

```
class Base
{
public:
    virtual ~Base(){}
};

class Factory
{
public:
    typedef std::function<Base*()> Creator;

    void Register(const std::string& key, Creator creator)
    {
        creators_[key] = creator;
    }

    std::unique_ptr<Base> Create(const std::string& key)
    {
        auto creator = creators_[key];
        auto instance = std::unique_ptr<Base>(creator());
        return instance;
    }

private:
    std::unordered_map<std::string, Creator> creators_;
};

class Concrete : public Base
{

};

int main()
{
    Factory factory;
    factory.Register("Concrete", [](){ return new Concrete;});

    auto instance = factory.Create("Concrete");

} 
```

# php - Magento - setCustomPrice、setPrice、setOriginalCustomPrice 等之间的区别

> ID：12157305
> 
> 赞同：9
> 
> 时间：2012-08-28T10:23:04.973
> 
> 标签：php, magento

谁能澄清 Magento 中所有不同定价规则的区别和目的？

例如有 setPrice、setOriginalPrice、setCustomPrice、setOriginalCustomPrice、setSpecialPrice、setFinalPrice 等，但不用猜测，它并不完全清楚每个人的目的和用法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T10:47:41.447

由于规则/报价系统的工作方式，需要不同的字段。

产品/报价将通过每个匹配规则，这反过来又可以修改客户将要支付的价格。系统仍然需要知道原始价格，以便正确报告节省百分比等。

**价格**：这是您在 magento 管理员中输入的产品价格

**originalPrice：**保留未修改的版本，因为在此过程中价格可能会发生变化。

**customPrice**：可以在后台下单时设置，您可能想给某人一个特殊的一次性价格，这将覆盖价格

**originalSpecialPrice：**未修改的版本，因为它可能会随着价格的变化而受到规则等的改变/影响

**specialPrice** : 是用于显示折扣的价格，这将用于对抗价格，然后根据差额计算节省百分比等。

不过，您实际上并不需要以编程方式设置任何这些值，也许如果您正在创建一些自定义规则等。

# java - 将 wakanda IDE 连接到 javascript

> ID：12157306
> 
> 赞同：1
> 
> 时间：2012-08-28T10:23:05.387
> 
> 标签：java, javascript, extjs, wakanda

> 瓦坎达 IDE

很棒，很容易实现界面，开发和一切。
我仍然面临一个问题，我不知道如何将我自己的 java 库连接到 wakanda 服务器？
关于这一点的任何信息？
[那是 wakanda 网站的链接，它在](http://www.wakanda.org)这里找不到任何有用的信息。一旦我可以将我的库连接到它，我将正式使用这个 IDE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T19:53:28.427

据我所知，连接 Java 库是不可能的（你说的是 Java，不是 JavaScript，不是吗？）。关于 JavaScript，他们已经实现了一堆最常见的 JavaScript，但这由他们自行决定。

您最好暂时将 Wakanda 视为独立的。Wakanda 意味着“从头到尾”只有 JavaScript。[看这篇文章](http://opensource.sys-con.com/node/2305051)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:52:06.483

您可以做的是使用[SystemWorker API](http://doc.wakanda.org/System-Workers/System-Workers.100-775297.en.html)与 Java（或 PHP）交互。

它使用 W3C/WATHWG Web Workers 在命令行执行进程中提供的相同 API。

我个人一直在使用它与 PHP 一起使用一些 PHP 库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-31T21:19:41.757

在 Wakanda 11 中，扩展管理器有很多可以添加的东西。

我不确定什么是兼容的，但我知道 Wakanda 11 会让我知道 node.js 丢失或过时。离子。科尔多瓦。我不确定它是否设置为仅与这些（以及我未列出的其他一些）一起使用，或者这是否证明其他库可以与 Wakanda 一起使用。只是一个想法。

# iphone - 如何找到当前用户 Lat/Longt 并将其传递给另一个方法

> ID：12157311
> 
> 赞同：1
> 
> 时间：2012-08-28T10:23:22.707
> 
> 标签：iphone, objective-c, ios, cllocationmanager

我可以从下面的 locationManager 方法中找到当前用户 Lat/Longt。然后我需要将这些变量传递给 Google Places API 方法（如下所示）。我遇到的问题是**ParseXML_of_Google_PlacesAP**方法中的 myLat 和 myLongt 都有一个空值。但是，这些值在 locationManager 方法中正确输出。

谢谢你的帮助

```
- (void)locationManager:(CLLocationManager *)manager
        didUpdateToLocation:(CLLocation *)newLocation
               fromLocation:(CLLocation *)oldLocation
    {
        int degrees = newLocation.coordinate.latitude;
        double decimal = fabs(newLocation.coordinate.latitude - degrees);
        int minutes = decimal * 60;
        double seconds = decimal * 3600 - minutes * 60;
        myLat = [NSString stringWithFormat:@"%d° %d' %1.4f\"", 
                         degrees, minutes, seconds];
        latLabel.text = myLat;
        degrees = newLocation.coordinate.longitude;
        decimal = fabs(newLocation.coordinate.longitude - degrees);
        minutes = decimal * 60;
        seconds = decimal * 3600 - minutes * 60;
        myLongt = [NSString stringWithFormat:@"%d° %d' %1.4f\"", 
                           degrees, minutes, seconds];
        longLabel.text = myLongt;

        NSLog(@"myLat is %@ myLongt is %@ from location mgr", myLat, myLongt);
    }

-(void)ParseXML_of_Google_PlacesAPI
{

    NSURL *googlePlacesURL=[NSURL URLWithString:[NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/search/xml?location=bar,@%&radius=500&types=bar&sensor=false&key=myAPIKey",myLat,myLongt]];

    NSLog(@"lat is %@ longt is %@", myLat, myLongt);

    NSData *xmlData = [NSData dataWithContentsOfURL:googlePlacesURL];
    xmlDocument = [[GDataXMLDocument alloc]initWithData:xmlData options:0 error:nil];

    NSArray *arr = [xmlDocument.rootElement elementsForName:@"result"];

    for(GDataXMLElement *e in arr )
    {
        [placesOutputArray addObject:e];
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:41:59.993

由于 myLat 和 myLongt 是 NSString ，它显示值为 null 意味着它正在被释放。

所以在喂值后保留两个对象。

```
 myLat = nil;
 myLat = [NSString stringWithFormat:@"%d° %d' %1.4f\"", 
                     degrees, minutes, seconds];
 [myLat retain]; 
```

还，

```
 myLongt = nil;
 myLongt = [NSString stringWithFormat:@"%d° %d' %1.4f\"", 
                       degrees, minutes, seconds];
 [myLongt retain]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:46:58.830

好吧，我只是将它存储在 NSUserdefaults 中。所以在你的情况下，它可能看起来像这样：

```
[[NSUserDefaults standardUserDefaults] setValue:myLat forKey:@"currentLat"];
[[NSUserDefaults standardUserDefaults] setValue:myLongt forKey:@"currentLongt"]; 
```

然后，我从我喜欢的每一种方法中读回它：

```
NSString *currentLat = [[NSUserDefaults standardUserDefaults] objectForKey:@"currentLat"];
NSString *currentLongt = [[NSUserDefaults standardUserDefaults] objectForKey:@"currentLongt"]; 
```

# c# - 通过 foreach 语句按行编辑数据表

> ID：12157312
> 
> 赞同：0
> 
> 时间：2012-08-28T10:23:23.007
> 
> 标签：c#, foreach, datatable, datarow

我的问题是我无法用另一个数据表的值填充数据表。下面的代码：

* * *

```
 foreach (DataRow row1 in ds.Tables["tests"].Rows)
        {
            //Use value stored in DataTable "tests" to generate
            //new DataTable called "temp" and fill it with values

            foreach (DataRow row2 in ds.Tables["temp"].Rows)
            {
                //use values in "temp"-table to fill fields in "tests"-table
       ->       if (specific condition in Datatable "tests" is met)
                {
                    example1: row1.ItemArray[10] = Convert.ToInt64(row2.ItemArray[0]);
                    example2: ds.Tables["tests"].Rows[row1.Table.Rows.IndexOf(row1)].ItemArray[10] = Convert.ToInt64(row2.ItemArray[0]);
                }
                else if (another specific condition in Datatable "tests" is met)
                {
                    //Different fields will be filled
                }
            }
        } 
```

* * *

当尝试调试程序时，在 if 语句的开头使用停止点，一切都会解决，直到程序跳转到 if 语句的执行块。

执行块中的每一行都被跳过。
这是我得到的读出信息（粗略翻译）：
`NonUserCode "System.Data.DataSet.Tables.get" is being skipped.`
`NonUserCode "System.Data.DataRow.ItemArray.get" is being skipped.`

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T10:38:01.450

无需使用 ItemArray。

```
if (specific condition in Datatable "tests" is met)
{
      row1[10] = Convert.ToInt64(row2[0]); //try this only.
}
else if (another specific condition in Datatable "tests" is met)
{
     //Different fields will be filled
} 
```

当您访问 ItemArray 时，它会返回一个本地数组。并通过为此本地数组分配值，而不是对数据表进行任何更改。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T10:39:56.813

尝试回顾主题：[DataRow Copy](http://social.msdn.microsoft.com/Forums/sa/adodotnetdataproviders/thread/a8ab4d2d-ab1b-4be6-9754-e516a923c3bf)

# java - Google App Engine (Java) 中当前应用的名称

> ID：12157313
> 
> 赞同：0
> 
> 时间：2012-08-28T10:23:33.850
> 
> 标签：java, google-app-engine

使用 Google App Engine Java API，有没有办法访问当前运行的应用程序的名称，即文件中指定的应用程序名称`appengine-web.xml`？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T13:58:55.733

您可以通过[`SystemProperty.applicationId.get()`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/utils/SystemProperty#applicationIdhttp://).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:58:57.360

`ApiProxy.Environment.getAppId()`- 请参阅 AppIdentity 服务[https://developers.google.com/appengine/docs/java/appidentity/overview](https://developers.google.com/appengine/docs/java/appidentity/overview)

# android - 当我们单击主页按钮并返回时，共享对话框消失

> ID：12157316
> 
> 赞同：0
> 
> 时间：2012-08-28T10:23:42.023
> 
> 标签：android, android-intent

我在我的应用程序中共享一些内容，并`Intent.ACTION_SEND`用于显示系统`Share Chooser dialog box`。现在的问题是一旦这个android显示的本机对话框，如果用户按下`home`按钮，当我们回到应用程序时它就会消失。

在这里我无法跟踪使用情况，`onResume()`因为即使用户在对话框窗口可见时按下后退按钮，`onResume()`也会被调用，因为我们将从 android 共享选择器对话框返回到我们的活动。

那么有人可以建议我以某种方式，以便在我们按下主页按钮后返回应用程序时再次显示该共享对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T05:51:41.057

您可以使用两个布尔变量：

```
boolean isDialogShowing, didPressBackButton; 
```

当您打开对话框时，您设置`isDialogShowing = TRUE;`并且当您按下返回按钮时，您设置`didPressBackButton = TRUE;`了用于按下返回的覆盖方法。

然后`onResume()`只需检查这些值，例如：

```
if(isDialogShowing && !didPressBackButton){
    // show the dialog again
}
else{
    isDialogShowing = FALSE;
    didPressBackButton = FALSE;
} 
```

# haskell - 使用 Hamlet 生成递归 Html

> ID：12157323
> 
> 赞同：1
> 
> 时间：2012-08-28T10:24:07.933
> 
> 标签：haskell, yesod, hamlet

我想生成一个评论树。

```
<ul>
   <li> First comment
      <ul> 
        <li> reply to first comment
        <li> another reply to first comment
      </ul>
   </li>
 </ul> 
```

我有一个`Tree (Entity Comment)`结构。我希望拥有 hamlet 的所有好处（`#{commentContent comment}`将受到 XSS 的保护）。

如何使用 Hamlet 实现递归 Html 渲染？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T10:35:47.103

您可能无法在普通的 hamlet 中执行此操作，但您可以创建一个辅助函数 commentTree，您可以使用`^{commentTree comments}`. 该函数将返回 Hamlet 并且可以自己`[hamlet|<li>^{commentTree subcomment}|]`用于递归和`[hamlet|<u>#{commentContent comment}|]`安全插值。

（受此[答案](https://stackoverflow.com/a/7535527/946226)的启发。）

# ssh - Amazon EC2 上的权限被拒绝（公钥）

> ID：12157325
> 
> 赞同：1
> 
> 时间：2012-08-28T10:24:25.457
> 
> 标签：ssh, amazon-ec2, public-key

**这是我的问题。**

1.  我创建了一个新实例，使用另一个实例的相同密钥对。

2.  SSH 到新实例，运行正常。

3.  我终止了旧实例。

当我使用密钥 SSH 到我的新实例时，它就出现了问题。

```
OpenSSH_5.6p1, OpenSSL 0.9.8r 8 Feb 2011
debug1: Reading configuration data /etc/ssh_config
debug1: Applying options for *
debug1: Connecting to ec2-176-34-8-64.ap-northeast-1.compute.amazonaws.com [176.34.8.64]         port 22.
debug1: Connection established.
debug1: identity file foobar.pem type -1
debug1: identity file foobar.pem-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.3
debug1: match: OpenSSH_5.3 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.6
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Host 'ec2-176-34-8-64.ap-northeast-1.compute.amazonaws.com' is known and matches the RSA host key.
debug1: Found key in /Users/xudannie/.ssh/known_hosts:12
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /Users/xudannie/.ssh/id_rsa
debug1: Authentications that can continue: publickey
debug1: Trying private key: foobar.pem
debug1: read PEM private key done: type RSA
debug1: Authentications that can continue: publickey
debug1: No more authentication methods to try.
Permission denied (publickey). 
```

所以我检查了其他答案，也许我应该创建一个新实例并挂载这个实例以添加公钥。这是解决问题的唯一方法吗？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:43:14.380

不确定您是否对其进行了排序，但对您的私钥的权限可能会在没有任何进一步说明的情况下给出该错误。我知道您在这种特定情况下可能没有更改文件权限。

但是，如果是这样的话，只是`sudo chmod 600 ~/.ssh/your_private_key` 特别是 windows 环境中的 putty 似乎只是拒绝访问，linux 通常会告诉您更改权限。

# jakarta-ee - 如果用户不正确地关闭浏览器，则终止 ViewScoped bean（即时浏览器终止）

> ID：12157326
> 
> 赞同：0
> 
> 时间：2012-08-28T10:24:32.987
> 
> 标签：jakarta-ee, jsf-2, managed-bean

想象一下用户使用某个使用 ViewScoped 支持 bean 的 JSF 页面的情况。如果导航到应用程序中的不同页面，bean 的自定义析构函数（即@PreDestroy）将被自动调用。如果用户正确关闭选项卡/窗口，则可以通过 AJAX 在服务器上调用远程命令以释放 bean。

但是，如果只是用户侧的电源故障并且PC立即关闭或浏览器被不正确地终止以至于无法调用JS代码怎么办。这意味着 bean 将永远挂在服务器端使用它的资源。**如何解决这样的问题？**

我想到的解决方案之一是在页面上放置一个 PrimeFaces 轮询元素，该元素将通过远程命令“ping”托管 bean。如果 bean 注意到超时，那么它将终止自身以释放所有资源。这个问题有更好的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:10:15.833

基本上，ViewScoped bean 的持续时间不会超过会话。会话超时是可配置的，因此 bean 不会“永远挂在服务器端”。

但是，您可以实现基于轮询的解决方案来释放视图范围 bean 使用的内存。但是由于突然断电甚至意外关闭浏览器的情况很少发生（与“正常”使用相比），轮询直接导致的资源浪费将比浪费的内存昂贵得多。

长话短说，如果：

*   您正在使用客户端状态保存
*   您正在使用服务器端状态保存和会话超时配置正确

# iphone - 从弹出视图返回主视图

> ID：12157327
> 
> 赞同：1
> 
> 时间：2012-08-28T10:24:33.160
> 
> 标签：iphone, ipad

我想从弹出视图返回主视图，我向你解释

```
-(void)tapAction1:(UITapGestureRecognizer*) sender
{

Clicked = sender.view.tag-500;
DemoViewController *sign = [[DemoViewController alloc]initWithNibName:@"DemoViewController" bundle:nil];

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.0];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.view cache:YES];

UIViewController* popoverContent = [[UIViewController alloc]init];
UIView* popoverView = [[UIView alloc]
                       initWithFrame:CGRectMake(0, 0,  100,  sign.view.frame.size.height)];
popoverView.backgroundColor = [UIColor clearColor];
popoverContent.view = popoverView;
    [popoverView addSubview: sign.view];

//resize the popover view shown
//in the current view to the view's size
popoverContent.contentSizeForViewInPopover = CGSizeMake( sign.view.frame.size.width, sign.view.frame.size.height);

//create a popover controller
UIPopoverController* popover = [[UIPopoverController alloc]
                                initWithContentViewController:popoverContent];
CGRect popoverRect = [self.view convertRect:[sender.view frame]
                                   fromView:[sender.view superview]];

popoverRect.size.width = MIN(popoverRect.size.width, 500);
popoverRect.origin.x  = popoverRect.origin.x;
//popoverRect.size.height  = ; 
//present the popover view non-modal with a
//refrence to the toolbar button which was pressed
[popover presentPopoverFromRect:popoverRect inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

//release the popover content
[popoverView release];
[popoverContent release]; 
//[[self view] addSubview:sign.view];

[UIView commitAnimations];

} 
```

现在在 demoviewcontroller 中是一个 xib。我想在其中放置一个名为 close 的按钮，并且我想关闭此弹出窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:02:44.937

在 DemoViewController 中添加按钮，如下所示：

```
UIButton *btnClose = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[btnClose addFrame:CGRectMake(20,20,80,30)];
[btnClose setTitle:@"Close" forState:UIControlStateNormal];
[btnClose addTarget:self action:@selector(dissmissPopOver:) forControlEvents:UIControlEventTouchUpInside];
[sign addSubView:btnClose]; 
```

现在选择器是：

```
- (void)dissmissPopOver:(id)sender
{
  [popover dismissPopoverAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:32:02.303

我会`UIPopoverController* popover`在`DemoViewController`.

```
@property (nonatomic, strong) UIPopoverController* popover; 
```

然后，您可以将在您发布的代码中分配的弹出框传递给此类：

```
sign.popover = popover; 
```

将此选择器添加到 `DemoViewController`

```
- (IBAction) didClickDismissPopoverButton:(id)sender
{
    [self.popover dismissPopoverAnimated:YES];
} 
```

然后只需将此 IBAction 与 Interface Builder 中的 UIButton Touch Up Inside 事件连接起来。

# c++ - 关于 boost.asio 异步睡眠

> ID：12157330
> 
> 赞同：1
> 
> 时间：2012-08-28T10:24:35.290
> 
> 标签：c++, boost-asio

我使用`boost.asio`异步读取数据，如果`handle_read`需要很多时间（例如睡眠），是否会影响其他连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:59:35.857

如果您`io_service::run`在一个线程中执行，则与之关联的所有 i/o 对象的完成处理程序`io_service`将按顺序调用。因此，如果其中一个花费了太多时间，所有队列都会卡住。

为了防止这种情况，您可以重新设计此完成处理程序，或者将具有问题处理程序的 i/o 对象与其`io_service`在单独线程中运行的专用运行相关联。

（请注意，在多个线程中运行单个`io_serivce`并不能解决这个问题，因为您不知道处理程序是如何在线程之间分布的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T15:44:48.030

使用异步 IO，您通常在一个线程中完成所有操作，因此您应该尽量缩短事情的时间。您*绝对*不想在处理输入时睡觉。

Boost 有[定时器](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/tutorial/tuttimer2.html)可以让你进行异步睡眠。

# c# - 异步调用 MTOM 流文件上传时出现序列化错误

> ID：12157331
> 
> 赞同：0
> 
> 时间：2012-08-28T10:24:37.267
> 
> 标签：c#, wcf, asynchronous, exception-handling, asyncfileupload

我正在调用基于 WCF（非 REST）的异步（async）二进制文件上传服务，该服务是我使用“MTOM”和“Streamed”web.config 参数构建的。环境是 ASP.NET MVC 3、.NET 4、IIS 7.5、VS2010。

该服务尝试上传二进制文件，例如 zip、pdf 或 doc。使用非异步方法一切正常。但是当我调用这个异步服务时，我在客户端收到了这个错误消息：

> 尝试序列化参数[http://tempuri.org/:dataStream](http://tempuri.org/:dataStream)时出错。InnerException 消息是 'Type 'System.IO.FileStream' ，数据合同名称为 'FileStream:http://schemas.datacontract.org/2004/07/System.IO' 不是预期的。考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。有关更多详细信息，请参阅 InnerException。

由于异步方法，我必须重写有关流的 WCF 约束：Stream 类型的单个参数或 MessageContract 类型的单个参数将被接受为服务方法中的类型。这种方法在以非异步方式工作时效果很好。

为了获得详细信息，我将展示到目前为止所有（相关）代码部分：

**服务器：**

服务合约接口，IUploadService：

```
[ServiceContract]
public interface IUploadService
{
   [OperationContract(AsyncPattern = true)]
   IAsyncResult BeginUpload(CompletedAsyncUploadResult dataStream, AsyncCallback callback, object state);

   int EndUpload(IAsyncResult result);  
} 
```

包装流和元数据字段的容器类，例如文件名：

```
[DataContract]
[KnownType(typeof(Stream))]   
public class StreamUploadContainer
{
        [DataMember]
        public string fileName;
        [DataMember]    
        public Stream content;   
} 
```

将 StreamUploadContainer 作为数据成员嵌入的 IAsyncResult 派生类：

```
// Simple async result implementation.
public  class CompletedAsyncUploadResult : IAsyncResult
{
    private StreamUploadContainer data;
    public StreamUploadContainer Data
    {
        get { return data; }
        set { data = value; }
    }

    public object AsyncState
    { get { return (object)data; } }

    public WaitHandle AsyncWaitHandle
    { get { throw new Exception("The method or operation is not implemented."); } }

    public bool CompletedSynchronously
    { get { return true; } }

    public bool IsCompleted
    { get { return true; } }
} 
```

服务类 UploadService.svc：

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)] 
public class UploadService : IUploadService
{
    public IAsyncResult BeginUpload(CompletedAsyncUploadResult dataStream, AsyncCallback callback, object state)
    {
        string retVal = "All went ok.";
        try
        {
            string docFolderPath = Path.Combine(HostingEnvironment.ApplicationPhysicalPath, @"App_Data/Scanning/");
            using (FileStream outputStream = File.Create(Path.Combine(docFolderPath, dataStream.Data.fileName)))
            {
                dataStream.Data.content.CopyTo(outputStream);
            }
            dataStream.Data.content.Close();
        }
        catch (Exception)
        {
            dataStream.Data.content.Close();
            retVal = "Somethin went wrong.";
        }
        CompletedAsyncUploadResult retValContract = new CompletedAsyncUploadResult();
        retValContract.Data = new StreamUploadContainer();
        retValContract.Data.fileName = retVal;
        retValContract.Data.content = Stream.Null;
        return retValContract;
    }

    public int EndUpload(IAsyncResult result)
    {
        return 0;
    }
} 
```

WCF 服务标记文件：

网络配置：

```
<system.serviceModel>
    <bindings>
    <basicHttpBinding>
      <binding name="BasicHttpBinding_IUploadService" messageEncoding="Mtom" transferMode="Streamed" maxReceivedMessageSize="2147483647">
       <security mode="None">
         <transport clientCredentialType="None" />
       </security>
      </binding>
    </basicHttpBinding>
    </bindings>
    <services>
      <service name="WcfUploadServiceProject.WcfServices.FileStreamUpload.UploadService" behaviorConfiguration="defaultBehaviour">
        <endpoint binding="basicHttpBinding" contract="WcfUploadServiceProject.WcfServices.FileStreamUpload.IUploadService" bindingConfiguration="BasicHttpBinding_IUploadService"></endpoint>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="defaultBehaviour">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
</system.serviceModel> 
```

**客户：**

异步调用服务

```
private void Upload()
{
    UploadBinaryService.IUploadService client = new UploadBinaryService.UploadServiceClient();
    UploadBinaryService.StreamUploadContainer contract = new UploadBinaryService.StreamUploadContainer();
    contract.content = this.GetStreamSample(@"c:\temp\balloon.zip");
    contract.fileName = "balloon.zip";

    UploadBinaryService.CompletedAsyncUploadResult result = new UploadBinaryService.CompletedAsyncUploadResult();
    result.Data = contract;
    client.BeginUpload(result, FileStreamBinaryUploadAsyncServiceCallback, client);
}

public void FileStreamBinaryUploadAsyncServiceCallback(IAsyncResult result)
{
    var proxy = result.AsyncState as UploadBinaryService.IUploadService;
    if (proxy != null)
    {
        var value = proxy.EndUpload(result);
    }
} 
```

应用程序配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
              <binding name="BasicHttpBinding_IUploadService" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Mtom" textEncoding="utf-8" transferMode="Streamed" useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <endpoint address="http://example.com/WcfServices/FileStreamUpload/UploadService.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IUploadService" contract="UploadBinaryService.IUploadService" name="BasicHttpBinding_IUploadService" />
        </client>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:35:11.933

尝试使用 TPL 和[TaskFactory.FromAsync](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskfactory.fromasync.aspx)方法族：

```
TaskFactory.FromAsync(BeginUpload, EndUpload, ...);
           .ContinueWith(result => ...); 
```

* * *

似乎 WCF 不支持`System.Stream`类型的序列化。在我看来是合理的。

# jquery - 触发加载应用程序的点击

> ID：12157333
> 
> 赞同：0
> 
> 时间：2012-08-28T10:24:43.957
> 
> 标签：jquery, html, css

我需要在加载应用程序时触发单击“主页”按钮。主页应该变成红色，并且应该在矩形中显示相应的段落。

```
$(document).ready(function(){
$('.showSingle').click(function () {
    $('.targetPara').hide();
    $('#p' + $(this).attr('target')).show();
    $('.showSingle').removeClass('selected')
    $(this).addClass('selected');           
});    
});

var active_link = 1; // Change this value to set the active link
$('td[target='+active_link+']').trigger('click'); 
```

我使用 abobe jquery 代码。请帮我弄清楚问题是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:28:23.593

你的电话`trigger`需要在里面`document.ready`。您正在访问 DOM，因此您必须等待浏览器解析它。此外，请确保`click`在尝试触发`click`. 希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:28:58.977

也许下面的选择器上没有“showSingle”css 类？

```
$('td[target='+active_link+']') 
```

亚伯拉罕所说的（：

# sqltransaction - SqlClient.SqlTransaction 与 System.Transactions

> ID：12157341
> 
> 赞同：1
> 
> 时间：2012-08-28T10:25:07.967
> 
> 标签：sqltransaction, system.transactions

我们在设置**MSDTC**`SystemTransactions`时经常遇到一些问题，现在正在考虑用`SqlTransactions`.

我对上述差异以及我们可能遇到的问题感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:17:08.063

The article quoted and referenced by Massimiliano was 7 years old when referenced and therefore refers only to .NET 2.0 and SQL Server 2000 and 2005\. However, I believe the salient points are still valid for later versions. I'm having trouble finding directly applicable commentary on any changes in later versions.

It does seem that in SQL Server 2008 and later System.TransactionScope transactions against a single database are less likely to be promoted to DTC than under older versions.

related: [SqlClient, System.Transactions, SQL Server 2008, and MARS](http://www.sqlskills.com/blogs/bobb/sqlclient-system-transactions-sql-server-2008-and-mars/)

So depending on you SQL Server version you will have more or less trouble with DTC using System.Transactions against a single database.

The code for System.Transactions is lighter than for SqlTransactions, but the processing overhead is higher and you have less explicit control.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:28:33.343

`System.Transactions` **不是**`SqlTransaction`. _

*但就单个数据库而言，基于 ADO.NET 2.0 System.Transactions 的事务与常规 SqlTransaction 之间的最大区别在于“隔离级别”。然而，这是一个很大的区别。稍后让我谈一谈隔离级别，但在此之前您必须意识到，在 Sql 2k 中，即使您涉及一个单一的数据库，事务也将由 MSDTC 管理。对于 Sql2k5，事务由 LTM 管理，直到连接到不同数据库的第二个 SqlConnection 出现。当这种情况发生时，事务就会从 LTM 提升到 MSDTC。*

[http://dotnetslackers.com/SQL/re-3463_SqlTransaction_vs_System_Transactions.aspx](http://dotnetslackers.com/SQL/re-3463_SqlTransaction_vs_System_Transactions.aspx)

# git - 捆绑提交/在推送时将提交保密

> ID：12157342
> 
> 赞同：4
> 
> 时间：2012-08-28T10:25:12.600
> 
> 标签：git, mercurial

我想在推送时保持一些提交的私密性，所以我希望它们被捆绑到远程端的一个大提交中。在本地，他们应该保持分裂。

例如，一个用例是静态博客上的工作。草稿步骤应在本地提交和跟踪，但在推送时我只想发布已发布的版本。

将接受 git 和/或 mercurial 中的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T12:56:23.070

在 Mercurial 2.1 及更高版本中，您可以使用[阶段](http://mercurial.selenic.com/wiki/Phases)将变更集标记为“秘密”。这会将所有传出的变更集标记为机密：

```
$ hg phase -f --secret "outgoing()" 
```

默认情况下不会推送或拉取秘密变更集，因此在该命令之后不会有任何传出变更集 - 根据需要进行调整以将正确的变更集标记为秘密。

您还说您希望将变更集作为远程存储库中的一个大提交。为此，您可以使用与 Mercurial 2.3 及更高版本捆绑的[histedit 扩展。](http://mercurial.selenic.com/wiki/HisteditExtension)使用该`--keep`标志，以便在折叠它们时它不会删除原始变更集。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T10:49:29.793

这个想法是在专用分支上进行提交，但`git merge --squash`在`master`（或您打算推送的任何其他公共分支）上进行提交，因为它会产生一个大提交。
然后，您将推`master`送远程存储库。

请参阅“在 git 中，[和](https://stackoverflow.com/questions/2427238/in-git-what-is-the-difference-between-merge-squash-and-rebase)[有什么区别？`merge --squash``rebase`](https://stackoverflow.com/questions/2427238/in-git-what-is-the-difference-between-merge-squash-and-rebase) ”

# iphone - 如何从 Core Data 中的 UIImageView 保存 UIImage

> ID：12157347
> 
> 赞同：0
> 
> 时间：2012-08-28T10:25:44.147
> 
> 标签：iphone, ios, core-data, uiimageview

我在 UIImageView 中有问题。在我的项目中，我使用了两个`UIImageView`（`mainview`用于保存背景颜色和`drawimage`绘图），一个作为另一个的子视图：

```
[self.view addSubview:mainview];
[self.mainview addSubview:drawImage]; 
```

问题是，每当我尝试将对象保存在 Core Data 中时，只会保存一张图像。这是我的代码：

```
 if(checkedcore==YES)
                {

                 NSData *imageData = UIImageJPEGRepresentation(mainview.image,1.0);
                NSManagedObject *imagetblObj= [NSEntityDescription insertNewObjectForEntityForName:@"Imagedata" inManagedObjectContext:context];

                //[imagetblObj setValue:<#(id)#> forKey:<#(NSString *)#>]

                //[imagetblObj setValue:self.imageData forKey:@"imageData"];
                [imagetblObj setValue:imageData forKey:@"imageData"];
                [imagetblObj setValue:self.textfield.text forKey:@"date"];
                [imagetblObj setValue:@"table" forKey:@"tabletext"];

                [context deleteObject:imagemanaged];

                [context insertObject:imagetblObj];

                NSError *err;
                if (![context save:&err]) 
                {
                    NSLog(@"Couldn't save history item into coredata");
                }
                else
                {

                    NSLog(@"data saved");
                }

                UIAlertView *alertview=[[UIAlertView alloc]initWithTitle:@"" message:@"Image Updated" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                [alertview show];

                NSLog(@"data saved");

                NSLog(@"save clicked");

                /// [self getcoredata];

               // TextPlacedViewController *viewcontroller=[[TextPlacedViewController alloc]initWithNibName:@"TextPlacedViewController" bundle:nil];
                ///viewcontroller.tabledata=self.array;
                ////viewcontroller.myimage=drawImage.image;
                ///[self.view   addSubview:viewcontroller.view];
                   // [self.navigationController popViewControllerAnimated:YES];
                }
                }

            else
            {
                mainview.image=drawImage.image;
       NSData *imageData = UIImageJPEGRepresentation(mainview.image, 1.0);

            if(![imageData isKindOfClass:[NSNull class]]||imageData==nil)
            {

        NSManagedObjectContext *context = [appDelegate managedObjectContext];
        NSManagedObject *imagetblObj= [NSEntityDescription insertNewObjectForEntityForName:@"Imagedata" inManagedObjectContext:context];

        [imagetblObj setValue:imageData forKey:@"imageData"];

        [imagetblObj setValue:self.textfield.text forKey:@"date"];
       [imagetblObj setValue:@"table" forKey:@"tabletext"];
        NSError *err;
        if (![context save:&err]) 
        {
            NSLog(@"Couldn't save history item into coredata");
        }
        UIAlertView *alertview=[[UIAlertView alloc]initWithTitle:@"" message:@"Data Saved" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alertview show];

        NSLog(@"data saved");

        NSLog(@"save clicked");

        /// [self getcoredata];

        saveimageviewcontroller *viewcontroller=[[saveimageviewcontroller alloc]initWithNibName:@"saveimageviewcontroller" bundle:nil];
        ///viewcontroller.tabledata=self.array;
        ////viewcontroller.myimage=drawImage.image;
        ///[self.view   addSubview:viewcontroller.view];
        [self.navigationController pushViewController:viewcontroller animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:25:29.187

清理你的代码：

*   从图像视图中获取图像
*   将其转换为`NSData`
*   将其保存在您的核心数据实体中

# c# - 签名组装问题

> ID：12157349
> 
> 赞同：0
> 
> 时间：2012-08-28T10:25:59.183
> 
> 标签：c#, .net, .net-assembly, signing

我的项目中有一个 WCF 服务。它引用了另一个带有服务合同接口的程序集。在我使用密钥与合同签署参考并对合同和服务进行更改之前，一切都运行良好。

重建后，我开始遇到这样的异常：来自程序集 ZZZ 的 YYY 类型的方法 XXX 没有实现。

似乎该服务正在使用带有合同的旧 dll，但找不到原因。当我使用反射器查看生成的 dll 时 - 没有旧代码 - 合同和服务的签名是相同的。如果我从合同中删除签名 - 一切都很完美。

出于测试目的，服务在 Cassini Web 服务器下运行。还尝试在 IIS 下运行它。我以前的解决方案是删除 ASP.NET 临时文件。现在它没有帮助。

合同的参考是为共享点的需要而签署的。如果我从 GAC 中删除此引用，该错误也会消失。但是为什么服务项目要在 GAC 中寻找这个 dll 呢？有解决方法吗？

将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:32:07.937

这就是 CLR 的特点。如果程序集是强命名的 - CLR 将在 GAC 中搜索它。所以在我的情况下 - 我应该在 GAC 中保留我的 DLL 的正确版本或从那里删除它。

# python - PyMongo 和 gevent 的死锁

> ID：12157350
> 
> 赞同：3
> 
> 时间：2012-08-28T10:26:05.180
> 
> 标签：python, mongodb, pymongo, gevent, greenlets

我在 Django 应用程序中一起使用 PyMongo 和 gevent。在生产中，它托管在 Gunicorn 上。

我在应用程序启动时创建了一个 Connection 对象。我有一些后台任务连续运行并每隔几秒钟执行一次数据库操作。

该应用程序还像任何 Django 应用程序一样提供 HTTP 请求。

我遇到的问题如下。它只发生在生产中，我无法在我的开发环境中重现它。当我让应用程序空闲一会儿（尽管后台任务仍在运行）时，在第一个 HTTP 请求（实际上是前几个）上，我执行的第一个“查找”操作永远不会完成。greenlet 实际上永远不会恢复。这会导致前几个 HTTP 请求超时。

我该如何解决？这是 gevent 和/或 PyMongo 中的错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:37:40.013

我发现了问题所在。默认情况下，PyMongo 没有在连接上定义网络超时，所以发生的事情是池中的连接断开连接（因为它们有一段时间没有使用）。然后，当我尝试重用连接并执行“查找”时，需要很长时间才能检测到连接已失效（大约 15 分钟）。当检测到连接失效时，“find”调用最终会引发 AutoReconnectError，并生成一个新连接以替换旧连接。

解决方法是设置一个小的网络超时时间（15 秒），这样“find”的调用会阻塞 greenlet 15 秒，引发 AutoReconnectError，当“find”重试时，它会获得一个新的连接，并且操作成功。

# java - 如何以编程方式识别 zip 或 rar 文件在 java 中是否被拆分？

> ID：12157356
> 
> 赞同：3
> 
> 时间：2012-08-28T10:26:23.100
> 
> 标签：java, zip, rar

我需要确定是否拆分了特定的 zip 或 rar 文件。

java中有没有处理归档文件的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:34:21.983

通常多卷 RAR 文件将遵循以下命名约定：

```
somefile.part01.rar
somefile.part02.rar
somefile.part03.rar 
```

或者，使用旧的命名约定，如下所示：

```
somefile.r00
somefile.r01
somefile.r02 
```

对于 Zip 文件：包含 20 个拆分文件的拆分存档文件通常命名为（将 ARCHIVE 替换为您的存档名称）：

```
ARCHIVE.z01 
ARCHIVE.z02 
... 
ARCHIVE.z19 
ARCHIVE.zip 
```

请注意，最后一个文件是 .zip 文件。

有关更多信息，请查看：

[http://www.info-zip.org/mans/zip.html](http://www.info-zip.org/mans/zip.html)

[http://kb.winzip.com/kb/entry/154/](http://kb.winzip.com/kb/entry/154/)

# android - Android尝试在关闭的流上读取错误？

> ID：12157358
> 
> 赞同：1
> 
> 时间：2012-08-28T10:26:29.653
> 
> 标签：android, xmlpullparser

我正在尝试解析 xml，但是在 setInput 方法**parser.setInput(responseStream, null);时出现错误**

responseStream 值越来越好。

错误是这样的，

```
08-28 15:47:37.069: WARN/System.err(5429): Invalid stream or encoding: java.io.IOException: Attempted read on closed stream. (position:START_DOCUMENT null@1:1) caused by: java.io.IOException: Attempted read on closed stream.; nested exception is:
08-28 15:47:37.107: WARN/System.err(5429): java.io.IOException: Attempted read on closed stream.
08-28 15:47:37.165: WARN/System.err(5429):     at org.apache.http.conn.EofSensorInputStream.isReadAllowed(EofSensorInputStream.java:127)
08-28 15:47:37.165: WARN/System.err(5429):     at org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:138)
08-28 15:47:37.186: WARN/System.err(5429):     at org.kxml2.io.KXmlParser.setInput(KXmlParser.java:1623)
08-28 15:47:37.196: WARN/System.err(5429):     atin.project.parser.Getparser.parser(Getparser.java:31)
08-28 15:47:37.246: WARN/System.err(5429):     atin.project.home.HomePgae$DataProvide.doInBackground(HomePgae.java:313)
08-28 15:47:37.279: WARN/System.err(5429):     atin.project.home.HomePgae$DataProvide.doInBackground(HomePgae.java:1)
08-28 15:47:37.279: WARN/System.err(5429):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
08-28 15:47:37.286: WARN/System.err(5429):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-28 15:47:37.306: WARN/System.err(5429):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-28 15:47:37.306: WARN/System.err(5429):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
08-28 15:47:37.446: WARN/System.err(5429):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
08-28 15:47:37.516: WARN/System.err(5429):     at java.lang.Thread.run(Thread.java:856) 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:29:26.793

该错误告诉您 responseStream 已经调用了 .close() 。您之前是否在代码中使用过 responseStream 或将其与任何其他调用过 .close() 的流一起包装？

# c# - 为什么我收到消息双向绑定需要路径或 XPath。？

> ID：12157360
> 
> 赞同：1
> 
> 时间：2012-08-28T10:26:35.077
> 
> 标签：c#, wpf, data-binding, two-way-binding

我在运行时创建 a`TextBox`和 a 并`TextBlock`在运行时将其绑定到数据库字段。代码如下：

```
LstConfigFields = dbContext.ConfigFields.Where(c => c.ConfigId == this.Uid).ToList();
foreach (ConfigField rec in LstConfigFields)
{
    TextBlock TBlock = new TextBlock();
    TBlock.Text = rec.TextBlockText;

    TextBox TBox = new TextBox();                
    TBox.SetBinding(TextBox.TextProperty,new Binding(rec.DatabaseField));

    if ((bool)rec.IsVisible)
    {
        stackPanel1.Children.Add(TBlock);
        stackPanel1.Children.Add(TBox);
    }
} 
```

但我收到这条消息：

> 双向绑定需要 Path 或 XPath。

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:29:05.293

如果 DatabaseField 是只读的，您应该使用[OneWay Binding](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.mode%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:26:28.827

如果`Text`绑定对象的属性包含特定于`XPath`语法的符号，动态绑定将尝试解释它们，从而通过创建错误绑定使整个过程失败

# java - 使用不同的用户名访问 HDFS

> ID：12157362
> 
> 赞同：0
> 
> 时间：2012-08-28T10:26:48.000
> 
> 标签：java, hdfs

我正在编写一个 Java 模块，我需要在其中使用 hdfs URI 访问 HDFS 文件系统。执行模块的用户可能与启动 namenode 和 datanode 的用户不同。

此外，java 模块和 hadoop 集群有可能在不同的机器上运行。

我面临的问题是，当我尝试使用 FileSystem 对象访问 hdfs 时，用于访问 FS 对象的用户名是运行 java 模块的本地用户。

我的问题是我们如何通过使用启动 namenode 和 datanode 实例的相同用户名来强制访问 HDFS。

我尝试设置 user.name 系统属性，但即使这样也没有用。我在几个地方阅读了将 whoami 的实现放在运行我的 java 模块的机器上，因为客户端代码使用此命令来获取用户名。

我想知道是否有其他方法可以实现这一目标？

问候萨哈尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T00:08:03.197

对于 Java 程序，您可以使用CDH3 或 1.x 及更高版本中提供的[安全模拟功能。](http://hadoop.apache.org/docs/stable/Secure_Impersonation.html)

# ruby-on-rails - 来自 Sage Pay 响应的 Ruby Hash

> ID：12157365
> 
> 赞同：0
> 
> 时间：2012-08-28T10:26:58.260
> 
> 标签：ruby-on-rails, hash, split

我`@response`收到了 Sage Pay 的回复：

```
VPSProtocol=2.23 Status=OK StatusDetail=Server transaction registered successfully. VPSTxId={C9B14A59-1EB7-4A56-A4B1-29B84BE4861B} SecurityKey=VGGPR12XC1 NextURL=https://test.sagepay.com/Simulator/VSPServerPaymentPage.asp?TransactionID={C9B14A59-1EB7-4A56-A4B1-XXXXXXXXXXXXX} 
```

如何将其拆分为以下哈希：

```
@response['VPSProtocol'] = "2.23"
@response['Status'] = "OK"
.... 
```

?

（响应中的参数是换行符分开的`\r\n`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:35:44.130

你可以做这样的事情......

```
response = "VPSProtocol=2.23\r\nStatus=OK\r\nStatusDetail=Server transaction registered successfully."
response_hash = {}

response.split("\r\n").map do |value|
  key, value = value.split("=")
  response_hash[key] = value
end

print response_hash 
```

我确信 ruby​​ 中有一种方便的方法来进行这种映射，但这是一个快速的解决方案。希望听到来自社区的一些更好的想法！

# overflow - 变换比例和高度 100%

> ID：12157370
> 
> 赞同：0
> 
> 时间：2012-08-28T10:27:22.620
> 
> 标签：overflow, scale, css-animations, css

所以我使用 css 动画来转换覆盖整个页面区域的 div 的比例（按位置：绝对；左：0px；上：0px；右：0px；最小高度：100%；z-index： 5;)。最小高度是在 div 中溢出的情况下，因此页面滚动，并且背景在 div 的整个长度上保持不变。

问题是当溢出时，我将潜水从 1 缩放到 0.9，当我滚动到页面底部时，div 的底部仍然触及浏览器窗口的底部（底部没有边距), 而当没有溢出时, div 周围有一个很好的边距, 显示了它下面的图层颜色 (位置: 固定; 左: 0px; 上: 0px; 右: 0px; 下: 0px; z-指数：1；）。

但是，如果您加载带有溢出的页面，而不是缩小它以创建溢出，它会在比例更改后在所有侧面呈现边距。

当发生溢出时，我希望在所有情况下仍然有一个边距，我将如何做到这一点？

[活生生的例子](http://r3dux.com/css/shrink.php)

![在此处输入图像描述](../Images/0d297c430c9b177cd7c9e6a9f4329db6.png)

以下是所有代码：

```
<html>
<head>
<title>Shrink Wrap</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<style>

#gbx_outside    {
    position: fixed;
    left: 0px;
    top: 0px;
    right: 0px;
    bottom: 0px;
    background: rgb(60,60,60);
    z-index: 1;
}

#gbx_box    {
    position: absolute;
    display: block;
    left: 0px;
    top: 0px;
    right: 0px;
    min-height: 100%;
    background: rgb(255,255,255);
    scale: .9;
    z-index: 5;
    transform: scale(.9);
}

.gbx_boxShrink {
    -webkit-animation: gbx_boxShrink 300ms linear;
    -moz-animation:    gbx_boxShrink 300ms linear;
    -ms-animation:  gbx_boxShrink 300ms linear;
    -o-animation:    gbx_boxShrink 300ms linear;
    -webkit-animation-fill-mode: forwards;
    -moz-animation-fill-mode: forwards;
    -ms-animation-fill-mode: forwards;
    -o-animation-fill-mode: forwards;
    box-shadow: 0px 10px 20px rgb(0,0,0);
}

@-webkit-keyframes gbx_boxShrink {
    0%   { -webkit-transform: scale(1); }
    100% { -webkit-transform: scale(.9); }
}
@-moz-keyframes gbx_boxShrink {
    0%   { -moz-transform: scale(1); }
    100% { -moz-transform: scale(.9); }
}
@-ms-keyframes gbx_boxShrink {
    0%   { -ms-transform: scale(1); }
    100% { -ms-transform: scale(.9); }
}
@-o-keyframes gbx_boxShrink {
    0%   { -o-transform: scale(1); }
    100% { -o-transform: scale(.9); }
}

</style>
<meta name="viewport" content="width=device-width">
</head>
<body>

<div id="gbx_box" class="gbx_boxShrink">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque sed elit felis. Maecenas ut magna eget sem elementum semper eu at purus. Pellentesque odio augue, mollis vel cursus ut, egestas nec lacus. Nulla at magna a ipsum posuere euismod eget vel ligula. Nunc tincidunt, ipsum ac lobortis sollicitudin, diam quam vehicula sem, et tincidunt massa enim ac odio. Sed eros mi, consectetur ut blandit id, placerat non sem. Phasellus tristique bibendum dictum. Pellentesque et arcu vitae nisi luctus vehicula. Etiam pretium porttitor urna sed fringilla. Morbi interdum luctus quam eu ornare. Quisque vehicula est vel lectus tincidunt suscipit laoreet diam sodales. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Phasellus faucibus nunc vitae nunc molestie quis dictum dolor malesuada. Cras pulvinar, felis non aliquam pharetra, enim orci lacinia velit, id dapibus leo risus vel nisi. Aliquam eget neque tortor. Cras sit amet nulla velit, sit amet vehicula nibh.

Praesent bibendum, magna viverra faucibus eleifend, odio dui mattis sapien, auctor rutrum orci arcu in urna. Ut et elit mi, nec tincidunt quam. Morbi venenatis lectus quis turpis interdum et consectetur eros tristique. Pellentesque a lectus sapien. Nullam sagittis dictum blandit. Donec elementum, velit a interdum gravida, magna dolor euismod elit, vel tincidunt dui lorem eget tortor. Vivamus nec massa orci. In hendrerit erat a leo pretium at volutpat ante condimentum. Proin nunc risus, dictum at condimentum sed, scelerisque quis nulla. Donec tristique nunc eget elit suscipit eu fermentum odio semper. Donec sed mi in sem ultricies hendrerit ac a nunc. Suspendisse fringilla massa sit amet massa ultricies iaculis tincidunt lacus euismod. Vestibulum volutpat pulvinar pretium. Pellentesque cursus pharetra erat a cursus.

Suspendisse potenti. Pellentesque rhoncus porttitor dui, at tempus ligula dictum ac. Fusce in justo at tortor pretium lacinia. Cras eu nulla ut turpis molestie aliquet sed iaculis enim. Mauris in rhoncus erat. Praesent nec arcu quis tellus dapibus imperdiet. Nunc pellentesque iaculis ipsum ut adipiscing. Duis placerat placerat orci faucibus aliquet. Proin in nisl massa, vitae accumsan libero. Integer cursus, arcu quis dignissim consectetur, orci magna elementum neque, in varius purus nunc eu tortor. Integer non massa diam, nec vulputate risus. Ut nec velit metus.

Ut vulputate aliquet porttitor. Donec nec augue eros. In hac habitasse platea dictumst. Nunc lorem augue, vehicula in condimentum non, commodo eu libero. Morbi erat elit, vehicula ac sodales at, sollicitudin scelerisque ante. Fusce blandit, arcu eget ultrices lobortis, eros enim fermentum magna, a consectetur dui velit id metus. Sed tempus, magna id ornare facilisis, purus tortor volutpat dui, porta aliquet urna neque ac diam. Aenean vel turpis et mauris pulvinar volutpat quis ut magna.

Praesent ut dignissim urna. Quisque malesuada elementum lorem, quis tempus neque semper vitae. Fusce vulputate pulvinar rhoncus. Nam sit amet bibendum augue. Aenean tempus gravida orci. Ut eget diam ut ante rhoncus consectetur. Vivamus placerat feugiat enim, at mattis enim fermentum vitae. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Mauris erat urna, adipiscing at auctor et, sodales vel orci.</div>
<div id="gbx_outside"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T15:44:03.457

min-height 不会为溢出做任何事情。将其更改为 height 属性并添加 overflow-y: auto; 到内盒。

# java - Rally API 新手，尝试添加测试用例结果

> ID：12157377
> 
> 赞同：1
> 
> 时间：2012-08-28T10:27:50.260
> 
> 标签：java, soap, rally

我刚刚开始研究集会 API。我想创建一个新的测试用例结果，但我不断收到异常并且不知道为什么。我认为这将是导致它的真正愚蠢的东西，但我无法弄清楚。

这是我的代码：

```
public static void updateRally(){
    URL url
    RallyService service = null
    try{
        url = new URL("https://rally1.rallydev.com/slm/webservice/1.36/RallyService")
        service = (new RallyServiceServiceLocator()).getRallyService(url)
    } catch (MalformedURLException e){
        e.printStackTrace()
        throw new Exception("RallyWebServiceClient.main problem in creating the url")
    } catch (Exception e){
        e.printStackTrace()
        throw new Exception("RallyWebServiceClient.main problem in creating the service")
    }

    if (service == null){
        println("Error: Service is null")
        throw new Exception("RallyWebServiceClient.main service null...")
    }

    //Set authentication information on the service
    Stub stub = (Stub)service
    stub.setUsername("MyUsername")
    stub.setPassword("MyPassword")

    //Configure the service to maintain an HTTP session cookie
    stub.setMaintainSession(true)

    //Start calling methods on the service
    User user = (User)service.getCurrentUser()
    println(user.getDisplayName())

    TestCase testCase = new TestCase()
    testCase.setName("TC7571")

    TestCaseResult result = new TestCaseResult()
    result.setTestCase(testCase)
    result.setBuild("1.16.0-SNAPSHOT-6256")
    result.setDuration(1.0)
    result.setTester(user)
    result.setVerdict("Pass")

    CreateResult createResult = service.create(result)
} 
```

我一直被告知在主线程中有一个异常，代码为 1。它没有超过读取 User user = (User)service.getCurrentUser() 的行

我按照在 Rally 网站上找到的指南进行操作。我怀疑问题出在我使用的 URL 上。我还尝试了 WSDL 的 URL 而不是上面的内容，并遇到了同样的问题。

我感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:44:07.403

我们建议新用户尝试我们的 REST api 而不是 SOAP：

[http://developer.rallydev.com/help/java-toolkit-rally-rest-api](http://developer.rallydev.com/help/java-toolkit-rally-rest-api)

然后，您应该能够执行以下操作：

```
RallyRestApi restApi = new RallyRestApi(new URI("https://rally1.rallydev.com"), "user@company.com", "password");

JsonObject newTestCase = new JsonObject();
newTestCase.addProperty("Name", "Awesome Test");
CreateRequest createRequest = new CreateRequest("testcase", newTestCase);
CreateResponse createResponse = restApi.create(createRequest);

String newTestCaseRef = createResponse.getObject().get("_ref").getAsString(); 
```

# android - 带有 WebViewClient 的 Android WebView - 使用 onReceivedHttpAuthRequest 进行身份验证

> ID：12157378
> 
> 赞同：3
> 
> 时间：2012-08-28T10:27:51.997
> 
> 标签：android, authentication, webview, authorization, webviewclient

在我的应用程序中，我将 WebView 与 WebViewClient 一起使用，并使用覆盖方法 onReceivedHttpAuthRequest，在该方法中，我使用 AlertDialog 提示用户输入他的凭据。输入凭据后，我打电话

```
handler.proceed(username, password); 
```

**我的问题是：** 在 Android 4 模拟器中，一切正常，用户可以毫无问题地浏览经过身份验证的站点，但在较旧的 Android 版本中，似乎每次用户刷新或导航到经过身份验证的站点中的另一个页面时都会调用 onReceivedHttpAuthRequest。

有人可以建议我吗，我做错了什么？谢谢你。

**我尝试了什么：**

也叫

```
webView.setHttpAuthUsernamePassword(host, realm, username, password); 
```

当输入凭据并在 onReceivedHttpAuthRequest 中调用登录对话框之前添加这段代码时：

```
String[] usernamePassword = webView.getHttpAuthUsernamePassword(host, realm);
if (usernamePassword!=null) {
    handler.proceed(usernamePassword[0], usernamePassword[1]);
    return;
} 
```

对我不起作用-用户可以浏览经过身份验证的站点，但是注销后，用户名和密码仍存储在 webView 中，并且用户再次自动登录-**在这种情况下，我需要检测用户的注销并删除存储的凭据**，有人可以吗告诉我，如何做到这一点？

**非常感谢！**

# android - Android 从 youtube 获取视频链接

> ID：12157379
> 
> 赞同：4
> 
> 时间：2012-08-28T10:27:55.673
> 
> 标签：android, youtube-api

您好正在开发一个 android 应用程序，我的应用程序的一部分想要将歌曲标题解析到 youtube 并获取视频链接。获得 100% 正确的视频并不重要。那么我如何从 youtube 检索数据？

任何人都可以帮助我找到解决方案，这对我来说真的很有帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T10:36:59.277

最常见的方法是使用 Youtube 数据 API，它将返回 XML/Json，您可以对其进行解析以检索视频 url 之类的内容。

**更新 (2017/01/24) (v3)**

使用以下调用通过搜索查询搜索 YouTube 视频：

```
https://www.googleapis.com/youtube/v3/search?part=snippet&q=fun%20video&key=YOUR-API-KEY 
```

它支持以下搜索的基本参数：

*   **part** : 要在搜索中检索的视频数据。对于基本搜索，推荐值为**snippet**。
*   **q**：要搜索的文本
*   **key**：您的 Google Developer API 密钥。可以在应用程序的凭据页面上的[Google Developer API 控制台获取此密钥。](https://console.developers.google.com/)确保在您的密钥所属的应用程序上启用 Youtube Data API v3。

有关更多参数，请参阅[Google API 文档](https://developers.google.com/youtube/v3/docs/search/list)

**使用 Java 库**

在 Android 上，您可以使用平台上可用的标准 HTTP 请求类对 URL 进行 HTTP 请求，也可以使用[Google API Java 库](https://developers.google.com/api-client-library/java/)，如下所示：

```
 YouTube youtube = new YouTube.Builder(Auth.HTTP_TRANSPORT, Auth.JSON_FACTORY, new HttpRequestInitializer() {
            public void initialize(HttpRequest request) throws IOException {
            }
        }).setApplicationName("YOUR-APPLICATION-NAME").build();

        String queryTerm = "A fun video"

        // Define the API request for retrieving search results.
        YouTube.Search.List search = youtube.search().list("id,snippet");

        search.setKey("Your-Api-Key");
        search.setQ(queryTerm);

        // Call the API and print first result.
        SearchListResponse searchResponse = search.execute();
        if(searchResponse.getItems().size() == 0)
        { 
           //No items found.
           return;
        }
        SearchResult firstItem = searchResponse.getItems().get(0);

        ResourceId rId = firstItem.getId();
        // Confirm that the result represents a video. Otherwise, the
        // item will not contain a video ID.
        if (rId.getKind().equals("youtube#video")) {
            Thumbnail thumbnail = firstItem.getSnippet().getThumbnails().getDefault();

            Log.d("YOUTUBE_SAMPLE","Video Id" + rId.getVideoId());
            Log.d("YOUTUBE_SAMPLE","Title: " + firstItem.getSnippet().getTitle());
            Log.d("YOUTUBE_SAMPLE","Thumbnail: " + thumbnail.getUrl());
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:34:42.223

你应该寻找官方的 Youtube API：

[https://developers.google.com/youtube/code?hl=fr#Java](https://developers.google.com/youtube/code?hl=fr#Java)

返回您只需解析的 Json。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T06:23:52.180

嗨，谢谢大家为我指出我想要休闲的方式。我终于想出了一些东西，也想分享我的过期

根据 youtube，我们可以请求 xml 或 json 格式的数据。我使用 json 方法来实现

[http://gdata.youtube.com/feeds/api/videos?q=title_you_want_to_search&max-results=1&v=2&alt=jsonc](http://gdata.youtube.com/feeds/api/videos?q=title_you_want_to_search&max-results=1&v=2&alt=jsonc)

[您可以从youtube 开发者指南](https://developers.google.com/youtube/2.0/developers_guide_jsonc)中获取更多信息

以上请求“title_you_want_to_search”是您要搜索的关键字。我们可以通过将额外的参数传递给 url 来自定义结果。

*   "max-results" ：提及您想要获得多少个结果（在我的情况下，我只想要一个）
*   "alt" : 你想要的结果格式为 Json 或 xml

首先我们需要从 Youtube api 请求数据，然后我们必须从数组中选择我们想要选择的信息的哪一部分。就我而言，我使用“数据”和“项目”来获取视频 ID。在我们添加 videoId 之后，我们可以像这样制作视频 URL

`String mVideoLink = "https://youtu.be/"+videoID;` （我使用以下功能来完成这件事）

```
public String readYoutubeFeed(String songTitle) {
StringBuilder builder = new StringBuilder();
HttpClient client = new DefaultHttpClient();
String url = "http://gdata.youtube.com/feeds/api/videos?q="+songTitle+"&max-results=1&v=2&alt=jsonc";
try {
    URLEncoder.encode(url, "UTF-8");
} catch (UnsupportedEncodingException e1) {
    e1.printStackTrace();
    Log.v(TAG,"encode error");
  }
 HttpGet httpGet = new HttpGet(url);        
    try {
      HttpResponse response = client.execute(httpGet);
      StatusLine statusLine = response.getStatusLine();
      int statusCode = statusLine.getStatusCode();
      if (statusCode == 200) {
         HttpEntity entity = response.getEntity();
         InputStream content = entity.getContent();
         BufferedReader reader = new BufferedReader(new InputStreamReader(content, "UTF-8"));
        String line;
        while ((line = reader.readLine()) != null) {
          builder.append(line);
        }
      } else {
        Log.v(TAG,"Failed to download file");
      }
    } catch (ClientProtocolException e) {
      e.printStackTrace();
      Log.v(TAG,"readYoutubeFeed exeption1");
    } catch (IOException e) {
      e.printStackTrace();
      Log.v(TAG,"readYoutubeFeed exeption2");
    }
    return builder.toString();
  }

public String getYouTubeVideoId(String songTitle){
String jesonData = readYoutubeFeed(songTitle);
Log.i(TAG,jesonData);
String title = "123";        
try {       
    SONObject jObj = new JSONObject(jesonData); 
    JSONArray ja = jObj.getJSONObject("data").getJSONArray("items");
    JSONObject jo = (JSONObject) ja.get(0);
    title = jo.getString("id");              
    Log.v(TAG,"id is " +title);

} catch (Exception e) {
    e.printStackTrace();
    Log.v(TAG,"error occerd");
  }
return title; 
```

}

在将字符串转换为“UTF-8”时要提到的一件重要事情是要做，因为创建 JsonArray 可能会引发异常。可能有更好的方法来做到这一点。如果有什么建议

# cakephp - 如何计算cakephp中的重复值？

> ID：12157380
> 
> 赞同：2
> 
> 时间：2012-08-28T10:27:59.983
> 
> 标签：cakephp, count, rows

我需要找出每个值重复了多少次。这是我到目前为止所得到的。我想用它来计算民意调查中的选票。

```
$this->set('votes', $this->Answer->Vote->find('all', array(
                    'fields' => array('Vote.answer_id'),
                    'group' => array('Vote.answer_id HAVING COUNT(*) > 1')))); 
```

它返回我哪些值是重复的，如下所示：

```
1st answer
2nd answer
4th answer 
```

但我仍然需要这个数字，以显示它被复制了多少次。像这样的东西。

```
1st answer (5)
2nd answer (3)
3rd answer (1) // not duplicated
4th answer (8) 
```

编辑：对我有用的解决方案

在控制器中：

```
$this->set('votes', $this->Answer->Vote->find('all', array(
       'fields' => array('Vote.answer_id', 'count(*) as TotalVotes'),
       'group' => array('Vote.answer_id HAVING COUNT(*) >= 1')))); 
```

鉴于：

```
foreach ($votes as $vote):
echo $vote[0]['TotalVotes'];
endforeach; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:41:43.390

此查询将起作用。

```
SELECT answer_id, COUNT(*) AS TotalVotes FROM votes GROUP BY answer_id HAVING COUNT(*) > 1 
```

CakePHP 等效的查找条件：

```
$result = $this->Answer->Vote->find('all', array(
                'fields' => array('Vote.answer_id', 'count(*) as TotalVotes'),
                'group' => array('Vote.answer_id HAVING COUNT(*) > 1'))); 
```

您将`TotalVotes`在一个单独的数组中找到`index [0]`. 要克服这个问题，只需在选择查询之前编写以下代码：

```
$this->Answer->Vote->virtualFields['TotalVotes'] = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T06:05:56.763

这也有效：

```
 $this->set('votes', $this->Answer->Vote->find('all', array(
       'fields' => array(
           '*',
           '(SELECT COUNT(*) FROM votes WHERE answer_id = Vote.answer_id) AS `count`'),
       'group' => array('Vote.answer_id HAVING COUNT(*) >= 1')
                                ))); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-05T09:42:43.473

**在这里您可以从多个重复记录中搜索记录组**

```
 public function admin_duplicate_account() {
        $this->User->unBindModel(array('hasOne' => array('Admin')));
        $condition = array(
            'User.role' => array('U', 'P'),
            'User.user_status' => array('active', 'lead', 'inactive'),
        );
         $arr_group = $arr_having = array();

        if ($this->request->is('post') || $this->request->is('put')) {
            //pr($this->request->data); exit;

            if ($this->request->data['User']['email'] == 1) {
                $arr_group[] = 'User.email';
                $arr_having[] = 'count(User.email) > 1';
            }

            if ($this->request->data['User']['first_name'] == 1) {
                $arr_group[] = 'PersonalInformation.first_name';
                $arr_having[] = 'count(PersonalInformation.first_name) > 1';
            }
            if ($this->request->data['User']['last_name'] == 1) {
                $arr_group[] = 'PersonalInformation.last_name';
                $arr_having[] = 'count(PersonalInformation.last_name) > 1';
            }

            if ($this->request->data['User']['primary_phone'] == 1) {
                $arr_group[] = 'PersonalInformation.primary_phone';
                $arr_having[] = 'count(PersonalInformation.primary_phone) > 1';
            }

            if ($this->request->data['User']['dob'] == 1) {
                $arr_group[] = 'PersonalInformation.dob';
                $arr_having[] = 'count(PersonalInformation.dob) > 1';
            }
        }
//       pr($arr_group); 
//        pr($arr_having);  exit;
        if ($arr_group) {
            $arr_group = implode(' , ', $arr_group);
            $arr_having = implode(' && ', $arr_having);
            $group = array("$arr_group HAVING $arr_having");
        } else {
            $group = array();
        }
        $data = $this->User->find('all', array(
//            'fields'=>'count(User.email)',
            'conditions' => $condition,
//            'fields' => 'count(User.email,PersonalInformation.first_name, PersonalInformation.last_name,PersonalInformation.primary_phone,PersonalInformation.dob)',
//            'group' => array('User.email, PersonalInformation.first_name, PersonalInformation.last_name,PersonalInformation.primary_phone,PersonalInformation.dob HAVING count(User.email) > 1 &&  count(PersonalInformation.first_name) > 1 &&  count(PersonalInformation.last_name) > 1 &&  count(PersonalInformation.dob &&  count(PersonalInformation.primary_phone))')
            'group' => $group
        ));
        //pr($data); exit;
        $this->set('allusers', $data);
        $this->layout = 'admin';
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-03-05T06:09:28.400

```
 public function admin_duplicate_account() {
    $this->User->unBindModel(array('hasOne' => array('Admin')));

    if ($this->request->is('post') || $this->request->is('put')) {
        // pr($this->request->data); exit;
        if ($this->request->data['User']['email'] == 1) {
            $arr_having = array();
            $arr_having['fields'] = 'User.email';
            $arr_having['group'] = 'User.email HAVING COUNT(*) > 1';
            $regs = $this->User->find('all', $arr_having, array('conditions' => array('User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive'))));
            $names = array();
            foreach ($regs as $reg) {
                if ($reg['User']['email']) {
                    $names[] = $reg['User']['email'];
                }
            }

            $this->set('allusers', $this->User->find('all', array(
                        'conditions' => array('User.email' => $names, 'User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive')))));
        }

        if ($this->request->data['User']['first_name'] == 1) {
            $arr_having = array();
            $arr_having['fields'] = 'PersonalInformation.first_name';
            $arr_having['group'] = 'PersonalInformation.first_name HAVING COUNT(*) > 1';

            $regs = $this->User->find('all', $arr_having, array('conditions' => array('User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive'))));

            //pr($regs); exit;
            $names = array();
            foreach ($regs as $reg) {

                if ($reg['PersonalInformation']['first_name']) {
                    $names[] = $reg['PersonalInformation']['first_name'];
                }
                //$names[] = $reg['PersonalInformation']['first_name'];
            }
            //pr($names); 
            $data = $this->User->find('all', array(
                'conditions' => array('PersonalInformation.first_name' => $names, 'User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive'))));
            //pr($data); exit;

            $this->set('allusers', $data);
        }

        if ($this->request->data['User']['last_name'] == 1) {

            $arr_having = array();
            $arr_having['fields'] = 'PersonalInformation.last_name';
            $arr_having['group'] = 'PersonalInformation.last_name HAVING COUNT(*) > 1';

            $regs = $this->User->find('all', $arr_having, array('conditions' => array('User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive'))));

            //pr($regs); exit;
            $names = array();
            foreach ($regs as $reg) {

                if ($reg['PersonalInformation']['last_name']) {
                    $names[] = $reg['PersonalInformation']['last_name'];
                }
                //$names[] = $reg['PersonalInformation']['first_name'];
            }
            //pr($names); 
            $data = $this->User->find('all', array(
                'conditions' => array('PersonalInformation.last_name' => $names, 'User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive'))));
            //pr($data); exit;

            $this->set('allusers', $data);
        }

        if ($this->request->data['User']['primary_phone'] == 1) {

            $arr_having = array();
            $arr_having['fields'] = 'PersonalInformation.primary_phone';
            $arr_having['group'] = 'PersonalInformation.primary_phone HAVING COUNT(*) > 1';

            $regs = $this->User->find('all', $arr_having, array('conditions' => array('User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive'))));

            //pr($regs); exit;
            $names = array();
            foreach ($regs as $reg) {

                if ($reg['PersonalInformation']['primary_phone']) {
                    $names[] = $reg['PersonalInformation']['primary_phone'];
                }
            }
            //pr($names); 
            $data = $this->User->find('all', array(
                'conditions' => array('PersonalInformation.primary_phone' => $names, 'User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive'))));
            //pr($data); exit;

            $this->set('allusers', $data);
        }
        if ($this->request->data['User']['dob'] == 1) {

            $arr_having = array();
            $arr_having['fields'] = 'PersonalInformation.dob';
            $arr_having['group'] = 'PersonalInformation.dob HAVING COUNT(*) > 1';

            $regs = $this->User->find('all', $arr_having, array('conditions' => array('User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive'))));

            //pr($regs); exit;
            $names = array();
            foreach ($regs as $reg) {

                if ($reg['PersonalInformation']['dob']) {
                    $names[] = $reg['PersonalInformation']['dob'];
                }
            }
            //pr($names); 
            $data = $this->User->find('all', array(
                'conditions' => array('PersonalInformation.dob' => $names, 'User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive'))));
            //pr($data); exit;

            $this->set('allusers', $data);
        }
    } else {

        $this->set('allusers', $this->User->find('all', array(
                    'conditions' => array('User.role' => array('U', 'P'), 'User.user_status' => array('active', 'lead', 'inactive')))));
    }

    $this->layout = 'admin';
} 
```

# android - 如何使 ASP PAGE 适合平板电脑的高度？

> ID：12157381
> 
> 赞同：1
> 
> 时间：2012-08-28T10:27:59.983
> 
> 标签：android, asp.net, tabs

我的项目是asp.net。我必须将其转换为标签设备。但设备高度不适合屏幕。我已经在asp页面下面添加了。

```
<meta name="viewport" content="height=device-height,width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=no;" /> 
```

如何更改正确的高度？见下图。浏览器是完全正确的。唯一的问题是高度。

![在此处输入图像描述](../Images/aee304e2f23a55111c3d857b1d6f74b1.png)

![在此处输入图像描述](../Images/a6d7664b0cb24b63b7175ed46fa2fea6.png)

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="MobileApp.Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title></title>
   <meta name="viewport" content="height=device-height,width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=no;" /> 

    <link href="Styles/jquery.mobile-1.0b3.css" rel="stylesheet" type="text/css" />   
       <%-- <script src="Scripts/javascript.js" id="mobile" type="text/javascript" /> --%> 
    <script type="text/javascript">
        function username() {
            if (form1.txtUserName.value == "") {
                form1.txtUserName.focus();
                alert("UserName cannot be blank");
                return false;
            }
            else if(String.length(form1.txtUserName.value) <= 6){
                alert("UserName should be Lessthen Seven Char");
            }
        }

        if (navigator.userAgent.match(/Android/i)) {
            window.scrollTo(0, 1);
        }
    </script>

    <%--<style>
        @media screen and (orientation: landscape) {
        html, body {
            width: 100%;
        }

        .content h1.landscape { display: block }
        .content h1.portrait { display: none }
        }
        @media screen and (orientation: portrait) {
        html, body {
            width: 100%;
        }

        .content .landscape { display: none }
        .content .portrait { display: block }
        }
    </style>--%>

</head>
<body>
    <form id="form1" runat="server" style="background-color:LightSkyBlue; height:100%; min-height:300px">
        <div style="height:100%;">
            <div style="height:20%;"><br />
            <img src="Images/MCSlogo.png" style="margin-left: 25%" height="40px" width="50%" alt="logo" /><br />
                <%--<asp:Image ID="Image1" runat="server" style="margin-left: 25%" ImageUrl="~/Images/MCSlogo.png" height="40px" width="50%"/> --%><br />      
                <asp:Label ID="Label1" runat="server" style="margin-left: 25%" 
                    Text="MCS Mobile POS" Font-Bold="True" Font-Names="Times New Roman" 
                    Font-Size="Medium" ForeColor="#DA251D"></asp:Label>                     
            </div>    
            <div id="content" runat="server" class="content" style="height:70%; min-height:180px">  <br />   
                <%--<asp:Label ID="Label2" runat="server" Text="UserName:" style="text-align:right"
                    Font-Names="Times New Roman" Font-Size="Small"></asp:Label>  --%>  
                <asp:Button ID="Button1" runat="server" Text="UserName :" width="30%" 
                    BackColor="LightSkyBlue" BorderColor="LightSkyBlue" BorderStyle="None" 
                    Font-Names="Times New Roman"/>
                <asp:TextBox ID="txtUserName" runat="server" width="60%" Font-Names="Times New Roman"></asp:TextBox><br />
                <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server"  ControlToValidate="txtUserName" style="margin-left: 25%"
                    ErrorMessage="Please Enter UserName" ForeColor="#FF3300" 
                    Font-Size="Smaller"></asp:RequiredFieldValidator>
                <br />
              <%--  <asp:Label ID="Label3" runat="server" Text="Password :"  style="text-align:right"
                    Font-Names="Times New Roman" Font-Size="Small"></asp:Label>--%>
                <asp:Button ID="Button2" runat="server" Text="Password :" width="30%" 
                    BackColor="LightSkyBlue" BorderColor="LightSkyBlue" BorderStyle="None" 
                    Font-Names="Times New Roman"/>
                <asp:TextBox ID="txtPassword" runat="server" onkeyup="username()" 
                    TextMode="Password" CssClass="txt" width="60%" 
                    Font-Names="Times New Roman"></asp:TextBox><br />
                <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server"  ControlToValidate="txtPassword" style="margin-left: 25%"
                    ErrorMessage="Please Enter Password" ForeColor="#FF3300" 
                    Font-Size="Smaller"></asp:RequiredFieldValidator> <br />
                <br />
                <asp:Button ID="btnSubmit" runat="server" Text="LogIn" 
                    style="margin-left: 10%; " width="80%" 
                    onclick="btnSubmit_Click" Font-Names="Times New Roman" Font-Bold="True" 
                    Font-Size="Medium" SkinID="2" CssClass="button violet" /><br />
            </div>
            <div id="footer" class="footer" style="height:10%;">                           
                <asp:Label ID="Label4" runat="server" Text="&amp;copy M CUBIC SOLUTIONS" style="margin-left:25%"
                    Font-Names="Times New Roman" Font-Size="XX-Small"></asp:Label>      
                <br />                       
            </div>   
        </div>

    </form>
     <%--<script>
         (function () {
             var fixgeometry = function () {
                 /* Some orientation changes leave the scroll position at something
                 * that isn't 0,0\. This is annoying for user experience. */
                 scroll(0, 0);

                 /* Calculate the geometry that our content area should take */
                 var header = $(".header:visible");
                 var footer = $(".footer:visible");
                 var content = $(".content:visible");
                 var viewport_height = $(window).height();

                 var content_height = viewport_height - header.outerHeight() - footer.outerHeight();

                 /* Trim margin/border/padding height */
                 content_height -= (content.outerHeight() - content.height());
                 content.height(content_height);
             }; /* fixgeometry */

             $(document).ready(function () {
                 $(window).bind("orientationchange resize pageshow", fixgeometry);
             });
         })();
    </script> --%>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-20T06:16:08.977

**解决方案是： -**

由于我的编码在 Android 手机和标签中工作，。请参阅以下步骤。

1) 检查电话或标签中的浏览器 2) 如果浏览器不是 Opera Mini。将 Opera Mini 安装到您的手机或标签上。3) 现在 asp.net 页面适合屏幕。

谢谢。

# java - 为 VSS 插件操作定义 MyEclipse 快捷方式

> ID：12157382
> 
> 赞同：1
> 
> 时间：2012-08-28T10:28:02.553
> 
> 标签：java, version-control, keyboard-shortcuts, visual-sourcesafe, myeclipse

我有 MyEclipse Workbench 8.6 用于开发我的项目和 Microsoft Visual SourceSafe (VSS) 作为我的源版本控制器。我通常在 Preferences/Keys 菜单中定义有用的快捷方式，但不能为 VSS 插件操作定义快捷方式。对于示例，我通过以下步骤从 VSS 刷新一个类：

1.  右键单击类并选择`team`菜单项。
2.  选择`Refresh`项目。

我的问题是：

有没有办法通过一个短键来完成上述场景？我真正的手段是：在MyEclipse中定义VSS操作的快捷方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:42:07.650

在 Preferences\General\Keys 下，您可以定义绑定。如果没有这样的命令，您可能应该编写一个插件。你为什么不尝试`Synchronize with repository`或`Team Synchronizing`。

# c++ - IDCT矩阵的无分支生成？

> ID：12157384
> 
> 赞同：1
> 
> 时间：2012-08-28T10:28:04.427
> 
> 标签：c++, c, cuda, dct

我有一些在 GPU 上执行 IDCT 的代码。我注意到在 gpu 上生成 IDCT 矩阵似乎更快，而不是预先计算转换矩阵并将其放入常量内存中。

问题是生成 IDCT 矩阵的代码有一个不适合 GPU 的分支。

我想知道是否有任何替代方法可以在 GPU 上生成更快的 IDCT 矩阵？

```
// Old way
// local_idct[x][y] = idct[x][y]; // read from precalculated matrix in constant memory
// New way
local_idct[x][y] = cos((x+x+1)*y * (PI/16.0f)) * 0.5f * (y == 0 ? rsqrt(2.0f) : 1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:35:08.540

假设您的变换大小很小且固定，您可以只使用该术语的查找表，例如

```
const float y_term[8] = { 1.0f/sqrtf(2.0f), 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, 1.0f };

local_idct[x][y] = cos((x+x+1)*y * (PI/16.0f)) * 0.5f * y_term[y]; 
```

你也可以折叠 0.5 项：

```
const float y_term[8] = { 0.5f/sqrtf(2.0f), 0.5f, 0.5f, 0.5f, 0.5f, 0.5f, 0.5f, 0.5f };

local_idct[x][y] = cos((x+x+1)*y * (PI/16.0f)) * y_term[y]; 
```

# c# - 内部html表的jquery排序

> ID：12157393
> 
> 赞同：-1
> 
> 时间：2012-08-28T10:28:48.007
> 
> 标签：c#, jquery, asp.net

我有一个 GridView 并从数据库中获取数据。我在该gridview 中有一个内部gridview 作为html 表。

我想知道如何对gridview 中的内部html 表进行jquery 排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:48:54.177

尝试这个：

1.  [表格排序 jQuery 插件](http://tablesorter.com/docs/)

    tablesorter 是一个 jQuery 插件，用于将带有 THEAD 和 TBODY 标签的标准 HTML 表格转换为可排序的表格，而无需刷新页面。tablesorter 可以成功解析和排序多种类型的数据，包括单元格中的链接数据。它具有许多有用的功能，包括：

    多列排序解析器，用于对文本、URI、整数、货币、浮点数、IP 地址、日期（ISO、长短格式）、时间进行排序。轻松添加自己的 支持二级“隐藏”排序（例如，在根据其他标准排序时保持字母排序） 通过小部件系统进行扩展 跨浏览器：IE 6.0+、FF 2+、Safari 2.0+、Opera 9.0+ 代码量小

# php - .net 由 php 使用的 Web 服务。php可以理解枚举和日期时间类型吗？

> ID：12157397
> 
> 赞同：0
> 
> 时间：2012-08-28T10:29:03.567
> 
> 标签：php, .net, asmx

我有一个托管在 asp.net 中的 Web 服务，它公开了一个将对象作为参数的方法。这个对象有像 DateTime? 这样的属性吗？, 枚举, int , 字符串。

php可以处理日期时间或枚举吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:59:07.423

当然可以..但是您应该在使用之前提供格式良好的格式。例如，对于日期时间，您应该传递如下示例： 2012-11-20T14:00:00 对于枚举，您应该提供相应的枚举字符串。

我希望它有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:30:45.703

PHP 不会理解 .NET 枚举或日期时间类型。从 WSDL 生成的代理是“理解” ASMX 发布的接口。

# c# - 类型参数声明必须是标识符而不是类型

> ID：12157401
> 
> 赞同：1
> 
> 时间：2012-08-28T10:29:21.743
> 
> 标签：c#, generics

```
public abstract class BaseDocumentLayer : IDocumentLayer
{                                                       
   public IDocumentLayer NextLayer { get;set;}

   public virtual Document<T, U> ProcessDocument<T, U>(Document<T, U> document) {
      if(NextLayer != null)
         document = NextLayer.ProcessDocument(document);
      return document;          
   }
}

public override Document<GenericDatabaseDTO, GenericDatabaseConstants.ActionType> ProcessDocument<GenericDatabaseDTO, GenericDatabaseConstants.ActionType>(Document<GenericDatabaseDTO, GenericDatabaseConstants.ActionType> document)
{       
    return base.ProcessDocument<GenericDatabaseDTO, 
}

public static class GenericDatabaseConstants 
{    
    public enum ActionType 
    {                
       CreateGeneric,
       ReadGeneric,
       UpdateGeneric,
       DeleteGeneric,               
    }
} 
```

为什么会出现错误：类型参数声明必须是标识符而不是类型？

![在此处输入图像描述](../Images/a022e68e7dc6e278399a9c72d891618d.png)

错误1：

```
public override Document<GenericDatabaseDTO, GenericDatabaseConstants.ActionType> ProcessDocument(Document<GenericDatabaseDTO, GenericDatabaseConstants.ActionType> document)
{   

    return base.ProcessDocument(document);
} 
```

错误 1 ​​'GenericDocumentLayer2.Document.GenericDatabase.ProcessLayer.ProcessDocument(GenericDocumentLayer2.TypeDefinition.Document)'：找不到合适的方法来覆盖

我没有更改我的原始 BaseLayer.ProcessDocument 方法

**更新**

```
public void Add(GenericDatabaseField field) {
            var dto = new GenericDatabaseDTO();
            dto.Field = field;
            dto.Id = "test";

            var document = new Document<GenericDatabaseDTO, GenericDatabaseConstants.ActionType>(dto, GenericDatabaseConstants.ActionType.CreateGeneric, null);
            IDocumentLayer layer = DocumentFactory.CreateDocumentLayers();
                                          // The generic ProcessDocument is never called just the base version
        document = layer.ProcessDocument<GenericDatabaseDTO, GenericDatabaseConstants.ActionType>(document);                
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:33:33.410

您不能覆盖特定类型的泛型方法。这对于 C++ 的模板是可能的，但对于 C# 的泛型则不行。

要编译您的代码，请将其更改为：

```
public override Document<TDTO, TActionType> ProcessDocument<TDTO, TActionType>(Document<TDTO, TActionType> document) 
```

这将编译，但它将覆盖所有泛型参数的基类型方法。

如果你想为一种类型提供一个特殊的实现，你可以添加一个非泛型重载并在特殊处理之后在内部调用泛型版本：

```
public Document<GenericDatabaseDTO, GenericDatabaseConstants.ActionType> ProcessDocument(Document<GenericDatabaseDTO, GenericDatabaseConstants.ActionType> document)  
{
    // some special handling for this special case here...

    return base.ProcessDocument(document);
} 
```

但是，请注意，这将在像这样的多态场景中中断：

假设上述方法在`Derived`. `Derived`来源于`Base`

```
GenericDatabaseDTO dto = /*...*/;
GenericDatabaseConstants.ActionType actionType = /*...*/;

Derived d = new Derived();
Base b = d;

// calls the non-generic version with special handling from Derived:
d.ProcessDocument(dto, actionType);
// calls the generic version from Base:
b.ProcessDocument(dto, actionType); 
```

# linux - 杀死包括所有子进程在内的进程的任何简洁快捷的方法

> ID：12157408
> 
> 赞同：3
> 
> 时间：2012-08-28T10:29:41.173
> 
> 标签：linux, shell, process, kill

我知道这听起来像是一个常见问题，我应该能够在档案中找到答案。试着找了一些，但没有找到。所有的回复看起来都很冗长。任何 1-liner 都可以杀死 linux 中的一个进程，包括它的所有子进程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:42:11.813

如果它们都在同一个组中，请使用`kill`并传递组 id 的否定，如此[处所示](https://stackoverflow.com/a/392155/179138)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-11T12:58:11.743

```
kill $PID $(pgrep -P $PID) 
```

**pgrep -P**列出所有孩子的PID（不是递归的）

# android - Android - 如何使图标在触摸时发光？

> ID：12157412
> 
> 赞同：6
> 
> 时间：2012-08-28T10:30:00.527
> 
> 标签：android, icons, touch, glow

如何在图标上获得这种蓝色发光效果？有什么快速的方法吗？我真的不想使用 Photoshop 来实现这种效果。

任何帮助将非常感激。

![](../Images/72a5546005bc6ea0c7af7b523407c472.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-28T14:57:47.637

如果您想以编程方式生成辉光，您可以这样做。我的建议是，在您的活动开始时只生成一次，然后使用它创建一个 StateListDrawable，如评论中所述：

```
 // An added margin to the initial image
    int margin = 24;
    int halfMargin = margin / 2;

    // the glow radius
    int glowRadius = 16;

    // the glow color
    int glowColor = Color.rgb(0, 192, 255);

    // The original image to use
    Bitmap src = BitmapFactory.decodeResource(getResources(),
            R.drawable.ic_launcher);

    // extract the alpha from the source image
    Bitmap alpha = src.extractAlpha();

    // The output bitmap (with the icon + glow)
    Bitmap bmp = Bitmap.createBitmap(src.getWidth() + margin,
            src.getHeight() + margin, Bitmap.Config.ARGB_8888);

    // The canvas to paint on the image
    Canvas canvas = new Canvas(bmp);

    Paint paint = new Paint();
    paint.setColor(glowColor);

    // outer glow
    paint.setMaskFilter(new BlurMaskFilter(glowRadius, Blur.OUTER));
    canvas.drawBitmap(alpha, halfMargin, halfMargin, paint);

    // original icon
    canvas.drawBitmap(src, halfMargin, halfMargin, null);

    ((ImageView) findViewById(R.id.bmpImg)).setImageBitmap(bmp); 
```

# php - 制作了一个小 php 脚本，需要对其进行测试，但默认情况下它不会发布任何内容。如何让它输出？

> ID：12157414
> 
> 赞同：0
> 
> 时间：2012-08-28T10:30:11.523
> 
> 标签：php, xml, variables

我尝试输入 echo $steamrep_id 但没有运气，有人可以帮忙吗？代码：

```
<?php
class Steam_Rep_Rep {

    // cURL Variable
    private $ch = null;

    public function __construct() {
        // Setup cURL
        $this->ch = curl_init();
        curl_setopt($this->ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($this->ch, CURLOPT_TIMEOUT, 4);
    }    

    public function getUserInfo($steamrep_id) {
        // cURL
        curl_setopt($this->ch, CURLOPT_URL, "http://steamrep.com/api/beta/reputation/{$steamrep_id}?json=1");
        $result = curl_exec($this->ch);
        $xml = simplexml_load_string($result);

        if(!empty($xml)) {
            return array(
                'rep' => $xml->steamREP,

            );
        } else {
            return array(
                'rep' => "No reputation found",
            );
        }
    }
}
?> 
```

基本上，它从 XML 文件中获取数据并将其存储在变量中。
另请注意，我是编码的半新手，我只是将其他代码的一部分并将其粘在一起以使其工作，我什至不确定它是否可以正常工作。编辑：不，我不会执行变量，我只会编写一个从变量中获取数据的代码，仅此而已。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:43:35.930

你有一些错误，`STEAM_ID64`用 STEAM_ID 替换它应该可以工作

```
class Steam_Rep_Rep {

    // cURL Variable
    private $ch = null;

    public function __construct() {
        // Setup cURL
        $this->ch = curl_init();
        curl_setopt($this->ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($this->ch, CURLOPT_TIMEOUT, 4);
    }    

    public function getUserInfo($steamrep_id) {
        // cURL
        curl_setopt($this->ch, CURLOPT_URL, "http://steamrep.com/api/beta/reputation/{$steamrep_id}?json=1");
        $result = curl_exec($this->ch);
        $xml = json_decode($result);
        if(!empty($xml->steamrep->reputation)) {
            return array(
                'rep' => $xml->steamrep->reputation,
            );
        } else {
            return array(
                'rep' => "No reputation found",
            );
        }
    }
}

$steam = new Steam_Rep_Rep();
$rep = $steam->getUserInfo('76561197971691194');
echo $rep['rep']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:33:32.263

尝试这个：

```
$test = new Steam_Rep_Rep();

$var = $test->getUserInfo("id_goes_here");

var_dump($var); 
```

将其放在脚本的末尾，然后在浏览器中运行它。

# qt - 使qt的独立可执行文件

> ID：12157417
> 
> 赞同：3
> 
> 时间：2012-08-28T10:30:26.077
> 
> 标签：qt, exe

我制作了一个 QT 程序，我希望它能够在另一台没有安装 QTsdk 的计算机上运行。所以我想我必须制作一个可执行文件。不幸的是，我绝对没有这方面的经验。有人可以用简单的话告诉我如何做到这一点吗？

我的工作是在 Windows 64 位计算机上基于 Qt 4.7.4（32 位）在 Qt Creator 2.4.1 中制作程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T10:47:22.603

在回答提到将您的可执行文件与 Qt 库静态链接时，这非常方便，因为这意味着您只有一个文件要处理（您的 exe） - 但是由于 Qt 的许可，这也意味着您必须购买商业许可证你的申请。

假设您没有修改 Qt 的源代码，解决方法是将 Qt 的运行时库（运行时链接所需的 .dll 文件）与您的应用程序一起提供。无论如何，这就是您机器上绝大多数程序的工作方式，因为它还有许多其他优点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T12:29:05.050

Use [Dependency Walker](http://www.dependencywalker.com/) to find out what Qt and other runtime (MinGW) DLLs are required in your app. Copy those DLLs to the same folder as your app. Zip the folder and distribute the archive.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T10:43:02.037

如果您的意思是静态链接
[http://doc.qt.nokia.com/4.7-snapshot/deployment.html#static-vs-shared-libraries](http://doc.qt.nokia.com/4.7-snapshot/deployment.html#static-vs-shared-libraries)

那么网上有很多教程
[http://www.qtcentre.org/wiki/index.php?title=Building_static_Qt_on_Windows](http://www.qtcentre.org/wiki/index.php?title=Building_static_Qt_on_Windows)
[http://www.formortals.com/how-to-statically-link-qt-4/](http://www.formortals.com/how-to-statically-link-qt-4/)

它只是用静态标志配置你的 qmake 文件。

# ios - 如何在建筑地图中获取精确的当前位置

> ID：12157419
> 
> 赞同：-1
> 
> 时间：2012-08-28T10:30:30.260
> 
> 标签：ios, xcode, map, gps, currentlocation

我有一张**建筑地图**，上面有很多房间。

现在我想**将该图钉**放在该建筑物地图中，用户正在该建筑物中，并且如果用户想导航到其他房间，我还想绘制方向。

如果有人知道，请以正确的方式指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:18:52.600

内部导航（或如果没有 GPS 信号可用的导航）通常使用 WLAN 三角测量来完成。您需要扫描建筑物中的 WLAN，以构建特定位置的各种 WLAN 信号的场强图。在导航期间，地图用于确定给定 WLAN 信号读数的最可能位置。

例如，Google 正在开发内部导航服务，并且有一些公司提供内部导航解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:17:42.443

You can use QRCode based pseudo-location. User scans QRCode in one room of the building and the app is aware of phone's location.

# c# - 在查找表和 EF 中映射额外的属性

> ID：12157421
> 
> 赞同：0
> 
> 时间：2012-08-28T10:30:32.857
> 
> 标签：c#, entity-framework

我在我的数据库中设置了以下多对多关系。

![表格示例](../Images/f5c4303f6daa3d673c23d6902b5cc6a9.png)

使用 Code-First EF 映射；A`Ticket`有一个`ICollection`of `Branch`，反之亦然。

这一切都很好，但现在我需要做出重大改变，因为规范已经充实。

最初可以将单个`Ticket`标记为，但作为一个概念，只有在分配给单个分支`IsRead`时才真正起作用。`Ticket`我需要做的是说 a `Ticket`has been read at each individual `Branch`。

现在我的第一个想法是我应该更改关系表`BranchTickets`，使其具有标识列和`IsRead`属性，从而创建一对多关系，但我不知道如何使用 Code-First 映射两个外键阿皮。

这是否是正确的方法，如果是这样，我将如何确保 EF 正确映射表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:34:48.340

如果 a`Ticket`只能被视为在级别*读取*`Branch`，那么我会说您需要做的就是`IsRead`从中删除属性`Ticket`并将其移动到`BranchTickets`.

这意味着每个单独的票据都可以与具有不同*读取*状态的多个分支相关联。

> 我将如何确保 EF 正确映射表

这是您需要在数据库级别进行的更改，然后您可以更新您的 EF 模型。

# java - 处理 SmartGWT 窗口外的点击

> ID：12157422
> 
> 赞同：0
> 
> 时间：2012-08-28T10:30:39.667
> 
> 标签：java, gwt, mouseevent, smartgwt

我能够处理我的窗口内的点击，但是`outsideClick()`当用户点击我的任何地方时，我怎样才能触发一个函数（）`Window`？

我的窗口不是模态的，用户可以在其中选择文本（它有点像工具提示）。但是，当用户点击窗口外时，我必须做一些事情，我似乎无法弄清楚如何做到这一点。

我已经在后台在我的表单上添加了一个模糊处理程序，但是当然，当用户尝试在我打开的窗口中选择一些文本时，该字段会变得模糊，并且我的`outsideClick()`函数也会被触发（这不应该发生）。

编辑 - 另请注意，弹出窗口`Window`包含一个带有作为字符串创建的 html 内容的画布（请不要问为什么，我知道这不是很好）

任何人都可以帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-10T04:31:44.600

在 Smartgwt 中，该类`com.smartgwt.client.widgets.Window`有一个名为`dismissOnOutsideClick`. 如果将其设置为 true，则在 边界之外单击`Window`将与按下其取消按钮具有相同的效果。

请注意，此功能仅适用于模态窗口。

```
Window w = new Window();
w.setWidth(100);
w.setHeight(100);
w.setShowModalMask(false);
//
w.setIsModal(true);    
w.setDismissOnOutsideClick(true);
//
w.addItem(new Label("Test"));
w.show(); 
```

# wso2 - wso2 esb + api管理

> ID：12157425
> 
> 赞同：3
> 
> 时间：2012-08-28T10:30:53.753
> 
> 标签：wso2, wso2esb, wso2carbon, wso2-am

我需要将 WSO2 API MANAGER 与外部 ESO2 ESB 集成，但不知道应该设置哪种配置。

我知道 API MANAGER 有一个 greg，我应该将 ESB'registry 挂载到它吗？API MANAGER 也有一个 ESB，我可以只与 API MANAGER 的 ESB 共享外部 ESB 的配置吗？

请帮忙！！

**编辑**：目标是使用 API MANAGER 实现集群环境，但看起来像带有中央注册表的典型部署配置 (http://wso2.org/project/esb/java/4.0.3/docs/deployment_guide.html)不适用于 API MANAGER，为什么？

**EDIT2：**官方页面明确表示：“使用经过验证的路由基础设施，可轻松部署到集群中，可横向扩展。” 即“API 管理器可以与其他 API 管理器集成”，但这并不容易：虽然启用集群是更改axis2.xml 中的值的问题，但部署同步不起作用，或者至少对我来说不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:30:09.477

API 管理器中使用的 ESB 组件用于管理 SLA 并充当网关。不要在 API 管理器中添加外部 ESB 配置。这是 API manager 的文档。它对如何添加、组件是什么等有明确的指导。

[http://docs.wso2.org/wiki/display/AM100/API+Manager+Components](http://docs.wso2.org/wiki/display/AM100/API+Manager+Components)

# java - Java - 如何将此字符串转换为日期？

> ID：12157427
> 
> 赞同：2
> 
> 时间：2012-08-28T10:30:57.163
> 
> 标签：java, simpledateformat

我从服务器收到这个，但我不明白 T 和 Z 是`2012-08-24T09:59:59Z`什么意思，将这个字符串转换为 Date 对象的正确 SimpleDateFormat 模式是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T10:35:03.043

这是[ISO 8601](http://www.w3.org/TR/NOTE-datetime)标准。您可以使用

`SimpleDateFormat simpleFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");`

转换这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T10:34:55.243

```
RSS 2.0 format string EEE, dd MMM yyyy HH:mm:ss z   
Example: Tue, 28 Aug 2012 06:55:11 EDT

Atom (ISO 8601) format string  yyyy-MM-dd'T'HH:mm:ssz
Example:2012-08-28T06:55:11EDT

try {
            String str_date = "2012-08-24T09:59:59Z";
            DateFormat formatter;
            Date date;
            formatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");
            date = (Date) formatter.parse(str_date);
            System.out.println("Today is " + date);
        } catch (ParseException e) {
            System.out.println("Exception :" + e);
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T10:36:51.613

Z 代表祖鲁语 (UTC)，这是[dateTime.tz](http://wiki.whatwg.org/wiki/MicrosyntaxDescriptions#datetime-tz)格式 ( [ISO-8601](http://www.w3.org/TR/NOTE-datetime) )。因此，您应该能够执行以下操作：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss"); 
```

这里有一个例子：[例子](http://developer.marklogic.com/learn/2004-09-dates)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-28T10:44:21.733

这是 ISO 日期时间格式，请参见[此处](http://en.wikipedia.org/wiki/ISO_8601#UTC)，T 是时间分隔符，Z 是零 UTC 偏移的区域指示符。

这里有一个非常相似的问题，如果不是相同的问题[，](https://stackoverflow.com/questions/2201925/converting-iso8601-compliant-string-to-java-util-date)请查看它以了解如何将此字符串转换为 Java DateTime 对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T10:36:30.763

```
import org.joda.time.*;
import org.joda.time.format.*;

public class Test {
    public static void main(String[] args) {
        String text = "2012-08-24T09:59:59Z";
        DateTimeFormatter parser = ISODateTimeFormat.dateTime();
        DateTime dt = parser.parseDateTime(text);

        DateTimeFormatter formatter = DateTimeFormat.mediumDateTime();
        System.out.println(formatter.print(dt));
    }
} 
```

或者只是检查该链接 [str 到日期](https://stackoverflow.com/questions/5393847/how-can-i-convert-a-timestamp-from-yyyy-mm-ddthhmmsssssz-format-to-mm-dd-yyyy)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T11:06:00.757

也许使用优秀的[joda 时间](http://joda-time.sourceforge.net/)库将字符串转换为日期：

```
LocalDate myDate = new LocalDate("2012-08-28") // the constructor need an Object but is internally able to parse a String. 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-28T10:36:38.903

```
// First parse string in pattern "yyyy-MM-dd'T'HH:mm:ss'Z'" to date object.

String dateString1 = "2012-08-24T09:59:59Z";
Date date = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'").parse(dateString1);

// Then format date object to string in pattern "MM/dd/yy 'at' h:mma".
String dateString2 = new SimpleDateFormat("MM/dd/yy 'at' h:mma").format(date);
System.out.println(dateString2); // 08/24/12 at 09:59AM 
```

我认为这可能对你有用。

# javascript - JS 是否可以访问加载它们的域？

> ID：12157429
> 
> 赞同：1
> 
> 时间：2012-08-28T10:31:33.800
> 
> 标签：javascript, cross-domain

我有一个页面**http://www.sample.com/load.html**，它加载 javscript 文件[http://example.com/test.js](http://example.com/test.js)，其中包含在页面上编写 cookie 的代码，我可以创建一个 cookie对于[http://www.sample.com](http://www.sample.com)。

JS可以访问加载它们的域还是仅访问加载JS文件的域？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:33:35.160

Javascript 可以（只有少数例外，例如 CORS）只能访问文档的域。Javascript的起源是无关紧要的。

所以是的，在这种情况下，您将能够将 cookie 设置为 on`sample.com`但不能 on `example.com`，因为文档是`sample.com`. 您可以知道相关域正在使用该`document.domain`属性。

# php - 登录后的用户重定向发送不同的标头

> ID：12157431
> 
> 赞同：0
> 
> 时间：2012-08-28T10:31:38.950
> 
> 标签：php, mysql

我有这种形式，可以在用户登录后重定向用户，我打算做的是，在用户到达某个页面后，我有条件，如果！session->redirect to login.php否则，重定向到另一个页面！

我的代码在这里可能有什么问题？

```
<?php include_once("db/envato_db.php"); session_start(); if(!$_SESSION['gal_id']){

header("location:login.php"); // Redirect to login.php page } else {    header('location:galleries.php'); // Redirect to login.php page }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:33:54.237

它应该是：

```
<?php

  include_once("db/envato_db.php");
  session_start();

  if(!$_SESSION['gal_id'])
  {
      header('Location: login.php'); // Redirect to login.php page
  }
  else
  {    
      header('Location: galleries.php'); // Redirect to login.php page
  }

?> 
```

# c - 错误：在 'isempty' 之前应有 '='、','、';'、'asm' 或 '__attribute__'

> ID：12157432
> 
> 赞同：0
> 
> 时间：2012-08-28T10:31:50.060
> 
> 标签：c

我知道这个问题已经在其他地方被问过，但是阅读已经给出的答案对我没有帮助。我的代码非常简单，但我无法编译它。我正在编写代码来构建堆栈。

这是我的`stack.h`：

```
#ifndef GUARD
#define GUARD

struct Stack {

    struct Stack* next;
    int           data;
};
extern bool isempty (struct Stack*);

#endif 
```

这是我的`stack.c`：

```
#include <stdio.h>
#include <stdlib.h>

#include "stack.h"

bool isempty (struct Stack* st) {

    return (st == NULL);
} 
```

编译器不断抱怨这一行：

```
extern bool isempty (struct Stack*); 
```

my 的内容`main.c`无关紧要（现在它只返回 0）。有谁明白我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T10:34:49.527

该类型`bool`通常在 C 中不可用。

如果您的编译器支持 C99，您可以添加

```
#include <stdbool.h> 
```

不过，让它可用​​。

**更新**：在我看来，C99 的使用在“大型”C 程序中并不完全普遍，不。大多数布尔值（例如函数返回）都表示为`int`，这就是经典的求解方式。对于数组，您很可能会发现它们表示为包含在 eg 中的位`unsigned int`，而不是 eg `bool a[32];`。

但是，在面试的背景下，我认为候选人能毫不畏惧地写下上述内容会非常好。毕竟，它在 13 年前就已经标准化了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T18:21:10.720

如果您正在比较 St 和 NULL ...结果总是 0 或 1 ...这不是 C 中的布尔类型..您应该将 isempty() 的返回类型写为 int ...

# javascript - 设计模式：使用链式 + 命名空间扩展 jQuery 对象

> ID：12157435
> 
> 赞同：1
> 
> 时间：2012-08-28T10:32:06.593
> 
> 标签：javascript, jquery, oop, design-patterns, jquery-plugins

我需要有关 JavaScript/jQuery 设计模式的帮助。下面是一些 HTML 和 JS 代码，说明了我的工作，下面是从这些示例中推断出的问题。

一些`HTML`使用嵌套 div 来创建遍历场景：

```
 <div class="box">
        BOX 1
        <div class="nested-boxes">
            <div class="box">
                BOX 1-1
                <div class="nested-boxes">
                    <div class="box">
                        BOX 1-1-1
                    </div>
                </div>
            </div>
            <div class="box">
                BOX 1-2
            </div>
        </div>
    </div> 
```

这是`Javacript`代码：

```
// First I declare functions that I want to have available globally
// under a common namespace. Those functions reproduce that namespace as
// a prefix in their name to avoid conflict.
$.extend(true, window, {
    MyFunctions: {
        Boxes: {
            getBox: myfunctions_boxes_getBox
        },
        Circles: {
            // getCircle: myfunctions_circle_getCircle
        }
        // Squares....
    }
});

// I write functions which I want to use on jQuery objects as so:
function myfunctions_boxes_getNestedBoxes() {
    return this.find('.nested-boxes').first().children('.box');
}

function myfunctions_boxes_showLabel() {
    return this.find('span').first().text();   
}

// I then add those functions as new methods to my jQuery objects:
function myfunctions_boxes_getBox($element) {
    var $box = $element.closest('.box');
    $box.getParentBox = myfunctions_boxes_getParentBox;
    $box.getNestedBoxes = myfunctions_boxes_getNestedBoxes;
    $box.showLabel = myfunctions_boxes_showLabel;
    console.log('getBox',$box);
    return $box;
}

// Traversing functions call each other to make sure I retrieve a jQuery object with all
// my custom methods:
function myfunctions_boxes_getParentBox() {
    var $parent_box = myfunctions_boxes_getBox(this.closest('.box').parents('.box').first());
    console.log('getParentBox',$parent_box);
    return $parent_box;
} 
```

现在这就是我的代码的样子：

```
// I first need to call a global function:
$box = MyFunctions.Boxes.getBox($('#box-1-1'));

// Then I can start chaining my methods
$box.getParentBox().getNestedBoxes().each(function(){
    // however as soon as I use a native jQuery method, I end up with
    // a jQuery object which doesn't have my custom methods ans I need
    // to use a global function again.
    console.log($(this), MyFunctions.Boxes.getBox($(this)).showLabel());
}); 
```

[可以使用`jsFiddle`显示此代码的实际操作（是否可以帮助您理解我的工作）。](http://jsfiddle.net/e778c/8/)

**Q1**：如何编写我的函数而不必在名称中重复命名空间作为前缀（例如`myfunctions_boxes_`），同时避免与第三方代码冲突？

每次我创建一个我想用作 jQuery 对象上的自定义方法的新函数（例如`getParentBox`，`getNestedBoxes`...）时，我都必须在我的一个函数中手动映射它（即`myfunctions_boxes_getBox`）：

**Q2**：有没有办法自动映射我的自定义方法？

下面的问题可能与上面的问题有关，但我更喜欢单独提问，因为我觉得它们并不完全相同

一旦我使用本机 jQuery 方法（例如`each`在上面的示例中），我最终会得到没有我的自定义方法的 jQuery 对象，我需要再次调用我的一个全局函数来检索相同的对象，但使用我的自定义附加到它的方法。

**Q3**：为我的全局函数创建一个 jQuery 插件以保持我的代码的 OO 特性是否有意义（见下面的示例）？

```
// plugin declaration (the getBox function should be modified to make use of this)
jQuery.fn.getBox = MyFunctions.Boxes.getBox
// then my code becomes cleaner:
$('#box-1-1').getBox().getParentBox().getNestedBoxes().each(function(){
   console.log($(this).getBox().showLabel());
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:46:47.680

**Q1：我如何编写我的函数，而不必在名称中重复命名空间作为前缀（例如 myfunctions_boxes_），同时避免与第三方代码冲突？**

现在的问题是您的函数是全局的，因此您需要将命名空间附加到其名称以防止名称冲突（但这仍然不能保证名称冲突的安全性）。您应该做的是将整个 javascript 代码包装在一个自调用函数中，例如：

```
(function {
    $.extend(true, window, {
        MyFunctions: {
            Boxes: {
                getBox: getBox
            }
        }
    });

    function getBox($element) {
        // Do something.
        return $element;
    }
}()); 
```

getBox 函数现在是私有的，您不必担心与第三方库/等的名称冲突。

*（现在只解决第一个问题）*

# ruby-on-rails - Minitest-rails 生成器

> ID：12157437
> 
> 赞同：1
> 
> 时间：2012-08-28T10:32:07.640
> 
> 标签：ruby-on-rails, minitest

我正在使用 minitest-rails (https://github.com/blowmage/minitest-rails)，它工作得很好。但一个问题是发电机不工作。或者更确切地说，它似乎总是调用“test_unit”！

这就是我的“test/minitest_helper.rb”的样子： [https](https://gist.github.com/3496814) ://gist.github.com/3496814 （请注意，我在那里覆盖了测试单元）

在“config/application.rb”我有这个：

```
# require "rails/test_unit/railtie" ## Test Unit is not required! 
```

还有这个：

```
## application.rb
config.generators do |g|
  g.test_framework :mini_test, :spec => true, :fixture => false
end

## Gemfile
group :test, :development do
  gem 'minitest-rails', git: "git://github.com/blowmage/minitest-rails.git"
  gem 'minitest-rails-capybara'
  gem 'factory_girl_rails'
  gem 'turn'
end 
```

尽管如此，例如在生成模型时，我还是得到了这个：（--spec 实际上并不重要。它无论如何都会生成相同的东西）

```
rails g model Horse --spec
  invoke  active_record
  create    db/migrate/20120828095404_create_horses.rb
  create    app/models/horse.rb
  invoke    test_unit                   ### Invoking test_unit??!
  create      test/unit/horse_test.rb
  invoke      factory_girl
  create        test/factories/horses.rb 
```

如果我只是手动创建文件 minitest 就像一个魅力。

为了使发电机正常工作，我还需要做些什么吗？

目前使用 Rails 3.2.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:36:26.777

`factory_girl_rails`维护者已经修复了gem 强制生成器配置的问题`Test::Unit`，但是这还没有过滤到`rubygems.org`.

如果您更新 Gemfile 以包含：

```
group :development, :test do
  gem 'factory_girl_rails', :git => "git://github.com/thoughtbot/factory_girl_rails.git"
end 
```

一切都应该很好！

**PS：**您也可以在执行此操作时删除`:fixture => false`from ，为您设置。`application.rb``factory_girl_rails`

# css - Ruby on Rails：适用于不同设备的 CSS

> ID：12157439
> 
> 赞同：1
> 
> 时间：2012-08-28T10:32:16.017
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3, stylesheet

我是 Rails 新手，我已经完成了我的第一个 Web 应用程序。我现在正在寻找我的应用程序的样式。我意识到我需要考虑我的应用程序在不同设备上的外观，但我真的不知道如何或最好的方式来解决这个问题。无论页面呈现在什么设备上，有没有一种方法可以让我拥有标准外观？

我开始四处移动对象以适应它在笔记本电脑上的外观，但在平板电脑上查看页面时，有些东西会留在应有的位置，但其他东西会从页面边缘消失，基本上会打乱我的风格（我认为与使用绝对定位有关）。我想我只是希望他们的设备看起来是一成不变的页面，用户必须在他们的设备上放大和缩小，而不是为他们的设备优化页面。

任何帮助都将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:43:43.273

这是一个相当好的问题。解决方案是使用 twitter 引导框架。您必须在 gems 文件中包含一个 gem 并捆绑它；'bootstrap-sass'，'2.0.0'。之后将其导入您的自定义 css 并根据您的需要使用。Bootstrap 是 twitter 优秀团队的响应式框架。bootstrap 基本上为您提供的是一个响应式框架，以便您的应用程序可以根据客户端屏幕自动调整其尺寸，无论您的应用程序将根据它调整什么屏幕尺寸。它有一个网格系统，使它能够以这种方式运行。

您想访问一些可以帮助您实现所需目标的站点，请在此处了解有关引导程序的更多信息[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/) 我为您的问题推荐的 gem 具有 Sass 功能也是，所以你可能也想看看[http://sass-lang.com/tutorial.html](http://sass-lang.com/tutorial.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T10:36:38.697

您可能希望使用 CSS 媒体查询来根据您的屏幕宽度/高度优化/更改 CSS 规则。这些只是客户端浏览器应用的普通 CSS 文件，因此您不必在自己身边弄乱它们。

这是一个例子：

```
@media all and (max-width: 430px) and (min-width: 360px) {
  /* put your mobile css in here */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T14:17:20.230

您需要阅读媒体查询。Twitter bootstrap 是一个很棒的框架，但是如果您已经拥有自己喜欢的 CSS（或者如果您只是想学习新东西），您可以使用媒体查询设置自己的响应式设计。一个不错的起点是[这篇](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)关于创建移动网站的 Smashing Magazine 文章。

如果您想从每个人都喜欢并内置响应式设计的本月框架重新开始，那么请查看[Twitter Bootstrap](http://twitter.github.com/bootstrap/)，它有非常棒的文档来帮助您开始使用它。

# spring - 使用 JPA 实体侦听器来持久化 JPA 实体

> ID：12157440
> 
> 赞同：2
> 
> 时间：2012-08-28T10:32:21.250
> 
> 标签：spring, activerecord, jpa, transactions, entitylisteners

我在 JPA EntityListener 中有以下方法：

```
@PostPersist
    void onPostPersist(Pli pli) {
        EvenementPli event = new EvenementPli();
        event.setPli(pli);
        event.setDateCreation(new Date());
        event.setDateEvenement(new Date());
        event.setType(TypeEvenement.creation);
        event.setMessage("Création d'un pli");
        event.persist();
    } 
```

基本上，我试图通过在`EvenementPli`每次`Pli`持久化实体实例时持久化一个实例来创建一个事件。

麻烦的是，当时`event.persist();`被称为 Pli 行不在数据库中，这导致 Mysql 抱怨约束......

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T10:42:07.553

适当的解决方案是重新设计应用程序，使持久的 EvenementPli 发生在其他实体的 @PostPersist 回调方法之外的其他地方。根据 JPA 2.0 规范，这样的操作不能保证在生命周期回调方法中工作：

> 通常，可移植应用程序的生命周期方法不应调用 EntityManager 或 Query 操作、访问其他实体实例或修改同一持久性上下文中的关系。

# android - Android Emulator：如何获取正在运行的服务列表

> ID：12157442
> 
> 赞同：30
> 
> 时间：2012-08-28T10:32:23.903
> 
> 标签：android, android-emulator, android-service, monitoring, monitor

我在我的**Ubuntu VM**中运行了**Android 模拟器**，并且刚刚通过控制台安装了一个 apk 文件。模拟器和 adb 有很多选项可以查看设备上发生的事情。但是如何获取当前正在运行**的服务列表？**我试图找出特定应用程序是否安装了通知服务来查看（不需要的）广告。我什至知道服务的名称。

 ****PS.：我是一名高级初学者 - 但不够高级。所以谢谢你的帮助。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-08-28T10:37:47.793

您可以使用以下命令获取列表：

```
adb shell dumpsys activity services 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-06-13T15:22:13.017

如果您只需要一个没有 dumpsys 生成的所有详细信息的简单列表，请使用：

```
adb shell service list 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T21:44:28.557

Logcat 也可以帮助你****

# sql - 是否可以将 CASE 语句添加到 UPDATE 查询？

> ID：12157445
> 
> 赞同：-1
> 
> 时间：2012-08-28T10:32:40.253
> 
> 标签：sql, sql-server

我试图在下面的 UPDATE 中执行 CASE；

```
UPDATE [table]
SET CASE WHEN ((order - 20.00) < 0) THEN 0 ELSE (order - 20.00) END
WHERE id = 1 
```

但我无法让它执行。我哪里做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T10:34:44.213

您需要说出要设置的字段。

```
UPDATE [table] 
SET somefield = CASE WHEN order > 20.00 THEN (order - 20.00) ELSE 0 END 
WHERE id = 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T10:34:23.927

您需要将值分配给列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T10:35:22.460

关闭，您忘记将要更新的列的名称添加到您的语句中

```
UPDATE [table]
SET <name-of-column> = (CASE WHEN ((order - 20.00) < 0) THEN 0 ELSE (order - 20.00) END)
WHERE id = 1 
```

# android - 在 Android 中查找当前位置的天气更新的最佳方法

> ID：12157448
> 
> 赞同：1
> 
> 时间：2012-08-28T10:32:47.730
> 
> 标签：android, weather

找出我当前位置的天气更新的最佳方法是什么。有没有好的文章可以参考。我刚刚试过这个[链接](http://www.anddev.org/android_weather_forecast_-_google_weather_api_-_description-t337.html)。但这对我不起作用。请提供好的文章或样品。提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:10:50.570

洛克什

如果您已经知道如何从 GPS 中找到您所在位置的名称（城市或地区），请在此处尝试我的示例：

[https://github.com/zh-wang/YWeatherGetter4a](https://github.com/zh-wang/YWeatherGetter4a)。

您只需要一个城市名称或地区名称即可获取其当前天气。

如果你不知道，请检查以下代码

```
 Geocoder gcd = new Geocoder(context, Locale.ENGLISH);
    List<Address> addresses = null;
    try {
        addresses = gcd.getFromLocation(location.getLatitude(), location.getLongitude(), 1);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    String cityName = "";
    if (addresses != null && addresses.size() > 0) {
        Out.d("Found city: ", addresses.get(0).getLocality());
        cityName = addresses.get(0).getLocality();
    } 
```

最好的问候， 王正宏

# prolog - “超出本地堆栈”反转列表

> ID：12157453
> 
> 赞同：1
> 
> 时间：2012-08-28T10:33:03.023
> 
> 标签：prolog

我编写了以下 Prolog 代码：

```
concatenate([X|L1], L2, [X|L3]) :- concatenate(L1, L2, L3).
concatenate([], L, L).

rev([X|L], Y) :- concatenate(Z, [X], Y), rev(L, Z).
rev([], []). 
```

如果我做一些查询，例如：

```
?- rev([1,2,3], [3,2,1]).  ->  true
?- rev([1,2,3], [ X, Y, Z]).  -> X=3, Y=2, Z=1 
```

没关系，但如果我这样做：

```
?- rev([1, 2, 3], X). 
```

我得到：

```
ERROR: Out of local stack 
```

我确信我可以`reverse function`在网上找到正确的实现，但我想知道是什么导致了这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T10:40:44.340

`concatenate(L1, L2, L3).`*在*没有实例化 L1 和 L3 的情况下被调用，然后永远循环。您可以使用调试器查看此行为：只需

```
?- gtrace,rev([1,2,3],X). 
```

然后请求连接内的步骤（按空格键）。在左上角的框架（绑定）中，您可以看到实例化的变量：只有 L2 得到一个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:15:01.243

代替：

```
rev([X|L], Y) :- concatenate(Z, [X], Y), rev(L, Z). 
```

尝试：

```
rev([X|L], Y) :- rev(L, Z), concatenate(Z, [X], Y). 
```

# email - mongodb查询持续运行

> ID：12157463
> 
> 赞同：0
> 
> 时间：2012-08-28T10:33:45.420
> 
> 标签：email, mongodb, centos

我有一个邮件存档设置，它运行以下不返回任何结果的查询。它只是连续运行。下面的查询有什么问题吗

```
query:{ $or: [ { $or: [ { rcpt_to: /vpadmin@vp.local/i }, { to: /vpadmin@vp.local/i }, { cc: /vpadmin@vp.local/i } ] } ] } 
```

结果是这样的吗？

```
[
    {
        "$or" : [
            {
                "rcpt_to" : /vpadmin@vp.local/i
            },
            {
                "to" : /vpadmin@vp.local/i
            },
            {
                "cc" : /vpadmin@vp.local/i
            }
        ]
    }
] 
```

邮件存档应用程序在日志中显示以下内容，这些内容可以正常工作并返回结果。此搜索使用日期完成

```
Tue Aug 28 13:00:40 [conn3] query enkive.userWorkspaces ntoreturn:1 idhack  reslen:152 0ms
Tue Aug 28 13:00:40 [conn3] query enkive.workspaces ntoreturn:1 idhack  reslen:567 0ms
Tue Aug 28 13:00:40 [conn3] insert enkive.searchQueries 0ms
Tue Aug 28 13:00:40 [conn3] insert enkive.searchResults 0ms
Tue Aug 28 13:00:40 [conn3] query enkive.workspaces ntoreturn:1 idhack  reslen:567 0ms
Tue Aug 28 13:00:40 [conn3]   running multiple plans
Tue Aug 28 13:00:40 [conn3] update enkive.workspaces  query: { _id: ObjectId('502b861ee4b04443c5db0481'), CreationDate: new Date(1345029662391), ModifiedUpdate: new Date(1346155131079), Creator: "enkive", WorkspaceName: "Default Workspace", SearchResults: [ "50334ba3e4b06e22baa0f244", "50334bbce4b06e22baa0f247", "50334be0e4b06e22baa0f24a", "5034f31fe4b06e22baa0f2e1", "503c9b73e4b002566417e868", "503cb27be4b002566417e86b", "5034f298e4b06e22baa0f2cc", "50334c72e4b06e22baa0f259", "5034f334e4b06e22baa0f2e4", "503c9b37e4b002566417e862", "503c9b62e4b002566417e865", "5035f329e4b0f6af52a5bb6c" ] } 0ms
Tue Aug 28 13:00:40 [conn3] query enkive.searchResults ntoreturn:1 idhack  reslen:202 0ms
Tue Aug 28 13:00:40 [conn3] query enkive.searchResults ntoreturn:1 idhack  reslen:202 0ms
Tue Aug 28 13:00:40 [conn3]   running multiple plans
Tue Aug 28 13:00:40 [conn3] update enkive.searchResults  query: { _id: ObjectId('503cb2e8e4b002566417e870'), ExecutionTimestamp: new Date(1346155240232), ExecutedBy: "enkive", SearchResults: {}, Status: "QUEUED", SearchQueryId: "503cb2e8e4b002566417e86f", IsSaved: false } 0ms
Tue Aug 28 13:00:40 [conn3] query enkive.emailMessages reslen:6496 nreturned:2 0ms
Tue Aug 28 13:00:40 [conn3] insert enkive.auditLog 0ms
Tue Aug 28 13:00:40 [conn3] query enkive.searchResults ntoreturn:1 idhack  reslen:203 0ms
Tue Aug 28 13:00:40 [conn3]   running multiple plans
Tue Aug 28 13:00:40 [conn3] update enkive.searchResults  query: { _id: ObjectId('503cb2e8e4b002566417e870'), ExecutionTimestamp: new Date(1346155240237), ExecutedBy: "enkive", SearchResults: {}, Status: "RUNNING", SearchQueryId: "503cb2e8e4b002566417e86f", IsSaved: false } 0ms
Tue Aug 28 13:00:40 [conn3] query enkive.emailMessages ntoreturn:1 idhack  reslen:2226 0ms
Tue Aug 28 13:00:40 [conn3] insert enkive.auditLog 0ms
Tue Aug 28 13:00:40 [conn3] query enkive.emailMessages ntoreturn:1 idhack  reslen:4306 0ms
Tue Aug 28 13:00:40 [conn3] insert enkive.auditLog 0ms 
```

@sammaya 当我运行你给我的东西时，我得到以下信息

```
> db.emailMessages.find( { $or : [ {"rcpt_to" : vpadmin@vp.local}, {"cc" : vpadmin@vp.local}, {"to" : vpadmin@vp.local} ]} );
Tue Aug 28 17:26:10 SyntaxError: missing } after property list (shell):1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:24:19.407

让我们谈谈为什么这个查询很慢。

你的数据集有多大？

您对这些字段中的任何一个都有索引吗？

由于您的查询中有一个 or 语句和一个正则表达式，因此可能需要一段时间才能运行，特别是如果您有一个相当大的数据集。

在你说“永不回来”之前，你等了多久？

你不能这样重写查询吗？

```
db.emailMessages.find( { $or : [ {"rcpt_to" : /vpadmin@vp.local/i},
                                 {"cc" : /vpadmin@vp.local/i}, 
                                 {"to" : /vpadmin@vp.local/i} 
                               ] 
                        } 
                      ) 
```

也可以尝试向这些字段添加一些索引：

```
db.emailMessages.ensureIndex( { rcpt_to: 1, cc: 1, to: 1 }, { background: true } ) 
```

此外，您可能希望编写一个 mongo map/reduce 作业来执行此查询，而不是使用查询语言或添加任何索引。无论如何，您都需要进行全表扫描来查询这些数据，而 map reduce 是一种更好的处理方式。

这是 mongodb map/reduce 的链接： [http ://www.mongodb.org/display/DOCS/MapReduce](http://www.mongodb.org/display/DOCS/MapReduce)

编辑：

我根据另一个答案更改了索引创建，因为他是正确的，mongo 只会使用一个索引进行查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:46:30.517

这通常发生的原因是查询中的速度问题。

您正在使用带有索引不友好正则表达式的嵌套 $or。

现在没有任何前置正则表达式不使用索引（[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions)）并将强制进行全表扫描。嵌套的 $or 子句也不使用索引：[https](https://jira.mongodb.org/browse/SERVER-3327) ://jira.mongodb.org/browse/SERVER-3327因此您的查询正在扫描可能是非常非常大的表。

由于它是一个邮件存档设置，我会说它可以扫描数百万份文档。这就是为什么您没有得到响应并且查询只是永远“运行”的原因。

您可以尝试稍微更改架构以提高性能。首先，您可以省略嵌套的 $or 并且您可能会在邮件的标题字段中拆分电子邮件地址以进行搜索，这样您就可以进行更类似于以下的查询：

```
db.emailMessages.find( { 
    $or : [ {"rcpt_to" : vpadmin@vp.local},
            {"cc" : vpadmin@vp.local}, 
            {"to" : vpadmin@vp.local} ]
} ) 
```

您在此处查询的字段可能是电子邮件地址数组，这可以正常工作。在此之后，您需要设置正确的索引，如@Macdiesel 所说：

```
db.emailMessages.ensureIndex( { rcpt_to: 1, cc: 1, to: 1 }, { background: true } ); 
```

我在这里创建一个复合索引，因为 MongoDB 每个查询只能使用一个索引。

这不仅应该返回响应，而且不会杀死您的服务器，并且应该具有超级性能和可扩展性（大多数情况下，可能会进行更多改进）。

## 编辑

好的，所以一些澄清。

您需要像这样引用您的搜索字符串：

```
db.emailMessages.find( { 
    $or : [ {"rcpt_to" : "vpadmin@vp.local"},
            {"cc" : "vpadmin@vp.local"}, 
            {"to" : "vpadmin@vp.local"} ]
} ) 
```

由于除了这些字段中的一个之外的所有字段都可以是多个电子邮件地址，我建议您将其拆分`cc`为`to`一组电子邮件地址，例如：

```
{
    _id: {},
    rcpt_to: "vpadmin@vp.local",
    cc: ["me@awesome.com", "you@kool.com"],
    to: ["another@notsokool.com"],
    message: "yo"
} 
```

这当然只是一个示例模式，您需要使用它来获得您想要的东西，但它应该让您走上正确的轨道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:50:58.267

您缺少右括号。

```
query:{ $or: [ { $or: [ { rcpt_to: /vpadmin@vp.local/i }, { to: /vpadmin@vp.local/i }, { cc: /vpadmin@vp.local/i } ] } ]} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T11:18:27.183

尝试以下查询。

> db.content.find({$or : [{"rcpt_to" : /vpadmin@vp.local/i},{"cc" : /vpadmin@vp.local/i}, {"to" : /vpadmin@vp .local/i}]}）；

```
{$or : 
    [
        {"rcpt_to" : /vpadmin@vp.local/i},
        {"cc" : /vpadmin@vp.local/i}, 
        {"to" : /vpadmin@vp.local/i}
    ]
} 
```

# java-me - 来自 Rss 的 LWUIT 表单标题

> ID：12157464
> 
> 赞同：1
> 
> 时间：2012-08-28T10:33:47.280
> 
> 标签：java-me, rss, lwuit

我有标题和图像要从 Rss 文件显示在我的 LWUIT 表单屏幕上，为此，我使用了 ListCellRenderer，（我引用了这个链接[http://lwuit.blogspot.in/2008/07/lwuit-list-renderer -by-chen-fishbein.html](http://lwuit.blogspot.in/2008/07/lwuit-list-renderer-by-chen-fishbein.html)），但问题是，图像和标题应该在我的表单屏幕上并排显示在一行中，但是对于来自 Rss 的某些标题，我无法并排显示，我可以在一行显示图像，而标题将在第二行？这是我的代码：

```
public class NewsListCellRenderer extends Container implements ListCellRenderer {
    private Label name = new Label("");
    private Label icon = new Label("");
    private Label focus = new Label("");
    public NewsListCellRenderer() {
    setLayout(new BorderLayout());
    Container cnt = new Container();      
    name.getStyle().setBgTransparency(0);
    name.getStyle().setFont(Font.createSystemFont(Font.FACE_SYSTEM, Font.STYLE_BOLD, Font.SIZE_SMALL));
    cnt.addComponent(icon);
    cnt.addComponent(name);
    addComponent(BorderLayout.CENTER, cnt);
    focus.getStyle().setBgTransparency(100);
    focus.getStyle().setBgColor(0xFFFFFF);
    }
public Component getListCellRendererComponent(List list, Object value, int i, boolean bln) {
     News news = (News) value;
     name.setText(news.getTitle().trim());
     icon.setIcon(news.geImage());
     this.getStyle().setBorder(Border.createLineBorder(1, 0x666666));     
      return this;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:56:22.570

您遇到的问题是您将名称和图标标签都放在了容器中。您没有设置容器的布局。您不必使用容器，但如果您必须设置其布局。将图像放在 BorderLayout 的 WEST 或 EAST 上，然后将容器放在中心。

```
setLayout(new BorderLayout());

Container cnt = new Container();
cnt.setLayout(new BoxLayout(BoxLayout.Y_AXIS));

name.getStyle().setBgTransparency(0);
name.getStyle().setFont(Font.createSystemFont(Font.FACE_SYSTEM, Font.STYLE_BOLD, Font.SIZE_SMALL));

cnt.addComponent(name);

addComponent(BorderLayout.WEST, icon);
addComponent(BorderLayout.CENTER, cnt); 
```

# django - TemplateSyntaxError：内联不是有效的标签库

> ID：12157472
> 
> 赞同：3
> 
> 时间：2012-08-28T10:34:08.903
> 
> 标签：django, django-templates, django-apps

构建我的 Django 应用程序时，我一直在使用[django-basic-app](https://github.com/nathanborror/django-basic-apps)中的一些代码，尤其是`inlines`应用程序。

在我的`blog`应用程序中，我加载`inlines`了一个模板（在此处`blog/templates/admin/blog/change_form.html`）

```
{% extends "admin/change_form.html" %}

{% block extrahead %}
  {% load adminmedia inlines %}
  {{ block.super }} 
```

当我这样做时，我有一个错误

> /admin/blog/post/1/ 处的 TemplateSyntaxError
> 
> 'inlines' 不是有效的标签库：ImportError raise loading loading inlines.templatetags.inlines: No module named models

项目的结构是

```
blog/
    templates/admin/blog/
                        change_form.html
    ...
inlines/
    __init__.py
    models.py
    templatetags/
           __init__.py
           inlines.py
    ... 
```

并导入`inlines/templatetags/inlines.py`

```
from django import template
from inlines.models import InlineType
from inlines.parser import inlines
import re 
```

`inlines`存在，`INSTALLED_APPS`我正在使用 Django 1.4 和 python 2.7

我正在尝试拥有一个独立的应用程序（当时未链接到项目），但我不明白为什么博客应用程序没有检测到它。django 检测到内联模型，我可以使用管理界面对其进行管理，只是模板标签失败。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T11:19:51.003

尝试将`inlines.py`模块重命名`inlines_tags.py`为例如，因此模块和包的名称将不同。并且不要忘记`*.pyc`从 templatetags 文件夹中删除所有旧文件

# trigger.io - 使用 Trigger.io 检索设备 UDID

> ID：12157478
> 
> 赞同：1
> 
> 时间：2012-08-28T10:34:21.633
> 
> 标签：trigger.io

有没有办法使用 Trigger.IO 检索设备 UDID？想要检索通用设备标识符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T18:54:54.077

基于最新的[api 文档](http://docs.trigger.io/en/v1.4/modules/mobile/index.html)-**没有**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T22:58:03.630

我们没有用于检索 UDID 的 API，因为它[在 iOS 上已被弃用，](http://techcrunch.com/2011/08/19/apple-ios-5-phasing-out-udid/)如果应用程序使用它，[可能会被拒绝。](http://venturebeat.com/2012/03/25/apple-rejects-udid-apps/)

我们实际上为[Reload创建了一个唯一的](http://current-docs.trigger.io/modules/reload.html)*安装*ID（不是设备 ID）——如果将来需要，我们可以在 API 中公开它，但它似乎并不是特别有用 TBH！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-21T14:40:24.833

我建议您做的是通过创建和使用您自己的随机 UUID 并结合注册电子邮件地址来“玩”偏好。

# java - 如何在 Java 虚拟机中查找类的实例？

> ID：12157480
> 
> 赞同：2
> 
> 时间：2012-08-28T10:34:27.987
> 
> 标签：java, classloader, virtual-machine

我想在一个大项目中测试其中一个类，但是我不能修改项目的任何文件（因此不是静态公共数组）。

除此之外，我只能初始化项目的框架（待测试），但同样没有对对象的引用。

我唯一拥有的，我的测试类和框架运行在同一个 Java 虚拟机上。

因此，我想从我的测试类中获取单个类的实例。

如何在虚拟机中找到它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:40:13.920

您可以使用一些 aop 框架，例如 spring-aop，来跟踪每次创建对象的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T10:46:43.370

这里还有其他几个类似的问题，最好的答案似乎是这个：[https ://stackoverflow.com/a/1947200/1140456](https://stackoverflow.com/a/1947200/1140456)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:36:35.850

在 Java 中，您无法访问您没有引用的对象。您需要有人更新框架以允许您直接或通过其他对象访问对象。

# asp-classic - vbScript 和 jscripr 之间的会话

> ID：12157481
> 
> 赞同：0
> 
> 时间：2012-08-28T10:34:29.463
> 
> 标签：asp-classic

`vbscript`我的网站是使用其中创建会话变量进行编码的，但突然我使用了`jscript`一页。似乎在那一刻会话ID发生了变化。

我怎样才能保存它？

谢谢！

编辑：查看我的下一条消息以获得更多精度。

* * *

我有个主意。我的 jscript 页面使用 xmlhttp 对象调用另一个 asp 页面，这是抱怨错误的被调用页面。我认为这是因为对相关 asp 页面的请求是在服务器端进行的。因此，页面接收服务器的会话 ID，而不是来自客户端。在您看来，我该如何改变呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:40:58.913

在您的情况下很可能不是问题，但几周前我遇到了会话 ID 更改的问题，在我的情况下，这是由站点名称中的下划线引起的。这是一个奇怪的 IIS 错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:40:04.347

如果您在会话名称中使用下划线，请尝试将其删除。

我们最近遇到了类似的问题。我不确定确切的原因（可能是名称的编码），但删除下划线可以解决问题。

# node.js - Node.js + LDAP - 从 Android 创建新用户

> ID：12157482
> 
> 赞同：0
> 
> 时间：2012-08-28T10:34:39.137
> 
> 标签：node.js, ldap

我正在使用 node.js (ldapjs.org) 运行 LDAP 服务器，并且我想从 Android 创建一个新用户。

我使用命令“ldapadd”创建了一个用户，并使用命令“ldapsearch”验证了用户创建成功。这些命令直接在服务器上运行。

从 Android 创建用户的最佳方式是什么？我假设我需要从 Android 做一个 http post 并运行另一个 node.js 服务器实例（用于 http），它将接受 post 请求并在机器的命令行上运行“ldapadd”。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:56:26.977

您可以使用 UnboundID 的[LDAP SDK](https://www.unboundid.com/products/ldap-sdk/)在 Android 上运行 LDAP 客户端并直接与 LDAP Directory Server 交互。另见[尼尔的文章](http://www.dirmgr.com/blog/2009/3/24/using-ldap-on-android.html)。

# sql - 如何在plsql中的过程主体内创建游标

> ID：12157492
> 
> 赞同：5
> 
> 时间：2012-08-28T10:35:05.913
> 
> 标签：sql, oracle, plsql, plsqldeveloper

我想在过程主体内动态创建**光标，**我也必须使用**for 循环**而不是下面的代码。我做了动态光标，但我不能使用 for 循环。

```
PROCEDURE myprocedure
AS
  LV_TEST_CUR SYS_REFCURSOR;
  LV_QUERY VARCHAR2(200);
  LV_DATE  DATE;
BEGIN
  LV_QUERY:='select sysdate as mydate from dual';
  OPEN LV_TEST_CUR FOR LV_QUERY;
  /*FOR CUR_VAR IN LV_TEST_CUR
  LOOP
  dbms_output.put_line(CUR_VAR.mydate);
  end LOOP;
  */
  LOOP
    FETCH LV_TEST_CUR INTO LV_DATE;
    EXIT
  WHEN LV_TEST_CUR%NOTFOUND;
    DBMS_OUTPUT.PUT_LINE(LV_DATE);
  END LOOP;
  CLOSE LV_TEST_CUR;
END myprocedure; 
```

如果我使用注释代码（for循环），我得到错误

> PLS-00221：不是过程或未定义。

是否可以在动态游标中使用 for 循环？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T11:06:05.963

您不能在游标 FOR 循环中引用游标变量

但您可以直接使用 select 语句：

```
create or replace PROCEDURE myprocedure
AS
  LV_TEST_CUR SYS_REFCURSOR;
  LV_QUERY VARCHAR2(200);
  LV_DATE  DATE;
BEGIN
  FOR CUR_VAR IN (select sysdate as mydate from dual)
  LOOP
  dbms_output.put_line(CUR_VAR.mydate);
  end LOOP;

END myprocedure;
/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:03:50.290

您不能将`FOR <row> IN <cursor> LOOP`语法与动态 SQL 一起使用；请参阅[文档中的示例，该示例](http://docs.oracle.com/cd/E14072_01/appdev.112/e10472/dynamic.htm#i13057)显示了无论如何注释掉该代码时您正在使用的方法。

你的例子根本不需要是动态的，但我假设你只是为这个问题简化了它。如果它有一个占位符，那么将无处可设置其值。如果你有：

```
LV_QUERY:='select sysdate - :days as mydate from dual';
FOR CUR_VAR IN LV_TEST_CUR LOOP
    dbms_output.put_line(CUR_VAR.mydate);
END LOOP; 
```

...那么该`FOR ... IN ...`版本不会给您任何地方为`days`占位符分配值。你必须使用动态`OPEN`来做到这一点：

```
LV_QUERY:='select sysdate - :days as mydate from dual';
-- pass '1' as the bind variable
OPEN LV_TEST_CUR FOR LV_QUERY USING 1;
LOOP
    FETCH LV_TEST_CUR INTO LV_DATE;
    EXIT WHEN LV_TEST_CUR%NOTFOUND;
    DBMS_OUTPUT.PUT_LINE(LV_DATE);
END LOOP;
CLOSE LV_TEST_CUR; 
```

当然，您可能不需要占位符，只是动态构建查询字符串，但限制仍然适用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:01:06.297

据我所知，您不能将 FOR 循环与游标变量或“引用游标”一起使用。FOR 循环仅用于硬编码的 SQL 语句或游标。[请参阅此处](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/static.htm#i40146)
有关游标变量限制的部分，其中明确指出“......您不能在游标 FOR 循环中引用游标变量”。

# php - emacs php补全

> ID：12157498
> 
> 赞同：3
> 
> 时间：2012-08-28T10:35:34.970
> 
> 标签：php, emacs

我已经为 emacs 安装了 php-mode，我希望完成 (ESC-TAB) 能够用于以该语言定义的函数。我已经在不同的 html 页面中下载了手册并运行以下命令来生成完成文件：

```
cd /sviluppo/php-manual-xhtml
ls -1 function*.html | sed -e 's/^function\.\([-a-zA-Z_0-9]*\)\.html/\1/' | tr - _  > /sviluppo/emacs-lisp/php-completion-file 
```

在我的 .emacs 文件中，我放置了以下说明

```
(setq php-mmanual-path "/sviluppo/php-manual-xhtml")
(setq php-completion-file "/sviluppo/emacs-lisp/php-completion-file") 
```

但是自动完成不起作用：当我写例如*iss*并点击 ESC+TAB 时，迷你缓冲区回复

```
 No tags table loaded 
```

但我不想使用标签表，我只想看看可能的功能。我在这里想念什么？

# actionscript-3 - 影片剪辑与播放器一起移动

> ID：12157500
> 
> 赞同：0
> 
> 时间：2012-08-28T10:35:41.990
> 
> 标签：actionscript-3, flash, symbols

我的问题是 _saw in the flash 我正在做的只是与 _player 一起移动，不像 _boundary(floor) 在舞台上只是静态的

```
public class PiggyRun extends MovieClip
{

private var _vy:Number;
private var _vx:Number; 
```

我在剧本中的播放器

```
public var _player:player;
public var _boundary:Boundary;
public var _rp:RG; 
```

我声明看到和边界一样

```
public var _saw:saw;
public var _jump:Boolean=true;

    public function PiggyRun():void
    {
    _rp.visible=false;
    _vx=0;
    _vy=0;
    _player.gotoAndStop('walking');
    stage.focus= stage;
    this.addEventListener(Event.ENTER_FRAME,enterFrameHandler);
    stage.addEventListener(KeyboardEvent.KEY_DOWN, kDHandler);
    stage.addEventListener(KeyboardEvent.KEY_UP, kUHandler);

    }

        private function enterFrameHandler(e:Event):void
        { 
```

我增加了 x 因为它是一个正在运行的游戏

```
 _vy+=2;
        _vx+=.5;

        if(_vx>10)
        {
            _vx=10
        }
        _player.x+=_vx;
        _player.y+=_vy;

        borders();
        stageFocus();
        sawblade();
        } 
```

按下时的控件

```
 private function kDHandler(e:KeyboardEvent):void
        {

            switch(e.keyCode)
            {

                case 38:
                if(_jump){
                _jump=false;    
                _vy=-20;

                }
                break;

                default:

            }
        } 
```

我删除了这个函数的内容

```
 private function kUHandler(e:KeyboardEvent):void
        {
            switch(e.keyCode)
            {

            }
        }

        private function borders():void
        {
            if(_vy > 0)
            {
                if (_player.y>stage.stageHeight)
                {
                    _player.x=_rp.x;
                    _player.y=_rp.y;
                    _boundary.x=0;
                    _boundary.y=0;
                    _saw.x=0;
                    _saw.y=0;
                    _vy=0;
                    _vx=0;

                }else{
                    var border:Boolean=false;

                    if(_boundary.hitTestPoint(_player.x,_player.y,true))
                    {
                    border=true;

                    }
                        if (border)
                        {
                            while(border)
                            {

                            _player.y-=0.05;

                            _jump=true;
                            border=false;
                                if(_boundary.hitTestPoint(_player.x,_player.y,true))
                                {
                                border=true;

                                }
                            }
                            _vy=0;

                        }
                }
            }
        } 
```

我把这个函数放在哪里，如果玩家击中锯片，它会重生回到 _rp 的位置，但我很难过 2 个电影剪辑不会相遇，因为即使我强行将 _saw 和它放在一起，它们也会同时移动，这个函数不起作用

```
 private function sawblade():void
        {
            if(_vy > 0)
            {
                if (_player.y>stage.stageHeight)
                {
                    _player.x=_rp.x;
                    _player.y=_rp.y;
                    _boundary.x=0;
                    _boundary.y=0;
                    _saw.x=0;
                    _saw.y=0;
                    _vy=0;
                    _vx=0;

                }else{
                    var sawn:Boolean=false;

                    if(_saw.hitTestPoint(_player.x,_player.y,true))
                    {
                    sawn=true;

                    }
                        if (sawn)
                        {
                            while(sawn)
                            {

                            _player.x=_rp.x;
                            _player.y=_rp.y;
                            _boundary.x=0;
                            _boundary.y=0;
                            _saw.x=0;
                            _saw.y=0;
                            _vy=0;
                            _vx=0;
                            _jump=true;
                            sawn=false;
                               if(_saw.hitTestPoint(_player.x,_player.y,true))
                            {
                                sawn=true;

                                }
                            }
                            _vy=0;

                        }
                }
            }
        }
        private function stageFocus():void
        {
            _boundary.x+=(stage.stageWidth * 0.5)-_player.x;
            _player.x=stage.stageWidth*0.5;
            _saw.x=5;
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:42:30.227

我看了你的 fla，你的 MovieClips 的定位并没有什么奇怪的地方。问题在于你的`stageFocus`功能。您不断地将锯子的位置定位在 x=5 并且您的播放器位于舞台中央。只有`_boundary`被移动。所以你应该`_saw`像移动一样移动`_boundary`。

```
private function stageFocus():void
{
    var playerOffset:int = (stage.stageWidth * 0.5)-_player.x;

    _boundary.x+= playerOffset;
    _player.x=stage.stageWidth*0.5;
    _saw.x+=playerOffset;
} 
```

更笼统地说，我认为你在这里有点过头了。尝试缩小您的游戏概念，或者甚至[使用框架](http://flashpunk.net/learn/)来帮助您入门。

# magento - Magento：在 CMS 页面上显示投票块

> ID：12157520
> 
> 赞同：0
> 
> 时间：2012-08-28T10:36:57.190
> 
> 标签：magento, magento-1.7

我想在 cms 页面上显示民意调查。我使用了以下代码，但我看不到它。

```
{{block type="poll/activePoll" name="right.poll" as="poll" template="poll/active.phtml"}} 
```

我尝试使用对内容块的引用来启用它。但是当我这样做时，它会显示在顶部或底部。我也尝试使用下面和之后的属性，但没有运气。我不能把它拿到我想要的地方。理想的解决方案是在 CMS 页面中编写一些代码，将 div 包裹在它周围，这样我就可以在我想要的地方得到它。

谢谢，基兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:05:31.793

添加这样的块只会在内容中添加块，而不是在侧边栏或布局的其他部分。在 CMS 页面的右侧边栏上添加投票。继续您的管理，“CMS”=>“页面”。选择您需要在网格中添加投票的页面并进行编辑。在设计选项卡中，添加以下内容：

```
<reference name="right">
        <block type="poll/activePoll" name="right.poll">
            <action method="setPollTemplate"><template>poll/active.phtml</template><type>poll</type></action>
            <action method="setPollTemplate"><template>poll/result.phtml</template><type>results</type></action>
        </block>
</reference> 
```

希望我的回答对你有帮助

# javascript - facebook 是否禁止在类似按钮处触发 edge.create 事件

> ID：12157525
> 
> 赞同：1
> 
> 时间：2012-08-28T10:37:10.357
> 
> 标签：javascript, facebook, facebook-like

我设置了 facebook like 按钮回调

但

1-只有当我要喜欢外部网站（例如（google.com - yahoo.com ..etc））并且它会启动给我警报时，它才有效。

2- 如果我要喜欢 facebook 粉丝页面（例如（https://www.facebook.com/FAN_PAGE_NAME）），它不会工作，它不会启动。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>
<script type="text/javascript">
    window.$j = $.noConflict(true);
</script>
<script type="text/javascript" src="//connect.facebook.net/en_US/all.js"></script>
<script type="text/javascript">
    FB.Event.subscribe('edge.create', function(response) {
        alert("Callback called");
    });
</script>

<!-- Embeds the like button -->
<script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {return;}
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>
<fb:like href="https://www.facebook.com/E3lamion.Kazebon" send="false" layout="button_count" width="450" show_faces="false"></fb:like> 
```

任何帮助和剂量 Facebook 禁用它的粉丝页面或他背后的故事是什么？

~ 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:46:05.843

你的代码是正确的。这是一个已知的错误。它现在适用于除粉丝页面之外的所有内容。您可以在此处关注状态：[https ://developers.facebook.com/bugs/457950334238629?browse=search_503d58108cb633632443461](https://developers.facebook.com/bugs/457950334238629?browse=search_503d58108cb633632443461)

# sql-server - SSRS“我的订阅”为空

> ID：12157528
> 
> 赞同：0
> 
> 时间：2012-08-28T10:37:15.070
> 
> 标签：sql-server, reporting-services

我们正在运行 SQL Server 2008 并已设置 SSRS 以允许一小部分用户在数据库上运行报告。电子邮件订阅正常运行，相关订阅将显示在每个报告的“管理”对话框中。但是，“我的订阅”页面始终显示为空白。

我很难找到该问题已在其他地方解决的记录；但是，我发现[一些信息](http://msdn.microsoft.com/en-us/library/ms156307.aspx)表明“我的订阅”页面仅列出了当前用户“拥有”的订阅，并且“所有者”实际上是订阅的创建者。这使我认为可能有一个第三方/系统帐户在用户的位置创建订阅，尽管我不确定它的来源是什么。我检查了配置管理器，没有指定执行帐户。

感谢您在确定此问题的根源方面提供的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:08:12.633

破解它！用户在 Report Manager 中进行身份验证`SOMEDOMAIN\MyUser`，而 ReportServer 数据库正在存储没有域的用户。

我所要做的就是将域添加到`[ReportServer].[dbo].Users`.

# php - 计算表中字符串值的百分比

> ID：12157530
> 
> 赞同：1
> 
> 时间：2012-08-28T10:37:37.050
> 
> 标签：php, mysql, sql

我有一张桌子，上面的问题要么通过要么失败。

我只需要一个 SQL 查询来查找问题 1 的失败百分比在提出的问题总数中的百分比。

我正在尝试这个，但这会出现语法错误 -

```
$CA001 = "COUNT(CA001Result WHERE CA001Result = "Fail") / COUNT(CA001Result)) From Datable"; 
```

正如我所说，总菜鸟，它是 MYSQL 顺便说一句。

我不需要隔离 Product 的 % 结果，到目前为止我已经得到了这个，并且已经尝试过 GROUP by Product 但这没有用，有什么想法吗？

```
$CA001 = "( SELECT ROUND(100 *  (SELECT count(CA001Result ) from Data_Table where (CA001Result='Fail' AND Product='$product' AND Area='$Area'))/count(CA001Result),2) from Data_Table) AS 'CA001 %'"; 
```

再看一遍我需要在下面的地方插入一个 WHERE Product = 'Product' ，但是不太明白把它放在哪里，因为下面不起作用：

$`CA001 = "( SELECT ROUND(100 * (SELECT count(CA001Result ) from Data_Table where (CA001Result='Fail' AND Product='$product' AND Area='$Area'))/count(CA001Result WHERE Product = '$product'),2) from Data_Table) AS 'CA001 %'";`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:49:37.047

假设这是您的表：

```
ID     Answer
-------------
 1  ,  'pass'
 2  ,  'pass'
 3  ,  'fail'
 4  ,  'fail'
 5  ,  'fail'
 6 ,   'fail' 
```

所以你需要使用这样的子查询：

```
SELECT 100 * 
(SELECT COUNT(answer) FROM t WHERE answer='fail')/COUNT(answer)
AS Fail_percent FROM t; 
```

或者你可以像这样`COUNT`使用`CASE`：

```
SELECT 100 * 
COUNT(CASE WHEN answer = 'fail' THEN 1 ELSE NULL END)/COUNT(answer)
AS Fail_percent FROM t; 
```

或者你可以像这样`SUM`使用`CASE`：

```
SELECT 100 * 
SUM(CASE WHEN answer = 'fail' THEN 1 ELSE 0 END)/COUNT(answer)
AS Fail_percent FROM t; 
```

或者您可以`SUM`不使用`CASE`（仅适用于 MySQL），如下所示：

```
SELECT 100 * 
SUM(answer = 'fail')/COUNT(answer)
AS Fail_percent FROM t; 
```

# [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!2/df68a/24)

# android - 在我的 Android 应用程序中调用 onPause() 时，如何保持计时器运行？

> ID：12157531
> 
> 赞同：0
> 
> 时间：2012-08-28T10:37:46.387
> 
> 标签：android, android-intent, android-activity, android-service, android-lifecycle

我正在制作一个正在运行的应用程序。当我开始跑步时，计时器就会启动。当我解锁手机屏幕时，我的活动从头开始。我知道我可以使用 onSaveInstanceState() 保存我的对象状态，但是当我的手机屏幕被锁定时，如何保持计时器运行？最好的方法是什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:50:36.607

最佳解决方案取决于您打算做什么。您可以使用该计时器创建一个服务，该计时器即使在 onPause() 之后仍将继续运行。或者，如果您只是想知道已经过去了多少时间，我建议您在运行开始时创建一个时间戳，并在您需要时将其与当前时间进行比较。

# javascript - 使用 Javascript 的 Ajax 请求在 iPhone 浏览器中不起作用

> ID：12157533
> 
> 赞同：0
> 
> 时间：2012-08-28T10:37:49.337
> 
> 标签：javascript, jquery

对于使用 javascript 的 iPhone 浏览器 ajax 请求不起作用，我使用以下代码进行 ajax 请求

```
$.ajax({
    type: type,
    url:requestURL,
    dataType: "text",
    success: successCallback,
    error: function (request, ajaxOptions, exception){
            alert(request.status);
            alert(exception);
        }  
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:02:21.007

`localhost`不在你的`iPhone (or iPhone simulator)`

如果您的机器和 iphone 在同一个（无线）网络中，请将 localhost 替换为您机器的 IP 地址，它会正常工作。

或者更好的方法，将您的文件上传到某个免费域并使用服务器的主机名/域名/IP地址进行测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:40:50.867

我认为数据类型的问题：“文本”。从您的 ajax 请求中删除数据类型选项。这样做。

```
$.ajax({
    type: type,
    url:requestURL,  
    success: successCallback,
    error: function (request, ajaxOptions, exception){
            alert(request.status);
            alert(exception);
        }  

}); 
```

# c - 函数内的空闲字符指针

> ID：12157536
> 
> 赞同：2
> 
> 时间：2012-08-28T10:37:59.367
> 
> 标签：c, function-pointers

主要的：

```
char *tmpip;
tmpip = get_public_ip(); 
```

函数get_public_ip：

```
char * get_public_ip(void){
    char *ipresult;

    if(((ipresult = malloc(17))) == NULL){
        perror("malloc on pub ip");
        exit(1);
    }

    if(fgets(ipresult, 16, tmpfp) == NULL){
        perror("fgets error pubip");
        exit(1);
    }
    fclose(tmpfp);
    return ipresult;
} 
```

我的问题是：
在main里面做是好`free(tmpip)`还是错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T10:42:38.387

这是一种很好的编码方式：您`malloc()`在函数中保留一些内存，并且`free()`在不再需要时使用它。一定要注释你的函数或原型，它将`malloc()`需要内存，这样你就知道你必须这样`free()`做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:39:41.567

为什么会出错？您实际上没有任何其他选择可以在其他地方释放分配的缓冲区...在 C 中调用分配内存的函数，然后使调用者（外部）函数负责释放该内存是惯用的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T11:22:28.887

如果使用动态分配，那么释放指针`free(tmpip)`绝对是好的！该函数`get_public_ip`只需要记录要释放资源，调用者必须确保`free`在返回值上被调用。

另一种方法是提供一个函数`void free_public_ip(char*buf) {free(buf);}`，并记录调用者必须使用它来释放资源。这为您在将来更改内存分配方式提供了一些灵活性，而无需调用代码更改。这当然没有必要。

`malloc`在我看来，像这样的固定大小的小型缓冲区并没有什么意义。头文件`get_public_ip`可以`#define PUBLIC_IP_SIZE (17)`并带一个`char*`参数，然后调用者可以这样做：

```
char tmpip[PUBLIC_IP_SIZE];
get_public_ip(tmpip);
// no more thinking required 
```

代替：

```
char *tmpip = get_public_ip();
// code here, perhaps does more things that could fail, 
// maybe some thinking required to ensure every code path passes through:
free(tmpip); 
```

If that number `17` can change in future without the opportunity to re-compile the calling code (for instance if this is a library and you require binary compatibility), then dynamic allocation would be justified.

# c# - 即使找到键，实体框架也会为导航属性插入行

> ID：12157537
> 
> 赞同：3
> 
> 时间：2012-08-28T10:38:00.793
> 
> 标签：c#, entity-framework, ef-database-first

我正在使用实体框架。我有一个表 Person，它在表 PersonCategory 上有一个外键。Person Id 是一个自动递增的身份 (1,1)。每次我更新人员实体时，实体框架都会为 PersonCategory 表插入一行，即使找到了类别。

我正在使用数据库优先设计。

```
class Person
{
  public string Name {get;set}
  public PersonCategory {get;set;}
}

class PersonCategory
{
  public int ID {get;set}
  public string Name{get;set;}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:42:28.497

首先，您需要将现有附加`PersonCategory`到上下文；

```
var myPersonCat = new PersonCategory { ID = 1, Name = "Foo" };
var myPerson = new Person { Name = "Bar", PersonCategory = myPersonCat };

context.PersonCategories.Attach(myPersonCat);    
context.People.Add(myPerson); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:41:13.333

您需要在保存之前将您的设置`State`为`PersonCategory``Unchanged``Person`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:51:55.647

你可以发布你用来更新的代码吗？在我看来，您每次都在添加一个新人，并且为新记录添加了一个人类别。你想要的是从 EF 上下文中检索你想要的人，更新你想要的字段，并将更改保存到上下文中，而不向你的数据库添加任何新元素，这样你只修改现有记录，现有关系将被维护。就像是

```
var myPerson = context.People.FindbyId(personId);
myPerson.Name = "Joe";
myPerson.Age = "20";

context.SaveAllChanges(); 
```

# android - 查看寻呼机上的进度对话框

> ID：12157539
> 
> 赞同：2
> 
> 时间：2012-08-28T10:38:07.233
> 
> 标签：android, android-fragments, android-viewpager, progressdialog

我正在使用 View Pager 在活动（Dashboard.java）中显示 3 个片段。单击上一个活动（Login.java）上的按钮后加载活动，其中两个片段显示从服务器获取的列表视图。

问题是从服务器获取数据并填充为列表视图至少需要 3-7 秒。所以我想显示一个 ProgressDialog 来显示一个 Loading 状态。

我尝试过 AsyncTask 从片段中的服务器加载数据。它有效，但仅在几次后才显示 ProgressDialog，仅在填充列表之前一秒钟。单击按钮加载主活动（Dashboard.java）也有延迟

**所以有两个问题：** 1.进度对话框出现得很晚2.上一个活动（Login.java）到MainActivity（Dashboard.java）有延迟（有时显示黑屏）

**这是我在 Fragment 中的 AsyncTask**

```
new AsyncTask<Void, Void, Void>() {

            @Override
            protected void onPostExecute(Void result) {

                    pd.dismiss();
                super.onPostExecute(result);
            }

            @Override
            protected void onPreExecute() {
                pd.show();
                super.onPreExecute();
            }

            @Override
            protected Void doInBackground(Void... params) {

                NodeList nl = doc.getElementsByTagName(KEY_ITEM);
                // looping through all item nodes <item>
                for (int i = 0; i < nl.getLength(); i++) {
                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();
                    Element e = (Element) nl.item(i);
                    // adding each child node to HashMap key => value
                    map.put(KEY_ID, parser.getValue(e, KEY_ID)); // id not using any
                                                                    // where
                    map.put(KEY_NAME, parser.getValue(e, KEY_NAME));

                    // adding HashList to ArrayList
                    menuItems.add(map);
                }

                                return null;
            }
        }.execute(); 
```

实际上，我应该在 MainActivity (Dashboard.java) 还是 Fragment.java 上使用 ProgressDialog？请引导我走向正确的道路。

**编辑** 实际上用进度对话框加载片段的最佳方法是什么？（片段是从服务器填充的列表视图）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:49:53.753

可能有两种解决方案..

1.  在您从**Login.java**`AsyncTask`活动中凝视**Dashboard.java**时开始，并将开始活动代码放在. 这将帮助您在片段有完整数据时加载**Dashboard.java活动。****`onPostExecute()``AsyncTask`**

*****   `onCreate()`在**Dashboard.java**中启动 AsyncTask 。并在 AsyncTask 中显示**ProgressDailog**`onPreExecute()`并取消它，`onPostExecute()`但为此您有一些片段，因此用户看不到**Dashboard.java**活动`pre-design layout`的黑屏。**** 

 ******* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:55:56.433

没关系，在 doInBackground() 之外写一个方法是我的错误******

# iphone - 我们可以使用 iOS 从我的应用程序更改 Facebook 帐户的封面图片吗？

> ID：12157542
> 
> 赞同：0
> 
> 时间：2012-08-28T10:38:25.610
> 
> 标签：iphone, ios, facebook, facebook-graph-api

`Facebook Timeline`是否可以以编程方式从应用程序更改我的封面图像`iPhone`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:50:38.487

你是说你个人资料的封面照片？

如果是这样，那么不 - 目前无法从任何 iOS 应用程序更改封面图片。

# php - CodeIgniter Active Record - 删除除最后 10 个之外的所有匹配条件

> ID：12157543
> 
> 赞同：0
> 
> 时间：2012-08-28T10:38:32.313
> 
> 标签：php, mysql, codeigniter

我正在尝试从表中删除除最后 10 个之外的所有结果。这应该不会太难，但它们也必须符合一定的标准。

表格如下所示；

```
chat_id
location_id
user_id
message
created 
```

从技术上讲，它必须删除具有特定 location_id 的所有内容，并在表中保留最后 10 条记录。

Active Record 类可以做到这一点吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:13:00.420

根本不是最佳解决方案，但我想这可能会有所帮助。

我从您的问题中假设标准是特定的`location_id`.

如果创建的字段是时间戳字段，并且最后 10 条记录是指最近的 10 条记录，则可以使用类似于以下的查询：

```
DELETE FROM `table` 
WHERE created<
    (select min(a.cdate) from 
        (
         select b.created as cdate from `table` b
         where b.location_id=<<loc_id>>
         order by b.created desc limit 10
        ) a
    )
AND location_id=<<loc_id>>; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:42:05.547

一会儿会想出活动记录，你可以试试这个 sql 查询：

```
$this->db->query('
delete from table_name where chat_id NOT IN 
(select chat_id from table_name where location_id=1292 order by chat_id DESC LIMIT 10)
') 
```

# google-plus - 获取链接是否成功与 google 共享以及共享按钮

> ID：12157544
> 
> 赞同：1
> 
> 时间：2012-08-28T10:38:33.937
> 
> 标签：google-plus

我需要获取 url 是否在 google plus 中成功共享。请注意，如果用户单击共享按钮然后关闭气泡是不够的。我需要确定共享链接以在我的应用程序中执行特定逻辑。

有什么理由这样做吗？`onend interaction`我需要查找的函数的“url”参数中是否有任何文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T23:14:40.620

下面是一个示例，展示了如何使用`onendinteraction`Google+ 分享按钮。

```
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type="text/javascript">
        function startInteraction(params) {        
            window.console.log('end interaction');
        };

        function endInteraction(params) {
            window.console.log('end interaction');
        };
</script>

<g:plus action="share" href="http://example.com" onstartinteraction="startInteraction" onendinteraction="endInteraction"></g:plus> 
```

# android - 我可以使用 ObjectInuptStream 和 ObjectOutputStream 将数据传输到高级版本吗？

> ID：12157547
> 
> 赞同：0
> 
> 时间：2012-08-28T10:38:53.100
> 
> 标签：android

我正在尝试找到一种将数据从 android lite 应用程序传输到高级应用程序的方法。我正在尝试使用 ObjectInputStream 和 ObjectOutputStream，但我遇到了麻烦，因为由于谷歌播放限制，我必须有不同的包名称，然后我的自定义对象无法识别。有没有办法解决这个问题，以便我可以直接转移自己的对象？您还有其他方法可以推荐吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:48:38.873

最简单的方法是让用户将数据导出到 SD 卡，然后您的高级/付费版本的应用程序应该让他导入这些数据。

# jquery - 如何使用 Ajax 从 visistat.com API 跨域获取 JSON 或 JSONP 结果？

> ID：12157555
> 
> 赞同：1
> 
> 时间：2012-08-28T10:39:36.497
> 
> 标签：jquery, ajax, json, cross-domain, asp.net-web-api

我在 jQuery 中使用以下 API 调用来检索数据。我在`?callback=?`最后附加了似乎解决了跨域域问题，如果我不包括我得到跨域错误。

在 chrome 中，它说：*“资源解释为脚本，但使用 MIME 类型传输`text/html`。”*

返回的响应是`Content-Type: text/html; charset=UTF-8`。

我可以通过在 Chrome *Console* → *Resources*中查看响应来查看响应。但是如何在 JavaScript 中操作响应？

```
$.getJSON("http://api.visistat.com/stats-api-v2.php?key=skx79q0pyu01.&qt=idd&d=json&sdate=2012-08-26&edate=2012-08-28?callback=?", function(json) {
    console.log(json);
}); 
```

我无权更改 API。

**更新：** 尝试使用 YQL 例如[http://jsfiddle.net/4VEHR/5/](http://jsfiddle.net/4VEHR/5/)

看起来这个插件也可能有用：[https ://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/](https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:43:51.443

除非您可以控制`api.visistat.com`并修改`stats-api-v2.php`脚本，否则除了联系服务并要求他们修复他们发送的响应头（它需要`Content-Type: text/json`，而 PHP 默认是`text/html`）之外，您无能为力。在浏览器方面，您收到的警告发生在 Javascript 有机会处理数据之前 - jQuery`<script>`以您的 API URL 作为其源来实例化一个元素，并且浏览器在收到响应时立即注意到内容类型不匹配，之前将其传递回 jQuery。

不过，这个警告是无害的。真正的问题是您使用的服务不支持 JSONP——您提供`callback`了 jQuery 文档中指定的参数来强制 JSONP 结果预期，但该服务实际上并没有产生有效的 JSONP（它仍然产生纯 JSON）。我已尝试在您的 API 请求中更改`d=json`为`d=jsonp`，但显然该服务不支持它。您需要想办法从服务中获取 JSONP 结果，或者在您的域上实现服务器端代理，以避免跨域问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:46:59.807

像这样使用 $.ajax

```
$.ajax({
    url:"http://api.visistat.com/stats-api-v2.php?key=skx79q0pyu01.&qt=idd&d=json&sdate=2012-08-26&edate=2012-08-28",
    dataType:'jsonp',
    crossDomain:true,
    success:function(data){alert(data);}
})​;​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:51:11.437

如果您使用该`callback`参数，则告诉 jquery 使用 jsonP

这意味着您的回复应包含：

```
callback( ...your data...); 
```

JSONP 意味着它创建了一个方法`callback`（可以获取数据）。比添加一个带有 src 属性的脚本标签你的 url。脚本被加载执行的回调方法。你有数据。

如果您无法访问/更改 api 来解决此问题，则无法使用 jsonP。

你说的是CORS。这是一个不同的故事......你只需要确保它发送正确的标题。

[http://enable-cors.org/](http://enable-cors.org/)

基本上确保它发送`Access-Control-Allow-Origin: your domain` （或 * 允许所有）

如果你不能这样做，你唯一的选择就是代理。代理是一种中间件。您向脚本发出请求，脚本获取数据并将其返回给您。例如[php 代理](http://jquery-howto.blogspot.de/2009/04/cross-domain-ajax-querying-with-jquery.html)。你可以在 asp、jsp、flash 甚至 java applet 中做同样的事情。

# matlab - 如何在matlab中制作和保存视频（avi）

> ID：12157558
> 
> 赞同：7
> 
> 时间：2012-08-28T10:39:43.067
> 
> 标签：matlab

我自己在学习matlab，我用matlab制作了一个动画图；现在我想把它保存为视频文件。你能告诉我如何在matlab中将我的动画转换成视频文件。下面是我的代码

```
x=[1:2];
for i=1:25,
m=randi([3,5]);
n=randi([3,5]);
y=[m n];
bar(x,y)
axis equal                
A(i) = getframe;          
end 
```

matlab 版本 7.8 R2009a

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T11:00:08.123

使用 avifile：

```
aviobj = avifile('example.avi','compression','None');
x=[1:2];
for i=1:25,
m=randi([3,5]);
n=randi([3,5]);
y=[m n];
bar(x,y)
axis equal        
aviobj = addframe(aviobj,gcf);       
drawnow 
end
viobj = close(aviobj) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T12:42:48.953

如果 Matlab 的 avifile 不起作用（它可能与 64 位操作系统的编解码器有问题），然后使用 mmwrite。 [http://www.mathworks.com/matlabcentral/fileexchange/15881-mmwrite](http://www.mathworks.com/matlabcentral/fileexchange/15881-mmwrite)

这很简单，而且有效。我用它来创建 *.wmv 文件，只需： `mmwrite(filename, frames);`

编辑：代码示例

```
% set params
fps = 25;
n_samples = 5 * fps;
filename = 'd:/rand.wmv';
% allocate frames struct
fig = figure;
f = getframe(fig);
mov = struct('frames', repmat(f, n_samples, 1), ...
    'times', (1 : n_samples)' / fps, ...
    'width', size(f.cdata, 2), ...
    'height', size(f.cdata, 1));
% generate frames
for k = 1 : n_samples
    imagesc(rand(100), [0, 1]);
    drawnow;
    mov.frames(k) = getframe(fig);
end
% save (assuming mmwrite.m is in the path)
mmwrite(filename, mov); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T10:49:29.727

一种方法是将图形[打印](http://www.mathworks.com.au/help/techdoc/ref/print.html)到图像上，然后将生成的图像序列拼接成视频。[ffmpeg](http://ffmpeg.org/)和[mencoder](http://www.mplayerhq.hu/)是很好的工具。如果您知道正确的搜索词，有一些很好的资源可以描述这一点。我喜欢[这个](http://electron.mit.edu/~gsteele/ffmpeg/)

在 mencoder 中，您可以使用以下命令将图像拼接在一起：

```
mencoder "mf://*.jpg" -mf fps=10 -o test.avi -ovc lavc -lavcopts vcodec=msmpeg4v2:vbitrate=800 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T10:49:39.517

看看[`VideoWriter`](http://www.mathworks.com/help/techdoc/ref/videowriterclass.html)或[`avifile`](http://www.mathworks.com/help/techdoc/ref/avifile.html)

# java - MockitoInvocationHandler 类的 NoClassDefFoundError

> ID：12157559
> 
> 赞同：7
> 
> 时间：2012-08-28T10:39:44.240
> 
> 标签：java, junit4, mockito, powermock

我正在使用`mockito-all-1.9.5-rc1.jar`和`powermock-mockito-1.4.12-full.jar`。当我运行这个简单的单元测试来模拟非最终类中的最终方法时。

```
import static org.junit.Assert.assertEquals;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.powermock.api.mockito.PowerMockito;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

@RunWith(PowerMockRunner.class)
@PrepareForTest(ABC.class)
public class ABCTest {

    @Test
    public void finalCouldBeMock() {
        final ABC abc = PowerMockito.mock(ABC.class);
        PowerMockito.when(abc.myMethod()).thenReturn("toto");
        assertEquals("toto", abc.myMethod());
    }

} 
```

当我运行它时，我得到了 `java.lang.NoClassDefFoundError: org/mockito/internal/MockitoInvocationHandler Caused by: java.lang.ClassNotFoundException: org.mockito.internal.MockitoInvocationHandler`

`MockitoInvocationHandler`当我在`mockito-all-1.9.5-rc1.jar`and中搜索类时`powermock-mockito-1.4.12-full.jar`。我找不到任何东西。需要帮助解决这个问题！谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-28T12:16:44.360

Mockito 1.9.5-rc1 必须在内部进行重构以允许第三方模拟制造商。`MockitoInvocationHandler`在 Mockito 1.9.0 之前，它是 Mockito 内部结构的一部分（正如包名所暗示的）。

由于这些更改，~~截至今天，~~~~当前~~某些较旧版本的 Powermock 版本与最新的 Mockito 版本不兼容。

 ~~避免模​​拟/存根决赛或静态的另一个原因；）

希望能帮助干杯，~~

# java - 如何从 AlertDialog 的 onClickListener 中访问我的 Activity 的实例变量？

> ID：12157561
> 
> 赞同：0
> 
> 时间：2012-08-28T10:39:45.730
> 
> 标签：java, android, scope, instances

这是我的一个非常简化的版本`Activity`：

```
public class Search extends Activity {

    //I need to access this.
    public SearchResultsAdapter objAdapter;

    public boolean onOptionsItemSelected(MenuItem itmMenuitem) {

      if (itmMenuitem.getItemId() == R.id.group) {

          final CharSequence[] items = {"Red", "Green", "Blue"};

          AlertDialog.Builder builder = new AlertDialog.Builder(this);
          builder.setTitle(itmMenuitem.getTitle());

          builder.setSingleChoiceItems(lstChoices),
              0, new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int item) {
                  //I need to access it from here.
                }

              });

          AlertDialog alert = builder.create();
          alert.show();

          return true;

        } 

    }

} 
```

当按下菜单按钮时，我的应用程序会弹出一个`AlertDialog`. 创建时`AlertDialog`和内联`onClickListener`附加到对话框中的每个项目。我需要访问在我的活动`objAdapater`中定义的变量。`Search`我无权访问我的搜索实例，`onClickListener`因此无法访问它。我的代码中有一点点汤，因为`Activity`到处都传递了实例。也许我做错了什么。

我将如何从我的内部访问`Activity`（`Search`实例），`onClickListener`以便我可以访问它的方法和变量。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T10:46:38.563

使用从侦听`Search.this.objAdapter`器访问应该可以工作。`objAdapter`

`Search.this`引用当前实例`Search`并允许您访问其字段和方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:46:25.960

让您的活动实现 OnClickListener：

```
public class Search  extends Activity implements DialogInterface.OnClickListener { ... 
```

将 onclick 方法添加到您的活动中：

```
public void onClick(DialogInterface dialog, int item) {
     //I need to access it from here.
} 
```

然后将您的活动作为侦听器传递：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle(itmMenuitem.getTitle());

builder.setSingleChoiceItems(lstChoices),0, this); 
```

# c# - Specflow 功能的继承

> ID：12157566
> 
> 赞同：2
> 
> 时间：2012-08-28T10:40:10.760
> 
> 标签：c#, .net, bdd, specflow

我正在寻找一种在 specflow 功能中实现继承的方法。例如，具有必须测试的常见场景的基本要素类。

3-4 个派生特征类，它们继承了基类中的所有场景并添加了一些自己的场景。同样，Binding 类也将遵循继承结构。这是测试具有基本控制器（基本功能类中的场景）和 4-5 个实现的 ASP.NET MVC 应用程序所必需的。

我可以为每个派生的控制器类复制功能文件，但这会导致大量重复。

这在specflow中是否可行，还是我走错了路？请帮忙。谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T16:19:49.050

我不是 100% 确定这是否是正确的道路（读作，我从来不需要做这样的事情）。对我来说，任何继承和重用都来自步骤定义（或绑定）类。但即便如此...

我不知道您是否可以使用 SpecFlow 中提供的工具简单地做到这一点 - 但据我所知，您有以下选项（这不是一个经过验证的理论......我可能会稍后测试它 - 但我想这可能会为您提供一个想法...）

*   您的功能文件的“代码隐藏”（设计器生成代码）是部分类实现......
*   ...所以我想您可以创建一个“基本”（通用）功能文件...
*   ...然后为您的每个特定/实现功能文件的代码隐藏创建一个部分类文件...
*   ...每个部分类将指定一个基类，它是从“基本”功能文件代码隐藏生成的类名。

希望这会有所帮助。

编辑：好的，我已经测试了这个理论......它会像我上面描述的那样工作。我刚刚创建了一个带有关联测试/规范项目的新项目，并在测试/规范项目中进行了上述操作。测试运行器运行基本功能，然后运行特定/实现功能......再次包含基本功能。

试一试 - 只需不到 5 分钟即可完成我的建议，**看看结果是否符合您的要求。**

# html - 一个 Div 应该与前一个（或内部）Div 具有相同的宽度 - 没有 Javascript？

> ID：12157571
> 
> 赞同：4
> 
> 时间：2012-08-28T10:40:35.230
> 
> 标签：html, css

我的示例仅使用 jQuery 中的一行 Javascript。

[http://jsfiddle.net/TFLMX/4/](http://jsfiddle.net/TFLMX/4/)

当我将班级中心的 html 更改为

```
div class="center">Here is</div> 
```

粉红色的 div 获得中心的宽度，但如果没有 javascript，这可能吗？
也许较小的 div 必须在中心 div 中？谢谢！

这里出错了：http: [//jsfiddle.net/TFLMX/10/](http://jsfiddle.net/TFLMX/10/)

div 'smaller' 在任何时候都必须具有与 'center' 相同的动态宽度。
但是“较小”中的文本如果变得太小以在一行上显示文本，则必须进行自动换行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:03:07.963

我使用了这个逻辑并按照您的意愿工作：

> `max-width+padding+margin`第二个 div <`min-width+padding+margin`上一个 div

```
.smaller {
    background: pink;
    padding: 10px;
    line-height: 1.5em;
    max-width:100px;
    margin:0 5px;
} 
```

[`Working DEMO`](http://jsfiddle.net/TFLMX/41)

# web-services - WS-BaseNotification 与 WS-Eventing

> ID：12157575
> 
> 赞同：2
> 
> 时间：2012-08-28T10:40:53.880
> 
> 标签：web-services, soa, ws-eventing, ws-notification

根据网上的文献，我可以看到有两个与Web Services Eventing相关的规范：

1.  **WS-BaseNotification** - 2004 年由 OASIS 提交
2.  **WS-Eventing** - W3C 于 2006 年提交

对我来说，两者似乎具有相同的功能。现在业界最能接受的规范是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-12T09:46:18.717

您无法将 SOAP（Web 服务堆栈的消息编码部分）与 AMQP 或 JMS（也是传输协议）进行比较。使用 SOAP 1.2，您可以使用 JMS 传输绑定（仅适用于 RPC）。AMQP 建立在 TCP 之上，因此您可以使用“SOAP over AMQP”以及“SOAP over TCP”。您可以查看[这篇论文](http://www.innoq.com/soa/ws-standards/poster/innoQ%20WS-Standards%20Poster%202007-02.pdf)以了解 Web 服务堆栈中的 SOAP 依赖于何处。

对问题。两个相互竞争的标准：

1.  WS-Eventing W3C 公开草案
2.  WS-Notification 1.3 OASIS-Standard（取代了 WS-Events），它成长为 3 个规范的家族：
    *   WS-BaseNotification（非常类似于 WS-Eventing）
    *   WS-BrokeredNotification（可选）
    *   WS 主题（可选）

也在每次版本更新中收敛。行业没有“领头羊”。WS-Eventing 是 WS-Notification 的更简单的姐妹，在某些情况下可能是优势。例如 WS-Eventing 没有定义暂停/恢复订阅（但您可以取消订阅/订阅）、代理中介（但有办法做到）等。

可以在这些 ws-* 规范之间智能切换的实现可以在[这里](http://www.extreme.indiana.edu/xgws/messenger/)找到。方法，如何添加消息队列，没有任何定义。我认为，这就是 AMQP 绑定或 websocket 子协议绑定将在 web 服务堆栈的未来发挥作用的地方。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-29T09:31:32.077

我认为现在大多数人不会使用 SOAP，而是依赖更简单的协议（在这种情况下为 AMQP/JMS），但如果您确实需要/想要使用 SOAP WS-Notification（这是 WS-BaseNotification 的父标准）是更广泛支持的协议（例如通过[ServiceMix](http://servicemix.apache.org/servicemix-wsn2005.html)或[IBM WebSphere](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/cjwsn_overview.html)）

# compression - 压缩一组大整数

> ID：12157578
> 
> 赞同：15
> 
> 时间：2012-08-28T10:40:59.577
> 
> 标签：compression, integer

我有一组整数，我希望有最紧凑的表示。我有以下限制/功能：

*   它被设置，或者换句话说，一个唯一整数列表，其中的顺序无关紧要
*   集合 L 的大小相对较小（通常为 1000 个元素）
*   整数遵循 0 和 N-1 之间的均匀分布，其中 N 相对较大（例如 2^32）
*   对压缩集元素的访问是随机的，但如果解压过程不是那么快也可以
*   显然，压缩应该是无损的

我尝试了一些方法，但我对结果并不满意，并且我确信存在更好的解决方案：

*   增量编码（排序，然后编码差异），或者也排序，然后编码第 i 个元素和 i*N/L 之间的差异。两者都给出了合理的结果，但不是很好，可能是因为 N 和 L 的典型大小。霍夫曼编码增量没有帮助，因为它们通常很大。
*   递归范围缩小（[http://ygdes.com/ddj-3r/ddj-3r_compact.html](http://ygdes.com/ddj-3r/ddj-3r_compact.html)）。这看起来很聪明，但在指数递减的整数上效果最好，这绝对不是这里的情况。
*   这里关于stackoverflow的一些讨论与我的问题相似但不完全等同（[用于压缩顺序正整数的C库](https://stackoverflow.com/questions/1082913/c-library-for-compressing-sequential-positive-integers)，[压缩排序整数](https://stackoverflow.com/questions/523733/compress-sorted-integers)）

我很高兴听到你可能有的任何想法。提前致谢！

*更新：*

事实证明，delta 编码似乎接近最优解。对于集合中元素的其他其他分布，这可能会有所不同。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T14:56:50.633

你可以通过数数来了解你能做的最好的事情。（我希望stackoverflow允许像math.stackexchange这样的TeX方程。无论如何......）

```
ceiling(log(Combination(2^32,1000)) / (8 * log(2))) = 2934 
```

因此，如您所说，如果选择是均匀分布的，那么对于该特定情况，您平均希望的最佳压缩是 2934 字节。最佳比率是 4000 字节的未编码表示的 73.35%。

`Combination(2^32,1000)`只是压缩算法可能输入的总数。如果它们是均匀分布的，那么最佳编码是一个巨大的整数，它通过索引标识每个可能的输入。每个巨型整数值唯一地标识一个输入。想象一下在一个巨大的表格中按索引查找输入。 `ceiling(log(Combination(2^32,1000)) / log(2))`是该索引整数需要多少位。

*更新：*

我找到了一种使用现成的压缩工具接近理论最佳值的方法。我排序，应用增量编码，并从中减去一个（因为连续不同元素之间的增量至少为一个）。然后诀窍是我写出所有高字节，然后是下一个最重要的字节，等等。增量减一的高字节往往为零，因此将许多零组合在一起，标准压缩实用程序喜欢. 下一组字节也倾向于偏低值。

对于示例（来自 0..2^32-1 的 1000 个统一且不同的样本），我在运行时平均得到 3110 个字节，通过`gzip -9`3098 个字节`xz -9`（xz 使用与 7zip 相同的压缩，LZMA）。这些非常接近理论上的最佳平均值 2934。此外，gzip 的开销为 18 字节，而 xz 的开销为 24 字节，无论是对于标题还是尾部。因此，与理论最佳值更公平的比较是 3092`gzip -9`和 3074 `xz -9`。比理论最佳值大 5% 左右。

*更新 2：*

我实现了对排列的直接编码，平均达到了 2974 字节，仅比理论上的最佳值高出 1% 多一点。我使用[GNU 多精度算术库](http://gmplib.org/)将每个排列的索引编码为一个巨大的整数。编码和解码的实际代码如下所示。我为这些函数添加了注释，这些`mpz_*`函数的名称可能并不明显，它们正在执行哪些算术运算。

```
/* Recursively code the members in set[] between low and high (low and high
   themselves have already been coded).  First code the middle member 'mid'.
   Then recursively code the members between low and mid, and then between mid
   and high. */
local void combination_encode_between(mpz_t pack, mpz_t base,
                                      const unsigned long *set,
                                      int low, int high)
{
    int mid;

    /* compute the middle position -- if there is nothing between low and high,
       then return immediately (also in that case, verify that set[] is sorted
       in ascending order) */
    mid = (low + high) >> 1;
    if (mid == low) {
        assert(set[low] < set[high]);
        return;
    }

    /* code set[mid] into pack, and update base with the number of possible
       set[mid] values between set[low] and set[high] for the next coded
       member */
        /* pack += base * (set[mid] - set[low] - 1) */
    mpz_addmul_ui(pack, base, set[mid] - set[low] - 1);
        /* base *= set[high] - set[low] - 1 */
    mpz_mul_ui(base, base, set[high] - set[low] - 1);

    /* code the rest between low and high */
    combination_encode_between(pack, base, set, low, mid);
    combination_encode_between(pack, base, set, mid, high);
}

/* Encode the set of integers set[0..num-1], where each element is a unique
   integer in the range 0..max.  No value appears more than once in set[]
   (hence the name "set").  The elements of set[] must be sorted in ascending
   order. */
local void combination_encode(mpz_t pack, const unsigned long *set, int num,
                              unsigned long max)
{
    mpz_t base;

    /* handle degenerate cases and verify last member <= max -- code set[0]
       into pack as simply itself and set base to the number of possible set[0]
       values for coding the next member */
    if (num < 1) {
            /* pack = 0 */
        mpz_set_ui(pack, 0);
        return;
    }
        /* pack = set[0] */
    mpz_set_ui(pack, set[0]);
    if (num < 2) {
        assert(set[0] <= max);
        return;
    }
    assert(set[num - 1] <= max);
        /* base = max - num + 2 */
    mpz_init_set_ui(base, max - num + 2);

    /* code the last member of the set and update base with the number of
       possible last member values */
        /* pack += base * (set[num - 1] - set[0] - 1) */
    mpz_addmul_ui(pack, base, set[num - 1] - set[0] - 1);
        /* base *= max - set[0] */
    mpz_mul_ui(base, base, max - set[0]);

    /* encode the members between 0 and num - 1 */
    combination_encode_between(pack, base, set, 0, num - 1);
    mpz_clear(base);
}

/* Recursively decode the members in set[] between low and high (low and high
   themselves have already been decoded).  First decode the middle member
   'mid'. Then recursively decode the members between low and mid, and then
   between mid and high. */
local void combination_decode_between(mpz_t unpack, unsigned long *set,
                                      int low, int high)
{
    int mid;
    unsigned long rem;

    /* compute the middle position -- if there is nothing between low and high,
       then return immediately */
    mid = (low + high) >> 1;
    if (mid == low)
        return;

    /* extract set[mid] as the remainder of dividing unpack by the number of
       possible set[mid] values, update unpack with the quotient */
        /* div = set[high] - set[low] - 1, rem = unpack % div, unpack /= div */
    rem = mpz_fdiv_q_ui(unpack, unpack, set[high] - set[low] - 1);
    set[mid] = set[low] + 1 + rem;

    /* decode the rest between low and high */
    combination_decode_between(unpack, set, low, mid);
    combination_decode_between(unpack, set, mid, high);
}

/* Decode from pack the set of integers encoded by combination_encode(),
   putting the result in set[0..num-1].  max must be the same value used when
   encoding. */
local void combination_decode(const mpz_t pack, unsigned long *set, int num,
                              unsigned long max)
{
    mpz_t unpack;
    unsigned long rem;

    /* handle degnerate cases, returning the value of pack as the only element
       for num == 1 */
    if (num < 1)
        return;
    if (num < 2) {
            /* set[0] = (unsigned long)pack */
        set[0] = mpz_get_ui(pack);
        return;
    }

    /* extract set[0] as the remainder after dividing pack by the number of
       possible set[0] values, set unpack to the quotient */
    mpz_init(unpack);
        /* div = max - num + 2, set[0] = pack % div, unpack = pack / div */
    set[0] = mpz_fdiv_q_ui(unpack, pack, max - num + 2);

    /* extract the last member as the remainder after dividing by the number
       of possible values, taking into account the first member -- update
       unpack with the quotient */
        /* rem = unpack % max - set[0], unpack /= max - set[0] */
    rem = mpz_fdiv_q_ui(unpack, unpack, max - set[0]);
    set[num - 1] = set[0] + 1 + rem;

    /* decode the members between 0 and num - 1 */
    combination_decode_between(unpack, set, 0, num - 1);
    mpz_clear(unpack);
} 
```

有一些`mpz_*`函数可以将数字写入文件并读回，或者将数字导出为内存中的指定格式，然后再将其导入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T10:52:45.590

如果整数是随机的、不相关的，并且确实遵循 [0, 2³²-1[ 上的均匀分布规律，则可能可以证明您无法从平凡的表示中压缩数组。我错过了你的问题吗？

对于非随机数数组，我通常使用简单的[deflate](http://en.wikipedia.org/wiki/DEFLATE)。这是一种常用的算法，因为它适用于一般而非完全随机的数组。您拥有所有主要语言的可调节压缩级别的良好库这一​​事实当然是另一个优势。

我使用 deflate 来压缩物理传感器测量的小阵列（大约 300 到 2000 个 32 位整数）并获得 70% 的增益，但这是因为连续的传感器测量很少有很大不同。

找到适合所有情况的明显更好的算法可能并不容易。大多数改进将来自您的数字系列的特殊性。

您可能还会注意到，通过将多个集合压缩在一起，您可以获得更好的压缩增益。当然，这可能非常不方便，具体取决于您的应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-10T18:22:48.817

题目还开吗？

我目前正在研究它。
（PS：我是游戏创建者而不是数学家）
几周以来都睡不好觉，因为我想知道为什么我们不使用 A^B+C 变体（或其他）来压缩图像和信息。

我的乌托邦目标是通过使用计算机 GPU 创建的 A^B+C 公式的不太可能的组合来压缩 4.600.000 位的数字。基本上我尝试这样做，因为它允许在（<100 个字符）下存储/流式传输小图像，而不会通过 Wifi 以 30 fps 的速度损失质量，并且不会破坏带宽。

我的现实目标是将 200 位数字压缩为 <5 个字符。

PS：为此，我已经创建了“Base Chinais”如果你想使用它：
- [https://github.com/EloiStree/2019_09_19_MathCompressionOfImage/wiki/SouthChinais](https://github.com/EloiStree/2019_09_19_MathCompressionOfImage/wiki/SouthChinais)
- [https://gitlab.com/eloitree/2019_09_06_UnicodeBasedId](https://gitlab.com/eloistree/2019_09_06_UnicodeBasedId)

Base(Chinais) 䶯 = 38727
它允许在碸^灾+㔩中转换 2307^200+32450<br> 如果您尝试使用原始压缩 BigInteger，则 base China 提供 4-4.5 倍的 压缩
：
1413546486463454579816416416416462324833676542
둲觋㷬乮䄠櫡䒤갱

所以现在我需要将 <200 位压缩为 9999^9999+99999999
如果您对 A^B+C 有任何想法或替代方案，请随时警告我。
我花了很多时间通过 Unity3D 进行实验。
我将在这里发布我在 sujet 上找到的内容：
[https ://github.com/EloiStree/2019_09_19_MathCompressionOfImage/wiki](https://github.com/EloiStree/2019_09_19_MathCompressionOfImage/wiki)

希望它会帮助下一个跌倒在这里的人。

如果您想谈论它，请在 Discord 上找到我。
[https://eloitree.page.link/discord](https://eloistree.page.link/discord)

# android - 从其他 Fragment 重启 Loader

> ID：12157579
> 
> 赞同：0
> 
> 时间：2012-08-28T10:41:04.857
> 
> 标签：android, android-fragments, asynctaskloader

我有一个 ViewPager，里面有 3 个片段。每个 Fragment 使用 AsyncTaskLoader 从数据库中获取数据。现在我想从片段 C 重新启动片段 A 的加载器，但如果我打电话

```
getLoaderManager.getLoader( "LOADER_A_ID" ) 
```

结果为空。我读到每个 LoaderManager 都有一个 Activity/Fragment，每个 Fragment 都有一个自己的 LoaderManager。有没有人解决我的问题的好主意？

我将实现一个 GlobalLoaderManager，它是一个单例模式并保存片段。ViewPager 重用了他的 Fragments，所以我在这个 Manager 中只有一个 Pager Fragment 的实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:01:31.717

答案是来自 Luksprog 的帖子。感谢您的帮助。

> 我对一些旧代码进行了小幅调整，以向您展示如何执行我上面所说的操作。你可以在这里找到它[gist.github.com/3511928](https://gist.github.com/luksprog/3511928) – Luksprog

# php - 找到可用（未加载）的 PHP 扩展

> ID：12157584
> 
> 赞同：9
> 
> 时间：2012-08-28T10:41:39.927
> 
> 标签：php, php-extension

我需要一种方法来查找所有可用的 PHP 扩展*，无论它们是否已加载*。我查看了[如何查看 PHP 加载的扩展？](https://stackoverflow.com/questions/478844/how-do-i-see-the-extensions-loaded-by-php) 但它只解释了如何找到加载的扩展。我也想要一种方法来找到卸载的扩展。

从 php.ini 知道 extension_dir 我做了一个`ls /extension_dir/*.so`返回 26 个条目的操作。当我尝试使用 时`php -m`，我得到了 57 个条目。这怎么可能？

我如何知道可以加载哪些 PHP 扩展？我不想知道哪些已加载但哪些是*可加载*的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T11:12:29.233

> 请记住，某些扩展可能会静态构建到 PHP 中。您将在 php.ini 中看到这些作为扩展名列出，但您将无法禁用它们，并且在大多数情况下，您不会在 php.ini 或 .so / .DLL 文件中看到引用它们的 extension= 行。删除静态编译的扩展需要重新编译 PHP 本身，在大多数情况下，这几乎不需要，因为大多数静态编译的扩展往往包含很少需要删除的核心功能。

[http://arr.gr/blog/2012/06/on-php-extensions/](http://arr.gr/blog/2012/06/on-php-extensions/)

感谢马泰奥·塔西纳里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T13:49:04.627

If you want the list of possibly loadable extensions, you should get the list of the files with an extension equal to the value of `PHP_SHLIB_SUFFIX`, and that are in the directory where PHP checks for PHP extensions (`<install-dir>/lib/php/extensions/<debug-or-not>-<zts-or-not>-ZEND_MODULE_API_NO`). If you want to avoid those extensions that are already loaded, you should pass the name of the extension (without file extension) to [extension_loaded()](http://us.php.net/manual/en/function.extension-loaded.php).

Keep in mind that a file with the right file extension could not be loaded from PHP as extension because the file doesn't have the right structure (for example because the file is corrupted), or because the PHP extension depends from files the extension doesn't find, or it is not able to load.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T20:47:11.480

一种方法是检查“extension_dir”值：

```
phpinfo(); 
```

然后扫描目录以查看文件：

```
$exts = scandir("/usr/lib/php5/extension_dir/");
print_r($exts); 
```

# extjs - 如何将背景渐变添加到工具栏

> ID：12157586
> 
> 赞同：0
> 
> 时间：2012-08-28T10:41:43.997
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我想知道如何在 sencha touch 2 中为工具栏创建自定义背景渐变。

目前我正在使用此代码，我想用我的自定义渐变更改 Glossy。

```
 @include sencha-toolbar-ui('custom-toolbar-1L', #555555,'glossy'); 
```

请提供代码示例谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:28:09.110

您正在使用的 mixin 生成以下 CSS 类：

```
.x-toolbar-custom-toolbar-1L {
    [..some glossy styles...]
} 
```

如果你知道你可以简单地自己创建这个 CSS 代码，或者更好的是，你可以在调用 mixin 之后覆盖这个类的背景渐变。

```
@include sencha-toolbar-ui('custom-toolbar-1L', #555555,'glossy');

.x-toolbar-custom-toolbar-1L {
    [..more awesome styles...]
} 
```

# c# - 对“列表”进行排序` by object properties I have some different objects that all of them have a integer field called Place. Is there a way to sort out this list without knowing what is the actual object? I mean just accessing 问问题 问问题 2012-08-28T10:42:05.963 924 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. c#linqsortingobjectienumerable 4 7 回答 7 This answer is useful 5 您应该从基类派生您的类。 public class Base { public int Place; } public class Car : Base { // other properties } public class Human : Base { // other properties } 然后您可以创建一个基本类型列表，添加人和汽车。之后，您可以使用 LinqSort或OrderBy方法。 List list = new List(); list.Add(new Human { Place = 2 }); list.Add(new Car { Place = 1 }); var sortedList = list.Sort(x => x.Place); 更多信息 C# Station 教程 - 第 8 课：类继承 MSDN - Queryable.OrderBy MSDN - List.Sort 方法 于 2012-08-28T10:44:59.597 回答 This answer is useful 4 不，因为object没有Place属性只有Car/Human做。 有几种方法可以解决这个问题： 引入一个基类 public class GameObject { public int Place { get; set; } } public class Car : GameObject {} public class Human : GameObject {} ... List <gameobject>GameObjects 使用通用接口 public interface IGameObject { int Place { get; } } public class Car : IGameObject { public int Place { get; set; } } public class Human : IGameObject { public int Place { get; set; } } List <igameobject>GameObjects 于 2012-08-28T10:50:41.867 回答 This answer is useful 1 最好的方法是使用接口。如果不能，您仍然可以使用dynamic关键字进行后期绑定： var list = new List { new Car { Place = 3 }, new Human { Place = 1 }, new Car { Place = 2 } }; var sortedList = list.OrderBy(o => ((dynamic)o).Place); 于 2012-08-28T10:47:54.127 回答 This answer is useful 1 您刚刚发现的是这些类型之间的关系。两者似乎都有 Place 属性，因此您应该提取一个接口 à Carla 。HumanIGameObject 于 2012-08-28T10:44:51.787 回答 This answer is useful 0 您可以让他们实现一个接口IPlaceable并使用一个属性而不仅仅是一个字段： public interface IPlaceable { int Place { get; set; } } public class Car : IPlaceable { public int Place { get; set; } //Other related fields } public class Human : IPlaceable { public int Place { get; set; } //Other related fields } // Somwhere in program List <iplaceable>GameObjects; // Somwhere else GameObjects.OrderBy(go => go.Place); 请注意，现在列表是 aList<iplaceable>而不是 a List。 于 2012-08-28T10:48:20.227 回答 This answer is useful 0 你能做的最好的就是使用一个接口，像这样： public Interface IFoo { int place; } 并实现该接口： public class Car : IFoo { public int Place; } public class Human : IFoo { public int Place; } 然后使用 linq： List <ifoo>GameObjects; GameObjects.OrderBy(g => g.Place); 于 2012-08-28T10:48:51.453 回答 This answer is useful 0 是的，它可以使用带反射的委托方法。据我所知，可能是其他一些巨头在不使用反射的情况下创建它 于 2012-08-28T10:45:17.140 回答 Related 1 javascript - 在 Rails 应用程序中的 Google Maps v3 上显示标记 - 使用 Javascript 和 JSON 1 java - Netty - 在频道之间共享附件 0 xcode - 重命名项目后尝试在 GIT 本地存储库上从 XCode 提交 2 vb.net - 如何加速用 VB.NET 制作的游戏 5 python - 以字符串 Python 中另一个字符的出现为条件替换字符串中的字符 3 javascript - 使画布与父级一样宽和一样高 1 java - 收到消息“org.aopalliance.aop.Advice 类型无法解析。” 在spring java程序中 1 glassfish - 在 Struts Action 中调用 EJB 对象 2 android - 有没有办法在给定的 classes.dex 文件中获取类名？ 3 bash - awk 中的 shell 变量使用 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12157592
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#, linq, sorting, object, ienumerable

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:44:59.597

您应该从基类派生您的类。

```
public class Base
{
    public int Place;
}

public class Car : Base
{
    // other properties
}

public class Human : Base
{
    // other properties
} 
```

然后您可以创建一个基本类型列表，添加人和汽车。之后，您可以使用 Linq`Sort`或`OrderBy`方法。

```
List<Base> list = new List<Base>();
list.Add(new Human { Place = 2 });
list.Add(new Car { Place = 1 });

var sortedList = list.Sort(x => x.Place); 
```

### 更多信息

*   [C# Station 教程 - 第 8 课：类继承](http://www.csharp-station.com/Tutorial/CSharp/lesson08)
*   [MSDN - Queryable.OrderBy](http://msdn.microsoft.com/en-us/library/bb549264.aspx)
*   [MSDN - List.Sort 方法](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T10:50:41.867

不，因为`object`没有`Place`属性只有`Car`/`Human`做。

有几种方法可以解决这个问题：

**引入一个基类**

```
public class GameObject
{
    public int Place { get; set; }
}

public class Car : GameObject
{}

public class Human : GameObject
{}

...
List<GameObject> GameObjects 
```

**使用通用接口**

```
public interface IGameObject
{
    int Place { get; }
}

public class Car : IGameObject
{
    public int Place { get; set; }
}

public class Human : IGameObject
{
    public int Place { get; set; }
}

List<IGameObject> GameObjects 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T10:47:54.127

最好的方法是使用接口。如果不能，您仍然可以使用`dynamic`关键字进行后期绑定：

```
 var list = new List<object>
        {
            new Car { Place = 3 },
            new Human { Place = 1 },
            new Car { Place = 2 }
        };

        var sortedList = list.OrderBy(o => ((dynamic)o).Place); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T10:44:51.787

您刚刚发现的是这些类型之间的关系。两者似乎都有 Place 属性，因此您应该提取一个接口 à `Car`la 。`Human``IGameObject`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T10:48:20.227

您可以让他们实现一个接口`IPlaceable`并使用一个属性而不仅仅是一个字段：

```
public interface IPlaceable
{
    int Place { get; set; }
}

public class Car : IPlaceable
{
    public int Place { get; set; }
    //Other related fields
}

public class Human : IPlaceable
{
    public int Place { get; set; }
    //Other related fields
}

// Somwhere in program
List<IPlaceable> GameObjects;

// Somwhere else
GameObjects.OrderBy(go => go.Place); 
```

请注意，现在列表是 a`List<IPlaceable>`而不是 a `List<Object>`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T10:48:51.453

你能做的最好的就是使用一个接口，像这样：

```
public Interface IFoo
{
  int place;
} 
```

并实现该接口：

```
public class Car : IFoo
{
    public int Place;
}

public class Human : IFoo
{
    public int Place;
} 
```

然后使用 linq：

```
List<IFoo> GameObjects;

GameObjects.OrderBy(g => g.Place); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-28T10:45:17.140

是的，它可以使用带反射的委托方法。据我所知，可能是其他一些巨头在不使用反射的情况下创建它</ifoo></iplaceable></iplaceable></igameobject></gameobject>

# sql - SQL Server：COALESCE 导致运行时间过长

> ID：12157596
> 
> 赞同：4
> 
> 时间：2012-08-28T10:42:26.140
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2, coalesce

早上的人们，

我对 COALESCE 有一个小问题，导致将数据写入表的存储过程过度运行。（没有 COALESCE 需要 4 分钟，使用它需要 1 小时 30 分钟）。

我需要清除此暂存表的 f_ 列中的 NULL，因为这些将稍后在仓库中用于微积分，然后显示给 Cognos 报告工作室。

有 161 列需要此操作，我还尝试执行“CASE WHEN X IS NULL THEN 0 ELSE X”，这显然影响较小，但仍需要一个半小时。

还添加了“DEFAULT 0”到没有乐趣的表格构建中。

存储过程如下（为它的庞大规模提前道歉）

```
TRUNCATE TABLE
    ST_PIT_BOOKINGCOSTS

INSERT INTO
    ST_PIT_BOOKINGCOSTS
SELECT DISTINCT
    ST_PIT_BOOKINGHEADERS.i_SK_Bkg,
    ST_PIT_BOOKINGHEADERS.i_SK_Version,
    0 AS f_BkgTransportPax,
    0 AS f_BkgTransportQuantity,
    0 AS f_BkgTransportAdults,
    0 AS f_BkgTransportChildren,
    0 AS f_BkgTransportInfants,
    0 AS f_BkgTransportRevenue,
    0 AS f_BkgTransportCost,
    COALESCE(ST_V_FC_FLIGHTCOSTS_AIR.f_Pax,0) AS f_BkgFltPax,
    COALESCE(ST_V_FC_FLIGHTCOSTS_AIR.f_Quantity,0) AS f_BkgFltQuantity,
    COALESCE(ST_V_FC_FLIGHTCOSTS_AIR.f_Adults,0) AS f_BkgFltAdults,
    COALESCE(ST_V_FC_FLIGHTCOSTS_AIR.f_Children,0) AS f_BkgFltChildren,
    COALESCE(ST_V_FC_FLIGHTCOSTS_AIR.f_Infants,0) AS f_BkgFltInfants,
    COALESCE(ST_V_FC_FLIGHTCOSTS_AIR.f_Revenue,0) AS f_BkgFltRevenue,
    COALESCE(ST_V_FC_FLIGHTCOSTS_AIR.f_Cost,0) AS f_BkgFltCost,
    COALESCE(ST_V_FC_FLIGHTCOSTS_FER.f_Pax,0) AS f_BkgFerryPax,
    COALESCE(ST_V_FC_FLIGHTCOSTS_FER.f_Quantity,0) AS f_BkgFerryQuantity,
    COALESCE(ST_V_FC_FLIGHTCOSTS_FER.f_Adults,0) AS f_BkgFerryAdults,
    COALESCE(ST_V_FC_FLIGHTCOSTS_FER.f_Children,0) AS f_BkgFerryChildren,
    COALESCE(ST_V_FC_FLIGHTCOSTS_FER.f_Infants,0) AS f_BkgFerryInfants,
    COALESCE(ST_V_FC_FLIGHTCOSTS_FER.f_Revenue,0) AS f_BkgFerryRevenue,
    COALESCE(ST_V_FC_FLIGHTCOSTS_FER.f_Cost,0) AS f_BkgFerryCost,
    COALESCE(ST_V_FC_FLIGHTCOSTS_TRN.f_Pax,0) AS f_BkgTrainPax,
    COALESCE(ST_V_FC_FLIGHTCOSTS_TRN.f_Quantity,0) AS f_BkgTrainQuantity,
    COALESCE(ST_V_FC_FLIGHTCOSTS_TRN.f_Adults,0) AS f_BkgTrainAdults,
    COALESCE(ST_V_FC_FLIGHTCOSTS_TRN.f_Children,0) AS f_BkgTrainChildren,
    COALESCE(ST_V_FC_FLIGHTCOSTS_TRN.f_Infants,0) AS f_BkgTrainInfants,
    COALESCE(ST_V_FC_FLIGHTCOSTS_TRN.f_Revenue,0) AS f_BkgTrainRevenue,
    COALESCE(ST_V_FC_FLIGHTCOSTS_TRN.f_Cost,0) AS f_BkgTrainCost,
    COALESCE(ST_V_AC_ACCOMCOSTS.f_Pax,0) AS f_BkgAccomPax,
    COALESCE(ST_V_AC_ACCOMCOSTS.f_Quantity,0) AS f_BkgAccomQuantity,
    COALESCE(ST_V_AC_ACCOMCOSTS.f_Adults,0) AS f_BkgAccomAdults,
    COALESCE(ST_V_AC_ACCOMCOSTS.f_Children,0) AS f_BkgAccomChildren,
    COALESCE(ST_V_AC_ACCOMCOSTS.f_Infants,0) AS f_BkgAccomInfants,
    COALESCE(ST_V_AC_ACCOMCOSTS.f_Revenue,0) AS f_BkgAccomRevenue,
    COALESCE(ST_V_AC_ACCOMCOSTS.f_Cost,0) AS f_BkgAccomCost,
    COALESCE(ST_V_EC_EXTRACOSTS_ACTI.f_Pax,0) AS f_BkgExtraACTIPax,
    COALESCE(ST_V_EC_EXTRACOSTS_ACTI.f_Quantity,0) AS f_BkgExtraACTIQuantity,
    COALESCE(ST_V_EC_EXTRACOSTS_ACTI.f_Adults,0) AS f_BkgExtraACTIAdults,
    COALESCE(ST_V_EC_EXTRACOSTS_ACTI.f_Children,0) AS f_BkgExtraACTIChildren,
    COALESCE(ST_V_EC_EXTRACOSTS_ACTI.f_Infants,0) AS f_BkgExtraACTIInfants,
    COALESCE(ST_V_EC_EXTRACOSTS_ACTI.f_Revenue,0) AS f_BkgExtraACTIRevenue,
    COALESCE(ST_V_EC_EXTRACOSTS_ACTI.f_Cost,0) AS f_BkgExtraACTICost,
    COALESCE(ST_V_EC_EXTRACOSTS_CARH.f_Pax,0) AS f_BkgExtraCARHPax,
    COALESCE(ST_V_EC_EXTRACOSTS_CARH.f_Quantity,0) AS f_BkgExtraCARHQuantity,
    COALESCE(ST_V_EC_EXTRACOSTS_CARH.f_Adults,0) AS f_BkgExtraCARHAdults,
    COALESCE(ST_V_EC_EXTRACOSTS_CARH.f_Children,0) AS f_BkgExtraCARHChildren,
    COALESCE(ST_V_EC_EXTRACOSTS_CARH.f_Infants,0) AS f_BkgExtraCARHInfants,
    COALESCE(ST_V_EC_EXTRACOSTS_CARH.f_Revenue,0) AS f_BkgExtraCARHRevenue,
    COALESCE(ST_V_EC_EXTRACOSTS_CARH.f_Cost,0) AS f_BkgExtraCARHCost,
    COALESCE(ST_V_EC_EXTRACOSTS_CARI.f_Pax,0) AS f_BkgExtraCARIPax,
    COALESCE(ST_V_EC_EXTRACOSTS_CARI.f_Quantity,0) AS f_BkgExtraCARIQuantity,
    COALESCE(ST_V_EC_EXTRACOSTS_CARI.f_Adults,0) AS f_BkgExtraCARIAdults,
    COALESCE(ST_V_EC_EXTRACOSTS_CARI.f_Children,0) AS f_BkgExtraCARIChildren,
    COALESCE(ST_V_EC_EXTRACOSTS_CARI.f_Infants,0) AS f_BkgExtraCARIInfants,
    COALESCE(ST_V_EC_EXTRACOSTS_CARI.f_Revenue,0) AS f_BkgExtraCARIRevenue,
    COALESCE(ST_V_EC_EXTRACOSTS_CARI.f_Cost,0) AS f_BkgExtraCARICost,
    COALESCE(ST_V_EC_EXTRACOSTS_CHLD.f_Pax,0) AS f_BkgExtraCHLDPax,
    COALESCE(ST_V_EC_EXTRACOSTS_CHLD.f_Quantity,0) AS f_BkgExtraCHLDQuantity,
    COALESCE(ST_V_EC_EXTRACOSTS_CHLD.f_Adults,0) AS f_BkgExtraCHLDAdults,
    COALESCE(ST_V_EC_EXTRACOSTS_CHLD.f_Children,0) AS f_BkgExtraCHLDChildren,
    COALESCE(ST_V_EC_EXTRACOSTS_CHLD.f_Infants,0) AS f_BkgExtraCHLDInfants,
    COALESCE(ST_V_EC_EXTRACOSTS_CHLD.f_Revenue,0) AS f_BkgExtraCHLDRevenue,
    COALESCE(ST_V_EC_EXTRACOSTS_CHLD.f_Cost,0) AS f_BkgExtraCHLDCost,
    COALESCE(ST_V_EC_EXTRACOSTS_CLUB.f_Pax,0) AS f_BkgExtraCLUBPax,
    COALESCE(ST_V_EC_EXTRACOSTS_CLUB.f_Quantity,0) AS f_BkgExtraCLUBQuantity,
    COALESCE(ST_V_EC_EXTRACOSTS_CLUB.f_Adults,0) AS f_BkgExtraCLUBAdults,
    COALESCE(ST_V_EC_EXTRACOSTS_CLUB.f_Children,0) AS f_BkgExtraCLUBChildren,
    COALESCE(ST_V_EC_EXTRACOSTS_CLUB.f_Infants,0) AS f_BkgExtraCLUBInfants,
    COALESCE(ST_V_EC_EXTRACOSTS_CLUB.f_Revenue,0) AS f_BkgExtraCLUBRevenue,
    COALESCE(ST_V_EC_EXTRACOSTS_CLUB.f_Cost,0) AS f_BkgExtraCLUBCost,
    COALESCE(ST_V_EC_EXTRACOSTS_CREC.f_Pax,0) AS f_BkgExtraCRECPax,
    COALESCE(ST_V_EC_EXTRACOSTS_CREC.f_Quantity,0) AS f_BkgExtraCRECQuantity,
    COALESCE(ST_V_EC_EXTRACOSTS_CREC.f_Adults,0) AS f_BkgExtraCRECAdults,
    COALESCE(ST_V_EC_EXTRACOSTS_CREC.f_Children,0) AS f_BkgExtraCRECChildren,
    COALESCE(ST_V_EC_EXTRACOSTS_CREC.f_Infants,0) AS f_BkgExtraCRECInfants,
    COALESCE(ST_V_EC_EXTRACOSTS_CREC.f_Revenue,0) AS f_BkgExtraCRECRevenue,
    COALESCE(ST_V_EC_EXTRACOSTS_CREC.f_Cost,0) AS f_BkgExtraCRECCost,
    COALESCE(ST_V_EC_EXTRACOSTS_EQUI.f_Pax,0) AS f_BkgExtraEQUIPax,
    COALESCE(ST_V_EC_EXTRACOSTS_EQUI.f_Quantity,0) AS f_BkgExtraEQUIQuantity,
    COALESCE(ST_V_EC_EXTRACOSTS_EQUI.f_Adults,0) AS f_BkgExtraEQUIAdults,
    COALESCE(ST_V_EC_EXTRACOSTS_EQUI.f_Children,0) AS f_BkgExtraEQUIChildren,
    COALESCE(ST_V_EC_EXTRACOSTS_EQUI.f_Infants,0) AS f_BkgExtraEQUIInfants,
    COALESCE(ST_V_EC_EXTRACOSTS_EQUI.f_Revenue,0) AS f_BkgExtraEQUIRevenue,
    COALESCE(ST_V_EC_EXTRACOSTS_EQUI.f_Cost,0) AS f_BkgExtraEQUICost,
    COALESCE(ST_V_EC_EXTRACOSTS_EXCU.f_Pax,0) AS f_BkgExtraEXCUPax,
    COALESCE(ST_V_EC_EXTRACOSTS_EXCU.f_Quantity,0) AS f_BkgExtraEXCUQuantity,
    COALESCE(ST_V_EC_EXTRACOSTS_EXCU.f_Adults,0) AS f_BkgExtraEXCUAdults,
    COALESCE(ST_V_EC_EXTRACOSTS_EXCU.f_Children,0) AS f_BkgExtraEXCUChildren,
    COALESCE(ST_V_EC_EXTRACOSTS_EXCU.f_Infants,0) AS f_BkgExtraEXCUInfants,
    COALESCE(ST_V_EC_EXTRACOSTS_EXCU.f_Revenue,0) AS f_BkgExtraEXCURevenue,
    COALESCE(ST_V_EC_EXTRACOSTS_EXCU.f_Cost,0) AS f_BkgExtraEXCUCost,
    COALESCE(ST_V_EC_EXTRACOSTS_FLTR.f_Pax,0) AS f_BkgExtraFLTRPax,
    COALESCE(ST_V_EC_EXTRACOSTS_FLTR.f_Quantity,0) AS f_BkgExtraFLTRQuantity,
    COALESCE(ST_V_EC_EXTRACOSTS_FLTR.f_Adults,0) AS f_BkgExtraFLTRAdults,
    COALESCE(ST_V_EC_EXTRACOSTS_FLTR.f_Children,0) AS f_BkgExtraFLTRChildren,
    COALESCE(ST_V_EC_EXTRACOSTS_FLTR.f_Infants,0) AS f_BkgExtraFLTRInfants,
    COALESCE(ST_V_EC_EXTRACOSTS_FLTR.f_Revenue,0) AS f_BkgExtraFLTRRevenue,
    COALESCE(ST_V_EC_EXTRACOSTS_FLTR.f_Cost,0) AS f_BkgExtraFLTRCost,
    COALESCE(ST_V_EC_EXTRACOSTS_INSR.f_Pax,0) AS f_BkgExtraINSRPax,
    COALESCE(ST_V_EC_EXTRACOSTS_INSR.f_Quantity,0) AS f_BkgExtraINSRQuantity,
    COALESCE(ST_V_EC_EXTRACOSTS_INSR.f_Adults,0) AS f_BkgExtraINSRAdults,
    COALESCE(ST_V_EC_EXTRACOSTS_INSR.f_Children,0) AS f_BkgExtraINSRChildren,
    COALESCE(ST_V_EC_EXTRACOSTS_INSR.f_Infants,0) AS f_BkgExtraINSRInfants,
    COALESCE(ST_V_EC_EXTRACOSTS_INSR.f_Revenue,0) AS f_BkgExtraINSRRevenue,
    COALESCE(ST_V_EC_EXTRACOSTS_INSR.f_Cost,0) AS f_BkgExtraINSRCost,
    COALESCE(ST_V_EC_EXTRACOSTS_OTHR.f_Pax,0) AS f_BkgExtraOTHRPax,
    COALESCE(ST_V_EC_EXTRACOSTS_OTHR.f_Quantity,0) AS f_BkgExtraOTHRQuantity,
    COALESCE(ST_V_EC_EXTRACOSTS_OTHR.f_Adults,0) AS f_BkgExtraOTHRAdults,
    COALESCE(ST_V_EC_EXTRACOSTS_OTHR.f_Children,0) AS f_BkgExtraOTHRChildren,
    COALESCE(ST_V_EC_EXTRACOSTS_OTHR.f_Infants,0) AS f_BkgExtraOTHRInfants,
    COALESCE(ST_V_EC_EXTRACOSTS_OTHR.f_Revenue,0) AS f_BkgExtraOTHRRevenue,
    COALESCE(ST_V_EC_EXTRACOSTS_OTHR.f_Cost,0) AS f_BkgExtraOTHRCost,
    COALESCE(ST_V_EC_EXTRACOSTS_SKIP.f_Pax,0) AS f_BkgExtraSKIPPax,
    COALESCE(ST_V_EC_EXTRACOSTS_SKIP.f_Quantity,0) AS f_BkgExtraSKIPQuantity,
    COALESCE(ST_V_EC_EXTRACOSTS_SKIP.f_Adults,0) AS f_BkgExtraSKIPAdults,
    COALESCE(ST_V_EC_EXTRACOSTS_SKIP.f_Children,0) AS f_BkgExtraSKIPChildren,
    COALESCE(ST_V_EC_EXTRACOSTS_SKIP.f_Infants,0) AS f_BkgExtraSKIPInfants,
    COALESCE(ST_V_EC_EXTRACOSTS_SKIP.f_Revenue,0) AS f_BkgExtraSKIPRevenue,
    COALESCE(ST_V_EC_EXTRACOSTS_SKIP.f_Cost,0) AS f_BkgExtraSKIPCost,
    COALESCE(ST_V_EC_EXTRACOSTS_SKIT.f_Pax,0) AS f_BkgExtraSKITPax,
    COALESCE(ST_V_EC_EXTRACOSTS_SKIT.f_Quantity,0) AS f_BkgExtraSKITQuantity,
    COALESCE(ST_V_EC_EXTRACOSTS_SKIT.f_Adults,0) AS f_BkgExtraSKITAdults,
    COALESCE(ST_V_EC_EXTRACOSTS_SKIT.f_Children,0) AS f_BkgExtraSKITChildren,
    COALESCE(ST_V_EC_EXTRACOSTS_SKIT.f_Infants,0) AS f_BkgExtraSKITInfants,
    COALESCE(ST_V_EC_EXTRACOSTS_SKIT.f_Revenue,0) AS f_BkgExtraSKITRevenue,
    COALESCE(ST_V_EC_EXTRACOSTS_SKIT.f_Cost,0) AS f_BkgExtraSKITCost,
    COALESCE(ST_V_EC_EXTRACOSTS_SPIO.f_Pax,0) AS f_BkgExtraSPIOPax,
    COALESCE(ST_V_EC_EXTRACOSTS_SPIO.f_Quantity,0) AS f_BkgExtraSPIOQuantity,
    COALESCE(ST_V_EC_EXTRACOSTS_SPIO.f_Adults,0) AS f_BkgExtraSPIOAdults,
    COALESCE(ST_V_EC_EXTRACOSTS_SPIO.f_Children,0) AS f_BkgExtraSPIOChildren,
    COALESCE(ST_V_EC_EXTRACOSTS_SPIO.f_Infants,0) AS f_BkgExtraSPIOInfants,
    COALESCE(ST_V_EC_EXTRACOSTS_SPIO.f_Revenue,0) AS f_BkgExtraSPIORevenue,
    COALESCE(ST_V_EC_EXTRACOSTS_SPIO.f_Cost,0) AS f_BkgExtraSPIOCost,
    COALESCE(ST_V_EC_EXTRACOSTS_SPOR.f_Pax,0) AS f_BkgExtraSPORPax,
    COALESCE(ST_V_EC_EXTRACOSTS_SPOR.f_Quantity,0) AS f_BkgExtraSPORQuantity,
    COALESCE(ST_V_EC_EXTRACOSTS_SPOR.f_Adults,0) AS f_BkgExtraSPORAdults,
    COALESCE(ST_V_EC_EXTRACOSTS_SPOR.f_Children,0) AS f_BkgExtraSPORChildren,
    COALESCE(ST_V_EC_EXTRACOSTS_SPOR.f_Infants,0) AS f_BkgExtraSPORInfants,
    COALESCE(ST_V_EC_EXTRACOSTS_SPOR.f_Revenue,0) AS f_BkgExtraSPORRevenue,
    COALESCE(ST_V_EC_EXTRACOSTS_SPOR.f_Cost,0) AS f_BkgExtraSPORCost,
    COALESCE(ST_V_EC_EXTRACOSTS_STND.f_Pax,0) AS f_BkgExtraSTNDPax,
    COALESCE(ST_V_EC_EXTRACOSTS_STND.f_Quantity,0) AS f_BkgExtraSTNDQuantity,
    COALESCE(ST_V_EC_EXTRACOSTS_STND.f_Adults,0) AS f_BkgExtraSTNDAdults,
    COALESCE(ST_V_EC_EXTRACOSTS_STND.f_Children,0) AS f_BkgExtraSTNDChildren,
    COALESCE(ST_V_EC_EXTRACOSTS_STND.f_Infants,0) AS f_BkgExtraSTNDInfants,
    COALESCE(ST_V_EC_EXTRACOSTS_STND.f_Revenue,0) AS f_BkgExtraSTNDRevenue,
    COALESCE(ST_V_EC_EXTRACOSTS_STND.f_Cost,0) AS f_BkgExtraSTNDCost,
    COALESCE(ST_V_EC_EXTRACOSTS_TRAF.f_Pax,0) AS f_BkgExtraTRAFPax,
    COALESCE(ST_V_EC_EXTRACOSTS_TRAF.f_Quantity,0) AS f_BkgExtraTRAFQuantity,
    COALESCE(ST_V_EC_EXTRACOSTS_TRAF.f_Adults,0) AS f_BkgExtraTRAFAdults,
    COALESCE(ST_V_EC_EXTRACOSTS_TRAF.f_Children,0) AS f_BkgExtraTRAFChildren,
    COALESCE(ST_V_EC_EXTRACOSTS_TRAF.f_Infants,0) AS f_BkgExtraTRAFInfants,
    COALESCE(ST_V_EC_EXTRACOSTS_TRAF.f_Revenue,0) AS f_BkgExtraTRAFRevenue,
    COALESCE(ST_V_EC_EXTRACOSTS_TRAF.f_Cost,0) AS f_BkgExtraTRAFCost,
    COALESCE(ST_V_EC_EXTRACOSTS_XXXX.f_Pax,0) AS f_BkgExtraXXXXPax,
    COALESCE(ST_V_EC_EXTRACOSTS_XXXX.f_Quantity,0) AS f_BkgExtraXXXXQuantity,
    COALESCE(ST_V_EC_EXTRACOSTS_XXXX.f_Adults,0) AS f_BkgExtraXXXXAdults,
    COALESCE(ST_V_EC_EXTRACOSTS_XXXX.f_Children,0) AS f_BkgExtraXXXXChildren,
    COALESCE(ST_V_EC_EXTRACOSTS_XXXX.f_Infants,0) AS f_BkgExtraXXXXInfants,
    COALESCE(ST_V_EC_EXTRACOSTS_XXXX.f_Revenue,0) AS f_BkgExtraXXXXRevenue,
    COALESCE(ST_V_EC_EXTRACOSTS_XXXX.f_Cost,0) AS f_BkgExtraXXXXCost,
    0 AS f_DiffTransportPax,
    0 AS f_DiffTransportQuantity,
    0 AS f_DiffTransportAdults,
    0 AS f_DiffTransportChildren,
    0 AS f_DiffTransportInfants,
    0 AS f_DiffTransportRevenue,
    0 AS f_DiffTransportCost,
    0 AS f_DiffFltPax,
    0 AS f_DiffFltQuantity,
    0 AS f_DiffFltAdults,
    0 AS f_DiffFltChildren,
    0 AS f_DiffFltInfants,
    0 AS f_DiffFltRevenue,
    0 AS f_DiffFltCost,
    0 AS f_DiffFerryPax,
    0 AS f_DiffFerryQuantity,
    0 AS f_DiffFerryAdults,
    0 AS f_DiffFerryChildren,
    0 AS f_DiffFerryInfants,
    0 AS f_DiffFerryRevenue,
    0 AS f_DiffFerryCost,
    0 AS f_DiffTrainPax,
    0 AS f_DiffTrainQuantity,
    0 AS f_DiffTrainAdults,
    0 AS f_DiffTrainChildren,
    0 AS f_DiffTrainInfants,
    0 AS f_DiffTrainRevenue,
    0 AS f_DiffTrainCost,
    0 AS f_DiffAccomPax,
    0 AS f_DiffAccomQuantity,
    0 AS f_DiffAccomAdults,
    0 AS f_DiffAccomChildren,
    0 AS f_DiffAccomInfants,
    0 AS f_DiffAccomRevenue,
    0 AS f_DiffAccomCost,
    0 AS f_DiffExtraACTIPax,
    0 AS f_DiffExtraACTIQuantity,
    0 AS f_DiffExtraACTIAdults,
    0 AS f_DiffExtraACTIChildren,
    0 AS f_DiffExtraACTIInfants,
    0 AS f_DiffExtraACTIRevenue,
    0 AS f_DiffExtraACTICost,
    0 AS f_DiffExtraCARHPax,
    0 AS f_DiffExtraCARHQuantity,
    0 AS f_DiffExtraCARHAdults,
    0 AS f_DiffExtraCARHChildren,
    0 AS f_DiffExtraCARHInfants,
    0 AS f_DiffExtraCARHRevenue,
    0 AS f_DiffExtraCARHCost,
    0 AS f_DiffExtraCARIPax,
    0 AS f_DiffExtraCARIQuantity,
    0 AS f_DiffExtraCARIAdults,
    0 AS f_DiffExtraCARIChildren,
    0 AS f_DiffExtraCARIInfants,
    0 AS f_DiffExtraCARIRevenue,
    0 AS f_DiffExtraCARICost,
    0 AS f_DiffExtraCHLDPax,
    0 AS f_DiffExtraCHLDQuantity,
    0 AS f_DiffExtraCHLDAdults,
    0 AS f_DiffExtraCHLDChildren,
    0 AS f_DiffExtraCHLDInfants,
    0 AS f_DiffExtraCHLDRevenue,
    0 AS f_DiffExtraCHLDCost,
    0 AS f_DiffExtraCLUBPax,
    0 AS f_DiffExtraCLUBQuantity,
    0 AS f_DiffExtraCLUBAdults,
    0 AS f_DiffExtraCLUBChildren,
    0 AS f_DiffExtraCLUBInfants,
    0 AS f_DiffExtraCLUBRevenue,
    0 AS f_DiffExtraCLUBCost,
    0 AS f_DiffExtraCRECPax,
    0 AS f_DiffExtraCRECQuantity,
    0 AS f_DiffExtraCRECAdults,
    0 AS f_DiffExtraCRECChildren,
    0 AS f_DiffExtraCRECInfants,
    0 AS f_DiffExtraCRECRevenue,
    0 AS f_DiffExtraCRECCost,
    0 AS f_DiffExtraEQUIPax,
    0 AS f_DiffExtraEQUIQuantity,
    0 AS f_DiffExtraEQUIAdults,
    0 AS f_DiffExtraEQUIChildren,
    0 AS f_DiffExtraEQUIInfants,
    0 AS f_DiffExtraEQUIRevenue,
    0 AS f_DiffExtraEQUICost,
    0 AS f_DiffExtraEXCUPax,
    0 AS f_DiffExtraEXCUQuantity,
    0 AS f_DiffExtraEXCUAdults,
    0 AS f_DiffExtraEXCUChildren,
    0 AS f_DiffExtraEXCUInfants,
    0 AS f_DiffExtraEXCURevenue,
    0 AS f_DiffExtraEXCUCost,
    0 AS f_DiffExtraFLTRPax,
    0 AS f_DiffExtraFLTRQuantity,
    0 AS f_DiffExtraFLTRAdults,
    0 AS f_DiffExtraFLTRChildren,
    0 AS f_DiffExtraFLTRInfants,
    0 AS f_DiffExtraFLTRRevenue,
    0 AS f_DiffExtraFLTRCost,
    0 AS f_DiffExtraINSRPax,
    0 AS f_DiffExtraINSRQuantity,
    0 AS f_DiffExtraINSRAdults,
    0 AS f_DiffExtraINSRChildren,
    0 AS f_DiffExtraINSRInfants,
    0 AS f_DiffExtraINSRRevenue,
    0 AS f_DiffExtraINSRCost,
    0 AS f_DiffExtraOTHRPax,
    0 AS f_DiffExtraOTHRQuantity,
    0 AS f_DiffExtraOTHRAdults,
    0 AS f_DiffExtraOTHRChildren,
    0 AS f_DiffExtraOTHRInfants,
    0 AS f_DiffExtraOTHRRevenue,
    0 AS f_DiffExtraOTHRCost,
    0 AS f_DiffExtraSKIPPax,
    0 AS f_DiffExtraSKIPQuantity,
    0 AS f_DiffExtraSKIPAdults,
    0 AS f_DiffExtraSKIPChildren,
    0 AS f_DiffExtraSKIPInfants,
    0 AS f_DiffExtraSKIPRevenue,
    0 AS f_DiffExtraSKIPCost,
    0 AS f_DiffExtraSKITPax,
    0 AS f_DiffExtraSKITQuantity,
    0 AS f_DiffExtraSKITAdults,
    0 AS f_DiffExtraSKITChildren,
    0 AS f_DiffExtraSKITInfants,
    0 AS f_DiffExtraSKITRevenue,
    0 AS f_DiffExtraSKITCost,
    0 AS f_DiffExtraSPIOPax,
    0 AS f_DiffExtraSPIOQuantity,
    0 AS f_DiffExtraSPIOAdults,
    0 AS f_DiffExtraSPIOChildren,
    0 AS f_DiffExtraSPIOInfants,
    0 AS f_DiffExtraSPIORevenue,
    0 AS f_DiffExtraSPIOCost,
    0 AS f_DiffExtraSPORPax,
    0 AS f_DiffExtraSPORQuantity,
    0 AS f_DiffExtraSPORAdults,
    0 AS f_DiffExtraSPORChildren,
    0 AS f_DiffExtraSPORInfants,
    0 AS f_DiffExtraSPORRevenue,
    0 AS f_DiffExtraSPORCost,
    0 AS f_DiffExtraSTNDPax,
    0 AS f_DiffExtraSTNDQuantity,
    0 AS f_DiffExtraSTNDAdults,
    0 AS f_DiffExtraSTNDChildren,
    0 AS f_DiffExtraSTNDInfants,
    0 AS f_DiffExtraSTNDRevenue,
    0 AS f_DiffExtraSTNDCost,
    0 AS f_DiffExtraTRAFPax,
    0 AS f_DiffExtraTRAFQuantity,
    0 AS f_DiffExtraTRAFAdults,
    0 AS f_DiffExtraTRAFChildren,
    0 AS f_DiffExtraTRAFInfants,
    0 AS f_DiffExtraTRAFRevenue,
    0 AS f_DiffExtraTRAFCost,
    0 AS f_DiffExtraXXXXPax,
    0 AS f_DiffExtraXXXXQuantity,
    0 AS f_DiffExtraXXXXAdults,
    0 AS f_DiffExtraXXXXChildren,
    0 AS f_DiffExtraXXXXInfants,
    0 AS f_DiffExtraXXXXRevenue,
    0 AS f_DiffExtraXXXXCost
FROM
    AMI_Stage.dbo.ST_PIT_BOOKINGHEADERS ST_PIT_BOOKINGHEADERS
LEFT JOIN
    AMI_GALAXY.dbo.CONF_DT_BOOKING CONF_DT_BOOKING
    ON
        CONF_DT_BOOKING.i_SK_Bkg = ST_PIT_BOOKINGHEADERS.I_SK_BKG
LEFT JOIN
    AMI_Stage.dbo.ST_V_EC_EXTRACOSTS ST_V_EC_EXTRACOSTS_XXXX
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_EC_EXTRACOSTS_XXXX.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_EC_EXTRACOSTS_XXXX.i_BK_Version
        AND
        ST_V_EC_EXTRACOSTS_XXXX.i_BK_ExtraType = 'XXXX'

LEFT JOIN
    AMI_Stage.dbo.ST_V_EC_EXTRACOSTS ST_V_EC_EXTRACOSTS_TRAF
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_EC_EXTRACOSTS_TRAF.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_EC_EXTRACOSTS_TRAF.i_BK_Version
        AND
        ST_V_EC_EXTRACOSTS_TRAF.i_BK_ExtraType = 'TRAF'

LEFT JOIN
    AMI_Stage.dbo.ST_V_EC_EXTRACOSTS ST_V_EC_EXTRACOSTS_STND
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_EC_EXTRACOSTS_STND.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_EC_EXTRACOSTS_STND.i_BK_Version
        AND
        ST_V_EC_EXTRACOSTS_STND.i_BK_ExtraType = 'STND'

LEFT JOIN
    AMI_Stage.dbo.ST_V_EC_EXTRACOSTS ST_V_EC_EXTRACOSTS_SPOR
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_EC_EXTRACOSTS_SPOR.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_EC_EXTRACOSTS_SPOR.i_BK_Version
        AND
        ST_V_EC_EXTRACOSTS_SPOR.i_BK_ExtraType = 'SPOR'

LEFT JOIN
    AMI_Stage.dbo.ST_V_EC_EXTRACOSTS ST_V_EC_EXTRACOSTS_SPIO
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_EC_EXTRACOSTS_SPIO.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_EC_EXTRACOSTS_SPIO.i_BK_Version
        AND
        ST_V_EC_EXTRACOSTS_SPIO.i_BK_ExtraType = 'SPIO'

LEFT JOIN
    AMI_Stage.dbo.ST_V_EC_EXTRACOSTS ST_V_EC_EXTRACOSTS_SKIT
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_EC_EXTRACOSTS_SKIT.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_EC_EXTRACOSTS_SKIT.i_BK_Version
        AND
        ST_V_EC_EXTRACOSTS_SKIT.i_BK_ExtraType = 'SKIT'

LEFT JOIN
    AMI_Stage.dbo.ST_V_EC_EXTRACOSTS ST_V_EC_EXTRACOSTS_SKIP
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_EC_EXTRACOSTS_SKIP.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_EC_EXTRACOSTS_SKIP.i_BK_Version
        AND
        ST_V_EC_EXTRACOSTS_SKIP.i_BK_ExtraType = 'SKIP'

LEFT JOIN
    AMI_Stage.dbo.ST_V_EC_EXTRACOSTS ST_V_EC_EXTRACOSTS_OTHR
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_EC_EXTRACOSTS_OTHR.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_EC_EXTRACOSTS_OTHR.i_BK_Version
        AND
        ST_V_EC_EXTRACOSTS_OTHR.i_BK_ExtraType = 'OTHR'

LEFT JOIN
    AMI_Stage.dbo.ST_V_EC_EXTRACOSTS ST_V_EC_EXTRACOSTS_INSR
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_EC_EXTRACOSTS_INSR.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_EC_EXTRACOSTS_INSR.i_BK_Version
        AND
        ST_V_EC_EXTRACOSTS_INSR.i_BK_ExtraType = 'INSR'

LEFT JOIN
    AMI_Stage.dbo.ST_V_EC_EXTRACOSTS ST_V_EC_EXTRACOSTS_FLTR
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_EC_EXTRACOSTS_FLTR.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_EC_EXTRACOSTS_FLTR.i_BK_Version
        AND
        ST_V_EC_EXTRACOSTS_FLTR.i_BK_ExtraType = 'FLTR'

LEFT JOIN
    AMI_Stage.dbo.ST_V_EC_EXTRACOSTS ST_V_EC_EXTRACOSTS_EXCU
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_EC_EXTRACOSTS_EXCU.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_EC_EXTRACOSTS_EXCU.i_BK_Version
        AND
        ST_V_EC_EXTRACOSTS_EXCU.i_BK_ExtraType = 'EXCU'

LEFT JOIN
    AMI_Stage.dbo.ST_V_EC_EXTRACOSTS ST_V_EC_EXTRACOSTS_EQUI
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_EC_EXTRACOSTS_EQUI.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_EC_EXTRACOSTS_EQUI.i_BK_Version
        AND
        ST_V_EC_EXTRACOSTS_EQUI.i_BK_ExtraType = 'EQUI'

LEFT JOIN
    AMI_Stage.dbo.ST_V_EC_EXTRACOSTS ST_V_EC_EXTRACOSTS_CREC
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_EC_EXTRACOSTS_CREC.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_EC_EXTRACOSTS_CREC.i_BK_Version
        AND
        ST_V_EC_EXTRACOSTS_CREC.i_BK_ExtraType = 'CREC'

LEFT JOIN
    AMI_Stage.dbo.ST_V_EC_EXTRACOSTS ST_V_EC_EXTRACOSTS_CLUB
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_EC_EXTRACOSTS_CLUB.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_EC_EXTRACOSTS_CLUB.i_BK_Version
        AND
        ST_V_EC_EXTRACOSTS_CLUB.i_BK_ExtraType = 'CLUB'

LEFT JOIN
    AMI_Stage.dbo.ST_V_EC_EXTRACOSTS ST_V_EC_EXTRACOSTS_CHLD
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_EC_EXTRACOSTS_CHLD.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_EC_EXTRACOSTS_CHLD.i_BK_Version
        AND
        ST_V_EC_EXTRACOSTS_CHLD.i_BK_ExtraType = 'CHLD'

LEFT JOIN
    AMI_Stage.dbo.ST_V_EC_EXTRACOSTS ST_V_EC_EXTRACOSTS_CARI
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_EC_EXTRACOSTS_CARI.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_EC_EXTRACOSTS_CARI.i_BK_Version
        AND
        ST_V_EC_EXTRACOSTS_CARI.i_BK_ExtraType = 'CARI'

LEFT JOIN
    AMI_Stage.dbo.ST_V_EC_EXTRACOSTS ST_V_EC_EXTRACOSTS_CARH
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_EC_EXTRACOSTS_CARH.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_EC_EXTRACOSTS_CARH.i_BK_Version
        AND
        ST_V_EC_EXTRACOSTS_CARH.i_BK_ExtraType = 'CARH'

LEFT JOIN
    AMI_Stage.dbo.ST_V_EC_EXTRACOSTS ST_V_EC_EXTRACOSTS_ACTI
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_EC_EXTRACOSTS_ACTI.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_EC_EXTRACOSTS_ACTI.i_BK_Version
        AND
        ST_V_EC_EXTRACOSTS_ACTI.i_BK_ExtraType = 'ACTI'
LEFT JOIN
    AMI_Stage.dbo.ST_V_AC_ACCOMCOSTS ST_V_AC_ACCOMCOSTS
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_AC_ACCOMCOSTS.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_AC_ACCOMCOSTS.i_BK_Version
LEFT JOIN
    AMI_Stage.dbo.ST_V_FC_FLIGHTCOSTS ST_V_FC_FLIGHTCOSTS
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_FC_FLIGHTCOSTS.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_FC_FLIGHTCOSTS.i_BK_Version
LEFT JOIN
    AMI_Stage.dbo.ST_V_FC_FLIGHTCOSTS ST_V_FC_FLIGHTCOSTS_AIR
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_FC_FLIGHTCOSTS_AIR.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_FC_FLIGHTCOSTS_AIR.i_BK_Version
        AND
        ST_V_FC_FLIGHTCOSTS_AIR.i_BK_TransportType = 'AIR'
LEFT JOIN
    AMI_Stage.dbo.ST_V_FC_FLIGHTCOSTS ST_V_FC_FLIGHTCOSTS_FER
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_FC_FLIGHTCOSTS_FER.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_FC_FLIGHTCOSTS_FER.i_BK_Version
        AND
        ST_V_FC_FLIGHTCOSTS_FER.i_BK_TransportType = 'FER'
LEFT JOIN
    AMI_Stage.dbo.ST_V_FC_FLIGHTCOSTS ST_V_FC_FLIGHTCOSTS_TRN
    ON
        CONF_DT_BOOKING.i_BK_BkgConcat = ST_V_FC_FLIGHTCOSTS_TRN.i_BK_Bkg
        AND
        ST_PIT_BOOKINGHEADERS.I_SK_VERSION = ST_V_FC_FLIGHTCOSTS_TRN.i_BK_Version
        AND
        ST_V_FC_FLIGHTCOSTS_TRN.i_BK_TransportType = 'TRN' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:16:39.790

首先，您可以尝试**ISNULL**，它具有更好的性能（但没有您需要的那么多），但是它更快。

这是旧 StackOverlow 线程的参考：[COALESCE OR ISNULL 哪个更快？](https://stackoverflow.com/questions/2287642/which-is-quicker-coalesce-or-isnull)

*更新：*

这意味着性能上的巨大差异：

> “Marcus Culver：在 730,000 行中，154 列被 ISNULL 占用了 00:02:34，而不是在 01:32:43 合并”

# emacs - Emacs 自动访问标签表

> ID：12157600
> 
> 赞同：1
> 
> 时间：2012-08-28T10:42:29.473
> 
> 标签：emacs, ctags

有没有办法配置emacs，以便每当我在某个*路径*下打开文件时，它会自动搜索（并在加载时）路径的一部分中的TAGS文件？因此，例如在打开时

***/usr/src/foo/baz/bar.c***。它将加载

***/usr/src/foo/TAGS***文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T10:55:20.930

我建议你通过这个[wiki](https://www.emacswiki.org/emacs/BuildTags)。有一个很好的例子可以用 etags 做同样的事情（*标签文件的自动刷新*）（我不会在这里发布），但希望让它适用于 ctags 并不难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-12T11:49:16.633

查看这个包[http://www.emacswiki.org/emacs/EtagsTable](http://www.emacswiki.org/emacs/EtagsTable)它在​​ MELPA 上可用，并且完全符合您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-28T03:54:59.107

[http://blog.binchen.org/posts/how-to-use-ctags-in-emacs-effectively-3.html](http://blog.binchen.org/posts/how-to-use-ctags-in-emacs-effectively-3.html)

The point is in this case, a little bit elisp code is more versatile, I've been using this solution for two years.

# image - 如何在mobile flex中的视图屏幕上随机移动图像？

> ID：12157602
> 
> 赞同：1
> 
> 时间：2012-08-28T10:42:41.417
> 
> 标签：image, apache-flex, mobile, view, air

我必须创建一个带有选项卡式导航器视图的移动 flex 应用程序。其中一个视图必须满足这个条件：当视图被选中时，一个图像会出现一秒，然后消失半秒，然后在视图屏幕上的任意位置重新出现。这将重复，直到选择另一个视图。

我是 Mobile Flex 的新手，需要您的帮助。

提前谢谢你。

最好的问候， HBLE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:29:07.193

1.  使用 enterFrame 事件或 Timer 隐藏/显示图像。
2.  设置图像 x 和 y 属性以在特定位置显示图像
3.  使用 Math.random() 生成区间 [0,1] 内的随机数

Important: When tab is active call init(); 切换到其他选项卡时，不要忘记停止计时器并删除事件侦听器。（出于性能原因和避免内存泄漏）

示例代码：

```
var isVisible:Boolean = false;

function init():void
{
   // we show / hide with a delay of 1 second
   var t:timer = new Timer(1000);
   t.addEventListener(TimerEvent.Timer, onTimer);
   t.start();
}

function onTimer(event:TimerEvent):void
{
   if(isVisible)
   {
       hideImage();
   }
   else
   {
       showAndMoveImage();
   }

   isVisible = !isVisible;
}

function hideImage():void
{
    myImage.visible = false;
}

function showAndMoveImage():void
{
    // we reposition image in screen, assume image size is smaller then screen
    myImage.x  = Math.random() * (stage.width - myImage.width);
    myImage.y  = Math.random() * (stage.height - myImage.height);

    myImage.visible = true;
} 
```

# jquery - jQuery attr() 到 ajax 加载的内容

> ID：12157609
> 
> 赞同：0
> 
> 时间：2012-08-28T10:43:04.207
> 
> 标签：jquery

我需要将所有输入的自动竞争设置为关闭，并使用它：

```
$(":input").attr('autocomplete','off'); 
```

ajax请求后如何在不设置属性的情况下调用它来加载ajax输入？也许存在事件，可以放入 on() 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:52:03.807

jQuery 核心中没有任何东西可以直接执行此操作，但有一个名为[livequery](http://brandonaaron.net/code/livequery/demos)的插件：http : [//jsfiddle.net/7seQb/1/](http://jsfiddle.net/7seQb/1/)。

```
​$(":input").livequery(function() {
    $(this).attr("autocomplete", "off");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:51:44.730

恐怕没有这样的事件。但是你为什么不想在 ajax 请求之后设置它呢？假设是因为您不想更新每个 ajax 请求。如果是这样，您可以使用[jQuery.ajaxComplete](http://api.jquery.com/ajaxComplete/)在一个地方执行此操作。

# javascript - 从对象内调用时的 knockout.js ko.applyBindings()

> ID：12157610
> 
> 赞同：1
> 
> 时间：2012-08-28T10:43:04.963
> 
> 标签：javascript, knockout.js, frontend, revealing-module-pattern

我正在尝试做这样的事情：

[http://jsfiddle.net/bATu3/5/](http://jsfiddle.net/bATu3/5/)

整个视图在对象内生成，私有并通过公共方法返回，以便可以在页面上生成。我做错了什么，希望有任何指示可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:02:48.667

试试这个：http: [//jsfiddle.net/bATu3/10/](http://jsfiddle.net/bATu3/10/)

基本上几乎没有错误：注意在回调函数中使用“this”。另外，请注意数据绑定变量`<p><strong data-bind="text:firstName"></strong></p>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T21:30:54.863

另一种方法是：http: [//jsfiddle.net/bATu3/14/](http://jsfiddle.net/bATu3/14/)

您可以通过将计算值作为辅助参数传递来指定计算值的范围，如下所述：[Knockout: Computed Observables](http://knockoutjs.com/documentation/computedObservables.html)（阅读“管理'this'”部分）

# wcf - 由 IIS WPG 组中的用户托管的 WCF 服务？

> ID：12157611
> 
> 赞同：2
> 
> 时间：2012-08-28T10:43:12.583
> 
> 标签：wcf, wcftestclient

我使用自定义 AppPool 在 IIS 6 上托管了 WCF 服务。此 AppPool 配置为在 IIS_WPG 组中的用户下运行。

我可以从远程位置访问该服务，也可以看到 wsdl，但是当我尝试通过“WCF 测试客户端”访问相同的服务时，出现以下错误

![在此处输入图像描述](../Images/109faf9129cf04644dca99345f728c48.png)

**更新：**当我通过将 AppPool 的身份更改为“网络服务”组来运行相同的服务时，可以通过测试客户端访问服务。**因此，只有当服务以“网络服务”以外的身份运行时（这是用户的默认身份），服务元数据才不可访问**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T22:07:40.030

我过去遇到过这个问题，解决方案是在客户端和托管服务的服务器之间使用服务帐户进行身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-26T09:43:07.110

我有与上述相同的问题。这是我在寻找解决此问题的方法时所做的事情。

我将开始将 WCF 部署到 IIS6 的过程。

1.  在服务器中创建一个文件夹并复制 WCF 包。
2.  为您的 WCF 创建一个 AppPool。
3.  右键单击新创建的 AppPool，选择 Properties，然后转到 Identity 选项卡。选择“可配置”，然后输入您的服务帐户凭据而不是 NETWORK SERVICE。
4.  我没有创建一个新的网站。就我而言，我在默认网站下创建了一个虚拟目录，并将其指向我复制的 WCF 文件夹。
5.  创建虚拟目录后，右键单击它，然后选择属性。以下是每个选项卡的设置

    **虚拟目录选项卡**

    *   单击创建按钮以创建应用程序名称。
    *   在执行权限中选择“仅脚本”。
    *   选择您创建的 AppPool。
    *   单击应用按钮以保存更改。

    **文档选项卡**

    *   添加新内容 - WCF .svc 文件的名称。
    *   单击应用按钮以保存更改。

    **目录安全选项卡**

    *   单击身份验证和访问控制中的编辑按钮。
    *   使用您的服务帐户凭据更改用户名和密码。
    *   单击确定（如果需要重新确认，请再次输入密码）。
    *   单击应用按钮以保存更改。

    **ASP.Net 选项卡**

    *   选择4.0.30319版本（如果需要.net framework 4.0）
    *   单击应用按钮以保存更改。
6.  现在，转到计算机管理 > 系统工具 > 本地用户和组 > 组

7.  打开 IIS_WPG 组并添加您的服务帐户。

8.  然后转到开始 > 管理工具 > 本地安全策略

9.  展开安全设置 > 本地策略 > 用户权限分配。搜索作为服务登录，然后在此处添加您的服务帐户。

10.  最后，转到 C:\WINDOWS\Temp 文件夹。右键单击它，然后选择属性。单击安全选项卡，然后添加您的服务帐户。

11.  要设置特殊权限，请单击高级按钮。

12.  选择您的服务帐户，然后单击编辑按钮。在权限列表中，仅勾选或选中“列出文件夹/读取数据”和“删除”权限。单击确定并应用按钮以应用更改。如果消息框提示您，请单击“是”以应用于子文件夹。

13.  现在，最后一刻。确保应用程序池正在运行。在浏览器中测试 WCF，然后在 WCF 测试客户端中测试。

    14.  就我而言，它正在完美地工作:)

希望对你有帮助...

# c# - 如何以编程方式从具有多个文件的备份中恢复数据库

> ID：12157612
> 
> 赞同：0
> 
> 时间：2012-08-28T10:43:13.060
> 
> 标签：c#, .net, smo

从包含一个文件的备份中以编程方式（在 C# 中使用 SMO）恢复数据库没有问题。但是当备份包含多个文件（完整和差异备份）时，我收到以下错误

> 无法恢复日志或差异备份，因为没有文件准备好前滚

那么我应该怎么做才能用最新的数据恢复数据库呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:22:16.417

您将需要设置`NoRecovery`选项，以便它允许您恢复其余文件。

检查[此](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.backuprestorebase.norecovery.aspx)以供参考。

# php - 将带撇号的字符串值插入 MySQL 表

> ID：12157625
> 
> 赞同：-2
> 
> 时间：2012-08-28T10:43:52.543
> 
> 标签：php, mysql

我已经阅读了一些相关的问题，但我仍然不明白。所以我决定在这里发布一个问题。我有一个如下查询

```
$query = "INSERT INTO Table (q1,q2,q3,q4....q25) VALUES ('".$_POST['Q1']."',
'".$_POST['Q2']."',
'".$_POST['Q3']."',
'".$_POST['Q4']."'.....)";

mysql_query($query); 
```

$_POST['Qx'] 值是从允许人们输入评论的调查中获得的。人们通常会喜欢**“不要，不能，不......”这样的词**。将数据插入表时，撇号会导致问题。

我已经阅读了一些建议方法的文章

```
mysql_real_escape_string($_POST['Q1']) 
```

但是我有 25 个问题，其中一些甚至还有子问题。所以我有大约 70 个数据要输入到表格中。

有什么好的方法可以将撇号传递到 MySQL 表中吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T10:47:55.303

编辑：`so I have around 70 data to input to the table.`
对于 for 循环，70 是“无”;-)

```
for($i=1; $i<71; $i++) {
  $params[$i] = mysql_real_escape_string($_POST['Q'.$i], $link);
} 
```

但是您可能需要考虑[重新设计您的数据库表](https://en.wikipedia.org/wiki/Database_normalization)。

* * *

您必须对参数进行编码/转义。如果是（已弃用的）mysql 扩展名，那就是[mysql_real_escape_string()](http://docs.php.net/mysql_real_escape_string)

```
$link = mysql_connect(...);
...
$query = sprintf(
    "
        INSERT INTO
            Table
            (q1,q2,q3,q4....q25)
        VALUES
            ('%s','%s' ...)
    ", 
    mysql_real_escape_string($_POST['Q1'], $link),
    mysql_real_escape_string($_POST['Q2'], $link)
    ...
);

mysql_query($query, $link) or die(mysql_error($link)); 
```

但最好使用支持的扩展，如 mysqli 或[pdo](http://docs.php.net/pdo)。
并查看[准备好的语句](http://docs.php.net/pdo.prepared-statements)。

# android - 如何在表格行中绘制图表引擎饼图

> ID：12157626
> 
> 赞同：0
> 
> 时间：2012-08-28T10:43:59.550
> 
> 标签：android, achartengine

这是我正在使用的代码。我已经删除了生成行中显示的其他信息的代码，并且只提供了与创建和添加饼图相关的代码。如果我删除“layout.addView(mChartView);”行 然后生成表格并显示所有其他信息，但当然，它不显示饼图。

```
 TableLayout table = (TableLayout) findViewById(R.id.table);
    TableRow row = (TableRow) findViewById(R.id.tableRow);

    LayoutInflater inflater = getLayoutInflater();
    GlobalData global = ((GlobalData)getApplicationContext());
    for( int i = 0; i < global.getData(0).size(); i++){

        DataModel current = global.getData(0).get(i);

        row = (TableRow)inflater.inflate(R.layout.tablerow, table, false);
        row.setTag(i);
        row.setClickable(true);

        //pie chart
        RelativeLayout layout = (RelativeLayout) findViewById(R.id.chart);
        int[] values = {50, 100};
        CategorySeries series = new CategorySeries("Market share");
        int k = 0;
        for (int value : values) {
            series.add("Section " + ++k, value);
        }

        int[] colors = new int[] { Color.BLUE, Color.YELLOW };

        DefaultRenderer renderer = new DefaultRenderer();
        for (int color : colors) {
            SimpleSeriesRenderer r = new SimpleSeriesRenderer();
            r.setColor(color);
            renderer.addSeriesRenderer(r);
        }

        mChartView = ChartFactory.getPieChartView(null, series, renderer);
        layout.addView(mChartView);

        // Add the TableRow to the TableLayout
        table.addView(row); 
```

此代码片段位于视图的 onCreate 事件中。

感谢您尝试提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:36:20.450

I found the issue: (I do feel stupid); I had referenced the layout in the following manner

```
//pie chart
RelativeLayout layout = (RelativeLayout) findViewById(R.id.chart); 
```

I should have

```
//pie chart
 RelativeLayout layout = (RelativeLayout)row.findViewById(R.id.chart); 
```

When I added row.findViewByID it all works

Wood for the trees problem Sorry for wasting your valuable time.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T05:49:05.510

我建议您先尝试一种更简单的方法。尝试使用 a`LinearLayout`并查看是否有效，然后再尝试使用 a `TableLayout`。要在 LinearLayout 中嵌入 AChartEngine，请参阅[此](https://stackoverflow.com/questions/4062161/android-i-am-using-achartengine-library-for-graphs-but-not-able-to-integrate-a/4079692#4079692)。

# css - Chrome缓存CSS但不在CSS文件中加载图像

> ID：12157630
> 
> 赞同：19
> 
> 时间：2012-08-28T10:44:34.073
> 
> 标签：css, google-chrome, caching

我们在工作中遇到了一个仅在 chrome 中发生的奇怪问题。看起来 css 文件正在被缓存，并且该文件的内容没有被重新下载。

问题是，当使用新会话（例如“私人会话”）时，图像“mainSprite.png”没有显示出来。

经过一些测试，我认为问题与我们在用户未通过身份验证的情况下在开始时进行重定向有关。据我了解，它可能无法完成css文件中链接的精灵的下载。一旦重定向开始，它将缓存一个无效对象，然后在接下来的页面上，它将无法显示正确的图像，因为它缓存了一些错误的东西。

奇怪的是，它实际上在某个时候完全加载了图像。但它看起来并没有在记忆中刷新它......

在第一次加载和图像正确显示时开始重定向之前，我做了一秒钟的超时。这是一个快速修复，我不能指望每台计算机在 1 秒内加载 css 中包含的每个图像。

*编辑*

据我所知，它看起来真的像一个比赛条件。我改变了加载顺序。我们使用 require.js。我没有在css之后加载js，而是在之前开始加载js。并且图像现在可以在我的本地服务器上正确加载。

如果有人有兴趣研究它：

[http://api.checklist.com](http://api.checklist.com)

*编辑 2*

当图像不可见时，打开新标签也会遇到同样的问题。关闭浏览器并重新打开它将在第一次加载时起作用，并且图像不会被下载而是从缓存加载，这意味着在关闭浏览器之前，图像确实已经下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:59:23.013

看起来问题来自您的重定向，不幸的是我看不到您的示例（链接无法打开）。Google chrome 确实存在缓存问题，这在开发期间很烦人（清除缓存，加载新图像，对新图像执行相同操作..），如果您需要清除缓存，请尝试以下操作：

试着去

**chrome://chrome/settings/clearBrowserData**

在您的 chrome 浏览器中并检查选项：

清空缓存（我还清除了下载历史记录和删除 cookie 以及其他站点和插件数据）

点击“清除浏览数据”按钮，它应该

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:57:35.033

首先，我建议您首先尝试找到缩小重定向范围的方法。如果可能的话，我建议尝试使用*PHP*或*ASP*等语言（仅举两例）根据您的用户身份验证动态创建您的内容会更加明智。

在网页上禁用缓存的经典方法是在**`<meta>`**标签内设置两个**`<head> </head>`**标签。但是，您应该注意，这些在技术上**并不**“正确”，因为它们不是任何*“官方”*标准文档的一部分。这也意味着我将再次倾向于我的第一个建议，即找到一个更好的交付系统，这反过来应该可以防止这个问题。

因此，出于“测试”目的，标签将是：

```
<HEAD>
    <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
    <META HTTP-EQUIV="EXPIRES" CONTENT="0">
</HEAD> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T00:22:10.127

您需要做的就是通过 chrome 跟踪您的现金清单，据我所知，您收到了这个错误，导致它没有被缓存：

> 未捕获的类型错误：对象 [对象对象] 没有方法“占位符”

因此，如果您想跟踪，可以使用清单离线模式或通过代码进行跟踪。

只需关注并测试您的页面，我确实发现了错误所在：

> 文件：scripts2.js 第 20 行 --> $('input[placeholder]').placeholder();

您需要检查占位符的名称并在此标签中更改它。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T08:59:26.493

我假设您的服务器/后端应用程序已设置路由。喜欢这部剧！框架示例：

```
# Ignore favicon requests
GET     /favicon.ico                    404

# Map static resources from the /app/public folder to the /public path
GET     /public/                        staticDir:public

# Catch all
*       /{controller}                   {controller}.index 
```

根据您的摘要，我建议根据需要在配置文件或 htaccess 中设置静态文件夹路由（图像所在的位置），然后在浏览器 url 栏中检查图像 url（带有空会话）。那应该工作！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-12T23:51:59.660

也许我不明白你的问题或困境（可能是因为缺乏解释，或者因为我运行 Chrome 后我无法在该链接上看到你的页面），但我在这里遇到了一个示例，它仅使用Javascript/jQuery 加载，而不是 CSS：

[http://jsfiddle.net/2Cgyg/6/](http://jsfiddle.net/2Cgyg/6/)

使用 URL 上的图像：http: [//www.w3schools.com/cssref/img_tree.gif](http://www.w3schools.com/cssref/img_tree.gif)

虽然接受的答案在 Chrome 中对我不起作用，但这是我从上面得到的 jsFiddle 的问题，来自：

[从 javascript 加载图像](https://stackoverflow.com/questions/19396390/load-image-from-javascript)

所有的缓存等都是不必要的，甚至是如果您的图像更新为其他内容时您不想做的事情 - 它们不会在不强制刷新的情况下出现，您只能通过像这样更改文件名来完成为避免用户看不到您更新的图像：

```
myPic.jpg?MMDDYYYY 
```

您可以根据修改日期来设置日期。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-09T05:02:40.730

清理您的浏览器历史记录，如缓存、cookie 清理临时 Internet 文件

如果问题没有解决然后重新安装浏览器你的问题肯定解决了

# c# - C# 中 Windows 桌面监视器应用程序的体系结构

> ID：12157634
> 
> 赞同：2
> 
> 时间：2012-08-28T10:44:59.487
> 
> 标签：c#, winforms, design-patterns, architecture

***预先，这个问题与设计解决方案有关，没有代码可以分享***

我正在.net 4.0（一种系统监视器）中设计一个 C# 桌面应用程序，其行为如下

*   应用程序在用户登录到 Windows 桌面时启动（*并且仅在用户登录时*）。
*   在整个用户会话中定期运行。
    *   在用户桌面上显示系统托盘图标。
    *   单击托盘图标将打开一个显示一些信息的窗口（具有**丰富的**用户体验）
*   用户注销时存在应用程序
*   此应用程序可能会在启动时保存其状态并存在（可能到系统注册表）
*   需要访问网络和文件系统等系统资源

我的偏好将：

*   在后台运行的 Windows 服务，它执行周期性的后端操作和网络访问。此服务还应向前端 (UI) 轮询信息，该信息在系统托盘图标（气球提示）中显示为警报
*   向用户显示信息的 Windows 应用程序 - 通过单击托盘图标打开

以上考虑是基于我使用 .net 版本 1.1 进行 Windows 应用程序开发的经验。
但是，现在我在 .net 4.0 中开发并针对 Windows Vista 和 Windows 7 平台。

*我对最新趋势不太熟悉，*我的**问题**是：-

***1\. 听说不推荐使用与桌面交互的windows服务？***
***2、是否推荐使用WPF来开发这个应用的UI？***
***3.还有其他简单的解决方案或模式吗？***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T10:50:02.520

> 我读过不建议使用与桌面交互的 Windows 服务？

服务本身不应该——但通过客户端应用程序（监听器）就可以了。

> 是否建议使用 WPF 开发此应用程序的 UI？

如果您需要一定程度的 UI 定制。如果视觉吸引力无关紧要，旧的简单 WinForms 就可以了。

WPF 的数据绑定功能也很出色，但对于大多数简单的场景并没有太大的不同。

> 有没有其他简单的解决方案或模式呢？

一个正在运行的 Windows 服务*加上*一个监听该服务的客户端应用程序（这些选项不是相互排斥的，恰恰相反）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:51:51.467

> 我读过不建议使用与桌面交互的 Windows 服务？

服务不应直接与桌面交互。但是服务公开一些 API 之王（我会说，WCF）以供桌面应用程序使用是完全可以的。

> 是否建议使用 WPF 开发此应用程序的 UI？

这完全取决于您对这种或那种技术的经验。

# mono - .dll.so 在单声道中的用途

> ID：12157642
> 
> 赞同：3
> 
> 时间：2012-08-28T10:45:48.160
> 
> 标签：mono

比如`mcs.exe.so`，`mscorlib.dll.so`

拥有的目的是`.dll.so`什么？

我可以删除它们吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T21:46:57.350

这些是[Mono AOT](http://www.mono-project.com/AOT)预编译图像，用于加速应用程序启动。Mono 应该在没有它们的情况下工作，但启动速度会慢一些（因为它必须生成此信息而不是从磁盘加载它）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T10:51:11.030

.so 文件是 Linux 中的库。

当单声道应用程序尝试加载 .dll 文件时，单声道会将 .so 附加到末尾并尝试加载该文件。

所以不，不要删除它们。

# c++ - 如何在 OpenGL 上渲染屏幕外？

> ID：12157646
> 
> 赞同：42
> 
> 时间：2012-08-28T10:46:28.940
> 
> 标签：c++, windows, opengl, off-screen

我的目标是将没有窗口的 OpenGL 场景直接渲染到文件中。场景可能比我的屏幕分辨率大。

我怎样才能做到这一点？

如果可能，我希望能够将渲染区域大小选择为任何大小，例如 10000x10000？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-08-28T12:32:42.417

这一切都从 开始[`glReadPixels`](https://www.khronos.org/opengl/wiki/GLAPI/glReadPixels)，您将使用它来将存储在 GPU 上特定缓冲区中的像素传输到主存储器 (RAM)。正如您将在文档中注意到的那样，没有选择哪个缓冲区的参数。与 OpenGL 一样，要读取的当前缓冲区是一个状态，您可以使用`glReadBuffer`.

所以一个非常基本的离屏渲染方法如下所示。我使用 c++ 伪代码，因此它可能包含错误，但应该使一般流程清晰：

```
//Before swapping
std::vector<std::uint8_t> data(width*height*4);
glReadBuffer(GL_BACK);
glReadPixels(0,0,width,height,GL_BGRA,GL_UNSIGNED_BYTE,&data[0]); 
```

这将读取当前的后台缓冲区（通常是您正在绘制的缓冲区）。您应该在交换缓冲区之前调用它。请注意，您也可以使用上述方法完美地读取后台缓冲区，清除它并在交换之前绘制完全不同的东西。从技术上讲，您也可以读取前端缓冲区，但通常不鼓励这样做，因为理论上允许实现一些优化，这可能会使您的前端缓冲区包含垃圾。

这有一些缺点。首先，我们并没有真正进行离屏渲染。我们渲染到屏幕缓冲区并从中读取。我们可以通过从不交换后台缓冲区来模拟屏幕外渲染，但感觉不对。除此之外，前缓冲区和后缓冲区都经过优化以显示像素，而不是读取它们。这就是[帧缓冲对象](https://www.khronos.org/opengl/wiki/Framebuffer_Object)发挥作用的地方。

本质上，FBO 允许您创建一个非默认帧缓冲区（如 FRONT 和 BACK 缓冲区），允许您绘制到内存缓冲区而不是屏幕缓冲区。在实践中，您可以绘制到纹理或[渲染缓冲区](https://www.khronos.org/opengl/wiki/Renderbuffer_Object)。当您想将 OpenGL 本身中的像素重新用作纹理时（例如，游戏中的幼稚“安全摄像头”），第一个是最佳选择，如果您只想渲染/回读，则后者是最佳选择。有了这个，上面的代码就会变成这样，又是伪代码，所以如果输入错误或忘记了一些语句，请不要杀了我。

```
//Somewhere at initialization
GLuint fbo, render_buf;
glGenFramebuffers(1,&fbo);
glGenRenderbuffers(1,&render_buf);
glBindRenderbuffer(render_buf);
glRenderbufferStorage(GL_RENDERBUFFER, GL_BGRA8, width, height);
glBindFramebuffer(GL_DRAW_FRAMEBUFFER​,fbo);
glFramebufferRenderbuffer(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, render_buf);

//At deinit:
glDeleteFramebuffers(1,&fbo);
glDeleteRenderbuffers(1,&render_buf);

//Before drawing
glBindFramebuffer(GL_DRAW_FRAMEBUFFER​,fbo);
//after drawing
std::vector<std::uint8_t> data(width*height*4);
glReadBuffer(GL_COLOR_ATTACHMENT0);
glReadPixels(0,0,width,height,GL_BGRA,GL_UNSIGNED_BYTE,&data[0]);
// Return to onscreen rendering:
glBindFramebuffer(GL_DRAW_FRAMEBUFFER​,0); 
```

这是一个简单的示例，实际上您可能还需要存储深度（和模板）缓冲区。您可能还想渲染到纹理，但我将把它留作练习。无论如何，您现在将执行真正的离屏渲染，它可能比读取后台缓冲区工作得更快。

最后，您可以使用[像素缓冲区对象](https://www.khronos.org/opengl/wiki/Pixel_Buffer_Object)来异步读取像素。问题是`glReadPixels`在像素数据完全传输之前会阻塞，这可能会使您的 CPU 停滞。使用 PBO 的实现可能会立即返回，因为它无论如何都控制缓冲区。只有当您映射缓冲区时，管道才会阻塞。但是，PBO 可以优化为仅在 RAM 上缓冲数据，因此该块可能需要更少的时间。读取的像素代码会变成这样：

```
//Init:
GLuint pbo;
glGenBuffers(1,&pbo);
glBindBuffer(GL_PIXEL_PACK_BUFFER, pbo);
glBufferData(GL_PIXEL_PACK_BUFFER, width*height*4, NULL, GL_DYNAMIC_READ);

//Deinit:
glDeleteBuffers(1,&pbo);

//Reading:
glBindBuffer(GL_PIXEL_PACK_BUFFER, pbo);
glReadPixels(0,0,width,height,GL_BGRA,GL_UNSIGNED_BYTE,0); // 0 instead of a pointer, it is now an offset in the buffer.
//DO SOME OTHER STUFF (otherwise this is a waste of your time)
glBindBuffer(GL_PIXEL_PACK_BUFFER, pbo); //Might not be necessary...
pixel_data = glMapBuffer(GL_PIXEL_PACK_BUFFER, GL_READ_ONLY); 
```

大写的部分是必不可少的。如果您只是`glReadPixels`向 PBO 发出 a，然后是`glMapBuffer`该 PBO 的 a，那么您只获得了很多代码。当然`glReadPixels`可能会立即返回，但现在`glMapBuffer`会停止，因为它必须安全地将数据从读取缓冲区映射到 PBO 和主 RAM 中的内存块。

另请注意，我在所有地方都使用 GL_BGRA，这是因为许多显卡内部使用它作为最佳渲染格式（或没有 alpha 的 GL_BGR 版本）。它应该是这样的像素传输最快的格式。我会尝试找到我在几个月前读到的关于这方面的 nvidia 文章。

使用 OpenGL ES 2.0 时，`GL_DRAW_FRAMEBUFFER`可能不可用，您应该`GL_FRAMEBUFFER`在这种情况下使用。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-28T12:32:10.943

我假设创建一个虚拟窗口（你不渲染它；它只是在那里，因为 API 要求你创建一个），你创建你的主要上下文是一种可接受的实现策略。

以下是您的选择：

## 像素缓冲区

像素缓冲区或 pbuffer（不是[像素缓冲区对象](http://www.opengl.org/wiki/Pixel_Buffer_Object)）首先是*OpenGL 上下文*。基本上，您照常创建一个窗口，然后从中选择一个像素格式[`wglChoosePixelFormatARB`](http://www.opengl.org/registry/specs/ARB/wgl_pixel_format.txt)（pbuffer 格式必须从这里获取）。然后，你调用`wglCreatePbufferARB`，给它你的窗口的 HDC 和你想使用的像素缓冲区格式。哦，还有宽度/高度；您可以查询实现的最大宽度/高度。

pbuffer 的默认帧缓冲区在屏幕上不可见，最大宽度/高度是硬件想让您使用的任何值。所以你可以渲染它并使用它`glReadPixels`来读取它。

如果您在窗口上下文中创建了对象，则需要与给定上下文共享上下文。否则，您可以完全单独使用 pbuffer 上下文。只是不要破坏窗口上下文。

这里的优势是更大的实现支持（尽管大多数不支持替代方案的驱动程序也是不再受支持的硬件的旧驱动程序。或者是英特尔硬件）。

缺点就是这些。Pbuffers 不适用于[核心 OpenGL 上下文](http://www.opengl.org/wiki/Core_And_Compatibility_in_Contexts)。它们可能适用于兼容性，但无法提供`wglCreatePbufferARB`有关 OpenGL 版本和配置文件的信息。

## 帧缓冲对象

[帧缓冲区对象](http://www.opengl.org/wiki/Framebuffer_Object)比 pbuffers 更“合适”的屏幕外渲染目标。FBO 是在一个上下文中，而 pbuffers 是关于创建新的上下文。

FBO 只是您渲染到的图像的容器。可以查询实现允许的最大维度；您可以假设它是`GL_MAX_VIEWPORT_DIMS`（确保在检查之前绑定了 FBO，因为它会根据 FBO 是否绑定而更改）。

由于您没有从这些纹理中采样（您只是在读取值），因此您应该使用渲染缓冲区而不是纹理。它们的最大尺寸可能大于纹理的尺寸。

好处是易于使用。您不必处理像素格式等，只需为您的通话选择合适的[图像格式。](http://www.opengl.org/wiki/Image_Format)`glRenderbufferStorage`

唯一真正的缺点是支持它们的硬件范围较窄。一般而言，AMD 或 NVIDIA 制造但仍支持的任何东西（现在，GeForce 6xxx 或更高版本 [注意 x 的数量]，以及任何 Radeon HD 卡）都可以访问 ARB_framebuffer_object 或 OpenGL 3.0+（这是核心功能） ）。较旧的驱动程序可能只有 EXT_framebuffer_object 支持（有一些差异）。英特尔硬件是家常便饭；即使他们声称支持 3.x 或 4.x，它仍然可能由于驱动程序错误而失败。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T20:01:08.140

如果您需要渲染超出 GL 实现的最大 FBO 大小的东西，[`libtr`](https://web.archive.org/web/20170117132313/http://www.mesa3d.org/brianp/TR.html)效果很好：

> TR（平铺渲染）库是用于进行平铺渲染的 OpenGL 实用程序库。平铺渲染是一种以块（平铺）形式生成大图像的技术。
> 
> TR 是内存高效的；可以生成任意大的图像文件，而无需在主存储器中分配完整大小的图像缓冲区。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-28T10:48:11.203

最简单的方法是使用称为帧缓冲区对象 (FBO) 的东西。不过，您仍然必须创建一个窗口来创建 opengl 上下文（但可以隐藏此窗口）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T02:52:13.163

实现目标的最简单方法是使用 FBO 进行屏幕外渲染。而且你不需要渲染到纹理，然后得到teximage。只需渲染到缓冲区并使用函数 **glReadPixels**。此链接将很有用。请参阅[帧缓冲区对象示例](http://www.opengl.org/wiki/Framebuffer_Object_Examples)

# solr - 在 Solr 中显示更多搜索结果

> ID：12157647
> 
> 赞同：0
> 
> 时间：2012-08-28T10:46:32.207
> 
> 标签：solr

我想以不同的方式使用给定的关键字进行搜索。例如：如果任何人搜索“solr search”，它必须同时返回“solr”结果和“search”结果。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:09:58.750

好吧，我认为最简单的方法是使用布尔术语。只需搜索“solr OR search”，就会显示您想要的结果。但有一件事：Solr 还会向您显示包含两个搜索词的结果。不知道你是否也想要这个。

您也可以使用 OR 运算符作为默认值。只需打开您的 schema.xml 并修改此行：

```
<solrQueryParser defaultOperator="AND"/> 
```

至

```
<solrQueryParser defaultOperator="OR"/> 
```

# amazon-ec2 - 如何在 Amazon Web Services 上启动 Web 服务器？

> ID：12157656
> 
> 赞同：1
> 
> 时间：2012-08-28T10:47:16.140
> 
> 标签：amazon-ec2, amazon-web-services

刚开始使用 EC2，使用 Amazon Linux AMI 启动实例，在上面安装了我的 Web 应用程序……我以为我已经准备好了。

我访问了他们为我的实例提供的公共 DNS，但没有任何反应。我得到谷歌浏览器“哎呀”......

重新阅读文档后，我看到了一些需要启动 Web 服务器的注释。通过做这个：

```
sudo chkconfig httpd on
sudo service httpd start 
```

但我似乎无法找到这些文件。

任何想法我做错了什么或这些文件位于何处？我得到的最接近的是 /etc 但即使我从那里尝试命令行，我也会得到相同的错误。

谢谢你的帮助。

**更新** 这是我的实例的安全组的图像。这是正确的吧？ ![在此处输入图像描述](../Images/99648a1c16b2ac115dc1df04c8a6e32a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:29:11.183

有没有可能你没有安装 Apache/Tomcat？检查：

```
rpm -q httpd
rpm -q tomcat5 
```

如果未安装，请运行：

```
sudo yum install httpd tomcat5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:21:30.657

您尝试部署哪种类型的 webapps（php/java/Ruby 等）？如果是 php，你想把 apache 目录放在哪里？例如，apache 中的默认根文档位置是 /var/www/html 。如果你把你的 webapp 放在 /var/www/html 里面，它应该可以通过直接 url [http://xxxx/](http://x.x.x.x/) {nameofwebapp}

# java - Netbeans 品牌本地化

> ID：12157660
> 
> 赞同：1
> 
> 时间：2012-08-28T10:47:27.003
> 
> 标签：java, netbeans, user-interface, internationalization

[我已经根据本文链接](http://wiki.netbeans.org/BrandingUpdaterSplash)对我的 Netbeans 应用程序进行了品牌推广

但我不明白，我该如何本地化它？可能吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:51:39.690

我看不出您提供的链接与本地化之间有任何关系。

您可以阅读以下文章以开始本地化。您需要资源包。

[Java 国际化](http://java.sun.com/developer/technicalArticles/Intl/ResourceBundles/)

[国际化](http://java.sun.com/developer/onlineTraining/Programming/BasicJava2/int.html)

# android - 我的应用程序中的 ic_launcher 图标错误

> ID：12157668
> 
> 赞同：5
> 
> 时间：2012-08-28T10:47:58.343
> 
> 标签：android

我正在为`Honeycomb`这个非常古怪的问题开发一个应用程序。

我已经更改`ic_launcher`了每个`drawable`文件夹中的应用程序`settings`图标（

我已经清理了项目，搜索了每一个错误的行，没有结果。

帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T11:02:31.047

奇怪的问题

只需像这样更改`@drawable/appicon`您的图标`Manifest.xml`：

```
<application android:icon="@drawable/appicon" android:label="@string/app_name"
android:name="com.droid.MyApplication">
...
</application> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T12:55:10.087

在我的情况下，我重新启动设备后图标正确显示。不过，我遵循了上述建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-17T08:13:07.957

转到 AndroidManifest 并编辑：

```
<application
    android:icon="@mipmap/ic_custom_launcher"
    android:roundIcon="@mipmap/ic_custom_launcher">
    /* ....  */
</application> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T10:52:33.923

它可能发生了，因为没有卸载带有旧启动器图标的旧应用程序。因此，只需尝试卸载您的应用程序。并且，将不同大小的图标放在两个`drawable`文件夹中。

将图标名称添加到您的`AndroidManifest.xml`文件`<application>`标签中。

```
<application android:icon="@drawable/launcher_icon"
    android:label="@string/app_name"> 
```

并且，运行您的应用程序。

# vba - VBA-如何仅删除第二次出现的字符（在Word文档表的每个单元格中）

> ID：12157669
> 
> 赞同：0
> 
> 时间：2012-08-28T10:48:02.787
> 
> 标签：vba, replace, ms-word

（我热心地搜索了论坛，但我能找到的唯一类似的“替换”问题与 Python、Java 等有关，而不是 VBA）

*   我在 MS Word (2010) 文档中有一个表格（它有两列，但只有第二列有文本）
*   第二列中的某些单元格有一行文本并且没有段落标记
*   第二列中的其他单元格有两行文本和两个段落标记 (^p)
*   这两种细胞之间没有规律的模式
*   在有**第二个**段落标记的地方，它总是直接出现在单元格结束标记之前

我真的需要一个宏来从它出现的每个单元格中删除（替换为“”）**第二个**（=final）段落标记，但忽略单元格中的任何第一段标记。

如果有人有时间和意愿帮助我处理这个宏，我将非常感激。正如您可能已经猜到的那样，尽管我试图给自己上一个速成课程，但我在 VBA 方面的经验很少：我更习惯于录制宏，在这种更复杂的情况下，这不是一个选择。

当谷歌发现我这个时，我的希望就升起来了——看起来它可以适应[http://www.vbaexpress.com/kb/getarticle.php?kb_id=334](http://www.vbaexpress.com/kb/getarticle.php?kb_id=334)；但我不知道如何调整它以仅替换 ^p 的第二个（/最终）出现。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:21:30.683

怎么样：

```
Dim tbl As Table
Dim c As Cell

For Each tbl In ActiveDocument.Tables
    For Each c In tbl.Columns(2).Cells
        'The end of a cell without a carriage return is vbCr & Chr(7)
        If Right(c.Range.Text, 3) = vbCr & vbCr & Chr(7) Then
            c.Range.Text = Mid(c.Range.Text, 1, Len(c.Range.Text) - 3) & Chr(7)
        End If
    Next
Next 
```

# iphone - iPhone上的同步与异步

> ID：12157673
> 
> 赞同：8
> 
> 时间：2012-08-28T10:48:17.150
> 
> 标签：iphone, objective-c, ios, asynchronous, synchronization

我想知道在我的情况下应该做什么。我必须从休息服务器获取数据并将其显示在我的应用程序上。用于此的 UI 是 web 视图，如果没有从服务器接收到数据，则屏幕上不会显示任何内容。在这种情况下，我使用异步请求还是同步请求？另外我的另一个问题是异步请求与单独线程上的同步请求有什么区别？（我认为这就是异步所做的）..任何帮助将不胜感激。我是ios的新手..谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T10:52:21.090

您应该始终使用网络请求的异步加载。永远不要阻塞等待网络响应的主线程。

异步可以在单独的线程上同步，也可以在任何线程的运行循环中调度。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T11:36:55.557

异步和同步之间的区别在于同步是更有效的 PC 通信方法。然而，异步是用于电子邮件应用程序、互联网访问和网络的最常见的通信方法。同步通常用于大数据块的传输。

# c# - 在 c# 中使用空对象连接数据表

> ID：12157675
> 
> 赞同：1
> 
> 时间：2012-08-28T10:48:23.213
> 
> 标签：c#, sql, linq

您好，当我在记录中有空值时，我在加入表时遇到问题。

有2个数据表：

1.  工人：（工人ID，工人姓名，工人地址）
2.  Transactions: (transactionID, transactioinValue, worker1, worker2)，其中worker 2 是可选的，因此它可以包含空值。

所以我开始这样的代码：

```
var record = from transaction in dtTransactions.AsEnumerable()
    join worker1 in dtWorkers.AsEnumerable() on (int)transactions["worker1"] equals (int)worker1["workerID"]
    join worker2 in dtWorkers.AsEnumerable() on (int)transactions["worker2"] equals (int)worker2["workerID"]
    select new
    {
     ID = (int)transactions["transactionID"],
     Name1= worker1["workerName"],
     Name2= worker2["workerName"]
    }; 
```

因此，如果 worker2 不为空，则一切正常，但是当我有空值时，它无法加入。有人可以帮我解决这个问题吗，如果 dataTable 中为 null，我希望有一个没有 worker2 名称的结果记录。

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:03:13.970

你需要像这样进行左连接；

```
var record = from transaction in dtTransactions.AsEnumerable()
                     join worker1 in dtWorkers.AsEnumerable() on (int)transactions["worker1"] equals (int)worker1["workerID"]
                     join worker2 in dtWorkers.AsEnumerable() on (int)transactions["worker2"] equals (int)worker2["workerID"] into w2
                     from wrk in w2.DefaultIfEmpty()
                     select new
                     {
                         ID = (int)transactions["transactionID"],
                         Name1= worker1["workerName"],
                         Name2= wrk["workerName"]
                     }; 
```

其次，是否有任何理由不指定这样的对象属性？

```
 var record = from transaction in dtTransactions.AsEnumerable()
                 join worker1 in dtWorkers.AsEnumerable() on (int)transactions.worker1 equals (int)worker1.workerID
                 join worker2 in dtWorkers.AsEnumerable() on (int)transactions.worker2 equals (int)worker2.workerID into w2
                 from wrk in w2.DefaultIfEmpty()
                 select new
                 {
                     ID = (int)transactions.transactionID,
                     Name1= worker1.workerName,
                     Name2= wrk != null ? wrk.workerName : ""
                 }; 
```

注意去掉方括号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:04:28.603

```
from x in left
where x.Id != null
join y in right on x.Id equals y.Id into rightMatches
from y2 in rightMatches.DefaultIfEmpty() 
select new {x, y2}; 
```

# c# - 存储库模式与 DTO 模式方法

> ID：12157678
> 
> 赞同：7
> 
> 时间：2012-08-28T10:48:32.010
> 
> 标签：c#, java, .net, oop, design-patterns

我们可以使用这两种方法将数据发送到数据访问层或任何其他来源：

**方法1**：存储库方式：

```
public class User
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int Age { get; set; }
}

public class UserRepository
{
    public static void Add(User user)
    {
        // Add user logic
    }
    public static void Delete(User user)
    {
        // Delete user logic
    }
    public static User Get(int userid)
    {
        // Get user logic
    }
} 
```

用法：

```
var user = new User
    {
        FirstName = "FirstName",
        LastName = "LastName",
        Age = 20
    };
UserRepository.Add(user); 
```

在上面，您已经看到我使*User*类保持简单。它没有任何行为。行为被添加到单独的类*UserRepository*中。

**第二种方法**：仅在 User.cs 中保留 Add/Delete/Get 等：

```
 public class User
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public int Age { get; set; }

        public void Add()
        {
            // Add user logic
        }
        public void Delete()
        {
            // Delete user logic
        }
        public User Get()
        {
            // Get user logic
        }
    } 
```

用法：

```
var user = new User
    {
        FirstName = "FirstName",
        LastName = "LastName",
        Age = 20
    };
user.Add(); 
```

上面我只保留了 User.cs 中的行为。这两种方法都服务于添加、删除等用户的目的。你能告诉我吗

1.  哪种方法更好？

2.  何时决定我们必须选择上述两种方法中的哪一种？

3.  如果我也必须添加其他方法，例如*FindAllUsers*、 *FindUserByUserId*、*DeleteUserByUserId*我应该采用哪种方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T10:59:46.563

第一种方法要好得多，因为您要分离关注点，即域实体用户和数据库的持久性。

领域驱动设计中经常谈论的最重要的事情之一是“持久性无知”请参阅[持久性无知的好处是什么？](https://stackoverflow.com/questions/905498/what-are-the-benefits-of-persistence-ignorance)

通过使用存储库模式，您保存/获取实体的方式不受实体代码的影响，即您的域保持它更清洁，并且实质上实现了持久性无知（或者无论如何都要走很长的路）

所以回答：

1.  存储库方法要好得多
2.  总是选择选项 1
3.  将这些方法添加到存储库类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:01:26.937

这完全取决于您需要完成的工作以及应用程序的大小。如果您想要快速开发且可扩展性较低的东西，则不需要使用 n 层类型架构（我的意思是将您的数据交互与您的数据访问层分开）。

但是，如果您正在寻找需要高度可扩展、可编辑、可修改的东西，并且知道它将获得未来的功能，那么显然您必须分开您的关注点，以使您的工作在更长的时间内更容易。

最后，正如我所说，每种方法都有一个目的，在开始工作之前就知道你的目的是什么。

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-06T00:07:27.303

如果您遵循[DDD 指南](https://vuscode.wordpress.com/2009/10/16/inversion-of-control-single-responsibility-principle-and-nikola-s-laws-of-dependency-injection/)，那么实体不应依赖于基础设施：

> **尼古拉的国际奥委会第一定律**
> 
> 仅存储在 IoC 容器中的服务。不要存储任何实体。

原因：通过将基础架构逻辑包含到您的实体中，您正在远离*单一职责原则*。参见 Mark Seemann 的[解释](https://stackoverflow.com/questions/4835046/why-not-use-an-ioc-container-to-resolve-dependencies-for-entities-business-objec/4836790#4836790)。

您的第二种方法的问题是`User`实体依赖于基础设施。

# c# - 如何确定 KeyDown 事件中光标的位置？

> ID：12157681
> 
> 赞同：1
> 
> 时间：2012-08-28T10:48:37.680
> 
> 标签：c#, wpf, textbox

我已经覆盖了 KeyDown 事件，并且我需要按下键的文本框的 Text 属性中的位置。有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:01:25.237

索引是：

```
textbox1.CaretIndex 
```

希望这就是你要找的

# c# - 按字符分割字符串 C#

> ID：12157684
> 
> 赞同：1
> 
> 时间：2012-08-28T10:48:54.463
> 
> 标签：c#, regex

我有一个包含以下文本的字符串：
`[l=9;f=0;r=5;p=2]`
可能有多个：
`[l=9;f=0;r=5;p=2];[l=9;f=0;r=6;p=2]`

我想获取字符串数组（例如第二个）：

```
[l=9;f=0;r=5;p=2]
[l=9;f=0;r=6;p=2] 
```

我试过这个，但它分裂不正确：

```
Regex.Split(seat, "(?=])"); 
```

PS。正则表达式不是强制性的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T10:56:09.233

```
string input = "[l=9;f=0;r=5;p=2];[l=9;f=0;r=6;p=2]";
var list = Regex.Matches(input, @"\[.+?\]")
            .Cast<Match>()
            .Select(m => m.Value)
            .ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T11:12:43.010

以下模式可能会帮助您使用 Regex 的拆分选项

```
string input = "[l=9;f=0;r=5;p=2];[l=9;f=0;r=6;p=2]";
string pattern = @"(?<=\]);";
Regex regex = new Regex(pattern);
string[] data = regex.Split(input); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:53:18.487

```
"[l=9;f=0;r=5;p=2];[l=9;f=0;r=6;p=2]".Split(new string[] { "];" }, StringSplitOptions.None) 
```

然后将“]”附加到数组中的每个项目......

丑陋但应该工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T11:11:59.820

为什么不使用正则表达式捕获？

该模式`\[l=(\d);f=(\d);r=(\d);p=(\d)\]`将捕获每个数组中的值。

例子：

```
private static IEnumerable<dynamic> Match(string text)
{
    return Regex.Matches(text, @"\[l=(\d);f=(\d);r=(\d);p=(\d)\]")
        .Cast<Match>()
        .Where(m => m.Success)
        .Select(m => new { l = m.Groups[1].Value, f = m.Groups[2].Value, r = m.Groups[3].Value, p = m.Groups[4].Value });
}

static void Main(string[] args)
{
    foreach (var result in Match("[l=9;f=0;r=5;p=2];[l=9;f=0;r=6;p=2]"))
        Console.Out.WriteLine("Setting: {0}, {1}, {2}, {3}", result.l, result.f, result.r, result.p);

    foreach (var result in Match("[l=9;f=0;r=5;p=2]"))
        Console.Out.WriteLine("Setting: {0}, {1}, {2}, {3}", result.l, result.f, result.r, result.p);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T11:19:56.947

这是一种 LINQ 方法：

```
Func<string, string> process = s =>
    String.Format("[{0}]",
        String.Join("];[",
            s
                .Split('[')
                .Select(x => x.Split(']'))
                .SelectMany(x => x)
                .Where(x => x != "" && x !=";"))); 
```

至少它有效。:-)

像这样使用它：

```
var result = process("[l=9;f=0;r=5;p=2];[l=9;f=0;r=6;p=2]"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T11:26:07.057

在您的代码中：

```
Regex.Split(seat, "(?=])"); 
```

似乎您只是缺少正则表达式中的实际分号和括号的反斜杠。这有效：

```
 string[] data = Regex.Split(seat, ";(?=\\[)"); 
```

# c++ - Z 阶曲线坐标

> ID：12157685
> 
> 赞同：6
> 
> 时间：2012-08-28T10:49:04.773
> 
> 标签：c++

我如何访问使用 Z 顺序存储的数据，数组中的时间复杂度为 O(1)？我需要通过坐标快速访问每个元素。我有比使用 while 移位更快的方法来访问这些数据吗？

一种方法是使用查找表（我有静态数据大小）

**编辑：**

我现在的一个想法是使用 y*SIZE+x 顺序存储叶子

**编辑2：**

我正在 std::bitset 中的四叉树中记录位。我正在尝试检查是否有一些数据可用。在大小为 128*128 的矩阵中。所以我可以跳过蛮力矩阵搜索空数据。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T12:22:47.557

您可以使用以下代码计算 z 阶曲线值：

```
uint32_t calcZOrder(uint16_t xPos, uint16_t yPos)
{
    static const uint32_t MASKS[] = {0x55555555, 0x33333333, 0x0F0F0F0F, 0x00FF00FF};
    static const uint32_t SHIFTS[] = {1, 2, 4, 8};

    uint32_t x = xPos;  // Interleave lower 16 bits of x and y, so the bits of x
    uint32_t y = yPos;  // are in the even positions and bits from y in the odd;

    x = (x | (x << SHIFTS[3])) & MASKS[3];
    x = (x | (x << SHIFTS[2])) & MASKS[2];
    x = (x | (x << SHIFTS[1])) & MASKS[1];
    x = (x | (x << SHIFTS[0])) & MASKS[0];

    y = (y | (y << SHIFTS[3])) & MASKS[3];
    y = (y | (y << SHIFTS[2])) & MASKS[2];
    y = (y | (y << SHIFTS[1])) & MASKS[1];
    y = (y | (y << SHIFTS[0])) & MASKS[0];

    const uint32_t result = x | (y << 1);
    return result;
} 
```

它取自这里[Bit Twiddling Hacks](http://graphics.stanford.edu/~seander/bithacks.html)

从您的 128x128 数组（或任何其他大小）中，您可以轻松地从任何位置计算 z 阶曲线值。例如：

```
xPos = 2, yPos = 3 -> z order curve value = 7 
```

示例代码的最大数组大小为 65536*65536。只需使用 2 的幂即可，在这种情况下，最大浪费的空间约为。3/4

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-09-02T16:09:50.243

[在https://en.wikipedia.org/wiki/Z-order_curve](https://en.wikipedia.org/wiki/Z-order_curve)重现 Wiki 结果

```
#include <stdio.h>
static const unsigned int B[] = {0x55555555, 0x33333333, 0x0F0F0F0F, 0x00FF00FF};
static const unsigned int S[] = {1, 2, 4, 8};
unsigned int zorder2D(unsigned x, unsigned y){

    x = (x | (x << S[3])) & B[3];
    x = (x | (x << S[2])) & B[2];
    x = (x | (x << S[1])) & B[1];
    x = (x | (x << S[0])) & B[0];

    y = (y | (y << S[3])) & B[3];
    y = (y | (y << S[2])) & B[2];
    y = (y | (y << S[1])) & B[1];
    y = (y | (y << S[0])) & B[0];
    return x | (y << 1);
}

int main()
{    
    const unsigned nx=8,ny=8;
    unsigned res[ny][nx];

    for(unsigned y=0; y<ny; y++){
        for(unsigned x=0; x<nx; x++){
            res[y][x] = zorder2D(x,y);
            printf("yx=%d %d z=%d\n",y,x,res[y][x]);    
        }
    }
    for(unsigned y=0; y<ny; y++){
        for(unsigned x=0; x<nx; x++){
            printf("%-4d",res[y][x]);
        }
        printf("\n");
    }
    return 0;
} 
```

# jquery - 使用 display:block 将鼠标悬停在链接上时无法显示/隐藏 div

> ID：12157686
> 
> 赞同：0
> 
> 时间：2012-08-28T10:49:08.877
> 
> 标签：jquery, css, hide, layer

我试图根据悬停的链接显示隐藏 div 块。我有主要类别和子类别。我只想在有人悬停在主类别上时才显示子类别（相关主类别的）。我尝试了以下但似乎不起作用。感谢所有帮助。

## 代码

```
 <style type="text/css">
      <!--
      .series-wrapper
      { display:none;}

      .brandcat li a:hover .series-wrapper 
       { display:block;}
      -->
      </style>    

    <div class="brandcat">
    <h3>Most Popular Brands</h3>
    <ul class="brands">
    <li><a href='showbrand.php?bd_id=1'>Apple</a>
        <div class='series-wrapper'><h5>Select your Apple Series</h5>
            <a href='showseries.php?s_id=1'>Apple Mainseries1</a>
            <a href='showseries.php?s_id=3'>Test2</a>
        </div>
    </li>
    <li><a href='showbrand.php?bd_id=2'>Ball</a>
        <div class='series-wrapper'><h5>Select your Ball Series</h5>
            <a href='showseries.php?s_id=1'>Ball Mainseries1</a>
            <a href='showseries.php?s_id=3'>Ball Test2</a>
        </div>
    </li>

          </ul>
         </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:52:01.060

您的**.series-wrapper**不是**anchor**的后裔。它带有**anchor**。像这样写

```
.brandcat li a:hover + .series-wrapper { display:block;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:01:42.653

快速修复但不可靠：

```
.brandcat li:hover .series-wrapper {
    display:block;
} 
```

正确修复：

```
<style type="text/css">
<!--
.brandcat .series-wrapper {
    display:none;
}

.brandcat li:hover .series-wrapper,
.brandcat li.active .series-wrapper {
    display:block;
}
-->
</style> 
```

身体：

```
<div class="brandcat">
  <h3>Most Popular Brands</h3>
  <ul class="brands">
    <li><a href='showbrand.php?bd_id=1'>Apple</a>
      <div class='series-wrapper'>
        <h5>Select your Apple Series</h5>
        <a href='showseries.php?s_id=1'>Apple Mainseries1</a> <a href='showseries.php?s_id=3'>Test2</a> </div>
    </li>
    <li><a href='showbrand.php?bd_id=2'>Ball</a>
      <div class='series-wrapper'>
        <h5>Select your Ball Series</h5>
        <a href='showseries.php?s_id=1'>Ball Mainseries1</a> <a href='showseries.php?s_id=3'>Ball Test2</a> </div>
    </li>
  </ul>
</div>

<script type="text/javascript">
$('.brands > li').each(function(index, element) {
    $(element).hover(
    function() {
        $(this).addClass('active');
    }, 
    function() {
        $(this).removeClass('active');
    });
});
</script> 
```

# php - ckeditor的js文件在codeigniter中加载失败

> ID：12157688
> 
> 赞同：0
> 
> 时间：2012-08-28T10:49:24.373
> 
> 标签：php, javascript, codeigniter, ckeditor

我正在尝试将 ck 编辑器集成到我的管理部分中。我将 ck 编辑器文件夹放入我的资产文件夹中。这是代码

```
<script type="text/javascript" src="<?php echo base_url(); ?>assets/admin/ckeditor/ckeditor.js"></script> 
```

之后我为 helper.here 编写代码

```
<?php
if(!defined('BASEPATH')) exit('No direct script access allowed');

/*
 * CKEditor helper for CodeIgniter
 * 
 * @author Samuel Sanchez <samuel.sanchez.work@gmail.com> - http://kromack.com/
 * @package CodeIgniter
 * @license http://creativecommons.org/licenses/by-nc-sa/3.0/us/
 * @tutorial http://kromack.com/developpement-php/codeigniter/ckeditor-helper-for-codeigniter/
 * @see http://codeigniter.com/forums/viewthread/127374/
 * @version 2010-08-28
 * 
 */

/**
 * This function adds once the CKEditor's config vars
 * @author Samuel Sanchez 
 * @access private
 * @param array $data (default: array())
 * @return string
 */
function cke_initialize($data = array()) {

    $return = '';

    if(!defined('CI_CKEDITOR_HELPER_LOADED')) {

        define('CI_CKEDITOR_HELPER_LOADED', TRUE);
        $return =  '<script type="text/javascript" src="'.base_url(). $data['path'] . '/ckeditor.js"></script>';
        $return .=  "<script type=\"text/javascript\">CKEDITOR_BASEPATH = '" . base_url() . $data['path'] . "/';</script>";
    } 

    return $return;

}

/**
 * This function create JavaScript instances of CKEditor
 * @author Samuel Sanchez 
 * @access private
 * @param array $data (default: array())
 * @return string
 */
function cke_create_instance($data = array()) {

    $return = "<script type=\"text/javascript\">
        CKEDITOR.replace('" . $data['id'] . "', {";

            //Adding config values
            if(isset($data['config'])) {
                foreach($data['config'] as $k=>$v) {

                    // Support for extra config parameters
                    if (is_array($v)) {
                        $return .= $k . " : [";
                        $return .= config_data($v);
                        $return .= "]";

                    }
                    else {
                        $return .= $k . " : '" . $v . "'";
                    }

                    if($k !== end(array_keys($data['config']))) {
                        $return .= ",";
                    }                       
                } 
            }               

    $return .= '});</script>';  

    return $return;

}

/**
 * This function displays an instance of CKEditor inside a view
 * @author Samuel Sanchez 
 * @access public
 * @param array $data (default: array())
 * @return string
 */
function display_ckeditor($data = array())
{
    // Initialization
    $return = cke_initialize($data);

    // Creating a Ckeditor instance
    $return .= cke_create_instance($data);

    // Adding styles values
    if(isset($data['styles'])) {

        $return .= "<script type=\"text/javascript\">CKEDITOR.addStylesSet( 'my_styles_" . $data['id'] . "', [";

        foreach($data['styles'] as $k=>$v) {

            $return .= "{ name : '" . $k . "', element : '" . $v['element'] . "', styles : { ";

            if(isset($v['styles'])) {
                foreach($v['styles'] as $k2=>$v2) {

                    $return .= "'" . $k2 . "' : '" . $v2 . "'";

                    if($k2 !== end(array_keys($v['styles']))) {
                         $return .= ",";
                    }
                } 
            } 

            $return .= '} }';

            if($k !== end(array_keys($data['styles']))) {
                $return .= ',';
            }           

        } 

        $return .= ']);';

        $return .= "CKEDITOR.instances['" . $data['id'] . "'].config.stylesCombo_stylesSet = 'my_styles_" . $data['id'] . "';
        </script>";     
    }   

    return $return;
}

/**
 * config_data function.
 * This function look for extra config data
 *
 * @author ronan
 * @link http://kromack.com/developpement-php/codeigniter/ckeditor-helper-for-codeigniter/comment-page-5/#comment-545
 * @access public
 * @param array $data. (default: array())
 * @return String
 */
function config_data($data = array())
{
    $return = '';
    foreach ($data as $key)
    {
        if (is_array($key)) {
            $return .= "[";
            foreach ($key as $string) {
                $return .= "'" . $string . "'";
                if ($string != end(array_values($key))) $return .= ",";
            }
            $return .= "]";
        }
        else {
            $return .= "'".$key."'";
        }
        if ($key != end(array_values($data))) $return .= ",";

    }
    return $return;
} 
```

现在这是我的控制器代码：

```
public $data    =   array();

public function __construct() {

    //parent::Controller();
     parent::__construct(); 

    $this->load->helper('url'); //You should autoload this one ;)
    $this->load->helper('ckeditor');

    //Ckeditor's configuration
    $this->data['ckeditor'] = array(

        //ID of the textarea that will be replaced
        'id'    =>  'content',
        'path'  =>  base_url().'assets/admin/js/ckeditor',

        //Optionnal values
        'config' => array(
            'toolbar'   =>  "Full",     //Using the Full toolbar
            'width'     =>  "550px",    //Setting a custom width
            'height'    =>  '100px',    //Setting a custom height

        ),

        //Replacing styles from the "Styles tool"
        'styles' => array(

            //Creating a new style named "style 1"
            'style 1' => array (
                'name'      =>  'Blue Title',
                'element'   =>  'h2',
                'styles' => array(
                    'color'     =>  'Blue',
                    'font-weight'   =>  'bold'
                )
            ),

            //Creating a new style named "style 2"
            'style 2' => array (
                'name'  =>  'Red Title',
                'element'   =>  'h2',
                'styles' => array(
                    'color'         =>  'Red',
                    'font-weight'       =>  'bold',
                    'text-decoration'   =>  'underline'
                )
            )               
        )
    );

    $this->data['ckeditor_2'] = array(

        //ID of the textarea that will be replaced
        'id'    =>  'content_2',
        'path'  =>  'js/ckeditor',

        //Optionnal values
        'config' => array(
            'width'     =>  "550px",    //Setting a custom width
            'height'    =>  '100px',    //Setting a custom height
            'toolbar'   =>  array(  //Setting a custom toolbar
                array('Bold', 'Italic'),
                array('Underline', 'Strike', 'FontSize'),
                array('Smiley'),
                '/'
            )
        ),

        //Replacing styles from the "Styles tool"
        'styles' => array(

            //Creating a new style named "style 1"
            'style 3' => array (
                'name'      =>  'Green Title',
                'element'   =>  'h3',
                'styles' => array(
                    'color'     =>  'Green',
                    'font-weight'   =>  'bold'
                )
            )

        )
    );      

} 
```

这是我的视图代码：

```
<textarea name="content" id="content" ><p>Example data</p></textarea>
<?php echo display_ckeditor($ckeditor); ?> 
```

但是我的 ckeditor.js 无法加载请帮助我或给我适当的步骤以将 ck 编辑器集成到 codeigniter 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:24:51.283

我得到了我自己问题的答案。要在 codeignitor 中安装 ck 编辑器，您只需按照以下步骤操作：- 1.将 ck 编辑器文件夹放入 assets（或您想要的位置）中。并提供 js 文件的正确路径。2.现在在您的视图部分中只包含这样的js文件：

```
<script type="text/javascript" src="<?php echo base_url(); ?>assets/admin/ckeditor/ckeditor.js"></script> 
```

3.现在在同一个文件上放这个代码：-

```
<textarea class="ckeditor" name="editor1"></textarea> 
```

4.现在您可以在浏览器上看到编辑器了。

# objective-c - 在没有视图控制器的情况下使用 xib

> ID：12157689
> 
> 赞同：2
> 
> 时间：2012-08-28T10:49:28.557
> 
> 标签：objective-c, ios, cocoa-touch, xib

我需要创建几个类似的视图
以一种简单的方式，我在 xib 中创建了一些视图（每个全屏）

我有一个视图控制器来使用这个 xib 的视图，代码如下：

```
NSArray* views = [[NSBundle mainBundle] loadNibNamed:@"MyXibName" owner:nil options:nil];
[self.view addSubview:[views objectAtIndex:aIndex]]; 
```

此时，视图显示正常。

现在，这些视图中有一些按钮，所以我为每个视图连接了一个插座

**坏事发生了**

应用程序因以下原因而崩溃

> **未捕获的异常 'NSUnknownKeyException'，原因：'[<NSObject 0x969db50> setValue:forUndefinedKey:]：此类不符合键的键值编码**

分析：
虽然我的xib文件的“文件所有者”已经设置，但是xib和唯一的视图控制器之间没有任何联系。

我怎样才能获得视图按钮的指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:56:43.487

你可以这样做：

```
NSNib*      aNib = [[NSNib alloc] initWithNibNamed:@"MyGreatNib" bundle:nil];
NSArray*    topLevelObjs = nil;

for (SomeClass *obj in myOwnerObjects) {
    topLevelObjs = nil;

    if (![aNib instantiateNibWithOwner:obj topLevelObjects:&topLevelObjs])
    {
        NSLog(@"Warning! Could not load nib file.\n");
        return;
    }

    for (id topLevelObj in topLevelObjs) {
        if ([topLevelObj isKindOfClass:[NSView class]]) {
            NSView *otView = (NSView *)topLevelObj;
            // set frame...
            [self addSubview:otView];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-13T09:55:36.153

-loadView 的默认实现创建视图或加载 NIB。据我所知，在 -loadView 中创建时无法知道视图的最终大小。所以默认视图大小设置为`[[UIScreen mainScreen] bounds].`这是因为在 -viewDidLoad 和其他方法中使用零帧视图可能很难工作。

您的单行实现可能如下所示：

```
- (void)loadView {
    self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
} 
```

您不需要设置自动调整大小掩码，因为您不知道视图将在什么上下文中显示。调用者负责为您设置正确的框架、自动调整大小的掩码和类似的外部属性（我这样称呼它们）。

在 UINavigationController 方法中想象一下：

```
// we are pushing new VC, view is accessed for the first time
pushedVC.view.frame = CGRectMake(...); 
```

它正在设置正确的框架，但您的 -loadView 在 -setFrame: 之前被调用。因此，在 -viewDidLoad 期间，您有临时的非零帧，只是为了能够设置子视图和内部自动调整大小。在此之后，为您设置正确的框架并在 -viewWillAppear: 中设置最终框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:01:14.890

哎呀...
我刚刚发现了一些东西。

```
UINib* xib = [UINib nibWithNibName:@"MyXibName" bundle:nil];
UIView* view = [[xib instantiateWithOwner:self options:nil] lastObject]; 
```

有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T11:25:44.553

您可以通过定义类 UIView 根据您的需要设计 xib

.m 文件中的代码：

```
NSArray* objects = [[NSBundle mainBundle] loadNibNamed:@"Interface" owner:nil options:nil];

UIView* mainView = [objects objectAtIndex:0];

for (UIView* view in [mainView subviews]) {
    if([view isKindOfClass:[UILabel class]])
    {
        UILabel* label = (UILabel*)view;
        //....As You Wish...
    }
} 
```

# java - JSF logout page - best practices: is it correct to use one common bean?

> ID：12157711
> 
> 赞同：1
> 
> 时间：2012-08-28T10:50:48.723
> 
> 标签：java, jsf, managed-bean

Is it correct/ a best practice to have a commonBean for operations that are common to the application? In my case this would be a logout function that clears the logged value of a session bean.

One of my coworkers told me that only one controller bean should be used per view, however it seems like a waste to have the same method replicated in multiple beans.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T11:31:51.690

Your colleague is referring to the seperation of View and Controller as a loosely defined principle in a pure MVC pattern. The Managed Bean in a JSF application lends itself well to the role of a Controller, however this should not be considered a hard and fast rule for the very reasons that you have stated.

I quote Martin Fowler from Patterns of Enterprise Application Architecture:

> As I said, the value of MVC lies in its two separations. Of these are the separation of presentation and model is one of the most important design principles in software, and the only time you shouldn't follow it is in very simple systems where the model has no real behavior in it anyway. As soon as you get some nonvisual logic you should apply the separation. Unfortunately, a lot of UI frameworks make it difficult, and those that don't are often taught without a separation.
> 
> **The separation of view and controller is less important**, so I'd only recommend doing it when it is really helpful. For rich-client systems, that ends up being hardly ever, although it is common in Web front ends where the controller is separated out. Most of the patterns on Web design here are based on that principle.

Essentially Fowler states that binding view to controller is not as important as binding model to view, so utilizing controllers across views or multiple controllers per view is certainly acceptable if it is helpful to do so.

# eclipse - SWT 部分 setTextClient 将组合放在标题栏的末尾

> ID：12157712
> 
> 赞同：2
> 
> 时间：2012-08-28T10:50:53.580
> 
> 标签：eclipse, eclipse-plugin, swt, rcp

我试图在部分标题栏的末尾放置一个组合框，以便我使用 SWT 的 setTextClient(Control) 方法。我可以在部分标题栏中看到该组件，但这是在极端情况下，但我不希望部分标题和 TitleBar 之间有太多空间。

用户界面- ![在此处输入图像描述](../Images/6f0e990429fcedbe7ce84954132fee0e.png)

从上图中，很明显 AND 和 OR 单选按钮在最后，并且在 Filter Title 和 Title Bar 之间有一个空格。

以下是我用来实现相同目的的代码片段 -

```
Composite toolbar = toolkit.createComposite(section, SWT.WRAP);
        RowLayout rlayout = new RowLayout(SWT.HORIZONTAL);
        toolbar.setCursor(Display.getDefault().getSystemCursor(SWT.CURSOR_HAND));
        rlayout.marginLeft = 0;
        rlayout.marginRight = 0;
        rlayout.spacing = 0;
        rlayout.marginTop = 0;
        rlayout.marginBottom = 0;
        toolbar.setLayout(rlayout);

        Button A = new Button(toolbar, SWT.RADIO);
        A.setText("AND");

        Button r = new Button(toolbar, SWT.RADIO);
        r.setText("OR");

        section.setTextClient(toolbar);
        section.setText(type.name());
        section.setClient(client);
        section.setExpanded(true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:02:07.967

找到了解决方案，实际上是使用部分声明。

```
Section section = toolkit.createSection(compositeRightDownContent,
            Section.LEFT_TEXT_CLIENT_ALIGNMENT | Section.COMPACT); 
```

它奏效了

# html - 无法在 Bootstrap 按钮上将图像添加到文本

> ID：12157716
> 
> 赞同：4
> 
> 时间：2012-08-28T10:51:09.860
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Bootstrap，有时很难覆盖它。

我想在我的按钮上添加一些图片，靠近文本。所以我添加了背景图像，但它不适用。

这是我的按钮的css：

```
 .submit .report{
font-size: 18px;
text-shadow: none;
font-weight: bold;
padding: 5px;
width:300px;
color:white;
filter:alpha(opacity=100);
background: #628d28;
background-image:url('../images/picture.png') no-repeat;
} 
```

但是 Firebug 说，我的元素有下一个 CSS：

```
 .submit .report{
font-size: 18px;
text-shadow: none;
font-weight: bold;
padding: 5px;
width:300px;
color:white;
filter:alpha(opacity=100);
background-image: none repeat color(98,141,40);

} 
```

为什么我不能添加背景图片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:00:01.087

您定义了错误的**背景**属性。像这样写：

```
.submit .report{
background-color: #628d28;
background-image:url('../images/picture.png');
background-repeat:no-repeat;
} 
```

**或者**

```
.submit .report{
    background: #628d28 url('../images/picture.png') no-repeat;
 } 
```

# vagrant - Vagrant 未在 33.33.33.10 上运行

> ID：12157722
> 
> 赞同：2
> 
> 时间：2012-08-28T10:51:28.593
> 
> 标签：vagrant

我第一次启动 vagrant 时，VM 运行在 33.33.33.10 上。在“vagrant destroy”之后，每次我启动 vagrant 它都会在 127.0.0.1 上运行，即使我的 Vagrantfile 具有以下配置：

```
config.vm.network :hostonly, "33.33.33.10" 
```

如何让 vagrant 再次在 33.33.33.10 上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T01:10:19.903

127.0.0.1 是环回接口的家乡地址。您当前的机器始终是 127.0.0.1。

当您正在寻找正确的 IP 地址时，运行命令`ifconfig`（在 UNIX 上）并寻找`eth`接口。

我猜它仍然在同一个地址运行，你只是错过了正确的 IP。

请您尝试`ifconfig eth0`在您的虚拟机上运行吗？

HTH。

# ajax - 如何从jquery中的url获取json数据？

> ID：12157732
> 
> 赞同：-1
> 
> 时间：2012-08-28T10:52:06.527
> 
> 标签：ajax, json, jquery, getjson

如何从 URL 中获取 json 数组。我将 mydata 声明为变量。**如何将json数组放入mydata？**使用以下 ajax

```
var mydata;
$.ajax({
 url: someurl,
 dataType: 'json',
 success: function() {

  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:53:25.363

```
var mydata;
$.ajax({
   url: someurl,
   dataType: 'json',
   success: function(data) {
      mydata = data; 
      console.log(mydata);
   }
}); 
```

或者你可以使用[$.getJSON()](http://api.jquery.com/jQuery.getJSON/)函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:13:37.507

```
Try this:-

    ***$.ajax({
     url: someurl,
     dataType: 'json',
     success: function(mydata) {
foreach(var data in mydata){
//do something.....    
}
      },
failure: function()
{
//error message
}
    });*** 
```

# user-interface - 使用“问号”图标的推荐方法是什么？

> ID：12157734
> 
> 赞同：2
> 
> 时间：2012-08-28T10:52:12.853
> 
> 标签：user-interface, user-experience

我开发了一个桌面应用程序，我想在一个文本框（描述该文本框的含义）旁边添加一个“问号”图标。

我的问题是使用问号的常用方法是什么：悬停在问号上时是否应该显示文本？例如使用工具提示？我应该在单击问号后立即显示文本吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:05:07.837

我建议您在悬停时显示工具提示。作为用户，这对我来说少了一次点击。

在构建基于表单的用户界面时要考虑的另一件事是对控件进行足够描述性的标记，以便用户不需要组件标签之外的任何进一步帮助。如果工具提示是您传达控件含义的主要方式，那么您肯定需要重新考虑表单设计。基本上不要使用工具提示作为提示，使用 2-3 个单词作为附加描述的占位符是更好的首选。

我看到单击以显示工具提示真正有用的唯一地方是在触摸界面中。

# apache-flex - (flex) - 对数据变化的影响 - 自定义 itemrenderer

> ID：12157740
> 
> 赞同：0
> 
> 时间：2012-08-28T10:52:39.050
> 
> 标签：apache-flex, itemrenderer, effect

我有带有自定义 itemrenderer 的数据网格。我想为更改数据的单元格播放动画颜色效果。我不想对所有细胞都发挥这种效果。

这是itemrenderer的代码：

```
<?xml version="1.0" encoding="utf-8"?>
    <s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx" clipAndEnableScrolling="true">
<fx:Declarations>
    <s:Sequence id      =   "updateEffect">
        <s:AnimateColor colorFrom   ="0xffffff"
                        colorTo     ="0xb9d30d"
                        target  =   "{lblData}"
                        duration    ="5000"/>
        <s:AnimateColor colorFrom   ="0xb9d30d"
                        colorTo     ="0xffffff"
                        target  =   "{lblData}"
                        duration    ="5000"/>
    </s:Sequence>
</fx:Declarations>
<fx:Script>
    <![CDATA[
        import mx.controls.Alert;
        import mx.events.FlexEvent;

        override public function prepare(hasBeenRecycled:Boolean):void {
            if(data)
            {
                lblData.text = data[column.dataField];
                if(data.selected == true)
                {
                    lblData.setStyle("color","#61afda");
                    lblData.setStyle("textAlign","center");
                    lblData.setStyle("fontWeight","bold");
                    lblData.setStyle("fontSize","19");
                    lblData.setStyle("paddingLeft","10");
                    lblData.setStyle("paddingRight","10");
                    lblData.setStyle("paddingBottom","0");
                    lblData.setStyle("paddingTop","2");         
                    containter.setStyle("backgroundAlpha","1.0");
                    containter.setStyle("backgroundColor","0x2f3437");
                }
                else
                {   
                    lblData.setStyle("color","#d4d4d4");
                    lblData.setStyle("textAlign","center");
                    lblData.setStyle("fontWeight","bold");
                    lblData.setStyle("fontSize","12");
                    lblData.setStyle("paddingLeft","10");
                    lblData.setStyle("paddingRight","10");
                    lblData.setStyle("paddingBottom","5");
                    lblData.setStyle("paddingTop","4");
                    containter.setStyle("backgroundAlpha","0.0");
                    updateEffect.play();
                }
            }
        }
    ]]>
</fx:Script>
<s:SkinnableContainer
    id          ="containter"
    width       ="100%"
    height      ="100%">

    <s:HGroup
        width       ="100%"
        height      ="100%">

        <s:Label
            id                  ="lblData"

            width               ="100%"
            height              ="100%"
            maxDisplayedLines   ="1"
            styleName           ="FPlayGcItemRenderStyle"/>

    </s:HGroup>

</s:SkinnableContainer> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:33:57.833

我不知道这是否是最好的方法，但是当我需要在我的项目渲染器中动态更新属性时，我通常会向我的数据添加一个侦听器。

```
//This is inside an item renderer
private var _myClass:FunkyClass;
override protected function set data( value:Object ):void
{
    super.data = value;
    if( value != null )
    {
        if( _myClass != null )
        {
            _myClass.removeEventListener( 
                  'MyFunkyClass.DataChange' , updateSomething);
        }
        _myClass = value as FunkyClass;
        _myClass.addEventListener( 
                  'MyFunkyClass.DataChange' , updateSomething);
    }
}

private function updateSomething( event:Event ):void
{
    //change colors, visibility and so forth
} 
```

当然，您的数据类必须扩展 EventDispatcher。我也很想看看社区中的其他人是如何解决这个问题的。

# xml - 在 SSIS 中从 XML 获取数据

> ID：12157746
> 
> 赞同：0
> 
> 时间：2012-08-28T10:53:05.367
> 
> 标签：xml, ssis

我有以下 XML：

```
<?xml version="1.0" encoding="UTF-16"?>
<APIDATA xmlns="api-com">
<ORDER EngineID="1" OrderID="66"><INSTSPECIFIER InstID="27" SeqID="17"/></ORDER>
<ORDER EngineID="2" OrderID="67"><INSTSPECIFIER InstID="28" SeqID="18"/></ORDER>
</APIDATA> 
```

我想在每个循环中为所有订单条目获取 SSIS 变量的所有 ID。到目前为止，我可以在 SSIS 的控制流中使用 ForeachLoop 获取前两个 id，如下所示：

```
EnumerationType:  ElementCollection
OuterXPathString: //*[name() = 'ORDER']
InnerElementType: NodeText
InnerXPathString: @* 
```

然后在变量映射上，我使用索引为 0 和 1 的两个字符串变量来获取两个 ID。如何获取 INSTSPECIFIER 元素的 ID？一次获取所有四个 ID 的正确 XPath 命令是什么？

注意，ORDER 元素中只能有一个 INSTSPECIFIER。此外，如果这需要单独完成，例如在 ForeachLoop 中获取 ORDER 并在 XMLTask 中获取 INSTSPECIFIER，则 OrderID 是主键。因此，在这种情况下，问题是，如何在 XMLTask 中获取 INSTSPECIFIER 条目的 InstID 和 SeqID，该条目具有具有特定 OrderID 的父 ORDER 条目？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:57:36.777

这次尝试四个变量和 InnerXPathString:`@* | child::node()/@*`其他值不变。

# android - ItemizedOverlay 回调 ondraw

> ID：12157748
> 
> 赞同：1
> 
> 时间：2012-08-28T10:53:17.950
> 
> 标签：android, android-mapview

我想在地图视图上画一张图片和背景，因为只有图片很难看，所以我想给图片一个背景。我想使用：

```
 public class MyItemizedOverlay extends ItemizedOverlay {
{
@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow)
{

       // super.draw(canvas, mapView, false);
       canvas.drawbitmap(pic,,,);
       canvas.drawbitmap(bg,)

}

.... 
```

}

但我找不到 invalidate() 方法，如何完成效果？

# ruby-on-rails - config.cache_classes=true 仅适用于 ruby on rails 生产模式中的某些域

> ID：12157756
> 
> 赞同：0
> 
> 时间：2012-08-28T10:53:40.243
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

嗨，我想`config.cache_classes = true`在 www.cybercellar.com 和`config.cache_classes = false`dev2013.cybercellar.com 上使用我该怎么做？两者都在生产模式下运行。

我在我的 /app/config/enviroments/production.rb 中尝试过，但无济于事

```
 if  == "www.cybercellar.com"
      config.cache_classes = true
  else
      config.cache_classes = false
  end 
```

但我收到了这个错误

```
undefined local variable or method `request' for main:Object (NameError) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:04:15.680

您可以创建一个新环境，如生产环境。步骤是，

1\. 在 config/database.yml 中添加新环境，名称类似于 Sandbox。2\. 在 config/enviroments/ 下创建 sandbox.rb。在这里根据域或任何内容加载您的设置。

# c++ - 模板别名可以用于部分专业化吗？

> ID：12157758
> 
> 赞同：4
> 
> 时间：2012-08-28T10:53:52.793
> 
> 标签：c++, c++11, partial-specialization

给定模板别名

```
template<unsigned U>
using uint_ = integral_constant<unsigned,U>; 
```

部分专业化

```
template<class T,class P>
struct size{}; 
```

作为

```
template <class T,unsigned U>
struct size<T,uint_<U>>{}; 
```

生成与`template parameter can not be deduced`clang 3.1 相同的警告，而 gcc 4.7 不生成警告

那么，它是格式错误的代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:58:28.963

代码在 C++11 中非常好。可以忽略 Clang 的警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T20:29:06.090

另一个人说这是一个 Clang 错误。如果您像这样更改 using 声明，您可以解决它

```
template<unsigned T, unsigned U = T>
using uint_ = integral_constant<unsigned,U>; 
```

作为一个有根据的猜测，显然 Clang 没有正确更新出现在 type-id 中的模板参数的标识。所以它认为在你的例子中，结果类型`uint_<U>`是指部分专业化的第一个参数（因为在`uint_`这种情况下，但不是在使用点）。或者，您可以在使用点更换订单

```
template <unsigned U,class T>
struct size<T,uint_<U>>{}; 
```

# java - Tomcat7 和会话

> ID：12157760
> 
> 赞同：0
> 
> 时间：2012-08-28T10:54:01.607
> 
> 标签：java, jsp, tomcat7

我对 Tomcat7 和我的应用程序有疑问。

我会创建一个bean并设置一个属性。我将在另一个 jsp(get) 中使用相同的属性，而无需重新创建 bean。我用范围“会话”声明了 bean，但是当我尝试获取该属性时，它为空。为什么？我错了什么？

在我的网络应用程序中，我有：

test1.jsp

```
call test2.jsp and pass the parameter "name"="mm" 
```

test2.jsp

```
<jsp:useBean id="sBean" scope="session" class="my.package.SessionBean" />
<jsp:setProperty name="sBean" property="*" /> 
```

属性“name”的值是正确的“mm”

test3.jsp

```
<jsp:useBean id="sBean" scope="session" class="my.package.SessionBean" />
<% sBean.getName() %> 
```

属性“name”的值为 NULL，而不是“mm”

```
public Sessionbean implements Serializable
{
  private String name;
  public SessionBean(){}
  //get and set of name
} 
```

在tomcat6中同样的事情完美地工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:43:55.493

我认为原始页面几乎是好的。
test3.jsp 中的scriptlet 缺少等号(=)。它应该是 <%=sBeangetname()%>。
它应该是 ()IS/GET) 字段名（或伪字段名）一个公共方法名。包含“（SessionBean）session.getAttribute（“sBean”）”的答案有效。但它不使用 JSP 中包含的 bean 机制。因此，这是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:59:34.997

我不确定为什么这适用于 tomcat6 而不是 tomcat7，但我认为如果你在 test3.jsp 中进行更改：

```
<% sBean.getName() %> 
```

至：

```
<% SessionBean testBean = (SessionBean) session.getAttribute("sBean"); //try changing name of SessionBean too so it doesn't conflict with the useBean name
   testBean.getName();
%> 
```

它应该工作。或者，您可以使用：

```
<jsp:getProperty name="sBean" property="name" /> 
```

**更新** 我把两个 JSP 页面放在一起。我在 tomcat 7 中快速测试了它，它对我有用。虽然我没有做表格，但我认为这是一般的想法。你是这样设置的吗？

test1.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>

<%@ page import="my.project.SessionBean" %>
<jsp:useBean id="sBean" scope="session" class="my.project.SessionBean" />

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<%
SessionBean testBean = (SessionBean) session.getAttribute("sBean");
testBean.setName("Nate");
pageContext.forward("test2.jsp"); //forward to test2.jsp after setting name

%>
<jsp:getProperty name="sBean" property="name" />

</body>
</html> 
```

test2.jsp：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>

<jsp:useBean id="sBean" scope="session" class="my.project.SessionBean" />
<%@ page import="my.project.SessionBean" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<p>page 2</p>
<p>from jsp tag</p>
<jsp:getProperty name="sBean" property="name" /><br />

<p> from scriptlet</p>
<%
SessionBean testBean = (SessionBean) session.getAttribute("sBean");
out.print(testBean.getName());
%>

</body>
</html> 
```

# java - 有没有办法将 MyEclipse 中的工作集映射到 VSS 中的文件夹

> ID：12157761
> 
> 赞同：0
> 
> 时间：2012-08-28T10:54:01.887
> 
> 标签：java, version-control, visual-sourcesafe, myeclipse

我有`MyEclipse Workbench 8.6`开发我的项目并`Microsoft Visual Sourcesafe (VSS)`作为我的源版本控制器。我的工作区中有太多项目。我按几个工作集对项目进行分组。我的问题是：

有没有办法将工作集映射`MyEclipse`到文件夹中`VSS`？

**编辑**

我将显示我的工作空间状态：我有四个名称为：

1.  `com.sam.api`包含我的接口。
2.  `com.sam.impl.default`包含我对上述项目的默认实现。
3.  `com.sam.factory`实例化 api 的实现。
4.  `com.start`是我程序的起点。

我有两个`working-set`名字在`MyEclipse`：

1.  `sam`is 包含三个项目`com.sam.api`, `com.sam.impl.default`, `com.sam.factory`.
2.  `sp`是包含一个项目`com.start`。

我有以下结构`VSS`：

*   `sam-project\sam\com.sam.api`
*   `sam-project\sam\com.sam.impl.default`
*   `sam-project\sam\com.sam.factory`
*   `sam-project\sp\com.start`

现在我必须将四个项目映射`MyEclipse`到四个项目，`VSS`但我想将两个子文件夹映射`MyEclipse Working-Set`到两个子文件夹`sam`，`sp`但`VSS`不能这样做:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:25:22.710

您的两个问题的答案都是肯定的，对于任何 MyEclipse IDE 版本，基于 Eclipse 版本高达 3.3

检查这个：http: [//vssplugin.sourceforge.net/](http://vssplugin.sourceforge.net/)

将上述插件安装到您的 MyEclipse 上。按照网站上的说明，了解如何共享项目（地图工作集）。

我不认为 vssplugin 与您的 MyEclipse 版本兼容。

将工作集映射到 VSS 中的文件夹的步骤

```
Right click on a project in Eclipse, place cursor on Team.

click on Share Project > VSS Configuration Wizard > Next 
```

# jquery - AnySlider - 交互时暂停

> ID：12157762
> 
> 赞同：1
> 
> 时间：2012-08-28T10:54:02.463
> 
> 标签：jquery, anythingslider

我终于找到了一个令我满意的轮播，并且我正在使用 AnySlider，因为它是如此可配置。我从可用性网站发现的一件事是，如果与滑块有交互，那么滑块应该会自动退出自动播放滚动，并且在用户也请求之前不会再次移动。

这是在 AnySlider 中可行的吗？我已经激活了悬停暂停，但这并不是一回事。只是想知道你们知道是否还有其他选择？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:42:19.120

进行交互时没有停止幻灯片放映的选项，因为有许多不同类型的交互。您可以使用 API 来停止幻灯片放映。例如，假设您有一个输入，当该输入获得焦点时，停止幻灯片（[演示](http://jsfiddle.net/Mottie/ycUB6/373/)）：

```
$('input').focus(function(){
    $('#slider').data('AnythingSlider').startStop();
}); 
```

无论您想停止幻灯片放映的任何交互，只需调用该`startStop()`函数即可。`startStop(true)`如果需要，使用重新启动它。在此处查看其他[API 函数](https://github.com/CSS-Tricks/AnythingSlider/wiki/Usage)。

# eclipse-cdt - 将 Eclipse 与 C++Builder 2007 一起使用？

> ID：12157763
> 
> 赞同：2
> 
> 时间：2012-08-28T10:54:04.637
> 
> 标签：eclipse-cdt, c++builder

我有几个用 CodeGear C++Builder 2007 编写的（巨大的）项目，利用组件、表单/“设计”等。

问题：IDE 很糟糕，尤其是代码中缺乏适当的导航让我很紧张。我正在寻找一种替代 IDE，至少可以用于可以读取 C++Builder 项目（.cproj 文件）的实际编码（也可能用于表单设计）。

我想，如果有任何开放的 IDE 可以做到这一点，它的 Eclipse ......如果你知道的话，欢迎使用其他替代方案。但是在我花太多时间试图弄清楚如何使它工作之前---有没有人有这方面的经验并且可以确认/拒绝我是否可以使用 Eclipse 来处理 C++Builder 项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:08:46.047

是的，Eclipse 可作为带有 C++Builder 的 IDE。我经常在 Eclipse 中进行编码，并使用 C++Builder 进行编译、表单设计器和调试。（Eclipse 应该能够调用 C++Builder 的命令行构建并查找错误，但我从未尝试过。）

Eclipse 不需要能够读取 .cbproj 文件；相反，在与您的 C++Builder 项目相同的目录中创建一个 Eclipse 项目，手动设置您的 Eclipse 路径和包含以匹配您的 C++Builder 项目，然后让 Eclipse 从那里开始。

我目前正在使用相当老的 Eclipse Helios。较新版本的 Eclipse CDT 提高了解析 C++ 的能力，但不幸的是，这似乎导致它拒绝了更多 C++Builder 的 C++ 扩展。我还没有调查过如何最好地处理这个问题。

# cakephp - CakePHP - 从 $this->request->data 中删除数据

> ID：12157772
> 
> 赞同：2
> 
> 时间：2012-08-28T10:54:48.360
> 
> 标签：cakephp

我的 ExpenseClaim 模型有一个编辑页面。编辑页面在表单中列出了属于该 ExpenseClaim 的所有相关费用，以便用户可以编辑费用。我在每笔费用旁边都有一个 X，因此他们可以在需要时将其删除。这个 X 只是使用 JS 从 DOM 中删除行字段。

当按下保存按钮时，我希望从 Expense 表中删除任何已删除的行，但由于 $this->request->data 没有更改（更改仅在 DOM 中），它们不会被删除。任何已编辑的数据都会更改，但不会删除数据。

我考虑过使用 postLink ，但因为它创建了自己的表单，而我已经处于我无法使用的表单中。

那么我怎样才能得到蛋糕来识别更改的数据呢？还是我走错了路？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:26:16.050

在 php 数组上执行这些操作非常简单：`unset(array[$key])`。

你可以 | 应该 | 必须 - 这取决于您的代码 - 使用 ajax 来触发这些操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T11:33:54.613

看到这是一个数据库条目，不能像这样删除。你也不能这样做`unset`。更改必须反映在数据库中。

最好使用`ajax`向服务器发出请求`id`并从数据库中删除该行并`onSuccess`回调`element`从`dom`.

# javascript - 如何突出显示在线网页中的文本

> ID：12157775
> 
> 赞同：1
> 
> 时间：2012-08-28T10:55:08.547
> 
> 标签：javascript, jquery, html, string, highlight

我有一个从网络检索信息的网络应用程序，获取的
数据显示在我的网页中。我有从网站获取的字符串和指向该网站的链接。

```
String = "won the Ethugalpura International Rating Chess Tournament"
url    = "http://www.island.lk/index.php?page_cat=article-details&page=article-details&code_title=15182" 
```

当用户单击字符串时，我想访问相关网站并使用突出显示的文本显示它。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:04:27.713

检查此[替换 DOM 中](http://james.padolsey.com/javascript/replacing-text-in-the-dom-solved/)的文本，这将帮助您通过搜索突出显示文本，[现场演示](http://padolsey.github.com/findAndReplaceDOMText/demo.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:00:42.403

所以新网站会被加载，然后在新网站上的文本（'字符串'）会在新网站上突出显示？

我觉得这对于一般用途来说是不可能的。您当然可以在您的机器上安装一个浏览器插件来执行此操作，但通常对于您无法控制其浏览器的其他用户，一个站点无法更改另一个站点内容的显示。谢天谢地。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:09:40.823

您不能直接执行此操作。

从技术上讲，您可以通过获取外部页面的内容、对其进行操作（例如通过搜索字符串并将其放入`mark`元素中，然后添加 CSS 规则以突出显示该元素），然后伪造链接来间接地做到这一点。也就是说，您将使用一个`a`元素，看起来像一个链接，但实际上由一个事件处理程序驱动，该处理程序导致您修改的文档被显示。

当然，您需要获得外部网站版权所有者的许可。

# c# - 带有 mysql 的 Dapper dot net，要么致命，要么全部插入为 NULL

> ID：12157777
> 
> 赞同：1
> 
> 时间：2012-08-28T10:55:21.323
> 
> 标签：c#, mysql, dapper

我的代码

```
string query = @"INSERT INTO representative_dev.representative_users
                                (Username, Password, FullName, 
                                HomePhone, PhoneToCall, 
                                CompanyEmail, PersonalEmail, 
                                IsManager) 
                            VALUES (@Username, @Password, @FullName, 
                                    @HomePhone, @PhoneToCall,
                                    @CompanyEmail, @PersonalEmail, 
                                    @IsManager);";
            mycon.Open();
            int cnt = mycon.Execute(query,
                new
                {
                    txtUsername,
                    txtPassword,
                    txtFullName,
                    txtHomePhone,
                    txtPhoneToCall,
                    txtCompanyEmail,
                    txtPersonalEmail,
                    cbxIsManager
                });
            mycon.Close(); 
```

它给了我“命令执行期间遇到的致命错误”。

当我在另一种情况下执行另一个插入查询时效果很好，不同的是这里我有 cbxIsManager 作为布尔值，而在数据库中是 tinyint(1) 而在另一种情况下都是字符串

如果我添加“允许用户变量=true；” 然后我没有得到异常，但在数据库中所有值都是空的（检查他是否得到值）

在这个项目中使用 ASP.NET，在另一个控制台，FW4，mysql 是 6.somthing（想想 3）其他代码

```
 string query = @"INSERT INTO representative_dev.potencial_contact
                    (Name, Company_ID, Phone, Email, Department, Notes, SuperFriend, UpdateDate) 
                    VALUES (@Name, @Company_ID, @Phone, @Email, @Department, @Notes, @SuperFriend, @UpdateDate);";
        mycon.Open();
        int cnt = mycon.Execute(query,
            new
            {
                con.Name,
                con.Company_ID,
                con.Phone,
                con.Email,
                con.Department,
                con.Notes,
                con.SuperFriend,
                con.UpdateDate
            });
        mycon.Close(); 
```

任何帮助，将不胜感激

谢谢，爱丽儿

编辑：这是什么时候起作用的

```
 string query = @"INSERT INTO representative_dev.representative_users
                                (Username, Password, FullName, 
                                HomePhone, PhoneToCall, 
                                CompanyEmail, PersonalEmail, 
                                IsManager) 
                            VALUES ('" + txtUsername + @"', '" + txtPassword + @"', '" + txtFullName + @"', 
                                    '" + txtHomePhone + @"', '" + txtPhoneToCall + @"',
                                    '" + txtCompanyEmail + @"', '" + txtPersonalEmail + @"', 
                                    " + cbxIsManager + ");";

            int cnt = mysql.ExecuteInsert(query); 
```

仍在寻求帮助，因为我想使用 dapper....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:37:48.440

尝试这样的事情：

```
public class RepresentativeUser
{
    public string UserName { get; set; }
    public string Pasword { get; set; }
    //etc
    public int IsManager { get; set; }
}

public void InsertRepresentativeUser(RepresentativeUser representativeUser)
{
    const string query = @"INSERT INTO representative_dev.representative_users
                        (Username, Password, 
                        IsManager) 
                    VALUES (@Username, @Password,
                            @IsManager);
                    select count(*) from representative_dev.representative_users";

    var count = DbConnection.Query<decimal>(query,
        new
        {
            representativeUser.UserName,
            representativeUser.Pasword,
            representativeUser.IsManager
        });
} 
```

主要变化是使用 Query<> 扩展 vs Execute。执行不返回结果，我看到您希望返回一些计数，例如“int cnt = mycon.Execute(query”)。

我还将查询包装成一个方法；现在您的客户只需要发送一个要插入的新代表用户。这样您还可以控制数据类型。

希望这可以帮助。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T23:40:27.957

尝试用`@`s替换`:`s。它似乎对我有用：

```
string query = @"INSERT INTO representative_dev.representative_users 
                 (Username, Password, FullName, HomePhone, PhoneToCall, CompanyEmail,
                  PersonalEmail, IsManager) VALUES (:Username, :Password, :FullName,
                  :HomePhone, :PhoneToCall, :CompanyEmail, :PersonalEmail, :IsManager);"; 
```

# objective-c - 如何使用 NSMutableArray 作为本地缓存

> ID：12157782
> 
> 赞同：1
> 
> 时间：2012-08-28T10:55:51.427
> 
> 标签：objective-c, ios, cocoa-touch

我有一个从 FlipsideViewController 推送的 UtilityApp 和 UITableViewController。我修改了 UITableView 中的几个单元格以嵌入 UITextField 和 UIButton（保存按钮）。其他表格视图单元格将正常运行。单击普通 UITableViewCell 时，我将再次推送具有另一组 UITableViewCells 的相同 UITableViewController。现在我的问题是，当我单击保存按钮时，我想将 NSObject 添加到 NSMUtableArray 上。当我转到下一个控制器（即相同的 UITableViewController）并单击保存按钮时，我想再次将 NSObject 添加到 NSMutableArray。因此 NSMutableArray 对我来说就像一个本地缓存。怎么可能？基本上我想在 UITableViewController 之外的某个地方声明 NSMutableArray 并继续向它添加 NSObject 实例。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:04:58.293

您需要一个单例类用作缓存。例如，从[这个问题](https://stackoverflow.com/questions/145154/what-does-your-objective-c-singleton-look-like)：

```
@interface MySingleton : NSObject
{
}

+ (MySingleton *)sharedSingleton;
@end

@implementation MySingleton

+ (MySingleton *)sharedSingleton
{
  static MySingleton *sharedSingleton;

  @synchronized(self)
  {
    if (!sharedSingleton)
      sharedSingleton = [[MySingleton alloc] init];

    return sharedSingleton;
  }
}

@end 
```

现在只需使用`[MySingleton sharedSingleton]`来获取对该对象的共享引用。添加方法以将对象添加到您的`NSMutableArray`.

# java - 马文。将 .DLL 放在 JAR 的根目录中

> ID：12157783
> 
> 赞同：10
> 
> 时间：2012-08-28T10:55:57.453
> 
> 标签：java, maven, jar

如何`.dll`使用 Maven 在 JAR 的根目录中包含本机文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T11:30:21.933

如果您已经有了 .dll 文件，只需将其存储在项目`src/main/resources`目录中，Maven 会将其放在目标 jar 的根目录中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T10:59:40.273

你可以看到这些链接可能会有所帮助..

1.  [如何制作包含dll文件的jar文件](https://stackoverflow.com/questions/1611357/how-to-make-a-jar-file-that-include-dll-files)
2.  [如何使用 Eclipse 启动将本机库添加到“java.library.path”（而不是覆盖它）](https://stackoverflow.com/questions/661320/how-to-add-native-library-to-java-library-path-with-eclipse-launch-instead-of)
3.  [native_loader](http://www.greenfoot.org/doc/native_loader)

# mysql - 用 myisamchk 修复大 mysql 表而不杀死服务器

> ID：12157784
> 
> 赞同：1
> 
> 时间：2012-08-28T10:55:59.363
> 
> 标签：mysql, database

有一个 50G 的 mysql 表，使用 myisam 索引创建。我想修复它（它已损坏），我正在尝试对其进行 myisamchk。问题是它花费的时间太长，服务器上的平均负载上升（接近 30 或更多）。我实际上正在使用：

```
 myisamchk --silent --force --fast --update-state \
> --key_buffer_size=512M --sort_buffer_size=512M \
> --read_buffer_size=4M --write_buffer_size=4M \
> tablename.MYI 
```

关于 myisamchk 参数的任何建议可以在不使处理器过载的情况下进行缓慢修复吗？

# jquery - 使用 jQuery 在运行时不隐藏 Div（消息框）

> ID：12157785
> 
> 赞同：8
> 
> 时间：2012-08-28T10:56:03.347
> 
> 标签：jquery, jquery-plugins

我有一个如下的登录表单。

```
<li class="loginlink">
    <a id="showlogin" href="#">
        <span style="color: #666666">Login</span>
    </a>
    <div class="loginbox" style="display: block;">
        <fieldset>
            <label>User Name : </label>
            <input id="input" type="text" value="" name="input">
        </fieldset>
        <label>
            <span style="display: inline-block; ...;"> Password :</span>
        </label>
        <input id="password_txt" type="password" style="padding:5px;..;" 
               value="" name="password_txt">
        <p>
            <a class="loginlink" onclick="mojarra.jsfcljs(document.getElementById('headerForm'),
                     {'j_idt60':'j_idt60'},'');return false" style="color: #666666;.." 
                     href="#">Forgot Password?
            </a>

            <a class="loginlink" onclick="mojarra.jsfcljs(document.getElementById('headerForm'),
                      {'j_idt63':'j_idt63'},'');return false" style="..." 
                      href="#">Register 
            </a>
        </p>
        <div class="loginbuttons">
            <input id="loginBtn" type="submit" value="Login" name="loginBtn">
            <input id="cancellogin" type="button" value="Cancel">
        </div>
    </div>
</li> 
```

当你点击**showlogin**。我使用 jQuery 来显示它。喜欢

```
$('#showlogin').click(function(){
    var loginBox = $('.loginbox');
    loginBox.show();
    $('.loginbox fieldset input').focus();
    if (!loginBox.is(':hidden')) {
        validateUser();              
    }         
});

$('#cancellogin').click(function(){
    $('.loginbox').hide();        
});

function validateUser() {       
    $("#loginBtn").click(function(event){

        var userName =  $("#input").val();
        var password = $("#password_txt").val();

        if (userName == "") {                
            $.dialog({                
                message: "UserName must be entered",
                imageIcon: false,
                type: "error",
                okButtonID: "ok",
                okButtonValue: "OK"                  
            });
            return false;               
        } 
        return true;             
    }); //end of click              
} //end of validateUser() 
```

现在发生了什么假设我单击显示框的按钮

![图 1](../Images/c4567c3f72d45abae22beb4d220f23f4.png)

现在，如果我单击登录按钮，则会出现消息

![图 2](../Images/b36485457a440405ec15fabffd8f9109.png)

现在，如果我单击确定按钮。盒子消失。

![图 3](../Images/24f477c8b2d06e481255bc31e50b5569.png)

到这里为止一切正常。现在假设我通过单击取消按钮关闭登录表单。再次打开表格

![图 4](../Images/fad058d1303fb36c4efabdaa1877e970.png)

现在再次单击登录按钮。将出现该消息 ![图 5](../Images/4f77863207bb5b93ce822b61ced0665a.png)

但是现在这一次如果我点击 OK 按钮，那么覆盖消失但消息没有。为什么？我得到这样的东西

![在此处输入图像描述](../Images/b287bef241a75e3e3d02a736149f4c98.png)

为什么这一次它没有消失？我做错了什么？请帮忙？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:03:01.370

我认为问题与您的`validateUser()`功能有关。您会看到每次显示登录框时都会绑定一个新的单击处理程序，该处理程序包含将对话框显示到登录按钮的代码。

```
function validateUser() {       
    $("#loginBtn").click(function(event){
    ...
    });
} 
```

这意味着登录框第二次显示对话框实际上显示了两次。第三次对话框显示 3 次。您可能看不到这一点，因为您将其居中。如果您`alert()`在该行之后放置一个 Javascript 函数，`$.dialog.createUI = function (config) {`您将看到第二次显示登录信息，您会收到 2 个警报！有关此问题的示例，请参见[小提琴](http://jsfiddle.net/chrismoutray/kYmcE/)。

除非您的代码在*验证用户*函数中执行其他操作，否则我建议您删除此函数，而是在文档准备好时绑定点击处理程序。所以你最终会得到这样的结果：

```
$(document).ready(function () {

    $("#loginBtn").click(function (event) {

        var userName = $("#input").val();
        var password = $("#password_txt").val();

        if (userName == "") {
            $.dialog({
                message: "UserName must be entered",
                imageIcon: false,
                type: "error",
                okButtonID: "ok",
                okButtonValue: "OK"
            });
            return false;
        }
        return true;
    });

    $('#showlogin').click(function () {
        var loginBox = $('.loginbox');
        loginBox.show();
        $('.loginbox fieldset input').focus();
        // code to call validate user removed from here!
    });

    $('#cancellogin').click(function () {
        $('.loginbox').hide();
    });
}); 
```

# mysql - Sphinx：索引器显示空错误消息

> ID：12157787
> 
> 赞同：0
> 
> 时间：2012-08-28T10:56:08.280
> 
> 标签：mysql, linux, sphinx

我正在运行 Sphinx 0.9.9-release (r2117)。

当我运行从 MySQL 表中读取数据的索引器时，出现以下错误：

```
indexing index 'main'...
ERROR: index 'main': ., 888.4 MB
total 3629180 docs, 888448551 bytes
total 170.437 sec, 5212749 bytes/sec, 21293.30 docs/sec 
```

如您所见，索引器仅在 888.4 MB 处停止，没有真正的错误消息。即使我删除了完整的索引并尝试创建一个新索引，也会发生同样的情况。如果我这样做，新创建的索引文件是空的。

该系统现在工作了几个月，但表的行数从大约 1100 万增加到大约 2400 万。此外，它必须有非常大的 id 差距，因为最小 id 为 1，最大 id 大于 60 亿。我怀疑 MySQL 可能有问题，所以我创建了一个小脚本来执行所有“分页”查询，应该在索引期间由 Sphinx 执行：

```
SELECT ... FROM ... WHERE id >= $start AND id <= $end 
```

该脚本执行所有对 alle id 范围的查询，而不返回错误。

一些可能相关的 Sphinx 配置细节：

```
sql_query_range         = SELECT MIN(id), MAX(id) FROM offer
sql_range_step          = 10240

SELECT o.id, ....
            FROM offer o \
            LEFT JOIN customer c ON c.id = o.customer_id \
            WHERE ... AND o.id >= $start AND o.id <= $end AND o.last_update <= (SELECT last_full_index FROM index_update WHERE name = 'default') 
```

有什么方法可以增加索引器的详细程度吗？

有什么想法可以缩小问题的范围吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:18:00.610

0.9.9 现在真的很老了。从那时起，许多错误修复和改进。

只是升级可能会解决您的问题。

但它也为您带来了可能有用的 --print-queries。

甚至 --dump-rows - 但请确保您有一个很大的临时位置来放置它。出现错误时拖尾它可能会有所帮助。

要检查的另一件事是您的 mysql 服务器上的 wait_timeout。也许查询之间的时间太长了，mysql正在杀死连接

# graphics - “SIMD 队列”可能吗？

> ID：12157791
> 
> 赞同：1
> 
> 时间：2012-08-28T10:56:17.600
> 
> 标签：graphics, sse, simd

对不起，我不知道确切的词汇表。

我要实现的是一个类似队列的 SIMD 容器。

想象一下，我使用 SIMD 进行打包光线行进，即一次有四条光线行进距离场。有可能两条射线首先击中对象，然后我想从当前 SIMD 寄存器中提取它们并在寄存器中获取另外两条射线 ID。

我发现将一个 Ray ID 与剩余的 3-Ray-ID-tuple 寄存器组合起来非常困难，因为 SIMD 的 shuffle 操作不能以这种方式工作。

使用一些位移/位掩码操作是一种解决方案，但我想听听是否有另一种优雅的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:38:41.720

这不是 SIMD 的工作原理，抱歉。

您可以并行运行 4 个相同的计算没有问题。

但是，在光线行进中对高度场进行采样已经存在一些问题。4 条不同的光线一次需要不同的样本，除非这是一个非常人为的特殊情况（平行光线，以 1 texel 偏移量间隔，并且平行于*u*或*v*）。换句话说，您需要一个收集操作。

大多数当前架构（您没有指定一个）不支持分散/聚集，例如从高度图中读取 4 个任意位置到一个 SIMD 寄存器中。您当然可以这样做，但是它将是 4 次读取和 4 次随机播放，并且会比一起跳过 SIMD 慢。

您也不能在任意时间轻松地交换任意数据，并在 SIMD 寄存器的一半中继续使用其他代码，同时在另一半执行不同的操作（计算的第一部分）。*SIMD 就是不能那样工作*。
在 SIMD 操作中，所有数据同时执行相同的指令（或者更确切地说，指令只执行一次，但在“多条数据”上执行）。此外，SIMD 和分支是一种“不可行”。分支不仅效率低下，而且还会影响每条数据，而不仅仅是您想要的数据。
如果有的话，一个人使用 SIMD 条件移动，或者一个人只是继续计算整个批次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T01:28:22.993

您是否考虑过其他 SSE 命令仅加载低或高元素？

```
movss: copy a single floating-point data
movlps: copy 2 floating-point data (low packed)
movhps: copy 2 floating-point data (high packed)
movaps: copy aligned 4 floating-point data (fast)
movups: copy unaligned 4 floating-point data (slow)
movhlps: copy 2 high elements to low position
movlhps: copy 2 low elements to high position 
```

[http://www.songho.ca/misc/sse/sse.html](http://www.songho.ca/misc/sse/sse.html)

或者，如果您想使用 SHUFPS，我可以导出一个 Windows .exe 工具，它可以帮助您了解所有洗牌的可能性。

另外，查看[AVX SIMD](http://en.wikipedia.org/wiki/Advanced_Vector_Extensions)；它仅在最新的 Intel 和 AMD CPU 上可用，但允许一次处理 8 个 32 位浮点数据元素。

# simple.data - Simple.Data.SimpleQuery

> ID：12157796
> 
> 赞同：0
> 
> 时间：2012-08-28T10:56:28.250
> 
> 标签：simple.data

我是 .Net Dynamics 的新手，第一次在一个小项目中使用 Simple.Data。我需要查询数据并将返回的记录分配给 DropDownList，但我在我的 ddl 中获得了“Simple.Data.SimpleQuery”项目的列表。代码片段如下。

```
 var show_crm = Database.Open();
    var sites = show_crm.tblSites.Select(show_crm.tblSites.SiteID, show_crm.tblSites.SiteName);
    DropDownList1.DataSource = sites;
    DropDownList1.DataValueField = sites.SiteID;
    DropDownList1.DataTextField = sites.SiteName;
    DropDownList1.DataBind(); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:03:28.097

.Select 只是创建一个查询，您需要通过调用 ToList() 来运行它。此外，您可能需要将 DataValueField 和 DataTextField 属性设置为属性名称。

```
var show_crm = Database.Open();
var sites = show_crm.tblSites.Select(show_crm.tblSites.SiteID, show_crm.tblSites.SiteName);
DropDownList1.DataSource = sites.ToList<Site>();
DropDownList1.DataValueField = "SiteID";
DropDownList1.DataTextField = "SiteName";
DropDownList1.DataBind(); 
```

我从未在 Web 窗体项目中使用过 Simple.Data，因此我不能 100% 确定数据绑定将与动态属性一起使用。如果您仍然有问题，请对此答案发表评论。

# ios - 使用适用于 iOS 的 Facebook SDK 3.0 检索 facebook 朋友的家乡、位置和生日

> ID：12157798
> 
> 赞同：2
> 
> 时间：2012-08-28T10:56:31.823
> 
> 标签：ios, facebook, location, friend

我正在尝试使用适用于 iOS 的 FB SDK 获取我朋友的家乡和位置。但我无法检索朋友的位置和家乡。这是我的代码

```
 - (IBAction)btnFBLoginTapped:(id)sender {

    NSArray *permissions = [[NSArray alloc]initWithObjects:@"email",@"user_birthday",@"user_hometown",@"user_location",@"friends_birthday",@"friends_location",@"friends_hometown", nil];

    [FBSession openActiveSessionWithPermissions:permissions allowLoginUI:YES
                              completionHandler:^(FBSession *session,
                                                  FBSessionState status,
                                                  NSError *error) {
                                  // session might now be open.
                                  if (session.isOpen) {
                                      FBRequest *me = [FBRequest requestForMe];
                                      [me startWithCompletionHandler: ^(FBRequestConnection *connection, 
                                                                        NSDictionary<FBGraphUser> *my,
                                                                        NSError *error) {
                                          NSLog(@"My dcitionary:- %@",my);
                                          NSLog(@"Sessionkey:- %@",session.accessToken);
                                          // Friend request

                                          FBRequest *friendRequest = [FBRequest requestForMyFriends];

                                          [friendRequest startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                                              NSDictionary *resultDictionary = (NSDictionary *)result;

                                              NSArray *data = [resultDictionary objectForKey:@"data"];

                                              NSLog(@"Data:- %@",data);

                                              for (NSDictionary *dic in data) {
                                                  NSLog(@"ID:- %@",[dic objectForKey:@"id"]);
                                              }
                                          }];
                                      }];
                                  }
                              }];
} 
```

我还需要检索朋友的生日。但我也无法检索生日。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T21:24:53.880

`data`是一个数组`FBGraphObject<FBGraphUser>`

```
[friendRequest startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    NSArray *data = [result objectForKey:@"data"];

    for (FBGraphObject<FBGraphUser> * user in data) {
        NSLog(@"%@", [user first_name]);
    }
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T00:43:59.640

此时检查您的逻辑

```
....
[friendRequest startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
     NSDictionary *resultDictionary = (NSDictionary *)result; 
```

您的结果应该是 NSArray，而不是 NSDictionary。

仔细检查结果的另一件事是在 Graph API 资源管理器中放置一个类似的查询：[https ://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

您可以将我/朋友放在 Graph API 资源管理器中提示：选择您在 Graph API 资源管理器的应用程序下拉列表中设置的相同应用程序。

# c# - 仅在 C# 中将字符串转换为日期时间格式和日期

> ID：12157799
> 
> 赞同：3
> 
> 时间：2012-08-28T10:56:33.057
> 
> 标签：c#, datetime

如何将字符串转换为日期时间。我有以下字符串：

```
08/19/2012 04:33:37 PM 
```

我想将上面的字符串转换为以下格式日期：

```
MM-dd-yyyy 
```

和

```
dd/MM/yyyy HH:mm:ss 
```

我一直在尝试使用不同的技术进行转换并使用以下方法：

```
DateTime firstdate = DateTime.Parse(startdatestring); 
```

它显示以下错误

> *字符串未被识别为有效的日期时间。*

我已经搜索过它并且无法获得确切的解决方案，并且还尝试使用不同的日期时间格式。请问如何将上面的字符串转换为上面的日期格式

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T11:00:20.180

您需要先解析字符串 - 您错过了 AM/PM 指示符。查看MSDN上的[自定义日期和时间格式字符串：](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

```
DateTime firstdate = DateTime.ParseExact(startdatestring, 
                                         "MM/dd/yyyy hh:mm:ss tt",
                                         CultureInfo.InvariantCulture); 
```

然后你可以格式化为一个字符串：

```
var firstDateString = firstdate.ToString("MM-dd-yyyy"); 
```

您可能还想这样做`InvariantCulture`：

```
var firstDateString = firstdate.ToString("MM-dd-yyyy", 
                                         CultureInfo.InvariantCulture); 
```

# javascript - GWT - 允许在两个叠加的画布之间传播鼠标事件

> ID：12157800
> 
> 赞同：3
> 
> 时间：2012-08-28T10:56:34.010
> 
> 标签：javascript, html, gwt, mouseevent, html5-canvas

我有一个 GWT 应用程序，其中包含两个叠加的画布实例，即屏幕上的位置相同，一个在另一个之上。（有关如何完成的示例，请参见[http://dev.opera.com/articles/view/html5-canvas-painting](http://dev.opera.com/articles/view/html5-canvas-painting)、[http://html5.litten.com/using-multiple-html5-canvases-as-layers](http://html5.litten.com/using-multiple-html5-canvases-as-layers) .我的代码更类似于第二个链接）。

对于下部画布，我实现了各种鼠标事件处理程序——mouseUp、mouseDown、mouseMove 等。我没有为上部画布实现这样的处理程序。此外，如果这有什么不同的话，上面的画布大部分是透明的。

两个画布具有相同的父级（一个 div 元素）。

我的问题是下部画布的鼠标事件处理程序不执行。

我的猜测是上层画布捕获了事件，并且它们不会传播到下层画布。你知道解决这个问题的方法吗？有没有办法告诉 GWT 小部件“吞下”鼠标事件？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T18:35:30.570

您可以使用 GWT 自定义事件（[GWT Custom Event](https://stackoverflow.com/questions/2951621/gwt-custom-events)）来解决这个问题。将 mouseUp、mouseDown、mouseMove 处理程序附加到上层画布，并在下层画布上实现 GWT 自定义事件处理程序。现在，当触发 MouseUp 或 MouseDown 事件时上部画布触发一个自定义事件，该事件将被下部画布捕获。希望这会有所帮助

# perl - Catalyst MVC 使用单个表单保存多个对象

> ID：12157801
> 
> 赞同：3
> 
> 时间：2012-08-28T10:56:36.317
> 
> 标签：perl, catalyst

我正在使用带有 HTML::FormHandler 作为表单处理器的 Catalyst Perl MVC 框架。

有什么方法可以创建多个对象并使用单一表单将它们保存到适当的单独表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:56:45.203

在花了一些时间阅读文档和 IRC 帮助后，我想出了如何去做。这很简单。

假设我们有 2 个相关表：“帐户”和“用户”。并且“帐户”有许多“用户”，这种关系称为“用户”。

控制器 Account.pm 中的代码保持不变（请记住，我们使用 HTML::FormHandler 来处理表单并创建新对象）：

```
sub register : Chained('base') :PathPart('register') :Args(0) {
    my ($self, $c ) = @_;
    my $account = $c->model('DB::Account')->new_result({});
    return $self->form_create($c, $account);
}
sub form_create {
    my ( $self, $c, $account ) = @_;
    my $form = MyApp::Form::Account->new();
    $c->stash( template => 'account/form.tt2', form => $form );
    $form->process( item => $account, params => $c->req->params );
    return unless $form->validated;
} 
```

我们所做的只是在我们的 lib/MyApp/Form/Account.pm 中使用[http://metacpan.org/pod/HTML::FormHandler::Field::Repeatable](http://metacpan.org/pod/HTML%3a%3aFormHandler%3a%3aField%3a%3aRepeatable)：

```
package MyApp::Form::Account;

use HTML::FormHandler::Moose;
extends 'HTML::FormHandler::Model::DBIC';
use namespace::autoclean;

has '+item_class' => ( default => 'Account' );
has_field 'organization';
# other fields ...

# User Part Form
has_field 'users' => ( type => 'Repeatable' ); # 'users' is our relationship name!
has_field 'users.first';
has_field 'users.last';
# and so on...
has_field 'submit' => ( type => 'Submit', value => 'Submit' );
__PACKAGE__->meta->make_immutable;
1; 
```

提交后，我们得到新创建的 'account' 和 'user' 对象，其中 'user' 已经插入了相应的 'account_id' :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T17:23:08.513

1.  表单提交
2.  参数已验证

    $form->进程()

3.  数据会根据需要插入到表中。

    $rec = $c->model(table_1)->create(valid_data);
    $rec->create_related('relationship_name', related_data);

我不知道让 DBIC 自动执行两个插入的方法。但这并不是说不存在。我只是在 FormHandler::DBIC 文档中没有看到任何内容。

# sql - 如果条目不存在，则使用 PostgreSQL 进行多次插入

> ID：12157805
> 
> 赞同：3
> 
> 时间：2012-08-28T10:56:51.167
> 
> 标签：sql, postgresql, common-table-expression, sql-insert

如果条目不存在，我想将数据插入多个表中。

就我而言，我有一张餐厅桌、一张位置桌、一张`foodtype`桌子和一些辅助桌`restaurant_location`，例如 和`restaurant_foodtype`。现在，如果条目不存在，我想插入一个包含位置和食物类型信息的新餐厅条目。

所以像：

```
IF NOT (select 1 from restaurant where name='restaurantname') THEN
 INSERT INTO restaurant(x,y) VALUES (valuex,valuey);
 INSERT INTO restaurant_location(rest_id,..) VALUES (rest_id,..);
 INSERT INTO restaurant_foodtype(rest_id,..) VALUES (rest_id,..);
 ...
END IF 
```

如何使用简单的 SQL 做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T13:52:40.920

在 Postgres **9.1 或更高版本**中，您可以使用[**数据修改 CTE**](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)来实现快速、安全、简单和优雅：

```
WITH x AS (
   INSERT INTO restaurant(name, x, y)
   SELECT 'restaurantname', valuex, valuey
   WHERE  NOT EXISTS (SELECT 1 FROM restaurant WHERE name = 'restaurantname')
   RETURNING rest_id     -- returns auto-generated id (from sequence)
   )
, y AS (
   INSERT INTO restaurant_location(rest_id, ...)
   SELECT rest_id, ...
   FROM   x              -- only produces rows after a successful INSERT
   )

   --- more chained INSERTs here?

INSERT INTO restaurant_foodtype(rest_id, ...)
SELECT rest_id, ...
FROM   x; 
```

第一个`INSERT`仅在未找到“restaurantname”时执行。如果多个查询应该在同一个实例中尝试相同的情况，则存在一个非常小的竞争条件。如果你有一个`UNIQUE`限制`restaurant.name`（就像你应该从你的描述中判断的那样），可能发生的最糟糕的情况是，在并发查询中，只有第一个会成功，而其他查询会返回一个唯一的违规（什么都不做）。但是，您可能永远不会看到这种情况，因为它不太可能发生。

该`RETURNING`子句返回自动生成的`rest_id`- 我假设`rest_id`是一个串行列。

以下`INSERT`查询仅在第一个成功的情况下生成行。

以朴素结束这个系列`INSERT`。

使用 PostgreSQL 8.1，我会编写一个 plpgsql 函数来实现相同的目的。
但是，实际上，您最好升级到[当前版本](http://www.postgresql.org/support/versioning/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:01:41.367

我只是在脑海中写了这个，但如果你必须用简单的 sql 来做，这应该是这个想法。

```
insert into 
    restaurant(x, y)
values
    select valuex, valuey 
    from dual
    where
      not exists(
        select 1 from restaurant where name = 'restaurantname') 
```

* * *

**编辑：** 同样，我无法解析它，但您可能可以使用 WITH 子句：

```
with validation as(
  select 1 from restaurant where name = 'restaurantname'
)
insert into 
    restaurant(x, y)
values
    (
     select value1x, value1y 
     from dual
     where
       validation.v = 1),
    (
     select value2x, value2y 
     from dual
     where
       validation.v = 1) 
```

# android - 在 Android 中对 SparseArray 进行排序

> ID：12157807
> 
> 赞同：7
> 
> 时间：2012-08-28T10:57:02.387
> 
> 标签：android

如何排序[android.util.SparseArray](http://developer.android.com/reference/android/util/SparseArray.html)？例如，我有 SparseArray：
1 - 2.33
5 - 1.5
结果：
5 - 1.5
1 - 2.33

谢谢！！！

-- 已编辑

我用过地图。感谢帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T20:44:08.180

目前尚不清楚您是否请求了键或值排序顺序......

所以请注意：

[二进制搜索仅适用于已排序的数据，而 SparseArray 根据源](https://github.com/android/platform_frameworks_base/blob/android-sdk-4.0.3_r1/core/java/android/util/SparseArray.java#L336)对其排序 (!) 键数组使用二进制搜索。所以键已经排序并且不会接受不同的顺序，比如值的顺序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-26T12:45:13.910

对@Karussell 的即时回答的一个小修改是，该[`valueAt()`](https://developer.android.com/reference/android/util/SparseArray.html#valueAt(int))方法的文档本身也建议了一个排序顺序（在键上）：

> [...]`valueAt(0)`将返回与最小键关联的`valueAt(size()-1)`值，并将返回与最大键关联的值。

对该方法给出了类似的描述[`keyAt()`](https://developer.android.com/reference/android/util/SparseArray.html#keyAt(int))。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-11T21:55:37.090

您可以使用树图。它保持条目按其键排序（键必须实现 Comparable）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T11:14:18.670

[从SparseArray.java](http://www.netmite.com/android/mydroid/1.0/frameworks/base/core/java/android/util/SparseArray.java)的底层源代码来看，你不能简单地通过调用一个方法来做到这一点。所有 a`SpareArray`都是两个 Java 语言数组，一个是 type `int`，一个是 type `Object`。这些数组是私有实例变量，没有反射就不能引用它们（这很危险，因为它们的名称可能会改变）。一个好的解决方案可能是本地化`SpareArray`应用程序中的代码并`sort`使用普通 Java 技术添加一个方法，即[Array.sort](http://www.leepoint.net/notes-java/data/arrays/70sorting.html)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-11-16T13:42:19.340

**更新：**

```
private SparseIntArray void sortMap(SparseIntArray unsorted) {
    SparseIntArray sortedSparseIntArray = new SparseIntArray();
    while (unsorted.size() > 0) {
        int min = Integer.MAX_VALUE;
        int minIndex = 0;
        for (int i = 0; i < unsorted.size(); i++) {
            if (unsorted.keyAt(i) <= min) {
                min = unsorted.keyAt(i);
                minIndex = i;
            }
        }
        sortedSparseIntArray.put(min, unsorted.get(min));
        sFactorsMap.removeAt(minIndex);
    }
    return sortedSparseIntArray;
} 
```

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2012-08-28T11:18:32.497

将您的键/值收集到列表中。

```
 List<Integer>keys = Lists.newArrayList();
                List<Integer>vals = Lists.newArrayList();
    SparseArray<Integer>arr;
    for(int i =0; i < arr.size();i++){
    keys.add(arr.keyAt(i));
    values.add(arr.valueAt(i));
    }
    Collections.sort(keys);// sort
    Collections.sort(vals); 
    // then fill your array again.
    arr.clear();
    //...
    arr.put() 
```

# java - 如何使用 eclipse 在云上开发？

> ID：12157810
> 
> 赞同：0
> 
> 时间：2012-08-28T10:57:06.693
> 
> 标签：java, android, eclipse, cloud

我希望能够从 Eclipse 上的任何计算机访问我的代码。可能吗？

编辑：我正在使用 java 为 android 开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:05:10.273

我只是将我的 Workspaces 保存在 Dropbox 中，以及通过 Mercurial 备份到异地服务的正常过程。对我来说效果很好。

您可以轻松地将 Dropbox 和 Mercurial 替换为众多免费替代品中的任何一种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:16:30.833

一个专业的解决方案是使用像 Subversion、CVS 或 Git 这样的源代码控制系统。有几个发行商可以免费获得这样的存储库。一个绝对不是专业的解决方案，但不那么复杂，所以这对你来说可能更好，是将你的 eclipse 项目托管在 DropBox/Google Drive/Skydrive 之类的东西中。

既然您说过，您希望能够从所有设备上处理代码，但并不是说有严格的人同时处理代码，我建议将您的项目保存在 DropBox 之类的东西中，因为它真的真的更容易，更简单。当您可能会遇到几个人将在源代码上工作时，您需要一个专业的解决方案。几乎所有这些专业的解决方案都可以使用 eclipse 插件，因此您可以从 eclipse 中更新/提交/合并您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T15:24:00.463

虽然设置云服务帐户和在您的计算机之间同步的文件夹要*容易*得多，但使用像[Git这样的](http://git-scm.com/)[源代码控制管理](http://en.wikipedia.org/wiki/Source_Control_Management)[系统要](http://en.wikipedia.org/wiki/Comparison_of_revision_control_software)*好得多*。这样做的原因是，SCM 系统为您的开发历史提供了每个提交更改的消息[，](http://en.wikipedia.org/wiki/Commit_%28data_management%29#Revision_control)您可以看到更改之间的差异等等。

根据您的评论：

> 我想要一些东西，比如你如何在任何 chrome 浏览器上访问你的个人书签、设置等

您可能希望通过您选择的任何云服务来同步您的 eclipse 和工作区目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T11:05:24.137

尝试[源代码控制管理](http://en.wikipedia.org/wiki/Source_Control_Management)系统。您会发现几个 Eclipse 插件，例如[EGit](http://marketplace.eclipse.org/content/egit-git-team-provider)与[GitHub的结合](https://github.com/)

# objective-c - 我怎样才能使这个库适应故事板？

> ID：12157811
> 
> 赞同：0
> 
> 时间：2012-08-28T10:57:10.110
> 
> 标签：objective-c, ios, cocoa-touch, storyboard, xib

我找到了一个我想使用的标签栏库，但需要为我的应用程序使用故事板。

在看到这个库可以与 xibs 一起使用后，我自己决定将其调整为与我的故事板应用程序一起使用。但是，我无法让它工作。

该库可以在这里找到：http: [//www.cocoacontrols.com/controls/tbtabbar](http://www.cocoacontrols.com/controls/tbtabbar)

那么如何调整库以使其与情节提要一起使用，如果无法做到，我该如何在主窗口中使用 uinavigationcontroller，因为我无法让它也能正常工作。

谢谢

编辑：这是交换视图控制器的代码：

```
 -(void)switchViewController:(UIViewController *)viewController {
UIView *currentView = [self.view viewWithTag:SELECTED_VIEW_CONTROLLER_TAG];
[currentView removeFromSuperview];

viewController.view.frame = CGRectMake(0,0,self.view.bounds.size.width, self.view.bounds.size.height-(tabBar.frame.size.height));

viewController.view.tag = SELECTED_VIEW_CONTROLLER_TAG;

[self.view insertSubview:viewController.view belowSubview:tabBar];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:40:30.280

我完全修改了我的答案并创建了一个示例项目，以帮助确保我第二次不会错过任何东西。

您应该能够在 TBViewController 的故事板子类中创建所有视图控制器（带有标识符）。这可以通过单击您的 UIViewController、转到身份检查器（cmd alt 3）然后输入“TBViewController”来完成。如果一切正常，它应该自动完成。下一步是为标签控制器创建标签。每个选项卡需要 3 个值才能添加到 TBTabBar 控制器。

1.  正常图像
2.  突出显示的图像
3.  与按钮关联的视图控制器

下面是我创建的一个自定义方法，用于帮助实例化这些接受所有三个要求作为参数的 TBTabButton 对象：

```
-(TBTabButton*)TBTabButtonWithStoryBoardID:(NSString*)identifier andButtonImageNamed:(NSString*)normalImageTitle andHighlightedImageNamed:(NSString*)highlightImageTitle{

     //Create the tab bar and assign normal image
     TBTabButton *tabBarButtonItem = [[TBTabButton alloc] initWithIcon:[UIImage imageNamed:normalImageTitle]];

     //Assign Highlighted image
     tabBarButtonItem.highlightedIcon = [UIImage imageNamed:highlightImageTitle];

     //Fetch the subclassed view controller from storyboard and assign as viewController
     tabBarButtonItem.viewController = [self TBViewControllerFromStoryboardWithIdentifier:identifier];

     return tabBarButtonItem;
} 
```

可以使用下一个代码块中的方法从情节提要中检索视图控制器。

```
-(TBViewController*)TBViewControllerFromStoryboardWithIdentifier:(NSString*)identifier{

    //instantiateViewControllerWithIdentifier returns a UIViewController Object
    UIViewController *viewController = [self.storyboard instantiateViewControllerWithIdentifier:identifier];

    //check if UIViewController is a subclassed TBViewController
    if([viewController isKindOfClass:[TBViewController class]]){

        //if it is then send it back as the correct type
        return (TBViewController*)viewController;
    }
    return nil;
} 
```

现在你有一个方法可以为你创建“准备添加”的 TBTabButton 对象。使用此方法为您的标签栏创建每个所需的按钮。一旦你实例化了这些，你必须将它们添加到一个 NSArray 中，以便它可以作为创建 TBTabBar 对象的参数传递。剩下的就是将 UITabBar 对象添加到视图并将其设置为基于默认值显示。

```
-(void)setTBTabBar{

    //Instantiate your tab TBTabButtons

    TBTabButton *tab1 = [self TBTabButtonWithStoryBoardID:@"tab1"
                              andButtonImageNamed:@"favoritesIcon.png"
                               andHighlightedImageNamed:@"favoritesIconHighlighted.png"];

    TBTabButton *tab2 = [self TBTabButtonWithStoryBoardID:@"tab2"
                              andButtonImageNamed:@"mentionsIcon.png"
                              andHighlightedImageNamed:@"mentionsIconHighlighted.png"];

    TBTabButton *tab3 = [self TBTabButtonWithStoryBoardID:@"tab3"
                              andButtonImageNamed:@"messagesIcon.png"
                              andHighlightedImageNamed:@"messagesIconHighlighted.png"];

    //Add them to an array
    NSArray *arrayOfTBViewControllers = [NSArray arrayWithObjects: tab1, tab2, tab3, nil];

    //Instantiate your TBTabBar object with your array of TabButtons. Set this view as delegate
    tabBar = [[TBTabBar alloc] initWithItems:arrayOfTBViewControllers];
    tabBar.delegate = self;

    //Add it to the view and set it to show defaults
    [self.view addSubview:tabBar];
    [tabBar showDefaults];
} 
```

此方法必须在您的 -(void)viewDidLoad 方法中调用；

只有其他需要做的事情是：

1.  在 _prefix.pch 文件中定义 SELECTED_VIEW_CONTROLLER_TAG 98456345
2.  通过在编译源下添加“-fno-objc-arc”标志来关闭导入文件的 ARC

希望这可以解决您遇到的任何问题。这似乎是一件可能有点令人困惑的事情。只要您正确遵循自述文件中的其他步骤，我相信这对您来说应该很有效。

如果这不起作用，请告诉我，我可以尝试发布一个链接，指向我为上面的代码制作的工作示例。

# opencv - Flann 函数未解决的外部

> ID：12157813
> 
> 赞同：7
> 
> 时间：2012-08-28T10:57:25.877
> 
> 标签：opencv

我正在尝试运行 OpenCV 中的教程示例之一。它是关于使用基于 Flann 的关键点匹配来查找已知对象。可以在[Features2D+Homography 上找到代码来查找已知对象](http://opencv.itseez.com/doc/tutorials/features2d/feature_homography/feature_homography.html#feature-homography)。

我知道你会问“你链接图书馆了吗？” 或类似的问题。是的，我已经使用 OpenCV 3 周了，其中包含几乎所有库的各种示例。直到今天都没有问题。

所以我将这些库依赖项添加到 Visual Studio 的链接器输入设置中。包含目录也可以正常工作。

```
C:\OpenCV2.4\lib\opencv_core242d.lib
C:\OpenCV2.4\lib\opencv_highgui242d.lib
C:\OpenCV2.4\lib\opencv_video242d.lib
C:\OpenCV2.4\lib\opencv_ml242d.lib
C:\OpenCV2.4\lib\opencv_legacy242d.lib
C:\OpenCV2.4\lib\opencv_imgproc242d.lib
C:\OpenCV2.4\lib\opencv_objdetect242d.lib
C:\OpenCV2.4\lib\opencv_flann242d.lib
C:\OpenCV2.4\lib\opencv_nonfree242d.lib
C:\OpenCV2.4\lib\opencv_calib3d242d.lib 
```

我得到的错误是链接器错误。它无法解析 Flann 的函数。

```
1>------ Build started: Project: flannMatch, Configuration: Debug Win32 ------
1>flannMatch.obj : error LNK2019: unresolved external symbol "void __cdecl cv::drawMatches(class cv::Mat const &,class std::vector<class cv::KeyPoint,class std::allocator<class cv::KeyPoint> > const &,class cv::Mat const &,class std::vector<class cv::KeyPoint,class std::allocator<class cv::KeyPoint> > const &,class std::vector<struct cv::DMatch,class std::allocator<struct cv::DMatch> > const &,class cv::Mat &,class cv::Scalar_<double> const &,class cv::Scalar_<double> const &,class std::vector<char,class std::allocator<char> > const &,int)" (?drawMatches@cv@@YAXABVMat@1@ABV?$vector@VKeyPoint@cv@@V?$allocator@VKeyPoint@cv@@@std@@@std@@01ABV?$vector@UDMatch@cv@@V?$allocator@UDMatch@cv@@@std@@@4@AAV21@ABV?$Scalar_@N@1@4ABV?$vector@DV?$allocator@D@std@@@4@H@Z) referenced in function _main
1>flannMatch.obj : error LNK2019: unresolved external symbol "public: void __thiscall cv::DescriptorMatcher::match(class cv::Mat const &,class cv::Mat const &,class std::vector<struct cv::DMatch,class std::allocator<struct cv::DMatch> > &,class cv::Mat const &)const " (?match@DescriptorMatcher@cv@@QBEXABVMat@2@0AAV?$vector@UDMatch@cv@@V?$allocator@UDMatch@cv@@@std@@@std@@0@Z) referenced in function_main
1>flannMatch.obj : error LNK2019: unresolved external symbol "public: __thiscall cv::FlannBasedMatcher::FlannBasedMatcher(class cv::Ptr<struct cv::flann::IndexParams> const &,class cv::Ptr<struct cv::flann::SearchParams> const &)" (??0FlannBasedMatcher@cv@@QAE@ABV?$Ptr@UIndexParams@flann@cv@@@1@ABV?$Ptr@USearchParams@flann@cv@@@1@@Z) referenced in function _main
1>flannMatch.obj : error LNK2019: unresolved external symbol "public: void __thiscall cv::DescriptorExtractor::compute(class cv::Mat const &,class std::vector<class cv::KeyPoint,class std::allocator<class cv::KeyPoint> > &,class cv::Mat &)const " (?compute@DescriptorExtractor@cv@@QBEXABVMat@2@AAV?$vector@VKeyPoint@cv@@V?$allocator@VKeyPoint@cv@@@std@@@std@@AAV32@@Z) referenced in function _main
1>flannMatch.obj : error LNK2019: unresolved external symbol "public: void __thiscall cv::FeatureDetector::detect(class cv::Mat const &,class std::vector<class cv::KeyPoint,class std::allocator<class cv::KeyPoint> > &,class cv::Mat const &)const " (?detect@FeatureDetector@cv@@QBEXABVMat@2@AAV?$vector@VKeyPoint@cv@@V?$allocator@VKeyPoint@cv@@@std@@@std@@0@Z) referenced in function _main
1>flannMatch.obj : error LNK2019: unresolved external symbol "public: virtual __thiscall cv::DescriptorMatcher::~DescriptorMatcher(void)" (??1DescriptorMatcher@cv@@UAE@XZ) referenced in function "public: virtual __thiscall cv::FlannBasedMatcher::~FlannBasedMatcher(void)" (??1FlannBasedMatcher@cv@@UAE@XZ)
1>flannMatch.obj : error LNK2019: unresolved external symbol "public: virtual __thiscall cv::DescriptorMatcher::DescriptorCollection::~DescriptorCollection(void)" (??1DescriptorCollection@DescriptorMatcher@cv@@UAE@XZ) referenced in function "public: virtual __thiscall cv::FlannBasedMatcher::~FlannBasedMatcher(void)" (??1FlannBasedMatcher@cv@@UAE@XZ)
1>flannMatch.obj : error LNK2019: unresolved external symbol "public: virtual __thiscall cv::FeatureDetector::~FeatureDetector(void)" (??1FeatureDetector@cv@@UAE@XZ) referenced in function "public: virtual __thiscall cv::Feature2D::~Feature2D(void)" (??1Feature2D@cv@@UAE@XZ)
1>flannMatch.obj : error LNK2019: unresolved external symbol "public: virtual __thiscall cv::DescriptorExtractor::~DescriptorExtractor(void)" (??1DescriptorExtractor@cv@@UAE@XZ) referenced in function "public: virtual __thiscall cv::Feature2D::~Feature2D(void)" (??1Feature2D@cv@@UAE@XZ) 
```

由于此处的一个问题，我也知道 surf and sift 已移至非免费。乍一看，我认为这可能是因为我有两个版本的 OpenCV（2.2 和 2.4），因此它有所作为。所以我删除了 2.2 并尝试运行另一个程序。它工作正常，但这个错误仍然没有消失。

所以我的问题是，我在这里缺少什么？是否有另一个库依赖项？什么是我看不见的？任何帮助表示赞赏。

--**编辑**--

我怎么看不到？我真的很抱歉发布这样一个简单的问题。我觉得自己好傻。我忘记添加此依赖项。

```
C:\OpenCV2.4\lib\opencv_features2d242d.lib 
```

我不认为有人会再次错过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T06:12:39.813

我怎么看不到？我真的很抱歉发布这样一个简单的问题。我觉得自己好傻。我忘了添加这个依赖。

```
C:\OpenCV2.4\lib\opencv_features2d242d.lib 
```

我不认为有人会再次错过。

# java - Hibernate SQL 生成后表或视图不存在

> ID：12157815
> 
> 赞同：0
> 
> 时间：2012-08-28T10:57:30.707
> 
> 标签：java, oracle, hibernate

我当前的 Hibernate 项目有一些映射问题。但首先，我会告诉我我正在使用：

```
NetBeans 7.1.1
Java
JSF2
Oracle 10g
Apache Tomcat 7.0.22
Hibernate 3.2.1 
```

我不得不说所有的映射类都是由*Hibernate 逆向工程向导*使用*Annotations*生成的，我的意思是，这些类是从数据库中的表构建的。我可以正常运行程序，除了关于在 OneToMany 关系中插入的部分，这个：

**课程**

*掌握*

```
 @Entity
  @Table(name = "EXP_EXPEDIENTES")
  public class ExpExpedientes implements Serializable {

  @Id
  @SequenceGenerator(name = "seq", sequenceName = "EXP_SEQ") //Triggers are disabled so Hibernate can manage the sequence generation.
  @GeneratedValue(generator = "seq")
  @Column(name = "ID_EXP")
  private long idExpediente;

  @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
  private Set<ExpInstrucciones> expInstrucciones;    

  //more fields
  //getters & setters 
```

*细节*

```
 @Entity
  @Table(name = "EXP_INSTRUC")
  public class ExpInstrucciones implements Serializable {

  @Id
  @SequenceGenerator(name="seq",sequenceName="EXP_SEQ")
  @GeneratedValue(generator="seq")
  @Column(name = "ID_INS")
  private long idInstruccion;

  @ManyToOne(fetch=FetchType.LAZY)
  @JoinColumn(name="ID_EXP", nullable=false)
  private ExpExpedientes expExpedientes;

  //more fields
  //getters & setters 
```

这样，我可以制作一个 ExpExpediente 对象和几个 ExpInstrucciones 对象。在分配一些值并尝试保存它们之前，我这样做：

```
 /* Previously, I've created these objects:
   * expInst_1 = new ExpInstruccines();
   * expInst_2 = new ExpInstrucciones();
   */ 

  expInst_1.setExpExpedientes(expExpediente);           
  expInst_2.setExpExpedientes(expExpediente);

  expExpediente.getExpInstrucciones().add(expInst_1);
  expExpediente.getExpInstrucciones().add(expInst_2);

  ExpedienteDAO.save(expExpediente); 
```

DAO 类中的*保存*方法只包含在*session.save(expediente)*上。这就是我的问题所在。阅读Hibernate生成的sql，发现当Hibernate尝试执行下一句时出现**ORA-00942: table or view doesn't exist错误：**

```
 insert 
  into
      EXP_EXPEDIENTES_EXP_INSTRUC
      (EXP_EXPEDIENTES_ID_EXP, expInstrucciones_ID_INS) 
  values
      (?, ?) 
```

我认为该错误与表**EXP_EXPEDIENTES_EXP_INSTRUC**有关，该表显然在数据库中不存在。事实上，正如我已经说过的，映射是从数据库生成的。

现在，我的问题是：我应该创建那个表吗？或者所有这些问题都是由于配置错误问题造成的？我真的不知道该怎么做，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:56:10.830

您的映射应如下所示：

```
@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, 
   mappedBy = "expExpedientes")   
private Set<ExpInstrucciones> expInstrucciones; 
```

双向关系的两侧应使用侧`mappedBy`属性连接，否则您将在and`@OneToMany`之间有两个单向关系，其中一个使用外键实现，另一个使用连接表（默认情况下）。`ExpExpedientes``ExpInstrucciones`

*我猜这是Hibernate Reverse Engeneering Wizard*的错误，您也应该检查其他关系是否存在此问题。

# java - Selenium RC 中的背景颜色？

> ID：12157816
> 
> 赞同：0
> 
> 时间：2012-08-28T10:57:33.193
> 
> 标签：java, selenium

我是 Selenium 的新手。我想断言特定屏幕的背景颜色。如何使用 Selenium rc 断言背景颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:11:44.220

您可以通过从正文中检索背景颜色来获取它。应该是这样的：

```
WebElement body = driver.findElement(By.cssSelector("body"));
String color = body.getAttribute("bgcolor"); 
```

# java - java：错误：无法找到或加载主类dailyreport.Add_employee

> ID：12157819
> 
> 赞同：0
> 
> 时间：2012-08-28T10:58:01.920
> 
> 标签：java

我正在研究 java。我在运行名为“ `Add_employee`”的表单时遇到错误`Could not find or load main class dailyreport.Add_employee`。我不知道为什么会出现这个错误。

请问谁能帮我解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:16:54.687

您的类`Add_employee`应该在包中`dailyreport`并包含`public static void main(String args[])`方法

```
package dailyreport;

public class Add_employee 
{
   public static void main(String args[])
   {
      //...
   }
} 
```

# quartz-scheduler - Quartz Scheduler trigger 4 times a day

> ID：12157820
> 
> 赞同：1
> 
> 时间：2012-08-28T10:58:06.737
> 
> 标签：quartz-scheduler, cronexpression

i want to run my **Quartz** job 4 times all day and i am using cron job to trigger my job and have provided value in xml. Please let me know the **Quartz Expression** so that i can trigger my job 4 times all day.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T15:36:02.643

That's pretty simple:

```
0 0 0/6 * * ? 
```

This will fire at 0:00, 6:00, 12:00 and 18:00\. If you want a different offset time, e.g. first invocation at 3:45:

```
0 45 3/6 * * ? 
```

Check out [JavaDoc of `CronTrigger`](http://quartz-scheduler.org/api/2.1.5/org/quartz/CronTrigger.html). But in your case a simple trigger will be... well, simpler:

```
trigger = newTrigger()
  .startNow()
  .withSchedule(simpleSchedule()
    .withIntervalInHours(6)
    .repeatForever())
  .build(); 
```

Note that the semantics aren't exactly the same. The former trigger reflects DST so it will always fire at the same wall clock time.

# backbone.js - 将表 tr 克隆为主干模板

> ID：12157821
> 
> 赞同：0
> 
> 时间：2012-08-28T10:58:07.117
> 
> 标签：backbone.js, backbone-views

我对backbone.js 很陌生。我有以下设置

```
Scripts
|--App
|   |--collecions
|   |    |----students.js
|   |--model
|   |    |---student.js
|   |--views
|   |    |---Header-View.js
|   |    |---Stud-List-View.js
|   |    |---Stud-Item-List-View.js
|   |    |---StudView.js
|   |--app.js
|--Templates
|   |-----Header.htm
|   |-----StudTable.htm
|   |-----student.htm
|--main.js 
```

StudTable.html 是这样的 -----

```
<table class="table table-condensed table-bordered">
<caption>Student Details </caption>
<thead>
    <tr>
        <th>
            First Name
        </th>
        <th>
            Last Name
        </th>
        <th>
            Age
        </th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>
            {{firstname}}
        </td>
        <td>
            {{lastname}}
        </td>
        <td>
            {{age}}
        </td>
    </tr>
</tbody> 
```

如何渲染从这里发送的集合

```
function ($, _, Backbone, Student, StudList, HeaderView, StudView, ListView, CloneView) {
 var AppView = Backbone.Router.extend({
     routes: {
         "": "list",
         "students/clone": "clone",            
     },

     initialize: function () {
         var view = new HeaderView();
         return this;
     },
     clone: function () {
         var studs = new StudList();
         studs.fetch({
             success: function () {
                 $("#content").html(new CloneView({ collection: studs }).el);
             }
         });
     },

 });    

 return AppView;
}); 
```

如何在 jQuery 克隆的帮助下在表格中显示集合而不触及 html 模板的格式？有什么方法可以为集合中的每个元素克隆到表中？

我不想使用像this question这样的两个视图

[使用下划线模板引擎渲染 Html 表格](https://stackoverflow.com/questions/10257401/render-html-table-with-underscore-template-engine-using-a-backbone-complex-model)

他们使用了两种视图：一种用于 tbody，另一种用于将 tr 附加到 tbody。我想在上面提到的模板的帮助下在一个视图中完成。有可能这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:26:56.750

根据评论，您应该使用 2 个视图和 2 个模板。我根本看不到原始帖子中的“克隆”机制有任何优势——这不是主干方式！

主 App 视图将呈现主页 HTML，每个单独`<tr>`的视图将代表数据库/数据模型中的一条记录。因此，渲染主 App 视图，然后遍历您的 JSON 响应以`<tr>`单独渲染每个视图。

从那里，您可以轻松地添加、删除和排序行。因为每个视图都将直接绑定到模型实例，所以两者可以非常轻松地相互“对话”（耶，Backone！）。

当我刚开始时，这个网站帮助我学习了组织我的 Backbone 应用程序的最佳方式： [http ://ricostacruz.com/backbone-patterns/#sub_views](http://ricostacruz.com/backbone-patterns/#sub_views)

# android - Android NDK：使用 NDK 上传文件

> ID：12157822
> 
> 赞同：2
> 
> 时间：2012-08-28T10:58:07.727
> 
> 标签：android, c++, c

有没有使用 NDK 将文件从 SD 上传到服务器的源代码？或任何其他上传大文件的方法，而无需获取

```
Out Of Memory Exception 
```

如果是这样，请给我链接？

下面的代码是我使用的代码，我得到了内存不足异常

```
 private void UploadFileByClient(LocalFileVO localFileVO){

        try{

            File uploadFile = new File(
                    (localFileVO.getFolderPath() + "/" + localFileVO.getFileName()));

            HttpClient    client = new DefaultHttpClient();

            final HttpResponse resp; 
            final HttpClient httpClient = new DefaultHttpClient(); 
            final HttpPut post = new HttpPut("https://qa2-talos-vip-mexico.symnds.com/fileservice/files/");
            post.setHeader("User-Agent", "Mexico/1.0.0.57/android");
            post.setHeader("Content-Type", localFileVO.getMimeType());
            post.setHeader("Authorization", TOKEN);
            post.setHeader("x-mexico-endpointid", GUID);
            post.setHeader("x-mexico-filehash", localFileVO.getFileHash());
            post.setHeader("x-mexico-filesize", localFileVO.getSize());

            if (!TextUtils.equals("0", localFileVO.getFolderId()))
                post.setHeader("x-mexico-folder", localFileVO.getFolderId());

            post.setHeader("x-mexico-filename", localFileVO.getEncodedFileName());
            post.setHeader("Expect", "100-continue");
            post.setHeader("x-mexico-modtime",
                    String.valueOf(System.currentTimeMillis() / 1000));

//          ParcelFileDescriptor fileDescriptor = this.getContentResolver().openFileDescriptor(Uri.parse(uploadFile.getAbsolutePath()), "r"); 
//          InputStream in = this.getContentResolver().openInputStream(Uri.parse(uploadFile.getAbsolutePath()));
            InputStream in = new FileInputStream(uploadFile);

            CountingInputStreamEntity entity = new CountingInputStreamEntity(in, uploadFile.length()); 
            entity.setUploadListener(this);
            post.setEntity(entity); 
            resp = httpClient.execute(post); 
            if (resp.getStatusLine().getStatusCode() == HttpStatus.SC_OK) { 
                System.out.println("=======================Got the response from server============================");
            }

        }catch(Exception e){
            System.out.println("==============Failed using HttpClient================="+e.getMessage());
        }

    }

   private int uploadFile( LocalFileVO localFileVO) throws IOException {

       UploadFileByClient(localFileVO);

      if(true){
          return 0;
      }

        File uploadFile = new File((localFileVO.getFolderPath() + "/" + localFileVO.getFileName()));

        System.setProperty("http.keepAlive", "false");

        int     code = 0;
        try{

        HttpURLConnection urlConnection; 

        URL url = new URL("https://qa2-talos-vip-mexico.symnds.com/fileservice/files/");
    //  URL url = new URL("https://zpi.nortonzone.com/fileservice/files/");

        urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.setConnectTimeout(30000);
        urlConnection.setRequestProperty("Host", url.getHost());
        // urlConnection.setRequestProperty("Connection", "Keep-Alive");
        urlConnection.setDoInput(true);
        urlConnection.setDoOutput(true);
        urlConnection.setUseCaches(false);
        urlConnection.setInstanceFollowRedirects(false);
    //  urlConnection.setChunkedStreamingMode(1024);
        urlConnection.setFixedLengthStreamingMode(Integer.parseInt(localFileVO.getSize()));
        //urlConnection.setChunkedStreamingMode(1024);

        urlConnection.setRequestMethod("PUT");
        urlConnection.setRequestProperty("User-Agent", "Mexico/1.0.0.57/android");
        urlConnection.setRequestProperty("Content-Type", localFileVO.getMimeType());
        //urlConnection.setRequestProperty("Content-Length", localFileVO.getSize());
        urlConnection.setRequestProperty("Authorization", TOKEN);
        urlConnection.setRequestProperty("x-mexico-endpointid", GUID);
        urlConnection.setRequestProperty("x-mexico-filehash", localFileVO.getFileHash());
        //urlConnection.setRequestProperty("x-mexico-filesize", localFileVO.getSize());

        if (!TextUtils.equals("0", localFileVO.getFolderId()))
            urlConnection.setRequestProperty("x-mexico-folder", localFileVO.getFolderId());

        urlConnection.setRequestProperty("x-mexico-filename", localFileVO.getEncodedFileName());
        urlConnection.setRequestProperty("Expect", "100-continue");
        urlConnection.setRequestProperty("x-mexico-modtime",
                String.valueOf(System.currentTimeMillis() / 1000));

        bufferOutputStream = new BufferedOutputStream(urlConnection.getOutputStream(),BSIZE);
    //  CountingOutputStream cOutStream = new CountingOutputStream(bufferOutputStream);

        FileInputStream fileInputStream = new FileInputStream(uploadFile);

        long startTime = System.currentTimeMillis();
        try{
            int totalSize = 0;

             while (true) {
                   synchronized (chunks) {
                        int amountRead = fileInputStream.read(chunks);
                        System.out.println("========amount read========="+amountRead);
                        if (amountRead == -1) {
                              break;
                        }
                        bufferOutputStream.write(chunks, 0, amountRead);
                        bufferOutputStream.flush();
                  }
             }
            System.out.println("================================TotalSize " + totalSize);
            bufferOutputStream.flush();
             bufferOutputStream.close();
             fileInputStream.close();
            }catch(Exception e){
                e.printStackTrace();
            }
        long endTime = System.currentTimeMillis();
        System.out.println("=============================================Writing time ==========================================================" + (endTime - startTime)); 
        //code = urlConnection.getResponseCode();

        InputStream inputStream  = urlConnection.getInputStream();

    long endTime1 = System.currentTimeMillis();
    System.out.println("Time to get the response is  " + (endTime1 - endTime)); 
    // progressBar.setProgress(100);
        System.out.println("=================Response code is ================="+code);
        urlConnection.disconnect();
        //fileInputStream.close();

        }catch(Exception e){
            System.out.println("========================Exception occured=================="+e.getMessage());
        }
        return code;

    } 
```

感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:37:50.377

似乎您错过了来自：http://developer.android.com/reference/java/net/HttpURLConnection.html 的 setChunkedStreamingMode(int) 调用 发布内容 要将数据上传到 Web 服务器，请使用 setDoOutput(true) 配置输出连接。为了获得最佳性能，您应该在预先知道主体长度时调用 setFixedLengthStreamingMode(int)，或者在不知道时调用 setChunkedStreamingMode(int)。否则**HttpURLConnection 将被迫在**传输之前将完整的请求正文缓冲在内存中，从而浪费（并且可能耗尽）堆并增加延迟。

但是您的内容太大而无法缓冲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:09:34.550

您不需要 NDK。如果没有您的代码，我只能建议有将整个文件读入缓冲区的代码。这是错误的。执行以下操作：按小部分读取文件并将这些部分一一发送到输出流（从连接中获取）

```
FileInputStream fileInputStream = new FileInputStream(new File(pathToOurFile) )
..
URL url = new URL(urlServer);
connection = (HttpURLConnection) url.openConnection();

// Allow Inputs & Outputs
connection.setDoInput(true);
connection.setDoOutput(true);
connection.setUseCaches(false);

// Enable POST method
connection.setRequestMethod("POST");

connection.setRequestProperty("Connection", "Keep-Alive");
connection.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);
....
outputStream = new DataOutputStream( connection.getOutputStream() );
....
// Read file
bytesRead = fileInputStream.read(buffer, 0, bufferSize);

while (bytesRead > 0)
{
outputStream.write(buffer, 0, bufferSize);
bytesAvailable = fileInputStream.available();
bufferSize = Math.min(bytesAvailable, maxBufferSize);
bytesRead = fileInputStream.read(buffer, 0, bufferSize);
}

outputStream.writeBytes(lineEnd);
outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

// Responses from the server (code and message)
serverResponseCode = connection.getResponseCode();
serverResponseMessage = connection.getResponseMessage();

fileInputStream.close();
outputStream.flush();
outputStream.close(); 
```

# c# - 如何检测UDP数据包丢失？（C＃）

> ID：12157825
> 
> 赞同：2
> 
> 时间：2012-08-28T10:58:18.820
> 
> 标签：c#, udpclient, ntp

我正在开发 SNTP 客户端，它通过 UDP 从 NTP 服务器获取时间戳。一切正常，我可以下载时间戳并更新 Windows 时钟，但如果 UDP 数据包丢失，我想收到一条消息。如何检测数据包何时丢失？我需要这些信息，因为如果数据丢失，我想获得新的时间戳。

...以及如何测试该功能？如何故意丢失UDP数据包？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T15:46:30.297

你有三个选择：

1.  忽略丢弃的数据包
2.  改用 TCP
3.  建立自己的检测系统

您要问的是如何做＃3，答案是：

*   为每个数据包添加数据包编号和数据包时间戳。
*   创建一个数据包堆栈，并将传入的数据包插入到按数据包编号排序的堆栈中。
*   仅当存在包号为（最后一个包号+1）的包时，才从堆栈中删除包。
*   如果数据包中有间隙并且（gap + 1）数据包的时间戳大于某个阈值，则发送“重新传输请求”数据包以重新传输丢弃的数据包。

等一下……这正是 TCP 的做法（*）！你应该只使用TCP！

(*) 这是一种简化，TCP 做了大量工作来使过程可靠。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-28T10:59:27.530

这对于 UDP 是不可能的。如果您需要可靠的连接，您应该使用 TCP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T11:02:09.807

UDP 是一种无连接协议。当没有连接时，您无法“检测”任何东西。您必须使用面向连接的协议（例如 TCP）来解决此问题。

[比较](http://www.diffen.com/difference/TCP_vs_UDP)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T15:54:02.460

因为没有办法测试 UDP 是否无法到达，唯一真正的选择是在所有发送的数据前加上一个“数据包号”，所以如果它不是下一个数字，你就知道它丢失了一个数据包。

据我所知，没有办法故意丢失 1 个 udp 数据包，除了拉扯电缆并更换它.. 并希望..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T11:46:59.790

好的。我知道了。但是我可以通过这样做来检查数据包丢失吗？例如，如果我将计时器设置为 2 秒，然后运行此函数，我可以查看服务器是否正确响应。那我应该知道有没有丢包？

```
public bool IsResponseValid()
    {
        if(SNTPData.Length < SNTPDataLength || Mode != _Mode.Server)
        {
            return false;
        }
        else
        {
            return true;
        }
    } 
```

# c# - (SSIS) 从 Excel 工作表中提取多个区域以进行 DB 导入

> ID：12157826
> 
> 赞同：0
> 
> 时间：2012-08-28T10:58:27.923
> 
> 标签：c#, sql, sql-server, excel, ssis

我想通过 SSIS 将 Excel 工作表导入 SQL Server 数据库。在此工作表中，我需要将几个区域导入到数据库表中。

例如，在 A1 中，我有一个字符串值需要进入数据库的相应列；在 F1 到 F5 中，我还有要导入到每个单元格值的单独列的数据，然后从 A12 行开始到 P 行，直到最后的所有行都应该被导入。

然后 A1 和 F1:F5 中的值应该传播到数据库中 A12:P 的最后一行条目。

如何“拆分”这些值以便将它们导出到数据库？这可以通过一个 select 语句来完成，还是脚本任务是唯一的方法？我在想我可以有三个 Excel 源，也许可以组合输出。

出于测试目的，我设置了一个变量来选择我在 E​​xcel 源中使用的 A12:P。

我真的不知道从哪里开始。

如果您有一个处理此问题的示例（或者如果您可以提供一个示例），请发布它。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:13:07.007

让它与一个选择语句一起工作。

选择 [工作表名称$A1:A1].F1,...

来自 [SheetName$A1:A1]，....

# java - 刷新后看不到休眠会话之外的变化

> ID：12157831
> 
> 赞同：1
> 
> 时间：2012-08-28T10:58:56.160
> 
> 标签：java, spring, hibernate, flush

我正在`Spring 3.1.2`使用`Hibernate 4`.

我有一个`MyDaoImpl`带有注释的 DAO 实现类，`@Repository`以便启用异常翻译。我有一个`MyService`注释`@Transactional`如下的服务类：

```
public class MyDaoImpl implements MyDao {

    private SessionFactory sessionFactory;

    @Autowired
    public void setSessionFactory(SessionFactory sessionFactory) {
       this.sessionFactory = sessionFactory;
    }

    @Override
    public void saveA(A a)
    {
        this.sessionFactory.getCurrentSession().saveOrUpdate(a);
    }
} 
```

我编写了一个单元测试类`MyDaoImplTest`，如下所示：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:beans.xml" })
@Transactional
public class MyDaoImplTest implements IMyDaoImplTest {

    private MyDao myDao;

    private SessionFactory sessionFactory;

    @Autowired
    public void setMyDao(MyDao myDao)
    {
        this.myDao = myDao;
    }

    @Autowired
    public void setSessionFactory(SessionFactory sessionFactory)
    {
        this.sessionFactory = sessionFactory;
    }

    @Test
    @Override
    public void testCreateA()
    {
       A a = new A("A1");
       this.myDao.saveA(a);

       this.sessionFactory.getCurrentSession().flush();

       IDataSet databaseDataSet = this.getConnection().createDataSet();
       ITable actualTable = databaseDataSet.getTable("Applications");

   IDataSet expectedDataSet = new FlatXmlDataSetBuilder().build(this.getClass().getClassLoader().getResourceAsStream("test-data/applications/savenew.xml"));
   ITable expectedTable = expectedDataSet.getTable("Applications");

   Assertion.assertEquals(expectedTable, actualTable);
    }
} 
```

根据 Spring 文档，我在更改后刷新会话以避免误报。问题是刷新后，如果我在 Hibernate 之外访问数据库（例如使用 DBUnit），我看不到更改，所以我的断言总是失败。

我的配置有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:01:37.990

这是预期的行为。刷新与事务提交是不同的概念。只有在提交之后，您才能看到事务之外的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:41:03.137

如果要在事务提交后检查数据库的状态，有两种选择：

*   在用 注释的方法中进行检查`@AfterTransaction`。此方法将在`@Tranactional`测试方法定义的事务结束后由 Spring JUnit 运行器执行。不要忘记禁用自动事务回滚`(@TransactionConfiguration(defaultRollback = false)`）。如果您需要对不同的测试方法进行不同的检查，您可以执行以下操作：

    ```
    private Runnable check;

    @AfterTransaction
    public void performCheck() {
        if (check != null) check.run();
    }

    @Test
    @Override
    public void testCreateA() {
        ... // Code being tested
        check = new Runnable() {
            public void run() {
                ... // Code to check the state
            }
        };
    } 
    ```

*   在测试方法中使用程序化事务划分：

    ```
    private TransactionTemplate tx;

    @Autowired
    private void setTransactionManager(PlatformTransactionManager ptm) {
        tx = new TransactionTemplate(ptm);
    }

    @Test
    @Override
    @Transactional(progrgation = Propagation.NOT_SUPPORTED) // Disable declarative transaction
    public void testCreateA() {
        tx.execute(...); // Code to test
        tx.execute(...); // Check
    } 
    ```

或者，如果您的目标是使用 DbUnit 来检查 Hibernate 刷新的结果，您可以在同一个事务中执行它，例如，使用`sessionFactory.getCurrentSession().doWork(...)`.

# c# - 如何使这个 FtpWebRequest 代码更快？

> ID：12157834
> 
> 赞同：0
> 
> 时间：2012-08-28T10:59:14.737
> 
> 标签：c#, .net, visual-studio-2010, ftp, ftpwebrequest

我写这个是为了检查表列中的文件名是否存在于 ftp 服务器目录中，如果存在，然后更新（使用更新查询）列 Isexists 的值，`1`否则保持原样。

我正在使用 DataTable 读取每一行（文件名），然后一直使用 FtpWebRequest 来检查文件是否存在。

这样`CheckIfFtpFileExists(string fileUri`）接听电话的次数等于没有。数据表中的行数。

有什么方法可以进行 FTP 身份验证。只有一次，然后调用该函数。

任何建议如何改进我的代码以提高速度。

```
namespace FTP_File_Check
{
    class Program
    {
        static void Main(string[] args)
        {
            string connString = @"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=DMSTG;Data Source=.";

   string sql = @"SELECT full_file_name from Intellitrack.S_Sr_att_Delta_Consolidated_28082012 where Isexists=0";

        SqlConnection conn = new SqlConnection(connString);
           conn.Open();
            SqlDataAdapter da = new SqlDataAdapter(sql, conn);
            DataTable dt = new DataTable();
            da.Fill(dt);

            foreach (DataRow row in dt.Rows)
            {
                foreach (DataColumn col in dt.Columns)
                {

                    SqlConnection sqlConnection1 = new SqlConnection("Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=DMSTG;Data Source=.");
                    SqlCommand cmd = new SqlCommand();
                    cmd.CommandType = CommandType.Text;

                    if (CheckIfFtpFileExists("ftp://myftpaddressgoeshere.com/0708/" + row[col].ToString()))
                    {
                      // Found File Exists
                        cmd.CommandText = @"UPDATE Intellitrack.S_Sr_att_Delta_Consolidated_28082012 
                                       SET Isexists = 1 
                                         where full_file_name='" + row[col].ToString() + "'";
                        cmd.Connection = sqlConnection1;

                        sqlConnection1.Open();

                       cmd.ExecuteNonQuery();
                        sqlConnection1.Close();

                    }

                }

            }

    }

    public static bool CheckIfFtpFileExists(string fileUri)
    {

            FtpWebRequest request = (FtpWebRequest)FtpWebRequest.Create(fileUri);
            request.Credentials = new NetworkCredential("myuserid", "mypassword");
            request.KeepAlive = true;
            request.ConnectionGroupName = "file";
            request.ServicePoint.ConnectionLimit = 8;
            request.UseBinary = true;
            request.UsePassive = false;

            request.Method = WebRequestMethods.Ftp.ListDirectoryDetails;

            try
            {

                FtpWebResponse response = (FtpWebResponse)request.GetResponse();

            }
            catch (WebException ex)
            {
                FtpWebResponse response = (FtpWebResponse)ex.Response;
                if (FtpStatusCode.NotLoggedIn == response.StatusCode)
                {
                    Console.WriteLine("Failed to connect to ftp server");
                    Console.ReadLine();
                    Environment.Exit(99);

                }
                else
                {

                    if (FtpStatusCode.ActionNotTakenFileUnavailable == response.StatusCode)
                    {

                        return false;
                    }
                }
            }

        return true;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-28T11:04:15.170

也许您可以使用`WebRequestMethods.Ftp.ListDirectoryDetails`，这将通过一次调用为您提供所有远程文件的列表。您可以将其存储在 a 中`List<string>`，然后根据该列表检查数据库的每一行。

# java - 如何在磁盘上传播/散列多个文件而不在每个目录存储超过 1000 个文件？

> ID：12157836
> 
> 赞同：1
> 
> 时间：2012-08-28T10:59:18.923
> 
> 标签：java, performance, hash

我需要生成大量由整数索引的文件。例如，假设 int i 的范围从 0 到 10000，生成的文件将是：f0.xml, f1.xml, ... f10000.xml

但是，对于每个文件夹超过 1000 个文件，文件系统性能开始下降。

我想在 i 的值上使用“散列”或“扩展”函数将文件存储在目录中。此函数将在单个目录中存储不超过 1000 个文件（或文件夹），但只会根据需要创建目录。

我的问题有什么想法或开源解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:06:08.837

假设您按从 00000000 到 99999999 的数字生成文件名。您可以使用最后 3 位数字作为文件名，即您的目录看起来像 00000/000.xml 到 99999/999.xml

注意：除非您有 SSD，否则如果您在任何文件系统上有大量文件，您的性能将会下降。HDD 上的典型文件访问时间约为 8 毫秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T16:48:07.057

请参阅这篇出色的帖子以获得简单的解决方案：

[http://michaelandrews.typepad.com/the_technical_times/2009/10/creating-a-hashed-directory-structure.html](http://michaelandrews.typepad.com/the_technical_times/2009/10/creating-a-hashed-directory-structure.html)

```
import java.io.File;

public class DirectoryHash {
    public static void main(String[] args) {
        String fileName = "cat.gif";

        int hashcode = fileName.hashCode();
        int mask = 255;
        int firstDir = hashcode & mask;
        int secondDir = (hashcode >> 8) & mask;

        StringBuilder path = new StringBuilder(File.separator);
        path.append(String.format("%03d", firstDir));
        path.append(File.separator);
        path.append(String.format("%03d", secondDir));
        path.append(File.separator);
        path.append(fileName);

        System.out.println(path);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:02:13.177

取文件名，MD5 它给你类似的东西`abdefghijklmnop`

将其分解为目录结构和文件名，例如

```
abc \ def \ ghi \ jkl \ mnop.txt 
```

您可以根据要存储的文件数量选择如何分解目录（例如，您可能只需要将 8 个字符拆分为 3、3、2 而不是示例中的 3、3、3、3 深度多于）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T16:59:29.400

这就是我使用提供的一些技巧实现的方式。首先是一个函数来分解 3 位数组中的索引：

```
private static void decompose(final long l, final short[] array) {
    long q = l;
    long r = 0;
    for (int j=array.length-1; j >= 0; j--) {
        // compute remainder
        r = q % 1000;
        // compute quotient
        // converts to int and fractional part is dropped without rounding
        q = q / 1000;

        array[j] = (short) r;
    }
} 
```

然后，使用分解后的数组 (currentA) 创建子目录和文件对象。

```
 File dir = parent;
    for (int j=0; j < depth-1; j++) {
        String dirName = String.format("%03d", currentA[j]);
        dir = new File(dir, dirName);
    }
    String fileName = prefix + String.format("%03d", currentA[depth]) + suffix;
    File file = new File(dir, fileName); 
```

# mysql - 从多个表中查找非重复记录

> ID：12157840
> 
> 赞同：0
> 
> 时间：2012-08-28T10:59:38.777
> 
> 标签：mysql, unique, multiple-tables

我通过互联网搜索但找不到我要找的东西，可能是因为我不知道要搜索什么。

我的问题是从多个表中获取不重复的记录......

假设我有如下两张表，

```
tableA
----------------------
code    ip
1       111.168.1.2
2       111.222.333.333
3       111.168.1.2
4       111.234.2.44
5       111.23.455.44

tableB
----------------------
code    ip                 ISP
1       111.222.333.333    newtwo
2       111.168.2.2        anon
3       111.333.453.567    def
4       111.168.2.2        tele
5       111.222.333.333    new
6       111.333.544.3      ispnew 
```

我期望从中得到的是，

```
ip
111.234.2.44
111.23.455.44
111.333.453.567
143.333.544.3 
```

我像这样一起尝试过 UNION、DISTICNT 和 DISTINCT AND UNION，

```
SELECT DISTINCT IP FROM(SELECT IP FROM tableA UNION SELECT IP FROM tableB) 
```

但它为所有唯一的值提供了一个副本，如下所示，

```
ip
111168.1.2
111.222.333.333
111.234.2.44
111.23.455.44
111.168.2.2 
111.333.453.567     
111.333.544.3 
```

请帮我解决这个问题，我会非常满意..非常感谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T11:04:19.383

`DISTINCT`只给每个条目一次，但不要完全丢弃重复的条目。你需要做的是使用`GROUP BY`，`COUNT`并`HAVING`摆脱那些：

```
SELECT
  IP
FROM
  (
    SELECT IP FROM tableA
  UNION ALL
    SELECT IP FROM tableB
  )
GROUP BY
  IP
HAVING
  COUNT(*) = 1 
```

# testng - 如何在 TestNG 中排除类？

> ID：12157846
> 
> 赞同：16
> 
> 时间：2012-08-28T10:59:54.427
> 
> 标签：testng

这可以排除 testng.xml 中的类吗？

我试过了

```
<packages>
    <package exclude="com.tt.ee"/>
</packages> 
```

但它给出了错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T06:06:15.150

根据[TestNG dtd](http://testng.org/testng-1.0.dtd.php)，该`exclude`元素仅适用于以下元素：

*   包 - 包列表中的包描述。
*   方法 - 包含/排除此测试的方法列表。
*   run - 组的子标签，用于定义应该运行哪些组。

元素`classes`和`class`不能直接排除；但是，您可以通过组排除类：

```
@Test(groups = { "ClassTest1" })
public class Test1 {

  public void testMethod1() {
  }

  public void testMethod2() {
  }

} 
```

然后您将定义 testng.xml：

```
<suite>
  <test>
    <groups>
      <run>
        <exclude name="ClassTest1"/>
      </run>
    </groups>
    <classes>
      <class name="Test1">
    </classes>
  </test> 
</suite> 
```

在大多数情况下，您定义了要包含哪些类来运行，而不是排除哪些类，因此只需包含您要运行的类。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-28T11:05:06.007

它是这样工作的：

```
<packages>
    <package name="some.package">
        <exclude name="some.package.to.exclude"></exclude>
    </package>
</packages> 
```

在`name`属性中，提供包名称。

注意：在 TestNG 6.14.3 中，您**不能**`<classes>`在XML 标记中排除类。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-03-27T10:17:57.623

如果您使用 xml 文件 (testng.xml) 来定义套件，并且自 TestNG 6.14.3 起，您无法在 XML 标记中排除类，则在包中排除特定类的方法如下：

```
<suite name="suite-name" >
<test name="test-name">
    <packages>
        <package name="ab.cd.ef.*"/>
    </packages>
    <classes>
        <class
            name="ab.cd.ef.ClassToBeExcluded">
            <methods>
                <exclude name=".*" />
            </methods>
        </class>
    </classes>
</test> 
```

实际上，不是排除类（dtd 不允许），而是排除类的所有方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-01T11:07:59.013

`(groups = { "anyName"})`在您不想运行的测试之后立即添加，所以它看起来像：

```
 @Test(groups = { "group1"})
public void methodTestName(){..
} 
```

而不是在您的**xml 文件**中添加之后 `test name="..."`

```
 <groups>
        <run>
            <exclude name="group1" />
        </run>
    </groups> 
```

`(groups = { "group1"})`不会运行的方法。这种方式对我有用。请记住，您**不能排除 Class，只能排除包、方法和运行**。祝你好运

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-06T18:48:17.870

通过 testng.xml 没有直接的方法可以跳过测试类。但是，有一些解决方法可以用来忽略特定的测试类。

1.  将测试类声明为抽象类。
2.  实现 IAnnotationTransformer 侦听器接口并将 enabled = false 设置为标有自定义注释的特定类中的所有测试方法。

testng-user 组中讨论的相同主题但没有直接答案参考邮件线程 - Re: [testng-users] Ignore a class in testng

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-14T17:47:53.357

您可以使用 classfilesetref 并定义要运行的类列表。

```
<fileset id="test.classes" dir="${test.classes.dir}" casesensitive="yes">
    <exclude name="**/ExcludeClass.java" />
</fileset>

<testng [...]>
    <!-- your setting here -->
    <classfilesetref refid="test.classes"/>
</testng> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-30T11:18:39.110

我遇到过同样的问题 ！无论如何，我找到的解决方案是使用标记类而不是包这是我的 testng.xml 文件：

```
 <classes>
        <class name="brms.impl.BrmsServicesFactoryTest" />
<!--            <class name="brms.impl.ServicesFactoryTest" /> -->
    </classes> 
```

在这种情况下，只执行类 BrmsServicesFactoryTest 测试，不执行其他类测试！

我希望这可以帮助你！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-18T06:54:05.117

作为解决方法，您可以通过注释转换器将伪组添加到具有名称、等于测试方法或测试类的每个测试

```
public class TestNGAnnotationTransformer implements IAnnotationTransformer {

@Override
public void transform(ITestAnnotation annotation, Class testClass, Constructor testConstructor, Method testMethod) {
    if (testMethod == null || annotation == null) {
        return;
    }

    String pseudoGroupClass = testMethod.getDeclaringClass().getSimpleName();
    String pseudoGroupMethod = pseudoGroupClass + "." + testMethod.getName();

    String[] existingGroups = annotation.getGroups();
    String[] extendedGroups;
    if (existingGroups == null) {
        extendedGroups = new String[] { pseudoGroupClass, pseudoGroupMethod };
    } else {
        List<String> tmp = new ArrayList<String>();
        for (String group : existingGroups) {
            tmp.add(group);
        }
        tmp.add(pseudoGroupClass);
        tmp.add(pseudoGroupMethod);
        extendedGroups = tmp.toArray(new String[0]);
    }

    annotation.setGroups(extendedGroups);
} 
```

}

并在你的 testng.xml 中使用它

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >

<suite name="My tests">
    <test name="tests" enabled="true">
        <groups>
            <run>
                <include name="My Group"/> 
                <include name="MySuperClass"/>
                <exclude name="MySuperClass.badMethod"/>
                <exclude name="DontLikeThisClassAnymore"/>
            </run>
        </groups>

        <packages>
            <package name="com.mycompany.*"/>
        </packages>
    </test>

    <listeners>
       <listener class-name="com.mycompany.TestNGAnnotationTransformer"/>
    </listeners>
</suite> 
```

# statistics - 如何选择合适的距离函数

> ID：12157848
> 
> 赞同：2
> 
> 时间：2012-08-28T11:00:03.383
> 
> 标签：statistics, machine-learning, distance

这可能是一个微不足道的问题。我们如何为特殊的高维数据集选择一个好的距离函数？我读过一些距离函数，如欧几里德距离，在高维数据中效果不佳。如果那不能给我们一个很好的距离测量，那么什么功能可以呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:27:19.993

它来自维度的诅咒，基本上是随着维度的增加，空间变得更加空虚。

最佳距离测量高度依赖于数据，但我建议对 minkowsky 距离使用低 p 值进行交叉验证

> mikowsky_distance = sum_i(|u_i-v_i|^p)^(1/p)

p=1 即曼哈顿距离 (L1) 在大多数高维情况下比使用欧几里得 (L2) 更好，并且非常容易测试。还可以尝试取较小的值，例如 1/4，看看会发生什么。您也可以尝试使用 limit p-> -inf ，即 min-dstance `min(|u_i-v_i|)`。p 值越低，与匹配度越低的维度相比，相似度最高的维度对它的权重就越大。

我建议阅读论文

> [http://www-users.cs.umn.edu/~kumar/papers/siam_hd_snn_cluster.pdf](http://www-users.cs.umn.edu/~kumar/papers/siam_hd_snn_cluster.pdf)

触及主题。

# c# - 使用 Emgu CV 的视频播放器

> ID：12157859
> 
> 赞同：0
> 
> 时间：2012-08-28T11:00:35.347
> 
> 标签：c#, video, video-capture, emgucv

我想制作一个使用 Emgu CV 检测对象的视频播放器。我想从读取视频源文件开始，这就是我遇到错误的地方。排队：

```
Capture capture = new Capture(@"C:/Users/Paul/Desktop/Film/parrot.avi"); 
```

有一个例外：

> Emgu.CV.dll 中出现“System.NullReferenceException”类型的未处理异常
> 附加信息：无法从`C:/Users/Paul/Desktop/Film/parrot.avi`

我尝试了许多组合和不同的源类型，如 AVI、WMV、MPEG，但仍然有例外。我该怎么做才能让它发挥作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-11T11:50:26.993

我遇到了类似的问题。如果这个问题仍然存在，请尝试添加：

```
opencv_ffmpegXXX.dll 
```

（XXX 是您的 emgucv 版本）到您项目的 exe 文件夹（调试/发布）。FFmpeg`opencv`用于处理视频。

PS：`opencv_ffmpegXXX.dll`位于提取的`emgucv/bin`文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T04:23:20.797

您使用的是什么版本的 Emgu CV？如果是 2.4.10 那么我建议你使用[3.0.0 版本](http://sourceforge.net/projects/emgucv/files/emgucv/3.0.0-alpha/)。我在使用最新的稳定版本（2.4.10）时遇到了同样的问题，但似乎在最新的 alpha 版本（3.0.0）中打了补丁。现在，我可以使用 Emgu CV Capture 类轻松捕获 USB 摄像头、视频文件或 RTSP 流（IP 摄像头）。

可能您现在已经解决了这个问题，但是我希望这些信息对其他人也有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-04T10:57:00.893

我有几天遇到这个问题，我无法在桌面上读取或写入视频。初始化没有错误，但`Capture`有`Width and Height = 0`返回`null`帧。

只需将路径更改为：

```
".\parrot.avi" 
```

这发生在我使用 Emgu 3.1.0.2282b 的 Win8.1 上

# c# - 根据 Windows 请求关闭 Windows 应用程序（如关机）

> ID：12157861
> 
> 赞同：0
> 
> 时间：2012-08-28T11:00:37.390
> 
> 标签：c#, winforms, .net-2.0, shutdown, terminate

我写了一个windows applciation项目，我在它的表单关闭事件中执行了一些其他操作，现在我寻找从外部调用的东西，让应用程序关闭，因为applciation不会关闭，最后在旧操作系统中，它会导致windows不关机

这是我的表单事件：

在这里，我在其他部分关闭了我的显示器（我只有在表单加载时有显示器，我不关心那部分，它会在几秒钟内完成）

```
private void UserInterface_FormClosed(object sender, FormClosedEventArgs e)
        {
            if (Monitor.TryEnter(_objStop))
            {
                Monitor.Exit(_objStop);
            }
            else
            {
                Monitor.Exit(_objStop);
            }
        } 
```

接下来是

```
private void UserInterface_FormClosing(object sender, FormClosingEventArgs e)
        {
            if (!_flagExit)
            {
                e.Cancel = true;
                HideForm();
            }
        } 
```

现在我正在寻找来自窗口的事件，所以我在我的应用程序拒绝关闭之前将 _flagExist 切换为 true（尝试隐藏在通知栏中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:05:49.820

您可以[`CloseReason`](http://msdn.microsoft.com/library/system.windows.forms.closereason.aspx)从[`FormClosingEventArgs`](http://msdn.microsoft.com/library/system.windows.forms.form.formclosing.aspx)

# c# - 如何知道 SemanticZoom 的滚动位置？

> ID：12157862
> 
> 赞同：1
> 
> 时间：2012-08-28T11:00:38.147
> 
> 标签：c#, windows-8, windows-runtime

对于 C#/XAML 中的 Windows 8 中的应用程序，我在页面中使用语义缩放。当我在页面中滚动时，我想知道滚动位置。使用 scrollViewer 很容易：我只需要恢复 scrollViewer 并使用属性 Horizo​​ntalOffset。

```
 var scrollView = element.FindName("itemGridScrollViewer") as ScrollViewer;
 var scrollOffset = scrollView.HorizontalOffset; 
```

但是我怎样才能实现同样的事情并在语义缩放中访问滚动信息？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:48:10.610

您可以找到您感兴趣的语义缩放控件，访问可视化树，然后找到后代滚动查看器以询问其 Horizo​​ntalOffset 值。

WinRT XAML 工具包的[VisualTreeHelperExtensions](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/13620#228441)可以帮助您解决这个问题。

# magento - Magento 管理模块控制器 - 加载另一个动作

> ID：12157876
> 
> 赞同：2
> 
> 时间：2012-08-28T11:01:39.793
> 
> 标签：magento, module, controller, admin

我正在尝试为 Magento 创建一个仅在管理区域可见的新模块。

我已经成功创建了模块，现在已经创建了一个名为“editproducts”的控制器。在这个控制器中，我有 indexAction 和 testAction。

当我转到 /quickedit/editproducts/ 时，它从控制器加载 indexAction 非常好，但是当我转到 /quickedit/editproducts/test/ 时，它重定向到仪表板而不调用 testAction。从我看到的教程中，我似乎已经正确设置了所有内容。

我的 config.xml 文件：

```
<config>
<modules>
    <Test_Quickedit>
        <version>0.1.0</version>
    </Test_Quickedit>
</modules>

<global>
    <helpers>
        <quickedit>
            <class>Test_Quickedit_Helper</class>
        </quickedit>  
    </helpers>
</global>        

<admin>
    <routers>
        <the_name_of_this_element_is_not_important_it_should_be_unique>
            <use>admin</use>
            <args>
                <module>Test_Quickedit</module>
                <frontName>quickedit</frontName>
            </args>
        </the_name_of_this_element_is_not_important_it_should_be_unique>
    </routers>
 </admin>

<adminhtml>
    <menu>
        <menu1 translate="title" module="quickedit">
            <title>Test</title>
            <sort_order>60</sort_order>
            <children>
                <menuitem1 module="quickedit">
                    <title>Edit Products</title>
                    <action>quickedit/editproducts</action>
                </menuitem1>
            </children>                
        </menu1>
    </menu>
<acl>
        <resources>
            <admin>
                <children>
                    <catalog>
                        <children>
                            <quickedit_editproducts>
                                <title>Edit Products</title>
                            </quickedit_editproducts>
                        </children>
                    </catalog>
                </children>
            </admin>
        </resources>
    </acl>
</adminhtml>    
</config> 
```

我的 EditproductsController.php

```
class Test_Quickedit_EditproductsController extends Mage_Adminhtml_Controller_Action
{
public function indexAction()
{
    echo 'edit products';
}

public function testAction()
{
    echo 'test';
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T18:21:03.900

这只是因为您重定向的 URL 不包含密钥

如果您检查管理模块 URL，那么您会看到在 URL 中还添加了一个密钥，因此为了生成正确的 URL，请使用以下代码。

```
$URL = Mage::helper("adminhtml")->getUrl("mymodule/adminhtml_mycontroller/myaction/",array("param1"=>1,"param2"=>2)); 
```

或者

```
$URL = Mage::helper("adminhtml")->getUrl("mymodule/adminhtml_mycontroller/myaction/"); 
```

希望这可以帮助！！

# machine-learning - 可以为逻辑回归定义自己的成本函数吗？

> ID：12157881
> 
> 赞同：22
> 
> 时间：2012-08-28T11:01:46.680
> 
> 标签：machine-learning, data-mining, regression

在最小二乘模型中，成本函数定义为作为输入函数的预测值与实际值之差的平方。

当我们进行逻辑回归时，我们将成本函数更改为对数函数，而不是将其定义为 sigmoid 函数（输出值）与实际输出之差的平方。

是否可以更改和定义我们自己的成本函数来确定参数？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-27T15:40:50.923

是的，您*可以*定义自己的损失函数，但如果您是新手，最好使用文献中的一个。损失函数应该满足的条件有：

1.  它们应该近似于您试图最小化的实际损失。正如在另一个答案中所说，分类的标准损失函数是零一损失（错误分类率），用于训练分类器的损失函数是该损失的近似值。

    未使用线性回归的平方误差损失，因为它不能很好地逼近零一损失：当您的模型预测某个样本的 +50 而预期答案为 +1（正类）时，预测开启决策边界的正确一侧，因此零一损失为零，但平方误差损失仍然是 49² = 2401。一些训练算法会浪费大量时间来获得非常接近 {-1, +1} 的预测而不是专注于获得正确的标志/类别标签。（*）

2.  损失函数应该与您预期的优化算法一起使用。这就是为什么不直接使用零一损失的原因：它不适用于基于梯度的优化方法，因为它没有明确定义的梯度（甚至没有像 SVM 的铰链损失那样的次梯度）[。](https://en.wikipedia.org/wiki/Subderivative)

    直接优化零一损失的主要算法是旧的[感知器算法](https://en.wikipedia.org/wiki/Perceptron#Learning_algorithm)。

此外，当您插入自定义损失函数时，您不再构建逻辑回归模型，而是构建其他类型的线性分类器。

(*) 平方误差*与*线性判别分析一起使用，但这通常以紧密形式而不是迭代方式解决。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-30T15:12:13.073

使用逻辑函数、铰链损失、平滑铰链损失等，因为它们是零一二分类损失的上限。

这些函数通常也会惩罚那些被正确分类但仍靠近决策边界的样本，从而产生“边际”。

所以，如果你在做二元分类，那么你当然应该选择一个标准的损失函数。

如果您尝试解决不同的问题，那么不同的损失函数可能会表现得更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-11T13:59:47.920

## 你不选择损失函数，你选择模型

当您使用最大似然估计 (MLE) 拟合参数时，损失函数通常由模型直接确定，这是机器学习中最流行的方法。

您提到了均方误差作为线性回归的损失函数。然后“我们将成本函数更改为对数函数”，指的是交叉熵损失。我们没有改变成本函数。事实上，均方误差是线性回归的交叉熵损失，当我们假设`y`由高斯正态分布时，其均值由 定义`Wx + b`。

## 解释

使用 MLE，您可以选择最大化训练数据可能性的参数。整个训练数据集的可能性是每个训练样本的可能性的乘积。因为这可能下溢为零，所以我们通常最大化训练数据的对数似然/最小化负对数似然。因此，成本函数成为每个训练样本的负对数似然的总和，由下式给出：

`-log(p(y | x; w))`

其中 w 是我们模型的参数（包括偏差）。现在，对于逻辑回归，这就是您提到的对数。但是声称这也对应于线性回归的 MSE 呢？

## 例子

为了显示 MSE 对应于交叉熵，我们假设它`y`正态分布在平均值附近，我们使用 来预测`w^T x + b`。我们还假设它有一个固定的方差，所以我们不用线性回归预测方差，只预测高斯的平均值。

`p(y | x; w) = N(y; w^T x + b, 1)`

你可以看到，`mean = w^T x + b`并且`variance = 1`

现在，损失函数对应于

`-log N(y; w^T x + b, 1)`

如果我们看一下高斯`N`是如何定义的，我们会看到：

[![在此处输入图像描述](../Images/dbd72a2eb51ee9befc0299fa308c7e52.png)](https://i.stack.imgur.com/jxspu.png)

现在，取其负对数。这导致：

[![在此处输入图像描述](../Images/8f85640465259d26d5a82d373d0b7a47.png)](https://i.stack.imgur.com/D2cQD.png)

我们选择了 1 的固定方差。这使第一项保持不变，并将第二项简化为：

`0.5 (y - mean)^2`

现在，请记住我们将均值定义为`w^T x + b`。由于第一项是常数，最小化高斯的负对数对应于最小化

`(y - w^T x + b)^2`

这对应于最小化均方误差。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-22T12:28:21.577

**是**的，可以使用其他成本函数来确定参数。

平方误差函数（线性回归常用的函数）不太适合逻辑回归。

**与逻辑回归的情况一样，假设是非线性的（sigmoid 函数），这使得平方误差函数是非凸的。**

对数函数是一个没有局部最优值的凸函数，所以梯度下降效果很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-30T22:42:19.787

假设在您的逻辑回归模型中，您有标量输入 x，并且模型为每个输入样本 x 输出概率 $\hat{y}(x)=sigma(wx+b)$。如果您继续在输入 $x$ 是标量的非常特殊的情况下构建二次损失函数，那么您的成本函数变为： $C(w,b):= \Sigma_{x} | y(x) - \hat{y}(x)|^2=\Sigma_{x} | y(x) - \sigma(wx+b)|^2$。现在如果你尝试对其应用梯度下降，你会看到：$C'(w), C'(b)$ 是 $\sigma'(wx+b)$ 的倍数。现在，sigmoid 函数是渐近的，当输出 $\sigma(z)$ 接近 $0$ 或 $1$ 时，它的导数 $\sigma'(z)$ 几乎为零。这意味着：当学习不好时，例如$\sigma(wx+b)\约0$，但$y(x)=1$，则$C'(w), C'(b)\约0$ .

现在，从两个角度来看，上述情况很糟糕：（1）它使梯度下降在数值上变得更加昂贵，因为即使我们离最小化 C(w,b) 还很远，我们的收敛速度也不够快，以及 (2)这与人类学习有悖常理：当我们犯了大错时，我们学得很快。

但是，如果您计算交叉熵成本函数的 C'(w) 和 C'(b)，则不会出现此问题，因为与二次成本的导数不同，交叉熵成本的导数不是$sigma'(wx+b)$，因此当逻辑回归模型输出接近 0 或 1 时，梯度下降不一定会减慢，因此收敛到最小值的速度更快。您可以在这里找到相关讨论：http: [//neuralnetworksanddeeplearning.com/chap3.html](http://neuralnetworksanddeeplearning.com/chap3.html)，我强烈推荐的优秀在线书籍！

此外，交叉熵成本函数只是用于估计模型参数的最大似然函数（MLE）的负对数，实际上在线性回归的情况下，最小化二次成本函数相当于最大化 MLE，或者等效地，最小化MLE=cross entropy 的负对数，以及线性回归的基本模型假设 -有关更多详细信息，请参见[http://cs229.stanford.edu/notes/cs229-notes1.pdf的第 12 页。](http://cs229.stanford.edu/notes/cs229-notes1.pdf)因此，对于任何机器学习模型，无论是分类还是回归，通过最大化 MLE（或最小化交叉熵）来找到参数具有统计意义，而最小化逻辑回归的二次成本没有任何意义（尽管它对于线性回归，如前所述）。

我希望它能澄清一些事情！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-29T13:54:03.257

我想说，均方误差的数学基础是误差的高斯分布，而对于逻辑回归，它是两个分布的距离：基础（基本事实）分布和预测分布。

我们如何测量两个分布之间的距离？在信息论中，它是相对熵（也称为KL散度），相对熵[相当于](https://ai.stackexchange.com/a/4185/5351)交叉熵。[而逻辑回归函数是softmax回归](https://stats.stackexchange.com/a/87270/103153)的一个特例，相当于交叉熵和[最大熵](http://www.win-vector.com/dfiles/LogisticRegressionMaxEnt.pdf)。

# android - 使用 onConfigurationChanged 旋转 Android 时 TabHost 为空

> ID：12157882
> 
> 赞同：0
> 
> 时间：2012-08-28T11:01:53.020
> 
> 标签：android, rotation, android-tabhost, onconfigurationchanged

我对 onConfigurationChanged 和 TabHost 有疑问。因为我的 Activity 在轮换时重启，所以我发现这篇文章很有帮助： [Activity restart on rotation Android](https://stackoverflow.com/questions/456211/activity-restart-on-rotation-android)

我将 gui 元素排序到函数 InitialGui()

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    InitialGui();
} 
```

覆盖 onConfigurationChanged 并调用 InitialGui()

```
@Override
public void onConfigurationChanged(Configuration newConfig)
{
    super.onConfigurationChanged(newConfig);
    setContentView(R.layout.main);
    InitialGui();
} 
```

AndroidManifest 内部

```
 <activity
        android:label="@string/app_name"
        android:name=".MyAndroidAppActivity"
        android:theme="@android:style/Theme.NoTitleBar"
        android:configChanges="keyboardHidden|orientation"
        > 
```

为简单起见，我基于 [http://www.mkyong.com/android/android-tablayout-example/](http://www.mkyong.com/android/android-tablayout-example/)创建了一个新项目 ，仅提及了更改。这是顺便说一句 InitialGui 功能

```
public void InitialGui()
{
    TabHost tabHost = (TabHost)findViewById(android.R.id.tabhost);
    tabHost.setup();

    // Android tab
    Intent intentAndroid = new Intent().setClass(this, AndroidActivity.class);
    TabSpec tabSpecAndroid = tabHost
      .newTabSpec("Android")
      .setIndicator("Android")
      .setContent(intentAndroid);

    // Apple tab
    Intent intentApple = new Intent().setClass(this, AppleActivity.class);
    TabSpec tabSpecApple = tabHost
      .newTabSpec("Apple")
      .setIndicator("Apple")
      .setContent(intentApple);

    // Windows tab
    Intent intentWindows = new Intent().setClass(this, WindowsActivity.class);
    TabSpec tabSpecWindows = tabHost
      .newTabSpec("Windows")
      .setIndicator("Windows")
      .setContent(intentWindows);

    // Blackberry tab
    Intent intentBerry = new Intent().setClass(this, BlackBerryActivity.class);
    TabSpec tabSpecBerry = tabHost
      .newTabSpec("Berry")
      .setIndicator("Berry")
      .setContent(intentBerry);

    // add all tabs 
    tabHost.addTab(tabSpecAndroid);
    tabHost.addTab(tabSpecApple);
    tabHost.addTab(tabSpecWindows);
    tabHost.addTab(tabSpecBerry);

    //set Windows tab as default (zero based)
    tabHost.setCurrentTab(2);
} 
```

我的问题是旋转后的空 TabHosts，不管点击 Tab 什么都不会显示。有什么提示吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:43:35.980

我想复杂了，没必要 setContentView(R.layout.myLayout); 或者是其他东西。只需通过覆盖 onConfigurationChanged 来阻止调用 onCreate 方法。

```
@Override
public void onConfigurationChanged(Configuration newConfig)
{
    super.onConfigurationChanged(newConfig);
} 
```

这对我有用。

# asp.net - SignalR：如何强制认证/终止集线器连接服务器端

> ID：12157883
> 
> 赞同：10
> 
> 时间：2012-08-28T11:01:54.097
> 
> 标签：asp.net, authentication, signalr

这个问题与另一个线程有关，您可以[在此处阅读：使用 SignalR 进行表单身份验证，我在用户](https://stackoverflow.com/questions/11488461/forms-authentication-with-signalr)[dfowler](https://stackoverflow.com/users/45091/dfowler) 的帮助和耐心下尝试了解如何在 SignalR 集线器上强制执行表单 ASP .NET 表单身份验证。

问题描述：我希望只有经过身份验证的用户才能连接 SignalR Hub 并接收/发送消息。

入侵场景：入侵者可能会捕获/访问访问客户端计算机上的临时文件的网页的 HTML 和 Javascript。因此，该入侵者可以知道设置/使用与 Hub 的连接所需的所有详细信息（方法、集线器名称等）。dfowler 提出的解决方案正在[实施 IConnect](https://stackoverflow.com/questions/11488461/forms-authentication-with-signalr/11519916#comment16235850_11519916)：

> 您将实现 IConnected 并在 Connect 中编写以下代码 if(!Context.User.Identity.IsAuthenticated) throw new Exception("GTFO");

因此我尝试了这样的事情

```
 public System.Threading.Tasks.Task Connect()
    {
        if (!Context.User.Identity.IsAuthenticated
            || !(Context.User.IsInRole("role1") || Context.User.IsInRole("role2")
            ))
            throw new Exception("User not authorized");
        return null;
    } 
```

问题，一旦测试，是当 Connect 方法被调用时，连接已经建立，简单地抛出异常将无济于事（如果我得到了正确的事实，应该使用 Connect 在连接时向客户端发送消息，抛出异常只会产生未发送的*欢迎消息*）。

事实上，根据我的测试，客户端仍然可以读取所有消息（并发送它们）。

现在，我想到的方法：

1.  完美的解决方案：拒绝或终止服务器端的连接：**不知道如何在 SignalR 中执行此操作**（我试图在[API](http://signalr.net/docs/api/v0.5.1/SignalR.Hubs/Hub.htm)中找到一个方法，但没有运气）
2.  检查用户是否是组的一部分以避免接收/发送消息给他（但这仍然容易受到洪水/DOS攻击）
3.  向客户端发送消息以断开连接：显然在我与入侵者作战的情况下无济于事。

还有其他方法吗？在服务器端终止连接的任何方式，或者应该接受唯一真正的身份验证是主机网页之一（为所有 signalR 客户端攻击敞开大门？）

**编辑**

`IConnect.Connect`这是我使用无条件抛出异常的方法（浏览器 IE9）时客户端 - 服务器通信的顺序：

![Connect抛出异常时的客户端-服务器通信](../Images/81cd192686e6a23c156ead59b0f443de.png)

看起来 foreverFrame 失败，但 longPolling 后备正在建立并且无论如何都可以工作 - 这是在抛出块在 Javascript 中捕获的错误之后

```
 if (connection.state === signalR.connectionState.connecting) {
            // Connection hasn't been started yet
            throw "SignalR: Connection has not been fully initialized. 
    Use .start().done() or .start().fail() to run logic after 
    the connection has started.";
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T02:43:52.990

我们有一个问题，我们需要允许完全阻止连接。现在你必须保护每一种方法。这不是最干净的，但对于 1.0 alpha1，我们将有一些机制来执行此操作。

另一个问题是所有集线器的连接都是相同的，因此您不能拒绝特定集线器的连接。

**编辑**

实际上，如果您抛出它，就我的测试而言，它确实会结束连接。你看到了什么行为？

# c# - 在库 (DLL) 中处理 ManagementEventWatcher

> ID：12157887
> 
> 赞同：0
> 
> 时间：2012-08-28T11:02:12.053
> 
> 标签：c#, dll, com

我在我的 C# 库中使用 ManagementEventWatcher，它被导入（引用）到另一个项目中。我遇到的问题是，在我的应用程序关闭之前，ManagementEventWatcher 必须“停止”和“处置”。我只被允许修改库而不是将实现库的应用程序。

我尝试了以下方法：

```
public class MyClass:IDisposable ... 
```

进而

```
 public void Dispose()
        {
            _wmiWatcherRemoved.Stop();
            _wmiWatcherRemoved.Dispose();
        } 
```

但是 Dispose 永远不会被执行。所以应用程序得到以下异常：

```
COM object that has been separated from its underlying RCW can not be used 
```

有任何想法吗？感谢你付出的努力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:52:24.957

我从您的问题的措辞中假设使用您的库的应用程序在关闭时遇到您描述的异常？

如果是这种情况，您可以尝试为 AppDomain ProcessExit 事件注册一个处理程序，在该事件中您将导致`Stop()`并`Dispose()`在观察程序实例上被调用。

# c - 如何在 C 中找到行指针？

> ID：12157891
> 
> 赞同：1
> 
> 时间：2012-08-28T11:02:15.550
> 
> 标签：c, file, file-upload, file-io

如果我读取二进制文件，我可以使用以下命令定位第 n 行：

```
fseek(fp, 4*sizeof(line),SEEK_SET); 
```

但是在 C 中读取 txt 文件时，例如：

```
1 1 2.2
2 3 3.001
3 4 5 
```

我无法确保行的字节大小，因为在实际情况下双值可以是 2.2 或 3.0001 或 5。这次如何使用 fseek 定位第 n 个？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T11:06:31.210

基本上你在问当行长度可变时如何定位第 n 行。

好吧，这样做的唯一方法是浏览文件并计算`'\n'`字符数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T11:06:58.037

简短的回答是您不能在具有可变记录长度的文件中进行随机搜索。这是移动到可变记录长度时要付出的代价。您可以通过填充将可变记录长度转换为固定记录长度。不过，这会带来额外的存储成本。如果随机搜索很重要，那么这是一个值得妥协的方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T11:07:51.173

你不能；文本文件不包含有关行长的任何信息。

您将需要阅读每个字符，并计算行尾字符。如果这太慢，那么您可以维护单独的行位置索引（在此文件的标题中或单独的文件中），或更改格式以使用固定长度的记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T11:07:09.710

你不能。您必须通读文件并计算行尾数；类似的东西：

```
void GotoLine(FILE* File, unsigned int Line)
{
    int c;

    fseek(File,0,SEEK_SET);
    while (Line>0 && (c=fgetc(File))!=EOF)
    {
        if (c=='\n') Line--;
    }
} 
```

（注意：没有错误检查:-)）

# selenium - Selenium IEDriverServer 通用标准保护：防止常用程序运行Temp文件夹中的文件

> ID：12157894
> 
> 赞同：0
> 
> 时间：2012-08-28T11:02:25.203
> 
> 标签：selenium, nunit

在我的工作地点，我们需要实现 Web 浏览器自动化测试。Selenium Web 驱动程序被选为首选选项。该公司使用 Internet Explorer 作为其客户群，因此需要使用此浏览器进行测试。

使用：

Selenium 2.25.1，IEDriverServer 2.25.3，nUnit 2.6.1

我创建了最基本的测试，然后在我的个人笔记本电脑上成功运行。

1.  创建一个 C# 类项目。添加对 Selenium、IEDriverServer（位置）和 nUnit DLL 的引用。

2.  为 nUnit 添加测试代码和类/方法装饰。

3.  构建、编译等

在 nUnit 中，找到新编译的 DLL 项目并运行它。

预期结果是 IEDriverServer 将加载并创建 Internet Explorer 实例并导航到 Google 主页。执行搜索，检查结果页面标题并解析结果链接。

当我在我的工作机器（安装了 McAfee）上运行相同的测试时，实际发生的是输入到 Google 搜索框中的每个字符（使用 SendKeys）大约需要 6-10 秒才能完成。结果，IEDriverServer 放弃并关闭。nUnit 将测试报告为失败。

四处挖掘，我可以看到 McAfee 访问保护日志有数百个条目说明“通用标准保护：防止通用程序运行临时文件夹中的文件”

我是网络自动化的新手，但我确信这是问题的根源，并且尝试了各种对注册表和环境变量的黑客攻击，但均未成功。

似乎在其他地方找不到太多关于这个问题的信息，希望你们中的一个人可以提出解决方法。

出于显而易见的原因，该公司不能放松 McAfee 功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T00:11:06.577

IE 驱动程序使用的 IEDriverServer.exe 需要使用支持库 (DLL)。与其强迫用户必须记住将这个 .DLL 与可执行文件一起部署，不如将其作为资源存储在 .exe 文件中，并在运行时提取。使用 IEDriverServer.exe 的 2.25.3.5 版本（未作为下载发布，但作为项目 Subversion 存储库中的[预构建二进制文件](http://selenium.googlecode.com/svn/trunk/cpp/prebuilt/Win32/Release)提供），您可以传递命令行开关，`-extract-path="C:\path\to\where\the\library\should\be\extracted"`. 只要该目录存在，并且您对该目录具有写入权限，支持库就会被提取到该目录中一个随机命名的文件中。

.NET 绑定已更新为包含代码以利用这个新的命令行开关作为`InternetExplorerDriverService`类的一部分。此功能将作为 WebDriver .NET 绑定的下一个公共版本的一部分提供。

# c# - 如何通过单击 wpf 中的按钮使用 TabIndex 导航光标？

> ID：12157905
> 
> 赞同：2
> 
> 时间：2012-08-28T11:03:18.557
> 
> 标签：c#, wpf

```
<Grid x:Name="LayoutRoot">
    <Button x:Name="BtnNavigateTabIndex" Content="NavigateTabIndex" Margin="152,200,0,190" HorizontalAlignment="Left" Width="120"/>
    <TextBox x:Name="TextBox_1" HorizontalAlignment="Left" Height="48" Margin="120,64,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="80"/>
    <TextBox x:Name="TextBox_2" HorizontalAlignment="Left" Height="48" Margin="120,128,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="80"/>
    <PasswordBox x:Name="PasswordBox_1" HorizontalAlignment="Left" Height="48" Margin="224,64,0,0" VerticalAlignment="Top" Width="72"/>
    <PasswordBox x:Name="PasswordBox_2" HorizontalAlignment="Left" Height="48" Margin="224,128,0,0" VerticalAlignment="Top" Width="72"/>
</Grid> 
```

设计将如下所示。

![在此处输入图像描述](../Images/62b439daf760edeafcbf690dae37ad27.png)

如果我单击按钮（NavigateTabIndex），光标应该导航到 TextBox 或 PasswordBox。对于 EX：如果您单击键盘中的 Tab 键，光标将导航。这就是我需要的场景。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T11:20:01.653

一般来说，WPF 聚焦有很多陷阱……甚至还有一些错误。

您需要了解逻辑和键盘焦点之间的区别。

*   [http://msdn.microsoft.com/en-us/library/aa969768.aspx](http://msdn.microsoft.com/en-us/library/aa969768.aspx)

使用 FocusScopes 时，您可以使用：

`MoveFocus`与`TraversalRequest(FocusNavigationDirection.Next)`

将逻辑焦点更改到范围中的下一项。

使用 FocusScopes 的替代方法是跟踪 GotFocus/LostFocus 事件并自行管理。

更多链接：

*   [如何以编程方式导航 WPF UI 元素制表位？](https://stackoverflow.com/questions/809382/how-to-programmatically-navigate-wpf-ui-element-tab-stops)

*   [移动焦点以响应 XAML 中的键盘事件](https://stackoverflow.com/questions/1626830/move-focus-in-response-to-keyboard-events-in-xaml)

*   [WPF FocusNavigationDirection、MoveFocus 和箭头键](https://stackoverflow.com/questions/5719116/wpf-focusnavigationdirection-movefocus-and-arrow-keys)

*   [定位第一个 WPF 制表位](https://stackoverflow.com/questions/809622/locating-the-first-wpf-tab-stop)

*   [http://www.codeproject.com/Articles/38507/Using-the-WPF-FocusScope](http://www.codeproject.com/Articles/38507/Using-the-WPF-FocusScope)

* * *

好的，这里有一些示例代码。我冒昧地重新设计了您对 Grid 的使用，以遵循更传统的布局实践。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfApplication5
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void BtnNavigateTabIndex_Click(object sender, RoutedEventArgs e)
        {
            UIElement focussedelement = FocusManager.GetFocusedElement(grid1) as UIElement;

            bool bmovedfocus = focussedelement.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));

            if (bmovedfocus)
            {
                UIElement withfocusnow = FocusManager.GetFocusedElement(grid1) as UIElement;

                if (withfocusnow == focussedelement) // focus didn't change! because end of focus group..need to put it back to the start
                {
                    TextBox_1.Focus();
                }
            }
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            TextBox_1.Focus();
        }
    }
}

    <Window x:Class="WpfApplication5.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:local="clr-namespace:WpfApplication5"
            Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded">
        <StackPanel>
            <Grid x:Name="grid1" FocusManager.IsFocusScope="True">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <TextBox Margin="10" Grid.Row="0" Grid.Column="0" x:Name="TextBox_1" HorizontalAlignment="Left" Height="48" TextWrapping="Wrap" VerticalAlignment="Top" Width="80"/>
                <PasswordBox Margin="10" Grid.Row="0" Grid.Column="1" x:Name="PasswordBox_1" HorizontalAlignment="Left" Height="48" VerticalAlignment="Top" Width="72"/>
                <TextBox Margin="10" Grid.Row="1" Grid.Column="0" x:Name="TextBox_2" HorizontalAlignment="Left" Height="48" TextWrapping="Wrap" VerticalAlignment="Top" Width="80"/>
                <PasswordBox Margin="10" Grid.Row="1" Grid.Column="1" x:Name="PasswordBox_2" HorizontalAlignment="Left" Height="48" VerticalAlignment="Top" Width="72"/>
                <Button FocusManager.IsFocusScope="True" Padding="20" HorizontalAlignment="Center" Grid.Row="2" Grid.ColumnSpan="2" x:Name="BtnNavigateTabIndex" Content="NavigateTabIndex"  Width="120" Click="BtnNavigateTabIndex_Click" />
            </Grid>
        </StackPanel>
    </Window> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T11:19:53.013

这行代码应该让您朝着正确的方向前进：

```
element.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next)); 
```

其中 element 是 UIElement （就像您的文本框之一）。这是以下帖子的摘录：[Moving to next control on Enter keypress in WPF](https://stackoverflow.com/questions/8203329/moving-to-next-control-on-enter-keypress-in-wpf)。你把这段代码放在按钮的点击事件处理程序上......

顺便说一句：发现什么是活动的 UIElement / 用户控件可以按照[这里](https://stackoverflow.com/questions/2159719/wpf-equivalent-to-activecontrol)的描述来完成。

# cluster-computing - 找到负责运行 Quartz 作业的节点

> ID：12157911
> 
> 赞同：2
> 
> 时间：2012-08-28T11:03:57.293
> 
> 标签：cluster-computing, quartz-scheduler, interrupt, job-scheduling

我正在使用 Quartz 1.8.5 。我的应用程序部署在集群环境中。我需要停止当前正在运行的工作，我可以按照以下方式进行操作。

```
stdScheduler.interrupt(jobName,jobGroupName); 
```

但是，我不知道哪个节点负责运行这项工作。有人可以建议，在执行这项工作期间如何获取节点信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T05:27:56.233

使用`System.getProperty("weblogic.Name")`您可以获得节点名称。

# mysql - 修改前序树遍历，只检索 n 层深？

> ID：12157915
> 
> 赞同：2
> 
> 时间：2012-08-28T11:04:07.087
> 
> 标签：mysql, tree, treeview

我刚刚开始使用这个算法，它确实是一个很棒的方法。我唯一坚持的是我怎么能只检索树中的 n 个级别，例如......

![树遍历](../Images/aa9ee95c145f5ec288f8dd2432056886.png)

*Img src = [http://www.sitepoint.com/hierarchical-data-database-2/](http://www.sitepoint.com/hierarchical-data-database-2/)（很棒的文章）*

在上图中，我如何选择 Food 的所有子项，但只有 2 层深入到树中（除了樱桃和香蕉之外的所有东西）。

**你只需要用伪代码回答，但如果你愿意，你可以用 MySQL。**

我当前的 SQL 查询如下所示：

```
SELECT `treeItems`.`ID` AS `treeItemsID`, `treeItems`.`parent`, `treeItems`.`type`

FROM 
       `treeItems`,
       (
           SELECT `lft`, `rgt` FROM `treeItems` WHERE `ID` = $parent

       ) AS `parentRow`

WHERE  `treeItems`.`lft` > `parentRow`.`lft` AND `treeItems`.`lft` < `parentRow`.`rgt` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:55:56.290

我在 SO 上发现了另一个类似的问题：[Modified preorder tree traversal: Selecting nodes 1 level deep](https://stackoverflow.com/questions/7661913/modified-preorder-tree-traversal-selecting-nodes-1-level-deep)，这帮助我解决了这个问题。

因此，我将 SQL 更改为：

```
SELECT `treeItems`.*, (COUNT(`depthJoin`.`ID`) - 1) AS `depth`
FROM   `treeItems`,

       (
       SELECT `lft`, `rgt` FROM `treeItems` WHERE `ID` = $parent

       ) AS `parentRow`

CROSS JOIN `treeItems` AS `depthJoin`

WHERE (`treeItems`.`lft` BETWEEN `depthJoin`.`lft` AND `depthJoin`.`rgt`)
AND   (`treeItems`.`lft` > `parentRow`.`lft` AND `treeItems`.`lft` < `parentRow`.`rgt`)

GROUP BY `treeItems`.`ID`
HAVING `depth` <= $maxDepth 
```

# iphone - 在 iPhone 中找不到 JSON.h 文件？

> ID：12157920
> 
> 赞同：0
> 
> 时间：2012-08-28T11:04:26.700
> 
> 标签：iphone, json, json-lib

> **可能重复：**
> [JSON.h：尝试导入 JSON 框架时找不到文件](https://stackoverflow.com/questions/8636011/json-h-file-not-found-when-trying-to-import-the-json-framework)

目前我正在使用 iphone 应用程序，使用 JSON Parser 解析本地 JSON 文件，所以我在我的项目中导入 JSON 库，然后我尝试在头文件中导入 JSON.h 文件，但错误出现在“JSON. h 文件未找到”。如何解决这个问题？请帮我。

提前致谢

下面我提到了屏幕截图供您参考

![在此处输入图像描述](../Images/a98b03ecf8b3b693b73c2d7c3e7af870.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:31:18.540

从您的项目中删除 JSON 文件夹，然后重新添加它。

请参阅[json-h-file-not-found-when-trying-to-import-the-json-framework](https://stackoverflow.com/questions/8636011/json-h-file-not-found-when-trying-to-import-the-json-framework)链接。

# javascript - insertAdjacentHTML 有问题吗？

> ID：12157924
> 
> 赞同：1
> 
> 时间：2012-08-28T11:04:45.857
> 
> 标签：javascript, jquery, html

我有两个功能。第一个是检查所有输入元素以确保它们被正确填充的那个。每件事都运行良好，但随着第二个函数开始起作用（第二个函数 'newInput()' 添加输入），第一个函数不能再应用了。

调试器说 atpositionSec = emailSec.indexOf("@") 中的 emailSec 未定义。

有没有人知道解决方案？

标记在这里：

```
<--!The HTML-->
<form method="post" action="" id="cms" name="cms" onSubmit="return error()">
<table>
     <tbody id="myInput">
          <tr>
              <td>
                  <label>Role:<span> *</span></label>
                  <input type="text" name="role" id="role" value="" class="required span3" role="input" aria-required="true" />
              </td>
              <td>
                  <label>Email:<span> *</span></label>
                  <input type="email" name="emailSec" id="emailSec" value="" class="required span3" role="input" aria-required="true" />
              </td>
              <td>
                 <button style="height: 20px;" title='Add' onclick='newInput()'></button>
              </td>     
          </tr> 
     </tbody>
     <input type="hidden" name="count" id="count" vale=""/>
</table>
    <input type="submit" value="Save Changes" name="submit" id="submitButton" title="Click here!" />
</form> 
```

第一个功能：

```
function error()
{
var emailSec = document.forms['cms']['emailSec'].value,
    role = document.forms['cms']['role'].value,
    atpositionSec = emailSec.indexOf("@"),
        dotpositionSec = emailSec.lastIndexOf(".");                     

        if( topicSec == '' || topicSec == null)
        {
            alert ("Write your Topic!");
            return false;
        }
        else if(role == '' || role == null)
        {
            alert ("Enter the Role of the email owner!");
            return false;
        }
        else if(emailSec == '' || emailSec == null || atpositionSec < 1 || dotpositionSec < atpositionSec+2 || dotpositionSec+2 >= emailSec.length)
        {
            alert ("Enter a valid Email!");
            return false;
        }
               else return true;                    

} 
```

第二个功能：

```
//The Javascript - Adding Inputs 
var i = 1,
count;

function newInput()
{
document.getElementById("myInput").insertAdjacentHTML( 'beforeEnd', "<tr><td><input   type='text' name='role" + i + "' id='role' value='' class='required span3' role='input' aria-required='true' /></td><td><input type='email' name='emailSec" + i + "' id='emailSec' value='' class='required span3' role='input' aria-required='true' /></td><td><button style='height: 20px;' title='Remove' onclick='del(this)'></button></td></tr>");

count = i;
document.forms["cms"]["count"].value = count; 
i++;
}

// Removing Inputs
function del(field) 
{
--count;
--i;
document.forms["cms"]["count"].value = count; 
field.parentNode.parentNode.outerHTML = "";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:39:14.903

问题是，在第一次添加之后，它`document.forms['cms']['emailSec']`变成了一个包含所有元素的数组`emailSec`，因此您需要使用`document.forms['cms']['emailSec'][i]`.

为了省点麻烦，您可以使用html5 中输入元素的[模式属性来自动执行此操作。](http://www.w3.org/TR/2011/WD-html5-20110525/common-input-element-attributes.html#attr-input-pattern)此外，您可以使用`<input type="email" required />`我认为几乎可以为您完成所有工作的东西。

# python - HTTP 请求对象不响应

> ID：12157932
> 
> 赞同：0
> 
> 时间：2012-08-28T11:05:10.860
> 
> 标签：python, django, django-views

我正在 Django 中制作登录表单。当我点击登录提交按钮时，它给出了一个错误

**/registration/ 处的 ValueError 视图 registration.views.login 未返回 HttpResponse 对象。**

视图文件是

```
from django.template import  loader
from django.shortcuts import render
from registration.models import Registration
from django.http import HttpResponse
def login(request):
  if request.method == 'POST':
    user = authenticate(username=request.POST['username'], password=request.POST['password'])
    if user is not None:
      if user.is_active:
        login(request, user)
        # success
        return HttpResponseRedirect('sucess')
      else:
        # disabled account
        return direct_to_template(request, 'inactive_account.html')
    else:
      # invalid login
      return direct_to_template(request, 'invalid_login.html')

def logout(request):
  logout(request)
  return direct_to_template(request, 'logged_out.html') 
```

login.html 文件是

```
<h3>Login</h3>
<form action="/login/" method="post" accept-charset="utf-8">
<label for="username">Username:--</label><input type="text" name="username" value="" id="username" /><br>
<label for="password">Password:-- </label><input type="password" name="password" value="" id="password" />
<p><input type="submit" value="Login →"></p>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:11:55.607

您的登录视图将只为 POST 请求返回一个 HttpResponse（在表单提交时）。当您将浏览器寻址到登录页面时，它会发出一个 GET 请求，您的视图中不会处理该请求

我会建议您阅读有关用户身份验证的更多信息：[doc](https://docs.djangoproject.com/en/dev/topics/auth/#how-to-log-a-user-in)。

如前所述，使用`render`或`render_to_response`功能`from django.shortcuts`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:11:05.023

而不是`direct_to_template`您可能想要使用`render_to_response`which 呈现给定模板并返回 HttpResponse。

请参阅[render_to_response](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render-to-response)。笔记; 你将不得不使用导入它`from django.shortcuts import render_to_response`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:12:28.370

你为什么不使用`render_to_response` ？

你的问题的答案是你没有返回`Httpresponse`对象

如果您的登录成功，那么只有您将被重定向到成功。

尝试这个

```
 return render_to_response(your_template_name, 
                              context_instance=RequestContext(request)) 
```

不要忘记像这样导入 context_instance

```
from django.template import RequestContext 
```

# node.js - 在 Mongoose 中关闭数据库

> ID：12157933
> 
> 赞同：0
> 
> 时间：2012-08-28T11:05:13.207
> 
> 标签：node.js, mongodb, mongoose

我有以下代码使用 Mongoose 在 Mongo 中插入记录。

```
var mongoose = require('mongoose');
var config      = require ('config');

var db = mongoose.createConnection(config.database.address, config.database.dbName);
var strCollectionName = 'category';

var CategorySchema = new mongoose.Schema({
      categoryName          : {type: String, required: true , unique: true }, 
      categoryTag           : {type: String},
      categoryDescription   : {type: String},
      createDate             : {type: Date, default: Date.now}
});

var createCategory = function (objCategory)
{

        var Category = db.model(strCollectionName, CategorySchema );

        var objSchema = new Category(objCategory);
        objSchema.save(function (err)
        {
            if (err)
                console.log ("Error");
            else
                console.log ("Success !!");

        });

} 
```

我设法使它工作。但是如果我尝试在 save 中发出 db.close () 命令，它会抛出错误，否则它很好。我的问题是我根本不需要关闭连接？Mongoose 会自动照顾它吗？- 我担心如果连接池超出限制，那么整个数据库可能会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:36:12.843

要正确执行此操作：

定义您的模型并同时告诉 Mongoose。您可以在创建连接之前执行此操作。

您之前在想使用它时告诉 Mongoose 您的架构 - 您只需要在创建架构本身时执行一次。

然后，您可以为 Mongoose 打开一个连接，该连接将在您的整个应用程序中工作（即随后使用它，您只需`require('mongoose')`）：

```
var mongoose = require('mongoose');
var config   = require ('config');

var CategorySchema = new mongoose.Schema({
    categoryName          : {type: String, required: true , unique: true }, 
    categoryTag           : {type: String},
    categoryDescription   : {type: String},
    createDate            : {type: Date, default: Date.now}
});

mongoose.model('Category', CategorySchema);

mongoose.connect(config.database.address, config.database.dbName); 
```

如果您想手动创建和管理连接，可以使用 .createConnection ，如上面的示例所示，但除非您知道自己在做什么，否则最好使用 Mongoose 的默认连接。

要创建类别：

```
// if you're in a different file to where you created your CategorySchema, var these:
var mongoose = require('mongoose'),
    Category = mongoose.model("Category");

var createCategory = function (objCategory) {
    var newCategory = new Category(objCategory);
    newCategory.save(function (err) {
        if (err)
            console.log ("Error");
        else
            console.log ("Success !!");
    });
} 
```

# linux - 如何在 linux 系统中启动 LWUIT 资源编辑器？

> ID：12157936
> 
> 赞同：1
> 
> 时间：2012-08-28T11:05:28.430
> 
> 标签：linux, lwuit, netbeans-7, lwuit-resource-editor

我正在尝试使用 NetBeans 7.2 探索 LWUIT 我正在使用 Linux 机器。在使用 LWUIT 一周后，我了解了 LWUIT Designer 或称为 LWUIT 资源编辑器……但我不知道如何在我的 linux 系统上安装/运行它。

请对此提供帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:31:54.130

您需要安装 J2ME 模拟器，例如 WTK。大多数不适用于 Linux，只能在 Windows 上运行，可能有旧版本的 WTK 可以在 Linux 上运行。

或者，您可以使用由 LWUIT 的作者（包括我自己）开发的[Codename One](http://www.codenameone.com/)并且不需要所有麻烦（在 Linux 上无缝运行）。

# iphone - 在 UITableView 单元格中显示登录用户的 FB 个人资料图片

> ID：12157938
> 
> 赞同：1
> 
> 时间：2012-08-28T11:05:31.693
> 
> 标签：iphone, facebook, facebook-graph-api, uitableview, uiimage

我是 facebook 集成的新手。在我阅读了这么多教程之后，我从 facebook SDK 中了解了一些东西。

请帮助我解决这个问题。

```
- (void)apiGraphMe
{
 currentAPICall = kAPIGraphMe;
 AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
 NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"name,picture",  @"fields",
                               nil];
 [[delegate facebook] requestWithGraphPath:@"me" andParams:params andDelegate:self];
}

- (void)request:(FBRequest *)request didLoad:(id)result
{
NSLog(@"result is------------%@",result);
if ([result isKindOfClass:[NSDictionary class]])
{
    NSLog(@"id is: %@", [result objectForKey:@"id"]); 
    NSString *idValue = [result objectForKey:@"id"];
}
} 
```

在上面的代码中，我得到了登录用户个人资料图片的 URL。我希望将该 url 图像显示到 tableView 单元格中。

我认为直接将该 url 图像传递给 tableview 单元格的 imageview 是不正确的方法。如果
我们根据它传递用户的 id，我们可以获得个人资料图片。因为如果其他用户登录，它会降低复杂性。

希望您了解问题和背景。如果有任何语法或英语错误，请原谅。

非常感谢您提前提供的任何帮助和回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T01:16:40.970

以下是在 tableview 中显示用户/朋友个人资料图像的步骤

*   您已经有用户/朋友 ID

*   声明 IBOutlet FBProfilePictureView *userProfileImage; // 确保导入 FacebookSDK/FacebookSDK.h

*   在您的 IB/Storeyboard 表格视图单元格中，拖动一个 UIView（宽 36，高 36）

*   更改此 uiview 的类（在身份检查器中更改为 FBProfilePictureView）

*   将上面的 iboutlet 连接到这个 FBProfilePictureView

*   在 cellForRowAtIndexPath 中，分配图像如下

*   (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { static NSString *CellIdentifier = @"FriendsCell";

    FriendsCell*单元格 = (FriendsCell* )[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    cell.userProfileImage.profileID = objUD.userID; 返回单元格；}

注意：我假设您有一个名为 FriendsCell 的自定义 UITableViewCell 类

在 viewDidLoad 方法中，写下面一行 [FBProfilePictureView 类]；

# c# - CSV (",") 的 CSV 读取失败，结果为单行

> ID：12157941
> 
> 赞同：0
> 
> 时间：2012-08-28T11:05:39.437
> 
> 标签：c#, csv, filestream

我正在使用 C# 开发一个将 csv 文件转换为可读格式的小型应用程序。

以下是 CSV 文件中的示例

```
"Symbol","Date","Expiry","Strike Price","Open","High","Low","Close","LTP"   
"5000","6000","4500","45855" ............ 
```

超过300行这样的。

```
public List<string[]> parseCSV(string path)
{
  List<string[]> parsedData = new List<string[]>();

  try
  {
    using (StreamReader readFile = new StreamReader(path))
    {
      string line;
      string[] row;

      while ((line = readFile.ReadLine()) != null)
      {
        row = line.Split(',');  // <<< this ',' is not working 
        parsedData.Add(row);
      }
    }
  }
  catch (Exception e)
  {
    MessageBox.Show(e.Message);
  }

  return parsedData;
} 
```

根据数据，我应该在 LTP 获得新线路，但它并没有发生，而且比我得到的结果多为 single line 。如果添加列表，即 parseData，它将显示为单行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:49:47.117

正如其他人所说，滚动您自己的 CSV 解析器很困难并且容易出错。我个人的偏好在于[FileHelpers库，为了向您展示它是多么好和容易，我在](http://filehelpers.sourceforge.net/)**您的**数据中包含了一个工作示例：

```
using System;
using FileHelpers;

namespace ConsoleApplication1
{
    internal class Program
    {
        public static void Main()
        {
            /*
            Sample data from TestData.csv
                "Symbol","Date","Expiry","StrikePrice","Open","High","Low","Close"
                "MSF","20090913","03032012","1.233","1.1","14.54","0.07","14.11"
                "APL","20111225","31122011","30.09","31.1","33.33","29.11","33.13"
            */

            var engine = new FileHelperEngine<StockModel>();
            engine.Options.IgnoreFirstLines = 1; // skip the header line

            StockModel[] stocks = engine.ReadFile(@"TestData.csv");

            Console.Read();

        }
    }

    [DelimitedRecord(",")]
    public class StockModel
    {
        [FieldQuoted('"', QuoteMode.AlwaysQuoted)]
        public string Symbol;

        [FieldQuoted('"', QuoteMode.AlwaysQuoted)]
        [FieldConverter(ConverterKind.Date, "ddMMyyyy")]
        public DateTime Date;

        [FieldQuoted('"', QuoteMode.AlwaysQuoted)]
        [FieldConverter(ConverterKind.Date, "ddMMyyyy")]
        public DateTime Expiry;

        [FieldQuoted('"', QuoteMode.AlwaysQuoted)]
        [FieldConverter(ConverterKind.Decimal, ".")]
        public decimal StrikePrice;

        [FieldQuoted('"', QuoteMode.AlwaysQuoted)]
        [FieldConverter(ConverterKind.Decimal, ".")]
        public decimal Open;

        [FieldQuoted('"', QuoteMode.AlwaysQuoted)]
        [FieldConverter(ConverterKind.Decimal, ".")]
        public decimal High;

        [FieldQuoted('"', QuoteMode.AlwaysQuoted)]
        [FieldConverter(ConverterKind.Decimal, ".")]
        public decimal Low;

        [FieldQuoted('"', QuoteMode.AlwaysQuoted)]
        [FieldConverter(ConverterKind.Decimal, ".")]
        public decimal Close;
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-28T12:21:11.893

您的代码按预期工作。只需复制/粘贴它，它就会返回一个包含 2 个元素的列表，每行一个。每个元素都是一个字符串数组，第一个有 9 个元素，第二个有 4 个。

关于“停止重新发明轮子”，我个人不同意。解析 CSV 文件是一个简单的过程，您只需逐行读取并调用`.Split(delimiter)`. 如果这样一个简单的过程需要一个特定的库，那么每个项目都会有 500 多个依赖项。

如果您没有特殊要求，例如多个分隔符、异步解析或您自己的代码尚不支持的任何内容，我不会使用 lib。

请记住，使用 lib 还会在您的项目中引入许多潜在问题（许可证问题、可测试性、代码的可扩展性，这通常不是微不足道的，因为您不拥有代码、可移植性、错误......）。

# delphi - 如何调试使用 regsvr32.exe 制作的 64 位 dll 注册过程？

> ID：12157942
> 
> 赞同：4
> 
> 时间：2012-08-28T11:05:48.540
> 
> 标签：delphi, debugging, dll, delphi-xe2, regsvr32

我有

> ADDRESS 处的运行时错误 216

注册使用 Delphi XE2 构建的 64 位 dll 时（我有更新 3）。

从命令提示符我做（注意：system32 文件夹包含 64 位 exe！）

```
c:\windows\system32\regsvr32.exe My64bitdll.dll 
```

在“dll 成功安装消息”之后，我遇到了运行时错误。

我想以某种方式使用 Run/Parameters/host 来调试注册过程。

任何人都可以发布正确的程序吗？在像[这个这样](https://stackoverflow.com/questions/8067211/delphi-xe2-debug-a-64-bit-dll-through-a-64-bit-app)的其他一些问题中，提到了一个错误，但现在[似乎已修复](http://qc.embarcadero.com/wc/qcmain.aspx?d=100309)，我有一个比这个更旧的 delphi 版本。

**更新：** 欢迎对 RunTime 错误发表任何评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T12:03:59.933

1.  加载 DLL 项目。
2.  修改运行参数 ( **Run** | **Parameters** ) 以将主机应用程序指定为 regsvr32。请注意，您可能需要使用 C:\Windows\sysnative 路径来阻止 32 位文件系统重定向器。
3.  包括 DLL 的路径作为命令行参数。
4.  也许启用调试 DCU，以防在 Delphi COM 自注册代码中出现错误。

![在此处输入图像描述](../Images/91aa8cbf7d4f157816fd9b105a5c2c4e.png)

然后像调试任何其他 DLL 一样调试 DLL。

运行时错误 216 是访问冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:53:28.850

1）这个运行时错误可能只是程序退出。例如，您是否会调试 DllMain 的内部结构，您可以轻松地越过退出点并尝试跟踪结束的 DLL，这将通过 RE。进程退出看起来不像从子程序返回 - 而是对特殊系统 API 函数的调用。但是调试器不理解它并继续跟踪现在​​死掉的项目。

2) 我认为使用 RegSvr32.exe 或 TRegSvr.exe 进行调试没有意义。RegSvr32 所做的只是从 DLL 调用预定义的函数。您是否调试您的 DLL 或 RegSvr32 本身？

2.1) 如果是后者 - 我听说有 RegSvr32 的来源，并且可能有调试符号，但要使用一些 Microsoft 调试器。

2.2）如果以前，那么现在应该有区别如何调用这些函数，你只需要调试这些函数。只需在[使用 TFileRun 和 regsvr32 注册 DLL 时从 File not found 中](https://stackoverflow.com/questions/12123261)获取任何代码并将其用作主机。

# programming-languages - 什么时候适合使用 C++ 而不是高级语言？

> ID：12157948
> 
> 赞同：-5
> 
> 时间：2012-08-28T11:06:06.057
> 
> 标签：programming-languages

什么时候使用 C/C++ 比使用非常高级的编程语言（如 python）更合适？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T11:11:01.283

无数个理由...

1.  您需要使用在 C 或 C++ 中效果最好的基本库
2.  你对学习一门新语言不感兴趣
3.  您需要访问 Python 中不可用的系统 API 或资源
4.  您的项目结构更适合 C 或 C++ 的语法
5.  您想使用 Python 中无法获得的 C 或 C++ 功能，尤其是编译时检查。或者你知道，`switch`陈述。
6.  外部工具支持，例如静态分析对于 Python 来说要困难得多。
7.  表现
8.  该项目已经用 C++ 编写，您不想移植它
9.  您希望确保它可以在没有解释器的最小安装上运行
10.  您需要以可调试小型转储的形式从客户端机器调试信息
11.  你只是不*喜欢*Python

...

# php - .htaccess 不工作

> ID：12157952
> 
> 赞同：0
> 
> 时间：2012-08-28T11:06:13.407
> 
> 标签：php, apache, .htaccess, mod-rewrite

我已经购买了带有 level1 的主机 gator vps 服务器，并且必须在上面部署我的 zend 应用程序，但是我的重写规则不起作用，我尝试了最简单的

```
RewriteRule ^test.html http://www.google.com [NC,L] 
```

但没有运气

我在 httpd.conf 中重写了引擎，并且`AcssesFile .htaccess`在这里检查了设置是我的 .htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

我已经提出了票，但他们不会在 1 级套餐上帮助我:) ...任何建议或指导都会非常有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:30:46.363

您是否允许在您的 httpd.conf 文件中覆盖？

```
Options Indexes FollowSymLinks

#
# AllowOverride controls what directives may be placed in .htaccess files.
# It can be "All", "None", or any combination of the keywords:
#   Options FileInfo AuthConfig Limit
#
AllowOverride All 
```

如果它设置为 none 则您不能使用 htaccess 文件。将其更改为全部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:56:32.807

啊得到了解决方案：我没有在 httpd.conf 中配置虚拟主机现在一切正常 -

# c# - C# - 如何将 MultiSelectList 初始化为空？

> ID：12157953
> 
> 赞同：2
> 
> 时间：2012-08-28T11:06:20.787
> 
> 标签：c#, asp.net-mvc-3

有谁知道如何将 MultiSelectList 初始化为空？

我有一个 ListBoxFor 控件 (MVC3)，我希望用户通过使用网页上的其他文本和按钮控件来填充它。

它不喜欢我评论下面的行......

提前谢谢了

```
Items = new MultiSelectList(
    new[] 
    {
        //new { Id = 1, Name = "item 1" }                        
    },
    "Id",
    "Name",
    selectedItemIds
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:39:29.717

当您创建这样的 MultiSelectList 时，编译器检查的一件事是您提供的列表（IEnumerable）中是否确实存在`Id`和`Name`字段。您的代码的问题是没有命名的元素`Id`，并且`Name`当您发送一个空的匿名对象数组时，编译器无法断定这是有效的代码。

如果您希望能够发送一个空数组，则必须避免使用匿名类型。

尝试这个：

```
 public struct myListType
    {
        public int Id;
        public string Name;
    } 
```

现在您可以按如下方式创建 MultiSelectList：

```
Items = new MultiSelectList(
    new List<myListType>(),
    "Id",
    "Name"
); 
```

我省略了 selecteditemIDs，因为当列表为空时它没有用，它只会产生问题。

虽然我仍然不确定你为什么要这样做。我怀疑有更好的方法，如果你能详细说明你的意图。

# css - 在 Firefox 和 chrome 中查看时网站外观的差异

> ID：12157956
> 
> 赞同：0
> 
> 时间：2012-08-28T11:06:27.557
> 
> 标签：css

[在 chrome www.nextag.com/camera/stores-html](http://www.nextag.com/camera/stores-html)中打开以下 URL 并刷新页面

请注意右上角邮政编码旁边的帮助图标的位置..它未对齐现在在Firefox中打开相同的..它已正确对齐..

CSS 代码如下：

```
background: none repeat scroll 0 0 white;
border: 1px solid #C2CCCC;
border-radius: 4px 4px 4px 4px;
color: #C2CCCC;
display: block;
float: right;
font-weight: bold;
height: 13px;
margin-left: 4px;
text-align: center;
width: 12px;
padding-right: 1px; 
```

让它在 Firefox 中工作。我添加了以下 3 个属性：

```
position: relative;
top: -15px;
left: 18px; 
```

然后它开始在chrome中正常工作，但现在它在firefox中错位了..我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:17:38.467

您是否尝试过使用“*位置：绝对*”属性而不是“*位置：相对*”？

似乎 Firefox 有一个不可见的填充或边距，将元素放置在文本空间的右上角。Chrome 将该元素放置在文本流之外的 fieldset 元素的右上角。

您可以做一件事添加一个 div 包装器，然后将元素绝对定位在包装器的右上角。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:25:45.043

添加属性`float:left`

```
.rb #zipTxt a {
color: #2283AB;
font-size: 12px;
font-weight: bold;
float: left;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T20:41:20.963

您在 A 中有一个 SPAN。只需禁用“float：right”属性并添加“display：inline”

```
.rb span.zip-info {
    dispay: inline;
    float: none;
} 
```

# c# - Linq 更新查询

> ID：12157959
> 
> 赞同：-1
> 
> 时间：2012-08-28T11:06:36.650
> 
> 标签：c#, asp.net, linq

我想更新现有记录。我也调试了我的代码。int id 变量获取值，但我不知道为什么我的记录没有更新。

```
SQLDBDataClassesDataContext dContext = new SQLDBDataClassesDataContext();
protected void Page_Load(object sender, EventArgs e)
{
    //if (!IsPostBack)
    {
        if (!string.IsNullOrEmpty(Request.QueryString["fname"]))
        {
            FirstNameTextBox.Text = Request.QueryString["fname"];
        }
        if (!string.IsNullOrEmpty(Request.QueryString["lname"]))
        {
            LastNameTextBox.Text = Request.QueryString["lname"];
        }
        if (!string.IsNullOrEmpty(Request.QueryString["cellnum"]))
        {
            CellNumberTextBox.Text = Request.QueryString["cellnum"];
        }
    }
}

protected void UpdateButton_Click(object sender, EventArgs e)
{
    int id = Convert.ToInt32(Request.QueryString["id"]);
    var updatequery1 = dContext.PersonalDetailTables
        .Where(pd => pd.ID == id).SingleOrDefault();

    if (updatequery1 != null)
    {
        updatequery1.FirstName = FirstNameTextBox.Text;
        updatequery1.LastName = LastNameTextBox.Text;
        updatequery1.CellNumber = CellNumberTextBox.Text;
        dContext.SubmitChanges();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:17:18.993

if (updatequery1 != null)

updatequery1 是空的吗？如果是现在，它会直接跳过。设置断点并单步执行。

或者，将 .SingleOrDefautl 更改为 .Single。这样，如果什么都没找到，你会得到一个异常，你就会知道发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:45:18.427

调用`dContext.InsertOnSubmit(fooentity)`前调用方法`dContext.SubmitChanges();`。

例如。

```
 var ctx = DB.fooDB;
        fooobj.fooName= bar.fooName;
        fooobj.fooID= bar.fooID;
        if (fooobj.fooID== 0)
            ctx.Locations.InsertOnSubmit(bar);
        ctx.SubmitChanges(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:50:48.593

我有我的解决方案.. 唯一的问题是 if(!ispostback) 问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-20T09:40:39.370

```
context.InvProductStockMasters
       .Update(ps => ps.LocationID.Equals(invStockAdjustmentHeader.LocationID) 
                  && ps.ProductID.Equals(invStockAdjustmentDetail.ProductID), 
               ps => new InvProductStockMaster 
                          { Stock = ps.Stock - invStockAdjustmentDetail.OrderQty }); 
```

# java - directshow 什么是最好的组件

> ID：12157960
> 
> 赞同：-2
> 
> 时间：2012-08-28T11:06:38.043
> 
> 标签：java, c++, swing, directshow, win32com

大家好，请我需要一些信息，我已经使用directshow &c++ 创建了应用程序进行图像处理，所以问题是我需要创建一个复杂的GUI 我使用的win32 组件不能满足我的需求和我的期望，而且难以调整特别是事件，所以我找到了一个我想使用 jni 的解决方案，并将 c++ 的功能与 java 的 swing 组件合并。另一种选择是使用窗口窗体（.net），但如果我是对的，我需要使用 directshow.net（我不知道如何使用它）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:37:49.107

“但如果我是对的，我需要使用 directshow.net”。不，不是。您可以在 C++ 中创建一个包含当前代码的 activex 控件，并在带有 Windows.Forms 的 .Net 中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:46:28.980

Qt 通常被称为构建 GUI 的最佳 C++ 框架。

Windows 窗体非常好。不要害怕使用 DirectShow.Net，它看起来与 C++ 非常相似，但更简单。您可以查看[GraphEditPlus](http://www.infognition.com/GraphEditPlus/)，它可以在 C++ 和 C# 中生成 DirectShow 图形构建代码（用于 DirectShow.Net），因此您可以看到相同代码在两种语言中的语义外观。此外，GraphEditPlus 本身是使用 DirectShow 的 Windows 窗体应用程序的一个示例。

# jquery - 如何使 OpenLayers.Popup 可拖动？

> ID：12157961
> 
> 赞同：0
> 
> 时间：2012-08-28T11:06:38.430
> 
> 标签：jquery, jquery-ui, popup, openlayers

我使用了如下的 jquery-ui 可拖动选项，但是一旦开始拖动，移动弹出窗口就无法结束。有没有其他方法可以使 OpenLayers.Popup 可拖动？

```
popup = new OpenLayers.Popup.AnchoredBubble(
                                           "JInfo",                                                                // id
                                           jFeature.geometry.getBounds().getCenterLonLat(),  // lonlat
                                           new OpenLayers.Size(ISA.Size.POPUP_WIDTH, ISA.Size.POPUP_HEIGHT),
                                           html,                                           // contentHTML
                                           null,                                              // anchor
                                           true,                                             // closeBox
                                           function() {                                    // closeBoxCallback
                                                      jSelectControl.unselect(jFeature);
                                           });

                    jFeature.popup = popup;
                    map.addPopup(popup);

                    $("#JInfo").draggable(); 
```

提前感谢您的帮助，

亚瑟敏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T18:43:06.170

用解决方案检查我写的[这篇](http://aamirafridi.com/openlayers/openlayers-draggable-popups)博客文章。

```
/*
 * Move a popup with a drag.
 * 
 * @author Matt Walker
 * @class
 */
OpenLayers.Control.DragPopup = OpenLayers.Class(OpenLayers.Control, {
    down: false,
    popPnt: null,
    mapPnt: null,
    popup: null,
    docMouseUpProxy: null,
    /**
     * Constructor: OpenLayers.Control.DragPopup
     * Create a new control to drag a popup.
     *
     * Parameters:
     * @param {OpenLayers.Popup} popup
     * @param {Object} options
     */
    initialize: function(popup, options) {
        OpenLayers.Control.prototype.initialize.apply(this, [options]);
        this.popup = popup;
        this.popup.events.register('mousedown', this, this.mouseDown);
        this.popup.events.register('mouseup', this, this.mouseUp);
        this.popup.events.register('mousemove', this, this.mouseMove);
        // Define a function bound to this used to listen for
        // document mouseout events
        this.docMouseUpProxy = OpenLayers.Function.bind(this.mouseUp, this);
    },

    /**
     * Method: setMap
     * Set the map property for the control.
     *
     * Parameters: 
     * map - {<OpenLayers.Map>} The controls map.
     */
    setMap: function(map) {
        OpenLayers.Control.prototype.setMap.apply(this, [map]);
        this.map.events.register('mousemove', this, this.mouseMove);
    },

    mouseDown: function(evt) {
        //console.log('mouseDown');
        this.down = true;
        this.popPnt = this.popup.events.getMousePosition(evt);
        OpenLayers.Event.observe(document, 'mouseup', this.docMouseUpProxy);
        OpenLayers.Event.stop(evt);
    },

    mouseUp: function(evt) {
        //console.log('mouseUp');
        this.down = false;
        OpenLayers.Event.stopObserving(document, 'mouseup', this.docMouseUpProxy);
        OpenLayers.Event.stop(evt);
    },

    mouseOut: function(evt) {
        //console.log('map.mouseOut');
        this.down = false;
        OpenLayers.Event.stop(evt);
    },

    mouseMove: function(evt) {
        //console.log('mouseMove');
        if (this.down) {
            var mapPntPx = this.map.events.getMousePosition(evt);
            mapPntPx = mapPntPx.add((this.popPnt.x*-1), (this.popPnt.y*-1));
            this.popup.lonlat = this.map.getLonLatFromViewPortPx(mapPntPx);
            this.popup.updatePosition();
        }
        OpenLayers.Event.stop(evt);
    },

    destroy: function() {
        // Remove listeners
        this.popup.events.unregister('mousedown', this, this.mouseDown);
        this.popup.events.unregister('mouseup', this, this.mouseUp);
        this.popup.events.unregister('mousemove', this, this.mouseMove);
        this.map.events.unregister('mousemove', this, this.mouseMove);
        // Clear object references
        this.popup = null;
        this.popPnt = null;
        // allow our superclass to tidy up
        OpenLayers.Control.prototype.destroy.apply(this, []);
    },

    /** @final @type String */
    CLASS_NAME: "OpenLayers.Control.DragPopup"
}); 
```

# content-management-system - 用于 ModelAdmin 管理页面的 silverstripe dopublish 功能

> ID：12157964
> 
> 赞同：0
> 
> 时间：2012-08-28T11:06:42.660
> 
> 标签：content-management-system, silverstripe, modeladmin

在 silverstripe 后端，我通过 ModelAdmin 管理某些 PageTypes。到目前为止效果很好，我唯一不知道的是如何在保存页面时使页面“发布”。

那是我的代码：

```
class ProjectPage extends Page { 
    public function onAfterWrite() {
        $this->doPublish();
        parent::onAfterWrite();
    }
} 
```

目前我仍然可以在 Sitetree 中看到 ModelAdmin 创建的页面，并且我可以看到它们处于草稿模式。如果我使用上面的代码，我会收到此错误：Maximum execution time of 30 seconds exceeded in .../framework/model/DataList.php

非常感谢，弗洛里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:00:25.700

我发现了同样的需求/缺乏，我建立了一个似乎对我有用的解决方法，也许它可能有用。

```
public function onAfterWrite()
{
if(!$this->isPublished() || $this->getIsModifiedOnStage())
{
    $this->publish('Stage', 'Live');
    Controller::curr()->redirectBack(); 
}
parent::onAfterWrite();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:17:08.770

创建一个扩展`ModelAdmin`并定义一个`updateEditForm`函数的类，以将发布按钮添加`GridFieldDetailForm`到`GridField`.

```
public function updateEditForm($form) {

    if ( ! singleton($this->owner->modelClass)->hasExtension('Versioned') ) return;

    $gridField = $form->Fields()->fieldByName($this->owner->modelClass);
    $gridField->getConfig()->getComponentByType('GridFieldDetailForm')->setItemEditFormCallback(function ($form) {
        $form->Actions()->push(FormAction::create('doPublish', 'Save & Publish'));
    });
} 
```

然后创建一个扩展的类，`GridFieldDetailForm_ItemRequest`为您的发布按钮提供一个操作处理程序。

```
public function doPublish($data, $form) {
    $return = $this->owner->doSave($data, $form);
    $this->owner->record->publish('Stage', 'Live');
    return $return;
} 
```

确保应用了扩展并且您已完成。

或者，您可以[从 GitHub 获取您需要的所有代码](https://github.com/drzax/silverstripe-bits/tree/master/VersionedModelAdmin)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T18:21:17.103

你得到“超过最大执行时间”的原因是因为`$this->doPublish();`调用`$this->write();`然后调用`$this->onAfterWrite();`. 在那里你有你的无限循环。所以这样做`onAfterWrite()`或`write()`实际上不起作用

你应该只显示保存和发布按钮而不是保存按钮但我想它说起来容易做起来难。好吧，添加一个按钮实际上只是几行代码，但我们还需要提供执行按钮所说的功能的功能。

这听起来像是创建一个允许在模型管理中正确处理页面的新模块的完美调用。我在SS2.4里做过这个，在SS3里怎么做也有一个不错的想法，但是这周没时间，周末在silverstripe irc频道戳我，也许我周末有时间。

# android - Android - 使用蓝牙从 sd 共享文件

> ID：12157965
> 
> 赞同：0
> 
> 时间：2012-08-28T11:06:42.453
> 
> 标签：android, file, bluetooth, send

我试图从我的`SD`using发送文件`Bluetooth`。我正在使用共享意图，我想从我的 SD (. `mp3`) 发送一个文件。好的，当我打开共享菜单时，我可以发送文件到`email, dropbox, whatsapp`，但是如果我选择蓝牙，我的设备会显示一条消息“ `File null was not sent to ...`”

我的步骤是： 1\. 创建发送意图。2\. 将我的文件从 res/raw 复制到 SD 3\. 将我的文件添加到 putExtra 4\. 删除文件（是临时文件）

编码：

```
Intent shareIntent=new Intent(android.content.Intent.ACTION_SEND);
        shareIntent.setType("audio/mp3");
        //Copiamos archivo a compartir en la sd
        String baseDir = Environment.getExternalStorageDirectory().getAbsolutePath();
        String fileName = sonidoActual+"-temp.mp3";

        File newSoundFile = new File(baseDir, fileName);

        try {
            byte[] readData = new byte[1024*500];
            InputStream fis = getResources().openRawResource(contexto.getResources().getIdentifier(sonidoActual,"raw", contexto.getPackageName()));
            FileOutputStream fos = new FileOutputStream(newSoundFile);
            int i = fis.read(readData);

            while (i != -1) {
                fos.write(readData, 0, i);
                i = fis.read(readData);
            }

            fos.close();
        } catch (IOException io) {
        }

        ////
        shareIntent.putExtra(Intent.EXTRA_STREAM,Uri.parse(newSoundFile.getAbsolutePath())/*Uri.parse("file:///sdcard/"+fileName)*//*Uri.parse("android.resource://com.genaut.instantbuttonsfreak/raw/"+texto)*/);
        startActivity(Intent.createChooser(shareIntent,getString(R.string.share)));
        //
        newSoundFile.delete(); 
```

任何人都可以帮助我吗？我读了很多但没有找到工作方法，对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:12:59.060

我认为您的文件不是由`File-I/O`.

所以.. 试试`flush()`FileOutPutStream .. 像，

```
fos.flush();
fos.close(); 
```

然后，使用`Uri.fromFile(File file)`for uri 与 Intent 一起传递。但在将 Uri 传递给 Intent 之前，只需检查文件是否存在。

像，

```
if(newSoundFile.exist())
{
 shareIntent.putExtra(Intent.EXTRA_STREAM,Uri.fromFile(newSoundFile))
 startActivity(Intent.createChooser(shareIntent,getString(R.string.share)));
 newSoundFile.delete();
} 
```

# asp.net - ASP.NET 如何将 HttpContext Profile 添加到不同的用户

> ID：12157966
> 
> 赞同：0
> 
> 时间：2012-08-28T11:06:45.403
> 
> 标签：asp.net

我正在使用 ASP.NET 4.0 WebApplication 项目

以下将用户名保存到我的 current.profile

```
System.Web.HttpContext.Current.Profile["UserName"] = userName 
```

我想向所有用户添加一个名为 Company 的新配置文件，其值为“MyCompany”。它应该是这样的：

```
for all users....
{
    System.Web.HttpContext["SpecificUser"].Profile["Company"] = "MyCompany"
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:26:48.363

您不能访问每个人的 HttpContext，但是，您可以将其写入每个配置文件，假设您知道用户的[配置文件 user ID](https://stackoverflow.com/questions/5019119/sqlprofileprovider-can-you-use-profile-getprofile-in-a-project)。如果您手边没有他们的用户 ID，您可能希望通过存储过程直接将其写入数据库。要点是您需要将其写入配置文件数据库以便为所有用户共享它。

# jsf - JSF h 中的修剪字符串：outputText 值

> ID：12157969
> 
> 赞同：3
> 
> 时间：2012-08-28T11:06:57.663
> 
> 标签：jsf, trim

有没有办法将 JSF h:outPutTextValue 字符串化？我的字符串是 AB-A03，我只想显示最后 3 个字符。openfaces 有任何可用的功能吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T11:50:36.120

您可以使用 a[`Converter`](http://docs.oracle.com/javaee/6/api/javax/faces/convert/Converter.html)来完成这项工作。JSF 有几个内置转换器，但没有一个适合这种非常具体的功能要求，因此您需要创建一个自定义的转换器。

比较简单，`Converter`按照它的约定实现接口即可：

```
public class MyConverter implements Converter {

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object modelValue) throws ConverterException {
        // Write code here which converts the model value to display value.
    }

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String submittedValue) throws ConverterException {
        // Write code here which converts the submitted value to model value.
        // This method won't be used in h:outputText, but in UIInput components only.
    }

} 
```

如果您使用的是 JSF 2.0（您的问题历史证实了这一点），您可以使用`@FacesConverter`注释来注册转换器。您可以使用（默认）`value`属性为其分配转换器 ID：

```
@FacesConverter("somethingConverter") 
```

*（其中“某物”应代表您尝试转换的模型值的特定名称，例如“邮政编码”或其他名称）*

以便您可以按如下方式引用它：

```
<h:outputText value="#{bean.something}" converter="somethingConverter" /> 
```

对于*您的特定*功能要求，转换器实现可能如下所示（假设您*实际上*想要拆分`-`并仅返回最后一部分，这比“显示最后 3 个字符”更有意义）：

```
@FacesConverter("somethingConverter")
public class SomethingConverter implements Converter {

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object modelValue) throws ConverterException {
        if (!(modelValue instanceof String)) {
            return modelValue; // Or throw ConverterException, your choice.
        }

        String[] parts = ((String) modelValue).split("\\-");
        return parts[parts.length - 1];
    }

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String submittedValue) throws ConverterException {
        throw new UnsupportedOperationException("Not implemented");
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T11:50:15.030

您可以尝试使用[JSTL](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/)`fn:substring`中的函数：

```
${fn:substring('A-B-A03', 4, 7)} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T19:30:21.853

如果你的字符串来自一个 bean，你可以添加一个额外的 getter 来返回修剪后的版本：

```
private String myString = "A-B-A03";

public String getMyStringTrimmed()
{
  // You could also use java.lang.String.substring with some ifs here
  return org.apache.commons.lang.StringUtils.substring(myString, -3);
} 
```

现在您可以在 JSF 页面中使用 getter：

```
<h:outputText value="#{myBean.myStringTrimmed}"/> 
```

# php - Codeigniter：如何在将表单提交给控制器之前加密密码？

> ID：12157970
> 
> 赞同：6
> 
> 时间：2012-08-28T11:07:03.733
> 
> 标签：php, security, codeigniter, encryption, passwords

我有一个简单的`html`登录表单

```
<form method="post" action="http://www.example.com/login">
    <input type="text" name="text_box" />
    <input type="password" name="pass_word" />
    <input type="submit" name="submit">
</form> 
```

当我提交表单并在控制器中

```
public function login(){
    $pass_word = $this->input->post('pass_word');
    die($pass_word);
} 
```

这里的问题，它显示的是普通密码，如果我输入`123456`controller ，我会得到`123456`.

1.  这是一个安全问题吗？
2.  任何人都可以通过网络监控工具获取我的密码`wireshark`吗？

如何避免这种情况？在发送到控制器之前，我可以在视图中加密密码吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T12:54:18.117

如果您的帖子数据（密码等）被拦截，那么它只会以纯文本形式显示。使用 SSL/HTTPS 将为您发送的数据提供加密。我不会依赖客户端 JavaScript 或任何类似的东西来验证/登录用户。看到正在使用安全连接，这也可能让您的用户更有信心。

首先，我刚刚阅读了有关 SSL 和 HTTPS 的一般信息，以及 SSL 证书 - Wiki、Google 和 SO 都是不错的地方，那里有大量信息。

对于在 CI 中使用 SSL/HTTPS，我发现这些很有用：

*   [http://sajjadhossain.com/2008/10/27/ssl-https-urls-and-codeigniter/](http://sajjadhossain.com/2008/10/27/ssl-https-urls-and-codeigniter/)
*   [http://nigel.mcbryde.com.au/2009/03/working-with-ssl-in-codeigniter/](http://nigel.mcbryde.com.au/2009/03/working-with-ssl-in-codeigniter/)
*   [如何让 CodeIgniter 使用 SSL 加载特定页面？](https://stackoverflow.com/questions/1500527/how-to-use-ssl-with-codeigniter)

特别是[Nigel 帖子](http://nigel.mcbryde.com.au/2009/03/working-with-ssl-in-codeigniter/)中的 force ssl 函数：

> 在 application/helper 中创建一个名为 ssl_helper.php 的文件

```
if (!function_exists('force_ssl'))
{
    function force_ssl()
    {
        $CI =& get_instance();
        $CI->config->config['base_url'] =
                 str_replace('http://', 'https://',
                 $CI->config->config['base_url']);
        if ($_SERVER['SERVER_PORT'] != 443)
        {
            redirect($CI->uri->uri_string());
        }
    }
}

function remove_ssl()
{
    $CI =& get_instance();
    $CI->config->config['base_url'] =
                  str_replace('https://', 'http://',
                  $CI->config->config['base_url']);
    if ($_SERVER['SERVER_PORT'] != 80)
    {
        redirect($CI->uri->uri_string());
    }
} 
```

> 加载帮助程序，然后在任何需要 ssl 的控制器的构造函数中，只需插入：
> 
> `force_ssl();`
> 
> 在您不想放置 ssl 的每个控制器中：
> 
> `if (function_exists('force_ssl')) remove_ssl();`

这是一种编程方法，另一种方法是使用 .htaccess（如果您使用的是 Apache）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T11:50:49.270

是的，这绝对是一个安全问题。就像你说的，任何拥有 Wireshark（或类似）的人都有可能拦截它。

这可能不是您想要依赖 JavaScript 的事情。通常你会使用 SSL/HTTPS 之类的东西，有一篇博客文章（有点旧）详细说明了如何使用 CodeIgniter 进行操作，但是它很常见，所以你可以通过一些谷歌搜索找到更新的教程。

[http://sajjadhossain.com/2008/10/27/ssl-https-urls-and-codeigniter/](http://sajjadhossain.com/2008/10/27/ssl-https-urls-and-codeigniter/) http://nigel.mcbryde.com.au/2009/03/working-with-ssl-in-codeigniter/ .

更新：Lefter 的答案提供了更多详细信息并且是正确的，请同时查看/代替

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T11:20:50.783

浏览[http://codeigniter.com/user_guide/libraries/encryption.html](http://codeigniter.com/user_guide/libraries/encryption.html)。此处描述了有关加密和解密的所有内容。

执行数据加密并将其作为字符串返回。例子：

```
$pass_word = $this->encrypt->encode(input->post('pass_word')); 
```

解密编码的字符串。例子：

```
$encrypted_pass_word = 'APANtByIGI1BpVXZTJgcsAG8GZl8pdwwa84';

$plaintext_pass_word = $this->encrypt->decode($encrypted_pass_word); 
```

如果您不想在配置文件中使用第二个参数，则可以选择通过第二个参数传递您的加密密钥。通过链接阅读有关它的详细说明。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-26T08:28:44.477

```
$password = sha1($this->input->post('password'));

or 

$hash= $this->input->post('password');

$password= $this->encrypt->sha1($hash); 
```

> 您可以使用**md5**代替**sha1**，但**sha1**比**md5**更**安全**……而且**md5 和 sha1** 都是**不可解码的**

 ******* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-23T07:19:18.463

使用 https 有一种更简单的方法。

我在 ./application/config/config.php 文件中添加了以下几行，它运行良好：

```
$protocol = ( isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == 'on' ) ? 'https' : 'http';
$config['base_url'] = $protocol.'://www.yoursite.com'; 
```******

# android - Android TextSwitcher 设置颜色

> ID：12157974
> 
> 赞同：0
> 
> 时间：2012-08-28T11:07:22.677
> 
> 标签：android

我有一块可与 TextSwitcher 配合使用的数字手表。我想添加颜色选择。我添加了 ColorPicker AmbilWarna（作品）。问题：如果我选择只设置几秒钟的颜色。手表的形式是H:MM:SS。应用程序关闭并打开后，整个手表的颜色会发生变化。我如何立即设置整体？如何一次设置数字时钟的颜色？

```
public View makeView() {
    //for ColorPicker AmbilWarna
    int color = PreferenceManager
            .getDefaultSharedPreferences(BedClock.this).getInt(
                    COLOR_PREFERENCE_KEY, Color.WHITE);
    //****************************************************************
    textView = (TextView) LayoutInflater.from(
            getApplicationContext()).inflate(R.layout.bedclock_text,
            mSwitchHour, false);
    textView.setTextColor(color);
    return textView;

} 
```

# winapi - 在win32编程中创建窗口之前注册它

> ID：12157975
> 
> 赞同：0
> 
> 时间：2012-08-28T11:07:25.183
> 
> 标签：winapi, visual-c++

当我们注册一个窗口时，我们必须在注册另一个窗口之前创建它。

我在此页面上阅读了它（图：Windows 之后的下一行）

[http://zetcode.com/gui/winapi/firststeps/](http://zetcode.com/gui/winapi/firststeps/)

并想知道为什么????

还是它只是一个好的编程实践？？？？

我是一个试图学习win32编程的新手。帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:05:30.530

> 当我们注册一个窗口时，我们必须在注册另一个窗口之前创建它。

这不是真的。唯一重要的是您不能创建某个类的窗口，除非该类已经注册。

在实践中这样做也很常见，我看不出有任何理由将其视为最佳实践。许多实际程序在初始化期间注册它们在运行时可能需要的所有窗口类，然后在应用程序的生命周期内任意创建窗口临时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:10:00.127

该页面说*“要创建一个窗口，我们必须先注册它”*。这并不意味着您必须在注册后创建它，只是在注册之前您无法创建它。

您可以注册任意数量的窗口类，而无需创建任何一个。

# c# - 使用反射获取继承 Type X 的 Usercontrol

> ID：12157983
> 
> 赞同：1
> 
> 时间：2012-08-28T11:07:45.780
> 
> 标签：c#, asp.net, reflection

给定 Web 应用程序中的这个 usercontrol ascx：

```
<%@ Control Language="C#" Inherits="TypeX" Codebehind="TypeX.ascx.cs" %> 
```

当我开始时是否可以使用反射来获取用户控件：

```
Type targetType = typeof(TypeX);
... now what? to code to get the usercontrol 
```

我曾尝试使用：

```
assembly.GetTypes().Where(t => t.IsSubclassOf(targetType)) 
```

但这并没有给出任何结果。

任何帮助表示赞赏

额外信息：

代码隐藏（简化）是：

```
 public partial class TypeX : UserControlBase
{
}

//we use this control:
<%@ Control Language="C#" Inherits="Loadcontrol " Codebehind="Loadcontrol .ascx.cs" %>
//with this codebehind
 public partial class Loadcontrol 
{
    OnPrerender()
    {
        string controlToLoad = "TypeX";
        //what to do here
    }

} 
```

我希望现在更清楚

更新：我制作了一个示例 web 应用程序来显示问题。下载地址：[WebApplication1.zip](http://filedump.org/files/9VJxLgAy1346247487.html)或使用：[下载镜像](https://dl.dropbox.com/u/19803636/WebApplication1.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:26:03.593

```
Type targetType = typeof(TypeX);
var control = Page.LoadControl(targetType, null); 
```

您需要在页面中使用此代码。

# c - 检测二值图像中的最大 Blob

> ID：12157984
> 
> 赞同：1
> 
> 时间：2012-08-28T11:07:49.773
> 
> 标签：c, image-processing, opencv

我想为我的项目检测二进制图像中最大的 BLOB。你能指导我怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T11:19:21.580

用于`findContours`查找图像中的所有 blob，并使用`contourArea`您可以计算 blob 的面积。所以只需找到面积最大的轮廓（斑点）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T11:19:36.977

一个好的开始点是[CVBloblib](http://opencv.willowgarage.com/wiki/cvBlobsLib)。我过去用过它，它工作正常。

那么这只是一个计算斑点面积或周长的问题，这取决于你想要什么:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:22:44.577

我不知道这里的最佳做法是什么，但我会这样做：

*   首先找到所有的blob。您可以使用 cvBlobslib 或 cvBlob 或 findContours 等。
*   然后将所有 blob 存储在向量中。按 blob 的区域对矢量进行排序。然后得到最后一个blob。

    bool sortBlobsASC(CBlob first, CBlob second) { return first.Area() < second.Area(); }

    std::sort(myvec.begin(), myvec.end(), sortBlobsASC);

# java-me - 回到较低级别的 j2me

> ID：12157987
> 
> 赞同：1
> 
> 时间：2012-08-28T11:07:54.437
> 
> 标签：java-me, midp, lcdui

我有一个文本字段（较低级别）调用一个函数，该函数调用一个更高级别的表单，该表单包含一个数据字段来获取日期并将其显示在我的文本字段较低级别。

问题是由于日期字段出现，我无法返回我的文本字段（较低级别）

```
public void formdatepicker() {

    final javax.microedition.lcdui.Command CONFIRM_COMMAND
            = new javax.microedition.lcdui.Command("OK",
            javax.microedition.lcdui.Command.OK, 1);
    javax.microedition.lcdui.Command CANCEL_COMMAND
            = new javax.microedition.lcdui.Command("Cancel",
            javax.microedition.lcdui.Command.CANCEL, 2);

    final DateField datefield = new DateField("Pick a date", DateField.DATE);
    form.append(datefield);
    form.addCommand(CONFIRM_COMMAND);
    form.addCommand(CANCEL_COMMAND);
    form.setCommandListener(new CommandListener() {                         
        public void commandAction(javax.microedition.lcdui.Command c, Displayable d) {
             if (c == CONFIRM_COMMAND) {
                Date date = datefield.getDate();
                display.setCurrent(null);// try to hide the current form to get 

             }                              
        }
    });

    Display.getInstance().getJ2MEDisplay().setCurrent(form); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:06:54.847

你的错误是关于做什么的错误假设`setCurrent(null)`。根据您的问题和代码片段，您似乎希望它以某种方式显示在`form`. 它没有，请参阅 API javadocs 中的解释（[可在线获取](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Display.html#setCurrent%28javax.microedition.lcdui.Displayable%29)）：

> 应用程序可以将 null 作为参数传递给 setCurrent()。这并没有将当前 Displayable 设置为 null 的效果；相反，当前的 Displayable 保持不变。但是，应用程序管理软件可能会将此调用解释为来自应用程序的请求，即请求将其置于后台...

如果您想使用`setCurrent(Displayable)`显示某个屏幕而不是当前屏幕，您需要将此屏幕作为参数传递给`setCurrent`.

* * *

为了完整起见，请注意还有[另一个版本](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Display.html#setCurrent%28javax.microedition.lcdui.Alert,%20javax.microedition.lcdui.Displayable%29 "API 文档")接受`setCurrent`两个参数，第一个是`Alert`，它的工作方式有点不同，但它不适用于您的情况，因为您使用`Form`not `Alert`。

# java - 使用类在 Java 中存储静态数据？

> ID：12157991
> 
> 赞同：7
> 
> 时间：2012-08-28T11:08:36.507
> 
> 标签：java, android

创建一个单独的类并将其用作仅包含静态数据变量的存储是一个坏主意吗？

我目前正在为 android 开发一个应用程序，但这个问题对于 Java 来说是普遍的。

在 android 的情况下，我正在跨活动移动，我想在那个单独的类中存储一些全局/静态标志/变量，并能够从我想要的任何活动中访问它们。

PS。仅会话时间需要数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T11:12:27.853

嗯，这不是一个坏主意。您可以在 Android 中使用这种类型的类。但这里有一个小的修正。您可以使该类扩展 Application 类并使用它来存储数据，而不是维护一个包含静态数据的类。

这是一个例子，

```
public class HelloApplication extends Application {
        private int globalVariable=1;

        public int getGlobalVariable() {
                return globalVariable;
        }

        public void setGlobalVariable(int globalVariable) {
                this.globalVariable = globalVariable;
        }
        @Override
        public void onCreate() {
                //reinitialize variable
        }
} 
```

在你的活动中，这样做，

```
(HelloApplication)getApplication()).setGlobalVariable(10);
int valiable=((HelloApplication)getApplication()).getGlobalVariable(); 
```

[取自这里..](http://www.helloandroid.com/tutorials/maintaining-global-application-state)

谈到 SharedPreference，您应该考虑仅在必须长时间存储值时才使用它们。如果没有，您应该使用 Application 类并使用 setter 和 getter，这是执行此操作的合法方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T11:10:09.117

您可以使用 SharedPreference 来存储标志和变量。

看看这个[Preference Demo](http://marakana.com/forums/android/examples/63.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T11:11:09.517

我建议您使用 Application 类，而不是创建一个静态类来保存全局变量。

见链接：

[安卓全局变量](https://stackoverflow.com/questions/1944656/android-global-variable)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T11:11:18.673

使用 SharedPreference 来存储标志和变量

[http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

对于全局变量：

使用 Android Application 类会更好。它旨在存储全局应用程序状态

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T11:15:42.783

我建议“从不”使用全局变量....

当您访问另一个活动时，您可以使用`Intent.putExtras(Name_parameter, "value_parameter")`

并接收值：`Bundle b = getIntent().getExtras();`其中 b 具有所有参数

干杯，

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T11:13:15.757

好 ！据我所知，这可能取决于您项目的规模！如果它相对较大，最好使用单独的类来存储静态数据（不仅仅是一个类，您可能需要保留两个或更多类，具体取决于所使用的静态数据的类型）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-28T11:17:47.630

我建议你应该用 Singleton 类封装你的全局类。[在单例设计模式](http://en.wikipedia.org/wiki/Singleton_pattern)中查看更多信息

# css - 如何垂直居中对齐位置：相对元素？

> ID：12157992
> 
> 赞同：15
> 
> 时间：2012-08-28T11:08:43.700
> 
> 标签：css, alignment, css-position, center

如何将**父容器**垂直居中对齐到具有的画布 `position:relative`？父容器有一个带有`position:absolute`. 子元素已定位在父容器的中心。

这是一个片段：

```
.container {
  position: relative;
  width: 300px;
  height: 300px;
  background-color: red;
  margin: auto;
}

.item {
  position: absolute;
  width: 100px;
  height: 100px;
  background-color: blue;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  margin: auto;
}
```

```
<div class="container">
  <div class="item"></div>
</div>
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-28T11:19:12.267

一种解决方案是`.container`用两个包装器包装你的；给出第一个`display: table;`and`height: 100%; width: 100%;`和第二个`display: table-cell;`and `vertical-align: middle;`。还要确保你的`body`和`html`有完整的高度。

这是一个小的工作演示：[little link](http://jsfiddle.net/exmRf/13/)。

另一种方法是应用于`top: 50%;`您的`.container`和`margin-top: -150px;`( `300px / 2 = 150px`)。（请注意，此方法要求您知道容器的确切高度，因此它**可能**不是您想要的，但也可能是！）。后一种方法的一个小演示：[另一个小链接](http://jsfiddle.net/exmRf/17/)。

我希望这有帮助！

# php - 如何使用 MVC 架构从单个 php 页面一次调用两个过程？

> ID：12157993
> 
> 赞同：0
> 
> 时间：2012-08-28T11:09:11.930
> 
> 标签：php, mysql, phpmyadmin

我需要调用两个在 MySQL 中创建并在 PHP 文件中返回记录的过程。我不能一个接一个地调用一个程序。如果我在另一个过程之后调用一个过程（从单个 PHP 页面），第二个过程将不会返回任何记录。

即使我`select`在一个过程（返回记录）之后执行一个返回记录的语句，也意味着`select`语句不会返回任何值。为什么会这样？我们如何在一个 PHP 页面中一个接一个地调用两个过程？

嗨，我在这里添加我的代码...

model.php 文件内容

```
<?php 
class DBoperation {
    function connect(){     
        $this->con=mysql_connect('localhost','root','');    
        mysql_select_db('test',$this->con);     
    }  

    function call proc2($empcode){
        $this->sql="call proc1('$empcode',@strGrpId,@strTodate,@strAccPrTodt,@strRecalculate)";
    }

    function callproc2($strEmpCode){  
        $this->sql="call proc2('$strEmpCode',@a,@b,@c,@d,@e,@f)";  
    }

    function execute(){
        $res = mysql_query($this->sql);
        return $res;
    }
}
?> 
```

view.php 文件内容

```
<?php 
require_once('../../model/model.php'); 
$empcode = $_SESSION['empcode'];
$obj=new DBoperation(); 
$obj->connect();
//calling first procedure 
$obj->callproc1($empcode);
$res = $obj->execute(); 
while($result=mysql_fetch_array($res)) {
    echo $result[0]; 
} 
//calling second procedure
$obj->callproc2($empcode); 
$fetch=$obj->execute();
while($fetch1=mysql_fetch_array($fetch)){
    echo $fetch1[0]; 
}
?> 
```

第二个过程不返回任何内容。如果我在第二个过程之后执行任何选择查询，我也不会返回任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:17:57.867

尝试这个

```
 <?php    
// New Connection

$db = new mysqli('localhost','user','pwd','Dbname');

// Check for errors

if(mysqli_connect_errno())

{

echo mysqli_connect_error();

}

// 1st Query

$result = $db->query("call proc1($empcode)");

   if($result)

     {

            while ($row = $result->fetch_object())

             {
              echo $col1="$row->Column Name1"."<br>";
              echo $col2="$row->Column Name2"."<br>";
             }

             // Free result set
             $result->close();
             $db->next_result();
     }

    // 2nd Query
    $result = $db->query("call proc2('$empcode')");
    if($result)   

    {

            while ($row = $result->fetch_object())

               {
                echo $col1="$row->Column Name1"."<br>";
                echo $col2="$row->Column Name2"."<br>";
               }

               // Free result set
               $result->close();
               $db->next_result();
    }
          else echo($db->error);

        // Close connection
         $db->close();

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-22T09:01:16.550

先采购 `$db->next_result();`后执行。

# c# - 正文 onLoad 没有调用动态制作的 javascript 函数

> ID：12157994
> 
> 赞同：1
> 
> 时间：2012-08-28T11:09:16.397
> 
> 标签：c#, javascript, asp.net, visual-studio-2010

感谢您到目前为止的所有帮助，我已经进行了以下更改

这是运行时的代码：

```
<body>
<form method="post" action="ResultsDetails.aspx" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE"    value="/wEPDwUJNzQ5NzY1NjU0ZGRuWExqnYyaWn0sRggTtOIdHlawc3aZvdNLKpOq0D+uMQ==" />
</div>

 <div id="placeholder" style="width:600px;height:300px;"></div>

<script type="text/javascript">
//<![CDATA[
var arrayOfResults = new Array(); 
 arrayOfResults[0] = 2; 
 arrayOfResults[1] = 4; 
arrayOfResults[2] = 5; 
arrayOfResults[3] = 1; 
arrayOfResults[4] = 4; 
 var numberArray = Array(1, 2, 3, 4, 5); 
  //]]>
</script>
</form>

<div id="codeGeneration">
  <script type="text/javascript">
   $(document).ready(function () {
      $.plot($('#placeholder'), [arrayOfResults, numberArray]); 
     });

</script>
</div>

</body> 
```

绘图方法正在运行，但我不断收到错误说数组尚未初始化？

我在用着

```
 ClientScript.RegisterStartupScript(this.GetType(), "run", sb.ToString() ,true); 
```

编写数组代码。

* * *

Sloved 我做了以下

```
 private void generateJScriptArray(int[] array)
{
    StringBuilder sb = new StringBuilder();        
    sb.Append("var arrayOfResults = Array(); \n ");

    for (int i = 0; i < array.Length; i++)
    {
        sb.Append("arrayOfResults[" + i + "] = " + array[i] + "; \n ");
    }

    sb.Append("var numberArray = Array(1, 2, 3, 4, 5); \n");

    sb.Append("alert(numberArray[0]); \n");

    sb.Append("$(document).ready(function () { \n  $.plot($('#placeholder'), [arrayOfResults, numberArray]); \n });");

    ClientScript.RegisterStartupScript(this.GetType(), "run", sb.ToString() ,true);
} 
```

感谢所有帮助过的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T11:13:25.750

使用[ScriptManager](http://msdn.microsoft.com/en-us/library/bb359558.aspx)注册启动脚本。像这样的东西：

```
ScriptManager.RegisterStartupScript(this, this.GetType(),"somekey","your run script",true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:37:02.730

你可以试试

```
<body onload="javascript:run()"> 
```

或者看到你正在加载 jQuery，你为什么不尝试使用 jQuery 的 document ready 事件而不是 body *onload来执行**run*函数。

 *```
$(function(){
    run();
}); 
```

初始化numberArray数组时要考虑到，应该是

```
var numberArray = [1, 2, 3, 4, 5];
//instead of
int [] numberArray = {1, 2, 3, 4, 5}; //It feels like C# 
```

另外，删除以下

```
(function () { 
    $.plot($('#placeholder'), [arrayOfResults, numberArray]);
} //missing ); 
```

从你的*运行*功能，只留下情节线

```
$.plot($('#placeholder'), [arrayOfResults, numberArray]); 
```

因为当页面和所有外部脚本被加载（使用 onload 或 jQuery 文档准备好）时，将调用函数*run*

希望能帮助到你，

gR

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T11:36:34.690

您也可以在不使用脚本管理器的情况下执行此操作..

```
string Code = "<script> alert('Foo Alert');</script>";
ClientScript.RegisterStartupScript(this.GetType(), "someKey", Code); 
```*

# android - 透明度不在画布中绘制

> ID：12157995
> 
> 赞同：1
> 
> 时间：2012-08-28T11:09:18.070
> 
> 标签：android

祝大家有美好的一天！

```
Drawable drawable = contex.getResources().getDrawable(R.drawable.some_image);
drawable.setBounds(rect);
drawable.draw(canvas); 
```

当我使用自动创建的“app_icon.png”时，透明度非常好。但是，当我对自己的具有透明度的图像（在 GIMP 中创建）使用相同的代码时，所有透明度都被替换为白色。

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:15:02.263

这可能是因为默认情况下 gimp 会保存透明像素的颜色（此处为白色）。尝试告诉它不要这样做（保存时可以选择）。

# c# - ASP.NET MVC 3 - 操作可能会破坏运行时

> ID：12157997
> 
> 赞同：4
> 
> 时间：2012-08-28T11:09:21.947
> 
> 标签：c#, .net, asp.net-mvc-3, verificationexception

我有一个 MVC3.0 (.Net 4.0) 应用程序，它在 Windows 7 开发机器（使用 VS2010）上运行得非常好。相同的应用程序也可以在一台带有 IIS 7 的 Windows 8 服务器上正常运行。

但是，同样的应用程序在其他带有 IIS7 的 Windows 8 Server 上引发以下异常。

**操作可能会破坏运行时的稳定性。**

> 堆栈跟踪：
> 
> *[VerificationException：操作可能会破坏运行时。] System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute () System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)*

请，有人可以帮助我了解导致此问题的原因吗？

它是 .NET Framework 4.0 吗？（我验证了两台服务器都安装了 .Net Framework 4.0）

是 IIS 和 MVC 3.0 问题吗？（我们是否需要单独安装 MVC 3.0 才能运行 IIS？）

我们如何设置 Web 应用程序以在 IIS 7 中以 FULL TRUST 运行？

或者完全是别的东西（尝试用 spnet_regiis.exe -ir 注册 iis 也没有帮助）

是否有必要在 Web 服务器上安装此[http://www.microsoft.com/en-us/download/details.aspx?id=1491 ？](http://www.microsoft.com/en-us/download/details.aspx?id=1491)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T12:16:55.953

当`VerificationException`JIT 编译器在程序集中发现不匹配的类型信息或无​​效的 IL 指令时，将引发 。例如，调用者和被调用方法之间的方法签名（或返回类型）不匹配（当方法的签名被更改且依赖程序集未重新编译时）。

要解决问题，您可以使用`peverify`检查程序集：

```
peverify MyCompany.WebAppMainAssembly.dll 
```

它将告诉哪个成员导致了冲突。类似的东西`found <method sig>, expected <expected signature>`。现在您知道是什么组件导致了问题。如有必要，将其重新安装在 GAC 中。MVC、EF 和 Unity 都有 msi 安装程序，或者手动安装...

顺便说一句，运行`peverify`打开`Visual Studio Command Prompt`或查找`C:\Program Files (x86)\Microsoft SDKs\Windows\<winver>\Bin`（此路径可以更改一点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T15:53:26.547

该问题可能与此修补程序有关：http: [//support.microsoft.com/kb/2748645](http://support.microsoft.com/kb/2748645)

根据您对问题的解释和您已经完成的测试，这个框架错误听起来很可能是罪魁祸首。即使您的目标是 .Net 4.0，.Net 4.5 也会在安装后替换 .Net 4.0。

您的装有 VS2010 的 Windows 7 机器可能没有 .Net 4.5，因此不受该错误的影响。

工作的 Windows 8 服务器（通常与 .Net 4.5 一起提供）可能已经更新，因此已经有这个修补程序

因此，无法使用此修补程序的 Windows 8 服务器可能尚未更新。（运行正常的 Windows 更新最终也会获得此更新）

您可能需要比较两台服务器上安装的更新以确保环境匹配。

如果您要为安装了 .Net 4.5 的机器进行开发，您需要考虑切换到 VS2012 或手动安装 .Net 4.5 以反映更改。但要小心，如果您还针对没有 .Net 4.5 的机器，还有其他重大更改...

[Visual Studio 2012 中的 Visual C# 重大更改](http://msdn.microsoft.com/en-us/library/hh678682%28v=vs.110%29.aspx "Visual Studio 2012 中的 Visual C# 重大更改")

[.NET Framework 4.5 中的应用程序兼容性](http://msdn.microsoft.com/en-us/library/hh367887.aspx ".NET Framework 4.5 中的应用程序兼容性")

# xml - 在导入的构建脚本中未执行目标 -post-jar

> ID：12157998
> 
> 赞同：1
> 
> 时间：2012-08-28T11:09:28.187
> 
> 标签：xml, netbeans, import, target, build.xml

我对netbeans及其构建定义还很陌生，所以我想要实现的目标可能是不可能的......

我正在使用 netbeans 开发几个插件，我希望在生成 bee 后将所有 jar 文件复制到一个公共目录中。

我可以`<target name="-post-jar">`在每个`build.xml`文件中使用一个块来做到这一点，但是由于将来会有更多常见的事情要做，我想将复制指令放在一个公共文件中，该文件将包含在`build.xml`每个插件的每个文件中。

这是我所做的：

我`movejar.xml`在所有项目所在的目录中创建了一个文件（`/home/xxx/dev/plugins`），其中包含以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="movejar" default="default" basedir=".">
    <target name="-post-jar">
        <property name="mcp.destpath" value="/home/xxx/dev/plugins" />
        <echo message="Moving ${dist.jar} to ${mcp.destpath}" />
        <copy file="${dist.jar}" flatten="true" todir="${mcp.destpath}" />
    </target>
</project> 
```

然后我添加了一条`import`指令`/home/xxx/dev/plugins/myplugin/build.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="myplugin" default="default" basedir=".">
    <description>Builds, tests, and runs the project myplugin.</description>
    <import file="nbproject/build-impl.xml"/>
    <import file="../movejar.xml"/>
</project> 
```

导入很好，因为当我放入`<echo>foo</echo>`（`movejar.xml`在该`target`部分之外）时，它会显示在编译日志中。

问题是`-post-jar`目标没有在编译时执行（当然在项目属性中启用了jar生成），echo没有出现在编译日志中并且没有复制jar文件，也没有错误......

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:51:33.330

好吧，搞定了，我有点羞耻我之前没有尝试过......

简短版：`import`你在 netbeans 之前的东西`import`。

导入事物时，第一个定义会“锁定”未来的定义，因此先前定义的任何内容都`import`无法在以后覆盖定义`import`...

Netbeans 自动生成所有可能的`target`部分`nbproject/build-impl.xml`，甚至是空部分，因此您需要定义的所有内容都必须预先导入（而`build.xml`在导入后可以在根目录添加目标部分`build-impl.xml`没有问题......）。